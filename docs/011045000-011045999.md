# StackOverflow 问答 11045000-11045999

# javascript - ExternalInterface.call 不在 IE 中返回对象

> ID：11045002
> 
> 赞同：2
> 
> 时间：2012-06-15T05:21:16.127
> 
> 标签：javascript, actionscript-3

我正在 actionscript 中进行以下调用

```
var data:Object = ExternalInterface.call("getData");
trace("data is", data);  // data is null in IE7-9, but works in FF 
```

到javascript中的以下函数

```
function getData() {
    var data = {example : "data"};
    console.log("data", data); //displays as expected in the console
    return data;
} 
```

使用 swfObject2 嵌入以下代码（从我现有的代码中复制并清理一下，尽管下面会有一些未定义的变量）：

```
var This                = this,
    divId               = "myDiv",
    widgetData          = serviceData.flashvars,
    swfURL              = "http://mysite.com/my.swf",
    flashvars           = widgetData,  //external object, not used in this case
    params              = {
        movie: serviceData.swfURL,
        pluginspage: "http://www.adobe.com/go/getflashplayer",
        align: "middle",
        allowScriptAccess: "always",
        quality: "high",
        allowFullScreen: "true",
        wmode: "transparent",
        bgcolor: "#FFFFFF",
        menu: "false"
    },
    expressInstallURL   = "http://mysite.com/expressInstall2.swf?2",
    attributes          = {id : divId + "_mySWF", name: divId + "_mySWF"},
    callback            = function (e) {
        console.log("player loaded");
    };
flashVideoPlayer = swfobject.embedSWF(swfURL, divId, widgetData.width, widgetData.height, "10", expressInstallURL, flashvars, params, attributes, callback); 
```

并且所有常用的都包含在 html 中，例如 ids、allowscriptaccess，而且我不在表单标签内。我知道没有初始化问题，因为 javascript 在 getData 中显示数据，因此该函数必须在调用之前存在，等等。问题似乎在于 javascript 将对象返回到闪存。

[这篇文章](https://stackoverflow.com/questions/701200/externalinterface-call-not-getting-return-value?rq=1)似乎也没有帮助，但我的情况有点不同，因为我使用的是 swfObject。我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:46:30.607

我不确定你提供的那一行 AS3 代码是否就是你所得到的，但如果是这样，你可以尝试以下方法：

```
private function sendToJS(e:MouseEvent):void {  
    if(ExternalInterface.available) {  
        ExternalInterface.call("fromAS", doSomethingHere);  
    }  
} 
```

我自己用过一次。

# openid - 升级 DotNetOpenAuth 后 OpenIdButton 获取邮件地址失败

> ID：11045007
> 
> 赞同：2
> 
> 时间：2012-06-15T05:21:53.107
> 
> 标签：openid, dotnetopenauth

我一直在研究 DotNetOpenAuth 以使用 Google 应用程序进行身份验证并要求返回电子邮件地址。

当我使用以前版本的 DotNetOpenAuth.dll 时，我有一个工作程序。但是当我用当前版本更新 Dll 时，我的代码就坏了。该应用程序能够进行身份验证，但不回复电子邮件地址。

我的代码是：

```
<rp:OpenIdButton runat="server" ImageUrl="~/images/google.jpg" Text="Login with Google" ID="OpenIdButton1"
            Identifier="https://www.google.com/accounts/o8/id" LogOnMode="None" OnLoggingIn="test" OnLoggedIn="OpenIdLogin1_LoggedIn">
            <Extensions>
                <sreg:ClaimsRequest Email="Require" />
            </Extensions> 
```

```
protected void OpenIdLogin1_LoggedIn(object sender, OpenIdEventArgs e)
    {
        // Hide login button.
        OpenIdButton1.Visible = false;        

        // Get email.
        //ClaimsResponse profile = e.Response.GetExtension<ClaimsResponse>();
        ClaimsResponse profile = e.Response.GetUntrustedExtension<ClaimsResponse>();
        string email = profile.Email;  

And the code breaks at the above line. 
```

新的 Dll 有什么变化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:15:34.023

您的代码依赖于[AXFetchAsSregTransform 行为](http://www.dotnetopenauth.net/developers/help/the-axfetchassregtransform-behavior/)的使用。请查看链接并确保您的 web.config 文件在该`<configSections>`区域中更新以适应最新 DotNetOpenAuth 所需的新 xml。您的 web.config 可能已经声明了 AXFetchAsSregTransform，但在您更新 configSections 之前它会被忽略。

顺便说一句，您`not`通常应该使用`GetUntrustedExtension`.

# javascript - Javascript函数的应用程序范围的身份验证处理程序？

> ID：11045012
> 
> 赞同：1
> 
> 时间：2012-06-15T05:22:12.313
> 
> 标签：javascript, backbone.js

处理页面上一堆 Javascript 操作的身份验证而不用“if authenticated()”检查乱扔代码库的最佳方法是什么？

例如：我们有 10 个赞按钮、一些评论按钮和一些其他需要身份验证的操作。当用户未通过身份验证时，我们希望将他们重定向到登录/注册页面。但是，我们希望避免在 if (user.isAuthenticated()) { xxx } 调用中乱扔代码。在我们的特定情况下，我们希望将这些主要用于主干中的事件，尽管我认为这对于一般问题并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:41:38.653

在 underscorejs 的帮助下。你可以这样写：

```
function authWrapper(func){
    if (user.isAuthenticated()) {
     func.apply(this, _.rest(arguments));
    }else{
       ...
    }
} 
```

假设你使用 jQuery，在绑定事件时，这样写：

```
$(...).bind('event', _.wrap(function(...){...}, authWrapper)); 
```

或者

```
$(...).bind('event', _.wrap(thehandler, authWrapper)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:44:58.243

如何创建一个进行检查的方法，如果身份验证正常，则使用回调来调用应该调用的方法？就像是：

```
function checkNdRun(cb,params){
  params = [].slice.call(params);
  if (/*[authenticationCheckingLogic here]*/){
    cb.apply(null,params);
  } else {
    alert('please login first');
  }
}
//usage example
somebutton.onclick = 
     function(e){checkNdRun(functionToRun,e,/*[other parameters]*/);}; 
```

# scala - 如何以功能方式验证参数？

> ID：11045013
> 
> 赞同：7
> 
> 时间：2012-06-15T05:22:12.677
> 
> 标签：scala, functional-programming, playframework, playframework-2.0

我正在编写 Scala/Play 2.0 应用程序，我希望我的代码根据请求返回不同的页面。这是我的代码：

```
// Validate client and return temporary credentials
def requestToken = Action { request =>
  // Authorization header may present or not
  val authHeader = parseHeaders(request headers AUTHORIZATION)
  // Authorization header may contain such keys or not
  val clientKey = authHeader("oauth_consumer_key")
  val signature = authHeader("oauth_signature")

  if (authenticateClient(clientKey, signature)) {
    ...
    Ok(...)
  } else {
    Unauthorized(...)
  } 
```

}

当请求格式错误并且缺少某些标头时会出现问题，然后引发 NoSuchElementException。

在命令式语言中，我会像这样验证每一步：

```
if (!request.headers.contains(AUTHORIZATION))
  return Unathorized

val authHeader = parseHeaders(request headers AUTHORIZATION)

if (!authHeader.contains("oauth_consumer_key") || !authHeader.contains("oauth_signature"))
  return Unathorized

val clientKey = authHeader("oauth_consumer_key")
val signature = authHeader("oauth_signature")

... 
```

但是我应该怎么做才能以功能性的方式解决这样的问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T06:41:25.433

您可以使用`authHeader.get(key)`which 返回一个 Option[B]。您的代码将如下所示：

```
val result = for {
  auth <- request.headers.get(AUTHORIZATION)
  authHeader = parseHeaders(auth)
  clientKey <- authHeader.get("oauth_consumer_key")
  signature <- authHeader.get("oauth_signature")
} yield { ... }

result.getOrElse(Unauthorized) 
```

解释：

`None`只有在没有值的情况下才会执行整个表达式。因此，如果所有标题都存在，您将得到一个`result`of `Some[A]`，如果一个或多个不存在，您将得到`None`. `result.getOrElse(Unauthorized)`将返回包含的值 for`Some[A]`和`Unauthorized`for `None`。

# php - WordPress 动作类型

> ID：11045022
> 
> 赞同：0
> 
> 时间：2012-06-15T05:23:18.700
> 
> 标签：php, wordpress

我需要确定用户是否在数据库中插入帖子

我这里有这个功能

```
add_action("publish_post", "myFunc");

function myFunc(){
    echo "Success!";
} 
```

我已经在 QuickPress 小部件上尝试过，它工作正常，但在“添加新帖子”中我没有得到任何回应。

“添加新帖子”模块需要什么操作类型？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:07:18.677

动作名称是`save_post`(http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)。添加到此处的任何函数都可以将帖子 ID 作为参数提供，以执行您需要的操作。

缺点是每次保存帖子时都会调用它。

此操作用于从帖子编辑页面保存自定义元框值

希望这可以帮助

# c# - 不允许我创建超过 1 个 LineRenderer

> ID：11045024
> 
> 赞同：1
> 
> 时间：2012-06-15T05:23:29.427
> 
> 标签：c#, unity3d

我试图在运行时（当用户按下按钮时）创建 LineRenderers。

**我的问题：**我永远不能创建多个 LineRenderer。当我创建第二个时，LineRenderer 对象始终为 NULL。

我究竟做错了什么？**您能否就创建多个 LineRenderer 需要做什么提供建议？**

```
public class AppInit : MonoBehaviour {

        public Vector3[] TEST_VERTICES;
        public const int SPEED = 5;
        public List<LineRenderer> lines;

        // Use this for initialization
        void Start () {
             TEST_VERTICES = new Vector3[10] {new Vector3(0,0,0), new Vector3(10,10,10), new Vector3(30,10,50), new Vector3(30,40,50), 
                                                                            new Vector3(10,30,90), new Vector3(10,20,40), new Vector3(50,20,40), new Vector3(70,80,90), 
                                                                            new Vector3(10,70,20), new Vector3(60,10,0)};
             lines = new List<LineRenderer>();
        }

        // Update is called once per frame
        void Update () {
             float x = Input.GetAxis ("Horizontal") * Time.deltaTime * SPEED;
             float z = 0;
             float y = Input.GetAxis ("Vertical")   * Time.deltaTime * SPEED;

             gameObject.transform.Translate (new Vector3(x,y,z));
        }

        void OnGUI() {
             if (GUI.Button (new Rect(10,10,100,20), "Create"))
                 createString(TEST_VERTICES);
        }

        public bool createString( Vector3[] vertices ) {
             LineRenderer lRend = gameObject.AddComponent ("LineRenderer") as LineRenderer;
             //LineRenderer lRend = new LineRenderer();
             lines.Add(lRend);
             Debug.Log ("IS NULL"+(lRend == null).ToString ());
             lRend.SetColors (new Color(100,0,0,100), new Color(0,0,100,100));
             lRend.SetWidth(10, 1);
             lRend.SetVertexCount(vertices.Length);

             for (int i=0; i<vertices.Length; i++)
                 lRend.SetPosition(i, vertices[i]);

             return true;
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T18:42:43.063

正如 Iridium 指出的那样，您只能将每种类型的一个组件添加到游戏对象中。所以你想为每个新的 linerenderer 创建一个新的游戏对象。在这里执行此操作的简单方法是更改​​：

```
LineRenderer lRend = gameObject.AddComponent("LineRenderer") as LineRenderer; 
```

至：

```
LineRenderer lRend = new GameObject().AddComponent("LineRenderer") as LineRenderer; 
```

然后，如果您稍后需要访问 linerenderer 的游戏对象，您可以通过 lRend.gameObject 来实现。或行[index].gameObject。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:18:24.267

快速谷歌显示此页面：[http](http://answers.unity3d.com/questions/47575/create-a-linerender-in-c.html) ://answers.unity3d.com/questions/47575/create-a-linerender-in-c.html这表明您不能将相同类型的多个实例添加到单个`GameObject`，并且建议`GameObject`应该使用多个实例。

# objective-c - 用于交互式 Unix 命令的 Cocoa 包装器

> ID：11045025
> 
> 赞同：9
> 
> 时间：2012-06-15T05:23:35.237
> 
> 标签：objective-c, cocoa, unix, command-line-tool, interactive-mode

好的，所以我知道你可以创建一个 NSTask 来使用 Objective-C 运行命令行工具：

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"/usr/bin/gdb"];
[task launch]; 
```

我只是想知道是否有一种方法可以与交互式命令行工具（例如`gdb`. 这将涉及根据用户交互（如或with ）提供命令输入`run`，然后根据其输出的信息做出反应。`kill``quit``gdb`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:55:22.733

您可以将 NSTask 的`setStandardInput:`,`setStandardOutput:`和`setStandardError:`选择器与 NSPipe 实例结合使用来与启动的程序进行通信。

例如，要读取任务的输出：

```
task = [[NSTask alloc] init];
[task setStandardOutput: [NSPipe pipe]];
[task setStandardError: [task standardOutput]]; // Get standard error output too
[task setLaunchPath: @"/usr/bin/gdb"];
[task launch]; 
```

然后，您可以获得一个`NSFileHandle`可用于读取任务输出的实例：

```
NSFileHandle *readFromMe = [[task standardOutput] fileHandleForReading]; 
```

要设置用于向 gdb 发送命令的管道，您需要添加

```
[task setStandardInput: [NSPipe pipe]]; 
```

*在*您启动任务之前。然后你得到`NSFileHandle`了

```
NSFileHandle *writeToMe = [[task standardInput] fileHandleForWriting]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T06:02:36.910

[NSTaks 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)的使用`setStandardInput:`和`setStandardOutput:`方法。

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"/usr/bin/gdb"];

NSPipe *outputpipe=[[NSPipe alloc]init];
NSPipe *errorpipe=[[NSPipe alloc]init];
NSFileHandle *output,*error;

[task setArguments: arguments];
[task setStandardOutput:outputpipe];
[task setStandardError:errorpipe];

NSLog(@"%@",arguments);

output=[outputpipe fileHandleForReading];    
error=[errorpipe  fileHandleForReading];    
[task launch]; 

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receivedData:)  name: NSFileHandleReadCompletionNotification object:output];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receivedError:)  name: NSFileHandleReadCompletionNotification object:error];    
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(TaskCompletion:)  name: NSTaskDidTerminateNotification object:task];

//[input writeData:[NSMutableData initWithString:@"test"]];
[output readInBackgroundAndNotify];
[error readInBackgroundAndNotify];

[task waitUntilExit];
[outputpipe release];
[errorpipe release];
[task release];

-(void) receivedData:(NSNotification*) rec_not {
    NSFileHandle *out=[[task standardOutput] fileHandleForReading]; 
    NSData *dataOutput=[[rec_not userInfo] objectForKey:NSFileHandleNotificationDataItem];

    if( !dataOutput)
        NSLog(@">>>>>>>>>>>>>>Empty Data");

    NSString *strfromdata=[[NSString alloc] initWithData:dataOutput encoding:NSUTF8StringEncoding];    
    [out readInBackgroundAndNotify];
    [strfromdata release];
}

/* Called when there is some data in the error pipe */
-(void) receivedError:(NSNotification*) rec_not {
    NSFileHandle *err=[[task standardError] fileHandleForReading];  
    NSData *dataOutput=[[rec_not userInfo] objectForKey:NSFileHandleNotificationDataItem];

    if( !dataOutput)    
        NSLog(@">>>>>>>>>>>>>>Empty Data");
    else {
        NSString *strfromdata=[[NSString alloc] initWithData:dataOutput encoding:NSUTF8StringEncoding];
    [strfromdata release];
    }
    [err readInBackgroundAndNotify];
}

/* Called when the task is complete */
-(void) TaskCompletion :(NSNotification*) rec_not { 
    NSLog(@"task ended");
} 
```

# javascript - Knockout.js - 如何在计算的 observable 中获取 observable 属性的值？

> ID：11045029
> 
> 赞同：13
> 
> 时间：2012-06-15T05:24:01.397
> 
> 标签：javascript, knockout.js

我有以下 Knockout.js 对象：

```
var viewModel = {
    description : ko.observable(""),
    Name : ko.observable(""),
    productid : ko.observable(""),
    productmodel : ko.observable(""),
    productnumber : ko.observable(""),
    text_relevance : ko.observable(""),
    mydunamicfield : ko.computed(function() {
        return "bq=(and " +
            ((this.description == "") ? "" : ("description:" + this.description + " ")) +
            ")";
    } , this)
}; 
```

但是该`mydunamicfield`属性没有产生正确的连接结果。如果我尝试`this.description()`在另一个函数中引用，我会在页面加载时看到以下错误消息：

```
Property 'description' of object [object Window] is not a function 
```

在这种情况下有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T09:17:48.880

首先，您必须`this.description`像`this.description()`要获取其值一样引用。

其次，尝试将您的`computed`字段放在您的之外`viewModel`（因为在您创建observable时没有定义`'this'`它`viewModel`本身。`computed`

有关工作示例，请参见[http://jsfiddle.net/rAEqK/2/ 。](http://jsfiddle.net/rAEqK/2/)

# jquery - 如何使用jquery更改@media only标签中媒体标签中的CSS？

> ID：11045032
> 
> 赞同：2
> 
> 时间：2012-06-15T05:24:10.860
> 
> 标签：jquery, css

我正在为 iphone 和 ipad 制作网页，假设我有以下 CSS：

```
#somediv {
background-color: white;
}

@media only screen and (max-device-width: 1024px) and (orientation:landscape) {
            #somediv {
                color:red;
            }       
        }

        @media only screen and (max-device-width: 1024px) and (orientation:portrait) { 
            #somediv {
                color:green;
            }          
    } 
```

我有两个问题： 1）如何使我可以使用一个 jquery 选择器来更改 somediv 的所有这些属性以具有“颜色：蓝色”？

2）我如何使它只有方向：肖像一个是“颜色：蓝色”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:44:29.333

[https://github.com/paulirish/matchMedia.js/](https://github.com/paulirish/matchMedia.js/)

是在 javascript 中进行媒体查询的好选择。

# design-patterns - 当观察者修改对象状态时使用观察者模式

> ID：11045044
> 
> 赞同：2
> 
> 时间：2012-06-15T05:25:15.743
> 
> 标签：design-patterns

我有一个`C`有观察者的类，`A`并附`B`在它上面。观察者`B`修改它接收到的对象的状态，然后必须将其通知回`A`. 到目前为止，我只是`C`再次从观察者调用类 notifyObservers()`B`但这有一些问题：

*   很难理解
*   `B`需要忽略第二次更新，因为它引发了更新

我最初的想法是`B`通知自己的观察者，其中`A`也注册为观察者`B`。

有一个更好的方法吗？我应该使用不同的模式来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:45:12.353

您可能不应该引入观察者观察观察者（B 观察 A）。这听起来不像是编写或调试的有趣时间。

我猜你这里有一个循环依赖。当观察者需要在被观察者中反映当前的事务状态时，观察者模式非常有效，但它们没有直接关系。在我看来，在这种特殊情况下，A 与 C 有直接关系，因为 A 对 C 的了解足以改变其状态，但是您依赖于观察者模式将信息从 C 传播到 A 可以直接传播。你现在有不同“种类”的事件——A 产生的那种和“其他”的——这一事实也表明 C 和 A 之间的关系不是你在 C 和 B 之间的观察者/观察到的关系。 C和A也是一对一的吗？这将更多地证明您只是在这里应用了错误的模式。另一方面，

我已经在我自己的代码中看到了这种情况，当时看起来我有递归，因为我的 C 在我的 A 的要求下更改，然后导致 C 发送另一个导致 A 再次采取相同操作的事件。我当时发现的解决方案，我特别不喜欢，是引入不同的观察者“类别”，并为每个类别维护单独的观察者列表和本质上不同类型的事件，以便可以与观察者对话的类别和导致新事件只会导致其他类别看到的事件。换句话说，一个高级观察者和一个低级观察者，只有高级观察者才能触发低级事件。正如我所说，我不喜欢它。:)

综上所述，我建议明确 C 和 A 之间的关系，并使用 Observer 保留 C 和 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:03:26.600

也许[中介者模式](http://sourcemaking.com/design_patterns/mediator)就是您正在寻找的。

在这种模式中，您有一个主管来处理多个（不同）同事对象之间的通信。同事直接认识他们的主管，他们只与主管沟通。主任管理同事。因此它解耦了同事对象并简化了通信协议。

也许您可以根据需要对其进行调整。

# android - Android：从 Eclipse 将已发布的应用程序版本安装到设备

> ID：11045046
> 
> 赞同：1
> 
> 时间：2012-06-15T05:25:35.580
> 
> 标签：android, release, apk

当我想编译我的应用程序的发布版本时，我对其进行签名并重命名 apk 文件以在文件名中包含版本号。要在我的设备上启动应用程序，我使用 adb。有没有办法在 Eclipse 中做到这一点？

另一个相关问题：如果我按下 Run (Ctrl-F11)，Eclipse 将编译我的 apk 并在设备上运行它。如果我的项目名为“My App”，则会生成文件“My App.apk”。如果我能让 Eclipse 生成一个与我发布的版本具有相同文件名的文件名，那么 Eclipse 也可以使用 Run 命令安装它。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:37:26.437

这目前在 Eclipse 中不可定制。如果需要自动化，请使用 Ant。然后，您可以根据需要从 Eclipse 启动 Ant 任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T15:05:29.340

使命令行选项更容易的建议...

创建一个顶级目录。将 adb.exe、AdbWinApi.dll 和 AdbWinUsbApi.dll 复制到其中，加上 .apk。然后你可以这样做...

C:\Users\your_username>CD 顶部

C:\Users\your_username\top>adb -d install yourapp.apk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:38:29.840

您可以使用 Ant 实现您的问题中提到的所有内容。您还可以从 Eclipse 运行 Ant 命令。

以下资源会有所帮助：

*   [使用 Ant 自动构建 Android 应用程序](http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html)
*   [从命令行构建和运行](http://developer.android.com/guide/developing/building/building-cmdline.html)

# java - 无法访问 ITask 类型的封闭实例。

> ID：11045048
> 
> 赞同：1
> 
> 时间：2012-06-15T05:25:55.663
> 
> 标签：java

我想让具有多个内部类的抽象类对其进行扩展，并可以通过静态方法创建其内部类的实例，但我收到编译器错误“无法访问 ITask 类型的封闭实例。必须使用封闭类型的实例来限定分配ITask（例如 xnew A()，其中 x 是 ITask 的一个实例）。”

我[发现](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)内部类应该由外部类的实例创建，但我的外部类有抽象方法，我无法创建它的实例。我制作了扩展父级的内部类，因为我不会控制它们的创建。那么有什么方法可以使我的模式起作用。

我的代码：

```
public abstract class ITask {
public abstract void Execute(Subscriber itm);

static public ITask CreateSendTask(Buffer buffer)
{
    return new SendData(buffer);
}

static public ITask CreateSTTask(Ticket sid)
{
    return new StartTransmission(sid);
}

static public ITask CreateETTask(Ticket sid)
{
    return new EndTransmission(sid);
}

private class SendData extends ITask
{
         /// some implemetation...
}

private class StartTransmission extends ITask
{
         /// some implemetation...
}

private class EndTransmission extends ITask
{
    /// some implemetation...
} 
```

}

问题出在 Create(.*)Task 方法上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:41:05.003

如果内部类是从静态方法创建的，则它们应该是静态的，因此不需要访问封闭的 ITask。

您还应该尊重 Java 命名约定：方法以小写字母开头。

# ant - Sun WTK Preverify 在 J2ME-java/lang/NoClassDefFoundError 中失败

> ID：11045052
> 
> 赞同：1
> 
> 时间：2012-06-15T05:26:40.720
> 
> 标签：ant, java-me, midp, java-wireless-toolkit

我已经编写了 ANT 脚本来预先验证类。，

```
 <property name="wtkHome" location="C:/WTK2.5.2"> </property>
 <property name="midp_lib" value="${wtkHome}/lib/midpapi21.jar"></property>
   .... 
  ........
<property name="build" value="build"/>
.....
   ......    

    <target name="preverify">
            <mkdir dir="${build}/preverified"/>
                <exec executable="${wtkHome}/bin/preverify">
                  <arg line="-classpath ${wtkHome}/lib"/>
             (or) <arg line="-classpath ${midp_lib}"/>
                  <arg line="-d ${build}/preverified"/>
                  <arg line="${build}/classes"/>
                </exec>
        </target> 
```

执行上述脚本时，无法在类路径中找到 midp 类，因此显示错误，

```
[exec] Error preverifying class first.MCCanvas
[exec] java/lang/NoClassDefFoundError: javax/microedition/lcdui/Canvas
[exec] Result: 1 
```

但是所需的库在类路径中，请注意 MIDlet 和 Canvas 类的编译很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:43:20.583

为什么不用天线？[http://antenna.sourceforge.net/](http://antenna.sourceforge.net/)

您的构建脚本将使用：

```
    <wtkpreverify cldc="CLDC-1.0" srcdir="${build}/classes" destdir="${build}/preverified" classpath="${wtk.home}/lib/cldcapi11.jar;${wtk.home }/lib/midpapi20.jar" />

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:42:24.040

尝试使用反斜杠“\”

```
<arg line="-classpath C:\WTK2.5.2\lib\midpapi21.jar"/> 
```

# xcode - 调整 UIViewController 视图的大小

> ID：11045061
> 
> 赞同：1
> 
> 时间：2012-06-15T05:27:41.403
> 
> 标签：xcode

我是 iPhone/Ipad 应用程序开发的新手，只是用 Xcode 学习 UIViewController、UIView 等，在使用 uiviewcontroller 时想要调整大小，但我的技巧逻辑不起作用。如果您对此有任何想法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:05:35.957

我认为你看起来像这样。

```
(IBAction)buttonPressed:(id)sender
{
menuView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgground.jpg"]];// i used 1 view name is menuView
UIViewController *menu =[[UIViewController alloc] init];menu.view = menuView;
[menu setModalTransitionStyle:UIModalTransitionStylePartialCurl];
[self presentModalViewController:menu animated:YES];
[menu release];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T05:46:05.187

调整大小后尝试此代码

```
UIViewController* view = [[UIViewController alloc] init];
[self presentModalViewController: view animated: NO];
[self dismissModalViewControllerAnimated: NO];
[view release]; 
```

# c# - 如何检查对象是否被实例化？

> ID：11045063
> 
> 赞同：2
> 
> 时间：2012-06-15T05:27:45.633
> 
> 标签：c#, xml, winforms, .net-2.0

我正在尝试将 xml 的所有元素和属性列出到两个单独的 List 对象中。

我能够获取 xml 中的所有元素。
但是当我尝试添加功能以获取每个元素中的所有属性时，我总是遇到`System.NullReferenceException: Object reference not set to an instance of an object.`

![在此处输入图像描述](../Images/f297c54a2e7623e8094ce97c03709ca3.png) 请在下面查看我的代码，并告知我哪里做得不对。或者有没有更好的方法来实现这一点？您的意见和建议将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using System.Xml;
using System.IO;

namespace TestGetElementsAndAttributes
{
    public partial class MainForm : Form
    {
        List<string> _elementsCollection = new List<string>();
        List<string> _attributeCollection = new List<string>();

        public MainForm()
        {
            InitializeComponent();

            XmlDataDocument xmldoc = new XmlDataDocument();
            FileStream fs = new FileStream(@"C:\Test.xml", FileMode.Open, FileAccess.Read);
            xmldoc.Load(fs);

            XmlNode xmlnode = xmldoc.ChildNodes[1];

            AddNode(xmlnode);
        }

        private void AddNode(XmlNode inXmlNode)
        {
            try
            {
                if(inXmlNode.HasChildNodes)
                {
                    foreach (XmlNode childNode in inXmlNode.ChildNodes)
                    {
                        foreach(XmlAttribute attrib in childNode.Attributes)
                        {
                            _attributeCollection.Add(attrib.Name);
                        }

                        AddNode(childNode);
                    }
                }
                else
                {
                    _elementsCollection.Add(inXmlNode.ParentNode.Name);
                }
            }
            catch(Exception ex)
            {
                MessageBox.Show(ex.GetBaseException().ToString());
            }
        }
    }
} 
```

同时发布示例 XML。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<DocumentName1>
    <Product>
        <Material_Number>21004903</Material_Number> 
        <Description lang="EN">LYNX GIFT MUSIC 2012 1X3 UNITS</Description> 
        <Packaging_Material type="25">457</Packaging_Material> 
    </Product>
</DocumentName1> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:35:42.710

您应该使用以下内容检查是否存在`childNode.Attributes`：

```
if (childNode.Attributes != null)
{
   foreach(XmlAttribute attrib in childNode.Attributes)
   {
    ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:35:16.377

您需要确保 childNode.Attributes 具有值，因此在前面添加 if 语句

```
if (childNode.Attributes != null)
{
    foreach(XmlAttribute attrib in childNode.Attributes) 
```

# javascript - 在 HTML 对象上投影

> ID：11045065
> 
> 赞同：0
> 
> 时间：2012-06-15T05:28:28.767
> 
> 标签：javascript, html, css, dropshadow

我正在尝试在选定的 HTML 元素（输入文本、选择、div 等）上获得阴影效果。

许多互联网用户给出的解决方案是使用 CSS3 解决方案，它使用：

```
-moz-box-shadow
-webkit-box-shadow
box-shadow 
```

但是，这不适用于 IE8（可能是其他 IE 版本）

有没有办法在不使用这些 CSS3 元素的情况下创建这种效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:10:59.077

将此 css 用于 ie-8

```
.shadow
{
width:300px;
height:200px;
background-color:red;

filter: progid:DXImageTransform.Microsoft.Shadow(color='#000000', Direction=145, Strength=3)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:34:57.580

使用[CSS3 pie](http://css3pie.com/)实现可笑的跨浏览器解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:36:34.007

我不太确定没有 CSS3 怎么办，但我知道的是

```
.shadow { 
-moz-box-shadow: 3px 3px 4px #000; 
-webkit-box-shadow: 3px 3px 4px #000; 
box-shadow: 3px 3px 4px #000; 
/* For IE 8 */ 
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')"; 
/* For IE 5.5 - 7 */ 
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000'); 
} 
```

将适用于所有浏览器。

# android - 使独立的第三方能够本地化 Android 应用程序；应用 APK 之外的本地化数据

> ID：11045067
> 
> 赞同：4
> 
> 时间：2012-06-15T05:28:38.350
> 
> 标签：android, localization, translation, apk, android-resources

我需要开发一个 Android 应用程序，该应用程序从其*主 APK*之外的外部资源加载本地化文本。
这样做的原因是使第三方能够独立地提供应用程序的翻译。该应用程序目前有一个带有大量字符串（~2,000）的单一英语本地化。

我不希望脱离 Android 的资源系统；例如，我想像`strings.xml`在任何 Android 应用程序中一样提供主要语言本地化字符串。

为此，我创建了一个扩展 android.content.res.Resources 的类，覆盖了这三个`getText`方法。覆盖的实现将尽可能从外部本地化源返回资源，否则将请求转发给`super.getText()`实现。

**资源包装器：**

```
public class IntegratedResources extends Resources {

    private ResourceIntegrator ri;

    public IntegratedResources(AssetManager assets, DisplayMetrics metrics, Configuration config, ResourceIntegrator ri) {
        super(assets, metrics, config);
        this.ri = ri;
    }

    @Override
    public CharSequence getText(int id)
            throws NotFoundException {
        return ri == null ? super.getText(id) : ri.getText(id);
    }

    @Override
    public CharSequence getText(int id, CharSequence def)
            throws NotFoundException {
        return ri == null ? super.getText(id, def) : ri.getText(id, def);
    }

    @Override
    public CharSequence[] getTextArray(int id) 
            throws NotFoundException {
        return ri == null ? super.getTextArray(id) : ri.getTextArray(id);
    }
} 
```

* * *

然后我创建了一个 ContextWrapper 实现来包装一个 Activity 的上下文。上下文包装器的 getResources() 方法将返回上面的 IntegratedResources 对象。

**上下文包装器：**

```
public class IntegratedResourceContext extends ContextWrapper {

    private IntegratedResources integratedResources;

    public IntegratedResourceContext(Activity activity, String packageName) 
    throws NameNotFoundException {
        super(activity);

        ResourceIntegrator ri = packageName == null ? null : new ResourceIntegrator(activity, packageName);

        DisplayMetrics displayMetrics = new DisplayMetrics();
        activity.getWindow().getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);

        integratedResources = new IntegratedResources(activity.getAssets(), displayMetrics, 
                activity.getResources().getConfiguration(), ri);
    }

    @Override
    public Resources getResources() {
        return integratedResources;
    }
} 
```

* * *

最后，我们有了“ResourceIntegrator”类，它从指定的已安装第三方本地化 APK 中挑选资源。
如果需要，可以创建不同的实现以从 XML 或属性文件中提取它们。

**资源整合器：**

```
public class ResourceIntegrator {

    private Resources rBase;
    private Resources rExternal;
    private String externalPackageName;

    private Map<Integer, Integer> baseIdToExternalId = new HashMap<Integer, Integer>();

    public ResourceIntegrator(Context context, String externalPackageName) 
    throws NameNotFoundException {
        super();
        rBase = context.getResources();

        this.externalPackageName = externalPackageName;

        if (externalPackageName != null) {
            PackageManager pm = context.getPackageManager();
            rExternal = pm.getResourcesForApplication(externalPackageName);
        }
    }

    public CharSequence getText(int id, CharSequence def) {
        if (rExternal == null) {
            return rBase.getText(id, def);
        }

        Integer externalId = baseIdToExternalId.get(id);
        if (externalId == null) {
            // Not loaded yet.
            externalId = loadExternal(id);
        }

        if (externalId == 0) {
            // Resource does not exist in external resources, return from base.
            return rBase.getText(id, def);
        } else {
            // Resource has a value in external resources, return it.
            return rExternal.getText(externalId);
        }
    }

    public CharSequence getText(int id)
    throws NotFoundException {
        if (rExternal == null) {
            return rBase.getText(id);
        }

        Integer externalId = baseIdToExternalId.get(id);
        if (externalId == null) {
            // Not loaded yet.
            externalId = loadExternal(id);
        }

        if (externalId == 0) {
            // Resource does not exist in external resources, return from base.
            return rBase.getText(id);
        } else {
            // Resource has a value in external resources, return it.
            return rExternal.getText(externalId);
        }
    }

    public CharSequence[] getTextArray(int id)
    throws NotFoundException {
        if (rExternal == null) {
            return rBase.getTextArray(id);
        }

        Integer externalId = baseIdToExternalId.get(id);
        if (externalId == null) {
            // Not loaded yet.
            externalId = loadExternal(id);
        }

        if (externalId == 0) {
            // Resource does not exist in external resources, return from base.
            return rBase.getTextArray(id);
        } else {
            // Resource has a value in external resources, return it.
            return rExternal.getTextArray(externalId);
        }
    }

    private int loadExternal(int baseId) {
        int externalId;

        try {
            String entryName = rBase.getResourceEntryName(baseId);
            String typeName = rBase.getResourceTypeName(baseId);
            externalId = rExternal.getIdentifier(entryName, typeName, externalPackageName);
        } catch (NotFoundException ex) {
            externalId = 0;
        }

        baseIdToExternalId.put(baseId, externalId);
        return externalId;
    }
} 
```

* * *

我对 stackoverflow 的问题是**，上述实现是否是一个好主意**，它是否正确使用了 API，以及它的设计是否能够抵御未来未知的 Android 版本。
我以前没有见过任何人这样做，并且似乎无法在文档或网络上找到任何有关解决此问题的信息。

允许独立第三方翻译的基本要求相当关键。目前在内部维护此应用程序的数十个翻译是不可行的，而且我没有能力审查用户提供的翻译的质量。
如果这种设计是一个非常糟糕的想法并且没有类似的替代方案可用，那么本地化可能必须在完全没有 Android 的资源管理系统的情况下完成。

如果这是一个好主意，请随时使用和改进上述代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:12:24.823

> 我对stackoverflow的问题是以上是否是个好主意

如果它是一个完整的解决方案，我会感到震惊，因为您不能强制 Android 使用您的自定义`ContextWrapper`. `getString()`它应该适用于您手动调用,等的任何地方`getText()`，但我看不出它在*Android*访问您的一项活动之外的这些资源的任何地方如何工作。有很多地方不能自己打电话`getText()`等等，比如：

*   主屏幕启动器
*   设置中您的应用程序的信息
*   最近的任务列表

此外，除非您打算永远不添加新字符串，否则您将遇到永久的版本控制问题。您无法强制第三方翻译支持新字符串，因此您最终会得到一个混合了已翻译和未翻译字符串的应用程序。

> 是否正确使用 API

这似乎没问题。

> 它的设计是否能够抵御未来未知的 Android 版本

Android 将访问资源本身的地方的数量可能会增加，而不是减少。

> 目前在内部维护这个应用程序的几十个翻译是不可行的，而且我没有能力审查用户提供的翻译的质量。

然后只支持您愿意自己管理的语言。首先，正如我所指出的，在几个方面，我看不到这将是一个完整的解决方案。其次，您似乎认为您的方法不会因为翻译不佳而受到指责，虽然它可能会*减少*您受到的指责，但不会消除这种指责。在这方面，我同意 Squonk。

我钦佩您提供更多翻译的热情，但就我个人而言，我不会走这条特殊的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:03:53.177

我认为您的技术不适用于布局中的资源引用。这些由 LayoutInflater 解决，最终由 TypedArray 实现解决，后者调用私有方法来加载资源。

# java - 使用 ANT 如何在 Hudson 上构建和部署非 maven 项目

> ID：11045069
> 
> 赞同：0
> 
> 时间：2012-06-15T05:28:54.197
> 
> 标签：java, ant, build-automation

我有一个 hudson 服务器，想使用 ANT 脚本定期构建我的非 Maven 项目并将其部署到 Webshpere 应用程序服务器。

任何机构都可以帮忙。虽然发现了一些类似的问题，但他们都没有谈论 ANT 脚本，所以发布了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:58:32.757

Hudson 知道如何运行 ant 来构建您的脚本。

安装 Hudson，并安装您需要的插件，然后创建一个新作业。花点时间阅读所有选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:46:21.357

[http://www.javaworld.com/jw-10-2000/jw-1020-ant.html](http://www.javaworld.com/jw-10-2000/jw-1020-ant.html) 一个非常有用的教程。跟踪并能够部署应用程序。

# android - 制作包含画布的屏幕兼容性

> ID：11045071
> 
> 赞同：1
> 
> 时间：2012-06-15T05:28:58.813
> 
> 标签：android, android-canvas

我正在使用 android 中的画布。我想在适合每个屏幕的画布上绘制形状。

如果屏幕尺寸为**320 * 240**，则高度和宽度为**90 * 90**但

如果**screen_size > 320 * 240**则应相应增加。

假设**screen_size = 1280 * 800**那么应该增加多少

我不知道该怎么做

代码就像

```
int fixHeight = 240, fixWidth = 320;
Paint paint;
paint = new Paint();
paint.setColor(Color.GREEN);
DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int width = displaymetrics.widthPixels;
@Override
protected void onDraw(Canvas canvas) {
     if (height <= fixHeight && width <= fixWidth) {
          canvas.drawRect(10, 10, 50, 50, paint);  
     } else {
          // Don't Know What TO Put Here
     }
} 
```

谁能帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:30:04.593

在您的`onDraw`方法中，您可能需要检查您的布局并相应地`height`调整您的 draw.height 和 draw.width。`width``canvas`

如果屏幕的大小增加了，那么您可以在 draw.width 和 draw.height 常量上使用一个乘数，以便在绘制之前进行乘法或除法。

**编辑：**发布代码后。

假设 320*240 是您绘制一个高度为 40、宽度为 40 的矩形的基本情况，`canvas.drawRect(10, 10, 50, 50, paint);`因此可以使用 1280*800 的新分辨率在您的情况下修改左、上、右和下使用下面的公式。

```
320 --> (50 - 10)
1280 --> (x - 10) 
```

所以`x = 10 + (50-10)*1280/320`

尝试为 wdith 重复相同的论坛，你应该得到你的基本坐标。我相信您可以根据上述相同的公式将您的 10、10（我在这里保持不变）调整到新位置。

# text-editor - 使用 Powershell 在控制台上编辑文本文件

> ID：11045077
> 
> 赞同：120
> 
> 时间：2012-06-15T05:30:13.693
> 
> 标签：text-editor, windows-7-x64

我试图找出在控制台中编辑文本文件的最简单方法（在我的例子中是 PowerShell）。我正在使用 Windows 7 64 位。我不能只输入`edit filename.txt`来编辑文件，这让我很恼火。这曾经有效，但这一切都改变了。在 Windows 控制台中查看和编辑文本文件的选项是什么，如果你告诉我安装和学习 VIM，我会打你的脸。:-)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-15T05:34:04.237

为什么不用记事本？

```
notepad.exe filename.txt 
```

旧`edit.com`的在 PowerShell 中工作（至少在我的盒子上：Windows 7 Pro x86）但在 x64 中由于其 16 位架构而无法工作。

你可以看看[这个](http://www.briefeditor.com/)简单的编辑器。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-10-11T09:40:17.350

[动力学文本编辑器](http://turtlewar.org/projects/editor/)。

它超级快，可以处理大型文本文件，尽管功能很少。包括 GUI 版本和控制台版本 (k.exe)。应该在linux上工作相同。

示例：在我的测试中，打开一个 500mb 的磁盘映像需要 7 秒。

![截屏](../Images/5b0af58af801d3c3d1d3bfe790b7d87c.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-15T05:39:34.500

在冒着打我的风险的同时，我想您仍然坚持您提到的解决方案。看看 SuperUser 上的这个帖子：

[Powershell 中的非 x 文本编辑器有哪些？](https://superuser.com/questions/53175/which-are-the-non-x-text-editors-in-powershell)

此外，还有一个适用于 windows 的 nano 版本：

[纳米编辑器](http://www.nano-editor.org/download.php)

我现在就躲起来，希望有人能给出更充分的答案。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-05-16T11:45:34.420

有点复活，但对于其他提出这个问题的人来说，看看[Micro](https://micro-editor.github.io/)编辑器。它是一个小型的独立 EXE，没有依赖项，具有本机 Windows 32\64 版本。在 PowerShell 和 CMD.EXE 中运行良好。

[![在此处输入图像描述](../Images/e21d68b1497a2bff4eefbd95543b459a.png)](https://i.stack.imgur.com/K43jL.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-08-18T19:31:08.743

我同意[斯文普拉斯](https://stackoverflow.com/users/1006793/sven-plath)的观点。Nano 是一个很好的选择。如果您有[Chocolatey](https://chocolatey.org/)或[scoop](https://scoop.sh/)，您可以通过在 Powershell 中键入以下内容来安装 nano：

```
PS C:\dev\> choco install nano
# --OR--
PS C:\dev\> scoop install nano 
```

然后，要编辑 somefile.txt 输入：

```
PS C:\dev\> nano somefile.txt 
```

它很整洁！

**编辑：** Nano 在我的 Windows 10 机器上运行良好，但第一次在我的 Windows 7 机器上加载需要很长时间。这让我在我的 Win 7 笔记本电脑上切换到 vim (vi)

```
PS C:\dev\> choco install vim
PS C:\dev\> vim $profile 
```

将 powershell 配置文件中的一行添加到 Set-Alias (sal)

```
sal vi vim 
```

Esc - : - x - 输入 :-)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-06-15T05:51:24.420

您可以安装[Far Manager](http://farmanager.com)（顺便说一下，一个很棒的[OFM](http://en.wikipedia.org/wiki/Orthodox_file_manager)）并像这样调用它的编辑器：

```
Far /e filename.txt 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-04-10T15:06:54.520

如果您使用 Windows 容器并且想要更改任何文件，您可以在 Powershell 控制台中轻松获取和使用 Vim。

使用 PowerShell 转入 Windows Docker 容器：

`docker exec -it <name> powershell`

*   首先获取 Chocolatey 包管理器

    `Invoke-WebRequest https://chocolatey.org/install.ps1 -UseBasicParsing | Invoke-Expression;`

*   安装 Vim

    `choco install vim`

*   刷新 ENVIRONMENTAL VARIABLE 你可以直接`exit`和 shell 回容器

*   转到文件位置并 Vim 它`vim file.txt`

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-02-28T05:16:06.643

从在线安装 vim，然后你可以这样做： **vim "filename"**来编辑该文件

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-10-24T20:49:55.463

您可以通过 choco 在 powershell 中安装 nano - 这是一种将文本编辑功能引入 powershell 的低摩擦方式：

1.  安装巧克力

```
Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1')) 
```

2.  安装纳米

```
choco install nano 
```

3.  利润

```
nano myfile.txt 
```

最好的部分是它成为路径的一部分，并在重新启动后保持工作等 :)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-04T20:29:33.263

我想你可以只使用记事本，像这样：

```
notepad myfile.extension 
```

它应该在记事本中打开。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-25T09:47:11.107

不确定这是否会使任何人受益，但如果您使用的是 Azure CloudShell PowerShell，您只需键入：

```
code file.txt 
```

并且 Visual Studio 代码将弹出要编辑的文件，非常棒。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-12-13T00:11:51.497

In linux i'm a fun of Nano or vim, i used to use nano and now vim, and they are really good choices. There is a version for windows. Here is the link [https://nano-editor.org/dist/win32-support/](https://nano-editor.org/dist/win32-support/)

However more often we need to open the file in question, from the command line as quick as possible, to not loose time. We can use notepad.exe, we can use notepad++, and yea, we can use **sublim text**. I think there is no greater then a lightweight, Too powerful editor. Sublime text here. for the thing, we just don't want to get out of the command line, or we want to use the command line to be fast. and yea. We can use sublime text for that. it contain a command line that let you quickly open a file in sublime text. Also there is different options arguments you can make use of. Here how you do it.

First you need to know that there is **subl.exe**. a command line interface for sublim.

[![enter image description here](../Images/71c26b9b79a8d92107e75de3ad8ba4a4.png)](https://i.stack.imgur.com/vHhCu.png)

**1->** **first we create a batch file. the content is**

[![enter image description here](../Images/4aae0e37165c9510b529573d2366f346.png)](https://i.stack.imgur.com/8P2IY.png)

```
@ECHO OFF

"C:\Program Files\Sublime Text 3\subl.exe" %* 
```

We can save that wherever we want. I preferred to create a directory on sublime text installation directory. And saved there the batch file we come to write and create.

(Remark: change the path above fallowing your installation).

**2->** **we add that folder to the path system environment variable. and that's it.**

[![enter image description here](../Images/d6ddd36c00307612603fbb4e1ddb532e.png)](https://i.stack.imgur.com/COSwK.png)

or from system config (windows 7/8/10)

[![enter image description here](../Images/c8e8163a3ccbbc63f5afd280a17f8859.png)](https://i.stack.imgur.com/g0WnE.png)

then:

[![enter image description here](../Images/4031f761dce8e35cc913a3dd8c7c1885.png)](https://i.stack.imgur.com/1bhEs.png)

then:

[![enter image description here](../Images/42f868ffbc4976534e3f1f8ed60d34c2.png)](https://i.stack.imgur.com/Wi39c.png)

then we copy the path:

[![enter image description here](../Images/6c3cd77c36ca52f7718c939f6312cf57.png)](https://i.stack.imgur.com/YuW9W.png)

then we add that to the path variable:

[![enter image description here](../Images/bac2e989f625c139ae8939a824a4654a.png)](https://i.stack.imgur.com/CAsPd.png)

too quick!

launch a new cmd and now you've got **subl** command working well!

[![enter image description here](../Images/98909397479a86418409990699371243.png)](https://i.stack.imgur.com/duEta.png)

to open a file you need just to use **subl** command as fellow:

```
subl myfileToOpen.txt 
```

you can also use one of the options arguments (type --help to see them as in the image above).

Also note that you can apply the same method with mostly any editor of your choice.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-11-01T18:00:16.570

我不得不对**Windows Nano** docker 映像进行一些调试，并且需要编辑文件的内容，谁会猜到这非常困难。

我使用`Get-Content`和`Set-Content`和 base 64 编码/解码的组合来更新文件。例如

编辑 foo.txt

```
PS C:\app> Set-Content foo.txt "Hello World"                                                                                                                                                                                        
PS C:\app> Get-Content foo.txt                                                                                                                                                                                                      
Hello World                                                                                                                                                                                                                         
PS C:\app> [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("TXkgbmV3IG11bHRpDQpsaW5lIGRvY3VtZW50DQp3aXRoIGFsbCBraW5kcyBvZiBmdW4gc3R1ZmYNCiFAIyVeJSQmXiYoJiopIUAjIw0KLi4ud29ybGQ=")) | Set-Content foo.txt 
PS C:\app> Get-Content foo.txt                                                                                                                                                                                                      
My new multi                                                                                                                                                                                                                        
line document                                                                                                                                                                                                                       
with all kinds of fun stuff                                                                                                                                                                                                         
!@#%^%$&^&(&*)!@##                                                                                                                                                                                                                  
...world                                                                                                                                                                                                                            
PS C:\app> 
```

诀窍是将base 64解码的字符串传送到`Set-Content`

```
[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("...")) | Set-Content foo.txt 
```

它没有 vim，但我可以更新文件，因为它的价值。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-09T06:35:21.500

我是一名退休的工程师，在 60 年代与 DOS、Fortran、IBM360 等一起长大，就像这个博客上的其他人一样，我非常怀念在 64 位 Windows 中失去命令行编辑器。在花了一周的时间浏览互联网和测试编辑器之后，我想分享我的最佳解决方案：Notepad++。这与 DOS EDIT 相去甚远，但也有一些附带的好处。不幸的是，它是一个屏幕编辑器，需要鼠标，因此速度很慢。另一方面，它是一个不错的 Fortran 源代码编辑器，并且显示了行号和列号。它可以为正在编辑的文件保留多个选项卡，甚至可以记住光标的最后位置。我当然会继续输入键盘代码（50 年的习惯），但令人惊讶的是，至少其中一些是有效的。也许不是记录在案的功能。我将编辑器重命名为 EDIT.EXE，设置它的路径，然后从命令行调用它。这还不错。我和它一起生活。顺便说一句，请注意不要在 Fortran 源代码中使用 tab 键。在文本中放置一个 ASCII 6。它是不可见的，至少 gFortran 无法处理它。Notepad++ 可能有很多我没有时间去弄乱的功能。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-09-15T12:01:03.880

您可以执行以下操作：

```
bash -c "nano index.html" 
```

上面的命令使用 Powershell 中的 nano 编辑器打开 index.html 文件。

或者，您可以通过以下命令使用 vim 编辑器

```
bash -c "vi index.html" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-10-31T09:50:40.733

好吧，在 Windows 7 上编辑文本文件有上千种方法。通常人们安装 Sublime、Atom 和 Notepad++ 作为编辑器。对于命令行，我认为基本编辑命令（顺便说一句，在 64 位计算机上不起作用）很好；或者，我发现类型 con > filename 是一种非常值得称赞的方法。如果新安装了 windows 并且想避免使用记事本. 这可能是它！ [Type 作为编辑器的完美使用:)](https://i.stack.imgur.com/3VFUb.jpg)

图片参考：- [https://www.codeproject.com/Articles/34280/How-to-Write-Applet-Code](https://www.codeproject.com/Articles/34280/How-to-Write-Applet-Code)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-16T01:16:57.833

如果您有适用于 linux (wsl) 的 windows 子系统，您会发现以下命令非常有用：

```
bash -c "vi filename.txt" 
```

# c# - C# ASP 数组列表被清除

> ID：11045088
> 
> 赞同：-7
> 
> 时间：2012-06-15T05:31:18.363
> 
> 标签：c#, asp.net, arraylist

我的代码的第一部分在数组列表中添加项目。

当我稍后尝试使用 for 循环访问其内容时，arraylist 被清除并且不返回任何值。

*CODE/FLOW 我首先想知道程序下有哪些事件。我单击搜索按钮，然后从数据库中读取并将其结果放入数组中。

```
 while (dr.Read())
        {
            string eventID = Convert.ToString(dr["Event ID"]);
            programEvents.Add(eventID);
        } 
```

由于事件已经显示，然后我输入人名以将它们注册到事件下

```
for (int ctr = 0; ctr < spPeoplePicker.ResolvedEntities.Count; ctr++)
            {
                PickerEntity selectedEntity = (PickerEntity)spPeoplePicker.ResolvedEntities[ctr];
                //get the email of the person added
                //use this email as search tool for Peoplesoft database
                string entityEmail = Convert.ToString(selectedEntity.EntityData["Email"]);
                //string email = Convert.ToString(selectedEntity.EntityData["Title"]);
                //line below can get display name of entity
                PickerEntity pe = (PickerEntity)spPeoplePicker.ResolvedEntities[ctr];

                for (int evectr = 0; evectr <= programEvents.Count; evectr++)
                { 
```

这是失败的地方。

```
 paramID = programEvents[evectr];

                    #region getEventDetails
                    ProgramManagement.Conn connect = new ProgramManagement.Conn();
                    SqlConnection conn = new SqlConnection(@connect.getConnString());
                    conn.Open();
                    SqlCommand stmnt = conn.CreateCommand();
                    stmnt.CommandText = "SELECT * FROM [TrainingAndScheduling].[dbo].[trainersView]" +
                        " WHERE EventID='" + paramID + "'"; ;
                    SqlDataReader thisReader = stmnt.ExecuteReader();
                    if (thisReader.HasRows)
                    {
                        thisReader.Read();                            
                        eveName = Convert.ToString(thisReader["CourseName"]);
                        eveStart = Convert.ToString(thisReader["StartDate"]);
                        eveEnd = Convert.ToString(thisReader["EndDate"]);
                        eveVenue = Convert.ToString(thisReader["RoomID"]);
                    }
                    else
                    { }
                    thisReader.Close();
                    conn.Close();
                    #endregion

                    #region registration for a single event
                    ProgramManagement.Registration register = new ProgramManagement.Registration();
                    if (!register.register(entityEmail, paramID))
                    {
                        //this block is executed if user is not registered
                        errorAdding = errorAdding + "<br/>" + "Engineer: " +
                            pe.DisplayText + " was not registered.";
                    }
                    else
                    {
                        ProgramManagement.Email sendemail = new ProgramManagement.Email();
                        sendemail.sendNotification(entityEmail, pe.DisplayText, eveName, eveStart, eveEnd, eveVenue, paramID);
                    }
                    #endregion
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:49:54.063

您的语句失败的原因是您试图访问超出集合范围的元素。迭代时`programEvents`，您将索引分配给`evectr`从`0`到`programEvents.Count` *包含*的范围。但是，由于索引是从零开始的，所以最后一个元素的索引实际上是`programEvents.Count - 1`; 访问`programEvents[programEvents.Count]`会抛出一个[`IndexOutOfRangeException`](http://msdn.microsoft.com/en-us/library/system.indexoutofrangeexception.aspx).

您需要更换：

```
for (int evectr = 0; evectr <= programEvents.Count; evectr++)
{
    paramID = programEvents[evectr]; 
```

…和：

```
for (int evectr = 0; evectr < programEvents.Count; evectr++)
{
    paramID = programEvents[evectr]; 
```

# c++ - 如何优化动态规划？

> ID：11045090
> 
> 赞同：4
> 
> 时间：2012-06-15T05:31:23.690
> 
> 标签：c++, algorithm

> **问题**如果一个数字的数字之和以及其数字的平方和是质数，则该数字称为幸运数字。A和B之间有多少个数字是幸运的？
> 
> *输入：* 第一行包含测试用例 T 的数量。接下来的 T 行中的每一行包含两个整数，A 和 B。
> 
> *输出：* 输出 T 行，每个案例一个包含相应案例所需的答案。
> 
> *约束：*
> 1 <= T <= 10000
> 1 <= A <= B <= 10^18
> 
> **样本输入：**
> 
> 2
> 
> 1 20
> 
> 120 130
> 
> **样本输出：**
> 
> 4
> 
> 1
> 
> **解释：** 第一种情况，幸运数字是11、12、14、16。第二种情况，唯一的幸运数字是120。

如果我们使用蛮力，问题就很简单，但是运行时间非常关键，以至于我的程序在大多数测试用例中都失败了。我目前的想法是通过将先前的总和存储在一个临时数组中来使用动态编程，例如：
`sum_digits(10) = 1 -> sum_digits(11) = sum_digits(10) + 1`
同样的想法适用于平方和，但计数器等于奇数。不幸的是，它仍然失败了 10 个测试用例中的 9 个，这让我认为必须有更好的方法来解决它。任何想法将不胜感激。

```
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>
#include <unordered_map>
#include <unordered_set>
#include <cmath>
#include <cassert>
#include <bitset>

using namespace std;

bool prime_table[1540] = {
    0, 0, 1, 1, 0, 1, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 
    1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0 
};

unsigned num_digits(long long i) {
    return i > 0 ? (long) log10 ((double) i) + 1 : 1;
}

void get_sum_and_sum_square_digits(long long n, int& sum, int& sum_square) {
    sum = 0;
    sum_square = 0;
    int digit;
    while (n) {
        digit = n % 10;
        sum += digit;
        sum_square += digit * digit;
        n /= 10;
    }
}

void init_digits(long long n, long long previous_sum[], const int size = 18) {
    int current_no_digits = num_digits(n);
    int digit;
    for (int i = 0; i < current_no_digits; ++i) {
        digit = n % 10;
        previous_sum[i] = digit;
        n /= 10;
    }   

    for (int i = current_no_digits; i <= size; ++i) {
        previous_sum[i] = 0;
    }   
}

void display_previous(long long previous[]) {
    for (int i = 0; i < 18; ++i) {
        cout << previous[i] << ",";
    }
}

int count_lucky_number(long long A, long long B) {
    long long n = A;
    long long end = B;
    int sum = 0;
    int sum_square = 0;
    int lucky_counter = 0;

    get_sum_and_sum_square_digits(n, sum, sum_square);

    long long sum_counter = sum;
    long long sum_square_counter = sum_square;

    if (prime_table[sum_counter] && prime_table[sum_square_counter]) {
        lucky_counter++;
    }

    long long previous_sum[19] = {1};

    init_digits(n, previous_sum);

    while (n < end) {
        n++;
        if (n % 100000000000000000 == 0) {
            previous_sum[17]++;
            sum_counter = previous_sum[17] + previous_sum[18];
            sum_square_counter = previous_sum[17] * previous_sum[17] + previous_sum[18] * previous_sum[18];

            previous_sum[16] = 0;
            previous_sum[15] = 0;
            previous_sum[14] = 0;
            previous_sum[13] = 0;
            previous_sum[12] = 0;
            previous_sum[11] = 0;
            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 10000000000000000 == 0) {
            previous_sum[16]++;
            sum_counter = previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[15] = 0;
            previous_sum[14] = 0;
            previous_sum[13] = 0;
            previous_sum[12] = 0;
            previous_sum[11] = 0;
            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 1000000000000000 == 0) {
            previous_sum[15]++;

            sum_counter = previous_sum[15] + previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[14] = 0;
            previous_sum[13] = 0;
            previous_sum[12] = 0;
            previous_sum[11] = 0;
            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 100000000000000 == 0) {
            previous_sum[14]++;

            sum_counter = previous_sum[14] + previous_sum[15] + previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[13] = 0;
            previous_sum[12] = 0;
            previous_sum[11] = 0;
            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 10000000000000 == 0) {
            previous_sum[13]++;

            sum_counter = previous_sum[13] + previous_sum[14] + previous_sum[15] + previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[12] = 0;
            previous_sum[11] = 0;
            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 1000000000000 == 0) {
            previous_sum[12]++;

            sum_counter = previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] + previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[11] = 0;
            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 100000000000 == 0) {
            previous_sum[11]++;

            sum_counter = 
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] + previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[10] = 0;
            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 10000000000 == 0) {
            previous_sum[10]++;

            sum_counter = 
                previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[9] = 0;
            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 1000000000 == 0) {
            previous_sum[9]++;

            sum_counter = 
                previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[8] = 0;
            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 100000000 == 0) {
            previous_sum[8]++;

            sum_counter = 
                previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[7] = 0;
            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 10000000 == 0) {
            previous_sum[7]++;

            sum_counter = 
                previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[6] = 0;
            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 1000000 == 0) {
            previous_sum[6]++;

            sum_counter = 
                previous_sum[6] + previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[6] * previous_sum[6] +
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[5] = 0;
            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 100000 == 0) {
            previous_sum[5]++;

            sum_counter = previous_sum[5] + previous_sum[6] + previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] + previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] + previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[5] * previous_sum[5] +
                previous_sum[6] * previous_sum[6] +
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[4] = 0;
            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 10000 == 0) {
            previous_sum[4]++;

            sum_counter = 
                previous_sum[4] + previous_sum[5] + 
                previous_sum[6] + previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[4] * previous_sum[4] +
                previous_sum[5] * previous_sum[5] +
                previous_sum[6] * previous_sum[6] +
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[3] = 0;
            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 1000 == 0) {
            previous_sum[3]++;

            sum_counter = 
                previous_sum[3] + previous_sum[4] + previous_sum[5] + 
                previous_sum[6] + previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[3] * previous_sum[3] +
                previous_sum[4] * previous_sum[4] +
                previous_sum[5] * previous_sum[5] +
                previous_sum[6] * previous_sum[6] +
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[2] = 0;
            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 100 == 0) {
            previous_sum[2]++;

            sum_counter = 
                previous_sum[2] + previous_sum[3] + previous_sum[4] + previous_sum[5] + 
                previous_sum[6] + previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[2] * previous_sum[2] +
                previous_sum[3] * previous_sum[3] +
                previous_sum[4] * previous_sum[4] +
                previous_sum[5] * previous_sum[5] +
                previous_sum[6] * previous_sum[6] +
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[1] = 0;
            previous_sum[0] = 0;
        }
        else if (n % 10 == 0) {
            previous_sum[1]++;

            sum_counter = 
                previous_sum[1] + previous_sum[2] + previous_sum[3] + previous_sum[4] + previous_sum[5] + 
                previous_sum[6] + previous_sum[7] + previous_sum[8] + previous_sum[9] + previous_sum[10] +
                previous_sum[11] + previous_sum[12] + previous_sum[13] + previous_sum[14] + previous_sum[15] +
                previous_sum[16] + previous_sum[17] + previous_sum[18];

            sum_square_counter = 
                previous_sum[1] * previous_sum[1] + 
                previous_sum[2] * previous_sum[2] +
                previous_sum[3] * previous_sum[3] +
                previous_sum[4] * previous_sum[4] +
                previous_sum[5] * previous_sum[5] +
                previous_sum[6] * previous_sum[6] +
                previous_sum[7] * previous_sum[7] +
                previous_sum[8] * previous_sum[8] +
                previous_sum[9] * previous_sum[9] +
                previous_sum[10] * previous_sum[10] +
                previous_sum[11] * previous_sum[11] +
                previous_sum[12] * previous_sum[12] +
                previous_sum[13] * previous_sum[13] +
                previous_sum[14] * previous_sum[14] +
                previous_sum[15] * previous_sum[15] +
                previous_sum[16] * previous_sum[16] +
                previous_sum[17] * previous_sum[17] +
                previous_sum[18] * previous_sum[18];

            previous_sum[0] = 0;
        }
        else {
            sum_counter++;
            sum_square_counter += ((n - 1) % 10) * 2 + 1;
        }

        // get_sum_and_sum_square_digits(n, sum, sum_square);
        // assert(sum == sum_counter && sum_square == sum_square_counter);
        if (prime_table[sum_counter] && prime_table[sum_square_counter]) {
            lucky_counter++;
        }
    }

    return lucky_counter;
}

void inout_lucky_numbers() {
    int n;
    cin >> n;

    long long a;
    long long b;

    while (n--) {
        cin >> a >> b;
        cout << count_lucky_number(a, b) << endl;
    }
}

int main() {
    inout_lucky_numbers();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:01:23.387

鉴于 AB 可能是 10^18 个值的范围，因此无论它得到多么优化，您都无法及时从 A 循环到 B。让我们尝试找出一种不涉及专门考虑所有这些数字的方法......

首先，让我们将问题简化为找到 1 和 E 之间的幸运数字，并将其称为lucky(E)。整个问题的答案很简单：lucky(B)-lucky(A-1)。

现在让我们逐位构造这样一个幸运数字。假设我们已经在这个数字上放置了几位数字，需要继续。我们已经放置了哪些数字有关系吗？不！我们只需要知道以下几点：

*   已放置多少位 (n)
*   当前数字总和 (s)
*   当前数字平方和 (sq)

这就是我们在动态规划中所说的*状态*。

让我们忽略 10^18，因为它是输入中唯一的 19 位数字，而且它并不幸运。请注意，E 最多可以有 18 位数字，所以我们有 19 种可能的 n（从 0 到 18）、162（18 * 9 + 1）种可能的 s 和 1459（18 * 81 + 1）种可能的 sq。这给我们留下最多 500 万的搜索空间，这比搜索 10^18 个数字来匹配要小得多。

因此，让我们将 F(n, s, sq) 定义为“我们可以通过多少种方式向具有此类属性的数字添加数字以获得幸运数字”（感谢 kitaras 的改写）。基本情况是当 n 等于 E 中的位数时：如果 s 和 sq 是素数，则 F(N, s, s_sq) 为 1，否则为 0。对于其他可能性，进行可能的转换并递归调用 F，注意不要让你正在构建的数字超过 E。

通过这种方式，我们可以将 lucky(E) 定义为 F(0, 0, 0)。

完成后，请记住记住已计算的输入/输出的函数。

编辑：这有点旧，但这是幸运函数的示例实现，我认为这是正确的。请注意，与上面的解释相反，代码中的 n 下降了，因为这样编码要容易得多。

```
long long dp[20][163][1460];
bool calc[20][163][1460];

int digits[20];
int digit_cnt;

// The last argument (eq) is used to avoid going over E
long long F(int n, int s, int sq, bool eq) {
    // Base cases
    if (!eq && calc[n][s][sq]) return dp[n][s][sq];
    if (n == 0) return (prime_table[s] && prime_table[sq]);

    long long resp = 0;

    // Test all possibilities for the next digit
    for (int d = 0; d < 10; d++) {
        if (!eq || digits[n-1] > d) {
            resp += F(n-1, s+d, sq + d*d, false);
        }

        // If the number formed so far is exactly equal to E
        // we will go over E if we pick a larger
        // digit than digits[n-1]. 
        // So we have to take care if eq == true
        else if (digits[n-1] == d) {
            resp += F(n-1, s+d, sq + d*d, true);
        }
        else break;
    }

    // Note that computations that have eq set to true
    // can't be used in other calculations of F(), as they depend on E.
    if (!eq) {
        calc[n][s][sq] = true;
        dp[n][s][sq] = resp;
    }

    return resp;
}

long long lucky(long long E) {
    long long tE = E;
    digit_cnt = 0;

    while (tE) {
        digits[digit_cnt++] = tE % 10;
        tE /= 10;
    }

    return F(digit_cnt, 0, 0, true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:03:51.893

检查一个数字是否是素数非常容易，您将遇到的最高数字是 1458（对于数字 999,999,999,999,999,999）。我想这就是你拥有 的原因`prime_table`，这很好。因此，查找特定数字是否为素数不能更快。我认为您绝对应该使用您拥有的 prime_table，尽管如果您在程序开始时计算它会更好，而不是对其进行硬编码 - 出错的机会更少。

您可以创建其他缓存。您需要遍历所有数字并将它们和它们的平方相加。但是没有人说你应该一个一个地检查数字。您一次可以超过 5 位数字 - 您只需要两个包含 1000000 个单元格的数组，一个包含数字总和，一个包含平方和。

所以，你有一个素数数组，一个所有 6 位数字的数字和的数组，以及一个所有 6 位数字的数字平方和的数组。获得任何 18 位数字的解决方案将非常容易 - 您有 2 个模运算、2 个除法、4 个加法和 7 个查找。你不能比这更快。

注意：玩 1000000 数字。如果您的 L1 缓存很小，100000 可能会更快，尽管我相信 1000000 您仍然可以 - 您有大约 2MB 的数据不断访问，这应该适合您的 L1 缓存。

# android - 在android中的朋友facebook墙上发布消息

> ID：11045091
> 
> 赞同：0
> 
> 时间：2012-06-15T05:31:26.020
> 
> 标签：android

我只想从我的 android 应用程序向我朋友的 facebook 墙上发布一条短信。在这里我列出了我朋友的列表并获得了我需要发送给的特定朋友 ID。但我无法将消息发送给特定的朋友.以下是我的代码。

```
 facebook = new Facebook("My App Id");
        asyncRunner = new AsyncFacebookRunner(facebook);
        FaceBook.facebook.authorize(this, new String[] { "user_status", "user_about_me", "email", "publish_stream", "read_stream", "offline_access" }, new DialogListener() {

            @Override
            public void onComplete(Bundle values) {

                JSONObject jObject;
                try {
                    jObject = new JSONObject(FaceBook.facebook.request("me"));
                    Bundle params = new Bundle();
                    params.putString("message", "My message");
                    params.putString("target_id","My friend fb Id here"); 
                    params.putString("method", "stream.publish");

                    //String  response = authenticatedFacebook.request(params);
                    FaceBook.asyncRunner.request("me/feed", params, "POST",
                            new ProductUploadListener(), null);
                    Toast.makeText(getApplicationContext(), "Successfully post..", Toast.LENGTH_SHORT).show();

                } catch (MalformedURLException e) {

                    e.printStackTrace();
                } catch (JSONException e) {

                    e.printStackTrace();
                } catch (IOException e) {

                    e.printStackTrace();
                }
            }

            @Override
            public void onFacebookError(FacebookError error) {
                Toast.makeText(fbFriendsList.this,
                        "Facebook onFacebookError", Toast.LENGTH_LONG).show();
            }

            @Override
            public void onError(DialogError e) {
                Toast.makeText(fbFriendsList.this, "Facebook onError",
                        Toast.LENGTH_LONG).show();
            }

            @Override
            public void onCancel() {

            }
        });

    }
    public class ProductUploadListener extends BaseRequestListener {
        public void onComplete(final String response, final Object state) {

        }
    } 
```

我在哪里做错了。我也使用了 android facebook SDK。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:56:54.947

干得好

```
protected void postOnWall(String friendID)
{
    Bundle params = new Bundle();
    params.putString("message","put your message here");
    params.putString("caption", "put your caption here");
    params.putString("description", "Put your description here");
    params.putString("name", "put a name here");
    params.putString("picture", "URL of picture");
    params.putString("link", "If any link);        

    asyncRunner.request(((friendID == null) ? "me" : userId) + "/feed", params, "POST", new WallPostRequestListener(),null);       
} 
```

# iphone - 应用内购买显示警告在 iTunes 连接中不可用

> ID：11045092
> 
> 赞同：0
> 
> 时间：2012-06-15T05:31:38.487
> 
> 标签：iphone, ios, xcode, ios5, app-store-connect

iTunes 显示创建应用内购买的警告**您的第一个应用内购买必须与新的应用版本一起提交。从版本详细信息页面的应用内购买部分选择它们，然后单击准备上传二进制文件。**像下面的截图：

![在此处输入图像描述](../Images/750b97bf07247c398a87635193339de9.png)

我尝试了很多解决此问题的指令但不起作用，我正在按照指令创建应用程序场景：

首先我在 iTunes 连接中创建应用程序，状态为**准备上传二进制文件**

在 create manage-inapppurchase->add new->create in-app 并显示状态**Ready to Submit之后**

并显示警告消息**您的第一个应用内购买必须与新的应用版本一起提交。从版本详细信息页面的应用内购买部分选择它们，然后单击准备上传二进制文件。**

好的，我在上传二进制文件后拒绝它并转到 inapp 显示相同的警告消息..！

我尝试了很多方法但不起作用，任何人都可以帮助我在 iTunes 中解决这个问题，非常感谢......！

谢谢....！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T08:58:22.143

我认为您已完成的所有其他步骤

请求**iOS 免费应用程序**合同。

1.  登录到 iTunes 连接
2.  转到“管理您的应用程序”
3.  单击您的应用程序图标
4.  在那个点击“查看详细信息”
5.  在您的页面底部，您会找到“应用内购买”
6.  您必须在哪里勾选您的非消耗品/消耗品/自动更新产品

然后**准备上传二进制文件**

要交叉检查 - 转到管理应用内购买

您现在将在哪里找到状态“准备上传”

希望这有助于...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:55:47.870

尝试输入查看详细信息，然后单击“应用内购买”处的链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:58:29.900

您需要从 iTunes connect 的合同、税务和银行部分设置您的 iOS 付费应用合同。

# iphone - iPhone-CTMessageCenter API

> ID：11045093
> 
> 赞同：1
> 
> 时间：2012-06-15T05:31:39.783
> 
> 标签：iphone, api, sms

我有一个应用程序来安排并向 iPhone 中的个人或批量发送 SMS。所以，我打算使用一个名为 CTMessageCenter 的私有 API。但是，我知道如果我们使用上述第三方 API，Apple 可能会在接受期间拒绝该应用程序。

另外，我开始知道，如果我使用 Apple 提供的 API，那肯定会被接受。

你能帮我回答这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:15:44.627

是的，你是对的。如果您在应用程序中使用任何私有 Apple API，它将被拒绝。

请注意，第三方代码库与私有 API 不同（例如您从 github、sourceForge 等下载的库）。只要您使用的库遵循规则即可。

我对CTMessageCenter不熟悉，所以不知道是哪个。

# iphone - 如何将文本数据写入 sqlite3 数据库

> ID：11045095
> 
> 赞同：0
> 
> 时间：2012-06-15T05:31:46.920
> 
> 标签：iphone, objective-c, ios

我已经创建了一个 sqlite3 数据库，并且在该数据库中我正在编写名称文本，但是当我写入数据库时​​它不会只写入空白行创建我正在这样做

```
if(sqlite3_step(statement)==SQLITE_DONE)
{
  NSLog(@"ALERT>TEXT===%@",alert.alertText);
  NSLog(@"....");
  sqlite3_bind_text(statement, 1, [alert.alertText UTF8String], -1, NULL);
  sqlite3_step(statement);

  NSLog(@"insertion is done");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:56:52.767

我正在使用此代码将数据插入到我的数据库中。

```
 NSString *sqlStatement = [NSString stringWithFormat:@"insert into TableName alertName values '%@'",[name stringWithPercentEscape]];
                    NSLog(@"%@",sqlStatement);    

                    if (sqlite3_exec(database, [sqlStatement cStringUsingEncoding:NSUTF8StringEncoding], NULL, NULL, &error)  == SQLITE_OK)
                    {
                        NSLog(@"record inserted successfully!!");
                        NSLog(@"%@",databasePath);
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:01:00.803

```
if(sqlite3_open(dbPath, &db)==SQLITE_OK)
{

    NSString *insertSQL = [NSString stringWithFormat:@"INSERT INTO YourTable ('symbol') VALUES",%@];

    const char *insertStmt=[insertSQL UTF8String];

    char *errmsg=nil;

    if(sqlite3_exec(db, insertStmt, NULL, NULL, &errmsg)==SQLITE_OK)
    {
         NSLog(@"Row ADDED!");
    }

    sqlite3_close(db);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:48:25.373

我推荐你使用 FMDB 框架。它是一个非常轻量级的包。有了它，您可以仅通过 SQL 来管理您的 sqlite 数据库。

这是[链接](https://github.com/ccgus/fmdb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T06:03:02.143

![连接到数据库](../Images/9b39bd7a076264f045087c3a8750f11f.png)

![获取数据库路径](../Images/50845a0f2622b16950930f2527014c19.png)

![插入数据库功能](../Images/5958e3a146bc7b60ad051b15d69541c9.png)

如果满足您的要求，请投票并将其标记为已回答。

谢谢，

# java - OC4J 的默认 servlet 是什么？

> ID：11045098
> 
> 赞同：1
> 
> 时间：2012-06-15T05:32:14.430
> 
> 标签：java, spring, spring-mvc, oc4j

我需要知道这个应用程序服务器中的默认 servlet 是什么（确切的版本是 OC4J 10.1.3.3），因为我正在尝试部署一个使用 spring mvc 制作的 Web 应用程序（确切的版本是 3.1）。

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-default-servlet-handler)

在我的 spring 配置文件中，我使用以下内容：

```
<mvc:default-servlet-handler default-servlet-name="unknown-oc4j-servlet-name"  /> 
```

如果您不明确写入默认 servlet 名称，则在此容器中不起作用

# jquery - 在 jQuery 日期选择器中单击“现在”按钮时如何自定义插入的文本？

> ID：11045099
> 
> 赞同：0
> 
> 时间：2012-06-15T05:32:16.177
> 
> 标签：jquery, jquery-ui, jquery-plugins, datetimepicker

使用日期时间选择器，我让用户选择要在 linux 服务器上远程设置的时间。

**Q1：**当单击现在按钮时，我希望此文本*“sntp -P no -r pool.ntp.org”*出现在文本框中。那可能吗？

**Q2：**或者如何添加另一个按钮，在 datepicker 文本框中插入文本**“sntp -P no -r pool.ntp.org” ？**

[jsfiddle 示例](http://jsfiddle.net/radek/dPRjS/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:45:48.303

你可以做一些这样的事情来实现。

[如何在 DatePicker 的文本字段中添加一些自定义文本？](http://jqfaq.com/how-to-add-some-custom-text-to-the-datepickers-text-field/)

在这里，您必须覆盖默认的 val 方法，以删除 datapicker 中的自定义字符串，删除该字符串将帮助您突出显示以前在日历中选择的日期。因为 datepicker 使用 val 函数来知道选择哪个日期来突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:22:34.460

这是我曾经发现的一个解决方案，它添加了一个“清除”按钮。用您需要的按钮替换它应该不难；

[http://jsbin.com/ofare/edit#javascript,html](http://jsbin.com/ofare/edit#javascript,html)

请注意，这不是我自己制作的，我只是自己找到并使用它。我不喜欢它如何需要 timeout()，所以如果找到更好的解决方案，我会密切关注这个线程:)

# postgresql - 如何在用户的浏览器上实现 node-postgres？

> ID：11045108
> 
> 赞同：1
> 
> 时间：2012-06-15T05:33:25.973
> 
> 标签：postgresql, node.js, websocket, socket.io, node-postgres

所以我在我的本地机器上测试了这个特定的例子：http:
[//bjorngylling.com/2011-04-13/postgres-listen-notify-with-node-js.html](http://bjorngylling.com/2011-04-13/postgres-listen-notify-with-node-js.html)

有效！因此，现在当我更新特定表并运行我的 node.js 文件（来自教程）时 - 我会在终端（mac）上收到即时通知！凉爽的！

**但是我如何在客户端的浏览器上实现它呢？**

首先，在 node.js 脚本中，您会注意到我必须使用我的用户名和密码连接到数据库：

```
pgConnectionString = "postgres://username:pswd@localhost/db"; 
```

我显然不能在用户浏览器下载的 .js 文件中浮动。

另外，我什至不知道我必须在`<head>`. 我在任何地方都找不到关于如何在现实世界中使用它的任何东西……我所看到的只是可以在命令行中使用的简洁的小示例。

任何建议或正确方向的指导都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:59:44.330

你不能。

Node.js 直接在您的服务器上运行，直接与该机器上的本机库对话。我不确定您使用的 postgres 驱动程序到底是做什么的，但它要么与 postgres 库对话，要么直接与本地或远程数据库服务器上的套接字对话。

这些方法都不能直接从浏览器环境中使用（它不能直接与本地库对话，也不能说“原始”套接字）。

您可以做的是让 Web 客户端与服务器（运行 node.js 或类似的）上的您自己的服务器进程对话，然后它会代表客户端与数据库对话。

假设您还需要数据库服务器才能向客户端发起通知，您将需要使用像 socket.io 或类似的双向通信模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:43:06.893

您可以这样做：将运行在 node.js 上的 JS 与基于 node.js 的 WebSocket 服务器相结合，该 JS 访问 Postgres 监听事件，实现 PubSub 并推送到 HTML5 浏览器......支持 WebSocket 的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:45:18.827

另一种选择：使用通用 WebSocket 到 TCP 桥，如[https://github.com/kanaka/websockify](https://github.com/kanaka/websockify)并在 JS 中实现 Postgres 客户端协议以在浏览器中运行。这是可行的，但对于胆小的人来说可能并不容易。

# asp.net-mvc-3 - 使用 jquery 从 mvc 中的文件上传控件中获取文件路径在 FIREFOX 中不起作用

> ID：11045115
> 
> 赞同：0
> 
> 时间：2012-06-15T05:34:11.813
> 
> 标签：asp.net-mvc-3, jquery-ui

![在此处输入图像描述](../Images/f0d2f89f44a987bd85b4a420e52d5b81.png)

如图所示，我有一个 mvc 文本框控件和文件上传控件。这是标记和js代码以及操作方法....

```
<div>
<div>
    <input type="text" id="txtusername" /></div>
<div>
    <input type="file" id="fileupload" /></div>
<div>
</div>
<div>
    <input type="button" id="btnsubmit" value="update/submit" onclick="fnupdatedetails(this)" /></div> 
```

```
 [HttpPost]
    public ActionResult UpdateDetails(FormDetailsBE formDetailsBE)
    {
        return View();
    }

    public class FormDetailsBE
    {
        public string UserName { get; set; }
        public string FileUpload { get; set; }
    } 
```

这是 js 代码...对于正确获取文件路径的 IE ![在此处输入图像描述](../Images/8e38124a3b57fdcddd4843e40dd13aa2.png)

这是 js 代码......对于没有获取文件路径的 firefox

![在此处输入图像描述](../Images/b07464a5ecc3347fd7e3ee37203d09f7.png)

相同的 js 代码在不同的浏览器中表现不同......请有人帮忙。我被困住了。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:41:52.790

出于安全原因，这是不允许的。客户端文件路径永远不会发送到服务器。在旧版本的 Internet Explorer 中发送此路径但在新版本中存在错误，但此错误已在最新版本中修复。服务器不需要知道客户端计算机上的文件路径。

# r - 在 Mac OSX 中从源代码安装 R 包时出错 - 找不到“make”命令

> ID：11045117
> 
> 赞同：2
> 
> 时间：2012-06-15T05:34:38.590
> 
> 标签：r, osx-lion

我遇到了 R 的问题，我似乎无法弄清楚如何解决。

尝试从源代码安装 R 包时，遇到以下错误：

> ```
> * installing *source* package ‘cthresh’ ...
> ** libs
> *** arch - i386
> sh: make: command not found
> ERROR: compilation failed for package ‘cthresh’
> * removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/cthresh’ 
> ```

这会让你认为我没有安装编译器或者没有设置 $PATH。两者都不是真的。我已经安装了 XCode 并且 echo $PATH 给了我：

```
echo $PATH
/Library/Frameworks/Python.framework/Versions/Current/bin:/Library/Frameworks/Python.framework/Versions/Current/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/admn/bin:/usr/local/bin:/Users/admn/bin:/usr/local/bin:/Users/admn/bin:/usr/local/bin:/Developer-3.2.5/usr/bin:/Users/admn/bin:/usr/local/bin:/Developer-3.2.5/usr/bin 
```

所以你可以看到 Developer 出现在 /usr/bin

我什至通过以下方式确定：

> 导出 PATH=${PATH}:/Developer-3.2.5/usr/bin

如果我在 bash 或 sh 中调用“make”：

> sh-3.2$ make make: ***没有指定目标，也没有找到 makefile。停止。
> 
> bash-3.2$ make make: ***没有指定目标，也没有找到 makefile。停止。

编译器在那里：

> bash-3.2$ gcc i686-apple-darwin10-gcc-4.2.1：没有输入文件
> 
> bash-3.2$ g++ i686-apple-darwin10-g++-4.2.1：没有输入文件

那么给了什么？为什么 R 不能“制造”？我真的对此一无所知，似乎无法在任何地方找到答案！我的猜测是 R 不是在寻找正确的编译器或其他东西，但我不知道如何检查它在哪里寻找以及为什么它在“make”上失败

我在 OSX Lion 的 MacBook Pro 上。请帮忙！

- -编辑 - -

好的，我在这个问题上取得了一些进展。即使我添加了

PATH=${PATH}:/Developer-3.2.5/usr/bin

在我的 bash/sh .profile 中，我还需要将它添加到 .Renviron 文件中。我在以下位置找到该文件：/Library/Frameworks/R.framework/Versions/2.15/Resources/etc/

但现在我收到了这个错误：

> *   安装*源*包 'cthresh' ... ** libs *** arch - i386 make: ***没有规则来制作目标`._cthreb.o', needed by`cthresh.so'。停止。错误：包“cthresh”的编译失败</li>

这让我觉得这个 .Renviron 文件中可能还有其他内容要添加？关于什么的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T19:54:38.160

您需要从 Xcode 4 for Lion 的首选项中安装“命令行工具”。否则，仅在 Lion 中安装 Xcode 就无法使用 gcc。

# windows - 从 c# 应用程序重新启动 windows mobile 6.5 专业版

> ID：11045118
> 
> 赞同：0
> 
> 时间：2012-06-15T05:34:51.790
> 
> 标签：windows, mobile, shutdown, reboot

我正在使用以下代码从我的 c# 应用程序重新启动设备

```
[Flags]
    public enum ExitFlags
    {
        Reboot = 0x02,
        PowerOff = 0x08
    }

    [DllImport("coredll")]
    public static extern int ExitWindowsEx(ExitFlags flags, int reserved);

ExitWindowsEx(ExitFlags.PowerOff, 0); 
```

但是我收到以下错误：

```
Can't find an Entry Point 'ExitWindowsEx' in a PInvoke DLL 'coredll'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:43:45.177

您收到错误是因为函数 ExitWindowsEx 在 coredll 中不存在它存在于 aygshell.dll

看看这里的信息[http://www.pinvoke.net/default.aspx/aygshell.ExitWindowsEx](http://www.pinvoke.net/default.aspx/aygshell.ExitWindowsEx)

# python - id 是 python 内置函数吗？

> ID：11045123
> 
> 赞同：2
> 
> 时间：2012-06-15T05:35:32.863
> 
> 标签：python, function, built-in

请看下面的代码，

```
def getCrewListAll(self):
    """
    Set to crew list to all available crew
    """
    crew = getIdNumbers()
    return map(lambda cr: cr.id, crew) 
```

这里是什么意思`cr.id`，是`id`内置的python函数还是？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T05:58:17.620

在您的示例中，对的引用`cr.id`不是函数调用。它访问变量的**成员属性**，该属性是任何对象`cr`的占位符。`crew`

`id` [是内置函数的名称](http://docs.python.org/library/functions.html#id)，是的。但是如果不查看实际的类定义，就无法知道它是否在这些对象的底层使用。

举个例子……如果这是一个 django 应用程序，模型实例的`id`成员属性会为您提供该记录的数据库 ID。它是该框架的类设计的一部分。

尽管我假设它是一个属性......据我们所知，它也可能是一个[计算属性](http://docs.python.org/library/functions.html#property)，类似于一个类似于属性的方法调用。在查看您的示例时，它可能会执行更多逻辑。

最后，因为它`cr.id`可以是任何东西，它甚至可以是一个方法，并且映射返回一个可调用的列表：cr.id()

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T05:41:49.387

`cr.id`不是内置函数（除非您已将其指定为...），它是`cr`那里对象的普通成员。

`id(cr)`将是对该内置函数的调用，并将返回`cr`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T06:48:33.030

我认为这里真正的问题是您不理解您发布的代码。在这种情况下，您需要了解`map`和`lambda`。

[`map`](http://docs.python.org/library/functions.html#map)是将函数应用于列表的每个元素并将其作为列表返回的函数：

```
>>> def func(a):
...   return a * 2
...
>>> map(func, [1,2,3])
[2, 4, 6] 
```

[`lambda`](http://docs.python.org/tutorial/controlflow.html#lambda-forms)可以看作是创建函数的捷径。上面可以写成`lambda`：

```
>>> func = lambda a: a * 2
>>> map(func, [1,2,3])
[2, 4, 6] 
```

那么您的代码`map(lambda cr: cr.id, crew)`在做什么：它从 list 中的每个对象返回一个 id 属性列表`crew`。

问题是这段代码实际上不是很好。您可以使用更直观的[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)编写相同的函数：

```
def getCrewListAll(self):
    return [cr.id for cr in getIdNumbers()] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T05:38:31.653

有一个内置的 id 函数，但可能与此相关，也可能不相关，具体取决于该对象的实现，无论哪种方式 id 都是该对象的成员/属性。

如果您想知道该对象有哪些类型的成员/字段，您可以`dir(crew[0])`假设它至少重新调整一个，并且如果它的文档正确，您也可以这样做`help(crew[0].id)`

# sql-server - 查询按最后四位对数据网格列进行排序？

> ID：11045126
> 
> 赞同：2
> 
> 时间：2012-06-15T05:35:42.843
> 
> 标签：sql-server, winforms, ms-access-2007

如何在datagridview中显示降序，顺序必须从最后一个字符之后开始。

这是我在 datagridvie "VehicleNo" 中的专栏

前任：

```
1)ap20aa4779

2)ap09ss9999

3)se06ps1136

4)su02rd5544 
```

`DESCENDING order`必须从最后一个字符之后开始。

我从数据库中获得以下值：-

```
1)ap09ss9999

2)su02rd5544

3)ap20aa4779

4)se06ps1136 
```

`The database is MSACCESS 2007.`

我的一位朋友建议这个查询：-

```
select VehicleNo from ScooterInOut order by reverse(vehicleNo) desc where TokenStatus=0 
```

它工作得很好，`SQL SERVER`但不工作`MsAccess`。

你能建议...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:56:57.363

在表达式中使用 Access db 引擎的`Right()`函数。`ORDER BY`

```
SELECT VehicleNo
FROM ScooterInOut
WHERE TokenStatus=0
ORDER BY Right(vehicleNo, 4) DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:21:14.207

```
 Select VehicleNo
 From tblVehicles
 Order By Convert(int,SUBSTRING(VehicleNo,Len(VehicleNo)-3,4)) Desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:24:02.763

获取数据后，为什么不在客户端（即 Datagridview）上进行排序。那么你将不会有任何 SQL SERVER / MSACCESS / Oracle 类型的依赖。查询数据，绑定到 DatagridView，然后在网格视图上应用排序。

因此，您可以像这样留下您的查询 -

`select VehicleNo from ScooterInOut where TokenStatus=0`这是一个非常标准的查询。然后，在绑定数据后对 Datagridview应用[排序。](http://msdn.microsoft.com/en-us/library/ms171608.aspx)

阅读 msdn，它包含有关如何实现此目的的所有信息 - [http://msdn.microsoft.com/en-us/library/ms171607.aspx](http://msdn.microsoft.com/en-us/library/ms171607.aspx)

性能问题 - 我假设您会考虑批量查询、应用分页和东西，如果它是一个大型数据集，那么您可能会考虑虚拟化 datagridview 等。

# magento - 将用户从印度重定向到服务器上的文件夹

> ID：11045127
> 
> 赞同：2
> 
> 时间：2012-06-15T05:35:48.497
> 
> 标签：magento

我们的服务器上安装了 magento。印度用户有一个不同的网站。我们想要的是将印度观众重定向到这一点。印度网站位于**/in**文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:44:56.813

如果“印度观众”是指来自印度 ISP 托管的 IP 地址的请求：

您可以尝试自己定位 IP 范围，方法是挖掘适当[RIR](http://en.wikipedia.org/wiki/Regional_Internet_registry)的免费资源，在印度的情况下应该是[APNIC](http://www.apnic.net/publications/research-and-insights/ip-address-trends/by-rir)。

您也可以直接从一些商业 GeoIP/GeoLocation 服务获取 IP 范围，例如[IP2Location](http://ip2location.com)或[MaxMind](http://maxmind.com)。如果您不介意失去一些准确性，后者还提供名为[Geolite Country](http://www.maxmind.com/app/geolite)的免费数据库下载。

知道 IP 范围后，您可以将它们用作重写条件，例如在`RewriteCond`Magento 根`.htaccess`文件中的指令中，或在 Magento 的`index.php`using`header()`命令中。

`RewriteCond`例如两个印度 IP 范围 58.2.0.0 到 58.2.255.255 和 61.0.0.0 到 61.0.255.255：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REMOTE_ADDR} ^58\.2\. [OR]
    RewriteCond %{REMOTE_ADDR} ^61\.0\.
    RewriteRule ^(.*)$ in/$1 [R,L]
</IfModule> 
```

查看印度 IP 范围的计数和不同类型，并且知道`mod_rewrite`不支持指令的[CIDR](http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing)表示法，我*不*知道在 Magento中使用重定向是否会更高效。`RewriteCond``header()``index.php`

也就是说，请注意基于 IP 地址的重定向并不是一件完美的事情。有成千上万的[开放代理](http://en.wikipedia.org/wiki/Open_proxy)可用，隐藏/隐藏请求来自的真实 IP 地址。

# eclipse - 为什么 Eclipes 3.4.0 明显取消勾选“自动构建”？

> ID：11045131
> 
> 赞同：1
> 
> 时间：2012-06-15T05:35:55.397
> 
> 标签：eclipse

我在 Eclipse 3.4.0 中有一个用于插件开发的旧工作区。我遇到了一个问题，我认为这是此版本中的错误。在工作台菜单栏中（项目->自动构建），我勾选了“自动构建”，但每次我的工作区启动时，它都会取消勾选。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:49:37.340

[一个重复的问题](https://stackoverflow.com/questions/115770/in-eclipse-why-does-build-automatically-get-mysteriously-disabled?rq=1)给出了一个可能的答案：如果您将工作区元数据置于版本控制之下（而不仅仅是工作区内容），您可能会错误地使用版本控制系统（在 Eclipse 内部或外部）更新工作区元数据。

# cron - 无法理解 cron 作业解决方案中的 grep

> ID：11045134
> 
> 赞同：0
> 
> 时间：2012-06-15T05:36:21.290
> 
> 标签：cron, grep

[我只在它尚未运行时才](https://stackoverflow.com/questions/2366693/run-cron-job-only-if-it-isnt-already-running)查看 Run cron 作业的解决方案，以便将其应用于我遇到的类似问题，但我无法理解

```
ps -u $USER -f | grep "[ ]$(cat ${PIDFILE})[ ]"' 
```

似乎是说从 ps 检查每一行的末尾是否有“ PIDnumber ”，但是当我查看我的 ps 输出时，PIDnumber 在第二列中。我将第一个 $ 解释为正则表达式 check_end_of_line 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:08:43.637

`$(stuff)`将执行“东西”（在这种情况下`cat ${PIDFILE}`）

PIDFILE 被假定为文件的路径，因此整行基本上是在 ps 输出中查找包含“pid 文件”内容的任何行（在 pid`[ ]`的每一侧添加一些空格，以便如果 pid 文件包含 '888' 它不会匹配 ps 输出中的 '8888'）

# c# - 下次读取流时出现隔离存储异常

> ID：11045138
> 
> 赞同：2
> 
> 时间：2012-06-15T05:36:54.507
> 
> 标签：c#, windows-phone-7, cordova, dispatcher, isolatedstorage

我正在使用 Phonegap 为 WP7.1 创建一个应用程序，我必须在其中下载视频并将其保存在独立存储中。现在在阅读该视频时，我第一次可以正确阅读它，但之后我无法阅读流。每次我在读过该视频后尝试阅读该视频时都会发生此异常：**IsolatedStorageFileStream 上不允许操作。**

代码取自：[How to play embedded video in WP7 - Phonegap?](https://stackoverflow.com/questions/9326008/how-to-play-embedded-video-in-wp7-phonegap) 并添加了暂停和停止功能。

```
using System;
using System.IO;
using System.IO.IsolatedStorage;
using System.Runtime.Serialization;
using System.Windows;
using System.Windows.Controls;
using Microsoft.Phone.Controls;
using WP7CordovaClassLib.Cordova.JSON;

namespace WP7CordovaClassLib.Cordova.Commands
{
    public class Video : BaseCommand
    {
        /// <summary>
        /// Video player object
        /// </summary>
        private MediaElement _player;
        Grid grid;

        [DataContract]
        public class VideoOptions
        {
            /// <summary>
            /// Path to video file
            /// </summary>
            [DataMember(Name = "src")]
            public string Src { get; set; }
        }

        public void Play(string args)
        {
            VideoOptions options = JsonHelper.Deserialize<VideoOptions>(args);

            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                try
                {
                    _Play(options.Src);

                    DispatchCommandResult(new PluginResult(PluginResult.Status.OK));
                }
                catch (Exception e)
                {
                    DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR, e.Message));
                    GoBack();
                }
            });

        }

        private void _Play(string filePath)
        {
            if (_player != null)
            {
                if (_player.CurrentState == System.Windows.Media.MediaElementState.Paused)
                {
                    _player.Play();
                }
            }
            else
            {
                // this.player is a MediaElement, it must be added to the visual tree in order to play
                PhoneApplicationFrame frame = Application.Current.RootVisual as PhoneApplicationFrame;
                if (frame != null)
                {
                    PhoneApplicationPage page = frame.Content as PhoneApplicationPage;
                    if (page != null)
                    {
                        grid = page.FindName("VideoPanel") as Grid;

                        if (grid != null && _player == null)
                        {
                            _player = new MediaElement();
                            grid.Children.Add(this._player);
                            grid.Visibility = Visibility.Visible;
                            _player.Visibility = Visibility.Visible;
                            _player.MediaEnded += new RoutedEventHandler(_player_MediaEnded);
                        }
                    }
                }

                Uri uri = new Uri(filePath, UriKind.RelativeOrAbsolute);
                if (uri.IsAbsoluteUri)
                {
                    _player.Source = uri;
                }
                else
                {
                    using (IsolatedStorageFile isoFile = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        if (isoFile.FileExists(filePath))
                        {
                            **using (IsolatedStorageFileStream stream =
                                new IsolatedStorageFileStream(filePath, FileMode.Open, isoFile))
                            {
                                _player.SetSource(stream);

                                stream.Close();
                            }
                        }
                        else
                        {
                            throw new ArgumentException("Source doesn't exist");
                        }
                    }
                }

                _player.Play();
            }
        }

        void _player_MediaEnded(object sender, RoutedEventArgs e)
        {
            GoBack();
        }

        public void Pause(string args)
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    try
                    {
                        _Pause(args);

                        DispatchCommandResult(new PluginResult(PluginResult.Status.OK));
                    }
                    catch (Exception e)
                    {
                        DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR, e.Message));
                    }
                });
        }

        private void _Pause(string filePath)
        {
            if (_player != null)
            {
                if (_player.CurrentState == System.Windows.Media.MediaElementState.Playing)
                {
                    _player.Pause();
                }
            }
        }

        public void Stop(string args)
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                try
                {
                    _Stop(args);

                    DispatchCommandResult(new PluginResult(PluginResult.Status.OK));
                }
                catch (Exception e)
                {
                    DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR, e.Message));
                }
            });
        }

        private void _Stop(string filePath)
        {
            GoBack();
        }

        private void GoBack()
        {
            if (_player != null)
            {
                if (_player.CurrentState == System.Windows.Media.MediaElementState.Playing
                    || _player.CurrentState == System.Windows.Media.MediaElementState.Paused)
                {
                    _player.Stop();

                }

                _player.Visibility = Visibility.Collapsed;
                _player = null;
            }

            if (grid != null)
            {
                grid.Visibility = Visibility.Collapsed;
            }
        }
    }
} 
```

** 读取文件时的 _Play 函数发生异常（**Operation not allowed on IsolatedStorageFileStream.**）（请参见上面代码中的**）。第一次运行完美，当我第二次读取文件时，它给出了异常。

可能是什么问题？我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:13:48.000

听起来该文件仍然从先前的读取中打开。如果是这种情况，您需要指定 fileAccess 和 fileShare 以允许它被另一个线程打开：

使用（IsolatedStorageFileStream 流 = 新的 IsolatedStorageFileStream（filePath，FileMode.Open，FileAccess.Read，FileShare.Read，isoFile）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:31:55.353

我通过在返回之前将 MediaElement 的源属性设置为 null 解决了这个问题。所以，当我回来播放相同的视频时，MediaElement 源是免费的。

将 GoBack 函数编辑为：

```
private void GoBack()
        {
            // see whole code from original question.................

                _player.Visibility = Visibility.Collapsed;
                _player.Source = null; // added this line
                _player = null;

           //..................

        } 
```

谢谢大家。

# regex - 正则表达式从 html 文本 Flex 中提取锚标记

> ID：11045145
> 
> 赞同：0
> 
> 时间：2012-06-15T05:37:31.057
> 
> 标签：regex, apache-flex

我用这个。指定边界`<a`和`/a`

```
var regex:RegExp =  /<\b([a]) \w+ \<\/([a])\b>/g;
var test:String = "some text that starts and <a href="abc.com">Click Here </a>ends with same";
var a:Array = test.match(regex); 
```

我的问题是，`a`如果我们有更多的单词或特殊字符之间的特殊字符将不匹配，则只能在标签之间找到单个单词。任何人都可以解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:44:44.050

正则表达式：

```
/<\s*h2[^>]*>(.*?)<\s*/\s*h2>/g 
```

标题1

我有标题标签，您可以将锚标签放在表达式中并尝试它可能会有所帮助。我很久以前没有测试过我用过这个。

# android - ListView:drawSelectorOnTop 在主题中被忽略？

> ID：11045146
> 
> 赞同：3
> 
> 时间：2012-06-15T05:37:37.610
> 
> 标签：android, listview

在 styles.xml 中，我为 ListView 项定义了一个主题和一个样式：

```
// styles.xml
<style name="MyTheme">
    <item name="android:listViewStyle">@style/ListView</item>
</style>

<style name="ListView">
    <item name="android:drawSelectorOnTop">true</item>
    <item name="android:listSelector">@drawable/my_red_selector</item>
</style> 
```

我正在使用 ListFragment，我可以看到我的 listview 选择器的颜色受到尊重（“@drawable/my_red_selector”），但似乎 drawSelectorOnTop 属性被忽略了 - 我的选择器仍在下方绘制。

如果我定义自己的布局文件并执行以下操作：

```
<ListView
    android:id="@+id/foo"
    ...
    style="@style/ListView" /> 
```

那么样式中的 drawSelectorOnTop 属性就会被兑现。是否有什么我可能做错了让我的顶部属性上的选择器被忽略？

谢谢

- - 编辑 - - - - -

这是“my_red_selector”的定义：

```
// my_red_selector.xml
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/red_on"/>
  <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/red_on"/>
  <item android:state_focused="true" android:drawable="@drawable/red_on"/>
  <item android:state_focused="false" android:state_pressed="false" android:drawable="@drawable/transparent"/>
</selector>

// red_on.xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
  <solid android:color="@color/red" />
</shape> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:56:37.200

如果您有自定义行，请在 ListView 的列表项行上尝试以下选择器

```
 <!-- Active tab -->
    <item android:drawable="@android:color/transparent" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>
    <!-- Inactive tab -->
    <item android:drawable="@android:color/transparent" android:state_focused="false" android:state_pressed="false" android:state_selected="false"/>
    <!-- Pressed tab -->
    <item android:drawable="@drawable/red_on" android:state_pressed="true"/>
    <!-- Selected tab (using d-pad) -->
    <item android:drawable="@drawable/red_on" android:state_focused="true" android:state_pressed="false" android:state_selected="true"/>

</selector> 
```

# php - 如何在php中获取ajax请求的参数

> ID：11045148
> 
> 赞同：0
> 
> 时间：2012-06-15T05:37:42.353
> 
> 标签：php, javascript, ajax, web-services

编辑：我解决了我的问题，每个人。我链接到了错误的 javascript 页面。那是愚蠢的。非常感谢你

我有一个带有参数随机的ajax请求GET：是的，但是当我使用PHP检查参数时，参数似乎没有退出

我的代码是这样的：对于 ajax

```
function fetchData() {
    new Ajax.Request("webservice.php", {
        method: "get",
        parameters: {random: "yes"},
        onSuccess: displayData,
        onFailure: ajaxFailure,
        onException: ajaxFailure
    });
} 
```

我写PHP来检查参数

```
if ($_GET["random"] == "yes"){ 
    do something
}else if(isset($_REQUEST["poll"]) && $_SERVER["REQUEST_METHOD"] == "GET"){ 
    //this is b/c i have another ajax request with parameters {poll: "favChar"},
    do something
} 
```

我收到发出 ajax 请求的错误。我检查了我的 PHP 代码。我输入 wwww.domainname.com/webservice.php?random=yes 并且页面正确输出结果。有人能帮我吗？感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:39:16.327

最简单的方法是在 URL 中添加参数：

```
new Ajax.Request("webservice.php?random=yes", {
  // options
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:42:51.477

1.  首先创建一个 AJAX obj：`var http = new XMLHttpRequest();`

***GET 方法：***

```
var url = "webservice.php";
var params = "random=yes&param=value";
http.open("GET", url+"?"+params, true);
http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
        alert(http.responseText);
    }
}
http.send(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:44:12.707

根据文档，[`parameters`需要一个 Hash-compatible object](http://prototypejs.org/api/ajax/options)，因此您可能必须转换纯 JavaScript 哈希，如下所示：

```
function fetchData() {
    new Ajax.Request("webservice.php", {
        method: "get",
        parameters: $H({random: "yes"}),
        onSuccess: displayData,
        onFailure: ajaxFailure,
        onException: ajaxFailure
    });
} 
```

# android - 单击按钮即可发现蓝牙，无需导航到蓝牙设置页面

> ID：11045149
> 
> 赞同：1
> 
> 时间：2012-06-15T05:37:48.653
> 
> 标签：android, button, bluetooth

我们如何在不进入蓝牙设置页面的情况下让蓝牙在按钮点击时被发现。

```
 bt_strength.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            if (mBtAdapter.getScanMode()!= BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) 
           {

          make discoverable

            } 
```

我怎样才能做到这一点？

任何帮助总是很感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:48:24.917

您将从以下位置获得蓝牙适配器对象：

```
 BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); 
```

在按钮单击时，您可以调用：

```
 mBluetoothAdapter.startDiscovery(); 
```

这将使您的蓝牙处于**发现模式**

# ruby-on-rails - Paypal 支付是依靠其他用户支付全部金额的一部分吗？

> ID：11045150
> 
> 赞同：0
> 
> 时间：2012-06-15T05:37:51.257
> 
> 标签：ruby-on-rails, paypal, payment-gateway, payment

也许这个问题适用于所有支付网关，但是，我想知道处理支付的最佳实践方法，其中整个交易仅在足够多的用户贡献给定份额时才有效。

1) 是否应该为每个贡献用户处理付款，因为他们承诺支付并在未达到金额时退款（没有足够的用户贡献）？

2）如果在找到足够的贡献用户并且达到目标金额的时候为每个用户处理付款，那么如果个别用户拖欠付款，则会出现整个交易失败的问题。

实践中最合理的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:05:01.983

你可以试试PayPal的Preapproval功能。这将适用于更安全的选项 1。

预先批准的 API 在[这里](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPreapproval)。

# c# - 如何在 WPF 中创建类似 MS Office 2007/2010 的工具提示

> ID：11045160
> 
> 赞同：2
> 
> 时间：2012-06-15T05:39:01.037
> 
> 标签：c#, wpf, tooltip, ribbon

如何像我在 MS-Office 2007/2010 中看到的那样为我的 WPF RibbonItems 创建复杂的工具提示。下面给出了一个示例图像。

![在此处输入图像描述](../Images/8a01596638f2e02306912a0b966267c0.png)

在[MSDN](http://msdn.microsoft.com/en-us/library/ff799534.aspx)上，我得到了这样的图像，但 MSDN 没有告诉我们如何创建它。

![在此处输入图像描述](../Images/afbc9429c81903bc6ba7e151596ae4fd.png)

如果有人可以帮助我制作像 MS Office 这样的工具提示，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:58:02.653

正如您[在文档](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.aspx)中看到的那样， a 上有几个属性`RibbonButton`引用了增强工具提示的部分内容：

*   [工具提示描述](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.tooltipdescription.aspx)
*   [工具提示页脚描述](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.tooltipfooterdescription.aspx)
*   [ToolTipFooterImageSource](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.tooltipfooterimagesource.aspx)
*   [工具提示页脚标题](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.tooltipfootertitle.aspx)
*   [工具提示图像源](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.tooltipimagesource.aspx)
*   [工具提示标题](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbonbutton.tooltiptitle.aspx)

想一想，这些正是您在屏幕截图中提到的*确切属性。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:55:42.797

你可以下载[`Ribbon Sample`](http://www.microsoft.com/en-us/download/details.aspx?id=9620)代码。

如果您是初学者，请从这个非常全面的教程开始[创建功能区应用程序](http://msdn.microsoft.com/en-us/library/dd316924%28v=vs.85%29)

[指定功能区图像资源](http://msdn.microsoft.com/en-us/library/dd316921%28v=vs.85%29.aspx)

我也建议阅读以下内容：[了解命令和控件](http://msdn.microsoft.com/en-us/library/dd316916%28v=vs.85%29.aspx)

对于更具体的问题，您可以在[`MSDN Ribbon Forum`](http://social.msdn.microsoft.com/Forums/en-US/windowsribbondevelopment)

希望能帮助到你！

# visual-studio-2010 - Azure：缓存选项卡不可见

> ID：11045162
> 
> 赞同：4
> 
> 时间：2012-06-15T05:39:06.783
> 
> 标签：visual-studio-2010, azure, azure-configuration

也许我的问题有点愚蠢，但是 :) 我安装了 Azure SDK 1.7（2012 年 6 月）。Web 角色属性中没有缓存选项卡。我应该怎么做才能启用缓存选项卡？

*我正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:55:06.773

您是否打开了基于 v1.6 的项目？如果是这样，那就可以解释了：您只会在指定 v1.7 的项目中看到这一点。在创建新项目时，查看左上角的角色选择对话框：

![新建项目对话框](../Images/ef43ef6d21659ee72a8294178703e5b4.png)

如果将其更改为**Windows Azure Tools - November 2011**，则缓存工作角色选项会消失，所有角色上的缓存选项卡也会消失。

# qt - 在 Qt 中获取运行时架构信息

> ID：11045163
> 
> 赞同：3
> 
> 时间：2012-06-15T05:39:08.877
> 
> 标签：qt, qt4

如果用户的系统是 Win 7-32 或 Win7-64，我如何在运行时使用 Qt 发现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:28:52.773

没有办法专门使用 Qt，AFAIK。下面是如何做到这一点。

```
#include <windows.h>
#include <tchar.h>
#include <QtCore/QSysInfo>

typedef enum { Win_64, Win_32, Error, Other } OsType;

typedef BOOL (WINAPI *LPFN_ISWOW64PROCESS) (HANDLE, PBOOL);

OsType checkOS() {
#ifndef Q_OS_WIN32
    return Other;
#else
    // An application compiled for 64 bits can only run on a 64 bit os,
    // so no need to check any further.
    if (QSysInfo::WordSize == 64) return Win7_64;
    // A 32 bit application may be running on a 64 bit OS.
    BOOL is64 = FALSE;
    // IsWow64Process may not be available in kernel32 on all Windows versions, so we bind to it
    // at runtime.
    LPFN_ISWOW64PROCESS fnIsWow64Process;
    fnIsWow64Process = (LPFN_ISWOW64PROCESS)
            GetProcAddress(GetModuleHandle(TEXT("kernel32")),"IsWow64Process");
    // No way it's a 64 bit OS if it doesn't have this API.
    if (fnIsWow64Process == NULL) return Win_32;
    // Note that GetCurrentProcess() can't fail.
    if (!IsWow64Process(GetCurrentProcess(), &is64)) return Error; // The check has failed.
    return is64 ? Win_64 : Win_32;
#endif
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T12:55:55.740

对于 Qt 5，您可以使用[QSysInfo](http://doc.qt.io/qt-5/qsysinfo.html)静态函数，例如`prettyProductName()`和`currentCpuArchitecture()`。

# ios - UIScrollView - 告诉 setContentOffset 和手动滚动的区别

> ID：11045171
> 
> 赞同：7
> 
> 时间：2012-06-15T05:40:16.483
> 
> 标签：ios, uiscrollview, touchesbegan, touchesmoved

我有一个滚动视图，它每 3 秒自动前进到下一个“页面”（也使用了页面控件）。但是，一旦用户触摸滚动视图，我想停止自动前进。

我已经对滚动视图进行了子类化。我可以在子类中检测到touchesBegan，但是没有调用touchesMoved，所以我无法判断用户是否手动滑动了滚动视图。我不能使用 scrollviewDidScroll，因为当我在自动提前计时器触发时设置 contentOffset 时会调用它。

那么检测触摸的其他选择是什么？为什么不在滚动视图子类上调用 touchesMoved？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:51:05.470

感谢您的建议。他们帮助我偶然发现了这个简单的解决方案：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    [self.scrollTimer invalidate];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:55:12.503

您可能需要查看以下委托方法：

```
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView 
```

每个苹果：

> 滚动视图在 UIScrollView 和 setContentOffset:animated: 和 scrollRectToVisible:animated: 方法的实现结束时调用此方法，但仅在请求动画时才调用。

因此，仅在发生程序滚动时才调用该委托方法。您可以在该方法中设置自动滚动调用，仅在某些 BOOL 为 false 时调用它。在您的触摸事件中将该 BOOL 设置为 true。

或者完全不同的东西=]

虽然它是一个有用的委托方法。

~ 祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:46:54.683

滚动视图可能会指定一个子视图来接收触摸输入——UIKit 对象对这类事情非常挑剔，通常甚至无法处理转发事件。

您可能想要做的是键值观察`tracking`或`dragging`（听起来您想要后者）。如果相关属性更改为 true，则您知道用户已启动滚动。

# c - 使用 srand() 定义变量的随机数生成

> ID：11045173
> 
> 赞同：0
> 
> 时间：2012-06-15T05:40:21.630
> 
> 标签：c, random, numbers

这是不起作用的代码：

```
Enemy.strength = srand((unsigned)time(NULL)) % 10; 
```

Enemy.strength 是一个整数

我做了一些研究，发现您不能直接使用 rand/srand 定义变量，例如：

```
a = rand(); 
```

我只是想知道为什么以及是否有解决此问题的方法或您建议的替代方法

语言：C...不是C++

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:44:34.300

`srand(seed)`返回无效。它用于播种随机数生成器。`rand()`返回一个介于 0 和 RAND_MAX 之间的伪随机整数（在 stdlib.h 中定义）。

因此，要为您的敌人获得随机力量，您应该执行以下操作：

```
Enemy.strength = rand() % 10; // gives a strength between 0 and 9 
```

您可以调用`srand`代码中的某个位置，但只需要调用一次。应该在调用 rand() 之前调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:45:03.627

srand() 接受种子作为它的第一个参数。只需在分配 Enemy.strength 之前调用 srand() 并将 rand() 的返回值分配给它。

# 例子

```
srand((unsigned)time(NULL)), Enemy.strength = rand() % 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:20:41.590

请参阅以下链接以进一步了解
[srand](http://cplusplus.com/reference/clibrary/cstdlib/srand/)
[rand](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)

# java - 如何在玩井字游戏时，如果我点击它，或者当游戏结束时阻止一个点

> ID：11045174
> 
> 赞同：-2
> 
> 时间：2012-06-15T05:40:35.890
> 
> 标签：java

我有一个问题，我有一个游戏，井字游戏，我不知道如何做到这一点，所以当有人获胜或有人移动时，它会挡住某个位置，而当有人获胜时，它不会让你做任何事情，它在 JFrame 内，我可以随时更改 O 和 X 这是代码

```
package project;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.SwingConstants;
import javax.swing.Timer;
import java.util.Random;
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;

public class Project extends JFrame
{
    static JButton startButton = new JButton();

    static ImageIcon image = new ImageIcon("src/project/imagesX1.jpg");
    static ImageIcon imageX = new ImageIcon("src/project/images1.jpg");

    static JButton restart = new JButton();

    static JLabel label0 = new JLabel();
    static JLabel label1 = new JLabel();
    static JLabel label2 = new JLabel();
    static JLabel label3 = new JLabel();
    static JLabel label4 = new JLabel();
    static JLabel label5 = new JLabel();
    static JLabel label6 = new JLabel();
    static JLabel label7 = new JLabel();
    static JLabel label8 = new JLabel();

    static JLabel vert1 = new JLabel();
    static JLabel vert2 = new JLabel();
    static JLabel horiz1 = new JLabel();
    static JLabel horiz2 = new JLabel();

    static JLabel showWinner = new JLabel();

    static int[] gridMark = new int[9];
    static boolean xTurn = true;
    static int numberClicks = 0;
    static Timer drawTimer;

    static JLabel[] choiceLabel = new JLabel[9];
    static int[] labelValue = new int[9];

    static int screen = 0;

    static int whosTurn = 0;
    static int counter = 0;

    public static void main(String[] args)
    {
        new Project().show();
    }
    public Project()
    {
        setTitle("Tic Tac Toe");
        setVisible(true);
        setResizable(true);
        addWindowListener(new WindowAdapter() 
                {
                    public void windowClosing(WindowEvent e) 
        {
            System.exit(0);
        }
        });
        getContentPane().setLayout(new GridBagLayout());
        GridBagConstraints myGrid = new GridBagConstraints();
        getContentPane().setBackground(Color.white);

        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((int) (0.5 * (screenSize.width - getWidth())), (int) (0.5 * (screenSize.height - getHeight())), getWidth(), getHeight());

        for (int i = 0; i < 9; i++)
        {
            gridMark[i] = 0;
        }

        for (int i = 0; i < 9; i++)
        {
            labelValue[i] = 0;
        }

        choiceLabel[0] = label0;
        choiceLabel[1] = label1;
        choiceLabel[2] = label2;
        choiceLabel[3] = label3;
        choiceLabel[4] = label4;
        choiceLabel[5] = label5;
        choiceLabel[6] = label6;
        choiceLabel[7] = label7;
        choiceLabel[8] = label8;

        //ROW 1
        int x = 0;

        for (int i = 0; i < 3; i++)
        {
            myGrid = new GridBagConstraints();
            choiceLabel[i].setBackground(Color.white);
            choiceLabel[i].setPreferredSize(new Dimension(image.getIconWidth(), image.getIconHeight()));
            choiceLabel[i].setHorizontalAlignment(SwingConstants.CENTER);
            choiceLabel[i].setOpaque(true);
            choiceLabel[i].setForeground(Color.black);
            myGrid.gridx = x;
            x+=2;
            myGrid.gridy = 0;
            //gridConstraints.insets = new Insets(10, 10, 10, 10);
            myGrid.ipadx = 40;
            myGrid.ipady = 40;
            getContentPane().add(choiceLabel[i], myGrid);
            choiceLabel[i].addMouseListener(new MouseAdapter() 
            {
                public void mouseClicked(MouseEvent e) 
                {
                    labelMouseClicked(e);
                }
            });
        }

        //ROW 2
        x = 0;

        for (int i = 3; i < 6; i++)
        {
            myGrid = new GridBagConstraints();
            choiceLabel[i].setBackground(Color.white);
            choiceLabel[i].setPreferredSize(new Dimension(image.getIconWidth(), image.getIconHeight()));
            choiceLabel[i].setHorizontalAlignment(SwingConstants.CENTER);
            choiceLabel[i].setOpaque(true);
            choiceLabel[i].setForeground(Color.black);
            myGrid.gridx = x;
            x+=2;
            myGrid.gridy = 3;
            myGrid.ipadx = 40;
            myGrid.ipady = 40;
            getContentPane().add(choiceLabel[i], myGrid);
            choiceLabel[i].addMouseListener(new MouseAdapter() 
            {
                public void mouseClicked(MouseEvent e) 
                {
                    labelMouseClicked(e);
                }
            });
        }

        //ROW 3
        x = 0;

        for (int i = 6; i < 9; i++)
        {
            myGrid = new GridBagConstraints();
            choiceLabel[i].setBackground(Color.white);
            choiceLabel[i].setPreferredSize(new Dimension(image.getIconWidth(), image.getIconHeight()));
            choiceLabel[i].setHorizontalAlignment(SwingConstants.CENTER);
            choiceLabel[i].setOpaque(true);
            choiceLabel[i].setForeground(Color.black);
            myGrid.gridx = x;
            x+=2;
            myGrid.gridy = 5;
            myGrid.ipadx = 40;
            myGrid.ipady = 40;
            getContentPane().add(choiceLabel[i], myGrid);
            choiceLabel[i].addMouseListener(new MouseAdapter() 
            {
                public void mouseClicked(MouseEvent e) 
                {
                    labelMouseClicked(e);
                }
            });
        }

        myGrid = new GridBagConstraints();
        horiz1.setOpaque(true);
        horiz1.setBackground(Color.blue);
        myGrid.gridx = 0;
        myGrid.gridy = 1;
        myGrid.gridwidth = 5;
        myGrid.ipadx = 500;
        myGrid.ipady = 2;
        getContentPane().add(horiz1, myGrid);

        myGrid = new GridBagConstraints();
        horiz2.setOpaque(true);
        horiz2.setBackground(Color.blue);
        myGrid.gridx = 0;
        myGrid.gridy = 4;
        myGrid.gridwidth = 5;
        myGrid.ipadx = 500;
        myGrid.ipady = 2;
        getContentPane().add(horiz2, myGrid);

        myGrid = new GridBagConstraints();
        vert1.setOpaque(true);
        vert1.setBackground(Color.blue);
        vert1.setVerticalAlignment(SwingConstants.CENTER);
        myGrid.gridx = 1;
        myGrid.gridy = 0;
        myGrid.gridheight = 6;
        myGrid.ipadx = 2;
        myGrid.ipady = 500;
        //gridConstraints.insets = new Insets(10, 0, 10, 0);
        getContentPane().add(vert1, myGrid);

        myGrid = new GridBagConstraints();
        vert2.setOpaque(true);
        vert2.setBackground(Color.blue);
        myGrid.gridx = 3;
        myGrid.gridy = 0;
        myGrid.gridheight = 6;
        myGrid.ipadx = 2;
        myGrid.ipady = 500;
        //gridConstraints.insets = new Insets(10, 0, 10, 0);
        getContentPane().add(vert2, myGrid);

        myGrid = new GridBagConstraints();
        showWinner.setBackground(Color.white);
        showWinner.setOpaque(true);
        myGrid.gridx = 0;
        myGrid.gridy = 6;
        myGrid.gridwidth = 5;
        myGrid.gridheight = 6;
        getContentPane().add(showWinner, myGrid);

        restart.setText("Restart");
        myGrid.gridx = 1;
        myGrid.gridy = 7;
        getContentPane().add(restart, myGrid);
        restart.setVisible(false);
        restart.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                restartActionPerformed(e);
            }
        });

        pack();
    }

    private void labelMouseClicked(MouseEvent e)
    {
        Component clickedComponent = e.getComponent();
        int choice;
        for (choice = 0; choice < 9; choice++)
        {
            if (clickedComponent == choiceLabel[choice])
            {
                break;
            }
        }
        choiceLabel[choice].setBackground(Color.WHITE);

        if (whosTurn == 0)
        {
            choiceLabel[choice].setIcon(image);
            labelValue[choice] = 1;
            whosTurn = 1;
        }

        else if (whosTurn == 1)
        {
            choiceLabel[choice].setIcon(imageX);
            labelValue[choice] = 5;
            whosTurn = 0;
        }

        counter += 1;
        checkWinner();
    }
    public static void checkWinner()
    {
        if (labelValue[0] + labelValue[1] + labelValue[2] == 3 || labelValue[3] + labelValue[4] + labelValue[5] == 3 || labelValue[6] + labelValue[7] + labelValue[8] == 3 ||
                labelValue[0] + labelValue[3] + labelValue[6] == 3 || labelValue[1] + labelValue[4] + labelValue[7] == 3 || labelValue[2] + labelValue[5] + labelValue[8] == 3 || 
                labelValue[0] + labelValue[4] + labelValue[8] == 3 || labelValue[2] + labelValue[4] + labelValue[6] == 3)
        {
            showWinner.setFont(new Font("Arial" , Font.BOLD, 30));
            showWinner.setText("X wins!");
            restart.setVisible(true);

        }

        else if (labelValue[0] + labelValue[1] + labelValue[2] == 15 || labelValue[3] + labelValue[4] + labelValue[5] == 15 || labelValue[6] + labelValue[7] + labelValue[8] == 15 ||
                labelValue[0] + labelValue[3] + labelValue[6] == 15 || labelValue[1] + labelValue[4] + labelValue[7] == 15 || labelValue[2] + labelValue[5] + labelValue[8] == 15 || 
                labelValue[0] + labelValue[4] + labelValue[8] == 15 || labelValue[2] + labelValue[4] + labelValue[6] == 15)
        {
            showWinner.setFont(new Font("Arial" , Font.BOLD, 30));
            showWinner.setText("O wins!");
            restart.setVisible(true);
        }

        else if (counter == 9)
        {
            showWinner.setFont(new Font("Arial" , Font.BOLD, 30));
            showWinner.setText("It's a draw");
            restart.setVisible(true);
        }

    }

    public static int getGridSelected (int a, int b, int c, int d)
    {
        if(gridMark[a] + gridMark[b] + gridMark[c] == d)
        {
            if(gridMark[a] == 0) return a;
            else if(gridMark[b] == 0) return b;
            else if(gridMark[c] == 0) return c;
        }
        return -1;
    }
    public void restartActionPerformed(ActionEvent e)
    {

    }
} 
```

人工智能框架：

```
public static void makeMove()
{
    myFrame.addWindowListener(new WindowAdapter()
    {
        public void windowClosing(WindowEvent e)
        {
            System.exit(0);
        }
    });
    int gridSelected;
    int y;
    Random r = new Random();
    Graphics myGraphics = myFrame.getGraphics();

    //find gridSelected for "can win"
    if (getGridSelected(0,1,2,10) != -1) gridSelected = getGridSelected(0,1,2,10);
    else if (getGridSelected(3,4,5,10) != -1) gridSelected = getGridSelected(3,4,5,10);
    else if (getGridSelected(6,7,8,10) != -1) gridSelected = getGridSelected(6,7,8,10);
    else if (getGridSelected(0,3,6,10) != -1) gridSelected = getGridSelected(0,3,6,10);
    else if (getGridSelected(1,4,7,10) != -1) gridSelected = getGridSelected(1,4,7,10);
    else if (getGridSelected(2,5,8,10) != -1) gridSelected = getGridSelected(2,5,8,10);
    else if (getGridSelected(0,4,8,10) != -1) gridSelected = getGridSelected(0,4,8,10);
    else if (getGridSelected(2,4,6,10) != -1) gridSelected = getGridSelected(2,4,6,10);

    //find gridSelected for "block win"
    else if (getGridSelected(0,1,2,2) != -1) gridSelected = getGridSelected(0,1,2,2);
    else if (getGridSelected(3,4,5,2) != -1) gridSelected = getGridSelected(3,4,5,2);
    else if (getGridSelected(6,7,8,2) != -1) gridSelected = getGridSelected(6,7,8,2);
    else if (getGridSelected(0,3,6,2) != -1) gridSelected = getGridSelected(0,3,6,2);
    else if (getGridSelected(1,4,7,2) != -1) gridSelected = getGridSelected(1,4,7,2);
    else if (getGridSelected(2,5,8,2) != -1) gridSelected = getGridSelected(2,5,8,2);
    else if (getGridSelected(0,4,8,2) != -1) gridSelected = getGridSelected(0,4,8,2);
    else if (getGridSelected(2,4,6,2) != -1) gridSelected = getGridSelected(2,4,6,2);

    //is the center available?
    else if (gridMark[4] == 0)gridSelected = 4;

    //if all else fail pick a random blank square
    else
    {
        while(true)
        {
            gridSelected = r.nextInt(9);
            if (gridMark[gridSelected] == 0)break;
        }
    }
    int x = 40 + (gridSelected % 3) * 80;
    if (gridSelected <= 2) y = 50;
    else if (gridSelected <= 5) y = 130;
    else y = 210;

    // draw O
    gridMark[gridSelected] = 5;
    myGraphics.setColor(Color.red);
    myGraphics.drawOval(x, y, 60, 60);
    checkWinner();
    xTurn = true;
    if (numberClicks != 10)
    {
        numberClicks++;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:58:07.240

```
public class Project extends JFrame
{
    static boolean gameHasEnded;

    ...

    public Project()
    {
        ...
        gameHasEnded = false;
    }

    ...

    private void labelMouseClicked(MouseEvent e)
    {
        // If any player has already won, abort. Label will not be changed.
        // Players turn will not be switched.
        if (gameHasEnded) return;

        ...

        // If the label has already been clicked, abort.
        if (labelValue[choice] != 0) return;

        choiceLabel[choice].setBackground(Color.WHITE);

        ...
    }

    public static void checkWinner()
    {
        ...
        restart.setVisible(true);
        gameHasEnded = true;
        ...
        restart.setVisible(true);
        gameHasEnded = true;
        ...
        restart.setVisible(true);
        gameHasEnded = true;
        ...
    }

    public void restartActionPerformed(ActionEvent e)
    {
        for (int i = 0; i < 9; i++)
        {
            labelValue[i] = 0;
            choiceLabel[i].setIcon(null);
            choiceLabel[i].setBackground(Color.white);
        }
        showWinner.setText("");
        restart.setVisible(false);
        counter = 0;
        whosTurn = 0;
        gameHasEnded = false;
    }
} 
```

* * *

**编辑：**您似乎有两个“网格”。JFrame 版本使用`labelValue`和 Fame 版本`gridMark`。

1.  删除字段和的声明`gridMark`，因为它们不应该被使用。`numberClicks``xTurn`
2.  `gridMark`用替换所有引用`labelValue`。
3.  `numberClicks`用替换所有引用`counter`。
4.  更改`xTurn = true;`为`whosTurn = 0;`。
5.  替换绘图命令。（例如`myGraphics.drawOval(x, y, 60, 60);`）与`choiceLabel[gridSelected].setIcon(imageX);`
6.  在调用`checkWinner()`in之后`labelMouseClicked`，插入：

    ```
    if (!gameHasEnded)
    {
        makeMove();
    } 
    ```

一个提示：删除您在 JFrame 版本中未使用的所有字段。这将使所有对 Frame-version 变量的引用都被突出显示为错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:02:24.657

在`labelMouseClicked()`您必须检查该字段是否已被单击。例如检查`choiceLabel[choice].getBackground()`：

```
if (choiceLabel[choice].getBackground().equal(Color.WHITE))
{
  // already clicked
  return;
} 
```

要检查游戏是否结束，您可以返回一个布尔值，`checkWinner()`或者更好地为它创建一个新函数：`isGameEnd()`. 您可以在`labelMouseClicked()`和中使用它`checkWinner()`。

# struts2 - 更好地理解 Struts2 动作

> ID：11045176
> 
> 赞同：0
> 
> 时间：2012-06-15T05:40:56.233
> 
> 标签：struts2, action

我正在尝试学习 Struts 2.0，并且我正在尝试更好地理解动作的概念。我有一个表格，我想预先加载值。用户可以更改 JSP 中的值，然后提交表单，这将导致页面显示表单中输入的数据。

我已经让它工作了，但不确定我的方法/逻辑是否正确。

Struts.xml 如下：

```
<action name="LoadForm" class="actions.Test" method="execute1">
  <result>/Test.jsp</result>
</action>

<action name="ShowResult" class="actions.Test" method="execute2">
  <result>/TestResult.jsp</result>
</action> 
```

我正在使用`prepare()`预加载值。

当我`LoadForm.action`在浏览器中调用时，`Test.jsp`会显示预加载的数据。

`Test.jsp`有一个动作是 的形式`ShowResult`。

当我提交表单时，它会导航到`TestResult.jsp`我显示表单值的位置。

这是正确的方法还是有更好的方法？

另外，我不确定为什么我们在 Action 类中需要超过 2 个执行方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:08:35.680

好吧，几乎你是对的，除了你需要了解的一件事，prepare 方法类似于 init 方法，它可以帮助你在框架调用 execute 或任何其他方法之前初始化/准备数据。

S2 中的动作同时作为模型以及控制器工作，并且很可能一个控制器正在执行多个任务。例如，我们有一个 Action 负责处理与用户相关的流程，其中包括

1.  创建新用户
2.  更新用户
3.  检查与用户相关的任何信息

所以简而言之，我们不需要三个不同的动作来执行这些任务，但我们将创建一个包含三个方法的单个动作，它们将负责处理这些任务。

我希望这能给你一个想法

# c# - 使用 HTML 敏捷包解析 HTML

> ID：11045184
> 
> 赞同：1
> 
> 时间：2012-06-15T05:41:55.033
> 
> 标签：c#, html-agility-pack

我需要使用 HTML Agility Pack 解析 HTML 文件。这是带有类属性 = 的 div`divTableBodyText`和里面的表。我需要获取表格的内容。我为数据创建了类，但不知道如何获取数据。

```
<html>
<body>
    <div class="divTableBodyText">
        <table class="tableBodyText fdff_L" cellpadding="0" cellspacing="0">
            <tbody>
                <tr>
                    <td>
                        &nbsp;
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="fontSize textBold">Выберите тариф.</span> Разница цен в пределах одного
                        типа тарифа может возникнуть из-за условий выполнения рейса, связанных с колличеством
                        пересадок и доступностью мест. Цены указаны для взрослого пассажира с учетом Сборов
                        / Налогов.
                    </td>
                </tr>
                <tr>
                    <td>
                        &nbsp;
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="FFInfoPanel">
        </div>
        <table class="fdff_tableFF" cellspacing="0">
            <tbody>
                <tr>
                    <th>
                        &nbsp;
                    </th>
                    <th>
                        Тип тарифа
                    </th>
                    <th width="55%">
                        Описание тарифа
                    </th>
                    <th>
                        Минимальная цена
                    </th>
                    <th>
                        Другие авиарейсы
                    </th>
                </tr>
                <tr class="">
                    <td style="background-color: rgb(255, 255, 255); border-right: medium none; padding: 0px 4px 0px 0px;">
                        &nbsp;
                    </td>
                    <td class="textBold" width="15%">
                        Special-Kazakhstan
                    </td>
                    <td class="wrap" id="FN_0" width="55%">
                        Специальный тариф экономического класса с ограничениями <a href="javascript:fareFamilyDescriptionPopUp.redirectToAnExternalPopUp('http://www.airastana.com/int/ru/Fare-Family-Special-Kazakhstan.aspx');">
                            Дополнительная информация</a>
                    </td>
                    <td style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);" class="white"
                        id="FRB_1_0" _isdisabled="false" width="15%">
                        <input id="RB0" name="FamilyButton" value="0|1" onclick="javascript:FDFF.selectRecommendationSet('0', true,'0', 'FRB_1_0',false);"
                            checked="checked" type="radio">
                        47&nbsp;917 KZT
                    </td>
                    <td class="white" id="FRB_2_0" _isdisabled="" width="15%">
                        &nbsp;
                    </td>
                </tr>
                <tr class="bgrd">
                    <td style="background-color: rgb(255, 255, 255); border-right: medium none; padding: 0px 4px 0px 0px;">
                        &nbsp;
                    </td>
                    <td class="textBold" width="15%">
                        Flexible-Kazakhstan
                    </td>
                    <td class="wrap" id="FN_1" width="55%">
                        Специальный тариф экономического класса с возможностью бесплатного перебронирования
                        до отправления. <a href="javascript:fareFamilyDescriptionPopUp.redirectToAnExternalPopUp('http://www.airastana.com/int/ru/Fare-Family-Flexible-Kazakhstan.aspx');">
                            Дополнительная информация</a>
                    </td>
                    <td class="white" id="FRB_1_1" _isdisabled="false" width="15%">
                        <input id="RB1" name="FamilyButton" value="1|1" onclick="javascript:FDFF.selectRecommendationSet('1', true,'1', 'FRB_1_1',false);"
                            type="radio">
                        52&nbsp;397 KZT
                    </td>
                    <td class="white" id="FRB_2_1" _isdisabled="" width="15%">
                        &nbsp;
                    </td>
                </tr>
                <tr class="">
                    <td style="background-color: rgb(255, 255, 255); border-right: medium none; padding: 0px 4px 0px 0px;">
                        &nbsp;
                    </td>
                    <td class="textBold" width="15%">
                        Full flexible
                    </td>
                    <td class="wrap" id="FN_2" width="55%">
                        Нормальный тариф экономического класса без ограничений <a href="javascript:fareFamilyDescriptionPopUp.redirectToAnExternalPopUp('http://www.airastana.com/int/ru/Fare-Family-Full-Flexible.aspx');">
                            Дополнительная информация</a>
                    </td>
                    <td class="white" id="FRB_1_2" _isdisabled="false" width="15%">
                        <input id="RB2" name="FamilyButton" value="2|1" onclick="javascript:FDFF.selectRecommendationSet('2', true,'2', 'FRB_1_2',false);"
                            type="radio">
                        56&nbsp;267 KZT
                    </td>
                    <td class="white" id="FRB_2_2" _isdisabled="" width="15%">
                        &nbsp;
                    </td>
                </tr>
                <tr class="bgrd">
                    <td style="background-color: rgb(255, 255, 255); border-right: medium none; padding: 0px 4px 0px 0px;">
                        &nbsp;
                    </td>
                    <td class="textBold" width="15%">
                        Business-Kazakhstan
                    </td>
                    <td class="wrap" id="FN_3" width="55%">
                        Нормальный тариф бизнес класса с некоторыми ограничениями <a href="javascript:fareFamilyDescriptionPopUp.redirectToAnExternalPopUp('http://www.airastana.com/int/ru/Fare-Family-Business-Kazakhstan.aspx');">
                            Дополнительная информация</a>
                    </td>
                    <td class="white" id="FRB_1_3" _isdisabled="false" width="15%">
                        <input id="RB3" name="FamilyButton" value="3|1" onclick="javascript:FDFF.selectRecommendationSet('3', true,'3', 'FRB_1_3',false);"
                            type="radio">
                        89&nbsp;557 KZT
                    </td>
                    <td class="white" id="FRB_2_3" _isdisabled="false" width="15%">
                        <input name="FamilyButton" value="4|2" onclick="javascript:FDFF.selectRecommendationSet('4', true,'3', 'FRB_2_3',false);"
                            type="radio">
                        93&nbsp;951 KZT
                    </td>
                </tr>
                <tr class="">
                    <td style="background-color: rgb(255, 255, 255); border-right: medium none; padding: 0px 4px 0px 0px;">
                        &nbsp;
                    </td>
                    <td class="textBold" width="15%">
                        Business
                    </td>
                    <td class="wrap" id="FN_4" width="55%">
                        Нормальный тариф бизнес класса без ограничений. Почувствуйте настоящий комфорт!
                        <a href="javascript:fareFamilyDescriptionPopUp.redirectToAnExternalPopUp('http://www.airastana.com/int/ru/Fare-Family-Business.aspx');">
                            Дополнительная информация</a>
                    </td>
                    <td class="white" id="FRB_1_4" _isdisabled="false" width="15%">
                        <input id="RB4" name="FamilyButton" value="5|1" onclick="javascript:FDFF.selectRecommendationSet('5', true,'4', 'FRB_1_4',false);"
                            type="radio">
                        98&nbsp;345 KZT
                    </td>
                    <td class="white" id="FRB_2_4" _isdisabled="" width="15%">
                        &nbsp;
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:01:11.380

您可以尝试这样的想法，也许会有所帮助

```
 HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(//your html document);
        foreach (HtmlNode div in doc.DocumentNode.SelectNodes("//div[@class='divTableBodyText']")){
        foreach (HtmlNode table in div.DocumentNode.SelectNodes("table")) {
          foreach (HtmlNode tbody in div.DocumentNode.SelectNodes("tbody")) {
            foreach (HtmlNode row in tbody.SelectNodes("tr")) {
                foreach (HtmlNode cell in row.SelectNodes("td")) {
                    Console.WriteLine(cell.InnerText);
                }
            }
        }
     }
} 
```

# .net - 获取所有文本 在 div htmlagilitypack 中

> ID：11045186
> 
> 赞同：1
> 
> 时间：2012-06-15T05:42:07.480
> 
> 标签：.net, winforms, parsing, html-agility-pack

我有一个包含这样的段落标签的 div

```
<div class="div_5">
                <p>First Paragraph</p>
                <p>Second Paragraph</p>
                <p>Third Paragraph</p>
                <p>Fourth Paragraph</p>
 </div>
<div class="div_5">
                <p>First Paragraph</p>
                <p>Second Paragraph</p>
                <p>Third Paragraph</p>
                <p>Fourth Paragraph</p>
 </div> 
```

我需要使用htmlagiitypack获取所有段落文本的文本我试过这个，

```
Dim oPB As HAP.HtmlNodeCollection = doc.DocumentNode.SelectNodes("//div[@class='post-bodycopy clearfix']/child::text()/"]
For Each item As HAP.HtmlNode In oPB
                    debug.print(item.InnerText)
                Next 
```

我期望每个 div 字符串的输出是

```
First Paragraph
Second Paragraph
Third Paragraph
Fourth Paragraph 
```

但是我在返回的文本中得到了一些 html，有人可以帮我纠正这个问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:09:32.343

您必须实际选择段落的内部文本。你的 xpath 得到了完全不同的东西。

```
Dim query = doc.DocumentNode.SelectNodes("//div[@class='div_5']/p/text()") 
```

# c# - visual c# 2010 在两个项目之间进行通信

> ID：11045190
> 
> 赞同：2
> 
> 时间：2012-06-15T05:42:21.680
> 
> 标签：c#, winforms, variables, kinect, projects

我正在尝试创建一个 Windows 窗体项目，并使用 Kinect 到 Windows SDK 的 Kinect 语音识别。我有

*   表格申请项目 (p1) 和
*   Kinect 语音项目 (p2)，它是一个命令提示符。

我把它做成了命令提示符，因为它是最简单的做事方式。无论如何，我已经阅读并发现了两件事。

1）我发现了如何在同一个解决方案中同时运行两个项目。

2）我还发现了如何添加引用以从每个项目中获取类。

那么，我如何从每个项目中获取变量？只是通过使用项目引用，还是什么？P2 可以识别语音并将其保存到变量中，如果这很重要的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:00:33.770

> 我把它做成了命令提示符，因为它是最简单的做事方式。

这听起来像问题。听起来你真的应该考虑让你的 Kinect 项目成为一个类库。然后，您可以从 Windows 窗体应用程序调用该类库。

如果你想要一个“测试床”控制台应用程序，你总是可以编写一个也引用[类库](http://msdn.microsoft.com/en-us/library/3707x96z.aspx)的应用程序。

请注意，通常您不应该在项目之间共享*变量*- 它们是大多数封装良好的系统中的实现细节 - 但您将创建公开属性、适当方法等的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:49:36.077

如果我理解正确，这里有几个选项：

1.  然后将这些变量作为属性添加到您的类中

    `using Solution.MyNamespace;` 在使用另一个项目的类中

2.  如果您有需要独立的变量，请考虑添加一个名为 Abstract 的类库项目或两个项目都引用的东西

我希望这可能会有所帮助，干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:58:12.737

另一种方法是使用命名管道进行进程间通信。

MSDN 提供了使用名称管道 API 的[参考资料](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream.aspx)。

命名管道是 .NET 框架的一部分，是一种可靠的通信方法，无需担心文件的访问权限。

要走静态变量路径，您需要运行单个进程并将一个项目转换为 dll 并手动加载 Program Main。

当然，您甚至不需要使用静态变量，而是在加载时传入的引用变量上使用同步。如果您不需要运行两个单独的进程，我可能会采用这种方法。

仅取决于您将项目分开的目标是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:13:53.923

就像@JonSkeet 说的，创建一个类库，然后你可以像这样保存信息：

```
 public class SpeechRecognizer
    {
        public List<string> SpeechRecognized = new List<string>
        {

        };

        public void SaveRecognizedSpeech(string foundSpeech)
        {
            SpeechRecognized.Add(foundSpeech);
        }
    } 
```

在代码中：

```
 SpeechRecognizer sr = new SpeechRecognizer();
        sr.SaveRecognizedSpeech("blah blah");
        sr.SaveRecognizedSpeech("BLAH BLAH");
        Console.WriteLine("{0}, {1}", sr.SpeechRecognized[0], sr.SpeechRecognized[1]);
        Console.Read(); 
```

哦，让你的整个程序知道变量（我希望它们都在同一个解决方案中！）制作它们`public`。希望这可以帮助！

# lucene - Lucene 3.5 中的 IndexWriter 更慢？

> ID：11045196
> 
> 赞同：1
> 
> 时间：2012-06-15T05:42:57.200
> 
> 标签：lucene

我们正在将我们的搜索基础架构从 Lucene 2.3.1 升级到 Lucene 3.5。我正在进行负载测试，我发现 Lucene 2.3.1 每秒可以索引 32,000 个文档，而 Lucene 3.5 每秒只能索引大约 17,000 个文档。

实际上，它们都使用标准分析器和默认设置。3.5 慢是因为它索引更多细节并因此导致更快的搜索？我们的产品是日志管理产品，索引速度非常重要。

好的，长话短说，3.5 的较慢索引会导致更高的搜索速度吗？如果不是，我还应该微调什么来提高索引速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:09:42.257

你看过Lucene wiki上的[ImprovementIndexingSpeed吗？](http://wiki.apache.org/lucene-java/ImproveIndexingSpeed)

否则，请分享有关您的设置的一些详细信息，以便我们为您提供帮助：

*   你多久提交一次？
*   MergePolicy、ramBuffer 大小和 mergeFactor 使用什么？
*   你产生了多少索引线程？

# java - JSR 303 Bean Validation：每个组合约束的组约束组合

> ID：11045198
> 
> 赞同：2
> 
> 时间：2012-06-15T05:43:21.477
> 
> 标签：java, bean-validation

我正在尝试使用[约束组合](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html_single/#validator-customconstraints-compound)，并希望为每个组合约束定义组，如下例所示：-

### 复合约束

```
@Target({
    ElementType.FIELD,
    ElementType.METHOD,
    ElementType.PARAMETER,
    ElementType.TYPE,
    ElementType.ANNOTATION_TYPE
})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@DummyValid1(group = Group1.class)
@DummyValid2(group = Group2.class)
@Constraint(validatedBy = {})
public @interface DummyCompositeValid {

    String message() default "The bean is invalid.";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

### 数据 bean

```
@DummyCompositeValid 
public class DummyBean {
    //Fields declaration, Setter and Getter
} 
```

### 业务验证方法

```
this.validator.validate(dummyBean, Group1.class, Group2.class); 
```

结果是 dummyBean 没有被验证。我很困惑，因为该组在没有复合约束的情况下直接定义时运行良好，如下所示： -

### 数据 bean

```
@DummyValid1(group = Group1.class)
@DummyValid2(group = Group2.class)
public class DummyBean {
    //Fields declaration, Setter and Getter
} 
```

您能帮忙提供建议和进一步解释吗？非常感谢您提前提供的帮助。我期待着尽快收到您的来信。

问候，

查理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:09:39.110

我已经向 Hibernate 验证器论坛提出了这个问题，并希望将结果通知我们如下：-

我想做的事情是不可能的。组成约束从主注释继承组。这是规范的一部分：

> 来自主约束注释的组由组合注释继承。组合注释上的任何组定义都将被忽略。同样，来自主约束注释的有效负载由组合注释继承。组合注释上的任何有效负载定义都将被忽略。

# c++ - boost asio 有状态套接字接口

> ID：11045202
> 
> 赞同：2
> 
> 时间：2012-06-15T05:43:26.873
> 
> 标签：c++, boost, boost-asio

我想要一个有状态的通信，但不像 boost 的 echo server 示例。我的套接字将准备好永远读取，每当它接收到新数据时，它都会调用一个虚拟方法`dataAvailable(string)`，但它可以`async_write`随时执行。

```
void connected(const boost::system::error_code &ec) {
  _socket.async_read_some(boost::asio::buffer(_buffer, max_length),
      boost::bind(&Session::handler_read, this, boost::asio::placeholders::error,
      boost::asio::placeholders::bytes_transferred));
  //boost::asio::async_read(_socket, boost::asio::buffer(_buffer, max_length),
  //    boost::bind(&Session::handler_read, this, boost::asio::placeholders::error,
  //    boost::asio::placeholders::bytes_transferred));
  std::cout << ">> Session::connected()" << std::endl;
}

void handler_read(const boost::system::error_code &ec, size_t bytes_transferred) {
  if(ec) {
    std::cout << ec.message() << std::endl;
  } else {
    //std::copy(_buffer, _buffer+bytes_transferred, data.begin());
    std::string data(_buffer, _buffer+bytes_transferred);
    std::cout << ">> Session[ " << id() << "]" << "::handler_read(): " <<
            bytes_transferred << " " <<  data << std::endl;
    boost::asio::async_write(_socket, boost::asio::buffer(_buffer, max_length),
            boost::bind(&Session::handler_write, this,
            boost::asio::placeholders::error));
    _socket.async_read_some(boost::asio::buffer(_buffer, max_length),
            boost::bind(&Session::handler_read, this, boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    //boost::asio::async_read(_socket, boost::asio::buffer(_buffer, max_length),
        //    boost::bind(&Session::handler_read, this,
        //    boost::asio::placeholders::error,
        //    boost::asio::placeholders::bytes_transferred));
      //call dataAvailable(_buffer);
  }
}

void handler_write(const boost::system::error_code &ec) {
  if(ec) {
    std::cout << ec.message() << std::endl;
  } else {
    _socket.async_read_some(boost::asio::buffer(_buffer, max_length),
            boost::bind(&Session::handler_read, this, boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    //boost::asio::async_read(_socket, boost::asio::buffer(_buffer, max_length),
        //    boost::bind(&Session::handler_read, this,
        //    boost::asio::placeholders::error,
        //    boost::asio::placeholders::bytes_transferred));
  }
} 
```

1.  这个实施好吗？因为多个线程可能会进行读写操作。其中写操作是更新矩阵中的某些单元格
2.  `async_read`为什么当我使用而不是时它不起作用（不回显接收到的字符串）`async_read_some`
3.  在我的监听服务器中，我无处调用该`listen`方法。但它仍然有效。那么为什么会有一个listen方法呢？什么时候使用？
4.  我想在客户端套接字从客户端退出时收到通知。例如，客户端已关闭连接。我该怎么做 ？我出来的方式是通过阅读`End Of File`in`read_handler`但这是唯一的方式吗？
5.  我有一个 Session 类，每个会话都有一个套接字。我将集合存储`Session*`在会话管理器中。现在，当我关闭一个套接字并且`delete`该会话变为空时。它可能发生在`vector`. 那么如何安全地删除该`null`会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:29:05.173

您的代码存在一个严重问题。想象一下，您有不对称的网络链接，并且接收比发送快得多。

1.  接收消息
2.  做 async_write （但这需要时间）
3.  安排下一次阅读
4.  接收下一条消息
5.  做第二个 async_write （第一个还没有完成，你在链接的另一边得到垃圾）
6.  安排下一次阅读
7.  第一个 async_write 完成并安排另一个 async_read_some

总而言之，您请求 asio 一次对同一个套接字进行多次读取和写入。

> 为什么当我使用 async_read 而不是 async_read_some 时它不起作用（不回显接收到的字符串）

您是否发送了足够的数据 ( `max_length`)？也许你想用`boost::asio::transfer_at_least(min_length)`？

> 在我的监听服务器中，我无处调用监听方法。但它仍然有效。那么为什么会有一个listen方法呢？什么时候使用？

您可能在某处创建接受器对象。

> 我想在客户端套接字从客户端退出时收到通知。例如，客户端已关闭连接。我该怎么做 ？我的方法是通过在 read_handler 中读取文件结尾但这是唯一的方法吗？

您可以创建包装器，它将`EOF`进行一些清理。然后你用包装器包装所有自定义处理程序，并将包装器作为处理程序传递给 boost::asio。这样，如果您愿意，您只有一个地方可以处理 EOF 错误。

> 我有一个 Session 类，每个会话都有一个套接字。我将 Session* 集合存储在 Session Manager 中。现在当我关闭一个套接字并删除它时，该会话变为空。它可能发生在向量的中间。那么如何安全地删除那个空会话呢？

`boost::shared_ptr`在处理程序等和`boost::shared_ptr`或`boost::weak_ptr`在会话管理器的向量中使用。

# struts2 - 需要知道这里有什么问题

> ID：11045204
> 
> 赞同：1
> 
> 时间：2012-06-15T05:43:32.787
> 
> 标签：struts2, tomcat7

我正在尝试学习 Struts2 框架。我从该站点获得了 HelloWorld 示例：

`www.vaannila.com/struts/struts-tutorial/struts-tutorial-using-eclipse-1.html

突出显示的代码显示为警告：

`<%@taglib uri="/struts-tags" prefix="s" %>`
**s:redirect forward="helloWorld"/>**

警告如下：

在这一行发现了多个注释：
- 未知标签（bean:write）。
- 未知标签（bean:write）。

对于代码，我在 index.jsp 文件中收到相同的警告：

 **当我运行 tomcat 时，我在控制台中得到以下信息。我知道我的 tomcat 正在运行，但我该如何解决这个问题？

2012 年 6 月 13 日下午 1:12:28 org.apache.catalina.core.AprLifecycleListener 初始化

```
**INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32;**

**Jun 13, 2012 1:12:28 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:StrutsExample1' did not find a matching property.**

Jun 13, 2012 1:12:28 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["http-bio-8080"]

Jun 13, 2012 1:12:28 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["ajp-bio-8009"]

Jun 13, 2012 1:12:28 PM org.apache.catalina.startup.Catalina load

INFO: Initialization processed in 735 ms

Jun 13, 2012 1:12:28 PM org.apache.catalina.core.StandardService startInternal

INFO: Starting service Catalina

Jun 13, 2012 1:12:28 PM org.apache.catalina.core.StandardEngine startInternal

INFO: Starting Servlet Engine: Apache Tomcat/7.0.27

Jun 13, 2012 1:12:31 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["http-bio-8080"]

Jun 13, 2012 1:12:31 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["ajp-bio-8009"]

Jun 13, 2012 1:12:31 PM org.apache.catalina.startup.Catalina start

INFO: Server startup in 2586 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:39:12.587

`<bean:write>`是struts 1.x 你必须`<s:property>`在struts 2.x中使用。

请参阅[s:property 文档](http://struts.apache.org/2.x/docs/property.html)**

# java - Spring bean 执行的范围

> ID：11045208
> 
> 赞同：1
> 
> 时间：2012-06-15T05:44:27.417
> 
> 标签：java, spring, jakarta-ee, dependency-injection, ioc-container

例如，我有一个场景。

```
<bean id="xyzService" class="XyzServiceImpl" scope="prototype">
    <property name="aDependency" ref="aDependency" />
    <property name="bDependency" ref="bDependency" />
</bean>

<bean id="useService" class="UseServiceImpl">
    <property name="xyzService" ref="xyzService"/>
</bean> 
```

Java类：

```
public class XyzServiceImpl implements XyzService{
     private ADependency aDependency= null;
   private BDependency bDependency= null;
   // getters and setters...
}

 public class UseServiceImpl implements UseService {
     private XyzService xyzService= null;
 // getters and setters...
    xyzService.doSomething();
} 
```

现在每次在 UseServiceImpl 中我都希望有一个新的 xyzService 实例，但我总是返回相同的单例实例。还有一种情况是`aDependency`and`bDependency`可能在内部再次对其他 bean 有更多引用。

现在我有一个问题，例如如何获得 xyzService 的新实例。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:49:04.017

默认spring bean的作用域是`singleton`，你需要标记作用域`prototype`来指示spring

```
<bean id="beanId" class="some.class.Name" scope="prototype"/> 
```

Spring 将在 Bean 的每个请求上创建新实例

* * *

**看**

*   [豆范围](http://static.springsource.org/spring/docs/3.1.0.M2/spring-framework-reference/html/beans.html#beans-factory-scopes-singleton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:37:04.040

`ApplicationContextAware`我可以通过实现具有上下文的 getter 和 setter 方法的接口来轻松找到解决方案。从上下文中我可以说 getBean 并获取新的实例

```
public class UseServiceImpl implements UseService,ApplicationContextAware {
     private ApplicationContext context;
     XyzService xyzService= context.getBean(XyzServiceImpl.class);
   // getter and setter for applicationContext
     private XyzService xyzService= null;
   // getters and setters...
    xyzService.doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:04:05.317

如果您有以下情况：

```
<bean id="xyzService" class="XyzServiceImpl" scope="prototype">
    <property name="aDependency" ref="aDependency" />
    <property name="bDependency" ref="bDependency" />
</bean>

<bean id="useService1" class="UseServiceImpl">
    <property name="xyzService" ref="xyzService"/>
</bean>

<bean id="useService2" class="UseServiceImpl">
    <property name="xyzService" ref="xyzService"/>
</bean> 
```

然后，您应该能够验证 和 的属性`xyzService`是否包含不同的. 这就是声明范围为原型的效果。如果您真的希望 bean 的新实例在bean 的生命周期内可用，我认为您需要一种不同的方法 - 查看[Method injection](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-method-injection)的文档。`useService1``useService2``xyzService``xyzService``xyzService``useService`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T02:30:17.113

在您的示例中，每次您向 spring 容器请求*userService*的实例时，它都会返回单例实例并注入*xyzService*的新实例。

However, when spring creates a new instance of *xyzService*, it will use the singleton instance of *aDependency* and *bDependency* unless otherwise they are also defined as *prototype*.

# android - 如果出现 ImageView，如何禁用按钮？

> ID：11045214
> 
> 赞同：0
> 
> 时间：2012-06-15T05:44:48.590
> 
> 标签：android, button, if-statement

我的禁用按钮有问题。

我的代码

```
public class try1 extends Activity {
private String[] myString1;
private static final Random rgenerator = new Random();
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources();

    myString1 = res.getStringArray(R.array.primary);

    final Button btn1;
    btn1 = (Button) findViewById(R.id.button1);
    btn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            final String q = myString1[rgenerator.nextInt(myString1.length)];
            ((Button) v).setText(q);

            if( findViewById(R.id.button5).getVisibility() == View.VISIBLE)

            {
                Toast.makeText(getBaseContext(), "Press Next to Go", Toast.LENGTH_SHORT).show();             

                    }
        }
    });
    final Button btn2;
    btn2 = (Button) findViewById(R.id.button2);
    btn2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            final String q = myString1[rgenerator.nextInt(myString1.length)];
            ((Button) v).setText(q);

            if( findViewById(R.id.button5).getVisibility() == View.VISIBLE)

            {
                Toast.makeText(getBaseContext(), "Press Next to Go", Toast.LENGTH_SHORT).show();             

                    }
        }
    });
    final Button btn3;
    btn3 = (Button) findViewById(R.id.button3);
    btn3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            final String q = myString1[rgenerator.nextInt(myString1.length)];
            ((Button) v).setText(q);

            if( findViewById(R.id.button5).getVisibility() == View.VISIBLE)

            {
                Toast.makeText(getBaseContext(), "Press Next to Go", Toast.LENGTH_SHORT).show();             

                    }
        }
    });
    final Button check;
    check = (Button) findViewById(R.id.button4);
    check.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            final String q = myString1[rgenerator.nextInt(myString1.length)];
            ((Button) v).setText(q);

            if (btn1.getText().equals(" ")||(btn2.getText().equals(" ")||(btn3.getText().equals(" "))))
            {
                    Toast.makeText(getBaseContext(), "choose answer", Toast.LENGTH_SHORT).show();            

                        }
            else if (btn1.getText().toString().equals(myString1[1])||(btn1.getText().toString().equals(myString1[2])||
                    (btn2.getText().toString().equals(myString1[0])||(btn2.getText().toString().equals(myString1[2])||
                            (btn3.getText().toString().equals(myString1[0])||(btn3.getText().toString().equals(myString1[1])
                                    ))))))
                                    {
                                Toast.makeText(getBaseContext(), "wrong answer", Toast.LENGTH_SHORT).show();             

                                    }

                            else if (btn1.getText() == btn2.getText()|| (btn1.getText() == btn3.getText()||
                                    (btn2.getText() == btn3.getText())))
                                    {
                    Toast.makeText(getBaseContext(), "something same", Toast.LENGTH_SHORT).show();           

                        }
                            else if(btn1.getText().toString().equals(myString1[0]) &&
                                    (btn2.getText().toString().equals(myString1[1]) &&
                                            (btn3.getText().toString().equals(myString1[2]) )))
                            {
                                findViewById(R.id.imageView1).setVisibility(View.VISIBLE);
                            }

        }
    });

    Button next;
    next = (Button) findViewById(R.id.button5);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            startActivity(new Intent("com.learn.lone"));

        }
    });

} 
```

}

我有一些`button1, button2, button3`如果点击时出现随机文本，

我有一个检查按钮，这个按钮用于检查上面按钮上的答案对错。如果正确答案将显示`ImageView`

如果出现我有问题`ImageView`，那么我无法点击button1，button2.button3。我只能按**下一步**继续。

我应该添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:11:38.013

是的，你可以满足你的条件而不是 if 循环使用这样的东西

```
button1.setEnabled(false);
button2.setEnabled(false);
button3.setEnabled(false); 
```

# iphone - NSJSON序列化问题

> ID：11045215
> 
> 赞同：0
> 
> 时间：2012-06-15T05:44:56.623
> 
> 标签：iphone, xcode, ios5, nsjsonserialization

嗨，我有这个代码。

```
NSString *infoString = [NSString stringWithFormat:@"http://link.com/post.php?name=%@&street=%@&city=%@&state=%@&zip=%@&lat=%@&lon=%@", name, street, city, state, zip, str1, str2];
        NSURL *infoUrl = [NSURL URLWithString:infoString];
        NSData *infoData = [NSData dataWithContentsOfURL:infoUrl];

        NSError *error;
        responseDict = [NSJSONSerialization JSONObjectWithData:infoData options:0 error:&error];
        NSString *responseString = [responseDict copy];
        NSLog(@"responseDict: %@", responseString); 
```

在控制台中显示。

```
2012-06-14 22:37:04.022 PartyApp[20221:fb03] responseDict: {
    status = 1;
} 
```

无论如何我可以做一个 if 语句来表明如果值为 1 则执行此操作，如果不是则执行此操作。我在下面尝试过。

```
if ([responseDict objectForKey:@"status = 1"]) {
            Then do this
        } 
```

但它没有用，我做错了什么或者我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:49:33.413

```
if ([responseDict objectForKey:@"status = 1"]) {
            Then do this
        } 
```

应该..

```
if ([responseDict objectForKey:@"status"]) {
            //this will be done in case of 1
        }else{
//this will be done in case of 0 
```

}

唯一`status`的关键不是你的全部..希望这有帮助..

**更新**：上面的行就足够了，因为它返回 1 它将继续，否则在 0 的情况下条件为假并将转到`else`子句

# ios - 当我从另一个警报创建警报时，我得到 wait_fences: failed to receive reply

> ID：11045221
> 
> 赞同：-1
> 
> 时间：2012-06-15T05:45:30.583
> 
> 标签：ios

我想从警报创建警报。但它崩溃了。我使用代码来创建警报：

```
{ 
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:nil message:inMessage delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
[alert show];
} 
```

错误信息是：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSError isEqualToString:]: unrecognized selector sent to instance 0x88b84c0' 
```

看起来 inMessage 已经发布。所以我将 inMessage 更改为 @"test test"。它有效，但出去`wait_fences: failed to receive reply:10004003`

如何在警报中创建警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:27:33.763

正如其他人在评论中指出的那样，这里的问题是您有一个 NSError 被错误地视为 NSString。

`inMessage`似乎是你的 NSError 对象。这在编译时会通过类型系统，因为`userInfo`不知道其元素的类型。

要解决此问题，您可能希望获取错误消息的描述并使用类似的内容显示它

```
NSString *inMessage = [[userInfo objectForKey:@"NSUnderlyingError"] localizedDescription]; 
```

# ios - 在安装了 iOS6 SDK 的情况下继续 iOS5 开发是否有任何问题？

> ID：11045225
> 
> 赞同：5
> 
> 时间：2012-06-15T05:46:09.057
> 
> 标签：ios, xcode

我想下载并安装iOS6 SDK，但我担心我会跨过一扇我无法后退的门。我需要在使用 iOS6 的同时继续进行生产就绪的 iOS5 开发。安装两个 SDK 有什么问题吗？（我确实了解特定设备上安装的操作系统；我将同时拥有 iOS5 和 iOS6 设备。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:26:42.767

我下载并安装了新的测试版。从 Xcode 4.3 开始，Xcode 大部分是自包含的，4.5 与 4.3 一起愉快地存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:53:53.690

您不能将测试版软件生成的应用程序发送到应用程序商店，即使您仅为 iOS 5 构建应用程序也会被拒绝。我建议您在外部驱动器上安装 Lion/Mountain Lion 以使用 iOS 6 .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T18:46:52.397

不要这样做。我下载了带有 iOS 6 SDK 的 4.5，现在“Base SDK”设置为 iOS 6，我不能更改为小于 6 的任何内容，并且我们使用的一半库抱怨 armv7s slice。

# android - 在两侧的android中将方向设置为横向

> ID：11045228
> 
> 赞同：18
> 
> 时间：2012-06-15T05:46:20.473
> 
> 标签：android, android-orientation

我在 2.2 的 android 应用程序中工作，我想将我的应用程序设置为`landscape`模式。

为此，我在`manifest`每个活动标签 中都添加了`android:screenOrientation="landscape"`它，并且效果很好。

但它只出现在一方面。如果我再次将设备倒置，它会在`landscape`模式下安装在相同的位置。如何在设备的两侧设置横向模式。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-15T06:40:44.647

我不确定 2.2 但如果您正在为 Android 2.3 和更高版本构建应用程序，您可以在活动清单中设置

```
android:screenOrientation="sensorLandscape" 
```

如果您正在为 Android 2.2 和更早版本构建应用程序，但想在 Android 2.3 和更新版本上运行它作为“sensorLandscape”配置，您可以尝试这样的操作

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:09:53.510

试试这个

```
android:screenOrientation="reverseLandscape" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T10:17:41.877

要让 Android 应用程序仅以横向模式显示，请将此行添加到 AndroidManifest.xml 文件中的 Activity 定义中：

```
android:screenOrientation="landscape" 
```

例如，这是我在 Android 清单文件中的主要活动的定义：

```
<activity
    android:name=".MainActivity"
    android:screenOrientation="landscape"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T07:21:51.327

使用这个，我想它会帮助你

```
addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, onOrientationChange);

function onOrientationChange(event:StageOrientationEvent):void {
     trace("onOrientationChange:"+event.afterOrientation);
    ...and process result.
    }
} 
```

# java - Android：获取自定义适配器的列表项高度

> ID：11045229
> 
> 赞同：0
> 
> 时间：2012-06-15T05:46:24.877
> 
> 标签：java, android, listview

我在滚动视图中使用列表视图。为避免列表视图不可滚动，我需要调整列表项的高度并设置列表视图的高度。使用自定义适配器时如何获取列表项高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:02:34.650

删除父滚动视图...保持列表视图原样...并 `fill_parent`自动更改列表视图的高度，因为列表中填充了新项目，您可以滚动浏览它以查看超出屏幕的项目...如果通过设置为 fill_parent，ListView 将其他视图强制移出屏幕，通过拖动图形布局中的边缘手动设置高度。无论哪种方式都不需要使用 ScrollView

感谢@Lalit 指出将 ListView 设置为的危险`wrap_content`

# c++ - C++ 多维数组问题 - 多次打印的条目

> ID：11045231
> 
> 赞同：0
> 
> 时间：2012-06-15T05:46:26.067
> 
> 标签：c++, arrays

我有一个 15x20 数组，我想更改每个条目的值，然后将它们全部计算出来。

```
char map[15][80]; 
```

这是我的代码来计算所有条目。

```
for (int a=0;a<=15;a++) {
              for (int b=0;b<=80;b++) {
                  map[a][b] = 'a';
                  cout << map[a][b]; } } 
```

如果我将字母表放入数组中，则会出现问题，它将多次打印某个字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:48:56.010

```
char map[15][80]; 
```

您的 for 循环正在读取您分配的数组之外的一个元素。

```
for (int a=0;a<=15;a++) 
             ^^^^^

for (int b=0;b<=80;b++)
             ^^^^^ 
```

有效索引仅在第一种情况下是 from `0`to ，在第二种情况下是to 。`14`
`0``79`

请注意，C/C++ 不会为您进行数组边界检查，因此您必须小心不要超出数组的边界，如果这样做，您会得到**Undefined Behavior**，这意味着您的 C/C++ 程序不是不再有效。

# c# - DataSet 与 schema 匹配后更改列名

> ID：11045232
> 
> 赞同：2
> 
> 时间：2012-06-15T05:46:37.340
> 
> 标签：c#, dataset

假设我创建了一个 DataTable 对象，该对象创建了一个名为“5_min”的列。我通常提取 Schema 来为后续实例创建相同 DataSet 的实例。

架构重写`5_min`to的列名`_x0035__min`。我想知道如何防止这种情况发生？

```
DataTable newDT = new DataTable("SomeDataTable");
DataColumn[] keys = new DataColumn[1];

DataColumn dcID = new DataColumn("ID");
dcID.DataType = System.Type.GetType("System.Guid");
newDT.Columns.Add(dcID);
keys[0] = dcID;
newDT.PrimaryKey = keys;

var dataTypes = DA.GetSysVars(GlobalSysVar.DataTypes);
DataColumn dcColumn = new DataColumn("5_min");
dcColumn.DataType = System.Type.GetType("System.String");
dcColumn.AllowDBNull = true;
newDT.Columns.Add(dcColumn);

DataSet ds = new DataSet("Custom");
ds.Tables.Add(newDT);

<?xml version="1.0" encoding="utf-16"?>
<xs:schema id="Custom" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="Custom" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="SomeDataTable">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ID" msdata:DataType="System.Guid, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" type="xs:string" />
              <xs:element name="_x0035__min" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
    <xs:unique name="Constraint1" msdata:PrimaryKey="true">
      <xs:selector xpath=".//SomeDataTable" />
      <xs:field xpath="ID" />
    </xs:unique>
  </xs:element>
</xs:schema> 
```

# sftp - 具有仅密码客户端身份验证的 SFTP 是否仍加密？

> ID：11045236
> 
> 赞同：0
> 
> 时间：2012-06-15T05:46:48.873
> 
> 标签：sftp

我们正在建立一个到客户端的链接，他们希望使用 SFTP，但不使用密钥进行客户端身份验证，只使用密码。通过此设置，您是否仍能从数据加密中受益？我认为该协议使用客户端密钥进行加密，但它是否或可以使用主机密钥代替？

编辑：看起来维基百科有我需要知道的：“SSH 还支持基于密码的身份验证，该身份验证由自动生成的密钥加密。” （http://en.wikipedia.org/wiki/Secure_Shell#Key_management）。是的，这不完全是一个编程问题，而是我问其他开发人员的一种反射反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:26:06.900

是的。传输层密钥交换和用户认证密钥交换是有区别的。您不需要为密码认证生成任何客户端密钥对；身份验证通过传输层密钥交换协商的加密隧道进行，这对用户来说基本上是透明的。

# haskell - can xmonad's logHook be run at set intervals rather than in (merely) response to layout events?

> ID：11045239
> 
> 赞同：5
> 
> 时间：2012-06-15T05:46:56.607
> 
> 标签：haskell, statusbar, xmonad

I'm using `dynamicLogWithPP` from `XMonad.Hooks.DynamicLog` together with dzen2 as a status bar under xmonad. One of the things I'd like to have displayed in the bar is the time remaining in the currently playing track in audacious (if any). Getting this information is easy:

```
audStatus :: Player -> X (Maybe String)
audStatus p = do
  info <- liftIO $ tryS $ withPlayer p $ do
                ispaused <- paused
                md <- getMetadataString
                timeleftmillis <- (-) <$> (getCurrentTrack >>= songFrames) <*> time
                let artist = md ! "artist"
                    title = md ! "title"
                    timeleft = timeleftmillis `quot` 1000
                    (minutes, seconds) = timeleft `quotRem` 60
                    disp = artist ++ " - " ++ title ++ " (-"++(show minutes)++":"++(show seconds)++")" -- will be wrong if seconds < 10
                    audcolor False = dzenColor base0  base03
                    audcolor True = dzenColor base1 base02 
                return $ wrap "^ca(1, pms p)" "^ca()" (audcolor ispaused disp)
  return $ either (const Nothing) Just info 
```

So I can stick that in `ppExtras` and it works fine—*except* it only gets run when the `logHook` gets run, and that happens only when a suitable event comes down the pike. So the display is potentially static for a long time, until I (e.g.) switch workspaces.

It seems like some people just run two dzen bars, with one getting output piped in from a shell script. Is that the only way to have regular updates? Or can this be done from within xmonad (without getting too crazy/hacky)?

ETA: I tried this, which *seems* as if it should work better than it does:

1.  create a TChan for updates from XMonad, and another for updates from a function polling Audacious;
2.  set the `ppOutput` field in the `PP` structure from `DynamicLog` to write to the first TChan;
3.  fork the audacious-polling function and have it write to the second TChan;
4.  fork a function to read from both TChans (checking that they aren't empty, first), and combining the output.

Updates from XMonad are read from the channel and processed in a timely fashion, but updates from Audacious are hardly registered at all—every five or so seconds at best. It seems as if some approach along these lines ought to work, though.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T20:52:25.300

I know this is an old question, but I came here looking for an answer to this a few days ago, and I thought I'd share the way I solved it. You actually can do it entirely from xmonad. It's a tiny bit hacky, but I think it's much nicer than any of the alternatives I've come across.

Basically, I used the [XMonad.Util.Timer](http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Util-Timer.html) library, which will send an X event after a specified time period (in this case, one second). Then I just wrote an event hook for it, which starts the timer again, and then manually runs the log hook.

I also had to use the [XMonad.Util.ExtensibleState](http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Util-ExtensibleState.html) library, because Timer uses an id variable to make sure it's responding to the right event, so I have to store that variable between events.

Here's my code:

```
{-# LANGUAGE DeriveDataTypeable #-}

import qualified XMonad.Util.ExtensibleState as XS
import XMonad.Util.Timer

...

-- wrapper for the Timer id, so it can be stored as custom mutable state
data TidState = TID TimerId deriving Typeable

instance ExtensionClass TidState where
  initialValue = TID 0

...

-- put this in your startupHook
-- start the initial timer, store its id
clockStartupHook = startTimer 1 >>= XS.put . TID

-- put this in your handleEventHook
clockEventHook e = do               -- e is the event we've hooked
  (TID t) <- XS.get                 -- get the recent Timer id
  handleTimer t e $ do              -- run the following if e matches the id
    startTimer 1 >>= XS.put . TID   -- restart the timer, store the new id
    ask >>= logHook.config          -- get the loghook and run it
    return Nothing                  -- return required type
  return $ All True                 -- return required type 
```

Pretty straightforward. I hope this is helpful to someone.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:01:57.130

It cannot be done from within xmonad; xmonad's current threading model is a bit lacking (and so is dzen's). However, you can start a separate process that periodically polls your music player and then use one of the dzen multiplexers (e.g. [dmplex](http://dzen.geekmode.org/dwiki/doku.php?id=dzen%3amultiplexer)) to combine the output from the two processes.

You may also want to look into [xmobar](http://hackage.haskell.org/package/xmobar) and [taffybar](http://hackage.haskell.org/package/taffybar), which both have better threading stories than dzen does.

With regards to why your proposed `TChan` solution doesn't work properly, you might want to read the sections "Conventions", "Foreign Imports", and "The Non-Threaded Runtime" at [my crash course on the FFI and gtk](http://dmwit.com/gtk2hs), keeping in mind that xmonad currently uses GHC's non-threaded runtime. The short answer is that xmonad's main loop makes an FFI call to Xlib that waits for an X event; this call blocks all other Haskell threads from running until it returns.

# android - 如何为 facebook 创建 XMPP 聊天客户端？

> ID：11045241
> 
> 赞同：8
> 
> 时间：2012-06-15T05:47:05.843
> 
> 标签：android, facebook, xmpp

我正在为**FACEBOOK**创建 XMPP 客户端。我为 gmail 做了这个，现在我必须为 FaceBook 创建相同的内容。我为此搜索了很多代码，但我仍然遇到这种类型的`Not connected to server`错误`service-unavailable(503)`

在这里，我正在分享我所做的代码。

```
public class ClientJabberActivity extends Activity {

ArrayList<String> m_discussionThread;
ArrayAdapter<String> m_discussionThreadAdapter;
XMPPConnection m_connection;
private Handler m_handler;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    m_handler = new Handler();

    try {
        initConnection();
    } catch (XMPPException e) {
        e.printStackTrace();
    }

    final EditText recipient = (EditText) this.findViewById(R.id.recipient);
    final EditText message = (EditText) this.findViewById(R.id.message);
    ListView list = (ListView) this.findViewById(R.id.thread);

    m_discussionThread = new ArrayList<String>();
    m_discussionThreadAdapter = new ArrayAdapter<String>(this,
            R.layout.multi_line_list_item, m_discussionThread);
    list.setAdapter(m_discussionThreadAdapter);

    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            String to = recipient.getText().toString();
            String text = message.getText().toString();

            Message msg = new Message(to, Message.Type.chat);
            msg.setBody(text);
            m_connection.sendPacket(msg);
            m_discussionThread.add(" Me  : ");
            m_discussionThread.add(text);
            m_discussionThreadAdapter.notifyDataSetChanged();
        }
    });
}

private void initConnection() throws XMPPException {

    ConnectionConfiguration config = new ConnectionConfiguration(
            "chat.facebook.com", 5222, "chat.facebook.com");
    config.setSASLAuthenticationEnabled(true);
    m_connection = new XMPPConnection(config);
    try {
        SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM",
                SASLXFacebookPlatformMechanism.class);
        SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);
        m_connection.connect();          
        m_connection.login(apiKey + "|" + sessionKey, sessionSecret, "Application");
    } catch (XMPPException e) {
        m_connection.disconnect();
        e.printStackTrace();
    }

    Presence presence = new Presence(Presence.Type.available);
    m_connection.sendPacket(presence);

    PacketFilter filter = new MessageTypeFilter(Message.Type.chat);

    m_connection.addPacketListener(new PacketListener() {
        public void processPacket(Packet packet) {
            Message message = (Message) packet;
            if (message.getBody() != null) {
                String fromName = StringUtils.parseBareAddress(message
                        .getFrom());
                m_discussionThread.add(fromName + ":");
                m_discussionThread.add(message.getBody());

                m_handler.post(new Runnable() {
                    public void run() {
                        m_discussionThreadAdapter.notifyDataSetChanged();
                    }
                });
            }
        }
    }, filter);

    ChatManager chatmanager = m_connection.getChatManager();
    chatmanager.addChatListener(new ChatManagerListener() {
        public void chatCreated(final Chat chat,
                final boolean createdLocally) {
            chat.addMessageListener(new MessageListener() {
                public void processMessage(Chat chat, Message message) {
                    System.out.println("Received message: "
                            + (message != null ? message.getBody() : "NULL"));
                    Log.i("CHAT USER",
                            "Received message is: " + message.getBody());
                }
            });
        }
    });
}
 } 
```

还有这个类[SASLXFacebookPlatformMechanism](https://stackoverflow.com/a/5843759/964741)

我怎样才能像这样登录`xmpp.login(apiKey + "|" + sessionKey, sessionSecret, "Application");`我知道如何获取 facebook 的 accessToken，应用程序密钥。我不知道 sessionKey、sessionSecret 如何获取这些值以及如何解决这个问题。

如果我使用`xmpp.login(apiKey, accessToken, "Application");`我会收到此错误--IllegalArgumentException: API key or session key is not present

**编辑：**最后我从 Amal 解决方案中得到了解决方案：`xmpp.login(apiKey, accessToken, "Application");`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T08:47:14.983

要首先获取访问令牌，您必须登录

```
fb.authorize(FacebookActivity.this, new String[] {"xmpp_login"},Facebook.FORCE_DIALOG_AUTH, new DialogListner()); 
```

SASLXFacebookPlatformMecha 类

```
import java.io.IOException;
import java.net.URLEncoder;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Map;

import org.apache.harmony.javax.security.auth.callback.CallbackHandler;
import org.apache.harmony.javax.security.sasl.Sasl;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.sasl.SASLMechanism;
import org.jivesoftware.smack.util.Base64;

public class SASLXFacebookPlatformMecha extends SASLMechanism {

private static final String NAME = "X-FACEBOOK-PLATFORM";

private String apiKey = "";
private String access_token = "";

/**
 * Constructor.
 */
public SASLXFacebookPlatformMecha(SASLAuthentication saslAuthentication) {
    super(saslAuthentication);
}

@Override
protected void authenticate() throws IOException, XMPPException {

    getSASLAuthentication().send(new AuthMechanism(NAME, ""));
}

@Override
public void authenticate(String apiKey, String host, String acces_token)
        throws IOException, XMPPException {
    if (apiKey == null || acces_token == null) {
        throw new IllegalArgumentException("Invalid parameters");
    }

    this.access_token = acces_token;
    this.apiKey = apiKey;
    this.hostname = host;

    String[] mechanisms = { NAME };
    Map<String, String> props = new HashMap<String, String>();
    this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props,
            this);
    authenticate();
}

@Override
public void authenticate(String username, String host, CallbackHandler cbh)
        throws IOException, XMPPException {
    String[] mechanisms = { NAME };
    Map<String, String> props = new HashMap<String, String>();
    this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props,
            cbh);
    authenticate();
}

@Override
protected String getName() {
    return NAME;
}

@Override
public void challengeReceived(String challenge) throws IOException {
    byte[] response = null;

    if (challenge != null) {
        String decodedChallenge = new String(Base64.decode(challenge));
        Map<String, String> parameters = getQueryMap(decodedChallenge);

        String version = "1.0";
        String nonce = parameters.get("nonce");
        String method = parameters.get("method");

        long callId = new GregorianCalendar().getTimeInMillis();

        String composedResponse = "api_key="
                + URLEncoder.encode(apiKey, "utf-8") + "&call_id=" + callId
                + "&method=" + URLEncoder.encode(method, "utf-8")
                + "&nonce=" + URLEncoder.encode(nonce, "utf-8")
                + "&access_token="
                + URLEncoder.encode(access_token, "utf-8") + "&v="
                + URLEncoder.encode(version, "utf-8");

        response = composedResponse.getBytes("utf-8");
    }

    String authenticationText = "";

    if (response != null) {
        authenticationText = Base64.encodeBytes(response,
                Base64.DONT_BREAK_LINES);
    }

    // Send the authentication to the server
    getSASLAuthentication().send(new Response(authenticationText));
}

private Map<String, String> getQueryMap(String query) {
    Map<String, String> map = new HashMap<String, String>();
    String[] params = query.split("\\&");

    for (String param : params) {
        String[] fields = param.split("=", 2);
        map.put(fields[0], (fields.length > 1 ? fields[1] : null));
    }

    return map;
}
} 
```

我创建了 ChatManager 类

```
import org.jivesoftware.smack.Chat;
import org.jivesoftware.smack.ChatManagerListener;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.MessageListener;
import org.jivesoftware.smack.Roster;
import org.jivesoftware.smack.RosterListener;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Presence;
import org.jivesoftware.smack.packet.Presence.Type;
import org.jivesoftware.smackx.pubsub.PresenceState;

public class FacebookChatManager {

private static FacebookChatManager chatManager;
private XMPPConnection connection;
private final String SERVER = "chat.facebook.com";
private final int PORT = 5222;
private final String FACEBOOK_MECHANISM = "X-FACEBOOK-PLATFORM";
private RosterListener rosterListner;

private FacebookChatManager(RosterListener rosterListner)
{
    this.rosterListner = rosterListner;
    ConnectionConfiguration connFig = new ConnectionConfiguration(SERVER,
            PORT);
    connFig.setSASLAuthenticationEnabled(true);
    connection = new XMPPConnection(connFig);
    //setup facebook authentication mechanism
    SASLAuthentication.registerSASLMechanism(FACEBOOK_MECHANISM,
            SASLXFacebookPlatformMecha.class);
    SASLAuthentication.supportSASLMechanism(FACEBOOK_MECHANISM, 0);
}

public static FacebookChatManager getInstance(RosterListener rosterListner)
{
    if(chatManager == null)
    {
        chatManager =  new FacebookChatManager(rosterListner);
    }
    return chatManager;
}

public boolean connect()
{
    try {
        connection.connect();
        return true;
    } catch (XMPPException e) {
        e.printStackTrace();
        connection.disconnect();
    }
    return false;
}

public void disConnect()
{
    connection.disconnect();
}

public boolean logIn(String apiKey, String accessToken)
{
    try {
        connection.login(apiKey, accessToken);
        setPresenceState(Presence.Type.available, "");
        connection.getRoster().addRosterListener(rosterListner);
        return true;
    } catch (XMPPException e) {
        connection.disconnect();
        e.printStackTrace();
    }
    return false;
}

public Roster getRoster()
{
    return connection.getRoster();
}

public Chat createNewChat(String user, MessageListener messageListner)
{
    return connection.getChatManager().createChat(user, messageListner);
}

public void registerNewIncomingChatListner(ChatManagerListener chatManagerListner)
{
    connection.getChatManager().addChatListener(chatManagerListner);
}

public void setPresenceState(Type precenseType, String status)
{
    Presence presence = new Presence(precenseType);
    presence.setStatus(status);
    connection.sendPacket(presence);
}

public Presence getUserPresence(String userId)
{
    return connection.getRoster().getPresence(userId);
}
} 
```

最后使用 FacebookChatManager 类注意 rosterListnr 用于获取有关您的朋友状态更改的信息，根据需要实现一个

```
FacebookChatManager facebookChatManager = FacebookChatManager.getInstance(rosterListner);

if (facebookChatManager.connect()) {
            if (facebookChatManager.logIn(FacebookActivity.APP_ID,
                    access_token)) {
                return facebookChatManager.getRoster();
            }
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T05:50:44.950

您需要一个访问令牌。 [http://developers.facebook.com/tools/access_token/](http://developers.facebook.com/tools/access_token/)

欲了解更多信息 [http://developers.facebook.com/docs/chat/](http://developers.facebook.com/docs/chat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T07:29:16.997

对于 android 2.2 更高版本，必须在 AsyncTask 中进行连接...

```
private class AsyncCallWS extends AsyncTask<Void, Void, Void> {
@Override
protected Void doInBackground(Void... params) {
    Log.i(TAG, "doInBackground");
    calculate();
    return null;
}

@Override
protected void onPostExecute(Void result) {
    Log.i(TAG, "onPostExecute");
}

@Override
protected void onPreExecute() {
    Log.i(TAG, "onPreExecute");
}

@Override
protected void onProgressUpdate(Void... values) {
    Log.i(TAG, "onProgressUpdate");
}

public void calculate() 
{
    Session s = Session.getActiveSession();
    ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
    config.setSASLAuthenticationEnabled(true);
    XMPPConnection mFbConnection = new XMPPConnection(config);

        SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM", SASLXFacebookPlatformMechanism.class);
        SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);

        try {
            mFbConnection.connect();    

            Log.i("XMPPClient",
                    "Connected to " + mFbConnection.getHost());

            mFbConnection.login("7028228197XXXXXX",s.getAccessToken(),"Application");
            Roster roster = mFbConnection.getRoster();
            Collection<RosterEntry> entries = roster.getEntries();

            Log.i("XMPPClient","\n\n"+ entries.size() + " buddy(ies):");

            // shows first time onliners---->
            String temp[] = new String[50];
            int i = 0;
            for (RosterEntry entry : entries) {    
                 String user = entry.getName();
                 Log.i("TAG", user);
                }

        } catch (Exception e) {

            e.printStackTrace();
        } 
}
} 
```

不要忘记添加权限。

```
private static final List<String> PERMISSIONS = Arrays.asList("xmpp_login");
if(checkPermissions()) 
    {
        AsyncCallWS task = new AsyncCallWS();
        task.execute(); 
    }
    else
    {
         requestPermissions();
    }

public boolean checkPermissions() {
    Session s = Session.getActiveSession();
    if (s!=null) {
        return s.getPermissions().contains("xmpp_login");
    }
    else
        return false;
}

public void requestPermissions() {
    Session s = Session.getActiveSession();
    if (s!=null)
        s.requestNewReadPermissions(new Session.NewPermissionsRequest(this, PERMISSIONS));
} 
```

# validation - CakePHP 验证 notEmpty 不带 TAB

> ID：11045243
> 
> 赞同：0
> 
> 时间：2012-06-15T05:47:40.580
> 
> 标签：validation, cakephp

我在我的模型上验证了 notEmpty。

但是，有时我的值需要是 TAB。Cake 将选项卡设为空。

围绕这个问题有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:56:52.207

您可以使用[正则表达式验证](http://book.cakephp.org/2.0/en/models/data-validation.html#custom-regular-expression-validation)来定义自己允许或不允许的内容。

# javascript - Jquery客户端验证不起作用

> ID：11045256
> 
> 赞同：0
> 
> 时间：2012-06-15T05:49:13.907
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在尝试使用 jquery.validate.unotrusive.js 插件来动态创建表单字段，例如：

```
var message = $("<textarea id='test'></textarea>");
$(message).attr("data-val", "true")
.attr("data-val-number", "The field CustomerId must be a number.")
.attr("data-val-required", "The CustomerId field is required.");

var span = $('<span class="field-validation-valid" data-valmsg-replace="true"></span>');
$(span).attr("data-valmsg-for", $(message).attr("id"));

var form = $("<form action='url'></form>");

$(form).append(message,span); 
```

我嵌入了 jquery.validate 和 jquery.validate.unobtrusive js 文件，但 textarea 字段在表单提交时未验证。谁能告诉这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:43:47.547

当您向 DOM 动态添加新元素时，您需要重新解析不显眼的验证规则才能注册它们。因此，一旦您将表单附加到 DOM，就会调用该`$.validator.unobtrusive.parse`方法来通知客户端验证框架这些更改：

```
...
$(form).append(message, span);
$.validator.unobtrusive.parse(form); 
```

如果您只是动态地将输入元素添加到 DOM 中已注册客户端验证的现有表单，您还需要删除此表单的先前规则：

```
// adding some form elements to an existing form ...

$(form).removeData('validator').removeData('unobtrusiveValidation');
$.validator.unobtrusive.parse(form); 
```

# visual-studio-2012 - 如何在 Visual Studio 2012 Express 中启用 xUnit 测试？

> ID：11045260
> 
> 赞同：4
> 
> 时间：2012-06-15T05:49:46.430
> 
> 标签：visual-studio-2012, xunit

是否可以在 Visual Studio 2012 Express 中运行 xUnit 测试测试资源管理器？或者还有其他更好的方法吗？

我见过 Brad Wilson 的[VS2012 xUnit runner](http://visualstudiogallery.msdn.microsoft.com/463c5987-f82b-46c8-a97e-b1cde42b9099)，但它不允许在 Express 中安装。我提取了 VSIX 并编辑了清单以支持允许安装的 VWDExpress，但“运行所有测试”不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:05:12.893

不，Visual Studio 的快捷版不支持第三方插件。

# android - 用于 ANDROID 图像比较的 OpenCV

> ID：11045263
> 
> 赞同：8
> 
> 时间：2012-06-15T05:50:04.047
> 
> 标签：android, opencv, image-processing, computer-vision, object-recognition

我想开发一个应用程序，它可以识别出现在相机前面的物体（如纪念碑或其他东西）`OpenCv`，然后它会显示有关它的信息。

所以问题是**如何识别物体**（如纪念碑或其他东西）的形状或与图像进行比较`OpenCV`？
这样做的最佳方法是什么？

如果有某种用于对象检测和比较的示例或教程会很好。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T09:00:53.267

最好的方法是使用本地特征检测器，例如 OpenCV 的 SIFT、SURF 和 ORB。

您需要至少一张来自要检测的对象的图片。之后，这些算法可以将该图像与其他图像进行比较，看看它们是否足够相似。

这是算法的**文档**。

*   ORB 和其他：

[http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)

*   SURF 和 SIFT（“非自由”）：

[http://docs.opencv.org/modules/nonfree/doc/feature_detection.html](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html)

这些算法为该任务工作的方式是为每个图像选择有趣的点，然后比较它们以查看它们是否匹配。如果找到多个匹配项，则*很可能*这些图像具有相同的对象。

**教程**（来自特征检测及以下）：

[http://docs.opencv.org/doc/tutorials/features2d/table_of_content_features2d/table_of_content_features2d.html](http://docs.opencv.org/doc/tutorials/features2d/table_of_content_features2d/table_of_content_features2d.html)

您还可以在此处找到与此主题相关的**C++ 示例**（示例也在 OpenCV 下载包中）：

*   例如。“matching_to_many_images.cpp”
*   “video_homography.cpp”

[http://code.opencv.org/projects/opencv/repository/revisions/master/show/samples/cpp](http://code.opencv.org/projects/opencv/repository/revisions/master/show/samples/cpp)

这里还有**Android Java 示例**（不相关但也很有帮助）：

[http://code.opencv.org/projects/opencv/repository/revisions/master/show/samples/android](http://code.opencv.org/projects/opencv/repository/revisions/master/show/samples/android)

或**Python 示例**，它们实际上是该主题的更新版本（在撰写本文时）：

[http://code.opencv.org/projects/opencv/repository/revisions/master/show/samples/python2](http://code.opencv.org/projects/opencv/repository/revisions/master/show/samples/python2)

最后一点，就像@BDFun 在评论中所说的那样，这并非易事。

**更多 -**如果您想了解 OpenCV 特征检测和描述的概述，[请查看这篇文章](https://stackoverflow.com/a/14912160/1085483)。

# cluster-computing - 如何重新运行 LSF 作业数组的 EXITing 部分？

> ID：11045269
> 
> 赞同：1
> 
> 时间：2012-06-15T05:50:50.667
> 
> 标签：cluster-computing, lsf

我将许多作业的数组提交到 LSF 集群。大多数运行并在 DONE 状态下完成，但有些可能会退出。我需要一种方法来重新运行阵列的任何 EXITing 成员作业。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T09:58:28.780

我一直在玩同样的问题和命令：

```
brequeue -e <jobarrayid> 
```

应该做你所追求的。您不需要指定应该重新运行哪些元素，-e 开关应该只选择 EXIT 的索引。

# c# - 在 TableAdapter 上拦截和更改 SQL

> ID：11045270
> 
> 赞同：0
> 
> 时间：2012-06-15T05:51:12.987
> 
> 标签：c#, sql, dataset, tableadapter

我们有一个包含大约 40 个 TableAdapter 的数据集。这些在数百个不同的项目中随处使用。

为了增加一层安全性，我现在需要为数据集中所有 TableAdapter 上的所有查询添加一些参数。

有没有办法可以拦截所有查询并添加参数，这样我就不需要使用表适配器更新所有代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:48:00.070

您能否做到这一点值得怀疑。您**也许**可以使用一些[策略注入块](http://msdn.microsoft.com/en-US/library/ff632023.aspx)来提供帮助，但这有点牵强。这是来自 MSDN 的概述。

> ...应用程序块可用于实施拦截策略，以简化系统中常见功能的实施，例如日志记录、缓存、异常处理和验证。

# php - 更改此代码以使用 curl

> ID：11045271
> 
> 赞同：0
> 
> 时间：2012-06-15T05:51:15.340
> 
> 标签：php, curl

因为我无法获得所需的 pecl_http 扩展，所以我需要更改这段代码

```
<?php
    $files = array(
        array(
            'name' => 'torrent',            // Don't change
            'type' => 'application/x-bittorrent',
            'file' => 'my.torrent'          // Full path for file to upload
        )
    );

    $http_resp = http_post_fields( 'http://torcache.net/autoupload.php', array(), $files );
    $tmp = explode( "\r\n", $http_resp );
    $infoHash = substr( $tmp[count( $tmp ) - 1], 0, 40 );
    unset( $tmp, $http_resp, $files );
?> 
```

改为使用 curl，这是我到目前为止所拥有的；

```
<?php
    $files = array(
        array(
            'name' => 'torrent',            // Don't change
            'type' => 'application/x-bittorrent',
            'file' => '0-273-70244-0.pdf.torrent'           // Full path for file to upload
        )
    );

$ch = curl_init();                   //this part we set up curl 
curl_setopt($ch, CURLOPT_URL,'http://torcache.net/autoupload.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $files);
$xml_response = curl_exec($ch);
curl_close($ch);
return $xml_response;
$infoHash= substr($xml_response,0,40); 
```

但是出现了问题，因为上传后没有显示字符串，我只是得到一个空白网页

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:07:49.817

如果你想从函数中传回数据，你只需要使用[return 。](http://php.net/manual/en/function.return.php)在您的代码中，您没有这样做，因此返回是提前结束文档的处理。

删除退货应该可以解决您的问题。

# java - 我在 linux 上有一台 8 GB RAM 和 32 位 JVM 的机器，我想让 JVM 使用最大的 RAM

> ID：11045274
> 
> 赞同：1
> 
> 时间：2012-06-15T05:51:43.433
> 
> 标签：java, linux, jvm

我在 linux 上有一台 8 GB RAM 和 32 位 JVM 的机器，我想让 JVM 使用最大 USE OF RAM，我想如果我增加堆大小内存，那么垃圾收集器会变慢。是否有其他解决方案可以提高处理速度？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:55:14.380

安装 64 位版本的 Linux 和 Java。

如果您有 64 位处理器，则可以在 32 位操作系统上运行 64 位 VirtualBox。 [资源](https://superuser.com/questions/389251/running-a-64-bit-virtualbox-archive-on-a-32-bit-machine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:56:12.790

如果它是 Oracle JVM，则不能使用所有内存。

升级到适合该平台的 64 位 JVM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T07:30:26.730

可以运行 2 个 32 位 Java 虚拟机。如果您无法升级到 64 位，则没有其他方法可以利用 8GB。

# php - PHP 信号量的替代方案？

> ID：11045275
> 
> 赞同：7
> 
> 时间：2012-06-15T05:51:43.920
> 
> 标签：php, mysql, concurrency, semaphore, flock

我正在制作一个小型在线游戏，其中（你知道什么）会有多个用户访问同一个数据库。我的主机没有启用信号量，我真的买不起其他东西（我是一名高中生），所以我正在寻找替代方案。

经过一些研究，我遇到了一些解决方法：

* * *

A）我做了几个函数来模仿信号量，我认为这和我需要的一样好：

```
function SemaphoreWait($id) {
    $filename = SEMAPHORE_PATH . $id . '.txt';
    $handle = fopen($filename, 'w') or die("Error opening file.");
    if (flock($handle, LOCK_EX)) {
        //nothing...
    } else {
        die("Could not lock file.");
    }
    return $handle;
}

function SemaphoreSignal($handle) {
    fclose($handle);
} 
```

（我知道 if 语句中有不必要的代码）。你们有什么感想？显然它并不完美，但一般做法可以吗？有什么问题吗？这是我第一次使用并发，我通常喜欢一种更有意义的低级语言。

无论如何，我想不出任何“逻辑缺陷”，我唯一关心的是速度；**我读过这`flock`很慢**。

* * *

B) MySQL 还提供“锁定”功能。这与 相比如何`flock`？我假设如果一个用户的脚本锁定表而另一个用户请求它，它会阻塞？**我能想到的问题是这会锁定整个表，但我只需要锁定个别用户（所以不是每个人都在等待）。**

* * *

似乎人们说我不需要信号量来更新数据库。我发现您可以使用简单的增量查询，但我仍然需要解决一些示例：

**如果我需要在提交操作之前检查一个值怎么办？就像假设我需要在允许攻击之前检查防御者是否足够强大，例如足够的健康。如果是这样，请在不让其他任何人弄乱/弄乱数据的情况下进行战斗并承受一些伤害。**

我的理解是，每次都有几个查询，在一定长度的代码上（发送查询，获取数据，增加它，将它存储回来），并且数据库不够聪明来处理这个？还是我在这里弄错了？对不起

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-15T05:57:15.763

这里真正的问题不是如何实现锁，而是如何伪造可串行化。教你在前或非数据库世界中实现可序列化的方法是通过锁和信号量。基本思想是这样的：

```
 lock()
 modify a bunch of shared memory
 unlock() 
```

这样，当您有两个并发用户时，您可以确定他们中的任何一个都不会产生无效状态。因此，您的示例场景是两个玩家同时互相攻击并得出关于谁获胜的矛盾概念。所以你担心这种交错：

```
 User A      User B
    |           |
    V           |
  attack!       |
    |           V
    |         attack!
    V           |
  read "wins"   |
    |           V
    |         read "wins"
    |           |
    V           |
  write "wins"  |
                V
              write "wins" 
```

问题是像这样交错读取和写入会导致用户 A 的写入被覆盖，或者其他一些问题。这类问题通常称为*竞争条件*，因为两个线程有​​效地竞争相同的资源，其中一个会“赢”，另一个会“输”，并且行为不是您想要的。

使用锁、信号量或临界区的解决方案是制造一种瓶颈：一次只有一个任务在临界区或瓶颈中，因此这组问题不会发生。每个试图通过瓶颈的人都在等待第一个通过的人——他们正在阻塞：

```
 User A       User B
   |            |
   V            |
 attack!        |
   |          attack!
   V            |  
 lock           V
   |          blocking
   V            .
 read "wins"    .
   |            .
   V            .
 write "wins"   .
   |            .
   V            .
 unlock         V
              lock
                |
                V
               ... 
```

另一种看待这一点的方式是，读/写组合需要被视为一个不能被中断的单一连贯单元。换句话说，它们需要被原子地视为一个原子单元。当人们说数据库“符合 ACID”时，这正是 ACID 中的 A 所代表的意思。在数据库中，我们没有（或者至少应该假装没有）有锁，因为我们使用的是事务，它描绘了一个原子单元，如下所示：

```
BEGIN;

SELECT ...
UPDATE ...

COMMIT; 
```

`BEGIN`和之间的所有内容都`COMMIT`应该被视为一个原子单元，因此要么全部执行，要么都不执行。事实证明，对于您的特定用例而言，仅依靠 A 是不够的，因为您的事务不可能相互失败：

```
 User A     User B
   |          |
   V          |
 BEGIN        V
   |        BEGIN
   V          |
 SELECT ...   V
   |        SELECT ...
   V          |
 UPDATE       V
   |        UPDATE
   V          |
 COMMIT       V
            COMMIT 
```

特别是如果你写得正确，而不是说`UPDATE players SET wins = 37`你说`UPDATE players SET wins = wins + 1`，数据库没有理由怀疑这些更新不能并行执行，特别是如果它们在不同的行上工作。结果，您将需要使用更多的数据库 foo：您需要担心一致性，即 ACID 中的 C。

我们希望设计您的模式，以便数据库本身可以辨别是否发生了无效的事情，因为如果可以，数据库将阻止它。**注意**：既然我们处于设计领域，必然会有很多不同的方法来解决这个问题。我在这里介绍的可能不是最好的，甚至不是好的，但我希望它能说明解决关系数据库问题所需的思维过程。

所以现在我们关心的是*完整性*，也就是说，您的数据库在每次事务之前和之后都处于有效状态。如果数据库正在像这样处理数据有效性，您可以以幼稚的方式编写事务，如果它们由于并发性而尝试做一些不合理的事情，数据库本身将中止它们。这意味着我们有一个新的责任：我们必须找到一种方法让数据库了解您的语义，以便它可以处理验证。一般来说，确保有效性的最简单方法是使用主键和外键约束——换句话说，确保行是唯一的，或者它们肯定引用其他表中的行。我将向您展示游戏中两个场景的思考过程和一些替代方案，希望您能够从那里进行概括。

第一个场景是杀戮。假设如果玩家 2 正在杀死玩家 1，则您不希望玩家 1 能够杀死玩家 2。这意味着您希望杀死是原子的。我会这样建模：

```
CREATE TABLE players (
  login VARCHAR, 
  -- password hashes, etc.
);

CREATE TABLE lives (
  login VARCHAR REFERENCES players,
  life INTEGER
);

CREATE TABLE alive (
  login VARCHAR,
  life INTEGER,
  PRIMARY KEY (login, life),
  FOREIGN KEY (login, life) REFERENCES lives
);

CREATE TABLE deaths (
  login VARCHAR REFERENCES players,
  life INTEGER,
  killed_by VARCHAR,
  killed_by_life INTEGER,
  PRIMARY KEY (login, life),
  FOREIGN KEY (killed_by, killed_by_life) REFERENCES lives
); 
```

现在你可以原子地创造新的生命：

```
BEGIN;

SELECT login, MAX(life)+1 FROM lives WHERE login = 'login';
INSERT INTO lives (login, life) VALUES ('login', 'new life #');    
INSERT INTO alive (login, life) VALUES ('login', 'new life #');

COMMIT; 
```

你可以原子地杀死：

```
BEGIN;

SELECT name, life FROM alive 
WHERE name = 'killer_name' AND life = 'life #';

SELECT name, life FROM alive
WHERE name = 'victim_name' AND life = 'life #';

-- if either of those SELECTs returned NULL, the victim 
-- or killer died in another transaction

INSERT INTO deaths (name, life, killed_by, killed_by_life)
VALUES ('victim', 'life #', 'killer', 'killer life #');
DELETE FROM alive WHERE name = 'victim' AND life = 'life #';

COMMIT; 
```

现在你可以很确定这些事情是原子发生的，因为`UNIQUE`隐含的约束`PRIMARY KEY`将阻止以相同的用户和相同的生命创建新的死亡记录，无论凶手是谁。您还可以手动检查您的约束是否得到满足，例如通过在步骤之间发出计数语句并`ROLLBACK`在发生任何意外情况时发出 a 。您甚至可以将这些东西捆绑到触发检查约束中，并进一步捆绑到存储过程中以变得非常细致。

到第二个例子：能量限制演习。最简单的做法是添加一个检查约束：

```
CREATE TABLE player (
  login VARCHAR PRIMARY KEY, -- etc.
  energy INTEGER,
  CONSTRAINT ensure_energy_is_positive CHECK(energy >= 0)
); 
```

现在，如果玩家尝试使用他们的能量两次，您将在其中一个序列中遇到约束违规：

```
Player A #1     Player A #2
    |               |
    V               |
  spell             |
    |               V
    V             spell
  BEGIN             |
    |               |
    |               V
    |             BEGIN
    V               |
  UPDATE SET energy = energy - 5;
    |               |
    |               |
    |               V
    |             UPDATE SET energy = energy - 5;
    V               |
  [implied CHECK: pass]
    |               |
    V               |
  COMMIT            V
                  [implied CHECK: fail!]
                    |
                    V
                  ROLLBACK 
```

您还可以做其他事情来将其转换为关系完整性问题而不是检查约束，例如在已识别的单元中分配能量并将它们链接到特定的拼写调用实例，但这可能对您来说工作量太大了重新做。这会正常工作。

*现在，我不想在将*所有内容放在那里之后不得不说这些，但是您必须检查您的数据库并确保所有内容都设置为真正的 ACID 合规性。默认情况下，MySQL 曾经为表提供 MyISAM，这意味着你可以`BEGIN`整天运行，而且一切都是单独运行的。如果您使用 InnoDB 作为引擎来创建表，它或多或少地按预期工作。如果可以的话，我建议您尝试使用 PostgreSQL，它对此类开箱即用的东西更加一致。当然，商业数据库也很强大。另一方面，SQLite 对整个数据库都有一个写锁，所以如果那是你的后端，那么前面的整个过程都没有实际意义。我不建议将它用于并发写入场景。

总之，问题在于数据库从根本上试图以非常高级的方式为您处理这个问题。99% 的时间，你根本不用担心；在正确的时间发生两个请求的几率并不高。您愿意采取的所有行动都会发生得如此之快，产生实际比赛条件的可能性微乎其微。但担心它是件好事。毕竟，你可能有一天会编写银行应用程序，知道如何正确地做事很重要。不幸的是，在这种特殊情况下，与关系数据库尝试执行的操作相比，您习惯使用的锁定原语*非常原始。*但数据库正试图优化速度和完整性，而不是简单熟悉的推理。

如果这对您来说是一个有趣的弯路，我希望您可以查看 Joe Celko 的一本书或数据库教科书以获取更多信息。

# mysql - 错误 1005 (HY000): 无法创建表 (errno: 150)

> ID：11045279
> 
> 赞同：16
> 
> 时间：2012-06-15T05:52:11.113
> 
> 标签：mysql

当我尝试在 mysql 中创建表时出现错误。

有什么解决办法吗？

```
create table stock_in(
    ind int not null auto_increment,
    itemcode varchar(10) not null,
    quantity int not null,
    description text not null,
    sales_ref int not null default -1,
    return_outwards_ref int not null default -1,
    stock_in_receipt_ref int not null default -1,
    date text not null,
    time text not null,
    username text not null,
    foreign key (sales_ref) references sales (receiptno),
    foreign key (return_outwards_ref) references returnoutwards(ind),
    primary key (ind)
); 
```

**错误：**

```
ERROR 1005 (HY000): Can't create table 'posinventory.stock_in' (errno: 150) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-15T06:05:10.257

查看有关[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)的 MySQL 手册：

> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

一些想法：

*   最好删除表并使用格式良好的语法创建新表。
*   确保添加`ENGINE=InnoDB;`到您的`CREATE TABLE`- 命令。
*   确保在您的 MySQL 服务器上启用了 InnoDB。要验证这一点，请尝试以下命令：`SHOW VARIABLES LIKE 'have_innodb';`- 如果返回 YES，则启用 InnoDB。
*   检查您的命令中表名和字段名中的大写和小写。
*   不仅要检查您要创建的表，还要检查外键所指的表。
*   确保您引用的表已正确编入索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-09T19:37:22.293

有完全相同的问题。它的来源是外键和引用的类型。

外键：

```
fer_id SMALLINT NOT NULL 
```

和 origin 字段（我们提供的参考）：

```
id INT(11) UNSIGNED NOT NULL 
```

我刚刚也将 fer_id INT(11) 设为 UNSIGNED。神奇地工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-07T00:17:59.427

如果您恢复数据库备份，您可以通过在 .sql 文件的开头插入这些字符串来临时禁用外键检查：

```
/*!40030 SET NAMES UTF8 */;
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-20T12:04:21.697

原因之一是外键列数据类型和长度应与引用表键列相同。例如，引用表列是 mediumint(11)，外键列是 int(11)，表示使用外键创建表时会出错。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-28T00:37:40.813

最重要的是，您需要确保两个表/字段都匹配 CHARSET 设置。UTF 类型字段的大小可以与“latin1”大不相同。两个表上的 SHOW CREATE TABLE 将显示是否存在不匹配

# python - Pika basic_publish 在多个队列上发布时挂起

> ID：11045280
> 
> 赞同：4
> 
> 时间：2012-06-15T05:52:18.850
> 
> 标签：python, rabbitmq, amqp, pika

我需要在交换机上设置多个队列。我想创建一个连接，然后声明多个队列（这可行），然后在多个队列上发布消息（这不起作用）。

我设置了一些测试代码来执行此操作，但它每次都在第二次发布时挂断。我认为它不喜欢在不关闭连接的情况下在多个队列上发布，因为当我在单个队列上发布（甚至单个队列上的多条消息）时，此代码有效。

我需要添加一些东西来完成这项工作吗？我真的很想不必关闭发布之间的连接。此外，当我让我的消费者启动时，当我在多个队列上发送到 basic_publish() 时，他们看不到任何东西。当我在单个队列上发布时，我确实看到消息几乎立即出现。

```
#!/usr/bin/env python
import pika

queue_names = ['1a', '2b', '3c', '4d']

# Variables to hold our connection and channel
connection = None
channel = None

# Called when our connection to RabbitMQ is closed
def on_closed(frame):
    global connection
    # connection.ioloop is blocking, this will stop and exit the app
    connection.ioloop.stop()

def on_connected(connection):
    """
    Called when we have connected to RabbitMQ
    This creates a channel on the connection
    """
    global channel #TODO: Test removing this global call

    connection.add_on_close_callback(on_closed)

    # Create a channel on our connection passing the on_channel_open callback
    connection.channel(on_channel_open)

def on_channel_open(channel_):
    """
    Called when channel opened
    Declare a queue on the channel
    """
    global channel

    # Our usable channel has been passed to us, assign it for future use
    channel = channel_

    # Declare a set of queues on this channel
    for queue_name in reversed(queue_names):
        channel.queue_declare(queue=queue_name, durable=True,
                              exclusive=False, auto_delete=False,
                              callback=on_queue_declared)
        #print "done making hash"

def on_queue_declared(frame):
    """
    Called when a queue is declared
    """
    global channel

    print "Sending 'Hello World!' on ", frame.method.queue

    # Send a message
    channel.basic_publish(exchange='',
                          routing_key=frame.method.queue,
                          body='Hello World!')

# Create our connection parameters and connect to RabbitMQ
connection = pika.SelectConnection(pika.ConnectionParameters('localhost'), \
                                   on_connected)

# Start our IO/Event loop
try:
    connection.ioloop.start()
except KeyboardInterrupt:
    print "interrupt"
    # Gracefully close the connection
    connection.close()
    # Loop until we're fully closed, will stop on its own
    #connection.ioloop.start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:51:57.987

我对此的解决方案是使用一个变量来跟踪我的所有队列是否都已声明。

在 on_queue_declared() 中，我会检查这个变量，如果我的所有队列都被声明，那么我开始发布消息。我相信在取回所有 Queue.DeclareOks 之前尝试发布消息会导致问题。

# jquery - nth-child 选择器，有些奇怪

> ID：11045284
> 
> 赞同：0
> 
> 时间：2012-06-15T05:52:39.473
> 
> 标签：jquery, html, jquery-selectors

小提琴在这里 - [http://jsfiddle.net/ashwyn/a45ha/](http://jsfiddle.net/ashwyn/a45ha/)

这里的 HTML -

```
<div class="parent">
    <div class="a">Class A</div>
    <div class="b">Class B1</div>
    <div class="b">Class B2</div>
    <div class="b">Class B3</div>
    <div class="b">Class B4</div>
    <div class="b">Class B5</div>
</div>​ 
```

jQuery在这里 -

```
$(function(){
    $(".parent").children(".b:nth-child(2)").css("color", "red");
});​ 
```

上面我已经写`.b:nth-child(2)`了为什么我不能选择第二个元素`class="b"`？

我想将**B2 类**突出显示为`color:red`，但我将**B1 类**作为`color:red`。有什么问题吗？如果这就是它的工作方式，那么根据我的说法，这是这种选择器中的一个错误。

小提琴只是为了让你们知道我的问题是什么，但在我真正的问题中，我也有`nth-child(2)`扮演其他角色的`nth-child(j + 1)`地方`j`，但它无法做到`j+2`。

谁能告诉我突出显示**B2类的解决方法**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:58:45.983

你为什么不使用`:eq(2)`而不是`:nth-child(2)`. 为了获得 B2，您将编写：

```
$(".parent").children(".b:eq(1)").css("color", "red"); 
```

**更新**

对于您最初的问题，为什么`:nth-child(2)`不选择第二个孩子，我找到了原因。在[jQuery 文档网站上，](http://api.jquery.com/nth-child-selector/)我发现：

> :nth-child(n) 伪类很容易与 :eq(n) 混淆，尽管两者会导致匹配的元素截然不同。 **使用 :nth-child(n)，所有子元素都被计算在内，无论它们是什么，并且仅当指定的元素与附加到伪类的选择器匹配时才会被选中。**使用 :eq(n) 仅计算附加到伪类的选择器，不限于任何其他元素的子元素，并且选择第 (n+1) 个（n 从 0 开始）。

所以在你的情况下

`$(".parent").children(".b:nth-child(2)").css("color", "red");`

计算`:nth-child(2)`子`.parent`元素并仅在元素为`.b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:55:37.147

[`:nth-child()`](http://api.jquery.com/nth-child-selector/)将选择`nth`孩子。因此，如果您指定 2，它将执行第二个。如果您想要第 3 个，请指定 3。

也可以看看他们的例子。

```
$("ul li:nth-child(2)")
John
Karl - 2nd!
Brandon 
```

我不明白你为什么做不到`j+2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:56:21.223

因为 nth-child 的 jquery 文档索引不是从零开始的。它从 1 开始。

# google-apps-script - 已编程触发器的电子表格源

> ID：11045286
> 
> 赞同：0
> 
> 时间：2012-06-15T05:53:28.430
> 
> 标签：google-apps-script

我正在尝试使用发布/订阅模式来帮助我在 GAS 环境中构建更复杂的应用程序。

由于现在可以以编程方式安装触发器，因此我希望能够在触发事件时在侦听器中检索安装特定触发器的电子表格 ID：

```
function setTrigger(){
  var triggerBuilder = ScriptApp.newTrigger("listen"),
      onEditTrigger = triggerBuilder.forSpreadsheet('some-id').onEdit().create();
}

function listen(e){
  var ssId = e['range'].getSheet().getParent().getId(); //ssId = 'some-id'

} 
```

ssId 实际上是 setTrigger() 所在的电子表格的 id：不是很有用。

也许我在深夜想像力不足，但我看不到实现这个非常有用的模式的方法（100 个创建的电子表格，一个侦听器，所有这些电子表格共有的一组操作，但无法与特定的调用者，因为它无法被识别）。

任何帮助或评论将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:13:01.640

好吧，也许这个问题是一个真正的“堆栈溢出”，有点超出预期。

我同样成功地检索了调用电子表格：

A）创建一个查找表，我在其中跟踪特定事件的回调函数；

B) 在创建事件的脚本中，编写一个函数，将前一张表中索引的每个函数都安装在“this”中。

现在，每当触发事件时，都会调用安装触发器的脚本，并将所有参数/属性放入侦听器中。

它解决了 GAS 的一个主要缺陷：如果我以编程方式在特定工作表上安装触发器，我如何检索该调用工作表？此外，我现在可以在删除该工作表或决定停止从该工作表接收事件时，以编程方式删除与特定工作表关联的触发器。

感谢两位海报的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:07:23.703

对于 range 参数返回不正确的父工作表的问题存在一个[未解决的问题。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1300)您可以对该问题加注星标以获取更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:45:48.360

有趣。未测试，因为我是脚本处理程序的新手，我无法让您的脚本记录 ssID。每个事件都有一个源属性，它只是触发器的电子表格源。我从文档中提取了这段代码：

> 触发器源：当触发器正在侦听的事件发生时执行触发器。每个触发器都与可以使用 Trigger.getEventType() 获取的 EventType 相关联。例如，EventType 可以是 CLOCK，表示它是基于时间的触发器，或 ON_OPEN，表示它是在打开电子表格时执行的触发器。但是，每个事件也有一个来源。例如，电子表格中的 OnEdit 事件必须有源。可以使用 Trigger.getTriggerSource() 获取此源，其值由 ScriptApp.TriggerSource 中的枚举表示。

[https://developers.google.com/apps-script/guide_events](https://developers.google.com/apps-script/guide_events)

```
function onEdit(event)
{
  var ss = event.source.getActiveSheet();
  var r = event.source.getActiveRange();
  r.setComment("Last modified: " + (new Date()));
} 
```

# mysql - 使用不同的方法将 ODBC 数据库分发到不同的机器有哪些缺陷和优点？

> ID：11045290
> 
> 赞同：0
> 
> 时间：2012-06-15T05:53:51.050
> 
> 标签：mysql, ms-access, odbc, dsn

拥有一个 MS-ACCESS 前端和一个 MYSQL 后端，有哪些方法可以将您的 Access 文件分发到缺少 MySQL ODBC 驱动程序和预配置 DSN 的新机器。请受访者仅指定*他们*喜欢的方法，详细说明从“无数据库”到“工作数据库”所涉及的步骤，以便列出可用的不同方法。

注意：我不是要求创建 DSN 的方法，而是整个分发到新机器。可以解决与操作系统版本、系统类型（32 位或 64 位）、驱动程序安装和 DSN 创建（手动或自动）相关的问题。指南的链接也是可以接受的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:33:43.667

对于 Access，这始终是一个需要仔细考虑的问题，如果您提到我会尽量避免通过 ODBC 在我的表中进行链接，它不仅突出了您提到的问题，它还可能产生有害的对数据库性能的影响。

每当使用诸如 MySql 之类的专用数据库服务器时，我总是建议使用 ADO 连接方法而不是 Access 的本机 DAO。这是有利的，因为 ADO 不依赖于存储的 DSN，因此如果您愿意，“直接开箱即用”应该是好的（但是需要在每台机器上安装驱动程序）。在专用服务器的性能方面，ADO 允许您在服务器端运行任何查询/更新等；而 Access 中的链接表会强制这些表在 PC 上本地运行，因此性能可能会受到影响。

此链接详细显示了这两种方法： [http ://webcheatsheet.com/asp/database_connection_to_MySQL.php](http://webcheatsheet.com/asp/database_connection_to_MySQL.php)

# objective-c - 在 Mac OS X 应用程序中通过 objective-c 扫描 Wifi 网络

> ID：11045291
> 
> 赞同：7
> 
> 时间：2012-06-15T05:53:52.347
> 
> 标签：objective-c, macos, cocoa, network-programming, wifi

是否有可用的教程解释如何在 mac 应用程序中通过 Objective-C 扫描可用的 wifi 网络？我一直在搜索过去几天，但只找到了 bonjour 相关的结果。我读到CoreWLAN框架用于wifi扫描和通信，有人可以在这方面指导我吗？我只想创建一个程序来扫描周围可用的 wifi 路由器。然后，当我单击任何路由器时，它会为我提供与该路由器相连的设备列表。可能吗？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:06:11.667

[Apple 的开发者网站在这里](http://developer.apple.com/library/mac/samplecode/CoreWLANWirelessManager/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008921-Intro-DontLinkElementID_2)有一个很好的示例项目，它似乎使用代码解释了您正在寻找的内容 -[这里](http://dougturner.wordpress.com/2009/09/16/usingcorewlan/)还有一个有点旧的教程，尽管它仍然可以帮助您。

# c# - 替换 Visual Studio 查找结果

> ID：11045295
> 
> 赞同：1
> 
> 时间：2012-06-15T05:54:04.683
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, visual-studio-addins

我想创建一个显示查找结果的替换窗口（将来可能还会查找符号结果）。

最好我不想触摸“查找对话框”，也不想自己进行实际查找 - 只需更改它的显示方式。

我找到了 3 个我应该能够导入的接口 - IVsFindHelper、IVsFindScope、IVsFindTarget

关于我如何开始使用这个的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:58:54.577

你看过 ReSharper 吗？它允许您进行您提到的搜索以及许多其他事情。

[锐化器](http://www.jetbrains.com/resharper/)

[ReSharper - 导航和搜索](http://www.jetbrains.com/resharper/features/navigation_search.html#Structural_Search_and_Replace)

# android - openlayer 地图的限制是什么

> ID：11045299
> 
> 赞同：1
> 
> 时间：2012-06-15T05:54:25.217
> 
> 标签：android, openlayers

大家好，我正在为我的下一个项目做一些基础工作，我需要在应用程序中显示地图。我正在寻找谷歌地图的替代品，我在这里找到了一个列表[替代谷歌地图 api](https://stackoverflow.com/questions/4151593/alternatives-to-google-maps-api.I)正在考虑使用 OpenLayer 地图。我想知道使用 OpenLayers 是否有任何限制有没有人研究过这个。我在 OpenLayers 网站上找不到任何限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:37:51.477

我目前正在实现一个应用程序，它使用 openlayers 来显示由我们自己的瓦片服务器提供的基于 OSM 的地图。我在 webview 中使用 OL。html 文件和脚本、图像……存储在应用程序的资产文件夹中，并从那里调用。

到目前为止，它工作正常。但是对于 Android，您对多点触控导航有一定的限制。尽管该设备将支持多点触控（尤其是捏缩放手势），但 Android WebView（和普通浏览器）却不能。这是自 2009 年以来 Android < 3.0 的一个未解决问题您可以[在 openlayers.org 上找到相应的限制文档，](http://docs.openlayers.org/library/mobile.html)并且有一个摘要表（我会发布它，但 StackOverflow 不允许我发布图片，因为我是新人成员） [有一个有趣的项目](https://github.com/Philzen/WebView-MultiTouch-Polyfill)可以在 Android 上进行缩放缩放工作，我将在接下来的几周内尝试一下。

虽然从股票浏览器观看地图的性能非常好，但在 webview 中使用它时存在一些性能问题：任何缩放操作都会导致异常的高 cpu 负载，并且无法使用该应用程序 5-10秒。我只在三星 Galaxy S1 (Android 2.3.6) 上测试过它。但是，模拟器上不会出现性能问题。下周我应该有双核 cpu 的 android 设备。我认为这将使该应用程序再次在 web 视图中与地图一起使用（会告诉你我的结果）。

总结我的经验，我必须说 OpenLayers 真的很强大，我觉得你可以用它做任何事情。你只需要在谷歌周围寻找教程;-)

更新：本周我能够在三星 Galaxy S3 上进行测试。地图的表现很棒！没有问题了。由于 S3 配备 Android 4.0.4，多点触控手势默认都可用 - 无需更改。在模拟器上，当您使用非常密集的地图（缩放）时会出现一些问题 - 但在设备上没有这样的问题。我发现 Galaxy S 1 的 webview 缓存（仍然）存在一些错误，因此速度非常慢。对于只有单核 CPU 的手机来说，这可能是个问题。无法测试其他设备。但是，如果您找不到问题的解决方案并认为这是与 openlayers 相关的问题，请检查[项目页面是否有问题](https://github.com/openlayers/openlayers/issues)

# javascript - 数组填充外部函数 - 不可访问的成员

> ID：11045313
> 
> 赞同：0
> 
> 时间：2012-06-15T05:55:52.187
> 
> 标签：javascript, multidimensional-array

我在这里有一个简单的页面来演示我看到的问题。

我正在定义一个多维数组，在我的函数之外填充它。当我使用 ajax 发回一些数据以使用代码填充数组时，似乎将数据添加到临时数组中。

当我在返回所有 ajax 后尝试访问函数中的数组时，我只能访问最后一行填充。所有其他行都返回空字符串。

代码：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<div id=result>
</div>
<textarea id="the_code"></textarea>
    <script language=javascript>
                var images = [[0,"/upload/cut/1339722764_0_0.png", ""],[1,"/upload/cut/1339722764_0_1.png", ""]];                   

                var numOfImages=1;
                var recievedImages=0;
                var num_row=1;
                var num_col=2;
                var x=0;

                function recieveCode(codeid,emcode)
                {       
                    recievedImages=recievedImages+1;
                    images[codeid][2]=emcode;
                    $('#result').html('Generating: ' + Math.round(((recievedImages/numOfImages) * 100)) + '%');   

                    if (recievedImages == numOfImages)
                    {                   
                        var i = 0;
                        var j = 0;
                        var imageID = "";
                        for(i = 0; i < num_row ; i++)
                        {
                            for(j = 0; j < num_col; j++)
                            {
                                if (j < num_col - 1)
                                {                                   
                                    imageID = imageID + "[[" + images[ (i*num_col) + j][2] + "]] "; 
                                }
                                else
                                {                                       
                                    imageID = imageID + "[[" + images[(i*num_col) + j][2] + "]]\n";
                                }
                            }

                        }
                        $('#the_code').val(imageID);
                    }
                }   
                for (x=0;x<numOfImages;x++)
                {
                    $.ajax(
                    {   
                        type: "POST",
                        data: {album : '223427061111247',image: images[x][1],auth: 'AAAB0ghwtqi0BAFI6xrLYurkQZBT2KWaiKUL3Jxbof3B5xdCIjZBpoImF0Q2ZAaqBC9ofzSPhGoCejyVaYNwIjC44Bay8gIR9Nj38KtGIxyhhgybbIOI' },
                        url: 'upload_emoticode.php',
                        success:function(msg){   recieveCode(images[x][0],msg); }
                    }
                    );
                }                                   
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:59:42.567

问题是您对 ajax 的调用是异步的，因此在`recieveCode`调用时，`x`总是等于`numOfImages`. 您可以通过将对 ajax 的调用包装在一个自调用函数中来解决此问题，该函数将每个图像封装在一个闭包中，如下所示：

```
for (x=0;x<numOfImages;x++)
{
    (function(image){
        $.ajax(
        {   
            type: "POST",
            data: {album : '223427061111247',image: image[1],auth: 'AAAB0ghwtqi0BAFI6xrLYurkQZBT2KWaiKUL3Jxbof3B5xdCIjZBpoImF0Q2ZAaqBC9ofzSPhGoCejyVaYNwIjC44Bay8gIR9Nj38KtGIxyhhgybbIOI' },
            url: 'upload_emoticode.php',
            success:function(msg){   recieveCode(image[0],msg); }
        }
        );
    })(images[x]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:00:12.247

由于这些 Ajax 调用的异步性质，您的*x处于错误的范围内。*尝试像这样创建一个闭包：

```
(function(currentX) {
    $.ajax({   
        type: "POST",
        data: {album : '223427061111247',image: images[currentX][1],auth: 'AAAB0ghwtqi0BAFI6xrLYurkQZBT2KWaiKUL3Jxbof3B5xdCIjZBpoImF0Q2ZAaqBC9ofzSPhGoCejyVaYNwIjC44Bay8gIR9Nj38KtGIxyhhgybbIOI' },
        url: 'upload_emoticode.php',
        success:function(msg){   recieveCode(images[currentX][0],msg); }
    });
)(x); 
```

像这样想。当您进行 Ajax 调用时，循环会在等待服务器响应的同时继续运行。到调用*成功回调时，* *i*变量已经增加了几次。上面修改后的代码会为循环的每次迭代创建*i*的副本。

# gcc - Cmake交叉编译标志

> ID：11045314
> 
> 赞同：0
> 
> 时间：2012-06-15T05:55:54.500
> 
> 标签：gcc, cmake, cross-compiling, toolchain

我为 Linaro 工具链编写 toolchain.cmake 文件。

```
include(CMakeForceCompiler)
set(CMAKE_CROSSCOMPILING   TRUE)
set(CMAKE_SYSTEM_NAME Linux)
set(CMAKE_SYSTEM_VERSION 1)
set(CMAKE_SYSTEM_PROCESSOR "armv7-a")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fPIC -Wno-psabi -frtti -fexceptions" )
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fPIC -Wno-psabi -fexceptions" )
set(CMAKE_C_COMPILER /home/stranger/linaro/android-toolchain-eabi/bin/arm-linux-androideabi-gcc)
set(CMAKE_CXX_COMPILER /home/stranger/linaro/android-toolchain-eabi/bin/arm-linux-androideabi-g++)
CMAKE_FORCE_C_COMPILER("${CMAKE_C_COMPILER}" GNU)
CMAKE_FORCE_CXX_COMPILER("${CMAKE_CXX_COMPILER}" GNU)
set(CMAKE_FIND_ROOT_PATH  home/stranger/linaro/android-toolchain-eabi/arm-linux-androideabi)
include_directories( SYSTEM /home/stranger/android-ndk-r8/platforms/android-14/arch-arm/usr/include)
include_directories( SYSTEM /home/stranger/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/include)
include_directories( SYSTEM /home/stranger/android-ndk-r8/sources/cxx-stl/gnu-libstdc++/libs/armeabi-v7a/include) 
```

我运行 cmake：

```
cmake -DBUILD_ANDROID=On -DCMAKE_TOOLCHAIN_FILE=<path to this toolchain.cmake>  -DCMAKE_BUILD_TYPE=Release <path to my cmake project> 
```

但是在编译时，我有关于异常的错误，而不是在工具链文件中定义的编译器标志：

```
error: exception handling disabled, use -fexceptions to enable 
```

据我了解我的 CMAKE_C_FLAGS_RELEASE，CMAKE_CXX_FLAGS_RELEASE 没有效果。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:52:27.260

问题解决了，我的错。我在主要项目中使用`set(CMAKE_CXX_FLAGS "<flags>")`反对。`set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}<flags>"`我很困惑，因为这个 CMakeLists.txt 适用于 android-cmake 和 Google-NDK（而不是所有 android-cmake 工具链标志都被拒绝）。

# java - 获取 Java 中的硬链接计数

> ID：11045321
> 
> 赞同：7
> 
> 时间：2012-06-15T05:56:45.063
> 
> 标签：java, linux, posix, solaris-10

我需要一些东西来从java中的solaris10 os中的文件中获取硬链接计数。

解析 ls -l 不是一种选择。

我尝试使用 posix for java [http://bmsi.com/java/posix/index.html](http://bmsi.com/java/posix/index.html)但无法使其正常工作。

是否有任何其他轻量级 API 或代码来获取此信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T11:28:16.683

在 Java 7 中，您可以使用新的[文件属性 API](http://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html)来获取 `java.nio.file.Files.getAttribute(path, "unix:nlink")`.

“unix”属性视图实际上并未定义为标准 API 的一部分（并且“posix”视图不提供 nlink），但在标准 Oracle/OpenJDK 实现中可用。另一方面，现在可以使用标准方法*创建*链接。去搞清楚。`createLink``Files`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T07:45:15.223

除了在 C中[使用 JNI](http://www.nag.co.uk/IndustryArticles/CallingCLibraryRoutinesfromJava.pdf)和`stat`/`lstat`之外，唯一比解析 ls 更好的是运行：

```
stat --format=%h filename 
```

它只输出一个数字并且易于解析。

但是当文件名中可能有非 ascii 字符时，一切都会变得复杂。您需要将文件名转换为本机编码，有时并非文件名中允许的所有字符都可以转换（如果本机编码不是某种 unicode）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-05T19:49:11.927

还可以考虑为此尝试**stat(2)的**[jnr-posix](https://github.com/jnr/jnr-posix)实现。

# java - 打印小程序的权限

> ID：11045327
> 
> 赞同：0
> 
> 时间：2012-06-15T05:57:09.510
> 
> 标签：java, security, jakarta-ee, printing, applet

我想打印小程序。有两种方法：

*   签名小程序
*   `permission java.lang.RuntimePermission "queuePrintJob";`在`java.policy`文件中添加

我想选择第二个选项。我的问题是：

1.  我应该在哪里添加 java.policy 文件？...在​​客户端计算机或服务器上？
2.  在服务器上，我可以在启动脚本中添加它，但如果在客户端机器上，那么如何？
3.  我可以在小程序代码本身中设置权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:34:15.967

> 我想打印小程序。有两种方法：

不，至少有 3 个。您提到的两个（其中第二个对于一般分发是不切实际的），以及基于 JNLP API 的可用于在[下一代插件](/questions/tagged/next-generation-plugin "显示标记为“下一代插件”的问题")JRE中使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)`PrintService`的嵌入式小程序。这是一个[演示。](http://pscode.org/jws/api.html#ps)[的](http://pscode.org/jws/api.html#ps)。[`PrintService`](http://pscode.org/jws/api.html#ps)

我推荐最后一个。它不需要对小程序进行数字签名或信任，而是在小程序开始打印时提示用户。

# javascript - javascript / jquery以相同的顺序解析json

> ID：11045331
> 
> 赞同：4
> 
> 时间：2012-06-15T05:57:30.693
> 
> 标签：javascript, jquery, json

我有以下 json 对象。

```
var json1 = {"00" : "00", "15" : "15", "30" : "30", "45" : "45"}; 
```

我正在准备一个解析上述json的选择元素，如下所示。

```
var selElem = $('<select>', {'name' : name, 'grp' : grp});
for(key in json1)
    selElem.append($('<option>', {value:key, text: json1 [key]})); 
```

但创建的选择元素如下。

```
<select>
    <option value="15">15</option>
    <option value="30">30</option>
    <option value="45">45</option>
    <option value="00">00</option>
</select> 
```

这里的问题是 json1 对象包含 00 作为第一个元素，但在 select 元素中它是最后创建的。

此问题的任何解决方法或解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T05:59:35.797

如果要保留顺序，请使用数组：

```
var json1 = [{val:"00",txt:"00"}, 
             {val:"15",txt:"15"}, 
             {val:"30",txt:"30"}, 
             {val:"45",txt:"45"}]; 
```

并循环它：

```
var selElem = $('<select>', {'name' : name, 'grp' : grp});
for(var i=0;i<json1.length;(i+=1)){
    selElem.append($('<option>', {value:json1[i].val, text: json1[i].txt})); 
} 
```

检查[这个jsfiddle](http://jsfiddle.net/KooiInc/6gb5E/)

# iphone - 如何在 iPhone 屏幕上绘制位图/SVG

> ID：11045337
> 
> 赞同：0
> 
> 时间：2012-06-15T05:58:08.270
> 
> 标签：iphone, bitmap, drawing

我对 Objective C iOS 开发很陌生。我只想在 iPhone 屏幕上的随机位置绘制位图/SVG。我研究过Coregraphics，iPhone的Quartz2d框架，但没有找到方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:20:11.393

如果您的需求不大，在 iOS 上绘制 SVG 文件的最简单方法是使用 UIWebView：

```
[myWebView loadData:rawSVGData MIMEType:@"image/svg+xml" textEncodingName:@"utf-8" baseURL:nil]; 
```

您可以在 webView 上设置各种属性，例如 backgroundColor、opaque 和 scalesPageToFit，以对其进行自定义。不过，它并不快，也不能很好地完成所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:21:08.570

我知道两个用于绘制 svg 图像的框架。[https://github.com/SVGKit/SVGKit](https://github.com/SVGKit/SVGKit)和[https://github.com/destman/SVGView](https://github.com/destman/SVGView)。我现在正在玩第二个，你可以在 github 上找到我的 fork。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:01:10.920

如果你去[UIImage Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)你会发现：

```
Drawing Images

    – drawAtPoint:
    – drawAtPoint:blendMode:alpha:
    – drawInRect:
    – drawInRect:blendMode:alpha:
    – drawAsPatternInRect: 
```

这将解决您的问题。

为“如果我想绘制 SVG 而不是位图怎么办”编辑 1。

如果您只是查看上面的链接，您会发现所有准备就绪的答案。

> 支持的图像格式
> 
> 表 1 列出了 UIImage 类可以读取的文件格式。表 1 支持的文件格式
> 
> 格式
> 
> 文件扩展名
> 
> 标记图像文件格式 (TIFF)
> 
> .tiff，.tif
> 
> 联合图像专家组 (JPEG)
> 
> .jpg、.jpeg
> 
> 图形交换格式 (GIF)
> 
> .gif
> 
> 便携式网络图形 (PNG)
> 
> .png
> 
> Windows 位图格式 (DIB)
> 
> .bmp、.BMPf
> 
> Windows 图标格式
> 
> .ico
> 
> 窗口光标
> 
> .cur
> 
> XWindow 位图
> 
> .xbm

如果你想玩 svg 看看[SVGKit](https://github.com/adamgit/SVGKit)。

# css - div#myid 和 div #myid 的区别

> ID：11045350
> 
> 赞同：0
> 
> 时间：2012-06-15T05:59:20.460
> 
> 标签：css, html-table

当我为一个页面做 CSS 时，我发现当我以前做的时候，`div#myid`我的 CSS 被应用到元素上，当我这样做时`div #myid`它没有应用，但我不认为这是一个错误，我已经使用了很多次并且它作品。下面我的 CSS 是正确的，但第一个样式仍然不起作用，第二个起作用。

我在小提琴上放了一个样本，这里是链接[http://jsfiddle.net/bipin000/FnzNm/](http://jsfiddle.net/bipin000/FnzNm/)

```
table #tt
{
    background-color:#ccc;
}
table#tt
{
    color:yellow;
}

​&lt;table id="tt">
    <tr><td>this is atable</td></tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:01:01.567

*   `div#myid`适用于设置为的`div`元素`id``myid`
*   `#myid`适用于设置为的**任何**元素`id``myid`

* * *

> 我发现当我以前做 div#myid 然后我的 css 应用于元素，当我做 div #myid 它不适用

它适用于两者`div#myid`和`#myid`：

**[看演示](http://jsfiddle.net/FnzNm/1/)**

* * *

至于你的桌子***，***这两者`table #tt`和`table#tt`. **空间**字符在这里起着重要作用。

`table #tt`表示在*任何*嵌套级别的元素**内**`id`设置为的元素，而表示设置为的元素。`tt` **`table`*`table#tt``table``id``#tt`***

 *****例子：**

`table #tt`可能意味着以下任何一种：

```
<table>
  <td id="tt"></td>
</table>

<table>
  <td><div id="tt"></div></td>
</table>

<table>
  <td><span id="tt"></span></td>
</table>
<!-- etc --> 
```

`id`所以只要设置为`tt` **inside** 的任何元素`table`。

`table#tt`唯一的意思是：

```
<table id="tt">....</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:02:32.823

第一个说**#tt** inside **table**

```
table #tt
{
    background-color:#ccc;
} 
```

**HTML**

```
<table>
 <tr id="tt"><td>this is atable</td></tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**&**

第二个说**#tt** with **table**。

```
table#tt
    {
        background-color:#ccc;
    } 
```

**HTML**

```
<table id="tt">
 <tr><td>this is atable</td></tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

检查这个[http://jsfiddle.net/FnzNm/3/](http://jsfiddle.net/FnzNm/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:10:03.823

`table #tt`是某个表内具有 id 的元素`tt`（但不是表本身）。

`table#tt`是有 id 的表`tt`

由于`#tt`已经是独一无二的，因此您不需要更复杂的选择器（除非存在某种逻辑，例如“除非元素现在由于运行时的一些花哨的 DOM 操作而移出表格”）。***

# c# - 在excel中设置第一行的第一个单元格

> ID：11045351
> 
> 赞同：-2
> 
> 时间：2012-06-15T05:59:21.313
> 
> 标签：c#, .net

我需要在 c 中写一行，以便在读取后将第一行的第一个单元格存储在字符串中。

它是这样的： -

```
str=read(row[index]); 
```

c Sharp 中的确切语句是什么？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:38:03.123

如果在您的 PC 或 visualstudio 文件夹中安装了 ms office，则在导入参考后，您可以使用 excel interop 首先在您的 c 驱动器中包含来自 office12 或 office14 文件夹的参考，这是代码

```
public static void GetExcelData(string _path)
    {

        Excel.Application xlApp = new Excel.ApplicationClass();
        Excel._Workbook xlWorkbook = xlApp.Workbooks.Open(_path);
        Excel._Worksheet xlWorksheet = (Excel.Worksheet)xlWorkbook.Sheets.get_Item(1);
        Excel.Range xlRange = xlWorksheet.UsedRange;

        string firstcell == (xlRange.Cells[1, 1] as Excel.Range).Value2.ToString();

        xlWorkbook.Close(true, Type.Missing, Type.Missing);
        xlApp.Quit();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:16:47.753

```
private Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();

private static string ReadSpreadsheet()
        {

            Workbook wb = null;
            wb = excel.Workbooks.Open("C:\APathToExcelSpreadsheet.xls", false, true);

            //Get the values in the sheet
            Range rng = wb.ActiveSheet.UsedRange;
            object[,] values;
            if (rng.Value2.GetType().IsArray)
            {
                values = (object[,])rng.Value2;
            }
            else
            {
                values = new object[2, 2];
                values[1, 1] = rng.Value2;
            }

            for (int row = 1; row <= values.GetUpperBound(0); row++)
            {
                for (int col = 1; col <= values.GetUpperBound(1); col++)
                {
                    if (values[row, col] != null)
                    {
.... 
```

# java - java httpclient返回404作为响应码

> ID：11045358
> 
> 赞同：1
> 
> 时间：2012-06-15T05:59:48.013
> 
> 标签：java, android, httpclient

我正在尝试从模拟器运行一个 andriod 应用程序，但是每当我发送一个有效的 url 请求时，它都会显示 404 作为状态代码。我有以下代码。

如果我使用

```
http://10.0.2.2/api/ca/entry/?format=json&username=pragya 
```

从模拟器浏览器，它返回正常。

```
 HttpClient httpclient = new DefaultHttpClient();
                    HttpGet httppost = new HttpGet("http://10.0.2.2/api/ca/entry/?format=json&username=pragya");
                    try {

                        HttpResponse response = httpclient.execute(httppost);
                        Integer i =response.getStatusLine().getStatusCode();
                        Toast.makeText(HelloWorldActivity.this, i.toString(), Toast.LENGTH_SHORT).show();
                        } 
```

编辑......清单文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.andriod.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".HelloWorldActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:01:23.527

尝试两件事一应该是解决方案

1 - 检查条目是否存在于清单中`android.permission.INTERNET`

2-尝试在手机本机浏览器中打开相同的

*   2-a 如果打开就好了

    2-b 如果未打开，请在桌面浏览器中尝试该 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:11:46.107

确保服务器与您要连接的应用程序一起运行。 [http 404 的更多信息](http://en.wikipedia.org/wiki/HTTP_404)

# java - XMemcached 中的异步集

> ID：11045364
> 
> 赞同：0
> 
> 时间：2012-06-15T06:00:44.547
> 
> 标签：java, performance, asynchronous, memcached, xmemcached

我必须使用 XMemcached 为 Memcached 服务器填充大量条目。

由于 Memcached（和 XMemcached）不支持多集，有没有办法在不等待请求完成的情况下“设置”一个值？

也许 XMemcached 本身就是这种情况？我在其文档中没有找到有关此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:03:56.840

你可以试试 xmemcached 客户端支持的 setWithNoReply 方法

# c - 鲣鱼词典

> ID：11045365
> 
> 赞同：2
> 
> 时间：2012-06-15T06:00:55.717
> 
> 标签：c, web-crawler, dictionary, skipfish

我正在尝试通过 Google 探索 Skipfish

我浏览了他们的文档，还浏览了文件 README-FIRST（存在 int eh 字典文件夹）

据我所知，字典对于后续扫描同一目标非常有用。

但到目前为止我无法理解的是：这是如何实现的？使用字典的底层机制是什么？以什么方式？

我真的很感激这方面的帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:21:50.220

字典由*单词*（例如“index”和“cgi-bin”）和*扩展名*（例如“old”和“php”）组成，它们组合在一起形成文件名，skipfish 作为[字典攻击](http://en.wikipedia.org/wiki/Dictionary_attack)的一部分尝试访问。例如：

```
/some/path/index.old
/some/path/index.php
/some/path/cgi-bin.old 
```

在爬取站点时，skipfish 可以将在 URL 和 HTML 中发现的新词添加到字典中。

使用更新的字典是有益的，因为在第一次扫描结束时发现的关键字将在字典中，从后续扫描开始就可以用于探测（而不是仅在扫描中发现它们之后才可用）。

哪些*单词*与哪些*扩展组合的详细信息在***关于字典设计**的更多信息部分中讨论`dictionaries/README-FIRST`

注意：我不是跳鱼专家，您可以通过在[http://security.stackexchange.com上发帖获得更好的答案](http://security.stackexchange.com)

[http://resources.infosecinstitute.com/skipfish-vulnerability-scanner/](http://resources.infosecinstitute.com/skipfish-vulnerability-scanner/)上还有一篇关于skipfish的文章

# php - 用 2 种语言建立网站，用户也可以在其中输入他的数据

> ID：11045366
> 
> 赞同：0
> 
> 时间：2012-06-15T06:00:58.417
> 
> 标签：php, mysql, multilingual

我知道如何用 2 种语言构建网站，我有一个开关和文件中的每种语言文本并使用它。但是我的网站是一个所有自由职业者注册和发布他们的项目等的网站。我如何控制用户输入数据的语言。如果用户用英文输入数据，我如何显示其他语言的数据？

示例：学习 2 种语言英语和阿拉伯语

案例 1：1\. 用户仅以英文输入数据。2\. 我如何用阿拉伯语显示这些数据？

案例2：1.如何让用户只输入阿拉伯语或英语的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:03:40.047

根据内容的多少，您可能需要聘请专门的翻译人员。

我不建议自动翻译，或者至少要非常非常小心，因为用户根本不喜欢这样（例如，我绝对更喜欢阅读英文文本而不是我的母语的自动翻译，因为某些网站非常有帮助决定根据我的 IP 向我展示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:14:28.570

这取决于网站设置，您必须使用语言翻译器并在您的网站上进行相应的设置。

# java - org.hibernate.PropertyNotFoundException：在类 Address 中找不到 customerId 的 getter

> ID：11045372
> 
> 赞同：1
> 
> 时间：2012-06-15T06:01:22.957
> 
> 标签：java, hibernate

我的地址类：

```
public class Address  implements java.io.Serializable {
 private String addressId;
 private String customerId;

  public Address() {
}

public Address(String addressId) {
    this.addressId = addressId;
}
public Address(String addressId, String customerId) {
   this.addressId = addressId;
   this.customerId = customerId;

public String getAddressId() {
    return this.addressId;
}

public void setAddressId(String addressId) {
    this.addressId = addressId;
}
public String getCustomerId() {
    return this.customerId;
}

public void setCustomerId(String customerId) {
    this.customerId = customerId;
} 
```

我的 hbm.xml 文件：

```
<class name="Address" table="Address">
    <id name="addressId" column="address_id" type="java.lang.String">
        <generator class="assigned" />
    </id>

    <property name="customerId" column="customer_id" type="java.lang.String" />

</class> 
```

我收到以下错误

```
org.hibernate.PropertyNotFoundException: Could not find a getter for customerId in class Address
    at org.hibernate.property.BasicPropertyAccessor.createGetter(BasicPropertyAccessor.java:282)
    at org.hibernate.property.BasicPropertyAccessor.getGetter(BasicPropertyAccessor.java:275)
    at org.hibernate.mapping.Property.getGetter(Property.java:272)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildPropertyGetter(PojoEntityTuplizer.java:247)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:125)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:55)
    at org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.<init>(EntityEntityModeToTuplizerMapping.java:56)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:302)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:434) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:58:34.057

Hibernate 的大小写可能有点棘手。

尝试将 CustomerId 作为属性名称，一切都应该没问题。`getcustomerId`如果您命名属性，Hibernate 需要一个方法`customerID`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-16T21:38:03.033

如果您未在 hibernate.hbm.xml 文件中设置默认属性，但您为数据库中的列指定了默认值，则可能会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T12:35:25.627

如果您在 Eclipse 中有 Web 应用程序，请检查 Java 构建路径中是否有相同的输出文件夹和部署程序集中的源文件夹中是否有相同的源文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-26T08:41:40.107

就我而言。我发现我的战争和罐子里有重复的课程。就像 Jigar Joshi 说的。为什么会这样？我将一些实体移动到打包成 jar 文件的其他项目。而且我通过战争重新部署了我的项目，Tomcat没有删除我删除的实体类，实体类仍在旧位置，并且与我的jar文件重复。

**所以我删除了重复的类**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-26T06:12:27.007

有时您必须将**别名放入转义引号**中（如果您使用**resulttransformer**，它将通过属性方法或字段将别名值注入 Class 的实例）：

```
session
    .createNativeQuery("SELECT something AS /"someThing/"")
    .setResultTransformer(Transformers.aliasToBean(MyDao.class))
    .getResultList(); 
```

# c# - 如何设置 HttpListener 类的服务器根路径？

> ID：11045378
> 
> 赞同：0
> 
> 时间：2012-06-15T06:02:08.040
> 
> 标签：c#, httplistener

我正在使用 HttpListener 类来生成本地 Web 服务器。但默认情况下，HttpListener 类会读取保存 HttpListener exe 文件的路径。

如果我想设置一个不同的路径作为服务器根路径，就像 Apache 可以选择一个根路径一样，如何使用 HttpListener 呢？

我已经阅读了 HttpListener 文档，但是没有方法可以做到这一点。

谢谢

水林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:06:51.980

> 但默认情况下，HttpListener 类会读取保存 HttpListener exe 文件的路径。"

`HttpListener`*对本地路径几乎*没有兴趣。您的意思是“我自己的代码默认为工作目录”？如果是这样，这可能只是一个案例

```
Directory.SetCurrentDirectory(rootDirectory); 
```

虽然实际上，坦率地说，我只是希望通过保持 a `string rootDirectory` （或者也许 a `DirectoryInfo`）踢来踢去，并*相对于 that*工作来做到这一点。

# css - 如何在右对齐的边框内将文本左对齐

> ID：11045381
> 
> 赞同：0
> 
> 时间：2012-06-15T06:02:33.977
> 
> 标签：css

我在向右对齐的边框内将文本向左对齐时遇到了困难。我能够将文本/边框向右对齐的唯一方法是嵌套在 div 中。我尝试将它们与 css 的右侧对齐但未能成功，因此我将内容放在了一个 div 中。我认为问题是由我们的老朋友“继承”引起的。

```
 Here's the relevant code   

    <code> css   

        .ex2
             { 
            border-style:solid;
              border-color:#3d2574;
             width:295px;
             height:180px;
             padding:10px;
               border:2px 
                margin:0px;
               z-index:12;
                 }  

            <html>

                <div align="right"> <div class="ex2">
               <style="text-aline=:left;          
             padding:5; font size:3;color="black" ><b><p>*yadda:<br>
            yadda,yadda,yadda, yeadda,yadda,yadda<br><br>
          yadda,yadda,yadda, yeadda,yadda,yadda<br><br> 
          yadda,yadda,yadda, yeadda,yadda,yadda</p>

                                </b>
                       </var>
                 </font>

              </div>
            </div>
              </div>

              </code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:08:18.230

不要使用 align="right" 而是使用 css ：

```
float:right 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:08:27.453

您的`text-align`声明拼写错误和格式错误：

```
<style="text-aline=:left; padding:5; font size:3;color="black"> 
```

你写`text-aline=:left`的不是`text-align:left`

`style`标签本身也使用不正确。它应该是例如

```
<style>.ex2 { text-align:left; padding:5px; font-size:3em; color:black; }</style> 
```

请注意，我添加了一个选择器 ( )，并在您的and声明中`.ex2`添加了单位值 ( `px`, `em`) 。`padding``font-size`

更好的是，应该将 CSS 样式移至外部样式表（正如您可能已经使用您的`.ex2`规则所做的那样）。

我注意到您的 HTML 的其他一些格式问题：

*   您的颜色声明格式错误。你写 `color="black"`的不是`color:black;"`.
*   您的`font-size`声明缺少连字符。
*   您有一个`font`没有匹配的开始标签的结束标签。
*   您有一个`var`没有开始标签的结束标签。
*   您有四个`div`开始标签，只有三个结束标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:09:51.120

行`<style = "text-aline=:left;`etc 不正确，您应该引用要在 css 中正确对齐的文本，如下所示：

```
.ex2 { 
     border-style:solid;
     border-color:#3d2574;
     width:295px;
     height:180px;
     padding:10px;
     border:2px 
     margin:0px;
     z-index:12;
     text-align: right;
     padding:5; 
     font size:3;
     color:black;
} 
```

此外，您的代码还有一些其他问题：

*   您错误地使用了样式标签。样式标签只是简单地包裹在您编写的 css 周围，或者它引用了一个 css 文件，您不能/不应该像元素一样设置样式标签的样式。

*   有一个没有开头的关闭字体标签，但是我建议您根本*不要*使用字体标签。

*   有一个没有打开的关闭 var 标签。

*   您的样式在样式标签中展开。

* * *

你的新 html 看起来像

```
<style> 
  .ex2 { 
         border-style:solid;
         border-color:#3d2574;
         width:295px;
         height:180px;
         padding:10px;
         border:2px 
         margin:0px;
         z-index:12;
         text-align: right;
         padding:5; 
         font size:3;
         color:black;
    }  
</style>
<div align="right">
    <div class="ex2">
        <b>
        <p>
            *yadda:<br>
             yadda,yadda,yadda, yeadda,yadda,yadda<br>
            <br>
             yadda,yadda,yadda, yeadda,yadda,yadda<br>
            <br>
             yadda,yadda,yadda, yeadda,yadda,yadda
        </p>
        </b>
    </div>
</div>
</div> 
```

# windows - 如何检查 Windows 图标文件的图像质量

> ID：11045384
> 
> 赞同：6
> 
> 时间：2012-06-15T06:02:43.963
> 
> 标签：windows, icons

我最近使用了从我们的营销团队收到的图标文件。在资源编辑器 (Visual Studio 2008) 中打开时的图标文件如下所示。

![在此处输入图像描述](../Images/333057c0058bed48728bc8d2c473d802.png)

在**[IcoFX](http://icofx.ro/)****中打开并保存**的相同文件在资源编辑器中正确显示。 ![在此处输入图像描述](../Images/e101ebf68aa3d27a760c947a20c13285.png)

我的营销团队在 Mac 中使用了一些工具 ( [Picture2Icon](http://itunes.apple.com/us/app/picture2icon/id412560610?mt=12) ) 并生成了似乎已*损坏*或*不完全正确*的图标文件。IcoFx 保存的相同文件似乎是正确的。是什么导致 ICOFX 输出正确？

结果是 exe 显示错误的图标。图像不好的确切情况尚不清楚 - 如果颜色质量设置为“中等” **（Windows XP）** ，则会报告。在 Windows 资源管理器中“选择”可执行文件时情况更糟。

![在此处输入图像描述](../Images/1520d5e890f57be8a0f950b2c773cede.png)

这是一个显示问题的图标：[https ://github.com/jayanmn/icontest/blob/master/icontest.ico](https://github.com/jayanmn/icontest/blob/master/icontest.ico)

创建 exe 的完整示例代码位于 [https://github.com/jayanmn/icontest/](https://github.com/jayanmn/icontest/)

所以问题是一个 ico 文件，我如何确保它在 WindowsXP、Windows Vista 和 Windows7 上正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T07:05:22.617

我仔细查看了您`icontest.ico`从 GitHub 网站提供的文件，发现该解决方案很容易解决。

首先，让我说明一下我在**Windows XP 32 位系统**上使用免费软件[**IrfanView**](http://www.irfanview.com/)软件看到的问题，该软件是完成这项任务的**出色**图像查看器。

这是我使用 IrfanView 看到**的 6 层中的 5 层的错误**的合成照片：

![在此处输入图像描述](../Images/9e01bc48f5024003ed750aa494ab8cdc.png)

要修复上述`icontest.ico`文件，人们会认为帧 1、2、3、4 和 6 不好。但事实恰恰相反！事实证明，**第 5 帧**是罪魁祸首！

具体来说，第 5 帧在此帧上具有压缩集，这会导致问题。

所需的实际修复只是***重新保存***文件而不压缩该`icontest.ico`层。对于此任务，作为出色**图像编辑器的免费软件**[**GIMP**](http://www.gimp.org/)应用程序非常适合此任务。

 ****只需使用GIMP**重新保存图标文件，但删除第**5**层的压缩，如下所示：

![在此处输入图像描述](../Images/d6b67aa84ad1f2fefef8472bf189ecfe.png)

最终结果是在 IrfanView 中看到的正确渲染的**icontestResaved.ico**（*提示：要在 IrfanView 中查看图标文件的帧，请使用帧号旁边的红色箭头，即 1/6*）： ![在此处输入图像描述](../Images/a17dfbfb4eb3abb3feb136edceef49f5.png)

确保文件在不同 Windows 操作系统中工作的最佳方法是实际拥有一台可用的机器，因为渲染引擎是独一无二的，并且模拟器可能无法按预期工作。

**好奇的人：在 GIMP 中将***所有图层*设置为压缩会导致在 Windows 资源管理器中**无法查看图标。**

**提示：要以****原始尺寸**查看上述参考图像，请单击鼠标右键并选择查看图像。

**状态更新：**考虑安装[**Axialis IconWorkshop™ Lite 版本 6.3.1.1**](http://www.axialis.com/download/iwlite.html)来处理您所有的图标开发工作流程需求。它是Axialis 自己提供的免费**Visual Studio 2008 插件！****

# apache-flex - 在 flex 中使用多个 y 轴时 Y 轴不显示标签

> ID：11045386
> 
> 赞同：0
> 
> 时间：2012-06-15T06:02:45.343
> 
> 标签：apache-flex, flex3

我需要为折线图显示两个 y 轴。我可以显示两个轴，但无法显示第二个 y 轴的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:52:42.530

您应该明确提到第二个 y 轴的范围。看看下面提到的代码是否有帮助

```
<mx:series>
    <mx:ColumnSeries id="cs1" dataProvider="{SMITH}" yField="close">
        <mx:verticalAxis>
            <mx:LinearAxis id="v1" minimum="40" maximum="50"/>
        </mx:verticalAxis>
    </mx:ColumnSeries>
    <mx:LineSeries id="cs2" dataProvider="{DECKER}" yField="close">
        <mx:verticalAxis>
            <mx:LinearAxis id="v2" minimum="150" maximum="170"/>
        </mx:verticalAxis>
    </mx:LineSeries>
</mx:series> 
```

# vim - 如何在 Fedora 16 中安装 Vim 插件

> ID：11045390
> 
> 赞同：1
> 
> 时间：2012-06-15T06:03:04.993
> 
> 标签：vim, plugins, fedora

我使用以下命令在 Fedora 16 中安装了 Vim：

```
$ yum -y install vim-enhanced 
```

Vim 工作得很好，但现在我想添加 NERD 评论器和 NERD 树插件。在主目录中，我既找不到`.vim/`也找不到`.vimrc`. 所以我继续创建了这些，但仍然没有成功。

你如何在 Fedora 中安装 Vim 插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:38:08.240

你必须创造`~/.vimrc`和`~/.vim/`你自己。

之后，只需按照每个插件的安装说明进行操作。

对于 NERDTree（来自插件页面）：

```
Unzip the archive into your ~/.vim directory. 
That should put NERD_tree.vim in ~/.vim/plugin and NERD_tree.txt in ~/.vim/doc. 
Run :helptags. 
Go :help NERD_tree.txt for the help page. 
```

毕竟，你应该最终得到这个结构：

```
~/.vim/doc/NERD_tree.txt
~/.vim/doc/tags
~/.vim/nerdtree_plugin/exec_menuitem.vim
~/.vim/nerdtree_plugin/fs_menu.vim
~/.vim/plugin/NERD_tree.vim
~/.vim/syntax/nerdtree.vim 
```

这就是使用 NERDTree 所需的全部内容：

```
:NERDTree<CR> 
```

在决定安装 NERDTree 之前，您是否尝试过使用( , , ...)`netrw`调用的“内置” ？`:Ex``:Hex``:Sex``:Vex`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T06:09:36.803

您的发行版是 Fedora 的事实应该在很大程度上无关紧要。任何 GNU/Linux 发行版的安装过程都是相同的。

我建议您使用 Tim Pope 的[Pathogen](https://github.com/tpope/vim-pathogen)管理您的插件。[按照 README 中](https://github.com/tpope/vim-pathogen#installation)的说明将 Pathogen 安装到您的 .vim 目录。然后，编辑您的 .vimrc 以在启动时运行 Pathogen（再次，请参阅[README](https://github.com/tpope/vim-pathogen#runtime-path-manipulation)）。

然后，安装 Pathogen 后，您可以将任何插件添加到目录`.vim/bundle`中，它会自动加载。

Vim 的插件管理非常糟糕，而 Pathogen 填补了插件管理器急需的角色。它非常流行，而且非常简单。

# ios - 如何使用 getter 和 setter 启动和停止功能？

> ID：11045392
> 
> 赞同：-1
> 
> 时间：2012-06-15T06:03:07.573
> 
> 标签：ios, xcode

在 .h 文件中

```
@interface ViewController : UIViewController {
            @private int intVariable1;
    }
    @property (readwrite,assign) int iVar;

    -(void)Callme;
    @end 
```

在 .m 文件中

```
@implementation ViewController
@synthesize iVar=intVariable1;

-(void)Callme
{
        NSLog(@”Callme called”);
}

-(void)setIVar:(int)inIVar
{
        intVariable1 = inIVar;
        [self Callme];
}
@end 
```

我已经实现了此代码以在变量状态更改时调用“Callme”函数，但是当我在 viewDid 加载中调用函数 setIVar 时它不起作用，知道调用它吗？我以前打电话的方式

```
[self setIVar:3]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:16:42.960

如果您想为 getter/setter 函数提供自己的实现，*请不要*在您的实现中使用该`@synthesize`指令！这将生成自己的`-(void)setIVar:(int)inIVar`和`-(int)iVar`方法，这些可能会隐藏您的版本。反过来，如果你想要一个`readwrite`属性，你还必须实现 getter 即`-(int)iVar`。

简单地`@synthesize iVar=intVariable1;`从您的实现中删除该行并放入 implement `-(int)iVar`。

# objective-c - 如何在 ScrollView.pagingEnables = YES 中检测当前页面？

> ID：11045393
> 
> 赞同：0
> 
> 时间：2012-06-15T06:03:22.750
> 
> 标签：objective-c

有什么比这更方便检测“特殊”页面的吗？页面应该完全可见。

```
- (void)scrollViewDidScroll:(UIScrollView *)sender
{

    if(scrollView.contentOffset.x == self.view.frame.size.width * 2) {
        NSLog(@"Special page");
    } else {
        NSLog(@"Normal page");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:10:09.023

[这是](https://github.com/shoktong29/MultiPageScrollView)我最近创建的一个示例项目。

希望这可以帮助。:)

# php - 如何使用 wordpress 元框中的复选框值？

> ID：11045394
> 
> 赞同：1
> 
> 时间：2012-06-15T06:03:23.033
> 
> 标签：php, wordpress

我正在尝试在 wordpress 中使用自定义元框。我目前的目标是创建一个带有复选框的元框，我可以将其用作打开某些内容的开关。我一直在网上搜索，试图拼凑一些有用的东西，到目前为止，我已经足够远，可以生成一个带有复选框的元框，但是选中的值并没有传递到循环中原因。当我尝试输出数组以查看是否可以从中得到任何东西时，它是空的。我看了很多东西并尝试了几个元框创建脚本，但我无法让它们中的任何一个工作。这种方法看起来是最有前途的，但现在我被困住了。我在这里遗漏了什么重要的东西吗？就好像数据没有被保存一样。代码如下：

元框功能。位于functions.php中：

```
// Checkbox Meta
add_action("admin_init", "checkbox_init");

function checkbox_init(){
add_meta_box("checkbox", "Checkbox", "checkbox", "post", "normal", "high");
}

function checkbox(){
global $post;
$custom = get_post_custom($post->ID);
$field_id = $custom["field_id"][0];

echo '<label>Check for yes</label>';
$field_id_value = get_post_meta($post->ID, 'field_id', true);
if($field_id_value == "yes") {
    $field_id_checked = 'checked="checked"';
}
echo ' <input type="checkbox" name="field_id" value="yes" '.$field_id_checked.' />';
}

// Save Meta Details
add_action('save_post', 'save_details');

function save_details(){
  global $post;

  if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
     return $post->ID;
  }

update_post_meta($post->ID, "field_id", $_POST["field_id"]);
} 
```

选中复选框时用于输出内容的代码。这也位于functions.php 中。该函数在循环中使用。

```
function custom_content() {
    if(isset($_POST['field_id']) && $_POST['field_id'] == 'yes') {
        echo "It works!";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:08:09.983

将functions.php上的函数更改为

```
function custom_content($id) {
    $field_id = get_post_meta($id, 'field_id', true);

    if($field_id == yes) {
        echo "It works!";
    }
    else{
        echo 'Not working...';
    }
} 
```

而你的模板，在循环中调用它，就像 ff：

```
custom_content(get_the_ID()); 
```

# algorithm - 打印树的每个叶子路径而不递归

> ID：11045399
> 
> 赞同：7
> 
> 时间：2012-06-15T06:03:50.553
> 
> 标签：algorithm

如何在不使用递归的情况下打印树的每个叶子路径。

它是一棵树，而*不是*二叉树

```
struct node {
    int data
    std::vector<node*> children;
} 
```

打印从根到叶子的所有路径，即下面是树

*   r：是根节点
*   d, m, n 是 r 的孩子
*   x,y,z 是 d 的孩子
*   m 没有孩子
*   o, p 是 n 的孩子

```
-  -  -  -  -  - -根
------dmn
---xyzop

```

结果应该是：

```
根-dx
根-dy
根-dz
根-m
根号
根-np

```

我尝试使用非递归方式但失败了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T18:59:57.367

```
public static void printAllPathToLeafNonRecursive(Node root) {

    if (root == null) {
        return;
    }

    Queue<Object> q = new LinkedList<Object>();
    q.add(root);
    q.add(root.data + "");

    while(!q.isEmpty()){

        Node head = (Node) q.poll();
        String headPath = (String) q.poll();

        if(head.isLeaf()){
            System.out.println(headPath);
            continue;
        }

        if(head.left!=null){
            String leftStr =  headPath + "->" + head.left.data;
            q.add(head.left);
            q.add(leftStr);
        }

        if(head.right!=null){
            String rightStr =  headPath + "->" + head.right.data;
            q.add(head.right);
            q.add(rightStr);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-09T00:13:25.273

这是一个纯粹基于使用堆栈的前序迭代遍历的 Python 解决方案。打印路径和路径和。

```
 class Stack(object): # just for reference
    def __init__(self):
        self.a = []

    def push(self, b):
        self.a.append(b)

    def peek(self):
        return self.a[-1]

    def pop(self):
        return self.a.pop()

    def isEmpty(self):
        return len(self.a) == 0

    def show(self):
        return self.a

 def paths(troot): # you should create your own Tree and supply the root
    current = troot
    s = Stack()
    s.push(current)
    s.push(str(current.key))
    s.push(current.key)

    while not s.isEmpty():
        pathsum = s.pop()
        path = s.pop()
        current = s.pop()

        if not current.left and not current.right:
            print 'path: %s, pathsum: %d' % (path, pathsum)

        if current.right:
            rightstr = path + "->" + str(current.right.key)
            rightpathsum = pathsum * 10 + current.right.key
            s.push(current.right)
            s.push(rightstr)
            s.push(rightpathsum)

        if current.left:
            leftstr = path + "->" + str(current.left.key)
            leftpathsum = pathsum * 10 + current.left.key
            s.push(current.left)
            s.push(leftstr)
            s.push(leftpathsum) 
```

例如，对于以下树：

```
 3                                                
                       /   \
                      /     \
                     /       \
                    /         \
                   /           \
                  /             \
                 /               \
                /                 \
              1                       7                        
           /   \                   /   \
          /     \                 /     \
         /       \               /       \
        /         \             /         \
        0           2           5           8            
     /   \       /   \       /   \       /   \
    /     \     /     \     /     \     /     \
   NUL   NUL   NUL   NUL     4     6   NUL     9 
```

输出将是：

```
 >>> paths()
    path: 3->1->0, pathsum: 310
    path: 3->1->2, pathsum: 312
    path: 3->7->5->4, pathsum: 3754
    path: 3->7->5->6, pathsum: 3756
    path: 3->7->8->9, pathsum: 3789 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T06:25:09.567

策略很简单。向下，向右，然后向上。在每个点上，您都知道下一步该去哪里。

保留一个向量，它是您在树中的当前位置。在根上启动它。然后在伪代码中：

```
while True:
    if not a leaf:
        current_place.push_back(0) // move down one
    else:
        print current path.
        while can't move right:
             if at root:
                 exit()
             current_place.pop_back() //move up one
        current_place[-1] += 1 
```

这些操作将需要函数调用。但它们是带有循环的函数调用，而不是递归，所以它不是递归的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T19:34:47.200

最后，它只是一个图表。有不同类型的图遍历。只需将 dfs 与堆栈一起使用，并打印您没有前边缘的节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-22T18:54:46.420

```
public void allPathsToLeafNodesWithPreOrderDFS() {
    Stack<Node> stack = new Stack<> ();
    stack.push (root);
    List<Deque<Integer>> paths = new ArrayList<> ();

    while (!stack.isEmpty ()) {
        Node pop = stack.pop ();
        System.out.print (" " + pop.data);
        if (pop.isLeaf ()) {
            Deque<Integer> path = new ArrayDeque<> ();
            Node current = pop;
            while (current != null) {
                path.add (current.data);
                current = current.parent;
            }
            paths.add (path);
        }
        if (pop.right != null) {
            pop.right.parent = pop;
            stack.push (pop.right);
        }
        if (pop.left != null) {
            pop.left.parent = pop;
            stack.push (pop.left);
        }
    }
    System.out.println ("paths = " + paths);
}

public void allPathsToLeafNodesWithInOrderDFS() {
    Stack<Node> stack = new Stack<> ();
    List<Deque<Integer>> paths = new ArrayList<> ();
    Node current = root;

    while (!stack.isEmpty () || current != null) {
        if (current != null) {
            stack.push (current);
            if (current.left != null) current.left.parent = current;
            current = current.left;
        } else {
            Node pop = stack.pop ();
            System.out.println (" " + pop.data);
            if (pop.isLeaf ()) {
                Deque<Integer> path = new ArrayDeque<> ();
                Node now = pop;
                while (now != null) {
                    path.add (now.data);
                    now = now.parent;
                }
                paths.add (path);
            }
            current = pop.right;
            if (pop.right != null) pop.right.parent = pop;
        }

    }
    System.out.println ("paths = " + paths);
}

public void allPathsToLeafNodesWithBFS (){
    List<Deque<Integer>> paths = new ArrayList<> ();
    Queue<Node> queue = new LinkedList<> ();
    queue.add (root);
    while (!queue.isEmpty ()){
        Node poll = queue.poll ();
        System.out.println ("poll = " + poll);
        if (poll.isLeaf ()){
            Deque<Integer> path = new ArrayDeque<> ();
            Node current = poll;
            while (current != null){
                path.add (current.data);
                current = current.parent;
            }
            paths.add (path);
        }
        if(poll.left != null) {
            poll.left.parent = poll;
            queue.add (poll.left);
        }
        if(poll.right != null) {
            poll.right.parent = poll;
            queue.add (poll.right);
        }
    }
    System.out.println ("paths = " + paths);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-29T05:23:14.110

```
public static void RoottoPathPrint(BinaryTreeNode root) {
    Stack<Object> stack = new Stack<Object>();
    if (root == null)
        return;
    stack.push(root.getData() + "");
    stack.push(root);
    while (!stack.isEmpty()) {
        BinaryTreeNode temp = (BinaryTreeNode) stack.pop();
        String path = (String) stack.pop();

        if (temp.getRight() != null) {
            stack.push(path + temp.getRight().getData());
            stack.push(temp.getRight());
        }
        if (temp.getLeft() != null) {
            stack.push(path + temp.getLeft().getData());
            stack.push(temp.getLeft());
        }
        if (temp.getLeft() == null && temp.getRight() == null) {
            System.out.println(path);
        }
    }
} 
```

这个想法是在我们遍历树时跟踪单个堆栈中的路径和节点。对象堆栈负责这一点。希望有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-26T06:57:20.537

```
private void rootToLeaf(BSTNode root){
    Stack<Map<BSTNode,ArrayList<Integer>>> tmpStack = new Stack<Map<BSTNode,ArrayList<Integer>>>();
    Map<BSTNode,ArrayList<Integer>> tmpMap = new HashMap<BSTNode,ArrayList<Integer>>();
    //List<Integer> tmp_arraylist = new ArrayList<Integer>();
    ArrayList<Integer> tmpList = new ArrayList<Integer>();
    tmpList.add(root.data);
    tmpMap.put(root, tmpList);
    tmpStack.push(tmpMap);
    while(!tmpStack.isEmpty()){
        Map<BSTNode,ArrayList<Integer>> temp_map = tmpStack.pop();
        for(BSTNode node : temp_map.keySet()){
            if(node.getLeft()==null && node.getRight()==null){
                for(int i: temp_map.get(node)){
                    System.out.print(i+" ");
                }
                System.out.println();
            }
            if(node.getRight()!=null){
                ArrayList<Integer> tmp_List = new ArrayList<Integer>();
                for(int i: temp_map.get(node)){
                    tmp_List.add(i);
                }
                tmp_List.add(node.getRight().getData());
                Map<BSTNode,ArrayList<Integer>> tmphashMap = new HashMap<BSTNode,ArrayList<Integer>>();
                tmphashMap.put(node.getRight(), tmp_List);
                tmpStack.push(tmphashMap);
            }
            if(node.getLeft()!=null){
                ArrayList<Integer> tmp_List = new ArrayList<Integer>();
                for(int i: temp_map.get(node)){
                    tmp_List.add(i);
                }
                tmp_List.add(node.getLeft().getData());
                Map<BSTNode,ArrayList<Integer>> tmphashMap = new HashMap<BSTNode,ArrayList<Integer>>();
                tmphashMap.put(node.getLeft(), tmp_List);
                tmpStack.push(tmphashMap);
            }
        }

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-21T13:23:49.540

对于 n 叉树 - 基于 DFS 和 BFS 的路径，总和

```
 100     
                      /    /   \     \
                    1     2     3     4
   /   /   /   /   /                /   \   
 10   11  12  13  14              40    41 
                                 / \
                              400  401

public void traverseDFS(Node root) {
    Stack<Node> s = new Stack<Node>();
    Stack<String> sPath = new Stack<>();
    Stack<Integer> sSum = new Stack<>();
    s.push(root);   sPath.push(root.Id + "");   sSum.push(root.Id);

    while (!s.isEmpty()) {
      // Pop out
      Node head = s.pop();    String headPath = sPath.pop();    Integer headSum = sSum.pop();
      if(head.children == null || head.children.isEmpty()){ //Leaf
        System.out.println(headPath + "(" + headSum+")");
        continue;
      }
      for(Node child : head.children) {
        String path = headPath + "->" + child.Id;
        Integer sum = headSum + child.Id;
        // Push on stack
        s.push(child);    sPath.push(path);   sSum.push(sum);
      }
    }
  }

public static void traverseBFS(Node root) {

    Queue<Node> q = new LinkedList<>();
    Queue<String> qPath = new LinkedList<>();
    Queue<Integer> qSum = new LinkedList<>();
    q.add(root);  qPath.add(root.Id + "");  qSum.add(root.Id);

    while(!q.isEmpty()){
      // Poll the q
      Node head = q.poll();   String headPath = qPath.poll();   Integer headSum = qSum.poll();
      if(head.children == null || head.children.isEmpty()){ //Leaf
        System.out.println(headPath + "(" + headSum+")");
        continue;
      }
      for(Node child : head.children) {
        String path = headPath + "->" + child.Id;
        Integer sum = headSum + child.Id;
        // Add to the q
        q.add(child);   qPath.add(path);    qSum.add(sum);
      }
    }
  }

class Node {
  int Id;
  String Data;
  Node Parent;
  ArrayList<Node> children;

  public Node(int id, String data) {
    Id = id;
    Data = data;
  }
} 
```

输出

```
-----------Depth FS-------------
100->4->41(145)
100->4->40->401(545)
100->4->40->400(544)
100->3(103)
100->2(102)
100->1->14(115)
100->1->13(114)
100->1->12(113)
100->1->11(112)
100->1->10(111)
-----------BFS-------------
100->2(102)
100->3(103)
100->1->10(111)
100->1->11(112)
100->1->12(113)
100->1->13(114)
100->1->14(115)
100->4->41(145)
100->4->40->400(544)
100->4->40->401(545) 
```

# perl - 无法理解 Tie::File 失败的原因

> ID：11045403
> 
> 赞同：2
> 
> 时间：2012-06-15T06:04:16.013
> 
> 标签：perl

我有以下代码

```
#!/usr/bin/perl
use Tie::File;

tie my @last_id, 'Tie::File', 'last_id.txt' or die "Unable to open this file !$i";
print @last_id[0];

exit; 
```

和一个以`last_id.txt`类似名称命名的文件

```
1
2
3
4
5
6 
```

当我运行程序时，没有任何输出。我试过了`$last_id[0]`，但还是一无所获。：/

我安装了最新的 ActivePerl。

编辑：

现在我收到`Unable to open this file`消息，但该文件与程序源文件存在于同一目录中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:15:25.283

正如你所说，`@last_id[0]`是错误的，应该是`$last_id[0]`。但这不会导致您看到的问题。

请注意，程序不会`last_id.txt`在与 Perl 源文件相同的目录中查找，除非它也是当前工作目录。

您应该首先将`tie`行中使用的错误变量更改为`$!`这样

```
tie my @last_id, 'Tie::File', 'last_id.txt'
    or die "Unable to open this file: $!"; 
```

因为变量`$i`不包含任何有用的东西。这会告诉你失败的*原因*`tie`，这可能是*没有这样的文件或目录*以外的东西。

您还应该`use strict`在`use warnings`程序开始时，因为这将标记容易忽略的简单错误。

最后，尝试通过添加绝对路径来完全限定文件名。这将解决程序默认查找错误目录的问题。

* * *

**更新**

如果问题是您没有对该文件的写入权限，那么您可以通过以只读方式打开它来修复它。

您需要`Fcntl`模块来定义`O_RDONLY`常量，因此将其放在程序的顶部

```
use Fcntl 'O_RDONLY'; 
```

然后`tie`声明是这样的

```
tie my @last_id, 'Tie::File', 'last_id.txt', mode => O_RDONLY
    or die "Unable to open this file: $!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:15:53.487

如果您使用绝对路径，问题应该会消失

```
BEGIN {
    use File::Spec;
    use File::Basename qw' dirname ';
    use vars qw' $thisfile $thisdir ';
    $thisfile = File::Spec->rel2abs(__FILE__);
    $thisdir  = dirname($thisfile);
}
...
tie ... "$thisdir/last_id.txt" 
```

# mysql - mysql 复合索引是否也索引单个字段？

> ID：11045404
> 
> 赞同：1
> 
> 时间：2012-06-15T06:04:25.450
> 
> 标签：mysql, indexing, innodb, compound-index

我有以下 MySQL/InnoDB 表。我在两列上添加了一个复合索引作为主键，我还添加了两个单列索引。使用复合索引后，我是否可以从单列索引中获得任何性能提升？还是我会更好地放弃它们？

```
CREATE TABLE `keywords` (
  `keyword` varchar(100) NOT NULL,
  `record_id` int(11) NOT NULL,
  PRIMARY KEY (`keyword`,`record_id`),
  KEY `keyword` (`keyword`),
  KEY `record_id` (`record_id`),
  CONSTRAINT `keywords_record_id_records_id` FOREIGN KEY (`record_id`) REFERENCES `records` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

如果有帮助，这个表的主要目的是作为一个前向索引，所以这个表是专门用 record_id`INNER JOIN`编辑到我的主记录表的 id 列的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:10:36.783

*关键字*列没有用，但recordid*肯定*是有用的（特别是因为您在内部连接上大量使用它）。第一列是主索引，第二列只是一个“决胜局”，它通常不能替代首先在该列上建立另一个索引。

可以这样想……假设您有一个人员信息列表，首先按姓名排序，然后按电话号码排序。如果你需要查一个人的名字，这个列表就更好了；您不需要仅按名称订购的第二个。但是如果你需要通过电话号码查找某人，那么这个名字-电话顺序列表就像根本没有顺序一样毫无用处；您首先需要另一个按电话号码排序的列表。

# iphone - 苹果推送通知注册和设备令牌收到澄清？

> ID：11045406
> 
> 赞同：5
> 
> 时间：2012-06-15T06:04:41.590
> 
> 标签：iphone, ios, apple-push-notifications, devicetoken

我正在开发一个`Apple Push Notification`集成的 iPhone 应用程序。我对此有些怀疑。

1.  如果用户在 APNS 注册警报中单击“不允许”按钮，我们的代码是否仍会收到来自 APNS 的设备令牌？

2.  我已经测试过，当用户在 iPhone 通知中关闭通知时，应用程序仍然从 APNS 接收设备令牌吗？它是正确的？

任何人都可以澄清这些疑问吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T07:07:24.883

1.  根据我对 APNS 的理解，您的 iOS 接收设备令牌并不依赖于用户的操作（正如您提到的，如果用户单击“不允许”按钮）。

    如果您包含在您的应用程序中：

    ```
    - (void)application:didRegisterForRemoteNotificationsWithDeviceToken 
    ```

    这意味着您的基于 iOS 的应用程序正在发送推送通知注册请求。作为回报，Apple 将 Device Token 发送给 iOS；然后 iOS 将令牌发送给应用程序，然后应用程序将其发送给他们的服务提供商。

    请注意，当用户被询问“不允许”时，并不意味着您不会收到设备令牌。“不允许”是指对应用程序收到的针对用户的任何通知采取的操作。说，位置。这是完全不同的事情。这意味着用户不允许应用使用他/她的位置。

2.  是的。它仍然会收到设备令牌，正如我在 #1 中对您的问题的回答中所讨论的那样。这只是您的应用程序的一项设置，这意味着只要与您的应用程序相关的任何信息有更新，您就不会收到任何可见的通知（徽章、消息或声音）。这就像将您的 Facebook 帐户设置为仅在您的朋友向您发送私人消息时接收通知。除此之外，您将不会收到任何通知。

    启用APNS的过程是：

    1.  请求证书颁发机构
    2.  创建应用 ID
    3.  为推送通知配置 AppId
    4.  创建配置文件
    5.  配置设备
    6.  在 Xcode 中启用配置文件
    7.  创建推送通知提供程序。

有关 APNS 的更多了解，请查看[此](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-03T15:16:36.273

我已经用 Xcode 6.1、ios8.1.2 进行了测试。目前只会在两种情况下生成设备令牌

1.  苹果默认同意“确定”选项
2.  在“不允许”之后，在设置->通知->应用程序->允许通知（打开）中手动更改

第一次在苹果同意的情况下拒绝，将不会生成设备令牌，直到手动更改设置页面中的值。

# android - textview上的Android快速上下文栏

> ID：11045410
> 
> 赞同：0
> 
> 时间：2012-06-15T06:04:59.633
> 
> 标签：android, action

在 Android 中，如果选择了 textview，则选择了一个词，并且上下文操作栏出现在顶部...我想修改该 CAB 并使其看起来像一个快速操作栏...保持文本选择功能不变.. 。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:41:00.197

您可以选择 textview 或仅在简单布局 CAB 出现在顶部的任何类似的东西，并且有一些方法 onActionItemClicke 您想要单击一个项目，然后您在 CAB 默认行为中修改您的操作............ .....................

```
public class MainActivity extends Activity {
protected Object mActionMode;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    View view = findViewById(R.id.lay);
    view.setOnLongClickListener(new View.OnLongClickListener() {
        // Called when the user long-clicks on someView
        public boolean onLongClick(View view) {
          if (mActionMode != null) {
            return false;
          }

          mActionMode = MainActivity.this.startActionMode(mActionModeCallback);
              view.setSelected(true);
              return true;
            }
          });
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
  Toast.makeText(this, "Just a test", Toast.LENGTH_SHORT).show();
  return true;
}
private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {

    // Called when the action mode is created; startActionMode() was called
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
      // Inflate a menu resource providing context menu items
      MenuInflater inflater = mode.getMenuInflater();
      // Assumes that you have "contexual.xml" menu resources
      inflater.inflate(R.menu.cab, menu);
      return true;
    }

    // Called each time the action mode is shown. Always called after
    // onCreateActionMode, but
    // may be called multiple times if the mode is invalidated.
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
      return false; // Return false if nothing is done
    }

    // Called when the user selects a contextual menu item
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
      switch (item.getItemId()) {
      case R.id.toast:
        Toast.makeText(MainActivity.this, "Selected menu",
            Toast.LENGTH_LONG).show();
        mode.finish(); // Action picked, so close the CAB
        return true;
      case R.id.shan:
          Toast.makeText(MainActivity.this, "Selected shani",
                  Toast.LENGTH_LONG).show();
              mode.finish(); // Action picked, so close the CAB
              return true;
      default:
        return false;
      }
    }

    // Called when the user exits the action mode
    public void onDestroyActionMode(ActionMode mode) {
      mActionMode = null;
    }
  }; 
```

}

```
and in menu xml file create menu that you would like to appear in top CAB

    <?xml version="1.0" encoding="utf-8"?>
        <menu xmlns:android="http://schemas.android.com/apk/res/android" >
  <item
    android:id="@+id/toast"
    android:title="Toast">
</item>
 <item
    android:id="@+id/shan"
    android:title="shani">
</item>
   </menu> 
```

# java - 获取tiff文件的坐标

> ID：11045412
> 
> 赞同：2
> 
> 时间：2012-06-15T06:05:13.313
> 
> 标签：java, coordinates, gis, geotiff

我使用 GeoTiffIIOMetadataAdapter 类获取 geoTiff 元数据：

```
 String filename = pathToMyTiffFile;
    FileImageInputStream f = new FileImageInputStream(
            new RandomAccessFile(filename, "r"));

    // Look through ImageIO readers
    Iterator iter = ImageIO.getImageReaders(f);
    IIOMetadata imdata = null;
    GeoTiffIIOMetadataAdapter geo_data;
    while (iter.hasNext() && imdata == null) {
        ImageReader reader = (ImageReader) iter.next();
        reader.setInput(f, true);
        String reader_name = reader.getFormatName().toLowerCase();
        if (reader_name.equalsIgnoreCase("tif")) {
            // Get Image metadata
            imdata = reader.getImageMetadata(0);
            geo_data = new GeoTiffIIOMetadataAdapter(imdata);
            if (geo_data != null &&
                    geo_data.getGeoKeyDirectoryVersion() == 1) {
                geo_data.getModelTiePoints(); //here i get [0.0,0.0,0.0,173084.9999999999,5845515.0,0.0]
            }
        }
    } 
```

如何将此数组提取/转换为通常的纬度/经度坐标？173084.9999999999,5845515.0 是 tiff 文件左上角的坐标，我说得对吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:16:18.477

答案是：是的，它是我的 tiff 文件的左上角。我的 Tiff 在[http://spatialreference.org/ref/epsg/32612/](http://spatialreference.org/ref/epsg/32612/)中。使用我需要的地理工具将坐标转换为 wsg84（[http://spatialreference.org/ref/epsg/4326/ ）：](http://spatialreference.org/ref/epsg/4326/)

```
 CoordinateReferenceSystem sourceCRS = CRS.decode("EPSG:4326", true);
    CoordinateReferenceSystem targetCRS = CRS.decode("EPSG:32612");
    MathTransform transformToEpsg4326 = CRS.findMathTransform(targetCRS, sourceCRS);
    double lon = geo_data.getModelTiePoints()[3];// 175784.99999999997 - X
    double lat = geo_data.getModelTiePoints()[4];// 5842215.0   - Y
    GeometryFactory geometryFactory = new GeometryFactory(new PrecisionModel(), 32612);
    Geometry pointUpperLeft = geometryFactory.createPoint(new Coordinate(lon, lat)); 
```

# java - 如何监控媒体播放器收到的 NetworkTraffic

> ID：11045413
> 
> 赞同：1
> 
> 时间：2012-06-15T06:05:13.623
> 
> 标签：java, android, android-mediaplayer, android-wifi, android-networking

我只想监视 MediaPlayer 使用的所有流量，并在 TextView 上向用户显示此数据使用情况，但这仅在第一次返回一些字节时不起作用，并且不会在处理程序线程上增加这些字节，而它在处理程序上增加一个计数器

单击开始时 MediaPlayer 应该启动并且 Data Usage 的值也应该增加，同时单击停止 MediaPlayer Stop 并且相应的 NetworkUsage 数据增量也应该停止

这适用于计数器，但不适用于 mStartRx = TrafficStats.getUidRxBytes(Process.myUid());

请帮助这是我在 Android 2.2 API level-8 上尝试过的代码片段

```
public class AndroidHandlerRunnableActivity extends Activity
{

 private int cnt = 0;
 Button Start, Stop;
 TextView counter;
 long mStartRx;
 private Handler handler = new Handler();
 private MediaPlayer mediaPlayer;
 ProgressDialog progressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        counter = (TextView)findViewById(R.id.counter);
        Start = (Button)findViewById(R.id.Start);
        Start.setEnabled(true);
        Stop = (Button)findViewById(R.id.Stop);
        Stop.setEnabled(false);

        mediaPlayer = new MediaPlayer();
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setOnPreparedListener(new MediaOnPreparedListener());   
        String networkURL = "http://currentstream1.publicradio.org/";   
            try
            {
                mediaPlayer.setDataSource(networkURL);
            } 
            catch (Exception e)
            {           
                e.printStackTrace();
            }       
        mediaPlayer.prepareAsync();
        mStartRx =  TrafficStats.getUidRxBytes(Process.myUid());
        progressDialog = ProgressDialog.show(this, "Playing audio", "Please wait...."); 

        Start.setOnClickListener(new Button.OnClickListener()
        {
               @Override
               public void onClick(View v) 
               {            
                   handler.post(timedTask);
                   mediaPlayer.start();
                   Start.setEnabled(false);
                   Stop.setEnabled(true);               
               }
        });

        Stop.setOnClickListener(new Button.OnClickListener()
        {
             public void onClick(View v) 
             {          
                    handler.removeCallbacks(timedTask);
                    mediaPlayer.stop();
                    Start.setEnabled(true);
                    Stop.setEnabled(false);
              }
        });
}

    private class MediaOnPreparedListener implements MediaPlayer.OnPreparedListener
    {
        @Override
        public void onPrepared(MediaPlayer mp) 
        {       
            if (progressDialog != null) 
            {               
                progressDialog.dismiss();
            }               
        }       
    }

    private Runnable timedTask = new Runnable()
    {
            @Override
          public void run() 
          {     
               cnt++;
               mStartRx =  TrafficStats.getUidRxBytes(Process.myUid());
               counter.setText(String.valueOf(cnt)+" Data "+mStartRx);
               handler.postDelayed(timedTask, 2000);
          }
     };

        @Override
        protected void onStop() 
        {
            super.onStop();
            if (mediaPlayer != null)
            {           
                mediaPlayer.stop();
                mediaPlayer.reset();
                mediaPlayer.release();
            }
        }
} 
```

如需更多帮助，这是我的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/Start"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Start" />

    <Button
        android:id="@+id/Stop"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Stop" />

    <TextView
        android:id="@+id/counter"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

清单文件如下

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.exercise.AndroidHandlerRunnable"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AndroidHandlerRunnableActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:59:00.350

这是您的线程问题的[答案。](https://stackoverflow.com/questions/4369537/update-ui-from-thread)

此外，您应该将所有 ui 内容`onResume()`放入`onCreate()`. 在 UI 线程有机会启动之前（或在 UI 线程有机会恢复之前）尝试操作您的 UI 可能会出现问题。

你应该把你正在调用的代码放在`onStop()`里面`onPause()`。`onPause()`保证在 Activity 退出时被调用。`onStop()`不是。例如，当用户按下主页按钮或手机接听电话时，您可以测试此用例。

这是有关[Activity Lifecycle](http://developer.android.com/guide/topics/fundamentals/activities.html)的一些信息。值得仔细阅读该页面。

# android - 尝试使用 SimpleAdapter 从 ListView 检索视图内容的应用程序崩溃

> ID：11045414
> 
> 赞同：0
> 
> 时间：2012-06-15T06:05:21.503
> 
> 标签：android, listview, crash, simpleadapter

我在尝试检索用户在 ListView 中单击的视图内容时遇到问题。我的 ListView 是使用 SimpleAdapter 设置的，由列表中每个项目的“标题”和“子标题”组成。这些是使用 HashMap 存储的。

在活动中还有一个微调器，当用户在微调器中选择一个项目时，ListView 会更新。这工作正常，我只是认为有必要提及活动中发生的事情。

我想要做的是检索用户选择的项目，以便我可以根据他们的选择引导他们进行新活动（现在只是尝试用 Toast 显示视图内容）。我想检索存储在该项目的“engExp”键下的内容。

这是我的代码：

```
 // HASHMAP FOR LISTVIEW
    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
    for(int x = 0; x < expressionListForModule.getCount(); x++) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("engExp", expressionListForModule.getString(0));
        map.put("japDef", expressionListForModule.getString(1));
        fillMaps.add(map);
        expressionListForModule.moveToNext();
    }

    // SETUP LISTVIEW
    SimpleAdapter adapter2 = new SimpleAdapter(this, fillMaps, android.R.layout.simple_list_item_2, new String[] {"engExp","japDef"}, new int[] {android.R.id.text1, android.R.id.text2});
    ListView lv = (ListView) findViewById(R.id.expressionList);
    lv.setAdapter(adapter2);
    lv.setTextFilterEnabled(true);
    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Toast.makeText(getApplicationContext(), ((TextView) view).getText(), Toast.LENGTH_LONG).show();
        }
    }); 
```

具体来说，导致应用程序崩溃的项目是： ((TextView) view).getText()

如果您需要查看我的更多代码，请告诉我。

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:08:52.197

尝试

```
lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        TextView v = (TextView) view.findViewById(android.R.id.text1);
        String contentForLink = v.getText().toString();
        Toast.makeText(getApplicationContext(), contentForLink, Toast.LENGTH_LONG).show();
    }
}); 
```

# php - url中的PHP标头传递参数

> ID：11045420
> 
> 赞同：0
> 
> 时间：2012-06-15T06:06:08.017
> 
> 标签：php, header, http-headers

我有一个 index.php 用于注册，一个 login.php 作为注册处理程序。当注册失败时，它会向客户端发送错误消息。我使用此代码发送消息

```
header('Location: http://localhost/musicshare/index.php?reg=false'); 
```

并在 index.php 中接收

```
if(isset($_POST['reg'])){
        echo 'set';//for checking whether reg is set
        if($_POST['reg']=='false'){
            echo '<script type="text/javascript">';
            echo 'alert("Reg faile")';
            echo '</script>';
        }
    } 
```

但是，它似乎根本不起作用；请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:07:25.683

使用`$_GET`代替`$_POST`：

```
if (isset($_GET['reg']) && $_GET['reg'] == 'false'){
   // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:07:32.633

当您使用 header() 时，它会触发一个`GET`请求。

所以你应该使用 $_GET['reg']

```
if(isset($_GET['reg'])){
    echo 'set';//for checking whether reg is set
    if($_GET['reg']=='false'){
        echo '<script type="text/javascript">';
        echo 'alert("Reg faile")';
        echo '</script>';
    }
} 
```

# ruby-on-rails - 如何从集合中生成一堆复选框？

> ID：11045423
> 
> 赞同：0
> 
> 时间：2012-06-15T06:06:23.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型`User`，`Category`并且有一个 HABTM 关联。

我想从`Category`我的视图上的一组项目中生成复选框，并将它们与`current_user`.

我怎么做？

谢谢。

PS 我知道我可以用`options_from_collection_for_select`. 我也知道 Rails 有一个`checkbox_tag`助手。但不太确定如何做到这两点。我知道我可以使用每个循环或其他东西手动完成，但我想知道 Rails 3 是否有一些我缺少的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:27:06.783

你检查过[formtastic](https://github.com/justinfrench/formtastic)还是[simple_form](https://github.com/plataformatec/simple_form)

他们有助手可以更轻松地编写您的表单，也可以处理简单的关联。

例如，`simple_form`你可以写

```
= simple_form_for @user do
  = f.association :categories, :as => :check_boxes 
```

在`form_tastic`你会写

```
= simple_form_for @user do
  = f.input :categories, :as => :check_boxes 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:43:55.230

您可以使用 collection_select 并为其提供选项。假设您有一个围绕用户实例的表单构建器，您可以执行以下操作：

```
form_for current_user do |f|
f.collection_select(
  :category_ids,            # the param key, so params[:user][:category_ids]
  f.object.categories,      # the collection of items in the list
  :id,                      # option value
  :name                     # option string
)
end 
```

如果需要，您可能希望在`:multiple => true`最后传递选项。

# xcode - 如何从我从头开始的项目中向现有应用程序提交新的更新？

> ID：11045424
> 
> 赞同：0
> 
> 时间：2012-06-15T06:06:26.393
> 
> 标签：xcode, submit

好吧，我向应用商店提交了一个应用程序，但我的小表弟在我的电脑上把项目搞砸了，以至于我不得不从头开始。所以我把所有东西都重建成原来的样子，我试图把它提交到应用商店，它显然没有把它识别为同一个应用，

> （请确保您已在 iTunes Connect 上为此应用程序设置了记录。）

尽管捆绑包 ID 与旧 ID 相同。我该怎么做呢？我必须快速发布此更新，非常感谢任何回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:14:39.127

您是否准备好 iTunesconnect 中的应用程序以接收更新？选择“添加版本”后，您仍需点击应用详情屏幕右上角的“准备上传二进制文件”按钮。为了更新，保持应用程序包相同就足够*了*。您还必须使用与以前相同的配置文件。

# c# - 通过 JQuery/JavaScript (AJAX) 或 WinForms 自定义 Web API 请求的标头

> ID：11045428
> 
> 赞同：1
> 
> 时间：2012-06-15T06:06:45.823
> 
> 标签：c#, jquery, httpwebrequest, http-headers, asp.net-web-api

我正在学习和使用**Web API**，需要实现以下**身份验证机制**：

> 对 Web API 的第一次调用将是握手（**登录和令牌共享**）。将使用适当的凭据调用 Web API 的登录方法，**一旦获得批准，基于 GUID 的令牌将返回**给客户端（基于 Jquery 或 Windows）。令牌将在一些可配置的时间后**过期。**
> 
> 到那时，**客户端应该能够与 WebAPI 通信，并与每个请求共享相同的令牌值**，因此不需要对每个调用进行身份验证。
> 
> 对于在每个调用中都有 Token，很有可能在每个 QueryString 中都有它，或者在 Web API 方法的每个参数中都有它。

但是，我正在寻找**可以通过 JQuery（使用 AJAX 调用）或基于 Windows 的客户端将令牌嵌入 HTTPRequestHeader 的可能性。**我希望你们能帮助我提前确定实施该系统的公平方法和风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:04:51.550

您可以[`beforeSend method`](http://api.jquery.com/jQuery.ajax/)在使用 jQuery Ajax 时修改 jQuery 中的标头。

使用添加/修改 HTTP 请求标头[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)没有问题。

也许[Thinktecture.IdentityModel.Http](https://github.com/thinktecture/Thinktecture.IdentityModel.Http)很快就会支持您描述的场景：[线程：WebApiContrib Google Group 上 Thinktecture.IdentityModel 的 Web API 示例](https://groups.google.com/d/msg/webapicontrib/qbBxR-8MvAY/MIP5E4LSfGcJ)

Thinktecture.IdentityModel.Http 中已经实现了一些基于令牌的身份验证机制，如 SWT 和 SAML 1.1 / 2.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:34:12.917

您可以使用使用纯文本发送用户名和密码的 HTTP 身份验证，因此您可以使用 SSL 来保护它。

一篇优秀的文章可以在[这里找到](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

# javascript - 使用 Javascript 的 Html 表值

> ID：11045431
> 
> 赞同：0
> 
> 时间：2012-06-15T06:07:02.290
> 
> 标签：javascript, html-table

我有一个这样的html表：

```
 Invoice#          Due Date      Balance      Select 
      12345           12/25/2011    $1,356.00       X
      56789           12/30/2011    $1,000.00       X

      Total:                        $2,356.00 
```

在表格下方，我有一个文本框。选择或取消选择行中的复选框时，我希望TextBox的值更新以添加或减少所选行中的余额，即在未选中复选框时减去行中所示的余额，并在选中时添加. 默认情况下，这些框将被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:43:14.667

假设每个都没有其他子元素，如`<p>`, `<a>`& `<button>`，只包含文本。如果不是，请重复第一个语句，直到到达`<tr>`元素。

```
function getBalance(e){
  e = e.parentElement; //get the parent of the <td>.
  e = e.children[2]; //get the 3rd <td> of that <tr>.
  //finally copy the textContent to the value attribute.
  document.getElementById(inputboxId).setAttribute('value', e.textContent);
  //e.innerText for older browsers.
} 
```

在第 4 列单元格上放置一个 onclick 事件处理程序。

```
<td onclick='getBalance(this)'>X</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:18:15.157

假设 jQuery：

```
$('table input[type="checkbox"]').click(function() {
    var curBalance=new Number($("#textbox").val());
    var rowBalance=new Number($(this).parent().prev().text());

    var newNum=0;
    if (this.checked) newBalance=curBalance+rowBalance;
    else newBalance=curBalance-rowBalance;

    $("#textbox").val(newBalance);
}); 
```

# php - PHP/MySQL - 计算给定前缀的字段数

> ID：11045434
> 
> 赞同：0
> 
> 时间：2012-06-15T06:07:15.073
> 
> 标签：php, mysql

是否可以计算具有给定前缀的填充字段的数量？

例如，我有一张包含多项选择答案的问答表。有时一个问题有 3 个答案选项，有时有 4 个或 5 个。每个答案都在诸如`answer1_a`、`answer1_b`、`answer1_c`等字段中——有没有办法确定这些字段中有多少有数据（对于给定的记录）？我需要它来确定要在 HTML 中显示多少个多项选择选项。

也许以某种方式使用**mysql_num_fields ？**

谢谢，杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:18:59.013

鉴于您的表结构，Kaii 的答案是正确的。

对于未来，我建议使用这样的真实关系模型：

```
CREATE TABLE QUESTION(
  ID INTEGER NOT NULL,
  QUESTION VARCHAR(100) NOT NULL,

  PRIMARY KEY (ID)
);

INSERT INTO QUESTION VALUES(1, 'My first question');
INSERT INTO QUESTION VALUES(2, 'My second question');
INSERT INTO QUESTION VALUES(3, 'My third question');

CREATE TABLE ANSWER(
  ID INTEGER NOT NULL,
  ID_QUESTION INTEGER NOT NULL,
  ANSWER VARCHAR(100) NOT NULL,

  PRIMARY KEY (ID),
  FOREIGN KEY (ID_QUESTION) REFERENCES QUESTION(ID)
);

INSERT INTO ANSWER VALUES (1, 1, 'First possible answer for question 1');
INSERT INTO ANSWER VALUES (2, 1, 'Second possible answer for question 1');
INSERT INTO ANSWER VALUES (3, 1, 'Third possible answer for question 1');
INSERT INTO ANSWER VALUES (4, 2, 'First possible answer for question 2');
INSERT INTO ANSWER VALUES (5, 2, 'Second possible answer for question 2');
INSERT INTO ANSWER VALUES (6, 3, 'First possible answer for question 3');
INSERT INTO ANSWER VALUES (7, 3, 'Second possible answer for question 3');
INSERT INTO ANSWER VALUES (8, 3, 'Third possible answer for question 3');
INSERT INTO ANSWER VALUES (9, 3, 'Fourth possible answer for question 3');

SELECT
  QUESTION.ID,
  COUNT(*) as NB_ANSWER
FROM QUESTION
INNER JOIN ANSWER ON QUESTION.ID = ANSWER.ID_QUESTION
GROUP BY QUESTION.ID
ORDER BY QUESTION.ID; 
```

在这里看到它的工作：[http ://sqlfiddle.com/#!3/0025a/3/0](http://sqlfiddle.com/#!3/0025a/3/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:25:27.297

要在 SQL 中解决这个问题，您必须明确列出所有字段名称。假设您的字段值设置为`NULL`未提供数据时，SQL 解决方案可能如下所示：

```
SELECT *, 
    ( answer1_a IS NOT NULL +
      answer1_b IS NOT NULL +
      answer1_c IS NOT NULL +
      answer1_d IS NOT NULL +
      answer1_e IS NOT NULL ) AS number_of_answers
FROM answers 
```

一种可扩展的方法（当您更改表结构时自动增长，例如插入一个新答案'f'）将在 PHP 中进行这种计算：

```
<?php
$res = mysql_query("SELECT * FROM answers");
while ( $row = mysql_fetch_assoc($res) ) {
    $count = 0;
    foreach ( $row as $fieldname => $value ) {
        if ( strncmp($fieldname, 'answer1_', 8) === 0 &&
             $value !== NULL ) {
            $count++;
        }
    }
    $row['number_of_answers'] = $count;
    $resultset[] = $row;
}
print_r($resultset); 
```

然而，PHP 解决方案的缺点是您不能轻易地在语句中使用`HAVING`or`WHERE`子句`SELECT`来查找（例如）具有 4 个可能答案的所有问题。

# objective-c - MPMoviePlayerController：倒回开始？

> ID：11045439
> 
> 赞同：0
> 
> 时间：2012-06-15T06:07:45.527
> 
> 标签：objective-c

如何停止播放视频并返回开始？

```
videoPlayer.currentPlaybackTime = 0.0 ; // This doesnt work as expected. 

[videoPlayer stop]  // Shows just a "blank" page 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:36:42.843

这也有效

```
videoPlayer.currentPlaybackTime = 0;
[videoPlayer pause]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:35:19.130

做这个：

```
 if(videoPlayer)
   {
      [videoPlayer stop];
      myMoviePlayer.initialPlaybackTime = 0.0;
      [videoPlayer play];
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:43:06.243

```
videoPlayer.currentTime = 0;
[videoPlayer stop]; 
```

# facebook - 为什么当我点击链接时 facebook 会更改 url？

> ID：11045449
> 
> 赞同：1
> 
> 时间：2012-06-15T06:09:02.577
> 
> 标签：facebook, url-rewriting

![在此处输入图像描述](../Images/8023e4476b149b4fc0a40cf5163eb1aa.png)

假设我点击了一个 facebook 链接——一旦点击，URL 就会变成这样：

[http://www.facebook.com/l.php?u=http%3A%2F%2Fapple.stackexchange.com%2Fquestions%2F398%2Fhow-do-i-build-apps-to-my-jailbroken-ipad&h= uAQFM5WKt](http://www.facebook.com/l.php?u=http%3A%2F%2Fapple.stackexchange.com%2Fquestions%2F398%2Fhow-do-i-build-apps-to-my-jailbroken-ipad&h=uAQFM5WKt)

然后我被重定向到我想去的 URL。为什么脸书会这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:16:44.220

Facebook 会跟踪从其网站发出的所有链接。它将您提供的网址保存为链接。

首先，它会将您转发到保存 url 的 facebook 链接，然后重定向到实际的 url。

这样 facebook 就知道哪些 url 获得了最多的点击。

仅供参考，即使谷歌也这样做。

# html - 使用 Chrome 悬停时白色闪烁/闪烁

> ID：11045451
> 
> 赞同：1
> 
> 时间：2012-06-15T06:09:21.193
> 
> 标签：html, google-chrome, css, hover

我在我设计的网站上有一个相当奇怪的问题。每次您将鼠标悬停在链接内或外时，链接元素以及在某些情况下其父元素都会快速闪烁白色。这发生在每个链接上，而不仅仅是具有过渡效果或不同悬停颜色的链接。在 FF 上，一切正常。白色也不是身体的背景色。

更神秘的是我没有对站点进行任何更改。我只更新了 Chrome ..

我也会发布一张图片，但由于我是一个新用户，我不允许这样做，所以必须将其作为链接： [http ://www.planetoidi.com/temp/hover.jpg](http://www.planetoidi.com/temp/hover.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T20:01:44.867

这是由 Chrome 中的一大类错误引起的，这些错误在转换到加速渲染或从加速渲染转换时会显示闪烁（白色或黑色，具体取决于错误）。当从非悬停状态发生 CSS 转换时，可能会在悬停时发生这种情况。

一种解决方法是确保元素的基本状态是使用加速渲染。一种方法是为您的元素添加以下规则（没有 :hover 选择器）：

`-webkit-backface-visibility: hidden;`

来源：[http ://www.sitepoint.com/fix-chrome-animation-flash-bug/](http://www.sitepoint.com/fix-chrome-animation-flash-bug/)

# android - 在Android上分组字符串ListView？

> ID：11045455
> 
> 赞同：0
> 
> 时间：2012-06-15T06:09:38.383
> 
> 标签：android, string, listview, grouping

我有这样的字符串：

```
you
me
i
me
i
i
you
me
me 
```

我想像这样在我的 ListView 中对该字符串进行分组：

```
you (2)
me (4)
i (3) 
```

如果我单击“you (2)”，则再次显示 ListView，如下所示：

```
you
you 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:13:21.113

首先，您需要对列表适配器进行排序。对于排序，这对您很有用[http://www.anddev.org/code-snippets-for-android-f33/alphabetical-listview-in-android-t56983.html](http://www.anddev.org/code-snippets-for-android-f33/alphabetical-listview-in-android-t56983.html)

然后实现[可扩展列表](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)

正如 Dheeresh Singh 所说，请编写一些代码，然后我们可以提供更多帮助。谢谢

# c# - 我想在新页面/窗口上显示 PDF？

> ID：11045458
> 
> 赞同：0
> 
> 时间：2012-06-15T06:09:45.000
> 
> 标签：c#, asp.net, asp.net-mvc, file

我有一个显示 PDF 的打印方法，我希望它在新窗口中显示！

***这就是我想在新页面、标签、窗口上显示的内容！！！***

```
return File(arrStream, "application/pdf"); 
```

**我的打印方法：**

```
public ActionResult Print(int id) // sales contract Id
        {
            ParameterFields paramFields = CreateParameterFields(id); // pass the id of the contract
            // Save the report run details
            Guid reportRunId;
            SaveReportRunDetails(paramFields, out reportRunId);               

            try
            {

               <<< Print code >>>
              //Open a new page on this return 
                return File(arrStream, "application/pdf");
            }
            catch (Exception err)
            {
                ViewBag.ErrorMessage = err.Message;
                return RedirectToAction("Edit", new { id = id, error = err.Message }); 
            }
        } 
```

这是一个控制器，我不能将客户端脚本与服务器端代码混合在一起，如果我将它放在指向该控制器的链接中，那么即使我的错误也会显示在新页面上，这对于用户。

**我怎样才能实现我的目标？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:15:18.627

要在新页面中打开 pdf，只需`target="_blank"`在调用您的方法时使用。

查看您的代码，您似乎没有使用帖子，所以很简单

```
<a href="..." target="_blank">text</a> 
```

应该解决你的问题

# c# - C# Parallel.For 创建数组：可以将 lock() 放在数组上吗？

> ID：11045459
> 
> 赞同：4
> 
> 时间：2012-06-15T06:09:50.083
> 
> 标签：c#, performance, locking, task-parallel-library

我有一个耗时的静态 C# 方法来创建一个数组（`double`：s），因此并行化了操作。

由于我在进入循环之前创建了数组，并且在那之后没有篡改它的引用，所以我认为`lock`在并行循环中更新它时数组本身应该足够了。

阵列本身是否可以，`lock`或者我可能会面临这种方法的一些性能或死锁问题？创建一个单独的`lock`变量来锁定是否更好？

下面是一些示例代码来说明：

```
static double[] CreateArray(int mn, int n)
{
  var localLock = new object();    // Necessary?
  var array = new double[mn];

  Parallel.For(0, n, i =>
  {
    ... lengthy operation ...

    lock (array)    // or is 'lock (localLock)' required?
    {
      UpdatePartOfArray(array);
    }
  });

  return array;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T06:14:58.857

由于`array`here 是一个引用类型，在操作期间没有重新分配，并且还没有在其他地方公开（其他一些*代码*可以锁定它），是的，它可以作为锁定对象本身就足够了。但是，如果更新是针对数组的不同部分，即

```
array[i] = ... // i is separate 
```

那么就没有必要锁定任何东西。

# ios - 锯齿状的 ccDrawCircle

> ID：11045463
> 
> 赞同：0
> 
> 时间：2012-06-15T06:10:02.460
> 
> 标签：ios, cocos2d-iphone

使用 Cocos2d 画一个较粗的圆：

```
glLineWidth(20);
ccDrawCircle(self.ripplePosition, _radius, 0, 50, NO); 
```

但这就是出现的情况（注意它看起来像是从 4 个不同的部分创建的）：

[http://i.stack.imgur.com/jYW4s.png](http://i.stack.imgur.com/jYW4s.png)

我尝试将段数增加到更大的值，但结果是相同的。

这是 Cocos2D 中的错误吗？关于如何实现“完美”圈子的任何想法？

下面是 cocos2d 2.0rc2 中 ccDrawCircle 的实现：

```
void ccDrawCircle( CGPoint center, float r, float a, NSUInteger segs, BOOL drawLineToCenter)
{
lazy_init();

int additionalSegment = 1;
if (drawLineToCenter)
    additionalSegment++;

const float coef = 2.0f * (float)M_PI/segs;

GLfloat *vertices = calloc( sizeof(GLfloat)*2*(segs+2), 1);
if( ! vertices )
    return;

for(NSUInteger i = 0;i <= segs; i++) {
    float rads = i*coef;
    GLfloat j = r * cosf(rads + a) + center.x;
    GLfloat k = r * sinf(rads + a) + center.y;

    vertices[i*2] = j;
    vertices[i*2+1] = k;
}
vertices[(segs+1)*2] = center.x;
vertices[(segs+1)*2+1] = center.y;

[shader_ use];
[shader_ setUniformForModelViewProjectionMatrix];    
[shader_ setUniformLocation:colorLocation_ with4fv:(GLfloat*) &color_.r count:1];

ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );

glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
glDrawArrays(GL_LINE_STRIP, 0, (GLsizei) segs+additionalSegment);

free( vertices );

CC_INCREMENT_GL_DRAWS(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:37:22.687

我使用了稍微修改过的 ccDrawCircle 版本，它运行良好（性能比使用和调整 sprite 的大小要好得多）：

```
void ccDrawDonut( CGPoint center, float r1, float r2, NSUInteger segs)
{
    lazy_init();

    const float coef = 2.0f * (float)M_PI/segs;

    GLfloat *vertices = calloc( sizeof(GLfloat)*4*segs+4, 1);
    if( ! vertices )
        return;

    for(NSUInteger i = 0;i <= segs; i++) {
        float rads = i*coef;
        GLfloat j1 = r1 * cosf(rads) + center.x;
        GLfloat k1 = r1 * sinf(rads) + center.y;
        vertices[i*4] = j1;
        vertices[i*4+1] = k1;

        rads+= coef/2;
        GLfloat j2 = r2 * cosf(rads) + center.x;
        GLfloat k2 = r2 * sinf(rads) + center.y;

        vertices[i*4+2] = j2;
        vertices[i*4+3] = k2;
    }

    [shader_ use];
    [shader_ setUniformForModelViewProjectionMatrix];
    [shader_ setUniformLocation:colorLocation_ with4fv:(GLfloat*) &color_.r count:1];

    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei) 2*segs+2);

    free( vertices );

    CC_INCREMENT_GL_DRAWS(1);
} 
```

# https - 为什么沙盒应用程序也需要安全的画布 URL？

> ID：11045467
> 
> 赞同：3
> 
> 时间：2012-06-15T06:10:30.797
> 
> 标签：https, sandbox, facebook-canvas

我已经启用了沙盒模式，但仍然不允许在没有 https 画布 url 的情况下保存更改。这使得测试任何与画布页面相关的更改变得更加困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:14:38.380

只需输入与您的应用相同的 URL，然后添加`https`而不是`http`. 如果您通过非安全连接使用 Facebook，它仍应使用 HTTP URL。

# xml-signature - XMLSign 从 xml 文件中的证书进行验证

> ID：11045470
> 
> 赞同：0
> 
> 时间：2012-06-15T06:10:46.787
> 
> 标签：xml-signature, saml-2.0

我的代码以 xml 格式接收 saml 响应。我需要验证签名以确认响应未被篡改，并且我还需要确认这来自受信任的来源。（在设置文件中，我有信任证书的证书指纹和颁发者名称）。我正在使用组件空间工具，我可以在其中调用 GetCertificate() 从 xml 文件中获取 X509Certificate2。

要验证签名的 xml，我是否需要将此证书安装到证书存储区？是否可以使用您从 xml 本身构建的证书来验证 xml 签名文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:59:33.927

我当然不会仅仅基于签名消息中包含的证书来相信签名消息的真实性。理论上，有人可以截获消息并使用新的歌唱证书创建新消息，而您的 SP 永远不会知道。让 IDP 带外向您发送他们的签名证书被认为是最佳实践，您应该将其安全地存储在本地。这样，当您收到签名消息时，您可以检查消息中包含的签名证书是否与您的 IDP 提供给您的本地存储版本匹配，并使用相同的证书验证消息签名是否有效。

# iphone - uiresponder 下一个文本字段在 keyEvent 之后成为FirstResponder

> ID：11045474
> 
> 赞同：1
> 
> 时间：2012-06-15T06:11:14.630
> 
> 标签：iphone, uitextfield, uiresponder

我水平有 4 个文本字段。每个 textFiled 将只允许四个字符。如果用户输入四个字符，则焦点应更改为下一个文本字段，而无需任何用户交互。通过使用下面的代码，我可以切换到下一个 textFiled，但只有在从键盘输入任何字符之后。我的要求是在输入四个字符后自动关注下一个文件。请帮助我。提前致谢。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

if ( range.location  >= 4 ) {
  textField.text = string;        
    UIResponder* nextResponder = [textField.superview viewWithTag:(textField.tag + 1)];
    if (nextResponder) {           
        [textField resignFirstResponder];            
        [nextResponder becomeFirstResponder];          
    }        
    return NO;
}    
return YES; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:17:06.110

你可以在这个方法中使用这样的东西：

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {

    if(theTextField == firstField)
    {
        [secondField becomeFirstResponder];
        return YES;
    }

    if(theTextField == secondField)
    {
        [thirdField becomeFirstResponder];
        [theTextField resignFirstResponder];
        return YES;
    }

    if(theTextField == thirdField)
    {
        [thirdField becomeFirstResponder];
        [theTextField resignFirstResponder];
        return YES;
    }
    [theTextField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:38:58.337

```
//try to this code 

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
  if ([[textField text] length] + [string length] - range.length > 4) {

    textField.text = string;        
   UIResponder* nextResponder = [textField.superview viewWithTag:(textField.tag + 1)];
   if (nextResponder) {           
      [textField resignFirstResponder];            
      [nextResponder becomeFirstResponder];          
  }   

    return YES; 
} 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:31:44.373

我认为你需要这样的东西， [https://github.com/lashad/PTPasscodeViewController](https://github.com/lashad/PTPasscodeViewController)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T06:35:03.703

尝试更换这个

```
if ( range.location  >= 4 ) 
```

和

```
if ( range.location  >= 3 ) 
```

# django - Django 覆盖应用程序 url

> ID：11045476
> 
> 赞同：1
> 
> 时间：2012-06-15T06:11:28.073
> 
> 标签：django, url

我有一个安装了三个应用程序的项目。第一个（photologue）工作正常，但我对后两个有问题。我在 Django 站点中的 urls.py 文件如下所示：

```
from django.conf.urls.defaults import patterns, include, url
from django.contrib import auth
from django.contrib import admin
from funvisis.users.models import FVISUser
admin.site.register(FVISUser)
admin.autodiscover()
urlpatterns = patterns(
    '',
    (r'^admin/', include(admin.site.urls)),
    (r'^photologue/', include('photologue.urls')),
    (r'^inspeccionespuentes/', include('funvisis.bridgeinspections.urls')),
    (r'^inspeccionesedificios/', include('funvisis.buildinginspections.urls')),
    ) 
```

我的两个应用程序上的 urls.py 文件如下所示：

```
from django.conf.urls.defaults import patterns, include, url
from django.conf import settings
from .admin import admin_site
from .views import csv_view
urlpatterns = patterns('',
                       url(r'^csv/(?P<models_url>\w+)/', csv_view),
                       (r'', include(admin_site.urls),
                      ) 
```

当我尝试访问网址“^inspeccionesedificios/”时出现问题，因为没有添加新建筑检查的链接，并且列出所有检查的链接形成为“http://127.0.0.1:8000/inspeccionespuentes/ buildinginspections/”（注意它是如何以“inspeccionespuentes”而不是“inspeccionesedificios”开头的）。

如果我从以下位置更改 Django 站点中模式的顺序：

```
 (r'^inspeccionespuentes/', include('funvisis.bridgeinspections.urls')),
    (r'^inspeccionesedificios/', include('funvisis.buildinginspections.urls')), 
```

至：

```
 (r'^inspeccionesedificios/', include('funvisis.buildinginspections.urls')),
    (r'^inspeccionespuentes/', include('funvisis.bridgeinspections.urls')), 
```

导致相同的行为，但在“inspeccionespuentes”中存在问题。

我最近从 Django 1.3 迁移到 Django 1.4，这个问题在迁移之前没有出现。任何想法？

谢谢！

# jquery - jquery index() 方法获取子索引

> ID：11045482
> 
> 赞同：2
> 
> 时间：2012-06-15T06:11:59.127
> 
> 标签：jquery, indexing, parent-child

我正在使用查询 index() 方法来获取元素相对于其父元素的索引。

这里有两个代码： Code1

```
<div id="check1">
    <p>  
        <span> 
            <b> Bold Line 1 </b>
            <b> This is line2 </b>
        </span>
    </p>
    <p> Should have index 1 </p>
</div> 
```

代码2

```
<div id="check2">
    <p>  
        <span> 
            <b> Bold Line 1 </b>
            **<p> This is line2 </p>**   //replaced <b> with <p>
        </span>
    </p>
    <p> Should have index 1 </p>
</div> 
```

在 code2 中，我只是将第二个粗体名称替换为 p 标签名称。

有疑问的地方是这两种情况下的答案都不同。答案是：

```
Case1: index comes 1
Case2: index comes 3 
```

请检查一下。“点击应该有索引 1” [http://jsfiddle.net/blunderboy/U73VV/](http://jsfiddle.net/blunderboy/U73VV/)

此外，当我在两张支票上单击“这是第 2 行”时，他们的父母会变得不同。在 check1 中，parent 是 span，而在 check2 中，parent 是 div。

请让我知道仅通过更改 tagName 有什么不同。他们与父母的相对位置仍然相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:27:54.073

您不能在`<p/>`标签内放置`<p/>`标签。您将得到以下标记：

```
<div id="check2">
  <p>  
    <span> 
      <b> Bold Line 1 </b>
    </span>
  </p>
  <p> This is line2 </p>
  <p> Should have index 1 </p>
</div> 
```

您可能想`<b/>`用 a`<span/>`替换以保留布局。

或者，如果您想要更改`bold`标签的属性，您可以使用 CSS。这不需要你弄乱布局。

```
.bold { text-weight: bold; } 
```

切换`bold`类：

```
<div id="check1">
  <p>  
    <span> 
      <!-- This is bold -->
      <span class="bold"> Bold Line 1 </span>
      <!-- This one is not bold -->
      <span> This is line2 </span>
    </span>
</p>
<p> Should have index 1 </p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:27:12.890

它与有效标记有关。您不允许使用嵌套`<p>`标签。将案例 2 更改为此，使其工作。

```
<div id="check2">
    <div>  
        <span> 
            <b> Bold Line 1 </b>
            **<p> This is line2 </p>**   //replaced <b> with <p>
        </span>
    </div>
    <p> Should have index 1 </p>
</div> 
```

我不知道它为什么会更改索引，但我知道标记是无效的。

# sql - 创建 T-SQL 用户组

> ID：11045490
> 
> 赞同：2
> 
> 时间：2012-06-15T06:13:23.670
> 
> 标签：sql, sql-server, tsql

我创建了一个名为 Student 和 Teacher 的用户，可以登录到数据库并且他们有一个默认数据库。有没有办法可以设置它，以便我可以添加多个用户，但他们都具有与组相同的权限。

```
Students
--> Bob
--> Jill
--> Steeve 
```

学生只能执行存储过程。

有没有办法做到这一点？

这比必须为我让学生执行的每个存储过程设置每个学生的所有权限要好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:28:26.793

术语是`role`。您创建角色，授予它适用的权限，然后将用户添加到该角色。

```
CREATE ROLE students
GRANT EXECUTE TO students

EXEC sp_addrolemember 'students', 'Bob'
EXEC sp_addrolemember 'students', 'Jill'
EXEC sp_addrolemember 'students', 'Steve' 
```

# php - 会话文件安全

> ID：11045494
> 
> 赞同：0
> 
> 时间：2012-06-15T06:13:58.153
> 
> 标签：php, zend-framework, session

我读[了这篇文章](http://www.jasperrooswinkel.com/unexpected-expiration-of-zend_auth-sessions/)，作者建议将会话文件存储在我们应用程序的不同位置，因为会话`/tmp/`不安全。这是每个人都遵循的最佳做法吗？将会话文件放到其他位置会有多大的安全性？

需要您对此提出宝贵意见。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:19:45.297

问题在于，如果您在*共享主机*上，则该`/tmp`目录通常由所有人共享，因此其他用户至少能够列出该`/tmp`目录中的所有文件。他们通常无权访问这些文件，但仅仅能够看到它们可能已经存在相当大的安全风险。因此，最好将您的临时数据存储在只有您可以访问的其他地方。

如果您是自己服务器的主人，这并不重要。

# css - 改进 960gs 自适应 CSS

> ID：11045496
> 
> 赞同：0
> 
> 时间：2012-06-15T06:14:14.473
> 
> 标签：css, 960.gs

我在我网站的所有页面中使用[960gs](http://adapt.960.gs/)自适应 CSS。我在所有页面中都有以下脚本：

```
<script>
var ADAPT_CONFIG = {
  path: '/css/960gs/',
  dynamic: true,
  range: [
    '0px    to 760px  = mobile.min.css',
    '760px  to 980px  = 720.min.css',
    '980px  to 1280px = 960.min.css',
    '1280px to 1600px = 1200.min.css',
  ]
};
</script>
<script src="/js/adapt.min.js" type="text/javascript"></script> 
```

我的问题是，当用户转到另一个页面时，用户可以看到适当的样式表的选择，特别是在使用 Mozilla Firefox 时。我的意思是，起初，布局占据了所有屏幕，不到一秒钟，布局就变成了合适的布局。我不知道如何描述这件事。但我想要的是提高它在加载适当样式表时的性能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:56:23.837

在 960.gs 网站上它指出

“Adapt.js 的一个潜在缺点是在获取新样式表时可能会出现短暂的无样式内容（将其视为 CSS 的“Ajax”）。我已尽我所能通过保持 CSS 文件较小来缓解这种情况(3 KB)。值得注意的是，这是针对具有多种解决方案的问题提出的而非规定的方法"

所以这是一个已知问题。我不得不说我不喜欢用 javascript 来做这件事，CSS 完全有能力处理不同的分辨率。如果您有基本的 CSS 并添加一些单独的属性来处理不同的分辨率，如下所示：

```
@media only screen and (min-width: 980px) and (max-width: 1280px) { <<<CSS Here>>> }
@media only screen and (min-width: 760px) and (max-width: 980px) { <<<CSS Here>>> }
@media only screen and (max-width: 767px) { <<CSS for mobile portrait>> }
@media only screen and (min-width: 480px) and (max-width: 767px) { <<CSS for Mobile landscape>> } 
```

# timestamp - 转换时间戳

> ID：11045499
> 
> 赞同：0
> 
> 时间：2012-06-15T06:14:32.657
> 
> 标签：timestamp, python-2.7

我是 python 新手。我需要将时间戳转换`2012-06-15T05:31:55Z`为秒。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:35:46.540

您正在尝试从该字符串中获取 unix 时间戳（即，自纪元以来的秒数），对吗？

然后基本上是这样的：

```
timeStr = "2012-06-15T05:31:55Z"
timestamp = time.mktime( time.strptime( timeStr, "%Y-%m-%dT%H:%M:%SZ" ) )

print timestamp

>>> 1339756315.0 
```

但是，您确实需要注意时区信息。此代码转换为*本地时间*。您可能还想转换为 GMT 或其他格式。

# sql - 此查询如何获取当月的第一天？

> ID：11045501
> 
> 赞同：3
> 
> 时间：2012-06-15T06:14:44.440
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
SELECT Dateadd(month, Datediff(month, 0, Getdate()), 0),
'First Day of Current Month' 
```

谁能告诉我这个查询如何获得当月的第一天？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T06:23:57.047

首先

Datediff(month, 0, Getdate()) 将给出从 1900 年开始的总月数

并从 1900 开始添加上述月份返回的月份，因此您将获得月份的第一个日期

例如：如果我们取当前月份，那么

Datediff(月, 0, Getdate()) = 1349 个月

如果您将 1349 个月添加到“1900/01/01”，您将获得本月的第一个日期“2012/06/01”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T06:33:24.387

[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)/[`DATEDIFF`](http://msdn.microsoft.com/en-us/library/ms189794)

此模式可用于实现许多不同的效果。一般模式是：

```
DATEADD(part,DATEDIFF(part,x,z),y) 
```

where`part`是日期的同一个组成部分，`x`通常`y`是常数，`z`是要调整的日期。

当`x`和`y`设置为*相同*的常数时，则具有消除元素`z`之外的所有组件的效果`part`，并将这些组件替换为 中的相应组件`y`。（`0`与 处理相同`1900-01-01T00:00:00`）

因此，`SELECT Dateadd(month, Datediff(month, 0, Getdate()), 0)`获取当前日期 ( `z`= `GetDate()`)，并将其超出`month`（`day`和所有时间组件）的部分替换为`1900-01-01T00:00:00`.

要开始今天，您将使用：

```
DATEADD(day,DATEDIFF(day,0,GETDATE()),0) 
```

* * *

这种模式变得更有趣的地方在于，它可以用于在不相等`x`时实现“抵消”效果。`y`例如，要获取上个月的最后一天，您可以执行以下操作：

```
DATEADD(month,DATEDIFF(month,'20010101',GETDATE()),'20001231') 
```

`x`在这里，和的实际值`y`并不重要。重要的是他们之间的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:37:19.250

我觉得你需要这个。它将为您提供当月第一天的名称和编号。

```
SELECT DatePart(DW,DATEADD(DD,-DAY(GetDate())+1,GetDate())) FirstDayNumber
     , DateName(DW,DATEADD(DD,-DAY(GetDate())+1,GetDate()))  FirstDayName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T10:48:35.693

选择 DATEADD(MM,datediff(month,0,getdate()),0) first_day_of_month

去

选择 DATEADD(mm,datediff(month,0,getdate())+1,0)-1 last_day_of_currentmonth

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-04T22:18:11.007

我使用了以下内容：

```
DATEADD(DAY, (-1 * DATEPART(DAY,GetDate()) + 1), GetDate() ) 
```

基本上，我们将负天数 + 1 添加到当前日期。

# javascript - 在应用程序框架中处理异步 Javascript 代码的最佳实践

> ID：11045505
> 
> 赞同：0
> 
> 时间：2012-06-15T06:15:23.833
> 
> 标签：javascript, ajax, javascript-framework, unobtrusive-javascript

我正在尝试构建一个 Web 应用程序，其中我在 Javascript 控制器类中抽象了逻辑。我想最小化该类之外的函数调用。

一旦进入我的应用程序的页面，每当用户执行任务时，我都希望在我的服务器上将先前的操作标记为已完成。所以我在我的 Javascript 类 eg 中调用了一个方法，该方法`EndTask(id)`又向服务器发送了一个 ajax 命令。不，我想等待对我的 ajax 命令的响应，然后再允许用户继续进行。

我还想确保我的 Javascript API 保持在最低限度，并且页面不必注册任何回调。

所以本质上，我想调用 just `EndTask()`，当函数返回时，页面会明白将任务标记为已完成的整个过程已经执行。

有没有办法在 Javascript 中做到这一点，而不将 ajax 调用标记为同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:26:55.620

可以在 JavaScript[中使异步函数同步](http://tobyho.com/2010/12/10/trampolines-in-javascript-and/ "Javascript 中的 Trampolines 和对更少嵌套回调的探索")，但要这样做，您需要使用当前仅受 Firefox 支持的[生成器。](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Generators "JavaScript 1.7 中的新功能 - MDN")

我建议您同步 AJAX 调用并使用 Firefox 中的生成器，因为它不支持同步`XMLHttpRequest`对象。但是请注意，这可能会导致代码冗余。

# python - 在scrapy中由xpath返回的空列表

> ID：11045510
> 
> 赞同：1
> 
> 时间：2012-06-15T06:15:48.170
> 
> 标签：python, list, xpath, scrapy

我正在研究scrapy，我正在尝试从网站收集一些数据，

**蜘蛛代码**

```
class NaaptolSpider(BaseSpider):
    name = "naaptol"
    domain_name = "www.naaptol.com"
    start_urls = ["http://www.naaptol.com/buy/mobile_phones/mobile_handsets.html"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        cell_matter = hxs.select('//div[@class="gridInfo"]/div[@class="gridProduct gridProduct_special"]')
        items=[]
        for i in cell_matter:
               cell_names = i.select('//p[@class="proName"]/a/text()').extract()
               prices = i.select('//p[@class="values"]/strong/text()').extract()
               item = ExampleItem()
               item['cell_name'] = cell_names
               item['price'] = prices
               items.append(item) 
        return [FormRequest(url="http://www.naaptol.com/faces/jsp/search/searchResults.jsp",
            formdata={'type': 'cat_catlg',
            'catid': '27',
            'sb' : '9,8',
            'frm' : '1',
            'max' : '15',
            'req': 'ajax'
            },
            callback=self.parse_item
            )]

def parse_item(self, response):
     hxs = HtmlXPathSelector(response) 
     cell_matter = hxs.select('//div[@class="gridInfo"]/div[@class="gridProduct gridProduct_special"]')
     for i in cell_matter:
               cell_names = i.select('//p[@class="proName"]/a/text()').extract()
               prices = i.select('//p[@class="values"]/strong/text()').extract()
               print cell_names
               print prices 
```

**结果：**

```
2012-06-15 09:38:36+0530 [naaptol] DEBUG: Crawled (200) <POST http://www.naaptol.com/faces/jsp/search/searchResults.jsp> (referer: http://www.naaptol.com/buy/mobile_phones/mobile_handsets.html)
[]
[] 
```

实际上我已经发布了表单来实现在 javascript 中的分页

在这里，我在 parse_item 方法中接收来自 parse 方法的响应，但是当我使用与 parse 方法中相同的 xpath 时，它返回一个空列表，如上，谁能告诉我为什么它返回一个空数组，以及我的代码有什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:54:19.913

响应为 JSON 格式：

```
{
  "prodList": [
    {
      "pid": "955492",
      "pnm": "Samsung Star 3 Duos",
      "mctid": "27",
      "pc": "5,650",
      "mrp": "6290",
      "pdc": "10",
      "pimg": "Samsung-Star-3-duos-1.jpg",
      "rt": "8",
      "prc": "1",
      "per": "Y",
      (...)
    },
    (...)
} 
```

为了解析它，你可以使用 python 的 json 模块。您正在尝试实现的示例如下：[Hrefs 的空列表通过 JavaScript onclick 函数实现分页](https://stackoverflow.com/questions/10975337/empty-list-for-hrefs-to-achieve-pagination-through-javascript-onclick-functions)。

# java - 为什么我不能以这种方式使用迭代器？

> ID：11045513
> 
> 赞同：0
> 
> 时间：2012-06-15T06:16:17.400
> 
> 标签：java

```
Iterator<String> iterator=...

//right way
for (Iterator<String> i = iterator; i.hasNext(); ){
    System.out.println(i.next());
}

//why can't?
for(String i:iterator){         
} 
```

**参考：**

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

[http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:19:33.023

你可以做的更紧凑：

```
for(String i:list){
} 
```

该语法仅适用于可迭代对象（和数组），而不适用于它们的迭代器（也不适用于枚举）。

为什么不？我不知道......对于“罕见”的情况，可能过于复杂/努力（在编译器实现中）。或者会导致麻烦的极端情况（例如一个 Iterable 也是一个迭代器，我认为有些人会制造这样的野兽）。

也许尝试像 Google Guava 这样的库来获得一些更方便的方式来使用迭代器、集合和朋友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:19:05.187

编译器检查 for 增强的语法并要求冒号后面的表达式返回一个实现 Iterable 接口的对象。迭代器没有实现它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T06:20:04.017

您只能对实现 Iterable 接口的对象使用 for 循环语法。

迭代器是不可迭代的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T06:19:13.503

```
 for(String i:list){
        //
    } 
```

# java - Hadoop日志文件分析

> ID：11045514
> 
> 赞同：0
> 
> 时间：2012-06-15T06:16:17.360
> 
> 标签：java, hadoop

我想创建一个 java 应用程序。可以部署在Hadoop上，目的如下：

*   我有很多来自各种服务器的较大日志文件（Tuxedo 日志、Websphere 日志和 IIS 日志）
*   我想分析这些大文件以生成报告，其中指出来自 Tux 的许多错误，来自 Websphere 的许多是错误/警告等

所以我现在需要帮助，我有限的 Hadoop 知识

*   大多数地图减少算法。适用于相同类型的文件，在我的情况下，日志文件来自各种来源（Tux、Websphere、IIS 等）
*   在这种情况下如何设计我的 map() 和 reduce() 函数
*   如何存储日志报告（例如：来自 Tux 的错误/警告，来自 Websphere 的错误/警告/信息）组合等

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:01:04.530

apache flume 是这种情况的答案

# android - 如何在 android eclipse 上的 tabhost 中实现共享偏好概念

> ID：11045515
> 
> 赞同：2
> 
> 时间：2012-06-15T06:16:26.000
> 
> 标签：android, eclipse, android-tabhost

我是android的自学者，

假设一个 android 程序将在 textview 上显示一些结果。谁能告诉我如何在下一个屏幕上的选项卡主机的第一个选项卡上显示该答案。如何实现这一点？

据我所知，我用谷歌搜索并发现“共享偏好”概念将有助于解决这个问题。我是对的吗？

我找到了一些样本，但它们并没有让我清楚，谁能给我一些带有屏幕图像的例子。

感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:17:58.437

这是一个小示例，无论您在第一个选项卡中输入什么，它都会显示在第二个选项卡上：

主班

```
public class CheckkActivity extends TabActivity {
 /** Called when the activity is first created. */
  @Override      
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Resources res = getResources();                 
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    intent = new Intent().setClass(this, NewActivity.class);

    spec = tabHost.newTabSpec("first").setIndicator("First")
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, SecondActivity.class);
    spec = tabHost.newTabSpec("second").setIndicator("Second")
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);

}
} 
```

新活动

```
 public class NewActivity extends Activity{
    EditText get;
    Button save;
     SharedPreferences sharedPreferences;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.next);
        get=(EditText)findViewById(R.id.next);
        save=(Button)findViewById(R.id.button1);

          save.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(get.getText().toString().equalsIgnoreCase("")){
                    Toast.makeText(getApplicationContext(), "enter something", Toast.LENGTH_SHORT).show();
                }else{
                sharedPreferences=PreferenceManager.getDefaultSharedPreferences(NewActivity.this);
                   Editor editor1 = sharedPreferences.edit();
                   editor1.remove("answer");
                   editor1.commit();
                 sharedPreferences=PreferenceManager.getDefaultSharedPreferences(NewActivity.this);
                  Editor editor = sharedPreferences.edit();
                  Log.i("set value",""+get.getText().toString());
                  editor.putString("answer",get.getText().toString());
                  editor.commit();}
            }
        });

    }

   } 
```

第二活动

```
 public class SecondActivity extends Activity{
TextView set;
SharedPreferences sharedPreferences;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    set=(TextView)findViewById(R.id.second);

}

     @Override
     protected void onResume() {
// TODO Auto-generated method stub
sharedPreferences = PreferenceManager
        .getDefaultSharedPreferences(SecondActivity.this);
String answer= sharedPreferences.getString("answer", "");
Log.v("get value",""+answer);
if(answer.equalsIgnoreCase(null)){
    set.setText("nothing to display");
}else{
set.setText(answer);
}
super.onResume();
     }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:25:02.877

您必须将答案保存在第一个选项卡上的共享首选项中，如下所示：

```
 SharedPreferences sharedPreferences;
            sharedPreferences=PreferenceManager.getDefaultSharedPreferences(YourActivityName.this);
            Editor editor = sharedPreferences.edit();
            editor.putString("your_tag",your value);
            editor.commit(); 
```

然后在下一个活动中获取值：

```
 SharedPreferences sharedPreferences;
             sharedPreferences = PreferenceManager
        .getDefaultSharedPreferences(NextActivity.this);
    String answer= sharedPreferences.getString("your_tag", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:39:19.300

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
    </LinearLayout>
  </TabHost> 
```

下一个.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/next"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="save" />

</LinearLayout> 
```

第二个.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/second"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

# c# - 为缓存创建密钥

> ID：11045519
> 
> 赞同：0
> 
> 时间：2012-06-15T06:16:53.177
> 
> 标签：c#, linq

我想编写为缓存对象生成密钥的方法。这是我的功能：

```
public static string GenerateKeyForCache(string jobName, params object[] keys )
        {
            var generatedKey = keys.Aggregate(string.Empty, (current, key) => current + (key + "-"));
            return jobName + "-" + new string(generatedKey.Take(generatedKey.Length - 1).ToArray());
        } 
```

此代码为缓存生成密钥，例如我们有以下调用：

```
CacheUtils.GenerateKeyForCache("JobName", "1","2","3"); 
```

该方法生成以下密钥：`"JobName-1-2-3"`。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:41:16.353

为什么不只使用[String](http://msdn.microsoft.com/en-us/library/system.string_members%28v=vs.90%29)方法？

```
public static string GenerateKeyForCache(string jobName, params string[] keys)
{
    return String.Format("{0}-{1}", jobName, String.Join("-", keys));
} 
```

不需要`Aggreagte`或`Take`...

把事情简单化

# asp.net - Ms deploy 发布不需要的文件，例如设计器文件

> ID：11045525
> 
> 赞同：0
> 
> 时间：2012-06-15T06:17:57.930
> 
> 标签：asp.net, msbuild, msdeploy

我正在使用 ms deploy 通过命令行发布我的 Web 应用程序，

我使用了以下命令

```
<Exec Command="msdeploy -verb:sync 
    -source:contentPath='D:\Impetus\Parmeshthee\Cruise_Control_Setup_Parmeshthee\SVNProjects\QATV2\QAT\' 
    -dest:contentPath='D:\Impetus\Parmeshthee\Cruise_Control_Setup_Parmeshthee\Projects_Publish\QATDemo'" 
    ContinueOnError="false" 
    WorkingDirectory="C:\Program Files (x86)\IIS\Microsoft Web Deploy V2"
/> 
```

但它只是从源目录复制所有文件和文件夹。

我不想将 Designer.cs 页面发送到发布文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:32:34.573

我不认为 msdeploy.exe 只是为了部署而构建。

我最好的猜测是，您可以先创建一个包，然后使用 msdeploy 部署该包。 [http://forums.iis.net/t/1171736.aspx](http://forums.iis.net/t/1171736.aspx)

或者以某种方式在您的机器上编译，因此输出只是 .aspx 文件和二进制文件，然后使用 msdeploy

# java - 如何在java中获取两个日期之间的天数？

> ID：11045526
> 
> 赞同：9
> 
> 时间：2012-06-15T06:18:01.247
> 
> 标签：java, date

> **可能的重复：**
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

如何在 Java 中获取两个日期之间的天数？

最好的方法是什么？这是我得到的，但不是最好的：

```
public static ConcurrentHashMap<String, String> getWorkingDaysMap(int year, 
    int month, int day){
        int totalworkingdays=0,noofdays=0;
        String nameofday = "";
        ConcurrentHashMap<String,String> workingDaysMap = 
            new ConcurrentHashMap<String,String>();
        Map<String,String> holyDayMap = new LinkedHashMap<String,String>();
        noofdays = findNoOfDays(year,month,day);

        for (int i = 1; i <= noofdays; i++) {
            Date date = (new GregorianCalendar(year,month - 1, i)).getTime();
            // year,month,day
            SimpleDateFormat f = new SimpleDateFormat("EEEE");
            nameofday = f.format(date);

            String daystr="";
            String monthstr="";

            if(i<10)daystr="0";
            if(month<10)monthstr="0";

            String formatedDate = daystr+i+"/"+monthstr+month+"/"+year;

            if(!(nameofday.equals("Saturday") || nameofday.equals("Sunday"))){
                workingDaysMap.put(formatedDate,formatedDate);
                totalworkingdays++;
            }
        }

        return workingDaysMap;
    }

public static int findNoOfDays(int year, int month, int day) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(year, month - 1, day);
        int days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
        return days;
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-15T06:28:30.380

我通常会这样做：

```
final long DAY_IN_MILLIS = 1000 * 60 * 60 * 24;

int diffInDays = (int) ((date1.getTime() - date2.getTime())/ DAY_IN_MILLIS ); 
```

不需要外部库，而且很简单

* * *

更新：刚刚看到你也想要“日期”，类似的方法适用：

```
//assume date1 < date2

List<Date> dateList = new LinkedList<Date>();
for (long t = date1.getTime(); t < date2.getTime() ; t += DAY_IN_MILLIS) {
  dateList.add(new Date(t));
} 
```

当然，使用 JODA time 或其他 lib 可能会让您的生活更轻松，尽管我不认为当前的方式难以实现

* * *

更新：重要提示！这仅适用于没有夏令时或类似调整的时区，或者您对“天数差异”的定义实际上意味着“24 小时单位的差异”

# php - Javascript 文本框货币输入

> ID：11045534
> 
> 赞同：1
> 
> 时间：2012-06-15T06:18:56.643
> 
> 标签：php, javascript, mysql

我试图让我的文本框输入货币格式。我做到了，但是当我将值插入到我的数据库中时，值会发生变化。当我输入 10000 时，它会更改 10,000。（到目前为止一切顺利。）但是当我将该值插入数据库时​​，该值变为 10。我真的很困惑。

这是我的脚本。我用的是php，mysql，字段类型是`float`

```
 <?php include('header.php'); ?>
<?php
    if(isset($_POST['simpan']))
    {
        $nama           = htmlentities(addslashes($_POST['nama']));
        $sim_wajib      = $_POST['sim_wajib'];
        $sim_pokok      = $_POST['sim_pokok'];
        $sim_sukarela   = $_POST['sim_sukarela'];
        $sim_wpinjam    = $_POST['sim_wpinjam'];
        $shu            = $_POST['shu'];
        $total          = $sim_wpinjam + $shu;

        if($nama != '' && $sim_wajib != '' && $sim_pokok != '' && $sim_sukarela != '' && $sim_wpinjam != '' && $shu != '' )
        {
            $sql     = "INSERT INTO simpanan_tbl";
            $sql    .= "(nama, sim_wajib, sim_pokok, sim_sukarela, sim_wajibpinjam, shu, jumlah)";
            $sql    .= "VALUES('$nama','$sim_wajib','$sim_pokok','$sim_sukarela','$sim_wpinjam','$shu','$total')";
            $query   = mysql_query($sql) or die(mysql_error());
            echo '<script type="text/javascript">alert("Data telah masuk!");document.location="manage_simpanan.php";</script>';
        }
        else
        {
            echo '<script type="text/javascript">alert("Kolom tidak boleh ada yang kosong!");</script>';
        }
    }
?>
<div id="rounded_add">
    <script type="text/javascript">
        function numberFormat(nr)
        {
            //remove the existing
            var regex = /,/g;
            nr        = nr.replace(regex,'');

            //split it into 2 parts
            var x   = nr.split(',');
            var p1  = x[0];
            var p2  = x.length > 1 ? ',' + x[1] : '';
            //match group of 3 numbers (0-9) and add ',' between them
            regex   = /(\d+)(\d{3})/;
            while(regex.test(p1))
            {
                p1 = p1.replace(regex, '$1' + ',' + '$2');
            }
            //join the 2 parts and return the formatted number
            return p1 + p2;
        }
    </script>
    <form method="post" name="form1">
        <table id="add_simpan" class="add">
            <tr>
                <td>No Anggota</td>
            </tr>
            <tr>
                <td><input type="text" id="" name="" class="textbox"></td>
            </tr>
            <tr>
                <td>Nama</td>
            </tr>
            <tr>
                <td><input type="text" id="nama" name="nama" class="textbox_left"></td>
            </tr>
            <tr>
                <td>Simpanan Wajib</td>
            </tr>
            <tr>
                <td><input type="text" id="sim_wajib" name="sim_wajib" class="textbox"></td>
            </tr>
            <tr>
                <td>Simpanan Pokok</td>
            </tr>
            <tr>
                <td><input type="text" id="sim_pokok" name="sim_pokok" class="textbox"></td>
            </tr>
            <tr>
                <td>Simpanan Suka Rela</td>
            </tr>
            <tr>
                <td><input type="text" id="sim_sukarela" name="sim_sukarela" class="textbox"></td>
            </tr>
            <tr>
                <td>Simpanan Wajib Pinjam</td>
            </tr>
            <tr>
                <td><input type="text" id="sim_wpinjam" name="sim_wpinjam" class="textbox" onkeyup="this.value = numberFormat(this.value);"></td>
            </tr>
            <tr>
                <td>SHU</td>
            </tr>
            <tr>
                <td><input type="text" id="shu" name="shu" class="textbox" onkeyup="this.value = numberFormat(this.value);"></td>
            </tr>
            <tr>
                <td><input type="submit" value="Simpan" id="simpan" name="simpan" class="button blues"></td>
            </tr>
        </table>
    </form>
</div><!-- END OF ROUNDED_ADD -->
<?php include('footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:31:30.607

我不认为 javascript 不是这里的罪魁祸首。上面显示的代码只是为数字插入逗号。当插入到数据库中时，该字段将为浮点数，将自动将值转换为浮点数或整数并删除剩余的值。如果您可以发布 DB 的插入代码，问题也可以很容易地解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:35:51.347

只是一个提示。

不要将货币格式保存在数据库中，始终只保存数字（int，float），以便您可以在需要时轻松进行一些数学处理。

对于货币格式，仅将其用于显示目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:49:26.363

如果您*必须*在文本框中设置会计样式格式，我建议您在每个文本框旁边设置一个带有原始数值的隐藏字段。您可以在“nr = nr.replace(regex,'');”之后轻松地在 js 函数中添加几行 部分将现在剥离的值复制到隐藏字段。为此，您必须命名每个文本框并将名称传递给 numberFormat 函数，以便将其保存到正确的隐藏输入中。然后，当提交表单时，保存隐藏字段中的值，而不是打开的文本框。

或者，让您的提交按钮触发一个函数来扫描所有文本字段并删除任何格式，然后将表单作为函数的一部分提交。

顺便说一句，将 10,000 作为一万插入浮点字段会将其修剪为 10。除非您使用逗号作为小数点（我认为法国人会这样做？），否则您保存的数据不正确。

# android - 使用正则表达式突出显示短信 android 中的文本

> ID：11045537
> 
> 赞同：0
> 
> 时间：2012-06-15T06:19:16.170
> 
> 标签：android, regex

我想要一个正则表达式来突出显示短信中的文本（下划线），就像安卓手机中的默认短信应用一样。
我已经测试了一些匹配的案例：

```
 Number: 06464, +86786, +84 879, ff765756765thw        /*more than 5 digits */
   Web address: abc.com, http://google.com
   Email address: abc@gmail.com
   Date:   2012.12.02 
```

![突出显示文本](../Images/f0a72709c22543e252ad05ea59dcb4b8.png)
我尝试在 android OS 源代码中搜索，但没有帮助。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:28:24.657

你用过`android:autoLink="web|phone|email"`哪个`TextView`显示你的号码或网址或电子邮件？但是对于您可能想要实施正则表达式的日期！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:55:36.623

感谢 Sana，根据您的提示，我在[Pattern.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Patterns.java)
中找到了所有东西 例如：
- 电话：

```
public static final String PHONE =
// sdd = space, dot, or dash
"(\\+[0-9]+[\\- \\.]*)?" // +<digits><sdd>*
        + "(\\([0-9]+\\)[\\- \\.]*)?" // (<digits>)<sdd>*
        + "([0-9][0-9\\- \\.][0-9\\- \\.]+[0-9])"; // <digit><digit|sdd>+<digit> 
```

-电子邮件：

```
public static final String EMAIL_ADDRESS = "[a-zA-Z0-9\\+\\.\\_\\%\\-\\+]{1,256}"
        + "\\@"
        + "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}"
        + "("
        + "\\."
        + "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25}" + ")+"; 
```

# visual-studio - Windows Phone 分析 - 解析日志失败

> ID：11045540
> 
> 赞同：5
> 
> 时间：2012-06-15T06:19:41.053
> 
> 标签：visual-studio, windows-phone-7, memory-profiling

我是内存分析 Windows Phone 应用程序的新手。在我停止内存分析会话后，Visual Studio 尝试解析日志，但失败并显示消息“解析日志文件失败”。我看到 %temp% 目录中的“ProfilerLog_”文件并收到以下消息：

```
System.ArgumentException: Item has already been added. Key in dictionary: '226295856'  Key being added: '226295856'
   at System.Collections.Hashtable.Insert(Object key, Object nvalue, Boolean add)
   at System.Collections.Hashtable.Add(Object key, Object value)
   at SilverlightProfiler.Internal.CFAdapter.HandleEvent(UInt32 eventID, ProbeMarkerType eventMarkerType, Double clockTime, Double threadTime, UInt32 threadID, ThreadType threadType, List`1 eventInfoList)
   at SilverlightProfiler.Internal.WPInputAdapter.HandleEvent(ProbeEventSource eventSource, UInt32 eventID, ProbeMarkerType eventMarkerType, Double clockTime, Double threadTime, UInt32 threadID, ThreadType threadType, List`1 eventInfoList)
   at SilverlightProfiler.Internal.WPInputAdapter.HandleEvent(BinaryReader input, Int64 endOffset, ThreadStreamInfo threadStreamInfo)
   at SilverlightProfiler.Internal.WPInputAdapter.HandleEvents()
   at SilverlightProfiler.Internal.WPInputAdapter.ParseLogFile(BinaryReader input, String logFilename, AgLogFileHeader header)
   at SilverlightProfiler.Internal.WPInputAdapter.Parse(Object data)
   at SilverlightProfiler.Internal.ViewModel.AnalyzingViewModel.startAnalyzing() 
```

可能有人遇到过这个问题并找到一些解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T13:01:12.687

我也有这个问题。我从我的临时文件夹中删除了所有文件，并且分析再次开始工作。不确定这是否只是巧合，但也许值得一试。

# algorithm - 决定点在矩形的哪个部分

> ID：11045544
> 
> 赞同：0
> 
> 时间：2012-06-15T06:20:24.380
> 
> 标签：algorithm

我有一个已知宽度和高度的矩形。现在对角线划分矩形以形成四个三角形。现在假设有一个点 p(m,n)，我必须确定该点位于四个三角形中的哪个三角形中。请给我一些好的算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:31:42.190

好吧，您知道对角线的线方程（因为您有两个点）。两条对角线都定义了两个半平面。

对角线1方程：

```
A1 * x + B1 * y + C1 = 0 
```

对角线2方程：

```
A2 * x + B2 * y + C2 = 0 
```

它成为了：

代`A1 * m + B1 * n + C1`入找出第一个对角线所在的半平面。如果数字是`< 0`，则它位于一个半平面内，如果是，则它位于另一个半平面`> 0`内。

代`A2 * m + B2 * n + C2`入找出第二条对角线所在的半平面。如果数字是`< 0`，则它位于一个半平面内，如果是，则它位于另一个半平面`> 0`内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:51:44.457

有趣的问题。我认为这个算法应该可以做到，但我还没有尝试过。假设矩形为 AxB，点为 p(m,n)。

```
int section = (m * B < n * A) * 2 + (m > A / 2 || n > B / 2); 
```

然后，变量部分应该是 0 到 3 之间的值，具体取决于点所在的位置。这些部分称为：

```
 0  
2   1
  3 
```

如果您希望以另一种方式命名这些部分，请随时调整算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:55:02.617

if((x * height < y * width) || ( x*width < y*height )) { test = 1; } 其他 { 测试 = 0; } if((x > 宽度 / 2 && y > 高度 / 2)) { test1=1; } 其他 { test1=0; } int section = (test) * 2 + (test1);

```
 switch(section)
                {
                case 0:
                    Log.d("ABSAR","UP button");

                    break;
                case 1:
                    Log.d("ABSAR","RIGHT button");

                    break;
                case 2:
                    Log.d("ABSAR","LEFT button");

                    break;
                case 3:
                    Log.d("ABSAR","DOWN button");

                    break;
                } 
```

`如果点P（x，y）和尺寸宽度*高度的矩形那么上面的代码工作正常......

# java - 多个 NIO 反应堆，还是只有一个？

> ID：11045545
> 
> 赞同：1
> 
> 时间：2012-06-15T06:20:30.083
> 
> 标签：java, nio, reactor

我目前一直在阅读 Java NIO，过去我自己也做了一些实现。但是，我从来没有真正考虑过服务器的性能——这看起来很傻，而且确实如此。我听人说单线程反应器就可以了，但我真的很想利用我拥有的内核。

因为我要实现的是一个游戏，所以也有一些游戏逻辑线程，所以它不能占用很多线程——如果有的话，它可能只有两个。

这是我想出的情节：

*   高优先级反应堆
    1.  接受连接
    2.  处理游戏的登录过程（客户端发送数据包，服务器进程，服务器发送响应数据包，这里没有大量数据）
    3.  按需分发资源文件数据（游戏的构建是为了服务器发送客户端存储在缓存中的数据，该缓存包含游戏的几乎所有资源。大部分都是在加载游戏时完成的，但仍然会发生很多事情在后台播放）
*   标准反应器
    1.  读取并响应游戏中的数据包；这些通常很小，但数量很多，因为玩家所做的几乎所有事情都以数据包的形式分发，我想很好地扩展它以处理大约 200 名玩家）

目标：

*   适合约 200-300 名玩家
*   快速响应游戏数据包
*   快速分发上述文件数据
*   快速接受连接

此外，如果您熟悉它，游戏就是 RuneScape。我的目标是模拟 RuneScape 的官方服务器软件，因此我的可以与他们的客户之一一起使用。这是一种流行的做法——参见[www.runelocus.com](http://www.runelocus.com)、[www.rune-server.org](http://www.rune-server.org)，即

我的问题是：你认为这会是一个好的实现吗？仅仅拥有一个反应堆是一个更好的主意吗？还是我应该使用更多？我猜接收和发送的数据大致相同，可能在高优先级反应堆上多一点（这就是为什么它是高优先级的。）

此外，当我将其定义为高优先级时，我实际上并没有将其优先于标准反应器。它只是处理被认为比游戏包更重要的任务。

非常感谢任何反馈:) 如果需要任何澄清/解释，请让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:26:15.313

正如我在 Rune-Server 上多次解释的那样，这是一种理想的方法。它对 RuneScape 协议（可能还有其他基于循环的游戏）非常有利。

**最终目标是避免和减少将网络帧编码/解码为数据包对象并将它们排队以供以后处理的开销。**如果您可以安全地直接从缓冲区中读取数据，同时遵守 RuneScape 的基于循环的处理并且无需任何同步，那么您就可以从该任务中消除尽可能多的开销。

第二个高优先级反应器的目的不是出于性能原因 - 它是为了减少接受客户端和登录过程的延迟。它也适用于缓存更新，它绝对需要尽可能少的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:36:10.673

> 你认为这将是一个很好的实施吗？

对于 100 - 1000 个连接，我会为每个连接模型使用一个/两个线程，并使用阻塞 NIO 或旧 IO。这通常更容易实现，并且对于这个数量的连接几乎同样有效。如果你有免费的核心，你可以做得越简单越好。显然，这个模型可以毫无问题地使用你所有的内核。;)

# java - 如何删除jtable中的所有行？

> ID：11045547
> 
> 赞同：0
> 
> 时间：2012-06-15T06:20:37.387
> 
> 标签：java, swing, jtable, awt, jpanel

*我有一个问题要删除表中的所有行，我有一个具有 jtable 的 Jpanel，当我选择行时，它将显示相应的行值，当我单击同一面板上的另一个按钮时，意味着它，将重新加载表，这是问题所在，我遇到了异常*

```
Exception in thread "AWT-EventQueue-0"

    java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
        at java.util.Vector.elementAt(Unknown Source)
        at javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)
        at javax.swing.JTable.getValueAt(Unknown Source)
        at Testsample$16.valueChanged(Testsample.java:1516) 
```

*我几乎使用所有方法来删除表中的行现在我使用这种方法*

```
while (table.getRowCount() > 0) {
                    ((DefaultTableModel) table.getModel()).removeRow(0);
                } 
```

*注意：我在这个示例应用程序中使用了两个面板，当所有控件都相同时，一切正常，如果我在第二个面板中设置表格意味着，它会抛出异常，知道如何解决这个问题*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:23:20.930

试试这个代码..

```
DefaultTableModel dm = (DefaultTableModel)table.getModel();
dm.getDataVector().removeAllElements(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T16:28:06.577

您看到的异常来自 Swing 线程 (AWT-EventQueue-0)。发生异常是因为 JTable 正在绘制自身（在 Swing 线程上），同时您正在修改其他线程上的 DefaultTableModel。

不要那样做！对表模型的所有更改都必须在 Swing Thread 上发生。

参见[Swing Threads 中的最后一句话](http://java.sun.com/products/jfc/tsc/articles/threads/threads3.html)

使用`EventQueue.invokeLater(new Runnable() {...});`或类似的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T12:37:03.180

这是我的方法：

```
DefaultTableModel model=(DefaultTableModel)table.getModel();
            int rc= model.getRowCount();
            for(int i = 0;i<rc;i++){
                model.removeRow(0);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T11:46:36.987

我使用此代码

```
dtm_vendor = new DefaultTableModel();
jTable_vendor.setModel(dtm_vendor); 
```

# debugging - 使用 gdb 在 BSD 上调试分支

> ID：11045548
> 
> 赞同：1
> 
> 时间：2012-06-15T06:20:48.967
> 
> 标签：debugging, gdb, freebsd, bsd

目前 GDB 在 fork 之后在子进程之后存在问题。我在网上看到的一个解决方法是使用以下指令补丁：-

`call 0x8048740 <fork@plt>`

如下 ：-

```
gdb$ set *(0x08048d1f+1)=0x90909090
gdb$ set *(0x08048d1f)=0x9090c033 
```

这样做会将说明设置为：-

```
xor    eax,eax
nop    
nop    
nop 
```

结果，应该作为子级执行的代码由父级执行，并且我能够对其进行调试。但是，每次我必须调试过程时都输入两个步骤语句太乏味了。每次我附加到进程时，有什么方法可以指示 gdb 修补这些指令？某种自动化，尽管它可能是有限的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:33:51.217

有几种方法可以扩展 GDB 命令列表，使用[gdb extensions](http://sourceware.org/gdb/onlinedocs/gdb/Extending-GDB.html)。Python 脚本支持是 GDB 自 7.1 版本以来的最新发展。但是，看看您的要求，您不需要太多的脚本。您可以使用最简单的`define`命令。

前段时间我回答了一个[类似的问题](https://stackoverflow.com/questions/8820788/how-do-i-make-gdb-call-a-given-function-several-times-automatically/8821137#8821137)，您可以使用相同的方法。

# c - C中行为的大小不一致

> ID：11045551
> 
> 赞同：4
> 
> 时间：2012-06-15T06:21:04.313
> 
> 标签：c, arrays, sizeof

> **可能重复：**
> [C 中 Sizeof 的行为](https://stackoverflow.com/questions/6813473/behaviour-of-sizeof-in-c)

有人可以解释为什么以下 C 代码的行为如此：

```
#include <stdio.h>

int sizeof_func(int data[]) {
    return sizeof(data);
}

int main(int argc, char *argv[]) {
    int test_array[] = { 1, 2, 3, 4 };
    int array_size = sizeof(test_array);
    printf("size of test_array : %d.\n", array_size);
    int func_array_size = sizeof_func(test_array);
    printf("size of test_array from function : %d.\n",
        func_array_size);
    if (array_size == func_array_size) {
        printf("sizes match.\n");
    } else {
        printf("sizes don't match.\n");
    }
    return 0;
} 
```

我预计输出是：

```
size of test_array : 16.
size of test_array from function : 16.
sizes match. 
```

但相反，我得到了：

```
size of test_array : 16.
size of test_array from function : 4.
sizes don't match. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T06:22:32.750

当您将数组作为函数参数传递时，它会衰减为指向其第一个元素的指针。
`sizeof`in 函数返回指针的大小而不是数组。
同时，`sizeof`在`main()`数组的返回大小。当然，两者并不相同。

如果您想知道函数中数组的大小，则必须将其作为单独的参数传递给函数。

```
int sizeof_func(int data[], size_t arrSize);
                            ^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T06:26:14.067

您的功能相当于：

```
int sizeof_func(int *data) {
    return sizeof(data);
} 
```

您的函数无法知道传递给它的数组的大小，因为实际上传递给它的只是指向数组第一个元素的指针。您在 32 位系统上，所以`sizeof(int *)`是 4。

事实上，`sizeof(...)`是一个在编译时被评估的常量，所以你`sizeof_func`永远无法工作。相反，人们在 C 中经常做的是用指针传递一个整数，如下所示：

```
int function_that_operates_on_array(int *data, int size)
{
    // do stuff with data[0] through data[size-1]
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T06:27:24.420

```
 int test_array[] = { 1, 2, 3, 4 };
   int array_size = sizeof(test_array);
   printf("size of test_array : %d.\n", array_size); 
```

在这里，编译器将`test_array`其视为一个数组（它在编译时知道数组的实际大小），这就是为什么您会得到`test_array`.

```
 int func_array_size = sizeof_func(test_array);
   printf("size of test_array from function : %d.\n",
   func_array_size); 
```

但是，如果您将数组传递给函数，编译器会将其视为指向数组第一个元素的指针（在编译时，您的函数不知道数组的大小，因为您可以使用任何数组调用您的函数你之前已经声明过）这就是为什么你得到一个指针的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T06:49:11.107

你对功能的定义是，

int sizeof_func(int data[])

{

返回大小（数据）；

}

这对您的情况不正确，因为您在函数调用中将指向数组第一个元素的指针作为参数传递。例如 int func_array_size = sizeof_func(test_array);

修改您的函数定义，如下所示，

int sizeof_func(int *data, int arraysize)

{

```
 return (sizeof(data) * arraysize); 
```

}

并将您的函数调用修改为 int func_array_size = sizeof_func(test_array, 4);

这应该有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T07:01:34.063

您需要注意两个 C 语言问题。

1) sizeof 运算符的行为。它仅适用于具有静态大小的数组。如果你有`sizeof(test_array)`，那么它将适用于真正的数组：

```
int test_array[]  = { 1, 2, 3, 4 }; 
int test_array[4] = { 1, 2, 3, 4 }; // completely equivalent
char test_array[] = "something"; 
```

当您将指针传递给它时，它将*不起作用。*如果这样做，您将获得指针的大小。以下情况将不起作用，它们将打印 4（假设为 32 位）：

```
int*  pointer = test_array;
char* pointer = "something";
printf("%d", sizeof(pointer)); 
```

* * *

2) 函数参数的行为。这些在 C 中有一种奇怪的语法。它们可以被声明为看起来像数组，但它们不是：

```
void func (int* x);    // x is a pointer
void func (int x[]);   // x is a pointer
void func (int x[10]); // x is a pointer 
```

上面三个是等价的，后面两个只是“语法糖”，用来说明程序员的意图。

在所有这些情况下，任何调用 sizeof(x) 的尝试都会给出指针的大小。

# java - 将域对象标记为已归档（写保护）

> ID：11045558
> 
> 赞同：0
> 
> 时间：2012-06-15T06:21:48.883
> 
> 标签：java, html, model-view-controller, design-patterns, grails

我有一个简单的域对象层次结构。所有人都知道它的孩子和唯一的父母。没有周期。

我让我的领域类实现接口

```
interface IArchivable {
   boolean isArchived()
} 
```

其中子对象将此调用重定向到父对象。根对象将具有随时更改的（数据库）属性。

使用*Groovy/Grails*（或为了便于通用性*model-view-controller*）：

*   写保护整个层次结构的最佳做法是什么？*（通过Groovys MetaProgramming*或*AOP*拦截控制器更新方法？）
*   如何轻松编写保护 html 页面输入、选择、......？
*   假设我的模型更复杂：一个孩子有几个父母，有几个周期。那我怎么能实现这个功能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:19:23.453

查看[grails 域事件](http://www.grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)。您可以使用 onLoad（或在更新时，取决于您的业务）事件拦截您的域的加载，并将它们设为只读调用 grails[丢弃方法](http://www.grails.org/doc/latest/ref/Domain%20Classes/discard.html)

# javascript - Google Maps API v3 - 不同缩放级别上的不同标记/标签

> ID：11045562
> 
> 赞同：8
> 
> 时间：2012-06-15T06:22:07.900
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我想知道谷歌是否有可能在不同的缩放级别上查看不同的标记。

例如，在缩放级别 1 上，我想要一个标记在中国上方，标签上写着“5”。当用户放大时，假设在缩放级别 4 上，我希望之前的标记和标签消失。我想有 5 个新的标记/标签，每个在中国不同的城市都说“1”。所以中国会说一个数字，中国所有的城市都会说数字加起来就是中国的数字。

我在这里试图弄清楚的关键概念是如何根据缩放级别隐藏标记和标签。对我来说一个限制是我目前住在谷歌被审查的中国，所以很多在线文档对我来说都是被审查的，包括许多谷歌的文档。

到目前为止，这是我的代码

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>TM China</title> 
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
   .labels {
     color: red;
     background-color: white;
     font-family: "Lucida Grande", "Arial", sans-serif;
     font-size: 10px;
     font-weight: bold;
     text-align: center;
     width: 60px;     
     border: 2px solid black;
     white-space: nowrap;
   }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDV0lcdK7C2GHbQAmdkBID70Uppuf-D030&sensor=true">
    </script>
    <script type="text/javascript">

    eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('7 m(a){2.3=a;2.8=V.1E("1u");2.8.4.C="I: 1m; J: 1g;";2.k=V.1E("1u");2.k.4.C=2.8.4.C}m.l=E 6.5.22();m.l.1Y=7(){n c=2;n h=t;n f=t;n j;n b;n d,K;n i;n g=7(e){p(e.1v){e.1v()}e.2b=u;p(e.1t){e.1t()}};2.1s().24.G(2.8);2.1s().20.G(2.k);2.11=[6.5.9.w(V,"1o",7(a){p(f){a.s=j;i=u;6.5.9.r(c.3,"1n",a)}h=t;6.5.9.r(c.3,"1o",a)}),6.5.9.o(c.3.1P(),"1N",7(a){p(h&&c.3.1M()){a.s=E 6.5.1J(a.s.U()-d,a.s.T()-K);j=a.s;p(f){6.5.9.r(c.3,"1i",a)}F{d=a.s.U()-c.3.Z().U();K=a.s.T()-c.3.Z().T();6.5.9.r(c.3,"1e",a)}}}),6.5.9.w(2.k,"1d",7(e){c.k.4.1c="2i";6.5.9.r(c.3,"1d",e)}),6.5.9.w(2.k,"1D",7(e){c.k.4.1c=c.3.2g();6.5.9.r(c.3,"1D",e)}),6.5.9.w(2.k,"1C",7(e){p(i){i=t}F{g(e);6.5.9.r(c.3,"1C",e)}}),6.5.9.w(2.k,"1A",7(e){g(e);6.5.9.r(c.3,"1A",e)}),6.5.9.w(2.k,"1z",7(e){h=u;f=t;d=0;K=0;g(e);6.5.9.r(c.3,"1z",e)}),6.5.9.o(2.3,"1e",7(a){f=u;b=c.3.1b()}),6.5.9.o(2.3,"1i",7(a){c.3.O(a.s);c.3.D(2a)}),6.5.9.o(2.3,"1n",7(a){f=t;c.3.D(b)}),6.5.9.o(2.3,"29",7(){c.O()}),6.5.9.o(2.3,"28",7(){c.D()}),6.5.9.o(2.3,"27",7(){c.N()}),6.5.9.o(2.3,"26",7(){c.N()}),6.5.9.o(2.3,"25",7(){c.16()}),6.5.9.o(2.3,"23",7(){c.15()}),6.5.9.o(2.3,"21",7(){c.13()}),6.5.9.o(2.3,"1Z",7(){c.L()}),6.5.9.o(2.3,"1X",7(){c.L()})]};m.l.1W=7(){n i;2.8.1r.1q(2.8);2.k.1r.1q(2.k);1p(i=0;i<2.11.1V;i++){6.5.9.1U(2.11[i])}};m.l.1T=7(){2.15();2.16();2.L()};m.l.15=7(){n a=2.3.z("Y");p(H a.1S==="P"){2.8.W=a;2.k.W=2.8.W}F{2.8.G(a);a=a.1R(u);2.k.G(a)}};m.l.16=7(){2.k.1Q=2.3.1O()||""};m.l.L=7(){n i,q;2.8.S=2.3.z("R");2.k.S=2.8.S;2.8.4.C="";2.k.4.C="";q=2.3.z("q");1p(i 1L q){p(q.1K(i)){2.8.4[i]=q[i];2.k.4[i]=q[i]}}2.1l()};m.l.1l=7(){2.8.4.I="1m";2.8.4.J="1g";p(H 2.8.4.B!=="P"){2.8.4.1k="1j(B="+(2.8.4.B*1I)+")"}2.k.4.I=2.8.4.I;2.k.4.J=2.8.4.J;2.k.4.B=0.1H;2.k.4.1k="1j(B=1)";2.13();2.O();2.N()};m.l.13=7(){n a=2.3.z("X");2.8.4.1h=-a.x+"v";2.8.4.1f=-a.y+"v";2.k.4.1h=-a.x+"v";2.k.4.1f=-a.y+"v"};m.l.O=7(){n a=2.1G().1F(2.3.Z());2.8.4.12=a.x+"v";2.8.4.M=a.y+"v";2.k.4.12=2.8.4.12;2.k.4.M=2.8.4.M;2.D()};m.l.D=7(){n a=(2.3.z("14")?-1:+1);p(H 2.3.1b()==="P"){2.8.4.A=2h(2.8.4.M,10)+a;2.k.4.A=2.8.4.A}F{2.8.4.A=2.3.1b()+a;2.k.4.A=2.8.4.A}};m.l.N=7(){p(2.3.z("1a")){2.8.4.Q=2.3.2f()?"2e":"1B"}F{2.8.4.Q="1B"}2.k.4.Q=2.8.4.Q};7 19(a){a=a||{};a.Y=a.Y||"";a.X=a.X||E 6.5.2d(0,0);a.R=a.R||"2c";a.q=a.q||{};a.14=a.14||t;p(H a.1a==="P"){a.1a=u}2.1y=E m(2);6.5.18.1x(2,1w)}19.l=E 6.5.18();19.l.17=7(a){6.5.18.l.17.1x(2,1w);2.1y.17(a)};',62,143,'||this|marker_|style|maps|google|function|labelDiv_|event|||||||||||eventDiv_|prototype|MarkerLabel_|var|addListener|if|labelStyle|trigger|latLng|false|true|px|addDomListener|||get|zIndex|opacity|cssText|setZIndex|new|else|appendChild|typeof|position|overflow|cLngOffset|setStyles|top|setVisible|setPosition|undefined|display|labelClass|className|lng|lat|document|innerHTML|labelAnchor|labelContent|getPosition||listeners_|left|setAnchor|labelInBackground|setContent|setTitle|setMap|Marker|MarkerWithLabel|labelVisible|getZIndex|cursor|mouseover|dragstart|marginTop|hidden|marginLeft|drag|alpha|filter|setMandatoryStyles|absolute|dragend|mouseup|for|removeChild|parentNode|getPanes|stopPropagation|div|preventDefault|arguments|apply|label|mousedown|dblclick|none|click|mouseout|createElement|fromLatLngToDivPixel|getProjection|01|100|LatLng|hasOwnProperty|in|getDraggable|mousemove|getTitle|getMap|title|cloneNode|nodeType|draw|removeListener|length|onRemove|labelstyle_changed|onAdd|labelclass_changed|overlayMouseTarget|labelanchor_changed|OverlayView|labelcontent_changed|overlayImage|title_changed|labelvisible_changed|visible_changed|zindex_changed|position_changed|1000000|cancelBubble|markerLabels|Point|block|getVisible|getCursor|parseInt|pointer'.split('|'),0,{}))
    var map;
    var mapOptions = { center: new google.maps.LatLng(35, 105), zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP };

    var locations = [
                     ['Hong Kong', 22.39, 114.10, 1885],
                     ['Shanghai', 31.232, 121.47, 5885],
                     ['Beijing', 39.88, 116.40, 6426],
                     ['Guangzhou', 23.129, 113.264, 4067],
                     ['Shenzhen', 22.54, 114.05, 3089],
                     ['Hangzhou', 30.27, 120.15, 954]
                   ];

    var infowindow = new google.maps.InfoWindow();

    var i;
    /*
    for (i = 0; i < locations.length; i++) {  
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
          return function() {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
          }
        })(marker, i));
      } */

    function myMarker(options) {
        if(!options.labelAnchor) {
          options.labelAnchor = new google.maps.Point(30, 50);
        }
        if(!options.labelClass) {
          options.labelClass = "labels";
        }
        options.map = map;

        return new MarkerWithLabel(options);
      }

    function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        for (i = 0; i < locations.length; i++) { 
        var marker = new MarkerWithLabel({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          draggable: false,
          map: map,
          labelContent: locations[i][3],
          labelAnchor: new google.maps.Point(30, 0),
          labelClass: "labels", // the CSS class for the label
          labelStyle: {opacity: 0.75}

        });
        }
        /*
        var marker2 = new myMarker({
            position: new google.maps.LatLng(20,20),
            draggable: true,
            labelContent: "second"
          });
 */
        }
    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:85%; height:85%"></div>
    <script type="text/javascript">
    </script>
  </body>
</html> 
```

* * *

编辑

我一直在尝试使用 MarkerManager，但无法在不同的缩放级别上成功创建标记。

首先，我将默认缩放级别更改为 1，然后将代码更改为如下所示。

```
function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
   /* for (i = 0; i < locations.length; i++) { 
    var marker = new MarkerWithLabel({
      position: new google.maps.LatLng(locations[i][1], locations[i][2]),
      draggable: false,
      map: map,
      labelContent: locations[i][3],
      labelAnchor: new google.maps.Point(30, 0),
      labelClass: "labels", // the CSS class for the label
      labelStyle: {opacity: 0.75}

    });
    } */
    var listener = google.maps.event.addListener(map, 'bounds_changed', function(){
        setupMarkers();
        google.maps.event.removeListener(listener);
    });
    }

function createCityMarkers() {

    for (i = 0; i < locations.length; i++) { 
        var marker = new MarkerWithLabel({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          draggable: false,
          map: map,
          labelContent: locations[i][3],
          labelAnchor: new google.maps.Point(30, 0),
          labelClass: "labels", // the CSS class for the label
          labelStyle: {opacity: 0.75}

        });
        }
}

function setupMarkers() {
    mgr = new MarkerManager(map);

    google.maps.event.addListener(mgr, 'loaded', function(){
          mgr.addMarkers(createCityMarkers(), 4);

          mgr.refresh();
      });
} 
```

我也尝试过应用此链接的源代码，但没有任何效果。而当我将源代码直接复制到我的电脑并用标记替换所有图标时，标记仍然没有出现。我似乎无法弄清楚如何使用标记管理器使标记出现。 [http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/examples/weather_map.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/examples/weather_map.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T03:14:54.830

我的程序失败的真正原因是标记管理器，它不适用于我的带有标签的标记。

然而，实际上有一个更简单的方法来满足我的需求。

```
function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        getMarkers();
        google.maps.event.addListener(map,'zoom_changed',function () {
             if (map.getZoom() >= 3) showMarkers();
             if (map.getZoom() <= 2) eraseMarkers();

            });

    }

    function eraseMarkers() {
        for (i = 0; i < locations.length; i++) { 
            marker[i].setVisible(false);
        }

      }

    function showMarkers() {
        for (i = 0; i < locations.length; i++) { 
            marker[i].setVisible(true);
        }

      }

    function getMarkers() {
        for (i = 0; i < locations.length; i++) { 
            marker[i] = new MarkerWithLabel({
              position: new google.maps.LatLng(locations[i][1], locations[i][2]),
              draggable: false,
              map: map,
              labelContent: locations[i][3],
              labelAnchor: new google.maps.Point(30, 0),
              labelClass: "labels", // the CSS class for the label
              labelStyle: {opacity: 0.75}
            });

            }
        eraseMarkers();
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:13:45.963

看起来您正在尝试制作的东西称为标记聚类。

这里有很多官方的谷歌示例[https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers) 用原生 javascript 编写

[http://gmap3.net/examples/clustering.html](http://gmap3.net/examples/clustering.html) - 使用 jQuery 库。

我希望这能帮到您。

# c++ - 具有 2 个功能的简单程序不起作用

> ID：11045563
> 
> 赞同：1
> 
> 时间：2012-06-15T06:22:12.550
> 
> 标签：c++

我是 C++ 新手，并试图制作两个简单的函数，但出了点问题。

我正在尝试执行以下操作：

```
1.Function for input some data.
2.Function to show what data is input. 
```

我只是想让它变得简单。到目前为止我写的代码是：

```
#include <iostream>
void masiv()
{
  int x[10];
  int n, i;
  int min;
  int max=0, imax=0, imin;

  cout << "Enter the number of elements: ";
  cin >> n;

  for(i=0; i < n; i++)
  {
      cout << "Input value for x["<<i<<"]=";
      cin >> x[i];

  if (min > x[i])
  {
      min = x [i];
      imin = i;
  }

  if (max < x[i])
  {
     max = x[i];
     imax = i;
  }
}
void rezult()
{
  cout << "the smallest value on is xthe biggest value on is x["<<imin<<"]=" << min <<endl;
  cout << "nai golqmata stoinost e na x["<<imax<<"]=" << max <<endl;
}
void main()
{
  masiv();
  rezult();
} 
```

我有一堆错误。我知道这是糟糕的代码，但正如我所提到的，我才刚刚开始。谢谢

Ps对不起我的英语

编辑：使用此代码。

```
#include <iostream>
using namespace std;

void masiv(int& min, int&max)
{
 int x[10];
 int n;
 int i;
 int imin, imax;
 cout << "Enter the number of elements: ";
 cin >> n;
 for(i=0; i < n; i++)
 {
  cout << "Input value for x["<<i<<"]=";
  cin >> x[i];
  if(min > x[i])
  {
    min = x [i];
    imin = i;
  }
  if(max < x[i])
  {
    max = x[i];
    imax = i;
  }
 }
}

 void rezult(int min, int max)
{
 cout << "the smallest value on is x= " << min << endl;
 cout << "the biggest value on is x= " << max << endl;
 system ("pause");
}

int main(int argc, char** argv)
{
 int min = 999999; 
 int max = -999999;
 masiv(min,max);
 rezult(min,max);
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:35:45.710

min 变量永远不会被初始化，它应该被初始化为一个很大的值。

您声明了一个数组`int x[10];`，但稍后您让用户输入值的数量`cin>>n`而不检查它是否大于 10 或负数。这可能会导致问题。

最大值和最小值仅在函数 masiv() 中声明，它们无法在函数外部访问。如果您想让它们可访问，例如可以将它们传递给函数，而不是在函数内声明它们：

```
void masiv(int& min, int&max) // pass by reference
{...}

void rezult(int min, int max)
{...}

int main(int argc, char** argv) // proper main prototype
{
   int min = 999999; 
   int max = -999999;
   masiv(min,max);
   rezult(min,max);
   return 0;
} 
```

编辑：并添加使用命名空间std；在文件开头

```
#include <iostream>
using namespace std; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:38:01.783

您需要在这里考虑数据流。

您的 main 函数执行了两个函数，但是数据是如何从 massiv 函数中出来或进入 result 函数的呢？

你可以使用全局变量，或者你可以让你的主要结构更像：

```
void main()
{
    int x[10];
    massiv(x);
    rezult(x);
} 
```

rezult 函数应该处理 x 中的结果并填充 min 和 max 变量。将 if 语句从 massiv 移至 rezult。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T06:28:51.877

至少，您必须为 和限定命名空间`cout`，所有这些都在命名空间中。`cin``endl``std`

至于局部范围变量的问题，我将更改签名`masiv`以返回`std::pair<int,int>`包含最小值和最大值的值：

```
typedef std::pair<int,int> MinMax;

MinMax massiv() { .... } 
```

为什么不通过`min`和`max`引用？因为您依赖于传递的引用的值。你必须检查它们是否合理等等。从函数本身返回最小值和最大值可以完全控制函数。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-15T06:28:01.300

首先，所有变量都在 massiv() 函数中本地定义，首先是全局变量。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-15T06:30:16.727

您**imin**，**min**，**imax**和**max**应该使函数 rezult() 访问它们的全局。

# jakarta-ee - Servlet 修改以使其读取相对路径

> ID：11045567
> 
> 赞同：0
> 
> 时间：2012-06-15T06:22:41.987
> 
> 标签：jakarta-ee, servlets, velocity

我是新手`Java EE`。我正在尝试修改`init()`servlet 中的代码。我创建了一个在 init() 方法中调用的 loadConfiguration(config) 方法。我还在文件`WEB-INF`夹中上传了一个 velocity.property 文件。`loadConfiguration()`方法如下：-

```
protected Properties loadConfiguration (ServletConfig config) throws IOException, FileNotFoundException  {
    String propsFile = config.getInitParameter(INIT_PROPS_KEY);
    Properties p = new Properties();

    if ( propsFile != null ) {
      InputStream iStream = getServletContext().getResourceAsStream( propsFile );

      if ( iStream != null ) {
        p.load( iStream );
      }
    }

    return p;
    } 
```

当我尝试在 weblogic 中运行此应用程序时，我收到 403 错误，告诉我服务器理解请求但拒绝遵守。

**这个问题有什么解决方法吗？**

*任何帮助将不胜感激 ！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:05:05.877

Response `status code 403` means the servlet is `forbidden`. Check if you have any security constraints defined in your web application.

# php - 如何显示带有属性的图像？

> ID：11045568
> 
> 赞同：1
> 
> 时间：2012-06-15T06:22:48.077
> 
> 标签：php, image, magento

我想附加带有属性的图像，例如我有制造属性，我想在产品视图页面上显示制造的图像，所以我的要求是我们如何在 magento 的属性选择字段中添加图像字段，以便管理员可以为该制造选择图像属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:12:27.080

为此存在几个扩展（免费或不免费）。

我们使用的是免费的，在 github 上：[magento-attribute-option-image](https://github.com/jreinke/magento-attribute-option-image)。

# database - IMDB（内存数据库）与 Java 集合

> ID：11045574
> 
> 赞同：2
> 
> 时间：2012-06-15T06:23:35.653
> 
> 标签：database, performance, collections, in-memory-database

我的问题是：有什么方法可以使用 java.util.collections（ArrayList/HashMap/3rd 方 LIB 等）实现数据库类型的功能（内存数据库提供）让我稍微描述一下。

我有具有不同 25 个属性的模型类帐户，我可以将 5000 个帐户的数据存储在 ArrayList 上。同样的方式，我可以通过创建表 t_Account 来保存内存数据库中的数据。现在我想实现一些基本操作，如下所述

1.  根据每个属性按升序/降序排序。（例如 SQL 的 Order By 操作）

2.  根据每个属性的不同过滤条件过滤掉特定的模型帐户？（在 SQL 中对表应用 WHERE/AND 条件）

3.  根据特定属性搜索特定帐户？（在 SQL 中对表应用 LIKE 操作）

总之我的主要目的是用Java实现内存数据库相关的功能，应该和内存数据库操作一样好？

提前感谢您的宝贵时间和建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:27:34.950

当然，只要您不这样做，您就可以执行数据库在内存中执行的部分操作

*   想要实现复杂的查询

*   在大数据集上寻找性能：复杂的索引（包括它们的维​​护）不是一件容易的事

但是 5000 条记录是一个非常小的集合，因此您可以使用自定义函数和索引在内存中轻松管理它们。排序、过滤、搜索可以在任何语言的小集合上轻松实现。

你似乎使用 java ("ArrayList")，看看[Collections.sort()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html)。只要您的比较函数很快，对小集合进行排序就很快。

另一方面，使用像 sqlite 这样的小型数据库也很容易。如果您不确定是否可以从 java 解决方案开始，如果分析显示您无法足够有效地处理内存数据库以满足您的需要，则可以稍后集成外部工具。如果它很容易放入 RAM 并且您不必保留数据，请尝试在内存中进行。使用数据库的第一个原因是持久性。相反，如果您必须在程序的启动停止（或崩溃）之间保留记录，请使用数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-16T09:08:46.723

[HSQLDB](http://hsqldb.org/)和[H2](http://www.h2database.com/html/main.html)纯 Java SQL DB都可以完全在内存中运行（尽管它们不是本机的，但它们的速度相当快）。

连接字符串、HSQLDB: `jdbc:hsqldb:mem:`、H2: `jdbc:h2:mem:`。您可以在它们之后添加一个标识符，以创建支持同一 VM 中的多个连接的内存数据库。

原生嵌入式 SQL DB [SQLite](http://sqlite.org/)也可以完全在内存中运行，[Xerial SQLite](https://github.com/xerial/sqlite-jdbc)驱动程序使用连接字符串`jdbc:sqlite::memory:`。请注意，SQLite 不允许在之后使用标识符`:memory:`，如果您在同一个 VM 中打开两个到 的连接`:memory`，您将获得两个不同的内存数据库。

我认为没有真正需要使用命名的内存连接，因为如果您需要从不同的线程中使用相同的连接对象，并且上述所有三个数据库都是线程安全的，您可以重用相同的连接对象。

[Firebird](http://firebirdsql.org/)嵌入式数据库不提供内存数据库。

# asp.net - ListBox apxx.net 排序属性 Devexpress vol 2011.2.11

> ID：11045575
> 
> 赞同：0
> 
> 时间：2012-06-15T06:23:38.803
> 
> 标签：asp.net, devexpress

我想在 aspx.net 中对 ListBox 中的项目进行排序。我将数据源绑定到我的列表框。我只需要知道是否可以对列表框中的项目进行排序？如果是，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:33:15.570

只需在绑定到列表框之前对数据源进行排序

# ios - 点击如下图所示按钮时如何显示 UIView？

> ID：11045576
> 
> 赞同：0
> 
> 时间：2012-06-15T06:23:48.193
> 
> 标签：ios

当我单击如下图所示的按钮时，我想在 MainView 中出现另一个视图。

有教程或指南吗？

![在此处输入图像描述](../Images/846dc9bdd020894aaee9c5610406051b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:26:54.720

那就是所谓的`UIPopoverController`。你应该看看这个[this](http://disanji.net/iOS_Doc/#featuredarticles/ViewControllerPGforiPhoneOS/iPadControllers/iPadControllers.html)。一切都很好地解释了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:33:33.327

查看此[链接](https://stackoverflow.com/questions/5744434/are-there-examples-of-how-to-use-uipopovercontroller-on-ios)以获取 iPad 中的 popOver，并将[此链接](https://github.com/PaulSolt/WEPopover)用于 iPhone / iPod 中的 popOver。

# c# - 在 C# 中获取 twitter 个人资料数据

> ID：11045577
> 
> 赞同：0
> 
> 时间：2012-06-15T06:23:49.583
> 
> 标签：c#, json, c#-4.0, twitter

我正在用 C# 创建一个应用程序，用户在其中输入他们的姓名，并从 Twitter 接收相应的个人资料数据。我暂时没有使用 API。如果我使用：

[https://api.twitter.com/1/users/show.json?screen_name=kool_aid_wino](https://api.twitter.com/1/users/show.json?screen_name=kool_aid_wino)

响应是这样的 JSON 消息。

```
{"id":184937673,"id_str":"184937673","name":"Brautigan's Ghost","screen_name":"Kool_Aid_Wino","location":"","description":"Author Richard Brautigan floating through time. Fan Account.","url":null,"protected":false,"followers_count":1803,"friends_count":623,"listed_count":97,"created_at":"Mon Aug 30 21:21:12 +0000 2010","favourites_count":0,"utc_offset":-18000,"time_zone":"Quito","geo_enabled":false,"verified":false,"statuses_count":653,"lang":"en","status":{"created_at":"Fri Jun 15 00:47:15 +0000 2012","id":213432448762134528,"id_str":"213432448762134528","text":"I sat beside my little brother on the front porch, and I told him a story about a flower that fell in love with a star.","source":"\u003ca href=\"http:\/\/twitterrific.com\" rel=\"nofollow\"\u003eTwitterrific\u003c\/a\u003e","truncated":false,"in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"geo":null,"coordinates":null,"place":null,"contributors":null,"retweet_count":11,"favorited":false,"retweeted":false},"contributors_enabled":false,"is_translator":false,"profile_background_color":"C0DEED","profile_background_image_url":"http:\/\/a0.twimg.com\/images\/themes\/theme1\/bg.png","profile_background_image_url_https":"https:\/\/si0.twimg.com\/images\/themes\/theme1\/bg.png","profile_background_tile":false,"profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/1114076851\/Brautigan_normal.jpg","profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/1114076851\/Brautigan_normal.jpg","profile_link_color":"0084B4","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"show_all_inline_media":false,"default_profile":true,"default_profile_image":false,"following":null,"follow_request_sent":null,"notifications":null} 
```

我有几个疑问：

*   我需要 C# 中的 JSON 解析器来处理 JSON 消息吗？
*   此 JSON 消息不包含有关推广推文的信息，我该如何获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:36:10.643

> 我需要 C# 中的 JSON 解析器来处理 JSON 消息吗？

好吧，从技术上讲，答案是肯定的，但我假设您是在问您是否需要第 3 方。C# 具有 JavaScriptSerializer 类，只要您首先使用适当的属性定义类，它就可以获取此 JSON 并将其转换为对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:07:35.733

这是[Twitter 的 REST API](https://dev.twitter.com/docs/api)的文档。您可以按如下方式使用它们：

```
using (var wc = new WebClient())
{
    string searchText = "kool_aid_wino";
    string json = wc.DownloadString("http://search.twitter.com/search.json?rpp=100&q="+searchText);
    dynamic dynJson = JsonConvert.DeserializeObject(json);
    foreach (var result in dynJson.results)
    {
        Console.WriteLine("{0} --> {1} : {2}\n", result.from_user, result.to_user, result.text);
    }
} 
```

PS：你需要[Json.Net](http://json.codeplex.com/)（我最喜欢的 json 解析器）来运行上面的代码

# fancybox - 将 WordPress 和 Easy FancyBox 与标题和描述相结合

> ID：11045580
> 
> 赞同：0
> 
> 时间：2012-06-15T06:24:12.767
> 
> 标签：fancybox, wordpress, lightbox

客户正在请求一个 Lightbox 画廊，该画廊将在点击时提供图像、描述和页面标题。在对可用的 Lightbox 解决方案进行广泛审查之后，我最倾向于[Easy FancyBox](http://wordpress.org/extend/plugins/easy-fancybox/ "简易花式盒")，但是经过审查，该插件不支持标题和描述，因为它只调用来自 title="" 的数据。我能够找到[此代码，它将图像标题替换为 WordPress 的自定义标题。](http://pastebin.com/5srPv35b "这个更正")但是，我不是要替换，而是包括图像标题、描述，也许还有 WordPress 页面的标题。有一个相对简单的 JQuery 解决方案吗？还是我应该完全看其他 Lightbox 解决方案？

我还研究了 NextGEN Gallery，它是迄今为止最流行的 WordPress 图片库插件，但它并没有插入 WordPress 现有的画廊，我一点也不喜欢。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:36:49.147

Easyfancybox 使用 fancybox v1.3.4，它有一些限制，特别是你想要的功能。

如果您擅长 wordpress，那么您可以在其中对 fancybox v2.x 进行硬编码（无插件）。Fancybox v2.x 将允许您同时拥有标题和字幕。在此处查看一些示例 [https://stackoverflow.com/a/8425900/1055987](https://stackoverflow.com/a/8425900/1055987)和此处[https://stackoverflow.com/a/9611664/1055987](https://stackoverflow.com/a/9611664/1055987)

您实际上可以从 wp 自定义字段中获取标题。

当然，这也取决于你的 wordpress/php/jQuery 技能……但如果你是为客户开发，我想你不应该有这个问题；）

# jquery - 带有 JQuery 可排序问题的 Ruby on Rails

> ID：11045581
> 
> 赞同：2
> 
> 时间：2012-06-15T06:24:32.320
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui, jquery-ui-sortable

我已经到处寻找解决方案，但找不到适合我的具体问题或我能理解的解决方案。我有一个 RoR 应用程序，它允许人们使用 JQuery UI 的 Sortable 使用拖放界面对“选举”进行“投票”。我将拖放列表中的每个元素称为“首选项”。所有“首选项”都从未排序的 (sortable2) 列开始，用户将它们拖到已排序的列 (sortable1) 上。我只想保存用户拖入“sortable1”的“首选项”的位置。

对于拖放，我使用了 JQuery UI 的 Sortable，界面相当不错。但是，我在实际提交每个首选项的位置以最终将其记录在数据库中时遇到问题。这是我的第一个网络应用程序，我对此很陌生。非常感谢您的帮助。这是我拥有的代码：

在创建新投票的视图中：

```
<script>
$(function() {
  $( "ul.droptrue" ).sortable({
  connectWith: "ul"
});

$( "#sortable1, #sortable2" ).disableSelection();
}); 
```

```
<ul id="sortable1" class='droptrue'>
Preferences:

</ul>

<ul id="sortable2" class='droptrue'>
Unranked candidates:
  <% @vote.preferences.each do |preference| %>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>      
    <%= preference.candidate.name %></li>
  <% end %>
</ul> 
```

根据我在网上找到的建议，我在 votes_controller.rb 中添加了“排序”：

```
class VotesController < ApplicationController
  respond_to :html, :json

  # I added this 
  def sort
      params[:preferences].each_with_index do |id, index|
         @vote.preferences.update(['position=?', index+1], ['id=?', id])
      end
      render nothing: true
  end 
```

在 vote.rb 中，我有：

```
class Vote < ActiveRecord::Base
    # ...
    has_many :preferences
    accepts_nested_attributes_for :preferences, allow_destroy: true, reject_if: lambda { |c| c.values.all?(&:blank?) }
end 
```

在preference.rb中，我有：

```
class Preference < ActiveRecord::Base
   attr_accessible :position
   belongs_to :vote, dependent: :destroy
end 
```

在 routes.rb 中，我有：

```
resources :votes do
   put :sort
end 
```

老实说，如果有人能成为我的英雄并帮助一个兄弟，那我会很开心。我搜索了很长时间以避免发布可能是多余的东西，但是我在这里和通过谷歌找到的所有东西都帮不了我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:41:19.207

我们正在做的方式是：

1.  在“可排序”上使用[“停止”事件。](http://jqueryui.com/demos/sortable/#event-stop)
2.  在停止事件中，使用索引遍历“ul”的所有元素。索引是项目的“排序位置”。
3.  做一个 ajax POST 来修改所有项目的位置。

# .net - C# 中“动态”关键字的用途是什么？

> ID：11045582
> 
> 赞同：-1
> 
> 时间：2012-06-15T06:24:33.687
> 
> 标签：.net, c#-4.0

C# 中“动态”关键字的目的是什么，为什么我想要或不想使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:32:25.637

在静态类型的世界中，动态为开发人员提供了很多可以吊死自己的绳索。在处理在编译时可以知道其类型的对象时，应不惜一切代价避免使用 dynamic 关键字。静态输入时，动态没有任何意义。如果您正在处理未知或动态类型，通常需要通过反射与它进行通信。反射代码不易阅读，并且具有上述动态类型的所有缺陷。在这种情况下，动态很有意义。

在底层，动态类型编译为封装的反射代码，除非对象是 COM 对象（在这种情况下，操作通过 IDispatch 动态调用）或对象实现 IDynamicObject，IDynamicObject 被 IronPython 和 IronRuby 广泛使用，并且在即将到来的 API。

更多在[MSDN](http://msdn.microsoft.com/en-us/library/dd264741.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T06:31:36.880

引入它是为了更容易与动态语言进行互操作。

就个人而言，我不建议使用它，除非您要与动态编写的代码进行交互，或者如果您有非常具体的理由这样做。

# android - 如何多次实例化设置标志 FLAG_ACTIVITY_NEW_TASK 的活动？

> ID：11045588
> 
> 赞同：0
> 
> 时间：2012-06-15T06:25:07.117
> 
> 标签：android

我的应用程序有一个服务和一个活动。有时服务会发送广播，如果我的活动收到广播，我将启动活动并显示一个对话框。但是如果我需要在 onReceiver() 中成功启动一个活动，我必须为该活动设置标志 FLAG_ACTIVITY_NEW_TASK，并且该活动只能实例化一次，如果我再次启动该活动，它就无法再次实例化。当我的应用程序显示活动时，我可以显示其他服务消息。

如何在 onReceiver() 中多次启动某个活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:05:14.897

添加标志FLAG_ACTIVITY_MULTIPLE_TASK，该标志无论如何都会开始一个新的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:07:38.513

It looks like about different OS version, it will start activity successfully on some version (2.3.7), my device's OS version is 2.3.3 when the activity is added flag FLAG_ACTIVITY_NEW_TASK.

# android - 恢复到同一活动时如何清除 TextView？

> ID：11045590
> 
> 赞同：0
> 
> 时间：2012-06-15T06:25:13.827
> 
> 标签：android, textview

我有一个 TextView，它在我的活动的登录页面中显示一条错误消息。当我回到这个活动时，我不知道如何清除它的价值。我用于`editText.setText("")`EditText 字段。但是当我尝试将它用于我的 TextView 时，它显示了`NullPointerException` 这里可以使用什么？

```
error = (TextView) findViewById(R.id.errorPopUp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:27:20.113

在`onResume()`方法中：

```
@Override
protected void onResume()
{
  super.onResume();
  error.setText("");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:28:31.480

您应该检查此[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)

# java - 在 java 中实现 Memcache 的错误

> ID：11045600
> 
> 赞同：2
> 
> 时间：2012-06-15T06:26:14.177
> 
> 标签：java, memcached

我正在尝试用 Java 编写一个简单的代码来连接到 memcache 服务器。我使用 spymemcached 2.8 jar，但出现“服务器重新连接”错误，我无法理解。

代码是：

```
    **client = new MemcachedClient(new BinaryConnectionFactory(),AddrUtil.getAddresses("127.0.0.1:11211"));
    } 捕捉（IOException e）{
       e.printStackTrace();
       System.err.println("连接问题");
    }
     client.set("someKey", 3600, new Integer(10));
    对象 myObject=temp.client.get("someKey");
    System.out.println(myObject);
    client.delete("someKey");**

```

但我收到的错误是：

```
**2012-06-14 17:58:31.412 信息 net.spy.memcached.MemcachedConnection：添加 {QA sa=/127.0.0.1:11211，#Rops=0，#Wops=0，#iq=0，topRop= null, topWop=null, toWrite=0, Interest=0} 连接队列
2012-06-14 17:58:31.428 INFO net.spy.memcached.MemcachedConnection：sun.nio.ch.SelectionKeyImpl@1621e42 的连接状态已更改
2012-06-14 17:58:31.428 INFO net.spy.memcached.MemcachedConnection：由于 {QA sa=/127.0.0.1:11211, #Rops=1, #Wops=0, #iq=0, topRop=Cmd：1 不透明：1 密钥：someKey Cas：0 Exp：3600 标志：512 数据长度：1，topWop=null，toWrite=0，interests=1}
java.io.IOException：意外断开连接，将重新连接。
    在 net.spy.memcached.MemcachedConnection.handleReads(MemcachedConnection.java:452)
    在 net.spy.memcached.MemcachedConnection.handleIO(MemcachedConnection.java:380)
    在 net.spy.memcached.MemcachedConnection.handleIO(MemcachedConnection.java:242)
    在 net.spy.memcached.MemcachedConnection.run(MemcachedConnection.java:833)
2012-06-14 17:58:31.428 警告 net.spy.memcached.MemcachedConnection：关闭并重新打开 {QA sa=/127.0.0.1:11211，#Rops=1，#Wops=0，#iq=1，topRop =Cmd：1 不透明：1 密钥：someKey Cas：0 Exp：3600 标志：512 数据长度：1，topWop=null，toWrite=0，interested=1}，尝试 0。
2012-06-14 17:58:31.428 WARN net.spy.memcached.protocol.binary.BinaryMemcachedNodeImpl：丢弃部分完成的操作：Cmd：1 不透明：1 键：someKey Cas：0 Exp：3600 标志：512 数据长度：1
2012-06-14 17:58:31.444 警告 net.spy.memcached.MemcachedConnection：无法重新分配到另一个节点，正在重试主节点的 someKey。
2012-06-14 17:58:33.444 信息 net.spy.memcached.MemcachedConnection：重新连接 {QA sa=/127.0.0.1:11211，#Rops=0，#Wops=1，#iq=0，topRop=null， topWop=Cmd：0 不透明：3 键：someKey，toWrite=0，interested=0}
2012-06-14 17:58:33.444 信息 net.spy.memcached.MemcachedConnection：sun.nio.ch.SelectionKeyImpl@1813fac 的连接状态已更改
线程“主”net.spy.memcached.OperationTimeoutException 中的异常：等待值超时
    在 net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1003)
    在 net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1018)
    在 ballydev.Memcache.main(Memcache.java:29)
原因：net.spy.memcached.internal.CheckedOperationTimeoutException：等待操作超时 - 失败节点：/127.0.0.1:11211
    在 net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:93)
    在 net.spy.memcached.internal.GetFuture.get(GetFuture.java:62)
    在 net.spy.memcached.MemcachedClient.get(MemcachedClient.java:997)
    ... 2 更多**

```

任何人有任何想法或建议？.. 请回复...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:29:46.680

`Timed out waiting for operation - failing node: /127.0.0.1:11211` 这意味着您的 memcached 绑定在其他地址上，或者它没有启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:00:22.813

对不起，伙计们，我的机器出了点问题，这就是为什么我在运行一个简单的代码时遇到了这么多麻烦。但是当我尝试使用不同的盒子并使用它的 IP den 时，它工作得很好...... :)

谢谢大家和我一起承受这个...

# c# - c# (SNMP) 的 WebLogic 通知

> ID：11045601
> 
> 赞同：0
> 
> 时间：2012-06-15T06:26:14.730
> 
> 标签：c#, weblogic, alert, snmp, pooling

我在一个必须实时包含 Weblogic 状态的小型 c# 项目中！

我已经看到 Weblogic 可以使用 SNMP 进行诊断……不幸的是，我从未使用过 SNMP。

那么使用该协议是否可以通过 Weblogic 发出警报和通知的警报（Fe：部署完成）？并且可以将其作为侦听器而不是汇集Weblogic ...

如果不可能，您还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:35:31.807

WebLogic SNMP 管理指南可在[http://docs.oracle.com/cd/E21764_01/web.1111/e13743/toc.htm](http://docs.oracle.com/cd/E21764_01/web.1111/e13743/toc.htm)找到。为 WebLogic 关闭和重新启动定义了陷阱/通知，但没有为应用程序部署定义。看起来您可以从 WebLogic MIB 中提取应用程序状态。

# mysql - Mysql：根据两个查询减去值

> ID：11045611
> 
> 赞同：0
> 
> 时间：2012-06-15T06:27:09.427
> 
> 标签：mysql

我有以下两个查询。

```
SELECT 
    account_name,SUM(amount) AS AMOUNT1 
FROM 
    entries 
LEFT JOIN 
    accounts ON accounts.id = entries.accounts_id
WHERE 
    side = 'D' AND op_balance_dc = 'D'
GROUP BY 
    accounts.id 
```

这是查询的结果：

[查询1](http://i49.tinypic.com/1zxqng7.png)

```
SELECT 
    account_name,SUM(amount) AS AMOUNT2 
FROM 
    entries 
LEFT JOIN 
    accounts ON accounts.id = entries.accounts_id
WHERE 
    side = 'C' AND op_balance_dc = 'D'
GROUP BY 
    accounts.id 
```

这是第二次查询的结果

[查询2](http://i50.tinypic.com/2zoy9a9.png)

我不是要显示上述两个查询的结果，我要实现的是从上述查询中获取 account_name、AMOUNT1 和 AMOUNT2，然后从 AMOUNT1 中减去 Amount2，然后从我的表的列中添加一个值。

例子：

```
(AMOUNT1-AMOUNT2)+op_balance  //here op_balance is my column name 
```

然后显示`account_name`和`(AMOUNT1-AMOUNT2)+op_balance`

你能帮我解决这个问题吗？

谢谢 ：）

如果您需要更多信息，请告诉我。:)

## 已编辑

这是我的表的结构：

*   表名：[accounts](http://i48.tinypic.com/2ew1hfc.png)
*   表名：[条目](http://i49.tinypic.com/142y24l.png)

谢谢 ：）

## 编辑2

表名：条目（Case-1）

```
 id    trans_id   accounts_id    amount    side
   1      1       12               1000      D
   2      1        1               1000      C
   7      4        1              14000      D
   8      4        2              14000      C 
```

表名：条目（Case-2）

```
 id    trans_id   accounts_id  amount        side
  1           1       12          1000       D
  2           1        1          1000       C 
```

您的代码适用于 case-1，但不适用于 case-2。您`lentries.accounts_id = entries.accounts_id`在代码中使用了这就是为什么因为表中没有多个相同`accounts_id`的值要加入，并且您的代码没有计算 case-2 中的值。

但我正在尝试获取所有数据。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:49:35.470

```
SELECT
    a.account_name,
    a.AMOUNT1,
    b.AMOUNT2,
    (a.AMOUNT1 - COALESCE(b.AMOUNT2, 0)) + a.op_balance AS calculated
FROM
    (
        SELECT accounts.id, account_name, SUM(amount) AS AMOUNT1, op_balance
        FROM entries 
        LEFT JOIN accounts ON accounts.id = entries.accounts_id
        WHERE side='D' AND op_balance_dc='D'
        GROUP BY accounts.id
    ) a
LEFT JOIN
    (
        SELECT accounts.id, SUM(amount) AS AMOUNT2 FROM entries 
        LEFT JOIN accounts ON accounts.id = entries.accounts_id
        WHERE side='C' AND op_balance_dc='D'
        GROUP BY accounts.id
    ) b ON a.id = b.id
GROUP BY
    a.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T07:48:47.377

这是所有帐户的已编辑查询

```
select
  a.id,
  a.account_name,
  a.op_balance,
  ifnull(e.AMOUNT1,0) as Amount1,
  ifnull(l.AMOUNT2,0) as Amount2,
  ((ifnull(SUM(e.AMOUNT1),0)-ifnull(l.AMOUNT2,0))+a.op_balance) as Balance
from accounts a
  left join (SELECT
               accounts_id,
               SUM(amount)     AS AMOUNT1
             FROM entries
               LEFT JOIN accounts
                 ON accounts.id = entries.accounts_id
             WHERE entries.side = 'D'
                 AND accounts.op_balance_dc = 'D'
             GROUP BY accounts.id) as e
    on e.accounts_id = a.id
  left join (SELECT
               accounts_id,
               SUM(amount)     AS AMOUNT2
             FROM entries
               LEFT JOIN accounts
                 ON accounts.id = entries.accounts_id
             WHERE side = 'C'
                 AND op_balance_dc = 'D'
             GROUP BY accounts.id) as l
    on l.accounts_id = a.id
group by a.id 
```

# ruby - 为什么我没有从这个方法中得到我期望的反转字符串？

> ID：11045612
> 
> 赞同：-2
> 
> 时间：2012-06-15T06:27:11.957
> 
> 标签：ruby, string, return-value

在下面的程序*（用 irb shell 编写）中，*我调用了一个`hidden`类的方法，该方法`Tester`接受两个参数，它们都是字符串，然后在修改它们后返回一个字符串。我得到了一个我没想到的输出。

*我期望的是：*

```
def hidden(aStr,anotherStr) # After the call aStr = suhail and anotherStr = gupta
  anotherStr = aStr + " " + anotherStr
  # After the above statement anotherStr = suhail gupta
  return aStr + anotherStr.reverse 
  # After the above statement value returned should be suhailliahusatpug
  # i.e suhail + "reversed string of suhailgupta"
  end

  # But i get suhailatpug liahus 
```

* * *

*实际代码：*

```
1.9.3p194 :001 > class Tester
1.9.3p194 :002?>   def hidden(aStr,anotherStr)
1.9.3p194 :003?>     anotherStr = aStr + " " + anotherStr
1.9.3p194 :004?>     return aStr + anotherStr.reverse
1.9.3p194 :005?>     end
1.9.3p194 :006?>   end
1.9.3p194 :007 > o = Tester.new
=> #<Tester:0x9458b80> 
1.9.3p194 :008 > str1 = "suhail"
=> "suhail" 
1.9.3p194 :009 > str2 = "gupta"
=> "gupta" 
1.9.3p194 :010 > str3 = o.hidden(str1,str2)
=> "suhailatpug liahus" 
```

这是为什么 ？与其他一些 OOP 语言（如*Java* ）相比，*Ruby*中的问题是否*不同*？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:35:28.520

### 问题

你没有你认为你有的字符串。忘记方法，逐行执行：

```
# You passed these as parameters, so they're assigned.
aStr = 'suhail'
anotherStr = 'gupta'

# You re-assign a new string, including a space.
anotherStr = aStr + " " + anotherStr
=> "suhail gupta"

# You are concatenating two different strings.
aStr + anotherStr
=> "suhailsuhail gupta"

# You concatenate two strings, but are reversing only the second string.
aStr + anotherStr.reverse
=> "suhailatpug liahus" 
```

这一切都是应有的。

### 解决方案

如果您想要“suhailatpugliahus”，那么您需要避免将新值重新分配给*anotherStr*。

```
def hidden(aStr,anotherStr)
    aStr + (aStr + anotherStr).reverse
end  
hidden 'suhail', 'gupta'
=> "suhailatpugliahus" 
```**

# visual-studio-2010 - 合并期间发生异常：使用 ILMerge

> ID：11045618
> 
> 赞同：1
> 
> 时间：2012-06-15T06:27:31.240
> 
> 标签：visual-studio-2010, dll, ilmerge

我正在尝试使用 ILMerge 工具合并 DLL 文件。

我使用的命令行是

```
C:\Program Files (x86)\Microsoft\ILMerge>ilmerge /t:dll /out:NewFile.dll D:\victor\Excelimport.dll D:\victor\BOL3.dll** 
```

但我收到以下错误。谁能告诉我为什么会出现此错误：*不允许未解析的程序集引用*

```
An exception occurred during merging:
Unresolved assembly reference not allowed: Microsoft.Dexterity.Shell.

   at System.Compiler.Ir2md.GetAssemblyRefIndex(AssemblyNode assembly)
   at System.Compiler.Ir2md.GetTypeRefIndex(TypeNode type)
   at System.Compiler.Ir2md.VisitReferencedType(TypeNode type)
   at System.Compiler.Ir2md.VisitClass(Class Class)
   at System.Compiler.Ir2md.VisitModule(Module module)
   at System.Compiler.Ir2md.SetupMetadataWriter(String debugSymbolsLocation)
   at System.Compiler.Ir2md.WritePE(Module module, String debugSymbolsLocation, BinaryWriter writer)
   at System.Compiler.Writer.WritePE(String location, Boolean writeDebugSymbols, Module module, Boolean delaySign, String keyFileName, String keyName)
   at System.Compiler.Writer.WritePE(CompilerParameters compilerParameters, Module module)
   at ILMerging.ILMerge.Merge()
   at ILMerging.ILMerge.Main(String[] args) 
```

# arrays - 在 awk 中访问特殊字符数组

> ID：11045622
> 
> 赞同：1
> 
> 时间：2012-06-15T06:27:37.317
> 
> 标签：arrays, awk

我想使用 打印包含特殊字符的数组的内容`awk`。下面是`awk`我试图打印数组的代码，其中数组`ARRAY`的`xx`索引是。

但是下面的代码会打印`ARRAY1`, `ARRAY2`.... 而不是打印数组的内容。

```
awk 'BEGIN { xx=0; }
{
    if (index($0, "ns:translate") > 0) {
        print $0;
        print "<Name xml:lang=\"sp\"> ARRAY" xx "</Name>";
        xx++;
    } else {
        print $0;
    }
}' $1 
```

数组的内容是：

```
[\u8815S - Perce ~~~~~~~~~ ~~~~~~~~~ ~~\u573  
\u8915S - add ~~~~~~~~~ ~~~~~~~~~ ~~\u583  
\u8615S - sub ~~~~~~~~~ ~~~~~~~~~ ~~\u573  
\u8835S - mult ~~~~~~~~~ ~~~~~~~~~ ~~\u593  
\u8865S - div ~~~~~~~~~ ~~~~~~~~~ ~~\u993
    .....] 
```

该数组有近 100 个元素。谁能帮我访问其中的特殊字符数组`awk`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:53:20.890

“ARRAY”实际上不是一个 awk 数组，而是存在于您调用 awk 的操作系统中，这是一个很好的猜测吗？好吧，如果它有帮助的话，如果“ARRAY”实际上是一个 awk 数组，您将如何在上面编写 awk 脚本：

```
awk '1
index($0, "ns:translate") {
   printf "<Name xml:lang=\"sp\">%s</Name>\n", ARRAY[xx++]
}' $1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:13:45.243

听起来你想要：

```
print "<Name xml:lang=\"sp\">" ARRAY[xx] "</Name>"; 
```

参考：[http ://www.gnu.org/software/gawk/manual/gawk.html#Reference-to-Elements](http://www.gnu.org/software/gawk/manual/gawk.html#Reference-to-Elements)

# ios - 选择单元格时，UITableViewCell 内的 UITextView 隐藏光标

> ID：11045626
> 
> 赞同：4
> 
> 时间：2012-06-15T06:27:57.540
> 
> 标签：ios, uitableview, uitextview

我`UITextView`在`UITableViewCell`. 当用户点击单元格时，我选择它，即将背景图像切换到选定状态。成为第一`UITextView`响应者，但光标被隐藏。当我禁用单元格选择时， UITextView 会显示一个没有问题的光标。

如何选择单元格并`UITextView`使用可见光标开始编辑？:)

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
    if (selected && ![textView isFirstResponder]) {
        [textView setUserInteractionEnabled:YES];
        [textView becomeFirstResponder];
    } else {
        [textView resignFirstResponder];
        [textView setUserInteractionEnabled:NO];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:33:35.140

当我设置时，单元格停止隐藏光标。

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

但在那之后，单元格也停止使用 selectedBackgroundView。所以我将图像设置为 backgroundView 的突出显示状态。

```
cell.backgroundView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"input_up.png"] highlightedImage:[UIImage imageNamed:@"input_up_act.png"]] autorelease]; 
```

并在 setSelected:animated 中切换图像：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
    if (selected && ![textView isFirstResponder]) {
        [textView setUserInteractionEnabled:YES];
        [textView becomeFirstResponder];
    } else {
        [textView resignFirstResponder];
        [textView setUserInteractionEnabled:NO];
    }

    [(UIImageView *)self.backgroundView setHighlighted:selected];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T11:51:09.887

你的光标没有消失也许不是白色的！尝试：[self.tableView setTintColor:[UIColor redColor]];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T08:10:20.720

您可以尝试设置协议方法内部的`selected`属性。`UITableViewCell``UITextViewDelegate``textViewDidBeginEditing:`

如果这不起作用，请创建一个`UIImageView`作为单元格的子视图并在上述方法中更改其内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:05:47.260

当您选择单元格时，文本视图将成为第一响应者，但是光标已被隐藏，您可以取消选择单元格，然后将显示光标。

# java - 如何在 Java 中使用 LDAP 中的 DN 和密码进行绑定？

> ID：11045628
> 
> 赞同：2
> 
> 时间：2012-06-15T06:28:22.720
> 
> 标签：java, ldap, bind

我想从 LDAP 中搜索一个用户，并在获得想要连接（验证）该特定用户的用户后，使用他的 DN 和密码我已成功获取 DN 但不知道如何绑定它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:27:07.837

这是我从[官方文档](http://docs.oracle.com/javase/jndi/tutorial/ldap/security/ldap.html)中获取的示例：

```
// Set up the environment for creating the initial context
Hashtable env = new Hashtable();
env.put(Context.INITIAL_CONTEXT_FACTORY, 
    "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://localhost:389/o=JNDITutorial");

// Authenticate as S. User and password "mysecret"
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, "cn=S. User, ou=NewHires, o=JNDITutorial");
env.put(Context.SECURITY_CREDENTIALS, "mysecret");
DirContext ctx = new InitialDirContext(env); 
```

您必须选择正确的身份验证模型。我之前尝试过并且效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:54:21.343

LDAP bind() 操作对应于 JNDI 中的以下内容：

1.  在环境中构造一个`InitialDirContext`或`InitialLdapContext`具有足够的信息以导致登录，即安全主体和凭据，或

2.  调用最初获得`reconnect()`的`LdapContext`环境中没有任何安全信息，或者具有与不同主体相关的安全信息，但其环境随后已被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T10:06:33.830

当使用 LDAP 与目录服务器建立连接时，连接状态是未经身份验证的。假设服务器管理员允许未经身份验证的请求，则可以在未经身份验证的连接上传输请求。[BIND](https://www.rfc-editor.org/rfc/rfc4511#section-4.2)请求用于更改连接的身份验证状态。

下面是使用[UnboundID LDAP SDK](http://www.unboundid.com/products/ldap-sdk/)进行搜索和验证的示例：[SimpleBindExample.java](http://code.google.com/p/ldap-sample-code/source/browse/trunk/src/main/java/samplecode/bind/SimpleBindExample.java)。此示例搜索给定基础对象、命名属性和用户名的条目，然后尝试使用`simple bind`. 使用 SASL 绑定的示例可以很容易地构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-03T15:28:28.150

如果您已经使用您的凭据打开了**LdapContext ，您可以复制它，在其环境中更改主体+凭据并尝试重新连接：**

```
LdapContext userContext = ldapContext.newInstance(null); // copy context
userContext.addToEnvironment(InitialDirContext.SECURITY_PRINCIPAL, userDn);
userContext.addToEnvironment(InitialDirContext.SECURITY_CREDENTIALS, password);
userContext.reconnect(null); // throws NamingException if creds wrong
userContext.close(); 
```

如果它抛出 NamingException，则凭据是错误的。它是成功的，凭据是好的。;)

（如果您只有 LdapContext，但没有 InitialDirContext，这很有用。）

# android - 如何在 jni 中为 android 设置预建库？

> ID：11045631
> 
> 赞同：0
> 
> 时间：2012-06-15T06:28:28.070
> 
> 标签：android, makefile, android-ndk, java-native-interface

> 嗨，我需要在我的本机代码中使用预构建的库，所以我将库放在 ndk/samples/native-activity 中的示例之后。下面是结构。请有人帮我解决这个错误，找不到 dsplink.h。提前致谢 ：）

![目录结构](../Images/8f3a531b4e31a30e688c27427c69522f.png)

![安卓.mk](../Images/3d7ec30c095a80c535458d464b75dfc6.png)

![错误](../Images/edb6a8f7efeb51c74f0067247e2bf0b1.png)

![你好-jni.c](../Images/f3541d95c26ae526b7f38d1c4a66ac9a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:51:18.297

我认为弗拉基米尔是在正确的轨道上。但是不要将静态库保留在 obj 文件夹中，因为每次运行都会删除该库，而是创建一个 jni/modules/precompiled 或其他东西并将这些东西放在那里...

你所拥有的是一个预编译的静态库。这就是 .a 文件。它旨在将其添加到编译过程中，以便它将在最终的二进制文件中。所以你应该拥有的是：

```
#
# DSPLINK
#
include $(CLEAR_VARS)
LOCAL_MODULE    := dsplink
LOCAL_SRC_FILES  := [path-to-prebuilt-lib]/libdsplink.a
LOCAL_EXPORT_C_INCLUDES := [path-to-dsplink-headers-folder]
include $(PREBUILT_STATIC_LIBRARY) 
```

并且不要忘记将它包含在项目中的链接器中。所以在主共享库的这一部分下面添加这一行：

```
LOCAL_STATIC_LIBRARIES := dsplink 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:16:24.283

您的 C 文件包括**dsplink.h**文件。如果你有它，你应该在 中添加这个文件的完整路径`LOCAL_C_INCLUDES`，例如

```
LOCAL_MODULE     := jnihello
LOCAL_C_INCLUDES := $(LOCAL_PATH)/inlcudes 
```

顺便说一句，如果**dsplink.a**文件是预先构建的，那么您可以安全地将其保存在**libs/**文件夹之外，这样**`make clean`**就不会删除它。你可以使用类似的东西

```
LOCAL_LDFLAGS += $(LOCAL_PATH)/prebuilt/dsplink.a 
```

帮助链接器找到文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T07:01:05.417

libmath-prebuilt.so 是一个预建库，其中包含一些供 buyya_read.c 使用的功能。首先使用 ndk-build 生成 libmath-prebuilt.so 并保存在 jni 文件夹中，buyya_read.c 保存在 elcipse 中的项目中。

```
Android.mk
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := math-prebuilt
LOCAL_SRC_FILES = libmath-prebuilt.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := buyya_read
LOCAL_SRC_FILES := buyya_read.c
LOCAL_LDLIBS    := -llog
LOCAL_SHARED_LIBRARIES := math-prebuilt
include $(BUILD_SHARED_LIBRARY) 
```

您可以在下图中看到项目目录结构。 [![项目目录结构](../Images/2b79ee6e0f7e0a371a7c86130014943c.png)](https://i.stack.imgur.com/h7BYa.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T08:47:49.180

`dsplink`您应该在项目之前在 Android.mk 中定义预建库`jnihello`：

```
#
# DSPLINK
#
include $(CLEAR_VARS)
LOCAL_MODULE    := dsplink
LOCAL_SRC_FILES  := [path]/libs/armeabi/libdsplink.so
LOCAL_EXPORT_C_INCLUDES := [directory-with-dsplink.h-file]
include $(PREBUILT_STATIC_LIBRARY)
...
# jnihello 
```

# web-services - Resellerclub API 在测试中有效，但在 LIVE 中无效

> ID：11045635
> 
> 赞同：-1
> 
> 时间：2012-06-15T06:28:45.527
> 
> 标签：web-services

我正在使用[Resellerclub API](http://manage.resellerclub.com/kb/answer/753)创建客户并注册 DOMAIN。它在测试环境中工作正常：

```
https://test.httpapi.com/ 
```

但是在 LIVE 中使用时同样的事情失败了：

```
https://httpapi.com/ 
```

以下是我用于创建客户以预订域的请求：

测试（效果很好）：

```
https://test.httpapi.com/api/customers/signup.xml?auth-userid=xxxxx&auth-password=xxxxxx&username=prasadvemala@xxxx.com&passwd=xxxxxx&name=Prasad Vemala&company=Prasad Vemala&address-line-1=my address1&city=Fort Collins&state=CO&country=US&zipcode=80526&phone-cc=1&phone=1234567890&lang-pref=en 
```

但在现场（失败）：

```
 https://httpapi.com/api/customers/signup.xml?auth-userid=xxxxx&auth-password=xxxxxx&username=prasadvemala@xxxx.com&passwd=xxxxxx&name=Prasad Vemala&company=Prasad Vemala&address-line-1=my address1&city=Fort Collins&state=CO&country=US&zipcode=80526&phone-cc=1&phone=1234567890&lang-pref=en 
```

以下是我在 LIVE 环境中遇到的错误：

> 远程服务器返回错误：(500) 内部服务器错误。

有人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:07:30.777

The test api environment allows GET calls while for some functions you have to use POST when using the live API.

Adding a customer requieres always the POST Method.

[http://manage.resellerclub.com/kb/answer/804](http://manage.resellerclub.com/kb/answer/804)

Regards, Marco

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:48:44.953

即使是实时通话也包含相同的 URL，包括“测试”，它会起作用

# json - 格式化JSON对象时'{'和'['之间的区别

> ID：11045639
> 
> 赞同：29
> 
> 时间：2012-06-15T06:29:11.033
> 
> 标签：json

格式化 JSON 对象时，'{' 和 '[' 有什么区别吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-15T06:37:56.307

是的，一个`{...}`用于定义单个对象，而另一个`[...]`用于定义一系列对象、值或列表......

对象被定义为这样的`{key:object or list or value , ...}` 列表只不过是对象或列表或值的序列，`[objects or list or values, ... ]`...

`[{'value':1}, {'values':[1,2,3,3, {'a':'a', 'b':'b'}]}, 2, 3, 4]`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-15T06:32:06.387

' `{ }`' 用于**Object**和 ' `[]`' 用于json中的**Array**

喜欢

```
var sampleObj = {
                a:1,
                b:'ab'
                };

var sampleArr = [1,'ab',4]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T06:31:31.017

它们根本没有相同的含义。`{}`表示容器，`[]`表示数组。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-26T15:11:04.143

```
package ravi.kumar;

import java.util.ArrayList;
import java.lang.Object;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
public class SetListClass {
    public static void main(String[] args) {
        SetListClass SetListClass = new SetListClass();
        List<String> list = new ArrayList<String>();
        list.add("country");
        list.add("state");
        list.add("distract");
        list.add("country");
        System.out.println(list);
        System.out.println("----------------------------------------------");
        SetListClass.getset();
        System.out.println("----------------------------------------------");
        SetListClass.getHashMap();
    }
    public void getset()
    {
        Set<String> set = new HashSet<String>();
        set.add("country");
        set.add("state");
        set.add("distract");
        set.add("country");
        System.out.println(set);
        System.out.println(set.remove("country"));
        System.out.println("---------------------------------------------");
        System.out.println(set);
    }
    public void getHashMap() {
        HashMap<String, Object> hashmap = new HashMap<String, Object>();
        hashmap.put("country", "india");
        hashmap.put("state", "bihar");
        hashmap.put("district", "buxar");
        System.out.println(hashmap);
    }
}

output
-------
[country, state, distract, country] ------array
----------------------------------------------
[state, distract, country] ----array
true
---------------------------------------------
[state, distract]
----------------------------------------------
{state=bihar, district=buxar, country=india}  ---Object 
```

# sql-server-2008 - 当查询返回许多结果时，“nil:NilClass 的未定义方法 `[]'”

> ID：11045641
> 
> 赞同：1
> 
> 时间：2012-06-15T06:29:19.707
> 
> 标签：sql-server-2008, sqlite, ruby-on-rails-3.2

我有一个使用 2 个数据库的 rails 3.2 应用程序。一个数据库是默认的 rails 数据库 (sqlite)。另一个数据库是在 SQL Server 2008 上运行的 MicrosoftSQL ODBC。它连接到几台工厂机器，并记录机器生产了多少件等信息。

大约每 3 秒向这个数据库添加新行（它只是一个大表......我没有设计这个），所以有很多行。

基于时间范围执行查询。这是查询的简化版本：

```
@results = History.find_by_sql("SELECT * WHERE created_at > SomeStartTime AND created_at < SomeEndTime") 
```

该查询可以在长达几个小时的时间内正常工作，直到它返回超过 3500 个结果。任何比这更长的时间框架，我都会收到错误

```
undefined method `[]' for nil:NilClass 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:22:18.500

好吧，我是个白痴。我在开发模式下运行，显然任何需要超过半秒的查询都会自动执行此操作。

# multiple-instances - 多个 Jasperserver 实例

> ID：11045647
> 
> 赞同：0
> 
> 时间：2012-06-15T06:30:07.523
> 
> 标签：multiple-instances, jasperserver

需要一些帮助...

我的 ubuntu 上安装了 jasperserver 4.1。它通过捆绑的 tomcat 服务器在 8080 端口上运行。我已经在不同文件夹的同一主机上安装了 jasperserver 4.5，并希望它们一起运行。第二个 tomcat 实例正在侦听 8081 端口。

**问题是当我通过localhost:8080/jasperserver**的 jasperserver Web 界面登录（使用相同的凭据）时，我在**localhost:8081/jasperserver 被抛出**，反之亦然。

存储库肯定是不同的。也许 jasperserver 使用一些单一的身份验证机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:53:17.247

我认为它与会话/cookie 机制有关，因为如果我在不同的浏览器中打开它们（localhost:8080/jasperserver，localhost:8081/jasperserver），一切正常。

# c++ - 查看大错误输出的顶行

> ID：11045648
> 
> 赞同：1
> 
> 时间：2012-06-15T06:30:09.020
> 
> 标签：c++, linux, ubuntu, head

在编译过程中，屏幕上会抛出许多错误。要开始解决它们，我需要向上滚动 3、4 页。我试着对他们做头，但他们仍然来到终端。

```
g++ -std=c++0x testCoverDownloader.cpp -I /usr/include/QtCore/ -I /usr/include/QtGui 2>&1 | head 
```

如何我首先看到最上面的错误，然后向下滚动页面？上面的代码剪切输出以显示前 10 行。我想要的是所有错误，但从一开始就不需要向上滚动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:41:17.693

除了使用 2>&1 将 STDERR 结果发送到 STDOUT 之外，您可能还想尝试 tee 以便将结果放入文件中以供以后查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:37:21.063

如果你使用 vim，你可以试试`<your compile statement> 2>&1 | vim -`That should pipe `STDERR`and `STDOUT`to vim for 查看。

编辑：在`@joachim pilberg`评论中添加以提供更准确的答案：

> 重要的部分是重定向部分：来自编译器的错误放在 stderr 上。要将其传送到头部，或多或少的查看器甚至像 vim 这样的编辑器，您需要将 stderr 重定向到 stdout。这就是 &2>1（或更准确地说是 2>&1）所做的。有关重定向的更多信息，请参阅 shell 的手册页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T08:28:46.967

您还可以添加 -Wfatal-errors 编译器选项以在第一个错误后停止编译

# templates - 为每个 N 元素循环显示一些 html

> ID：11045649
> 
> 赞同：2
> 
> 时间：2012-06-15T06:30:15.897
> 
> 标签：templates, erlang, chicagoboss

我刚刚和 Chicago Boss 一起学习 Erlang，想知道我怎么能做类似的事情（在伪代码中）：

```
foreach (items as item)
    if (i % 10 == 0)
        <tr>
    endif
    <td>...</td>
    if (i++ % 10 == 0)
        </tr>
    endif
endforeach 
```

在我的模板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:45:50.460

Erlang 是函数式语言，所以惯用的方式是以函数式的方式来做。我们准备了功能，它将首先将您的数据制成表格：

```
-module(tabify).

-export([tabify/2]).

tabify(N, L) when is_list(L), is_integer(N), N > 0 ->
  tabify_(N, L).

tabify_(_, []) -> [];
tabify_(N, L) ->
  {Row, Rest} = row(L, N),
  [Row|tabify_(N, Rest)].

row(L, N) ->
  row(L, N, []).

row([], _, Accu) -> {lists:reverse(Accu), []};
row(Rest, 0, Accu) -> {lists:reverse(Accu), Rest};
row([H|T], N, Accu) -> row(T, N-1, [H|Accu]). 
```

现在我们可以通过以下方式使用它：

```
1> c(tabify).
{ok,tabify}
2> Data = [integer_to_list(X) || X <- lists:seq(1,100)].
["1","2","3","4","5","6","7","8","9","10","11","12","13",
 "14","15","16","17","18","19","20","21","22","23","24","25",
 "26","27","28",
 [...]|...]
3> Table = tabify:tabify(10,Data).
[["1","2","3","4","5","6","7","8","9","10"],
 ["11","12","13","14","15","16","17","18","19","20"],
 ["21","22","23","24","25","26","27","28","29","30"],
 ["31","32","33","34","35","36","37","38","39","40"],
 ["41","42","43","44","45","46","47","48","49","50"],
 ["51","52","53","54","55","56","57","58","59","60"],
 ["61","62","63","64","65","66","67","68","69","70"],
 ["71","72","73","74","75","76","77","78","79","80"],
 ["81","82","83","84","85","86","87","88","89","90"],
 ["91","92","93","94","95","96","97","98","99","100"]]
4> T = [["<tr>", [["<td>", Item, "</td>"] || Item <- Row ], "</tr>"]|| Row <- Table].
[["<tr>",
  [["<td>","1","</td>"],
   ["<td>","2","</td>"],
   ... 
```

而不是让 io 子系统完成其余的工作。上面的结构是众所周知的 iolist ，如果你把它放在任何 io 中，它将以与以下相同的方式正确序列化：

```
6> iolist_to_binary(T).
<<"<tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td></tr><tr><t"...>> 
```

如果表中有数千个项目并且效率至关重要，那么您可以将所有列表常量转换为二进制。也可以在`Data`. 作为最后的手段，您可以`tabify/2`以更有效但可读性更低的方式重写和格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:12:08.773

如果你需要“tabify”一个列表，你可以使用我刚刚创建的这个函数：

```
tab_list(List1) ->
    lists:append(
        lists:flatten(
            lists:map(
                fun({Item, Idx}) -> 
                    if 
                        ((Idx - 1) rem 10) == 0 -> lists:concat(["<TR><TD>", Item, "</TD>"]); 
                        (Idx rem 10) == 0 -> lists:concat(["<TD>", Item, "</TD></TR>"]);
                        true -> lists:concat(["<TD>", Item, "</TD>"])
                    end
                end,
            lists:zip(List1, lists:seq(1, length(List1)))
            )
        ),
    if (length(List1) rem 10) == 0 -> ""; true -> "</TR>" end
). 
```

当传递一个类似的列表`["a", "b", "c", "d", "e", "f", "g", "h", "i", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "z"]`时，会产生以下结果：

```
"<TR><TD>a</TD><TD>b</TD><TD>c</TD><TD>d</TD><TD>e</TD><TD>f</TD><TD>g</TD><TD>h</TD><TD>i</TD><TD>l</TD></TR><TR><TD>m</TD><TD>n</TD><TD>o</TD><TD>p</TD><TD>q</TD><TD>r</TD><TD>s</TD><TD>t</TD><TD>u</TD><TD>v</TD></TR><TR><TD>z</TD></TR>" 
```

这是你需要的吗？只要问你有什么问题！

# oracle - 我们可以在分析表的分区时使用并行性吗？

> ID：11045652
> 
> 赞同：0
> 
> 时间：2012-06-15T06:30:20.843
> 
> 标签：oracle, indexing, database-partitioning

分析分区需要几个小时。是否有任何命令可以并行分析表的分区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:52:44.377

如果您`DBMS_STATS`用来收集统计数据，您有几个选择。如果您要进行显式调用，`DBMS_STATS.GATHER_TABLE_STATS`并且`DBMS_STATS.GATHER_INDEX_STATS`可以使用该`degree`参数来设置并行度。您还可以使用`SET_*_PREFS`DBMS_STATS 中的各种例程设置默认并行度，按对象类型或整个数据库 ( `SET_DATABASE_PREFS`) 设置默认并行度。例如

```
DBMS_STATS.SET_DATABASE_PREFS('DEGREE', '10'); 
```

在对 DBMS_STATS.GATHER_TABLE_STATS 的后续调用中将默认设置为 10。或者您可以只使用 GATHER_TABLE_STATS 的度数参数，如

```
DBMS_STATS.GATHER_TABLE_STATS(ownname => 'A_SCHEMA',
                              tabname => 'A_TABLE',
                              degree  => 10); 
```

如果你`ANALYZE`用来分析你的表——好吧，如果我没记错的话，你可能应该切换到 DBMS_STATS，因为自 Oracle 9 以来 ANALYZE 已经过时了。该`DBMS_STATS`包有很多带有很多参数的例程，但大多数参数都有合理的默认值，因此不需要指定。

[您可以尝试在dba.stackexchange.com](http://dba.stackexchange.com)上重新发布此问题

分享和享受。

# javascript - 谷歌浏览器扩展制作中的内容安全策略错误

> ID：11045653
> 
> 赞同：10
> 
> 时间：2012-06-15T06:30:42.687
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-security-policy

我正在制作一个 chrome 扩展，它将在新标签页中打开页面上的所有链接。

这是我的代码文件：

清单.json

```
{
  "name": "A browser action which changes its icon when clicked.",
  "version": "1.1",
    "permissions": [
    "tabs", "<all_urls>"
  ],
 "browser_action": {     
    "default_title": "links",      // optional; shown in tooltip
    "default_popup": "popup.html"        // optional
  },
 "content_scripts": [
    {
    "matches": [ "<all_urls>" ],
      "js": ["background.js"]
    }
  ],
  "manifest_version": 2
} 
```

popup.html

```
<!doctype html>
<html>
  <head>
    <title>My Awesome Popup!</title>
    <script>
function getPageandSelectedTextIndex() 
  { 
    chrome.tabs.getSelected(null, function(tab) { 
    chrome.tabs.sendRequest(tab.id, {greeting: "hello"}, function (response) 
    { 
        console.log(response.farewell); 
    }); 
   }); 
        } 
chrome.browserAction.onClicked.addListener(function(tab) { 
        getPageandSelectedTextIndex(); 
});
         </script>
  </head>
  <body>
    <button onclick="getPageandSelectedTextIndex()">
      </button>
  </body>
</html> 
```

背景.js

```
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if (request.greeting == "hello")
    updateIcon();  

});
function updateIcon() {
  var allLinks = document.links;
  for (var i=0; i<allLinks.length; i++) {
    alllinks[i].style.backgroundColor='#ffff00';

}
} 
```

最初我想突出显示页面上的所有链接或以某种方式标记它们；但我收到错误“由于内容安全策略而拒绝执行内联脚本”。

当我按下弹出窗口内的按钮时，出现此错误：`Refused to execute inline event handler because of Content-Security-Policy`.

请帮我修复这些错误，这样我就可以使用我的 chrome 扩展程序在新选项卡中打开所有链接。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-15T06:45:35.057

其后果之一`"manifest_version": 2`是默认启用[内容安全策略。](http://www.w3.org/TR/CSP/)Chrome 开发人员选择对其进行严格限制，始终禁止内联 JavaScript 代码——只允许执行放置在外部 JavaScript 文件中的代码（以防止扩展中[的跨站点脚本漏洞](http://en.wikipedia.org/wiki/Cross-site_scripting)）。因此，与其在其中定义`getPageandSelectedTextIndex()`函数，`popup.html`不如将其放入`popup.js`文件中并将其包含在`popup.html`：

```
<script type="text/javascript" src="popup.js"></script> 
```

并且`<button onclick="getPageandSelectedTextIndex()">`必须更改，`onclick`属性也是一个内联脚本。您应该改为分配一个 ID 属性：`<button id="button">`. 然后，`popup.js`您可以将事件处理程序附加到该按钮：

```
window.addEventListener("load", function()
{
  document.getElementById("button")
          .addEventListener("click", getPageandSelectedTextIndex, false);
}, false); 
```

# postgresql - PGSQL 日期 INTERVAL 函数的 Yii 语法

> ID：11045654
> 
> 赞同：0
> 
> 时间：2012-06-15T06:30:48.427
> 
> 标签：postgresql, yii, sql-date-functions

我被锁定如何填写以下代码

```
$criteria->addSearchCondition('esdate', 'now()-interval \'1 day\'', false, 'AND', '>'); 
```

如果我单独使用“now()”，它可以工作，但是一旦我添加了间隔函数，我就无法完成它。我猜可能不接受转义的引号，但找不到任何正确的语法。

任何帮助都超过赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:52:02.697

```
$criteria->addCondition( "esdate > NOW() - INTERVAL 1 DAY" ); 
```

# javascript - 这是什么 hr = hr>=12 ？hr-12：小时；方法？

> ID：11045655
> 
> 赞同：1
> 
> 时间：2012-06-15T06:30:53.107
> 
> 标签：javascript

我正在练习这个[https://developer.mozilla.org/en/Canvas_tutorial/Basic_animations](https://developer.mozilla.org/en/Canvas_tutorial/Basic_animations)时钟教程。代码中的所有内容对我来说都很清楚。接受这个`hr = hr>=12 ? hr-12 : hr;`我不清楚。可能是一个`if else`声明。

任何人都可以解释这段代码在做什么吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:32:52.357

它称为三元运算

它的意思是

```
if(hr>=12)
 hr=hr-12;
else
 hr=hr; 
```

以下就**足够了**

```
if(hr>=12)
     hr=hr-12; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T06:32:52.700

```
if (hr >= 12) {
   hr = hr - 12;
} 
```

如果`hr`不符合该标准，`hr`则应有效地保持不变。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T06:34:32.357

这是三元运算符`(?:)` 这里是对这里所做的事情的简单解释：

```
if(hr>=12)
{
    hr=hr-12;
}
//or else hr will have its same value 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T06:33:41.593

它是一个三元运算符，形式为：

```
condition ? if_true | if_false 
```

如果您添加更多括号以提高可读性，它可以变成：

```
hr = ( (hr >= 12) ? (hr - 12) : hr ) 
```

也就是说，如果大于 12，则减去 12，然后存储回 hr。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T06:37:10.390

它的意思是：

```
if(hr>=12)
{
  hr = hr - 12;
} 
```

一般来说：

```
x= condition ? y : z 
```

如果条件为真，则`x = y`，否则`x = z`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-15T06:35:52.673

`hr= hr>=12 ? hr-12 : hr;`是一样的`if( hr >= 12 ) hr = hr-12 else hr = hr;`

the`bool ? expr_a : expr_b`是一个运算符，当`bool`为真时，计算 expr_a 并将其值用作整个 expr 的值，否则 expr_b 将是。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-15T07:00:52.543

它的效果与此相同：

```
hr %= 12;   //equivalent to -> hr = hr>=12 ? hr-12 : hr; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-15T06:36:30.157

它被称为[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)。

# delphi - 如何使用 Delphi 并行化检查拼写？

> ID：11045657
> 
> 赞同：5
> 
> 时间：2012-06-15T06:31:19.520
> 
> 标签：delphi, parallel-processing, spell-checking

我有一种用 Delphi 编写的拼写检查器。它逐句分析文本。它在解析每个句子后根据一些规则对错误的项目进行着色。用户能够中断这个过程，这很重要。我如何使用一些 3rd 方 Delphi 库来并行化这个过程？在当前状态下，我在检查后立即进行了句子着色。因此，用户可以看到进度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T08:22:05.663

该算法将是这样的：

*   创建多个工人。
*   在每个工作人员中创建一个拼写检查器。
*   抓取文本并将其拆分为工作单元（单词或句子）。每个工作单元都必须附有原文的位置。
*   将工作单位发送给工人。好的方法是将数据发送到工作人员从中获取工作单元的公共队列中。队列必须支持多个读取器，或者您必须使用锁定来访问它。
*   每个工人拿一个工作单元，运行拼写检查并将结果（连同原始文本中的位置）返回给所有者。
    *   返回结果的最简单方法是向主线程发送消息。
    *   或者，您可以将结果写入结果队列（必须使用锁定或支持多个写入器），然后应用程序可以轮询这些结果（来自计时器或 OnIdle 处理程序）。

多个拼写检查器如何访问字典是另一个问题。您可以在每个工作人员中加载字典的副本，或者您可以使用锁保护对字典的访问（但这会减慢速度）。如果幸运的话，字典对于阅读来说是线程安全的，并且您可以在不锁定的情况下进行同时查询。

该问题的适当 OmniThreadLibrary 抽象将是[ParallelTask](http://www.thedelphigeek.com/2011/09/life-after-21-parallel-data-production.html)​​ 或[BackgroundWorker](http://www.thedelphigeek.com/2012/01/background-worker.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T08:39:39.710

要并行化，只需从 TThread 创建一个新的派生类，从中创建一个对象，将部分作业交给新线程，运行 Execute，然后在主线程中收集结果。

像这样：

```
TMySpellChecker = class(TThread)
protected
  FText: String;
  FResult: String; 
public
  procedure Execute; override;
  property Text: String read FText write FText;
  property Result: String read FResult write FResult;
end;

TMySpellChecker.Execute;
begin
  // Analyze the text, and compute the result
end; 
```

在主线程中：

```
NewThread := TMySpellChecker.Create(True); // Create suspended
NewThread.Text := TextSegment;
NewThread.Execute; 
```

然后线程对象将在后台进行分析，而主线程继续运行。

要处理结果，您需要为线程对象的 OnTerminate 事件分配一个处理程序：

```
NewThread.OnTerminate := HandleMySpellCheckerTerminate; 
```

这必须在对线程对象运行 Execute 之前完成。

为了允许中断，一种可能性是将正文分成段，将段放在主线程中的列表中，然后使用线程对象逐个分析段。然后，您可以在每次运行之间允许中断。

# php - 在 PHP 中将数组元素添加到子数组

> ID：11045660
> 
> 赞同：3
> 
> 时间：2012-06-15T06:31:21.667
> 
> 标签：php, arrays

我有

```
$statement = Array
(
    [0] => Array
        (
            [red] => 06-01-2012
            [green] => 436
            [blue] => MEDIA
            [black] => 2006
        )

    [1] => Array
        (
            [red] => 06-01-2012
            [green] => 430
            [blue] => MEDIA
            [black] => 2007
        )

); 
```

我想`[flex] => 1`通过使用类似 $statement[1] 的东西添加到数组 1 中。我尝试过数组合并，但他们将数组 0 和 1 组合在一起。基本上我想添加到最新的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:37:30.157

如果我理解你，试试这个：

```
$statement[count($statement)-1]['flex'] = 1; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T06:42:43.887

```
<?php
$statement = array(
    array(
            "red" => 06-01-2012,
            "green" => 436,
            "blue" => "MEDIA",
            "black" => 2006
        )

    ,array(
            "red" => 06-01-2012,
            "green" => 436,
            "blue" => "MEDIA",
            "black" => 2006
        )

);

echo "<pre>";
print_r($statement); //first

$statement[1]["flex"] = 1;

print_r($statement); //second
?> 
```

# javascript - 什么触发“Internet Explorer 已修改此页面以帮助防止跨站点脚本。”？

> ID：11045665
> 
> 赞同：6
> 
> 时间：2012-06-15T06:31:38.800
> 
> 标签：javascript, internet-explorer, cross-domain, jsonp

我正在尝试为 Internet Explorer 中缺少 CORS 功能实施一种解决方法。对于 GET 请求，我使用 JSONP，这里没问题。对于小的 POST/DELETE/PUT 请求，我还通过 GET 隧道请求来使用 JSONP，但这不适用于较大的请求（因为 GET URL 的长度是有限的）。因此，对于大数据，我尝试通过 iframe 实现表单 POST。由于同源策略，我无法读取此 POST 的响应，因此我在发布数据后通过 JSONP GET 请求获取响应。效果很好，但有时我在 IE 9 中收到一个奇怪的警告：

```
Internet Explorer has modified this page to help prevent cross-site scripting. 
```

首先，我想知道 IE 到底在做什么，因为即使出现此警告，一切仍然正常。然后我发现 IE 用“#”字符替换了 POST 答案后隐藏的 iframe 的内容（我无法阅读并且无论如何都需要）。

因此，即使出现此警告，我的解决方法仍然有效，但我想知道究竟是什么触发了此警告，所以也许我可以修改我的 CORS 解决方法以消除此警告。有什么提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T15:55:20.570

You can configure the `X-XSS-Protection` header on your server. This will tell IE to disable XSS protection on your site.

# linq - 许多插入的 LINQ DataContext 持久性最佳实践

> ID：11045667
> 
> 赞同：1
> 
> 时间：2012-06-15T06:31:42.363
> 
> 标签：linq, linq-to-sql, optimization

我有一个在我的应用程序中使用的记录器类，包括请求和线程。记录器由每个 Log.Insert(string text) 的数据库插入组成。记录器是一个静态类，每次调用 Insert 都会创建一个新的数据库上下文。可能有很多对 Insert 的调用，并且同时有很多数据库上下文不利于优化。（我有时会遇到数据库超时，因为跨应用程序的 sql 操作太多 - 所以确实需要优化）。

这可以通过在 Logger 类的静态成员中创建和存储单个数据库上下文来优化，该成员仅用于 Log.Inserts？或者这会失败吗？

记录器类的简化版本；

```
[Table]
public class Log
{
   [Column]
   public string Text { get; set; }

   private static DataContext DatabaseContextInsert { get; set; }

   public static void Insert(string text)
   {
      if (DatabaseContextInsert == null)
      {
          DatabaseContextInsert = DataContextHelper.GetDataContext();            
      }

      var log = new Log { Text = text };          

      lock (DatabaseContextInsert)
      {
        DatabaseContextInsert.GetTable<Log>().InsertOnSubmit(log);
        DatabaseContextInsert.SubmitChanges();
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:06:58.283

使用静态记录器将是一个非常糟糕的主意。除了同步问题之外，您还会遇到永久保存在数据上下文中的所有项目的问题（数据上下文喜欢保留它已经看到的对象）。

您提到您认为大量数据上下文不利于优化，但连接可能已经在池化（默认情况下它会这样做），因此数据上下文实际上并不是很“重”。

如果不需要同步插入日志条目，我会很想做一些事情，比如将新的日志项放入队列（同步访问），并有一个工作线程每 10 秒清空一次队列，基本上是在做类似的事情：

```
// adding an item
lock(queue) { queue.Enqueue(text); }

// worker code, every 10 seconds
List<string> items = new List<string>();
lock(queue) {
    while(queue.Count != 0) items.Add(items.Dequeue);
}
using(var ctx = CreateContext()) {
    foreach(var text in items) {
        ctx.Logs.InsertOnSubmit(new Log { Text = text });
    }
    ctx.SubmitChanges();
} 
```

然后只有一个线程正在写入数据库，并且您的事务要少得多。

如果这*不是*一个选项，并且您需要同步进行，那么坦率地说，我会将几个级别降为“dapper”之类的东西，即

```
using(var conn = CreateOpenConnection()) {
    conn.Execute("insert [Log]([Text]) values(@text)", new {text});
} 
```

这完全消除了对数据上下文的需求*，*更简单，并且无需考虑事务。

# php - 未定义变量： C:\wamp\www\forms.php 中的 POST

> ID：11045670
> 
> 赞同：0
> 
> 时间：2012-06-15T06:31:49.787
> 
> 标签：php, html

以下代码不起作用。 `forms.php`和`forms.html`是文件名，都保存在根目录中。

错误是“ `Undefined variable: POST in C:\wamp\www\forms.php`”。我知道我也没有正确处理多个输入。任何人都可以帮助解决这些问题吗？

```
<html>
<head>
<title>
Registration for Placement
</title> 
</head>

<body>
<h1> Start your Placement process...NOW...</h1>
<form action = "forms.php" method = "POST">
<p> Name <input name = "Name" type = "Text" size = "20" maxlength = "30">
<p> Branch: CSE<input name = "branch" type = "radio" >
            ECE<input name = "branch" type = "radio">
            MEC<input name = "branch" type = "radio">
<p> Languages Known:English<input name ="lang[]" type = "checkbox" value = "1">
                    Hindi<input name = "lang[]" type = "checkbox" value = "2">
                    Tamil<input name = "lang[]" type = "checkbox" value = "3">
<p> State<select name = "state" size = "2">
        <option> Jammu and Kashmir
        <option> Delhi
        <option> Tamil Nadu
        <option> M.P
        <option> U.P
        <option> Maharashtra
        </select>
<p> Thanks for submimitting the form
<p><input type = "Submit" value = "enter" >
    <input type = "Reset" value = "clear"  >

    </form>
</body>

</html>

<html>
<head>
<title>Thank You</title>
</head>
<body>
<h1>Thank You</h1>
<p>Thank you for registering. Here is the information you submitted:</p>

<p>Name </p><p><?php echo  $POST['Name']; ?></p>
<p>Branch </p><p><?php echo $POST["branch"];?></p>
<p>Lang </p><p><?php echo $POST["lang[0]"];?></p>
<p>STATE </p><p><?php echo $POST["state"];?></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:33:09.707

代替`$POST`, 使用`$_POST`, 更多信息：

[http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T06:43:32.327

你应该这样写

$_POST['Name']
或
$_REQUEST['Name']

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T10:21:58.780

不太了解，但也许“双引号”会造成问题。尝试使用

```
$_POST['state']; 
```

这可能会奏效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T06:35:16.073

您`$_POST`也不`$POST`应该检查变量是否已定义和设置，您还应该`htmlspecialchars()`在输出时使用用户输入来避免 XSS 漏洞：

```
<?php 
echo isset($POST['Name']) ? '<p>'.htmlspecialchars($_POST['Name']).'</p>' : null; 
?> 
```

# facebook - 使用 FB 发送按钮

> ID：11045673
> 
> 赞同：1
> 
> 时间：2012-06-15T06:32:01.110
> 
> 标签：facebook, codeigniter

我是 FB 集成的新手。我想使用 FB 发送按钮，向我的 facebook 朋友发送邀请。

下面是我使用的代码。

```
<div>
 <span> To choose friends from your facebook list , click here :    </span >
 <div id="fb-root"></div>
 <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) return;
       js = d.createElement(s); js.id = id;
       js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
         fjs.parentNode.insertBefore(js, fjs);
         }(document, 'script', 'facebook-jssdk'));</script>

 <div class="fb-send" data-href="http://61.12.14.179/fb_test.html"></div>

 </div> 
```

我得到一个 fb 发送按钮。但是当我点击fb发送按钮，选择我的朋友发送邀请时，它显示为*“我们在发送您的消息时遇到以下错误”*并且没有显示错误消息。

消息也没有发送。有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T06:47:07.723

尝试类似：

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({
    appId  : 'your_app_id',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true  // parse XFBML
  });
</script>

<fb:like href="your_url" send="true" width="450" show_faces="false" font=""></fb:like> 
```

这将显示有效的发送按钮。

# node.js - 通过 NGINX 的 Node.JS、HAproxy 和 Socket.IO，应用程序位于子目录中

> ID：11045674
> 
> 赞同：3
> 
> 时间：2012-06-15T06:32:03.933
> 
> 标签：node.js, nginx, socket.io, subdirectory, haproxy

我已经尝试了几个小时，并阅读了这个网站和互联网所提供的内容。我似乎无法让 Socket.IO 在这里正常工作。我知道默认情况下 nginx 不能处理 Socket.IO 但是，HAproxy 可以。我希望 nginx 通过 unix 套接字为 Node 应用程序提供服务，并且效果很好。每个都有一个由 nginx 设置的子目录位置，但是，现在我需要 Socket.IO 用于最后一个应用程序，此时我无法配置。

我有最新的 socket.io、HAproxy 1.4.8 和 nginx 1.2.1。运行 ubuntu。

所以重申一下，我需要通过 nginx 让 socket.io 工作到子目录中的节点应用程序，例如：localhost/app/。

```
Diagram:
WEB => HAproxy => Nginx => {/app1 app1, /app2 app2, /app3 app3} 
```

如果我能提供其他任何东西，现在就让我来吧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:51:08.730

没有理由让“让 socket.io 通过 nginx 工作”。相反，您只需将 HAProxy 直接路由到 Socket.IO（中间没有 Nginx）。

我建议您查看以下链接：

*   [https://gist.github.com/1014904](https://gist.github.com/1014904)
*   [http://blog.mixu.net/2011/08/13/nginx-websockets-ssl-and-socket-io-deployment/](http://blog.mixu.net/2011/08/13/nginx-websockets-ssl-and-socket-io-deployment/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:07:31.137

您可以在端口 80 上使用 Haproxy 来前置多个在不同端口上运行的 node.js 应用程序。

例如

URL:80/app1 -> haproxy -> 节点 app1:8080

URL:80/app2 -> haproxy -> 节点 app2:8081

URL:80/app3 -> haproxy -> 节点 app3:8083

更新：

以下是一个示例 HAPROXY 配置，它将请求发送`http://server:80/hello`到`localhost:20001`和`http://server:80/echo`到`localhost:20002`

```
后端你好
    服务器 hellosvr 127.0.0.1:20002

后端回声
    服务器 echosvr 127.0.0.1:20001

前端 http_in
    选项 httpclose
    option forwardfor except 127.0.0.1 # stunnel 已经添加了 header
    绑定 *:80
    acl rec_hello path_beg /hello/
    use_backend hello if rec_hello
    acl rec_echo path_beg /echo
    如果 rec_echo 使用_backend echo

```

# javascript - 我可以在 javascript 中链接子字符串检查吗？

> ID：11045677
> 
> 赞同：0
> 
> 时间：2012-06-15T06:32:15.497
> 
> 标签：javascript

我正在使用以下代码：

```
if (store.getItem('TopicID') != "00") 
```

TopidID 始终是 4 位数字，我需要做的是更改它以检查最后两位数字是否为“00”。

作为上述的一部分，我可以通过添加“.substring（from，to）”来做到这一点，还是我需要将它放入一个变量中然后检查变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:35:14.253

用于`if (!/00$/.test(store.getItem('TopicID'))`检查最后 2 位不构成“00”的数字。这样，值的长度`store.getItem('TopicID')`无关紧要，您始终检查值的最后两个字符，并且不需要`substring` “链接”。

顺便说一句，我应该在这里`store.getItem('TopicID')`返回一个`String`。

为了完整并回应 Paul Phillips 的评论： in `!/00$/.test([somestring])`,`/00$/`是一个[正则表达式](http://www.regular-expressions.info/)，一个用于描述搜索模式的特殊文本字符串。在这种情况下，这意味着：对于由 产生的字符串`store.getItem('TopicID')`，检查是否可以找到 2 个连续的零，其中`$`- 符号表示“检查字符串末尾的该模式”。

在“链接”这个主题上更完整：只要要链接的对象包含方法，就可以链接一切。一个完全荒谬的例子：

```
Number(/00$/.test('0231')) //convert a boolean to a Number
 .toFixed(2)               //a Number has the toFixed method
 .split('.')[1]            //toFixed returns a String, which has method split
 .substr(1)                //the second element is a string, so substr applies
 .concat(' world')         //still a string, so concat will do
 .split(' ')               //string, so split works
 .join(' hello ')          //from split an array emerged, so join applies
;
//=> result of this chain: '0 hello world' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:40:50.957

尝试使用[substr](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)或带有负*start的*[substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)：

 *```
if ( store.getItem('TopicID').substr(-2) !== "00" ){...} 
```

或者

```
if ( store.getItem('TopicID').substring(-2) !== "00" ){...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:42:27.490

链接它会起作用。提取局部变量也是如此。所以不，你*不需要*。如果您认为它使代码更具可读性，请执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T06:43:03.007

你也可以`slice`使用

```
if (store.getItem('TopicID').slice(2,4) != "00") {
      // Do Your Stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T06:44:44.287

> 我可以通过添加“.substring（from，to）”来作为上述的一部分吗？

是的你可以。但是，您的语法错误。

```
if (store.getItem('TopicID').substring( 2 ) != "00") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T06:47:14.130

如果是四位数，你可以使用

```
if (store.getItem('TopicID') % 100) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T06:56:20.297

```
 var yourString = (store.getItem('TopicID'))
 if(yourString.substring((yourString.length - 2), 2) == "00") 
```

上面的代码并不关心你的字符串有多长。它获取最后两位数字并与“00”进行比较*

# blackberry - 从黑莓中的设备默认浏览器获取 url

> ID：11045681
> 
> 赞同：0
> 
> 时间：2012-06-15T06:32:45.730
> 
> 标签：blackberry, browser

我正在开发一个后台应用程序，我需要在其中获取一些正常设备功能的设备事件。关于哪个我需要获取用户在设备默认浏览器中点击的 URL。意味着如果用户使用黑莓设备默认浏览器打开一个 url，我想在后台运行的应用程序中以编程方式检索该 url。

这可能吗，请让我知道您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:12:27.147

没有 BlackBerry API 可以获取在浏览器中打开的 URL，也没有可以访问浏览器历史记录的 API。

您可以将 ApplicationMenuItem 添加到浏览器应用程序。当用户单击它时，您的应用程序将传递当前页面的 URL。

# php - JSON编码mysql查询

> ID：11045682
> 
> 赞同：0
> 
> 时间：2012-06-15T06:32:45.967
> 
> 标签：php, mysql, json

我有一个执行 mysql 查询的脚本，如果有行，它会编码一条消息。但我希望它对消息和查询的整个结果进行编码。这是我使用的代码：

```
<?php
include 'config.php';

// Connect to server and select databse.
mysql_connect("$dbhost", "$dbuser", "$dbpass")or die("cannot connect");
mysql_select_db("$dbname")or die("cannot select DB");

$id = @$_POST['id'];

// To protect MySQL injection (more detail about MySQL injection)
$id = stripslashes($id);
$id = mysql_real_escape_string($id);

$sql="Select * from table1 where ID='$id'";

$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $id and $mypassword, table row must be 1 row

if ($count == 1) {
     $message = array('status' => 'ok');
} 

header('Content-Type: application/json');
print '{"key":'. json_encode($message) .'}'; 
?> 
```

所以我希望 JSON 看起来像：

`{ "key": [ { "ID": "1", "NAME": "Test", "ADDRESS": "Test-street 123", "CONDITION": "false", "status": "ok" } ] }`

那么我应该在 $message 中添加什么来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:41:23.857

您在那里缺少一个关联数组。

```
$message = array(array(
             "ID"        => "1",
             "NAME"      => "Test",
             "ADDRESS"   => "Test-street 123",
             "CONDITION" => "false",
             "status"    => "ok"
           ));
echo json_encode($message);
// [{"ID":"1","NAME":"Test","ADDRESS":"Test-street 123","CONDITION":"false","status":"ok"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:45:27.493

您必须先获取查询结果，然后再尝试将其编码为 JSON。例如 ：

```
$result=mysql_query($sql);
$message->key = array();
while( $row = $db->sql_fetchrow($result) ) {
    $message->key[] = $row; // or a specific dispatching of values in keys
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:06:55.150

使用 mysql_fetch_assoc 获取 mysql 结果，如下所示：-

```
if ($count == 1) {
    $message = mysql_fetch_assoc($result);
    $message['status'] = 'ok';
    $message = array($message);
    print '{"key":'. json_encode($message) .'}';
} 
```

# java - NewRatio 参数不适用于 CMS 垃圾收集器

> ID：11045691
> 
> 赞同：3
> 
> 时间：2012-06-15T06:33:38.187
> 
> 标签：java, garbage-collection, jvm, jvm-hotspot, jvm-arguments

我为我的应用程序切换到 CMS 收集器，应用程序的吞吐量减少了一半。从 GC 日志中，我看到发生小 GC 的频率很高（周围`10 per second`）。我分配了一个堆大小`4G`。JVM 默认为年轻代使用非常小的尺寸（小于`40MB`）。我想通过增加年轻一代的规模来尝试 CMS。您能否为此指出正确的 JVM 参数。

*   我尝试了 -XX:NewRatio 但 JVM 忽略了这个参数，并且年轻一代的大小没有变化
*   我的java版本是`java version "1.6.0_14"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T07:12:27.117

你是如何设置`-XX:NewRatio`的，在哪个 JVM 版本上？

反正。如果您也在设置`-XX:MaxNewSize=size`，这是一个功能，或者如果您也在设置`-XX:+UseConcMarkSweepGC`这是一个[已知的错误](http://bugs.sun.com/view_bug.do?bug_id=6862534)，它可以被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:21:33.923

这个对我有用：

默认值（Windows 上的 Java 7 64 位）：

```
java -Xmx4g -Xms4g -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -version 
java版本“1.7.0_07”
Java(TM) SE 运行时环境 (build 1.7.0_07-b10)
Java HotSpot(TM) 64 位服务器 VM（内部版本 23.3-b01，混合模式）
堆
 par 新一代总计613440K , 已使用 21813K
  伊甸园空间 545344K，已使用 4%
  来自空间 68096K，已使用 0%
  到空间 68096K，0% 已使用
 并发 mark-sweep 生成总数3512768K，已使用 0K
 concurrent-mark-sweep perm gen 总计 21248K，已使用 2084K

```

现在指定比率参数（大致相同的结果）：

```
java -Xmx4g -Xms4g -XX:+PrintGCDetails -XX:NewRatio=6 -XX:SurvivorRatio=8 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -version
 par 新一代总539264K , 使用 19174K
  伊甸园空间 479360K，已使用 4%
  来自空间 59904K，已使用 0%
  到空间 59904K，已使用 0%
 并发 mark-sweep 生成总数3595136K，已使用 0K
 concurrent-mark-sweep perm gen 总计 21248K，已使用 2084K

```

然后是完全不同的新/旧和伊甸园/幸存者比率：

```
java -Xmx4g -Xms4g -XX:+PrintGCDetails -XX:NewRatio=1 -XX:SurvivorRatio=1 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -version
 par 新一代总计1398144K，已使用 27965K
  伊甸园空间 699136K，已使用 4%
  来自空间 699008K，0% 已使用
  到空间 699008K，0% 已使用
 并发 mark-sweep 生成总数2097152K，已使用 0K
 concurrent-mark-sweep perm gen 总计 21248K，已使用 2084K

```

同样适用于 Java 6 或客户端 VM（只是具有不同的默认值）。

# iphone - 从 uiimagepickercontroller 选择视频文件时应用程序崩溃

> ID：11045692
> 
> 赞同：0
> 
> 时间：2012-06-15T06:33:38.507
> 
> 标签：iphone, objective-c, ios4, uiimagepickercontroller

在我的应用程序中，我想使用 UIImagePickerController 从库中选择视频。但是当我选择持续时间超过 5 分钟的视频时，我的应用程序在 ipod 上崩溃了。我如何限制用户选择持续时间超过 5 分钟的视频。请给我这个错误的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:38:54.090

试试这个：

```
NSURL * aUrlMovie = [[信息 valueForKey:UIImagePickerControllerMediaURL] 保留];/
 AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:aURLPath];
CMTime 持续时间 = playerItem.duration;
浮点秒 = CMTimeGetSeconds(duration);

```

然后为您希望的秒数添加验证..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:48:59.293

```
 #pragma mark UIImagePickerController delegate

  - (void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
  {
NSString* mediaType = [info objectForKey:UIImagePickerControllerMediaType];
if ( [mediaType isEqualToString:(NSString*)kUTTypeMovie] ) {
    self.mediaURL = [info objectForKey:UIImagePickerControllerMediaURL];
  if ( UIVideoAtPathIsCompatibleWithSavedPhotosAlbum( mediaPath ) ) {
        UISaveVideoAtPathToSavedPhotosAlbum( mediaPath,
                                            self,
                                            @selector(video:didFinishSavingWithError:contextInfo:),
                                            NULL );
    } 
} 
[self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T08:58:22.377

试试这个**picker.videoMaximumDuration = 5;**

像这样的东西：

```
 #import <AVFoundation/AVFoundation.h>
 #import <AVFoundation/AVAsset.h>

 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   NSURL *selectedVideoUrl = [info objectForKey:UIImagePickerControllerMediaURL];

   AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:selectedVideoUrl];

   CMTime duration = playerItem.duration;
  float seconds = CMTimeGetSeconds(duration);
  //NSLog(@"duration: %.2f", seconds);
  if(seconds > 300)
  {
     [picker popViewControllerAnimated:YES];
  }
  else{
  [picker dismissModalViewControllerAnimated:YES];
  } 
```

}

# .net - 无法将帖子值发送到特定网址？

> ID：11045696
> 
> 赞同：0
> 
> 时间：2012-06-15T06:33:55.403
> 
> 标签：.net, dotnetnuke

我正在开发一个 DotNetNuke 模块并创建了两个模块。第一个模块接受发布的数据。第二个模块将发布数据发送到第一个模块。我无法将帖子数据发送到特定的 URL。接收器模块应将数据存储到数据库中。下面是我用于帖子的代码。

```
 string myParameters = "EmailId=" + tbEmail.Text;
  WebClient wc = new WebClient();
  wc.Headers["Content-type"] = "application/x-www-form-urlencoded";
  string HtmlResult = wc.UploadString(UrlKeyGen, myParameters); 
```

任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:30:17.583

不能说我熟悉您尝试使用的 WebClient 类。这是我用于发布的代码：

```
 Public Function UrlPOST(ByVal URL As String, ByVal POSTdata As String) As String
        Dim rtnValue As StringBuilder = New StringBuilder()
        Dim isValidParams As Boolean = True

        ' check for url
        If (URL.Length < 10) Then
            isValidParams = False
            Throw New Exception("URL = '" + URL + "' is not a valid URL.")
        ElseIf (URL.IndexOf("://") <= 0) Then
            isValidParams = False
            Throw New Exception("URL = '" + URL + "' is not a valid URL. URL must include protocol, e.g. 'http://'")
        End If

        If (isValidParams) Then
            Dim result As WebResponse = Nothing
            Try
                ' setup WebRequest object
                Dim request As WebRequest = WebRequest.Create(URL)
                request.Method = "POST"
                request.Timeout = 5000
                request.ContentType = "application/x-www-form-urlencoded"

                ' add payload for POST to request stream
                Dim SomeBytes As Byte()
                SomeBytes = Encoding.UTF8.GetBytes(POSTdata)
                request.ContentLength = SomeBytes.Length
                Dim newStream As Stream = request.GetRequestStream()
                newStream.Write(SomeBytes, 0, SomeBytes.Length)
                newStream.Close()

                ' POST data and get response
                result = request.GetResponse()
                Dim objSD As StringDictionary = URIQueryParser(result.ResponseUri.Query())

                rtnValue.Append(TranslateErrorCode(objSD("codes")))

            Catch ex As Exception
                Dim ex1 As New Exception("Exception Posting to External Site. Posting String: " & POSTdata & "... " & ex.ToString)
                LogException(ex1)
                '               Dim objEventLog As New Services.Log.EventLog.EventLogController
                '               objEventLog.AddLog("WebRequest Exception: ", "Exception Posting to External Site: " & ex.ToString  & ", Posting String: " & PostData, PortalSettings, UserId, Services.Log.EventLog.EventLogController.EventLogType.ADMIN_ALERT)
                Throw ex1
            Finally
                If (Not (result Is Nothing)) Then
                    result.Close()
                    result = Nothing
                End If
            End Try
        End If
        Return rtnValue.ToString()
    End Function

    Private Function URIQueryParser(ByVal UriQuery As String) As System.Collections.Specialized.StringDictionary
        Dim sd As New StringDictionary
        Dim objStringArray() As String
        If (Not UriQuery Is Nothing) AndAlso UriQuery.Length > 0 Then
            UriQuery = UriQuery.Substring(1)
            objStringArray = UriQuery.Split("&"c)
            For Each s As String In objStringArray
                sd.Add(s.Split("="c)(0), s.Split("="c)(1))
            Next
        End If

        Return sd
    End Function 
```

# jdeveloper - JDeveloper：无法为对象堆保留足够的空间

> ID：11045697
> 
> 赞同：1
> 
> 时间：2012-06-15T06:33:56.730
> 
> 标签：jdeveloper

嗨，我从我的 jdeveloper 工作室部署项目时遇到以下错误。

```
 [scac] Error occurred during initialization of VM
 [scac] Could not reserve enough space for object heap 
```

谁能建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:36:10.330

如果您的计算机上有足够的可用 RAM：

转到`jdev.conf`文件 ( `~/Oracle/middleware/jdeveloper/jdev/bin`) 并为文件添加更多内存

我还没有检查，但你可以添加：

```
AddVMOption  -XX:MaxHeapSize=512m 
```

或任何你想要的

更多帮助[在这里](https://stackoverflow.com/questions/4401396/could-not-reserve-enough-space-for-object-heap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T15:07:19.887

参见 \jdeveloper\bin\ant-sca-compile.xml

更改 JDe 中指定的行的 Xmx 值。您的系统无法保留足够的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-06T16:54:27.413

减少 \jdeveloper\bin\ant-sca-compile.xml 上的值 -Xmx 对我有用：

```
<target name="scac" description="Compile and validate a composite">
  <scac input="${scac.input}" outXml="${scac.output}" error="${scac.error}" appHome="${scac.application.home}" failonerror="true" displayLevel="${scac.displayLevel}">
    <jvmarg value="-Xms128m"/>
    #<jvmarg value="-Xmx1024m"/>
    <jvmarg value="-Xmx700m"/>
    <jvmarg value="-XX:PermSize=32m"/>
    <jvmarg value="-XX:MaxPermSize=256m"/>
    <!-- jvmarg value="-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"/ -->
  </scac>
</target> 
```

如果您更改 jdev.conf，您可能会遇到错误：

> 无法创建位于路径的虚拟 Java 机实例：C:\Program Files(x86)\Java\jdk1.6.0_45\jre\bin\client\jvm.dll

# python - 使用 pywin32 更改打印机托盘

> ID：11045704
> 
> 赞同：1
> 
> 时间：2012-06-15T06:34:33.823
> 
> 标签：python, pywin32

我正在尝试使用 Python win32print 模块更改打印机托盘，但没有成功。打印机支持两个“bin”：7=Auto 和 4=Manual。我想从“手动”纸盒开始打印作业。这是一些代码：

```
import win32print
import win32gui

# Constants from wingdi.h
DM_OUT_BUFFER = 0x02
DM_IN_BUFFER = 0x08
DM_IN_PROMPT = 0x04
DM_DEFAULT_SOURCE = 0x200

# Get a handle for the default printer
device_name = win32print.GetDefaultPrinter()
handle = win32print.OpenPrinter(device_name)

# Get the default properties for the printer
properties = win32print.GetPrinter(handle, 2)
devmode = properties['pDevMode']

# Print the default paper source (prints '7' for 'Automatically select')
print(devmode.DefaultSource)

# Change the default paper source to '4' for 'Manual feed'
devmode.DefaultSource = 4
devmode.Fields = devmode.Fields | DM_DEFAULT_SOURCE

# Write these changes back to the printer
win32print.DocumentProperties(None, handle, device_name, devmode, devmode, DM_IN_BUFFER | DM_OUT_BUFFER)

# Confirm the changes were updated
print(devmode.DefaultSource)  # Aaargh! Prints '7' again!

# Start printing with the device
hdc = win32gui.CreateDC('', device_name, devmode)
win32print.StartDoc(hdc, ('Test', None, None, 0))
win32print.StartPage(hdc)

# ... GDI drawing commands ...

win32print.EndPage(hdc)
win32print.EndDoc(hdc) 
```

显然 PyDEVMODE 结构没有更新，或者驱动程序以某种方式拒绝了我的更改。

如果以下行：

```
win32print.DocumentProperties(None, handle, device_name, devmode, devmode, DM_IN_BUFFER | DM_OUT_BUFFER) 
```

改为：

```
win32print.DocumentProperties(None, handle, device_name, devmode, devmode, DM_IN_PROMPT | DM_IN_BUFFER | DM_OUT_BUFFER) 
```

然后显示“打印”对话框，我可以从那里更改纸张来源。然后将这些更改正确地复制到 devmode 结构中，并且从手动进纸托盘中按预期进行打印。

所以我认为我的问题是对 PyDEVMODE 结构的更改没有重新编组，因此当结构重新提交给 DocumentProperties 时会丢失。有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:10:58.097

在某些旧版本的 Pywin32 中存在可能导致该行为的错误。尝试安装最新版本 (217)。

# android - 如何检测我的 Phonegap Activity 是否已经在运行？

> ID：11045706
> 
> 赞同：0
> 
> 时间：2012-06-15T06:34:43.687
> 
> 标签：android, cordova, android-activity, broadcastreceiver

我已经使用phonegap 开发了一个android 应用程序。我已经注册了某些接收器，它们会根据我的需要被调用。现在我面临的问题是，如果我的应用程序已经打开，那么接收者将再次打开活动。发生这种情况是因为我以这种方式编码。但是假设如果我的应用程序已关闭，那么就没有问题。

所以我想所以我需要检查活动是否打开，然后相应地打开它。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:51:43.070

这篇文章包含一组解决方案，可以帮助您确定哪个解决方案适合您的要求。

[检查Android应用程序是否在后台运行](https://stackoverflow.com/questions/3667022/android-is-application-running-in-background)

# php - fancybox，登录和重置密码表格

> ID：11045707
> 
> 赞同：0
> 
> 时间：2012-06-15T06:34:45.420
> 
> 标签：php, javascript, jquery, html, fancybox

如果我有一个登录表单，其中包含指向新密码表单的链接

```
<form method="POST" action="" name="loginForm" id="loginForm">
 ''
   <input type="submit" id="loginSubmit" name="loginSubmit" value="ok">
</form>
<a href="recoverpw.php"  id="usrFormFancyBox" 
    onClick="$.fancybox(this); return false;">New password</a> 
```

而recoverpw.php 看起来像

```
<form method="POST" action="" name="newPw" id="newPw">
 ''
   <input type="submit" id="resetPw" name="resetPw" value="ok">
</form> 
```

我也将在同一个花式框中显示。如何在同时按下登录提交或重置密码提交时关闭fancybox？如何放置正确的 onClick 代码？onClick="$.fancybox(this); return false;" 或 onClick="parent.$.fancybox.close();parent.$.fancybox(this); return false;" 或者其他的东西？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:47:07.177

您应该使用`setTimeout`并`callbackOnClose`查看这个[问题](https://stackoverflow.com/questions/1715986/how-do-i-open-one-fancybox-after-another-closes)，您的问题有完整的答案。

# sql - 在 postgresql 9.2 中，可以对分区使用提示优化吗？

> ID：11045709
> 
> 赞同：1
> 
> 时间：2012-06-15T06:35:02.550
> 
> 标签：sql, postgresql, database-partitioning

在一个简单的分区表中：

```
-- note: no records stored in base, only inheritors of base
create table base(
   base_id       bigint,
   base_tp       char(3) not null,
   ... );

create table base_abc(
   base_id       bigserial   primary key,
   base_tp       default 'abc'
                 check( base_tp = 'abc' ),
   ...
) inherits( base );

create table base_efg(
   base_id       bigserial   primary key,
   base_tp       default 'efg'
                 check( base_tp = 'efg' ),
   ...
) inherits( base ); 
```

如果要使用查询中的 where 子句`base_tp`，例如，

```
select * from base where ... and base_tp='abc' 
```

在 9.2 下，查询会被优化为仅选择表`base_abc`，还是会像目前一样查询 a `base`、`base_abc`和`base_efg`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:46:17.797

好吧，可以通过`constraint_exclusion`config 选项设置此行为。如果是`on`，那么只有具有匹配约束的分区才会被访问。但是您应该小心，并`partition`改为选择以避免对性能造成严重影响。考虑到分区表也是一样，但其他表不受影响。

看看它的[文档](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html#DDL-PARTITIONING-CONSTRAINT-EXCLUSION)。

# python - 私有列表变量无意间在实例对象之间共享

> ID：11045711
> 
> 赞同：0
> 
> 时间：2012-06-15T06:35:04.150
> 
> 标签：python

`PlotHandler`我创建了一个类的许多实例。一个实例必须保持它的变量私有。但是我管理它们的方式导致了一个难以检测的问题，**一个私有列表变量在实例之间共享**！而且这也没有任何明显的泄漏来源。

我的调试告诉我，修改列表的私有成员函数看到的是同一个列表，即使它们是不同的对象。

这是一个“陷阱”问题吗？解决此问题的最佳方法是什么？

* * *

这是实现的相关部分（我希望它们是！）。请参阅全大写评论：

实现 PlotHandler 的文件：

```
class PlotHandler(wx.Frame):
    __crop_section = None
    __projection   = None
    __crop_xcord   = None

    _band_data     = [] #THIS GETS SHARED

def _on_plot_click(self, xcord): #CALLED BY ANOTHER OBJECT
    band = self._analyze_band( xcord )
    self._band_data.append(band)
    ... 
```

它管理 PlotHandlers 的父类：

```
class MainFrame(wx.Frame):
    __close_callback__ = None
    _plot_handlers     = []
    def __init__(self, parent, title):
        ...

    def InitUI(self):
        ...

        img_handler = ImageHandler(panel)
        self.img_src.register_callback( img_handler.update_image )

        #you need to call PlotHandler(parent, cropped)
        img_handler.register_sample_callback( self._create_new_plot_handler )

        ...

    def _create_new_plot_handler(self, cropped_sample ):
    self._plot_handlers.append( PlotHandler(self, cropped_sample) ) #CREATE THEM 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:39:07.447

通过谷歌搜索“Python 类变量共享”、“Python FAQ类变量”等可以找到[这个问题](https://stackoverflow.com/questions/11040438/class-variables-is-shared-across-all-instances-in-python/11040559#11040559)、[这个问题以及大量其他内容。](https://stackoverflow.com/questions/867219/python-class-members-initialization)

简短的回答是：直接在类主体中定义的变量是类变量，而不是实例变量，因此在类的实例之间共享。如果您需要实例变量，则必须从您可以访问的方法中分配它们`self`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:39:22.900

类属性在实例之间共享。如果要定义实例属性（因此每个对象都有自己对变量的引用），则必须在`__init__`

```
class PlotHandler(wx.Frame):
    __crop_section = None
    __projection   = None
    __crop_xcord   = None

    def __init__(self, **kwargs):
        self._band_data = [] #THIS IS NOT SHARED 
```

# sql - 使用游标更新 SQL

> ID：11045712
> 
> 赞同：0
> 
> 时间：2012-06-15T06:35:11.373
> 
> 标签：sql, sql-server-2008, cursor

我有这样的表结构

```
GameID     Player1  Player2   Player3     Player4     Player5      conrti_P1   Contri_P2   Conrti_P3 Contri_P4   Contri_P5 

1             1        2         3          4           5              0           0         0           0         0

2             2        1         5          3           4              0           0        0            0        0 
```

Player1 到 Player5 列包含玩家 ID。Contri_p1 到 Contri_p5 列包含它们的点值（最初为 0 表示 all ）。现在我想更新玩家的积分。例如，我想在 gameID = 1 中更新玩家 id = 4 的点数。玩家 id 的位置不是每次都固定的。我需要搜索和更新。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:47:19.983

我不会尝试想出一些聪明的*（阅读复杂的）*方法来尝试将您的更新塞进您当前的设计中，但会改变您的表格的设计。

```
BEGIN TRAN

CREATE TABLE Games (GameID INT PRIMARY KEY)
CREATE TABLE Players (PlayerID INT PRIMARY KEY)
CREATE TABLE PlayersGames (GameID INT, PlayerID INT, Position INT, conrti INT)

INSERT INTO Games VALUES (1), (2)
INSERT INTO Players VALUES (1), (2), (3), (4), (5)
INSERT INTO PlayersGames VALUES (1,1,1,0), (1,2,2,0), (1,3,3,0), (1,4,4,0), (1,5,5,0), (2,2,1,0), (2,1,2,0), (2,5,3,0), (2,3,4,0), (2,4,5,0)

ROLLBACK TRAN 
```

现在你`UPDATE`可以像

```
UPDATE PlayersGames SET contri = @YourValue WHERE PlayerID = 4 AND GameID = 1 
```

**编辑**
为了完整起见，整个脚本，包括根据您的问题显示结果可能如下所示

```
BEGIN TRAN

CREATE TABLE dbo.Games (GameID INT PRIMARY KEY)
CREATE TABLE dbo.Players (PlayerID INT PRIMARY KEY)
CREATE TABLE dbo.PlayersGames (GameID INT, PlayerID INT, Position INT, contri INT)
ALTER TABLE dbo.PlayersGames ADD CONSTRAINT FK_PLAYERSGAMES_PLAYERS FOREIGN KEY (PlayerID) REFERENCES dbo.Players(PlayerID)
ALTER TABLE dbo.PlayersGames ADD CONSTRAINT FK_PLAYERSGAMES_GAMES FOREIGN KEY (GameID) REFERENCES dbo.Games(GameID)

INSERT INTO Games VALUES (1), (2)
INSERT INTO Players VALUES (1), (2), (3), (4), (5)
INSERT INTO PlayersGames VALUES (1,1,1,0), (1,2,2,3), (1,3,3,0), (1,4,4,0), (1,5,5,0), (2,2,1,0), (2,1,2,0), (2,5,3,0), (2,3,4,0), (2,4,5,0)

SELECT  GameID
        , Player1 = MIN(CASE WHEN Position = 1 THEN PlayerID ELSE NULL END)
        , Player2 = MIN(CASE WHEN Position = 2 THEN PlayerID ELSE NULL END)
        , Player3 = MIN(CASE WHEN Position = 3 THEN PlayerID ELSE NULL END)
        , Player4 = MIN(CASE WHEN Position = 4 THEN PlayerID ELSE NULL END)
        , Player5 = MIN(CASE WHEN Position = 5 THEN PlayerID ELSE NULL END)
        , contri_P1 = MIN(CASE WHEN Position = 1 THEN contri ELSE NULL END)
        , contri_P2 = MIN(CASE WHEN Position = 2 THEN contri ELSE NULL END)
        , contri_P3 = MIN(CASE WHEN Position = 3 THEN contri ELSE NULL END)
        , contri_P4 = MIN(CASE WHEN Position = 4 THEN contri ELSE NULL END)
        , contri_P5 = MIN(CASE WHEN Position = 5 THEN contri ELSE NULL END)
FROM    PlayersGames
GROUP BY
        GameID

ROLLBACK TRAN 
```

# iphone - ZBar扫描仪中带摄像头的矩形？

> ID：11045719
> 
> 赞同：1
> 
> 时间：2012-06-15T06:35:31.393
> 
> 标签：iphone, ios, ipad

我们如何将矩形带入相机进行条码扫描，如带有扫描范围的红色激光？是否有任何内置属性？我尝试了以下操作：

```
 reader.readerView.tracksSymbols = YES;
reader.readerView.trackingColor = [UIColor redColor];

[reader setShowsZBarControls:NO];
reader.readerView.tracksSymbols = TRUE;
scanner.accessibilityFrame = CGRectMake(100, 100, 200, 300); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:26:07.970

将矩形添加为相机视图上的叠加层。代码如下：

```
- (IBAction) scanButtonTapped
    {
        // ADD: present a barcode reader that scans from the camera feed
        ZBarReaderViewController *reader = [ZBarReaderViewController new];
        reader.readerDelegate = self;
        reader.supportedOrientationsMask = ZBarOrientationMaskAll;

        ZBarImageScanner *scanner = reader.scanner;
        reader.showsZBarControls = NO;

        [scanner setSymbology: ZBAR_I25
                       config: ZBAR_CFG_ENABLE
                           to: 0];
        // present and release the controller
        [self presentModalViewController: reader
                                animated: YES];
        reader.cameraOverlayView = [self CommomOverlay];
        [reader release];
    }

-(UIView*)CommomOverlay{  
        UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,480)];
       UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(70,160,203,180)];
        [FrameImg setImage:[UIImage imageNamed:@"overlaygraphic.png"]];
       [view addSubview:FrameImg];
        return view;
    } 
```

希望对你有帮助..：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:46:11.437

你试过了吗

```
 reader.cameraOverlayView = overLayView; 
```

?? 即`cameraOverlayView`的财产`UIImagePickerController`。在那里你可以设置任何你想要的。希望这是你想要的。

# playframework - 在 Playframework 2.0 中不使用表单助手将对象传递给控制器

> ID：11045720
> 
> 赞同：0
> 
> 时间：2012-06-15T06:35:31.783
> 
> 标签：playframework, playframework-2.0

在 Playframework 2.0 中，我们可以在不使用表单助手的情况下传递对象吗？

例如，

```
class User {
     Address address;
} 
```

在用户界面中：`<input type="text" name="address"/> //HELP NEEDED HERE`

如何在不使用表单助手的情况下将地址对象放入控制器？

请帮我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:23:39.393

您本身不需要表单助手。将您的课程的字段公开就足够了。表单本身应该是这样的（假设这是一个或多或少标准的用户/地址场景）：

类：

```
public class User {

 public String name;
 public String phonenumber;

 public Address address;
}

public class Address {
 public String street;
 public String city;
} 
```

表单字段：

```
<input type="text" name="address.street" />
<input type="text" name="address.city" />

<input type="text" name="name" />
<input type="text" name="phonenumber" /> 
```

然后，您应该能够使用 form(User.class) 及其 .bindFromRequest() 来获取可以验证/使用的表单。另请参阅有关该功能的[官方文档](http://www.playframework.org/documentation/2.0.1/JavaForms)。

重要的是您的表单字段名称与您的类的字段名称匹配并且这些字段是可访问的，因此数据绑定器可以使用表单中的数据填充创建的实例。

# objective-c - UIGraphicsGetImageFromCurrentImageContext 与 CALayers

> ID：11045721
> 
> 赞同：3
> 
> 时间：2012-06-15T06:35:33.243
> 
> 标签：objective-c, cashapelayer, quartz-core

我正在尝试创建`UIView`带有`CALayer`子层的图像。使用此代码

```
- (UIImage*)snapshot{
    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

我得到了一张图像，但它不能准确地代表屏幕上显示的内容。特别是，它不尊重`CAShapeLayer`mask 属性。我的圆角没有出现在图像中。

下面是一个示例在屏幕上的显示方式与它在图像中的显示方式的比较： ![在此处输入图像描述](../Images/aac5db595b7ac4bbcbba197dd415a26f.png)

只是为了澄清一下，右边的图像与旧对象放置在相同的位置，基本上是对对象进行了光栅化。这就是为什么有相同的背景；它不是我正在捕捉图像的对象的一部分。

如何在图像中保留`CAShapeLayer`蒙版的同时捕获对象的图像？

编辑：似乎问题在于图层蒙版，而不是路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:45:18.827

直接来自 CALayer 类参考：

> 此外，不渲染...指定背景过滤器、过滤器、合成过滤器或**掩码值的图层。**

我使用的是面具，而不是 CGPath。（好吧，带有路径的 CALayer 是我的面具，但仍然如此。）

然而，另一个问题是我无法切换到使用路径而不是蒙版，因为我使用的是渐变，而 CAGradientLayer 没有像 CAShapeLayer 这样的路径属性，这就是我使用蒙版的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:43:24.557

而不是使用`self.bounds.size`and `self.layer`，只需使用圆角的视图。假设如果是`imageView`那么

```
- (UIImage*)snapshot
{
    UIGraphicsBeginImageContext(imageview.size);
    [imageview.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return viewImage;
} 
```

# iphone - 在 Sqlite3 数据库中插入自定义对象

> ID：11045728
> 
> 赞同：-5
> 
> 时间：2012-06-15T06:35:57.597
> 
> 标签：iphone, sqlite

我正在尝试在 iphone 的 sqlite 数据库中插入自定义对象，任何人都可以告诉我如何做到这一点。如果可能的话，请给我源代码，以便我可以轻松理解。并提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:23:28.597

使用此代码插入数据库....根据您的要求更改代码...对我来说很好...

```
-(void) insertDataIntoDatabase
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

    NSString *documentsDir = [documentPaths objectAtIndex:0];

    databasePath = [documentsDir stringByAppendingPathComponent:@"dataBaseName.sqlite"];

    NSLog(@"%@",sender);

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
    {
        NSLog(@"%@",[quoteDic objectForKey:@"bookmark"]);
        NSLog(@"%d",[[quoteDic objectForKey:@"quoteId"] intValue]);
        NSString *sqlStatement=[NSString stringWithFormat:@"insert into tableName (frndName,frndDescription,frndAddress,frndMobile,frndEmail,frndCollege,frndCompany) Values('%@','%@','%@','%@','%@','%@','%@')",[frndName text],[frndDescription text],[frndAddress text],[frndMobile text],[frndEmail text],[frndCollege text],[frndCompany text]];

        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &compiledStatement, NULL) == SQLITE_OK)
        {
        }
        if(sqlite3_step(compiledStatement) != SQLITE_DONE)
        {

            //sqlite3_close(database);
            NSAssert1(0, @"Error while Updating data. '%s'", sqlite3_errmsg(database));
            sqlite3_finalize(compiledStatement);
        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Update!!"
                                                            message:@"Your record Updated"
                                                           delegate:nil
                                                  cancelButtonTitle:@"Thankyou"
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release];

        }

        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);
} 
```

# c# - iTextSharp - 是否可以为相同的单元格和行设置不同的字体颜色？

> ID：11045731
> 
> 赞同：18
> 
> 时间：2012-06-15T06:36:33.203
> 
> 标签：c#, asp.net, pdf, itextsharp

我正在使用带有以下代码的 iTextSharp.dll：

```
var Title = "This is title";
var Description = "This is description";

Innertable.AddCell(new PdfPCell(new Phrase(string.Format("{0} {1}", Title, Description.Trim()), listTextFont)) { BackgroundColor = new BaseColor(233, 244, 249), BorderWidth = 0, PaddingTop = 4, PaddingLeft = -240, PaddingBottom = 5, HorizontalAlignment = Element.ALIGN_LEFT }); 
```

我们可以为标题和描述设置不同的字体颜色，但只使用单个单元格（即不创建新表格）吗？

在这件事上的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-16T10:26:08.287

您要做的是创建 2 个`Chunk`对象，然后将它们组合成 1 个，然后将`Phrase`其添加到单元格中。

```
var blackListTextFont = FontFactory.GetFont("Arial", 28, Color.BLACK);
var redListTextFont = FontFactory.GetFont("Arial", 28, Color.RED);

var titleChunk = new Chunk("Title", blackListTextFont);
var descriptionChunk = new Chunk("Description", redListTextFont);

var phrase = new Phrase(titleChunk);
phrase.Add(descriptionChunk);

table.AddCell(new PdfPCell(phrase)); 
```

看看[http://www.mikesdotnetting.com/Article/82/iTextSharp-Adding-Text-with-Chunks-Phrases-and-Paragraphs](http://www.mikesdotnetting.com/Article/82/iTextSharp-Adding-Text-with-Chunks-Phrases-and-Paragraphs)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-15T04:21:41.520

尝试像这样在 pdf 单元格中设置不同的前景色：

```
var FontColour = new BaseColor(35, 31, 32);
var Calibri8 = FontFactory.GetFont("Calibri", 8, FontColour);

PdfPCell R3C2 = new PdfPCell(new Paragraph("Hello", Calibri8));
R3C2.BorderWidth = 0f;
R3C2.HorizontalAlignment = PdfPCell.ALIGN_RIGHT;
table.AddCell(R3C2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T06:24:43.710

对于 VB.net 使用以下函数

```
 Public Function CreateFont(size As Integer, Optional style As Integer = iTextSharp.text.Font.BOLD) As iTextSharp.text.Font
        Dim FontColour = New BaseColor(193, 36, 67)  'Color code
        Return New iTextSharp.text.Font(iTextSharp.text.Font.FontFamily.TIMES_ROMAN, size, style, FontColour)
 End Function

 Dim p As New Paragraph
 p.Add(New Paragraph("Your Sentence Here", CreateFont(12, iTextSharp.text.Font.BOLDITALIC)))
 pdfDoc.Add(p) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T13:10:55.653

诀窍是创建具有不同字体的短语（不是块）并将它们添加到父短语中。据我所知，如果您创建具有不同字体的块并将它们添加到短语中，则最终短语中的所有文本都以相同的字体显示。

这是一个对我有用的例子：

```
// create the font we'll use
var fNormal = FontFactory.GetFont("Helvetica", 10f);
fNormal.SetColor(0, 0, 0);

// add phrase containing link
var pFooter = new Phrase();

// add phrase to this containing text only
var footerStart = new Phrase("Visit ");
footerStart.Font = fNormal;
pFooter.Add(footerStart); 

// now create anchor and add with different font
string wolSiteUrl = "http://www.whateveryoulike.com";
Anchor wolWebSiteLink = new Anchor(wolSiteUrl, fNormal);
wolWebSiteLink.Reference = wolSiteUrl;
wolWebSiteLink.Font = fNormal;
wolWebSiteLink.Font.SetColor(242, 132, 0);
pFooter.Add(wolWebSiteLink);

// add text to go after this link
var footerEnd = new Phrase(" to view these results online.");
footerEnd.Font = fNormal;
pFooter.Add(footerEnd);
var paraFooter = new Paragraph(pFooter);

// add the phrase we've built up containing lots of little phrases to document
// (assume you have one of these ...)
doc.Add(paraFooter); 
```

# blackberry - 使用 hudson 签名自动化的黑莓构建不是在配置页面而是在构建内部

> ID：11045732
> 
> 赞同：0
> 
> 时间：2012-06-15T06:36:33.613
> 
> 标签：blackberry, hudson, sign

我知道黑莓应用程序签名的自动化，如“java -jar ..signaturetool.jar....”，当我使用 hudson 构建时，我必须通过调用执行 windows 批处理命令 ant 任务在项目配置页面给出。但是我正在编写一个对不同客户端通用的构建，那时我想在构建中包含这种签名的自动化，因为我的应用程序名称将根据客户的名称进行更改并且路径将被更改，所以我想执行构建中的这个命令行，我试过这个，但没有工作，它没有执行 exec ant 任务。任何人都可以帮助我丢失的地方，这是代码：

```
<property name="signpath" location="C:/Program Files/Research In Motion/BlackBerry JDE 5.0.0/bin/SignatureTool.jar"/>
<exec executable ="cmd" os="Windows XP" > 
 <arg line="java -jar ${signpath} -a -c -p pswd ${codfilepath}/${uid}/${uName}_${version}_${server}.cod"/>  
</exec> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:04:07.160

我使用以下 ANT 目标进行签名。它需要使用[bb_ant_tools](http://bb-ant-tools.sourceforge.net/)（这似乎是一个行业标准，至少在 stackoverflow 用户中是这样）。

```
<target name="sign" depends="" 
    description="Signs the final COD file by calling the BlackBerry signing server. The password is stored in the common.properties file." >
    <sigtool
        codfile="${cod.output.dir}/${project.output}.cod" 
        jdehome="${sigtool.jde}" 
        password="${sigtool.password}" 
    />
</target> 
```

所有参数都存储在各种属性文件中（我建议将您的签名密码保存在一个单独的属性文件中，以用于您的项目设置的其余部分）。

我会推荐这种方法，因为 bb_ant_tools 提供了许多有用的功能。

* * *

至于为什么`exec`不起作用，我`exec`在将所有参数放在一个标签中时遇到了问题。

尝试类似：

```
<exec executable="java" >
    <arg value="-jar" />
    <arg value="${signpath}" />
    <arg value="-a" />
    <arg value="-c" />
    <arg value="-p" />
    <arg value="pswd " />
    <arg value="${codfilepath}/${uid}/${uName}_${version}_${server}.cod" />
</exec> 
```

根据我的经验，命令行中的每个“空格”字符都意味着您需要`<arg value="...." />`在脚本中添加一个新行。ymmv。

# asp.net - 非aspx页面的404重定向

> ID：11045733
> 
> 赞同：13
> 
> 时间：2012-06-15T06:36:36.073
> 
> 标签：asp.net, iis, redirect, error-handling

我正在使用下面的 web.config 代码将对丢失页面的请求重定向到 404 错误处理页面：

```
<customErrors mode="On" defaultRedirect="404.aspx" redirectMode="ResponseRewrite">
  <error statusCode="404" redirect="404.aspx"/>
</customErrors> 
```

当我查找诸如“missing.aspx”之类的页面时，它可以正常工作，但它不适用于没有“.aspx”扩展名的页面，例如“missing.asp”或只是“missing”。当它不起作用时，它只会加载一个标准的 IIS 7.5 错误页面。

我究竟做错了什么？我正在使用.net 4。我注意到其他人问同样的问题，但他们没有得到答案。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T07:10:49.723

正如[dbaseman](https://stackoverflow.com/users/1001985/dbaseman)所说，这是因为非 asp.net 文件不会调用 asp.net 处理程序。强制 asp.net 处理程序对所有请求进行操作的一种简单方法是在 web.config 中设置以下内容。

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
</system.webServer> 
```

这告诉 IIS 为所有请求（例如 .html、.jpg、.css、.js 等）运行所有托管模块。这通常是不受欢迎的，因为它只会引入额外的处理和延迟。

[http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)

另一个尝试的选项（比上面更干净）作为答案发布在这里：[https ://stackoverflow.com/a/6661699/701062](https://stackoverflow.com/a/6661699/701062)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T06:39:42.573

原因是非 ASPX 扩展永远不会进入 ASP.NET 处理程序。您看到的那些错误来自 IIS。**在 web.config 中的system.webServer**下有一个单独的部分**httpErrors**，您需要对其进行配置以处理这些错误。请参阅[此处](http://www.iis.net/ConfigReference/system.webServer/httpErrors)了解更多信息。

 ***链接中的示例：*

```
<configuration>
   <system.webServer>
      <httpErrors errorMode="DetailedLocalOnly" defaultResponseMode="File" >
         <remove statusCode="500" />
         <error statusCode="500"
            prefixLanguageFilePath="C:\Contoso\Content\errors"
            path="500.htm" />
       </httpErrors>
   </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-15T15:03:10.533

将以下内容添加到 Web.config：

```
<system.webServer>    
    <httpErrors errorMode="Custom" defaultResponseMode="ExecuteURL" >
      <remove statusCode="404" />
      <error statusCode="404" path="/Default.aspx" responseMode="Redirect" />
    </httpErrors>
  </system.webServer>
```

我取了 Osprey 的代码，并添加了 responseMode="Redirect" 来解决只显示页面源代码的问题。**

# android - 列表视图：Android

> ID：11045739
> 
> 赞同：-2
> 
> 时间：2012-06-15T06:37:14.137
> 
> 标签：android, android-listview, android-adapter

我在android的listview中有以下问题：

在我的应用程序中，我有 2 个数据库，我必须在单个列表视图中显示这 2 个数据库，并在它们之间使用分隔符。在我尝试使用 2 个可以正常工作的列表视图之前，但现在我希望它全部在一个列表视图中。请为此提供一些设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:56:49.400

试试 CommonWare 的[MergeAdapter](https://github.com/commonsguy/cwac-merge)。

从它的文档：

> MergeAdapter 接受适配器和视图的混合，并将它们作为一个连续的整体呈现给它注入的任何 ListView。这适用于您有多个数据源的情况，或者如果您有少量普通视图要与数据列表混合，等等。

因此，您可以为每个数据库创建一个单独的适配器，一个视图来分隔它们，将它们倒入 MergeAdapter 并使用它来填充单个列表。

伪代码示例：

```
myMergeAdapter = new MergeAdapter(); 
myMergeAdapter.addAdapter(listAdapter1); 
myMergeAdapter.addView(SeperatorView); 
myMergeAdapter.addAdapter(listAdapter2); 
```

# android - android - 在滚动视图中添加 n 个视图

> ID：11045743
> 
> 赞同：0
> 
> 时间：2012-06-15T06:37:37.070
> 
> 标签：android, horizontalscrollview, android-inflate

我正在为安卓平板电脑设计一个应用程序。我创建了一个包含应用程序栏的布局文件，接下来是一些按钮。在屏幕中间我想要一个水平滚动视图，我需要在其中显示一些图像。

滚动视图中的图像数量取决于 url 的返回数据。为此，我正在维护一个数组列表。根据数组的大小，我需要使用滚动视图创建图像视图。

`I have placed all other buttons, textviews in the layout file and i need to make the above said view alone through coding`， 这该怎么做。

如果数组大小为 19，则滚动视图中的图像列表仅按以下顺序显示

```
1  4  7  10  13  16  19
2  5  8  11  14  17    
3  6  9  12  15  18 
```

在 iPad iBook 应用程序库页面中，书籍将以这种方式列出。

这该怎么做....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:51:36.373

不确定，但可以尝试这样的方法

```
1- Create/inflate a horizontal scrollview ..
2- make for loop running i= 0 to x 
        where x= (totalCount/3)+(totalCount%3>0?1:0)
3- Create a  Linear layout with orientation vertical  
4- create one more loop form j=0 to 3 or (i+1)*3+j< totalCount
5- add your element layout in  Linear layout 
6 after the inner loop closed add Linear layout in horizontal scroll-view 
```

*   循环终止条件，如 x 的值可能不准确，请检查它们

用于使项目可点击

```
1- take any view from  element layout like in you case image-view is good option  
 2- creates a class in you activity or better to extend you activity with clickListner.
 3- while creating the imageView for each element set this listener to all
 4- Set the data object or index  with element with image-view in tad using SetTag
 5- in Onclick function you will get image-view as argument and use getTag to get that data of attached with clicked element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:02:27.233

感谢[Dheeresh Singh](https://stackoverflow.com/users/804447/dheeresh-singh)

以下是我的 main.xml 文件

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linear_1"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal" >
        </LinearLayout>
</HorizontalScrollView> 
```

`Horizontal scroll view`我的`main.xml`文件中有我的

```
public class LayoutActivity extends Activity 
//implements OnClickListener
{
    ViewGroup layout;
    LinearLayout lr;

    int x;
    int total = 4;
    int count = 0;
    LinearLayout lay;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        count = 0;
        layout = (ViewGroup)findViewById(R.id.linear_1);
        x = (total/3)+(total%3 > 0?1:0);;
        for(int i = 0; i < x; i++)
        {
            lr = new LinearLayout(this);
            lr.setOrientation(LinearLayout.VERTICAL);
            layout.addView(lr);
            for(int j = 0; j < 3; j++ )
            {
                count++;
                final View child = getLayoutInflater().inflate(R.layout.inflateview, null);
                lay = (LinearLayout)child.findViewById(R.id.threeByThree_tableRow1_1_Layout1);
                lay.setOnClickListener(new View.OnClickListener() 
                {   
                    @Override
                    public void onClick(View v) 
                    {
                        Toast.makeText(getApplicationContext(), "selected  id  is "+child.getId(), Toast.LENGTH_SHORT).show();
                    }
                });
                lr.addView(child);
                child.setId(count);
                if(i == total)
                {
                    break;
                }
            }
        }      
    }
} 
```

在上面的代码中，我有 lr 是 LinearLayout 以垂直顺序显示它，View child 是我需要以垂直和水平顺序显示的数据。

非常感谢[Dheeresh Singh](https://stackoverflow.com/users/804447/dheeresh-singh)

# android - 跨活动的Android浮动视图

> ID：11045746
> 
> 赞同：6
> 
> 时间：2012-06-15T06:37:45.537
> 
> 标签：android, layout, android-activity, floating, android-inflate

## 要求

我有一个包含**2 个活动的应用程序，比如 A 和 B**`A->B` ，并带有和`B->A`（在后按时）这样的导航。我的要求是

*   我想要一个浮动在屏幕上的视图/布局，无论当前可见哪个活动。我在应用程序启动（活动 A 的 onCreate）上膨胀了这个视图，它在从 A-> B 转换期间以及当 B 在屏幕上时在屏幕上保持静态。
*   所以很自然这个视图应该只膨胀一次（当应用程序启动时，A的onCreate）。

## 我发现了什么

我做了一些搜索，据我所知，有两种方法可以在 android 中重用布局

*   **使用** `<include>`

    它似乎只是一个编写常用 UI 元素的 xml 代码的工具。每次在父布局中使用时，它都会膨胀。

*   **使用** `ViewStub`

    我对使用 ViewStub 进行了一些研究，这似乎也是一种在许多布局中重用代码段的方法。每次我们在布局中使用它时也需要对其进行充气，除非我们在运行时使它们可见时才会充气。

## 我的要求的另一个提示

对于熟悉 iPhone 开发的人，您可以将视图添加到`UIWindow`，无论哪个`UIViewController`当前处于活动状态，它都会保留在那里。我想要我的应用程序中的确切行为。

## 我原来的设置

我的目标是 android 2.1 及更高版本。它似乎`Fragment`可以从 API 级别 11 (android 3.0) 及更高版本获得。一种选择是使用允许在旧版本中使用的[android 兼容性库。](http://developer.android.com/sdk/compatibility-library.html)`Fragment`我现在正在研究这个。但我也想知道是否有任何其他方法可以满足我的要求，而不是改变我的整个项目并使用片段。

我的应用程序中有大约 30 个奇怪的活动，我希望这个布局漂浮在所有这些活动上。我刚刚制作了一个包含 2 个活动的测试用例，以使问题变得简单易行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:48:44.647

## 解决方案 1：框架布局

我认为您要使用的是`FrameLayout`. FrameLayout 旨在阻止屏幕上的一个区域以显示单个项目。子视图绘制在堆栈中，最近添加的子视图在顶部。

[http://developer.android.com/reference/android/widget/FrameLayout.html](http://developer.android.com/reference/android/widget/FrameLayout.html)

然后在此处阅读有关您可以在活动中使用的后退堆栈，以使用后退按钮在活动之间来回翻转：

[http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

## 解决方案 2：分片交易

与其编写两个单独的活动，不如用两个片段编写一个活动。以下是来自[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)文档的简介：

“一个fragment必须始终嵌入到一个activity中，fragment的生命周期直接受到宿主activity的生命周期的影响。例如，当activity暂停时，所有的fragment都在里面，当activity被销毁时，所有的fragment都一样. 但是，当一个活动在运行时（它处于恢复的生命周期状态），您可以独立地操作每个片段，例如添加或删除它们。**当您执行这样的片段事务时，您还可以将其添加到返回堆栈**中由活动管理——活动中的每个返回堆栈条目都是发生的片段事务的记录。返回堆栈允许用户通过按下后退按钮来反转片段事务（向后导航）。

# c# - 如何创建个人证书

> ID：11045747
> 
> 赞同：0
> 
> 时间：2012-06-15T06:37:55.887
> 
> 标签：c#, .net, certificate

我正在使用此代码在本地机器上生成证书。

```
X509Certificate2 certificate = new X509Certificate2(cerFilePath,password);
        X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);

        store.Open(OpenFlags.ReadWrite);
        store.Add(certificate);
        store.Close(); 
```

输出显示它已创建，但它不在 certmanager 的个人选项卡中，但如果我在同一程序中使用 My 以外的商店名称（例如：Trusted Publisher），则证书在该商店名称下的证书管理器中可用。

但我需要个人使用的证书。

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-30T15:31:16.447

如果您使用“LocalMachine”上下文，则必须具有“提升权限”（**如果需要，以管理员身份运行应用程序**）。

“LocalMachine”和“CurrentUser”都有一个名为“Personal”（我的）的商店！
您可以使用“certlm.msc”浏览“LocalMachine”存储，并使用“certmgr.msc”浏览“CurrentUser”存储。

# ruby - Ruby 类实例和继承

> ID：11045752
> 
> 赞同：1
> 
> 时间：2012-06-15T06:38:15.123
> 
> 标签：ruby, inheritance

除了超类之外，我想创建一个子类来为子类添加属性。这是我尝试过的：

## 第一版：

```
class Person
    attr_reader :first_name, :last_name, :age
    def initialize (first_name, last_name, age) 
        @first_name = first_name  
        @last_name = last_name
        @age = age
    end
end

class Musician < Person
    attr_reader :first_name, :last_name, :age, :instrument
    def initialize (first_name, last_name, age, instrument)
        super 
        @instrument
    end
end 
```

* * *

## 第二版

```
class Person
    ATTRS = ['first_name', 'last_name', 'age']
    def attributes
        ATTRS
    end
end

class Musician < Person
    ATTRS = ['instrument']
    def attributes
        super + ATTRS
    end
end 
```

* * *

这些都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:56:19.683

在版本 1 中尝试

```
class Musician < Person
  attr_reader :instrument
  def initialize(first_name, last_name, age, instrument)
     # Pass arguments to the super class' constructor!
     super first_name, last_name, age
     @instrument = instrument
  end
end 
```

多亏了`attr_reader :first_name, :last_name, :age`in ，`Person` `Musician`这三个访问器将因为继承而可用。

# schema - 可以使用 DB2/z 加载/卸载来更改数据和模式吗？

> ID：11045756
> 
> 赞同：1
> 
> 时间：2012-06-15T06:39:04.897
> 
> 标签：schema, db2, mainframe, migrate

我试图找到一种有效的方法来使用 JCL 在大型机上使用 DB2 迁移表。当我们更新我们的应用程序以使架构发生变化时，我们需要迁移数据库以匹配。

我们过去所做的基本上是创建一个新表，从旧表中选择，删除原始表并将新表重命名为原始名称。

*不用说，当表很大（其中一些很大*）时，这不是一个非常高性能的解决方案。

对于 DB2 的最新版本，我知道您可以做一些简单的事情，比如改变列类型，但是我们有迁移作业，需要对数据做更复杂的事情。

例如，考虑我们想要将两列合并为一列 ( `firstname + lastname -> fullname`) 的情况。别介意这样做不一定是个好主意，只是想当然地认为这是我们需要做的事情。可能对数据进行*任意*复杂的转换，基本上可以对`select`语句进行任何操作。

我的问题是这个。DB2`unload`实用程序可用于将表中的所有数据提取到几个数据集（`load`用于重新加载数据的 JCL 和数据本身）。有没有一种简单的方法（或*任何*方法）来按摩这个输出，`unload`以便在重新加载数据时进行这些任意更改？

我假设我可以`load`以某种方式修改 JCL 成员和数据成员来实现这一点，但我不确定这有多容易。

或者，更好的是，这个`unload/load`过程本身可以做到这一点而不必直接按摩成员吗？

有没有人有这方面的经验，或者有关于描述如何做到这一点的红皮书或红皮书（或任何其他来源）的指针？

除了之外，还有*其他*（更好，显然）的方法`unload/load`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:52:42.640

> 我假设我可以以某种方式修改加载 JCL 成员和数据成员来实现这一点，但我不确定这有多容易。

我相信你已经在你的问题中提供了答案。至于“这有多容易”的问题，这取决于您修改的性质。

SORT 实用程序（DFSORT、SyncSort 等）现在具有*非常*复杂的数据操作功能。我们使用这些来移动数据，用一个值替换另一个值，组合字段，拆分字段等，尽管与您描述的上下文不同。

你可以用你的控制语句做类似的事情`load`，但这可能不值得麻烦。这将取决于您的更改程度。`load`如果您有必要的重复修改，那么尝试自动修改控制语句可能是值得的。如果修改都是“一次性的”，那么手动解决方案可能更方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:40:46.407

正如您所指出的，从旧表选择到新表的性能会很差。这里的性能不佳通常是由于插入目标表的成本相对较高（索引构建和 RI 实施）。SELECT 本身通常不是性能问题。这就是为什么当需要从头开始填充大型表时通常优先使用 LOAD 实用程序，可以更有效地构建索引并且可以延迟 RI。

UNLOAD 实用程序允许不受限制地使用 SELECT。如果您可以使用标量和/或列函数选择数据来构建与新表列定义兼容的结果集，则可以使用 UNLOAD 进行数据转换。在 SYSIN 中为 UNLOAD 实用程序指定一个 SELECT 语句。就像是：

```
 //SYSIN DD *
 SELECT CONCAT(FIRST_NAME, LAST_NAME) AS "FULLNAME"
 FROM OLD_TABLE
 /* 
```

生成的 SYSRECxx 文件将包含单个列，该列是两个已识别列的串联（CONCAT 函数的结果），并且 SYSPUNCH 将包含 FULLNAME 的兼容列定义 - 新表的转换列名。您需要做的就是在 SYSPUNCH 中编辑新表名（这将默认为 TBLNAME）并加载它。尽量不要摆弄 SYSRECxx 数据或 SYSPUNCH 列定义——这里的错误可能会变得丑陋。

在运行 LOAD 实用程序来创建新表时使用 REPLACE 选项（我认为默认值是 LOAD RESUME，它在这里不起作用）。通常在运行 LOAD 时关闭 RI 是个好主意，这将提高性能并省去弄清楚 LOAD 作业需要运行的顺序的麻烦。完成后，您需要验证 RI 并构建索引。

LOAD 实用程序[在此处记录](http://publib.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DSNUGK1B/2.14?DT=20120406142844)

# python - 如何在 Python 中使用正则表达式提取某些字符之间的所有子字符串？

> ID：11045763
> 
> 赞同：1
> 
> 时间：2012-06-15T06:39:25.743
> 
> 标签：python, regex

我有数百行要解析。它们就像：

```
key1 = $global.path
key2 = prefix +$global.name
key3 = prefix + $default
key4 = prefix+$lib.id + $value + $args.id + ' some between ' + $global.title 
```

where`$global`表示 Python 中的某个 dict，称为`'settings'`. 我想用 dict value 替换所有术语 '$global.key' `settings['key']`。`$lib`并且`$args`类似于`$global`。

如果只有`$default`没有'.'，应该与`$global.default`

并且都`'+', ' + ', '+ ', ' +'`应该直接删除。

如何在 Python 中做到这一点？我可以用普通的 Python 做到这一点。但我认为使用正则表达式更好。所有都应该不区分大小写。

首先识别要查找的字典。拿到钥匙。然后获取字典中的值。最后用值替换占位符。

例如，`settings['name']`是' `carl`'。然后是一行：

```
key2 = prefix + $global.name 
```

应改为：

```
key2 = prefixcarl 
```

谢谢。任何帮助表示赞赏:)

==================================================== ===========

编辑：

我手头有： 1\. $global、$lib、$args 的字典 2\. 数百行。

我想得到什么：占位符的相同行数`$some.some`更改为字典中的相应值。并且“+”表示为“连接”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:48:55.287

`re.sub`与功能性“替换”参数一起使用：

```
settings = {}
settings['name'] = 'carl'

key2 = "foo $global.name bar"

import re
print re.sub(r'\$(\w+)\.(\w+)', lambda m: settings[m.group(2)], key2) 
```

[如果 repl 是一个函数，则每次出现不重叠的模式时都会调用它。该函数采用单个匹配对象参数，并返回替换字符串。](http://docs.python.org/library/re.html#re.sub)

这是一个支持多个字典（假设它们是全局定义的）和“默认”参数的版本：

```
 re.sub(r'\$(\w+)(\.(\w+))?', lambda m: globals()[m.group(1)][m.group(3) or 'default'], key2) 
```

如果您的字典是在函数中定义的，那么它们不再属于该函数`globals()`，而是属于`locals()`该函数。您必须使用[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)来访问它们：

```
import re

def some_func():
    settings = {'result_dir':'dir'} 
    args = {'run_id':'id'} 

    vars = locals() 

    print re.sub(r'\$(\w+)(\.(\w+))?', lambda m: vars[m.group(1)][m.group(3)], '$settings.result_dir + $args.run_id')

some_func() 
```

最后，如果字典在一个类中，您可以使用`getattr(self)`它们来访问它们：

```
class X(object):

    def __init__(self):
        self.settings = {'result_dir':'dir'} 
        self.args = {'run_id':'id'} 

    def some_method(self):
        print re.sub(r'\$(\w+)(\.(\w+))?', lambda m: getattr(self, m.group(1))[m.group(3)], '$settings.result_dir + $args.run_id')

X().some_method() 
```

# ruby-on-rails - 静态页面中的分页

> ID：11045765
> 
> 赞同：1
> 
> 时间：2012-06-15T06:39:33.907
> 
> 标签：ruby-on-rails, ruby, pagination, yaml

我有一个包含少量记录的 excel 表/Yaml 文件。我想知道 rails 是否提供了一种在从 yaml 文档或 excel 表中读取数据时实现分页的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:41:56.803

试试[Kaminari](https://github.com/amatsuda/kaminari)宝石。[您可以使用Kaminari::PaginatableArray](https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/models/array_extension.rb)对任何类型的 Array-ish 对象进行分页

```
> p Kaminari::PaginatableArray.new([*1..100]).page(3).per(20)
[41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:53:27.257

另一个好的分页 gem 是[will_paginate](https://github.com/mislav/will_paginate/wiki)

它非常适用于活动记录关系，并且只要您首先需要正确的文件，它也会对数组进行分页。见[https://stackoverflow.com/a/8407304/441979](https://stackoverflow.com/a/8407304/441979)

# c# - GC如何释放C#中的托管资源

> ID：11045766
> 
> 赞同：0
> 
> 时间：2012-06-15T06:39:36.807
> 
> 标签：c#, garbage-collection

据我所知，我知道 GC 执行收集操作是为了删除非托管资源以释放内存，这称为隐式清理。通过使用“USING”关键字，我们可以进行显式清理，但我怀疑 GC 是如何释放托管资源的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:06:17.473

您无需执行任何特殊操作即可让 GC 清理您的托管资源。GC 将在没有对您的托管资源的引用后的某个时间清理它。

如果您的托管资源拥有非托管资源，您可以实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口并调用该`Dispose`方法，您将在其中显式清理您的非托管资源。`using`语句使这个接口的使用变得非常容易，因为它会在代码存在`using`块时自动调用 Dispose，即使在出现异常的情况下也是如此。

您可以查看有关[垃圾收集](http://msdn.microsoft.com/en-us/library/ee787088.aspx#conditions_for_a_garbage_collection)的 MSDN 文档。

编辑：根据上面的评论。

您*可以*通过定义终结器（例如~MyClass()）来覆盖`Object.Finalize`，但不知道何时它会被 GC 调用。IDisposable 通常是首选。[有关 Finalizer 与 Dispose的](https://stackoverflow.com/questions/732864/finalize-vs-dispose)更多信息。

# excel - Visio 2010 到 Excel 2010

> ID：11045772
> 
> 赞同：0
> 
> 时间：2012-06-15T06:40:05.473
> 
> 标签：excel, visio

我有一个转换为 XML 格式的 visio 文件，我想在该 Visio 文件中提取 visio 图表的内容，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:40:31.113

好吧，这取决于内容是指视觉效果还是数据，但基本上您可以以您选择的任何方式处理 xml。我将从这里开始：

[http://blogs.msdn.com/b/visio/archive/2011/05/31/visio-2010-xml-schema-definition-released.aspx](http://blogs.msdn.com/b/visio/archive/2011/05/31/visio-2010-xml-schema-definition-released.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:39:29.813

请看看我的回答。我相信它会帮助你做你正在寻找的东西。

[Visio 2010 C# 实体自动化](https://stackoverflow.com/questions/11475099/visio-2010-c-sharp-entity-automation/11675571#11675571)

根据您正在使用的形状，您可能需要自己做一些工作。这是在 C# 中（对不起，对 VBA 不太熟悉），但这应该会让您朝着正确的方向前进。

# c# - 从 JVM 中执行 C#

> ID：11045774
> 
> 赞同：2
> 
> 时间：2012-06-15T06:40:34.997
> 
> 标签：c#, java, .net, jvm

我最近了解了[IKVM.net](http://www.ikvm.net/)，它是用于 Mono (.NET) 的 Java。所以我猜想可能会有 CLR 在 Java 上的实现。这可用于在 Java 中运行 C# 函数（不是真正的 .NET UI 内容），主要是那些是逻辑或面向算法的程序的代码，例如“解析器”就是一个很好的例子。

不仅仅是“转换”代码的东西，而是将 C# 函数直接执行到 JVM 的东西，可能允许它与其他 Java 对象交互。因为我有这种尝试使用 C# 到 Java 转换器的经验，结果最像近似代码，更难修复。

目前在 JVM 之上是否有任何 CLR 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:56:56.547

你检查过[蚱蜢](http://dev.mainsoft.com/Default.aspx?tabid=130)吗？我不知道它有多好，但它是在几年前为此目的而开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:22:44.523

您也许可以使用[jni4net](http://jni4net.sourceforge.net/)在 Java 和 C# 之间架起桥梁。

# c# - 如何在回发后显示验证错误

> ID：11045775
> 
> 赞同：1
> 
> 时间：2012-06-15T06:40:35.417
> 
> 标签：c#, asp.net

我有一些文本框和下拉列表控件，但是如果我选择 ddl 值，验证错误会消失，并且在单击按钮后它们会重新出现，但即使在回发之后我也想显示错误我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:43:41.063

您能否发布您的代码，以便我们可以看到具体问题可能是什么？在没有看到任何代码的情况下，我会说尝试将其添加到 Page_Load 函数中：

```
if (IsPostBack)
    Page.Validate(); 
```

或者，将其添加到您的 DropDownList 或任何启动回发的控件：

```
CausesValidation="true" 
```

..根据这里的答案：[Validators do not Validate after postback](https://stackoverflow.com/questions/5721145/validators-do-not-validate-after-postback-occurs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:48:02.927

如果添加了控件，请删除您的 asp.net 验证器，并删除 Java 脚本中的任何客户端验证。现在在您要重定向到的页面上添加验证代码。如果该验证失败，则重定向回控制页面，并显示适当的消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:44:12.623

如果您不喜欢默认行为 - 不要使用验证控件并使用客户端编程自行实现它们。

# javascript - 如何加载谷歌字体？

> ID：11045776
> 
> 赞同：4
> 
> 时间：2012-06-15T06:40:35.503
> 
> 标签：javascript, jquery, google-font-api

我加载了 d`web fonts`提供的动态列表`Google Web Fonts service`并将其放在选择列表中，例如：

```
$.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyChZeTZ-DzMW-45IUBXUSuBha9MWEiXXtI", 
     {}, function (data) {
     $.each(data.items, function (index, value) {
        $('#fonts').append($("<option></option>")
                   .attr("value", value.family)
                   .text(value.family);
    }); 
```

现在我想要的是`font`在用户从选择列表中选择它时加载每个，为此我尝试了：

```
$("#fonts").live({ change: function () { 
    $.get("http://fonts.googleapis.com/css?family=" + $(this).val(), {}, 
    function () { alert("font loaded"); }); } }); 
```

但不幸的是，这不起作用，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:23:56.270

第二个 get 请求只是返回加载 webfont 所需的 CSS。

您应该将其嵌入页面上，或者更轻松地将链接标签添加到将加载 google 样式的页面内容。

然后，您还需要在使用它的任何地方设置字体系列...

像这样的东西：

```
$("#fonts").live('change', function () { 

    $('body').append("<link rel='stylesheet' id='colorbox-css'  href='http://fonts.googleapis.com/css?family=" + escape($(this).val()) +"' type='text/css' media='all' />");

    $('body').css({'font-family':'"'+$(this).val()+'"'})

});

$.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyChZeTZ-DzMW-45IUBXUSuBha9MWEiXXtI",  {}, function (data) {

    $.each(data.items, function (index, value) {
            $('#fonts').append($("<option></option>")
                    .attr("value", value.family)
                    .text(value.family));
                    });

}); 
```

注意：`escape`也用于生成 url，以防需要进行 url 编码

# android - 安卓轮概念

> ID：11045784
> 
> 赞同：0
> 
> 时间：2012-06-15T06:41:23.043
> 
> 标签：android

我正在android中开发一个应用程序。我有一个活动，其中有几个按钮。其中，当我单击一个按钮时，我想像 iPhone 默认选择器一样获得下拉菜单。

为了实现这一点，我使用了 Android Wheel 概念。我已经这样实现了，当我单击按钮时，它正在调用另一个活动，其中显示了我所需的自定义布局。问题是自定义布局应该来自我单击的按钮所在的同一活动中的屏幕底部。

我附上了截图。我想实现如截图所示（缺失）。

请帮我提供所需的解决方案。如果我的问题有任何错误，请原谅我。这是第一次提出问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:02:03.747

由于缺少有助于理解您的问题的屏幕截图，这更像是某种猜测：您是否知道Android中[Spinners的概念？](http://developer.android.com/resources/tutorials/views/hello-spinner.html)它们提供了一个下拉机制并且很容易实现。

# php - answers.com 上的复制/粘贴功能

> ID：11045786
> 
> 赞同：-1
> 
> 时间：2012-06-15T06:41:24.693
> 
> 标签：php, javascript, copy, paste

在从事与开发无关的工作时，我在[answers.com](http://wiki.answers.com)上发现了一些感兴趣的东西。我从答案中复制并粘贴了一些文本，并注意到与我的答案一起我得到了一些我没有复制的文本。在进一步研究之后，似乎如果您从网站上的任何位置复制 8 个或更多单词，它会在您粘贴时添加一些文本。例如，如果我转到[网站上的某个页面](http://wiki.answers.com/Q/Who_first_said_the_definition_of_insanity_is_to_do_the_same_thing_over_and_over_and_expect_different_results)并复制 8 个或更多单词，然后将其粘贴到某处，您将得到如下内容：

> 精神错乱是一遍又一遍地做同样的事情，但期待不同的结果。
> 
> 阅读更多： [http ://wiki.answers.com/Q/Who_first_said_the_definition_of_insanity_is_to_do_the_same_thing_over_and_over_and_expect_different_results#ixzz1xqDl0yUW](http://wiki.answers.com/Q/Who_first_said_the_definition_of_insanity_is_to_do_the_same_thing_over_and_over_and_expect_different_results#ixzz1xqDl0yUW)

我的问题是，有人知道这是怎么做到的吗？！我已经查看了一些代码，但没有发现任何给我任何线索的东西 :) 谢谢！

PS 是的，当我注意到这一点时，该页面就是我正在查看的页面：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:56:30.053

```
function addText() {
    var body_element = document.body;
    var selection = window.getSelection();
    var extraText = "<br /><br />some extra info here";
    var copytext = selection + extraText;
    var newdiv = document.createElement('div');
    newdiv.setAttribute('style','position:absolute;left:-99999px;')
    newdiv.innerHTML = copytext;
    body_element.appendChild(newdiv);
    selection.selectAllChildren(newdiv);
    window.setTimeout(function() {
        body_element.removeChild(newdiv);
    },0);
}
document.oncopy = addText; 
```

致谢：[如何向复制的网络文本添加额外信息](https://stackoverflow.com/a/4777746/1055628)

# sql-server-2005 - 更新任何字段会导致更新索引视图吗？

> ID：11045789
> 
> 赞同：1
> 
> 时间：2012-06-15T06:41:35.347
> 
> 标签：sql-server-2005, indexed-view

MSDN 中对索引视图的描述如下：“由于对基表中的数据进行了修改，因此数据修改会反映在索引视图中存储的数据中”。

但是我现在很困惑，更新基表中的任何字段是否会导致索引视图的自动维护，即使该字段不包含在索引视图的定义中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:48:01.750

它没有记录在案，但我相信会发生*一些*活动。

从文档中的各种提示来看，我相信 SQL Server 实际上在每个基表上都构造了类似于触发器的东西。因此，“触发器”将针对表上的每个更新/插入/删除操作运行。

但是，我*相信*触发器使用类似[`COLUMNS_UPDATED`](http://msdn.microsoft.com/en-us/library/ms186329.aspx)检查哪些列具有实际更新活动的功能，并且如果没有相关列受到影响，它将提前退出。

例如，如果您发送`ANSI_NULLS`到`OFF`（`ON`索引视图需要），那么针对视图未使用的列的任何更新都将起作用。而任何*提及*视图中使用的列的更新（即使`SET`是无操作，例如`Column1 = Column1`），那么您将收到一条错误消息。

# raphael - Raphael.js：如何取消设置元素的属性？

> ID：11045790
> 
> 赞同：1
> 
> 时间：2012-06-15T06:41:42.313
> 
> 标签：raphael

我有一个链接设置为元素：

```
element.attr({href: 'http://google.com'}); 
```

现在我想删除一个链接。我正在努力：

```
element.attr({href: false});
element.attr({href: null});
element.attr({href: ''}); 
```

但它们都不起作用。

甚至

```
delete element.attrs.href; 
```

没有帮助。

如何取消设置元素的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:30:57.913

您应该知道（使用 Raphaël API）`.attr()`不会影响底层 DOM 元素，而只是将属性附加到 Raphaël 对象。

如果您希望解决实际节点的`href`属性，您应该使用：

```
element.node.href = 'http://google.com'; 
```

或者：

```
element.node.setAttribute('href', 'http://google.com'); 
```

查看[Raphaël 文档中的“Element.node”](http://raphaeljs.com/reference.html#Element.node)。

# jira - 如何手动（通过 API 或数据库操作）将头像附加到 JIRA 用户？

> ID：11045793
> 
> 赞同：1
> 
> 时间：2012-06-15T06:41:53.280
> 
> 标签：jira, avatar, atlassian-crowd

我们在人群中使用 JIRA 4.4。

我们希望将用户照片从 Active Directory 转储到头像文件夹（在 jira-home 目录内），然后自动将这些照片与 JIRA 用户关联（我们不希望每个用户都必须手动选择他们的头像）。

这可以通过数据库插入/更新操作来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:24:44.420

这个答案可能不太有帮助，但你已经研究过了[吗](https://answers.atlassian.com/questions/38673/avatar-upload-with-jira-5-rest-api)？唯一的问题是用于管理头像的 REST API 是在 JIRA 5.0+ 中引入的

不幸的是，我不知道在 JIRA 4.4 上执行此操作的简单方法。

# css - 字体在 Firefox 中不起作用

> ID：11045799
> 
> 赞同：1
> 
> 时间：2012-06-15T06:42:39.067
> 
> 标签：css, internet-explorer, firefox, font-face

我已经向网站添加了一种字体，添加了 CSS 并上传了字体文件，它在 IE 中工作，但在 Firefox 中没有。这是为什么？

**CSS：**

```
@font-face {
    font-family: 'MyFont';
    src: url('MyFont.eot');
    src: url('MyFont.eot?#iefix') format('embedded-opentype'),
         url('MyFont.woff') format('woff'),
         url('MyFont.ttf') format('truetype'),
         url('MyFont.svg#MyFontRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

label { font-family: 'MyFont'; font-size: 20px; } 
```

这`label`只是一个测试，但它正在工作。字体文件与 CSS 位于同一目录中。

我几乎尝试了所有方法，但仍然无法正常工作......

有人知道出了什么问题吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:53:44.440

为了：

1.  检查字体是否在[Google Web Fonts](http://www.google.com/webfonts)上。如果是，请使用该版本，不要嵌入您自己（为了便于使用、缓存、浏览器更新兼容等）

2.  如果没有，请检查您的 MIME。为此，请使用 Firebug 的 Net 面板查看标题并检查它们是否正确。

3.  如果 MIME 错误，则使用 .htaccess 或编写一个使用 file_get_contents() 和 header() 的 PHP 文件来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:37:24.273

我发现还有另一个 CSS 文件，覆盖了我创建的那个。

问题解决了

# html - 如何使按钮和文本输入全宽（适用于现代浏览器）

> ID：11045802
> 
> 赞同：1
> 
> 时间：2012-06-15T06:42:53.093
> 
> 标签：html, layout, html-input

这似乎是世界上最基本的事情，但没有多少谷歌搜索或实验能引导我找到必须存在的简单解决方案。

```
<div>
  <input type="button" value="look up"/>
  <input type="text" placeholder="word to search for">
</div> 
```

我希望“查找”按钮在左侧的大小正好适合其文本，而文本输入则可以填充 div 的其余宽度。但相反，文本输入采用看似任意的宽度。

我只想知道现代浏览器的最小答案，如果可能的话，最好只使用内联样式，最好不要使用表格。

（这只是用于没人会看到的个人代码，并帮助我学习一些基础知识。搜索带来了大量的谷壳，检查网站很难找到最小的东西，因为它们使用了大量的样式。）

# python - exceptions.ValueError：python scrapy 中不支持的格式字符

> ID：11045808
> 
> 赞同：1
> 
> 时间：2012-06-15T06:43:19.700
> 
> 标签：python, scrapy

嗨，我正在研究scrapy

下面是我的代码

```
class examplespider(CrawlSpider):
    name = "example"
    domain_name = "www.example.com"
    start_urls = ["http://www.example.com/sch/mobile-/67939/i.html?_catref=1"]

def parse(self,response):
    hxs = HtmlXPathSelector(response)
    for i in xrange(1,10):
        yield Request(url="http://www.example.com/sch/mobile-/67939/i.html?_catref=1?_trkparms=65%253A12%257C66%253A1%257C39%253A1%257C72%253A3276&rt=nc&_catref=1&_dmpt=IN_Mobile_Phones&_trksid=p3286.c0.m14.l1513&_pgn=%d"%i,
                                 callback=self.parse_item)
def parse_item(self,response):
    print response,"Here it is................." 
```

**结果**：：

```
 File "/home/local/username/project/example/example/spiders/example_spider.py", line 117, in parse
    yield Request(url="http://www.example.com/sch/mobile-/67939/i.html?_catref=1?_trkparms=65%253A12%257C66%253A1%257C39%253A1%257C72%253A3276&rt=nc&_catref=1&_dmpt=IN_Mobile_Phones&_trksid=p3286.c0.m14.l1513&_pgn=%d"%i,
                                 callback=self.parse_item)
    exceptions.ValueError: unsupported format character 'A' (0x41) at index 61 
```

谁能告诉我代码出了什么问题以及为什么显示不支持的格式字符代码错误，此处是否不支持 url，以及当我们提供一个没有格式说明符的单个整数时，我可以得到响应。请让我知道以上，

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:53:49.143

您的 URL 包含许多未转义`%`的符号，并且您正在尝试使用运算符将​​值插入到字符串中`%`。Python 正在寻找`%`将您替换`i`为 URL 的字符。但它看到的第一个可能是`%A`并且这不是有效的格式字符。错误消息甚至可以准确地告诉您发生了什么以及发生在哪里。

可能最简单的通用解决方案是使用`.format()`字符串的方法而不是`%`运算符：

```
("http://www.example.com/sch/mobile-/67939/i.html?_catref=1?"
 "_trkparms=65%253A12%257C66%253A1%257C39%253A1%257C72%253A3276&rt=nc"
 "&_catref=1&_dmpt=IN_Mobile_Phones&_trksid=p3286.c0.m14.l1513&_pgn={0}").format(i) 
```

`%`它使用不同的格式占位符，这些占位符与您的 URL 对字符的使用不冲突。

或者，特别是在这种情况下，由于您只想将变量附加到 URL，您可以使用直接连接：

```
("http://www.example.com/sch/mobile-/67939/i.html?_catref=1?"
 "_trkparms=65%253A12%257C66%253A1%257C39%253A1%257C72%253A3276&rt=nc"
 "&_catref=1&_dmpt=IN_Mobile_Phones&_trksid=p3286.c0.m14.l1513&_pgn=") + str(i) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T06:51:16.057

我认为问题在于您在字符串插值 i 中将其标记为整数，但它的字符串或其他内容，请尝试检查 i 的类型。

# php - 防止数据库中的重复输入

> ID：11045812
> 
> 赞同：0
> 
> 时间：2012-06-15T06:43:40.237
> 
> 标签：php, sql, mysqli, duplicates

我正在使用表单将文件（图像）上传到我的服务器。我怎样才能防止同一张图片被上传两次？我不可能看是否存在相同标题的图像，因为相同的图像可以有不同的标题，不同的图像可以有相同的标题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T06:53:55.650

像 ZombieHunter 建议的那样创建一个哈希。为什么？因为如果图像已经存在，则可以轻松快速地搜索和检查大哈希表。不幸的是，所有这些哈希方法（如 md5 或 md5_file）都适用于现有文件而不是远程文件。所以无论如何你都必须上传文件。然后，您可以决定是否要保留该文件。如果您从在线资源中获取文件，也许有一些方法可以从标题中检测文件大小并运行哈希而不下载它，但这是一种特殊情况。

此外，如果您将其他业务逻辑附加到这些图像，使用 userHasImages 或 companyHasImages 等概念，您可以将它们组织在命名空间/文件夹/标签中，以便进一步加快搜索速度。

在数据库严格来说防止重复条目方面，对包含哈希的列使用唯一索引。

# macos - 在 Mac 上模拟媒体按键

> ID：11045814
> 
> 赞同：8
> 
> 时间：2012-06-15T06:43:47.227
> 
> 标签：macos, keyevent

有没有办法在常见的 Apple 笔记本电脑上模拟媒体键（音量增大/减小、播放、暂停、上一个、下一个）的按键操作？

如何？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T09:36:03.833

这花了一些时间和许多技巧（尝试使用 ctypes、IOKit 原生接口、Quartz 和/或 Cocoa）。现在这似乎是一个简单的解决方案：

```
#!/usr/bin/python

import Quartz

# NSEvent.h
NSSystemDefined = 14

# hidsystem/ev_keymap.h
NX_KEYTYPE_SOUND_UP = 0
NX_KEYTYPE_SOUND_DOWN = 1
NX_KEYTYPE_PLAY = 16
NX_KEYTYPE_NEXT = 17
NX_KEYTYPE_PREVIOUS = 18
NX_KEYTYPE_FAST = 19
NX_KEYTYPE_REWIND = 20

def HIDPostAuxKey(key):
    def doKey(down):
        ev = Quartz.NSEvent.otherEventWithType_location_modifierFlags_timestamp_windowNumber_context_subtype_data1_data2_(
            NSSystemDefined, # type
            (0,0), # location
            0xa00 if down else 0xb00, # flags
            0, # timestamp
            0, # window
            0, # ctx
            8, # subtype
            (key << 16) | ((0xa if down else 0xb) << 8), # data1
            -1 # data2
            )
        cev = ev.CGEvent()
        Quartz.CGEventPost(0, cev)
    doKey(True)
    doKey(False)

for _ in range(10):
    HIDPostAuxKey(NX_KEYTYPE_SOUND_UP)
HIDPostAuxKey(NX_KEYTYPE_PLAY) 
```

（虽然我现在在 Python 中需要这个，但我的问题并不是真正与 Python 相关的，当然你可以很容易地将它翻译成任何其他语言，尤其是 ObjC。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T11:08:54.243

谢谢你阿尔伯特！我对您的脚本进行了一些扩展，以使其成为可执行文件，而该可执行文件又可以由 Quicksilver 或其他启动器/触发器处理程序调用。

```
#!/usr/bin/python

# CLI program to control the mediakeys on OS X. Used to emulate the mediakey on a keyboard with no such keys.
# Easiest used in combination with a launcher/trigger software such as Quicksilver.
# Main part taken from http://stackoverflow.com/questions/11045814/emulate-media-key-press-on-mac
# Glue to make it into cli program by Fredrik Wallner http://www.wallner.nu/fredrik/

import Quartz
import sys

# NSEvent.h
NSSystemDefined = 14

# hidsystem/ev_keymap.h
NX_KEYTYPE_SOUND_UP = 0
NX_KEYTYPE_SOUND_DOWN = 1
NX_KEYTYPE_PLAY = 16
NX_KEYTYPE_NEXT = 17
NX_KEYTYPE_PREVIOUS = 18
NX_KEYTYPE_FAST = 19
NX_KEYTYPE_REWIND = 20

supportedcmds = {'playpause': NX_KEYTYPE_PLAY, 'next': NX_KEYTYPE_NEXT, 'prev': NX_KEYTYPE_PREVIOUS, 'volup': NX_KEYTYPE_SOUND_UP, 'voldown': NX_KEYTYPE_SOUND_DOWN}

def HIDPostAuxKey(key):
    def doKey(down):
        ev = Quartz.NSEvent.otherEventWithType_location_modifierFlags_timestamp_windowNumber_context_subtype_data1_data2_(
            NSSystemDefined, # type
            (0,0), # location
            0xa00 if down else 0xb00, # flags
            0, # timestamp
            0, # window
            0, # ctx
            8, # subtype
            (key << 16) | ((0xa if down else 0xb) << 8), # data1
            -1 # data2
            )
        cev = ev.CGEvent()
        Quartz.CGEventPost(0, cev)
    doKey(True)
    doKey(False)

if __name__ == "__main__":
    try:
        command = sys.argv[1]
        assert(command in supportedcmds)
        HIDPostAuxKey(supportedcmds[command])
    except (IndexError, AssertionError):
        print "Usage: %s command" % (sys.argv[0],)
        print "\tSupported commands are %s" % supportedcmds.keys() 
```

该脚本可以在[https://gist.github.com/4078034找到](https://gist.github.com/4078034)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-25T16:41:57.527

斯威夫特 5 / MacOS 10.14.4 / Xcode 10.2

```
 @IBAction func mediaPressed(_ sender: AnyObject) {
        let NX_KEYTYPE_SOUND_UP: UInt32 = 0
        let NX_KEYTYPE_SOUND_DOWN: UInt32 = 1
        let NX_KEYTYPE_PLAY: UInt32 = 16
        let NX_KEYTYPE_NEXT: UInt32 = 17
        let NX_KEYTYPE_PREVIOUS: UInt32 = 18
        let NX_KEYTYPE_FAST: UInt32 = 19
        let NX_KEYTYPE_REWIND: UInt32 = 20

        func HIDPostAuxKey(key: UInt32) {
            func doKey(down: Bool) {
                let flags = NSEvent.ModifierFlags(rawValue: (down ? 0xa00 : 0xb00))
                let data1 = Int((key<<16) | (down ? 0xa00 : 0xb00))

                let ev = NSEvent.otherEvent(with: NSEvent.EventType.systemDefined,
                                            location: NSPoint(x:0,y:0),
                                            modifierFlags: flags,
                                            timestamp: 0,
                                            windowNumber: 0,
                                            context: nil,
                                            subtype: 8,
                                            data1: data1,
                                            data2: -1
                                            )
                let cev = ev?.cgEvent
                cev?.post(tap: CGEventTapLocation.cghidEventTap)
            }
            doKey(down: true)
            doKey(down: false)
        }

        for _ in 1...10 {
            HIDPostAuxKey(key:NX_KEYTYPE_SOUND_UP)
        }
        HIDPostAuxKey(key:NX_KEYTYPE_PLAY)
    } 
```

# c# - 通过创建文件夹结构复制具有特定扩展名的文件

> ID：11045818
> 
> 赞同：1
> 
> 时间：2012-06-15T06:44:08.567
> 
> 标签：c#, vb.net, powershell, batch-file, utility

我想复制具有特定扩展名的文件（例如 .config 或 .exe）。它应该创建一个嵌套目录结构，然后将每个文件插入到目录层次结构中的指定位置。理想情况下，我只需为每个文件指定一个父目录，为每个目录指定一个父目录，然后它会构建它。

我需要任何现有的实用程序或批处理文件或 power-shell 脚本或 C#/VB .Net 代码来执行此活动。

非常感谢， 阿米特 Lohakare

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:18:18.753

只是简单`xcopy.exe /s /i "1\*.config" "2"`会递归地在目录 1 中找到所有 .config 文件，并根据文件夹结构将它们复制到目录 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:51:57.960

在 PowerShell 中复制目录结构：

```
$source = "c:\dev"
$destination = "c:\temp\copydev"

Get-ChildItem -Path $source -Recurse -Force |
    Where-Object { $_.psIsContainer } |
    ForEach-Object { $_.FullName -replace [regex]::Escape($source), $destination } |
    ForEach-Object { $null = New-Item -ItemType Container -Path $_ -Force } 
```

复制“.config”文件可以通过以下方式完成：

```
Get-ChildItem -Path $source -Recurse -Force |
    Where-Object { -not $_.psIsContainer -and ($_.Name.Contains(".config") } |
    Copy-Item -Force -Destination { $_.FullName -replace [regex]::Escape($source), $destination } 
```

你的问题不清楚你想在哪里复制东西，所以你必须根据你的需要调整上面的几行。

# c++ - Qt 和 C++ 如何将 Obj& 转换为 Obj*

> ID：11045820
> 
> 赞同：3
> 
> 时间：2012-06-15T06:44:13.963
> 
> 标签：c++, qt, pointers

我是 Qt（和一般的 C++）的新手，所以我在指针方面很弱。我需要转换`Object&`为`Object*`（`Object`某个类的对象在哪里）

我该怎么做？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:47:14.070

```
Obj ob;              <-------  Object named ob of the type Obj
Obj *ptr = &ob;      <-------  Oointer named ptr to type Obj pointing to ob    
Obj &ref = *ptr;     <-------- Reference named ref referring to object of type Obj  
Obj *ptr2 = &ref;    <-------- Pointer named ptr2 to object aliased by ref 
```

您不能将引用转换为指针，您只需将引用用作它所引用的对象实例的别名。因此，您只需获取引用对象的地址，就好像它是原始对象一样。

因此，如果您有一个将指针作为参数的函数并且您有一个引用，则您传递的用法类似于使用实际对象的用法。

例如：

```
void doSomething(Obj *ptr);

Obj ob;
Obj *ptr = &ob;              
Obj &ref = *ptr; 

doSomething(&ob);
doSomething(ptr);
doSomething(&ref); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:49:27.407

您可以使用 address-of 运算符，就像普通对象一样。

```
SomeObject o;

SomeObject &ref = o;

SomeObject *ptr = &ref; 
```

# iphone - UIBarButtonItem 未在 iOS 4.0 中显示

> ID：11045821
> 
> 赞同：1
> 
> 时间：2012-06-15T06:44:23.397
> 
> 标签：iphone, uibarbuttonitem

在 iOS 5.0 中一切都很好，但是当我在 iOS 4.0 中运行我的代码时，导航栏按钮的背景图像以及导航中的标题没有显示出来。

这是我正在使用的代码：

```
// check for version 5.0 support
navController  = [[[UINavigationController alloc] initWithRootViewController:self.viewController] autorelease];
UINavigationBar *navigationBar = [navController navigationBar];
if ([navController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
    UIImage *image = [UIImage imageNamed:@"Nav_Bar.png"];
    [navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
}

else
{
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed: @"Nav_Bar.png"]];
    [self.navController.navigationBar addSubview:imageView];
} 
```

然后在`viewDidLoad`：

```
self.title = @"MyTitle";

self.leftBTN=  [UIButton buttonWithType:UIButtonTypeCustom];
[leftBTN setImage:[UIImage imageNamed:@"BTN1.png"] forState:UIControlStateNormal];
[leftBTN setTitle:@"Edit" forState:UIControlStateNormal];
[leftBTN addTarget:self action:@selector(editOption) forControlEvents:UIControlEventTouchUpInside];
[leftBTN setFrame:CGRectMake(0, 0, 60, 30)];
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:leftBTN] autorelease]; 
```

任何人都可以请解释一下，为什么导航控制器中没有显示图像和标题。此外，如果我点击那个框架，按钮的动作是有效的，唯一的问题是按钮没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:03:06.383

这是 iOS 4 的问题。当视图添加到导航栏时，子视图没有正确处理。它在 iOS 5 中得到解决。

请参阅此[链接](http://sebastiancelis.com/2009/12/21/adding-background-image-uinavigationbar/)。

它有示例项目，在 iOS 4 和 iOS 5 的导航栏中使用背景图像运行。

# c - murmurhash3 中的参数是什么意思？

> ID：11045822
> 
> 赞同：4
> 
> 时间：2012-06-15T06:44:24.153
> 
> 标签：c, hash, murmurhash

我对应该为函数`len`中的参数提供什么值感到困惑`MurmurHash3_x86_128()`（也有类似的函数）。murmurhash3 代码可以在[这里](http://code.google.com/p/smhasher/source/browse/branches/chandlerc_dev/MurmurHash3.cpp)找到。

如果您的回答是密钥长度，请在第 154 行解释代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:55:23.000

大部分肯定是要散列的数据长度（以*字节*为单位），第 154 行的代码：

```
const int nblocks = len / 16; 
```

将此长度划分为 128 位块（或每个 16 字节），这是为了促进更快的散列，因为`MurmurHash3_x86_128()`每次迭代处理和混合 16 字节（4 x uint32）。

你会在第 205 行注意到：

```
switch(len & 15) 
```

如果大小不是 16 的倍数，这将捕获任何试用字节，并且 switch 案例将它们组合到最终哈希中。

# javascript - 第二次点击后提示

> ID：11045825
> 
> 赞同：0
> 
> 时间：2012-06-15T06:44:41.080
> 
> 标签：javascript, jquery, html, css

我有以下代码：

```
<a href="#" id="@item.Id" name="vote" ><img src="/Content/images/021.png" style="float:left" alt="" /></a> 
```

它调用 ajax 调用。在第一次通话。如果返回为真，在第二次通话时，我想制作一个警告框，说您只能投票一次。

```
<script type="text/javascript">
    $(function () {
        $("div.slidera_button a").click(function (e) {
            var item = $(this);
            e.preventDefault();
            $.get('@Url.Action("VoteAjax","Home")', { id: item.attr("id") }, function (response) {
                if (response.vote == "false") {
                    alert("foo.");
                } else {
                    //something
                }
            });
        })
    });
</script> 
```

这有效，如果我单击按钮然后刷新页面但它不起作用，如果我尝试单击两次。

我希望用户能够点击多次，并且只有在第一次点击之后，他们才会弹出一个窗口。

为什么这不起作用？

我该如何解决？

**编辑：在 FF 中工作 .. 在 IE 中不起作用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:50:37.570

使用这个脚本

```
<script type="text/javascript">
    $(function () {
        $("div.slidera_button a").live('click',function (e) {
            var item = $(this);
            e.preventDefault();
            $.get('@Url.Action("VoteAjax","Home")', { id: item.attr("id") }, function (response) {
                if (response.vote == "false") {
                    alert("foo.");
                } else {
                    //something
                }
            });
        })
    });
</script> 
```

或者 JQuery Delegate 方法来触发这个点击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:52:42.633

像这样的东西怎么样：

```
<style type="text/css">
a.disabled {
    opacity: 0.5;
    /* whatever other styles you want */
}   
</style>

<script type="text/javascript">
    $(function () {
        $.ajaxSetup({ cache: false });
        $("div.slidera_button a").click(function (e) {
            var item = $(this);
            if (item.hasClass("disabled")) {
                // alert when they vote
                // you'll need to handle some way to add this 
                // server side to account for page reload, yes?
                alert('You may only vote once');
            }
            $.get('@Url.Action("VoteAjax", "Home")'
                , { id: item.attr("id") }
                , function (response) {
                    // if this returns successfully, you voted.
                    item.addClass('disabled');
                }
            });
            return false;
        })
    });
</script> 
```

# jquery - X- Axis : 时间图表中的时间显示

> ID：11045827
> 
> 赞同：0
> 
> 时间：2012-06-15T06:44:48.817
> 
> 标签：jquery, flot

对于 X 轴输入，我将其指定为从 15-06-2012 11:32 到 15-06-2012 12:20 的时间跨度。但图表 x-axix 显示从 6:10 到 6:50。我希望图表显示实际时间。我的代码运行为

```
 xaxis: { mode: "time", minTickSize: [1, "minute"],
                        min: xMin.getTime(),
                        max: xMax.getTime()
                    }, 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:47:48.967

默认情况下，Flot 在您的时间轴上显示 UTC 时间戳。直到[最近](http://code.google.com/p/flot/issues/detail?id=141)你才有机会选择`xaxis: { mode: "time", timezone: "local" }`。这可能就是你想要的。

在您的示例中，如果您计算`xMin`and`xMax`而`setUTCHours`不是`setHours`等等，您应该设置轴的范围与数据点更好地对应。使用现有的 flot 版本，这可能是你最好的选择。

# javascript - 当它们的父级执行提交时，asp.net mvc 服务器可以看到动态创建的控件吗？

> ID：11045830
> 
> 赞同：0
> 
> 时间：2012-06-15T06:45:04.477
> 
> 标签：javascript, asp.net-mvc

我想用 Javascript 在表单中创建一些控件，然后我想将它提交到服务器。

服务器可以读取这些动态创建的控件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:50:47.830

是的。MVC 本质上是无状态的。请记住，这不是 ASP.NET Webforms——“控件”的存在方式与它们不同。当您进行 POST 时，您只是发送表单字段名称/值对。如果字段的名称对应于模型中的属性，或者对应于操作的参数，它将绑定。

# javascript - 如何转到 json 数组中的下一个和上一个值？

> ID：11045832
> 
> 赞同：2
> 
> 时间：2012-06-15T06:45:11.313
> 
> 标签：javascript, jquery, json

几天来，我一直在用这个把头撞到墙上。我有一个项目列表，单击时会将单个项目移动到 div。根据单击的项目，我正在尝试转到列表中的下一个和上一个项目（json）。

我对此有点陌生，无论我尝试什么，我都无法让它发挥作用。

这是[jsfiddle 代码](http://jsfiddle.net/jsledervenson/tNHUF/)。谢谢！

HTML：

```
<audio id="audio-player" name="audio-player" src="" ></audio>

<a id="next-bt" href="#">
<div class="player-musicnav-ff-column3">
    <ul class="musicnav-ff">
        <li class="ff">NEXT</li>
    </ul>
</div>
</a>

<a id="prev-bt" href="#">
<div class="player-musicnav-ff-column3">
    <ul class="musicnav-ff">
        <li class="ff">PREV</li>
    </ul>
</div>
</a>

<br/>
<br/>
<div id="player-digital-title">
</div>
<br/>
<br/>
<a href="#" id='player-handwriting-title'></a>​​ 
```

Javascript 一个 Jquery：

```
$(document).ready(function(){

  var treeObj = {"root":[{"id":"1","trackName":"Whippin Post"},{"id":"2","trackName":"Sweet Caroline"},{"id":"3","trackName":"Tears in Heaven"},{"id":"4","trackName":"Ain't She Sweet"},{"id":"5","trackName":"Octopus' Garden"},{"id":"6","trackName":"Teen Spirit"},{"id":"7","trackName":"Knockin on Heaven's Door"}]};

    var $ul = $("<ul></ul>");       
    $.each(treeObj.root,function(i,v) {
        $ul.append(
            $("<li></li>").append(                   $("<a></a>")
                                                     .attr({"href":v.id,"data-file":v.trackFile})
               .html(v.trackName)
                                                     )
            );

    });
    $("#player-handwriting-title").empty().append($ul);

     $("#player-handwriting-title a").click(function() {
      var name = $(this).html(),
          filename = $(this).attr("data-file");
          filename2 = "upload-form/upload/" + filename;
        $('#player-digital-title').html($(this).html());

        document.getElementById('audio-player').src =   filename2;
        $("#audio-player")[0].play();
        return false;

    }); 

var myID = 0;
$("#next-bt").click(function() {
document.getElementById('player-digital-title').innerHTML =  treeObj.root[++myID].trackName ;
    });

var mylease = 6;
$("#prev-bt").click(function() {
document.getElementById('player-digital-title').innerHTML =  treeObj.root[--mylease].trackName ;
    });

}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:59:17.740

尝试类似的东西

```
 var myID = 0;
$("#next-bt").click(function() {
  myID++;
  if(myID > treeObj.root.length) { myID = 0; }
document.getElementById('player-digital-title').innerHTML =  treeObj.root[++myID].trackName ;
    });

var mylease = 6;
$("#prev-bt").click(function() {
  myID--;
  if(myID < 0) { myID = treeObj.root.length; }
document.getElementById('player-digital-title').innerHTML =  treeObj.root[--mylease].trackName ;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:13:46.260

添加了一个小提琴

[http://jsfiddle.net/kabichill/JzL97/](http://jsfiddle.net/kabichill/JzL97/)

看看..希望它是你所期望的...

# php - 如何使用 xpdf 解码 pdf 中的一些特殊字体？

> ID：11045836
> 
> 赞同：0
> 
> 时间：2012-06-15T06:45:25.367
> 
> 标签：php, type-conversion, shellexecute, pdftotext

我正在使用 xpdf 将 pdf 文件转换为文本。下面是用于它的代码。

```
$content = shell_exec('pdftotext '.$filename.' -'); 
```

Xpdf 无法将 pdf 中的一些特殊字体转换为文本。例如：无法使用 xpdf 将奇异字体转换为文本。

它们是可以将pdf中的所有字体转换为PHP文本的替代软件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:37:44.233

如果您的文件的 XPDF 版本失败，也许您应该尝试[**Poppler**](http://poppler.freedesktop.org/)版本`pdftotext`....

**但是，请注意这一事实：** ***即使是 Acrobat Reader 也无法将 PDF 页面上所有渲染良好的文本提取到文本文件中...***

# openmp - 如何让不同的 OpenMP 线程执行不同的任务

> ID：11045843
> 
> 赞同：0
> 
> 时间：2012-06-15T06:45:52.693
> 
> 标签：openmp

我正在使用 open MP 来加快程序中的通量计算。我基本上希望 OpenMP 并行执行左右通量计算。但相反，以下代码在指令上花费了更多时间`#pragma`。我要修改什么才能使它正确？

```
#pragma omp parallel num_threads(2)
{

#pragma omp single
{//first condition
//cerr<<"Executed thread 0"<<endl;
        if ( (fabs(lcellMach-1.0)<EPSILON) || ( (lcellMach-1.0) > 0.0 ) ){//purpose of Epsilon!!!!
                FluxP[0] = rhol * vnl;
                FluxP[1] = rhol * ul * vnl + Pl*nx;
                FluxP[2] = rhol * vl * vnl + Pl*ny;
                FluxP[3] = rhol * wl * vnl + Pl*nz;
                FluxP[4] = rhol * ((GAMMA * Pl / (rhol * (GAMMA-1.0))) + ((ul*ul + vl*vl + wl*wl)/2.0)) * vnl;
        }else if ( (fabs(lcellMach+1.0)<EPSILON) || ( (lcellMach+1.0) < 0.0 ) ){
                FluxP[0] = FluxP[1] = FluxP[2] = FluxP[3] = FluxP[4] = 0.0;// If flow direction is opposite the Flux + is zero
        }else {
                double ql = (ul*ul + vl*vl + wl*wl);// how did this come
                FluxP[0] = rhol * lcell_a * (lcellMach+1.0)*(lcellMach+1.0) / 4.0;
                FluxP[1] = FluxP[0] * ( ul + (nx*(0.0-vnl + 2.0*lcell_a)/GAMMA) );
                FluxP[2] = FluxP[0] * ( vl + (ny*(0.0-vnl + 2.0*lcell_a)/GAMMA) );
                FluxP[3] = FluxP[0] * ( wl + (nz*(0.0-vnl + 2.0*lcell_a)/GAMMA) );
                FluxP[4] = FluxP[0] * (  ((ql - vnl*vnl)/2.0) + (((GAMMA-1.0)*vnl + 2.0*lcell_a)*((GAMMA-1.0)*vnl + 2.0*lcell_a) / (2.0*(GAMMA*GAMMA-1.0)))  );
        }
}//end of 1st
#pragma omp single
{//second condition
//cerr<<"Executed thread 1"<<endl;
        if ((fabs(rcellMach+1.0)<EPSILON) || ((rcellMach+1.0) < 0.0)) {
                FluxM[0] = rhor * vnr;
                FluxM[1] = rhor * ur * vnr + Pr*nx;
                FluxM[2] = rhor * vr * vnr + Pr*ny;
                FluxM[3] = rhor * wr * vnr + Pr*nz;
                FluxM[4] = rhor * ((GAMMA * Pr / (rhor * (GAMMA-1.0))) + ((ur*ur + vr*vr + wr*wr)/2.0)) * vnr;
        }else if ((fabs(rcellMach-1.0)<EPSILON) || ((rcellMach-1.0) > 0.0)) {
                FluxM[0] = FluxM[1] = FluxM[2] = FluxM[3] = FluxM[4] = 0.0;
        }else {
                tempFlux[0] = rhor * vnr;
                tempFlux[1] = rhor * ur * vnr + Pr*nx;
                tempFlux[2] = rhor * vr * vnr + Pr*ny;
                tempFlux[3] = rhor * wr * vnr + Pr*nz;
                tempFlux[4] = rhor * ((GAMMA * Pr / (rhor * (GAMMA-1.0))) + ((ur*ur + vr*vr + wr*wr)/2.0)) * vnr;

                double qr = (ur*ur + vr*vr + wr*wr);
                tempFluxP[0] = rhor * rcell_a * (rcellMach+1.0)*(rcellMach+1.0) / 4.0;
                tempFluxP[1] = tempFluxP[0] * ( ur + (nx*(0.0-vnr + 2.0*rcell_a)/GAMMA) );
                tempFluxP[2] = tempFluxP[0] * ( vr + (ny*(0.0-vnr + 2.0*rcell_a)/GAMMA) );
                tempFluxP[3] = tempFluxP[0] * ( wr + (nz*(0.0-vnr + 2.0*rcell_a)/GAMMA) );
                tempFluxP[4] = tempFluxP[0] * (  ((qr - vnr*vnr)/2.0) + (((GAMMA-1.0)*vnr + 2.0*rcell_a)*((GAMMA-1.0)*vnr + 2.0*rcell_a) / (2.0*(GAMMA*GAMMA-1.0)))  );

                for (int j=0; j<O; j++) FluxM[j] = tempFlux[j] - tempFluxP[j];
        }
}
}//pragma 
```

需要紧急帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:32:31.193

您需要的是`sections`构造：

```
#pragma omp parallel sections num_threads(2)
{
   #pragma omp section
   {
      ... code that updates FluxP ...
   }
   #pragma omp section
   {
      ... code that updates FluxM ...
   }
} 
```

但是您的代码似乎不需要太多时间来进行计算（`for`例如，内部没有大循环），因此 OpenMP 将对其施加的开销很可能比节省计算时间更耗时，因此并行版本很可能会比串行执行得慢。

# jquery - 在struts2中使用JQuery，ajax填充基于第一个下拉列表的依赖下拉列表

> ID：11045845
> 
> 赞同：-2
> 
> 时间：2012-06-15T06:45:55.977
> 
> 标签：jquery, struts2

我填充了三个下拉列表，每个下拉列表在加载 jsp 页面时彼此独立，仅使用 struts2 标记从数据库中获取数据。但是我们的要求是，一旦从第一个下拉列表中选择了数据，那么应该根据剩下的两个下拉列表进行更改。请提供示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:00:30.447

这不是提供示例代码的地方，我只能建议使用 JQuery/Dojo，如果你是每个懒惰的 Struts2 都提供了一个与 JQuery 集成得很好的插件。

[S2 jQuery 插件](http://code.google.com/p/struts2-jquery/)

如果你想玩 Ajax，我建议你使用 JSON，比如当你从第一个下拉列表中选择值时，将该值发送到服务器并根据所选值获取列表，将该值转换为 JSON 并让 Jquery/ dojo 在 UI 上解析它。

使用 Struts2 JSON 插件让你生活更轻松

[S2-json-插件](http://struts.apache.org/2.2.3/docs/json-plugin.html)

简而言之，SO 社区总是愿意提供帮助，但同时希望你应该展示你的努力，到目前为止你做了什么，你面临什么问题，而不是仅仅要求一个代码

# java - 错误 jsf/primefaces：arraylist 的可序列化不起作用

> ID：11045850
> 
> 赞同：4
> 
> 时间：2012-06-15T06:46:32.573
> 
> 标签：java, jsf-2, primefaces

我有一个 bean 控制器和一个具有 String 和 Boolean 作为属性的实体。当我想更改我的惰性数据表（primefaces）的页面时，我遇到了这个错误。如果我使用字符串列表而不是我的实体列表作为数据进行测试，则不会出现此错误。有人能帮我吗？

```
uin 14, 2012 4:19:19 PM com.sun.faces.application.view.FaceletViewHandlingStrategy                                                                 handleRenderException
SEVERE: Error Rendering View[/List.xhtml]
java.io.NotSerializableException: java.util.ArrayList$SubList
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.HashMap.writeObject(HashMap.java:1014)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

juin 14, 2012 4:19:19 PM com.sun.faces.context.ExceptionHandlerImpl throwIt
INFO: Exception when handling error trying to reset the response.
java.io.NotSerializableException: java.util.ArrayList$SubList
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.HashMap.writeObject(HashMap.java:1014)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

juin 14, 2012 4:19:19 PM com.sun.faces.renderkit.RenderKitUtils renderHtmlErrorPage
WARNING: JSF1087: Unable to generate Facelets error page as the response has already been committed.
juin 14, 2012 4:19:19 PM com.sun.faces.renderkit.RenderKitUtils renderHtmlErrorPage
SEVERE: javax.faces.FacesException: java.util.ArrayList$SubList
javax.faces.FacesException: java.util.ArrayList$SubList
at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:142)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.NotSerializableException: java.util.ArrayList$SubList
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.HashMap.writeObject(HashMap.java:1014)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
... 18 more

juin 14, 2012 4:19:25 PM com.sun.faces.renderkit.ClientSideStateHelper doGetState
SEVERE: Not in GZIP format
java.util.zip.ZipException: Not in GZIP format
at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:164)
at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:78)
at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:90)
at com.sun.faces.renderkit.ClientSideStateHelper.doGetState(ClientSideStateHelper.java:231)
at com.sun.faces.renderkit.ClientSideStateHelper.getState(ClientSideStateHelper.java:198)
at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:192)
at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142)
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

juin 14, 2012 4:19:25 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [] threw    exception
java.lang.NullPointerException
at com.sun.faces.context.PartialViewContextImpl.createPartialResponseWriter(PartialViewContextImpl.java:441)
at com.sun.faces.context.PartialViewContextImpl.access$300(PartialViewContextImpl.java:71)
at com.sun.faces.context.PartialViewContextImpl$DelayedInitPartialResponseWriter.getWrapped(PartialViewContextImpl.java:582)
at javax.faces.context.PartialResponseWriter.startDocument(PartialResponseWriter.java:115)
at org.primefaces.context.PrimePartialResponseWriter.startDocument(PrimePartialResponseWriter.java:205)
at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:199)
at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)` 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T08:55:55.827

在某些时候，您正在使用类似的东西： `x = myArrayList.subList(a,b));`

在此之后 x 将无法序列化，因为从 subList() 返回的子列表对象没有实现它。尝试做`x = new ArrayList(myArrayList.subList(a,b)));`。

# android - 如何限制用户从图库中选择 500kb 以下的图像？

> ID：11045853
> 
> 赞同：1
> 
> 时间：2012-06-15T06:46:53.433
> 
> 标签：android, bitmap, gallery

我也需要在 ImageView 中显示图像并通过从图库中获取上传到服务器。我有一个问题，我应该允许用户发送超过 500kb 的图像文件。如何限制用户选择500kb以下。或者有什么方法可以将图像压缩为我从 Uri 获得的 PNG 格式。请需要一个解决方案我的代码如下：

```
if(requestCode == Constants.SELECT_PICTURE && resultCode == RESULT_OK){
if(data != null)
{
photoUri = data.getData();
if (photoUri != null)
{
try {
bMap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), photoUri);
Bitmap bitMap = Bitmap.createScaledBitmap(bMap, 320, 480, false);
cabinImge.setImageBitmap(bitMap);
Utility.releaseImgViewMemory(cabinImge);
uploadImage(bitMap);
}catch(OutOfMemoryError e){ 
e.printStackTrace();
}catch(Exception e){
e.printStackTrace();
}                       
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:26:00.233

当您从应用程序的图库中选择图像时，它将返回该图像的 URI。然后，您可以简单地检索其大小并对其应用计算`byte/1024`

# c++ - C++ 使用统计

> ID：11045860
> 
> 赞同：1
> 
> 时间：2012-06-15T06:47:18.283
> 
> 标签：c++, usage-statistics

我已经用 C++ 制作了一个应用程序，并且想知道如何实现使用统计系统，以便我可以收集一些有关用户如何使用该程序的数据。

例如。**IP 地址、在应用程序中花费的小时数和使用的操作系统。**

从理论上讲，我知道如果必须的话，我可以自己编写代码，但我想知道是否有可用的框架让这更容易做到。不幸的是，我在谷歌上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:03:13.717

虽然没有任何类型的这样的框架，但您可以通过使用一些方法和技术来减少您必须做的工作（为了检索所有这些信息），我尝试在下面描述。拜托，任何人都可以随时纠正我。

总结一下，完成任务需要哪些信息组：

*   **用户环境信息**。我建议您查看 Microsoft 的 WMI 基础结构，特别是[WMI 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394554%28v=vs.85%29.aspx)：[桌面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392727%28v=vs.85%29.aspx#_hmm_desktop)、[文件系统](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392727%28v=vs.85%29.aspx#_hmm_file_system)、[网络](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392727%28v=vs.85%29.aspx#_hmm_networking)等。在您的应用程序中使用这些类可以帮助您检索几乎所有类型的系统信息。但是，如果您对此不满意，请参阅*#2*。
*   **应用程序和系统性能**。在这些术语中，我指的是整体系统性能、处理器数量、操作系统中运行的进程等。要检索这些数据，您可以使用**[NtQuerySystemInformation](http://msdn.microsoft.com/en-us/library/ms724509%28VS.85%29.aspx)**函数。在它的帮助下，您将可以访问详细的*SystemProcessInformation*、*SystemProcessorPerformanceInformation*（检索有关每个处理器的信息）信息等等。
*   **用户相关信息**。很难找到一个框架来做这些事情，所以我建议你简单地开始编写代码，牢记你的要求：
    *   计算每个按钮被按下的次数，每个文本字段的变化等等。
    *   测量某种预定义序列中连续动作之间的延迟时间（例如，如果您有一个设置 gui 表单，并且您希望用户快速填写所有必需的文本字段，因此使用时间延迟测量可以为您提供信息，如果用户按照我们对他的预期行事或在 TextBox2 后延迟 5 分钟）。
    *   任何你可能感兴趣的东西。

那么，如何实现最后一项（**用户相关信息**）要求？至于我，我会做以下事情（有些可能看起来很难实现或太无意义）： - 创建一种基本的 Counter 类并从中派生一些控件（按钮、编辑等）。- 在获取子句柄时使用鼠标或键盘的 windows 挂钩（例如，识别控件）。- 使用回调类，它可以完成所有“肮脏”的工作（计数、测量、执行附加操作）。

您可以将所有这些信息存储在文本文件或 SQLite 数据库中，或者任何您喜欢的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:23:48.203

我建议看一下[DeskMetrics](http://deskmetrics.com/)。这篇[StackOverflow 帖子](https://stackoverflow.com/questions/1554062/how-to-use-analytics-for-desktop-applications)总结了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T16:09:11.633

构建自己的框架可能需要几个月的开发时间（除了维护）。使用[**Trackerbird Software Analytics 之**](http://www.trackerbird.com)类的工具，您可以将 DLL 与您的应用程序集成，并在 30 分钟内开始跟踪，您将获得所有酷炫的实时可视化。

免责声明：我隶属于公司。

# javascript - NodeJS 电子邮件代理

> ID：11045861
> 
> 赞同：1
> 
> 时间：2012-06-15T06:47:19.780
> 
> 标签：javascript, email, node.js

我正在尝试通过 NodeJS 代理电子邮件，以便对我们测试服务器上的传出电子邮件进行非常自定义的处理。

这就是我所拥有的：

```
var net = require('net');

var server = net.createServer({allowHalfOpen: true}, function(socket) {
    console.log('New connection established.');
    socket.setEncoding('utf8');

    socket.on('data', function(data) {
        console.log(data);
    });

    socket.on('end', function() {
        console.log('Connection closing.');
    });

    socket.resume();
});

server.listen(25); 
```

它还没有处理电子邮件，因为它根本不起作用。每次发送电子邮件时，我都会在控制台中收到连接建立消息，但数据事件永远不会被触发。我不确定是否在绑定事件侦听器之前数据已经到来，或者我是否应该先与客户端交谈（`HELO`？）。

基本上，我正在尝试访问电子邮件内容。

# drupal - 德鲁巴 | 删除从分类法构造的选择框的默认值

> ID：11045863
> 
> 赞同：0
> 
> 时间：2012-06-15T06:47:27.663
> 
> 标签：drupal, drupal-6

我的内容类型附有分类法。在创建该内容类型的节点时，我在分类下拉菜单中看到“-选择一个-”值。我想删除它并想将默认值设置为特定术语。这样做的更好方法是什么？我在 Drupal 方面也没有太多经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:25:47.560

我现在能够解决这个问题。刚刚在我的表单中添加了以下行

```
unset($form['taxonomy'][$vocabulary_id]['#options']['']); 
```

# android - 基于 GPS 的地图位置，找不到地图不显示位置的错误

> ID：11045865
> 
> 赞同：0
> 
> 时间：2012-06-15T06:47:35.367
> 
> 标签：android, google-maps

我正在尝试从 GPS 获取坐标（这实际上给出了 Toast 的 lat 和 long 的值。）我正在尝试获取该值并将其用作地图坐标并显示当前位置，但它没有显示它。我哪里出错了？

```
public class Map extends MapActivity {

    MapController mControl;
    GeoPoint GeoP;
    MapView mapV;

    public double lat;
    public double longi;

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

    protected LocationManager locationManager;

    @Override

    public void onCreate (Bundle saveInstanceState){
        super.onCreate(saveInstanceState);
        setContentView(R.layout.map);

        mapV = (MapView)findViewById(R.id.mapview);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationListener()
        );

        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {

            lat = location.getLatitude();
            longi = location.getLongitude();

        }

        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(Map.this, message, Toast.LENGTH_LONG).show();

        GeoP = new GeoPoint ((int)(lat*1E6),(int)(longi * 1E6));

        mControl = mapV.getController();
        mControl.animateTo(GeoP);
        mControl.setZoom(13);

    }
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
            Toast.makeText(Map.this, message, Toast.LENGTH_LONG).show();
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:51:07.403

嘿，我已经使用这个网站作为例子来实现，请看一下它可能会帮助你 [http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android) http://www.vogella.com/articles/ AndroidLocationAPI/article.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:02:30.597

我想知道为什么您不打算在 onLocationChanged 回调中显示位置。当您的设备获取某个位置时，首先会调用此方法。

所以在 onLocationChanged 中包含以下代码

它应该是这样的。

```
 @Override
 public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude() * 1E6);
        int lng = (int) (location.getLongitude() * 1E6);
        GeoPoint point = new GeoPoint(lat, lng);
        mControl.animateTo(point); // mapController.setCenter(point);

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:57:17.680

```
package m.a.p;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.content.Context;
import android.location.Location;
import android.location.LocationManager;
import android.location.LocationListener;
import android.os.Bundle;
import android.widget.Toast;

public class MappingActivity extends MapActivity {
    /** Called when the activity is first created. */

    MapController mControl;
    GeoPoint GeoP;
    MapView mapV;

    public double lat;
    public double lng;

     private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
     private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

    protected LocationManager locationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapV = (MapView) findViewById(R.id.mapview);

//        double lat = 40.8;
//        double lng = -96.66;

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationListener()
        );

        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {

            lat = location.getLatitude();
            lng = location.getLongitude();

        }

        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                lat, lng
        );
        Toast.makeText(MappingActivity.this, message, Toast.LENGTH_LONG).show();

        GeoP = new GeoPoint ((int)(lat*1E6),(int)(lng * 1E6));

  //      GeoP = new GeoPoint ((int)(lat * 1E6),(int)(lng*1E6));

        mControl = mapV.getController();
        mControl.animateTo(GeoP);
        mControl.setZoom(13);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    public class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    lat, lng
            );
            Toast.makeText(MappingActivity.this, message, Toast.LENGTH_LONG).show();
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

}
} 
```

谢谢大家的帮助。它终于奏效了

# javascript - 按钮内的复选框？

> ID：11045867
> 
> 赞同：6
> 
> 时间：2012-06-15T06:47:49.143
> 
> 标签：javascript, jquery, html

有没有办法在按钮内获得一个复选框？

目前我有这个解决方案：

```
<html>
<body>
   <div id="menu">
     <button><input type="checkbox" /></button>
   </div>
</body>
</html> 
```

没关系，它在 Chrome 和 Firefox 上运行良好……但在 IE 上真的很糟糕，所以我需要另一种方法来实现这个目标。

[![1](../Images/6d316be2cb2bfb0a63c54fb1c0f07383.png)](https://i.stack.imgur.com/6esgp.png) [![2](../Images/f4c5c1ccd86e0d85dfa6e459671b6c11.png)](https://i.stack.imgur.com/2tVA5.png)

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:56:43.327

我认为将 a 放在 a`checkbox`内不是有效标记`button`。最好将其替换为`button`or`span`并将`div`一些`CSS`应用于`span`or`div`使其看起来像`button`并将`click`事件应用于该事件并更改`checkbox`状态。

**[只是给你一个例子](http://jsfiddle.net/QStkd/246/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T09:35:55.677

我不完全确定你想在这里实现什么，所以如果我的答案不是你想要的，请原谅我。如果您想要一个更改复选框状态的按钮，那么@thecodeparadox 的答案应该很好用，但是如果您正在寻找一个执行功能但内部还有一个可以切换的复选框的按钮，您可能想要类似于以下内容：

**HTML：**

```
<div id="button" href="#">
    <input type="checkbox" class="check">Submit
</div>​ 
```

**CSS：**

```
body {
    margin: 10px;
}
#button {
    display: inline-block;
    background: #ddd;
    border: 1px solid #ccc;
    padding: 5px 10px;
    text-decoration: underline;
    color: blue;
    cursor: pointer;
}
.check {
    display: inline-block;
    margin-right: 10px;
} 
```

​<strong>jQuery：

```
$('#button').on('click', function() {
    window.location = '#';
})​ 
```

[http://jsfiddle.net/QStkd/278/](http://jsfiddle.net/QStkd/278/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:52:36.813

它不是有效的标记，但你可以用 jquery 欺骗 IE -

```
<button>hi</button>
$('button').prepend('<input type="checkbox" />'); 
```

演示：http: [//jsfiddle.net/Gg9fG/](http://jsfiddle.net/Gg9fG/)

# android - 如何使复选框在android中看起来更好

> ID：11045871
> 
> 赞同：2
> 
> 时间：2012-06-15T06:48:11.607
> 
> 标签：android, android-layout, checkbox

这是我的复选框的 XML：

```
<CheckBox
                android:id="@+id/atm_checkbox"
                android:layout_width="20dp"
                android:layout_height="20dp"
                android:background="@color/input_color" /> 
```

它看起来像这样：

[http://imageshack.us/photo/my-images/528/47342915.png/](http://imageshack.us/photo/my-images/528/47342915.png/)

这是我在网上找到的：

```
<CheckBox
        android:id="@+id/chkAndroid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/chk_android"
        android:checked="true" /> 
```

看起来像[这样](http://www.mkyong.com/android/android-checkbox-example/)

如何将我的复选框更改为我在互联网上找到的复选框。由于我的代表 <10 我无法上传我的复选框的图像，或者任何人都可以帮助我如何设置复选框的样式以使其看起来更好

我认为这两个 xml 都有相似的代码，但为什么它们看起来如此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:09:54.387

如果您想自定义复选框的外观，请参阅本[教程](http://www.anddev.org/tutorial_change_look_of_checkbox-t4553.html)并找到所有内容。

顺便说一句，`checkbox`来自您的链接适用于Android3.0及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:51:15.040

CheckBox 派生自 Button 类，因此您可以设置像按钮一样的背景图像。看到这个[链接](https://stackoverflow.com/a/3965796/818587)，可能就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T18:14:16.763

如果您想要一个没有代码的简洁设计，请使用：

```
<CheckBox
   android:id="@+id/checkBox1"
   android:layout_height="wrap_content"
   android:layout_width="wrap_content"
   android:drawableLeft="@android:color/transparent"
   android:drawablePadding="10dp"
   android:text="CheckBox"/> 
```

诀窍是将颜色设置为透明`android:drawableLeft`并为`android:drawablePadding`. 此外，透明度允许您在任何背景颜色上使用此技术，而不会产生副作用——比如颜色不匹配。

# python - 使用 Django 启动 Dwolla 支付处理器：使用应用程序还是直接发送 POST、GET 请求？

> ID：11045874
> 
> 赞同：0
> 
> 时间：2012-06-15T06:48:37.763
> 
> 标签：python, django, payment-gateway, dwolla

这是我第一个与支付处理器打交道的项目。我在我的 Django 项目中使用 Dwolla。我从未与支付处理商打过交道，我想知道我应该从哪里开始。

我是否需要像 Github、Twitter 等的 API 一样使用它，只需发送一些 POST 或 GET 请求并从中获取结果。或者，还有其他我需要遵循的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:29:32.107

是的，工作流程与任何其他支付网络服务基本相同。只需阅读文档。一个好的起点可能[是异地网关](https://www.dwolla.com/developers/offsitegateway)。

还有一个[开发者论坛](https://getsatisfaction.com/dwolla)。

# sql - CodeIgniter Active Records - 重复选择查询的结果

> ID：11045887
> 
> 赞同：0
> 
> 时间：2012-06-15T06:49:21.923
> 
> 标签：sql, codeigniter, activerecord

我有一个`mails`表格，它是我处理邮件的主要表格。我也有FK 连接它们`mails_sent`并包含如下数据- 一封邮件可能有多个发送日期设置，所以我知道用户为发送邮件设置的所有日期在哪里和`mails_dates``mails``mails_dates``1:N``N``mails_sent`- 之后已发送邮件 在此表中添加了一条新记录，其中`id`包含邮件的名称和发送日期。因为正如我提到的，邮件可以在这里多次发送，所以这里的关系也`1:N`代表`N`了发送邮件的不同日期。

我需要在 UI 中显示此信息。首先，我必须只显示发送日期，然后我使用这个：

```
$this->db->select("mails.id, mails.subject, mails.dt_created, mails.groups");
        $this->db->select("GROUP_CONCAT(DATE_FORMAT( mails_dates.dt_sending_date, '%d-%m-%Y')) AS sending_dates", FALSE );
        $this->db->join('mails_dates','mails_dates.mail_id = mails.id', 'left');
        $this->db->join('mails_sent','mails_sent.mail_id = mails.id', 'left');

        $this->db->from('mails');
        $this->db->group_by('mails.id');
        $res = $this->db->get()->result_array();

        return $res; 
```

当我使用它时，一切都很好，我得到了一个包含所有日期的字符串。但问题是当我尝试获取发送邮件的日期时。我又添加了一个选择：

```
$this->db->select("GROUP_CONCAT(DATE_FORMAT( mails_sent.dt_sent, '%d-%m-%Y')) AS sent_dates", FALSE ); 
```

使我的查询看起来像这样：

```
 $this->db->select("mails.id, mails.subject, mails.dt_created, mails.groups");
    $this->db->select("GROUP_CONCAT(DATE_FORMAT( mails_sent.dt_sent, '%d-%m-%Y')) AS sent_dates", FALSE );
    $this->db->select("GROUP_CONCAT(DATE_FORMAT( mails_dates.dt_sending_date, '%d-%m-%Y')) AS sending_dates", FALSE );
    $this->db->join('mails_dates','mails_dates.mail_id = mails.id', 'left');
    $this->db->join('mails_sent','mails_sent.mail_id = mails.id', 'left');

    $this->db->from('mails');
    $this->db->group_by('mails.id');
    $res = $this->db->get()->result_array();

    return $res; 
```

但问题是 If`sending_dates`包含比方说 - 6 个值，并且`sent_dates`只有一个我最终得到一个包含 6 倍值的字符串`sent_dates`。这是在生产中，所以我没有很多记录，但同样的情况发生在我有 2 条`sending_dates`和 1 条记录的查询中，但我`sent_dates`仍然从`sent_dates`.

我怎样才能解决这个问题？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:10:44.480

好的，我找到了解决方案，这里是：

```
$this->db->select("GROUP_CONCAT(DISTINCT(DATE_FORMAT(mails_sent.dt_sent, '%d-%m-%Y'))) AS sent_dates", FALSE ); 
```

换句话说，只需使用`DISTINCT`.

# php - 从 Gmail 获取邮件时获取发件人的电子邮件 ID

> ID：11045894
> 
> 赞同：0
> 
> 时间：2012-06-15T06:49:48.780
> 
> 标签：php, email, gmail

我正在从 gmail 获取电子邮件，我可以在其中获取正文、发件人姓名等。我必须获取发件人的电子邮件 ID，但我无法获得。在通过 imap_header 获取 headerinfo 后，我尝试了一些变量名称，例如 fromaddress ，但没有奏效。我能得到一些帮助吗？

```
function connect_mail(){

    $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
    $username = '*****@gmail.com';
    $password = '*****';    
    $inbox = imap_open($hostname,$username,$password) or die(t('Cannot connect to Gmail: ' . imap_last_error()));   
    $emails = imap_search($inbox,'ALL');    
    $Msgcount = count($emails);
        for ($x = 1; $x <= $Msgcount; $x++)
        {
           $overview = imap_fetch_overview($inbox, $x);
           $title = $overview[0]->subject;
           echo "Subject of the Mail : ".$title."</br>";
           $from = $overview[0]->from;
           echo "Name of the sender : ".$from."</br>";

           //Now I have to get mail ID of senders & print it, but how?
        }
} 
```

我已经尝试了几种方法，但每次都失败了......在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:13:45.703

我做到了..万岁！

这是代码： -

```
function connect_mail(){

    $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
    $username = '*****@gmail.com';
    $password = '*****';    
    $inbox = imap_open($hostname,$username,$password) or die(t('Cannot connect to Gmail: ' . imap_last_error()));   
    $emails = imap_search($inbox,'ALL');    
    $Msgcount = count($emails);
        for ($x = 1; $x <= $Msgcount; $x++)
        {
           $overview = imap_fetch_overview($inbox, $x);
           $title = $overview[0]->subject;
           echo "Subject of the Mail : ".$title."</br>";
           $from = $overview[0]->from;
           echo "Name of the sender : ".$from."</br>";

           $header = imap_headerinfo($inbox, $x);
           $fromaddress = $header->from[0]->mailbox . "@" . $header->from[0]->host;
           echo "From E-Mail Address : ".$fromaddress.;

        }
} 
```

谢谢 ：）

# php - $var = $输入 || PHP中的“默认”

> ID：11045896
> 
> 赞同：0
> 
> 时间：2012-06-15T06:50:28.250
> 
> 标签：php

抱歉，如果标题不够清晰，但在 Javascript 中您可以这样做：

```
var input = null;
var fruit = input || 'default'; 
```

只是想知道 PHP 是否支持这种检查，目前我正在使用：

$fruit = !empty($input)?$input : 'default' ;

这很好，但当然 Javascript 方法更优雅。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:52:03.850

`||`在 PHP 中返回一个布尔值，所以这个运算符不能用于它。对`or`.

但是，如果您使用的是 PHP5.3+ ，则可以使用*二元运算符：* `?:`

```
$fruit = $input ?: 'default'; 
```

但是，它有一个很大的缺点，破坏了它在最有用的单一情况下的有用性（导入请求变量时）：

```
$fruit = $_REQUEST['fruit'] ?: 'strawberry'; 
```

如果不存在，这会丢`E_NOTICE`在你的脸上。`$_REQUEST['fruit']`因此，在这种情况下，您仍然需要带有或检查的*三元版本。*`isset``!empty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:53:14.190

在 PHP 中，`||`运算符返回一个布尔值，因此您总是会从中得到真或假。在 JS 中可能的原因是它会返回一个值。

所以，不，不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:53:24.610

PHP 不会，因为它返回一个布尔值，而不是像 JavaScript 或 Ruby 中的最后一个求值表达式。

您可以使用[ThiefMaster 提到](https://stackoverflow.com/a/11045917/31671)的三元或新的二进制形式。

# css - 在html中输入占位符标签

> ID：11045897
> 
> 赞同：1
> 
> 时间：2012-06-15T06:50:31.473
> 
> 标签：css, html, input

我已经为输入框提供了 100% 的宽度以固定到浏览器宽度，但是当我添加占位符时，输入框超出了浏览器宽度并且水平滚动条即将到来。我不希望出现滚动条。任何想法？？

这是我的输入标签

```
 <input type="tel" tabindex="9" maxlength="12" placeholder="XXX-XXX-XXXX" value="" name="mobileNumber" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:54:14.203

您可以为此使用`box-sizing:border-box`属性。像这样编写：

```
input{
    width:100%;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
    -webkit-box-sizing:border-box;
} 
```

检查这个[http://jsfiddle.net/9rprY/](http://jsfiddle.net/9rprY/)。

但它不适用于 IE7 及以下版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:10:19.847

让它变成 98% 而不是 100%。如果将宽度设置为 100%，则表示内容宽度，元素占用的总宽度为 100% 加上两倍边框宽度加上两倍内边距。98% 的值当然只是一个猜测，但通常足够好。

还有其他更好的方法。为了可用性，可见宽度应该反映预期正常输入的宽度，因此将`width`HTML 中的属性设置为合适的数字就足够了。（该值取决于您期望的号码类型；国际电话号码可能很长。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:20:46.093

使用 css3 属性 box-sizing 您可以重新定义宽度意味着包括外部填充和边框（不是边距）。

```
input{
    width: 100%;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
} 
```

不幸的是，因为它是 CSS3，所以并非所有 IE 都支持此属性（IE6 和 IE7 不支持）。你可以在这里阅读更多信息：[w3schools](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp?output=print)

# sql - 将 postgresql 扩展到索引 json 对象的最佳方法是什么？

> ID：11045906
> 
> 赞同：1
> 
> 时间：2012-06-15T06:51:30.823
> 
> 标签：sql, json, postgresql

postgres 9.2 支持`json`列。`postgres`扩展以基于列自动索引的最佳方法是什么`json`。

例如，

```
create table obj(
   obj_id    bigserial    primary key,
   col1      varchar(20),
   col2      date,
   obj       json
);
create index obj_col1 on obj( col1 );
create index obj_col2 on obj( col2 ); 
```

当记录被插入或更新时，`col1`并且`col2`从`obj`列中设置。

本质上，规则是除了主键和 json 列本身之外的任何属性都是从 json 对象自动设置的。

作为关联，重命名`col1`也会更新`json`属性，将`col1`那里重命名为新名称。

可以使用`catalogue`and`execute`语句来完成，但会像罪恶一样缓慢。

可以通过为每个表创建触发器来完成，但这既乏味又容易出错。

不能通过继承来实现，因为触发器不能被继承。

是`extension`最好的方法吗？它甚至会是什么样子？

* * *

最终无法写入`extension`执行此操作，因为 pg 不支持 CREATE TABLE 或 ALTER TABLE 上的触发器。

对 kludge 的唯一建议是为 DDL 记录日志，监视日志，然后运行一个过程。虽然可以做到这一点，但我们真正需要的是 CREATE 和 ALTER TABLE 上的触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:32:04.710

我不清楚你是如何从你的 json 导出“col1”的。大概这取决于你的json。

无论如何 - 最好的方法是编写一个脚本为您编写触发器，另一个为您编写列重命名操作。您提供任何必要的参数，它会输出 plpgsql 代码。

哦 - 你可能会发现[http://pgtap.org/](http://pgtap.org/)也很有用 - 你会想要测试这一切。

# wordpress - 致命错误：无法重新声明 wp_is_mobile()

> ID：11045908
> 
> 赞同：5
> 
> 时间：2012-06-15T06:51:36.940
> 
> 标签：wordpress, fatal-error

今天我将 wordpress 更新到最新版本时遇到了这个致命错误。我使用 Barely Corporate 主题。第 126 行是代码的最后一行。有人知道这是什么吗？该主题确实具有响应式设计。

[http://themeforest.net/item/barely-corporate-responsive-wordpress-theme/93069?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=ThemeBlvd](http://themeforest.net/item/barely-corporate-responsive-wordpress-theme/93069?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=ThemeBlvd)

致命错误：无法在 /home/chilinbk/public_html/kunde/tkh/wp-includes/vars 中重新声明 wp_is_mobile()（之前在 /home/chilinbk/public_html/kunde/tkh/wp-includes/vars.php:107 中声明） .php 在第 126 行

```
if ( isset($is_mobile) )
    return $is_mobile;

if ( empty($_SERVER['HTTP_USER_AGENT']) ) {
    $is_mobile = false;
} elseif ( strpos($_SERVER['HTTP_USER_AGENT'], 'Mobile') !== false // many mobile devices (all iPhone, iPad, etc.)
    || strpos($_SERVER['HTTP_USER_AGENT'], 'Android') !== false
    || strpos($_SERVER['HTTP_USER_AGENT'], 'Silk/') !== false
    || strpos($_SERVER['HTTP_USER_AGENT'], 'Kindle') !== false
    || strpos($_SERVER['HTTP_USER_AGENT'], 'BlackBerry') !== false
    || strpos($_SERVER['HTTP_USER_AGENT'], 'Opera Mini') !== false ) {
        $is_mobile = true;
} else {
    $is_mobile = false;
}

return $is_mobile; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:51:57.743

知道了！

在 wp-content\plugins\sitepress-multilingual-cms\sitepress.php 中，有以下几行

```
if ( function_exists('is_multisite') && is_multisite() ) {
    include_once( ABSPATH . WPINC . '/vars.php' );
} 
```

这几行包括文件/wp-includes/vars.php，其中声明了函数wp_is_mobile()。然后 WordPress 再次包含这个 vars.php 文件并产生逻辑错误。

在 WP 3.4 发布之前，没有明显的问题，因为 vars.php 中没有函数。但现在有了。

我认为 wpml 不需要包含此文件，因为它已经包含在 WordPress 中。

因此可以绕过：“wp-content\plugins\sitepress-multilingual-cms\sitepress.php”中的第 21-24 行注释

希望 WPML 可以在下一个插件版本中更恰当地修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:59:54.363

无法看到您的主题代码，我猜您`functions.php`包含这样的函数声明：

```
function wp_is_mobile() {
   // ... the code
} 
```

因此，您需要做的是包装该函数，如下所示：

```
if (function_exists('wp_is_mobile')) {
    function wp_is_mobile() {
       // ... the code
    }
} 
```

或者干脆撕掉主题中的副本并使用 3.4 中的版本。

我猜您的主题提供商会更新该主题，这种冲突很讨厌。这就是为什么主题开发者被鼓励在他们的功能前加上一些独特的东西。[前缀一切](http://digwp.com/2010/05/prefix-everything/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T17:47:58.313

一旦我在 WP 3.4 上安装了 WPML 插件 2.5.1，我遇到了同样的问题，所以我包装了这个函数并消除了那个错误，然后我又遇到了另一个错误。

致命错误：在第 1606 行的 /home/MY_USERNAME/public_html/wp-includes/theme.php 中调用未定义函数 wp_is_mobile()

我不知道下一步该怎么办？

--------找到了解决方法------

只要您没有在 WP 多站点安装中以超级管理员身份通过网络激活 WPML 插件，那么我就不会收到错误消息。独立激活它们。

如果网络激活可以工作，仍然会很好。WPML 说它是多站点兼容的：[http ://wpml.org/documentation/support/multisite-support/](http://wpml.org/documentation/support/multisite-support/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T16:40:02.900

它可能不是主题。在我的情况下是 WPML 插件，但即使修改核心 WP 文件并不理想，功能包装也能完成工作......

不过感谢上面的建议！

# python - 如何用 Python 优雅地写这个？

> ID：11045914
> 
> 赞同：1
> 
> 时间：2012-06-15T06:51:57.580
> 
> 标签：python, loops, iteration

我正在尝试用 Python 编写这个循环，但感到困惑。基本上我有一个起始角度 90，我想使用 -90 到 90 的范围，迭代 10 次。循环完成后，我想将角度除以一半并重复使用 -45 到 45、10 次迭代等的过程。

必须包含结束值，因此 90 是第一个循环的最后一个值，然后 45 是第二个循环的最后一个值，依此类推。

如何在 Python 中优雅高效地编写此代码？

```
startAngle = 90
for i in range(5):
    for x in range(10):
        print values from -startAngle to startAngle (startAngle included)
    startAngle = startAngle / 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T06:56:54.527

```
def angles(x):
    return [ i * x / 5 - x for i in xrange(11)] 
```

`angles(90)`返回`[-90, -72, -54, -36, -18, 0, 18, 36, 54, 72, 90]`

`angles(45)`返回`[-45, -36, -27, -18, -9, 0, 9, 18, 27, 36, 45]`

您现在可以遍历返回值，它是一个列表。

我的方法中有十个步骤`angles`返回十一个值。

如果您想要其他步骤：

```
def angles(angle, steps):
    return [ i * angle * 2 / (steps - 1) - angle for i in xrange(steps)] 
```

`angles(90, 5)`返回`[-90, -45, 0, 45, 90]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T07:09:40.733

你的麻烦似乎是翻译：

```
print values from -startAngle to startAngle (startAngle included) 
```

进入 Python。`range`可以轻松处理：

```
print(list(range(-startAngle, startAngle+1))) 
```

除了您似乎只想要十个值 - 这给出了`2*startAngle+1`值（`range(-a, a)`有 2a 值，并且还有一个）并且放入您的示例代码将打印出所有这些十次。

正确选择的`step`参数 to`range`可以保证它会给出`numvalues`元素 - 您希望将步长作为 un- `step`ed 范围内的值数除以您想要的值数，四舍五入因为需要`range`整数：

```
print(list(range(-startAngle, startAngle+1, math.ceil((2*startangle+1)/numvalues)) 
```

所以， numvalues=10 和 startAngle=45 给你：

```
list(range(-45, 46, math.ceil((2*45+1)/10)))
[-45, -35, -25, -15, -5, 5, 15, 25, 35, 45] 
```

请注意，我假设您使用的是 Python 3。在 Python 2 中，您可以执行以下操作：

```
from __future__ import division 
```

或设置`numvalues`为`10.`、do`range(...)`而不是`list(range(...))`和 do`int(ceil(...))`而不是达到`ceil(...)`相同的效果。

* * *

如果您需要处理浮点数，另一种方法也可以正常工作，它是使用[numpy.linspace](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html?highlight=linspace#numpy.linspace) - 它需要一个`num`参数而不是 a `step`，并且默认情况下包括它的端点 - 所以，

```
numpy.linspace(-startAngle, startAngle, num=10) 
```

会直接给你你想要的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T07:01:44.650

```
 def ang_rec(angel):
     for i in range(10):
         if i == 9: ang_rec(angel/2)
         print "do something another" 
```

# java - HttpServletRequest getParameter 无法使用 & 检索参数

> ID：11045916
> 
> 赞同：1
> 
> 时间：2012-06-15T06:51:59.637
> 
> 标签：java, jsp, servlets, struts, httprequest

我有一个网址，像这样`localhost:8080/foo.action?param1=7&param2=8&param3=6`

当这是 URL（原样）时，`request.getParmeter("param2")`给我`8`[正确]

i) 当编码将此 url 转换为`localhost:8080/foo.action?param1=7%26param2=8%26param3=6`

在这种情况下，`request.getParameter("param1")`给我`7&param2=8&param3=6`

ii) 当编码将此 url 转换为`localhost:8080/foo.action?param1=7&amp;param2=8&amp;param3=6`

在这种情况下，`request.getParameter("param1")`给我`7`并`request.getParameter("param2")`给我 null

检索参数的正确方法是什么？[假设使用两种Url编码方案中的一种是不可避免的]

（我正在使用 struts 动作）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:06:36.787

为防止这种情况，请勿使用分隔符对参数进行编码，仅对参数值进行编码。这将是最好的方法。如果您无法处理参数编码，请在解析之前在服务器端进行解码：

```
String queryString = request.getQueryString();
String decoded = URLDecoder.decode(queryString, "UTF-8");
String[] pares = decoded.split("&");
Map<String, String> parameters = new HashMap<String, String>();
for(String pare : pares) {
    String[] nameAndValue = pare.split("=");
    parameters.put(nameAndValue[0], nameAndValue[1]);
}

// Now you can get your parameter:
String valueOfParam2 = parameters.get("param2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:00:37.257

您可以调用`req.getQueryString()`以获取整个查询参数，然后根据您选择的任何编码方法进行服务器端解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:03:50.407

尝试使用

```
String[] Parameters = = URLDecoder.decode(Request.getQueryString(), 'UTF-8').splitat('&') ; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T19:12:44.940

我今天发生了这种情况。原来我正在通过电线传递编码的网址。提出请求时，应将其作为`http://localhost/foo?bar=1&bat=2`not as `http://localhost/foo?bar=1&amp;bat=2`。

在这种情况下，我从 xml 文件中剪切了 url 并将其粘贴到浏览器中。

# google-apps-script - 如何让单元格靠近修改后的单元格？

> ID：11045918
> 
> 赞同：0
> 
> 时间：2012-06-15T06:52:10.540
> 
> 标签：google-apps-script

我使用 onEdit 运行一个函数，但我可以知道如何将右侧的单元格寻址到已编辑的单元格...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:32:05.463

您是否尝试过[偏移方法](https://developers.google.com/apps-script/class_range?hl=fr-FR#offset)？

> 方法偏移量（rowOffset、columnOffset、optNumRows、optNumColumns）
> 
> 获取相对于给定范围的新范围。

例如：

```
SpreadsheetApp.getActiveRange().offset(0, 1) 
```

# c++ - 为什么 c++ 类需要在类范围之外定义静态字段（数据成员）？

> ID：11045919
> 
> 赞同：1
> 
> 时间：2012-06-15T06:52:15.657
> 
> 标签：c++, oop, initialization, static-initialization

> **可能重复：**
> [初始化私有静态成员](https://stackoverflow.com/questions/185844/initializing-private-static-members)
> [为什么我不能在类中初始化非常量静态成员或静态数组？](https://stackoverflow.com/questions/9656941/why-i-cant-initialize-non-const-static-member-or-static-array-in-class)

这对我来说很奇怪。为什么不假设在全局范围内有一个静态字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T06:56:03.637

它必须放在某个地方（在某个目标文件中），以便链接器可以找到它。如果您在 .h 文件中声明了带有静态文件的类，并将该文件包含在几个 .cpp 文件中，那么应该为该文件分配哪个目标文件的位置将是模棱两可的。

另请注意，原始类型`const static`字段可以在类声明中初始化：

```
class Foo
{
    static const int n = 42;
}; 
```

# java - 在jsoup中提取td标签内的href值

> ID：11045930
> 
> 赞同：6
> 
> 时间：2012-06-15T06:52:58.490
> 
> 标签：java, html-parsing, jsoup

我有

```
<table class="table" >
<tr>   
 <td><a href="url">text1</a></td>    
<td>text2</td> 

 </tr>
  <tr>
    <td><a href="url2">text</a></td> 
   <td>text</td> 

</tr> 
```

我想提取我使用的所有行的 url 和文本

```
Document doc = Jsoup.connect(url).get();
for (Element table : doc.select("table.table")) {
                for (Element row : table.select("tr")) {
                     Elements tds = row.select("td");
                           String text1=tds.get(0).text();
                           String url= row.attr("href");
                         System.out.println(text1+ "," + url);
                }
} 
```

我得到 text1 值，但 url 为空。

如何从 td 标签中获取 url？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T06:59:22.340

您的行变量不是`a`标签，因此它没有属性`href`。

试试这个：

```
Element table = doc.select("table.table");
Elements links = table.getElementsByTag("a");
for (Element link: links) {
    String url = link.attr("href");
    String text = link.text();
    System.out.println(text + ", " + url);
} 
```

这几乎是从[JSoup 文档中提取的](http://jsoup.org/cookbook/extracting-data/dom-navigation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T12:51:45.127

你（也许其他人）可以试试这个：

```
 Document doc = Jsoup.connect(url).get();
        for (Element table : doc.select("table.table")) {
            for (Element row : table.select("tr")) {
                for (Element tds : row.select("td")) {
                    Elements links = tds.select("a[href]");
                    for (Element link : links) {
                        System.out.println("link : " + link.attr("href"));
                        System.out.println("text : " + link.text());
                    }
                }
            }
        } 
```

# spring - Portlet:actionurl 不会在控制器中使用 @Actionmapping

> ID：11045933
> 
> 赞同：0
> 
> 时间：2012-06-15T06:53:15.993
> 
> 标签：spring, liferay, portlet, liferay-6

我正在使用 Liferay portal-6 和`Spring-3`.

在我的 portlet 中，首先它转到`@Rendermapping`不带参数并显示默认 jsp，当我单击一个按钮时，我正在传递`actionurl`，但它不会转到相应的`@Actionmapping`.

我的`searchForm.jsp`样子是这样的：

```
<portlet:actionURL var="showSearchResultsUrl">
    <portlet:param name="myaction" value="searchResults" />
</portlet:actionURL>

<form:form id="searchForm" name="searchForm" commandName="patientStoryForm"    method="POST" action="${showSearchResultsUrl}" enctype="multipart/form-data" >
    <input type="button" name="search_btn" value="Search"/></td>
</form:form> 
```

我的控制器是这样的：

```
@Controller(value = "searchPatientStoryController")
@RequestMapping(value = "VIEW")
@SessionAttributes(types = PatientStoryForm.class)
public class SearchPatientStoryController {

    @RenderMapping
    public String showSearchForm(RenderResponse response, Model model) {
        return "searchForm";
    }

    @RenderMapping(params = "myaction=searchResultsForm")
    public String showSearchResultsForm(RenderResponse response, Model model) {
        return "searchResultsForm";
    }

    @ActionMapping(params = "myaction=searchResults")
    public void searchResults(
        @ModelAttribute(value = "patientStoryForm") PatientStoryForm patientStoryForm,
        BindingResult bindingResult, ActionResponse response, ActionRequest request,
        SessionStatus sessionStatus, Model model) {

        response.setRenderParameter("myaction", "searchResultsForm");
    }
} 
```

当我点击按钮时，`searchForm.jsp`它应该去，`@Actionmapping`但它没有去。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:24:46.713

您需要**提交表单才能调用相关的操作方法**。

但是，在 jsp 代码中，我看到下面的代码表明它只是一个按钮。

```
<input type="button" name="search_btn" value="Search"/> 
```

为了提交表单，您可以执行以下任一方式：

1.  使用提交按钮而不是普通的表单按钮，如下所示：

    `<input type="submit" name="search_btn" value="Search"/>`

2.  在按钮的单击事件上调用 javascript 函数并提交表单：

```
<script type="text/javascript">
    function submitForm(form){
        var actionUrl = '<portlet:actionURL var="showSearchResultsUrl"><portlet:param name="myaction" value="searchResults"/></portlet:actionURL>';
        form.action = actionUrl;
        form.submit();
    }
</script> 
```

和

`<input type="button" name="search_btn" value="Search" onclick="javascript:submitForm(this.form)"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:22:10.847

您可以尝试替换您的 actionURL，如下所示

```
<portlet:actionURL name="searchResults" var="showSearchResultsUrl"> 
        <portlet:param name="myaction" value="searchResults" /> 
</portlet:actionURL> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:28:03.187

您需要设置表单的操作，如下所示：

```
<form:form action="<%=showSearchResultsUrl%>" id="searchForm" name="searchForm" commandName="patientStoryForm"    method="POST" action="${showSearchResultsUrl}" enctype="multipart/form-data" >
<input type="button" name="search_btn" value="Search"/></td> 
```

这样，您的操作名称将是“myaction”，其值为“searchResults”作为控制器端的映射。

# wpf - 检测混合环境中的内存泄漏（托管-非托管）

> ID：11045938
> 
> 赞同：1
> 
> 时间：2012-06-15T06:53:33.227
> 
> 标签：wpf, memory-leaks, unmanaged, managed

我有一个用 VC++ MFC 6.0 编写的应用程序。最近通过在 vs2008 中编译升级到 .NET 3.5，并通过使用托管和非托管环境向其中添加了一些 WPF 应用程序。基本上在win32窗口上托管WPF。如果我只是打开一个 WPF 应用程序窗口，内存会持续增加 1KB/10 秒。我试过使用 .NET 内存分析器和 Ants 内存分析器。但两者都没有帮助我检测泄漏！我已从托管的 WPF 应用程序中删除了所有 WPF 控件。它只包含一个只有一个框架的页面。但泄漏仍然发生！有人请帮我什么可能导致应用程序内存上升？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:55:41.740

首先，您应该确定是托管内存泄漏还是本机内存泄漏：

使用这些 PerfMon 计数器来执行此操作：

1.  处理/私有字节，
2.  .NET CLR 内存/# 所有堆中的字节数，
3.  .NET CLR LocksAndThreads/# 当前逻辑线程。

如果 1 增加，但 2 保持稳定，则说明存在本机内存泄漏。如果 1 AND 2 增加，则您有托管内存泄漏。

如果 3 意外增加，则线程堆栈正在泄漏。

如果您发现托管内存泄漏，.NET 内存分析器工具（如 Ants、YourKit 等）应该会有所帮助。由于它们对您的情况没有帮助，因此您可能存在本机泄漏。

重要提示：确保在查看内存消耗之前手动调用垃圾收集器。如果没有足够的内存压力，GC 将不会运行并且您的进程的内存会增加（在这种特殊情况下这不是泄漏。）像这样调用 GC：

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:12:55.567

本文介绍了 WPF 内存问题的一些常见原因 - 可能值得一读：

[http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/learning-memory-management/WPF-Silverlight-pitfalls](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/learning-memory-management/WPF-Silverlight-pitfalls)

关于您使用内存分析器查找泄漏的尝试，请使用 ANTS 尝试以下操作：

1）每隔一分钟或两分钟拍摄两个快照（分析器在每次拍摄快照之前自动运行垃圾收集）。

2) 确保基线快照设置为快照 1，最后一个快照设置为快照 2。

3) 进入班级列表。

4) 在“基本过滤器”下选择“从当前快照仅显示新对象”。

5) 突出显示最大的类，然后转到实例列表。

6) 对于其中一个实例，打开实例保留图，该图显示了将该实例保存在内存中的引用链。

7) 运气好的话，你会看到一个物体抓住了它不应该抓住的东西，然后你可以修复它。如果不是，请重复步骤 5 和 6，但选择不同的类/实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:04:08.007

好吧，经过一番反省，发现泄漏实际上是由于框架中的错误造成的。阅读更多信息 [http://social.msdn.microsoft.com/Forums/zh/wpf/thread/5b9ae245-9067-4ca4-b846-180db9f7bde5](http://social.msdn.microsoft.com/Forums/zh/wpf/thread/5b9ae245-9067-4ca4-b846-180db9f7bde5)

# sql-server-2008 - 如何在数据库中找到最大的程序？

> ID：11045940
> 
> 赞同：0
> 
> 时间：2012-06-15T06:53:38.157
> 
> 标签：sql-server-2008, sql-server-2005, sql-server-2008-r2

您好我使用的是 SQL Server 2008 R2，我在数据库中有很多程序。在那些我想找到行数最大的程序中？是否有可能找到将计数作为其中行数的过程。请有人可以帮我得到这个。

谢谢！在高级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:06:27.293

使用此[子字符串计数](https://stackoverflow.com/questions/738282/how-do-you-count-the-number-of-occurrences-of-a-certain-substring-in-a-sql-varch)解决方案来计算换行符 (nchar(10))：

```
select o.type, o.name, 
    len(m.definition) - len(replace(m.definition, nchar(10), '')) as rows,
    m.* 
from sys.sql_modules m
inner join sys.objects o on m.object_id = o.object_id
--order by type, name
order by 3 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:57:46.303

不确定我是否理解你的问题。您是否正在寻找类似的东西：

```
select 
    routine_name, 
    DATALENGTH(ROUTINE_DEFINITION) 
from INFORMATION_SCHEMA.ROUTINES 
order by 2 desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T07:06:17.223

就字符数而不是行数而言，您可以试试这个：

```
select p.name, len(m.definition)
from sys.procedures p
join sys.sql_modules m on m.object_id=p.object_id
order by len(m.definition) desc 
```

# iphone - 如何将主题从外部文件加载到 iPhone 中的应用程序（objective-c）？

> ID：11045941
> 
> 赞同：-1
> 
> 时间：2012-06-15T06:53:45.287
> 
> 标签：iphone, objective-c, themes, dynamic-library

我对objective-c和主题有一些疑问。我知道有很多关于主题的话题，但我没有找到我的问题的答案。

所以我会（它正在建设中:)）有一个 iPhone 应用程序，我希望有可能制作皮肤并在 AppStore 中分享它。问题是如何将新图像“加入”我的应用程序（来自下载的文件）。我不想以本机格式（例如 .jpg）将其保存在“磁盘”上。我考虑过动态库 - 但是只用图像制作库是个好主意吗？以及如何将库与应用程序动态链接？

请注意，我对如何在应用程序中切换主题并不感兴趣（我知道如何做到这一点），而只是如何从其他外部文件链接新的主题图像。

谢谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:26:23.447

使用主题做某事的最好方法是编写一个为您“绘制”图像的库！下载一个包含所有颜色代码的 xml 文件，让库填充图像、颜色、文本设置并绘制渐变。这是在手机上使用主题的最动态有效的方式。

如果您不想将图像本地存储在手机上，为什么不在启动时异步下载它们呢？这似乎不是一个好主意，但它是一个选择。我更喜欢在手机上本地保存图像。因此，当我下载新主题时，也会下载图像并删除旧主题。

# php - 获取所需的 json 格式

> ID：11045942
> 
> 赞同：1
> 
> 时间：2012-06-15T06:53:46.693
> 
> 标签：php, kohana-3, json

嗨朋友们，我正在像这样从服务器（使用 kohana 框架 3.0）获取 json....

```
 {
        "aaData": [
            {
                "regNo": "1",
                "regDate": "2025-05-12",
                "patientName": "Ratna",
                "address": "saasgasgasga",
                "city": "Hyderabad",
                "phno": "2147483647",
                "mrgStatus": "single",
                "religion": "1",
                "gender": "male",
                "fathername": "Yohan",
                "status": "2",
                "age": "25"
            }
        ]
    } 
```

但我想要以下格式

```
{
        "aaData": [
            [
               "1",
               "2025-05-12",
               "Ratna",
               "saasgasgasga",
               "Hyderabad",
                "2147483647",
                "single",
                "1",
                "male",
                "Yohan",
                "2",
                "25"
            ]
        ]
    } 
```

kohana 控制器是

```
public function action_index()
    {
         $table = new Model_patientdetails();
         $log =$table ->get_all();
         $output = array("aaData" => $log);
         $this->auto_render=false;
         echo json_encode($output);
    } 
```

请建议我如何获得所需的 json 格式

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:55:22.537

使用**array_values()**仅获取值

```
public function action_index()
{
     $table = new Model_patientdetails();
     $log =$tab ->get_all();
     foreach($log as &$l)
     {
        $l = array_values($l)
     }
     $output = array("aaData" => $log);
     $this->auto_render=false;
     echo json_encode($output);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:56:39.663

我没有`$log1`在你的代码中找到变量，所以我认为它是`$log`.

你可以这样做：

```
public function action_index()
    {
         $table = new Model_patientdetails();
         $log = $tab->get_all();
         $output = array("aaData" => array_values($log));
         $this->auto_render=false;
         echo json_encode($output);
    } 
```

# spring-ws - Spring ws XSD 验证

> ID：11045949
> 
> 赞同：0
> 
> 时间：2012-06-15T06:54:05.123
> 
> 标签：spring-ws

目前我正在使用 Spring-ws 实现 Web 服务。在这里，我对 xsd 验证感到震惊。对于 xsd 验证，我使用以下配置

```
 <bean id="validatingInterceptor" class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
        <property name="xsdSchema" ref="schema" />
        <property name="validateRequest" value="true" />
        <property name="validateResponse" value="true" />
      </bean>

<bean id="schema" class="org.springframework.xml.xsd.SimpleXsdSchema">
    <property name="xsd" value="/WEB-INF/ProductSchema.xsd" />
  </bean> 
```

在这里，我在 bean 初始化期间传递 xsd 文件。有什么方法可以让我动态发送这个（ProductSchema.xsd）xsd 文件。因为我会根据输入的有效负载知道需要发送哪个 xsd 文件。

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:09:44.847

我不知道您有多少 XSD，但也许您可以在 ProductSchema.xsd 中定义导入以包含其他 XSD。至少我是这样设置的。

例如：

```
<import namespace="http://namespace" schemaLocation="data.xsd" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:23:38.497

我不太确定您要做什么。

但是您可以通过使用与有效负载中的元素名称匹配的 localPart 注释处理程序方法来创建与不同有效负载匹配的不同端点/方法：

```
@Endpoint
public class MyEndpoint {

    @PayloadRoot(namespace = NAMESPACE_URI, localPart = "NameOfMyXmlRequestElement")     
    @ResponsePayload
    public MyResponse handleMyRequest(@RequestPayload MyRequest MyRequest) throws Exception {
    ... 
```

然后可以使用特定模式对接收到的请求进行解组/验证：

```
<bean id="myJaxb2Marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>mydomain.model.oxm.MyRequest</value>
            <value>mydomain.model.oxm.MyResponse</value>
        </list>
    </property>
    <property name="schema" ref="MyServiceSchema" />
</bean>

<bean id="MyServiceSchema" class="org.springframework.core.io.ClassPathResource">
    <constructor-arg value="WEB-INF/schemas/MyService.xsd" />
</bean> 
```

必须注释 MyRequest 类才能与 Jaxb2marshaller、@XmlRootElement(name="MyRequest") 等一起使用...

# php - 连接查询的MYSQL问题

> ID：11045951
> 
> 赞同：0
> 
> 时间：2012-06-15T06:54:08.420
> 
> 标签：php, mysql, sql, join, left-join

# tbl_group

( `group_id`, `user_id`, `group_name`, `group_image`, `group_description`, `doi`)

```
(9, 28, 'bbb', '1339660354imagesv.jpg', 'dfdsfsdf', '2012-06-14 13:22:34'),
(11, 1, 'cccc', '', '', '2012-06-14 14:49:56'),
(22, 1, '000', '', '', '2012-06-14 15:31:43'); 
```

# tbl_groupnews

`news_id`, `user_id`, `group_id`, `group_news`,`doi`

```
(1, 1, 22, 'hi \n', '2012-06-14 16:20:36'),
(2, 1, 22, 'hello', '2012-06-14 16:21:59'),
(3, 1, 22, '1111', '2012-06-14 16:25:13'),
(4, 1, 22, 'jj', '2012-06-14 16:34:41'),
(5, 28, 9, 'hi', '2012-06-15 09:48:47'); 
```

# `tbl_groupmembers`

`groupmember_id`, `group_id`, `adder`, `member`,`doi`

```
(1, 9, 28, 1, '2012-06-14 13:22:35'),
(2, 9, 28, 66, '2012-06-14 13:22:35'),
(4, 11, 1, 2, '2012-06-14 14:49:56'),
(5, 11, 1, 28, '2012-06-14 14:49:56'),
(6, 11, 1, 62, '2012-06-14 14:49:56'),
(36, 22, 1, 28, '2012-06-14 16:15:41'),
(37, 22, 1, 62, '2012-06-14 16:16:55'),
(38, 22, 1, 66, '2012-06-14 16:18:35'),
(39, 22, 1, 70, '2012-06-14 16:19:33'); 
```

我运行查询

```
 SELECT tbl_groups.*,
         COUNT (tbl_groupnews.news_id) AS cn1,
         COUNT (tbl_groupmembers.group_id) AS cn2
    FROM tbl_groups
    LEFT JOIN tbl_groupnews ON tbl_groups.group_id = tbl_groupnews.group_id
    LEFT JOIN tbl_groupmembers ON tbl_groupmembers.group_id = tbl_groups.group_id
   WHERE (tbl_groups.user_id = 28 OR tbl_groupmembers.member = 28)
GROUP BY tbl_groups.group_id 
```

我的要求是我需要从 group、count of news 和 count of members 中获取所有值`WHERE user_id = 28 or member id = 28`。

谁能帮我找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:59:59.113

试试这样：

```
SELECT tbl_groups.*,          
COUNT (tbl_groupnews.news_id) AS cn1,          
COUNT (tbl_groupmembers.group_id) AS cn2     
FROM tbl_groups     
LEFT JOIN tbl_groupnews ON tbl_groups.group_id = tbl_groupnews.group_id 
AND tbl_groups.user_id = 28    
LEFT JOIN tbl_groupmembers ON tbl_groupmembers.group_id = tbl_groups.group_id  
AND tbl_groupmembers.MEMBER = 28  
GROUP BY tbl_groups.group_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:07:51.780

如果您从 tbl_groups 中选择所有列，它们需要在您的 group by 语句中

```
SELECT tbl_groups.*,COUNT(distinct tbl_groupnews.news_id) as cn1,
        COUNT(distinct tbl_groupmembers.group_id) as cn2
    FROM tbl_groups
    LEFT JOIN tbl_groupnews ON tbl_groups.group_id=tbl_groupnews.group_id
    LEFT JOIN tbl_groupmembers ON tbl_groupmembers.group_id=tbl_groups.group_id
    WHERE (tbl_groups.user_id  = 28 or tbl_groupmembers.member=28)
    GROUP BY tbl_groups.group_id,tbl_groups.user_id, tbl_groups.group_name, tbl_groups.group_image, tbl_groups.group_description, tbl_groups.doi 
```

# opengl - 点对点 Cuda 内核 - OpenGL 互操作

> ID：11045954
> 
> 赞同：0
> 
> 时间：2012-06-15T06:54:55.213
> 
> 标签：opengl, interop, cuda, p2p

我有 2 台设备（geforce 680s）启用了对等访问并在它们之间进行了验证。但是，我无法从“设备 1”编辑“设备 0”上的缓冲区。这是我的代码：

```
// map 2 pixel buffer objects to primary device
uchar4* dev0_buffer0=NULL;
uchar4* dev0_buffer1=NULL;
cudaSetDevice(0);
cudaGLMapBufferObject((void**)&dev0_buffer0, m_pbo0);
cudaGLMapBufferObject((void**)&dev0_buffer1, m_pbo1);
kernel<<< nBlocks, nThreads>>>(dev0_buffer0, width, height);

// write to a pbo on device 0 using device 1
cudaSetDevice(1);
kernel<<< nBlocks, nThreads>>>(dev0_buffer1, width, height); 
```

设备 0 可以写入映射到它的两个缓冲区，但如果我尝试使用设备 1 写入其中一个缓冲区（如上面的代码中所示），则没有任何反应。没有错误或崩溃，它只是不会影响缓冲区（我正在渲染到屏幕上检查）

这不可能吗？

# css - 可折叠面板 css 位置/浏览器兼容性

> ID：11045955
> 
> 赞同：0
> 
> 时间：2012-06-15T06:54:59.160
> 
> 标签：css, cross-browser, collapsable

我的代码中有浏览器位置问题。它在 firefox 上显示良好。但在面板 div.pls 下的资源管理器内容 div 显示上，请帮助我修复此错误。

这是CSS代码

```
<style>
#colleft   { width:175px;float:left; overflow:hidden; background:#333;}
#showPanel { position:inherit; z-index:2; left:0; float:left; padding-top:40px; display:none; width:0px; height:100px; cursor:pointer;}
#showPanel span{display:block; font-size:24px; height:30px; margin-top:20px; padding:10px 0 10px 10px; width:20px; background: #333;}
#colright {color:#1c1c1c; margin-left:175px}
</style> 
```

这是我的jQuery代码

```
<script type="text/javascript">
jQuery(document).ready(function(){
 $("#hidePanel").click(function(){
 $("#panel").animate({marginLeft:"-175px"}, 0 );
 $("#colleft").animate({width:"0px", opacity:0}, 0 );
 $("#showPanel").show("normal").animate({width:"0px", opacity:1}, 0);
 $("#colright").animate({marginLeft:"0px"}, 0);
 });
 $("#showPanel").click(function(){
 $("#colright").animate({marginLeft:"0px"}, 0);
 $("#panel").animate({marginLeft:"0px"}, 0 );
 $("#colleft").animate({width:"175px", opacity:1}, 400 );
 $("#showPanel").animate({width:"0px", opacity:0}, 600).hide("slow");
 });
});
</script> 
```

html代码

```
 <table width="1024" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#999999">
      <tr>
        <td><h1>HEADER GOES HERE</h1></td>
      </tr>
      <tr>
        <td><div id="colleft">
      <div id="panel">
      <h1>My Panel</h1>
      <ul>
        <li>item #1</li>
        <li>item #2</li>
        <li>item #3</li>
        <li>item #4</li>
      </ul>
      <div id="hidePanel"><a href="#">&laquo; Hide Panel</a></div>
      </div>
      </div>
      <div id="showPanel"><span>&raquo;</span></div>  <div id="colright">
        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#0066CC">
          <tr>
            <td>content div</td></tr>
        </table></div></td>
      </tr>
      <tr>
        <td><h4>Footer goes here</</td>
      </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:11:49.423

你能详细说明它没有按照你想要的方式工作吗？javascript中的边距并不是真正相互一致的，如果你把它改成这样：

```
<script type="text/javascript">
            jQuery(document).ready(function(){  
                $("#hidePanel").click(function(){  
                    $("#panel").animate({marginLeft:"-175px"}, 500 );  
                    $("#colleft").animate({width:"0px", opacity:0}, 400 );  
                    $("#showPanel").show("normal").animate({width:"28px", opacity:1}, 200);  
                    $("#colright").animate({marginLeft:"50px"}, 500);  });  
                    $("#showPanel").click(function(){  
                    $("#colright").animate({marginLeft:"200px"}, 200);  
                    $("#panel").animate({marginLeft:"0px"}, 400 );  
                    $("#colleft").animate({width:"175px", opacity:1}, 400 );  
                    $("#showPanel").animate({width:"0px", opacity:0}, 600).hide("slow");  
                }); 
            }); 
    </script> 
```

侧面有一个小按钮，如果单击它，面板中的内容会从左侧移入，将面板中的内容向右推。

在不相关的注释中，我还注意到您使用表格来分隔页眉、内容和页脚。它不会帮助你解决这个问题，但它被认为是不好的做法。最好用 CSS 将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:04:42.223

hidePanel DIV 在面板 DIV 内，但 showPanel DIV 在面板 DIV 外。你确定这是正确的吗？

# linux - Openssl 使用公钥解密

> ID：11045956
> 
> 赞同：1
> 
> 时间：2012-06-15T06:55:01.053
> 
> 标签：linux, openssl

我需要解密使用私钥加密的文件。我有一个公钥，可以用来解密这个文件。我怎样才能做到这一点。我做了：

```
openssl rsautl -in file -inkey key.pem 
```

但这不起作用。这将错误显示为：

```
unable to load Private Key
3074128072:error:0906D06C:PEM routines:PEM_read_bio:no start line:pem_lib.c:696:Expecting: ANY PRIVATE KEY 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:03:28.207

公钥不能用于解密，只能用于加密和验证加密签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T01:35:22.557

与所有人相反，您实际上可以使用公钥解密，*但前提*是您的数据使用适当的私钥加密。

至于如何解密它，据我所知，openssl 实用程序不具备此功能。看来您必须使用利用 OpenSSL C API（[https://www.openssl.org/docs/man1.0.2/crypto/RSA_public_decrypt.html](https://www.openssl.org/docs/man1.0.2/crypto/RSA_public_decrypt.html)）的东西。

要么直接使用 C API，要么使用 PHP 与 OpenSSL 的绑定之类的东西。

# playframework - Ajax 表单 - 获取信息

> ID：11045958
> 
> 赞同：0
> 
> 时间：2012-06-15T06:55:19.097
> 
> 标签：playframework, playframework-2.0

我是 play 框架的新手，我有一个关于实现 ajax 的问题。所以我实现了一个搜索页面——上面有一个发送日期范围的表单。这一切都在起作用。但我想让它与 ajax 一起工作，所以我有几个问题。我需要在控制器中创建一个新的表单类型吗？就像我以前做过的那样？或者我可以手动获取数据吗？

所以目前在我的html中，我有以下形式：

```
<form action="@routes.History.search()" class="pull-right" id="formHistory">
            MinDate: <input id="mindate" name="mindate" class="input-small" type="text">
            MaxDate: <input id="maxdate" name="maxdate" class="input-small" type="text">
            <button class="btn" type="submit">Search</button>
        </form> 
```

这是我的javascript：

```
$('#formHistory').submit( function(evt) {
            $('#errors').show();
            $.ajax({
                type: 'POST',
                url:  jQuery("#formHistory").attr("action"),
                data: jQuery("#formHistory").serialize(),
                dataType: "json",
                success: function(data) {
                    alert('History Search');
                    $("tableHistory").find("tr:gt(0)").remove();
                    alert(data.id[0].source);
                },
                error: function(data) {
                    $('#errors').shows();
                    alert('History search failed');
                }
            });
            return false;
        }); 
```

在我的 history.java 文件中，我需要获取 json 信息。以前我已经通过使用

```
Form<Login> loginForm = form(Login.class).bindFromRequest(); 
```

但是我没有最小和最大日期的对象，我可以手动获取 json 信息吗？

```
public static Result search() {
//So here I would like to get the form information 
} 
```

下一个问题是如何反向执行此操作？一旦我得到最小和最大日期，从数据库中获取信息，我需要发回响应。我应该发回带有数据列表的 json 响应以及如何在 javascript 中处理它？还是我在服务器上创建 html 并将其作为字符串发送并将其附加到适当的元素中？或者我在一些演示中看到的另一个选项是创建一个视图并将其传回并只渲染较小的视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:53:01.590

您应该能够从表单中获取数据，就像在将其作为 ajax 发送之前一样。如果你不能让它工作，你可以手动获取数据

```
Map<String, String[]> params = request().body().asFormUrlEncoded(); 
```

至于您如何将数据发送回客户端，您的两个建议都是有效的。最简单的方法是只渲染一个没有 <html> 和 <body> 标签的视图，然后使用 jQuery 将结果放入一个元素中。

```
success: function(data) {
    $('#myContentDiv').html(data);
} 
```

json 方法可能会提供更好的性能，但实现起来要复杂得多。许多人会争辩说 html 方法是一种不好的方法，因为它在服务器上使用了很多资源。这个论点可能适用于 PHP、Ruby on Rails 甚至 Play 1.x，但在 play 2 中，视图已完全编译，并且渲染过程非常快。

如果您选择使用 json 方法，我建议您使用类似[knockout.js](http://knockoutjs.com/)的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:18:53.403

我最终离开了它，没有使用 ajax。但如果我要使用它，我会使用 ajax 请求：

```
jsRoutes.controllers.Application.ajaxCommand().ajax({
    data : {
        "var1" : "a",
        "var2" : "b"
    },
    success : function(data) {
        // .. DO something
    },
    error : function(data) {
        // .. DO something
    }
}); 
```

并在服务器端使用 DynamicForm ：类似于：

```
public static Result ajaxCommand() {
    DynamicForm data = form().bindFromRequest();
    String var1 = data.get("var1");
    String var2 = data.get("var2");
    // .. Do something
} 
```

# c# - 如何在 Windows 服务的主 dll 上加载一些 dll？

> ID：11045962
> 
> 赞同：0
> 
> 时间：2012-06-15T06:55:25.213
> 
> 标签：c#, .net, visual-studio-2010, windows-services

我对使用主 DLL 的 Windows 服务有一个奇怪的问题，名称为： Process.dll 。Windows 服务调用 onstart()：

```
Process client = new Process();

client.Method(); 
```

在此方法 Process.dll 中使用另一个 dll。但是 Windows 服务没有找到 a、b、c dll。不开机！简单的服务工作正常，但在架构下无法正常工作，而不是 atart Windows 服务。你能帮我如何加载另一个 dlls.Or 任何解决方案吗？如何根据以下架构编写代码？（a,b,c dll 是静态引用。）

![在此处输入图像描述](../Images/f7eb87cf879ff68073928de5b82c767d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:46:11.520

我发现当尝试从 Windows 服务动态加载文件（无论是配置文件还是 DLL）时，您需要指定要加载的文件的位置，即使它与服务的 EXE 位于同一目录中。

这是我用来动态获取 Windows 服务目录位置的片段，然后您可以从中使用来自***aliboy38***的代码片段来加载您的 DLL。

```
var exePath = Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName);

Assembly a = Assembly.LodFrom(Path.Combine(exePath, "YourDLL.dll"));

Type t = a.GetType("YourType");

object obj = Activator.CreateInstance(t); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:21:18.220

尝试这个 ：

```
 Assembly a = Assembly.LoadFrom("YourDLL.dll");

    Type t = a.GetType("YourType");

    object obj = Activator.CreateInstance(t); 
```

# date - Primefaces 日历允许无效日期

> ID：11045965
> 
> 赞同：4
> 
> 时间：2012-06-15T06:55:37.620
> 
> 标签：date, calendar, primefaces

我正在使用 primefaces 日历，但我可以输入无效日期。例如，在日期字段的输入框中输入日期为 32-06-2012 并保存记录。它正在保存日期，就像将日期保存为 02-07-2012 一样。在primefaces的展示中也可以观察到相同的行为。

参考： http: [//www.primefaces.org/showcase/ui/calendarBasic.jsf](http://www.primefaces.org/showcase/ui/calendarBasic.jsf)

这是我的代码

```
<p:calendar id="copyStartDateCalendar" pattern="dd/MM/yyyy"

         mode="popup" showOn="button" size='8' >

                <f:convertDateTime pattern="MM/yyyy" />

</p:calendar> 
```

应该怎么做，因为组件本身似乎有一些错误。

感谢和问候

塔伦·马丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:45:47.340

尝试`readonly="true"`在这种情况下使用，您不需要使用任何服务器端验证器。此选项将只允许最终用户从日历面板中获取日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:47:21.123

I had similar problems with the primefaces calendar.

For one it accepts dates with two digits though a pattern of `pattern="dd.MM.yyyy"` is set. Like `20.06.12` will be shown in the calendar popup as `20.06.2012` misleading the user to think the date was correctly recognized. But the year 12 is actually set.

Anyways, I ended up setting a `<f:validator>` inside the `<p:calendar>` like this:

```
<p:calendar value="#{abschnittDView.bogen.pruefungsDatum}
    mode="popup" locale="de" pattern="dd.MM.yyyy" required="true"
    requiredMessage="Please provide a date."
    converterMessage="Date is invalid.">

    <f:convertDateTime type="date" pattern="dd.MM.yyyy" 
        timeZone="Europe/Berlin" locale="de" />

    <f:validator validatorId="de.common.DateValidator" />

</p:calendar> 
```

Then doing some validation on the given date:

```
@FacesValidator(DateValidator.VALIDATOR_ID)
public class DateValidator implements Validator {

    public static final String VALIDATOR_ID = "de.common.DateValidator";

    @Override
    public void validate(FacesContext facesContext, UIComponent component, 
        Object value) throws ValidatorException {

        Date inputDate = (Date) value;
        Calendar cal = Calendar.getInstance();
        cal.setTime(inputDate);
        if (cal.get(Calendar.YEAR) < 1000) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Please provide a date with 4 digits for the year", null));
        }
    } 
```

I know this prevents dates below 1000 but in my case it is absolutely clear that the date can not be lower then 2000.

So the suggestion is: Use a `Validator` to make sure the dates are correct. I know it is not the perfect solution but maybe a possible workaround.

Otherwise, try to ask for this on the primefaces forum.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T12:48:53.677

你的模式和 f:convertDateTime 有不同的模式吗？

它可能无法弄清楚您在转换器中想要什么，因为输入数据为 dd/mm/yyyy - 然后您的转换器尝试将其转换为 MM/yyyy。

您描述的问题是因为侧 primfaces 中的简单日期格式化程序中的 leniency 设置为 true （它是默认操作）。强制是你然后使用你的 convertDatetime 应该修复它，但你的模式可能与它似乎不匹配。

但是，如果使用 PF < 4 的版本，您将遇到 java 脚本问题，因为 p:calendar 转换器在验证后返回空对象时存在错误 - 您可以在重建 PF 代码后对此进行一些手动修复。

# indexing - 使用 JAVA API 在 ElasticSearch 中建立索引期间设置分析器

> ID：11045971
> 
> 赞同：0
> 
> 时间：2012-06-15T06:56:11.157
> 
> 标签：indexing, elasticsearch

[http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-analyzer.html](http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-analyzer.html)

在使用自定义**停用词进行****索引**期间，我必须使用**标准**分析器。

 ****如何定义映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:16:32.603

以下命令将使用自定义停用词集设置标准分析器作为索引的默认分析器`testidx`：

```
curl -XPUT http://localhost:9200/testidx/ -d '{
  "settings":{ 
    "analysis":{
      "analyzer":{
        "default":{
          "type":"standard",
          "stopwords":["foo", "bar", "baz"]
        }
      }
    }
  }
}' 
```

**或者，如果**您只想将自定义停用词用于索引：

```
curl -XPUT http://localhost:9200/testidx/ -d '{
  "settings":{ 
    "analysis":{
      "analyzer":{
        "default_index":{
          "type":"standard",
          "stopwords":["foo", "bar", "baz"]
        }
      }
    }
  }
}' 
```****

# post - 对代理服务 WSO2 的 POST 请求

> ID：11045990
> 
> 赞同：2
> 
> 时间：2012-06-15T06:57:56.917
> 
> 标签：post, wso2, synapse, wso2esb

我正在向代理服务发送一个发布请求，但它给出了错误......我该如何解决这个问题

```
[2012-06-15 12:24:27,656]  INFO - BuilderUtil OMException in getSOAPBuilder
org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:204)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:154)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:140)
    at org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:688)
    at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:197)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:167)
    at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosingMethod(ServerWorker.java:409)
    at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:261)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:173)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:686)
    at com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader.java:2134)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2040)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:681)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)
    ... 13 more
[2012-06-15 12:24:27,675]  INFO - BuilderUtil Remaining input stream :[]
[2012-06-15 12:24:27,675] ERROR - ServerWorker Error processing POST request 
org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:180)
    at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosingMethod(ServerWorker.java:409)
    at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:261)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:173)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:204)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:154)
    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:140)
    at org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:688)
    at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:197)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:167)
    ... 6 more
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
 at [row,col {unknown-source}]: [1,0]
    at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:686)
    at com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader.java:2134)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2040)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:681)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)
    ... 13 more 
```

我的代理形象是：

```
<proxy name="stripe" transports="https http" startOnLoad="true" trace="disable">
        <target>
            <endpoint>
                <address uri="https://api.stripe.com/v1"/>
            </endpoint>
            <inSequence>
                <log level="full" separator="SSSSSSSSSSSSSSSSSs">
                    <property name="HTTP_METHOD" value="post"/>
                </log>
                <send/>
            </inSequence>
            <outSequence>
                <log level="full" separator=", ooooooooooo"/>
                <send/>
            </outSequence>
        </target>
    </proxy> 
```

curl命令执行请求：

```
curl https://localhost:8243/services/stripe/charges/ch_iQs4noWTm7J5Kk/refund  -u Ixj3FHIiQSFWrzb4VNSxoThKVk3IXpBF --insecure -X POST 
```

我没有得到 dis 错误的确切原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:52:40.140

POST 请求的内容类型是什么。当您没有使用的内容类型的消息格式器和构建器时，会发生此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-02T06:38:27.493

我在这个错误上花了 7 天时间。这个错误有很多不同的答案。

当您的 Web 服务返回到 wso 代理空正文或不正确的内容长度或其他东西（有很多事情）时，就会发生这种情况。

但在我的情况下，问题是如果内容长度等于 0，我的路由“/”（POST 方法）上的 web 服务返回 400 代码。我认为 wso2 代理首先会向我的 web 服务发送一些内容长度为零的数据或没有这个标头和我的网络服务只是“阻止”它并返回 400 代码。

# ruby-on-rails - RVM / 降级捆绑器 gem

> ID：11045991
> 
> 赞同：5
> 
> 时间：2012-06-15T06:58:09.223
> 
> 标签：ruby-on-rails, ruby, rvm, bundler

我有以下有趣的场景：

我已经通过 RVM 安装了 ruby​​ 1.9.2，它与 bundler 1.1.4 一起预打包。

我的应用程序需要捆绑程序 1.0.15。

我试过运行以下命令：

```
gem uninstall bundler 
```

我得到以下信息：

```
INFO:  gem "bundler" is not installed 
```

任何想法如何降级我的捆绑器？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T07:27:02.800

找到了解决方案。

显然 rvm 将它的 gem 安装在所有 gemspec 可见的全局 gemspec 中。

所以通过这样做：

```
rvm use 1.9.2@global 
```

然后是：

```
gem uninstall bundler 
```

行得通。

这也可以缩短为：

```
rvm @global do gem uninstall bundler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:21:19.393

尝试将以下内容添加到 .bash_profile

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

或者尝试将捆绑包链接到 RVM bin dir

```
ln -s ~/.rvm/gems/ruby-1.9.2-p290@fonista/bin/bundle ~/.rvm/bin/ 
```

# java - 如何在上下文初始化方法中访问 ApplicationResource 属性？

> ID：11045992
> 
> 赞同：0
> 
> 时间：2012-06-15T06:58:17.447
> 
> 标签：java, properties, struts2, httpcontext

我正在使用每 15 分钟运行一次的石英调度程序。因此，我在 ApplicationResource.properties 文件中定义的参数 15(interval) 我将侦听器类定义为

```
public class QuartzSchedulerListener extends ActionSupport implements ServletContextListener 
```

所以在`public void contextInitialized(ServletContextEvent context)` 这个方法中，我试图使用 ActionSupports -- getText() 方法获取参数值

```
getText("INTERVAL_TIME"); 
```

但我收到错误

有人可以告诉我代码或任何其他访问ApplicationResources文件属性的替代方法是什么吗

提前致谢

# c#-4.0 - Solr 搜索查询返回全头异常

> ID：11045995
> 
> 赞同：4
> 
> 时间：2012-06-15T06:58:36.577
> 
> 标签：c#-4.0, solr, jetty, solrnet

我正在调用 ac# 应用程序中托管在其他机器上的远程 solr 搜索。现在，由于我的查询长度变得太大，所以搜索引擎返回全头错误。我无法减少查询长度。所以我只是想知道我可以发出相同的帖子请求吗？我怎么做这个？请建议我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:57:16.770

看起来您遇到了码头的默认 GET 参数大小限制。这可以通过更改 jetty.xml 中的 headerBufferSize 来调整。

请参阅此链接配置码头 - [http://docs.codehaus.org/display/JETTY/Configuring+Connectors](http://docs.codehaus.org/display/JETTY/Configuring+Connectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:11:00.930

您可能还需要增加 requestBufferSize（整个请求的缓冲区大小，包括标头）。默认值为 8k。

# javascript - 如何从编写在另一个视图上的 JS 代码重定向到控制器并传递 JSON 对象

> ID：11045997
> 
> 赞同：1
> 
> 时间：2012-06-15T06:58:41.813
> 
> 标签：javascript, asp.net-mvc-3, extjs, razor

我正在使用 ASP.NET MVC 3，我是新手。我在一个视图上有一个 EXTJS 网格，在进行选择后，用户被重定向到另一个填充所选值的网格。这个网格被放置在另一个页面上。在父网格上，我使用了这个：

```
$(function () {
    $("#btnRedirect").click(function () {
        GetSelectedRecord(); //Gets the selected record on the jsonlst variable

        var link = '@Url.Action("GetData","ChildGrid",new {jsonData="-1"})';

        link = link.replace("-1", jsonlst);
        window.location.href = link;
    });
}); 
```

其中 jsonlst 是包含从网格中选择的记录的 json 对象。

GetData 操作简单地具有：-

```
public ActionResult Get(string jsonData)
    {

        lst = new JavaScriptSerializer().Deserialize<IList<ParentGrid>>(jsonData);

        return RedirectToAction("Index", new { strJson = jsonData });
    } 
```

但问题是我的 URL 包含整个 json 字符串作为查询字符串，看起来不太好。还有其他方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:57:31.507

如果您不想在 URL 中显示 json，则在向“getdata”操作发送数据时应该使用 POST 而不是 GET。我能想到的最简单的方法是创建一个带有隐藏字段的表单，然后提交它。所以你在某个地方创建了一个表单

```
<form id="something" href='@Url.Action("GetData","ChildGrid")' method="POST">
     <input type="hidden" name="jsonData" id="jsonData" />
</form> 
```

然后在 btnredirect 你这样做：

```
$("#jsonData").value(jsonLst);
$("#something").submit(); 
```

您必须确保在控制器中，可以使用 POST 方法访问该操作。

另外你为什么要混合 jquery 和 EXTjs ？如果您正在使用 EXTJ 开发大部分 UI，那么最好使用 ExtJS 而不是 jquery 来进行事件和 DOM 操作。

# authorization - 检查事务代码授权的表

> ID：11045998
> 
> 赞同：1
> 
> 时间：2012-06-15T06:58:46.813
> 
> 标签：authorization, abap

我正在为工厂维护（PM）模块做互联网场景。在那我必须检查用户是否有 Tcode 的授权。PM 模块的 Tcode 的授权是 I_TCODE，但我找不到将授权与用户相关联的确切表。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:17:41.340

你为什么要检查一张桌子？FM AUTHORITY_CHECK_TCODE 不应该满足您的需要吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T07:50:14.117

有几个报告可以检查这一点 - 您可以使用事务 SUIM 找到它们。不要手动执行 - 可以通过多种方式为用户分配权限（直接配置文件分配、通过单个角色分配配置文件、包含单个角色的集体角色……）。您可能不想处理那种无聊的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:33:56.077

以下是在 SAP 中执行授权检查的方法：[help.sap.com 上的授权检查](http://help.sap.com/saphelp_nw04s/helpdata/en/52/67129f439b11d1896f0000e8322d00/frameset.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:27:34.203

通过加入数据库表**AGR_USERS**和**AGR_1251**，我们可以获得授权给用户的 Tcode。