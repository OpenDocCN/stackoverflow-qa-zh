# StackOverflow 问答 10198000-10198999

# php - 父类中存在属性，但不能从子类中使用

> ID：10198001
> 
> 赞同：0
> 
> 时间：2012-04-17T19:41:31.230
> 
> 标签：php

编辑：解决了！

我最近一直在研究自己的框架。我有一个这样的控制器类：

```
class Controller {
    private $model;

    public function __construct() {
        global $bean_db, $mv_name;

        if (file_exists(APP_PATH . 'models/' . $mv_name . '.php')) {
            require APP_PATH . 'models/' . $mv_name . '.php';

            $model_name = $mv_name . '_Model';
            $model = new $model_name;
            $this->model = $model;
        }
    }
} 
```

现在，在一个特定的控制器文件中，我有这样的代码：

```
class Start_Controller extends Controller {
    function execute() {
        $this->model->exec("SET NAMES 'utf8'");
    }
} 
```

正如您可能期望或可能不期望的那样，这不起作用。我收到一条错误消息，指出名为“model”的属性不存在。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T19:42:56.910

因为一个`private`变量仅限于这个类，*而*不是任何孩子。
你需要`protected`这个案例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:42:47.227

制作`model` `protected`而不是`private`. 这是一个立竿见影的解决方案，但您可能还想重新设计控制器访问其模型的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:45:07.693

私有成员对声明它们的类是专有的。它们不能在其他任何地方访问，即使在子类中也是如此。

您可以通过以下两种方式之一来克服这个问题。

1.  使私有成员受保护
2.  为私有成员提供受保护的 getter

通常你会做前者，但在某些情况下后者可能是一种更明智的方法（例如，如果你需要对成员进行只读访问）。

# ruby - 无法安装宝石射线

> ID：10198002
> 
> 赞同：0
> 
> 时间：2012-04-17T19:41:32.063
> 
> 标签：ruby, rubygems

我尝试安装 gem [ray](http://mon-ouie.github.com/projects/ray.html)但收到一条消息（短）

```
ERROR:  Error installing ray:
    ERROR: Failed to build gem native extension. 
```

您可以[在这里看到完整版的消息](https://gist.github.com/2408537)

我的平台：Ubuntu 11.10 x64

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:45:19.317

这是您的要点中的关键行：

```
checking for main() in -lopenal... no 
```

你需要一个开放的图书馆。在 ubuntu 中，通常有几种方法在包管理器中对其进行格式化：

```
Sudo apt-get install openal
openal-dev
libopenal
libopenal-dev
libopenal1 
```

同样如以下评论所示，您可能对 sndfile 有问题，在此编辑时它应该是 libsndfile1-dev。

* * *

来源： http: [//notesofgreg.blogspot.co.uk/2012/04/generic-gem-install-error-solving.html](http://notesofgreg.blogspot.co.uk/2012/04/generic-gem-install-error-solving.html)

# iphone - 将数组路径修剪为 JUST 文件名

> ID：10198006
> 
> 赞同：0
> 
> 时间：2012-04-17T19:41:38.860
> 
> 标签：iphone, xcode, nsarray, tableview, uisearchbar

我的 NSArray 是：

```
self.files  = [bundle pathsForResourcesOfType:@"ppt" inDirectory:@"thepowerpoints"]; 
```

这将返回的完整路径

```
/User/Name/.../filename.ppt 
```

我可以使用 NSString 来仅获取文件名：

```
NSString *documentsDirectoryPath = [self.files objectAtIndex:thepath.row];
self.filenames = [[documentsDirectoryPath lastPathComponent] stringByDeletingPathExtension]; 
```

有没有一种方法可以清理原始 NSArray 以仅返回 lastPathComponent 而没有扩展名？

我需要这样做才能在 tableview 数组中搜索。目前，如果一个文件名为“Test.ppt”，如果我输入“/User/Name”，搜索栏将显示它，因为它正在搜索的数组包含整个路径。

我希望它只搜索文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:03:33.283

```
NSMutableArray *names = [NSMutableArray arrayWithCapacity:[self.files count]];
for (NSString *path in self.files) {
    [names addObject:[[path lastPathComponent] stringByDeletingPathExtension]];
}
self.files = names; 
```

# java - 通往 XM PP 聊天室的骆驼路线惨遭失败

> ID：10198007
> 
> 赞同：3
> 
> 时间：2012-04-17T19:41:44.257
> 
> 标签：java, xmpp, apache-camel

我正在尝试连接到本地 OpenFire 服务器上的 Xmpp 聊天室。我运行了 Pidgin，并且可以验证 OpenFire 是否正常工作。我的骆驼路线看起来像：

```
from("{{chat.timer}}")  
.setBody(constant("I will win!"))
.to("xmpp://superman@localhost:5222/password=secret&room=room1@conference.localhost") 
```

但是，我在 ServiceMix 日志中收到错误：

```
13:33:20,772 | ERROR | data.flow.start] | DefaultErrorHandler | 90 - org.apache.camel.camel-core - 2.8.3 | Failed delivery for exchangeId....
. 
.
.
Caused by: java.lang.NoSuchMethodError: org.jivesoftware.smackx.muc.MultiUserChat.getServiceNames(Lorg/jivesoftware/smack/XMPPConnection;)Ljava/util/Collection;
    at org.apache.camel.component.xmpp.XmppEndpoint.resolveRoom(XmppEndpoint.java:197) 
```

我相信还有一些相同的“NoSuchMethodErrors”。

我在 ServiceMix 中安装了 smack 3.2.0.1，我不明白为什么会弹出这些错误。我可以通过 Camel 向用户发送 Xmpp 消息，这是第一次使用聊天室。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:01:17.187

事实证明，我的运行时使用的是 servicemix smack 包（版本 3.2.0），而我编译的是使用 jivesoftware smack（版本 3.1.0）。

我将编译的依赖项更新为 servicemix 版本，一切正常。

# java - Apache Camel 找不到 servlet 类

> ID：10198008
> 
> 赞同：1
> 
> 时间：2012-04-17T19:41:44.740
> 
> 标签：java, classpath, apache-camel

我想使用 Apache Camel 下载网页，遗憾的是我的努力被可怕的错误墙阻止了，所有这些似乎都是由以下原因引起的：

```
java.lang.NoClassDefFoundError: javax/servlet/ServletInputStream 
```

我觉得它很混乱，因为它看起来像是标准库中的一个类。

我在 Eclipse 中创建了项目，在引用的库中我有：

*   slf4j-api-1.6.4.jar
*   slf4j-simple-1.6.4.jar
*   骆驼核心-2.9.1.jar
*   骆驼-http4-2.9.1.jar

应该完成这项工作的类代码：

```
package camelexample;

import org.apache.camel.CamelContext;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.impl.DefaultCamelContext;

public class HttpDownload {
  public static void main(String[] args) throws Exception{
    System.out.print("download");

    CamelContext context = new DefaultCamelContext();
    context.addRoutes(new RouteBuilder(){
      public void configure(){
        from("http://www.ii.uni.wroc.pl/~gst/").to("file:data/webpage.html");
      }
    });

    context.start();
    Thread.sleep(10);
    context.stop();
  }
} 
```

为了运行该项目，我只使用了 Eclipse 的“运行”按钮。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:07:23.330

您需要使用 servlet API 添加一个 JAR，例如这个 JAR

org.apache.geronimo.specs:geronimo-servlet_2.5_spec:jar:1.1.2:compile

您可以在中央 maven 存储库中找到它： [http ://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-servlet_2.5_spec/1.1.2/](http://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-servlet_2.5_spec/1.1.2/)

然后将该 JAR 添加到您的类路径中。

而且由于您使用camel-http4，它使用Apache Http Client 4.x，您还需要它的依赖项

```
[INFO] +- org.apache.httpcomponents:httpclient:jar:4.1.3:compile
[INFO] |  +- org.apache.httpcomponents:httpcore:jar:4.1.4:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  \- commons-codec:commons-codec:jar:1.4:compile 
```

# objective-c - 如何为 dataWithContentsOfURL:url 设置超时

> ID：10198012
> 
> 赞同：5
> 
> 时间：2012-04-17T19:42:13.840
> 
> 标签：objective-c, ios

我想以更短的超时时间下载，以便更快，并防止应用程序因连接不良而崩溃。

```
- (void) CreateTitleView {
    NSURL* url;
    NSData* imageData;
    imageData = [NSData dataWithContentsOfURL:url ];
    UIImage* image = [UIImage imageWithData:imageData];
} 
```

我不擅长目标 C，所以我请求你的帮助来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-27T11:51:11.987

这些天来，这是可能的。API 是这样的：

```
NSURLResponse* urlResponse;
NSError* error;
NSMutableURLRequest* urlRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:20];
NSData* d = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&urlResponse error:&error]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:15:09.583

您无法通过设置超时来控制下载速度。这只会控制您的应用程序在放弃下载之前等待的时间。您应该重构您的应用程序以在后台加载图像数据，以便 UI 在下载完成之前保持响应。

查看[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html) (sendAsynchronousRequest) 或[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

# java - 如何访问 JSONObject 子字段？

> ID：10198013
> 
> 赞同：14
> 
> 时间：2012-04-17T19:42:13.970
> 
> 标签：java, json, google-geocoder

我觉得很愚蠢，但我一直在寻找这个。我正在使用 google geocoder API，我需要一些关于 json 响应的帮助。这是我拥有的 JSONObject：

```
{
"viewport": {
    "southwest": {
        "lng": -78.9233749802915,
        "lat": 36.00696951970851
    },
    "northeast": {
        "lng": -78.92067701970849,
        "lat": 36.0096674802915
    }
},
"location_type": "ROOFTOP",
"location": {
    "lng": -78.922026,
    "lat": 36.0083185
}
} 
```

如何将“位置”子字段提取到它们自己的变量中？我试过`jsonObjectVariable.getString("location");`等等`jsonObjectVariable.getDouble()`，但它没有正确返回。json 对象中的子字段叫什么？我读到您可以使用 object.subobject 语法访问子字段，但我只是没有得到我需要的东西。

（我使用 json-org 作为库）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T20:36:36.230

使用[Java 的 json.org 库](http://www.json.org/java/)，您只能通过首先获取父`JSONObject`实例来获取对象的各个属性：

```
JSONObject object = new JSONObject(json);
JSONObject location = object.getJSONObject("location");
double lng = location.getDouble("lng");
double lat = location.getDouble("lat"); 
```

如果您尝试使用“点表示法”访问属性，如下所示：

```
JSONObject object = new JSONObject(json);
double lng = object.getDouble("location.lng");
double lat = object.getDouble("location.lat"); 
```

那么 json.org 库不是您要寻找的：它不支持这种访问。

* * *

`getString("location")`作为一个侧节点，调用您问题中给出的 JSON 的任何部分都是没有意义的。唯一称为“位置”的属性的值是另一个具有两个属性的对象，称为“lng”和“lat”。

如果您希望将此“作为字符串”，最接近的方法是调用（此答案中`toString()`的`JSONObject location`第一个代码片段），它将为您提供类似`{"lng":-78.922026,"lat":36.0083185}`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T19:50:54.803

我相信您需要使用 jsonObjectVariable.getJSONObject("location") 反过来返回另一个 JSONObject。

然后，您可以在该对象上调用 getDouble("lng") 或 getDouble("lat")。

例如

```
double lat = jsonObjectVariable.getJSONObject("location").getDouble("lat"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T11:51:38.920

您应该创建类位置以提取“位置”子字段。

```
public class Location {
    private double lat;
    private double lng;

@JsonCreator
    public Location(@JsonProperty("lat") double lat, @JsonProperty("lng") double lng {
        this.lat = lat;
        this.lngenter code here = lng;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-28T11:54:23.477

您可以扩展 JSONObject 类并`public Object get(String key) throws JSONException`使用以下内容覆盖：

```
public Object get(String key) throws JSONException {
    if (key == null) {
        throw new JSONException("Null key.");
    }

    Object object = this.opt(key);
    if (object == null) {
        if(key.contains(".")){
            object = this.getWithDotNotation(key);
        }
        else
            throw new JSONException("JSONObject[" + quote(key) + "] not found.");
    }
    return object;
}

private Object getWithDotNotation(String key) throws JSONException {
    if(key.contains(".")){
        int indexOfDot = key.indexOf(".");
        String subKey = key.substring(0, indexOfDot);
        JSONObject jsonObject = (JSONObject)this.get(subKey);
        if(jsonObject == null){
            throw new JSONException(subKey + " is null");
        }
        try{
            return jsonObject.getWithDotNotation(key.substring(indexOfDot + 1));                
        }catch(JSONException e){
            throw new JSONException(subKey + "." + e.getMessage());
        }
    }
    else
        return this.get(key);
} 
```

请随时更好地处理异常......我确定它没有正确处理。谢谢

# .net - firefox .aspxauth cookie 不工作

> ID：10198014
> 
> 赞同：0
> 
> 时间：2012-04-17T19:42:32.423
> 
> 标签：.net, firefox, cookies, .aspxauth

我正在使用.net，当我进行表单身份验证并设置cookie（.aspxauth）域**“.domain.com”**时，它适用于除FireFox（v11）之外的所有浏览器。

cookie 已成功保存并已针对**subdomain.domain.com**进行验证，但由于某种原因，当我在顶级**domain.com上时，firefox 似乎无法识别/找到它**

谷歌浏览器中似乎也存在问题

如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:58:55.963

阅读[https://serverfault.com/questions/153409/can-subdomain-example-com-set-a-cookie-that-c​​an-be- read-by-example-com](https://serverfault.com/questions/153409/can-subdomain-example-com-set-a-cookie-that-can-be-read-by-example-com)

> 您可能会发现，实际上大多数站点都在使用旧 RFC 规范中的 Set-Cookie 与“主机”值的某种组合，隐含地没有前导点（如 twitter.com）或设置域值（带前导点) 并重定向到像 www.example.com 这样的服务器（就像 google.com 一样）。

# php - 需要想法来创建判断算法

> ID：10198017
> 
> 赞同：1
> 
> 时间：2012-04-17T19:42:43.123
> 
> 标签：php, algorithm

我有一个 PHP 评分系统 (1-5)，其中一些评委会对一些产品进行评分。我希望这些产品的结果是公平的。通常情况下，一些评委非常严格，可能只会在 1-2 的范围内对产品进行评分。而一些评委只在 4-5 的范围内对产品进行评分。有些人在 1-5 之间做出正确判断。

有人可以提出想法或帮助为平均评委创建一种算法，该算法可以衡量评委的评分并计算产品分数。

我想对所有产品的评委分数取平均值，但这是前进的道路，或者有些人有另一种很好的选择来获得公平的结果。

**编辑**

评级系统不适用于电子商务应用程序。这里只有少数评委说 10 人对所有产品进行评分。例如，产品可以是比赛中的歌曲。一些法官可能非常严格，而另一些则非常自由。可能有几场比赛，所以我必须记录这些非常严格和自由的评委，即使是其他比赛，也必须为他们制定规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:41:31.857

[截断均值](http://en.wikipedia.org/wiki/Truncated_mean)怎么样？[这](http://www.ltcconline.net/greenl/courses/201/descstat/mean.htm)是对这个想法的一个很好的解释。

**编辑**

假设您有如下投票：`[1,4,3,2,5,1,1,3,2,4]`.

您需要按升序对数组进行排序，给您：`[1,1,1,2,2,3,3,4,4,5]`。

然后假设你想去掉 25% 的选票，也就是`3`（四舍五入）。你只需从左边和右边丢弃三张选票，给你`[2,2,3,3]`。

然后，使用算术平均得到`2.5`。

**编辑 2**

根据您的数据库架构，您可以查询数据库以按升序返回投票。然后，计算百分比，用于`array_slice()`帮助您（阅读[文档](http://php.net/manual/en/function.array-slice.php)），计算算术平均值是您现在最不关心的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:41:42.437

简单地说，你根据他们的典型投票范围为法官分配一个权重（注意，他们一定不知道这个权重，否则他们会破坏系统。）总是投票给单一分数的法官得到最低的权重. 给出广泛分数的裁判被认为更准确。

这也假设这些法官以公平的质量判断产品；因此，如果你给他们一堆好或坏的产品，并期望有一定范围的投票水平，那可能是不现实的。

您正在寻找的是具有最高权重的选票中标准偏差（最大变化）的法官，而最低的法官将拥有最少的选票。

非算法解决方案（本质上）是在评委身上运行算法，然后选择美国偶像风格的评委，让他们相互平衡以获得感觉上准确的结果。在这种情况下，您需要注意平均投票以及标准差，并且可能设置三位评委，一位标准差较宽，然后两位窄，一位高一位低（自由和严格）进行评判它。通过这种方式，他们不会因为他们更严格或更宽松而觉得自己“声音小”。

再说一次，这可能是他们减少/更严格的动力——如果他们对产品太容易或太苛刻，他们就会“失去声音”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:34:26.337

听起来您可能正在尝试将算法解决方案应用于非算法问题。我会思考为什么有些“法官”只投 1-2 票，而其他“法官”只投 4-5 票。

一个可能的原因可能是自我选择。例如，在线购买商品的人如果对购买特别失望或特别满意，他们可能更有可能评论该商品。如果这是您的问题，您可以尝试鼓励购物者更多地投票，这样即使是那些有非极端经验的人也会回来投票。

另一个可能的问题可能是指导。评委们可能不清楚您对评分系统的解释。您可以尝试添加对每个评分含义的描述，看看这是否会提高数据质量。

总而言之，任何类型的评分问题解决方案都需要有一个“人”的成分，并考虑到评委如何选择评分以及为什么选择评分的全部故事。如果您的输入数据质量较差，排名算法将无能为力。另一方面，如果您的数据质量不错，那么取平均值效果很好。

取平均值的一个不相关的问题是，一个 5 星评级的项目将排在一个拥有 100 个 5 星评级 + 一个 4 星评级的项目之上。一个简单的解决方案是拉普拉斯平滑法，它通过有效地启动每个项目来解决这个问题，每个值（1、2、3、4、5）的一票。您不显示“平滑”值，但在排序时使用它们。请参阅[如何不按平均评分排序](http://www.evanmiller.org/how-not-to-sort-by-average-rating.html)帖子以获取替代解决方案。

# pointers - 如何使用 GDB 查看存储在堆栈中的变量

> ID：10198018
> 
> 赞同：1
> 
> 时间：2012-04-17T19:42:44.647
> 
> 标签：pointers, printing, gdb, stack, frame

我正在尝试使用 GDB 找出堆栈中某个位置存储的内容。我有一个声明：

```
cmpl $0x176,-0x10(%ebp) 
```

在这个函数中，我将 0x176 与 -0x10(%ebp) 进行比较，我想知道是否有办法查看存储在 -0x10(%ebp) 的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:19:24.397

> 我想知道是否有办法查看存储在 -0x10(%ebp) 的内容。

假设您已使用调试信息进行编译，`info locals`将告诉您当前帧中的所有局部变量。之后，会告诉你从to`print (char*)&a_local - (char*)$ebp`开始的偏移量，你通常可以找出 local 接近于。`a_local``%ebp``0x176`

此外，如果您的本地人有初始化程序，您可以`info line NN`找出哪个汇编指令范围对应于给定本地人的初始化，然后`disas ADDR0,ADDR1`查看反汇编，并再次了解哪个本地人位于哪个偏移量处。

另一种选择是`readelf -w a.out`, 并查找如下条目：

```
int foo(int x) { int a = x; int b = x + 1; return b - a; }

<1><25>: Abbrev Number: 2 (DW_TAG_subprogram)
 <26>   DW_AT_external    : 1        
 <27>   DW_AT_name        : foo      
 <2b>   DW_AT_decl_file   : 1        
 <2c>   DW_AT_decl_line   : 1        
 <2d>   DW_AT_prototyped  : 1        
 <2e>   DW_AT_type        : <0x67>   
 <32>   DW_AT_low_pc      : 0x0      
 <36>   DW_AT_high_pc     : 0x23     
 <3a>   DW_AT_frame_base  : 0x0      (location list)
 <3e>   DW_AT_sibling     : <0x67>   
<2><42>: Abbrev Number: 3 (DW_TAG_formal_parameter)
 <43>   DW_AT_name        : x        
 <45>   DW_AT_decl_file   : 1        
 <46>   DW_AT_decl_line   : 1        
 <47>   DW_AT_type        : <0x67>   
 <4b>   DW_AT_location    : 2 byte block: 91 0       (DW_OP_fbreg: 0)
<2><4e>: Abbrev Number: 4 (DW_TAG_variable)
 <4f>   DW_AT_name        : a        
 <51>   DW_AT_decl_file   : 1        
 <52>   DW_AT_decl_line   : 1        
 <53>   DW_AT_type        : <0x67>   
 <57>   DW_AT_location    : 2 byte block: 91 74      (DW_OP_fbreg: -12)
<2><5a>: Abbrev Number: 4 (DW_TAG_variable)
 <5b>   DW_AT_name        : b        
 <5d>   DW_AT_decl_file   : 1        
 <5e>   DW_AT_decl_line   : 1        
 <5f>   DW_AT_type        : <0x67>   
 <63>   DW_AT_location    : 2 byte block: 91 70      (DW_OP_fbreg: -16) 
```

这告诉您`x`存储在`fbreg+0`、`a`at`fbreg-12`和`b`at `fbreg-16`。现在您只需要检查位置列表即可了解如何`fbreg`从`%ebp`. 上述代码的列表如下所示：

```
Contents of the .debug_loc section:

Offset   Begin    End      Expression
00000000 00000000 00000001 (DW_OP_breg4: 4)
00000000 00000001 00000003 (DW_OP_breg4: 8)
00000000 00000003 00000023 (DW_OP_breg5: 8)
00000000 <End of list> 
```

所以对于身体的大部分，`fbreg`是`%ebp+8`，这意味着`a`在`%ebp-4`。拆卸确认：

```
00000000 <foo>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 10                sub    $0x10,%esp
   6:   8b 45 08                mov    0x8(%ebp),%eax  # 'x' => %eax
   9:   89 45 fc                mov    %eax,-0x4(%ebp) # '%eax' => 'a' 
```

...

# php - 由于“原始数据”，PHP 脚本无法正常工作

> ID：10198022
> 
> 赞同：-1
> 
> 时间：2012-04-17T19:42:58.350
> 
> 标签：php, html, compression

我有以下 php 代码：

```
<?php
include "../config.php"; //includes the connection data
$query="SELECT userinvites.user_id, COUNT( * ) AS user_count, users.fname, users.lname,        users.image
FROM userinvites
INNER JOIN users ON userinvites.user_id = users.user_id
GROUP BY user_id
ORDER BY COUNT( * ) DESC 
LIMIT 0 , 10"; //basic query that gets the data for leaderboard 
$result = mysql_query($query) or die(mysql_error());
echo '<table width="285" border="0" cellpadding="0" cellspacing="0">' ;
while($row = mysql_fetch_array($result)){
    //echo "-". $row['image']. " - ". $row['fname']. " - ". $row['lname']. " - ".      $row['user_count'];
    //echo "<br />";
    echo '<tr>';
    echo "<td height='40'> ". $row['image'].  "</td>";
    echo "<td>". $row['fname']. " ". $row['lname']. "</td>";
    echo "<td>" . $row['user_count']. "</td>";
    echo "</tr>";
}
echo '</table>';
?> 
```

当我将此代码单独放在 .php 页面中时，它工作正常。当我尝试在另一个 .php 页面中导入此脚本时，我收到一条消息，指出数据压缩有问题。对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:21:53.913

好吧，如果它是原始图像数据，那么这应该适用于 while 循环（更改`image/gif`为适当的类型）：

```
while($row = mysql_fetch_array($result)){
  echo '<tr>'
    .'<td height="40">'
      .'<img src="data:image/gif;base64,' . base64_encode($row['image']) . '">'
    .'</td>'
    .'<td>' . htmlspecialchars($row['fname'] . ' ' . $row['lname']) . '</td>'
    .'<td>' . htmlspecialchars($row['user_count']) . '</td>'
    .'</tr>';

} 
```

# android - 在 iOS 和 Android 上的 AS3 中查找我的空中应用程序版本

> ID：10198025
> 
> 赞同：7
> 
> 时间：2012-04-17T19:43:06.737
> 
> 标签：android, ios, actionscript-3, air

Air 中是否有 as3 API（我使用的是 3.2）来访问我的应用程序版本？我在 App Store 或 Android Market 上提供的那个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T19:56:12.593

是的，您可以直接从应用程序 xml 描述符中提取它。像这样的东西应该工作：

```
var descriptor:XML = NativeApplication.nativeApplication.applicationDescriptor;
var ns:Namespace = descriptor.namespace();
var version:String = descriptor.ns::version[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-16T18:29:59.590

看起来 Air 4.0 有所不同这对我有用：

```
var descriptor:XML = NativeApplication.nativeApplication.applicationDescriptor;
var ns:Namespace = descriptor.namespace();
var version:String = descriptor.ns::versionNumber; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T18:00:42.230

```
var _descriptor:XML = nativeApplication.applicationDescriptor;
var ns:Namespace = _descriptor.namespace();
var version:String = _descriptor.ns::versionNumber; 
```

这对我有用。“descriptor” var 在 AIR 3.2 中用于 UIComponentDescriptor，因此我不能使用该变量名。还有，静态访问nativeApplication（NativeApplication.nativeApplication）给了我一个空指针引用，所以我就直接抓取了。

最后，versionNumber 将版本存储在 AIR 3.2 中。

# java - Groovy 与 Java 语法差异

> ID：10198026
> 
> 赞同：13
> 
> 时间：2012-04-17T19:43:08.757
> 
> 标签：java, syntax, groovy

在 Java 中，我可以这样做：

```
return a
    && b
    && c; 
```

在 Groovy 中，它返回一个编译错误：`unexpected token: &&`. 如果我`return`在 Groovy 中省略了关键字，也会发生这种情况。但是，如果我将语句括在括号中，它就可以正常工作。

在我读过的所有 Groovy 资源中，我都被告知我应该能够在任何我想要的地方编写“纯 Java”。这是一个错误吗？如果不是，这个设计决定的原因是什么？

我看了[here](https://stackoverflow.com/questions/687601/valid-java-code-that-is-not-valid-groovy-code)，但没有发现这个问题。我知道有些东西*不能*从 Java 继承，但这似乎不是其中之一。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-17T19:48:57.897

The problem is that Groovy doesn't require explicit line terminators - and `return a` looks like a valid statement on its own. You could use:

```
return a &&
       b &&
       c; 
```

Or use a line continuation:

```
return a \
    && b \
    && c; 
```

It's *not* true that all Java is valid Groovy. While most Java syntax is covered, occasionally a feature of Groovy will have an impact on valid Java.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T19:48:53.137

Groovy doesn't seem to require semicolons, so I think your code is being intepreted like:

```
return a;
    && b;
    && c; 
```

From [the documentation](http://groovy.codehaus.org/Statements):

> Groovy uses a similar syntax to Java although in Groovy semicolons are optional.
> 
> This saves a little typing but also makes code look much cleaner (surprisingly so for such a minor change). So normally **if one statement is on each line** you can ommit semicolons altogether - though its no problem to use them if you want to. If you want to put multiple statements on a line use a semicolon to separate the statements.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:57:33.503

除了查看以下内容外，您几乎可以在 groovy 中执行所有 java 操作。

[http://groovy.codehaus.org/Differences+from+Java](http://groovy.codehaus.org/Differences+from+Java)

如果您想直接使用 java，那么您可以在 *.java 类中进行操作并将其放入 src 文件夹中。

# python - 左上角的原点坐标系是什么阻止了这个方程的工作？

> ID：10198027
> 
> 赞同：1
> 
> 时间：2012-04-17T19:43:14.477
> 
> 标签：python, math, opencv

我正在尝试实现这个方程来确定三个用户选择的点的圆心：[http ://en.wikipedia.org/wiki/Circumscribed_circle#Cartesian_coordinates](http://en.wikipedia.org/wiki/Circumscribed_circle#Cartesian_coordinates)

首先，通过这个 OpenCV 鼠标回调函数获取点并组装成一个列表：

```
def setupPoints(event, x, y, flags, points):
   #Populates a provided list 'points' with
   #three coordinates representing the edge of
   #a circle
   if points[0] == 0:
      points[0] = (x,y)
   elif points[1] == 0:
      points[1] = (x,y)
   else:
      points[2] = (x,y) 
```

然后我将点列表传递给这个函数，它完成了工作：

```
def findCircle(p):
   #Returns the circle centre
   #from three provided points provided as tuples
   #in a list
   #See http://en.wikipedia.org/wiki/Circumscribed_circle#Cartesian_coordinates
   ax = float(p[0][0])
   ay = float(p[0][1])
   bx = float(p[1][0])
   by = float(p[1][1])
   cx = float(p[2][0])
   cy = float(p[2][1])

   d = 2*(ax*(by-cy)+bx*(cy-ay)+cx*(ay-by))
   centrex = ((pow(ax,2)+pow(ay,2))*(by-cy)+(pow(bx,2)+pow(by,2))*(cy-ay)+(pow(cx,2)+pow(cy,2))*(ay-by))/d
   centrey = ((pow(ax,2)+pow(ay,2))*(cx-bx)+(pow(bx,2)+pow(by,2))*(ax-cx)+(pow(cx,2)+pow(cy,2))*(bx-ax))/d

   return (int(round(centrex)), int(round(centrey)), int(round(d))) 
```

但是，它不起作用。返回的数字并没有大量关闭，但它们肯定是不正确的。这可能与 OpenCV 使用的坐标系的原点位于图像的左上角有关吗（图像内的点仍然是正数，因此可以说是“向后”计数，至少垂直）。

还是这个猜测错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:46:36.300

很可能是因为除法的操作数都是整数，所以结果是（下限）整数。在 Python 中，`2/3 == 0`. 这会稍微影响您的计算，因为它们不会被正确四舍五入。尝试除以`float(d)`而不仅仅是`d`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:53:39.583

关于是否不稳定（从数学角度，而不是计算机图形学角度）坐标系统阻止它工作的问题的答案是否定的。

我只是忘记在我的鼠标回调函数中添加一个检查，以确保事件是单击而不是简单的鼠标移动；我的点不是我点击的！

感谢您查看此内容，也许这将对将来的某人有所帮助...

# xcode - 如何摆脱图像按钮周围的白边？

> ID：10198031
> 
> 赞同：0
> 
> 时间：2012-04-17T19:43:37.330
> 
> 标签：xcode, imagebutton

我已经为按钮设置了图像。即使图像具有透明背景，按钮周围总是有白边。我已经尝试了很多东西（见下面的代码），我该如何摆脱它？

```
[myButton setBackgroundImage:[UIImage imageNamed:@"button.png"] forState:UIControlStateNormal];
[myButton setBackgroundColor:[UIColor clearColor]];

[[myButton layer] setBackgroundColor:[[UIColor clearColor] CGColor]];
[[myButton layer] setBorderWidth:0]; 
```

我还不允许上传图片，但可以在这里找到结果：[https ://docs.google.com/open?id=0B9d-ZrsbiU3IY2RPcXlKNlh1Q1U](https://docs.google.com/open?id=0B9d-ZrsbiU3IY2RPcXlKNlh1Q1U)

如您所见，那个白色边缘非常烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:49:54.713

You need to create a button of type `UIButtonTypeCustom`.

If you're creating it programatically then use `buttonWithType:UIButtonTypeCustom`. If you're creating it in IB then select "Custom" as the type from the drop down.

This will mean that the standard white is not drawn.

# ruby - 在开发环境中拦截使用 Pony gem 发送的邮件

> ID：10198035
> 
> 赞同：0
> 
> 时间：2012-04-17T19:43:54.140
> 
> 标签：ruby, ruby-on-rails-3, email, pony

我正在使用 Pony gem for ruby​​ on rails，我想知道是否有办法在开发和登台环境（任何非生产环境）中拦截邮件并将其发送到受控地址，就像您可以使用 ActionMailer 一样。

我知道使用 ActionMailer 你可以只使用拦截器......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:55:53.133

我个人使用[mailcatcher](http://mailcatcher.me/)作为拦截器（我不确定我是否使用“拦截器”来表示与你相同的意思）。然后你只需要将默认的 Pony.options :via_options 设置为 smtp://127.0.0.1:1025 ，邮件就会被发送到 mailcatcher。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:06:44.533

只需为您的环境修补 Pony 对象中的 mail 方法。像这样的东西...

```
class Pony
  alias_method :original_mail, :mail

  def mail(args)
    args[:to] = 'intercept@example.com'
    original_mail(args)
  end
end 
```

# ruby-on-rails - 如何阅读/理解 ruby /rails 文档

> ID：10198039
> 
> 赞同：2
> 
> 时间：2012-04-17T19:44:09.247
> 
> 标签：ruby-on-rails, ruby, documentation

我如何在文档中阅读我的对象支持的方法？例如，如果我在 rails 中创建了一个 has_many 关联，如何知道其中存在哪些方法，它是什么类型？我知道我可以调用每种方法，但是记录在哪里？我在任何地方都找不到！我想在文档中看到这一点，而不必总是在对象上调用方法方法……是否有类似 javadoc 的东西，我可以在其中看到我的对象具有的方法以及他继承的方法？

抱歉这个愚蠢的问题，但我是 ruby​​/rails 的新手 =/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:01:17.197

我不是 100% 肯定，但也许这会做[http://www.ruby-doc.org/docs/ProgrammingRuby/html/ref_c_object.html#Object.inspect](http://www.ruby-doc.org/docs/ProgrammingRuby/html/ref_c_object.html#Object.inspect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:48:00.150

转到[http://api.rubyonrails.org/](http://api.rubyonrails.org/)，`has_many`在左侧的字段中输入。然后选择第一个结果。

# android - 为什么 system_process 第二次杀死我的服务？

> ID：10198041
> 
> 赞同：0
> 
> 时间：2012-04-17T19:44:24.183
> 
> 标签：android

我有一个带有服务的 android 应用程序。我第一次运行该服务时运行良好，但是当我在同一个模拟器中第二次运行时会收到此消息。

```
04-17 18:27:15.808: D/PackageManager(61):   Services: es.myapp.PhoneService
04-17 18:27:15.817: D/PackageManager(61):   Receivers: es.myapp.ScreenReceiver es.myapp.Receiver
04-17 18:27:15.817: D/PackageManager(61):   Activities: es.myapp.Login es.myapp.TakePhoto
04-17 18:27:16.157: D/dalvikvm(155): GC_EXTERNAL_ALLOC freed 238K, 49% free 3007K/5895K, external 6685K/6692K, paused 67ms
04-17 18:27:16.207: I/installd(34): move /data/dalvik-cache/data@app@es.myapp-1.apk@classes.dex -> /data/dalvik-cache/data@app@es.myapp-1.apk@classes.dex
04-17 18:27:16.207: D/PackageManager(61): New package installed in /data/app/es.myapp-1.apk
04-17 18:27:16.377: D/dalvikvm(155): GC_EXPLICIT freed 99K, 51% free 2921K/5895K, external 4655K/5618K, paused 54ms
04-17 18:27:17.427: I/ActivityManager(61): Force stopping package es.myapp uid=10035 
```

我在模拟器上有足够的内存。
所以我必须破坏机器并在每次运行时重新创建它才能正常工作。是什么原因？

代码如下：

```
public class PhoneService extends Service{

    private final IBinder mBinder = new LocalBinder();  

    public class LocalBinder extends Binder {
        PhoneService getService() {
            return PhoneService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public void onCreate(){

        this.setForeground(true);

        try {
            IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
            filter.addAction(Intent.ACTION_SCREEN_OFF);
            filter.addAction(Intent.ACTION_USER_PRESENT);
            BroadcastReceiver mReceiver = new ScreenReceiver();
            registerReceiver(mReceiver, filter);
       } catch (Exception e) {

       }    
    }

       @Override
        public void onDestroy() {
        }

       @Override
       public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStart(intent, startId);
            return START_STICKY;
    }
}

public class Receiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {

            Intent serviceIntent = new Intent();
            serviceIntent.setAction("es.myapp.PhoneService");
            context.startService(serviceIntent);
    }
}

public class ScreenReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {         

        if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)){
            Intent photoIntent = new Intent(context, TakePhoto.class);
            photoIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(photoIntent);
        }
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)){

        }
        if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)){

        }
    }
} 
```

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="es.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" /> 
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".Login"

            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 

        <activity
            android:name=".TakePhoto"
            android:theme="@android:style/Theme.NoDisplay"
            android:label="@string/app_name" >

        </activity> 

        <service android:name=".PhoneService">
            <intent-filter>
                <action android:name="es.myapp.PhoneService"/>
            </intent-filter>
        </service> 

        <receiver android:name=".ScreenReceiver">
            <intent-filter>
                <action android:name="android.intent.action.SCREEN_ON" /> 
                <action android:name="android.intent.action.SCREEN_OFF" />
                <action android:name="android.Intent.ACTION_USER_PRESENT" />
            </intent-filter>
        </receiver>

        <receiver android:name=".Receiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

谢谢。

# ruby-on-rails-3 - 为什么每个请求都会出现在 Rails 日志中的 ActiveAdmin 文件？

> ID：10198044
> 
> 赞同：0
> 
> 时间：2012-04-17T19:44:33.327
> 
> 标签：ruby-on-rails-3, activeadmin, logging

我找不到问题的根源。

我正在使用 Rails 3.1.1 和 ActiveAdmin 0.4.0。Web 服务器是 WEBrick 1.3.1。

每个请求，ActiveAdmin 文件都显示在日志中。例如：

```
Started GET "/admin/" for 127.0.0.1 at 2012-04-17 21:28:37 +0200
[nil, ["path/to/the/app/admin", "path/to/the/app/admin/modela.rb", "path/to/the/app/admin/modelb.rb", "path/to/the/app/admin/modelc.rb", "path/to/the/app/admin/modeld.rb", "path/to/the/app/admin/modele.rb", "path/to/the/app/admin/modelf.rb", "path/to/the/app/admin/modelg.rb", "path/to/the/app/admin/modelh.rb", "path/to/the/app/admin/modeli.rb"]]
  Processing by Admin::DashboardController#index as HTML
Completed 401 Unauthorized in 7ms 
```

app/admin/dashboards.rb：

```
ActiveAdmin::Dashboards.build do
end 
```

无论页面如何，ActiveAdmin 文件都会显示在日志中……无论环境如何（开发、登台、生产……）

另一个页面，另一个例子：

```
[...]

Started GET "/assets/jquery-1.7.1.min.js?body=1" for 127.0.0.1 at 2012-04-18 12:37:40 +0200
[nil, ["path/to/the/app/admin", "path/to/the/app/admin/modela.rb", "path/to/the/app/admin/modelb.rb", "path/to/the/app/admin/modelc.rb", "path/to/the/app/admin/modeld.rb", "path/to/the/app/admin/modele.rb", "path/to/the/app/admin/modelf.rb", "path/to/the/app/admin/modelg.rb", "path/to/the/app/admin/modelh.rb", "path/to/the/app/admin/modeli.rb"]]
Served asset /jquery-1.7.1.min.js - 304 Not Modified (0ms)

Started GET "/assets/jquery.ui.datepicker-fr.js?body=1" for 127.0.0.1 at 2012-04-18 12:37:40 +0200
[nil, ["path/to/the/app/admin", "path/to/the/app/admin/modela.rb", "path/to/the/app/admin/modelb.rb", "path/to/the/app/admin/modelc.rb", "path/to/the/app/admin/modeld.rb", "path/to/the/app/admin/modele.rb", "path/to/the/app/admin/modelf.rb", "path/to/the/app/admin/modelg.rb", "path/to/the/app/admin/modelh.rb", "path/to/the/app/admin/modeli.rb"]]
Served asset /jquery.ui.datepicker-fr.js - 304 Not Modified (0ms)

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-04-18 12:37:40 +0200
[nil, ["path/to/the/app/admin", "path/to/the/app/admin/modela.rb", "path/to/the/app/admin/modelb.rb", "path/to/the/app/admin/modelc.rb", "path/to/the/app/admin/modeld.rb", "path/to/the/app/admin/modele.rb", "path/to/the/app/admin/modelf.rb", "path/to/the/app/admin/modelg.rb", "path/to/the/app/admin/modelh.rb", "path/to/the/app/admin/modeli.rb"]]
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

[...] 
```

看，在每个请求中都有：

```
[nil, ["path/to/the/app/admin", "path/to/the/app/admin/modela.rb", "path/to/the/app/admin/modelb.rb", "path/to/the/app/admin/modelc.rb", "path/to/the/app/admin/modeld.rb", "path/to/the/app/admin/modele.rb", "path/to/the/app/admin/modelf.rb", "path/to/the/app/admin/modelg.rb", "path/to/the/app/admin/modelh.rb", "path/to/the/app/admin/modeli.rb"]] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:34:07.473

看起来调试可能在堆栈中的某个位置打开。

在不进行进一步的盲调试的情况下，您能否提供有关此问题的更多信息 - 例如：

*   你安装了什么版本的 Rails
*   您安装了哪个版本的 ActiveAdmin
*   Admin::DashboardController 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:13:58.047

看来这是来自 AA 团队的“调试线”。见：[https ://github.com/gregbell/active_admin/pull/952](https://github.com/gregbell/active_admin/pull/952)

sferik 在此提交中将其删除： [https ://github.com/sferik/active_admin/commit/8bec274d4d0f3d5592c27c18ab8332b555ff8102](https://github.com/sferik/active_admin/commit/8bec274d4d0f3d5592c27c18ab8332b555ff8102)

# c++ - C++ 成员变量

> ID：10198046
> 
> 赞同：18
> 
> 时间：2012-04-17T19:44:35.753
> 
> 标签：c++, class, variables, scope, member

考虑以下类：

```
class A
{
  A();
  int number;
  void setNumber(int number);
}; 
```

您可以通过 3 种方式实现“setNumber”：

**方法1**：使用'this'指针。

```
void A::setNumber(int number)
{
  this->number = number;
} 
```

**方法 2**：使用范围解析运算符。

```
void A::setNumber(int number)
{
  A::number = number;
} 
```

**方法 3**：相反，用 'm' 或 '_' 表示所有成员变量（这是我的首选方法）。

```
void A::setNumber(int number)
{
  mNumber = number;
} 
```

这只是个人喜好，还是选择特定方法有好处？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T20:26:38.187

这主要是个人喜好，但让我从一家同时制作许多小游戏的公司内部分享我对这个问题的看法（因此我周围使用了许多编码风格）。

这个链接有几个很好的相关答案：[Why use prefixes on member variables in C++ classes](https://stackoverflow.com/questions/1228161/why-use-prefixes-on-member-variables-in-c-classes)

您的选择1：

```
void A::setNumber(int number)
{
  this->number = number;
} 
```

> 首先，许多程序员往往觉得这很麻烦，不断地输入'this->'。其次，更重要的是，如果您的任何变量与参数或局部变量共享名称，则旨在更改“数字”名称的查找替换可能会影响位于查找替换范围内的成员变量好。

您的选择2：

```
void A::setNumber(int number)
{
  A::number = number;
} 
```

> 我遇到的问题是，在大型类或具有大型函数的类中（你看不到函数或类被意外命名），A::(thing) 的格式看起来非常像访问命名空间的一部分，因此可能会产生误导。另一个问题与前一个选项中的 #2 相同，如果您的名称与您正在使用的任何变量相似，有时可能会出现意外的混淆。

您的选择 3：

```
void A::setNumber(int number) 
{
  mNumber = number;
} 
```

> 这是提供的三个选项中最好的。通过创建（并坚持！）包含明确且有意义的前缀的语法，您不仅可以创建本地（或全局）变量不会共享的唯一名称，而且可以立即明确该变量的声明位置，不管你在什么上下文中找到它。我已经看到它既像这样'mVariable'又像这样'm_variable'，它主要取决于你是否更喜欢下划线而不是大写连接。此外，如果您的样式倾向于添加诸如' p '用于指针或' g '用于全局，则这种样式将很好地融合并受到读者的期望。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T19:46:33.723

这是一个风格问题，因此是个人偏好，或者是与您合作的团队或与您合作的团队的老板的偏好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-17T19:46:19.100

**选项 4**：

```
void A::setNumber(int n)
{
  number = n;
} 
```

为什么对成员**和**参数使用相同的名称有好处。这没有什么好处。当然，现在很清楚了，但是当您的方法变大，并且原型不再适合屏幕，并且有其他开发人员编写代码时，他可能会忘记对成员进行限定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T19:49:29.923

这都是个人喜好

但是这里有一个很好的非语言级别的讨论

[https://stackoverflow.com/questions/381098/what-naming-convention-do-you-use-for-member-variables](https://stackoverflow.com/questions/381098/what-naming-convention-do-you-use-for-member-variables)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T20:24:25.100

我想说方法 1 和方法 3 之间的选择是个人或组织风格的问题。

方法 2 较差，因为 Class::member 通常表示静态成员变量，因此如果用于消除参数和成员变量之间的歧义，会引起混淆。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T20:40:29.800

我将通过提供更好的变体来同意 Luchian。您提供的其他示例过于繁琐或令人困惑。

**选项 4**：

```
void A::setNumber(int aNumber)
{
  theNumber = aNumber;
} 
```

这是我们在我的雇主处使用的编码标准的一部分，您所描述的内容非常清楚。这不是匈牙利符号。

# lotus-notes - Lotus Notes 视图未显示在 Web 浏览器中

> ID：10198047
> 
> 赞同：0
> 
> 时间：2012-04-17T19:44:36.517
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我们有一个遗留的 Lotus Notes 应用程序，我们想看看是否可以进行改进，首先为此应用程序创建一个测试环境。目前，该应用程序位于主服务器上，每 15 分钟复制一次到 Web 服务器。Web 服务器上的副本具有不同的形式和视图，因为它们被调整为在 Web 浏览器上显示信息（据我了解）

我已经制作了主服务器上的应用程序的新副本，没有任何问题。我在将其复制到 Web 服务器时遇到了一些问题，因为我不明白那些未在 Web 服务器上的应用程序中使用的元素设计会发生什么。所以我所做的是将应用程序从主服务器复制到 Web 服务器，然后删除 Web 测试中的所有设计元素，然后将所有设计元素从生产环境复制到 Web 测试。

通过这样做，我能够进入登录页面然后登录。登录后，假设显示默认视图的框架集给出此错误消息“HTTP Web 服务器：找不到设计说明”。首先，我认为这是正常的，因为我在数据库中找不到视图，这让我感到困惑，因为实时系统在数据库中没有该视图的情况下工作，但是当我尝试访问我知道数据库中存在的视图时，我仍然得到同样的错误。

所以毕竟我在 Lotus Notes 客户端上打开了 Web 测试应用程序。我可以打开存在的视图。现在在这一点上，有两件事让我非常沮丧：

1.  即使代码特别提到了我无法从 Domino Designer 中找到的视图，实时系统也能正常工作。这没有任何意义
2.  作为测试，我在 Web 测试应用程序上创建了一个“测试”视图。基本上，我只是告诉它获取一个名为“WORec”的表单，其中包含工单信息。令我惊讶的是，该视图在 Web 浏览器上打开但没有显示任何结果，这让我更加沮丧，因为“WOByName”视图可以很好地获取所有工作订单。这两个视图具有相同的选择公式，所以我真的不明白为什么一个视图能够显示另一个视图不能显示的数据。此外，如果我告诉测试视图获取数据库中的所有文档，它只会获取那些不是“WORec”形式的文档

我知道这很长，但如果我能得到一些关于我在这里做错了什么的指示。我只是想创建一个测试环境。不幸的是，我从未处理过 Domino Web 应用程序或完全具有不同元素设计的复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:41:33.737

据我了解，您复制了数据库，然后删除了所有设计元素，并通过从生产 Web 副本复制来手动替换它们。相反，您应该从生产 Web 数据库制作模板（通过仅设计副本），然后您应该使用“替换设计”功能从该模板更新测试 Web 数据库。

顺便说一句：按照您描述的方式构建的应用程序（两个副本在不同的服务器上，每个副本都有一组不同的设计元素）是一个非常糟糕的实现。它可能在 Domino 的早期就完成了，那时“从 Notes 客户端隐藏”和“从 Web 隐藏”属性在设计元素级别可用。或者它可能是出于“安全目的”而故意进行的（我将其放在引号中是因为依靠 Domino 设计元素来强制 Domino Web 应用程序的安全性并不能真正使应用程序更加安全）。你可能会被这个困住......但你可能不会。因此，在您尝试改进或增强此应用程序之前，我认为您应该考虑在设计元素上使用“隐藏...”属性。

另一方面，如果您坚持当前的设计，我想提一下，您需要确保主副本和 Web 测试副本上的 ACL 设置和选择性复制设置与相应的生产副本。否则，当测试数据库跨服务器复制时，您最终会遇到混乱的设计元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:06:16.090

让我们从测试视图开始。

创建视图时，您需要首先验证它是公共视图。私人视图或首次使用时共享私人 (SPOFU) 视图不是您想要的。

此外，验证视图的名称和别名对于您的数据库是唯一的。

接下来，验证您的选择公式是否正确。

使用公式，而不是简单，这样您就可以实际看到公式。例如

SELECT @UpperCase(Form) = "WOREC"

刷新您的视图设计器 (F9) - 您看到您的记录通过了吗？

另外，请确保视图没有对 Web 客户端隐藏...当您查看视图列表时，您将在设计器客户端中看到这一点 - 一个指示它是否对 Web 客户端、便笺客户端、移动客户端隐藏的列， ETC。

如果没有，请打开其中一份文件。显示属性，验证框（第二个选项卡）中的表单属性，匹配值“WORec”。如果不是，请使用正确的表单名称拼写更正您的视图选择。

接下来，您需要确保允许您从网络上查看此内容。打开访问控制列表（ACL）并添加“匿名”作为读者或以上。

在 Designer 中打开视图，并在 Web 浏览器中预览。

至于“找不到设计说明”消息 - 这不好。你肯定缺少设计元素。这是由于选择性复制公式问题，还是 acl 问题，或其他原因，很难说。但是，如果您有一个 Notes 胖客户端和一个单独的 Web 版本，我会推荐不同的数据库（或主模板），而不是尝试使用选择性复制来处理这类事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:09:13.153

我建议您将 Web 服务器上的 Notes 数据库的新副本复制到测试服务器。尝试使用浏览器打开并检查一切是否正常。在设计器中打开此副本并检查它是否包含您之前在测试中没有看到的视图。

我不确定您是否真的有 2 种不同的设计（一种用于 webser 与您的主服务器不同），因此：
- 在主服务器上：打开此应用程序的文件/复制/选项。如果设计元素被选中，请在高级中选中当 Web 服务器从 .... 接收时。如果不是，那么有两个不同的设计版本是有道理的。

也许您没有找到的视图（在 Web 服务器上）限制了使用？要检查这一点：
- 在视图（在主服务器上）中，使用“所有读者及以上”键检查选项卡的属性。如果未选中，这就是它们在 Web 服务器上不存在并且您在设计器中看不到它们的原因：如果您没有角色或不是“可以使用此视图的人” “你不
要更正此问题，只需输入 ACL（文件/应用程序/访问控制）并授予您相应的角色。我希望我有所帮助

# android - 将 Proguard 应用于包含多个库项目的 Android 应用程序

> ID：10198051
> 
> 赞同：4
> 
> 时间：2012-04-17T19:44:57.907
> 
> 标签：android, proguard

我有一个 Android 应用程序，它有一个主 UI 应用程序项目、一个模型库和一个 UI 库项目。为这样的多项目结构设置 Proguard.cfg 的最佳方法是什么？例如，主 UI 应用程序项目是否需要具有适用于库项目的配置。每个库项目都需要自己的配置文件吗？我的应用程序将模型和 ui 项目包含为 jar 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:51:47.550

主应用程序配置很重要，您不需要为每个库项目设置 proguard 配置，尽管您应该将您的库引用为 Android 库而不是外部 jar

# c#-4.0 - System.ComponentModel.BindingList：Add(object) 与 AddNew()

> ID：10198052
> 
> 赞同：8
> 
> 时间：2012-04-17T19:45:02.717
> 
> 标签：c#-4.0, inotifypropertychanged, bindinglist, system.componentmodel

`System.ComponentModel.BindingList`方法`Add(object)`和有什么区别`AddNew()`？MSDN 文档是这样说的：

*   [`Add`](http://msdn.microsoft.com/en-us/library/ms132404.aspx): 将对象添加到`Collection<T>`.

*   [`AddNew`](http://msdn.microsoft.com/en-us/library/ms132687.aspx)：将新项目添加到集合中。

似乎这两种方法都将一个项目添加到集合中，但是`Add(object)`一次完成，而`AddNew()`稍微复杂一些。我的测试`Add(object)`似乎有效，但我想知道我是否使用了正确的方法。

那么这些方法有什么区别呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T19:49:03.807

`AddNew()`为您创建对象（这就是它没有参数的原因）。
它被设计为网格使用，它们不知道如何创建一个新对象来传递给`Add()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T17:12:33.293

当您实现 BindingList() 的派生类时，AddNew() 非常方便（这是众所周知的工厂设计模式）。

它允许您的代码使用取决于列表本身的值初始化新项目 - 例如，如果绑定列表包含子列表，则为父对象的外键。

# colors - 识别低色 jpeg 图像

> ID：10198055
> 
> 赞同：1
> 
> 时间：2012-04-17T19:45:11.467
> 
> 标签：colors, jpeg

从大量 jpeg 图像中，我想识别那些更有可能是简单徽标或文本（而不是相机图片）的图像。一个识别特征是低颜色计数。我希望大多数都是用绘图程序创建的。

如果 jpeg 图像有调色板，则很容易获得颜色计数。但我希望大多数文件都是 24 位彩色图像。图像大小没有限制。

我想我可以创建一个由 2^24 (16M) 个整数组成的数组，遍历每个像素并计算该 24 位颜色的计数。呸。然后我会计算非零条目。但是，如果 jpeg 压缩与原始颜色混淆，我最终可能会计算出很多独特的像素，这可能很难与照片区分开来。（也许我可以将每个像素转换为 YUV 颜色空间，并节省更少的计数。）

有更好的想法吗？图书馆建议？幽默的屈尊俯就？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:01:23.937

采样 10000 个随机坐标并制作直方图，然后分析直方图。

# php - Zend 框架：初始化会话（数据库）错误

> ID：10198065
> 
> 赞同：1
> 
> 时间：2012-04-17T19:45:52.250
> 
> 标签：php, zend-framework

> 致命错误：在 C:\wamp\www\hol\library\Zend\Db\Table\Abstract.php 的第 755 行 (!) Zend_Db_Table_Exception: No adapter found for Zend_Session_SaveHandler_DbTable 在 C:\wamp\www\hol\library\Zend\Db\Table\Abstract.php 中的第 755 行调用堆栈
> 
> # 时间记忆功能位置 1 0.0005 373664 {main}( ) ..\init.php:0
> 
> 2 0.0325 2749720 Zend_Session_SaveHandler_DbTable->__construct( ) ..\init.php:40 3 0.0325 2750168 Zend_Db_Table_Abstract->__construct( ) ..\DbTable.php:207 4 0.0325 2750480 Zend_Session_SaveHandler.\AbTable->tractset.php:)_SaveHandler.\AbTable 268 5 0.0325 2750480 Zend_Db_Table_Abstract->_setup( ) ..\DbTable.php:403 6 0.0325 2750480 Zend_Db_Table_Abstract->_setupDatabaseAdapter( ) ..\Abstract.php:739

代码：

```
//Configuration consumption
$config = new Zend_Config(require 'config.php');

//Database configuration
$db = Zend_Db::factory($config->database->adapter, array(
    'host'     => $config->database->params->host,
    'username' => $config->database->params->username,
    'password' => $config->database->params->password,
    'dbname'   => $config->database->params->dbname
));

$sess_config = array(
    'name'              => 'session',
    'primary'           => array(
        'session_id',
        'save_path',
        'name',
    ),
    'primaryAssignment' => array(
        'sessionId',
        'sessionSavePath',
        'sessionName',
    ),
    'modifiedColumn'    => 'modified',
    'dataColumn'        => 'session_data',
    'lifetimeColumn'    => 'lifetime',
);

Zend_Session::setSaveHandler(new Zend_Session_SaveHandler_DbTable($sess_config));

//Initialize the session
Zend_Session::start(); 
```

配置

```
<?php
// config.php
return array(
    'database' => array(
        'adapter' => 'Pdo_Mysql',
        'params'  => array(
            'host'     => 'localhost',
            'username' => 'root',
            'password' => '',
            'dbname'   => 'hol'
        )
    ),
    'session' => array(
        'name'              => 'session',
        'primary'           => array(
            'session_id',
            'save_path',
            'name',
        ),
        'primaryAssignment' => array(
            'sessionId',
            'sessionSavePath',
            'sessionName',
        ),
        'modifiedColumn'    => 'modified',
        'dataColumn'        => 'session_data',
        'lifetimeColumn'    => 'lifetime'
    )
); 
```

SQL：

```
CREATE TABLE `session` (
    `session_id` char(32) NOT NULL,
    `save_path` varchar(32) NOT NULL,
    `name` varchar(32) NOT NULL DEFAULT '',
    `modified` int,
    `lifetime` int,
    `session_data` text,
    PRIMARY KEY (`Session_ID`, `save_path`, `name`)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:51:49.417

您没有发布您的内容`config.php`，但基于错误我怀疑您没有指定适配器（mysql、pdo 等）。

我的配置文件看起来像（yaml）：

```
database:
  adapter: Pdo_Mysql
  params:
    host:     myhost
    dbname:   mydb
    username: myusername
    password: mypassword 
```

根据[Zend API docs](http://framework.zend.com/manual/en/zend.session.savehandler.dbtable.html)，您必须像这样指定适配器：

```
// Set this before you make the call to setSaveHandler()
Zend_Db_Table_Abstract::setDefaultAdapter($db);

Zend_Session::setSaveHandler(new Zend_Session_SaveHandler_DbTable($sess_config)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:13:23.140

您需要调用`Zend_Db_Table_Abstract::setDefaultAdapter($db)`提供`$db`您在配置示例中创建的对象，因为出现错误时您似乎没有设置默认数据库适配器，或者您需要将`$db`对象添加到`$sess_config`数组中以便将其设置为用于`Zend_Session`.

`Zend_Session_SaveHandler_DbTable`然后将扩展`Zend_Db_Table_Abstract`和任何未知的选项`Zend_Session_SaveHandler_DbTable`（例如数据库配置选项）传递给`Zend_Db_Table_Abstract`设置 DbTable 的构造函数。

试试这个：

```
$sess_config = array(
    'db'                => $db, // Pass the $db adapter as the 'db' parameter to Zend_Db_Table_Abstract
    'name'              => 'session',
    'primary'           => array(
        'session_id',
        'save_path',
        'name',
    ),
    'primaryAssignment' => array(
        'sessionId',
        'sessionSavePath',
        'sessionName',
    ),
    'modifiedColumn'    => 'modified',
    'dataColumn'        => 'session_data',
    'lifetimeColumn'    => 'lifetime',
); 
```

# html - Kohana 3.2 中 html 输出中的附加“<”(<) 字符

> ID：10198067
> 
> 赞同：1
> 
> 时间：2012-04-17T19:45:55.617
> 
> 标签：html, kohana, kohana-3.2

Kohana Framework 3.2 的响应输出有问题

也许这是一个已知问题，但我一直无法找到类似的问题或对此事的回应。

每当我向控制器发出请求时，我都会收到以下形式的响应：

```
$this->response->body($aView->render()); 
```

我在浏览器中收到响应，而且，在响应的开头出现了一个不需要的“<”字符。

对于简单的请求来说这不是问题，但是当我尝试发出 ajax 请求以接收 json 响应时，它会破坏代码流。

附加信息：在视图中，我使用元标记将字符集设置为“utf-8”。

谁能帮我？提前致谢

ps：对不起，如果它之前被质疑或出现在谷歌搜索中。也许我使用了错误的搜索关键字。

-------------------------有关问题的更多详细信息-------------------- ------------

为了展示这种行为的一个简单示例，我发布了控制器的代码、视图和当前显示我所问内容的意外响应。

首先，我有一个管理用户（创建、更新、删除）和登录/注销操作的用户控制器。例如，当我注册一个新用户时，我有一个接收用户名的方法，检查数据库中是否存在并返回给浏览器一个 json 回复，通知给定用户名的存在与否。

```
 <?php defined('SYSPATH') or die('No direct script access.');
  class Controller_User extends Controller {

  //additional code

  public function action_existsusername(){
      $username_candidate = $this->request->param("username",""); 

      $user = ORM::factory("user")->where("username","=",$username_candidate)->find();
      $reply = ($user->id) ? '{"reply":"true"}': '{"reply":"false"}' ;

      $this->response->body($reply);
  }

  //more code

} 
```

但是当我看到回复时，文字如下，

```
<{"reply":"false"} 
```

我永远不会在响应中添加小于字符的“<”。当我试图从 html 中的服务器获取部分视图时，也会出现这种行为（它总是在该字符的响应之前）。

在上面的示例中，我还尝试发送标头（在本例中为 application/json），但结果几乎相同。

希望它澄清一个答案，谢谢你的回答;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:22:41.730

您的一个 php 文件的开头可能有一个额外的 '<' 字符。尝试在文件中搜索“<<?php”或“<<?”。

# java - Ant 创建临时文件时出错

> ID：10198082
> 
> 赞同：0
> 
> 时间：2012-04-17T19:47:01.747
> 
> 标签：java, ant, build

由于这个错误，我目前正在与 ant 战斗几个小时

```
[javac] Compiling 124 source files to /home/prod/svn.build/path1/my_plugin/build

BUILD FAILED
/home/prod/svn.build/path1/my_plugin/build.xml:74: Error creating temporary file 
```

有问题的行是：

```
<javac fork="true" source="${javac.source}" target="${javac.target}" debug="${javac.debug}"     
            srcdir="${source.dir}"
            destdir="${build.dir}"
            classpathref="libraries" memoryinitialsize="256m" memorymaximumsize="256m">
    </javac> 
```

然而，这已经工作了一年，并且在我的本地环境中运行良好，但是当我在我们的开发服务器上运行它时它不起作用。请注意，我拥有对所有这些目录的管理员访问权限，因此这不应该是访问问题。

什么会导致构建文件远程归档而不是本地归档？像没有更多空间来构建课程那样真的很愚蠢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:27:16.797

它实际上是我们使用的服务器，我们重新启动了机器，现在一切都很好。

# hadoop - 简化用于聚合销售数据的级联管道

> ID：10198083
> 
> 赞同：0
> 
> 时间：2012-04-17T19:47:06.133
> 
> 标签：hadoop, cascading

我对 Cascading 和 Hadoop 都很陌生，所以要温柔... :-D

我想我发现自己过度设计了一些东西。基本上我的情况是我有一个带有 9 个字段的管道分隔文件。我想使用不同的分组计算这 9 个字段的一些汇总统计信息。结果应该是 10 个字段，其中只有 6 个是计数或总和。到目前为止，我最多有 4 个 Unique 管道、4 个 CountBy 管道、1 个 SumBy、1 个 GroupBy、1 个 Every、2 Each、5 个 CoGroups 和其他几个。我需要添加另一个小功能，我能看到的唯一方法是添加 2 个过滤器、2 个额外的 CoGroups 和 2 个额外的管道。这一切似乎只是为了计算一些汇总统计数据而过大。所以我想我真的误解了一些东西。

我的输入文件如下所示：

```
storeID | invoiceID | groupID | customerID | transaction date | quantity | price | item type | customer type 
```

对于库存、服务或组项目，项目类型为“I”、“S”或“G”，客户属于组。其余的应该是不言自明的

我想要的结果是：

```
project ID | storeID | year | month | unique invoices | unique groups | unique customers | customer visits | inventory type sales | service type sales | 
```

项目ID是一个常数，客户访问是客户在一个月中进来买东西的天数

我现在使用的设置使用 TextDelimited Tap 作为我的源来读取文件并将记录传递到每个管道，该管道使用 DateParser 来解析交易日期并添加年、月和日字段。到目前为止，一切都很好。这就是它失控的地方。

我将流从那里分成 5 个单独的流来处理我想要的每个聚合字段。然后我将所有结果连接到 5 个 CoGroup 管道中，通过 Insert 发送结果（插入项目 ID）并通过 TextDelimited sink Tap 写入。

有没有比这样分成 5 个流更简单的方法？前四个流在不同的字段上做几乎完全相同的事情。例如，第一个流使用 Unique 管道来获取唯一的 invoiceID，然后使用 CountBy 计算具有相同 storeID、年份和月份的记录数。这给了我按年和月为每个商店创建的唯一发票的数量。然后有一个流对 groupID 做同样的事情，另一个对 customerID 做同样的事情。

有什么简化这个的想法吗？必须有更简单的方法。

# php - SLIM 框架暂停调用

> ID：10198085
> 
> 赞同：0
> 
> 时间：2012-04-17T19:47:18.550
> 
> 标签：php, frameworks, execution, slim, halt

对 Slim Framework php 有疑问。

在我的应用程序中，如果条件不匹配，我想停止应用程序的执行。

根据 Slim 文档，有一个停止功能。但这似乎不起作用。即使在调用 Halt 之后，应用程序也会继续执行。

伪代码：

```
if ( $valid ) {
         // Do something
} else {
    $app->halt(500, "not valid");
}
// Other code here.

$app->run(); 
```

我期待着，我们调用 Halt 函数，“其他代码”不应该执行。但似乎并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T07:09:03.927

停止应该工作。正如 Josh 所提到的，它确实需要从路由回调中调用。例如，如果找不到指定的路由，我将以下内容用作自定义 404（在 index.php 中）。

```
 // not found (custom 404)
    $app->notFound(function () use ($app) {

            // build response
            $response = array(
                'type' => 'not_found',
                'message' => 'The requested resource does not exist.'
            );

            // output response
            $app->halt(404, json_encode($response));

    }); 
```

请注意使用 ($app) 的参考——更多信息可以在这里找到：[http ://www.slimframework.com/documentation/stable#scope-resolution](http://www.slimframework.com/documentation/stable#scope-resolution)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T01:33:02.630

Halt 只能在路由回调的上下文中调用。我建议您在官方 Slim Framework 支持论坛上提问：

[http://help.slimframework.com](http://help.slimframework.com)

最好的问候，乔希

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:48:38.037

您始终可以[`exit`](http://php.net/manual/en/function.exit.php)手动调用以停止脚本执行。

```
$app->halt(500, "not valid");
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T15:06:24.187

如果您在回调函数中，则可以使用 return

```
return $app->halt(500,"message"); 
```

或者

```
$app->stop(); 
```

停止功能后。

# android - 我应该使用 Timer、Handler 还是 ASyncTask？

> ID：10198086
> 
> 赞同：1
> 
> 时间：2012-04-17T19:47:18.767
> 
> 标签：android, multithreading, timer, android-asynctask, handler

我有一个线程需要每 1000 毫秒在后台运行一次。它无法在 UI 中运行，因为它会冻结应用程序。我应该使用什么方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:19:57.360

[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)似乎非常适合我。

# unit-testing - 在 CakePHP 中模拟控制器方法

> ID：10198090
> 
> 赞同：0
> 
> 时间：2012-04-17T19:47:33.833
> 
> 标签：unit-testing, cakephp, testing, mocking, cakephp-2.0

我在测试我的一种方法时遇到了麻烦，因为它使用了没有模型的供应商类。

好吧，问题是我希望该方法返回我想要的东西。有人告诉我，模拟一个方法是让它返回我想要的。

例如，当我调用“foo()”方法时，我希望它始终返回 true。

我该怎么做？在 CakePHP 食谱我可以找到这个：

```
$Posts = $this->generate('Posts', array(
    'methods' => array(
        'isAuthorized'
    ),
    'models' => array(
        'Post' => array('save')
    ),
    'components' => array(
        'RequestHandler' => array('isPut'),
        'Email' => array('send'),
        'Session'
    )
)); 
```

所以我想我应该使用第一个选项：方法但是......如何让它返回我想要的？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:48:05.807

请参阅我在这个问题中给你的答案：[我如何在 CakePHP2.0 上测试添加函数](https://stackoverflow.com/questions/10173506/how-can-i-test-an-add-function-on-cakephp2-0/10176298#10176298)

```
$Posts = $this->generate('Posts', array(
    'methods' => array(
        'isAuthorized'
    ),
    'models' => array(
        'Post' => array('save')
    ),
    'components' => array(
        'RequestHandler' => array('isPut'),
        'Email' => array('send'),
        'Session'
    )
));

// tell PHPUnit that `isAuthorized` should return true any time it's called
$Posts
  ->expects($this->any())
  ->method('isAuthorized')
  ->will($this->returnValue(true));
// tell PHPUnit to expect `isPut` once, and to return false
$Posts
  ->RequestHandler
  ->expects($this->once())
  ->method('isPut')
  ->will($this->returnValue(false)); 
```

有关模拟的更多信息：[http ://www.phpunit.de/manual/3.0/en/mock-objects.html](http://www.phpunit.de/manual/3.0/en/mock-objects.html)

# delphi - 在 Delphi 代码中使用 OnContactStatusChange 与 Microsoft Communicator 2007 交互

> ID：10198094
> 
> 赞同：2
> 
> 时间：2012-04-17T19:47:49.847
> 
> 标签：delphi, office-communicator, msn-messenger

这就是我想要做的。我希望在我的列表中的联系人在 Microsoft Communicator 2007 中更改状态时收到通知。我在 Windows 7 上运行 Delphi XE。

在我的表单创建中，我创建了通信器对象，并将我的联系人列表加载到 TListBox 中。我在 CommunicatorAPI_TLB 中看到，有一个方法叫做：

```
 DMessengerEvents = dispinterface
...
    procedure OnContactStatusChange (const pMContact: IDispatch; mStatus: MISTATUS); dispid 1030; 
```

我*想*这是我想要使用的。我将如何将其集成到我的代码中？

```
{ Create the communicator object, it's already up and running }
COMMUNICATOR := CoMessenger.Create;

{ Load my contacts into a listbox; do NOT use Hard Typecasts }
Contacts := COMMUNICATOR.MyContacts As IMessengerContacts;

For ContactIndex := 0 To (Contacts.Count - 1) Do Begin

  Application.ProcessMessages;

  Contact := (Contacts.Item (ContactIndex) As IMessengerContact);

  { Add the contact to the list }
  lstContacts.AddItem (Contact.FriendlyName, Nil);

 End; { For } 
```

# c# - WP7 - 忽略 ScrollViewer 内的列表框滚动

> ID：10198098
> 
> 赞同：1
> 
> 时间：2012-04-17T19:48:00.540
> 
> 标签：c#, windows-phone-7

在我的应用程序中，我有类似于此布局的内容

> 网格
> 
> > Grid 中的东西
> > Grid 中的东西
> > LongListSelector

现在有东西的 2 个网格占据了屏幕的大部分，所以 LongListSelector 只允许你一次滚动一个项目。

然后我修改了布局以包含一个滚动查看器

> 滚动查看器
> 
> > Grid
> > Grid 中的东西
> > Grid 中的东西
> > LongListSelector

显然，一旦您滚动到 LongListSelector，然后尝试滚动更多内容，您最终会在 LongListSelector 中滚动。无论如何我可以忽略 LongListSelector 中的滚动并且还可以调整列表框的大小以匹配其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:09:12.580

摆脱滚动查看器并按如下方式更改布局：

```
 <DataTemplate x:Key="ListHeader">
   ... your grids ....
   </DataTemplate>

   <toolkit:LongListSelector  
      ListHeaderTemplate="{StaticResource ListHeader}" > 
```

这会将网格添加到 顶部，`LongListSelector`如果我理解正确，这是您想要的功能。

# javascript - Intellisense for code editor on Mobile Devices

> ID：10198103
> 
> 赞同：1
> 
> 时间：2012-04-17T19:48:27.077
> 
> 标签：javascript, codemirror

I am developing a web based code editor using Code Mirror. This editor also supports intellisense using Control-Space keys.

I want this application to work on mobile devices too where Control-Space key combination is not available. So What would be the best approach that works both on PC as well as on mobile devices.

# search - 向没有 mySQL 数据库的简单网站添加搜索功能

> ID：10198111
> 
> 赞同：2
> 
> 时间：2012-04-17T19:48:58.160
> 
> 标签：search, solr, full-text-search, search-engine, google-custom-search

我有一个包含 100 多页左右的简单 HTML 网站。我想在顶部添加一个搜索栏，以便用户可以搜索该站点。我知道[Google 自定义搜索](http://www.google.com/cse/)，但除非您支付至少 100 美元，否则它会显示广告。显然，如果可能的话，我希望在我的网站上免费进行无广告搜索！

我也听说过 Lucene/Solr，但他们实际上并没有*抓取*该网站。为此，我显然需要 Nutch。

无论如何，我在 Microsoft IIS6 服务器上运行的站点，但我基本上不知道 Solr、Nutch 等如何在服务器上“安装”。

**另外：**我想指出我确实有该网站的本地副本。也许我可以在本地做一个很大的初始 nutch “爬行”，这将为 Solr 创建一个 .xml？这将帮助我“启动并运行”，但可能不是一个好的长期解决方案。

..所以我应该只使用 Google 自定义搜索吗？还是有一个实施起来不是非常痛苦的替代方案？脑子很疼人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:58:38.867

您没有提到要处理多少搜索请求，但如果您使用谷歌自定义搜索的[json-rest-api](https://developers.google.com/custom-search/v1/overview)，您每天可以免费获得 100 个搜索查询，并且您可以在页面上显示它们而无需任何广告。

可以在[此处](https://developers.google.com/custom-search/v1/using_rest)找到一个简单的示例请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T20:00:59.563

这是一种效果很好的简单方法，尽管您可能正在寻找更多的东西。

[http://sitecomber.com/getsitecomber/](http://sitecomber.com/getsitecomber/)

您可以在大约 2 分钟内创建代码以粘贴到您的网站。没有比这更容易的了。搜索由 Google 提供支持，但结果与您的网站隔离。

编辑：这不再有效。

# ruby-on-rails - RSpec can't find haml files

> ID：10198113
> 
> 赞同：1
> 
> 时间：2012-04-17T19:49:01.267
> 
> 标签：ruby-on-rails, rspec, haml

I'm writing a RoR app, and the automatically generated tests fail because of the following:

```
11) Sources GET /sources works! (now write some real specs)
     Failure/Error: get sources_path
     ActionView::MissingTemplate:
       Missing template sources/index, application/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "/Users/brian.hicks/Dropbox/code/incremental/incremental/app/views"
         * "/Users/brian.hicks/.rvm/gems/ruby-1.9.3-p125@incremental/gems/devise-2.0.4/app/views"
     # ./app/controllers/sources_controller.rb:11:in `index'
     # ./spec/requests/sources_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

I'm using the following in my Gemfile:

```
gem 'rails', '3.2.3'
gem 'haml-rails', '>= 0.3.4'
gem 'rspec-rail', '>= 2.8.1' 
```

Is there a specific config value I need to set somewhere to use the `:haml` handler as well as the rest of them?

By request, here's `Gemfile.lock`:

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.3)
      actionpack (= 3.2.3)
      mail (~> 2.4.4)
    actionpack (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
    activerecord (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
    activesupport (3.2.3)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.2.7)
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    bson (1.6.2)
    bson_ext (1.6.2)
      bson (~> 1.6.2)
    builder (3.0.0)
    cancan (1.6.7)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    childprocess (0.3.1)
      ffi (~> 1.0.6)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.1)
    daemons (1.1.8)
    database_cleaner (0.7.2)
    devise (2.0.4)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.0.3)
      railties (~> 3.1)
      warden (~> 1.1.1)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (0.12.10)
    execjs (1.3.0)
      multi_json (~> 1.0)
    factory_girl (3.1.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (3.1.0)
      factory_girl (~> 3.1.0)
      railties (>= 3.0.0)
    ffi (1.0.11)
    haml (3.1.4)
    haml-rails (0.3.4)
      actionpack (~> 3.0)
      activesupport (~> 3.0)
      haml (~> 3.0)
      railties (~> 3.0)
    heroku (2.24.1)
      launchy (>= 0.3.2)
      netrc (~> 0.7.1)
      rest-client (~> 1.6.1)
      rubyzip
    hike (1.2.1)
    i18n (0.6.0)
    journey (1.0.3)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.6.6)
    launchy (2.1.0)
      addressable (~> 2.2.6)
    libwebsocket (0.1.3)
      addressable
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.18)
    mongo (1.6.2)
      bson (~> 1.6.2)
    mongoid (2.4.8)
      activemodel (~> 3.1)
      mongo (~> 1.3)
      tzinfo (~> 0.3.22)
    mongoid-rspec (1.4.4)
      mongoid (~> 2.0)
      rspec (~> 2)
    multi_json (1.2.0)
    netrc (0.7.1)
    nokogiri (1.5.2)
    orm_adapter (0.0.7)
    polyglot (0.3.3)
    quiet_assets (1.0.0)
      rails (~> 3.1)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.3)
      actionmailer (= 3.2.3)
      actionpack (= 3.2.3)
      activerecord (= 3.2.3)
      activeresource (= 3.2.3)
      activesupport (= 3.2.3)
      bundler (~> 1.0)
      railties (= 3.2.3)
    railties (3.2.3)
      actionpack (= 3.2.3)
      activesupport (= 3.2.3)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec (2.9.0)
      rspec-core (~> 2.9.0)
      rspec-expectations (~> 2.9.0)
      rspec-mocks (~> 2.9.0)
    rspec-core (2.9.0)
    rspec-expectations (2.9.1)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.9.0)
    rspec-rails (2.9.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.9.0)
    rubyzip (0.9.7)
    sass (3.1.15)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.21.0)
      childprocess (>= 0.2.5)
      ffi (~> 1.0)
      libwebsocket (~> 0.1.3)
      multi_json (~> 1.0)
      rubyzip
    simple_form (2.0.1)
      actionpack (~> 3.0)
      activemodel (~> 3.0)
    sprockets (2.1.2)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thin (1.3.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.4)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    warden (1.1.1)
      rack (>= 1.0)
    xpath (0.1.4)
      nokogiri (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  bson_ext (>= 1.3.1)
  cancan
  capybara (>= 1.1.2)
  coffee-rails (~> 3.2.1)
  database_cleaner (>= 0.7.1)
  devise (>= 2.0.0)
  factory_girl_rails (>= 1.6.0)
  haml-rails (>= 0.3.4)
  heroku
  jquery-rails
  launchy (>= 2.0.5)
  mongoid (>= 2.4.3)
  mongoid-rspec (>= 1.4.4)
  quiet_assets
  rails (= 3.2.3)
  rspec-rails (>= 2.8.1)
  sass-rails (~> 3.2.3)
  simple_form
  thin
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:45:29.020

***更新：**我看到了一个类似的问题（我现在找不到：}），它建议添加文本*

```
require "haml" 
```

*到 config/test.rb 设置，这对我有用。所以我不再需要在部分或布局等引用中指定模板处理程序，一切正常。*

我在 Rails 3.2.2、Cucumber 1.10 和 rspec-rails 2.8.0 中遇到了同样的问题。

以下解决方法让我解决了这个问题：任何我引用基于 HAML 的部分的地方，我都使用模板的完全限定名称。例如，为了在我的站点的管理部分引用我的管理布局，我输入了“layout admin.html.haml”而不是“layout admin”。同样对于部分，我使用了我的 haml 文件的全名，而不仅仅是没有任何后缀的名称，这让 RSpec 和我的测试很开心，

现在，我*不应该*这样做，并且我意识到在模板名称中传递模板处理程序已（或将要）弃用[在这里](http://grokbase.com/t/gg/rubyonrails-talk/121fjdnjvm/rails-deprecation-warning-passing-a-template-handler-in-the-template-name-is-deprecated-rspec-haml)，但这确实解除了我的测试并在生产中工作，直到我找到正确的解决方案。

我以前从未在引用中指定模板处理程序，我猜这与我在创建网站后向我的网站添加 HAML 支持这一事实有关，但我还没有找到我的配置设置我猜我失踪了。

祝你好运！迈克尔

# c# - How to find the longest substring by order of frequency?

> ID：10198121
> 
> 赞同：3
> 
> 时间：2012-04-17T19:49:31.103
> 
> 标签：c#

This is best described with an example. Given the paragraph:

`The longest string in this paragraph is not the shortest string in the paragraph because it is the longest string in the paragraph`

I want to list the order of matching sub-strings first by frequency and then by length, so in this case, it should list (non case-sensitive)

*   `The longest string in`
*   `the paragraph`
*   `is not the shortest string in`
*   `because`
*   `it is`
*   `this`

The above lists the substrings by the order of frequency they occur, followed by length, so `The longest string in` is repeated twice and is the longest substring. `is not the shortest string in` is longer than `the paragraph`, but `the paragraph` is repeated twice, so it is listed first.

Update(based on observation by AlexC and MattBurland):

Even if a sub-string such as the space character or `in` occur more than other substrings, they should not be listed if they are already included in a substring that is longer than their occurrence * length. For example, `in` occurs 3 times which is 6 characters in length (9 including spaces at the end), but since 9 characters is shorter than `the paragraph`, it is not listed. I hope this makes sense?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:19:30.500

是的，就像其他人说的那样，如果您从提供的示例中提取子字符串并修剪空格，您将得到一个字符串数组，如下所示：

string[] myArray = {"the" , "longest", .... 等

现在，你可以做的是循环到数组中删除相似的字符串，同时增加它们的出现。然后，您将此信息添加到列表中。

然后你再次循环以按长度排序。但是，最后，列表中的字符串不能是单词的组合，除非输入字符串被其他东西分隔，而不是像 $ 符号这样的空格。

“$本段$中最长的字符串不是$本段$中最短的字符串，因为它是$本段中最长的字符串”

如果是这种情况，您只需执行与上述完全相同的过程，但用 $ 符号而不是空格分隔子字符串。

# c - cant get EOF to exit a do while loop, with getchar()

> ID：10198124
> 
> 赞同：0
> 
> 时间：2012-04-17T19:49:37.263
> 
> 标签：c

I have this code

whitespaces is a type int, so I can use the getchar function

```
do
{

 ...code...

whitespaces=getchar();}
while ( whitespaces != (EOF) || whitespaces!='\n'); 
```

but it doesnt exit the loop when i hit CTRL+Z (i am using windows 7)

what am I doing wrong?

EDIT : thank you, all of you...! very helpful

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T19:51:23.147

You must use `&&` instead of `||` in the `while` condition.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:51:54.197

Your condition is incorrect:

```
while ( whitespaces != (EOF) && whitespaces!='\n'); 
```

A \n will automatically be different than EOF and vice-versa.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:52:23.347

Try changing the `||` to `&&`. Right now, if `whitespaces` is equal to `EOF`, it's not a newline, so the while condition is always true. This is presumably not what you want.

# wso2 - wso2 身份服务器 您的帐户未激活

> ID：10198125
> 
> 赞同：1
> 
> 时间：2012-04-17T19:49:39.313
> 
> 标签：wso2, wso2is

我正在向 Identity Server 添加测试用户。我无法使用他们登录，因为我在状态日志中收到错误

您的帐户未激活

如何激活这些虚拟账户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:57:18.200

添加用户并将用户角色（管理员/每个人或自定义角色）分配给创建的用户。为用户角色提供必要的**权限。**

你用的是独立的 IS 吗？你能给出重现问题的确切步骤吗？

谢谢

蒂利尼

# c++ - 删除链表中的节点

> ID：10198129
> 
> 赞同：1
> 
> 时间：2012-04-17T19:49:58.703
> 
> 标签：c++, data-structures

这是我删除具有参数中传递的值的所有节点的代码。

```
typedef struct nodetype
{
    int data;
    struct nodetype * next;
} node;

typedef node * list;

void Linklist::deleteNode(list * head, int value)
{

    list current = *head;
    list previous = *head;
    while(current != NULL)
    {
        if(current->data != value)
        {
              previous = current;
              current = current->next;
        }

        else if (current->data == value)
        {
            previous->next = current->next;
            delete current;
            current = previous->next;

        }
    }
} 
```

但是在这里，如果链接列表中的所有元素都是 2，那么它应该删除链接列表中的所有元素，最后 head 也应该变为 NULL，这样如果我通过这个 head 来计算列表中的节点数，它应该说列表为空等类似操作。

根据我目前的实现，对于上述情况，头部不会变为 NULL。

请提出修改建议，如果链接列表的所有节点在函数参数中传递的值相同，则 head 应变为 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:14:50.457

我现在修改了我的代码及其工作文件

```
void Linklist::deleteNode(list *head, int value)
{

    list * current = head;
    list * previous = head;
    bool flag = false;
    while(*current != NULL)
    {
        if((*current)->data != value)
        {
            *previous = *current;
            *current = (*current)->next;
        }

        else if ((*current)->data == value)
        {
            flag = true;
            (*previous)->next = (*current)->next;
            delete *current;
            *current = (*previous)->next;

        }
    }
    if(!flag)
        cout<<"Element not found in the linklist\n";
    cout<<"Count is "<<Linklist::count(*head)<<endl;
} 
```

# f# - 何时需要调用“ConvertToGenerated”成员以使用类型提供程序生成类型

> ID：10198132
> 
> 赞同：6
> 
> 时间：2012-04-17T19:50:04.457
> 
> 标签：f#, type-providers

我很难解读[Type Provider Tutorial](http://msdn.microsoft.com/en-us/library/hh361034%28v=VS.110%29.aspx)的“提供生成的类型”部分。本教程提供了以下规范。

“您还必须在根提供的类型上调用 ConvertToGenerated，其嵌套类型形成一组封闭的生成类型。此调用将给定的提供的类型定义及其嵌套类型定义发送到程序集中，并调整所有提供的类型定义的 Assembly 属性以返回“

我不知道在哪里放置 ConvertToGenerated 调用，我不确定程序集文件名参数的要求。有人可以提供一个例子吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T01:15:08.687

在 F# 团队的帮助下，我解决了我的问题。这就是我所做的。

```
namespace Types

open System
open System.Data
open System.IO
open System.Linq
open System.Data.Linq
open Microsoft.FSharp.Data.TypeProviders
open Microsoft.FSharp.Linq
open Microsoft.FSharp.TypeProvider.Emit
open Microsoft.FSharp.Core.CompilerServices

type DatabaseSchema = 
    SqlDataConnection<"Data Source=(local);Initial Catalog=Test;Integrated Security=SSPI;">

[<TypeProvider>] 
type public MeasureTypeProvider(cfg:TypeProviderConfig) as this = 
inherit TypeProviderForNamespaces()

let assembly = System.Reflection.Assembly.GetExecutingAssembly()
let typesNamespace = "Types.Domain"
let providedTypeBuilder = ProvidedTypeBuilder.Default
let db = DatabaseSchema.GetDataContext()

let types =
    query { for m in db.Table do select m }
    |> Seq.map(fun dataEntity ->
                    let className:string = dataEntity.Identifier
                    let providedTypeDefinition =
                            ProvidedTypeDefinition(className = className,
                                                   baseType = Some typeof<obj>,
                                                   IsErased=false)
                    providedTypeDefinition.AddMember(
                                ProvidedConstructor([], InvokeCode = fun [] -> <@@ obj() @@>))
                    providedTypeDefinition
               ) |> Seq.toList

let rootType =
    let providedTypeDefinition = 
           ProvidedTypeDefinition(assembly, 
                                  typeNamespace, 
                                  "DomainTypes", 
                                  Some typeof<obj>, 
                                  IsErased=false)
    providedTypeDefinition.AddMembersDelayed(fun () -> types)
    this.AddNamespace(typesNamespace, [providedTypeDefinition])
    providedTypeDefinition

let path = Path.GetDirectoryName(assembly.Location) + @"\GeneratedTypes.dll"
do rootMeasureType.ConvertToGenerated(path)

[<assembly:TypeProviderAssembly>] 
do() 
```

TypeProvider.Emit 框架会自动清理生成的程序集。如果您希望它保留下来，请注释掉以下语句。

```
File.Delete assemblyFileName 
```

我发现的另一个问题是，虽然当 IsErased=true 时我能够提供从值类型（如十进制）派生的类型，但当 IsErased=false 时我无法提供这些派生类型。这是因为值类型是密封的，因此不可能生成从值类型派生的“真实”类型。

# tomcat - 生成功能密钥库 Tomcat 7.0, Windows 7

> ID：10198133
> 
> 赞同：1
> 
> 时间：2012-04-17T19:50:07.927
> 
> 标签：tomcat, ssl, port

我已经阅读了许多关于堆栈溢出的先前帖子，但我仍然无法弄清楚这一点。

我使用安装程序在 Windows 7 上安装了 Tomcat 7.0，并想更改端口 8443

到 443，但在此之前，我从我之前在这个论坛上的问题中了解到，我

需要设置证书以使端口 8443 工作，然后再考虑将其更改为

端口 443。

这个分步指南[http://www.mulesoft.com/tomcat-ssl](http://www.mulesoft.com/tomcat-ssl)应该足够了，但我是

我对这个 %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA 真的很困惑

当我说“系统找不到路径”时需要将其输入“cmd”，所以我

试过

%JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA \ -keystore /path/to/my/keystore(Windows)

%JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA \ -keystore /Program Files/Apache Software Foundation/Tomcat 7.0/conf

仍然没有运气。

我的电脑上有 java 1.7 64bit

这真的是我第一次配置Tomcat，感谢理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:21:13.337

提供的这个答案是配置 Tomcat 7 的 server.xml 文件时可能出现的众多问题之一。

答案特定于使用 Windows 7、JDK 1.7、64 位

为了成功生成密钥库，请在 Java 的 bin 文件夹中找到 JDK 的 keytool 的路径，通过终端到达该点，然后输入

\keytool -genkey -alias -keyalg RSA -keystore C:\MyCert.cert

C:\MyCert.cert 是一个示例，您可能希望将证书存储在硬盘中的其他位置

点击进入并继续

# jquery - cakephp 2 ajax 表单

> ID：10198137
> 
> 赞同：4
> 
> 时间：2012-04-17T19:50:24.120
> 
> 标签：jquery, cakephp, cakephp-2.x

我在 cakephp 2 中构建 ajax 表单时遇到了麻烦，这显然自 1.3 以来发生了很大变化。

我正在使用以下代码：

```
<div id="commentForm">
<div id="commentStatus"></div>
<?php
echo $this->Form->create('Comment', array('action' => 'save', 'default' => false));
echo $this->Form->input('Comment.comments_name');
echo $this->Form->input('Comment.comments_email');
echo $this->Form->input('Comment.comments_text');
echo $this->Js->submit('Save', array('update' => '#commentStatus'));
echo $this->Form->end();
?> 
```

但是，按下按钮时不会提交表单。

我会感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T05:55:47.443

在你的视图文件中试试这个：

```
<?php

    $data = $this->Js->get('#CommentSaveForm')->serializeForm(array('isForm' => true, 'inline' => true));
    $this->Js->get('#CommentSaveForm')->event(
          'submit',
          $this->Js->request(
            array('action' => 'save'),
            array(
                    'update' => '#commentStatus',
                    'data' => $data,
                    'async' => true,    
                    'dataExpression'=>true,
                    'method' => 'POST'
                )
            )
        );
    echo $this->Form->create('Comment', array('action' => 'save', 'default' => false));
    echo $this->Form->input('Comment.comments_name');
    echo $this->Form->input('Comment.comments_email');
    echo $this->Form->input('Comment.comments_text');
    echo $this->Form->end(__('Submit'));
    echo $this->Js->writeBuffer();

?> 
```

**注意：** `#CommentSaveForm`是 CakePHP 生成的 ID，如果您有自己的，请使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T09:20:01.790

您要显示加载图像，请在以下位置使用“之前”和“完成” `$this->Js->request()`：

```
<?php
    $this->Js->request(array('action' => 'save'), array(
       'update' => '#commentStatus',
       'data' => $data,
       'async' => true,    
       'dataExpression' => true,
       'method' => 'POST',
       'before' => "$('#loading').fadeIn();",
       'complete' => "$('#loading').fadeOut();",
   ));
?> 
```

# visual-studio-2010 - 解决方案中的 IIS 快速开关关闭/打开站点？

> ID：10198139
> 
> 赞同：0
> 
> 时间：2012-04-17T19:50:30.830
> 
> 标签：visual-studio-2010, iis-express

我的解决方案（visual studio 2010）中有多个项目（站点）。

当我在调试模式下运行我的项目时，它会运行解决方案中的所有站点。

有时我只需要两个或三个站点。

我如何在 IISExpress 中打开/关闭站点，以避免不必要的负载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:34:37.940

最好的方法是从解决方案中卸载该项目。那么它将不会在 IISExpress 中运行

# ruby-on-rails - win7 上的@import 'bootstrap' 错误，显示 500 错误

> ID：10198141
> 
> 赞同：7
> 
> 时间：2012-04-17T19:50:34.820
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

我正在构建一个简单的 Rails 应用程序，当我加载主页时，我得到：

```
    在 59 毫秒内完成 500 内部服务器错误
    ActionView::Template::Error（不同的前缀：“c:/”和
    “D:/workspaceRor/jrpappthree/ssets/stylesheets”
    （在 D:/workspaceRor/jrpappthree/app/assets/stylesheets/custom.css.scss））：

```

```
2: <html>
3:   <head>
4:     <title><%= full_title(yield(:title)) %></title>
5:     <%= stylesheet_link_tag    "application", media: "all" %>
6:     <%= javascript_include_tag "application" %>
7:     <%= csrf_meta_tags %>
8:     <%= render 'layouts/shim' %> 
```

我的宝石文件

```
gem 'rails'
gem 'bootstrap-sass'
gem 'bcrypt-ruby'
gem 'faker'
gem 'will_paginate'
gem 'bootstrap-will_paginate'
gem 'pg'
group :development, :test do
gem 'mysql2'
gem 'annotate'
end
# Gems used only for assets and not required
# in production environments by default.
group :assets do

gem 'sass-rails'
gem 'coffee-rails'
gem 'uglifier'
gem 'railties'
end
gem 'jquery-rails'
group :test do

end

group :production do
#  gem 'pg'
end 
```

在 D:/workspaceRor/jrpappthree/app/assets/stylesheets/custom.css.scss

```
@import "bootstrap";

body {
   padding-top: 60px;
}
.
.
. 
```

在开发环境中，它显示上述错误，但在生产中它工作正常。我什至试过

```
# config/environments/production.rb
...
config.assets.compile = true
... 
```

但它没有解决我的问题。那么在开发环境中运行应用程序的解决方案是什么。成功地？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T20:07:34.930

看起来这是 Windows 上 bootstrap.sass gem 中的一个错误。

我见过人们将项目移动到 C 驱动器，然后它开始工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T18:54:23.680

另一种解决方案是创建一个从 C: 驱动器到 D: 驱动器的连接点（如硬链接，但适用于目录），并在 C: 驱动器上的链接目录中运行 rails 服务器。AFAIK 命令因操作系统版本而异，但在 Vista 上有效：

`mklink /J c:\<linkdir> d:\<targetdir>`

我相信有一个名为“Junction”的应用程序可用于较旧的操作系统版本在线。在我的系统上，我将应用程序保存在 U 盘上，这样我就可以在台式机和笔记本电脑系统之间轻松移动它，因此不想将它移动到 C:。该应用程序称为“订单”，因此我执行了：

`mklink /J c:\ordersapp d:\sites\orders`

然后运行 ​​rails 服务器：

`c:\> cd \ordersapp`

`c:\ordersapp> rails s`

一切正常。代码现在似乎在 c: 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T01:58:24.337

这实际上是 Rails 中的一个问题 - 请参阅：[https ://github.com/rails/rails/issues/660](https://github.com/rails/rails/issues/660)

# oracle - 连接嵌套表和普通表以获取结果

> ID：10198142
> 
> 赞同：1
> 
> 时间：2012-04-17T19:50:43.573
> 
> 标签：oracle, join, plsql, oracle11gr2, nested-table

我有一个普通表`temp`和一个嵌套表`temp_nt`

```
Temp
-------------
 ID    Status
-------------
 1     open
 2     close
 3     open
 4     open
 5     close
--------------- 
```

假设我的嵌套表有`ID, X`

可以说嵌套表中的数据就像

```
temp_nt(1).ID=1 temp_nt(1).X='ANC'
temp_nt(2).ID=2 temp_nt(2).X='pqr'
temp_nt(3).ID=3 temp_nt(3).X='ANCF'
temp_nt(4).ID=4 temp_nt(4).X='ANCF' 
```

是否可以同时加入两者以获得如下数据，

```
 Status   COUNT
 -----------------------
    open     3
    close    1
 ----------------------- 
```

由于`ID=5`不存在于嵌套表中，因此它被排除在计数之外

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:03:21.983

这将有助于准确定义您正在使用的对象......

您有一个包含 5 行数据的表

```
SQL> create table foo(
  2    id number,
  3    status varchar2(10)
  4  );

Table created.

SQL> insert into foo values( 1, 'open' );

1 row created.

SQL> insert into foo values( 2, 'close' );

1 row created.

SQL> insert into foo values( 3, 'open' );

1 row created.

SQL> insert into foo values( 4, 'open' );

1 row created.

SQL> insert into foo values( 5, 'close' );

1 row created. 
```

但是你的嵌套表是如何定义的呢？它是在 SQL 还是 PL/SQL 中定义的？您使用的是 SQL 还是 PL/SQL 中的对象？

如果你已经在 SQL 中定义了嵌套表

```
SQL> create type foo_obj is object (
  2    id number,
  3    status varchar2(10)
  4  );
  5  /

Type created.

SQL> create type foo_nt
  2      as table of foo_obj;
  3  /

Type created. 
```

并且您正在使用 PL/SQL 中的嵌套表，您可以使用`TABLE`运算符

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_foos foo_nt := new foo_nt();
  3  begin
  4    l_foos.extend(4);
  5    l_foos(1) := new foo_obj( 1, 'ANC' );
  6    l_foos(2) := new foo_obj( 2, 'pqr' );
  7    l_foos(3) := new foo_obj( 3, 'ANCF' );
  8    l_foos(4) := new foo_obj( 4, 'ANCF' );
  9    for x in (select t.status, count(*) cnt
 10                from foo t,
 11                     table( l_foos ) l
 12               where t.id = l.id
 13               group by t.status)
 14    loop
 15      dbms_output.put_line( x.status || ' ' || x.cnt );
 16    end loop;
 17* end;
SQL> /
close 1
open 3

PL/SQL procedure successfully completed. 
```

那是你要找的吗？或者你有不同的设置？

如果您在 PL/SQL 中定义本地集合，您将无法在 SQL 语句中使用该集合，因为 SQL 引擎无法访问有关集合类型的任何信息。如果你想在 SQL 中使用集合，那么在 SQL 中定义集合会更有意义。

# android - Android httpclient 请求和实体处理

> ID：10198151
> 
> 赞同：0
> 
> 时间：2012-04-17T19:51:24.540
> 
> 标签：android, google-maps, httpclient

我向我的 servlet 发出请求

```
尝试 {
                Log.d(Constants.DEBUG_TAG_MAPS, "try");

                HttpEntity 实体 = 新 StringEntity(json);
                post.setEntity(实体);

                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, 15000);
                HttpConnectionParams.setSoTimeout(httpParameters, 150000);

                httpclient = new DefaultHttpClient(httpParameters);
                BasicHttpResponse response = (BasicHttpResponse) httpclient.execute(post);
                Log.d(Constants.DEBUG_TAG_MAPS, "http 状态码："+response.getStatusLine().getStatusCode());
                if(response.getStatusLine().getStatusCode() == 200){
                    Log.d(Constants.DEBUG_TAG_MAPS, "响应 200");
                    HttpEntity responseEntity = response.getEntity();
                    if (responseEntity!= null) {
                        Gson g = 新 Gson();

                        InputStream 是 = responseEntity.getContent();
                        InputStreamReader isr = new InputStreamReader(is);
                        BufferedReader reader = new BufferedReader(isr);

                        尝试{
                            responseEntity.getContent();
                            字符串 x = EntityUtils.toString(responseEntity);
                        }catch（异常 e）{
                            // TODO: 处理异常
                        }

                        responseJSONObject = g.fromJson(reader, JSONResponseObject.class);
                        Log.d(Constants.DEBUG_TAG_MAPS_console, responseJSONObject.toString());
                        reader.close();
                        System.gc();    
                    }

                }   

            } 捕捉（异常 e）{
                e.printStackTrace();
            }

/代码>
```

并在线：

InputStream 是 = responseEntity.getContent();

应用程序崩溃...响应代码为 200 ...我查看了我的 tomcat 日志，一切正常。JSONResponseObject 填充了值并发送。

可能是什么问题呢？我怎样才能让堆栈跟踪到 logcat？

一个可能相关的问题：我很清楚 logcat 中的“无法连接工厂客户端”任何可能导致该问题的事情都不是我的情况

1.  api 密钥正确，正确 debug.keystore 的路径
2.  清单中的所有权限
3.  uses-library android:name="com.google.android.maps 在清单中也是如此

地图显示正确，缩放/移动时刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:39:41.670

使用 google.gson.annotations 对 json 对象进行注释而不是仅实现可序列化后，问题得以解决。

# jquery - 如何在页面加载从底部开始然后自动滚动到顶部？

> ID：10198152
> 
> 赞同：0
> 
> 时间：2012-04-17T19:51:30.923
> 
> 标签：jquery, html, scroll, scrolltop

我正在使用 DIV 标签而不是 iFrames FYI。我想向访问者展示所有可用的内容。我发现这段代码会在页面加载时自动滚动到底部，然后再回到顶部。但我希望它从底部开始，然后滚动到顶部。这是我找到的代码：

```
(function($){
    $.fn.downAndUp = function(time, repeat){
        var elem = this;
        (function dap(){
            elem.animate({scrollTop:elem.outerHeight()}, time, function(){
                elem.animate({scrollTop:0}, time, function(){
                    if(--repeat) dap();
                });
            });
        })();
    }
})(jQuery);
$("html").downAndUp(1000, 2) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:36:54.640

这适用于自动滚动到顶部..

```
$(document).ready(function() {   
    // Goes to the bottom onLoad
    $(document).scrollTop($(document).height());    

    // This animates you back to the top    
    $('body, html').animate({scrollTop:0}, 'slow');    
});​ 
```

如果您想在事件后滚动，请使用以下内容替换该行`$('body, html')`：

```
$('someElement').click(function{
    $('body, html').animate({scrollTop:0}, 'slow'); 
}); 
```

**编辑**我的 jsFiddle 示例：http: [//jsfiddle.net/NxFaR/2/](http://jsfiddle.net/NxFaR/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-08T08:04:49.893

```
function pageScroll() {

    window.scrollBy(0, 1); // horizontal and vertical scroll increments
    scrolldelay = setTimeout('pageScroll()', 10); // scrolls every 100 milliseconds

    window.onbeforeunload = function () {
        window.scrollTo(0, 0);
    }       

 }

function stopScroll() {
    clearTimeout(scrolldelay);
} 
```

# php - 获取 + 4 天至今

> ID：10198153
> 
> 赞同：1
> 
> 时间：2012-04-17T19:51:34.907
> 
> 标签：php, date

我的日期格式如下：

```
$datum = date("d.m.Y", strtotime(osC_DateTime::getShort($this->_order->getInvoiceDate()))); 
```

它显示：15.04.2012 我怎样才能到达那里 + 4 天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:55:40.787

这是正确的

```
$date = osC_DateTime::getShort($this->_order->getInvoiceDate());

$datum = date("d.m.Y", strtotime("$date + 4 day")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:56:08.530

```
$newdate = date("d.m.Y", strtotime ( '+4 day' , strtotime ( $datum ) )) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:54:22.883

```
$shortDate = osC_DateTime::getShort($this->_order->getInvoiceDate());

$datum = date("d.m.Y", strtotime($shortDate +4 day)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T19:56:33.023

您可以简单地将秒数添加到生成的时间戳。

```
$timestamp = strtotime(osC_DateTime::getShort($this->_order->getInvoiceDate()));
$datum = date("d.m.Y", $timestamp + 4 * 24 * 60 * 60); // add 4 days 
```

# multithreading - 从主进程获取句柄

> ID：10198158
> 
> 赞同：0
> 
> 时间：2012-04-17T19:51:50.440
> 
> 标签：multithreading, delphi, process

> **可能重复：**
> [确定当前app的父进程](https://stackoverflow.com/questions/1857037/determine-the-parent-process-of-the-current-app)

我想获取进程的 MainProcess 句柄或 PID。例如，谷歌浏览器会为每个选项卡删除另一个进程，这些进程实际上是线程。在 ProcessExplorer 中，它在树视图中将 chrome.exe 显示为主进程及其下方的线程。如何检查或获取 MainProcess 句柄/PID？类似于 WindowsAPI 的东西？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:02:56.527

@RRUZ 已经在 Stack Overflow 上回答了一个[几乎相同的问题。](https://stackoverflow.com/questions/1857037/determine-the-parent-process-of-the-current-app)但是，那里的代码不正确，因为它将进程 ID 声明为`THandle`. 以下更正了我发现的错误，并且还调整了例程以返回 PID 而不是文件名：

```
uses
  Windows,
  tlhelp32,
  SysUtils;

function GetParentPid: DWORD;
var
  HandleSnapShot: THandle;
  EntryParentProc: TProcessEntry32;
  CurrentProcessId: DWORD;
  HandleParentProc: THandle;
  ParentProcessId: DWORD;
begin
  Result := 0;
  HandleSnapShot := CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);   //enumerate the process
  if HandleSnapShot<>INVALID_HANDLE_VALUE then
  begin
    EntryParentProc.dwSize := SizeOf(EntryParentProc);
    if Process32First(HandleSnapShot, EntryParentProc) then    //find the first process
    begin
      CurrentProcessId := GetCurrentProcessId; //get the id of the current process
      repeat
        if EntryParentProc.th32ProcessID=CurrentProcessId then
        begin
          ParentProcessId := EntryParentProc.th32ParentProcessID; //get the id of the parent process
          HandleParentProc := OpenProcess(PROCESS_QUERY_INFORMATION or PROCESS_VM_READ, False, ParentProcessId);
          if HandleParentProc<>0 then
          begin
            Result := ParentProcessId;
            CloseHandle(HandleParentProc);
          end;
          break;
        end;
      until not Process32Next(HandleSnapShot, EntryParentProc);
    end;
    CloseHandle(HandleSnapShot);
  end;
end; 
```

我知道这是一个重复的问题，但这里的代码正是 OP 想要的，所以我至少让它可见一段时间。

# java - Java 计时器问题可能涉及将它们存储在列表中

> ID：10198159
> 
> 赞同：1
> 
> 时间：2012-04-17T19:51:53.770
> 
> 标签：java, multithreading, list, memory-management

因此，我将尝试尽可能笼统地讨论我的程序的细节，同时仍能理解一般要点。我有两个重要的对象，JobManager 和 JobWorkers。JobWorker 有一个任务，它应该以固定的时间间隔执行，直到完成。我会忽略工作完成后会发生什么，因为它们永远不会开始。我看到 JobManager 的计时器正在启动，但 JobWorker 计时器没有启动。下面是一些伪代码，可帮助您了解情况。

```
public class JobWorker
{
    private String jobName;
    private Timer timer;
    private Calendar startTime;

    public JobWorker(String jobName, Calendar startTime, otherFields)
    {
        this.jobName = jobName;
        this.startTime = startTime;
        this.timer = new Timer("EmailJob" + jobName + "-timer");
        //set other fields
    }

    public void start()
    {
        timer.schedule(new TimerTask(){

            public void run()
            {
                //Do stuff - this is where nothing is happening
            }

        }, 0, 60000);
    }

    //Equals method and other stuff
}

public class JobManager
{
    private List<JobWorker> activeWorkers = new ArrayList<JobWorker>();
    private List<JobWorker> pausedWorkers = new ArrayList<JobWorker>();

    private Timer timer;

    public JobManager()
    {
        //loads workers from database

        timer = new Timer("JobManager-timer");

        loadJobs();

        timer.schedule(new TimerTask(){

            public void run()
            {
                //I see this statement every minute as expected
                logger.info("EmailJobManager timer run started.");

                for(JobWorker worker : pausedWorkers)
                {
                    Calendar c = new GregorianCalendar();

                    //I can see worker.getStartTime() in client gui so I know that they have already passed
                    if(c.compareTo(worker.getStartTime()) > 0)
                    {
                        //Never see these log statements
                        logger.info("Memory Address in manager timer loop 2 for " + worker.getEmailJobName() + " ({})", worker.toString());

                        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yy - HH:mm");

                        logger.info("Comparing current time ({}) to JobWorker " + worker.getJobName() + " start time ({})", sdf.format(c.getTime()), sdf.format(worker.getStartDate()));

                        activeWorkers.add(worker);
                        pausedWorkers.remove(worker);
                        worker.start();
                    }
                }
            }

        }, 0, 60000);
    }

    public void addWorker(necessary fields)
    {
        //Create JobWorker newWorker = new JobWorker(jobName, blah blah)
        pausedWorkers.add(newWorker);
    }   

    /**
     * Checks to see if any jobs were not completed as expected due to hardware error. Recreates the EmailJob and EmailJobWorker responsible.
     */
    private void loadJobs()
    {
        String SQL = "SELECT * FROM email_jobs";

        List<Map<String, Object>> rows = jt.queryForList(SQL);

        for(Map<String, Object> row : rows)
        {
            JobWorker worker = new JobWorker(stuff it needs from SQL);

            //I see these debug statements
            logger.info("Worker " + worker.getJobName() + " has been added to pausedWorkers list with memory address ({})", worker.toString());
            pausedWorkers.add(worker);

            logger.info("Job " + jobName + " loaded sucessfully.");
        }
} 
```

我将继续放入更多调试语句，即打印出 JobWorker 内存地址（本质上是 Object.toString），看看它们的深/浅副本是否有什么奇怪的地方。有任何想法吗？

编辑：好的，我对正在发生的事情完全不知所措。所以这是完整的课程。

[http://ideone.com/hR7et](http://ideone.com/hR7et)

里面没有敏感的东西，所以不用担心。

这是我的日志输出：

```
2012-04-17 16:34:18,548 INFO [http-bio-8081-exec-97] c.c.e.EmailJobWorker [EmailJobWorker.java:98] EmailJobWorker test was created sucessfully. (batchSize, timeInterval, currentId, startTime) (1, 5, 1, 04/17/12 - 15:15)
2012-04-17 16:34:18,552 INFO [http-bio-8081-exec-97] c.c.e.EmailJobManager [EmailJobManager.java:297] Worker test has been added to pausedWorkers list with memory address (EmailJobWorker@7e7df7d)
2012-04-17 16:34:18,552 INFO [http-bio-8081-exec-97] c.c.e.EmailJobManager [EmailJobManager.java:301] EmailJob test loaded sucessfully.
2012-04-17 16:34:18,557 INFO [http-bio-8081-exec-97] c.c.e.EmailJobWorker [EmailJobWorker.java:98] EmailJobWorker test2 was created sucessfully. (batchSize, timeInterval, currentId, startTime) (1, 5, 1, 04/17/12 - 15:15)
2012-04-17 16:34:18,558 INFO [http-bio-8081-exec-97] c.c.e.EmailJobManager [EmailJobManager.java:297] Worker test2 has been added to pausedWorkers list with memory address (EmailJobWorker@349be26c)
2012-04-17 16:34:18,558 INFO [http-bio-8081-exec-97] c.c.e.EmailJobManager [EmailJobManager.java:301] EmailJob test2 loaded sucessfully.
2012-04-17 16:34:18,558 INFO [http-bio-8081-exec-97] c.c.e.EmailJobManager [EmailJobManager.java:117] EmailJobManager timer started sucesfully. (sleepTime) (1)
2012-04-17 16:34:18,559 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:74] EmailJobManager timer run started.
2012-04-17 16:34:18,561 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:85] Size of pausedWorkers: 2
2012-04-17 16:34:18,561 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:89] Memory Address in manager timer loop 2 for test (EmailJobWorker@7e7df7d)
2012-04-17 16:34:19,501 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:34:31,984 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:34:34,562 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:35:04,840 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:35:19,501 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:35:31,984 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:35:34,562 INFO [EmailJobManager] c.c.e.EmailJobManager [EmailJobManager.java:75] EmailJobManager timer run started.
2012-04-17 16:36:04,840 INFO [EmailJobManager] c.c.e.EmailJobManager 
```

正如您所看到的，即使 EmailJobManager 只创建一次，并且 JobWorkers 的计时器从未设置过，计时器也不会每分钟都关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:06:19.400

> 我看到 JobManager 的计时器正在启动，但 JobWorker 计时器没有启动。

你在打电话`JobWorker.start`吗？您需要包含更多代码，以便我们可以看到发生了什么。这些`run`方法没有理由不应该执行：http: [//ideone.com/uEer3](http://ideone.com/uEer3)

瞬态仅与序列化有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:10:21.990

所以它最终成为我的 timertasks 运行方法中的错误。由于它们是匿名的，因此错误确实导致了 main 方法的中断，并且默默地失败了。

# ruby-on-rails - 正则表达式替换时区偏移

> ID：10198164
> 
> 赞同：2
> 
> 时间：2012-04-17T19:52:05.850
> 
> 标签：ruby-on-rails, ruby, regex

我有一个字符串表示日期/时间和时区。我想将时区部分更改为 UTC，即`+00:00`

请帮助我编写正则表达式以匹配`+05:30`等`-03:30`并将其替换为`+00:00`

我试过 `"2012-04-17T15:40+05:30".gsub!(/\+\d\d:\d\d/, '+00:00')`which 给了我预期的结果，但我不知道如何匹配`-5:30`

如果有人帮助我编写适用于两者的正则表达式，我将不胜`2012-04-17T15:40+05:30`感激`2012-04-17T15:40-05:30`

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T19:56:06.187

```
"2012-04-17T15:40+05:30".gsub!(/[+-]\d\d:\d\d/, '+00:00') 
```

将替换正偏移和负偏移。但为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:56:15.593

怎么样简单：

```
str = "2012-04-17T15:40+05:30"
str.sub!(/.{6}\z/, '+00:00') # => "2012-04-17T15:40+00:00" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:57:42.627

将您的正则表达式更改为

```
/(\+|\-)\d\d:\d\d/ 
```

# c# - usercontrol 在父级中查找按钮控件

> ID：10198167
> 
> 赞同：1
> 
> 时间：2012-04-17T19:52:21.033
> 
> 标签：c#, asp.net, user-controls, parent-child

我有一个位于另一个用户控件内的用户控件，我想做的是在某个进程运行后找到父控件中的按钮控件并运行 OnClick 事件。

用户控件 1

```
protected void btnReload_Click(object sender, EventArgs e)
{
    //reloads data
} 
```

用户控件 2（嵌入在用户控件 1 中）

```
protected void btnSave_Click(object sender, EventArgs e)
{
    Button btnReload = (Button)Parent.FindControl("btnReload");
    //here fire the btnReload onclick even
} 
```

如果这不是我接受建议的最佳方式，因为我已经到了把头发拉出来的地步。我这样做的原因是因为我有 8 个页面都需要创建一个新用户，所以我想为此使用 1 个用户控件，但重新加载他们所在的页面并创建新用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:54:30.807

不要那样做。
UserControl 应该是一个独立的块，不需要了解其周围环境。

相反，在您的 UserControl 中创建一个事件并在父页面中处理它。您可以将单击处理程序移动到单独的方法，并从按钮单击事件和新的自定义事件中调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:57:18.477

有两种方法可以做到：

**1\. 在服务器端。**

你试图做的是架构方面的错误，孩子不应该试图在父母身上找到控制权，父母也不应该。所以子控件可以有一个自定义事件，父控件可以注册到它，您可以在子控件的按钮单击事件上触发该事件。

这是一篇让您入门的文章： http: [//codebetter.com/brendantompkins/2004/10/06/easily-raise-events-from-asp-net-ascx-user-controls/](http://codebetter.com/brendantompkins/2004/10/06/easily-raise-events-from-asp-net-ascx-user-controls/)

此处也对此进行了讨论：[您如何确定何时单击父级上的子级中的按钮-ASP.NET](https://stackoverflow.com/questions/448363/how-do-you-determine-when-a-button-is-clicked-in-the-child-on-the-parent-asp-n)

**2.客户端：**

使用 JQuery，您可以捕获子控件的按钮单击事件，并从那里触发父按钮的单击。您可以使用隐藏变量共享父按钮的 ID。

# c# - 通过 WPF 命令模式启用提交/取消按钮

> ID：10198171
> 
> 赞同：2
> 
> 时间：2012-04-17T19:52:28.083
> 
> 标签：c#, wpf, mvvm

我的视图包含以下 2 个按钮：

```
<StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Button Content="Start" Width="100" Height="30" Margin="20" Command="{Binding OkCommand}"/>
        <Button Content="Cancel" Width="100" Height="30" Margin="20" Command="{Binding CancelCommand}"/>
 </StackPanel> 
```

在我的虚拟机中 - 我有命令拦截设置。

```
class StockViewModel
{
    #region Properties
    public ICommand OkCommand { get; set; }
    public ICommand CancelCommand { get; set; }
    #endregion

#region Constructor
    public StockViewModel()
    {
        OkCommand = new myCommand(myOkExecute, myCanOkExecute);
        CancelCommand = new myCommand(myCancelExecute, myCanCancelExecute);
    }
    #endregion

    private void myOkExecute (object parameter)
    {
       ......
    }

    private bool myCanOkExecute(object parameter)
    {
       ........
    }

    private bool myCanCancelExecute(object parameter)
    {
      .......
    }

    private myCanCancelExecute(object parameter)
    {
     ............
    }
    #endregion

   public class myCommand : ICommand
   {

   } 
```

问题：我希望按钮的行为是 opp - 这意味着当一个被单击（提交）时，另一个应该被禁用，反之亦然。首次加载表单时 - 默认情况下启用提交 btn。

我尝试了多种方法-但似乎无法使其正常工作。

我在这里做的是简单的 MVVM 代码——没有棱镜/事件聚合器的概念。

人们可以推荐（带有代码示例）通常如何处理这种命令行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:27:47.803

```
 private bool IsOkToExecute
    {
        get { return _isOkToExecute; }
        set
        {
            _isOkToExecute = value;
            RaisePropertyChanged("IsOkToExecute");
        }
    }

     private void myOkExecute (object parameter)
     {
        IsOkToExecute = false;
     }

    private void myCancelExecute(object parameter)
     {
         IsOkToExecute = true;
     }

private bool myCanOkExecute(object parameter)
{
    return IsOkToExecute;
}

private bool myCanCancelExecute(object parameter)
{
    return !IsOkToExecute;
} 
```

# resharper - Resharper 能否生成 MSpec HTML 报告以及实时 Visual Studio 测试结果？

> ID：10198177
> 
> 赞同：2
> 
> 时间：2012-04-17T19:52:47.523
> 
> 标签：resharper, mspec

我想在 ReSharper 测试结果窗口和自定义格式的 MSpec HTML 报告中获得实时结果。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:58:22.847

不直接，但您可以将单元测试会话运行结果导出到 HTML：

![在此处输入图像描述](../Images/0e23dbfd0d7985976c5375d675d1bf63.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T22:20:40.830

首先，gorohoroh 的回答是正确的（我以同样的方式回答了类似的问题）。但是，听起来您有一个流程，您希望或必须将最后完成的测试结果交付给 QA 团队。而且你想给他们花哨的 MSpec 报告（我也是那个的粉丝）。

为什么不设置一个持续集成服务器来运行构建和测试并使用`mspec.exe`带有 HTML 报告选项 ( `--html`) 的本机？

然后，QA 也不依赖于您个人工作站上构建的结果，而是依赖于代码库的签入版本。

# mysql - 试图使用 CASE 的结果作为 Inner Join 的标准，我做错了什么？

> ID：10198181
> 
> 赞同：2
> 
> 时间：2012-04-17T19:53:20.640
> 
> 标签：mysql, inner-join

我正在做一个项目，我需要根据给定行的内容对两列之一进行表连接。基本上，给定一个特定的用户名，我想获得他们正在玩的所有游戏中所有对手的信息。我在这里使用的两个表是 GameSession 和 Users。GameSession 对每个玩家（Player1 和 Player2）都有一个列，它们是 Users 表列 Username 中的外键，其中还包含一个 Rank 列。这是我的选择声明：

```
SELECT CASE WHEN GameSession.Player1 = 'BOB' THEN GameSession.Player2
            ELSE GameSession.Player1
            END AS Opponent, Users.Rank 
FROM GameSession
            INNER JOIN Users
            ON Users.Username=Opponent
WHERE GameSession.Player1 = 'BOB' OR GameSession.Player2 = 'BOB' 
```

我在这里使用 BOB 作为一次性价值。

我通过 phpMyAdmin 得到的 SQL 错误是我正在测试的地方，如下所示：

```
#1054 - Unknown column 'Opponent' in 'on clause' 
```

我相当有信心我的逻辑是正确的，但我非常有时间找到有关适用于我的情况的语法的任何信息。如果有人能帮我一把，我会非常感激，我已经为此苦苦思索了好几个小时。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:56:08.140

您将需要复制整个表达式：

```
FROM GameSession
        INNER JOIN Users
        ON Users.Username=
            CASE WHEN GameSession.Player1 = 'BOB' THEN GameSession.Player2
            ELSE GameSession.Player1
            END 
```

# email - 从电子邮件自动填充表单？

> ID：10198183
> 
> 赞同：1
> 
> 时间：2012-04-17T19:53:27.627
> 
> 标签：email, autocomplete

您能否在电子邮件中有一个链接，将用户带到一个表单，然后用用户的电子邮件地址填充“电子邮件”的输入字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:56:48.763

是的你可以。

您需要在链接上有一个 get 参数。例如，如果您在表单上有一个文本框，其 id 或 name 参数为“email”，您的链接应如下所示：

```
http://example.com/page.html?email=[replaceWithEmailAddress] 
```

对于多个参数：

```
http://example.com/page.html?email=[replaceWithEmailAddress]&otherId=[replaceWithValue] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:56:15.497

准备电子邮件时，将电子邮件地址嵌入到 URL 中。因此，它成为[GET 请求](http://en.wikipedia.org/wiki/GET_%28HTTP%29#Request_methods)的一部分。

# c# - 将子记录保存到数据库时出现问题

> ID：10198193
> 
> 赞同：0
> 
> 时间：2012-04-17T19:54:30.123
> 
> 标签：c#, ado.net, bindingsource, master-detail

乍一看，我意识到这个问题已经被问过很多次了——我想我已经阅读/搜索了很多——我已经非常努力地检查了我发现的每一个建议——

也许我只是需要另一双眼睛？

问题是这样的：我有一个主表和两个详细表。它们在我的数据源中的定义与在数据库中的定义完全相同，具有相同的关系和键/FK 字段/类型。

我可以手动将数据输入表中，并在查询时得到预期的结果（左连接等）。此外，我可以在应用程序中正确查看记录 - 加入正确的父记录。

但是，这些表/BindingSources 中只有一个工作正常。我已经看过我知道的所有地方，但看不出有什么不同？

BargeDetails 表格绑定源完美运行。ShiftDeadTime 不会将记录保存/插入到数据库中。

我检查了 bindingsource.count = 1，并且底层 bindingsource.current 具有预期值。

SQL 跟踪显示没有尝试插入/更新。

我正在使用 Visual Studio 2010、ADO.NET、.NET 4 和 WinForms 以及 SQL Server 2008。数据源是经过设计的，而不是使用设计器先编写代码。我将详细绑定源更改为指向正确的数据源/数据成员=FK ...

在我的 _Load() 中 - 我的 ta.fill() 的顺序看似正确；

```
 private void frmShiftReport_Load(object sender, EventArgs e)
    {
         this.shiftsTableAdapter.Fill(this.dsShiftReport.Shifts);
        this.shiftDeadTimeTableAdapter.Fill(this.dsShiftReport.ShiftDeadTime);            
        this.bargeDetailTableAdapter.Fill(this.dsShiftReport.BargeDetail);

        this.vw_BargeLookupTableAdapter.Fill(this.dsShiftReport.vw_BargeLookup);
        this.vw_CommodityLookupTableAdapter.Fill(this.dsShiftReport.vw_CommodityLookup);
    } 
```

绑定源似乎设置相同；

shiftDeadTimeBindingSource

```
 datasource =    shiftsBindingSource1
 datamember =    FK_ShiftDeadTime_Shifts 
```

bargeDetailBindingSource

```
datasource =     shiftsBindingSource1
datamember =     FK_BargeDetail_Shifts 
```

dgShiftDeadTime

```
datasource = shiftDeadTimeBindingSource 
```

在我的点击/保存事件中，看起来我有正确/相似的 EndEdit()s 和 UpdateAll();

```
 // barge details
    private void shiftsBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {
        this.Validate();
        this.shiftsBindingSource1.EndEdit();
        this.bargeDetailBindingSource.EndEdit();

        this.tableAdapterManager.UpdateAll(this.dsShiftReport);
    }

    // shiftDeadTime
    private void toolStripButton8_Click(object sender, EventArgs e)
    {
        this.Validate();
        this.shiftsBindingSource1.EndEdit();
        this.shiftDeadTimeBindingSource.EndEdit();

        this.tableAdapterManager.UpdateAll(this.dsShiftReport);
    } 
```

最后，在 datasource.designer.cs - 两个关系/约束似乎设置相同；

```
fkc = new global::System.Data.ForeignKeyConstraint("FK_BargeDetail_Shifts", new global::System.Data.DataColumn[] {
                    this.tableShifts.IDColumn}, new global::System.Data.DataColumn[] {
                    this.tableBargeDetail.ShiftIDColumn});
    this.tableBargeDetail.Constraints.Add(fkc);
    fkc.AcceptRejectRule = global::System.Data.AcceptRejectRule.None;
    fkc.DeleteRule = global::System.Data.Rule.Cascade;
    fkc.UpdateRule = global::System.Data.Rule.Cascade;

    fkc = new global::System.Data.ForeignKeyConstraint("FK_ShiftDeadTime_Shifts", new global::System.Data.DataColumn[] {
                    this.tableShifts.IDColumn}, new global::System.Data.DataColumn[] {
                    this.tableShiftDeadTime.ShiftIDColumn});
    this.tableShiftDeadTime.Constraints.Add(fkc);
    fkc.AcceptRejectRule = global::System.Data.AcceptRejectRule.None;
    fkc.DeleteRule = global::System.Data.Rule.Cascade;
    fkc.UpdateRule = global::System.Data.Rule.Cascade;

    this.relationFK_BargeDetail_Shifts = new global::System.Data.DataRelation("FK_BargeDetail_Shifts", new global::System.Data.DataColumn[] {
                    this.tableShifts.IDColumn}, new global::System.Data.DataColumn[] {
                    this.tableBargeDetail.ShiftIDColumn}, false);
    this.Relations.Add(this.relationFK_BargeDetail_Shifts);

    this.relationFK_ShiftDeadTime_Shifts = new global::System.Data.DataRelation("FK_ShiftDeadTime_Shifts", new global::System.Data.DataColumn[] {
                    this.tableShifts.IDColumn}, new global::System.Data.DataColumn[] {
                    this.tableShiftDeadTime.ShiftIDColumn}, false);
    this.Relations.Add(this.relationFK_ShiftDeadTime_Shifts); 
```

这真让我抓狂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:27:56.720

在这种情况下我建议做什么：通过调用检查您的更改是否出现在 DataSet 中

```
this.dsShiftReport.GetChanges(); 
```

这样您就会知道更改是否至少反映在 DataSet 中。

我假设您的表单上有某种 DataGridView 控件，并将您的表绑定到 DataGridView。我可能是错的（我有一段时间没有使用 WinForms 和 DataSets）但是如果您在点击“保存”按钮之前点击“输入”和/或尝试移动到 DataGridView 中的另一行 - 只是想知道您的在这种情况下，数据将被保存。

# algorithm - 节点图中随机路径的快速稳定算法是什么？

> ID：10198198
> 
> 赞同：7
> 
> 时间：2012-04-17T19:55:03.197
> 
> 标签：algorithm, search, graph, pseudocode, path-finding

我有一个由节点组成的图，我需要一个快速算法来生成两个节点之间的随机路径。我为此从头开始设计了几种算法，但似乎无法做到正确。

要么算法陷入循环，要么当我记录访问过的节点时，它有时会卡在访问过的节点之间。我遇到的另一个问题是我的算法在性能上太不稳定了。

*所以我的问题是；有谁知道无向图中两个可达节点之间随机路径的快速稳定算法？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:00:38.757

让您的图表成为`G=(V,E)`. 创建这样的子`U`集。`V``U = { u | there is a path from u to the target }`

*   请注意，找到这个子集`U`很容易 - 并且可以在目标的反向边缘上使用[DFS](http://en.wikipedia.org/wiki/Depth-first_search)或[BFS在线性时间内完成。](http://en.wikipedia.org/wiki/Breadth-first_search)

使用这个子集，创建一个上面定义的图`G'=(U,E')`和`U`[`E' = E [intersection] UxU`相同的边，但仅应用于`U`] 中的顶点。

运行随机（随机选择下一个要探索的顶点）[DFS](http://en.wikipedia.org/wiki/Depth-first_search)，`G'`直到到达目标。

*   注意 - 想法是找到一条路径 - 不一定简单，因此您不应该维护一个`visited`集合。
*   您可能会添加一个“中断规则”，如果您达到一定深度，您将寻找目标 - 非随机的，以避免循环中的无限循环。
*   性能预计会发生变化，因为它与找到的路径的长度呈线性关系，可能非常长或非常短......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:30:53.877

如果我正确理解了您的问题，则您正在尝试生成[统一的生成树](http://weblog.jamisbuck.org/2011/1/20/maze-generation-wilson-s-algorithm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:02:27.823

这取决于你的意思*random*。如果您不在乎它的含义，您是否尝试过[蒙特卡罗方法？](http://en.wikipedia.org/wiki/Monte_Carlo_method)

假设目标完全可以到达，并且您有一个无向图，我在黑暗的伪代码中疯狂地刺伤。

```
1\. *s* <- start node
2\. Choose a random neighbor of *s*, call that neighbor *n*.
3\. Add the edge from *s* to *n* to the path.
4\. Set *s* <- *n*.
5\. Go to 2, unless you've reached the target. 
```

[amit](https://stackoverflow.com/a/10198252/52573)的注意事项也在这里：

*   您可能会添加一个“中断规则”，如果您达到一定深度，您将寻找目标 - 非随机的，以避免循环中的无限循环。
*   性能预计会发生变化，因为它与找到的路径的长度呈线性关系，可能非常长或非常短......

# javascript - JavaScript 向表添加不同的行 -addRow 函数

> ID：10198202
> 
> 赞同：0
> 
> 时间：2012-04-17T19:55:10.973
> 
> 标签：javascript

我重新使用了一个常见的 addRow 函数，但是我的基本 js 技能限制了我对代码进行重大更改。

这个优雅的功能有效，但是我希望新行中的所有元素与前一行具有不同的名称。朋友提议使用

```
var new_name = old_name.replace(rowCount, rowCount+1); //by using a counter 
```

，所以在下面的示例中，让新创建的行包含元素“username_2”和“email_2”

谢谢！

```
<INPUT TYPE="text" NAME="username_1"> : name <BR>
<INPUT TYPE="text" NAME="email_1"> : email <BR> 
```

```
function addRow(tableID) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);
    var colCount = table.rows[0].cells.length;

    for(var i=0; i<colCount; i++) {
        var newcell = row.insertCell(i);
        newcell.innerHTML = table.rows[0].cells[i].innerHTML;
        //alert(newcell.childNodes);
        switch(newcell.childNodes[0].type) {
            case "text":
                    newcell.childNodes[0].value = "";
                    break;
            case "checkbox":
                    newcell.childNodes[0].checked = false;
                    break;
            case "select-one":
                    newcell.childNodes[0].selectedIndex = 0;
                    break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:29:52.743

要使新创建的行具有元素“username_2”和“email_2”，您需要用以下代码替换现有函数。

```
function addRow(tableID) 
{  
   var table = document.getElementById(tableID);  
   var rowCount = table.rows.length; 
   var row = table.insertRow(rowCount);  
   var colCount = table.rows[0].cells.length;  
   for(var i=0; i<colCount; i++) 
   {  
       var newcell = row.insertCell(i);  
       //alert(newcell.childNodes); 
       newcell.innerHTML = table.rows[0].cells[i].innerHTML; 
       if(newcell.childNodes[0]!=null && newcell.childNodes[0].name != null)
       {
           var oldName =newcell.childNodes[0].name;
           var newName = getNewName(oldName,rowCount+1 );
           newcell.innerHTML = replaceAll(newcell.innerHTML,oldName, newName);
       }

       switch(newcell.childNodes[0].type) { 
         case "text": 
            newcell.childNodes[0].value = ""; 
            break; 
         case "checkbox": 
            newcell.childNodes[0].checked = false; 
            break; 
         case "select-one": 
            newcell.childNodes[0].selectedIndex = 0; 
            break; 
      } 
   } 
}

 function replaceAll(inputString, regExpr, newString)
 {
    var outputStr = "";
    var pivot;
    while(inputString.indexOf(regExpr) != - 1)
    {
        inputString = inputString.replace(regExpr,newString);
        pivot = inputString.indexOf(newString) + newString.length;
        outputStr = outputStr + inputString.substring(0, pivot) ;
        inputString = inputString.substring(pivot,inputString.length);
    }
    outputStr = outputStr + inputString;
    return outputStr;
 }

 function getNewName(oldName,rowIndex )
 {
      var arr = oldName.split('_');
      arr[arr.length - 1] = rowIndex;
      var str = "";
      for (arrIndex = 0; arrIndex < arr.length; arrIndex++)
      {
           str += arr[arrIndex];
           if (arrIndex != arr.length - 1)
           {
                 str += "_";
           }
      }
      return str;
 } 
```

# c# - 调用位于 MainPage 中的方法时，资源字典引发异常

> ID：10198209
> 
> 赞同：0
> 
> 时间：2012-04-17T19:55:47.780
> 
> 标签：c#, windows-phone-7, xaml, resourcedictionary

在 windows phone 7.1 项目中：

我的资源字典如下所示：

```
 <DataTemplate x:Name="ItemsTemplate">
            ...
            <StackPanel VerticalAlignment="Top"
                        ManipulationStarted="ManipulationStarted" 
                        ManipulationCompleted="ManipulationCompleted">
                <TextBlock Text="{Binding ItemDescription}" FontSize="32" Foreground="#FF3B3B3B"  Margin="5,0,0,0" FontWeight="Bold" />
                <TextBlock Text="{Binding List.ListName}" FontSize="20" Foreground="DarkMagenta" Margin="5,0,0,0" FontWeight="Bold"/>
            </StackPanel>
        </StackPanel>
    </DataTemplate> 
```

ManipulationStarted() 和 ManipulationCompleted() 函数位于 MainPage.xaml.cs 中，通过 MainPage.xaml 使用以下代码引用 DataTemplate：

```
<toolkit:LongListSelector x:Name="ListSelector" 
     ItemTemplate="{StaticResource ItemsTemplate}" 
     ItemsSource="{Binding Items}">
</toolkit:LongListSelector> 
```

当我尝试在列表中添加项目时，我得到了一个例外。

如果我将 DataTemplate 放在 MainPage.xaml 中，一切正常。

我知道问题是函数引用，但我想首先知道为什么无法通过资源字典找到函数，以及是否有适当的方法来做到这一点或通过任何技巧来克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:40:38.053

问题是事件接线。应用程序级别没有相应的事件处理程序，但我猜在页面级别有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:12:56.583

你不应该使用`x:Key`而不是`x:Name`on`DataTemplate`吗？

# vba - 在 MSFT Word 中创建目录时保留超链接

> ID：10198221
> 
> 赞同：0
> 
> 时间：2012-04-17T19:56:21.170
> 
> 标签：vba, ms-word

我有一个文档，它是每日新闻文章的集合。每篇文章的标题都指向一个超链接（文章的来源）。有没有办法以指向标题的超链接而不是文章本身的方式组装目录？目前它是手动完成的，真的很乏味，我真的很想自动化它并让它更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:22:35.190

几点注意事项：

```
Sub CreateList()
Dim hyp As Hyperlink

For Each hyp In ActiveDocument.Hyperlinks
    s = s & hyp.TextToDisplay
    s = s & vbTab & hyp.Address
    s = s & vbTab & hyp.Range.Information(wdActiveEndPageNumber)
    s = s & vbCrLf
Next
    ''Debug.Print s
    ActiveDocument.Range(Start:=0, End:=0).InsertBefore s
End Sub 
```

更多信息可能会提供更详细的答复。

重新评论

```
Dim hyp As Hyperlink
Dim r As Range
Dim doc As Document
Dim cont As Document

Set doc = Word.Documents("MyDocument.doc")
Set cont = Word.Documents.Add

Set r = cont.Range(Start:=0, End:=0)

For Each hyp In doc.Hyperlinks
    r.Hyperlinks.Add r, hyp.Address, hyp.SubAddress, hyp.ScreenTip, hyp.TextToDisplay, hyp.Target
    Set r = cont.Range(cont.Content.End - 1)
    r.InsertAfter vbTab & hyp.Range.Information(wdActiveEndPageNumber) & vbCrLf
    Set r = cont.Range(cont.Content.End - 1)
Next 
```

# c# - 在 html 锚点的属性后面插入 asp.net 代码

> ID：10198223
> 
> 赞同：2
> 
> 时间：2012-04-17T19:56:35.450
> 
> 标签：c#, asp.net, html

我在 asp.net 控件中有某些元素：

```
<a href="#" title="" style="background-image: url('../i/foo/image.png')"> 
```

但我希望从控件 c# 属性设置背景图像字段

我在这里有什么选择？

基本上我想添加类似的东西：

```
<% if (!string.IsNullOrWhiteSpace(BackgroundImageUrl)) {
    { %>
    <a href="#" title="" style="background-image: <%= item.BackgroundImageUrl%>">
<% } %> 
```

但我不确定`<%= item.BackgroundImageUrl%>`在 style 属性中是否正确转义。什么是正确的转义模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:00:47.133

要使 HTML 元素在服务器端可编程且可访问，请添加`runat="server"`. 另外，确保`<form>`标签也有`runat="server"`. 例子：

```
<a href="#" id="some_id" runat="server" title="" style="background-image: url('../i/foo/image.png')"> 
```

在服务器端执行：

```
some_id.Style.Add("background-color", "red"); 
```

有关详细信息，请参阅此[网站](http://msdn.microsoft.com/en-us/library/7a9d6h4f.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:01:49.637

只是猜测..

```
<% if (!string.IsNullOrWhiteSpace(BackgroundImageUrl)) {
    { %>
    <a href="#" title="">Text</a>
<% } %> 
```

在你的风格部分..

```
<style type="text/css"> 
    .selector { background-image:<%= item.BackgroundImageUrl %> }
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:04:00.913

尝试这个：

```
<% if (!string.IsNullOrWhiteSpace(BackgroundImageUrl)) { Response.Write("<a href=\"\" title=\"\" style=\"background-image: url('" + item.BackgroundImageUrl + "')\">"); } %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-21T01:14:42.083

类似的问题不同的答案。首先我的在一张桌子上，所以：

```
tr1 = New TableRow
thIn = New TableHeaderCell
thIn.CssClass = "Label"
Dim Anchor As New HtmlAnchor
Anchor.HRef = "PrintForm.aspx?iAuto=" & CStr(rsRCData("ID"))
Anchor.InnerHtml = "<img src='images/PrintButton.png' border='0' />"
Anchor.Target = "_blank"
thIn.Controls.Add(Anchor)
tr1.Cells.Add(thIn)
tbl1.Rows.Add(tr1) 
```

为我工作。

# asp.net-mvc-3 - 带有确认对话框的 MVC3 Actionlink

> ID：10198226
> 
> 赞同：13
> 
> 时间：2012-04-17T19:57:05.310
> 
> 标签：asp.net-mvc-3, confirmation

我可以显示一个确认消息`ActionLink`吗？

我需要使用javascript吗？没有它有可能吗？

你能给我举个例子吗？

谢谢你。

```
//I want to make a confirmation message appear before the link opens.
@Html.ActionLink("Checkout and view order list", "Order", "Order") 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-17T20:03:05.073

使用重载`Html.ActionLink(string linkText, string actionName, string controllerName, object RouteValues, object HtmlAttributes)`和一些 javascript，您可以执行以下操作：

```
@Html.ActionLink("Checkout and view order list", "Order", "Order", null, new { onclick="return confirm('Are you sure you want to click this link?')" }) 
```

这将添加 HTML 属性 onclick，该属性将在单击链接时执行指定的 javascript。如果链接（或表单的提交按钮）上的 onclick 事件返回 false，则操作（跟随链接，发布表单）不会发生。该`confirm(message)`函数向用户显示带有指定消息的确认对话框，并根据用户的响应返回真或假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:59:08.437

**编辑**：不要使用这个答案，使用 Jim 的另一个答案。

您将无法使用`ActionLink`- 您必须编写一些 JavaScript（例如[此处](http://www.tizag.com/javascriptT/javascriptconfirm.php)列出的）才能弹出确认。您可以使用`Url.Action`生成 javascript 最终将用于 post 或 get 端点的 URL。

我的 javascript 很糟糕，但我认为这可以理解：

```
<a href="javascript:confirmation();">Checkout and view order list</a>

<script>
function confirmation() {
 var answer = confirm("Confirm?")
 if(answer) {
  // Do something here, post or get
  window.location = @Url.Action("Order", "Order");
 }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T09:13:35.533

就我而言，我有一个已经调用动作的按钮：

```
<input id="ButtonDelete" type="button" value="Delete Experiment" class="big-nevigation-button" onclick="location.href='@Url.Action("DeleteExperiment", "Experiment", new { experimentId = Model.ExperimentId })'" /> 
```

阅读吉姆的答案后，我将其更改为以下内容：

```
<input id="ButtonDelete" type="button" value="Delete Experiment" class="big-nevigation-button" onclick="if (confirm('Are you sure you want to delete experiment???')) location.href='@Url.Action("DeleteExperiment", "Experiment", new { experimentId = Model.ExperimentId })'" /> 
```

而且效果更好！谢谢吉姆！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-15T10:34:44.760

在 MVC Core 中，我使用了这个，但仍然在 JavaScript 中

```
 <button type="submit"  
  asp-action="Delete" asp-route-id="@Model.Id"
  onclick="return confirm('Are you sure you want to delete?');">
  </button> 
```

# r - R中的热图或密度图

> ID：10198228
> 
> 赞同：3
> 
> 时间：2012-04-17T19:57:19.763
> 
> 标签：r, plot, ggplot2

我是 R 新手，正在尝试创建热图或密度图来显示我的结果。我有 20 个不同地点和 20 年的 x 数据。我试图在同一张地图中显示位置和年份的差异。我的数据看起来像这样。

```
 1975    1977    1979    1981    1983    1985    1987    1989
Dallas  25  28  27  29  31  33  35  37
Houston 33  38  43  48  53  58  63  68
Lubbock 28  29  31  33  35  37  39  41
Austin  22  24  26  28  30  32  34  36
San Antonio 31  32  33  34  35  36  37  38 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T20:38:28.147

对于一个漂亮的 image() 类型的绘图，您需要在轴上添加一些标签。此外，颜色图例将有助于解释颜色。我的博客[http://menugget.blogspot.de/](http://menugget.blogspot.de/)具有将此比例添加到图像图中的功能。下面是一个示例（从 menugget 加载 image.scale 函数后：

```
years <- seq(1975,1989,2)
db <- data.frame(Dallas=c( 25, 28, 27, 29, 31, 33, 35, 37),
 Houston=c( 33, 38, 43, 48, 53, 58, 63, 68),
 Lubbock=c( 28, 29, 31, 33, 35, 37, 39, 41),
 Austin= c(22, 24, 26, 28, 30, 32, 34, 36),
 San_Antonio= c(31, 32, 33, 34, 35, 36, 37, 38)
)
db <- as.matrix(db)

#plot
layout(matrix(c(1,2), nrow=1, ncol=2), widths=c(4,1), heights=c(4))
layout.show(2)
par(mar=c(5,5,1,1))
image(x=years, z=db, yaxt="n")
axis(2, at=seq(0,1,,dim(db)[2]), labels=colnames(db))
#image.scale from http://menugget.blogspot.de/2011/08/adding-scale-to-image-plot.html
par(mar=c(5,0,1,5))
image.scale(db, horiz=FALSE, yaxt="n", xaxt="n", xlab="", ylab="")
axis(4)
mtext("temp", side=4, line=2)
box() 
```

![在此处输入图像描述](../Images/099e1df50cb30fdca864bd44b0b2f48d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T20:02:15.620

您可以使用该`image()`功能创建热图。通过指定`col`参数来自定义颜色。

请注意，如果您当前使用的是 data.frame，则可能需要将其转换为矩阵：

```
 image(as.matrix(myVar)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T20:14:25.573

或者，您可以使用 ggplot2 制作热图，只需使用[平铺几何图形](http://had.co.nz/ggplot2/geom_tile.html)( `geom_tile`)。有关非常详细的示例，请参[见此链接](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)。

# html - 在不使用 CSS 的情况下增加文本区域的大小

> ID：10198229
> 
> 赞同：-2
> 
> 时间：2012-04-17T19:57:22.787
> 
> 标签：html, css

我有以下 HTML

```
<div class="cf section unifyRepeat" >
    <h2>Unmatched Accuracy, Unmatched Speed</h2>
    <div class="content">
        <p>blah blah blah...</p>
        <p>Not any more....</p>
    </div>
</div> <!-- .section --> 
```

这会产生一个文本区域。然而，文本在进入新行之前只在页面上移动了大约 50%。有没有办法可以增加文本的宽度，这样我就可以在一行上放更多的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:04:12.860

By default, a `<div>` will use all available width. No settings are required for that. If it's not doing so, then you already have CSS or other styling preventing this.

If you want help with your CSS/styling, then you'll need to provide it so folks can see it.

# matlab - 在Matlab中求解线性方程组的简单方法？

> ID：10198230
> 
> 赞同：1
> 
> 时间：2012-04-17T19:57:28.497
> 
> 标签：matlab

我正在寻找以下问题的简单快速的解决方案：我有三个 3D 向量`x_i`、三个 3D 向量`y_i`、一个 3D 向量`b`和一个 3x3 矩阵 A ，其系数为 a11 - a33 （未知）。

关系如下：

```
x_i = A * y_i + b 
```

这解决了

```
x_i_1 = ( a11 * y_1_1 + a12 * y_2_1 + a13 * y_3_1 ) + b_1 
```

等等

所以有 9 个方程和 9 个未知变量 a11 - a33，简单的数学运算。但是如何使用内置的 Matlab 函数来解决这个系统呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:01:48.183

如果您知道 9 个方程和 9 个未知数，那么就假装 9 个未知数存在于一个名为 的列向量中`r`，并编写一个 9x9 矩阵的行`C`来存储系数。如果 9 个方程的左侧也存储在列向量中，`x`那么您将解决类似的问题

```
Cr = x 
```

这只是在 Matlab 中完成

```
r = C\x; 
```

现在`r`存储 9 个未知数的解（假设存在解等）

# ruby - Ruby 哈希是否有类似 `reject!` 的返回匹配项的方法？

> ID：10198233
> 
> 赞同：2
> 
> 时间：2012-04-17T19:58:01.207
> 
> 标签：ruby, hash

Ruby 哈希是否有类似的方法`reject!`返回匹配项并在哈希中只留下不匹配项？例如：

```
planets = {'Mars' => 2, 'Jupiter' => 63, 'Saturn' => 47}

few_moons = planets.some_method! do |planet, moon_count|
  moon_count < 50
end

few_moons #=> {'Mars'  => 2, 'Saturn' => 47}
planets   #=> {'Jupiter' => 63} 
```

`reject!`返回原始哈希，减去被拒绝的项目。`partition`很接近，但它返回元组数组，而不是哈希，并且不修改原始哈希。

我在文档中看不到这样的东西，并且想在自己动手之前先问问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:08:09.253

一种解决方法是使用 Proc 两次：

```
moon_filter = Proc.new {|planet, moon_count| moon_count < 50 }
few_moons   = planets.select(&moon_filter)
lotsa_moons = planets.reject(&moon_filter)
planets     = lotsa_moons 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T20:43:06.273

```
few_moons, many_moons = 
  planets.partition { |planet, moon_count| moon_count < 50 } \
  .map{ |v| Hash[v] } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T20:00:59.927

还有[`Enumerable#group_by`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)：

```
planets_with = planets.group_by do |planet, moon_count|
  moon_count < 50 ? :many_moons : :few_moons
end

few  = planets_with[:few_moons]
many = planets_with[:many_moons] 
```

但是，这将映射到数组数组而不是哈希数组。要解决这个问题：

```
planets_with.merge!(planets_with) { |key, values| Hash[values] } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T20:43:00.017

## 我自己卷了

```
class Hash
  def reject_and_return!(&block)
    matches = {}
    self.each do |k, v|
      matches[k] = self.delete(k) if block.call(k, v)
    end
    matches
  end
end 
```

按预期工作：

```
planets = {'Mars' => 2, 'Jupiter' => 63, 'Saturn' => 47}

few_moons = planets.reject_and_return! do |planet, moon_count|
  moon_count < 50
end

few_moons #=> {'Mars'  => 2, 'Saturn' => 47}
planets   #=> {'Jupiter' => 63} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T20:56:40.920

Hash[] 构造函数将从分区中取回数组并按照您想要的方式将它们转换为散列。这不是一条线，但我认为它更干净：

a, not_a = {a: 'b', c: 'd', e: 'f'}.partition{|k,v| k == :a} a=Hash[a] not_a = Hash[not_a}

# android - 如何防止每次调用 onDraw() 时擦除 Android 画布？

> ID：10198242
> 
> 赞同：2
> 
> 时间：2012-04-17T19:59:27.977
> 
> 标签：android, android-view

我正在尝试做一个简单的绘画应用程序，但每次我调用 onDraw 时，它都会删除我之前拥有的内容。在我的绘制中，我正在执行以下操作（其中点是具有 x 和 y 整数的类，“点”是列表点）：

```
 Paint paint = new Paint();
        int c = getPaintFromActivityClass();
        paint.setColor(c);
        Path path = new Path();
        boolean first = true;
        for(Point point : points){
            if(first){
                first = false;
                path.moveTo(point.x, point.y);
            }
            else{
                path.lineTo(point.x, point.y);
            }
        }
        canvas.drawPath(path, paint); 
```

我每次都尝试将“旧”路径添加到新路径，基本上将路径相互连接，并创建单独的（未连接的）路径。但是，在 onDraw 中，我还设置了另一个视图正在更改的油漆颜色。当我将路径相互添加时，更改颜色会改变所有路径的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:06:50.973

你在打电话`super.onDraw(canvas)`吗？如果是这样，请在此之后进行所有绘图，否则超级调用将重绘整个视图。

如果您使用的是 onTouch，我也猜您正在平移和/或缩放。如果是这样，那么`canvas.save()`在你做任何绘图之前和`canvas.restore()`之后也要使用。Android 画布类似于 HTML5 画布，并且这个描述比 Android 文档更好（就像互联网上的任何其他编程主题页面一样；））

[https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T21:35:09.270

另一种选择是创建路径和颜色的 ArrayList 或 Vector 并存储每个，然后更改您的 onDraw 方法。将这些添加到类中：

```
ArrayList<Path> paths;
ArrayList<int> colors; 
```

在 onTouch 中，您将为每个 ArrayList 创建并添加路径和颜色，然后在 ondraw 中遍历路径......仍然在您的 ontouch 方法中调用 invalidate。要重新开始，您将清空 ArrayList

```
Paint paint = new Paint();
for(int i =0 : i < Paths.size() ;i++){ 
paint.setColor(colors.get(i));
canvas.drawPath(paths.get(i), paint);
} 
```

如果您创建一堆位图，请确保在正确的时间回收它们。如果您想跟踪历史记录，这个答案中的概念可能会更好，很容易做一个简单的“撤消”按钮，然后弹出最后一个条目。您可以通过创建自己的类来跟踪颜色和路径来进一步完善这一点，然后您将只有一个自定义类的 ArrayList。

# xml - 为什么 Delphi 6 的 MSXML 库在 Delphi 5 中会泄漏内存？

> ID：10198244
> 
> 赞同：0
> 
> 时间：2012-04-17T19:59:46.900
> 
> 标签：xml, delphi, memory-management, interface, msxml

我们有一个使用 Delphi 5 开发的应用程序，由于某些在这里并不重要的原因，我们无法升级到 Delphi 6 或更高版本。

前段时间我们不得不在那个应用程序中实现 XML 处理，我决定复制我们为使用 Delphi 6 的其他应用程序所做的实现。

一切都很顺利。我将 Delphi 6 源代码（msxml.pas、xmldoc.pas、msxmldom.pas 等）翻译为 Delphi 5。必须对每个文件进行细微调整（例如删除变体使用）。它有效，但我在释放内存方面遇到了一些问题。

我相信这个问题与 Delphi 5 和 Delphi 6 如何实现接口有关。我只是将接口及其实现从 Delphi 6 复制到 5。Delphi 没有正确释放内存。调试代码我们确定问题的根源在于`TXMLDocument.ReleaseDoc`XMLDoc.pas。似乎这条线`FDOMDocument := nil`没有释放它应该做的内存。

有人可以给我一些帮助吗？如果我们不能解决这个问题，我们将不得不使用另一个 XML 库重新编码整个事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T21:41:49.817

Delphi 6 发布接口对象的方式与 Delphi 5 相同。

您需要调试以找出您的 Delphi 5 程序出错的地方。

从一个证明内存没有被释放的小测试用例开始。在两个版本的 Delphi 中运行它以确认该问题仅在 Delphi 5 中出现。

如果可能，在 Delphi 6 测试用例中也使用您的 Delphi 5 版本的 XML 库。否则，您无法确定在将库翻译到 Delphi 5 时没有自己引入问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T02:14:23.703

仔细检查这`FDOMDocument`两种情况下实际上是一个接口，否则如果它是一个对象引用，'FDOMDocument := nil' 只会泄漏。

还要验证您是否没有其他引用`FDOMDocument`会阻止 ReleaseDoc 释放它。

特别要注意接口上的循环引用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:00:30.770

您可以检查 fDOMDocument 是否在其他地方有其他引用：就在设置 fDOMDocument := NIL 之前，请执行

```
references := fDOMDocument._AddRef ;
fDOMDocument._Release ; 
```

如果“references”大于 1，你需要去搜索其他持有接口引用的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T18:50:40.680

非常感谢各位...

我不知道为什么这样做，但是在将 Delphi 6 文件复制到 Delphi 5 时，我更改了行

`Result := inherited _Release;` 至 `Result := 0; //inherited _Release;`

上`function TXMLNode._Release: Integer;`

改回来了。经过测试，Delphi 5 程序开始像 Delphi 6 一样运行...

感谢你的宝贵时间！

# javascript - fadeIn & fadeOut 似乎导致重叠

> ID：10198245
> 
> 赞同：1
> 
> 时间：2012-04-17T19:59:47.727
> 
> 标签：javascript, jquery, jquery-ui

请看这个jsfiddle：http: [//jsfiddle.net/kZA8D/](http://jsfiddle.net/kZA8D/)

基本上，每当我快速通过/通过链接时，都会出现college_box 和landing_login_form div。重现可能需要几次，但最终看起来像这样：

![在此处输入图像描述](../Images/b37a02bf5430afa5c1041e5aa0208d95.png)

这是怎么回事？我有一个简单的悬停功能，我不明白为什么会发生这种故障......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:09:21.840

更新链接：http: [//jsfiddle.net/J67Dr/1/](http://jsfiddle.net/J67Dr/1/)

这是一个排队问题，在这种情况下`.stop()`不会解决它，因为它有两个不同的元素。因此，您最终会遇到一个元素被隐藏但仍然有动画排队而另一个元素正在制作动画的情况。我建议您将两者`.stop()`用作最佳实践并`.dequeue`在小提琴中显示。

选项 2

[http://jsfiddle.net/4jv6B/](http://jsfiddle.net/4jv6B/)

仅使用`.stop`但淡化包装元素而不是项目本身。由于有些奇怪（请参阅评论），我推荐选项 2。试图保留您的 DOM，但是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:11:42.503

正如在另一个答案中提到的，在 Que 中有动画，并且由于您没有删除它们，因此它们会像您经历的那样堆叠。解决此问题的方法是`.stop(true)`停止在您附加该方法的元素上的动画并清除 que（因此“真实”）

这个小提琴： http: [//jsfiddle.net/kZA8D/4/](http://jsfiddle.net/kZA8D/4/) 修复了它，（你的小提琴的一个小改写）但它由于回调函数而出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:03:28.100

发生这种情况是因为一旦您添加了一些其他动画，事件队列上仍有动画。您可能想看看`.stop()`jQuery 的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:03:51.783

基本上，一个动画在另一个动画完成之前开始。

我更新了你的小提琴来解决这个问题。一秒。

# javascript - 按字母顺序比较 2 个字符串以进行排序

> ID：10198257
> 
> 赞同：126
> 
> 时间：2012-04-17T20:00:49.740
> 
> 标签：javascript, jquery

我正在尝试按字母顺序比较 2 个字符串以进行排序。例如，我想要一个布尔检查，如`if('aaaa' < 'ab')`. 我试过了，但它没有给我正确的结果，所以我猜这不是正确的语法。如何在 jquery 或 Javascript 中执行此操作？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2016-01-13T23:38:51.667

您确实说比较是出于排序目的。然后我建议[localeCompare](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare)代替：

```
"a".localeCompare("b"); 
```

它返回`-1`since或以其他方式返回`"a" < "b"`，就像您需要[Array.prototype.sort()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)`1``0`

请记住，排序取决于区域设置。例如在德语中，`ä`是 的变体`a`，所以`"ä".localeCompare("b", "de-DE")`返回`-1`。在瑞典语中，`ä`是字母表中最后一个字母之一，因此`"ä".localeCompare("b", "se-SE")`返回`1`。

如果没有 to 的第二个参数`localeCompare`，则使用浏览器的语言环境。根据我的经验，这绝不是我想要的，因为那样它的排序方式就会与服务器不同，服务器对所有用户都有固定的语言环境。

此外，如果您要排序的内容包含数字，您可能需要：

```
"a5b".localeCompare("a21b", undefined, { numeric: true }) 
```

这将返回 -1，将 5 视为小于 21 的数字。没有`{ numeric: true }`它返回 1，因为“2”排在“5”之前。在许多实际应用中，用户期望“a5b”出现在“a21b”之前。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-04-17T20:05:42.607

让我们看一些测试用例 - 尝试在 JS 控制台中运行以下表达式：

```
"a" < "b"

"aa" < "ab"

"aaa" < "aab" 
```

全部返回真。

JavaScript 逐个字符地比较字符串，并且“a”在字母表中位于“b”之前 - 因此小于。

在你的情况下，它是这样工作的 -

> 1\. " **a** aa" < "​<strong>a​b"

比较前两个“a”字符 - 都相等，让我们移动到下一个字符。

> 2\. “a​<strong>a​​​aa”<“a​<strong>b​​​”

比较第二个字符“a”和“b”——哇！“a”在“b”之前。返回真。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-07-28T07:29:42.100

请记住，像 "x" > "X" 这样的字符串比较是区分大小写的

```
"aa" < "ab" //true
"aa" < "Ab" //false 
```

您可以使用`.toLowerCase()`不区分大小写的比较。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-09-12T20:13:22.503

`"a".localeCompare("b")`实际上应该返回`-1`，因为`a`排序之前`b`

[http://www.w3schools.com/jsref/jsref_localecompare.asp](http://www.w3schools.com/jsref/jsref_localecompare.asp)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-22T15:49:36.893

假设我们有一个对象数组：

```
{ name : String } 
```

然后我们可以按如下方式对数组进行排序：

```
array.sort(function(a, b) {
    var orderBool = a.name > b.name;
    return orderBool ? 1 : -1;
}); 
```

注意：请注意大写字母，由于您的目的，您可能需要将字符串转换为小写。

# c# - 执行回调之前控制台应用程序退出

> ID：10198259
> 
> 赞同：0
> 
> 时间：2012-04-17T20:00:56.340
> 
> 标签：c#, c#-4.0, asynchronous, callback, manualresetevent

我有一个执行类方法的控制台应用程序（在不同的项目中）。此方法异步执行到 web 服务的 POST（这是一个 3 分钟的冗长操作），并有一个回调，返回受 POST 影响的记录数。与此同时，程序继续执行其他花费不到 3 分钟的事情，并且程序在回调返回之前退出。

在过去，我使用了如下所示的 ManualResetEvent 来防止完成，但在这种情况下，我的方法位于另一个类库中，我希望尽可能保持干净。

```
 static ManualResetEvent resetEvent = new ManualResetEvent(false)

static void Main()
{
     CallAsyncMethod();
     // Do other things...
     resetEvent.WaitOne(); // Blocks until "set"
}

void AsyncMethodCallback()
{
     // Do processing on completion...
     resetEvent.Set(); // Allow the program to exit
} 
```

我将不胜感激提出一个干净的模式来实现这一点，而不会用执行标志污染被调用的类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:06:37.433

如果可以（特别是，如果您使用的是 .NET 4），请`CallAsyncMethod`返回 a`Task`或`Task<T>`. 然后您可以轻松地附加一个延续，等待它完成等。如果回调的*唯一*目的是获取记录数，那么返回 a`Task<int>`将是理想的。您可以[`TaskCompletionSource<TResult>`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)在异步方法中非常轻松地使用这样的填充结果，因此您根本不需要在主类中使用回调，主类将具有类似的主方法：

```
static void Main()
{
     Task<int> asyncTask = CallAsyncMethod();
     // Do other things...
     int count = asyncTask.Result;
     // Do anything you need with the count
} 
```

C# 5 中的新异步功能旨在与`Task<T>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:12:32.600

在另一个前台线程上启动 web 服务请求。在所有前台线程完成执行之前，应用程序不会退出。

```
new Thread(() => CallSynchronousMethod()).Start(); 
```

# python - 以某种方式遍历素数

> ID：10198262
> 
> 赞同：2
> 
> 时间：2012-04-17T20:01:01.663
> 
> 标签：python, combinations, itertools

目前，我正在输出列表中的所有素数组合以及该子集的乘积，如下所示：

```
from operator import mul
from itertools import combinations

primes = [2, 3, 5, 7, 11]

for r in range(1,len(primes)):
    for combo in combinations(primes,r+1):
        print combo, reduce(mul, combo) 
```

哪个输出

```
(2,) 2
(3,) 3
(5,) 5
(7,) 7
(11,) 11
(2, 3) 6
(2, 5) 10
(2, 7) 14
(2, 11) 22
(3, 5) 15
(3, 7) 21
(3, 11) 33
(5, 7) 35
(5, 11) 55
(7, 11) 77
(2, 3, 5) 30
(2, 3, 7) 42
(2, 3, 11) 66
(2, 5, 7) 70
(2, 5, 11) 110
(2, 7, 11) 154
(3, 5, 7) 105
(3, 5, 11) 165
(3, 7, 11) 231
(5, 7, 11) 385
(2, 3, 5, 7) 210
(2, 3, 5, 11) 330
(2, 3, 7, 11) 462
(2, 5, 7, 11) 770
(3, 5, 7, 11) 1155
(2, 3, 5, 7, 11) 2310 
```

现在假设我们正在查看以下块：

```
(2, 5, 7) 70
(2, 5, 11) 110
(2, 7, 11) 154
(3, 5, 7) 105
(3, 5, 11) 165
(3, 7, 11) 231
(5, 7, 11) 385
(2, 3, 5, 7) 210
(2, 3, 5, 11) 330 
```

举个例子，我想遍历乘积 <110 的所有组合。这里的第一个“端点”出现在 (2,5,11)，因为乘积是 110。

问题是，如果我此时**中断**，它会认为我正在尝试中断所有长度为 3 的元组并继续前进到 (2,3,5,7)，从而跳过其他有效的 (3,5,7 ) 产品 <110。另一方面，如果我只是在这一点上**继续**，我最终会遍历大量我知道会浪费时间的元组。如果我知道 (2, 5, 11) 太大，那么 (2, 7, 11) 显然也会太大，我不应该评估它。

我不确定我的问题是否清楚，但是是否有另一种方法可以生成输出顺序更符合我的结构的组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:28:01.193

“问题”是生成器以特定顺序`combinations`发出所有长度的元组。`r`您希望它们以不同的顺序出现。因此，您需要编写自己的`combinations`生成器。

这些类型的生成器通常是递归编写的：`r`要从您那里发出所有长度的组合，`i`首先删除一个元素——第一个元素——然后`(r-1)`从其余元素中递归地发出所有长度的组合。

现在，您要做的是在乘积太大时立即*停止递归，这样您就不会发出不必要的元组。*不幸的是，编写这种生成器的常用方法不允许您这样做，因为字典顺序与“按乘积递增的顺序”不同。

这意味着你必须找到一种不同的递归方式，每次都会增加数字的乘积。稍加思考应该会带您了解以下算法：

*   从尽可能小的元组开始。
*   对于元组的每个索引，尝试将其“向上碰撞”到下一个素数。仅在以下情况下执行此操作
    *   产品仍然低于限制，并且
    *   元组保持排序顺序。
*   这给了你一个新的元组开始，所以递归它。

这可以如下实现。

```
from operator import mul
primes = [2, 3, 5, 7, 11]
primes_inorder = dict(zip(primes, primes[1:]))

def my_combinations(primes, r, N, start=None, prod=None):
    """Yield all sorted combinations of length `r`
       from the sorted list `primes`."""
    if start is None:
        start = primes[:r]
        prod = reduce(mul, start)
        if prod > N: return

    yield start

    for i, v in enumerate(start):
        next_v = primes_inorder.get(v, None)
        if next_v is None or (i+1 < r and next_v > start[i+1]):
            continue

        new_prod = prod / v * next_v
        if new_prod > N:
            continue

        new_start = start[:]
        new_start[i] = next_v
        for combination in my_combinations(primes, r, N, start=new_start, prod=new_prod):
            yield combination 
```

# xcode - 将目标移动到 Xcode 中的新项目，GLEW 将不再编译

> ID：10198263
> 
> 赞同：1
> 
> 时间：2012-04-17T20:01:14.487
> 
> 标签：xcode, macos, opengl, glew

我刚刚将一个目标从一个项目移动到另一个（或者更正确地在另一个项目中创建了一个新目标并将源移动），现在得到一个错误：

```
#error gl.h included before glew.h 
```

我还更改了编译器（从 GCC 4.0 到 LLVM 3.0）并从 Xcode 3.2.6 移动到 4.2。在更改 Xcode 版本和编译器时转换现有项目（“旧”项目）没有相同的问题。旧项目的基础 SDK 是 OSX 10.5，但两者都转换为 10.6。

到目前为止，我已经匹配了适当目标的构建设置，以及构建阶段设置。我还将 GLEW 转换为静态库并正确添加。如果我使用基本 SDK Mac OS X 最新版（10.7）在 10.7 机器上编译，问题似乎消失了。

我错过了什么可怕的事情吗？肯定有。也许是某个神秘的 Xcode 设置？

当基础 SDK 时，问题似乎不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:40:34.943

上周我在一个项目中遇到了这个错误。基本上你不能在 glew.h 之前包含 gl.h、glu.h 或 glut.h。检查您的包含，我很确定您要么在 GLEW 之前包含这些文件之一，要么在包含 glew.h 之前再次包含包含 gl.h（等）的文件。

更多信息： http: [//glew.sourceforge.net/basic.html](http://glew.sourceforge.net/basic.html)

# c# - SSIS C# 脚本任务失败大约 250MB 内存使用

> ID：10198269
> 
> 赞同：3
> 
> 时间：2012-04-17T20:01:42.413
> 
> 标签：c#, sql-server, ssis, 64-bit

我有一个 SSIS 包，它只运行一个编写的 SSIS 脚本任务（不是我写的）。然后，此脚本以线程方式动态创建包并运行它们，管理活动的线程数。这是使用 SQL 代理启动的。这是从 Attunity Source 中针对 11g Oracle DB 获取数据。

当我在任务管理器中查看进程时，我看到 DTexec.exe 慢慢消耗越来越多的内存。当它达到大约 250MB 时，它会失败。它通常每次都返回不同的错误，有时甚至显示为来自 SQL 代理的取消请求。

我减少了最大内存以提供更多给操作系统，但没有用。

它不应该是 memToLeave 问题，因为它是 64 位的。我试过通过命令行运行，没有。

视窗服务器 2003 SQL 2008R2

我在这方面遇到了很多麻烦，并且已经尝试了我在网上可以找到的所有内容。有人有想法么？我确定我在这里遗漏了一些东西，所以问问，我会为你找到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:14:22.023

所以，我想通了。

C# 的编写方式没有显式销毁正在创建的线程的机制，但是这在以前从来不是问题的原因是脚本任务在 SSIS 包内创建了一个 DLL。我的环境默认具有 32 位运行时，因此构建它。如果 SSIS 包以 32 位模式构建，它的硬 RAM 限制为 256MB，而 64 位则没有这样的限制。那我该怎么办？

在服务器本身上的 Visual Studio 中打开包，然后保存它。这会强制它以 64 位模式重新编译（如果它是该服务器上的默认运行时间）。

# ssh - ssh 转发 - 双向

> ID：10198274
> 
> 赞同：1
> 
> 时间：2012-04-17T20:01:55.230
> 
> 标签：ssh, forward, bidirectional

使用 ssh 转发时，我可以使用 cvs 和 ftp 对远程服务器进行提交。是否可以让服务器对我的机器发起请求 - 我希望服务器上的 Web 应用程序在我的机器上调用 REST 方法。

谢谢。尼古拉·G。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:05:35.670

是的，只要您知道您的本地机器的 IP 地址并且您的 HTTP 端口（默认 80）是打开的，并且您有一个能够解释 REST 请求的服务，那么可以。请务必注意，您必须有权访问远程计算机才能发起请求，因此它不是“真正的”双向。我假设当您说“REST 方法”时，您的意思是休息：

[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

[编辑]

ssh 实际上对其隧道具有双向性！

用于正向隧道和`ssh`反向 隧道。我总是搞砸端口的顺序并且不确定 -R 想要它们如何，所以请帮自己一个忙并查看 ssh 的手册页：`-L [port]:[host]:[rport]``-R [port]:[host]:[port]`

[http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh+1](http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh+1)

或输入`man ssh`您最喜欢的（或系统管理员最喜欢的）终端 shell。

# c# - 使用 runat="server" 访问 HTML 元素中的 foreach 变量

> ID：10198277
> 
> 赞同：2
> 
> 时间：2012-04-17T20:02:11.580
> 
> 标签：c#, asp.net, .net, data-binding

我有一个 UserControl，它有一个包含照片列表的产品列表的属性。在`.ascx`我有一个`DIV`作为所有照片的容器。这就像现在一样工作。

```
<% foreach (var product in Products) { %>
    <div class="product">
        <div class="product-photos">
            <% foreach (var photo in product.Photos) { %>
                <img src="<%= photo.Url %>" alt="<%= product.Name %> Photo"/>
            <% } %>
        </div>
        <!-- Other product markup/data here... -->
    </div>
<% } %> 
```

`DIV`如果没有照片，我现在正试图隐藏。我的想法是让“产品照片”`DIV`有一个`runat="server"`并赋予它一个`Visible`属性。这不起作用，因为它无法解析`product`来自我的`foreach`循环的变量。这似乎`runat="server"`使循环中的变量`foreach`无法访问，这没有意义，因为循环也必须在服务器上运行。

***问题：***当元素具有
如何访问`foreach`内循环中？这甚至可能吗？如果不是，那么实现我想要的替代方法是什么？`.as*x``runat="server"`

**ProductsControl.ascx.cs**

```
public partial class ProductsControl: UserControl
{
    public IList<Product> Products { get; set; }
} 
```

**产品.cs**

```
public class Product
{
    public IList<Photo> Photos { get; set; }
    // Other properties here...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:48:53.043

为什么不在创建 div 之前检查照片计数？

```
<% foreach (var product in Products) { %>
    <div class="product">
        <% if (product.Photos.Count > 0) { %>
            <div class="product-photos">
                <% foreach (var photo in product.Photos) { %>
                <img src="<%= photo.Url %>" alt="<%= product.Name %> Photo"/>
                <% } %>
            </div>
        <% } %> 
        <!-- Other product markup/data here... -->
    </div>
<% } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:13:01.617

`<div>`您可以通过测试`Count`照片并设置它的 css 样式来隐藏它：

```
<div class="product-photos" style="<%= product.Photos.Count == 0 ? "display=none;" : "" %> "> 
```

这仍然会创建，`<div>`但它会“隐藏”在页面上。

**编辑：**关于使用托管控件的问题，例如`asp:Panel`将呈现`<div>`. 您必须在[用户控件加载事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.load.aspx)期间根据您检索到的数据动态创建控件，这将涉及添加`child controls`到您的用户控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:13:08.090

下午好，您可以尝试使用 jquery 为您处理这个问题，可能是这样的：

```
 $(function() {
      $('.product-photos').each(function() {
           var div = $(this);
           if ($(div).find('img').length === 0)
                div.hide();
      });
 }); 
```

这还没有经过测试，但我相信它应该能让你继续前进。

# macos - OS X 上的 Monodevelop 控制台

> ID：10198282
> 
> 赞同：2
> 
> 时间：2012-04-17T20:02:27.553
> 
> 标签：macos, console, terminal, monodevelop

我在 OS X 上使用 Monodevelop 来编写一些基本的命令行程序。当我运行我的程序时，输出被发送到一个新的终端窗口。**如何将输出发送到作为 MonoDevelop 一部分的控制台？**

这个功能似乎是标准的，因为我在 Xcode 和 Visual Studio 中使用过它。我在 Monodevelop 中找不到该选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T21:19:20.847

打开您的项目并选择菜单：

> 项目 > YourConsoleProjectsName 选项

然后选择

> 运行 > 常规

在左窗格中并取消选中复选框**Run on external console**。瞧，您现在应该在“应用程序输出”窗口中有输出。

# xcode - XCode - 目标 C：删除表行崩溃

> ID：10198284
> 
> 赞同：3
> 
> 时间：2012-04-17T20:02:28.507
> 
> 标签：xcode, uitableview, edit, delete-row

欢迎！我整个上午都在做这个，但没有香蕉；也许你有洞察力！

我正在使用标准`NSMutableArray`：

```
self.itemTable = [[NSMutableArray alloc]
                 initWithObjects:@"House.",
                 @"Car.",
                 @"Keys.", nil]; 
```

现在，当我在导航栏中按“编辑”并删除一行时，我收到以下**错误消息**

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新 (3) 后现有节中包含的行数必须等于该节中包含的行数更新前的节 (3)，加上或减去从该节插入或删除的行数（0 插入，1 删除），加上或减去移入或移出该节的行数（0 移入，0 移动出去）。'

我将此代码用于“删除”命令：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {

[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

} 
```

关于如何使删除行功能起作用的任何见解？

**编辑**：

找到它：将以下代码行放入工作中：

```
[self.itemTable removeObjectAtIndex:indexPath.row]; 
```

这使得删除代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {

[self.itemTable removeObjectAtIndex:indexPath.row];

[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-27T08:02:57.370

我遇到了同样的问题。工作后找到了解决方案。这里我的崩溃实际上是由于从数组中删除项目后调用 tableview reload 。在崩溃报告中提到，在编辑/更新部分中的 tableview 行之前和之后必须相等。

波纹管代码工作正常：

```
 // Override to support editing the table view.
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
     if (editingStyle == UITableViewCellEditingStyleDelete)
     {
        //add code here for when you hit delete
        [self deleteItemAtRowIndex:indexPath];
    }
}

-(void)deleteItemAtRowIndex:(NSIndexPath *)indexpath
{
[pTableDataDataArray removeObjectAtIndex:indexpath.row];

[pTableView beginUpdates];
//[self LoadTempletesData];    no need to reload, simply remove row that to is to be delete
[pTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexpath] withRowAnimation:UITableViewRowAnimationNone];
//make changes
[pTableView endUpdates];
} 
```

希望它可以帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T09:05:54.293

请记住，每次从表中添加或删除内容时都要更新数据源，这些内容是从数据源本身获取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T03:32:32.340

（您似乎已经注意到）您必须在插入或删除行之前更新数据源。有时你会想做一些花哨的事情，比如添加和删除行。（我这样做是为了隐藏一部分行并显示另一部分）。如果你需要同时做这两个，你可以使用这个构造

```
[tableView beginUpdates];
//make changes
[tableView endUpdates]; 
```

# java - 当您可以实现 Web 服务 (SOA/REST) 时，使用 RMI 实现 EJB 是否仍然有用？

> ID：10198286
> 
> 赞同：12
> 
> 时间：2012-04-17T20:02:30.633
> 
> 标签：java, web-services, jakarta-ee, ejb, rmi

这听起来可能类似于[this](https://stackoverflow.com/questions/2013793/web-services-vs-ejb-vs-rmi-advantages-and-disadvantages)，但事实并非如此。

我有点了解 EJB 和 RMI，并且在 SOA 下使用 Web 服务已经有一段时间了。我想知道为什么使用 EJB 在 RMI 下公开远程接口而不是发布 Web 服务（SOA/REST，但主要是 SOA）很有用。我不是在问哪个更好，只是我想知道一个很好的理由，为什么我应该更喜欢使用远程接口而不是 Web 服务来实现 EJB。

我查看了很多网页，但似乎都过时了。到目前为止，我所拥有的是 EJB 暴露远程接口仅在与 Java 遗留系统集成时比 WS 更好。如果我想管理事务，我可以使用本地接口实现 EJB。此外，我不认为选择 EJB 而不是 RMI 比 Web 服务接口更有效。

我对吗？有什么我想念的吗？

真的提前谢谢了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T20:12:21.943

EJB 更好，如果

*   您需要执行应该在一个事务中完成的调用次数（理论上我们有事务性 Web 服务，但并非每个实现都提供它们），（有状态的）EJB 在事务管理方面大放异彩。几乎任何时候你都需要有状态 EJB 会比 Web Service 更好；
*   您需要性能 - Web 服务很慢 - 它们使用通过 HTTP 推送的 XML/JSON，EJB 使用的基于 IIOP 协议的 RMI 更有效；
*   您需要连接到一些使用过时 Java Web 服务规范的遗留系统（丑陋的 Axis 1.0 东西，与 JAX-WS 不兼容），将所有东西与 Web 服务连接起来可能是一场噩梦，处理不兼容的 WSDL 定义，奇怪的 SOAP信封。EJB 向后兼容，旧的 EJB 2 可以毫无问题地与 EJB 3.1 连接；
*   现代 EJB (EJB 3.X) 可以通过添加两个或三个简单注释将其接口公开为 JAX-WS SOAP/WSDL 服务或 JAX-RS REST 服务

为什么（REST）Web 服务那么受欢迎呢？EJB 只能连接到另一个 Java 应用程序。大多数现代富 Internet 应用程序都是用 JavaScript 编写的，因此将它们与任何后端连接的唯一方法是使用某种 Web 服务（通常是 REST + JSON）。对于这样的应用程序，EJB 是毫无用处的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T20:07:59.103

如果使用 RMI 作为有线协议，客户端和服务都必须用 Java 编写。

SOAP 使用基于 HTTP 的 XML，而 REST 使用纯 HTTP 进行客户端和服务之间的通信。对话的任何一端都可以用任何可以通过 HTTP 发送适当请求的语言编写，这远没有限制。

我认为这是基于 HTTP 的 Web 服务胜过 RMI 的原因之一。每次都是简单而公开的胜利。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-18T07:52:49.470

它们是用于不同目的的不同事物。

EJB 用于紧密耦合的*N层系统中，您可以控制所有元素。*它们使用看似普通的方法调用的语言提供直接编码，并通过 IIOP 或 EE 供应商部署的任何其他协议提供 LAN 类型的性能。

SOAP/REST 最适合在 Internet 上使用，或者在 B2B 或其他您无法控制两端并且需要松散耦合的情况下使用。由于所有 XML，您的性能会慢得多，但您还会在中间获得一个行业标准协议，该协议为两端提供针对单一来源问题的保护。

# php - PHP、mysql_real_escape_string 和 MySQL 查询

> ID：10198290
> 
> 赞同：0
> 
> 时间：2012-04-17T20:02:43.687
> 
> 标签：php, mysql

我收到与此类似的查询错误，但我还没有发现问题：

```
$str = "rob's";
...
$query ="INSERT INTO tableName (name) VALUES (mysql_real_escape_string('$str')"; 
```

**编辑：**

我道歉。我在减少代码时犯了一个错误；这更接近我所拥有的错误：

```
$str = "rob's";
...
$query ="INSERT INTO tableName (name) VALUES (('".mysql_real_escape_string($str)."')"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:03:42.627

`mysql_real_escape_string()`是 PHP，不是 MySQL。你需要把它从引号中取出

```
$query ="INSERT INTO tableName (name) VALUES ('".mysql_real_escape_string($str)."')"; 
```

另外，$str 是一个字符串，所以在 MySQL 中它也需要被 qoutes 包围，我添加了它们。你已经有了这个，但是因为函数需要脱离引号，所以必须移动它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:04:09.913

```
$query ="INSERT INTO tableName (name) VALUES ('" . mysql_real_escape_string($str) . "'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:05:13.270

`mysql_real_escape_string()` is a PHP function. So in your MySQL query string you have to pass it like a variable:

```
$query ="INSERT INTO tableName (name) VALUES ('" . mysql_real_escape_string($str) . "')"; 
```

Read more here: [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-30T12:36:04.070

我建议在插入查询之前执行 mysql_real_escape_string() 函数。**在查询调用期间尝试去除字符**存在已知问题。下面的代码我以前使用过很多次并且知道它有效。如果您向我们提供您遇到的错误，您是否使用 mysql*i* 之类的 mysql 扩展以及您正在使用的真实代码，这也会有所帮助。“我在减少代码时犯了一个错误；这更接近于我给出的错误”并不能真正帮助缩小您遇到的问题，因为您可能会在减少您的代码的同时删除引发错误的部分代码。不过，使用我在下面的内容应该对你有用。

```
$str = $_POST['name'];
mysql_real_escape_string($str);
$query = "INSERT INTO tableName (name) VALUES (".$str.")";
mysql_query($query); 
```

# python - 从 pandas DataFrame 返回最后一个有效（非空）值

> ID：10198295
> 
> 赞同：4
> 
> 时间：2012-04-17T20:03:13.593
> 
> 标签：python, pandas, dataframe, group-by, pandas-groupby

假设我`dataframe`看起来像：

```
 a      b
0    11      A
1    -2      A
2     3      A
3    NA      A
4   0.5      B
5    NA      B
6    -9      B 
```

我可以按“b”创建一个组。有没有一种快速的方法来获取每个组的“a”中的最后一个非 NA 值？在这种情况下，A 组为 3，B 组为 -9。

（在这种情况下，序列“a”按给定排序，但可能并非如此。可能还有另一列“c”，根据它定义“最后一个”。）

我通过查看 grouped.groups 字典编写了自己的循环代码。但显然，鉴于我庞大的数据集，这非常低效。我认为这可以非常简单地完成——也许我对熊猫太陌生了:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T01:07:15.063

我最近为此添加了一个 github 问题：[https ://github.com/pydata/pandas/issues/1043](https://github.com/pydata/pandas/issues/1043)

与此同时，你可以这样做：

```
def get_last_valid(series):
    return series.dropna().iget(-1)

df.groupby('b')['a'].apply(get_last_valid) 
```

# git - Git Fetch vs Pull：不同的结果，不知道为什么

> ID：10198296
> 
> 赞同：5
> 
> 时间：2012-04-17T20:03:15.150
> 
> 标签：git

我通常做 a`git fetch origin`后跟 a `git merge remotes/origin/master`，但得到了`Already up-to-date`回应。我知道这不是真的。A`git pull origin`工作正常并带来了变化。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:04:30.697

当你这样做时：

```
$ git fetch origin 
```

你没有得到 origin/master 分支。假设你得到了原产地/其他。然后当你这样做时：

```
$ git merge remotes/origin/master 
```

因为在 origin/master 上没有什么新东西（你从来没有拿到过），所以没有什么可以合并的。你得到了“已经是最新的”。如您所知，当您这样做时：

```
$ git pull origin 
```

有一个合并要执行，因为“拉”做了一个提取（原产地/其他）然后合并（原产地/其他）。您应该能够看到哪些分支配置为“拉”和“推”

```
$ git remote show origin 
```

修复它：

```
$ git checkout master
$ git branch --track master origin/master 
```

# javascript - jQuery 单击不适用于 ie7/8 中的选择选项

> ID：10198311
> 
> 赞同：0
> 
> 时间：2012-04-17T20:04:27.287
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jQuery 1.7.1。以下代码在我的选择菜单中附加了一个附加选项，该选项附加了一个 .click 事件。此代码在 firefox/ie9 中运行良好，但在 ie7/8 中单击“添加新选项”时出现以下错误。我也尝试过选择事件，但没有任何运气。有谁知道如何在 ie7/8 等旧版浏览器中进行这项工作

```
$("select").append($('<option></option>').text("Add New Option").click(function(){
    alert("test");
})); 
```

JS 错误 SCRIPT5022：语法错误，无法识别的表达式：# jquery-1.7.1.js，第 4179 行字符 2

JS 小提琴示例

[http://jsfiddle.net/gchristman/gucgG/3/](http://jsfiddle.net/gchristman/gucgG/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:07:30.233

您应该使用 onchange 事件。试试这个：

```
$("select").append($('<option></option>').text("Add New Option")).change(function(){
    alert("test");
})); 
```

相关：[chrome中选择选项元素上的单击事件](https://stackoverflow.com/questions/1402227/jquery-click-event-on-select-option-element-in-chrome)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:11:12.603

不要将点击事件附加到选项，只需订阅选择上的更改事件并检查它是否是您添加的项目？我已将您的新项目的值设为 0，以便在更改中识别它。

```
$("select").append($('<option></option').text("Add New Option").val(0));

$("select").change(function () {
    if $("select option:selected").val() == 0) {
        alert("test");
    } 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:07:10.907

尝试

```
.on("click", function() {
    alert("test");
})); 
```

代替：

```
.click(function() {
    alert("test");
})); 
```

看看有没有效果？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T15:07:52.343

对于 ie7/8 使用 javascript: [JS fiddle](http://jsfiddle.net/Intacto/gucgG/8/)

```
<select id="sel" onchange="test(this.value)"><option>option1</option></select>

<script language="javascript"><!--
//<![CDATA[
s=document.getElementById("sel");
var opt = document.createElement('option');
opt.value = "add";
opt.innerHTML = "Add New Option";
s.appendChild(opt);

function test(val){
    if (val = "add"){
        alert("test");
    }
}

//]]>
--></script> 
```

# sqlite - RealBasic: execute shell commands

> ID：10198313
> 
> 赞同：1
> 
> 时间：2012-04-17T20:04:41.750
> 
> 标签：sqlite, csv, realbasic

I need to load a CSV file into an sqlite DB using Realbasic. There is no problem doing this as described in [this](http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles) tutorial.

Can you help me to do this with RealBasic.

I am trying to use the Shell class:

```
Dim folder As FolderItem = GetFolderItem("")

Dim sh As Shell = new Shell
sh.Mode = 2

If Not sh.IsRunning Then
  sh.Execute "sh"   
End If

sh.Write( "cd " + folder.ShellPath )  
sh.Write( "sqlite3 " + App.GetDatabaseName() + ".sqlite" )  
sh.Write( ".separator "",""")

sh.Write( ".import " + FileName + " " + TableName ) 
```

PS: there are no error messages during execution, in Shell. But the data does not get imported into the table.

How to fix it?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:38:18.233

尝试使用 WriteLine 而不是 Write 来发送您的命令。

```
sh.WriteLine( "cd " + folder.ShellPath )  
sh.WriteLine( "sqlite3 " + App.GetDatabaseName() + ".sqlite" )  
sh.WriteLine( ".separator "",""")

sh.WriteLine( ".import " + FileName + " " + TableName ) 
```

# ios - 如何让 UITableView 停止滚动

> ID：10198315
> 
> 赞同：47
> 
> 时间：2012-04-17T20:04:57.133
> 
> 标签：ios, uitableview, scroll

我并不是说我想禁用滚动。我希望能够以编程方式告诉表格立即停止移动（但之后它应该仍然可以滚动）。这可能吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-17T20:10:06.497

A`UITableView`是 的子类`UIScrollView`。如果您告诉它滚动到当前位置，它将停止滚动，因此这应该适合您：

```
[tableView setContentOffset:tableView.contentOffset animated:NO]; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-06-03T12:12:27.890

将你的表视图绑定到一个名为 的变量`tableView`，然后使用以下行你可以禁用 Objective-C 中的滚动：

```
tableView.scrollEnabled = NO; 
```

斯威夫特版本：

```
tableView.isScrollEnabled = false 
```

如果您希望它再次可滚动，请将其设置为`YES`( )。`true`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-04T12:03:44.137

放`tableView.alwaysBounceVertical = false;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-27T09:34:19.243

如果您使用的是表格视图控制器，请按照以下步骤操作

1.  在情节提要上选择表视图控制器
2.  转到属性检查器->滚动视图
3.  取消选中滚动启用

# django - python pil 图像到 django imagefield 转换

> ID：10198317
> 
> 赞同：1
> 
> 时间：2012-04-17T20:05:07.187
> 
> 标签：django, upload, thumbnails, python-imaging-library, django-models

我正在上传图像，图像上传并将其保存在 django 模型中工作得很好。创建缩略图并将其保存到 temp。位置也可以。不起作用的部分是保存缩略图，文件已创建并保存，但它是一个空文件。:/ 如何解决丢失数据的问题。

如果有人知道如何将 pil 图像转换为 django 模型 - imagefield 而不进行 tmp 保存......请告诉。

```
def ajax_upload(request):
    if request.method == 'POST':
        newfile = Image()
        newfile.user = request.user
        file_content = ContentFile(request.raw_post_data)
        file_name = request.GET.get('file')

        newfile.image.save(file_name, file_content)

        # thumbnail creation ==========================================
        path = os.path.join(settings.MEDIA_ROOT, newfile.image.url)
        thumb_image = pil_image.open(path)

        # ImageOps compatible mode
        if thumb_image.mode not in ("L", "RGB"):
            thumb_image = thumb_image.convert("RGB")

        thumb_image_fit = ImageOps.fit(thumb_image, (32, 32), pil_image.ANTIALIAS)

        #saving temp file
        tmp_file_path = os.path.join(settings.MEDIA_ROOT, 'tmp_thumbnail.jpg')
        thumb_image_fit.save(tmp_file_path, 'JPEG', quality=75)

        #opening the tmp file and save it to django model
        thumb_file_data = open(tmp_file_path)
        thumb_file = File(thumb_file_data)

        newfile.thumbnail.save(file_name, thumb_file)
        #===============================================================

        results = {'url': newfile.image.url, 'id': newfile.id, 'width': newfile.image.width, 'height': newfile.image.height}
        return HttpResponse(json.dumps(results))
    raise Http404 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:47:20.023

您可以保存文件并将其路径（相对于 MEDIA_ROOT）手动分配给目标字段。

```
thumb_path = 'uploads/1_small.jpg'
thumb_image_fit.save(os.path.join(MEDIA_ROOT, thumb_path), 'JPEG', quality=75)
newfile.thumbnail = thumb_path 
```

当然，您需要手动完成所有 Django 的工作——检查文件是否存在，如果存在则修改名称，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:12:55.017

```
from django.core.files.base import ContentFile
from PIL import ImageOps, Image as pil_image
import os.path
import json

def ajax_upload(request):
    if request.method == 'POST':
        newfile = Image()
        newfile.user = request.user
        file_content = ContentFile(request.raw_post_data)
        file_name = request.GET.get('file')

        newfile.image.save(file_name, file_content)
        newfile.thumbnail.save(file_name, file_content)

        #opening and resizing the thumbnail
        path = os.path.join(settings.MEDIA_ROOT, newfile.thumbnail.url)
        thumb_file = pil_image.open(path)

        if thumb_file.mode not in ("L", "RGB"):
            thumb_file = thumb_file.convert("RGB")

        thumb_image_fit = ImageOps.fit(thumb_file, (100, 100), pil_image.ANTIALIAS)
        thumb_image_fit.save(path)

        #===============================================================

        results = {
                    'image':
                        {
                            'url': newfile.image.path,
                            'width': newfile.image.width,
                            'height': newfile.image.height
                        },
                    'thumbnal':
                         {
                            'url': newfile.thumbnail.path,
                            'width': newfile.thumbnail.width,
                            'height': newfile.thumbnail.height
                         }
                    }
        return HttpResponse(json.dumps(results))
    raise Http404 
```

# ruby-on-rails - validates_numericality_of 中的 :greater_than_or_equal_to 仅在 Rails 3.1 中部分工作

> ID：10198324
> 
> 赞同：14
> 
> 时间：2012-04-17T20:06:07.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rspec

我们正在使用以下内容来检查 stock_qty （整数或浮点数。可能为零但不是零）是否大于或等于零：

```
validates_numericality_of :stock_qty, :greater_than_or_equal_to => 0
validates_numericality_of :stock_qty, :less_than_or_equal_to => :in_qty, :if => Proc.new { |part| !part.in_qty.nil? } 
```

:in_qty 是零件模型中的一列。此验证应允许 :stock_qty 为正数或 0。问题是如果 :stock_qty 分配为零，则 rspec 失败。我注意到 :less_than_or_equal_to 只允许 less_than 而不允许 equal_to。有没有办法验证 Rails 3.1 中的 >= 或 <=？或者我们上面的验证代码可能出了什么问题。非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T20:18:36.283

尝试`:only_integer => true`像这样添加：

```
validates_numericality_of :stock_qty, :only_integer => true, :greater_than_or_equal_to => 0 
```

编辑

如果在 stock_qty 为零或零时需要通过，您需要将代码更改为：

```
validates_numericality_of :stock_qty, :allow_nil => true, :greater_than_or_equal_to => 0
validates_numericality_of :stock_qty, :allow_nil => true, :less_than_or_equal_to => :in_qty, :if => Proc.new { |part| !part.in_qty.nil? } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-17T21:40:47.280

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:32:04.623

你也可以相信有 0 而有`nil`. `nil`不会通过这个检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-31T10:56:35.550

For Rails > 6.1.0

```
class User < ApplicationRecord
 validates :age, numericality: { greater_than_or_equal_to: 18, less_than_or_equal_to: 65 }
end 
```

I find the answer [in this link](https://blog.saeloun.com/2021/02/05/add-validate-numericality-in-range.html)

I hope it was easy and clear

# javascript - 包装 JQuery 函数结果 标签

> ID：10198326
> 
> 赞同：1
> 
> 时间：2012-04-17T20:06:13.533
> 
> 标签：javascript, jquery, html, tags

嗨，我有一个交互式绘图功能。由于一些限制，每次用户与图形交互时，我都必须删除图形：

```
$("button").click(function () {
     $("p").empty();
 }); 
```

但是，然后我想通过调用（在 protovis 中）重新生成图形：

```
drawHistogram(){
var w = 420
var h = 300
var vis = new pv.Panel()
.width(w)
.height(h)
.margin(20);
//add data into the visualization
vis.render();
} 
```

在 jQuery 中。但是，现在这个图形没有被标签包围，`<p>`所以当我点击按钮时，这个迭代不会发生任何事情。我将如何用标签包围`drawHistogram()`通话？`<p>`谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:12:25.570

为什么不拥有一个容器元素，并且每次调用 时`drawHistogram()`，在该方法中都将结果包装在一个`"<p>"`元素中。

在这里，看看这个例子是否有帮助。

[http://jsfiddle.net/BP5hb/](http://jsfiddle.net/BP5hb/)

最好的，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:28:04.663

如果`drawHistogram()`是 PHP 函数：

```
<?php
    function drawHistogram() {
?>

    <P>

<?php

    // Draw Histogram code goes here

?>

    </p>

<?php
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:28:41.713

无论是什么元素 vis.render(); 渲染只需访问它并使用 jQuery [http://api.jquery.com/wrap/包装它](http://api.jquery.com/wrap/)

```
<div class="vis-rendered">
  <div class="inner">Vis Image</div>
</div>

$('.vis-rendered').wrap('<p />'); 
```

结果：

```
<p>
  <div class="vis-rendered">
    <div class="inner">Vis Image</div>
  </div>
</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:29:43.033

您可以尝试使用 jQuery .wrap() 将元素包装在`<p>`元素中。

如果展开的 .inner 元素看起来像这样开始：

```
<div class="container">
  <div class="inner">Hello</div>
  <div class="inner">Goodbye</div>
</div> 
```

然后`$('.class').wrap('<p>')`在渲染元素上使用：

```
$('.inner').wrap('<p class="new" />'); 
```

包装后的结果如下所示：

```
<div class="container">
  <p class="new">
    <div class="inner">Hello</div>
  </p>
  <p class="new">
    <div class="inner">Goodbye</div>
  </p>
</div> 
```

# emacs - 如何在emacs中设置ttf字体

> ID：10198333
> 
> 赞同：2
> 
> 时间：2012-04-17T20:06:48.073
> 
> 标签：emacs, fonts

我已经安装了 liberation-fonts 包并且 xfontsel 看到了它的字体。但是emacs没有。为什么？如果可能的话，我会不使用 X 资源文件。

```
(set-default-font "-*-liberation serif-*-*-*-*-17-*-*-*-*-*-*-*") 
```

ps 我在 gentoo 上试了一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:30:31.813

你也可以试试`set-default-font`，像这样：

```
(set-default-font "Liberation Mono-13") 
```

或者

```
(set-default-font "Liberation Mono-13:bold") 
```

在您的`.emacs`文件中（此函数的文档建议`set-frame-font`改用，但`set-default-font`在 Emacs 24 中仍然有效）。

您可能会发现这些链接很有趣：

*   [如何更改 emacs 默认字体大小和字体类型？](https://stackoverflow.com/questions/6026713/how-do-i-change-emacs-default-font-size-and-font-type)
*   [如何在 Emacs 中设置字体大小？](https://stackoverflow.com/questions/294664/how-to-set-the-font-size-in-emacs)
*   [相关的 Emacs Wiki 页面](http://www.emacswiki.org/emacs/SetFonts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:18:48.910

在 Emacs 中设置字体的一个好方法是通过`~/.Xdefaults`：

```
Emacs.font: Inconsolata:size=16:antialise:true
Emacs.fontBackend: xft 
```

# java - 基本 Spring MVC 数据绑定

> ID：10198335
> 
> 赞同：7
> 
> 时间：2012-04-17T20:07:08.957
> 
> 标签：java, data-binding, spring-mvc

我正在学习 Spring MVC，我到处都在做一个基本的控制器来查看数据绑定，但我没有尝试过任何工作。我可以将视图发布绑定回控制器，并且可以在那里看到带有属性的 pojo，但是每当我尝试将该对象添加到模型时，我什么也得不到。这是我到目前为止所拥有的：

控制器

```
@Controller
public class HomeController {

    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Model model) {

        model.addAttribute(new Person());
        return "home";
    }

    @RequestMapping(value="/about", method=RequestMethod.POST)
    public void about(Person person, Model model)
    {
        model.addAttribute("person", person);
    }   
 } 
```

我要绑定的班级

```
public class Person {
private String _firstName;
private String _lastName;
private Date _Birthday;

//Set
public void setFirstName(String FirstName){this._firstName = FirstName; }
public void setLastName(String LastName){this._lastName= LastName; }
public void setBirthDate(Date BirthDate){ this._Birthday = BirthDate;}

//get
public String getFirstName(){return _firstName;}
public String getLastName(){return _lastName;}
public Date getBirthDate(){return _Birthday;}
} 
```

视图 - 控制器到表单！在职的

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<html>
</head>
    <body>
        FirstName: ${model.person.getFirstName}
        LastName: ${model.person.getLastName}
    </body>
</html> 
```

我可以或需要做什么才能使其绑定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T20:16:19.093

模型属性是您在这里缺少的东西。

```
@Controller
public class HomeController {

    @ModelAttribute("person")
    public Person getPerson(){
        return new Person();         
    }

    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home() {
        return "home";
    }

    @RequestMapping(value="/about", method=RequestMethod.POST)
    public void about(@ModelAttribute("person") Person person, BindingResult result, Model model)
    {
        if( ! result.hasErrors() ){
             // note I haven't compiled this code :)
        } 
    }   
 } 
```

这个想法是 @ModelAttribute 方法将在 GET 和 POST 上被调用，在 GET 请求上，它只会暴露给视图，而在 POST 上它将用于绑定请求参数。

请注意，将`BindingResult`传递给 POST 方法，以便您可以使用命令执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:34:33.460

1) modelMap 的内容隐含在 JSP 中。访问它们时无需指定“模型”。

2) JSP-EL 通过 bean 属性访问器访问字段，而不是调用方法。您没有指定“get”来调用实际方法。您使用 bean 属性名称。例如，${person.firstName} 获取 person.getFirstName() 的结果；

```
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Model model) {
    Person person = new Person();
    person.setFirstName("Kai");
    person.setLastName("Cooper");
    model.addAttribute("person", person);
    return "home";
} 
```

`

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<html>
</head>
    <body>
        FirstName: ${person.firstName}
        LastName: ${person.lastName}
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:34:38.653

您还需要更改 Person 对象，在此之前属性不应有“_”。将“_firsName”更改为“firstName”。吸气剂，二传手的很好。Spring 绑定通过属性名称传递给它们相应的 getter 和 setter。

还要更改您在视图中的访问方式。像 ${person.firstName} 一样使用。您不需要在“person.firstName”之前使用“model”，也不需要提及 getFirstName，spring 会自动为您完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-17T09:08:38.010

请检查您的 Person 类变量、getter 和 setter 方法命名。Getter 方法应该以 'get' 和变量名的第一个大写字母开头，其他字母的大小写相同，例如：`getFirstName()`并且 setter 方法也应该像 getter 方法。如果您的 getter 和 setter 方法的命名约定不同，则绑定无法正常工作。这是您的 Person 类的更新版本。

```
public class Person {
   private String firstName;
   private String lastName;
   private Date Birthday;

   //Set
   public void setFirstName(String FirstName){this.firstName = FirstName; }
   public void setLastName(String LastName){this.lastName= LastName; }
   public void setBirthDate(Date BirthDate){ this.Birthday = BirthDate;}

   //get
   public String getFirstName(){return firstName;}
   public String getLastName(){return lastName;}
   public Date getBirthDate(){return Birthday;}
} 
```

# java - 如何防止两个事件被触发？

> ID：10198337
> 
> 赞同：2
> 
> 时间：2012-04-17T20:07:14.010
> 
> 标签：java, swing, events, jtable

我将 a 添加`ListSelectionListener`到 JTable 中，这样当我选择一行时，我会得到我用来填充该行的值的对象。但是当我选择行时，我注意到触发了两个事件：一个用于列选择，我想，另一个用于行选择。有没有办法可以防止两个事件被触发？我将表格选择模式设置为`SINGLE_SELECTION`. 这是我的代码：

```
table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {

  @Override
  public void valueChanged(ListSelectionEvent event) {
    int row = table.convertRowIndexToModel(table.getSelectedRow()); 
    SomeObject someObject = (SomeObject) tableModel.getValueAt(row, 0);
    System.err.println(someObject);
  }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:13:24.793

您可能想`event.getValueIsAdjusting()`在做任何事情之前检查 的值。

如果返回 true，您可以忽略该事件，因为它是“*一系列多个事件中的一个，仍在进行更改*”（引用自 Javadocs）

[`getValueIsAdjusting()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/ListSelectionEvent.html#getValueIsAdjusting%28%29)

[`setValueIsAdjusting()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html#setValueIsAdjusting%28boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:12:52.307

可能是您从取消/选择中获得了两个事件：第一次发生将是取消选择旧项目，随后的事件将是选择新项目。

如果您将先前选择的对象 ( `getSource()`?) 存储在此事件之外，然后检查当前事件是否与上一个事件具有相同的对象。如果是这样，您可以假设您当前正在分析的事件刚刚被取消选择，之前已被选中。如果它们不相等，则更新您的外部变量并实际运行您想要运行的任何代码。

# apache - Symfony 新手：无法在 Apache 中获得正确的 VirtualHosts

> ID：10198340
> 
> 赞同：0
> 
> 时间：2012-04-17T20:07:16.350
> 
> 标签：apache, symfony1, symfony-1.4

开始使用 symfony 进行开发，到目前为止我面临的唯一问题是正确的 Web 服务器设置。我对 Apache 配置不是很熟悉。我正在使用 Plesk VPS：

*   CentOS 5.5
*   阿帕奇/2.2.3
*   Symfony 1.4.17（非沙盒）

我已经设置了一个子域 sf.mydomain.com，其中服务器上的 Web 可访问路径是：

```
/var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/ 
```

symfony 项目在这里：

```
/var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/jobeet/ 
```

Symfony 安装文件在这里：

```
/var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/jobeet/lib/vendor/symfony/data/web/sf/ 
```

我知道不建议您在 httpdocs 下安装，但我只是在测试它。在我的 httpd.conf 中，我添加了这些条目：

```
NameVirtualHost *:80
    <VirtualHost *:80>
      ServerName sf.mydomain.com
      DocumentRoot "/var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/jobeet/web"
      DirectoryIndex index.php
      <Directory "/var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/jobeet/web">
        AllowOverride All
        Allow from All
      </Directory>

      Alias /sf /var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/jobeet/lib/vendor/symfony/data/web/sf
      <Directory "/var/www/vhosts/mydomain.com/subdomains/sf/httpdocs/jobeet/lib/vendor/symfony/data/web/sf">
        AllowOverride All
        Allow from All
      </Directory>
    </VirtualHost> 
```

我的意图是在 mydomain.com/jobeet/web 上有一个非常受欢迎的屏幕，但是现在它不显示图像，并且如果也无法通过 /jobeet/web/sf/sf_default/css/screen.css 路由。我知道我可以将“lib/vendor/symfony/data/web/sf/”复制到“/web”，但我想知道我在这里做错了什么？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:42:03.460

您是否尝试过使用 CLI 发布资产，只需尝试运行以下任务，这将发布 symfony 的默认资产（用于教义插件等的资产）。

```
symfony plugin:publish-assets 
```

# php - 我的 cURL 坏了，我认为登录页面正在重定向到备用 URL

> ID：10198347
> 
> 赞同：0
> 
> 时间：2012-04-17T20:07:47.490
> 
> 标签：php, redirect, curl, authentication

我想知道是否有人在这里有任何想法。这是一种在组织网页上获取基本 HTML 表格的方法，一次 30 个，用 HTML 链接分页以增加“orgs”变量，允许您通过更改 URL 进入下一个 30。

```
$number = 1;
$zenLink = "https://z2.zendesk.com/organizations.xml?page=".$number;

if (isset($_GET['orgs'])){ 
$number = $_GET['orgs'];
$number = $number + 1;
$zenLink = "https://z2.zendesk.com/organizations.xml?page=".$number;
}

//Above is the incrementer for next page navigation links to get paginated Zendesk list of orgs

$c = curl_init($zenLink);
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_USERPWD, 'user@email.com:password'); //ZENDESK login

$page = curl_exec($c);
echo $page; 
```

$page 吐出“无法验证您的身份”。这可能是我需要设置的一些 curl 选项，我只是不知道它是什么。我有一种感觉，它是用于跟踪重定向的 curl 选项，但我不知道如何根据上面的源代码获取它......这个确切的代码就像一周前一样工作......在登录 URL 重定向之前已到位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:55:58.523

你可以设置一个选项来阻止它验证，你可以试试这个。

curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

如果这不起作用，那么您将需要检查您的用户名和密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T21:15:47.620

我调试 cURL 的第一步总是打开 VERBOSE 并将其写入日志。

```
$ch = curl_init();
$fh = fopen('curl.log', 'w');

curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_STDERR, $fh); 
```

现在执行 cURL 处理程序会将调试信息输出到 curl.log，希望这会说一些有用的信息。如果 Harry 是正确的并且您需要关闭 SSL_VERIFYHOST，那么日志将显示“无法验证主机”。

# java - 安卓 db.delete(); 在 ListActivity

> ID：10198348
> 
> 赞同：0
> 
> 时间：2012-04-17T20:07:51.897
> 
> 标签：java, android, sql

我需要帮助...

我创建了一个带有连接到我的数据库的光标适配器的列表视图，并向我显示了我保存在表中的所有内容的列表。我后来创建了一个上下文菜单，在所需行上显示 longckick

上下文位置

```
 id = getListAdapter().getItemId(info.position); 
```

这是我在 databaseHelper 中删除的方法

```
void deleteReg(SQLiteDatabase db)
    {

        db.delete(TabellaRegistry.TABLE_NAME,null, null);
    } 
```

我在我的活动中使用它来删除选定的行：

```
 final SQLiteDatabase db = databaseHelper.getWritableDatabase();
                                databaseHelper.deleteReg(db,null, null, null, null, null, null); 
```

但是这样做...我删除了我表中的所有内容...

如何通过上下文菜单仅删除选定的行？

我希望我自己解释一下，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:01:40.390

通过将 NULL 作为此行的第二个参数传递：

```
db.delete(TabellaRegistry.TABLE_NAME,null, null); 
```

您将始终删除整个表。如Android文档中所述，参数如下：

> **public int delete (String table, String whereClause, String[] whereArgs)**
> 
> table - 要从中删除的表
> 
> whereClause - 删除时应用的可选 WHERE 子句。传递 null 将删除所有行。

因此，假设您要删除 BOOK_ID 为 6 的行，您将拥有如下内容：

```
public boolean deleteTitle(String id) 
{
    return db.delete(DATABASE_TABLE, BOOK_ID + "=" + id, null) > 0;
} 
```

SQLite 类概述：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:18:57.350

如果您查看此方法的 api 文档，您可以自己获得答案。

```
public int delete (String table, String whereClause, String[] whereArgs)

Parameters

table   the table to delete from
whereClause the optional WHERE clause to apply when deleting. Passing null will delete all rows. 
```

您在 where 子句中传递 null ，这是删除所有记录的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:13:32.837

为了删除特定的行，你需要在delete语句中放置一个where子句[delete](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#delete%28java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)

# jquery - Jquery - mouseenter 向下推送内容

> ID：10198353
> 
> 赞同：0
> 
> 时间：2012-04-17T20:08:03.480
> 
> 标签：jquery

真的很抱歉，如果之前有人问过这个问题，但我已经在高处和低处搜索了一个答案，现在找到了一个......

在我的网站上，我有一个“页脚”和一个“底部”。当用户将鼠标悬停在网站的底部时，我希望页脚出现。我已经能够成功地做到这一点（下面的代码）。但是，当用户将鼠标悬停在“底部”div 上时，页脚向下扩展，因此用户必须向下滚动才能查看出现的内容。不是一个大问题，但对用户来说并不是很好。如果在显示页脚时将站点向上推会更好。有谁知道我该怎么做？它只是页脚 div 的 CSS tweek 吗？提前谢谢大家。这是很棒的论坛！

```
$(document).ready(function(){  
$("#bottom").mouseenter(function(){
      $("#footer").stop(true,true).slideDown( function(){
        $("#bottom").addClass("open");
      });
  });
  $("#footer, #bottom").mouseleave( function(){
    $("#footer").stop(true,true).delay(1000).slideUp( function(){
      $("#bottom").removeClass("open");
    });
  });
  $("#footer").mouseenter(function(){
    $("#footer").stop(true,true).slideDown();
  });
});

#footer {
display:none;
height: 200px;
}
#bottom
{
height: 30px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:12:19.797

尝试

```
$('html, body').animate({scrollTop: $(document).height()}, 200); 
```

在 slideDown 函数的回调中。
这会将文档滚动到底部。

**看评论：**

```
 var event = window.setInterval(function() {
     $('html, body').animate({scrollTop: $(document).height()}, 50);
 }, 50);
 $("#footer").stop(true,true).slideDown( function(){
    $("#bottom").addClass("open");
    window.clearInterval(event);
  }); 
```

# installshield - InstallShield 更改公司名称

> ID：10198354
> 
> 赞同：-1
> 
> 时间：2012-04-17T20:08:06.193
> 
> 标签：installshield, installshield-2011

我正在使用 InstallShield Professional v.11，我需要制作多个安装包，唯一的区别是公司名称（它会更改默认安装位置和开始菜单快捷方式的位置）。我该怎么做呢？谢谢，约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:39:45.967

您应该能够使用 InstallShield 的自动化界面。CompanyName 是您可以访问/设置的项目之一。

从 IS2010 开始：

```
' create the automation object
Set m_ISWiProject = CreateObject("IswiAuto16.ISWiProject")
' I think for IS11 it's IswiAuto11; check your Help

' Build path to the .ism file 
strFile = "C:\<WindowsFolder>\Profiles\<UserName>\Personal\MySetups\Test.ism" 
m_ISWiProject.OpenProject strFile
m_ISWiProject.CompanyName="<Company Name>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:36:07.127

您可以尝试一个[项目模板](http://helpnet.installshield.com/installshield17helplib/IHelpTemplates.htm)：

> 项目模板（.ist 文件）包含您希望在创建安装项目或合并模块项目时用作起点的所有默认设置和设计元素。

您可以基于相同的模板为不同的公司创建新项目，但更改公司名称。

[基于模板](http://helpnet.installshield.com/installshield17helplib/IHelpTemplatesNewProject.htm)[创建项目模板](http://helpnet.installshield.com/installshield17helplib/IHelpTemplatesCreate.htm)

# ios - 如何在 iOS 中模拟复印机过渡？

> ID：10198357
> 
> 赞同：1
> 
> 时间：2012-04-17T20:08:22.590
> 
> 标签：ios, xcode, cocoa, image-processing, pixel-manipulation

苹果有一种[复印机过渡](http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)效果，可以将图像逐渐转换为另一个图像。由于转换在 iOS 中不可用，我正在寻找一种替代方法来实现这种效果或类似的东西。我在像素颜色的 UInt8 数组中收集所有图像数据。理想情况下，我希望能够以不同的时间间隔将单独的像素行绘制到屏幕上，以最终完成一幅完整的画面。这可能吗？如果没有，是否有模拟苹果 CICopyMachineTransition 的最佳方法？

# python - apache2 是否仅针对 .conf 更改重新加载，还是允许在应用程序代码更改时使用？

> ID：10198359
> 
> 赞同：0
> 
> 时间：2012-04-17T20:08:40.100
> 
> 标签：python, http, apache2, webserver, wsgi

当我的 python WSGI 应用程序的代码发生更改时，我应该使用 apache2 的重新加载还是正常重启功能？

目前我们使用重新加载，但注意到有时应用程序无法正确加载，即使模块已存在很长时间，与缺少模块有关的错误也会记录到错误文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:19:04.227

'reload' 和 'graceful' 与重新加载 Web 应用程序的效果相同。如果您看到您描述的导入问题，则可能是您的应用程序代码中存在导入顺序依赖项或导入周期的问题。使用 Django 的人经常看到这一点。建议您实际发布您遇到的错误的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:18:49.397

如果可以的话，你应该使用优雅的。但是，如果您的应用程序没有正确退出，您可能必须通过重新启动来强制它。

对于 wsgi，您应该尝试在守护程序模式下运行。当它以守护程序模式运行时，您只需触摸 wsgi 文件并更新其时间戳即可重新启动服务。这将重新加载所有代码而无需重新启动 apache。

这里有更多信息：[http ://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)

这适用于 django，但可能对您的项目有用：[http ://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

# fluent-nhibernate - Fluent NHibernate - 如何创建一个中间有一个桥接表的一对多映射？

> ID：10198360
> 
> 赞同：2
> 
> 时间：2012-04-17T20:08:40.953
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

如何创建中间有桥接表的一对多映射？

我基本上有 3 个表：Items、Tags 和 TagsToItems。

每个项目可以有许多标签，由 TagsToItems 表定义。如何使用 Fluent NHibernate 正确设置此映射？

我一直在玩，`HasMany`但还没有完全弄清楚它是如何与桥牌桌一起工作的。

```
HasMany(x => x.Tags).Table("TagsToItems").KeyColumn("ItemId"); 
```

我最近尝试解决这个问题是这样的：

```
HasManyToMany(x => x.Tags)
                .AsBag()
                .Table("TagsToItems")
                .ParentKeyColumn("ItemId")
                .ChildKeyColumn("TagId")
                .Cascade.All()
                .Inverse(); 
```

然而，这是抛出错误：

> Initializing[Namespace.Item#11] - 无法延迟初始化角色集合：Namespace.DataAccess.NHibernate.Entities.Item.Tags，没有会话或会话已关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:50:52.657

事实证明，问题在于使用与项目关联的标签集合。

无法延迟初始化标签集合，因为当我尝试使用它时（在我看来）NHibernate 会话的会话范围已经关闭。

我通过设置`.Not.LazyLoad()`映射解决了这个问题：

```
HasManyToMany(x => x.Tags)
                .AsBag()
                .Table("TagsToItems")
                .ParentKeyColumn("ItemId")
                .ChildKeyColumn("TagId")
                .Not.LazyLoad()
                .Cascade.All(); 
```

# javascript - 旧的 JavaScript 函数使浏览器崩溃

> ID：10198364
> 
> 赞同：1
> 
> 时间：2012-04-17T20:09:14.780
> 
> 标签：javascript, mootools

我正在将一个 mootools 脚本集成到一个页面上，该页面具有运行导航垂直菜单的非常古老的 JavaScript 函数。这个旧脚本现在很难更改。

换行符是：

```
function stgobj(id) {
    with(document) return nIE && nVER < 5 ? all[id] : nNN4 ? layers[id] : getElementById(id);
} 
```

不确定它的确切目的是什么，但它看起来像是在渲染一些元素。如果评论菜单将消失。

FF、Chrome、IE（不崩溃，但菜单不呈现）

有什么快速补丁可以解决浏览器崩溃的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:17:12.383

看起来它的目的是返回与给定 ID 对应的元素。代码只是根据浏览器使用了一些不同的方法——`document.all`对于 IE5 和更早版本，以及`document.layers`对于 Netscape 4。除非您需要支持那些古老的浏览器，否则您可以将函数更改为仅返回`document.getElementById(id)`. 或者更好的是，完全放弃这个函数并`document.getElementById`直接调用。

但是，如果它使 Firefox 和 Chrome 等现代浏览器崩溃，那么您还应该查看浏览器检测逻辑（填充`nIE`,`nVER`和`nNN4`变量的代码），否则它可能最终会在其他地方崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:17:51.097

这是一个“兼容性”功能`document.getElementById`。我认为你应该能够平等：

```
stgobj = document.getElementById.bind(document); 
```

# amazon-web-services - 在 Amazon RDS 环境中创建新的 MySQL 用户

> ID：10198367
> 
> 赞同：69
> 
> 时间：2012-04-17T20:09:29.283
> 
> 标签：amazon-web-services, amazon-rds

我需要在现有 Amazon RDS 实例上创建一个具有有限权限的新 MySQL 用户。在遇到几条错误消息后，我可以使用官方的 MySQL 管理员工具执行此操作，并且用户现在出现在列表中。但是，我无法分配任何架构权限，因为所有用户都是灰色的。我以实例启动时创建的“主用户”身份登录。不知道从这里去哪里。我确实安装了 RDS 命令行工具，但也无法在那里找到任何东西。想法

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-09T01:50:56.277

您最好的选择可能是使用 mysql 命令行客户端连接到数据库并调用 SQL 命令来创建新用户并为其分配权限。

例如，您可能会运行如下内容：

```
mysql -u [your_master_username] -p -h YOURRDSENDPOINT.rds.amazonaws.com

CREATE USER 'jeffrey'@'%' IDENTIFIED BY 'somepassword';
GRANT SELECT ON [your_database].[some_table] TO 'jeffrey'@'%'; 
```

在 Windows 上，您可以使用 mysql.exe 客户端，无论它在哪里。

**有用的文档**

AWS RDS 安全组文档（常见的混淆区域）：[http ://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithSecurityGroups.html](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithSecurityGroups.html)

用户创建文档：[http ://dev.mysql.com/doc/refman/5.5/en/create-user.html](http://dev.mysql.com/doc/refman/5.5/en/create-user.html)

权限授予文档：[http ://dev.mysql.com/doc/refman/5.5/en/grant.html](http://dev.mysql.com/doc/refman/5.5/en/grant.html)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-05-11T20:23:10.983

我知道这个线程已经有几年的历史了，而且我一直在寻找它，所以我想了解有关 AWS RDS 和用户权限的更新。

您不能`GRANT ALL`用于任何具有 RDS 的用户。当您使用`GRANT ALL`您也尝试提供的语句时`Global`（如 AWS 调用它们`Super Permissions`）以及 AWS RDS 系统的设置方式，它们不允许将全局选项分配给用户。

您必须打破以下权限：

`GRANT SELECT,INSERT,UPDATE,DELETE,DROP on`

一旦设置了安全设置以允许从您的 EC2 实例或 Internet 进行访问，这将允许您的用户连接到 RDS。

希望此信息对遇到与我在 AWS RDS 系统中看到的相同问题的其他人有所帮助。

沃尔多

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-02-20T11:58:10.243

我是这样创建的：

```
CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY 'somepassword';
GRANT SELECT ON mydatabase.* TO 'jeffrey'@'localhost'; 
```

但随后，AWS 拒绝登录该用户。我试图更改管理员权限，但没有成功。我通过mysql工作台**将'localhost'更改为'%' 。**（或者您可以删除用户并重新创建），例如：

```
CREATE USER 'jeffrey'@'%' IDENTIFIED BY 'somepassword';
GRANT SELECT ON mydatabase.* TO 'jeffrey'@'%'; 
```

然后只有我能够通过这个新用户登录。

另外：完成此更改后，您的数据库就允许从任何 ip 连接。如果您需要提高安全性并限制访问 ip（例如：如果这是一个临时数据库），您可以在服务器的 my.cnf 文件中设置绑定地址。

> 绑定地址 = your.ip.add.ress

[在此处输入链接描述](https://stackoverflow.com/a/14779244/219112)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-12T21:03:44.333

我使用 MySQL Workbench 并针对 RDS 执行原始 SQL 取得了最大的成功：

```
CREATE USER 'foo'@'localhost' IDENTIFIED BY 'password'; 
```

更大的问题是权限。最初我尝试过：

```
Grant ALL on *.* to 'foo'@'localhost' 
```

...这会导致访问被拒绝错误。

```
Error Code: 1045\. Access denied for user 'foo'@'%' (using password: YES) 
```

麻烦的权限是RDS没有给我的“超级”权限，而我又不能授予。结果，我被困在手动权限：

```
Grant SELECT on *.* to 'foo'@'localhost';
Grant INSERT on *.* to 'foo'@'localhost';
Grant CREATE on *.* to 'foo'@'localhost'; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-07-11T15:58:25.097

我使用了 mySQL 工作台，它工作正常。只需转到管理/用户和权限，按左下角的“添加帐户”按钮，然后进行配置。您不能授予 SUPER 特权，但其余大部分

# c# - 定义后立即执行 lambda 表达式？

> ID：10198370
> 
> 赞同：39
> 
> 时间：2012-04-17T20:09:52.620
> 
> 标签：c#, lambda

有没有办法在定义后立即执行 lambda 表达式？

换句话说（无效的 C# 代码）：

```
(() => { Console.WriteLine("Hello World"); }).Invoke(); 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-17T20:11:42.917

当然。

```
new Action(() => { Console.WriteLine("Hello World"); })(); 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-17T20:21:47.670

另一个“选项”，它只是另外两个答案，形式略有不同：

```
((Action)(() => { Console.WriteLine("Hello World"); }))(); 
```

原因，*直接取自 phoog 的评论*：

> ...你还没有告诉编译器你想要一个`Action`还是`Expression<Action>`. 如果您将该 lambda 表达式转换为*，*`Action`您将能够对其调用 Invoke 或使用方法调用语法 () 来调用它。

不过它肯定会变得丑陋，而且我不知道这种形式在哪里有用，因为它不能用于没有名称的递归......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T20:12:11.373

你应该能够做到这一点：

```
Action runMe = () => { Console.WriteLine("Hello World"); };
runMe(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-31T15:06:34.977

这是一个如何使用它的示例。您希望使用无法编写为函数的几行代码的结果来初始化构造函数，因为这就是第 3 方 API 的结构。

它只是防止编写一个从未在其他任何地方调用过的独立函数的胶水代码。我用的是`Func`代替`Action`，但答案和user166390一样。

```
 // imagine several dozens of lines that look like this
        // where the result is the return value of a function call
        fields.Add(new ProbeField(){ 
            Command = "A",
            Field = "Average",
            Value = be.GetAverage()
        });

        // now you need something that can't be expressed as function call
        // so you wrap it in a lambda and immediately call it.
        fields.Add(new ProbeField(){ 
            Command = "C",
            Field = "Cal Coeff",
            Value = ((Func<string>)(() => {
                CalCoef coef;
                Param param;
                be.GetCalibrationCoefficients(out coef, out param);
                return coef.lowDet1.ToString();
            }))()
        }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-15T17:42:28.483

对于我自己的项目，我有时会编写一个微小的可重用辅助函数，以使立即调用的 lambda 的语法看起来更短。这个“Inv”的灵感来自于 LanguageExt 库中类似的“fun”函数。

```
// Helper utility functions
public static void Inv(Action a) => a();
public static T Inv<T>(Func<T> f) => f();

private static void TestMethod()
{
    // Action example
    Inv(() => Console.WriteLine("Hello World!"));
    // Func example with no parameters
    bool result = Inv(() =>
    {
        if (1 == 1)
            return true;
        else
            return false;
    });
} 
```

你也可以用一些其他的重载来扩展它，这样你就可以传入参数，但是这些在语法上看起来有点麻烦，并且可能没有那么有用。

```
public static Func<A, T> Inv<A, T>(Func<A, T> f) => f;
public static Func<A, B, T> Inv<A, B, T>(Func<A, B, T> f) => f;

string printNumber = Inv((int number) => $"This is the number {number}")(5);
int addedNumbers = Inv((int x, int y) => x + y)(5, 6); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-08T04:48:09.780

```
using System.Threading.Tasks;
using System.Threading;

Task.Run(()=>{
     //do something
}); 
```

程序员真的喜欢让事情变得比他们应该做的更困难

您可以添加 500 毫秒的延迟

```
Task.Run(()=>{
    Thread.Sleep(500);
    //do something
}); 
```

然后下一个逻辑扩展是将参数传递给您的匿名函数。您可以使用范围执行此操作：

```
var x=1;
Task.Run(()=>{
    x++;
}); 
```

然后你基本上可以把剩下的 C# 扔到窗外了。如果你喜欢这种函数式风格，我建议使用 JS 或 C。

# c# - mongo bson 插入/读取子记录

> ID：10198373
> 
> 赞同：0
> 
> 时间：2012-04-17T20:09:59.757
> 
> 标签：c#, mongodb, bson, database

我想插入一条有孩子的记录，然后用c#将写入的内容显示在屏幕上。这是我到目前为止所拥有的：

```
 MongoCollection<BsonDocument> house= building.GetCollection<BsonDocument>("house");
    BsonDocument rooms= new BsonDocument {
                { "roomName", name},
                { "location",  <--child array here: 1stfloor, 2ndlfloor, topfloor.
                { "roomID", guidstring}
                };

    house.Insert(rooms); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:30:13.380

你的意思是为了调试目的？为此，您可以将文档转换为 JSON 字符串：

```
Console.WriteLine(rooms.ToJson()); 
```

您还可以使用 mongo shell 查看您的文档。运行 mongo shell，然后键入：

```
> use buildings // or whatever your database name is
> db.house.find()
... your documents displayed here
> 
```

如果您的集合有很多文档，您可能希望包含某种查询来缩小显示的文档范围。

您还应该考虑使用 C# 类定义域模型，并让驱动程序为您将它们与 BSON 文档相互转换。

# c# - 自动实现的属性和附加功能

> ID：10198378
> 
> 赞同：0
> 
> 时间：2012-04-17T20:10:32.480
> 
> 标签：c#

有没有办法在 C# 中做这样的事情：

```
public class Class2 {
 public string PropertyName1 { get 
   {
         return this; //i mean "PropertyName1"
   }
   set {
       this = value;
       DoAdditionalFunction();
   }
} 
```

因为我需要在“集合”中调用附加函数，所以我需要一个额外的私有字段，例如

```
private string _propertyName1;
 public string PropertyName1 { get 
   {
         return _propertyName1;
   }
   set {
       _propertyName1= value;
       DoAdditionalFunction();
   } 
```

我不想使用像 _propertyName1 这样的附加属性。有没有办法实现这一点或任何最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:12:09.337

不 - 如果您需要除了最琐碎的“设置字段，返回字段值”之外的*任何*行为，您需要编写“完整”属性。自动实现的属性*只是*琐碎属性的简写。

请注意，就对象的实际内容而言，您并没有真正获得“额外”私有字段 - 只是您明确声明了私有字段，而不是让编译器自动为您做实施的财产。

（不清楚你的第一个属性试图做什么——在类中设置是无效的，除非你已经转换*为*`this`字符串，否则你不能从字符串类型的属性返回......）`this`

# jquery - jQueryUI DatePicker 12 个月单击日期时查看“跳跃”

> ID：10198379
> 
> 赞同：1
> 
> 时间：2012-04-17T20:10:40.770
> 
> 标签：jquery, jquery-ui, datepicker

我正在尝试使用 jquery-ui-1.8.17 显示和设置 12 个月的日期选择器日历。在[样式化 jQueryUI DatePicker](https://stackoverflow.com/questions/1309194)的帮助下，日历最初显示良好，即它在 3 行中显示完整的一年，每行包含 4 个月。但是，当我单击日历中的某一天时，显示会跳转到包含 12 个月的 1 行！任何人也看到这种奇怪的行为或有解决方案吗？

注意：在我的代码中，我包含了 jquery-ui-1.8.17.custom.css。这是使用[http://jqueryui.com/themeroller](http://jqueryui.com/themeroller)生成的文件。请参阅 css 文件中的链接。

这是完整的代码

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">        
    <link rel="stylesheet" type="text/css" media="screen" href="http://www.j2u.nl/jquery-ui-1.8.17.custom.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js" type="text/javascript"></script>
    <script src="http://jquery-ui.googlecode.com/svn-history/r3982/trunk/ui/i18n/jquery.ui.datepicker-nl.js" type="text/javascript"></script>

    <script>
     $(document).ready(function(){
        $(".datepicker").datepicker ({
        dateFormat: 'dd-MM-yy',
        firstDay: 1, // rows starts on Monday
        minDate: new Date(),
        maxDate: '+1Y',
        numberOfMonths: 12
     });
     $(".ui-datepicker-inline").width("850px");
     $(".ui-widget").css("font-size","0.9em");
     });
  </script>         
</head>
<body>
     <p><div class="datepicker"></div></p>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T19:05:44.150

哇，将问题发布到 jquery-ui 错误列表 5 分钟后，有人回答了。基本上 numberOfMonths: [3,4] 和添加的样式就可以了：

```
<style>.ui-widget { font-size: 62.5% }</style>
<script>
 $(document).ready(function(){
    $(".datepicker").datepicker ({
    dateFormat: 'dd-MM-yy',
    firstDay: 1, // rows starts on Monday
    minDate: new Date(),
    maxDate: '+1Y',
    numberOfMonths: [3,4]
 });
 }); 
```

# php - PHP测试表单是否上传了文件

> ID：10198380
> 
> 赞同：-1
> 
> 时间：2012-04-17T20:10:52.337
> 
> 标签：php, forms

我该怎么做？这些不起作用：

```
if(empty($_FILES)){
  echo "there is no file uploaded";
  exit;
} else {
  echo "there is file";
}

if(sizeof($_FILES)!=0){
  echo "there is file";
} else {
  echo "there is no file";
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T20:17:13.737

尝试

样本 ：

```
<?php

if (isset ( $_FILES ['image'] )) {
    if ($_FILES ["image"] ["error"] == UPLOAD_ERR_OK) {
        echo "File Was Uploaded AND OK";
    } else {
        echo "File Was Uploaded but BAD";
    }
} else {
    echo "No File Uploaded";
}

?>

<form method="post" enctype="multipart/form-data">
    <label for="file">Filename 1:</label> <input type="file" name="image"
        id="file" /> <br /> <input type="submit" name="submit" value="Submit" />
</form> 
```

您可以在此处查看更多示例[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:12:39.587

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:16:12.243

您可以使用 is_array($_FILES) 检查它是否包含数组格式的文件信息

# c# - 在 Windows 窗体上拖动时调整矩形大小

> ID：10198381
> 
> 赞同：2
> 
> 时间：2012-04-17T20:10:59.797
> 
> 标签：c#, winforms, gdi+

我在我的 Windows 窗体上绘制了一个矩形，我想使用提供的手柄之一来调整它的大小！

![在此处输入图像描述](../Images/86dbf564c6a034a0c08aac5229e1a652.png)

```
Rectangle areaRect = new Rectangle(100,100, 300, 300);
Bool dragging = false;
Point ptOld = new Point(0, 0);

protected override void OnPaint(PaintEventArgs e)
{
  Graphics dcPaint = e.Graphics;
  dcPaint.DrawRectangle(rectPen, areaRect);
}

protected override void OnMouseDown(MouseEventArgs e)
{
  ptOld = new Point(e.X, e.Y);
  dragging = true;
}

protected override void OnMouseMove(MouseEventArgs e)
{
  if(dragging = true) 
  {
    Point ptNew = new Point(e.X, e.Y);
    Int32 handleSelected = GetSelectedHandle(ptNew);

   // Lets say I want to resize this rectangle using Handle 2 now.
    if(handleSelected == 2) 
    {
      // I am resizing this rectangle Width
      areaRect.X += ptNew.X - ptOld.X;
      areaRect.Width -= ptNew .X - ptOld.X;

      this.Invalidate();
    }
  }
}

protected override void OnMouseUp(MouseEventArgs e)
{
  dragging = false;
} 
```

它会给我这样的效果。哪个是对的，

![在此处输入图像描述](../Images/5776fd426039e30ba6aeb3db658fd409.png)

我想对此进行一些小的调整，我也想改变这个矩形的高度，当我移动点 2 时，我的点 7 应该保持原样，像这样......类似地当我移动第 4 点，我的第 5 点应该完好无损，第 7 点和第 2 点也是如此。

![在此处输入图像描述](../Images/b49bdd51ad0d9537b2d911bec6006b9e.png)

任何想法，如何进行，因为如果我改变高度，我的第 7 点位置也会改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:16:52.480

在 WinForms 中绘制`MouseMove`这样的图形不会很顺利。

在调整矩形大小之前，您基本上需要对矩形的引用。

我添加了以下代码来跟踪矩形和 8 个可拖动点：

```
private Point GetHandlePoint(int value) {
  Point result = Point.Empty;

  if (value == 1)
    result = new Point(areaRect.Left, areaRect.Top);
  else if (value == 2)
    result = new Point(areaRect.Left, areaRect.Top + (areaRect.Height / 2));
  else if (value == 3)
    result = new Point(areaRect.Left, areaRect.Bottom);
  else if (value == 4)
    result = new Point(areaRect.Left + (areaRect.Width / 2), areaRect.Top);
  else if (value == 5)
    result = new Point(areaRect.Left + (areaRect.Width / 2), areaRect.Bottom);
  else if (value == 6)
    result = new Point(areaRect.Right, areaRect.Top);
  else if (value == 7)
    result = new Point(areaRect.Right, areaRect.Top + (areaRect.Height / 2));
  else if (value == 8)
    result = new Point(areaRect.Right, areaRect.Bottom);

  return result;
}

private Rectangle GetHandleRect(int value) {
  Point p = GetHandlePoint(value);
  p.Offset(-2, -2);
  return new Rectangle(p, new Size(5, 5));
} 
```

以下是我如何修改您的表单代码：

```
private Rectangle areaRect = new Rectangle(100, 100, 300, 300);
private Rectangle oldRect;
private int dragHandle = 0;
private Point dragPoint;

public Form1() {
  InitializeComponent();
  this.DoubleBuffered = true;
}

protected override void OnMouseDown(MouseEventArgs e) {
  for (int i = 1; i < 9; i++) {
    if (GetHandleRect(i).Contains(e.Location)) {
      dragHandle = i;
      oldRect = areaRect;
      dragPoint = GetHandlePoint(i);
    }
  }
  base.OnMouseDown(e);
}

protected override void OnMouseMove(MouseEventArgs e) {
  if (dragHandle == 1) {
    // to do
  } else if (dragHandle == 2) {
    int diff = dragPoint.X - e.Location.X;
    areaRect = new Rectangle(oldRect.Left - diff, oldRect.Top, oldRect.Width + diff, oldRect.Height);
  } else if (dragHandle == 7) {
    int diff = dragPoint.X - e.Location.X;
    areaRect = new Rectangle(oldRect.Left, oldRect.Top, oldRect.Width - diff, oldRect.Height);
  }

  if (dragHandle > 0)
    this.Invalidate();

  base.OnMouseMove(e);
}

protected override void OnMouseUp(MouseEventArgs e) {
  dragHandle = 0;
  base.OnMouseUp(e);
}

protected override void OnPaint(PaintEventArgs e) {
  e.Graphics.DrawRectangle(Pens.Red, areaRect);
  for (int i = 1; i < 9; i++) {
    e.Graphics.FillRectangle(Brushes.DarkRed, GetHandleRect(i));
  }
  base.OnPaint(e);
} 
```

发布的代码仅执行第 2 点和第 7 点，但这应该会给您一些逻辑来使用。我确信这段代码可以改进，它只是一个工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-01T22:03:27.623

虽然这有点旧，但这是此类任务的第一个（据我所知也是唯一有用的）结果。

我已经使用上述示例来增强和实施经过测试的解决方案。就我而言，我还想让矩形严格位于另一个矩形内。具体来说，我在 PictureBox 中绘制它，我希望它永远不会超出图片之外。这就是 max_width 和 max_height 对应的内容。

请注意，有时它有点有趣 - 当在某些方向上达到最小尺寸时，它会在另一个方向上重新调整尺寸。我决定我喜欢这种行为，并且它应该是一个功能。:)

```
protected void pictureBox1_OnMouseMove(object sender, MouseEventArgs e)
{
        // Where I started - where I stopped
        int x_diff = dragPoint.X - e.Location.X;
        int y_diff = dragPoint.Y - e.Location.Y;

        // Minimum values
        int small_offset = 5;
        int left = small_offset;
        int top = small_offset;
        int width = small_offset;
        int height = small_offset;

        // Max values
        int max_width = this.pictureBox1.Image.Width;
        int max_height = this.pictureBox1.Image.Height;

        if (dragHandle == 1)
        {
            left = Math.Max(oldRect.Left - x_diff, left);
            top = Math.Max(oldRect.Top - y_diff, top);
            width = Math.Min(Math.Max(oldRect.Width + x_diff, width), max_width - left - small_offset);
            height = Math.Min(Math.Max(oldRect.Height + y_diff, height), max_height - top - small_offset);
        }
        else if (dragHandle == 2)
        {
            left = Math.Max(oldRect.Left - x_diff, left);
            top = oldRect.Top;
            width = Math.Min(Math.Max(oldRect.Width + x_diff, width), max_width - left - small_offset);
            height = oldRect.Height;
        }
        else if (dragHandle == 3)
        {
            left = Math.Max(oldRect.Left - x_diff, left);
            top = oldRect.Top;
            width = Math.Min(Math.Max(oldRect.Width + x_diff, width), max_width - left - small_offset);
            height = Math.Min(Math.Max(oldRect.Height - y_diff, height), max_height - top - small_offset);
        }
        else if (dragHandle == 4)
        {
            left = oldRect.Left;
            top = Math.Max(oldRect.Top - y_diff, top);
            width = oldRect.Width;
            height = Math.Min(Math.Max(oldRect.Height + y_diff, height), max_height - top - small_offset);
        }
        else if (dragHandle == 5)
        {
            left = oldRect.Left;
            top = oldRect.Top;
            width = oldRect.Width;
            height = Math.Min(Math.Max(oldRect.Height - y_diff, height), max_height - top - small_offset);
        }
        else if (dragHandle == 6)
        {
            left = oldRect.Left;
            top = Math.Max(oldRect.Top - y_diff, top);
            width = Math.Min(Math.Max(oldRect.Width - x_diff, width), max_width - left - small_offset);
            height = Math.Min(Math.Max(oldRect.Height + y_diff, height), max_height - top - small_offset);
        }
        else if (dragHandle == 7)
        {
            left = oldRect.Left;
            top = oldRect.Top;
            width = Math.Min(Math.Max(oldRect.Width - x_diff, width), max_width - left - small_offset);
            height = oldRect.Height;

        }
        else if (dragHandle == 8)
        {
            left = oldRect.Left;
            top = oldRect.Top ;
            width = Math.Min(Math.Max(oldRect.Width - x_diff, width), max_width - left - small_offset);
            height = Math.Min(Math.Max(oldRect.Height - y_diff, height), max_height - top - small_offset);
        }

        if (dragHandle > 0)
        {
            areaRect = new Rectangle(left, top, width, height);
            this.Invalidate();
        }
} 
```

# html - iPad上的iOS UIWebView窗口宽度和高度

> ID：10198383
> 
> 赞同：2
> 
> 时间：2012-04-17T20:11:02.893
> 
> 标签：html, css, ios, ipad, uiwebview

因此，我正在创建一个在未命名应用程序中的 UIWebView 内运行的全屏广告。基本上，我根本无法修改视口元标记，所以我的应用程序需要精确到 1023x767 才能全屏显示，并且不会在 web 视图中滚动。它在 95% 的时间里都有效，除了一个触发奇怪错误的场景。如果我从横向开始，然后旋转到水平，我可以在 webview 周围滚动应用程序，就好像它比视口大一样。

在 CSS 中，我有：

```
@media only screen and (orientation: portrait) {
    html, body {
        width: 767px;
        height: 1023px;
        overflow:hidden;
        position:relative;
    }
}

@media only screen and (orientation:landscape) {
    html, body {
        width: 1023px;
        height: 767px;
        overflow:hidden;
        position:relative;
    }
} 
```

我正在检测方向变化的事件，我得到：

```
$('html').width() = 767
$('html').height() = 1023
$('body').width() = 767
$('body').height() = 1023 
```

但是，我发现我同时也得到了这个，这显然是问题所在，但我不知道为什么或如何解决它：

```
$(window).width() = 1023
$(window).height() = 1365 
```

有什么想法吗？任何人！？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:15:13.923

因此，通过更多研究，我无法使用 veiwport 元标记来建立 width=device-width 的原因是因为视口实际上设置为比设备宽度小 1px。然后，您将在该死像素区域的视口中滚动。该应用程序检测到左右滑动以在不同的 web 视图之间进行更改，因此您无法执行“e.preventDefault()”来禁用滚动，并且将其卡在 1px 的滚动中会破坏应用程序中的滑动功能。

长话短说，我能够做到：

viewport=(device-width-1) 并解决了这个问题。该应用程序的人们不知道这是可能的，我什至不确定这样的事情是否可能，但它做到了，所以刷卡仍然可以发生，因为你没有被困在那个死角中。

# datetime - Monotouch iOS 中 SOAP 响应中的 System.DateTime.ParseExact 错误

> ID：10198386
> 
> 赞同：1
> 
> 时间：2012-04-17T20:11:15.300
> 
> 标签：datetime, soap, mono, xamarin.ios, xml-serialization

我有一个应用程序正在对另一个应用程序进行 SOAP Web 服务调用（这里没有 JSON 可能性）。一些回复很好。问题是其中一个调用正常，但响应返回`System.DateTime.ParseExact`错误。我检查了 SOAPUI 中的日期格式，它返回为：`2012-02-05-05:00`

错误信息是：

> 在 /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/DateTime.cs 中的 System.DateTime.ParseExact（System.String s，System.String[] 格式，IFormatProvider 提供程序，DateTimeStyles 样式）[0x0005c]： 1761 在 System.DateTime.ParseExact（System.String s，System.String 格式，IFormatProvider 提供程序，DateTimeStyles 样式）[0x0001c] 在 /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/DateTime.cs:1741在 System.DateTime.ParseExact（System.String s，System.String 格式，IFormatProvider 提供程序）[0x00000] 在 /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/DateTime.cs:927 在 System.Xml .Serialization.XmlCustomFormatter.FromXmlString（System.Xml.Serialization.TypeData 类型，System.String 值）[0x001d4] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlCustomFormatter。 CS：275 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.GetValueFromXmlString（System.String 值，System.Xml.Serialization.TypeData typeData，System.Xml.Serialization.XmlTypeMapping typeMap）[0x00047] 在 /Developer/MonoTouch/Source/mono/mcs/类/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:652 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadPrimitiveValue (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x0003e] 在 /Developer/MonoTouch/Source/mono/ mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:638 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObjectElement (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x0003f] 在 /Developer/MonoTouch/Source/单声道/mcs/class/System.XML/System.Xml。序列化/XmlSerializationReaderInterpreter.cs:614 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x0082c] in /Developer/MonoTouch/Source/mono /mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:464 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] 在 / Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:240 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable,Boolean checkType) [0x000d5] in /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:230 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml. Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00031] in /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:193 at System.Xml.Serialization。 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs 中的 XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00076]： 220 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00031] in /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:193 at System.Xml.Serialization。 XmlSerializationReaderInterpreter.ReadObjectElement (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x0005c] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:620 在 System.Xml。 Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x005fb] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml .Serialization/XmlSerializationReaderInterpreter.cs:434 在 System.Xml.Serialization。XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:240在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x000d5] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml .Serialization/XmlSerializationReaderInterpreter.cs:230 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00031] 在 /Developer/MonoTouch/Source/mono/mcs/class /System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter。cs:193 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObjectElement (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x0005c] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/ XmlSerializationReaderInterpreter.cs:620 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x005fb] in /Developer/MonoTouch/Source/mono/mcs /class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:434 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMessage (System.Xml.Serialization.XmlMembersMapping typeMap) [0x0015a] 在 /Developer/MonoTouch/Source/mono /mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs：154 在 System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot () [0x0004c] 在 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializationReaderInterpreter.cs:92 在 System.Xml。 /Developer/MonoTouch/Source/mono/mcs/class/System.XML/System.Xml.Serialization/XmlSerializer.cs:361中的Serialization.XmlSerializer.Deserialize（System.Xml.Serialization.XmlSerializationReader阅读器）[0x0001c]序列化/XmlSerializer.cs:361序列化/XmlSerializer.cs:361

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:28:18.160

这看起来不像一个问题（见注释），但是，如果我弄错了，这里为什么......

```
case "date": return DateTime.ParseExact (value, "yyyy-MM-dd", null); 
```

[这是XmlCustomFormatter.cs](https://github.com/mono/mono/blob/master/mcs/class/System.XML/System.Xml.Serialization/XmlCustomFormatter.cs#L275) （github 上提供的源代码）中的第 275 行，它显示了 Mono 期望日期的格式（正确或错误）。

这与您在问题中提供的字符串不匹配`2012-02-05-05:00`，这会导致您现在遇到的异常。这可能是 Mono 中的错误，或者，如果 Microsoft 实现的行为相同，则可能是您正在调用的 Web 服务的问题。

**注意：**在[http://bugzilla.xamarin.com填写错误报告](http://bugzilla.xamarin.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:49:41.040

几年前我已经看到了这个，它阻止了我将几个 Web 服务项目移植到 Mono。我可以确认 Mono 的行为与 Microsoft .Net 不同。我不清楚这是否是一个错误，但许多 Web 服务以“yyyy-mm-dd”以外的格式返回日期，有些添加了“Z”或其他时区规范，有些有时间。您可以修补 Mono 以使用 System.DateTime.Parse，但是为此必须使用自定义 Mono 构建会很痛苦。

# jquery - css & jQuery：元素在点击/拖动时改变大小

> ID：10198392
> 
> 赞同：0
> 
> 时间：2012-04-17T20:11:46.927
> 
> 标签：jquery, html, css

我做了一个小部件：鼠标按下一个hilited单词，弹出一个菜单。拖动到您的选择，释放。菜单弹出。

小部件功能正常，但单击/拖动会使小部件元素改变大小并四处移动，这不是所需的行为。css 真的很简单，所以我不知道从哪里开始。

这是小提琴。[http://jsfiddle.net/monsto/JfWQ3/1/](http://jsfiddle.net/monsto/JfWQ3/1/)

这是CSS

```
body {margin:25px;}
li {cursor: pointer; display: inline-block; border:1px solid black; position:relative;height:20px;}
.del {display: none;background-color: red; width:50%; float:left;text-align:center;position:relative;}
.save {display: none;background-color: green;width:50%; float:right;text-align:center;position:relative;}
.word {display: inline-block;}​ 
```

和一些html

```
<div id="taglist">
    <br /><hr />
        Quisque ut felis urna, eget rutrum odio. Proin sed augue at 
            <li>
                    <span class="word">enim consectetur</span>
                    <div class="del">+</div>
                    <div class="save">-</div>
            </li>
        Ut interdum erat at neque egestas sagittis sed non massa. Nullam nec nulla quis purus convallis venenatis. Vivamus a pulvinar mauris. Quisque suscipit augue a felis suscipit ornare.
            <li>
                    <span class="word">euismod.</span>
                    <div class="del">+</div>
                    <div class="save">-</div>
            </li>
        Aliquam eget quam sit amet lacus commodo malesuada.            
            <li>
                    <span class="word">Etiam</span>
                    <div class="del">+</div>
                    <div class="save">-</div>
            </li>
        Ut interdum erat
            <li>
                    <span class="word">eget</span>
                    <div class="del">+</div>
                    <div class="save">-</div>
            </li>
     leo in turpis congue porta vel non nisl. Mauris ipsum erat, pellentesque at ullamcorper at, egestas ac enim. Aliquam fringilla mollis porttitor. In tempor pretium gravida.
    <hr /><br />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:00:36.753

`div`我认为问题在于浏览器为两个浮动的s分配了少量空间。我能够通过使用绝对定位而不是浮动来解决问题（至少在 Firefox 中）：

```
.del {
    display: none;
    background-color: red;
    width:50%;
    text-align:center;
    position: absolute;
    left: 0;
    top: 20px;
}
.save {
    display: none;
    background-color: green;
    width:50%;
    text-align:center;
    position: absolute;
    right: 0;
    top: 20px;
} 
```

# zend-framework - Zend 框架日期到 MySQL

> ID：10198394
> 
> 赞同：0
> 
> 时间：2012-04-17T20:11:50.630
> 
> 标签：zend-framework, zend-form-element, zendx

嗨，我正在使用 zendx 表单元素日期选择器

```
$datadinascita = new ZendX_JQuery_Form_Element_DatePicker('datadinascita');
$datadinascita->setLabel('Data di nascita:')
    ->setJQueryParam('dateFormat', 'dd-mm-yy')
    ->setJQueryParam('changeYear', 'true')
    ->setJqueryParam('changeMonth', 'true')
    ->addValidator(new Zend_Validate_Date(array('format' => 'dd-mm-yyyy')))
    ->setRequired(true); 
```

我会将日期 dd-mm-yyyy 转换为 yyyy-mm-dd 以插入 mysql。之后，我如何将新日期重新转换为原始日期以便再次使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:37:38.487

使用标准的 PHP`date`和`strtotime`函数：

```
<?php
$mysqlDate = date('Y-m-d', strtotime($datadinascitaDate);
$datadinascitaDate = date('d-m-y', strtotime($mysqlDate); 
```

# c# - 创建一个静态字典对象，填充数据库中的值

> ID：10198397
> 
> 赞同：1
> 
> 时间：2012-04-17T20:12:04.727
> 
> 标签：c#, .net

我想让一个字典对象包含从数据库生成的字符串键和值。但是，我只需要在页面加载时运行一次。（C#.NET）

我可以通过哪种方式做到这一点？我尝试了以下方法：

```
public static class GlobalVar
{
    static Dictionary<string, string> GenerateLoginStatus(Dictionary<string, string> List)
    {
        string Query = "SELECT * FROM LoginStatus";
        DataTable Types = MyAdoHelper.ExecuteDataTable(GlobalVar.dbName, Query);
        foreach (DataRow Row in Types.Rows)
        {
            List.Add(Row["Status_Title"].ToString(), Row["Status_Info"].ToString());
        }
        return List;
    }

    public const string GlobalString = "ProjectDatabase.mdf";

    public static Dictionary<string, string> LoginTypes = GenerateLoginStatus(LoginTypes);

} 
```

表结构：

```
Status_Title        Status_Info

AlreadyLoggedIn     User is already logged in.

A                   B

C                   D 
```

我在另一个页面中使用它：`GlobalVar.LoginStatus["AlreadyLoggedIn"]`

“AlreadyLoggedIn”肯定是在数据库中创建的，但是当我调用任何键时，它会返回一个异常（不知道是哪个异常）。

编辑：我稍微更改了代码，现在它给出了“'GlobalVar' 的类型初始化程序引发了异常。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:27:33.860

我想您可能会得到空引用异常，这是因为您使用要初始化的实例调用静态初始化方法（`LoginTypes`）：

```
public static Dictionary<string, string> LoginTypes =
    GenerateLoginStatus(LoginTypes); 
```

`GenerateLoginStatus`执行时为`LoginTypes`空。但是您尝试向其中添加项目：

```
static Dictionary<string, string> GenerateLoginStatus(
    Dictionary<string, string> List)
{
    // ...
    List.Add(Row["Status_Title"].ToString(), Row["Status_Info"].ToString()); 
```

这会导致空引用异常。您应该使用类型构造函数并在那里创建该字典：

```
static GlobalVar()
{
    LoginTypes = new Dictionary<string, string>();
    // proceed with initialization
} 
```

# jquery - jquery 如何用于检查标签上的“禁用”属性？

> ID：10198398
> 
> 赞同：35
> 
> 时间：2012-04-17T20:12:04.863
> 
> 标签：jquery, html

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-17T20:15:53.990

尝试

```
$('#anchorID').is('[disabled=disabled]') 
```

`disabled="disabled"`如果是元素的属性，将返回 true 。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-04-17T20:16:31.730

新的和改进的方法是使用jQuery的`prop()`函数：[http ://api.jquery.com/prop/#prop1](http://api.jquery.com/prop/#prop1)

`$('#anchorID').prop("disabled");`

> 属性和属性之间的区别在特定情况下可能很重要。在 jQuery 1.6 之前，.attr() 方法在检索某些属性时有时会考虑属性值，这可能会导致行为不一致。从 jQuery 1.6 开始，.prop() 方法提供了一种显式检索属性值的方法，而 .attr() 检索属性。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-17T20:14:03.663

尝试：

```
$('#anchorID').prop("disabled"); 
```

看：

[http://api.jquery.com/prop/#prop1](http://api.jquery.com/prop/#prop1)

更新：+1 对 Ayman Safadi 的回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-25T16:06:24.743

一个 JS 替代方案：

```
let hasDisabledAttr =  document.querySelector('#anchorID').hasAttribute('disabled'); 
```

返回`true`或`false`。

# jquery - jquery对话框提交时出现403错误

> ID：10198403
> 
> 赞同：0
> 
> 时间：2012-04-17T20:12:23.103
> 
> 标签：jquery, jquery-ui-dialog

因此，我让 jquery 对话框工作到它通过 ajax 打开时调用脚本的位置，以填充对话框内的表单字段。一切正常，但是当我单击操作按钮以更新对话框中的记录时，我在 FireBug 中收到 403 错误。在研究了我在任何导致 403 错误的字段中具有此值时：

```
http:// 
```

如果我在对话框中的任何字段中取出 http://，那么操作按钮就可以正常工作。当他们单击操作按钮进行更新时，这是我的功能。在序列化之前，我是否需要对其进行一些编码？

```
"Update Form": function() {

                if($("#UpdateForm").validate().form() == true) {

                    var formSend = $("#UpdateForm"); 
                    var formData = formSend.serialize();

                    $('#formresults').html('<tr><td colspan="4"><span>Loading form results...</span></td></tr>');

                    $.ajax({
                        type:'POST',
                        cache:false,
                        url:'/update_form.php?action=updateform',
                        data:formData,
                        dataType:'json',
                        success: function(data) {

                            $('#formresults').html(data.records);

                        }

                    });

                }

                return false;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:27:19.900

抱歉，这与 jquery 无关。显然，这是在服务器上安装的 apache 安全模块中触发规则。再次抱歉。

# containers - 创建非数据库驱动的查找

> ID：10198411
> 
> 赞同：3
> 
> 时间：2012-04-17T20:13:04.563
> 
> 标签：containers, lookup, axapta, x++, dynamics-ax-2012

有很多用于创建查找的参考资料，但似乎都是从查询中提取它们的值。

我想向一个字段添加一个查找，该字段将从不来自表、查询或任何其他数据源的值列表中添加项目。

例如来自字符串：“Bananas, Apples, Oranges” ..或容器 ["Bananas", "Apples", "Oranges"]

假设字符串/容器是一个动态对象。从静态枚举中提取不是一种选择。

有没有办法从数据源以外的东西动态创建查找？

示例代码会很有帮助，但我也会提供一些提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:08:23.723

有[颜色选择器](http://www.axaptapedia.com/Color_picker)。

您还会在其中`Global`找到`pickXxxx`诸如[pickList](http://msdn.microsoft.com/en-us/library/global.picklist.aspx)。还有其他的`pickUser`，`pickUserGroup`等等。

看一下实现。我猜他们建立了一个临时表然后显示它。桌子很棒！

更新：

去你自己[遵守规则](http://www.axaptapedia.com/index.php?title=Lookup_Form)。

对于高级用户，另请参阅：[查找表单返回多个值](http://kashperuk.blogspot.com/2010_01_01_archive.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T12:30:20.180

```
public void lookup()
{
    SysTableLookup                  sysTableLookup;
    TmpTableFieldLookup             tmpTableFieldLookup; 
    Enumerator                      en;    
    List                            entitylist      = new list(types::String);

    entitylist.addend("Banana");
    entitylist.addend("Apple");

    en = entityList.getEnumerator();

    while (en.moveNext())
    {
        tmpTableFieldLookup.TableName = en.current();               
        tmpTableFieldLookup.insert();
    }

    sysTableLookup = SysTableLookup::newParameters(tableNum(tmpTableFieldLookup), this);

    sysTableLookup.addLookupfield(fieldNum(TmpTableFieldLookup, TableName));

    //BP Deviation documented
    sysTableLookup.parmTmpBuffer(tmpTableFieldLookup);
    sysTableLookup.performFormLookup();
} 
```

上面的代码有助于将字符串显示为查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:44:55.907

我也猜想没有表格就无法执行查找。我这么说是因为查找只是一种具有一个或多个以不同方式显示的数据源的表单。

我也写过关于这个的博客，所以你可以在这里获得一些关于如何执行查找的信息，即使是一个临时表：

[http://devexpp.blogspot.com.br/2012/02/dynamics-ax-custom-lookup.html](http://devexpp.blogspot.com.br/2012/02/dynamics-ax-custom-lookup.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:02:28.400

这不是最优雅的解决方案，但这确实有效，并且不会覆盖或修改任何本机 AX 2012 对象：

```
Copy the sysLookup form from AX2009 (rename it) and import it into AX 2012\.     
We'll call mine myLookupFormCopy.
I did a find/replace of "sysLookup" in the XPO file to rename it. 
```

创建此类方法：

```
public static client void lookupList(FormStringControl _formStringControl, List _valueList, str _columnLabel = '')
{
Args    args;
FormRun formRun;
;

if (_formStringControl && _valueList && _valueList.typeId() == Types::String)
{
    args = new Args(formstr(myLookupFormCopy));
    args.parmObject(_valueList);
    args.parm(_columnLabel);
    formRun = classFactory.formRunClass(args);
    _formStringControl.performFormLookup(formRun);
}
} 
```

在字符串控件的查找方法中，使用：

```
public void lookup()
{
List    valueList = new List(Types::String);
;

...build your valueList here...

MyClass::lookupList(this, valueList, "List Title");

super();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-18T08:53:36.157

来自 global::PickEnumValue 的示例：

```
static int pickEnumValue(EnumId _enumId, boolean _omitZero = false)
{
    Object      formRun;
    container   names;
    container   values;
    int         i,value = -1,valueIndex;
    str         name;
    #ResAppl
    DictEnum dictEnum = new DictEnum(_enumId);
    ;
    if (!dictEnum)
        return -1;

    for (i=1;i<=dictEnum.values();i++)
    {
        value = dictEnum.index2Value(i);
        if (!(_omitZero && (value == 0)))
        {
            names += dictEnum.index2Label(i);
            values += value;
        }
    }
    formRun = classfactory.createPicklist();
    formRun.init();
    formRun.choices(names, #ImageClass);
    formRun.caption(dictEnum.label());
    formRun.run();
    formRun.wait();
    name = formRun.choice();
    value = formRun.choiceInt();
    if (value>=0) // the picklist form returns -1 if a choice has not been made
    {
        valueIndex = -1;
        for (i=1;i<=conLen(names);i++)
        {
            if (name == conPeek(names,i))
            {
                valueIndex = i;
                break;
            }
        }
        if (valueIndex>=0)
            return conPeek(values,valueIndex);
    }

    return value;
} 
```

# ios - 自定义 UIPickerView - 限制用户一次只能旋转一个轮子

> ID：10198413
> 
> 赞同：0
> 
> 时间：2012-04-17T20:13:09.483
> 
> 标签：ios, xcode, uipickerview

我有一个自定义`UIPickerView`，其中包含三个相互依赖的组件（即，第二个显示值取决于第一个中选择的内容，第三个取决于第一个和第二个）。我得到的值显示`UIPickerView`在`NSDictionary`.

一切都很好，除了当我同时旋转两个组件时，应用程序有时会崩溃（没有时间重新加载数据）。这就是我的`pickerView:didSelectRow:inComponent`样子：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
{
    NSLog(@"Selecting row %d component %d", row, component);

    // When A is changed, we need to reload B and C
    if (component == 0) {

        [pickerView reloadComponent:1];
        [pickerView selectRow:0 inComponent:1 animated:YES];

        // need to reload the C after reloading B
        [self pickerView:pickerView didSelectRow:0 inComponent:1];

    }
    else if (component == 1) {
        [pickerView reloadComponent:2];
        [pickerView selectRow:0 inComponent:2 animated:YES];
    }
    [self updateSelection];
} 
```

有没有办法防止用户一次旋转多个选择器组件以防止崩溃？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:34:17.433

好圣洁的耶稣，你`didSelectRow:component:`递归地呼唤！

我知道你处理参数的方式会阻止它超过两个层次，但仍然不要那样做。曾经。

没有办法阻止用户一次旋转多个组件。多点触控和 iOS 的乐趣在于让一切都处于运动状态，并看着它全部稳定到一致的状态。而且由于微调器组件需要时间来解决，用户只需用一根手指就可以将它们全部设置为 atwitter。您必须学会相应地编写代码。

在这种情况下，您希望`didSelectRow:component:`从其自身中删除所有调用 - 它*只能*由系统调用。您在使用 时走在正确的轨道上`reloadComponent:`，只是您没有重新加载足够的它们：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    NSLog(@"Selecting row %d component %d", row, component);

    [self updateSelection];

    // When A is changed, we need to reload B and C
    if (component == 0) {
        [pickerView reloadComponent:1];
        [pickerView reloadComponent:2];
    } else if (component == 1) {
        [pickerView reloadComponent:2];
    }
} 
```

我不知道你做了什么`updateSelection`- 大概它根据`pickerView`. 这很好 - 但它需要发生在您的方法的顶部，以便当您调用`titleForRow`or`viewForRow`中的任何一个时，它都有适当的数据可供选择。此外，在这三个 ( `update`, `titleFor`, `viewFor`)中的任何一个中，***都不***会将值断言到选择器中！只是从中阅读。

我认为这对您来说是一个很好的起点，但是随着您越来越接近目标，您将不得不在这里和那里进行一些调整。我认为您会发现 Pickers 的关键在于，它们仅`didSelectRow:component:`在组件微调器中的一个事情确定为某个值时才断言，并且如果您重新加载它们，它们非常适合继续旋转。试一试，看看您是否可以取得一些进展，如果遇到困难，请回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:25:12.427

一次旋转两个轮子意味着您启用了多点触控，对吗？因此，一种可能性可能是禁用多点触控并限制用户仅触摸和影响 UIPickerView 中的一个轮子。

这是一个可能有帮助的[链接。](http://joshhighland.com/blog/2009/09/17/uipickerview-spinning-multiple-components/)

# javascript - 我在 Dragstop 上做错了什么？

> ID：10198418
> 
> 赞同：1
> 
> 时间：2012-04-17T20:13:38.010
> 
> 标签：javascript, jquery, jquery-ui, dom, jquery-ui-draggable

我想制作一个元素，在拖动时显示一个透明按钮，在放置时应该在指针所在的位置放置一个新按钮。

[这](http://jsfiddle.net/nagwW/37/)是我的代码。

问题是我无法创建另一个按钮。也`alert("Test")`没有执行。我不知道怎么了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:17:58.567

我收到错误：

```
Uncaught TypeError: Cannot call method 'appendTo' of null 
```

在铬。这就是为什么`alert('test');`没有被执行。

你没有`.css()`正确使用。访问[.css() 上的 jQuery 页面](http://api.jquery.com/css/)以获取正确的语法。

这段代码似乎在做你想做的事（我收到“测试”警报，我可以创建多个按钮）：

```
$('<button id="demo" class="default-button">Text</button>').css({left: x + "px", top: y + "px"}).appendTo('body'); 
```

[编辑] 为了进一步澄清和教导，`.css()`用一个参数（不是对象）返回 CSS，即`$('#id').css('top')`返回 CSS 中“top”的值。如果它是一个对象映射，就像我的解决方案或两个参数中使用的那样，它会设置这些值并返回对象以进行方法链接。

这就是你收到错误的原因。它正在返回“left 10px; top: 10px;”的 CSS 值 或者其他什么，你试图`appendTo()`在那个字符串上做，因此是一个错误。

# google-play - 无法将 Google Play 开发者帐户关联到 Google Checkout

> ID：10198419
> 
> 赞同：3
> 
> 时间：2012-04-17T20:13:43.793
> 
> 标签：google-play, google-checkout

我是一名新加坡开发人员，我的公司（新加坡公司）已注册为 Google Play 开发人员。

根据谷歌（https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324&topic=15867&ctx=topic 和[http://support.google.com/googleplay/android- developer/bin/answer.py?hl=zh-CN&answer=113468](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113468) ) 我有权在 Google Play 上销售付费应用程序，因为我所在的国家/地区新加坡已在此处列出。

说明明确指出：

1) 我需要链接到您的 Google Play 开发者帐户的 Google Checkout 帐户只能在开发者帐户界面中链接一次。

2) 如果您对销售定价应用程序感兴趣，您还需要注册为 Google Checkout 商家。要从 Google Play 发布者网站执行此操作，我需要在[https://play.google.com/apps/publish/](https://play.google.com/apps/publish/)登录我的 Google Play Android 开发者控制台，单击“编辑配置文件”链接，然后选择“设置Google Checkout 的商家帐户。

**但是，当我登录我的 Google Play 开发者控制台并单击“编辑个人资料”时，我没有看到任何链接可以让我将我的 Google Play 开发者帐户链接到 Google Checkout。我也没有看到创建新结帐帐户然后链接它的选项**。如果我尝试独立设置 Google 结帐帐户，即“经典”结帐帐户，它只会为我提供 2 个国家/地区作为选项 - 英国和美国（这两个国家都不是我公司所在的地方）。

关于如何解决这个问题的任何想法？我通过电子邮件向 Google Play 支持发送了电子邮件，但令人惊讶的是他们无法为我解决这个问题。

我目前实际上不在新加坡 - 我尝试从美国 IP 以及非美国（但也非新加坡）IP 登录，但这些都没有成功。

我很绝望 - 我有两个准备上传的应用程序，但由于它们不是免费的，所以无法发布它们。我已经尝试了所有我能想到的将我的 Google Play 开发者帐户与新的 Google Checkout 帐户相关联的方法，但一直无法这样做。

# c# - 使用 CreateFile 打开目录

> ID：10198420
> 
> 赞同：3
> 
> 时间：2012-04-17T20:13:51.777
> 
> 标签：c#, winapi, directory, createfile

我正在尝试利用 CreateFile 函数来访问目录信息。但是，我收到一个 5 的 win32 错误代码，这意味着访问被拒绝。请指教。

```
CreateFile(path, GENERIC_READ, FILE_SHARE_READ, IntPtr.Zero, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, IntPtr.Zero); 
```

这是正在进行的调用，并且如文档中所述，正在使用“FILE_FLAG_BACKUP_SEMANTICS”。DLL 导入似乎工作正常，如下所示：

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern IntPtr CreateFile(string filename,
                                    uint desiredAccess,
                                    uint sharedMode,
                                    IntPtr securityAttributes,
                                    uint creationDisposition,
                                    uint flagsAndAttributes,
                                    IntPtr templateFile); 
```

更新：我需要获取目录的句柄，以便我可以使用 GetFileInformationByHandle() 并提取唯一 ID。此方法当前适用于文件，目前不适用于目录。

更新：这个问题的 X 是我需要一个目录的唯一标识符，它不是它的绝对路径。即使目录被移动或重命名，它也需要保持不变。.NET没有提供刚才提到的任何唯一标识符，只能通过win32来实现

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T00:18:29.570

首先，您应该在应用程序中包含清单，以确保它在管理员权限下运行。然后您应该使用API启用`SE_BACKUP_NAME`权限。`AdjustTokenPrivileges`然后我建议你使用`FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE`标志作为`sharedMode`. 现在您应该可以使用`CreateFile`打开目录句柄并使用`GetFileInformationByHandle`来获取`BY_HANDLE_FILE_INFORMATION`.

**更新**：可能以下简单的演示程序可以帮助您

```
#include <windows.h>
#include <tchar.h>

int _tmain()
{
    HANDLE hAccessToken = NULL;
    HANDLE hFile = INVALID_HANDLE_VALUE;

    __try {
        LUID luidPrivilege;
        DWORD dwErrorCode;
        BY_HANDLE_FILE_INFORMATION fiFileInfo;

        // -----------------------------------------------------
        // first of all we need anable SE_BACKUP_NAME privilege
        // -----------------------------------------------------
        if (!OpenProcessToken (GetCurrentProcess(),
                               TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY,
                               &hAccessToken))
            __leave;

        if (LookupPrivilegeValue (NULL, SE_BACKUP_NAME, &luidPrivilege)) {
            TOKEN_PRIVILEGES tpPrivileges;
            tpPrivileges.PrivilegeCount = 1;
            tpPrivileges.Privileges[0].Luid = luidPrivilege;
            tpPrivileges.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
            AdjustTokenPrivileges (hAccessToken, FALSE, &tpPrivileges, 
                                   0, NULL, NULL);
            if ((dwErrorCode = GetLastError ()) != ERROR_SUCCESS)
                __leave;
        }
        else
            __leave;

        // -----------------------------------------------------
        // now one can open directory and get 
        // -----------------------------------------------------
        hFile = CreateFile (TEXT("C:\\"),
                            0, //GENERIC_READ, 
                            0, //FILE_SHARE_READ, //FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
                            NULL,
                            OPEN_EXISTING, 
                            FILE_FLAG_BACKUP_SEMANTICS,
                            NULL);
        if (hFile == INVALID_HANDLE_VALUE)
            __leave;
        if (!GetFileInformationByHandle (hFile, &fiFileInfo))
            __leave;

        _tprintf(TEXT("VolumeSerialNumber: 0x%08X\n"), fiFileInfo.dwVolumeSerialNumber);
        _tprintf(TEXT("FileIndex: 0x%08X%08X\n"), fiFileInfo.nFileIndexHigh, fiFileInfo.nFileIndexLow);
    }
    __finally {
        if (hFile != INVALID_HANDLE_VALUE)
            CloseHandle (hFile);
        if (hAccessToken != NULL)
            CloseHandle (hAccessToken);
    }

    return 0;
} 
```

该程序打开`C:\`目录并显示卷序列号和文件索引，它们标识了 NTFS 上的目录。为了使程序更短，我删除了所有错误消息（参见`__leave`语句）。就像我之前已经提到的那样，您应该将`requireAdministrator`其用作“UAC 执行级别”（请参阅​​链接器设置的“清单文件”部分）。上面的代码已经过测试，它对我有用。您可以在 C# 中重现相同的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-21T09:44:45.483

更新：可能以下简单的演示程序可以帮助您...

我试图 SetFileTime() 但它是错误的。我已经修改了：

```
hFile = CreateFile(  TEXT("C:\\MyDirectory"),
// 0, //GENERIC_READ,
GENERIC_READ | GENERIC_WRITE,
// 0, //FILE_SHARE_READ, //FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
FILE_SHARE_READ | FILE_SHARE_WRITE,
NULL,
OPEN_EXISTING,
FILE_FLAG_BACKUP_SEMANTICS,
NULL); 
```

没关系。谢谢。安德烈。

# function - wordpress 附加图像上的灯箱效果

> ID：10198423
> 
> 赞同：0
> 
> 时间：2012-04-17T20:14:10.787
> 
> 标签：function, wordpress, lightbox

我有这段代码可以在帖子上显示附加的图像：

```
<?php   

 $args = array(
   'post_type' => 'attachment',
   'numberposts' => -1,
   'post_status' => null,
   'post_parent' => $post->ID,
   'exclude'     => get_post_thumbnail_id()
  );

  $attachments = get_posts( $args );
     if ( $attachments ) {
        foreach ( $attachments as $attachment ) {
           echo '<a href="';
           echo wp_get_attachment_url( $attachment->ID );
           echo '" rel="lightbox">';
           echo wp_get_attachment_image( $attachment->ID, 'large' );
           echo '</a>';
          }
     }

  ?> 
```

但我无法弄清楚为什么灯箱不工作！我已经尝试过 colorbox、shadowbox、ligthbox 插件等......它只是无法加载。当您单击图像时，它只会在页面中打开。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:44:49.633

看看你的主题来电

```
wp_head(); 
```

在你的头文件和

```
wp_footer(); 
```

在您的页脚文件中，如果您缺少此插件，​​插件将不起作用。

# php - 通过php将MySQL数字转换为货币？

> ID：10198426
> 
> 赞同：0
> 
> 时间：2012-04-17T20:14:23.287
> 
> 标签：php, mysql, database

我正在提取一些 MySQL 数据库，目前它没有十进制格式。

一旦通过 SELECt 函数从数据库中选择它，是否可以通过 php 执行此操作？

我希望它从 2500 转换为 25.00 英镑？

很可能非常简单，我只是无法理解它！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:16:39.293

查看[money_format](http://us.php.net/manual/en/function.money-format.php)和[number_format](http://us.php.net/manual/en/function.number-format.php)

请注意，`money_format`仅适用于支持 C 库函数的系统`strfmon`（Windows 不支持）。否则，您将需要`number_format`通过 SQL 使用或格式化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:16:52.227

[number_format](http://php.net/manual/en/function.number-format.php)获胜！

```
number_format($row['price'] / 100, 2, '.', ' ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:17:42.697

在打扰 PHP 之前，您可以只使用 MySQL 来完成此任务：[FORMAT()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format)
它具有使用 mysql 语言环境的巨大优势，并且不需要来自 PHP 的额外资源（这些资源很少；但我们不都是极简主义者吗？ )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:36:02.967

我为此使用[money_format](http://php.net/manual/en/function.money-format.php)。这是代码：

```
$value = 2500;
$value = $value / 100;
setlocale(LC_MONETARY, 'en_GB');
$value = money_format("%.2n", $value);
echo $value; 
```

输出：

```
£25.00 
```

# dll - 在哪里放置非托管库的 dll？

> ID：10198428
> 
> 赞同：27
> 
> 时间：2012-04-17T20:14:24.090
> 
> 标签：dll, dependencies, unmanaged, nuget

我正在尝试为依赖 ghostscript 的库创建一个 Nuget 包，因此引用 gsdll32.dll - 一个非托管库。我不能只包含一个标准的 dll 引用。我在哪里把它放在 nuget 目录结构中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-10-09T15:06:37.147

将一个`build`文件夹添加到包中，例如，如果包具有 id `MyPackage`，则添加一个名为`MyPackage.targets`该文件夹的 MSBuild 目标文件。`.targets`文件与文件同名很重要`.nuspec`。在`.nuspec`文件中，您必须有这样的部分：

```
<files>
    <file src="lib\*.*" target="lib" />
    <file src="build\MyPackage.targets" target="build" />
</files> 
```

这将在项目文件中添加一个指向该`.targets`文件的 MSBuild 元素。

此外，要仅注册托管 dll，请添加如下部分：

```
<references>
    <reference file="MyManaged.dll" />
</references> 
```

该`.targets`文件应如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"> 
  <Target Name="CopyMyPackageFiles" AfterTargets="AfterBuild"> 
    <ItemGroup> 
      <MyPackageFiles Include="$(MSBuildThisFileDirectory)..\lib\*.*"/> 
    </ItemGroup> 
    <Copy SourceFiles="@(MyPackageFiles)" DestinationFolder="$(OutputPath)" > 
    </Copy> 
  </Target> 
</Project> 
```

现在，**所有**文件（包括非托管文件）都将在构建后复制到项目输出文件夹（例如 \bin\debug）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-14T19:17:45.570

上面的参考可以工作，但它实际上修改了您的构建后事件以推送文件，如果您遇到我们遇到的情况，这实际上可能无法解决您的问题。

我们遇到的问题是一个依赖 DLL 无法注册，但必须与另一个需要由 nuget 注册的 DLL 并存**，因此它需要存在于 lib 目录中但不能注册。**

nuspec 引用现在允许您指定**lib**目录中的哪些 DLL 现在在 Visual Studio 项目中显式注册，您只需在**元数据**区域的 nuspec 文件中添加一个显式**引用**列表（如果这不存在默认行为nuget 的目的是尝试在 lib 下注册所有内容）。

这是我的意思的示例 nuspec 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<package xmlns="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd">
    <metadata>
        <id>SomePackageID</id>
        <version>1.0.1</version>
        <title>Some Package Title</title>
        <authors>Some Authors</authors>
        <requireLicenseAcceptance>false</requireLicenseAcceptance>
        <description>Blah blah blah.</description>
        <references>
            <reference file="ceTe.DynamicPDF.Rasterizer.20.x86.dll" />          
        </references>
    </metadata>
    <files>
        <file src="\\SomeNetworkLocation\ceTe.DynamicPDF.Rasterizer.20.x86.dll" target="lib\ceTe.DynamicPDF.Rasterizer.20.x86.dll" />
        <file src="\\SomeNetworkLocation\DPDFRast.x86.dll" target="lib\DPDFRast.x86.dll" />
    </files>
</package> 
```

如您所见，`ceTe.DynamicPDF.Rasterizer.20.x86.dll`需要注册，但`DPDFRast.x86.dll`只需要存在于该目录中以支持其他 DLL 并且不会被注册，但通过一些动态引用魔法最终将被复制到目标**bin**目录中，因为 Visual Studio 看到第一个 DLL 依赖于第二个。

这是原始的[nuspec 参考](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Explicit_Assembly_References)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T18:10:40.033

Nuget 论坛上的回复：http: [//nuget.codeplex.com/discussions/352689](http://nuget.codeplex.com/discussions/352689)

> pranavkm：SQLCE 包有一个类似的问题，我们通过 PS 脚本处理。[在https://bitbucket.org/davidebbo/nugetpackages/src/1cba18b864f7/SqlServerCompact/Tools](https://bitbucket.org/davidebbo/nugetpackages/src/1cba18b864f7/SqlServerCompact/Tools)查看脚本 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-08T01:23:12.227

我在很大程度上使用 Lars Michael 的方法来解决这个问题，但我需要补充的一件事来自 James Eby 的回答。Visual Studio 试图在我的`lib`目录中注册所有 dll，所以我`references`在 nuspec 文件的元数据中添加了一个元素，告诉它只注册托管 dll：

```
<references>
    <reference file="FANNCSharp.dll" />          
</references> 
```

也在

```
<MyPackageFiles Include="$(MSBuildProjectDirectory)\..\Packages\MyPackage\lib\*.*"/> 
```

我首先尝试了我的 package 的 id `FANNCSharp-x64`，但它需要完整的包名：`FANNCSharp-x64.0.1.4`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-29T15:56:03.080

我遇到的一个问题是包路径相对于项目文件并不总是在同一个地方。以下对我有用：

1.  在 NuGet 包中，将非托管 DLL 放在 lib\native 文件夹中。

2.  将以下脚本添加到工具文件夹：

安装.ps1

```
#This script creates or updates a PackagesPath property in the project file
param($installPath, $toolsPath, $package, $project)

$project.Save()

#Load the csproj file into an xml object
[xml] $xml = Get-Content -path $project.FullName

#grab the namespace from the project element 
$nsmgr = New-Object System.Xml.XmlNamespaceManager -ArgumentList $xml.NameTable
$nsmgr.AddNamespace('a',$xml.Project.GetAttribute("xmlns"))

#find or create the property
$property = $xml.Project.SelectSingleNode("//a:PropertyGroup//a:PackagesPath", $nsmgr)
if (!$property)
{
    $property = $xml.CreateElement("PackagesPath", $xml.Project.GetAttribute("xmlns"))
    $propertyGroup = $xml.CreateElement("PropertyGroup", $xml.Project.GetAttribute("xmlns"))
    $propertyGroup.AppendChild($property)
    $xml.Project.InsertBefore($propertyGroup, $xml.Project.ItemGroup[0])
}

#find the relative path to the packages folder
$absolutePackagesPath = (get-item $installPath).parent.FullName
push-location (split-path $project.FullName)
$relativePackagesPath = Resolve-Path -Relative $absolutePackagesPath
pop-location

#set the property value
$property.InnerText = $relativePackagesPath

#save the changes.
$xml.Save($project.FullName) 
```

3.  将目标文件添加到构建文件夹。（将“MyPackage”更改为您的包裹名称）。为目标使用唯一名称，如“CopyMyPackage”，避免与试图定义“AfterBuild”目标的其他包发生冲突。此目标文件使用上述脚本定义的 $(PackagesPath) 属性。

MyPackage.targets

```
<?xml version="1.0" encoding="utf-8"?> 
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"> 
  <Target Name="CopyMyPackage" AfterTargets="AfterBuild"> 
    <ItemGroup> 
      <MyPackageSourceFiles Include="$(PackagesPath)\MyPackage.*\lib\native\*.*"/> 
    </ItemGroup> 
    <Copy SourceFiles="@(MyPackageSourceFiles)" DestinationFolder="$(OutputPath)" > 
    </Copy> 
  </Target> 
</Project> 
```

4.  最后，将“MyPackageReadMe.txt”添加到 Content 文件夹。这将使软件包能够安装。

另见：[http ://alski.net/post/2013/05/23/Using-NuGet-25-to-deliver-unmanaged-dlls.aspx](http://alski.net/post/2013/05/23/Using-NuGet-25-to-deliver-unmanaged-dlls.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-26T21:36:10.393

对于 .NET Core，如果您知道本机代码的目标运行时平台，这非常简单。构建时，您可能会注意到 bin 树下的 .NET Core 构建文件夹中有一个名为“runtimes”的文件夹。它看起来像这样：

[![.NET Core 中的运行时平台文件夹](../Images/c73aabdfcdea1198f8a9677718708301.png)](https://i.stack.imgur.com/qWPkH.png)

这些文件夹旨在保存任何特定于平台的内容，包括非托管/本机 DLL。

在您的 NuGet 包中，在“文件”部分下添加以下内容：

```
<file src="[source path for file in package]" target="runtimes\[platform]\native\[file name]" /> 
```

在执行应用程序时，运行时环境会在相应的平台目录中寻找非托管的 dll。

如果要针对多个平台，只需为每个平台添加另一个文件条目。

# python - python宽度语法错误

> ID：10198430
> 
> 赞同：1
> 
> 时间：2012-04-17T20:14:28.220
> 
> 标签：python, linux, syntax

我正在使用 python 2.7.2 运行 Ubuntu。

脚本

```
python \
/home/blainer/Desktop/convert/converter.py \
/home/blainer/Desktop/convert/urban.shp \
/home/blainer/Desktop/convert/result.js \
--width 900 \
--country_name_index 4 \
--where "ISO = 'USA'" \
--codes_file /home/blainer/Desktop/convert/codes-en.tsv \
--insets '[{"codes": ["US-AK"], "width": 200, "left": 10, "top": 370}, {"codes": ["US-HI"], "width": 100, "left": 220, "top": 400}]' \
--minimal_area 4000000 \
--buffer_distance -3000 \
--simplify_tolerance 1000 \
--longtitude0 10w \
--name us 
```

错误

```
blainer@ubuntu:~/Desktop/convert$ python script.py
File "script.py", line 5
--width 900 \
          ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T20:18:28.590

这不是 Python 脚本，而是运行 Python 的 shell 脚本。

1.  命名它`script.sh`，不是`.py`。
2.  在顶部添加一个“shebang”行：`#!/bin/bash`
3.  使其可执行：`chmod +x ./script.sh`
4.  运行：`blainer@ubuntu:~/Desktop/convert$ ./script.sh`

# yahoo - Robots.txt 允许一些特定的爬虫并拒绝所有其他爬虫

> ID：10198431
> 
> 赞同：0
> 
> 时间：2012-04-17T20:14:33.737
> 
> 标签：yahoo, robots.txt, googlebot, msn

我最近在我的服务器上遇到了很多 CPU 峰值，不知何故我相信这不是真正的流量，或者它的某些部分不是真实的。所以我现在只想允许谷歌机器人、MSN 和雅虎。如果以下 robots.txt 文件符合我的要求，请指导我。

```
用户代理：Googlebot
用户代理：Slurp
用户代理：msnbot
用户代理：Mediapartners-Google*
用户代理：Googlebot-Image
用户代理：Yahoo-MMCrawler
不允许：

用户代理： *
不允许： /

```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T13:18:14.877

您的 robots.txt 似乎是有效的。

*   一条记录[可以有几`User-agent`行](https://stackoverflow.com/a/20307057/1591669)。
*   `Disallow:`允许抓取所有内容。
*   以 开头的记录`User-agent: *`仅适用于与上一条记录不匹配的机器人。
*   `Disallow: /`禁止爬行任何东西。

但请注意：只有优秀的机器人才会遵循 robots.txt 中的规则——而且优秀的机器人很可能不会过度使用常见的爬行频率。因此，要么你需要提高你的表现，要么应该归咎于不太好的机器人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T20:19:44.363

首先`Disallow:`应该是：

```
Allow: / 
```

实际上，如果您想允许所有这些用户代理为您的站点编制索引。

# hibernate - XML 验证与 Java 验证

> ID：10198432
> 
> 赞同：1
> 
> 时间：2012-04-17T20:14:35.557
> 
> 标签：hibernate, validation

我正在使用休眠验证，并且正在讨论对于遗留 Pojos 来说，这将是一种更好的验证形式。Hibernate 允许通过 XML [http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html/validator-xmlconfiguration.html进行验证](http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html/validator-xmlconfiguration.html)

新的可以用更容易阅读的约束来注释。但是，对于无法注释的较旧/生成的代码，将其放在 XML 中不容易理解代码。在这种情况下，我更喜欢进行通常的 Java 验证。

有人有偏好吗？我是fXML，我想明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:08:17.857

我使用 XML 方法是因为我需要注释的类是由 JAXB 生成的。所以我实际上被迫使用这种方法，因为我没有要注释的源文件。XML 方法看起来并没有那么糟糕，尽管注释更容易阅读。

我看到使用 XML 的一个优点是能够将所有验证信息集中在一个文件中，但您不再喜欢编译时检查。

# ios - 制作多个 NSURLConnections 并使用 sendAsynchronousRequest:queue:completionHandler: iOS 5 方法

> ID：10198433
> 
> 赞同：2
> 
> 时间：2012-04-17T20:14:35.707
> 
> 标签：ios, networking, nsurlconnection, nsoperationqueue, http-request

我在设置与`sendAsynchronousRequest:queue:completionHandler:`方法（`NSURLConnection`类）相关的正确配置时遇到了一些困难。

我的情况如下：

我建立了一个管理不同`NSURLConnection`s 的单例类。这个单例实例有一个`NSOperation Queue`（称为`downloadQueue`），它向 Web 服务器发出请求并检索字符串路径 (1)。完成后，该路径用于在 Web 服务器 (2) 中下载文件。最后，当文件正确下载后，我需要更新 UI (3)。

我只找到了第一个请求：我可以通过它下载路径。您能建议我执行其他两个步骤的方法吗？

这里有几个问题：

*   下载队列（`downloadQueue`）不是主要的，是否可以在该队列中打开一个新的 NSURLConnection ？换句话说，它正确吗？（参见代码片段中的注释）

*   如果上一个问题是正确的，我该如何获取主队列并更新 UI？

这是我用来执行第一步的代码片段，其中`downloadQueue`是可以通过访问器方法（`@property`/ `@synthesized`）获取的实例变量；

```
// initializing the queue...
downloadQueue = [[NSOperation alloc] init];    

// other code here...
[NSURLConnection sendAsynchronousRequest:urlRequest queue:[self downloadQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    if([data length] > 0 && error == nil) {

        // here the path (1)
        // how to perform a second connection?
        // what type of queue do I have to use?              
    }
}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T21:43:11.063

您在执行第一次下载时处于正确的轨道上。

在第一次下载后的完成处理程序块中，您正在计算第二次下载所需的 URL，对吗？然后您可以以相同的方式执行第二次下载：`+[NSURLConnection sendAsynchronousRequest:...]`使用新的 URL 和相同的队列再次调用。您可以在第一次下载的完成块中执行此操作。

要在第二次下载完成后更新 UI，请切换到该下载完成块内的主队列。您可以使用`dispatch_async()`or来执行此操作`dispatch_sync()`（在这种情况下，这无关紧要，因为您在下载队列上没有进一步的工作要做） and `dispatch_get_main_queue()`，或使用`-[NSOperationQueue addOperationWithBlock:]`and `+[NSOperationQueue mainQueue]`。

您的代码应如下所示：

```
// init download queue
downloadQueue = [[NSOperationQueue alloc] init];    

// (1) first download to determine URL for second
[NSURLConnection sendAsynchronousRequest:urlRequest queue:[self downloadQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    if([data length] > 0 && error == nil) {
        // set newURLRequest to something you get from the data, then...
        // (2) second download
        [NSURLConnection sendAsynchronousRequest:newURLRequest queue:[self downloadQueue] completionHandler:^(NSURLResponse *newResponse, NSData *newData, NSError *newError) {
            if([newData length] > 0 && newError == nil) {
                [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                    // (3) update UI
                }];
            }
        }];
    }
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:21:52.037

据我所知，要更新 ui，您必须在主线程上执行此操作。ui 可以从其他线程更新，但这些更新并不完全可靠。在我放在一起向 Web 服务发出请求的应用程序中，我使用 dispatch_async() 来访问主队列，然后我从该调用更新表视图，在我的例子中是表视图。

```
dispatch_async(dispatch_get_main_queue(), ^{
    //block to be run on the main thread
    [self.tableView reloadData];
}); 
```

我希望这有帮助。

# linq - 在自定义集合上使用 IQueryable 过滤

> ID：10198436
> 
> 赞同：1
> 
> 时间：2012-04-17T20:14:58.930
> 
> 标签：linq

我正在尝试使用 LINQ 替换以下代码..

```
public List<LineItem> GetEULineItems(PurchaseOrder p)
    {
        List<LineItem> EULineItems = new List<LineItem>();

            foreach (LineItem li in p.OrderForms[0].LineItems)
            {
                if (li[Constants.ProductSource] != null)
                {
                    if (li[Constants.ProductSource].ToString().Trim() == "EU")
                    {
                        EULineItems.Add(li);
                    }
                }
            }

        return EULineItems;
    } 
```

我试过了，但我遇到了一个例外..

```
 IQueryable<LineItem> EULineItems = p.OrderForms[0].LineItems.AsQueryable().Where(s => s.ProductSource == "EU"); 
```

例外：“System.Linq.IQueryable”不包含“Where”的定义，并且找不到接受“System.Linq.IQueryable”类型的第一个参数的扩展方法“Where”（您是否缺少 using 指令或装配参考？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:20:25.217

假设您实际上使用的是自定义集合，您不是在寻找 IQueryable，而是在寻找 IEnumerable，并且应该可以直接使用：

```
IEnumerable<LineItem> EULineItems = p.OrderForms[0]
                                     .LineItems
                                     .Where(s => s.ProductSource == "EU"); 
```

（当然前提是`using System.Linq`您的代码文件中有一个）。

# c# - 在 ODP.NET 中选择最近使用 ALTER TABLE 插入的列时出错

> ID：10198437
> 
> 赞同：1
> 
> 时间：2012-04-17T20:15:08.560
> 
> 标签：c#, .net, oracle, odp.net

1- 使用 Oracle.DataAccess 连接到 Oracle XE

2-执行命令向表中添加列：alter table TABLE add COLUMN b int;

3-执行命令以选择此列

4- 使用 DataReader 读取。应用程序引发 IndexOutOfRangeException：无法在结果集中找到指定的列

5-重新启动应用程序，查询正常运行

为什么 DataReader 无法访问我刚才创建的列？

这是一个大而简单的测试代码：

```
private void button1_Click(object sender, EventArgs e)
{
    using (OracleConnection con = new OracleConnection(Settings.Default.CS))
    {
        con.Open();
        try
        {
            using (OracleCommand com = new OracleCommand())
            {
                com.Connection = con;

                // Create a test table
                com.CommandText = "CREATE TABLE Test (a int)";
                com.ExecuteNonQuery();

                // Add one column
                com.CommandText = "ALTER TABLE Test ADD b int";
                com.ExecuteNonQuery();

                com.CommandText = "SELECT * FROM Test";
                using (DbDataReader dr = com.ExecuteReader())
                {
                    MessageBox.Show(dr.FieldCount.ToString());
                    // Here is showing "2", thats ok
                }
            }
        }
        finally
        {
            con.Close();
        }
    }
}

private void button2_Click(object sender, EventArgs e)
{
    using (OracleConnection con = new OracleConnection(Settings.Default.CS))
    {
        con.Open();
        try
        {
            using (OracleCommand com = new OracleCommand())
            {
                OracleTransaction trans = con.BeginTransaction();
                try
                {
                    // Add a column to table already created
                    com.Connection = con;
                    com.CommandText = "ALTER TABLE Test ADD c int";
                    com.ExecuteNonQuery();

                    // Insert a value, ok
                    com.CommandText = "INSERT INTO TEST (a, b, c) VALUES (1, 2, 3)";
                    com.ExecuteNonQuery();

                    trans.Commit();
                }
                catch
                {
                    trans.Rollback();
                    throw;
                }

                // Selecting only "c" column
                com.CommandText = "SELECT c FROM Test";
                using (DbDataReader dr = com.ExecuteReader())
                {
                    if (dr.Read())
                        MessageBox.Show(Convert.ToInt32(dr["c"]).ToString());
                        // Showing correct value, ok
                }

                // Uncomment these lines to solve problem
                //con.Close();
                //OracleConnection.ClearAllPools();
                //con.Open();

                // Selecting all fields * from table
                com.CommandText = "SELECT * FROM Test";
                using (DbDataReader dr = com.ExecuteReader())
                {
                    MessageBox.Show(dr.GetSchemaTable().Rows.Count.ToString() + " / " + dr.FieldCount.ToString());
                    // HERE IS THE PROBLEM: message are showing 2/2, but table haves 3 fields

                    if (dr.Read())
                        MessageBox.Show(Convert.ToInt32(dr["c"]).ToString());
                    // Here throws IndexOutOfRangeException: Unable to find specified column in result set
                }
            }
        }
        finally
        {
            con.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:38:15.963

当您执行阅读器时，听起来插入事务尚未提交。我认为您可以通过在插入后关闭连接并在执行阅读器之前再次打开连接来验证这一点（您可能需要使用 OracleConnection.ClearAllPools）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:54:28.477

尝试使用[`OracleConnection.BeginTransaction`](http://docs.oracle.com/html/B28089_01/OracleConnectionClass.htm#CHDJJDEF)创建交易，然后[`Commit`](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleTransactionClass.htm#i1015601)在选择之前，如文档中的[示例](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleTransactionClass.htm#i1015601)所示。

# codeigniter - 让 Uploadify 使用 Codeigniter - 302 HTTP 错误

> ID：10198439
> 
> 赞同：0
> 
> 时间：2012-04-17T20:15:10.213
> 
> 标签：codeigniter, uploadify

试图让 Uploadify 与 Codeigniter 一起工作时，我有点头疼。基本上我要做的是上传多个文件，然后运行数据库查询以将其详细信息添加到我的数据库中。稍后我将添加更复杂的代码（例如获取 EXIF/IPTC 数据），但现在我只需要它获取文件名并在上传后为每张照片插入数据库。

问题是我收到了 HTTP 302 错误。我设置了这个：

```
$config['sess_match_useragent'] = FALSE; 
```

我还将以下内容放入我的 .htaccess 文件中：

```
SecFilterEngine Off
SecFilterScanPOST Off 
```

但它导致整个站点停止工作，引发“内部服务器错误”。

我真的很想让 uploadify 工作，这很棒，只是 Codeigniter 的噩梦！

我的代码如下：

在我看来输入：

```
<input id="fileInput" name="fileInput" type="file" />
     <script type="text/javascript">
        $(document).ready(function() {
        $("#fileInput").uploadify({
            'uploader'       : '<?php echo base_url()?>assets/uploadify/uploadify.swf',
            'script'         : '<?php echo site_url()?>/upload/do_upload/',
            'cancelImg'      : '<?php echo base_url()?>assets/uploadify/cancel.png',
            'fileExt'        : '*.jpg;*.jpeg',
            'folder'         : 'assets/photos/highres',
            'auto'           : true,
            'multi'          : true,
            'onError'        : function (event,ID,fileObj,errorObj) {
                          alert(errorObj.type + ' Error: ' + errorObj.info);
                        }
        });    });

    </script> 
```

我的控制器：

```
public function do_upload()
        {
            // check for login, if logged in
            if($this->session->userdata('logged_in') == "1")
            {
                $config['upload_path'] = 'assets/photos/highres/';
                $config['allowed_types'] = 'jpg';
                $config['max_size'] = '1000000';
                $config['overwrite'] = FALSE;
                $config['remove_spaces'] = TRUE;
                $config['encrypt_name'] = FALSE;

                $this->load->library('upload', $config);

                if(! $this->upload->do_upload('Filedata'))
                {
                    echo $this->upload->display_errors();
                }
                else
                {
                   $errors = $this->upload->display_errors();

                   $upload_info = $this->upload->data();

                   // Insert file information into database
                   $data = array(
                                    'id' => NULL,
                                    'filename' => $upload_info['file_name']
                                );
                   $this->db->insert('photos', $data);
                  }
            } 
            else
            {
                // redirect to signin page if not logged in
                redirect('signin');
            }
        } 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:23:41.957

更改文件 /application/config/mimes.php 添加

```
'application/octet-stream' 
```

上

```
'jpeg'  =>  array('image/jpeg', 'image/pjpeg'),
'jpg'   =>  array('image/jpeg', 'image/pjpeg'),
'jpe'   =>  array('image/jpeg', 'image/pjpeg'),
'png'   =>  array('image/png',  'image/x-png'), 
```

最后是这样的哑剧

```
'jpeg'  =>  array('image/jpeg', 'image/pjpeg', 'application/octet-stream'),
'jpg'   =>  array('image/jpeg', 'image/pjpeg', 'application/octet-stream'),
'jpe'   =>  array('image/jpeg', 'image/pjpeg', 'application/octet-stream'),
'png'   =>  array('image/png',  'image/x-png', 'application/octet-stream'), 
```

# authentication - 用户名：密码与 sftp.site.com

> ID：10198443
> 
> 赞同：1
> 
> 时间：2012-04-17T20:15:31.833
> 
> 标签：authentication, winscp

我在[使用 WinSCP使用以下格式时遇到问题](http://winscp.net/eng/docs/scripting#hostkey)

```
open sftp://user:password@site.com 
```

与此相比，它适用于控制台和 GUI：

```
open sftp.site.com. 
```

我想通过命令行自动登录，但是当我尝试使用 sftp://user:password@site.com 时出现超时。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:26:56.410

它对我来说两种方式都很好。是您使用的问题`site.com`而不是`sftp.site.com`第一个示例中的问题吗？

仅仅因为您指定了协议 sftp，并不意味着它会`sftp.site.com`在您`site.com`作为主机提供时尝试连接。您仍然需要完整的主机名，`sftp://`只需告诉它连接后您要使用的协议。

# c# - SC.EXE - 从 C# 调用 - 拒绝访问

> ID：10198445
> 
> 赞同：2
> 
> 时间：2012-04-17T20:15:45.510
> 
> 标签：c#, permission-denied

我有一个我编写的批处理文件（概念证明）来安装我也创建的示例服务。它包含以下命令行：

```
sc create serviceTest binPath= C:\Sandbox\ServiceTest\ServiceTest.exe DisplayName= "Service Test" 
```

当我右键单击并选择“以管理员身份运行”时，一切都按预期运行。在不这样做的情况下运行批处理文件会给出“拒绝访问”。这证明该命令有效。

我还尝试通过 Process.Start() 运行 sc 命令：

```
const string sc = @"sc";
const string arguments = @"create serviceTest binpath= {0} DisplayName= ""Service Test""";
FileInfo fi = new FileInfo(this.txtServiceLocation.Text);
if (fi.Exists)
{
    ProcessStartInfo psi = new ProcessStartInfo()
    {
        FileName = sc,
        Arguments = string.Format(arguments, fi.FullName),
        UserName = "admin",
        Password = "secret".ToSecureString(),
        Domain = "MYDOMAIN",
        WorkingDirectory = fi.DirectoryName,
        CreateNoWindow = true,
        UseShellExecute = false
    };
    Process.Start(psi);             
}
else
    MessageBox.Show("The service exe could not be found."); 
```

我需要能够以编程方式执行此操作。我需要做什么才能使其正常工作？

澄清：我需要能够在不提示用户的情况下执行此操作。此代码将在自定义 tfs 构建过程下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:31:04.303

默认情况下，在 Windows 7 中，以最低权限访问（非管理员）控制运行大多数应用程序。当您的应用程序尝试修改系统时，需要将其提升到管理员权限才能成功运行。如果您想让此应用程序永久以管理员权限运行，请按照链接中的说明进行操作

[http://www.groovypost.com/howto/microsoft/automatically-run-any-application-as-admin-in-windows-7/](http://www.groovypost.com/howto/microsoft/automatically-run-any-application-as-admin-in-windows-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:26:43.560

虽然我从来没有让它工作，但我仍然可以通过代码使用模拟，并确保 tfs 构建帐户具有适当的访问权限。这是我必须做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:59:36.530

您需要将 UAC 清单文件添加到您的程序集中，以强制 UAC 以管理员身份运行该进程。有关其他解决方案的参考，您可以查看[UAC 对控制台应用程序的需求](https://stackoverflow.com/questions/227187/uac-need-for-console-application)。

# c# - 我可以在 XAML 中实现 ScrollToHorizo ntalOffset() 功能吗？（对于动态列表）

> ID：10198446
> 
> 赞同：3
> 
> 时间：2012-04-17T20:15:51.440
> 
> 标签：c#, wpf, xaml, dynamic, combobox

这就是问题所在：我有一个数据绑定的项目列表，基本上是用户将请求映射到响应的一种方式。响应是一个基于 xml 的文件。我让他们将这些排队，所以我使用了一个组合框来响应。响应将包括完整路径，因此它们会有点长。我希望组合框的显示文本右对齐，以便用户可以看到文件名。对于我的静态控件，我只在加载文件并完成时使用 ScrollToHorizo​​ntalOffset()。对于这个动态列表，我想在 xaml 中进行。

“有些丑陋”的解决方案是在加载时存储所有 ComboBox 对象......然后我可以直接调用 ScrollToHorizo​​ntalOffset() ，但我真的更喜欢用比这更干净的方式来做！编辑：（实际上，这可能不合理。快速浏览一下试图解决这个问题会遇到一些非常尴尬的情况，试图将我的数据源项映射到控件）

我试过 Horizo​​ntalContentAlignment，它只影响 ComboBox 的“下拉”部分。

我也尝试过挂钩其他各种加载事件，但还没有找到一个有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:54:56.240

使用项目模板，您可以决定将显示什么。您可以设置工具提示。然后，您还可以使用转换器添加点。

```
<ComboBox x:Name="ConfigurationComboBox" VerticalContentAlignment="Center"  ToolTip="saved configuration" SelectionChanged="ConfigurationComboBox_SelectionChanged">
        <ComboBox.ItemTemplate>
           <DataTemplate >
               <StackPanel>
                  <TextBlock Text="{Binding}" ToolTip="{Binding Path}"></TextBlock>
               </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

要测量文本，请参阅[在 WPF 中测量文本](https://stackoverflow.com/questions/632445/measuring-text-in-wpf)。

# asp.net-mvc - 是否可以定义一个接受文字的 Web Api 路由？

> ID：10198455
> 
> 赞同：0
> 
> 时间：2012-04-17T20:16:30.260
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

我为 Web Api 定义了一个路由，如下所示

```
 routes.MapHttpRoute(
                name: "SearchApi",
                routeTemplate: "api/search/{controller}-{seopath}",
                defaults: new { seopath = RouteParameter.Optional }
            );

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            ); 
```

但是，当我从 Visual Studio 运行它并转到[http://localhost:50356/api/search/jobs-in-Bangalore 时](http://localhost:50356/api/search/jobs-in-Bangalore)，我收到 404 错误消息“找不到与名为 'jobs-in 的控制器匹配的类型” ’。”

在书中，Professional Asp.Net MVC 1.0, pg 207 {title}-{author} 被作为有效的路由 url 给出，那么为什么将“jobs-in”解释为控制器而不是“jobs”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:34:52.407

显然这场比赛是贪婪的。为什么不定义您的路线，例如：

```
routeTemplate: "api/search/{controller}/{seopath}" 
```

# c# - 获取多选列表框的选定值

> ID：10198458
> 
> 赞同：1
> 
> 时间：2012-04-17T20:16:40.247
> 
> 标签：c#, list, select

我有一个多选模式的列表框，它是与数据库中的 15 个值绑定的数据。我有这段代码来显示列表框中选定的每个项目的选定值：

```
 foreach (var list in list_box.SelectedItems)
        {             
            MessageBox.Show(list_box.SelectedValue.ToString());
        } 
```

不幸的是，显示了正确数量的消息框，但它们仅显示列表中已选择的第一项的选定值。

请问有人可以帮我解决这个问题吗？我一直在网上搜索，但找不到一个可以正常工作的示例！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T18:27:09.160

我回到这个问题并通过这样做解决了它：

```
 foreach(int blah in multilistbox.SelectedIndices){

  MessageBox.Show(blah.ToString());

  } 
```

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:18:28.653

您应该从**列表**变量中提取值，而不是从 list_box 对象中提取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:18:58.170

您已经在循环选定的项目。为什么不直接打电话

```
MessageBox.Show(list.ToString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T20:19:37.990

我认为您的代码中可能存在逻辑错误。您正在遍历`SelectedItems`，但您`MessageBox`仍在使用`list_box`来显示值。这个怎么样？

```
foreach (var list in list_box.SelectedItems)         
{                          
MessageBox.Show(list.ToString());         
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T20:20:25.940

```
foreach (var list in list_box.SelectedItems)
{             
    MessageBox.Show(list.ToString());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T07:48:52.457

可以这样做。

```
Int[] AllselectedIndex=ListBox1.GetSelectedIndices(); 
```

# mongodb - Mysql DATE_ADD 的 Mongodb 等价物？

> ID：10198460
> 
> 赞同：0
> 
> 时间：2012-04-17T20:16:47.367
> 
> 标签：mongodb

Mysql 的 DATE_ADD() 函数在 Mongodb 中是否有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:42:39.733

目前这是不可能的。有一个功能请求允许在 MongoDB 中的日期上使用“$inc”修饰符，这将在未来的版本中实现。[您可以在此处](https://jira.mongodb.org/browse/SERVER-3174)投票和跟踪票证。

作为替代方案，将日期存储为毫秒，并使用 $inc 添加到它。

# android - Android AES 256 位加密数据

> ID：10198462
> 
> 赞同：11
> 
> 时间：2012-04-17T20:17:06.867
> 
> 标签：android, encryption, aes

所以我看到了很多例子，做了很多谷歌搜索，并查看了 Stack Overflow 上的例子......我需要帮助。我有一个 Android 应用程序，我在设备上存储用户名和密码，我需要对它们进行 AES 256 加密。通过查看示例，这就是我目前所拥有的：

```
public class Security {
    Cipher ecipher;
    Cipher dcipher;

    // 8-byte Salt
    byte[] salt = {
        (byte)0xA9, (byte)0x9B, (byte)0xC8, (byte)0x32,
        (byte)0x56, (byte)0x35, (byte)0xE3, (byte)0x03
    };

    // Iteration count
    int iterationCount = 19;

    public Security (String passPhrase) {
        try {
            // Create the key
            KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), salt, iterationCount);
            SecretKey key = SecretKeyFactory.getInstance(
                "PBEWithSHAAndAES").generateSecret(keySpec);
            ecipher = Cipher.getInstance(key.getAlgorithm());
            dcipher = Cipher.getInstance(key.getAlgorithm());

            // Prepare the parameter to the ciphers
            AlgorithmParameterSpec paramSpec = new PBEParameterSpec(salt, iterationCount);

            // Create the ciphers
            ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
            dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
        } catch (Exception e) { 
            e.printStackTrace(); 
        }
    }

    public String encrypt(String str) {
        try {
            // Encode the string into bytes using utf-8
            byte[] utf8 = str.getBytes("UTF8");

            // Encrypt
            byte[] enc = ecipher.doFinal(utf8);

            // Encode bytes to base64 to get a string
            return Base64.encodeToString(enc, Base64.DEFAULT);
        } catch (Exception e) { 
            e.printStackTrace();
            return null;
        }
    }

    public String decrypt(String str) {
        try {
            // Decode base64 to get bytes
            byte[] dec = Base64.decode(str, Base64.DEFAULT);

            // Decrypt
            byte[] utf8 = dcipher.doFinal(dec);

            // Decode using utf-8
            return new String(utf8, "UTF8");
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

我正在尝试使其基于密码，因此用户将在第一次使用与服务器通信所需的用户名和密码创建一个帐户，并创建一个 PIN 用作存储在数据库。

我主要关心的是这看起来安全吗？我知道固定盐不好，我该如何解决？

我知道有十亿个关于这个的问题，但我希望有人出来说“这很安全”或“这不安全，改变这个”

谢谢！

* * *

**编辑：**

所以这是我到目前为止的代码，它似乎正在工作......

```
public class Security {

    Cipher ecipher;
    Cipher dcipher;
    byte[] salt = new byte[8];
    int iterationCount = 200;

    public Security(String passPhrase) {
        try {
            // generate a random salt
            SecureRandom random = new SecureRandom();
            random.nextBytes(salt);

            // Create the key
            KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), salt, iterationCount);
            SecretKey key = SecretKeyFactory.getInstance(
                "PBEWithSHA256And256BitAES-CBC-BC").generateSecret(keySpec);
            ecipher = Cipher.getInstance(key.getAlgorithm());
            dcipher = Cipher.getInstance(key.getAlgorithm());

            // Prepare the parameter to the ciphers
            AlgorithmParameterSpec paramSpec = new PBEParameterSpec(salt, iterationCount);

            // Create the ciphers
            ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
            dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public String encrypt(String str) {
        try {
            // Encode the string into bytes using utf-8
            byte[] utf8 = str.getBytes("UTF8");

            // Encrypt
            byte[] enc = ecipher.doFinal(utf8);

            // Encode bytes to base64 to get a string
            return Base64.encodeToString(enc, Base64.DEFAULT);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    public String decrypt(String str) {
        try {
            // Decode base64 to get bytes
            byte[] dec = Base64.decode(str, Base64.DEFAULT);

            // Decrypt
            byte[] utf8 = dcipher.doFinal(dec);

            // Decode using utf-8
            return new String(utf8, "UTF8");
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    public int getIterationCount() {
        return iterationCount;
    }

    public String getSalt() {
        return Base64.encodeToString(salt, Base64.DEFAULT);
    }
} 
```

我用这段代码来测试它：

```
 Security s = new Security(pinBox.getText().toString());
            String encrypted = s.encrypt(passwordBox.getText().toString());
            String decrypted = s.decrypt(encrypted);
            builder.setMessage("pin: " + pinBox.getText().toString() + "\n" +
                    "password: " + passwordBox.getText().toString() + "\n" +
                    "encrypted: " + encrypted + "\n" +
                    "decrypted: " + decrypted + "\n" +
                    "salt: " + s.getSalt()); 
```

所以我不需要担心初始化向量？或者专门硬编码密码算法？

再次感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T02:36:12.977

编辑：虽然下面的代码是正确的，但您所做的基本上是相同的事情，IV 来自密码，因此您不必单独存储它。

您的代码是否按预期工作？对于实际的加密/解密，您可能希望使用 AES，很可能在 CBC 模式下。然后你需要一个 IV，所以它变成了这样：

```
ecipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
byte[] iv = new byte[IV_LENGTH];
SecureRandom random = new SecureRandom();
random.nextBytes(iv);
ecipher.init(Cipher.ENCRYPT_MODE, secret, new IvParameterSpec(iv));
byte[] enc = ecipher.doFinal(utf8); 
```

它是否安全取决于您使用它的目的。盐的目的是使暴力破解密码更加困难：如果它是随机的，攻击者就不能使用预先生成的密码表（密码->密钥）。如果您不太担心这种攻击，则可以将其固定。如果您决定使其随机化，只需将其与加密数据一起存储即可。与IV相同。

# django - 在一个 django 模板中合并不同的视图

> ID：10198463
> 
> 赞同：1
> 
> 时间：2012-04-17T20:17:11.330
> 
> 标签：django, templates, views

请帮助这个新人！！！

我有两种不同的看法：

```
@login_required
@csrf_protect
def viewone(request):

#some code here...

if request.method == 'POST':
    form = ViewOne(request.POST)
    if form.is_valid():
        try:
            #some code here

        return response
else:
    form = ViewOne()

return render_to_response('templateone.html', { 'form': form, }, context_instance=RequestContext(request)) 
```

* * *

```
@login_required
@csrf_protect
def viewtwo(request):

if request.method == "GET":

    #code here

    return render_to_response('templatetwo.html', {'form1': MyForm(request.GET)}, context_instance=RequestContext(request))
else:
    return render_to_response('templatetwo.html', {'form1': MyForm()}, context_instance=RequestContext(request)) 
```

我应该想知道如何将这些视图合并/渲染到同一个模板中，以便使用这两种功能！请帮助我遵循正确的方向！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:33:47.533

如果您的问题更清楚，那会很好，因为我认为我不完全理解您想要什么。但如果我这样做，这里有几个选择：
1）如果你可以将你的逻辑分成一些功能，那就去做吧。然后你可以从你的第三个视图调用这些函数，获取你的模板参数并用你想要的一切渲染模板。
2) 您也可以使用 ajax 在同一页面上分别加载这两个模板。

可能还有许多其他选择，这实际上取决于您最终要获得什么（尚不清楚）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:57:48.477

如果您想从一个视图将相同的表单合并到一个模板中：

```
from django.shortcuts import render

@login_required
@csrf_protect
def viewone(request):

   ctx = {} # context dict
   if request.method == 'GET':
     # code here
     form1 = MyForm(request.GET)
     ctx['form1'] = form1
     return render(request,'template.html',ctx)

   if request.method == 'POST':
     form = ViewOne(request.POST)
     if form.is_valid():
         # code here
         return render(request,'some.html')
     else:
        form = ViewOne()
        ctx['form'] = form
        return render(request,'template.html',ctx) 
```

然后在你的`template.html`：

```
{% if form %}
   {{ form }}
{% endif %}

{% if form1 %}
   {{ form1 }}
{% endif %} 
```

# javascript - 在 JavaScript 中处理二进制/位移

> ID：10198469
> 
> 赞同：3
> 
> 时间：2012-04-17T20:17:31.100
> 
> 标签：javascript, binary, bit-manipulation

我正在尝试执行一些位移操作并处理 JavaScript 中的二进制数。

这就是我想要做的。用户输入一个值，我用它执行以下操作：

```
// Square Input and mod with 65536 to keep it below that value
var squaredInput = (inputVal * inputVal) % 65536;
// Figure out how many bits is the squared input number
var bits = Math.floor(Math.log(squaredInput) / Math.log(2)) + 1;
// Convert that number to a 16-bit number using bitshift.
var squaredShifted = squaredInput >>> (16 - bits); 
```

只要数字大于 46，它就可以工作。一旦小于46，它就不起作用。我知道问题出在移位中。现在来自 C 背景，我知道这样做会有所不同，因为所有数字都将以 32 位格式存储（假设它是`int`）。JavaScript 是否也这样做（因为它`var`没有类型）？

如果是这样，是否可以存储 16 位数字？如果不是，我可以将其视为 32 位并进行所需的计算以假设它是 16 位吗？

注意：我试图在`squaredInput`.

另一个注意事项：当打印出 var 时，它只是打印出没有填充的值，所以我无法弄清楚。尝试使用`parseInt`and `toString`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:34:40.083

你在找这个吗？

```
function get16bitnumber( inputVal ){
   return ("0000000000000000"+(inputVal * inputVal).toString(2)).substr(-16);
} 
```

此函数返回值的最后 16 位。`(inputVal*inputVal)`通过使用二进制字符串，您可以使用任何位范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:25:32.633

如果您不是绝对必须，请不要在 JS 中使用位移位。规范[提到](http://es5.github.com/#x8.5)至少四种数字格式

*   IEEE 754
*   整数32
*   UInt32
*   UInt16

知道什么时候使用哪个真的很令人困惑。

例如，`~`在转换为 Int32 时应用位反转。UInt16 似乎只用于`String.fromCharCode`. 使用位移运算符将操作数转换为 UInt32 或 Int32。

在您的情况下，右移运算符`>>>` [强制转换为 UInt32](http://es5.github.com/#x11.7.3)。当您键入

```
a >>> b 
```

这就是你得到的：

```
ToUInt32(a) >>> (ToUInt32(b) & 0x1f) 
```

# ios - 数组中的图像，如何？

> ID：10198472
> 
> 赞同：0
> 
> 时间：2012-04-17T20:17:42.237
> 
> 标签：ios, xcode, arrays, imageview, mutable

我制作了 26 个按钮，AZ，当我单击它们时，我按下的按钮的图像将显示在图像视图中，当我单击 A 时，它显示 A，当我单击 B 时，它将显示 B 等等。

我遇到的问题是它们不会彼此相邻显示，我有 6 个图像视图，我希望第一个字母填充第一个框第二个字母第二个框等。

我只是不知道该怎么做，我现在已经尝试了很多方法，我很确定我需要使用数组，只是无法正确编写代码。

这是一张我现在所在位置的照片，我已经超过了 1 号，所以它就像 2 号，只是彼此相邻。

希望有人能告诉我这是图片：

[http://img213.imageshack.us/img213/4500/questionow.png](http://img213.imageshack.us/img213/4500/questionow.png)

谢谢

这就是我现在得到的.h

```
 IBOutlet UIImageView *imageview1;
    IBOutlet UIImageView *imageview2;
    IBOutlet UIImageView *imageview3;
    IBOutlet UIImageView *imageview4;
    IBOutlet UIImageView *imageview5;
    IBOutlet UIImageView *imageview6;
}

-(IBAction)showA;
-(IBAction)showB;
-(IBAction)showC;
-(IBAction)showD;
-(IBAction)showE;
-(IBAction)showF;
-(IBAction)showG;
-(IBAction)showH;
-(IBAction)showI;
-(IBAction)showJ;
-(IBAction)showK;
-(IBAction)showL;
-(IBAction)showM;
-(IBAction)showN;
-(IBAction)showO;
-(IBAction)showP;
-(IBAction)showQ;
-(IBAction)showR;
-(IBAction)showS;
-(IBAction)showT;
-(IBAction)showU;
-(IBAction)showV;
-(IBAction)showW;
-(IBAction)showX;
-(IBAction)showY;
-(IBAction)showZ; 
```

.m

```
-(IBAction)showA {

UIImage *img = [UIImage imageNamed:@"A.png"];

[imageview1 setImage:img];

}

-(IBAction)showB {

UIImage *img = [UIImage imageNamed:@"B.png"];

[imageview1 setImage:img];  

} 
```

等等。

希望有人能告诉我如何制作这个或为我提供一些示例代码，因为即使在看过很多关于它们的教程之后我也不太了解这些数组。

谢谢唐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:31:29.653

你总是可以这样做：

```
- (void)setNextImage:(UIImage *)image {
    if (imageview1.image == nil) {
        [imageView1 setImage:image]
    } else if (imageView2.image == nil){
        [imageView2 setImage:image]
    } // ... Through all 6 images
} 
```

然后在您的每个按钮操作中调用：

```
[self setNextImage:img]; 
```

而不是直接设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:18:22.650

使用数组并不难。只需声明 UIImageView* 的标准 C 数组或 NSArray，初始化如下 `[NSArray arrayWithObjects:imageView1, imageView2 ... imageView6, nil]`：

然后在实例级别声明一个位置计数器`pos`，您只需执行以下操作：

```
[imageViewArray objectAtIndex:pos].image = imageParm; pos++; 
```

（或者，对于 C 数组，`imageViewArray[pos].image = imageParm; pos++;`。）

# javascript - 如何将此退出弹出窗口从 iframe 转换为重定向？

> ID：10198477
> 
> 赞同：2
> 
> 时间：2012-04-17T20:17:53.290
> 
> 标签：javascript, html, iframe

相信我，我和你一样讨厌这些。这是给客户的，所以我不能决定他们应该做什么:)

这是你如何使用它：

```
<script type="text/javascript">
  var exitsplashmessage = 'Please dont go!';
  var exitsplashpage = 'http://www.site.com/exitpage/';
</script>
<script type="text/javascript" src="/exit.js"></script> 
```

问题是将其加载到 iframe 中，这并不是我真正想要做的。我只想让它重定向到用 exitsplashpage 定义的页面；

这是 exit.js 代码：

```
function addLoadEvent(func) {
    var oldonload = window.onload;
    if (typeof window.onload != 'function') {
        window.onload = func;
    } else {
        window.onload = function () {
            if (oldonload) {
                oldonload();
            }
            func();
        }
    }
}

function addClickEvent(a, i, func) {
    if (typeof a[i].onclick != 'function') {
        a[i].onclick = func;
    }
}
var theDiv = '<div id="ExitSplashDiv"  style="display:block; width:100%; height:100%; position:absolute; background:#FFFFFF; margin-top:0px; margin-left:0px;" align="center">';
theDiv = theDiv + '<iframe src="' + exitsplashpage + '" width="100%" height="100%" align="middle" frameborder="0"></iframe>';
theDiv = theDiv + '</div>';
theBody = document.body;
if (!theBody) {
    theBody = document.getElementById("body");
    if (!theBody) {
        theBody = document.getElementsByTagName("body")[0];
    }
}
var PreventExitSplash = false;

function DisplayExitSplash() {
    if (PreventExitSplash == false) {
        window.scrollTo(0, 0);
        PreventExitSplash = true;
        divtag = document.createElement("div");
        divtag.setAttribute("id", "ExitSplashMainOuterLayer");
        divtag.style.position = "absolute";
        divtag.style.width = "100%";
        divtag.style.height = "100%";
        divtag.style.zIndex = "99";
        divtag.style.left = "0px";
        divtag.style.top = "0px";
        divtag.innerHTML = theDiv;
        theBody.innerHTML = "";
        theBody.topMargin = "0px";
        theBody.rightMargin = "0px";
        theBody.bottomMargin = "0px";
        theBody.leftMargin = "0px";
        theBody.style.overflow = "hidden";
        theBody.appendChild(divtag);
        return exitsplashmessage;
    }
}
var a = document.getElementsByTagName('A');
for (var i = 0; i < a.length; i++) {
    if (a[i].target !== '_blank') {
        addClickEvent(a, i, function () {
            PreventExitSplash = true;
        });
    } else {
        addClickEvent(a, i, function () {
            PreventExitSplash = false;
        });
    }
}
disablelinksfunc = function () {
    var a = document.getElementsByTagName('A');
    for (var i = 0; i < a.length; i++) {
        if (a[i].target !== '_blank') {
            addClickEvent(a, i, function () {
                PreventExitSplash = true;
            });
        } else {
            addClickEvent(a, i, function () {
                PreventExitSplash = false;
            });
        }
    }
}
addLoadEvent(disablelinksfunc);
disableformsfunc = function () {
    var f = document.getElementsByTagName('FORM');
    for (var i = 0; i < f.length; i++) {
        if (!f[i].onclick) {
            f[i].onclick = function () {
                PreventExitSplash = true;
            }
        } else if (!f[i].onsubmit) {
            f[i].onsubmit = function () {
                PreventExitSplash = true;
            }
        }
    }
}
addLoadEvent(disableformsfunc);
window.onbeforeunload = DisplayExitSplash; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:22:30.057

这行得通吗？

```
function DisplayExitSplash() {
    window.location = exitsplashpage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:22:59.777

您可以**重新定义**`DisplayExitSplash`函数：

```
<script type="text/javascript">
  var exitsplashmessage = 'Please dont go!';
  var exitsplashpage = 'http://www.site.com/exitpage/';
</script>
<script type="text/javascript" src="/exit.js"></script>
<script type="text/javascript">
    DisplayExitSplash = function () {
        window.location.href = exitsplashpage;
    };
    window.onbeforeunload = DisplayExitSplash;
</script> 
```

* * *

**JSFiddle**举例说明了这个概念：

[http://jsfiddle.net/hFXPE/](http://jsfiddle.net/hFXPE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:53:23.753

用这个替换 DisplayExitSplash() 函数

```
function DisplayExitSplash() {
if (PreventExitSplash == false) {
    window.scrollTo(0, 0);
    PreventExitSplash = true;
    divtag = document.createElement("div");
    divtag.setAttribute("id", "ExitSplashMainOuterLayer");
    divtag.style.position = "absolute";
    divtag.style.width = "100%";
    divtag.style.height = "100%";
    divtag.style.zIndex = "99";
    divtag.style.left = "0px";
    divtag.style.top = "0px";
    divtag.innerHTML = theDiv;
    theBody.innerHTML = "";
    theBody.topMargin = "0px";
    theBody.rightMargin = "0px";
    theBody.bottomMargin = "0px";
    theBody.leftMargin = "0px";
    theBody.style.overflow = "hidden";
    theBody.appendChild(divtag);
    window.location.href = exitsplashpage;
    return exitsplashmessage;
}
} 
```

# ajax - JqueryMobile Ajax 循环

> ID：10198480
> 
> 赞同：-1
> 
> 时间：2012-04-17T20:18:00.953
> 
> 标签：ajax, jquery-mobile, cordova

我有一些 ajax 从我的网站抓取一些内容并将其注入到 phonegap 应用程序中。我注意到当我滚动时这个页面非常不稳定，我想知道是不是因为我的 Ajax 代码在后台经常出错？有没有办法在获取内容后停止我的 ajax。还是有其他东西减慢了这个页面。您能提供的任何帮助将不胜感激！

[https://gist.github.com/2408732](https://gist.github.com/2408732)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:08:30.930

事实证明，这不是由于太多的 json 行，而是 JqueryMobile 中的滚动错误。滚动链接图像列表导致我的表现不稳定。这篇文章使我找到了解决方案：

[https://forum.jquery.com/topic/why-jqm-touchscreen-list-scrolling-performance-stinks-and-what-to-do-about-it](https://forum.jquery.com/topic/why-jqm-touchscreen-list-scrolling-performance-stinks-and-what-to-do-about-it)

# design-patterns - 查找字符串中所有模式出现的位置

> ID：10198481
> 
> 赞同：0
> 
> 时间：2012-04-17T20:18:09.217
> 
> 标签：design-patterns, full-text-search, fastq

我正在处理 DNA 序列文件（FASTQ 文件）。

@Read1- 好

```
NAAAGTGAGATTCGAAATAAATACATCTGTGGCTTCACTTTGAACGGAACGATGTTCTCGTAT

+

1D=DDADEHHHHHIGIJJJJGGFGHIHIJJIJJJJJIIIIGG99BDGHHHEGHJJIHHJJGIH 
```

@Read2- 有 2 个不好的地方

```
NTTCGTAAAGCAGTGAACGAAATACATCTGTGGCTTCACTATGTTCTCGTATGCCGGAACGTC

+

2#1=DFFFFHHHGHGHIJHJIJJJJJJJJJJJJJJJJJGIIHJJJJIIIGGHIIJJIHIIIIJG 
```

@Read3 ：一个好，一个早

```
NCAGGATCTGCATCGTGAACGATACATCTGTGGCTTCACTAGAACGTGTTCTCGTATGCCGTC

+

B#1:BDDDDFFHDH@AHIGCHIIIIIIIIIIIIIIIIIIIIGIIFHBGGGFGIIIIGGHIIIIG 
```

@Read4 ：一个好，一个后

```
NGCCCTTGACCGCAGGTTAGTGCTAAATACATCTGTGTACTGAACGTCACTATGTTCTCGTAT

+

E#1:A?==@@B>AC<7,2A@ABBBBCBCBCCBCCBBBBBBBB<<?AA?AA)8>ABBAAABABBA 
```

我想在一个序列中查找一个 6 个字符长的模式 (GAACG)（以 @ 开头的行下面的行）。

重要的是我希望在字符串中的第 42 位找到我的模式。

如果在该位置找到模式，我将序列连同它之前的行和它之后的 2 行一起复制到一个新文件中。使用 awk 尝试此操作时，它不起作用，因为所有的 index()、match() 函数只查看第一次出现并且不进一步查看，所以如果它在位置 41 之前找到我的模式，那么它不会将我的数据复制到新文件。

基本上我的脚本应该返回读取 1、3 和 4...

如何筛选我的 FASTQ 文件中的模式，评估找到它的所有位置，并仅考虑在位置 42 具有它的序列，无论该模式是否也存在于其他位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:26:43.600

听起来像一个正则表达式问题。

许多语言和脚本语言都支持正则表达式，但这似乎是 javascript 中的一个很好的例子：

[如何在 javascript 中的另一个字符串中查找所有出现的字符串](https://stackoverflow.com/questions/3410464/how-to-find-all-occurrences-of-one-string-in-another-in-javascript)

# c# - 禁用 TextBox 样式中的文本选择

> ID：10198482
> 
> 赞同：2
> 
> 时间：2012-04-17T20:18:09.643
> 
> 标签：c#, wpf, textbox, textselection

我想最好使用样式禁用文本框中的文本选择。原因是我有一种风格，它使文本框看起来像一个文本块，直到满足某个标准（IsRenaming）。这些是树视图的节点，所以我不希望用户能够选择文本。这是样式：

```
<Style x:Key="TextBlockStyleForTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="IsReadOnly" Value="True" />
</Style>

<Style x:Key="RenamingTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBlockStyleForTextBox}">
        <Setter Property="Cursor" Value="Arrow"/>
        <Setter Property="Padding" Value="0" />
        <Setter Property="Margin" Value="0" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsRenaming}" Value="true">
                <DataTrigger.Setters>
                    <Setter Property="TextBox.IsReadOnly" Value="False" />
                    <Setter Property="Cursor" Value="IBeam" />
                    <Setter Property="Background" >
                        <Setter.Value>
                            <SolidColorBrush Color="{DynamicResource WhiteColor}"/>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="Padding" Value="2" />
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding RelativeSource={RelativeSource Self}}"/>
                    <Setter Property="behaviors:TextBoxBehavior.SelectAll" Value="True"/>
                </DataTrigger.Setters>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

我认为我不会在任何地方覆盖 IsReadOnly。这是我的文本框定义：

```
<DataTemplate x:Key="MyTemplate" >
        <TextBox Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                 Tag="{Binding DataContext, RelativeSource={RelativeSource AncestorType=TreeView}}"
                 Style="{StaticResource RenamingTextBox}"> 
```

... ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:41:31.497

这是快速而肮脏的，但这是我们在另一个答案中的对话的一个很好的开始/示例，您可以对样式进行额外的调整，但它完全有效（刚刚测试过）

```
<Style x:Key="RenamingTextBox" TargetType="{x:Type TextBox}">
        <Style.Setters>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Grid>
                            <TextBlock x:Name="block" Visibility="Visible" Text="{TemplateBinding Text}" Margin="1.5"/>
                            <TextBox x:Name="box" Visibility="Collapsed" Text="{TemplateBinding Text}"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsRenaming}" Value="true">
                                <DataTrigger.Setters>
                                    <Setter TargetName="block" Property="TextBox.Visibility" Value="Collapsed" />
                                    <Setter TargetName="box" Property="TextBox.Visibility" Value="Visible" />
                                </DataTrigger.Setters>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:58:12.837

好吧，禁止突出显示文本的一种快速方法是将 IsEnabled 添加到您的样式切换中。否则，您可能希望使用 StackPanel 覆盖 TextBox 的模板，该模板可以切换 TextBox 和 TexBlock - 超级容易做到，并且到处都是大量样本，即使在堆栈溢出时也是如此。这是您使用 IsEnabled 修改后的样式。

```
<Style x:Key="TextBlockStyleForTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="IsReadOnly" Value="True" />
        <Setter Property="IsEnabled" Value="False"/>
    </Style>

    <Style x:Key="RenamingTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBlockStyleForTextBox}">
        <Setter Property="Cursor" Value="Arrow"/>
        <Setter Property="Padding" Value="0" />
        <Setter Property="Margin" Value="0" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsRenaming}" Value="true">
                <DataTrigger.Setters>
                    <Setter Property="TextBox.IsReadOnly" Value="False" />
                    <Setter Property="IsEnabled" Value="True"/>
                    <Setter Property="Cursor" Value="IBeam" />
                    <Setter Property="Background" >
                        <Setter.Value>
                            <SolidColorBrush Color="{DynamicResource WhiteColor}"/>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="Padding" Value="2" />
                </DataTrigger.Setters>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:41:16.683

你的风格工作得很好，因为我刚刚测试过它们！3个可能的问题：

1.  您没有正确绑定 TextBox
2.  你没有指定你的风格
3.  IsRemaining 没有提高财产变化

    * * *

    ## 这是我的测试

    ```
    <Window x:Class="Sample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="500" Width="600" 
    x:Name="wnd">
       <Window.Resources>
           ...I put your styles in there..
       </Windows.Resources>
    <StackPanel>
        <TextBox DataContext="{Binding ViewModel, ElementName=wnd}" Style="{StaticResource RenamingTextBox}" >tata</TextBox>
        <Button Command="{Binding ViewModel.SomeCommand, ElementName=wnd}">change read only</Button>
    </StackPanel> 
    ```

背后的代码 (.xaml.cs)

```
public partial class MainWindow : Window
{
    public ViewModel ViewModel { get; set; }

    public MainWindow()
    {
        ViewModel = new ViewModel();
        InitializeComponent();          
    }
    }

public class ViewModel : INotifyPropertyChanged
{
    private DelegateCommand _someCmd;
    private bool _isRenaming;

    public DelegateCommand SomeCommand
    {
        get
        {
            return _someCmd ?? (_someCmd = new DelegateCommand(() =>
                                                                {
                                                                    IsRenaming = true;
                                                                }));
        }
    }

    public bool IsRenaming
    {
        get { return _isRenaming; }
        set
        {
            _isRenaming = value;
            RaisePropertyChanged("IsRenaming");
        }
    }
      } 
```

# wordpress - Wordpress 后端缓慢，包含 27,000 个类别

> ID：10198483
> 
> 赞同：0
> 
> 时间：2012-04-17T20:18:20.107
> 
> 标签：wordpress

我正在使用 WP 电子商务插件运行最新版本的 WP。我正在制作一个需要很多类别（大约 27,000 个）的在线商店。我已经设法通过编写自定义查询在前端加速了一些事情，但是在 WP 界面中加载产品列表或产品编辑页面时，加载所有类别需要很长时间。

我只是想知道我是否可以对此做些什么，因为如果页面需要 5 分钟才能加载，那么管理产品将变得非常困难。

谢谢 ：）

# sql - 不是 Null 范围导致 PSQL Rails 应用程序中的错误

> ID：10198488
> 
> 赞同：0
> 
> 时间：2012-04-17T20:18:28.840
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, postgresql

我有一个在heroku上运行的rails应用程序，由于某种原因，以下范围引起了很多麻烦并在PSQL中引发错误（'rating'是一个整数）：

```
scope :rated, where("posts.rating <>''") 
```

所以我很自然地尝试了下面列出的所有内容；这些不会导致任何错误，但仍会显示具有空评级值的帖子。

```
scope :rated, where("posts.rating IS NOT ?", nil)
scope :rated, where("posts.rating > 0")
scope :rated, where("posts.rating IS NOT NULL") 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:35:27.413

您上面的第三个选项应该适用于标准 PSQL，但您也可以尝试：

```
posts.rating <> NULL or
posts.rating NOTNULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:28:36.433

把它们结合起来怎么样？

```
scope :rated, where("posts.rating IS NOT NULL AND posts.rating > 0") 
```

# iphone - 无法从 Google 地方信息获取数据

> ID：10198492
> 
> 赞同：0
> 
> 时间：2012-04-17T20:18:40.173
> 
> 标签：iphone, objective-c, nsdata, nsurl, google-places-api

我正在尝试让 google places API 在我的 iPhone 项目上工作。现在，大约一个小时前我让它工作了，但我似乎无法弄清楚我做了什么让它停止工作。任何帮助，将不胜感激。

这是我到目前为止所拥有的：

```
- (NSString *)searchString {
    // this mutable string allows me to dynamically create the search string
    // we start with the static part of the api search URL
    NSMutableString *result = [NSMutableString stringWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location="];

    // since I need to get the user's location, I need to create a location manager
    CLLocationManager *locationManager = [[CLLocationManager alloc] init];

    // we need to now update the current location,
    // otherwise there will be no coordinates
    [locationManager startUpdatingLocation];

    // now that it's updated, we stop it because I
    // am not tracking anything
    [locationManager stopUpdatingLocation];

    // this appends the lattitude/longitude, as double values, into the URL
    [result appendFormat:@"%g,%g", [[locationManager location] coordinate].latitude, [[locationManager location] coordinate].longitude];

    // release the location manager for memory management
    [locationManager release];

    // if a filter is present, add the keyword item to try to filter
    // the results
    if([[self filterString] length] > 0) {
        [result appendFormat:@"&keyword=%@", filterString];
    }

    // add the rest of the validated URL now
    //[result appendString:@"&types=food|meal_delivery|meal_takeaway|restaurant&rankby=distance&sensor=true&key=AIzaSyBmO_f6h4_Q0xArw6tdxUF7TH7rZpaiFfQ"];
    [result appendString:@"&types=food&rankby=distance&sensor=true&key=mykey"];

    // log the result for testing
    NSLog(@"Completed Search String: %@", result);

    return result;

} 
```

现在，当我查看日志时，将“完成的搜索字符串”复制到 Safari 中，它会显示我需要的结果。

但如果我使用以下代码，应用程序会挂起：

```
- (void)performSearch {

    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[self searchString]]]; // hangs on this line!

    NSDictionary *jsonDictionary = [data objectFromJSONData];
    NSArray *resultsArray = [jsonDictionary objectForKey:@"results"];

    currentList = [ARGooglePlace placesWithArray:resultsArray];

    [self.tableView reloadData];
} 
```

我想我应该提到我正在使用 JSONKit 来进行 JSON 解析。此外，ARGooglePlace 是一个现在不相关的自定义类（它甚至没有到达那里......）

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:46:26.770

从 searchString 方法中拉出位置管理器和纬度/经度...只需将其放入 performSearch 方法中即可。相反，将从位置管理器接收到的纬度/经度传递给 searchString。

这听起来像是您的位置经理的时间问题。它本来可以在早期工作的 b/c 位置管理器之前缓存了位置数据......并且能够获取正确的坐标。

2+ 可能的情况：

1）位置管理器的问题没有更新它的坐标，只是挂在那里 2）谷歌网站是罪魁祸首（可能加载了太多数据？？）

将位置管理器从 searchString 方法中提取出来将有助于隔离原因......而且人们也可以直接传递 lat/long 值来测试谷歌网站。

# css - base_url 未在 codeigniter 中加载

> ID：10198499
> 
> 赞同：0
> 
> 时间：2012-04-17T20:18:59.443
> 
> 标签：css, codeigniter, base-url

我在我的`viewregistration.php`文件中使用它

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="<?php echo $base_url; ?><?php echo $css; ?>reg_style.css" />
<link rel="stylesheet" type="text/css" href="<?php echo $base_url; ?><?php echo $css; ?>style.css" />
</head>
<body>
    <?php $this->load->view('include/header');?>
    <?php $this->load->view('registration_view.php');?>
    <?php $this->load->view('include/footer');?>
</body>
</html> 
```

我在我的控制器中称它为

```
$data['title']= 'Registration';
$this->load->view("viewregistration.php", $data); 
```

在我的控制器中，我正在使用

```
parent::__construct();

        $this->load->helper('url');
        $this->load->helper('form');

        $this->load->database();
        $this->load->model('user_model');
        $this->load->model('systemdata');

        $this->data['css'] = $this->systemdata->get_css_filespec();
        $this->data['scripts'] = $this->systemdata->get_scripts_filespec();
        $this->data['base_url'] = $this->systemdata->get_base_url(); 
```

但是css文件没有加载。它显示了一些错误，例如

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: base_url 
```

和

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: css 
```

我做错了什么？我使用了自动加载 url 助手。但结果还是一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:59:56.163

您的变量没有定义，因为您实际上并没有将它们传递给您的视图。`$data`和`$this->data`不是一回事。

在这里，您正确地将`$data`数组传递给您的视图：

```
$data['title']= 'Registration';
$this->load->view("viewregistration.php", $data); 
```

但是请注意这里你是如何将你的变量分配给 的`$this->data`，它永远不会被传递给视图：

```
$this->data['css'] = $this->systemdata->get_css_filespec();
$this->data['scripts'] = $this->systemdata->get_scripts_filespec();
$this->data['base_url'] = $this->systemdata->get_base_url(); 
```

您需要将变量分配给`$data`或传递`$this->data`给您的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:12:40.247

我不认为这条线是必要的。

```
$this->data['base_url'] = $this->systemdata->get_base_url(); 
```

你能做的，就是这个。

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url($css.'reg_style.css'); ?>" /> 
```

base_url() 是一个 CI 函数，它为您提供基本 url。

资料来源：[http ://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

# c# - c# 可以像 VB.NET 一样自动更正语法大小写吗？

> ID：10198502
> 
> 赞同：3
> 
> 时间：2012-04-17T20:19:13.320
> 
> 标签：c#, vb.net, visual-studio

是否有一个设置可以让 C# 自动更正它的外壳，类似于 VB.NET。例如，当我`dim x as integer`在 VB.NET 中键入时，它会自动将其转换为`Dim x As Integer`，但 c# 不会做这种事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T20:20:36.937

不，因为 C# 区分大小写。这两个语句可能具有完全不同的含义。IDE 无法知道您打算使用哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:23:36.050

Visual Studio 会为您提供一些东西。

假设您想要一个`DateTime`，但您输入了`datetime`. 完成键入后（并假设您指定了正确的使用/导入），您可以按 CTRL+空格键，Visual Studio 将尝试使用 IntelliSense 更正它（或建议替代方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:25:21.263

在 C# 中`int`，`float`, 等已经是小写了。如果你想知道`String`，有一个小写的别名叫做`string`，所以也不需要大写。从您的示例中，大多数 C# 等效关键字也已经是小写的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T21:05:19.520

您必须指 Visual Studio 中使用的智能感知功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T21:06:24.380

可以说，IDE 不应该尝试纠正区分大小写的语言，如 C#（如评论中所述），但它似乎确实如此。

我刚刚试了一下，VS2008和VS2010都会更正关键字的大小写，例如foreach和public。

*   键入`FOREACH`并按空格，您会得到`foreach`
*   键入`PUBLIC`并按空格，您会得到`public`

我正在使用默认设置。

这是智能感知，所以如果你输入`IF`你会得到`IFormatProvider`

# python - 每次的行数不同。Python

> ID：10198506
> 
> 赞同：0
> 
> 时间：2012-04-17T20:19:46.610
> 
> 标签：python

我有一个奇怪的观察。我有一个巨大的文本文件（它就像 450 MB 的文本）

我读了其中的行数..通过这样的方式。

```
 for i,line in enumerate(f):
    count += 1
 print count 
```

在每次运行中，我得到不同的结果？它不像它非常不同。只是每次我运行它......它最接近最后一个。例如，如果在第一个示例中显示 8151，则在下一次运行中显示 8162，在下一次运行中应该显示 8197？有什么线索吗？？有什么我忽略的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:32:04.143

您可能有另一个进程，该进程对正在写入的文件具有打开的写句柄。您可以使用 . 检查哪些其他进程对该文件具有打开的文件句柄`lsof`。

```
lsof | grep <name of file> 
```

# c# - 在 WCF 中添加自定义标头？

> ID：10198510
> 
> 赞同：2
> 
> 时间：2012-04-17T20:20:00.883
> 
> 标签：c#, wcf, http-headers, soapheader

我在 Java 中有以下示例代码：

```
PushServiceService c = new PushServiceService();
service = c.getPushServicePort();
BindingProvider ccBindingProvider = (BindingProvider) service;
Map ccRequestContext = ccBindingProvider.getRequestContext();
ccRequestContext.put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true);
Map ccRequestHeaders = new HashMap(); // is actually a Map for String to List of Strings
ccRequestHeaders.put("Cookie", Arrays.asList("JSESSIONID=ABC123"));
ccRequestContext.put(MessageContext.HTTP_REQUEST_HEADERS, ccRequestHeaders); 
```

我正在尝试使用 C# 代码完成相同的任务，但并不完全理解。

尤其是线条

```
ccRequestContext.put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true); 
```

和

```
ccRequestHeaders.put("Cookie", Arrays.asList("JSESSIONID=ABC123")); 
```

我很难理解。据我了解，他们要么添加 HTTP 标头，要么添加 SOAP 标头。

关于如何使用 C# 做同样的事情的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:46:32.370

查看 [如何将自定义标头添加到每个 wcf 调用](https://stackoverflow.com/a/1408177/262900)

# java - 定义像 C 的局部静态变量一样（某事）的 Java 变量的最佳实践

> ID：10198516
> 
> 赞同：5
> 
> 时间：2012-04-17T20:20:26.580
> 
> 标签：java

在 C 中，我可以在函数中创建静态变量。该变量的空间不与函数变量一起分配，它是在程序启动时分配的。（不要太苛刻地嘲笑我的 C，我已经用 Java 编程太久了：）

```
void myFunc(){
  static SomeStruct someStruct;
  someStruct.state=INITIALIZED;
  goDoSomethingInteresting(MY_COMMAND,&someStruct);
} 
```

在 Java 中，如果我想做类似的事情，我会创建一个类变量然后使用它。

```
Class TheClass {
   SomeStruct someStruct = new SomeStruct();
   void myFunc(){
     someStruct.setState(INITIALIZED);
     goDoSomethingInteresting(MY_COMMAND,someStruct);
   }
} 
```

我的问题是做这样的事情的最佳做法是什么？我真的很想将我的变量`someStruct`与我的函数关联起来`myFunc`，因为`myFunc`它是唯一应该知道或使用的代码`someStruct`，但是除了将变量放在代码中的函数附近之外，没有办法建立这种关联。如果你把它放在上面，那么函数的 Javadoc 看起来很不稳定，如果你把它放在下面，那么它们是否属于一起就不是很清楚了。

通常我只会在`someStruct`本地创建，但在我的情况下创建非常昂贵`someStruct`，而且我`myFunc`会在一个紧密的循环中调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:36:20.963

一个小类将`someStruct`与 cleanly 的行为相关联`myFunc`，但它是理解和维护事物的额外开销。可能值得，也可能不值得。

```
class TheClass {
   MyFuncBehavior myFuncer = new MyFuncBehavior();
   void myFunc() {
      myFuncer.myFunc();
   }
}

class MyFuncBehavior {
   private static SomeStruct someStruct = new SomeStruct();

   public void myFunc() {
     someStruct.setState(INITIALIZED);
     goDoSomethingInteresting(MY_COMMAND,someStruct);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:29:21.317

由于您正在编写 java 类，因此只需将其设为类的私有成员。如果您想阻止可能正在处理同一文件的其他人在文件的其他地方使用它，请在它旁边添加评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T20:46:50.060

在 C 中`function static variable`

*   拥有程序的生命
*   具有功能范围

也就是说，一旦初始化，它在每次调用函数时都可用，并分配给它的最后一个值，但在函数外部无法访问。

如果您将函数转换为具有一种方法的类并使静态变量成为该类的成员，这将非常适合。

例如

```
void F()
{
   static int i;
} 
```

变成

```
class F
{
    int i;
    func() ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:25:48.127

我认为尝试在单个源文件（即一个类及其所有内部类）中强制封装没有多大意义，Java 似乎遵循这一原则。

任何有权访问源代码的人都可以更改它以访问任何字段。

但是，重新设计代码是一种选择：

1.  `myFunc()`您可以连同它使用的字段一起 提取到一个单独的类中。
2.  您可以简单地将方法的签名更改为`void myFunc( SomeStruct struct)`并将其作为参数传递。将其存储为调用者的局部变量。

如果循环确实非常紧密，那么开销将是最小的。（就我个人而言，我不会做上述任何事情。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T20:27:50.653

> 在 Java 中，如果我想做类似的事情，我会创建一个类变量然后使用它。

是的，这是最佳做法。

# jquery - 显示/隐藏具有相同类名的多个 DIV

> ID：10198519
> 
> 赞同：0
> 
> 时间：2012-04-17T20:20:43.537
> 
> 标签：jquery

我正在循环生成以下 HTML 的结果集：

```
 <tr>
    <td class="optionItems">
        Test<br />
        Test<br />
        <a href="#" class="description" >
            <img src="../../Images/Magnifying-Glass-icon.png"/>&nbsp;Description
        </a>
    </td>

    <td colspan="2" class="optionItemsLast">
        <input type="submit" value="Book" class="buttonGreen" />
    </td>
</tr>

<tr>
    <td colspan="3" class="optionItems">
        <div class="slidingDiv">
            Test><br />
        </div>
    </td>
</tr> 
```

我有以下 jQuery 代码来显示/隐藏类名“slidingDiv”的 div：

```
 $(".slidingDiv").hide();
        $(".description").show();

        $('.description').click(function () {
            $(".slidingDiv").slideToggle();
        }); 
```

当我单击任何带有“描述”类名称的链接时，所有 div 都会显示。我只想显示与我单击的“描述”链接相对应的 div。

我试过这样的事情：

```
$('.description').click(function () {
            $(this).parent().children(".slidingDiv").slideToggle();
            //$(".slidingDiv").slideToggle();
        }); 
```

但没有成功。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:25:21.523

您需要一直向上到树`tr`，然后进入兄弟`tr`：

```
$('.description').click(function () {
    $(this).closest("tr").next().find(".slidingDiv").slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:24:27.317

试试下面的代码，

```
$('.description').click(function () {
     $(this)
        .closest('tr')       //get the closest tr
        .next()              //get the next row of that tr
        .find('.slidingDiv') //find .slidingDiv in next row
        .slideToggle()          
}); 
```

**假设：** 2 tr 是相关的，`.description`最接近 tr 的下一个将是`.slidingDiv`tr

# php - PHP xlsx 标头

> ID：10198524
> 
> 赞同：8
> 
> 时间：2012-04-17T20:21:16.547
> 
> 标签：php, header, xlsx

所以这有效：

myphpfile.php：

```
<?php
header('Content-disposition: attachment; filename=myfile.pdf');
header('Content-type: application/pdf');
readfile('myfile.pdf');
?> 
```

此处调用该 php 文件，并且 PDF 下载工作正常：

```
<a class = "oglasavanje" href = "../../cjenik/myphpfile.php">download</a><br/> 
```

但这不起作用：

```
<?php
header('Content-disposition: attachment; filename=myfile.xlsx');
header('Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
readfile('myfile.xlsx');
?> 
```

.pdf 和 .xlsx 文件都在同一个文件夹中。当我单击“下载”链接时，会弹出下载窗口，我保存文件，但无法打开文件。它给了我以下错误：

> Excel 无法打开文件“myfile.xlsx”，因为文件格式或文件扩展名无效。验证文件没有损坏并且文件扩展名与文件格式匹配。

当我手动打开文件时（即不通过链接下载）文件打开正常

如果这很重要，我正在使用 WAMP。

任何帮助表示赞赏。

- - 编辑 - -

我在 php.net 上找到了这段代码：

```
ob_clean();
flush(); 
```

所以最终的代码看起来像这样并且它可以工作：

```
$file = "myfile.xlsx";
header('Content-disposition: attachment; filename='.$file);
header('Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Length: ' . filesize($file));
header('Content-Transfer-Encoding: binary');
header('Cache-Control: must-revalidate');
header('Pragma: public');
ob_clean();
flush(); 
readfile($file); 
```

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T20:39:32.017

取决于您的浏览器，很多事情都可能导致此类行为，例如`Content-length`，`Cache-Control`等

也改变

`Content-type`至`Content-Type`

`Content-disposition`至`Content-Disposition`

尝试

```
$file = "myfile.xlsx" ;
header('Content-Disposition: attachment; filename=' . $file );
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Length: ' . filesize($file));
header('Content-Transfer-Encoding: binary');
header('Cache-Control: must-revalidate');
header('Pragma: public');
readfile('myfile.xlsx'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:28:04.707

根据您的 Web 浏览器，文件名可能无法完全保存并带有句点。如果文件名不完整，您可以尝试替换此标头：

```
header('Content-disposition: attachment; filename=myfile.xlsx'); 
```

和

```
$filename = "myfile.xlsx";
header('Content-Disposition: attachment; filename="' . $filename . '"'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T15:14:36.640

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save($filename);
header('Content-Disposition: attachment; filename="' . $filename . '"');
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Length: ' . filesize($filename));
header('Content-Transfer-Encoding: binary');
header('Cache-Control: must-revalidate');
header('Pragma: public');
readfile($filename);
return; 
```

该解决方案对我有用，但是当我尝试打开下载的文件时出现错误。对于 .pdf 文件只是空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T09:12:34.430

```
$file = "abc.xls";

header('Content-Description: File Transfer');
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

# c# - ?: LINQ 中的条件运算符未按预期工作

> ID：10198528
> 
> 赞同：4
> 
> 时间：2012-04-17T20:21:34.317
> 
> 标签：c#, linq, conditional, conditional-operator

我的一个 LINQ 查询有问题，所以我在 LINQPad 中制作了它的简化版本来帮助我。问题是，我不明白为什么它仍然没有做我认为应该做的事情......

```
var list = "1 2 3 4".Split();
var result = list.FirstOrDefault(x =>
                    x == "3"
                    && true);
result.Dump(); 
```

`3`就像人们假设的那样，这会回馈。
但是，当我运行这个时：

```
var list = "1 2 3 4".Split();
var result = list.FirstOrDefault(x =>
                    x == "3"
                    && false ? false : true); 
```

我`1`回来。最后一行是实际代码的简化。这两个示例都应该`true`在最后一行给出，这将返回`3`，但是带有条件运算符的查询在那里抛出了一个扭结。

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T20:23:23.370

您的测试表达式是这样关联的：

```
(x == "3" && false) ? false : true 
```

而不是这样：

```
x == "3" && (false ? false : true) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:23:55.063

您所看到的是由于运算符优先级。一个解决方法是将条件包装在括号中：

```
x == "3" && (false ? false : true) 
```

&& 的优先级高于 ?：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:23:47.920

这很重要，`(x == "3" && false) ? false : true`这就是您有奇怪行为的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:28:24.943

我怀疑您的 lambda 评估`(x == 3 && false) ? false : true`将返回第一个元素，因为条件将始终评估为 false。为更清晰的代码加上括号。

# c# - 通过 C# 创建后 IIS 应用程序“物理路径”为空

> ID：10198529
> 
> 赞同：1
> 
> 时间：2012-04-17T20:21:35.377
> 
> 标签：c#, iis-7.5

我正在`AddApplication`从 learn.iis.net 站点执行示例方法：

[http://learn.iis.net/page.aspx/285/provisioning-sample-in-c/](http://learn.iis.net/page.aspx/285/provisioning-sample-in-c/)

该方法如下所示：

```
public static bool AddApplication(string siteName, string applicationPath, string applicationPool, string virtualDirectoryPath, string physicalPath, string userName, string password)
{
   ...
} 
```

我正在传递论点：

```
siteName = "Default Web Site"
applicationPath = "/MyApp"
applicationPool = "MyAppPool"
virtualDirectoryPath = "/MyApp"
physicalPath = @"c:\dev\path\"
userName = null
password = null 
```

调用 AddApplication 方法后，我转到 IIS 管理器，我可以看到新应用程序已创建。没有抛出异常，当我逐步执行该方法时，一切看起来都很好。但是，当我右键单击并转到“高级设置”时，我看到“物理路径”条目为空。

我已验证该路径存在。我已经尝试了带反斜杠和不带反斜杠的物理路径。我尝试将我的用户名和密码作为最后 2 个参数传递。我尝试将应用程序池更改为以管理用户身份运行（以防与权限相关）。

我的猜测已经不多了。我似乎找不到任何调用此 AddApplication 方法的示例...也许我只是不明白我应该为参数传递什么...？

我正在运行 Win7 Pro、IIS 7.5。

**更新：原来将 virtualDirectoryPath 更改为“/”解决了我的问题。我不确定为什么这是真的，但如果有人能回答这个问题，我有兴趣更好地理解这一点。谢谢。**

# python - 数组更改后立即跳出循环

> ID：10198530
> 
> 赞同：2
> 
> 时间：2012-04-17T20:21:36.563
> 
> 标签：python, loops, for-loop, python-requests

这有点复杂……

基本上，我有这个功能：

```
def do_loop(self):
    for line in self.connections[0].iter_lines():
            print line 
```

并且，有一个线程不断地在它旁边运行，它会在任意时间改变`connections[0]`.

如果发生这种情况，如果`connections[0]`被线程从外部更改，则循环将继续使用 old `connections[0]`，我需要不要发生这种情况，我需要它立即使用 new `connections[0]`。

对于某些背景，正在使用, 因此`for line in self.connections[0].iter_lines():`从 Twitter Streaming API 读取数据。`python-requests``.iter_lines()`

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:32:06.840

我建议以下，作为一个简单的解决方案。基本上，使用连接的副本，并在每次循环后根据源检查副本。

```
def do_loop( self ):
    while true:
        conn = copy( connections[0] )
        for line in conn.iter_lines():
            print line
            if conn != connections[0]:
                break 
```

它绝不是优雅的，但是如果没有彻底和重新设计大量代码以使其成为线程安全的，它应该可以工作。如果需要，您可以使用`return`语句离开 while 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:07:09.560

循环将`for`创建一个迭代器，一次，它不会继续检查`self.connections[0]`循环。所以正如@mklauber 所说，使用类似`threading.Event`.

假设我们有一个`threading.Event`实例 as`self.new_conn`并且每当有新连接时它就会被设置：

```
def do_loop(self):
    for line in self.connections[0].iter_lines():
        if self.new_conn.is_set():
            break # or could raise exception here
        print line 
```

如果您只需要立即终止循环，您可以通过使您的`.iter_lines()`方法成为生成器并让生成器进行检查来处理它：

```
def iter_lines(self):
    for line in self.connections[0].private_data_lines:
        if self.new_conn.is_set():
            break
        yield line 
```

这很好地封装了循环。您的原始代码将如图所示工作，并且在有新连接时会停止。

# mysql - 试图将表复制到从服务器上的多个数据库

> ID：10198532
> 
> 赞同：1
> 
> 时间：2012-04-17T20:21:44.457
> 
> 标签：mysql

我在主数据库中有一个表，我想将它复制到一台从服务器上的多个数据库中。像这样：

```
masterDB.tableA -> slaveDB1.tableA
masterDB.tableA -> slaveDB2.tableA 
```

slaveDB1 和 slaveDB2 在同一个从服务器上。这可能吗？

我可以让 slaveDB1 的复制正常工作，但它忽略了 my.cnf 中用于 slaveDB2 的命令：

```
replicate-rewrite-db="masterDB->slaveDB1"
replicate-rewrite-db="masterDB->slaveDB2"

replicate-wild-do-table=slaveDB1.tableA%
replicate-wild-do-table=slaveDB2.tableA% 
```

我错过了什么，或者这不能通过复制来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:44:29.613

我所知道的唯一方法是在您的从属服务器上运行多个 mysqld 实例，然后为每个实例设置一个复制重写数据库。

[http://dev.mysql.com/doc/refman/5.0/en/multiple-servers.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-servers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:32:55.627

从[文档](http://dev.mysql.com/doc/refman/5.1/en/replication-options-slave.html)

> 要指定多次重写，请多次使用此选项。服务器使用第一个匹配的 from_name 值。

这表明它不起作用，因为它只会考虑您的两个 replicate-rewrite-db 选项中的第一个（这是您所看到的行为）。

# php - 验证我的 PHP 表单并提交到数据库

> ID：10198539
> 
> 赞同：1
> 
> 时间：2012-04-17T20:22:06.213
> 
> 标签：php, mysql, database, forms, validation

基本上，我正在制作一个评论表单，用户在其中填写有关特定产品的项目，并在提交表单时调用 process.php 来验证表单，并在提交无错误时向我发送电子邮件。然后它将用户返回到表单页面并显示已提交的错误或表示已成功提交，这一切都很好，但我现在需要做的是当正确填写表单时我仍然想要电子邮件并被返回到表单的页面，同时也将数据插入到我的数据库中。我的表单验证效果很好，直到我尝试弹出一些代码以插入数据库，然后我得到这些错误......

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/XZXZ/support/database.inc:16) in /home/XZXZ/public_html/Reviews/process.php on line 113

Warning: Cannot modify header information - headers already sent by (output started at /home/XZXZ/support/database.inc:16) in /home/XZXZ/public_html/Reviews/process.php on line 117 
```

我只需要知道我可以在哪里弹出它以避免这些错误并且仍然可以正常工作。下面看一下 process.php 文件：

```
<?php

    if( isset($_POST) ){  

        //form validation vars  
        $formok = true;  
        $errors = array();  

        //sumbission data  
        $ipaddress = $_SERVER['REMOTE_ADDR'];  
        $sub_date = date('d/m/Y');  
        $sub_time = date('H:i:s');  

        //form data
        $sub_date = $_POST['sub_date'];  
        $sub_time = $_POST['sub_time'];  
        $review_title = $_POST['review_title'];
        $rating = $_POST['rating'];
        $pros = $_POST['pros'];  
        $cons = $_POST['cons'];  
        $best_uses = $_POST['best_uses'];  
        $comments = $_POST['comments'];
        $upload = $_POST['upload']; 
        $recommend = $_POST['recommend'];
        $reviewer_name = $_POST['reviewer_name'];
        $reviewer_desc = $_POST['reviewer_desc'];
        $reviewer_loc = $_POST['reviewer_loc'];

        //form validation to go here....  

    }  

        //validate review title is not empty  
    if(empty($review_title)){  
        $formok = false;  
        $errors[] = "You have not entered a title for this review";  
    }

        //validate rating is selected  
    if (isset ($_POST['rating']) && ($_POST['rating'] == '' )) {
        $formok = FALSE;
        $errors[] = "You have not selected a rating for the product";
    } 

        //validate pros is not empty  
    if(empty($pros)){  
        $formok = false;  
        $errors[] = "You have not entered any pros";   
    }

        //validate cons is not empty  
    if(empty($cons)){  
        $formok = false;  
        $errors[] = "You have not entered any cons";  
    }

        //validate name is not empty  
    if(empty($reviewer_name)){  
        $formok = false;  
        $errors[] = "You have not entered your name";  
    }

        //validate desc is not empty  
    if(empty($reviewer_desc)){  
        $formok = false;  
        $errors[] = "You have not entered your description";  
    }

        //validate location is not empty  
    if(empty($reviewer_loc)){  
        $formok = false;  
        $errors[] = "You have not entered your location";  
    } 

        //send email if all is ok  
    if($formok){  

        $headers = "From: reviews@XZXZ.com" . "\r\n";  
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  

        $emailbody = "<p>You have received a new product review pending approval from XZXZ.com</p> 
                      <p><strong>Review Title: </strong> {$review_title} </p>
                      <p><strong>Rating: </strong> {rating} </p>
                      <p><strong>Pros: </strong> {$pros} </p> 
                      <p><strong>Cons: </strong> {$cons} </p> 
                      <p><strong>Best Uses: </strong> {$best_uses} </p> 
                      <p><strong>Comments: </strong> {$comments} </p>
                      <p><strong>Upload: </strong> {$upload} </p> 
                      <p><strong>Recommend: </strong> {$recommend} </p>
                      <p><strong>Name: </strong> {$reviewer_name} </p>
                      <p><strong>Description: </strong> {$reviewer_desc} </p> 
                      <p><strong>Location: </strong> {$reviewer_loc} </p>
                      <p>This message was sent from the IP Address: {$ipaddress} on {$date} at {$time}</p>";  

        mail("XX@XZXZ.com","New Pending Review",$emailbody,$headers);

        //insert to database    

        require("/home/XZXZ/support/database.inc");

        $SQL="INSERT INTO 'XZXZ_rvs'.'reviews_prod' (sub_date, sub_time, review_title, rating, pros, cons, best_uses, comments, upload, recommend, reviewer_name, reviewer_desc, reviewer_loc) VALUES ('$_POST[$sub_date]','$_POST[$sub_time]','$_POST[$review_title]','$_POST[$rating]','$_POST[$pros]','$_POST[$cons]','$_POST[$best_uses]','$_POST[$comments]','$_POST[$upload]','$_POST[$recommend]','$_POST[$reviewer_name]','$_POST[$reviewer_desc]','$_POST[$reviewer_loc]')";

    }
        //what we need to return back to our form  
    $returndata = array(  
        'posted_form_data' => array(  
            'review_title' => $review_title,
            'rating' => $rating, 
            'pros' => $pros,  
            'cons' => $cons,  
            'best_uses' => $best_uses,  
            'comments' => $comments,
            'upload' => $upload,
            'recommend' => $recommend,
            'reviewer_name' => $reviewer_name,  
            'reviewer_desc' => $reviewer_desc,
            'reviewer_loc' => $reviewer_loc  
        ),  
        'form_ok' => $formok,  
        'errors' => $errors  
    );
    //if this is not an ajax request  
if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){  

    //set session variables  
    session_start();  
    $_SESSION['cf_returndata'] = $returndata;  

    //redirect back to form  
    header('location: ' . $_SERVER['HTTP_REFERER']);  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:26:10.453

***在将任何内容***（包括空行或空格**）发送到浏览器****之前，***您必须添加脚本。如果您关闭`?>`包含在此脚本之前的 PHP 脚本文件 ( )，并且您的编辑器、FTP 客户端或其他应用程序在文件末尾添加一个空行（这很常见），这可能会意外发生。为防止这种情况发生，只需让 PHP 脚本保持开放式（`?>`如果整个文件是 PHP，则省略）。也有可能是一个流浪者`echo`（或类似的东西，例如`print`,`print_var`等）导致了这个问题。*

 *在您的警告中，这似乎是`/home/XZXZ/support/database.inc`在线上发生的`16`。

此外，正如 Saurabh 所触及的，您**必须**`die();`在 every 之后放置，`header("Location: ...");`因为该`header()`函数不会重定向用户 - 它仅`Location: ...`作为标头发送到浏览器，并将其留给浏览器来完成其余的工作 - 但是，服务器，不知道您正在重定向用户，因此它将继续运行脚本。因此，您必须终止脚本以防止执行任何其他代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:56:16.393

您必须将会话开始放在任何 html 标记之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:30:28.820

您能否也分享一下您在`/home/XZXZ/support/database.inc`. 我看不到您在哪里执行查询。但是看着错误，我觉得这`/home/XZXZ/support/database.inc`是在尝试设置重定向。`die()`在使用重定向之后放置一个也是一个好习惯`header`*

# linux - 父/子进程关闭文件描述符

> ID：10198541
> 
> 赞同：5
> 
> 时间：2012-04-17T20:22:13.210
> 
> 标签：linux, file, fork, parent-child, system-calls

如果您在父进程上执行 fork() 并创建子进程，然后子进程会关闭从 fork 继承的 fd。

文件会在父级中保持打开状态，因为它们是独立的吗？标准 i/o 或 stderr 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:42:04.307

不管文件描述符代表文件还是设备，也不管它是否曾经作为标准 i/o 描述符传递给任何进程：如果您在一个进程中关闭它，另一个进程仍然有一个有效的描述符。

（这很自然。想象一下，描述符将与另一个进程中的描述符相互依赖。然后，如果子进程意外崩溃，一旦检测到崩溃，父进程甚至很难记录这一事实. 它无法通过任何先前打开的描述符记录该事实，因为所有形式的进程退出都涉及关闭所有打开的描述符。因此，故障模式倾向于跨进程传播。此外，即使是通过此类的常规、无错误 I/O 模式假设的共享描述符在竞争条件下会比比皆是。）

# r - R，从键值（哈希）中获取键

> ID：10198544
> 
> 赞同：10
> 
> 时间：2012-04-17T20:22:17.110
> 
> 标签：r, hash

快速提问。我的列表（在 R 中）看起来像：

```
> mylist
$width
[1] 32 
```

使用 mylist[1] 我得到：

```
$width
[1] 32 
```

但我怎么得到：

```
$width 
```

谢谢和欢呼。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T20:26:59.720

元素的名称存储在一个名为“names”的*属性*中，可以通过`names`函数访问该属性。

尝试这个：

```
mylist <- list(width=42, height=13)
names(mylist)    # "width"  "height"
names(mylist)[1] # "width"

mylist[["width"]] # 42

mylist[sort(names(mylist))] # sort mylist by the names... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-06-11T12:41:22.127

$ 帮助您提取列表中键的值

`mylist = list(width=50, height=100)`

`mylist$width`

将返回 mylist 中的宽度值。

# database - H2数据库用户

> ID：10198545
> 
> 赞同：3
> 
> 时间：2012-04-17T20:22:19.677
> 
> 标签：database, h2

我在我的客户端-服务器应用程序中使用嵌入式数据库 H2。

对于某些用途，我需要创建用户，该用户只能查看表而无权更改它们。我认为创建非管理员用户对于我的情况就足够了。但是我在尝试执行查询时遇到以下异常`SELECT * FROM ADDRESS`：

```
org.h2.jdbc.JdbcSQLException: Недостаточно прав на объект "PUBLIC.ADDRESS"
Not enough rights for object "PUBLIC.ADDRESS"; SQL statement:
SELECT * FROM ADDRESS [90096-164] 
at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) 
at org.h2.message.DbException.get(DbException.java:169) 
at org.h2.message.DbException.get(DbException.java:146) 
at org.h2.engine.User.checkRight(User.java:98) 
at org.h2.table.TableFilter.<init>(TableFilter.java:122) 
at org.h2.command.Parser.readTableFilter(Parser.java:1084) 
at org.h2.command.Parser.parseSelectSimpleFromPart(Parser.java:1686) 
at org.h2.command.Parser.parseSelectSimple(Parser.java:1793) 
at org.h2.command.Parser.parseSelectSub(Parser.java:1680) 
at org.h2.command.Parser.parseSelectUnion(Parser.java:1523) 
at org.h2.command.Parser.parseSelect(Parser.java:1511) 
at org.h2.command.Parser.parsePrepared(Parser.java:405) 
at org.h2.command.Parser.parse(Parser.java:279) 
at org.h2.command.Parser.parse(Parser.java:251) 
at org.h2.command.Parser.prepareCommand(Parser.java:217) 
at org.h2.engine.Session.prepareLocal(Session.java:415) 
at org.h2.server.TcpServerThread.process(TcpServerThread.java:250) 
at org.h2.server.TcpServerThread.run(TcpServerThread.java:146) 
at java.lang.Thread.run(Unknown Source) 

at org.h2.engine.SessionRemote.done(SessionRemote.java:565) 
at org.h2.command.CommandRemote.prepare(CommandRemote.java:67) 
at org.h2.command.CommandRemote.<init>(CommandRemote.java:46) 
at org.h2.engine.SessionRemote.prepareCommand(SessionRemote.java:437) 
at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1121) 
at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:164) 
at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:152) 
at org.h2.server.web.WebApp.getResult(WebApp.java:1311) 
at org.h2.server.web.WebApp.query(WebApp.java:1001) 
at org.h2.server.web.WebApp$1.next(WebApp.java:964) 
at org.h2.server.web.WebApp$1.next(WebApp.java:967) 
at org.h2.server.web.WebThread.process(WebThread.java:166) 
at org.h2.server.web.WebThread.run(WebThread.java:93) 
at java.lang.Thread.run(Unknown Source)` 
```

有什么方法可以实现目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:13:11.017

您必须将选择权限授予创建的用户。

```
GRANT SELECT ON TEST TO READONLY 
```

更多信息：[http ://www.h2database.com/html/grammar.html#grant_right](http://www.h2database.com/html/grammar.html#grant_right)

# asp.net-mvc - 如何使用继承 partialviewresult 的类设置模型

> ID：10198546
> 
> 赞同：4
> 
> 时间：2012-04-17T20:22:21.763
> 
> 标签：asp.net-mvc, razor

我基于此处提到的动态 css 解决方案：

[ASP.NET MVC 的动态 CSS？](https://stackoverflow.com/questions/4492748/dynamic-css-for-asp-net-mvc)

我注意到继承的 PartialViewResult 仅具有模型的吸气剂，是否有另一种方法可以实现此功能，其中 HttpContext.Response.ContentType = "text/css" 并且我可以像使用局部视图一样发送模型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T05:59:06.200

只需调整自定义操作结果，使其采用模型：

```
public class CssViewResult : PartialViewResult
{
    public CssViewResult(object model)
    {
        ViewData = new ViewDataDictionary(model);
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.ContentType = "text/css";
        base.ExecuteResult(context);
    }
} 
```

进而：

```
public ActionResult Css()
{
    MyViewModel model = ...
    return new CssViewResult(model);
 } 
```

在视图中：

```
@model MyViewModel
@{
    var color = "White";
    if (Model.Hour > 18 || Model.Hour < 8)
    {
        color = "Black";
    }
}
.foo {
    color: @color;
} 
```

# r - 是否可以在 R 中绘制有理函数？

> ID：10198547
> 
> 赞同：2
> 
> 时间：2012-04-17T20:22:24.613
> 
> 标签：r, function, math, plot

是否可以在 R 中绘制有理函数？例如：

![在此处输入图像描述](../Images/ae47ee37347d89d4c66af9a965c63841.png)

`curve(((x+2)*(x-5))/((x-3)*(x+1)), from=-8,to=9)`给出不正确的图可能是因为函数不能在 x=-1 和 x=4

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:55:18.293

R 似乎可以相当优雅地处理渐近爆炸：

```
curve( (x-5)*(x-3)/( (x+1)*(x-4) ), 3 ,5) 
```

为了处理不连续的情况，`n`将“y”增加并替换为高于阈值的 NA。

```
vals <- curve( (x-5)*(x-3)/( (x+1)*(x-4) ), -3 ,5, n=1000)
is.na(vals$y) <- abs(vals$y) > 100
plot(vals, type="l") 
```

# iphone - 如何在 rangeOfString 中搜索大写和小写字母？

> ID：10198554
> 
> 赞同：0
> 
> 时间：2012-04-17T20:22:54.683
> 
> 标签：iphone, objective-c, ios, xcode, range

如何使用`rangeOfString`大写和小写字母搜索字符串？

这就是我到目前为止所拥有的；

```
for (NSString* key in words) {

if ([searchfield.text rangeOfString:key].location != NSNotFound) 
{

       NSString *textresult = [words objectForKey:key];
       NSLog(@"Answer: %@", textresult);
       result.text = textresult;

       result.tag = 1;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:36:07.600

`key`只需以大写或小写形式搜索相应的：

```
[searchField.text rangeOfString:[key lowercaseString]].location != NSNotFound 
```

和

```
[searchField.text rangeOfString:[key uppercaseString]].location != NSNotFound 
```

如果您不关心用户使用的是大写还是小写，只需使用以下`NSCaseInsensitiveSearch`选项：

```
[searchfield.text rangeOfString:key options: NSCaseInsensitiveSearch].location 
   != NSNotFound 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:32:42.070

我会使用 NSRange 和 [NSString lowercaseString] 创建搜索字符串和要搜索的单词的小写版本。

然后使用小写搜索字符串的 rangeOfString 方法生成一个 NSRange，然后我会使用“successRange”来输出相应的原始文本块。

这是我为您准备的一个工作示例：

```
NSArray *keys = [NSArray arrayWithObjects:@"key1", @"key2", @"key3", @"key4", @"key5",@"key6", nil];

NSArray *objects = [NSArray arrayWithObjects:@"How", @"are", @"you", @"doing", @"?",@"How are you doing?", nil];

NSDictionary * words = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

NSString * searchString = @"are";
NSString * lowercaseSearchString = [searchString lowercaseString];

for(NSString * key  in words){

    NSString *  text = [words objectForKey:key];
    NSString * lowercaseText = [text lowercaseString];

    NSRange successRange = NSRangeFromString(@"");

    NSRange lowercaseRange = [lowercaseText rangeOfString:lowercaseSearchString];

    if(lowercaseRange.location!=NSNotFound){
        successRange = lowercaseRange;
    }

    NSLog(@"key: %@, text: %@", key,text);
    if(successRange.length >0){
        NSLog(@"    text subStringWithRange: %@",  [text substringWithRange:successRange]);         
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:17:54.280

```
 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
 { 
      flavourarray = [[NSMutableArray alloc]init];
      imagearray = [[NSMutableArray alloc]init];
      categoryarray = [[NSMutableArray alloc]init];
  [filteredListContent removeAllObjects];   // clear the filtered array first
 searchText=[searchText uppercaseString];

    NSString *cellTitle;

BOOL flag1=NO;
searchText=[searchText lowercaseString];
int i1=0;
j=0;
for (cellTitle in listContent)
{
NSComparisonResult result = [cellTitle compare:searchText     
    options:NSCaseInsensitiveSearch range:NSMakeRange(0, [searchText length])];
    if (result == NSOrderedSame)
    {

        if(flag1==NO)
        {
            filtered_flag=i1;
            flag1=YES;
        }
        [filteredListContent addObject:cellTitle];
        NSString *searchflavour = [[categoryarray_ipad objectAtIndex:j]objectForKey:@"flavour"];
        NSString *searchcategory = [[categoryarray_ipad  
         objectAtIndex:j]objectForKey:@"category"];
        NSString *searchimage = [[categoryarray_ipad objectAtIndex:j]objectForKey:@"image"];

        if (searchText.length !=0) {
        [categoryarray addObject:searchcategory];
        }
        [flavourarray addObject:searchflavour];
        [imagearray addObject:searchimage];
    }
    j++;
    i1++;
}
NSLog(@"filtered_flag:%d",filtered_flag);
NSLog(@"filtered:%@",filteredListContent);
searchresult =TRUE;

[itemstable_ipad reloadData]; 
```

}

# c# - 尝试使用正则表达式捕获一行数据

> ID：10198558
> 
> 赞同：0
> 
> 时间：2012-04-17T20:23:02.453
> 
> 标签：c#, regex, c#-4.0

我试图捕捉到这一点：

```
581116     03/20/12 08:42 87NL 10%ETH A        8,500 G GAL  3.189     27,106.50 
```

我的正则表达式是：

```
^(?<BOLNUM>\d+) +(?<LOADDATE>\d{2}/\d{2}/\d{2}) +(?<LOADTIME>\d{2}:\d{2}) +#?(?<PRODUCTDESC>.*?)#? {2,}(?<QUANTITY>\S+) +(?<BASIS>G|N) +(?<UOM>\w{3}) +(?<PRICE>[\S]+) 
```

但是有些文件有这个来源：

```
581116     03/20/12 08:42 87NL 10%ETH A        8,500 G GAL3.189     27,106.50 
```

`GAL`请注意和之间没有间隙`3.189`。有人可以帮助我的正则表达式捕获上述行吗？请注意，数据可以采用上述任何一种形式，因此我的正则表达式应该能够捕获字段（`GAL`和价格字段）之间是否存在间隙的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:42:03.810

只需转换最后一部分：

```
(?<UOM>\w{3}) +(?<PRICE>[\S]+) 
```

对此：

```
(?<UOM>\w{3}) *(?<PRICE>[\S]+) 
```

使`*`空间可选。

# c# - WCF 在空闲 30 分钟到 1 小时后返回错误

> ID：10198565
> 
> 赞同：0
> 
> 时间：2012-04-17T20:23:43.100
> 
> 标签：c#, wcf, visual-studio-2010, iis-7

我在 WCF 上有这个问题，可能是配置设置问题。我的服务有 httpbasicbindng、webhttpbinding 和 nettcp 绑定。对这些端点中的任何一个的服务调用都可以完美运行。但是当服务空闲 30 分钟到 1 小时没有活动、没有请求或任何与服务交互的东西时。当您对其提出请求时，它将不再处理该请求。该请求被服务拒绝。这是我提出请求时得到的详细信息。

```
{
"Detail": "The server rejected the upgrade request."
} 
```

我的服务托管在 IIS7 下。而且我有一个运行表单来保存 NetTCP 的连接。

***更新***

我在两个客户端/服务器上都启用了系统诊断。我发现这个问题是由我的 wcf 应用程序连接到的另一个服务引起的。该服务没有响应，因为它限制了请求。我增加了对该服务的请求数量，问题就消失了。

# google-analytics - 发现页面视图的来源：来自菜单、横幅等的点击

> ID：10198573
> 
> 赞同：1
> 
> 时间：2012-04-17T20:24:22.170
> 
> 标签：google-analytics

我需要发现页面视图的来源：从菜单、横幅等中单击。例如：

```
Page 1 - 12 hits
----------------
Menu   - 6 hits
Banner - 4 hits
Other  - 2 hits 
```

.

```
Page 2 - 15 hits
----------------
Menu   - 7 hits
Banner - 5 hits
Other  - 3 hits 
```

如何跟踪来源并建立这样的报告？我使用 Google Analytics 搜索并找到了很多东西，但不知道该怎么做。

**编辑：**

我尝试在要跟踪的项目上使用*trackEvent*，但我可以弄清楚如何使用这些事件构建报告。

```
$('#menu').find('a').click(function()
{
    _gaq.push(['_trackEvent', 'Menu', 'click']);
}
$('.banner').find('a').click(function()
{
    _gaq.push(['_trackEvent', 'Banner', 'click']);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:49:04.253

```
<a href="./index.html" onClick="_gaq.push(['_trackEvent', 'mainmenu', 'home'])">home</a>
<a href="./contact.html" onClick="_gaq.push(['_trackEvent', 'mainmenu', 'contact'])">contact</a> 
```

至少等待 24 小时，数据才会出现。然后结果将显示在 GA 中的 Content > Events 下

然后，您可以查看每个“类别”的点击次数，例如，有多少点击是回家或联系的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:13:54.197

事件有利于跟踪...... ermmm .. '事件'的总数。也就是说，任何不是您想要跟踪的综合浏览量的内容。您可以在*Content / Events*中找到报告。因此，我认为您的代码看起来不错

但是，在您的问题中，您说：

> 我需要发现页面视图的来源

在我看来，这听起来像是您想要跟踪导致用户到达特定页面的原因，这样您就可以确定该区域的最佳流量驱动因素是什么。为此，您最好在 URL 上使用广告系列代码。

因此，要链接到 page1.html，您之前可能有：

```
<a href="./page1.html">page 1</a> 
```

像这样添加到此广告系列跟踪：

```
<a href="./page1.html?utm_source=website.com&utm_medium=banner&utm_campaign=ads">page 1</a> 
```

源等的参数是任意的，您可能会从查看[URL Builder here](http://support.google.com/analytics/bin/answer.py?hl=en&topic=1007028&answer=1033867)中受益。然后，您可以通过以下几种方式查看您的广告系列报告：

1.  转到*内容/网站内容*并使用*页面*或*内容深入*分析报告，并在二级维度中显示您的广告系列名称、媒介或来源。
2.  转到*流量来源/来源/广告系列*以查看您的所有广告系列流量。查看哪些驾驶最多等。
3.  您可以创建一个*高级细分*以仅包含特定的广告系列信息，从而仅向您显示该广告系列产生的流量。

另请参阅：[http ://code.google.com/apis/analytics/docs/tracking/gaTrackingCampaigns.html](http://code.google.com/apis/analytics/docs/tracking/gaTrackingCampaigns.html)

# sas - SAS运行批处理模式问题

> ID：10198577
> 
> 赞同：0
> 
> 时间：2012-04-17T20:24:36.000
> 
> 标签：sas

我之前问过这个问题，但那个时候的问题是我的目录中有空白，SAS 不知何故不喜欢。这次我的目录中没有任何空白，但批处理对我不起作用。它要么继续运行（DOS 屏幕不断滚动），要么没有输出。我的日志中没有任何错误，可以在程序中运行，但不能批量运行。任何人都可以有想法吗？

批号：

```
data _null_;
 file "C:\Users\ubishky\Documents\PIE.bat";
 put 'C:';
 put "CD C:\Users\ubishky\Documents\";
 put "PIE_wc(v1.1) C:\Users\ubishky\Documents\ABCA05Cv0.txt   C:\Users\ubishky\Documents\ABCA05COUTv0.txt";
RUN;

options xmin noxwait;
x "C:\Users\ubishky\Documents\PIE.bat"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:45:10.597

尝试更改您的 BAT 文件以在参数周围加上双引号：

```
data _null_;  
   file 'C:\Users\ubishky\Documents\PIE.bat';  
   put 'C:';  
   put 'CD C:\Users\ubishky\Documents\';  
   put '"PIE_wc(v1.1).exe" "C:\Users\ubishky\Documents\ABCA05Cv0.txt" "C:\Users\ubishky\Documents\ABCA05COUTv0.txt"';
RUN; 
```

您可能还想提供该程序的完整路径。另外，请注意，我用单引号替换了您程序中的所有双引号。在定义字符值时，您应该始终只使用单引号。双引号字符串将由 SAS 宏处理器评估并可能导致其他问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:28:58.563

我让它在批处理模式下工作。我只是将exe文件名更改为PIE。不是将 PIE_wc(v1.1) 放入批处理代码中，而是介绍 PIE 的工作方式。

# javascript - 如何使用内联样式调整 javascript 生成的 iframe 的大小？

> ID：10198580
> 
> 赞同：2
> 
> 时间：2012-04-17T20:24:41.530
> 
> 标签：javascript, ajax, facebook, iframe, facebook-javascript-sdk

我想通过调整大小和偏移生成的 iframe 来隔离他们评论小部件中的 Facebook 个人资料图片。棘手的部分（或者在我看来）是生成的 iframe 包含内联样式。

有人愿意帮忙吗？

我确信这违反了 TOS，但这只是为了证明概念。

这是文档：http: [//developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

这是推荐的代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=145044622175352";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-comments" data-href="http://stackoverflow.com" data-num-posts="1" data-width="200"></div> 
```

这是生成的源代码：

```
<div class=" fb_reset" id="fb-root"><div style="position: absolute; top: -2000px;"><iframe src="http://static.ak.facebook.com/connect/xd_arbiter.php?version=4#channel=f218f99fdee7694&amp;origin=http%3A%2F%2Fstackoverflow.com&amp;channel_path=%2Fquestions%3Ffb_xd_fragment%23%3F%3D%26xd_sig%3Df978c5a2550e88%26&amp;transport=postmessage" name="fb_xdm_frame_http" id="fb_xdm_frame_http"></iframe><iframe src="https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=4#channel=f218f99fdee7694&amp;origin=http%3A%2F%2Fstackoveflow.com&amp;channel_path=%2Fquestions%3Ffb_xd_fragment%23%3F%3D%26xd_sig%3Df978c5a2550e88%26&amp;transport=postmessage" name="fb_xdm_frame_https" id="fb_xdm_frame_https"></iframe></div><div style="position: absolute; top: -10000px; height: 0pt; width: 0pt;"><div><iframe src="http://www.facebook.com/dialog/oauth?api_key=145044622175352&amp;app_id=145044622175352&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D4%23cb%3Df75bfba58018fa%26origin%3Dhttp%253A%252F%252Fstackoverflow.com%252Ff218f99fdee7694%26domain%3Dstackoverflow.com%26relation%3Dparent.parent&amp;client_id=145044622175352&amp;display=none&amp;domain=stackoverflow.com&amp;locale=en_US&amp;origin=1&amp;redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D4%23cb%3Dfc987f035fe9c2%26origin%3Dhttp%253A%252F%252Fkidnog.dev%252Ff218f99fdee7694%26domain%3Dkidnog.dev%26relation%3Dparent%26frame%3Df209b5ae6806ada&amp;response_type=token%2Csigned_request%2Ccode&amp;sdk=joey" class="FB_UI_Hidden" style="border: medium none; overflow: hidden; height: 240px; width: 575px;" name="f2ee3a0e40436fc" id="f209b5ae6806ada" scrolling="no"></iframe></div></div></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=145044622175352";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-comments  fb_iframe_widget" data-href="http://stackoverflow.com" data-num-posts="1" data-width="200"><span><iframe src="https://www.facebook.com/plugins/comments.php?api_key=145044622175352&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D4%23cb%3Dfee6478d70ba1%26origin%3Dhttp%253A%252F%252Fkidnog.dev%252Ff218f99fdee7694%26domain%3Dstackoverflow.com%26relation%3Dparent.parent&amp;href=http%3A%2F%2Fstackoverflow.com&amp;locale=en_US&amp;numposts=1&amp;sdk=joey&amp;width=200" class="fb_ltr" style="border: medium none; overflow: hidden; height: 213px; width: 200px;" name="f313c20e013258c" id="f6f0fea91f7fa" scrolling="no"></iframe></span></div> 
```

理想的输出是这样的：

![图片](../Images/a9cad7fb0ca5455b99231ef245d25272.png)

而不是这样的：

![评论](../Images/b3dd5474b2e90a5d03e8ea57f922abea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:52:33.427

您可能是对的，这很可能确实违反了他们的 TOS。但作为概念验证，我试图让它发挥作用。

当用户登录时，此解决方案似乎有效：http: [//jsfiddle.net/joshdavenport/4VaVZ/](http://jsfiddle.net/joshdavenport/4VaVZ/)。但是，当用户未登录时，框会停止[匿名 facebook 个人资料照片](http://www.justgiving.com/content/images/graphics/icons/avatars/facebook-avatar.gif)的完全可见性。

Javascript没有取得任何成功，我认为因为一旦加载框架就会执行各种代码，停止修改，老实说，这很好！他们在阻止恶意代码注入方面做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:31:36.020

使用`overflow:hidden`iframe 和 javascript 的固定宽度/高度，`.scroll()`您可能会得到想要的结果。但是，我看不到在 iframe 中定位图像的方法（来自不同的域）。

PS：如果您不写“只是概念证明”，我将不会回答。永远不要使用它！:-)

# android - 应用 layout_below 参数时，Android 视图不绘制

> ID：10198581
> 
> 赞同：0
> 
> 时间：2012-04-17T20:24:45.143
> 
> 标签：android, android-layout, android-view

我有这个我正在尝试实现的视图，它基本上是一个可以围绕水平轨道移动的拇指。

当它在没有任何特殊布局参数（例如 layout_below）的 RelativeLayout 中时，它可以很好地绘制，但是一旦我在其上放置了 layout_below 参数，它就根本不会绘制！

这可能是什么原因？

公共类 TrackSlider 扩展视图 {

```
/**
 * The thumb of the slider will be limited to move so that it's center does
 * not go beyond the width of the track.
 */
public static final int THUMB_ANCHOR_CENTER = 0;

/**
 * The thumb of the slider will be limited to move so that it's edges do not
 * go beyond the width of the track.
 */
public static final int THUMB_ANCHOR_EDGES = 1;

private float mSliderPosition;
private float mSnapPosition = 0f;
private boolean mSnapEnabled = false;
private int mThumbAnchor;

private Drawable mThumbDrawable;
private Drawable mTrackDrawable;
private int mTrackWidth;
private int mSlideRange;
private int mThumbWidth;
private int mThumbXOffset;

public TrackSlider(Context context, AttributeSet attrs) {
    super(context, attrs);
    TypedArray a = getContext().obtainStyledAttributes(attrs,
            styleable.TrackSlider);
    final int N = a.getIndexCount();
    for (int i = 0; i < N; i++) {
        int attr = a.getIndex(i);
        switch (attr) {
        case styleable.TrackSlider_snapEnabled:
            setSnapEnabled(a.getBoolean(i, false));
            break;
        case styleable.TrackSlider_snapPosition:
            setSnapPosition(a.getFloat(i, 0.0f));
            break;
        case styleable.TrackSlider_startPosition:
            setThumbPosition(a.getFloat(i, 0.0f));
            break;
        case styleable.TrackSlider_thumb:
            setThumbDrawable(a.getDrawable(i));
            break;
        case styleable.TrackSlider_track:
            setTrackDrawable(a.getDrawable(i));
            break;
        case styleable.TrackSlider_thumbAnchor:
            mThumbAnchor = 0;//a.getInt(i, THUMB_ANCHOR_CENTER);
            break;
        }
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int measuredWidth = 0, measuredHeight = 0;
    switch (MeasureSpec.getMode(widthMeasureSpec)) {
    case MeasureSpec.EXACTLY:
        measuredWidth = MeasureSpec.getSize(widthMeasureSpec);
        break;
    case MeasureSpec.AT_MOST:
        measuredWidth = Math.min(
                MeasureSpec.getSize(widthMeasureSpec),
                Math.max(mTrackDrawable.getIntrinsicWidth(),
                        mThumbDrawable.getIntrinsicWidth()));
        break;
    case MeasureSpec.UNSPECIFIED:
        measuredWidth = Math.max(mTrackDrawable.getIntrinsicWidth(),
                mThumbDrawable.getIntrinsicWidth());
        break;
    }
    switch (MeasureSpec.getMode(heightMeasureSpec)) {
    case MeasureSpec.AT_MOST:
        measuredHeight = Math.min(MeasureSpec.getSize(heightMeasureSpec),
                Math.max(mTrackDrawable.getIntrinsicHeight(),
                        mThumbDrawable.getIntrinsicHeight()));
        break;
    case MeasureSpec.EXACTLY:
        measuredHeight = MeasureSpec.getSize(heightMeasureSpec);
        break;
    case MeasureSpec.UNSPECIFIED:
        measuredHeight = Math.max(mTrackDrawable.getIntrinsicHeight(),
                mThumbDrawable.getIntrinsicHeight());
        break;
    }
    setMeasuredDimension(measuredWidth, measuredHeight);
}

@Override
protected void onLayout(boolean changed, int left, int top, int right,
        int bottom) {
    super.onLayout(changed, left, top, right, bottom);
    int w = right - left;
    if (mThumbAnchor == THUMB_ANCHOR_CENTER) {
        mTrackWidth = w - getPaddingRight() - getPaddingLeft()
                - mThumbWidth;
    } else {
        mTrackWidth = w - getPaddingRight() - getPaddingLeft();
    }
    mThumbXOffset = getPaddingLeft();
    mSlideRange = w - getPaddingRight() - getPaddingLeft()
            - mThumbWidth;
    mTrackDrawable.setBounds((w - mTrackWidth) / 2, top + getPaddingTop(), (w + mTrackWidth) / 2, getBottom() - getPaddingBottom());
    mThumbDrawable.setBounds(mThumbXOffset,
            getPaddingTop() + getTop(), mThumbXOffset + mThumbWidth,
            getBottom() - getPaddingBottom());
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    int pos = (int) (mSliderPosition * mSlideRange);
    Rect r = new Rect();
    mThumbDrawable.copyBounds(r);
    r.offset(pos, 0);
    mThumbDrawable.setBounds(r);
    mTrackDrawable.draw(canvas);
    mThumbDrawable.draw(canvas);
    r.offset(-pos, 0);
    mThumbDrawable.setBounds(r);
}

    /* getters and setters... */ 
```

}

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:twoday="http://schemas.android.com/apk/res/com...."
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingLeft="10dp"
    android:paddingRight="10dp" >

    <TextView
        android:id="@+id/message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="normal" />

    <Button
        android:id="@+id/btnContinue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/message"
        android:layout_marginRight="10dp"
        android:background="@drawable/btn_dialog_continue" />

    <Button
        android:id="@+id/btnCancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/btnContinue"
        android:layout_toLeftOf="@id/btnContinue"
        android:background="@drawable/btn_dialog_cancel" />

    <com.twoday.gallerys.views.TrackSlider
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/btnCancel"
        twoday:snapEnabled="true"
        twoday:startPosition="0.5"
        twoday:thumb="@drawable/confirm_slider_thumb"
        twoday:thumbAnchor="center"
        twoday:track="@drawable/confirm_slider_track" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:47:23.450

好的，我找到了解决该问题的方法 - 将视图包装在线性布局中，然后将 layout_below 属性应用于布局而不是视图本身。

# ruby-on-rails - 未初始化的常量 ActionView::CompiledTemplates::

> ID：10198585
> 
> 赞同：1
> 
> 时间：2012-04-17T20:25:12.323
> 
> 标签：ruby-on-rails, ruby, locale, actionview

我是 Rails 的新手，我尝试在 application.html.rb 中执行此操作：

```
 <%= select_tag 'set_locale',
    options_for_select(LANGUAGES, I18n.locale.to_s), :onchange => 'this.form.submit()' %>
        <%= submit_tag 'submit' %>
        <%= javascript_tag "$$('.locale input').each(Element.hide)" %> 
```

我在 config/initializers 目录中有 i18n.rb 文件，该文件的代码是：

```
#encoding: utf-8
I18n.default_locale = :en

LANGUAGES = [
  ["English",                  "en"],
  ["Espa&ntilde;ol".html_safe, "es"]] 
```

但是当我运行时，我收到此错误消息：

`uninitialized constant ActionView::CompiledTemplates::LANGUAGES`

我认为问题出在`LANGUAGE`因为rails不知道，但我不知道我能做什么。

我使用 ruby​​ 1.9.2 和 rails 3.0.5。

拜托，我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:20:30.343

可以试试看`::LANGUAGES`吗？

但我认为更好的做法是在应用程序助手中指定语言选择助手方法。

在助手中：

```
def languages_select_tag(name = 'set_locale')
  languages = [["English","en"],["Espa&ntilde;ol".html_safe, "es"]]
  options = options_for_select(languages, I18n.locale.to_s)
  select_tag(name, option, :onchange => 'this.form.submit()')
end 
```

鉴于：

```
<%= languages_select_tag %>
<%= submit_tag 'submit' %>
<%= javascript_tag "$$('.locale input').each(Element.hide)" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T10:55:45.067

我有同样的问题。我通过添加来修复它

```
def languages
  LANGUANGES
end 
```

在 i18n.rb 文件中。然后使用它

```
options_for_select(languages, I18n.locale.to_s) 
```

# html - HTML 评论生成器

> ID：10198588
> 
> 赞同：2
> 
> 时间：2012-04-17T20:25:25.983
> 
> 标签：html, text, comments, generator, ascii-art

这似乎是一个奇怪的问题，但我正在寻找 HTML 语言的评论生成器。尽管我确信这同样适用于任何语言。

我所说的注释生成器的意思是，当您注释掉 HTML 中的代码以提醒自己哪些位做什么时，您会做`<!-- Title -->`对吗？

但是我见过这个开发人员对他正在处理的大量代码有大量的“注释掉的标题”，这样他就不会迷路。实际的“注释掉的文本”由字符组成，使其看起来像它的实际文本。它有点难以解释，但我会尽力在下面做一个粗略的例子：

```
|||||||||.||.|||||||||.||.....||||||
...||.....||....||.....||.....|||...
...||.....||....||.....||.....||....
...||.....||....||.....||||||.|||||| 
```

嗯..效果比预期的要好，但是您明白我的意思吗？只是想知道那里是否有一台发电机可以为我做这件事。

我什至不知道这种“艺术形式”叫什么。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:28:21.677

这种“艺术形式”通常被称为“ASCII艺术”。[您可以在FIGlet](http://www.figlet.org/)找到在线生成器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-07T08:04:30.777

为了您的目的，您可以使用任何在线文本到 ASCII 转换器。网上有很多网站。示例站点：[链接](http://www.network-science.de/ascii/)。希望能帮助到你！

# ruby-on-rails - 如何用数组中的空格替换破折号

> ID：10198590
> 
> 赞同：2
> 
> 时间：2012-04-17T20:25:30.480
> 
> 标签：ruby-on-rails, arrays, replace, gsub

如何同时用空格替换破折号和用逗号替换下划线？

我能够用逗号替换下划线，但是当我尝试再次通过数组重复时，它给出了一些时髦的结果。

控制器

```
 def activity_by_all_city
      @cities = ['Abilene_Texas','Akron_Ohio','Albuquerque_New-Mexico','Baton-Rouge_Louisiana']
  end 
```

看法

```
<% @cities.each do |city|%>
    <%= link_to city.gsub!(/_/, ', '), 'activities-'+city.parameterize %><br>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:53:27.100

您可以使用[String#tr](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-tr-21)将一组字符替换为另一个字符：

```
@cities.collect {|city| city.tr('-_', ' ,') }
=> ["Abilene,Texas", "Akron,Ohio", "Albuquerque,New Mexico", "Baton Rouge,Louisiana"] 
```

以上将创建一个新列表，保持原始`@cities`字符串不变。如果您使用破坏性版本（String#tr！），字符串将被修改，`@cities`保留翻译的城市名称：

```
@cities.each {|city| city.tr!('-_', ' ,') }
=> ["Abilene,Texas", "Akron,Ohio", "Albuquerque,New Mexico", "Baton Rouge,Louisiana"]
@cities
=> ["Abilene,Texas", "Akron,Ohio", "Albuquerque,New Mexico", "Baton Rouge,Louisiana"] 
```

（此原则适用于所有“破坏性”方法，而且`gsub!`，它们会改变它们所应用的对象。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:42:04.947

尝试：

```
<%= link_to city.replace(city.gsub(/-/, ' ').gsub(/_/, ', ')), 'activities-'+city.parameterize %><br> 
```

给出：

```
<a href="activities-albuquerque-new-mexico">Albuquerque, New Mexico</a> 
```

# android - 报警管理器的报警有时不取消

> ID：10198591
> 
> 赞同：2
> 
> 时间：2012-04-17T20:25:37.580
> 
> 标签：android, alarmmanager

我使用下面的代码创建和取消**一个镜头警报**。**有时会发生警报没有取消，而是在定义的时间段内触发**。字符串**timerType**始终相同。

谁能解释为什么警报并不总是被取消？

谢谢你。弗朗索瓦

```
public static final void startOneShotAlarm(Context context, int minutes, String timerType) {

    long period = 1000*60*minutes;
    long firstTime = SystemClock.elapsedRealtime() + period;

    Intent intent = new Intent(context, RepeaterDone.class);
    intent.setData(Uri.parse(timerType));
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent,  PendingIntent.FLAG_ONE_SHOT);

    Log.d("BAN", "RepeaterStart, >" + Uri.parse(timerType) + "< ctx="+context.toString() + "i=" + intent.toString());

    // Schedule the alarm!
    AlarmManager alarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    alarmManager.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, firstTime, pendingIntent);
}

private static final void stopOneShotAlarm(Context context, String timerType) {
    // Create the same intent, and thus a matching IntentSender, for the one that was scheduled.
    Intent intent = new Intent(context, RepeaterDone.class);
    intent.setData(Uri.parse(timerType));
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent,        PendingIntent.FLAG_ONE_SHOT);
    Log.d("BAN", "stop, >" + Uri.parse(timerType) + "< ctx="+context.toString() + "i=" + intent.toString());            

    // And cancel the alarm.
    AlarmManager alarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    alarmManager.cancel(pendingIntent);
} 
```

# asp.net - 仅将 ASP.Net Repeater 包裹在图像周围一次

> ID：10198594
> 
> 赞同：0
> 
> 时间：2012-04-17T20:26:02.183
> 
> 标签：asp.net, repeater

几天来我一直在寻找这个问题的答案，但没有任何乐趣，我相信我会在这里找到解决方案。

简单来说...

我有一个 asp:Repeater，它运行良好，从代码隐藏中填充。然而，页面看起来很朴素，并且所有者希望将图像放在右上角。听起来很简单。

在图像周围环绕文字是我可以做的事情。填充中继器也是我可以做的事情。

我似乎无法弄清楚如何在转发器中将文本包装在单个图像周围。

======= 其他选择？

这里的想法是，这些是足球教练对其团队的评论和提示。它们通常是一个带有日期和标题的短段落。它们将展示 90 天，然后下架。

有比中继器更好的东西吗？这似乎是最好的方法，但我是 C# 和 asp.Net 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:40:16.007

如果您想要整个中继器的单个图像，请在 HeaderTemplate 中放置一个图像控件，如下所示：

```
<asp:Repeater runat="server">
    <HeaderTemplate>
        <asp:Image ID="imgSingle" />
    </HeaderTemplate>... 
```

如果您想要每个评论/提示的图像，请将图像控件放在 ItemTemplate 中，如下所示：

```
<asp:Repeater runat="server">
    <ItemTemplate>
        <asp:Image ID="imgMultiple" runat="server" />
    </ItemTemplate> 
```

这是你想要完成的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:32:36.090

中继器本身不会生成包含 HTML 元素，因此您可以将图像放在中继器之外，但仍位于包含列表的元素内。

例子：

```
<div>

  <img src="..." style="float:right" />

  <asp:Repeader ... >

</div> 
```

转发器中的内容将在包含 div 内的图像周围流动。

# f# - Action 和 unit -> F# 中的 unit 类型之间的重载解析不明确

> ID：10198597
> 
> 赞同：4
> 
> 时间：2012-04-17T20:26:33.040
> 
> 标签：f#

给定以下片段：

```
type Foo() =
    static member Test (act : unit -> unit) = act()
    static member Test (act : Action) = Foo.Test act.Invoke 
```

我在最后一行出现错误，说明：无法根据此程序点之前的类型信息确定方法“测试”的唯一重载。可能需要类型注释。

不幸的是，类型注释`(act.Invoke : unit -> unit)`不能解决歧义，我找不到可以修复它的注释。我希望该`Action`版本是该版本的包装器`->`。我的特定用例是定义一个将从 F# 和 C# 调用的类，因此我希望它能够在两种语言中本地工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:47:11.993

F# 为您插入转换`Action`，因此您可以（理论上）使用一种方法。

```
type Foo() =
    static member Test (act : Action) = act.Invoke()

Foo.Test (fun () -> ()) 
```

我不知道如何强制编译器在 和 之间进行`Action`选择`unit -> unit`。另外两个选项：

1.  使`Action`过载成为主要并做`Foo.Test(Action(act))`
2.  将逻辑放在从公共方法调用的第三个函数中

但我的建议是采用单一方法`Action`。由于转换是自动的，因此互操作在某种意义上是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T02:21:40.853

正如 Daniel 所说，您可能可以跳过第一个重载，因为当采用委托的方法应用于 F# 函数值时，F# 会自动插入委托构造函数（参见规范的第[8.13.6](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997181)节）。

如果您真的想定义一个与您的示例具有相同表面积的类型，您可以利用 let-bound 函数不包括类型导向转换的事实（只有方法调用才这样做）：

```
type Foo() = 
    static let test act : unit = act()
    static member Test act = test act
    static member Test (act : System.Action) = test act.Invoke 
```

但是，这样做并不是很有用，因为如果您尝试从类外部调用第一个重载，就像您在尝试定义第二个重载时遇到的那样，您将遇到同样的问题。

# objective-c - 在 iOS 应用程序中嵌入 SoundCloud 播放器

> ID：10198599
> 
> 赞同：1
> 
> 时间：2012-04-17T20:26:40.157
> 
> 标签：objective-c, ios, soundcloud

是否可以在 iOS 应用程序中嵌入 soundcloud 播放器？我一直在四处寻找，我能找到的只有 Javascript API。是通过 UIWebView 完成此任务的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:21:03.260

目前我们没有为可可提供任何播放器/流媒体框架，所以 UIWebbView 可能是将播放器嵌入到您的应用程序中的最佳选择，尽管我不确定它是否真的能够完全支持小部件。

请让我们知道它是否有效。

# node.js - nodejs socket.io 无法连接到服务器？

> ID：10198602
> 
> 赞同：13
> 
> 时间：2012-04-17T20:26:44.850
> 
> 标签：node.js, socket.io

我整个下午都在盯着 node.js 和 socket.io 的例子，我试图拼凑一个简单的页面，告诉我有多少用户连接到服务器。

我已经阅读了[http://socket.io/](http://socket.io/)上的文档以及这里的一些教程/问题，这些教程/问题概述了我正在尝试做的事情。我还发现[创建简单的节点 js 服务器和客户端](https://stackoverflow.com/questions/5266535/create-simple-node-js-server-and-client)对我没有帮助。

版本信息：

> node.js - 0.6.15
> express - 3.0.0alpha1
> socket.io - 0.9.5 （socket.io-client 是同一版本，但是找不到资源...见评论）
> ejs - 0.7.1

这是我的服务器代码：

```
var express = require('express'),
    config = {
        port: 4000,
        hostname: 'localhost'
    };

var server = module.exports = express.createServer();
    /* server configuration */
    server.use(express.cookieParser('keyboard unicorn'));
    server.use(express.bodyParser());
    server.use(express.methodOverride());
    server.use(express.session({ secret: 'keyboard unicorn' }));
    server.engine('.html', require('ejs').__express);
    server.set('views', __dirname + '/lib/views');
    server.set('view options', { layout: false });
    server.set('view engine', 'html');
    server.use(server.router);
    server.use('/', express.static(__dirname + '/lib/assets'));

var io = require('socket.io').listen(server);

var connections = { 'length': 0 };

io.sockets.on('connection', function(socket) {
    socket.__fd = socket.fd;
    connections[socket.__fd]=socket.remoteAddress;
    ++connections.length;
    console.log('user connected! There are a total of ' + connections.length + ' users online.');
    return socket.on('disconnect',function(){
        delete conns[socket.__fd];
        --connections.length;
        console.log('user disconnected! There are a total of ' + connections.length + ' users remaining online.');
    });
});

server.get('/', function( req, res ) {
    res.render('index', {
        'page_title': 'sample application',
        'number_of_connections': connections.length
    });
});

server.listen(config.port, config.hostname); 
```

这是我的客户代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title><%= page_title %></title>
</head>
<body>
<div>There is a total of <%= number_of_connections %> user(s) connected.</div>
<script src="http://cdn.socket.io/stable/socket.io.js"></script>
<script type="text/javascript">
var socket = new io.Socket('localhost',{'port':4000});
socket.connect();
socket.on('connect', function() {
    console.log('connected');
});
</script>
</body>
</html> 
```

这是我运行服务器并与客户端连接时发生的情况。

```
$ node server.js
   info  - socket.io started 
```

然后当我在我的网络浏览器上导航到 localhost:4000 时，我得到的页面是“0”（number_of_connections）。此外，我在服务器的终端中什么也看不到（on.('connection' 永远不会被击中）。

在客户端上，一两秒后，我开始收到大量错误（如果我让控制台打开几秒钟，它会使页面崩溃）见下图：

![在此处输入图像描述](../Images/bb0459a53a83def1f543703aaf9a66c2.png)

请，任何有关从哪里开始调试的帮助将不胜感激！我只想让这个基本示例启动并运行，这样我就可以开始使用/理解 nodejs 和 socket.io！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T13:54:33.627

问题是因为 Express 现在是一个函数。

您需要执行以下操作：

```
var express = require('express');
var app = express();
var server = app.listen(3000);

var io = require('socket.io').listen(server); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T22:32:24.190

Express 3.0.0alpha 和 socket.io 不（直接）兼容，因为 Express 在 2.* 和 3.* 之间发生了变化（或者更确切地说，是 Connect 在 1.* 和 2.* 之间发生了变化）。我建议您暂时降级到 Express 2.5.9，或者您可以遵循Express 的作者 TJ Holowaychuk 的[建议](https://github.com/senchalabs/connect/issues/500#issuecomment-4620773)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T22:47:35.140

我搭建了一个测试环境，安装了express 3.0和socket.io 0.9.5，重现了你的错误。

然后我`npm install express@2.5.1`根据[迁移指南](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)进行了一些向后调整，并且运行良好。

因此，我将继续建议 socket.io 可能与 express 3 不兼容，它看起来仍然很不稳定。

我的 app.js 针对 express 2 进行了调整：

```
var express = require('express'),
    config = {
    port: 8080,
    hostname: 'localhost'
};

var server = module.exports = express.createServer();
/* server configuration */
server.set('views', __dirname + '/lib/views');
server.set('view options', { layout: false });
server.set('view engine', 'ejs');
//server.register('.html', 'ejs');require('ejs').__express);
server.use(express.cookieParser('keyboard unicorn'));
server.use(express.bodyParser());
server.use(express.methodOverride());
server.use(express.session({ secret: 'keyboard unicorn' }));
server.use('/', express.static(__dirname + '/lib/assets'));
server.use(server.router);

var io = require('socket.io').listen(server);

io.set('log level', 2);

var connections = { 'length': 0 };

server.get('/', function( req, res ) {
        res.render('index', {
                'page_title': 'sample application',
                    'number_of_connections': connections.length
                    });
    });

io.sockets.on('connection', function(socket) {
        socket.__fd = socket.fd;
        connections[socket.__fd]=socket.remoteAddress;
        ++connections.length;
        console.log('user connected! There are a total of ' + connections.length + ' users online.');
        return socket.on('disconnect',function(){
                delete conns[socket.__fd];
                --connections.length;
                console.log('user disconnected! There are a total of ' + connections.length + ' users remaining online.');
            });
    });

server.listen(config.port); 
```

我的 index.ejs 文件：

```
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <title><%= page_title %></title>
</head>
<body>
<div>There is a total of <%= number_of_connections %> user(s) connected.</div>
<!--<script src="http://cdn.socket.io/stable/socket.io.js"></script>-->
<script src='/socket.io/socket.io.js'></script>
<script type="text/javascript">
   var socket = io.connect('http://hostname.com:8080');
   socket.on('connect', function() {
      console.log('connected');
   });
</script>
</body>
</html> 
```

我希望这里有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T17:54:36.797

替换`app.use(express.bodyParser());`，用

```
app.use(express.json());
app.use(express.urlencoded()); 
```

...保存文件，重新启动节点服务器。

# magento - 左侧导航不会扩展到 100% Magento

> ID：10198604
> 
> 赞同：0
> 
> 时间：2012-04-17T20:26:56.410
> 
> 标签：magento, css

我在 Magento 商店工作： http: [//nscar.org/magento/](http://nscar.org/magento/)

我试图让左侧导航扩展到产品所在容器的 100%。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:06:05.547

我猜你真正想做的是让橙色背景在整个左侧边栏上重复。为此，您只需为#left 而不是#publicnav 设置背景。

在 /magento/skin/frontend/default/css/styles.css 在适当的地方添加：

```
#left {
    height: 100%;
    background:url('http://www.nscar.org/images/background.gif');
    background-repeat:repeat-y;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T02:23:12.863

在您的 .col-left 的 css 中，找不到背景图像，将其从更改`..images/background.gif`为`../images/background.gif`有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:14:36.887

尝试根据页面主体使用javascript动态设置左侧菜单的高度。下面的代码会帮助你。

```
<script>
var leftH       = 0;
var rightH      = 0;
var minHeight   = 0;

function resize() {  
    leftH   = document.getElementById('box7-container').offsetHeight;
    rightH  = document.getElementById('box8-container').offsetHeight;
    minHeight= (leftH > rightH) ? leftH : rightH ;

    adjust_heights();
}

function adjust_heights() {
    var left    = document.getElementById('leftDivId');
    var right   = document.getElementById('rightDivId');
    minHeight = minHeight - 9;
    if(rightH == minHeight)
        left.style.height   = (minHeight) + 'px';
    else
        right.style.height  = (minHeight) + 'px'; 
}
resize();
</script> 
```

使用适当的 div id 更改 leftDivId 和 rightDivId。

# class - 如果我有实例列表，调用类函数的 Pythonic 方式

> ID：10198609
> 
> 赞同：3
> 
> 时间：2012-04-17T20:27:03.573
> 
> 标签：class, python

所以我有一个包含许多类实例的列表。

随着时间的推移，我想在每一步都调用`run`类的方法。

到目前为止，我有以下内容。但是有没有更好或更 Pythonic 的方式来实现这个`for c in objs:`块？

谢谢！

```
#!/usr/bin/python

class the_class:
    def __init__(self):
        self.num=1
    def run(self):
        self.num+=1

def main():
    objs=[]
    objs.append(the_class())
    objs.append(the_class())
    objs.append(the_class())

    for t in range(10):
        for c in objs:
            c.run()

    print objs[0].num

main() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T20:30:16.470

不，你所拥有的是完全合理和 Pythonic 的。

列表理解语法：

```
[c.run() for c in objs] 
```

为您节省一行，但使用列表推导来处理副作用通常被认为是不好的风格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T20:50:55.430

不，你所拥有的一切都很好。

在此处使用列表理解或映射会使您的代码不那么清晰且难以阅读。我**强烈建议不要这样做**。

列表推导式旨在创建一个列表。在你想制作循环的地方，使用循环。

即使您确实需要对此进行优化（并且无论如何使用列表组合或映射都不太可能是有效的优化），但当您有证据证明这是一个瓶颈时就这样做。可读性是第一位的，只优化你必须的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:38:51.533

还有一个`map`内置函数，它与列表推导基本相同：

```
map(lambda x:x.run(),objs) 
```

但大多数人认为列表推导更“pythonic”。此外，人们对使用列表推导来处理副作用的任何保留也可能适用`map`。我提出它的唯一原因是因为该`multiprocessing`模块有一个`Pool`类，它有一个 map 方法可以并行进行计算，并且与内置的基本相同`map`（[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)）。如果 run 方法需要一段时间才能完成，并且每个方法都独立于其他方法，那么它可能是值得的。

**编辑**

`lambda`如评论中所述，您可以使用 operator 模块更快地执行此操作（删除）。但是，重点是（并且仍然是）您可以使用`map`或`multiprocessing.Pool.map`几乎可以互换使用，并在许多应用程序中使用后者来提升性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T22:59:52.297

对于 python 3，您不能简单地使用 map，因为您必须将其作为生成器来处理。

```
def exhaust(gen):
    for _ in gen: pass

# Using map
exhaust(map(lambda x: x.run(), c))

# Using generator comprehension (better)
exhaust(x.run() for x in c) 
```

或者，您可以创建一个虚拟函数，并使用`*`运算符：

```
def nop(*args): pass
nop(*(x.run() for x in c)) 
```

正如其他人所指出的，这些都不是很好读的。坚持你所拥有的，这样人们就可以阅读它。

编辑：改进排气功能，谢谢wim。

# php - 大规模数据处理、国外 API 和加载条

> ID：10198610
> 
> 赞同：0
> 
> 时间：2012-04-17T20:27:06.893
> 
> 标签：php, mysql, ajax, api, curl

我正在使用来自两个网站（站点 1 => 我的应用程序 => 站点 2）的两个独立且不同的 API。从一个站点的 API 中提取（获取）数据并将数据发送（发布）到另一个站点。有一层同步 AKA “填补裂缝”（始终保持发送站点的数据与源镜像），以及一层非重复（确保站点 1 的数据集在站点 2 上没有重复条目）。

当用户通过一个简单的表单 POST 按钮引发“同步”时。可能需要将站点 1 中的数千个条目带入站点 2。执行此操作的简单低级方法是从站点 1 循环获取一组数据，在该循环中，我将有一个函数获取数据并将其发送到站点 2。当大规模工作时，这种循环肯定会失败或挂起几分钟，当页面退出时终止。

这是“低级/低技术”方式的示例。其中这个例子的每个部分都非常耗时。在一页/一个脚本上发生的所有操作，用户可以停止。该页面将是白色的、空白的，并且不是很用户友好。

```
// Get all of the data from site one
$siteOneDataNuggets = get_siteOne_data();

//Loop through all of site one's data
foreach($siteOneDataNuggets as $siteOneDataNugget){

  //Post it to site two
  post_siteTwo_data($siteOneDataNugget);

} 
```

当有这样一个可能需要一段时间的过程时，我很想展示某种加载屏幕/栏。这样的事情也将如何实施。

我正在寻找一种编码哲学或标准方法来处理我的上述情况。想法和理论是我正在寻找的，不一定是代码示例。

**我自己先入为主的选择。**

这样做的另一种方法可能是让一个页面充当我可以请求的本地化“API”，每个页面都有自己的实例，`$siteOneDataNugget`将逻辑分布在 1000 个页面而不是 1 个页面上。最有可能通过 ajax 提供加载栏/表示层来完成。

**进度报告**

我没有深入研究替代方案。从 PHP CURL 开始，当我发现加载需要几个小时（触发 4 分钟超时）时，我偶然发现了[Jaisen](https://github.com/jmathai/php-multi-curl) Mathai在这篇[博客文章](http://www.jaisenmathai.com/articles/php-curl-asynchronous.html)中解释的 EpiCurl，它使用异步 curl 调用。它有它自己的[局限性](https://github.com/jmathai/php-multi-curl/issues/6)，我还没有克服。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T23:52:20.027

我在这个方面领先于我的时间。我所做的真的很愚​​蠢，我向我的服务器发出了数千个 AJAX 请求，这些请求做了一些动作。我应该做的是使用 WebSockets / socket.io 这样我就可以在客户端和服务器之间进行某种双向通信，并且能够处理批量操作和进度条。

在提出这个问题时，两者都处于起步阶段。

*   [WebSocket 规范](https://www.rfc-editor.org/rfc/rfc6455)
*   [Socket.io 的第一次提交](https://github.com/socketio/socket.io/commit/1514af064f7b9a319df2e87a7da6f3cc0f07ce16)

# jquery - 如何从触发当前事件的事件中检索数据？

> ID：10198611
> 
> 赞同：0
> 
> 时间：2012-04-17T20:27:19.060
> 
> 标签：jquery

首先我放了一个 div 列表

```
<div class=grades> Grade: 1, 2, 3, 4, 5, 6 </div>
<div class=classes> Classes numbers depend on the grade </div>
<div class=students> Students names depend on the grade and class </div> 
```

每个等级编号的定义如下：

```
<a href=# class=gradenum>1</a>
<a href=# class=gradenum>2</a>
<a href=# class=gradenum>3</a>
..... 
```

然后我尝试使用 jquery 通过单击年级编号来显示班级编号。

```
$("a.gradenum").click(function(){
  var grade = $(this).text();
  $("div#classes").load("ShowClasses.php",{'grade':grade});
}); 
```

它按预期工作。类以类似的格式显示。现在我想使用相同的过程按给定的年级和班级编号显示学生的姓名。

```
$("div#classes").on("click", "a.classnum",function(){
  var class = $(this).text();
  var grade = ??????  //How do I get the grade number here?
  $("div#students").load("ShowStudents.php",{'grade':grade, 'class':class});
}); 
```

如何从我第一次在成绩行中单击的数字中获取成绩编号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:44:11.347

您可以使用该[`index()`](http://api.jquery.com/index/)方法。

```
$(".classes").on("click", ".classnum", function() {
  var $this = $(this);
  var class = $this.text();
  var grade = $this.index() + 1; // Start at 0
  $(".students").load("ShowStudents.php",{'grade':grade, 'class':class});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:52:06.057

我会这样做：

```
var grade; // Move this outside, making it "global".

$("a.gradenum").click(function(){
  grade = $(this).text(); // Set the global grade
  $("div.classes").load("ShowClasses.php",{'grade':grade});
});

$("div.classes").on("click", "a.classnum",function(){
  var class = $(this).text();
  // Use the global grade.
  $("div#students").load("ShowStudents.php",{'grade':grade, 'class':class});
}); 
```

# php - 如何以编程方式获取实例的公共 dns？

> ID：10198612
> 
> 赞同：7
> 
> 时间：2012-04-17T20:27:20.930
> 
> 标签：php, amazon-ec2, amazon-web-services

有没有办法使用 PHP amazon SDK（或 amazon 的 API 命令行工具）获取 EC2 实例的公共 DNS？

我尝试了这个 PHP 代码（以及其他代码），但它不起作用：

```
require_once '/full/path/sdk.class.php';
$ec2      = new AmazonEC2();
$response = $ec2->describe_regions();
print_r($response); 
```

并且

```
require_once '/full/path/sdk.class.php';
$ec2      = new AmazonEC2();
$response = $ec2->describe_instances(array(
    'Filter' => array(
        array('Name' => 'availability-zone', 'Value' => 'eu-west-1')
    )
));

print_r($response); 
```

但我在响应中看不到公共 dns

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T21:38:06.377

如果您在实例本身上运行它，您可以点击 AWS 的内部元数据端点：

```
$hostname = file_get_contents('http://169.254.169.254/latest/meta-data/public-hostname'); 
```

`http://169.254.169.254/latest/meta-data/`将为您提供可用的各种元数据的列表。目前：

```
ami-id
ami-launch-index
ami-manifest-path
block-device-mapping/
hostname
instance-action
instance-id
instance-type
kernel-id
local-hostname
local-ipv4
mac
metrics/
network/
placement/
profile
public-hostname
public-ipv4
public-keys/
reservation-id
security-groups 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T21:07:46.790

显然您想在区域中检索您的[Amazon EC2](http://aws.amazon.com/ec2/)实例`eu-west-1`（顺便说一句，这不是“可用性区域”的正确值）。但是，您没有指定任何区域，*所有服务默认为 US-East 区域*，请参阅 AWS 团队对相关问题[describeInstances() 的回复仅在 us-east 中给我实例](https://forums.aws.amazon.com/message.jspa?messageID=204669#204669)：

> 虽然您无法在一次调用中获取所有区域的数据，但您可以在每个区域中调用 describe_instances() 方法。
> 
> ```
> $ec2 = new AmazonEC2();
> $ec2->set_region(AmazonEC2::REGION_US_W1); // US-West 1
> 
> $response = $ec2->describe_instances(); 
> ```

将此代码与您选择的区域（例如`AmazonEC2::REGION_EU_W1`）的适当常量一起使用应该会产生所需的结果。

# javascript - Javascript POST 钩子

> ID：10198613
> 
> 赞同：1
> 
> 时间：2012-04-17T20:27:24.427
> 
> 标签：javascript, http, http-post, dom-events

我已经启动并运行了一个网页，我想知道是否可以创建一个事件侦听器来获取所有 HTTP POST 或 GET 或 PUT 事件。所以，我想做的是当用户点击我网站上的提交按钮或点击链接时，触发一个 Javascript 函数，以便我可以获取 http 请求中的参数。

我想要做的是检查来自 http 请求的参数，并在某些条件下发送另一个不同的 http 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:30:24.600

您可以将事件处理程序添加到页面上的所有表单和链接：

```
var myHandler = function(e) {
// Do what you want here
};

$('a').click(myHandler);
$('form').submit(myHandler); 
```

# android - AsyncTask GeoCoder 有时会崩溃？

> ID：10198614
> 
> 赞同：0
> 
> 时间：2012-04-17T20:27:24.757
> 
> 标签：android, android-asynctask

谁能帮我弄清楚为什么有时 AsyncTask GeoCoder 有时会工作，而有时会崩溃？我浏览了一些与该主题相关的帖子，但似乎无法与之相关。

这是我的代码：

```
public class statuspage extends MapActivity {

LocationManager locationManager;
MapView mapView;
Criteria criteria;
Location location;
Geocoder gc;
Address address;

String bestProvider;
String LOCATION_SERVICE = "location";
String addressString = "No address found";
String lonLat = "lonLat";
StringBuilder sb;
StringBuilder ssb;

private MapController mapController;
private MyLocationOverlay myLocation;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.statuspage);

    // Get Mapping Controllers etc //
    mapView = (MapView) findViewById(R.id.mapView);
    mapController = mapView.getController();
    mapController.setZoom(17);
    mapView.setBuiltInZoomControls(true);

    // Add the MyLocationOverlay //
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);
    myLocation.enableMyLocation();

    // Animates the map to GPS Position //
    myLocation.runOnFirstFix(new Runnable() {
        public void run() {
            mapController.animateTo(myLocation.getMyLocation());
        }
    });
}

@Override
protected boolean isRouteDisplayed() {

    // Executes GeoCoding AsyncTask //
    new GeoCoder().execute();

    // Location Manager Intiation
    locationManager = (LocationManager) statuspage.this
            .getSystemService(LOCATION_SERVICE);
    criteria = new Criteria();

    // More accurate, GPS fix.
    criteria.setAccuracy(Criteria.ACCURACY_FINE); // More accurate, GPS fix.
    bestProvider = locationManager.getBestProvider(criteria, true);
    location = locationManager.getLastKnownLocation(bestProvider);
    if (location != null) {

        // Latitude and Longitude TextView
        TextView etlongitude = (TextView) findViewById(R.id.etlongitude);
        TextView etlatitude = (TextView) findViewById(R.id.etlatitude);

        double latitude = location.getLatitude();
        double longitude = location.getLongitude();

        // Latitude and Longitude TextView Display Coordinates //
        etlongitude.setText((longitude) + "");
        etlatitude.setText((latitude) + "");

        // locationManager.removeUpdates((LocationListener) location);
        locationManager = null;

    } else {

    }

    return false;
}

class GeoCoder extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        Log.d("AsyncTask", "GeoCoder-doInBackGround");

        double latitude = location.getLatitude();
        double longitude = location.getLongitude();

        gc = new Geocoder(statuspage.this, Locale.getDefault());
        try {

            List<Address> addresses = gc.getFromLocation(latitude,
                    longitude, 1);

            sb = new StringBuilder();
            if (addresses != null && addresses.size() > 0) {
                address = addresses.get(0);
                int noOfMaxAddressLine = address.getMaxAddressLineIndex();
                if (noOfMaxAddressLine > 0) {
                    for (int i = 0; i < address.getMaxAddressLineIndex(); i++) {
                        sb.append(address.getAddressLine(i)).append("\n");
                    }
                    addressString = sb.toString();
                }
            }
        } catch (Exception e) {
            addressString = e.toString();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        TextView scrollview = (TextView) findViewById(R.id.scrollview);
        scrollview.setText("Current Position:" + "\n"
                + "(Accurate to 500 meters)" + "\n" + (addressString));

        Log.d("AsyncTask", "GeoCoder-onPostExecute");
        return;
    }

}

@Override
protected void onResume() {
    super.onResume();
    myLocation.enableMyLocation();
    //new GeoCoder().execute();
}

@Override
protected void onPause() {
    super.onPause();
    myLocation.disableMyLocation();
    //new GeoCoder().cancel(true);
}

@Override
public void onBackPressed() {

    // Button OnClick Vibrating Service
    Vibrator vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

    // Vibrate Service
    vib.vibrate(50);

    startActivity(new Intent(statuspage.this, AgentPortalActivity.class));
    statuspage.this.finish();

    /** Fading Transition Effect */
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);

    return;

}
 } 
```

这是我的日志：

```
 04-18 08:36:42.812: I/Maps.MyLocationOverlay(18136): Request updates from gps
 04-18 08:36:42.812: I/Maps.MyLocationOverlay(18136): Request updates from network
 04-18 08:36:42.859: I/MapActivity(18136): Handling network change notification:CONNECTED
 04-18 08:36:42.859: E/MapActivity(18136): Couldn't get connection factory client
 04-18 08:36:42.910: D/AsyncTask(18136): GeoCoder-doInBackGround
 04-18 08:36:42.972: W/dalvikvm(18136): threadid=25: thread exiting with uncaught exception (group=0x40015578)
 04-18 08:36:42.995: E/AndroidRuntime(18136): FATAL EXCEPTION: AsyncTask #15
 04-18 08:36:42.995: E/AndroidRuntime(18136): java.lang.RuntimeException: An error occured while executing doInBackground()
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at android.os.AsyncTask$3.done(AsyncTask.java:200)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.lang.Thread.run(Thread.java:1019)
 04-18 08:36:42.995: E/AndroidRuntime(18136): Caused by: java.lang.NullPointerException
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at com.jetdelivery.mobile.statuspage$GeoCoder.doInBackground(statuspage.java:115)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at com.jetdelivery.mobile.statuspage$GeoCoder.doInBackground(statuspage.java:1)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
 04-18 08:36:42.995: E/AndroidRuntime(18136):   ... 4 more 
```

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:42:39.923

从页面[Geocoder.getFromLocation](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int,%20double,%20double,%20double,%20double%29)

> 返回地址对象的列表。如果未找到匹配项或没有可用的后端服务，则返回**null或空列表。**

所以你需要在之前检查null：

```
if (addresses.size() > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T01:28:18.407

每次在 geocoder.getFromLocation(lat, lng, 1); 上我都会遇到 (IOException e) 崩溃；然而，我只是打开/关闭我的三星手机，它就可以工作了......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T03:38:17.837

试试这个代码

尝试 {

```
 List<Address> addresses = gc.getFromLocation(latitude,
            longitude, 1);
    sb = new StringBuilder();
        if (addresses!=null && addresses.size() > 0) {
            address = addresses.get(0);
            int noOfMaxAddressLine = address.getMaxAddressLineIndex();
            if(noOfMaxAddressLine > 0){
                for (int i = 0; i < address.getMaxAddressLineIndex(); i++){
                   sb.append(address.getAddressLine(i)).append("\n");
                }
                addressString = sb.toString();
            }
        }
    } catch (Exception e) {
        addressString = e.toString();
    } 
```

# c# - 如何使用 curl 将参数发布到 WCF 服务

> ID：10198616
> 
> 赞同：3
> 
> 时间：2012-04-17T20:27:30.793
> 
> 标签：c#, wcf, http, curl

如何使用命令行工具`curl`发布到具有多个参数的 WCF 服务？

我有如下服务

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]
    void PostMethod(string varString, bool varBool);
} 
```

我像这样设置服务器

```
var service = new WebServiceHost(typeof(MyService),
    new Uri("http://localhost:3000/MyService");
service.AddServiceEndpoint(typeof(IMyService), new WebHttpBinding(), "");
service.Open(); 
```

如何通过 curl 调用此方法？

```
curl -d varString=foo -d varBool=true http://localhost:3000/MyService/PostMethod 
```

错误在哪里？该方法的 BodyStyle 是否错误？我应该将参数包装在 [DataContract] 类中，如下所示？

```
[DataContract]
public class PostMethodResult
{
    [DataMember]
    public string varString { get; set; }

    [DataMember]
    public bool varBool { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:09:22.913

修改后的答案：

URI 模板不适用于使用 curl 将请求发布到 Web 服务。WebInvoke 期望 POST 正文是 XML 或 JSON。

WebMessageBodyStyle.Bare 不起作用，因为你有 2 个参数，所以你必须换行。

```
[OperationContract]
[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]
string PostMethod(string varString, bool varBool); 
```

柱体形状如下所示：

```
 <PostMethod  xmlns="http://tempuri.org/"><varString>1</varString><varBool>true</varBool> </PostMethod> 
```

使用 UriTemplate 您可以通过 URI 传递值，因此它是一个 POST 但正文为空。

您可以使用的最接近 curl 的选项是 JSON

```
[OperationContract]
[WebInvoke(BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json)]
string PostMethodJson(string varString, bool varBool); 
```

它不漂亮，但你可以使用它：

```
curl -d"{\"varString\":\"so99\",\"varBool\":\"true\"}"  -i -X POST -H "Content-Type:application/json"  http://localhost:3000/MyService/PostMethodJson 
```

# php - 替换 PHP 中的字符但不超过一次

> ID：10198619
> 
> 赞同：2
> 
> 时间：2012-04-17T20:27:41.420
> 
> 标签：php

*用最多*一个其他字符替换某些字符的最佳性能脚本是什么？

例如，我需要将所有空格 ( `) 和逗号 ( `,`) 替换为加号 ( `+`) **，但一次不超过一个加号**`

 `所以：`the,quick, brown fox jumped, over the,, lazy, dog`

会成为：`the+quick+brown+fox+jumped+over+the+lazy+dog`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T20:30:19.017

我会为此使用正则表达式：

```
$text = 'the,quick, brown fox jumped, over the,, lazy, dog';
$newText = preg_replace('/[ ,+]+/', '+', $text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:32:03.227

```
<?php
echo preg_replace('/[, ]+/', '+', 'the,quick, brown fox jumped, over the,, lazy, dog') . PHP_EOL; 
````

# android - Save Image from drawable to sdcard in camera activity

> ID：10198620
> 
> 赞同：0
> 
> 时间：2012-04-17T20:27:46.643
> 
> 标签：android, image, camera, save, drawable

I'm working on a project, that read image file from drawable folder through ImageView, it loaded successfully through

```
ImageView view = (ImageView) findViewById(R.id.imageView);
view.setOnTouchListener(this);
buttonTakePicture = (Button) findViewById(R.id.takepicture);
buttonTakePicture.setOnClickListener(new Button.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        camera.takePicture(myShutterCallback, myPictureCallback_RAW,
            myPictureCallback_JPG); 
```

now after pressing takePicture button , image should save in sdcard, it is taking snapshot but not saving the image with that, the code is below

```
File file = new File(mScreenshotPath + "/" + System.currentTimeMillis() + ".jpg");
FileOutputStream fos;
try {
    imageFileOS = getContentResolver().openOutputStream(uriTarget);
    imageFileOS.write(arg0);
    imageFileOS.flush();
    imageFileOS.close();
    fos = new FileOutputStream(file);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos);
    fos.close();
    Toast.makeText(AndroidCamera.this,
            "Image saved: " + uriTarget.toString(),
            Toast.LENGTH_LONG).show(); 
```

Please help me for this issue....Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T01:25:59.663

You can save photos in Android without the need for an OutputStream and all the other logic that accompanies it. Here is a simple recipe which will do what I think you are trying to accomplish. Pay special attention to the Intent and how it is used to set up the saving of the image, as this is I think where you are going wrong.

```
public class PhotoActivity extends Activity implements OnClickListener {

private Button takePicture;
private String path;
private File imageFile;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);
    takePicture = (Button) findViewById(R.id.button1);
    takePicture.setOnClickListener(this);

    path = Environment.getExternalStorageDirectory() + "/my_image.png";
    imageFile = new File(path);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        Intent i = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
        Uri uri = Uri.fromFile(imageFile);
        i.putExtra(MediaStore.EXTRA_OUTPUT, uri);

        startActivity(i);
        break;
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:12:53.657

```
 private static final int CAMERA_REQUEST = 1888;  
    buttonTakePicture.setOnClickListener(new Button.OnClickListener() {
                @Override
                public void onClick(View arg0) {
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri());

    startActivityForResult(intent, CAMERA_REQUEST);

                    }

            });

    @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);

            if (requestCode == CAMERA_REQUEST) {

                    photo = (Bitmap) data.getExtras().get("data");

                }
    }

    private Uri getImageUri() {

            File file1 = new File(Environment.getExternalStorageDirectory() + "/Camerafolder");
            if (!file1.exists())
            {
                file1.mkdirs();
            }

            File file = new File(Environment.getExternalStorageDirectory() + "/Camerafolder/"+"img"+".png");

    Uri imgUri = Uri.fromFile(file);

            return imgUri;
        } 
```

# iphone - iPhone：在 UIScrollview 中处理 400 个 UILabel 的最佳方式

> ID：10198623
> 
> 赞同：2
> 
> 时间：2012-04-17T20:27:54.397
> 
> 标签：iphone, graphics, uiscrollview, uilabel, lag

我一直在研究填字游戏应用程序一段时间。实际游戏在 UIScrollview 中运行，因为玩家应该能够滚动、缩放和平移。

在 UIScrollview 中，我添加了一个处理触摸事件并计算玩家触摸位置的 UITapGestureRecognizer。到目前为止，一切都很好。

之后，我在 UIScrollview 中添加了大约 400 个 UILabel。在玩家按下键盘上的按钮之前，它们中的每一个都是“空的”。我的问题是，当我添加这些标签时，整个 UIScrollview 在滚动等方面变得非常缓慢和滞后。

当用户猜测正确的单词时，绿色瓷砖将变得可见。瓦片作为 UIImageViews 加载。这再次降低了性能。

我看过 DTGridView，但我没有运气。

你能帮助我并尝试引导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:36:06.887

我认为您应该自己实现 UIScrollview 方法 drawRect 而不是在其中添加 400 UILabel

你可以设置一个包含 400 个对象的 NSArray，称为“标签”；

当用户按下按钮时，您应该计算“标签”的位置和测试并决定哪个“标签”应该在当前偏移量的滚动视图中显示。

在一个 UIScrollview 中添加 400 个 UILabel 可能会导致内存问题；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:29:40.680

您需要在滚动视图中使用回收标签。这将提高性能。要了解如何在 UIScrollView 中重用/回收子视图，请查看 UIScrollView 上的 Apple WWDC 视频。[WWDC 2010 示例代码](http://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?code=y&source=x&bundleID=20645)。还要检查 UIScrollView[类参考 UIScrollView 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)

您可以从此链接获得帮助[Creating Circular and Infinite UIScrollViews](http://iphonedevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T01:18:59.827

在过去的一段时间/几天里，我一直在玩这个。使用各种相关的答案。但最终我使用了工具和一些评论来看看什么是慢的。

我记得有人说layoutSubviews 在你添加Subviews 时会减慢速度，所以我把我的“本地”代码去掉了。但没有任何进展。

因此，当在我的 addSubview 例程中使用断点时，我注意到 iOS 系统实际上在 viewDidLoad 期间处于超级视图的布局调用 (navigationCtrlr) 中。

在添加子视图和 bam 之前，我引入了 0.1 秒的延迟！我推荐 dispatch_async 以防止由于竞争条件而崩溃，但这是另一个主题。

简而言之，即使您认为自己不存在，它也可能在 LayoutSubviews 中。

# reporting-services - SSRS 中的动态列

> ID：10198633
> 
> 赞同：0
> 
> 时间：2012-04-17T20:28:41.457
> 
> 标签：reporting-services

我必须设计一个报告，其中列数根据行标题而变化。

每当关联的列没有值时，应针对特定标题显示。仅应显示包含值的字段。报告还包括静态行和列名称。

我的问题是我是SSRS新手，无法实现矩阵报告，请详细说明。

普拉尚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T22:53:13.540

您可以利用列可见属性。

根据您的需要隐藏/显示它。

# backbone.js - 骨干：使用“model.models”

> ID：10198635
> 
> 赞同：1
> 
> 时间：2012-04-17T20:28:45.443
> 
> 标签：backbone.js

我正在阅读关于构建酒窖应用程序的 Backbone 教程[http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/ 。](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)教程的作者没有解释清楚一点，我无法从文档中弄清楚。即，`this.model.models`您在下面的渲染函数视图中看到的

```
window.WineListView = Backbone.View.extend({

    tagName:'ul',

    initialize:function () {
        this.model.bind("reset", this.render, this);
    },

    render:function (eventName) {
        _.each(this.model.models, function (wine) {
            $(this.el).append(new WineListItemView({model:wine}).render().el);
        }, this);
        return this;
    }

}); 
```

这个视图的模型实际上是一个集合

```
list:function () {
        this.wineList = new WineCollection();
        this.wineListView = new WineListView({model:this.wineList}); 
```

该系列将Wine作为其模型

```
window.WineCollection = Backbone.Collection.extend({
    model:Wine,
    url:"../api/wines"
}); 
```

所以，当 WineListView 被实例化时，它`this.model`实际上就是 Wine List Collection。并且，从文档中，`models`可以访问集合中的模型数组

```
modelscollection.models 
Raw access to the JavaScript array of models inside of the collection. Usually you'll want to use get, at, or the Underscore methods to access model objects, but occasionally a direct reference to the array is desired. 
```

那么如果`this.model`已经是 wine 的集合（由于集合在视图中被声明为模型），为什么有必要这样做`this.model.models`？基本上再次获得收藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:39:00.987

看起来这本质上是一种风格选择。编码

```
_.each(this.model.models, function (wine) {
    $(this.el).append(...);
}, this); 
```

简单地遍历集合中的模型，并且应该等效于：

```
this.model.each(function (wine) {
    $(this.el).append(...);
}, this); 
```

我原以为第二个版本更容易阅读，但每个版本都是他/她自己的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:03:11.773

就我而言，要使其正常工作，我必须执行以下操作：

```
 _.each(this.model.models, function (foto) {
        console.log(foto.attributes);
        $(this.el).append(new App.view.foto.foto({model:foto.attributes}).render().el);
    }, this); 
```

不知道为什么访问 .attributes 会起作用，我是否错过了任何转换？

我从数据库引导以下 JSON 字符串：

```
[{
    "fid": 1,
    "imagen": "sample_colors.jpg",
    "width": "110",
    "height": "110",
    "dimension_id": 1,
    "seccion_id": 1,
    "estado": 0,
    "fecha": {
        "date": "2012-06-27 23:02:27",
        "timezone_type": 2,
        "timezone": "PDT"
    }
}, {
    "fid": 2,
    "imagen": "sample_colors.jpg",
    "width": "110",
    "height": "110",
    "dimension_id": 1,
    "seccion_id": 1,
    "estado": 1,
    "fecha": {
        "date": "2012-06-27 12:03:02",
        "timezone_type": 2,
        "timezone": "PDT"
    }
}, {
    "fid": 3,
    "imagen": "sample_colors.jpg",
    "width": "110",
    "height": "110",
    "dimension_id": 1,
    "seccion_id": 1,
    "estado": 2,
    "fecha": {
        "date": "2012-06-27 12:03:20",
        "timezone_type": 2,
        "timezone": "PDT"
    }
}] 
```

# c# - Winforms 中的 Explorer.exe 以浏览到网络文件夹

> ID：10198636
> 
> 赞同：1
> 
> 时间：2012-04-17T20:28:48.017
> 
> 标签：c#, windows, winforms, explorer

我有一个正在使用的 C# winforms 应用程序。我有一个“浏览输出文件夹”按钮，可将用户带到我们本地系统的网络驱动器上的特定路径。

但是，我从 Explorer.exe 中得到了这些奇怪的异常，它没有特殊原因而崩溃，也没有真正的错误消息。当文件夹正确打开并放置一段时间时会发生这种情况，它会打开一条消息，说它“已停止工作”并要求我关闭它。这个问题非常可重复。

我对这个问题的最佳猜测是这是一个与网络相关的问题。众所周知，网络偶尔会出现故障（相当频繁地短暂上升/下降）。这会导致问题吗？

![资源管理器崩溃](../Images/20be482e2be90f76af5272d3bbd8eadf.png)

我使用的代码是（我通常会检查文件夹路径是否有效）：

```
string Path = "\\\\serverPath\\data\\My Folder\\";
System.Diagnostics.Process.Start("Explorer.exe", Path); 
```

**基本问题摘要**：我是否不正确地调用 Explorer.exe/是否有更好/更安全的方法来避免此问题？

编辑：或正如我所料，只是我将不得不处理的一个Windows错误...... =（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:53:42.040

如果您想要另一种打开文件夹的方法，请尝试使用[`SHOpenFolderAndSelectItems`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762232.aspx). 要打开一个文件夹，我认为您可以使用与父级相同的 PCITEMIDLIST 和选择：

```
SHOpenFolderAndSelectItems(folder, 1, &folder, 0); 
```

# regex - 正则表达式捕获标签之间的任何内容，匹配转义标签之间的任何内容

> ID：10198640
> 
> 赞同：1
> 
> 时间：2012-04-17T20:28:54.740
> 
> 标签：regex, sed

我有一个包含转义字符和非转义字符重复的文件：

```
<p>&lt;p&gt; 
```

我想找到这些的所有实例并将它们更改为非转义 html 字符的单个实例。我以为我会搜索左括号，然后是中间的任何内容，然后是右括号，中间任何内容的模式匹配，然后尝试找到转义的左括号（<）然后是模式，然后是右父（> ） 标签：

```
grep -R '<[^>]\(*\)>&lt;\1&gt;' *.properties|more 
```

但是，这不会返回任何数据，用括号内的星号捕获所有内容是否正确，然后尝试使用 \1 将所有内容带入目标模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:42:29.103

我没有匹配星号复制的东西，所以这行得通：

```
grep -R '<([^>]*)>&lt;\1&gt;' *.properties | more 
```

# sql - Perforce SQL 返回文件名，开头没有附加路径

> ID：10198645
> 
> 赞同：1
> 
> 时间：2012-04-17T20:29:18.297
> 
> 标签：sql, string, perforce

我正在使用 perforce。stackoverflow 社区的一些乐于助人的成员帮助我找到了 p4reports 程序，该程序设置了一个 ODBC 数据源来访问我们的 perforce 数据。我创建了一个查询，它准确地返回了我需要的信息......*几乎*。

这是查询：

```
SELECT a.file, a.time, a.action, a.revision, a.change, b.description
FROM files a, changes b
WHERE a.change = b.change AND ((b.p4options='longdesc')); 
```

问题是 a.file 列返回带有整个路径的文件名，如下所示：

```
//depot/folder_1/folder_2/.../file_name.txt 
```

我希望此列仅包含文件名，如下所示：

```
file_name.txt 
```

有谁知道可以做到这一点的 SQL 查询？现在不管文件在文件夹结构中的嵌套有多深？

这是 perforce SQL 报告函数的链接。一些基本的字符串函数，但我很难将如何始终使用这些函数返回正确的文本放在一起。

[http://www.perforce.com/perforce/doc.current/manuals/p4report/ab_functions.html#1045728](http://www.perforce.com/perforce/doc.current/manuals/p4report/ab_functions.html#1045728)

在 MySQL 中，我会做这样的事情：

```
SELECT right(a.file,locate("/",reverse(a.file))-1), a.time, a.action, a.revision, a.change, b.description
FROM files a, changes b
WHERE a.change = b.change AND ((b.p4options='longdesc')); 
```

它会起作用，但`reverse`据我所知，perforce SQL 中没有任何功能。任何帮助将不胜感激！

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:42:52.637

您可能想看看 P4toDB，它将 Perforce 数据复制到常规数据库中。这样您就可以运行更高级的 SQL 查询，甚至可以使用报表引擎。

[http://kb.perforce.com/article/1172/p4todb-readme](http://kb.perforce.com/article/1172/p4todb-readme)

# android - Google Play 下载器库错误

> ID：10198653
> 
> 赞同：0
> 
> 时间：2012-04-17T20:30:15.113
> 
> 标签：android, android-library, expansion-files

当我从现有源（Google play 下载器库）创建一个新项目以与 APK 扩展文件一起使用时，该项目添加了许多错误：

*   下载器客户端Marshaller.java
*   下载服务Marshaller.java
*   下载ProgressInfo.java
*   下载服务.java
*   下载Notification.java
*   V11CustomNotification.java
*   V3CustomNotification.java

库 targetSdkVersion 为 15

将库添加到我的项目会产生以下错误：

```
[2012-04-17 23:03:54 - Atlas] D:\Programming\android sdk\android-sdk-windows\extras\google\play_apk_expansion\downloader_library\res\values-v9\styles.xml:3:     error: Error retrieving parent for item: No resource found that matches the given name     'android:TextAppearance.StatusBar.EventContent'.

[2012-04-17 23:03:54 - Atlas] D:\Programming\android sdk\android-sdk-windows\extras\google\play_apk_expansion\downloader_library\res\values-v9\styles.xml:4:     error: Error retrieving parent for item: No resource found that matches the given name     'android:TextAppearance.StatusBar.EventContent.Title'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:50:13.497

尝试删除值-v9。它帮助了我。

# php - 适合初学者的 ssl

> ID：10198655
> 
> 赞同：1
> 
> 时间：2012-04-17T20:30:16.683
> 
> 标签：php, security, cakephp, ssl

我用 cakephp 开发了一个网站，现在我想在其中实现 ssl，但我对 ssl 的了解为零。

是 ssl 证书，httpd.conf 中的一些更改是安全连接所需的全部内容，这是否意味着我的会话和表单数据是安全的？还是我应该添加其他代码？

我在 ssl 上搜索了一些网站，并通过创建自签名证书在我的 localhost 上实现了它，在 httpd.conf 文件中进行了一些更改，在我的浏览器中添加了一个异常并且一切正常。

是这样还是只是开始？

php 还提供了一些 openssl 函数。我需要实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:34:09.480

不，您不需要使用任何 PHP 的 SSL 函数，或者根本不需要更改您的代码。*除非*您的代码中有包含“http://”的 URL，否则它将失败（如果您需要 SSL）或不安全（如果您保留非 SSL HTTP 可用）。HTTP 服务器为客户端提供了一个安全通道，因此您的 HTTP 流量——所有页面内容、表单数据等——都受到自动保护。

# iphone - 风景... iPhone ...加速度计问题

> ID：10198656
> 
> 赞同：0
> 
> 时间：2012-04-17T20:30:17.983
> 
> 标签：iphone, objective-c

有这一切....

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation {

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortrait && interfaceOrientation       != UIInterfaceOrientationLandscapeLeft && interfaceOrientation !=      UIInterfaceOrientationPortraitUpsideDown);
  } else {
    return YES;
}
} 
```

我希望加速度计在横向工作，就好像它在纵向一样......我拥有所有加速度计的东西，例如：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration*)acceleration {
   accx = acceleration.x; 
```

}

我也尝试过查看其他问题，但我找不到解决方案...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:01:39.467

好的，如果理解正确，你是纵向的（在 X 轴方向上看图像），向右倾斜和向左倾斜，那么你的应用程序中的图像应该左右移动。然后你切换到横向，你的图像现在应该左右移动，但它没有，你现在应该注意的轴是 Y 轴。

当您旋转到横向时，没有理由不看到 Y 轴有任何变化，除非存在硬件损坏并且加速度计已停止工作。

![iPhone 加速度计](../Images/bf17626ce25321204922b891ff38958f.png)

现在，您要求的是一种重置加速度计的方法，以便即使 Y 轴发生变化，您也可以继续从 X 读取？不，没有办法做到这一点，除非你写一个额外的方法......类似于：

```
+(UIAccelerationValue)fixedAccelerationValue{
    //Check which axis you should look for
    if ( [[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortrait || [[UIDevice currentDevice] orientation] == UIInterfaceOrientationUpsideDown ){
        //read from the x axis
    }
    else{
        //read from the y axis
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:54:51.833

我遇到了同样的问题，并通过在实现文件`BOOL`之前添加语句来修复它。`UIACCELEROMETER`

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{

    if (interfaceOrientation == UIInterfaceOrientationPortrait ||
        interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
        interfaceOrientation == UIInterfaceOrientationLandscapeRight)
        return YES;
    else
        return NO;
} 
```

希望这可以帮助。

# objective-c - 无法从其他类访问@Property

> ID：10198662
> 
> 赞同：0
> 
> 时间：2012-04-17T20:30:36.533
> 
> 标签：objective-c, xcode, cocoa

我无法访问程序中的某些变量。

我有一个名为 MainMenu 的课程。

在 .h 文件中，我声明了 2 个属性，如下所示：

```
MainMenu.h:
@property (nonatomic, retain) IBOutlet NSView *mainView;
@property (nonatomic, retain) IBOutlet NSWindow *theMainWindow; 
```

在另一个类文件中，我希望能够访问这两个变量，目前我在另一个不起作用的 .h 类文件中使用以下代码，我不明白我做错了什么：

```
AppDelegate.m:
MainMenu *theMainMenu = [[MainMenu alloc] init];
[theMainMenu switchViews:theMainMenu.theMainWindow:theMainMenu.mainView]; 
```

在这里，我创建了 MainMenu 类的一个对象，并在其定义中调用了一个名为“switchViews”的方法，然后我想将我无法访问的 2 个变量传递给它。

非常感谢任何帮助。提前谢谢大家。

编辑：'switchViews' 方法如下所示：

```
- (void)switchViews:(NSWindow*)mainWindow:(NSView*)newView {
    NSView *dummyView;
    [mainWindow setContentView:dummyView];
    [mainWindow setContentSize:newView.frame.size];
    [mainWindow setContentView:newView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:47:13.370

我认为问题是 MainMenu 类的 2 个不同实例之一。如果您连接了 IBOutlets，您必须在 IB 中将一个蓝色立方体设置为您的 MainMenu 类，对吗？但是，当您在应用程序委托中分配 init one 时，会创建另一个 MainMenu 实例，该实例没有将这些属性连接到任何东西。相反，您还应该在 IB 中将一个蓝色立方体设置为您的应用程序委托，并在该类中有一个 IBOutlet，您可以将其连接到 IB 中的 MainMenu 蓝色立方体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:41:48.040

这可能很愚蠢，但你记得在 Interface Builder 中链接你的 NSWindow 和 NSView 吗？或者您是否至少手动实例化它们？

我最好的猜测是（假设某处有一个 MainMenu.xib），当你调用它时`init`，它的对象被初始化但不一定被加载。您应该尝试在您的控制器`viewDidLoad`或`viewWillAppear`方法中调用您的 switchViews 方法，以确保它已全部加载。

# c# - 查询字符串中的 & 符号弄乱了正文中链接的简单邮件

> ID：10198663
> 
> 赞同：2
> 
> 时间：2012-04-17T20:30:42.633
> 
> 标签：c#, email, mailto

我正在尝试在我的 C# ASP.Net Web 应用程序中做一个简单的 mailto。

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
System.Diagnostics.Process.Start("mailto:?subject=View Rig Map&body=" + url); 
```

但是，如果 url 有一个带有与号 (&) 分隔名称-值对的查询字符串，例如“http://localhost:51771/MuseumViewer.aspx?MuseumIDs=3301&CountryIDs=1”，那么它会在正文中截断链接位于“http://localhost:51771/MuseumViewer.aspx?MuseumIDs=3301”的电子邮件。

我真的不想做任何花哨的事情，因为我需要做的就是在电子邮件正文中添加链接。谁能帮我这个？如果我将mailto放在客户端会起作用吗？

**更新解决方案** 我很难决定选择谁作为答案，但这是我使用的解决方案：

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
string link = Server.UrlEncode(url);
System.Diagnostics.Process.Start("mailto:?subject=View Rig Map&body=" + link); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:33:44.553

%26 是 & 符号的 URL 转义码。尝试在 url 上运行 UrlEncode()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:38:08.570

将对 System.Web 的引用添加到您的项目中。

在您的应用程序中使用以下行

```
string url = "http://localhost:51771/MuseumViewer.aspx?MuseumIDs=3301&CountryIDs=1";
System.Diagnostics.Process.Start("mailto:?subject=View Rig Map&body=" + System.Web.HttpUtility.UrlEncodeUnicode(url)); 
```

# sql - 加入多个表，包括一个表两次，并通过计数一个组进行排序

> ID：10198668
> 
> 赞同：0
> 
> 时间：2012-04-17T20:31:00.810
> 
> 标签：sql, oracle, count, group-by

我是一个业余爱好者，正试图完成他作业的最后一个问题（此时已过期，只是为了寻求理解）我在两天内坐下来尝试了近 5 个小时，但没有成功。

我已经尝试过查看所有不同类型的连接，（永远）无法进行分组工作，并且在排序方面也没有运气。我可以一次做所有这些事情，但这里的困难是让所有这些事情协同工作。

这是问题：

> 编写一个 SQL 查询以检索包含（源城市、源代码、目的地城市、目的地代码和航班数量）的列表，其中包含至少 2 个航班的所有源-目的地对。按 number_of_flights 排序。请注意，“flights”表中的“dest”和“source”属性都引用了“airports”表中的“airportid”。

这是我必须使用的表（还附带了大约 3000 行虚拟条目）

```
create table airports (
    airportid char(3)       primary key, 
    city varchar(20)
);
create table airlines (
    airlineid char(2)       primary key, 
    name varchar(20), 
    hub char(3)             references airports(airportid)
); 
create table customers (
    customerid char(10)     primary key, 
    name varchar(25), 
    birthdate date, 
    frequentflieron char(2) references airlines(airlineid)
);
create table flights (
    flightid char(6)        primary key, 
    source char(3)          references airports(airportid), 
    dest char(3)            references airports(airportid), 
    airlineid char(2)       references airlines(airlineid), 
    local_departing_time date, 
    local_arrival_time date
);
create table flown (
    flightid char(6)        references flights(flightid), 
    customerid char(10)     references customers, 
    flightdate date
); 
```

我遇到的第一个问题是在同一个查询中输出 airports.city 两次，但结果不同。不仅如此，无论我在分组时尝试了什么，我总是会得到相同的结果：

> 不是 GROUP BY 表达式

通常我很乐意尝试将这些拼凑在一起，但这令人沮丧。帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:39:40.190

```
select source.airportid as source_airportid,
       source.city source_city,
       dest.airportid as dest_airportid,
       dest.city as dest_city,
       count(*) as flights
from   flights
inner join airports source on source.airportid = flights.source
inner join airports dest on dest.airportid = flights.dest
group by
       source.airportid,
       source.city,
       dest.airportid,
       dest.city
having count(*) >= 2
order by 5; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T20:42:31.903

您是否尝试过子查询？

```
SELECT  source_airports.city, 
        source_airports.airportid,
        dest_airports.city,
        dest_airports.airportid,
        x.number_of_flights
FROM 
    (
        SELECT  source, dest, COUNT(*) as number_of_flights
        FROM    flights 
        GROUP BY source, dest
        HAVING COUNT(*) > 1
    ) as x
    INNER JOIN airports as dest_airports
    ON dest_airports.airportid = x.dest
    INNER JOIN airports as source_airports
    ON source_airports.airportid = x.source
ORDER BY x.number_of_flights ASC 
```

# c - C中数字的隐式类型

> ID：10198671
> 
> 赞同：0
> 
> 时间：2012-04-17T20:31:09.257
> 
> 标签：c, types, casting, implicit-conversion, coercion

C中数字的隐式类型是什么？例如，如果我在计算中有一个小数，那么小数是否总是被视为双精度数？如果我有一个非十进制数，它总是被视为一个 int 吗？如果我的非十进制数大于 int 值怎么办？

我很好奇，因为这会影响类型转换和提升。例如，如果我有以下计算：

```
float a = 1.0 / 25; 
```

被`1.0`视为双精度并被`25`视为整数？然后提升为`25`双精度，以双精度执行计算然后将结果转换为浮点数？

关于什么：

```
double b = 1 + 2147483649;   // note that the number is larger than an int value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:42:38.410

如果数字既没有小数点也没有指数，它是某种整数；默认情况下，一个`int`.

如果数字有小数点或指数，它是某种浮点数；默认情况下，一个`double`.

就是这样。您可以将后缀附加到数字（例如`ULL`for `unsigned long long`）以更精确地指定类型。否则（稍微简化一下），整数是保存该值的最小`int`类型（类型`int`或更长）。

在您的示例中，代码为：

```
float a = 1.0 / 25;
double b = 1 + 2147483649; 
```

的值`a`是通过注意它`1.0`是一个双精度并且`25`是一个整数来计算的。处理除法时，将`int`转换为 a `double`，执行计算（生成 a `double`），然后将结果强制转换为 a`float`以分配给`a`。所有这些都可以由编译器完成，因此结果将被预先计算。

类似地，在 32 位的系统上`int`，值`214783649`太大而不能成为`int`，因此它将被视为大于`int`（或`long`或`long long`）的有符号类型；添加了`1`（产生相同的类型），然后将该值转换为 a `double`。同样，这一切都是在编译时完成的。

这些计算受与 C 中其他计算相同的规则控制。

* * *

整数常量的类型规则在 ISO/IEC 9899:1999 的 §6.4.4.1 整数常量中有详细说明。有一个表格详细说明了取决于后缀（如果有）和常量类型（十进制与八进制或十六进制）的类型。对于十进制常量，值始终是有符号整数；对于八进制或十六进制常量，类型可以根据需要是有符号或无符号的，只要值合适。感谢[Daniel Fischer](https://stackoverflow.com/users/1011995/daniel-fischer)指出我的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:40:15.040

[http://en.wikipedia.org/wiki/Type_conversion](http://en.wikipedia.org/wiki/Type_conversion)

该标准对您可以预期的内容有一个通用指南，但编译器有一个包含标准以及优化规则的规则超集。上面的链接讨论了您可以期待的一些一般性。如果您担心隐式强制转换，通常使用显式强制转换是一种很好的做法。

请记住，原始类型的大小无法保证。

```
1.0 / 25 
```

计算为双精度数，因为其中一个操作数是双精度数。如果您将其更改为`1/25`，评估将作为两个整数执行并评估为`0`.

```
double b = 1 + 2147483649; 
```

右侧被评估为整数，然后在赋值期间强制为双精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:40:52.237

实际上。在您的示例中，您可能会收到编译器警告。您可以编写 1.0f 以使其成为浮点数，或者在分配之前显式转换结果。

# r - R data.frame 转换？

> ID：10198672
> 
> 赞同：1
> 
> 时间：2012-04-17T20:31:14.287
> 
> 标签：r, dataframe, reshape

我有一个看起来像这样的 R 数据框：

```
Country       Property   Value

Canada        Capital    Ottawa
Canada        Population 38
Canada        Language1  French
Canada        Language2  English
United States Capital    Washington 
United States Population 280
United States Language1  English
United States Language2  NA 
```

我想重新安排它，使它看起来像这样：

```
Country         Capital     Population Language1 Language2

Canada          Ottawa      38         French    English
United States   Washington  280        English   NA 
```

有没有办法进行这种转变？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:49:24.980

根据 Paul Hiemstra 的评论：

`reshape2`包裹`dcast`会很好地做到这一点：

```
dcast(data=yourdataframe, Country~Property, value.var='Value') 
```

如果您在那里有重复的值，尽管它会尝试将它们聚合`length`为默认值，这不是您想要的！

# java - 我的 getPrime() 方法无法正常工作。关于如何解决它的任何建议？

> ID：10198673
> 
> 赞同：0
> 
> 时间：2012-04-17T20:31:15.623
> 
> 标签：java, primes

我正在尝试编写一个程序来计算用户给定范围内的所有素数。但是在我的方法中，get primes 无法正常工作，因为我不断将所有数字从 2 获取到给定范围。关于如何解决这个问题的任何建议？

```
import java.util.Iterator;
import java.util.Set;
import java.util.TreeSet;

public class Sieve
{
    private int number;

    public Sieve (int maxPrime)
    {
        number = maxPrime;
    }

    public Set<Integer> getPrimes()
    {
        Set<Integer> setNumbers = new TreeSet<Integer>();

        for(int i=2; i<=number; i++)
        {
            setNumbers.add(i);
        }

        Iterator<Integer> iter = setNumbers.iterator();

        boolean isTrue=false;

        while (iter.hasNext())  //WHILE number is more than one  
        {  
            int number1= iter.next();
            for (int i =2; i<= Math.sqrt(number); i++)
            if (number1 % i == 0)
            {  
                isTrue = true;
                break;
            }   

         } // end while     
         if(isTrue)
         {
             iter.remove();
         }
       return setNumbers;
     }
} 
```

顺便说一句，我在这里做了一个测试器，这样你就可以测试程序是否有效：

```
import java.util.Set;

public class PrimeTest
{

   public static void main(String[] args)
   {
      Sieve sifter = new Sieve(100);
      Set<Integer> primes = sifter.getPrimes();
      System.out.println(primes);
      System.out.println("Expected: [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 43, 41, 47, 53, 59, 61, 71, 67, 79, 73, 83, 89, 97]");

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:37:10.303

虽然不是特别有效的算法，而不是像你似乎正在做的那样设计自己的算法，但我建议尝试实现这个算法：[http ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

您可以在网上找到几个示例版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:35:27.663

```
 if(isTrue)
     {
         iter.remove();
     }
     isTrue = false;
}//End while 
```

将进入while循环内部和for外部

# c++ - 编译器特定的内存初始化

> ID：10198675
> 
> 赞同：7
> 
> 时间：2012-04-17T20:31:18.077
> 
> 标签：c++, visual-studio, visual-studio-2010, memory, gcc

有没有办法确保整个程序的某些对象的静态对象初始化顺序。我有内存分配器，我希望将其作为程序中的第一件事分配，因为它们将在整个程序的其他地方使用，我想使用这些分配器来分配所有以后的内存。

我知道这可能是特定于编译器的，因为我不相信 C++ 标准允许这样做。我感兴趣的两个编译器是 gcc 和 VS2010 的编译器。如果有办法，有人可以解释一下吗？

**编辑**

我不想“在第一次使用时构造”，因为分配器将分配一大块我想在程序开始时初始化的内存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T21:27:58.090

通过使用编译器特定的指令，您可以在一定程度上影响初始化的顺序。MSVC 有一个编译指示

```
#pragma init_seg({ compiler | lib | user | "section-name" [, func-name]} ) 
```

这可以在某种程度上设置特定模块的优先级。请参阅此参考以获取[init_seg](http://msdn.microsoft.com/en-us/library/7977wcck.aspx)。

gcc 编译器具有类似/相关的属性语法，用于设置特定初始化的*相对优先级。*看起来像这样

```
Some_Class  A  __attribute__ ((init_priority (2000)));
Some_Class  B  __attribute__ ((init_priority (543))); 
```

并在此页面上的[init_priority](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Attributes.html)上进行了解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:02:56.037

我猜你指的是静态初始化顺序惨败，当基于另一个静态变量的状态初始化静态变量时，你的程序有机会调用未定义的行为（可能有也可能没有它的构造函数当时打电话）。

此问题的解决方法是*第一次使用*习语的构造，在此处的 C++ FAQ 中进行了描述：

[http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.15](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.15)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:10:50.143

与其尝试控制静态初始化（这只会在未来给您带来数小时或更长时间的可笑调试时间），不如在`main`. 然后，您仍然可以获得预先分配的内存，而不会遇到静态初始化的所有缺陷。

# android - 在 Android Disgo 8100 平板电脑上调试

> ID：10198689
> 
> 赞同：0
> 
> 时间：2012-04-17T20:32:39.320
> 
> 标签：android

我有一个 Disgo 8100 平板电脑，我想在上面测试一个应用程序，但我在用它做任何事情时都遇到了问题。我是 Android 开发的新手，但我已经设置了 2 部手机，并已连接并使用 Eclipse。Disgo 正在运行 2.3.3，但在设置 -> 应用程序下没有 USB 调试选项，当我将设备连接到 USB 时，我得到的只是一个已安装的驱动器，并且 adb 中没有列出任何设备。设备管理器还显示磁盘而不是设备，因此我无法更新驱动程序。

我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:29:40.373

首先，您需要在设置中进行更深入的研究，可能是 App 中的 USB 调试选项。部分。例如，在我的 Galaxy S2 ICS 上，它位于开发部分。之后，您应该为您的设备安装驱动程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:55:37.650

如果设备有允许安装非市场应用程序的选项，那么您可以选择此选项。

完成后，在 eclipse 中为您的应用程序创建一个 apk，然后当设备作为驱动器安装时，只需将 apk 文件传输到设备的 tmp 文件夹中。

完成此操作后，您需要在设备上找到文件（使用 astro 等文件资源管理器）并运行它。这会将应用程序安装到设备上，尽管您将无法调试，但您将能够查看应用程序是否运行正常。

希望这可以帮助..

# asp-classic - 如何在经典 ASP 中使用 VBScript 生成 MD5？

> ID：10198690
> 
> 赞同：14
> 
> 时间：2012-04-17T20:32:42.003
> 
> 标签：asp-classic, vbscript, md5, md5sum

我需要在我的应用程序中生成一个 MD5。

我试过谷歌，但只能找到 MD5 的 PHP 代码。我需要连接到使用 MD5 哈希验证的客户端系统，但他们的代码是 PHP，我的是使用 VBScript 的经典 ASP。

我的服务器支持 .Net，所以我不能使用 PHP 脚本。Classic ASP 中的 VBScript 是否有这样的 MD5 代码？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-07-16T12:04:51.837

***2017-02-21 更新 - 现在为 JWT 添加了 HMACSHA256***

***2016-07-05 更新 - 现在添加了 SHA1 和 SHA256***

是的，对于所有一直在努力解决这个问题的人（比如我自己）并想知道，这是可能的！

以下代码分为几个函数，以便您可以 MD5/sha1/sha256 字符串或文件。

我从另一个 stackexchange 借用了 GetBytes 和 BytesToBase64 函数，而 stringToUTFBytes 中的代码是基于另一个 stackexchange 的。

```
function md5hashBytes(aBytes)
    Dim MD5
    set MD5 = CreateObject("System.Security.Cryptography.MD5CryptoServiceProvider")

    MD5.Initialize()
    'Note you MUST use computehash_2 to get the correct version of this method, and the bytes MUST be double wrapped in brackets to ensure they get passed in correctly.
    md5hashBytes = MD5.ComputeHash_2( (aBytes) )
end function

function sha1hashBytes(aBytes)
    Dim sha1
    set sha1 = CreateObject("System.Security.Cryptography.SHA1Managed")

    sha1.Initialize()
    'Note you MUST use computehash_2 to get the correct version of this method, and the bytes MUST be double wrapped in brackets to ensure they get passed in correctly.
    sha1hashBytes = sha1.ComputeHash_2( (aBytes) )
end function

function sha256hashBytes(aBytes)
    Dim sha256
    set sha256 = CreateObject("System.Security.Cryptography.SHA256Managed")

    sha256.Initialize()
    'Note you MUST use computehash_2 to get the correct version of this method, and the bytes MUST be double wrapped in brackets to ensure they get passed in correctly.
    sha256hashBytes = sha256.ComputeHash_2( (aBytes) )
end function

function sha256HMACBytes(aBytes, aKey)
    Dim sha256
    set sha256 = CreateObject("System.Security.Cryptography.HMACSHA256")

    sha256.Initialize()
    sha256.key=aKey
    'Note you MUST use computehash_2 to get the correct version of this method, and the bytes MUST be double wrapped in brackets to ensure they get passed in correctly.
    sha256HMACBytes = sha256.ComputeHash_2( (aBytes) )
end function

function stringToUTFBytes(aString)
    Dim UTF8
    Set UTF8 = CreateObject("System.Text.UTF8Encoding")
    stringToUTFBytes = UTF8.GetBytes_4(aString)
end function

function bytesToHex(aBytes)
    dim hexStr, x
    for x=1 to lenb(aBytes)
        hexStr= hex(ascb(midb( (aBytes),x,1)))
        if len(hexStr)=1 then hexStr="0" & hexStr
        bytesToHex=bytesToHex & hexStr
    next
end function

Function BytesToBase64(varBytes)
    With CreateObject("MSXML2.DomDocument").CreateElement("b64")
        .dataType = "bin.base64"
        .nodeTypedValue = varBytes
        BytesToBase64 = .Text
    End With
End Function

'Special version that produces the URLEncoded variant of Base64 used in JWTs.
Function BytesToBase64UrlEncode(varBytes)
    With CreateObject("MSXML2.DomDocument").CreateElement("b64")
        .dataType = "bin.base64"
        .nodeTypedValue = varBytes
        BytesToBase64UrlEncode = replace(replace(replace(replace(replace(.Text,chr(13),""),chr(10),""),"+", "-"),"/", "_"),"=", "")
    End With
End Function

Function GetBytes(sPath)
    With CreateObject("Adodb.Stream")
        .Type = 1 ' adTypeBinary
        .Open
        .LoadFromFile sPath
        .Position = 0
        GetBytes = .Read
        .Close
    End With
End Function 
```

这些可以按如下方式使用：

```
BytesToBase64(md5hashBytes(stringToUTFBytes("Hello World"))) 
```

产生：sQqNsWTgdUEFt6mb5y4/5Q==

```
bytesToHex(md5hashBytes(stringToUTFBytes("Hello World"))) 
```

生产：B10A8DB164E0754105B7A99BE72E3FE5

对于 SHA1：

```
bytesToHex(sha1hashBytes(stringToUTFBytes("Hello World"))) 
```

生产：0A4D55A8D778E5022FAB701977C5D840BBC486D0

对于 SHA256：

```
bytesToHex(sha256hashBytes(stringToUTFBytes("Hello World"))) 
```

生产：A591A6D40BF420404A011733CFB7B190D62C65BF0BCDA32B57B277D9AD9F146E

获取文件的 MD5（对 Amazon S3 MD5 检查很有用）：

```
BytesToBase64(md5hashBytes(GetBytes(sPath))) 
```

其中 sPath 是本地文件的路径。

最后，创建 JWT：

```
'define the JWT header, needs to be converted to UTF bytes:
aHead=stringToUTFBytes("{""alg"":""HS256"",""typ"":""JWT""}")

'define the JWT payload, again needs to be converted to UTF Bytes.
aPayload=stringToUTFBytes("{""sub"":""1234567890"",""name"":""John Doe"",""admin"":true}") 

'Your shared key.
theKey="mySuperSecret"

aSigSource=stringToUTFBytes(BytesToBase64UrlEncode(aHead) & "." & BytesToBase64UrlEncode(aPayload))

'The full JWT correctly Base 64 URL encoded.
aJWT=BytesToBase64UrlEncode(aHead) & "." & BytesToBase64UrlEncode(aPayload) & "." & BytesToBase64UrlEncode(sha256HMACBytes(aSigSource,stringToUTFBytes(theKey))) 
```

这将产生以下有效的 JWT：eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.7ofvtkn0z_pTl6WcqRTxw-4eSE3NqcEq9

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T14:52:36.217

这是一个可读和可下载的 MD5 版本作为 VBS 脚本：

[https://github.com/Wikinaut/md5.vbs](https://github.com/Wikinaut/md5.vbs)

这是来自[http://chayoung.tistory.com/entry/VBScript-MD5](http://chayoung.tistory.com/entry/VBScript-MD5)的代码（感谢您提供这段独特的代码）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-18T04:37:22.497

感谢上面提供的所有链接，它们很有用，但如果有人需要，我发现这个链接确实可以完成这项工作。 [VBScript-MD5](http://chayoung.tistory.com/entry/VBScript-MD5)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-17T20:45:02.437

我不知道这段代码是否有效，因为我无法测试它。但是，这似乎是您所要求的。

[http://www.bullzip.com/md5/vb/md5-vb-class.htm](http://www.bullzip.com/md5/vb/md5-vb-class.htm)

这是 Jeff Attwood 关于哈希的一篇有趣的文章。关于 MD5，他有一些重要的话要说：

[http://www.codinghorror.com/blog/2012/04/speed-hashing.html](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-15T17:31:17.023

首先，谢谢[SgtWilko](https://stackoverflow.com/users/2641196/sgtwilko)！:)

根据您收集的信息，我为所有人完成了一项功能（不适用于 base64/Files）。
您的代码对我非常有用，但我正在寻找一个更像 PHP（简单）的函数来处理纯文本和更明确的代码。

**编辑：**
基于问题[How to hash a UTF-8 string in Classic ASP](https://stackoverflow.com/questions/9034479/how-to-hash-a-utf-8-string-in-classic-asp)，我想出了 ADODB.Stream 解决方案。您现在可以使用非英文字符。

**编辑：**
参数**PlainText**已更改为**Target**。您现在可以使用**HMAC**版本。
只需将 Target 参数用作数组即可。

```
Target(0) = PlainText
Target(1) = SharedKey 
```

再次感谢[SgtWilko](https://stackoverflow.com/users/2641196/sgtwilko) ;)

[2017 年 2 月 23 日宣布第一次 SHA1 冲突](https://security.googleblog.com/2017/02/announcing-first-sha1-collision.html)（Google 安全博客）。

使用此函数，您可以将纯文本散列为：
**MD5、RIPEMD160、SHA1、SHA256、SHA384、SHA512、HMACMD5、HMACRIPEMD160、HMACSHA1、HMACSHA256、HMACSHA384 和 HMACSHA512**
如果您需要更多信息，可以在以下位置找到：[System.Security.Cryptography 命名空间](https://msdn.microsoft.com/en-us/library/system.security.cryptography(v=vs.110).aspx)

```
Function Hash(HashType, Target)
    On Error Resume Next

    Dim PlainText

    If IsArray(Target) = True Then PlainText = Target(0) Else PlainText = Target End If

    With CreateObject("ADODB.Stream")
        .Open
        .CharSet = "Windows-1252"
        .WriteText PlainText
        .Position = 0
        .CharSet = "UTF-8"
        PlainText = .ReadText
        .Close
    End With

    Set UTF8Encoding = CreateObject("System.Text.UTF8Encoding")
    Dim PlainTextToBytes, BytesToHashedBytes, HashedBytesToHex

    PlainTextToBytes = UTF8Encoding.GetBytes_4(PlainText)

    Select Case HashType
        Case "md5": Set Cryptography = CreateObject("System.Security.Cryptography.MD5CryptoServiceProvider") '< 64 (collisions found)
        Case "ripemd160": Set Cryptography = CreateObject("System.Security.Cryptography.RIPEMD160Managed")
        Case "sha1": Set Cryptography = CreateObject("System.Security.Cryptography.SHA1Managed") '< 80 (collision found)
        Case "sha256": Set Cryptography = CreateObject("System.Security.Cryptography.SHA256Managed")
        Case "sha384": Set Cryptography = CreateObject("System.Security.Cryptography.SHA384Managed")
        Case "sha512": Set Cryptography = CreateObject("System.Security.Cryptography.SHA512Managed")
        Case "md5HMAC": Set Cryptography = CreateObject("System.Security.Cryptography.HMACMD5")
        Case "ripemd160HMAC": Set Cryptography = CreateObject("System.Security.Cryptography.HMACRIPEMD160")
        Case "sha1HMAC": Set Cryptography = CreateObject("System.Security.Cryptography.HMACSHA1")
        Case "sha256HMAC": Set Cryptography = CreateObject("System.Security.Cryptography.HMACSHA256")
        Case "sha384HMAC": Set Cryptography = CreateObject("System.Security.Cryptography.HMACSHA384")
        Case "sha512HMAC": Set Cryptography = CreateObject("System.Security.Cryptography.HMACSHA512")
    End Select

    Cryptography.Initialize()

    If IsArray(Target) = True Then Cryptography.Key = UTF8Encoding.GetBytes_4(Target(1))

    BytesToHashedBytes = Cryptography.ComputeHash_2((PlainTextToBytes))

    For x = 1 To LenB(BytesToHashedBytes)
        HashedBytesToHex = HashedBytesToHex & Right("0" & Hex(AscB(MidB(BytesToHashedBytes, x, 1))), 2)
    Next

    If Err.Number <> 0 Then Response.Write(Err.Description) Else Hash = LCase(HashedBytesToHex)

    On Error GoTo 0
End Function 
```

这些可以按如下方式使用：

```
Hash("sha512", "Hello World") 
```

**生产：**
2c74fd17edafd80e8447b0d46741ee243b7eb74dd2149a0ab1b9246fb30382f27e853d8585719e0e67cbda0daa8f51671064615d645ae27acb15bfb1447f459b

```
Hash("sha256", "Hello World") 
```

**生产：**
a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e

```
Hash("md5", "muñeca") 
```

**产生：**
ea07bec1f37f4b56ebe368355d1c058f

```
Hash("sha512HMAC", Array("Hello World", "Shared Key")) 
```

**产生：**
28e72824c48da5a5f14b59246905d2839e7c50e271fc078b1c0a75c89b6a3998746bd8b2dc1764b19d312702cf5e15b38ce799156af28b98ce08b85e4df65b32

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T20:45:55.973

有产生 MD5 校验和的 Javascript 代码。其中之一源自 Google 闭包库，[可在此处获得](http://cheeso.members.winisp.net/srcview.aspx?dir=js&file=md5.js)。

从 Javascript 生成 Windows 脚本组件非常容易，然后从任何支持 COM 的语言（包括 VB）调用该组件。

[这是一个工作示例](http://cheeso.members.winisp.net/srcview.aspx?dir=md5)。

# login - Google OAuth / OpenID - 使用品牌登录页面

> ID：10198692
> 
> 赞同：2
> 
> 时间：2012-04-17T20:33:00.060
> 
> 标签：login, oauth, openid, themes

我正在构建一个堆叠的身份提供程序（使用 SimpleSAMLphp）。我已经成功地与几个 OpenID 和 OAuth 提供程序集成。这包括 Google 使用 OpenID，现在升级到 OAuth 2.0。

我遇到的问题是我在 Google Apps 中也有一个域。我想再次与 Google 集成，但让登录页面显示我的主题/品牌登录页面。这个域没有使用 SSO，只是一个标准的基于谷歌的登录页面。

我似乎找不到任何选项来控制显示哪个页面......即我只能让通用 Google 页面显示。

我错过了什么还是设计遗漏了？

# php - 尝试调整缩略图的大小和裁剪图像

> ID：10198694
> 
> 赞同：1
> 
> 时间：2012-04-17T20:33:03.233
> 
> 标签：php, mysql, image, resize, crop

我想要做的是调整大小并裁剪上传图像的中心。到目前为止，我已经将它调整到图像大小的位置，仅此而已。我知道 imagecopy 功能是我想要的，我只是无法让它与我的功能一起使用。

这就是我到目前为止所拥有的。

```
/* read the source image */
$source_image = imagecreatefromjpeg($src);
$width = imagesx($source_image);
$height = imagesy($source_image);

/* find the "desired height" of this thumbnail, relative to the desired width  */
$desired_height = floor($height*($desired_width/$width));

/* create a new, "virtual" image */
$virtual_image = imagecreatetruecolor($desired_width,$desired_height);

/* copy source image at a resized size */

imagecopyresampled($virtual_image,$source_image,0,0,0,0,$desired_width,$desired_height,$width,$height);

/* create the physical thumbnail image to its destination */
imagejpeg($virtual_image,$dest); 
```

我只需要知道在哪里以及如何合并 imagecopy 功能。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:39:45.437

看看[这堂课](http://code.google.com/p/www-framework/source/browse/engine/class.www-imager.php)。它包含 GD2，就像您提供的示例一样，它还具有其他用于生成缩略图的调整大小算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T01:19:14.050

这是我使用 imagemagick/php 编写的一个函数：检查一下：

[stackoverflow.com/questions/20927238](https://stackoverflow.com/questions/20927238/automatically-resize-image-on-the-shorter-side-regardless-of-orientation-in-imag/20928687#20928687)

# javascript - 使用 KendoUI 折线图，如何保持条形点连接？（见图片）

> ID：10198695
> 
> 赞同：2
> 
> 时间：2012-04-17T20:33:06.927
> 
> 标签：javascript, jquery, asp.net, telerik, kendo-ui

我正在使用 KendoUI 替换一些 DotNet 图表。即使没有数据，如何保持线路连接？

第一个图表是正在被替换的点网图表。第二个图表是我想保持点连接的 KendoUI。

![](../Images/594f818ac37b560065b18de45426c24b.png)

我的 html 看起来像这样：

以下图表的我的 jQuery Kendo 脚本如下所示：

```
jQuery('#chart').kendoChart({
    title: {
        text: "Overall Score out of 100",
        align: "left",
        font: "18px Arial, Verdana, sans-serif"
    },
    seriesDefaults: {
        type: "line"
    },
    legend: {
        position: "bottom"
    },
    tooltip: {
        visible: true,
        format: "{0}%"
    },
    valueAxis: {
        min: 70,
        max: 85,
        plotBands: [{
            from: 70,
            to: 75,
            color: "#EDF5FF"},
        {
            from: 80,
            to: 85,
            color: "#EDF5FF"}]
    },
    series: [{
        name: "Some Product",
        color: "004990",
        tooltip: {
            visible: true,
            template: "<b>Some Product *</b><br/>Current Score: #= value #<br/>#= category # "
        },
        data: [81.82, 81.82, 81.82, null, null, null, null, null, null, null, null, 70.42, 72.37]},
    {
        name: " Some Market Segmemt",
        color: "da7633",
        tooltip: {
            visible: true,
            template: "<b> Some Market Segment</b><br/>Current Score: #= value #<br/>#= category # "
        },
        data: [73.81, 73.52, 73.59, 73.49, 73.41, 73.51, 73.72, 73.27, 74.23, 73.99, 73.97, 73.83, 73.79]}],
    categoryAxis: {
        labels: {
            rotation: -45
        },
        categories: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "Jan - 2012", "Feb", "Mar"]
    }
}); 
```

这是 JSFittle 项目的链接，其中包含要使用的图形：http: [//jsfiddle.net/rodneyhickman/uMTnh/1/](http://jsfiddle.net/rodneyhickman/uMTnh/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:50:40.323

给你：http: [//jsfiddle.net/LyndsySimon/KJuDe/](http://jsfiddle.net/LyndsySimon/KJuDe/)

您需要`missingValues: 'interpolate'`在系列配置上使用该选项。

我在剑道文档的这个页面上找到了这个答案：[http ://www.kendoui.c​​om/documentation/dataviz/chart/configuration.aspx](http://www.kendoui.com/documentation/dataviz/chart/configuration.aspx)

编辑：不知何故，我没有看到你的配置。在这里，修补以填补所有系列的空白 -

```
jQuery('#chart').kendoChart({
title: {
    text: "Overall Score out of 100",
    align: "left",
    font: "18px Arial, Verdana, sans-serif"
},
seriesDefaults: {
    type: "line",
    missingValues: "interpolate"
},
legend: {
    position: "bottom"
},
tooltip: {
    visible: true,
    format: "{0}%"
},
valueAxis: {
    min: 70,
    max: 85,
    plotBands: [{
        from: 70,
        to: 75,
        color: "#EDF5FF"},
    {
        from: 80,
        to: 85,
        color: "#EDF5FF"}]
},
series: [{
    name: "Some Product",
    color: "004990",
    tooltip: {
        visible: true,
        template: "<b>Some Product *</b><br/>Current Score: #= value #<br/>#= category # "
    },
    data: [81.82, 81.82, 81.82, null, null, null, null, null, null, null, null, 70.42, 72.37]},
{
    name: " Some Market Segmemt",
    color: "da7633",
    tooltip: {
        visible: true,
        template: "<b> Some Market Segment</b><br/>Current Score: #= value #<br/>#= category # "
    },
    data: [73.81, 73.52, 73.59, 73.49, 73.41, 73.51, 73.72, 73.27, 74.23, 73.99, 73.97, 73.83, 73.79]}],
categoryAxis: {
    labels: {
        rotation: -45
    },
    categories: ["Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "Jan - 2012", "Feb", "Mar"]
}
}); 
```

# ruby-on-rails - 在长活动记录查询上链接附加 .order 方法

> ID：10198696
> 
> 赞同：0
> 
> 时间：2012-04-17T20:33:07.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我选择了一些公司，我想将可排序的表列添加到我正在显示它们的表中。

我有一个自定义搜索方法，并添加了分页，但在插入 .order 方法时遇到问题

```
 @firms = Firm.search(params[:search], params[:id]).page(params[:page]).per_page(2).order(params[:sort] + " " + params[:direction]) 
```

从表格列头馈送

```
.order(params[:sort] + " " + params[:direction]) 
```

将分页方法

```
.page(params[:page]).per_page(2) 
```

作为我的自定义搜索方法

```
Firm.search(params[:search], params[:id]) 
```

如果我尝试顶部的链条，则会收到错误消息

```
undefined local variable or method `firms' for #<FirmsController 
```

有任何想法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:41:57.957

尝试这个：

```
@firms = Firm.search(params[:search], params[:id])
                 .order(params[:sort] + " " + params[:direction])
                 .paginate(:page => params[:page], :per_page => 2) 
```

你的 order 方法应该在你的 paginate 方法之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:52:54.997

看起来您可能忘记将`@`实例变量放在某处？我不认为这种错误可能来自您的查询，因为它说它在`FirmsController`.

# cocoa - 在 Cocoa 中读取文件权限

> ID：10198702
> 
> 赞同：0
> 
> 时间：2012-04-17T20:33:29.033
> 
> 标签：cocoa, permissions, posix, nsfilemanager

我正在尝试在 Cocoa 中读取具有 rw-r--r-- （因此为 0644）的文件的文件权限。
我正在使用的代码如下：

```
NSUInteger permissions;
permissions=[[fileManager attributesOfItemAtPath:file error:nil] filePosixPermissions];
NSLog(@"Permissions:%lu",permissions); 
```

结果是 420，而预期结果应该是 644。

我做计算错误吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:51:16.833

当您看到 0644 时，它实际上是权限的八进制（以 8 为基数）表示。

420 是八进制 0644 的以 10 为底的等效值。

NSLog 可以输出八进制：

```
NSLog(@"Permissions:%o", permissions); 
```

# node.js - 骨干节点-获取-服务器仅发送响应对象但不发送模型，我如何获取模型？

> ID：10198706
> 
> 赞同：1
> 
> 时间：2012-04-17T20:34:07.477
> 
> 标签：node.js, backbone.js

骨干，节点：当我调用 fetch 方法时，在服务器中获取成功但是当它使用发送回响应时

```
res.send(result) 
```

它没有发送（可能是）任何模型，或者它正在发送旧模型，并且它只发送响应对象。模型是我想要的，我怎样才能得到？

```
app.get('/college/colleges/:_id', function (req, res) {

    oid = new ObjectID(req.params._id.toString());
    return CollegeModel.find({
        _id: oid
    }, function (err, result) {
        if (!err) {
            console.log("Fetched college model successfully");
            res.send(result);
        } else {

            console.log("Error : " + err);
            res.send(err);

        }
    });
}); 
```

上面的代码在 node 中。下面一个是在客户端javascript中（在视图中）。

```
college_model = new CollegeModel(id)
college_model.fetch({
    success = function (model, res, options) {
        console.log model // here , new model should come with all new attributes, but old model with only id attribute is appearing here,,,in model format.
        console.log res // here, i am getting all required records in objectformat,no problem for this res
    }
    error = function (model, res, options) {
        console.log("Error ");
    }

}) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:44:24.943

得到了答案

而不是发送

```
 res.send(result); 
```

像这样发送：

```
 res.send(result[0]); 
```

那么结果会很好！

# objective-c - 检索多行 xml 数据到字典

> ID：10198708
> 
> 赞同：0
> 
> 时间：2012-04-17T20:34:24.310
> 
> 标签：objective-c, ios5

我正在尝试从 xml 数据返回多行。我已将结果加载到字典中。下面的代码给了我最后一个结果（第 1 行或 Randy）。如何检索所有结果而不仅仅是最后一个？我正在寻找 [ID.text intValue] == CSHR_NUM 的 CSHR_POS_NAME。

```
dict = [resp objectForKey:@"TC"];
 if( ( dict == nil ) || ![dict isKindOfClass:[NSDictionary class]] ) {
  NSLog( @"WARNING: %@", [dict description]);
  return;
}

desc = [[dict objectForKey:@"CSHR_POS_NAME"]copy];
CashierNum = [[dict objectForKey:@"CSHR_NUM"]copy];

NSLog(@"Name: %@ and Cashier Number: %@",desc, CashierNum); 
```

xml 输出的日志是：

```
<NewDataSet xmlns="">
  <TC diffgr:id="TC1" msdata:rowOrder="0">  
    <CSHR_POS_NAME>BRITTANY</CSHR_POS_NAME>
    <CSHR_NUM>66</CSHR_NUM>
  </TC>
  <TC diffgr:id="TC4" msdata:rowOrder="1">
    <CSHR_POS_NAME>Randy</CSHR_POS_NAME>
    <CSHR_NUM>7</CSHR_NUM>
  </TC>
</NewDataSet> 
</diffgr:diffgram> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:46:28.367

看来您有一系列带有`"TC"`键的字典。您不应该尝试将响应读取为数​​组，然后遍历字典吗？

# html - HTML 和 CSS 我的文本输入框的高度不断变化

> ID：10198712
> 
> 赞同：0
> 
> 时间：2012-04-17T20:34:34.410
> 
> 标签：html, css, searchbar

我正在做一个搜索栏。文本输入框和搜索按钮按计划是相邻的，但是当浏览器展开时输入框的高度不断变化。我已经多次查看我的代码，但找不到导致问题的原因。任何帮助，将不胜感激 ：）

[http://jsfiddle.net/tmjfd/3/](http://jsfiddle.net/tmjfd/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:40:27.707

您正在将您的`padding`is 定义为百分比。这将根据您的文档大小进行缩放，并会影响您的总输入高度。如果您不希望输入缩放，则需要使用固定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:50:46.947

如果你改变

```
input{
    padding: 1.5%; 
} 
```

到

```
input{
    padding: 6px;
} 
```

那将解决它。问题是填充的百分比是基于窗口大小的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:51:13.630

问题是由设置引起的`padding: 1.5%`。百分比是相对于包含块的宽度的。`em`根据设计要求，将其移除或使用该装置。

# java - 如何找出Java字符串的子字符串是否与正则表达式匹配？

> ID：10198713
> 
> 赞同：1
> 
> 时间：2012-04-17T20:34:36.410
> 
> 标签：java, grep

Java String 类有一个matches(String regex) 方法来检查当前字符串是否匹配给定的正则表达式。但是，我们如何才能找到当前字符串的子字符串是否匹配正则表达式呢？

我正在尝试使用 Java 模仿 grep 的行为。grep 获取一行并打印与该行中任何位置的给定正则表达式匹配的所有行。我不知道如何用Java 做到这一点，因为matches 方法检查整行（即字符串）是否与正则表达式匹配，而不是其中的任何子字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T20:36:24.453

该`Matcher#find()`方法做你想要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:44:06.463

就像 ColinD 说的那样，你最好的办法是一次在你的字符串中读取一行，然后在两端使用一个不情愿的通配符运行你的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:42:07.973

您可以修改正则表达式以允许在字符串的前后使用通配符。

所以而不是：

```
Pattern regex = Pattern.compile("hello\\sworld") 
```

你有

```
Pattern regex = Pattern.compile(".*hello\\sworld.*); 
```

# macos - Cmake - 打包一个 mac OS 捆绑应用程序并安装它。但是我可以禁用搬迁吗？

> ID：10198721
> 
> 赞同：1
> 
> 时间：2012-04-17T20:35:06.107
> 
> 标签：macos, cmake, cpack

我在 Mac OS 中创建了一个 .app 包并尝试分发它。但是安装程序包可以选择将包重新定位到现有的 .app 文件。我似乎无法在 CPack 中找到禁用它的选项。我必须接受这个选项吗？

# web - 使用个人网站托管将 Sawtooth 软件 ACA 调查上传到网络

> ID：10198723
> 
> 赞同：0
> 
> 时间：2012-04-17T20:35:23.163
> 
> 标签：web, hosting, web-hosting, survey, programming-pearls

该软件为我创建了一个 Web Upload 文件夹，我使用 FTP 客户端（特别是 WS_FTP）将其上传到站点。珍珠文件的第一行说“#!usr/bin/pearl”，我将其更改为“/home/calakpsi/pearl”。但是，当我执行 html 文件时，它会在“/C:/Users/myname/AppData/Roaming/Ipswitch/WS_FTP/Storage/cgi-bin/ciwweb.pl”下搜索我的计算机。我确定它正在寻找的文件在那个文件夹中，但由于某种原因，网页仍然无法执行。

任何帮助或分步解决方案（因为我没有深入的技术背景）将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:44:04.357

我认为问题在于您的服务器未正确配置为运行 perl 脚本。看看[这个](https://stackoverflow.com/questions/560749/how-do-i-configure-apache2-to-run-perl-cgi-scripts)，看看它是否有帮助。Dave Sherohman 的回答应该可以帮到你。

一旦您能够运行 perl 脚本，它就应该运行（除非其他特定于脚本的问题）。

总体而言，执行 perl 脚本所需的步骤如下。您可以在互联网上查找他们的详细信息，因为我自己也不认识他们。

*   在 ubtuntu 上安装服务器所需的任何模块，例如 mod_perl，它会类似于`sudo apt-get install libapache2-mod-perl2`. 如果您在 Windows 中，也许可以使用其中一个 bitnami 或其他 LAMP 安装程序。他们应该随它一起安装。
*   服务器/虚拟主机的配置，以便执行目录中的perl文件
*   确保他们有正确的权限（你应该准备好了）。

# ruby-on-rails - Rails 反向多态关联

> ID：10198727
> 
> 赞同：4
> 
> 时间：2012-04-17T20:35:37.020
> 
> 标签：ruby-on-rails, polymorphic-associations

我正在为其中一所学校建立一个收费模块。为了使费用模块正常工作，我想定义费用模板（结构），其中包含不同类型的费用（入场费、图书馆费、体育费等）、各种折扣和任何适用的税费。费用、折扣和税收被定义为不同的模型，因为它们包含不同的属性。

以下是各种型号...

首先是费用模板

```
class FeeTemplate < ActiveRecord::Base
    has_many :fee_template_particulars
end 
```

然后是费用详情..

```
class FeeParticular < ActiveRecord::Base
    belongs_to :fee_template
    belongs_to :particulars, :polymorphic => true
end 
```

现在收费、折扣和税收模式

```
class Fee < ActiveRecord::Base
    has_many :fee_particulars, :as => particulars
end

class Discount < ActiveRecord::Base
    has_many :fee_particulars, :as => particulars
end

class Tax < ActiveRecord::Base
    has_many :fee_particulars, :as => particulars
end 
```

本质上，FeeTemplateParticular 的数据库表将有一个类型列来存储费用/折扣/税的类型和 id 记录。

想问你们几个关于我必须实施的场景的问题..

1.  这种方法（多态）是否适合这种情况？

2.  如果上面没问题并且知道多态关联以一种方式工作，但在我的情况下，我将不得不从费用详情中找到每种类型费用/折扣/税的详细信息，而不是相反。那怎么做？

3.  有没有更好的方法来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:15:50.110

是的，这很好。

您有 has_many 的 field_particular 来查找不同类型的详细信息。您将能够针对细节的不同行为进行不同的分类。我认为这是针对您的问题的一个非常好的设计。

# r - R中的for循环打印两次

> ID：10198729
> 
> 赞同：2
> 
> 时间：2012-04-17T20:35:43.107
> 
> 标签：r, for-loop

我对编程相当陌生，并且非常想学习 R。我正在尝试解决 R 中的经典“Fizzbuzz”问题，并且几乎找到了一种方法，但是我的循环打印了两次。尝试调试和搜索，但我似乎找不到任何东西。有什么建议么？

tl; dr 你知道为什么这个 for 循环会打印两次吗？

```
fizzbuzz = function(n){
  if ( n %% 15 == 0 ) {
    print("Fizzbuzz")
  } else
  if ( n %% 5 == 0 ) {
    print("buzz")
  } else
  if ( n %% 3 == 0 ) {
    print("Fizz")
  } else {
    print(n)
  }
}

for (a in 1:100)
  print(fizzbuzz(a)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:39:50.767

因为您调用`print`了两次，一次在函数中，一次在循环中。删除`print`循环中的，它只打印一次。

```
for (a in 1:100)
  fizzbuzz(a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:40:33.830

您正在打印 fizzbuzz 的结果并在函数内部。试试这个：

```
for (a in 1:100)
    fizzbuzz(a) 
```

# ios - 以编程方式将 UIPageControl 链接到 UIScrollView

> ID：10198732
> 
> 赞同：57
> 
> 时间：2012-04-17T20:36:03.987
> 
> 标签：ios, xcode, uiscrollview, uipagecontrol

我正在我的应用程序中制作一个简单的幻灯片视图。我想将我的 UIPageControl 链接到我的 UIScrollView。这应该不会太难，但我无法在任何地方找到简单的解决方案。下面是我的代码。

帮助视图控制器.h

```
#import <UIKit/UIKit.h>

@interface HelpViewController : UIViewController{
}
@end 
```

HelpViewController.m

```
#import "HelpViewController.h"

@interface HelpViewController ()

@end

@implementation HelpViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect scrollViewFrame = CGRectMake(0, 62, 320, 404);
    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:scrollViewFrame];
    [self.view addSubview:scrollView];
    CGSize scrollViewContentSize = CGSizeMake(640, 404);
    [scrollView setContentSize:scrollViewContentSize];
    UILabel *label  = [[UILabel alloc] initWithFrame:CGRectMake(200, 200, 50, 21)];
    [label setText:@"Hello"];
    [scrollView addSubview:label];
    [scrollView setPagingEnabled:YES];
    scrollView.showsHorizontalScrollIndicator = NO;
    UIPageControl *pageControl = [[UIPageControl alloc] init]; 
    pageControl.frame = CGRectMake(110,5,100,100); 
    pageControl.numberOfPages = 2; 
    pageControl.currentPage = 0; 
    [self.view addSubview:pageControl];
    pageControl.backgroundColor = [UIColor redColor];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-17T20:39:43.300

也许这对你有用

不要忘记设置 UIScrollView 的 delegate = self （或者你在下面有选择器的任何地方）。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat pageWidth = self.scrollView.frame.size.width; // you need to have a **iVar** with getter for scrollView
    float fractionalPage = self.scrollView.contentOffset.x / pageWidth;
    NSInteger page = lround(fractionalPage);
    self.pageControl.currentPage = page; // you need to have a **iVar** with getter for pageControl
} 
```

对于您的代码，它将是：

.h 文件

```
#import <UIKit/UIKit.h>

@interface HelpViewController : UIViewController{
}

@property (nonatomic, retain) UIScrollView *scrollView;
@property (nonatomic, retain) UIPageControl * pageControl;
@end 
```

.m 文件

```
#import "HelpViewController.h"

@interface HelpViewController ()

@end

@implementation HelpViewController
@synthesize scrollView=scrollView_;
@synthesize pageControl=pageControl_;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect scrollViewFrame = CGRectMake(0, 62, 320, 404);
    self.scrollView = [[[UIScrollView alloc] initWithFrame:scrollViewFrame] autorelease];
    self.scrollView.delegate = self;
    [self.view addSubview:self.scrollView];
    CGSize scrollViewContentSize = CGSizeMake(640, 404);
    [self.scrollView setContentSize:scrollViewContentSize];
    UILabel *label  = [[UILabel alloc] initWithFrame:CGRectMake(200, 200, 50, 21)];
    [label setText:@"Hello"];
    [self.scrollView addSubview:label];
    [self.scrollView setPagingEnabled:YES];
    self.scrollView.showsHorizontalScrollIndicator = NO;
    self.pageControl = [[[UIPageControl alloc] init] autorelease]; 
    self.pageControl.frame = CGRectMake(110,5,100,100); 
    self.pageControl.numberOfPages = 2; 
    self.pageControl.currentPage = 0; 
    [self.view addSubview:self.pageControl];
    pageControl.backgroundColor = [UIColor redColor];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

 - (void)scrollViewDidScroll:(UIScrollView *)scrollView {
        CGFloat pageWidth = self.scrollView.frame.size.width;
        float fractionalPage = self.scrollView.contentOffset.x / pageWidth;
        NSInteger page = lround(fractionalPage);
        self.pageControl.currentPage = page; 
    }

@end 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-05-22T23:13:12.657

这实际上设置起来非常简单。首先，您需要创建滚动视图和页面控件。确保`UIScrollViewDelegate`在类的接口中实现。

```
 UIScrollView * scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * 3, scrollView.frame.size.height);
    scrollView.delegate = self;

    UIPageControl * pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 90, scrollView.frame.size.width, 20)];
    pageControl.numberOfPages = scrollView.contentSize.width/scrollView.frame.size.width;
    [pageControl addTarget:self action:@selector(changePage:) forControlEvents:UIControlEventValueChanged]; 
```

然后需要添加以下两个方法：

```
- (IBAction)changePage:(id)sender {
    CGFloat x = pageControl.currentPage * scrollView.frame.size.width;
    [scrollView setContentOffset:CGPointMake(x, 0) animated:YES];
}

-(void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView  {
    NSInteger pageNumber = roundf(scrollView.contentOffset.x / (scrollView.frame.size.width));
    pageControl.currentPage = pageNumber;
} 
```

这些方法在页面控件和滚动视图之间添加了所需的通信。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-14T21:12:26.377

以下代码适用于 Swift：

```
func addScrollView() {        
    let scrollView = UIScrollView(frame: CGRect(x: 0, y: 0, width: 200, height: 200))
    let numberOfPages: CGFloat = 4
    scrollView.contentSize = CGSize(width: scrollView.frame.width * numberOfPages, height: scrollView.frame.height * numberOfPages)
    scrollView.delegate = self
    scrollView.isPagingEnabled = true

    let pageControl = UIPageControl(frame: CGRect(x: 0, y: scrollView.frame.height - 37, width: scrollView.frame.width, height: 37))
    pageControl.numberOfPages = Int(numberOfPages)
    pageControl.currentPage = 0
}

func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let value = scrollView.contentOffset.x / scrollView.frame.size.width
    pageControl.currentPage = Int(round(value))
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T07:36:09.417

要在不四舍五入的情况下获得准确的页面索引，只需将 pagecontrol.currentpage 放在滚动视图的 scrollViewDidEndDecelerating 委托方法中。这对我有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-16T18:28:51.003

所有这些答案都很棒，但我想提供一个替代解决方案，使用[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)！

以下代码假设您有一个名为的属性`scrollView`和一个名为的属性`pageControl`。

```
[RACObserve(self.scrollView, contentOffset)
  subscribeNext:^(NSValue* value){
      CGPoint offset = [value CGPointValue];
      CGFloat fractional = offset.x/self.scrollView.width;
      [self.pageControl setCurrentPage:lroundf(fractional)];
  }]; 
```

这里发生的所有事情是您正在观察 scrollView 的 contentOffset 属性的变化，并计算每个下一个事件的页面索引（即每次属性值更改时）。

唯一的缺点是您必须拆箱，`CGPoint`但从好的方面来说，根本不需要`UIScrollViewDelegate`代码！

# c++ - windows窗体最大化/最小化/关闭标题栏中的按钮闪烁

> ID：10198739
> 
> 赞同：1
> 
> 时间：2012-04-17T20:36:25.810
> 
> 标签：c++, windows, forms, flicker

我为 Winamp 制作了一个插件，它是一个启动 Windows 窗体 GUI (C++) 的简单 dll 文件。但是当我将鼠标光标移到标题栏中的最大化/最小化/关闭按钮上时，这些按钮会闪烁。启用双缓冲不起作用。(http://www.devx.com/tips/Tip/39858)

你还有什么提示吗？

谢谢，马丁

编辑：我不处理 WM_NCMOUSEMOVE ...

编辑2：或者你有一个解决方法的想法？

# javascript - 在 Extjs 网格上添加存储数据(3)

> ID：10198742
> 
> 赞同：1
> 
> 时间：2012-04-17T20:36:38.840
> 
> 标签：javascript, extjs, extjs3, gridpanel

我有一个包含大约 500 条记录的 jsonstore，每次我添加更多数据来存储时，我都会调用`grid.getView().refresh()`在 gridpanel 上绑定数据，但这需要 5-6 秒，并且还会挂起浏览器。

有没有其他方法可以更快地绑定网格面板或刷新网格面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:18:29.070

你不能只在商店的加载方法上添加结果吗？我在想类似的事情：

```
grid.store.load({add:true, params: your_params_here}); 
```

查看加载方法的api：[http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-method-load](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-method-load)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:05:45.683

好吧，所有的事情都是在 UI 线程中完成的。因此速度取决于浏览器：Chrome 很可能会非常快，而 IE7 或 IE8 则明显较慢。

您是否已经查看了 firebug（或 IE 或 Chrome）的分析器以了解大部分 CPU 时间都花在了哪里？我想知道是行刷新还是布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-07T20:09:52.840

考虑到您拥有大量且不断增长的数据，如何将缓冲网格与分页一起使用？

[extjs 分页显示在浏览器上](https://i.stack.imgur.com/awCBz.png)

可能这个链接会帮助你。[带有分页的 extjs 网格](https://www.sencha.com/forum/showthread.php?257351-Create-Buffered-Grid-in-Extjs-3-4-0)

# android - 不工作的 Android SmatFox 服务器示例

> ID：10198746
> 
> 赞同：3
> 
> 时间：2012-04-17T20:37:02.690
> 
> 标签：android, smartfoxserver

我试图在我的电脑上编译这个例子，所有的应用程序都有这样的错误：

```
04-17 18:01:18.493: E/AndroidRuntime(271): FATAL EXCEPTION: main
04-17 18:01:18.493: E/AndroidRuntime(271): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{sfs2x.example.android.tris/sfs2x.example.android.tris.Tris}: java.lang.ClassNotFoundException: sfs2x.example.android.tris.Tris in loader dalvik.system.PathClassLoader[/data/app/sfs2x.example.android.tris-2.apk]
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.os.Looper.loop(Looper.java:123)
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-17 18:01:18.493: E/AndroidRuntime(271):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 18:01:18.493: E/AndroidRuntime(271):    at java.lang.reflect.Method.invoke(Method.java:521)
04-17 18:01:18.493: E/AndroidRuntime(271):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-17 18:01:18.493: E/AndroidRuntime(271):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-17 18:01:18.493: E/AndroidRuntime(271):    at dalvik.system.NativeStart.main(Native Method)
04-17 18:01:18.493: E/AndroidRuntime(271): Caused by: java.lang.ClassNotFoundException: sfs2x.example.android.tris.Tris in loader dalvik.system.PathClassLoader[/data/app/sfs2x.example.android.tris-2.apk]
04-17 18:01:18.493: E/AndroidRuntime(271):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)    
04-17 18:01:18.493: E/AndroidRuntime(271):    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)    
04-17 18:01:18.493: E/AndroidRuntime(271):    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)    
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)    
04-17 18:01:18.493: E/AndroidRuntime(271):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)    
04-17 18:01:18.493: E/AndroidRuntime(271):    ... 11 more 
```

[从这里](http://docs2x.smartfoxserver.com/ExamplesAndroid/tris)下载例子

我有：

*   Windows 7 X64、Eclipse 和 Android NDK 最新版本。
*   最新版本的 SmartFox 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:41:17.357

我发现我的问题的解决方案是这个链接：

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

特别是这个：

```
If you have references to jars that are not in the ‘libs’ folder, for example if you use ‘classpath variable’, you can resolve the NoClassDefFoundError issue with the new ADT 17 by exporting the references.

To export the references: simply go to “Properties > Java Build Path > Order and Export”, and check all the references you want exported. 
```

# python - 如何同时选择数组的所有奇数行和所有偶数列

> ID：10198747
> 
> 赞同：29
> 
> 时间：2012-04-17T20:37:03.143
> 
> 标签：python, numpy

我是编程新手，我需要一个程序，它可以在一个代码中同时选择 Numpy 数组的所有奇数行和所有偶数列。这是我尝试过的：

```
>In [78]: a

>Out[78]:
>array([[ 1,  2,  3,  4,  5],
>       [ 6,  7,  8,  9, 10],
>       [11, 12, 13, 14, 15],
>       [16, 17, 18, 19, 20]])
>
>In [79]: for value in range(a.shape[0]):
>     if value %2 == 0:
>        print a[value,:]

>[1 2 3 4 5]
>[11 12 13 14 15]
>
>In [82]: for value in range(a.shape[1]):
>    if value %2 == 1:
>        print a[:,value]

>[ 2  7 12 17]
>[ 4  9 14 19] 
```

我读过一些东西，`(: even)`但不知道我可以以哪种方式使用它。谢谢你的帮助。

韩

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-17T20:43:26.147

假设你有这个数组，x：

```
>>> import numpy
>>> x = numpy.array([[ 1,  2,  3,  4,  5],
... [ 6,  7,  8,  9, 10],
... [11, 12, 13, 14, 15],
... [16, 17, 18, 19, 20]]) 
```

要获得其他奇数行，就像您上面提到的那样：

```
>>> x[::2]
array([[ 1,  2,  3,  4,  5],
       [11, 12, 13, 14, 15]]) 
```

要获得所有其他偶数列，就像您上面提到的那样：

```
>>> x[:, 1::2]
array([[ 2,  4],
       [ 7,  9],
       [12, 14],
       [17, 19]]) 
```

然后，将它们组合在一起产生：

```
>>> x[::2, 1::2]
array([[ 2,  4],
       [12, 14]]) 
```

有关更多详细信息，请参阅[索引](https://numpy.org/doc/stable/user/basics.indexing.html)文档页面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-18T22:08:57.373

要获取所有其他奇数列：

```
 x[:,0::2] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-20T19:04:13.573

切片数组：

```
import numpy as np

arr = np.array([[1, 2, 3], [4, 5, 6],[7, 8, 9],[10, 11, 12],[13, 14, 15]])

case1=arr[::2,:]    #odd rows
case2=arr[1::2,:]   #even rows
case3=arr[:,::2]    #odd cols
case4=arr[:,1::2]   #even cols
print(case1)
print("\n") 
print(case2)
print("\n") 
print(case3)
print("\n") 
print(case4)
print("\n") 
```

给出：

```
[[ 1  2  3]
 [ 7  8  9]
 [13 14 15]]

[[ 4  5  6]
 [10 11 12]]

[[ 1  3]
 [ 4  6]
 [ 7  9]
 [10 12]
 [13 15]]

[[ 2]
 [ 5]
 [ 8]
 [11]
 [14]] 
```

# r - 将图例添加到多个 for 循环图的边距

> ID：10198748
> 
> 赞同：4
> 
> 时间：2012-04-17T20:37:03.480
> 
> 标签：r, plot, legend

这可能是一个老问题，但我在任何地方都找不到满意的答案。假设我有以下代码：

```
par(mfrow = c(2,1), mar = c(4,4,1,1), oma=c(2,2,2,2))
stuff <- c("ed", "bla")
cols <- c("red", "blue")
for(i in 1:length(stuff)) {
x <- rnorm(10,3,2)
y <- seq(1,10)
plot(x,y, type = "o", col = cols[i], xlab = paste("stuff about", stuff[i]))}
legend("bottomright", legend = stuff, col = cols, lwd = 1, bty = "n")
par(mfrow=c(1,1))
title(main = "ed & bla", outer = T)
mtext("This is a plot", 3, line=0.5, adj=1.0, cex=1, outer=TRUE) 
```

如何在绘图的底部边缘添加图例？

![在此处输入图像描述](../Images/c9f51e62dc9949407b988c540de7548f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T01:56:22.917

重新排序绘图请求，以便您在最后一个绘图之后（循环外）但在下一次修改绘图参数之前绘制图例。请注意，仅移动了“legend”命令：

```
par(mfrow = c(2,1), mar = c(4,4,1,1), oma=c(2,2,2,2))
stuff <- c("ed", "bla")
cols <- c("red", "blue")
for(i in 1:length(stuff)) {
x <- rnorm(10,3,2)
y <- seq(1,10)
plot(x,y, type = "o", col = cols[i], xlab = paste("stuff about", stuff[i]))}
legend("bottomright", legend = stuff, col = cols, lwd = 1, bty = "n")
par(mfrow=c(1,1))
title(main = "ed & bla", outer = T)
mtext("This is a plot", 3, line=0.5, adj=1.0, cex=1, outer=TRUE) 
```

这会将图例放在底部图的右下角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T13:55:07.660

但你必须手动设置坐标

```
par(mfrow = c(2,1), mar = c(4,4,1,1), oma=c(2,2,2,2))
stuff <- c("ed", "bla")
cols <- c("red", "blue")
for(i in 1:length(stuff)) {
  x <- rnorm(10,3,2)
  y <- seq(1,10)
  plot(x,y, type = "o", col = cols[i], xlab = paste("stuff about", stuff[i]))}
legend(y=-5, x=5, legend = stuff, col = cols, lwd = 1, bty = "n", xpd=NA) 
```

# python - python不确定性包中的零除错误

> ID：10198753
> 
> 赞同：4
> 
> 时间：2012-04-17T20:37:18.583
> 
> 标签：python, uncertainty

为什么会出现以下除零错误？

```
>>> from uncertainties import ufloat
>>> a = ufloat((0,0))
>>> x = ufloat((0.3,0.017))
>>> a**x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/uncertainties/__init__.py", line 601, in f_with_affine_output
    if arg.derivatives
  File "<string>", line 1, in <lambda>
ZeroDivisionError: 0.0 cannot be raised to a negative power
>>> 0.0**x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/uncertainties/__init__.py", line 601, in f_with_affine_output
    if arg.derivatives
  File "<string>", line 1, in <lambda>
ValueError: math domain error 
```

这两个都不应该返回`0.0`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:36:05.357

情况非常微妙：

1.  一方面，你是对的，两个结果在数学上都应该是 0。

    实际上，行为应该与 Python 的相同：

    ```
    >>> 0.**0.3
    0.0 
    ```

    当指数具有不确定性时，结果应该正好为 0（无不确定性），因为 Python 结果始终为 0。

    这种情况`a = 0±0`很特殊：即使 有不确定性（对于零值或负值，结果未定义 ），`a**x`为正数为 0 。另一方面，如果， 的值 是未定义的，因为不能取负数的（实数）幂（并且可以是负数，如果它具有非零不确定性）（除非使用复数，这不是不确定性包的目的）。`x``x``x``a=0±0.1``a**x``a`

2.  另一方面，不确定性模块允许用户随时更改数字的不确定性，仍然可以获得正确的结果。这与上面的“理想”数学结果相冲突：如果`a = 0±0`，则`a**x` *可能稍后的结果是 undefined*；相反，如果`a = 0±0.3`，结果应该是未定义的，但如果不确定性`a`后来变为 0，则结​​果应该以某种方式变为 0。

从技术上讲，这一切都归结为这样一个事实，即`a**x`0 < x < 1 在 a = 0 中定义，但在那里不可微：零不确定性的情况应该有效（函数已定义），但非零不确定性必须产生错误（未定义导数）。这两种情况都必须以某种方式动态处理，因为用户可以即时更改不确定性。

这是一个有趣的情况，所以我会再次考虑不确定性模块是否可以以某种优雅的方式进行修改并适应这个问题。

**PS**：从版本 2.3.5 开始，**[不确定性包](https://pypi.python.org/pypi/uncertainties/)正确处理问题的情况**，更一般地说，所有具有不确定性的数字实际上具有零不确定性的情况（即使*相同的数字*但具有*非零不确定性*也会给出通过错误的线性传播产生未定义的错误，就像问题中一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:38:36.747

我认为`ZeroDivisionError`只要指数小于 1，就会发生这种情况。阻塞的代码部分正试图取导数。我对高中微积分的模糊回忆告诉我， 的导数`x ** y`是`y * x ** (y - 1)`。

也就是说，我同意你的例子评估为 0 是直观的。要么我们的直觉是错误的（就像我的微积分一样糟糕，我*不知道*真正的数学家和科学家如何希望不确定性起作用，以及那个人写这个包似乎知道他在做什么，加上他包含了很多测试），或者我们确实是对的，他需要添加处理将零（零不确定性）提高到幂的特殊情况。

# facebook - 迁移您的应用配置文件页面

> ID：10198757
> 
> 赞同：2
> 
> 时间：2012-04-17T20:37:46.617
> 
> 标签：facebook, profile, migrate

我的问题涉及这篇博文：http: [//developers.facebook.com/blog/post/2012/02/01/how-to--migrate-your-app-profile-page/](http://developers.facebook.com/blog/post/2012/02/01/how-to--migrate-your-app-profile-page/)

我在 App Profile 页面上看到了这条消息：http: [//www.facebook.com/streema](http://www.facebook.com/streema)，但由于我无法将它们迁移到页面，所以我没有这样做 - 可能是因为我们没有确切的一样的名字。我认为这还不够清楚。

此外，保留我们的虚 URL 对我们来说很重要，因为我在任何地方都没有读到这个问题，所以我决定暂时不进行更改。

我们的应用程序有超过 16,000 个赞，我认为失去它们将是一种耻辱。

希望有人可以帮助我们。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:10:53.440

迁移从 2011 年 12 月 10 日到 2012 年 2 月 7 日期间可用，并在迁移期间通过多篇博客文章和所有应用程序配置文件页面顶部的消息进行了宣布。在 2011 年 12 月 10 日之后创建的应用程序从来没有要迁移的应用程序配置文件页面，但在此之前创建的应用程序可以选择迁移。迁移选项不再可用 - 如果您想要应用程序的页面，您需要从应用程序的设置界面创建一个新页面

# c++ - 如何从 C++ rand() 获取当前种子？

> ID：10198758
> 
> 赞同：21
> 
> 时间：2012-04-17T20:37:53.797
> 
> 标签：c++, random, get, seed

*我基于 C++ rand()*函数在我的程序中生成了几千个对象。将它们保存在内存中将是详尽无遗的。有没有办法在任何给定时间复制 rand() 的当前种子？这将使我有机会仅存储当前种子而不是完整对象。（因此我可以通过重新生成完全相同的随机数子序列来重新生成这些对象）

一个详尽的解决方案是存储由*rand()*给出的完整随机数序列- 不值得。另一个解决*方案*是实现我自己的随机数类。

谷歌没有给我任何积极的线索。有数百篇文章教授 rand 和 srand 的基础知识，我找不到具体的。

有谁知道其他带有种子窃取器的随机数生成器？

* * *

感谢您的快速答复！这个问题有更多可能的答案/解决方案，所以我在这里列出了你的答案。

解决方案：

1.  简短的回答是：没有获取种子的标准方法

2.  最接近的解决方法是在开头保存 INITIAL 种子，并计算调用 rand() 函数的次数。我将此标记为解决方案，因为它适用于*每个编译器的当前**std::rand()*函数（这是主要问题）。我对我的 2.0 GHz CPU 进行了基准测试，发现我可以在 35 秒内调用&count *rand() 1,000,000,000 次。*这听起来不错，但我有 80,000 次调用来生成一个对象。这将代数限制为 50,000，因为 unsigned long 的大小。无论如何，这是我的代码：

     **```
    class rand2
    {
       unsigned long n;

       public:

       rand2 () : n(0) {}

       unsigned long rnd()
       {
          n++;
          return rand();
       }
       // get number of rand() calls inside this object
       unsigned long getno ()
       {
          return n;
       }
       // fast forward to a saved position called rec
       void fast_forward (unsigned long rec)
       {
          while (n < rec) rnd();
       }
    }; 
    ```** 
***   另一种方法是实现您自己的伪随机数生成器，就像 Matteo Italia 建议的那样。这是最快的，也可能是最好的解决方案。您不限于 4,294,967,295 次*rand()*调用，也不需要使用其他库。值得一提的是，不同的编译器有不同的生成器。我已经将 Matteo 的*LCG*与Mingw/GCC 3.4.2 和 G++ 4.3.2 中的*rand()进行了比较。*他们三个都是不同的（*种子= 0*）。

    *   使用 C++11 或 Cubbi、Jerry Coffin 和 Mike Seymour 建议的其他库的生成器。如果您已经在与他们合作，这是最好的主意。C++11 生成器的链接：http: [//en.cppreference.com/w/cpp/numeric/random](http://en.cppreference.com/w/cpp/numeric/random) （这里也有一些算法描述）** 

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T20:43:40.467

> 有谁知道其他具有实施种子窃取器的随机数生成器

所有标准 C++11 随机数生成器（在 TR1 和 Boost 中也可用）都提供此功能。您可以简单地复制生成器对象或序列化/反序列化它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T20:43:34.390

没有获取当前种子的标准方法（您只能通过 设置它`srand`），但您可以通过几行代码自行重新实现`rand()`（通常是[线性同余生成器）：](http://en.wikipedia.org/wiki/Linear_congruential_generator)

```
class LCG
{
private:
    unsigned long next = 1;
public:

    LCG(unsigned long seed) : next(seed) {}

    const unsigned long rand_max = 32767

    int rand()
    {
        next = next * 1103515245 + 12345;
        return (unsigned int)(next/65536) % 32768;
    }

    void reseed(unsigned long seed)
    {
        next = seed;
    }

    unsigned long getseed()
    {
        return next;
    }
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T20:42:52.370

使用 srand() 设置种子。保存您用作种子的值。

[http://cplusplus.com/reference/clibrary/cstdlib/srand/](http://cplusplus.com/reference/clibrary/cstdlib/srand/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-17T20:43:51.857

C++11 中的随机数生成类支持`operator<<`存储它们的状态（主要是种子）并将`operator>>`其读回。所以，基本上，在创建对象之前，保存状态，然后当你需要重新生成相同的顺序，读回状态，然后离开。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-17T20:46:20.340

`rand()`不提供任何提取或复制种子的方法。您可以做的最好的事情是在使用 设置种子时存储种子的初始值`srand()`，然后从中重建整个序列。

Posix 函数`rand_r()`使您可以控制种子。

C++11 库包括一个基于序列生成“引擎”的随机数库；这些引擎是可复制的，并允许使用`<<`和`>>`运算符提取和恢复它们的状态，以便您可以随时捕获序列的状态。如果您还不能使用 C++11，TR1 和 Boost 中提供了非常相似的库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-15T22:50:33.920

> 有没有办法在任何给定时间复制 rand() 的当前种子？

下面是一种特定于实现的方法来保存和恢复伪随机数生成器 (PRNG) 状态，该状态与 Ubuntu Linux 上的 C 库一起使用（在 14.04 和 16.04 上测试）。

```
#include <array>
#include <cstdlib>
#include <iostream>

using namespace std;

constexpr size_t StateSize = 128;
using RandState = array<char, StateSize>;

void save(RandState& state) {
    RandState tmpState;
    char* oldState = initstate(1, tmpState.data(), StateSize);
    copy(oldState, oldState + StateSize, state.data());
    setstate(oldState);
}

void restore(RandState& state) {
    setstate(state.data());
}

int main() {
    cout << "srand(1)\n";

    srand(1);

    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';

    cout << "srand(1)\n";

    srand(1);

    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';

    cout << "save()\n";

    RandState state;
    save(state);

    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';

    cout << "restore()\n";

    restore(state);

    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
    cout << "  rand(): " << rand() << '\n';
} 
```

这取决于：

1.  C 库使用相同的 PRNG 来公开`rand()`和`random()`接口，以及
2.  关于 C 库中此 PRNG 的默认初始化的一些知识（128 字节状态）。

如果运行，这应该输出：

```
srand(1)
  rand(): 1804289383
  rand(): 846930886
  rand(): 1681692777
  rand(): 1714636915
  rand(): 1957747793
  rand(): 424238335
  rand(): 719885386
  rand(): 1649760492
srand(1)
  rand(): 1804289383
  rand(): 846930886
  rand(): 1681692777
  rand(): 1714636915
save()
  rand(): 1957747793
  rand(): 424238335
  rand(): 719885386
  rand(): 1649760492
restore()
  rand(): 1957747793
  rand(): 424238335
  rand(): 719885386
  rand(): 1649760492 
```

此解决方案在某些情况下可能会有所帮助（无法更改的代码、出于调试目的复制执行等），但显然不建议将其作为通用解决方案（例如，使用正确支持此功能的 C++11 PRNG ）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T20:56:41.863

您可以尝试保存用于在 srand 之前（或之后）播种的值。

因此，例如：

```
int seed = time(NULL);
srand(time(NULL));

cout << seed << endl;
cout << time(NULL); 
```

这两个值应该相同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-21T04:17:44.430

我建议您使用[Mersenne Twister Pseudo-Random Number Generator](http://www.bedaux.net/mtrand/)。它速度很快，并提供了非常好的随机数。您可以非常简单地在类的构造函数中播种生成器

```
unsigned long rSeed = 10;
MTRand myRandGen(rSeed); 
```

然后，您只需将用于生成序列的种子存储在某处...**

# ant - 删除与另一个目录树中的占位符匹配的文件

> ID：10198759
> 
> 赞同：1
> 
> 时间：2012-04-17T20:38:03.830
> 
> 标签：ant

我有两个目录树：

```
source/aaa/bbb/ccc/file01.txt
source/aaa/bbb/file02.txt
source/aaa/bbb/file03.txt
source/aaa/ddd/file03.txt
source/file01.txt 
```

和

```
template/aaa/bbb/ccc/file01.txt
template/aaa/bbb/DELETE-file03.txt
template/aaa/DELETE-ddd
template/DELETE-file01.txt 
```

使用 Ant，我想做三件事。首先，我想将任何文件从“模板”复制到“源”，这样所有不以“DELETE-”开头的文件都会被替换。例如，“source/aaa/bbb/ccc/file01.txt”将被替换。这很简单：

```
<copy todir="source" verbose="true" overwrite="true">
    <fileset dir="template">
        <exclude name="**/DELETE-*"/>
    </fileset>
</copy> 
```

其次，我想删除“源”树中名称与“模板”树相应目录中的“DELETE-”文件匹配的所有文件。例如，“source/aaa/bbb/file03.txt”和“source/file01.txt”都将被删除。我已经能够做到这一点：

```
<delete verbose="true">
    <fileset dir="source">
        <present present="both" targetdir="template">
            <mapper type="regexp" from="(.*[/\\])?([^/\\]+)" to="\1DELETE-\2"/>
        </present>
    </fileset>
</delete> 
```

第三，我想删除名称以相同方式匹配的所有目录（无论是否为空）。例如，“template/aaa/DELETE-ddd”及其下的所有文件都将被删除。我不确定如何在“源”树中构造与目录（*及其下的所有文件*）匹配的文件集，其中目录在“模板”树中具有 DELETE-* 文件。

Ant（1.7.1）甚至可以完成第三个任务吗？我最好不要编写任何自定义 ant 任务/选择器来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:09:42.070

似乎使这变得困难的根本问题是ant根据文件集目标目录中找到的文件驱动选择器/文件集。然而，通常情况下，人们会想要从 DELETE-* 标记文件列表中驱动东西。

到目前为止，我发现的最佳解决方案确实需要一些自定义代码。我选择了`<groovy>`任务，但也可以使用`<script>`。

要点：创建一个文件集，使用 groovy 添加一系列排除项，这些排除项使用 DELETE-* 标记跳过文件和目录，然后执行复制。这完成了我的问题的第二个和第三个任务。

```
<fileset id="source_files" dir="source"/>

<!-- add exclude patterns to fileset that will skip any files with a DELETE-* marker -->
<groovy><![CDATA[
    def excludes = []
    new File( "template" ).eachFileRecurse(){ File templateFile ->
        if( templateFile.name =~ /DELETE-*/ ){
            // file path relative to template dir
            def relativeFile = templateFile.toString().substring( "template".length() )
            // filename with DELETE- prefix removed
            def withoutPrefix = relativeFile.replaceFirst( "DELETE-", "")
            // add wildcard to match all files under directories
            def exclude = withoutPrefix + "/**"
            excludes << exclude
        }
    }
    def fileSet = project.getReference("source_files")
    fileSet.appendExcludes(excludes as String[])
]]></groovy>

<!-- create a baseline copy, excluding files with DELETE-* markers in the template directories -->
<copy todir="target">
    <fileset refid="source_files"/>
</copy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:03:07.113

要删除目录及其内容，请使用`delete with nested fileset`，即：

```
 <delete includeemptydirs="true">
  <fileset dir="your/root/directory" defaultexcludes="false">
   <include name="**/DELETE-*/**" />
  </fileset>
 </delete> 
```

使用属性`includeemptydirs="true"`目录也将被删除。

# html - 使用 Code Igniter 使用 html 和 css 格式化电子邮件

> ID：10198766
> 
> 赞同：0
> 
> 时间：2012-04-17T20:38:41.363
> 
> 标签：html, email, codeigniter

我想通过电子邮件使用 Codeigniter 发送一个简单的视图，以便电子邮件对用户来说看起来不错。我该怎么做呢？到目前为止，这是我的控制器中的代码。

```
public function test_email()
        {
            $message = $this->load->view('application/recommendation_email', '', TRUE);
            $this->load->library('email');          
            $this->email->from('xxxxxxx@gmail.com', 'something');
            $this->email->to('xxxxxxx@gmail.com'); 
            $this->email->subject('Letter of Recommendation Request');
            $this->email->message($message);
            $this->email->send();
        } 
```

目前它只是向我发送 html 代码。但我希望它像在浏览器中一样。这是我的html + css。

```
 <html>

    <body>
        <p>Dear Joe<?php //echo $name ?>,
        </p>

        <p>SOME TEXT
        </p>

        <a href="a reference">a reference
        </a><br><br><br>

        <p>Thanks,<br><br>
            The Team
        </p>
    </body>
</html>

<style type='text/css'>

body{
    font-family: "Lucida Grande";
    background-color: #fdfdfd;
}
a {
  color: #008ee8;
  text-decoration: none;
  outline: none;
}
a:hover {
  color: #ec8526;
  text-decoration: none;
}

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:43:33.510

您需要将`mailtype`配置项设置为`html`（默认为`text`）：

```
$this->email->mailtype('html'); 
```

您还可以通过这样的数组设置电子邮件配置项：

```
$config['mailtype'] = 'html';
// ...other config items as necessary

$this->email->initialize($config); 
```

此外，[根据文档](http://codeigniter.com/user_guide/libraries/email.html)：

> 如果您发送 HTML 电子邮件，您必须将其作为完整的网页发送。确保您没有任何相对链接或相对图像路径，否则它们将不起作用。

# javascript - jQuery 将 $this 传递给函数参数

> ID：10198768
> 
> 赞同：2
> 
> 时间：2012-04-17T20:38:49.353
> 
> 标签：javascript, jquery, this

我有：

```
<img id="leftBubble" class="bubbles" src="left.png" />
<img id="rightBubble" class="bubbles" src="right.png" /> 
```

像这样的悬停事件：

```
$(".bubbles").each(function(){
    $(this).hover(function() { 
        pause($(this));
    }, function() {
        play(4000, $(this));
    });
}); 
```

我的 pause() 函数似乎不起作用

```
function pause(pauseMe) {
    if (pauseMe == $("#leftBubble")) {
        clearTimeout(timer1);                        //this is never reached
    } else if (pauseMe == $("#rightBubble")) {
        clearTimeout(timer2);                        //nor this
    }
} 
```

任何想法让悬停事件通过 $this 作为暂停功能的参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:41:41.547

每次调用`$`，它都会返回一个不同的结果集对象，即使结果内容相同。你要做的检查是：

```
if (pauseMe.is("#leftBubble")) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T20:47:13.797

尝试如下，

```
function pause(pauseMe) {
    if (pauseMe == "leftBubble") {
        clearTimeout(timer1);
    } else if (pauseMe == "rightBubble") {
        clearTimeout(timer2);
    }
} 
```

在来电者中，

```
$(".bubbles").each(function(){
  $(this).hover(function() { 
    pause(this.id);
  }, function() {
    play(4000, $(this));
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:42:00.110

在 javascript 中，`this`每次输入新的函数定义时都会重新定义。如果要访问*外部* `this`，则需要在变量中保留对它的引用（我使用了`self`）变量。

```
$(".bubbles").each(function(){
    var self = this;
    $(this).hover(function() { 
        pause($(self));
    }, function() {
        play(4000, $(self));
    });
}); 
```

我不知道您在 jQuery 对象之间的比较是否有效。也许您可以比较 DOM 元素：`pauseMe[0] == $("#leftBubble")[0]`，或者，如前所述，ids。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:48:10.220

当您调用它时，它会生成与您上次调用`$( ... )`时生成的不同的新对象，具有相同的参数。`$( ... )`

无论如何，您无法将对象与`==`javascript 中的对象进行比较。`true`只有当它喜欢同一个对象时它才会返回。

```
a = {b:1}
c = {b:1}
d = c

a == b // false
d == c // true 
```

# xcode - Monotouch：创建旋转图像？

> ID：10198772
> 
> 赞同：0
> 
> 时间：2012-04-17T20:39:00.283
> 
> 标签：xcode, ios5, mono, xamarin.ios

我想创建两个方法... StartSpin 和 StopSpin。在 StartSpin 中，我需要一个 UIImageView 来旋转 360 度并循环它，直到我调用 StopSpin。

到目前为止，这是我的 StartSpin ......

```
private void StartSpin () {         
    UIView.Animate (
        1,
        0,
        UIViewAnimationOptions.Repeat,
        () => { 
            CGAffineTransform t = CGAffineTransform.MakeIdentity();
            t.Translate(0, 0);
            t.Rotate((float)(3.14));
            this._imageViewWait.Transform = t;
        },
        () => {}
    );
} 
```

这是我的两个问题...

1.  如何让它旋转 360 度？

2.  我应该在 StopSpin 方法中使用什么命令来停止旋转？

谢谢

魔精

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:32:09.640

要使图像旋转，您可以使用（旋转 1 度）：

```
CGAffineTransform rotate = CGAffineTransformMakeRotation( 1.0 / 180.0 * 3.14 );
[imageView setTransform:rotate]; 
```

要使图像旋转，只需创建一个持续调用此方法的计时器（并增加度数）。此外，如果您想继续旋转，请创建一个布尔值来跟踪。

要停止旋转，只需将 bool 值更改为 false。然后，继续更新，直到到达开头（度数为 360 或 0）并且 bool 值为 false。

如果您不想继续旋转直到图像回到原来的位置，只需消除`&& degrees == 0`

在代码中：

```
-(void)startSpinning {
    degrees = 0;
    continueSpinning = true;
    [self continueSpinning];
}

-(void)continueSpinning {
    degrees = (degrees + 1) % 360;

    CGAffineTransform rotate = CGAffineTransformMakeRotation( degrees / 180.0 * 3.14 );
    [imageView setTransform:rotate];

    if(!continueSpinning && degrees == 0) return;
    else [self performSelector:@selector(continueSpinning) withObject:nil afterDelay:0.1f];
}

-(void)stopSpinning {
    continueSpinning = false;
} 
```

# email - 在 DNN 中发送电子邮件

> ID：10198776
> 
> 赞同：3
> 
> 时间：2012-04-17T20:39:21.437
> 
> 标签：email, dotnetnuke, sendmail, send, dotnetnuke-module

我正在尝试在我正在制作的 DNN 模块中发送电子邮件。但是，虽然它没有崩溃，但电子邮件没有被发送。我认为这与我尝试使用的 From Email 有关。我不是 100% 确定我应该使用哪个电子邮件作为第一个参数。

```
Protected Sub Submit_Click(sender As Object, e As EventArgs) Handles Submit.Click
    DotNetNuke.Services.Mail.Mail.SendEmail("support@localhost", "myemail@site.com", "EmailTest", "Hello world!")
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:08:43.273

更可能的问题是您没有正确配置 SMTP 设置。要配置您的 SMTP 设置，请以主机身份登录。然后，转到主机 -> 设置并填写“SMTP 服务器设置”下的字段并保存。那里还有一个测试链接，以验证它们是否正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T14:02:14.963

这对聚会来说可能已经很晚了，但我经常使用 Mail.SendMail() 方法，然后像下面这样手动传递所有 STMP 信息，然后在调试时检查返回的消息。（从 DotNetNuke 5.5 开始）

```
 Dictionary<string, string> hostSettings = HostController.Instance.GetSettingsDictionary();
        string server = hostSettings["SMTPServer"];
        string authentication = hostSettings["SMTPAuthentication"];
        string password = hostSettings["SMTPPassword"];
        string username = hostSettings["SMTPUsername"];

        // using the Mail.SendMail() method allows for easier debugging.
        var message = Mail.SendMail(from, user.Email, String.Empty, subject, body, String.Empty, "HTML", server, authentication, username, password); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-01T19:26:10.333

游戏也迟到了，但我今天早些时候遇到了类似的问题......

DNN sendMail 或 sendEmail 方法自行处理异常，并将其添加到 DNN 日志中。不幸的是，它们从不将所述异常返回给您调用函数的主代码 - 因此您的代码执行得很好！

您可以进一步查看他们的异常表或 UI 中的管理日志，以获取有关您遇到的特定问题的更多信息。

我将代码更改为使用[System.Net](https://docs.microsoft.com/en-us/dotnet/api/system.net.mail?view=dotnet-plat-ext-5.0)发送电子邮件并从 DNN 中的 DotNetNuke.Entities.Host.Host 对象收集您需要的所有信息。这样，我们可以处理错误并让我们的代码解决它:) 我最终得到了这样的东西（它在 c# 中，但你可以在 VB.Net 中使用稍微不同的语法来做同样的事情）：

```
//make the email
MailMessage mail = new MailMessage("From@me.com","to@a.com,to@b.com,to@c.com");
mail.Subject = "test subject";
mail.Body = "actual email";

string dnnServerInfo = DotNetNuke.Entities.Host.Host.SMTPServer;
// The above looks like "server.com:port#", or "smtp.server.com:25"
//so we find the colon to get the server name, and port using the index below
int index = dnnServerInfo.IndexOf(':');

//make the SMPT Client
SmtpClient smtp = new SmtpClient();
smtp.Host = dnnServerInfo.Substring(0, index);
smtp.Port = Int32.Parse(dnnServerInfo.Substring(index + 1, dnnServerInfo.Length - index - 1));
smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
smtp.UseDefaultCredentials = false;
smtp.Credentials = new System.Net.NetworkCredential(DotNetNuke.Entities.Host.Host.SMTPUsername, DotNetNuke.Entities.Host.Host.SMTPPassword);
smtp.EnableSsl = DotNetNuke.Entities.Host.Host.EnableSMTPSSL;

//send the email
smtp.Send(mail); 
```

我使用了此处找到的“SendMail”中的部分原始代码来提出这个：[https ://stackoverflow.com/a/19515503/6659531](https://stackoverflow.com/a/19515503/6659531)

祝任何遇到这个的人好运:)

# jquery - JqueryMobile、AJAX 和 JSON

> ID：10198778
> 
> 赞同：0
> 
> 时间：2012-04-17T20:39:24.010
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 ajax 调用使用 JquerMobile 框架从服务器端获取一些值作为 JSON 对象。这在桌面 Chrome 浏览器中没有任何问题。这不适用于手机浏览器。指出我在这里做错的任何帮助都会有所帮助。脚本如下。

```
$("#showmore").live("click", function(event, param1){
    event.preventDefault();
    getUrl = $(this).attr('href');
    $.post(getUrl, function(data){  
        $('#sname').html(data.name);
    },"json");   
    return false;  
}); 
```

如果我在警告框中打印回调数据，我会得到当前页面的 HTML 内容！在桌面浏览器中，我得到了正确的值。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:06:20.347

我也有同样的问题。我只在 iPad 上遇到过这个问题，无法找到解决方法。不过，我能够找到解决方法。

不要依赖`href`属性，而是使用 a `data-attribute`, like `data-href`。将`data-href`属性设置为与属性相同并在 jQuery 代码中`href`引用该属性。`data-href`

`href`在某些版本的 Mobile Safari 中似乎存在一个错误，您无法获得正确的属性值。您使用 AJAX 请求加载同一页面的原因是因为`href`通过 JS 返回给您的值是空白的，指的是它的父文档。

JS——

```
$("#showmore").live("click", function(event, param1){
    var getUrl = $(this).attr('data-href');//no need to create a global variable, so use the `var` keyword here
    $.post(getUrl, function(data){  
        $('#sname').html(data.name);
    },"json");   
    return false;  
}); 
```

HTML --

```
<a data-href="foobar.html" href="foobar.html" id="showmore">SHOW MORE!</a> 
```

请注意，`return false`在 jQuery 事件处理程序中，在功能上与调用相同，`event.preventDefault()`并且`event.stopPropagation()`是同时进行的。

# weka - weka 中的 ARFF 输出根据是否增量保存而有所不同

> ID：10198782
> 
> 赞同：1
> 
> 时间：2012-04-17T20:39:42.590
> 
> 标签：weka, arff

下面是一个程序，它显示了如果来自 weka 的 ARFF 保护程序以增量模式写入，字符串是如何错误输出的。如果将参数传递给程序，则以下程序以增量模式运行，如果未传递参数，则以批处理模式运行。

请注意，在批处理模式下，ARFF 文件包含字符串...正常操作。在增量模式下，ARFF 文件包含整数而不是字符串……奇怪！

关于如何让 ARFF 格式化程序以增量格式输出字符串的任何想法？

```
import java.io.File;
import java.io.IOException;

import weka.core.Attribute;
import weka.core.FastVector;
import weka.core.Instance;
import weka.core.Instances;
import weka.core.converters.ArffSaver;
import weka.core.converters.Saver;

public class ArffTest {
    static Instances instances; 
    static ArffSaver saver;
    static boolean flag=false;

    public static void addData(String ticker, double price) throws IOException{
        int numAttr = instances.numAttributes(); // same for
        double[] vals = new double[numAttr]; 
        int i=0;
        vals[i++] = instances.attribute(0).addStringValue(ticker);
        vals[i++] = price;
        Instance instance = new Instance(1.0, vals);
        if (flag)
            saver.writeIncremental(instance);
        else
            instances.add(instance);
    }

    public static void main(String[] args) {
        if(args.length>0){
            flag=true;
        }
        FastVector atts = new FastVector();         // attributes
        atts.addElement(new Attribute("Ticker", (FastVector)null));// symbol
        atts.addElement(new Attribute("Price"));    // price that order exited at.

        instances = new Instances("Samples", atts, 0);  // create header
        saver = new ArffSaver();
        saver.setInstances(instances);
        if(flag)
            saver.setRetrieval(Saver.INCREMENTAL);

        try{
            saver.setFile(new File("test.arff"));
            addData("YY", 23.0);
            addData("XY", 24.0);
            addData("XX", 29.0);
            if(flag)
                saver.writeIncremental(null);
            else
                saver.writeBatch();
        }catch(Exception e){
            System.out.println("Exception");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T14:32:29.420

您忘记将新创建的实例添加到数据集。

```
Instance instance = new DenseInstance(1.0, vals);
instance.setDataset(instances); //Add instance!
if (flag)
   saver.writeIncremental(instance);
else
   instances.add(instance); 
```

实例必须有权访问数据集才能检索字符串属性。如果不是，它只会写出索引。

除此之外，我建议使用 Weka 3.7.6。Instance 现在是一个具有两个实现的接口。

干杯，穆基

# java - 部署 Java 程序并提供 JVM 参数的好方法是什么？

> ID：10198789
> 
> 赞同：2
> 
> 时间：2012-04-17T20:40:02.427
> 
> 标签：java, deployment, heap-memory, java-web-start

目前我一直将我的应用程序部署为 .jar 文件，因为每个操作系统的用户都可以双击它。但是，我现在需要增加最大堆大小，唯一的方法是将命令行参数 (-Xmx1g) 传递给 JVM。我希望可以将它包含在 jar 清单中，但事实并非如此。

所以现在我不得不在具有参数的 .jar 中包含一个 .bat 或 .csh 。似乎有更好的方法可以做到这一点？我不认为 Webstart 是一个好的选择，因为 .jar 旨在在用户目录中运行，它会在其中写出文件。该应用程序是一个桌面 GUI 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:42:50.297

Webstart 似乎是实现这一目标的好方法，如果您拥有正确的权限，则没有什么能阻止您读取/写入用户的文件系统。

它还提供了几个有趣的“功能”，包括：

*   透明地向用户推送升级的可能性
*   检查用户是否使用了正确版本的 JRE

在您的情况下，您只需要使用以下语法：

```
<j2se version="1.7+" java-vm-args="-Xmx1g" href="http://java.sun.com/products/autodl/j2se"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:54:22.000

不幸的是，无法在 jar 内的清单文件中指定 vmargs，因此您需要一种解决方法，例如：

*   创建一个脚本，使用指定的 vm args 启动 jar 文件
*   将您的 jar 包装在一个可执行文件中，该可执行文件将用作启动器
*   将您的 Java 代码编译为本机二进制文件

例如，第一个解决方案可以使用批处理或 shell 脚本轻松实现，而对于第二个解决方案，有几种可能有用的替代方案，例如前面提到的原生[Java Web Start](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)和作为跨平台 Java 可执行文件的[launch4j](http://launch4j.sourceforge.net/)包装。第三种解决方案可以在某些情况下实现，如果您的代码与[GNU 类路径库兼容，在这种情况下，您可以使用](http://www.gnu.org/software/classpath/)[GCJ](http://gcc.gnu.org/java/)编译为本机二进制文件。

# nginx - nginx有软退出吗？

> ID：10198790
> 
> 赞同：3
> 
> 时间：2012-04-17T20:40:08.410
> 
> 标签：nginx

有谁知道nginx是否支持软退出？这意味着它是否会一直运行直到所有连接都消失或超时（超过特定时间间隔）并且在此时间段内也不允许新连接？

例如：

```
nginx stop
nginx running (2 connections active and blocking any new connections)
nginx running (1 connection active)
nginx stopped (0 connections active) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:20:39.023

**男人 nginx**

```
 -s signal      Send signal to the master process. The argument signal can be
                one of: stop, quit, reopen, reload.

                The following table shows the corresponding system signals.

                stop    SIGTERM
                quit    SIGQUIT
                reopen  SIGUSR1
                reload  SIGHUP 
```

具体来说，您需要 SIGQUIT。用外行的话来说：

*   `stop`— 快速关机
*   `quit`— 优雅关机
*   `reload`— 重新加载配置文件
*   `reopen`— 重新打开日志文件

另请参阅： http: [//nginx.org/en/docs/control.html](http://nginx.org/en/docs/control.html)了解详细信息，[http](http://nginx.org/en/docs/beginners_guide.html#control) ://nginx.org/en/docs/beginners_guide.html#control快速参考。

# python - Python多处理：向所有进程发出事件信号的最快方法？

> ID：10198794
> 
> 赞同：3
> 
> 时间：2012-04-17T20:40:19.423
> 
> 标签：python, multiprocessing

我正在使用 python 的多处理库对多个进程进行蒙特卡罗模拟。这些进程基本上猜测某个对象，如果它满足某些条件，则将其添加到共享列表中。如果这个列表满足某些条件，我的计算就完成了。

我当前的代码如下所示：（没有不重要细节的伪代码）

```
mgr = Manager()
ns = mgr.Namespace()
ns.mylist = []
ns.othersharedstuff = x
killsig = mgr.Event()
processes = [ MyProcess(ns, killsig) for _ in range(8) ]
for p in processes: p.start()
for p in processes: p.join()
get data from ns.mylist()

def MyProcess.run(self):
    localdata = y
    while not killsig.is_set():
        x = guessObject()
        if x.meetsCondition():
            add x to ns.mylist and put local data into ns()
            if ns.mylist meets condition:
                killsig.set()
    put local data into ns() 
```

当我将 'while not killsig.is_set():' 替换为 'while True:' 时，我的模拟速度提高了大约 25%！（当然，除非它不再终止）

**有没有比使用信号更快的方法？**每个进程的未同步本地数据是否丢失并不重要，因此涉及 process.terminate() 的东西也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:46:22.327

既然你有一个包含所有子进程列表的原始进程，为什么不使用它来终止进程呢？我正在描绘这样的事情：

```
ns.othersharedstuff = x
killsig = mgr.Event()
processes = [ MyProcess(ns, killsig) for _ in range(8) ]
for p in processes: p.start()
while not killsig.isSet():
    time.sleep(0.01) # 10 milliseconds 
for p in processes: p.terminate()
get data from ns.mylist() 
```

然后你可以将while循环设置为`while true:`

# c# - 如何在 Windows 服务上设置权限

> ID：10198799
> 
> 赞同：2
> 
> 时间：2012-04-17T20:40:34.683
> 
> 标签：c#, windows-7, permissions, windows-services

所以我使用 C# 创建了一个 Windows 服务，并在 Visual Studio 中为它创建了一个安装程序。它设置为手动运行，因为我不希望它一直运行。然后我有另一个应用程序 (C# WPF)，它应该有一个选项来打开和关闭服务（服务本身创建一个 Web 服务，该服务反过来与我的 WPF 应用程序通信）。这在 Windows XP 中运行良好，但在 Windows 7 机器上测试它不会启动。令人惊讶的是，它确实抛出异常并崩溃，它什么也不做。我相信这是一个权限问题。如果我使用相同的 Windows 7 帐户访问服务控制面板，我也无法启动或停止服务。

所以我的问题是，有没有办法设置我的服务，以便普通用户帐户可以启动和停止它？有没有办法让我的安装程序自动执行此操作。

我不希望我的 WPF 应用程序以管理员身份运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:33:05.103

虽然我相信可以保护服务，以便普通用户可以启动和停止它，但我不建议这样做。这会造成很多复杂性，并且是造成混乱的潜在原因。我总是喜欢保持简单，尤其是在安装和安全方面。

所以，如果我们不能让用户启动和停止服务，我们可能需要让服务一直运行。由于您不希望该服务一直处于活动状态，因此我建议您为该服务提供自己的内部`Running`标志。设置为 true 时，服务处于活动状态并执行繁忙的操作，否则服务保持空闲状态。您可以使用您喜欢的 IPC 机制（套接字、命名管道、WCF 等）来允许用户切换此开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:49:38.890

Windows 8 具有允许服务按需启动的功能，基本上是为了响应某种触发器。但对于 Windows 7，您唯一真正的选择是将其设置为在启动时自动启动。您可以将其设置为延迟启动，这样它就不会增加 Windows 启动所需的时间。

普通用户无法启动和停止服务。

编辑：阅读上面评论中的链接对我来说听起来是因为这是用户启动和停止服务的全面能力。我认为这里的问题是关于如何为特定服务执行此操作。

此外，虽然可以将服务设置为以该特定用户身份运行，但这实际上意味着它仅适用于该特定用户，工作站上的其他用户将无法使用该应用程序，因为他们无法使用启动或停止服务，假设服务作为用户运行意味着用户可以控制它，但情况可能并非如此。

同样在阅读评论和其他答案时，我想知道是否任何可以运行该应用程序的用户都可以使用该服务。也就是说，如果用户 A 登录到工作站并启动此应用程序（以及服务），将其锁定并离开，当用户 B 登录并尝试运行相同的服务时会发生什么？该服务是否可以同时支持多个用户，或者如果该服务被多次运行的应用程序使用，那么有趣的事情会开始发生。

这听起来确实像是希望在应用程序启动时启动背景。该线程（或多个线程）将完成服务的工作，并且就其性质而言，将在应用程序结束时结束。当然，问题中的更多细节将有助于给出更好的答案。

当然，如果它适合作为服务，我认为没有理由不提供具有睡眠工作线程的服务，以及另一个充当生产者的计时器线程，以检查是否有工作要做。

# php - php exec（）和tesseract去''无法打开输入文件'

> ID：10198801
> 
> 赞同：1
> 
> 时间：2012-04-17T20:40:50.703
> 
> 标签：php, exec, tesseract

我使用 Ghostscript 将 PDF 文件中的图像剥离为 jpg 并运行 Tesseract 以保存 txt 内容，如下所示：

*   Ghostscript 位于 c:\engine\gs\
*   Tesseract 位于 c:\engine\tesseract\
*   网页位于 pdf/jpg/txt 目录 = 文件/tmp/

代码：

```
$pathgs = "c:\\engine\\gs\\";
$pathtess = "c:\\engine\\tesseract\\";
$pathfile = "file/tmp/"

// Strip images
putenv("PATH=".$pathgs);
$exec = "gs -dNOPAUSE -sDEVICE=jpeg -r300 -sOutputFile=".$pathfile."strip%d.jpg ".$pathfile."upload.pdf -q -c quit";
shell_exec($exec);

// OCR
putenv("PATH=".$pathtess);
$exec = "tesseract.exe '".$pathfile."strip1.jpg' '".$pathfile."ocr' -l eng";
exec($exec, $msg);
print_r($msg);
echo file_get_contents($pathfile."ocr.txt"); 
```

剥离图像（只有 1 页）工作正常，但 Tesseract 回应：

```
Array
  (
    [0] => Tesseract Open Source OCR Engine v3.01 with Leptonica
    [1] => Cannot open input file: 'file/tmp/strip1.jpg'
  ) 
```

并且没有生成 ocr.txt 文件，从而导致 PHP 中出现“打开流失败”错误。

*   将 strip1.jpg 复制到 c:/engine/tesseract/ 文件夹并从命令运行 Tesseract (tesseract strip1.jpg ocr.txt -l eng) 运行没有任何问题。
*   用 exec(c:/engine/tesseract/tesseract ... ) 替换 putenv() 引用会返回 am 错误
*   我将 strip1.jpg 保存在 Tesseract 文件夹中并运行 exec(tesseract 'c:/engine/tesseract/strip1.jpg' ... ) 返回 am 错误
*   去掉 path/strip1.jpg 周围的撇号会返回一个空数组作为消息，并且不会创建 ocr.txt 文件。
*   将命令直接写入 exec() 引用而不是使用 $exec 不会进行更改。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:20:12.617

Halfer，你让我开心:-)

与您帖子中描述的方式不完全相同，但如下所示：

```
$path = str_replace("index.php", "../".$pathfile, $_SERVER['SCRIPT_FILENAME']);

$descriptors = array(
   0 => array("pipe", "r"),
   1 => array("pipe", "w"),
   2 => array("pipe", "w")
);
$cwd = $pathtess;
$command = "tesseract ".$path."strip1.jpg" ".$path."ocr -l eng";

$process = proc_open($command, $descriptors, $pipes, $cwd);

if(is_resource($process)) {
    fclose($pipes[0]);
    fclose($pipes[1]);
    fclose($pipes[2]);
    proc_close($process);
}

echo file_get_contents($path."ocr.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:50:27.037

也许 PHP 中缺少的环境变量是这里的问题。看看[我的问题](https://stackoverflow.com/questions/9967217/inkscape-inside-php-apache-doesnt-render-fonts-to-png)，看看是否设置`HOME`或`PATH`解决这个问题？

# php - 如何使用 Codeigniter/PHP 将文件上传到亚马逊 S3？

> ID：10198806
> 
> 赞同：4
> 
> 时间：2012-04-17T20:41:17.380
> 
> 标签：php, codeigniter, file-upload, amazon-s3

我正在尝试将文件上传到我的 Amazon S3 存储桶。我的朋友过去在我们的网站上进行过这项工作，但一年后它被破坏了，我不知道出了什么问题。我们使用的是[Geoff gaudreault](https://twitter.com/neurofuzzy)开发的[S3 PHP 库](http://www.neurofuzzy.net/2006/08/26/amazon-s3-php-class-update/)。

这个库对我来说看起来很简单，真的看起来有一个关键功能：`putObject()`.

不幸的是，我什至没有走出大门。我收到以下错误消息： `Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.`

这是我上传表单的codeigniter PHP `action`：

```
 function s3(){

    $config['upload_path'] = $_SERVER["DOCUMENT_ROOT"].'/temp/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '1000000';
    $config['max_width']  = '1024000';
    $config['max_height']  = '768000';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        print_r($error);
        echo 'failure';
    }
    else
    {
       $data = array('upload_data' => $this->upload->data()); 
        $fn = $data['file_name'];
        $type = substr($fn, strrpos($fn, '.') + 1);

    $this->load->library('s3');
    $temp_file_path = $_SERVER["DOCUMENT_ROOT"]."/temp/" . $data['file_name'];
    $contents = read_file($temp_file_path); // will this blow up or timeout for large files?! 
    $newFileName = uniqid().".".substr($temp_file_path, strrpos($temp_file_path, '.') + 1);
     $contentPath = "mysite.com/Images"; 

    $this->s3->putObject($newFileName, $contents, $contentPath, 'private', $type);
    echo 'success';
    }
} 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:42:11.513

我切换到[另一个 S3 PHP 库](http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/)，也称为 S3.php，它是这个非常好的 Netuts 教程源代码的一部分。

只需将我的 AWS 密钥和存储桶名称插入演示的 page.php 文件，我就可以在 2 分钟内上传到我的存储桶。所以这个教程超级简单。非常令人兴奋！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T11:32:00.047

在代码点火器中

这里链接[上传](http://myphpinformation.blogspot.in/2017/06/how-to-image-and-file-upload-using-aws.html)和[删除](http://myphpinformation.blogspot.in/2017/06/how-to-file-delete-in-s3-bucket-in-aws.html)s3 存储桶中的图像

```
<?php

function profile_upload()
{
    //print_r($_FILES);
    if ($this->session->userdata('user_login')) {

        $file = $_FILES['agent_profile_file']['tmp_name'];

        if (file_exists($file)) {
            $allowedExts = array("gif", "jpeg", "jpg", "png");
            $typefile    = explode(".", $_FILES["agent_profile_file"]["name"]);
            $extension   = end($typefile);

            if (!in_array(strtolower($extension), $allowedExts)) {
                //not image
                $data['message'] = "images";
            } else {
                $userid = $this->session->userdata['user_login']['userid'];

                $full_path = "agent_image/" . $userid . "/profileImg/";

                /*if(!is_dir($full_path)){
                mkdir($full_path, 0777, true);
                }*/
                $path = $_FILES['agent_profile_file']['tmp_name'];

                $image_name = $full_path . preg_replace("/[^a-z0-9\._]+/", "-", strtolower(uniqid() . $_FILES['agent_profile_file']['name']));
                //move_uploaded_file($path,$image_name);

                $data['message'] = "sucess";

                $s3_bucket = s3_bucket_upload($path, $image_name);

                if ($s3_bucket['message'] == "sucess") {
                    $data['imagename'] = $s3_bucket['imagepath'];
                    $data['imagepath'] = $s3_bucket['imagename'];
                }

                //print_r($imagesizedata);
                //image
                //use $imagesizedata to get extra info
            }
        } else {
            //not file
            $data['message'] = "images";
        }

    } else {
        $data['message'] = "login";
    }
    echo json_encode($data);
    //$file_name2 = preg_replace("/ /", "-", $file_name);
}

// Helper file add code
// image compress code
function compress($source, $destination, $quality)
{
    ob_start();
    $info = getimagesize($source);

    if ($info['mime'] == 'image/jpeg') {
        $image = imagecreatefromjpeg($source);
    } elseif ($info['mime'] == 'image/gif') {
        $image = imagecreatefromgif($source);
    } elseif ($info['mime'] == 'image/png') {
        $image = imagecreatefrompng($source);
    }

    $filename = tempnam(sys_get_temp_dir(), "beyondbroker");

    imagejpeg($image, $filename, $quality);

    //ob_get_contents();
    $imagedata = ob_end_clean();
    return $filename;
}

// type for if image then it will reduce size
// site for it in web of mobile because mobile webservice image will in base 64
// $tempth will file temp path
// $image_path will file where to save path

function s3_bucket_upload($temppath, $image_path, $type = "image", $site = "web")
{
    $bucket = "bucket-name";

    $data = array();

    $data['message'] = "false";

    // For website only
    if ($site == "web") {
        if ($type == "image") {
            $file_Path = compress($temppath, $image_path, 90);
        } else {
            $file_Path = $temppath;
        }
    }

    try {
        $s3Client = new S3Client([
            'version'     => 'latest',
            'region'      => 'us-west-2',
            'credentials' => [
                'key'    => 'aws-key',
                'secret' => 'aws-secretkey',
            ],
        ]);

        // For website only
        if ($site == "web") {

            $result = $s3Client->putObject([
                'Bucket'     => $bucket,
                'Key'        => $image_path,
                'SourceFile' => $file_Path,
                //'body'=> $file_Path,
                'ACL'        => 'public-read',
                //'StorageClass' => 'REDUCED_REDUNDANCY',
            ]);

            $data['message']   = "sucess";
            $data['imagename'] = $image_path;
            $data['imagepath'] = $result['ObjectURL'];
        } else {
            // $tmp = base64_decode($base64);
            $upload            = $s3Client->upload($bucket, $image_path, $temppath, 'public-read');
            $data['message']   = "sucess";
            $data['imagepath'] = $upload->get('ObjectURL');
        }

    } catch (Exception $e) {
        $data['message'] = "false";
        // echo $e->getMessage() . "\n";
    }

    return $data;
} 
```

# java - 为什么不在屏幕上打印呢？

> ID：10198810
> 
> 赞同：-2
> 
> 时间：2012-04-17T20:41:37.303
> 
> 标签：java, user-interface

我遵循了这些教程并制作了以下内容。 [http://www.youtube.com/playlist?list=PL54DB126285ED0420](http://www.youtube.com/playlist?list=PL54DB126285ED0420)

主.java：

```
public class Main extends JFrame {

  GamePanel gp;

  public Main() {
    gp = new GamePanel();
    setSize(500, 400);
    setVisible(true);
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    add(gp);
  }

  public static void main(String[] args) {
    Main m = new Main();
  }
} 
```

游戏面板.java：

```
public class GamePanel extends JPanel implements Runnable {

  // Double Buffering Variables
  private Image dbImage;
  private Graphics dbg;

  // JPanel Variables
  static final int GWIDTH = 500, GHEIGHT = 400;
  static final Dimension gameDim = new Dimension(GWIDTH, GHEIGHT);

  // Game Variables
  private Thread game;
  private volatile boolean running = false;

  public GamePanel() {
    setPreferredSize(gameDim);
    setBackground(Color.WHITE);
    setFocusable(true);
    requestFocus();

    // Handle all key inputs from the user
    addKeyListener(new KeyAdapter() {
      @Override public void keyPressed(KeyEvent e) {}
      @Override public void keyReleased(KeyEvent e) {}
      @Override public void keyTyped(KeyEvent e) {}
    });
  }

  public void run() {
    while (running) {
      gameUpdate();
      gameRender();
      paintScreen();
    }
  }// END run

  private void gameUpdate() {
    if (running && game != null) {
      // update the game state
    }
  }

  private void gameRender() {
    // create the buffer
    if (dbImage == null) {
      dbImage = createImage(GWIDTH, GHEIGHT);
      if (dbImage == null) {
        System.err.println("dbImage is still null!!!");
        return;
      } else {
        dbg = dbImage.getGraphics();
      }
    }

    // Clear the screen
    dbg.setColor(Color.WHITE);
    dbg.fillRect(0, 0, GWIDTH, GHEIGHT);

    // Draw the game elements
    draw(dbg);
  }

  // draw all game content
  public void draw(Graphics g) {}

  private void paintScreen() {
    Graphics g;
    try {
      g = this.getGraphics();

      if (dbImage != null && g != null)
        g.drawImage(dbImage, 0, 0, null);

      // For Linux
      Toolkit.getDefaultToolkit().sync();
      g.dispose();

    } catch (Exception e) {
      System.err.println(e);
    }
  }

  public void addNotify() {
    super.addNotify();
    startGame();
  }

  private void startGame() {
    if (game == null || !running) {
      game = new Thread(this);
      game.start();
      running = true;
    }
  }

  public void stopGame() {
    if (running)
      running = false;
  }

  private void log(String s) {
    System.out.println(s);
  }
} 
```

它应该只在屏幕上打印一个“Hello World”字符串，但它没有执行。我已经检查了几次代码，但看不出有什么问题。

那么缺少什么导致它不显示字符串。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:38:57.187

好的。终于刚刚找到了。

在我的 Main.java 中，我会将`add(gp);`代码放在顶部。因为基本上它正在下降。

PS 再次提及。不小心把draw方法的内容擦掉了。傻我。对此感到抱歉。它应该`g.drawString("Hello World!", 100, 100);`在里面。

谢谢。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T20:49:40.683

> 那么缺少什么导致它不显示字符串。

对于初学者来说，“Hello World”字符串本身是不存在的。

我建议您再次阅读您引用的教程，因为您似乎是 Java 新手并且需要更多练习。

# html - HTML5 游戏，用户运动概念

> ID：10198811
> 
> 赞同：1
> 
> 时间：2012-04-17T20:41:37.787
> 
> 标签：html, google-app-engine, canvas, channel-api

我刚开始学习 HTML5 canvas 和 Google App Engine 的 Channel API。

我基于等轴测图构建了一个简单的游戏演示。现在我想实现角色移动，但我想知道我应该如何实现它。

当前演示：[http ://cheukalex.appspot.com](http://cheukalex.appspot.com)

这就是我认为的实现方式：

客户将处理移动。按下箭头键后，客户端将进行移动，然后将新坐标发送到服务器，然后将其广播给服务器上的其他用户以更新角色的位置。

我想到的问题：

1.  如果我想实现“移动速度”怎么办，例如用户走五个方格的速度有多快。每次移动之间的延迟将在客户端完成。但这会安全吗？因为javascript很容易编辑。

2.  我该如何处理延迟？如果我构建了一个简单的追逐标签游戏，我将如何同步用户这样的情况，一个人看起来他们“标记”另一个用户，但另一个用户看到他落后 1-2 个方格，不会发生？

* * *

**编辑：** @nycynik，你是对的，延迟大约是 200 毫秒。我在这里测试过。

延迟测试：[http ://cheukalex.appspot.com/latency](http://cheukalex.appspot.com/latency)

那是它将获得的最小延迟。200ms 相当快。那么可能是我的代码很慢？

我是如何实现整个游戏的。

1.  客户进入网站
2.  服务器创建令牌，打开通道，在数据库中存储客户端数据（通道 id）
3.  ....一些逻辑
4.  当客户端按下箭头键时，它会通知服务器客户端移动了哪个方向以及方向
5.  服务器接收移动，执行逻辑，循环通过数据库（仅当前在线客户端），向所有客户端广播消息，以 json 格式向所有客户端发送地图上每个客户端的位置。然后客户“移动”。

这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:48:34.860

这应该是对第一个答案的评论，但它不适合。

响应时间您可能无能为力，因为网络延迟现在确实是一个问题。也许您可以只在用户体验方面工作。为了让用户“可以接受”延迟，为什么不添加动画呢？

例如，当用户按下箭头键时，马可能看起来像是在缓慢后退并准备跳跃（在幕后您正在通过 Channel API 发送请求）。当您收到服务器的响应时，马就可以完成跳跃并降落在另一个位置。

尽管仍然存在延迟问题，但如果延迟不那么明显，您的用户可能会发现它“可以接受”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:48:57.360

> 如果我想实现“移动速度”怎么办

我建议将您的移动发送到服务器，并让服务器刷新板。这将使每个玩家保持同步。

> 我该如何处理延迟？

如果您愿意，您可以要求所有客户端在服务器发送位置刷新之前报告，这将强制一致性，但将是一种 LCD 方法。我认为对于这种类型的游戏，应该可以正常工作。

编辑：最初我认为它会像网络套接字一样工作，但看起来你的结果要慢得多。它可能是代码中的某些东西，也可能是技术本身，但对于您正在尝试做的事情来说，它似乎不够快。如果这是一场国际象棋游戏，你会没事的。但是对于这种类型的游戏，您需要更快的往返工作。

这篇文章指的是时间预期

> Channel API 发送速度在 100-200ms 量级；

[使用新的频道创建限制](https://stackoverflow.com/questions/8341104/working-with-new-channel-creation-limits)

那应该比你得到的更快。

# java - 如何保持对在子线程上创建的实例的引用

> ID：10198814
> 
> 赞同：1
> 
> 时间：2012-04-17T20:41:43.763
> 
> 标签：java, multithreading

我有一个类，“myClass”，在“main”中有这个代码：

```
 ExecutorService service;  
 List<Future<Integer>> tasks = new ArrayList<Future<Integer>>();  
 service = Executors.newFixedThreadPool(numOfThreads); 
```

然后我启动每个线程：

```
 for (int i = numOfThreads; i > 0; --i) {   
     tasks.add(service.submit(new StringSearcher(file, offset,threadChankSize, args[1],buffSize)));          
 }  
 for (Future<Integer> task : tasks) {         
    result += task.get();         
 } 
```

该类有“_res”成员，我需要在程序结束时获取（在所有线程终止之后）为了做到这一点，我创建了一个返回“_res”的方法“getRes”，但问题是我没有在线程终止后可以访问该类。有没有办法保持“main”对每个线程中创建的实例的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:46:56.363

你可以这样做：

```
 List<StringSearcher> searchers = new ArrayList<StringSearcher>();

 for (int i = numOfThreads; i > 0; --i) {   
     StringSearcher task = new StringSearcher(file, offset,threadChankSize, args[1],buffSize);
     searchers.add(task);
     tasks.add(service.submit(task));          
 }  
 for (Future<Integer> task : tasks) {         
    result += task.get();         
 }
 for (StringSearcher searcher : searchers){
    /*do stuff with*/ searcher.getRes();
 } 
```

# iphone - Obj-C，在显示 iAd 时调整我的 UITableview 的高度

> ID：10198818
> 
> 赞同：0
> 
> 时间：2012-04-17T20:42:02.050
> 
> 标签：iphone, objective-c, ios, cocoa-touch

当 iAd 显示时，我正在尝试调整表格视图的高度。

我正在使用以下代码。

```
CGRect bounds = [tableView bounds];
[tableView setBounds:CGRectMake(bounds.origin.x, 
                            bounds.origin.y, 
                            bounds.size.width, 
                            bounds.size.height - 100)]; 
```

我也尝试过框架而不是边界。

我知道 100 比我的广告的高度大，但看起来它从顶部和底部取下 50 并将表格垂直对齐在中心。而不是从底部减去 100。我的广告显示在底部。

我想知道是否可以自动调整大小，我从界面生成器中取出了底部的红色标记，但这并没有解决问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:52:44.823

试试这个：

```
CGRect bounds = [tableView bounds];
[tableView setBounds:CGRectMake(bounds.origin.x, 
                            bounds.origin.y - iAdHeight/2, 
                            bounds.size.width, 
                            bounds.size.height - iAdHeight)]; // Replace iAdHeight with height of iAd 
```

您的代码不起作用，因为表格视图的原点位于中间，因此您必须在仅在底部垂直收缩时调整 y 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:53:41.860

这将更改 tableView 的框架，使其底部小 100px。（您可以通过这种方式更改上、左、下、右，并使用负值再次增加大小）。

```
tableView.frame = UIEdgeInsetsInsetRect(tableView.frame, UIEdgeInsetsMake(0, 0, 100, 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:54:40.500

不要混淆`bounds`和`frame`。它们相似，但非常不同，如果您在更改`bounds`. 我通常只设置框架的边界，以获得初始大小。对于其他一切，我通常只是设置框架：

```
CGRect tableFrame = tableView.frame;
CGFloat iAdHeight = 50.f;
[tableView setFrame:CGRectMake(tableFrame.origin.x,
                               tableFrame.origin.y,
                               tableFrame.size.width,
                               tableFrame.size.height - iAdHeight)]; 
```

除非您做了一些奇怪的事情，例如更改表格视图上的锚点，否则这应该有效。

有关 和 之间的差异以及其他一些很棒的东西的良好参考`bounds`，`frame`请`UIKit`观看 WWDC 2011 视频 Session 121 - “Understanding UIKit Rendering”。

# python - 将所有调用和输出记录到文件的 Bash python 包装脚本

> ID：10198823
> 
> 赞同：-3
> 
> 时间：2012-04-17T20:42:09.797
> 
> 标签：python, bash

我正在寻找通用 bash（也可能是 python）包装器，它可以用来代替原始程序被调用，并且将调用原始程序并且：

*   记录调用命令行
*   记录标准输出和标准错误，但不对调用者隐藏它们
*   透明 - 与被调用程序具有相同的标准输出
*   返回被调用程序的退出代码

答案将是一个功能脚本，这里是“原型”

```
#!/bin/bash
LOGFILE=history.log
ORIGINAL=ls
touch ${LOGFILE}
echo "started" >>"${LOGFILE}"
ls "$@"
echo "ended with $?" >>"${LOGFILE}” 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:20:42.413

也在[https://gist.github.com/2411440](https://gist.github.com/2411440)

```
#!/bin/bash
# install:
# * rename the original script to script.original
# * rename the wrapper.sh to script
# * DONE! all calls are going to be logged now
TIMESTAMP=`date -u +"%Y-%m-%dT%H:%M:%SZ"`

ME=`basename $0`
WRAPPED_COMMAND=$ME.original

echo "${TIMESTAMP} exec: $0 $@" >>${ME}.stdout.log

#${WRAPPED_COMMAND} "$@"|tee -a "${LOGFILE}"
${WRAPPED_COMMAND} "$@" > >(tee -a ${ME}.stdout.log) 2> >(tee -a ${ME}.stderr.tmp >&2)
RET=$?
TIMESTAMP_END=`date -u +"%Y-%m-%dT%H:%M:%SZ"`

if [ -s ${ME}.stderr.tmp ] # if we have something logged to stderr (not usual)
then
    echo "${TIMESTAMP} exec: $0 $@" >>${ME}.stderr.log
    cat  >> ${ME}.stderr.log
    echo "${TIMESTAMP_END} retured: ${RET}" >>${ME}.stderr.log
fi
rm  -f "${ME}.stderr.tmp"

echo "${TIMESTAMP_END} retured: ${RET}" >>${ME}.stdout.log
exit $RET 
```

# javascript - 带有引导工具提示的 Rails POST 链接

> ID：10198839
> 
> 赞同：0
> 
> 时间：2012-04-17T20:43:11.873
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

我正在尝试包含`POST`链接的工具提示。

`GET`使用工具提示制作常规链接可以正常工作：

```
%a{"href" => "#", "data-original-title" => "#{pluralize poem.score, 'vote'}", "data-placement" => "right", :rel => "tooltip"} 
```

但是，我很确定无法`POST`为上述链接指定方法。

我可以使用 Rails 链接构建器将工具提示附加到链接吗？这可能吗？以下示例不起作用 - 没有工具提示。

```
=link_to "^", votes_path(vote: {poem_id: poem.id}), method: :post, "data-original-title" => "Vote up. Current score: #{poem.score}", "data-placement" => "right", :rel => "tooltip" 
```

如果那不可能，javascript 解决方案是什么？

# 解决了

我没有以正确的方式指定 POST 方法。这是一个解决方案：

```
%a{"href" => "#{votes_url(vote: {poem_id: poem.id})}", "data-method" => "post", "data-original-title" => "#{pluralize poem.score, 'vote'}; click to vote.", "data-placement" => "right", :rel => "tooltip"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:07:32.410

我没有以正确的方式指定 POST 方法。这是一个解决方案：

`%a{"href" => "#{votes_url(vote: {poem_id: poem.id})}", "data-method" => "post", "data-original-title" => "#{pluralize poem.score, 'vote'}; click to vote.", "data-placement" => "right", :rel => "tooltip"}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:49:54.083

试试这个：

```
=link_to "^", votes_path(vote: {poem_id: poem.id}), 
    :html => {:method => :post, 
     "data-original-title" => "Vote up. Current score: #{poem.score}", 
     "data-placement" => "right", :rel => "tooltip" } 
```

# php - 等待所有 pid 在 php 中退出

> ID：10198844
> 
> 赞同：7
> 
> 时间：2012-04-17T20:43:41.563
> 
> 标签：php, fork

我的问题是这个。我正在分叉一个进程，以便我可以加快对磁盘上文件的访问时间。我将这些文件中的任何数据存储在本地桌面上的 tmp 文件中。理想情况下，在所有进程完成后，我需要访问该 tmp 文件并将该数据放入一个数组中。然后我取消链接 tmp 文件，因为它不再需要。我的问题是 pcntl_wait() 似乎并没有真正等到所有子进程都完成后再继续进行最后一组操作。所以我最终在一些随机过程完成之前取消了该文件的链接。

我似乎找不到一种可靠的方法来等待所有进程干净地退出然后访问我的数据。

```
 $numChild       = 0;    
    $maxChild       = 20;   // max number of forked processes.

    // get a list of "availableCabs"

    foreach ($availableCabs as $cab) {

            // fork the process
            $pids[$numChild] = pcntl_fork();

            if (!$pids[$numChild]) {

                    // do some work     
                    exit(0);

            } else {

                    $numChild++;
                    if ($numChild == $maxChild) {

                            pcntl_wait($status);
                            $numChild--;

                    } 

            } // end fork   

    }

    // Below is where things fall apart. I need to be able to print the complete serialized data. but several child processes don't actually exit before i unlink the file.

    $dataFile = fopen($pid, 'r');

    while(($values = fgetcsv($dataFile,',')) !== FALSE) {
            $fvalues[] = $values;
    }

    print serialize($fvalues);

    fclose($dataFile);
    unlink($file); 
```

请注意，我留下了很多关于我实际在做什么的代码，如果我们需要发布那不是问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T21:16:34.380

尝试重组你的代码，让你有两个循环——一个产生进程，一个等待它们完成。您还应该使用[`pcntl_waitpid()`](http://uk.php.net/manual/en/function.pcntl-waitpid.php)来检查特定的进程 ID，而不是您当前使用的简单子计数方法。

像这样的东西：

```
<?php

  $maxChildren = 20;   // Max number of forked processes
  $pids = array();     // Child process tracking array

  // Get a list of "availableCabs"

  foreach ($availableCabs as $cab) {

    // Limit the number of child processes
    // If $maxChildren or more processes exist, wait until one exits
    if (count($pids) >= $maxChildren) {
      $pid = pcntl_waitpid(-1, $status);
      unset($pids[$pid]); // Remove PID that exited from the list
    }

    // Fork the process
    $pid = pcntl_fork();

    if ($pid) { // Parent

      if ($pid < 0) {
        // Unable to fork process, handle error here
        continue;
      } else {
        // Add child PID to tracker array
        // Use PID as key for easy use of unset()
        $pids[$pid] = $pid;
      }

    } else { // Child

      // If you aren't doing this already, consider using include() here - it
      // will keep the code in the parent script more readable and separate
      // the logic for the parent and children

      exit(0);

    }

  }

  // Now wait for the child processes to exit. This approach may seem overly
  // simple, but because of the way it works it will have the effect of
  // waiting until the last process exits and pretty much no longer
  foreach ($pids as $pid) {
    pcntl_waitpid($pid, $status);
    unset($pids[$pid]);
  }

  // Now the parent process can do it's cleanup of the results 
```

# ruby-on-rails-3 - 为什么 url 通常是小写的，单词用破折号分隔，没有特殊字符？

> ID：10198845
> 
> 赞同：0
> 
> 时间：2012-04-17T20:43:47.853
> 
> 标签：ruby-on-rails-3, parameters, uri

例如，Rails`parameterize`方法将创建一个字符串，如下所示：

"hello-there-joe-smith" == "你好 Joe.Smith".parameterize

由于遗留原因，我正在处理的项目需要大写字母和句点在特定 URL 参数中可用。

为什么这会成为问题？

### 澄清

我所说的 url 类型是用来代替 id 的，通常称为 slug。

具有以下 url 的 Rails 应用程序会出现任何问题：`http://example.com/Smith.Joe`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:50:03.023

这在 SEO 和浏览器缓存（以及因此的性能）方面都是一个问题

1.  搜索引擎区分大小写，因此不同大小写的相同 URL 将被视为两个 URL。

2.  像 IE 的缓存这样的浏览器是区分大小写的，例如。如果您尝试以 MYPAGE.aspx 的形式访问您的页面，并且在代码中的某个位置将其编写为 mypage.aspx，那么 IE 会将它们视为两个不同的页面，而不是从 cahce 获取它，而是从服务器获取它。

3.  破折号应该没问题，但应该避免使用下划线：http: [//www.mattcutts.com/blog/dashes-vs-underscores/](http://www.mattcutts.com/blog/dashes-vs-underscores/)

# c++ - linux - 从 /proc/partitions 内容获取我可以“ls”的内容

> ID：10198855
> 
> 赞同：2
> 
> 时间：2012-04-17T20:44:35.483
> 
> 标签：c++, linux, filesystems

我正在写（又一个）文件管理器（来学习东西：）并且有一个愚蠢/愚蠢的块。

在 Linux 上，要枚举可以包含文件的存储设备，我认为最好的方法是解析 /proc/partitions 文件的内容并提取 /dev/sda* 条目。（对吗？）但是，如何将 /dev/sda* 映射到我可以通过编程方式探索以获取目录内容的内容？我计划使用 boost/filesystem，但由于我不能 ls /dev/sda 我假设我不能使用 boost 来迭代它。

概要：如何将 /dev/sda* 转换为我可以“ls”的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:48:12.337

即兴发挥，我会说`mount`没有参数的输出可能是一个更快的选择。这应该会显示已安装的文件系统和设备，而 /proc 会显示所有设备和分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:53:14.450

该设备`/dev/sda*`是块设备，需要挂载。为了能够做到`ls`这一点，您需要有一些可以解释文件系统类型的东西。第一步：识别文件系统类型，在原始代码中，硬盘驱动器第一段的分区表中通常有一个标头代码，这将是`/dev/sda`在 Linux 系统上，它类似于`ext3`

接下来，您需要编写或使用一个库来与该文件系统交互，如果您获得 Linux 的内核源代码，它有很多用于与通用文件系统交互的 API 代码，以及标准 POSIX 调用的包装器，这正是您所需要的重新寻找。诸如使用系统调用来检索有关已安装文件系统的信息之类的事情`ls`，`cwd`磁盘是块（或有时是字符）设备，您需要能够与之交谈并使用相同的语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:54:57.817

我认为您误解`/dev/sd*`了程序的实际含义。它们是*设备*而不是目录。您使用该`mount`命令告诉操作系统将设备“解释”为文件系统，并将其附加到某个位置（root 或其他）。正是这一步使它成为文件系统某处的“目录”。因此，除了原始 I/O 命令（您不想这样做）之外，安装文件系统，然后尝试探索它。

这有点像打开一个文件。当你这样做时，操作系统会为你的程序提供一个字节流，你可以通过它随机访问文件。但是在磁盘上，该文件实际上可能分散在整个硬盘驱动器（或任何设备）上。但是操作系统正在将其“制作”成一种“不错”的格式，让您可以透明地处理。访问目录/文件列表时，磁盘本身也是如此。

我希望我的示例更清楚地说明了为什么您要尝试做的事情并不像您想象的那么简单。

# .net - 测试 NullReferenceException（不测试无）

> ID：10198861
> 
> 赞同：0
> 
> 时间：2012-04-17T20:44:38.673
> 
> 标签：.net, null, nullreferenceexception, nothing

我有一门别人写的课，我没有源代码。它有一个由字符串`UM`支持的属性。`_UM`在某些情况下`_UM`是`Nothing`. 我希望这`UM`也是`Nothing`如此，但是当我检查（使用 Quick Watch）它显示为`NullReferenceException`. 当我尝试测试时，`Nothing`我的`NullReferenceException`主代码中出现了问题。我怎样才能捕捉到这种情况，以便我能够正确处理它？

```
If Foo.UM Is Nothing Then
    DoSomething()
End If 
```

...抛出一个`NullReferenceException`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:50:28.240

该属性可能不仅仅返回 _UM 字段。可能以某种方式使用它，并没有考虑到它可能是`null`. 你可以做这样的事情来处理它：

```
Dim obj = Nothing
Try
    obj = Foo.UM
Catch ex As NullReferenceException
End Try
If obj Is Nothing Then
    DoSomething()
End If 
```

# .net - 如何通过从另一个表中选择一些值来插入数据

> ID：10198862
> 
> 赞同：0
> 
> 时间：2012-04-17T20:44:46.473
> 
> 标签：.net, sql, sql-server-2005

我需要根据用户提供的值选择所需的部分值来插入数据。

在一个场景中，客户将提供`staff_name, customer_name`和`product_name`。`INSERT`将从其他表中查找必要的数据以提取相应的 id 。

这是我目前拥有的

```
INSERT INTO [Order](product_id, 
                    customer_id, 
                    staff_id, 
                    vehicle_regno, 
                    order_details, 
                    total_price, 
                    order_date)
     SELECT     
         stock.id, 
         customers.id AS Expr1, 
         Staff.id AS Expr2, 
         @vehicle_regno AS Expr3, 
         @order_details AS Expr4, 
         @total_price AS Expr5, 
         @order_date AS Expr6
     FROM         
         stock 
     CROSS JOIN
         customers CROSS 
     JOIN
         Staff
     WHERE     
         (stock.name = @stock_name) 
         AND (customers.name = @customers_name) 
         AND (Staff.name = @staff_name) 
```

但它不插入任何记录

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:57:41.227

我认为解决方案在于简化它。以下是我的建议，

1.  运行您的选择查询并确认它是否返回结果。

2.  如果确认，请编写一个存储过程，其中，

a) 运行 Select 查询并在变量中设置结果。

b) 使用给定变量执行插入语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:58:17.403

实际上，这里有两个单独的查询，可以单独测试。

我的意思是，你为什么不先测试这部分：

```
SELECT     
     stock.id, 
     customers.id AS Expr1, 
     Staff.id AS Expr2, 
     @vehicle_regno AS Expr3, 
     @order_details AS Expr4, 
     @total_price AS Expr5, 
     @order_date AS Expr6
 FROM         
     stock 
 CROSS JOIN
     customers CROSS 
 JOIN
     Staff
 WHERE     
     (stock.name = @stock_name) 
     AND (customers.name = @customers_name) 
     AND (Staff.name = @staff_name) 
```

并查看是否有任何数据返回。

# php - 接收 XML - PHP

> ID：10198863
> 
> 赞同：-4
> 
> 时间：2012-04-17T20:44:48.290
> 
> 标签：php

我有 send.php：

```
<?
 if( $curl = curl_init() ) {
    curl_setopt($curl, CURLOPT_URL, 'http://www.example.com');
    curl_setopt($curl, CURLOPT_RETURNTRANSFER,true);
    $out = curl_exec($curl);
    echo $out;
    curl_close($curl);
  }
?> 
```

并且有receive.html：

```
 function makeRequestXML(url) {
            http_request = false;

            ...
            http_request.onreadystatechange = ContentsXML;
            http_request.open('GET', 'send.php', true);
            http_request.send(null);
        }
function ContentsXML() {
    alert(http_request.readyState);
    alert(http_request.status);
        if (http_request.readyState == 4) {
            if (http_request.status == 200) {
                number_checkbox = 0;
                var xmldoc = http_request.responseXML; 
```

但 xmldoc 不是 XML。我想发送 XML($out)。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:34:09.510

从您的问题中不清楚`$out`包含什么，使用 PHP 您可以执行一些字符串操作以将值转换为 XML 字符串（以防该值可以转换为字符串）：

```
 printf('<root>%s</root>', htmlspecialchars($out)); 
```

用那条线替换你的`echo`线，它可能已经工作了。否则，您需要更具体地提出您的要求。

# eclipse - 调试期间 Eclipse 首选项文件存储在哪里？

> ID：10198864
> 
> 赞同：2
> 
> 时间：2012-04-17T20:44:53.407
> 
> 标签：eclipse, osgi, preferences, rcp, equinox

因此，我可以导出我的 RCP 应用程序并在我的导出目录中的 .settings 文件夹下找到特定于我的应用程序的 .pref 文件。

当我在 Eclipse IDE 中运行/调试应用程序时，应用程序 .prefs 文件存储在哪里？例如，我从 eclipse ide 运行我的程序，它执行以下操作。我在哪里可以找到这个的首选项文件？

```
Preferences prefs = ConfigurationScope.INSTANCE.getNode("hostname.controllers");
    prefs.putInt("numCtrlrs", 2);
    prefs.put("ctrlr1", "adamctrlr.ohmasd.org");
    prefs.put("ctrlr2", "mnet.ohmasd.org");

    try{
        prefs.flush();
    } catch (BackingStoreException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:48:08.270

为了扩展[tkotisis](https://stackoverflow.com/users/618212/tkotisis)的[答案](https://stackoverflow.com/questions/10198864/where-are-eclipse-preference-files-stored-during-debug/10246169#10246169)，位置路径的示例如下，用于使用`ConfigurationScope`and的首选项`InstanceScope`。如果我们在 RCP 应用程序中使用以下代码：

```
IEclipsePreferences sharedPreferences = ConfigurationScope.INSTANCE.getNode("ConfigurationScopeExample"); 
sharedPreferences.put("Property1", "Value1");
sharedPreferences.flush();

IEclipsePreferences workspacePreferences = InstanceScope.INSTANCE.getNode("InstanceScopeExample"); 
workspacePreferences.put("Property2", "Value2");
workspacePreferences.flush(); 
```

我们通过名为“TestRcp.application”和工作空间“${workspace_loc}/../runtime-TestRcp.application”的IDE启动RCP应用程序（如下所示）：

![](../Images/55ccf2875897eee68cf14a050fc7a113.png)

将创建/更新相应的首选项文件：

```
\{workspace}\.metadata\.plugins\org.eclipse.pde.core\TestRcp.application\.settings\ConfigurationScopeExample.prefs
    Property1=Value1
    eclipse.preferences.version=1

\runtime-TestRcp.application\.metadata\.plugins\org.eclipse.core.runtime\.settings\InstanceScopeExample.prefs
    Property2=Value2
    eclipse.preferences.version=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:22:09.223

在 IDE 中运行 RCP 时，它使用的是在运行/调试配置中设置的工作区（通常命名为*runtime-product.name*并位于与运行的 Eclipse 工作区相同的路径中）。

可以在此运行时工作区中的相应路径中找到首选项文件。

# android - 将现有的网络应用程序移植到 Google TV 有多难？

> ID：10198872
> 
> 赞同：2
> 
> 时间：2012-04-17T20:45:31.533
> 
> 标签：android, google-chrome, google-tv

我正在考虑参加本周晚些时候参加的 Google TV 黑客马拉松活动，但我没有使用 Google TV 的经验。似乎 Android 是构建的主要平台，但我想在 Google TV 上运行我现有的网络应用程序。我想知道这项工作有多难，是否可以在一个周末完成。任何人都可以提供建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T21:11:21.400

Android 是为 GoogleTV 构建*的*平台，它有一些优势，但 GoogleTV 也内置了 Chrome。您可以先将 Web 应用程序放在 Chrome 上，然后再迁移到 Android。

我认为 Google TV 上任何应用程序成功的关键因素是遵守设计指南。无论您使用哪个平台，您都需要针对 10 英尺的环境和无鼠标控制系统进行设计。记住：

*   电视是一个被动的环境：人们想多看，少互动。
*   人们坐在离屏幕很远的地方。视觉处理变化。
*   电视更像是一个群体环境。
*   保证您在遥控器上有一个方向键，仅此而已。
*   期望非常高的音频和视频质量
*   您的应用正在与电视上的内容竞争。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T01:07:58.197

这真的取决于你的 webapp 做什么。如果它使用Flash，或者没有。在做一个“端口”之前有很多事情需要考虑。另一方面，如果您真的对此感兴趣，您可能希望查看我写的这篇文章： [将 Web 内容移动到 Google TV Android 应用程序](https://developers.google.com/tv/android/articles/moving_web_content_to_android) 如果您的应用程序还不是 D-pad 可导航的，您可能对[jQuery感兴趣& Closure 扩展](https://developers.google.com/tv/web/docs/tools_libraries)以及我们的模板库。

Google TV 上的 Chrome 是带有安全补丁的 Chrome 11。[WebView](http://developer.android.com/reference/android/webkit/WebView.html)在很长一段时间内都没有真正改变。如果你有大量的 CSS3 使用，你会注意到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:48:06.077

要将现有网站移植到 Google TV 的优化版本，关键因素是使用一些 Javascript 库来使您的网站 D-pad 可导航。有几个库 jQuery 和 Closure 可用：[https](https://developers.google.com/tv/web/docs/tools_libraries) ://developers.google.com/tv/web/docs/tools_libraries 。

如果您的网站有视频内容，最简单的方法是关注它们并利用此处提供的 Google TV 模板：[https](https://developers.google.com/tv/web/docs/gtv-templates) ://developers.google.com/tv/web/docs/gtv-templates 。

如果您拥有的视频内容相对静态，您可以将它们硬编码到您的网页中，如上面的模板中所做的那样。但是，如果它们经常更改并且您希望有一个带有管理页面的后端来使用例如 MySQL 来管理它们，请阅读这篇文章以了解如何完成：[https ://developers.google.com/tv/web/文档/ajax_gtv_templates_tutorial](https://developers.google.com/tv/web/docs/ajax_gtv_templates_tutorial)

您可以在自己的服务器上托管视频或直接从 YouTube 播放。如果您需要 Javascript 从 YouTube 播放它们，让我们开始一个新线程。

# internet-explorer - 观察用 F12 加载的文件，IE 调试器？

> ID：10198873
> 
> 赞同：0
> 
> 时间：2012-04-17T20:45:38.007
> 
> 标签：internet-explorer, debugging, browser, ie-developer-tools

我正在尝试使用 Windows 调试器 F12 进行一些 IE8 调试。

如何检查已加载的脚本、样式表等及其响应代码等？

换句话说，Chrome 开发者工具中“网络”标签的 F12 等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:53:47.993

在 IE9 中，F12 工具中有一个“网络”选项卡，但我认为 IE8 中没有。您必须在 IE8 模式下运行 IE9 或使用第三方工具，如[IETester](http://www.google.com/url?sa=t&rct=j&q=ietester&source=web&cd=1&ved=0CC4QFjAA&url=http%3A%2F%2Fwww.my-debugbar.com%2Fwiki%2FIETester%2FHomePage&ei=RNiNT7arEoSbtwfx4KDeCw&usg=AFQjCNF_tDLTJQgeAKXrbUKXwWtqRIiI8g)。

# enterprise-library - Enterprise Library 5.0 异常处理程序：如何从错误消息中删除部分

> ID：10198877
> 
> 赞同：1
> 
> 时间：2012-04-17T20:46:03.027
> 
> 标签：enterprise-library, mongodb-.net-driver

我在我的 Web 应用程序中编写了一个使用 Entlib 5.0 作为我的异常处理程序的自定义 MongoDB 侦听器。它工作得很好，除了它为下面的每个“行”创建一个文档条目，包括空行：

```
----------------------------------------
Timestamp: 4/17/2012 4:13:50 PM
Message: HandlingInstanceID: c3c5f58a-89b3-4b64-b05d-3f72f998bab4
An exception of type 'System.NullReferenceException' occurred and was caught.
-----------------------------------------------------------------------------
04/17/2012 16:13:50
Type : System.NullReferenceException, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
Message : Object reference not set to an instance of an object.
Source : MyCo.Webservices.TheCoolService
Data : System.Collections.ListDictionaryInternal
TargetSite : System.String TestExceptionHandling()
Stack Trace :    at Logging.TestExceptionHandling() in C:\tfs\Development\Source\MyCo.Webservices.TheCoolService\Logging\Logging.cs:line 55

---------------------------------------- 
```

我想做的是将大部分信息放入一个文档中，这样就不会有 10 个不同的文档出现相同的错误。即使编写我自己的异常格式化程序（[http://msdn.microsoft.com/en-us/library/ff664587(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664587(v=pandp.50).aspx)），我似乎仍然无法绕过对自定义侦听器的多次调用。 Write() 方法，每个方法都会在我的 mongodb 集合中创建一个新文档。

我的 Entlib 经验是有限的，但除非我从头开始编写整个 ExceptionFormatter，否则我不知道如何解决它。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:41:32.280

发现了我的问题。事实证明，我错过了侦听器上的 TraceData() 方法实现。一旦我告诉它在那里做什么，它就会像处理单个 WriteLine() 调用一样处理错误消息。

# java - “spring-context.xml”文件在 WebApp 上下文中的位置？

> ID：10198878
> 
> 赞同：0
> 
> 时间：2012-04-17T20:46:13.290
> 
> 标签：java, spring, classpath, vaadin

简而言之：当我这样做时，我不知道将“spring-context.xml”文件放在哪个文件夹中：

```
ApplicationContext context = new ClassPathXmlApplicationContext("spring-context.xml"); 
```

In Long：我基本上知道类路径是什么。它曾经是一个环境变量，告诉 Java 项目在哪里寻找 jars 和其他资源。好像用的不多。但是在 Eclipse 中，它谈到了通过进入 Java 构建路径来设置类路径。

当我想使用类路径（上图）查找 Spring“spring-context.xml”文件时，我不明白这与 Eclipse Java 构建路径有什么关系，如果有的话！当我使用上述语句时，WebApp 会查看哪些文件夹？我通常听到人们说，“在类路径中”，但这并没有告诉我太多，因为我不想使用环境变量，而且 Eclipse Java 构建路径似乎与查找 spring-context.xml 没什么关系文件。

**更多详情**

起初我担心更多的细节会混淆情况，但也许他们掌握了关键。

我正在使用 Vaadin 创建一个 Web 应用程序。我正在按照他们的指示将 Spring 上下文导入 Vaadin。我创建了一个 Spring Helper 类：

```
public SpringContextHelper(Application application) {
    ServletContext servletContext = ((WebApplicationContext) application.getContext()).getHttpSession().getServletContext();
    context = WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext);
} 
```

在`web.xml`我有这些部分：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:spring-context.xml</param-value>
</context-param> 
```

我在第一行得到错误`SpringContextHelper()`。我已经打破了界限，所以我知道这是失败的逻辑：

```
WebApplicationContext wac = (WebApplicationContext) application.getContext(); 
```

`wac`返回null，大概是因为找不到`spring-context.xml`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:50:50.083

本质上，您为项目指定的“Java 构建路径”*是*CLASSPATH。

您放入“Java 资源”项目文件夹的“src”根目录中的文件将自动进入 Web 应用程序的“类”子目录（即，将自动在运行时 CLASSPATH 中可用）。

例如，如果您有一个自定义 log4j.properties 文件，那么它可以而且应该放在 Eclipse 项目的“src/”根目录中。

至于“spring-context.xml 去哪里？”，我不知道。这个链接建议它应该在 META-INF/jsca 下（至少对于 WebLogic）：

[http://docs.oracle.com/cd/E15315_09/help/oracle.eclipse.tools.weblogic.doc/html/sca.html](http://docs.oracle.com/cd/E15315_09/help/oracle.eclipse.tools.weblogic.doc/html/sca.html)

# eclipse - 如何设置gdb调试器连接？

> ID：10198884
> 
> 赞同：3
> 
> 时间：2012-04-17T20:46:30.893
> 
> 标签：eclipse, debugging, gdb, eclipse-indigo

[这里](https://www.ridgerun.com/developer/wiki/index.php/Debug_and_Profiling_Guide#Create_debug_configuration)的说明显示了如何创建调试配置，但似乎基于不同版本的 eclipse。eclipse-indigo中gdb调试器连接（TCP/IP地址和端口号）是如何配置的？我看到`Network Connections`但`Edit Configuration -> Configure Workspace Settings -> General...`无法添加 TCP/IP 地址和端口号。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T22:28:37.337

我认为，说明仍然大部分有效。

*   “运行”菜单 =>“调试配置...”选项

*   “C/C++ 附加到应用程序”选项 =>“新建”上下文菜单选项

*   “调试器”选项卡 => 调试器：“gdbserver”选项 => “连接”选项卡

![数据库服务器](../Images/1371677519dec457625416d5d1a222a0.png)

# linux - Apache 将所有 https (443) 请求重定向到外部服务器

> ID：10198885
> 
> 赞同：1
> 
> 时间：2012-04-17T20:46:31.637
> 
> 标签：linux, apache, .htaccess, mod-rewrite, debian-based

我想将所有 https 请求（443）重定向到另一台服务器，如何在 apache 中执行此操作？

我想做的是：

[https://server1.com](https://server2.com)上的所有 https 请求都重定向到[https://server2.com](https://server1.com)

任何人都知道我怎么能做到这一点？一个例子会很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:00:02.003

我会说这样的话：

```
RewriteCond %{HTTPS} on 
RewriteCond %{HTTP_HOST} ^server1.ca$
RewriteRule (.*) https://server2.com/$1 [QSA,L] 
```

如果是 HTTPS，将所有内容重定向到来自 server1.com 的新站点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:05:05.667

您将需要两台服务器中的证书，然后您可以使用 .htaccess（如果您使用 apache）或 web.config（如果您使用 IIS）进行重定向。

.htaccess 示例：

```
RewriteCond %{HTTPS} = on [NC]
RewriteCond %{HTTP_HOST} !^server2.com$ [NC]
RewriteRule ^(.*)$ https://server2.com/$1 [L] 
```

如果您使用的是 IIS，请告诉我，我可以为您提供一个示例 web.config :)

# opengl - 类构造函数不向 VBO 发送数据 DATA

> ID：10198890
> 
> 赞同：0
> 
> 时间：2012-04-17T20:46:48.860
> 
> 标签：opengl, constructor, vbo, glew

我有一个名为 Model 的类，它处理绘制自身所需的所有信息。基本上它有2种方法：

1) 承包商 - 创建和初始化 VBO、VAO 和制服人员。2) Draw - 绑定VAO和Draw

我的问题是使用 glBufferData 初始化 VBO。我注意到应该上传到 GPU 内存的数据不是那个！我确实使用 gDebugger 进行了检查。还观察到，如果我尝试在外部和构造函数类之后再次发送数据，一切正常。我错过了什么？？？

Model的类实例对象是一个全局变量，模板参数V和M分别为vec4和mat4。

我还在 linux/Windows/NVIDIA/RADEON 上进行了测试，并且发生了相同的行为。将#verson 400 用于着色器和 glew、glm 数学库。

代码如下：

1）构造函数：

```
/** This constructor has 5 steps:
 *  1) Allocate variables
 *  2) Create, bind and Send vbo inf.
 *  3) Create, bind vao info
 *  4) Create mapping between Buffer and Attributes in GPU memory
 *  5) Get uniform variables location
 * 
 * */
template<class V, class M>
Model<V, M>::Model( GLuint size, GLuint program ){
    assert( size > 0 );

    /** BEG - 1) Allocate variables */
    /** beg - model variable initialization */
    this->vertex        = new vec4[ size ];
    this->numVertex     = size;

    this->color         = new vec4[ size ];
    this->numColor      = size;

    //this->element     => not initialized
    //this->numElem     => not initialized

    this->modelMatrix   = M(1); // Identity Matrix
    this->position      = V(0); // Orign

    // VBO - Vertex Buffer Object information
    this->vbo           = new GLuint[ this->numBuff ];
    this->vboSize       = this->numBuff;

    // VAO - Vexter Array Object information
    this->vao           = new GLuint[ 1 ];
    this->numVao        = 1;
    this->attrib        = new GLuint[ this->numBuff ];
    this->numAttrib     = this->numBuff;

    this->uniform       = new string[ this->numUni ];
    this->uniformLoc    = new GLuint[ this->numUni ];
    this->numUniform    = this->numUni;

    this->program       = program;

    //beg - Inittialization
    this->attrib[VERTEX]     = 0;
    this->attrib[COLOR]      = 1;

    this->uniform[0]         = string("modelMatrix");
    this->uniform[1]         = string("position");
    //end - Inittialization
    /** END - 1) Allocate variables */

    /** BEG - 2) Create, bind and Send vbo inf */
    // Create vbo identifier
    glGenBuffers( this->vboSize, this->vbo );
    Other<V>::checkError("glGenBuffers");

    // Bind Buffer
    glBindBuffer( GL_ARRAY_BUFFER, (this->vbo)[0] );
    Other<V>::checkError("glBindBuffer");

    // Send Data to buffer
    glBufferData(   GL_ARRAY_BUFFER, sizeof( (this->vertex)[0][0] ) * (this->vertex)[0].length() * (this->numVertex),
                    &(this->vertex[0][0]), GL_STATIC_DRAW);
    Other<V>::checkError("glBufferData");

    // Bind Buffer
    glBindBuffer( GL_ARRAY_BUFFER, (this->vbo)[1] );
    Other<V>::checkError("glBindBuffer");

    // Send Data to buffer
    glBufferData(   GL_ARRAY_BUFFER, sizeof( (this->color)[0][0] ) * (this->color)[0].length() * (this->numColor),
                    &(this->color[0][0]), GL_STATIC_DRAW);
    Other<V>::checkError("glBufferData");
    /** END - 2) Create, bind and Send vbo inf */

    /** BEG - 3) Create, bind and enable vao info */
    // Create vao identifier
    glGenVertexArrays( 1, this->vao );
    Other<V>::checkError("glGenVertexArrays");
    glBindVertexArray( (this->vao)[0] );
    Other<V>::checkError("glBindVertexArray");

    // Enable attributes
    for ( uint i=0; i<numAttrib; i++ ){
        glEnableVertexAttribArray( i );
        Other<V>::checkError("glEnableVertexAttribArray");
    }
    /** END - 3) Create and enable vao info */

    /** BEG - 4) Create mapping between Buffer and Attributes in GPU memory */
    for ( uint i=0; i<numAttrib; i++ ){
        glBindBuffer( GL_ARRAY_BUFFER, (this->vbo)[i] );
        Other<V>::checkError("glBindBuffer");
        glVertexAttribPointer( (this->attrib)[i], (this->vertex)[i].length(), GL_FLOAT, GL_FALSE, 0, (GLubyte *)NULL);
        Other<V>::checkError("glBindBuffer");
    }
    /** END - 4) Create mapping between Buffer and Attributes in GPU memory */

    /** BEG - 5) Get uniform variables location */
    for ( uint i=0; i<numAttrib; i++ ){
        this->uniformLoc[i] = glGetUniformLocation( program, this->uniform[i].c_str() );
        Other<V>::checkError("glGetUniformLocation");
    }
    /** END - 5) Get uniform variables location */
} 
```

2）画

```
template<class V, class M>
void Model<V, M>::draw()
{
    //glUniformMatrix4fv( this->uniformLoc[0], 1, GL_FALSE, &(this->modelMatrix[0][0]) );
    //glUniform4fv(       this->uniformLoc[1], 1, &(this->position[0]) );

    glBindVertexArray( (this->vao)[0] );
    glDrawArrays( GL_LINE_STRIP, 0, this->numVertex);
} 
```

为了在构造函数之后将数据“重新发送”到 GPU，我使用了 sendData 成员函数：

```
template<class V, class M>
void Model<V, M>::sendData()
{
    glBindBuffer( GL_ARRAY_BUFFER, (this->vbo)[0] );

    // Send Data to buffer
    glBufferData(   GL_ARRAY_BUFFER, sizeof( (this->vertex)[0][0] ) * (this->vertex)[0].length() * (this->numVertex),
                        &(this->vertex[0][0]), GL_STATIC_DRAW);
} 
```

编辑：我忘了添加 sendData 成员函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:10:54.590

如果您在获取渲染上下文之前在任何地方实例化该类，例如静态初始化程序或类似的，那么它将不起作用。

基本上你不应该将 OpenGL 操作放入类构造函数中，除非你以某种方式确保它将在有效的上下文中操作。您可以通过在另一个类的实例中封装一个有效的 OpenGL 上下文并将其作为参数传递给在该上下文上运行的构造函数来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:49:12.773

在调用（调用）构造函数之前，您是否有一个有效的 opengl 上下文设置`glewInit()`？

如果您有任何带有 OpenGL 调用的静态定义对象，它们将失败，因为它们是在 main() 之前构造的。如果你想要一个在构造函数中调用 opengl 的对象，你必须小心`new`在上下文初始化之后才使用它来创建它。

# java - 如何在 jsp-servlets 中的请求页面上显示结果

> ID：10198893
> 
> 赞同：1
> 
> 时间：2012-04-17T20:46:55.600
> 
> 标签：java, jsp, servlets

我使用 jsp 和 servlet 开发这个 Web 应用程序。我想知道如何在发出请求的同一页面上显示结果。例如，通常我所做的是将请求从一个 jsp 发送到一个 servlet，然后 servlet 在单独的 jsp 上发送响应/结果。我想在同一页面上显示数据库结果。如何做到这一点？...代码片段将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:03:52.537

只需在请求范围内设置必要的数据，并使用[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)将控件转发到所需的 JSP，该 JSP 反过来可以根据结果生成适当的 HTML。

```
request.setAttribute("results", results);
request.getRequestDispatcher("/WEB-INF/page.jsp").forward(request, response); 
```

[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)中的 hello world 示例也演示了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:54:48.310

这是完全可能的，但您需要在您的工具集中包含 JavaScript。我的建议是在您的应用程序中使用 AJAX 方法，这意味着大量使用客户端脚本（即 JavaScript）。

[DeveloperWorks 的本教程](http://www.ibm.com/developerworks/java/library/j-ajax1/)采用纯 JavaScript/Servlet 方法。如果你想做更高级的事情，我强烈建议你使用支持 AJAX 的 JavaScript 框架，比如[JQuery](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:51:13.897

从您的 servlet 发送重定向到您的同一页面。此外，在请求中设置一些属性并将其显示在您的页面中，例如保存`List<MyObject>`在请求中，然后在您的 jsp 中从请求中读取列表并在表格中显示值。

# autohotkey - 全局变量没有全局范围

> ID：10198900
> 
> 赞同：17
> 
> 时间：2012-04-17T20:47:15.077
> 
> 标签：autohotkey

```
supposedlyGlobalVariable := "blah"

ARoutine()
{
   localVariable := "asdf"
   MsgBox, The global variable value is %supposedlyGlobalVariable%.  The local variable value is %localVariable%.
}

^!X:: ;This assigns the hotkey CTRL + ALT + X to run the routine
ARoutine()
return 
```

运行代码，结果是：

```
"The global variable value is .  The local variable value is asdf." 
```

该[文档](http://www.autohotkey.com/docs/Variables.htm)指出：

> **变量作用域和声明：**除函数中的局部变量外，所有变量都是全局的；也就是说，脚本的*任何*部分都可以读取或更改它们的内容。

为什么我的全局变量在函数内没有作用域？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T18:54:46.953

全局变量的文档可以在这里找到：
[https ://autohotkey.com/docs/Functions.htm#Global](https://autohotkey.com/docs/Functions.htm#Global)

> **全局变量**
> 
> 要在函数中引用现有的全局变量（或创建一个新变量），请在使用之前将该变量声明为全局变量。例如：

```
LogToFile(TextToLog)
{
    global LogFileName
    FileAppend, %TextToLog%`n, %LogFileName%
} 
```

我相信 AHK 的全球概念与其他语言有点不同。使用 AHK，您可以创建一个变量并在多个热键和子例程中使用它，而无需将其声明为全局变量。

```
Gv := 0

f1::SetTimer, Action, % (on:=!on) ? (1000) : ("Off")

Action:
    Gv++
    trayTip,, % Gv
Return

f2::Msgbox, % Gv 
```

代码解释：

*   `F1`键切换计时器以运行子程序：每`Action`毫秒`1000`。
*   `%`开始一个表达式。
*   `on:=!on``on`每次`F1`按下 时反转变量的二进制值。
*   `?:`合称为三元运算符。
*   当 on=1 时延迟设置为`1000`ms；当 on=0 时，计时器打开`Off`。

`++` 运算符将变量 Gv 加 1 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-02-18T11:46:05.970

这使事情变得更容易：

[https://www.autohotkey.com/docs/Functions.htm#SuperGlobal](https://www.autohotkey.com/docs/Functions.htm#SuperGlobal)

> **超全局变量 [v1.1.05+]**：如果全局声明出现在任何函数之外，默认对所有函数生效（不包括强制局部函数）。这避免了在每个函数中重新声明变量的需要。但是，如果声明了同名的函数参数或局部变量，则它优先于全局变量。class 关键字创建的变量也是超全局的。

只需在主脚本中将您的变量声明为全局变量：

```
global supposedlyGlobalVariable := "blah" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T15:30:31.563

P.Brian，当你这样做时它会起作用..我知道它没有解释为什么，但这可能是你的解决方法。

```
#Persistent
GlobalVariable = "blah"
RETURN

ARoutine:
{
   localVariable := "asdf"
   MsgBox, The global variable value is %GlobalVariable%.  The local variable value is %localVariable%.
}
Return

^!X:: ;This assigns the hotkey CTRL + ALT + X to run the routine
gosub, ARoutine
return 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-27T00:05:06.917

您只需在函数内将变量声明为全局变量

```
supposedlyGlobalVariable := "blah"

ARoutine()
{
   global supposedlyGlobalVariable
   localVariable := "asdf"
   MsgBox, The global variable value is %supposedlyGlobalVariable%.  The local variable 
value is %localVariable%.
}

^!X:: ;This assigns the hotkey CTRL + ALT + X to run the routine
ARoutine()
return 
```

# c++ - 为什么我需要这个 CString 类型转换？

> ID：10198901
> 
> 赞同：0
> 
> 时间：2012-04-17T20:47:17.580
> 
> 标签：c++, mfc

我已将字符串移动到资源中，幸运的是我有 LPCTSTR 运算符可以方便地实例化字符串，例如：

```
CString str( (LPCSTR) IDS_MY_STRING); 
```

现在我想用 MessageBox() 做类似的类型转换，所以它也从资源中加载字符串，所以我这样做：

```
MessageBox( hWnd, (LPCTSTR) IDS_MY_STRING ,"Error", MB_RETRYCANCEL); 
```

但这不起作用，它编译但在运行时崩溃。现在以下工作：

```
MessageBox( hWnd, (CString) (LPCTSTR) IDS_MY_STRING ,"Error", MB_RETRYCANCEL); 
```

我的问题是 MessageBox() 无论如何都将 LPCTSTR 作为第二个参数，那么为什么我们必须另外从 LPCTSTR 类型转换为 CString 才能使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:55:32.563

您`IDS_MY_STRING`实际上并不是指向字符串的指针。它是一个整数。（如果它是一个字符串指针，你一开始就不需要强制转换`LPCTSTR`。）`CString`知道如何从完整的资源 ID 加载资源字符串。

`MessageBox`没有；它需要一个真正的字符指针，它`CString`隐式提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T20:58:56.607

真正的问题（或至少答案中有趣的部分）不是关于第二个如何失败，而是更多关于第一个如何工作。

第一个有效，因为 CString 的构造函数采用 LPCSTR 实际上查看该值以确定它是否真的是指向字符串的指针，还是字符串资源的标识符。在后一种情况下，它会自动加载字符串资源并创建具有相同内容的 CString。IOW，您已经获得了从字符串标识符到 CString 的隐式转换。

CString 还支持隐式转换为 LPCSTR/LPCSTR/LPCWSTR。

然而，C++ 只会进行*一次*用户定义的隐式转换，以从传递给表达式的任何类型到所需的任何类型。在这种情况下，要从字符串 ID 到 a `LPCTSTR`，您需要两个 - 一个从字符串 ID 到`CString`，另一个从`CString`到 `LPCTSTR`。编译器不会自动为您执行此操作。

因此，要将字符串 ID 转换为`LPCTSTR`，您需要将字符串 ID 显式转换为`CString`，它使用`CString`' 构造函数，该构造函数采用`LPCTSTR`. 因此，您将字符串 ID 转换为`LPCTSTR`，然后从该转换为`CString`，这将创建一个`CString`. 然后编译器会自动`CString`为你转换为（真正的）`LPCTSTR。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T21:56:56.237

其他人已经解释了类型转换等的细节。

此外，为了简化代码，您可能需要`#define`一个方便的宏，如下所示：

```
#define _S(id) (CString(LPCTSTR(id))) 
```

然后将其与`MessageBox`（或其他`LPCTSTR`参数）一起使用：

```
MessageBox( hWnd, _S(IDS_MY_STRING), _S(IDS_TITLE), MB_RETRYCANCEL ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T20:54:02.207

`MessageBox`没有采用资源 ID 的重载，但您可以使用它`AfxMessageBox`。

# c# - AsyncFileUpload OnUploadedComplete 未在 DIV 内触发

> ID：10198902
> 
> 赞同：2
> 
> 时间：2012-04-17T20:47:17.703
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, asyncfileupload

我有一个我认为是使用 ajaxcontroltoolkit 的 AsyncFileUpload 控件的非常基本的设置。基本上，如果我将它从 div 中取出，控件将正常工作，但是当我将它放在 div 中时，它不再触发 OnUploadedComplete 服务器端事件。

这是如何工作的，您将鼠标悬停在要更改的图像上，单击“更新图像”，它会打开一个对话框（这是 AsyncFileUpload 控件所在的 div）并允许您上传新图像。

```
<div id="dialog-message" style="display: none;" title="Upload a Headshot Photo">
    <p>Upload a headshot photo of this person. Your photo will be uploaded once you select and crop your photo.</p>

    <fieldset>
        <legend>Choose a photo to upload</legend>

        Acceptable formats: .jpeg, .jpg, .gif, and .png and should be at least 72 DPI and 221x221.
        **<ajax:AsyncFileUpload ID="asyncImageUpload" 
              ThrobberID="throbber" 
              OnClientUploadComplete="uploadComplete" 
              OnUploadedComplete="AsyncFileUpload_Complete" 
              runat="server" />**
        <img src="/images/ajax-loader.gif" id="throbber" runat="server" style="display: none;" align="absmiddle" alt="loading" />
    </fieldset>
</div> 
```

上面是包含 AsyncFileUpload 控件的 div。就像我说的，如果我将它移到 div 之外，它就可以正常工作。我已经尝试更改表单中的 enctype，这就是它目前的样子：

```
<form id="form1" enctype="multipart/form-data" method="post" runat="server"> 
```

在尝试找到解决此问题的方法时，我尝试了所有可以找到的建议，但似乎都没有奏效。这甚至不在更新面板中，所以我不确定为什么它没有触发。

我唯一能想到的是，它与 div 一开始被隐藏，然后在用户单击链接后显示出来有关。我真的希望有人能帮忙，因为我要把我的电脑扔出窗外哈哈。提前致谢！

代码隐藏：

```
protected void AsyncFileUpload_Complete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    System.Threading.Thread.Sleep(4000);

    if (this.asyncImageUpload.HasFile)
    {
        string path = MapPath("~/images/uploads/") + Path.GetFileName(e.filename);
        this.asyncImageUpload.SaveAs(path);
    }
} 
```

# core-data - NSFetchRequest 的意外行为

> ID：10198903
> 
> 赞同：1
> 
> 时间：2012-04-17T20:47:23.477
> 
> 标签：core-data

我在上下文中创建了几个实体，用于将其保存在数据库中

```
AppCalendarEntity *appCalendar = [AppCalendarEntity getInstanceWithManagedDocument:manageDocument]; 
```

添加一些实体后，我执行流动的获取请求

```
 NSFetchRequest *requestToSeeIfCalendarWithIdExist = [NSFetchRequest fetchRequestWithEntityName:@"AppCalendarEntity"];
   NSArray *result = [managedDocument.managedObjectContext executeFetchRequest:requestToSeeIfCalendarWithIdExist error:&InternalError] ; 
```

它返回的结果只包括我使用第一个命令在上下文中添加的实体，而不是已经保存在数据库中的条目。我已经确定在这个阶段文档状态是 UIDocumentStateNormal。

当我将此行添加到已打开的文档 (UIDocumentStateNormal) 时，它会返回我预期的结果，即它从 db 以及尚未保存到 db 的内存上下文中获取结果。

```
[managedDocument openWithCompletionHandler:^(BOOL success) 
     {
       NSFetchRequest *requestToSeeIfCalendarWithIdExist = [NSFetchRequest fetchRequestWithEntityName:@"AppCalendarEntity"];
   NSArray *result = [managedDocument.managedObjectContext executeFetchRequest:requestToSeeIfCalendarWithIdExist error:&InternalError] ;
} 
```

我的问题是 1- 我希望查询的结果在这两种情况下应该是相同的。为什么在上述情况下不是这样。2-对我来说，如果文档状态是 UIDocumentStateNormal，我不应该在上下文中调用“openWithCompletionHandler”来打开文档。在这种特殊情况下，它在 NSFetchRequest 中产生了什么不同，这在添加后给了我想要的结果。

如果我错了，请告诉我

这是完整的代码

这是函数的完整代码

```
 + (void ) saveCalendarArrayInDbIfItAlreadyDoesNotExist : (NSArray*) appCalendarArray   managedDocument: (UIManagedDocument*) managedDocument completionBlock : ( void(^) (NSArray* ObjectSavedSuccesfully, NSError *InternalError)) handler
        {

        // i dont know why i have to do it :( if i dont add openWithCompletionHandler my query doesnt fetch result from db rather just do query in-memory context and not db
        [managedDocument openWithCompletionHandler:^(BOOL success) 
         {
            void (^completionHandler)(NSArray* , NSError* );
            completionHandler = [handler copy ];

            NSError *error = nil;
            NSMutableArray *array = [[NSMutableArray alloc] init];

            for (id appCalendar in appCalendarArray) {

                if([appCalendar isKindOfClass:[AppCalendarEntity class]])
                {
                    AppCalendarEntity *appCalendarEntity = (AppCalendarEntity*) appCalendar;
                    NSFetchRequest *requestToSeeIfCalendarWithIdExist = [NSFetchRequest fetchRequestWithEntityName:@"MyEntity"];
                    requestToSeeIfCalendarWithIdExist.predicate = [NSPredicate predicateWithFormat:@"identifier = %@", appCalendarEntity.identifier];
                    NSError *InternalError = nil; 
                   [requestToSeeIfCalendarWithIdExist setShouldRefreshRefetchedObjects:YES];
                    NSArray *result = [managedDocument.managedObjectContext executeFetchRequest:requestToSeeIfCalendarWithIdExist error:&InternalError] ;

                   // "result" is different when we encapsulate it in openWithCompletionHandler and when we don't…….MY PROBLEM

                   if(result == nil)
                    {

                         // return error
                    }

                    // 1 object always return that depict the in memory(context) object we created but not saved. I expect it should be zero because no object has yet been saved to database.. 
                    else if(result.count > 1)
                    {

                        [managedDocument.managedObjectContext deleteObject:appCalendar];
                    }
                    else
                    {
                        [array addObject:appCalendarEntity];
                    }
                }
                else
                {

                   // error handling
                }
            }

            if (error != nil)
            {
                 completionHandler (nil, error);
                 return;
            }

            // saving all the objects
             [ managedDocument updateChangeCount:UIDocumentChangeDone ];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:34:15.490

使用 UIManagedDocument 时，不要在 MOC 上调用 save，因为它实现了自动保存。但是，需要告知自动保存应该在将来的某个时间点进行。

1.  去掉那个函数中对 openWithCompletionHandler 的调用（我知道它只是为了调试这个问题而存在的）。

2.  代替

    [managedDocument.managedObjectContext 保存：&InternalError]

和

```
[managedDocument updateChangeCount:UIDocumentChangeDone]; 
```

这将通知文档现在可以保存它。

**编辑**

首先，我认为你应该摆脱调试技巧。您可以添加 NSLog 或 NSAssert，但其余的东西只会让您很难说出您想要的原因，并混淆真正的问题。

其次，你在这里的真正目标是什么？我可以看到方法的名称，也可以看到代码，但它们不匹配。

这里有很多“杂乱无章”，很难理解你的问题。我将重新发布您的代码，以及删除“打开”内容的编辑，并用问题作为代码注释对其进行注释。

希望此更改将帮助您解决问题。

```
// First, the method name seems to indicate that some objects will be added
// to the database.  however, the only database work in this method is removal.
// I don't get it.
+ (void ) saveCalendarArrayInDbIfItAlreadyDoesNotExist : (NSArray*) appCalendarArray   managedDocument: (UIManagedDocument*) managedDocument
    {
        NSError *error = nil;
        NSMutableArray *array = [[NSMutableArray alloc] init];

        for (id appCalendar in appCalendarArray) {
            if([appCalendar isKindOfClass:[AppCalendarEntity class]]) {
                // OK, we are filtering the array of objects.  We are only interested in
                // objects of type AppCalendarEntity, and are going to use its identity
                // property to look for objects of type MyEntity.
                // What is the relationship between AppCalendarEntity and MyEntity?
                AppCalendarEntity *appCalendarEntity = (AppCalendarEntity*) appCalendar;
                NSFetchRequest *requestToSeeIfCalendarWithIdExist = [NSFetchRequest fetchRequestWithEntityName:@"MyEntity"];
                requestToSeeIfCalendarWithIdExist.predicate = [NSPredicate predicateWithFormat:@"identifier = %@", appCalendarEntity.identifier];
                NSError *InternalError = nil; 
               [requestToSeeIfCalendarWithIdExist setShouldRefreshRefetchedObjects:YES];
                NSArray *result = [managedDocument.managedObjectContext executeFetchRequest:requestToSeeIfCalendarWithIdExist error:&InternalError];

               // OK, now we just got a result from searching for a MyEntity, where
               // its identifier is the same as the appCalendarEntity.
               if(result == nil)
               {
                   // return error
               }
                // 1 object always return that depict the in memory(context) object we created but not saved. I expect it should be zero because no object has yet been saved to database.. 
                else if(result.count > 1)
                {
                    // I am extremely confused by this code.  First, why are you
                    // checking for more than 1 object?  The method name indicates
                    // you are going to insert something.  Furthermore, you are only
                    // deleting one object.  How many do you expect?  Also, why are
                    // you deleting an appCalendar?  You were searching for a MyEntity.
                    // If an appCalendar is a MyEntity, then that's terrible naming.
                    // Furthermore, it would explain why you are finding it...
                    // because you create entities by inserting them in a MOC to
                    // begin with!
                    [managedDocument.managedObjectContext deleteObject:appCalendar];
                }
                else
                {
                    // Even more confusion.  You are adding this object to an internal
                    // array, not the database.  Furthermore, you are doing it if there
                    // are either 0 or 1 MyEntity objects in the database with matching
                    // identifier.
                    [array addObject:appCalendarEntity];
                }
            }
        }

        // saving all the objects
        // OK - but the only thing being saved are the ones you deleted...
        [ managedDocument updateChangeCount:UIDocumentChangeDone ];
} 
```

最后，如果我的预感是正确的，并且日历对象实际上是 MyEntity 对象，那么它们已经在 MOC 中——因为它们就是这样创建的。当您进行提取时，您可以强制搜索忽略待处理的更改（如我之前的评论之一所述）并且只接受已保存的更改。

如果您想忽略挂起的更改，

```
fetchRequest.includesPendingChanges = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:12:36.640

@Jody 问题已解决，感谢您抽出时间来回答这个问题。

首先让我解决你的困惑

1-是功能旨在保存在数据库中，它是一个帮助功能。传递给此函数的参数“appCalendarArray”由已在上下文中创建的实体组成。我故意消除了逻辑，因为它涉及与外部 api 通信、解析 json 等。在上下文中插入实体所需的代码已经包含在问题的第一部分中。

```
AppCalendarEntity *appCalendar = [AppCalendarEntity getInstanceWithManagedDocument:manageDocument]; 
```

2-根据数据库中应该唯一的列，我从上下文中消除了已构建但尚未从上下文中保存的实体。如果我们已经在数据库中有对象的标识符，我们不想重新保存它。所以，我只是从上下文中删除它。此功能按预期工作，实体不会重新保存在数据库中。最后一行确实保存了留在上下文中的对象（如果有的话）。大多数时候有很多。

3- 抱歉，AppCalendarEntity 和 MyEntity 是一样的。

解决方案

* * *

我添加了这个标志 fetchRequest.includesPendingChanges = NO; ，删除数据库，重新启动 Xcode 并开始工作。谢谢你的坚持

# android - 如何显示错误对话框并在加载对话框中间退出

> ID：10198904
> 
> 赞同：0
> 
> 时间：2012-04-17T20:47:24.443
> 
> 标签：android, dialog, android-asynctask

我的 android 应用程序首先加载所有必要的数据，同时显示一个加载对话框：

```
// Load data in background, while updating the loading dialog.
(new AsyncTask<Void, String, Void>() {
    @Override
    protected Void doInBackground(Void... params) {
        publishProgress(getString(R.string.loading_a));
        if!(loadA())
            showErrorDialogAndQuit();
        publishProgress(getString(R.string.loading_b));
        if(!loadB())
            showErrorDialogAndQuit();
        publishProgress(getString(R.string.loading_c));
        if(!loadC())
            showErrorDialogAndQuit();
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        dialog.setMessage(progress[0]);
    }

    protected void onPostExecute(Void result) {
        // Update the UI.
        updateUI();
        dialog.dismiss();
    }
}).execute(); 
```

方法`loadA()`、`loadB()`和`loadC()`可能会失败，返回 false。此时，我希望显示一条错误消息，并在方法中退出应用程序`showErrorDialogAndQuit()`。

我尝试按如下方式创建它，但在应用程序退出后它似乎总是抛出错误，这与加载对话框不再有窗口有关。

```
public void showErrorDialogAndQuit() {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            AlertDialog aDialog = new AlertDialog.Builder(MyActivity.this).setMessage("Fatal error.").setTitle("Error")
                    .setNeutralButton("Close", new AlertDialog.OnClickListener() {
                        public void onClick(final DialogInterface dialog, final int which) {
                            // Exit the application.
                            finish();
                        }
                    }).create();
            aDialog.setOnKeyListener(new OnKeyListener() {
                @Override
                public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
                    // Disables the back button.
                    return true;
                }

            });
            aDialog.show();
        }
    });
} 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:27:56.337

如果您只能在成功 loadA 后执行 loadB，我建议您更改代码的逻辑。您可以使用具有 3 个状态的最终状态机方法，其中在 stateA 完成后触发 stateB。

使用处理程序也可以很好地更新 UI。逻辑可能如下所示：

1.  在主体开始线程加载A
2.  在 threadA 中，如果成功，则将 msg A_success 发送到主体，否则将 msg A_failed 发送到主体 threadA 到此结束
3.  主体通过处理程序接收 msg，如果收到 A_success -> start Thread loadingB else end (或任何你想要的)，则继续

启动线程 A 如下所示：

```
 new Thread(new Runnable() {
    public void run() {
        loadingA();
    }
    }).start(); 
```

在 loadingA 中，您将 msg 发送回主体，如下所示：

```
 public void loadingA() {
    ...do your loading...

    then to inform the main body...

    Message msg = mHandlerToReceiveTheResultFromLoadingThread
            .obtainMessage(MESSAGE_UPDATE_RESULT_OF_LOADING_A);
        Bundle bundle = new Bundle();
        bundle.putBoolean(RESULT_OK_INFO, true or false);
        msg.setData(bundle);
        mHandlerToReceiveTheResultFromLoadingThread
            .sendMessage(msg);

        } 
```

在主体中`mHandlerToReceiveTheResultFromLoadingThread`看起来像：

```
public final Handler mHandlerToReceiveTheResultFromLoadingThread = new Handler() {
    @Override
    public void handleMessage(Message msg) {

        if (DEBUG)
        Log.i(this.getClass().getSimpleName(),
            "-> "
                + Thread.currentThread().getStackTrace()[2]
                    .getMethodName() );
        switch (msg.what) {
        case MESSAGE_UPDATE_RESULT_OF_LOADING_A: {
        boolean result_ok = msg.getData().getBoolean(RESULT_OK_INFO);

        if (result_ok)
            ...continue with loadingB;
            else
               show your message that it failed and exit;
        }
        break;

        }

    } 
```

希望这可以帮助...

编辑：在活动的逻辑结束时调用完成：

```
 this.myBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {   
                String msg = "Hello, I have finished and started another activity";
                doOtherActivit(msg); 
                finish();
            }
        });
    }

public void doOtherActivity(String msg) {
        Intent i;
        i = new Intent(this, OtherActivity.class);
        i.putExtra("Task", msg);        
        startActivity(i);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:55:30.813

原来我需要做的就是在`finish()`被调用之前让进度对话框自然关闭：

```
if(!loadA()) {
    showErrorDialogAndQuit();
    return null;
} 
```

这通过创建错误对话框来工作，该对话框在另一个线程中运行，然后返回 null 以`AsyncTask`使其运行`onPostExecute()`并关闭进度对话框。然后，当按下并`finish()`调用错误对话框中的关闭按钮时，一切都可以正常关闭。

这种方法的唯一缺点是，如果在`onPostExecute()`. 在这种情况下，您可以修改参数类型并对其进行测试以查看要执行的操作。

# asp.net - 设置 DLL，以便我们可以更新生产 ASP.NET 应用程序而无需完全发布或重新启动应用程序

> ID：10198906
> 
> 赞同：1
> 
> 时间：2012-04-17T20:47:34.327
> 
> 标签：asp.net, dll

我们有包含数百个从 ASP.NET 应用程序启动的自定义客户端进程的 DLL。我们的客户在执行数据输入时运行这些进程，通常每个客户只有 1 个进程。在任何一天，我们都可能更新其中的 2 或 3 个流程。

目前，这些都包含在一系列 DLL 中，这意味着我们每天要发布几次我们的应用程序。结果，任何登录的客户端都会被引导出系统，因为发布会导致应用重新启动。

有没有一种方法可以更新这些 DLL 而无需每次都完全发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:08:06.790

如果您的客户端进程具有通用 API，那么您可以在 WCF（或类似）服务中单独托管 DLL，并远程调用客户端进程。所以基本上，考虑转向面向服务的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:59:31.717

您可以切换到 SQL 服务器或状态服务器会话，以便在应用重新启动后保留会话和登录用户。或者将这些 dll 存储在 APP_DATA 中并动态加载。然后当然你必须考虑一些刷新系统并用新上传的刷新加载的dll。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T21:04:31.737

查看 Microsoft 的[托管可扩展性框架 (MEF)](http://mef.codeplex.com/)。它不仅提供依赖管理，还提供像库加载这样的插件。很可能这正是您正在寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T21:03:51.837

没有*明智*的方法可以避免应用程序重新启动。请注意对“明智”一词的强调。

# api - 以编程方式创建 WinSSHD 虚拟帐户

> ID：10198908
> 
> 赞同：0
> 
> 时间：2012-04-17T20:47:35.840
> 
> 标签：api

我们使用 WinSSHD 作为 SFTP 服务器，我希望我的 ASP.NET C# Web 应用程序的用户能够在服务器上创建一个新的虚拟帐户。（Web 应用程序的每个用户都有多个需要单独 FTP 帐户的合作伙伴，因此我不方便每次都手动创建它们。）这些虚拟帐户中的每一个都需要有一个挂载点，以便其路由路径指向不同的物理路径。

目前我只知道如何在 WinSSHD 控制面板中执行此类操作。是否有某种API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:32:04.533

我已经想通了。我最终做了这样的事情：

```
// This Guid is the uuid of the coclass in WinsshdCfgManip.idl (depends on your WinSSHD version)
dynamic config = Activator.CreateInstance(Type.GetTypeFromCLSID(new Guid("A3E7581A-5182-41C4-9AFD-2DFF07F06167"), server, true));

config.SetSite("WinSSHD");
config.LockWinsshdSettings();
config.LoadWinsshdSettings();

config.ProcessInstruction(@"access.virtAccounts.New.virtAccount """ + username + @"""");
config.ProcessInstruction(@"access.virtAccounts.New.virtPassword.Set """ + password + @"""");
config.ProcessInstruction(@"access.virtAccounts.New.group ""Virtual Users""");
config.ProcessInstruction(@"access.virtAccounts.New.useDefaultWinAccount false");
config.ProcessInstruction(@"access.virtAccounts.New.winDomain """ + winDomain + @"""");
config.ProcessInstruction(@"access.virtAccounts.New.winAccount """ + winAccount + @"""");
config.ProcessInstruction(@"access.virtAccounts.New.loginAllowed yes");
config.ProcessInstruction(@"access.virtAccounts.New.passwordAuth required");
config.ProcessInstruction(@"access.virtAccounts.New.permitRemoteAdmin no");
config.ProcessInstruction(@"access.virtAccounts.New.mapRemoteHomeDir no");
config.ProcessInstruction(@"access.virtAccounts.New.allowSessionJobBreakaway no");
config.ProcessInstruction(@"access.virtAccounts.New.permitTerminalShell no");
config.ProcessInstruction(@"access.virtAccounts.New.permitExecRequests no");
config.ProcessInstruction(@"access.virtAccounts.New.permitSftp yes");
config.ProcessInstruction(@"access.virtAccounts.New.sfsMap.useDefaultSfsMap false");

// Backslashes in rootPath need to be escaped as \\ for ProcessInstruction
// E.g.:
// string rootPath = @"C:\\FTP\\MyFtpFolder";
config.ProcessInstruction(@"access.virtAccounts.New.sfsMap.mountPoints.1.realRootPath """ + rootPath + @"""");

config.ProcessInstruction(@"access.virtAccounts.NewCommit");

config.SaveWinsshdSettings(1);
config.UnlockWinsshdSettings(); 
```

# ruby-on-rails-3 - Hartl Rails 教程(3.2) 8.2.5 Rspec 失败

> ID：10198912
> 
> 赞同：1
> 
> 时间：2012-04-17T20:48:00.207
> 
> 标签：ruby-on-rails-3, rspec, ruby-on-rails-3.2, railstutorial.org

更新：

我的测试没有提交用户信息。相关代码在上一章的练习中：

```
 describe "after saving user" do
    before { click_button submit }
    let(:user) { User.find_by_email('user@example.com') }
    it { should have_selector('title', text: user.name) }
    it { should have_selector('div.alert.alert-success', text: 'Welcome') }
    it { should have_link('Profile') }
  end 
```

/更新

我已经完成了第 8.2.5 节（注册时登录）并且应用程序的行为与描述的完全一样：

*   用户在注册时登录
*   然后重定向到他们的个人资料页面
*   其中标题已更改为包含“退出”链接。

但是我对“退出”链接的测试失败了。这是我的代码，全部从教程中复制：

相关控制器代码（users_controller.rb）：

```
def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    flash[:success] = "Welcome to the Sample App!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

相关视图代码（_header.html.erb）：

```
<ul class="dropdown-menu">
  <li><%= link_to "Profile", current_user %></li>
  <li><%= link_to "Settings", '#' %></li>
  <li class="divider"></li>
  <li>
    <%= link_to "Sign out", signout_path, method: "delete" %>
  </li>
</ul> 
```

相关测试代码（user_pages_spec.rb）：

```
describe "signup" do

  before { visit signup_path }

  let(:submit) { "Create my account" }

  describe "with invalid information" do
    it "should not create a user" do
      expect { click_button submit }.not_to change(User, :count)
    end
  end

  describe "with valid information" do
    before do
      fill_in "Name",         with: "Example User"
      fill_in "Email",        with: "user@example.com"
      fill_in "Password",     with: "foobar"
      fill_in "Confirmation", with: "foobar"
    end

    it "should create a user" do
      expect { click_button submit }.to change(User, :count).by(1)
    end

    describe "after saving user" do
      it { should have_link('Profile') }
    end
  end
end 
```

错误是`rspec ./spec/requests/user_pages_spec.rb:47 # User pages signup with valid information after saving user`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:36:27.090

我认为最后一个“描述”块应该是这样的：

```
 describe "after saving user" do
    before { click_button submit }
    it { should have_content('Profile') }
  end 
```

在检查页面上是否有适当的内容之前，测试错过了单击“提交”按钮。

# objective-c - 通过指针枚举 NSString 字符

> ID：10198913
> 
> 赞同：5
> 
> 时间：2012-04-17T20:48:03.040
> 
> 标签：objective-c, ios, string, cocoa-touch

如何通过将每个 unichar 从中拉出来枚举 NSString？我可以使用 characterAtIndex 但这比通过递增的 unichar* 来做要慢。我在 Apple 的文档中没有看到不需要将字符串复制到第二个缓冲区的任何内容。

像这样的东西是理想的：

```
for (unichar c in string) { ... } 
```

或者

```
unichar* ptr = (unichar*)string; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T21:05:41.227

`-characterAtIndex:`您可以通过先将其转换为 IMP 形式来加快速度：

```
NSString *str = @"This is a test";

NSUInteger len = [str length]; // only calling [str length] once speeds up the process as well
SEL sel = @selector(characterAtIndex:);

// using typeof to save my fingers from typing more
unichar (*charAtIdx)(id, SEL, NSUInteger) = (typeof(charAtIdx)) [str methodForSelector:sel];

for (int i = 0; i < len; i++) {
    unichar c = charAtIdx(str, sel, i);
    // do something with C
    NSLog(@"%C", c);
} 
```

编辑：看来[`CFString`参考](https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetCharactersPtr)包含以下方法：

```
const UniChar *CFStringGetCharactersPtr(CFStringRef theString); 
```

这意味着您可以执行以下操作：

```
const unichar *chars = CFStringGetCharactersPtr((__bridge CFStringRef) theString);

while (*chars)
{
    // do something with *chars
    chars++;
} 
```

如果您不想为处理缓冲区分配内存，那么这就是要走的路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T20:55:28.180

您唯一的选择是将字符复制到新缓冲区中。这是因为 NSString 类不保证有一个可以使用的内部缓冲区。最好的方法是使用该[`getCharacters:range:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/getCharacters%3arange%3a)方法。

```
NSUInteger i, length = [string length];
unichar *buffer = malloc(sizeof(unichar) * length);
NSRange range = {0,length};
[string getCharacters:buffer range:range];
for(i = 0; i < length; ++i) {
    unichar c = buffer[i];
} 
```

如果您使用可能很长的字符串，最好分配一个固定大小的缓冲区并以块的形式枚举字符串（这实际上是枚举的工作速度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T20:44:47.147

`getCharacters:range:`根据ughoavgfhw在他的回答中的建议，我创建了一个块式枚举方法，该方法与固定大小的缓冲区一起使用。它避免了`CFStringGetCharactersPtr`返回 null 并且不必 malloc 大缓冲区的情况。您可以将其放入 NSString 类别，或者如果您愿意，可以将其修改为将字符串作为参数。

```
-(void)enumerateCharactersWithBlock:(void (^)(unichar, NSUInteger, BOOL *))block
{
    const NSInteger bufferSize = 16;
    const NSInteger length = [self length];
    unichar buffer[bufferSize];
    NSInteger bufferLoops = (length - 1) / bufferSize + 1;
    BOOL stop = NO;
    for (int i = 0; i < bufferLoops; i++) {
        NSInteger bufferOffset = i * bufferSize;
        NSInteger charsInBuffer = MIN(length - bufferOffset, bufferSize);
        [self getCharacters:buffer range:NSMakeRange(bufferOffset, charsInBuffer)];
        for (int j = 0; j < charsInBuffer; j++) {
            block(buffer[j], j + bufferOffset, &stop);
            if (stop) {
                return;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-19T09:04:04.977

我所知道的枚举字符的最快可靠方法`NSString`是使用这个隐藏在视线中的相对鲜为人知的核心基础宝石（CFString.h）。

```
NSString *string = <#initialize your string#>
NSUInteger stringLength = string.length;
CFStringInlineBuffer buf;
CFStringInitInlineBuffer((__bridge CFStringRef) string, &buf, (CFRange) { 0, stringLength });

for (NSUInteger charIndex = 0; charIndex < stringLength; charIndex++) {
    unichar c = CFStringGetCharacterFromInlineBuffer(&buf, charIndex);
} 
```

如果您查看这些内联函数的源代码`CFStringInitInlineBuffer()`和`CFStringGetCharacterFromInlineBuffer()`，您会发现它们处理了所有令人讨厌的细节，例如`CFStringGetCharactersPtr()`返回`NULL`、`CFStringGetCStringPtr()`返回`NULL`、默认为较慢`CFStringGetCharacters()`以及将字符缓存在 C 数组中以尽可能快地访问。这个 API 确实值得更多的宣传。

需要注意的是，如果您`CFStringInlineBuffer`在非零偏移量处初始化 ，则应将*相对字符索引*传递给`CFStringInlineBuffer()`，如标题注释中所述：

> 假设您正在进行顺序或本地化访问，接下来的两个函数允许快速访问字符串的内容。要使用，请`CFStringInitInlineBuffer()`使用`CFStringInlineBuffer`（例如在堆栈上）和要查看的字符串中的范围进行调用。然后根据需要调用任意`CFStringGetCharacterFromInlineBuffer()`多次，**并使用该范围内的索引（相对于该范围的开头）**。这些是 INLINE 函数，最终`CFString`只会偶尔调用一次，以填充缓冲区。`CFStringGetCharacterFromInlineBuffer()`如果指定了原始范围之外的位置，则返回 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T20:53:05.307

这将起作用：

```
char *s = [string UTF8String];
for (char *t = s; *t; t++)
  /* use as */ *t; 
```

[编辑] 如果你真的需要 unicode 字符，那么你别无选择，只能使用*length*和*characterAtIndex*。从文档中：

> NSString 类有两个原始方法——length 和 characterAtIndex:——它们为其接口中的所有其他方法提供了基础。length 方法返回字符串中 Unicode 字符的总数。characterAtIndex：通过索引访问字符串中的每个字符，索引值从 0 开始。

所以你的代码是：

```
 for (int index = 0; index < string.length; index++)
    { 
      unichar c = [string characterAtIndex: index];
      /* ... */
    } 
```

[编辑 2]

另外，不要忘记 NSString 是“免费桥接”到 CFString 的，因此所有非 Objective-C 的直接 C 代码接口函数都是可用的。相关的是`CFStringGetCharacterAtIndex`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T20:54:24.997

我不认为你能做到这一点。`NSString`是许多类的抽象接口，这些类不保证字符数据的内部存储，因此完全有可能没有字符数组来获取指针。

如果您的问题中提到的选项都不适合您的应用程序，我建议您为此创建自己的字符串类，或者使用原始 malloc 的 unichar 数组而不是字符串对象。

# android - 默认应用更新

> ID：10198918
> 
> 赞同：0
> 
> 时间：2012-04-17T20:48:13.523
> 
> 标签：android, google-play

我安装了一个较低版本的应用程序作为默认应用程序。我在 Google Play 中有更高版本的应用程序。

他们拥有相同的证书。我会从 Google Play 自动更新设备中的应用程序。我在下面看到了类似的帖子：Prompt Android App User to Update App if current version <> market version[有没有办法在 Android 上自动更新应用程序？](https://stackoverflow.com/questions/3057771/is-there-a-way-to-automatically-update-application-on-android)但这些帖子都没有回答这个问题。他们一定有一些解决办法。就像 Goole Maps、Gmail、Pluse news 和 Adob​​e Flash player 11 一样。我不知道 Google Play 应用程序如何显示它以及它们如何自动更新？你能帮助我吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:07:28.980

您无法自动升级应用程序...

谷歌播放中有一个选项“允许自动更新”。如果用户为您的应用选择此设置，那么它将自动更新。

我相信对于谷歌地图，这个设置可能默认开启。

# android - Android更改相机声音

> ID：10198919
> 
> 赞同：0
> 
> 时间：2012-04-17T20:48:31.220
> 
> 标签：android, audio, camera

我使用此处定义的相机活动代码： [Android Save Image to SD Card](https://stackoverflow.com/questions/8713660/android-save-image-to-sd-card)

任何人都可以帮助我如何更改相机的默认声音，声音在原始文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:51:08.460

相机 API 在调用 takePicture() 时自动播放声音（对于视频录制，在调用 MediaRecorder.start/stopRecording() 时）。

普通应用程序无法修改此行为，播放的声音也无法更改为其他声音。这部分是由于隐私问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:12:58.193

您应该能够按照[SDK 链接](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)中的说明在 Camera.ShutterCallback 中播放声音。我找不到参考资料，但我记得拍摄照片时需要始终播放声音，这可能意味着默认声音将始终播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:14:06.890

我认为声音嵌入在系统源代码中用于拍照。似乎没有任何面向公众的 API 旨在禁用/更改声音，所以我认为你是 SOL

作为用户，如果您使用的是 root 设备，您可以找到它播放的声音文件并将其重命名，这样它将无法找到要播放的正确文件，因此不会在任何时候发出任何声音图片被采取。如果您的应用程序在有根设备上运行，它可能只是暂时重命名文件并在完成后修复它。但是当您的应用程序尝试这样做时，会弹出一个超级用户权限。

# javascript - 从 JS 函数返回

> ID：10198922
> 
> 赞同：0
> 
> 时间：2012-04-17T20:48:37.063
> 
> 标签：javascript, dojo, esri

基本的 JS 问题，请放轻松我是新手 :)

我将 2 个变量传递给 findRelatedRecords 函数，该函数查询其他相关表并组装一个对象数组，称为数据。由于 findRelatedRecords 有这么多内部函数，我很难将数据数组从函数中取出。

就目前而言，我在 findRelatedRecords 中调用 showWin，但我想更改它，以便我可以直接从 findRelatedRecords 中获取数据数组，而不是跳转到 showWin

```
function findRelatedRecords(features,evtObj){
    //first relationship query to find related branches

    var selFeat = features
    var featObjId = selFeat[0].attributes.OBJECTID_1        
    var relatedBranch = new esri.tasks.RelationshipQuery();
    relatedBranch.outFields = ["*"];
    relatedBranch.relationshipId = 1; //fac -to- Branch
    relatedBranch.objectIds = [featObjId];
        facSel.queryRelatedFeatures(relatedBranch, function(relatedBranches) {
        var branchFound = false;
        if(relatedBranches.hasOwnProperty(featObjId) == true){
            branchFound = true;
            var branchSet = relatedBranches[featObjId]
            var cmdBranch = dojo.map(branchSet.features, function(feature){
                return feature.attributes;
            })
        }

        //regardless of whether a branch is found or not, we have to run the cmdMain relationship query
        //the parent is still fac, no advantage of the parent being branch since cmcMain query has to be run regardless
        //fac - branch - cmdMain - cmdSub <--sometimes
        //fac - cmdMain - cmdSub <-- sometimes

        //second relationship query to find related cmdMains            
        var relatedQuery = new esri.tasks.RelationshipQuery();
        relatedQuery.outFields = ["*"];
        relatedQuery.relationshipId = 0; //fac -to- cmdMain
        relatedQuery.objectIds = [featObjId];
        //rather then listen for "OnSelectionComplete" we are using the queryRelatedFeatures callback function
        facSel.queryRelatedFeatures(relatedQuery, function(relatedRecords) {
            var data = []           
            //if any cmdMain records were found, relatedRecords object will have a property = to the OBJECTID of the clicked feature
            //i.e. if cmdMain records are found, true will be returned; and continue with finding cmdSub records
            if(relatedRecords.hasOwnProperty(featObjId) == true){
                var fset = relatedRecords[featObjId]
                var cmdMain = dojo.map(fset.features, function(feature) {
                    return feature.attributes;
                })
                //we need to fill an array with the objectids of the returned cmdMain records
                //the length of this list == total number of mainCmd records returned for the clicked facility
                objs = []
                for (var k in cmdMain){
                    var o = cmdMain[k];
                    objs.push(o.OBJECTID)                       
                }

                //third relationship query to find records related to cmdMain (cmdSub)
                var subQuery = new esri.tasks.RelationshipQuery();
                subQuery.outFields = ["*"];
                subQuery.relationshipId = 2;
                subQuery.objectIds = [objs]
                subTbl.queryRelatedFeatures(subQuery, function (subRecords){

                    //subRecords is an object where each property is the objectid of a cmdMain record
                    //if a cmdRecord objectid is present in subRecords property, cmdMain has sub records
                    //we no longer need these objectids, so we'll remove them and put the array into cmdsub
                    var cmdSub = []
                    for (id in subRecords){
                        dojo.forEach(subRecords[id].features, function(rec){
                            cmdSub.push(rec.attributes)
                        })
                    }
                    var j = cmdSub.length;
                    var p;
                    var sub_key;
                    var obj;
                    if (branchFound == true){
                        var p1 = "branch";
                        obj1 = {};
                        obj1[p1] = [cmdBranch[0].Branches]
                        data.push(obj1)
                    }                        
                    for (var i=0, iLen = cmdMain.length; i<iLen; i++) {
                        p = cmdMain[i].ASGMT_Name
                        obj = {};
                        obj[p] = [];
                        sub_key = cmdMain[i].sub_key;
                        for (var j=0, jLen=cmdSub.length; j<jLen; j++) {
                            if (cmdSub[j].sub_key == sub_key) {
                                obj[p].push(cmdSub[j].Long_Name);
                            }
                        }
                        data.push(obj);
                    }
                    showWin(data,evtObj) <---this would go away
                })
            }
            //no returned cmdRecords; cmdData not available
            else{
                p = "No Data Available"
                obj = {}
                obj[p] = []
                data.push(obj)
            }
            showWin(data,evtObj) <--this would go away
        })
    })
} 
```

我想通过调用来访问数据数组

```
function findRelatedRecords(feature,evt){
    //code pasted above
}

function newfunct(){
    var newData = findRelatedRecords(feature,evt)
    console.log(newData)
} 
```

这可能吗？

谢谢！

**编辑**

多解释一点......

我正在将一个对象事件监听器连接到一个函数，如下所示：

```
function b (input){
    dojo.connect(obj, "onQueryRelatedFeaturesComplete", getData);
    obj.queryRelatedFeatures(input);
    console.log(arr) //<----this doesn't work
}

function getData(relatedFeatData){
    var arr = [];
    //populate arr
    return arr;
} 
```

所以当 obj.QueryRelatedFeatures() 完成时， getData 触发；这部分工作正常，但是如何从函数 b 访问 arr ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:53:37.307

**发布编辑更新：**

由于连接此事件的方式，您不能简单地从中返回数据。返回只会让 Dojo 调用与`onSelectionComplete`.

运行时，井的事件`init`很久以前`findRelatedRecords`就会执行/触发`onSelectionComplete`，这就是您看到`undefined`/`null`值的原因。使用这种系统的唯一方法是 1) 像您已经在做的那样调用一个方法，或者 2) 触发一个自定义事件/消息（从技术上讲，它仍然只是调用一个方法）。

如果你想让这个方法更容易使用，你应该重构/提取它的片段，使其成为一个更小的函数，但包含在许多函数中。此外，将其更改为在方法结束时只有一个退出点`findRelatedRecords`会有所帮助。内部定义的函数`subTbl.queryRelatedFeatures()`将是一个*很好*的起点。

抱歉，在这种情况下，您受到 Dojo 提供的内容的限制。

**预编辑答案：**

只需从中返回您的数据。任何有 showWin 调用的地方都使用这个返回值。

```
 return {
    data: data,
    evtObj: evtObj
  } 
```

然后你的 newfunct 看起来像这样。

```
function newfunct(){
    var newData = findRelatedRecords(feature,evt);
    console.log(newData);
    console.log(newData.data);
    console.log(newData.evtObj);
} 
```

如果您只需要那个“数据”对象，那么将您的 return 更改为 just `return data;`。

**此外，开始使用分号来终止语句。**

# ruby-on-rails - Rails：如何模拟 gem，例如 fb_graph

> ID：10198925
> 
> 赞同：4
> 
> 时间：2012-04-17T20:48:50.700
> 
> 标签：ruby-on-rails, unit-testing, rspec, mocking, fb-graph

我正在使用 gem fb_graph。我是 Rails 新手，正在尝试弄清楚如何使用 rspec 模拟这个 gem。（[https://github.com/nov/fb_graph](https://github.com/nov/fb_graph)）

我试图测试的代码是：

```
facebook_user = FbGraph::User.new('me', :access_token => access_token['credentials']['token']).fetch
return facebook_user.friends 
```

我在考虑以下几点：

```
fb_graph = mock(FbGraph)
user = mock(FbGraph::User)
fb_graph.should_receive(:new).should_return(user)
user.should_receive(:fetch).should_return(fb_graph_user)
user.should_receive(:friends) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T17:46:40.097

我不会从 gem 中模拟代码，即[“不要模拟你不拥有的类型”](http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html)。

但是，如果您想存根该代码，请尝试以下操作：

```
user = stub('fbgraph user', :friends => :foo_or_whatever_you_want)
FbGraph::User.stub_chain(:new,:fetch).and_return(user) 
```

如果您需要检查消息期望，则需要更多的工作来从`#new`and`#fetch`中返回一个模拟，并结合 using `#should_receive`。

# c++ - 深度优先搜索的实现和可改进性

> ID：10198929
> 
> 赞同：0
> 
> 时间：2012-04-17T20:49:10.777
> 
> 标签：c++, performance, algorithm, graph, depth-first-search

我已经`DFS`按照我的想法进行编码，并且没有参考任何教科书或伪代码来获取想法。我想我有一些代码行进行了不必要的计算。关于降低算法复杂性的任何想法？

```
vector<int>visited;

bool isFound(vector<int>vec,int value)
{
    if(std::find(vec.begin(),vec.end(),value)==vec.end())
        return false;
    else
        return true;
}

void dfs(int **graph,int numOfNodes,int node)
{
    if(isFound(visited,node)==false)
        visited.push_back(node);
    vector<int>neighbours;
    for(int i=0;i<numOfNodes;i++)
        if(graph[node][i]==1)
            neighbours.push_back(i);

    for(int i=0;i<neighbours.size();i++)
        if(isFound(visited,neighbours[i])==false)
            dfs(graph,numOfNodes,neighbours[i]);
}

void depthFirstSearch(int **graph,int numOfNodes)
{
    for(int i=0;i<numOfNodes;i++)
        dfs(graph,numOfNodes,i);
} 
```

**PS：** 有人可以给我发一个链接，教我如何插入高质量的 C++ 代码。我试过语法高亮，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T21:04:34.623

您的 DFS 具有 O(n^2) 时间复杂度，这非常糟糕（它应该在 O(n + m) 中运行）。

此行会破坏您的实现，因为在向量中搜索所花费的时间与其长度成正比：

```
 if(std::find(vec.begin(),vec.end(),value)==vec.end()) 
```

为避免这种情况，您可以记住在布尔值数组中访问过的内容。

DFS 的第二个问题是，对于较大的图形，它可能会导致堆栈溢出，因为最坏情况的递归深度等于图形中的顶点数。解决这个问题也很简单：`std::list<int>`用作您自己的堆栈。

因此，执行 DFS 的代码应该或多或少像这样：

```
// n is number of vertices in graph
bool visited[n]; // in this array we save visited vertices

std::list<int> stack;
std::list<int> order;

for(int i = 0; i < n; i++){
  if(!visited[i]){
    stack.push_back(i);
    while(!stack.empty()){
      int top = stack.back();
      stack.pop_back();
      if(visited[top])
        continue;

      visited[top] = true;
      order.push_back(top);
      for(all neighbours of top)
         if(!visited[neighbour])
           stack.push_back(neighbour); 
    }
  }
} 
```

# c# - 使用表单从按钮启动 msi

> ID：10198935
> 
> 赞同：0
> 
> 时间：2012-04-17T20:49:48.067
> 
> 标签：c#, forms, webforms, windows-installer

我觉得问这个问题真的很愚蠢，因为我知道我不应该在这个简单的任务上遇到这么多麻烦......但是当用户按下表单的按钮时，我正在尝试启动我的 .msi。我确信这是一个单线，但我一生都无法弄清楚这一点。我的桌面上有 .MSI 文件，所以我希望按钮也能够让用户选择 msi 文件的位置。如果有人可以帮助我，那就太好了...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T20:51:05.020

查看[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)。

```
Process.Start("path to msi"); 
```

要获取文件的路径，可以使用[`FileDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.aspx)类（假设是 winforms）。

```
OpenFileDialog openFileDialog1 = new OpenFileDialog();

if(openFileDialog1.ShowDialog() == DialogResult.OK)
{
   Process.Start(openFileDialog1.FileName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:53:47.417

看看使用它来获取文件：

```
FileDialog dialog = new FileDialog(); 
```

# java - WindowListener 无法按预期工作

> ID：10198936
> 
> 赞同：3
> 
> 时间：2012-04-17T20:49:51.623
> 
> 标签：java, swing, jframe, listener

我希望我的 GUI 在出现 JOptionPane 时进行一些检查。因为我找不到任何其他方式，我虽然每次应用程序窗口失去焦点时都可以这样做（它只是检查一个字符串）。出于这个原因，我在我的 JFrame 上添加了以下代码：

```
appFrame.addWindowListener(new WindowAdapter() {

            @Override
            public void windowLostFocus(WindowEvent e) {
                System.out.println("Focus Lost");

            }
            @Override
            public void windowClosing(WindowEvent e) {
                //some other stuff here that work
            }
}); 
```

窗口关闭侦听器工作正常。虽然当 JFrame 没有聚焦时，什么也没有发生。每次我从 JFrame 切换到其他窗口时，不应该打印“Focus Lost”吗？另外，显示 JOptionPane 时会触发此方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T21:04:51.013

对我来说，关键是您希望通过更改字符串变量来触发 GUI 更改。我认为解决此问题的最佳方法是使用 PropertyChangeListenerSupport 使 String 变量成为绑定属性。这样，您可以让 GUI 将 PropertyChangeListener 附加到保存 String 变量的类，然后在它发生更改时收到通知，从而允许您适当地更新 GUI。

如果您走这条路，请考虑为观察到的类提供一个 SwingPropertyChangeSupport 字段，以便在 Swing 事件线程上通知侦听器，并希望避免任何 Swing 并发问题。

这是一个简短的例子：

```
import java.awt.Dimension;
import java.awt.event.*;
import java.beans.*;
import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class ShowPropertyChangeSupport {
   @SuppressWarnings("serial")
   private static void createAndShowGui() {
      final MainGUI mainGui = new MainGUI("Title");
      final ObservedClass observedClass = new ObservedClass();
      observedClass.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent pcEvt) {
            if (pcEvt.getPropertyName().equals(ObservedClass.BOUND_PROPERTY)) {
               mainGui.setTitle(pcEvt.getNewValue().toString());
            }
         }
      });

      mainGui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      mainGui.pack();
      mainGui.setLocationRelativeTo(null);
      mainGui.setVisible(true);

      int timerDelay = 6000; // every 6 seconds
      new Timer(timerDelay, new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent arg0) {
            String result = JOptionPane.showInputDialog(mainGui,
                  "Please enter a String", "Set GUI title", JOptionPane.PLAIN_MESSAGE);
            if (result != null) {
               observedClass.setBoundProperty(result);
            }
         }
      }){{setInitialDelay(1000);}}.start();
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

// ** note that I don't like extending JFrame,
// but will do this for sake of example simplicity
class MainGUI extends JFrame {
   public MainGUI(String title) {
      super(title);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(400, 300);
   }

}

class ObservedClass {
   public static final String BOUND_PROPERTY = "bound property";
   private String boundProperty = "";
   private SwingPropertyChangeSupport spcSupport = new SwingPropertyChangeSupport(
         this);

   public SwingPropertyChangeSupport getSpcSupport() {
      return spcSupport;
   }

   public void setSpcSupport(SwingPropertyChangeSupport spcSupport) {
      this.spcSupport = spcSupport;
   }

   public String getBoundProperty() {
      return boundProperty;
   }

   public void setBoundProperty(String boundProperty) {
      String oldValue = this.boundProperty;
      String newValue = boundProperty;
      this.boundProperty = newValue;
      spcSupport.firePropertyChange(BOUND_PROPERTY, oldValue, newValue);
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      spcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      spcSupport.removePropertyChangeListener(listener);
   }

} 
```

在我看来，这一切的关键是使用监听器，以便具有绑定属性的类——被监听的字符串——不知道 GUI、监听器和 GUI，同样不知道具有绑定属性的类。它们是完全解耦的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T23:48:03.530

我不会详细说明您为什么要做您正在做的事情，但由于以下原因，它没有按您的预期工作：

[`WindowAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html)是一个便利类，因此您可以创建一个侦听器并将其注册用于多种类型的事件。您只为一组事件注册了它，您还需要通过以下方式为焦点事件注册它：`Window.addWindowFocusListener()`

```
WindowAdapter adapter = new WindowAdapter() {
        @Override
        public void windowLostFocus(WindowEvent e) {
            System.out.println("Focus Lost");
        }
        @Override
        public void windowClosing(WindowEvent e) {
            //some other stuff here that work
        }
    };
appFrame.addWindowListener(adapter);
appFrame.addWindowFocusListener(adapter); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T21:47:00.477

1）`JOptionPane`/模态`JDialog`有模态问题，但如果所有容器都有自己的所有者，模态可能是优势，你需要知道真正的解决方法（我将讨论如何测试它）

*   的数量`Window[]`，如果`isDisplayable()`，那么您可以使用以下

*   你可以得到[SwingUtilities#getAccessibleIndexInXxx](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#getAccessibleStateSet%28java.awt.Component%29)可以返回[AccessibleState](http://docs.oracle.com/javase/6/docs/api/javax/accessibility/AccessibleState.html)

*   [KeyboardFocusManager](http://docs.oracle.com/javase/6/docs/api/java/awt/KeyboardFocusManager.html#getCurrentKeyboardFocusManager%28%29)（非常有趣的多点触控方法）返回 getXxxFocusXxx 方法

*   [Focus，FocusSubsystem](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)是相当异步的，

2) 恕我直言，我不知道你为什么需要那个，为什么我需要知道这个，关于业务规则，你总是需要知道....，如果在 EDT 上完成

*   [Focus，FocusSubsystem](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)是相当异步的，

# objective-c - 无法从弹出窗口加载 WebView 中的 URL

> ID：10198943
> 
> 赞同：0
> 
> 时间：2012-04-17T20:50:05.403
> 
> 标签：objective-c, ios, xcode

我有一个收藏夹弹出框和一个 webView。当您在弹出框的 tableview 中选择一个单元格时，webview 应该加载该 URL，但我得到一个 SIGABRT 或 BAD_ACCESS。

这是一些代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
if (tableView == favoritesTable1) {
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        textField.text = cell.textLabel.text;
        [web loadRequest:[[NSURLRequest alloc] initWithURL:[[NSURL alloc] initWithString:cell.textLabel.text]]];
        [cell release];
        [favoritesTable1 reloadData];
    }
} 
```

我想得到这样但完整的工作：[http ://cl.ly/3O2y1S3b3d031L2C122M](http://cl.ly/3O2y1S3b3d031L2C122M)

PS：弹出框是来自设置 webview 的同一类的新 viewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:55:09.357

您不应该在每次计算单元时都启动数据数组。这似乎非常低效且容易出错。阵列的设置属于例如`viewDidLoad`。

此外，寻找您的`didSelectRowAtIndexPath`方法，因为您应该尝试将 URL 发送到 Web 视图，而不是`cellForRowAtIndexPath`.

# php - MailChimp 表单正在加载页面提交

> ID：10198944
> 
> 赞同：0
> 
> 时间：2012-04-17T20:50:05.550
> 
> 标签：php, api, mailchimp

我在 MailChimp 的网站上使用以下内容提交表单：

```
<span id="response"><? require_once('inc/store-address.php'); if($_GET['submit']){ echo storeAddress(); } ?></span>
<form id="subform" action="<?=$_SERVER['PHP_SELF']; ?>" method="get">

            <fieldset>
              <p>
                <input name="email" id="email" onfocus="if (this.value == 'Email') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Email';}" value="Email"  class="required email" />
              </p>
              <div class="button button-orange"> <span class="form_button clearfix">
                <input type="submit" class="sub_submit" name="submit" value="subscribe" />
                </span> </div>
              <div id="result_sub"></div>
            </fieldset>
          </form> 
```

一切正常，除了提交时，它会重新加载整个页面。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:16:25.880

这很正常（您对此无能为力），但我很确定 Mail Chimp 有一个选项可以让您控制用户在单击提交后进入的页面。

# jquery - 添加空选项并使其成为默认选择

> ID：10198945
> 
> 赞同：0
> 
> 时间：2012-04-17T20:50:08.537
> 
> 标签：jquery

这让我发疯！我想添加一个空选项，然后将其选中。这是我的代码：

```
 $(rowToBeAdded.find("select")[0]).prepend("<option selected='selected' value=''></option>"); 
```

rowToBeAdded 是一个 TR 元素。

由于某种原因，它总是选择第二个元素。

**更新：**

$(rowToBeAdded.find("select")[0]).prepend("").val('');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:12:41.550

问题出在您的选择器上。我想这就是你要找的：

```
$(rowToBeAdded).find("select:first").prepend("<option selected='selected' value=''></option>"); 
```

这是一个完整的示例（[Demo](http://jsfiddle.net/yr93D/1/)）：

```
<script type="text/javascript">
    $(function() {
        var rowToBeAdded = $("#table1 tr");
        if (rowToBeAdded) {
            $(rowToBeAdded).find("select:first").prepend("<option selected='selected' value=''></option>");
        }
    });​
</script>
<table id="table1">
    <tr>
        <td>
            <select id="select1">
                <option value="volvo">Volvo</option>
                <option value="saab">Saab</option>
                <option value="mercedes">Mercedes</option>
                <option value="audi">Audi</option>
            </select>
            <select id="select2">
                <option value="volvo">Volvo</option>
                <option value="saab">Saab</option>
                <option value="mercedes">Mercedes</option>
                <option value="audi">Audi</option>
            </select>
        </td>
    </tr>
</table>​ 
```

这是输出：

![在此处输入图像描述](../Images/7aa7f7dd6031bcdd285265c10d891e12.png)

最后，如果您需要，这里有一个非常[好的参考指南。](http://comp345.awardspace.com/select_element_cheatsheet.pdf)

# symfony - 多种翻译的可翻译实体和形式

> ID：10198946
> 
> 赞同：2
> 
> 时间：2012-04-17T20:50:12.320
> 
> 标签：symfony, doctrine-orm

从以下位置考虑 Category 实体及其 CategoryTranslation 实体：http: [//github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md#personal-translations](http://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md#personal-translations)

我想创建一个表格来轻松添加翻译。

我有一个有用的功能解决方案，因为它与 TranslationType 部分通用。但它仅限于更新..（-> 抽象类使用）

```
class TranslationType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('locale')
            ->add('field')
            ->add('content')
        ;
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'Gedmo\Translatable\Entity\MappedSuperclass\AbstractPersonalTranslation'
        );
    }

    public function getName()
    {
        return 'translation';
    }
} 
```

* * *

```
class CategoryType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('title')
            ->add('description')
            ->add('translations', 'collection', array(
                'type' => new TranslationType()
            ))
        ;
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'Category'
        );
    }

    public function getName()
    {
        return 'categ';
    }
} 
```

你看到解决方案了吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:49:07.830

答案：

```
class CategoryType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('title')
            ->add('description')
            ->add('translations', 'collection', array(
                'type' => new TranslationType(),
                'allow_add' => true,
                'by_reference' => false,
                'options' => array(
                    'data_class' => 'XXX\YYYBundle\Entity\CategoryTranslation'
                )
            ))
        ;
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'XXX\YYYBundle\Entity\Category'
        );
    }

    public function getName()
    {
        return 'categ';
    }
} 
```

我制作了一个专用包[https://github.com/a2lix/TranslationFormBundle](https://github.com/a2lix/TranslationFormBundle)以便于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:37:51.817

你必须写一些技巧。

这是我的解决方案的一部分（用于 SonataAdminBundle），[https:](https://gist.github.com/2116290) //gist.github.com/2116290 但我还没有设法让它工作。它真的可以给你一个推动力。

如果你发现了什么，请告诉我。

# android - 为什么我的Android Listview点击后会从透明变成不透明？

> ID：10198950
> 
> 赞同：1
> 
> 时间：2012-04-17T20:50:29.020
> 
> 标签：android, listview, click, transparency, element

为什么当我单击它时我的 Android Listview 会从透明变为不透明，我该如何更改？Listview 具有背景和透明元素，它们可以滚动并完美运行，除非我单击它。当我单击它时，单击的元素变为不透明并且背景不再可见。

如何更改行为，以便单击元素时不透明度不会改变？

编辑：焦点突出显示对此负责吗？我怎样才能禁用它？

编辑：Android 2.3.4，Tegra 2 设备，使用 Config.ARGB_8888 参数创建的位图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T21:23:02.603

正如我所怀疑的那样，这是焦点。它杀死了透明度，因为焦点颜色不透明。

我通过以下方式删除了该效果：

```
android:listSelector="#00000000" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:55:52.580

将 android:cacheColorHint="#0000" 添加到 xml 中的列表视图

# c++ - C++“非常量引用的无效初始化”错误

> ID：10198954
> 
> 赞同：-1
> 
> 时间：2012-04-17T20:50:40.713
> 
> 标签：c++, reference, constructor, pass-by-reference

我的“策略”类有两个不同版本的构造函数。使用其中一个构造函数时，我似乎无法通过引用传递 Policy 对象，我不明白为什么不这样做。

**重载的构造函数：**

```
Policy::Policy(int testing) { 
    initAge=160;    
    initState=1;    

    reset();        

    x[0]=4;
    x[1]=2;
    ub[0]=10;
    ub[1]=10;
    lb[0]=0;
    lb[1]=0;

}

Policy::Policy() {
    initAge=160;
    initState=1;

    reset();    

    x[FRQ]=4;
    x[BEG]=40*4;
    x[END]=75*4;
    for(int i=0; i<240; i++)
        x[2+i]=4.0;
    x[GS]=2;

    lb[0]=1;
    ub[0]=80;
    for(int i=1;i<3;i++) {
        lb[i]=160;
        ub[i]=400;
    }
    for(int i=3;i<243;i++) {
        lb[i]=1;
        ub[i]=16;
    }
    lb[243]=2;
    ub[243]=4;

} 
```

**这是我给出错误的代码。**

```
void sampleMIXD(Constraints& space, Policy& p);

int main(int argc, char** argv) {

//  Policy policy(1); // Works
    Policy policy(); // Does not work

    Constraints space(2);

    sampleMIXD(space, policy);

    return 0;
} 
```

**错误信息：**

```
'../main.cpp:64: 错误：从'Policy (*)()' 类型的临时变量中对'Policy' 类型的非常量引用的无效初始化
../MIXD.h:12: 错误: 在传递'void sampleMIXD(Constraints&, Policy&)'的参数 2
```

如果不是`Policy policy();`我用 编译`Policy policy(1);`，那么编译器不会抱怨。请帮忙！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:53:03.610

```
Policy policy(); // Does not work 
```

这是[最令人头疼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。尝试

```
Policy policy; 
```

基本上，编译器将您的变体视为一个函数的声明，该函数不接受任何内容并返回策略。它类似于

```
int rand(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T20:53:29.693

摆脱变量声明`()`之后。`policy`编译器认为这是一个函数声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:54:24.513

正如您从错误输出中看到的那样，`Policy policy()`创建了一个函数，然后您尝试将其发送到`sampleMIXD`. 用代替构造它`Policy policy;`（即省略`()`）。

# node.js - 向浏览器发送文本

> ID：10198957
> 
> 赞同：0
> 
> 时间：2012-04-17T20:50:50.380
> 
> 标签：node.js, express, pug

我已经设法使用 Express 在 Node.js 中进行文件上传工作，并且在代码中我正在检查它是否是用户尝试上传的图像。

如果文件成功上传，我想向用户显示一条消息，直接向带有上传表单的 HTML 页面显示。如果用户尝试上传的文件不是图像，或者在上传过程中发生了其他事情，情况也应该如此。

下面的代码有效（res.send...），但它会打开一个仅包含消息的新页面。

我的问题是：如何更改我的代码，以便将消息直接发送到 HTML 页面？如果它有任何用处，我正在使用 Jade。

提前致谢！

```
app.post('/file-upload', function(req, res, next) {
    var fileType = req.files.thumbnail.type;
    var divided = fileType.split("/");
    var theType = divided[0];

    if (theType === "image"){
        var tmp_path = req.files.thumbnail.path;

        var target_path = './public/images/' + req.files.thumbnail.name;

        fs.rename(tmp_path, target_path, function(err) {
            if (err) throw err;

            fs.unlink(tmp_path, function() {
                if (err) {
                    throw err;
                    res.send('Something happened while trying to upload, try again!');
                }
                res.send('File uploaded to: ' + target_path + ' - ' + req.files.thumbnail.size + ' bytes');
            });
        });
    }

    else {
        res.send('No image!');
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:12:30.500

据我了解，您正在尝试向已经打开的浏览器窗口发送消息？

你可以做的几件事，

1.  Ajax 它，发送帖子，并处理返回信息。
2.  像现在一样提交它，但是设置一个 flash 消息（查看[http://github.com/visionmedia/express-messages](http://github.com/visionmedia/express-messages)）并 res.render 表单页面，或者 res.redirect 到表单函数
3.  now.js 或类似的解决方案。这将允许客户端使用服务器端函数和服务器端代码来运行客户端函数。所以你要做的是提交，将帖子值传递给服务器端函数，服务器端函数将处理它并触发客户端函数（显示一条消息）

对于我来说，选项#2 可能是最安全的选择，因为没有启用 javascript 的客户将能够使用它。至于可用性#1 或#3 会给最终用户一个更流线型的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:07:39.127

您可以使用 WebSocket。我推荐使用 Socket.IO，它很容易使用。在客户端，您将有一个事件处理程序，它将使用 JavaScript 将新信息附加到该页面。

然后，您可以让服务器例如说：

```
socket.emit('error', "Something happened while trying to upload, try again!"); 
```

客户将使用：

```
socket.on('error', function(data){
  //alert?
  alert(data);
}); 
```

[http://socket.io/#how-to-use](http://socket.io/#how-to-use)

# ckeditor - 如何在 CKEDITOR 中设置默认源？

> ID：10198959
> 
> 赞同：0
> 
> 时间：2012-04-17T20:51:02.740
> 
> 标签：ckeditor

而不是做 CKEDITOR.setData(); 我想做类似“CKEDITOR.setSource();”的事情。那可能吗？

# android - Android 获取已下载应用的 Facebook 好友

> ID：10198965
> 
> 赞同：7
> 
> 时间：2012-04-17T20:51:16.943
> 
> 标签：android, facebook

我正在使用 Facebook Android SDK。有没有一种简单的方法可以让用户的朋友下载了该应用程序？例如，应用程序 Draw Something 实现了这一点。我似乎找不到有关此主题的任何信息

我猜如果可能的话，httppost 中需要一些额外的信息来访问这些信息。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-04T06:48:40.547

***注意：从 3.14 版本开始，我/朋友只会返回同样使用该应用程序的朋友，因此不推荐使用以下实现。请参阅新的“Invitable Friends”或“Taggable Friends”API 以获取替代方案。

使用新的**Facebook SDK for Android (3.0)**很容易获得用户的好友列表。以下是代码：

```
private void requestFacebookFriends(Session session) {
    Request.executeMyFriendsRequestAsync(session,
            new Request.GraphUserListCallback() {
                @Override
                public void onCompleted(List<GraphUser> users,
                        Response response) {
                    // TODO: your code for friends here!
                }
            });
} 
```

然而，为了获取正在使用您的 Facebook 应用程序的用户的朋友有点复杂（由于 Facebook API 文档）。但是**，是的，这是可能的**。

首先，创建您的请求：

```
private Request createRequest(Session session) {
    Request request = Request.newGraphPathRequest(session, "me/friends", null);

    Set<String> fields = new HashSet<String>();
    String[] requiredFields = new String[] { "id", "name", "picture",
            "installed" };
    fields.addAll(Arrays.asList(requiredFields));

    Bundle parameters = request.getParameters();
    parameters.putString("fields", TextUtils.join(",", fields));
    request.setParameters(parameters);

    return request;
} 
```

Note that you need to insert the field **"installed"** in your request. I'm requesting the user picture path with the same request. Check your possibilities [here](https://developers.facebook.com/docs/reference/api/user/).

Next, you can use above code to create your request and then get your friends:

```
private void requestMyAppFacebookFriends(Session session) {
    Request friendsRequest = createRequest(session);
    friendsRequest.setCallback(new Request.Callback() {

        @Override
        public void onCompleted(Response response) {
            List<GraphUser> friends = getResults(response);
            // TODO: your code here
        }
    });
    friendsRequest.executeAsync();
} 
```

Note that using this generic request, you don't receive a GraphUser list as response. You'll need following code to get the response as GraphUser list:

```
private List<GraphUser> getResults(Response response) {
    GraphMultiResult multiResult = response
            .getGraphObjectAs(GraphMultiResult.class);
    GraphObjectList<GraphObject> data = multiResult.getData();
    return data.castToListOf(GraphUser.class);
} 
```

Now you can use your user's friend list, with the information if each of your friends use your Facebook app:

```
GraphUser user = friends.get(0);
boolean installed = false;
if(user.getProperty("installed") != null)
    installed = (Boolean) user.getProperty("installed"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:45:48.000

我以这种方式实现它

```
Bundle params = new Bundle();

params.putString("fields", "name, picture, location, installed"); 
```

在显示列表中的项目期间，在 getView() 方法中我这样做了

```
boolean b = jsonObject.getBoolean("installed");

if (b){
    Log.d("VIVEK",jsonObject.getString("name"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T21:11:45.280

我希望这篇文章对你有帮助： [我如何让我的朋友使用我的 facebook App 和 graph api asp.net](https://stackoverflow.com/questions/5018472/how-can-i-get-my-friends-using-my-facebook-app-with-graph-api-asp-net)

根据[Facebook SDK](https://developers.facebook.com/docs/reference/fql/user/)，该`has_added_app`字段已弃用，您应该使用`is_app_user`

# php - jQuery $.getJSON：将数组传递给 PHP

> ID：10198968
> 
> 赞同：0
> 
> 时间：2012-04-17T20:51:34.873
> 
> 标签：php, javascript, jquery, get

我有 javascript 将数组传递给 PHP：

```
 var mapIDArray = ["4f8d7684791635ec2e000000", "4f8cbc087916359181000000"];

         $.getJSON("rebound.php",
            { 
                'mapIDs[]' : mapIDArray
            },

            function(output){

                console.log(output);

            }
        ); 
```

在rebound.php中，我尝试读取传入的数组（var_dump、print_r等），如：

```
print_r($_GET['mapIDs[]']); 
```

但没有运气...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:57:44.013

您不需要`[]`在名称中添加 。

```
var mapIDArray = ["4f8d7684791635ec2e000000", "4f8cbc087916359181000000"];
$.getJSON("rebound.php",
{ 
   mapIDs: mapIDArray
},
function(output){
    console.log(output);
}); 
```

然后在您的 PHP:`$_GET['mapIDs']`中将是一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:58:44.603

它会`print_r($_GET['mapIDs']);`在服务器端，并且

```
var mapIDArray = ["4f8d7684791635ec2e000000", "4f8cbc087916359181000000"];
$.ajax("rebound.php",
            dataType: 'json',
            data:
            { 
                'mapIDs[]' : mapIDArray[0],
                'mapIds[]' : mapIdArray[1],
            },
            traditional: true,
            success: function(output){

                console.log(output);

            }
        ); 
```

在客户端。关键问题是，首先，PHP 将其视为一个名为“mapIDs”的数组，尽管它是 mapIDs[] 作为 GET 参数，其次，多个字段需要多个条目。

# prolog - 理解序言谓词

> ID：10198969
> 
> 赞同：0
> 
> 时间：2012-04-17T20:52:03.617
> 
> 标签：prolog, turbo-prolog

我在理解以下序言谓词时遇到了一些麻烦，我可以理解它连接了一些字符，也产生了可能的列表（第一个和第二个目标），但我不明白它是如何做到的？它是如何执行的？

```
domains 

i=integer
l=i*
slist=string*
clist=char*

predicates 

nondeterm conc(clist,clist,clist). 

clauses 

conc([],L,L). 
conc([H|L1],L2,[H|L3]):- 
conc(L1,L2,L3). 
```

第一个目标

```
goal 

conc(['a','b'],['c','d'],L).

result 

L=['a','b','c','d'] 
```

第二个目标

```
goal

conc(L1,L2,['a','b','c']).

result 

L1=[], L2=['a','b','c']
L1=['a'], L2=['b','c']
L1=['a','b'], L2=['c']
L1=['a','b','c'], L2=[]
4 Solutions 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:24:06.263

我既不是序言专家，也不是逻辑专家，但我会尝试解释我认为它是如何工作的。

调用后：

```
<- conc(['a','b'],['c','d'],L). 
```

Prolog 将寻找与签名匹配的谓词。在这种情况下，这将是：

```
conc([H|L1],L2,[H|L3]) 
```

它试图用给定的数据解析变量。

```
 |1: H:=['a'], L1:=['b'], L2:=['c','d'] 
```

现在它通过这些数据调用进入递归：

```
<- conc(['b'], ['c','d'], L3).
 |2: H:=['b'], L1:=[], L2:=['c','d']
<- conc([], ['c','d'], L3). 
```

最后一行导致 prolog 使用带有签名的谓词：

```
conc([],L,L). 
```

解决：

```
 |3: L:=['c','d'] 
```

现在 Prolog 能够构建将 L 移交给递归堆栈的连接列表。

```
 |2: [H|L3]:=['b','c','d']
 |1: [H|L3]:=['a','b','c','d'] 
```

我希望这是朝着正确方向的暗示。也许您应该阅读[这篇文章](http://en.wikipedia.org/wiki/Unification_%28computer_science%29)以进行澄清

# node.js - Mongoose - 按字符串查询嵌套文档

> ID：10198973
> 
> 赞同：1
> 
> 时间：2012-04-17T20:52:39.943
> 
> 标签：node.js, mongodb, mongoose

我有以下架构：

```
var invitationSchema = new Schema({
    emailAddress : String
});

var eventSchema = new Schema({
    name : String,
    start_date : Date,
    end_date : Date,
    venue : { type : Schema.ObjectId, ref : 'Venue' },
    invitees : [invitationSchema]
}); 
```

我觉得哪个不错……？
我正在尝试执行以下查询：

```
Events.findOne({'invitees._id' :'4f8dcb06ee21783d74000040'}, function(err, myEvent) {
    //myEvent is null?
}); 
```

myEvent 为空，即使在我的事件集合中，有一个事件文档，其中包含一组受邀者，其中一个的 id 为 4f8dcb06ee21783d74000040。

我读[了这个](https://github.com/LearnBoost/mongoose/issues/389)，它说它现在应该可以工作了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:38:20.027

我的错 - 正在查询 ObjectID 但被存储为字符串......

傻我。

# nservicebus - NServiceBus，找不到消息类型的传奇

> ID：10198974
> 
> 赞同：2
> 
> 时间：2012-04-17T20:52:43.660
> 
> 标签：nservicebus

我下面的传奇没有处理 ValidateRegistration 和 ValidateRegistration 命令。我看到“找不到消息类型 Registrations.Messages.ValidateRegistration with id ...的传奇”消息。

我查找 saga 的配置不正确吗？请帮忙！

谢谢

PS：我在注册过程中使用的是通用主机，并且我使用的是 NServiceBus.Lite 配置文件。

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher, IWantCustomInitialization
{
    #region Implementation of IWantCustomInitialization

    public void Init()
    {
        var kernel = new StandardKernel();
        kernel.Load(new BackendModule());

        //Configure.Instance.Configurer.ConfigureProperty<RegistrationSaga>(x => x.Factory, kernel.Get<IAggregateRootFactory>());
        Configure.With().NinjectBuilder(kernel);
    }

    #endregion
}

public class RegistrationSagaData : IContainSagaData
{
    #region Implementation of ISagaEntity

    public virtual Guid Id { get; set; }
    public virtual string Originator { get; set; }
    public virtual string OriginalMessageId { get; set; }

    public virtual RegistrationID RegistrationID { get; set; }
    public virtual bool IsValidated { get; set; }
    public virtual string RegistrationType { get; set; }

    #endregion
}

public class RegistrationSaga : Saga<RegistrationSagaData>,
                                IAmStartedByMessages<StartRegistration>,
                                IHandleMessages<ValidateRegistration>,
                                IHandleMessages<CancelRegistration>
{
    public RegistrationFactory Factory { get; set; }

    public override void ConfigureHowToFindSaga()
    {
        ConfigureMapping<StartRegistration>(data => data.RegistrationID, registration => registration.ID);
        ConfigureMapping<ValidateRegistration>(data => data.RegistrationID, registration => registration.ID);
        ConfigureMapping<CancelRegistration>(data => data.RegistrationID, registration => registration.ID);
    }

    #region Implementation of IMessageHandler<StartRegistration>

    public void Handle(StartRegistration message)
    {
        Data.IsValidated = false;
        Data.RegistrationType = message.RegistrationType;

        Bus.SendLocal(new CreateRegistration
        {
            RegistrationType = message.RegistrationType,
            ID = message.ID
        });

        Console.WriteLine("======> handled StartRegistration");
    }

    #endregion

    #region Implementation of IMessageHandler<ValidateRegistration>

    public void Handle(ValidateRegistration message)
    {
        MarkAsComplete();

        Console.WriteLine("======> handled ValidateRegistration");
    }

    #endregion

    #region Implementation of IMessageHandler<CancelRegistration>

    public void Handle(CancelRegistration message)
    {
        Console.WriteLine("======> handled CancelRegistration");

        MarkAsComplete();
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:51:38.573

您的 StartRegistration 处理程序未将 RegistrationID 添加到 Saga 的数据中。因此，您对 ConfigureHowToFindSaga 的覆盖被映射到在处理其他命令时没有值的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:30:44.617

就在今天，我听说 Ninject 不能开箱即用地处理 setter 注入 - 尝试将其切换到构造函数注入，看看是否可行。

# debugging - 如何创建一个使用“表达式”评估其参数的 LLDB 别名

> ID：10198975
> 
> 赞同：4
> 
> 时间：2012-04-17T20:52:46.307
> 
> 标签：debugging, command, expression, alias, lldb

我正在尝试创建一个 LLDB `alias`，它`expression`使用参数 ( `%1`) 对`alias`. 我尝试了很多很多不同的语法组合，但似乎任何`%1`在 an中使用的东西都`expression`无法解析。

```
(lldb) version
LLDB-112.1 
```

这按预期工作：

```
(lldb) expr (char*) strdup(argv[1])
(char *) $23 = 0x000000010061c090 "--calc" 
```

当我创建一个`alias`包含`%1`示例时失败。

```
(lldb) command alias dup expr (char*) strdup(%1)
(lldb) dup argv[1]
error: expected expression
error: 1 errors parsing expression 
```

如何创建一个 LLDB 别名来评估其参数`expression`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:58:58.527

要使表达式中的参数起作用，请使用**命令正则表达式**而不是别名，如下所示：

```
command regex dup 's/(.+)/expr (char*) strdup(%1)/' 
```

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/7690181/i-cant-get-this-simple-lldb-alias-to-work/12195214#12195214)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:10:31.800

尝试命令别名 dup expr -- (char*) strdup( $1 ); 然后你会看到

```
(lldb) dup "2387987"
(const char [8]) $5 = "2387987" {
  (const char) [0] = '2'
  (const char) [1] = '3'
  (const char) [2] = '8'
  (const char) [3] = '7'
  (const char) [4] = '9'
  (const char) [5] = '8'
  (const char) [6] = '7'
  (const char) [7] = '\0' 
```

对于 lldb 构建 153

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:54:19.487

我已经玩了很多 %1 别名，但还没有运气。这是我能来的最接近的，它并不美妙：

[.lldbinit]

```
command alias foo expr fooFunction( 
```

然后在运行调试器时，以下命令实际上会调用带有输入栏的函数 fooFunction：

```
(lldb) foo bar) 
```

无与伦比的近括号不是错字。它需要在那里匹配别名中的开放括号。

# c++ - 无法解释 C++ 性能

> ID：10198983
> 
> 赞同：2
> 
> 时间：2012-04-17T20:53:18.647
> 
> 标签：c++, performance

如果您有一个永远不会改变且始终为零的变量 A、一个函数 F、一个函数 G 和一个函数 H，并在现代版 GCC 上使用 -O3 优化的现代英特尔台式机处理器上调用以下代码：

```
for(i = 0; i < a_big_number; i++)
{
if(A != 0) F();
else G();
} 
```

执行需要 2 秒。请注意，F 永远不会被调用，因为 A 始终为 0。或者，

```
for(i = 0; i < a_big_number; i++)
{
if(A != 0) H();
else G();
} 
```

只需 1 秒即可执行。同样，A 始终为 0，并且永远不会调用 H。最后，

```
for(i = 0; i < a_big_number; i++)
{
G();
} 
```

只需 0.5 秒即可执行。

鉴于前两个示例中的条件语句，为什么 F 和 H 的内容很重要？既然他们从来没有被召唤过，为什么他们所做的事情会有所不同呢？并且鉴于 Intel 处理器具有复杂的分支预测，处理器难道不应该弄清楚 G() 总是被调用，甚至永远不会在条件语句上浪费时间吗？我知道条件指令应该浪费一些时间，但我不明白为什么它会浪费这么多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:10:33.450

假设编译器理解这`A`是一个常量，它应该把这个代码：

```
for(i = 0; i < a_big_number; i++)
{
    if(A != 0) F();
    else G();
} 
```

进入这个：

```
if(A != 0)
    for(i = 0; i < a_big_number; ++i)
        F();
else
    for(i = 0; i < a_big_number; ++i)
        G(); 
```

`F()`或者如果常量看起来是编译时常量，则完全优化函数调用。

如果没有发生这种情况（即可能存在副作用或其他问题 - 编译器不保证您优化的方式和内容），则循环将遇到来自分支错误预测的性能损失。如果 A 没有变化并且被调用的函数足够小，CPU 应该锁定循环并记住分支，这样它就不会一遍又一遍地重复同样的错误。另一方面，循环可能会展开，这可能会造成很大的伤害，因为它无法并行化，只会破坏代码大小和 CPU 必须跟踪的许多事情。

你如何测量执行时间对我来说是一个谜，以及你在循环中调用的那个函数正在做什么。例如，您可以测量流程执行换出。因此，除非您提供完整的工作示例并详细说明您的测量方法，否则无法告诉您发生了什么。

无论如何，我敢打赌，您的时间测量不正确，或者您在未显示的代码中做了坏事，或者以上所有情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T01:06:48.897

据我所知，编译器无法确定分支是否不会执行。编译器能做的最好的事情就是预测哪个分支更有可能。

# c++ - 计算保存在文本文件中的 2 个纬度和经度之间的距离？

> ID：10198985
> 
> 赞同：7
> 
> 时间：2012-04-17T20:53:25.437
> 
> 标签：c++, c

我环顾四周，仍然找不到任何可以帮助我的东西！我编写了一个程序来使用它们的纬度和经度计算两个城市之间的距离，城市的详细信息保存在一个文件中，然后在我的程序中加载到 BST 中！到目前为止，一切正常，除了当我运行假设计算距离的代码时，我得到每个城市的相同答案！我不太确定为什么我在每个城市都得到相同的答案！请帮我指出正确的方向？

这是计算距离的代码

```
#include <cmath> 
#define pi 3.14159265358979323846

string userResponse;
float globalLat1, globalLon1, globalLat2, globalLon2;

for(int j= 0; j < 2; j++){
        string whatever;
        if (j==0){
          bool hasbeenfound = false;
           do{
                //ask the user to enter their first city of their choice
                 whatever = "first ";
                  cout << "Enter your " + whatever + "City" << endl;
                  cout << "-------------------" << endl;
                  cin >> userResponse;
                  cout << endl;
                  if (Cities->search(userResponse)) //check if the entered city already exist
                  {
                  hasbeenfound = true;
                  }
                  else{
                       cout << "City not Found" << endl;
                       cout << endl;
                       }
                  //globalCity1 = Cities->sRootName;
                  globalLat1 = Cities->sLatitude;
                  globalLon1 = Cities->sLongitude;
                  }
                  while(hasbeenfound == false); //while the entered city hasn't been found, repeat the process

               }else
               {
                   bool hasbeenfound = false;
                    do{
                        //ask the user to enter their second city of their choice
                              whatever = "second ";
                              cout << endl;
                              cout << "Enter your " + whatever + "City" << endl;
                              cout << "-------------------" << endl;
                              cin >> userResponse;
                              cout << endl;
                              if (Cities->search(userResponse)) //check if the entered city already exist
                              {
                              hasbeenfound = true;
                              }
                              else{
                                   cout << "City not Found" << endl;
                                   }
                              //globalCity2 = Cities->sRootName;
                              globalLat2 = Cities->sLatitude;
                              globalLon2 = Cities->sLongitude;
                              }
                    while(hasbeenfound == false); //while the entered city hasn't been found, repeat the process

                       }
                    }

// This function converts decimal degrees to radians
double deg2rad(double deg) {
return (deg * pi / 180);
};

//  This function converts radians to decimal degrees
double rad2deg(double rad) {
return (rad * 180 / pi);
};

//distance calculations
cout << endl;
distan = sin(globalLat1)) * sin(deg2rad(globalLat2)) + cos(deg2rad(globalLat1)) * cos(deg2rad(globalLat2)) * cos(globalLon2 - globalLon1);
distan = rad2deg(distan);
distan = distan * 60 * 1.1515;
distan = (6371 * pi * distan)/180;
cout << "The Distance between the to cities is: " << distan << " kilometers" << endl; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-18T08:20:21.623

据说，Haversine 公式是您的答案：

```
#include <math.h>
#include <cmath> 
#define earthRadiusKm 6371.0

// This function converts decimal degrees to radians
double deg2rad(double deg) {
  return (deg * M_PI / 180);
}

//  This function converts radians to decimal degrees
double rad2deg(double rad) {
  return (rad * 180 / M_PI);
}

/**
 * Returns the distance between two points on the Earth.
 * Direct translation from http://en.wikipedia.org/wiki/Haversine_formula
 * @param lat1d Latitude of the first point in degrees
 * @param lon1d Longitude of the first point in degrees
 * @param lat2d Latitude of the second point in degrees
 * @param lon2d Longitude of the second point in degrees
 * @return The distance between the two points in kilometers
 */
double distanceEarth(double lat1d, double lon1d, double lat2d, double lon2d) {
  double lat1r, lon1r, lat2r, lon2r, u, v;
  lat1r = deg2rad(lat1d);
  lon1r = deg2rad(lon1d);
  lat2r = deg2rad(lat2d);
  lon2r = deg2rad(lon2d);
  u = sin((lat2r - lat1r)/2);
  v = sin((lon2r - lon1r)/2);
  return 2.0 * earthRadiusKm * asin(sqrt(u * u + cos(lat1r) * cos(lat2r) * v * v));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-03T11:14:34.873

使用`boost.geometry`

```
typedef boost::geometry::model::point<
    double, 2, boost::geometry::cs::spherical_equatorial<boost::geometry::degree>
> spherical_point;

spherical_point p(lon1_degree, lat1_degree);
spherical_point q(lon2_degree, lat2_degree);
double dist = boost::geometry::distance(p, q);
double const earth_radius = 6371.0; // Km
double dist_km = dist*earth_radius; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-29T19:28:13.657

对于需要快速的人：

```
 // Haversine formula:

    func deg2rad(_ deg: Double) ->Double {
        return deg * Double.pi  / 180.0
    }

    func distanceEarth(lat1d: Double, lon1d: Double, lat2d: Double, lon2d: Double) ->Double {
    let  earthRadiusKm = 6371.0

    let lat1r = deg2rad(lat1d);
    let lon1r = deg2rad(lon1d);
    let lat2r = deg2rad(lat2d);
    let lon2r = deg2rad(lon2d);
    let u = sin((lat2r - lat1r)/2);
    let v = sin((lon2r - lon1r)/2);
    return 2.0 * earthRadiusKm * asin(sqrt(u * u + cos(lat1r) * cos(lat2r) * v * v));
}

//test here.... https://andrew.hedges.name/experiments/haversine/

func doTestHaversine(){

    let km = distanceEarth(lat1d: 38.898556, lon1d: -77.037852, lat2d: 38.897147, lon2d: -77.043934)
     print(km)  // should show : 0.549 or similar..
} 
```

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-04-17T20:57:39.617

这是我用来查找距离的方法 ![这可能更容易](../Images/de39010e1bcece7c2c5de91c5945b1e5.png)

或者这个，不考虑地球的“弯曲”![在此处输入图像描述](../Images/88969c61d9438bceb14495e732f29bac.png)

# algorithm - 关于 RFC 5104 中的边界集

> ID：10198999
> 
> 赞同：0
> 
> 时间：2012-04-17T20:54:03.833
> 
> 标签：algorithm, geometry, rtp, rfc

在[RFC5104](https://www.rfc-editor.org/rfc/rfc5104#section-3.5.4.2)的第 3.5.4.2 节中，推导了一种推导一组线的边界集的算法。基本上每条线的形式为 y=mx+b，目标是找到识别凸包的交叉点（相当于确定哪些接收器与 RTP 媒体会话中的比特率自适应相关）。以下观察取自 RFC

> 这些观察得出的结论是，在处理 TMMBR 元组以选择初始边界集时，应该按照
> 开销增加的顺序对元组进行排序和处理。一旦将
> 特定元组添加到边界集，所有
> 尚未选择且开销较低的元组都可以消除，因为边界多边形的下一侧
> 必须比最新添加
> 的元组。

我不认为这是正确的。假设您有一条线，例如 RFC 图 1 中用符号“a”指示的那条线。可以画一条斜率较大的线，例如用符号“b”表示的线，从线“a”下方的 Y 轴开始。换句话说，如果“b”线在 Y 轴上的截距较低，则应首先考虑“b”线。但如果这是真的，那么算法的其余部分就不起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:01:55.677

我相信这里的关键，也是贪婪方法能够完全解决问题的原因，是排序。*虽然您的直观声明是正确的（即存在*使该解决方案的证明无效的线段），但也保证*不会出现*在否则会出现问题的情况下。

Wikipedia 有[大量关于此问题的解决方案的参考资料](http://en.wikipedia.org/wiki/Convex_hull)。对于该问题及其异构体的更优雅、封闭形式的解决方案，请考虑在[http://cs.stackexchange.com](http://cs.stackexchange.com)或[http://math.stackexchange.com](http://math.stackexchange.com)上更抽象地询问该问题的细节。

祝您好运，改造 RTP 以满足您的需求。