# StackOverflow 问答 11849000-11849999

# jquery - 在 Drupal 6 中使用 jQuery 提交表单

> ID：11849006
> 
> 赞同：0
> 
> 时间：2012-08-07T15:16:18.303
> 
> 标签：jquery, forms, drupal, drupal-6, drupal-modules

我正在使用 Drupal 6，我有一个非常简单的表单，只有三个我在自定义模块中创建的字段。我还将表单作为一个块放置在左侧导航中。这是一个搜索表格。它有两个选择框和一个自由格式文本字段。目标是能够从字段中获取值并使用 jQuery 进行 AJAX 调用，执行搜索并将 JSON 与结果一起返回到前端，并让 jQuery 循环并显示结果。不过，我在遵循 Drupal 工作流程时确实遇到了困难，尤其是因为表单位于一个块中。那么如何在我的 hook_form_submit 中正确处理 jQuery 调用呢？理想情况下，我希望他们在任何页面上，如果他们填写左侧边栏中的表格并提交，他们将被移植到处理 jQuery 的“结果”页面，但我只是可以' t 弄清楚如何/何时/在何处添加 JavaScript/jQuery 以正确处理此问题的正确流程。如果我在我的 hook_form_submit 中并尝试处理表单，我如何将结果显示到主要内容区域的结果页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:06:07.700

我觉得你在这里有相互矛盾的要求。您想使用 ajax 加载表单的结果，但还想将用户重定向到结果页面。

如果您要将用户重定向到另一个页面，只需在视图中创建搜索表单，然后在表单提交中执行 drupal_goto('search-page')。由于您不需要进行页面加载ajax。

如果您想在不进行页面加载的情况下加载结果，这就是 ajax 派上用场的地方。然后，我将使用 ajax 处理程序完全跳过 drupal。不要添加按钮类型，只提交一个没有处理程序的按钮。然后在 ajax 文件中将行为附加到按钮按下。

ajax 应该为此 ajax 回调调用一些唯一的 url，例如“ajax/search-form”。在您的 hook_menu 中注册此网址，例如

```
$items['ajax/search-form/%/%/%'] = array(
  'title' => 'my title'
  'page callback' => 'my_module_ajax_search'
  'page arguments' => array(2,3,4),
);
return $items; 
```

然后在你的函数中：

```
function my_module_ajax_search($first_param, $second, $third) {
  // Generate output and return it to the calling ajax function through print.
  $output = '<div>my output</div>'
  print $output;

  // Make sure Drupal closes out then bails so it doesn't output another
  // page wrapper.
  module_invoke_all('exit'); // Called automatically in Drupal 7 but not 6.
  exit(); 
} 
```

你的 Ajax 看起来像：

```
$('.button').click(function(
  value1 = $('.box1').value() // dont remember the actual function to extract a text field value.
  value2 = ...
  $.ajax({
    url: Drupal.settings.basePath + 'ajax/search-form/' + value1 + '/' + value2 + '/' + value3,
    success: function(data) {
      $('.my content').html(data);
    }
  });
) 
```

# r - 无法在 Linux 上安装 sqldf

> ID：11849008
> 
> 赞同：2
> 
> 时间：2012-08-07T15:16:25.220
> 
> 标签：r, sqldf

我在 Linux 上运行 R 版本 2.14.1。当我尝试安装 sqldf 时

`install.packages(sqldf, dependencies=TRUE)`

我收到以下错误：（这些错误导致从终端运行命令，就像使用 Rcmdr UI 一样）

[在此处打开日志](https://dl.dropbox.com/u/19154683/sqldffailure.txt)

我似乎找不到有类似问题的人。如果我在 Windows PC 上运行 install 命令，它会毫无问题地安装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:24:14.310

您的错误日志有以下行：

```
In file included from RS-PQescape.c:7:0:
RS-PostgreSQL.h:23:26: fatal error: libpq-fe.h: No such file or directory
compilation terminated.
make: *** [RS-PQescape.o] Error 1 
```

尝试`libpq-dev`为您的特定 linux 发行版安装软件包。

* * *

顺便说一句，当你遇到这样的错误时，很明显它`libpq-fe.h`丢失了。只需输入`libpq-fe.h ubuntu`谷歌以查看您需要安装的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:41:47.797

安装 libpq-dev，MySQL，重新安装 JAVA 并将 R 更新到最新版本。SQLdf 现在就像一个魅力。谢谢大家的提醒。

# java - 无法在java中解析日期年份

> ID：11849009
> 
> 赞同：3
> 
> 时间：2012-08-07T15:16:29.533
> 
> 标签：java, date

我有一个`MM/dd/yy`格式的日期。我从一个 XML 文件中得到它。比如说，它是`10/03/11`.

我在上面执行以下代码：

```
try {
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    System.out.println("dateStr: " + dateStr);
    date = sdf.parse(dateStr);
    System.out.println("dateStr After: " + sdf.format(date));
} catch(Exception e) {
    System.out.println("Error when formatting date");
} 
```

输出是：

```
日期：10/03/11
dateStr 之后：10/03/0011

```

我似乎无法理解`10/03/2011`。任何想法为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T15:16:57.633

当您解析的日期有两个字符的年份时，您`simpleDateFormatter`也应该`yy`只。

**编辑：**

```
// First convert to date object
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yy");
System.out.println("dateStr: " + dateStr);

Date date = sdf.parse(dateStr);

SimpleDateFormat sdf2 = new SimpleDateFormat("MM/dd/yyyy");
sdf2.format(date);

// Then, format it to get 2011 with another date format.
System.out.println("dateStr After: " + sdf.format(date));
System.out.println("dateStr NEXT After: " +  sdf2.format(date)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T15:17:54.590

这是一个解析异常...使用`MM/dd/yy`而不是`MM/dd/yyyy`.

喜欢：

```
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yy"); 
```

# c# - 从多行文本框中选择数据，数据在数据集 c#

> ID：11849021
> 
> 赞同：1
> 
> 时间：2012-08-07T15:17:46.827
> 
> 标签：c#

我有一个多行`textbox`，我想允许用户在多行中键入以`textbox`查找 中的数据`dataset`并选择存储在`dataset`. 匹配的应该显示在`datagridview`.

**示例**：在数据库中，我有一个名为“名称”的列，如果我`texbox`在第一行输入多行 John 并在第二行输入 Nary，那么我应该在`datagridview`. 我愿意使用`dataview`、`dataset`或`datagridview`。

请帮忙！！

# java - 初始化后对 JTable 的行进行着色

> ID：11849022
> 
> 赞同：0
> 
> 时间：2012-08-07T15:17:47.693
> 
> 标签：java, swing, netbeans, jtable, renderer

我通过提供一些示例代码来澄清我之前的问题

```
import java.awt.Color;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class TestTable extends javax.swing.JFrame
{
private JButton jButton1;
private JScrollPane jScrollPane1;
private JTable jTable1;

public TestTable()
{
    initComponents();
}

private void initComponents(){

    ///////////////////////////////////////////////
    //Initializing components
    jScrollPane1 = new javax.swing.JScrollPane();
    jTable1 = new javax.swing.JTable();
    jButton1 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    String data[][] = { {"A","B","C"},
                        {"R","S","T"},
                        {"U","V","W"}
                      };
    String col[] = {"X","Y","Z"};
    jTable1 = new JTable(new DefaultTableModel(data, col));
    jScrollPane1.setViewportView(jTable1);

    jButton1.setText("jButton1");

    ///////////////////////////////////////////////
    //positioning button and table
    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap(15, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 375,     javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addComponent(jButton1)
                    .addGap(160, 160, 160))))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 117,     javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(47, 47, 47)
            .addComponent(jButton1)
            .addContainerGap(102, Short.MAX_VALUE))
    );

    ///////////////////////////////////////////////
    //create event callback for the button
    jButton1.setText("Change data & color");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    ///////////////////////////////////////////////
    pack();
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

    //change the data in the table
    String data[][] = { {"a","b","c"},
                        {"r","s","t"},
                        {"u","v","w"}  };
    String col[] = {"x","y","z"};
    DefaultTableModel model= new DefaultTableModel(data,col);
    jTable1.setModel(model);

    //change the header in the table
    jTable1.getTableHeader().setBackground(Color.red);

    // IS IT POSSIBLE TO INSERT CODE HERE, WITHOUT REINITIALIZING jTable1,
    // SO THAT CLICKING THE BUTTON WILL TURN THE MIDDLE ROW GREEN?

    //change button text
    jButton1.setText("Changed");
}

public static void main(String[] args) 
{
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
            new TestTable().setVisible(true);
        }
    });

}

} 
```

当我在 main 中运行 TestTable 时，我已经能够更改行的颜色，但是我在从回调中更改行颜色时遇到了问题（如上所述）。我的猜测是插入代码

```
jTable1.getCellRenderer(0, 0).getTableCellRendererComponent(jTable1, String.class, false,false,     0,0).setBackground(Color.green); 
```

由于我在这段代码中指定了表的条目（0,0），我希望这段代码会变成条目（0,0），但是，这会将整个表格变成绿色！注意，我可以毫无问题地更改模型中的数据和标题的颜色。

真诚感谢任何帮助。谢谢克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:58:13.860

这是一个关于如何结合列颜色和行颜色的示例。您基本上在 TableCellRenderer 中执行测试以查看背景是否应该是一种颜色或另一种颜色。

```
import java.awt.Color;
import java.awt.Component;
import java.util.Enumeration;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class TestTable {

    public class MyTableCellRenderer extends DefaultTableCellRenderer implements TableCellRenderer {
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        setBackground(null);
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        setText(String.valueOf(value));
        boolean interestingRow = row % 5 == 2;
        boolean secondColumn = column == 1;
        if (interestingRow && secondColumn) {
            setBackground(Color.ORANGE);
        } else if (interestingRow) {
            setBackground(Color.YELLOW);
        } else if (secondColumn) {
            setBackground(Color.RED);
        }
        return this;
    }

}

private JFrame f;
private JTable table;

protected void initUI() {
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    Vector<String> columNames = new Vector<String>();
    columNames.add("Col 0");
    columNames.add("Col 1");
    columNames.add("Col 2");
    for (int i = 0; i < 20; i++) {
        Vector<Object> v = new Vector<Object>();
        v.add(i % 3 == 0 ? "Hello" : "World");
        v.add("Some data in row " + (i + 1));
        v.add("Some other data in row " + (i + 1));
        data.add(v);
    }
    table = new JTable(new DefaultTableModel(data, columNames));
    Enumeration<TableColumn> en = table.getColumnModel().getColumns();
    while (en.hasMoreElements()) {
        TableColumn tc = en.nextElement();
        tc.setCellRenderer(new MyTableCellRenderer());
    }
    f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setLocationRelativeTo(null);
    f.add(new JScrollPane(table));
    f.pack();
    f.setVisible(true);

}

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            new TestTable().initUI();
        }
    });
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:25:19.917

*   更新[TableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)，不要创建新的[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html) ，那么你也必须将[Renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)添加到新的`JTable`

*   必须在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)上完成更新，否则任何更改都不会在 GUI 中可见，或者您`Exception`从`RepaintManager`

*   `DefaultTableModel`从到 的所有更改`JTables view`都是自动完成的，并且使用的`prepareRenderer`所有行也应该重新绘制，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:04:09.877

谢谢尼克。

在浏览了这些方法之后，我找到了一种简单的方法来突出显示我想要的行，方法是选择它们然后为选择着色

```
 jTable1.setRowSelectionInterval(0, 1);
    jTable1.setSelectionBackground(Color.black); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:54:36.847

即使您更新了问题（正如@Ryan 所说），使用 a`TableCellRenderer`仍然是您想要的。您只需要输入一些特殊代码来指示您想要特别着色的行。这是一个示例（使用您的测试代码）：

```
import java.awt.Color;
import java.awt.Component;
import java.util.HashMap;

import javax.swing.*;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

public class TestTable extends javax.swing.JFrame
{
    private JButton jButton1;
    private JScrollPane jScrollPane1;
    private JTable jTable1;
    private CustomRenderer renderer;

    public TestTable()
    {
        initComponents();
    }

    private void initComponents(){

        ///////////////////////////////////////////////
        //Initializing components
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        String data[][] = { {"A","B","C"},
                {"R","S","T"},
                {"U","V","W"}
        };
        String col[] = {"X","Y","Z"};
        jTable1 = new JTable(new DefaultTableModel(data, col));
        //Setup Renderer
        renderer = new CustomRenderer();
        //Add Renderer to table
        jTable1.getColumnModel().getColumn(0).setCellRenderer(renderer);
        jTable1.getColumnModel().getColumn(1).setCellRenderer(renderer);
        jTable1.getColumnModel().getColumn(2).setCellRenderer(renderer);

        jScrollPane1.setViewportView(jTable1);

        jButton1.setText("jButton1");

        ///////////////////////////////////////////////
        //positioning button and table
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                        .addContainerGap(15, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 375,     javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addContainerGap())
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                                .addComponent(jButton1)
                                                .addGap(160, 160, 160))))
        );
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 117,     javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(47, 47, 47)
                        .addComponent(jButton1)
                        .addContainerGap(102, Short.MAX_VALUE))
        );

        ///////////////////////////////////////////////
        //create event callback for the button
        jButton1.setText("Change data & color");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        ///////////////////////////////////////////////
        pack();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        DefaultTableModel model= (DefaultTableModel)jTable1.getModel();
        //change the data in the table
        String data[][] = { {"a","b","c"},
                {"r","s","t"},
                {"u","v","w"}  };
        String col[] = {"x","y","z"};
        model.setDataVector(data, col);

        // Necessary to re-add listener (because we're creating new columns) 
        jTable1.getColumnModel().getColumn(0).setCellRenderer(renderer);
        jTable1.getColumnModel().getColumn(1).setCellRenderer(renderer);
        jTable1.getColumnModel().getColumn(2).setCellRenderer(renderer);

        //change the header in the table
        jTable1.getTableHeader().setBackground(Color.red);

        // IS IT POSSIBLE TO INSERT CODE HERE, WITHOUT REINITIALIZING jTable1,
        // SO THAT CLICKING THE BUTTON WILL TURN THE MIDDLE ROW GREEN?
        renderer.colorModel.put(1, Color.green); //Yes

        //change button text
        jButton1.setText("Changed");
    }

    public static void main(String[] args) 
    {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TestTable().setVisible(true);
            }
        });

    }

    //Custom Renderer - does the default rendering except if told the row should be a different color
    public static class CustomRenderer extends DefaultTableCellRenderer{

        //Stores what color you want for rows
        public HashMap<Integer, Color> colorModel = new HashMap<Integer, Color>();

        @Override
        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            //Default Rendering
            Component result = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

            //Change color of background (If necessary)
            if(colorModel.get(row) != null){
                setBackground(colorModel.get(row));
            } else if(!isSelected){
                setBackground(null);
            }
            return result;
        }

    }
} 
```

# java - 为什么 Eclipse 3.2 在启动时抛出错误

> ID：11849024
> 
> 赞同：13
> 
> 时间：2012-08-07T15:17:54.847
> 
> 标签：java, eclipse

我有一台 Windows 32 位计算机，刚刚下载了 Eclipse 3.2 SDK，但无法启动它。它立即将以下错误抛出到日志文件中。

我尝试使用 java 1.5 VM 启动它，但仍然没有任何运气。有任何想法吗？谢谢

```
!SESSION 2012-08-07 11:10:28.084 -----------------------------------------------
eclipse.buildId=@build@
java.version=1.7.0_05
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY system.bundle 4 0 2012-08-07 11:10:28.519
!MESSAGE FrameworkEvent.ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start() of bundle system.bundle.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:1014)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:970)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:549)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:484)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.launch(StartLevelManager.java:245)
    at org.eclipse.osgi.framework.internal.core.SystemBundle.resume(SystemBundle.java:155)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:503)
    at org.eclipse.osgi.framework.internal.core.OSGi.launch(OSGi.java:51)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:289)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952)
Caused by: java.lang.IllegalStateException
    at org.eclipse.osgi.internal.baseadaptor.BaseStorage.checkSystemState(BaseStorage.java:654)
    at org.eclipse.osgi.internal.baseadaptor.BaseStorage.getStateManager(BaseStorage.java:634)
    at org.eclipse.osgi.baseadaptor.BaseAdaptor.getPlatformAdmin(BaseAdaptor.java:385)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAdaptorHook.frameworkStart(EclipseAdaptorHook.java:80)
    at org.eclipse.osgi.baseadaptor.BaseAdaptor.frameworkStart(BaseAdaptor.java:260)
    at org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start(SystemBundleActivator.java:55)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:995)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:989)
    ... 18 more
Root exception:
java.lang.IllegalStateException
    at org.eclipse.osgi.internal.baseadaptor.BaseStorage.checkSystemState(BaseStorage.java:654)
    at org.eclipse.osgi.internal.baseadaptor.BaseStorage.getStateManager(BaseStorage.java:634)
    at org.eclipse.osgi.baseadaptor.BaseAdaptor.getPlatformAdmin(BaseAdaptor.java:385)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAdaptorHook.frameworkStart(EclipseAdaptorHook.java:80)
    at org.eclipse.osgi.baseadaptor.BaseAdaptor.frameworkStart(BaseAdaptor.java:260)
    at org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start(SystemBundleActivator.java:55)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$2.run(BundleContextImpl.java:995)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:989)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:970)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:549)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:484)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.launch(StartLevelManager.java:245)
    at org.eclipse.osgi.framework.internal.core.SystemBundle.resume(SystemBundle.java:155)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:503)
    at org.eclipse.osgi.framework.internal.core.OSGi.launch(OSGi.java:51)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:289)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952)

!ENTRY org.eclipse.osgi 4 0 2012-08-07 11:10:28.524
!MESSAGE Startup error
!STACK 1
java.lang.RuntimeException: Exception in org.eclipse.osgi.framework.internal.core.SystemBundleActivator.start() of bundle system.bundle.
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:557)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:484)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:275)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.launch(StartLevelManager.java:245)
    at org.eclipse.osgi.framework.internal.core.SystemBundle.resume(SystemBundle.java:155)
    at org.eclipse.osgi.framework.internal.core.Framework.launch(Framework.java:503)
    at org.eclipse.osgi.framework.internal.core.OSGi.launch(OSGi.java:51)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:289)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952)
!SESSION Tue Aug 07 11:10:28 EDT 2012 ------------------------------------------
!ENTRY org.eclipse.core.launcher 4 0 2012-08-07 11:10:28.526
!MESSAGE Exception launching the Eclipse Platform:
!STACK
java.lang.NullPointerException
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:186)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952) 
```

**更新** 重新安装JVM并使用-vm路径参数后，我仍然收到以下错误

```
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:65)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:27:05.077

The problem can be solved as follows.

Edit the eclipse.ini file located in your Eclipse install directory and insert -clean as the first line.

This will force Eclipse to run. You can then remove the -clean line from the .ini file

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:01:18.090

我在 Ubuntu 上遇到了同样的问题并通过运行解决了：

```
eclipse -clean 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:42:24.250

虽然这是一个旧线程，但如果有人用谷歌搜索这个问题，我会做出贡献。安装 Java 7 Update 11 后，我开始遇到此问题。我卸载了更新 11，现在 eclipse 工作得很好。我从\Program Files\eclipse 运行eclipse。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T17:46:55.907

您需要设置您正在使用的 JDK 的版本

不知道会不会好用...

我们将它用于基于 Eclipse（非常旧）的第 3 方应用程序，但它有一个 launhcer.ini，您可以在其中指定 vm args 等。

我刚刚添加了以下内容作为第一行。-vm C:\Program Files\Java\jdk1.5.0_22\bin\javaw.exe

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:30:46.423

我唯一能想到的就是从这里重新安装java，然后从[这里](http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.2-201206081400/eclipse-SDK-4.2-win32.zip)[重新](http://java.com/en/download/index.jsp)下载和安装eclipse（最新版本）。让我知道它是否有效！

# c++ - Qt 在 OpenGL 上的延迟渲染

> ID：11849026
> 
> 赞同：7
> 
> 时间：2012-08-07T15:18:10.227
> 
> 标签：c++, qt, opengl, qt4, paint

我遇到了[这个](http://www.shamusyoung.com/twentysidedtale/?p=15904)问题，并且知道它可以做得更好。

## 问题：

当用 Qt 小部件覆盖 QGLWidget（Qt OpenGL 上下文视图）时，Qt 在每个 Qt 帧之后重绘这些小部件。

Qt 并不是为了不断地以 >60fps 的速度重绘整个窗口，所以这非常慢。

## 我的点子：

让 Qt 使用其他东西来绘制：透明纹理。让 OpenGL 在重绘时使用此纹理并将其绘制在其他所有内容之上。使 Qt 将与 OpenGL 上下文视图的所有交互重定向到绘制到纹理上的小部件。

优点是 Qt 只需要在需要时重绘（例如，悬停或单击小部件，或文本字段中的文本光标闪烁），并且可以进行更快的部分重绘。

## 我的问题：

如何解决这个问题？我怎样才能告诉 Qt 绘制到纹理？我如何将与小部件的交互重定向到另一个小部件（例如，如果我将鼠标移动到上下文视图中复选框位于绘制到纹理小部件中的区域上方，Qt 应该将此事件注册到复选框并重新绘制以反映它的状态）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T16:52:48.757

出于同样的原因，我将我的 2D 和 3D 渲染分开用于类似 CAD 的应用程序，尽管在我的情况下，我的 2D 东西不是小部件 - 但它不应该有所作为。这是解决问题的方法：

1.  当您的小部件更改将其渲染到 a`QGLFramebufferObject`时，请通过将 FBO 用作您和调用中的`QPaintDevice`for a来执行此操作。对您拥有的许多小部件重复此操作，但仅在同一个 FBO 上 - 不要为每个小部件创建一个 FBO……请记住先清除它，就像“正常”帧缓冲区一样。`QPainter``QGLWidget::paintEvent(..)``myWidget->render( myQPainter, ...)`
2.  `QGLFramebufferObject`当您当前的 OpenGL 背景发生变化时，使用标准 OpenGL 调用以相同的方式将其渲染到另一个上。
3.  创建一个通过顶点着色器（“相机”将只是一个单位立方体）和一个非常简单的片段着色器，可以将两个纹理叠加在一起。
4.  在结束时`QGLWidget::paintEvent(..)`，激活您的着色器程序，将帧缓冲区绑定为它的纹理（`myFBO->texture()`获取句柄），并渲染一个单元四边形。因为您的相机是一个单位正方形，并且视口大小定义了 FBO 大小，所以它将完美地填充视口像素。

然而，这是容易的部分......困难的部分是小部件交互。因为您本质上是在渲染一个“代理”，所以您必须中继“真实”和“代理”小部件之间的交互，同时保持“真实”小部件不可见。这是我将如何开始：

*   一些操作系统在渲染小部件而不*显示*它们时有点奇怪，因此您可能必须在实例化后显示然后隐藏小部件 - 由于 Qt 中聪明的绘制队列，它不太可能真正出现在屏幕上。
*   捕获视口中的所有鼠标事件，计算出光标在哪个“代理”小部件上（如果有），然后将其偏移以获得“真实”隐藏小部件的*相对*位置 - 该值将取决于哪个父对象'真正的'小部件有，如果有的话。然后在重绘小部件帧缓冲区之前将事件传递给“真实”小部件。

我应该声明我还必须创建一个“标记”系统来很好地处理重绘。您不希望每个小部件事件都触发小部件 FBO 重绘，因为可能有许多同时发生的事件（不要只考虑鼠标） - 但您只想要一个重绘。所以我创建了一个系统，如果应用程序中的任何东西都可以在视觉上改变视口中的任何东西，那么它会将视口标记为“脏”。然后设置一个`QTimer`无论您瞄准多少fps（在我的情况下，场景可能会变得非常沉重，所以我还计时了一帧花费了多长时间，然后将该值+10％用作下一次检查的计时器延迟，这样系统就渲染滞后时不会被轰炸）。然后检查脏状态：如果脏，重绘；否则不要。我发现使用两个脏标志让生活变得更轻松，一个用于 3D 东西，一个用于 2D - 但是如果您需要为 OpenGL 绘图保持恒定的绘制速率，则可能不需要两个。

我想我所做的并不是最简单的方法，但它为调优和分析提供了充足的空间——从长远来看，这让生活更轻松。所有的答案肯定不在这篇文章中，但希望它能让你走上策略的道路。

# jaxb - Moxy 正在编组未映射的 Java 属性

> ID：11849027
> 
> 赞同：2
> 
> 时间：2012-08-07T15:18:18.453
> 
> 标签：jaxb, moxy

[通过阅读此处的文章，](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)我能够将 XML 用作外部元数据。但是，Moxy 正在编组外部 XML元数据**中既没有注释也没有指定的属性。**下面是例如如何避免这种行为？我尝试使用`xml-mapping-metadata-complete="true"`，但没有帮助。

**添加了新前缀属性的类（为简洁起见删除了其他属性）**

```
public class Customer
{
    private String prefix;

    public void setPrefix(String prefix)
    {
        this.prefix = prefix;
    }

    public String getPrefix()
    {
        return prefix;
    }
} 
```

**元数据xml**

```
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm" package-name="blog.bindingfile">
   <xml-schema namespace="http://www.example.com/customer" element-form-default="QUALIFIED" />
   <java-types>
      <java-type name="Customer">
         <xml-root-element />
         <xml-type prop-order="firstName lastName address phoneNumbers" />
         <java-attributes>
            <xml-element java-attribute="firstName" name="first-name" />
            <xml-element java-attribute="lastName" name="last-name" />
            <xml-element java-attribute="phoneNumbers" name="phone-number" />
         </java-attributes>
      </java-type>
      <java-type name="PhoneNumber">
         <java-attributes>
            <xml-attribute java-attribute="type" />
            <xml-value java-attribute="number" />
         </java-attributes>
      </java-type>
   </java-types>
</xml-bindings> 
```

**输出**

```
<customer xmlns="http://www.example.com/customer">
   <first-name>Jane</first-name>
   <last-name>Doe</last-name>
   <address>
      <street>123 A Street</street>
   </address>
   <phone-number type="work">555-1111</phone-number>
   <phone-number type="cell">555-2222</phone-number>
   <prefix>pre</prefix>
</customer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:17:17.807

要从编组的 XML 中省略该`prefix`属性，您应该`transient`在绑定文件中声明它：

```
 ...
  <java-type name="Customer">
     <xml-root-element />
     <xml-type prop-order="firstName lastName address phoneNumbers" />
     <java-attributes>
        <xml-element java-attribute="firstName" name="first-name" />
        <xml-element java-attribute="lastName" name="last-name" />
        <xml-element java-attribute="phoneNumbers" name="phone-number" />
        <xml-transient java-attribute="prefix" />
     </java-attributes>
  </java-type>
  ... 
```

默认情况下，JAXB 将映射任何公共字段，因此由于字段上没有明确的“注释” `prefix`，因此它以默认方式映射。

`xml-mapping-metadata-complete="true"`意思是“忽略在 Java 类中找到的任何注释，并使用这个绑定文件作为映射信息的唯一来源——不要增加任何现有的注释。”

希望这会有所帮助，瑞克

# c# - 用于对比不同对象的 Lambda 表达式

> ID：11849030
> 
> 赞同：4
> 
> 时间：2012-08-07T15:18:45.120
> 
> 标签：c#, .net, lambda

我有两个列表，一个是联系人，另一个是员工。我想生成不是员工的联系人子集。以下表达式似乎可以告诉我有一些不是员工的联系人，现在我需要一个符合该条件的联系人列表：

```
if(myContacts.Select(c=>c.contactID).Except(employees.Select(e=>e.contactID)).Any()
{
   //get the subset of contacts and do stuff to them....
} 
```

蒂亚！

罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:25:09.800

```
 var nonEmployees = contacts.Where(w=> ! employees.Any(e=>e.contactID == w.contactID)).ToList(); 
```

或者

```
 var nonEmployees = contacts.Where(w=> ! employees.Select(s=>s.contactID).Contains(w.contactID) ).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:34:27.967

如果您的`employees`和`contacts`序列是相同类型的对象（或者都继承自相同的类型，例如`Contact`），那么您可以创建一个`EqualityComparer`实例：

```
public class ContactComparer : EqualityComparer<Contact>
{
    public override bool Equals(Contact x, Contact y)
    {
        if (ReferenceEquals(x, y)) return true;

        return x != null && y != null && x.ContactId == y.ContactId;
    }

    public override int GetHashCode(Contact obj)
    {
        if (obj == null) throw new ArgumentNullException("obj");

        // assuming string
        return (obj.ContactId ?? "").GetHashCode();
    }
} 
```

这会让你这样做，因此你可以直接返回结果而不必双重查询：

```
var contactsNotEmployees = myContacts.Except(employees, new ContactComparer()).ToList(); 
```

**更新**：正如您的评论所示，Contact 和 Employee 是不同的类型，您可以考虑使用 ContactId 属性创建一个接口来创建一个共同的纽带。

或者，我建议将您的 except 结果导出到 a `HashSet`，然后使用`Contains()`from the `HashSet`，这是 O(1) 效率（而不是`Contains()`在序列上，这是 O(n) 效率）：

```
 // get hash set of contact-only IDs
 var except = new HashSet<int>(contacts
      .Select(c => c.ContactId)
      .Except(emplopyees.Select(e => e.ContactId)));

 // get the objects for those IDs
 var others = contacts.Where(c => except.Contains(c.ContactId)).ToList(); 
```

比较使用序列的结果，对于小列表（15 项） `Contains()`，`HashSet` `Contains()`您的速度大约快 50%，对于较长的列表甚至更快。

无论如何，只是把它扔在那里，因为序列 ( ) 上的 Contains()`IEnumerable<T>`相对较慢......

我对这两个解决方案进行了超过 1,000,000 次迭代，并得到：

```
 HashSet With Contains() took: 1429 ms, 0.001429 ms/item.
 Sequence With Contains() took: 3386 ms, 0.003386 ms/item. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:24:01.367

这不是你要找的吗？

```
myContacts.Select(c=>c.contactID)
          .Except(employees.Select(e=>e.contactID)
          .ToList() 
```

# python - 通过循环查找一个值，多个文件python

> ID：11849031
> 
> 赞同：1
> 
> 时间：2012-08-07T15:18:45.963
> 
> 标签：python, text

我对python很陌生，所以请多多包涵。

我有一个带有原子坐标的文件。这些文件看起来有一定的方式，但坐标不一定在同一行。该文件还包含一些文本，以下是该文件的重要部分：

```
<Gold.Protein.RotatedAtoms>
  28.5571   85.1121    3.9003 C.ar 0  0  0  0  0  0  0  0  0  0  0  0  
  27.3346   84.9085    3.2531 C.ar 0  0  0  0  0  0  0  0  0  0  0  0  
  28.9141   86.4057    4.2554 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  26.4701   85.9748    2.9810 C.ar 0  0  0  0  0  0  0  0  0  0  0  0 
  28.0456   87.4704    3.9845 C.ar 0  0  0  0  0  0  0  0  0  0  0  0 
  26.8436   87.2569    3.3417 C.ar 0  0  0  0  0  0  0  0  0  0  0  0  
  26.1924   88.0932    3.1196 H   0  0  0  0  0  0  0  0  0  0  0  0   
  27.0510   83.9062    2.9565 H   0  0  0  0  0  0  0  0  0  0  0  0 
```

我想做的是：让python识别第6列第5行的数字（在我们的例子中为3.3417）是否大于或小于6。然后，如果值大于6，写FILENAME 文件到一个文本文件。请注意，这块信息在不同文件中的位置会发生变化。也就是说，数字 3.3417 并不总是在同一行。此外，所有数字都在不断变化。

我在想我可能会遍历文本，扫描带有“Gold.Protein.RotatedAtoms”的一行，然后在第 5 行的第 3 行插入。但是如何做到这一点呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:08:53.570

正如 Lanaru 所说......您可以从文件中读取并将文件中的输出拆分为一个数组。

像这样：

```
#!/usr/bin/env python

def s_coord():
    fo = open('Gold.Protein.RotatedAtoms')
    count = 1
    for i in fo.readlines():
        array = i.split()

        if array[2] == "3.3417":
                print("Element 3.3417 is in the {0} row.".format(count))

        count = count + 1

def main():
    s_coord()

    return 0

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:29:56.243

在我看来，值 3.3417 在第三列，所以我可能不明白你的问题。

我认为正则表达式是最干净的方法。我使用[http://kodos.sourceforge.net/](http://kodos.sourceforge.net/)创建了以下正则表达式和代码。

```
import re

# common variables
rawstr = r"""^\s*([0-9.]+)\s*([0-9.]+)\s*([0-9.]+)\s*([a-zA-Z.]+)"""
matchstr = """<Gold.Protein.RotatedAtoms>
  28.5571   85.1121    3.9003 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  27.3346   84.9085    3.2531 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  28.9141   86.4057    4.2554 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  26.4701   85.9748    2.9810 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  28.0456   87.4704    3.9845 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  26.8436   87.2569    3.3417 C.ar 0  0  0  0  0  0  0  0  0  0  0  0
  26.1924   88.0932    3.1196 H   0  0  0  0  0  0  0  0  0  0  0  0
  27.0510   83.9062    2.9565 H   0  0  0  0  0  0  0  0  0  0  0  0"""

# build a compile object
compile_obj = re.compile(rawstr,  re.MULTILINE)
match_obj = compile_obj.search(matchstr)

for values in compile_obj.findall(matchstr):
    if values[2] == '3.3417':
        print 'found it' 
```

您可以修改循环中的条件以查找所需的情况并更改打印以写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:28:25.883

使用 splitlines() 将文本的所有行拆分为一个列表。

使用枚举方法和列表推导中的过滤器查找带有“Gold.Protein.RotatedAtoms”的行的索引，如下所示：

```
index = [index for index,line in enumerate(all_lines) if "Gold.Protein.RotatedAtoms"  in line] 
```

将该索引加 5 以从 all_lines 中获取您需要的行，使用 split() 方法将其拆分为标记，最后使用索引运算符取出第 3 个元素（第 3 个元素 = line.split()[2]） .

# html - 每页上打印的样式标题

> ID：11849035
> 
> 赞同：6
> 
> 时间：2012-08-07T15:18:59.317
> 
> 标签：html, css, css-tables

我最近发现了支持浏览器`<thead>`在每个页面顶部打印块的 CSS 代码（使用`display: table-header-group;`in `@media print {}`）。这大大简化了我的应用程序中用于打印表格的代码。

但是，我的客户对款式非常挑剔。似乎重新打印的表头组缺少一些原始表头的样式，即`border-bottom-style`和`border-bottom-width`将表头与表体分开。由于这似乎是一个硬要求，我想要一种能够将这些样式包含在这些标题组中的方法。

我尝试了几种不同的方法来尝试强制 Firefox（我们选择的浏览器）打印这些样式以满足此条件，但这些方法似乎都没有产生预期的结果。我试过的一些例子：

```
@media print {
    thead {
        display: table-header-group;
        border-bottom-style: solid;
        border-bottom-width: 3px;
    }
} 
```

和

```
<thead style="border-bottom-style: solid; border-bottom-width: 3px;"></thead> 
```

和

```
table.class thead {
    border-bottom-style: solid;
    border-bottom-width: 3px;
} 
```

和

```
table.class th {
    border-bottom-style: solid;
    border-bottom-width: 3px;
} 
```

那么我的问题是：有没有办法在这些重印的标题组上设置样式？还是浏览器只使用相当简陋的默认表格标题样式（粗体文本）？

如果这个问题已经被问及并回答，请原谅我。我四处搜寻，但找不到有关此特定问题的任何信息。有很多问题需要处理，`display: table-header-group;`但没有一个关于样式化这些标题组的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T03:54:02.623

在 Firefox 14 上设置标题行单元格的边框似乎可以正常工作：

```
@media print {
   thead { 
      display: table-header-group;
   }
   thead th {
      border-bottom-style: solid;
      border-bottom-width: 3px;
   }
} 
```

Firefox 并不真正需要这个`display: table-header-group`东西，但其他浏览器可能需要，请参阅问题[CSS: Repeat table headers in print mode](https://stackoverflow.com/questions/274149/css-repeat-table-headers-in-print-mode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T13:56:44.973

我遇到了一个问题，即使在确保`break-inside`没有设置之后，表格容器也不会完全破裂。这会阻止表格很好地分成页面，并且阻止标题显示在每个页面上，即使`thead {display: table-header-group;}`已设置。原因是表的父 div 之一已`display: inline-block`设置。删除它，修复它。

# html - 为什么 Bootstrap 导航栏在 IE8 中显示不好？

> ID：11849036
> 
> 赞同：3
> 
> 时间：2012-08-07T15:19:04.953
> 
> 标签：html, internet-explorer, twitter-bootstrap

我有一个带有固定导航栏的简单页面，但它在 IE 中显示很糟糕。

这是屏幕截图：

![](../Images/b27c0066a58c5615b1042062e2799ffe.png)

但在 Firefox 中它看起来：

![](../Images/2abe5127dcce60506736d57681bedcf0.png) 我认为应该通过以下方式解决 Bootstrap 问题：

```
 <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

在我的标题中。

这是我的html：

```
 <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
      <a class="brand" href="./index.html">link</a>    
    </div>
  </div>
   </div>
<div class="subnav subnav-fixed">
  <ul class="nav nav-pills">
    <li><a href="index.html">HOME</a></li>
   <li><a href="portfolio.html">PORTFOLIO</a></li>
    <li><a href="services.html">SERVICES</a></li>
    <li><a href="careers.html">CAREERS</a></li>
   <li><a href="contacts.html">CONTACTS</a></li>
  </ul>
</div> 
```

我将如何解决这个问题？如果你需要css，我会添加它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:05:46.060

在具有以下特定代码的 if 语句中链接 IE 中的附加样式表。您可能需要牺牲导航栏的某些部分，例如渐变（我认为 IE8 不支持这些）。

```
ul.nav {
    padding: 10px 0;
    display: block;
    text-align: center;
    background: white;
    font-size: 12px;
}
ul.nav li {
    display: inline;
    text-align: center;
    padding: 10px;
    border-right: 1px solid #f0f0f0;
}
ul.nav li:last-child {
    border-right: none;
}
ul.nav li a {
    text-decoration: none;
    color: black;
} 
```

**[JSFiddle 演示](http://jsfiddle.net/kBdu4/)**

# c# - 使用 DateTime.Now 有什么问题。作为唯一 ID 的主要部分？

> ID：11849039
> 
> 赞同：9
> 
> 时间：2012-08-07T15:19:17.770
> 
> 标签：c#, asp.net, html, security, language-agnostic

我曾经用来`RNGCryptoServiceProvider`生成基于字符串的订单 ID，但是，有 4 个实例`ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@$%^*()_-`会生成一个已经存在的订单 ID。

它让我思考...

为什么我们不能只使用类似的东西：

```
<html>
...
<p>@GenerateOrderId()</p>
...
</html> 
```

和：

```
public string GenerateOrderId()
{
   return "OID" + 
      DateTime.Now.Year + DateTime.Now.Month +
      DateTime.Now.Day + 
      DateTime.Now.Hour + 
      DateTime.Now.Minute + 
      DateTime.Now.Second + 
      DateTime.Now.Millisecond;
} 
```

有人告诉我这是个坏主意，但没有任何解释或理由，它仍然留在我的脑海中。...我想使用它的原因是因为它*总是*独一无二的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T15:21:08.020

计算机以纳秒的速度工作。您可以保证几乎立即生成重复的订单 ID。

您最好的选择是使用[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier) *^([[MSDN-C#]](http://msdn.microsoft.com/en-us/library/system.guid.aspx))* *^([[MSDN-SQL]](http://msdn.microsoft.com/en-us/library/ms187942%28v=sql.105%29.aspx))*（又名`UNIQUEIDENTIFIER`SQL 世界）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T15:21:16.150

它不会*总是*独一无二的。

如果在同一毫秒内执行相同的过程，那么它将是相同的。

正如[@Bill](https://stackoverflow.com/questions/11849039/what-is-wrong-with-using-datetime-now-as-main-part-of-order-id/11849071#comment15758342_11849039)所说，您应该使用[GUID](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)作为唯一字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-07T15:26:32.467

`Now`永远不要多次调用吸气剂。“现在”可能会在您添加字符串时发生变化。您**可以**说`DateTime.Now.ToString("yyyyMMddHHmmssfff")`或类似的说法，但最好`Guid.NewGuid()`用于此。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-07T15:22:59.723

如果您只想要一个全局唯一标识符并且不关心格式，为什么不直接使用[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)呢？

[http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)

```
using System;

class Sample 
{
    public static void Main() 
    {
        Guid g = Guid.NewGuid();
        Console.WriteLine(g);
    }
} 
```

[它甚至在 T-SQL 中有一个类型](http://msdn.microsoft.com/en-us/library/ms187942.aspx)（如果你使用的是 ASP.NET，你可能会使用它）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T15:31:25.573

我建议让您的数据库处理该责任，但如果您必须在代码中执行此操作，请使用 GUID。GUID 被复制的可能性很低。

```
 public string GenerateOrderId()
  {
    return System.Guid.NewGuid().ToString();
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T15:40:14.207

不要打败一匹死马，但你的使用`DateTime.Now`比你想要做的更令人担忧。您可以更简洁地重写您的方法并实现相同的目标：

```
public string GenerateOrderID()
{
  return "OID" + DateTime.Now.Ticks.ToString();
} 
```

我仍然建议使用`Guid`这种方法。但是，在 99% 的情况下，`Ticks`每次调用该属性都会为您提供不同的编号。

# php - PHP ssh 从命令行工作，而不是从网页工作

> ID：11849040
> 
> 赞同：0
> 
> 时间：2012-08-07T15:19:23.550
> 
> 标签：php, ssh

我正在使用 PHP SSH 进入主计算机并运行命令。我的代码发布在下面，但我遇到了以下问题：

当我从 Ubuntu 命令行运行此命令时，它可以完美运行。但是，当我尝试通过网页运行它时，我相信 ssh 命令没有运行。不确定我是否遇到了权限问题，或者我是否遇到了我在 php.ini 中的实际 ssh 命令的问题。任何帮助，将不胜感激。

```
 $cmd = "ssh name@ip 'echo hello'";
    $var = shell_exec($cmd);
    echo $var; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:21:11.487

而不是使用`shell_exec`（出于安全原因可能会被禁用），而是考虑使用`libssh2`.

**参考**： http: [//php.net/manual/en/book.ssh2.php](http://php.net/manual/en/book.ssh2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:36:58.290

我的猜测是网络服务器运行的用户在其 ~/.ssh 目录中没有您的私钥文件。

# java - 如何在不指定完整 url 的情况下使用 URL 连接调用 localhost servlet？

> ID：11849041
> 
> 赞同：1
> 
> 时间：2012-08-07T15:19:25.683
> 
> 标签：java, google-app-engine, servlets, urlconnection

我从 jsp 调用本地 servlet，servlet 只返回一个 json 字符串：

```
URL url = new URL("http://myapp.appspot.com/myservlet");
URLConnection conn = url.openConnection();
conn.setConnectTimeout(5000);
InputStream is = conn.getInputStream();

StringWriter writer = new StringWriter();
IOUtils.copy(is, writer, "UTF-8");

String jsonStr = writer.toString(); 
```

我可以使用相对路径执行此操作，以便它在本地和部署的实例上都可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:58:12.773

您可以将 JSTL 与标签一起使用

```
<c:import> 
```

或者，对于您发布的代码，您可以使用

```
 String requestURL = request.getRequestURL().toString();
   String servletPath = request.getServletPath();
   String serverPath = requestURL.substring(0,requestURL.indexOf(servletPath));
   URL url = new URL(serverPath + "/myservlet"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:43:35.133

你的意思是这样吗？

```
String urlString = "http://localhost/myservlet/"; 
```

localhost 是 127.0.0.1 的别名，它始终是“本地计算机”。

ServletRequest.getServerPort() 会让你知道用户连接的端口。

根据发生这种情况的位置，您可能真正想要使用的是 ServletRequest.getRequestDispatcher()，它绕过网络层，并留在您的 servlet 容器中。

您可以包装 HttpResponse，并将其发送到 RequestDispatcher，然后提取使用以下内容生成的字符串：

```
http://goo.gl/kRW1b 
```

# php - PHP 解析 SOAP XML URL

> ID：11849043
> 
> 赞同：0
> 
> 时间：2012-08-07T15:19:35.180
> 
> 标签：php, soap

对了，有 10 个这样的主题，但没有一个真正解决我的问题。

这是 XML 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <GetStartEndPointResponse xmlns="http://www.etis.fskab.se/v1.0/ETISws">
         <GetStartEndPointResult>
            <Code>0</Code>
            <Message />
            <StartPoints>
               <Point>
                  <Id>81216</Id>
                  <Name>Lund C</Name>
                  <Type>STOP_AREA</Type>
                  <X>6178320</X>
                  <Y>1335414</Y>
               </Point>
               <Point>
                  <Id>81700</Id>
                  <Name>Lund Botulfsplatsen</Name>
                  <Type>STOP_AREA</Type>
                  <X>6177824</X>
                  <Y>1335838</Y>
               </Point>
               <Point>
                  <Id>81039</Id>
                  <Name>Lund Univ-sjukhuset</Name>
                  <Type>STOP_AREA</Type>
                  <X>6179057</X>
                  <Y>1336059</Y>
               </Point>
               <Point>
                  <Id>81156</Id>
                  <Name>Lund Bankgatan</Name>
                  <Type>STOP_AREA</Type>
                  <X>6177677</X>
                  <Y>1335945</Y>
               </Point>
               <Point>
                  <Id>81069</Id>
                  <Name>Lund Södra Tpl.</Name>
                  <Type>STOP_AREA</Type>
                  <X>6175456</X>
                  <Y>1335052</Y>
               </Point>
               <Point>
                  <Id>399686</Id>
                  <Name>LUNDAGATAN 1 FURULUND</Name>
                  <Type>ADDRESS</Type>
                  <X>6186112</X>
                  <Y>1330502</Y>
               </Point>
               <Point>
                  <Id>42789</Id>
                  <Name>LUNDAGATAN 2 HELSINGBORG</Name>
                  <Type>ADDRESS</Type>
                  <X>6216872</X>
                  <Y>1307608</Y>
               </Point>
               <Point>
                  <Id>30985</Id>
                  <Name>LUNDAGÅRD 1 MARIEHOLM</Name>
                  <Type>ADDRESS</Type>
                  <X>6196812</X>
                  <Y>1336430</Y>
               </Point>
               <Point>
                  <Id>122149</Id>
                  <Name>LUNDAHLS VÄG 23 GÄRDS KÖPINGE</Name>
                  <Type>ADDRESS</Type>
                  <X>6200964</X>
                  <Y>1394071</Y>
               </Point>
               <Point>
                  <Id>280721</Id>
                  <Name>LUNDASTIGEN 3 KÅGERÖD</Name>
                  <Type>ADDRESS</Type>
                  <X>6211135</X>
                  <Y>1330886</Y>
               </Point>
               <Point>
                  <Id>46335</Id>
                  <Name>Lund Lasarett</Name>
                  <Type>POI</Type>
                  <X>6179076</X>
                  <Y>1336073</Y>
               </Point>
               <Point>
                  <Id>35604</Id>
                  <Name>Lund Polishus</Name>
                  <Type>POI</Type>
                  <X>6178151</X>
                  <Y>1335171</Y>
               </Point>
               <Point>
                  <Id>222961</Id>
                  <Name>Lund Skånetrafikens kundcenter Centralst</Name>
                  <Type>POI</Type>
                  <X>6178373</X>
                  <Y>1335423</Y>
               </Point>
               <Point>
                  <Id>259298002</Id>
                  <Name>Lundagård</Name>
                  <Type>POI</Type>
                  <X>6178151</X>
                  <Y>1335824</Y>
               </Point>
               <Point>
                  <Id>50151</Id>
                  <Name>Lundahälsan Bondev</Name>
                  <Type>POI</Type>
                  <X>6179258</X>
                  <Y>1334425</Y>
               </Point>
            </StartPoints>
            <EndPoints>...</EndPoints>
         </GetStartEndPointResult>
      </GetStartEndPointResponse>
   </soap:Body>
</soap:Envelope> 
```

现在，如果您在 Chrome 中右键单击该文本堆并“检查元素”，您将看到 XML 的结构。

该文件的 URL 是[http://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad](http://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad)

如何从头开始解析这个。没有捷径，因为这些论坛上的许多人只是被指向其他地方！

# javascript - ASP.Net 从 javascript 做 asyncpostback

> ID：11849044
> 
> 赞同：0
> 
> 时间：2012-08-07T15:19:46.063
> 
> 标签：javascript, asp.net, asynchronous, postback

我有一个页面`UpdatePanel`。页面上有Repeater 控件，每个repeater-item 包含ASP.Net LinkBut​​ton 和简单的锚HTML 元素。

```
<a href="javascript:void(0);" onclick="PerformFunc()" />click here</a>
<asp:LinkButton ID="btnFunc" runat="server" OnClick="Func" CommandName="Op" /> 
```

`UpdatePanel`配置为`ChildrenAsTriggers="true"`. 当我单击 LinkBut​​ton 时，一切正常：异步回发和更新`UpdatePanel`。

我需要的是：
在 JavaScript`PerformFunc`函数中，绑定到锚元素，运行点击 LinkBut​​ton 的异步回发。或者，简化：我希望通过单击 HTML 锚元素来运行 LinkBut​​ton 单击事件的异步回发。

尝试了很多可能性（LinkBut​​ton 的 href 的 javascript eval、LinkBut​​ton HTML 元素上的 javascript click 方法、asyncpostback 的注册，这实际上是不必要的，因为它已经注册了）。知道怎么可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T17:18:27.847

你试过这个吗？

```
function PerformFunc(){
    document.getElementById('<%= btnFunc.ClientID %>').click();
    return false;
} 
```

您可以使用 javascript 在链接按钮中触发点击事件。将其放入一个函数中，并在每次您想要进行部分回发时调用该函数。

编辑：固定服务器标签

您可能还需要在通话中返回 false。

```
<a href="javascript:void(0);" onclick="return PerformFunc();" />click here</a> 
```

# mysql - 从 Nextgen 图库数据库中检索/获取当前图像

> ID：11849047
> 
> 赞同：0
> 
> 时间：2012-08-07T15:19:48.683
> 
> 标签：mysql, sql, image, wordpress, nextgen-gallery

我认为我可以使用数据库来做到这一点，该数据库的想法是从 ngg_gallery_pictures 表中获取图像，其中浏览器 URL 等于表中图像的 URL。然后我只会得到一张图像，这也是我想要的。可能我在这里有一些错误，因为我对 sql 没有很多知识，但我还是想找到它的解决方案..

请让我知道您的想法，如果您可以包含 mysql 的代码，那就太好了（我看到的示例真的很短）

非常感谢！

# github - 如何将域指向托管在 github 页面上的站点？

> ID：11849058
> 
> 赞同：14
> 
> 时间：2012-08-07T15:20:14.960
> 
> 标签：github, dns, hosting, github-pages

我创建了一个网站，并将其放在带有 USRNAME.github.com 的 repo 中的 github 上。首先，当我访问该网站时，我的网站显示正确。然后我买了一个域名，比如说example.com。我在 repo 中放置了一个 CNAME 文件，所以现在 USRNAME.github.com 转发到 example.com。

我知道我必须将我的域指向 github 服务器才能让我的网站显示在 example.com，但我不确定如何。我通过 gandi.net 创建了该站点。我尝试编辑区域文件以使用 USRNAME.github.com 获得 CNAME 条目，但这不起作用。我还尝试编辑 DNS 服务器名称，但我在那里放置的条目似乎无效。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T04:13:22.173

如您所见，github端的CNAME文件必须通过registrar端的自定义DNS设置完成，才能完成您的域名（example.com）与github上的子域的匹配。github 需要 CNAME 文件将其自己的 DNS 区域 (192.30.252.153) 上的传入请求路由到正确的用户子域。

因此，缺少的步骤是让您的域实际上指向 github 的 DNS 区域。在注册商方面 (gandi.net)，您可以通过编辑附加到您的域的 DNS 区域文件来实现。此区域文件描述了您的域所属的 DNS 区域的分层域名结构。您要做的是更改 DNS 区域的某些部分与 IP 之间的映射。当您想将基于顶级域名的域名指向任意 IP v4（这里是位于 192.30.252.153 的 github 的 DNS 区域）时，您有兴趣在您的自己的区域。

gandi.net 的具体答案：

*   前往[https://www.gandi.net/admin/domain](https://www.gandi.net/admin/domain)
*   单击您要使用的域
*   在其管理页面底部的“区域文件”下，单击“编辑区域”

您可以在此处查看区域文件的设置列表。Gandi 的一项新功能是“版本”：可以创建不同版本的区域文件，并且一次只有一个版本处于活动状态。

要调整 github 的区域文件，首先单击“创建新版本”。它只会创建当前激活版本的副本。

首选的连接方式是添加一个新的 CNAME 映射，从 *.{yourdomain.tld} 到 {youraccount}.github.io。比如我的 kaibun.net 域必须是 chikamichi.github.io 的门面，所以我添加了一个 CNAME 映射 *.kaibun.net 到 chikamichi.github.io。（最后一个点在 gandi 的配置中是强制性的）。

您可能还想编辑 * 和 @ 记录类型设置，例如，如果您只想让整个 DNS 区域表现得像“代理”（这意味着无论如何它都会“重定向”到您的 github 子域）。但这不是必需的，因此此步骤是可选的。我假设您仍处于正常编辑模式。单击 * 行右侧的钢笔图标。保持所有字段不变，但“值”之一：粘贴 github URI（github 文档建议使用 204.232.175.78；但您可能在 Internet 上找到了不同的值：不要使用它们）。验证，然后对 @ 行进行相同的操作。

准备好后不要忘记单击“激活此版本”。检查“活动版本号”是否正确。更改将需要一些时间来传播。

[详细示例和程序： http](http://wiki.gandi.net/dokuwiki/en/dns/zone/a-record) ://wiki.gandi.net/dokuwiki/en/dns/zone/a-record

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:13:13.313

您需要设置一个指向 github 服务器的 A 记录。你说你使用了 gandi.net，所以基本上你可以通过添加（或修改）一个指向 github 的 A 记录来更改顶级域的 DNS 设置。

如果需要，您可以通过在 DNS 中添加 CNAME 以指向顶级域或再次指向 github 的 A 记录来添加子域（如 www.）。

# django - 将应用程序从 Django 1.3.3 迁移到 1.4？

> ID：11849060
> 
> 赞同：2
> 
> 时间：2012-08-07T15:20:28.440
> 
> 标签：django

我正在尝试运行最初部署在 Django 1.3 上的 ConceptNet (http://csc.media.mit.edu/docs/conceptnet/install.html)。在 Mac OS X 10.6.8 上使用 Django1.4 运行此应用程序时。（雪豹）我得到：

“配置不当：settings.DATABASES 配置不正确。请提供 ENGINE 值。有关详细信息，请查看设置文档。”

为了解决这个问题，我尝试为 1.4 创建新配置并在我的工作目录中使用 SQLite 数据库（准备使用）运行。我更改了“db_config.py”的旧内容

```
DB_ENGINE = "sqlite3"
DB_NAME = "ConceptNet.db"
DB_HOST = ""
DB_PORT = ""
DB_USER = ""
DB_PASSWORD = ""
DB_SCHEMAS = "" 
```

在同一文件 ('db_config.py") 中转换为 1.4 的新格式：

```
DATABASES = {
   'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
         'NAME': 'ConceptNet.db',                      # Or path to database file if using sqlite3\. 
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
         'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
          'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

这没有帮助。我还在同一工作目录中将“db_config.py”重命名为“settings.py”。我仍然遇到同样的错误。我该怎么做才能让 Django 1.4 找到我的配置？

谢谢！德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:52:19.787

在 Django 1.4 中，不需要 db_config.py，您可以编辑 db 信息的 settings.py 文件。

您只需填写 settings.py 中的信息，然后您 syncdb 它应该可以正常工作。

# android - java.lang.RuntimeException：无法实例化服务 .GCMIntentService

> ID：11849064
> 
> 赞同：6
> 
> 时间：2012-08-07T15:20:45.383
> 
> 标签：android, google-cloud-messaging, runtimeexception

我正在尝试学习如何使用谷歌云消息传递系统设置客户端接收器，我正在关注这个谷歌的教程：http: [//developer.android.com/guide/google/gcm/gs.html#android-app](http://developer.android.com/guide/google/gcm/gs.html#android-app)

我已经完成了教程要求的所有事情，但是当我运行我的应用程序时，它会工作一会儿然后崩溃，这就是 LogCat：

```
08-07 17:04:40.726: E/AndroidRuntime(8155): FATAL EXCEPTION: main
08-07 17:04:40.726: E/AndroidRuntime(8155): java.lang.RuntimeException: Unable to instantiate service com.example.google.cloud.messaging.GCMIntentService: java.lang.ClassNotFoundException: com.example.google.cloud.messaging.GCMIntentService in loader dalvik.system.PathClassLoader[/data/app/com.example.google.cloud.messaging-1.apk]
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:1933)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.app.ActivityThread.access$2500(ActivityThread.java:117)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:989)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.os.Looper.loop(Looper.java:130)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at java.lang.reflect.Method.invokeNative(Native Method)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at java.lang.reflect.Method.invoke(Method.java:507)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at dalvik.system.NativeStart.main(Native Method)
08-07 17:04:40.726: E/AndroidRuntime(8155): Caused by: java.lang.ClassNotFoundException: com.example.google.cloud.messaging.GCMIntentService in loader dalvik.system.PathClassLoader[/data/app/com.example.google.cloud.messaging-1.apk]
08-07 17:04:40.726: E/AndroidRuntime(8155):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
08-07 17:04:40.726: E/AndroidRuntime(8155):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:1930) 
```

**这是我的代码**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, "962129210868");
          Log.i("Registrando","");
        } else {
          Log.i("Test", "Already registered");
        }
    }
} 
```

**这是我的清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.google.cloud.messaging"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <permission
        android:name="com.example.google.cloud.messaging.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.google.cloud.messaging.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.google.cloud.messaging" />
            </intent-filter>
        </receiver>

        <service android:name="com.example.google.cloud.messaging.GCMIntentService"  android:enabled="true"/>
    </application>

</manifest> 
```

# 固定的

我创建了一个名为 GCMIntentService 的新类：

```
public class GCMIntentService extends GCMBaseIntentService {

    @SuppressWarnings("hiding")
    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super("Test");
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
      Log.d("GCM", "RECIEVED A MESSAGE");
      generateNotification(arg0, arg1.getStringExtra("message"));
       }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");
    }

    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, "Received recoverable error: " + errorId);
        return super.onRecoverableError(context, errorId);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_action_search;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, GCMIntentService.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T09:41:52.240

您应该`GCMIntentService`在客户端代码中有，并且应该在 AndroidManifest.xml 文件中定义它，如下所示。

> <service android:name="package_name.GCMIntentService" />

请注意，意图服务的名称应该与`GCMIntentService`您使用`GCMBroadcastReceiver`. 如果您实现广播接收器，则可以创建您的意图服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T11:24:10.347

我有同样的问题。这个问题得到了解决，因为您使用 GCMIntentService 类名作为 android 所需的名称。但是如果你想重命名这个类或者把这个类放到另一个包中，问题就会回来:) 这里是解决方案[链接](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)和[源代码](https://bitbucket.org/dexxtr/gcm-intentservice-name/downloads)。

解决方案 ：

我们应该创建接收器并将我们的自定义服务的名称设置为覆盖的方法 getGCMIntentServiceClassName。

```
public class GCMReceiver extends GCMBroadcastReceiver { 
@Override
protected String getGCMIntentServiceClassName(Context context) { 
    return "PCAKAGE_NAME.GCMService"; 
}
} 
```

如果 GCMIntentService 在另一个包中，PCKAGE_NAME 是另一个包名。

并且不要忘记在 AndroidManifest.xml 中更改接收器名称。

# ruby-on-rails - 使用 STI 时，如何强制 Rails 在 link_to 助手中使用超类名称？

> ID：11849072
> 
> 赞同：2
> 
> 时间：2012-08-07T15:21:21.970
> 
> 标签：ruby-on-rails, ruby, routes, single-table-inheritance

我将 STI 与 Rails 3.2 应用程序一起使用。我想强制 Rails 在`link_to`帮助程序（或生成路径时的任何其他地方）中使用超类名称，而不是子类名称。

因此，`<%= link_to current_user.name, current_user %>`产生`/:class_name/:id`（类名可以是“主持人”、“成员”等...）。

我希望它产生`/users/:id`, where`users`不会更改为子类的名称。我知道我可以更改`current_user`为`user_path(current_user)`，但我更喜欢使用快捷方式，让 Rails 自己解决。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:40:34.167

我认为你应该定义 url 助手，像这样

```
def moderator_url record
  user_url record
end 
```

或者只使用别名

```
alias :moderator_url :user_url 
```

这是当您将记录作为选项传递时，rails 用于生成 url 的代码

[https://github.com/rails/rails/blob/537ede912895d421b24acfcbc86daf08f8f22157/actionpack/lib/action_dispatch/routing/polymorphic_routes.rb#L90](https://github.com/rails/rails/blob/537ede912895d421b24acfcbc86daf08f8f22157/actionpack/lib/action_dispatch/routing/polymorphic_routes.rb#L90)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:35:17.237

对于链接，我可以通过添加资源来解决这个问题：

```
resources :owners, path: 'users', controller: 'users' 
```

对于表单，我需要指定通用表单。我最初的表格是

```
= simple_form_for @user do |f| 
```

为了完成这项工作，我必须指定路径和方法，同时使用通用名称而不是将用户对象直接传递给表单：

```
= simple_form_for :user, url: user_path(@user) do |f| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:52:42.657

使用命名路由：

```
<%= link_to current_user.name, user_path(current_user) %> 
```

# java - 通过java程序读取JVM heap bin文件

> ID：11849073
> 
> 赞同：0
> 
> 时间：2012-08-07T15:21:30.830
> 
> 标签：java, jvm

我可以成功生成堆快照并将其保存为二进制文件。现在，问题是我不知道二进制堆文件的结构/格式，我无法从程序中读取它。我知道，我可以使用 jHat 做到这一点。但我想通过代码来做到这一点。

在这方面有什么指示吗？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:53:33.843

jhat 源在 openjdk 中的 openjdk\jdk\src\share\classes\com\sun\tools\hat\ 中可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T20:04:34.233

堆快照的格式描述在[https://java.net/downloads/heap-snapshot/hprof-binary-format.html](https://java.net/downloads/heap-snapshot/hprof-binary-format.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:50:35.357

[http://openjdk.java.net/groups/serviceability/index.html#tools](http://openjdk.java.net/groups/serviceability/index.html#tools)

您需要下载 OpenJDK 源代码树。该[存储库](http://hg.openjdk.java.net/)将为您提供一切，但我发现很难导航。我*认为在*[JDK 源代码压缩包](http://download.java.net/openjdk/jdk6/)中找到该目录会更容易（但还没有查看；它可能不存在）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T15:51:14.403

[Eclipse Memory Analyzer（MAT）](http://www.eclipse.org/mat/)源码应该对你有很大帮助

# java - Eclipse Android 运行时错误

> ID：11849078
> 
> 赞同：0
> 
> 时间：2012-08-07T15:21:51.473
> 
> 标签：java, android, eclipse, runtime, runtime-error

目前正在为送货司机开发一个 Android 应用程序。它几个月来一直工作正常，但现在按下“提交”按钮时突然强制退出。

在调试时，它给了我各种与 android 库相关的运行时错误。

![错误日志](../Images/aebd7a0212b7a9333d3445e65c90a1e5.png)

当我去确切的位置时，每个人都说找不到源。一切都在那里，我已经重新安装了 SDK 并浏览了每个文件位置。

请帮忙

编辑：

```
if(isOnline())
                {
                    PODCache.clearedfordeliveryjobs.add(etDespatch.getText().toString());
                    new runner().execute(al_kvp);   

                } 
```

PODCache 是另一个类，这也是上面所指的位。

```
public void onStart(Intent intent, int startid) {
    // Run this
    Toast.makeText(getApplicationContext(), "PODCache Started", 10).show();
    RUNNING = true;
    try {
        clearedfordeliveryjobs = (ArrayList<String>) LocalPersistence
                .readObjectFromFile(this, UNBLOCKEDLIST);
    } catch (Exception e) {
        clearedfordeliveryjobs = new ArrayList<String>();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:24:46.900

什么是 keypod.keyfort.net.PickUpActivity？你试过找到那个班级吗？对我来说，这看起来不像是标准的 Android。

# python - 有没有办法从数百个 URL 的列表中抓取 facebook 帐户链接

> ID：11849085
> 
> 赞同：1
> 
> 时间：2012-08-07T15:22:36.060
> 
> 标签：python, facebook, screen-scraping

我有超过 1500 个与印度新闻媒体网站相关的 URL 列表。作为我大学项目的一部分，我有兴趣进行一些统计。

长话短说，我很想知道这些网站中的哪些网站在其主页上有指向其 Facebook 帐户的链接？这样做将是一项乏味的任务（到目前为止我已经完成了其中的 25%），因此我一直在通过网络研究使用程序抓取这些网站的任何可能性。我在 scraperwiki 上看到了 scrapers 以及`importxml`主要在 Google Docs 中看到的功能，但是，到目前为止，我还没有能够取得很大的成功。

我在 Google Docs 中为给定站点尝试了以下功能：

```
=ImportXML(A1, "//a[contains(@href, 'www.facebook.com')]") 
```

总的来说，我想问一下，如果每个网站的结构有很大差异，是否有可能（以及如何）扫描给定的网站（或列表）以获取特定的 href 链接？

在此先感谢您提供有关此问题的任何帮助。

标记

# android - 如何根据我在服务中使用的意图使用自定义操作？

> ID：11849086
> 
> 赞同：0
> 
> 时间：2012-08-07T15:22:38.990
> 
> 标签：android, android-intent, action, custom-attributes, intentfilter

在我的清单中，我在我的活动中添加了：

```
<intent-filter>
 <action android:name="webradio.disneychannel.ACTION_DIALOG_CLOSE" />
 <category android:name="android.intent.category.DEFAULT" />
</ intent-filter> 
```

在我的服务中，我启动：

```
Intent close = new Intent(ACTION_DIALOG_CLOSE);
close.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplicationContext().startActivity(close); 
```

哪里`ACTION_DIALOG_CLOSE`是`String = webradio.disneychannel.ACTION_DIALOG_CLOSE`

但是当活动开始时，在简历中，`this.getIntent().getAction()`总是返回null ...

# python - 在循环遍历列表时将值插入列表（Python）

> ID：11849088
> 
> 赞同：2
> 
> 时间：2012-08-07T15:22:42.733
> 
> 标签：python, string, list, insert

我有以下列表：

```
sweet = [['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]] 
```

我希望遍历列表列表并用# 字符分隔不同的子列表组，即我希望在子列表字符串的第一个元素更改时插入#。

期望的结果

```
>>sweet
>>[['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], '#', ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]] 
```

也许是微不足道的任务，但我对 Python 很陌生，非常感谢您的帮助。

编辑

我知道现在字典可能是一个更好的数据结构，因此可能不需要“#”键，我的目标是用它作为车站的分隔符（字符串中的第一个数字），这样我就可以做到在迭代列表时孤立地计算站点。

您看到的我的目标是遍历列表（应该使其成为字典）并计算每个重要的第一个数字内的整数列表对之间的差异。所需的最终结果如下： {'1234': [[-38, 11, -4, 11, 23], [40, -5, 5, 6, -1]] '1567':[[3, 4, 7, 11, -2]] }

对此的任何帮助也非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:58:01.800

看起来您的数据会更好地组织为字典。像这样：

```
sweet = {'1234-4321-1': [5, 6, -4, 11, 22], 
         '1234-7834-1': [43, -5, 0, 0, -1],
         '1234-5376-1': [3, 0, -5, -6, 0],
         '1567-3454-1': [4, 6, 8, 3, 3],
         '1567-9987-1': [1, 2, 1, -4, 5] } 
```

然后，您可以通过*键*访问元素，因为`sweet['1234-4321-1']`这将返回您的第一个列表。

或者由于第一个数字似乎是分割的关键元素，所以有点复杂：

```
sweet = {'1234': [['4321-1', [5, 6, -4, 11, 22]], 
                  ['7834-1', [43, -5, 0, 0, -1]],
                  ['5376-1', [3, 0, -5, -6, 0]]],
         '1567': [['3454-1', [4, 6, 8, 3, 3]],
                 ['9987-1', [1, 2, 1, -4, 5]]] 
        } 
```

然后说`sweet['1234']`会给你一个你可以通过索引解决的对列表。 `sweet['1234'][0]`给出列表中的第一个条目.

话虽如此，您可以通过执行以下操作插入“#”：

```
sweet = [['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]]

skip = False
for i in range(len(sweet)-1):
    if skip: #skip over the '#' that was just inserted
            skip = False
            continue
    front_num_1 = sweet[i][0].split('-')[0]
    front_num_2 = sweet[i+1][0].split('-')[0]
    if front_num_1 != front_num_2:
        sweet.insert(i+1, '#')
        skip = True

print sweet 
```

但正如其他人所解释的那样，这种数据结构似乎很弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:50:30.013

这可以满足您的要求，但不是以优雅的方式*（我自己是 python 新手）*。

```
sweet = [['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]]
ans=[]
j=sweet[0][0].split('-')[0]
for i in sweet:
    print i
    if i[0].split('-')[0]!=j:
        ans.append("#")
    ans.append(i)
    j=i[0].split('-')[0]
sweet=ans 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:51:04.567

这完成了任务，但我认为您的数据结构选择不当。

```
new_sweet = sweet[0]
for s in sweet[1:]:
    if s[0].split('-')[0] != new_sweet[-1][0].split('-')[0]:
       new_sweet.append('#')
    new_sweet.append(s) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T15:54:43.903

```
f = lambda l: l[0].split('-')[0]
indexes = (i for i in range(1, len(sweet)) if f(sweet[i]) != f(sweet[i-1]))
for i, j in enumerate(indexes):
    sweet.insert(i+j, '#') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T04:16:00.430

```
>>> from itertools import groupby, chain
>>> def join(iterable, delimiter):
        i = iter(iterable)
        yield next(i)
        for el in i:
            yield delimiter
            yield el

>>> sweet = [['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]]
>>> groups = (g for k, g in groupby(sweet, lambda x: x[0].partition('-')[0]))
>>> list(chain.from_iterable(join(groups, delimiter='#')))
[['1234-4321-1', [5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], '#', ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T19:20:25.080

```
 for i in range(len(s)-1):
          a,b=s[i][0][:4], s[i+1][0][:4]
          if a!=b:
             s.insert(i+1,"#")
             break 
```

# html - “display: table-cell”元素不在“display: table-row”元素内是有效的构造吗？

> ID：11849089
> 
> 赞同：4
> 
> 时间：2012-08-07T15:22:43.207
> 
> 标签：html, css

在我必须处理的示例 Web 应用程序中，我注意到一些元素有`display: table-cell`样式，但它们的父级没有`display: table-row`.

对我来说，这似乎是错误的，但我完全不确定。

因此这个问题：这是一个有效的结构吗？如果有的话，它会导致什么问题？

谢谢你。

这是我的意思的一个例子：

```
<div style="display: block">
  <div style="display:table-cell">
    <p>Some content</p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:43:08.387

我有点模仿浮士德，他很友善地找到了规格（但现在似乎已经删除了他的答案）......

是的，它（可能）是有效的。

> HTML 以外的文档语言可能不包含 CSS 2.1 表格模型中的所有元素。在这些情况下，必须假设“缺失”元素才能使表模型正常工作。任何表格元素都会在其自身周围自动生成必要的匿名表格对象，由至少三个嵌套对象组成，分别对应一个 'table'/'inline-table' 元素、一个 'table-row' 元素和一个 'table-cell' 元素.

从 17.2.1 匿名表对象， [http://www.w3.org/Style/css2-updates/css2/tables.html#anonymous-boxes](http://www.w3.org/Style/css2-updates/css2/tables.html#anonymous-boxes)

这可以理解为匿名框将在没有正确结构的非 HTML 语言中创建，但我认为它也会在 HTML 中生成匿名表对象。

# django - 不允许某些模型字段使用非空值

> ID：11849095
> 
> 赞同：0
> 
> 时间：2012-08-07T15:23:09.690
> 
> 标签：django

[作为对这个问题](https://stackoverflow.com/questions/11848162/django-tests-dont-raise-integrity-error-for-charfield)的跟进，我想知道是否有办法确保如果有任何字段`blank=False`具有空白值，则模型实例不能被持久化。即如果我有这个模型：

```
class SimpleModel(models.Model):
    name = models.CharField(max_length=100) 
```

我想禁止类似的事情：

```
m = SimpleModel()
m.save() 
```

我可以通过覆盖`save()`并手动进行检查来做到这一点，但也许还有另一种方法。

这样做的原因是我想非常非常确定这样的空白值永远不会插入到数据库中（以防我或我的一些编码员发疯）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:26:20.517

这就是[模型验证](https://docs.djangoproject.com/en/1.4/ref/models/instances/#validating-objects)的用途。您需要确保`m.full_clean()`在保存之前运行。

# hover - Jquery Hover 显示/隐藏问题

> ID：11849096
> 
> 赞同：0
> 
> 时间：2012-08-07T15:23:13.883
> 
> 标签：hover, hide, show

我正在尝试进行设置，以便当您将鼠标悬停在类 .object1 -> 上时，当您没有将鼠标悬停在其上时，它应该会显示 .obj_1，它应该隐藏 .obj_1。我的代码可能有点偏离，感谢您的帮助！

```
$(document).ready(function() {   
  $(".obj_1 , .obj_2").hide();
      });
      $(".object1").hover(
        function() { $(".obj_1").show(); },
        function() { $(".obj_2").hide(); }
   );
      $(".object2").hover(
        function() { $(".obj_2").show(); },
        function() { $(".obj_1").hide(); }
   ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:32:02.780

应该很简单

```
$(document).ready(function() {   
  $(".obj_1 , .obj_2").hide();
      });
      $(".object1").hover(
        function() { $(".obj_1").show(); },
        function() { $(".obj_1").hide(); }
   );
      $(".object2").hover(
        function() { $(".obj_2").show(); },
        function() { $(".obj_2").hide(); }
   ); 
```

“悬停”处理函数签名是（mouseInHandler，mouseOutHandler）。对于 object1，您希望在 mouseIn 上显示 obj_1，并在 mouseOut 上隐藏它。您不需要在 object1 悬停处理程序上引用 obj_2。

看看我在[这里制作的小提琴](http://jsfiddle.net/C94Tq/)

仅供参考 - 当您有复杂的内部内容时，悬停事件会表现得很奇怪。（例如，另一个 div 中的 div 等等）。我建议你使用[“mouseenter”](http://api.jquery.com/mouseenter/)和[“mouseleave”](http://api.jquery.com/mouseleave/)

意识到这是一个下拉菜单问题后更新答案

CSS 中的下拉菜单是一个很好的例子，其中“悬停”是不够的——> 因为一旦你不在链接上，子菜单就会消失......这不是我们想要的。

重要的是要注意关于下拉菜单的 3 件事：

1.  它们可以（？应该？）纯粹用 CSS 来实现
2.  HTML 结构很重要。

例如，请考虑以下结构：

```
<ul class="menu">
    <li>
    </li>
    <li>
        <ul class="menu">
         <li>
         </li>
        </ul>
    </li>
</ul> 
```

这个结构是递归的——你可以有无限级别的子菜单——并且“li”上的 mouseenter/mouseleave 将保持不变，因为子菜单是“li”项目的一部分。

要查看此操作，请查看[我的小提琴](http://jsfiddle.net/c7k7f/5/)

另请注意，我从 onload 代码中删除了第一个“隐藏”，并将其替换为 css“display:none”——它解决了页面加载时的闪烁问题（闪烁的意思是——首先显示子菜单，一旦页面加载，我们隐藏它。 ）

css 解决方案将包括一个带有“悬停”的选择器（是的，悬停..）

在谷歌搜索时，你可以找到很多关于它的博客文章。

[这是我找到的第一个。](http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/)

# javascript - 在javascript中测试字符串是否具有时区

> ID：11849099
> 
> 赞同：3
> 
> 时间：2012-08-07T15:23:27.690
> 
> 标签：javascript

我从服务器收到一个日期时间作为字符串，可能如下所示：

```
07/08/2012 13:17:32 
```

这是 UTC 时间。

或者它可能有格式的时区：

```
07/08/2012 13:17:32 UTC+01:00 
```

我需要一种通用的方法来将其解析为一个`Date`对象进行显示。如果我这样做，`var d = new Date(str)`那么它假设的第一个示例是当地时间。

编辑：字符串中可能并不总是“UTC”，我认为它可能是 GMT、Z 或任何其他时区符号。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:26:46.197

如果您的时区始终采用 UTC+nn 格式，并且具有显式 UTC TZ 的字符串被正确解析，正如我从您的问题中假设的那样，那么简单

```
if (date_string.search(/a-z/i) == -1) {
 date_string += 'UTC+00:00'
} 
```

会做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:27:08.973

作为一种快速而肮脏的解决方案，时区似乎是由空格分隔的格式的最后“部分”。因此，您可以计算输入字符串中“部分”的数量，如果没有找到，则添加默认时区。例如：

```
function parseDateDefaultUTC(str) {
  var parts = str.split(/\s+/);
  return new Date((parts.length===3) ? str : str + ' UTC');
}
var d;
d = parseDateDefaultUTC("07/08/2012 13:17:32");
d; // => Sun Jul 08 2012 07:17:32 GMT-0600 (MDT)
d = parseDateDefaultUTC("07/08/2012 13:17:32 UTC+01:00");
d; // => Sun Jul 08 2012 06:17:32 GMT-0600 (MDT) 
```

# jquery - jQuery 语法错误，无法识别的表达式：[name=Basics.Gender]

> ID：11849104
> 
> 赞同：12
> 
> 时间：2012-08-07T15:23:51.173
> 
> 标签：jquery, sizzle

我正在从 jQuery 1.4.4 升级到 jQuery 1.7.2，我得到一个语法错误。我认为这是由于'。在选择器的 Basics.Gender 部分中。

```
$('[name=Basics.Gender]') 
```

有人对如何解决这个问题有任何建议吗？

[http://jsfiddle.net/2nBc9/](http://jsfiddle.net/2nBc9/)

**编辑**

任何人都知道为什么“。” 现在打破选择器语法？他们是在 Sizzle 中使用正则表达式还是其他东西？还是将属性放在引号中一直是最佳做法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-07T15:26:12.023

引用值：

```
$('div[name="Basics.Gender"]') 
```

[http://jsfiddle.net/7Pqhc/](http://jsfiddle.net/7Pqhc/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T15:26:14.263

将属性放在引号中

```
$('[name="Basics.Gender"]') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T15:26:05.527

```
[name='Basics.Gender'] 
```

你试过用引号吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T15:28:09.860

将属性放在引号中。以下在控制台中打印“TEST”：

jQuery：

```
$(document).ready(function() {
    console.log($("[name='Basics.Gender']").text());
}); 
```

HTML：

```
<div name="Basics.Gender">TEST</div> 
```

# opengl - 一个 OpenGL 问题：为什么 glutSwapBuffer() 函数不起作用？

> ID：11849109
> 
> 赞同：0
> 
> 时间：2012-08-07T15:24:05.963
> 
> 标签：opengl

这段代码来自红皮书，示例 2-15（好吧，代码并不完全是书中的代码）。请注意我记下的笔记。

```
#include <fstream>
#include <stdlib.h>
#include <GL/glew.h>
#include <GL/glut.h>
#pragma comment(lib,"glew32.lib")
using namespace std;
#define BUFFER_OFFSET(offset) ((GLubyte *)NULL+offset)
#define XStart              -0.8
#define XEnd                0.8
#define YStart              -0.8
#define YEnd                0.8
#define NumXPoints          11
#define NumYPoints          11
#define NumPoints           (NumXPoints * NumYPoints)
#define NumPointsPerStrip   (2*NumXPoints)
#define NumStrips           (NumYPoints-1)
#define RestartIndex        0xffff

void display(void)
{
    int i,start;
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor3f(1,1,1);
    glDrawElements(GL_TRIANGLE_STRIP,NumStrips*(NumPointsPerStrip+1),GL_UNSIGNED_SHORT,BUFFER_OFFSET(0));
    //glFlush();//it works,show a white square with black backgroud
    glutSwapBuffers();///it doesn't work,show what tha area looked like before

}

void init (void) 
{
    GLuint vbo,ebo;
    GLfloat *vertices;
    GLushort *indices;
    glewInit();
    glGenBuffers(1,&vbo);
    glBindBuffer(GL_ARRAY_BUFFER,vbo);
    glBufferData(GL_ARRAY_BUFFER,2*NumPoints*sizeof(GLfloat),NULL,GL_STATIC_DRAW);
    vertices=(GLfloat *)glMapBuffer(GL_ARRAY_BUFFER,GL_WRITE_ONLY);
    if(vertices==NULL)
    {
        fprintf(stderr,"Unable to map vertex buffer\n");
        exit(EXIT_FAILURE);
    }
    else
    {
        int i,j;
        GLfloat dx=(XEnd-XStart)/(NumXPoints-1);
        GLfloat dy=(YEnd-YStart)/(NumYPoints-1);
        GLfloat *tmp=vertices;
        int n=0;
        for(j=0;j<NumYPoints;++j)
        {
            GLfloat y=YStart+j*dy;
            for(i=0;i<NumXPoints;++i)
            {
                GLfloat x=XStart + i*dx;
                *tmp++=x;
                *tmp++=y;
            }
        }
        glUnmapBuffer(GL_ARRAY_BUFFER);
        glVertexPointer(2,GL_FLOAT,0,BUFFER_OFFSET(0));
        glEnableClientState(GL_VERTEX_ARRAY);
    }
    glGenBuffers(1,&ebo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,ebo);

    glBufferData(GL_ELEMENT_ARRAY_BUFFER,NumStrips*(NumPointsPerStrip+1)*sizeof(GLushort),NULL,GL_STATIC_DRAW);
    indices=(GLushort *)glMapBuffer(GL_ELEMENT_ARRAY_BUFFER,GL_WRITE_ONLY);
    if(indices==NULL)
    {
        fprintf(stderr,"Unable to map index buffer\n");
        exit(EXIT_FAILURE);
    }
    else
    {
        int i,j;
        GLushort *index=indices;
        for(j=0;j<NumStrips;++j)
        {
            GLushort bottomRow=j*NumYPoints;
            GLushort topRow=bottomRow+NumYPoints;
            for(i=0;i<NumXPoints;++i)
            {
                *index++=topRow+i;
                *index++=bottomRow+i;
            }
            *index++=RestartIndex;
        }
        glUnmapBuffer(GL_ELEMENT_ARRAY_BUFFER);

    }
    glPrimitiveRestartIndex(RestartIndex);
    glEnable(GL_PRIMITIVE_RESTART);
}

void reshape (int w, int h)
{

    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    gluOrtho2D (-1,1,-1,1);
    glViewport (0,0,w,h);
}

void keyboard(unsigned char key, int x, int y)
{
    switch (key) {
      case 27:
          exit(0);
          break;
    }
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize (200, 200);
    glutInitWindowPosition (100, 100);
    glutCreateWindow (argv[0]);
    init ();
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutKeyboardFunc (keyboard);
    glutMainLoop();
    return 0;  
} 
```

正如[http://www.opengl.org/resources/libraries/glut/spec3/node21.html](http://www.opengl.org/resources/libraries/glut/spec3/node21.html)所说：
隐含的 glFlush 由 glutSwapBuffers 在返回之前完成。后续的 OpenGL 命令可以在调用 glutSwapBuffers 后立即发出，但在缓冲区交换完成之前不会执行。
如果使用的层没有双缓冲，glutSwapBuffers 没有效果。

我怎么知道正在使用的层是否是双缓冲的？举一个双缓冲的例子。我写的这段代码是双缓冲的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:28:32.793

在你的`main`函数中，你调用

```
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB); 
```

那需要`GLUT_DOUBLE`。请参阅[`glutInitDisplayMode()`](http://www.opengl.org/resources/libraries/glut/spec3/node12.html).

# html - HTML5 Canvas putImageData，翻译它，改变Image

> ID：11849114
> 
> 赞同：3
> 
> 时间：2012-08-07T15:24:25.713
> 
> 标签：html, canvas, html5-canvas, transformation

我想使用 HTML5 画布绘制图像，翻译图像，然后更改图像，但保留我所做的转换。这可能吗？

这是一些伪代码来说明我的问题：

```
// initially draw an image and translate it
var context = canvas.getContext("2d");
context.putImageData(someData, 0, 0);
context.translate(200, 10);

// then later somewhere else in code
// this should be drawn @ 200/10
var context = canvas.getContext("2d");
context.putImageData(someOtherData, ?, ?); 
```

我认为这可以通过一些保存/恢复调用来实现，但我还没有成功，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T17:32:36.533

这里的问题`putImageData`是不受变换矩阵的影响。

这是规范的命令：

> 当前路径、变换矩阵、阴影属性、全局 alpha、剪切区域和全局合成运算符不得影响 getImageData() 和 putImageData() 方法。

你可以做的是`putImageData`一个内存画布，然后

```
inMemCtx.putImageData(imgdata, 0, 0);
context.drawImage(inMemoryCanvas, x, y) 
```

到您的常规画布上，翻译将应用于 drawImage 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:38:49.367

将图像及其相关数据放入自定义数据结构中。例如：

```
var obj = {
    imgData: someData,
    position: [0, 0],
    translate: function (x, y) {
        this.position[0] = x;
        this.position[1] = y;
    }
}; 
```

现在您可以对 imgData 及其位置进行连续更新。绘图时使用`obj.position[0]`和`obj.position[1]`作为 xy 坐标。

```
obj.translate(200, 10); 
```

# css - 编码重复 CSS 的正确方法是什么

> ID：11849119
> 
> 赞同：0
> 
> 时间：2012-08-07T15:24:40.737
> 
> 标签：css

在我的网站上说，有多个地方我希望我的文本被着色`#f00`

如果我想针对他们，我是否应该做出一项声明以立即针对所有内容，例如

```
a, .color, h2 {
  color: #f00 
} 
```

或者，当我以它们为目标时，我是否应该“着色”它们，例如

```
a {
  padding: 5px;
  color: #f00;
}

.color {
  background: #333;
  color: #f00;
}

h2 {
  font-size: 20px;
  color: #f00;
} 
```

我不确定该做什么，当然，这个实例的第一部分看起来像更少的代码，但是我引用的标签比我需要的要多。但另一方面，我使用`color: #f00`了 3 次而不是一次。

我很欣赏两者都不是“错误的”，我只是想知道一个更快，更语义化还是什么。

注意：这不是我在任何网站上的代码，只是一个快速模型。我正在寻找更大范围的答案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:27:03.510

第一种是首选方法。通常，开发人员的目标是最小化 CSS 大小以加快加载速度。由于将类组合在一起，您的第一个示例肯定会占用更少的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:32:27.183

我认为这主要是一种风格选择，但我会告诉我如何处理它。

如果所有这些案例的共同点意味着它们应该始终具有相同的颜色，那么将它们组合在一起。

但是，如果它们有共同点，这表明您应该为该共同点命名，并将其命名为类名。然后将样式分配给类。这是很好的模块化。

如果它们具有相同的颜色只是偶然，并且您可能会更改其中一种而不更改其他颜色，请使用第二种形式。

Hope 的回答是正确的，但除非有大量这样的样式，否则我怀疑它会对加载时间产生显着影响。

我还没有玩过LESS，我想知道它是否会自动优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:33:28.150

第一个选项应该是最好的，因为如果您编写的代码更少，并且如果您想在任何地方将此颜色更改为另一种颜色，则只需更改一行。

但最后，这对于使用第二种方法更有用。

如果您仍然想在任何地方更改此颜色，最简单的编辑器将让您轻松完成。但是如果你想改变单个 div 的颜色，你需要移动你的代码。

一个好的做法（使用第二种方法）是在您的主 css 文件顶部（在注释中）引用所有使用的颜色，然后您可以轻松地选择一个来搜索/替换所有匹配项。

# asp.net - Microsoft IIS Url Rewrite 2.0 - 用 x 个文件夹重写 url

> ID：11849122
> 
> 赞同：0
> 
> 时间：2012-08-07T15:24:49.383
> 
> 标签：asp.net, iis-7, url-rewriting

我正在尝试使用 Microsoft IIS URL Rewrite 2.0 设置 url 重写规则，我正在运行 IIS7 和 .NET 4。

我想匹配任意数量的特定模式，例如：

```
www.test.com/test1/
www.test.com/test1/test2/
www.test.com/test1/test2/test3/
www.test.com/test1/test2/test3/test4/ etc... 
```

并 [分别] 将结果重写为

```
www.test.com/page.aspx?q=test1
www.test.com/page.aspx?q=test1&q=test2
www.test.com/page.aspx?q=test1&q=test2&q=test3
www.test.com/page.aspx?q=test1&q=test2&q=test3&q=test4 etc... 
```

或者

```
www.test.com/page.aspx?q=test1
www.test.com/page.aspx?q=test1,test2
www.test.com/page.aspx?q=test1,test2,test3
www.test.com/page.aspx?q=test1,test2,test3,test4 
```

使用标准 c# 正则表达式引擎时，这是一件相当直接的事情（我考虑过创建一个自定义 HttpModule 来处理这个问题并遍历 Match 集合），但是我想知道是否可以使用 IIS url重写组件，因为我很高兴地将它用于网站的其他部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:26:57.973

你为什么不直接匹配并传入

```
www.test.com/page.aspx?q=test1/test2/test3/test4 
```

然后由它`page.aspx`来解析它如何需要它？这样，当它真的是应用程序逻辑时，您的配置就不必更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:29:39.083

如果您使用的是 .net 4.0，什么不使用路由？

[http://everymanprogrammer.com/index.php/asp-net-4-0-routing-a-simple-tutorial-that-works/](http://everymanprogrammer.com/index.php/asp-net-4-0-routing-a-simple-tutorial-that-works/)

# python - 使用现有 id 创建一个新对象

> ID：11849125
> 
> 赞同：1
> 
> 时间：2012-08-07T15:24:59.897
> 
> 标签：python, sqlalchemy

我使用 SQLAlchemy 来定义一个`User`类。

如果用户没有登录我的网站，我想将他标识为`AnonymousUser`. 我希望我`AnonymousUser`成为我普通`User`类的子类，使用特殊方法（例如。`is_anonymous(self): return true`）。

现在，我最初在我的数据库中创建了一个匿名用户，使用 (say) `id = 0`。

我想定义`AnonymousUser`为的子类`User`，其中构造函数只返回匿名用户：

```
class AnonymousUser(User):
    def __init__(self):
        anonymous_user = User.get_by_id(0)
        self.username = anonymous_user.username
        self.id = anonymous_user.id
        ... 
```

但是当我创建一个时`AnonymousUser`，它不明白我不想要一个新的`User`，而只是创建一个现有的，并且它向会话`User`提交一个新的创建，并且由于已设置为现有的 anonymous_user它崩溃由于 id 唯一性条件`User``id``id`

如何告诉 SQLAlchemy`User`使用现有 ID 创建对象？

有没有更优雅的方式来做我想做的事？

我知道我可以通过 using 简单地定义一个 anonymous_user `User.get_by_id(0)`，但是我必须在`is_anonymous`我的对象中添加一个字段并在每次检查我的用户是否是匿名的时进行变量检查（而不是有两个不同的类，一个是微不足道的实施`is_anonymous: return False`和其他使用`is_anonymous: return True`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:36:06.913

一个快速的建议。您可以像这样在 User 类上实现 is_anonymous 方法：

```
def is_anonymous(self):
    return self.id == 0 
```

# jquery - 如何在不使用 html 的情况下在 div 中包含元素？

> ID：11849128
> 
> 赞同：0
> 
> 时间：2012-08-07T15:25:06.493
> 
> 标签：jquery, html, css, dom, parent

如果我的问题含糊不清或不清楚，我很抱歉，因为我对其中一些语言相对较新。

好的，我将解释一下情况：我目前有一个用 css 和 javascript 编写的音乐播放器，但是我想将所有这些“音乐播放器”放在我的“内容”div 中，该 div 位于我的 html 页面中。我已经在互联网上进行了调查，发现您实际上无法更改 css 中的父 div （对不起，如果我错了或使用了错误的术语）但是，它可以通过 jquery 和 DOM 来完成吗？我只是想知道究竟是怎么做到的，这是最好的方法吗？无论如何，为了帮助可视化情况，我将做一个非常基本的模板来说明我所做的事情。请记住，音乐播放器本身目前确实可以工作，而我并没有真正准备好移动和更改所有 css。

HTML

```
<head>
<script type="text/javascript">
    $(document).ready(function(){
    var description = " description blah blah "

    $('body').Musicplayer(playlist, {
          autoplay:true,
          description:description,
          Player:{
              swfPath:'../plugin/jquery-mplayer'
    }
    });
    });
    </script>
</head>
<body>
<div id="content"> 
    <!-- this is where i want the musicplayer to be --> 
    content blah blah </div>
<!-- this is where it appears at the moment when i inspect the page in mozilla firefox -->
</body> 
```

CSS

```
.Musicplayer {
    z-index:100;
    etc etc other stuff 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:27:45.520

我想音乐播放器被附加到，`body`因为那是你传递给方法/函数的选择器。如果您只是将选择器修改为，`$('#content')`那么它应该出现在`#content`元素中，所以我建议：

```
$('#content').Musicplayer(playlist, {
      autoplay:true,
      description:description,
      Player:{
          swfPath:'../plugin/jquery-mplayer'
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:27:08.987

`$('body')`是一个选择器。只需将其更改为`$('#content')`将选择`#content`id 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:29:24.680

有多种方法用于设置 html 内容或进行 DOM 替换，例如使用 jQuery 方法 .append() ：

```
$('div.demo-box').append('<div class="insertion">This text
 was <strong>inserted</strong></div>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T15:30:47.207

```
var MPdiv = $('div').Musicplayer(playlist, {
    autoplay:true,
    description:description,
    Player:{
      swfPath:'../plugin/jquery-mplayer'
});

$('#content').append(MPDiv); 
```

# latex - 如何为 Latex/PDF 输出添加图形/表格列表？

> ID：11849139
> 
> 赞同：5
> 
> 时间：2012-08-07T15:25:55.557
> 
> 标签：latex, python-sphinx, restructuredtext

我试图将数字列表和表格列表添加到由 Sphinx+Latex 生成的 PDF 文档中。到目前为止我没有发现任何有用的东西..

有人知道该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T12:26:42.250

它可能对谁感兴趣，我发现 Sphinx 可以将本机命令传递给 Latex。

因此，以下 Sphinx 源代码片段可以满足我的要求：

```
..raw:: latex

  \listoffigures
  \listoftables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-19T13:52:57.113

使用 sphinx 文档类**手册**进行渲染时，添加原始 LaTeX 命令

```
..raw:: latex

  \listofequations
  \listoffigures
  \listoftables
  \listof{literalblock}{List of Code Blocks} 
```

将列表放在带有阿拉伯数字的页面上，而不是带有罗马数字的页面上。

这是一个 LaTeX 片段，它进入**conf.py**中的 LaTeX 序言设置。它重新定义了命令序列`\sphinxtableofcontents`：

```
latex_elements['preamble'] = r'''
%% --------------------------------------------------
%% |:sec:| add list of figures, list of tables, list of code blocks to TOC
%% --------------------------------------------------
\makeatletter
\renewcommand{\sphinxtableofcontents}{%
  %
  % before resetting page counter, let's do the right thing.
  \if@openright\cleardoublepage\else\clearpage\fi
  \pagenumbering{roman}%
  \begingroup
    \parskip \z@skip
    \tableofcontents
  \endgroup
  %
  %% addtional lists
  \if@openright\cleardoublepage\else\clearpage\fi
  \addcontentsline{toc}{chapter}{List of Figures}%
  \listoffigures
  %
  \if@openright\cleardoublepage\else\clearpage\fi
  \addcontentsline{toc}{chapter}{List of Tables}%
  \listoftables
  %
  \if@openright\cleardoublepage\else\clearpage\fi
  \addcontentsline{toc}{chapter}{List of Code Blocks}%
  \listof{literalblock}{List of Code Blocks}%
  %
  \if@openright\cleardoublepage\else\clearpage\fi
  \pagenumbering{arabic}%
}
\makeatother
''' 
```

如果列表的目录中不应有任何条目，请删除这些`\addcontentsline`命令。

# delay - 延迟 vhdl 中的信号

> ID：11849140
> 
> 赞同：3
> 
> 时间：2012-08-07T15:26:00.727
> 
> 标签：delay, vhdl

我想在 vhdl 中将信号延迟几个周期，但是我在使用[如何在 vhdl 中将信号延迟几个周期时遇到问题](https://stackoverflow.com/questions/7918133/how-to-delay-a-signal-for-several-cycles-in-vhdl/)

我不需要注册信号吗？我的意思是，类似：

* * *

```
a_store and a_store_registered would be std_logic_vector(cycles_delayed-1 downto 0) 
```

* * *

```
process(clk)
begin
    if rising_edge(clk) then
      a_store_registered <= a_store;
    end if;
end process;    
a_out <= a_store_registered(cycles_delayed-1);

process(a_store_registered, a)
begin    
      a_store <= a_store_registered(size-2 downto 0) & a;
end process; 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:08:43.690

您链接到的解决方案*是*`rising_edge(clk)`注册信号 - 使用限定符在进程内写入信号的行为会创建寄存器。

延迟线的一个更简单的实现可以在一行代码中实现（如果你想将高位复制到输出，再加上另一个）

```
a_store <= (a_store(a_store'high-1 downto 0) & a) when rising_edge(clk);
a_out <= a_store(a_store'high); 
```

不知道为什么我在对链接问题的回答中没有提到这一点！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:57:46.737

I am not sure why you are approaching the problem as you are; there is no need for a second process here. What is wrong with the method suggested in the linked question?

```
if rising_edge(clk) then
  a_store <= a_store(store'high-1 downto 0) & a;
  a_out <= a_store(a_store'high);
end if; 
```

In this case your input is `a` and your output is `a_out`. If you want to make the delay longer, increase the size of `a_store` by resizing the signal declaration.

If you want to access the intermediate signal for other reasons, you could do this:

```
a_store <= a_store_registered(cycles_delayed-2 downto 0) & a;
process(clk)
begin
    if rising_edge(clk) then
      a_store_registered <= a_store;
    end if;
end process;    
a_out <= a_store_registered(cycles_delayed-1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T20:20:20.780

请记住，您可以使用该`foo'delayed(N ns)`属性或`foo <= sig after N ns`在模拟中。

# regex - 使用 Regex / Perl 解析日期列

> ID：11849143
> 
> 赞同：2
> 
> 时间：2012-08-07T15:26:11.187
> 
> 标签：regex, perl, date

我正在编写一个 perl 脚本来解析来自标准输入的制表符分隔数据。

该脚本会删除前导和尾随空格，将任何具有字符串“NULL”的字段清空，并将日期列从“MMM DD YYYY HH:MM:SS:SSSAM”格式重新格式化为“YYYYMMDD”格式。

样本输入：

```
93092   Apr  1 2010 12:00:00:000AM      59668370.60702875
22341   Apr  1 2010 12:00:00:000AM      51309196.84639429
27844   Apr  1 2010 12:00:00:000AM      NULL
150465  Apr 22 2010 12:00:00:000AM      19706190.97586569
119364  Jul  20 2010 12:00:00:000AM      16335977.41009162 
```

目标输出：

```
93092|20100401|59668370.60702875
22341|20100401|51309196.84639429
27844|20100401|
150465|20100422|19706190.97586569
119364|20100720|16335977.41009162 
```

该脚本接受一个参数，该参数表示具有需要转换的日期的列。在上面的示例中，我会使用“1”作为参数调用，因为第二列是需要转换的日期。多个列将由逗号分隔的列表表示。

这是我迄今为止能够做到的。

```
#!/usr/bin/perl
my @date_cols = split(/,/, $ARGV[0]);

while (<STDIN>) {
   my @fields = split(/\t/, $_, -1);
   for (@fields) {
      s/^\s+//;
      s/\s+\z//;
      s/^NULL\z//;
   }
   for (@fields[@date_cols]) {
##NEED HELP WITH DATE FORMATTING
   }

   print(join('|', @fields), "\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:26:31.813

使用[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece)很简单，很容易为您提供日期格式。该`strptime`功能可让您定义要使用的模式；该`strftime`功能可让您生成所需的输出格式。考虑：

```
use Time::Piece;
my $date = "Apr  1 2012 12:00:00AM";
my $t = Time::Piece->strptime($date,"%b %d %Y %H:%M:%S%p");
print $t->strftime("%Y%m%d\n"); 
```

这种方法的一个很好的特点是，一个或两个空格分隔月份和日期字段都没有关系。结果是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:25:50.443

根据上面戴夫克罗斯的建议使用[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece)：

```
use Time::Piece;

while (<STDIN>) {
    # Split each row into columns by white space
    my @fields = split /\s+/;

    # Rebuild the date ("Apr 1 2010") from columns 2 through 4
    my $time_field = join ' ', @fields[1..3];

    # Parse the date - see man strptime
    my $date = Time::Piece->strptime($time_field, '%B %d %Y');

    # Format the output - see man strftime
    print join '|', $fields[0], $date->strftime('%Y%m%d'), $fields[5];
} 
```

正则表达式是一个非常出色的工具，但日期很难看（甚至令人恐惧）。只要有可能，我更喜欢使用已经存在的库来解析它们。

# javascript - DOM 元素可以有一个属性，其值为任意对象（不是字符串）吗？

> ID：11849147
> 
> 赞同：2
> 
> 时间：2012-08-07T15:26:16.397
> 
> 标签：javascript, dom, attributes

我想做这样的事情：

```
var elem = document.createElement("input");
elem.setAttribute("my-attribute", myObject);
document.getElementById("parent").appendChild(elem); 
```

稍后我将需要在`myObject`对这个（和类似的）元素执行一些操作时获取。

注意：我需要它作为属性（而不是，例如，作为元素对象的成员，如 中`elem.myAttribute = myObject`），因为对于某些元素，值是硬编码到页面 HTML 中的字符串。我需要的是能够以编程方式为其他元素设置此属性，并使用不总是纯字符串的值。

我试过这个，它在我的浏览器（Firefox 14）中工作，但我需要知道这是否适用于跨浏览器，如果我决定使用 jQuery，我是否能够使用 jQuery 获取这些属性的值稍后我的页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:28:47.647

否 - 根据定义，属性存储字符串值。显而易见的方法是将对象存储为属性，但您说这不合适。

任何一个：

1) 使用 jQuery 的数据 API（因为它不会真正记录元素上的数据，所以你可以存储任何你想要的东西，而不仅仅是字符串）

2) 字符串化对象并将其作为 HTML5 数据属性附加到元素。

```
var elem = document.querySelector('p'),
    obj = {foo: 'bar'};
elem.setAttribute('data-myObj', JSON.stringify(obj));
/* ...then, later... */
var data = JSON.parse(elem.getAttribute('data-myObj')); 
```

但请注意，因为我们正在处理 JSON，您将无法将方法存储为该对象的一部分。他们将被 剥离`JSON.stringify()`。

最后，使用属性意味着你会弄乱你的 HTML，因为它们会出现在任何 HTML 转储中（与属性不同），但这纯粹是一个装饰性的弱点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:28:28.330

您可以使用 jquery 中的数据属性来执行此操作（http://api.jquery.com/data/）

您可以使用 html 5 数据属性： [http ://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

这些可以使用 jquery 数据 api 来检索。

然而，这些必须被串起来

“从 jQuery 1.4.3 开始，HTML 5 数据属性将自动拉入 jQuery 的数据对象”

# spring-security - 如何实现 Openid 连接和 Spring Security

> ID：11849148
> 
> 赞同：9
> 
> 时间：2012-08-07T15:26:16.373
> 
> 标签：spring-security, openid, oauth-2.0, google-openid

我是身份验证和授权的初学者，但我必须在工作中连接到 openid 连接提供商。我对如何使用 Spring Security 有所了解。

首先，通过遵循很好的指导，我得到了 UserInfo 对象。 [https://oauthssodemo.appspot.com/step/1](https://oauthssodemo.appspot.com/step/1)

然后我在下面找到了一个名为“spring-security-oauth”的出色实现。我可以在 tomcat 上运行该应用程序并成功连接到 facebook。
[https://github.com/SpringSource/spring-security-oauth](https://github.com/SpringSource/spring-security-oauth)

下一步，我想使用“spring-security-oauth”连接谷歌，但我不知道如何完全做到这一点。（说实话，我不知道openid connect和aouth2有什么区别..）

给我个提示。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-17T12:28:49.453

这是一个将 Google Open Id Connect 与 Spring Security 集成的示例最小项目：[https](https://github.com/fromi/spring-google-openidconnect) ://github.com/fromi/spring-google-openidconnect 对我来说，关键点是严重依赖 Spring OAuth2 以最小化所需的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:24:50.230

OpenID Connect 基本要素规范目前位于[http://openid.net/specs/openid-connect-basic-1_0.html](http://openid.net/specs/openid-connect-basic-1_0.html) 对于 Spring 实现各个步骤的具体细节，框架新问题进一步详细说明确切任务 wrt程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T07:35:52.257

You could use the [spring-social-google projet](https://github.com/GabiAxel/spring-social-google) to implement a "Sign in with Google" functionality. It's use OAuth 2.0 under the hood but right now it's use to Google+ API to retrieve profile informations. [I did a fork](https://github.com/chocmah/spring-social-google) to make it use the [Google Authentification and Authorization API](https://developers.google.com/accounts/) which is basicaly the openconnect Id standard

# java - 更改 JAVA Axis Web 服务响应 XML 正文

> ID：11849149
> 
> 赞同：2
> 
> 时间：2012-08-07T15:26:19.537
> 
> 标签：java, eclipse, web-services, tomcat6, axis

我正在尝试创建返回 vo 列表的 web 服务。我可以返回 VO 列表。但我需要以特定方式的 xml 结构。

我不知道如何使用 Eclipse 轴来做到这一点。

## 我的配置

*   日食 3.4
*   爪哇 1.6
*   轴运行时间
*   雄猫 6

## 我的VO结构

看VO

名称：字符串

标识：字符串

我在 webservice 类中有方法 getGroupLookVO

我得到一个返回 xml 作为

```
<getGroupLookVOResponse>
<getGroupLookVOReturn>
<name>one</name>
<id>1</id>
</getGroupLookVOReturn>
<getGroupLookVOReturn>
<name>two</name>
<id>2</id>
</getGroupLookVOReturn>
<getGroupLookVOReturn>
<name>three</name>
<id>3</id>
</getGroupLookVOReturn>
</getGroupLookVOResponse> 
```

我需要的xml结构是

```
<getGroupLookVOResponse>
<getGroupLookVOReturn>
<LookVO>
<name>one</name>
<id>1</id>
</LookVO>
<LookVO>
<name>two</name>
<id>2</id>
</LookVO>
<LookVO>
<name>three</name>
<id>3</id>
</LookVO>
</getGroupLookVOReturn>
</getGroupLookVOResponse> 
```

方法签名是

```
public LookVO[] getGroupLookVO() 
```

我尝试编辑 wsdl，但一旦我重新生成客户端，wsdl 就会被重写。我也不擅长WSDl。

有人可以帮助我并指出正确的方向吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:40:18.483

如果我遇到了你的问题，你应该重新生成 web 服务，而不是客户端。

1）更改THE WEBSERVICE中的方法（而不是客户端！）以获得您需要的行为

2) 右键单击​​您的 WS 包，然后新建 -> 其他 -> Web 服务 -> Web 服务

3）按照向导添加您要发布的所有方法

4）在服务器上部署您的网络服务

接着

5) 从新的 wsdl 重新生成客户端

* * *

只是个人评论，但这是一个品味问题。在 XML 中，不应该存在同一列表中元素顺序的概念，因为通过 XML 模式进行的验证不提供这种可能性。您可以按您想要的顺序生成元素，但如果您是精心设计的 XML 的“纯粹主义者”，则不应依赖同一列表中标签的顺序。但是，我不想对此感到太烦人:))

# redis - 我的 redis 密钥不会过期

> ID：11849153
> 
> 赞同：15
> 
> 时间：2012-08-07T15:26:30.387
> 
> 标签：redis, ttl, cache-expiration

当生存时间达到 0 时，我的 redis 服务器不会删除密钥。

这是一个示例代码：

```
redis-cli
>SET mykey "ismykey"
>EXPIRE mykey 20
#check TTL
>TTL mykey
>(integer) 17
> ...
>TTL mykey
>(integer) -1
#mykey chould have expired:
>EXISTS mykey
>(integer) 1
>#oh still there, check its value
>GET mykey
>"ismykey" 
```

如果我检查 redis 返回的信息，它会说 0 个密钥已过期。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T15:31:26.960

由于您正在执行“...”，因此很难确定，但我会说您在该部分设置 mykey ，这将有效地消除过期。

[来自 EXPIRE 手册](http://redis.io/commands/expire)

> 仅当使用 DEL 命令删除密钥或使用 SET 或 GETSET 命令覆盖密钥时才会清除超时

[另外，关于 TTL 的 -1 回复](http://redis.io/commands/ttl)

> 返回值
> 
> 整数回复：以秒为单位的 TTL，如果密钥不存在或没有超时，则为 -1。

**编辑：请注意，此行为在 Redis 2.8 中发生了变化**

> 从 Redis 2.8 开始，发生错误时的返回值发生了变化：
> 如果键不存在，该命令返回 -2。
> 如果密钥存在但没有关联的过期，则该命令返回 -1。

换句话说，如果您的密钥存在，它似乎是持久的，即没有任何过期设置。

编辑：如果我在 REDIS 从属服务器上创建密钥，我似乎可以重现这一点，从属服务器不会在没有主输入的情况下删除密钥，因为通常您不会在从属服务器上本地创建密钥。这是这里的情况吗？

> 然而，虽然连接到主节点的从节点不会独立地使密钥过期（但会等待来自主节点的 DEL），但它们仍将采用数据集中存在的过期状态的完整状态，因此当从节点被选为master 它将能够独立地使密钥过期，完全充当主人。

# google-drive-api - 一位管理员 - 100 个用户 - 简单，解决方案？（iOS 应用程序将读取此文件）

> ID：11849154
> 
> 赞同：1
> 
> 时间：2012-08-07T15:26:30.397
> 
> 标签：google-drive-api

我必须开发一个 ios 应用程序。一方面，一个管理员将管理一些文件（pdf、电影），另一方面，近 100 人将以“只读”模式与这些文件进行通信。

有 DropBox 解决方案吗？

我以为我只会创建一个帐户，并使用 DropBox 推荐的唯一文件夹应用程序，但 DropBox 可能不接受这个系统？我以为每个人都必须创建一个帐户，该应用程序将由管理员读取一个共享文件夹，但我们实际上并不需要创建 100 个帐户......这将使用 DropBox 的“完整 dropBox 模式应用程序”不推荐。

对不起我的英语不好。我更喜欢使用 DropBox 或谷歌驱动器而不是服务器，因为它们符合人体工程学和简单性，但也许没有解决方案......谷歌驱动器是替代解决方案吗？

PS：该应用将无法在 appStore 上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:32:23.473

我不能为 Dropbox 说话，但就 Google Drive 而言：

如果您不希望 100 个用户拥有 Google 帐户，您可以做的是公开共享文件，然后 100 个用户可以简单地阅读该文件。由于它是公开共享的，因此他们不必授权。

但是，如果您想控制文件的授权而不公开共享，则 100 个用户必须拥有 google 帐户。然后，您可以简单地将文件共享给这些用户，他们就可以访问它。如果需要，您可以将共享设置为只读。

# ruby-on-rails - Rails 3 路由嵌套控制器和子文件夹

> ID：11849155
> 
> 赞同：5
> 
> 时间：2012-08-07T15:26:31.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我需要一些有关嵌套控制器路由的帮助。我自己无法从 Rails 指南文档中弄清楚。
我在 rails 3.2 应用程序中有以下控制器：

```
/app/controllers/organizations_controller.rb (class OrganizationsController)
/app/controllers/organization/events_controller.rb (class Organization::EventsController) 
```

然后，在 routes.rb

```
resources :organizations, path: 'org' do
  resources :events
    member do
      get 'confirm'
    end
  end
end 
```

正在运行的`rake routes`节目（仅与我的问题相关的部分）：

```
 organization_event  GET  /org/:organization_id/events/:id(.:format)  events#show 
```

URL 可以，路由名称也可以，但是到“控制器/动作”的映射不正确。不像我想要的那样。应该是`organization/events#show`。

我错过了什么？我怎样才能将这条路线指向正确的控制器。我选择将其放在`events_controller`文件`organization`夹中，因为我已经`events_controller`在控制器文件夹的根目录中放置了另一个，它们有不同的用途。
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:39:22.207

```
namespace :organization do
   resources :events 
      member do
        get "confirm"
      end
   end
end 
```

更多信息[在这里](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)。

*编辑*

对不起，没有正确理解你。

```
resources :organizations, path: 'org' do
  resources :events, :module => "organization"
    member do
      get 'confirm'
    end
  end
end 
```

这符合您的需求吗？

# javascript - 循环的 Javascript 性能问题

> ID：11849157
> 
> 赞同：0
> 
> 时间：2012-08-07T15:26:33.267
> 
> 标签：javascript, jquery, ajax, json

该代码存在性能问题。它循环运行 150 次。

该代码适用于投注，比赛在屏幕上有空的投注字段。然后该代码适用于通过查看和比较分数来填充获胜者赔率。

例如，如果比赛以 1-0 主队获胜，我必须在屏幕上写上“MS1”。为此，我必须使用 jQuery attr 选择器获取得分信息。

在周末，有很多比赛，它正在崩溃或运行太慢：/

你有什么想法可以更快地工作吗？

```
OddEngine = function(odd)
{
    $("#matchCode_" + odd.ID).html(odd.C);
    $("#match_" + odd.ID).attr("code",odd.C);
    var status = $("#match_" + odd.ID).attr("status");
    if (status == 1)
        return;

    var htscore = $("#othomeTeamScore_"+odd.ID).html();
    var atscore = $("#otawayTeamScore_"+odd.ID).html();
    var iy_htscore = $("#homeTeamHalfScore_"+odd.ID).html();
    var iy_atscore = $("#awayTeamHalfScore_"+odd.ID).html();

    for (var i = 0; i < odd.Odds.length; i++) {
        var bet = odd.Odds[i];

         var winnerMsOdd = 'F.X';
          var winnerMsTitle =  'X';
          if (htscore > atscore)
          {
            winnerMsOdd = 'F.1';
            winnerMsTitle = '1';
          }
          else if (htscore < atscore)
          {
            winnerMsOdd = 'F.2';
            winnerMsTitle = '2';
          }

          $("#match_"+odd.ID+" [oddcode='MS']").html(bet[winnerMsOdd]);
          $("#match_"+odd.ID+" [oddtag='MS']").fadeIn();
          $("#match_"+odd.ID+" [oddtag='MS']").html(winnerMsTitle);

          if (currentSportId != 3)
          {
                var winnerIyOdd = 'S.X';
                var winnerIyTitle =  'X';
                if (iy_htscore > iy_atscore)
                {
                    winnerIyOdd = 'S.1';
                    winnerIyTitle = '1';
                }
                else if (iy_htscore < iy_atscore)
                {
                    winnerIyOdd = 'S.2';
                    winnerIyTitle = '2';
                }

                if (bet[winnerIyOdd])
                {
                    $("#match_"+odd.ID+" [oddcode='IY']").html(bet[winnerIyOdd]);
                    $("#match_"+odd.ID+" [oddtag='IY']").fadeIn();
                    $("#match_"+odd.ID+" [oddtag='IY']").html(winnerIyTitle);
                }

          }

          if (currentSportId == 1)
          {
                var winnerAuOdd = 'UNDER';
                if (parseInt(htscore) + parseInt(atscore) > 2.5)
                {
                winnerAuOdd = 'OVER';
                }

                if (bet[winnerAuOdd])
                {
                    $("#match_"+odd.ID+" [oddcode='AU']").html(bet[winnerAuOdd]);
                    $("#match_"+odd.ID+" [oddtag='AU']").fadeIn();
                    $("#match_"+odd.ID+" [oddtag='AU']").html(winnerAuOdd == 'UNDER' ? 'ALT' : 'ÜST');

                }

                var winnerTGOdd = 'GS.01';
                var winnerTGtitle = "0-1";
                if (parseInt(htscore) + parseInt(atscore) > 1 && parseInt(htscore) + parseInt(atscore) < 4)
                {
                    winnerTGOdd = 'GS.23';
                    winnerTGtitle = "2-3";
                }
                else if (parseInt(htscore) + parseInt(atscore) > 3 && parseInt(htscore) + parseInt(atscore) < 7)
                {
                    winnerTGOdd = 'GS.46';
                    winnerTGtitle = "4-6";
                }
                else if (parseInt(htscore) + parseInt(atscore) >= 7)
                {
                    winnerTGOdd = 'GS.7P';
                    winnerTGtitle = "7+";
                }

                if (bet[winnerTGOdd])
                {
                    $("#match_"+odd.ID+" [oddcode='TG']").html(bet[winnerTGOdd]);
                    $("#match_"+odd.ID+" [oddtag='TG']").fadeIn();

                    $("#match_"+odd.ID+" [oddtag='TG']").html(winnerTGtitle);
                }
          }
    }

    $("#msOdd_" + odd.ID).html(odd.C);
    if (currentSportId == 1 || currentSportId == 2 || currentSportId == 7)
    {
        $("#htOdd_" + odd.ID).html(odd.Odds["F.1"]);
    }
    $("#uOdd_"  + odd.ID).html(odd.C);
    $("#tOdd_"  + odd.ID).html(odd.C);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:44:31.127

您可以使用 '#match'+odd.ID 节点并在此节点的循环内键入所有节点搜索。例如。matchOdd.find( '[oddcode="MS"]' )，这应该会提高查询 DOM 的性能。

至于提高循环中的性能，您可以考虑通过委托 setTimeout 使其异步。这是一个资源链接，它解释了如何处理这个[http://www.kryogenix.org/days/2009/07/03/not-blocking-the-ui-in-tight-javascript-loops](http://www.kryogenix.org/days/2009/07/03/not-blocking-the-ui-in-tight-javascript-loops)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:17:54.820

里面有很多不好的东西：

问题：

*   你在反复敲击 DOM。这是不可避免的，但你不需要像你正在做的那样做那么多。很多剩余的点后续如何避免。

*   您正在使用属性选择器。这些很慢，并且在大多数非 XML 场景中没有本地方法来支持，因此将迫使解释器进行更多工作。尝试作为类代替。您可以拥有多个类并使用 jQuery addClass 和 removeClass 函数添加/删除，而不会干扰其他类。如果您支持 IE8，请缩小到最近的 ID 并使用带有类的标签选择器。

*   您没有缓存任何 JQ 选择器。$('#someId') 做了一些工作（虽然比其他任何东西都快。如果它要被重用，分配给一个 var。约定是：var`$someId = $('#someId');`所以你知道它是一个 jqObject。这重复：`$('#someId <other stuff>)`可能比这慢：`$someId.find(<otherstuff>)`重复。在你的情况下，假设odd.id 是唯一的，你至少想要：`var $matchHtml = $("#matchCode_" + odd.ID)`在循环的顶部。

*   你正在做大量的 UI 工作。考虑构建您需要的集合，然后在循环后立即处理它们。例如，为 AU 和 TG 构建两个 JQ 对象（参见“添加”方法），然后在循环完成后使用它们需要的功能来处理它们。

*   这可能没有 JQ 的东西那么重要，但你使用了很多 '.' 不必要的运营商。每一个 '。' 实际上确实代表了一些工作，并且在某些情况下实际上代表了像长度这样的吸气剂，它可以做更多的工作，因为它们必须计算数组元素。这是超肛门循环，它还具有更简洁的良好副作用：

```
var myOdds = odd.Odds,
i=myOdds.length;

//if order matters, this goes backwards. Easy fix: myOdds.reverse

while(i--){
    thisOdds = myOdds[i];//if you're using thisOdds more than once
    //do stuff here
} 
```

# python - 在python中格式化nan float

> ID：11849158
> 
> 赞同：6
> 
> 时间：2012-08-07T15:26:36.570
> 
> 标签：python, string-formatting

我正在尝试在“nan”浮点数上使用 string.format。

[这是python 文档](http://docs.python.org/release/2.6/library/string.html)中对“g”选项的描述。

> 一般格式。这会将数字打印为定点数字，除非数字太大，在这种情况下它会切换到“e”指数表示法。Infinity 和 NaN 值分别格式化为 inf、-inf 和 nan。

这就是我在解释器（Python 2.6）中尝试的方法：

```
>>> print "{0:g}".format(float('nan'))
-1.#IND 
```

据我了解文档，输出应该是“nan”。

这是一个错误还是我做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T15:32:11.117

`repr(float)`在 Python 2.6 和 Python 3.0 中已修复；见[http://bugs.python.org/issue1635](http://bugs.python.org/issue1635)；但是`str.format`直到 2.7 分支才修复；见[http://hg.python.org/cpython/rev/c5e0d9beebf9](http://hg.python.org/cpython/rev/c5e0d9beebf9)和[http://bugs.python.org/issue1580](http://bugs.python.org/issue1580)。

我建议看看是否`"{0!r}"`适合你；这*应该*调用完整的`repr`代码。

如果您需要使用`"{0:g}"`格式规范，您可以尝试子类化`float`和覆盖`__format__`：

```
class FixFloat(float):
    def __format__(self, format_spec):
        return 'nan' if math.isnan(self) else float.__format__(self, format_spec)

"{0:g}".format(FixFloat(1.2345e9))
'1.2345e+09'
"{0:g}".format(FixFloat(float('nan')))
'nan' 
```

# ios - 添加背景图像会使背景全黑 - 可能未检测到图像

> ID：11849162
> 
> 赞同：1
> 
> 时间：2012-08-07T15:26:53.043
> 
> 标签：ios, ios5

我创建了一个名为 img 的组，并在其中放置了一张我想作为背景出现的图像。

但相反，背景变成了全黑。

这是我用于此的代码。我把代码放在`viewDidAppear`方法中

```
self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"img/building.png"]]; 
```

有没有想过我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:39:35.310

我假设您正在从应用程序包中加载图像？如果是这种情况，则 UIImage 未正确创建。

尝试：

```
UIImage *image = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"building" ofType:@"png"]];
self.view.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:32:17.247

`[self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"building.png"]];`改为使用

# arrays - 如何对结构中的矩阵（向量）元素求和

> ID：11849167
> 
> 赞同：1
> 
> 时间：2012-08-07T15:26:58.583
> 
> 标签：arrays, matlab, struct, sum

我有一个`M x N`带有字段的大小结构数组，`var`它们`val`是向量。

我想做的是得到一个`M x N`大小矩阵`A`，其中每个元素都包含来自结构数组的向量（或）`A(i, j)`的总和值`var``val`

例如：

```
myStructure(1,5)

ans = 

    var: 1
    val: [0.0100 0.1800 0.8100]

sum(myStructure(1,5).val)

ans = 

    1

myStructure(7,8)

ans = 

     var: [1 3]
     val: [1x9 double]

myStructure(7,8).val

ans =

  Columns 1 through 6

    0.1111    0.1111    0.1111    0.1111    0.1111    0.1111

  Columns 7 through 9

    0.1111    0.1111    0.1111 
```

**因此`A(1,5)`应该是 1 并且所有元素`A(i,j)`都应该等于`sum(myStructure(i,j).val)`。**

有谁知道如何在不使用 for 循环的情况下在 Matlab 中完成此操作？

我尝试以多种方式（`sum(messages.val)`和`sum(messages(:,:).val)`...）使用 sum 函数，但无法获得所需的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:56:03.903

您可以使用以下方法将字段元素放入一个矩阵中：

```
svals = [myStructure.val]; 
```

如果`val`总是相同的长度（让我们命名它`P`），这将是一个`numel(myStructure)*P x 1`包含所有字段的所有值的向量。你当然可以[重新塑造](http://www.mathworks.nl/help/techdoc/ref/reshape.html)它：

```
[N,M]=size(myStructure);
P = numel(myStructure(1,1).val);
svals = reshape(svals,[P M N]); 
```

现在只需对第一个维度求和，就可以得到`MxN`大小`A`矩阵：

```
A = squeeze(sum(svals,1)); 
```

在最后一步中应用[挤压](http://www.mathworks.nl/help/techdoc/ref/squeeze.html)`A`以删除生成的单例维度（否则将是 size `1xMxN`）。

如果`val`长度可以变化，我认为除了循环它或使用[arrayfun 之外别无他法](http://www.mathworks.nl/help/techdoc/ref/arrayfun.html)，这与循环基本相同：

```
A = arrayfun(@(x) sum(x.val),myStructure); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:24:40.950

这是一个略有不同的解决方案。首先让我们创建一个用于测试的数组结构：

```
s = struct();
for i=1:5
    for j=1:3
        s(i,j).var = i+j;
        s(i,j).val = rand(1,randi(10));  %# different lengths vectors
    end
end 
```

现在我们做总和：

```
A = cellfun(@sum, reshape({s.val}, size(s)))

A =
       1.9278       3.0719       5.8731
       3.2377      0.43874       2.2374
       3.0661       2.8892       4.1455
       1.9093       1.4758        1.441
       4.8731       0.5308       3.4076 
```

# objective-c - 自定义多点触控手势 (OS X)

> ID：11849171
> 
> 赞同：1
> 
> 时间：2012-08-07T15:27:06.930
> 
> 标签：objective-c, ios, macos

是否可以为 OS X 创建自定义多点触控手势？我知道您现在可以通过“系统偏好设置”制作自己的手势，但我的问题是该手势是否可以执行操作系统默认设置中可能的触控板选项中未列出的操作。例如，假设我想通过用三个手指滑动或沿着这些线滑动来关闭应用程序。

我知道这很可能是需要编写的外部应用程序，但我只是想了解从哪里开始阅读此内容（Objective C 中要查看的函数等）。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:09:18.657

是的，覆盖 touchesBegan 并编写您自己的自定义代码来解释相应的触摸事件。

# forms - onclick 事件谷歌应用脚 本

> ID：11849173
> 
> 赞同：1
> 
> 时间：2012-08-07T15:27:06.590
> 
> 标签：forms, button, google-apps-script

我的按钮的 onclick 事件永远不会被调用：

这是 hello.html（html 脚本）

```
<html>
Hello World!!

  <form id="myForm">

   <input type="button" onclick='google.script.run.processForm(this.parentNode)'
 value='Submit!' name="submit">
  </form>
</html> 
```

这是 Code.gs

```
function doGet() {
  return HtmlService.createTemplateFromFile('hello').evaluate();
}

function processForm(myForm) {
  logtoerrorsheet("Hello Button");  
}

function logtoerrorsheet(mystring){
  //return;

  var ss = SpreadsheetApp.openById('spreadsheetID').getSheets()[0];
  var range = ss.getRange(ss.getLastRow()+1, 1, 1, 2);
  var values = [[new Date(), mystring]]; 
  range.setValues(values); 
} 
```

如果我从编辑器运行 processForm，我会看到它记录了对我的电子表格的调用。但是，当我运行该应用程序并看到下方带有提交按钮的 Hello World 时，单击该按钮不会执行任何操作。

# mysql - 以另一个表中的 2 个唯一值为条件从表中选择数据

> ID：11849177
> 
> 赞同：2
> 
> 时间：2012-08-07T15:27:12.860
> 
> 标签：mysql, sql

我刚刚开始使用 SQL，并且直到现在一直在谷歌搜索快速提示，但是我已经被困在这个上一段时间了。

我有两个表，Stock_Data 有 2 列，ID 和日期。第二个表非常大，包含几百万行数据，称为 Options_Data。第二个表还有一个 Id 列和一个 Date 列以及大约 12 个我想下载的额外数据列。

我想做的是

```
for each row i in Stock_Data

SELECT * FROM Option_Data where Option_Data.Id = Stock_Data.Id(i)

AND WHERE Option_Data.Date BETWEEN Stock_Data.Date-60 days and Stock_data.Date+60 days

end 
```

本质上; 从 Stock_Data 中获取股票 ID 及其唯一的事件日期，前往 Option_Data 并在事件日期前后 60 天取出该股票 ID 的数据。

我只在matlab中真正正确地编码过，因此循环类比和伪代码。我可以仅使用 ID 来解决问题，但它涉及下载比必要更多的数据，这是每个 ID 的唯一数据范围让我遇到麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:31:13.663

```
SELECT
  Option_Data.*
FROM
  Stock_Data
INNER JOIN
  Option_Data
    ON  Option_Data.ID = Stock_Data.ID
    AND Option_Data.Date BETWEEN Stock_Data.Date-60 and Stock_data.Date+60 
```

# ruby-on-rails - Rails - 基于另一个模型验证属性

> ID：11849179
> 
> 赞同：3
> 
> 时间：2012-08-07T15:27:17.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有一个属于 User 类和 Role 类的 Assignment 类。它存储三个值 - 对其所属用户的引用、对其所属角色的引用以及指示创建分配实例的用户名称的字符串值。

```
class Assignment < ActiveRecord::Base
  include ActiveModel::Validations

  belongs_to :user
  belongs_to :role  

  attr_accessible :user, :role, :assigned_by_user

  ... 
```

在我的模型验证中，我想执行检查以确保assigned_by_user 属性与有效用户的名称匹配。但是，我似乎无法访问分配模型中的 User.find(...) 方法。

我将如何实现此功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T15:43:08.620

将“检查用户”模块添加到您的 lib 文件夹 (check_user.rb)。然后在那个文件中

```
 module CheckUser

 def search_user
  user = User.find_by_name(self.assigned_by_user)
  unless item.nil?
    errors.add(:name_found, "This username has already been taken")
  end
 end 
```

然后在您的分配模型中

```
 class Assignment < ActiveRecord::Base
  include CheckUser
  validate :search_user 
```

# sql-server - 将光标更改为 CTE

> ID：11849183
> 
> 赞同：2
> 
> 时间：2012-08-07T15:27:33.387
> 
> 标签：sql-server, sql-server-2008

是否可以将以下光标写入 CTE？当前运行需要很长时间。

这是我的代码：

```
if @ReportSource = 'TAB'

  BEGIN
     DECLARE yr_cursor CURSOR
     FOR
       SELECT YEAR, RouteNum, RampInfo, BeginMeasure, EndMeasure, OriginalRoute, Description, CountyDesc, Incidents from #RptParms

     OPEN yr_cursor;

 FETCH NEXT FROM yr_cursor INTO @Year, @RouteNum, @RampInfo, @BeginMeasure, @EndMeasure, @OriginalRoute, @Description, @CountyDesc, @Incidents;

 WHILE (@@FETCH_STATUS = 0)

   BEGIN 

       SELECT @sql_str_fred = N'SELECT route_number, beg_measure AS MILELOG, AADT_TOTAL AS VMT, end_measure, RCLINK,YEAR
                                FROM VW_FRED_AADT_HIST
                                WHERE route_number = '''+ @RouteNum + '''
                                and YEAR = '''+ @Year + '''
                                and FIPS_AND_COUNTY Like ' + '''%' + @CountyDesc + '''
                                and beg_measure BETWEEN '+ cast(@BeginMeasure as varchar(8)) + ' and ' + cast(@EndMeasure as varchar(8)) + ''

       SELECT @sql_str_fred = N' SELECT * from OPENQUERY(EDWGEARS, ''' + REPLACE(@sql_str_fred, '''', '''''') + ''')' 

                      INSERT #freddata  (ROUTE_NBR , 
                                         MILELOG , 
                                         VMT ,
                                         END_MEASURE ,
                                         RCLINK ,
                                         YEAR )         
                       EXEC sp_ExecuteSQL @sql_str_fred 

               FETCH NEXT FROM yr_cursor INTO @Year, @RouteNum, @RampInfo, @BeginMeasure, @EndMeasure, @OriginalRoute, @Description, @CountyDesc, @Incidents;

             END   

     CLOSE yr_cursor
    DEALLOCATE yr_cursor

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:50:23.853

假设**#RptParms** - 是一个带有参数值的表并且不是很大......然后所有参数都可以与这样的查询组合：

```
--  The maximum length of the query string in OPENQUERY is 8 KB !!!
declare
    @sql varchar(max) = '
;WITH lst AS (
    SELECT * FROM (VALUES
--- values ---
    ) aa(rn,yr,dsc,m1,m2)
) SELECT route_number, beg_measure AS MILELOG, AADT_TOTAL AS VMT, end_measure, RCLINK,YEAR
FROM VW_FRED_AADT_HIST lst
WHERE   route_number = lst.rn
    and YEAR = lst.yr
    and FIPS_AND_COUNTY Like lst.dsc
    and beg_measure BETWEEN lst.m1 and lst.m2   
'

    select @sql = REPLACE(@sql, '--- values ---', '--- values ---,
('    + ISNULL('''' + RouteNum                          + '''', 'NULL')     --  rn:     1234 --> '1234' or --> NULL
+ ',' + ISNULL('''' + YEAR                              + '''', 'NULL')     --  yn:     1234 --> '1234'
+ ',' + ISNULL('''%'
        + replace(replace(replace(replace(Description
            , '[', '[[]')
            , '%', '[%]')
            , '_', '[_]')
            , '''', '''''')
        + '''', 'NULL')                                                     --  dsc:    a_b[c]%d'e  --> '%a[_]b[[]c][%]d''e'
+ ',' + ISNULL('''' + cast(BeginMeasure as varchar(8))  + '''', 'NULL')     --  m1:     1234 --> '1234' 
+ ',' + ISNULL('''' + cast(EndMeasure   as varchar(8))  + '''', 'NULL')     --  m2:     1234 --> '1234' 
+ ')')
    from #RptParms

-- print @sql
/*
;WITH lst AS (
    SELECT * FROM (VALUES

--- values ---,
('1234','1234','%a[_]b[[]c][%]d''e','1234','1234'),
('222',NULL,'%abcde','1234','1234'),
(NULL,'1234','%a[_]b[[]c][%]d''e','1234','1234')

    ) aa(rn,yr,dsc,m1,m2)
) SELECT route_number, beg_measure AS MILELOG, AADT_TOTAL AS VMT, end_measure, RCLINK,YEAR
FROM VW_FRED_AADT_HIST, lst
WHERE   route_number = lst.rn
    and YEAR = lst.yr
    and FIPS_AND_COUNTY Like lst.dsc
    and beg_measure BETWEEN lst.m1 and lst.m2   
*/

INSERT #freddata  (ROUTE_NBR, MILELOG, VMT, END_MEASURE, RCLINK, YEAR)
    SELECT * 
    from OPENQUERY(EDWGEARS, @sql) 
```

再次重申： **OPENQUERY 中查询字符串的最大长度为 8 KB ！！！**

# xml - 使用 shell 抓取 XML

> ID：11849184
> 
> 赞同：-2
> 
> 时间：2012-08-07T15:27:33.700
> 
> 标签：xml, bash, parsing, shell

我有以下输出

```
<computers><size>5</size><computer><id>1</id><name>NSK1210050726M</name></computer><computer><id>2</id><name>nsk1200015739m</name></computer><computer><id>3</id><name>SFO1502083053M</name></computer><computer><id>5</id><name>nsk1501817326m</name></computer><computer><id>8</id><name>nsk1501901173m</name></computer></computers> 
```

我只想使用 shell 脚本获取标签内的名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:11:57.440

如果你的 xml 在一个 shell 变量中，`$XML`那么你可以使用 shell 参数替换和一个简单的循环来做一个非常糟糕的解析它。

```
XML='<computers><size>5</size><computer><id>1</id><name>NSK1210050726M</name></computer><computer><id>2</id><name>nsk1200015739m</name></computer><computer><id>3</id><name>SFO1502083053M</name></computer><computer><id>5</id><name>nsk1501817326m</name></computer><computer><id>8</id><name>nsk1501901173m</name></computer></computers>'
match=0
for word in ${XML//[<>]/ }; do
    if [ $match -eq 1 ]; then
        echo $word
        match=0
    elif [ $word = "name" ]; then
        match=1
    fi
done 
```

但实际上，真的，使用@Brian Agnew 建议的 xml starlet 之类的东西是一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:33:25.533

您应该查看用于解析和修改 XML 的[XMLStarlet](http://xmlstar.sourceforge.net/)命令行工具包。

对于上述内容，您可以指定一个 XPath 来提取文本，尊重字符编码、实体等。

```
$ xmlstarlet sel -t -v "//name" x.xml 
```

将为您提供计算机名称列表（假设您的 XML 在 中`x.xml`）。您可以更好地格式化它们：

```
$ xmlstarlet sel -t -m  "//name" -v "translate(.,'&#10;','')" -n x.xml 
```

# scala - 在 Shapeless 中返回大小为 n 的列表的方法

> ID：11849185
> 
> 赞同：8
> 
> 时间：2012-08-07T15:27:35.637
> 
> 标签：scala, scala-2.10, shapeless

是否可以使以下代码工作？

```
def zeroTo[N <: Nat]:Sized[List[Int], N] = {
  new Sized[List[Int], N](List.iterate(0, toInt[N])(1+)) {
    type A = Int
  }
} 
```

我收到一个编译错误，提示“找不到参数 toIntN 的隐式值：shapeless.ToInt[N]”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T15:53:59.953

您可以只添加一个上下文绑定：

```
def zeroTo[N <: Nat: ToInt]: Sized[List[Int], N] = {
  new Sized[List[Int], N](List.iterate(0, toInt[N])(1+)) {
    type A = Int
  }
} 
```

这给了我们：

```
scala> zeroTo[_6]
res0: shapeless.Sized[List[Int],shapeless.Nat._6] = List(0, 1, 2, 3, 4, 5) 
```

请注意，您可以使用以下或多或少等效地编写它`wrap`：

```
def zeroTo[N <: Nat: ToInt]: Sized[List[Int], N] =
  Sized.wrap(List.iterate(0, toInt[N])(1+)) 
```

*更新*：Shapeless 2.2.0 版本：

```
def zeroTo[N <: Nat: ToInt]: Sized[List[Int], N] = {
  Sized.wrap[List[Int], N]( List.iterate( 0, toInt[N] )( 1+ ) )
} 
```

# android - Android ListView：不显示所有字符串

> ID：11849186
> 
> 赞同：1
> 
> 时间：2012-08-07T15:27:43.577
> 
> 标签：android, string, listview

我从以下字符串显示一个列表视图：

```
String[] values = new String[] { test1, test2, test3 }; 
```

变量：

```
private String test1 = "test";
private String test2 = "test";
private String test3 = "test3"; 
```

现在我不想在我的列表视图中显示包含“test”的字符串。像这样：

```
if (String == "test") {
*don't show in ListView*;} 
```

如果它们包含“test”，我希望它一次测试所有字符串

这怎么可能？

编辑：这里是适配器代码：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);
    listView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:30:56.583

是的...

```
if (values[i].equals("test")) // i being the iterator of your for-loop 
```

或者

```
if (values[i].contains("test")) 
```

包含虽然是一个慢（er）字符串函数。

不过，您可能想使用 ArrayList... 这样您就可以将所有这些对象添加到数组列表中，然后遍历它...并随时删除它们...

```
// Do something to add all items to your array list
...
// Iterate through the list, removing what doesn't need to be there
for (int i = 0; i < arrayList.size(); i++){
    if (arrayList.get(i).contains("test"))
        arrayList.remove(i);
} 
```

...然后将 'arrayList' （或您所称的任何名称）设置为适配器的字符串列表。如果您使用相同的构造函数，它将看起来像这样......

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, arrayList.toArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:32:35.087

您应该在 ListView 上使用过滤器。看看这些例子：

（简单迭代）[http://androidsearchfilterlistview.blogspot.com/2011/06/android-custom-list-view-filter.html](http://androidsearchfilterlistview.blogspot.com/2011/06/android-custom-list-view-filter.html) (getFilter())[使用自定义（对象）适配器过滤 ListView](https://stackoverflow.com/questions/5780289/filtering-listview-with-custom-object-adapter)

像其他人发布的一样，您使用 比较 String 对象`.equals()`，但如果您尝试仅显示某些项目，`ListView`则应使用`getFilter()`我发布的链接中描述的方法。

编辑：我发现你是一个很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:34:12.407

一直以来，如果您想比较 2 个字符串，请使用`equals`方法

[阅读有关 equals() 方法的信息](http://www.cafeaulait.org/course/week4/37.html)

# java - 当代码逐步执行时，流如何工作？

> ID：11849189
> 
> 赞同：0
> 
> 时间：2012-08-07T15:28:02.730
> 
> 标签：java, stream

例如，在 java 中，要从控制台读取输入，您可以编写如下内容：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class ReadConsoleSystem {
  public static void main(String[] args) {

    System.out.println("Enter something here : ");

    try{
        BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
        String s = bufferRead.readLine();

        System.out.println(s);
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }

  }
} 
```

所以在这一行`String s = bufferRead.readLine()`中，代码只是等待输入进来，然后进入下一步，但是如果你想看一个连续的字符串流，试图解析出它的片段，例如，读取一个流Twitter 状态，并且只保存其中包含“奥巴马”一词的那些？

我不明白代码如何逐行执行，同时处理来自流的输入，然后突然检测何时给出输入并保存它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:39:37.420

bufferRead.readLine(); 在用户按下返回键之前，不会返回调用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:38:40.183

控制台是行缓冲的。这意味着一整行都是 Java 进程一次，所以它看不到你写字符或回退空格来删除它们等。

我怀疑你不需要看看它是如何做到的。也许您可以描述您要解决的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:32:29.047

那里的代码写入仅设置为从系统输入（即控制台）读取一行输入。它的设置是，当您执行 readLine 时，它​​将从输入中读取一行。你必须输入一些东西（“Hello there”）并按回车键，它会接受它，并将其放入 String s。如果要解析内容，请在后面手动进行

```
if(s.contains("Obama")) {
    //blah
} 
```

# sql-server - 使用动态列号进行 T-SQL 分组

> ID：11849196
> 
> 赞同：0
> 
> 时间：2012-08-07T15:28:27.113
> 
> 标签：sql-server, database, tsql, dynamic, relational-database

假设我有一个像这样的一维表：

```
TBL_1
[ Task  ][ Entity ][ Timespan ]
[ TASK1 ][  ID1   ][    3     ]
[ TASK2 ][  ID2   ][    4     ]
[ TASK2 ][  ID1   ][    5     ]
[ TASK1 ][  ID2   ][    6     ] 
```

我如何将它变成像这样的 2D 视图：

```
[ Entity ][ TASK1 ][ TASK2 ]
[  ID1   ][   3   ][   5   ]
[  ID2   ][   6   ][   4   ] 
```

鉴于任务的数量应该是动态的？

我目前的解决方案是这样的：

```
SELECT A.Entity, B.Task TASK1, C.Task TASK2
FROM (SELECT DISTINCT ENTITY FROM TBL_1) A
LEFT JOIN TBL_1 B
ON A.Entity = B.Entity AND B.Task = 'TASK1'
LEFT JOIN TBL_1 C
ON A.Entity = C.Entity AND C.Task = 'TASK2' 
```

但这需要我对任务进行“硬编码”。我怎样才能使这个动态？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:40:22.580

您正在寻找一个[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 为此，您可以使用 Dynamic SQL Pivot。此策略将在执行查询时获取要转换的列名：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(task) 
                    from t1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT entity, ' + @cols + ' from 
             (
                select entity, task, timespan
                from t1
            ) x
            pivot 
            (
                min(timespan)
                for task in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/89495/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:51:28.307

您也可以本着您所尝试的精神来做到这一点。但是，使用 group by 比您尝试的要简单得多：

```
SELECT ENTITY,
       max(case when t.task = 'Task1' then timespan end) as task1,
       max(case when t.task = 'Task2' then timespan end) as task2,
       . . .
FROM TBL_1 t
group by entity 
```

要动态生成列，您需要使用动态 SQL。这是你真正想要的吗？

# windows - 是否可以直接访问视频卡？（无 API）

> ID：11849200
> 
> 赞同：3
> 
> 时间：2012-08-07T15:28:33.143
> 
> 标签：windows, api, rendering, low-level

我现在对使用 OpenGL 有点经验，我开始使用它是因为据说它是调用视频卡功能的唯一方法。（除了 DirectX - 我不喜欢 OpenGL）

对于编程（例如在 C/C++ 中），操作系统提供了许多 API，例如打印功能。但是这些也可以通过用汇编语言编码来绕过 - 并调用更低级别的 API（提高速度）或直接 CPU 调用。

所以我开始想知道为什么这在视频卡上是不可能的。为什么需要像 OpenGL 或 DirectX 这样的 API？正在进行的过程是：

```
API-call >
 OS calls video card (with complex opcodes, I think) >
  video card responses (in complex binary format) >
   OS decodes this format and responses to user (in expected API format) 
```

我相信这应该会降低渲染过程的速度。

所以我的问题是：
**是否有可能绕过任何图形 API（在 Windows 下）并直接调用视频卡？**

谢谢，
丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:51:23.683

使用程序集或绕过 api 不会自动使某些事情变得更快，通常更慢，因为您不知道编写库的人知道什么。

绝对有可能是的，这些库只是处理器指令，可以戳和窥视寄存器和 ram，你可以很容易地戳和窥视寄存器和 ram。第一个问题是你能得到这些信息吗，当然，你可以看看 linux 驱动程序或其他开源资源。其次，今天的大部分繁重工作都是由逻辑或图形处理器在图形芯片中完成的，因此主机只是一个中间人，如果有瓶颈，不一定是瓶颈。是的，您可以根据您的视频卡/芯片等对 gpus 进行编程。

你需要确定瓶颈到底在哪里，如果真的有，也许总线是你的问题，也许操作系统是你的问题，或者编译器，或者硬盘或系统内存，处理器和架构本身，缓存等。同时，除非您尝试，否则您将如何学习如何找到这些东西。

我建议完全摆脱 Windows，没有操作系统，去裸机。获取 linux 和其他开源资源以及您可以从供应商处获得的任何东西，并更接近金属。您还需要有关 pci/pcie 总线和网桥、dma 控制器以及路径中所有内容的大量信息。如果您不想那么低，请使用 linux 或 bsd 或其他一些众所周知如何接管视频系统的命令行环境，并在保留操作系统和开发环境的同时接管视频系统（vi/ emacs、gcc）。

如果这太高级了，那么我建议，涉足简单的 gpu 例程，以至少在某种程度上了解视频卡的工作原理，并一步一步地解决这个学习练习。

# css - 固定宽度容器中的浮动 DIV 继续水平对齐？

> ID：11849201
> 
> 赞同：-4
> 
> 时间：2012-08-07T15:28:39.313
> 
> 标签：css, html, width, alignment, containers

我有一个固定宽度的 960px 容器，我正在调整我的设计以适应各种屏幕分辨率。在容器中，我有一些`DIV`使用 width % 和 min-width 的浮动 s，例如：

```
width:80%;
min-width:200px; 
```

这里的问题是`DIV`s 不是水平排列的；他们最终在彼此下方。以前，我`DIV`的 s 有一个设定的宽度（我现在改为 min-width）。

我目前如何形成 DIV 的一个例子：

容器：

```
width: 830px;
float: left; 
```

第一栏：

```
width:100%;
min-width: 200px;
float: left; 
```

第二栏：

```
width:100%;
min-width: 200px;
float: left; 
```

第三栏：

```
width:100%;
min-width: 200px;
float: left; 
```

等等

在此示例中，第 1 列 DIV 覆盖了容器的整个宽度，并将其他 DIV 向下推。

下面的 HTML 示例：

```
<div id="container">
   <div id="1stcolum">Hello world</div>
   <div id="2ndcolum">Hello world</div>
   <div id="3rdcolum">Hello world</div>
</div> 
```

如您所见，HTML 中也没有什么特别之处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T16:00:16.740

根据您发布的 CSS 和 HTML ..

你不能让 3 个左浮动的 div 都占用相同的 100% 宽度，除非它们堆叠在一起。这就是 div 堆叠的原因。第一列占据 100% 的宽度，第二列没有空间也占据 100% 的宽度，除非第二列低于第一列。

如果您希望这些列实际上是列，则需要它们具有 33.3% 的宽度。（100% 的三分之一）

而且，如果您希望列的宽度至少为 200 像素，则不需要每列的最小宽度，您只需要容器 div 的最小宽度为 600 像素。

[演示](http://jsfiddle.net/NotInUse/qxHqL/1/)

# ruby-on-rails - Rails 3.1 has_many through - 反复出现的噩梦

> ID：11849208
> 
> 赞同：2
> 
> 时间：2012-08-07T15:29:05.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我通过关联遇到了一些与 has_many 相关的重大问题，并且确实可以通过一些帮助来解决。

在[Ruby On Rails 指南示例](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)的上下文中，我将如何编写一个表格，为给定的医生列出所有患者，特别是他们的预约时间，然后可以对其进行编辑。我希望能够以相同的形式编辑患者姓名和他们的预约日期......这基本上是我遇到的问题的症结所在；以相同的形式编辑两个模型并使其在两者上都保持值。

如果有人可以提供一些指示或工作示例，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:57:05.123

You are describing a problem involving a nested model form(has_many). Try this railscast for info about doing this in rails: [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1) Of particular interest to you should be the accepts_nested_attributes_for method.

# perl - 远程运行 Perl 脚本时使用 MsgBox 回显变量？

> ID：11849210
> 
> 赞同：2
> 
> 时间：2012-08-07T15:29:11.407
> 
> 标签：perl

这可能吗？

使用 VB.net 我正在执行一个远程 perl 脚本。我希望一个 MsgBox 出现在我的屏幕上，类似于 VBScript。

我试着只做 Win32::MsgBox("Test") 但这没有用。甚至可能吗？

我正在从 Windows 系统远程执行脚本到 Unix 系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:21:34.393

您可以像这样使用纯文本替换：

```
sub AskYesNo {
    my ($question, $default) = @_;
    print $question, $default ? " [Y/n] " : " [y/N] ";
    my $answer = lc(ReadLine 0);
    chomp $answer;
    return 1 if $answer eq "y";
    return 0 if $answer eq "n";
    return $default;
} 
```

如果用户仅按 Enter，它将选择默认答案“y”或“n”。它可能不漂亮，但可以完成工作并在任何 Perl 下工作。

# c# - Vim 用于做 java 和 C#？

> ID：11849212
> 
> 赞同：3
> 
> 时间：2012-08-07T15:29:16.683
> 
> 标签：c#, java, eclipse, visual-studio-2010, vim

我希望你在下面的技术问题上放过我。我知道这个问题之前在这里被问过，但我想要一个*最新的答案*，并且是针对我的特定背景和情况量身定制的。

我向周围的朋友询问了有关在 java 和 C# 中使用 vim 的问题，他们告诉我 vim 端口很烂，我应该放弃。我阅读了人们用于 Eclipse 和 Visual Studio 的插件，他们告诉我这些插件很糟糕而且不是 vim。他们是对的吗？

我今年夏天刚学了vim，我不想回去。我使用 Eclipse 和 Visual Studio，我想知道是否有真正好的工具可以让我以原生 vim 风格为 Eclipse/MS Visual Studio 编写代码，而不会失去这些调试器的优势。你知道，基本上允许我用 Java 和 C# 编写代码。

我在这里阅读了有关 Eclipse 的 VIM 插件的信息。但是，我听说这就像只有 hjkl 命令。没有像脚本这样的酷东西。所以基本上，为了强调一下，你们中的任何人都知道非常酷的 vim 工具/插件/我可以用于 Eclipse 和 Visual Studio 的任何东西，它们可以让我在 vim 中编码并获得两全其美的效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:36:27.703

我使用[ViEmu](http://www.viemu.com/) for Visual Studio 和 SQL Server Management Studio 已经 3 年多了，我强烈推荐它。

它不是 100% 的 Vim，但远远超出了“hjkl 命令”，具有所有命名的缓冲区、导航和对宏录制和播放等真正强大功能的支持。它像 Vim 一样使用配置文件 (viemurc) 来允许您自定义映射。

您可以将 ViEmu 命令映射到 Visual Studio 命令和宏，以组合和扩展功能。正如您所说，它确实是“两全其美”——Visual Studio 提供了太多，无法使用任何其他编辑器进行 C# 开发。

ViEmu 是一种商业产品——它确实要花钱——但对于我从使用它中获得的生产力和 Vimmy 的乐趣，我可以说这是一项了不起的投资。

# data-binding - WinRT ViewModel DataBind 到异步方法

> ID：11849213
> 
> 赞同：2
> 
> 时间：2012-08-07T15:29:19.377
> 
> 标签：data-binding, mvvm, asynchronous, viewmodel, windows-runtime

我正在反序列化 XML 文件中的对象列表，并希望通过 ViewModel 绑定到我的视图中这些对象的实际内容。问题是文件操作是这样的`async`，并且这一直冒泡到 ViewModel，其中属性 getter 不能被标记为这样......

## 问题

*   我将文件夹中的所有 XML 文件反序列化为`Profile`对象并将它们存储在`List<Profile>`. 此方法（必须）标记`async`。

    ```
     public static async Task<List<Profile>> GetAllProfiles()
        {
            DataContractSerializer ser = new DataContractSerializer(typeof(Profile));
            StorageFolder folder = await ApplicationData.Current.RoamingFolder.CreateFolderAsync("Profiles", CreationCollisionOption.OpenIfExists);

            List<Profile> profiles = new List<Profile>();
            foreach (var f in await folder.GetFilesAsync())
            {
                var fs = await f.OpenStreamForReadAsync();
                profiles.Add((Profile)ser.ReadObject(fs));
               fs.Dispose();
            }

            return profiles;
        } 
    ```

## 理想解决方案 1

*   然后，我的 ViewModel 中的绑定属性将*理想地*调用该静态方法，如下所示

    ```
    public async Task<ObservableCollection<string>> Lists
    {
        get 
        {
            return new ObservableCollection<string>(GetAllProfiles().Select(p => p.Name));
        }
    } 
    ```

*   但是属性不能被标记`async`

## 理想方案2

```
 public ObservableCollection<string> Lists
    {
        get 
        {
            return new ObservableCollection<string>((GetAllProfiles().Result).Select(p => p.Name));
        }
    } 
```

*   `await folder.GetFilesAsync()`但是这永远不会执行（由于某种原因它在调用中阻塞）

## 当前解决方案

调用`async`Initialize() 方法，将函数的结果加载到`GetProfiles()`变量中，然后进行`NotifyPropertyChanged("Lists")`调用：

```
 public ViewModel()
    {
        Initialize();
    }

    public async void Initialize()
    {
        _profiles = await Profile.GetAllProfiles();
        NotifyPropertyChanged("Lists");
    }

    private List<Profile> _profiles;
    public ObservableCollection<string> Lists
    {
        get
        {
            if (_profiles != null)
                return new ObservableCollection<string>(_profiles.Select(p => p.Name));
            else
                return null;
        }
    } 
```

## 问题

有没有更好的办法？有没有我还没有发现的模式/方法？

# *编辑*

问题的根源出现在做非 UI 代码时，你不能依赖 NotifyPropertyChanged 来做一些线程同步的事情。-- Initialize 方法必须等待，并且ctors 不能是异步的，所以本质上这是模式是无用的。

```
 public MyClass()
    {
        Initialize();
    }

    public async void Initialize()
    {
        _profiles = await Profile.GetAllProfiles();
    }

    private ObservableCollection<Profile> _profiles;
    public ObservableCollection<string> Lists
    {
        get
        {
            return _profiles; // this will always be null
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:53:28.280

属性不能是异步的，所以这个解决方案不会像你提到的那样工作。Task.Result 等待任务完成，但这会阻塞 I/O 操作的异步回调返回的 UI 线程，因此您将死锁您的应用程序，因为从不调用回调。您的解决方案确实是最好的方法。不过可以改进。

*   您应该将 _profiles 字段设置为 ObservableCollection，这样您就不需要在每次访问列表时都将列表转换为 OC。
*   由于您正在执行可能需要任意时间的 I/O 操作 - 您应该在它进行时启用某种进度指示器。
*   在某些情况下，您可能希望 Lists 属性更惰性，并且仅在第一次访问时调用 Init 方法。

# java - 将多个文件添加到 Jar 文件，Python

> ID：11849215
> 
> 赞同：1
> 
> 时间：2012-08-07T15:29:20.220
> 
> 标签：java, python, jar, zip

所以，我做了一个下载器，下载一个`.zip`文件。现在，我想将该文件的内容添加`.zip`到`.jar`文件中。

该`.zip`文件包含：文件夹、图片、类文件

这是我下载器的代码：

```
import urllib2
import os
import shutil
url = "https://dl.dropbox.com/u/29251693/CreeperCraft.zip"
file_name = url.split('/')[-1]
u = urllib2.urlopen(url)
f = open('c:\\users\\'+os.environ['USERNAME']+'\\CreeperCraft.zip', 'wb+')
meta = u.info()
file_size = int(meta.getheaders("Content-Length")[0])
print "Downloading: %s Bytes: %s" % (file_name, file_size)
file_size_dl = 0
block_sz = 8192
while True:
    buffer = u.read(block_sz)
    if not buffer:
        break
    file_size_dl += len(buffer)
    f.write(buffer)
    status = r"%10d  [%3.2f%%]" % (file_size_dl, file_size_dl * 100\. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,
f.close() 
```

你能告诉我要做什么，使`.zip`文件的内容，进入`.jar`？如果你是一个优秀的程序员，你能给我提供代码吗？我也想要一个像上面那样的进度条，而它的addinf它，但是那个，我从互联网上得到的，所以我不知道如何自己编码。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:35:18.147

.jar 文件基本上是具有不同结尾的标准 .zip 文件，因此您应该能够使用 zipfile 模块添加文件。
[http://docs.python.org/library/zipfile.html](http://docs.python.org/library/zipfile.html)

# c - 伪终端 (pty) 报告资源暂时不可用

> ID：11849219
> 
> 赞同：3
> 
> 时间：2012-08-07T15:29:43.047
> 
> 标签：c, linux, io, pty

我有一个 Pseudo-terminal slave，它给了我*Resource Temporarily Unavailable (11)*的读/写错误。我一直无法解决这个问题，但直到一周前我才知道任何 pty 的。所以，我可能会遗漏一些明显的东西。

根据我的阅读，这可能是由调用`read()`非阻塞 pty 引起的。但是，当我检查从属 pty`F_GETFL`之后`open()`，该值显示它是一个阻塞文件描述符。

的输出`F_GETFL`显示该`O_NONBLOCK`标志已禁用，并且该`O_RDWR`标志已启用：

```
printf("F_GETFL: %x\n", fcntl( slavefd, F_GETFL)); // outputs F_GETFL: 2 
```

我什至尝试通过使用来确定它何时准备好将`slavefd`其视为非阻塞文件。`select()`但是，它只是每次都超时。

那么，如果设置为阻塞，为什么`read()`将errno设置为*Resource Temporarily Unavailable ？*`slavefd`看起来的标志`F_GETFL`正确吗？我还能尝试什么来缩小这个问题的原因？

**更新：（**更多信息）

我还不确定，但我认为 pty 从设备节点被 pppd 以某种方式锁定。有人告诉我，您可以回显到 pty slave，这似乎是真的，除非 pppd 正在使用它。

**更新 2：（**添加代码）

```
if (argc!=2)
    return;

printf("opening %s\n", argv[1]);
slavefd = open(argv[1], O_RDWR );
if (slavefd < 0)
    return; 
```

此更新显示了我如何打开从设备。由于我正在使用此应用程序进行调试，因此我只是直接使用`argv[1]`.

**问题解决了：**

我试图读/写的从节点正在被 pppd 修改。当 pppd 控制 tty/pty 设备时，它将*线路规程*从更改`N_TTY`为`N_PPP`。这意味着当你`open()`再`read()`或`write()`到从节点时，PPP 中间驱动程序正在被使用而不是 TTY 驱动程序。因此，a`read()`和`write()`归结为完全不同的功能。查看`N_PPP`驱动程序，我发现了以下内容。这回答了我为什么要退回 EAGAIN 的问题。

```
/*
 * Read does nothing - no data is ever available this way.
 * Pppd reads and writes packets via /dev/ppp instead.
 */
static ssize_t
ppp_asynctty_read(struct tty_struct *tty, struct file *file,
          unsigned char __user *buf, size_t count)
{
    return -EAGAIN;
}

/*
 * Write on the tty does nothing, the packets all come in
 * from the ppp generic stuff.
 */
static ssize_t
        ppp_asynctty_write(struct tty_struct *tty, struct file *file,
           const unsigned char *buf, size_t count)
{
    return -EAGAIN;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:02:21.557

我试图读/写的从节点正在被 pppd 修改。当 pppd 控制 tty/pty 设备时，它将*线路规程*从更改`N_TTY`为`N_PPP`。这意味着当你`open()`再`read()`或`write()`到从节点时，PPP 中间驱动程序正在被使用而不是 TTY 驱动程序。因此，a`read()`和`write()`归结为完全不同的功能。查看`N_PPP`驱动程序，我发现了以下内容。这回答了我为什么要退回 EAGAIN 的问题。

```
/*
 * Read does nothing - no data is ever available this way.
 * Pppd reads and writes packets via /dev/ppp instead.
 */
static ssize_t
ppp_asynctty_read(struct tty_struct *tty, struct file *file,
          unsigned char __user *buf, size_t count)
{
    return -EAGAIN;
}

/*
 * Write on the tty does nothing, the packets all come in
 * from the ppp generic stuff.
 */
static ssize_t
        ppp_asynctty_write(struct tty_struct *tty, struct file *file,
           const unsigned char *buf, size_t count)
{
    return -EAGAIN;
} 
```

# drupal - 使用 Drupal 动态创建字段

> ID：11849220
> 
> 赞同：1
> 
> 时间：2012-08-07T15:29:47.493
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-rules

好的，假设我有一个基本的人口统计内容类型（客户端），我将其保存为节点。

我需要为我们偶尔需要使用的外部数据库创建一个密钥。

我希望 Drupal 获取客户端内容类型中收集的三个字段的片段，并将它们连接到单个字段中以保存在客户端内容类型中。理想情况下，这应该在我创建一个新的（客户端）节点时完成。

新字段应包含以下名字的前 3 个字母姓氏的前 3 个字母和社会安全号码的最后 4 位数字。

> **例如**
> 名字：John
> 姓氏：Doe
> SSN：123-45-6789
> 
> 应该创建一个新字段，我们称之为 fk_database。使用上面的示例字段 >created 将是 -> johdoe6789

这可以通过规则模块完成，还是我应该以不同的方式处理？如果我需要通过 PHP 脚本执行此操作，那么应该在 Drupal 结构中的哪个位置添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:41:31.627

最简单的方法可能是使用[Computed Field](http://drupal.org/project/computed_field/)模块，它几乎是为您想要做的事情而构建的：

> Computed Field 是一个非常强大的 CCK 字段模块，可让您将自定义“计算字段”添加到您的内容类型。这些计算字段由您通过 PHP 代码定义的值填充。您可以利用 Drupal 可用的任何内容，包括其他字段、当前用户、数据库表，等等。

如果您确实需要在代码中执行此操作，请查看[`hook_entity_presave()`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_entity_presave/7)哪个可能是运行代码的最佳位置。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-07T15:40:58.450

如果您想即时构建自定义字段，我个人会构建一个自定义模块来处理此问题并使用节点 API 来处理自定义字段？

模块可以在“根”的模块目录中创建，也可以在站点 > 所有 > 模块中创建

您必须在站点构建>模块下的后端打开它才能启用它

您将能够连接到 API 并通过案例语句处理请求，例如

```
function hook_node_load($node, $types) {
    //do something on node load
}

function hook_node_update($node) {
    //do something on node update
}

function hook_node_insert($node) {
    //do something on node insert
} 
```

# sql - JPQL 等效于 numtodsinterval

> ID：11849227
> 
> 赞同：1
> 
> 时间：2012-08-07T15:30:12.607
> 
> 标签：sql, oracle, plsql, jpql, date-arithmetic

我有一个 SQL 查询：

```
SELECT * 
FROM G1, G2, G3 
WHERE G1.G2_ID=G2.ID AND G1.G3_ID=G3.ID 
AND  (G3.CreationTime- G2.CreationTime) > NUMTODSINTERVAL( 300, 'day' ); 
```

我需要这个查询的 JPQL 形式。实际上我被困在 NUMTODSINTERVAL 部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:54:09.900

您可以通过这种方式重新制定您的查询，例如（使用[Joda-Time](http://joda.sourceforge.net/)）：

```
Duration dur = Duration.standardDays(300);
DateTime dt = new DateTime(G2.KAYIT_OLUSTURMA);//Assuming G2.KAYIT_OLUSTURMA is of java.util.Date type
DateTime calc = dt.plus(dur);

SELECT * 
FROM GEBELIKTAKIP G1, GEBEBILDIRIM G2, GEBELIKSONUCU G3 
WHERE G1.GEBELIKBILDIRIM_ID=G2.ID AND G1.GEBELIKSONUC_ID=G3.ID 
AND  G3.KAYIT_OLUSTURMA > :calc 
```

# javascript - 使用 Prototype 更新表格内容时出错

> ID：11849228
> 
> 赞同：0
> 
> 时间：2012-08-07T15:30:17.710
> 
> 标签：javascript, html-table, prototypejs, innerhtml

我想在原型中做这样的事情：

```
onSuccess: function(transport) {
    template = transport.responseText.evalJSON();
    form = event.up('form');
    form.select('.audio_channels').update(template.channelHtml);
} 
```

表单标签是一个表格，我想替换它的内容。`channelHtml`是一串 HTML`<tr>`标签。

我越来越：

> `TypeError`: 对象`[object HTMLTableElement]`没有“更新”方法

所以我认为它不是一个扩展对象并尝试过`Element.extend(form.select('audio_channels'))`，它返回一个空对象。然后我尝试`form.select('.audio_channels').innerHTML(template.channelHtml)`，我得到了`TypeError: Object [object HTMLTableElement] has no method 'innerHTML'`。然后我尝试使用 tbody 元素，我得到了`[object HTMLTableSectionElement] has no method 'innerHtml'`

在我看来，这应该可行。`form.select('audio_channels')`正在返回正确的 DOM 元素。我需要怎么做才能根据我的 ajax 调用设置表格的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:15:00.510

将最后一行替换为

```
form.select('.audio_channels').each(function(node){
  node.update(template.channelHtml);
}); 
```

这将在实际元素上执行代码，而不是像原始代码那样执行单项数组。

# c# - 图片上传和 image.ContentLenght > 0

> ID：11849231
> 
> 赞同：1
> 
> 时间：2012-08-07T15:30:33.173
> 
> 标签：c#, asp.net-mvc-3

我有对象街，里面有一些照片。我正在尝试以与创建新街道对象相同的形式实现上传。所以想象一个带有字段的 mvc web 表单

*   街道名称
*   街道号码
*   照片1
*   照片2
*   照片3

现在，在 create.cshtml 页面上，我有表单`StreetName`和`StreetNumber`字段和

```
<input type="file" name="postedImages" />
<input type="file" name="postedImages" />
<input type="file" name="postedImages" /> 
```

提交此表单后，我会将这些数据发送到 StreetController 以进行进一步处理

```
 [HttpPost]
 public ActionResult Create(StreetViewModel newData, IEnumerable<HttpPostedFileBase> postedImages)
 {
    //create object and save stretname and streetnumber
    //process posted images
    foreach(var image in postedImages)
    {
        //this is where error occured if I post only one or two images from my view
       if(image.ContentLength >0)
       {
          //process and save images
       }
    }

 } 
```

如果我发布在网络表单上提供的确切数量的图像，您可以在我的评论行中阅读，一切都很好，但是如果我发送 1 或 2 个图像，则会发生错误。

如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:37:07.483

你可以这样做：

```
If(image != null)
    if(image.ContentLength > 0)
        {
           //code
        } 
```

在获取属性之前检查它是否为空，这就是错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:35:44.700

`foreach(var image in postedImages.Where(pi => pi != null))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:33:42.510

`null`在访问属性之前`ContentLength`添加检查

```
if((image!=null) && (image.ContentLength >0))
{
      //process and save images
} 
```

# php - PHP-HTML 嵌入代码

> ID：11849233
> 
> 赞同：0
> 
> 时间：2012-08-07T15:30:43.993
> 
> 标签：php, html, forms, drop-down-menu, download

我正在设计带有下拉列表和按钮的简单 HTML。

我想知道如何将选定的下拉项检索到 php 变量中。我正在编写 php-html 嵌入代码。我对如何获取 php 变量中的特定值感到困惑。另外，我想知道在选择该特定项目后如何下载文件。我已经创建了下载文件，但我不知道如何从选定的下拉项中调用这些文件。

任何帮助将不胜感激。谢谢你。

我正在粘贴一些我正在尝试的 php-html 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Get All Reports</title>
</head>
<body>
<center>
<div>
<form action="">
<table>
<tr><td>
<select onchange="ReportList(this.form,0)">
<option value="SubscriptionReport.php" >Subscription Report
<option value="DownloadHistoryReport.php">DownloadHistory Report
<option value="AppEventReport.php">AppEvent Report

</select>

</td></tr>
<tr><td>
<button name="isSubmit">Download</button>
</td></tr>
</table>
</form>
</div>
</center>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:40:10.130

该输入的值将通过您在表单中使用的任何方法传递。它被发送到的页面将通过`$_GET`或访问表单输入值`$_POST`，无论使用哪种方法。

```
<form method="post" action="process.php">
    <input type="text" value="3" name="myInput" id="myInputId" />
</form> 
```

*将在process.php*中被访问，如下所示：

```
<?php
    $inputValue = $_POST['myInput']; 
```

请注意，输入是通过其`name`而不是其`id`属性传递的。

对于 GET 表单提交：

```
<form method="get" action="process.php">
    <input type="text" value="3" name="myInput" id="myInputId" />
</form> 
```

*将在process.php*中被访问，如下所示：

```
<?php
    $inputValue = $_GET['myInput']; 
```

请注意，当您通过 GET 提交表单时，它会将键/值对附加到查询字符串：

```
http://www.example.com/process.php?myInput=3 
```

如果您想将表单提交到它所在的同一页面，只需将该`action`属性留空即可。

```
<form method="post" action="">
    <input type="text" value="3" name="myInput" id="myInputId" />
</form> 
```

**注意：** PHP 只能*在提交表单变量后*才能访问它们。如果要检索表单元素的值，则必须使用 javascript 事件处理程序。PHP 是服务器端的，在服务器接收到用户输入之前无法对用户输入做出反应。Javascript是客户端。它“看到”用户在浏览器中所做的事情并可以处理这些事件。

# arrays - 如何基于数组构建游标

> ID：11849240
> 
> 赞同：0
> 
> 时间：2012-08-07T15:31:02.067
> 
> 标签：arrays, oracle, cursor

我需要优化当前类似的 PL/SQL 函数：

```
CREATE OR REPLACE FUNCTION tkt_get_underlying(n_input number)
RETURN t_table_of_number
IS
    ret t_table_of_number;
    CURSOR c IS SELECT n_number FROM t_table WHERE n_prop_1=n_input OR n_prop_2=n_input OR n_prop_3=n_input;
BEGIN
    ret :=  t_table_of_number();

    OPEN c;
        FETCH c BULK COLLECT INTO ret;
    CLOSE c;

    RETURN ret;
END; 
```

我希望能够提供一个数组作为参数，但是，我不知道如何构建我的光标以带入数组。我想我可以使用该`IN`声明，但是请您帮我解决这个问题吗？

编辑：

根据[Justin Cave](https://stackoverflow.com/users/10397/justin-cave)提供的解决方案，它将变为：

```
CREATE OR REPLACE FUNCTION tkt_get_underlying(n_inputs t_table_of_number)
RETURN t_table_of_number
IS
    ret t_table_of_number;
    CURSOR c IS SELECT n_number FROM t_table WHERE n_prop_1 IN (SELECT column_value FROM TABLE(n_inputs))
                                             OR n_prop_2 IN (SELECT column_value FROM TABLE(n_inputs))
                                             OR n_prop_3 IN (SELECT column_value FROM TABLE(n_inputs));
BEGIN
    ret :=  t_table_of_number();

    OPEN c;
        FETCH c BULK COLLECT INTO ret;
    CLOSE c;

    RETURN ret;
END; 
```

但是，倍数会`SELECT column_value FROM TABLE(n_inputs)`减慢整个功能。我该如何改进呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:48:00.130

如果你想传入一个`n_input`值的集合并返回相同的`t_table_of_number`集合（即你不需要知道输出数组的哪个元素与输入数组的哪个元素相关联）

```
CREATE OR REPLACE FUNCTION tkt_get_underlying(p_inputs t_table_of_number)
RETURN t_table_of_number
IS
    ret t_table_of_number;
    CURSOR c 
        IS SELECT n_number 
             FROM t_table 
            WHERE n_prop IN (SELECT column_value 
                               FROM TABLE( p_inputs ) );
BEGIN
    OPEN c;
        FETCH c BULK COLLECT INTO ret;
    CLOSE c;

    RETURN ret;
END; 
```

这假设可能插入到`ret`集合中的元素数量仍然可以同时保存在 PGA 内存中。根据具体情况，您可能希望将其转换为流水线表函数，以限制所需的 PGA 内存量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:49:04.893

Oracle 在使用嵌套表时弄错了基数，因为它不知道实际存在多少行。尝试使您的功能看起来像：

```
CREATE OR REPLACE FUNCTION tkt_get_underlying(n_inputs t_table_of_number)
RETURN t_table_of_number
IS
    ret t_table_of_number;
    CURSOR c IS SELECT n_number FROM t_table WHERE n_prop_1 IN (SELECT /*+ cardinality(ni 1) */ column_value FROM TABLE(n_inputs) ni)
                                             OR n_prop_2 IN (SELECT /*+ cardinality(ni 1) */ column_value FROM TABLE(n_inputs) ni)
                                             OR n_prop_3 IN (SELECT /*+ cardinality(ni 1) */ column_value FROM TABLE(n_inputs) ni);
BEGIN
    ret :=  t_table_of_number();

    OPEN c;
        FETCH c BULK COLLECT INTO ret;
    CLOSE c;

    RETURN ret;
END; 
```

请注意，如果您知道嵌套表中有多少行，请使您的基数提示准确。此外，如果您在嵌套表中放置了太多行，Oracle 可能会表现不佳，因为您让它认为嵌套表中的行数比它实际拥有的行数少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:35:57.137

感谢您的所有帮助，我终于找到了适合我需要的优化。现在查询是这样的：

```
CREATE OR REPLACE FUNCTION tkt_get_underlying(n_inputs t_table_of_number) 
RETURN t_table_of_number 
IS
  ret t_table_of_number;
  CURSOR c IS SELECT t.n_number FROM t_table t, (SELECT column_value /*+cardinality(t_inputs 100) */ c FROM TABLE(n_inputs)) t_inputs
                WHERE t_inputs.c = t.n_prop_1
                OR t_inputs.c = t.n_prop_2
                OR t_inputs.c = t.n_prop_3; 
BEGIN
  ret :=  t_table_of_number();
  OPEN c;
    FETCH c BULK COLLECT INTO ret;
  CLOSE c;
  RETURN ret;
END; 
```

它的 JOIN 比 IN 更好

# c++ - 带有 Doxygen 的模板类中的 typedef (C++)

> ID：11849241
> 
> 赞同：9
> 
> 时间：2012-08-07T15:31:02.983
> 
> 标签：c++, doxygen

我的问题与如何使用 Doxygen 在模板类中注释 typedef 有关。我将举一个例子来说明我的问题：

```
 namespace fundamental
  {
    /**
    * Basic function
    */
    template <typename T>
    class Base
    {
    public:
      T x; ///< x coordinate
      T y; ///< y coordinate
    };
    typedef Base<float> Coordinate; ///< Point coordinate class
  } 
```

使用 Doxygen 处理上述代码后，我可以得到一个 HTML 页面来显示类 Base 的定义。但是，对于 typedef 类 Coordinate，它不会与 Base 出现在同一页面中。事实上，所有 typedef 类型以及该命名空间中的所有类都列在基本命名空间页面中。我想知道是否可以在 Base HTML 页面中显示坐标类。这样一来，Base 和 Coordinate 之间的联系就会更加紧密。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:49:39.777

typedef 是命名空间的一部分，因此您必须记录**命名空间**以使其出现，即​​：

```
/// documentation for the namespace
namespace fundamental
{
   ...
   typedef Base<float> Coordinate; ///< Point coordinate class
} 
```

或者，您可以使用`@relates`，但这会将成员置于基类的*相关函数下：*

```
/// @relates Base
/// Point coordinate class
typedef Base<float> Coordinate; 
```

您可以将此标题更改为例如*相关成员*，方法是使用创建布局文件`doxygen -l`，然后编辑`related`生成的元素的两次出现，`DoxygenLayout.xml`如下所示：

```
<related title="Related Members"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:43:01.327

[在手册中](http://www.doxygen.nl/manual/docblocks.html)，我阅读了以下内容：

让我们重复一遍，因为它经常被忽略：要记录全局对象（函数、typedef、枚举、宏等），您必须记录定义它们的文件。换句话说，至少必须有一个

`/*! \file */`或 `/** @file */`此文件中的一行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:46:51.123

有 See Also ( [@sa](http://www.doxygen.nl/manual/commands.html#cmdsa) ) 命令，可用于生成对其他实体的交叉引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T15:47:30.620

您也可以使用该[`/sa`命令](http://www.doxygen.nl/manual/commands.html#cmdsa)`Base`在's 页面中手动放置参考。

```
namespace fundamental
{
  /**
  * Basic function
  * /sa Coordinate
  */
  template <typename T>
  class Base
  {
  public:
    T x; ///< x coordinate
    T y; ///< y coordinate
  };
  typedef Base<float> Coordinate; ///< Point coordinate class
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:22:25.980

这个问题还有另外两种解决方案。您可以使用 @defgroup 关键字定义组，并将类和 typedef 类型分组到一个模块中。另一个解决方案是使用[@relates](http://www.doxygen.nl/manual/commands.html#cmdrelates)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T15:50:59.537

其他答案将起作用，但如果您与您希望它们出现在同一个 Doxygen 页面中`typedef`的类紧密相关`Base`，您可能需要考虑定义一个新的`namespace`（在 内`Fundamental`），它将只包含`Base`并且您的`typedef.`Then, doxygen 将生成一个页面，`namespace`其中将包括`Base`您的`typedef.`

定义`file`文档也会做同样的事情，但这可能是您的代码更合乎逻辑的布局。

# emacs - 如何撤消已在 emacs 中键入的快捷方式？

> ID：11849242
> 
> 赞同：0
> 
> 时间：2012-08-07T15:31:11.700
> 
> 标签：emacs, keyboard-shortcuts, text-editor, undo, emacs23

假设您在 emacs 中输入了一个快捷键（比如`M-x`），然后您意识到您不想这样做。如何撤消已键入的快捷方式？

我已经尝试过`Esc-d`，但这似乎并没有达到我想要的效果。在输入错误后键入`C-g`表示未定义快捷方式。

我想要的是一种立即摆脱所有键入的快捷方式并立即执行新快捷方式的方法。

我希望我的问题看起来很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:49:33.467

`C-g`无论上下文是什么，取消都在 emacs 中。

# jquery - 使用流沙 jquery 进行奇怪的跳跃

> ID：11849248
> 
> 赞同：0
> 
> 时间：2012-08-07T15:31:30.663
> 
> 标签：jquery, quicksand

我正在使用流沙 jquery 脚本。我希望始终显示一个 div（演示中具有灰色背景的那个）。它设置为浮动在 div#wrapper 的右侧。

如果您在过滤器菜单中单击“盲文事件”然后单击“全部”，您会看到动画末尾有一个小跳跃。

[http://braillon.net/alain2/](http://braillon.net/alain2/)

你能看到任何解决方法吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:12:32.587

我遇到了类似的问题并尝试了所有方法，结果发现我运行的是一个稍微旧版本的插件——所以一定要检查你是否是最新的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:53:59.320

某些数据 ID 不是唯一的。总是检查他们:)

# javascript - Javascript AJAX 调用到 Jquery 调用

> ID：11849251
> 
> 赞同：0
> 
> 时间：2012-08-07T15:31:42.390
> 
> 标签：javascript, jquery

为了让我的代码几乎完全用 Jquery 编写，我想在 Jquery 中重写一个 AJAX 调用。

这是从网页到 Tomcat servlet 的调用。

我目前情况的类似代码：

```
var http = new XMLhttpRequest();
var url = "http://example.com/MessageController?action=send";

http.onreadystatechange = function ()
if (http.readyState == 4)
{
    if (http.status == 200){ var response = http.responseText;}
    else {/*code2*/}
};
http.async = false;
http.open("POST", url, true);
http.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
http.send(string); 
```

哪种方法是最好的方法？`.ajax`还是`.post`？你能帮我用一些伪代码来启动它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:33:13.440

使用[`.ajax`](http://api.jquery.com/jQuery.ajax/)或（当您使用 POST 时）[`.post`](http://api.jquery.com/jQuery.post/)：

```
$.ajax({
  url: "http://example.com/MessageController",
  type: "POST",
  data: { action: "send", yourStringName: "something" },
  async: false, // make sure you really need it
  contentType:'application/x-www-form-urlencoded'
}).done(function(response) { 
  console.log(response);
}); 
```

使用哪一个并不重要，因为`.post`它是`.ajax`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:38:34.833

您可以使用 jQuery [post](http://api.jquery.com/jQuery.post/)。

```
var url="MessageController"
$.post(url, { action : "send"} ,function(data){
  //response from MessageController is in data variable
  //code 1
  alert(data)
}).error(function(){
      alert("error");  //code 2
   }) 
```

假设`MessageController`您的域中有一些 url，并且您知道[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)

# excel - SAP RFC 调用在 vb 的 RETURN 参数中返回“错误 0”

> ID：11849252
> 
> 赞同：1
> 
> 时间：2012-08-07T15:31:59.133
> 
> 标签：excel, sap, bapi, vba

大家好，提前感谢。

我正在尝试使用来自 vb 的 RFC 调用 SAP BAPI，但在获取调用结果时遇到了一些问题。BAPI“BAPI_GL_ACC_EXISTENCECHECK”（来自总帐帐户模块）有两个参数，COMPANYCODE 和 GLACCT，以及一个 RETURN 参数。我编写了这段代码来进行调用，并且建立 SAP 连接没有问题（我使用 SAP Logon Control OLE/COM 对象来完成这项工作），并且我尝试进行 RFC 调用。
同样在这种情况下，我可以毫无问题地进行调用（似乎，不确定......），因为 RFC 调用返回 true 并且没有异常。
但是，通过**objReturn**对象/参数查看，它有一个值“错误 0”。

尝试用谷歌和SAP论坛搜索，但我还没有找到真正解决我的问题的方法，所以在这里我想问大家是否有解决这个问题的想法（也许我只是打错了电话！！ ！我是SAP集成的新手......）。

顺便说一句，最后说明：在 SAP 方面进行了很多 RFC_NO_AUTHORIZATION 之后，他们给了我一个 SAP_ALL / S_RFC 授权（有点，不是 SAP 专家）并且错误 RFC_NO_AUTHORIZATION 消失了，但没有返回错误 0

```
Dim sapConn As Object

Dim objRfcFunc As Object

Dim SAPMandante As String
Dim SAPUtente As String
Dim SAPPassword As String
Dim SAPLingua As String
Dim SAPApplicationServer As String
Dim SAPNumeroSistema As Variant
Dim SAPIDSistema As String
Dim SAPRouter As String
Dim FlagInsertLogin As Integer
Dim FlagLogin As Variant

On Error GoTo ErrorHandler

Set sapConn = CreateObject("SAP.Functions") 'Create ActiveX object

'Silent Logon
SAPMandante = "xxx"
SAPUtente = "yyyy"
SAPPassword = "zzzzzz"
SAPLingua = "IT"
SAPApplicationServer = "www.xxx.com"
SAPNumeroSistema = x
SAPIDSistema = "zzz"
SAPRouter = ""

FlagLogin = SilentLogin(sapConn, SAPMandante, SAPUtente, SAPPassword, SAPLingua, SAPApplicationServer, SAPNumeroSistema, SAPIDSistema, SAPRouter) 'IT WORKS, NO PROBLEM HERE

If FlagLogin = False Then
    'Explicit Logon
    If sapConn.Connection.logon(0, False) <> True Then 
        MsgBox "Cannot Log on to SAP", 16, "Query Interrupted"
        sapConn.Connection.logoff
        Set sapConn = Nothing
        InsertCash = False
        Exit Sub
    End If
End If

'BAPI RFC Call
Set objRfcFunc = sapConn.Add("BAPI_GL_ACC_EXISTENCECHECK")

objRfcFunc.exports("COMPANYCODE") = "C100"

objRfcFunc.exports("GLACCT") = "0000000001" 'Inexistent

Rem *** BAPI CALL ***
If objRfcFunc.Call = False Then
    ErrorMsg = objRfcFunc.Exception 'Message collection
    MsgBox ErrorMsg, 16, "Errore"
    sapConn.Connection.logoff
    Exit Sub
else
    Dim objReturn As Object
    Set objReturn = objRfcFunc.imports("RETURN")
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:39:10.117

问题已解决，请看这个帖子...

[http://sap.ittoolbox.com/groups/technical-functional/sap-dev/sap-rfc-call-returns-error-in-return-parameter-from-vb-before-the-rfc-call-4894968# M4902486](http://sap.ittoolbox.com/groups/technical-functional/sap-dev/sap-rfc-call-returns-error-in-return-parameter-from-vb-before-the-rfc-call-4894968#M4902486)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:15:26.540

你需要把

```
Dim objReturn As Object
Set objReturn = objRfcFunc.imports("RETURN") 
```

前`objRfcFunc.Call`

即，您必须在调用之前说明您从函数中导入的内容。我通常把它放在`.exports()`线条旁边。

# java - Akka 和 spring 配置

> ID：11849254
> 
> 赞同：2
> 
> 时间：2012-08-07T15:32:07.350
> 
> 标签：java, spring, akka

我正在尝试将 akka 与 spring 结合起来（没有成功）。基本上，我的应用程序似乎不会以某种方式阅读 akka 模式

带有架构的 service-context.xml 的一部分：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:akka="http://akka.io/schema/akka"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
       http://akka.io/schema/akka http://repo.akka.io/akka-1.3.1.xsd"> 
```

接下来是一些beans和akka actor定义：

```
<akka:untyped-actor id="pushManager" autostart="false" implementation="com.myspace.messaging.PushManager"> </akka:untyped-actor> 
```

在运行服务器时，我收到消息：

```
org.xml.sax.SAXParseException; lineNumber: 55; columnNumber: 143; schema_reference.4: Failed to read schema document 'http://repo.akka.io/akka-1.3.1.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

例外：

```
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 55 in XML document from class path resource [service-context.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 55; columnNumber: 143; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'akka:untyped-actor'. 
```

Schema 位于 url 下：[http](http://repo.akka.io/akka-1.3.1.xsd) ://repo.akka.io/akka-1.3.1.xsd - 我可以在网络浏览器中轻松打开它。

任何线索都可能有所帮助，谢谢马雷克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:15:21.320

我已经成功地在我的 spring beans XML 中使用了以下 schemaLocation 属性：

[http://akka.io/schema/akka](http://akka.io/schema/akka) http://akka.io/akka-1.3.1.xsd

如果您在浏览器中注意到会导致下载提示而不是呈现结果，那么它可能与 Spring 正在寻找的内容更兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T02:22:45.250

如果你移动到新版本的 Akka 2.2，Spring 集成包已经被移除（你真的不需要它）。您应该实现 UntypedActorFactory、Creator 函数或 IndirectActorProducer。

有关更多信息，请参阅此博客文章；[http://blog.nemccarthy.me/?p=272](http://blog.nemccarthy.me/?p=272)

# php - 坚持简单的 php 方程式

> ID：11849258
> 
> 赞同：1
> 
> 时间：2012-08-07T15:32:10.897
> 
> 标签：php

我有一个从 XML 抓取到`foreach`. 他们将时间格式化为 1.8 小时而不是 1 小时 48 分钟。

下面代码中的所有内容都可以正常工作，除了最后一个`elseif`. 应该是抓取超过6分钟但不到60分钟的游戏，进行转换，最后加上“分钟”。

现在，它只为所有这些游戏显示“0 分钟”。

```
$hoursplayed = $game->hoursOnRecord;
        if ($hoursplayed < .1) {
        $zeros = $zeros + 1;
        $hoursplayed = 0;}          
        elseif ($hoursplayed >= 1){
        $nonzeros = $nonzeros + 1; 
        }
        elseif ($hoursplayed >= .1 && $hoursplayed < 1) {
        $hoursplayed = ($hoursplayed * 60) . " minutes";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:39:06.873

对不起，但它运行良好！
[工作演示在这里](http://codepad.viper-7.com/9chUCa)。

试试这个：

```
$hoursplayed = (float) $game->hoursOnRecord; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:44:56.730

你的代码很乱；我就是这样写的：

```
<?php
$hours_float = $game -> hoursOnRecord;
$hours = floor($hours_float);
$minutes = round(($hours_float - $hours) * 60);
if (($hours > 0 || $minutes > 6) && $hours < 1)
    {
    echo $hours . ' hour' . ($hours === 1 ? '' : 's') . ' ' . $minutes . ' minute' . ($minutes === 1 ? '' : 's');
    } 
```

# python - 在Python中将矩阵乘以列表

> ID：11849259
> 
> 赞同：0
> 
> 时间：2012-08-07T15:32:11.387
> 
> 标签：python, multiplication

我正在寻找一种在 Python 中实现以下目标的方法，但不知道如何做到这一点：

```
a=[[0,1],[1,0],[1,1]]
b=[1,0,5]

c=hocuspocus(a,b)

--> c=[[0,1],[0,0],[5,5]] 
```

所以基本上我想将 a 中的不同矩阵行**与**列表**b**相乘。

提前非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T15:37:47.277

```
hocuspocus = lambda a,b: [[r*q for r in p] for p, q in zip(a,b)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:39:13.127

使用[Numpy](http://numpy.scipy.org/)，它具有交叉乘法功能，以及其他有用的矩阵工具。

```
import * from numpy as np

a=[[0,1],[1,0],[1,1]]
b=[1,0,5]

prod = a * b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:40:56.157

Python 列表不直接支持该行为，但[Numpy](http://numpy.scipy.org/)数组直接进行矩阵乘法（以及您可能想要的各种其他矩阵运算）：

```
>>> a
array([[0, 1, 1],
       [1, 0, 1]])
>>> b
array([1, 0, 5])
>>> a * b
array([[0, 0, 5],
       [1, 0, 5]]) 
```

# r - 对 data.frame 中每一行的特定列执行 t 检验

> ID：11849270
> 
> 赞同：0
> 
> 时间：2012-08-07T15:32:57.137
> 
> 标签：r, dataframe

我有一个特征数据集，每行一个特征。我想执行一个 t.test 比较数据集中两个特定列的平均值，即 T_Mean 和 A_Mean 或第 2 列和第 8 列。我尝试使用 sapply 对此进行编码，但没有运气，示例数据集和代码如下。非常感谢修复我的代码的任何帮助！

```
WW_Summary <- structure(list(Trait =
  c("Morph PC1", "Morph PC2", "Morph PC3", "Morph PC4", "Colour", "Delta15N", "Delta13C"),
  T_Mean = c(-0.000369133942377988, -0.478614374395391, -0.0429785751248986, 0.141563333908087, 5.09447415329768, 7.79253141831239, -20.3678994614004),
  T_SD = c(1.25617540601557, 0.994922039584068, 0.72787412346719, 0.5683273217636, 1.85452769780342, 1.56401940841295, 2.33461396773921),
  T_N = c(615, 615, 615, 615, 561, 557, 557),
  HZ_Mean = c(0.379669406453242, 0.307293731157124, -0.0499328976749929, -0.0563021988086238, 4.74712643678161, 8.4568926056338, -20.8209771126761),
  HZ_SD = c(1.27837645625113, 1.11890593333031, 0.71490087377916, 0.699316698091669, 1.90101932622734, 1.86547215761457, 1.9590774632374),
  HZ_N = c(1137, 1137, 1137, 1137, 1131, 1136, 1136),
  A_Mean = c(-0.818704170327851, -0.104449965981942, 0.157885253051751, -0.0437302662392194, 4.31320754716981, 9.79891783567134, -19.955250501002),
  A_SD = c(1.29535566832773, 0.97478498249366, 0.678515276691309, 0.563663991917263, 1.63029422418466, 2.06376134152221, 1.47077203157055),
  A_N = c(527, 527, 527, 527, 530, 499, 499)),
  .Names = c("Trait", "T_Mean", "T_SD", "T_N", "HZ_Mean", "HZ_SD", "HZ_N", "A_Mean", "A_SD", "A_N"),
  class = "data.frame", row.names = c(NA, -7L))

## Perform t-test separately for each trait (row) comparing means for T_Mean & A_Mean (columns 2 and 8)
WW_Summary_T <- data.frame(t(sapply(WW_Summary[,c(2,8)], function(temp)
                unlist(t.test(temp, alternative = c("two.sided"))[c("statistic",
                "parameter", "p.value", "conf.int")])))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:44:16.293

我*认为*你只是使用了错误的`apply`家庭成员。

你可以试试这个，看看它是否能给你你想要的东西？

```
apply(WW_Summary[, c(2, 8)], 1, 
      function(temp) unlist(t.test(temp, aslternative = c("two.sided"))
      [c("statistic", "parameter", "p.value", "conf.int")])) 
```

# 更新

@dickoa 是正确的：您可能在这里进行了错误的计算。尽管如此，同样的*概念*也适用：

```
data.frame(cbind(WW_Summary[1], 
         t(apply(WW_Summary[, c(2:4, 8:10)], 1, function(temp)
           unlist(
             tsum.test(mean.x = temp[[1]], s.x = temp[[2]], n.x = temp[[3]],
                       mean.y = temp[[4]], s.y = temp[[5]], n.y = temp[[6]]))
                 [c("statistic.t", "parameters.df", "p.value", 
                    "conf.int1", "conf.int2")]))))
#       Trait       statistic.t    parameters.df              p.value
# 1 Morph PC1  10.7920944667109 1102.17477516966 6.99739270551733e-26
# 2 Morph PC2 -6.40501752763609  1119.8038108643 2.20872274986877e-10
# 3 Morph PC3  -4.8221965806503 1131.93025335657 1.61345381252079e-06
# 4 Morph PC4  5.51685228304417 1116.04949237415 4.28798959831121e-08
# 5    Colour  7.40032254940697 1083.43427031755 2.71950155801888e-13
# 6  Delta15N -17.6468194524627 923.361537684413 2.79180235004071e-60
# 7  Delta13C -3.47262865160519 949.662208494884 0.000538633884372937
#            conf.int1          conf.int2
# 1  0.669552939095012  0.967117133675934
# 2  -0.48878427646537 -0.259544540361528
# 3   -0.2825915783163 -0.119136078036999
# 4  0.119393147514491  0.251194052780122
# 5  0.574117940682135  0.988415271573606
# 6  -2.22952047960588  -1.78325235511202
# 7 -0.645846712936065 -0.179451207860735 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T16:07:14.827

由于您的数据已经按行聚合（只有 7 个 obs），因此您不能使用`t.test`基础 R 中的函数。

在这种特殊情况下，您可以使用`BSDA`包和函数`tsum.test`

```
require(BSDA) ## install.package("BSDA")

ddply(WW_Summary, .(Trait), summarise,
                 stat = tsum.test(mean.x = T_Mean, s.x = T_SD, n.x = T_N, mean.y = A_Mean, s.y = A_SD, n.y = A_N)$statistic, 
                 pval = tsum.test(mean.x = T_Mean, s.x = T_SD, n.x = T_N, mean.y = A_Mean, s.y = A_SD, n.y = A_N)$p.value,
                 parameter = tsum.test(mean.x = T_Mean, s.x = T_SD, n.x = T_N, mean.y = A_Mean, s.y = A_SD, n.y = A_N)$parameters,
                 confint_lower = tsum.test(mean.x = T_Mean, s.x = T_SD, n.x = T_N, mean.y = A_Mean, s.y = A_SD, n.y = A_N)$conf.int[1],
                 confint_upper = tsum.test(mean.x = T_Mean, s.x = T_SD, n.x = T_N, mean.y = A_Mean, s.y = A_SD, n.y = A_N)$conf.int[2])

##       Trait     stat       pval parameter confint_lower
## 1    Colour   7.4003 2.7195e-13   1083.43       0.57412
## 2  Delta13C  -3.4726 5.3863e-04    949.66      -0.64585
## 3  Delta15N -17.6468 2.7918e-60    923.36      -2.22952
## 4 Morph PC1  10.7921 6.9974e-26   1102.17       0.66955
## 5 Morph PC2  -6.4050 2.2087e-10   1119.80      -0.48878
## 6 Morph PC3  -4.8222 1.6135e-06   1131.93      -0.28259
## 7 Morph PC4   5.5169 4.2880e-08   1116.05       0.11939
##   confint_upper
## 1       0.98842
## 2      -0.17945
## 3      -1.78325
## 4       0.96712
## 5      -0.25954
## 6      -0.11914
## 7       0.25119 
```

我们还可以绘制误差线来检查平均值之间可能的重叠。

```
WW_Summary <- ddply(WW_Summary, .(Trait), transform, T_STDERR = T_SD/sqrt(T_N),
                                       A_STDERR = A_SD/sqrt(A_N),
                                       HZ_STDERR = HZ_SD/sqrt(HZ_N))

ggplot(WW_Summary, aes(Trait)) + geom_errorbar(aes(y = T_Mean, ymax = T_Mean + T_STDERR, ymin = T_Mean - T_STDERR, colour = "black")) + geom_errorbar(aes(y = A_Mean, ymax = A_Mean + A_STDERR, ymin = A_Mean - A_STDERR, colour = "red")) + labs(y = "Mean") + scale_colour_manual(values = c("black", "red"), label = c("T", "A"), name = "") 
```

![误差线](../Images/3608816e96edc38e00bdfba0b9ac3c61.png)

# tomcat - 使用 Jython 提取在 JMX 中针对域注册的 MBean 列表

> ID：11849271
> 
> 赞同：0
> 
> 时间：2012-08-07T15:33:00.297
> 
> 标签：tomcat, jboss, jmx, monitor, mbeans

如果我知道 MBean 的名称，我可以获取属性信息，但是我尝试监控的应用程序会生成随机命名的 MBean，因此需要能够查询 JMX 以获取在域中注册的 MBean 列表。

这是 JConsole 中的视图示例，以及我试图动态获取的内容。

![JConsole 截图](../Images/0dc0c222c9adde3cd6b31897341f854a.png)

下面是我编写的代码，它能够提取属性、注册的域，但我似乎无法得到域中 MBean 的实际列表。

```
 import javax.management.remote.JMXConnector;
    import javax.management.remote.JMXConnectorFactory;
    import javax.management.remote.JMXServiceURL;
    import java.lang.management.ManagementFactory;

    import sys, cmd, socket, optparse
    from urlparse import urljoin
    from cmd import Cmd

    def get_connection(host, port):
        serviceURL = str()
        serviceURL = "service:jmx:rmi:///jndi/rmi://"
        serviceURL = serviceURL + host + ":" + str(port) + "/jmxrmi"

        url =  javax.management.remote.JMXServiceURL(serviceURL);
        connector = javax.management.remote.JMXConnectorFactory.connect(url);
        global remote
        remote = connector.getMBeanServerConnection();

    def get_domain_list():
        domainList = []
        get_connection('dt2apps2102', 8004)
        domainList = remote.getDomains()
        return domainList

    def print_domain_list():
        domainList = get_domain_list()
        for element in domainList:
            print element

    def get_domain_objects(domain):
        pass

    def get_object_list():
        dmiDomains = {}
        domainList = get_domain_list()
        for element in domainList:
            if element in ('SystemJobControl', 'MediaStore', 'fabric'):
                dmiDomains[element] = None
        return dmiDomains

    def get_attribute(domain, mbean, attribute):
        obn = javax.management.ObjectName(domain + ':' + 'name=' + mbean)
        return remote.getAttribute(obn, attribute)

    print get_object_list()
    get_object_list() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T20:33:03.383

这应该为您提供所有对象名称：

`remote.queryNames(new ObjectName(domain + ":*"), null)`

这将获得实际的 MBean：

`remote.queryMBeans(new ObjectName(domain + ":*"), null)`

# jquery - Bakground 图像 div 隐藏 jquery 幻灯片

> ID：11849273
> 
> 赞同：1
> 
> 时间：2012-08-07T15:33:04.787
> 
> 标签：jquery, css, slideshow

我在 div 类“feature2”中有一个带有标题的 jquery 幻灯片。我已经向 div 类“feature2”添加了一个背景图像，它跨越了 100% 的屏幕宽度，但问题是它隐藏了我的幻灯片图像 - 但不是它们的标题？

以下是有问题的页面：

[http://www.signport.co.uk/test/asg_slideshow.html](http://www.signport.co.uk/test/asg_slideshow.html)

这是我希望它看起来如何的一个例子 - [http://www.signport.co.uk/test/asg_aston.html](http://www.signport.co.uk/test/asg_aston.html)

如果你用萤火虫禁用'background-image url("Images/background.png")'，它会显示后面的图像。

如何修改它，使图像幻灯片和标题位于阴影图像的前面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:57:47.353

You need to add a `z-index` to the div tag, so it should look like this:

```
<div class="feature2" style="padding-right: 350.5px; margin-left: -350.5px; padding-left: 350.5px; z-index:1;"> 
```

`z-index` sets the stack order of specific elements.

Hope this helps.

# inheritance - 继承与淘汰js

> ID：11849277
> 
> 赞同：3
> 
> 时间：2012-08-07T15:33:17.817
> 
> 标签：inheritance, knockout.js, coffeescript

```
class ViewModel
  constructor: ->
    $.ajax({url: '#.json', type: 'GET', dataType: 'json'})
    .done @buildModel

  buildModel: (data) =>
    @model = ko.mapping.fromJS(data)
    @model.update = =>
      delete @model.update
      jsonForm = ko.mapping.toJSON(@model)
      $.ajax({url: '#.json', data: jsonForm, type: 'PUT', contentType:"application/json; charset=utf-8", dataType: 'json'})
      .done @buildModel

    ko.applyBindings(@model)

###################################################################

class FormViewModel extends ViewModel
  buildModel: =>
    super() 
```

如果我这样称呼：

```
$(document).bind 'pageinit', =>
  @form = new ViewModel 
```

一切安好。如果我尝试继承

```
$(document).bind 'pageinit', =>
  @form = new FormViewModel 
```

收到错误：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: update is not defined;
Bindings value: click: update 
```

为什么 ko.applyBindings 对这种继承不满意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:05:07.650

使用`super`代替`super()`in`FormViewModel`的`buildModel`功能。

*   `super()`意思是：调用同名的父方法，不带任何参数。
*   `super`意思是：用我收到的任何参数调用同名的父方法。

所以子类总是`buildModel`用 data = 调用父函数`undefined`。

另请注意，我认为您不需要调用`ko.applyBindings`该`buildModel`函数。对于整个视图模型，调用应该只发生一次。

# java - 在 ZK 中，如何根据移动设备的方向调整 UI 组件？

> ID：11849279
> 
> 赞同：0
> 
> 时间：2012-08-07T15:33:19.813
> 
> 标签：java, android, iphone, zk

我正在使用 ZK6，我想根据移动设备的方向更改我的 UI 组件。

在 ZK 组件参考：[Tablet Devices/Events/ClientInfoEvent](http://books.zkoss.org/wiki/ZK_Component_Reference/Tablet_Devices/Events/OrientationEvent)中，有一个`getOrientation()`方法在`ClientInfoEvent`. ~~但是，我在课堂上没有看到这个方法，也找不到关于这个方法的任何信息~~。（见更新）

现在我正在使用这段代码在设备方向改变时调整组件大小。

```
@Override
public void doAfterCompose(Groupbox comp) throws Exception {
  super.doAfterCompose(comp);
  comp.addEventListener(Events.ON_CLIENT_INFO, new EventListener<ClientInfoEvent>() {
    @Override
    public void onEvent(ClientInfoEvent event) throws Exception {
      getSelf().setHeight(event.getScreenHeight() + "px");
      getSelf().setWidth(event.getScreenWidth() + "px");
    }
  });
} 
```

但是我对它不太满意，因为它需要服务器更新组件，我仍然不知道它是什么方向。

那么，我怎么知道方向？根据这些信息调整组件尺寸的更好方法是什么？

我使用android模拟器进行测试，如果这很重要。

## 更新

我注意到这`getOrientation()`是在版本 6.5.0 中实现的，它不是来自稳定版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:20:51.077

由于6.5.0已经发布了一段时间，我决定回答这个问题。

基本上，`ClientInfoEvent`现在提供有关方向的信息，以及设备像素比

所以现在我们可以编写如下代码：

```
@Override
public void doAfterCompose(Groupbox comp) throws Exception {
  super.doAfterCompose(comp);
  comp.addEventListener(Events.ON_CLIENT_INFO, new EventListener<ClientInfoEvent>() {
    @Override
    public void onEvent(ClientInfoEvent event) throws Exception {
      if (event.isLandscape()) {
        // do things when landscape
      } else {
        // do other things else.
      }
    }
  });
} 
```

对于重新调整组件大小，我编写了一些客户端代码来调整客户端的小部件宽度/高度，并在必要时使用 java 代码要求服务器更新组件。

# asp.net - HTML5 离线存储 - 会话的替代方案？

> ID：11849280
> 
> 赞同：1
> 
> 时间：2012-08-07T15:33:24.867
> 
> 标签：asp.net, html, session, offline-storage

我正在一个大量使用 Session 的网站上工作。我们计划将此网站从 迁移`framework 2.0`到`framework 4.0`. 我们还计划使用 HTML5。由于我们正在重新设计应用程序，因此我们也在尽可能地减少 Session 的使用。

HTML5 的特性之一是离线存储。它可以用作保存 Session 数据的替代位置吗？HTML5 离线存储是否可以替代 Asp.Net 会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:35:35.033

会话数据存储在服务器上，HTML5 离线存储存储在浏览器中。如果您愿意在浏览器中存储会话数据，请确保它会起作用。但是，如果您有敏感信息应该保留在服务器上，请将其保存在会话中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:41:12.047

它当然可以用作会话当前使用的**某些事物的替代品。**

而且它对会话的可伸缩性没有可怕的影响，所以我肯定会说你应该尽可能使用它。

也就是说，与使用或不使用它们之间的差异相比，一旦你使用它们，对它们进行更多操作的可伸缩性影响很小，所以如果你不能完全消除会话，你可能不会发现它有所收获你们都这么多。

但是对于存储客户端状态，它是一个更明智的解决方案（客户端状态在客户端上，这听起来几乎是多余的，这是一个非常明智的想法），因此仅此一点就值得在可能的情况下进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:38:23.037

嗨，是的，您可以将值存储在 html5 存储对象中，例如 sessionStorage/localStorage，请访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后访问您的值以存储会话的值

```
sessionStorage.getItem('label')
sessionStorage.setItem('value', 'label') 
```

或使用永久存储值

```
localStorage.getItem('label')
localStorage.setItem('value', 'label') 
```

所以任何需要存储的session数据，都可以使用html5提供的sessionStorage。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T15:47:08.330

使用较新的 HTML5 api 时要注意的一件事是用户当前使用的浏览器是否支持它。您可以使用[Modernizer](http://modernizr.com/)之类的库来进行特征检测。

Aspnet 会话和本地存储不是等效的。如果这是您的目标，您可以使用本地存储来维护状态。

过去，我采用了一种基于 cookie 的方式来保存数据，而不是本地存储（以安全地定位所有浏览器……无论如何都要使用 cookie）。也许它可以提供帮助。请注意以下代码需要[JSON2](https://github.com/douglascrockford/JSON-js/)。

```
var Util = (function () {
    return {
        // Wrapper module for getting and setting cookies
        CookieManager: {
            set: function (name, value, days) {
                if (days) {
                    var date = new Date();
                    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                    var expires = "; expires=" + date.toGMTString();
                }
                else var expires = "";
                document.cookie = name + "=" + value + expires + "; path=/";
            },
            get: function (name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
                }
                return null;
            },
            erase: function (name) {
                this.set(name, "", -1);
            }
        }
    }
})();

var UserPrefs = (function () {
    var cookieName = 'UsrPrf';
    var data = {};
    return {
        set: function (propName, value) {
            if (data == null) data = {};
            data[propName] = value;
        },
        get: function (propName, defaultValue) {
            if (data == null) {
                data = {};
                return defaultValue;
            } else {
                return data[propName] == undefined ? defaultValue : data[propName];
            }
        },
        load: function () {
            try {
                data = JSON.parse(Util.CookieManager.get(cookieName));
            } catch (e) {
                data = {};
            }
            return data;
        },
        save: function (ttl) {
            if (!ttl) ttl = 30;
            Util.CookieManager.set(cookieName, JSON.stringify(data), ttl);
        }
    };
})(); 
```

# facebook - facebook活动的“like box”

> ID：11849284
> 
> 赞同：0
> 
> 时间：2012-08-07T15:33:46.540
> 
> 标签：facebook, facebook-like

我知道可以为 facebook 页面做一个“like box”，但是否可以为事件做类似的事情？这是类似框的 URL [http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

如果我只是将页面 url 更改为事件 url，我会收到错误消息`Could not retrieve the specified page. Please verify correct href was passed in`。

基本上我希望能够在我的网站上发布类似的内容，说“这些人注册了 XY 活动”。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:22:14.593

听起来像是一个不错的插件想法。但是，我可以想象经过数月/年之后，网页上将有数百万个事件插件，其相关事件早已过去。类似框几乎永远相关，但事件来来去去。

不过，您绝对可以使用 Event API 构建自己的事件框： [https ://developers.facebook.com/docs/reference/api/event](https://developers.facebook.com/docs/reference/api/event)

例如，查询所有`attending`用户并构建这些用户的头像以及事件的信息。

# matrix - SAS 中所有数值列的相关矩阵和统计数据

> ID：11849286
> 
> 赞同：0
> 
> 时间：2012-08-07T15:33:49.090
> 
> 标签：matrix, statistics, sas, correlation

我有一个名为 final_data 的数据集，其中包含数字字段和一些字符串字段。我想做的是这个

打印出数据集中所有数值变量之间的相关矩阵，并计算数据中所有数值变量的均值、最小值、最大值和缺失数

现在我知道如何通过明确指定变量来计算平均最小值和最大值，但我不知道如何为数值做这件事。我也不知道如何计算缺失值的数量。至于所有数值字段之间的相关矩阵，我不知道该怎么做。

PS 表示列名，您可以`num1` `num2` `str1` `str2`分别将其用于数字列和字符串列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:11:52.437

统计过程通常作用于所有数值变量，因此您实际上不需要指定它们，例如：

```
proc corr data=sashelp.prdsale;
run;

proc means data=sashelp.prdsale mean min max nmiss;
run; 
```

# ios - 如何使用 xCode Interface Builder 复制和粘贴 Xib 文件

> ID：11849291
> 
> 赞同：7
> 
> 时间：2012-08-07T15:34:03.970
> 
> 标签：ios, interface-builder, xib

我需要创建一个新的 xib 文件并希望使用现有的 xib 来作为我的布局的基础。创建新的 xib 文件的最佳方法是什么？如果是 Android，我会复制并粘贴 xml，然后开始调整，但是使用 IB 我没有那个选项（对吗？）。

到目前为止，我已经尝试了两件事，（1）在 xCode 中复制和粘贴文件，但该选项不存在；（2）从旧 xib 复制所有 UI 元素并将它们粘贴到新的空白 xib 中。这会复制所有 UI 对象，但根本不保持结构或间距。最好的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T08:25:31.340

只需复制一份 NIB 文件，将其重命名并添加到同一个 Xcode 项目中。如果需要，更改新笔尖中的文件所有者类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T15:39:18.513

当我需要这样做时，我将文件转换为 .nib（单击文件并删除 .xib 并添加 .nib）然后您可以看到所有 XML 副本。然后我创建一个新的 .xib 并将其转换为 .nib 并粘贴 XML，然后您可以将它们都转换回 .xib。您也可以右键单击该文件并导航到 View As > Source Code

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-21T06:24:15.227

如果使用 Storyboard：将新的 UIViewController 添加到情节提要中。移除其主视图，使视图控制器为空。将视图控制器的类（在身份检查器中）设置为 nib 文件所有者的类。还要确保 .h 和 .m 文件已添加到您的项目中。

现在打开笔尖，选择最顶部的视图，然后按 Cmd-C 将其复制到剪贴板。切换到情节提要，选择新的空视图控制器。按 Cmd-V 将 nib 的内容粘贴到此视图控制器中。

您可能必须重新连接所有出口和操作，但至少您不必再次进行布局。

# r - 在 R 中绘制多个根

> ID：11849295
> 
> 赞同：2
> 
> 时间：2012-08-07T15:34:17.357
> 
> 标签：r, plot

我有一个方程，我想求解`m`

```
m^2+x*m+1=0 
```

我知道我可以使用`polyroot(c(1,x,1))`.

我想在 R 中绘制这些根以进行变化`x`，以便为 的每个值绘制多项式的所有实根`x`。

请注意，多项式可能会变得比这更复杂，从而排除了二次或三次公式的应用。

关于我如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T16:03:09.210

I think this will do the trick. Just set `X` to whatever values you want to evaluate.

```
X <- seq(0, 10, length=21)
roots <- sapply(X, function(x) polyroot(c(1,x,1))) 
roots[abs(Im(roots)) > 1e-10] <- NA
matplot(X, t(roots), pch=1) 
```

![enter image description here](../Images/e1c68241c7e1f59524e6ce04b00a10ce.png)

# c# - 相同的绑定适用于 1 个 XAML 项目，但对于另一个为 null

> ID：11849306
> 
> 赞同：3
> 
> 时间：2012-08-07T15:34:35.880
> 
> 标签：c#, xaml, data-binding, datacontext, converter

productColumn2 的绑定适用于两种方式。当我为每个添加转换器时，productColumn1 称为转换器；但在从可观察集合加载时始终将其值设置为 null，或在分配时将值设置为产品（但实际上并未分配可观察集合）。

问题与 DataContext 和 LogicalTree 有关。ProductSelectorTextBoxUserControl 的 DataContext 是它本身，并用于它自己的代码。我希望能够将其“文本”属性绑定到我的可观察集合，如在 productColumn2 中。到目前为止，我似乎无法将 ProductSelectorTextBoxUserControl DataContext 设置为此处使用的 DataContext。

```
<DataGrid ItemsSource="{Binding Path=ObservableCollectionItems, Mode=OneWay}" AutoGenerateColumns="False" EnableRowVirtualization="True" >
<DataGrid.Columns>
    <DataGridTemplateColumn x:Name="productColumn1" SortMemberPath="Product" >
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <productSelector:ProductSelectorTextBoxUserControl Text="{Binding Path=Product, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=LostFocus, ValidatesOnExceptions=True}" /> 
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
    <DataGridTextColumn x:Name="productColumn2" Binding="{Binding Path=Product, Mode=TwoWay, NotifyOnSourceUpdated=True}" />            
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:50:46.083

如果对自身`ProductSelectorTextBoxUserControl`有一个`DataContext`集合，`Binding`则将无法找到该`Product`属性，因为它不存在。您需要修改您的绑定，以便它知道在哪里可以找到该`Product`属性；像这样的东西可能会起作用：

```
<productSelector:ProductSelectorTextBoxUserControl Text="{Binding Path=Product, RelativeSource={RelativeSource AncestorType={x:Type DataGridRow}}, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=LostFocus, ValidatesOnExceptions=True}" /> 
```

通过添加`RelativeSource`，您是在告诉绑定`Product`在`DataGridRow.DataContext`.

**更新**

你试过`{RelativeSource AncestorType={x:Type DataGridRow}}`吗？您应该针对行而不是网格。

当`ItemContainerGenerator`创建 each`DataGridRow`时，它将行设置`DataContext`为`ObservableCollectionItems`. 所以，逻辑树是这样的：

*   `DataGrid`（DataContext = 定义的对象`ObservableCollectionItems`）
    *   `DataGridRow`（数据上下文 = `ObservableCollectionItems[0]`）
        *   `ProductSelectorTextBoxUserControl`（数据上下文 = 自我）
    *   `DataGridRow`（数据上下文 = `ObservableCollectionItems[0]`）
        *   `ProductSelectorTextBoxUserControl`（数据上下文 = 自我）

网格`DataContext`不公开`Product`属性，它是在集合中的每个元素上定义的（除非我错过了一些东西）。该`Product`属性应该在每一行的上下文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:46:46.097

感谢@SellMeADog 帮助我解决这个问题，但这仍然让我很长时间才弄清楚。最后一行是：

```
<productSelector:ProductSelectorTextBoxUserControl x:Name="productSelector" Product="{Binding Path=Item.Product, RelativeSource={RelativeSource FindAncestor, AncestorType=DataGridRow, AncestorLevel=1}, Converter={StaticResource productNameToProductConverter}, Mode=TwoWay, NotifyOnSourceUpdated=True, ValidatesOnExceptions=True}" /> 
```

关键点是RelativeSource DataGridRow，Path是Item(ObservableCollection).Property

如果您注意到提到文本的问题并且这是指产品，我不得不切换到产品并添加转换器。然后 UserControl 将设置自己的文本

# opengl - 如何向 glTexture 添加填充？

> ID：11849307
> 
> 赞同：0
> 
> 时间：2012-08-07T15:34:35.827
> 
> 标签：opengl

我想在创建 glTexture 时向其所有侧面添加 1 个像素的填充，而不修改我的源缓冲区。有什么命令可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:36:36.800

使用具有目标大小的 glTexImage2D（或 glTexStorage2D）初始化目标纹理对象，并使用空指针作为数据参数。然后使用 glTexSubImage2D 将图像上传到所需的矩形中。

# javascript - 为输入范围生成红色和绿色之间的颜色

> ID：11849308
> 
> 赞同：29
> 
> 时间：2012-08-07T15:34:41.900
> 
> 标签：javascript, colors, range, interpolation

> **可能重复：**
> [基于数字的颜色编码](https://stackoverflow.com/questions/5533297/color-coding-based-on-number)

我希望用户能够从 1-100 的范围内进行选择，当数字小于 50 时，该区域的颜色会变为深绿色，而当颜色接近 100 时，颜色会变得更红.

我试图让它随着范围更靠近中心，颜色应该接近白色（其中 50 = 全白）。

我从这里尝试了答案：[为功率计生成红色和绿色之间的颜色？](https://stackoverflow.com/q/340209/561731)无济于事.... 50 最终成为一个糊涂的绿色...

我有以下html：

```
<span><span class="value">50</span><input type="range" /></span>​ 
```

以及以下 javascript：

```
$(document).on({
    change: function(e) {

        var self = this,
            span = $(self).parent("span"),
            val = parseInt(self.value);
        if (val > 100) {
            val = 100;
        }
        else if (val < 0) {
            val = 0;
        }
        $(".value", span).text(val);
        var r = Math.floor((255 * val) / 100),
            g = Math.floor((255 * (100 - val)) / 100),
            b = 0;
        span.css({
            backgroundColor: "rgb(" + r + "," + g + "," + b + ")"
        });
    }
}, "input[type='range']");​ 
```

小提琴：http: [//jsfiddle.net/maniator/tKrM9/1/](http://jsfiddle.net/maniator/tKrM9/1/)

我已经尝试了许多不同的 r,g,b 组合，但我似乎真的无法做到正确。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-07T16:31:06.280

由于您在 RBG 空间中创建渐变的方式，您得到了混乱的绿色。要获得“更干净”的渐变，您可以使用[您链接到的问题的答案中](https://stackoverflow.com/questions/340209/generate-colors-between-red-and-green-for-a-power-meter/340214#340214)提到的 HSV 模型。

^(*RGB 渐变（顶部）与 HSV（底部）*) ![顶部渐变使用 RGB，底部使用 HSV](../Images/646968e741c5e1e216d8e6e3c7f1f682.png)

通过在 0（红色）和 120（绿色）之间缩放 H（色调）值，您将获得一个非常干净的过渡。但是，在中间点 (60)，您最终会得到亮黄色，而不是您想要的白色。您可以通过修改 S（饱和度）值来解决此问题——饱和度为 0 时，您将得到白色（1 为您提供全色饱和度。

这是一个粗略的示例，当输入值从 0 到 50 再到 100 时，将饱和度从 1 缩放到 0 再回到 1 - [http://jsfiddle.net/xgJ2e/2/](http://jsfiddle.net/xgJ2e/2/)

```
var hue = Math.floor((100 - val) * 120 / 100);  // go from green to red
var saturation = Math.abs(val - 50)/50;   // fade to white as it approaches 50 
```

[ps 使用jquery-colors](https://github.com/Enideo/jquery-colors)在颜色模型之间进行转换很容易，尽管你自己滚动并不难。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-07T16:44:07.203

[我在here](https://stackoverflow.com/a/986394)的一些帮助下想出了这个答案，它使用了一个`Interpolate`可以轻松设置开始和结束颜色的函数。

```
function Interpolate(start, end, steps, count) {
    var s = start,
        e = end,
        final = s + (((e - s) / steps) * count);
    return Math.floor(final);
}

function Color(_r, _g, _b) {
    var r, g, b;
    var setColors = function(_r, _g, _b) {
        r = _r;
        g = _g;
        b = _b;
    };

    setColors(_r, _g, _b);
    this.getColors = function() {
        var colors = {
            r: r,
            g: g,
            b: b
        };
        return colors;
    };
}

$(document).on({
    change: function(e) {

        var self = this,
            span = $(self).parent("span"),
            val = parseInt(self.value),
            red = new Color(232, 9, 26),
            white = new Color(255, 255, 255),
            green = new Color(6, 170, 60),
            start = green,
            end = white;

        $(".value", span).text(val);

        if (val > 50) {
            start = white,
                end = red;
            val = val % 51;
        }
        var startColors = start.getColors(),
            endColors = end.getColors();
        var r = Interpolate(startColors.r, endColors.r, 50, val);
        var g = Interpolate(startColors.g, endColors.g, 50, val);
        var b = Interpolate(startColors.b, endColors.b, 50, val);

        span.css({
            backgroundColor: "rgb(" + r + "," + g + "," + b + ")"
        });
    }
}, "input[type='range']");​ 
```

小提琴：http: [//jsfiddle.net/maniator/tKrM9/53/](http://jsfiddle.net/maniator/tKrM9/53/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-07T15:44:05.127

以一种非常随意的方式，我想我会这样做：

使 1-50 的范围具有最大绿色 (FF)，红色和蓝色的缩放值范围从 00（红色和蓝色为 1），一直到 FF（红色和蓝色）为 50。

（示例值：1 -> 00FF00、25 -> 7FFF7F、50 -> FFFFFF）

然后从 51 到 100，将红色保持在 FF，同时缩小蓝色和绿色，使蓝色和绿色在达到 100 时接近 0。

（示例值：51 -> FFFFFF，75 -> FF7F7F，100 -> FF0000）

这保证在 0 时为您提供亮绿色，在 50 时为白色，在 100 时为您提供红色。

两者之间的区域可能并不完全完美，仅仅是因为眼睛对不同颜色强度的解释不同（我们在某些颜色上比其他颜色更好），但它应该让你非常接近。

我将您的小提琴中的代码修改为以下内容，它符合我的描述：

```
$(document).on({
    change: function(e) {

        var self = this,
            span = $(self).parent("span"),
            val = parseInt(self.value);
        if (val > 100) {
            val = 100;
        }
        else if (val < 0) {
            val = 0;
        }
        $(".value", span).text(val);
        if (val <= 50)
        {
            r = Math.floor((255 * (val / 50))),
            g = 255,
            b = Math.floor((255 * (val / 50)));
        }
        else
        {
            r = 255,
            g = Math.floor((100 - val) / 50 * 255),
            b = Math.floor((100 - val) / 50 * 255);
        }
        span.css({
            backgroundColor: "rgb(" + r + "," + g + "," + b + ")"
        });
    }
}, "input[type='range']"); 
```

# regex - 删除字符串末尾的句点和数字

> ID：11849309
> 
> 赞同：9
> 
> 时间：2012-08-07T15:34:45.013
> 
> 标签：regex, r

如何删除一个尾随句点 ( `.`)，其后紧跟一个数字（长度为一位或两位数）？例子：

```
z <- c("awe", "p.56.red.45", "ted.5", "you.88.tom") 
```

我只想删除`.45`和`.5`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T15:37:27.887

你只需要一个简单的正则表达式：

```
z_new = gsub("\\.[0-9]*$", "", z) 
```

几点评论：

1.  gsub 中的第一个参数是我们正在寻找的模式。第二个参数是用什么替换它（在这种情况下，什么都没有）。
2.  字符在`$`字符串末尾寻找模式
3.  `[0-9]*`查找 1 个或多个数字。或者，您可以使用`\\d*`or `[[:digit:]]*`。
4.  `\\.`匹配句号。我们需要用两个斜线来转义句号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T15:43:24.627

试试这个

```
gsub("\\.[[:digit:]]*$", "", z) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T15:49:06.020

最好的方法是使用正则表达式替换语句。您如何执行此操作取决于您使用的语言。

这是识别尾随数字所需的正则表达式模式

> (.\d{1,2})^

你应该简单地将匹配替换为`""`

# ruby-on-rails - capybara 错误信息，测试仍然通过

> ID：11849313
> 
> 赞同：1
> 
> 时间：2012-08-07T15:35:00.430
> 
> 标签：ruby-on-rails, rspec, capybara

当我使用 Capybara/webkit 运行集成测试时，我收到以下错误消息：

```
undefined|36|TypeError: Result of expression 'node' [undefined] is not an object. 
```

但是，它不会导致测试失败，也不会总是发生。当它确实发生时，它似乎发生在测试中的同一点（就在最终断言之前）

测试：

```
it "does something with things" do
  #....
  within('#dialog_box') do
    click_button 'Save'
  end
  puts 'after within'
  page.should have_content(thing_attrs[:name]) 
  puts 'after assertion'
end 
```

最终输出：

```
after within
undefined|36|TypeError: Result of expression 'node' [undefined] is not an object.
after assertion
  does something with things [pass] 
```

我怎样才能缩小造成这种情况的原因？它使测试输出变得丑陋:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:54:59.893

我有一个非常相似的问题，我得到的错误是：

```
undefined|0|TypeError: 'undefined' is not an object 
```

最后为了弄清楚它是从哪里来的，我把js文件`application.js`一个一个的去掉，直到错误消失。缩小范围后，我发现实际上存在*一个*未定义的变量，它没有引起任何问题，因此所有测试都通过了。

可能有更好的方法来做到这一点，不太确定，但这种方法对我有用。祝你好运。

# javascript - 我需要将这两个函数从 javascript 更改为 JQuery 任何人都可以告诉我如何转换

> ID：11849314
> 
> 赞同：-1
> 
> 时间：2012-08-07T15:35:01.240
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
function setYear()
{

    var d = new Date(); 

    var cur = document.getElementById('CYear'); 
    var prev = document.getElementById('PYear'); 
    var next = document.getElementById('NYear'); 
    var optionC, optionP, optionN; 

    for (var i = d.getFullYear() - 10; i <= d.getFullYear() + 10; i++) 
    { 
        optionC = document.createElement("option"); 
        optionC.setAttribute("value", i); 
        optionC.innerHTML = i; 
        cur.appendChild(optionC); 
    };
    for (var i = d.getFullYear() - 10; i < d.getFullYear() + 10; i++) 
    { 
        optionP = document.createElement("option"); 
        optionP.setAttribute("value", i); 
        optionP.innerHTML = i; 
        prev.appendChild(optionP); 
    }; 
    for (var i = d.getFullYear() - 10; i <= d.getFullYear() + 10; i++) 
    { 
        optionN = document.createElement("option"); 
        optionN.setAttribute("value", i); 
        optionN.innerHTML = i; 
        next.appendChild(optionN); 
    }; 
    cur.value=d.getFullYear();
    prev.value=d.getFullYear()-1;
    next.value=d.getFullYear()+1;   
}
function setYear1(obj)
{
    var prev = document.getElementById('PYear');
    var next = document.getElementById('NYear');   

    prev.value = Number(obj.value) - 1;
    next.value = Number(obj.value) + 1;
}

function onlyNumbers(evt)
            {
                var evt = (evt) ? evt : event;
                var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode : ((evt.which) ? evt.which : 0));
                if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode!=44)
                {
                    alert("Enter numerals only in this field!");
                    return false;
                }
                return true;
            }

</script> 
```

我需要将这两个函数从 javascript 更改为 JQuery 任何人都可以告诉我如何转换。是否有任何转换器可以从 javascript 转换为 Jquery？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:37:09.393

> 将 jQuery 添加到带有 JavaScript 的现有项目不应破坏任何现有的 JavaScript，除非您使用的是冲突框架，例如原型，在这种情况下，您通常可以通过将 jQuery 设置为 noConflict 模式来避免两者都存在。
> 
> 如果它们工作正常，当然没有必要将工作的 JavaScript 函数重写为 jQuery，除非您的主要目标是提高效率/编写更短的代码，或者即使只是因为 JavaScript 变得太麻烦而无法维护。
> 
> 总之，如果您只想向网站添加一些新的 jQuery 功能；为什么不直接添加它并保持现有的 JavaScript 不变呢？

[https://stackoverflow.com/a/2305763/1188942](https://stackoverflow.com/a/2305763/1188942)

* * *

至于转换器，我还没有找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:38:26.500

jQuery 只是 javascript 的扩展，它（主要）处理选择和操作 DOM 元素。所以不，不会有转换器。我建议实际*学习*jQuery——它非常有用。

# java - 使用java读取图像时如何处理颜色配置文件

> ID：11849317
> 
> 赞同：1
> 
> 时间：2012-08-07T15:35:06.000
> 
> 标签：java, image, jpeg, rgb, jai

我发现使用Java读取图像（JPEG）时，很多像素的RGB值与photoshop中的不同，JIMI得到的RGB值与ImageIO也不同，我怎样才能得到与photoshop完全相同的RGB值在java中？谢谢！

这就是我通过以下方式读取图像的方式：
1.ImageIO

`BufferedImage test = ImageIO.read(file);`
2.吉米

`JimiReader createJimiReader = Jimi.createJimiReader(new FileInputStream(filename));`
`JimiRasterImage rasterImage = createJimiReader.getRasterImage();`

3.JAI

`FileSeekableStream st = new FileSeekableStream(filename);`
`BufferedImage asBufferedImage = JAI.create("stream", st).getAsBufferedImage();`

# jquery - HTML + CSS - 2 个调整大小的 DIV

> ID：11849324
> 
> 赞同：1
> 
> 时间：2012-08-07T15:35:32.113
> 
> 标签：jquery, css, html

我有一个关于 HTML 和 CSS 的快速问题。我认为这很容易追踪，但事实证明这是一个相当大的挑战。本质上，我有 2 个并排的 DIV，一个是固定宽度，一个是动态的。右边是一个固定宽度的 400 像素 DIV，包含一些基本信息。左边的那个应该只是填满页面的其余部分。但是有一个问题，我希望能够随时动态隐藏右侧的 DIV（使用 jQuery）并让左侧的 DIV 填充其空间。我知道有几种方法可以做到这一点，而且我已经知道一些。但我想在 jQuery 中做尽可能少的 CSS 操作。这是我的一些示例代码。

```
<body>
    <div id="right"></div>
    <div id="left"></div>
</body>

<style type="text/css">
    #left {
        height: 100%;
        margin-right: 400px;
    }
    #right {
        float: right;
        width: 400px;
        height: 100%;
    }
</style> 
```

这样做的问题是右边距永久设置为 400 像素。因此，如果要重新调整右侧的大小（宽度为 0），则 400 像素的边距将保留。本质上，我需要左侧的边距，即右侧 div 的大小。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:42:09.257

你不需要 margin-right: 400px

查看现场演示：http: [//jsfiddle.net/uxCpy/1/](http://jsfiddle.net/uxCpy/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:41:38.633

在和`#right`之间切换。这将隐藏元素而不将其从布局中删除。`visibility: hidden``visibility: visible`

JS：

```
$('#left').on('click',function() {
    $('#right').toggleClass('invisible');
});​ 
```

CSS：

```
.invisible {
    visibility: hidden;
}​ 
```

[http://jsfiddle.net/mblase75/nkuv4/](http://jsfiddle.net/mblase75/nkuv4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:42:21.113

由于您想让另一个 div 占据整个宽度，因此您必须将显示设置为无。使用 jQuery更改为`display:none`它会起作用，然后当您需要它显示时，更改为`display:block`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T15:43:44.713

是否有可能嵌套`#right`在里面`#left`，然后`float: right`呢？如果你使`#left`页面的整个宽度，这应该有相同的效果。

# jquery - 如何获取具有特定名称（属性）的表单字段？

> ID：11849328
> 
> 赞同：0
> 
> 时间：2012-08-07T15:35:42.817
> 
> 标签：jquery, html

我现在正在做的是使用 HTML5 数据属性来保存一些我也想回发的静态信息。另外，我正在使用史蒂夫的（忘记姓氏）索引 HtmlHelper 和 ASP.NET MVC 3。我想做的是使用一些 javascript/jquery 来仅获取`.SomeProperty`名称属性中具有“”的 INPUT 和 SELECT 标记。我认为这是我需要的一部分：

```
var formData = $('#' + div_id).find('input, select'); 
```

但我不确定如何过滤该属性。

我的标签是什么样子的一个例子：

```
<form action="/TestEdit/Sections/5/100100/44/A" id="line_756_A4" method="post">        
    <div style="clear:both; padding:1%;">       
        <div class="section">
            A
        </div>
        <div class="number">
            4
        </div>
        <div class="desc">
            Fourth Row of in the sun
        </div>
        <div class="ctrl">  

            <input type="hidden" name="RowInput.index" autocomplete="off" value="ec65a509-12c7-4029-b774-10b84ae73a66" />
            <input type="hidden" name="RowInput.index" autocomplete="off" value="41936720-0509-428c-8aaf-3bd547cc8084" />

            <label for="RowInput_41936720-0509-428c-8aaf-3bd547cc8084__InputtedData">Space Station</label>
            <input data-ctrltypeid="4" data-instid="4" id="RowInput_41936720-0509-428c-8aaf-3bd547cc8084__InputtedData" name="RowInput[41936720-0509-428c-8aaf-3bd547cc8084].InputtedData" type="radio" value="1" />

            <label for="RowInput_41936720-0509-428c-8aaf-3bd547cc8084__InputtedData">Solar System</label>
            <input data-ctrltypeid="4" data-instid="4" id="RowInput_41936720-0509-428c-8aaf-3bd547cc8084__InputtedData" name="RowInput[41936720-0509-428c-8aaf-3bd547cc8084].InputtedData" type="radio" value="2" />

            <label for="RowInput_41936720-0509-428c-8aaf-3bd547cc8084__InputtedData">Galaxy</label>
            <input checked="checked" data-ctrltypeid="4" data-instid="4" id="RowInput_41936720-0509-428c-8aaf-3bd547cc8084__InputtedData" name="RowInput[41936720-0509-428c-8aaf-3bd547cc8084].InputtedData" type="radio" value="3" />

            <br /> 

        </div>
        <div class="done">
            <input id="10" type="button" onclick="javascript:postBackPart($(this).parent().parent().parent().attr('id'));" value="button" />
        </div>
        <div class="foo">
            107
        </div>
        <div class="bar">
            18129
        </div>
        <div class="baz">
            512
        </div>
        <div class="baz">
            8052
        </div>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:37:45.983

```
// get all elements that have that attribute with the given value
$('*[attributeName=attributeValue]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:06:03.937

```
$('input, select').filter('[name*=".SomeProperty"]') 
```

这将获得名称中包含“.SomeProperty”`input`的`select`元素。请注意，它不要求名称*完全是*“.SomeProperty”；相反，它包含它。

From the comment underneath your question, this seems to be what you need.

# regex - 是否有正则表达式可以在 Notepad++ 中找到几个单词之一

> ID：11849330
> 
> 赞同：6
> 
> 时间：2012-08-07T15:35:44.927
> 
> 标签：regex, notepad++

我想使用 Notepad++ 中的“在当前文档中查找全部”按钮来查找单词列表的所有实例。是否可以使用正则表达式来做到这一点？

例如，如果单词列表是

```
Foo,man,choo 
```

并且记事本++中的文件包含

```
01 The quick brown fox jumps over the lazy dog
02 The quick brown fox jumps over the lazy dog
03 The quick brown man jumps over the lazy dog
04 The quick brown fox jumps over the lazy dog
05 The quick brown fox jumps over the lazy dog
06 The quick brown foo jumps over the lazy dog
07 The quick brown fox jumps over the lazy dog
08 The quick brown fox jumps over the lazy dog
09 The quick brown choo jumps over the lazy dog
10 The quick brown fox jumps over the lazy dog 
```

查找结果中将返回第 3,6 和 9 行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T15:45:38.573

`|`Notepad++从 6.1.1 版本开始支持管道操作符。

您可以使用此正则表达式进行搜索：

```
^.*(Foo|man|choo).*$ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-07T15:45:24.003

如果您只想匹配这些单词，则可以使用

```
(foo|man|choo) 
```

**结果：**

```
foo
man
choo 
```

但是，如果您想匹配包含这些单词之一的**整行，您可以使用**

```
^.*(foo|man|choo).*$ 
```

**结果：**

```
03 The quick brown man jumps over the lazy dog
06 The quick brown foo jumps over the lazy dog
09 The quick brown choo jumps over the lazy dog 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:37:28.977

应该这样做 - 使用 or 运算符... 也可能在没有括号的情况下工作。

```
(Foo|man|choo) 
```

# wxpython - 单击按钮清除 wxPython 框架

> ID：11849331
> 
> 赞同：0
> 
> 时间：2012-08-07T15:35:50.147
> 
> 标签：wxpython

在 Arch 上使用 wxPython 2.8（工作正常，但我认为不应该......）和在 Mac OS X 上使用 wxPython 2.9，都是 Python 2.7。我的代码包括根据当前状态在不同屏幕之间切换。在状态（屏幕）之间的每次切换时，我都会清除我的主 Sizer 并在我的主框架上调用 DestroyChildren()，然后用其他组件填充它们。

所以基本上我认为我有外部线程试图更改主线程中的 wx 组件。我猜这不是 wxPython 中的最佳实践，那么我该如何修改呢？

将事件附加到按钮

```
self.login_button.Bind(wx.EVT_BUTTON, self.login_button_click) 
```

登录事件会做一些事情并调用更新（模型状态在此处更改）

```
def login_button_click(self,event):

    ...
    # CHANGE THE self.model.current_state
    ...

    self.update(None) 
```

更新清除框架，检查状态并调用构建器方法

```
def update(self, o):
    self.box.Clear() #clear the main sizer
    self.frame.DestroyChildren() #delete all children, THIS IS WHERE THE CODE SEGFAULTS

    print "STATE: "+self.model.current_state

    if self.model.current_state == self.model....
        ...
    elif self.model.current_state == self.model....
        ... 
```

我曾尝试使用 wx.CallAfter，这导致在事件结束时删除了所有组件，甚至是新建的组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:59:29.907

您实际上是在使用线程模块还是与线程相关的任何东西？你真的不应该需要那些来删除 wxPython 中的小部件。我不确定您为什么首先要销毁所有小部件。为什么不直接隐藏主框架并显示带有所有新小部件的子框架？或者使用两个面板。一个面板被破坏，另一个面板与其他小部件被放置在它的位置？我的[博客](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)上有后者的例子。

# ios - long long 数字 div 错误

> ID：11849332
> 
> 赞同：0
> 
> 时间：2012-08-07T15:35:52.157
> 
> 标签：ios, html, converter

```
long long d = 1000*3600*24*365;
NSLog(@"d:%lld",d);

NSLog(@"year:%d",d/(1000*3600*24*365));

d = 100*1000*3600*24*365;
NSLog(@"year:%d",d/(1000*3600*24*365)); 
```

结果：

```
usworldpro[1106:c203] year:1

usworldpro[1106:c203] year:0 
```

为什么会是这样的结果？我认为这可能是类型转换问题，但我无法清楚地找到原因。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:44:32.803

原因是您的文字是整数（int），而不是长整数，因此每个中间结果都是。尝试：

```
 long long d = 1000ll*3600ll*24ll*365ll;
     NSLog(@"d:%lld",d);

     NSLog(@"year:%d",d/(1000ll*3600ll*24ll*365ll));

     d = 100ll*1000ll*3600ll*24ll*365ll;
     NSLog(@"year:%d",d/(1000ll*3600ll*24ll*365ll)); 
```

但是，告诉`NSLog`或`printf`等等错误的格式总是一个坏主意。

# java - 我如何处理使用 Cucumber JVM/JUnit 加载数据库

> ID：11849338
> 
> 赞同：0
> 
> 时间：2012-08-07T15:36:08.833
> 
> 标签：java, junit, mockito, cucumber-jvm, cucumber-junit

我想使用带有黄瓜 jvm 的功能文件来保存测试数据。

*   我正在测试一种在处理之前使用休眠加载对象的方法。

    ```
    public Deal getDealById(Long dealId) {
       deal = template.get(Deal.class, dealId);
       BigDecimal totalAmount = new BigDecimal();
       //loop through all of the loans related to this deal to add up a value
       for (Loan tempLoan: deal.loanList) {
           //add amount from each loan together
           BigDecimal totalAmount = totalAmount + tempLoan.amount;
       }
       //set the total amount value on the deal object
       deal.setTotalAmount(totalAmount);
       return deal;
    } 
    ```

由于我必须指定要加载的 dealId，我该如何处理加载？

我的理解是我需要“模拟”连接和模拟连接产生的对象。

我分别查看了 Jmock、mockito 和 dbunit，但我不明白该怎么做。

我会很感激任何意见。

***编辑注释***

我添加了更多代码，我们正在从数据库中检索一个对象。接下来，我们遍历与交易相关的对象列表（多对一），并将每笔贷款的金额添加到交易金额中。最后，我们在返回交易之前设置交易的总金额。

那么，考虑到我想从功能文件中提供测试信息，我该如何为此方法编写 Junit 测试呢？

在“真实”场景中，这是可行的，我们在应用程序中加载交易并添加每笔贷款的贷款金额，并将其设置到交易中，然后再返回。但是考虑到我们必须从该方法中的数据库加载，我不明白如何为此测试编写 JUnit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:22:15.337

将逻辑重构到您的`Deal`类中，您根本不需要模拟数据库。另外，它是更好的面向对象设计。

```
public Deal getDealById(Long dealId) {
   return template.get(Deal.class, dealId);
}

public class Deal {
   public BigDecimal recalculateTotalLoanAmount() {
      BigDecimal totalAmount = new BigDecimal();
      for (Loan tempLoan: deal.loanList)
         totalAmount = totalAmount + tempLoan.amount;
      setTotalAmount(totalAmount);
      return totalAmount;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:12:46.730

我同意 Garrett 的回答，即您应该重构代码。但是，您在评论中表示重构*“这不是我的选择”*。考虑到这一点，另一种解决方案是使用数据库而不是尝试模拟数据库。

有许多[嵌入式内存数据库](http://en.wikipedia.org/wiki/Embedded_database)可用作单元测试的一部分（例如 HSQLDB、H2、Apache Derby）。您在文件中定义数据库模式，以便动态创建数据库。您还可以使用测试数据预加载数据库表，这样您的测试就不必创建它。内存数据库的加载速度非常快。

我强烈建议您使用像[Spring](http://www.springsource.org/)这样的 Java 框架，该框架具有方便的配置，只需几行 XML 即可为您运行此类设置。但是，考虑到您无法重构代码，这可能不是一个选择。

# c - 使用递归反转字符串

> ID：11849341
> 
> 赞同：0
> 
> 时间：2012-08-07T15:36:34.283
> 
> 标签：c, string, function, reverse

我从互联网上获得了此代码，但我无法获得整个代码。例如`if(*str)`。这段代码是什么意思？还可以返回一个字符串吗？我认为 main 中的数组可以直接在函数中更改，但在这里它被返回了..

```
#include<stdio.h>
#define MAX 100
char* getReverse(char[]);

int main(){

    char str[MAX],*rev;

    printf("Enter  any string: ");
    scanf("%s",str);

    rev = getReverse(str);

    printf("Reversed string is: %s\n\n",rev);
    return 0;
}    

char* getReverse(char str[]){

    static int i=0;
    static char rev[MAX];

    if(*str){
         getReverse(str+1);
         rev[i++] = *str;
    }

    return rev;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:05:10.547

This is not the clearest example of recursion due to the use of the static variables. Hopefully the code generally seems clear to you, I suspect the part that is confusing to you is the same that was confusing to me at first.

```
if(*str){
     getReverse(str+1);
     rev[i++] = *str;
} 
```

So line by line.

```
if(*str){ 
```

If we have not reached the null terminator.

```
 getReverse(str+1); 
```

Call the `getReverse` function on the next character of the string. It seems pretty straight forward up to here. But it also seems like it may not actually reverse anything because this is the next line

```
 rev[i++] = *str; 
```

We assign index `i` the character at the beginning of str and increment `i` but here is the tricky part. `i` may not be what you think. getReverse gets called before `i` is incremented. And `i` is static, so changes will persist between function calls. So, lets say we have a 5 letter word, let say "horse" we will end up with 6 calls on the stack to `getReverse`. The 6th will not do anything because that is where it finds the null terminator. The trick is that we will then go about resolving the calls in reverse order. First the call where str is pointing to 'e' will resolve and increment `i` because all the other ones are are still waiting for their calls to `getReverse` to return. So the last letters are actually the first ones to get added and increment `i` which is what can be confusing here.

# r - 从列表中传递 glm 预测器

> ID：11849344
> 
> 赞同：0
> 
> 时间：2012-08-07T15:36:48.930
> 
> 标签：r, plyr

我有一大套模型规格要测试，它们共享一个 dv 但有独特的 IV。在下面的例子中

```
foo <- data.frame(dv  = sample(c(0,1), 100, replace=T),
                  x1 = runif(100),
                  x2 = runif(100)) 
```

我希望第一个模型只包含 x1，第二个 x2，第三个两者，第四个它们的交互。所以我认为一个明智的方法是建立一个公式语句列表：

```
bar <- list("x1",
            "x2", 
            "x1+x2",
            "x1*x2") 
```

然后我将在包的`llply`调用中使用`plyr`它来获取模型对象的列表。

```
require(plyr)
res <- llply(bar, function(i) glm(dv ~ i, data = foo, family = binomial())) 
```

不幸的是，我被告知

```
Error in model.frame.default(formula = dv ~ i, data = foo, drop.unused.levels = TRUE):variable lengths differ (found for 'i') 
```

显然我混淆了一些基本的东西——我需要以某种方式操纵原始的 foo 列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:57:32.797

Your problem is with how you are specifying the formula, since inside the function i is a variable. This would work:

```
glm(paste("dv ~", i), data = foo, family = binomial()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:46:37.883

问题是这`dv ~ i`不是一个公式。`i`是（在匿名函数内部）只是一个符号，表示包含字符值的变量。

尝试这个：

```
bar <- list("dv~x1",
            "dv~x2", 
            "dv~x1+x2",
            "dv~x1*x2")

res <- llply(bar, function(i) glm(i, data = foo, family = binomial())) 
```

`?step`但是撇开统计问题不谈，使用类似或`?stepAIC`在**MASS**包中的东西可能更容易完成类似的任务？

# asp.net-mvc-3 - webgrid选择行MVC 3

> ID：11849346
> 
> 赞同：0
> 
> 时间：2012-08-07T15:37:02.037
> 
> 标签：asp.net-mvc-3, webgrid

我有 2 个 WebGrid。我想使用属性 SelectedRow。在第一个 WebGrid 中运行良好，但第二个不是。

这是主视图 (WebGrid 1)，这里称为包含第二个 WebGrid 的局部视图：

```
@model IEnumerable<RolesMVC3.Models.ESTUDENT>

@{
    ViewBag.Title = "Index";
    WebGrid grid = new WebGrid(Model);
}

<h2>Index</h2>
@using (Html.BeginForm())
{

@grid.GetHtml(fillEmptyRows: false,
                alternatingRowStyle: "alternate",
                headerStyle: "header",
                tableStyle: "table",
                selectedRowStyle: "selected",
                mode: WebGridPagerModes.All,
                columns: new[] {
                grid.Column("IdEstudent", header: "ID"),
                grid.Column("NameEstudent", header: "Name"),
                grid.Column("LastNameEstudeNT", header: "Last Name"),
                grid.Column( "", header: "  ",format:@<text>@item.GetSelectLink("SELECT")</text>)
  })

  if (grid.HasSelection)
  {

      Html.RenderAction("Process", "Pass", new { id = grid.SelectedRow["IdEstudent"] });
   }

} 
```

这是第二个 WebGrid (WebGrid 2) 的局部视图。WebGrid 2 包含记录，但为什么 grid2.SelectedRow ["IdConsultation"] 为 NULL？

```
**Process.cshtml:**

@model IEnumerable<RolesMVC3.Areas.Manager.Models.ConsViewModel>
@{

    WebGrid grid2 = new WebGrid(Model);
}

@grid2.GetHtml( fillEmptyRows: false,
                alternatingRowStyle: "alternate",
                headerStyle: "header",
                tableStyle : "table",
                selectedRowStyle: "selected",
                mode: WebGridPagerModes.All,
                columns: new [] {
                grid2.Column("IdConsultation", header: "Consultation"),
                grid2.Column("Idregister", header: "Register"),
                grid2.Column( "", header: "  ",format:@<text>@item.GetSelectLink("SELECT")</text>)

  })

  @if (grid2.HasSelection)
  {

     <input type="hidden" id="Consultation" name="Consultation" value="@grid2.SelectedRow["IdConsultation"]"/>
     Html.RenderAction("EstudianiatesCJ1", "Sustitucion");
  } 
```

祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T03:52:22.567

`grid2.SelectedRow ["IdConsultation"]`为 NULL，因为未选择任何内容。如果需要，您应该设置默认选择的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T17:44:54.197

我目前使用带有以下 JS 代码的 Javascript 选择：

```
 $(document).on('click', '#selectBtn', function () {
        var tr = $(this).closest('tr');
        tr.addClass('info').siblings().removeClass('info');
        /*Here you can send selection to controller */

        return false;
    }); 
```

希望这有帮助！

# excel - 如何创建制表符分隔的 CSV？

> ID：11849352
> 
> 赞同：5
> 
> 时间：2012-08-07T15:37:30.917
> 
> 标签：excel, export, csv

我需要生成从 mySql 数据库中提取的查询的制表符分隔 CSV。我正在使用 MySQL 查询浏览器将数据提取为 ordenery CSV。

有谁知道如何将普通的逗号分隔的 CSV 转换为制表符分隔。我找不到在 Excel 和 Open Office 中执行此操作的方法。

曼尼谢谢！

ps 我正在使用 Windows 7 机器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:39:37.593

Linux？

```
sed 's/,/\t/g' commaDelimited > tabDelimited 
```

视窗？

打开记事本，按TAB，选择并复制制表符空间。在记事本中打开 CSV，编辑->替换... 填写`,`第一个框并将标签粘贴到第二个框中，然后全部替换。

# jboss - 日志被写入 server.log 而不是单独的日志

> ID：11849353
> 
> 赞同：0
> 
> 时间：2012-08-07T15:37:36.347
> 
> 标签：jboss, log4j

我有一个简单的基于 SOAP 的应用程序写入单独的日志。日志是在 jboss/bin/log 下创建的，但它是空的。我将 Web 服务作为 jar 文件部署到 JBoss AS 6.1。log4j.properties 位于“src”文件夹的根目录下。

```
package abc.WebServiceSamples;

import java.io.IOException;
import java.io.InputStream;

import java.util.Properties;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.ejb.Stateless;

import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

@Stateless
@WebService(serviceName = "GreetingService")
public class greeting {
static final Logger logger = Logger.getLogger(greeting.class);

public greeting() {
    super();
}

@WebMethod
public String welcome(String s1) {
    String str = "Welcome,  " + s1;

    Properties props = new Properties();

    //load from classpath
    InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream("log4j.properties");

    // Now pass these properties to PropertyConfigurator
    try {
        props.load(inputStream);
    } catch (IOException e) {
       e.printStackTrace(System.out);
    }
    PropertyConfigurator.configure(props);

   logger.debug("Sample debug message");
   logger.info("Sample info message");
   logger.warn("Sample warn message");
   logger.error("Sample error message");
   logger.fatal("Sample fatal message");

    return str;
} 
```

}

```
log4j.properties:

log4j.rootLogger=INFO

# AdminFileAppender - used to log messages in the admin.log file.
log4j.appender.AdminFileAppender=org.apache.log4j.FileAppender
log4j.appender.AdminFileAppender.File=log/admin.log
log4j.appender.AdminFileAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.AdminFileAppender.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# ReportFileAppender - used to log messages in the report.log file.
log4j.appender.ReportFileAppender=org.apache.log4j.FileAppender
log4j.appender.ReportFileAppender.File=log/report.log
log4j.appender.ReportFileAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.ReportFileAppender.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

#log4j.logger.com.vaannila.admin=,AdminFileAppender
log4j.logger.abc.WebServiceSamples.greeting=,ReportFileAppender 
```

java运行命令：

/opt/java/bin/java -server -Xms128m -Xmx512m -XX:MaxPermSize=256m -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server .gcInterval=3600000 -Djava.net.preferIPv4Stack=true -Dprogram.name=run.sh -Dlogging.configuration=file:/opt/jboss/bin/logging.properties -Dlog4j.debug=true -Djava.library.path= /opt/jboss/bin/native/lib64 -Djava.endorsed.dirs=/opt/jboss/lib/endorsed -classpath /opt/jboss/bin/run.jar:/opt/java/lib/tools.jar org. jboss.Main -c 全部 -b 0.0.0.0

尾随服务器/所有/server.log：

2012-08-06 15:21:33,688 信息 [org.jboss.web.tomcat.service.deployers.TomcatDeployment] (HDScanner) 部署，ctxPath=/ejb_ws_greeting
2012-08-06 15:21:50,929 信息 [STDOUT] (终结器）log4j：终结名为 [OtherAppender] 的附加程序。
2012-08-06 15:21:50,930 信息 [STDOUT]（终结器）log4j：终结名为 [ReportFileAppender] 的附加程序。
2012-08-06 15:22:37,156 INFO [org.apache.cxf.transport.servlet.AbstractCXFServlet] (http-0.0.0.0-8080-1) Servlet 传输工厂已经注册
2012-08-06 15:22:37,164 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：解析 [root]，值为 [INFO]。
2012-08-06 15:22:37,165 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：级别令牌是 [INFO]。
2012-08-06 15:22:37,169 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：类别根设置为空
2012-08-06 15:22:37,169 INFO [STDOUT] (http-0.0 .0.0-8080-1) log4j：解析 [abc.WebServiceSamples.greeting]，值为 [WARN,ReportFileAppender]。
2012-08-06 15:22:37,169 信息 [STDOUT] (http-0.0.0.0-8080-1) log4j：级别令牌为 [WARN]。
2012-08-06 15:22:37,169 信息 [STDOUT] (http-0.0.0.0-8080-1) log4j：**类别 abc.WebServiceSamples.greeting 设置为空**
2012-08-06 15:22:37,169 信息 [STDOUT] (http-0.0.0.0-8080-1) log4j：解析名为“ReportFileAppender”的附加程序。
2012-08-06 15:22:37,170 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：解析“ReportFileAppender”的布局选项。
2012-08-06 15:22:37,170 信息 [STDOUT] (http-0.0.0.0-8080-1) log4j：将属性 [conversionPattern] 设置为 [%-4r [%t] %-5p %c %x - % %n]。
2012-08-06 15:22:37,171 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：“ReportFileAppender”解析结束。
2012-08-06 15:22:37,171 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：将属性 [file] 设置为 [log/report1.log]。
2012-08-06 15:22:37,171 信息 [标准输出] (http-0.0.0.0-8080-1) log4j: 调用 setFile: log/report1.log, true
2012-08-06 15:22:37,171 信息 [标准输出] (http-0.0.0.0-8080-1) log4j: setFile 结束于
2012-08-06 15:22:37,171 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j: 解析“ReportFileAppender”选项。
2012-08-06 15:22:37,171 信息 [STDOUT] (http-0.0.0.0-8080-1) log4j：处理 log4j.additivity.abc.WebServiceSamples.greeting=[null]
2012-08-06 15:22： 37,172 INFO [STDOUT] (http-0.0.0.0-8080-1) log4j：完成配置。
2012-08-06 15:22:37,172 INFO [STDOUT] (http-0.0.0.0-8080-1) 欢迎，嗨酷
2012-08-06 15:22:37,172 WARN [abc.WebServiceSamples.greeting] (http- 0.0.0.0-8080-1) 示例警告消息
2012-08-06 15:22:37,172 错误 [abc.WebServiceSamples.greeting] (http-0.0.0.0-8080-1) 示例错误消息
2012-08-06 15： 22:37,172 FATAL [abc.WebServiceSamples.greeting] (http-0.0.0.0-8080-1) 示例致命消息

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-21T13:41:56.467

可以在这里找到类似问题的解决方案：

[https://stackoverflow.com/a/26924040](https://stackoverflow.com/a/26924040)

基本上，它从您的部署单元中排除了模块 org.apache.log4j，因为 log4j 和应用程序服务器的默认日志实现之间可能存在冲突。

# c# - C# 读取块实现

> ID：11849355
> 
> 赞同：1
> 
> 时间：2012-08-07T15:37:43.990
> 
> 标签：c#, .net, streamreader

我正在编写一个解析大型、不可预测的文件的程序。这部分没有问题。我一直在使用下面的代码，循环读取 ReadLine 直到文档结束，以保持低内存占用。我的问题是`OutOfMemoryException`当一行太长时。

```
System.IO.StreamReader casereader = new System.IO.StreamReader(dumplocation);
string line;
while ((line = casereader.ReadLine()) != null)
{
    foreach (Match m in linkParser.Matches(line))
    {
        Console.Write(displaytext);
        Console.WriteLine(m.Value);
        XMLWrite.Start(m.Value, displaytext, dumplocation, line);
    }
} 
```

XMLWrite 只是将任何与我的正则表达式函数匹配的字符串写入 XML 文档。Regex 函数是一个简单的电子邮件搜索。当调用 ReadLine 并且应用程序在我正在阅读的文件中发现一个非常长的行时会出现问题（我可以看到这是因为任务管理器中的内存使用量在填充字符串“line”时不断攀升）。最终它会耗尽内存并崩溃。我想要做的是读取预定义的块（例如 8,000 个字符），然后通过相同的过程一次运行这些块。这意味着我将始终知道字符串行的长度（8,000 个字符）并且不应该接收和内存不足异常。我的逻辑看起来合乎逻辑吗！？我正在寻找实现 ReadBlock 的最佳方法，因为目前我无法让它工作。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:53:41.440

**line = buffer.ToString();** 这种说法应该受到指责。buffer 是一个 char 数组，它的 ToString() 方法只返回 System.char[]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:45:53.250

您可以尝试使用此代码

```
 using (StreamReader sr = new StreamReader(yourPath)) 
            {
                //This is an arbitrary size for this example.
                char[] c = null;

                while (sr.Peek() >= 0) 
                {
                    c = new char[5];//Read block of 5 characters
                    sr.Read(c, 0, c.Length);
                    Console.WriteLine(c); //print block
                }
            } 
```

链接：http: [//msdn.microsoft.com/en-us/library/9kstw824.aspx](http://msdn.microsoft.com/en-us/library/9kstw824.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-21T21:12:36.837

使用： line= new string(buffer); 反而

# jquery - jquery mobile data-role='list-divider'？

> ID：11849370
> 
> 赞同：0
> 
> 时间：2012-08-07T15:38:38.553
> 
> 标签：jquery, list, mobile

有没有一种简单的方法可以找出特定的分隔列表项 (li) 是否有子项？这里的诀窍是分隔线和子项实际上在 jquery mobile 中处于同一级别。

```
<ul>
        <li id='i0' data-role="list-divider">Has Items<li/>
        <li>Candidate Item 1</li>
        <li id='i1' data-role="list-divider">Has no Items<li/>
        <li id='i2' data-role="list-divider">Has no Items<li/>
        <li id='i3' data-role="list-divider">Has Items<li/>
        <li>Candidate Item 2</li>
</ul> 
```

我需要一个 jquery 表达式来告诉我一个特定的 li 是否有子项（基于分隔符角色）？

```
HasChildren($("#i0")) 
```

我已经尝试过，但如果不编写大量迭代代码就找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:04:07.700

这是一个功能：

```
function hasChildren ($li) {
  if ($li.next().is('[data-role="list-divider"]'))
    return false
  return true
} 
```

希望这可以帮助。顺便说一句，`list-divider` `<li>`s 的所有结束标记都不正确。他们应该是`</li>`，不是`<li/>`。希望这可以帮助！

# sql - 通过选择其他表中的另一列插入一列，但如何填充第二列

> ID：11849372
> 
> 赞同：19
> 
> 时间：2012-08-07T15:38:42.010
> 
> 标签：sql, sql-server-ce

我有一个有两列的表，我会通过选择其他表列数据来填充其中一列，但是我如何填充下一列，因为我不能使用 VALUE。这是代码

```
INSERT INTO Numbers(number, val) SELECT LaptopID FROM Laptop WHERE Laptop.Pid = 2 
```

如您所见，“val”列为空，我该如何填写？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-07T15:41:36.947

`NULL`如果列允许，则使用：

```
INSERT INTO Numbers(number, val)
SELECT LaptopID, NULL
FROM Laptop WHERE Laptop.Pid = 2 
```

* * *

或使用您想要的预期（硬编码）值。

如果号码：

```
INSERT INTO Numbers(number, val)
SELECT LaptopID, 2
FROM Laptop WHERE Laptop.Pid = 2 
```

或者如果文本：

```
INSERT INTO Numbers(number, val)
SELECT LaptopID, 'val'
FROM Laptop WHERE Laptop.Pid = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:43:38.560

如果没有对应的值需要进入数字；那么你可以只输入零或NULL：

像这样的东西——

```
INSERT INTO numbers (number, val)
SELECT NULL, laptopid
  FROM laptop
 WHERE laptop.pid = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:41:15.873

您可以将其添加为 SELECT 的参数。例如：

```
INSERT INTO Numbers(number, val)
    SELECT LaptopID, 'val'
    FROM Laptop
    WHERE Laptop.Pid = 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T15:03:32.773

SQLCE不支持多表更新等，所以我使用了以下方法

```
SELECT Laptop.LaptopID, Table2.val FROM Laptop, Table2 WHERE
Laptop.Pid = 2  or where laptop.pid= table2.pid 
```

[然后使用http://sqlcebulkcopy.codeplex.com/](http://sqlcebulkcopy.codeplex.com/)批量插入

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T15:51:09.077

恕我直言，您需要与其他表进行内部联接，如下所示：

```
INSERT INTO Numbers(number, val) SELECT L.LaptopID, OT.OTHER_COLUMN FROM Laptop L 
INNER JOIN OTHER_TABLE OT ON L.SOME_COLUMN = OT.ANOTHER_SOME_COLUMN 
WHERE Laptop.Pid = 2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-22T04:57:30.577

```
INSERT INTO answer(userans) VALUES(OptionA) Select username From answer WHERE username= 'Name'; 
```

我想参考同一张表中的另一列在列中添加数据。

# c# - 当计算机连接到 VPN 时，有没有办法检测计算机的真实外部 IP？

> ID：11849376
> 
> 赞同：2
> 
> 时间：2012-08-07T15:38:57.407
> 
> 标签：c#, .net, vb.net, networking, vpn

使用 .NET，如果 PC 连接到 VPN 并使用 VPN 作为互联网网关，是否有办法检索 PC 的外部 IP？我的最终目标是检测客户端 PC 是否真的在网络上，或者它们是否在远程位置。

**编辑：**在阅读了其中一些答案后，我应该更具体一点。我想我正在寻找的是一种绕过 VPN 以检查笔记本电脑真实外部 IP 的编程方式。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:01:00.257

此外，如果您在客户端，您可以在 Windows 上运行 ROUTE PRINT 并解析搜索 VPN 特定条目的输出。尝试在连接到 VPN 和直接连接时运行该命令并找出差异。除了物理适配器，您还应该看到一个 VPN 适配器和所有通过它的外部路由。如果您想绕过 VPN 以获取外部 IP，您可能会通过访问外部服务器来实现，您必须通过以太网适配器添加到该服务器的路由。但是我使用了阻止它的 VPN 客户端，这意味着所有流量都必须通过 VPN，所以这可能不适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:41:02.647

我不这么认为。但是，您可以通过检查您获得的 IP 是否已被大量使用或已知托管 VPN 服务器（您可以有一个列表）来检测客户端是否来自 VPN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:44:25.010

最简单的方法是分配特定于 VPN 的 IP 范围，然后测试内部 IP 是否在该范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T15:45:40.910

您无法直接检测到“真实”IP，但您可以通过查看特定于您的网络拓扑的因素来推断它们是否在网络上。

例如，本地网络上计算机的 ping 时间将与外部计算机大不相同。这不是 100% 完美的，但应该给你一个非常可靠的指标。

路由也可能不同（traceroute 是否为本地网络上的设备与远程设备显示不同的路由？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T15:45:44.337

如果您是服务器，例如 HTTP 服务器，则不能，因为 VPN 的主要目的之一是提供匿名性。机器通过 VPN 连接到互联网，所以除非客户端绕过 vpn 并将真实 IP 地址发送给您，否则您不能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T15:49:59.857

通常，当您连接到 vpn 时，您的子网 ip 与物理连接时的子网不同，但如果不是这种情况，您可以尝试运行 tracert 并获取响应，如果管理 vpn 的防火墙与提供网络连接的路由器不同，你明白了，只解析响应。

其他方法是使用 ip 获取适配器的名称，如果是你得到的 vpn 适配器。

# ms-access - 访问错误信息

> ID：11849384
> 
> 赞同：0
> 
> 时间：2012-08-07T15:39:21.473
> 
> 标签：ms-access

```
The changes you have requested to the table were not successful because
they would create duplicate values.... 
```

这里必须有一百个帖子处理此消息，但他们似乎都缺少的一件事是解决问题的方法。我有一个包含十几个标签/页面的表单。每个页面基本上是数据库中的另一个表。有些页面有子表单。当我收到此错误消息时，我如何知道哪个表有问题，以便进行故障排除？当从一个记录导航到另一个记录时，不是所有启用了引用完整性的表都可能更新了吗？所以问题不一定是我正在查看的表单/选项卡/页面。它可以是任何桌子。我明白消息在说什么。我知道重复值和索引是如何工作的。但我不知道究竟是什么导致了这条消息。我想查看尝试的插入/更新。我怎么得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:16:07.150

在大多数情况下，我会说在 On Current 事件中设置值不是一个好主意。不应通过在以正常方式构造的表单中导航来调用 BeforeInsert 和 BeforeUpdate。我建议您摆脱设置值的代码并使用 Default Values 属性，或者仅在用户选择添加记录时设置这些值。

# c# - Windows phone7：限制为文本框插入某些键

> ID：11849386
> 
> 赞同：2
> 
> 时间：2012-08-07T15:39:24.387
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在我的 windows phone7(silverlight) 应用程序中，我必须限制为文本框插入符号。基本上我**只**需要允许插入**字母数字**字符。

所以作为我添加的第一步

`InputScope="AlphanumericHalfWidth"`然后`InputScope="AlphanumericFullWidth"`。

但在这两种情况下，键盘都会显示并允许输入以下字符等等。`@ # $ % & % ( ) !`

`KeyDown`因此我只是在文本框事件中实现了以下逻辑

```
 if (!( (e.PlatformKeyCode >= 48 && e.PlatformKeyCode <= 57) || (e.PlatformKeyCode >= 65 && e.PlatformKeyCode <= 90) || (e.PlatformKeyCode >= 97 && e.PlatformKeyCode <= 122)))
    {
         e.Handled = true;
    } 
```

但问题是它仍然允许为文本框输入以下字符。`@ # $ % & % ( ) !`

无法弄清楚我必须如何实现这一目标。如果有人可以指导我限制除字母数字之外的所有其他字符插入文本框，我将不胜感激。谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:02:11.683

You can do a regex check to validate that (a bit cleaner than your current approach) and you'll have to disregard the last char, i.e. remove it from the text in your textbox

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:05:34.727

这是因为 PlatformKeyCode 不是您要处理的 ASCII 值。

使用 TextChanged 事件处理程序：

```
private void bla_TextChanged(object sender, TextChangedEventArgs e)
{
    bla.Text = Regex.Replace(bla.Text, @"[^\w\s]", string.Empty);
} 
```

其中 bla 是文本框名称。

# javascript - javascript setInterval 与 getJson

> ID：11849387
> 
> 赞同：0
> 
> 时间：2012-08-07T15:39:27.413
> 
> 标签：javascript, servlets

我制作了一个简单的 JS，它从我的 servlet 中检索数据。我收到的数据是两个随机数。我想每 3 秒打印一次这个值。

```
<html>
<head>
<button onclick="getP()">Try it</button>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>

    var arr = new Array();
    var url = "http://10.10.1.19:8080/examples/MyHelloWorld";

    function getPos() {
        var jqxhr = $.getJSON(url+"?getpos&callback=?", 
            function(data) {
            //alert("success x " + data.x + ", y: " + data.y);
                arr[0] = data.x;
                arr[1] = data.y;
            })
            .success(function(data) { 
            //alert("second success x " + data.x + ", y: " + data.y); 
            })
            .error(function() { alert("error"); })
            .complete(function(data) {  });
    }           

    function onUpdate(){
        pos = getPos();
        document.write("On Update: success x: " + arr[0] + ", y: " + arr[1] + "<br>");
    }

    function getP(){
        setInterval("onUpdate()", 3000);
    }
</script>
</head> 
```

一切几乎都可以正常工作，但是一开始我没有收到该值-这是输出：

```
On Update: success x: undefined, y: undefined
On Update: success x: undefined, y: undefined
On Update: success x: 84366016, y: 1675639473
On Update: success x: 87449458, y: 139664776
On Update: success x: 980514625, y: 902346893
On Update: success x: -1435971236, y: -156758443
On Update: success x: -2095036525, y: -973261813
On Update: success x: -1304285873, y: 1260988577
On Update: success x: -1056490280, y: 1080724495
On Update: success x: -51836505, y: -706315772
On Update: success x: -358732800, y: -1112197198
On Update: success x: -638049254, y: 565725784
On Update: success x: -550065549, y: -851319836
On Update: success x: -2091397055, y: -1486304337
On Update: success x: -394112078, y: 671840086
On Update: success x: -1462169807, y: -567576336
On Update: success x: 2138172836, y: 1437950295
On Update: success x: -517824901, y: 1736496095
On Update: success x: -1129327909, y: 2010537838
On Update: success x: 1331271573, y: 1572909584
On Update: success x: -316422252, y: -2019877720
On Update: success x: 532846139, y: -1840296395
On Update: success x: -355252412, y: -866851861
On Update: success x: -276365039, y: 616559691 
```

等等...

问题是 - 为什么前两行有“未定义”字样的值？在我的 Chrome 控制台中，我可以观察到两个第一个（和其余的）getJSON 请求的“200 OK”响应。也许我搞砸了一些价值观？提前谢谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:45:22.793

发生这种情况是因为您正在处理异步代码。您的 document.write 行在 Ajax 请求完成之前执行。您的代码中也存在一些问题。`getPos()`不返回任何内容，那么为什么要将其返回分配给“pos”？将请求完成后必须执行的代码放在回调中。mplungjan 已经在他的回答中重写了您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:47:57.977

这是因为 ajax 调用是异步的。您应该使用回调函数。

```
function getPos(onSuccess) {
    var jqxhr = $.getJSON(url+"?getpos&callback=?", 
        function(data) {
        //alert("success x " + data.x + ", y: " + data.y);
            arr[0] = data.x;
            arr[1] = data.y;
            onSuccess(data.x, data.y);
        })
        .success(function(data) { 
        //alert("second success x " + data.x + ", y: " + data.y); 
        })
        .error(function() { alert("error"); })
        .complete(function(data) {  });
}  

function onUpdate(){
    getPos(function(x, y) {
       document.write("On Update: success x: " + x + ", y: " + y + "<br>"); 
    )};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:48:37.140

就像是

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>

    var arr = [];
    var url = "http://10.10.1.19:8080/examples/MyHelloWorld";

    function getPos() {
        var jqxhr = $.getJSON(url+"?getpos&callback=?", 
            function(data) {
            //alert("success x " + data.x + ", y: " + data.y);
                arr[0] = data.x;
                arr[1] = data.y;
                $("#output).append("On Update: success x: " + arr[0] + ", y: " + arr[1] + "<br>");

            })
            .error(function() { alert("error"); })
    }           
    function getP() {
      setInterval(getPos, 3000);  
    }

</script>
</head>
<body>
<button onclick="getP()">Try it</button>
<div id="output"></div>
</body> 
```

# assembly - 为什么这条 CMP 指令会失败？

> ID：11849388
> 
> 赞同：0
> 
> 时间：2012-08-07T15:39:28.233
> 
> 标签：assembly, x86, opcode, cmp

我有以下代码：

```
CMP BYTE PTR [ESP+5],61    ; ESP is 0012F9AC
JNZ SHORT .... 
```

以下是记忆中的

```
Address  Data

0012F9AC 0012FA94
0012F9B0 61616161
0012F9B4 61616161 
```

现在，我理解它的方式是将 0x61 与 (0x0012F9AC + 5) 处的值进行比较，即 0x12F9B1。根据内存“转储”，地址 0x12F9B1 处的值是 0x61。那它为什么还要坚持跳呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:44:20.743

抱歉，不是汇编专家，但是 ,61 真的是 0x61 吗？您可以尝试 ,97 作为快速检查。

更新：我看到 blackbear 以同样的评论首先到达那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:18:14.030

堆栈是 DWORD 对齐的。请注意您的 2 个字符串的地址，它们是一个 DWORD 值。你所拥有的是指针，所以它当然不会匹配。

```
[esp] == return address
[esp + 4] == pointer to first string
[esp + 8] == pointer to second string 
```

尝试这个：

```
DoIt:   
    mov     eax, [esp + 4]
    cmp     byte ptr [eax], 061H
    jnz     NotA
    PrintText "a"
    jmp     Over 
NotA:
    PrintText "NOT A"
Over:
    ret 4 * 2 
```

现在我可以`inc eax`得到下一个字符。

不确定你的上下文，所以我创建了一个测试过程，并向它传递了 2 个刺。

让我们这样说：你想要盒子 - esp，还是你想要盒子里的东西[esp]？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:22:46.107

原始问题引用了这一点：

```
 Address  Data

    0012F9AC 0012FA94
    0012F9B0 61616161
    0012F9B4 61616161 
```

这清楚地表明了以下几点：

1.  这是一个内存转储，以十六进制表示。
2.  从 0012F9B0 开始的内存由 8 个小写“a” ansi 字符（每个字符 1 个字节）填充

Gunner给出的答案对于这个问题完全是虚假的。这些“a”就在那里，*而不是*指向它们的指针！

然而，正如其他人所指出的，任何体面的汇编程序，当他们看到这一行时：......

CMP BYTE PTR [ESP+5],61 ; ESP 是 0012F9AC

...他们会将上面的“,61”解释为十进制，因此比较将失败，因为 61 十进制不等于 61 十六进制。这是比较失败的真正原因。

像这样正确：

CMP BYTE PTR [ESP+5],61h ; ESP 是 0012F9AC

问题就解决了。

# c# - 如何区分 MVC 控制器中的 json null 和空 json 数组？

> ID：11849391
> 
> 赞同：3
> 
> 时间：2012-08-07T15:39:34.583
> 
> 标签：c#, asp.net-mvc, json

我的一个控制器接受不同的 json 数据来更新我的用户信息。

有些`json`是更新密码

```
{Id:1, NewPassword:'xxx'} 
```

有些`json`是更新用户的角色

```
{Id:1, Roles:['admin', 'guest']} 
```

我在控制器中设置的是检测 NewPassword 和 Roles 中是否有值。

```
if (userinfo.NewPassword != null)
{
    _repository.SetNewPassword(user.UserName, serinfo.NewPassword);                    
}
if (userinfo.Roles != null) 
{                    
    string[] roles = userinfo.Roles.ToArray();
    _repository.UpdateRolesForUser(user.UserName,roles);
} 
```

它工作正常，除了在一种情况下：当我从用户中删除所有角色时。在这种情况下，发送过来的 json 是

```
{Id: 1, Roles:[]} 
```

然后`userinfo.Roles != null`返回 a `false`，`_repository.UpdateRolesForUser(user.UserName,roles);`因此永远不会到达。

我的问题：如何检测 a`Roles:[]`和“真空”之间的区别？有类似`has`or的功能`exists`吗？

------更新----- 这个控制器是一个`ApiController`并且代码在`PUT`动作中。因此，所有类型的json都必须输入这个单一的动作。否则，我们可以对不同的操作进行 Ajax 调用会非常方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:50:34.070

我会为此创建两个控制器操作。更新密码操作和更新角色操作。这将清理您的控制器操作并简化事情。

如果您调用 Update Roles 方法并且 Roles[] 为 NullOrEmpty，则您不会认为用户没有角色，而不是猜测客户端的意图是什么。

或者，您可以编写一个自定义模型绑定器，将空数组与空值区分开来。

# android - 执行 requestFeature 时获取“必须在添加内容之前调用 requestFeature()”

> ID：11849394
> 
> 赞同：0
> 
> 时间：2012-08-07T15:39:38.420
> 
> 标签：android, android-asynctask, android-activity

出于某种原因，我收到异常“android.util.AndroidRuntimeException：在添加内容之前必须调用 requestFeature()”

在以下命令上：

```
 useTitleFeature = window.requestFeature(Window.FEATURE_CUSTOM_TITLE); 
```

有点没有任何意义。

再加上这取决于我从哪里调用它。如果我从 onCreate 调用包含它的方法，那么就可以了。但是，如果我从 AsyncTask 的“onPostExecute”调用该方法，则它不起作用。如果我跳过该命令，它仍然可以让我执行 setContent。它不喜欢的只是这个命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:43:36.630

您必须将该命令放在`setContentView(R.layout.main);`.

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:42:45.353

只需在设置内容视图之前调用此行（调用`setContentView`方法）

# ruby-on-rails-3 - 为单选按钮分配多个属性

> ID：11849399
> 
> 赞同：0
> 
> 时间：2012-08-07T15:40:10.947
> 
> 标签：ruby-on-rails-3

...嘿伙计们，这是有问题的视图代码...

```
<td>
  <%= f.radio_button :score, '4' %>
</td> 
```

...我的模型有... attr_accessible :rating_id, :score, :student_id

如您所见，我正在为单选按钮分配分数。我在这个模型上还有一个“rating_id”属性，它也想分配给这个单选按钮。所以理想情况下，我想要类似...

```
 <%= f.radio_button :score => '4', :rating_id => '234' %> 
```

...当然这不起作用，但你明白了。关于我如何做到这一点的任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:14:46.647

所以我最终通过这样做来解决这个问题......

```
 <td>
   <%= f.radio_button :score, '4' %>
   <%= f.hidden_field :rating_id, :value => @competencys[index].ratings[0].id %>
   <%= @competencys[index].ratings[0].description %>
 </td> 
```

对我来说，关键是找到“动态”设置隐藏字段值的语法，而不是在我的控制器中设置它。

# java - 在 servlet 中使用 executeQuery 执行 SQL 语句

> ID：11849402
> 
> 赞同：0
> 
> 时间：2012-08-07T15:40:14.073
> 
> 标签：java, sql, servlets, prepared-statement, executequery

我有 servlet -

```
@WebServlet("/servlet123")
public class servlet123 extends HttpServlet {

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
                String usrID = "111" ; 
            String strAllAccocuntsSQL = "SELECT * (FROM account, account_person) "
                    + "WHERE (account.accountNum = account_person.accountNum"
                    + "AND account_person.personID=? )ORDER BY account.accountNum;";
            PreparedStatement prepareSQL = connection
                    .prepareStatement(strAllAccocuntsSQL);
                        prepareSQL.setString(1, usrID);   
            ResultSet resultWithAccounts = prepareSQL.executeQuery();
    }

} 
```

我检查了一切`connection`，一切正常。

当它到达该行时`ResultSet resultWithAccounts = prepareSQL.executeQuery();`，它会抛出异常 -

```
 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'account_person.personID='111' )ORDER BY account.accountNum' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2318) 
```

上表2的SQL代码是——

```
CREATE TABLE  `account_person` (
 `accountNum` INT( 11 ) NOT NULL ,
 `personID` TEXT NOT NULL
) 
```

和

```
CREATE TABLE  `account` (
 `accountNum` INT( 11 ) NOT NULL ,
 `dateCreated` DATE NOT NULL ,
 `accountName` TEXT,
 `description` TEXT,
 `statusAccount` TEXT,
 `sumOfMoney` INT( 11 ) NOT NULL DEFAULT  '0'
) 
```

中的 SQL 语句有什么问题`prepareSQL`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:43:31.517

我猜测：

```
+ "WHERE (account.accountNum = account_person.accountNum"
+ "AND account_person.personID=? )ORDER BY account.account 
```

表示您正在连接`accountNum`并且`AND`没有中间空间。这与错误消息有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:44:17.273

尝试删除 pharentesis 并添加一个空格：

```
@WebServlet("/servlet123")
public class servlet123 extends HttpServlet {

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
                String usrID = "111" ; 
            String strAllAccocuntsSQL = "SELECT * FROM account, account_person "
                    + "WHERE account.accountNum = account_person.accountNum "
                    + "AND account_person.personID=? ORDER BY account.accountNum;";
            PreparedStatement prepareSQL = connection
                    .prepareStatement(strAllAccocuntsSQL);
                        prepareSQL.setString(1, usrID);   
            ResultSet resultWithAccounts = prepareSQL.executeQuery();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:48:05.123

SQL 字符串中有错误。您应该删除 FROM 部分周围的括号

```
String strAllAccocuntsSQL = "SELECT * FROM account, account_person "
                    + "WHERE (account.accountNum = account_person.accountNum"
                    + "AND account_person.personID=? )ORDER BY account.accountNum;"; 
```

我也会取消 ; 最后，如果它还不起作用

# postgresql - 格式化 sql 查询的输出

> ID：11849406
> 
> 赞同：1
> 
> 时间：2012-08-07T15:40:29.820
> 
> 标签：postgresql, sqlplus

我正在尝试运行一个 sql 查询，它的输出以前是在 sqlplus 中格式化的，但现在我正在尝试在 Postgres 中格式化它，但我不知道该怎么做。这是以前在 sql plus 中的格式化方式，但我已经注释掉了格式化语句

```
/** Contains sql script used to generate the Earth orientation data verification report**/

/*set pagesize 66 
set linesize 75

ttitle center EarthOrientation Parameters(U) 
2                                                  

column year heading "Year" format 9999
column month heading "Month" format 99
column day heading "Day" format 99
column mjd heading "MJD" format 99999
column xaxisrotation heading "x(arcsec)" format 99.9999
column yaxisrotation heading "y(arcsec)" format 99.9999
column ut1utcdelta heading "UT1-UTC(sec) format 9.99999*/

\o /h/USERS/local/Palito/results.log   

SELECT *  FROM TB_EARTHORIENTATIONPARAMETER order by earthorientationparameterid; 

\o 
```

我在网上看过，但我能找到的只是设置标题、列和其他东西的语法，但我能找到的只有 SQLPlus 语法。如果有人知道这一点，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:06:22.683

> 现在我正在尝试在 Postgres 中对其进行格式化

Postgres（实际上是 PostgresSQL）是服务器，它不是应用程序。您肯定是指[psql](http://www.postgresql.org/docs/9.1/static/tutorial-accessdb.html)，这是默认的终端客户端程序。

**psql**不为查询的每一列提供这样的格式化功能。它只支持默认格式，以及“扩展表格格式模式”（`\x`）（每个字段一行，以及 HTML 输出格式（请参阅[docs](http://www.postgresql.org/docs/9.1/static/app-psql.html)）。

当然，您可以使用几个[to_char()](http://www.postgresql.org/docs/9.1/static/functions-formatting.html)格式化函数来格式化 SELECT 本身中的每个字段。

# javascript - Javascript - 在函数中调用函数？

> ID：11849409
> 
> 赞同：-2
> 
> 时间：2012-08-07T15:40:36.047
> 
> 标签：javascript, forms, function, onchange, breezingforms

> **可能重复：**
> [Breezingforms 框架内的 Javascript “onchange”](https://stackoverflow.com/questions/11848393/javascript-onchange-inside-breezingforms-framework)

在下面的函数中，我如何调用这个函数： `logo_prodImgBySel('theImg',this.selectedIndex)`

```
function ff_bfQuickMode1482721_action(element, action)
{
switch (action) {
    case 'change':     WHAT CODE SHOULD GO HERE???
  break;
    default:;
} // switch
} // ff_bfQuickMode1482721_action 
```

我不确定此代码块中调用此函数的位置（在文档前面已定义。我正在根据 Joomla 表单构建器的要求工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:45:46.333

```
function ff_bfQuickMode1482721_action(element, action)
{
switch (action) {
    case 'change': logo_prodImgBySel('theImg',this.selectedIndex);
  break;
    default:;
} // switch
} // ff_bfQuickMode1482721_action 
```

# javascript - javascript: window.open 抛出无效的 url 错误

> ID：11849411
> 
> 赞同：1
> 
> 时间：2012-08-07T15:40:44.743
> 
> 标签：javascript, url, window.open

我正在尝试创建一个在新窗口中打开 .jpg 和 .pdf 文件的 javascript，并且在单击文件链接时我不断收到一个非常烦人的错误。从挪威翻译，弹出错误说：

“**页面（站点？）的 URL 地址无效：** ”。

当我在该错误消息上单击“确定”时，新的 pdf/jpg 窗口将按预期打开。

如何摆脱完全冗余的错误消息？

```
<script language="javascript" type="text/javascript">
    _spBodyOnLoadFunctionNames.push("OpenPDFInNewWindow()"); 

    function OpenPDFInNewWindow()
    {      
      var aAllLinks = document.links;     
      for(var i=0;i<aAllLinks.length;i++)
      {
         var oA = aAllLinks[i];
         var sHREF = oA.href.toLowerCase();

         if(sHREF.indexOf(".jpg") > 0 || sHREF.indexOf(".pdf") > 0)
            oA.href="javascript:window.open('"+oA.href+"','test','width=300').focus();";
      }
    }
    </script> 
```

该脚本会检查页面中包含相关文件扩展名的 a 标记，然后在其 href 属性中添加 window.open 命令。

我尝试过 IE9 和 Chrome，两种浏览器都有相同的期望。重要的是，这在 IE 中有效。我在 window.open 调用中尝试了许多不同的参数组合。oA.href 调用返回一个这样的 url：

```
http://<server>/arbeidsrom/ET24130/dokumenter/image.jpg 
```

我是javascripts的菜鸟，所以在回复时请记住这一点:)

（代码片段来自 Randy Williams @ [http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=18](http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=18)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:46:51.507

这是因为大多数浏览器没有显示除基于 Web 的文件格式之外的本机功能。特别是`.pdf`。您可能`.pdf`为 IE 而不是为其他浏览器安装了插件。我建议而不是你在做什么，打开一个新页面，其中***包含***一个`.pdf`，而不是***一个***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:06:41.093

试试这个

```
if(sHREF.indexOf(".jpg") !=-1 || sHREF.indexOf(".pdf") !=-1) {
  oA.onclick=function() {
    var w=window.open(this.href,'test','width=300'); 
    if(w) {
      w.focus(); 
      return false
    }; 
    return true;
  }
} 
```

# html - 加载和调整外部图像大小时，浏览器是否会加载完整宽度的外部图像然后重新调整它们的大小？

> ID：11849414
> 
> 赞同：0
> 
> 时间：2012-08-07T15:40:51.173
> 
> 标签：html, browser

如果我加载 320x240 像素的外部图像并使用 CSS 重新调整它们的大小，浏览器会先加载完整的图像然后重新调整它们的大小？

所以通过调整大小我只是给服务器增加了更多的负载？

我应该在不调整大小的情况下显示它们吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:42:15.003

浏览器下载原始文件，服务器上没有做额外的处理。调整大小由浏览器完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:07:54.250

如前所述，是的，浏览器会下载原始文件，然后调整其大小。请注意，某些浏览器不擅长调整图像大小，尤其是在原始图像比实际输出大得多的情况下。如果缩小图片，某些浏览器（想到 Firefox）会创建相当块状的版本。

# php - 变量内的数组

> ID：11849419
> 
> 赞同：0
> 
> 时间：2012-08-07T15:41:04.783
> 
> 标签：php, mysql, arrays

我正在尝试生成一个变量使用的值数组，但我无法让它工作。我不想“看到”结果。相反，我希望变量“使用”结果。这是我的代码：

```
$rss_results = mysql_query("SELECT feed_id, feed_url, feed_title, feed_order, feed_page_id FROM user_feeds  WHERE ((feed_owner = '" . $_SESSION['UserId'] . "'));");

    if ($rss_results) {

    while($row = mysql_fetch_array($rss_results))
    {
    $feed->set_feed_url(print "'".$row[feed_url]."',");

    }

    }
    else {
      // something went wrong.
      echo mysql_error(); 
```

问题出在这条线上：

```
$feed->set_feed_url(print "'".$row[feed_url]."',"); 
```

**编辑** 1) 是的。我知道 print 不属于那里。在之前进行了一些故障排除后，我忘记将其删除。

2) 我正在尝试将此代码与一个名为 SimplePie 的 RSS 解析器一起使用。

3）每个人似乎都同意以下代码有效

```
 $feed->set_feed_url(array("'" . $row['feed_url'] . "',")); 
```

...但事实并非如此。如果我没有访问我的数据库，代码看起来像这样......

```
$feed->set_feed_url(array('http://www.tmz.com/rss.xml', 'feed://rss.cbc.ca/lineup/topstories.xml')); 
```

...效果很好。我正在尝试使用存储在 mysql 数据库中的值来重现这种效果。如果代码有效，它将有效。所以“应该”工作的代码一定有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:44:48.613

访问关联数组时，必须将索引名称放在引号内：

代替

```
$row[feed_url] 
```

利用

```
$row['feed_url'] 
```

还，

```
$feed->set_feed_url(print "'".$row[feed_url]."',"); 
```

没有意义。如果要将值传递给方法，请传递变量，不要将其打印到屏幕上。

```
$feed->set_feed_url("'" . $row['feed_url'] . "',"); 
```

如果您不希望将传递给的字符串`$feed->set_feed_url()`包含在`'`s 中，只需像常规变量一样传递它：

```
$feed->set_feed_url($row['feed_url']); 
```

**更新：**

既然你提到你试图传递一个数组，你必须先初始化它，然后填充它，然后将它发送到方法：

```
$urls = array();
while ($row = mysql_fetch_array($rss_results)) {
    $urls[] = $row['feed_url'];
}
$feed->set_feed_url($urls); 
```

这样做：

```
$feed->set_feed_url(array("'" . $row['feed_url'] . "',")); 
```

只需将以下内容传递给`$feed->set_feed_url()`：

```
array(
    [0] => String() "'[value of $row['feed_url'] ]',"
) 
```

如果您想`$feed->set_feed_url()`为循环的每次迭代调用一次，这将正常工作：

```
while($row = mysql_fetch_array($rss_results)) {
    $feed->set_feed_url(array($row['feed_url']));
} 
```

**请注意：**您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

# jquery - 与 JQuery 构造函数有什么关系？另外，我对 DOM 树感到困惑。而且，看起来我不知道 jQuery 对象是什么

> ID：11849420
> 
> 赞同：3
> 
> 时间：2012-08-07T15:41:04.750
> 
> 标签：jquery, dom

假设这甚至是正确的术语，与他们有什么关系？

```
jQuery("#removeUser", jQuery(myform)).click(
    function()
    {
        jQuery(this).parent().parent().remove(); 
    }); 
```

因此，在上面的代码中，构造函数中似乎需要 2 个参数。第一个参数采用名为“removeUser”的 HTML 元素的 id，另一个实际上是 var，它是整个 HTML 元素及其嵌套子元素集合的字符串。

基本上，上面的代码所做的是当有人点击“removeUser”按钮时删除一个表单。我复制了原始代码并对其进行了修改，尽管它（在某种程度上）有效，但我并不完全理解这里发生了什么。

当我尝试仅使用“#removeUser”元素创建新的 jQuery 实例时，我没有得到我想要的结果。它不仅删除了一个“用户”，还删除了所有这些“用户”。所以，这里发生了一些我完全不明白的事情。

那么，在函数内部，“ `this`”是谁？它是 removeUser 元素还是字符串？我很混乱！

=============

# 更新：

因此，根据 Cory 和 Torsten Walter 的评论，我可以给 jQuery“构造函数”提供如下内容：

```
 jQuery("#removeUser", "<tr name=parent1><td>User: </td><td name=parent2><button id=\"removeUser\">remove</button></td></tr>").click(
    function()
    {
        jQuery(this).parent().parent().remove(); 
    }
); 
```

或者，以下，对于那些不喜欢使用“jQuery”的人：

```
 $("#removeUser", "<tr name=parent1><td>User: </td><td name=parent2><button id=\"removeUser\">remove</button></td></tr>").click(
    function()
    {
        $(this).parent().parent().remove(); 
    }
); 
```

另外，我注意到有些人不喜欢我使用非唯一 ID，所以我可以有类似的东西：

```
 $("button", "<tr name=parent1><td>User: </td><td name=parent2><button>remove</button></td></tr>").click(
    function()
    {
        $(this).parent().parent().remove(); 
    }
); 
```

因为，无论如何，每个“用户”只有一个按钮。

另外，有些人建议我改用一个类。除了不使用第二个参数的建议外，它不会给我想要的结果。

```
 $(".removeUser", "<tr name=parent1><td>User: </td><td name=parent2><button class=\"removeUser\">remove</button></td></tr>").click(
    function()
    {
        $(this).parent().parent().remove(); 
    }
); 
```

以上将删除*所有*“用户”，这不是我想要的。

=============

# 更新：

另外，我对“parent1”和“parent2”的看法是错误的，对吧？它实际上根本没有访问 parent1 是吗？

我对 myform 的实际拥有如下：

```
var myform = "<table>"+ //<---parent 1, right?
                    "  <tr>" + //<--parent 2?
                    "     <td>User " + jQuerycountForms + ":</td>" + 
                    "     <td>UserID:&nbsp;</td>" + 
                    "     <td><input type='text' name='UserID["+jQuerycountForms+"]'></td>" + 
                    "     <td>Roles:&nbsp;</td>" + 
                    "     <td><textarea name='Roles["+jQuerycountForms+"]'></textarea></td>" + 
                    "     <td><button id=\"removeUser\" onclick=\"jQuerycountForms--;\">remove</button></td>" + //Or, is that "td" parent2?
                    "  </tr><br/>"+
                    "</table>"; 
```

在我的 HTML 中，我有如下内容：

```
<div id="container">
            <table>
                <tr>
        <td><button id="addUser" type="button">add</button></td>
                </tr>
            </table>
        </div> 
```

“addUser”按钮的作用是添加另一个用户。有一些 jQuery javascript 执行添加附加到此元素的新用户。

当我试图摆脱变量的外部`table`元素`myform`时，每当我单击删除的用户时都会遇到问题。最终发生的是我最终删除了整个第一张桌子。

因此，以下值为`myform`：

```
 var myform = "  <tr>" + //Now the "table" element shown earlier in the HTML is parent1!
                    "     <td>User " + jQuerycountForms + ":</td>" + 
                    "     <td>UserID:&nbsp;</td>" + 
                    "     <td><input type='text' name='UserID["+jQuerycountForms+"]'></td>" + 
                    "     <td>Roles:&nbsp;</td>" + 
                    "     <td><textarea name='Roles["+jQuerycountForms+"]'></textarea></td>" + 
                    "     <td><button id=\"removeUser\" onclick=\"jQuerycountForms--;\">remove</button></td>" + 
                    "  </tr><br/>"; 
```

将导致不再有`add`按钮。

那么，`removeUser`巴顿的父母是谁？哪一个是最亲近的父母，谁是其父母？

由于它是 Javascript，因此我实际上无法看到对 HTML 进行了哪些更改。如果这是 Java 呈现的，则更改将反映在 HTML 源中。但是，有了这个，就像我留下了我的想象力来解决问题。而且，如果您对 Javascript 不太熟悉，那么可能很难看到发生了什么。

=============

# 更新：

因此，我对单击一个用户后 HTML 可能是什么样子的猜测是：

```
 <div id="container">
            <table>
        <tr>
        <td><button id="addUser" type="button">add</button></td>
        <table> <!-- Well, I'm definitely the grand parent. -->
            <tr> <!-- But, am I anyone's parent? -->
                <td>User 0:</td>
                <td>UserID:&nbsp;</td>
                <td><input type='text' name='UserID[0]'></td>
                <td>Roles:&nbsp;</td>
                <td><textarea name='Roles[0]'></textarea></td>
                <td> <!-- Or, am I the daddy? -->
                    <button id=removeUser onclick="jQuerycountForms--;">remove</button>
                </td>
            </tr><br/>
                    </table>
                </tr>
            </table>
        </div> 
```

**所以，基本上，我的问题的第二部分是，“谁是第一个访问的父母（parent2）？” 是元素`td`还是`tr`元素？为什么它不认为那`tr`是 的父母`td`？看起来确实如此。**

=============

# 更新：

这是对 Cory 的 jsFiddle 链接的回应（谢谢，顺便说一句，这似乎是一个有用的工具）。以下代码显示了结构

```
var button = $('.removeUser');
alert("Me = " + button[0].tagName); //button
alert("Parent = " + button.parent()[0].tagName); // td
alert("Grand-Parent = " + button.parent().parent()[0].tagName); // tr
alert("Great Grand-Parent = " + button.parent().parent().parent()[0].tagName); // tbody
alert("Great, Great Grand-Parent = " + button.parent().parent().parent().parent()[0].tagName); // table 
```

所以，让我直截了当。如果这是一种真正的 OOP 语言，那么我们将有如下内容：

```
Jquery button = new Jquery('.removeUser'); 
```

这个`jQuery`“类”实际上是某种集合，但是，显然，它只有一个成员？单个成员具有诸如“tagName”之类的属性以及其他属性。

然而，jQuery 类本身具有允许用户导航 DOM 树（相对于该树的根）的方法。

我发现如果我有两个“removeUser”按钮，那么我也可以对按钮 [1] 使用数组表示法。但是，当然，你不能有一个以上的父母，所以任何东西`parent()[1]`都行不通。

通常，我会假设 jQuery 拥有“tagName”属性，但看起来情况并非如此。相反，该属性属于该数组的成员。无论如何，我如何查找这些数组成员拥有的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:23:44.850

`$(foo, bar)`或多或少只是`$(bar).find(foo)`. `$(bar)`根据 的类型，它本身具有三种完全不同的含义`bar`：

*   if`bar`是一个函数，一旦加载文档就运行它；
*   如果它是一个带有 HTML 标记的字符串，则从其中创建一个 DOM 片段（基本上是网页的一部分，但不附加到当前页面，只是漂浮在空中）
*   否则将其视为选择器并尝试在当前页面上找到匹配的元素。

所以要做`$("#removeUser", "<tr>...</tr>").click(...)`的是创建一个`tr`具有给定内容的新元素，从其中选择具有正确 id 的元素，并为其附加一个点击处理程序。除非您稍后将该元素附加到当前页面，否则这将没有任何效果，因为您正在对不属于页面的分离元素执行人员操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:44:36.730

`this`里面`function() { }`是被点击的元素。由于您已将 click 事件绑定到 ID 为“removeUser”的元素，因此该元素`this`将在 click 事件处理程序中引用。`jQuery(this).parent().parent()`可能会抓取表单元素，但这取决于表单的构建方式以及“removeUser”元素在表单中的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:45:26.793

在我解释代码之前，只有几件事：除非您处于无冲突模式，否则您可以使用`$`代替来缩短您的代码。`jQuery`

```
var myform = '#something'; // not sure what this should be
$("#removeUser", $(myform)).click(function() {
    $(this).parent().parent().remove(); 
}); 
```

*我看到的是这样的：*

在`$(myform)`元素内，搜索点击事件并将其绑定到该`#removeUser`元素。点击事件函数内部是ID为的`this`DOM元素`#removeUser`（不是jQuery对象）。您正在询问其父级的父级并尝试将其从 DOM 中删除。

*jQuery 函数中*不需要两个参数。您可以提供一秒钟将上下文限制在 jQuery 应该尝试应用您给它的选择器的位置。但是，由于页面上不应有多个`removeUser`ID，您可以删除第二个参数，并通过简化表单删除代码来清理它：

```
$("#removeUser").click(function() {
    $(this).parents('form:first').remove();
    // or $(this).closest('form').remove(); as others have suggested
}); 
```

**更新**：

鉴于这里真正的“用户”容器是一个表格行 ( `<tr>`)，我将如何更改上面的示例：

首先，`myform`稍微改变你的代码，让你的按钮和表格行使用类名（不是为了 CSS，而只是为了让 jQuery 能够使用 ID 以外的东西来选择它们）：

```
var myform = "<table>" + 
                "  <tr class=\"userRow\">" + 
                "     <td>User " + jQuerycountForms + ":</td>" + 
                "     <td>UserID:&nbsp;</td>" + 
                "     <td><input type='text' name='UserID["+jQuerycountForms+"]'></td>" + 
                "     <td>Roles:&nbsp;</td>" + 
                "     <td><textarea name='Roles["+jQuerycountForms+"]'></textarea></td>" + 
                "     <td><button class=\"removeUser\" onclick=\"jQuerycountForms--;\">remove</button></td>" + 
                "  </tr><br/>"+
                "</table>"; 
```

关于父结构：相对于`<button>`，它的周围`<td>`是第*一个*父结构。的`<td>`父级是`<tr>`（第二个父级），而`<tr>`的父级是`<table>`（第三个父级）。正如我所说，我将上面的内容更改为使用类名，因此您可以忘记父结构。让 jQuery 为您挖掘层次结构。

您将用于绑定“删除用户”事件的 JS 更改为：

```
$('.removeUser').click(function() { // ID selector changed to class selector
    $(this).parents('tr.userRow').remove();
}); 
```

从技术上讲，您可能会忘记将“userRow”类添加到`<tr>`并使用：

```
$('.removeUser').click(function() { // ID selector changed to class selector
    $(this).closest('tr').remove();
}); 
```

短而甜。无需`.parent()`猜测，无需担心重复 ID，并且易于维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T15:46:53.360

让我们先清理你的代码：

```
$("#removeUser").click(function(){
    $(this).closest('form').remove(); 
}); 
```

您不需要 jQuery 选择器的第二个参数，`this`它将引用您传递给它的对象，在本例中是 html 元素`#removeUser`。

`closest()`将搜索 DOM，直到找到你给它的第一个元素。我只是假设您在这里寻找表单的第一个实例。

我不确定是否是这种情况，但听起来您在页面上显示的每个用户都有一个表单，并且在每个表单内都有一个用于删除它们的按钮。如果是这种情况，那么您应该使用类`removeUser`而不是 Id。然后我的代码仍然可以正常工作，因为`this`它将是您单击的按钮，它会从该按钮搜索，直到找到该按钮所在的表单并仅删除该表单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T15:49:04.983

你理所当然地感到困惑。该代码实际上没有任何意义。

ID 必须是唯一的，因此没有理由将删除用户过滤到特定表单，因为它不起作用，它只会选择页面上具有给定 ID 的第一个元素。

下面的代码将执行与您的代码相同的操作。

```
jQuery("#removeUser").click(function(){
    jQuery(this).parent().parent().remove(); 
}); 
```

该`.parent().parent()`部分可能应该是`jQuery(this).closest("form");`或`jQuery(this).closest("tr");`等。

如果您确实有重复的 ID，只需替换`id="removeUser"`为`class="removeUser"`然后在我提供的代码段中使用`.removeUser`而不是。`#removeUser`

# c++ - 如何允许并正确加载 .so 文件的修改？

> ID：11849424
> 
> 赞同：1
> 
> 时间：2012-08-07T15:41:18.043
> 
> 标签：c++, linux, shared-libraries, ld

我在我的程序中使用 .so 作为一种插件，以允许应用用户定义的逻辑。该程序的多个实例将运行，每个实例都有自己特定的 .so 定义该程序实例的用户特定逻辑。理想情况下，该程序将无限期运行，但有时需要更改某些逻辑，因此我有一个聪明的想法，即检测 .so 何时被修改并上传新的 .so。这样就可以在不终止/重新启动程序的情况下更改特定的实现逻辑（这可能导致数据丢失）。

我有 loadPlugin 函数工作，我正在使用 inotify 来检测 .so 何时更改并再次加载它。这没有按计划进行。我曾假设所有 .so 都加载到内存中，并且从那时起完全独立于物理文件，但显然情况并非如此。如果我在没有警告的情况下更改 .so 文件，我的程序会因段错误而崩溃。如果我 rm .so 然后复制一个新版本，程序不会崩溃 - 我被告知它知道在删除插件时将其保留在内存中。但是，当我的 loadPlugin 方法开始尝试加载新修改的 .so 时，它只会返回对*旧的引用*.so 方法而不是新方法。我假设它默认使用已加载到内存中的版本，因为它假设它们是相同的，但我特别希望它加载新版本！由于只有一个应用程序会使用该 .so，而且我确信在我加载新的 .so 时它不会调用 .so 的方法，因此覆盖 .so 的定义是安全的如果我知道如何做到这一点。

我想知道解决这些问题的最佳方法是什么？我的第一个想法是在加载之前将 .so 文件的一个版本复制到另一个位置，这样即使修改了原始文件，我的程序也不会崩溃，但这并不能解决主要问题。我如何告诉 inotify 忽略它在内存中的任何缓存版本的 .so 文件并加载新版本的插件？我是否需要在两个单独的文件（plugin1.so、plugin2.so）之间交替，以便在 plugin1.so 运行时我可以修改 plugin2.so 并加载它，从而释放 plugin1.so 以进行更改？这是否可行，或者我是否会在阅读一次后将两个版本都“缓存”，并且在第三次更改插件时无法加载插件？

附言。我相信你猜到了，但我在 linux 上使用 C++（特别是 redhat 或 centos）。我可以在最终的运行时环境中定义我的操作系统，所以虽然可移植性总是很好，但如果唯一的方法不可移植，我就不需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:49:44.303

您是否尝试在更新插件时为插件设置不同的 SONAME？SONAME 是区分同一库的不同版本的区别，这几乎就是您所要求的。

如果您查看机器上的 /usr/lib 或 /lib 并想知道是谁定义了在那里创建的符号链接，那是各个库的 SONAMES ;-)

`man ld`或者`man gcc`应该告诉您如何在链接时指定 SONAME。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:19:36.287

正如 Dani 指出的那样，问题出在我的 dlclose 电话中。我传入了错误的标题并且没有正确关闭 DL。一旦我修复了我可以正确加载新方法的问题。对文件的更改仍然会导致程序终止，但我知道如果需要我可以解决这个问题。

# sql - 从我的服务器中的所有数据库中读取所有数据

> ID：11849425
> 
> 赞同：1
> 
> 时间：2012-08-07T15:41:18.730
> 
> 标签：sql, sql-server-2000

我正在使用 sql server 2000，我需要从服务器中的所有数据库中读取所有数据，因为那时我将使用一些数据，我该如何进行此查询？我已经尝试过这段代码，但不能按我的意愿工作。

```
ALTER  PROCEDURE TMP_INGRESO_MASIVO_DAT_CLIENTES AS

declare @Fila as int
declare @Script_Dinamico as varchar(8000)
declare @Script_Dinamico1 as varchar(8000)
declare @Nro_Registros as int

Select Distinct  cod_empresa,Nombre_Base Into #Tmp_Bases1 From Estadistica_Cobranza.Dbo.Sis_Conexion_pagos Where Cod_Estado = 1 and Proc_Automaticos= 1--capturo nombre BD
Select Distinct  Identity(Int,1,1) As Fila, cod_empresa , Nombre_Base As Name  Into #Tmp_Bases From #Tmp_Bases1

    Drop table #Tmp_Bases1
    Select @Fila = 1
    Select @Script_Dinamico = ''
    Select @Script_Dinamico1 = ''
    Select @Nro_Registros  =  (Select Count (*) From  #Tmp_Bases ) + 1--cantidad de filas  +1

    While @Fila < = @Nro_Registros 
Begin
    Print(@Script_Dinamico)

Select @Script_Dinamico = 'INSERT INTO buc.dbo.tmp_DAT_CLIENTES '
Select @Script_Dinamico = @Script_Dinamico +'(COD_EMPRESA,'
Select @Script_Dinamico = @Script_Dinamico +'COD_SUCURSALEMPRESA,'
Select @Script_Dinamico = @Script_Dinamico +'RUT_CLIENTE,'
Select @Script_Dinamico = @Script_Dinamico +'RAZON_SOCIAL, '
Select @Script_Dinamico = @Script_Dinamico +'FECHA_CARGA,'
Select @Script_Dinamico = @Script_Dinamico +'FECHA_MODIFICACION'
Select @Script_Dinamico = @Script_Dinamico +')'
Select @Script_Dinamico = @Script_Dinamico +'Select '
Select @Script_Dinamico = @Script_Dinamico +'COD_EMPRESA, '
Select @Script_Dinamico = @Script_Dinamico +'COD_SUCURSALEMPRESA, '
Select @Script_Dinamico = @Script_Dinamico +'RUT_CLIENTE, '
Select @Script_Dinamico = @Script_Dinamico +'RAZON_SOCIAL, '
Select @Script_Dinamico = @Script_Dinamico +'FECHA_CARGA, '
Select @Script_Dinamico = @Script_Dinamico +'FECHA_MODIFICACION'
Select @Script_Dinamico = @Script_Dinamico + ' from ' + (Select Name  From #tmp_bases  Where Fila = @Fila) +'.Dbo.DAT_CLIENTES '
Select @Script_Dinamico = @Script_Dinamico  + 'Where ' + (Select Name  From #tmp_bases  Where Fila = @Fila) +'.Dbo.DAT_CLIENTES.cod_empresa =  '+ convert(varchar,(Select cod_empresa  From #tmp_bases  Where Fila = @Fila))
Select @Script_Dinamico = @Script_Dinamico  +'and '+ (Select Name  From #tmp_bases  Where Fila = @Fila) +'.Dbo.DAT_CLIENTES.rut_cliente not in (select RUT_CLIENTE from tmp_dat_clientes'
Select @Script_Dinamico = @Script_Dinamico+' where '+ (Select Name  From #tmp_bases  Where Fila = @Fila) +'.Dbo.DAT_CLIENTES.rut_cliente = buc.dbo.tmp_DAT_CLIENTES.RUT_CLIENTE )'

            Print ( @Script_Dinamico)
            Exec (@Script_Dinamico )
            Select  @Fila = @Fila +1
            Select @Script_Dinamico = ''
            Select @Script_Dinamico1 = ''

End
Drop Table #Tmp_Bases

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:58:27.013

我假设您`DAT_CLIENTES`在许多数据库中都有相同的表 ( )，并且如果数据库名称在`Estadistica_Cobranza.Dbo.Sis_Conexion_pagos.Nombre_Base`.

虽然肯定有很多方法可以做到这一点，但您似乎已经使用 while 循环、临时表和动态 SQL 将它们组合在一起（所有这些方法通常都会对性能和维护产生影响）。然而，抛开编码方法和风格不谈，我最关心的是这一行：

```
Select @Script_Dinamico = @Script_Dinamico+' where '+ (Select Name  From #tmp_bases  Where Fila = @Fila) +'.Dbo.DAT_CLIENTES.rut_cliente = buc.dbo.tmp_DAT_CLIENTES.RUT_CLIENTE )' 
```

动态 where 子句中的`=`in 最终会尝试将一个 DB 中的列的值与另一个 DB 中的另一整列进行比较。也许这应该是一个`in`或其他一些运算符，可以将一个值与一组值进行比较，而不是比较两个单个值。

您是否收到任何错误消息？

# html - 如何将值传递给 LESS 中的变量？

> ID：11849426
> 
> 赞同：0
> 
> 时间：2012-08-07T15:41:21.150
> 
> 标签：html, css, less, mixins

我想将值传递给 LESS 中的变量。我怎样才能做到这一点？

这是一些示例代码。我想将值传递`.className()`给变量`@varValue`。

```
@defaultWidth: 10px;
.className(@varValue: 1) {
    width: (@defaultWidth * @varValue);
    background: green;
}

.sample {

    background: blue;
    height: 10px;

    .filled_1     { .className(1); }
    .filled_2     { .className(2); }
    .filled_3     { .className(3); }
} 
```

示例 HTML：

```
<div class="sample">
    <div class="filled_3"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T22:13:18.130

正如 Guy Morgrabi 在上面的评论中所说，这是不同 LESS 编译器版本的问题。盖伊应该得到荣誉，但对于其他来访的人，你应该知道答案。

# android - Android：如何确定有多少客户端绑定到一个服务？

> ID：11849427
> 
> 赞同：8
> 
> 时间：2012-08-07T15:41:26.667
> 
> 标签：android

在 Android 服务中，有没有办法确定绑定了多少客户端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T18:11:52.817

没有 API 可以找出有多少客户端绑定到服务。
如果您正在实现自己的服务，那么在您的 ServiceConnection 中，您可以增加/减少引用计数以跟踪绑定客户端的数量。

以下是一些演示该想法的伪代码：

```
MyService extends Service {

   ...

   private static int sNumBoundClients = 0;

   public static void clientConnected() {
      sNumBoundClients++;
   }

   public static void clientDisconnected() {
      sNumBoundClients--;
   }

   public static int getNumberOfBoundClients() {
      return sNumBoundClients;
   }
}

MyServiceConnection extends ServiceConnection {

    // Called when the connection with the service is established
    public void onServiceConnected(ComponentName className, IBinder service) {
        ...
        MyService.clientConnected();
        Log.d("MyServiceConnection", "Client Connected!   clients = " + MyService.getNumberOfBoundClients());
    }

    // Called when the connection with the service disconnects
    public void onServiceDisconnected(ComponentName className) {
        ...
        MyService.clientDisconnected();
        Log.d("MyServiceConnection", "Client disconnected!   clients = " + MyService.getNumberOfBoundClients());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:25:32.193

似乎没有一种简单、标准的方法可以做到这一点。我可以想到2种方法。这是简单的方法：

添加对服务 API 的调用，例如`disconnect()`. 客户端应该在调用`disconnect()`之前调用`unbindService()`。在服务中创建一个成员变量，`private int clientCount`以跟踪绑定客户端的数量。`onBind()`通过递增 in和递减 in来跟踪绑定客户端的数量`disconnect()`。

复杂的方法涉及实现从您的服务到客户端的回调接口，并`RemoteCallbackList`用于确定实际绑定了多少客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:12:11.603

`onBind()`您可以通过覆盖（增加计数）、`onUnbind()`（减少计数和返回`true`）和（增加计数）来跟踪连接的客户端`onRebind()`。

# asp-classic - 在经典的 asp 网站上看不到错误

> ID：11849428
> 
> 赞同：2
> 
> 时间：2012-08-07T15:41:29.883
> 
> 标签：asp-classic, windows-server-2008

我正在尝试将某些站点从 Windows 2003 Server 迁移到 2008。当我访问某些站点时，它们会显示空白页面。

显然有错误，但我什么也看不到。

我已经启用了客户端错误和详细的错误页面，但没有运气。

任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:19:54.493

所以只是为了确保你做了所有这些：

1.  在调试属性下的 IIS 中，您将：设置`Send Errors to Browser`为`True`.
2.  在 IIS 下，`Error Pages`您将设置设置为`Detailed Errors`.
3.  将网站文件夹的写入权限授予 IIS_ISRS 内置组
4.  检查所有源代码，例如`On Error Resume Next`：`On Error GoTo`或`If Err.Number`.
5.  如果使用 Internet Explorer，您必须`Show Friendly HTTP Error Messages`在uncheck/disable 部分`Tools/Internet Options/Advanced`下禁用。`Browsing``Show Friendly HTTP Error Messages`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:19:28.423

您使用的是经典管道吗？如果是这样，唯一剩下的就是确保在源代码中没有代码说`on error resume next`还要确保您在服务器上安装了 classic-asp，例如您可以创建一个新的页面名称，例如 test.asp 和里面写一些代码，如：

```
<html>
<head>
<title>Test ASP Page</title>
</head>
<body>
<%
strMessage = "Hello World"
Response.Write (strMessage)
%>
</body>
</html> 
```

然后在您的网络浏览器中运行它，看看您是否收到一条消息说 Hello World 如果没有，那么您将需要安装 classic-asp。

**请注意：**[如果您需要有关如何安装它的说明，则默认情况下](http://learn.iis.net/page.aspx/562/classic-asp-not-installed-by-default-on-iis/)**未**在 IIS 7.0 / 7.5 上安装经典 ASP 。

# algorithm - 四面体网格中的点位置

> ID：11849435
> 
> 赞同：8
> 
> 时间：2012-08-07T15:41:54.873
> 
> 标签：algorithm, computational-geometry

四面体网格中的点位置是否有任何经过验证的数据结构，其中四面体都是不相交但相互“接触”的？即大多数面是正好两个四面体的面。

位置我的意思是我想找出给定点位于哪个四面体中，或者它是否不位于任何四面体中。

到目前为止，我已经尝试过：

1.  一个简单的KD树。这对我的需求来说太慢了，因为平均树深度非常高，而且我仍然有很多单独的四面体要在每片叶子上进行测试。

2.  一个网格，其中包含每个单元格的所有相交四面体。这似乎工作得更好，但仍然不够快。首先，网格包含很多空单元格，因为我的整体网格不是很“四四方方”。其次，实际上确实包含四面体的大多数细胞确实包含很多（10+）。我想这是因为很多四面体共享每个顶点，一旦一个顶点在一个单元格中，它的所有相邻四面体也是。

有关输入数据的一些进一步信息： 网格通常不是凸面的，可能有孔或夹杂物。尽管最后两个不太可能，但我必须处理它们，这使得如果没有（昂贵且复杂的？）预处理，“行走”是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T07:28:03.163

如果您正在处理由具有邻接信息的四面体组成的 3D 三角剖分，则可以只使用**walk**。这是用于点定位的标准技术并使用 3D**方向测试**。

有关更多信息，请参阅Olivier Devlers 等人的论文**《在三角测量中行走》。**（谷歌它，你会找到它的PDF。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:37:09.223

一些快速的想法：八叉树将类似于您的网格方法，但允许您快速忽略空网格，并细分太满的网格。

此外，您没有提到如何测试一个点是否位于四面体内部。我已经有一段时间没有看过它了，但也许[重心坐标](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29#Barycentric_coordinates_on_tetrahedra)可以加快你的四面体点测试？或者一种[扫描线算法](http://en.wikipedia.org/wiki/Sweep_line_algorithm)，可以根据四面体顶点快速排除四面体，这些顶点显然位于扫描线的错误一侧以包含该点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:06:29.540

诚然，这有点头脑风暴。

也许是 kdTree 的一种习惯，它使用面对齐的平面而不是轴对齐的平面。

如果一个点在四面体的所有四个平面的“正确”一侧，那么它必须在四面体内部。（对吗？）如果你在任何飞机的错误一侧，那么你不仅可以排除当前的春节，还可以排除飞机那一侧的任何其他人。

似乎您应该能够构建一棵树，其中每个节点都是一个平面，而叶节点意味着您在一个特定的 tet 中（假设 tet 永远不会相交）。这棵树可能很深，但由于每个测试只针对一个平面（而不是更昂贵的三角形测试），并且由于叶节点为您提供了准确的答案，因此它似乎应该很快。

有效地构建树可能会很困难。

# php - 合并具有相同特定键的数组？

> ID：11849437
> 
> 赞同：0
> 
> 时间：2012-08-07T15:41:55.103
> 
> 标签：php, arrays, multidimensional-array

我有一个数组

```
Array
(
    [0] => Array
        (
            [id_session] => 174
            [id_participant] => 191
            [participant] => A[mail1@xy.com]
        )

    [1] => Array
        (
            [id_session] => 175
            [id_participant] => 177
            [participant] => B[mail2@xy.com]
        )

    [2] => Array
        (
            [id_session] => 175
            [id_participant] => 189
            [participant] => C[mail3@xy.com]
        )

) 
```

我想获取 json 或多个暗淡数组

```
Array
(
    [174] => Array([191]=>A[mail1@xy.com]),
    [175] => Array
        (            
            [177] => B[mail2@xy.com],
            [189] => C[mail3@xy.com]
        )

) 
```

任何人都可以帮助我如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:48:03.930

```
$new_array = array();
foreach($old_array as $inner_array) {
    if(!isset($new_array[$inner_array['id_session']]))
        $new_array[$inner_array['id_session']] = array();
    $new_array[$inner_array['id_session']][] = $inner_array['participant'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:54:44.367

```
// initialize the array which will contain the result
$resultArray = [];
foreach($sourceArray as $item) {
    // if there is no item in the array with the session is init the item
    if (!array_key_exists($item['id_session'], $resultArray)) {
        $resultArray[$item['id_session']] = [];
    }

    // add the item to the result
    $resultArray[$item['id_session']][$item['id_participant']] = $item['participant'];
} 
```

请注意，我使用了新的数组语法。如果您使用的是 PHP < 5.4，则应替换`[]`为`array()`.

[演示](http://codepad.viper-7.com/mosJlr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:47:21.280

其中 $result 将是您的新结构，而 $array 是您现有的结构：

```
 $result=array();
 foreach($array as $record)
 {
    $result[$record['id_session']][$record['id_participant']]=$record['participant']; 
 } 
```

或者

```
$result=array();
while($record=mysql_fetch_assoc($query_result))
{
    $result[$record['id_session']][$record['id_participant']]=$record['participant']; 
} 
```

# android - Android 使用自定义主题更改操作栏徽标的大小

> ID：11849445
> 
> 赞同：0
> 
> 时间：2012-08-07T15:42:16.757
> 
> 标签：android, android-actionbar

这可能吗？

我的自定义主题 xml 中是否有一个项目可以更改左上角显示的应用程序徽标的大小和边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:39:30.003

好吧，当您浏览 SDK 的内容时，更具体地说是 android-sdk-windows\platforms\android-16\data\res\layout（我在 Windows 上），请查看名为 screen.xml 的文件。这是默认应用程序屏幕的布局。您可以将其更改为在项目中使用它而不是默认布局

```
<?xml version="1.0" encoding="utf-8"?>
    <!-- This is the basic layout for a screen, with all of its features enabled. -->

    <!-- Title bar and content -->
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:fitsSystemWindows="true"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- Popout bar for action modes -->
    <ViewStub android:id="@+id/action_mode_bar_stub"
          android:inflatedId="@+id/action_mode_bar"
          android:layout="@layout/action_mode_bar"
          android:layout_width="match_parent"
          android:layout_height="wrap_content" />

    <!-- Title bar -->
    <RelativeLayout android:id="@android:id/title_container"
        style="?android:attr/windowTitleBackgroundStyle"
        android:layout_width="match_parent"
        android:layout_height="?android:attr/windowTitleSize">

    <ImageView android:id="@android:id/left_icon"
        android:layout_width="16dip"
        android:layout_height="16dip"
        android:layout_marginRight="5dip"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:visibility="gone"
        android:scaleType="fitCenter"
    />
    <LinearLayout android:id="@+android:id/right_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
    >
        <ImageView android:id="@android:id/right_icon"
            android:layout_width="16dip"
            android:layout_height="16dip"
            android:layout_marginLeft="5dip"
            android:layout_gravity="center_vertical"
            android:visibility="gone"
            android:scaleType="fitCenter"
        />
        <ProgressBar android:id="@+id/progress_circular"
            style="?android:attr/progressBarStyleSmallTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dip"
            android:layout_gravity="center_vertical"
            android:visibility="gone"
            android:max="10000"
        />
    </LinearLayout>
    <ProgressBar android:id="@+id/progress_horizontal"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dip"
        android:layout_toLeftOf="@android:id/right_container"
        android:layout_toRightOf="@android:id/left_icon"
        android:layout_centerVertical="true"
        android:visibility="gone"
        android:max="10000"
    />
    <TextView android:id="@android:id/title"
        style="?android:attr/windowTitleStyle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@null"
        android:fadingEdge="horizontal"
        android:scrollHorizontally="true"
        android:gravity="center_vertical"
        android:layout_toLeftOf="@android:id/right_container"
        android:layout_toRightOf="@id/left_icon"
    />
</RelativeLayout>

<!-- Content -->
<FrameLayout android:id="@android:id/content"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:foregroundGravity="fill_horizontal|top"
    android:foreground="?android:attr/windowContentOverlay"
/> 
```

# ember.js - 在鼠标操作中获取对象的内容

> ID：11849447
> 
> 赞同：0
> 
> 时间：2012-08-07T15:42:23.593
> 
> 标签：ember.js

我正在尝试做一个交互式表格，当用户的鼠标悬停在单元格上时显示一个弹出窗口

```
{{#each App.PuberController}}
  {{#view App.PuberView contentBinding="App.PuberController" tagName="tr" }}
    <td>{{#if logo}}<img {{bindAttr src="logo"}} />{{else}}No logo{{/if}}</td>
    <td>{{title}}</td>
    <td>{{type}}</td>
  {{/view}}
{{/each}} 
```

和，

```
App.PuberController = Ember.ArrayController.create({
  content: [...]
});

App.PuberView = Ember.View.extend({
  content: null,

  mouseEnter: function(evt) {
    //Here I want to access content of the object
  }
}) 
```

例如，我想在 mouseEnter 函数（）中有当前对象的名称。在 1.0 pre 版本之前，我可以这样做

```
this.getPath('content.title'); 
```

但它不再起作用了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:51:10.757

首先，奇怪的是你绑定了`App.PuberController`：

```
{{#view App.PuberView contentBinding="App.PuberController" tagName="tr" }} 
```

我宁愿期望`this`，或者像这样的别名：

```
{{#each puber in App.PuberController}}
  {{#view App.PuberView contentBinding="puber" ... 
```

也许你的代码不完全反映这个片段？或者这现在应该可以工作了...... :-)

* * *

另一句话：您现在应该使用`get`而不是`getPath`：

```
this.get('content.title'); 
```

# .net - 第一个请求的“自动检测设置”的性能命中

> ID：11849448
> 
> 赞同：3
> 
> 时间：2012-08-07T15:42:26.913
> 
> 标签：.net, proxy, httpwebrequest

我有以下一段 C# 代码：

```
for (var i = 0; i < 10; i++)
{
    var stopwatch = Stopwatch.StartNew();

    var request = (HttpWebRequest)WebRequest.Create("http://www.google.com/");

    var response = request.GetResponse();

    response.Close();

    Console.WriteLine(stopwatch.Elapsed.TotalMilliseconds);
} 
```

如果我选中 IE（系统）代理设置上的**自动检测设置**复选框，我会得到以下输出：

```
12164,0891
265,8832
248,4743
235,4291
239,6717
234,2011
236,3179
287,2781
239,5829
248,0245 
```

如果我取消选中它，我会得到这些结果

```
991,2215
269,6613
241,1335
241,2875
234,1904
227,1039
226,7818
224,4154
227,6287
224,3641 
```

如您所见，当我启用自动代理检测时，对第一次请求的影响很大。我已尝试实施以下文章中解释的解决方法，但无济于事：

[http://blogs.msdn.com/b/danielvl/archive/2009/03/23/faster-proxy-detection-for-httpwebrequest.aspx](http://blogs.msdn.com/b/danielvl/archive/2009/03/23/faster-proxy-detection-for-httpwebrequest.aspx)

有什么方法可以最小化（或更好地消除）对第一次请求的影响？禁用**自动检测设置**不是一个选项，因为我们应该尊重用户的代理设置。

# magento - Magento：如何在客户信息字段中显示客户的电话号码

> ID：11849449
> 
> 赞同：5
> 
> 时间：2012-08-07T15:42:33.753
> 
> 标签：magento

我正在尝试在客户帐户信息部分下显示客户的电话号码。我知道电话号码属于客户地址部分，但我正在尝试重新设计客户帐户信息的外观。

我为客户 ID 添加了一个新的自定义字段，并且可以使用以下代码显示它，因为客户 ID 属于 customer_entity。

```
<?php echo $this->__('Identification:') ?><?php echo $this->htmlEscape($this->getCustomer()->getCustid()) ?> 
```

但现在我正试图通过使用这个来对电话号码做同样的事情

```
<?php echo $this->__('Telephone:') ?><?php echo $this->htmlEscape($this->getCustomer()->getTelephone()) ?> 
```

但它不显示任何数据，因为它属于 customer_address_entity 我相信它应该是

```
->getAddress()->getTelephone() 
```

代替

```
->getCustomer()->getTelephone() 
```

但使用 ->getAddress 只会给我一个错误“调用非对象上的成员函数 getTelephone()”

有谁知道如何做到这一点？

作为参考，我试图在文件 customer\account\dashboard\info.phtml 上显示此数据

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T17:29:15.293

哦，谢谢，我现在就发！（见原帖下的评论）。

只需使用以下内容：

```
$this->getCustomer()->getPrimaryBillingAddress()->getTelephone(); 
```

第一部分将为您提供所有详细信息，然后您可以`var_dump()`根据@paperids 进行探索。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T17:21:07.470

这个答案应该发给@Alex，但为了完成，我将其发布为答案：

采用：

```
$this->getCustomer()->getPrimaryBillingAddress()->getTelephone() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-08T13:21:51.213

小心如果没有设置地址，那么这个 getPrimaryBillingAddress() 返回一个非对象。

```
$address = $this->getCustomer()->getPrimaryBillingAddress();
if ( $address ) echo $address->getTelephone(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-25T06:47:31.907

Luis 之前提到，如果客户没有设置他的帐单地址，你会得到一个错误的回报： **调用非对象中的成员函数。**

如果您想为这种情况做好准备，可以将代码放入以下 ​​IF 语句：

```
<?php if ($customerAddressId){ ?>
    <?php $address=Mage::getModel('customer/address')->load($customerAddressId); ?>
    <?php $this->getCustomer()->getPrimaryBillingAddress()->getTelephone(); 
} ?> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-01-08T11:12:34.940

isLoggedIn()) { $customer = Mage::getSingleton('customer/session')->getCustomer(); $customerName = $customer->getName(); // 这样你就可以访问所有其他属性 } ?>

# mysql - 如何在 MySQL 中将 BigDecimal 转换为整数

> ID：11849451
> 
> 赞同：1
> 
> 时间：2012-08-07T15:42:40.697
> 
> 标签：mysql, ruby, mysql2

当运行查询时：

```
select sum(items) from my_table where ... 
```

我回来的结果（红宝石）是类型`BigDecimal`。有什么 SQL 魔法可以应用来找回`int`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:46:52.897

`NUMERIC`在列上执行这样的操作时，您会得到 BigDecimal 结果。您可能想要的是在 Ruby 中使用`collect`操作将其转换，或者在 MySQL 级别通过在返回之前转换为整数：

```
SELECT FLOOR(SUM(items)) FROM my_table WHERE ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:52:46.970

```
select cast(sum(items) as binary) ... 
```

对我来说效果很好

# jquery - 将数组中的结果相加以获得总计

> ID：11849454
> 
> 赞同：2
> 
> 时间：2012-08-07T15:42:46.120
> 
> 标签：jquery, ajax

下午，我通过 AJAX 调用检索了一个数组。它带回以下结果，有时包含多个项目

```
 itemQty: 1
 productBrand: "Brand"
 productPrice: "6.25"
 productShipping: "0.35"
 productSku: "sku"
 productTitle: "ProdTitle"
 OrderId: 123 
```

下面是我的 jQuery 代码，用于对项目进行排序和添加，以生成小计、运输和总计。

```
 var ordRes = result;

 var subTotal = (ordRes.productPrice * parseInt(ordRes.itemQty)).toFixed(2);
 var orderTotal = (parseFloat(ordRes.productShipping) + parseFloat(subTotal)).toFixed(2);

 $('#ordSubTotal').text("£" + subTotal);
 $('#ordShipping').text("£" + ordRes.productShipping);
 $('#ordTotal').text("£" + orderTotal); 
```

但是，当我带回多个项目时，我无法将它们添加到 subTotal 和 orderTotal 中。有人可以帮我解释一下吗？

*** 返回的 JSON ***

```
 {
"d": [
    {
        "__type": "ABO.GetOrdersDetails",
        "tweOrderId": 123,
        "productSku": "sku",
        "productTitle": "ProdTitle",
        "productBrand": "Brand",
        "itemQty": 1,
        "productPrice": "6.25",
        "productShipping": "0.35"
    },
    {
        "__type": "ABO.GetOrdersDetails",
        "tweOrderId": 123,
        "productSku": "sku",
        "productTitle": "ProdTitle",
        "productBrand": "Brand",
        "itemQty": 2,
        "productPrice": "82.58",
        "productShipping": "4.60"
    }
 ]
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:08:56.690

```
if (result.constructor != Array) {
    result = [result];
}

var subTotal = 0, orderTotal = 0;
for (var i = result.length - 1; i >= 0; i--) {
    var tmp = parseFloat(result[i].productPrice) * result[i].itemQty;
    orderTotal += (parseFloat(result[i].productShipping) + tmp);
    subTotal += tmp;
}

$('#ordSubTotal').text("£" + subTotal.toFixed(2));
$('#ordTotal').text("£" + orderTotal.toFixed(2)); 
```

也许它对你有帮助。

# google-cloud-datastore - 如何在使用 MapReduce API 映射到云存储之前过滤数据存储数据？

> ID：11849456
> 
> 赞同：1
> 
> 时间：2012-08-07T15:42:53.767
> 
> 标签：google-cloud-datastore, google-bigquery, google-cloud-storage

关于[这里](https://developers.google.com/bigquery/articles/datastoretobigquery "Codelab：提取和转换 App Engine 数据存储区数据以使用 BigQuery 进行分析")的代码实验室，我们如何过滤 mapreduce 作业中的数据存储数据，而不是获取某个实体类型的所有对象？

在下面的映射器管道定义中，唯一的一个输入读取器参数是要处理的实体类型，我在 InputReader 类中看不到其他类型的过滤器参数可以提供帮助。

```
output = yield mapreduce_pipeline.MapperPipeline(
  "Datastore Mapper %s" % entity_type,
  "main.datastore_map",
  "mapreduce.input_readers.DatastoreInputReader",
  output_writer_spec="mapreduce.output_writers.FileOutputWriter",
  params={
      "input_reader":{
          "entity_kind": entity_type,
          },
      "output_writer":{
          "filesystem": "gs",
          "gs_bucket_name": GS_BUCKET,
          "output_sharding":"none",
          }
      },
      shards=100) 
```

由于 Google BigQuery 在非规范化数据模型上表现得更好，因此能够从多个数据存储实体类型 (JOIN) 构建一个表会很好，但我也看不出该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T18:24:51.553

根据您的应用程序，您可以通过传递一个过滤器参数来解决此问题，该参数是“应用于查询的可选过滤器列表。每个过滤器都是一个元组：( `<property_name_as_str>, <query_operation_as_str>, <value>`.”

因此，在您的输入阅读器参数中：

```
"input_reader":{
          "entity_kind": entity_type,
          "filters": [("datastore_property", "=", 12345),
                      ("another_datastore_property", ">", 200)]
} 
```

# css - 通过代码影响子 CSS

> ID：11849457
> 
> 赞同：0
> 
> 时间：2012-08-07T15:42:54.917
> 
> 标签：css, vb.net

好的，所以我试图将无序列表从显示无设置为阻止按钮单击。我已经像这样设置了CSS；

```
#ErrorDiv li{ color:#9a005a; font-weight:bold; display:none;} 
```

所以我的 ErrorDiv 中的所有 ListItems 都不会显示。问题是，如何在单击按钮时显示它们？我已经尝试过我的代码；

```
ErrorDiv.Style.Add("Display", "block") 
```

但显然这只是 ErrorDiv 而不是子 ListItems。我也尝试过调用 javascript 函数，但这有点让人头疼。我想必须有一种简单的方法可以影响子元素的这个样式属性？

需要明确的是，这不仅仅是按钮单击-> 显示。在显示之前，服务器端有一些工作要做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:26:47.110

你应该尝试这样的事情。

```
 Protected Sub Button1_Click(sender As Object, e As EventArgs)
     Me.ErrorDiv.Attributes.Add("style", "display:block;")
     End Sub 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:51:39.217

在页面中包含 jquery 框架，然后使用 click 事件

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<script>
$(function(){
    $('#ID').click(function(){
        $('#ErrorDiv li').css({'display':'block'});
    });
});
</script> 
```

# wpf - 如何重用 WPF DataGridTemplateColumn（包括绑定）

> ID：11849460
> 
> 赞同：17
> 
> 时间：2012-08-07T15:43:06.490
> 
> 标签：wpf, resources, datagridtemplatecolumn

在 WPF 数据网格中，我有一个定义为 DataGridTemplateColumn 的列，我需要在各种列上使用它。作为一个非常简化的示例，请将以下内容视为虚拟示例：

```
<DataGrid ItemsSource="{Binding Path=ItemList, Mode=OneWay}" AutoGenerateColumns="False" >                
    <DataGrid.Columns>

        <DataGridTemplateColumn Header="Name" MinWidth="130" Width="Auto">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <DockPanel LastChildFill="True">
                        <Image Source="component/Images/test.png"/>
                        <TextBlock Text="{Binding Path=Name, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
                    </DockPanel>                                
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <DockPanel LastChildFill="True">
                        <Image Source="component/Images/test.png"/>
                        <TextBox Text="{Binding Path=Name, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
                    </DockPanel>
                </DataTemplate>                            
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>

        <DataGridTextColumn Header="Company" Binding="{Binding Company, ValidatesOnDataErrors=True}" MinWidth="115" Width="Auto"/>                    
    </DataGrid.Columns>
</DataGrid> 
```

举个简单的例子，我如何将用于 Header=Name 的列的相同模板应用到 Header=Company 的列，而不必为每一列复制整个模板？

我已经找到了[这个之前的 SO question](https://stackoverflow.com/q/4253875/109702)的答案，他们在其中使用以下资源进行了解释：

```
<Application.Resources> 
     <DataTemplate x:Key="CellTemplate"> 
     ... 
     </DataTemplate> 
     <DataTemplate x:Key="CellEdintingTemplate"> 
     ... 
     </DataTemplate> 
</Application.Resources> 

<DataGrid Style="{StaticResource MainGridStyle}"> 
    <DataGrid.Columns> 
        <DataGridTemplateColumn CellTemplate="{StaticResource MyFirstColumnCellTemplate}" CellEdintingTemplate="{StaticResource MyFirstColumnCellEdintingTemplate}"/> 
        ... 
    </DataGrid.Columns> 
<DataGrid> 
```

这让我达到了 95%，但我缺少的最后一点是如何处理数据绑定？如何在模板中创建某种类型的占位符，然后在网格中进行实际绑定？

**编辑** 我一直在寻找并发现问题[*Create Common DataGridTemplateColumn*](http://social.msdn.microsoft.com/Forums/vstudio/en-US/a94fb610-e99e-4ab9-9421-af1390b48c35/create-common-datagridtemplatecolumn?forum=wpf)这听起来像我想做的事情实际上目前可能是不可能的。因此，如果其他人曾经试图这样做，并且看到这个问题，我不能保证这是不可能的，但从这个链接看来它可能是。所以只需要复制每一列的所有模板代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T18:20:25.753

您可以将属性设置为`CellStyle`覆盖.`Template``DataGridCell`

在 中`Template`，使用`ContentPresenter`绑定到`TemplatedParent.Content`要放置 DataGridCell 内容的任何位置的 a，`TemplatedParent`因为`DataGridCell`

例如，

```
<Style x:Key="MyCellStyle" TargetType="{x:Type DataGridCell}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <Image Source="component/Images/test.png"/>
                    <ContentPresenter Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" />
                </DockPanel>  
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<DataGrid ItemsSource="{Binding ItemList}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Binding="{Binding Name}" CellStyle="{StaticResource MyCellStyle}" MinWidth="130" Width="Auto" />
        <DataGridTextColumn Header="Company" Binding="{Binding Company}" CellStyle="{StaticResource MyCellStyle}" MinWidth="115" Width="Auto"/>                    
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-28T10:00:32.573

[链接Create Common DataGridTemplateColumn](https://social.msdn.microsoft.com/Forums/vstudio/en-US/a94fb610-e99e-4ab9-9421-af1390b48c35/create-common-datagridtemplatecolumn?forum=wpf)中有一个解决方案。

Poptart911 制作了一个DatagridBoundTemplateColumn，它可以用来替换DataGridTemplateColumn，允许你在列上设置“Binding”属性。因此，您可以重用 DataTemplate 并将不同的 DataContext 分配给不同列的模板。

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace OwensWpfFunStuff
{
public class DataGridBoundTemplateColumn : DataGridBoundColumn
{
    public DataTemplate CellTemplate { get; set; }
    public DataTemplate CellEditingTemplate { get; set; }

    protected override System.Windows.FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
    {
        return Generate(dataItem, CellTemplate);
    }

    protected override System.Windows.FrameworkElement GenerateEditingElement(DataGridCell cell, object dataItem)
    {
        return Generate(dataItem, CellEditingTemplate);
    }

    private FrameworkElement Generate(object dataItem, DataTemplate template)
    {
        var contentControl = new ContentControl { ContentTemplate = template, Content = dataItem };
        BindingOperations.SetBinding(contentControl, ContentControl.ContentProperty, Binding);
        return contentControl;
    }
}
} 
```

例如，XAML：

```
<DataGrid ItemsSource="{Binding Devices}" AutoGenerateColumns="False">
    <DataGrid.Resources>
        <DataTemplate x:Key="VariableTemplate">
            <TextBlock Text="{Binding VarName}"/>
        </DataTemplate>
        <DataTemplate x:Key="VariableEditingTemplate">
            <TextBox Text="{Binding VarName, UpdateSourceTrigger=PropertyChanged}"/>
        </DataTemplate>
    </DataGrid.Resources>
    <DataGrid.Columns>
        <local:DataGridBoundTemplateColumn Header="Input Variable"
                                            Binding="{Binding InputVariable}"
                                            CellTemplate="{StaticResource VariableTemplate}"
                                            CellEditingTemplate="{StaticResource VariableEditingTemplate}">
        </local:DataGridBoundTemplateColumn>
        <local:DataGridBoundTemplateColumn Header="Output Variable"
                                            Binding="{Binding OutputVariable}"
                                            CellTemplate="{StaticResource VariableTemplate}"
                                            CellEditingTemplate="{StaticResource VariableEditingTemplate}">
        </local:DataGridBoundTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

ViewModel 和数据类型

```
class MainWindowVM
{
    public List<Device> Devices { get; set; } = new List<Device>()
    {
        new Device()
        {
            InputVariable = new MyVariable()
            {
                VarName = "theInputVar"
            },
            OutputVariable = new MyVariable()
            {
                VarName = "theOutputVar"
            }
        }
    };
}

public class Device
{
    public MyVariable InputVariable { get; set; }
    public MyVariable OutputVariable { get; set; }
}

public class MyVariable
{
    public string VarName { get; set; }
} 
```

# service - CRM 2011 使用 C# 连接到 organization.svc

> ID：11849470
> 
> 赞同：2
> 
> 时间：2012-08-07T15:43:39.650
> 
> 标签：service, dynamics-crm-2011, credentials, discovery

CRM 2011 使用 ADFS 和 HTTPS 进行设置。我正在尝试从自定义网页连接到 organization.svc，该网页与 CRM 2011 位于同一 IIS 上，但使用以下代码作为不同的网站：

```
OrganizationServiceProxy serviceProxy;
ClientCredentials clientCredentials = new ClientCredentials();
clientCredentials.UserName.UserName = "admin";
clientCredentials.UserName.Password = "pass";

Guid contactId = Guid.Empty;

Uri OrganizationUri = new Uri(String.Format("https://organization.crmdev.com:port/XRMServices/2011/Organization.svc"));

Uri HomeRealmUri = new Uri(String.Format("https://organization.crmdev.com:port/XRMServices/2011/Discovery.svc"));

using (serviceProxy = new OrganizationServiceProxy(OrganizationUri, null, clientCredentials, null))
{
    serviceProxy.ServiceConfiguration.CurrentServiceEndpoint.Behaviors.Add(new ProxyTypesBehavior());
    IOrganizationService service = (IOrganizationService)serviceProxy; 
    Entity contact = new Entity("contact");
    contact.Attributes["lastname"] = "oi oi";
    contactId = service.Create(contact);
} 
```

它返回错误消息：

从另一方收到不安全或不正确安全的故障。有关故障代码和详细信息，请参见内部 FaultException。ID3242：无法对安全令牌进行身份验证或授权。

在事件查看器中我看到错误：

```
Account For Which Logon Failed:
    Security ID:        NULL SID
    Account Name:       admin
    Account Domain: 
Failure Reason:     Unknown user name or bad password. 
```

虽然我给出了正确的用户名和密码..

如果我尝试替换：

```
using (serviceProxy = new OrganizationServiceProxy(OrganizationUri, null, clientCredentials, null)) 
```

和：

```
using (serviceProxy = new OrganizationServiceProxy(OrganizationUri, HomeRealUri, clientCredentials, null)) 
```

它返回：

你调用的对象是空的。

因为 serviceProxy 为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:19:56.760

所以，我自己刚刚开始使用 ADFS，如果您还没有的话，我建议您阅读[Active Directory 和基于声明的身份验证](http://msdn.microsoft.com/en-us/library/gg334502)。

另外，通过查看您的代码，我认为您的 HomeRealmUri 不正确。您似乎已经给它提供了 CRM 发现服务的地址。如果您只有一个 ADFS 在玩，我认为您可以将其保留为空。如[MSDN 中所述。](http://msdn.microsoft.com/en-us/library/gg325179.aspx)

我本来希望它看起来更像这样：urn:federation:contoso

对于用户名，我相信您需要指定域，通常您必须以这种格式执行：username@domain

您可能还想查看此[示例](http://technet.microsoft.com/en-us/library/gg509057.aspx)，它是与 Crm 对话的网页上的单一登录，这听起来很像您想要实现的目标。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T14:06:10.367

我终于想通了：）

我错过了“/organization”，这意味着 organizationUri 应该是：

```
 Uri OrganizationUri = new Uri(String.Format("https://organization.crmdev.com:port/organization/XRMServices/2011/Organization.svc")); 
```

当我使用这段代码时，我已经弄清楚了：

```
IDiscoveryService discoveryService = new DiscoveryServiceProxy(discoveryUri, null, userCredentials, null);

            RetrieveOrganizationRequest orgRequest =
                                        new RetrieveOrganizationRequest()
                                        {
                                            UniqueName = "organization name",
                                            AccessType = EndpointAccessType.Default,
                                            Release = OrganizationRelease.Current
                                        };
            RetrieveOrganizationResponse org =
                    (RetrieveOrganizationResponse)discoveryService.Execute(orgRequest); 
```

并看到该组织的端点包括 Uri 中的“/组织”。

# mysql - 按复值排序mysql表

> ID：11849481
> 
> 赞同：0
> 
> 时间：2012-08-07T15:44:18.917
> 
> 标签：mysql, function

我的表由记录组成，其中每条记录都有自己的历史记录，如下所示：

```
65465406540-245|65465408540-654 
```

历史条目数没有限制（列类型是文本，所以...）。历史条目总是从最旧到最新排序。意味着最新的条目在右侧。

历史条目由管道字符“|”分隔。一个历史记录条目由时间戳、破折号“-”作为分隔符和 1-4 位数字组成，该数字表示进行更改的用户 ID。

现在我的问题是我想按最近（或最旧）的历史条目对表中的记录进行排序。我该怎么做？

我在考虑 MySQL 函数，因为结果必须来自我的 PHP 脚本已经排序，但我不知道从哪里开始，所以非常感谢每一个帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:59:19.293

对于最古老的，您可以使用 RedFilters （现已编辑）答案

```
ORDER BY LEFT(column_name,11) 
```

按最新订购更有趣。

```
ORDER BY REVERSE(SUBSTR(REVERSE(column_name),1,LOCATE("|",REVERSE(column_name))-1)) 
```

让我们分解一下。我们反转列并找到第一个 | 的索引

```
456-04580456456|542-04560456456 
```

然后我们得到子字符串到这一点，这给了我们：

```
456-04580456456 
```

这是反转的最后一项，所以现在我们可以简单地`REVERSE`通过字符串和 order by 来对最后一项进行排序：

```
65465408540-654 
```

然而，这非常可怕。如果可能的话，我会考虑在 PHP 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:22:30.600

我调整了 Jim 的查询，因此它也可以只使用一个和/或没有历史条目，并且只显示时间戳以便于日期/时间计算。这里是：

```
SELECT *, 
    IF(
        LOCATE('|', history) > 0, 
        LEFT(
            REVERSE(
                LEFT(
                    REVERSE(history), 
                    LOCATE('|', REVERSE(history))-1
                )
            ), 
            10
        ), 
        LEFT(history, 10)
    ) AS last 
FROM table
ORDER BY last DESC 
```

# .net - 向现有 API 调用的响应对象添加属性 - 坏主意？

> ID：11849484
> 
> 赞同：0
> 
> 时间：2012-08-07T15:44:24.890
> 
> 标签：.net, wcf, web-services

我有一个 API，它通过 SOAP、XML 和 JSON 向外界公开一些对象。

从架构的角度来看，我想向这些对象继承的基类添加一些属性。

从逻辑上讲，在现有属性之后将这些属性暴露给外部世界是有意义的。

我只是担心添加额外的信息可能会伤害一些客户，这取决于他们最终编码的方式。请注意，我们的内部测试都没有显示添加属性的任何不良结果 - 消费客户端只是忽略了额外的数据。

向所有客户传达此更改可能很困难（我承认这是一个单独的问题）。

这是一个合理的担忧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:54:14.217

我觉得这是一个合理的担忧，你不知道服务是如何被消费的。

一个安全的策略是编写方法的新“版本”。保留现有的“MyWebMethod”并添加“MyWebMethodV2”。发送新版本存在的通信。

# ssh - 如何使用 openssh 获取 sshv2 远程主机密钥

> ID：11849486
> 
> 赞同：1
> 
> 时间：2012-08-07T15:44:30.303
> 
> 标签：ssh, openssh

我正在使用 openssh lib 从应用程序端实现 sshv2 客户端。我必须与远程主机连接并获取主机密钥，并且需要存储在 known_host 文件中。

在 sshv1 的情况下，如果我们从客户端发送以下命令，我们将收到 sshv1 ras 密钥，SSH-1.0-xxxxx/authApp_1.0

但是我不确定在 sshv2 的情况下如何从远程服务器获取主机密钥，在 sshv2 的情况下我们需要交换哪些命令才能从远程服务器获取主机密钥？

我们可以为此获得任何参考代码或文档吗？请建议我。

# opengl-es-2.0 - OpenGL 和相机预览 - 预乘 alpha - 混合在一起得到“过度饱和”的颜色

> ID：11849491
> 
> 赞同：0
> 
> 时间：2012-08-07T15:44:38.323
> 
> 标签：opengl-es-2.0, android-camera, galaxy, glsurfaceview, premultiplied-alpha

好的，这是我真的无法解决的 OpenGL 问题。在 Galaxy S1 和 S2 上一切正常，似乎有几乎相同的 GPU。但是当我尝试制作一个 AR 应用程序时，我总是在我的相机预览顶部遇到透明像素的问题。它仅在像素透明并且看起来像“烧焦的颜色”或值溢出或类似的东西时才会出现。所以请告诉我我做错了什么，或者如果你有 S3 试试看。也许我的刚刚坏了？？我为你创建了一个小测试程序。请看一下：

```
public class MainActivity extends Activity {
private GLSurfaceView mGLView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mGLView = new GLSurfaceView(this);
        mGLView.setEGLContextClientVersion(2);
        mGLView.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        mGLView.getHolder().setFormat(PixelFormat.TRANSLUCENT);
        mGLView.setZOrderOnTop(true);        
        GameRenderer renderer = new GameRenderer();
        mGLView.setRenderer(renderer);
        setContentView(new CameraView(this), new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        addContentView(mGLView, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    }

    @Override
    protected void onPause() {
        super.onPause();
        mGLView.onPause();
    }

    @Override
    protected void onResume() {
        super.onResume();
        mGLView.onResume();
    }
} 
```

CameraView 看起来像这样：

```
public class CameraView extends SurfaceView implements SurfaceHolder.Callback{

    SurfaceHolder surfaceHolder;
    Camera camera;

    public CameraView(Context context, AttributeSet attrs) {
        super(context, attrs);
        surfaceHolder = getHolder();
        surfaceHolder.addCallback(this);
    }

    /**
     * @param context
     */
    public CameraView(Context context) {
        super(context);
        surfaceHolder = getHolder();
        surfaceHolder.addCallback(this);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        try {
            Camera.Parameters parameters = camera.getParameters();
            parameters.setPreviewSize(w, h);
            camera.setParameters(parameters);
        } catch (Exception e) {
            Log.w("CameraView", "Exception:" , e);
        }
        camera.startPreview();
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        camera = Camera.open();
        try {
            camera.setPreviewDisplay(holder);
        } catch (IOException exception) {
            camera.release();
            camera = null;
        }   
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        camera.stopPreview();
        camera.release();
        camera = null;
    }
} 
```

游戏渲染器：

```
public class GameRenderer implements GLSurfaceView.Renderer {

    private final String vertexShaderCode = 
        "uniform mat4 uMVPMatrix;   \n" +
        "attribute vec4 vPosition;  \n" +
        "void main(){               \n" +
            " gl_Position = uMVPMatrix * vPosition; \n" +
        "}  \n";

    private final String fragmentShaderCode = 
        "void main(){                       \n" +
            " gl_FragColor = vec4(1.0, 1.0, 1.0, 0.3); \n" +        
        "}                                  \n";

    private int loadShader(int type, String shaderCode){
        int shader = GLES20.glCreateShader(type); 
        GLES20.glShaderSource(shader, shaderCode);
        GLES20.glCompileShader(shader);        
        return shader;
    }

    // END OF SHADER STUFF

    private int mProgram;
    private int maPositionHandle;
    private int muMVPMatrixHandle;

    private FloatBuffer triangleVB;

    public GameRenderer() {
    }

    public void onSurfaceCreated(GL10 unused, EGLConfig config) {
        GLES20.glClearColor(0,0,0,0); 
        initShapes();
        int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
        int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);
        mProgram = GLES20.glCreateProgram();            
        GLES20.glAttachShader(mProgram, vertexShader);  
        GLES20.glAttachShader(mProgram, fragmentShader); 
        GLES20.glLinkProgram(mProgram);              
        maPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
        GLES20.glUseProgram(mProgram);
        MatrixStack.initStack();
    }

    public void onDrawFrame(GL10 unused) {
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
        drawGround();    
    }

    private void drawGround() {
        GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false, 0, triangleVB);
        GLES20.glEnableVertexAttribArray(maPositionHandle); 
        Matrix.multiplyMM(MatrixStack.getMVPMatrix(), 0, MatrixStack.getMVMatrix(), 0, MatrixStack.getMVMatrix(), 0);
        Matrix.multiplyMM(MatrixStack.getMVPMatrix(), 0, MatrixStack.getPMatrix(), 0, MatrixStack.getMVPMatrix(), 0);
        GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, MatrixStack.getMVPMatrix(), 0);
        GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
        GLES20.glDisableVertexAttribArray(maPositionHandle);
    }

    public void onSurfaceChanged(GL10 unused, int width, int height) {
        GLES20.glViewport(0, 0, width, height);
        float ratio = (float) width / height;
        Matrix.frustumM(MatrixStack.getPMatrix(), 0, -ratio, ratio, -1, 1, 1, 1000);
        muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
        Matrix.setLookAtM(MatrixStack.getMVMatrix(), 0,  0, 0,-1,  0, 0, 0,  0, 1, 0);
    }  

    private void initShapes(){  
        float triangleCoords[] = {
            -15f, -2f,  15f,
             15f, -2f,  15f,
            -15f, -2f, -15f,         
             15f, -2f, -15f
        }; 
        ByteBuffer vbb = ByteBuffer.allocateDirect(triangleCoords.length * 4); 
        vbb.order(ByteOrder.nativeOrder());
        triangleVB = vbb.asFloatBuffer();  
        triangleVB.put(triangleCoords);    
        triangleVB.position(0);            
    }       
} 
```

还有一个小的 MatrixStack 类，但我认为这里不会有问题：

```
public class MatrixStack {

    private static Stack<float[]> matrixStack = new Stack<float[]>();   

    private static float[] MVMatrix = new float[16];
    private static float[] PMatrix = new float[16];
    private static float[] MVPMatrix = new float[16];

    protected static void initStack(){
        float[] basisMatrix = new float[16];
        Matrix.setIdentityM(basisMatrix, 0);
        matrixStack.push(basisMatrix);
        MVMatrix = basisMatrix;
        Matrix.setIdentityM(PMatrix, 0);
    }

    public static float[] getMVMatrix(){
        return MVMatrix; 
    }

    public static float[] getPMatrix(){
        return PMatrix; 
    }

    public static float[] getMVPMatrix(){
        return MVPMatrix; 
    }

} 
```

好吧，仅此而已。看起来相机预览“过度曝光”了我的 gl 片段。请至少尝试此代码。我仍然希望我的手机有问题。无论如何，谢谢你的帮助，托拜厄斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:36:37.873

好吧，我得到了答案。问题是 alpha 值的预乘。因此，以最简单的方式编写就足够了：

```
vec3 color = clamp(textureColor.rgb * lightWeighting.xyz, 0.0, 1.0);
color *= 0.5; // premultiply by alpha
gl_FragColor = vec4(color, 0.5); 
```

即使我不明白为什么它在旧系统上工作得很好，而且我仍然不确定如何在无法编写自己的着色器代码的 Gl1.0 上管理它。所以希望这对遇到同样问题的人有所帮助！谢谢，托拜厄斯

# performance - 多个快速加载的社交按钮？

> ID：11849492
> 
> 赞同：1
> 
> 时间：2012-08-07T15:44:47.223
> 
> 标签：performance, iframe, facebook-social-plugins, social, pagespeed

我有这样的页面[，](http://www.101greatgoals.com/category/goals/)里面有很多社交按钮。很多意味着超过 50 个按钮，因为该页面上的每个帖子都有自己的按钮。

所以也许我会让页面更小，帖子更少，但这不是主要原因，也不是我想要的。

我想知道如何使按钮更快..

1.  使用 XFBML？框架？HTML5？
2.  我怎样才能让所有这些都从一个脚本运行而不是重复？
3.  您是否建议仅在用户向下滚动时加载其余按钮？
4.  你推荐使用像 AddThis 或 Sharrre 这样的服务吗？
5.  如何让我的所有 JS 异步加载？
6.  其他提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:59:06.710

1.  你真的无法控制任何外部插件的性能。
2.  您可以生成每个按钮 div 的数组，预先提交 href，然后将每个按钮写入所需位置的 DOM。
3.  我建议不要同时加载它们，你可以用 setTimeout 来抵消它们，“我建议每个 200 毫秒”。
4.  没有根据第 3 方的建议，喜欢按钮可以正常工作。
5.  异步，参考[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)
6.  没有其他建议。

异步示例。

* * *

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

# kml - Mapnik 可以从 KML 推断样式吗？

> ID：11849495
> 
> 赞同：0
> 
> 时间：2012-08-07T15:44:55.260
> 
> 标签：kml, mapnik, ogr

我正在尝试使用 Mapnik C++ API 在我的应用程序中可视化 KML 数据。我看不到如何将样式信息从 OGR 数据源中获取到地图中。无论如何，我有点惊讶它不会只是发生。所以，有两个问题： 1\. 我是否正在尝试做一些 Mapnik 本来就不应该做的事情？2\. 如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:15:44.643

是的，通常 KML 是一种（过度？）复杂的格式，在 Google 产品之外没有得到很好的支持。OGR 确实为处理一些样式提供了非常出色的支持，但这是非常极端的情况，Mapnik 不会知道任何事情。Mapnik 将数据和样式视为完全独立的，并使用样式表（请参阅 Mapnik XML、Cascadenik 和 CartoCSS）将这些想法拼接在一起。

我在将 KML 转换为 Mapnik 样式表方面做了一些工作——你可以在[https://github.com/springmeyer/kml-escape](https://github.com/springmeyer/kml-escape)找到这项工作。

# ios - if 语句中的代码未命中

> ID：11849499
> 
> 赞同：1
> 
> 时间：2012-08-07T15:45:05.797
> 
> 标签：ios, objective-c, if-statement

我一直在试图弄清楚为什么这段代码没有被命中。日志显示“Success 1”或“Success 0”，所以我想我可以在 if 语句中使用 @"1" 或 @"0"，但它没有通过任何部分。

```
 NSString *success = [JSON valueForKey:@"Success"];

    NSLog(@"Success %@", success);

    if (success  == @"1") {
    [self performSegueWithIdentifier:@"loginToInvite" sender:self];
    } else if (success == @"0")
    {
        _logInBtn.selected = NO;
        _popupLbl.hidden = NO;
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Text" message:@"Text" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [alert show];
    } 
```

谢谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:47:07.560

您对字符串相等性的检查将不起作用，因为它正在检查身份（如果对象是同一个对象）

```
if (success  == @"1") 
```

相反，您想要检查相等性，如果值相同，则在字符串的情况下为真。你应该改用这个：

```
if ([success isEqualToString:@"1"]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T16:46:08.123

NSString 文字相等应使用 [NSString isEqualToString:] 完成，否则您将检查指向对象的指针是否相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T18:08:49.757

```
 NSString *success = [JSON valueForKey:@"Success"];

    NSLog(@"Success %@", success);

    if ([success  isEqual:@"1"]) {
    [self performSegueWithIdentifier:@"loginToInvite" sender:self];
    } else if ([success isEqual:@"0"])
    {
        _logInBtn.selected = NO;
        _popupLbl.hidden = NO;
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Text" message:@"Text" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [alert show];
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T18:06:51.070

为了与字符串值进行比较，请使用 isEqualToString:@"1"

# asp.net - 如何过滤asp.net web api中的本地请求？

> ID：11849501
> 
> 赞同：2
> 
> 时间：2012-08-07T15:45:11.147
> 
> 标签：asp.net, asp.net-web-api

我遇到的情况让 asp.net web api 有点烦人。问题是我有一个已经投入生产的 API，但是我不断地进行更改和再次部署。

我有一个过滤器，它负责检查请求是否为 https，这在生产中非常有用，但是当请求是本地的时，过滤器会阻止所有 http 请求，这不是我想要的。我想允许使用 http 的本地请求。我有一个过滤器，它在 MVC3 上做同样的事情，我可以做类似的事情：

```
filterContext.HttpContext.Request.IsLocal 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T04:20:45.053

如果您使用的是 webhost，即在 asp.net 中托管 webapi，您可以使用访问 HttpContext

```
HttpContextBase httpContextBase;
request.Properties.TryGetValue("MS_HttpContext", out httpContextBase); 
```

然后，您可以使用`httpContextBase.Request.IsLocal`来确定请求是否是本地的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:51:19.270

您可以使用扩展方法来访问 Request.Properties 字典中的值。例如：

```
public static class HttpRequestExtensions
{
   public static bool IsLocal(this HttpRequestMessage request)
   {
       var flag = request.Properties["MS_IsLocal"] as Lazy<bool>;
       return flag != null && flag.Value;
   }
} 
```

这具有在自托管时也可以工作的额外好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T16:03:11.400

您可以直接使用**HttpRequestMessage的****IsLocal**扩展方法。[关联](https://msdn.microsoft.com/en-us/library/system.net.http.httprequestmessageextensions.islocal(v=vs.118).aspx)

 **例如：

```
using System.Net.Http;

...

public void PostUser(User user) 
{
    if (!base.Request.IsLocal())    
    { 
        ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T15:28:23.447

MS_Islocal 属性对我不可用，而是这有效 -

```
if (Request != null && Request.Properties.ContainsKey("MS_RequestContext")){
                    var context = Request.Properties["MS_RequestContext"] as HttpRequestContext;
                    return context.IsLocal;
                }
                return false; 
```**

# internet-explorer - 在不显示窗口的情况下启动 IE 资源管理器？

> ID：11849502
> 
> 赞同：2
> 
> 时间：2012-08-07T15:45:15.743
> 
> 标签：internet-explorer, shell, command-line

我不知道这是否可行，但是在命令提示符下，我会执行以下操作：

C:\explorer.exe "http://LaunchURL"

它尝试打开 Internet Explorer 浏览器窗口并转到 LaunchURL。但是，我不希望浏览器窗口显示，因为 LaunchURL 是一次单击部署 URL...所以基本上，发生的情况是它短暂显示，然后单击一次部署按预期启动。

有没有办法伪造系统以免显示或隐藏窗口？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:45:41.330

当然。您可以通过 PowerShell 和 IE 对象执行此操作。只是不要让它可见：

```
$ie = new-object -com "InternetExplorer.Application"
$ie.navigate("http://launchurl") 
```

如果您需要查看故障排除窗口，请使用以下命令：

```
$ie.visible = $true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:24:48.697

如果要启动 ClickOnce 安装。您最好使用 appref-ms 链接文件，操作系统会执行它并立即开始正常的 ClickOnce 安装。

制作一个 App.appred-ms 文件，内容如下：

```
 http://server/appFolder/App.application#App.application, Culture=neutral, PublicKeyToken=0000000000000000, processorArchitecture=msil 
```

此外，如果您以不可见的方式启动 IE，请考虑参数“Silent”（设置或获取指示对象是否可以显示对话框的值。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:01:39.523

如果您已经能够在目标机器上运行代码（那里有一个现有的应用程序），那么使用 WebClient 或 HttpWebRequest 将安装程序下载到一个临时文件夹，然后让 shell 执行它。

否则，这几乎就是单击一次的意思。您可以通过向人们提供页面的 URI 来改进演示文稿，该页面提供一些漂亮的问候、操作方法、谢谢和“您的下载应该很快开始，如果没有，请点击...”，然后脚本移动到点击 -一次 URI，因此导致它被下载并运行。

# android - 在 MediaPlayer 服务上收到 ANR 错误

ID：11849504

赞同：1

时间：2012-08-07T15:45:22.160

标签：android, android-mediaplayer, android-anr-dialog

# vb.net - 将 GUID 转换为等效数字

> ID：11849509
> 
> 赞同：6
> 
> 时间：2012-08-07T15:45:29.563
> 
> 标签：vb.net, .net-4.0, type-conversion, guid

我被要求从 ActiveDirectory 中导出用户列表，并将 GUID 转换为数字等价物以进行显示（因此我将在之后使用 .ToString）。我已经进行了一些搜索，但大多数问题都是关于将某些东西转换为 GUID，或者将 GUID 转换为 Int 或一些愚蠢的东西（我知道 Ints 太小等等），这并不合适。

我已经对 AD 内容进行了排序并导出了数据，但是我想知道用于将 GUID 转换为的数据类型/格式，以及它是否可能。只要数字仍然是“唯一的”（我知道 GUID 并不是真正唯一的等等），我并不真正在意使用什么确切的数字类型。

GUID 是否是基于十六进制的格式，是否有任何合适的数字类型可以将它们转换为显示？

我正在使用 VB.Net 和 .Net Framework 4。我尝试过使用 BigInteger，但这似乎也变成了负数，如果必须，我会使用它，但如果有其他更合适的东西，我宁愿不使用.

**编辑** 这是我尝试过的：

使用以下 GUID：f02c7caf-7e5a-491b-9f23-9476174bdda1

而这段代码：

```
Dim Foo As String = (New System.Numerics.BigInteger(adUserDirectoryRecord.Guid.ToByteArray())).ToString 
```

结果是：-125127638954164478915246035839554388817

**注意：**一旦完成，我将以 .csv 格式输出，以便另一个团队获取并导入另一个系统，这可能是他们希望它以数字而不是字母数字格式的原因。

**解决方案：**

由于无需将 Numeric GUID 转换回来，BigInteger 是用于此目的的正确方法。更改是调整 ByteArray 的大小以仅将其强制为正值：

```
'Gets the User's GUID from the Active Directory record, converts it to a Byte Array and Resizes it to Force Positive Values Only:
Dim bytGUIDBytes As Byte() = adUserDirectoryRecord.Guid.ToByteArray()
Array.Resize(bytGUIDBytes, 17)

'Converts the User's GUID Bytes into a Numeric Equivalent, and Returns the String version of the Numerical value.
Return New System.Numerics.BigInteger(bytGUIDBytes).ToString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:51:20.033

“数字”在 VB wrt 中没有意义`Guid`。.net 中没有 128 位数字类型。唯一的 128 位类型是十进制；`Guid`但是将 a 转换为 a似乎没有意义`Decimal`。我会简单地使用`ToByteArray`字节值并将其显示为十六进制。

或者，确保给 BigInteger 的数组中的最后一个字节为零以获得正值。例如：：

```
var bytes = Guid.NewGuid().ToByteArray(); 
Array.Resize(ref bytes, 17); 
var bigInt = new BigInteger(bytes);
var value = bigInt.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T09:14:33.433

您可以使用 ToString("n") 简单地将 Guid 转换为数字表示：

```
Guid.NewGuid().ToString("n") 
```

将返回类似“5ee575bd995b419499aff6d6967c4a35”的内容

# javascript - 这些劫持广告如何运作（在网页上创建不需要的广告）

> ID：11849516
> 
> 赞同：1
> 
> 时间：2012-08-07T15:45:41.060
> 
> 标签：javascript, html, ads

我们的网页上随机弹出广告...从以前不存在的链接，即页面上的一些随机文本（不是超链接）变成了 Javascript-y 链接广告。

![在此处输入图像描述](../Images/703100085a6770f816c52f3b45c38882.png)

这是最终的 UI 失败......我觉得这很有趣 - 并且想知道这是如何发生的。

一位朋友刚刚告诉我这是“您机器上的间谍软件。尝试清理所有 cookie。”

是这样吗？像往常一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T15:48:48.913

我猜他们正在将 javascript 注入您网站某处的表单中。当用户查看显示输入数据的页面时，javascript 运行，显示添加。

查看页面来源；您是否看到指向不属于您的域的脚本标记？

如果结果是 XSS，您需要在数据呈现给用户之前对其进行清理（除其他外）。 [这是一个很好的起点](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)。

# c# - 如何动态地垂直增长表单并将文本框向下移动适当的数量？

> ID：11849521
> 
> 赞同：2
> 
> 时间：2012-08-07T15:46:04.783
> 
> 标签：c#, winforms, dynamic, textbox, label

我在表单上有一个标签和一个文本框。标签的内容是动态的，可能会将其边界溢出到其下方的文本框上。我想适当地动态增加表单的高度和文本框的顶部，以便标签内容将文本框“推”到表单上。通过将标签设置为 Autosize 并给它一个最大宽度，我想让它水平增长到表单 bu 的右边缘，然后垂直（向下）增长到它需要的程度。

我尝试这样做的代码是：

```
int bottomOfLabel = label1.Location.X + label1.Size.Height;
int topOfTextBox = textBox1.Location.Y;
int currentHeightOfForm = this.Size.Height;
int currentTopOfTextBox = texBox1.Location.Y;

if (bottomOfLabel >= topOfTextBox)
{
    int heightToAdd = bottomOfLabel - topOfTextBox;
    this.Size.Height = currentHeightOfForm + heightToAdd;
    textbox.Location.Y = currentTopOfTextBox + heightToAdd;
} 
```

...但我收到这些错误：

*无法修改“System.Windows.Forms.Form.Size”的返回值，因为它不是变量*

-和：

*无法修改“System.Windows.Forms.Control.Location”的返回值，因为它不是变量*

那么我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:50:46.933

使用 this.Height 代替 this.Size.Height 并使用 textbox.Top 代替 textbox.Location.Y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:09:48.490

```
const int WIGGLE_ROOM = 4;
int bottomOfLabel = label1.Location.Y + label1.Size.Height;
int currentHeightOfForm = this.Size.Height;
int widthOfForm = this.Size.Width;
int leftSideOfTextBox = textBox1.Location.X;
int currentTopOfTextBox = textBox1.Location.Y;

if (bottomOfLabel >= (currentTopOfTextBox - WIGGLE_ROOM)) {
    int heightToAdd = (bottomOfLabel - currentTopOfTextBox) + WIGGLE_ROOM;
    this.Size = new Size(widthOfForm, currentHeightOfForm + HeightToAdd);
     textBox1.Location = new Point(leftSideOfTextBox, currentTopOfTextBox +   
          heightToAdd);
} 
```

# android - 我想让我的 Android 应用最小 API 8。文档给了我 API 8 中不可用的功能。我应该去哪里看？

> ID：11849528
> 
> 赞同：2
> 
> 时间：2012-08-07T15:46:37.550
> 
> 标签：android

抱歉，我在为此写短标题时遇到了麻烦！

我希望我的应用程序的最低 API 级别为 8。但 Google 的文档不在乎。他们仅以最新的形式记录 API。我知道我想做的事情在 API 9 之前是可能的，但是我怎样才能知道它们是如何在“当时”完成的呢？

顺便说一下，例子是[getCameraInfo()](http://developer.android.com/reference/android/hardware/Camera.html#getCameraInfo%28int,%20android.hardware.Camera.CameraInfo%29)。事实上，整个 Camera.CameraInfo 类只存在于 API 9 之后，但在 API 9 之前，必须有一种方法可以获取有关手机摄像头的信息。

我似乎无法在这个问题上取得任何进展（即使只是特定的 CameraInfo 示例）。削减 20% 的用户群并使 9 成为最低 API 级别的唯一答案是什么？什么时候，随着应用程序的进展，我发现我想要使用的功能需要，根据文档，API 12 中引入的类？

**编辑：**哦，天哪……这很尴尬而且不太可能。我没有具体说明，但我实际要查找的信息是相机传感器的物理方向。感谢下面的回复，我在[此页面](http://developer.android.com/about/versions/android-2.2.html)上看到，在 API 9 之前，这不是问题，因为这些版本的 Android 只允许“肖像”模式下的照片。我仍然有很多关于 Android 碎片化的问题，但至少我现在明白新的 CameraInfo 类并没有*取代*任何东西。随着文档的更新，没有任何内容被*删除。*谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:55:04.583

您可以按 API 级别过滤文档。转到[http://developer.android.com](http://developer.android.com)并选择“参考”部分。在左侧列的顶部，它显示**“Android APIs API 级别：”**，然后是一个下拉选项。将其设置为**"8"**。然后您将只能看到 API 级别 8 中可用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:53:39.857

看看[这个](http://developer.android.com/about/versions/android-2.2.html)链接。有关 API 级别 8 (Android 2.2) 的信息

在底部，您可以看到一个名为“相机和摄像机”的部分，它指定了有关相机的该级别的更改。可能是这种特定方法`getCameraInfo()`仅在 API 9 之后才可用，但 API 8 中有一些方法可以使用不同的方法获取相同的信息。

此外，[这里](http://developer.android.com/reference/android/hardware/Camera.html)是 Camera 对象的整个文档的直接链接。您可以阅读所有可用的方法及其 API 级别。

# android - UDP绑定调用绑定到随机端口

> ID：11849529
> 
> 赞同：0
> 
> 时间：2012-08-07T15:46:41.103
> 
> 标签：android, sockets, android-ndk, udp, boost-asio

以下代码用于将套接字绑定到端口。指定的端口已经绑定到另一个 UDP 套接字。我发现如果端口已在使用中，则套接字将绑定到随机端口，否则它将绑定到绑定调用中的指定端口。这是“绑定”的正确行为吗？在 Android 平台上使用 ASIO 代码

```
 asio::error_code errorCode;
   mSocket.open(address.is_v6() ? asio::ip::udp::v6() : asio::ip::udp::v4(), errorCode);
  if(!errorCode)
  {
     mSocket.set_option(asio::ip::udp::socket::reuse_address(true));
     mSocket.bind(asio::ip::udp::endpoint(address, port), errorCode);
   }
   return errorCode; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:33:29.613

我建议您检查每个操作的错误代码，而不仅仅是其中一些。您几乎肯定会发现 bind() 完全失败了，因此当您进行发送或接收时会自动完成随机绑定。

# ruby-on-rails - 如何在 Chrome 浏览器的机器上查看在 localhost 中运行的网站？

> ID：11849535
> 
> 赞同：10
> 
> 时间：2012-08-07T15:46:56.437
> 
> 标签：ruby-on-rails, google-chrome, networking, mobile

我正在开发一个 Rails Web 应用程序，目前专注于移动设计，并希望查看我在 Galaxy Nexus（运行 Jelly Bean）上的移动 chrome 浏览器中开发的 html 屏幕。

显然，在我的 MacBook Pro 上，我可以运行本地服务器并通过 LocalHost:3000 url 在我的机器上查看该站点。是否可以在我的手机/macbook pro 上完成一些网络配置，以便在我的机器上运行时查看手机上的本地主机站点？无论如何都可以利用 Chrome 开发工具吗？

例如

[https://developers.google.com/chrome/mobile/docs/debugging](https://developers.google.com/chrome/mobile/docs/debugging)

回答这个问题的人 +5 酷点。:)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-10-16T05:14:30.300

对于使用 Rails 4.2 的任何人，尝试通过 ip 地址访问可能会由于[Rails 的更改](http://edgeguides.rubyonrails.org/4_2_release_notes.html#default-host-for-rails-server)而失败。

使用启动服务器`rails server -b 0.0.0.0`将允许您像以前一样从手机访问您的本地主机。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-07T15:54:19.687

在您的 Mac 上打开您的网络首选项（单击顶部的 wifi 信号）。找到您当前连接的网络的 IP 地址。在手机的浏览器中，输入该 IP 地址并在其末尾附加 :3000

# android - Android Canvas 无法填满屏幕

> ID：11849537
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:03.790
> 
> 标签：android, android-layout, surfaceview

我正在尝试使用 SurfaceView 制作游戏并在画布上绘图，但画布并没有填满我手机上的整个屏幕！我在摩托罗拉 Atrix 2 上运行该应用程序，屏幕分辨率为 256 dpi，屏幕分辨率为 4.3。下面我发布了我的 main.xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.figitaki.pong.MainGamePanel
        android:id="@+id/MainGamePanel"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <TextView
            android:id="@+id/Welcome"
            android:text="@string/welcome_text"
            android:visibility="visible"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_gravity="center_horizontal"
            android:textColor="#88FFFFFF"
            android:textSize="24dp" />
    </RelativeLayout>

</FrameLayout> 
```

这是 MainGamePanel.java 类：

```
package com.figitaki.pong;

import android.content.Context;
import android.graphics.Canvas;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.util.Log;
import android.app.Activity;
import android.graphics.Color;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.AttributeSet;

public class MainGamePanel extends SurfaceView implements SurfaceHolder.Callback {

    private MainThread thread;
    private Ball ball;
    private Bitmap background;

    private static final String TAG = MainGamePanel.class.getSimpleName();

    public MainGamePanel(Context context, AttributeSet attribs) {
        super(context, attribs);

        getHolder().addCallback(this);

        ball = new Ball(BitmapFactory.decodeResource(getResources(), R.drawable.droid_1), 50, 50);
        background = BitmapFactory.decodeResource(getResources(), R.drawable.droid_1);

        thread = new MainThread(getHolder(), this);

        setFocusable(true);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        background = Bitmap.createScaledBitmap(background, width, height, true);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        thread.setRunning(true);
        thread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        while(retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            ball.handleActionDown((int)event.getX(), (int)event.getY());
            if(event.getY() > getHeight() - 50) {
                thread.setRunning(false);
                ((Activity)getContext()).finish();
            } else {
                Log.d(TAG, "Coords: x=" + event.getX() + ",y=" + event.getY());
            }
        }
        if(event.getAction() == MotionEvent.ACTION_MOVE) {
            if(ball.isTouched()) {
                ball.setX((int)event.getX());
                ball.setY((int)event.getY());
            }
        }
        if(event.getAction() == MotionEvent.ACTION_UP) {
            if(ball.isTouched()) 
                ball.setTouched(false);
        }

        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawBitmap(background, 0, 0, null);
        ball.draw(canvas);
    }
} 
```

我需要画布或表面视图或任何东西来填满整个屏幕。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:01:47.680

Figured it out. I just needed to add:

```
<uses-sdk android:targetSdkVersion=">=4" /> 
```

In my manifest file!

# asp.net - 中继器中的链接按钮以传递会话变量

> ID：11849539
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:07.110
> 
> 标签：asp.net

我有一个列出我的自定义数据的中继器，现在我要做的是使用 asp:linkbutton 将变量从一个页面传递到另一个页面。我遇到的问题是，当我在子例程中调用我的链接按钮时，它没有被识别。我查看了[在中继器中找不到链接按钮，](https://stackoverflow.com/questions/7099485/cant-find-a-link-button-in-a-repeater)但我认为在这种情况下它不会起作用。这是我的代码：

```
 <asp:Repeater ID="rptList" runat="server" EnableViewState="false" DataSourceID="SqlDataSource3">
<ItemTemplate>
    <div>
    <p>
    <b>Title: </b> <asp:LinkButton ID="lbnCookieVar" OnClick="lbnCookieVar_Click" Text='<%# Eval("Job_Title")%>' runat="server" /> <br />
    <b>Status: </b><%# Eval("Status")%><br />
    <b>Department: </b><%# Eval("Department")%><br />
    <b>Date Position Available: </b><%# Eval("Date_Position_Available")%><br />
    </p>
    </div>
</ItemTemplate>
</asp:Repeater> 
```

这是后面的代码

```
 protected void lbnCookieVar_Click(object sender, EventArgs e)
{
    Session["Data"] = lbnCookieVar.Text;
    Response.Redirect("Application.aspx");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:49:53.367

您需要通过函数的“sender”参数访问链接按钮：

```
protected void lbnCookieVar_Click(object sender, EventArgs e)
{
    Session["Data"] = (sender as LinkButton).Text;
    Response.Redirect("Application.aspx");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:37:30.187

丑陋，你让这种方式比你需要的更困难。

你为什么不使用Repeater 的ItemCommand 例程来获取它？然后你只需传递你想要做的命令参数。

```
<asp:Repeater ID="rptList" runat="server" EnableViewState="false" 
    DataSourceID="SqlDataSource3" OnItemCommand="rptList_ItemCommand">
<ItemTemplate>
    <div>
    <p>
    <b>Title: </b> <asp:LinkButton ID="lbnCookieVar" CommandText="click" CommandArgument='<%# Eval("Job_Title")%>' Text='<%# Eval("Job_Title")%>' runat="server" /> <br />
    <b>Status: </b><%# Eval("Status")%><br />
    <b>Department: </b><%# Eval("Department")%><br />
    <b>Date Position Available: </b><%# Eval("Date_Position_Available")%><br />
    </p>
    </div>
</ItemTemplate>
</asp:Repeater> 
```

代码背后：

我不知道谁更改了我的代码，但你错了。如果您按原样执行此操作，这就是您执行此操作的方式。当“click”应该是双引号时，我错误地在“click”周围加上了单引号。

```
protected void rptList_ItemCommand(object sender, CommandEventArgs e)
{
   if (e.CommandName == "click")
   {
       Session["Data"] = e.CommandArgument.ToString();
       Response.Redirect("Application.aspx");
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:50:57.877

试试这个，应该工作：

```
Session["Data"] = (sender as LinkButton).Text; 
```

完整的故事请参见此处：[更改中继器中链接按钮的文本](https://stackoverflow.com/questions/1767418/change-text-of-a-linkbutton-in-a-repeater)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:16:59.353

```
SessionStorage.LinkButtonText = Session["Data"] = ((LinkButton)sender).Text;

public class SessionStorage
{
    public Static String LinkButtonText
    {
        get
        {
            if (System.Web.HttpContext.Current.Session["LinkButtonText"] == null)
                return String.Empty;
            return Convert.ToString(
                       System.Web.HttpContext.Current.Session["LinkButtonText"]);
        }
        set
        {
            System.Web.HttpContext.Current.Session["LinkButtonText"] = value;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T18:34:24.997

嗨，这就是我修复它的方法！

```
<asp:Repeater ID="rptList" runat="server" EnableViewState="false" DataSourceID="SqlDataSource3">
<ItemTemplate>
    <div>
    <p>
    <b>Title: </b> <a href="CareerSummary.aspx?Job_Title=<%# Eval("Job_Title") %>&num=<%# Eval("num") %>"><%# Eval("Job_Title") %></a><br />
    <b>Status: </b><%# Eval("Status")%><br />
    <b>Department: </b><%# Eval("Department")%><br />
    <b>Date Position Available: </b><%# Eval("Date_Position_Available")%><br />
    </p>
    </div>
</ItemTemplate>
</asp:Repeater> 
```

您想要发送变量的页面后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {

        lblRow.Text = Request.QueryString["num"];
    }

} 
```

此方法必须在负载中才能工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T15:50:48.857

在转发器/列表视图中使用控件通常会有点奇怪。我认为在您的情况下，您可以执行以下操作：

```
Session["Data"] = ((LinkButton)sender).Text; 
```

# jquery - 在 CakePHP 中将 jQuery 事件添加到 Ajax 链接

> ID：11849542
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:11.060
> 
> 标签：jquery, ajax, cakephp

在 CakePHP 中将 jQuery 事件添加到 Ajax 链接中，我使用了以下方式，

```
<?php echo $this->Js->link(TITLE, array('controller' => 'CONTROLLER', 'action' => 'ACTION'), array('update' => '#DIV_ID', 'class' => 'FixAjaxReload') ); ?> 
```

它变成了一个 HTML 链接和下面的 JQuery

```
jQuery('a.FixAjaxReload').on('click', FUNCTION); 
```

另一方面，我需要在链接中添加一个事件，

```
(function(){jQuery("body").on('click', 'a.FixAjaxReload', function(event){
        var linkTo = jQuery(this).attr('href');
        if (navigator.appName.indexOf("Internet Explorer") > 0) {
            window.location.hash = '!' + linkTo.replace(window.baseUrl, '/');
        } else {
            window.history.pushState('', linkTo, linkTo);
        }
});})(); 
```

*   我在第二个事件中使用了选择器语法，因为链接可能由 ajax 调用加载
*   我在第一个事件中使用了其他语法（即没有更改 CakePHP 方式），因为如果我这样做了，该事件将被多次调用（以前的 Ajax 调用次数）

但有些他们不能一起工作

有任何想法吗？？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:29:32.687

根据我的经验，当您超出了与 CakePHP 捆绑在一起的 Javascript 助手的基本要求时，最好完全删除助手的使用，并手动实现您的 javascript。frameworks JS helper 生成的代码并不复杂，可以很容易地复制和扩展。

查看您的代码示例，您似乎对 Javascript 和 jQuery 有很好的掌握，因此这将是您的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:13:00.063

感谢您的帮助

我找到了我编辑蛋糕引擎的解决方案，在 JQueryEngineHelper 文件中 -> 事件函数我替换了“return false;” 用“event.preventDefault();” 问题不是我想的两种语法之间的冲突，而是“return false”；阻止执行下一个脚本的语句

再次感谢

# java - JFrame 打印很奇怪？

> ID：11849545
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:28.387
> 
> 标签：java, image, jframe, draw, paint

我正在尝试制作一个 java RAT，但 atm 我只有屏幕显示。当我运行它时，它会在 JFrame 上很好地显示屏幕，但是每次绘制时它都会将相同的图像拖得更低一点，如下所示： ![屏幕](../Images/4812614f3b39486de974072e57552c33.png)

客户：

```
import java.awt.AWTException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.io.IOException;
import java.net.Socket;
import java.util.zip.GZIPOutputStream;
import javax.imageio.ImageIO;

public class Client {

    public static void main(String[] args) {
        try {
            Robot robot = new Robot();
            Toolkit toolkit = Toolkit.getDefaultToolkit();
            Rectangle screen = new Rectangle((int) toolkit.getScreenSize().getWidth(), (int) toolkit.getScreenSize().getHeight());
            Socket socket = new Socket("127.0.0.1", 25565);
            GZIPOutputStream out = new GZIPOutputStream(socket.getOutputStream());

            while(socket.isConnected()) {
                ImageIO.write(robot.createScreenCapture(screen), "png", out);
            }
            out.close();
        } catch (AWTException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

服务器：

```
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.zip.GZIPInputStream;

import javax.imageio.ImageIO;

public class Server {

    public static void main(String[] args) {
        try {
            ServerFrame frame = new ServerFrame();
            ServerSocket serverSocket = new ServerSocket(25565);
            Socket socket = serverSocket.accept();
            GZIPInputStream in = new GZIPInputStream(socket.getInputStream());
            BufferedImage image = null;
            while(socket.isConnected()) {
                image = ImageIO.read(in);
                if(image != null) {
                    frame.setBufferedImage(image);
                }
            }
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

服务器框架：

```
import java.awt.Graphics;
import java.awt.image.BufferedImage;

import javax.swing.JFrame;

public class ServerFrame extends JFrame {

    private BufferedImage image;

    public ServerFrame() {
        setTitle("RAT");
        setSize(1920, 1080);
        setVisible(true);
        image = null;
    }

    public void setBufferedImage(BufferedImage image) {
        this.image = image;
        this.repaint();
    }

    public void paint(Graphics g) {
        if(image != null) {
            g.drawImage(image, 0, 0, this);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:36:33.753

由于某种原因，当您查看最大化的框架时，当您在 中绘制时，屏幕截图的`g.drawImage(image, 0, 0, this);` 绘制`JFrame`开始向上和向左滑动。

尝试`ServerFrame`从a 扩展`JPanel`并将其添加到 a `JFrame`，这样您就可以在左上角获得一个锚点。您也可以在其中添加一个`JScrollPane`，以便您可以使用屏幕截图浏览整个面板。

这是我用来复制您的情况的代码，只要按下一个键，它就会捕获屏幕。我将`ServerFrame`课程重命名为`ScreenCapture`.

希望能帮助到你。

```
import java.awt.AWTException;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class ScreenCapture extends JPanel implements KeyListener {

    private BufferedImage image;

    public ScreenCapture() {
        setSize(1920, 1080);
        setVisible(true);
        image = null;       
    }

    public void setBufferedImage() throws AWTException {
        Robot robot = new Robot();
        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Rectangle screen = new Rectangle((int) toolkit.getScreenSize().getWidth(), (int) toolkit.getScreenSize().getHeight());
        this.image = robot.createScreenCapture(screen);
        this.repaint();
    }

    public void paint(Graphics g) {
        if (image != null) {
            g.drawImage(image, 0, 0, this);
        }
    }

    @Override
    public void keyTyped(KeyEvent e) {}

    @Override
    public void keyPressed(KeyEvent e) {
        try {
            setBufferedImage();
        } catch (AWTException e1) {
            e1.printStackTrace();
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {}

    public static void main(String [] args) {
        ScreenCapture capture = new ScreenCapture();

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.addKeyListener(capture);
        frame.add(capture);
        frame.setSize(500, 500);
        frame.setVisible(true);
    }
} 
```

* * *

**编辑**

这是一段将图像包装在`JScollPane`.

```
import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class ScreenCapture extends JLabel implements KeyListener {

    private BufferedImage image;

    public ScreenCapture() {
        setSize(1920, 1080);
        setVisible(true);
        image = null;
    }

    public void setBufferedImage() throws AWTException {
        Robot robot = new Robot();
        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Rectangle screen = new Rectangle((int) toolkit.getScreenSize()
                .getWidth(), (int) toolkit.getScreenSize().getHeight());
        this.image = robot.createScreenCapture(screen);
        this.setIcon(new ImageIcon(this.image));
        this.repaint();
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        try {
            setBufferedImage();
        } catch (AWTException e1) {
            e1.printStackTrace();
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
    }

    public static void main(String[] args) {
        JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());

        ScreenCapture capture = new ScreenCapture();
        JScrollPane scroll = new JScrollPane();
        scroll.getViewport().add(capture);
        panel.add(scroll, BorderLayout.CENTER);

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(panel);
        frame.addKeyListener(capture);
        frame.setSize(500, 500);
        frame.setVisible(true);
    }
} 
```

# postgresql - 将 postgres 转储插入转换为批处理事务？

> ID：11849547
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:38.280
> 
> 标签：postgresql

我正在寻找一个工具/脚本来将千兆字节大小的 postgresql 转储文件转换为批处理事务提交文件。

它应该像这样在转储文件中插入`BEGIN`和`COMMIT`事务：

```
BEGIN;
CREATE...;
INSERT...;
INSERT...;
INSERT...;
...
COMMIT; 
BEGIN;
CREATE...;
INSERT...;
INSERT...;
INSERT...;
.... 
```

是的。任何事情都会比插入语句更好。问题是数据由数千兆字节的插入语句组成，并且交付伙伴无法发送另一种转储格式。

您知道转换/加速导入的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:21:42.253

您应该考虑使用[`COPY`命令](http://www.postgresql.org/docs/current/interactive/sql-copy.html)、[`\copy`元命令`psql`](http://www.postgresql.org/docs/current/interactive/app-psql.html#APP-PSQL-META-COMMANDS)或[`pg_bulkload`实用程序](http://pgbulkload.projects.postgresql.org/)。其中任何一个都应该比您展示的 Ruby 脚本快得多，并且已经过正确处理数据中的换行符和其他奇数字符的良好测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:47:38.280

因为我找不到工具，所以我创建了自己的脚本来完成这项工作：

```
#!/usr/bin/ruby
i=0
File.open(ARGV[1],"a"){|t|
    File.open(ARGV[0]){|f|                                                                                        
    a=[]
    while(l=f.gets(";"))                                                                               
      if(a.length==80)
          i+=1
          puts "i: #{i}" if(i%1000==0)
          t.write("BEGIN;\n#{a.join(" ")}\nCOMMIT;\n")
          a=[]
      else
        a<<l
      end
    end
    t.write("BEGIN;\n#{a.join(" ")}\nCOMMIT;\n")
      }
  } 
```

用法：`ruby batchtransact.rb input.sql output.sql`

# javascript - 表格排序器分页使表格行不可点击

> ID：11849549
> 
> 赞同：1
> 
> 时间：2012-08-07T15:47:45.407
> 
> 标签：javascript, jquery, jquery-ui, tablesorter

我在使用 tablesorter 分页插件时遇到问题。当我第一次生成页面时，表格行是可点击的，但是在我进入下一页/上一页，创建一个新表格或对表格进行排序后，无论我以何种方式修改表格，这些行都变得不可点击。

如何解决这个问题呢？

我的代码在这个 jsFiddle 中 [http://jsfiddle.net/hxKG3/](http://jsfiddle.net/hxKG3/)

它是一个滑动面板，可以点击“变量”触发器调出表格。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:04:54.577

Try this, I've changed in your fiddle and it seems to work

```
$('table.tablesorter tbody tr').live('click',function(event) { 
```

But be aware that 'live' is being deprecated, you should be using

```
$('table.tablesorter tbody tr').on('click',function(event) { 
```

, witch also doesn't work with tablesorter.

I guess it's because tablesorter has some years and it is not fully compatible with jquery 1.7.2

# spring - SimpleJdbcCall 性能

> ID：11849550
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:46.807
> 
> 标签：spring, jdbctemplate

与在 spring 中使用 RowMapper 机制相比，使用 SimpleJdbcCall 时调用存储过程需要更长的时间是否有原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T08:05:35.110

SimpleJDBCCall 是多线程的，应该重复使用。重用在某种意义上，相同的对象将被用来一次又一次地调用相同的过程。元数据访问只进行一次。

即使我们使用没有ProcedureColumnMetaDataAccess 的SimpleJDBCCall。它仍然与 DB 交互以获取其他元数据信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:10:34.460

使用 withoutProcedureColumnMetaDataAccess 就可以了。我可以得出结论，性能影响是由于为获取存储过程的参数而进行的元数据查找。

# ruby - Mongodb-Ruby 限制为特定字段

> ID：11849551
> 
> 赞同：1
> 
> 时间：2012-08-07T15:47:47.510
> 
> 标签：ruby, mongodb, mongodb-ruby

我在使用 Ruby API 限制来自 mongodb 的结果集中的字段时遇到了一些问题。

我有一个 mongo 集合，我在其中存储有关文件的信息。其中一个字段是“image_filename”。我正在尝试返回集合中具有此字段的任何记录的字段和 ID。

在 mongo shell 中，这是通过以下方式完成的：

```
db.images.find({"image_filename": /./}, {image_filename: 1} ) 
```

这很好用。但是，当我尝试通过[Ruby API进行类似查询时](http://api.mongodb.org/ruby/current/file.TUTORIAL.html#Specific_Queries)

```
result = mongo.db.find("image_filename" => /./, :fields => ['_id', 'image_filename']) 
```

我只得到一个空集。我想我又做错了什么。我已经尝试了上述所有可能的变化，有人能指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:14:01.007

你在使用集合吗？

```
result = mongo.db['images'].find({"image_filename" => /./}, {:fields => ['_id', 'image_filename']}) 
```

另请注意，我将查询与选项哈希分开。

# php - 如何使用这个 PHP 函数生成图像文件？

> ID：11849552
> 
> 赞同：0
> 
> 时间：2012-08-07T15:47:51.043
> 
> 标签：php, gd

我一直在寻找一种基于 GD 的解决方案来为图像添加透视变换，最终发现了一些看起来很有希望的东西：[http ://www.jqueryit.com/2010/03/set-perspective-of-image-using- php-gd.html](http://www.jqueryit.com/2010/03/set-perspective-of-image-using-php-gd.html)

但是，我不确定如何使用此功能实际生成新图像。我的方法是这样的：

```
function perspective($i,$gradient=0.85,$rightdown=true,$background=0xFFFFFF) {
    $mult=5;
    $w=imagesx($i);
    $h=imagesy($i);
    $image=imagecreatetruecolor($w*$mult,$h*$mult);
    imagecopyresized($image,$i,0,0,0,0,$w*$mult,$h*$mult,$w,$h);
    imagedestroy($i);
    $w*=$mult;
    $h*=$mult;
    $im=imagecreatetruecolor($w,$h);
    $background=imagecolorallocate($im,($background>>16)&0xFF,($background>>8)&0xFF,$background&0xFF);
    imagefill($im,0,0,$background);
    imageantialias($im,true);
    $nh=$h-($h*$gradient);
    for ($x=0; $x<$w; $x++) {
        $ni=(($rightdown) ? $x : $w-$x);
        $p=intval($h-(($ni/$w)*$nh));
        if (($p%2)<>0)
            $p-=1;
        $nx=intval(($p-$h)/2);
        imagecopyresampled($im,$image,$x,0,$x,$nx,1,$p,1,$h-1);
        imageline($im,$x,0,$x,-$nx-1,$background);
        imageline($im,$x,$h-1,$x,$h+$nx,$background);
    }
    imagedestroy($image);
    imagefilter($im,IMG_FILTER_SMOOTH,10);
    $i=imagecreatetruecolor($w/$mult,$h/$mult);
    imageantialias($i,true);
    imagecopyresampled($i,$im,0,0,0,0,$w,$h,$w*$mult,$h*$mult);
    imagedestroy($im);
    return $i;
}

$image = perspective("my_image.jpg");

imagejpeg($image , "my_image_converted.jpg"); 
```

不幸的是，它没有产生输出。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:54:29.227

因为当函数需要图像资源时，您不能只传递文件名。尝试：

```
$image = perspective(imagecreatefromjpeg("my_image.jpg")); 
```

通读您从链接中获取的函数，并具体查看调用[imagecopyresized()](http://us.php.net/manual/en/function.imagecopyresized.php)的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:54:07.197

如果您只是想显示它，您应该能够更改标题并回显图像。

```
header("Content-Type: image/jpg");
echo imagejpeg($image , "my_image_converted.jpg"); 
```

客户端浏览器将像任何其他 jpg 一样加载它。

# c# - 读取 XML 数据时已超出最大字符串内容长度配额 (8192)

> ID：11849560
> 
> 赞同：2
> 
> 时间：2012-08-07T15:48:26.973
> 
> 标签：c#, web-services, wcf

我有一个 C# 4.0 控制台应用程序，它调用位于 ASP.net 4.0 网站内的 WCF Web 服务。调用 Web 服务时，出现此错误：

```
The formatter threw an exception while trying to deserialize the message: 
Error in deserializing body of request message for operation 'AddArticle'. 
The maximum string content length quota (8192) has been exceeded while 
reading XML data. This quota may be increased by changing the 
MaxStringContentLength property on the XmlDictionaryReaderQuotas object 
used when creating the XML reader. 
Line 60, position 267. 
```

所以环顾四周，您似乎需要将配置文件中的 maxStringContentLength 和 maxReceivedMessageSize 属性增加到一个很大的数字。我已经这样做了，但仍然收到错误。

我的控制台应用程序的配置是：

```
 <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IXXXInterface" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="5242880" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
                    <message clientCredentialType="UserName" algorithmSuite="Default"/>
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://axa-ppp/webservices/xxxinterface.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IXXXInterface" contract="XXX_YYYY_Interface.IXXXInterface" name="BasicHttpBinding_IXXXInterface"/>
    </client> 
```

来自网站的配置是：

```
 <binding name="BasicHttpBinding_IXXXInterface" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="5242880" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          <security mode="None">
              <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
              <message clientCredentialType="UserName" algorithmSuite="Default"/>
          </security>
      </binding> 
```

和

```
 <endpoint address="http://xxx-ppp/webservices/xxxinterface.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IXXXInterface" contract="XXX_YYYY_Interface.IXXXInterface" name="BasicHttpBinding_IXXXInterface"/> 
```

**编辑：**

这是网站上的类文件：

```
public class XXXInterface : IXXXInterface
{

public bool AddArticle(string Title, string ArticleXml)
{
    ContentData article = new ContentData();
    article.Title = Title;
    article.Html = ArticleXml;
    article.FolderId = 320;

    ContentData newArticle = contentMgr.Add(article);

    if (newArticle == null)
    {
        return false;
    }
    else
    {
        return true;
    }        
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T06:25:40.560

我发现了问题！:D

问题出在`IdBookIssuerIssuedTokenBinding.CreateBindingElements()`.

我已经覆盖而不是调用基础：

```
public override BindingElementCollection CreateBindingElements()
{
    BindingElementCollection elements = new BindingElementCollection();

    elements.Add(this.security);
    elements.Add(this.transport);

    return elements;
} 
```

现在我正在这样做：

```
public override BindingElementCollection CreateBindingElements()
{
    BindingElementCollection elements = base.CreateBindingElements();

    var securityBindingElement = elements.Find<SecurityBindingElement>();
    elements.Remove(securityBindingElement);
    elements.Add(this.security);

    var transportBindingElement = elements.Find<HttpTransportBindingElement>();
    elements.Remove(transportBindingElement);
    elements.Add(this.transport);

    return elements;
} 
```

它就像一个魅力！

我无法解释为什么我需要调用 base。如果有人可以在评论中解释，那就太好了！

[https://stackoverflow.com/a/19574170/4339857](https://stackoverflow.com/a/19574170/4339857)

# php - 同时执行多个 php 脚本的最有效方法是什么？

> ID：11849561
> 
> 赞同：0
> 
> 时间：2012-08-07T15:48:30.893
> 
> 标签：php, curl-multi

目前我正在使用 multi_curl 在我自己的服务器上同时执行 php 文件。这似乎不是一种非常有效的方法，因为当需要同时执行 200 多个脚本时服务器会过载。我需要通过将所有必需的变量放在发布请求中来将变量发送到我当前执行的每个 php 脚本。

我知道另一个选项是 gearman，但我必须安装它，而且我不喜欢安装太多应用程序，尽管我不知道它是否是一个繁重的程序。我也不知道它是否对服务器更有效。

是否还有一个选项可以在 php 中使用 linux shell 命令？

我有一个标准配置的 linux 服务器，带有 php 和 mysql。

**所以我的问题是：**

同时执行许多 php 脚本的最有效方法是什么，它还允许我向每个脚本发送一组变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:52:52.400

老实说，使用 gearman 是一种好方法……多次使用它，以可靠地编组队列中的多个线程。

然后使用德语，您可以发送（通过一些数据库表通常是最好的方法）您的线程可以获取和使用的数据。提示，如果它是一组复杂且任意的变量，您可以将其存储为 JSON 或其他内容。

另一种方法是编写你自己的排队机制......我也根据这篇优秀的文章做到了这一点：http: [//squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part- 4-作为后台运行-守护进程-aka-forking/](http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-4-run-as-a-background-daemon-a-k-a-forking/)

# javascript - 如何将 console.log(object) 的输出保存到文件中？

> ID：11849562
> 
> 赞同：288
> 
> 时间：2012-08-07T15:48:35.237
> 
> 标签：javascript, json, google-chrome

我尝试使用`JSON.stringify(object)`，但它并没有影响整个结构和层次结构。

另一方面`console.log(object)`，这样做但我无法保存它。

在`console.log`输出中，我可以一一展开所有子项并选择和复制/粘贴，但结构太大了。

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2013-11-06T17:25:07.810

更新： [您现在只需右键单击](https://plus.google.com/u/0/+UmarHansa/posts/G3VZ9sG9SCH)

> 在控制台面板中右键单击 > 另存为以将记录的消息保存到文件中。

原答案：

您可以使用下面显示的这个 devtools 片段来创建一个 console.save 方法。它从输入创建一个 FileBlob，然后自动下载它。

```
(function(console){

console.save = function(data, filename){

    if(!data) {
        console.error('Console.save: No data')
        return;
    }

    if(!filename) filename = 'console.json'

    if(typeof data === "object"){
        data = JSON.stringify(data, undefined, 4)
    }

    var blob = new Blob([data], {type: 'text/json'}),
        e    = document.createEvent('MouseEvents'),
        a    = document.createElement('a')

    a.download = filename
    a.href = window.URL.createObjectURL(blob)
    a.dataset.downloadurl =  ['text/json', a.download, a.href].join(':')
    e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)
    a.dispatchEvent(e)
 }
})(console) 
```

来源：[http ://bgrins.github.io/devtools-snippets/#console-save](http://bgrins.github.io/devtools-snippets/#console-save)

* * *

## 回答 #2

> 赞同：312
> 
> 时间：2015-11-18T01:27:49.703

更新（06/2021）：

谷歌添加了一个菜单操作来复制对象。右键单击对象，然后单击`Copy object`

[![在此处输入图像描述](../Images/4a535f9b6c2b9457cc075d28fc059cec.png)](https://i.stack.imgur.com/EOKqr.png)

旧答案：

如果您记录了一个对象：

*   右键单击控制台中的对象，然后单击`Store as a global variable`
*   输出将类似于`temp1`
*   输入控制台`copy(temp1)`
*   粘贴到您喜欢的文本编辑器

* * *

## 回答 #3

> 赞同：141
> 
> 时间：2013-06-05T00:48:19.740

您可以使用[Chrome DevTools Utilities API`copy()`命令](https://developers.google.com/web/tools/chrome-devtools/console/utilities#copyobject)将指定对象的字符串表示形式复制到剪贴板。

如果您有很多对象，那么您实际上可以 JSON.stringify() 所有对象并继续将它们附加到字符串中。现在使用`copy()`方法将完整的字符串复制到剪贴板。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-17T18:00:07.220

有一个开源的 javascript 插件可以做到这一点 - [debugout.js](https://github.com/inorganik/debugout.js)

Debugout.js 记录并保存 console.logs，以便您的应用程序可以访问它们。完全公开，我写的。它可以适当地格式化不同的类型，可以处理嵌套对象和数组，并且可以选择在每个日志旁边放置一个时间戳。它还在一处切换实时记录。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-11-28T13:57:29.400

这真的很晚了，但也许它会帮助某人。我的解决方案似乎与 OP 所描述的问题相似，但也许它是 Chrome 现在提供的功能，但当时不是。在将对象写入控制台后，我尝试右键单击并保存 .log 文件，但给我的只是一个包含以下内容的文本文件：

> console.js:230 完成：数组（50000）[0 … 9999][10000 … 19999][20000 … 29999][30000 … 39999][40000 … 49999]长度：50000__proto__：数组（0）

这对任何人都没有用。

我最终做的是`console.log(data)`在代码中找到 ，在其上放置一个断点，然后在控制台中键入`JSON.Stringify(data)`，该控制台将整个对象显示为 JSON 字符串，Chrome 控制台实际上**为您提供了一个复制它的按钮**。然后粘贴到文本编辑器中，你的 JSON

[![在此处输入图像描述](../Images/4915bf9fef5a76e3bbc0a8b8e0dfb2d2.png)](https://i.stack.imgur.com/jXLCs.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-15T21:38:34.373

还有另一个开源工具允许您将所有`console.log`输出保存在服务器上的文件中 - [JS LogFlush](https://github.com/hindmost/jslogflush)（插件！）。

> ***JS LogFlush***是一个集成的 JavaScript 日志记录解决方案，包括：
> 
> *   跨浏览器 UI 替代 console.log - 在客户端。
> *   日志存储系统 - 在服务器端。

[演示](http://youtu.be/AFfTu2F3leM)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-05-03T09:16:00.033

右键单击控制台..单击另存为..它很简单..你会得到一个输出文本文件

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-02T19:41:07.353

您可以使用库`l2i`（[https://github.com/seriyvolk83/logs2indexeddb](https://github.com/seriyvolk83/logs2indexeddb)）保存您放入的所有内容`console.log` ，然后调用

```
l2i.download(); 
```

下载带有日志的文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-02-15T12:18:59.957

右键单击对象，我无法保存。

**下面给出了我的工作解决方案**

[记录为此答案](https://stackoverflow.com/a/7220510/7765316)中显示的漂亮字符串

```
console.log('jsonListBeauty', JSON.stringify(jsonList, null, 2)); 
```

在 Chrome DevTools 中，Log 显示如下

[![保存Jsonlog](../Images/0cd4477e7f4c8e50aa9179065af17aa7.png)](https://i.stack.imgur.com/PwnAw.png)

只需按复制，它将以所需的间距级别复制到剪贴板

将其粘贴到您喜欢的文本编辑器上并保存

* * *

> 图片拍摄于 2021 年 2 月 15 日，Google Chrome 版本 88.0.4324.150

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-16T00:39:57.393

更简单的方法是使用火狐开发工具，console.log(yourObject) -> 右键单击​​对象 -> 选择“复制对象” -> 将结果粘贴到记事本中

谢谢。

# django - 当我在 django 中添加 ForeignKey 时，如何使用 phpmyadmin 更新数据库？

> ID：11849569
> 
> 赞同：0
> 
> 时间：2012-08-07T15:49:04.443
> 
> 标签：django, foreign-keys, django-database

我有 Django 模型：

```
#models.py

class m1(models.Model):
    some_word = models.CharField() 
```

我已经使用“manage.py syncdb”命令创建了 db，然后将 ForeignKey 字段添加到模型中

```
#models.py

from django.contrib.auth.models import User
class m1(models.Model):
    some_word = models.CharField()
    user = models.ForeignKey(User) 
```

据我所知，原生django不提供数据库修改，所以我需要手动创建列'user_id'。好的，我去 phpmyadmin 并创建此列。此时一切正常，应用程序正常工作。但后来我明白我需要在用户字段中选择“空白=真”：

```
#models.py

from django.contrib.auth.models import User
class m1(models.Model):
    some_word = models.CharField()
    user = models.ForeignKey(User, blank = True) 
```

在保存任何 m1 对象时，我收到错误“无法分配无：“m1.user”不允许空值”。我知道如果我删除表并使用syncdb创建它，一切都会好起来的，如果我使用像South这样的迁移工具，它也可以。但我想了解这个机制并找出 db 有什么问题。

我调用“manage.py sqlall app”，它告诉“CREATE TABLE”并创建索引：

```
CREATE INDEX `app_m1_a703c35a` ON `app_m1` (`user_id`);

ALTER TABLE `app_m1` ADD CONSTRAINT `user_id_refs_id_5b1b34cc` 
FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); 
```

好的，我去 phpmyadmin 做这个 sql 的东西（坦率地说，我不知道这些索引是做什么的）。但是错误仍然存​​在。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:57:58.370

Firstly, you should use South to do these database migrations for you, especially as you admit you don't really understand what's going on.

Secondly, the error is not because it's missing `blank=True`, but because it's missing `null=True`, which is a completely different thing. The documentation explains this well.

# javascript - 检查所有元素的属性并修改另一个元素

> ID：11849575
> 
> 赞同：0
> 
> 时间：2012-08-07T15:49:16.220
> 
> 标签：javascript, jquery

这就是我的 html 的外观，

```
<tr id="group-1-11">
<tr class="child-of-group-1-11 " selected-group="1" >
<tr id="group-1-12" class="child-of-group-1-11" parent-id="group-1-11"  selected-group="1">
<tr class="child-of-group-1-12" parent-id="group-1-12"  selected-group="1">
<tr class="child-of-group-1-12" parent-id="group-1-12"  selected-group="1">
<tr class="child-of-group-1-11" selected-group="1" >
<tr id="group-1-85" class="child-of-group-1-11" parent-id="group-1-11" >
<tr class="child-of-group-1-85" selected-group="1" style="display: none;">
<tr id="group-1-355" class="child-of-group-1-85" parent-id="group-1-85" selected-group="1">
<tr id="group-1-2" class="child-of-group-1-11  parent " parent-id="group-1-11"> 
```

现在我的问题是我需要检查具有 class child-of-id 的元素是否具有属性 selected-group="1" 并且如果所有 child-of-id 都具有该属性然后添加新属性（检查， true) 到具有该特定 id 的元素。

```
// I have an array of ids
// var uniqueParentArray = ['group-1-11', 'group-1-12', 'group-1-85',...];
$.each(uniqueParentArray, function(index, parentId) {
            var allSelected = $('.child-of-'+parentId).each(function(){
                var selectedGroup = $(this).attr('selected-group');
                if(selectedGroup != '1')
                    return false;
                return true;
            });
            if(allSelected) {
                $('#'+parentId).attr("checked", true);
            }
      }); 
```

这意味着到最后我的结果应该是这样的：

```
 <tr id="group-1-12" class="child-of-group-1-11" parent-id="group-1-11"  selected-group="1" checked="true">
 <tr id="group-1-85" class="child-of-group-1-11" parent-id="group-1-11" checked="true"> 
```

但元素`id = "group-1-11"` **不应该**有那个属性`checked = "true"`

我希望上下文很清楚。我可能在脚本中有一个错误，因此结果输出不符合预期。请帮我修复错误，我希望`allSelected`是布尔值，但我可能不太熟悉该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:56:15.963

`.each()`无法按您希望的方式运行。您需要在调用 之前创建一个变量`.each()`，然后在遇到您要查找的条件时修改该变量。

```
$.each(uniqueParentArray, function(index, parentId) {
    var allSelected = true;
    $('.child-of-'+parentId).each(function(){
        var selectedGroup = $(this).attr('selected-group');
        if(selectedGroup != '1') {
            allSelected = false;
        }
    });
    if(allSelected) {
        $('#'+parentId).attr("checked", true);
    }
}); 
```

此代码将遍历所有`.child-of-(parentID)`元素。如果其中任何一个都没有`selected-group="1"`，则`allSelected`循环完成时将为 false。

在更一般的说明中，我建议`data-`对非标准 HTML 属性使用属性。这样您的标记仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:58:44.537

`return true`在 jQuery`.each`中与 for 循环中的相同`continue;`。`return false`相当于`break;`。这些都不会用作迭代的返回值，并传递给`allSelected`. 您可能正在查看类似`.filter`而不是的东西`.each`，它是一种减少，其中返回 false 意味着该元素被排除在列表之外。

这样的事情可能会奏效：

```
$('#' + uniqueParentArray.join(', #')).attr('checked', function() {
   return $('.child-of-' + $(this).attr('id')).filter(function() {
      return $(this).attr('selected-group') != '1';
   }).length == 0;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:23:06.970

您可以尝试以下方法：

```
$.each(uniqueParentArray, function(index, parentId) {
    // retrieve not selected elements for the given parent
    var notSelectedElements = $('.child-of-'+parentId+'[selected-group!="1"]');
    // if all elements are selected
    if(notSelectedElements.length === 0) {
         $('#'+parentId).attr("checked", true);
    }
}); 
```

# asp.net - ASP.NET VB Listview 将 ID 分配给表行

> ID：11849578
> 
> 赞同：0
> 
> 时间：2012-08-07T15:49:26.290
> 
> 标签：asp.net, vb.net

我想要做的是将一个 ID 分配给一个表行，其值是相关列的 ID。

澄清。我有一个带有 fields 的数据表`[ID]` `[Name]` `[Description]`，并像这样填充`ListView`：（为了清楚起见，我在这里简化了代码）

```
<asp:ListView ID="MainList" runat="server" DataKeyNames="id">
    <layouttemplate>
        <dl id="header">
            <dd class="rowHeader">Name</dd>
            <dd class="rowHeader">Description</dd>
        </dl>
        <asp:Panel runat="server" ID="itemPlaceholder">
        </asp:Panel>
    </layouttemplate>
    <itemtemplate>
        <dl class="row">
            <dd><%# Eval("name")%></dd>
            <dd><%# Eval("description")%></dd>
        </dl>
    </itemtemplate>
</asp:ListView> 
```

现在，我尝试的是像这样添加它。

```
<dl class="row" id='<%# Eval("id")%>'> 
```

当然它有效，但我需要将它作为变量传递，因为我需要用它检查一些东西。像这样：

```
<% Dim id as Integer = Eval("id") %>
<dl class="row" id='<%=id %>'> 
```

我收到了这个错误：

```
Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control. 
```

我明白为什么......我需要这个的原因是我可以将 id 与会话变量进行比较并相应地更改行类。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:54:16.207

您应该能够在类属性中执行相同类型的逻辑：

```
<dl class="row" id='<%# Eval("id")%>' class='<%= Eval("id") == Session["myValue"] ? "someCssClass" : "otherCssClass" %>'> 
```

我认为这应该有效。

# perl - 将jar文件放在apache的哪里？以及如何从 perl 访问它？

> ID：11849587
> 
> 赞同：1
> 
> 时间：2012-08-07T15:49:56.970
> 
> 标签：perl, apache, jar

我的网站托管在 ubuntu 上的 Apache 上。我得到了一个 JAR 文件，里面有两个文件夹和一些 .class 和 .scc 文件。假设 jar 文件名 = myJarfile，此存档中的文件夹 = myFolder，并且此文件夹中的 Class 为 = myClass。

我被告知要像这样运行课程：

```
java myFolder.myClass 
```

但我收到此错误：

```
$ java myFolder.myClass 
Exception in thread "main" java.lang.NoClassDefFoundError: myFolder/myClass
Caused by: java.lang.ClassNotFoundException: esGateKeeper.cookieServer
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: myFolder/myClass.  Program will exit. 
```

我也试过：

```
$ java myJarfile.myFolder.myClass
Exception in thread "main" java.lang.NoClassDefFoundError: myJarfile/myFolder/myClass
Caused by: java.lang.ClassNotFoundException: myJarfile.myFolder.myClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: myJarfile.myFolder.myClass.  Program will exit. 
```

管理员告诉我这是 CLASSPATH 问题。我不知道。我的网站使用 PERL CGI，根本没有 JAVA。我不是 JAVA 程序员，谷歌搜索并没有让我知道如何运行它。

类/或 JAR 文件应该在我的本地主机上启动一个 IPC 守护程序，我将从我的 PERL CGI 与之通信，以进行身份​​验证。它解密我从浏览器获得的 cookie。

我不确定我需要在我的服务器上安装什么才能运行它。我有如下java：

```
$ java -version
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b06)
Java HotSpot(TM) Client VM (build 17.0-b16, mixed mode, sharing) 
```

请建议。

泰。拉杰夫

_ ***OK* __**我通过导出指向 .jar 文件的 CLASSPATH 变量解决了这个问题：

```
export CLASSPATH="/full/path/to/myJarfile.jar" 
```

然后执行良好：

```
$ java myFolder.myClass 
```

启动守护进程....

但老实说，我不知道这里发生了什么。这个 .jar 文件中有两个文件夹：myFolder 和一个 META-INF。myFolder 有一堆 .class 文件和一个 .scc 文件。他们都没有被命名为“主要”....

我很感激时间和帮助扩展到我。

泰。拉杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:17:26.630

尝试将“-jar”标志添加到“java”。

假设“jar”文件创建了一个独立进程，您可以通过将启动命令添加到 /etc/rc.local 来将 Java 进程设置为在启动时启动。如果它是一项重要服务，您还需要对其进行监视以确保它正在运行，并准备好手动停止和启动它。如果您检测到它已挂起或未运行，您也可以考虑自动重新启动。

至于从 Perl 访问它，您需要从提供它的人那里获取文档。我希望它可以在端口上运行或创建可以连接的套接字。无论哪种情况，它都是 Java 应用程序都没有关系。Perl 用于连接端口或套接字的标准方法将适用。

关于 Classpath，如果您还没有阅读 Classpath，我建议您阅读一些[文档。](https://en.wikipedia.org/wiki/Classpath)如果对最佳变体有疑问，请询问您的 JAR 文件提供者以确定。

另见：

*   [Java - Jar 找不到包含的库和主类](https://stackoverflow.com/questions/6580118/java-jar-could-not-find-included-libraries-and-main-class?rq=1)

# handlebars.js - 使用 SammyJS 预编译的 Handlebars 模板

> ID：11849590
> 
> 赞同：4
> 
> 时间：2012-08-07T15:50:08.083
> 
> 标签：handlebars.js, mustache, sammy.js

我很难找到 SammyJS 是否可以本地处理预编译的 Handlebars 模板。有人对此有任何见解吗？

[http://sammyjs.org/docs/api/0.7.1/all#Sammy.Handlebars](http://sammyjs.org/docs/api/0.7.1/all#Sammy.Handlebars)

# ios - 如何将 iPhone-captured-video 转换为 HTTP Live Streaming 文件？

> ID：11849591
> 
> 赞同：4
> 
> 时间：2012-08-07T15:50:15.253
> 
> 标签：ios, video-streaming, http-live-streaming

我在 Amazon Web Services EC2/S3 上有一个 iOS 应用程序和 Django 后端。当前流程：

1.  iOS 应用程序使用输出 MP4 的 UIImagePickerController 捕获视频。
2.  MP4 被上传到我运行 Django 的 EC2 (Ubuntu) 服务器。
3.  Django 读取文件并上传到 S3 进行存储。
4.  现在，iOS 应用可以访问 S3 电影，以便稍后观看。这使用渐进式流式传输（即假流式传输，仅在下载时播放）。

**目标：** 我的目标是在这里使用 HTTP Live Streaming (HLS)。

有人可以就如何更改我当前的工作流程以在 S3 上获取 HLS 文件（.M3U8 和 .TS）以允许流式传输提供建议吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T10:18:00.617

这个问题真的很老，我想你已经继续前进了......

但只是为了完整起见 - 你至少有两个选择：

一种。只需将文件一次转换为具有所有所需比特率的 HLS 格式，将转换后的文件托管在 S3 中。

您可以使用 Encoding.com 或 Zencoder 之类的 3rd 方编码服务来执行此操作，使用 Kaltura 之类的平台部署您自己的堆栈（我无法立即回忆起很多其他平台）或使用 ffmpeg 滚动您自己的转码服务器。

湾。使用可以从您已有的 MP4 转码为动态选择格式的媒体服务器（取决于请求的客户端）。

Wowza Media Server 就是一个很好的例子。Microsoft 的 IIS 媒体服务和 Adob​​e 的 Flash 媒体服务器也被广泛用于向 iOS PLUS 提供其他几个平台。这里实际上有无穷无尽的选择，您所要做的就是为 HLS 正确配置每个服务器。Google 可以轻松找到适合您的样品。

在这两种情况下，您都可以设置 CloudFront，然后从 S3 或您选择的媒体服务器读取文件。后者相对更难，我没有做过，所以很遗憾我没有对你有用的链接。

# java - 如何使用 JNA 回调

> ID：11849595
> 
> 赞同：1
> 
> 时间：2012-08-07T15:50:29.297
> 
> 标签：java, callback, jna

我正在使用 JNA 调用 dll 文件的函数。

简单DLL.h：

```
typedef int (__stdcall *eventCallback)(unsigned int id, int value);

namespace test
{
   class hotas
   {
   public:
   static __declspec(dllexport) int readValue(int a);
   static __declspec(dllexport) void setCallback(eventCallback evnHnd);
   };
} 
```

简单DLL.cpp：

```
#include "simpleDLL.h"
#include <stdexcept>
using namespace std;

namespace test
{
    eventCallback callback1 = NULL;
int test::readValue(int a)
{
    return 2*a;
}

void test::setCallback(eventCallback evnHnd)
{
    callback1 = evnHnd;
}  
} 
```

我的 Java 界面如下所示：

```
public interface DLLMapping extends Library{

DLLMapping INSTANCE = (DLLMapping) Native.loadLibrary("simpleDLL", DLLMapping.class);

int readValue(int a);

public interface eventCallback extends Callback {

    boolean callback(int id, int value);
}

public void setCallback(eventCallback evnHnd);
} 
```

最后是java main：

```
public static void main(String[] args) {

    DLLMapping sdll = DLLMapping.INSTANCE;

    int a = 3;
    int result = sdll.readValue(a);
    System.out.println("Result: " + result);

    sdll.setCallback(new eventCallback(){
        public boolean callback(int id, int value) {
            //System.out.println("bla");
            return true;
        }
    });
} 
```

我的问题是我得到了错误，java 找不到函数 setCallback。我的代码有什么问题？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T05:22:34.747

C++ 与 C 不同。从您的 DLL (http://dependencywalker.com) 中转储符号，您将看到函数名（至少从链接器的角度来看）不是“setCallback”。

用于`extern "C"`避免导出函数的名称重命名，重命名 Java 函数以匹配导出的链接器符号，或使用 FunctionMapper 将 Java 方法名称映射到链接器符号。

# java - 从 GWT 中的 flexTable 获取小部件

> ID：11849598
> 
> 赞同：1
> 
> 时间：2012-08-07T15:50:38.057
> 
> 标签：java, gwt, gwt2, flextable

在一个弹性表中，3 个小部件在运行时连续添加。

前 2 个小部件是 ListBox，第三个小部件可以是 listBox 或 textBox。

我想知道第三个widjet是listBox还是textBox？？

我的代码了解前 2 个小部件

```
int count=flexTable.getRowCount();
        for(int i =0;i<count;i++){

            ListBox lbPropreties = (ListBox) flexTable.getWidget(i, 0);
            String propertyname =lbPropreties.getValue(lbPropreties.getSelectedIndex());
            ListBox lbCondition = (ListBox) flexTable.getWidget(i, 1);
            String condition =lbCondition.getValue(lbCondition.getSelectedIndex());

        } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:47:53.427

简单的解决方案：

```
Widget thirdWidget = flexTable.getWidget(i, 2);

if (thirdWidget instanceof ListBox) {
  ListBox listBox = (ListBox) thirdWidget;
  ...

} else if (thirdWidget instanceof TextBox) {
  TextBox textBox = (TextBox) thirdWidget;
  ...
} 
```

或者，使用一些变量来存储添加第三列时使用的小部件类型。

# python - 有没有更简洁的方法将本地时间转换为单个二进制列表？

> ID：11849599
> 
> 赞同：1
> 
> 时间：2012-08-07T15:50:44.123
> 
> 标签：python, python-2.7

我正在尝试获取本地时间并将其转换为单独的反向二进制数组/列表。

这是我的工作代码：

```
 secs = time.localtime()
    year, month, day, hour, minute, second, weekday, yearday, daylight = secs

    seconds_string = "{0:#b}".format(second)
    seconds_string = seconds_string[2:]
    seconds_list = list(seconds_string[::-1])

    minutes_string = "{0:#b}".format(minute)
    minutes_string = minutes_string[2:]
    minutes_list = list(minutes_string[::-1])

    hours_string = "{0:#b}".format(hour)
    hours_string = hours_string[2:]
    hours_list = list(hours_string[::-1]) 
```

如果可能的话，我想让它更简洁，但是像下面这样的尝试是行不通的。

```
 seconds_list = list("{0:#b}".format(second)[2::-1]) 
```

有没有办法做到这一点，我错过了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:54:57.050

你想要的其实是

```
seconds_list = list("{0:#b}".format(second)[:1:-1]) 
```

语法有点奇怪；切片是`from:to:step`。这是 a `from`of `None`， a `to`of 1 和 step of `-1`；当步长为负时，`from`默认到字符串的末尾，所以这意味着“从字符串的末尾向后，直到但不包括位置 1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:58:20.550

就在这里：

```
>>> ''.join('{0:#b}'.format(x)[2:] for x in time.localtime())
'11111011100100011110001111001110011110111001' 
```

要扭转这一点，您可以`[::-1]`在最后添加。

但这并不意味着你应该这样做。将清晰度置于较短的代码之上。

# java - Web Flow 在附加变量上崩溃

> ID：11849601
> 
> 赞同：0
> 
> 时间：2012-08-07T15:50:47.220
> 
> 标签：java, spring, web-applications, spring-webflow-2

我目前在使用 Spring Web Flows 2.0.7 时遇到问题，当提交变量时，webflow 崩溃。对应的 webflow 如下所示：

```
<flow xmlns="http://www.springframework.org/schema/webflow"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/webflow
                          http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

  <!-- some model, i use below -->
  <var name="register"
       class="org.zcore.conference.Registration" />

  <!-- my input id -->
  <input type="long" name="conId" value="flowScope.conId"/>

  <!-- my first view state -->
  <view-state id="register" model="register">
  <!-- imagine much more stuff here -->
</flow> 
```

当输入带有附加 conId (http://localhost:8080/app/myflow?conId=123) 的流时，会弹出以下错误：

```
2012-08-07 17:33:34,583 WARN 25205715@qtp-28882952-5 com.coremedia.cae.webflow.AbstractFlowViewController - Error handling flow request: 'Could not serialize flow execution; make sure all objects stored in flow or flash scope are serializable': /app/flow
org.springframework.webflow.execution.repository.snapshot.SnapshotCreationException: Could not serialize flow execution; make sure all objects stored in flow or flash scope are serializable 
```

我很惊讶，提供的值似乎不是可序列化的，因为它是一个简单的 int 值。看起来我在这里缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:41:12.460

确保 org.zcore.conference.Registration 是可序列化的，如果是，那么它可能是您视图状态中的另一个对象，不是

# java - 如何判断一个java方法是否可以在另一个方法中调用

> ID：11849606
> 
> 赞同：2
> 
> 时间：2012-08-07T15:51:02.033
> 
> 标签：java, testing, reflection

我正在尝试为我的项目编写一个测试，让我知道，我通过反射假设我正在测试的类是否**可能**调用特定方法。

请注意以下示例代码：

```
class A implements SomeInterface {
    @Override
    public process(B bInstance) {
        if (Math.rand() < 0.5)
            bInstance.thirdPartyCall(param1, param2); //I need this!
    }
} 
```

类覆盖方法 process(...)，该方法可能从传递给 process() 的对象之一调用方法。我需要我的测试来确定有问题的类是否已被编码为包含对 B() 的任何调用，以及参数是什么。如果我们只能将调用作为字符串获取，我希望能够使用它。

我们拥有覆盖 A() 的类和包含 B() 的类的所有源代码，但为了将来的维护，我们需要它是动态的。因为我们需要它是动态的，所以我不能只创建一个模拟，因为我不知道模拟的设置是否会影响从 bInstance 调用方法的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:10:00.393

您将无法通过反射来做到这一点，因为从广义上讲，反射可以告诉您有关类的*签名*，但不会为您提供有关其实现的任何信息。

为了做你所追求的，你需要查看字节码，并查看每个方法定义中出现的`invokevirtual`（或静态方法）代码。`invokestatic`使用它，您可以构建一种字典来确定什么叫什么。（大概这就是 IDE 所依赖的“查找用法”功能。）

对于您自己定义的“独立”方法，这可能就足够了。但是，对于覆盖或实现其他地方定义的方法的方法来说，事情会变得更加棘手 - 例如，如果您定义自己的`Runnable`或`Map`子类。仅仅通过检查字节码就很难知道方法调用的具体实现是什么（甚至被证明是不可能的），所以如果调用者只是有一个参考，你不能确定*你的*地图是否会被调用`get()`到`Map`. 同样，如果您确实有`Runnable`实现，那么您的类不太可能直接`A`调用`run`；该调用可能来自标准库中的某个地方（例如，在 an`ExecutorService`或 from`Thread.start()`)，因此您必须在类路径上的所有内容上构建一个非常大的传递调用映射，而不仅仅是您自己的代码。

另外，当然，要让它回到你的初始点——你根本无法检测到反射调用。 `Method.invoke()`从静态分析的角度来看，几乎可以调用任何东西。

* * *

我认为你的意图是好的，但除非你能找到一个现有的库来使用，否则为你的测试开发这种“覆盖”指标是不值得的。

# jquery - 如何将输入“shift+0”限制为“shift+9”，但“shift”应该接受（如“shift+A”或其他）

> ID：11849613
> 
> 赞同：0
> 
> 时间：2012-08-07T15:51:14.570
> 
> 标签：jquery

我需要限制特殊字符（如“/”、“\”）以及“$”（shift+4）、“#”（shift+3）的输入，但还需要允许输入大写字符，如“A” (shift+a) 等。

下面的代码有效，但我不限制“$”和所有（从“shift+0”到“shift+9”），因为我允许“shift”，给我一些回应如何做到这一点，

**HTML**

```
<input type="text" id="txtboxToFilter" /> 
```

**jQuery**

```
<script type="text/javascript" language="javascript">
$(document).ready(function () {
    $("#txtboxToFilter").keydown(function (event) {
        // Allow: backspace, delete, tab, escape, and enter
        if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
        // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) ||
        // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {
            // let it happen, don't do anything
            return;
        }
        else {
            // stop the keypress for special character "/", "\"
            if (event.keyCode >= 190) {
                event.preventDefault();
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:38:11.420

正如评论中提到的，如果要阻止使用特定字符，则应该在字符级别上攻击问题，而不是尝试限制特定键的使用。[我会在这个小提琴中](http://jsfiddle.net/ZA54d/)做类似的事情。我正在使用[正则表达式](http://www.w3schools.com/js/js_obj_regexp.asp)来替换所有出现的不需要的字符。因为在输入时打断用户有点奇怪，所以我使用`change()`了当文本字段失去焦点时触发的。

```
$("#text").change(function() {
    $("#text").val($("#text").val().replace(/\\|\//g, ""));
});​ 
```

# regex - Powershell拆分给出错误

> ID：11849614
> 
> 赞同：1
> 
> 时间：2012-08-07T15:51:19.297
> 
> 标签：regex, powershell, split

如果配置文件中的一段文本与参数不匹配，我正在尝试替换它。我在文件中读到了关键短语

```
 $list = @((get-content client.cfg) | where { $_ -match "node_name(.*)" } )
 $s = $list.split() 
```

我正在借用解析配置，但不知道 $list 是什么类。split() 函数给出一个错误，但 $s 被赋值。任务很奇怪。正则表达式应该给出两个结果，但是 $s 数组的字段太多，我得到一个系统对象错误。

我怎样才能将 $list 作为一个简单的文本数组与正则表达式的两个匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:55:14.100

要找出可用的方法并确定您正在使用的对象类型，请使用 Get-Member cmdlet：

```
$list | gm 
```

在这种情况下，它可能是一个字符串。

据我所知，字符串上的 .split() 方法需要某种参数。请参阅 MSDN 上的文档：

[http://msdn.microsoft.com/en-us/library/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

# c# - 提交后MVC3接收新模型数据

> ID：11849616
> 
> 赞同：0
> 
> 时间：2012-08-07T15:51:20.333
> 
> 标签：c#, asp.net-mvc-3, post, model, submit

我无法更新视图模型。

我有一个名为：概述

我在视图的控制器中有这个：

```
public ActionResult Overview()
{
    var evo = new OverviewViewObject
    {
        MvcGridModel = new MvcGrid(),  
        SingleExportData = new SingleExportData()
    };

    return View(evo);
} 
```

然后我保存按钮调用：

```
$.ajax({
         url: saveUrl,
         cache: false,
         type: "post",
         data: JSON.stringify({  Name:  myName  }),
          contentType: "application/json",
          success: function (data) { .. }... 
```

saveUrl 转到：

```
[HttpPost]
public ActionResult Save(MyDataType saveData)
{
    //todo save logic here

    var mvcGridModel =  GetGridData();
    var evo = new ExportDataOverviewViewObject
    {
        MvcGridModel = mvcGridModel ?? new MvcGrid(),
        SaveData = new MyDataType()
    };

    return View("Overview", evo);
} 
```

并且它在Save中运行良好，并且在saveData对象中的数据也很好，并且它直到最后都没有返回任何错误，但是当返回后它显示视图时，数据不再显示在那里。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:02:06.540

A couple of remarks:

*   If the Save button is a form submit button or an anchor make sure that you return false from the callback after the $.ajax call to ensure that the default action is not executed
*   In your controller action you are returning a full view (`return View()`) instead of a partial view which is what is more common for controller actions that are being invoked with AJAX.

So to recap:

```
$('#saveButton').click(function() {
    $.ajax({
        url: saveUrl,
        cache: false,
        type: 'POST',
        data: JSON.stringify({ Name: myName }),
        contentType: 'application/json',
        success: function (data) { 
            // do something with the data => refresh some
            // portion of your DOM
            $('#someDivId').html(data);
        }
    });
    return false;
}); 
```

and your controller action:

```
[HttpPost]
public ActionResult Save(MyDataType saveData)
{        
    //todo save logic here

    var mvcGridModel = GetGridData();
    var evo = new ExportDataOverviewViewObject
    {
        MvcGridModel = mvcGridModel ?? new MvcGrid(),
        SaveData = new MyDataType()
    };
    return PartialView("Overview", evo);
} 
```

# java - 在我的 Servlet 中，在服务器端如何处理 Multipart POST？

> ID：11849620
> 
> 赞同：0
> 
> 时间：2012-08-07T15:51:39.373
> 
> 标签：java, servlets, file-upload, multipart

也许我的问题与[这个](https://stackoverflow.com/questions/3510788/how-can-i-handle-multipart-form-data-post-requests-in-my-java-servlet)问题无关，但我不知道如何处理多部分 HTTP 请求。

我写了一个 HTTP 请求，它使用 POST 发送一个文件和一个字符串。如何在我的 Servlet 的服务器端同时获取两者？

这就是我所做的。我走对了吗？

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Gson gson = new Gson();
    Status status = new Status();

    boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    if(isMultipart){
        status.setSuccess(true);
        status.setDescription("It is OK.");
        DiskFileItemFactory factory = new DiskFileItemFactory();
        factory.setSizeThreshold(MAX_MEMORY_SIZED);
        factory.setRepository(new File(ADRESS_WHERE_I_WANT_TO_PUT_THE_FILE));
        ServletFileUpload upload = new ServletFileUpload(factory);
        upload.setSizeMax(MAX_FILE_SIZE_TO_BE_UPLOADED);
        try {
            List<FileItem> items = upload.parseRequest(request);
            Iterator iter = items.iterator();
            while (iter.hasNext()) { 

            ... // WHAT TO DO HERE TO GET MY STRING AND MY FILE ???

            }
    }
    else{
        status.setSuccess(false);
        status.setDescription("Not multipart.");
    }
    response.setContentType("application/json;charset=UTF-8");
    response.setCharacterEncoding("UTF-8");
    PrintWriter output = response.getWriter();
    output.write(gson.toJson(status));
    output.flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:54:33.270

我会查看[servlets.com](http://www.servlets.com/cos/)上提供的[MultipartParser](http://www.servlets.com/cos/javadoc/com/oreilly/servlet/multipart/MultipartParser.html)

从网站：

> 重新发明轮子没有任何意义——这里有一些我编写的 servlet 支持类，您可以使用它们。最著名的是文件上传包 MultipartRequest 和 MultipartParser

# javascript - 捕获标签的正则表达式

> ID：11849622
> 
> 赞同：0
> 
> 时间：2012-08-07T15:51:44.553
> 
> 标签：javascript, regex

我有以下 html 文本，在 javascript 中，我需要捕获所有具有类“page-break”的标签“p”，然后将其替换为任何文本。

我需要使用正则表达式，因为这个 html 文本将像文本一样被处理，而不像 DOM estrucutre

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Praesent pellentesque tincidunt adipiscing</p>

<p class="page-break">break</p>

<p>Suspendisse a velit at diam facilisis
egestas sit amet a lectus.</p>

<p class="page-break">other</p>

<p>Donec tristique placerat massa vitae hendrerit. Maecenas nec
massa adipiscing sem venenatis vehicula. Suspendisse mattis pretium
libero quis dignissim. Nulla volutpat imperdiet vehicula. Donec ut
tristique neque.</p> 
```

阻止我使用 dom 解析器的原因是我计划插入一个无效的 html 元素，我计划将以前的 HTML 转换为此，我需要像文本一样解析 firt 以跳过 html 验证，然后像这样粘贴它

```
 <div class="pag visible">
 <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    Praesent pellentesque tincidunt adipiscing</p>
 </div>
 <div class="pag">   
    <p>Suspendisse a velit at diam facilisis
    egestas sit amet a lectus.</p>
 </div>
 <div class="pag">   
    <p>Donec tristique placerat massa vitae hendrerit. Maecenas nec
    massa adipiscing sem venenatis vehicula. Suspendisse mattis pretium
    libero quis dignissim. Nulla volutpat imperdiet vehicula. Donec ut
    tristique neque.</p>
 </div> 
```

如您所见，每个“.page-break”都替换了ir

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:58:06.973

[不要使用正则表达式来解析 HTML](https://stackoverflow.com/a/1732454/936986)。改用 DOM。如果您有纯字符串，请创建一个`DocumentFragment`并将其分配给它`.innerHTML`以获取 DOM。

用找到您的`p`标签[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)，检查它们`.className`并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:56:57.277

你有没有想过使用 JQuery？

```
$('p').hasClass('page-break').html('replacement value goes here'); 
```

这将`<p>`用“替换值在此处”替换的内容

或`$('p').hasClass('page-break').remove();`将完全删除该`<p>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:04:09.593

不建议使用正则表达式解析 HTML。您可以使用 XPath 获取`<p>`具有指定条件的所有内容，并遍历返回的列表并更新`textContent`每个`<p>`内容，如下面的代码片段所示。

```
var pList = document.evaluate("//p[@class='page-break']", document, null, XPathResult.ANY_TYPE, null);   
var item = pList.iterateNext();  
while (item) {  
    item.textContent = "New Text";
    item = pList.iterateNext();  
} 
```

**解释**

`//p[@class='page-break']`将获取所有`<p>`带有`class='page-break'`. `document.evaluate`函数将返回您类型的对象`XPathResult`。使用`interateNext()`函数你可以得到它的元素。`textContent`您可以使用属性设置新文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T17:14:15.963

```
// your content
var content = '<p>Lorem ips...';
// to match any <p> with correspondent class
var regex = /(<p class.?=.?"page-break">.*<\/p>)+/g;
// to replace it with whatever you need:
content.replace(regex, "<p>MY TEXT HERE</p>"); 
```

[例子](http://jsfiddle.net/xp5Gm/10/)

# java - org.apache.commons.io.IOUtils.toString 错误解释 UTF-8

> ID：11849624
> 
> 赞同：2
> 
> 时间：2012-08-07T15:51:45.230
> 
> 标签：java, url, character-encoding

我正在尝试从 URI 获取源。它被报告为 UTF-8。我也尝试过 ISO-8859-1、ISO-8859-1 Windows-1250 和 ISO-8859-2。

这是我最近尝试的代码（尝试 ISO-8859-2）：

```
public static String getPage(String page,String charset) throws IOException{
        URL url=new URL(page);

        return org.apache.commons.io.IOUtils.toString(url.openConnection().getInputStream(),charset);
    }

    public static void main(String args[])throws Exception{
        String page=getPage("http://buscon.rae.es/drae/srv/search?val=aba","ISO-8859-2");
        System.out.println(page);
    } 
```

但结果是：

*apÄ?ge* 'quita, aparta', y este del gr. á¼?Ï?αÎ³Îµ)

代替：

（Del lat.apăge 'quita, aparta', y este del gr. ἄπαγε）。

同样，UTF-8（适用于其他代码和浏览器）和其他编码名称也以类似的方式失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:26:39.870

U+0103 (ă) 被编码为字节序列`C4 83`；此数据为 UTF-8。

该错误可能是由于您通过`PrintStream`附加到执行的其他转码操作`System.out`。这会将数据编码为[系统编码](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29)，这可能是有损转换，如果写入的设备不使用匹配的编码，可能会导致损坏。

*[您可以在此处](http://illegalargumentexception.blogspot.co.uk/2009/04/i18n-unicode-at-windows-command-prompt.html)阅读有关 Windows 控制台的一些分析。*

# css - IE8 不适用于脚本和 html5

> ID：11849625
> 
> 赞同：0
> 
> 时间：2012-08-07T15:51:50.667
> 
> 标签：css, html, internet-explorer

我的一个朋友为一个网站做志愿者工作，前几天来找我有一个问题。显然，特别是运行 IE8 的一些用户（来自已响应的用户）无法正确查看页面布局。此脚本位于 css 之前最顶部的每个页面的标题中。从他向我展示的屏幕截图中可以看出，IE 忽略了 CSS 并重叠了网站的各个部分。关于为什么的任何想法？

```
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:41:05.660

我们可能需要查看该站点才能给您一个好的答案，但这里有一些可能的解决方法。

1.  用户是否启用了 JavaScript？没有它，该脚本将根本无法工作。避免这种情况的唯一方法是不使用 html5，除非 ie8 支持对站点用户非常重要，否则这不是一个很好的选择。
2.  页面上是否有任何 JS 错误？它可能会阻止它加载。
3.  尝试下载该 js 文件并在本地而不是从谷歌加载它。有时跨域请求可能会导致问题。我从来没有遇到过从谷歌加载它的问题，但你可能想试试。有些浏览器对待它的方式不同。参见维基百科：[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)
4.  您可能还想确保该文件是问题所在。也许还有其他一些奇怪的事情正在发生。ie8 不会识别 html5 元素，因此它不会设置它们的样式。如果这是您遇到的布局问题，那么它可能就是那个文件。

另一件事。不要忘记在样式表中使用 html5 重置来将 ie 中的 html5 元素设置为“display:block”。没有它，他们可能无法正常工作。

**编辑：** 这是我在评论中提到的一个例子。

在 HTML 文件中：

```
<div class="container">
    <section id="left"><!-- sidebar --></section>
    <article><!--  content --></article>
</div> 
```

在样式表中：

```
.container{
    position:relative;
}

section#left{
    position:absolute;
    top:0;
    left:0;
} 
```

# .htaccess - 301 www 重定向后无法在多站点上使用网络管理员（仪表板）

> ID：11849627
> 
> 赞同：1
> 
> 时间：2012-08-07T15:51:53.517
> 
> 标签：.htaccess, wordpress

我最近为我当前正在运行的博客多站点（Wordpress 博客位于“mysite.com/home/”目录下）添加了 301 重定向非 WWW 到 .htaccess 上的 WWW，在这 3 个文件中的所有更改之后它们似乎工作正常以下：

**.HTACCESS**

```
# Redirect Non-WWW to WWW
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite\.com\home
RewriteRule ^(.*)$ http://www.mysite.com/home/$1 [R=301,L]
# END Redirect Non-WWW to WWW

RewriteEngine On
RewriteBase /home/
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
RewriteRule . index.php [L] 
```

**WP-CONFIG.PHP**

改变自

```
define('DOMAIN_CURRENT_SITE', 'mysite.com'); 
```

改成

```
define('DOMAIN_CURRENT_SITE', 'www.mysite.com'); 
```

**FUNCTIONS.PHP（主题）**

改变自

```
update_option('siteurl','http://mysite.com/home');
update_option('home','http://mysite.com/home');
global $oswcPostTypes; 
```

改成

```
update_option('siteurl','http://www.mysite.com/home');
update_option('home','http://www.mysite.com/home');
global $oswcPostTypes; 
```

我可以像往常一样查看我的站点并登录到每个站点仪表板，**但无法使用网络选项卡：**我的站点 > 网络管理员 > 仪表板、站点、用户。为了能够在多站点上使用网络选项卡而不使用任何插件或更改数据库中的所有数据，是否还有其他地方需要更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:35:40.350

您的重定向似乎状况不佳：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite\.com\home
RewriteRule ^(.*)$ http://www.mysite.com/home/$1 [R=301,L] 
```

这`%{HTTP_HOST}`是“主机：”标头请求中的内容，它只包含一个主机名（有时是一个端口），你不能在那里有 URI 路径。尝试将其更改为：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite\.com
RewriteRule ^/?home/(.*)$ http://www.mysite.com/home/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-26T01:11:07.880

您的值 "$current_blog->domain, $current_site->domain" 必须与 /wp-admin/network/admin.php 第 20 行中的 "$current_blog->path, $current_site->path" 相同。

检查域和路径列中的 *_wp_blogs 表。

将您的域值从 mysite.com 更新为 www.mysite.com

# android - Android APK 权限分析器

> ID：11849629
> 
> 赞同：0
> 
> 时间：2012-08-07T15:52:00.247
> 
> 标签：android, user-permissions

我想了解 Google 是否确实提供了 APK 权限分析器？我确实找到了这个：[http](http://code.google.com/p/apk-permission-analyzer/) ://code.google.com/p/apk-permission-analyzer/如果没有，谷歌（在 Bouncer 之外）是否检查 APK 权限的“相关性”？许多应用程序（此处未命名）可以访问非相关权限，即联系人和日历。有人说应用程序需要这些权限才能工作。对于我审查过的许多应用程序，我不相信这是真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:13:28.443

> 我想了解 Google 是否确实提供了 APK 权限分析器？

如果您指的是链接到项目的内容，则不。

> 如果没有，Google（在 Bouncer 之外）是否会检查 APK 权限的“相关性”？

据我们所知，并非如此。

# android - Android：重复背景停止重复旋转

> ID：11849630
> 
> 赞同：1
> 
> 时间：2012-08-07T15:52:03.427
> 
> 标签：android, background, rotation

我的问题如下：旋转时，由重复图案组成的背景发生变化，因此图案被拉伸而不是重复。什么可能是错的？

我有这个由重复模式组成的背景：

`< bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:src="@drawable/pattern" android:tileMode="repeat" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:23:29.503

您必须手动设置重复模式：

```
parent = (RelativeLayout) findViewById(R.id.log_parent);
    Bitmap bg = BitmapFactory.decodeResource(this.getResources(), R.drawable.pattern);
    BitmapDrawable patternRepeat = new BitmapDrawable(bg);
    patternRepeat.setTileModeX(Shader.TileMode.REPEAT);
    patternRepeat.setTileModeY(Shader.TileMode.REPEAT);
    parent.setBackgroundDrawable(patternRepeat); 
```

# java - 如何在 Eclipse 中找到被覆盖的方法？

> ID：11849631
> 
> 赞同：21
> 
> 时间：2012-08-07T15:52:12.543
> 
> 标签：java, eclipse, extends

当我查看 eclipse java 中的方法时，如何跳转到它覆盖/扩展的方法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-07T15:53:52.710

三种方法来解决它。

### 超链接方法（鼠标+键盘）

将鼠标悬停在覆盖的方法上时按 CTRL。

您应该会看到一个名为“打开超级实现”的选项。点击它 ！

从**[这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/whatsNew/jdt_whatsnew.html)**：

![在此处输入图像描述](../Images/8688d4976938b5581de463f18b0ea100.png)

### 键盘快捷键

对于奖励积分，您可以设置键盘快捷键来执行此操作：

![在此处输入图像描述](../Images/810526d4e4b1017e67abcaa0a46f44d7.png)

当您尝试设置键盘快捷键时，您可以通过键入来过滤`Open Super Im`。在我的 Eclipse Indigo 上找到了三个匹配项。我尝试一一设置它们，直到快捷方式出现`Navigate -> Open Super Implementation`如下：

![在此处输入图像描述](../Images/eb48dfdb4ac3859cad6474ebf4a8d7ed.png)

### 仅鼠标 - 使用垂直标尺

![在此处输入图像描述](../Images/7f7426021e98e6f4edfb49f103137780.png)

单击出现在垂直标尺中的覆盖标记，如上面的快照所示。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-07T15:59:03.713

在编辑器的左边缘，被覆盖的方法旁边有一个小三角形符号。工具提示告诉您要覆盖哪个超类，单击它会引导您进入相应的方法。

截屏：

![截屏](../Images/e1c6daf9b167f98e86957ef77c872252.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:52:12.543

(Indigo Release) 将光标放在方法名称上，按 CTRL+T 跳转到类型列表，从那里可以跳转到超级方法。如果您随后再次单击 CTRL+T，它将展开超类型层次结构。

# text - wxPython中的闪烁文本

> ID：11849632
> 
> 赞同：1
> 
> 时间：2012-08-07T15:52:13.250
> 
> 标签：text, wxpython

我想知道是否有人知道将闪烁文本编程到 wxPython 中的方法？（我对 wxPython 相当陌生）它会每隔半秒左右在红色和正常之间闪烁一次，我使用的是 Python 2.7.3，而不是最新版本。

谢谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:55:26.930

您需要了解如何动态更改[字体](http://www.blog.pythonlibrary.org/2011/04/28/wxpython-learning-to-use-fonts/)。通常，它只是调用小部件的 SetFont() 方法。既然您想定期执行此操作，那么您几乎肯定会想要使用 wx.Timer。如果您愿意，可以阅读我关于该主题的[教程。](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)我可能会使用 StaticText 小部件。

**更新**：这是一个愚蠢的例子：

```
import random
import time
import wx

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        self.font = wx.Font(12, wx.DEFAULT, wx.NORMAL, wx.NORMAL)
        self.flashingText = wx.StaticText(self, label="I flash a LOT!")
        self.flashingText.SetFont(self.font)

        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.update, self.timer)
        self.timer.Start(1000)

    #----------------------------------------------------------------------
    def update(self, event):
        """"""
        now = int(time.time())
        mod = now % 2
        print now
        print mod
        if mod:
            self.flashingText.SetLabel("Current time: %i" % now)
        else:
            self.flashingText.SetLabel("Oops! It's mod zero time!")
        colors = ["blue", "green", "red", "yellow"]
        self.flashingText.SetForegroundColour(random.choice(colors))

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Flashing text!")
        panel = MyPanel(self)
        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    app.MainLoop() 
```

# c# - 在树视图中的 WPF 应用程序中出现崩溃

> ID：11849635
> 
> 赞同：1
> 
> 时间：2012-08-07T15:52:28.467
> 
> 标签：c#, .net, wpf

在我们的应用程序中，我们使用 WPF 并实现了`TreeView`. 此应用程序在所有机器上都可以正常工作，但在一台机器（Windows 7，不是所有 Windows 7 机器）上它会崩溃。

当我重命名一个节点`TreeView`并选择其他节点时，它会崩溃。

请为此提供解决方案，或者有什么方法可以找出为什么在特定机器上会出现此问题。

注意：此 m/c 不是开发人员 m/c。

# **下面是堆栈跟踪：**

> 无效 OnPropertyChanged（System.Windows.DependencyPropertyChangedEventArgs）
> 
> 你调用的对象是空的。
> 
> System.NullReferenceException：对象引用未设置为对象的实例。在 System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e) 在 System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args) 在 System.Windows.DependencyObject.InvalidateSubProperty(DependencyProperty dp) 在 System.Windows.Freezable.GetChangeHandlersAndInvalidateSubProperties(EventStorage& calledHandlers) 在 System .Windows.Freezable.GetChangeHandlersAndInvalidateSubProperties(EventStorage& calledHandlers) 在 System.Windows.Freezable.GetChangeHandlersAndInvalidateSubProperties(EventStorage& calledHandlers) 在 System.Windows.Freezable.GetChangeHandlersAndInvalidateSubProperties(EventStorage& calledHandlers) 在系统。

# javascript - 世界的最大纬度和经度界限 - Google Maps API LatLngBounds()

> ID：11849636
> 
> 赞同：46
> 
> 时间：2012-08-07T15:52:31.840
> 
> 标签：javascript, google-maps, google-maps-api-3, latitude-longitude

默认情况下，谷歌地图地形视图可以无限平移地图图块。您可以使用它`LatLngBounds()`来限制这一点，但是我应该使用哪些最大和最小坐标来将视口设置为地球而不是地图区域之外？

北美坐标：

```
var strictBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(28.70, -127.50), 
    new google.maps.LatLng(48.85, -55.90)
); 
```

我试过`(+90, -180)(-90,180)`没有运气。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-12-11T16:40:32.003

@Marcelo & @Doc 提供的链接有助于*理解*Lat Lng 的*推导*：

*   [http://www.cienciaviva.pt/latlong/anterior/gps.asp?accao=changelang&lang=en](http://www.cienciaviva.pt/latlong/anterior/gps.asp?accao=changelang&lang=en)
*   [https://groups.google.com/forum/?hl=en&fromgroups=#!msg/google-maps-api/oJkyualxzyY/pNv1SE7qpBoJ](https://groups.google.com/forum/?hl=en&fromgroups=#!msg/google-maps-api/oJkyualxzyY/pNv1SE7qpBoJ)
*   [https://en.wikipedia.org/wiki/Mercator_projection#Mathematics_of_the_Mercator_projection](https://en.wikipedia.org/wiki/Mercator_projection#Mathematics_of_the_Mercator_projection)

但是，如果您*只想*了解**Google Maps**的*最大界限*：

 **`Latitude: -85 to +85` （*由于某种原因实际上是-85.05115*）

`Longitude: -180 to +180`

*在 Google 地图上亲自*尝试一下：**

 **   [https://maps.google.com/?q=85,180](https://maps.google.com/?q=85,180)
*   [https://maps.google.com/?q=-85.05115,180](https://maps.google.com/?q=-85.05115,180)

（您可能需要*缩小*。看看大头针是如何在世界的“边缘” - 这些是*限制*）

所以在你的代码中*尝试*：

```
var strictBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(85, -180),           // top left corner of map
    new google.maps.LatLng(-85, 180)            // bottom right corner
); 
```

*得到答案后，请编辑此 wiki（或更新您的问题）。谢谢*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-08T16:12:26.617

请参阅旧 Google Groups 中的[**这篇文章**](http://groups.google.com/group/google-maps-api/msg/1aa4ea4e48f5dba4?hl=en)，其中描述了投影的数学。

引用：

> 地图不是从 85 度开始的，而是使地图呈正方形的度数。这可以简单地计算为：atan(sinh(PI)) *180 / PI = 85.05112878....

请注意，该帖子中的平铺计算适用于旧 API V2，但投影应该相同。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-11T12:05:26.270

您可以在 Google Maps 的帮助下执行以下操作以获取世界的 Max Lat 和 Long 边界：

**1：**设置谷歌地图的缩放级别 1 设置谷歌地图的东西：

```
mapOptions = {
                zoom: 1,
 .....
} 
```

**2.** 执行以下操作以获取此地图的 NorthEast 和 SouthWest Bound ：

> map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
> 
> ```
>  // NorthEast Latitude : 89.45016124669523
>      var latNEValue =  map.getBounds().getNorthEast().lat();
>     // NorthEast Longitude : 180
>      var longNEValue = map.getBounds().getNorthEast().lng();
>      // SouthWest Latitude : -87.71179927260242
>      var latSWValue =  map.getBounds().getSouthWest().lat();
>      // Southwest Latitude :  -180
>      var longSWValue = map.getBounds().getSouthWest().lng(); 
> ```

**3.**它会给你以下东北和西南边界：

> 东北纬：89.45016124669523
> 
> 东北经：180
> 
> 西南纬度：-87.71179927260242
> 
> 西南经度：-180

同样在 Zoom Level-0 上，它给出以下几点：

> 东北纬：89.99346179538875
> 
> 东北经：180
> 
> 西南纬度：-89.98155760646617
> 
> 西南经度：-180

以上技巧帮助我解决了需要最大纬度/经度的业务问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T16:02:55.630

有关 GPS 值的更多详细信息，您可以阅读[本文](http://www.cienciaviva.pt/latlong/anterior/gps.asp?accao=changelang&lang=en)。

文章解释说：

*   纬度是沿格林威治子午线测量的距赤道的距离。该距离以度为单位，范围在南北 0º 到 90º 之间。
*   经度是沿赤道测量的距格林威治子午线的距离。该距离以度为单位，范围从东和西 0º 到 180º。***

# jquery - 转义 jquery 更新 div

> ID：11849639
> 
> 赞同：2
> 
> 时间：2012-08-07T15:52:51.760
> 
> 标签：jquery

我有一个从文本区域`<p>`更新的标签。`.keyup`

```
$("textarea").keyup(function(e) {
            var newtext = $("textarea").val().replace(/\n/g,'<br/>');
            $("p").html(newtext);

        }); 
```

如何转义用户输入的 javascript。

我不想只转义 html 的 javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:55:35.183

而不是使用

```
$("p").html(newtext); 
```

你可以使用

```
$("p").text(newtext); 
```

它是 jQuery 中的一个[函数](http://api.jquery.com/text/)，可以自动转义 HTML。

**编辑：**

如果你只是想逃避 JS，你可以这样做：

```
 var a = "<b>This</b><script>aaa</script>";
var escapeHTML = function(a) {
    return a.replace(/&/g,'&').replace(/</g,'<').replace(/>/g,'>');
}

a.replace(re, function (_a){return escapeHTML(_a)}); 
```

并使用 .html() 设置 a.replace() 返回的字符串

# tfs - 将 TFSBuild.proj 与 RTC 一起使用？

> ID：11849641
> 
> 赞同：1
> 
> 时间：2012-08-07T15:53:03.170
> 
> 标签：tfs, tfsbuild, rtc, jazz

我目前正在尝试将应用程序从 Microsoft 的 TFS 迁移到 IBM 的 Rational Team Concert (RTC)。该应用程序当前正在使用 MSBuild 通过 TFS 中的 TeamBuild 和 TFSBuild.proj 文件进行构建。我想知道是否可以将此文件用于 RTC 中的构建？我可以通过指定 Visual Studio 解决方案文件 (*.sln) 来构建项目，但如果可能的话，我想通过重用 TFSBuild.proj 文件来构建项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:32:29.773

我找到了解决方法。无论我传入 *.sln 还是 *.proj 文件，Jazz Build Engine 似乎都试图调用名为“Build”的目标。因此，为了让 RTC 与我的 TFSBuild.proj 文件一起工作，我只是在其中添加了一个名为“Build”的目标，它调用了正确的入口点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:20:23.840

这似乎不可能，至少在本机上是不可能的。

jazz.net 网站没有提到 Tfsbuild.proj 文件，也没有在其手册或论坛部分中提及。

我总是看到从解决方案文件而不是从 TFS 文件启动的构建。

# php - 使用 PHP 进行动态流式压缩时如何发送内容大小

> ID：11849643
> 
> 赞同：1
> 
> 时间：2012-08-07T15:53:17.653
> 
> 标签：php, bash, streaming, zip, lamp

我一直在根据问题在我的网站上测试以下代码： [LAMP: How to create .Zip of large files for the user on the fly, without disk/CPU thrashing](https://stackoverflow.com/questions/4357073/on-the-fly-zipping-streaming-of-large-files-in-php-or-otherwise)

```
<?php
// make sure to send all headers first
// Content-Type is the most important one (probably)
//
header('Content-Type: application/octet-stream');
header('Content-disposition: attachment; filename="file.zip"');

// use popen to execute a unix command pipeline
// and grab the stdout as a php stream
// (you can use proc_open instead if you need to 
// control the input of the pipeline too)
//
$fp = popen('zip -0 -r - file1 file2 file3', 'r');

// pick a bufsize that makes you happy (8192 has been suggested).
$bufsize = 8192;
$buff = '';
while( !feof($fp) ) {
   $buff = fread($fp, $bufsize);
   echo $buff;
   flush();
}
pclose($fp); 
```

它可以很好地动态传输拉链。

但是有一个问题是它不会将文件大小发送给用户。大概是因为它以动态压缩的形式发送数据。

由于我使用的是零压缩压缩，有什么方法可以让它将大小发送给用户，因为大小是已知的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:24:41.663

您必须发送一个内容长度标头，如下所示：

```
header("Content-Length: $filesize"); 
```

# javascript - 使用 javascript 创建非常基本的模拟的教程

> ID：11849653
> 
> 赞同：0
> 
> 时间：2012-08-07T15:53:48.123
> 
> 标签：javascript

我最近一直在学习用 Javascript 编程。有人告诉我一段时间，可以创建“模拟”。我目前是一名学习物理学的大学生，并且对制作一个非常基本的模拟特别感兴趣，该模拟显示两个（2D）球在重力作用下相互吸引（所以基本上是一个非常简单的模拟器来说明万有引力 - 有人告诉我这个特别简单？）

然而，我一直在搜索各种网站以及从论坛给人们发电子邮件（尽管没有得到回应）。有没有教程可以让我学习编写这种东西（我想它涉及引入向量的概念）。我能够创建视觉球（使用一些基本的 html）并且实际的数学方面不是问题。真正的问题在于能够将所有这些东西放在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:58:21.267

基本的物理模拟器至少需要：

*   对象的位置 (x, y)
*   对象的大小/形状（通常通过图像）
*   运动速度和方向

然后假设重力下降，这就是您所需要的：只需在模拟的每一步都将重力矢量添加到对象的速度。

然而，如果你想模拟空间，物体相互吸引，你需要知道每个物体的质量并计算每个物体的重力：对于每个物体，寻找所有其他物体并计算重力。将所有生成的重力矢量加在一起，并将其添加到当前速度以获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:58:48.433

我会研究“ [Processing.js](http://www.processingjs.org) ”，是的，引力相当简单。提供该库的站点有许多可能对您有所帮助的示例。

www.processingjs.org

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:59:04.417

我建议学习 javascript 的物理引擎，例如[**BOX2DJS**](http://box2d-js.sourceforge.net/)。您可能会摆脱为游戏设计的任何物理引擎，因为这基本上就是您所需要的。通常会有任何这些物理引擎的教程，然后做你想做的事情对你来说会变得很容易。

# javascript - 在两个值之间插入或“补间”（但不是动画）

> ID：11849654
> 
> 赞同：3
> 
> 时间：2012-08-07T15:53:50.077
> 
> 标签：javascript, jquery

我有一个变量正在增加，比如说从 0 到 99。

然后我有一个div，我想以与增加变量相同的速率移动，但我只想定义移动的两端（例如从上到下移动，我只定义最高位置和最低位置） . 其余部分应在主变量将其值从 0 更改为 99 时自动插值。

我得到的所有搜索结果都与动画有关。但这并不完全是动画，因为如果变量没有改变，div 不应该移动。你会如何在 javascript 中做到最好？

编辑：一些模拟代码（可能有语法错误）：

```
<html>

<body>

<div id="increase"></div>
<div id="move"></div>

</body>

</html> 

 <script>
var counter =0;
var topValue =50;
var bottomValue =150;
var interpolatedValue

$('#increase').click(){
counter++; 
}

$('#move').css(){
top: interpolatedValue; //this should be an interpolation between 50 and 150 based on the current counter value
}

</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T16:05:51.293

就像是：

```
// b - beginning position
// e - ending position
// i - your current value (0-99)
function getTween(b, e, i) {
    return b + ((i/99) * (e-b));
} 
```

如果您的增量值与 0-99 不同，`99`则需要将函数中的硬编码更改为其他值，或者传入最大值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T16:07:46.830

例如，如果顶部和底部分别为 400 和 600，您可以通过一些简单的数学计算基于变量的位置。

```
var theVariable = 25; // 1 to 100
var top = 400;
var bottom = 600;
var distance = bottom - top;
var position = top + ((theVariable / 100) * distance); // 450 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:10:15.503

```
var MyVar = 0, Max = 99;
setInterval(increaseMyVar,30)//Call increaseMyVar every 30ms

function increaseMyVar()//MyVar Will go from 0 - 99
{
    MyVar = ++MyVar % Max;
}

//Do whatever you want with MyVar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:10:54.730

我可能会这样做，这样您就可以一次“动画”多个对象，而无需在脚本内部进行太多更改：

[http://jsfiddle.net/pvKYX/](http://jsfiddle.net/pvKYX/)

HTML：

```
<div class="mover" data-start="0" data-end="400" data-prop="margin-left"></div> 
```

jQuery：

```
var p = 0;
function start(){
    $('.mover').each(function(){
        var $t = $(this);
       $t.css($t.data('prop'),$t.data('start')+($t.data('end')-$t.data('start'))/100*p);
    });
    if(p<100){
        p++;
        setTimeout(start,Math.round(Math.random()*500));
    }
}
start(); 
```

​</p>

# c++ - 如何打包 DLL 以供所有用户运行

> ID：11849655
> 
> 赞同：0
> 
> 时间：2012-08-07T15:53:50.373
> 
> 标签：c++, excel, dll, com, add-in

我有一个使用 Visual Studio 2010 Pro 创建的 C++ COM DLL。我正在尝试打包一个 DLL 以在 Excel 中使用。但是，当我未在管理员模式下运行时尝试编译 DLL 时，我收到一条错误消息，指出我需要提升权限。我认为这很好。然后，我使用 Setup and Deploy 项目将 DLL 打包，在该项目中我将 DLL 安装并注册到特定路径。在用户尝试运行 DLL 之前，此方法效果很好。

如果定期运行它，那么什么都不会发生。只有在管理员模式下运行时，实际功能和一切才能正常运行。我的问题是，是否有一种简单的方法可以让安装程序添加它需要为所有机器运行的内容，或者是因为我以管理员身份编译了插件，我需要以某种方式编译为普通用户才能使其工作？如果后者需要完成，我将如何去做。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:02:32.997

Determining Which DLLs to Redistribute : [http://msdn.microsoft.com/en-us/library/8kche8ah.aspx](http://msdn.microsoft.com/en-us/library/8kche8ah.aspx)

Deployment Examples : [http://msdn.microsoft.com/en-us/library/ms235285.aspx](http://msdn.microsoft.com/en-us/library/ms235285.aspx)

# sql-server-2008 - sql server CASE - 在关键字'select'附近出现不正确的语法

> ID：11849657
> 
> 赞同：1
> 
> 时间：2012-08-07T15:53:55.193
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008。我有以下查询。我喜欢做的是，如果有记录存在，我喜欢将实际日期分配给“N/A”，否则我希望它是手头的 CreatedBy 日期。

```
 select ActualDate = (CASE
                         WHEN EXISTS
                         (select NeedHand from Truck 
                           where Truck.NeedHand = 0 and Truck.ID = '34343')
                         THEN
                          'N/A'
                         ELSE
                          SELECT  CreatedByDate from Hand  where ID = '34343'
                         END ) 
```

我收到以下消息：关键字“select”附近的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:57:34.187

我认为你的 EXIST 应该是 EXISTS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:00:51.467

您的查询存在许多问题。下面的版本应该照顾所有这些：

```
select  ActualDate = 
CASE 
     WHEN EXISTS(
            select NeedHand from Truck 
            where Truck.NeedHand = 0 and Truck.ID = '34343'
            )
     THEN
               'N/A'
     ELSE
               (SELECT  CreatedByDate from Hand  where ID = '34343')
END 
```

我不得不 ：

1.  更改`EXIST`为`EXISTS`
2.  更改`END CASE`为`END`
3.  在最后一个查询周围添加括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:02:52.217

## 选项1

```
SELECT
(
    CASE
        WHEN 
                Exists(SELECT top 1 NeedHand FROM Truck 
                WHERE Truck.NeedHand = 0 and Truck.ID = '34343')
        THEN
                'N/A'
        ELSE
                (SELECT TOP 1 CreatedByDate FROM Hand WHERE ID = '34343')
    END 
) 
```

## 选项 #2

```
SELECT
(
    CASE
        WHEN 
                ((SELECT top 1 NeedHand FROM Truck 
                WHERE Truck.NeedHand = 0 and Truck.ID = '34343') IS NOT NULL)
        THEN
                'N/A'
        ELSE
                (SELECT TOP 1 CreatedByDate FROM Hand WHERE ID = '34343')
    END 
) 
```

添加`Top 1`以避免以下问题

> Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.

# php - 检查字符串是否为双精度

> ID：11849663
> 
> 赞同：16
> 
> 时间：2012-08-07T15:54:14.763
> 
> 标签：php

我正在尝试检查 php 字符串是否为双精度字符串。

这是我的代码：

```
 if(floatval($num)){
         $this->print_half_star();
    } 
```

$num 是一个字符串..问题是即使有一个 int 它也会给出 true。有没有办法检查它是否是浮点数而不是整数！？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T16:02:11.303

```
// Try to convert the string to a float
$floatVal = floatval($num);
// If the parsing succeeded and the value is not equivalent to an int
if($floatVal && intval($floatVal) != $floatVal)
{
    // $num is a float
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-07T16:01:54.860

这将省略表示为字符串的整数值：

```
if(is_numeric($num) && strpos($num, ".") !== false)
{
    $this->print_half_star();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-07T16:02:25.320

你可以试试这个：

```
function isfloat($num) {
    return is_float($num) || is_numeric($num) && ((float) $num != (int) $num);
}

var_dump(isfloat(10));     // bool(false)
var_dump(isfloat(10.5));   // bool(true)
var_dump(isfloat("10"));   // bool(false)
var_dump(isfloat("10.5")); // bool(true) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-28T19:27:44.293

您可以检查该值是否为数字，然后检查小数点，所以...

```
if(is_numeric($val) && stripos($val,'.') !== false)
{
    //definitely a float
} 
```

但是它不能很好地处理科学记数法，因此您可能必须通过查找来手动处理它`e`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T16:03:57.353

为什么不使用正则表达式的魔力

```
<?php
$p = '/^[0-9]*\.[0-9]+$/';
$v = '89.00';
var_dump(preg_match($p, $v));
$v = '.01';
var_dump(preg_match($p, $v));
$v = '0.01';
var_dump(preg_match($p, $v));
$v = '89';
var_dump(preg_match($p, $v)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T16:05:53.680

如果“双字符串格式”像这样“XXXXXX.XXXXXX”

试试看

```
function check_double_string($str){
 $pairs = explode('.',$str);
 if ( is_array($pairs) && count($pairs)==2) {
   return ( is_numeric($pairs[0]) && is_numeric($pairs[1])? true : false; 
 }
 return false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-20T21:34:12.817

为了得到浮点数的所有情况，我们必须在末尾添加任何零，这可能会被`floatval()`或通过类型转换截断`(float)$num`

```
$num='17.000010';
$num_float = (float)$num; //$num_float is now 17.00001  
//add the zero's back to $num_float
while (strlen ($num) > strlen ($num_float))  $num_float = $num_float . '0';   //$spot_float in now a string again

if($num_float != $num) then $num was no double :; 
```

没有使用note`!==`以防万一`$num_float`从未通过添加零将其转换回字符串。不以 0 结尾的值就是这种情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-10T04:34:57.253

这是我最终为现代 PHP 创建的内容：

```
/**
 * Determines if a variable appears to be a float or not.
 *
 * @param string|int|double $number
 * @return bool True if it appears to be an integer value. "75.0000" returns false.
 * @throws InvalidArgumentException if $number is not a valid number.
 */
function isFloatLike($number): bool
{
    // Bail if it isn't even a number.
    if (!is_numeric($number)) {
        throw new InvalidArgumentException("'$number' is not a valid number.");
    }

    // Try to convert the variable to a float.
    $floatVal = floatval($number);

    // If the parsing succeeded and the value is not equivalent to an int, 
    return ($floatVal && intval($floatVal) != $floatVal);
} 
```

# haskell - 这种记忆是否正常工作？

> ID：11849664
> 
> 赞同：4
> 
> 时间：2012-08-07T15:54:15.130
> 
> 标签：haskell, memoization, collatz

我一直在 Haskell 中解决[Project Euler #14](http://projecteuler.net/problem=14)一段时间，但由于某种原因，我无法让它工作。不久前我使用 Groovy 解决了这个问题，我想我在这里使用的方法基本相同。然而，即使只是找到前 10,000 个长度，程序运行速度也非常慢，我现在真的不知道为什么。我认为我正在使用记忆化，但即使 GHCI 中的数据集很小，我的内存也会用完。

到目前为止，这是我想出的。

```
collatz = (map collatz' [0..] !!)
    where collatz' n
        | n == 1 = 1
        | n `mod` 2 == 0 = 1 + collatz (n `div` 2)
        | otherwise = 1 +  collatz (3 * n + 1) 
```

我会跑去`map collatz [1..1000000]`寻找问题的答案，但`map collatz [1..10000]`给了我一个内存不足的错误，并且还需要几秒钟才能完成运行。

如果有人能给我一些关于这个程序的问题的见解，那就太好了！我已经尝试了很多东西，但我只是卡住了，需要帮助。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T16:30:49.533

记忆在这里工作得很好。事实上，它运行得如此之好，以至于它填满了你所有的记忆。Collat​​z 序列的中间项变得相当大。`1`以up开头的任何序列中出现的最大项`1000000`是 number `2974984576`。所以这是您尝试在内存中构建的列表的长度。

另一方面，直接实现 Collat​​z 函数而不进行记忆应该可以很好地解决这个问题。

# spring - 具有多种模式的请求映射

> ID：11849680
> 
> 赞同：1
> 
> 时间：2012-08-07T15:55:00.580
> 
> 标签：spring

我有一个有两种方法的控制器。一个用于删除用户，另一个用于从角色中删除用户。

```
 @Controller
    @RequestMapping(value="/rest/users/**")
    public class UsersCtrlr {

        @RequestMapping(value="/{username:.+}", method=RequestMethod.DELETE)
        public @ResponseBody HttpStatusDoc deleteUser(HttpServletRequest req, @PathVariable String username) {
         ...
        }

        @RequestMapping(value="/{username:.+}/roles/{role:.+}", method=RequestMethod.DELETE)
        public @ResponseBody HttpStatusDoc deleteUserRole(HttpServletRequest req, @PathVariable String username, @PathVariable String role) {
         ...
        }
    } 
```

我的前端使用如下网址进行 jquery ajax 调用：

```
/rest/users/jdoe@foo.com/roles/some_role 
```

此 uri 被映射到 deleteUser 方法，其`username`等于`some_role`

我正在尝试让 uri 映射到 deleteUserRole 并将`username`设置为`jdoe@foo.com`和`role`设置为`some_role`.

为什么 uri 不会映射到 deleteUserRole？它与RequestMappings中的正则表达式有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:05:49.193

这可能是因为`**`在您的类 @RequestMapping 注释中，您的映射`deleteUser`将是`/rest/users/**/{username:.+}`和`deleteUserRole`将是`/rest/users/**/{username:.+}/roles/{role:.+}`，第一个将与`/rest/users/jdoe@foo.com/roles/some_role`模式匹配。`**`如果从类 @RequestMapping 注释中删除它应该可以工作

# asp.net - 在 ASP.NET 中访问原始请求

> ID：11849685
> 
> 赞同：0
> 
> 时间：2012-08-07T15:55:09.437
> 
> 标签：asp.net, web-services, iis, url-rewriting

我正在寻找一种绕过所有 ASP.NET 特定行为的方法，并像在大多数其他服务器上一样在 IIS/azure 服务器中工作（接收请求字符串，编写响应）。我知道这在 ASP.NET 中并不是一个普遍的愿望，但是如果移植一些外部代码以在 ASP.NET 上工作，那就太好了。

所以，基本上我正在寻找一种方法：

*   对于不是对物理文件的每个请求，请调用我的处理程序
*   这个处理程序将接收原始 HTTP 请求（它的抽象是可以的，因为我有相同的信息）
*   Web 服务器逻辑将处理请求并编写响应（同样，抽象也可以，因为我可以编写相同类型的信息，例如 HTTP 状态和 HTTP 标头）

实现这一目标的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:57:09.140

您可以自己编写一个自定义 HTTP 模块并将其注册到 IIS。 [http://msdn.microsoft.com/en-us/library/ms227673.aspx](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:10:40.587

[NancyFx](http://nancyfx.org/)怎么样？

> Nancy 旨在处理 DELETE、GET、HEAD、OPTIONS、POST、PUT 和 PATCH 请求，并提供简单、优雅的领域特定语言 (DSL)，只需几次击键即可返回响应，让您有更多时间专注在重要的位......你的代码和你的应用程序。

# excel - 修复 h=0 时格式错误的时间 'hh:nn:ss'

> ID：11849687
> 
> 赞同：2
> 
> 时间：2012-08-07T15:55:10.653
> 
> 标签：excel, vba, excel-formula

我正在做一份报告，计算人们确定工资的时间。我们从我们的服务器中提取报告并将它们粘贴到 Excel 中进行计算。我在提取数据时遇到了一个问题：如果他们登录的时间不到一个小时，我们的公式就不起作用：

`=IF(E159="","",((HOUR(E159)+(MINUTE(E159)+(SECOND(E159)/60))/60)))`

如果时间是 ，这会给出一个错误 ( `#value`) `:34:15`，但如果是，`00:34:15`那就没问题了。

格式化单元格似乎不起作用。

我想浏览本专栏并将 ' 添加`00`到所有缺少它的值中，我需要从那里获得一些帮助或指导。

[关于 SO 的另一个问题](https://stackoverflow.com/questions/5026423/excel-vba-selection-replace-and-if-replaced-put-text-in-column-a-of-the-replaced)看起来可能会有所帮助，但我不确定如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:04:21.183

假设 The tiem 位于上述公式中的单元格 E159 中，您可以将 0 附加到时间的开头。这将修复所有缺少小时的时间，并且不会影响其他线路。

```
="0"&E159 
```

然后，您可以使用此编辑替换`E159`原始公式中的所有引用，使其看起来像这样：

```
=IF(E159="","",((HOUR("0"&E159)+(MINUTE("0"&E159)+(SECOND("0"&E159)/60))/60))) 
```

虽然很难阅读，但它确实有用。

虽然这回答了你的问题。我认为有更好的方法来实现这个公式。

看起来您正在寻找的最终结果是将时间转换为小时，将 mulutes 和秒作为下一个小时的小数。您可以通过执行以下操作来实现：

```
=E159*24 
```

这将为您提供与原始公式相同的结果。然后将其与我的第一个答案结合起来，得到一个如下所示的公式：

```
=("0" & E159)*24 
```

这种方法更容易阅读/编辑并提供相同的输出。

**为什么这样有效**

Excel 将所有日期存储为整数，并将所有时间存储为天的十进制百分比。因此，当 Excel 存储 12 小时时，它会将其保存为 0.5，因为它是半天。通过将时间输出除以 24，我们将整个时间值从天的百分比转换为小时的百分比。

# iphone - 按下按钮时 IBAction 滞后

> ID：11849688
> 
> 赞同：1
> 
> 时间：2012-08-07T15:55:11.783
> 
> 标签：iphone

我有`UIViewController`一个`UITableView`在里面。我`UIView`在上面添加了一个子视图。当我在子视图上按下其中一个`UIButton`s 时，会出现明显的滞后。我怎样才能让它更快？

观看视频：[http ://www.youtube.com/watch?v=KWy6NrZUeqA&feature=youtu.be](http://www.youtube.com/watch?v=KWy6NrZUeqA&feature=youtu.be)

```
- (IBAction)tweetThat:(id)sender {
    [MBProgressHUD showHUDAddedTo:self.socialMediaView animated:YES];

    dispatch_queue_t queueOne=dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_sync(queueOne, ^{
        NSString *tweetBody=@"BLABLABLATweet";

        if ([TWTweetComposeViewController canSendTweet])
        {
            TWTweetComposeViewController *tweetSheet = 
            [[TWTweetComposeViewController alloc] init];
            [tweetSheet setInitialText:tweetBody];
            dispatch_async(dispatch_get_main_queue(), ^{
                [MBProgressHUD hideHUDForView:self.controllerView animated:YES];
                [self presentModalViewController:tweetSheet animated:YES];
            });
        }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T01:21:39.870

我已经使用了您在上面尝试的调度方法，但做了一些更改。它确实使体验变得更好。“loadingView”正如其名，只是在推文视图出现之前显示的加载视图。

```
 loadingView.hidden = NO;
    [loadingView setNeedsDisplay];
    if ([TWTweetComposeViewController canSendTweet])
    {
        double delayInSeconds = 0.5;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            TWTweetComposeViewController *tweet = [[TWTweetComposeViewController alloc]init];
            [tweet setInitialText:@"I'm using a new app called TickTalk to help my speaking cadence. Check it out!"];
            [tweet addURL:[NSURL URLWithString:@"http://www.ticktalkapp.com"]];
            TWTweetComposeViewControllerCompletionHandler
            completionHandler =
            ^(TWTweetComposeViewControllerResult result) {
                switch (result)
                {
                    case TWTweetComposeViewControllerResultCancelled:
                        NSLog(@"Twitter Result: canceled");
                        break;
                    case TWTweetComposeViewControllerResultDone:
                        NSLog(@"Twitter Result: sent");
                        break;
                    default:
                        NSLog(@"Twitter Result: default");
                        break;
                }
                loadingView.hidden = YES;
                [self dismissModalViewControllerAnimated:YES];
            };
            [tweet setCompletionHandler:completionHandler];
            [self presentModalViewController:tweet animated:YES];
        });
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Sorry" message:@"Your device is not setup to tweet" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        loadingView.hidden = YES;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:58:28.897

滞后来自`TWTweetComposeViewController`. 您对此无能为力，因为它是系统优化。您可能会注意到第二次和第三次按下按钮时延迟消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T01:24:38.433

将您的 dispatch_sync 更改为 dispatch_async。如果您要锁定 UI 直到它返回，那么调度到后台有什么意义。

# java - 检测何时按下 BlackBerry 轨迹球/键盘？

> ID：11849690
> 
> 赞同：1
> 
> 时间：2012-08-07T15:55:19.147
> 
> 标签：java, events, blackberry, trackball

我希望能够与轨迹球进行“一键激活”式交互。也就是说，我希望在推送的开始和结束时有一个事件通知。目前，使用下面的代码，我只能在放开轨迹球/垫时获得一个事件。

```
/**
 * listen for clicks
 */
public boolean navigationClick(int status, int time)
{
    System.out.println("click (" + status + "," + time + ")");

    return super.navigationClick(status, time);
} 
```

```
/**
 * listen for movement
 */
public boolean navigationMovement(int dx, int dy, int status, int time)
{
    System.out.println("move (" + dx + "," + dy + "," + status + "," + time + ")");

    return super.navigationMovement(dx, dy, status, time);
} 
```

当我第一次按下按钮时是否会触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:46:32.623

对此的解决方案是它只是模拟器中的一个问题。

它现在正在物理设备上工作，并且`navigationClick(..)`和`navigationUnclick(..)`方法完全符合他们的要求。它们基本上是轨迹球/垫的按钮按下和按钮按下事件。

# c# - 从 asp.net MVC 中发布的表单值填充模型

> ID：11849691
> 
> 赞同：1
> 
> 时间：2012-08-07T15:55:20.497
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个 SearchViewModel：

```
public class SearchViewModel
{
    [Required]
    public DateTime From { get; set; }
    [Required]
    public int Days { get; set; }
    public long DealerID { get; set; }
    public IQueryable<TypesAvail> TypesAvails { get; set; }
} 
```

IQueryable TypesAvails 是另一个类，它包含可从 DealerID 以及 SearchviewModel 类的 From 和 Days 属性之间获得的 CarTypes 列表 - 它还用于在视图中生成下拉列表：

```
public class TypesAvail
{
    public String TypeNme { get; set; }
    public long TypeID { get; set; }
    public int NumSelected { get; set; }
    public int TypeCount { get; set; }
    public IEnumerable<SelectListItem> CarsAvail 
    {
        get
        {
            return new SelectList(
                    Enumerable.Range(0, TypeCount+1)
                    .OrderBy(typecount => typecount)
                    .Select(typecount => new SelectListItem
                    {
                        Value = typecount.ToString(),
                        Text = typecount.ToString()
                    }), "Value", "Text");
        }
    } 
} 
```

我的控制器是：（**编辑：添加控制器以显示访问数据的代码）**

```
 public ActionResult Avail(SearchViewModel model, string id)
    {
        if (ModelState.IsValid)
        {
            var dteFrom = model.From;
            var dteTo = model.From.AddDays(model.Days);

            var prebookedCars = db.Cars
                .Where(car=> car.Rentals.Any(rental =>
                    (model.DealerID == rental.Dealerid) && (
                    (dteFrom >= rental.dateout && dteFrom < rental.datein )
                    ||
                    (dteTo > rental.dateout && dteTo <= rental.datein )
                    ||
                    (dteFrom <= rental.dateout && dteTo >= rental.datein )
                )));

            model.TypesAvails = db.Cars
                .Where(r => r.Dealerid == model.DealerID)
                .Except(prebookedCars)
                .GroupBy(p => p.CarType)
                .Select(g => new TypesAvail
                {
                    TypeNme = g.Key.type_name,
                    TypeID = g.Key.type_id,
                    TypeCount = g.Count(),
                    NumSelected = 0
                }
                );

            return View(model);
        }
        else
        {
            return View(model);
        }
    } 
```

逻辑（我有待纠正）如下：

1.  SearchViewModel 针对 TypesAvail 发送到带有 null 的视图
2.  当 Post 发生时，控制器将 From、Days 和 DealerID 直接填充回模型中，使用：

    `[HttpPost]`
    `public ActionResult Avail(SearchViewModel model)`

3.  在控制器中，它还会填充 TypesAvail IQueryable

因此，现在 ViewModel 具有搜索日期、天数和 TypesAvailable 列表，其中包括选择列表。

这在视图中重新填充，如下所示：

```
@model ebm2.ViewModels.SearchViewModel

@using (Html.BeginForm()) 
{
    @Html.ValidationSummary()

    <ul data-role="listview" data-inset="true">
        <li data-role="list-divider">Check Availability</li>
        <li data-role="fieldcontain">
            @Html.LabelFor(m => m.From)
            @Html.TextBoxFor(m => m.From, new { @type = "date", data_role = "datebox", data_options = "{\"mode\":\"slidebox\", \"overrideDateFormat\":\"%A %d %b %Y\"}" })    
            @Html.ValidationMessageFor(m => m.From)    
        </li>           
        <li data-role="fieldcontain">
            @Html.LabelFor(m => m.Days)
            @Html.TextBoxFor(m => m.Days, new { @type = "range", min = 1, max = 30 })            
            @Html.ValidationMessageFor(m => m.Days)    
        </li>
        <li data-role="fieldcontain">
            <input type="submit" value="Search" />
        </li>
    </ul>
    @Html.HiddenFor(m => m.DealerID)

    if (Model.TypesAvails != null)
    {
        <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">Book</li>
            @foreach (var item in Model.TypesAvails)
            {
                <li data-role="fieldcontain">      
                    @Html.HiddenFor(modelItem => item.TypeID) ->
                    @Html.DisplayFor(modelItem => item.NumSelected) ->
                    @Html.DropDownListFor(modelItem => item.NumSelected, item.CarsAvail)
                </li>
            }
        </ul>
    }
} 
```

返回服务器的第二个 POST 显示：

```
From=07%2F08%2F2012+00%3A00%3A00& Nights=1 & DealerID=1 & 
item.TypeID=3059 & item.NumSelected=3 & 
item.TypeID=3103 & item.NumSelected=2 & 
item.TypeID=3170 & item.NumSelected=7 & 
item.TypeID=3212 & item.NumSelected=4 
```

显示这些的 Razor 并没有将 TypeID 分配给每个下拉列表：

```
@Html.HiddenFor(modelItem => item.TypeID)
@Html.DropDownListFor(modelItem => item.NumSelected, item.CarsAvail) 
```

我的问题来自 POST 模型 - TypesAvail 显示为 NULL - 有没有办法在回发时直接进入 ViewModel 中表示下拉列表中的选定项目？

如果没有，我如何遍历 FORM 字段，以创建另一个模型 - 它将具有：

```
From
Days
DealerID
{
    TypeID = 3059, NumSelected = 3,
    TypeID = 3103, NumSelected = 2,
    TypeID = 3170, NumSelected = 7,
    TypeID = 3212, NumSelected = 4
} 
```

...然后我可以用来将记录添加到我的数据库（基本上是经销商想要在两个日期之间租用的汽车列表）。

或者我是否试图从一个表单中获取搜索日期，然后用多个下拉列表填充同一个表单，做太多事情 - 有没有更好的方法：

1.  从日期框和晚数搜索
2.  然后显示符合搜索条件的选项列表
3.  然后发布到服务器，并保存搜索数据（从日期、天数、dealerID），以及选择的下拉列表，以及在每个列表中选择了什么？

谢谢你，马克

**更新**

在 Shyu 的帮助下，我取得了一些进展——我添加了一个编辑器模板：

```
@model ebm2.Models.TypesAvail
@Html.DropDownListFor(modelItem => modelItem.NumSelected, Model.CarsAvail) 
```

...并在视图中呈现：

```
 @Html.EditorFor(model=>model.TypesAvails) 
```

但是，当我将表单发布回控制器（添加 editorTemplate 之后）时，我收到以下消息：

```
[MissingMethodException: Cannot create an instance of an interface.] 
```

我假设这意味着它不再识别模型 - 这是因为 EditorTemplate 吗？

是我的回发方法，然后将其添加到 ViewModel 是最好的方法吗，或者您是否建议使用 jQuery/Ajax 在客户端完成所有操作 - 并且只有在我完成 JSON 时才最终回发到服务器我的模型的对象？

我很感激这方面的任何指导。

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:05:38.627

使用**EditorTemplate**。

创建一个名为“EditorTemplates”的文件夹并创建一个名为“EditorTemplates”的视图（编辑器模板）`TypesAvail.cshtml`

现在将以下代码添加到这个新视图中。

```
@model TypesAvail
<p>
   @Html.DropDownListFor(modelItem => item.NumSelected, item.CarsAvail)
</p> 
```

现在在您的主视图中，使用`Html.EditorFor`HTML 帮助器方法调用此编辑器模板

```
@model ebm2.ViewModels.SearchViewModel
<h2>CarList</h2>
@using (Html.BeginForm())
{
    <p>Put other elements also </p>
    @Html.EditorFor(x=>x.TypesAvails)
    <input type="submit" value="Save" />
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-01T07:05:10.113

尝试

```
 Dim strcon As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=D:\webarticles\App_Data\mydatabase.mdf;Integrated Security=True;User Instance=True"
        Dim con As New SqlConnection(strcon)
        con.Open()

        Dim da As SqlDataAdapter
        Dim ds As New DataSet

        Dim sqlstring As String = "SELECT * FROM tblstudent "

        da = New SqlDataAdapter(sqlstring, con)
        da.Fill(ds)
        FormView1.DataSource = ds.Tables(0)
        FormView1.DataBind()
        Label1.Text = "Formview is filled"

    Catch ex As Exception
        Label1.Text = "There is Some Error"

    End Try 
```

FormView 是另一个用于处理记录的 asp.net 控件，它使您能够处理来自数据源的单个记录，类似于 DetailsView 控件。

# jquery - jQuery 对象：缓存还是不缓存？

> ID：11849692
> 
> 赞同：7
> 
> 时间：2012-08-07T15:55:23.197
> 
> 标签：jquery, caching

我的 Javascript (JS) 代码带来了一些麻烦，因为有时我需要在同一个函数中多次访问相同的 DOM 元素。[这里](https://stackoverflow.com/questions/3254555/jquery-why-create-a-variable-for-something-youre-only-referencing-once)也提供了一些推理。

从性能的角度来看，是创建一次jQuery对象然后缓存它更好还是随意创建相同的jQuery对象更好？例子：

```
function(){
  $('selector XXX').doSomething(); //first call
  $('selector XXX').doSomething(); //second call
  ...
  $('selector XXX').doSomething(); // n-th call
} 
```

或者

```
function(){
  var  obj = $('selector XXX');
  obj.doSomething(); //first call
  obj.doSomething(); //second call
  ...
  obj.doSomething(); // n-th call       
} 
```

我想答案可能取决于“n”的值，所以假设 n 是一个“小”数（例如 3），然后是一个中等数（例如 10），最后是一个大数（例如 30，例如对象用于在 for 循环中进行比较）。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T15:57:29.810

缓存元素总是更好，如果 n 大于 1，缓存元素，或者将操作链接在一起（您可以*对*`$('#something').something().somethingelse();`大多数*jQuery*操作执行此操作，因为它们通常返回包装集本身）。顺便说一句，以货币符号开头命名缓存变量已成为一种标准，`$`因此在后面的代码中很明显您正在对 jQuery 集执行操作。`var $content = $('#content');`所以你以后会看到很多人这样做`$content.find('...');`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T15:57:04.417

二是优越。最重要的是，它更干净。以后，如果你想改变你的选择器，你只需要改变一个地方。否则你需要在N个地方改变它。

其次，它应该表现得更好，尽管用户只会注意到特别重的 dom，或者如果您经常调用该函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T15:59:29.677

如果你从不同的角度来看这个问题，正确的答案是显而易见的。

在第一种情况下，您在其出现的每个地方都**复制**了选择逻辑。如果更改元素的名称，则必须更改每个出现的位置。这应该是足够的理由不这样做。现在你有两个选择——要么缓存元素的选择器，要么缓存元素本身。使用元素作为对象比使用名称更有意义。

在性能方面，我认为效果可以忽略不计。可能您将能够找到此特定用例的测试结果：缓存 jQuery 对象与总是重新选择它们。如果您有一个大型 DOM 并进行大量查找，性能可能会成为一个问题，但您需要自己查看是否是这种情况。

如果您想准确查看对象占用了多少内存，可以使用[Chrome Heap Profiler](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)并在那里进行检查。我不知道其他浏览器是否可以使用类似的工具，并且可能实现在性能上会有很大差异，尤其是在 IE 的情况下，但它可能会满足您的好奇心。

IMO，您应该使用第二个变体，将选择结果存储在一个对象中，与其说是提高性能，不如说是尽可能少地重复逻辑。

至于缓存`$(this)`，我同意[Nick Craver 的回答](https://stackoverflow.com/a/3857326/182629)。正如他在那里所说，您还应该尽可能使用链接 - 清理您的代码并解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T15:58:43.820

你应该看看 [http://www.artzstudio.com/2009/04/jquery-performance-rules/](http://www.artzstudio.com/2009/04/jquery-performance-rules/)

或者

[http://addyosmani.com/jqprovenperformance/](http://addyosmani.com/jqprovenperformance/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-19T18:49:40.077

我几乎总是更喜欢缓存 jQuery 对象，但是根据您用于选择器的确切内容，其好处会有很大差异。如果您使用 ids，那么好处远小于使用选择器类型的好处。此外，并非所有选择器都是平等创建的，因此在编写选择器时请记住这一点。

例如： `$('table tr td')`是一个很差的选择器。尝试使用 context 或 .find() 会产生很大的不同。

我喜欢做的一件事是在我的代码中放置计时器以查看它的效率。

```
var timer = new Date(); 
// code here
console.log('time to complete: ' + (new Date() - timer)); 
```

大多数缓存对象将在不到 2 毫秒的时间内执行，而全新的选择器需要更长的时间，因为您首先必须找到元素，然后执行操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-06T01:53:13.430

在 JavaScript 中，函数通常是短暂的——尤其是当由浏览器托管时。然而，一个函数的作用域可能比函数的寿命更长。例如，当您创建一个闭包时，就会发生这种情况。如果您想防止一个`jQuery`对象被长时间引用，您可以`null`在完成该变量或使用间接创建闭包时将其分配给引用它的任何变量。例如：

```
var createHandler = function (someClosedOverValue) {
    return function () {
        doSomethingWith(someClosedOverValue);
    };
}

var blah = function () {
    var myObject = jQuery('blah');

    // We want to enable the closure to access 'red' but not keep
    // myObject alive, so use a special createHandler for it:
    var myClosureWithoutAccessToMyObject = createHandler('red');

    doSomethingElseWith(myObject, myClosureWithoutAccessToMyObject);

    // After this function returns, and assuming doSomethingElseWith() does
    // not itself generate additional references to myObject, myObject
    // will no longer have any references and be elligible for garbage
    // collection.
} 
```

因为`jQuery(selector)`可能最终不得不运行昂贵的算法，甚至对于浏览器无法直接处理的复杂表达式稍微遍历 DOM 树，所以最好缓存返回的对象。此外，正如其他人所提到的，为了代码清晰，最好缓存返回的对象以避免多次键入选择器。即，DRY 代码通常比 WET 代码更容易维护。

然而，每个 jQuery 对象都有一些开销。因此，将大量 jQuery 对象存储在全局变量中可能是一种浪费——除非您确实需要对大量这些对象进行操作并且仍然将它们视为不同的。在这种情况下，您可以通过直接缓存 DOM 元素的数组并使用`jQuery(DOMElement)`构造函数来节省内存，该构造函数在迭代它们时基本上应该是免费的。

但是，正如人们所说，您只能通过对不同方法进行基准测试来了解针对您的特定情况的最佳方法。即使理论看起来很合理，也很难预测现实；-)。

# google-chrome - Chrome 3d 变换闪烁

> ID：11849695
> 
> 赞同：1
> 
> 时间：2012-08-07T15:55:32.383
> 
> 标签：google-chrome, css

任何人都可以在 Chrome 中解决此闪烁问题吗？它在 Safari 中运行良好：

[http://codepen.io/SequenceLabs/pen/dapxg](http://codepen.io/SequenceLabs/pen/dapxg)

我尝试了各种组合，`-webkit-transform-style: preserve-3d;`但没有任何乐趣。

# google-app-engine - appengine 对象化文本搜索

> ID：11849697
> 
> 赞同：1
> 
> 时间：2012-08-07T15:55:42.663
> 
> 标签：google-app-engine, full-text-search, gae-search

也许我遗漏了一些东西，但是有什么方法可以使用 2011 年演示文稿[http://www.youtube.com/watch?v=7B7FyU9wW8Y](http://www.youtube.com/watch?v=7B7FyU9wW8Y)（大约 30 分钟标记）中描述的新文本搜索功能与 Objectify、Entities 和爪哇？我意识到这是一个实验性版本，但现有的文本搜索功能似乎并未涵盖他们在演示文稿中讨论的全部内容。我不想编写自己的代码来管理文档的创建和更新。但我目前没有看到另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:16:45.460

目前，您不能使用全文搜索来搜索 Datastore 中的实体；您需要在搜索索引中创建搜索文档才能使用全文搜索 API，如[这些文档](https://developers.google.com/appengine/docs/java/search/overview)中所述。

# .net - 使用 MultiBinding 时将枚举值作为命令参数传递

> ID：11849699
> 
> 赞同：4
> 
> 时间：2012-08-07T15:55:45.690
> 
> 标签：.net, wpf, xaml, command

我想做与这篇[文章](https://stackoverflow.com/questions/359699/passing-an-enum-value-as-command-parameter-from-xaml)类似的事情，但使用 MultipleBindings。

所以是这样的：

```
 <Button.CommandParameter>
        <MultiBinding Converter="{StaticResource commandParametersConverter}">
            <MultiBinding.Bindings>
                <Binding Path="DataContext" />
                <Binding Path="{x:Static vm:Direction.Down}" Mode="OneWay"/>
            </MultiBinding.Bindings>
        </MultiBinding>
    </Button.CommandParameter> 
```

该行：

```
 <Binding Path="{x:Static vm:Direction.Down}" Mode="OneWay"/> 
```

引发错误：对象引用未设置为对象的实例。我假设在这种情况下不允许使用静态，那么下一个最佳选择是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T16:04:13.487

更改`Path`为：`Source`_`<Binding Path="{x:Static vm:Direction.Down}" Mode="OneWay"/>`

```
<Button.CommandParameter>
    <MultiBinding Converter="{StaticResource commandParametersConverter}">
        <MultiBinding.Bindings>
            <Binding Path="DataContext" />
            <Binding Source="{x:Static vm:Direction.Down}" Mode="OneWay"/>
        </MultiBinding.Bindings>
    </MultiBinding>
</Button.CommandParameter> 
```

# python - 如何让屏幕保护程序接受其他凭据？

> ID：11849700
> 
> 赞同：3
> 
> 时间：2012-08-07T15:55:46.110
> 
> 标签：python, gnome, screensaver

在 Windows XP 下，我看到一些商业软件可以使用 USB 设备保护计算机。也就是说，屏幕保护程序会像往常一样在一段时间后激活。但要停用，您不仅需要密码，还需要插入 USB 设备。该设备包含证书，必须在停用屏幕保护程序之前进行验证。

我正在寻找一些方法来用 Python 实现这样的功能。我在 Ubuntu 软件中心进行了搜索，发现 BlueProximity 是最接近我的目的但仍然不同的软件。该软件监控某个蓝牙设备，它的存在用于定期模拟用户活动以避免屏幕保护程序的激活。

当然，我可以做一个类似的程序，定期检查某个 USB 磁盘的存在并验证其包含的证书，如果一切正常，则将屏幕保护程序作为一些用户活动，否则锁定屏幕。

然而，这不是立竿见影的。假设有人偷了我的密码来解锁屏幕保护程序，而不是 U 盘，那么他可以解锁屏幕。并且在至少一分钟左右的时间内，屏幕应该再次被锁定。即使我的程序有一个相当短的检查周期——比如 0.1 秒，一个和另一个锁定之间存在从 0.1 秒和缓慢衰减的时间成本（通常接近 1 秒）的间隔总和。

那么有没有更好的解决方案，比如我的程序可以告诉屏幕保护程序拒绝以任何方式解锁的一些 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:02:30.883

您可能想看看[PAM](http://en.wikipedia.org/wiki/Pluggable_authentication_module)（可插入身份验证模块）。该解决方案将更通用、更健壮，并且可以应用于任何依赖 PAM 进行身份验证的程序。

# actionscript-3 - Flash 可扩展横幅 - 检测鼠标离开

> ID：11849705
> 
> 赞同：0
> 
> 时间：2012-08-07T15:56:04.123
> 
> 标签：actionscript-3, flash, banner, mouseout

我在 Flash 中创建了一个展开式横幅广告。一切都很棒，除了一件事。如何检测用户何时不再将鼠标悬停在 Flash 广告上？我试图添加一个可用于检测的“命中区域” `MOUSE_OUT`。问题是，有一个视频播放，以及需要可点击的社交媒体按钮。如果我在这些上面放置一个点击区域，它们就不再是可点击的。如果我将点击区域放在按钮后面，则`MOUSE_OUT`当您将鼠标悬停在按钮上时会触发事件。

对于这种情况，最佳实践是什么？我也尝试过`MOUSE_LEAVE`在舞台对象上进行检测，但是一旦部署在 HTML 页面上，这似乎无法正常工作。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:18:19.613

您可以尝试添加一个`ENTER_FRAME`不断检查`stage.mouseX`和`stage.mouseY`. 当鼠标在 Flash 内容上时，这些值应该正确报告，并且当鼠标不再在舞台上时，将报告最后已知的鼠标坐标。但是，最后已知的鼠标坐标可能并不总是舞台的实际宽度或高度，因此您可能需要在其中添加一些容差。

例如，如果您的（展开的）Flash 内容宽度为 500 像素，则`ENTER_FRAME`您可以检查`stage.mouseX`是小于 10 像素（鼠标向左移动）还是大于 490 像素（鼠标向右移动）并最小化 Flash内容。重复高度，并根据需要调整公差值。

这应该会给你你想要的效果。我能看到的唯一缺点是`ENTER_FRAME`事件的开销只是为了检查鼠标是否离开了内容，但我没有看到任何解决方法。

# c# - 字符数有限的 Double.ToString()

> ID：11849707
> 
> 赞同：0
> 
> 时间：2012-08-07T15:56:19.507
> 
> 标签：c#

假设我有一些双打：

```
12
10145
-0.00000000001455744121548787
100122455471000245487.05 
```

我希望能够将它们转换为最多包含 9 个字符的字符串。输出将类似于：

```
12
10145
-1.45e-11
1.0012e21 
```

是否有捷径可寻？

对于前两个数字，我不希望输出为：1.2e1 1.0145e4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:07:09.407

看起来你想`String.Format`用于你的格式。

您首先需要检查是否需要使用科学记数法（即，如果数字大于 10^7，介于 -10^-7 和 10^-7 之间），但打印数字的方式是科学记数法小数点后最多 6 位数字是：

```
String.Format("0.0######e+###", myDouble); 
```

# c# - 使用 C# 将变量分配给 powershell

> ID：11849712
> 
> 赞同：2
> 
> 时间：2012-08-07T15:56:38.233
> 
> 标签：c#, powershell, variable-assignment, pipeline

我想调用一个powershell脚本并传递一个参数。我都非常想最终传递一个以上的参数

```
 RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
        Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
        runspace.Open();
        RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);

        Pipeline pipeline = runspace.CreatePipeline();

        String scriptfile = "..\\..\\Resources\\new group.ps1";

        Command myCommand = new Command(scriptfile, false);

        CommandParameter testParam = new CommandParameter("test3");

        myCommand.Parameters.Add(testParam);

        pipeline.Commands.Add(myCommand);
        Collection<PSObject> psObjects;
        psObjects = pipeline.Invoke();
        runspace.Close(); 
```

问题似乎是……好吧，什么也没发生。这是如何正确分配变量？提供测试powershell脚本

```
# creates group
net localgroup $username /Add
# makes folder
#mkdir $path 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:07:09.740

这行代码：

```
CommandParameter testParam = new CommandParameter("test3"); 
```

创建一个名为`test3`null 的参数。我怀疑你想创建一个命名参数，例如：

```
CommandParameter testParam = new CommandParameter("username", "test3"); 
```

而且您的脚本需要配置为接受参数，例如：

```
--- Contents of 'new group.ps1 ---
param([string]$Username)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:00:05.943

需要设置 PowerShell 脚本以接受参数：

尝试将以下内容添加到该脚本的顶部并重新测试：

```
param([string]$username) 
```

或者，您可以将以下行添加到脚本的顶部：

```
$username = $args[0] 
```

祝你好运。

# tsql - 如何向我的 SQL 查询添加逻辑以包含/排除搜索参数？

> ID：11849718
> 
> 赞同：1
> 
> 时间：2012-08-07T15:56:58.280
> 
> 标签：tsql, sql-server-2008-r2

使用 SQL Server 2008R2，我这里有一个简单的查询：

```
SELECT *
FROM ItemData  
WHERE FREETEXT(Title, '"' + @OriginalSearchTerm + '"')   
AND  ( WebsiteID=@WebsiteID AND GeoCity = @GeoCity  AND GeoState = @GeoState )  
ORDER BY ItemListID DESC 
```

`@GeoCity`当and有一个有效值时，这一切都很好`@GeoState`。然而，会有一些场景是`@GeoCity = -1`和/或`@GeoState = -1`。

我宁愿不为这些情况编写完整的单独查询，尽管这样可以正常工作。

如何优化当前查询来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:02:31.940

我不确定您希望查询在何时`@GeoCity = -1`和/或`@GeoState = -1`. 假设您想在这种情况下排除`GeoCity = @GeoCity`和/或`GeoState = @GeoState`条件，这是查询：

```
SELECT *
FROM ItemData  
WHERE FREETEXT(Title, '"' + @OriginalSearchTerm + '"')   
AND  ( WebsiteID=@WebsiteID AND 
    (@GeoCity = -1 OR GeoCity = @GeoCity)  AND
    (@GeoState = -1 OR GeoState = @GeoState) )  
ORDER BY ItemListID DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:30:58.523

-- 这可能更有效，因为 OR 语句为每个 OR 语句执行块。

```
SELECT *
FROM ItemData  
WHERE FREETEXT(Title, '"' + @OriginalSearchTerm + '"')   
AND  ( WebsiteID=@WebsiteID AND 
    (GeoCity = ISNULL(@GeoCity,-1)) AND
    (GeoState = ISNULL(GeoState,-1))
ORDER BY ItemListID DESC 
```

# windows-7 - Where should I place my .vimrc not being processed on Windows 7 64-bit?

> ID：11849720
> 
> 赞同：0
> 
> 时间：2012-08-07T15:57:03.217
> 
> 标签：windows-7, vim

I just started a new job, and I've installed vim and gvim on the machine. I'm trying to get my `.vimrc` working, I've placed it in the directory that `%USERPROFILE%` points to, but vim isn't picking it up.

But while `%USERPROFLE%` does point to `C:\users\<me-name>` I've noticed that `My documents` are stored on an external share somewhere.

The share is also mapped...and I've tried putting .vimrc out there to, to no avail.

Is there some other place I can put .vimrc ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:17:48.730

在 Windows 中，`.vimrc`文件存储为`_vimrc`

更多信息请参考：http: [//vim.wikia.com/wiki/Open_vimrc_file](http://vim.wikia.com/wiki/Open_vimrc_file)

它包含您需要的所有信息以及更多信息。

# django - 如何在本地测试使用 example.com 域访问它的 Django 项目？

> ID：11849723
> 
> 赞同：0
> 
> 时间：2012-08-07T15:57:05.427
> 
> 标签：django, testing, localhost, ip-address, tld

我愿意测试 Django 项目，但我想使用“example.com”访问它。在我使用“127.0.0.1:8000”（`manage.py runserver`）之前，但现在我需要测试我的项目如何作用于不同的 TLD。我想做的就是以某种方式告诉我的计算机“example.com”指向“127.0.0.1:8000”。我不希望其他人可以访问它，所以这不是关于部署的问题。

我是 Linux 用户。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:00:44.433

`sudo vi /etc/hosts`并在末尾添加以下行。

```
127.0.0.1 example.com 
```

此外，如果您以 root 身份运行 Web 服务器，则可以使用端口 80，而不必`example.com:8000`在地址栏中输入内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:00:18.100

更改主机文件`/etc/hosts`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:00:58.583

只需编辑`/etc/hosts`以`example.com`映射到该 127.0.0.1。

我不认为您可以将其映射到特定的端口号，因此您需要访问`example.com:8000`或运行端口 80 上的服务器（可能通过 sudo）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:06:05.573

很简单，在 /etc/hosts 编辑您的主机文件，以便您的站点“example.com”映射到本地主机“127.0.0.1”

# java - 用Java模拟文件

> ID：11849728
> 
> 赞同：9
> 
> 时间：2012-08-07T15:57:16.840
> 
> 标签：java, unit-testing

我正在尝试为采用字符串文件名的方法编写单元测试，然后打开文件并从中读取。所以，为了测试那个方法，我想写一个文件，然后调用我的方法。但是，在构建农场中，不可能将文件任意写入磁盘。在我的单元测试中是否有“模拟”真实文件的标准方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T16:30:09.717

我发现[Mockito](http://code.google.com/p/mockito/)和[Powermock](http://www.powermock.org/)是一个很好的组合。实际上有一个带有示例的[博客文章，其中 File-class 的构造函数被模拟用于测试目的。](http://blog.griddynamics.com/2010/03/mocking-with-mockito-and-powermock.html)这也是我放在一起的一个小例子：

```
public class ClassToTest
{
    public void openFile(String fileName)
    {
        File f = new File(fileName);
        if(!f.exists())
        {
            throw new RuntimeException("File not found!");
        }
    }
} 
```

使用 Mockito + Powermock 进行测试：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(ClassToTest.class)
public class FileTest
{
    @Test
    public void testFile() throws Exception
    {
        //Set up a mocked File-object
        File mockedFile = Mockito.mock(File.class);
        Mockito.when(mockedFile.exists()).thenReturn(true);

        //Trap constructor calls to return the mocked File-object
        PowerMockito.whenNew(File.class).withParameterTypes(String.class).withArguments(Matchers.anyString()).thenReturn(mockedFile);

        //Do the test
        ClassToTest classToTest = new ClassToTest();
        classToTest.openFile("testfile.txt");

        //Verify that the File was created and the exists-method of the mock was called
        PowerMockito.verifyNew(File.class).withArguments("testfile.txt");
        Mockito.verify(mockedFile).exists();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-08T21:12:34.753

如果您使用 JUnit，则有[TemporaryFolder](http://junit.org/junit4/javadoc/4.12/org/junit/rules/TemporaryFolder.html)。文件在测试后被删除。页面上给出的示例：

```
public static class HasTempFolder {
  @Rule
  public TemporaryFolder folder= new TemporaryFolder();

  @Test
  public void testUsingTempFolder() throws IOException {
      File createdFile= folder.newFile("myfile.txt");
      File createdFolder= folder.newFolder("subfolder");
      // ...
     }
 } 
```

但是，我也使用它来测试我的 Android 类读/写功能，例如：

```
 [...]
    pw = new PrintWriter(folder.getAbsolutePath() + '/' + filename);
    pw.println(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:18:30.303

使用模拟流类如何，它完全覆盖真实的流类（如 BufferredReader、File）（意味着所有方法或您使用的所有方法）？如果要在不同的测试类之间使用数据，可以将数据保存为字节数组，例如，在某些单例中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-07T16:05:52.970

这是非常不赞成的：

> 最少的可测试代码。通常是单个方法/函数，不使用其他方法或类。快速地！数以千计的单元测试可以在十秒或更短的时间内运行！单元测试从不使用：
> 
> *   一个数据库
> *   应用服务器（或任何类型的服务器）
> *   文件/网络 I/O 或文件系统；
> *   另一个申请；
> *   控制台（System.out、System.err 等）
> *   日志记录
> *   大多数其他类（例外包括 DTO、String、Integer、mocks 和其他一些类）。"

[来源](http://www.javaranch.com/journal/200603/EvilUnitTests.html)

如果您必须从文件中读取，请预先生成一个测试文件，所有单元测试都可以从中读取。无需将任何内容写入磁盘。

# ruby-on-rails - Page caching trick on Heroku?

> ID：11849733
> 
> 赞同：0
> 
> 时间：2012-08-07T15:57:37.090
> 
> 标签：ruby-on-rails, caching, heroku

I am moving a rails app to Heroku. Heroku doesn't seem to support page caching. So I generated cached pages on my development machine and checked them in to Heroku.

For example, /about_us generates public/about_us.html. But when I call /about_us, public/about_us.html doesn't seem to be called.

Should my trick work?

Thanks.

Sam

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:11:30.180

在 Rails 3 中，您将使用资产管道，因此您的资产--about_us.html--将被预编译并放入您的公共文件夹内的文件夹中。通常，该文件不会位于“public/about_us.html”。

现在您的资产已预编译，它们将静态可用并附加一个 ID，该 ID 将唯一标识此资产，直到它被更改。使用唯一的签名，缓存将发生在 Heroku（我上次检查过的）以及浏览器中。

基本上，资产管道已经为您完成了这项工作。

# jquery - jQuery fancybox ajax function issue with firefox and chrome browser

> ID：11849734
> 
> 赞同：0
> 
> 时间：2012-08-07T15:57:44.053
> 
> 标签：jquery, fancybox-2

I have jQuery Fancybox 2 plugin from fancybox.net and I created a multiple links loop id records from database using fancybox.ajax as class look like this...

```
<a class="ajaxbox" href="showproduct.php?id=1" title="Show Product">Show Product ID 1</a>
<a class="ajaxbox" href="showproduct.php?id=2" title="Show Product">Show Product ID 2</a>
<a class="ajaxbox" href="showproduct.php?id=3" title="Show Product">Show Product ID 3</a> 
```

and my javascript code...

```
$(function(){
    $(".ajaxbox").fancybox({
        maxWidth : 900,
        maxHeight : 700,
        fitToView : false,
        autoSize     : true,
        openEffect : 'none',
        closeEffect : 'none',
        type : 'ajax'
    });
}); 
```

In IE and Safari it works great without any problems but I got a problem in Chrome and Firefox (14.0.1) The problem is when I click X button the fancybox is closed but when I open same fancybox.ajax again the backgroud opacity get darker and I try to close fancybox again the content is closed but the background is still dark. I have to click on the dark background again to close opacity effect. So, I try to open same fancybox.ajax same link again third time and I got background more darker than second time.

Btw. others fancybox function is ok only problem with ajax function.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T16:49:34.377

（由问题编辑回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我发现了 fancybox.ajax 函数会发生什么。
> 
> 第一个问题，我创建了文件名`javascript.js`并将其添加到所有页面中（包括在内`firstpage.php`，`showproduct.php`就像这样......

```
<script type="text/javascript" src="javascript.js"></script> 
```

> 我将fancybox脚本添加到`javascript.js`
> 
> 我认为 fancybox**与**`javascript.js`所以，我尝试从脚本中删除`.ajaxbox`并移动`javascript.js`脚本`firstpage.php`看起来像这样。

**第一页.php**

```
<script type="text/javascript" src="javascript.js"></script>
<script type="text/javascript">
$(function(){
    $(".ajaxbox").fancybox({
        maxWidth : 900,
        maxHeight : 700,
        fitToView : false,
        autoSize     : true,
        openEffect : 'none',
        closeEffect : 'none',
        type : 'ajax'
    });
});
</script> 
```

> 和**showproduct.php**（无`.ajaxbox`功能）

```
<script type="text/javascript" src="javascript.js"></script> 
```

> 并再次测试...好的。一切恢复正常。
> 
> 但！我需要相同的 javascript 函数适用于所有页面。所以，我创建了一个像这样的新函数并将其添加回`javascript.js`

```
function openajaxfancybox(url) {
    $.fancybox({
        maxWidth : 900,
        maxHeight : 700,
        fitToView : false,
        autoSize     : true,
        openEffect   : 'none',
        closeEffect : 'none',
        type : 'ajax',
        href : url
    });
} 
```

> 并用 href 替换 onclick 看起来像这样......

```
<a onclick="openajaxfancybox('showproduct.php?id=1');">Show Product ID 1</a>
<a onclick="openajaxfancybox('showproduct.php?id=2');">Show Product ID 2</a>
<a onclick="openajaxfancybox('showproduct.php?id=3');">Show Product ID 3</a> 
```

> 现在再次测试它！一切都按照我的意愿完美运行，没有任何问题。:)
> 
> PS：在 IE、Chrome、Firefox 和 Safari 上测试

# git - Which is official GUI of Git for windows?

> ID：11849737
> 
> 赞同：4
> 
> 时间：2012-08-07T15:57:47.877
> 
> 标签：git, version-control

Which is the official GUI of Git for windows? I'm confused between [git-scm](http://git-scm.com/) and [msysgit](http://msysgit.github.com/).

I know there is one [GUI from github](http://windows.github.com/) too but I want to use [bitbucket](https://bitbucket.org/account/signup/) for private free hosting too and I think Official github gui of windows will not work with bitbucket. So I want to learn use of common GUI which I can use with any host.

Are there other options? Which one should I choose?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:53:05.150

# php - Meaning of "Can't use method return value in write context"

> ID：11849738
> 
> 赞同：2
> 
> 时间：2012-08-07T15:57:49.670
> 
> 标签：php

> **Possible Duplicate:**
> [Can't use method return value in write context](https://stackoverflow.com/questions/1075534/cant-use-method-return-value-in-write-context)

I sometimes encountered this error `Can't use method return value in write context`. However, I don't know what does `WRITE CONTEXT` means in this sentence. Could someone tell me a little general explaination of it.

Thank you.

The code for this error if you want to refer to is on line `if(empty($this->loadUser()))` However just to clarify, I just want to find out the meaning of "write context":

```
public function verify()
{
    if(empty($this->loadUser()))
        $this->addError('username','Incorrect username.');
    else
    {
        $user = $this->loadUser();
        $project = $this->loadProject($pid);

        $project->associateUserToProject($this->loadUser());
        $project->associateUserToRole($this->role, $this->user->id)

    }
}

public function loadUser() {
    return User::model()->findByAttributes(array('username'=>$this->username));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:02:21.420

empty () is not a function really. It is a construct or macros, if you please. It means you cannot pass an object to it as argument. Just pure variables.

```
$is_use = $this->loadUser();
if (empty ($is_use))
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:02:32.840

`empty` only takes variables as an arg. `empty() only checks variables as anything else will result in a parse error.`

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

# razor - Role based navigation in Razor

> ID：11849740
> 
> 赞同：0
> 
> 时间：2012-08-07T15:57:54.923
> 
> 标签：razor, umbraco, roleprovider

We are creating a back end admin system and want to allow users in roles such as finance and membership to have access to certain areas. Ideally we would like to show only areas that you have access to in the navigation.

Using umbraco 4.7+ and razor. We are using the Microsoft role provider.

I was wondering if anyone knows how I could access the currently logged in users role?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T17:52:01.827

`DynamicNode`有[两种方法](http://umbraco.com/follow-us/blog-archive/2011/3/13/umbraco-razor-feature-walkthrough-part-5.aspx/)可以成为您的朋友，`HasAccess()`并且`IsProtected()`. 这是一个如何过滤和显示用户只能访问的节点的[示例。](http://our.umbraco.org/forum/developers/razor/33348-HasAccess%28%29-on-lists?p=0#comment122523)这是[另一个](http://our.umbraco.org/forum/developers/razor/33269-Displaying-menu-items-depending-on-user-roles?p=0#comment122235)。

使用这些方法，您不需要获取当前登录用户的角色，但这也不难做到。`Roles.GetRolesForUser()`返回当前登录用户角色的数组。有关详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.web.security.roles.getrolesforuser.aspx)。

# php - 如何评论这个特定的 PHP 代码块？

> ID：11849745
> 
> 赞同：0
> 
> 时间：2012-08-07T15:58:01.977
> 
> 标签：php, comments

当 PHP 部分中有中断时，我将如何评论所有这些代码？

如果我环绕`/* */`它，它不起作用。

显然我可以通过不偷懒来让它工作，但是如果我想偷懒......你会如何评论这整个街区？

```
if($fields){
    ?>
        <ul>
            <?php
                foreach($fields as $field){
                    ?>
                        <li>
                            <?php
                                /* if($field['label']){
                                    echo $field['label'];
                                } */
                                print_ext($field);
                            ?>
                        </li>
                    <?php
                }
            ?>
        </ul>
    <?php
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:00:11.397

你真的不能，但你可以很容易地把它关掉。

```
if($fields && false){
    ?>
        <ul>
            <?php
                foreach($fields as $field){
                    ?>
                        <li>
                            <?php 
                                /*if($field['label']){
                                    echo $field['label'];
                                }*/
                                print_ext($field); 
                            ?>
                        </li>
                    <?php                                                        
                }
            ?>
        </ul>
    <?php
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:04:46.950

以下解决方案应该有效。如果您将已经存在的评论包装在 if($field['label']) 周围，您可能会遇到问题，因此我已将其删除，如下所示。

```
<?php
/*
if($fields){
    ?>
        <ul>
            <?php
                foreach($fields as $field){
                    ?>
                        <li>
                            <?php 
                                if($field['label']){
                                    echo $field['label'];
                                }
                                print_ext($field); 
                            ?>
                        </li>
                    <?php                                                        
                }
            ?>
        </ul>
    <?php
} 
*/
?> 
```

有关更多信息，请查看此[答案](https://stackoverflow.com/questions/5781375/comment-out-html-and-php-together)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:05:32.933

不是真的评论，但你可以[像这样](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)禁用这个块（几乎不管它的内容）：

```
<?php $bar = <<<'EOD'
if($fields && false){
  ?>
    <ul>
    <?php
    foreach($fields as $field){
      ?>
        <li>
        <?php
        /*if($field['label']){
          echo $field['label'];
          }*/
        print_ext($field);
      ?>
        </li>
        <?php
    }
  ?>
    </ul>
    <?php
}
EOD; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:07:03.670

将您的 HTML 放在 PHP 打开/关闭标签中，然后 /* */ 将正常工作。

# vba - VBA WithEvents 不工作

> ID：11849762
> 
> 赞同：2
> 
> 时间：2012-08-07T15:58:54.617
> 
> 标签：vba, events, controls, userform

我基本上是在创建一个在运行时生成的项目列表。这些项目作为标签列在用户表单上（项目存储在链表中）。对于每个项目，我想添加一个微调按钮，以便可以在列表中上下移动项目。我的旋转按钮创建得很好，我编码的事件不起作用？？我不确定我做错了什么。大概是很简单的事情...

这是保存事件的类模块：cls_Spin_Btn

```
Private WithEvents Spin_Events As SpinButton

Private Sub Spin_Events_SpinUp()

    Debug.Print "Hey. Spin button worked."

End Sub

Public Property Set SetNewSpinButtion(newSpinBtn As MSForms.SpinButton)

    Set Spin_Events = newSpinBtn

End Property 
```

这是从模块调用的代码：

```
Function AddRunToForm(f As UserForm, r As ProductionRun, top As Integer) As Integer

Dim Run_SpinBtn As MSForms.SpinButton
Dim spinBtn As cls_Spin_Btn

Set Run_SpinBtn = f.Controls.Add("Forms.SpinButton.1", r.ProdID & "_SBtn", True)
Set spinBtn = New cls_Spin_Btn

With Run_SpinBtn

    .top = ProdID_Lbl.top
    .Left = 5
    .height = 10
    .Width = 12
    .height = 18
    .Visible = True

End With

Set spinBtn.SetNewSpinButtion = Run_SpinBtn

AddRunToForm = ProdID_Lbl.top + ProdID_Lbl.height

End Function 
```

此代码从同一模块中的循环调用，为每个项目创建标签和旋转按钮。我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:51:52.290

在你的用户表单代码模块中，把这个

```
Private mcolSpinButtons As Collection

Public Property Get SpinButtonCollection() As Collection

    If mcolSpinButtons Is Nothing Then Set mcolSpinButtons = New Collection

    Set SpinButtonCollection = mcolSpinButtons

End Property 
```

这将使您能够访问一个模块级别的变量，只要您的用户表单打开，该变量就会保持在范围内。当您将 cls_Spin_Btn 实例放入该集合时，它们也将保留在范围内。

然后在你的函数中，一旦你创建了新的旋转按钮类实例，将它添加到集合中

```
f.SpinButtonCollection.Add spinBtn, spinBtn.Name 
```

# python - QtDesigner4 中的 matplotlib 小部件

> ID：11849766
> 
> 赞同：1
> 
> 时间：2012-08-07T15:59:11.553
> 
> 标签：python, qt4, matplotlib, pyqt4

我想在 QtDesigner4 中为 matplotlib 小部件创建一个“自定义小部件”。

我熟悉在 QtDesigner3 中获取 matplotlib 小部件，并且在 Qt4 中手动编码小部件几乎没有问题。我不完全确定如何使用 QtDesigner 处理自定义小部件的新方式来做到这一点。

似乎有[一些文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/designer.html)，但我想在我自己尝试编写解决方案之前先询问其他人是否编写了解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:12:03.350

[我相信有一个与python(x,y)](http://code.google.com/p/pythonxy/)打包的 qtdesigner4（用于 windows）的 matplotlib 小部件。

[我自己从未使用过它，但我在这里](https://groups.google.com/d/topic/pythonxy/xSQkvxEygYE/discussion)找到了一些关于如何使用它的讨论。

如果您对此有任何运气，那么如果您考虑通过详细的演练来回答您自己的问题，那就太好了！

高温下，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:42:07.130

[“ Matplotlib for Python Developers](http://www.packtpub.com/matplotlib-python-development/book) ”的第 6 章中有一个解决方案。查看本书的补充代码。

# sql - 如何编写将从 sql 表中进行不寻常的不同选择的查询？

> ID：11849767
> 
> 赞同：5
> 
> 时间：2012-08-07T15:59:13.040
> 
> 标签：sql, tsql

假设我在 SQL 数据库中有一些包含**许多**数据的表，并且其中一些行几乎相同，例如：

```
|===========================================|
|           Message                         |
|===========================================|
|              ...                          |
|-------------------------------------------|
|    account is rejected: <aa>              |
|-------------------------------------------|
|    account is rejected: <bb>              |
|-------------------------------------------|
|    mailbox unavailable: 550 550 <1@b.com> |
|-------------------------------------------|
|    mailbox unavailable: 550 550 <2@b.com> |
|-------------------------------------------|
|                 ...                       | 
```

出于我的目的，前 2 行相同，最后 2 行相同，因此查询应返回

1.  帐户被拒绝：
2.  邮箱不可用：550 550

我想编写查询来选择行，消除'<'符号之后的字符，然后会做`DISTINCT`，但我不知道如何做`SELECT`

你能帮我写这样的查询吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T16:03:54.930

以下内容从一`<`开始就删除了所有内容。

`GROUP BY`比使用更灵活，但`DISTINCT`在这种情况下完成同样的事情。

该`CASE`声明是为了满足其中没有 a 的消息的可能性`<`。如果*总是*有一个`<`Then 只需使用该`ELSE`部分。

```
SELECT
  CASE WHEN CHARINDEX('<', Message) = 0 THEN Message ELSE LEFT(Message, CHARINDEX('<', Message)-1)) END AS Message
FROM
  yourTable
GROUP BY
  CASE WHEN CHARINDEX('<', Message) = 0 THEN Message ELSE LEFT(Message, CHARINDEX('<', Message)-1)) END 
```

# tridion - SDL Tridion 2012 UI - 更新预览和发布时出错

> ID：11849769
> 
> 赞同：6
> 
> 时间：2012-08-07T15:59:19.603
> 
> 标签：tridion, tridion-2011

我正在 Tomcat 上安装 cd_preview_webservice，它还安装了用于登台网站（用于 UI）和 cd_upload（部署到网站）的应用程序。

当我单击“更新预览”或“完成编辑”时，出现以下错误：

com/tridion/deployer/TCDLTransformer

这也将 tomcat 进程发送到 100% CPU 使用率。

我已重新阅读说明，但看​​不到我在哪里犯了错误。非常感谢任何帮助。

谢谢马克

我做了更多的挖掘工作，看起来我得到了一个会话预览 ID，保存在“PREVIEW_SESSIONS”表中的数据库中，但其他的都是空的。我觉得很奇怪。

我还发现以下 Web 服务调用“http://bbtrid04/WebUI/Models/SiteEdit/Services/Services.svc/GetPreviewToken”收到以下响应：

{"ExceptionDetail":null,"ExceptionType":null,"Message":"PermGen space","StackTrace":null}

并且本地主机日志文件包含以下错误：

```
07-Aug-2012 17:34:04 org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet httpupload threw exception
java.lang.OutOfMemoryError: PermGen space
    at org.apache.commons.fileupload.disk.DiskFileItemFactory.createItem(DiskFileItemFactory.java:199)
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:361)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:126)
    at com.tridion.transport.HTTPSReceiverServlet.handleUpload(HTTPSReceiverServlet.java:233)
    at com.tridion.transport.HTTPSReceiverServlet.doPost(HTTPSReceiverServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
07-Aug-2012 17:34:05 org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet httpupload threw exception
java.lang.VerifyError: (class: org/apache/commons/fileupload/disk/DiskFileItem, method: getUniqueId signature: ()Ljava/lang/String;) Illegal constant pool index
    at org.apache.commons.fileupload.disk.DiskFileItemFactory.createItem(DiskFileItemFactory.java:199)
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:361)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:126)
    at com.tridion.transport.HTTPSReceiverServlet.handleUpload(HTTPSReceiverServlet.java:233)
    at com.tridion.transport.HTTPSReceiverServlet.doPost(HTTPSReceiverServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:55:49.547

当 JVM 加载类时，它会将它们放入其堆的 PermGen 空间，默认为 64MB。

您显示的堆栈跟踪是您的 JVM 加载的类比它有空间的更多的放弃，并且肯定会解释它关于找不到 TCDLTransformer 的抱怨。

我通常有一个`-XX:MaxPermSize=256m`以`setenv.bat`确保有足够的空间。根据您启动 Tomcat 的方式，您可能需要将其放在那里或放在服务运行程序参数中。

# python - Scapy 中的错误行为

> ID：11849770
> 
> 赞同：2
> 
> 时间：2012-08-07T15:59:27.097
> 
> 标签：python, ip, icmp, scapy

我使用 Scapy 的功能`send`发送数据包，这些数据包将在路由器上生成 ICMP 数据包，并将这些 ICMP 数据包转储为`tcpdump`，作为子进程启动。

然后，我将使用 scapy 的内置`rdpcap`函数将这些 ICMP 数据包读回我的程序。

好吧，事实证明`rdpcap`有时会搞砸一些事情，只要我想查看我捕获的数据包，它就会返回以下内容：

```
(InteractiveConsole)
>>> icmpPackets
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/scapy/plist.py", line 57, in __repr__
    if self._elt2pkt(r).haslayer(p):
AttributeError: 'NoneType' object has no attribute 'haslayer' 
```

然后，我只需要`rdpcap`再次调用*相同*的参数，一切都会恢复正常：

```
>>> icmpPackets = rdpcap(tcpdumpFileName)
>>> icmpPackets
<icmpPackets.cap: TCP:0 UDP:0 ICMP:1428 Other:1> 
```

这是一些错误，对吧？

编辑：好的，在我得到那个错误之前我做的一件事是以下，这可能不是太正统，但是当我伪造数据包时我不需要以太网层。如果我删除这两行，我不会收到任何此类错误：

```
for i in range(len(icmpPackets)):
        icmpPackets[i] = icmpPackets[i].getlayer(IP) 
```

我以前在其他地方做过这个，从来没有遇到过问题。这里发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T21:19:53.290

你好，

我真的不明白为什么你用 tcpdump 而不是 scapy 来嗅探流量，但无论如何......你的问题不是 Scapy 中的错误，而是你的代码中的错误。如果数据包没有层（例如，数据包），您将用`.getlayer(IP)`返回的每个数据包替换每个数据包。因此，你得到后者的例外。`None``IP``ARP`

我认为你应该更换

```
icmpPackets = rdpcap(tcpdumpFileName)
for i in range(len(icmpPackets)):
    icmpPackets[i] = icmpPackets[i].getlayer(IP) 
```

和

```
icmpPackets = PacketList([p[IP] for p in PcapReader(tcpdumpFileName) if IP in p]) 
```

首先，我认为它更“Pythonic”，而且它通过删除没有`IP`层的数据包来解决问题。或者，如果您想让所有数据包都没有`Ether`层，您也可以使用：

```
icmpPackets = PacketList([p.payload for p in PcapReader(tcpdumpFileName)]) 
```

另外，您可以在 tcpdump 中使用 BPF 过滤器进行过滤（`icmp`如果您只想要`ICMP`数据包）。

# format - TCL：将负整数转换为十六进制？

> ID：11849771
> 
> 赞同：3
> 
> 时间：2012-08-07T15:59:27.290
> 
> 标签：format, hex, tcl, signed

我想将有符号整数转换为 32 位十六进制。以下适用于正整数：

```
format %.8x $the_decimal_value 
```

但是对于负整数，我得到了 64 位十六进制。例如，`99`被转换为`00000063`，但`-81`被转换为`ffffffffffffffaf`。

有人知道如何从负整数中获取 32 位十六进制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:19:33.063

```
% set num -81
% format 0x%.8x [expr {$num & 0xFFFFFFFF}]
0xffffffaf 
```

我能找到的文档中唯一的提示是[this](http://www.tcl.tk/man/tcl8.5/TclCmd/binary.htm#M42)。

# python - 在没有循环的numpy数组中为所有奇数或偶数索引元素添加一个数字

> ID：11849778
> 
> 赞同：14
> 
> 时间：2012-08-07T15:59:56.740
> 
> 标签：python, arrays, numpy

假设您的 numpy 数组是：

```
 A =    [1,1,2,3,4] 
```

你可以简单地做：

> A + .1

向每个元素 numpy 数组添加一个数字

我正在寻找一种将数字添加到奇数或偶数索引数字`A[::2] +1`同时保持整个数组完整的方法。

是否可以在没有任何循环的情况下向所有奇数或偶数索引元素添加一个数字？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T16:03:35.043

```
In [43]: A = np.array([1,1,2,3,4], dtype = 'float')

In [44]: A[::2]  += 0.1

In [45]: A
Out[45]: array([ 1.1,  1\. ,  2.1,  3\. ,  4.1]) 
```

请注意，这会修改`A`. 如果您希望保持`A`不变，请先复制`A`：

```
In [46]: A = np.array([1,1,2,3,4], dtype = 'float')

In [47]: B = A.copy()

In [48]: B[::2]  += 0.1

In [49]: B
Out[49]: array([ 1.1,  1\. ,  2.1,  3\. ,  4.1])

In [50]: A
Out[50]: array([ 1.,  1.,  2.,  3.,  4.]) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-07T16:18:39.927

除了以前的答案，要修改具有奇数索引的数字，您应该使用 A[1::2] 而不是 A[::2]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T16:11:41.343

具有列表理解的东西可以工作。

```
A = [1,1,2,3,4]
A = [A[i] + (0 if (i%2 == 0) else .1) for i in range(len(A))] 
```

使用三元组快速而肮脏。可能不适用于您的 Python 版本，不记得它适用于哪个版本。

* * *

在 Python 2.7.3 和 Python 3.2.3 中检查，输出是一样的：

```
>>> A = [1,1,2,3,4]

>>> A
[1, 1, 2, 3, 4]

>>> A = [A[i] + (0 if (i%2 == 0) else .1) for i in range(len(A))]

>>> A
[1, 1.1, 2, 3.1, 4] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-30T23:09:16.043

如果列表不是以两个 1 开头并且您想添加到所有偶数，您可以使用：

```
A[1::2] += 0.1 
```

或者

```
A[::-2][::-1] += 0.1 
```

在后一种情况下，[::-1] 用于将数组反转回正常顺序。

# paypal - Paypal 自适应链式支付

> ID：11849781
> 
> 赞同：0
> 
> 时间：2012-08-07T16:00:10.473
> 
> 标签：paypal, paypal-adaptive-payments, paypal-nvp

嗨，我对这种自适应付款选项有点困惑，我所拥有的是这种情况。

我有一个网站，可以直接使用信用卡使用 paypal api nvp 进行收费。

我想做的是用信用卡以同样的方式收费，然后将收入分成两个不同的贝宝账户。15% 在一个中，其余在另一个中。

那么如何做到这一点呢？我找不到任何例子来实现这一点，我看了一些自适应支付的例子，其中发件人（使用贝宝账户）向主要收款人汇款，然后保留他的费用，其余的转移。但不使用信用卡作为付款输入

但我想做的是用信用卡收费。保留 15% 的费用，其余的发送到另一个帐户。我想要的只是从贝宝收取 1 笔费用，而不是从转账到两个不同账户中收取两笔费用。

我只需要一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:32:36.247

不确定我是否正确理解了您的情况，但我正在使用链式付款来处理对主要收款人的付款，然后向该收款人收取 3% 的费用以转入我的网站帐户。我正在使用 C# 语言和 NVP，这就是我所拥有的：

```
 double mysiteAmt = Convert.ToDouble(payPalObj.transactionAmt) * .03;
    // receiver(0) is the primary receiver of the payment
    body.Append("receiverList.receiver(0).amount=" + HttpUtility.UrlEncode(payPalObj.transactionAmt.ToString()));
    body.Append("&");
    body.Append("receiverList.receiver(0).email=" + HttpUtility.UrlEncode(payPalObj.receiverEmailAcct));
    body.Append("&");
    body.Append("receiverList.receiver(0).primary=true");
    body.Append("&");
    // receiver(1) is my site
    body.Append("receiverList.receiver(1).amount=" + HttpUtility.UrlEncode(mysiteAmt.ToString()));
    body.Append("&");
    body.Append("receiverList.receiver(1).email=" + HttpUtility.UrlEncode("payments@mysite.com")); // This is my site's PayPal account
    body.Append("&");
    body.Append("receiverList.receiver(1).primary=false"); 
```

当发件人被重定向到 PayPal 时，他们只会看到一笔交易金额。付款处理完毕且主要收款人登录 PayPal 后，他们将看到两笔交易：1) 来自发件人的付款，以及 2) 向我网站的 PayPal 账户付款。

希望这可以帮助。

编辑：

您还必须包含此信息，以便主要收款人负责支付 PayPal 费用。

```
 body.Append("feesPayer=PRIMARYRECEIVER"); // Receiver will pay the fees. 
```

# google-fusion-tables - Google Fusion Table Map 上的参考标记

> ID：11849784
> 
> 赞同：0
> 
> 时间：2012-08-07T16:00:15.093
> 
> 标签：google-fusion-tables

我正在尝试模拟单击通过 Google Fusion Tables 绘制的标记。您如何以这种方式引用标记？

我不想创建一个新的标记，只是模拟点击一个已经存在的标记。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:33:36.490

无法在 FusionTablesLayer 上触发点击事件（至少目前如此）。您可以查询该表并打开一个包含相同信息的 infoWindow（但这不是一回事，需要一些工作）。

# c# - 绑定 ContentTemplateSelector 的属性，但将 DataContext 传递给模板

> ID：11849786
> 
> 赞同：2
> 
> 时间：2012-08-07T16:00:16.350
> 
> 标签：c#, wpf, data-binding

我正在尝试将 a 绑定`ContentPresenter`到一个对象，该对象将根据某个属性选择要显示的模板，其中模板是绑定对象上的一种视图。

但是，当我如下所示设置绑定时，我最终将绑定属性作为`DataContext`我`DataTemplate`的 s，而不是属性的所有者。我怎样才能解决这个问题？

谢谢！

基础对象看起来像这样（除了相关属性，我已经删除了所有内容）：

```
public class ApplicationInterface : BaseBusinessObject, 
    IState, INotifyPropertyChanged
{
    public Type CurrentPage
    {
        get
        {
            return (Type)_properties["CurrentPage"].Value;
        }
        set
        {
            _properties["CurrentPage"].Value = value;
        }
    }
} 
```

然后我尝试`CurrentPage`像这样绑定到 XAML 中的属性：

```
<ContentPresenter Content="{Binding CurrentPage}" 
    ContentTemplateSelector={StaticResource ResourceKey=PageTemplateSelector}"/> 
```

的实施`DataTemplateSelector`：

```
public class PageTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, 
        DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element != null && item != null && item is Type)
        {
            Type t = item as Type;
            if (t == typeof(Home))
                return element.FindResource("homeTemplate") as DataTemplate;
            else if (t == typeof(ProfileEdit))
                return element.FindResource("profileTemplate") as DataTemplate;
            else if (t == typeof(WBI))
                return element.FindResource("wbiTemplate") as DataTemplate;
            else if (t == typeof(PC))
                return element.FindResource("pcTemplate") as DataTemplate;
        }
        return null;
    }
} 
```

最后是`DataTemplate`s：

```
 <DataTemplate x:Key="homeTemplate">
        <pages:Home DataContext="{Binding}"/>
    </DataTemplate>
    <DataTemplate x:Key="profileTemplate">
        <pages:ProfileEdit DataContext="{Binding}"/>
    </DataTemplate>
    <DataTemplate x:Key="wbiTemplate">
        <pages:WBI DataContext="{Binding}"/>
    </DataTemplate>
    <DataTemplate x:Key="pcTemplate">
        <pages:PC DataContext="{Binding}"/>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:36:47.640

我最终命名了我的窗口，然后绑定到它的 DataContext。所以基本上我所要做的就是将模板绑定更改为：

```
<DataTemplate x:Key="homeTemplate">
    <pages:Home DataContext="{Binding ElementName=mainWindow, Path=DataContext}"/>
</DataTemplate> 
```

我选择了这个而不是改变我的业务对象，因为视图是一个纯粹的 UI 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:04:53.823

编辑：根据评论，也许您可​​以尝试将属性添加到 DataTemplate 中的页面（例如父级），然后使用`RelativeSource`绑定传递 DataContext。像这样的东西：

```
<ContentPresenter Content="{Binding CurrentPage}" ContentTemplateSelector={StaticResource ResourceKey=PageTemplateSelector}" Tag="{Binding .}"/>

<DataTemplate x:Key="homeTemplate">
  <pages:Home DataContext="{Binding}" Parent="{Binding Path=Tag, RelativeSource={RelativeSource AncestorType={x:Type ContentPresenter}}}"/>
</DataTemplate> 
```

结束编辑

从上面显示的内容来看，您应该能够将`Content`属性绑定到父对象：

```
<ContentPresenter Content="{Binding .}" ContentTemplateSelector={StaticResource ResourceKey=PageTemplateSelector}"/> 
```

然后将 DataTemplate 数据绑定到 CurrentPage 属性：

```
<DataTemplate x:Key="homeTemplate">
    <pages:Home DataContext="{Binding CurrentPage}"/>
</DataTemplate>
<DataTemplate x:Key="profileTemplate">
    <pages:ProfileEdit DataContext="{Binding CurrentPage}"/>
</DataTemplate>
<DataTemplate x:Key="wbiTemplate">
    <pages:WBI DataContext="{Binding CurrentPage}"/>
</DataTemplate>
<DataTemplate x:Key="pcTemplate">
    <pages:PC DataContext="{Binding CurrentPage}"/>
</DataTemplate> 
```

根据`ContentPresenter`s 的工作方式，它的行为符合您的示例中的预期。另一种方法是使您的模型对象可导航（因此 CurrentPage 对象具有对其父应用程序接口的引用），以便您可以从 CurrentPage 的上下文访问父属性。

# php - 授权自定义 Web 应用程序

> ID：11849787
> 
> 赞同：0
> 
> 时间：2012-08-07T16:00:17.197
> 
> 标签：php, mysql, authentication, security

谷歌搜索了几天，并没有真正找到关于 facebook / google plus 或其他网站如何验证他们的应用程序的任何答案（也许是因为这可能是一个风险，不确定但仍然找不到任何答案。 )

我正在寻找一个网站，用户可以在其中“安装”网络应用程序 - 就像 facebook / google plus 一样。例如：用户访问堆栈溢出应用程序，它请求权限并获得身份验证。

我该怎么做呢？即，如何交叉检查应用程序是否已通过用户身份验证，以及应用程序 ID 是否与正在使用的实际应用程序匹配，以防止恶意应用程序使用已知已通过身份验证的相同 ID。

我能想到的唯一方法是检查用户是否允许该应用程序。伪：`"SELECT * FROM authorised_applications WHERE user_id = '123' AND app_id = '234'"` 如果有，允许应用程序访问一些数据（即用户名等）。

```
if(mysql_num_rows(pseudo_above)=="1") { allow } 
```

但是，如果恶意应用程序使用相同的应用程序 ID（如果我们假设它是经过身份验证的）并因此可以访问数据怎么办。

我可能会过度思考事情并让自己感到困惑，但我真的想不出该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:01:43.120

为了对这些服务进行身份验证，他们使用 OAuth。我建议阅读这篇很棒的文章：

[http://hueniverse.com/2007/10/beginners-guide-to-oauth-part-ii-protocol-workflow/](http://hueniverse.com/2007/10/beginners-guide-to-oauth-part-ii-protocol-workflow/)

据我了解，您希望为您的 Web 应用程序设置类似的东西。我没有将 OAuth 与 PHP 结合使用，但我很肯定有很多资源可以使用它。

# ios - 如何在 iOS 中设置闹钟？

> ID：11849790
> 
> 赞同：6
> 
> 时间：2012-08-07T16:00:44.227
> 
> 标签：ios, uilocalnotification, alarm

*我知道这个问题在StackOverflow*上问了很多次，但我无法在我的应用程序中设置警报，因为我对 iOS 很陌生？我正在按照本教程设置警报：

[**在 iOS 中使用 UILocalNotification 设置提醒。**](http://stunningco.de/2010/11/12/setting-a-reminder-using-uilocalnotification-in-ios-4-objective-c/)

但是，它似乎对我不起作用。

我需要每天设置闹钟让我们`5.00 PM`每天说。我不能使用日期选择器来选择时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T17:59:48.633

1.  首先在您的`xib`, （或代码）上设置日期选择器模式：时间（默认为日期和时间）

2.  系统假定触发日期是当前日期，时间是用户选择的时间。这不是问题，因为您设置了重复间隔，所以它会起作用。我已经测试过了。

    ```
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    [localNotif setFireDate:datePicker.date];
    [localNotif setRepeatInterval:NSDayCalendarUnit];
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
    ```

PS：最好将秒设置为`0`using `NSDateComponents`class，以便将闹钟设置为在您想要的一分钟的第一秒响起。您可以检查：

[**iOS 中的本地通知。**](http://stunningco.de/2010/11/12/setting-a-reminder-using-uilocalnotification-in-ios-4-objective-c/)

您发布的有关如何执行此操作的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:34:13.430

```
+ (void)addLocalNotification:(int)year:(int)month:(int)day:(int)hours:(int)minutes:(int)seconds:(NSString*)alertSoundName:(NSString*)alertBody:(NSString*)actionButtonTitle:(NSString*)notificationID 
```

使用参数调用此方法并使用此

```
 + (void)addLocalNotification:(int)year:(int)month:(int)day:(int)hours:(int)minutes:(int)seconds:(NSString*)alertSoundName:(NSString*)alertBody:(NSString*)actionButtonTitle:(NSString*)notificationID {
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

//set the notification date/time
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:day];

[dateComps setMonth:month];

[dateComps setYear:year];
[dateComps setHour:hours];

[dateComps setMinute:minutes];
[dateComps setSecond:seconds];

NSDate *notificationDate = [calendar dateFromComponents:dateComps];
[dateComps release];

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
    return;
localNotif.fireDate = notificationDate;
localNotif.timeZone = [NSTimeZone defaultTimeZone];

// Set notification message
localNotif.alertBody = alertBody;
// Title for the action button
localNotif.alertAction = actionButtonTitle;

localNotif.soundName = (alertSoundName == nil) ? UILocalNotificationDefaultSoundName : alertSoundName;

//use custom sound name or default one - look here to find out more: http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html%23//apple_ref/doc/uid/TP40008194-CH103-SW13

localNotif.applicationIconBadgeNumber += 1; //increases the icon badge number

// Custom data - we're using them to identify the notification. comes in handy, in case we want to delete a specific one later
NSDictionary *infoDict = [NSDictionary dictionaryWithObject:notificationID forKey:notificationID];
localNotif.userInfo = infoDict;

// Schedule the notification
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
[localNotif release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:02:05.773

You may need to change the style of the date picker to allow changing the time in addition to just the date.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T07:01:56.860

你可以试试这个

```
UILocalNotification *todolistLocalNotification=[[UILocalNotification alloc]init];
[todolistLocalNotification setFireDate:[lodatepicker date]];
[todolistLocalNotification setAlertAction:@"Note list"];
[todolistLocalNotification setTimeZone:[NSTimeZone defaultTimeZone]];
[todolistLocalNotification setAlertBody:text_todolist];
[todolistLocalNotification setHasAction:YES]; 
```

# c# - DropDownList 的选定项

> ID：11849797
> 
> 赞同：-1
> 
> 时间：2012-08-07T16:01:09.693
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, drop-down-menu

如何获得我的 DropDownList 的选定项目？

```
@using (Html.BeginForm("Doctors", "User", FormMethod.Get))
{
    <input name="pageNumber" type="hidden" value="1" /><text>Hospital:</text><br />

    @Html.DropDownList("HospitalId", (IEnumerable<SelectListItem>)ViewBag.HospitalList, new { style = "width:90%" }) <br />

    <button type="submit" class="btn btn-mini"> Search </button>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:28:03.217

它应该可以作为控制器操作方法中的参数简单地访问。

```
public ActionResult Doctors(string pageNumber, string HospitalId)
{
    // make use of HospitalId
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:46:05.513

Shyju的回答很好，我只是想用一些指针来扩展Shyju所说的内容。

每个视图使用一个视图模型，只包含您需要的数据，任何未使用的数据请删除。

您的域模型可能如下所示：

```
public class Hospital
{
     public int Id { get; set; }

     public string Name { get; set; }
} 
```

您的视图模型可能如下所示：

```
public class DoctorHospitalViewModel
{
     public int HospitalId { get; set; }

     public IEnumerable<Hospital> Hospitals { get; set; }
} 
```

您的视图可能如下所示（出于显示目的，我将下拉列表放在表格中）：

```
<table>
     <tr>
          <td class="edit-label">Hospital <span class="required">**</span></td>
          <td>
               @Html.DropDownListFor(
                    x => x.HospitalId,
                    new SelectList(Model.Hospital, "Id", "Name", Model.HospitalId),
                    "-- Select --"
               )
               @Html.ValidationMessageFor(x => x.HospitalId)
          </td>
     </tr>
</table> 
```

您的控制器可能看起来像这样，并假设您想在创建视图中使用此下拉列表：

```
public class HospitalController : Controller
{
     private readonly IHospitalRepository hospitalRepository;

     public HospitalController(IHospitalRepository hospitalRepository)
     {
          // Check that hospitalRepository is not null

          this.hospitalRepository = hospitalRepository;
     }

     public ActionResult Create()
     {
          DoctorHospitalViewModel viewModel = new DoctorHospitalViewModel
          {
               Hospitals = hospitalRepository.GetAll()
          };

          return View(viewModel);
     }

     [HttpPost]
     public ActionResult Create(DoctorHospitalViewModel viewModel)
     {
          // Check that viewModel is not null

          if (!ModelState.IsValid)
          {
               viewModel.Hospitals = hospitalRepository.GetAll();

               return View(viewModel);
          }

          // Do what ever needs to be done
          // You can get the selected hospital id like this
          int selectedHospitalId = viewModel.HospitalId;

          return RedirectToAction("List");
     }
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:26:22.243

这个问题对于何时/在何处获取下拉列表项不是很清楚。

我假设你现在想在控制器中拿起它。您需要做的是确保它包含在您发给控制器的帖子中，并且在服务器端读取表单时使用正确的名称。

这是一个例子：

```
@Html.DropDownList("SubworkType", "Select Work Item", new { @Id = "SubworkId" , @Name = "SubworkId"  }) 
```

如果您希望在视图侧获取选定的值，您可以执行以下操作：

```
var workerType = $("#WorkerTypeFilter option:selected").val() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:37:59.920

我宁愿避免像`ViewBag`/这样的动态变量`ViewData`，并坚持使用强类型。

使用视图模型

```
public class AssignDoctorViewModel
{
  //Other Properties also
  public IEnumerable<SelectListItem> Hospitals { set;get;}
  public int SelectedHospital { set;get;}
} 
```

在我的`GET`Action 方法中，我会用填充的属性返回它

```
public ActionResult AssignDoctor
{
  var vm=new AssignDoctorViewModel();
  vm.Hospitals= new[]
    {
          new SelectListItem { Value = "1", Text = "Florance" },
          new SelectListItem { Value = "2", Text = "Spark" },
          new SelectListItem { Value = "3", Text = "Henry Ford" },
    };
    // can replace the above line with loading data from Data access layer.
   return View(vm);
} 
```

现在在您的视图中，我们的 ViewModel 类是强类型的

```
@model AssignDoctorViewModel
@using(Html.BeginForm())
{
   @Html.DropDownListFor(x => x.SelectedHospital, Model.Hospitals, "Select..")
  <input type="submit" value="save" />      
} 
```

现在在您的Action 方法中，您可以通过访问Property`HTTPPOST`来获取 Selected 值`SelectedHospital`

```
public ActionResult AssignDoctor(AssignDoctorViewModel model)
{ 
  //check for model.SelectedHospital value

} 
```

# php - 我无法更新多列，只有一列会更新

> ID：11849798
> 
> 赞同：0
> 
> 时间：2012-08-07T16:01:14.080
> 
> 标签：php, mysql, multiple-select

我想出了如何使用复选框更新具有多列的表，除非选择了多个复选框，更新只会发生在其中一列而不是两者。有人可以帮忙吗？谢谢！

这是该表的工作代码：

```
<table width="100%" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="frmactive" method="GET" action="assigncases1.php">
<table width="100%" border="0" cellpadding="3" cellspacing="1">
<tr>

          <select name="assigned_to">
        <option value=""></option>            
        <option value="Kristin Dodd"> Kristin Dodd </option>
        <option value="Matt Ursetto"> Matt Ursetto </option>
        <option value="Derek Bird"> Derek Bird </option>
        <option value="John Castle"> John Castle </option>
        <option value="Martin Delgado"> Martin Delgado </option>
      </select>
<br>
<input type='submit' value = 'Assign'> 
</tr>
<tr>
<td>&nbsp;</td>
<td colspan="4" align="center"><strong>Update multiple rows in mysql with checkbox<br>
</strong></td>
</tr><tr>
<td align="center" bgcolor="#FFFFFF"></td>
<td align="left"><strong>Name</strong></td>
<td align="left"><strong>SSO</strong></td>
<td align="left"><strong>case_status</strong></td>
<td align="left"><strong>Assigned To:</strong></td>
</tr>
<?php
$result=mysql_query($sql);

$count=mysql_num_rows($result);
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td align="center"><input name="checkbox" type="checkbox" id="checkbox[]" value="<?        
echo $rows['id']; ?>"></td>
<td><? echo $rows['full_name']; ?></td>
<td><? echo $rows['sso']; ?></td>
<td><? echo $rows['case_status']; ?></td>
<td><? echo $rows['assigned_to']; ?></td>
</tr>
<?php
}
?>
<tr>
<td colspan="5" align="center">&nbsp;</td>
</tr>
</table>
</form>
</td>
</tr>
</table> 
```

这就是我为获取信息的 php 页面所拥有的。

```
// Retrieve data from database 
$checkbox = $_GET['checkbox'];
$assigned_to = $_GET['assigned_to'];

// update data in mysql database 
$sql="UPDATE rmstable2 SET assigned_to='$assigned_to' WHERE id='$checkbox'";
$result = mysql_query($sql);
$count = mysql_numrows($result);
{
mysql_query("UPDATE `rmstable2` SET `assigned_to` = '$assigned_to'
                         WHERE `id` = '$checkbox'") 
 or die(mysql_error());

}

 //If they did not enter a search term we give them an error 
if ($assigned_to == "")
{ 
echo "<h3>You forgot to enter a required field. Please try again.</h3><br>";  
 } 
// if successfully updated. 
else if($assigned_to !== "")
{
echo "<b>Update Successful</b><br>";
echo "<br>This case was assigned to:<b> $assigned_to</b><br>"; 
echo "<br>To see the change go back and click on <b>Refresh Page</b> if you assigned it
to someone other than you, the case will disappear and show up in their list of      
 assigned cases."; 
}
else {
echo "ERROR";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:09:01.443

在您的 HTML 中，您使用名称定义复选框`checkbox`- 因此只有一个值将发送到 PHP。要获取值数组，请更新要创建的复选框，`name="checkbox[]"`并且在提交表单时，您可以像数组一样使用选定的值。

在这种情况下，您将能够通过以下方式遍历每个项目：

```
$checkbox = $_GET['checkbox'];
$assigned_to = $_GET['assigned_to'];

foreach ($checkbox as $id) {
    // do a very basic validation to see if the ID is numeric
    if (!is_numeric($id)) continue;
    $sql = 'UPDATE rmstable2 SET assigned_to="' . mysql_real_escape_string($assigned_to) . '" WHERE id=' . (int)$id;
    mysql_query($sql);
} 
```

Also, as always worth noting, the `mysql_*` functions are being deprecated and you should consider to start using either [`mysqli_*`](http://php.net/mysqli) or [`PDO`](http://php.net/pdo) methods.

# ios - 使用 jenkins 构建具有单个目标的多个版本的 IOS 应用程序

> ID：11849799
> 
> 赞同：0
> 
> 时间：2012-08-07T16:01:23.763
> 
> 标签：ios, xcode, build, jenkins

我有一个 ios 应用程序，它将有两个版本（使用预处理器指令来确定哪些代码用于哪个版本）。我想使用 Jenkins 自动构建应用程序的每个版本。如果可能的话，我还想在 xcode 项目中使用单个目标。是否可以在 Jenkins 中使用多配置项目；如果是这样，我会去完成这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:47:25.820

您需要在构建脚本中更改 XCode 方案。

例如，如果您有两个用于测试的方案，比如登台和生产，您将需要构建看起来与此类似的脚本。

```
xcodebuild -configuration Debug -scheme "Test Staging" -sdk iphonesimulator5.1 -arch i386 build
xcodebuild -configuration Debug -scheme "Test Prod" -sdk iphonesimulator5.1 -arch i386 build 
```

然后可以在 XCode 中配置您的方案以匹配预处理器指令。

# gridview - clickable gridview

> ID：11849806
> 
> 赞同：0
> 
> 时间：2012-08-07T16:01:47.730
> 
> 标签：gridview

```
 protected void GridViewAddress_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        // Make sure the current GridViewRow is a data row.
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            // Make sure the current GridViewRow is either 
            // in the normal state or an alternate row.
            if (e.Row.RowState == DataControlRowState.Normal || e.Row.RowState == DataControlRowState.Alternate)
            {
                // Add client-side confirmation when deleting.
                ((LinkButton)e.Row.Cells[1].Controls[0]).Attributes["onclick"] = "if(!confirm('Are you certain you want to delete this person ?')) return false;";
            }
        }
    }

    }
} 
```

My question is that i want to make my grid view clickable and want to direct the user to another page .This is the code where i have to catch the event and redirect user to another

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:39:23.200

您需要创建一个行可点击的 GridView。我为您提供了链接以及链接中的代码。如果您不熟悉 VB，则代码在 VB 中，有用户在评论部分将其转换为 C#。

```
Imports Microsoft.VisualBasic
Imports System.ComponentModel
Imports System.Web.UI
Imports System.Web.UI.WebControls

Namespace SampleControls

    Public Class MyGridView
        Inherits System.Web.UI.WebControls.GridView

#Region "Properties"

        <DefaultValue(False)> _
        Public Property EnableRowClick() As Boolean
            Get
                Dim ret As Boolean = False
                Dim obj As Object = ViewState("EnableRowClick")
                If obj IsNot Nothing Then
                    ret = CBool(obj)
                End If
                Return ret
            End Get
            Set(ByVal value As Boolean)
                ViewState("EnableRowClick") = value
            End Set
        End Property
#End Region

#Region "Event"

        Private Shared ReadOnly RowClickedEventKey As Object = New Object

        Public Custom Event RowClicked As EventHandler(Of GridViewRowClickedEventArgs) AddHandler(ByVal value As EventHandler(Of GridViewRowClickedEventArgs))
                Events.AddHandler(RowClickedEventKey, value)
            End AddHandler

            RemoveHandler(ByVal value As EventHandler(Of GridViewRowClickedEventArgs))
                Events.RemoveHandler(RowClickedEventKey, value)
            End RemoveHandler

            RaiseEvent(ByVal sender As Object, ByVal e As GridViewRowClickedEventArgs)
                Dim ev As EventHandler(Of GridViewRowClickedEventArgs) = TryCast(Events(RowClickedEventKey), EventHandler(Of GridViewRowClickedEventArgs))
                If ev IsNot Nothing Then
                    ev(sender, e)
                End If
            End RaiseEvent
        End Event

        Protected Overridable Sub OnRowClicked(ByVal e As GridViewRowClickedEventArgs)
            RaiseEvent RowClicked(Me, e)
        End Sub

#End Region

#Region "Postback handling"
        Protected Overrides Sub RaisePostBackEvent(ByVal eventArgument As String)
            If eventArgument.StartsWith("rc") Then
                Dim index As Integer = Int32.Parse(eventArgument.Substring(2))
                Dim args As New GridViewRowClickedEventArgs(Me.Rows(index))
                OnRowClicked(args)
            Else
                MyBase.RaisePostBackEvent(eventArgument)
            End If

        End Sub
#End Region

#Region "Adding the wiring from client-side to server-side, causing the posback when row is clicked"

        Protected Overrides Sub PrepareControlHierarchy()
            MyBase.PrepareControlHierarchy()

            If EnableRowClick Then
                Dim i As Integer
                For i = 0 To Rows.Count - 1
                    Dim argsData As String = "rc" & Rows(i).RowIndex.ToString()
                    Me.Rows(i).Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(Me, argsData))
                Next
            End If

        End Sub

#End Region

    End Class

#Region "Custom event argument type"
    Public Class GridViewRowClickedEventArgs
        Inherits EventArgs

        Private _row As GridViewRow
        Public Sub New(ByVal row As GridViewRow)
            _row = row
        End Sub
        Public ReadOnly Property Row() As GridViewRow
            Get
                Return _row
            End Get
        End Property
    End Class
#End Region

End Namespace

Usage example

[aspx]

<%@ Register Namespace="SampleControls" TagPrefix="sc" %>
...
<sc:MyGridView ID="myGridView1" runat="server" AutoGenerateColumns=false EnableRowClick=true>
            <Columns>
                <asp:TemplateField HeaderText="Sample row header">
                    <ItemTemplate>
                    Sample row data
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns> 
 </sc:MyGridView>[code-behind]

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not Page.IsPostBack Then
            Dim arr As New ArrayList()
            arr.Add(1)
            arr.Add(2)
            arr.Add(3)
            myGridView1.DataSource = arr
            myGridView1.DataBind()
        End If
    End Sub   Protected Sub myGridView1_RowClicked(ByVal sender As Object, ByVal e As SampleControls.GridViewRowClickedEventArgs) Handles myGridView1.RowClicked   Response.Write("Index of the clicked row was: " + e.Row.RowIndex.ToString()) 

End Sub 
```

关联：

[http://aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx#17887](http://aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx#17887)

# ipad - 如何使 iPad 上的 HTML5 视频侧面的黑条消失？

> ID：11849809
> 
> 赞同：4
> 
> 时间：2012-08-07T16:01:59.437
> 
> 标签：ipad, html, video, size, mobile-safari

我正在开发一个应该主要在 iPad 上运行的 WebApp。该应用程序播放多个视频，并且还具有一些交互式组件。

我的问题是装饰性的：即使 HTML5 视频标签工作正常，我创建的自定义控件控制视频/音频播放也很好，对于我的生活，我无法弄清楚如何在一边的视频消失。

嵌入是完全标准的：

```
<video id="video" src="./video/video.mp4" width="1024"></video> 
```

我只是希望该死的视频与 iPad 屏幕一样宽，但无论我指定什么尺寸，侧面总是有黑条。我发现的唯一解决方法是放大视频然后给它一个负边距以便它居中，但肯定有更好的解决方案......特别是因为黑色不需要的“边距”的宽度不是恒定的并且根据视频的指定宽度变化。以前有人遇到过同样的问题吗？任何想法或帮助将不胜感激。谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:51:55.073

感谢您的输入。事实证明，我还必须指定视频元素的高度，出于某种原因，iPad 上的 Safari 无法正确缩放视频和控件；一旦我在 HTML 文件中的实际视频标签中明确指定了 16:9 的像素等效值，该栏就消失了。

# svn - 如何在颠覆存储库之间设置单向合并

> ID：11849810
> 
> 赞同：1
> 
> 时间：2012-08-07T16:02:02.217
> 
> 标签：svn

我们目前有一个由外包公司开发的软件，它被签入到我们服务器上的 SVN 存储库中。我们将很快结束与他们的合同，并引入了一些开发人员（包括我自己）来接管开发。我们已经获得了一个单独的 SVN 存储库。

外包公司不应该看到我们团队提交的更改，但我们需要接收他们输入的更改。有没有人知道我们可以设置我们的 SVN 服务器的方法，以便他们的更改（立即或每天或其他）提交到我们的存储库，而不会覆盖我们的更改。我很乐意根据需要手动查看任何合并冲突。

任何答案将不胜感激，设置，批处理文件或为包含的产品付费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:48:46.437

您需要[供应商分支机构](http://svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr.html)。仅授予外包公司访问您存储库的“供应商”部分的权限（如果他们使用 http 访问，那么您可以锁定`.htaccess`文件中的权限，以便他们只能访问此目录）。此位置仅包含他们提交给您的代码。

然后，您在 SVN 的其他地方创建一个区域，使用它们提供的代码对其进行初始化。我们称其为“第三方”目录。您可以自己进行更多更改，但外包商将无法看到此目录。如果外包商在供应商区域提交了新的更改，那么您需要使用供应商分支链接中描述的命令将这些更改合并到您的第三方区域。与其他颠覆合并一样，如果更改与您自己所做的更改不冲突，那么合并非常简单。如果存在冲突，那么您需要以通常的方式手动解决它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T03:39:43.923

我没有玩过这个，这只是一个想法。

有 svnrdump 实用程序可以转储远程存储库。如果您将持续将此信息加载到您的存储库中，那么您将能够进行任何分支/合并。

主要问题是 svnrdump 用于用信息填充*新*存储库，而不是现有存储库，因此可能需要对转储内容进行一些操作......它们可能不是微不足道的 - 您可能需要以某种方式存储修订对应关系。

我还看到了 svn2svn ( [http://svn2svn.codeplex.com](http://svn2svn.codeplex.com) ) 工具，但它似乎对操作的支持有限，并且开发得不是很活跃......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:43:39.457

谢谢大家，我们已经设法通过以下过程解决了这个问题。每天我们都从外包商可以访问的外部 svn 中获取一个转储文件，并将其应用到我们内部 SVN 的主干上。

与此同时，我们一直在开发该 svn 的一个分支，并在那里提交我们所有的更改。

然后我们将分支合并回主干并解决任何冲突。

然后我们分出一个新的分支来工作并等到第二天。

外包商 SVN 不会受到影响，我们可以在不丢失我们自己的情况下获得他们的最新更改，并且不会花费我们太多的精力 - 由于它主要由 svn 控制，因此减少了人为错误的可能性。

# wordpress - How To Customise WordPress Comment Submit Button

> ID：11849811
> 
> 赞同：2
> 
> 时间：2012-08-07T16:02:03.843
> 
> 标签：wordpress, comments, styles

I am trying to customise the output code of

```
<?php comment_form(); ?> 
```

At the moment the submit button outputs the following:

```
<p class="form-submit">
    <input name="submit" type="submit" id="submit" value="Post Comment">
    <input type="hidden" name="comment_post_ID" value="486" id="comment_post_ID">
    <input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p> 
```

I would like it to output the following:

```
<div class="darkbutton" onclick="document.commentform.submit()">
    <span class="darkbutton-left"></span><a href="javascript: submitform()">Log In</a>  
    <span class="darkbutton-right"></span>
</div> 
```

so as the completely restyle the button. Now I know it could be done by editing the core Wordpress files in comment-template.php but I really don't want to have to do this if there is any other way.

Any suggestions greatly appreciated! :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-17T15:42:57.900

有个窍门

```
.form-submit{display: none;} 
```

之后可以关注

```
$args = array(
 'comment_notes_after' => '<button type="submit" id="submit-new"><span>'.__('Post Comment').'</span></button>' 
);
comment_form($args); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-08T12:49:38.457

我需要添加一个类来形成标签和提交按钮。我不知道我在哪里找到它，但这个解决方案帮助了我。您必须修改 str_replace 以满足您的需要。

```
ob_start(); 
comment_form($comments_args, $post_id);
$form = ob_get_clean(); 
$form = str_replace('class="comment-form"','class="comment-form my-class"', $form);
echo str_replace('id="submit"','class="btn btn-warning"', $form); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T16:06:28.320

Wrodpress 具有“[可插入功能](http://codex.wordpress.org/Pluggable_Functions)”，允许您覆盖一些核心功能。这很有用，因为它们不会在升级等时覆盖您的更改。但是，它看起来不像`comment_form()`是其中之一。

如果您希望避免修改核心文件，为什么不直接编辑模板文件以输出所需的代码而不是调用`comment_form()`函数呢？否则，我很确定您只需要修改该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T01:35:08.920

[您可以在此处](http://core.trac.wordpress.org/ticket/15015)阅读有关此问题的一些讨论，但似乎没有对 WP 代码库进行任何修复。

现在，我正在使用 jQuery 对客户端按钮的样式进行更改。您可以使用 jQuery 生成您的`<div>`块，然后`form-submit`通过执行以下操作隐藏它们的块：

```
.form-submit {
    display: none;
} 
```

这不是万无一失的代码，但在他们实现更好的东西之前，它是一种黑客攻击。

# bash - 替换 XML 文件的最后一行

> ID：11849823
> 
> 赞同：2
> 
> 时间：2012-08-07T16:02:43.290
> 
> 标签：bash, shell

寻求帮助创建一个脚本，该脚本将用标记替换 XML 文件的最后一行。我有几百个文件，所以我正在寻找可以循环处理它们的东西。我设法像这样按顺序重命名文件：

```
posts1.xml
posts2.xml
posts3.xml 
```

ETC...

使其更容易循环通过。但我不知道如何编写脚本来做到这一点。我愿意使用 Linux 或 Windows（但我猜 Linux 更适合这种任务）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:07:13.307

[XMLStarlet](http://xmlstar.sourceforge.net)是一个用于执行 XML 解析和操作的命令行工具包。请注意，作为一个支持 XML 的工具包，它将尊重 XML 结构、字符编码和实体替换。

查看[ed](http://xmlstar.sourceforge.net/doc/UG/ch04s03.html)命令以了解如何修改文档。您可以将其包装在标准 bash 循环中。

例如，在由 s 链组成的文档中`<elem>`，您可以添加以下内容`<added>5</added>`：

```
mkdir new
for x in *.xml; do
    xmlstarlet ed -a "//elem[count(//elem)]" -t elem -n added -v 5 $x > new/$x
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T16:17:37.653

因此，如果您想在每个文件中附加一行：

```
sed -i '$a<YOUR_SHINY_NEW_TAG>' *xml 
```

要替换最后一行：

```
sed -i '$s/.*/<YOUR_SHINY_NEW_TAG>/' *xml 
```

***但请注意***，`sed`不是修改 xml 的理想工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T16:11:41.667

Linux方式使用`sed`：

要编辑文件的最后一行，您可以使用`sed`：

```
sed -i '$s_pattern_replacement_' filename 
```

要将整行更改为“替换”，请使用`$s_.*_replacement_`. 请务必使用`_`.`replacement``\`

要遍历文件，只需使用`for`：

```
for f in /path/posts*.xml; do sed -i '$s_.*_replacement_' $f; done 
```

然而，这是一种肮脏的方式，因为它不知道 XML 结构，而 XML 结构不受换行符的影响。您必须确保文件的最后一行包含您所期望的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:10:43.713

无论您是在 Linux、Windows 还是 MacOS 上，这几乎没有区别

问题是你想使用什么语言？

以下是 c# 中的示例（未优化，但将其视为伪代码）：

```
string rootDirectory = @"c:\myfiles";
var files = Directory.GetFiles(rootDirectory, "*.xml");

foreach (var file in files)
{
  var lines = File.ReadAllLines(file);
  lines[lines.Length - 1] = "whatever you want here";
  File.WriteAllLines(file, lines);
} 
```

您可以编译它并在 Windows、Linux 等上运行它。

或者你可以在 Python 中做同样的事情。

当然这个方法实际上并不解析 XML，但你只是想替换最后一行，对吧？

# c# - file format issue when using HTTP POST via C# to upload a picture file

> ID：11849826
> 
> 赞同：0
> 
> 时间：2012-08-07T16:02:51.770
> 
> 标签：c#, api, httpwebrequest

SDO REST API - The issue is that when I upload the file, it has no format and it looks like this: 98A9799C-CFB1-423B-A4AD-40609282F861 (2.7 MB) DELETE <--- this file needs to be picture.jpg

The file is simply picture.jpg

```
public string POST(string URI, string file)
        {
            NetworkCredential credentials = new NetworkCredential();
            credentials.UserName = AppVars.Username;
            credentials.Password = AppVars.Password;

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URI);
            request.Credentials = credentials;
            request.Method = WebRequestMethods.Http.Post;
            request.ContentType = "application/x-www-form-urlencoded";
            //I have also tried request.ContentType = "image/jpeg"; and ran into the same issue.

            byte[] bytes = File.ReadAllBytes(file);
            Stream os = null;
            try
            { 
                request.ContentLength = bytes.Length;   
                os = request.GetRequestStream();
                os.Write(bytes, 0, bytes.Length);         
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                if (os != null)
                {
                    os.Close();
                }
            }
            try
            { 
                WebResponse requestResponse = request.GetResponse();
                if (requestResponse == null)
                { return null; }
                StreamReader sr = new StreamReader(requestResponse.GetResponseStream());
                return sr.ReadToEnd().Trim();
            }
            catch (WebException ex)
            {
                MessageBox.Show(ex.Message);
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:33:57.090

问题解决了。这是一个缓存问题。我清除了浏览器缓存，并且能够在线查看图像。

# ruby-on-rails - Windows for Rails 应用程序上的 Nginx + Thin 配置

> ID：11849827
> 
> 赞同：1
> 
> 时间：2012-08-07T16:02:53.650
> 
> 标签：ruby-on-rails, windows, configuration, nginx, thin

我对使用 Nginx 和 Thin 为我的 Rails 3.2 应用程序提供服务感到有些困惑。以前我让 Thin 在 Windows Server 2008 R2 上为我的 Rails 应用程序提供服务，没有任何问题。我会在生产服务器上启动 Thin，在端口 80 上指定服务器的 IP 地址，如下所示：

```
rails server thin -b 10.xx.x.xxx -p 80 -e production 
```

现在，我正在尝试将 Nginx 添加到组合中，我对如何启动 Thin 以及如何配置 Nginx 以转发到 Thin 感到困惑。

**例如，现在 Nginx 正在侦听端口 80，我应该在不同的端口上本地启动 Thin 吗？像 0.0.0.0:3000（或 127.0.0.1:3000）？还是我像以前在 10.xx.x.xxx:80 上一样开始 Thin？**

在我的 Nginx conf 文件中，我是否将上游服务器指定为 localhost 或机器的 IP 地址？我不太确定它是干什么用的。

```
upstream mywebapp_thin {
  server 0.0.0.0:3000;
}

server {
    listen       80;
    server_name  mywebserver www.mywebserver;
    # locations et. al. excluded for brevity... 
```

我看到的大多数示例都有上游服务器在端口 3000 或 5000 上运行。我想知道这些示例是否真的用于开发设置，而不是用于生产？或者 Thin 需要在 80 以外的其他端口上运行，因为 Nginx 现在正在监听它？

我注意到我的 Web 应用程序不会响应基本 URL（mywebserver/projects），除非我添加运行 Thin 的端口（mywebserver:3000/projects）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:18:48.223

您是正确的，由于 nginx 已经在该端口上运行，因此您必须在新端口上开始精简。通常最好在环回接口上启动一个不是用户应该直接访问的服务器，这样用户就无法访问它，因此启动瘦的命令应该是这样的：

```
rails server thin -b 127.0.0.1 -p 3000 -e production 
```

之后，您应该将`upstream`块更改为：

```
upstream mywebapp_thin {
  server 127.0.0.1:3000;
} 
```

也就是说，如果您没有多个上游，则使用上游模块将一无所获。你应该`proxy_pass`直接到你的上游。实际上，`0.0.0.0`它不是有效的 IP 地址，因此这可能是您无法访问任何内容的原因。

我还注意到您没有`www.mywebserver.com`或`webserver.com`在`server_name`指令中，不确定您是否故意将其遗漏。

当您提出请求时，错误日志会说什么？如果这些更改不能解决您的问题，您可能需要发布错误日志以及完整配置。

附带说明一下，如果您在 Windows 上进行部署，您可能会考虑使用 JRuby 并使用[trinidad](https://github.com/trinidad/trinidad)作为服务器而不是瘦服务器，或者使用[warbler](https://github.com/jruby/warbler/)来打包您的应用程序，以便可以将其部署在您选择的 Java 应用程序服务器上。不过，这不会改变您的 nginx 配置。

# mysql - mysql计算特定日期内特定时间段之间的数据

> ID：11849829
> 
> 赞同：0
> 
> 时间：2012-08-07T16:02:56.317
> 
> 标签：mysql

是否可以在特定时间段内计算一天中特定时间的数据？

我有大量数据，想计算特定时间段内特定时间之间收集的“金额”。

例如：下面，我想将 7 月 1 日至 31 日 00:00 - 14:59 之间收集的金额作为“金额 1”和 15:00 - 20:59 之间收集的金额作为“金额 2”相加七月。“总金额”=“金额 1”+“金额 2”

sum(if('2012-07-01 00:00:00' 和 '2012-07-31 14:59:00',(Amount),0)) as 'Amount 1', sum(if(Date在“2012-07-01 15:00:00”和“2012-07-31 20:59:00”之间，（金额），0））作为“金额 2”，总和（金额）作为“总金额”

但是，“总金额”的结果与“金额 1”+“金额 2”不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:08:40.343

您没有对您的总金额字段施加任何限制（即没有日期或时间限制，因此包含您的日期/时间范围之外的数据。您可以像在其他字段中一样将条件逻辑添加到您的总和（金额）中或添加这样的 WHERE 子句：

```
WHERE DATE(Amount) BETWEEN '2012-07-01' and '2012-07-31'
AND TIME(Amount) BETWEEN '00:00:00' and '20:59:00' 
```

这将允许您正确计算总金额，并允许您在时间范围求和逻辑中删除日期范围条件。

# blogs - Silverstripe - adding a blog?

> ID：11849830
> 
> 赞同：1
> 
> 时间：2012-08-07T16:03:02.950
> 
> 标签：blogs, silverstripe

Need some help adding a blog for this client in Silver stripe CMS.

The client is [http://arborwinsys.co.uk/](http://arborwinsys.co.uk/)

and the SilverStripe version is - 2.3.7

Would it work installing this module?

[https://github.com/silverstripe/silverstripe-blog](https://github.com/silverstripe/silverstripe-blog)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:40:13.587

您正在查看的 git master 分支包含 SilverStripe 3 的更改。要使博客与您的 SilveStripe 版本一起使用，您必须通过切换分支返回到博客模块 0.4 或 0.3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T01:16:51.640

将博客模块添加到 silverstripe 2.3 的步骤

1.  [从https://github.com/silverstripe/silverstripe-blog/tree/0.3](https://github.com/silverstripe/silverstripe-blog/tree/0.3)下载 .zip （更高版本的模块需要更高版本的 silverstripe）

2.  将 .zip 文件的内容（它可能在 .zip 文件的一个目录中）解压缩到 silverstripe 安装中名为“blog”的新文件夹（它应该在根级别 - 也就是说，它应该在与“mysite”、“cms”和“sapphire”文件夹相同的文件夹

3.  在您的 silverstripe 安装上运行 /dev/build

4.  在您的 silverstripe 网站上运行 ?flush=all

如果您有任何问题：

*   确保您下载了正确的文件（除非您更新 silverstripe 安装，否则该模块的更高版本将无法工作）

*   确保您已正确提取文件：例如，如果您的网站是 www,mysite,com 并且您可以从 www,mysite,com/admin 访问您的管理员 - 您的文件应该在 www,mysite,com/blog

*   确保您已在您的网站上进行了重建

*   尝试冲洗

*   如果一切都失败了，请在此处发布您收到的错误。

祝你好运！

# forms - disabled javascript in content type form: no javascript

> ID：11849831
> 
> 赞同：0
> 
> 时间：2012-08-07T16:03:03.027
> 
> 标签：forms, drupal, wysiwyg

I have a problem in my drupal installation..in the content type page i can't drag and drop lines and i see two columns :**weight** and **parent** :image1 The problem had application on the content add form like that: image2 If there any configuration to add or to remove or any help to provide i will be very grateful Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:39:58.137

对不起..这似乎是一个服务器配置问题..我上传了一个'virgin'drupal安装到我的远程服务器（producton erver）并且我安装没有任何补充模块，只是具有所有文件的777权限的核心模块..但同样的问题仍然存在..我怀疑我正在使用的 php 版本（5.2.17 而不是 5.3.10）

# c# - 使用 c# 将日期时间转换为日期

> ID：11849834
> 
> 赞同：0
> 
> 时间：2012-08-07T16:03:22.403
> 
> 标签：c#, asp.net-mvc-2

我有日期时间，例如：

`01-Jan-10 12:00:00 AM`我只想得到`01-Jan-10`。我不知道如何转换它。有知道的请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:05:41.690

如果您有一个`DateTime`对象并想要获取该格式的字符串，请使用`myDateTime.ToString("dd-MMM-yy")`. 如果您有一个`DateTime`对象并且想要返回一个`DateTime`只是日期组件的新对象，请使用`DateTime.Date`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:06:10.810

像这样：

```
DateTime dt = DateTime.Today; //or whatever
string dateString = dt.ToShortDateString(); 
```

您也可以`ToString()`根据自己的喜好使用它来格式化它。在您的情况下，它将是：

```
string dateString = dt.ToString("dd-MMM-YY"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:07:12.000

使用方法`DateTime.ToShortDateString();`或`DateTime.ToLongDateString()`

# python - Z3 代码未运行指定的迭代次数

> ID：11849836
> 
> 赞同：4
> 
> 时间：2012-08-07T16:03:42.463
> 
> 标签：python, z3

此代码仅运行`i=4`，但如果位置未初始化，则运行`i=19`????? `location=BoolVal(False)`位置在这里初始化

```
from z3 import *
x,t,t1,t2,x_next=Reals ('x t t1 t2 x_next')
location,location_next=Bools('location location_next')

x=20
#t1=0
t=0
location=BoolVal(False)
#set_option(precision=10)
k=20

for   i in range(k):
  s=Solver()

  s.add(Or(And((10*x_next)>=(3*t1)-(3*t2)+(10*x),(10*x_next)<=(10*x)-(t2-t1),x_next>=18,(t2-t1)>0,Not(location_next)),
           And((10*x_next)>=(t2-t1)+(10*x),(5*x_next)<=(5*x)+(t2-t1),x_next<=22,(t2-t1)>0,location_next)),
            location_next==If(And(Not(location),x_next<19),True,If(And(location,x_next>21),False,location)))

  print i
  print s.check()
  if s.check()==unsat:
      break

  m=s.model()
  x=m[x_next]
  #t1=m[t2]

  print m[x_next].as_decimal(10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:58:07.183

简短的回答是：您在命令中添加的公式在第4 次迭代中`s.add(...)`是不可满足的。在第 4 次迭代开始时，我们有 that `x`is`19`和`location`is `False`。通过替换公式中的`x`和`location`，我们得到：

```
[Or(And(10*x_next >= 3*t1 - 3*t2 + 190,
        10*x_next <= 190 - t2 + t1,
        x_next >= 18,
        t2 - t1 > 0,
        Not(location_next)),
    And(10*x_next >= t2 - t1 + 190,
        5*x_next <= 95 + t2 - t1,
        x_next <= 22,
        t2 - t1 > 0,
        location_next)),
 location_next ==
 If(And(Not(False), x_next < 19),
    True,
    If(And(False, x_next > 21), False, False))] 
```

将上面的公式化简后，我们有：

```
[Or(And(10*x_next >= 190 + 3*t1 - 3*t2,
           10*x_next <= 190 - t2 + t1,
           x_next >= 18,
           t2  - t1 > 0,
           Not(location_next)),
       And(10*x_next >= 190 + t2 - t1,
           5*x_next <= 95 + t2 - t1,
           x_next <= 22,
           t2 - t1 > 0,
           location_next)),
    location_next == x_next < 19] 
```

为了说明这个公式的不可满足性，让我们考虑以下两种情况：`location_next`为真，或`location_next`为假。

1.  `location_next`是真的。那么，`x_next < 19`也一定是True。而且，第一个参数`Or`是False。因此，只有当我们可以使第二个参数为 True 时，公式才是可满足的。情况并非如此，因为以下内容无法满足：

    `10*x_next >= 190 + t2 - t1, 5*x_next <= 95 + t2 - t1, x_next < 19`

    前两个不等式意味着`x_next >= 19`。

2.  `location_next`是假的。那么`x_next >= 19`一定是True。`Or`通过类似的论证，只有当我们可以使第一个论证为真时，该公式才可满足。这也是不可能的，因为以下是不可满足的：

    `10*x_next <= 190 - t2 + t1, t2 - t1 > 0, 19 <= x_next`

    前两个不等式意味着`x_next < 19`。

备注：您没有在循环结束时更新`location`using的值。`location_next`你这样做是为了`x`，但不是为了`location`。这是一个正交问题。我期待这样的声明：

```
location=m[location_next] 
```

# php - preg_replace 仅返回捕获的内容

> ID：11849838
> 
> 赞同：0
> 
> 时间：2012-08-07T16:03:48.737
> 
> 标签：php, preg-replace

现在我正在为我的网站开发一个引擎。它设置为使用 PHP 然后处理并创建页面的元标记，从而使创建页面变得简单。我知道很多人可能认为这是处理事情的一种不好的方式。但是它使用动态分页来加载页面，所以它本质上会加载类似的东西`load.php?url=home`，例如。然后 load.php 构造页面，如果它存在于服务器上，如果不存在，我们将终止该页面并导致我们的 404。

问题是，我现在正在使用`preg_replace`来获取元标记包含的值。这将返回页面的 PHP 代码。我想做的就是得到结果，然后把结果变成一个变量。我试过`preg_filter`了，但这似乎没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:06:10.590

您可能想要[`preg_match`](http://php.net/preg-match)并使用该`$matches`数组。

# objective-c - Unit-testing iOS app syncronization logic

> ID：11849841
> 
> 赞同：1
> 
> 时间：2012-08-07T16:03:55.857
> 
> 标签：objective-c, xcode, unit-testing

I've recently adopted an iOS corporate app that acts as a client to a media CMS. Put another way, the web app manages a catalog of videos, image slide shows, and static/offline HTML files. The iOS app connects to the web app and downloads this content to itself for offline usage.

The hot spot is the synchronization logic between the iOS and web applications. Is there any advice for unit-testing the logic between these two projects?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:25:00.663

是的，你必须“欺骗”一些人。一种方法是使用`NSRunLoop`'s`runUntilDate:`方法，这是我的方法。

基本上，为了让您的 Web 代码有机会与 Web 通信，您希望将您的单元测试置于一种忙碌等待状态，实际上让每个人都可以做一些工作，但您还想在您的单元中“检查” - 定期测试以查看您的操作是否完成。

这是我的“去工作”方法：

```
-(BOOL)runLooperDooper:(NSTimeInterval)timeoutInSeconds{
    NSDate* giveUpDate = [NSDate dateWithTimeIntervalSinceNow:timeoutInSeconds];
    // loop until the operation completes and sets stopRunLoop = TRUE
    // or until the timeout has expired
    // stopRunLoop is a instance variable of the UnitTest object... take care to reset at the start or end of each test!
    while (!stopRunLoop && [giveUpDate timeIntervalSinceNow] > 0) 
    {
        // run the current run loop for 1.0 second(s) to give the operation code a chance to work
        NSDate *stopDate = [NSDate dateWithTimeIntervalSinceNow:1.0];
        [[NSRunLoop currentRunLoop] runUntilDate:stopDate];
    }

    return stopRunLoop;
} 
```

因此，在每个单元测试中：

```
 NSTimeInterval testSpecificTimeout = 60; //60 seconds or however long you need...
   [self runLooperDooper:testSpecificTimeout]; 
   STAssertTrue(stopRunLoop, @"Failed to complete before runloop expired after %f seconds", timeoutInSeconds); 
```

然后，我还为我的 Web 代码注册了一些事件处理程序，以便通过将`stopRunLoop`ivar 设置为`TRUE`.

# ruby-on-rails-3 - How to define polymorphic association with factory girl/bot

> ID：11849843
> 
> 赞同：11
> 
> 时间：2012-08-07T16:03:56.317
> 
> 标签：ruby-on-rails-3, factory-bot

I have a user and story models which both of them have comments.

I declared the following models as below:

```
class Comment
  belongs_to :commentable, polymorphic: true
  belongs_to :user
end

class User
end

class Story
end 
```

Now, I want to declare a comment object with FactoryGirl that belongs to the same user as commendable and as user.

Here is my code so far:

```
FactoryGirl.define do
  factory :user do
    sequence(:email) {|n| "person#{n}@exmaple.com"}
    sequence(:slug) {|n| "person#{n}"}
  end

  factory :comment do    
    occured_at { 5.hours.ago }
    user
    association :commentable, factory: :user
  end

end 
```

The problem here is that the user that write the comment and the commendable user are not the same.

Why should I fix that?

Many TNX

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T16:34:55.073

首先，我认为您还没有完成建立关联...我认为这就是您想要的：

```
class Comment < AR
  belongs_to :commentable, polymorphic: true
end

class User < AR
  has_many :comments, as: :commentable
end

class Story < AR
  has_many :comments, as: :commentable
end 
```

见： http: [//guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

不要忘记数据库设置。

其次，出厂设置返回两个用户，因为您告诉它。尝试：

```
FactoryGirl.define do
  factory :user do
    sequence(:email) {|n| "person#{n}@exmaple.com"}
    sequence(:slug) {|n| "person#{n}"}
  end

  factory :comment do    
    occured_at { 5.hours.ago }
    association :commentable, factory: :user
  end

end 
```

作为风格问题，模型名称的选择在这里有点混乱。用户如何“评论”？如果你的意思是其他类型的写作，我会选择一个不同的名字。如果您的意思是“用户个人资料”或类似的内容，则同上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-12T02:15:04.193

我遇到了这个问题，因为我个人有一个类似的问题并且刚刚解决了它。像@jordanpg 一样，我很好奇用户如何评论。如果我理解正确，问题在于撰写故事的用户和撰写故事评论的用户可能是不同的用户：

*   user_1 写了一个故事
*   user_2（或任何用户）可以评论 user_1 的故事

为了做到这一点，我会建立这样的模型关联：

```
# app/models/user.rb
class User < ApplicationRecord
  has_many :stories
  has_many :comments
end

# app/models/story.rb
class Story < ApplicationRecord
  belongs_to :user
  has_many :comments, as: :commentable
end

# app/models/comment.rb
class Comment < ApplicationRecord
  belongs_to :user
  belongs_to :commentable, polymorphic: true
end 
```

然后在我的工厂里，它看起来像这样：

```
# spec/factories.rb
FactoryBot.define do

  factory :user do
    sequence(:email) {|n| "person#{n}@example.com"}
    sequence(:slug) {|n| "person#{n}"}
  end

  factory :story do
    body "this is the story body"
    user
  end

  factory :comment do
    body "this is a comment on a story"
    user
    association :commentable, factory: :story
  end
end 
```

部分原因是因为`factory_bot`它将自动构建您正在创建的任何孩子的父级。他们关于关联的文档非常好：[http ://www.rubydoc.info/gems/factory_bot/file/GETTING_STARTED.md#Associations](http://www.rubydoc.info/gems/factory_bot/file/GETTING_STARTED.md#Associations)

如果您需要用户能够评论评论，您可以这样做：

```
 factory :comment_on_story, class: Comment do
    body "this is a comment on a story"
    user
    association :commentable, factory: :story
  end

  factory :comment_on_comment, class: Comment do
    body "this is a comment on a comment"
    user
    association :commentable, factory: :comment_on_story
  end 
```

# python - Python: Unexpected behavior using contextmanager on class method

> ID：11849844
> 
> 赞同：4
> 
> 时间：2012-08-07T16:04:07.520
> 
> 标签：python, with-statement, contextmanager

I'm trying to use the with..as contruct in Python to make writing "reversible computing" code easier. However, using `@contextmanager` on a class method seems to change the default initialization of future class instances. Python 2.6 and 3.1 have the same behavior. Here is a simple example exhibiting this behavior:

```
#!/usr/bin/env python

import contextlib

class SymList:
    def __init__(self, L=[]):
        self.L = L

    @contextlib.contextmanager
    def SymAdd(self, a):
        self.L.append(a)
        yield
        self.L.append(a)

SL = SymList()
with SL.SymAdd(3):
    SL.L.append(5)
print(SL.L) # Expect and see [3, 5, 3]
SL2 = SymList()
print(SL2.L) # Expect [] and see [3, 5, 3] 
```

*   Why isn't `SL2` a fresh instance of `SymList`?
*   How is the `SL2.L` data member referring to the `SL.L` data member?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T16:09:49.980

This behavior is due to how [mutable default arguments](https://stackoverflow.com/q/1132941/505154) work in Python.

Try changing `SymList.__init__()` to the following:

```
 def __init__(self, L=None):
        if L is None:
             self.L = []
        else:
             self.L = L 
```

As you modify `self.L` in one instance you are also modifying the `L` that is passed into `SymList.__init__()`, so the result with your code is that all instances would share the same `L` attribute when the instance is first initialized.

# c# - 验证在不使用模型时检查复选框

> ID：11849847
> 
> 赞同：2
> 
> 时间：2012-08-07T16:04:12.877
> 
> 标签：c#, asp.net-mvc-3, checkbox, validation

在用户可以转到下一页之前，我需要检查一些复选框。显示验证消息的最佳方式是什么？

看法：

```
@Html.CheckBox("terms_eligibility")
@Html.CheckBox("terms_accurate")
@Html.CheckBox("terms_identity_release")
@Html.CheckBox("terms_score_release") 
```

控制器：

```
[HttpPost]
public ActionResult Review(ReviewModel model)
{
    // Make sure all Terms & Conditions checkboxes are checked
    var termsEligibility = Request.Form.GetValues("terms_eligibility")[0];
    var termsAccurate = Request.Form.GetValues("terms_accurate")[0];
    var termsIdentityRelease = Request.Form.GetValues("terms_identity_release")[0];
    var termsScoreRelease = Request.Form.GetValues("terms_score_release")[0];

    if (termsEligibility == "true" && termsAccurate == "true" &&
        termsIdentityRelease == "true" && termsScoreRelease == "true")
    {
        return RedirectToAction("CheckOut","Financial");
    }

    return null;
} 
```

* * *

编辑，

我做了建议的更改。现在我如何让同一页面显示错误消息？

我将模型中的属性更改为此

```
 [RequiredToBeTrue(ErrorMessage = "*")] 
```

这是控制器

```
[HttpPost]
public ActionResult Review(ReviewModel model)
{

    if(ModelState.IsValid)
    {
        return RedirectToAction("CheckOut", "Financial");
    }

    return RedirectToAction("Review");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:14:22.827

我建议您使用视图模型和自定义验证属性：

```
public class RequiredToBeTrueAttribute : RequiredAttribute
{
    public override bool IsValid(object value)
    {
        return value != null && (bool)value;
    }
} 
```

和视图模型：

```
public class MyViewModel
{
    [RequiredToBeTrue]
    public bool TermsEligibility { get; set; }

    [RequiredToBeTrue]
    public bool TermsAccurate { get; set; }

    [RequiredToBeTrue]
    public bool TermsIdentityRelease { get; set; }

    [RequiredToBeTrue]
    public bool TermsScoreRelease { get; set; }

    ... some other properties that are used in your view
} 
```

并且视图当然会被强类型化到视图模型中：

```
@model MyViewModel

@Html.ValidationSummary(false)
@using (Html.BeginForm())
{
    @Html.CheckBoxFor(x => x.TermsEligibility)   
    @Html.CheckBoxFor(x => x.TermsAccurate)   
    @Html.CheckBoxFor(x => x.TermsIdentityRelease)   
    @Html.CheckBoxFor(x => x.TermsScoreRelease)   
    ...
    <button type="submit">OK</button>
} 
```

最后，您的控制器操作将视图模型作为参数：

```
[HttpPost]
public ActionResult Review(MyViewModel model)
{
    if (!ModelState.IsValid)
    {
        // there were validation errors => redisplay the same view  
        // so that the user could fix them
        return View(model);
    }

    // at this stage we know that validation succeeded =>
    // we could proceed in processing the data and redirecting
    ...

    return RedirectToAction("CheckOut", "Financial");
} 
```

请注意，类似`Request.Form.GetValues("terms_eligibility")[0];`和`termsEligibility == "true"`的内容实际上并不是您希望在正确编写的应用程序中看到的那种代码。

# orm - Join conditions with selfreferencing manyToMany relation

> ID：11849851
> 
> 赞同：0
> 
> 时间：2012-08-07T16:04:29.703
> 
> 标签：orm, doctrine, doctrine-orm

I am trying to port my PHP application to Zend Framework with Doctrine2\. It's a webshop platform. I need to write a DQL query with a extra condition to select accessoires from products who are in user's shoppingcart.

I have a traditional query:

```
SELECT 
    ... 
FROM 
    product 
INNER JOIN 
    accessory_to_product ON(product.productid = accessory_to_product.accessoryid AND accessory_to_product.productid IN(000,000,000)) 
```

But this has to be Doctrine. I have the following entity:

```
<?php

/**
 * @ORM\Table(name="product")
 * @ORM\Entity(repositoryClass="BestBuy\Entity\Repository\ProductRepository")
 */
class Product extends \BasicEntity
{

    /**
     * 
     * @var integer
     * @ORM\Column(type="integer",nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $productid;

    /**
     *
     * @var string
     * @ORM\Column(type="string",nullable=false)     
     */
    protected $title;

    /**
     *
     * @var string
     * @ORM\Column(type="text",nullable=false)   
     */
    protected $description;

    /**
     *
     * @var string
     * @ORM\Column(type="datetime",nullable=false)   
     */
    protected $insertdate;

    //....

    /**
     *
     * @var array
     * 
     * @ORM\ManyToMany(targetEntity="Product")
     * @ORM\JoinTable(name="accessory_to_product",
     *  joinColumns={@ORM\JoinColumn(name="accessoryid", referencedColumnName="productid")},
     *  inverseJoinColumns={@ORM\JoinColumn(name="accessoryid", referencedColumnName="productid", unique=false)});
     */    
    protected $accessories;

} 
```

Thus I want to rewrite this query to Doctrine2:

```
$qb = $this->getEntityManager()->createQueryBuilder();
$qb->select('p')
    ->from('BestBuy\Entity\Product', 'p')
    ->join('p.accessories', 'a', Expr\Join::WITH, $qb->expr()->in('p.productid', ':products'))
    ->setParameter('products', $products); 
```

But this gives me the following query:

```
SELECT 
    p0_.productid AS productid0, 
    p0_.title AS title1, 
    p0_.description AS description2, 
    p0_.insertdate AS insertdate3, 
    p0_.price AS price4, 
    p0_.model AS model5, 
    p0_.categoryid AS categoryid6, 
    p0_.deliverytimeid AS deliverytimeid7, 
    p0_.status AS status8, 
    p0_.weight AS weight9, 
    p0_.pagetitle AS pagetitle10, 
    p0_.metadescription AS metadescription11, 
    p0_.youtubecode AS youtubecode12 
FROM 
    product p0_ 
INNER JOIN 
    accessory_to_product a2_ ON p0_.productid = a2_.accessoryid 
INNER JOIN 
    product p1_ ON p1_.productid = a2_.accessoryid AND (p0_.productid IN (11224)) 
```

This is almost correct except that the accessory_to_product table is joined twice. Does anyone has a tip for me? Actually I should select FROM accessoires and then join to product, but since this is a relation to product this isn't possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:17:13.853

终于让它工作了。我的关系不正确：

```
/**
*
* @var array
* 
* @ORM\ManyToMany(targetEntity="Product", fetch="EXTRA_LAZY")
* @ORM\JoinTable(name="accessory_to_product",
*  joinColumns={@ORM\JoinColumn(name="accessoryid", referencedColumnName="productid")},
*  inverseJoinColumns={@ORM\JoinColumn(name="accessoryid", referencedColumnName="productid", unique=false)});
*/ 
```

需要是：

```
/**
*
* @var array
* 
* @ORM\ManyToMany(targetEntity="Product", fetch="EXTRA_LAZY")
* @ORM\JoinTable(name="accessory_to_product",
*  joinColumns={@ORM\JoinColumn(name="accessoryid", referencedColumnName="productid")},
*  inverseJoinColumns={@ORM\JoinColumn(name="productid", referencedColumnName="productid", unique=false)});
*/ 
```

因为accessory_to_product 表有两列，accesoryid 和productid。以下代码：

```
 $qb = $this->getEntityManager()->createQueryBuilder();
    $qb->select('p')
            ->from('BestBuy\Entity\Product', 'p')
            ->where($qb->expr()->in('a.productid', ':products'))    
            ->leftJoin('p.accessories', 'a')
            ->setParameter('products', $products); 
```

在 SQL 中进行以下查询：

```
SELECT 
    p0_.productid AS productid0, 
    p0_.title AS title1, 
    p0_.description AS description2, 
    p0_.insertdate AS insertdate3, 
    p0_.price AS price4,
    p0_.model AS model5, 
    p0_.categoryid AS categoryid6, 
    p0_.deliverytimeid AS deliverytimeid7, 
    p0_.status AS status8, 
    p0_.weight AS weight9, 
    p0_.pagetitle AS pagetitle10, 
    p0_.metadescription AS metadescription11, 
    p0_.youtubecode AS youtubecode12 
FROM 
    product p0_ 
LEFT JOIN 
    accessory_to_product a2_ ON p0_.productid = a2_.accessoryid 
LEFT JOIN 
    product p1_ ON p1_.productid = a2_.productid 
WHERE 
    p1_.productid IN (11224) 
```

这与原始版本略有不同，但返回的结果完全相同！

# c++ - 如何列出目标文件中存在的函数？

> ID：11849853
> 
> 赞同：20
> 
> 时间：2012-08-07T16:04:41.610
> 
> 标签：c++, visual-c++

我试图了解 C/C++ 中的编译和链接过程。我知道源文件首先由编译器转换为目标文件。然后链接器从目标文件生成库或可执行文件。

我试图首先阅读目标文件中的信息。这是我为实验编写的程序。

函数.h

```
#include <iostream>

void beautifulprint(char *str); 
```

函数cpp

```
#include "stdafx.h"
#include "func.h"

using namespace std;

void beautifulprint(char *str) {
    cout << "*** " << str << " ***" << endl;
} 
```

测试应用程序.cpp

```
#include "stdafx.h"
#include "func.h"

int _tmain(int argc, _TCHAR* argv[])
{
    beautifulprint("Hello, world!");

    return 0;
} 
```

在 VS 2010 中构建项目后，我得到了 func.obj。我假设在 func.obj 中的某个地方应该有 beautifulprint 函数的引用。我为 func.obj 的调试和发布版本运行了以下内容

```
dumpbin /HEADERS func.obj > funchead.txt 
```

下面是输出。

调试版本（不包括完整输出，因为它非常大）

```
...

SECTION HEADER #41
   .text name
       0 physical address
       0 virtual address
      78 size of raw data
    5B94 file pointer to raw data (00005B94 to 00005C0B)
    5C0C file pointer to relocation table
       0 file pointer to line numbers
       A number of relocations
       0 number of line numbers
60501020 flags
         Code
         COMDAT; sym= "void __cdecl beautifulprint(char *)" (?beautifulprint@@YAXPAD@Z)
         16 byte align
         Execute Read

SECTION HEADER #42
.debug$S name
       0 physical address
       0 virtual address
      E8 size of raw data
    5C70 file pointer to raw data (00005C70 to 00005D57)
    5D58 file pointer to relocation table
       0 file pointer to line numbers
       7 number of relocations
       0 number of line numbers
42101040 flags
         Initialized Data
         COMDAT (no symbol)
         Discardable
         1 byte align
         Read Only

... 
```

发布版本（完整输出！）

```
Microsoft (R) COFF/PE Dumper Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file func.obj

File Type: ANONYMOUS OBJECT

ANON OBJECT HEADER VALUES
               1 version
             14C machine (x86)
        50213733 time date stamp Tue Aug 07 16:41:39 2012
                 ClassID: {0CB3FE38-D9A5-4DAB-AC9B-D6B6222653C2}
             2D1 size
               0 flags 
```

这是我的问题。不出所料，func.obj Debug 版本有对 beautifulprint 的引用。但令我惊讶的是，Release 版本中没有提到 beautifulprint？链接器如何知道此函数存在于目标文件中。

另外为什么调试 obj 版本具有来自 iostream 的功能？这些不应该出现在某个标准库而不是这个obj中吗？

**编辑**：我直接在 VS 2010 中以 Hex 格式打开了 release func.obj。我在右侧 (ASCII) 列中搜索了 beautifulprint 及其存在。这意味着引用存在。为什么垃圾箱不显示它？我需要一些工具来以人类可读的格式查看它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T16:15:35.697

转储符号。所有 .obj 文件都有一个符号表。它将向您显示内部定义的那些符号，以及那些需要解析的符号。您看到的 IO 符号可能是 UNDEF 符号，但符号表应该更清楚。

```
DUMPBIN /SYMBOLS func.obj 
```

[请记住，当使用 /GL（整个程序优化](http://msdn.microsoft.com/en-us/library/0zza0de8(v=vs.71))）编译对象时，/SYMBOLS 不可用。使用 /GL 创建的对象模块（以及库）是用一种不保证从一个编译器版本到下一个编译器版本兼容的格式创建的。

整个程序优化意味着优化器可以跨所有模块进行优化，而不是仅在每个模块内进行优化。函数可以成为“内联”和其他可能与 COFF 不太兼容的技巧。除非您为所有受支持的编译器版本提供库，否则建议可交付库不要设置 /GL 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-11T17:29:16.960

我使用了**objdump**（在 gnu c，windows 平台中）。

```
 C:\...obj>objdump -t winsock001.o

    winsock001.o:     file format pe-x86-64
    SYMBOL TABLE:
    [  0](sec -2)(fl 0x00)(ty   0)(scl 103) (nx 1) 0x0000000000000000 winsock001.c
__main
__imp_WSAStartup
__imp_socket
__imp_htons
__imp_inet_addr
__imp_connect
__imp_closesocket
__imp_WSACleanup
__imp_WSAGetLastError
printf
puts 
```

# jqgrid - Display the full Datetime

> ID：11849854
> 
> 赞同：0
> 
> 时间：2012-08-07T16:04:44.913
> 
> 标签：jqgrid, jqgrid-formatter

I have to display the grid date as a datetime ex: 07-August-2012 09:30:00 with the full date and time. Every-time I use the formatter `d-M-y h:m:ss` I get junk values. Please help, I am working on creating a jqGrid in IBM BPM7.5 and the srcformat is `d/m/yyyy`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:02:19.653

要格式化`07-August-2012 09:30:00`您应该能够使用的日期：

```
d-F-Y H:i:s 
```

根据[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter)，他们使用 PHP 日期格式化程序：

> 日期格式的定义使用 PHP 转换

因此，您可以查看[PHP: date](http://php.net/manual/en/function.date.php)以获取支持的日期/时间格式选项的枚举。

这有帮助吗？

# c# - 数据集或数据表的 WriteXml 是否使用内存？

> ID：11849855
> 
> 赞同：2
> 
> 时间：2012-08-07T16:04:46.403
> 
> 标签：c#, .net, vb.net

我有一个包含超过 10 000 行的数据表。

当我做 ：

```
Dim oTable As New System.Data.DataTable
' .....
' Filling the DataTable
' .....
oTable.writeXml("MyFile.xml") 
```

writexml ***()***使用内存还是硬盘？

我测试了，我发现它使用了大量的内存。

写入文件通常使用 FileStreams。所以它不应该使用内存。

我错了吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:14:58.477

我不认为 WriteXML 吃内存是正常的。刚刚测试了一个表中的 287,120 行（导出的 XML 大小接近 200MB）——内存使用量保持不变。将此表加载到内存中大约需要 1.2GB，然后在编辑器中打开它。运行 WriteXML 后，内存消耗在这 4-5 秒内保持不变，可能会上升和下降 1MB。

你是如何填写数据表的？如果您使用一些延迟加载技术，这可能会解释高内存使用率，但这不是由 WriteXML 造成的，而是由数据本身造成的。

# c++ - 在 Windows / C++ 中强制显示分辨率

> ID：11849857
> 
> 赞同：4
> 
> 时间：2012-08-07T16:04:52.057
> 
> 标签：c++, windows, winapi

我将其中一个切换视图设置为在两台机器之间切换一个监视器，它似乎正在从监视器中剥离一些信息。显示器的原始分辨率为 1920x1080@60hz，但 Windows 拒绝让我将其设置为高于 25hz 隔行扫描，这看起来非常糟糕。我已经尝试了广泛的谷歌搜索建议的所有驱动程序和设置，但仍然没有。

作为一个快速项目，我尝试查看是否可以使用`ChangeDisplaySettingsEx`winapi 函数将显示器强制设置为特定的显示设置，但看起来 windows 仍在检查以确保模式处于不正确的支持模式集并返回`DISP_CHANGE_BADMODE`。

这是完整的功能：

```
WCHAR deviceName[64];
DISPLAY_DEVICE dd;  
dd.cb = sizeof(DISPLAY_DEVICE);
int index=0;
while (EnumDisplayDevices(NULL, index++, &dd, 0))
{
    // first monitor is the problem one
    if (index == 1) {
        lstrcpy(deviceName, dd.DeviceName);
    }
}

DEVMODE dmScreenSettings;
ZeroMemory(&dmScreenSettings, sizeof(DEVMODE));
dmScreenSettings.dmSize             = sizeof(DEVMODE);
dmScreenSettings.dmPelsWidth        = 1920;
dmScreenSettings.dmPelsHeight       = 1080;
dmScreenSettings.dmBitsPerPel       = 32;
dmScreenSettings.dmDisplayFrequency = 60;
dmScreenSettings.dmFields           = DM_DISPLAYFREQUENCY | DM_BITSPERPEL | DM_PELSWIDTH | DM_PELSHEIGHT;

LONG res = ChangeDisplaySettingsExW((LPCWSTR) &deviceName, &dmScreenSettings, NULL, CDS_RESET, NULL);
if (res != DISP_CHANGE_SUCCESSFUL)
{
    if (res == DISP_CHANGE_BADMODE)
        MessageBoxA(NULL, "Bad mode", "Failed", MB_ICONHAND);
    else if (res == DISP_CHANGE_BADPARAM)
        MessageBoxA(NULL, "Bad Param", "Failed", MB_ICONHAND);
    else
        MessageBoxA(NULL, "Other error", "Failed", MB_ICONHAND);
} 
```

我已经看到[如何强制任何我想要的显示分辨率/时间？](https://stackoverflow.com/questions/6835076/how-can-i-force-any-display-resolution-timing-i-want)如果可能的话，我宁愿不使用 ATI SDK（我有一个 ATI Radeon）。有什么建议么？我认为用软件解决这个问题会很巧妙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T17:07:49.923

因此，在 SuperUser 上进行搜索为我指明了正确的方向（感谢 Josh）。switchview 没有正确传递 EDID 数据，Windows Vista/7 坚持在所有情况下都使用 EDID 数据。有一些关于移除两个 EDID 引脚的信息，但我不想走那条路。

做一些谷歌搜索让我找到了[http://msdn.microsoft.com/en-us/windows/hardware/gg487330.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg487330.aspx)，它有一个关于覆盖你的 EDID 的白皮书。这反过来又把我带到了一个论坛帖子：[http](http://www.sevenforums.com/tutorials/7947-force-dvi-hdmi-resolutions-refresh-rates.html) ://www.sevenforums.com/tutorials/7947-force-dvi-hdmi-resolutions-refresh-rates.html 。有人很好地创建了一个工具来轻松生成 EDID 覆盖 .dat 文件。

从那时起，我做了以下事情：

1.  使用 phoenix.exe 工具为我的主显示器生成一个 .dat（它工作正常）

2.  在 moninfo.exe 中加载 dat 以创建 .inf 驱动程序文件

3.  使用“有磁盘”来指定我的新 .inf 文件

4.  无视司机未签名的大红色警告（一般不是好事）

5.  重新启动并将分辨率切换到正确的分辨率

# c# - Why HashSet does not implement IReadOnlyCollection ?

> ID：11849861
> 
> 赞同：16
> 
> 时间：2012-08-07T16:05:02.887
> 
> 标签：c#, .net, collections, .net-4.5

I've just found that .NET Fx now has 3 useful interfaces:

1.  [`IReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/hh881542)
2.  [`IReadOnlyList<T>`](http://msdn.microsoft.com/en-us/library/hh192385)
3.  [`IReadOnlyDictionary<K,V>`](http://msdn.microsoft.com/en-us/library/hh136548)

And I'm bit confused why [`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438(v=vs.110)) do not implement `IReadOnlyCollection<T>`? Are there any reasons, or Microsoft just forgot about sets again?

**UPD**

After two-hours googling I've found that there are many collections in BCL which has `.Count` property but do not implement `IReadOnlyCollection<T>` interface.

**UPD2**

I've found this post [http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/b4fb991a-3f5c-4923-93d4-7cd5c004f859](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/b4fb991a-3f5c-4923-93d4-7cd5c004f859) and the answer by *Immo Landwerth* where he've said following

> **Will other collections besides List<> and Dictionary<> be updated to support these interfaces?**
> 
> Absolutely. In fact, all of our built-in collection types already implement IReadOnlyList<> and IReadOnlyDictionary<>. This means, you can directly pass an instance of List, T[] or Dictionary<> to an API that takes an IReadOnly-version of it.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-07-30T15:53:39.260

在 4.5 版本的框架中，[`HashSet<T>`](https://msdn.microsoft.com/en-us/library/bb359438(v=vs.110).aspx)没有实现`IReadOnlyCollection<out T>`.

这个遗漏在框架的 4.6 版本中得到了解决（在提出上述问题近 12 个月后发布）。

这些更正[不限于`HashSet<T>`](https://msdn.microsoft.com/en-us/library/ms171868(v=vs.110).aspx)其他集合，例如[`Stack<T>`](https://msdn.microsoft.com/en-us/library/3278tedw(v=vs.110).aspx)并[`Queue<T>`](https://msdn.microsoft.com/en-us/library/7977ey2c(v=vs.110).aspx)已收到这些改进。

关于任何遗漏的原因的猜测是没有实际意义的。这可能是疏忽或时间压力，但坦率地说，这没什么大不了的。我怀疑即使是来自 Microsoft 开发团队的直接输入也会有些主观，即使我们喜欢相关的轶事。

# .htaccess - .htaccess Mod_rewrite - 我很困惑

> ID：11849867
> 
> 赞同：1
> 
> 时间：2012-08-07T16:05:24.257
> 
> 标签：.htaccess, mod-rewrite, get

我无法让以下工作：
我有我的基本域：www.mydomain.com
我想通过 .htaccess 文件重定向用户，如下所示：
如果有人键入：

> www.mydomain.com/id

然后它将重定向到：

> www.mydomain.com/directory/process?id=id

这是我尝试过的：

```
RewriteEngine On
RewriteRule ^v/([^/]*)$ /directory/process?id=$1 [L] 
```

我已经把它放在根目录（又名 mydomain.com/）
提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:57:34.807

要重写`/id`为，*如果*请求不是针对真实的现有文件，则`/directory/process?id=xxx`捕获第一个之前的所有内容。`/`

 *```
RewriteEngine On
# Don't rewrite if the request is for a real file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# ([^/]+) captures everything up to the first / in $1
RewriteRule ^([^/]+) directory/process?id=$1 [L] 
```*

# c - is it ok to include a .c file in another .c file?

> ID：11849868
> 
> 赞同：0
> 
> 时间：2012-08-07T16:05:25.757
> 
> 标签：c, struct, include

For example:

`file1.c` has:

```
static const struct 
{ 
   int a;
   int b;
   int c;
} mystruct = { 1, 2, 3}; 
```

`file2.c` has:

```
#include <stdio.h>
#include "file1.c" 
```

and so on.

Is this OK to do?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T16:07:53.757

> 这可以吗？请告诉我。谢谢。

这在技术上可行，但我不推荐它。相反，我建议将您的声明放在头文件中，然后将两个 .c 文件都包含在您的项目/makefile/etc 中。

这将更像是一种“标准”的工作方式，从而使您的项目更易于维护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T16:28:14.990

是的，只要您有良好的动机，就可以。例如，它可以帮助您避免源代码重复（即使您仍然会在二进制级别获得重复），或者它可以允许您使用机器生成的代码片段（例如，由单独的编译器生成的解析器）。您甚至可以在某些平台上获得一些性能或占用空间的改进，因为编译器可以选择更优化的指令（例如，如果是单独的翻译单元，则这些指令`file1.c`是不可能的。`file1.c`

如果你的动机不够好，应该避免，因为它可能会在一些方面造成麻烦。想到的几个是：

*   您的构建系统可能不够智能，无法检测到依赖于`file1.c`
*   您的编辑器或开发环境可能不够聪明，无法从`file1.c`
*   `file1.c`如果不是您在其中定义的所有符号都具有内部链接，则可能会导致链接错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T20:51:16.397

我建议虽然有时#include 一个包含实际代码或数据定义的文件（与仅声明不同）很有用，但我不喜欢用 .c 扩展名命名文件，除非它们是经过设计的可以直接编译。我通常将设计为#include 的文件命名，但包含的不仅仅是声明，扩展名为“.i”。例如，在我使用的一个嵌入式处理器上，访问静态结构元素的代码大约是访问给定结构指针的元素的代码的四分之一，运行速度大约是其四倍。因此，如果有大量代码块可以对结构进行操作，则代码需要合理快速地运行，并且代码可能必须在两个结构上进行操作，

我首选的实现这个习惯用法的方法是：

```
#define 事情 0
#define THINGIE_STRUCT thingie0
#include "thingie.i"
#undef THINGIE_STRUCT
#undef 事情

#define 事情 1
#define THINGIE_STRUCT thingie1
#include "thingie.i"
#undef THINGIE_STRUCT
#undef 事情

```

有点难看，但有时在间接结构访问非常糟糕的机器上是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T16:15:44.363

避免这样做。将对项目的其他部分有用/必要的任何类型定义和函数签名拉出*file1.c*中提取到一个公共头文件中，而不是可以包含在项目的其他部分中。

通常在*file2.c中包含**file1.c*会起作用，因为文件包含就是这样，将 替换为另一个文件的内容，但是随着项目复杂性的增加，这将开始中断，并且您开始遇到多重定义符号的问题.*`#include`*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T16:07:18.610

不，您始终应避免包含 ac 文件。

头文件应该只包含定义/原型。

c 文件包含函数，不应包含在内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T16:07:42.330

从技术上讲，它只是一个文件的名称，*.c*扩展名对文件内容没有影响，如果你愿意，你可以称它为*.z*。所以回答你的问题：是的，你可以做到。但它确实违反了约定，它应该在头文件中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T16:09:52.793

您可以在这里找到问题的好答案：

[在另一个中包含一个 C 源文件？](https://stackoverflow.com/questions/232693/including-one-c-source-file-in-another)

我自己会将它保存为头文件 file1.h，并包含它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-07T16:54:18.300

这里基本上没有技术考虑。也就是说，这个决定本质上与软件或硬件的运行方式无关。

该决定中的考虑是人类的考虑。当我们就如何组织源代码做出决定并制定惯例时，我们这样做是为了实现以下目标： 使代码更易于编写。使代码更易于维护。减少错误。

这些都是人的考虑。人类的行为方式与完美机器不同：他们会犯错误。他们忘记了事情。它们可以更好地处理分成可管理大小的问题。

通常，头文件用于声明在多个源文件中使用的东西（例如许多不同的人在许多不同程序中使用的库例程）并将声明与定义分开，以便您可以编译一个源文件使用例程，而不必在源文件中包含这些例程的定义。从技术上讲，您可以将声明复制到每个源文件中，并且您会从编译器中得到相同的结果。但这违反了几个目标：它使代码更难编写，因为每当例程定义发生更改时，都必须更改声明的所有副本。它增加了错误：有时，人们会忘记或错过需要更改的副本之一。

因此，您可以将结构对象的定义放入 .c 文件中。您也可以将其放入头文件中。这会帮助您实现目标吗？

请注意，结构对象被声明为静态的。如果它在多个源文件中编译，则生成的每个目标文件都将有一个单独的副本。当您将目标文件链接到单个可执行文件中时，它将具有相同数据的多个副本（除非您使用的开发人员工具非常非常好）。这是一种浪费，所以这不是一个好主意。但是，如果您只在一个源文件中编译它，那么只有人为因素才重要：您是否有可能犯错误并同时编译 file1.c 和 file2.c？当其他人处理这段代码时，他们会理解 mystruct 是如何以及为什么定义的吗？等等。

我从事过适合在单独的源文件中定义对象的项目。例如，有时需要准备一个计算数据表并将其包含在程序的源中。在这种情况下，将该表保存在单独的源文件中是合理的。

通常，在这种情况下使用的解决方案是使用仅包含表定义而不包含其他内容的源文件。在那个源文件中，表将被声明为外部的，使用“extern”关键字。在头文件中，表将被声明但未定义。每个使用该表的源文件都将包含用于声明该表的头文件。定义表的源文件还包括头文件。（当你这样做时，如果头文件和源文件之间有任何不匹配，编译器会报错。这样可以避免头文件中的错误。）

定义表的源文件将被编译成一个目标模块。包含程序其他内容的源文件将被编译成单独的目标模块。然后使用链接器将所有目标模块组合成一个程序。

在您的情况下，是否有任何理由将对象声明为静态？如果有，那么将其定义包含在另一个源文件中的这种解决方案可能是合适的。但是，很少有这样的原因。如果您认为将定义放在单独的文件中有助于您组织源代码，那么更可能的适当解决方案是将对象声明为外部对象，如上所述，并单独编译源代码。

使用 GCC 时，您可以将源代码编译为对象模块，如下所示：

> gcc -c -o name0.o name0.c gcc -c -o name1.o name1.c

“-c”开关表示“只需编译到对象并停止，而不是执行下一步链接以生成可执行文件。” “-o”开关指定输出文件的名称。

然后，您可以将对象模块链接到可执行文件，如下所示：

> gcc -o 程序名0.o name1.o*

# mysql - Delete mysql unspecifying column

> ID：11849870
> 
> 赞同：0
> 
> 时间：2012-08-07T16:05:27.270
> 
> 标签：mysql, sql

I would like to make a request like this one:

```
DELETE * FROM '" . $my_table . "' 
WHERE 1 AND '--my first column--' = '" . $my_id . "'; 
```

The main idea is to delete, no matter what the first column's name of my table is, every rows is like my value, unspecifying the column name.

In CSS I would write:

```
WHERE column:nth-child(0) = $my_id 
```

Do you know if this is possible? And how it works?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:10:43.583

第一次运行：

```
DESC `table`; 
```

然后在 DELETE 中使用在 DESC 中检索到的列名。

```
DELETE FROM `table` WHERE `column-name` = value; 
```

# model-view-controller - Netbeans中的自定义“文件列表”？

> ID：11849891
> 
> 赞同：1
> 
> 时间：2012-08-07T16:06:14.247
> 
> 标签：model-view-controller, netbeans

我主要将 Netbeans 用于使用[MVC 框架](http://www.yiiframework.com/)的 PHP Web 开发。

使用 MVC 模式时，往往会有相关的文件，但在不同的目录中。例如，如果我正在构建一个博客网站并想要处理 Post 对象，我将在 Post 模型类文件、PostController 类文件和各种视图文件之间来回切换。即使你变得很快，四处寻找它们也会让人觉得重复且效率低下。从一个对象转到另一个对象通常需要关闭 4-5 个与前者相关的文件，然后在与后者相关的不同目录中打开 4-5 个文件。

我认为如果我可以制作类似于音乐播放列表的“文件列表”会很棒。也就是说，我可以将与每个对象相关的所有文件添加到列表中，然后在我想要打开/关闭这些文件的任何时候选择该列表。例如，我可以点击名为“Post”的列表，Post.php、PostController.php 等都会自动打开。

Netbeans 中是否有任何此类功能可用？

# python - Django 中 ForeignKeys、ManyToMany 和 GenericForeignKeys 的最佳实践

> ID：11849893
> 
> 赞同：4
> 
> 时间：2012-08-07T16:06:19.363
> 
> 标签：python, django, facebook, facebook-wall

我正在尝试在 Django 中做一堵墙，我已经做出了一个重要的设计决定。

我有以下课程：

WallPost、用户配置文件、组、事件

问题是我有用户个人资料、事件和组，它们都有可以发布的墙。因此，我无法与发布到正在发布的模型的用户建立外键关系，因为可以发布多个模型（除非我使用通用键，但我觉得所有墙贴都必须有一些外壳像墙壁物体）。

然后我想有一个中间类型的对象，比如墙，墙贴将外键到墙上，然后用户组和事件将外键到墙上。这对我来说也似乎效率低下，因为墙壁没有任何东西可以存储，而更像是一个封闭对象。

在 django 中使用 ForeignKeys 和 ManyToManyFields 和 GenericForeignKeys 时的最佳做法是什么？就像你如何判断这段关系应该走向何方？

感谢所有的投入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:43:33.067

```
class WallPost(models.Model):
    text = models.TextField()

class UserProfile(models.Model):
    name = models.CharField(max_length=128)
    wall_posts = models.ManyToManyField(WallPost, through='UserWall')

class UserWall(models.Model):
    profile = models.ForeignKey(UserProfile)
    post = models.ForeignKey(WallPost)

#same for groups
class Group(models.Model):
    name = models.CharField(max_length=128)
    wall_posts = models.ManyToManyField(WallPost, through='GroupWall')

class GroupWall(models.Model):
    group = models.ForeignKey(Group)
    post = models.ForeignKey(WallPost)

UserWall.objects.filter(profile_id=profile.id).select_related('post')
GroupWall.objects.filter(group_id=group.id).select_related('post')

#or
group = Group.objects.get(id=1).select_related('wall_posts')
posts = group.wall_posts.all() 
```

或者

```
class Wall(models.Model):
    TYPE = (
        (0, 'User'),
        (1, 'Group'),
        (2, 'Event'),
    )

    source = IntegerField() #id of user/group/event
    source_type = SmallIntegerField(choices=TYPE)

class WallPost(models.Model):
    text = models.TextField()
    wall = models.ForeignKey(Wall) 
```

我会这样做的。

# javascript - Imgur 上传通过客户端 javascript 但不是 node.js 工作。困惑

> ID：11849894
> 
> 赞同：0
> 
> 时间：2012-08-07T16:06:22.810
> 
> 标签：javascript, jquery, node.js, imgur

这有效：

```
 $.post( 
        'http://api.imgur.com/2/upload.json', 
        { 
            key: 'dsfdwerwersf53534dfsfse3', 
            image: 'http://i.imgur.com/UH17u.png' 
        }, 
        function( data ) { console.log( data.upload.links.original ); }
    ); 
```

当我在 Chrome 的控制台中运行它时，imgur 会立即向我发送上传图片的 url `http://i.imgur.com/KrHMY.png`：. 出色的。

.

现在我正在使用 node.js 在服务器端尝试同样的事情，但它不起作用：

```
 var 
        express = require( 'express' )
    ,   app = express.createServer()
    ,   request = require( 'superagent' );

    app.get( '/', function( req, res ) {
        request
            .post( 'http://api.imgur.com/2/upload.json' )
            .send( { key: 'dsfdwerwersf53534dfsfse3', image: 'http://i.imgur.com/UH17u.png' } )
            .end( function( data ) {
                console.log( data.upload.links.original );
            });
    });

    app.listen( '8080' ); 
```

当我运行 node.js 应用程序时，imgur 会发回这个响应：

```
text: '{"error":{"message":"No API key was sent, and no user is authenticated","request":"\\/2\\/upload.json","method":"post","format":"json","parameters":"image = {\\"key\\":\\"dsfdwerwersf53534dfsfse3\\",\\"image\\":\\"http:\\/\\/i.imgur.com\\/UH17u.png\\"}"}}', 
```

关键部分是这样的：`No API key was sent`。为什么 imgur 无法识别`key`我正在发送的`POST`？

我试过同时使用`request`和`superagent`模块。我觉得很傻，无法弄清楚为什么这么简单的事情不起作用。感谢任何指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T16:13:50.910

jQuery 有时会做很多神奇的事情，以至于很难看到它。

在这里我也打赌两件事，我一个月没有使用超级代理，而且我犯了像这样的愚蠢错误，这让我很难过。

但在这里我敢打赌，body 最多是一个 json 或你的对象。JQuery 默认 urlencode 就像大多数 API 希望 POST 正文一样。利用

```
var = require('querystring');
/*...*/
.send(qs.encode({ key: '...', image: '...' })) 
```

# c - 尝试调用全局“打印”（一个零值）

> ID：11849898
> 
> 赞同：6
> 
> 时间：2012-08-07T16:06:43.950
> 
> 标签：c, lua, embedding

我有以下 C 文件：

```
//thing.c
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>

#include <stdio.h>

lua_State* L;

int main(){
        L = lua_open();

        lua_dostring(L, "print(\"lua\")");
        printf("hello\n");

        return 0; } 
```

和以下生成文件：

```
default:
        gcc -I/usr/include/lua50 -L/usr/lib -o qwerty thing.c -llua50 -llualib50 
```

代码构建得很好，但是当我运行它时，我得到以下信息：

```
[string "print("lua")"]:1: attempt to call global `print' (a nil value)
hello 
```

**注意**：我已经看到有关此错误的许多其他问题，但它们都直接在 Lua 中工作，而不是使用 C api。它们似乎还暗示问题在于`print`从未定义过该功能。我不明白这一点，因为我可以直接从命令行运行 lua 解释器和 lua 脚本。

**编辑**：我正在使用 lua 5.0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T16:10:32.890

您必须在 Lua 中初始化库。打电话后`lua_open`打电话

```
luaL_openlibs(L); 
```

**编辑**：对于 Lua 5.0，我相信你必须手动打开库。对于该`print`功能，您只需要基础库：

```
luaopen_base(L); 
```

# c - 取出均匀间隔的对数箱

> ID：11849900
> 
> 赞同：3
> 
> 时间：2012-08-07T16:06:58.087
> 
> 标签：c, audio-fingerprinting

我已经编写了 2048 个信号样本的 fft，结果是 C 中的 1025 个频率值。（丢弃其他 1025 个样本（即`>n/2 samples`））。

现在我必须从这些频率值中取出 32 个均匀间隔的对数箱，这些频率值也在 318 到 2000hz 之间。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:44:17.447

[这个问题](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)告诉你如何计算出你的 FFT 的每个结果代表什么频率。然后，找出哪些频率进入哪个 bin。然后，在每个 bin 中，组合该 bin 中频率的 FFT 结果。（人们通常对频率表示的能量感兴趣，如该频率的 FFT 结果的幅度所表示的那样。如果是这样，则计算 bin 中每个结果的幅度并将这些幅度相加以获得 bin 的总数.)

如果您有 n 个对数间隔的 bin，其中第一个 bin 以频率 A 开始，最后一个 bin 以频率 B 结束，则 bin i（编号从 0 到 n-1）以频率 exp((ln(B)-ln(A ））*在一个。那个公式：

*   取 B 和 A 的对数。
*   取对数之间的距离 (ln(B)-ln(A))。
*   将该距离划分为多个间隔（乘以 i/n 以获得第 i^个间隔）。
*   将该距离从对数转换为频率（应用 exp）。
*   乘以 A 以设置起点（撤消 ln(A) 的减法）。

所以这个公式为你提供了每个 bin 的起点和终点，你可以用它来划分你的 bin。如果你想以 2000 Hz 开始最后一个 bin 而不是以 2000 Hz 结束，或者你想将开始和结束 bin 集中在 318 Hz 和 2000 Hz 左右而不是完全在这些频率上终止它们，你将不得不调整公式.

# tapestry - Shiro 为每个 getSession() 创建一个新会话

> ID：11849903
> 
> 赞同：1
> 
> 时间：2012-08-07T16:07:03.417
> 
> 标签：tapestry, shiro

我在挂毯应用程序中使用 shiro (1.2.0)。现在我只想将它用于会话管理。虽然默认会话管理（使用 ServletContainerSessionManager）有效，但当我尝试切换到本机会话时，shiro 停止跟踪它们：

```
public static WebSecurityManager decorateWebSecurityManager(WebSecurityManager manager) {
  if(manager instanceof TapestryRealmSecurityManager) {
    DefaultWebSessionManager sessionManager = new DefaultWebSessionManager();
    MemorySessionDAO sessionDAO = new MemorySessionDAO();
    sessionManager.setSessionDAO(sessionDAO);
    ((TapestryRealmSecurityManager) manager).setSessionManager(sessionManager);
  }
  return null;
} 
```

调试输出：

```
07-08-12 17:47:57:339 - {TRACE} util.ThreadContext Thread [1072280360@qtp-1531443370-6];  Bound value of type [$WebSecurityManager_19518d48138a] for key [org.apache.shiro.util.ThreadContext_SECURITY_MANAGER_KEY] to thread [1072280360@qtp-1531443370-6]
07-08-12 17:47:57:339 - {TRACE} mgt.DefaultSecurityManager Thread [1072280360@qtp-1531443370-6];  Context already contains a SecurityManager instance.  Returning.
07-08-12 17:47:57:339 - {TRACE} mgt.AbstractValidatingSessionManager Thread [1072280360@qtp-1531443370-6];  Attempting to retrieve session with key org.apache.shiro.web.session.mgt.WebSessionKey@1dc49089
07-08-12 17:47:57:339 - {DEBUG} servlet.SimpleCookie Thread [1072280360@qtp-1531443370-6];  Found 'JSESSIONID' cookie value [sbrxl74ij1v8]
07-08-12 17:47:57:339 - {DEBUG} mgt.DefaultSecurityManager Thread [1072280360@qtp-1531443370-6];  Resolved SubjectContext context session is invalid.  Ignoring and creating an anonymous (session-less) Subject instance.
org.apache.shiro.session.UnknownSessionException: There is no session with id [sbrxl74ij1v8]
at     org.apache.shiro.session.mgt.eis.AbstractSessionDAO.readSession(AbstractSessionDAO.java:170) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:13:51.187

问题是我忘记删除 @Persist 注释，默认情况下使用会话来存储数据。这导致 Tapestry 用它自己的值覆盖 shiro 的 JSESSIONID cookie。

# ios - Instruments.app 反汇编中的指令延迟随 Xcode 4.4 消失了吗？

> ID：11849908
> 
> 赞同：1
> 
> 时间：2012-08-07T16:07:13.260
> 
> 标签：ios, xcode, arm

Xcode 4.3.3 附带的 Instruments.app 在反汇编视图中的每条指令右侧显示了延迟和循环计数。它甚至告诉您管道会因依赖关系而停止，以及涉及哪些寄存器。

所有这些似乎都随着 Xcode 4.4 消失了——现在反汇编看起来就像它对 x86 代码所做的一样（当然，除了指令是 ARM ;-)）。

有谁知道是否可以重新获得该功能？或者是否有具有相同功能的第三方工具？

# ios6 - Xcode4.5 如何用 SLComposeViewController 制作分享按钮

> ID：11849911
> 
> 赞同：0
> 
> 时间：2012-08-07T16:07:17.787
> 
> 标签：ios6, xcode4.5

在新的 xcode4.5 中，我们找到了要在社交网络中共享的新类 SLComposeViewController，我正在阅读类参考，但我仍然不明白如何实现。

因此，如果您有任何想法，那将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T16:30:00.700

对不起，我只是找到方法。这里是：

您需要将 Social.framework 添加到您的项目中。将以下 #import "Social/Social.h" 添加到您的文件中

您可以创建 3 种类型的服务：

```
SLServiceTypeTwitter
SLServiceTypeFacebook
SLServiceTypeSinaWeibo 
```

Facebook 的示例。

```
SLComposeViewController *fbController = 
     [SLComposeViewController 
                 composeViewControllerForServiceType:SLServiceTypeFacebook];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{
    SLComposeViewControllerCompletionHandler __block completionHandler=
    ^(SLComposeViewControllerResult result){

       [fbController dismissViewControllerAnimated:YES completion:nil];

       switch(result){
       case SLComposeViewControllerResultCancelled:
       default:
       {
           NSLog(@"Cancelled.....");

       }
           break;
       case SLComposeViewControllerResultDone:
       {
           NSLog(@"Posted....");
           UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Sent" 
              message:nil
              delegate:nil 
              cancelButtonTitle:@"Dismiss" 
              otherButtonTitles: nil];
           [alert show];
       }
           break;
   }};

   [fbController addImage:[UIImage imageNamed:@"your_image.jpg"]];
   [fbController setInitialText:@"The initial text you want to send"];
   [fbController addURL:[NSURL URLWithString:@"the url you wanna share"]];
   [fbController setCompletionHandler:completionHandler];
   [self presentViewController:fbController animated:YES completion:nil];
} 
```

希望这个对你有帮助。如果您想要其他社交网络，请将 SLServiceTypeFacebook 更改为其他两个中的任何一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T10:08:19.410

I have also face this kinds of problem in my last project and I have found [Sample code for SLComposeViewController](http://yashesh87.wordpress.com/2012/10/01/social-framework-integration-iphone-sdk-ios/) for the same. I think it will helps you.

Thanks

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T17:19:03.770

[您可以在 github 上](https://github.com/michaelkamprath/iPhoneMK/tree/master/TableViewCells/MKSocialShareTableViewCell)找到一个用于实现 iOS 6 社交共享的插入式表格视图单元。免责声明 - 我是作者。

# jquery - jQuery 在 ASP.NET MVC 视图中不起作用

> ID：11849912
> 
> 赞同：0
> 
> 时间：2012-08-07T16:07:19.267
> 
> 标签：jquery, asp.net-mvc

有人可以指出我可能错的地方吗？我的问题是，在我看来，我有一些脚本，而 jQuery 似乎只是以某种方式无法在那里工作（可能是我的错在某处）。

我在我的布局页面中指定了始终加载的 jQuery。然后我的观点看起来像这样

```
@model jakubholovsky.com.Models.BlogPost
@using jakubholovsky.com.DataModels
@using jakubholovsky.com.Enum
@{
    ViewBag.Title = "Jakub Holovsky - Blog - Post - " + Model.Post.title;
}
<h2>
    @Model.Post.title</h2>
<div>
 SOME CODE
</div>
<script type="text/javascript">
    $(document).ready(function () {
        alert("hello");
        $('#addACommentDiv').click(function () {
            alert("hello");
            if ($('#commentFieldset').is(':hidden')) {
                $("#commentFieldset").slideDown("slow");
                $('#addACommentDivButton').html('Close commenting');
            }
            else {
                $("#commentFieldset").slideUp("slow");
                $('#addACommentDivButton').html('Comment on this article');
            }
        });
    });
</script> 
```

我试图在我看来引用 jQuery，但没有运气。我还尝试使用基本的 javascript（只是警报窗口）来检查它是否有效。我还检查了浏览器中是否加载了 jQuery（它是）。

警报（“你好”）；行只是为了查看它是否通过了就绪功能。

这就是我在布局页面中引用它的方式。

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/jquery-1.7.2-vsdoc.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/modernizr-2.5.3.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/google-analytics.js")" type="text/javascript"></script>
</head> 
```

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:27:11.950

我建议使用捆绑功能，以便您可以使用通配符来选择脚本。这将有助于您脚本的未来版本升级。

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-1.*")); 
```

然后在您的布局或 html 某处呈现它

```
 @Scripts.Render("~/bundles/jquery") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:12:57.303

在每个链接的 / 之前，尝试添加“~”波浪号。我也遇到了这个问题。另外，尝试将物理 js 文件（从解决方案资源管理器中）拖到此布局页面上。它将确认您的文件夹结构/路径是否正确。

我要做的最后一件事是使用“../”之类的东西，你使用它的次数取决于它必须上升多少父文件夹。

希望有帮助。

# iphone - iOS AWS SNS 集成

> ID：11849914
> 
> 赞同：0
> 
> 时间：2012-08-07T16:07:24.710
> 
> 标签：iphone, ios, amazon-web-services

我们正在开发 iPhone 中的消息传递应用程序。我们在 Rails 中开发的后端。我们计划在 AWS 中上传后端。

我们的应用程序的功能是；• 当用户向其他用户发送消息（图片、视频）时，我们会将附件保存在 Amazon S3 中，并将条目保存在数据库中。• 后端应向接收者发送通知，并在 iPhone 应用程序中显示收到的通知。• 当用户登录iPhone 应用程序时，其他用户需要知道用户的在线/离线状态。• 在应用程序的联系人视图中，用户需要了解联系人的在线/离线状态（状态管理）

我们计划使用 Amazon SNS 从 AWS 后端向 iPhone 应用程序发送通知。SNS 是否支持状态管理（好友在线/离线状态）？有人可以指出任何 SNS iPhone 应用程序开发的例子吗？

问对不起，如果我问的问题太笼统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:17:41.167

对于您计划进行的预期用途，SNS 和 SQS 都没有必要的要求，它们没有选择器功能，如果存在，可用于根据某些元数据（例如收件人）**过滤**消息或发件人，类似于 Java JMS，有关术语 SELECTOR 的更多信息，请查看[javadoc javax.jms.Message](http://docs.oracle.com/javaee/1.3/api/javax/jms/Message.html)。

此外，还需要一种基于元数据限制用户访问的方法，目前权限仅基于 SNS 和 SQS 单个队列中可用的操作，这还不够精细。

所以我认为理想的解决方案是在 EC2 中实现该服务，以协调所有消息的流和在线状态，使用后端数据库进行长期存储消息存储，以及可选的弹性缓存来为消息和在线提供较低延迟的响应地位。

为了达到更好的可扩展性和减少耦合，还应该考虑使用内部的 SNS 主题来推迟中间缓存和数据库的更新。

还值得记住的是，您可以使用 iPhone 数据库作为服务器上可用消息的本地缓存。

# c# - 如何从 C# 嵌入式资源中获取文件夹名称

> ID：11849917
> 
> 赞同：1
> 
> 时间：2012-08-07T16:07:27.490
> 
> 标签：c#, sorting, embedded-resource

我想以文件系统订购资源的方式订购资源。我不能对名称执行 string.split，因为文件夹由“。”分隔。字符，而不是 '\' 字符。这意味着在文件夹或文件名中有任何句点会破坏排序。

有什么方法可以更改分隔符，或者对嵌入资源的原始位置进行不同的细分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:19:30.773

这将为您提供所有资源的字符串数组。

```
System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceNames(); 
```

# macos - Mac OS 10.7 上的图形多文件对比较

> ID：11849918
> 
> 赞同：47
> 
> 时间：2012-08-07T16:07:33.653
> 
> 标签：macos, svn, diff

是否可以在 Mac OS 上以图形方式查看“svn diff”输出？

大多数图形差异程序每次只允许您查看一个文件。当您使用 svn 并且已经更改了 10 个文件时，这非常不方便。

对于 Linux，我在“ [kompare](http://lukeplant.me.uk/blog/posts/kompare-a-tool-of-beauty/) ”程序中找到了解决方案。我愿意：

```
svn diff > diffOut; kompare diffOut 
```

结果我使用图形程序并立即检查所有文件，就像[图片](https://i.stack.imgur.com/soFmh.jpg)上显示的那样。

**Mac OS 有同样的事情吗？**

PS“融合”程序似乎做同样的事情（或者它没有？），我已经尝试安装它，但出现[错误](https://stackoverflow.com/questions/11892957/meld-on-os-x-10-7-doesnt-work)。因此我认为我无法在 OSx 10.7 下安装它。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-07T16:11:04.383

您可以使用 Apple 的[FileMerge](https://developer.apple.com/technologies/tools/features.html)工具或[Kaleidoscope](http://www.kaleidoscopeapp.com)。这两个都有命令行调用：

*   要打开 FileMerge，从 Xcode 内部安装命令行开发人员工具并使用`opendiff`
*   打开万花筒，从万花筒内部安装其命令行工具并使用`ksdiff`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-19T20:12:24.510

[KDiff](http://kdiff3.sourceforge.net/)是一个开源的、可视化的文本差异程序。您可以在 windows、unix、linux 和 Mac OSX 中使用它。试试看。在 windows 上，它会自动为 svn diff 添加自己。我不使用 Mac OSX，因此不能说那里也有这个功能。

> 比较或合并两个或三个文本输入文件或目录，

以下来自 kdiff3 站点的[图像 url](http://kdiff3.sourceforge.net/doc/dirmergebig.png)显示它比较目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-17T12:35:37.500

[DiffMerge](http://sourcegear.com/diffmerge/)既免费又很棒。还进行3路比较和合并。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T01:41:17.810

1.  Mac OS 有 kompare。它是 KDE SDK 的一部分，可以使用 MacPorts 获得它：

    ```
    sudo port install kdesdk4
    launchctl load -w /Library/LaunchAgents/org.freedesktop.dbus-session.plist
    export PATH="/Applications/MacPorts/KDE4/kompare.app/Contents/MacOS:"$PATH 
    ```

    它有效！

2.  Svn 支持所谓的[外部差异](http://svnbook.red-bean.com/en/1.7/svn.advanced.externaldifftools.html#svn.advanced.externaldifftools.diff.ex-1)。

要使用它，应该创建 svn-wrapper 脚本，该脚本将采用“svn diff”命令返回的参数，并根据所需参数调用不同的参数。

这是参数“svn diff”返回的示例：

```
-u -L code/Class1.h (revision 16518) -L code/Class1.h (working copy) code/.svn/text-base/Class1.h.svn-base code/Class1.h 
```

opendiff 需要最后两个。因此，下一个 bash[脚本](http://code.google.com/p/svntree-bench/source/browse/trunk/contrib/client-side/diff-wrap.sh?r=1)将是合适的：

```
#!/bin/sh

if [ $# -lt 2 ]; then
    echo "usage: $0 [ignored args...] file1 file2" >&2
    exit 1
fi

# The last two arguments passed to this script are the paths to the files
# to diff.
while [ $# -gt 2 ]; do
    shift
done

exec opendiff $* 
```

将此脚本放在 svnwrapper.sh 文件中。使文件可执行：

```
chmod +x svnwrapper.sh 
```

并将其放在某个公共路径中，该路径将添加到 $PATH 变量中。现在你可以调用 svn 使用

```
svn diff --diff-cmd=svnwrapper.sh 
```

或者只是在 ~/.subversion/config 文件中的 [helpers] 部分添加：

```
diff-cmd = svnwrapper.sh 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-15T18:03:13.487

如果您想从比较目录结构和目录中的文件快速切换，[万花筒是一个非常好的选择。](http://www.kaleidoscopeapp.com/)也可以比较多于 2 个副本。我也觉得比较文件的算法（匹配块和颜色代码更改）非常好。最后，您需要支付 15 天的试用期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T21:12:08.140

我不太确定我是否理解正确，但是我在 mac 上使用带有 subclipse 插件的 Eclipse。

[http://www.eclipse.org/downloads/?osType=macosx](http://www.eclipse.org/downloads/?osType=macosx)

确保您阅读该页面以获取正确的版本，并考虑您使用的 svn 版本。

[http://subclipse.tigris.org/servlets/ProjectProcess;jsessionid=1BCECCE84434FF08FDE32136D13FF061?pageID=p4wYuA](http://subclipse.tigris.org/servlets/ProjectProcess;jsessionid=1BCECCE84434FF08FDE32136D13FF061?pageID=p4wYuA)

安装后，您可以选择同步透视图，查看所有冲突且需要更改的文件。

但是，我不确定它是否会让您说 diff 随机文件，我认为这是您的要求。不过你可以试试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-28T20:39:28.413

这是一个很好的文件文件差异工具。P4Merge：[http ://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools](http://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-18T04:34:32.713

Bruno De Fraine 编写了一些脚本，为每个文件启动 OSX 的 FileMerge：http: [//www.defraine.net/~brunod/fmdiff/](http://www.defraine.net/~brunod/fmdiff/)

安装

```
> svn co http://soft.vub.ac.be/svn-gen/bdefrain/fmscripts/ fmscripts
> cd fmscripts
> make
> sudo make install 
```

Diff（为每个文件启动 FileMerge）

```
> svn diff --diff-cmd fmdiff 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-04T01:36:07.597

[Beyond Compare](http://www.scootersoftware.com/)不是免费的，但我已经使用并喜欢它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-28T12:26:36.233

在这里您可以找到最新版本的[Meld for OSX](https://yousseb.github.io/meld/) `.dmg`安装程序。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-11-21T12:19:49.800

[Beyond Compare](http://www.scootersoftware.com/)是您可以添加到列表中的另一个。它是免费且跨平台的（Windows、Mac、Linux）。

# jquery-ui - 带有远程数据源的jquery自动完成不过滤

> ID：11849921
> 
> 赞同：1
> 
> 时间：2012-08-07T16:07:42.280
> 
> 标签：jquery-ui

第一个实现工作正常。第二个提供了一个下拉列表，但在您键入时它不会被过滤。

```
 $( "#tags" ).autocomplete({
        source: availableTags
    });
    $( "#tags1" ).autocomplete({
        source: "http://nwx1/mysql/useractivitytxn/f_UsersList.php"
    }); 
```

...

```
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags">
    <label for="tags1">Tags1: </label>
    <input id="tags1">
    <label for="tags2">Tags2: </label>
    <input id="tags2">
</div> 
```

var availableTags = [“ActionScript”、“AppleScript”、“Asp”、“BASIC”、“C”、“C++”、“Clojure”、“COBOL”、“ColdFusion”、“Erlang”、“Fortran”、“Groovy” ”、“Haskell”、“Java”、“JavaScript”、“Lisp”、“Perl”、“PHP”、“Python”、“Ruby”、“Scala”、“Scheme”]；

Web 服务的返回值：["ActionScript","AppleScript","Asp","BASIC","C","C++","Clojure","COBOL","ColdFusion","Erlang"," Fortran","Groovy","Haskell","Java","JavaScript","Lisp","Perl","PHP","Python","Ruby","Scala","Scheme"]

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
        <script src="http://code.jquery.com/ui/1.8.22/jquery-ui.min.js" type="text/javascript"></script>
        <script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:47:42.467

从[文档](http://jqueryui.com/demos/autocomplete/#remote)：

> 使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。它可以在同一台主机上，也可以在不同的主机上（必须提供 JSONP）。自动完成插件不会过滤结果，而是将请求参数“term”添加到 URL，服务器端脚本应该使用它来过滤结果。

自动完成可以具有以下三种源类型之一：具有本地数据的数组、字符串、指定 URL 或回调。您的第一个示例使用一个数组，而您的第二个示例使用一个字符串，指定一个 URL，因此您需要进行过滤并返回过滤后的结果集。

# jquery - 引导弹出窗口显示在错误的元素中

> ID：11849925
> 
> 赞同：0
> 
> 时间：2012-08-07T16:07:57.190
> 
> 标签：jquery, twitter-bootstrap

我正在尝试单击使用引导弹出窗口。我首先在我的 js onReady 开始时初始化。然后我添加了一个 show 选项，但它把它附加到了错误的 dom 元素上。它应该将它放在包装器元素中。

```
var wrapper = $(".modal .modal-wrapper");
wrapper.popover({trigger:'manual', title:"WORKING TOOLTIP", selector:wrapper}); 
```

然后通过单击按钮调用它。

```
var showTooltip = function( ){
    wrapper.popover('show');
} 
```

问题是弹出框没有显示在包装器 div 中，而是显示在 body 元素中。我怎样才能让它显示在包装元素内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:09:38.783

如果由插件触发，该`selector`属性仅用于委托事件。

首先，如果你设置了这个选择器**[将不会被使用](https://github.com/twitter/bootstrap/blob/ebc69356637143c938c07904d10928c11e742196/js/bootstrap-tooltip.js#L47)**`trigger: 'manual'`。

然后，如果（例如）您拥有`trigger: 'hover'`并且拥有该标记：

```
<div class="megadiv">
    <button class="btn">Hover me</button>
</div> 
```

以下 javascript 将绑定**一个**弹出窗口以显示在任何悬停`.btn`

```
$('.megadiv').popover({
    selector: '.btn',
    content: 'content',
    title: 'title'    
}); 
```

[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/PpQXk/)

这仅适用于`.megadiv`. 请参阅[`jQuery.on`文档](http://api.jquery.com/on/#direct-and-delegated-events)。

> 当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:20:59.320

像这样试试。我认为选择器属性接受一个字符串而不是一个对象

```
wrapper.popover({trigger:'manual', title:"WORKING TOOLTIP", selector: ".modal .modal-wrapper" }); 
```

来自[http://www.w3resource.com/twitter-bootstrap/popover-tutorial.php](http://www.w3resource.com/twitter-bootstrap/popover-tutorial.php)

> 选择器
> 
> 选择器值的类型为字符串，默认值为 false。使用 this 将 Tooltip 对象委托给给定的目标。

# php - 将加载的类分配给当前范围内的变量

> ID：11849929
> 
> 赞同：4
> 
> 时间：2012-08-07T16:08:16.103
> 
> 标签：php

我正在尝试设置一些可以使用的类，但我不确定如何完成以下操作。

假设我有一个正在使用的类“foo”，并且我想使用另一个名为“loader”的类中的函数。这个加载器类的目的是加载我可以在“foo”类中使用的各种其他类。

例子：

```
class foo {
    function foo() {
        $this->load->model();
    }
} 
```

为此，我将首先启动“加载”类：

```
class foo {
    function foo() {
        $this->load = new loader;
        $this->load->model('some_model');
    }
} 
```

现在我可以使用加载器类中的函数了。我想要的下一件事是从类 foo 中访问加载的模型。例子：

```
class foo {
    function foo() {
        $this->load = new loader;
        $this->load->model('some_model');
        $this->some_model->function_from_this_model();
    }
} 
```

这就是我迷路的地方，因为我不确定如何保持在“foo”类的范围内。在任何给定时间，我都希望能够用来`$this->load->model('some_model')`加载一个新模型，该模型可以通过`$this->some_model`. 或者`$this->load->something_else('some_name')`通过`$this->some_name`.

这是一个加载器类示例：

```
class loader {
    function model($model_name) {
        require('models/'.$model_name.'.php');
        $model = new $model_name;
        // and what to do now, to get it back to the $this var from class foo?
    }
} 
```

但是所有这些都只发生在加载器类的范围内。

关于如何做到这一点的任何想法？

**编辑**：
我知道我可以将它直接分配给一个变量，比如`$this->model_name`= `$this->load->model('model_name')`，但这就是我想要避免的。我希望能够使用这个“加载”子类能够在“foo”类的范围内工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:16:07.200

您可以使用 Singleton，它允许您从另一个类初始化您的类对象。

例子：

```
// Loader will access class singleton and set object
class loader {
    function model($model_name, $class) {
        require('models/'.$model_name.'.php');
        $class::init()->$model_name = new $model_name;
    }
}

// see new singleton methods
class foo {

    private static $instance
    public static function init(){
        if(is_null(self::$instance)){
            $class = __CLASS__;
            self::$instance = new $class;
        }

        return self::$instance;
    }

    function foo() {
        $this->load = new loader;
        $this->some_model = $this->load->model('some_model', __CLASS__);
        $this->some_model->function_from_this_model();
    }
}

// init class like this
foo::init()->foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:10:58.990

好的，在您编辑后，我建议您更改您的课程，如下所示：

您的加载程序需要[返回](http://php.net/manual/en/function.return.php)您启动的模型：

```
class loader {
    function static load_model($model_name, $object) {
        require('models/'.$model_name.'.php');
        $class = new $model_name;
        $object->$model_name = $class;
        return $object;
    }
} 
```

现在您可以使用：

```
class foo {

    public function foo($model)
    {
       return loader::load_model($model, $this);
    }
}

$class = new foo();
$class->foo('some_model'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T16:18:12.100

我认为从组合的角度来看，您最好通过方法将加载器类附加到 foo 类。因此，不必在每个类中包含以使其他类可用，您只需将加载器/模型等附加到该类即可。所以是这样的：

```
class foo {
    protected $loader = NULL;
    protected $model = NULL;

    public function __construct() {

    }

    public function attach_loader(loader $loader) {
        $this->loader = $loader;
    }

    public function load_model(model $model) {
        $this->model = $this->loader->load($model);
    }
} 
```

这使您能够将任何加载器（或支持 load() 方法的加载器的后代）附加到类并利用它将任何模型（或后代）加载到您的类中。类本身不需要知道这些类文件的位置，只是它们正在操作的项目必须是某种类型。

# c# - 复选框的 If 语句

> ID：11849930
> 
> 赞同：18
> 
> 时间：2012-08-07T16:08:18.677
> 
> 标签：c#, visual-studio-2008, if-statement, checkbox

我想知道如何编写 if 语句以查看是否选中了一个或另一个复选框。

我有两个复选框。我希望它检查复选框 1 是否被选中并且复选框 2 是否为空，然后调用此函数，如果复选框 2 被选中并且复选框 1 为空，则调用另一个函数。

IF 语句非常糟糕，并且不确定如何将复选框转换为可读值。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-07T16:11:22.173

我假设您的意思是未检查。我手边没有 C# 编译器，但是：

```
if (checkbox1.Checked && !checkbox2.Checked)
{

}
else if (!checkbox1.Checked && checkbox2.Checked)
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T16:12:54.333

您将`checkbox1.checked`在 if 语句中使用该属性，这取决于是否检查天气返回 true 或 false。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T16:20:19.530

我对 Science_Fiction 的回答进行了简化，我认为是使用独占或功能，这样您就可以拥有：

```
if(checkbox1.checked ^ checkbox2.checked)
{
//do stuff
} 
```

那是假设你想对这两种情况做同样的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T16:17:58.630

在 VB.Net

```
If Check1.checked and Not (Check2.checked) Then

ElseIf Check2.Checked and not Check1.Checked then

End If 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-08T15:15:07.927

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    if (checkBoxImage.Checked)
    {
        groupBoxImage.Show();
    }
    else if (!checkBoxImage.Checked)
    {
        groupBoxImage.Hide(); 
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-07-31T06:31:32.633

我建议

```
if (checkbox.IsChecked == true)
{
    //do something
} 
```

希望对你有帮助^^

# ruby-on-rails - Rails ActiveRecord - 如何设置关联保存顺序

> ID：11849931
> 
> 赞同：2
> 
> 时间：2012-08-07T16:08:23.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个奇怪的关系，需要为遗留流程维护。

我试图弄清楚如何在给定新模型关联的情况下创建关系。

新关系设置

```
Machine
  has_many MachineReadings
  has_many Disks
    has_many DiskReadings 
```

旧关系设置

```
Machine
  has_many MachineReadings
    has_many DiskReadings
  has_many Disks 
```

问题是数据将作为嵌套属性使用新的关系设置进入机器模型。我需要更新 DiskReading 模型中的 machine_reading_id 以便可以继续使用旧的关联。

我尝试通过 after_save 钩子执行此操作，该钩子将遍历回机器，然后向下遍历读数以获取 machine_reading.id，以便我可以填充 DiskReading 模型。但是，关联并没有按照我期望的顺序保存。他们在保存 MachineReadings 之前保存了 Disks & DiskReadings。因此，当我查找 machine_reading.id 时，它还没有被写入，因此我无法访问它。

例如：

```
#machine_disk_reading.rb
after_save :build_old_relationship

def build_old_relationship
  self.machine_reading_id = self.disk.machine.readings.find_by_date_time(self.date_time).id
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:57:23.453

没有办法做到这一点。必须手动完成。

# javascript - 是否可以使用`position：relative`模拟元素的`position：absolute`放置？

> ID：11849932
> 
> 赞同：1
> 
> 时间：2012-08-07T16:08:30.143
> 
> 标签：javascript, html, css, positioning

我必须开发一个生成表格（有点……）的软件，它必须提供对元素位置的完全控制。

到目前为止，我们有这样的构造：

```
<div id="container" style="display: table-row">
  <div id="a" style="position: absolute"></div>
  <div id="b" style="position: absolute"></div>
  <div id="c" style="position: absolute"></div>
</div> 
```

还有一些 javascript 代码将`#a`,`#b`和`#c`元素放在`#container`using`left`和`top`style 指令中。

这样，元素甚至可以“反转”，即：`#b`可能是左侧的第一个元素和`#a`最后一个元素，具体取决于其他规则。

但是，这会失败，因为它们已从流中取出，因此`#container`具有空高度。很公平。

用这种方式解决这个问题似乎[是不可能的](https://stackoverflow.com/questions/5810382/min-height-with-child-set-to-positionabsolute)，所以我想用`position: relative`for 子元素，但是这样做，`left`and `top`style 指令现在引用了初始元素的位置，不再可用......

你有没有遇到过类似的情况？我能做些什么来实现所需的行为？

非常感谢你。

PS：对于那些想知道为什么我们不使用`<table>`元素来表示表格的人，可以说我也想知道，但对那个决定没有权力......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:18:43.790

有两件事浮现在脑海中——既老套又可能不是超级可扩展的：

1)`position: absolute`不要在 CSS 中添加，而是在 JS 中添加 - 但在此之前，将容器修复为其预先绝对的偏移尺寸，这样高度就不会丢失

```
var container = $('#container');
container.height(container.height()).children().css('position', 'absolute'); 
```

2) 使用`position: relative`，但将它们的新位置设置为相对于它们的原始位置减去它们的偏移量。

```
var el = $('#some_el');
el.css({top: 0 - el.position().top}); 
```

# python - 如何使用 python 重命名 zip 存档中的文件？

> ID：11849935
> 
> 赞同：1
> 
> 时间：2012-08-07T16:08:47.463
> 
> 标签：python, zip

> **可能重复：**
> [使用 zipmodule 重命名 zip 文件夹中的文件](https://stackoverflow.com/questions/7428318/rename-files-in-zip-folder-using-zipmodule)

我正在处理一个包含多个文件的 zip 存档。我正在检索 zip 中包含的文件的名称列表，我想要实现的是根据我的条件重命名一些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:39:19.827

您可以对解压缩的存档执行的唯一操作是只读操作；您无法编辑 zip 文件中任何内容的内容。

# bash - 从当前日期减去时间 [ bash - HP-UX ]

> ID：11849936
> 
> 赞同：0
> 
> 时间：2012-08-07T16:08:50.720
> 
> 标签：bash, hp-ux

我想知道如何从当前系统日期中减去 X 分钟。我确实知道如何减少小时数，但我需要一个更灵活的解决方案。

```
NEWDATE=`TZ=GMT-1 date +%y%m%d%H%M.%S` 
echo $NEWDATE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:12:11.017

```
# date
Tue Aug  7 17:11:01 BST 2012

# date -d "-10 minutes"
Tue Aug  7 17:01:01 BST 2012

# date -d "-10 minutes +30 seconds"
Tue Aug  7 17:01:31 BST 2012 
```

但根据手册页，`-d`在 HP-UX 上不可用。试试这个：

```
perl -e 'use POSIX;print strftime "%Y%m%d %H%M.%S\n",localtime time-(30*60);' 
```

# c# - 数据库中的值未更新

> ID：11849940
> 
> 赞同：0
> 
> 时间：2012-08-07T16:09:10.827
> 
> 标签：c#, sql-server

我有注册表单，然后我根据用户 ID 在第一页插入必填字段我在下面的第二页中更新一些详细信息是我的代码

```
ALTER procedure [dbo].[Insertreg]

( @id int output,@FirstName varchar (50),@LastName varchar(50) ,@Dob datetime,
        @Gender varchar(20) ,@MobileNo nchar(10) ,@Country varchar(50) ,
    @State varchar (50),@EmailId varchar (50),@Password nchar (15)

)
as
begin
insert into Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password)
 values
(@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password)
set @id=SCOPE_IDENTITY()
end

    ALTER procedure [dbo].[sp_update]

(@id int output,@FormFiledBy varchar (50),@MaritalStatus varchar (50),@Height varchar (50),
@Religion varchar (50),@Caste varchar (100),
 @MotherTongue varchar(50),@Education varchar (100),@Occupation varchar(50),
 @CountryofResidence varchar (50),@EducationDetails varchar (100),@AnnualIncome varchar(50),
@CountryOfBirth varchar(50),@BirthPlace varchar(50),@TimeOfBirth nchar(10),@StarSign varchar (100),
@Gothram varchar (50),@Rassi varchar(50),@HavinChildren varchar(10),@PhysicalStatus varchar (100))

as
begin

update Profile_Master
 set FormFiledBy=@FormFiledBy,MaritalStatus=@MaritalStatus,Height=@Height,
Religion=@Religion,Caste=@Caste,MotherTongue=@MotherTongue,
Education=@Education,Occupation=@Occupation,CountryofResidence=@CountryofResidence,EducationDetails=@EducationDetails,
AnnualIncome=@AnnualIncome,CountryOfBirth=@CountryOfBirth,BirthPlace=@BirthPlace,TimeOfBirth=@TimeOfBirth,
StarSign=@StarSign,Gothram=@Gothram,Rassi=@Rassi,HavinChildren=@HavinChildren,PhysicalStatus=@PhysicalStatus

where UserId=@id
end

protected void Button1_Click(object sender, EventArgs e)
    {
        // Get User ID from DAL
        int chk = 0;
        if (Session["EmailID"] != null)
        {
            emailID = Session["EmailID"].ToString();
        }
        ProfileMasterBLL prfbll =new ProfileMasterBLL();
        prfbll.EmailID = emailID;
        string userid = ProfileMasterDAL.GetUserIdByEmailID(emailID);

        // Capture remaining parameters
        if (userid != null)
        {

            prfbll.FormFiledBy = RadioButtonList1.SelectedItem.Text;
            prfbll.MaritalStatus = RadioButtonList2.SelectedItem.Text;
            prfbll.Height = DropDownList1.SelectedItem.Text;
            prfbll.PhysicalStatus = RadioButtonList4.SelectedItem.Text;
            prfbll.Religion = DropDownList2.SelectedItem.Text;
            prfbll.Caste = DropDownList3.SelectedItem.Text;
            prfbll.MotherTongue = DropDownList4.SelectedItem.Text;
            prfbll.Education = DropDownList5.SelectedItem.Text;
            prfbll.Occupation = DropDownList6.SelectedItem.Text;
            prfbll.CountryofResidence = DropDownList8.SelectedItem.Text;
            prfbll.EducationDetails = TextBox3.Text;
            prfbll.AnnualIncome = DropDownList7.SelectedItem.Text;
            prfbll.CountryOfBirth = DropDownList9.SelectedItem.Text;
            prfbll.BirthPlace = TextBox6.Text;
            prfbll.TimeOfBirth = TextBox7.Text;
            prfbll.StarSign = DropDownList10.SelectedItem.Text;
            prfbll.Gothram = TextBox8.Text;
            prfbll.Rassi = DropDownList12.Text;

            if (RadioButtonList2.SelectedItem.Text != "Single")
            {
                prfbll.HavinChildren = RadioButtonList7.SelectedItem.Text;
            }
            else
                {
                    RadioButtonList7.SelectedItem.Text = null;
                }
            }

            try
            {
                chk = ProfileMasterDAL.update(prfbll);
                if (chk >= 0)
                {
                    Response.Write("<script language='javascript'>alert('details updated');</script>");
                }
            }
            catch (Exception ex)
            {

                throw ex;
            }
        }
    }

public static int update(ProfileMasterBLL profileMasterBLL)
    {
        SqlParameter uid;
        SqlConnection conn = Generic.DBConnection.OpenConnection();
        try
        {
            SqlCommand cmdd = new SqlCommand("sp_update", conn);
            cmdd.CommandType = CommandType.StoredProcedure;
            cmdd.Parameters.AddWithValue("@FormFiledBy", profileMasterBLL.FormFiledBy);
            cmdd.Parameters.AddWithValue("@MaritalStatus", profileMasterBLL.MaritalStatus);
            cmdd.Parameters.AddWithValue("@Height", profileMasterBLL.Height);
            cmdd.Parameters.AddWithValue("@Religion", profileMasterBLL.Religion);
            cmdd.Parameters.AddWithValue("@Caste", profileMasterBLL.Caste);
            cmdd.Parameters.AddWithValue("@Education", profileMasterBLL.Education);
            cmdd.Parameters.AddWithValue("@Occupation", profileMasterBLL.Occupation);
            cmdd.Parameters.AddWithValue("@CountryofResidence", profileMasterBLL.CountryofResidence);
            cmdd.Parameters.AddWithValue("@EducationDetails", profileMasterBLL.EducationDetails);
            cmdd.Parameters.AddWithValue("@CountryOfBirth", profileMasterBLL.CountryOfBirth);
            cmdd.Parameters.AddWithValue("@BirthPlace", profileMasterBLL.BirthPlace);
            cmdd.Parameters.AddWithValue("@TimeOfBirth", profileMasterBLL.TimeOfBirth);
            cmdd.Parameters.AddWithValue("@StarSign", profileMasterBLL.StarSign);
            cmdd.Parameters.AddWithValue("@Gothram", profileMasterBLL.Gothram);
            cmdd.Parameters.AddWithValue("@Rassi", profileMasterBLL.Rassi);
            cmdd.Parameters.AddWithValue("@HavinChildren", profileMasterBLL.HavinChildren);
            cmdd.Parameters.AddWithValue("@PhysicalStatus", profileMasterBLL.PhysicalStatus);
            cmdd.Parameters.AddWithValue("@MotherTongue", profileMasterBLL.MotherTongue);
            cmdd.Parameters.AddWithValue("@AnnualIncome", profileMasterBLL.AnnualIncome);
            uid = cmdd.Parameters.Add("@id", System.Data.SqlDbType.Int);
            uid.Direction = System.Data.ParameterDirection.Output;
            return cmdd.ExecuteNonQuery();

        }
        catch (Exception ex)
        {

            throw ex;
        }

    } 
```

但问题是数据库中的值没有更新，谁能告诉我出了什么问题？

```
public static int Insert(ProfileMasterBLL profileMasterBLL)
    {
        // bool flag = false;
        SqlParameter pid;
        SqlConnection con = Generic.DBConnection.OpenConnection();

        try
        {

            SqlCommand cmd1 = new SqlCommand("Insertreg", con);
            cmd1.CommandType = CommandType.StoredProcedure;
            cmd1.Parameters.AddWithValue("@FirstName", profileMasterBLL.FirstName);
            cmd1.Parameters.AddWithValue("@LastName", profileMasterBLL.LastName);
            cmd1.Parameters.AddWithValue("@Dob", profileMasterBLL.Dob);
            cmd1.Parameters.AddWithValue("@Gender", profileMasterBLL.Gender);
            cmd1.Parameters.AddWithValue("@MobileNo", profileMasterBLL.MobileNo);
            cmd1.Parameters.AddWithValue("@Country", profileMasterBLL.Country);
            cmd1.Parameters.AddWithValue("@State", profileMasterBLL.State);
            cmd1.Parameters.AddWithValue("@EmailId", profileMasterBLL.EmailID);
            cmd1.Parameters.AddWithValue("@Password", profileMasterBLL.Password);
           pid = cmd1.Parameters.Add("@id", System.Data.SqlDbType.Int);
            pid.Direction = System.Data.ParameterDirection.Output;
            return cmd1.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:28:30.467

1.  从更新 sp 的 @id 参数中删除输出参数
2.  在 c# 的更新方法中设置 @id 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:34:51.297

您的更新程序预计会更新

```
where UserId=@id 
```

但你没有传入一个ID。

如果这堂课

```
ProfileMasterBLL 
```

有一个用户 ID，您可以在更新其余字段时分配它

```
 if (userid != null)
        {
            prfbll.UserId = userid; //Or whatever it's called
            prfbll.FormFiledBy = RadioButtonList1.SelectedItem.Text; 
```

如果不是，您需要更新签名

```
public static int update(ProfileMasterBLL profileMasterBLL, string userId) 
```

然后也传递用户ID。

这将需要更改参数和存储过程。

SP 不应采用 OUT 参数（因此不应以这种方式传递。

```
 ALTER procedure [dbo].[sp_update]

(@id int ,@FormFiledBy varchar (50),@MaritalStatus varchar (50),@Height varchar (50),
@Religion varchar (50),@Caste varchar (100),
 @MotherTongue varchar(50),@Education varchar (100),@Occupation varchar(50),
 @CountryofResidence varchar (50),@EducationDetails varchar (100),@AnnualIncome varchar(50),
@CountryOfBirth varchar(50),@BirthPlace varchar(50),@TimeOfBirth nchar(10),@StarSign varchar (100),
@Gothram varchar (50),@Rassi varchar(50),@HavinChildren varchar(10),@PhysicalStatus varchar (100))

as
begin

update Profile_Master
 set FormFiledBy=@FormFiledBy,MaritalStatus=@MaritalStatus,Height=@Height,
Religion=@Religion,Caste=@Caste,MotherTongue=@MotherTongue,
Education=@Education,Occupation=@Occupation,CountryofResidence=@CountryofResidence,EducationDetails=@EducationDetails,
AnnualIncome=@AnnualIncome,CountryOfBirth=@CountryOfBirth,BirthPlace=@BirthPlace,TimeOfBirth=@TimeOfBirth,
StarSign=@StarSign,Gothram=@Gothram,Rassi=@Rassi,HavinChildren=@HavinChildren,PhysicalStatus=@PhysicalStatus

where UserId=@id
end 
```

并且应该添加参数

```
 SqlParameter uid;
    SqlConnection conn = Generic.DBConnection.OpenConnection();
    try
    {
        SqlCommand cmdd = new SqlCommand("sp_update", conn);
        cmdd.CommandType = CommandType.StoredProcedure;
        cmdd.Parameters.AddWithValue("@Id", userId ); //Or profileMasterBLL.UserId or whatever
        cmdd.Parameters.AddWithValue("@FormFiledBy", profileMasterBLL.FormFiledBy);
        cmdd.Parameters.AddWithValue("@MaritalStatus", profileMasterBLL.MaritalStatus);
        cmdd.Parameters.AddWithValue("@Height", profileMasterBLL.Height);
        cmdd.Parameters.AddWithValue("@Religion", profileMasterBLL.Religion);
        cmdd.Parameters.AddWithValue("@Caste", profileMasterBLL.Caste);
        cmdd.Parameters.AddWithValue("@Education", profileMasterBLL.Education);
        cmdd.Parameters.AddWithValue("@Occupation", profileMasterBLL.Occupation);
        cmdd.Parameters.AddWithValue("@CountryofResidence", profileMasterBLL.CountryofResidence);
        cmdd.Parameters.AddWithValue("@EducationDetails", profileMasterBLL.EducationDetails);
        cmdd.Parameters.AddWithValue("@CountryOfBirth", profileMasterBLL.CountryOfBirth);
        cmdd.Parameters.AddWithValue("@BirthPlace", profileMasterBLL.BirthPlace);
        cmdd.Parameters.AddWithValue("@TimeOfBirth", profileMasterBLL.TimeOfBirth);
        cmdd.Parameters.AddWithValue("@StarSign", profileMasterBLL.StarSign);
        cmdd.Parameters.AddWithValue("@Gothram", profileMasterBLL.Gothram);
        cmdd.Parameters.AddWithValue("@Rassi", profileMasterBLL.Rassi);
        cmdd.Parameters.AddWithValue("@HavinChildren", profileMasterBLL.HavinChildren);
        cmdd.Parameters.AddWithValue("@PhysicalStatus", profileMasterBLL.PhysicalStatus);
        cmdd.Parameters.AddWithValue("@MotherTongue", profileMasterBLL.MotherTongue);
        cmdd.Parameters.AddWithValue("@AnnualIncome", profileMasterBLL.AnnualIncome); 
```

还要删除这些 uid = cmdd.Parameters.Add("@id", System.Data.SqlDbType.Int); uid.Direction = System.Data.ParameterDirection.Output；返回 cmdd.ExecuteNonQuery();

# java - 覆盖Java中的默认构造函数

> ID：11849942
> 
> 赞同：3
> 
> 时间：2012-08-07T16:09:21.307
> 
> 标签：java, constructor, initialization

很简单的问题，但无论如何：有什么理由像这样覆盖默认构造函数：

```
public SomeObject(){
} 
```

它是公开的。它没有任何逻辑。那么，有必要吗？我没看到全图？

感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T16:12:13.557

定义*一个空的*无参数构造函数的一个原因是如果还有*一个*非默认构造函数并且仍然希望无参数构造函数是可访问的（公共的或受保护的）。

这是因为任何 [other] 构造函数定义[都会阻止自动添加](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)默认的无参数构造函数：

> 编译器会自动为任何没有构造函数的类提供 [public] 无参数的默认构造函数。

（也请参阅该链接中的下一点，其中讨论了将被调用的默认超级构造函数。）

即使从不手动使用无参数构造函数，它对于其他事情也很重要，例如[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)：

> 在反序列化期间，不可序列化类的字段将使用类的公共或受保护的无参数构造函数进行初始化。*可序列化的子类必须可以访问无参数构造函数。*可序列化子类的字段将从流中恢复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T16:13:24.097

唯一的原因可能是，有时您可能有带参数的构造函数，并且您希望允许在不传递参数的情况下创建对象（通过调用默认构造函数）。

当您定义了构造函数时，没有 arg 构造函数将不可用，因此您必须将其显式添加到您的类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T16:12:05.737

除非您有任何初始化逻辑，否则无需覆盖默认构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T16:29:18.130

确切的原因是，如果你不这样做，你会在扩展类时遇到问题

```
class A{
    int a;
    public A(int a){
        this.a=a;
    }
    // public A()
    //{
        // here super(); will be called again, calling Object class's constructor thus initializing any uninitialized variables
    //}
}

class B extends A{
    int b;
    public B(int b){
        // here automatically, "super();" will be executed. if it is not present, error!
        this.b=b;
    }
} 
```

通过[这个](http://ideone.com/5vw1u)和[这个](http://ideone.com/7wREv)来理解我想说的。

编辑：一些答案实际上是错误的，因为如您所见，在扩展类时定义父无参数构造函数是强制性的，除非您将使用 args 显式调用重载的超级构造函数。

# firefox - 同源策略如何应用于浏览器扩展？

> ID：11849945
> 
> 赞同：8
> 
> 时间：2012-08-07T16:09:35.293
> 
> 标签：firefox, google-chrome, google-chrome-extension, firefox-addon, same-origin-policy

给定浏览器扩展程序将信息从一个网页发送到完全不同的服务器，这是否违反了同源策略？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T16:49:54.900

同源策略 (SOP) 适用于普通网页，而不是浏览器扩展，即使它们是用 JavaScript 编写的。当扩展代码不是来自服务器时，“不同的服务器”是什么意思？（扩展脚本可能有某种来源，例如`chrome-extension://longhashidentificationstr`，但不是传统的域/来源。）要与*任何*网页通信（具有[CORS 标头](http://www.html5rocks.com/en/tutorials/cors/)的网页除外），扩展不能被 SOP 绑定。

扩展并不完全“违反” SOP；相反，SOP*不适*用于他们。SOP 旨在限制可能由受损或恶意网页造成的损害。查看网页应该要求对页面的*信任为零*，因为访问网页非常容易。但是，安装扩展是用户不经常做的事情，对用户的影响更大，因此要求对扩展有一定的信任并不是没有道理的。

# android - 设置新的 Facebook 应用程序

> ID：11849951
> 
> 赞同：1
> 
> 时间：2012-08-07T16:10:01.093
> 
> 标签：android, facebook

在设置 Facebook SDK 时。您需要获取 KeyHash。我输入了以下代码来获取 keyhash

```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

并得到下面屏幕截图中显示的错误。我使用windows7 64位。 ![在此处输入图像描述](../Images/3599125036cb57c6c5d9b1c8c54093a4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:16:53.560

从外观上看，windows dos 命令提示符没有标准的 keytool 命令。我在我的 linux 终端中输入了这个命令，它找到了命令，所以我建议要么下载并安装相当于 keytool 的 windows，要么看看 windows 是否有支持这些功能的本机方法。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:58:39.050

如果您在 Windows 中运行它，首先，cd 到程序 files\java 中的 (java) jdk 1.6/1.7 文件夹，然后 cd bin 第二，如果您收到无法解析路径的消息，请键入密钥库文件的完整路径

# java - java数组返回最小值

> ID：11849953
> 
> 赞同：0
> 
> 时间：2012-08-07T16:10:06.553
> 
> 标签：java

嗨，我写这个数组是为了读入 30 个整数并读出最小值和最大值。我已经解决了最大值但最小值不起作用，感谢所有帮助，如前所述，我已经解决了最大值，但最小值不起作用

```
import java.io.*;
import java.util.*;

public class Uppgift1
{
public static void main(String args[])throws IOException
{
BufferedReader stdin = new BufferedReader
        (new InputStreamReader (System.in));

        int antal = 0; 
        int summa = 0;
        double medel = 0;
        int min;
        int max = 0;
                System.out.print("Hur manga tal vill du mata in(max 30)? ");
                antal = Integer.parseInt(stdin.readLine());

        int [] array = new int[antal];

        for(int i = 0; i<antal; i++){
        array[i] = Integer.parseInt(stdin.readLine());
        summa = summa +array[i];
        medel = summa / antal; 

        }
                System.out.println("summan av talen är "+summa);
                System.out.println("medel av alla tal är "+medel);

        for (int i = 0; i < antal; i++) 
      {
        while(array[i]>max)
            { 
        max=array[i];
          }
            } 

            System.out.println("max numret är " + max);

        for (int i = 0; i < antal; i++) 
            {
                while(array[i]<min)
                    { 
                        min=array[i];
                    }
            } 

            System.out.println("min numret är " + min);

}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T16:12:14.337

`min`从零开始，因此它的比较值低于用户输入的任何正数。

一般来说，在进入循环之前，您会从最小高点和最大低点开始。这会从可用范围中牺牲两个数字，这通常是可以的。或者，您可以将`min`和设置`max`为序列的初始元素。

另一个问题是您使用 of`while`而不是`if`：它不会损害结果，但确实会严重损害可读性。

最后，您可以在同一循环中同时搜索 the`min`和 the 。`max`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:17:45.517

这样做是为了计算最小值和最大值假设你有一个叫做数字的数组。初始化变量 min,max 如下所示

```
int min = numbers[0];
int max = numbers[0];

for(int i=1; i< numbers.length(); i++) {
  if(min>numbers[i]) {
     min = numbers[i];
  }
  if(max<numbers[i]) {
    max = numbers[i];
  }
}

System.out.println("Max Is : " + max);
System.out.println("Min Is : " + min); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:12:56.410

`min`用可能的最大整数 ( )初始化变量`Integer.MAX_VALUE`。将找到任何小于此的数字。

`max`用可能的最小整数 ( )初始化变量`Integer.MIN_VALUE`。将找到任何大于此的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:14:52.380

```
max= 0;
min=0;
for (int i = 0; i < antal; i++)  {
    max = Math.max(max, array[i]);
    min = Math.min (min, array[i]);
} 
```

# iis - 如何在 Azure 中启用 cs-host IIS 日志记录？

> ID：11849955
> 
> 赞同：1
> 
> 时间：2012-08-07T16:10:15.663
> 
> 标签：iis, logging, azure, umbraco, webrole

我有一个托管多个 Umbraco 网站的 Azure webrole。

我想从 IIS 启用“cs-host”日志记录，如何在服务定义中为此编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:35:06.840

这在 ServiceDefinition.csdef 中是不可能的。您需要从 WebRole.cs 执行此操作或使用启动任务。

*   在这里查看我的答案：[Umbraco 网站和 IIS 日志记录](https://stackoverflow.com/questions/11847282/umbraco-websites-and-iis-logging)
*   这篇博文还介绍了如何使用启动任务来完成它：http: [//joelfillmore.com/changed-iis-logging-fields-in-windows-azure/](http://joelfillmore.com/changing-iis-logging-fields-in-windows-azure/)

# c# - WCF 文件错误

> ID：11849956
> 
> 赞同：0
> 
> 时间：2012-08-07T16:10:19.270
> 
> 标签：c#, wcf

我有一个简单的 WCF 应用程序。在文件 IService.cs 中：

```
namespace WcfService1
{
   [ServiceContract]
   public interface IService
   {
       [OperationContract]
       List<ActiveSP> GetActiveSP();
   }

  [DataContract]
  public class ActiveSP
  {
     [DataMember]
     public string DESCR { get; set; }
  }
} 
```

在文件 Service.svc.cs 中：

```
namespace WcfService1
{
   public class Service : IService
   {
      SqlConnection Conn;
      SqlCommand Cmd;
      public Service()
      {
         Conn = new SqlConnection("Data Source=myweb;Initial Catalog=PeopleSoft;Integrated Security=True;");
      }

     public List<ActiveSP> GetActiveSP()
     {
        Conn.Open();
        Cmd = new SqlCommand();
        Cmd.Connection = Conn;
        Cmd.CommandText = "Select DESCR from myTable"; // return column (varchar type) 
        SqlDataReader Reader = Cmd.ExecuteReader();
        List<ActiveSP> 1stSP = new List<ActiveSP>(); // wrong here
        while (Reader.Read())
        {
            // blah
         }
      }
   }
 } 
```

错误请看图： ![错误](../Images/8340b1902f662e31a6124688072ce683.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:13:44.293

您不能调用变量**1stSP**，变量名称中的第一个字符必须是字母或下划线，而不是数字。

[这是有关有效标识符的更多信息](http://blog.visualt4.com/2009/02/creating-valid-c-identifiers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:14:19.980

您不能以数字开头的变量名称。这就是扔掉它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:15:03.413

将 1spSP 重命名为 firstSP 或类似的名称 :) 标识符不能以数字开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T16:16:31.747

你不能在 C# 中以数字开头变量名，我很确定。

# visual-studio - CToolBar 是停靠还是浮动？

> ID：11849958
> 
> 赞同：1
> 
> 时间：2012-08-07T16:10:33.990
> 
> 标签：visual-studio, visual-studio-2008, mfc, dock, docking

MFC 中是否有任何方法可以找出“CToolBar 是停靠还是浮动？”。在我的程序中，我需要确切地知道它。

我不想使用这样的代码：

```
void MyCToolBAR:: ...
{
   RECT rc; 
   GetClientRect(&rc);
} 
```

例如。如果吧，我们会得到

(0,0) - 左上角，

(x,y) - 数据。

这意味着：酒吧可能已停靠。

感谢您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:26:48.257

尝试调用`GetBarStyle()`并检查`CBRS_FLOATING`标志。其他可以设置的标志显示在帮助文件中`CToolBar::Create()`。

# java - 以下使用 FutureTask 类的生产者消费者代码有什么问题？

> ID：11849962
> 
> 赞同：-1
> 
> 时间：2012-08-07T16:10:44.233
> 
> 标签：java, multithreading, producer-consumer

是的，这是关于 Java 生产者/消费者的另一个问题。

我的变体是我有 N 个由该`produceDataRows`方法启动的生产者和 M 个由该`consumeDataRows`方法启动的消费者。两种方法都启动自己的`ThreadPoolExecutor`类实例，提交各自数量的生产者/消费者任务，然后等待它们的执行者完成。

所以，这是我的代码：

```
final BlockingQueue<Row> allRows = new LinkedBlockingQueue<Row>();
ExecutorService exec = Executors.newFixedThreadPool(2);
FutureTask<Object> producer = new FutureTask<Object>(new Callable<Object>() {
  @Override
  public Object call() throws Exception {
    produceDataRows(allRows);
    return null;
  }
});
FutureTask<Object> consumer = new FutureTask<Object>(new Callable<Object>() {
  @Override
  public Object call() throws Exception {
    consumeDataRows(allRows);
    return null;
  }
});
exec.execute(producer);
exec.execute(consumer);
producer.get();
consumer.get(); 
```

问题是`consumer.get()`返回，但从`consumeDataRows`未被调用。,`produceDataRows`另一方面被称为。

我错过了什么？

谢谢。

**编辑 1**

根据Gray的回复，我将代码改写如下：

```
ExecutorService exec = Executors.newFixedThreadPool(2);
Callable<Object> producer = new Callable<Object>() {
  @Override
  public Object call() throws Exception {
    produceDataRows(allRows);
    return null;
  }
};
Callable<Object> consumer = new Callable<Object>() {
  @Override
  public Object call() throws Exception {
    consumeDataRows(allRows);
    return null;
  }
};
exec.submit(producer);
exec.submit(consumer);
exec.shutdown();
exec.awaitTermination(10, TimeUnit.DAYS); 
```

同样的效果 - 代码终止，但从`consumeDataRows`未被调用。我在这里有三个不同的 ThreadPoolExecutor 实例 - 一个 in `produceDataRows`，一个 in`consumeDataRows`和最后一个。

谢谢。

**编辑 2**

我的`produceDataRows`方法有问题，因为如果我将其注释掉，那么执行会访问`call`两个可调用对象的方法。现在想弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:14:43.410

**编辑：**

我认为您在这里有比赛条件。由于生产者和消费者都在同时运行*，*我敢打赌消费者去看看有什么行并且什么都`allRows`没有，因为生产者还没有做任何事情。

您将需要提前运行生产者或让消费者使用`allRows.poll(long timeout, TimeUnit unit)`来等待生产者的结果。也许生产者可以在`volatile boolean producedAll = true`它产生所有行并完成后设置 a ，并让消费者循环`.poll(...)`等待 为`producedAll`真。

* * *

你的课程有点混乱。你应该调用`exec.submit(...)`你的`Callable` *不*实例化和执行一个`FutureTask`. `submit(...)`然后返回一个`Future`你可以调用`get()`的。

你现在正在做的是实例化你自己的`FutureTask`，这是由内部完成的`ExecutorService`——从不是由调用者完成的。然后，当您调用`get()`您的`FutureTask`时，它只是立即返回，而不做任何加入或任何事情。它（不幸的是）有效，因为`FutureTask`它是一个`Runnable`.

您的代码应该执行以下操作：

```
Future<Object> producer = exec.submit(new Callable<Object>() {
    @Override
    public Object call() throws Exception {
       produceDataRows(allRows);
       return null;
    }
});
Future<Object> consumer = exec.submit(new Callable<Object>() {
    ...
});
producer.get();
consumer.get(); 
```

顺便说一句，`Callable<Void>`如果我不关心 a 的回报，通常我会使用，`Callable`因为我只想要`Exception`. 我仍然返回`null`，但当`Void`你想要一个无值对象时很有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T16:33:18.107

看来您是从一个`main`方法内部运行它，而`thread`在其他两个线程完成工作之前，运行 main 的方法就死了。

我会建议`joining`你的线程给其他线程，以便主线程等待其他线程完成。

# ios - 设置 AudioUnit Reverb 的参数？

> ID：11849965
> 
> 赞同：4
> 
> 时间：2012-08-07T16:10:57.333
> 
> 标签：ios, core-audio, audiounit

我在音频单元图中有一个音频单元混响，它可以很好地处理音频数据（扬声器中的混响很好）。但是我在设置效果参数时遇到了麻烦。我可以设置的唯一参数是 DryWet 设置。其他修改失败。

所以以下工作：

```
AudioUnitSetParameter(reverbUnit,kAudioUnitScope_Global,0,kReverb2Param_DryWetMix,50,0); 
```

但不是这些：

```
AudioUnitSetParameter(reverbUnit,kAudioUnitScope_Global,0,kReverb2Param_DecayTimeAt0Hz,4.0,0);          AudioUnitSetParameter(reverbUnit,kAudioUnitScope_Global,0,kReverb2Param_DecayTimeAtNyquist,4.0,0);
AudioUnitSetParameter(reverbUnit,kAudioUnitScope_Global,0,kReverb2Param_Gain,3.0,0);
AudioUnitSetParameter(reverbUnit,kAudioUnitScope_Global,0,kReverbParam_FilterBandwidth,3.0,0);
AudioUnitSetParameter(reverbUnit,kAudioUnitScope_Global,0,kReverbParam_FilterGain,3.0f,0); 
```

我看过一篇帖子（[Core Audio (iOS 5.1) Reverb2 properties do not exist, error code -10877](https://stackoverflow.com/questions/11362709/core-audio-ios-5-1-reverb2-properties-do-not-exist-error-code-10877)）提到了同样的问题，但无法找到解决方案。

有什么帮助吗？非常感谢。

安德烈

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T22:03:28.103

是的，起初这让我很困惑。第二个参数是参数的id，第三个是范围。所以：

```
AudioUnitSetParameter(reverbUnit,kReverb2Param_DecayTimeAt0Hz,kAudioUnitScope_Global,0,4.0,0); 
```

# multithreading - ASP.NET 网站中出现意外的第二个 AppDomain

> ID：11849968
> 
> 赞同：2
> 
> 时间：2012-08-07T16:11:04.520
> 
> 标签：multithreading, iis, web-applications, threadpool, appdomain

我的一个类有静态构造函数，将新的 GUID 分配给静态变量。然后，我使用该变量作为我创建的文件夹名称，以在我的网站的生命周期内存储缓存信息。目标是在网站被回收或发生其他事情时使用不同的文件夹名称。

我的网站在 IIS7 中运行，并且配置为最多有一个工作进程。回收已禁用。

我使用 ThreadPool.QueueUserWorkItem 异步发出多个并行数据库请求，然后使用 ManualResetEvent.WaitOne() 将这些调用合并回一个线程。我使用上述文件夹来缓存这些请求的结果。

我的问题是，似乎在某些时候我会同时创建并运行 2 个文件夹。我理解这意味着我获得了 2 个 AppDomain，而不仅仅是一个。我不明白为什么我会获得第二个 AppDomain 以及我能做些什么来防止它发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:05:07.897

像往常一样，答案很简单，而且在不同的领域 - 如果它是一个泛型类，则每个类的静态成员都是不同的。

[http://www.codeproject.com/Articles/26514/Generic-Types-Don-t-Share-Static-Members](http://www.codeproject.com/Articles/26514/Generic-Types-Don-t-Share-Static-Members)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:08:23.987

编辑：如果禁用回收，这不是答案，尽管如果您更改 web.config，以下行为仍然会发生。

当进行回收时，可能会发生此问题。IIS7 将创建一个新的工作进程，等待它被读取，然后才会关闭旧的。因此，在 5-30 秒的短暂时间内，您的应用程序将在 2 个工作进程中运行。

您可以通过在应用程序池高级设置上将“禁止重叠回收”设置为 True 来禁用此行为...

# javascript - 在javascript中如何调用动态添加到对象的函数

> ID：11849969
> 
> 赞同：0
> 
> 时间：2012-08-07T16:11:04.887
> 
> 标签：javascript

跟上 Javascript 学习的步伐。我正在查看以下代码，该代码旨在向对象添加函数以保持它们的唯一性，例如向事件类型的事物添加回调函数。

```
var store = {
    nextId: 1,
    cache: {},
    add: function(fn) {
        if(!fn.id){
            fn.id = store.nextId++;
            return !!(store.cache[fn.id] = fn);
        }
    }
}; 
```

该代码运行良好，但现在我想执行这些功能，但我无法弄清楚那部分。

到目前为止，我已尝试将这两个函数直接调用为 store.cache 对象的方法，这给了我错误“对象# 没有方法 'blah'”。我也试着做一个循环，好像 store.cache 是一个函数数组，但这也不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:15:16.063

我会添加一个方法`store`，像这样

```
executeFunction: function(id) {
   var fn = store.cache[id];
   if (fn) return fn();
   else throw 'could not find function for id...';
} 
```

然后你可以做

`var result = store.executeFunction(someId);`

您可以对此进行扩展，以便`executeFunction`获取应该应用于函数的上下文（范围）和参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:17:29.443

有更简单的方法来存储回调列表，但要解决您的问题，只需执行以下操作：

```
var i;
for (i in store.cache) {
    store.cache[i]();
} 
```

for (i in variable) 循环遍历变量的所有属性，并且 i 获取属性的键。

# iphone - iphone被锁定后如何在ios 5.0+中保持BSD套接字连接

> ID：11849980
> 
> 赞同：1
> 
> 时间：2012-08-07T16:11:43.583
> 
> 标签：iphone, sockets, ios5

我的网络服务器的套接字在 iphone 锁上断开连接。我正在使用系统调用来处理我的应用程序中的套接字功能。有没有一种方法可以使用系统调用启用 voip 标志，以便在 iphone 被锁定后保持活动状态，或者我可以像在 Objective C 中那样实现 voip 套接字标志设置功能。

我理解的这个问题出现在 ios 5.0+ 版本中。在网络中对此没有太多帮助。如果有人成功解决了这个问题，请告诉我。

# ember.js - Emberjs：获取当前元素

> ID：11849983
> 
> 赞同：27
> 
> 时间：2012-08-07T16:12:09.870
> 
> 标签：ember.js

我正在寻找类似于`this`of 的东西`jQuery`。我将在我拥有的代码下方列出：

```
<script type="text/x-handlebars" data-template-name="uiMainContainerTaskList">
    <div class="uiMainContainerTaskListContent">
    {{#view App.TasksView}}
    {{#each App.tasksController.tasks}}
    <div class="uiMainContainerWideItem" {{action "taskClick" target="TasksView" on="click"}}>
        <div class="uiMainContainerWideItemCheckbox">{{view Em.Checkbox checkedBinding="isDone"}}</div>
        <div class="uiMainContainerWideItemText uiMainContainerWideItemTaskName">{{taskName}}</div>
        <div class="uiMainContainerWideItemText uiMainContainerWideItemTaskDescription">{{taskDescription}}</div>
        <div class="uiMainContainerWideItemText uiMainContainerWideItemTaskPriority">{{priority}}</div>
        <div class="uiMainContainerWideItemText uiMainContainerWideItemTaskDueDate">{{dueDate}}</div>
    </div>
    {{/each}}
    {{/view}}
    </div>
</script> 
```

我将`taskClick`动作绑定到`div.uiMainContainerWideItem`. 在我的`View`我有：

```
App.TasksView = Em.View.extend({
    templateName: 'uiMainContainerTaskList',
        taskClick: function(e) {
            console.log($(this)); 
        }
}); 
```

在`jQuery`,`$(this)`将是当前元素（没有子元素）。有没有办法在 Ember 中获取当前元素？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-07T16:31:25.790

相信你正在寻找[`this.$()`](https://emberjs.com/api/classes/Ember.ViewMixin.html#method__)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-03-06T20:47:18.360

您可以调用`this.get('element')`以获取实际元素。

请参阅：[Ember 查看文档](http://emberjs.com/api/classes/Ember.View.html#property_element)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-06T07:01:33.383

我知道这是一个老问题，但由于视图已被弃用（如果组件不需要它），您可以将操作传递给 dom onclick 事件并在操作的最后一个参数中获取事件 js 对象。

请检查[https://stackoverflow.com/a/37066157/2726189](https://stackoverflow.com/a/37066157/2726189)

希望能帮助到你

# php - 停止生成 PDO::FETCH_CLASS 不存在的成员变量

> ID：11849995
> 
> 赞同：0
> 
> 时间：2012-08-07T16:13:05.400
> 
> 标签：php, pdo

当我们使用`PDO::FETCH_CLASS`它创建具有公共范围的指定类的成员变量时。如何防止这种默认行为并停止创建这些公共成员？

```
class user
{
/**
Table user has
id int PK
name UNIQUE
password
*/
protected $id;
protected $name;
/*more code.......*/
}

 $stmt->setFetchMode(\PDO::FETCH_CLASS, 'user');
 $user=$stmt->fetch(); 
```

现在，如果我`var_dump()`$user 它具有“密码”公共财产。我想防止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:46:06.540

我能找到的唯一我认为可以接受的解决方案（我仍然不*喜欢*它）是将获取模式设置为`PDO::FETCH_CLASS | PDO::FETCH_PROPS_LATE`并定义一个空`__set()`方法 - 或者至少，一个不设置属性的方法，如果他们不存在。

因此，根据上面的代码向您展示：

```
class user {

  protected $id;
  protected $name;

  public function __set ($name, $val) {
    if (property_exists($this, $name)) {
      $this->$name = $val;
    }
  }

}

$stmt->setFetchMode(\PDO::FETCH_CLASS | \PDO::FETCH_PROPS_LATE, 'user');
$user=$stmt->fetch(); 
```

这确实*有效*，但正如我所说我不*喜欢它*，主要是在您的示例中，因为它允许`protected`从外部设置属性，并且为了避免这种情况，您开始不得不做一些可怕的事情来创建额外的属性来指示锁定和诸如此类的各种胡说八道。

# javascript - 如何暂停 NodeJS 脚本？

> ID：11849996
> 
> 赞同：2
> 
> 时间：2012-08-07T16:13:06.230
> 
> 标签：javascript, node.js, web-scraping, read-eval-print-loop

我使用 Node.js 在 Javascript 中创建了一个脚本，以便在一夜之间从网站上抓取一些数据。我们会的，我已经达到了 67%，而且还需要大约 5-6 个小时才能完成。但我现在有足够的数据，我想停止它。

有没有办法暂停脚本执行到 Node REPL 会话并检查变量？或者类似的东西？

（我正在将数据抓取到一个数组中）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:23:57.977

您可以通过向其发送 USR1 信号将 Node 置于调试模式（可以暂停执行）。查看[https://github.com/dannycoates/node-inspector/](https://github.com/dannycoates/node-inspector/)

1.  找到你的节点进程的PID：`ps -x | grep node`
2.  向进程发送 USR1 信号：`kill -s USR1 $pid`
3.  启动节点检查器：`node-inspector &`
4.  打开浏览器`http://localhost:8080/debug?port=5858`
5.  点击右上角的暂停

# c++ - 解析 WinAPI 函数参数和返回类型

> ID：11849999
> 
> 赞同：2
> 
> 时间：2012-08-07T16:13:14.223
> 
> 标签：c++, parsing, command-line, header-files

是否有任何命令行工具或 python 脚本来解析 windows 头文件（WinAPI 函数）并打印出它的返回类型和参数？也许一些 MSVS 命令行工具？

就像是：

```
cmd> api-info psapi.h GetModuleFileNameExW 
```

api信息输出：

```
return:
DWORD WINAPI
arguments:
__in      HANDLE hProcess
__in_opt  HMODULE hModule
__out     LPWSTR lpFilename
__in      DWORD nSize 
```

我知道有像clang这样的复杂解决方案，但这对于我需要的这个简单功能来说太过分了。

谢谢。