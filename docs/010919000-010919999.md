# StackOverflow 问答 10919000-10919999

# javascript - 确定主要现代浏览器的浏览器类型和版本

> ID：10919002
> 
> 赞同：0
> 
> 时间：2012-06-06T17:20:15.917
> 
> 标签：javascript

我只支持主流的现代浏览器。主要是因为我目前的资源有限，我必须尽我所能支持用户最多的浏览器。我的应用程序仅适用于打开的 JavaScript 和主要的现代浏览器。我有一个 JavaScript 测试，现在我需要测试这些浏览器的浏览器类型和版本。

*   IE
*   苹果浏览器
*   铬合金
*   火狐

谷歌搜索拉起：

[W3](http://www.w3schools.com/js/js_browser.asp)和[Quirksmode](http://www.quirksmode.org/js/detect.html)

Quriksmode 看起来涵盖了太多的基础以满足我的需求，而我被告知 W3 并不是最好的参考。

我找到的最简单的解决方案以及我想使用的是：

```
navigator.appName 
```

测试类型和

```
navigator.appVersion 
```

测试版本。这适用于我想要涵盖的有限案例吗？

我不想使用任何库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:25:28.790

鉴于您的资源有限，请考虑使用像 jQuery 这样的框架来尝试代表您管理浏览器之间有时存在的显着差异。

即使您一般不想使用 jQuery，我仍然建议您看看它的浏览器检测功能

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

请注意，.browser 属性已被弃用，并且可能在 jQuery 的未来版本中不可用，因为团队关注的不是特定的浏览器版本，而是当前浏览器的功能

[http://api.jquery.com/jQuery.support/](http://api.jquery.com/jQuery.support/)

明智的做法是采用类似的方法。

# java - Android调用数组列表导致程序崩溃

> ID：10919007
> 
> 赞同：0
> 
> 时间：2012-06-06T17:20:32.870
> 
> 标签：java, android, mobile, arraylist

我已经编写了一些代码，在一个类中我创建并填充了一个数组列表，我可以从另一个类调用并打印它，但是当我尝试从第三类调用它时会导致移动应用程序关闭。这是数组列表的代码：

```
public class MyPositionOverlay extends ItemizedOverlay<OverlayItem> {

    public ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();
    Context context;

    public MyPositionOverlay(Drawable marker, Context c) {
        super(boundCenterBottom(marker));
        // TODO Auto-generated constructor stub
        populate();
        context = c;

    }
    private final int mRadius = 5;

    Location location;

    public Location getLocation() {
        return location;
    }
    public void setLocation(Location location) {;
    this.location = location;
    }

    //Method for user intputs - fill in
    @Override
    public boolean onTap(GeoPoint point, MapView mapView) {

        if(super.onTap(point, mapView)){
            return true;
        }
        String title = "Point:" + String.valueOf(overlayItemList.size()+ 1) + "\n" +
                "Lat:" + "\n" + String.valueOf(point.getLatitudeE6() + 
                        "Long:" + "\n" + String.valueOf(point.getLongitudeE6()));
        String snippet = "geo:\n"
                + String.valueOf(point.getLatitudeE6()) + "\n"
                + String.valueOf(point.getLongitudeE6());

        addItem(point, title, snippet);

        //return true;
        //if(hit test is true)
        //  perform task
        // return true;
        //if not handled

        return false;
    }

    @Override
    protected boolean onTap(int index) {
        // TODO Auto-generated method stub
        //return super.onTap(index);

        Toast.makeText(context,
                "Touch on marker: \n" + overlayItemList.get(index).getTitle(),
                Toast.LENGTH_LONG).show();

        return true;
    }

    public void addItem(GeoPoint point, String title, String snippet){
        OverlayItem newItem = new OverlayItem(point, title, snippet);
        overlayItemList.add(newItem);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return overlayItemList.get(i);
    }
    @Override
    public int size() {
        // TODO Auto-generated method stub
        return overlayItemList.size();
    }
} 
```

我只是尝试从下面的类中调用它：

```
public class GeneticAlgorithm2  {

    //public int populationSize;
    //private MyPositionOverlay popList;

    MyPositionOverlay popSize;
    MyPositionOverlay positionOverlay;
    HomeScreen homeScreenPop;
    //MyPositionOverlay overlaySize = new MyPositionOverlay(null, null);

    //int populationSize2 = popSize.size();

    int populationSize = 800;
    public int route[] = new int[populationSize +1];
    int pointLimit;
    int iterations;
    double mutationRate = 0.10;

    //Canvas C = null;
    //Dimension CD;
    //Label L;
    //Graphics GC;
    //int Initial_population = 800;

    int matingPopulation = populationSize/2;
    int favPopulation = matingPopulation/2;
    int numOfCities = 30;//populationSize2;
    //int numOfCities = popSize.overlayItemList.size();
    int cutLength = numOfCities/5;
    //double Mutation_probability = 0.10;

    double loops=1.5;
    int ePoch;
    double xLow = 0.0;
    double yLow = 0.0;
    double xHigh = 100.0;
    double yHigh = 100.0;
    double xRange, yRange;
    double minCost = 5.0;
    double timeStart,timeEnd;
    Thread T = null;
    double costPerfect = 0.;

    boolean started = false;

    City [] cities;
    Chromosome [] chromosomes;

/*
    public GeneticAlgorithm2() {

        // Calling My Position Overlay class
        //popList = new MyPositionOverlay(null, null);

        //Sets the population size to the number of markers
        //populationSize = popSize.overlayItemList.size();
        //start();
        //test();

        //int populationSize3 = popSize.size();

    }*/

    public void test(){
        System.out.println("test");
    }

    public void start() {

        // Calling My Position Overlay class
        //popSize = new MyPositionOverlay(null, null);

        //Sets the population size to the number of markers
        //populationSize = popSize.overlayItemList.size();

        //popSize.size();

        //int populationSize2 = popSize.size();
        //int populationSize3 = positionOverlay.size();

        System.out.println("Start ...");
        // generate a set of cities

        System.out.println(positionOverlay.size());
        //System.out.println( homeScreenPop.positionOverlay.size());

}
} 
```

这是我收到的错误消息：

```
06-06 17:14:05.210: W/dalvikvm(1301): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-06 17:14:05.220: E/AndroidRuntime(1301): FATAL EXCEPTION: main
06-06 17:14:05.220: E/AndroidRuntime(1301): java.lang.NullPointerException
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.Maps.GeneticAlgorithm2.start(GeneticAlgorithm2.java:97)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.Maps.HomeScreen$3.onClick(HomeScreen.java:152)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.view.View.performClick(View.java:2408)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.view.View$PerformClick.run(View.java:8816)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.os.Handler.handleCallback(Handler.java:587)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.os.Looper.loop(Looper.java:123)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at java.lang.reflect.Method.invokeNative(Native Method)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at java.lang.reflect.Method.invoke(Method.java:521)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-06 17:14:05.220: E/AndroidRuntime(1301):     at dalvik.system.NativeStart.main(Native Method) 
```

据我所见，它说数组列表为空，但就像我说的那样，我可以很高兴地从另一个类中输出它。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:24:55.690

在您的`start`方法`positionOverlay`为 null 时，您刚刚声明了它，但在访问此字段之前尚未对其进行初始化，因此是 NPE。

# grails - 如何使审核日志插件中的值对普通人可读？

> ID：10919008
> 
> 赞同：-1
> 
> 时间：2012-06-06T17:20:51.557
> 
> 标签：grails

就凡人而言，我指的是系统的用户（非开发人员）。审计日志插件很漂亮，但困扰我的一件事是我不能完全为我们的客户定制它。例如，我不想显示更改了哪些字段的表格等。我想将其转换为普通人可以轻松阅读的句子。问题是，我如何使用事件监听器来做到这一点？描述中的示例做了我想要的，我只是还不知道如何将它传递给控制器​​并在 gsp 中显示它。我现在不能给你看一些示例代码，因为我现在正在打电话。所以也许以后我回家的时候。*抱歉*，我有什么想法可以实施吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T17:51:42.170

我这样做不是通过更改插件记录更改的方式，而是通过创建一个从审计日志对象读取以显示历史记录的 TagLib。然后将 TagLib 放置在您想要显示历史记录的任何页面上，并将对象 ID 传递给它。

```
//Import into your TagLib
import org.codehaus.groovy.grails.plugins.orm.auditable.AuditLogEvent

//Basic TagLib idea
def objectHistory = {attrs->
    if(attrs.persistedObjectId) {
        def events = AuditLogEvent.findAllByPersistedObjectId(attrs.persistedObjectId, [sort:"dateCreated",order:"desc"])
        if(events.size() > 0) {
          events.each{event->
            out << event.propertyName
            out << ' changed on '
            out << event.dateCreated
            out << 'The old value was '
            out << event.oldValue
            out << ' and the new value is '
            out << event.newValue
          }
        }
    }
} 
```

假设您有一个显示公司信息的页面：

```
<g:objectHistory persistedObjectId="${companyInstance.id}" /> 
```

您可以非常有创意地让 TagLib 显示数据、忽略某些事件、显示谁进行了更改 ( `event.actor`) 等。

# .net - 将附件从 ASP Classic 传递到 .Net 电子邮件 Web 服务

> ID：10919009
> 
> 赞同：1
> 
> 时间：2012-06-06T17:20:55.823
> 
> 标签：.net, web-services, asp-classic

我的公司有一个用于发送电子邮件的基于 C# .Net 的 Web 服务。此 Web 服务当前不支持附件。我们有许多旧的 ASP Classic 页面仍在使用 CDONTS 发送电子邮件（包括带有附件的页面）。我当前的任务是找出我们是否可以向 Web 服务添加附件支持，以便我们可以用对 Web 服务的调用来替换 ASP Classic CDONTS。我要挂断的是：是否可以从 ASP Classic 传递那些需要附加到 Web 服务的文件。

1.  我知道如何从 ASP Classic 调用 Web 服务；当我不需要附件时，我已经可以使用来自 Classic 的现有 Web 服务。
2.  我知道我可以使用 CDOSYS 或其他 ASP Classic 方法来发送电子邮件：我被要求使用这个现有的 Web 服务。
3.  我见过很多将文件作为字节数组接收的 Web 服务示例：您将如何从 ASP Classic 中创建和发送该字节数组？
4.  我还看到了许多电子邮件 Web 服务示例，其中该服务仅采用文件路径。如果您在另一台机器上运行 Web 服务，我是否认为这会出现问题？您发送的路径必须可供 Web 服务主机访问。

感谢任何帮助：我发现很多文章描述了我需要做的一半，或者只是从 .Net 到 .Net 的角度来处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:59:12.753

您可以使用 adodb.stream 对象将二进制数据转换为字节数组：

```
Function ReadByteArray(strFileName)
    Const adTypeBinary = 1
    Dim bin : Set bin = Server.CreateObject("ADODB.Stream")
    bin.Type = adTypeBinary
    bin.Open
    bin.LoadFromFile strFileName
    ReadByteArray = bin.Read
End Function 
```

[adodb.stream 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675032%28v=vs.85%29.aspx)

# php - PHP 对象变量变量名？

> ID：10919011
> 
> 赞同：24
> 
> 时间：2012-06-06T17:21:02.183
> 
> 标签：php

我有一个从 1 到 10 的循环并在

`$entity_object->field_question_1`通过 10 所以...

`$entity_object->field_question_1`, `$entity_object->field_question_2`, 等

我想在这个循环中打印这个，我怎样才能得到变量？我试着做

```
$var = "entity_object->field_question_".$i;
print $$var; 
```

但这没有用......

我怎样才能得到这些值？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-06T17:22:20.570

这应该有效：

```
$var="field_question_$i";
$entity_object->$var; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-29T23:36:29.033

实际上，您需要像这样将变量放在字符串之外，以便这些解决方案起作用： `$var="field_question_".$i;`

`$entity_object->$var;`

或者

```
$entity_object->{"field_question_".$i} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-06T17:25:40.400

首先，数组更适合你想做的事情。

你的问题的答案：`print $entity_object->{"field_question_$i"};`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-01T07:10:28.880

升级到 PHP 7 时，我们遇到了如下语句的问题：

```
$variable->$node[$i] = true; 
```

这在 PHP 5.4 中运行良好，但在 PHP 7 中导致整个网站崩溃。所以我们将其替换为：

```
$variable->{$node[$i]} = true; 
```

解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T17:36:15.373

或者您可以在数组和对象之间进行类型转换。

数组很简单，因为它们有组织且易于访问。对象完全不同，但与许多专业人士不同。

像这样设置你的对象：

```
$entity_object["field_question_{$i}"] = ''//value; 
```

然后可以将它们类型转换为对象：

```
$entity_object = (object)$entity_object; 
```

然后，您可以像这样引用它们：

```
$entity_object->field_question_1 ...; 
```

# c# - Visual Web Developer：动态添加文本

> ID：10919016
> 
> 赞同：1
> 
> 时间：2012-06-06T17:21:30.037
> 
> 标签：c#, asp.net, visual-web-developer-2010

我正在设计一个以图形形式显示报告的网页（在 Visual Web Developer 中）。看到图形后，需要在下面附加一些注释。这只能在图形渲染后完成，因为评论将基于该输出。

我需要一种方法来提示评论并将它们显示为有序列表。我想我可以使用带有一些按钮的文本框，并在单击“完成”按钮时将它们替换为有序列表——即，文本框和按钮消失，取而代之的是有序的评论列表。

我已经愚蠢地入侵并用谷歌搜索了自己，但我还没有想出解决方案。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:37:38.510

你考虑过阿贾克斯吗？做任何你需要的事情，然后根据需要发出 ajax 请求来检索评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:05:11.640

我通过像这样替换innerHTML解决了这个问题：

```
protected void SubmitMessages()
{
    string[] lines = MessagesTextbox.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
    string output = "<ul>";
    foreach (string message in lines)
    {
        if (!message.Equals(""))
        {
            output += "<li>";
            output += message;
            output += "</li>";
        }
    }
    output += "</ul>";
    messagesDiv.InnerHtml = output;

    //string messagesFileLocation = AppDomain.CurrentDomain.BaseDirectory + "/mesages.xls";
    string messagesFileLocation = "D:\\WebApp\\messages.xml";
    FileStream fs = File.Open(messagesFileLocation, FileMode.Create, FileAccess.Write);
    if (lines.Length != 0)
    {
        using (StreamWriter sw = new StreamWriter(fs))
        {
            sw.WriteLine("<Messages>");
            foreach (string message in lines)
            {
                if (!message.Equals(""))
                {
                    sw.WriteLine("\t<message>" + message + "</message>");
                }
            }
            sw.WriteLine("</Messages>");
        }
    }
} 
```

# asp.net-mvc - 如何填充我的视图模型？

> ID：10919017
> 
> 赞同：0
> 
> 时间：2012-06-06T17:21:42.323
> 
> 标签：asp.net-mvc

我正在使用 MVC 构建一个用于兽医诊所的基本应用程序。该应用程序有一个屏幕，工作人员可以在其中查看宠物的预约历史并添加预约。

历史部分已连接并且工作正常。我会看到所有先前约会的列表，并且可以导航到每个约会以查看其详细信息。

问题是添加一个新约会。Pet 控制器的 Edit 视图具有以下操作链接：

```
@Html.ActionLink("Add Appointment", "Create", "Appointment", new { id = Model.Id }, null) 
```

此 ActionLink 将 Pet 的 Id 从当前模型传递到 Appointment 控制器的 Create 操作。宠物 ID 是必要的，因为这就是数据库连接宠物和约会的方式。

Appointment 控制器的 Create 视图中使用的视图模型具有 Pet 和 Appointment 属性。

如何填充视图模型的属性？将使用 Appointment 控制器的 Create 视图创建 Appointment，但我仍然需要在 Create 屏幕上显示各种 Pet 属性（名称、年龄、物种等）。这些在视图模型的 Pet 属性中。如何从传递给 ActionLink 的 id 转到视图模型中的水合 Pet 对象？我认为我不需要再次访问数据库，因为我需要的所有 Pet 属性都在用于 Pet 控制器的 Edit 视图的模型中

谢谢！

MVC 4 遥控

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:23:41.393

你`Model`从一个`Controller` `Action`.

```
public ActionResult Create(string id){

   MyModel myModel = new MyModel();
   myModel.Foo = "Bar";
   return View(myModel);

} 
```

您可以提取它以使用在您的控制器内部发生的服务调用来填充服务层。然后它将传回一个模型，该模型将被发送到视图。

```
public ActionResult Create(string id){

   // Some service inteface to interact with the data store to populate model
   MyModel myModel = service.GetMyModel();
   return View(myModel);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:27:29.617

当您收到来自服务器的响应时，您的数据库连接已关闭。如果您重定向到另一个页面，则必须进行另一个 db 调用以加载您需要的任何内容。

# java - 局部变量 NullPointerException

> ID：10919020
> 
> 赞同：0
> 
> 时间：2012-06-06T17:21:48.827
> 
> 标签：java, android, variables, topdown

当我单击登录类上的注册按钮时，我收到了一个空指针异常，它给出了该错误。我试图修改局部和全局变量，但似乎没有任何东西可以修复错误，我可能在 onClickListener 上搞混了，因为当我删除该代码时它似乎可以工作。

注册.class。

```
public class Signup extends Activity {

    /*List Variables */ 
    private ScrollView scrollView1;

    private EditText editTextUN;

    private EditText editTextPW1;

    private EditText editTextPW2;

    private EditText editTextEMAIL;

    private Button buttonSignup;

    private Button buttonCancelSignup;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        /*set ContentView */
        setContentView(R.layout.signup);

        /*Populate fields */
        populate();

    }

    private void populate() {
        // TODO Auto-generated method stub

        /*initialize the ScrollView */
        ScrollView scrollView1 = (ScrollView) findViewById(R.id.scrollView1);

        /*initialize the EditText for the FIRST username field */
        final EditText editTextUN = (EditText) findViewById(R.id.editTextUN);

        /*initialize the FIRST password field */
        final EditText editTextPW1 = (EditText) findViewById(R.id.editTextPW1);

        /*initialize the SECOND password field */
        final EditText editTextPW2 = (EditText) findViewById(R.id.editTextPW2);

        /*initialize the signup Button */
        Button buttonSignup = (Button) findViewById(R.id.btsignup);

        /*initialize the cancel Button */
        Button buttonCancelSignup = (Button) findViewById(R.id.buttonCancelSignup);

        /*initialize the email EditText */
        final EditText editTextEMAIL = (EditText) findViewById(R.id.editTextEMAIL);

        /*setup OnClickListener */
        buttonSignup.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                /*check to see if it's the signup button */
                if(v.getId()== R.id.buttonSignup) {

                    /*get everything to a string */
                    String user = editTextUN.getText().toString();

                    String pass1 = editTextPW1.getText().toString();

                    String pass2 = editTextPW2.getText().toString();

                    String email = editTextEMAIL.getText().toString();

                    /*check to see if there's Text in all the Edit Text's */
                    if(user !=null && user.length()>5 && pass1.length()>5 && pass1 !=null && pass2.length()>5 && pass2 !=null && email.length()>5 && email !=null) {

                        /*send to comHelper */
                        ComHelper.sendSignUp(user, pass1, pass2, email);

                        while(ComHelper.sendSignUp(null, null, null, null)) {

                        }

                    }

                } else {
                    finish();
                }

            }
        });
    }

} 
```

日志猫：

```
06-06 17:15:30.045: E/AndroidRuntime(1197): FATAL EXCEPTION: main
06-06 17:15:30.045: E/AndroidRuntime(1197): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gta5news.qwuik/com.gta5news.qwuik.Signup}: java.lang.NullPointerException
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.os.Looper.loop(Looper.java:137)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at java.lang.reflect.Method.invokeNative(Native Method)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at java.lang.reflect.Method.invoke(Method.java:511)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at dalvik.system.NativeStart.main(Native Method)
06-06 17:15:30.045: E/AndroidRuntime(1197): Caused by: java.lang.NullPointerException
06-06 17:15:30.045: E/AndroidRuntime(1197):     at com.gta5news.qwuik.Signup.populate(Signup.java:70)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at com.gta5news.qwuik.Signup.onCreate(Signup.java:40)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.Activity.performCreate(Activity.java:4465)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-06 17:15:30.045: E/AndroidRuntime(1197):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

编辑：这是在 x86 模拟器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:33:19.857

以上所有陈述都是正确的，但我认为 NullPointerException 是由于：

因为 `in Button buttonSignup = (Button) findViewById(R.id.btsignup);`正确的 id 是 R.id.buttonSignup

所以看起来 buttonSignup 是空的

正如你在

…………………………………………………………………………………………………………………………………………

/*检查是否是注册按钮*/

```
 if(v.getId()== `R.id.buttonSignup`) { 
```

………………………………………………………………………………………………………………………………………………

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:57:22.880

我已经更新了你的代码并添加了评论，现在它对我来说很好用

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ScrollView;
import android.widget.Toast;

public class Signup extends Activity {

    /*List Variables */ 
    private ScrollView scrollView1;
    private EditText editTextUN;
    private EditText editTextPW1;
    private EditText editTextPW2;
    private EditText editTextEMAIL;
    private Button buttonSignup;
    private Button buttonCancelSignup;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.signup);
        /*Populate fields */
        populate();
      }

    private void populate() {

        /*initialize the ScrollView */
        ScrollView scrollView1 = (ScrollView) findViewById(R.id.scrollView1);
        /*initialize the EditText for the FIRST username field */
        final EditText editTextUN = (EditText) findViewById(R.id.editTextUN);
        /*initialize the FIRST password field */
        final EditText editTextPW1 = (EditText) findViewById(R.id.editTextPW1);
        /*initialize the SECOND password field */
        final EditText editTextPW2 = (EditText) findViewById(R.id.editTextPW2);
        /*initialize the signup Button */

        /* here.........i have added final .........*/
       final  Button buttonSignup = (Button) findViewById(R.id.btsignup);
        /*initialize the cancel Button */
        Button buttonCancelSignup = (Button) findViewById(R.id.buttonCancelSignup);
        /*initialize the email EditText */
        final EditText editTextEMAIL = (EditText) findViewById(R.id.editTextEMAIL);

        /*setup OnClickListener */
        buttonSignup.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                /*check to see if it's the signup button */
                //if(v.getId()== R.id.btsignup) {

                /* here.........i have added if condition .........*/
                    if(v==buttonSignup){
                        Toast.makeText(getApplicationContext(), "button has been pressed", Toast.LENGTH_SHORT).show();

                    /*get everything to a string */
                    String user = editTextUN.getText().toString();
                    String pass1 = editTextPW1.getText().toString();
                    String pass2 = editTextPW2.getText().toString();
                    String email = editTextEMAIL.getText().toString();

                    /*check to see if there's Text in all the Edit Text's */
                    if(user !=null && user.length()>5 && pass1.length()>5 && pass1 !=null && pass2.length()>5 && pass2 !=null && email.length()>5 && email !=null) {

                   }
                } 
                else 
                {
                    finish();
                }
            }
        });
    }
} 
```

# web - 如何比较谷歌分析中的搜索流量百分比？

> ID：10919026
> 
> 赞同：0
> 
> 时间：2012-06-06T17:22:09.017
> 
> 标签：web, google-analytics, analytics

我正在尝试获取一段时间内总访问量中搜索流量百分比的图表。

我想看看是否有更多百分比的访问者来自 Google。

我怎样才能生成这样的报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:24:58.817

如果您只想将搜索流量与所有访问进行比较，您可以使用高级细分并选中标有“所有访问”和“搜索流量”的框。要专门过滤来自 Google 的流量，您可以尝试编写带有过滤器集的自定义报告，如下所示：

1.  度量组 - 访问
2.  维度明细 - 源过滤器
3.  包括 - 源 - 正则表达式 -`.*google.*`
4.  包括 - 中等 - 精确 - 有机

# mysql - 重命名从 select 语句创建的列 (MySQL)

> ID：10919029
> 
> 赞同：0
> 
> 时间：2012-06-06T17:22:29.157
> 
> 标签：mysql, sql

我创建了一个表并意外创建了一个名称为的列`DATE(FROM_UNIXTIME(email_sends.created_ts))`

我无法选择此列来重命名它，因为它使用受保护的字符。基本上，我要求在 mysql 中转义此列名的正确方法，以便我可以更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:25:55.263

使用反引号引用包含特殊字符的标识符。如[手册](http://dev.mysql.com/doc/en/identifiers.html)所述：

> 标识符可以被引用或不被引用。如果标识符包含特殊字符或者是保留字，则在引用它时*必须*引用它。
> 
> [...]
> 
> 标识符引号字符是反引号（“<code>`”）

因此，您可以执行类似的操作：

```
ALTER TABLE foo CHANGE `DATE(FROM_UNIXTIME(email_sends.created_ts))` newname DATE; 
```

# objective-c - #定义一个unicode字符

> ID：10919033
> 
> 赞同：1
> 
> 时间：2012-06-06T17:22:55.910
> 
> 标签：objective-c, unicode, c-preprocessor

我需要定义以下 2 个 unicode 常量

/*

扁平符号 ♭ 音乐扁平符号 Unicode：U+266D，UTF-8：E2 99 AD

Sharp Symbol ♯ MUSIC SHARP SIGN Unicode: U+266F, UTF-8: E2 99 AF

*/

```
#define kSongsSharpSymbol [NSString stringWithFormat:@"\u0266F"]
#define kSongsFlatSymbol [NSString stringWithFormat:@"\u0266D"] 
```

当我在控制台中查看输出时，该值不是正确的符号：

```
 NSLog(@"Sharp Constant %@",kSongsSharpSymbol); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:25:24.627

删除前导零解决了这个问题：

```
#define kSongsSharpSymbol [NSString stringWithFormat:@"\u266F"]
#define kSongsFlatSymbol [NSString stringWithFormat:@"\u266D"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-23T18:56:54.850

使用`stringWithFormat:`（如@Slinky 所建议的）是不必要的。解码`\u`是由编译器完成的，而不是运行时。您可以只使用字符串文字：

```
#define kSongsSharpSymbol @"\u266F"
#define kSongsFlatSymbol @"\u266D" 
```

# ruby - 传入 &block 时出现 Ruby 参数计数错误

> ID：10919034
> 
> 赞同：-1
> 
> 时间：2012-06-06T17:22:57.793
> 
> 标签：ruby, rspec

我正在开发一个文本游戏引擎，并且在开发探索模块时遇到了障碍。当我尝试`Location`使用来自夹具的块参数实例化我的类时，我收到此错误：

> ArgumentError，“参数数量错误（3 对 2）

对于此代码：

```
# in lib/explore/models/location.rb, line 15
class Location < RoundTable::Controllers::ActionDelegate
  # ... code omitted for brevity

  def initialize(slug, params = nil, &block)
    # ... code omitted for brevity

    if block_given?
      parser = Explore::Parsers::LocationParser.new(self)
      parser.instance_eval &block
    end # if
  end # constructor

  # ... code omitted for brevity
end # class Location

# in spec/fixtures/models/locations.rb, line 38
location :mushroom_kingdom, :name => "Mushroom Kingdom" do
  edges = Explore::Fixtures[:edges]
  edges.each do |key, value|
    go value.location, *value.params
  end # each
end # location

# in spec/models/location_spec.rb, line 193
context "initialized with block" do
  let :fixture do fixtures[:mushroom_kingdom] end

  subject { described_class.new fixture.slug, fixture.params, &fixture.block }

  it { puts subject.inspect }
end # context initialized with block 
```

这很明显是某个地方的语法错误，其中一个块没有被转换为一个过程，反之亦然，但我已经检查了十几次代码并且找不到它。如果有眼尖的读者可以帮助我，我将永远感激不尽。

**源文件：**

*   [location.rb (Github)](https://github.com/sleepingkingstudios/round_table--text_explorer/blob/master/lib/explore/models/location.rb)
*   [location_spec.rb (Github)](https://github.com/sleepingkingstudios/round_table--text_explorer/blob/master/spec/models/location_spec.rb)
*   [（夹具）locations.rb（Github）](https://github.com/sleepingkingstudios/round_table--text_explorer/blob/master/spec/fixtures/models/locations.rb)

完整的源代码在 Github 上可用，但分为两个存储库：

*   [引擎（Github）](https://github.com/sleepingkingstudios/round-table)
*   [插件（Github）](https://github.com/sleepingkingstudios/round_table--text_explorer)

要运行代码或规范，插件代码需要放在 vendor/modules/plugins/explore 的引擎目录中。

**回溯：**

```
1) RoundTable::Vendor::Plugins::Explore::Models::Location initialization with block 
     Failure/Error: it { expect { described_class.new fixture.slug, fixture.params, &fixture.block }.not_to raise_error ArgumentError }
       expected no ArgumentError, got #<ArgumentError: wrong number of arguments (3 for 2)>
     # ./spec/models/location_spec.rb:33:in `block (4 levels) in <top (required)>'

2) RoundTable::Vendor::Plugins::Explore::Models::Location initialized with block 
     Failure/Error: subject { described_class.new fixture.slug, fixture.params, &fixture.block }
     ArgumentError:
       wrong number of arguments (3 for 2)
     # ./lib/explore/parsers/location_parser.rb:39:in `go'
     # ./spec/fixtures/models/locations.rb:41:in `block (2 levels) in <module:Models>'
     # ./spec/fixtures/models/locations.rb:40:in `each'
     # ./spec/fixtures/models/locations.rb:40:in `block in <module:Models>'
     # ./lib/explore/models/location.rb:49:in `instance_eval'
     # ./lib/explore/models/location.rb:49:in `initialize'
     # ./spec/models/location_spec.rb:196:in `new'
     # ./spec/models/location_spec.rb:196:in `block (3 levels) in <top (required)>'
     # ./spec/models/location_spec.rb:198:in `block (3 levels) in <top (required)>' 
```

**编辑 2012 年 06 月 06 日：**

*   用实际的、不合格的代码替换了示例代码
*   添加了完整项目的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:06:25.913

rspec 有时会以不完全有帮助的方式吞下回溯（我认为您可以使用 -b 选项来抑制这种情况） - 错误（我认为）在其他地方。

根据我对代码的阅读，蘑菇王国的块是 instance_evaled 在一个实例上`Explore::Parsers::LocationParser`

这个类定义了一个`go`这样的方法

```
def go(location, params = {}) 
```

但蘑菇王国有

```
go value.location, *value.params 
```

哪里`value.params`是用于在边缘夹具文件底部创建边缘的选项哈希。在至少一种情况下，该散列中有 2 个对象，因此当您发出 splat 时，您最终会`go`使用 3 个参数进行调用。鉴于这`go`似乎将哈希作为其第二个参数，那 splat 真的是故意的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:31:12.440

尝试：

```
Location.new(fixture[:slug], fixture[:params], fixture[:block]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:33:18.883

这是您拥有的东西的复制品，并且可以正常工作。仍在寻找问题。

```
class Location
   def initialize(slug, params = nil, &block)
     yield
   end
end

mushroom_kingdom = 'mushroom kingdom'
fixture = {
  :slug => mushroom_kingdom,
  :params => { :princess => :toadstool },
  :block => lambda { puts "It'sa me, Mario!" }
}
l = Location.new(fixture[:slug], fixture[:params],&fixture[:block]) 
```

为了得到同样的错误，我必须做`Location.new(fixture[:slug], fixture[:params], 'abcd', &fixture[:block])`or `Location.new(fixture[:slug], fixture[:params],fixture[:block])`。几乎就好像您`&`的不是真正的＆符号。是其他字符编码吗？前两个参数中是否有逗号？

而且，您确定错误正是来自此代码吗？您共享的内容没有语法错误。

# css - 交互式时间轴的复杂 CSS 定位 - 浮动、绝对还是两者兼而有之？

> ID：10919036
> 
> 赞同：1
> 
> 时间：2012-06-06T17:23:03.947
> 
> 标签：css, html, css-float, css-position, timeline

我正在创建一个交互式时间线，其中每个事件都是一个带有 HTML5 数据标签的列表项，用于设置开始日期和结束日期。（见下文）

```
<ul>
    <li data-start="-4181" data-end="-3251">Adam</li>
    <li data-start="-4173" data-end="-4117">Cain</li>
    <li data-start="-4163" data-end="-4125">Abel</li>
    <li data-start="-4051" data-end="-3139">Seth</li>
    <li data-start="-3946" data-end="-3041">Enos</li>
</ul> 
```

我正在让 jQuery 正确设置每个事件的宽度，以及父 div 开头的左边距，如下所示。

![时间线](../Images/9fabba625639b3bb5c3d4adb812cae1f.png)

这是我真正的问题...我目前在列表项上使用 float:left ，但是像 Cain 和 Abel 这样较短的项在 Adam 的列表项上浮动，而不是跳到新行并正确定位反对左派。这是有道理的，如果父元素中有空间，应该浮动在相邻元素上 - 但是，有没有办法结合使用浮动和绝对定位来动态对齐这些项目？

最终的时间线将包含 800 多个事件，我需要它们很好地共享时间线空间，并且我不希望它们堆叠的高度超过 10 个事件。

非常感谢任何帮助或想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:43:16.713

除非您需要多个它们出现在同一行，否则您可能不需要浮动它们。除非这些条应该相互重叠或与其他内容重叠，否则您可能不需要 CSS 定位。

听起来您只需要允许 li 标签是非浮动块级元素，并根据需要为每个标签设置一个边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:03:37.617

您确实需要大量复杂的 JavaScript 才能使其正常工作。您需要计算每个前一个框的位置，然后让 jquery 将下一个框放在一个位置，这样它就不会与任何以前的框冲突。使用`position:absolute`但让 javascript 计算它应该去哪里。根据您计算要放置的位置，使用 jquery分配每个 li a`top`和值。`left`CSS float 将无法做你想做的事，在这种情况下根本不要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:20:54.163

您可以将您的文本包装在 a `span`or`p`或您喜欢的任何内容中，然后将任何内容`javascript`应用于它们并提供`li`整个空间的宽度。这不需要`floating`或`absolute positioning`。

# c# - 在 RasDial 之后获取 IP 地址/接口号

> ID：10919038
> 
> 赞同：3
> 
> 时间：2012-06-06T17:23:09.013
> 
> 标签：c#, c++, .net, network-programming, ras

在带有 .NET 的 C++ 中，我试图获取刚刚与 RasDial 连接的 RASCONN 的 IP 地址或接口名称（我有 HRASCONN 指针）。我发现 MSDN API 令人困惑，经过数小时的搜索，我找不到正确的调用（但似乎它们必须存在）。

如果有更好的方法来做到这一点，这里的目标是有一些唯一的标识符，这样当我以后在我的管理 C# 中调用 NetworkInterface.GetAllNetworkInterfaces() 时，我可以选择正确的连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:12:54.977

您需要查看 RasGetProjectionInfo 函数并使用之前检索到的 HRASCONN 指针。RASP_PppIp 应该是传入的 rasprojection 值，以获取包含您的 IP 地址的 RASPPPIP 结构。我会发布一些 C++ 代码供您使用，但这不是我最好的语言，也不想让自己难堪。

这里有一些有用的链接可以帮助您：

RasGetProjectionInfo： http: [//msdn.microsoft.com/en-us/library/aa377548 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa377548(v=vs.85).aspx)

RASPPPIP： http: [//msdn.microsoft.com/en-us/library/aa377634 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa377634(v=vs.85).aspx)

由于您的应用程序的一部分似乎正在使用 C#，您可能需要考虑在 CodePlex 上使用 DotRas 项目。它是围绕整个 RAS API 的基于 C# 的包装器。要从 DotRas 获取 PPP 信息，您需要：

```
using DotRas;

var conn = RasConnection.GetActiveConnections().Where(c => c.EntryName == "Your Entry").FirstOrDefault();
RasPppIp ipInfo = conn.GetProjectionInfo(RasProjectionType.IP); 
```

从这里您可以访问 ipInfo.IPAddress 属性以获取您想要的信息。

这是 DotRas 的链接：[https ://github.com/winnster/DotRas](https://github.com/winnster/DotRas)

希望有帮助！

# javascript - Chrome 后台页面

> ID：10919042
> 
> 赞同：0
> 
> 时间：2012-06-06T17:23:25.200
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

是否可以在不打开额外选项卡的情况下让后台页面检查另一个页面？

我正在制作一个扩展程序，检查用户是否在该站点上收到消息并提醒他们，很可能使用 javascript。

我研究了一下。我知道 ide 如何编写扩展和所有脚本，但不知道是否可以将其作为“不可见”选项卡

感谢您的帮助-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:53:36.657

是的，这是可能的并且得到很好的支持。

我编写了一个 Chrome 扩展程序，它会定期搜索站点并在发现新结果时向浏览器桌面发出通知。所有这些工作都在后台页面中完成。此外，我的扩展还支持弹出图标（导航栏右侧的图标），因此用户可以随时手动搜索。弹出页面和背景页面单独运行（因此您使用的任何常用库 - 例如 jQuery - 都必须在两个页面中加载），但它们可以通过[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)进行通信.

至于避免 CORS/“同源策略”问题，您需要确保您的扩展是一个打包的扩展（“托管”扩展不支持它）并在权限部分列出您的扩展需要访问的任何站点和协议清单文件（您可以使用`http://*/*`并且`https://*/*`如果您希望能够访问任何站点）。

# html - 我可以防止选择进入 div 的末尾吗？

> ID：10919044
> 
> 赞同：1
> 
> 时间：2012-06-06T17:23:35.840
> 
> 标签：html, css

我有一个宽度很大但文本量很小的 div。当我选择到文本的末尾时，选择会一直到 div 的末尾。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:16:04.867

尝试添加`width:auto;`这将使您的 div 宽度等于您在其中的文本`div`。但是，如果您必须拥有`div`大宽度的文本，请尝试将文本包装在另一个`div`或`span`或`p`或您喜欢的任何内容中，然后给出它`width:auto;`。

# html - 在画布中添加文本，如油漆

> ID：10919050
> 
> 赞同：0
> 
> 时间：2012-06-06T17:23:48.223
> 
> 标签：html, text, canvas, html5-canvas

我需要实现一个允许用户向我的 html5 cnavas 添加文本的 html5 应用程序。类似于我们在绘画中所做的方式。用户将能够修改字母的大小，类型..等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:36:21.910

查看此链接，这可能是您需要的：http: [//h4ckcod3r.in/html5app/](http://h4ckcod3r.in/html5app/)

这是我在 html5 画布中制作的第一批东西之一。您可以查看源代码，它是不言自明的。

这是一个简单的绘画应用程序，*您应该也可以对其进行修改以添加文本功能。*

*这样做的逻辑应该是每次用户更改字体、字体大小、类型、文本宽度等时都应该重画画布。我猜你知道`fillText`and`strokeText`选项。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:56:14.010

我建议看一下**[html2Canvas](http://html2canvas.hertzen.com/)**它读取页面（或元素）样式并将它们呈现到画布。它不是 100% 完美，但效果很好。

[查看一些示例](http://html2canvas.hertzen.com/examples.html)，例如[此](http://html2canvas.hertzen.com/tests/text.html)示例（单击以在文本之间循环，并渲染画布），这与您正在尝试执行的操作非常接近。这至少应该让你走上正确的道路。

# python - matplotlibs ginput() 具有未定义的点数

> ID：10919051
> 
> 赞同：5
> 
> 时间：2012-06-06T17:23:49.933
> 
> 标签：python, matplotlib

我需要使用 matplotlib 函数 ginput() 在绘图中定义一个区域。但是，由于它是不规则的形状，并且在每个图中都会有所不同，所以我无法预先定义有多少点，即

```
x = randn(10,10)
imshow(x)
n = I don't know yet
points = ginput(n) 
```

有谁知道该怎么做？？谢谢戴夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T09:58:41.670

从文档中，`help(ginput)`即

> ginput(self, n=1, timeout=30, show_clicks=True, mouse_add=1, mouse_pop=3, mouse_stop=2)
> 
> 阻止调用与图形交互。
> 
> 这将等待用户的*n*次点击并返回每次点击的坐标列表。
> 
> 如果*超时*为零或负数，则不超时。
> 
> 如果*n*为零或负数，则累积单击次数，直到中间单击（或可能同时单击两个鼠标按钮）终止输入。
> 
> 右键单击取消上次输入。
> 
> 用于各种操作（添加点、删除点、终止输入）的按钮可以通过参数 *mouse_add*、*mouse_pop* 和 *mouse_stop* 覆盖，它们给出了相关的鼠标按钮：1 代表左侧，2 代表中间, 3 对。
> 
> 如果您的鼠标没有一个或多个按钮，键盘也可用于选择点。删除键和退格键的作用类似于右键单击（即删除最后一个点），回车键终止输入，任何其他键（窗口管理器尚未使用）选择一个点。

我们可以**设置`n=0`**让 ginput 等待鼠标中键而不是设定的点数。

奖励：设置`timeout=0`阻止 ginput 在默认 30 秒后退出。对于复杂的情节，我觉得这很烦人。

示例代码：

```
import pylab
x = randn(10,10)
imshow(x)
points = ginput(0, 0)
# Select the points defining your region from the
# plot then middle click to terminate ginput. 
```

# javascript - 如何在 for 循环中加入 2 个变量（javascript）

> ID：10919052
> 
> 赞同：0
> 
> 时间：2012-06-06T17:24:05.790
> 
> 标签：javascript, jquery, loops

我试图在一个循环中组合 2 个变量，因为下面的代码显示我需要为每个添加一个数字`var`，但我无法让它工作。这只是脚本的一部分。如您所见，`var item`应该变成`item1`,`item2`等等`item3`。

// 编码

```
for (i=0; i<10; i++){
    var item+' '+i = $('ul').find('.list-item-'+i).text();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T17:27:02.140

我会使用一个数组：

```
var items = []
for (var i=0; i<10; i++){
    items[i] = $('ul').find('.list-item-'+i).text();
} 
```

看到这一点也很重要

```
var item + ' ' + i 
```

是变量的非法声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:27:10.987

分配给在循环*外*声明的数组元素。`for`

[http://www.hunlock.com/blogs/Mastering_Javascript_Arrays](http://www.hunlock.com/blogs/Mastering_Javascript_Arrays)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:29:31.503

你应该使用一个数组：

```
var item=new Array();
for (i=0; i<10; i++){
    item[i] = $('ul').find('.list-item-'+i).text();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:32:27.340

**Chango上面的答案是完美的。**

但是，如果您真的需要将它们存储为 item1, item2, ... 试试这个：

```
var tempArr=[];
var obj={};
for(i=0; i<10;i++) {
  tempArr.push('item'+i);
}
for(i=0; i<10; i++) {
  obj[tempArr[i]]=$('ul').find('.list-item-'+i).text();
} 
```

现在您可以访问 item1 作为 obj.item1 等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T17:33:54.167

根本不需要做一个显式循环。

```
​var items = $("ul li[id^='list-item-']").map(function(i,o){
    return $(o).text();
}).get();​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/vM5Hy/](http://jsfiddle.net/jonathansampson/vM5Hy/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-06T17:31:07.050

我认为如果你想使用像 item1 或 item2 这样的变量，你的代码应该是：

```
var items = [];
for (var i=0; i<10; i++){
    items.push($('ul').find('.list-item-'+i).text());
} 
```

但是在您的情况下，我认为该数组应该更好...

咪咪兹

# android - 使用 API 8 轮播广告视图

> ID：10919053
> 
> 赞同：5
> 
> 时间：2012-06-06T17:24:07.957
> 
> 标签：android, opengl-es, rotation, android-view

我在我的 android 游戏的 RenderSurface 视图中使用 OpenGL。游戏使用横向作为屏幕方向，但我想将广告旋转 90° 放置在手机底部。（就像我使用纵向作为屏幕方向一样）

这是我可以在不使游戏在小屏幕上无法玩的情况下放置广告的唯一方法。我设法做到这一点：

`View.rotate(..)`

问题是这个函数首先在 API 级别 11 中可用。

*   API Level 8 有什么解决方法吗？
*   我已经尝试过旋转动画，但触摸事件未正确传递。（adview 阻止了解决方法）

如果我的游戏只能在 Android 3.0 上玩，我会大大减少我的用户群。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:17:30.150

我想知道你是否不能做这样的事情？对不起，我没有时间测试：/

```
 LinearLayout layout = new LinearLayout(this);

layout.setOrientation(LinearLayout.HORIZONTAL);

addContentView(layout, new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));

RelativeLayout.LayoutParams adParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);    

adView = new AdView(this);

layout.addView(adView, adParams); 
```

由于您可能在 opengl surfaceview 上添加了一个内容视图.... 无论如何，就像我说的那样，没有时间测试它。试一试？

# c# - 如何：在 HTMLselect 列表选项中嵌入 @Ajax.ActionLink？

> ID：10919054
> 
> 赞同：0
> 
> 时间：2012-06-06T17:24:14.350
> 
> 标签：c#, asp.net-mvc-3, razor, asp.net-ajax

我正在尝试`Ajax.ActionLink`在 HTML 选择选项中嵌入如下

```
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"</script>

<select>
    <option>@Ajax.ActionLink("Opiton 1", "MyAction", new { parameter = "parm1" }, 
        new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace,             
        LoadingElementId = "myDiv" })</option>
    <option>@Ajax.ActionLink("Opiton 2", "MyAction", new { parameter = "parm1" }, 
        new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace,             
        LoadingElementId = "myDiv" })</option>
</select>

<div id="myDiv"></div> 
```

动作方法

```
public ActionResult MyAction(string parameter)
{
    ViewModel myViewModel = new ViewModel();

    myViewModel.Parm = parameter;

    if (Request.IsAjaxRequest())
    {
        return PartialView("_MyPartial", myViewModel);
    }
    else
    {
        return View(myViewModel);
    }
} 
```

当我将`Ajax.ActionLink`选择列表放在外部时，它可以正常工作并直接进入 MyAction。当我在选择列表中的选项内嵌入链接时，onlclick 事件无法触发。

如何让 onclick 事件在内部触发`<option></option>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:39:00.473

为什么选择元素内有 2 个操作链接。我猜你想调用一个动作方法并将返回值设置为一个 div。我不会为此使用 Microsoft ajax 库。我会用这样的**干净代码**手动完成。（我只需要在页面中引用 jQuery 库。没有别的）

```
//include only jQuery library. Nothing else ! 

<select id="dropDown1">
   <option value="0"> Select</option>
   <option value="1"> Detroit</option>
   <option value="2"> Florida</option>
</select>

<script type="text/javascript">
 $(function(){
    $("#dropDown1").change(function(){   
       $.get("@Url.Action("MyAction", "MyController")",
                                 { "parameter" : $(this).val()},function(data){
            $("#myDiv").html(data);
        });
    });
 });
</script> 
```

# c# - 运行 PowerShell cmdlet（函数？）的代码，它位于 .ps1 cmdlet（函数？）文件中

> ID：10919055
> 
> 赞同：0
> 
> 时间：2012-06-06T17:24:14.380
> 
> 标签：c#, .net, powershell

我有代码可以从包含大量 PowerShell cmdlet 的 .ps1 文件中运行 PowerShell cmdlet ......当我执行它时，我得到了这个异常：

> 术语“New-BuildCVFromSql”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

```
private void RunPowerShellCommandToBuildCV()
{
    string BigWindow = "";
    string FileNamePopup = "";

    TestPopup(ref BigWindow, ref FileNamePopup);

    string psScriptPath = @"D:\Project Files\CIS3G\Webapp\_Powershell\JcdcCv.psm1";
    string psScript = string.Empty;

    if(File.Exists(psScriptPath))
        psScript = File.ReadAllText(psScriptPath);
    else
        throw new FileNotFoundException("Wrong path for the script file");

    // Init the PowerShell runspace and pipeline - EWB
    Runspace runSpace = RunspaceFactory.CreateRunspace();
    runSpace.Open();

    // Set execution policy - EWB
    RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runSpace);
    runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

    Pipeline pipeline = runSpace.CreatePipeline();

    // I tried loading it both of the ways below and had no joy load the script from the string - EWB
    //pipeline.Commands.AddScript(psScript);

    // Load as file - EWB
    pipeline.Commands.AddScript(psScriptPath, false);

    // Add the outstring command to the pipeline.
    pipeline.Commands.Add("Out-String");

    Command myCommand = new System.Management.Automation.Runspaces.Command("New-BuildCVFromSql");

    CommandParameter SqlOrExcelFile                          = new CommandParameter("SqlOrExcelFile", @"C:\Documents and Settings\Brown.Ericw\My Documents\tempeval.sql");
    CommandParameter Js                                      = new CommandParameter("Js", "JCDC");
    CommandParameter FileName                                = new CommandParameter("FileName", @"Evaluation\EvaluationFormPartialListVM");

    myCommand.Parameters.Add(SqlOrExcelFile);
    myCommand.Parameters.Add(Js);
    myCommand.Parameters.Add(FileName);

    pipeline.Commands.Add(myCommand);

    Collection<PSObject> output = pipeline.Invoke();
    //foreach (PSObject psObject in output)
    //{

    //System.Diagnostics.Debug.WriteLine ("Object name: " + psObject.);
    //}
} 
```

所以显然我没有正确加载这个脚本文件。在 PowerShell ISE/IDE 中，我必须先运行脚本，然后才能执行任何命令。那是我做错了吗？

我只是想将一个界面放在其他人编写的一堆 PowerShell 脚本之上，所以我不能真正更改他/她的脚本文件，因为它们正在其他地方被其他人使用......

在 .ps1 文件中，我试图调用的 cmdlet 是这样定义的：

```
# Create CV Method #

function New-BuildCVFromSql {
  param([Parameter(Mandatory=$true, ValueFromPipelineByPropertyName=$true)]$SqlFile,
        [Parameter(Mandatory=$true, ValueFromPipelineByPropertyName=$true)]$js,
        [Parameter(Mandatory=$true, ValueFromPipelineByPropertyName=$true)]$FileName)

 ... 
```

附录：根据这篇文章，我还尝试使用 PowerShell 而不是管道：

*[从 c# 调用 powershell 函数的问题](https://stackoverflow.com/questions/7294765/problem-with-calling-a-powershell-function-from-c-sharp)*

像这样，但我得到了同样的例外：

```
private void RunPowerShellCommandToBuildCV()
{
    string BigWindow = "";
    string FileNamePopup = "";

    TestPopup(ref BigWindow, ref FileNamePopup);

    string psScriptPath = @"D:\Project Files\CIS3G\Webapp\_Powershell\JcdcCv.psm1";
    string psScript = string.Empty;

    if (File.Exists(psScriptPath))
        psScript = File.ReadAllText(psScriptPath);
    else
        throw new FileNotFoundException("Wrong path for the script file");

    // Init the PowerShell runspace and pipeline - EWB
    using (Runspace runSpace = RunspaceFactory.CreateRunspace())
    {
        runSpace.Open();

        // Set execution policy - EWB
        RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runSpace);
        runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

        //Pipeline pipeline = runSpace.CreatePipeline();

        PowerShell ps = PowerShell.Create();
        ps.Runspace = runSpace;

        // Load as file - EWB
        ps.AddScript(psScriptPath);

        ps.AddCommand("New-BuildCVFromSql").AddParameters(new Dictionary<string, string>()
         {
             {"SqlOrExcelFile", @"C:\tempeval.sql"},
             {"Js", "JCDC"},
             {"FileName", @"Evaluation\EvaluationFormPartialListCV"}
         });

        foreach (PSObject result in ps.Invoke())
        {
            Debug.WriteLine ("Object : " + result);
        }
    } 
```

附录 2：

删除所有命令内容（因为它们仅适用于内置 CmdLets，而不适用于用户定义的函数）并这样做似乎是在调用代码，尽管在运行时没有加载任何依赖项......我仍在调查。

```
ps.AddScript( @"New-BuildCVFromSql 'C:\Documents and Settings\Brown.Ericw\My Documents\tempeval.sql' JCDC 'Evaluation\EvaluationFormPartialListCV'" ); 
```

尽管在运行时没有加载任何依赖项，但它似乎正在调用代码......我仍在调查。但如果它是从 ISE 运行的，它就可以工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:16:01.153

在您的第二个版本中`RunPowerShellCommandToBuildCV()`缺少`ps.invoke()`添加后的脚本：

```
 //load as file - EWB
    ps.AddScript( psScriptPath );
    ps.Invoke(); //<--------- !!!!
    ps.AddCommand( "New-BuildCVFromSql" ).AddParameters(new Dictionary<string, string>()
     {
         { "SqlOrExcelFile", @"C:\tempeval.sql" },
         { "Js", "JCDC" },
         { "FileName", @"Evaluation\EvaluationFormPartialListCV" }
     }); 
```

在知道有一个函数调用`Invoke()`之后`runspace``New-BuildCVFromSql`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T10:09:15.187

我就是这样做的，它很有效：

```
private static void Test()
{
    dynamic parameters = new ExpandoObject();
    parameters.test= "myImage";
    parameters.arg2= 2;

    var results = RunPowerShellFunction("My-Function", parameters);
    var obj = results[0];
    var str = results[1];
}

private static dynamic RunPowerShellFunction(string functionName, dynamic parameters)
{
    dynamic rv = null;

    try
    {
        InitialSessionState iss = InitialSessionState.CreateDefault();

        using (Runspace runspace = RunspaceFactory.CreateRunspace(iss))
        {
            runspace.Name = typeof(DockerManager).Name;
            runspace.Open();

            RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runspace);
            runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

            using (var mainPowerShell = System.Management.Automation.PowerShell.Create())
            {
                mainPowerShell.Runspace = runspace;

                mainPowerShell.AddScript(LoadedScriptText, false);
                mainPowerShell.Invoke();

                var cmd = mainPowerShell.AddCommand(functionName);

                if (parameters != null)
                {
                    foreach (var parameter in parameters)
                    {
                        cmd.AddParameter(parameter.Key, parameter.Value);
                    }
                }

                rv = cmd.Invoke();
            }
        }
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.Message);
    }

    return rv;
} 
```

# facebook - Facebook 应用程序不能仅在 IE9 中显示

> ID：10919056
> 
> 赞同：2
> 
> 时间：2012-06-06T17:24:17.820
> 
> 标签：facebook, facebook-graph-api

我有一个 Facebook 应用程序。问题是它不能在 IE9 中加载（没有用其他版本的 IE 测试）。打开画布页面时显示以下消息：

“此内容不能在框架中显示为了帮助保护您输入本网站的信息的安全性，此内容的发布者不允许它在框架中显示。”

然而，它在 Chrome、FF 和 Safari 中运行良好。

我的画布页面 URL 和页面选项卡 url 很好，正如我所说，它适用于所有其他浏览器。

我知道这个问题含糊不清，但任何帮助将不胜感激。我不能在这里发布我的代码，因为它有很多代码并且有很多它链接到的外部文件。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:41:24.457

您是否在应用程序中使用 PHP？如果是，请将其放在代码顶部：**header('P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"');** 希望有帮助。

# c# - 加载时更改链接上的文本

> ID：10919057
> 
> 赞同：0
> 
> 时间：2012-06-06T17:24:21.457
> 
> 标签：c#, asp.net

我有一个 asp 按钮，在处理时我想要上面的文字.. 怎么能做到这一点？

```
<asp:LinkButton ID="loadImages" runat="server" CssClass="button"
       onclick="loadImages_Click">Load Images</asp:LinkButton> 
```

因此，当我单击时，它会将 Load Images 更改为 Loading...，然后在完成后返回原始状态。

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:30:19.870

[OnClient点击](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.onclientclick.aspx)...

```
<asp:LinkButton OnClientClick="this.innerHTML = 'loading'" ... 
```

页面发回后，文本将恢复为“加载图像”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:29:44.657

*要在用户单击链接时*更改链接的文本，请使用`onclick`JavaScript 事件：

```
window.addEventListener('load', function(){
    var link = document.getElementById('<%=loadImages.ClientID %>');

    link.addEventListener('click', function(){
        this.innerHTML = 'loading ...';
    }, false);
}, false); 
```

此代码段将在向服务器发出请求之前更改链接的文本。服务器响应后，页面将使用响应中新呈现的 HTML 进行刷新。

# android - 我是否需要注销“匿名”广播接收器

> ID：10919060
> 
> 赞同：5
> 
> 时间：2012-06-06T17:24:28.960
> 
> 标签：android, sms, broadcastreceiver, anonymous-inner-class

我最近问了一个关于检查已发送 SMS 状态的问题，给出的答案是一个代码片段，它注册了两个“匿名内部”（如果不正确，请更正我的术语）`BroadcastReceivers`来收听 SMS 发送/传递的广播。这些接收器只需要接收有关我的应用程序刚刚发送的 SMS 的数据，因此不需要永久收听。

我的直接想法是“好吧，在我完成它们后我需要注销它们”，但这是正确的吗？我问了这个海报，因为他没有包含任何注销代码，但没有得到回复。该代码似乎是一种非常标准的方式来做我想做的事情，因为它出现在许多 Android 开发网站上。这里是：

```
//---sends an SMS message to another device---
private void sendSMS(String phoneNumber, String message)
{        
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
```

代码工作正常。

更重要的是，它不会收到在我的应用程序外部发生的任何 SMS 发送/传递事件的通知。例如，我可以在注册后发送短信，`BroadcastReceivers`但看不到任何`Toast`消息。

所以，我有两个问题：

1.  我需要注销这些`BroadcastReceivers`吗？
2.  如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:30:06.220

> 更重要的是，它不会收到在我的应用程序外部发生的任何 SMS 发送/传递事件的通知。

您正在动态注册接收器。如果你想监听其他应用程序的意图，你需要在清单文件中注册你的接收器。这样，它将始终处于活动状态。而且您无需取消注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:28:29.563

只需将您保存`BroadcastReceiver`到一个实例，以便您可以取消注册它;-)

只需将此行更改为：

```
registerReceiver(new BroadcastReceiver(){ 
```

至：

```
BroadcastReceiver smsReceiver=new BroadcastReceiver(){...}
registerReceiver(smsReceiver); 
```

稍后您可以执行以下操作：

```
unregisterReceiver(smsReceiver); 
```

只需记住将 保存`smsReceiver`为班级成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:35:22.827

所以如果我理解你写的正确的话，看起来`BroadcastReceiver`应该只存在于`sendSMS()`调用中，所以即使他们注册了`SENT`or `DELIVERED`Intents，他们可能不会在附近接收它们。另外，我相信您在完成接收器后总是想取消注册，我已经看到调试器警告接收器泄漏。

如果您有 like 的类参数`sent_broadcast_receiver`并且`delivered_broadcast_receiver`包含对您正在注册的接收器的引用，那么它会更好地工作吗，这样对象就会持久存在，并且可以在完成后取消注册。

编辑：无论什么对象持有 BroadcastReceivers`SENT`并且`DELIVERED`应该持续到意图返回，或者 Intents（因为它们是 PendingIntents）应该指向可以被唤醒的东西，如果这是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:27:18.683

您将需要注销。否则，它很可能会崩溃。我对此非常确定。但是，如果您说它没有崩溃，那么，好吧，需要调查一下 :)

因为，Android 会认为您忘记取消注册。它希望您取消注册。“注意：如果在 Activity.onResume() 实现中注册接收器，则应在 Activity.onPause() 中取消注册。（暂停时不会收到意图，这将减少不必要的系统开销）。不要在 Activity.onSaveInstanceState() 中取消注册，因为如果用户移回历史堆栈，则不会调用它。” <===== 来自文档

# jquery - 从 iframe 运行父 jquery

> ID：10919073
> 
> 赞同：2
> 
> 时间：2012-06-06T17:25:28.103
> 
> 标签：jquery, class, iframe, click, title

我希望iframe中名为“test”的类可以在父级中运行jquery代码，我尝试了以下，它不起作用

家长：

```
$("#listing").$(".test").click(function() {
  alert($(this).attr('title'));
  return false;
}); 
```

iframe <iframe id="listing"> ：

```
<a href="/89" title="hello" class="test">Click</a>
<a href="/90" title="hello2" class="test">Click</a> 
```

我应该怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:32:46.163

尝试这个：

```
$("#listing").find(".test").click(function() {
  alert($(this).attr('title'));
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:31:50.577

您可以使用 contentWindow.document 访问 iframe 文档。

```
$(document.getElementById('listing').contentWindow.document).find('.test').click(function(){...});

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:40:04.690

除了其他用途外，contents() 方法还允许访问一个内容文档（[当然](http://api.jquery.com/contents/)`<iframe>`，前提是它与父级来自同一个域，因为同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)）：

```
$("#listing").contents().find(".test").click(function() {
    alert($(this).attr("title"));
    return false;
}); 
```

# iphone - 第一个pdf页面ios sdk的图像

> ID：10919075
> 
> 赞同：8
> 
> 时间：2012-06-06T17:25:29.960
> 
> 标签：iphone, objective-c, ios, pdf, uiimage

你知道如何将 pdf 文件的第一页保存到 UIImageView 中吗？我必须为 pdf 创建预览。你有什么主意吗？

谢谢你的帮助尼科

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T20:55:31.527

以下方法将从 PDF 文件构建缩略图。它支持 RetinaDisplay，因此缩略图在此类设备上应该特别清晰。

```
- (UIImage *)buildThumbnailImage
{
  BOOL hasRetinaDisplay = FALSE;  // by default
  CGFloat pixelsPerPoint = 1.0;  // by default (pixelsPerPoint is just the "scale" property of the screen)

  if ([UIScreen instancesRespondToSelector:@selector(scale)])  // the "scale" property is only present in iOS 4.0 and later
  {
    // we are running iOS 4.0 or later, so we may be on a Retina display;  we need to check further...
    if ((pixelsPerPoint = [[UIScreen mainScreen] scale]) == 1.0)
      hasRetinaDisplay = FALSE;
    else
      hasRetinaDisplay = TRUE;
  }
  else
  {
    // we are NOT running iOS 4.0 or later, so we can be sure that we are NOT on a Retina display
    pixelsPerPoint = 1.0;
    hasRetinaDisplay = FALSE;
  }

  size_t imageWidth = 320;  // width of thumbnail in points
  size_t imageHeight = 460;  // height of thumbnail in points

  if (hasRetinaDisplay)
  {
    imageWidth *= pixelsPerPoint;
    imageHeight *= pixelsPerPoint;
  }

  size_t bytesPerPixel = 4;  // RGBA
  size_t bitsPerComponent = 8;
  size_t bytesPerRow = bytesPerPixel * imageWidth;

  void *bitmapData = malloc(imageWidth * imageHeight * bytesPerPixel);

  // in the event that we were unable to mallocate the heap memory for the bitmap,
  // we just abort and preemptively return nil:
  if (bitmapData == NULL)
    return nil;

  // remember to zero the buffer before handing it off to the bitmap context:
  bzero(bitmapData, imageWidth * imageHeight * bytesPerPixel);

  CGContextRef theContext = CGBitmapContextCreate(bitmapData, imageWidth, imageHeight, bitsPerComponent, bytesPerRow,
                                                  CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);

  CGPDFDocumentRef pdfDocument = MyGetPDFDocumentRef();  // NOTE: you will need to modify this line to supply the CGPDFDocumentRef for your file here...
  CGPDFPageRef pdfPage = CGPDFDocumentGetPage(pdfDocument, 1);  // get the first page for your thumbnail

  CGAffineTransform shrinkingTransform =
    CGPDFPageGetDrawingTransform(pdfPage, kCGPDFMediaBox, CGRectMake(0, 0, imageWidth, imageHeight), 0, YES);

  CGContextConcatCTM(theContext, shrinkingTransform);

  CGContextDrawPDFPage(theContext, pdfPage);  // draw the pdfPage into the bitmap context
  CGPDFDocumentRelease(pdfDocument);

  //
  // create the CGImageRef (and thence the UIImage) from the context (with its bitmap of the pdf page):
  //
  CGImageRef theCGImageRef = CGBitmapContextCreateImage(theContext);
  free(CGBitmapContextGetData(theContext));  // this frees the bitmapData we malloc'ed earlier
  CGContextRelease(theContext);

  UIImage *theUIImage;

  // CAUTION: the method imageWithCGImage:scale:orientation: only exists on iOS 4.0 or later!!!
  if ([UIImage respondsToSelector:@selector(imageWithCGImage:scale:orientation:)])
  {
    theUIImage = [UIImage imageWithCGImage:theCGImageRef scale:pixelsPerPoint orientation:UIImageOrientationUp];
  }
  else
  {
    theUIImage = [UIImage imageWithCGImage:theCGImageRef];
  }

  CFRelease(theCGImageRef);
  return theUIImage;
} 
```

您将需要提供与您的 PDF 文件相对应的 CGPDFDocumentRef，如下所示。（这个假设文件 test.pdf 存在于您的应用程序的主包中。）

```
CGPDFDocumentRef MyGetPDFDocumentRef()
{
  NSString *inputPDFFile = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"test.pdf"];
  const char *inputPDFFileAsCString = [inputPDFFile cStringUsingEncoding:NSASCIIStringEncoding];
  //NSLog(@"expecting pdf file to exist at this pathname: \"%s\"", inputPDFFileAsCString);

  CFStringRef path = CFStringCreateWithCString(NULL, inputPDFFileAsCString, kCFStringEncodingUTF8);

  CFURLRef url = CFURLCreateWithFileSystemPath(NULL, path, kCFURLPOSIXPathStyle, 0);
  CFRelease (path);

  CGPDFDocumentRef document = CGPDFDocumentCreateWithURL(url);
  CFRelease(url);

  if (CGPDFDocumentGetNumberOfPages(document) == 0)
  {
    printf("Warning: No pages in pdf file \"%s\" or pdf file does not exist at this path\n", inputPDFFileAsCString);
    return NULL;
  }

  return document;
} 
```

最后，您可以在 UIImageView 中显示缩略图，如下所示：

```
 UIImageView *thumbnailImageView = [[UIImageView alloc] initWithImage:[self buildThumbnailImage]];

  [self.view addSubview:thumbnailImageView]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T00:51:15.360

作为我正在进行的项目的一部分，我修改了 inwit 的代码，以便在他们的调用中与变量一起使用。我想我会把它们贴在这里来帮助任何正在寻找类似解决方案的人：

打电话给他们：

```
//Assume all your PDFs you want to create thumbnails for are in an array. This method saves the paths to all PDFs in your main bundle as NSStrings.
_pdfs = [[NSBundle mainBundle] pathsForResourcesOfType:@"pdf" inDirectory:nil];

//To be called in the cellForItemAtIndexPath method or a similar method where you want to create a thumbnail for the image:
NSString *loc = [_pdfs objectAtIndex:indexPath.row];    
UIImage *cellImage = [self buildThumbnailImage:MyGetPDFDocumentRef(loc)]; 
```

方法和C函数：

```
- (UIImage *)buildThumbnailImage:(CGPDFDocumentRef)pdfDocument
{
    BOOL hasRetinaDisplay = FALSE;  // by default
    CGFloat pixelsPerPoint = 1.0;  // by default (pixelsPerPoint is just the "scale" property of the screen)

    if ([UIScreen instancesRespondToSelector:@selector(scale)])  // the "scale" property is only present in iOS 4.0 and later
    {
        // we are running iOS 4.0 or later, so we may be on a Retina display;  we need to check further...
        if ((pixelsPerPoint = [[UIScreen mainScreen] scale]) == 1.0)
            hasRetinaDisplay = FALSE;
        else
            hasRetinaDisplay = TRUE;
    }
    else
    {
        // we are NOT running iOS 4.0 or later, so we can be sure that we are NOT on a Retina display
        pixelsPerPoint = 1.0;
        hasRetinaDisplay = FALSE;
    }

    size_t imageWidth = 320;  // width of thumbnail in points
    size_t imageHeight = 460;  // height of thumbnail in points

    if (hasRetinaDisplay)
    {
        imageWidth *= pixelsPerPoint;
        imageHeight *= pixelsPerPoint;
    }

    size_t bytesPerPixel = 4;  // RGBA
    size_t bitsPerComponent = 8;
    size_t bytesPerRow = bytesPerPixel * imageWidth;

    void *bitmapData = malloc(imageWidth * imageHeight * bytesPerPixel);

    // in the event that we were unable to mallocate the heap memory for the bitmap,
    // we just abort and preemptively return nil:
    if (bitmapData == NULL)
        return nil;

    // remember to zero the buffer before handing it off to the bitmap context:
    bzero(bitmapData, imageWidth * imageHeight * bytesPerPixel);

    CGContextRef theContext = CGBitmapContextCreate(bitmapData, imageWidth, imageHeight, bitsPerComponent, bytesPerRow,
                                                    CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);

    //CGPDFDocumentRef pdfDocument = MyGetPDFDocumentRef();  // NOTE: you will need to modify this line to supply the CGPDFDocumentRef for your file here...
    CGPDFPageRef pdfPage = CGPDFDocumentGetPage(pdfDocument, 1);  // get the first page for your thumbnail

    CGAffineTransform shrinkingTransform =
    CGPDFPageGetDrawingTransform(pdfPage, kCGPDFMediaBox, CGRectMake(0, 0, imageWidth, imageHeight), 0, YES);

    CGContextConcatCTM(theContext, shrinkingTransform);

    CGContextDrawPDFPage(theContext, pdfPage);  // draw the pdfPage into the bitmap context
    CGPDFDocumentRelease(pdfDocument);

    //
    // create the CGImageRef (and thence the UIImage) from the context (with its bitmap of the pdf page):
    //
    CGImageRef theCGImageRef = CGBitmapContextCreateImage(theContext);
    free(CGBitmapContextGetData(theContext));  // this frees the bitmapData we malloc'ed earlier
    CGContextRelease(theContext);

    UIImage *theUIImage;

    // CAUTION: the method imageWithCGImage:scale:orientation: only exists on iOS 4.0 or later!!!
    if ([UIImage respondsToSelector:@selector(imageWithCGImage:scale:orientation:)])
    {
        theUIImage = [UIImage imageWithCGImage:theCGImageRef scale:pixelsPerPoint orientation:UIImageOrientationUp];
    }
    else
    {
        theUIImage = [UIImage imageWithCGImage:theCGImageRef];
    }

    CFRelease(theCGImageRef);
    return theUIImage;
}

CGPDFDocumentRef MyGetPDFDocumentRef(NSString *inputPDFFile)
{
    //NSString *inputPDFFile = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"test.pdf"];

    const char *inputPDFFileAsCString = [inputPDFFile cStringUsingEncoding:NSASCIIStringEncoding];
    //NSLog(@"expecting pdf file to exist at this pathname: \"%s\"", inputPDFFileAsCString);

    CFStringRef path = CFStringCreateWithCString(NULL, inputPDFFileAsCString, kCFStringEncodingUTF8);

    CFURLRef url = CFURLCreateWithFileSystemPath(NULL, path, kCFURLPOSIXPathStyle, 0);
    CFRelease (path);

    CGPDFDocumentRef document = CGPDFDocumentCreateWithURL(url);
    CFRelease(url);

    if (CGPDFDocumentGetNumberOfPages(document) == 0)
    {
        printf("Warning: No pages in pdf file \"%s\" or pdf file does not exist at this path\n", inputPDFFileAsCString);
        return NULL;
    }

    return document;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:38:27.437

这是你要找的吗？- [http://ipdfdev.com/2011/03/28/convert-a-pdf-page-to-image-on-the-iphone-and-ipad/](http://ipdfdev.com/2011/03/28/convert-a-pdf-page-to-image-on-the-iphone-and-ipad/)。输出是一个 UIImage，所以你应该能够在你的 UIImageView 中显示它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:38:46.253

UIViews的截图有以下几种方式：

看这里 [http://www.icodeblog.com/2009/07/27/1188/](http://www.icodeblog.com/2009/07/27/1188/)

另请参阅此处： [如何截取 UIView 的屏幕截图？](https://stackoverflow.com/questions/2214957/how-do-i-take-a-screen-shot-of-a-uiview)

这可能是 hacky，但您可以在 UIWebview 中打开 PDF，使用上面指向 UIImageView 的链接之一中的代码截取第一页的屏幕截图。然后关闭 PDF。

# ruby-on-rails - 开发和生产的路由不一致 - Heroku Prod Env

> ID：10919080
> 
> 赞同：1
> 
> 时间：2012-06-06T17:25:40.597
> 
> 标签：ruby-on-rails, ruby, heroku, routes

我有一个奇怪的路由错误。在开发模式下，一切都很好，世界在一个快乐的地方。但是，一旦我在 Heroku 上推出开发，我就会遇到一些在 Dev 中不会发生的奇怪的路由错误。我将选择最简单/最容易解释的一个在此处显示：

我有部分搜索字段，在我的“登录”会话状态中无处不在。我可以导航到其他页面，使用搜索 - 没问题。当我尝试解决我的“编辑用户”页面时，事情就中断了。以下使我相信问题出在我的搜索字段（heroku 日志）上：

```
2012-06-06T03:12:39+00:00 app[web.1]: Started GET "/profile/edit" for 216.231.38.147 at 2012-06-06 03:12:39 +0000
2012-06-06T03:12:39+00:00 app[web.1]: Processing by Users::RegistrationsController#edit as HTML
2012-06-06T03:12:39+00:00 app[web.1]:   Rendered users/registrations/edit.html.erb within layouts/application (6.7ms)
2012-06-06T03:12:39+00:00 app[web.1]:   Rendered shared/navbar/_signed_in_menu.html.erb (7.0ms)
2012-06-06T03:12:39+00:00 app[web.1]:   Rendered shared/navbar/_search_form.html.erb (59.1ms)
2012-06-06T03:12:39+00:00 app[web.1]:   Rendered layouts/_header.html.erb (67.7ms)
2012-06-06T03:12:39+00:00 app[web.1]: Completed 500 Internal Server Error in 84ms
2012-06-06T03:12:39+00:00 app[web.1]: 
**2012-06-06T03:12:39+00:00 app[web.1]: ActionController::RoutingError (No route matches {:controller=>"users/search", :action=>"search", :method=>"get", :class=>"navbar-search pull-right"}):**
2012-06-06T03:12:39+00:00 app[web.1]:   app/views/shared/navbar/_search_form.html.erb:2:in `_app_views_shared_navbar__search_form_html_erb__1180266451204086_22567500'
2012-06-06T03:12:39+00:00 app[web.1]:   app/views/layouts/_header.html.erb:8:in `_app_views_layouts__header_html_erb___173307722190207566_23782400'
2012-06-06T03:12:39+00:00 app[web.1]:   app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb__3823486473802009434_37056680'
2012-06-06T03:12:39+00:00 app[web.1]:   app/controllers/users/registrations_controller.rb:15:in `edit' 
```

问题是这一行（我认为）：

```
ActionController::RoutingError (No route matches {:controller=>"users/search", :action=>"search", :method=>"get", :class=>"navbar-search pull-right"}): 
```

有趣的是，错误中指定的控制器不是我对该部分的代码，这就是我的部分：

```
<div class = 'navbar-search pull-right'>
 <%= form_tag controller: 'search', action: 'search', method: 'get', class: 'navbar-search pull-right' do %>
  <div class="sign-in-fields-home">
    <%= text_field_tag :search_query, nil, class: 'span4 search-query', placeholder: 'Search' %>
    <%= submit_tag "Search", class: "submit navbar nav li a", type: 'hidden' %>
  </div>
 <% end %>
</div> 
```

这是我的路线：

```
Mercado::Application.routes.draw do

  match '/profile' => "users#show", as: :user_root
  match "/profile" => "users#show" #To show singular resources
  match '/search' => 'search#search' #to search resources

  root :to => 'static_pages#home' 

  resources :users do
    member do 
      get :followers, :following
    end
    resources :profilepictures, only: [ :index, :edit ]
  end    
  resources :profilepictures, only: [ :create, :destroy, :update ]
  resources :microposts, only: [ :create, :destroy ]
  resources :relationships, only: [ :create, :destroy ]  

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'

  devise_scope :user do
    get '/signup' => 'users/registrations#new'
    get '/signin' => 'devise/sessions#new'
    delete '/signout' => 'devise/sessions#destroy'
    get "/profile/edit" => 'users/registrations#edit' #to edit within the 'profile'
  end

  devise_for :users, :controllers => { :registrations => "users/registrations" } 
```

这是我的 Heroku Run Rake Routes 的片段（相关部分）：

```
 user_root        /profile(.:format)                                 users#show
             profile        /profile(.:format)                                 users#show
              search        /search(.:format)                                  search#search
              new_user_registration GET    /users/sign_up(.:format)                           users/registrations#new 
```

我应该提到我已经制作了覆盖 Gem 控制器的自定义设计控制器。编辑页面（发生此错误的地方）在该页面上有表单。

我尝试上下移动我的路线命令并重新启动heroku

任何帮助，将不胜感激！！！

# java - Gson：序列化瞬态字段？

> ID：10919081
> 
> 赞同：4
> 
> 时间：2012-06-06T17:25:40.683
> 
> 标签：java, gson

无论如何要序列化一个类的瞬态字段吗？文档中提到默认情况下不支持它，但可能有办法打开它？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T17:29:47.350

我不是 Gson 专家，但我认为您可以添加注释

```
@com.google.gson.annotations.Expose 
```

[此处的 javadocs - 请注意，您还必须做一些其他事情](http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/annotations/Expose.html)

或者，您可以致电

```
GsonBuilder.excludeFieldsWithModifiers(int... modifiers) 
```

并省略瞬态标志。[在此文档](https://sites.google.com/site/gson/gson-user-guide)中搜索“Java Modifier Excleusion”（或瞬态）

然而，正如 Dave 和 Louis 评论的那样，序列化瞬态字段是不寻常的。

# qt - 使用 GYP 而不是 QMake 构建 MOC 文件？

> ID：10919082
> 
> 赞同：3
> 
> 时间：2012-06-06T17:25:41.930
> 
> 标签：qt, gyp

通过从 QMake 中删除 moc 生成步骤，我不再需要依赖 QtCreator。目前，我正在使用自定义脚本来生成/更新 Qt moc 文件，然后再通过 Eclipse 中的 GYP 生成 makefile。有谁知道如何将 moc 作为构建规则添加到 GYP，以便我可以巩固这一步？

目前，我将脚本作为每次运行的 Eclipse 内部的构建规则，但我想通过让 GYP 生成一个 makefile 来避免这种方法，该文件已经像 QMake 那样在其中包含 moc 规则。

感兴趣的链接：

参考使用 GYP 开发 Qt： [https ://groups.google.com/group/gyp-developer/browse_thread/thread/42cfb9902b86d715/b17701d9a6805671?show_docid=b17701d9a6805671](https://groups.google.com/group/gyp-developer/browse_thread/thread/42cfb9902b86d715/b17701d9a6805671?show_docid=b17701d9a6805671)

GYP 主页： [http ://code.google.com/p/gyp/](http://code.google.com/p/gyp/)

QMake 主页：http: [//qt-project.org/doc/qt-4.8/qmake-manual.html](http://qt-project.org/doc/qt-4.8/qmake-manual.html)

我当前的 moc 脚本：

```
#!/bin/bash
MOC="/path/to/Qt/4.8.1/gcc/bin/moc"
SRC_DIR="/path/to/project"

$MOC $SRC_DIR/SkDebuggerUI.h -o $SRC_DIR/moc_SkDebuggerUI.cpp
$MOC $SRC_DIR/SkQtWidget.h -o $SRC_DIR/moc_SkQtWidget.cpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-27T17:12:09.573

我有完全相同的问题。我没有在 moc 脚本中包含单独的步骤，而是在我的 .gyp 文件中添加了以下几行。

```
'conditions': [
    ['OS=="linux"': {
        'sources': [
            'your other source code files',
            '<!(moc numerickeypad.h -o moc_numerickeypad.cpp && echo moc_numerickeypad.cpp)',
        ],
    }],
], 
```

我没有在其他操作系统上尝试过，但我认为您可以在其他系统上进行类似的操作。让我知道，如果你有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-25T00:46:38.097

我刚刚经历了这个，虽然它并不完美，但它是可行的。我做了以下事情：

*   为生成 mocs 制作了一个单独的“目标”
*   如果该目标只有我们想要运行 moc 的 .h 文件作为“源”
*   将生成的 .cpp 文件公开为 direct_dependent_settings，因此它们的源代码在依赖目标中编译
*   构建一个“规则”以在“源”列表中的每个头文件上运行 moc。
*   让我的可执行文件依赖于那个目标

它看起来像这样：

```
'targets':
[
{
    'target_name': 'editor_generate_mocs',
    'type': 'none',
    'sources': 
        [
            'src/editorwindow.h',
        ],

    'direct_dependent_settings':
        {
            'sources':
            [
                '<(SHARED_INTERMEDIATE_DIR)/editorwindow_moc.cpp',
            ]
        },
    'rules':
        [
            {
                'rule_name': 'generate_qt_mocs_rule',
                'extension': '.h',
                'msvs_cygwin_shell' : 0, # Don't run cygwin set_env to run a command.
                'inputs':
                    [
                        '>(qt_dir)/bin/moc.exe',
                    ],
                'outputs':
                    [
                        '<(SHARED_INTERMEDIATE_DIR)/<(RULE_INPUT_ROOT)_moc.cpp',
                    ],
                'action':
                    [
                        '>(qt_dir)/bin/moc.exe',
                        '--compiler-flavor', 'msvc',
                        '<(RULE_INPUT_PATH)',
                        '-o', '<(SHARED_INTERMEDIATE_DIR)/<(RULE_INPUT_ROOT)_moc.cpp'
                    ],
                'message': '<(SHARED_INTERMEDIATE_DIR)/<(RULE_INPUT_ROOT)_moc.cpp'
            }
        ]
    },
# ..., rest of my targets
}
] 
```

# .net - 获取gridview的单元格值

> ID：10919085
> 
> 赞同：0
> 
> 时间：2012-06-06T17:25:55.343
> 
> 标签：.net, gridview

我想从gridview获取单元格值，但返回空字符串。我在radiobuttonlist的selectedindexchanged事件中实现了所有代码。我遍历gridview
并按代码访问单元格。但问题仍然存在。我使用了三个itemtemplate，每个
都有一个elemnt 以便每个元素都有自己的库 **.aspx**

```
 <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="false" >

       <Columns> 
```

```
 <asp:Label ID="Label2" runat="server" Text='<%# Eval("qno") %>'>

   </asp:Label>
       </ItemTemplate>
  </asp:TemplateField>
  <asp:TemplateField>
  <ItemTemplate>
            <asp:Label ID="Label3" runat="server" Text='<%# Eval("description") 
```

%>'>

```
 </ItemTemplate>
  </asp:TemplateField> 
```

```
 <asp:RadioButtonList ID="RadioButtonList1" RepeatDirection="Horizontal" 
   runat="server" OnSelectedIndexChanged="changed"  AutoPostBack="true" >

     <asp:ListItem   Value="agree" Selected="True" >

     </asp:ListItem>
       <asp:ListItem 
        Value="disagree">

     </asp:ListItem>
       <asp:ListItem Value="strongagree">

     </asp:ListItem>
       <asp:ListItem Value="strondisagree">

     </asp:ListItem>
        </asp:RadioButtonList> 
```

```
 </Columns>

   </asp:GridView>

 <asp:Label ID="Labe11" runat="server" ></asp:Label> 
```

**隐藏代码：** public void changed(object sender, EventArgs e) {

```
 for(int i=0;i<GridView2.Rows.Count;i++)
      {
          string labtext;
            RadioButtonList list = 
    GridView2.Rows[i].Cells[2].FindControl("RadioButtonList1") as RadioButtonList;
           labtext= GridView2.Rows[i].Cells[0].Text;

           Label1.Text = labtext;

      }

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:37:29.567

我认为您正在寻找 gridview 的 RowUpdating 事件。下面的代码来自我几年前从事的一个项目，我必须从网格视图中的组合框中获取值。希望这将使您更接近解决方案。

```
 protected void gvReconciliation_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
         DropDownList dropDownListUser = gvReconciliation.Rows[e.RowIndex].FindControl("ddlSourceEdit") as DropDownList;
         e.NewValues["source"] = dropDownListUser.SelectedItem.Text;
    } 
```

我的控件被绑定到一个对象数据源，所以这就是为什么你`e.NewValues["source"]`在那里看到的。“Source”是我的 ObjectDataSource 中的绑定列名。

# asp.net - asp.net 本地化资源显式本地化不加载本地化文件

> ID：10919087
> 
> 赞同：0
> 
> 时间：2012-06-06T17:25:59.537
> 
> 标签：asp.net, .net, localization, resources, explicit

当存在具有相同名称但具有后缀语言国家的文件时，用于不同文化的 asp.net 资源会加载，例如法国的 fr-FR。

使用本教程创建具有显式本地化的本地化资源：

[http://msdn.microsoft.com/en-us/library/fw69ke6f(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/fw69ke6f(v=vs.80).aspx)

但它不会加载本地化资源（加载全局资源文件，即没有文化名称的文件）。我将区域设置设置为 fr（我在葡萄牙尝试的本地化文化），将区域设置中的本地化设置为法国，检查 fr-FR 语言是否位于 IE9 浏览器语言之上（在 Internet 选项上） ，重新编译应用程序，清理文件夹 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files，还是不行。

还尝试将 fr 文件放入名为 fr 的子目录中，并仅使用 fr-FR 而不是 fr。

为什么 fr 资源没有加载？也许我必须更改主文件名（.net 如何知道主资源文件文件名是什么）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:27:59.993

我不知道您使用的是哪个版本的 IIS，但在 7 中您必须明确打开基于客户端的文化，如此[处](http://technet.microsoft.com/en-us/library/cc771836%28v=ws.10%29.aspx)详述。这会将以下行添加到您的 web.config

```
<system.web>
    <globalization enableClientBasedCulture="true" />
</system.web> 
```

本文进一步[说明](http://www.codeproject.com/Articles/15313/Globalization-and-localization-demystified-in-ASP)，您还需要另外设置这些值：

```
<system.web>
    <globalization culture="auto" uiculture="auto" enableClientBasedCulture="true" />
</system.web> 
```

# ruby-on-rails - 在运行时禁用 mail_safe

> ID：10919090
> 
> 赞同：1
> 
> 时间：2012-06-06T17:26:03.903
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twilio

我正在使用 ActionMailer 向用户发送短信。我通过编写自己的`DeliveryMethod`. 在我的内部`DilveryMethod`，我实现了该`deliver!`方法并调用 Twilio API 来发送 SMS。目前，在开发中，所有电子邮件都被禁止，并且在暂存阶段，所有电子邮件都发送到一个电子邮件地址。这对 SMS 来说是有问题的，因为它不是电子邮件；它不会作为电子邮件发送。我想知道是否有办法在运行时关闭 mail_safe 并让我`ActionMailer`做它应该做的事情 =)

# c# - 带有通配符过滤的绝对路径

> ID：10919092
> 
> 赞同：4
> 
> 时间：2012-06-06T17:26:12.910
> 
> 标签：c#, .net, wildcard

我有一个字符串列表，其中包含出于操作目的应忽略的文件。所以我很好奇如何处理有外卡的情况。

例如，我的字符串列表中可能的输入是：

```
C:\Windows\System32\bootres.dll
C:\Windows\System32\*.dll 
```

我认为第一个例子很容易处理，我可以做一个字符串等于检查（忽略大小写）来查看文件是否匹配。但是我不确定如何确定给定文件是否可以匹配列表中的通配符表达式。

关于我正在做的事情的一点背景。允许用户将文件复制到/从某个位置复制，但是，如果该文件与我的字符串列表中的任何文件匹配，我不想允许复制。

可能有更好的方法来处理这个问题。

我要排除的文件是从配置文件中读入的，我收到了试图复制的路径的字符串值。似乎我拥有完成任务所需的所有信息，这只是最佳方法的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:35:16.083

```
IEnumerable<string> userFiles = Directory.EnumerateFiles(path, userFilter);

// a combination of any files from any source, e.g.:
IEnumerable<string> yourFiles = Directory.EnumerateFiles(path, yourFilter);
// or new string[] { path1, path2, etc. };

IEnumerable<string> result = userFiles.Except(yourFiles); 
```

* * *

解析分号分隔的字符串：

```
string input = @"c:\path1\*.dll;d:\path2\file.ext";

var result = input.Split(";")
                  //.Select(path => path.Trim())
                  .Select(path => new
                  {
                      Path = Path.GetFullPath(path), //  c:\path1
                      Filter = Path.GetFileName(path) // *.dll
                  })
                  .SelectMany(x => Directory.EnumerateFiles(x.Path, x.Filter)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:30:44.153

~~您可以使用`Directory.GetFiles()`并使用路径的文件名来查看是否有任何匹配的文件：~~

 ~~```
string[] filters = ...
return filters.Any(f => 
    Directory.GetFiles(Path.GetDirectoryName(f), Path.GetFileName(f)).Length > 0); 
```~~  ~~**更新：**
我确实完全错了。您有一组包含通配符的文件过滤器，并希望根据这些过滤器检查用户输入。您可以[在评论中使用@hometoast](https://stackoverflow.com/questions/188892/glob-pattern-matching-in-net)提供的解决方案：

```
// Configured filter:
string[] fileFilters = new [] 
{ 
  @"C:\Windows\System32\bootres.dll", 
  @":\Windows\System32\*.dll" 
}

// Construct corresponding regular expression. Note Regex.Escape!
RegexOptions options = RegexOptions.Singleline | RegexOptions.Compiled | RegexOptions.IgnoreCase;

Regex[] patterns = fileFilters
  .Select(f => new Regex("^" + Regex.Escape(f).Replace("\\*", ".*") + "$", options))
  .ToArray(); 

// Match against user input:
string userInput = @"c:\foo\bar\boo.far";
if (patterns.Any(p => p.IsMatch(userInput)))
{ 
  // user input matches one of configured filters
} 
```~~

# android - 当我打开我的网址时，强制我的应用程序使用市场应用程序

> ID：10919093
> 
> 赞同：0
> 
> 时间：2012-06-06T17:26:14.447
> 
> 标签：android, google-play

我有一个按钮，必须午餐下载应用程序。当我单击按钮时，android 询问我如何使用浏览器或市场打开链接。我可以强制它使用市场应用程序使其不提示吗？

这是我的代码：

```
String url = "https://play.google.com/store/apps/details?id=org.scid.android";

Intent i = new Intent(Intent.ACTION_VIEW);

i.setData(Uri.parse(url));

startActivity(i); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:33:03.280

使用[Android 开发者文档](http://developer.android.com/guide/publishing/publishing.html#marketintent)`market://`中的URL 语法：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=org.scid.android"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:29:12.147

不，你不能，非常准确。您可以尝试获取 Android Market 应用程序的 Activity 名称，但这并不是一个可靠的方法。

这些是隐含的意图，并且由于数据类型是 URL，很明显您将看到一个选项对话框。

# php - 动态填充多维数组

> ID：10919096
> 
> 赞同：1
> 
> 时间：2012-06-06T17:26:24.333
> 
> 标签：php, dynamic, multidimensional-array

全部，

我有以下数组和函数，它将根据您指定的数组键创建一个多维数组。对于传递给函数的每个属性，它都会向数组添加另一个维度。将其视为数组排序。

提供的函数很好用，但它使用 eval，我很难想出一个一致的函数，没有它就不会出错。

让我们从一个数组开始：

```
$array = array(
          array(‘name’ => ‘Person1’, ‘username’ => ‘username1’, ‘join_date’ => 12233445566, ‘state’ => ‘NJ’),
          array(‘name’ => ‘Person2’, ‘username’ => ‘username2’, ‘join_date’ => 12233445566, ‘state’ => ‘NJ’),
          array(‘name’ => ‘Person3’, ‘username’ => ‘username3’, ‘join_date’ => 12233445996, ‘state’ => ‘NY’),
          array(‘name’ => ‘Person4’, ‘username’ => ‘username4’, ‘join_date’ => 12233445996, ‘state’ => ‘NJ’),
          array(‘name’ => ‘Person5’, ‘username’ => ‘username5’, ‘join_date’ => 12233445566, ‘state’ => ‘NJ’),
          array(‘name’ => ‘Person6’, ‘username’ => ‘username6’, ‘join_date’ => 12233445566, ‘state’ => ‘NY’),
          array(‘name’ => ‘Person7’, ‘username’ => ‘username7’, ‘join_date’ => 12233445776, ‘state’ => ‘NY’),
          array(‘name’ => ‘Person8’, ‘username’ => ‘username8’, ‘join_date’ => 12233445566, ‘state’ => ‘NY’),
          array(‘name’ => ‘Person9’, ‘username’ => ‘username9’, ‘join_date’ => 12233445996, ‘state’ => ‘NJ’),
); 
```

这是一个示例函数：

```
function createIndex($array, $index){
   $index_array = array();

   foreach($array as $result){

          if(is_array($index)){
                 $key = '$index_array';
                 for($i=0;$i<=sizeof($index)-1;$i++){
                       $key .= "['{$result[$index[$i]]}']";
                 }
                 $key .= "[]"; 
                 eval("$key = \$result;");
          }
          else{
                 $index_array[$result[$index]] = $result; 
          }
   }

   return $index_array;
} 
```

调用函数：

```
print_r(create_index($array, array(‘state’, ‘join_date’))); 
```

所需的输出：

```
Array
(
[NJ] => Array
    (
        [12233445566] => Array
            (
                [0] => Array
                    (
                        [name] => Person1
                        [username] => username1
                        [join_date] => 12233445566
                        [state] => NJ
                    )

                [1] => Array
                    (
                        [name] => Person2
                        [username] => username2
                        [join_date] => 12233445566
                        [state] => NJ
                    )

                [2] => Array
                    (
                        [name] => Person5
                        [username] => username5
                        [join_date] => 12233445566
                        [state] => NJ
                    )

            )

        [12233445996] => Array
            (
                [0] => Array
                    (
                        [name] => Person4
                        [username] => username4
                        [join_date] => 12233445996
                        [state] => NJ
                    )

                [1] => Array
                    (
                        [name] => Person9
                        [username] => username9
                        [join_date] => 12233445996
                        [state] => NJ
                    )

            )

    )

[NY] => Array
    (
        [12233445996] => Array
            (
                [0] => Array
                    (
                        [name] => Person3
                        [username] => username3
                        [join_date] => 12233445996
                        [state] => NY
                    )

            )

        [12233445566] => Array
            (
                [0] => Array
                    (
                        [name] => Person6
                        [username] => username6
                        [join_date] => 12233445566
                        [state] => NY
                    )

                [1] => Array
                    (
                        [name] => Person8
                        [username] => username8
                        [join_date] => 12233445566
                        [state] => NY
                    )

            )

        [12233445776] => Array
            (
                [0] => Array
                    (
                        [name] => Person7
                        [username] => username7
                        [join_date] => 12233445776
                        [state] => NY
                    )

            )

    )

) 
```

问题：有什么方法可以克服上述问题以从相同的数组中获得相同的结果？我很好奇其他人会怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:03:01.990

这就是我要做的。还要注意如何通过引用传入 $index_array。我个人在我的代码中使用它，因此我可以批量处理大量数据并偶尔取消设置数据。

这都是关于通过引用存储变量的：

```
function create_index($array, $indexes, &$index_array = array()) {
    if(!is_array($indexes)) $indexes = array($indexes);

    foreach($array as $result) {
        $object = &$index_array;

        foreach($indexes as $index){
            if(!array_key_exists((string)$result[$index], $object)) {
                $object[(string)$result[$index]] = array();
            }
            $object = &$object[(string)$result[$index]];
        }
        $object[] = $result;
    }

    return $index_array;
} 
```

然后使用它：

```
// You can use it like you did in your question:
print_r(create_index($array, array('state', 'join_date')));

// Or you can process in chunks:

$results = array();

while(/* store data from database in $array */) {
    create_index($array, array('state', 'join_date'), &$results);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:11:18.257

我想出了与 Ryan 发布的基本相同的解决方案，但是当键是...时遇到了问题，因此数组键`int`的类型转换...`string`

```
function createIndex($set, $indexes)
{
    $return = array();

    if(!is_array($indexes)){
        $indexes = array($indexes);
    }

    foreach($set as $data){
        $curr =& $return;
        foreach($indexes as $index){
            $key  = (string)$data[$index];
            if(!is_array($curr[$key])){
                $curr[$key] = array();
            }
            $curr =& $curr[$key];
        }
        $curr[] = $data;
    }

    return $return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:01:05.433

使用引用，我能够提出以下功能。效果很好！

它将自动检测树的末端是否存在多个叶子，如果存在，则检测分支或叶子本身。此外，您可以使用`$merge_classifier`参数进行合并。这将允许您合并称为`count`例如的列，这会将值添加在一起。

```
function createIndex($keys, Array $array, $merge_classifier = NULL, $return_array = array())
{               

    if(is_string($keys)){
        $tmp = $keys;
        $keys = array();
        $keys[] = $tmp; 
    }

    foreach($array as $result) {
        $object = &$return_array;

        foreach($keys as $index){
            if(!array_key_exists($result[$index], $object)) {
                $object[$result[$index]] = array();
            }
            $object = &$object[$result[$index]];
        }

        if(!is_null($merge_classifier)){
            $object = array_merge($result, array($merge_classifier => ($result[$merge_classifier] + $object[$merge_classifier])));
        }
        else{
            if(sizeof($object) > 0){
                $object[] = $result;    
            }else{
                $object = $result;  
            }
        }
    }

    return $return_array;
} 
```

# ftp - Gedit 的 FTP 插件

> ID：10919113
> 
> 赞同：1
> 
> 时间：2012-06-06T17:28:06.513
> 
> 标签：ftp, gedit

我试图在 Gedit 中安装 Ftp 插件，但我不明白。我跟进了这个网站：

[http://code.google.com/p/gedit-ftp-browser/](http://code.google.com/p/gedit-ftp-browser/)

建议？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:51:57.353

您可能希望提供更具体的错误信息，但请确保您拥有正确版本的 Gedit。该插件适用于 2.x，而 Gedit 当前位于 3.x 分支中。

其次，Gedit 附带的文件浏览器插件可以处理 FTP（和 SSH 以及您的操作系统支持的几乎任何虚拟文件系统）。只需打开文件浏览器并选择`File`>`Connect to Server`或执行命令`nautilus-connect-server`。连接到服务器后，它将显示在 Gedit 文件浏览器窗格中。您可以随时为常用连接添加书签，以便在 Gedit 中快速访问。

# sql-server - 将原始数据转换为关系数据

> ID：10919115
> 
> 赞同：1
> 
> 时间：2012-06-06T17:28:07.723
> 
> 标签：sql-server, stored-procedures, etl

## 介绍

我得到了一个凌乱的excel转储直接到一张桌子上。现在我需要把这个烂摊子变成有用的东西。转储有重复和不一致的地方......好时光！

到目前为止，我一直在尝试各种方法:( - 希望你能帮助我。

给定这个示例数据集：

```
ExcelDump
+----+------+------+------+
| ID | Col1 | Col2 | Col3 |
+----+------+------+------+
|  1 |      |      | C    |
|  1 |      | B    | C    |
|  1 | A    | B    | D    |
|  1 | E    | B    | C    |
|  2 | A    | B    | C    |
|  2 | A    | B    | C    |
|  3 | A    | B    | C    |
|  3 | A    | B    | F    |
|  4 | A    | B    | C    |
|  4 | G    | B    | C    |
+----+------+------+------+ 
```

一种可能的结果可能是：

```
OutputTable
+----+------+------+------+
| ID | Col1 | Col2 | Col3 |
+----+------+------+------+
|  1 | A    | B    | C    |
|  2 | A    | B    | C    |
|  3 | A    | B    | C    |
|  4 | A    | B    | C    |
+----+------+------+------+ 
```

漂亮整洁。唯一 ID 密钥和数据以一种有意义的方式合并在一起。

## 如何选择正确的数据？

您可能已经注意到另一个可能的结果可能是：

```
+----+------+------+------+
| ID | Col1 | Col2 | Col3 |
+----+------+------+------+
|  1 | E    | B    | C    |
|  2 | A    | B    | C    |
|  3 | A    | B    | F    |
|  4 | G    | B    | C    |
+----+------+------+------+ 
```

这就是复杂的地方。我希望能够根据我可以操纵的一些条件选择最有意义的集合。

例如，我想设置一个条件：**“选择最常见的（非空）值，如果没有找到最常见的值，则取第*一个*非空值。”** 此条件应应用于按 ID 分组的选择。该条件的结果将是：

```
+----+------+------+------+
| ID | Col1 | Col2 | Col3 |
+----+------+------+------+
|  1 | A    | B    | C    |
|  2 | A    | B    | C    |
|  3 | A    | B    | C    |
|  4 | A    | B    | C    |
+----+------+------+------+ 
```

如果我后来发现那个假设是错误的，它应该是：**“选择最常见的（非空）值，如果没有找到最常见的值，则取*最后一个*不为空的值。”**

```
+----+------+------+------+
| ID | Col1 | Col2 | Col3 |
+----+------+------+------+
|  1 | E    | B    | C    |
|  2 | A    | B    | C    |
|  3 | A    | B    | F    |
|  4 | G    | B    | C    |
+----+------+------+------+ 
```

所以基本上我想根据每组 ID 的一组条件来选择值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:01:48.247

如所写，您可以通过简单的方式做到这一点`GROUP BY`：

```
SELECT 
    id, 
    Col1 = MAX(Col1),
    Col2 = MAX(Col2),
    Col3 = MAX(Col3)
FROM
   ExcelDump
GROUP BY
   id 
```

此模式将为每个 id 值的每列提供最高的非空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:02:58.363

我已经修改了我的解决方案，以考虑到问题中添加的额外信息。下面的查询将为您提供您指定的第二个排序优先级。为了获得第一个，您需要将外部应用中的“max”更改为“min”，并将“sortOrder desc”更改为“sortOrder asc”。请记住，如果您有多个最频繁的关系，比如 A、A、B、B、C 和 A 排在第一位，它会在下面的代码中与 B 一起出现，因为那是最高计数并且排在 2 个 A 之后。

```
-- setup test table
create table ExcelDump(
    id int
,   Col1 char(1)
,   Col2 char(1)
,   Col3 char(1)
)

insert into ExcelDump values(1,null,null,'C')
insert into ExcelDump values(1,null,'B','C')
insert into ExcelDump values(1,'A','B','D')
insert into ExcelDump values(1,'E','B','C')
insert into ExcelDump values(2,'A','B','C')
insert into ExcelDump values(2,'A','B','C')
insert into ExcelDump values(3,'A','B','C')
insert into ExcelDump values(3,'A','B','F')
insert into ExcelDump values(4,'A','B','C')
insert into ExcelDump values(4,'G','B','C')

-- create temp tables to make it easier to debug
select distinct
    id
into #distinct
from ExcelDump

-- number order isn't guaranteed but should be sorting them as first come first serve from the original table if no indexes exist
select
    row_number() over(order by (select 1)) as numberOrder
,   ID
,   Col1
,   Col2
,   Col3
into #sorted
from ExcelDump

-- actual query
select
    ui.Id
,   col1.Col1
,   col2.Col2
,   col3.Col3
from #distinct ui
  outer apply (
        select top 1
            ed.Col1
        ,   count(*) as cnt
        ,   max(ed.numberOrder) as sortOrder
        from #sorted ed
        where ed.id = ui.id
        and ed.Col1 is not null -- ignore nulls
        group by ed.Col1
        order by cnt desc, sortOrder desc -- get most common value, then get last one found if there are multiple
    ) col1
  outer apply (
        select top 1
            ed.Col2
        ,   count(*) as cnt
        ,   max(ed.numberOrder) as sortOrder
        from #sorted ed
        where ed.id = ui.id
        and ed.Col2 is not null -- ignore nulls
        group by ed.Col2
        order by cnt desc, sortOrder desc -- get most common value, then get last one found if there are multiple
    ) col2
  outer apply (
        select top 1
            ed.Col3
        ,   count(*) as cnt
        ,   max(ed.numberOrder) as sortOrder
        from #sorted ed
        where ed.id = ui.id
        and ed.Col3 is not null -- ignore nulls
        group by ed.Col3
        order by cnt desc, sortOrder desc -- get most common value, then get last one found if there are multiple
    ) col3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:21:47.880

您还可以使用游标遍历临时 ExcelDump 表以过滤每一行。您可以将过滤后的结果存储到另一个临时表中，该表可以有自己的约束，如必要时唯一或非空，并且通过使用游标，您可以编写专门的代码来处理您需要的每个验证。

# c# - Telerik Radgrid 的 CRUD 操作（插入、更新、删除）按 MVP 模式

> ID：10919124
> 
> 赞同：0
> 
> 时间：2012-06-06T17:28:50.027
> 
> 标签：c#, asp.net, design-patterns, telerik, telerik-grid

我在 ASP.Net 页面中有一个[Telerik RadGrid](http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx)，我想在 MVP 模式的演示者中处理 CRUD 事件处理程序。

```
// ASPX page
<telerik:RadGrid ID="RadGrid1" runat="server" 
         onupdatecommand="RadGrid1_UpdateCommand">               
</telerik:RadGrid>

// Asp.Net Code Behind
protected void RadGrid1_UpdateCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
{
     // do update
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:05:40.963

我的答案很简单，根据我的搜索，我们必须在演示者中处理网格的事件（InsertCommand、UpdateCommand、DeleteCommand），如下所示：

```
// view interface
public interface IGridView 
{
    Telerik.Web.UI.RadGrid myGrid { get; }
}

// presenter
protected readonly IGridView _view;

public GridPresenter(IGridView view)
{
    _view = view;

    _view.myGrid.UpdateCommand += new Telerik.Web.UI.GridCommandEventHandler(onUpdateCommand);
    _view.myGrid.InsertCommand += new Telerik.Web.UI.GridCommandEventHandler(onInsertCommand);
    _view.myGrid.EditCommand += new Telerik.Web.UI.GridCommandEventHandler(onEditCommand);
}

private void onUpdateCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
{
    // Code for updating 
}

private void onInsertCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
{
    // Code for inserting
}

private void onEditCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
{
    // Code for editcommand
} 
```

# android - Android游戏碰撞检测

> ID：10919127
> 
> 赞同：0
> 
> 时间：2012-06-06T17:28:53.323
> 
> 标签：android, collision-detection, collision

我有一个关于 android 游戏的问题。我不能在 2 个对象之间进行碰撞。矩形碰撞在 java 中似乎很完美，但在 android 中却不是。我正在使用 intersect 方法来检查碰撞。如果你们有一些提示或回答我的问题，请随时告诉我，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:35:50.750

碰撞检测与平台和语言无关。如果它是一个好的算法，你使用的算法应该可以正常工作。

这是[一篇](http://www.gamedev.net/page/resources/_/technical/game-programming/collision-detection-algorithm-r754)帮助您入门的文章，并为您提供了有关如何进行操作的良好提示。

有一些库可以帮助你的事业。我建议你使用[Box2d](http://www.4feets.com/2009/03/2d-physics-on-android-using-box2d/)库。它是一个物理引擎，对碰撞有很好的支持。您也可以在该网站的首页上找到一个示例。

# bash - 从 shell 脚本中的字符串查找变量值

> ID：10919136
> 
> 赞同：3
> 
> 时间：2012-06-06T17:29:49.757
> 
> 标签：bash

在 bash 中，如果我有：

```
y=10
x='y'
echo $x # prints 'y' 
```

现在我想`$y`通过 $x：

```
echo ${$x} # error: "bad substitution"; I want to print 10 
```

如何使用 name 查找变量值`$x`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T17:33:02.417

请参阅 bash 手册中的参数扩展：

```
echo ${!x} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:41:27.343

转义外部美元符号时`eval`用于间接[引用](http://tldp.org/LDP/abs/html/ivr.html)

```
eval echo "\${$x}" 
```

分配给变量

```
eval "z=\${$x}"
echo "$z"
# 10 
```

# iis - IIS 阻止的未知扩展

> ID：10919137
> 
> 赞同：0
> 
> 时间：2012-06-06T17:29:55.483
> 
> 标签：iis, iis-7.5

我遇到了一个相当有趣的问题。

.por 不是一个常见的扩展名，虽然它被 hero lab's 用于他们的角色组合。将它放在我的带有 IIS 7.5 的 win 7 笔记本电脑上，当服务器通过目录浏览和使用本地主机上的 Web 浏览器生成目录列表时，文件名将在那里。

但是，尝试下载它会导致 404。文件扩展名本身指向一个真正的旧 corel 绘图文件格式。我也可以使用 .junk 扩展名轻松复制这种行为。

/为什么/会发生这种情况？我不仅想知道它是如何配置成这种行为的，还想知道涉及到哪些模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:31:48.300

扩展未映射到已知的 mime 类型 - 您需要[为此扩展添加 mime 类型](http://www.iis.net/ConfigReference/system.webServer/staticContent/mimeMap)。

> 默认情况下，IIS 7 不会返回未添加到元素或在元素中具有映射的文件类型。此行为可防止未经授权访问在 IIS 7 配置设置中没有映射的文件。

# drupal - Drupal - 从链接调用函数但不创建新页面

> ID：10919141
> 
> 赞同：0
> 
> 时间：2012-06-06T17:30:06.427
> 
> 标签：drupal, drupal-7

这就是我想要做的：如果用户单击链接（或图像），则会动态创建一个文件，并且用户可以下载该文件。

一个想法是创建一个链接 l() 来调用处理文件的菜单项。但是，该方法将创建一个新页面 - 这不是我想要的。我希望用户看到他们只是从文件列表中下载文件（如果他们愿意，他们可以转到下一个文件链接）

这个问题已在 drupal 论坛上提出，但没有答案： [http ://drupal.org/node/427866](http://drupal.org/node/427866)

我认为这是一个简单的提议，但还没有答案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:37:39.507

我不了解 HTML 的标头，但这里的基本思想是更改标头，并遵循一个文件供用户下载。

链接（任何你想要的，可以链接到一个函数，或者使用 l()）会导致某个函数的执行；在该函数中，它会调用 php 函数 header() 在 drupal 执行任何操作之前将正确的标头返回给浏览器，然后是您希望用户下载的文件；之后，您调用 die() 函数来完成执行。

对于浏览器，它将开始下载文件。但是对于你需要放在 header() 函数中的东西，我也不太确定，你可以进一步搜索。

更新：这是我用来提供 excel 可读文件供用户下载的代码：

```
function download_as_excel($header, $rows, $filename = 'result.xls',$pre_content = "",$post_content = "")
{
    //Export the table to MS Excel.
    header('Content-type: application/vnd.ms-excel; charset=UTF-8');
    header('Content-Disposition: attachment; filename="'.$filename.'"');
    $output = '<html>';
    $output .= '<head><meta http-equiv=Content-Type content="text/html; charset=utf-8"></head>';
    $output .= '<body>';
  $output .= $pre_content;
    $output .= theme('table', array('header' => $header, 'rows' => $rows));
  $output .= $post_content;
    $output .= "</body></html>";
    print $output;
    exit;
} 
```

# vbscript - 在 QTP 中查找函数

> ID：10919145
> 
> 赞同：0
> 
> 时间：2012-06-06T17:30:22.877
> 
> 标签：vbscript, qtp

我一直在网上寻找 QTP 中该功能的文档，但找不到任何可以很好地解释它的东西。有人可以帮忙吗。

代码行如下所示：

```
obj_Sheet.UsedRange.Find(Variable_Name,,-4163,1) 
```

有人可以向我解释 Find() 函数的作用，以及它期望的参数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:58:24.403

Excel VBA的`Find`函数在[MSDN](http://msdn.microsoft.com/en-us/library/ff839746.aspx)中进行了描述。在 Excel VBA 编辑器本身中查看属性的可能值的最简单方法： 在 Excel 中：按 ALT+F11 进入 VBA 编辑器，然后选择 F2 打开对象浏览器。在对象浏览器中，您可以查找 xlPart、xlWhole、xlValues 等的值。

脚本中的参数意味着：
-4163：（`xlValues`在值中搜索，而不是在公式中）
1：（`xlWhole`单元格中的值必须完全匹配查找值，而不是部分匹配）

# google-maps - 为 KML 图层设置颜色（Google Web Toolkit）

> ID：10919163
> 
> 赞同：1
> 
> 时间：2012-06-06T17:32:01.583
> 
> 标签：google-maps, gwt, kml

我在我的项目中创建了一些 KML 文件，我想在我的地图上做这样的事情

```
KmlLayer ctaLayer = KmlLayer.create("url to kml");
ctaLayer.setMap(map); 
```

但是，我有三类 kmls（关于它们代表什么），我希望每个类别都有不同的颜色。如何使用 GWT 做到这一点？

//我正在为 GWT 使用谷歌地图 v3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:40:05.447

一旦创建了 KmlLayers，就无法更改它们的样式。但由于您是自己创建 KML 文件，因此您应该尝试使用 Style 标签。例如，如果要更改标记的颜色，

```
<Style id="myStyle">
    <IconStyle>
        <color>ff00ff00</color>
    </IconStyle>
</Style> 
```

然后引用它

```
<styleUrl>#myStyle</styleUrl> 
```

我认为您也可以为多边形设置样式，如果这是您的 KML 文件中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:36:16.293

您不能动态设置 KmlLayer 的样式。您可以将 kml 导入 FusionTables 并动态设置 FusionTablesLayer 的样式。

看起来 GWT 支持 FusionTablesLayers

# php - 使用 .htaccess 来阻止目录破坏 css 和图像

> ID：10919177
> 
> 赞同：0
> 
> 时间：2012-06-06T17:32:44.787
> 
> 标签：php, .htaccess, directory

抱歉，如果这已经被问过了。我试图进行广泛的搜索，但我对 htaccess 了解不多，所以我不知道哪些问题是相关的。

现在，我正在使用需要多个页面和功能的 php 建立一个非常广泛的系统。为了使事情简单和易于管理，我有一个文件“economy.php”，然后需要“/economy/”目录中的文件。

我在另一个问题上读到，处理仅从经济.php 文件访问的文件的最佳方法是在 /economy 中使用 htaccess 文件`deny from all`。这工作，除了现在 /economy 目录中的图像和样式表不起作用。

我能想到的解决方案是创建一个目录 /economy/pages/ 并将 php 文件和 htaccess 文件放入其中。但这很草率，我假设有一种更简单的方法来处理它。

我最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:43:58.760

我认为你应该看看[Files](http://httpd.apache.org/docs/current/mod/core.html#files) apache 指令所以你应该有这样的东西：

```
<Files ~ "\.(php|.htaccess|php5)$">
    deny from all
</Files> 
```

希望这可以帮助 ...

咪咪兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:41:48.647

“全部拒绝”阻止用户的浏览器访问 CSS 和图像文件。最好的办法是分解目录结构。为图像、css、js、源等创建顶级目录。然后相应地更新代码中的路径。然后，您可以使用 Apache 配置（或速度较慢的 .htaccess）拒绝外部访问源目录。

# google-app-engine - 频道 API - 有时我没有收到消息

> ID：10919180
> 
> 赞同：1
> 
> 时间：2012-06-06T17:32:47.397
> 
> 标签：google-app-engine, channel-api

我注意到每个 createchannel() 都会替换 iFrame url。

是否有可能由于重新调用 createChannel() 我的 iFrame 被新的 iFrame 替换，但是 clientID 和 iFrame url 之间的绑定没有更新？

例如：我调用了“channel.create_channel(unique_id)” - 我用 123.talkgadget.google....作为 iFrame 取回了 JS。然后，我再次使用相同的客户端 ID“channel.create_channel(unique_id)”调用 - 我用 456.talkgadget.google....作为 iFrame 取回了 JS。

如果我现在调用“channel.send_message(unique_id,msg)”，是否有机会将消息发送到 123.talkgadget.google 而不是 456.talkgadget.google 导致我没有收到消息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:12:03.197

我不是 100% 确定这个答案。我没有彻底测试过，测试起来有点困难，因为 dev_appserver 的行为与真实的服务器行为有很大的不同。

我相信我以前见过这种行为（缺少消息）。

如果您从客户端关闭旧频道，它似乎使一切正常。

我没有尝试过处理您失去互联网连接并且您无法从客户端关闭的情况。

# c# - 变量存储在类文件中

> ID：10919184
> 
> 赞同：0
> 
> 时间：2012-06-06T17:32:57.560
> 
> 标签：c#, windows-phone-7

我在全景项目中有一个列表视图，我想重定向到新页面以显示有关我选择的项目的更多详细信息。我可以知道我该怎么做吗？

我目前的想法是，当单击时，它将变量存储到类文件中，而加载时我的另一个表单将始终从该类文件变量中提取并从列表中搜索。

我打算保留一个数组列表，我是否将它保存在类文件中以便所有人都可以访问它？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:43:43.410

看起来您可能会为瞬态数据占用大量内存。您是否考虑过仅调用 Navigate() 来加载新页面并将实例化数据作为发布数据传递 -[就像这里一样](http://msdn.microsoft.com/en-us/library/ff626521%28v=vs.92%29.aspx)。这样，您只需使用所需数据创建新页面，而不会占用内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:39:29.390

我个人会为此使用 RingBuffer ... [http://en.wikipedia.org/wiki/Circular_buffer](http://en.wikipedia.org/wiki/Circular_buffer)

我会让索引器返回与索引关联的图像。我还会通过列表条目或类似条目的长度出现并返回 TotalFrames。（即使使用模数超出了列表的范围）

我还会有一个浮点索引器，它可以对诸如`25.7`度数形式的字符串运算符之类的值进行操作。

我还将重载运算符以允许相应地基于这些方法进行旋转。（用于滑动和手势等）

然后，您将拥有一个具有两种操作样式的单个枚举器，一个重复和一个非重复用于遍历帧（包括反向）

这只是最重要的......不要让我做一个例子：p

# ember.js - 路由器只工作一层深，而不是根

> ID：10919187
> 
> 赞同：1
> 
> 时间：2012-06-06T17:33:03.527
> 
> 标签：ember.js, ember-old-router

我正在尝试升级我的代码以使用来自 emberjs master 的路由器，而不是依赖 ember-routemanager。我的代码主要基于[https://gist.github.com/2728699](https://gist.github.com/2728699)。我创建了一个小提琴来展示我在[http://fiddle.jshell.net/pszvJ/19/show/#/posts上谈论的内容](http://fiddle.jshell.net/pszvJ/19/show/#/posts)

当我单击“测试评论路线”和“测试评论显示”时。我从来没有得到我应该拥有的 console.log，但它适用于两个“帖子”操作。

另外，当我尝试直接到达 /. 我得到一个“找不到路径 / 的状态”，即使 / 应该是我打印主入口点的根元素。事实上，主入口点已记录，但随后失败。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:08:24.040

根据您的小提琴，您的路由器具有以下状态：

*   root.posts.index (#/posts)
*   root.posts.show (#/posts/42)
*   root.posts.comments.index (#/posts/comments)
*   root.posts.comments.show (#/posts/comments/42)

如果要处理 #/posts/42/comments/1 之类的 url，则“comments”状态必须嵌套到“posts.show”状态中。

而且您无法直接到达“/”，因为您没有为该网址定义任何状态。

看到[这个小提琴](http://fiddle.jshell.net/DHN2u/2/)。

# c# - IMessageFilter 不允许我输入文本框

> ID：10919189
> 
> 赞同：0
> 
> 时间：2012-06-06T17:33:05.320
> 
> 标签：c#, .net, input

我的 Windows 窗体应用程序具有 IMessageFilter 功能。它似乎可以工作，只是它捕获了用于输入文本框的关键事件。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:41:13.763

当您实现 IMessageFilter 并调用 Application.AddMessageFilter() 时，您会看到您创建的*每个表单上**每个*控件的*所有*排队输入消息。这完全是使用界面的重点。您可以按照方法名称的建议进行过滤，PreFilterMessage() 方法在 Message.HWnd 参数中提供控件的窗口句柄。您可以将其与特定控件的 Handle 属性进行比较。或者，您可以使用 Control.FromHandle() 来获取对将要获取消息的控件的引用。从方法返回以防止消息得到进一步处理。**`false`**

# java - 当父类中的受保护（或抽象）方法被删除并且子类已经实现它时，如何导致编译错误/警告

> ID：10919197
> 
> 赞同：0
> 
> 时间：2012-06-06T17:33:30.880
> 
> 标签：java, oop, java1.4

假设您有一个名为 Vehicle 的类，它概述了一个名为 speed 的受保护（也可以是抽象的）方法。并且，子类 Car 覆盖该方法以定义自己的实现。

现在，假设不再需要在 Vehicle 类中使用 speed 方法（假设所有车辆无论出于何种原因都将是静止的）。

如果我从 Vehicle 中删除方法速度，我想抛出一个编译错误，以便删除该方法的开发人员知道子类可能依赖它来执行某些操作。

从技术上讲，不需要编译错误，但是当这种重构发生时，某种通知会成为障碍。是否有可以用来处理这种情况的编程模式？

更新：我正在使用 Java 1.4（对不起！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:34:35.727

`@Override`注释明确用于此目的。

如果您没有使用 Java 1.5+，那么不，尽管您*可以*使用 AOP 来检测这些方法以引发异常，或者只使用反射和类路径扫描来检查所有子类并检查是否存在所述方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:44:55.887

如果它是抽象的，那么就没有可以从父类中删除的实现，并且您的风险归结为没有实现它的新子类。如果它在父级中受到保护和定义，则在删除父级实现时，有两种情况应该已经引发编译器错误。

1) 子类调用该方法而不定义自己的实现。方法不存在。

2) 子类定义方法，但包括对 super 的调用。同样，该方法不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:44:05.057

您可以在嵌套类中编写`super.speed()`并在父类中将此方法留空。如果您现在在父级中删除此方法，您将有一个异常。但是有一个缺点——你必须从所有被覆盖的方法中调用它。试试看，也许这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:36:13.777

对子类中的方法使用`@Override`注释。从基类中删除方法后，*Eclipse*和*javac*等工具将对那些*不再覆盖的*方法发出警告。

**编辑：**虽然您不能`@Override`在 Java 1.5.0 之前使用，但有一个名为[`xdoclet`](http://xdoclet.sourceforge.net/xdoclet/index.html). 在 J2EE 和 EJB 2.1 时代，这被用来“模拟”注释并使用基于类似 javadoc 的标记的代码做一些*神奇的事情。*看看它，也许你可以使用它。

**编辑 2：**在 Java 1.4.x 中，您还可以使用 JavaDoc 标签`{@inheritDoc}`进行这种验证。`@Override`而不是用注释来注释你的方法`@inheritDoc`，就像这样：

```
public class MyAwesomeClass extends BaseClass
{
    /** {@inheritDoc} */
    protected void myAweSomeMethod()
    {
        //...
    }
} 
```

现在，如果您更改或删除中的`myAweSomeMethod`签名`BaseClass`，您将收到来自 JavaDoc 工具的警告，类似于以下内容：

> /home/npe/java-tests/MyAwesomeClass.java:4：警告 - 使用了@inheritDoc，但 myAwesomeMethod 没有覆盖或实现任何方法。

# this - 由于“$this”对象导致的致命错误。（我是 PHP 方面的新手，所以我需要澄清一下。）

> ID：10919201
> 
> 赞同：0
> 
> 时间：2012-06-06T17:33:47.380
> 
> 标签：this

我在我的 Sharetronix 网站（不熟悉它的人的微博平台）上使用了一个插件，它应该允许我向我的网站的根文件夹添加一个页面。但是，当我转到刚刚添加的页面时，我收到了这条消息。

> 致命错误：在第 2 行的 /home/u556426868/public_html/forum.php 中不在对象上下文中时使用 $this

我在网上做了一些研究，我知道“$this”对象不应该落在“newtemplate_code()”之外，但我不知道在替换和修复方面我应该做什么代码，以便页面工作。

整个页面的代码如下：

```
<?php   
    $this->load_template('header.php'); 
?>  
        <div id="pagebody" style="margin:0px; border-top:1px solid #fff;">
            <div><div id="contacts_left" style="width:100%;">           <div class="ttl">
                        <div class="ttl2"><h3>iState RPG - The Neovita RPG Forum</h3></div></div>
<br><br>

<center><iframe name=”FRAMENAME” src=”http://istate.serverforumhosting.com/portal.php” width=”1000? height=”1100? frameborder=”1? scrolling=”yes” allowautotransparency=true></iframe></center>

<! REMOVE FROM HERE THE DUMMY CONTENT !>

<b>DOWNLOAD</b> this plugin <a href="http://sharetronix.com/sharetronix/demo/view/post:3965797" title="Download from Sharetronix" target="_blank"> here</a>(2kb).<br><br>

<center>
<a href="http://sharetronix.com/sharetronix/demo/getfile/pid:public_3965797/New%20Page.rar" target="_blank" title="Download">
<img src="http://wb-cc.de/oscommerce/images/download-1.gif" border="0">
</a><br><br>

Brought to you by <a href="http://istate.tk">iState - The state of you!</a>
</center>

<! REMOVE END !>
        </div>
        </div>
        </div>
<?php

    $this->load_template('footer.php');

?> 
```

就像我说的，我是 PHP 编码的新手，所以我需要一些说明。所以顺便说一句，谢谢你帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:41:07.937

您在课堂外使用 $this 。我建议您尝试使用 3rd 方库作为模板。首先，您必须包含所需的文件链接：

```
include("path/to/your/class.php"); 
```

然后你必须找出类的名称，假设它是这样开始的：

```
class Template 
```

然后你将不得不初始化它

```
$template = new Template(); 
```

并调用所需的函数

```
$template->load_template('header.php'); 
```

有关路径和用法的更多详细信息可能在库的安装文件中。

哦，`$this`仅用于类内部，例如：

```
class foo
{
    function bar()
    {
        // Do something
    }

    function do_bar()
    {
        $this->bar();
    }
} 
```

# wpf - SSRS 报告查看器仅在 Fiddler2 运行时工作

> ID：10919203
> 
> 赞同：2
> 
> 时间：2012-06-06T17:33:58.353
> 
> 标签：wpf, sql-server-2008, reporting-services, reportviewer, fiddler

我有一个使用 WinForms Report Viewer 控件的 WPF 应用程序。报告控件从 SSRS 2008 加载报告。在我们移动到新服务器之前，一切正常。

所有用户都可以毫无问题地连接和验证`http://SERVERNAME/reports`并运行报告。某些用户可以从 WPF 应用程序运行报告，但其他用户会收到消息：

> “请求失败，HTTP 状态 401：未授权”。

我想我会安装 Fiddler2 并查看正在传递的流量。不幸的是（或幸运的是），当 Fiddler2 运行时，报表在报表查看器控件中正确加载。

为什么？

尽管这是一种“临时解决方法”；这绝对不理想。根据 Fiddler 的说法......它有效。流量似乎是有效的，我没有什么要解决的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:30:20.150

问题最终是网络上运行的梭子鱼网络 Web 过滤器代理的错误配置。代理妨碍了报表查看器控件的身份验证。为什么它仍然在 IE 中工作，或者为什么它在 Fiddler 运行时工作，对我来说仍然很奇怪，但至少我现在知道是什么解决了这个问题。

# ios - 如何仅向 UIImageView 添加右边框

> ID：10919205
> 
> 赞同：6
> 
> 时间：2012-06-06T17:34:09.737
> 
> 标签：ios, uiimageview, uiimage, border

我想为 UIImageView 添加一个白色边框。我尝试了以下方法，但没有奏效：

```
 UIImage *image = [UIImage imageNamed:imagePath];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    CGRect rect = imageView.frame;        
    rect.size.width = rect.size.width + 1; // create white right border
    [imageView setBackgroundColor:[UIColor whiteColor]]; 

    imageView.frame = rect;
    [myViewView addSubview:imageView]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T18:05:05.170

我现在这样做了

```
 CALayer *sublayer = [CALayer layer];
        sublayer.backgroundColor = [UIColor whiteColor].CGColor;
        sublayer.frame = CGRectMake(imageView.bounds.size.width, 0, 1, imageView.frame.size.height);
        [imageView.layer addSublayer:sublayer]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:38:11.357

您可以创建一个比 UIImage 视图更大的 UIView，并将图像视图的框架设置为 0,0，宽度 + 1，高度，这会将多余的部分添加到侧面。

# jsp - 小服务程序映射。Web.xml

> ID：10919212
> 
> 赞同：0
> 
> 时间：2012-06-06T17:34:52.687
> 
> 标签：jsp, tomcat, servlets

在 Java Web 应用程序中，是否可以在不是“web.xml”的文件中映射 servlet？我是说。我将需要映射超过一百个服务器，而 web.xml 将很难处理。按类别划分多个文件中的映射会很棒。

如果有什么办法请你告诉我怎么做？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:43:13.007

不确定划分 web.xml 文件。但是您可以通过 Java Annotations 定义您的 servlet 而不是在 web.xml 中定义它们来完成您的任务。[Servlet 3.0 规范](http://jcp.org/en/jsr/detail?id=315)提供了一个新注解**@WebServlet**，可用于声明您的servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:46:04.600

是的。Servlet 3.0 提供了**Pluggability Feature**，它允许您使用以下方式定义 Web 工件：

*   `Web Fragments`. 里面的库`WEB-INF/lib`可以有`META-INF/web-fragment.xml`它可以定义完整部署描述符的一部分。
*   `Annotations`. 您可以使用@WebServlet、@WebFilter 和@WebListener 注解定义Servlet、过滤器和监听器。

# java - 如何将 Tomcat 日志指定为 log4j 日志文件的主目录

> ID：10919214
> 
> 赞同：25
> 
> 时间：2012-06-06T17:34:55.743
> 
> 标签：java, tomcat, log4j

`log4j.properties`我的 WAR 正在使用通过 WAR 目录下的文件配置的 log4j FileAppender `classes/`。

我已经这样配置了我的 log4j appender：

```
# Set the root logger to DEBUG.
log4j.rootLogger=DEBUG

# MonitorLog - used to log messages in the Monitor.log file.
log4j.appender.MonitorAppender=org.apache.log4j.FileAppender
log4j.appender.MonitorAppender.File=MonitorLog.log
log4j.appender.MonitorAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.MonitorAppender.layout.ConversionPattern= %-4r [%t] %-5p %c %x - %m%n

# Use the MonitorAppender to log all messages.
log4j.logger.*=DEBUG,MonitorAppender 
```

使用此配置，我试图实现以下目标：

*   所有日志消息 DEBUG 级别和更高级别都被记录（所以一切）
*   我希望`MonitorLog.log`文件位于Tomcat的`logs/`目录下

这个配置是否实现了这些项目，如果没有，需要改变什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-06T17:39:23.193

如果你知道这个 WAR 只会部署到一个 tomcat，你可以利用系统属性`catalina.base`，它代表你的 tomcat 基本文件夹的根目录（也有一个`cataline.home`，但它们通常是相同的，除非你有多个 tomcat 运行在同一台机器并且共享服务器库，但我离题了）。

所以更新如下：

```
log4j.appender.MonitorAppender.File=${catalina.base}/logs/MonitorLog.log 
```

# java - 通过 ui:repeat 在 JSF 中的 jQuery UI 小部件访问添加的值

> ID：10919217
> 
> 赞同：2
> 
> 时间：2012-06-06T17:35:03.513
> 
> 标签：java, jquery, jquery-ui, jsf, tag-it

*   我在 ul-list 中添加了一个 ui:repeat 以生成一个无序列表
*   通过[jQuery Tag-It 小部件](http://aehlke.github.com/tag-it/)，列表可以很好地编辑（不幸的是，primefaces 还没有类似的组件）
*   保存表单时，我无法访问新创建的值（只有其他 primefaces 组件的值）

**XHTML**

```
<ul id="keywordList">
<ui:repeat value="#{bean.selectedObject.keywords}" var="keyword">
    <li><h:outputText value="#{keyword.name}" /></li>
    </ui:repeat>
</ul> 
```

**豆**

```
public class Bean implements Serializable {
    private MyObject selectedObject;
} 
```

**模型**

```
public List<String> getKeywords() {
    return keywords;
} 

public void setKeywords(List<String> keywords) {
    this.keywords = keywords;
} 
```

任何想法，我如何访问添加到 UL 列表中的值？谢谢！

**编辑**： bean 是会话范围的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:41:13.240

根据其[文档](https://github.com/aehlke/tag-it/blob/master/README.markdown)和[演示](http://aehlke.github.com/tag-it/examples.html)，jQuery tag-it 插件使用（可配置的）名称语法自动创建隐藏的输入元素`item[tags][]`。您应该能够从[`ExternalContext#getRequestParameterValuesMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestHeaderValuesMap%28%29)JSF 中的 HTTP 请求参数值映射中获取它，如下所示：

```
String[] tags = FacesContext.getCurrentInstance().getExternalContext()
    .getRequestParameterValuesMap().get("item[tags][]"); 
```

您也可以将其设置为托管属性，但这要求 bean 具有请求范围。

```
@ManagedProperty("#{paramValues['item[tags][]']}")
private String[] tags; 
```

# ruby-on-rails - 在 Rails 模型中访问会话数据

> ID：10919218
> 
> 赞同：0
> 
> 时间：2012-06-06T17:35:09.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要检查一个事物的 id 是否在我的会话变量中。

我的直觉是向 Thing 模型添加一个方法，该方法检查 Thing 的 id 是否在存储在 session 变量中的数组中。

```
class Thing < ActiveRecord::Base
  ...

  def pinned?
    session[:pinned].include? self.id
  end

end 
```

我试图创建的功能是用户为列表选择一堆不同的东西，然后将它们存储在每个用户的会话中，然后在以后检索以进行打印。

Rails 似乎可以防止模型中的会话访问而没有一些骇客，我很想避免这种情况。也许我正在以错误的方式解决问题，或者被固定？函数属于其他地方？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:41:29.263

也许将它作为参数传递给方法而不是直接访问它？

```
def pinned?(things)
    things.include? self.id
end

thing.pinned?(session[:pinned]) 
```

# math - 在OpenGL中绘制对象与法线对齐

> ID：10919220
> 
> 赞同：0
> 
> 时间：2012-06-06T17:35:14.297
> 
> 标签：math, opengl, 3d

我正在尝试在几何面上绘制法线手柄（到目前为止是一个高矩形），在面的中心并沿着法线指向。

我正在使用以下代码进行操作：

```
Vec3 up(0.0, 1.0, 0.0);
Vec3 angle_to_rotate = up.cross(face_normal);
double dot = up.dot(normal);
float rotate_angle = std::acos(dot);

Mat4 matrix;
matrix.translate(face_center.x, face_center.y, face_center.z);
matrix.rotate(angle_to_rotate, rotate_angle);

glMultMatrixd(matrix.copyGL()); 
```

然后我在世界空间中绘制一个高立方体（y up）。

这有时可以正常工作，但有时（二维 45 个角度）会失败，或者角度方向正确，但矩形看起来像在 z 轴上旋转并且未正确对齐。

这是在OpenGL中实现与（可能将来垂直于）正常对齐的绘图对象的正确方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:11:30.033

两个归一化向量的叉积本身并未归一化。矢量的长度实际上是旋转角度的正弦值。

您可以使用它来获得更准确的角度值：

```
Vec3 axis = up.cross(face_normal);
float angle = std::atan2(axis.length(), up.dot(face_normal));
axis = axis.normalize(); 
```

# android - Android WebView 背景颜色

> ID：10919223
> 
> 赞同：61
> 
> 时间：2012-06-06T17:35:23.517
> 
> 标签：android, webview, background-color

我正在向我的布局中添加一个 WebView 来显示对齐的文本。我想将 WebView 的背景设置为透明以显示为 textView。这是我所做的：

```
WebView synopsis;
synopsis=(WebView)findViewById(R.id.synopsis);
synopsis.setBackgroundColor(0x00000000); 
```

它在模拟器上工作，但是当我在我的设备上运行应用程序时它不起作用：我得到的是白色背景。

```
 String textTitleStyling = "<head><style>* {margin:0;padding:0;font-size:20; text-align:justify; color:#FFFFFF;}</style></head>";
 String titleWithStyle = textTitleStyling + "<body><h1>" + movie.synopsis + "</h1></body>";
 synopsis.loadData(textTitleStyling + movie.synopsis, "text/html", "utf-8");
 synopsis = (WebView) findViewById(R.id.synopsis);
 synopsis.getSettings();
 synopsis.setBackgroundColor(0); 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-06T18:27:31.550

尝试使用 synopsis.getSettings();

```
WebView synopsis;
synopsis=(WebView)findViewById(R.id.synopsis);
synopsis.setBackgroundColor(Color.TRANSPARENT); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-26T05:35:10.260

试试下面的代码希望对你有用： -

```
webview.setBackgroundColor(Color.parseColor("#919191")); 
```

格雷码：`#919191`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-02-19T15:40:34.207

您必须将其放入 XML 代码中：

```
android:background="@android:color/transparent" 
```

对于您的网络视图，例如：

```
<WebView
    android:id="@+id/MyWebView"
    android:layout_width="fill_parent"
    android:layout_height="62dp"
    android:background="@android:color/transparent"
    android:scrollbars="none" /> 
```

在此之后，您必须转到 Java 代码并在 loadUrl 之前编写此代码：

```
yourWebView.setBackgroundColor(Color.TRANSPARENT); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T19:50:51.683

我所做的是

```
 synopsis.setBackgroundColor(0); 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-10T08:42:18.097

你在你的webview中加载了css吗？

就像是：

```
synopsis.loadData(textTileStyling, "text/html", "UTF-8"); 
```

或者

```
synopsis.loadDataWithBaseURL("", textTileStyling, "text/html", "UTF-8", ""); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-21T16:40:48.983

如果我打开了暗模式，这是我可以让它工作而不首先加载初始白色背景的唯一方法：

```
webView.setBackgroundColor(Color.TRANSPARENT);
webView.setVisibility(View.VISIBLE);

<WebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:visibility="invisible"
   /> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-24T10:20:57.483

你可以在这里找到一些提示：[http://code.google.com/p/android/issues/detail?id=14749](http://code.google.com/p/android/issues/detail?id=14749)和这里： [Android WebView style background-color:transparent ignored on android 2.2](https://stackoverflow.com/questions/5003156/android-webview-style-background-colortransparent-ignored-on-android-2-2)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-05T14:22:33.210

您的 html 代码将所有内容设置为白色

**代替：**

```
    String textTitleStyling = "<head><style>* {margin:0;padding:0;font-size:20;" +
    “文本对齐：对齐；颜色：#FFFFFF；}</style></head>”；

    字符串 titleWithStyle = textTitleStyling + "<body><h1>" + movie.synopsis +
    "</h1></body>";

    synopsis.loadData(textTitleStyling + movie.synopsis, "text/html", "utf-8");
    概要 = (WebView) findViewById(R.id.synopsis);
    概要.getSettings();
    概要.setBackgroundColor(0);

```

**和：**

这会从标题样式中排除颜色，并将样式的其余部分仅应用于正文元素

```
    String textTitleStyling = "<head><style>body{margin:0;padding:0;font-size:20;" +
    “文本对齐：对齐；}</style></head>”；

    字符串 titleWithStyle = textTitleStyling + "<body><h1>" + movie.synopsis +
    "</h1></body>";

    概要.loadData(titleWithStyle, "text/html", "utf-8");
    概要 = (WebView) findViewById(R.id.synopsis);
    概要.getSettings();
    概要.setBackgroundColor(0);

```

编辑：固定的html

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-14T16:40:40.083

你也可以这样做——

```
webview.setBackgroundColor(getContext().getResources().getColor(android.R.color.transparent)); 
```

这`android.R.color.transparent`是属于android fragmework的**透明颜色。**

# android - 9个可点击视图的可绘制补丁

> ID：10919225
> 
> 赞同：0
> 
> 时间：2012-06-06T17:35:36.503
> 
> 标签：android, nine-patch

我想使用一个 9-patch drawable 作为我设置为可点击的布局背景

我使用的drawable实际上是一个选择器xml，我是这样写的：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/action_item_pressed" />
    <item android:drawable="@drawable/action_item" />
</selector> 
```

我的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:clickable="true"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp"
    android:padding="8dp"
    android:background="@drawable/action_item_btn">

<ImageView
    android:id="@+id/icon" 
    android:layout_width="30dp" 
    android:layout_height="30dp"
    android:src="@drawable/sword_item"
    android:scaleType="centerInside"/>

<ProgressBar 
    android:id="@+id/progress"
    android:layout_width="35dp"
    android:layout_height="5dp"
    android:layout_marginTop="2dp"
    style="@android:style/Widget.ProgressBar.Horizontal"/>
</LinearLayout> 
```

问题是在按下视图时`action_item drawable`没有显示并且正在显示。`action_item_pressed drawable`

有什么想法吗？

我夸大这种观点的方式会导致这种情况吗？

顺便说一句：在 Eclipse 图形布局中，它正在显示，如果我在应用程序运行时添加视图，它就可以工作。

这是我扩充此视图的方式（它从`onCreate`方法调用）：

```
int achievementsNumber = AchievementsManager.ACTIVE_ACHIEVEMENTS_COUNT;
    m_achievementsLayout = new LinearLayout(m_context.getApplicationContext());
    m_achievementsLayout.setOrientation(LinearLayout.VERTICAL);
    m_achievementsLayout.setGravity(Gravity.CENTER);

    LayoutInflater inflater = (LayoutInflater)m_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    for(int i=0; i < achievementsNumber; i++){
        inflater.inflate(R.layout.achievement_item, m_achievementsLayout, true);
    }

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.CENTER_VERTICAL);
    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    addView(m_achievementsLayout, params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:16:49.447

好吧，似乎膨胀这个视图并将其添加到`onCreate`活动的布局中是一个问题，并导致了这个问题。

我移动了充气并在 onResume 之后添加了视图，它可以工作。

我想原因是`ViewGroup`我正在添加膨胀视图，还没有尺寸。

# ruby-on-rails - Ruby on Rails Michael Hartl 教程。失败的测试第 9.3 章

> ID：10919226
> 
> 赞同：0
> 
> 时间：2012-06-06T17:35:47.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

当我跑

```
bundle exec rspec spec/requests/user_pages_spec.rb -e "edit page" 
```

终端返回：

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/requests/user_pages_spec.rb -e "edit page"
/Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load': /Users/Lagaspi/rails_projects/sample_app/spec/requests/user_pages_spec.rb:66: syntax error, unexpected $end, expecting keyword_end (SyntaxError)
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

我真的不知道如何解决这个问题，但这是我的规范/请求/user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

subject { page }

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }
before { visit user_path(user) }

describe "signup" do
before { visit signup_path }

it { should have_selector('h1',    text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

it { should have_selector('h1',    text: user.name) }
it { should have_selector('title', text: user.name) }
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
it "should not create a user" do
expect { click_button submit }.not_to change(User, :count)
end
end

describe "with valid information" do
  before do
fill_in "Name",         with: "Example User"
fill_in "Email",        with: "user@example.com"
fill_in "Password",     with: "foobar"
fill_in "Confirmation", with: "foobar"
end

it "should create a user" do
  expect { click_button submit }.to change(User, :count).by(1)
end

 describe "after saving the user" do
before { click_button submit }
it { should have_link('Sign out') }
  end
describe "edit" do
let(:user) { FactoryGirl.create(:user) }
before { visit edit_user_path(user) }

describe "page" do
  it { should have_selector('h1',    text: "Update your profile") }
  it { should have_selector('title', text: "Edit user") }
  it { should have_link('change', href: 'http://gravatar.com/emails') }
end

describe "with invalid information" do
  before { click_button "Save changes" }

  it { should have_content('error') }
    end
  end
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:39:15.943

如果这是确切的代码，那么您`end`在底部还缺少两个。添加并重试。

我将您的代码剪切/粘贴到 vim 中并自动缩进以找到罪魁祸首。

**更新：**

另外，你原来的错误说`missing end`. 第一个打开`line 66`，而您在评论中列出的下一个错误说`line 67`。这些正是您`end`缺少的行。

# objective-c - 如何强制 NSWindow 始终处于活动/集中状态？

> ID：10919227
> 
> 赞同：6
> 
> 时间：2012-06-06T17:35:49.283
> 
> 标签：objective-c, xcode, macos, cocoa, nswindow

我有一个透明`NSWindow`的，无论他走到哪里都跟随用户的屏幕（不管怎样，它都会出现`NSWindow`在每个应用程序的前面，甚至是全屏应用程序）。
在那`NSWindow`我有一个`mouseDown`显示弹出窗口的事件。假设我在全屏模式下使用 safari，并且我的 Window 在它前面，我单击 safari 并再次单击我的 Window：没有任何反应，mouseDown 没有发生。我必须再次单击才能`mouseDown`触发事件。
如何强制我始终处于活动状态，这样当我点击后台应用程序并再次点击我的窗口时， `NSWindow`我不必点击 2 次来触发？谢谢！`mouseDown`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:14:21.127

我不确定这是否正是您想要的（它不是一个窗口范围的设置），但是，从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html)中：

> 默认情况下，不是关键窗口的窗口中的鼠标按下事件只会将窗口向前移动并使其成为关键窗口；该事件不会发送到`NSView`发生鼠标单击的对象。但是 ，可以通过覆盖return`NSView`来声明初始的鼠标按下事件 。`acceptsFirstMouse:``YES`
> 
> 此方法的参数是在非键窗口中发生的鼠标按下事件，视图对象可以检查该事件以确定它是否想要接收鼠标事件并可能成为第一响应者。例如，您希望在影响窗口中选定对象的控件中使用此方法的默认行为。
> 
> 但是，在某些情况下，覆盖此行为是合适的，例如对于`mouseDown:`即使在窗口处于非活动状态时也应接收消息的控件。支持这种点击行为的控件示例是窗口的标题栏按钮。

或者你可以尝试摆弄

```
- (void)sendEvent:(NSEvent *)theEvent 
```

看看您是否可以以自定义方式处理事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T22:52:39.370

如果您将无边框 NSButton 实例添加到窗口的视图并将您的图像设置为按钮的图像（并作为其备用图像，以使其更漂亮），它将开箱即用：只需将按钮的操作方法连接到您的应用程序委托（或您要处理单击操作的对象）。单击图像（即按钮）将触发按钮的操作方法，无论哪个窗口处于活动状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T07:57:15.343

这对我有用，希望对您有所帮助，这将使您的窗口始终位于所有应用程序的顶部

```
[self.window makeKeyAndOrderFront:nil];
[self.window setLevel:NSStatusWindowLevel]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T21:39:01.837

我认为你真正应该做的是使用一个 NSPanel（一个浮动调色板——一种特殊的 NSWindow），它会以一种与操作系统一致的方式完全按照你的意愿去做，而不是试图对抗预期的行为。

这是 NSPanel 文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nspanel_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nspanel_Class/Reference/Reference.html)

这里有一些有用且精辟的信息：

[http://cocoadev.com/wiki/NSPanel](http://cocoadev.com/wiki/NSPanel)

默认情况下，当应用程序处于非活动状态时，NSPanel 会消失，但您可以将其关闭。

我很抱歉没有更全面地展示它……时间紧迫。

编辑：

请注意，您可能可以简单地让您的窗口按需要运行：

“NSView 可以声明一个初始的鼠标按下事件，但是，通过覆盖acceptFirstMouse: 来返回YES。”

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html)

您需要对任何 NSView 子类执行此操作以跳过“激活单击”。

# r - 替代 r 中的多个 if else 循环

> ID：10919230
> 
> 赞同：2
> 
> 时间：2012-06-06T17:35:54.760
> 
> 标签：r, loops, if-statement

我有一个条件表和要根据条件使用的公式：

```
MTR                 CLD                     AF                 PI
AA                  AA                     AB                   0.5/a      (cond1)
AA                  AB                     AB                  0.5/a      (cond2)
AB                  AA                     AB                   0.5 /a     (cond3)
AA                  AA                     AA                    1/a   (cond4)
AB                  AA                     AA                     1/a   (cond5)
BB                  AB                     AA                    1/a  (cond6)
AB                  AB                     AA                    1/(a+b) (cond7)
AB                  AB                     AB                    1/(a+b)  (cond8) 
```

如果条件不匹配，则应产生“NA”。

```
 # table of conditions 
MTR <- c("AA",  "AA",   "AB",   "AA",   "AB",   "BB",   "AB",   "AB")
CLD <- c("AA",  "AB",   "AA",   "AA",   "AA",   "AB",   "AB",   "AB")
AF <- c("AB",   "AB",   "AB",   "AA",   "AA",   "AA",   "AA",   "AB")
PI <- c("0.5/a",    "0.5/a",    "0.5/a",    "1/a",  "1/a",  "1/a",  
      "1/(a+b)",    "1/(a+b)") 
```

以下是要应用的两个数据集：

```
# the dataset to be applied to 
dataf <- data.frame (MTR = c("AB", "BB", "AB", "BB", "AB", "AA"),
                     CLD= c("AA", "AB", "AA", "AB", "AB", "AB"),
                     AF = c("AA", "AB", "BB", "AB", "BB", "AB")
                     )

     MTR CLD AF
1  AB  AA AA 
2  BB  AB AB 
3  AB  AA BB
4  BB  AB AB
5  AB  AB BB
6  AA  AB AB

a = c(0.5, 0.4, 0.3, 0.5, 0.2, 0.4)
mapd <- data.frame(a = a, b = 1-a) 
```

编辑：按照建议，我可以将两个数据帧合并为一个：newdf <- data.frame (dataf, mapd)

```
 MTR CLD AF   a   b
1  AB  AA AA 0.5 0.5
2  BB  AB AB 0.4 0.6
3  AB  AA BB 0.3 0.7
4  BB  AB AB 0.5 0.5
5  AB  AB BB 0.2 0.8
6  AA  AB AB 0.4 0.6 
```

我认为我可以通过创建 if else 来解决这个问题 - 但有很多条件我不确定这是否是唯一的（好）方法。

```
 PI = NULL
 if (dataf$MTR = "AA", dataf$CLD = "AA", dataf$AF = "AB") {
                          PI =  0.5/mapd$a } else {
  if (dataf$MTR = "AA", dataf$CLD = "AB", dataf$AF = "AB"){
                          PI =  0.5/mapd$a
                          } else {
         ............. so on 
```

有没有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:33:54.070

看起来过于复杂！

我的建议是将条件表制作成一个包含三列的数据框：第一列是 MTR、CLD 和 AF 列的粘贴（因此典型的条目可能是“AB~AA~AB”）和另外两列将称为 COEFA 和 COEFAB，它们是 PI 表达式中乘以 1/a 的系数和乘以 1/(a+b) 的系数...例如“0.5/a”将具有 COEFA = 0.5 和 COEFAB = 0 而 "1/(a+b)" 将有 COEFA = 0 和 COEFB = 1。

需要明确的是，条件 1 将以 MTR_CLD_AF = "AA~AA~AB", COEFA = 0.5, COEFB = 0 的形式表示。

然后要确定哪个条件适用于 dataf 中的每一行，您只需将 MTR、CLD 和 AF 粘贴在一起，将其与条件数据框中的 MTR_CLD_AF 列匹配，从而为该行提取 COEFA 和 COEFB。您的 PI 变量所需的值是 COEFA*(1/a) + COEFB*(1/(a+b))。

让我知道进一步的解释或代码是否会有所帮助:)

**跟进：**

这是我在这里使用的代码的一个刺探：

```
### first, all your object definitions...

MTR <- c("AA",  "AA",   "AB",   "AA",   "AB",   "BB",   "AB",   "AB")
CLD <- c("AA",  "AB",   "AA",   "AA",   "AA",   "AB",   "AB",   "AB")
AF <- c("AB",   "AB",   "AB",   "AA",   "AA",   "AA",   "AA",   "AB")
PI <- c("0.5/a",    "0.5/a",    "0.5/a",    "1/a",  "1/a",  "1/a",  
      "1/(a+b)",    "1/(a+b)")

dataf <- data.frame (MTR = c("AB", "BB", "AB", "BB", "AB", "AA"),
                     CLD= c("AA", "AB", "AA", "AB", "AB", "AB"),
                     AF = c("AA", "AB", "BB", "AB", "BB", "AB")
                     )
a = c(0.5, 0.4, 0.3, 0.5, 0.2, 0.4)
mapd <- data.frame(a = a, b = 1-a)

### first create COEFA and COEFAB from PI (could automate but small 
### enough to do manually here)

COEFA <- c(0.5, 0.5, 0.5, 1, 1, 1, 0, 0)
COEFAB <- c(0, 0, 0, 0, 0, 0, 1, 1)

### then create conditions data frame as specified in my solution

cond = data.frame(MTR_CLD_AF = paste(MTR,CLD,AF,sep="~"), COEFA, COEFAB,
                  stringsAsFactors=FALSE)

### now put all the data in dataf and mapd into one object alldata to 
### keep things neat

alldata = data.frame(MTR = dataf$MTR, CLD = dataf$CLD, AF = dataf$AF, 
                     a = mapd$a, b=mapd$b, stringsAsFactors=FALSE)

### now go ahead and get COEFA and COEFB for each row in alldata - first 
### do the match up (look in matcond to see this) then copy coef columns 
### over to alldata

matcond=cond[match(with(alldata, paste(MTR, CLD, AF, sep="~")),
                   cond$MTR_CLD_AF),]
alldata$COEFA = matcond$COEFA
alldata$COEFAB = matcond$COEFAB

### finally compute COEFA*(1/a) + COEFAB*(1/(a+b)) using the columns of 
### alldata, and store the answer in column called PI

alldata$PI = with(alldata, COEFA*(1/a) + COEFAB*(1/(a+b)))

### that's it! as noted elsewhere, the value will be NA if no matching
### condition exists 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:15:15.523

```
#data.frame with conditions and functions      
confun<-data.frame(c1=c("AA","AA","AB"),
                       c2=c("AA","AB","AA"),
                       c3=c("AB","AB","AB"),
                       fun=c("0.5/a","0.5/b","1/(a+b)"))
confun$fun<-as.character(confun$fun)

confun
      c1 c2 c3     fun
    1 AA AA AB   0.5/a
    2 AA AB AB   0.5/b
    3 AB AA AB   1/(a+b)

#data        
test<-data.frame(c1=c("AA","AB"),c2=c("AB","AA"),c3=c("AB","AB"),a=c(2,3))
    test$b<-1-test$a

test
  c1 c2 c3 a  b
1 AA AB AB 2 -1
2 AB AA AB 3 -2

fun<-function(c1,c2,c3) as.numeric(rownames(confun[paste(confun$c1,confun$c2,confun$c3)==paste(c1,c2,c3),]))    
test$i<-mapply(fun,test$c1,test$c2,test$c3)

fun2<-function(a,b,i) eval(parse(text=confun$fun[i]))

res<-mapply(fun2,test$a,test$b,test$i)

res
[1] -0.5  1.0 
```

又快又脏

# android - 片段 MyFragment 未附加到 Activity

> ID：10919240
> 
> 赞同：419
> 
> 时间：2012-06-06T17:36:35.073
> 
> 标签：android, android-fragments, actionbarsherlock

我创建了一个代表我的问题的小型测试应用程序。我正在使用 ActionBarSherlock 来实现带有 (Sherlock)Fragments 的选项卡。

我的代码： `TestActivity.java`

```
public class TestActivity extends SherlockFragmentActivity {
    private ActionBar actionBar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setupTabs(savedInstanceState);
    }

    private void setupTabs(Bundle savedInstanceState) {
        actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        addTab1();
        addTab2();
    }

    private void addTab1() {
        Tab tab1 = actionBar.newTab();
        tab1.setTag("1");
        String tabText = "1";
        tab1.setText(tabText);
        tab1.setTabListener(new TabListener<MyFragment>(TestActivity.this, "1", MyFragment.class));

        actionBar.addTab(tab1);
    }

    private void addTab2() {
        Tab tab1 = actionBar.newTab();
        tab1.setTag("2");
        String tabText = "2";
        tab1.setText(tabText);
        tab1.setTabListener(new TabListener<MyFragment>(TestActivity.this, "2", MyFragment.class));

        actionBar.addTab(tab1);
    }
} 
```

`TabListener.java`

```
public class TabListener<T extends SherlockFragment> implements com.actionbarsherlock.app.ActionBar.TabListener {
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(SherlockFragmentActivity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

        // Check if the fragment is already initialized
        if (preInitializedFragment == null) {
            // If not, instantiate and add it to the activity
            SherlockFragment mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(preInitializedFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

        if (preInitializedFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(preInitializedFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

`MyFragment.java`

```
public class MyFragment extends SherlockFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        new AsyncTask<Void, Void, Void>() {

            @Override
            protected Void doInBackground(Void... params) {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException ex) {
                }
                return null;
            }

            @Override
            protected void onPostExecute(Void result){
                getResources().getString(R.string.app_name);
            }

        }.execute();
    }
} 
```

我添加了`Thread.sleep`模拟下载数据的部分。中的代码`onPostExecute`是模拟使用`Fragment`.

当我在横向和纵向之间快速旋转屏幕时，`onPostExecute`代码中出现异常：

> java.lang.IllegalStateException：片段 MyFragment{410f6060} 未附加到 Activity

我认为这是因为`MyFragment`在此期间已经创建了一个新的，并且在`AsyncTask`完成之前附加到了 Activity。中的代码`onPostExecute`调用未附加的`MyFragment`.

但是我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：820
> 
> 时间：2012-06-07T23:51:23.167

我找到了非常简单的答案[`isAdded()`](http://developer.android.com/reference/android/app/Fragment.html#isAdded())：

> `true`如果片段当前已添加到其活动中，则返回。

```
@Override
protected void onPostExecute(Void result){
    if(isAdded()){
        getResources().getString(R.string.app_name);
    }
} 
```

为了避免在未附加到`onPostExecute`时被调用，是在暂停或停止时取消。那么就没有必要了。但是，建议保留此检查。`Fragment``Activity``AsyncTask``Fragment``isAdded()`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-06-30T21:00:55.903

问题是您正在尝试使用 getResources().getString() 访问资源（在本例中为字符串），这将尝试从 Activity 获取资源。查看 Fragment 类的源代码：

```
 /**
  * Return <code>getActivity().getResources()</code>.
  */
 final public Resources getResources() {
     if (mHost == null) {
         throw new IllegalStateException("Fragment " + this + " not attached to Activity");
     }
     return mHost.getContext().getResources();
 } 
```

`mHost`是持有你的活动的对象。

因为 Activity 可能未附加，所以您的 getResources() 调用将引发异常。

接受的解决方案恕我直言，因为您只是在隐藏问题，因此不是可行的方法。正确的方法是从其他始终保证存在的地方获取资源，例如应用程序上下文：

```
youApplicationObject.getResources().getString(...) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-04-24T10:13:35.340

我在这里遇到了两种不同的情况：

1）当我希望异步任务无论如何完成时：想象我的 onPostExecute 确实存储接收到的数据，然后调用一个监听器来更新视图，所以为了更有效率，我希望任务无论如何完成，所以当用户到来时我已经准备好数据背部。在这种情况下，我通常会这样做：

```
@Override
protected void onPostExecute(void result) {
    // do whatever you do to save data
    if (this.getView() != null) {
        // update views
    }
} 
```

2）当我希望异步任务仅在可以更新视图时完成：您在此处提出的情况，任务仅更新视图，不需要数据存储，因此如果视图是，则任务完成没有线索不再显示。我这样做：

```
@Override
protected void onStop() {
    // notice here that I keep a reference to the task being executed as a class member:
    if (this.myTask != null && this.myTask.getStatus() == Status.RUNNING) this.myTask.cancel(true);
    super.onStop();
} 
```

我发现这没有问题，尽管我也使用了（也许）更复杂的方式，包括从活动而不是片段启动任务。

希望这对某人有帮助！:)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-09-02T09:44:26.933

**他们是非常巧妙的解决方案，并且会从活动中泄漏片段。**

因此，在 getResource 或任何依赖于从 Fragment 访问的活动上下文的情况下，它总是检查活动状态和片段状态，如下所示

```
 Activity activity = getActivity(); 
    if(activity != null && isAdded())

         getResources().getString(R.string.no_internet_error_msg);
//Or any other depends on activity context to be live like dailog

        }
    } 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-05-29T23:24:59.957

您的代码的问题在于您使用 AsyncTask 的方式，因为当您在睡眠线程期间旋转屏幕时：

```
Thread.sleep(2000) 
```

AsyncTask 仍在工作，这是因为您在片段重建之前（旋转时）没有在 onDestroy() 中正确取消 AsyncTask 实例，并且当同一个 AsyncTask 实例（旋转后）运行 onPostExecute() 时，这试图找到带有旧片段实例（无效实例）的 getResources() 资源：

```
getResources().getString(R.string.app_name) 
```

这相当于：

```
MyFragment.this.getResources().getString(R.string.app_name) 
```

所以最终的解决方案是在旋转屏幕时在片段重建之前管理 AsyncTask 实例（如果它仍然工作则取消），如果在转换期间取消，则在重建后借助布尔标志重新启动 AsyncTask：

```
public class MyFragment extends SherlockFragment {

    private MyAsyncTask myAsyncTask = null;
    private boolean myAsyncTaskIsRunning = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(savedInstanceState!=null) {
            myAsyncTaskIsRunning = savedInstanceState.getBoolean("myAsyncTaskIsRunning");
        }
        if(myAsyncTaskIsRunning) {
            myAsyncTask = new MyAsyncTask();
            myAsyncTask.execute();
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBoolean("myAsyncTaskIsRunning",myAsyncTaskIsRunning);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if(myAsyncTask!=null) myAsyncTask.cancel(true);
        myAsyncTask = null;

    }

    public class MyAsyncTask extends AsyncTask<Void, Void, Void>() {

        public MyAsyncTask(){}

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            myAsyncTaskIsRunning = true;
        }
        @Override
        protected Void doInBackground(Void... params) {
            try {
                Thread.sleep(2000);
            } catch (InterruptedException ex) {}
            return null;
        }

        @Override
        protected void onPostExecute(Void result){
            getResources().getString(R.string.app_name);
            myAsyncTaskIsRunning = false;
            myAsyncTask = null;
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2017-07-04T16:17:16.903

```
if (getActivity() == null) return; 
```

在某些情况下也有效。只需中断代码执行并确保应用程序不会崩溃

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-08-27T15:03:47.240

我遇到了同样的问题，我只是添加了单例实例来获取 Erick 提到的资源

```
MainFragmentActivity.defaultInstance().getResources().getString(R.string.app_name); 
```

你也可以使用

```
getActivity().getResources().getString(R.string.app_name); 
```

我希望这将有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-07-10T21:37:15.383

当加载了首选项的应用程序设置活动可见时，我遇到了类似的问题。如果我要更改其中一个首选项，然后让显示内容旋转并再次更改首选项，它会崩溃并显示片段（我的 Preferences 类）未附加到活动的消息。

调试时，当显示内容旋转时，看起来 PreferencesFragment 的 onCreate() 方法被调用了两次。这已经够奇怪了。然后我在块之外添加了 isAdded() 检查，它将指示崩溃并解决了问题。

这是更新首选项摘要以显示新条目的侦听器的代码。它位于我的 Preferences 类的 onCreate() 方法中，该方法扩展了 PreferenceFragment 类：

```
public static class Preferences extends PreferenceFragment {
    SharedPreferences.OnSharedPreferenceChangeListener listener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // ...
        listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
            @Override
            public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
                // check if the fragment has been added to the activity yet (necessary to avoid crashes)
                if (isAdded()) {
                    // for the preferences of type "list" set the summary to be the entry of the selected item
                    if (key.equals(getString(R.string.pref_fileviewer_textsize))) {
                        ListPreference listPref = (ListPreference) findPreference(key);
                        listPref.setSummary("Display file content with a text size of " + listPref.getEntry());
                    } else if (key.equals(getString(R.string.pref_fileviewer_segmentsize))) {
                        ListPreference listPref = (ListPreference) findPreference(key);
                        listPref.setSummary("Show " + listPref.getEntry() + " bytes of a file at once");
                    }
                }
            }
        };
        // ...
    } 
```

我希望这对其他人有帮助！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-08T22:39:41.653

如果您扩展`Application`该类并维护一个静态的“全局”上下文对象，如下所示，那么您可以使用它而不是活动来加载字符串资源。

```
public class MyApplication extends Application {
    public static Context GLOBAL_APP_CONTEXT;

    @Override
    public void onCreate() {
        super.onCreate();
        GLOBAL_APP_CONTEXT = this;
    }
} 
```

如果您使用它，您可以摆脱`Toast`资源加载而不必担心生命周期。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-18T12:33:09.670

在我的情况下，片段方法已被调用

```
getActivity().onBackPressed(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-05T11:46:52.577

一个旧帖子，但我对投票最多的答案感到惊讶。

正确的解决方案应该是取消 onStop 中的异步任务（或在您的片段中适当的地方）。这样您就不会引入内存泄漏（保持对已销毁片段的引用的异步任务），并且您可以更好地控制片段中发生的事情。

```
@Override
public void onStop() {
    super.onStop();
    mYourAsyncTask.cancel(true);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-28T01:41:17.563

我在 Xamarine Android 中有类似的错误消息**“Fragment MyFragment 未附加到上下文” 。**

由于此资源调用而出现此错误消息

```
button.Text = Resources.GetString(Resource.String.please_wait) 
```

我确实通过在 Xamarine Android 中使用来解决这个问题。

```
if (Context != null && IsAdded){ 
    button.Text = Resources.GetString(Resource.String.please_wait);
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-10-25T09:58:48.767

简单的解决方案和工作 100%

```
if (getActivity() == null || !isAdded()) return; 
```

# javascript - JSON 数据分组方式

> ID：10919241
> 
> 赞同：1
> 
> 时间：2012-06-06T17:36:41.890
> 
> 标签：javascript, json

我有包含整个数据库记录的 json 数据，现在我需要对返回的 json 数据执行分组，并对特定类别进行排序。

我认为对 json 数据进行排序很容易，但我不确定如何使用 group by。我需要对特定的数据集进行分组。

任何帮助/建议都会有很大帮助。

谢谢拉维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:11:27.807

```
var obj = [{ "session":"1","page":"a"},
       { "session":"1","page":"b"},
       { "session":"1","page":"c"},
       { "session":"2","page":"d"},
       { "session":"2","page":"f"},
       { "session":"3","page":"a"}];

function GroupBy(myjson,attr){
    var sum ={};

    myjson.forEach( function(obj){
       if ( typeof sum[obj[attr]] == 'undefined') {
         sum[obj[attr]] = 1;
       }
       else {
         sum[obj[attr]]++;
       } 
    });
    return sum;
}

var result = GroupBy(obj,"page");

console.log("GroupBy:"+ JSON.stringify(result));
///  GroupBy(obj,"session")  --> GroupBy:{"1":3,"2":2,"3":1}
///  GroupBy(obj,"page")  --> GroupBy:{"a":2,"b":1,"c":1,"d":1,"f":1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:44:27.953

检查[http://linqjs.codeplex.com](http://linqjs.codeplex.com)或[http://jslinq.codeplex.com](http://jslinq.codeplex.com/)。它是模仿 LINQ 的 javascript 库。以下是与您类似的其他问题：[Javascript 动态分组](https://stackoverflow.com/questions/1267158/javascript-dynamic-grouping)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T21:39:41.927

```
 var obj = [{Poz:'F1',Cap:10},{Poz:'F1',Cap:5},{Poz:'F1',Cap:5},{Poz:'F2',Cap:20},{Poz:'F1',Cap:5},{Poz:'F1',Cap:15},{Poz:'F2',Cap:5},{Poz:'F3',Cap:5},{Poz:'F4',Cap:5},{Poz:'F1',Cap:5}];
Array.prototype.sumUnic = function(name, sumName){
    var returnArr = [];
    var obj = this;
    for(var x = 0; x<obj.length; x++){
        if((function(source){
            if(returnArr.length == 0){
                return true;
            }else{
                var isThere = [];
                for(var y = 0; y<returnArr.length; y++){
                    if(returnArr[y][name] == source[name]){
                        returnArr[y][sumName] = parseInt(returnArr[y][sumName]) + parseInt(source[sumName]);
                        return false;
                    }else{
                        isThere.push(source);
                    }
                }
                if(isThere.length>0)returnArr.push(source);
                return false;
            }
        })(obj[x])){
            returnArr.push(obj[x]);
        }
    }
    return returnArr;
}
obj.sumUnic('Poz','Cap');
// return "[{"Poz":"F1","Cap":45},{"Poz":"F2","Cap":25},{"Poz":"F3","Cap":5},{"Poz":"F4","Cap":5}]" 
```

# mysql - 1 列中的 2 个表

> ID：10919243
> 
> 赞同：0
> 
> 时间：2012-06-06T17:36:44.610
> 
> 标签：mysql, join

我需要一个查询来加入 1 列中的 2 个表

就像是：

从猫、狗中选择名称_猫、名称_狗；

我的结果在 1 列

```
+-------------+
| name_animal |
+-------------+
| cat_1       |
| dog_1       |
| cat_2       |
| cat_3       |
| dog_2       |
+-------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:40:04.513

这可以使用`UNION`. 考虑相同的示例，查询应该是：

```
mysql> SELECT `name_cat` FROM `cat` UNION SELECT `name_dog` FROM `dog`;
+---------------+
| `name_cat`    |
+---------------+
| cat_1         |
| dog_1         |
| cat_2         |
| cat_3         |
| dog_2         |
+---------------+ 
```

示例如下：

```
mysql> SELECT REPEAT('a',1) UNION SELECT REPEAT('b',10);
+---------------+
| REPEAT('a',1) |
+---------------+
| a             |
| bbbbbbbbbb    |
+---------------+ 
```

希望这可以帮助。:)

# asp.net - GridView TemplateField 绑定到 SQL 语句？

> ID：10919250
> 
> 赞同：0
> 
> 时间：2012-06-06T17:37:06.740
> 
> 标签：asp.net, sql, gridview, drop-down-menu, templatefield

我有一个带有包含下拉列表的模板字段的 Gridview。我需要使用 sql 语句填充下拉列表。我的gridview代码是这样的：

```
<asp:TemplateField HeaderText="Ledger">
    <EditItemTemplate>
        <asp:DropDownList ID="ddlItemTempLedger" runat="server" Width="61px">
        </asp:DropDownList>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="Label1" runat="server"></asp:Label>
    </ItemTemplate>
    <ItemStyle Width="75px" />
</asp:TemplateField> 
```

我需要填充它的 sql 语句是这样的：

```
SELECT V_VendorNo + '|' + V-VendorName FROM VendorTbl 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:42:08.357

您不会在网格的 RowDataBound 事件中获取下拉列表并将数据源分配给它并绑定它。

```
protected void GrdViewUsers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        DropDownList ddlItemTempLedger = e.Row.FindControl("ddlItemTempLedger ") as DropDownList ;
        ddlItemTempLedger.DataSource = dt; //DataTable from database
        ddlItemTempLedger.DataTextField = "FieldForTextInDataTabledt";
        ddlItemTempLedger.DataValueField = "FieldForValueInDataTabledt";
        ddlItemTempLedger.DataBind();     
    }
} 
```

# mercurial - Mercurial 存储库日志，包括子存储库

> ID：10919251
> 
> 赞同：2
> 
> 时间：2012-06-06T17:37:06.823
> 
> 标签：mercurial, mercurial-subrepos, changelist

在我们的构建脚本中，我使用模板`hg log`命令来获取特定构建的更改列表。这很好用，但不幸的是它不包括子存储库中的更改（我们有超过 10 个）。我也想包括它们，但似乎没有这样的命令。

我正在考虑编写一个脚本：

1.  枚举起始修订版的 .hgsubstate 文件
2.  找出子存储库及其起始修订版
3.  `hg log`为他们奔跑
4.  按日期合并和排序结果。

还有其他更简单的方法吗？也许我缺少一个命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-16T03:39:39.300

由于它显然在待办事项上已有一段~~时间~~ **并且**不可用，因此我编写了自己的`subtools.py`：

```
from __future__ import print_function
import hglib
import os
import sys

def get_substate(client, rev=None):
    substate_filename = os.path.join(client.root(), '.hgsubstate')
    if os.path.isfile(substate_filename):
        lines = client.cat([substate_filename], rev).split('\n')
        return { key : value for (value,key) in [ line.split() for line in lines if line ]}
    else:
        return {}

def substate_diff(client, revA, revB):
    substate_a = get_substate(client, revA)
    substate_b = get_substate(client, revB)
    key_union = set(substate_b) | set(substate_a)

    diff = {}
    for key in key_union:
       diff[key] = (substate_a[key], substate_b[key])

    return diff

def recursive_log(path, revA, revB):
    logtree = { 'logs': [], 'subrepos': {}}

    try:
        client = hglib.open(path)
    except:
        return logtree

    if revA == revB:
        print("no changes on {}".format(client.root()))
        return logtree

    print("Checking {} between {} and {}...".format(client.root(), revA, revB))

    for key, revisions in substate_diff(client, revA, revB).iteritems():
        if revisions[0] and revisions[1]:
            logtree['subrepos'][key] = recursive_log(os.path.join(client.root(),key), revisions[0], revisions[1])
        elif revisions[0] and not revisions[1]:
            print("removed subrepo with path: %s"%key, file=sys.stderr)
        elif revisions[1] and not revisions[2]:
            print("added subrepo with path: %s"%key, file=sys.stderr)

    logtree['logs'] = client.log("%s:%s"%(revA,revB))
    return logtree 
```

像这样使用：

```
In [15]: log = subtools.recursive_log('./', '947', '951') 
```

# android - JSON 或 HTML：设计我的服务器端以减少延迟并支持多个客户端

> ID：10919252
> 
> 赞同：1
> 
> 时间：2012-06-06T17:37:11.467
> 
> 标签：android, ruby-on-rails, ios, api

我是一名新手 Rails 和 Web 开发人员。我对 iOS 有一些经验。

我第一次创建 Web 应用程序。但是，现在所有的 Web 应用程序都必须得到 iphone、Android 和其他客户端的支持。在花了 2-3 个月了解 Rails，然后是 HTML、Javascript、JQuery 和编写代码之后。我意识到呈现 HTML 和网页时存在延迟。

所以我在想，如果我想制作一个 Web 应用程序，我想通过设计使其模块化。我的意思是我只想在每个方法中渲染 JSON，让客户弄清楚如何渲染和设计视图。牢记这一点，我在网上搜索解决方案，看到人们在谈论创建 API。

我读了一些关于它的内容。但是我的知识还是有漏洞的。所以我想知道如何设计一个可供不同客户端使用的 Web 应用程序的服务器端：iOS、Android 和浏览器。有一定的设计理念吗？多斯？不要？有什么注意事项吗？这其中涉及到哪些技术？

网络上似乎有很多零散的信息，但是否有 1 个地方可以让我了解运行此应用程序需要了解的所有内容或大部分内容？

我将衷心感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:50:10.537

Rails 使得以各种格式显示信息变得非常简单。在 Rails 3.1 中专门的**respond_to**方法能够让控制器以不同的方式向客户端发送数据。这是一个例子：

```
def index
  @categories = Category.query(params)

  respond_to do |format|
    format.html
    format.json { render_for_api :complete, :json => @categories }
  end
end 
```

如果浏览器/iPhone/Android 设备向 index 操作发出请求，控制器将响应 html 和相应的视图 index.html.erb，但如果设备请求 index.json，rails 控制器将响应JSON 表示法上的对象表示。（这里我使用了一个名为acts_as_api 的gem 来帮助我创建json）。

在我看来，没有确定的方法可以做到这一点，但 Rails 支持开发，让您可以轻松地将您的应用程序扩展到不同的设备上。

# mysql - Doctrine ClassTable 与 SingleTable 继承（特定于项目）

> ID：10919253
> 
> 赞同：0
> 
> 时间：2012-06-06T17:37:18.093
> 
> 标签：mysql, database-design, doctrine-orm

我正在开发一个艺术网站，用户可以在其中发布不同类型的艺术：图像、文学、字体等。我的问题是关于`Work`表格的数据库结构。

每件作品都有基本相同的字段（id、所有者、名称、描述），但也有一些独特的字段：

**图片**：`image_path`，`album_id (relation)`

**文学**：`text`，`book_id (relation)`

**字体**：`file_path`

最好的表结构是什么？请记住，我将拥有`Comments`和其他关系表指向`Work`

## 单表继承

**优点**：易于管理和使用。不需要 JOINS。

**缺点**：没有分隔唯一字段（FontWork 将有`book_id`,`album_id`等）

## 类表继承

**优点**：每个表将只有它的唯一字段。

**缺点**： [性能](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#id4)。几乎每个执行的查询都有多个 JOINS。

我想听听您对此的看法，并获得新的实施思路！

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:00:33.247

我建议你从简单的单表继承开始，因为你的类只有很少的字段，还有一个类型属性（一个很小的整数）来分隔不同的实体。

这也意味着您的评论和工作表将合并到一个表中。随着数字的增长，您可以对表进行分区以提高性能。

底线是从简单开始，随着您的需求变化而变得更加复杂。

# c# - 放大焦点上的数据网格单元格

> ID：10919255
> 
> 赞同：2
> 
> 时间：2012-06-06T17:37:21.447
> 
> 标签：c#, wpf

我在一个具有固定高度和宽度的窗口中有一个 2 列 3 行 WPF 数据网格，其中包含 (6) 张图片。我想做到这一点：当用户点击一个单元格时，图片将被放大到类似弹出窗口或填满整个网格；当点击这张单张/对焦的图片时，它会回到原来的位置。（注意：我不想使用弹出窗口来执行此操作。）

# javascript - JS按钮，绑定功能不起作用

> ID：10919258
> 
> 赞同：1
> 
> 时间：2012-06-06T17:37:34.637
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 js 和 jquery。我有一个正在处理的测试登录页面，但登录按钮上的绑定似乎有问题。在 Chrome 中，我看到 js 文件正在加载，但是当您单击按钮时，它只会刷新页面。如果您输入错误的信息，它不会显示警报部分或抖动，如果您输入正确的信息，它不会重定向到主页。这是我的代码：

HTML：

```
<body>
    <div id="content">

        <section class="ui-widget ui-corner-all">
            <header class="ui-widget-header ui-corner-top">
                Test Login
            </header>

            <div class="ui-widget-content ui-corner-bottom">

                <p class="ui-state-error">Uername / Password Incorrect.</p>

                <form>
                    <div>
                        <label for="username">Username:</label>
                        <input id="username" type="text">
                    </div>

                    <div>
                        <label for="password">Password:</label>
                        <input id="password" type="password">
                    </div>

                    <div>
                        <input id="btnLogin" type="submit" value="Login">
                    </div>
                </form>
            </div>
        </section>
    </div>

    <div class="ui-widget-overlay" style"z-index: 1002;"> </div>

</body> 
```

JS：

```
$(".ui-state-error").hide();

$("#btnLogin").button()

.bind ("click", function() {
    if($("#username").val() != "test" && $("#password").val() != "test") {
        $(".ui-state-error").show();
        $("#login section").effect("shake", 150);
    }
    else {
        document.location = 'index.html';
    }

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:38:42.027

试试这个

```
$(function(){
    $("#btnLogin").button().bind ("click", function() {
        if($("#username").val() != "test" && $("#password").val() != "test") {
            $(".ui-state-error").show();
            $("#login section").effect("shake", 150);
        }
        else {
            document.location = 'index.html';
        }

        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:59:03.933

检查这个：http: [//jsfiddle.net/Q5YeX/](http://jsfiddle.net/Q5YeX/)

我认为您没有引用正确的 jquery UI lib，或者您以错误的方式引用它

# c# - 在 Windows phone 7 中存储数据

> ID：10919261
> 
> 赞同：0
> 
> 时间：2012-06-06T17:37:51.753
> 
> 标签：c#, windows-phone-7, windows-phone

我正在创建一个药物提醒应用程序，我打算将所有数据保存在一个数组列表中，我可以将这个数组列表存储到存储中吗？如果，如果你能告诉我怎么做，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:35:12.953

对的，这是可能的。请检查此链接以查看[示例](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)

这很像使用 IO 和文件系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:58:02.617

我在这里阅读了您的一些帖子，我认为您应该查看[一些背景阅读](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Open-Source-Databases-and-Helper-Libraries)以提供帮助。如果您绘制出您的架构，那么这些示例将从长远来看会有所帮助。

# c# - 根据另一个列表框的选择填充 WPF 列表框

> ID：10919262
> 
> 赞同：0
> 
> 时间：2012-06-06T17:38:03.040
> 
> 标签：c#, wpf, listbox

我有一个绑定到 observablecollection 的列表框。observable 集合包含一个对象列表，每个对象都有自己的 observablecollection。我想要的是单击第一个列表框中的一个项目，并将它的列表显示在第二个列表框中。我可以在纯 WPF 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:43:20.427

只需将第二个列表框的 ItemsSource 绑定到第一个列表框的 SelectedItem。

编辑：这是一些代码。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        TestItems = new ObservableCollection<Test>();
        InitializeComponent();

        for (int i = 0; i < 5; i++)
            TestItems.Add(InitTest(i));
    }

    public ObservableCollection<Test> TestItems { get; set; }

    private Test InitTest(int index)
    {
        Test test = new Test();
        test.Name  = "Test" + index.ToString();
        test.Test2Items =  new ObservableCollection<Test2>();

        for (int i = 0; i <= index; i++)
        {
            Test2 test2 = new Test2();
            test2.Label = test.Name + "_label" + i.ToString();
            test.Test2Items.Add(test2);
        }
        return test;
    }
}

public class Test
{
    public string Name { get; set; }
    public ObservableCollection<Test2> Test2Items { get; set; }

    public override string ToString()
    {
        return Name;
    }
}

public class Test2
{
    public string Label { get; set; }
    public override string ToString()
    {
        return Label;
    }
} 
```

Xaml

```
 <Window x:Class="WpfApplication1.MainWindow"
        x:Name="MyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WPF Example" Height="300" Width="400">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <ListBox x:Name="ListBox1" Grid.Column="0" ItemsSource="{Binding TestItems, ElementName=MyWindow}" />
        <ListBox Grid.Column="1" ItemsSource="{Binding SelectedItem.Test2Items, ElementName=ListBox1}" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:05:05.157

您的视图模型可能看起来像这样：（我在这里使用我的[BindableBase](http://northhorizon.net/2011/the-right-way-to-do-inotifypropertychanged/)）

```
class MainViewModel : Bindablebase {
    public ObservableCollection<ItemViewModel> Items { get; private set; }

    private ItemViewModel _selectedItem;
    public ItemViewModel SelectedItem {
        get { return _selectedItem; }
        set { SetProperty(ref _selectedItem, value, "SelectedItem"); }
    }
}

class ItemViewModel : BindableBase {
    public ItemViewModel (string name) {
        Name = name;
        Items = new ObservableCollection<string>();
    }

    public string Name { get; private set; }

    public ObservableCollection<string> Values { get; private set; }

    private string _selectedValue;
    public string SelectedValue {
        get { return _selectedValue; }
        set { SetProperty(ref _selectedValue, value, "SelectedValue"); }
    }
} 
```

然后你的观点会有：

```
<ComboBox ItemsSource="{Binding Items}" 
          SelectedItem="{Binding SelectedItem}"
          DisplayMemberPath="Name"/>

<!-- 
Note that the DataContext here could be ommitted
and the bindings would be like {Binding SelectedItem.Values}
-->
<ComboBox DataContext="{Binding SelectedItem}" 
          ItemsSource="{Binding Values}" 
          SelectedItem="{Binding SelectedValue}"/> 
```

# jquery - 如何将生成的 jQuery 表单记录到 xml 文件中？

> ID：10919265
> 
> 赞同：2
> 
> 时间：2012-06-06T17:38:19.420
> 
> 标签：jquery, xml, jsp

我设法制作了某种形式，通过 jquery 生成考试。现在我想发布它。我正在使用jsp。是否可以将我生成的考试表格记录到 xml 文件中，并在用户想要参加考试时从服务器读取它，它看起来像一个考试表格？如果是，我该怎么做？你能给我一些例子吗？

提前致谢， 帖木儿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:18:00.040

您可以[`$.html()`](http://api.jquery.com/html/)在 jQuery 中获取生成的 HTML。

```
var html = $("#idOfElementThatContainsGeneratedForm").html(); 
```

然后你需要以某种方式将它作为请求参数发送到服务器。也许通过[`$.post()`](http://api.jquery.com/jQuery.post/)？

```
$.post("urlOfServletThatProcessesSubmit", { "html" : html }); 
```

最后你可以在servlet中得到它，如下所示：

```
String html = request.getParameter("html"); 
```

如有必要，您可以通过 JTidy 等基于 JAXP 的 HTML 解析器将其转换为 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:20:19.300

1.) The first step will be to send the data from jQuery to a php file. This can be done with [`$.post()`](http://api.jquery.com/jQuery.post/).
2.) In the php file, you will need to assign the POSTed variables to "normal" variables using the following syntax: `$localvar = $_POST['nameOfPostedVar']`
3.) You then can perform file operations using php. `$file = fopen('filename', 'w')` (it'll create the file if it doesn't exist, the w tells php to open the file for writing). Write to the file using `fwrite($file, $stuffForWriting)`. When you're done, make sure to `fclose($file)`.

# facebook - Facebook 应用程序与粉丝专页时间线的集成

> ID：10919274
> 
> 赞同：0
> 
> 时间：2012-06-06T17:39:00.550
> 
> 标签：facebook

我一直在尝试将 ruby​​ 内置应用程序上传到我管理的 Facebook 页面，并不断收到“抱歉，出了点问题”和 191 错误。

我已经优化了所有设置，并一直使用这个 URL 将其添加到我的粉丝页面。

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

应用编号：251045461667460

网址：

[https://www.electric-moon-2772.herokuapp.com/](https://www.electric-moon-2772.herokuapp.com/) https://apps.facebook.com/your_vision_hd/

我还填写了所需的所有必要详细信息。我无法弄清楚为什么这不起作用。

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:48:05.810

当我访问时：[https://apps.facebook.com/your_vision_hd/](https://apps.facebook.com/your_vision_hd/)它说[https://www.electric-moon-2772.herokuapp.com/](https://www.electric-moon-2772.herokuapp.com/)暂时关闭或已移动......此外，您的 SSL 证书是无效，也许这就是原因...

# c - 结构内成员变量的偏移量

> ID：10919276
> 
> 赞同：0
> 
> 时间：2012-06-06T17:39:07.533
> 
> 标签：c, compiler-construction

> **可能重复：**
> [编译时的偏移量](https://stackoverflow.com/questions/1379298/offsetof-at-compile-time)

如何在 C 的结构中找到成员的偏移量？例如，我怎样才能找到`t`这个结构中的偏移量：

```
struct test
{
  int a;
  int b;
  struct test* t;      
  int c;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:40:25.340

使用来自:的`offsetof()`宏。（[理想的例子](http://ideone.com/BZ2Hv)）`stddef.h``offsetof(struct test, t)`

# php - 如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？

> ID：10919277
> 
> 赞同：16
> 
> 时间：2012-06-06T17:39:08.967
> 
> 标签：php, mysql, database, deprecated

我仍然主要从我买的书上学习，但今天我知道我的书很旧，尽管我今年买了一本关于 PHP 编程的书。现在我知道 PHP 中的 mysql_* 命令已被弃用，应该用更安全和稳定的预处理语句和 PDO 替换。所以我让自己根据它重写我所有的网络，也许我需要你的一些建议如何正确地做到这一点，并从你们所有更有经验的人那里工作:)

所以我将在这里只用主要部分（连接到数据库并选择数据库）开始我的重写（其余的我可以用谷歌和手册自己做）。我会在这里写下我的旧脚本，并问你我是否做对了所有事情并且没有遗漏任何东西，我希望这对其他人来说也是一些很好的手册/答案。所以让我们开始吧。

所以在配置中我有这样的东西：

```
$db = new dbConn('127.0.0.1', 'root', 'pass', 'people', 'animals'); 
```

应该是这样的：

```
$db = new PDO('mysql:host=127.0.0.1;dbname=people;charset=UTF-8', 'root', 'pass'); 
```

对？但是当我以后需要选择数据库时，我应该不这样做`dbname=people;`吗？但是以后如何选择数据库呢？

这是我唯一的一个重写脚本，它在大多数 Web 项目中都是基本的，我希望它不仅能让我了解新的 PDO 系统是如何工作的：

```
class dbConn
{
  public function __construct($server, $user, $pass, $db_people, $db_animals)
  {    
    if (!empty($server) && !empty($user) && !empty($pass) && !empty($db_people) && !empty($db_animals))
    {
      $this->server = $server;
      $this->user =  $user;
      $this->pass = $pass;
      $this->db_people = $db_people;  
      $this->db_animals = $db_animals;  
      $this->connect(); 
    }  
    else
    {
      die("Set up connection to db");
    }
  }

  public function connect()
  {
    $this->conn = mysql_connect($this->server, $this->user, $this->pass) or die ('cannot connect to MySQL');
  }

  public function selectDb($database)
  {
    switch($database)
    {
      case 'people':
        mysql_select_db($this->db_people, $this->conn) or die ('cannot connect to database '.$this->db_people.'.');
        mysql_query("SET NAMES 'utf8'");
        break;

      case 'animals':
        mysql_select_db($this->db_animals, $this->conn) or die ('cannot connect to database '.$this->db_animals.'.');
        mysql_query("SET NAMES 'utf8'"); 
    }
  }

  public function __destruct() 
  {
    if (!empty($this->conn))
    {
      mysql_close($this->conn); 
    }
  }  
} 
```

因此，根据我从 Google 和 Wiki 中了解到的信息 - 类似`public function __construct`并且`public function __destruct()`不再需要的功能，对吧？与`public function connect()`SO 之类的功能相同，只剩下什么了，`public function selectDb($database)`但我不知道如何正确地做到这一点，而不会破坏与数据库的所有连接。因为在我的其余代码（此处未提及）中，我可以通过此代码轻松选择数据库：`$this->db->selectDb("people");`但是使用准备好的语句，我不知道这是否可能以简单的方式实现。我希望你的一些建议能帮助我和其他用户更好地理解这个新代码。您可能拥有的代码中的其他部分在此[PDO Tutorial for MySQL Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)中进行了说明。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:48:45.093

实际上，一个简单、甜蜜和简短的：是的，不再需要了。

让我们回顾一下代码，而不是我们丢失了一些东西：

*   `__construct`- 构造函数仅包含所有配置。PDO 在这里有一个更简单的概念，一个包含最多信息的连接字符串：

    > ```
    >  mysql:host=127.0.0.1;dbname=people;charset=UTF-8 
    > ```

    另外 PDO 提供了现成的构造函数供使用，所以不需要加倍。

*   `connect`- 不再需要连接功能。这是通过已经实例化 PDO 来完成的。[您可以查找异常，PHP 手册在其构造函数页面上](http://php.net/pdo.construct#example-966)有一个示例。

*   `selectDb`- 这个复杂的功能也不再需要了。哇，由于 PDO 连接字符串，我们可以删除第三个函数。这么少的字符却有很大的力量。干杯!

*   `__destruct`- 析构函数。公平地说：MySQL 也不需要这个。但是，使用 PDO，我们可以免费获得它 - 无需编写任何代码。

看起来挺好的！通过删除过时的代码，您设法从那个晦涩的数据库类迁移到 PDO！恭喜：

```
$db = new PDO('mysql:host=127.0.0.1;dbname=people;charset=UTF-8', 'root', 'pass'); 
```

如果您现在想，如果我想自己拥有数据库类怎么办？好吧，您可以这样做，因为您可以从 PDO 扩展（是的，可行！）：

```
class DB extends PDO
{
   ... my super-new-shiny-code
} 
```

为什么你可能想这样做？不知道，但也许它对您的代码更流畅。如果您正在寻找更好的代码示例，我在[PHP/MySQL Table with Hyperlinks](https://stackoverflow.com/a/10622205/367456)中有一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:47:51.230

我认为在应用程序中切换数据库的最简单方法是：

```
$pdo_instance->query("USE people"); 
```

和

```
$pdo_instance->query("USE animals"); 
```

或者可能更好（和更清洁）的方式可能是

```
$db_people = new PDO('mysql:host=127.0.0.1;dbname=people;charset=UTF-8', 'root', 'pass'); 
```

和

```
$db_animals = new PDO('mysql:host=127.0.0.1;dbname=animals;charset=UTF-8', 'root', 'pass'); 
```

如果您将班级中的数据库标记为活动的，则可以使用`$db_people->query()`或访问数据`$db_animals->query()`。

# ruby-on-rails - 如何在 Wordpress 中创建包含最后一篇文章标题和内容的 xml 提要

> ID：10919278
> 
> 赞同：0
> 
> 时间：2012-06-06T17:39:10.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wordpress

我在我的 Rails 应用程序中有一个 wordpress 博客设置，我需要在我的 Rails 主页上显示最后一篇 WP 帖子的标题和部分内容。我想我需要创建一个 xml 提要，它将输出我的最后一篇文章，每次调用主页时我都会用 rails 解析它......你知道如何设置它吗？任何易于生成器的wordpress插件可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:25:42.760

您可以使用标准的 wordpress xml 提要，可从`your_blog.com/feed`. 如果您想将其设置为仅显示过去的选项，则`your_blog.com/wp-admin/options-reading.php`

然后你可以手动解析 xml，或者使用 nokogiri 之类的东西来为你做 - [http://nokogiri.org/tutorials/parsing_an_html_xml_document.html](http://nokogiri.org/tutorials/parsing_an_html_xml_document.html)

# ruby-on-rails-3.1 - 为本地 Rails 开发配置/使用 FRAMEY 回调

> ID：10919282
> 
> 赞同：0
> 
> 时间：2012-06-06T17:39:23.200
> 
> 标签：ruby-on-rails-3.1

有谁知道如何配置/使用 Framey (framey.com) 回调到 localhost:3000？

嗨，我将我的帐户配置为回调到 localhost:3000 但它不起作用，在框架内没有人回答我......

**有人知道任何框架竞争对手吗？** 想法是允许用户直接从他的台式机/笔记本电脑网络摄像头上传他的视频。我正在使用带有carrierwave的Rail 3.1.3在s3上进行文件管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:47:54.880

Framey 不会回调到 localhost。而是为开发机器（或 IP 地址）创建一个 dyndns/no-ip/something else 并在帐户/回调中配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:21:35.840

Framey's Get Satisfaction 有一个答案可能会有所帮助：

[https://getsatisfaction.com/framey/topics/callback_does_not_work_for_free_user](https://getsatisfaction.com/framey/topics/callback_does_not_work_for_free_user)

# wcf - 使用 WCF 自托管配置 https 端点

> ID：10919283
> 
> 赞同：1
> 
> 时间：2012-06-06T17:39:25.283
> 
> 标签：wcf, https, endpoint

我为我的自托管 WCF 服务创建了安全模式="TransportWithMessageCredential" 的 basichttpendpoint。

我的服务器配置有：

```
enter code here

   <system.serviceModel>    
       <bindings>
    <basicHttpBinding>
     <binding name="BasicHttpBinding_IViewerManager" maxBufferSize="655360000"                  maxReceivedMessageSize="655360000" messageEncoding="Mtom" textEncoding="utf-8" transferMode="Buffered">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
    <security mode="TransportWithMessageCredential">
          <message clientCredentialType="Certificate" />
    </security>

           </binding>
     </basicHttpBinding>
    </bindings>

<services>
    <service behaviorConfiguration="SecureBehavior" name="Lumedx.ApolloLXPACS.ViewerServiceLibrary.ViewerManager">

    <endpoint name="basicHTTP" address="https://localhost:5100/ViewerService" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IViewerManager" contract="Lumedx.ApolloLXPACS.ServiceContracts.IViewerManager"/>
    <host>
     <baseAddresses>
      <add baseAddress="https://localhost:5100/ViewerService"/>
                    </baseAddresses>
                </host>
            </service>
        </services>

        <behaviors>
            <endpointBehaviors>
                <behavior name="HttpsBehavior">
                </behavior>
            </endpointBehaviors>
            <serviceBehaviors>

                <behavior name="SecureBehavior">

                    <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                    <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
                    <serviceCredentials>
                        <serviceCertificate findValue="RootCATest"
                                            storeLocation="LocalMachine"
                                            storeName="My"
                                            x509FindType="FindByIssuerName" />
                    </serviceCredentials>
                </behavior>

            </serviceBehaviors>
        </behaviors>

    </system.serviceModel>
my windows client config has:
<?xml version="1.0"?>
<configuration>

    <appSettings>
        <add key="priorityEndpoint1" value="basicHttpEndpoint"/>

        <add key="maxCommunicationRetries" value="0"/>
    </appSettings>

    <system.serviceModel>

        <bindings>

            <basicHttpBinding>
                <binding name="BasicHttpBinding_IViewerManager" maxBufferSize="655360000" maxReceivedMessageSize="655360000" messageEncoding="Mtom" textEncoding="utf-8" transferMode="Buffered">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
                    <security mode="TransportWithMessageCredential">
                        <message clientCredentialType="Certificate" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>

        <client>
            <endpoint name="basicHttpEndpoint" address="https://10.10.10.100:5100/ViewerService/" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IViewerManager" contract="Lumedx.ApolloLXPACS.ServiceContracts.IViewerManager" behaviorConfiguration="HttpsBehavior"/>
        </client>

        <behaviors>
            <endpointBehaviors>
                <behavior name="HttpsBehavior">
                    <clientCredentials>
                        <clientCertificate findValue="RootCATest"
                                            storeLocation="LocalMachine"
                                            storeName="My"
                                            x509FindType="FindByIssuerName" />
                    </clientCredentials>
                </behavior>
            </endpointBehaviors>
        </behaviors>
    </system.serviceModel>
< 
```

我已经安装并配置了证书。

我正在将我的 Windows 客户端与带有 https 端点的自托管 WCF 服务连接起来。我使用wireshark捕获了网络流量。我在网络流量中看到的只是服务器和客户端之间的 TCP 数据包。当我关注 TCP 流时，消息似乎没有被加密。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:41:09.600

安全模式`TransportWithMessageCredential`对传输 (SSL) 进行加密，并且不加密消息正文。

使用您的证书进行加密。

如果您看到未加密的数据，则发生以下情况之一：

1.  出于某种原因，流量未使用 ssl 加密
2.  Wireshark 可以访问您的证书和使用它的加密流量。

这看起来和你做的一样吗？[http://trycatch.be/blogs/decaluwet/archive/2009/04/08/decrypting-ssl-traffic-using-wireshark.aspx](http://trycatch.be/blogs/decaluwet/archive/2009/04/08/decrypting-ssl-traffic-using-wireshark.aspx)

无论如何，如果启用了传输级加密并且您的证书没有受到损害，那么您应该是安全的。

# html - 涉及行跨度时，根据内容自动调整 HTML 表格单元格的高度

> ID：10919286
> 
> 赞同：7
> 
> 时间：2012-06-06T17:39:35.667
> 
> 标签：html, html-table, cell

有没有办法根据内容自动调整 HTML 表格高度？此外，如果它是具有多个行跨度的相邻单元格旁边的一个单元格（或多个单元格）。

例如，如果我有这样的表格（右侧的单元格有 Rowspan="2" 并且单元格内容的高度 = 600px，在左侧的每个单元格中单元格内容的高度 = 150px）：

![单元格均匀间隔](../Images/862f5da2b0f748ce97eced05b7b0edd0.png)

左侧的 2 个单元格同意之间存在间隙，因为单元格本身会自动调整其高度。我希望它看起来像这样：

![单元格高度调整为内容](../Images/79fc0e136324489646fb566420b05838.png)

顶部单元格自动折叠到单元格内容高度的位置。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:36:49.037

这会将最后一行单元格设置为正确的高度（[demo](http://jsfiddle.net/jefferyto/jrut4/)）：

```
function grow(td) {
    var table, target, high, low, mid;

    td = $(td);
    table = td.closest('table');
    target = table.height();
    low = td.height();

    // find initial high
    high = low;
    while (table.height() <= target) {
        td.height(high *= 2);
    }

    // binary search!
    while (low + 1 < high) {
        mid = low + Math.floor((high - low) / 2);
        td.height(mid);
        if (table.height() > target) {
            high = mid;
        } else {
            low = mid;
        }
    }

    td.height(low);
}

$('tr:last-child td').each(function() { grow(this); }); 
```

将其转换为纯 JavaScript 应该很简单。

* * *

**更新：**对于更复杂的表，您需要将最后一行替换为（[演示](http://jsfiddle.net/jefferyto/jrut4/8/)）：

```
$.each($('td').get().reverse(), function() { grow(this); }); 
```

这个想法是调用`grow()`每个单元格，从最后一行开始向上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:53:00.657

考虑到 table id="mytable" 它将是：

```
 $("#mytable").find("td").each(function(){ 

    var ContentHeight = $($(this).html()).height();
    $(this).height(ContentHeight);

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:05:37.417

我认为最好像这样创建[http://jsfiddle.net/miqdad/w9QYB/](http://jsfiddle.net/miqdad/w9QYB/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:56:15.713

在您的页面末尾创建一个 javascript 代码并让它为您执行此操作：

```
 <script type="text/javascript"> 
document.getElementById("idOfTd").style.height="100px";
</script> 
```

# ruby - 如何在 ruby 中通过 SSL 调用 HTTP POST 方法？

> ID：10919287
> 
> 赞同：36
> 
> 时间：2012-06-06T17:39:41.393
> 
> 标签：ruby, ssl, curl, https

所以这是使用 curl 的请求：

```
curl -XPOST -H content-type:application/json -d "{\"credentials\":{\"username\":\"username\",\"key\":\"key\"}}" https://auth.api.rackspacecloud.com/v1.1/auth 
```

我一直在尝试使用 ruby​​ 提出同样的请求，但我似乎无法让它工作。

我也尝试了几个库，但我无法让它工作。这是我到目前为止所拥有的：

```
uri = URI.parse("https://auth.api.rackspacecloud.com")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
request = Net::HTTP::Post.new("/v1.1/auth")
request.set_form_data({'credentials' => {'username' => 'username', 'key' => 'key'}})
response = http.request(request) 
```

我收到 415 不支持的媒体类型错误。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-06T19:03:27.870

你很近，但不完全在那里。尝试这样的事情：

```
uri = URI.parse("https://auth.api.rackspacecloud.com")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
request = Net::HTTP::Post.new("/v1.1/auth")
request.add_field('Content-Type', 'application/json')
request.body = {'credentials' => {'username' => 'username', 'key' => 'key'}}.to_json
response = http.request(request) 
```

这将设置 Content-Type 标头并将 JSON 发布到正文中，而不是像您的代码那样在表单数据中发布。使用示例凭据，它仍然失败，但我怀疑它应该与那里的真实数据一起工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T17:54:42.810

[在此链接](https://www.socialtext.net/open/very_simple_rest_in_ruby_part_3_post_to_create_a_new_workspace)上有一个很好的解释如何使用 Net::HTTP 发出 JSON POST 请求。

我建议使用像[HTTParty](https://github.com/jnunemaker/httparty)这样的库。它有据可查，您可以像这样设置您的课程：

```
class RackSpaceClient
  include HTTParty

  base_uri "https://auth.api.rackspacecloud.com/"
  format :json
  headers 'Accept' => 'application/json'

  #methods to do whatever

end 
```

看起来您放置在那里的 Ruby 代码和 curl 请求之间的主要区别在于 curl 请求将 JSON（内容类型应用程序/json）发布到端点，而`request.set_form_data`将在主体中发送一个表单POST 请求（内容类型应用程序/x-www-form-urlencoded）。您必须确保双向传输的内容是 application/json 类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-02T18:03:10.837

所有其他人都太长了，这里是**ONE LINER**：

```
Net::HTTP.start('auth.api.rackspacecloud.com', :use_ssl => true).post(
      '/v1.1/auth', {:credentials => {:username => "username",:key => "key"}}.to_json,
      initheader={'Content-Type' => 'application/json'}
    ) 
```

*`to_json`需要`require 'json'`

* * *

或者如果你想

*   **不**验证主机
*   更具可读性
*   确保连接完成后关闭

然后：

```
ssl_opts={:use_ssl => true, :verify_mode => OpenSSL::SSL::VERIFY_NONE}
Net::HTTP.start('auth.api.rackspacecloud.com', ssl_opts) { |secure_connection|
  secure_connection.post(
      '/v1.1/auth', {:credentials => {:username => "username",:key => "key"}}.to_json,
      initheader={'Content-Type' => 'application/json'}
    )
} 
```

如果很难记住参数在哪里：

*   SSL 选项是每个连接的，因此您在打开连接时指定它们。
*   您可以将连接重复用于对同一基本 url 的多个 REST 调用。当然要考虑线程安全。
*   标头是“请求标头”，因此按请求指定。即在调用`get`/ `post`/ `patch`/ `...`。
*   `HTTP.start()`: 创建一个新的 Net::HTTP 对象，然后另外打开 TCP 连接和 HTTP 会话。
*   `HTTP.new()`: 创建一个新的 Net::HTTP 对象而不打开 TCP 连接或 HTTP 会话。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-25T18:35:32.783

另一个例子：

```
#!/usr/bin/ruby

require 'net/http'
require 'json'
require 'uri'

full_url = "http://" + options[:artifactory_url] + "/" + "api/build/promote/" + options[:build]

puts "Artifactory url: #{full_url}"

data = {
    status: "staged",
    comment: "Tested on all target platforms.",
    ciUser: "builder",
    #timestamp: "ISO8601",
    dryRun: false,
    targetRepo: "#{options[:target]}",
    copy: true,
    artifacts: true,
    dependencies: false,
    failFast: true,
}

uri = URI.parse(full_url)
headers = {'Content-Type' => "application/json", 'Accept-Encoding'=> "gzip,deflate",'Accept' => "application/json" }
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri, headers)
request.basic_auth(options[:user], options[:password])
request.body = data.to_json
response = http.request(request)

puts response.code
puts response.body 
```

# jquery - 如何从jquery mobile单选按钮中删除边框

> ID：10919288
> 
> 赞同：3
> 
> 时间：2012-06-06T17:39:59.780
> 
> 标签：jquery, css, jquery-mobile

我想保留一些格式，但删除 jQuery 单选按钮的边框。有一个没有阴影的主题也很好。有干净的 jQM 版本吗？我使用了themeroller，但我仍然在文本中得到阴影，并且找不到删除样式的方法......

```
<div data-role="fieldcontain" data-mini="true">
  <div data-role="fieldcontain">
    <fieldset data-role="none">
      <input type="radio" name="" id="Select_0" value="" />
      <label for="Select_0">option1</label>
      <input type="radio" name="" id="Select_1" value="" />
      <label for="Select_1">option1</label>
      <input type="radio" name="" id="Select_2" value="" />
      <label for="Select_2">option1</label>
      <input type="radio" name="" id="Select_3" value="" />
      <label for="Select_3">option1</label>
    </fieldset>
  </div> 
</div> 
```

![我想要的是](../Images/3debc343d2a0cbd6c02543e187ea0c40.png) ![无线电问题](../Images/1fcf019cc28b9ee184ba39b36086fd4a.png)

蓝色是我想要的，绿色是我现在拥有的。蓝色来自[http://www.maratz.com/blog/archives/2006/06/11/fancy-checkboxes-and-radio-buttons/](http://www.maratz.com/blog/archives/2006/06/11/fancy-checkboxes-and-radio-buttons/)我想将 jQM 样式替换为精美复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:54:51.190

以下是您可以添加到底部的一些样式，以非常接近您正在寻找的内容。（建立在 twsansbury 的答案之上）

```
/* remove rounded corners */
.ui-btn-corner-all {
  -moz-border-radius: 0px;
  -webkit-border-radius: 0px;
  border-radius: 0px;
}

/* remove border between each item */
.ui-btn-inner{
  border: 0;
}

/* remove margin between items */
fieldset .ui-radio {
  margin: 0;
}

/* change background, remove other border, unbold text */
.ui-btn-up-a, .ui-btn-hover-a, .ui-btn-down-a {
  background: #4f83bc;
  background-image: none;
  border: 0;
  font-weight: normal;
}

/* change color of radio background */
.ui-checkbox-on .ui-icon, .ui-radio-on .ui-icon {
  background-color: #456;
} 
```

结果：

![在此处输入图像描述](../Images/177d4de8d49753bcaf779df19a96174e.png)

[http://jsfiddle.net/bJHrM/7/](http://jsfiddle.net/bJHrM/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:02:11.297

通过将以下 css 放置在我的 jquery 移动主题的底部，我能够删除单选按钮和复选框按钮周围的边框，以及删除文本阴影：

```
.ui-checkbox .ui-btn-inner,
.ui-radio .ui-btn-inner
{
  border: none;
}

.ui-checkbox .ui-btn-up-a,
.ui-checkbox .ui-btn-hover-a,
.ui-checkbox .ui-btn-down-a,
.ui-radio .ui-btn-up-a,
.ui-radio .ui-btn-hover-a,
.ui-radio .ui-btn-down-a
{
  border: none;
  text-shadow: none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T17:50:48.720

用 !important 在你自己的 css 上覆盖某些样式就足够了（例如 .nameofJqueryStyle {border: none !important;} ）。您可以使用 FireBug 或 Chrome 开发工具找出您想要定位的样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T19:01:10.757

Use a data-theme that you haven't created. For example, if you've created Swatch A, B, C and D, use:

```
 <input type="radio" name="" id="Select_0" value="" data-theme="e" /> 
```

This will do if you try to get rid of the borders but you will see a background image on the checkbox. To get rid of that, create a stylesheet what you will use to override the jquery mobile styles and include in after the jquery mobile stylesheets. For example:

```
<link rel="stylesheet" href="/MyApp/Content/themes/CustomTheme.css" />
 <link rel="stylesheet" href="/MyApp/Content/jquery.mobile.structure-1.1.0.css" />
 <!-- Custom stylesheet overriding styles -->
 <link rel="stylesheet" href="/MyApp/Content/Custom.css" /> 
```

Then, in Custom.css, insert the following:

```
.ui-checkbox-off .ui-icon, .ui-radio-off .ui-icon
{
  background-color: #ADADAD;
} 
```

where the background-color is the color of your choice when the radiobutton is in inactive state.

I was trying to achieve the same thing as you but for one checkbox/radiobutton and this worked for me so I thought I would share :)

# asp.net - 平衡环境中的 ASP.NET 表单身份验证

> ID：10919289
> 
> 赞同：2
> 
> 时间：2012-06-06T17:40:01.220
> 
> 标签：asp.net, iis, forms-authentication, load-balancing

尝试在负载平衡环境（2 个 Web 服务器）中使用 ASP.NET 后端时出现 401 错误。Windows 日志说：

```
Event code: 4005 
Event message: Forms authentication failed for the request. Reason: The ticket supplied was invalid. 
Event time: 6/6/2012 10:34:27 AM 
Event time (UTC): 6/6/2012 5:34:27 PM 
Event ID: de68a535d53e4bdfb11ace24a97c63c9 
Event sequence: 18 
Event occurrence: 7 
Event detail code: 50201 
```

两个 IIS 应用程序上的机器密钥配置为相同。还有什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:34:58.643

事实证明，两台 Web 服务器安装的 Windows 补丁集略有不同。一旦我们在它们两个上安装了所有相同的补丁 - 问题就解决了。

# jquery-mobile - 在 jquery mobile 中提交表单后重新显示页面丢失了我的附加事件

> ID：10919290
> 
> 赞同：1
> 
> 时间：2012-06-06T17:40:02.703
> 
> 标签：jquery-mobile

我有一个多页文档，但我一直在显示 html 并对一个 php 文件中的单个页面进行验证：

```
<div id="checkPage" data-role="page">
  <div data-role="header">
    <h1>Page Title</h1>
  </div>
  <div data-role="content">
    <?php
    $form = $_REQUEST['form'];  //this is simply a hidden input in my form that I reference to know if a form submission has occurred
    if($form) {
      $res = process();
      if(is_array($res)) { //if the data is an array then it is an array of errors that I will display to the user
        $html = page($res); 
      } else {
        $html = $res;  //if the data is not an array then it is confirmation html that the request was successful.
      }
    } else {
      $html = page();
    }
    echo $html;
    ?>
  </div>
</div> 
```

在我的 page() 函数中，我在我的 HTML 之后附加了一些 jquery：

```
$detail .= chr(10) . '<script type="text/javascript">';
$detail .= chr(10) . '$( "#checkPage" ).bind( "pageinit",function(event){';
$detail .= chr(10) . '  $("#txtAmount").change(function(){';
$detail .= chr(10) . '    alert("INSIDE");';
$detail .= chr(10) . '  });';
$detail .= chr(10) . '});';
$detail .= chr(10) . '</script>';
return $detail; 
```

当我导航到我的页面然后输入（并离开）金额文本框时，我看到了警报。如果我单击页面上的取消按钮（我被重定向到另一个页面）然后通过菜单超链接再次返回并再次输入（并离开）文本框，我也会看到警报。但是，如果我提交表单，发现验证错误并重新显示页面，则不会再次设置 pageinit。即使我离开 pageinit 逻辑，也不再设置更改事件。

我究竟做错了什么？我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:45:53.133

当你修改 DOM 时，你实际上得到了一组全新的元素。绑定到被替换元素的事件消失了，因为原始 DOM 元素不再存在。请参阅 jQuery 常见问题解答

[http://docs.jquery.com/Frequently_Asked_Questions#Why_do_my_events_stop_working_after_an_AJAX_request.3F](http://docs.jquery.com/Frequently_Asked_Questions#Why_do_my_events_stop_working_after_an_AJAX_request.3F)

您可以使用 jQuery.live 绑定到现在和将来匹配的元素。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

或者，您可以将绑定逻辑放在一个通用函数中，并在 Ajax 成功后调用它，如此处所述

[http://jetlogs.org/2009/01/29/re-binding-jquery-events-on-ajax-callbacks/](http://jetlogs.org/2009/01/29/re-binding-jquery-events-on-ajax-callbacks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:36:01.653

这是最终奏效的方法。Eric J. 确实让我走上了正轨。

```
$detail .= chr(10) . '<script type="text/javascript">';
$detail .= chr(10) . '$("#txtAmount").die("change");';
$detail .= chr(10) . '$( "#txtAmount" ).live( "change",function(event){';
$detail .= chr(10) . '  alert("CHANGE");';
$detail .= chr(10) . '});';
$detail .= chr(10) . '</script>'; 
```

如果没有骰子，那么如果我离开并返回，它将被多次调用。但是如果没有 live 它在表单提交后将无法工作。

# c# - 获取 IIS 网站应用程序名称

> ID：10919295
> 
> 赞同：12
> 
> 时间：2012-06-06T17:40:24.567
> 
> 标签：c#, .net, iis

我正在尝试获取我当前所在的 Web 应用程序名称。（我的应用程序代码部署在 IIS 中）。

我可以获得 IIS 服务器名称：

```
string IISserverName = HttpContext.Current.Request.ServerVariables["SERVER_NAME"]; 
```

目前的网站：

```
string currentWebSiteName = HostingEnvironment.ApplicationHost.GetSiteName(); 
```

我找不到获取 Web 应用程序名称的方法！因为我需要建立一个路径，这取决于我是什么 Web 应用程序，以获取所有虚拟目录。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-11-13T21:00:22.170

10 月 23 日的答案仅遍历所有应用程序。问题是如何从 IIS 上运行的应用程序获取当前应用程序名称。具有讽刺意味的是，上面的问题帮助我回答了它。

```
using Microsoft.Web.Administration;
using System.Web.Hosting;

ServerManager mgr = new ServerManager();
string SiteName = HostingEnvironment.ApplicationHost.GetSiteName();
Site currentSite = mgr.Sites[SiteName];

//The following obtains the application name and application object
//The application alias is just the application name with the "/" in front

string ApplicationAlias = HostingEnvironment.ApplicationVirtualPath;
string ApplicationName = ApplicationAlias.Substring(1);
Application app = currentSite.Applications[ApplicationAlias];

//And if you need the app pool name, just use app.ApplicationPoolName 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T07:21:23.940

将以下引用添加到您的应用程序：“c:\windows\system32\inetsrv\Microsoft.web.Administration.dll”

并使用下面的代码枚举网站名称和适当的应用程序名称。

```
using Microsoft.Web.Administration;

//..

var serverManager = new ServerManager();
foreach (var site in serverManager.Sites)
{
    Console.WriteLine("Site: {0}", site.Name);
    foreach (var app in site.Applications)
    {
        Console.WriteLine(app.Path);
    }
} 
```

# shell - 经典asp WScript.Shell运行错误

> ID：10919297
> 
> 赞同：0
> 
> 时间：2012-06-06T17:40:30.467
> 
> 标签：shell, vbscript, asp-classic, runtime-error

第一次在这里发帖。我在带有 IIS7 的 Windows 2008 服务器上使用经典 ASP (vbscript)。我正在使用带有以下代码的命令行实用程序：（目录不是实际代码，而是用于测试目的！）

```
dim oShell
Set oShell = CreateObject("WScript.Shell")
oShell.run "%COMSPEC% /C dir c:\ > c:/tmp/dir.txt", 0, TRUE
set oShell = nothing 
```

现在这是问题所在：这在我的大多数客户服务器上都可以正常工作，但没有任何问题，但特别是在 oShell.run 行上给出了一个没有描述的错误。如果我杀死 w3wp.exe 或在 IIS 管理器中，回收应用程序池，它会再次开始工作......但错误总是返回......我尝试使用进程监视器，但我不知道要寻找什么...... . 知道是什么导致了这种行为吗？或者可能是某种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:50:11.967

尝试`set oShell = Server.CreateObject("wscript.shell")`

# java - ObjectInputStream 抛出 NotSerializableException

> ID：10919298
> 
> 赞同：0
> 
> 时间：2012-06-06T17:40:41.353
> 
> 标签：java, objectinputstream, notserializableexception

我正在尝试`PWlist`使用. 该数组包含两个不同的对象，并且. 当我尝试执行读取时，我得到了这个异常......`.dat``ObjectInputStream``LongPW``PinPW`

```
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: PinPW
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1332)
at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1666)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1322)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
at Handler.fromFile(Handler.java:99)
at Window$ButtonListener.actionPerformed(Window.java:104)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6375)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6140)
at java.awt.Container.processEvent(Container.java:2083)
at java.awt.Component.dispatchEventImpl(Component.java:4737)
at java.awt.Container.dispatchEventImpl(Container.java:2141)
at java.awt.Component.dispatchEvent(Component.java:4565)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
at java.awt.Container.dispatchEventImpl(Container.java:2127)
at java.awt.Window.dispatchEventImpl(Window.java:2482)
at java.awt.Component.dispatchEvent(Component.java:4565)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:684)
at java.awt.EventQueue.access$000(EventQueue.java:85)
at java.awt.EventQueue$1.run(EventQueue.java:643)
at java.awt.EventQueue$1.run(EventQueue.java:641)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$2.run(EventQueue.java:657)
at java.awt.EventQueue$2.run(EventQueue.java:655)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:654)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

有人可以帮我理解什么是错的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T17:41:56.720

`java.io.NotSerializableException: PinPW`表示 PinPW 类不可序列化，因此标记您`PinPW`实现可序列化

```
public class PinPW implements Serializable {

} 
```

# php - PHP 块语法约定

> ID：10919299
> 
> 赞同：4
> 
> 时间：2012-06-06T17:40:43.037
> 
> 标签：php, html, tags

对不起，如果这完全是一个听起来很生气的问题。我是 PHP 语法约定的新手，所以我不完全确定我应该寻找什么。

我得到的书将以下示例作为 html 代码中的常规 php 块。

```
<?php
//... some code ...
?> 
```

我明白了，但令人困惑的是，我正在查看来自 xampp 的一些示例的示例代码（例如 CD 集合源代码）似乎没有遵循相同的约定。

相反，示例代码更像这样。

```
<? include("langsettings.php"); ?>

<?
//... some code ...
?> 
```

这两种形式在所有意图和目的上都是等效的，还是我完全错过了这里介绍 php 的关键内容？

另外，为什么 php 不使用结束标签（或者我只是没有看到它们）？我想我正在考虑带有结束标签的 javascript，但我想无论哪种方式，它们本身就是代码库，所以它可以工作。似乎 html 在其语法的核心具有对称性，但 php 语法排序打破了这种对称性，这很奇怪。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:44:01.447

它们之间的唯一区别是第二个需要[启用](http://us3.php.net/manual/en/ini.core.php#ini.short-open-tag)[该设置`short_open_tag`](http://us3.php.net/manual/en/ini.core.php#ini.short-open-tag)（在新的 PHP 版本中默认为*关闭*）。

`<?php`常规打开标签。

`<?`短开标签（默认禁用）

除此之外，将类似的东西`<? include("langsettings.php"); ?>`放在自己的一行中，`<? ?>`这实际上是一个特定于您找到它的源代码的样式问题。不同的项目使用非常不同的约定，并且每个 PHP 书籍都倾向于采用自己的惯例。

不幸的是，PHP 没有任何真正的特定编码约定，例如您可能在 Ruby、Java 或 Python 等语言中找到的，在我不请自来的意见中，这是 PHP 的主要失败之一，也是其最大的灵活性之一。

现在，关于短开放标签是否适合在现代 PHP 应用程序中使用的好习惯完全是一个单独的问题，[这里已经详细讨论过。](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:02:08.957

这两种形式是等价的，但您会发现短代码会给您带来问题。我会坚持使用常规标签：

```
<?php 
```

和封闭的街区

```
?> 
```

**编辑：结束标记是可选的，但前提是您希望开始标记之后的所有内容都被解释为 PHP，直到页面结束。**

这些块之外的任何内容都被解释为 HTML，因此您必须确保查看您打开和关闭的位置。

例如：

```
<body>

<h1> The Heading </h1>

<p>
   <?php
      echo "This is the Content";
   ?>
</p>

</body> 
```

将起作用，并将 php 生成的字符串输出到您的段落标记中。

PHP 与 javascript 的相似之处在于它没有“打开”和“关闭”标签，而是使用分号来声明特定 php 语句的结束。

```
include "file1.php";
include "file2.php"; 
```

如果你忘记了分号，就像这样

```
include "file1.php"
include "file2.php"; 
```

这将产生一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T17:44:16.697

PHP 块的结束标记是`?>`. 结束标记不是必需的，但如果您想将页面的一部分解释为 PHP，而将其他部分解释为文字 HTML，则可以使用它。人们有时会这样做，如果他们想在页面的开头进行一些 PHP 处理，然后编写一个普通的静态 HTML 页面，其中只回显一些 PHP 变量。

换句话说，标签之后`<?php`和标签之前的文本`?>`被解释为 PHP。如果省略结束标记，则开始 php 标记和页面末尾之间的所有文本都被解释为 PHP。

一个例外是，如果您在 php 块内打开条件语句，然后关闭 php 块，则页面上的所有以下文本都将受到该条件的约束，直到您启动新的 php 块并关闭条件语句。例如，如果您运行脚本：

```
<?php
if(1==0) {
?>

<B>conditional HTML</B>

<?php
}
?> 
```

两个 PHP 块之间的 HTML 不会出现在页面上。

请注意，不同的 PHP 块都是同一脚本的一部分。在一个块中定义的变量、函数和类可以被该页面上的其他块使用，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:48:33.033

PHP 开始标签是`<?php`，结束标签是`?>`.

如果服务器上允许使用短标签，您也可以使用`<?` `?>`语法。

您可以在[官方 PHP 文档中阅读更多相关信息](http://php.net/manual/en/language.basic-syntax.php)

最好的问候，汤姆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T21:14:12.363

有关短版本长开放标签的问题已经涵盖。

我将在这些答案中尚未提及的问题中提到一个常见的问题。

比较以下内容：

```
<?php
 /*
  * Some comments here, (c) notice, etc.
  */

  header("Content-type: text/html");
  ... 
```

对比

```
<?php
 /*
  * Some comments here, (c) notice, etc.
  */
?>

<?php
  header("Content-type: text/html");
  ... 
```

第二个不行。

为什么？

在 PHP 的第一个块和第二个块之间有一个非 PHP 代码的空白行。在不使用[输出缓冲](http://php.net/manual/en/function.ob-start.php)的服务器环境中，空行向 PHP 发出标头已全部完成的信号，并且从此时开始的任何内容都是发送到浏览器的 HTML（或其他内容）的一部分。

然后，我们尝试发送一个标头。产生：

```
Warning: Cannot modify header information - headers already sent 
```

所以......小心你的空白行。你的 PHP 里面有一个空行就可以了。在您的 PHP 之外，它可能会产生令人讨厌的副作用。

# python - 作为开发的一部分，我致力于 github 并在其他地方拉下并执行。感觉不对

> ID：10919301
> 
> 赞同：1
> 
> 时间：2012-06-06T17:40:52.953
> 
> 标签：python, github, jenkins

我有一个标准的设置。称它为三台服务器——www、app 和 db，它们都来自结构脚本，整个在 github 上。

我有一台带有 repo 克隆的本地笔记本电脑。我在本地更改了一个文件，然后*将其推送到 github，*然后使用 jenkins 进行部署——它从 github 中提取并执行其业务。这里的问题是我可以提交十几个垃圾提交，直到我设法修复我所有的错别字。

与其说往返 github 很重要，不如说是提交的绝对数量——我无法压缩它们，因为它们已被推送。它看起来很丑。它确实有效，但很丑陋。

我不认为我可以直接在服务器上编辑 - 文件分散了很多，我不能让三台服务器上的每个目录都成为 github 的克隆并希望保持理智。并且尝试编写将服务器与我的本地存储库同步的脚本是疯狂的 - 结构文件花费了足够长的时间。

我不能轻易地 git pull*从*jenkins，因为我仍然必须承诺让 jenkins pull，而且我们仍然会得到丑陋丑陋的提交日志。

我看不到一个优雅的方式来做到这一点 - 任何人的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:50:53.810

解决方案非常简单：进行更清晰的提交（在提交之前修复拼写错误，只提交属于一起的更改，而不是太小的编辑）。有点奇怪的是，您没有花时间修复拼写错误（通过在本地运行/测试），而是希望通过其他方式减少提交次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:41:06.963

解决方案是不使用 github/jenkins 部署到服务器。服务器应该被视为“本地”部署的一部分（本地是预先提交的）所以直接使用我的笔记本电脑上的 fab 文件。

由于在 jenkins 上进行了预处理，因此这更难，但这是可复制的。

所以，我会在这里听取杰夫阿特伍德的建议

*   在公共场合接受烂摊子。

好吧，我当然对此感到很糟糕-但是，嘿，我学会了。

明天将把大脑放在正确的位置。

# iphone - 当视图处于平移/移动模式时，如何在特定视图区域禁用 uitouch：iphone

> ID：10919303
> 
> 赞同：0
> 
> 时间：2012-06-06T17:41:06.550
> 
> 标签：iphone, uitouch, uipangesturerecognizer

我正在开发基于 pdf 的应用程序，我在其中使用[来自 github](https://github.com/brow/leaves/downloads)的动画实现了页面卷曲效果。这在非缩放模式下都可以正常工作。
当我在 pdf 上捏合时，它会放大，我可以在 pdf 视图中移动/平移。
现在，只要我触摸实现页面卷曲动画的区域，页面就会开始在捏/缩放视图中卷曲，看起来非常奇怪。像这样：

![触及pdf页面的边缘，结果是这样的](../Images/ab8cb676e652d977be63bae915fd906c.png)

有什么建议么？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:34:21.967

我还没有检查过 Github Framework 的 Page Curl 效果，但理论上来说。如果您不希望它在缩放时翻页，则必须执行一个`if`语句来确定它是否应该开始动画。

```
if(pdfIsZoomed) {
  //We dont do anything, because the PDF is zoomed.
} else {
  //PDF Isn't zoomed, continue with page curl.
} 
```

# python - Python Sqlite3 高级分组

> ID：10919304
> 
> 赞同：0
> 
> 时间：2012-06-06T17:41:07.867
> 
> 标签：python, sql, sqlite

我希望这个问题以前没有被问过。我有一个包含以下列和信息的 csv 文件，我可以将其上传到具有完全相同列名的 sqlite3 数据库

```
Company Type Qty Price
ABC      r    5   $$$
ABC      h    9   $$$
ABC      s    10  $$$
DER      a    3   $$$
DER      z    6   $$$
GGG      q    12  $$$
GGG      w    20  $$$ 
```

但是，如何在 csv 文件中获得以下结果？基本上，按公司名称分组，仍然显示类型、数量和价格，并在行尾显示每家公司的总数量。

```
Company Type Qty Price Total Qty
ABC     r    5   $$$      
        h    9   $$$
        s    10  $$$      24
DER     a    3   $$$
        z    6   $$$      9
GGG     q    12  $$$
        w    20  $$$      32 
```

我一直在尝试使用 GROUP BY，但没有运气。非常感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:18:23.087

我会结合使用 SQL 和[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby).

例如，类似：

```
results = cxn.execute("SELECT * FROM orders ORDER BY Company")
for company, orders_iter in itertools.groupby(results, key=lambda r: r[0]):
    orders = list(orders_iter)
    total_qty = sum(order[2] for order in orders)
    ... print out orders ... 
```

比我拥有更多 SQL-foo 的人可能会提出一个查询，该查询会产生您想要的结果……但这可能是不必要的，特别是考虑到进行一些小的修改（在迭代订单时计算总数） )，Python 代码只需要`O(n)`时间和`O(1)`内存。

# c# - 将arraylist存储在IsolatedStorage中

> ID：10919306
> 
> 赞同：0
> 
> 时间：2012-06-06T17:41:08.397
> 
> 标签：c#, windows-phone-7, windows-phone

如何将数组列表存储到隔离存储中？也可以将图像放在数组列表中吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:01:34.650

就像评论说的那样，您只需要获取一些可序列化的对象，然后就可以将其存储在 IS 中。请注意，一维以上的数组不可序列化！

这是我用于 IS 的代码块：

```
using System.IO;
using System.IO.IsolatedStorage;
using System.Xml.Serialization;

namespace PhoneApp1
{
public class IsolatedStorage
{
    public static void SaveToIs(String fileName, Object saved)
    {
        try
        {
            using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (isf.FileExists(fileName))
                {
                    isf.DeleteFile(fileName);
                }

                using (IsolatedStorageFileStream fs = isf.CreateFile(fileName))
                {

                    XmlSerializer ser = new XmlSerializer(saved.GetType());
                    ser.Serialize(fs, saved);
                }
            }
        }
        catch (IsolatedStorageException ex)
        {
            MessageBox.Show(ex.Message);
        }

    }

    public static Object loadFromIS(String fileName, Type t)
    {
        Object result = null;
        try
        {
            using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (isf.FileExists(fileName))
                {

                    using (StreamReader sr = new StreamReader(isf.OpenFile(fileName, FileMode.Open)))
                    {
                        XmlSerializer ser = new XmlSerializer(t);
                        result = ser.Deserialize(sr);
                    }
                }
            }
        }
        catch (IsolatedStorageException ex)
        {
            MessageBox.Show(ex.Message);
        }
        catch (InvalidOperationException e)
        {
            MessageBox.Show(e.Message);
        }
        return result;
    }
}
} 
```

# javascript - 提示安装语言包

> ID：10919309
> 
> 赞同：0
> 
> 时间：2012-06-06T17:41:15.073
> 
> 标签：javascript, html, internet-explorer, browser

我可以知道应该使用哪些 HTML 代码来询问浏览器安装语言包的语言未安装在浏览器上吗？这仅适用于IE吗？其他浏览器呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:20:06.830

没有这样的代码。例如，显示中文网页所需的基本上是包含中文字符的字体或字体集。此类字体可能捆绑在“语言包”中，尽管现代系统通常附带几种支持大量中文字符的字体。

我认为您需要描述您观察到的问题，而不是假设的解决方案。发布示例 URL 通常会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:56:40.550

我想您想确保您的观众可以正确阅读您的网站。

强迫用户在使用您的应用程序/网站之前进行大量安装或配置不是一个好习惯。而不是这样，你应该好好计划和设计它。

您可以在 Google Web Font 中找到很好的解决方案： [https ://developers.google.com/webfonts/](https://developers.google.com/webfonts/)

例子：

```
@font-face {
    font-family: 'Tangerine';
    font-style: normal;
    font-weight: normal;
    src: local('Tangerine'), url('http://themes.googleusercontent.com/font?kit=_jMq7r9ahcBZZjpP8hftNA') format('truetype');
} 
```

*注意：您可以在 CSS 中设置优先级，以便用户可以使用计算机中现有的字体，例如在 CSS 中：

Verdana、“Microsoft JhengHei”、“微软正黑体”、“Microsoft YaHei”、“微软雅黑”、Tangerine、sans-serif、serif

只有在需要时，浏览器才会（悄悄地）下载字体。

但是，如果他/她没有安装语言包或字体，我怀疑用户是否会理解您提供的内容。相反，我会监控流量来源（例如谷歌分析）并为指定的细分市场构建。

请放弃任何 Active-X 和类似的东西，并坚持使用现代网络技术。Unicode、网络字体、CSS 是你的朋友。

# java - 在服务器上上传 servlet 页面

> ID：10919319
> 
> 赞同：0
> 
> 时间：2012-06-06T17:42:03.403
> 
> 标签：java, jsp, tomcat, servlets, spring-mvc

我用 java、spring 框架、apache tomcat 7 和 NetBeans 创建了一个网站。最后几天我尝试在服务器上上传，但我遇到了问题。我与服务器管理员交谈，他说我上传的服务器格式似乎不正确。我正在使用 svn(assembla) 并将我的项目存储在那里。然后从那里我将它发送到我想运行它的主服务器。当它在 assembla 中时的项目（并且在我想运行的主服务器中） ) 包含以下文件：

1.  NB项目

2.  src（包含 conf、myproject（包含所有 .java 文件））

3.  网络（包含：META-INF、WEB-INF、index.jsp）

以及以下 xml 文件：build、catalog、My-build 和这些文件：command-To-Deploy.txt、My-build.properties

此外。我的起始页是一个登录页。在索引页我只有这行代码：

```
<c:redirect url="/log"/> 
```

log 是我要重定向页面的 URI。他告诉我没有 log.jsp（我将其命名为 mainLogin.jsp 的日志的 jsp）。我不确定，但我认为这不是问题。

在 servlet 之前上传的任何人都知道我应该做什么以及应该上传哪些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:49:42.953

如果您只是将 java 文件上传到服务器，它们不会有太大的好处。您需要编译它们，最好打包到一个 jar 中，以便 jsp 调用它们。

此外，除非您使用库/javascript 来更改它，否则 url 路径会像文件路径一样显式运行。www.mysite.com/folder/file.jsp 将在 /folder/ 中查找要服务的文件名 file.jsp。因此，url 'log' 无法神奇地知道您希望它访问 mainLogin.jsp。

# javascript - Google GeoChart onclick setCell 不起作用

> ID：10919323
> 
> 赞同：0
> 
> 时间：2012-06-06T17:42:38.313
> 
> 标签：javascript, html, google-maps, google-visualization

我很难使用 Google GeoCharts API 和复选框突出显示国家/地区`onclick`。

我的 displaymarkers 函数应该`setCell`通过将输入值作为`DataTable`行索引传递来使用该函数。

但是传递`check.value`to`setCell`似乎不起作用。如果我简单地`data.setCell(1, 1, 1);`说它完美无缺。

如果不做很多 if 语句，我应该怎么做呢？

Javascript：

```
var data;
var chart;
var options;

function drawRegionsMap() {
    data = google.visualization.arrayToDataTable([
        ['Country', 'Popularity'],
        ['United States', 1],
        ['RU', 1]
    ]);

    options = {legend: 'none'};

    chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
};

function displaymarkers(check) {
    // Checkbox has been checked
    if (check.checked) {
        data.setCell(check.value, 1, 1);
    } else { // Checkbox has been unchecked
        data.setCell(check.value, 1, 0);
    }

    chart.draw(data, options);
} 
```

HTML：

```
<input type="checkbox" name="us" onclick="displaymarkers(this)" value="0" checked="checked" />US
<input type="checkbox" name="russia" onclick="displaymarkers(this)" value="1" checked="checked" />Russia 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:36:27.900

`check.value`返回一个字符串。`parseInt(check.value)`作品。

# python - 读行和线程

> ID：10919327
> 
> 赞同：1
> 
> 时间：2012-06-06T17:43:06.837
> 
> 标签：python, python-2.7

所以我运行下面的代码，当我运行它后使用 queue.qsize() 时，队列中仍然有 450,000 左右的项目，这意味着文本文件的大部分行没有被读取。知道这里发生了什么吗？

```
from Queue import Queue
from threading import Thread

lines = 660918 #int(str.split(os.popen('wc -l HGDP_FinalReport_Forward.txt').read())[0]) -1
queue = Queue()
File = 'HGDP_FinalReport_Forward.txt'
num_threads =10
short_file = open(File)

class worker(Thread):
    def __init__(self,queue):
        Thread.__init__(self)
        self.queue = queue
    def run(self):
        while True:           
            try:           
                self.queue.get()     
                i  = short_file.readline()
                self.queue.task_done() #signal to the queue that the task is done
            except:               
                break

## This is where I should make the call to the threads

def main():
    for i in range(num_threads):
        worker(queue).start()
    queue.join()

    for i in range(lines): # put the range of the number of lines in the .txt file
        queue.put(i)

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:04:41.643

很难确切地知道您要在这里做什么，但是如果可以独立处理每一行，`multiprocessing`这是一个更简单的选择，它将为您处理所有同步。额外的好处是您不必提前知道行数。

基本上，

```
import multiprocessing
pool = multiprocessing.Pool(10)

def process(line):
    return len(line) #or whatever

with open(path) as lines:
    results = pool.map(process, lines) 
```

或者，如果您只是想从行中获得某种聚合结果，您可以使用它`reduce`来降低内存使用量。

```
import operator
with open(path) as lines:
    result = reduce(operator.add, pool.map(process, lines)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:25:33.453

所以我尝试这样做，但我有点困惑，因为我每次都需要通过一行，而这不是代码似乎在做的事情

```
import multiprocessing as mp

File = 'HGDP_FinalReport_Forward.txt'
#short_file = open(File)
test = []

def pro(temp_line):
    temp_line = temp_line.strip().split()
    return len(temp_line)

if __name__ == "__main__":
    with open("HGDP_FinalReport_Forward.txt") as lines:
        pool = mp.Pool(processes = 10)
        t = pool.map(pro,lines) 
```

# triggers - SQL SErver 触发器未正确评估为插入或更新

> ID：10919336
> 
> 赞同：0
> 
> 时间：2012-06-06T17:43:35.607
> 
> 标签：triggers, insert

我想要一个触发器来处理更新和插入。触发器中的大多数 sql 操作都适用于两者。唯一的例外是我用来记录插入和更新的日期和用户名的字段。这就是我所拥有的，但是用于跟踪更新和插入的字段的更新没有正确触发。如果我插入一条新记录，我会得到 CreatedBy、CreatedOn、LastEditedBy、LastEditedOn 填充，LastEditedOn 在 CreatedOn 之后 1 秒（我不想发生这种情况）。当我更新记录时，只有 LastEditedBy 和 LastEditedOn 更改（这是正确的）。我将完整的触发器包括在内以供参考：

```
SET ANSI_NULLS ON;
GO
SET QUOTED_IDENTIFIER ON;
GO
-- =================================================================================
-- Author:  Paul J. Scipione
-- Create date: 2/15/2012
-- Update date: 6/5/2012
-- Description: To concatenate several fields into a set formatted UnitDescription,
--              to total Span & Loop footages, to set appropriate AcctCode, & track
--              user inserts
-- =================================================================================
IF OBJECT_ID('ProcessCable', 'TR') IS NOT NULL
  DROP TRIGGER ProcessCable
GO
CREATE TRIGGER ProcessCable
ON Cable
AFTER INSERT, UPDATE
AS
BEGIN
SET NOCOUNT ON;

-- IF TRIGGER_NESTLEVEL() > 1 RETURN

IF ((SELECT TRIGGER_NESTLEVEL()) > 1 )
  RETURN
ELSE
  BEGIN
  -- record user and date of insert or update
  IF EXISTS (SELECT * FROM DELETED)
    UPDATE Cable SET LastEditedOn = getdate(), LastEditedBy = REPLACE(user_name(), 'GRTINET\', '')
  ELSE IF NOT EXISTS (SELECT * FROM DELETED)
    UPDATE Cable SET CreatedOn = getdate(), CreatedBy = REPLACE(user_name(), 'GRTINET\', '')

  -- reset Suffix if applicable
  UPDATE Cable SET Suffix = NULL WHERE Suffix = 'n/a'

  -- create UnitDescription value
  UPDATE Cable SET UnitDescription =
    isnull (Type, '') +
    isnull (CONVERT (NVARCHAR (10), Size), '') +
    '-' +
    isnull (CONVERT (NVARCHAR (10), Gauge), '') +
    CASE
      WHEN ExtraTrench IS NOT NULL AND ExtraTrench > 0 THEN
        CASE
          WHEN Suffix IS NULL THEN 'TE' + '(' + CONVERT (NVARCHAR (10), ExtraTrench) + ')'
          ELSE 'TE' + '(' + CONVERT (NVARCHAR (10), ExtraTrench) + ')' + Suffix
        END
      ELSE isnull (Suffix, '')
    END

  -- convert any accidental negative numbers entered
  UPDATE Cable SET Length = ABS(Length)

  -- sum Length with LoopFootage into TotalFootage
  UPDATE Cable SET TotalFootage = isnull(Length, 0) + isnull(LoopFootage, 0)

  -- set proper AcctCode based on Type
  UPDATE Cable SET AcctCode =
    CASE
      WHEN Type IN ('SEA', 'CW', 'CJ') THEN '32.2421.2'
      WHEN Type IN ('BFC', 'BJ', 'SEB') THEN '32.2423.2'
      WHEN Type IN ('TIP','UF') THEN '32.2422.2'
      WHEN Type = 'unknown' OR Type IS NULL THEN 'unknown'
    END
  WHERE AcctCode IS NULL OR AcctCode = ' '

END

END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:42:06.293

当我看到你的触发器时，我突然想到了一些事情：

*   您正在执行多个附加更新而不是单个更新（在性能方面，单个更新会更好）。
*   您的更新语句不受约束（插入/删除的表没有 JOIN 以限制您执行这些附加更新的记录数）。
*   大部分逻辑感觉应该在应用层而不是数据库中；或者，也许在某些情况下实施方式不同。

一些简单的例子：

*   插入前应删除“n/a”后缀。
*   电缆长度绝对值应在插入前完成（使用 CHECK CONSTRAINT 验证不能插入不良数据）。
*   TotalFootage 应该是一个[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)，所以它总是正确的。
*   Type/AcctCode 关系似乎应该是外键引用中的列值。

但最终，我认为您看到意外日期的原因是因为更新不受约束。在不解决我上面提到的任何其他问题的情况下，设置审计字段的语句应该更像这样：

```
UPDATE Cable SET LastEditedOn = getdate(), LastEditedBy = REPLACE(user_name(), 'GRTINET\', '')
FROM Cable
    JOIN deleted on Cable.PrimaryKeyColumn = deleted.PrimaryKeyColumn

UPDATE Cable SET CreatedOn = getdate(), CreatedBy = REPLACE(user_name(), 'GRTINET\', '')
FROM Cable
    JOIN inserted on Cable.PrimaryKeyColumn = inserted.PrimaryKeyColumn
    LEFT JOIN deleted on Cable.PrimaryKeyColumn = deleted.PrimaryKeyColumn
WHERE deleted.PrimaryKeyColumn IS NULL 
```

# java - 可以确定要解压缩的文件的大小吗？

> ID：10919337
> 
> 赞同：1
> 
> 时间：2012-06-06T17:43:36.853
> 
> 标签：java, android, zipinputstream

我目前有以下代码，它使用[ZipInputStream](https://developer.android.com/reference/java/util/zip/ZipInputStream)实例将 zip 文件解压缩到手机上的目标位置：

```
ZipInputStream zipInputStream = new ZipInputStream(new FileInputStream(sourceZipFile));
ZipEntry zipEntry = null;

while ((zipEntry = zipInputStream.getNextEntry()) != null) {
  File zipEntryFile = new File(targetFolder, zipEntry.getName());
  // write contents of 'zipEntry' to 'zipEntryFile'
} 
```

有谁知道在开始之前是否有可能（使用上面的设置或其他设置）获取（估计）要解压缩的文件或字节的总数，以便在解压缩进行时显示进度指示器？我认为[ZipInputStream](https://developer.android.com/reference/java/util/zip/ZipInputStream)可能有一个`getTotalEntries()`或类似的方法，但我找不到这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:44:46.560

使用[`ZipEntry#getSize()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipEntry.html#getSize%28%29)方法。它返回*未压缩*文件的大小。

如果 ZIP 文件中有多个条目（文件），只需先遍历它们（不提取它们），然后将所有文件大小相加。这可能是一个很好的估计。

请注意，如果您需要知道这些文件将在磁盘上占用的确切字节数，您还需要知道`cluster`文件系统中 a 的确切大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:48:23.550

正如 npe 所说，ZipEntry 将从 zip 文件中获取文件的未压缩大小。

我认为您需要做的是使用

```
getNextEntry 
```

直到完成，沿途计算条目（条目的大小和数量），然后重新开始实际的解压缩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-02T08:49:42.163

Kotlin 解决方案：

```
val uncompressedSize = ZipFile(fileName).use { zipFile -> 
  zipFile.entries().asSequence().sumOf { zipEntry -> zipEntry.size } 
} 
```

# database - 使用 CodeIgniter 的动态 PHP 页面中的中文数据库内容

> ID：10919349
> 
> 赞同：0
> 
> 时间：2012-06-06T17:44:23.977
> 
> 标签：database, codeigniter, character-encoding

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:57:55.850

This is now sorted. Line 50 of `database.php` in **root -> application -> config** should have read:

Correct:
`$db['default']['char_set'] = "utf8"`

Incorrect:
`$db['default']['char_set'] = "UTF-8"`

Something so simple! I hope that might help others.

# c# - 如何访问 UserControl 上的控件？

> ID：10919353
> 
> 赞同：1
> 
> 时间：2012-06-06T17:44:28.350
> 
> 标签：c#, winforms, dynamic, user-controls

我创建了两个用户控件（名为 UserControl1 和 UserControl2）并动态地将一个添加到面板中：

```
UserControl yoozerControl;
if (pi != pie) {
    yoozerControl = new UserControl1();
} else {
    yoozerControl = new UserControl2();
}
panel1.Controls.Add(yoozerControl);
yoozerControl.Dock = DockStyle.Fill; 
```

但是，我无法访问 UserControls 的成员。例如，UserControl1 有一个 TextBox1，但这不会编译：

```
UserControl yoozerControl;
if (pi != pie) {
    yoozerControl = new UserControl1();
    String s = yoozerControl.TextBox1.Text;
. . . 
```

我必须做什么才能访问 UserControls 上控件的属性？

## 更新

```
// I was able to successfully test this by changing UserControl1's TextBox1 Modifier
// property to public, and the same with UserControl2's label1 Modifier property.
UserControl1 yoozerControl = null;
UserControl2 yowzerControl = null;
String s = String.Empty;
if (AppType.Equals(SearchTypes.Platypus)) {
    yoozerControl = new UserControl1();
    s = yoozerControl.textBox1.Text;
} else {
    yowzerControl = new UserControl2();
    s = yowzerControl.label1.Text;
}
    if (!(null == yoozerControl)) {
    panel1.Controls.Add(yoozerControl);
    yoozerControl.Dock = DockStyle.Fill;
    MessageBox.Show(s);
}
if (!(null == yowzerControl)) {
    panel1.Controls.Add(yowzerControl);
    yowzerControl.Dock = DockStyle.Fill;
    MessageBox.Show(s);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:46:51.467

您需要将用户控件键入为您的控件。UserControl1 或 UserControl2（不是 UserControl）

正如亚当所提到的，如果你还没有让事情公开，你也需要处理这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T17:46:22.207

在您正确键入 yoozerControl 后，正如@Kenneth 所说（对他 +1），您需要将这些文本框公开为用户控件的公共属性：

```
public TextBox yourTB{
    get { return TextBox1; }
} 
```

或者，为了更简洁，只需公开一个返回文本框**text**的属性，这就是您似乎需要的。

```
public string yourTBsText {
    get { return TextBox1.Text; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T17:48:11.287

在您的用户控件上，选择要公开的控件并查看属性窗口。将“修改器”属性更改为“公共”以使其具有最大的可见性。

# css - 如果 div 的 line-height 为 0，并且它唯一的孩子 span 的 line-height:0，那么 div 的高度从何而来？

> ID：10919354
> 
> 赞同：0
> 
> 时间：2012-06-06T17:44:31.853
> 
> 标签：css

这是我的疑问。我有一个父 div 和一个孩子，这是一个跨度。两者都将 line-height 设置为 0。 span 的 font-size 设置为许多像素（198px）。

问题： div 得到一个高度。但是，如果它应该来自 spans line-height，即 0，那么是从什么开始的呢？

我设置了一个修补匠。如果您有兴趣，请查看它。

[http://tinkerbin.com/0oCT7PRf](http://tinkerbin.com/0oCT7PRf)

这至少发生在 Firefox 和 chrome 中，所以这几乎肯定是一种标准化的行为。

笔记！这是一个css行为疑问。我有兴趣了解正在发生的事情，而不是“解决”“问题”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:50:02.387

文本仍然有大小；字母“F”正在扩展`div`以适应。

**从规范**更新：****

 **> 在内容由行**内元素**组成的**块容器**元素上，'line-height' 指定元素内行框的*最小*高度。

 ***[http://www.w3.org/TR/CSS21/visudet.html#line-height](http://www.w3.org/TR/CSS21/visudet.html#line-height)

所以盒子的高度实际上来自字体大小，因为 line-height 只定义为*最小值*0，但没有明确定义为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:34:30.127

我想出的答案：

规范支持的第一个事实：

当你的行高大于字体大小时——你通常看到的——这很容易。取行高，减去字体大小，除以 2。将结果应用到“字形框”的顶部和底部，就是这样。因此，如果您的字体大小为 14px，行高为 16px：

16 像素 - 14 像素 = 2 像素 2 像素 / 2 = 1 像素

在“字形框”上方添加 1px，在其下方添加 1px。该框的高度为 16 像素，并且正如预期的那样成为父容器的高度（假设在这种情况下，其中只有一个行框）。

当 line-height 小于 font-size （我们的例子）时，事情变得更加棘手。让我们对 54px 的字体大小和 0 的行高使用相同的公式。

0-154px = -154px（规范允许在这里使用负值，所以我们没关系）

-154 像素 / 2 = -77 像素

因此，我们的字体大小为 154 像素……还有一些您需要了解的内容。字体既有从基线到顶部的距离，也有从基线到底部的距离。很简单。规范称第一个高度（A）和第二个深度（D）。所以 A+D = 从上到下的距离。

现在这就是我认为在我在问题中提出的案例中正在发生的事情。这是我从“我的摆弄”而不是从规范中得出的结论（因为我在那里找不到它）。

让我们继续我们的公式。

我们从 line-height 和 font-size 之差的结果中得到 -77px。

我们的字体大小是 154px。

现在我们必须在顶部添加-77px，在底部添加-77px。添加负数就是减去 - 所以我们实际上减去了 77px。

这用一张图更容易解释。

![在此处输入图像描述](../Images/336a986a60a1c8d2df4a298f4b97f2f9.png)

所以，是的，这就是我相信高度的来源。至少和它有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:47:36.453

是的，它正在占用其内部元素的高度。如果您希望它正确采用其定义的高度/行高，则必须将其设置为块元素（ display:block;）

此外，当使用 line height / height :0 在 IE 上隐藏元素时，IE 不会折叠元素，除非 font-size 也设置为 0。*****

# backbone.js - 骨干“成功”回调与模型“更改”事件绑定目的

> ID：10919357
> 
> 赞同：3
> 
> 时间：2012-06-06T17:44:39.840
> 
> 标签：backbone.js

为模型获取数据时“成功”回调的目的与绑定到“更改”事件的方法的目的是什么？

**“成功”回调**

```
this.model.fetch({
  url: '...'.

  success: function(response) {
    ...
  }
}); 
```

**与模型“更改”绑定**

```
this.model.bind("change", this.attributesChanged); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T18:29:03.687

通常，当我在模型本身之外调用 fetch 并希望在模型中触发额外的成功函数回调时，我会使用 fetch-success 回调。

另外请注意，请注意 CRUD 事件，因为即使无法成功存储到服务器，“更改”事件仍可能会触发，请记住“更改”是在模型更改时触发的。从 0.9.0 版开始，添加了“同步”事件来解决此问题。只要模型的状态与服务器成功同步，就会触发此事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:16:14.460

使用“成功”或“错误”的主要原因是基于响应执行功能，因为“更改”只会在模型成功更改时触发。如果您的提取由于某种原因失败，“更改”将不会触发。回调允许您进行更精细的控制。也就是说，这可以归结为个人偏好，即您何时想要响应响应。我的想法是，如果我只对响应成功的 CRUD 操作感兴趣，那么监听“更改”是完全合适的，因为我会忽略错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:31:29.287

如果模型被任何方法更新，'change' 事件将触发，例如用户输入用于更改模型属性的表单，或从服务器获取数据。

fetch 上的成功回调显然只有在从服务器获取之后才会调用。

因此，如果您只想响应由获取引起的模型更改，而不是“双向”更改，请使用成功处理程序而不是更改事件。

# ruby-on-rails - Rails 和 ajaxForm - 如何检测异常

> ID：10919359
> 
> 赞同：1
> 
> 时间：2012-06-06T17:44:42.650
> 
> 标签：ruby-on-rails, exception-handling, ajax-forms

我制作了一个标准的 Rails 表单，然后将其包装到 JQ ajaxForm 中。现在无论如何都会调用成功回调 - 无论提交时是否发生 Rails 异常。

如何让 ajaxForm 检测 Rails 异常？我希望在出现错误的情况下保留在表单中并显示异常文本。

**发现的其他参考资料：**

*   [rails 3 - 提交ajax表单后留在页面上但显示“flash”](https://stackoverflow.com/questions/5418419/rails-3-stay-on-page-after-ajax-form-submit-but-show-flash)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:56:27.553

检查请求返回状态以确定是否有错误或只是这样做

```
 if(jqXHR === 0 ){
     //do something with error
 } else {
     //success
 } 
```

**编辑：** 试试这个

“发生错误时运行的代码块”

```
$.ajaxSetup({
  error: function(res){
    $('body').prepend(res.responseText)
  }
}); 
```

对于一种方法

```
def new
  @item = Item.new
  rescue
    render 'shared/exception', :layout => 'overlay'
end 
```

对于整个应用程序

```
class ApplicationController
  around_filter :xhr_exceptions
  # ...
  private
  def xhr_exceptions
    yield
    rescue
      render('shared/exception', :layout => 'overlay', :status => 500) if request.xhr?
  end
end 
```

[http://codequietly.com/blog/2010/08/rails-ajax-and-exceptions-bring-it-on](http://codequietly.com/blog/2010/08/rails-ajax-and-exceptions-bring-it-on)如果它的死尝试缓存

# c# - 如何向我的文件删除程序添加更多目录？

> ID：10919360
> 
> 赞同：-6
> 
> 时间：2012-06-06T17:44:45.123
> 
> 标签：c#

我正在尝试使用它来删除我使用递归的几个目录中某些特定的所有 .htm 文件。到目前为止，它只适用于一个文件夹，但我还没有找到一种方法将多个文件夹添加到代码中。有什么办法可以将更多目录添加到目录路径中，这样我就不必在每次希望它删除另一个目录中的文件时都不断更改代码？

```
namespace ConsoleApplication
{
    class Deleter
    {
        static void Main(string[] args)
        {
            string directorypath = @"C:\Public\";
            string[] directories = System.IO.Directory.GetDirectories(directorypath);
            DeleteDirectories(directories);
        }
        private static void DeleteDirectories(string[] directories)
        {
            foreach (string directory in directories)
            {
                string[] files = System.IO.Directory.GetFiles(directory, "*.htm");
                DeleteFiles(files);
                directories = System.IO.Directory.GetDirectories(directory);
                DeleteDirectories(directories);
            }
        }
        private static void DeleteFiles(string[] files)
        {
            foreach (string file in files)
            {
                FileInfo f = new FileInfo(file);
                if (f.CreationTime < DateTime.Now)
                    f.Delete();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:07:29.157

与其将您的可枚举（目录）设置为子目录并希望以这种方式递归，不如创建一个名为 subDirectories 的新引用。所以你的 foreach 循环看起来像这样：

```
...
foreach(var directory in directories)
{
 string[] files = System.IO.Directory.GetFiles(directory, "*.htm");
 DeleteFiles(files);
 var subDirectories = System.IO.Directory.GetDirectories(directory); 
 DeleteDirectories(directories);
{
.... 
```

# javascript - 尝试将 node.js v0.6.19 下载到 webfaction 上的服务器时出现 404 错误

> ID：10919364
> 
> 赞同：0
> 
> 时间：2012-06-06T17:44:52.910
> 
> 标签：javascript, node.js

我正在使用 wget 命令将 node.js 下载到我在 webfaction 上的服务器。

```
wget http://nodejs.org/dist/node-v0.6.19.tar.gz 
```

这是我得到的错误。

```
--2012-06-06 12:41:40--  http://nodejs.org/dist/node-v0.6.19.tar.gz
Resolving nodejs.org... 8.12.44.238
Connecting to nodejs.org|8.12.44.238|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2012-06-06 12:41:40 ERROR 404: Not Found. 
```

我不确定为什么会收到 404 错误，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:53:34.240

`http://nodejs.org/dist/node-v0.6.19.tar.gz`不存在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:53:20.503

对于遇到相同问题的任何人，这是实际来源。

```
wget http://nodejs.org/dist/v0.6.19/node-v0.6.19.tar.gz 
```

# utf-8 - UTF-8 编码的 SQLite 查询

> ID：10919368
> 
> 赞同：2
> 
> 时间：2012-06-06T17:45:06.553
> 
> 标签：utf-8, sqlite

现在我的程序中有这个，在 SQLite 数据库中进行查询。

```
rc = sqlite3_prepare(pMinte, "SELECT * FROM 'minte'", -1, &stmt, 0); 
```

它工作得很好。但是如果需要查询怎么办

```
SELECT * FROM 'minte' WHERE something = 'ășîâț' 
```

?

请不要对我大喊大叫，我是新手。

# html - 内联块和浮动宽度/包装的行为不同？

> ID：10919369
> 
> 赞同：0
> 
> 时间：2012-06-06T17:45:10.997
> 
> 标签：html, css

我正在尝试确定使用 CSS 和`div`s 制作并排列式布局的最佳方法。

出于某种原因，当我使用 时`display: inline-block;`，如果 column-div 的总宽度等于 100%，则最后一个 div 将换行到下一行。但是，如果我使用浮动 div，即使宽度相同，也不会发生这种情况。

例如，本例中的两个 div 出现在不同的行上：

```
<html>

    <head>

        <link rel="stylesheet" type="text/css" href="http://rleahy.ca/reset.css" />

        <style type="text/css">

            .column {   width: 50%;
                        display: inline-block;
                    }

        </style>

    </head>

    <body>

        <div class="column">

            Column 1

        </div>

        <!--    This div is on the second line  -->
        <div class="column">

            Column 2

        </div>

    </body>

</html> 
```

但在这个例子中，他们没有：

```
<html>

    <head>

        <link rel="stylesheet" type="text/css" href="http://rleahy.ca/reset.css" />

        <style type="text/css">

            .column {   width: 50%;
                        float: left;
                    }

        </style>

    </head>

    <body>

        <div class="column">

            Column 1

        </div>

        <div class="column">

            Column 2

        </div>

    </body>

</html> 
```

同时使用 Chrome 和 IE8。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:50:40.257

inline-block 尊重标记中的空白。尝试：

```
<div class="column">Column 1</div><div class="column">Column 2</div> 
```

走着瞧吧

# php - 在关联数组 PHP 中查找字符串

> ID：10919372
> 
> 赞同：1
> 
> 时间：2012-06-06T17:45:27.523
> 
> 标签：php, arrays

如果我有一个关联数组来存储来自 csv 文件的值，如下所示：

```
$file_users = fopen("Users.csv", "r");
while (($record = fgetcsv($file_users, 1024, ',""')) !== FALSE){
        $users[]= array($record[0] => $record[2].$record[3]);
} 
```

record[0]、record[2] 和 record[3] 是列中的值，逐行。

然后这是我从数组中搜索值并打印结果的方法：

```
for($i=0;$i<count($users);$i++){
foreach($users[$i] as $username_matricula => $username_fullname){
    if($username_matricula === $some_string){
        echo "Found: ".$some_string." and the result is: ".$username_fullname;
        }#end if
    }#end foreach
}#end for 
```

它向我抛出了以下警告：

```
Warning:  Invalid argument supplied for foreach(). 
```

我究竟做错了什么？还有另一种方法可以在 assoc 数组中查找字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:50:28.930

也许这个？

```
foreach((array)$users[$i] as $username_matricula => $username_fullname){ 
```

通过在实际数组前面添加 (array) 可以使其为空安全。（没有警告）

# c# - Socket.io - 每 34 毫秒接收一次数据

> ID：10919373
> 
> 赞同：3
> 
> 时间：2012-06-06T17:45:28.243
> 
> 标签：c#, javascript, canvas, live-streaming

我正在尝试使用从 C# 应用程序捕获的图像创建 HTML5“远程桌面”。图像被转换成 base64 字符串并通过 socket.io 发送到页面并显示在画布上。它在我的 PC 上运行良好，但在任何速度较慢的计算机上都不能。它似乎无法足够快地更新并导致页面崩溃。这是“接收”操作代码：

```
socket.of('/1').on('receive', function (data) {
    var img = new Image();
    img.onload = function () {
        context.drawImage(img, 0, 0, example.width, example.height);
    };

    img.src = "data:image/png;base64," + data.message;
}); 
```

数据每 34 毫秒发送一次，因此画布以大约 29 fps 的速度更新，并且看起来像是实时视频。有没有办法可以接收数据并在另一个“线程”中绘制图像？或者任何人都可以建议如何解决这个问题？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:07:26.620

[Browserling](http://www.browserling.com)完全符合您的要求 - 它使用`<canvas>`. 方便的是，他们[的代码](http://browserling.com/bundle/encoder.js)未缩小。你可以看看他们是怎么做的。

如果您可以将您的 C# 设置为[VNC](http://en.wikipedia.org/wiki/Virtual_Network_Computing)服务器，我会使用[noVNC](https://github.com/kanaka/noVNC)，一个使用 WebSockets 和`<canvas>`. （值得一读的是 noVNC 的[性能说明](https://github.com/kanaka/noVNC/wiki/Performance-notes)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:16:03.150

当您使用 socket.io 时，它允许进行交叉通信并将数据从客户端发送到服务器，就像服务器到客户端一样，您应该使机制不仅仅是向客户端发送垃圾邮件数据，而是要更加小心。

当您向客户端发送图像数据时，不要立即发送另一个。首先，ping 可以低是一回事，但带宽可以低 - 是另一回事。
当您将图像数据从服务器发送到客户端时，客户端接收数据，使客户端自动将您收到数据并处理它的信息发送到服务器，使服务器知道客户端已准备好接收下一个图像。

您的 FPS 将被丢弃，但这是使实时视频在任何类型的连接和任何类型的分辨率下高效工作的常见做法。
这不是播放已经存在的视频 - 因此没有缓冲或预缓存过程的地方。
为了稍微提高性能，您可以根据 ping 和反应速度计算接收和处理图像以提前发送下一帧，它可能会在连接良好时增加 5-10 帧，在慢速连接时增加 0-3 帧。

与此同时，您可能希望了解更好的实时图像流式传输方式，例如 MJPEG (Motiona JPEG)，它允许流式传输实时图像，但要远离 websocket，因为使用 WebSockets 进行图像流式传输会创建额外的处理以满足协议细节。而 MJPEG 旨在用于图像流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T16:51:44.240

这个线程有点旧，你可能已经找到了解决方案。

如果没有，你可以看看[Myrtille](https://github.com/cedrozor/myrtille)，一个基于 HTML4/5 浏览器的远程桌面客户端。它使用 C#、websockets、canvas 和 base64 编码图像（PNG、JPEG 或 WEBP，取决于配置和带宽）。

几年前，HTML5 浏览器无法应对大的 websocket 流量，所以我尝试设置 2 个 websocket：一个用于上行链路，另一个用于下行链路。它有一点帮助，但不是很令人满意。我试图限制 websocket，让客户端数据包在发送下一个数据包之前收到确认。在某些浏览器上效果更好，但在其他浏览器上却导致速度变慢。

现在的浏览器不需要这样的限制。Myrtille 只需将图像推送到浏览器即可。

也就是说，RDP 协议足够智能，可以只处理和发送两个帧（区域）之间的差异，就像大多数视频编解码器一样，而不是整个显示。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T17:55:20.763

只要 UI / DOM 正在更新、更改、更改或与更改视口有关的任何事情，浏览器就会在此期间锁定。

现在你想做的事情几乎是不可能的，我没有说不可能的唯一原因是因为你现在永远不知道;)。

我也是 ac# 开发人员，我非常渴望明年这个时候将为我们带来的变化。

你还早一年...

# google-maps - 在访问表单上实施 Google 地图

> ID：10919374
> 
> 赞同：2
> 
> 时间：2012-06-06T17:45:37.440
> 
> 标签：google-maps, ms-access

我正在寻求帮助开发一个集成了谷歌地图的 MS Access 表单，以便我们的司机可以根据谷歌地图查找停靠点并确切知道它在哪里。

我有这样的线框（基本模型）： [![地图](../Images/7876b55790d758d338613ab013b2e2ff.png)](https://i.stack.imgur.com/hoZQf.png)

所以我的问题是，如何根据左侧的信息填充屏幕（地图）的右侧？我需要传递值吗？此外，地图可以自动生成，还是用户必须单击按钮才能显示该地图？

“西尔斯大厦的路线”按钮只是一个填充物，将是我们所在位置的按钮。我设想这个开口是另一个窗口。

想法？再次感谢 StackExchange :D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:03:58.190

您上面的评论表明您正在解决这个问题。谷歌地图使用 + 号作为空格的替代品。您提供的 youtube 视频链接显示了一个很好的超链接构建器。更通用的解决方案是将浏览器“控制源”字段设置为：

```
="https://maps.google.com/maps?" & Replace([Address],' ','+') & ",+" & Replace([City],' ','+') & ",+" & Replace([State],' ','+') & ",+" & [Zip] 
```

# list - 强制重新计算列表

> ID：10919375
> 
> 赞同：4
> 
> 时间：2012-06-06T17:45:40.147
> 
> 标签：list, haskell, memory-management

下面的函数`search`搜索在某个函数下具有相同输出的两个输入。在搜索过程中，它会遍历输入列表`xs`两次，并且这个输入列表可能非常大，例如`[0..1000000000]`. 我宁愿使用内存来存储由碰撞创建的 HashSet 而不是存储 的元素`xs`，我的理解是，即使`xs`可以延迟计算，它也会保留下来，以防调用`find`.

问题：

*   这种理解正确吗？
*   如果我将其保留为列表，是否有办法`xs`在将其传递给时重新计算`find`？
*   有没有我可以使用的替代数据结构`xs`来控制使用的空间？`xs`仅用于指定要检查的输入。

请注意，没有类型限制`xs`- 它可以是任何类型的集合。

```
import Data.HashSet as Set
import Data.Hashable
import Data.List

search :: (Hashable b, Eq b) => (a->b) -> [a] -> Maybe (a,a)
search h xs =
  do x0 <- collision h xs
     let h0 = h x0
     x1 <- find (\x -> (h x) == h0) xs
     return (x0,x1)

collision :: (Hashable b, Eq b) => (a->b) -> [a] -> Maybe a
collision h xs = go Set.empty xs
  where
    go s [] = Nothing
    go s (x:xs) =
      if y `Set.member` s
        then Just x
        else go (Set.insert y s) xs
      where y = h x

main = print $ search (\x -> x `mod` 21)  ([10,20..2100] :: [Int]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T18:45:17.167

我在这里基本上回答了这个问题：[https ://stackoverflow.com/a/6209279/371753](https://stackoverflow.com/a/6209279/371753)

这是相关的代码。

```
import Data.Stream.Branching(Stream(..))
import qualified Data.Stream.Branching as S
import Control.Arrow
import Control.Applicative
import Data.List

data UM s a = UM (s -> Maybe a) deriving Functor
type UStream s a = Stream (UM s) a

runUM s (UM f) = f s
liftUM x = UM $ const (Just x)
nullUM = UM $ const Nothing

buildUStream :: Int -> Int -> Stream (UM ()) Int
buildUStream start end = S.unfold (\x -> (x, go x)) start
    where go x
           | x < end = liftUM (x + 1)
           | otherwise = nullUM

usToList x = unfoldr (\um -> (S.head &&& S.tail) <$> runUM () um) x 
```

长话短说，不是传递一个列表，而是传递一个描述如何生成列表的数据类型。现在您可以直接在流上编写函数，也可以使用该`usToList`函数来使用已有的列表函数。

# windows-runtime - 在 Metro 和桌面应用程序之间共享文件

> ID：10919376
> 
> 赞同：1
> 
> 时间：2012-06-06T17:45:40.887
> 
> 标签：windows-runtime, microsoft-metro

我有一个桌面应用程序，它在 Windows 7 上的 c:\ProgramData 文件夹下创建文件。（我无法将文件位置移动到文档文件夹。）我也想提供这个应用程序的 Metro 版本。Metro 应用程序应该能够读取和写入由桌面版本创建的相同文件。正如我所看到的，地铁不允许以某种明显的方式这样做。有没有办法让 Metro 应用程序可以使用该文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:19:19.220

Metro 应用程序无法访问大多数 Windows 桌面文件夹。C:\ProgramData 不是允许的位置之一。请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)以获取允许的位置列表以及如何到达它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:36:21.047

您可以增加将数据从 WinRT 应用程序“发送”到桌面应用程序的可能性。尝试为此使用共享合同（[检查那里](http://www.jonathanantoine.com/2011/09/18/windows-8-the-sharing-contract/)和[那里](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)）。我知道这不是很好的解决方案，但总比没有好。

**编辑：**这种方式是不可能的。我刚刚检查并收到消息 -***无法从桌面共享任何内容。***

# python - 对函数内部的不同事物使用相同的变量是一种好习惯吗

> ID：10919379
> 
> 赞同：3
> 
> 时间：2012-06-06T17:45:52.100
> 
> 标签：python, variables, coding-style

在如下函数中：

```
def foo(case):
    if case == 1:
        my_var = []
        # then do something with my_var
    elif case == 2:
        my_var = {}
        # then do something with my_var 
```

由于变量`my_var`存在于不同的情况下，所以它不应该在运行时引起问题。但这是 Python 中的一个好习惯吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T17:47:57.520

对于使用相同代码的其他人来说，这可能会让人感到困惑。一些风格指南也不鼓励将相同的变量名用于不同的目的。如果你可以避免它，那么你应该避免它，尽管也有很好的理由来偏离这条规则。他们真的是一回事吗？一个是项目列表，另一个是值字典，那么它们包含什么？如果您能想到一个更具描述性的变量名称，那么这是一个好主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T17:48:10.363

一般来说，没有。当一个变量意味着不止一件事时，它会增加潜在的混乱。另外，如果您必须重构代码以添加新功能或其他内容，那么您很有可能使该任务变得更加困难。也就是说，Python 是一种鸭子类型语言，所以如果它在功能上是相同的，但数据类型不同，那么你可能会很高兴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T17:48:28.867

应用你自己的判断。如果您觉得这两种情况下对象的含义相似，则使用相同的名称可能会提高可读性。如果您觉得对不同的事物使用相同的名称会造成混淆，请不要这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T17:48:36.903

我会说不，因为那样你就有更大的机会得到意想不到的结果和烦人的调试。但有时可能有一个特定的原因，这是一个好主意。所以这真的取决于你在做什么。

# linux - 通过 sshexec 从 ant 向“su”命令传递密码

> ID：10919381
> 
> 赞同：2
> 
> 时间：2012-06-06T17:45:54.390
> 
> 标签：linux, ant, su

有没有办法将密码传递给 linux“su”命令？我正在尝试使用 sshexec 和 Ant 来自动化部署。作为其中的一部分，我需要执行“su”命令，但我找不到给它一个密码的方法。su 命令没有像 sudo 那样的 -S 开关。我试过在 sshexec 上使用 commandResource 和 input 属性，但我只得到一个“su：抱歉”。

在任何人认为我之前，我没有将密码存储在文件中。根据提示输入密码，将在 Ant 的内存中生成要执行的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:13:25.410

不是这方面的专家，但您可能应该使用 sudo 而不是 su。以下线程可能有助于更多[pass-password-to-su-sudo-ssh](https://stackoverflow.com/questions/233217/pass-password-to-su-sudo-ssh)

# php - 在支持土耳其字符的 codeigniter 中创建 pdf 的插件

> ID：10919382
> 
> 赞同：0
> 
> 时间：2012-06-06T17:46:01.947
> 
> 标签：php, codeigniter

我在 codeigniter 中使用了 dom pdf 类来创建 html 到 pdf 创建。但是这个 dom pdf 不支持土耳其字符。是否有任何支持土耳其字符的pdf插件。

谢谢希拉雅

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:19:20.993

为了在 DOMPDF 中支持土耳其语，土耳其语字符使用 dejavu 字体

```
.turkish
{
        font-family: 'dejavu sans';
} 
```

从下面的链接下载字体

[http://dejavu-fonts.org/wiki/下载](http://dejavu-fonts.org/wiki/Download)

并复制到文件夹 dompdf/lib/fonts

dom pdf 使用 dejavu 支持土耳其字符

# python - 尝试在代理后运行 Google App Engine，收到错误

> ID：10919388
> 
> 赞同：1
> 
> 时间：2012-06-06T17:46:37.153
> 
> 标签：python, google-app-engine, proxy

我在我的电脑上运行 Python 2.6.1，并且刚刚安装了 google App Engine。

当我单击 App Engine Launcher 时，它会显示一个错误对话框，并要求我检查`GoogleAppEngineLauncher.exe`文件以获取更多详细信息。

我在下面附加了日志文件：

```
File "GoogleAppEngineLauncher.py", line 42, in <module>
File "wx\_core.pyc", line 7913, in __init__
File "wx\_core.pyc", line 7487, in _BootstrapApp
File "launcher\app.pyc", line 58, in OnInit
File "launcher\app.pyc", line 152, in _VersionCheck
File "urllib.pyc", line 82, in urlopen
File "urllib.pyc", line 190, in open
File "urllib.pyc", line 338, in open_http
File "urllib.pyc", line 351, in http_error
File "urllib.pyc", line 702, in http_error_407
File "urllib.pyc", line 714, in retry_proxy_http_basic_auth
File "urllib.pyc", line 773, in get_user_passwd
File "urllib.pyc", line 782, in prompt_user_passwd
EOFError: EOF when reading a line 
```

从文件中，我感觉它是关于提供正确的代理详细信息。

我检查了[http://code.google.com/p/google-appengine-wx-launcher/issues/detail?id=17](http://code.google.com/p/google-appengine-wx-launcher/issues/detail?id=17) 和[http://code.google.com/p/googleappengine/issues/detail?身份证=544](http://code.google.com/p/googleappengine/issues/detail?id=544)。

似乎是对某些特定的 .py 文件进行一些编辑，以便我可以输入代理设置和用户名/密码。

我也遇到了一些建议，告诉我在命令提示符下在环境变量中设置代理 - 但这没有奏效。请问有什么建议吗？

更新：我在 nomagon dot com /?p=5 遇到了以下内容我正在使用它，但无法从 appcfg.py 文件中理解

如果你不在代理后面，那么你可以去！您可以使用 App Engine Launcher 中的部署按钮，但是如果您使用代理，则需要设置一些变量

```
In a CMD window:
set HTTP_PROXY=<proxy>
set HTTPS_PROXY=<prox>
In a CMD window:
appcfg.py update <path to app> 
```

# r - R - 数据框中数据的直方图/密度图

> ID：10919392
> 
> 赞同：1
> 
> 时间：2012-06-06T17:46:55.043
> 
> 标签：r, ggplot2, histogram

我确信有一个明显而简单的解决方案......但我在这个上画了一个完全空白：如何使用数据集中的所有数据点创建直方图和/或密度图，其中包括几行和几列？

示例数据：

```
MYdata <- data.frame(Name = round(rnorm(12, 1000, 250)), 
                     Sample1 = rnorm(12, 10000, 2500), 
                     Sample2 = rnorm(12, 10000, 2500), 
                     Sample3 = rnorm(12, 10000, 2500), 
                     Sample4 = rnorm(12, 10000, 2500)) 
```

“名称”是包含行名称的列的标题。Sample1 到 Sample4 列包含数据。 `hist()`或`geom_histogram()`需要 x = 。但我不知道我的数据集中的 x 是什么。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:02:33.387

`melt`从`reshape2`包裹中签出。自从哈德利（Hadley）制作了它们`reshape2`之后，`plyr`它们`ggplot`一起玩得非常好：

```
MYdata.melt <- melt(MYdata, id.vars='Name')

ggplot(MYdata.melt, aes(x=value, color=variable)) + geom_density() 
```

我使用`geom_density()`的是因为您的数据是连续的，但更改`geom_histogram()`为直截了当。

# jquery - jQuery .css() 在 FF 中不起作用，但在 Chrome 和 Safari 中起作用

> ID：10919393
> 
> 赞同：0
> 
> 时间：2012-06-06T17:46:57.880
> 
> 标签：jquery, css, backbone.js, coffeescript

我正在使用 Backbone 并具有以下视图：

```
class GT.RunManager.Views.ViolationMarker extends Backbone.View
 className: 'violation-marker'

 template: JST['app/templates/violation_marker']

 initialize: (@options) ->
   @x = @options.x
   @y = @options.y
   @location = @options.location
   @render()

 render: =>
   @$el.html @template()
   @$el.data 'location', @location
   @$el.css
     'top': @y
     'left': @x
   this 
```

从以下位置调用：

```
class GT.RunManager.Views.FloorplanView extends Backbone.View
  className: 'floorplan-view'

  events:
   'click .violation-marker' : 'edit_location'
   'click'  : 'create_location'

 initialize: (@options) ->
   @run = @options.run
   @student = @options.student
   @floorplan = @options.run.get('floorplan')
   @locations = new GT.RunManager.Collections.Locations()
   @locations.run = @options.run
   @locations.on 'add', @set_marker
   @locations.on 'reset', @load_markers

 @run.on 'remove_location', (location) =>
   location.destroy() if location
   @load_markers()

 @locations.fetch data: { student_id: @student.id }
 @render()

render: =>
  if @floorplan
    @$el.css 'background-image', "url(data:image/png;base64,#{@floorplan.url})"
  this    

create_location: (e) =>
  @locations.create x: e.offsetX - 10, y: e.offsetY - 10, student_id: @student.id, run_id: @run.id

load_markers: =>
  @$el.find('i').remove()
  @locations.each (location) => @set_marker(location, false)

set_marker: (location, prompt = true) =>
  marker = new GT.RunManager.Views.ViolationMarker(location: location, x: location.get('x'), y: location.get('y'))
  @$el.append marker.el
  if prompt
    @run.trigger 'violations:set', location 
```

这个想法是在用户触摸它的屏幕上放置一个图标（在 iPad 上，用于 exp）。它在 Chrome 和 Safari 中效果很好，但在 Firefox 中却不行，它的图标被放置在父 div 的左上角。

有任何想法吗？

编辑：这个主干视图的样式使用以下 css：

```
div.violation-marker {
position: absolute;
background-color: red;
@include border-radius(6px);
padding: 4px;} 
```

模板只是（引导程序）：

```
<i class="icon icon-fire icon-white"></i> 
```

父 div 的样式为：

```
.floorplan-view {
position: relative;
float: left;
margin-left: 100px;
width: 755px;
height: 755px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T15:12:38.533

原来问题在于 Firefox 不处理 e.offsetX 和 e.offsetY。一旦我改变了捕捉位置的方式，一切都很好。这是获取 x 坐标的防 Firefox 版本：

`x = (ev.offsetX || ev.clientX - $(ev.target).offset().left)`

感谢所有的帮助。

# python - 谷歌应用引擎日志系统中的无限递归

> ID：10919396
> 
> 赞同：3
> 
> 时间：2012-06-06T17:47:02.150
> 
> 标签：python, google-app-engine, logging, recursion

在我正在开发的应用程序引擎应用程序的本地实例上，我正在经历日志系统的无限递归。不幸的是，由于问题出在日志系统上，我看不到错误消息。python 'print' 命令也不适用于谷歌应用引擎应用程序，因此我无法显示任何有用的信息。

即使只是访问网站根目录，问题也很明显。

这似乎是一个导入问题，但除此之外，日志系统应该可以工作，但它没有。

该站点的已部署版本正在运行，这使我想到了可能的本地配置/系统问题。

我正在使用 python 2.7.2 和 CURRENT_VERSION_ID=1.1

这是错误的很长的堆栈跟踪：

```
 --> --> -->
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 2781, in _HandleRequest
    self._Dispatch(dispatcher, self.rfile, outfile, env_dict)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 2669, in _Dispatch
    base_env_dict=env_dict)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 692, in Dispatch
    base_env_dict=base_env_dict)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1731, in Dispatch
    self._module_dict)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1631, in ExecuteCGI
    reset_modules = exec_script(config, handler_path, cgi_path, hook)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1319, in ExecuteOrImportScript
    exec module_code in script_module.__dict__
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\admin\__init__.py", line 79, in <module>
    from google.appengine.ext.webapp import _template
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\_template.py", line 37, in <module>
    from google.appengine.ext.webapp import template
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\template.py", line 61, in <module>
    webapp._config_handle.django_setup()
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\__init__.py", line 153, in _django_setup
    __django_version_setup()
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\__init__.py", line 99, in __django_version_setup
    'http://code.google.com/appengine/docs/python/tools/'
  File "C:\Python27\lib\logging\__init__.py", line 1582, in warning
    root.warning(msg, *args, **kwargs)
  File "C:\Python27\lib\logging\__init__.py", line 1144, in warning
    self._log(WARNING, msg, args, **kwargs)
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1250, in _log
    self.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 1260, in handle
    self.callHandlers(record)
  File "C:\Python27\lib\logging\__init__.py", line 1300, in callHandlers
    hdlr.handle(record)
  File "C:\Python27\lib\logging\__init__.py", line 744, in handle
    self.emit(record)
  File "C:\Python27\lib\logging\__init__.py", line 870, in emit
    self.handleError(record)
  File "C:\Python27\lib\logging\__init__.py", line 797, in handleError
    None, sys.stderr)
  File "C:\Python27\lib\traceback.py", line 124, in print_exception
    _print(file, 'Traceback (most recent call last):')
  File "C:\Python27\lib\traceback.py", line 13, in _print
    file.write(str+terminator)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1492, in write
    logging.getLogger()._log(logging.ERROR, message, ())
  File "C:\Python27\lib\logging\__init__.py", line 1249, in _log
    record = self.makeRecord(self.name, level, fn, lno, msg, args, exc_info, func, extra)
  File "C:\Python27\lib\logging\__init__.py", line 1223, in makeRecord
    rv = LogRecord(name, level, fn, lno, msg, args, exc_info, func)
  File "C:\Python27\lib\logging\__init__.py", line 266, in __init__
    self.levelname = getLevelName(level)
  File "C:\Python27\lib\logging\__init__.py", line 167, in getLevelName
    return _levelNames.get(level, ("Level %s" % level))
RuntimeError: maximum recursion depth exceeded while getting the str of an object 
```

以下是 main.py 的导入列表：

```
from google.appengine.ext import webapp

import fix_path
import sys
import os
import urllib
import urllib2
import pprint
import logging
import cgi
import random
import Cookie
import datetime
import time
import urlparse
import urllib2
import urllib, cStringIO
import hashlib
import copy

from urllib import urlretrieve
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
from google.appengine.ext.webapp import template
from google.appengine.api import users
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext import db
from google.appengine.dist import use_library
from google.appengine.api import memcache
from django.utils import simplejson
from gaesessions import get_current_session

from myapp.models import *
from myapp.models import sequence_selection as models_sequence_selection
from myapp.sequence_selection import utils as sequence_selection_utils
from myapp.models import video 
from myapp.models.video import * 
from myapp.models.song import * 
from myapp.models.flashified import *
from myapp.music_recommendation import get_song_recommendations,get_song_recommendations_learning_data,learn_song,learn_song_from_video

from myapp.core import is_number
from myapp import mailing
from myapp import search
from myapp import motif
from myapp import retrieve_instagram
from myapp import coords_distance
from myapp import performancetest

from google.appengine.api import mail
from google.appengine.api import images 
```

实际上，重命名应用程序的目录并使用不同的端口重新导入谷歌应用程序引擎启动器解决了我的问题，但可能不是错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:57:37.403

正如@skreft 所说，您需要上传相关来源以获得真正的答案。

尽管就日志记录而言，使用`import logging`然后`logging.info()`来帮助定位问题。

我建议现在评论日志代码，看看你的堆栈跟踪揭示了什么。然后，如果您没有收到错误，请开始逐段添加日志记录代码，直到找到错误为止。

# emacs - 为乳胶配置 emacs - void-variable LaTeX-mode-hook

> ID：10919398
> 
> 赞同：5
> 
> 时间：2012-06-06T17:47:29.243
> 
> 标签：emacs, configuration, latex, auctex

在[此 pdf 文档](http://www-zeus.physik.uni-bonn.de/~brock/teaching/edv_ws0607/doc/emacs-latex.pdf)之后，我将以下内容添加到我的`~/.emacs`文件中：

```
(load "auctex.el" nil t t)
(setq TeX-auto-save t)
(setq TeX-parse-self t)
(setq TeX-PDF-mode t) ;; .pdf statt .dvi per default:
;;Zeilenumbruch
;;(add-hook ’LaTeX-mode-hook ’turn-on-auto-fill)
;;Syntax Higlight
(add-hook ’LaTeX-mode-hook ’turn-on-font-lock)
;; Mathe Modus
(add-hook ’LaTeX-mode-hook ’LaTeX-math-mode)
;; Reftex einflechten und laden
(setq reftex-plug-into-AUCTeX t)
(add-hook ’LaTeX-mode-hook ’turn-on-reftex)
;; Satzende ". " statt ". ". " fuer M-k: loeschen bis Satzende usw.
;;(setq sentence-end "[.?!][]\"’)}]*\\($\\| \\| \\)[
;;]*") ;; Da ist ein "Newline in der Zeile!"
;;(setq sentence-end-double-space nil)
;;direkte Rechtschreib Korrektur:
;;(add-hook ’LaTeX-mode-hook ’flyspell-mode)
;; Nur benutzen falls Auctex > 11.81 mit preview-latex:
(load "preview-latex.el" nil t t)
;; aspell ist besser als ispell.
;; Zeile kommentieren, falls nicht installiert:
(setq-default ispell-program-name "aspell")
;; Deutsche Rechtschreibung falls \usepackage{ngerman}
;; oder german benutzt wird
(add-hook ’TeX-language-de-hook
(function (lambda () (ispell-change-dictionary "german8")))) 
```

不幸的是，emacs现在没有启动，而是给出了错误

```
Warning (initialization): An error occurred while loading `/home/../.emacs':

Symbol's value as variable is void: ’LaTeX-mode-hook

To ensure normal operation, you should investigate and remove the
cause of the error in your initialization file.  Start Emacs with
the `--debug-init' option to view a complete error backtrace. 
```

开始时`--debug-init`会提供以下信息

```
Debugger entered--Lisp error: (void-variable ’LaTeX-mode-hook)
  (add-hook ’LaTeX-mode-hook ’turn-on-font-lock)
  eval-buffer(#<buffer  *load*> nil "/home/../.emacs" nil t)  ; Reading at buffer position 812
  load-with-code-conversion("/home/../.emacs" "/home/../.emacs" t t)
  load("~/.emacs" t t)
... 
```

我尝试`latex-mode-hook`改用。我搜索了一个解决方案，但我似乎是唯一一个遇到这个问题的人。

我正在使用带有最新 Emacs 和 Auctex 的 Ubuntu 12.04。如果需要，我会发布版本信息，但我宁愿认为必须将某些内容添加到配置中，或者必须安装任何软件包。

如何让 emacs 使用该配置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T05:01:31.380

您是否使用了错误的单引号字符？它似乎是某种反向引用，而不是普通的单引号。尝试

```
'LaTeX-mode-hook 
```

代替

```
’LaTeX-mode-hook 
```

（同样适用于该字符的所有其他事件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:56:40.247

正如托马斯所说，后引号不是您要在那里使用的字符，它应该是单引号。但是，一般来说，如果你得到“symbol's value as variable is void”的错误，它的含义与其他语言中的NPE（空指针异常）相同。检查出了什么问题的方法是这样的：

将点移动到给出问题的变量和`C-h v`（或`M-x describe-variable`[不带引号的变量名称]）。您可以`TAB`在键入时使用来完成变量名称，以查看您是否偶然没有输入错误。一旦你看到描述变量的缓冲区——你就知道你已经修复了错误。

现在，如果您通过 auctex.el 设置了 LaTeX 模式，则`latex-mode-hook`必须存在。但是，您需要确保 auctex.el 实际加载并需要`latex-mode`. 它这样做的方式不是 Emacs 的惯用方式，大多数情况下，您将模式的源文件添加到`load-path`变量中，然后`(require 'mode-name)`在 Emacs 打开与之关联的文件类型后有条件地加载模式（使 Emacs 的启动时间更短）通过`autoload`如下所述：[Emacs：.emacs 中延迟加载模式的最佳实践？](https://stackoverflow.com/questions/6935908/emacs-best-practice-for-lazy-loading-modes-in-emacs).

然而，每当你看到一个被调用的变量时，`[something]-mode-hook`就意味着这是一个你想在`[something]`模式加载时调用的函数列表。如果`[something]`模式完全存在，那么变量也存在 99.99% 的可能性（不能为空）。因此，如果它*是*无效的 - 您需要确保它在所有负载下都属于该模式。

# android - SocketChannel 连接需要很长时间

> ID：10919400
> 
> 赞同：0
> 
> 时间：2012-06-06T17:47:42.670
> 
> 标签：android

```
SocketChannel sockChannel = SocketChannel.open();
sockChannel.configureBlocking(false);
sockChannel.connect(new InetSocketAddress(remoteAddr, remotePort)); 
```

在 Android 版本 2.3.4 和 3.2.1 上，连接需要 30 毫秒到 50 毫秒，有时甚至超过 100 毫秒。我已经在两个硬件上执行了几次测试，它总是那么慢。我希望它需要不到 2-3 毫秒，因为它是非阻塞的。

这是一个已知的问题 ？我正在使用 Selector 为 SelectionKey.OP_CONNECT 选择 10 多个 SocketChannel。在这种情况下，Selector.select 使用 100 毫秒的超时，但总时间超过 1 秒，这主要是因为 SocketChannel.connect。是否有任何替代方法可以避免 SocketChannel.connect 的问题，并且仍然可以在 100 毫秒内完成选择器。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:25:26.393

如果`remoteAddr`是 a `String`，将尝试（阻塞）将该名称解析为`InetAddress`. 见[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetSocketAddress.html#InetSocketAddress%28java.lang.String,%20int%29)。

30 到 100 毫秒听起来像是一个合理的 DNS 查询往返时间。

这意味着，延迟发生在`connect()`甚至被调用之前。

# java - 以where条件选择sql中的所有数据？

> ID：10919401
> 
> 赞同：0
> 
> 时间：2012-06-06T17:47:47.220
> 
> 标签：java, sql

我有这个在 Java 中运行的查询。

```
select book from com where genre=?; 
```

我`genre`动态设置参数。有没有办法有时设置参数以便选择所有数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T17:50:12.140

通常的技巧是设置一个单独的参数来选择所有内容：

```
SELECT book FROM com WHERE genre=? OR 1=? 
```

当您将第二个参数设置为`0`时，将使用流派过滤，但当您将其设置为 时`1`，将返回所有内容。

如果您愿意切换到使用[*命名的 JDBC 参数*](http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html)，您可以用一个参数重写，并使用`null`来表示“选择所有内容”：

```
SELECT book FROM com WHERE genre=:genre_param OR :genre_param is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:55:09.193

您的意思是您希望能够使用相同的脚本并传入一个忽略您的“Where”的参数？使用它并将字符串“AllData”传递给第二个参数以包含所有结果并忽略您的第一个参数：

```
select book from com where (genre=? OR "AllData"=?); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:50:07.137

创建一个不同的查询：

```
select book from com; 
```

这将从“com”中的所有行中获取“book”列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T17:50:47.247

只需使用通配符。前任。`SELECT book FROM com WHERE genre LIKE "%"+seachString+"%";`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T17:55:09.693

您可以使用 CASE 表达式 (SQL SQERVER)：

```
select book from com where genre=CASE
          WHEN ? IS NOT NULL THEN ?
          ELSE genre
          END 
```

# c - 如何从文本文件中读取数据

> ID：10919409
> 
> 赞同：2
> 
> 时间：2012-06-06T17:48:21.103
> 
> 标签：c, file, file-io, input

如何从我的文本文件中读取输入？输入文件有几行长，每行的格式`city city distance`是有两个城市和它们之间的距离。

我已经尝试了几件事来阅读输入，但不幸的是这些都不起作用。我需要解析每一行的各个值。（每行包含 2 个城市名称和它们之间的距离。）任何帮助将不胜感激。

```
data = fopen(argv[1],"r");
while(!EOF){

while(1){
    c=fgetc(data);
    inname=(char**)malloc(sizeof(char*));
    if(c==' ')
        mode++;
    else    if(c=='\n'){mode=0;
        break;}
    else {
        switch(mode%3){
            case 0;
                for(i=0;fgetc(data)!=' ';i++){  
                    if(inname[count]!=NULL) {count++;inname=(char**)malloc(sizeof(char*));}
                    inname[count][i]=fgetc(data);}
                break;
            case 1; 
                if(inname[count]!=NULL){ count++;inname=(char**)malloc(sizeof(char*));}
                for(i=0;fgetc(data)!=' ';i++){  
                    inname[count][i]=fgetc(data);}
                break;                                      
            /*case 2;for(i=0;fgetc(data)!='\n';i++){    
                    dist[say]=atoi(str);}}}*/
                }}}count++;}
                ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:51:14.407

我认为您应该查看[fscanf](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)以读取这样的格式化输入。

要读取包含两个字符串和一个 int 的行，您将有如下内容：

```
fscanf(data, "%s %s %d", &city1, &city2, &distance); 
```

要在 EOF 之前读取多行，您的代码应采用以下形式：

```
while(fscanf(data, "%s %s %d", &city1, &city2, &distance)!=EOF) {
  /* rest of your logic here */
} 
```

# bash - 无法在 shell 脚本中运行 ssh

> ID：10919415
> 
> 赞同：2
> 
> 时间：2012-06-06T17:48:35.103
> 
> 标签：bash, unix, ssh

我可以运行`ssh rach@kamel`，但是如果我尝试将其放入`bash script`，我会收到找不到命令。

这是有问题的bash脚本

```
#!/bin/bash
ssh rach@kamel 
```

我也尝试使用 kamel ip 地址，但仍然是同样的问题。

***更新***这是*确切*的消息

```
$ ./devBuild.sh
: No such file or directory../
: command not found 
```

***更新***内容`cat -A devBuild.sh`

```
$ cat -A devBuild.sh
#!/bin/bash^M$
cd ../^M$
ssh adoshi@10.247.39.142 ^M$ 
```

***更新***：现在得到

`$ ./devBuild.sh : hostname nor servname provided, or not known`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:38:10.077

你，有没有机会，有错误的行尾？有时会发生`\r\n`在行尾有 a 而不是仅仅`\n`. 这使得 shebang ( `#!`) 线功能失调。

您可以发布 的结果`cat -A dev.sh`，尤其是第一行吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:57:58.090

^M$ 是 DOS line-end 的症状，修复它，你应该会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:24:37.287

你的脚本是可执行的吗？如果不使用 chmod +x dev.sh

# jquery - jQuery call a function based on a value?

> ID：10919417
> 
> 赞同：1
> 
> 时间：2012-06-06T17:48:42.547
> 
> 标签：jquery, if-statement, append

So let's assume that I have a div with some value in it:

```
<div id="Good">
   <div id="Test4">
      <div class="hidden">
         <div class="weight">147</div> 
```

Then let's say I wanted to use jQuery to append the whole test4 div to another div (with the same structure) called "bad" if the value was less than 100?

Right now I have my append in order but I control it with onClick:

```
<script type="text/javascript">
$(document).ready(function() {
 $('#Test4').click(function() {
    $('#Test4').appendTo('#bad')
 });
});
</script> 
```

If this isn't possible could someone recommend a way to do this? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:55:48.973

You would need to parse that value as an integer, and then test it:

```
$("#test4").on("click", function(){
    if ( +$(".weight", this).text() < 100 )
        $(this).appendTo("#bad");
}); 
```

Fiddle: [http://jsfiddle.net/jonathansampson/fTeMH/](http://jsfiddle.net/jonathansampson/fTeMH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:52:12.533

You could try something like

```
foo = document.getElementById("Test4")
bar = document.getElementById("bad")

bar.appendChild(foo) 
```

# php - 在选项中嵌入多个值 我需要在下拉列表的每个选项中嵌入 2 个值，然后需要能够将它们都传递给 JavaScript 函数。 <select onchange="display(<?=$manufacturers_id?>,<?=$modelID?>,this.value1,this.value2);">.. .. echo " <option value1="\&quot;&quot;.$variantID" ."\"="" value2="\&quot;&quot;.$month_year.&quot;\&quot;&amp;g</h1">ID：10919418 赞同：1 时间：2012-06-06T17:48:44.597 标签：php, javascript, html 回答 #1 赞同：3 时间：2012-06-06T18:00:45.440 您不能在一个选项中添加许多值。相反，您可以使用数据集（html5），例如： <select id="myselect"> <option data-this="foo" data-that="bar"> </select> 读取这些值的 javascript 是： var d = document.getElementById("myselect"); var _this = d.options[d.selectedIndex].dataset["this"]; var _that = d.options[d.selectedIndex].dataset["that"]; 如果你不想弄乱数据集，你可以存储一个 JSON 对象： ... <option value='<?php echo json_encode(array("foo"=>1,"bar"=>2)); ?>'> ... 并提取数据，如： var d = document.getElementById("myselect"); var option_value = JSON.parse( d.options[d.selectedIndex].value ); 你选 编辑： 改变这个： <select onChange="display(<?=$manufacturers_id?>,<?=$modelID?>,this);"> function display(manufacturers_id,modelid,obj) { ... json way var option_value = JSON.parse(obj.options[obj.selectedIndex].value); // option_value.foo = 1; ... dataset way var _this = obj.options[obj.selectedIndex].dataset["this"]; // _this will have the "foo" value } 回答 #2 赞同：1 时间：2012-06-06T17:51:29.180 我会呈现这样的选项： <option data-value1="X" data-value2="Y"> 然后随心所欲地处理这些数据属性（使用 jQuery 的data("value1")方法，使用 nativegetAttribute("data-value1")等。</option></select>

# php - 将 JavaScript 迁移到 PHP

> ID：10919419
> 
> 赞同：1
> 
> 时间：2012-06-06T17:48:56.843
> 
> 标签：php, javascript, jquery, mysql

我刚开始使用 PHP，我正在尝试将一些 jQuery ajax 移动到 PHP 中。这是我的 PHP 文件：

```
<?php
include 'config.php';
include 'opendb.php';

$query = "SELECT * FROM agency ORDER BY name";
$result = mysql_query($query);
while($row = mysql_fetch_assoc($result)){
$id = $row['id'];
$name = $row['name'];
echo "<li class=\"agency\"><a href=\"contentAgency.php?id=$id\">$name</a><ul class=\"agency-sub\"></ul></li>";
}

include 'closedb.php';
?> 
```

这是我当前的 js 函数：

```
//Add Agency content
$("ul.top-level").on("click", "li.agency a", function (event) {
    if($(this).next().length) {
        var numbs = $(this).attr("href").match(/id=([0-9]+)/)[1];
        showContentAgency(numbs, this);
    } else {
        $(this).closest('ul').find('a').removeClass('sub-active');
    }
    event.preventDefault();
}); 
```

这里是 showContentAgency(); 功能：

```
function showContentAgency(id, elem) {
    $.post("assets/includes/contentAgency.php?id=id", {
        id: id
    }, function (data) {
        $(elem).addClass("nav-active").parent().find("ul").html(data).show();
    });
} 
```

我想做的是让 PHP 呈现无序列表，而不是让 jQuery 插入它。这就是它目前在上述 PHP 文件中的特色：

```
echo "<li class=\"agency\"><a href=\"contentAgency.php?id=$id\">$name</a><ul class=\"agency-sub\"></ul></li>" 
```

所以我希望 PHP 填充`<ul class="agency-sub">`列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:55:31.080

php不能像jquery一样访问页面的dom。如果您想使用 Php 访问 DOM，则必须解析整个网页，这对于您想要做的事情来说可能是不切实际的。php只能在浏览器加载之前修改页面。如果要在页面加载后运行代码，则必须使用 javascript。

如果您发布更多代码，我们可能会为您提供更多帮助，因为我们目前不知道该页面的代码是什么样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:59:10.777

这是列表中的列表吗？

顺便说一下，您可以编写如下的 php 代码，它更具可读性

```
<?php
include 'config.php';
include 'opendb.php';

$query = "SELECT * FROM agency ORDER BY name";
$result = mysql_query($query);
while($row = mysql_fetch_assoc($result)){
$id = $row['id'];
$name = $row['name'];
echo "<li class='agency'><a href='contentAgency.php?id=$id'>$name</a><ul class='agency-sub'></ul></li>";
}

include 'closedb.php';
?> 
```

如果你在 echo 中使用双引号，你可以在里面使用单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:15:04.147

你的代码结构对我来说有点不清楚，但大致的轮廓是这样的：你在 contentAgency.php 中获取任何生成内容的函数并调用它来获取 HTML，然后在构建时将其粘贴在里面名单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:51:41.790

我不确定您到底想要什么，但听起来您正在寻找“foreach”循环。当我想从结果集中填充内容列表时，我可以简单地使用：

```
<ul>
<? foreach($result as $object) ?>  
     <li><?=$object?></li>
<? endforeach; ?>
</ul> 
```

foreach 执行一个 for 循环，但在后台执行所有逻辑。希望这可以帮助。

# silverlight - 如何使用 Silverlight MVVM 模式正确连接网格上的可见性绑定？

> ID：10919421
> 
> 赞同：0
> 
> 时间：2012-06-06T17:49:19.413
> 
> 标签：silverlight, binding, mvvm, visibility

更具体地说，我做对了吗，因为它不起作用。我的 ViewModel 中有一个 bool 属性以及一个 TextBlock 的文本属性。如果我更改文本属性，结果会立即出现在屏幕上。所以我知道有些东西正在监听属性变化。可见性属性设置为使用布尔到可见性转换器，但该转换器永远不会被调用。我确定这只是数据绑定的一部分，我做得不对，但我已经尝试了 StackOverflow 上建议的所有内容，以及手动设置绑定和其他几件事。我在这个问题上花了超过 12 个小时，我对整个 Silverlight / MVVM 架构感到非常失望。我很兴奋，我也“想通了”。

详细信息：Silverlight 5.1.10144

App.xaml 资源： `<Application.Resources> <vidstreams:ManagementViewModel x:Key="managementViewModel"/> <vidstreams:VisibilityConverter x:Key="visConverter"/> </Application.Resources>`

MyView.xaml 数据上下文：

```
<UserControl.DataContext>
    <Binding Source="{StaticResource managementViewModel}"/>
</UserControl.DataContext> 
```

MyView.xaml 网格可见性绑定：

```
<Grid x:Name="LayoutRoot" Background="Black">
    <Grid.RowDefinitions>
        <RowDefinition Height="60"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid ...
             Visibility="{Binding IsWaitingVisible, Mode=OneWay, Converter={StaticResource visConverter}}">...</Grid>
    <Button x:Name="test"
         Click="test_Click"
         Content="test visibility"
         HorizontalAlignment="Left"
         Margin="0,0,0,0"
             Grid.Row="1"
             VerticalAlignment="Top"/>
</Grid> 
```

MyView.xaml.cs 实例属性和 test_Click 代码：

```
public ManagementViewModel DataContextObject
        {
            get
            {
                return (ManagementViewModel)App.Current.Resources["managementViewModel"];
            }
        }

    protected void test_Click(object sender, RoutedEventArgs e)
        {

            DataContextObject.IsWaitingVisibile = !DataContextObject.IsWaitingVisibile; //doesn't toggle the visibility or cause the converter to be hit
            DataContextObject.WaitingText = "Loading data..."; //works
        } 
```

ManagementViewModel 类内部结构：

```
public class ManagementViewModel : INotifyPropertyChanged
{
  public event PropertyChangedEventHandler PropertyChanged;
  protected void OnPropertyChanged(string propertyName)
  {
    var p = PropertyChanged;
    if (p != null)
    {
        p(this, new PropertyChangedEventArgs(propertyName));
    }
  }

  bool mIsWaitingVisible = true;
  public bool IsWaitingVisibile 
  {
    get { return mIsWaitingVisible; }
    set
    {
        mIsWaitingVisible = value;
        OnPropertyChanged("IsWaitingVisible");
    }
  }
  ...
} 
```

我会在这里发布转换器代码，但它甚至没有被击中。无论如何，它是一个简单的转换器，就像在本网站的各种帖子中找到的其他转换器一样。

任何想法或建议 - 或者只是确认这可能是 5 中的某种回归错误？- 将不胜感激。也许可见性绑定指令必须设置不同。请记住，TextBlock 工作正常：

```
<TextBlock x:Name="WaitingTextBlock"
           Text="{Binding WaitingText}" .../> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:07:49.857

@GolfARama

嗨，你能试试这个吗

Visibility="{Binding IsWaitingVisible, Mode=TwoWay, Converter={StaticResource visConverter}}">

# ruby - 如何使用 Ruby 或 Nokogiri 获取页面的原始 HTML 源代码？

> ID：10919422
> 
> 赞同：3
> 
> 时间：2012-06-06T17:49:25.197
> 
> 标签：ruby, nokogiri, raw-data

我正在使用[Nokogiri](http://nokogiri.org/)（Ruby Xpath 库）来 grep 网页上的内容。然后我发现一些网页有问题，例如 Ajax 网页，这意味着当我查看源代码时，我不会看到确切的内容，例如`<table>`，等。

如何获取实际内容的 HTML 代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:55:46.293

如果您想要网页的原始来源，请不要使用 Nokogiri。只需将网页直接作为字符串获取，然后不要将其提供给 Nokogiri。例如：

```
require 'open-uri'
html = open('http://phrogz.net').read
puts html.length #=> 8461
puts html        #=> ...raw source of the page... 
```

另一方面，如果您想要页面的后 JavaScript 修改内容（例如执行 JavaScript 代码以获取新内容并更改页面的 AJAX 库），那么您不能使用 Nokogiri。您需要使用 Ruby 来控制 Web 浏览器（例如阅读 Selenium 或 Watir）。

# java - 从日志文件中读取 1 TB 数据

> ID：10919423
> 
> 赞同：1
> 
> 时间：2012-06-06T17:49:26.293
> 
> 标签：java, algorithm, data-structures

我如何读取两个大小为 1 TB 的日志文件而不会耗尽我机器上的内存。我将对它们进行一些比较。我想在 Java 中执行此操作。下面的代码可以工作吗？我的担心的是 FileStream 将无法保存日志文件的数据。

```
public static void main(String args[])
{
  try{
     // Open the file that is the first 
     // command line parameter
     FileInputStream fstream = new FileInputStream("textfile.txt");
     // Get the object of DataInputStream
     DataInputStream in = new DataInputStream(fstream);
     BufferedReader br = new BufferedReader(new InputStreamReader(in));
     String strLine;
     //Read File Line By Line
     while ((strLine = br.readLine()) != null) {
        // Print the content on the console
        System.out.println (strLine);
     }
     //Close the input stream
     in.close();
  }
  catch (Exception e){//Catch exception if any
     System.err.println("Error: " + e.getMessage());
  }
} 
```

任何人都可以指导我这样做的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:53:23.760

您的代码可能会起作用，因为您只是将每一行加载到内存中。但是，一旦读取超过几百行，您将丢失 stdout 缓冲区中的输出。

最好的比较方法是将一些项目加载到一个集合中，然后在完成后丢弃不需要的项目。这将保持较低的内存使用率。如果您想聪明一点，请密切注意进程的内存使用情况，并在达到固定阈值时开始清除。

# c++ - c++ segfault: 字符指针

> ID：10919426
> 
> 赞同：-1
> 
> 时间：2012-06-06T17:49:31.500
> 
> 标签：c++, c, pointers, char, segmentation-fault

> **可能重复：**
> [如何在 C 或 C++ 中反转字符串？](https://stackoverflow.com/questions/198199/how-do-you-reverse-a-string-in-place-in-c-or-c)
> [为什么这个 C 代码会导致分段错误？](https://stackoverflow.com/questions/1614723/why-is-this-c-code-causing-a-segmentation-fault)
> [在c中修改char指针的值会产生段错误](https://stackoverflow.com/questions/5189782/modifying-value-of-char-pointer-in-c-produces-segfault)

运行一个非常简单的代码示例

```
#include <stdlib.h>
#include <iostream>

char* last_char(char* s){
  char* last = s;
  while (*last) ++last;
  return last;
}

char* in_place_reverse(char* s) {
  char* left = s;
  char* right = last_char(s);
  char temp;

  while( left < right ) {
    temp = *left;
    *left = *right;
    *right = temp;

    left++;
    right--;
  }

  return s;
}

int main(){
  char * s = "letters\n";
  std::cout << in_place_reverse(s);
} 
```

我一直得到

```
 Segmentation fault 
```

但从我的角度来看，我没有在代码中做任何非法的事情。请帮助我确定问题所在。

PS我编译

```
g++ example.c 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T17:52:35.537

两个问题：

1.  您正在尝试修改字符串文字。这可能有效，也可能无效，或者可能崩溃。这是调用*未定义的行为*。用于`char s[] = "letters\n"`制作可变副本。
2.  `last_char()`实际上返回一个指向`'\0'`字符串末尾标记的指针——它指向最后一个字符之外。更改`return last`为`return last - 1`。否则你也会移动哨兵，这几乎肯定不是你想要的。（请注意，如果字符串长度为零，这将返回一个指向垃圾的指针。`in_place_reverse()`如果`*s == '\0'`避免这种复杂性，您应该快速成功。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:50:20.640

您正在修改字符串文字，而字符串文字是不可修改的。

`char s[] = "letters\n";`改为使用

# javascript - jquery从title属性获取动态生成的内容

> ID：10919434
> 
> 赞同：1
> 
> 时间：2012-06-06T17:50:08.663
> 
> 标签：javascript, jquery, title

我有一个 html 表 `<table>`，其中每列的列数都有 title 属性，该属性是通过`ajax()`函数动态生成的。我正在尝试从表格的所有列中获取内容，但标题属性的内容未显示，

例如：

```
<table>
   <tr>
       <td id="myid" title="some data generated by ajax() call"> test </td>
   </tr>
  </table> 
```

jQuery代码：

```
 $(document).ready(
     function(){
        alert($("td#myid").html());

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:52:54.560

`ajax success function`在 ajax 执行后在你的 ie中调用它：

```
alert($("td#myid").attr('title')); 
```

.html() 为您提供整个 html，而不仅仅是标题。

*另请注意，对于通过 ajax 接收的任何数据，只有在 ajax 调用成功完成后才需要访问它。当 ajax 调用被触发时，如何在文档就绪时使用它？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:53:04.873

html 返回您需要使用的 innerHtml 属性

```
$("td#myid").attr("title"); 
```

或者

```
$("td#myid").prop("title"); 
```

取决于您的 jquery 版本。

# c# - 悲观锁定记录？

> ID：10919438
> 
> 赞同：0
> 
> 时间：2012-06-06T17:50:12.517
> 
> 标签：c#, mysql, pessimistic-locking, rowlocking

我正在为 Silverlight 应用程序创建一个 WCF Web 服务，并且我需要有一条记录在修改时被读/写锁定。

我正在使用 MySQL 5.5.11 版。

更具体地说，我想防止请求在修改时从 Row 读取数据。

UPDATE 和 SELECT 的两个 SQL 命令实际上非常简单，例如：

更新（应该锁定写/读）：

```
UPDATE user SET user = ..... WHERE id = ..... 
```

选择（从上面的查询锁定时应该无法读取）：

```
SELECT * FROM user WHERE id = ..... 
```

这是我尝试过的，但它似乎根本不起作用或锁定任何东西：

```
START TRANSACTION;
   SELECT user
   FROM user
   WHERE id = 'the user id'
   FOR UPDATE;

   UPDATE user
   SET user = 'the user data'
   WHERE id = 'the user id';
COMMIT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:25:08.473

[MySql默认](http://dev.mysql.com/doc/refman/5.0/en/innodb-consistent-read.html)使用多版本并发控制（这是一个非常非常好的行为，而不是 MSSQL）。尝试使用[锁定读取](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)（LOCK IN SHARE MODE）来实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:00:16.777

您如何确定它没有锁定记录？

当对带有锁的表运行查询时，它将等待锁被释放或最终超时。您的更新事务会发生得如此之快，以至于您甚至无法判断它已被锁定。

您能够判断存在问题的唯一方法是，如果您有一个在事务开始后运行的查询，但返回的是用户的原始值而不是更新后的值。有没有发生过？

我本来只是把它放在评论中，但它太长了，但我会根据你的回复用更完整的答案更新它。

# java - 用 mws 生成 java 对象

> ID：10919442
> 
> 赞同：0
> 
> 时间：2012-06-06T17:50:31.160
> 
> 标签：java, jaxb, amazon-mws

我刚开始使用亚马逊 MWS（营销网络服务），似乎他们不再使用 wsdl 使用不使用肥皂的新亚马逊 MWS 如何生成具有 jaxb 绑定的 java 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:50:13.177

The best approach would be to use [the Java Library](https://developer.amazonservices.com/doc/bde/feeds/v20090901/java.html/191-0032919-5984009) to solve your problems.

# javascript - 为什么要提交表单？

> ID：10919444
> 
> 赞同：1
> 
> 时间：2012-06-06T17:50:36.950
> 
> 标签：javascript, html, forms, button

```
<form name="callEventForm" method="post" action="/PDC/callevent.do">

     ...

     <input type="button" value="Save" name="addCallEvent" id="addCallEvent" onclick="alert('You clicked me!')"/>

     ...

 </form> 
```

单击此“保存”按钮时，将提交表单而不是显示警报。我被引导相信 type="button" 会导致表单在点击时不提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:54:57.170

改变：

```
onclick="alert('You clicked me!')" 
```

到：

```
onclick="alert('You clicked me!');return false;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:34:48.397

我讨厌回答自己的问题，但这是一个奇怪的问题。有一个 ajax:updateField 标记覆盖了按钮的 onclick 事件。更改 ajax:updateField 的源事件允许我建立的 onclick 事件适当地触发。我知道根据我发布的代码，任何人都无法捕捉到这一点，但是页面的其余部分代码太多，以至于我不想让人们涉水而过。

# html - 在客户端使用 jQuery Mobile 的多页 HTML5 Web 应用程序中所有页面的导航栏

> ID：10919445
> 
> 赞同：1
> 
> 时间：2012-06-06T17:50:38.060
> 
> 标签：html, web-applications, jquery-mobile, navbar

我正在使用 jQuery Mobile 创建一个 WebApp。

我有一个这样的页面：

```
<div data-role="page" id="page1">
    <div data-role="header">
        <p>
            Page 1
        </p>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1">To first</a></li>
                <li><a href="#page2">To second</a></li>
            </ul>
        </div>
     </div>     
</div>
 <div data-role="page" id="page2">
    <div data-role="header">
        <p>
            Page 2
        </p>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1">To first</a></li>
                <li><a href="#page2">To second</a></li>
            </ul>
        </div>
     </div>
</div> 
```

现场演示位于[http://jsfiddle.net/FB9KJ/](http://jsfiddle.net/FB9KJ/)

它工作正常，但我不想`<div data-role="navbar">`为每一页重复。

有没有办法在所有 jQuery Mobile 页面上使用相同的导航栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:38:53.640

除非您愿意在 jsp 中使用包含，否则您将不得不满足于每个 jsp 一页。

或者

在编译时使用 ANT Replace 将文件中的 @HEADER@ 标记替换为 HTML 标记。

# web-services - 将 Metro、Netbeans 和 Tomcat7 用于 Web 服务

> ID：10919451
> 
> 赞同：0
> 
> 时间：2012-06-06T17:51:06.687
> 
> 标签：web-services, netbeans, tomcat7, java-metro-framework

我有两个相关的问题：

（1）Tomcat 7/JDK目录下各种Metro文件的“正确”方式是什么？似乎 Metro 提供的自动化过程尚未针对 Tomcat 7 进行更新。

(2) 有没有办法使用 Metro & Netbeans 创建 Web 服务，并将 NetBeans 生成的 .war 文件传输到 Tomcat 7 而无需编辑任何 .xml 文件？

我必须使用 NetBeans 7.x 和 Tomcat 7.x。我可以使用任何版本的 Metro。

这样一个基本的问题似乎在网络上有一个现成的答案，但即使是 NetBeans 网站上的教程似乎也被破坏了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:50:17.230

> 问：将各种 Metro 文件放在 Tomcat 7/JDK 目录中的“正确”方法是什么？似乎 Metro 提供的自动化过程尚未针对 Tomcat 7 进行更新。

你是对的，Tomcat7 的程序还没有更新。无论如何，你可以毫无问题地使用它，它会在 CATALINA_HOME 目录中创建两个目录：

`/endorsed`（它会放在那里`webservices-api.jar`）

`/shared/lib`（它会放在那里`webservices-extra-api.jar, webservices-extra.jar, webservices-rt.jar`并且`webservices-tools.jar`）

> 问：有没有办法使用 Metro & Netbeans 创建 Web 服务，并将 NetBeans 生成的 .war 文件传输到 Tomcat 7 而不编辑任何 .xml 文件？

通常，您应该编辑 web.xml 和 sun-jaxws.xml。但是，因为您使用的是 Tomcat 7，它是 Servlet 3.0 容器，所以不需要 web.xml，您只需处理 sun-jaxws.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime" version="2.0">
<endpoint
      name="SERVICE_NAME"
      implementation="full.qualified.name.of.the.implementation.class"
      url-pattern="/SERVICE_URL"/>
</endpoints> 
```

此外，您必须将 sun-jaxws.xml 放在 WEB-INF 目录中。

也可以看看：

*   [简化了 JAX-WS RI Web 服务部署](http://weblogs.java.net/blog/ramapulavarthi/archive/2010/08/13/jax-ws-ri-web-services-deployment-made-simplified)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:38:40.093

我不能直接回答你的两个问题，而是可以告诉你我是如何解决这个问题的。

我已经使用[这个简单的教程](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)在 tomcat 中安装了 jax-ws 库（没有 Netbeans）。我没有将 jar 复制到 $TOMCAT/lib 目录中，而是将它们复制到 Web 应用程序本身的 WEB-INF/lib 目录中。其余部分与他在教程中描述的几乎相同，并且可以正常工作。

现在回答你的问题：

（1）我不知道应该如何以“正确”的方式完成。但我认为，当它以某种方式起作用时，它就不会那么错。我确信有部署库的最佳实践，但我只是不知道它们。对不起。

(2) 不幸的是，我不使用 Netbeans，所以在这里我也帮不了你。但是，如果您考虑一下，我已经将 jax-ws 参考实现中的所有库复制到了我的 WEB-INF/lib 目录中，并且除了 WEB-INF 目录中的那些之外，我没有触及任何 XML。现在我可以从我的网络应用程序创建一个战争文件，我已经完成了。我认为与 Netbeans 应该没有什么大的区别。

我希望这会有所帮助。

# .net - 我应该使用什么散列函数来散列小数值？

> ID：10919453
> 
> 赞同：4
> 
> 时间：2012-06-06T17:51:15.527
> 
> 标签：.net, security, hash, numbers

在某些情况下，不允许组织使用或存储有用的密钥，例如 SSN 号码、电话号码等。

但是，这些唯一键对于匹配数据非常有用。因此，理论上，如果数据提供者能够为您提供 SSN 的散列值，并且您要存储该散列并使用它进行匹配，那么您将永远不必使用或存储 SSN。

对于像 SSN 这样的东西，什么是合适的散列函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:01:41.523

您需要像对待密码一样对待 SSN。使用强大的慢速散列算法（例如[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)或[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2) ）对它们进行散列，使用唯一的每条记录前缀和后缀盐。

散列 SSN 的缺点是它们是可预测的，并且熵非常小，这使得明文暴力破解非常容易。如果你能负担得起，我建议为这种事情投资硬件保护（即[HSM ）。](http://en.wikipedia.org/wiki/Hardware_security_module)事实上，您应该避免完全[通过 SSN 来识别人员。](https://stackoverflow.com/questions/3315172/hashing-ssns-and-other-limited-domain-information)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:01:06.790

> 因此，理论上，如果数据提供者能够为您提供 SSN 的散列值，并且您要存储该散列并使用它进行匹配，那么您将永远不必使用或存储 SSN。

那是错误的；设计的哈希不是唯一的，不能用于唯一标识任何东西。如果您必须唯一标识某物，并且不允许使用其他人的标识符，则您必须提出自己的标识符。这就是为什么诸如加油卡、电影租赁卡等之类的东西。带有他们自己唯一的会员标识符。

# jquery - 如何替换 ajax 加载的 html 文档上的元标题、关键字和描述？

> ID：10919456
> 
> 赞同：5
> 
> 时间：2012-06-06T17:51:28.507
> 
> 标签：jquery, ajax, replace, title, meta-tags

如何将文档上的元标题和描述替换为 ajax 调用中传入 html 文档的元标题和描述？

我正在从相邻 html 文档的#content div 中调用新内容。我想要发生的是，当新内容加载时，我想用正在加载的 html 文件中的元标题替换主文档标题（以及描述和关键字......也可能因为我在那里使用工具） .

我曾考虑过使用 replace(); 或匹配（）；但我只是想找出最好的方法。

这是脚本：

```
// JavaScript Document
$(document).ready(function() {

    var toLoad
    $(window).bind( "hashchange", function(e) {
            loadcontent();
            return false;

    });

        $('#toc li a').click(function(){
            window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-0);
            var href = $(this).attr( "href" );
            $('meta[name=title]').attr('title', new_title);
            $('meta[name=description]').attr('description', new_description);
            $('meta[name=keywords]').attr('keywords', new_keywords);
            //alert("hey" + window.location.hash);
            $('#breadcrumbs h1').append(" </a><a href='index.html"+ window.location.hash + "' >" + $(this).attr('href') +" ></a>");
            $.bbq.pushState({ url: href });
            $(window).trigger( "hashchange" );

        });

    loadcontent();

});

function loadcontent(){

    var toLoad = window.location.hash.replace("#","") +'.html #content';
            $('#content').hide('slow');
            $('#load').remove();
            $('#conContainer').append('<span id="load">LOADING...</span>');
            $('#load').fadeIn('normal');

            $('#content').load(toLoad,'',function(returnText,status,request){
                showNewContent()
            });

            function loadContent() {
                $('#content').load(toLoad,'',showNewContent());

            }
            function showNewContent() {
                $('#content').show('slow',hideLoader());
            }
            function hideLoader() {
                $('#load').fadeOut('normal');
            }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T08:37:00.883

对于标题，您可以执行以下操作：

```
$('title').html('my new meta title'); 
```

为您的元描述和关键字元素提供一个 ID，以便您可以轻松选择元素：

```
$('#mdescription').attr('content', 'my new meta description');
$('#mdkeywords').attr('content', 'keyword one, keyword two'); 
```

# android - Android 下载多张图片

> ID：10919458
> 
> 赞同：0
> 
> 时间：2012-06-06T17:51:29.363
> 
> 标签：android

我需要从服务器下载 6 张图像并显示在 android 的表格上。最快的方法是什么？我应该只将图像存储在手机上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:56:04.810

*   如果图像永远不会改变，请将它们本地存储在手机上。
*   如果它们定期更改，请检查现有日期并仅在必要时下载。
*   如果无法预测，请根据新服务器映像检查本地映像并仅下载必要的内容。

简而言之，将您可以存储的内容存储在本地并尽可能少地下载。（*假装*下载就像洗衣服：如果它们是干净的，为什么还要浪费时间和金钱来重新洗它们？）

# spring-mvc - Spring 3.1.1 中的 JSTL

> ID：10919459
> 
> 赞同：0
> 
> 时间：2012-06-06T17:51:31.040
> 
> 标签：spring-mvc, jstl

我有点生气了。. . Spring 3.1.1 版本中的 JSTL 库在哪里？

谢谢埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:02:54.610

它无处可去。您必须下载并单独安装。见[https://stackoverflow.com/tags/jstl/info](https://stackoverflow.com/tags/jstl/info)

# sharepoint - 比较 SharePoint 2010 中的两个列表

> ID：10919464
> 
> 赞同：2
> 
> 时间：2012-06-06T17:51:46.263
> 
> 标签：sharepoint, sharepoint-2010

我正在开发 SharePoint 2010，需要比较两个网站。比较必须包括这些站点中的列表。我需要知道除了列表的内容之外是否还有什么需要比较的？另外，比较两个列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:54:10.960

这是一个基本示例，您可能会做一些更复杂的事情，特别是如果您想使用自定义 CamlQuery 过滤项目或检查列表的设置。

```
using(ClientContext ctx = new ClientContext("http://url.to.site.com/"))
{
    Web web = ctx.Web;
    List list = web.Lists.GetByTitle("Pages");
    ListItemCollection items = list.GetItems(CamlQuery.CreateAllItemsQuery());

    ctx.Load(list);
    ctx.Load(items);

    ctx.ExecuteQuery();

    // after the ExecuteQuery call, list and items will contain references
    // to the lists and the items in the list.
} 
```

确保您引用`Microsoft.SharePoint.Client.dll`和`Microsoft.SharePoint.Client.Runtime.dll`。这些可以在场中`C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI`的一台 SharePoint 服务器上找到。将它们复制到您的项目并引用它们。

有关客户端对象模型的更多信息，我建议查看这篇文章：http: [//msdn.microsoft.com/en-us/library/ee857094.aspx](http://msdn.microsoft.com/en-us/library/ee857094.aspx)

# mysql - 如何在批量更新查询（Java、MySQL）中获取自动增量值？

> ID：10919466
> 
> 赞同：0
> 
> 时间：2012-06-06T17:52:07.727
> 
> 标签：mysql, spring-jdbc, batch-updates

我正在使用 Spring-Jdbc 模板（第一个计时器）来创建 MySql 存储库。我有使用 AutoIncrement 列作为主键的表。

我想知道是否有办法通过每个成功的批量创建语句获取新生成的 ID（autoInc）？

任何指针或样本都会有很大帮助。

谢谢潘克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:52:13.350

使用[`getGeneratedKeys()`](http://download.oracle.com/javase/6/docs/api/java/sql/Statement.html#getGeneratedKeys%28%29)您的`Statement`或`PreparedStatement`对象中的方法来识别新的自动生成的值。迭代返回的`ResultSet`对象，按照批处理语句的顺序获取新生成的键值。

[`java.sql.SQLFeatureNotSupportedException`](http://download.oracle.com/javase/6/docs/api/java/sql/SQLFeatureNotSupportedException.html)如果您使用的 JDBC 驱动程序不支持此方法，则 此调用可能会抛出。

**示例代码片段**：

```
String sql_insert =  
    "insert into my_table ( non_auto_incrmnt_fld_names_,_separated ) " +  
                 " values ( record1 ), ( record2 )"; // append as many as required  
...  
int rowsAffected = stmtObject.executeUpdate( sql_insert, Statement.RETURN_GENERATED_KEYS );  
ResultSet rs = stmtObject.getGeneratedKeys();  

//******************************************************  
rs.last();  
int rows = rs.getRow();  
System.out.println( "Generated keys count: " + rows );  
int currentRow = 1;  
rs.beforeFirst();  
//******************************************************/  

while( rs.next() ) {  
    System.out.println( /**/( currentRow++ ) + " = " + /**/rs.getInt( 1 ) );  
} // while rs 
```

# google-app-engine - 如何在 Google App Engine 上上传静态 HTML 网站？

> ID：10919468
> 
> 赞同：4
> 
> 时间：2012-06-06T17:52:17.520
> 
> 标签：google-app-engine

有这方面的教程吗？我的项目中有 3 个文件：

*   索引.html
*   索引.css
*   index.js

应该很简单，但到目前为止，我迷失在庞大的 GAE 文档中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T00:07:17.880

您不需要像 Mark 建议的那样在 app.yaml 中单独调用每个文件；相反，像这样的简单处理程序就足够了：

```
application: myapp
version: main
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /(.*)/
  static_files: \1/index.html
  upload: .*/index.html
- url: /.*
  static_dir: static 
```

然后将您的站点放在包含`app.yaml`.

第一个处理程序确保在`index.html`有人请求目录时提供服务。第二个处理程序直接从静态目录提供所有其他 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:09:34.497

我真的不认为这就是谷歌打算使用该服务的目的。但是如果你真的**需要**提供一些简单的静态内容。

您定义一个[app.yaml](https://developers.google.com/appengine/docs/python/config/appconfig)文件，如下所示：

```
application: staticapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /
  static_files: index.html
  upload: index.html

- url: /index.css
  static_files: index.css
  upload: index.css

-url: /index.js
  static_files: index.js
  upload: index.js 
```

然后使用`appcfg update .`（假设您在源目录中使用 Linux）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T19:28:02.017

我制作了一个简单的 Go 应用程序，它可以很好地做到这一点。[http://yourdomain.com](http://yourdomain.com)将提供 index.html，其余页面可通过[http://yourdomain.com/mypage.html访问](http://yourdomain.com/mypage.html)

这是yaml：

```
application: myawesomeapp
version: 1
runtime: go
api_version: go1

handlers:
- url: /.*
  script: _go_app 
```

这是将在根级别提供所有静态文件的 go 程序：

```
package hello

import (
    "net/http"
)

func init() {
    http.HandleFunc("/", handler)
}

func handler(w http.ResponseWriter, r *http.Request) {
    http.ServeFile(w, r, "static/"+r.URL.Path)
} 
```

然后将所有静态文件放入 /static 目录，运行 goapp deploy 即可。

# c# - 带有 RIA + EntityFramework + MVVM 的 Silverlight 4：Childwindow DomainContext 加载不刷新

> ID：10919469
> 
> 赞同：2
> 
> 时间：2012-06-06T17:52:18.930
> 
> 标签：c#, silverlight, entity-framework, silverlight-4.0, ria

我有一个 Silverlight 4 应用程序，它使用带有 EF 的 RIA 来查询单个 DomainContext 中的多个表。BUGroup、BUGroupBuilding 和 vwBusinessUnit。 ![在此处输入图像描述](../Images/65546db65e24282ce483c45176c77824.png)

UI 基本上加载了 BUGroup 实体集，我可以选择不同的 BUGroups，它会像这样加载子表： ![在此处输入图像描述](../Images/4548cf0a314bd3f18b8d618aba2c82b0.png)

我有一个 DomainContext ，我将其传递给“管理建筑物”按钮中的子窗口，如下所示：

```
 ManageBuildingsChildWindow ManageBuildingscw = new ManageBuildingsChildWindow();
        ManageBuildingscw.Closed += new EventHandler(ManageBuildingscw_Closed);            
        ManageBuildingscw.DataContext = null; 
        ManageBuildingsViewModel ManageBuildingsViewModel = new ManageBuildingsViewModel();                    
        ManageBuildingscw.DataContext = ManageBuildingsViewModel; 
```

然后我在子窗口视图模型中加载子窗口上下文，如下所示：

```
 GetBUGroupResult = SecurityDomainContext.Current.Load(SecurityDomainContext.Current.GetBUGroupsCustomQuery(), LoadBehavior.RefreshCurrent, false);
        GetBUGroupResult.Completed += new EventHandler(GetBUGroupResult_Completed); 
```

这是 GetBUGroupResult 的事件处理程序

```
 void GetBUGroupResult_Completed(object sender, EventArgs e)
        {                
            GetBUGroupBuildings = SecurityDomainContext.Current.BUGroupBuildings.Where(w => w.BUGroupID == BUGroupID).ToList();
            GetBUGroupResult.Completed -= new EventHandler(GetBUGroupResult_Completed);               
        } 
```

我将每个 BUGroupBuilding 绑定到数据网格中的删除链接，它可以从数据库中删除。当我单击管理建筑按钮以调用子窗口时，它第一次加载良好。如果我有 5 个建筑物，它会加载 5 个建筑物。问题是当我在删除一些建筑物后第二次或其他时间加载它时。即使在加载之后，它也会保留旧的 DomainContext。我什至尝试在 GetBUGroupsCustomQuery() 的负载上将 LoadBehavior 设置为 RefreshCurrent

假设我在一个组中有 5 个建筑物，我使用删除链接在父窗口上删除了 2 个，所以现在我有 3 个。调用子窗口。它仍然显示 5。 ![在此处输入图像描述](../Images/3536ccee2761b6312c9f8579d44fc048.png)

现在我对 GetBUGroupsCustomQuery() 的 DomainServices 进行了休息，我得到了正确的 3 值 ![在此处输入图像描述](../Images/88c1363a45396c46231159021333e632.png)

但是在 GetBUGroupResult_Completed 事件处理程序期间，我仍然看到 5 个建筑物。看起来我的 DomainContext 没有刷新，即使我指定了 loadbehavior 来刷新当前。任何输入？

![在此处输入图像描述](../Images/5a67028e0a862f80c283ce2ee4619d40.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:15:59.663

你也可以这样做：

```
var c = SecurityDomainContext.Current;
var group = c.BUGroups.Single(w => w.BUGroupID == BUGroupID);    
c.Refresh(RefreshMode.StoreWins, group.BUGroupBuildings);
GetBUGroupBuildings = group.BUGroupBuildings.ToList(); 
```

`RefreshMode.StoreWins`这样可以保证检索到数据库的当前状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:18:35.020

我遇到了与此类似的问题，并通过将数据加载到上下文中然后分离实体集合中不在新返回对象集合中的任何对象的解决方法来解决。在您的加载操作中尝试这样的事情：

```
SecurityDomainContext.Current.Load<YourObjectType>(
    SecurityDomainContext.Current.GetBUGroupsCustomQuery(),
    LoadBehavior.MergeIntoCurrent,
    loadOperation =>
    {
        var results = context.Comments.Where(
            entity => !loadOperation.Entities.Contains(entity)).ToList();
        results.ForEach(entity => context.Comments.Detach(entity));
    }, null); 
```

我不确定您是否需要替换`<YourObjectType>`为返回的实体类型，或者您是否可以删除该部分，但这至少应该让您接近。

# android - 使用 Android 读取 nfc 标签中的数据值，并以可读格式显示在标签中

> ID：10919470
> 
> 赞同：3
> 
> 时间：2012-06-06T17:52:23.503
> 
> 标签：android, nfc

我尝试了很多方法，对我没有任何效果。下面的代码显示了 ndefmessage，但它不是可读的格式。它显示一些 ndef 消息格式为 b@15d...

```
public void onNewIntent(Intent intent) {
  Tag myTag = (Tag)intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
  def ndefTag = Ndef.get(myTag);
  int size = ndefTag.getMaxSize();         // tag size
  String type = ndefTag.getType();         // tag type
  NdefMessage ndefMesg = ndefTag.getCachedNdefMessage();
  NdefRecord[] ndefRecords = ndefMesg.getRecords();
  int len = ndefRecords.length;
  for (int i = 0; i < len; i++) {
    typ = ndefRecords[i].getType();
    payload = ndefRecords[i].getPayload();
  }
  String textEncoding = ((payload[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
  int languageCodeLength = payload[0] & 0077;
  try {
    @SuppressWarnings("unused")
    String languageCode = new String(payload, 1,languageCodeLength,"US-ASCII");
  } catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
  }
  try {
    text =new String(payload,languageCodeLength+1,payload.length
      -languageCodeLength - 1, textEncoding);
    Toast.makeText(getApplicationContext(),
      text+"First Try",Toast.LENGTH_LONG).show();
    mText.setText("Discovered tag "+text);
  } catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    String val = new String(typ);
    val+=new String(payload);
    Toast.makeText(getApplicationContext(),
      "Second"+val,Toast.LENGTH_LONG).show();
  }
  Log.i("Foreground dispatch", "Discovered tag with intent: " + intent);
  mText.setText("Discovered tag "+text);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:07:41.370

[NdefRecord](http://developer.android.com/reference/android/nfc/NdefRecord.html)的有效负载不一定是`String`.

您需要查看类型名称格式 (TNF) 和类型以确定如何解码有效负载。

如果您在编写标签时在有效负载中编码了一个字符串，则该标签`new String(record.getPayload())`将正常工作。

如果你用其他软件写了一个纯文本标签，它可能是 tnf `TNF_WELL_KNOWN`type `RTD_TEXT`。在这种情况下，有效负载字节数组将包含语言代码作为字符串的第一个字节。有关如何解析有效负载的示例，请参阅[http://developer.android.com/resources/samples/NFCDemo/src/com/example/android/nfc/record/TextRecord.html 。](http://developer.android.com/resources/samples/NFCDemo/src/com/example/android/nfc/record/TextRecord.html)

# java - 在 Windows 7 上使用 RMI

> ID：10919478
> 
> 赞同：0
> 
> 时间：2012-06-06T17:52:59.053
> 
> 标签：java

我是在 Windows 7 上使用 RMI 的新手，我想用 RMI 运行我的项目以显示“HelloWorld”，但我无法运行它，因为我遇到了以下错误。任何人都可以帮助我。我也使用过JDK 1.6。

我的错误是：

java.rmi.UnmarshalException：解组参数错误；嵌套异常是：

```
 java.lang.ClassNotFoundException: Hello_Stub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:03:00.757

您可以通过三种方式获得此异常：

1.  构造/导出远程对象时。在这种情况下，这意味着您没有为`super(int port...)`远程对象扩展`UnicastRemoteObject,`或`UnicastRemoteObject.exportObject()`其他情况提供端口号参数，**并且**您还没有通过`rmic`. 请注意，如果您提供端口号参数，即使为零，您根本不需要运行`rmic`。

2.  将远程对象绑定/重新绑定到注册表时（在服务器中）。在这种情况下，这意味着您没有像上面那样提供端口号等，但是您已经生成了存根，否则您不会因为（1）而走到这一步，*但是*_Stub 类对注册表不可用它的类路径。最简单的解决方案是在同一个 JVM 中运行 Registry，通过`LocateRegistry.createRegistry()`. 请注意，此方法的返回值需要存储在不会被垃圾回收的地方，例如静态变量中。

3.  查找注册表时（在客户端）。在这种情况下，这意味着您没有像上面那样提供端口号等，但是您已经生成了存根，否则由于 (1) 和 (2)，您不会走到这一步，*但是*_Stub 类不可用到其 CLASSPATH 上的客户端。解决方案：将其部署到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:03:22.833

听起来您可能正在关注本教程的过时版本：http: [//docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/hello/hello-world.html)。如果不是这种情况，请在命令行 ( `java -version`) 上检查您的 Java 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:54:26.263

我猜你必须使用[rmic.exe](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/rmic.html)来生成你的远程类存根。这些不是由您的 Java 编译器 (javac.exe) 自动生成的。

您可以定义一个[Ant 任务](http://ant.apache.org/manual/index.html)（称为 rmic）来简化您的工作并确保您的存根是自动生成的。

如果您使用的是 Eclipse，您甚至可以将此任务作为构建过程的一部分，这样您就可以确保每次编译代码时都会生成它们。很可能其他 IDE 也提供类似的功能。

# css - html5boilerplate IE 条件不工作

> ID：10919480
> 
> 赞同：1
> 
> 时间：2012-06-06T17:53:03.653
> 
> 标签：css, internet-explorer, html5boilerplate

好的，这是我第一次使用 html5boilerplate，但无法从我的 css 文件中获取 IE 样式。

我在标题中有这个（根据页面设置）

```
<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head> 
```

在我的样式表中我有

```
#container { float:right; margin-top: 0px; }

.ie6 #container { margin-top: 5px; }

.ie7 #container { margin-top: 10px; }

.ie8 #container { margin-top: 15px; } 
```

它不起作用。真的那么简单吗，我是不是错过了什么。

感谢您的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T17:59:59.443

除非您使用一些 javescript shiv，否则您应该使用实际定义的内容：

`html class="no-js lt-ie9 lt-ie8 lt-ie7`

所以试试，

```
#container { float:right; margin-top: 0px; }

.lt-ie7 #container { margin-top: 5px; }

.lt-ie8 #container { margin-top: 10px; }

.lt-ie9 #container { margin-top: 15px; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:02:07.780

CSS 类名不匹配。例如，条件注释中的**lt-ie8**和样式表中的**ie8 。**

我用过的一个版本：

```
<!--[if lt IE 7 ]> <html class="no-js ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie ie8" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="no-js ie ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

结合 CSS 规则，例如：

```
.ie6 #container {...}
.ie7 #container {...}
.ie8 #container {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:02:52.740

我在那些名为“lt-ie7”、“lt-ie8”和“lt-ie9”的条件语句中看到类，但在你的 CSS 中，我看到你使用名为“ie6”、“ie7”和“ie8”的类，这是不同的。尝试：

```
#container { float:right; margin-top: 0px; }

.lt-ie7 #container { margin-top: 5px; }

.lt-ie8 #container { margin-top: 10px; }

.lt-ie9 #container { margin-top: 15px; } 
```

# git - 在 Ubuntu 上安装 GIT 服务器失败

> ID：10919483
> 
> 赞同：1
> 
> 时间：2012-06-06T17:53:16.187
> 
> 标签：git, ubuntu, ssh, gitolite

我正在尝试使用这些说明安装我自己的 git 服务器。

[http://cisight.com/how-to-setup-git-server-using-gitolite-in-ubuntu-11-10-oneiric/](http://cisight.com/how-to-setup-git-server-using-gitolite-in-ubuntu-11-10-oneiric/)

但我被困在这一点上。

```
git clone --verbose  gitolite@ec2-xxx.compute-1.amazonaws.com:testing.git
Cloning into 'testing'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我认为这与此有关：

```
gitolite@ip-xxxx:~$ gl-setup tmp/john.pub 

key_read: uudecode Aklkdfgkldkgldkgldkgfdlkgldkgdlfkgldkgldkgdlkgkfdnknbkdnbkdnbkdnbkfnbkdfnbkdnfbkdfnbdknbkdnbkfnbkdbnkdbnkdfnbkd john@example.com
 failed
fprint failed 
```

我总是失败，我认为它阻止我克隆 repo。repo 与 gitolite-admin.git repo 一起存在。权限是这样的：

```
drwxr-x--- 8 gitolite gitolite 4096 Jun  6 16:29 gitolite-admin.git
drwxr-x--- 7 gitolite gitolite 4096 Jun  6 16:29 testing.git 
```

所以我的问题是我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:47:44.053

[该线程](http://matthewbass.com/2008/05/21/key_readuudecode-failed-when-pulling-from-git/)报告：

> 凭直觉，我从已知主机中删除了我的 git repo 的 IP 地址。错误立即消失。
> 
> 如果您收到相同的消息，请确定您的 git 存储库的 IP 地址或域名。
> 在文件中搜索这些值`~/.ssh/known_hosts`并将其删除。你应该很好去追求。

可能是这样，或者您没有以某种方式正确生成您的 ssh 密钥。

```
ssh-keygen -t rsa -f "${HOME}/.ssh/gitoliteadm" -C "Gitolite Admin access (not interactive)" -q -P "" 
```

# ruby-on-rails - 如何从子类访问访问者的实例变量？

> ID：10919489
> 
> 赞同：1
> 
> 时间：2012-06-06T17:53:36.153
> 
> 标签：ruby-on-rails, attr-accessor

如何`attr_accessor`从子类访问实例变量？

```
class A
  attr_accessor :somevar
  @somevar = 123
  puts @somevar
end

class B < A
  def meth
    puts @somevar
  end
end

B.new.meth 
```

放`nil`...

PS 我可以使用 ActiveSupport。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:04:40.960

您需要在初始化方法中设置实例变量——每当创建新的类实例时都会调用它：

```
class A
  attr_accessor :somevar
  def initialize
    @somevar = 123
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:05:26.780

首先，您没有 A 的实例来分配值。在 A 上放置一个初始化方法，以便在创建 B 的实例时，可以将 somevar 值作为参数传递给新函数：

```
class A
  attr_accessor :somevar

  def initialize(somevar)
    @somevar = somevar
  end
end

class B < A
  def meth
    puts @somevar
  end
end

B.new('LOL').meth 
```

# mysql - MySQL 加入慢查询

> ID：10919491
> 
> 赞同：1
> 
> 时间：2012-06-06T17:53:53.223
> 
> 标签：mysql, performance, left-join

我有 2 个表 t1 -> t2（常见的一对多关系），表 t2 上有 140.000 条记录，t1 上有 50.000 条记录，有时外键为空（无父）。

```
CREATE TABLE `t1` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(50) NOT NULL,
PRIMARY KEY (`id`),
KEY `name_idx` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=125666 DEFAULT CHARSET=utf8

CREATE TABLE `t2` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(50) NOT NULL,
`t1_id` int(11) DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `t1_id_idx` (`t1_id`)
CONSTRAINT `t1_fk` FOREIGN KEY (`t1_id`) REFERENCES `t1` (`id`),
) ENGINE=InnoDB AUTO_INCREMENT=125666 DEFAULT CHARSET=utf8 
```

**此查询运行 15 秒：**

```
SELECT * FROM t2
LEFT JOIN t1 ON t2.t1_id = t1.id
ORDER BY t1.name ASC
LIMIT 10; 
```

**此查询运行时间为 0.5 秒：**

```
SELECT * FROM t2
LEFT JOIN t1 ON t2.t1_id = t1.id
WHERE t1.name <> 'any not found value'
ORDER BY t1.name ASC
LIMIT 10; 
```

**任何人都可以向我解释为什么会发生这种情况吗？**

观察：已编辑。

*消息：*

**此查询运行时间为 0.06 秒：（有什么变化？内连接！！）**

```
SELECT * FROM t2
INNER JOIN t1 ON t2.t1_id = t1.id
ORDER BY t1.name ASC
LIMIT 10; 
```

但上面的查询不是我的解决方案，在我的情况下 t2.t1_id 有时可能为空。

**任何想法？？**

*消息：*

使用左连接和内连接运行***解释：***

> mysql show：使用临时；使用文件排序；行数：140.000

使用内连接：

> mysql显示：使用Where；行数：8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:43:53.917

解决了！

问题出在 order by，当使用 order by mysql 创建一个临时文件（解释...**使用 Temporary**）时，这个临时文件太大导致滞后。

提示：

*   避免使用 Tempoaray
*   使用临时时不要加载太多数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:00:06.873

我怀疑你已经有一个索引，`t1.name`但它是下降而不是上升。这就解释了为什么第二个查询要快得多。

另一种解释是第一个查询没有缓存，但第二个查询在缓存中找到了数据并且运行得更快。

# r - R：将术语从列表重新分配到记录？

> ID：10919492
> 
> 赞同：2
> 
> 时间：2012-06-06T17:53:53.793
> 
> 标签：r, list, vector

我从数据列表的一列中提取了术语。现在这些术语在一个非结构化列表中（或者它是一个向量？不幸的是我不知道如何分辨。）。这就是现在开始的样子：

```
> data$C1  
 [1] "GERMANY"         "GERMANY"         "GERMANY"         "GERMANY"        "FRANCE"         "FRANCE"          "GERMANY"        "ITALY" 
```

为了进一步分析，我想将这些术语重新分配给我最初从中提取它们的数据列表的记录。在我的示例中，第一个记录包含三个术语，第二个两个，第三个和第四个两个，等等。所以这将是正确的输出：

```
> data$C1  
 [1] "GERMANY"        "GERMANY"         "GERMANY"  
 [2] "GERMANY"  
 [3] "FRANCE"         "FRANCE"  
 [4] "GERMANY"        "ITALY" 
```

这就是我如何计算每条记录中的术语数：

```
> count <- sapply(data$C1, length)  
> count  
 [1] 3 1 2 2 
```

这就是我可以观察到第八项属于第四条记录的方式，例如：

```
> number <- rep(1:length(count), count)  
> number  
 [1]   1   1   1   2   3   3   4   4  
> number[8]  
 [1] 4 
```

但是我怎样才能使用这些语句来实现所需的输出呢？再一次：我想将前三个术语分配给第一个记录，下一个术语（总体第四个）分配给第二个记录，接下来的两个（列表中的第 5 和第 6 个）分配给第三个记录，第七和八一到第四的记录等等。这怎么办？

非常感谢您！

**编辑：**
我将许多制表符分隔的文本文件导入到 R 中，这将它们变成了一个大数据列表。有 55 列（其中之一是 data$C1。），每个文本文件最多有 501 行（标题加上 500 条记录）。data$C1 包含地址字符串。我将它们拆分为单个地址并从中提取国家名称。为了更清楚地区分原始列和非结构化列表，我重命名了它们。

```
> data$C1 #original before extraction (each line is a new record)  
 [1] "UNIV POTSDAM,DEPT PHYS,D-14415 POTSDAM,GERMANY; UNIV OLDENBURG,DEPT CHEM,D-26111 OLDENBURG,GERMANY; TECH UNIV CAROLO WILHELMINA BRAUNSCHWEIG,INST ORGAN CHEM,D-38106 BRAUNSCHWEIG,GERMANY"  
 [2] "TECH UNIV BERLIN,FACHBEREICH MATH,D-10623 BERLIN,GERMANY"  
 [3] "UNIV GRENOBLE 1,F-38041 GRENOBLE,FRANCE; UNIV PARIS 06,PARIS,FRANCE"  
 [4] "UNIV AUGSBURG, FACHBEREICH PHYS, D-86135 AUGSBURG, GERMANY; JOINT RES CTR ISPRA, MARINE ENVIRONM UNIT, I-21020 ISPRA, ITALY"  
 ... 
```

这是提取的术语的当前输出：

> C1a
> [1] “德国” “德国” “德国” “德国” “法国” “法国” “德国” “意大利”
> ...

这将是我正在寻找的正确输出：

```
> C1a #extracted terms  
 [1] "GERMANY"        "GERMANY"         "GERMANY"  
 [2] "GERMANY"  
 [3] "FRANCE"         "FRANCE"  
 [4] "GERMANY"        "ITALY"  
 ... 
```

这八个元素只是数据列表开头/顶部的示例。它的四个记录包含八个提取的术语：

```
> tapply(C1a, number, c)  
 Error in tapply(data$C1, number, c) : all arguments must have the same length  
> length(number)  
 [1] 4  
> length(data$C1)  
 [1] 4  
> length(C1a)  
 [1] 8 
```

可以使用其他列之一来重新分配术语吗？它是 data$UT（唯一文章标识符），每条记录都有一个唯一的。值的示例是：

```
WOS:000300676300055  
WOS:A1995QQ99100006 
```

请问有人能帮我实现正确的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:10:05.817

我建议：

```
tapply(data$C1,number,c) 
```

获得的结果：

```
$`1`
[1] "GERMANY" "GERMANY" "GERMANY"

$`2`
[1] "GERMANY"

$`3`
[1] "FRANCE" "FRANCE"

$`4`
[1] "GERMANY" "ITALY" 
```

这会将 concatenate() 函数应用于具有共同值`c`的元素。结果是一个列表，所以使用双括号来引用它的元素（即[[1]]、[[2]]、[[3]]、[[4]]）。`data$C1``number`

希望这可以帮助 ：）

# c# - C# 控制台应用程序响应 HTTP POST 请求

> ID：10919493
> 
> 赞同：3
> 
> 时间：2012-06-06T17:54:02.077
> 
> 标签：c#, .net, http, sockets, post

是否可以在 C# 控制台应用程序中响应 HTTP POST 请求？如果是这样，怎么做？我认为它可能涉及使用套接字（我对此知之甚少）。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T17:57:28.167

您不需要使用套接字 - .NET 从 v2.0 开始就有一个 HTTP/1.1 服务器。

请参阅：[MSDN：HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:56:37.027

看看为此目的而开发的[ASP.Net Web API 。](http://www.asp.net/web-api)

> ASP.NET Web API 是一个框架，可让您轻松构建覆盖广泛客户端（包括浏览器和移动设备）的 HTTP 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:58:53.063

对你的问题的回答是肯定的，但前提是你创建了某种 HTTP 服务器来监听 HTTP 请求或使用开源服务器，例如：

[http://www.codeproject.com/Articles/137979/Simple-HTTP-Server-in-C](http://www.codeproject.com/Articles/137979/Simple-HTTP-Server-in-C) http://www.codeproject.com/Articles/25050/Embedded-NET-HTTP-Server [http://webserver。 codeplex.com/](http://webserver.codeplex.com/)

# mysql - 元表 VS 具有许多字段的表，规模很大。性能方面

> ID：10919494
> 
> 赞同：3
> 
> 时间：2012-06-06T17:54:09.427
> 
> 标签：mysql, sql, database-design, scalability, entity-attribute-value

这是一个具体的例子：

Wordpress 将用户信息（元）存储在名为 wp_usermeta 的表中，您可以在其中获取元键字段（例如：first_name）和元值（约翰）

但是，仅在 50 个左右的用户之后，该表已经打包了大约 1219 条记录。

所以，我的问题是：在大规模的性能方面，将所有元数据作为一个字段的表，还是像 WordPress 那样将所有元数据作为一行的表会更好吗？

在这两种情况下都正确设置了索引。几乎不需要添加新的元数据。请记住，像 wp_usermeta 这样的表必须使用文本/长文本字段类型（大尺寸）才能容纳可以输入的任何类型的数据。

我的假设是，只有当您不知道用户可能需要什么时，WordPress 方法才有效。否则：

*   检索所有元数据需要更多 I/O，因为这些字段没有存储在单行中。该字段未优化。
*   您不能真正在 meta_value 字段上建立索引而不会遭受重大缺点（索引 longtext ？除非它是部分索引......但是，多长时间？）
*   很快，你的数据库就会被很多行弄得乱七八糟，即使是最精确的元数据也会诅咒你的研究
*   没有对开发人员友好。您无法真正发出加入请求来获得所需的一切并正确显示。

不过，我可能会漏掉一点。我不是数据库工程师，我只知道 SQL 的基础知识。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T18:12:27.223

您在谈论实体-属性-值。

```
- Entity    = User, in your Wordpress Example  
- Attribute = 'First Name', 'Last Name', etc  
- Value     = 'John', 'Smith', etc 
```

这样的模式非常擅长允许任何给定实体的动态数量的属性。您无需更改架构即可添加属性。根据查询的不同，通常可以在根本不更改任何 SQL 的情况下使用新属性。

如果您知道要查找的实体和属性，那么检索这些属性值的速度也非常快。这只是一种花哨的键值对类型的设置。

但是，在您需要根据 Value 内容搜索记录的情况下，它并不是那么好。比如，`get me all users called 'John Smith'`。用英语问很简单。针对“正常”表进行编码很简单；`first_name = 'John' AND last_name = 'Smith'`. 但是用 SQL 编写对抗 EAV 并不简单，而且相对性能很差；*（获取所有的约翰，然后是所有的史密斯，然后将它们相交以获得匹配两者的实体。）*

网上关于EAV的说法很多，这里就不赘述了。但一般的经验法则是：如果你能避免它，你可能应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T20:18:37.300

GPL 领域中两个主要软件的示例将说明两种设计之间的巨大差异：

WordPress 和电子商务

两者都有自己的缺陷和优势，并且都在各自的领域中占据主导地位，并且已经完成了很多事情。但是它们之间的根本和最大的区别之一是它们的数据库表设计方法。当然，在比较它们时，它们的代码架构也会影响它们的搜索速度，但两者都受到自身缺点的阻碍和自身优势的提升，因此对于生产环境的比较或多或少是准确的。

Wordpress 使用 EAV。一般数据（称为具有不同帖子类型的帖子）作为主要实体存储，其他所有数据都存储在帖子元表中。一些基本数据存储在主表中，如修订、帖子类型等，但几乎所有其余数据都存储在元数据中。

非常适合添加、修改数据和功能。

但是尝试使用复杂的 SQL 连接进行搜索，该连接需要从元表中提取 3-4 个不同的值并获得结果集。它是一条铁狗。根据您要搜索的数据，搜索速度非常慢。

这就是为什么您看不到许多需要托管复杂数据的 wordpress 插件的原因之一，而实际这样做的插件往往会创建自己的表。

另一方面，oScommerce 将几乎所有与产品相关的数据保存在产品表中。大多数 oScommerce 模组都会修改此表并添加其字段。有 products_attribute 表，但是这也相当扁平，并且没有任何元设计。它只是通过产品 ID 链接到产品。

结果，尽管是很久以前的老式意大利面条代码，但即使您搜索复杂和组合的产品标准，oScommerce 也会提供惊人的快速搜索结果。实际上，大部分 oScommerce 的正常显示代码（就像它在产品详细信息页面中显示的那样）来自相当复杂的 SQL，它们通过复杂的连接语句从大约 2-3 个表中提取数据。即使只有一个连接，相对简单得多的 sql 也可以使 wordpress 与数据库一决高下。

因此，它的结论相当简单：EAV 非常适合轻松扩展和修改数据以实现扩展功能（即在 wordpress 中）。扁平的大单片表对于表示复杂记录的数据库要好得多，并且将在其上运行具有多个条件的复杂搜索。

它是一个应用问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:08:28.437

取决于平均打包到 wp_usermeta 中的名称数量。

文本字段搜索速度非常慢。索引通常更快。

但是一些数据仓库索引每个字段的废话，而 Wordpress 可能也在做同样的事情。

我会投票支持 meta 作为一个字段而不是一行。

好 SQL，晚安。麦克风

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-04T19:36:00.163

对于我所看到的 EAV 模型不会影响性能。除非您需要空值。在这种情况下，您应该与包含所有 type_meta 的表进行连接。

我不同意 Dems 的回答。

如果您想创建用户的全名，您不需要询问与该名称匹配的每个名称。

为此，您应该使用第 5 或第 6 NF。

或者您甚至可能有一个用户实体表，其中包含：

*   ID
*   用户名
*   密码
*   盐

你去吧。这是基础，对于所有用户“额外”数据，您应该有一个 user_meta 和 user_type_meta 实体。然后与用户。

# javascript - 如何告诉requirejs只加载当前页面所需的javascript

> ID：10919496
> 
> 赞同：1
> 
> 时间：2012-06-06T17:54:11.873
> 
> 标签：javascript, jquery, requirejs

我在 wordpress 插件中使用 requirejs。我正在尝试使用它，以便仅加载页面所需的 javascript。我的想法是有一个 main.js 文件来加载当前页面的 js，但我想知道如何告诉 main.js 加载什么文件。

```
require( 
    [ "pages/name-of-the-page" ], // How do i tell require that we are on page x?
    function( page ) { 
        page.start();
    }
); 
```

我在想用什么，也许我应该在服务器端设置一个cookie，读取它然后使用该数据？使用url参数猜测页面？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:16:26.303

只在你的页面中加载核心 JS 模块似乎更明智`main.js`（因为它将在每个页面上加载），然后为每个页面`require`只加载你需要的代码。

一种粗略的方法是在 wordpress 中检查当前加载的页面，然后在那里加载文件：

```
<?php if (is_page('Contact')): ?>
<script>
    require(['scripts/pages/contact.js']);
    // Note use of a plain js file, and not a module
</script>
<?php endif; ?> 
```

然后在*contact.js*

```
require(['some/contact/module'], function(contact) {
    // do cool stuff
}); 
```

我在这个答案中涵盖[了类似的情况，这](https://stackoverflow.com/questions/10815454/how-does-requirejs-work-with-multiple-pages-and-partial-views/10816983#10816983)也可能有所帮助。

# xorg - 在不打开显示的情况下使用 X 服务器

> ID：10919497
> 
> 赞同：0
> 
> 时间：2012-06-06T17:54:21.117
> 
> 标签：xorg

有没有办法在不调用 XOpenDisplay 的情况下连接和使用 X 服务器？例如，是否可以使用 X 渲染功能渲染到位图？所有交互都必须从 XOpenDisplay 开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:58:41.590

不，那是不可能的。要求 X 服务器为您做事必然需要与 X 服务器对话。

您可以使用 X 服务器创建虚拟 X 服务器（不连接视频或输入硬件，仅渲染到内存中）`Xvfb`。

# facebook - 获取特定 URL 和页面的 FB 点赞数

> ID：10919501
> 
> 赞同：7
> 
> 时间：2012-06-06T17:54:37.370
> 
> 标签：facebook, facebook-graph-api, facebook-like

这是一个二合一的问题。

1.  是否可以将喜欢计数到网站内的特定页面？就像有一个没有特定目标 URL 的点赞按钮一样，点赞将给予 ; 中的地址`window.location.href`。可以在没有 API 密钥的情况下检索此号码吗？

2.  如果我只有网站的 URL，是否可以获得官方 Facebook 页面/页面 ID？如果我只有 URL / 域名 (coca-cola.com)，我可以获得[https://www.facebook.com/cocacola](https://www.facebook.com/cocacola)的 Facebook 页面吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-06T18:48:20.450

您可以通过调用 Graph 来检查网站的点赞数，如下所示：

[https://graph.facebook.com/?ids=http://www.your-website.com/the-url-or-so](https://graph.facebook.com/?ids=http://www.your-website.com/the-url-or-so)

对于您的问题，如果您是企业的所有者，您是否可以获得 Facebook 页面：

是的！前段时间，我读过 Facebook 发布的一篇文章，其中对此进行了描述。如果您是公司/企业/品牌的所有者，您可以要求 facebook 将页面转移到您的帐户。为此，您必须是所有者，并且您的业务确实很大。当公司名称相同时，您必须选择更受欢迎的公司名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:04:49.037

> 是否可以将喜欢计数到网站内的特定页面？

如果该页面在 Open Graph 中，则可以。

> 如果我只有网站的 URL，是否可以获得官方 Facebook 页面/页面 ID？

不，因为没有这样的事情。没有人*有义务*为他们的业务、组织或其他任何东西建立一个 FB 粉丝页面。

# php - 如何在 Moodle 中手动创建用户？

> ID：10919504
> 
> 赞同：5
> 
> 时间：2012-06-06T17:54:51.177
> 
> 标签：php, authentication, login, moodle

我正在尝试创建一个身份验证插件，但是当用户在 moodle 数据库中不存在时我遇到了问题。因此，我试图找到一种手动创建用户的方法。

我试过了：

```
$user            = new StdClass();
$user->username  = $ucUser;
$user->auth      = 'ucauth';
$user->firstname = "First";
$user->lastname  = "Last";
$user->id        = $DB->insert_record('user', $user); 
```

但它没有用......我遇到了插入错误。我在`$user`对象中还需要什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T12:25:59.357

用户对象应具有以下值：

```
$user             = new StdClass();
$user->auth       = 'manual';
$user->confirmed  = 1;
$user->mnethostid = 1;
$user->email      = "email";
$user->username   = "username";
$user->password   = md5('password');
$user->lastname   = "lastname";
$user->firstname  = "firstname";
$user->id         = $DB->insert_record('user', $user); 
```

请试试这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:42:46.787

好吧，我建议你使用`authenticate_user_login($username, null)`它会给你一个空用户，你可以稍后在过程中完成。然后你可以使用`complete_user_login($user);`，如果你想将用户发送到编辑页面，比如

```
if (user_not_fully_set_up($USER)) {
            $urltogo = $CFG->wwwroot.'/user/edit.php';
        }else{
            $urltogo = $CFG->wwwroot.'/';
        }

    redirect($urltogo); 
```

我不知道你到底想达到什么目的。但是我制作了一个插件来连接外部网络服务，我花了一段时间才弄清楚如何正确地做到这一点。我可以为您提供任何您需要的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-04T10:35:18.337

手动创建用户时需要设置一些值。我面临同样的情况并最终得到了这个解决方案：

```
global $DB;    
$user             = new StdClass();
$user->email      = strtolower('someemail'); //MOODLE requires lowercase
$user->username   = strtolower('someusername');//MOODLE requires lowercase
$user->password   = hash_internal_user_password('somepassword');
$user->lastname   = 'somelastname';
$user->firstname  = 'somename';
// These values are required. 
// Default values are stored in moodle config files but... this is easier.
$user->auth       = 'manual';
$user->confirmed  = 1;
$user->mnethostid = 1;
$user->country    = 'ES'; //Or another country
$user->lang       = 'es'; //Or another country
$user->timecreated = time();
$user->maildisplay= 0;

$user->id = $DB->insert_record('user', $user); // returns new userid 
```

如果您愿意，您可以检索整个用户的数据：

```
$lastid = $DB->insert_record('user', $user);
$user2 = get_complete_user_data('id', $lastid); 
```

# java - 为什么我的 .jar 文件运行速度比 Eclipse 中的程序慢？

> ID：10919506
> 
> 赞同：10
> 
> 时间：2012-06-06T17:54:52.783
> 
> 标签：java, eclipse, performance, jar, executable-jar

我有一个 java 程序，它从数据库中读取大量输入数据，对其进行操作，然后将数据写回另一个数据库（在新的 windows 7 机器上使用 ODBC 驱动程序、excel 和 access 数据库）。该程序从 Eclipse 运行大约需要 17 分钟，但是当我创建一个可执行的 .jar 文件时，它需要额外的 10 分钟才能运行（总共 27 分钟）。

到目前为止，我发现慢 jar 文件（通过搜索 SO 和 google）的两个原因是它们被压缩并且写入命令提示符（或错误日志）比 eclipse 中的控制台花费更长的时间。我尝试创建一个未压缩的 jar 文件，它只加速了大约 10 秒（这可能是完全随机的，因为运行时间无论如何都会变化大约 30 秒）。我在程序中只有大约 10 个`System.out.println()`命令，所以不应该减慢它的速度。

关于是什么导致它运行得这么慢的任何想法，如果有什么办法可以再次加快它的速度？让我知道是否有任何其他可能相关的细节我应该包括在内。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-23T01:55:18.537

In my case, my application took 3 secs to run on eclipse while it took 2 mins when I run it from jar.
My mistake was to choose `"Package required libraries into jar"` while exporting my project into runnable jar.

I tried various ways to bring down the time but nothing helped, except..

If you have **other maven dependencies or jar files** in your project, you should use `"**Extract required libraries into generated jar**"` while exporting your project into a jar.

This solved my problem in seconds & now both my eclipse & jar file are taking same time to run the application, 2 secs.

Hope this helps the new strugglers.

Regards.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T18:12:42.930

使用[JAMon](http://jamonapi.sourceforge.net/)。它是一个监控库，可以帮助您测量代码的执行时间。

将一些监控代码添加到您的方法后，在 Eclipse 中以 JAR 文件的形式运行它，然后比较结果。这应该允许您缩小搜索范围。

另外：检查您是否正在使用 Eclipse 使用的相同 Java 版本运行您的 JAR 文件（例如，Java 1.4.x 可能比 1.6.x 慢得多）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-04T17:17:38.067

我有一个类似的问题。shell 的运行速度要慢几个数量级，并且与控制台输出无关。我尝试设置 JVM 内存值，但没有任何区别

解决方案是使用“可运行的 JAR 文件导出”向导中的“将所需的库复制到生成的 JAR 旁边的子文件夹中”选项将带有所有 JAR 的 ANT 文件打包到一个外部文件夹中。然后使用 -cp [YOURSUBFOLDER] 命令行选项运行主 JAR。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:44:52.000

您可以检查 Java VM 参数（如使用的 GC、最大内存等）。对于数据密集型应用程序，GC 可能会大大降低速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-01T16:16:20.367

是的，我有同样的问题。我已经实验并得到了解决方案！

只需在制作 jar 文件时选择***“将所需的库打包到 jar 中” 。***这个解决方案对我来说很好，希望这也适合你。

# android - 从 Handler 中更新 ProgressBar

> ID：10919508
> 
> 赞同：0
> 
> 时间：2012-06-06T17:55:00.857
> 
> 标签：android, android-widget

我有一个同步服务，我想要一个进度条，因为同步所有数据需要超过 1 分钟，而且我不想使用不确定的进度。我有一个用于同步功能的处理程序，并且正在引用并正确更新进度条的进度，但 UI 没有更新。

```
 Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                 //Sync calls
                     updateProgress(getContext());
                }
 };
 public static void updateProgress(Context c){
    layout = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    progress_view = layout.inflate(R.layout.sync_dialog, null);

    mProgressStatus += mProgressStep;
    mProgress = (ProgressBar) progress_view.findViewById(R.id.progress);

    mProgress.setProgress(mProgressStatus);
} 
```

我曾尝试使用 异步任务 类但没有成功。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:03:08.377

让这是我正确使用`Handler`.

```
Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            bar.incrementProgressBy(5);
            if (bar.getProgress() == 100) {
                bar.setProgress(0);
                Toast.makeText(ThreadsDemoActivity.this, "Progress is finished.", Toast.LENGTH_SHORT).show();
            }
        }
    }; 
```

然后你必须创建`Thread`（现在它只做一些模拟或工作）

```
@Override
    public void onStart() {
        super.onStart();
        bar.setProgress(0);
        Thread backgroundThread = new Thread(new Runnable() {
            public void run() {
                try {
                    for (int i = 0; i < 20 && isRunning; i++) {
                        Thread.sleep(300);
                        handler.sendMessage(handler.obtainMessage());
                    }
                }
                catch (Throwable t) {

                }
            }
        });
        isRunning = true;
        backgroundThread.start();
    }

public void onStop() {
        super.onStop();
        isRunning = false;
    } 
```

同样在`onCreate`方法中，您必须声明和初始化`progressBar`

```
bar = (ProgressBar) findViewById(R.id.progBar) 
```

所以这很好，但并非总是如此。更复杂的方法提供`AsyncTask`。这是一个非常复杂和强大的工具，当我向你推荐一些如此清晰的东西时`AnyncTask`。它是通用类型，并且有一个名为`doInBackground()`的方法，用于长时间任务并将您的任务转移到后台。有一条规则不能`UI`从后台线程更新。您不得不`AsyncTask`提供`onProgressUpdate()`用于更新的方法`UI`。但是，如果您愿意，可以看看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:58:50.180

您应该为此使用`Thread` **或** [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，并且只有处理程序更新进度条同时同步所有数据。

[请参阅此示例](http://samir-mangroliya.blogspot.in/p/android-asynctask-example.html)并将您的同步代码放入`doInBackground method`

# javascript - 当标记值与使用 JavaScript 的输入匹配时返回 XML 标记属性

> ID：10919518
> 
> 赞同：1
> 
> 时间：2012-06-06T17:55:40.997
> 
> 标签：javascript, xml, xml-parsing, google-gadget, xmldom

我正在使用如下所示的 XML 代码。我已经请求并检索了代码。我需要编写一个函数，它将：1）接收输入的代码 2）动态返回数据库中与 subnational1-code="US-MI" 和标签值“Kent”相对应的 subnational2-code

```
<result>
  <location country-code="US" subnational1-code="US-TX" subnational2-code="US-TX-263">Kent</location>
  <location country-code="US" subnational1-code="US-VA" subnational2-code="US-VA-127">New Kent</location>
  <location country-code="US" subnational1-code="US-DE" subnational2-code="US-DE-001">Kent</location>
  <location country-code="US" subnational1-code="US-KY" subnational2-code="US-KY-117">Kenton</location>
  <location country-code="US" subnational1-code="US-MD" subnational2-code="US-MD-029">Kent</location>
  <location country-code="US" subnational1-code="US-MI" subnational2-code="US-MI-081">Kent</location>
  <location country-code="US" subnational1-code="US-RI" subnational2-code="US-RI-003">Kent</location>
  <location country-code="CA" subnational1-code="CA-NB" subnational2-code="CA-NB-KE">Kent</location>
  <location country-code="CA" subnational1-code="CA-ON" subnational2-code="CA-ON-KT">Chatham-Kent</location>
  <location country-code="GB" subnational1-code="GB-ENG" subnational2-code="GB-ENG-KEN">Kent</location>
</result> 
```

[XML 代码 URL。](http://www.avianknowledge.net/ws1.0/ref/subnational2/find?match=kent&format=xml)

以下是我过去使用过的代码（getData 有效），或者正在尝试弄清楚。这不一定必须使用：

```
var subnational1-code="US-MI";
var subnational2-name="Kent";
var itemList = response.getElementsByTagName("result");
for(i=0;i<itemList.length){
  var d = getData(itemList.item(i));

  //  What code goes here??
  //  If (subnational2-value==subnational2-name&&subnational1-valuue=="US-MI");

}

function getData(n) {
  var d = new Object();
  var nodeList = n.childNodes;
  for (var j = 0; j < nodeList.length ; j++) {
  var node = nodeList.item(j);
  d[node.nodeName] = node.firstChild.nodeValue;
  } return d;
} 
```

这种情况下的输出应该是：

```
 var output = "US-MI-081"; 
```

我非常感谢您的帮助。对任何可以为我提供工作功能的人+1 和更多！提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:48:19.097

我会使用 XPath 来检索节点。

尝试使用 document.evaluate() 函数：

```
var xpathResult = document.evaluate("location[@subnational1-code='US-MI' and text() = 'Kent']/@subnational2-code", itemList, null, XPathResult.ANY_TYPE, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:15:56.150

不确定这是否完全是您要寻找的东西，但这是一种解析它的 JavaScript 方法。希望这对你有用。

```
var output = "";
var subnational1Code="US-MI";
var subnational2Name="Kent";
var itemList = document.getElementsByTagName("result");
for(var i = 0;i<itemList.length; i++){
  var d = getData(itemList.item(i));
  for(var k in d)
    if (d[k].sub1 === subnational1Code && d[k].value === subnational2Name)
      output = d[k].sub2;
}
function getData(n) {
  var objArray = new Array();
  var nodeList = n.childNodes;
  for (var j = 0; j < nodeList.length ; j++) {
  var node = nodeList.item(j);
  var o = new Object();
  o["value"] = node.firstChild.nodeValue;
  o["country"] = node.attributes["country-code"].nodeValue;
  o["sub1"] = node.attributes["subnational1-code"].nodeValue;
  o["sub2"] = node.attributes["subnational2-code"].nodeValue;
  objArray.push(o);
  } return objArray;
}

// console.log(output); //in case you wanted to debug it 
```

# c# - 如何在 .aspx 文件中显示“hello world”？

> ID：10919519
> 
> 赞同：3
> 
> 时间：2012-06-06T17:55:45.860
> 
> 标签：c#, asp.net

我有`Default.aspx`一个单独的代码文件：

```
public partial class _Default : System.Web.UI.Page
{
   protected void Page_Load(object sender, EventArgs e)
   {
       public string hello = "hello world"
   }
} 
```

我想在我尝试使用 <%=hello%> 但不起作用的默认页面中显示此内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:58:05.923

```
 protected void Page_Load(object sender, EventArgs e)
 {
   string hello = "i need more practice";
   Response.Write(hello);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T17:58:08.707

试试这个：

```
public partial class _Default : System.Web.UI.Page
{
    public string hello = "hello world";
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T17:58:04.240

也试试

页面

```
<%= this.hello%> 
```

.cs 代码隐藏文件

```
public partial class _Default : System.Web.UI.Page
{
    public string hello = "hello world";
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

* * *

只要写这个就可以完成任务

```
Response.Write("Hello World"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-06T17:59:02.570

您的代码不会按原样编译。试试这个：

```
public partial class _Default : System.Web.UI.Page
{
    public string Hello { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        Hello = "hello world";
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-06T18:01:00.817

请改用标签。您将能够轻松地格式化输出

```
 in your .aspx
 <body>
   <asp:Label runat="server" ID="HelloLabel"></asp:Label>
 </body>

//code behind
protected void Page_Load(object sender, EventArgs e)
{
  string hello = "i need more practice";
  HelloLabel.Text = "hello";
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-06T18:02:19.620

您需要将其实际写入标记。您可以通过创建标签（或文字）来做到这一点： `<asp:Label ID="helloLabel" runat="server" Text = "<%#HelloWorld()%> ></asp:Label>` 然后您将需要一个名为 HelloWorld 的函数，它返回一个字符串

```
private string HelloWorld()
{
    string hello = "Hello World";
    return hello;
} 
```

或者您可以直接从函数中设置标签文本。

`helloLabel.Text = "Hello World";`

# c# - System.Timers.Timer 需要回到“主”线程

> ID：10919527
> 
> 赞同：2
> 
> 时间：2012-06-06T17:56:08.397
> 
> 标签：c#, timer

我有一个具有 System.Timers.Timer 的类（称为“Foo”）（称为“myTimer”）。

Foo 包装非托管非线程安全代码。

在 myTimer.Elapsed 上，我需要使用 Foo 中的方法。

现在 myTimer 正在尝试在工作线程上使用 Foo 的方法，但这不起作用。

我需要回到包含 Foo 方法的线程。

我该如何做到这一点？仅供参考，Foo 的方法位于非 UI 线程中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:01:21.290

如果 Foo 不是 UI 线程，并且您需要调用代码以从不同的线程在其上执行，您将需要捕获执行 Foo 的同步上下文，然后从其上的计时器调用您的代码。

看一下[SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)类。您可以[发布](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)（异步）或[发送](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)要在特定的、先前捕获的同步上下文上执行的委托。

您可能还希望/需要查看[ExecutionContext](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.aspx)类。特别是：[ExecutionContext.Capture](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.capture.aspx)和[ExecutionContext.Run](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.run.aspx)

# ruby-on-rails - 在 Rails 中使用 Mongoapper 删除记录

> ID：10919528
> 
> 赞同：1
> 
> 时间：2012-06-06T17:56:19.220
> 
> 标签：ruby-on-rails, mongodb, mongomapper

我正在使用 Mongoapper 在 Rails 中享受非常棒的 MongoDB，但我在删除记录时遇到了问题。

删除记录以及删除整个文档的公认方式是什么？

我尝试使用 Stuff.destroy_all 但它似乎使 Web 服务器崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:22:50.733

对不起，这没有很好的记录。我正在为此打开一个问题。

请参阅[类方法](https://github.com/jnunemaker/mongomapper/blob/b965105ea203368234636df21c64f05358a467fb/lib/mongo_mapper/plugins/querying.rb#L43-57)和[实例方法](https://github.com/jnunemaker/mongomapper/blob/b965105ea203368234636df21c64f05358a467fb/lib/mongo_mapper/plugins/querying.rb#L137-143)。

```
my_doc.destroy    # fires callbacks
my_doc.delete     # no callbacks, just removes it from the database
MyDoc.destroy_all # fires callbacks, shouldn't crash...!
MyDoc.delete_all  # no callbacks
MyDoc.destroy("b965105ea203368234636df2", "368234636df21c64f05358a4")
MyDoc.delete("b965105ea203368234636df2", "368234636df21c64f05358a4") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:58:27.610

是的，我在 MongoMapper 中删除内容时曾多次跌跌撞撞。这种技术似乎也有效：

```
MessageLog.destroy_all(:created_at.gte => @start_time) 
```

我花了一段时间才弄清楚为什么`delete_all`比`destroy_all`:-p 快得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T01:44:27.983

并且`delete_all`还`destroy_all`可以用作 Plucky 方法，因此您可以执行以下操作：

```
MyDoc.where(status: 'unneeded').delete_all
MyDoc.where(status: 'unneeded').destroy_all 
```

取决于您是要避免回调 ( `delete_all`) 还是执行回调 ( `destroy_all`)。

# xml - 构建 SLN 的奇怪错误：CS0008 - CS0115

> ID：10919536
> 
> 赞同：0
> 
> 时间：2012-06-06T17:56:46.467
> 
> 标签：xml, compiler-errors, manifest, temporary-files

我有一个带有 4 个 C# 项目（其中一个是我的 mainProgram 表单）和一个 C++ DLL 项目的 SLN。

所以最近我遇到了这个烦人的问题，在 PC 重新启动后，当我尝试在 Debug 或 Release 模式下编译时，VC 会告诉我这个问题。我无法弄清楚它想从我这里得到什么。我删除了`%tmp%`重新安装的 .NET 4 中的所有内容，删除了 Debug、Release 文件夹。到目前为止没有任何效果。

> 错误 20 无法读取清单“Properties\app.manifest”。无法生成临时类（结果=1）。错误 CS0008：从文件“c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.XML.dll”读取元数据时出现意外错误——“没有足够的存储空间可用于完成此操作。

在配置管理器中修改后，我产生了另一条错误消息：

> 错误 25 无法读取清单“Properties\app.manifest”。无法生成临时类（结果=1）。错误 CS0115: Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializer1.CreateWriter()': o 找到合适的方法来覆盖

我以前从未见过这些错误消息，一切都很好，而且这个错误不知从何而来，我无法将它与我所做的任何事情联系起来，我不知道发生了什么。据我所知，在我的项目中唯一使用 XML 的地方是 NLog 日志记录项目，但是这个错误是新的，所以我认为它与它没有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:08:35.713

有趣的是，在删除临时文件夹中的所有内容并重新启动计算机后，问题似乎解决了。

# javascript - jQuery - 遍历所有带有类的元素并改变它们的样式

> ID：10919545
> 
> 赞同：1
> 
> 时间：2012-06-06T17:57:35.890
> 
> 标签：javascript, jquery

我知道这应该很简单，但我遇到了多个问题。首先，我不知道如何获取一个类的所有元素并更改它们的显示。我找到了`.each`这个示例代码的方法：

```
$('.classname').each(function(index) {
        alert(index);
}); 
```

我需要什么而不是警报来将元素的显示属性从“无”更改为“阻止”？

第二个问题是，类名是从隐藏字段中收集的。让我们命名这个变量`service`。当我尝试用 '.'+service 替换 '.classname' 时，我收到一条错误消息，提示“语法错误，无法识别的表达式：.”。

所以实际的代码是这样的：

```
var service=$('#service').val();
$('.'+service).each(function(index) {
        alert(index);
}); 
```

我确信这不会很复杂，但我无法弄清楚。

当然欢迎任何替代解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:59:54.217

签出[`.show`](http://api.jquery.com/show/)：

```
var service=$('#service').val();
$('.'+service).show(); // roughly equivalent to .css('display', 'block'); 
```

但是，正如 for 的文档`show`指出的那样，该方法将匹配的元素`display`属性返回到其先前的状态。要将`display`样式属性显式更改为`block`，请使用[`.css`](http://api.jquery.com/css)：

```
$('.' + service).css("display", "block"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:06:44.280

尝试淡入（）和淡出（）

```
var service=$("#service").val();
$("."+service).fadeIn(); 
```

# java - 通过 Eclipse 调试 Jline2 应用程序

> ID：10919546
> 
> 赞同：8
> 
> 时间：2012-06-06T17:57:39.077
> 
> 标签：java, console-application, jline

我正在使用 Jline2 框架在 Java 中构建控制台应用程序。在 Windows 7 上从 Eclipse 启动应用程序时，shell 立即存在，并且不等待用户输入命令。

对可能出什么问题有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T04:23:03.957

终于找到一个小技巧让它发挥作用。将以下 VM 选项添加到执行参数（运行配置/调试配置）

```
-Djline.terminal=jline.UnsupportedTerminal 
```

这将使代码在 Eclipse 中运行。但是，在运行过程中可能会向控制台写入一些奇怪的字符。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-29T13:13:43.767

如果您将[picocli 与 jline2 一起](https://github.com/remkop/picocli/tree/master/picocli-shell-jline2)使用。

您可以将启发式委托给 picocli，这似乎比 jline2 启发式更好（而不是使用`-Djline.terminal=jline.UnsupportedTerminal`）

代码看起来像：

```
// JLine 2 does not detect some terminal as not ANSI compatible, like Eclipse Console
// see : https://github.com/jline/jline2/issues/185
// So use picocli heuristic instead :
if (!Help.Ansi.AUTO.enabled() && //
          Configuration.getString(TerminalFactory.JLINE_TERMINAL, TerminalFactory.AUTO).toLowerCase()
                 .equals(TerminalFactory.AUTO)) {

     TerminalFactory.configure(TerminalFactory.NONE);
} 
```

（见[https://github.com/jline/jline2/issues/185](https://github.com/jline/jline2/issues/185)）

# jquery - 来自带有 jQ uery 的 YouTube API 的缩略图/网址的动态表

> ID：10919547
> 
> 赞同：1
> 
> 时间：2012-06-06T17:57:54.583
> 
> 标签：jquery, json, api, youtube, fancybox

我对 js 和 jQuery 很陌生，请原谅我的错误代码。尝试从关键字查询中动态生成格式化的 YouTube 缩略图/网址表。缩略图需要包含在带有 fancybox 类设置的标签中才能触发 fancybox 播放器。我将所有必要的“a”和“img”标签设置为 vars，只是尝试解析视频 ID 的 JSON 提要，将它们插入 url 和缩略图模板，然后生成一个表格，在之后开始新的拇指行每 9 个细胞。

这是我的代码。现在它只生成一列并不断重复相同的 ID 并在每次迭代时添加一个新的。非常感谢任何帮助！

```
<script type="text/javascript">

    var vidCell1 = '<a class="fancybox-media" href="https://www.youtube.com/watch?v=';
    var vidCell2 = '"><img src="http://i.ytimg.com/vi/';
    var vidCell3 = '/hqdefault.jpg" width="100" alt="" /></a>';
    var mytablebody = '<tbody><tr>';
    var ti;
    var id;

    $.getJSON("https://gdata.youtube.com/feeds/api/videos?q=mirthkon&v=2&alt=jsonc",function(youtubeJSON) {

        ti = youtubeJSON.data.totalItems;    
        for (var i=0; i<=ti; i++) {            
            id = youtubeJSON.data.items[i].id;
            mytablebody += "<td>" + vidCell1 + id + vidCell2 + id + vidCell3 + "</td>";
            mytablebody += "</tr></tbody>";
            $('.thumbs').append(mytablebody);
        };    
    });​
</script>
</head>
<body>
    <table class="thumbs" width="100" height="100" border="2" cellpadding="0" cellspacing="0"></table>​
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:03:13.763

你需要遍历你没有做的结果，这就是为什么你一遍又一遍地获得相同的 id。

```
$.getJSON("//URL", function(json) {
     $.each(json, function(key, val) {
         render(val);
     });
 }) 
```

这是一个如何做到这一点的例子。

[http://jsfiddle.net/jeremyspouken/XLWUC/](http://jsfiddle.net/jeremyspouken/XLWUC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:14:27.580

```
var tmpl = '<a class="fancybox-media" href="https://www.youtube.com/watch?v={{id}}"><img src="http://i.ytimg.com/vi/{{id}}/hqdefault.jpg" width="100" alt="" /></a>';
jQuery.getJSON("https://gdata.youtube.com/feeds/api/videos?q=mirthkon&v=2&alt=jsonc",function(json) {
   jQuery.each(json.data.items, function(i, item){
       jQuery(document.body).append(tmpl.replace(/{{id}}/g, item.id));
   });
}); 
```

这又快又脏，我使用 Chrome 检查器在这个 stackoverflow 页面上做到了。它只是将所有创建的 youtube 链接附加到文档中。为了进行优化，您应该在循环之前创建一个 div，将所有链接附加到循环中，然后在循环之后将该一个 div 附加到 DOM。此外，在测试这个时，它看起来像 Youtube 限制了 API 调用，所以你可以将它缓存在 localStorage 或其他东西中，这样你就不会在每次访问页面时对 youtube 进行大量调用。

另外两条评论：我为您创建了一个模板字符串，因此您不必每次都构建一个长字符串。编写和测试脚本时`console.log`是你的朋友。`console.log(youtubeJSON)`例如查看数据的样子。您也可以对您不了解其中传递给您的数据的函数执行此操作。在里面，`jQuery.each`您可以`console.log('args', arguments)`记录该方法每次传递给您的内容。

干杯。

# android - 在 Eclipse 中找不到 .classpath 文件，需要修复 jarlist.cache 错误

> ID：10919548
> 
> 赞同：0
> 
> 时间：2012-06-06T17:57:56.113
> 
> 标签：android, eclipse

我的控制台一直在抱怨找不到 bin/jarlist.cache。显然这是一个常见问题，可以通过编辑 .classpath 文件来解决......但是我似乎也找不到。它不在顶级目录中。

我一直在遵循此博客的说明：

[http://nu-art-software-development-tips.blogspot.com/2012/03/adt-17-update-build-issues.html](http://nu-art-software-development-tips.blogspot.com/2012/03/adt-17-update-build-issues.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:39:34.340

感谢 yorkw 和他的评论，这就是答案：

> `.classpath`默认是隐藏文件。如果实际项目是在 Eclipse 中创建/导入的，则始终位于根项目文件夹下。

# linux - 用sed更改文件中的字符串？

> ID：10919554
> 
> 赞同：3
> 
> 时间：2012-06-06T17:58:31.267
> 
> 标签：linux, sed, awk, gawk

我有一个带有模板的输入文件，如下所示。我想更改版本：使用 sed。

```
 Package: somename
    Priority: extra
    Section: checkinstall
    Maintainer: joe@example.com
    Architecture: i386
    Version: 3.1.0.2-1
    Depends:
    Provides: somename
    Description: some description 
```

目前我正在使用当前版本，`grep -m 1 Version inputfile | sed 's/[:_#a-zA-Z\s"]*//g'`并且正在尝试将当前版本替换为`sed 's/3.1.0.2-1/3.1.0.2/' inputfile`

但是，这似乎不起作用，但是当我使用 echo 在命令行中尝试它时，它起作用了。 `echo 'Version: 3.0.9.1' | sed 's/3.0.9.1/3.2.9.2/'`

```
Output: Version: 3.2.9.2 
```

任何有关我如何完成此任务的帮助将不胜感激。最好我想更改版本而不在文件中获取当前版本。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T19:48:36.703

你不需要grep。

```
sed -i '/Version/s/3\.1\.0\.2-1/3.1.0.2/' <files> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T18:39:31.190

您想使用“-i”开关切换到 sed 用于“编辑文件 [I]n 位置”。

请参阅 sed 手册页：[http ://unixhelp.ed.ac.uk/CGI/man-cgi?sed](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T18:26:53.793

这个名字的`sed`字面意思来自“Stream EDITor”——你看到的行为就是它的设计方式。当你说：

```
sed 'some commands' file 
```

它读取文件，执行命令并打印结果 - 它不会将其保存回文件（尽管某些版本`sed`有一些选项可以告诉它这样做）。你可能想要这样做：

```
sed 'some commands' file > newfile 
```

然后验证`newfile`是否正确，然后`mv newfile file`. 如果您绝对确定您的编辑脚本是正确的，并且您可以处理用错误数据覆盖文件的后果（如果不是），那么您可以考虑使用就地编辑标志，但通常保存起来更安全到一个临时文件，以便您可以测试/验证。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T18:06:12.940

你有一个错字，最后一个点应该是一个破折号，试试这个：

```
sed 's/3.1.0.2-1/3.1.0.2-2/' 
```

# c# - 为什么我在重新启动进程时不再收到 OutputDataReceived 事件？

> ID：10919557
> 
> 赞同：2
> 
> 时间：2012-06-06T17:58:35.283
> 
> 标签：c#, console-application

我有一个 ChildProcessMonitor 类，它启动我的进程，报告接收到的数据并在进程退出时重新启动进程。我的问题是，一旦进程退出并再次调用 Start ，就不再报告输出。

```
using System;
using System.Diagnostics;
using System.IO;
using System.Threading;

namespace WcfClient
{
    /// <summary>
    /// Can be used to launch and monitor (restart on crash) the child process.
    /// </summary>
    public class ChildProcessMonitor
    {
        private Process _process;

        /// <summary>
        /// Starts and monitors the child process.
        /// </summary>
        /// <param name="fullProcessPath">The full executable process path.</param>
        public void StartAndMonitor(string fullProcessPath)
        {
            StartAndMonitor(fullProcessPath, null);
        }

        /// <summary>
        /// Starts and monitors the child process.
        /// </summary>
        /// <param name="fullProcessPath">The full executable process path.</param>
        /// <param name="arguments">The process arguments.</param>
        public void StartAndMonitor(string fullProcessPath, string arguments)
        {
            ProcessStartInfo processStartInfo = new ProcessStartInfo
            {
                CreateNoWindow = true,
                FileName = fullProcessPath,
                WorkingDirectory = Path.GetDirectoryName(fullProcessPath) ?? string.Empty,
                UseShellExecute = false,
                RedirectStandardOutput = true,
                RedirectStandardError = true
            };

            processStartInfo.Arguments = arguments;             

            _process = new Process { StartInfo = processStartInfo, EnableRaisingEvents = true };
            _process.OutputDataReceived += OnOutputDataReceived;
            _process.ErrorDataReceived += OnErrorDataReceived;
            _process.Start();
            _process.BeginOutputReadLine();
            _process.BeginErrorReadLine();
            _process.Exited += OnProcessExited;
        }

        /// <summary>
        /// Called when process exits.
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
        private void OnProcessExited(object sender, EventArgs e)
        {
            if (_process != null)
            {
                Thread.Sleep(2000);                 
                _process.Start();                       
            }
        }

        /// <summary>
        /// The ErrorDataReceived event indicates that the associated process has written to its redirected StandardError stream.
        /// </summary>
        public DataReceivedEventHandler ErrorDataReceived;

        /// <summary>
        /// Called when error data received.
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="System.Diagnostics.DataReceivedEventArgs"/> instance containing the event data.</param>
        private void OnErrorDataReceived(object sender, DataReceivedEventArgs e)
        {
            Trace.WriteLine("Error data.");
            if (ErrorDataReceived != null)
            {
                ErrorDataReceived(sender, e);
            }
        }

        /// <summary>
        /// The OutputDataReceived event indicates that the associated Process has written to its redirected StandardOutput stream.
        /// </summary>
        public DataReceivedEventHandler OutputDataReceived;

        /// <summary>
        /// Called when output data received.
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="System.Diagnostics.DataReceivedEventArgs"/> instance containing the event data.</param>
        private void OnOutputDataReceived(object sender, DataReceivedEventArgs e)
        {
            Trace.WriteLine("Output data.");
            if (OutputDataReceived != null)
            {
                OutputDataReceived(sender, e);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:06:05.640

尝试使用：

```
private void OnProcessExited(object sender, EventArgs e)
{
  if (_process != null)
  {
    Thread.Sleep(2000);
    _process.CancelOutputRead();
    _process.CancelErrorRead();
    _process.Start();
    _process.BeginOutputReadLine();
    _process.BeginErrorReadLine();

  }
} 
```

**ps**

简短描述：OutputRead 和 ErrorRead 因进程重新启动而关闭。

来自反射的代码的详细描述：

```
public void BeginOutputRead()
{
  [..]
  if (this.output == null)
  {
    [..]                    
    this.output = new AsyncStreamReader(this, baseStream, new UserCallBack(this.OutputReadNotifyUser), this.standardOutput.CurrentEncoding);
  }
}

public void Start()
{   
    this.Close();
    [..]
}

public void Close()
{   
    [..]
    this.output = null;
    this.error = null;
    [..]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:26:37.703

**选项 1 - 无效**

我会尝试这个编辑。它将刷新对象上的事件处理程序。

```
private void OnProcessExited(object sender, EventArgs e)
        {
            if (_process != null)
            {
                Thread.Sleep(2000); 
                _process.OutputDataReceived -= OnOutputDataReceived;
                _process.ErrorDataReceived -= OnErrorDataReceived;
                _process.OutputDataReceived += OnOutputDataReceived;
                _process.ErrorDataReceived += OnErrorDataReceived;                
                _process.Start();                       
            }
        } 
```

**选项 2**

我的下一个想法是建议对设计稍作改动。将 ProcessStartInfo 存储在类中，然后当退出而不是在现有进程上调用 Start 时，将其释放并使用 ProcessStartInfo 对象创建一个新进程。

**选项 3**

在阅读了关于流程类的 MSDN 之后，我相信这个摘录解释了这个问题

> ErrorDataReceived 事件表明相关进程已写入其重定向的 StandardError 流。
> 
> 该事件仅在 StandardError 的异步读取操作期间发生。要启动异步读取操作，您必须重定向 Process 的 StandardError 流，**将您的事件处理程序添加到 ErrorDataReceived 事件，然后调用 BeginErrorReadLine**。此后，每次进程向重定向的 StandardError 流写入一行时，ErrorDataReceived 事件都会发出信号，直到进程退出或调用 CancelErrorRead。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.errordatareceived.aspx)

因此，您只需要在退出处理代码中执行此操作

```
 _process.Start();
    _process.BeginOutputReadLine();
    _process.BeginErrorReadLine(); 
```

# php - 将带有查询字符串的完整 url 发送到 mod_rewrite 中的文件

> ID：10919558
> 
> 赞同：1
> 
> 时间：2012-06-06T17:58:42.327
> 
> 标签：php, .htaccess, mod-rewrite

我想捕获来自我的域名的每个请求，并将该 url 重定向到一个 php 文件。在这个 PHP 文件中，我显示了一个表单，当用户传递表单时，我想将用户重定向到它最初请求的页面。

我有以下 mod_rewrite：

```
RewriteEngine on
RewriteCond %{HTTP_COOKIE} !(accepts_cookie) [NC]
RewriteRule ^(.*) test.php?link=.. [L] 
```

如您所见，我想将完整请求的 url 放在 link= 中，但我怎么能这样做呢？我尝试过类似的东西：REQUEST_URI，但这并没有给我完整的路径，包括查询字符串。

我希望有人能帮帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:04:57.223

尝试这个：

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /
Options +FollowSymLinks

RewriteCond %{HTTP_COOKIE} !(accepts_cookie) [NC]
RewriteRule ^(.*)$ test.php?link=%{REQUEST_URI}%{QUERY_STRING} [L]

</IfModule> 
```

您可以随时考虑[mod_rewrite 备忘单](http://www.addedbytes.com/cheat-sheets/mod_rewrite-cheat-sheet/)。

# python - 数据集操作的 Python 方法

> ID：10919564
> 
> 赞同：1
> 
> 时间：2012-06-06T17:58:58.477
> 
> 标签：python

伙计们，我们有以下问题：我们有几个包含表格数据的对象，看起来像这样：

`{'field1':'value1','field2':'value2', ...}`

在运行时的某个时刻，我们需要从这些对象（表）中“选择”数据，就像查询数据库一样（即获取该集合中匹配 field1 == some_value 和 field2==some_other_value 的记录）。我们无权访问原始 RDBMS 或 db 视图。我们摆弄了使用中间数据库（如 sqlite）然后根据需要查询数据的想法。

但是为了数据集查询的目的，在应用程序中添加另一个移动部分感觉很“臭”。所以，我的问题是：有没有一种pythonic方法来解决这个问题？我们是否应该硬着头皮将数据推送到数据库，查询数据库，然后删除？提前感谢您的意见和投入。

数据是字典列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:34:43.013

```
def one_of(alternatives):
    return lambda val: val in alternatives

def within(frm, to):
    return lambda val: frm <= val <= to

def gte(const):
    return lambda val: val >= const

def lte(const):
    return lambda val: val <= const

def exact(const):
    return lambda val: val == const

def select(data, **kwargs):
    for item in data:
        if all(chk(item[key]) for key, chk in kwargs.items()):
            yield item

data = [
    {'id': 1, 'name': 'Ann', 'age': 25},
    {'id': 2, 'name': 'Tom', 'age': 10},
    {'id': 3, 'name': 'John', 'age': 40},
    {'id': 4, 'name': 'Tom', 'age': 18},
]

for person in select(data, age=gte(15), id=within(3, 4), name=exact('Tom')):
    print person['name'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:03:43.213

如果您只需要几个简单的 type 查询`some_field == some_value`，则不需要数据库。假设您的数据是一个字典列表，您可以使用列表推导过滤数据：

```
[x for x in data if x["field1"] == some_value] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:13:57.587

假设您的数据对象在列表中，您可以使用[filter()](http://docs.python.org/library/functions.html#filter)。举个简单的例子：

```
filter(lambda x: x["fld1"] == "val1" and x["fld2"] == "val2", listOfObjects) 
```

这将返回一个列表，其中仅包含满足 lambda 函数中指定条件的那些对象。对于更复杂的查询，您可以创建自己的函数（只要它返回布尔值）。

# java - 如何从 Java 迭代器中随机访问数据

> ID：10919568
> 
> 赞同：1
> 
> 时间：2012-06-06T17:59:06.260
> 
> 标签：java, iterator

我从一个类中得到一个迭代器，我想得到那个迭代器的第 x 个元素。我知道我可以将它加载到循环中的 ArrayList 或检查计数器，但这似乎效率低下/丑陋。做这个的最好方式是什么？

我想像，

```
List al = new ArrayList(myIterator);
  myval = al.get(6); 
```

但是那个构造函数是未定义的。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T18:00:26.063

an 的定义`Iterator`不允许对某个位置进行任意索引。这就是它的定义方式。如果您需要该功能，则必须将数据加载到可索引的集合中。

接口的重点`Iterator`是允许在不知道集合大小的情况下对集合进行*顺序访问。*迭代器可以是只进的或双向的 ( `ListIterator`)。它只是访问集合元素的一种特定模型。一个优点是它与集合大小无关，它可能太大而无法完全放入内存。通过只允许顺序访问，实现可以在任何给定时刻自由地将集合的一部分保留在内存中。

如果您需要将迭代器内容加载到列表中，您需要自己使用循环来完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T18:03:21.840

不，你已经命名了唯一的方法。您最终将需要一个`for`循环来迭代到适当的位置。

一些实用程序库具有将an[的内容](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Lists.html#newArrayList%28java.util.Iterator%29)[加载`Iterator``ArrayList`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Lists.html#newArrayList%28java.util.Iterator%29)到 an或[获取an 的`n`第 th 元素的`Iterator`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterators.html#get%28java.util.Iterator,%20int%29)快捷方式，但 JDK 中没有内置任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T12:01:51.500

作为一种解决方法，我在我的实用程序类中有这个方法

```
 /**
     * Retrieve the n position object of iterator 
     * @param iterator
     * @param position
     * @return Object at position
     * @throws Exception 
     */
    public static Object iterateTo(Iterator iterator, int position) throws Exception{

        if(iterator == null){
            throw new Exception("iterator == null");
        }

        if(position < 0){
            throw new Exception("position < 0");
        }

        while(iterator.hasNext() && position > 0){
            position--;
            iterator.next();
        }

        if(position != 0){
            throw new Exception("position out of limit");
        }

        return iterator.next();

    } 
```

所以而不是这个

```
{
List al = new ArrayList(myIterator);
  myval = al.get(6);
} 
```

你不得不

```
{
Object myVal = Utilities.iterateTo(myIterator, 6);
} 
```

# python - 使用 pip 为特定 python 版本安装模块

> ID：10919569
> 
> 赞同：174
> 
> 时间：2012-06-06T17:59:06.683
> 
> 标签：python, pip

在 Ubuntu 10.04 上默认安装 Python 2.6，然后我安装了 Python 2.7。我如何使用它`pip install`来安装 Python 2.7 的软件包。

例如：

```
pip install beautifulsoup4 
```

默认为 Python 2.6 安装 BeautifulSoup

当我做：

```
import bs4 
```

在 Python 2.6 中它可以工作，但在 Python 2.7 中它说：

```
No module named bs4 
```

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2014-08-04T16:30:10.227

或者，由于`pip`它本身是用 python 编写的，你可以使用你想要安装包的 python 版本来调用它：

```
python2.7 -m pip install foo 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-06-06T18:13:31.433

`pip`针对要安装新包的 Python 实例使用安装版本。

在许多发行版中，可能有单独`python2.6-pip`的 和`python2.7-pip`包，使用二进制名称调用，例如`pip-2.6`和`pip-2.7`。如果您的发行版中没有为所需目标打包 pip，您可能会寻找 setuptools 或 easyinstall 包，或使用 virtualenv（在生成的环境中总是包含 pip）。

pip 的网站[包含安装说明](https://pip.pypa.io/en/stable/installing/)，如果您在发行版中找不到任何内容。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2016-04-08T11:53:20.683

您可以使用相应的 python 为特定的 python 版本*执行pip 模块：*

蟒蛇2.6：

```
python2.6 -m pip install beautifulsoup4 
```

蟒蛇 2.7

```
python2.7 -m pip install beautifulsoup4 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-05-16T10:35:33.540

在 Windows 中，您可以通过提及 python 版本来执行 pip 模块（您需要确保启动器在您的路径上）

```
py -2 -m pip install pyfora 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2016-10-03T03:48:12.197

您可以使用此语法

```
python_version -m pip install your_package 
```

例如。如果您正在运行 python3.5，则将其命名为“python3”，并希望安装 numpy 包

```
python3 -m pip install numpy 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2020-09-12T17:04:56.653

已经在 Windows 机器上尝试过，它可以工作

如果你想为 python 3.7 版安装 opencv，你可以这样做！

```
py -3.7 -m pip install opencv-python 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-02-11T00:24:58.647

或者，如果你想用特定版本的python安装特定版本的包，这就是方法

```
sudo python2.7 -m pip install pyudev=0.16 
```

如果“=”不起作用，请使用 ==

`x@ubuntuserv:~$ sudo python2.7 -m pip install pyudev=0.16`

无效要求：'pyudev=0.16' = 不是有效的运算符。你是说 == 吗？

`x@ubuntuserv:~$ sudo python2.7 -m pip install pyudev==0.16`

工作正常

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-04-15T07:49:24.940

如果您同时安装了 2.7 和 3.x 版本的 python，那么只需将 python 3.x 版本的 python exe 文件重命名为 -“python.exe”到“python3.exe”。现在您可以分别对两个版本使用 pip。如果您通常键入“pip install”，它将默认考虑 2.7 版本。如果你想在 3.x 版本上安装它，你需要调用命令为“python3 -m pip install”。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-02-24T06:03:43.687

蟒蛇2

```
sudo pip2 install johnbonjovi 
```

蟒蛇 3

```
sudo pip3 install johnbonjovi 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-17T17:00:33.320

对于 python2 使用：

```
py -2 -m pip install beautifulsoup4 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-01-07T13:21:24.480

**对于 Python 3**

```
sudo apt-get install python3-pip
sudo pip3 install beautifulsoup4 
```

**对于 Python 2**

```
sudo apt-get install python2-pip
sudo pip2 install beautifulsoup4 
```

> 在 Debian/Ubuntu 上， `pip`是安装 Python 2 软件包时使用`pip3`的命令，而是安装 Python 3 软件包时使用的命令。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-17T06:39:39.487

与任何其他 python 脚本一样，您可以指定要运行它的 python 安装。您可以将它放在您的 shell 配置文件中以保存别名。指的`$1`是您传递给脚本的第一个参数。

```
# PYTHON3 PIP INSTALL V2
alias pip_install3="python3 -m $(which pip) install $1" 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-02-21T05:11:09.490

我在另一个名为 Twisted 的包中遇到了类似的问题。我想为 Python 2.7 安装它，但它只为 Python 2.6（系统的默认版本）安装。

做一个简单的改变对我有用。

将 Python 2.7 的路径添加到`$PATH`变量时，将其附加到前面，如下所示：`PATH=/usr/local/bin:$PATH`，以便系统使用该版本。

如果您遇到更多问题，可以关注这篇对我有帮助的博文 - [https://github.com/h2oai/h2o-2/wiki/installing-python-2.7-on-centos-6.3.-follow-this-sequence -exactly-for-centos-machine-only](https://github.com/h2oai/h2o-2/wiki/installing-python-2.7-on-centos-6.3.-follow-this-sequence-exactly-for-centos-machine-only)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-21T12:22:20.570

我在 Windows 上通过[巧克力](https://chocolatey.org/)安装了 Python 2.7 ，并`pip2.7.exe`在`C:\tools\python2\Scripts`.

使用这个可执行文件而不是`pip`命令为我安装了正确的模块（`requests`对于 Python 2.7）。

# jquery - 带有 jquery 的 Onmouseover 在 IE8 上不起作用

> ID：10919571
> 
> 赞同：0
> 
> 时间：2012-06-06T17:59:12.887
> 
> 标签：jquery, internet-explorer-8

我是一个 js/jQuery 新手。我试图向 div 添加一些代码，以在鼠标悬停时更改其类。它在 FF、Chrome 和 IE9 中运行良好。但在 IE8 和 IE7 中，它不起作用。我究竟做错了什么？代码是：

```
<div class="calloutHover" onmouseover="$(this).attr('class', 'calloutHoverOver')" onmouseout="$(this).attr('class', 'calloutHover')" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:42:38.163

我认为答案在于 ie8 可能无法将 class 识别为 attr。所以使用

```
$(yourelement).addClass('yourclass') 
```

最好在 div 之后的某个地方执行此操作：

```
<script type="text/javascript">
$('#yourdivId').hover(function(){
  $(this).addClass('calloutHover');
}, function(){
  $(this).removeClass('calloutHover');
});
</script> 
```

它将所有代码与您的 HTML 分开，如果没有 id，那么您可以将一个类应用于您希望以这种方式表现的所有 div，并一次将行为应用于所有这些 div。

（使用第二种方法也意味着您依赖 jQuery 来正确处理 ie8 的独特行为。）

# python - 如何让 Twisted spawnProcess 生成的进程长时间运行？

> ID：10919572
> 
> 赞同：2
> 
> 时间：2012-06-06T17:59:22.677
> 
> 标签：python, twisted

我是 Twisted 的新手。我最近遇到了这个问题，希望得到一些帮助。据我了解，扭曲反应器作为单线程循环运行。当我生成另一个进程以从循环中获取输入时（稍后会将结果传递回循环），即使没有输入传递给它，该进程也会立即退出（参见下面的代码）。

此外，是否可以让一个衍生的进程长时间运行，而不是每次收到输入时都生成一个新进程？

感谢您的时间，

问

```
from sys import executable
from os import environ
import os
from twisted.internet import reactor
from twisted.internet.protocol import Protocol
from twisted.internet.protocol import Factory
from twisted.internet import protocol

implementation = """\
import os
print "in child", os.getpid()
"""

class Echo(Protocol):
    def dataReceived(self, data):
        reactor.spawnProcess(pp, executable, [executable, "-c", implementation], env=environ)
        self.transport.write(data)

class EchoFactory(Factory):
    def buildProtocol(self, addr):
        return Echo()

class MyPP(protocol.ProcessProtocol):

    def connectionMade(self):
        print "connectionMade!"
    def outReceived(self, data):
        print "out", data
    def errReceived(self, data):
        print "error", data
    def inConnectionLost(self):
        print "inConnectionLost! stdin is closed! (we probably did it)"
    def outConnectionLost(self):
        print "outConnectionLost! The child closed their stdout!"
    def errConnectionLost(self):
        print "errConnectionLost! The child closed their stderr."
    def processExited(self, reason):
        print "processExited, status %d" % (reason.value.exitCode,)
    def processEnded(self, reason):
        print "processEnded, status %d" % (reason.value.exitCode,)
        print "quitting"

reactor.listenTCP(8200, EchoFactory())
pp = MyPP()
print 'in parent', os.getpid()
reactor.spawnProcess(pp, executable, [executable, "-c", implementation], env=environ)
reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:09:26.010

Twisted 不控制子进程何时退出。子进程负责这件事（这里有一两个无关紧要的例外）。您的子进程，一个运行此代码的 Python 程序：

```
import os
print "in child", os.getpid() 
```

打印出自己的 PID 后将立即退出。无论您是使用 Twisted 还是其他方式启动它，这都是它的行为。如果您希望它等待输入，那么您必须将代码添加到程序中。

# drupal - 如何使用 facebook (read_friendlists) drupal 7 获取用户好友列表

> ID：10919573
> 
> 赞同：1
> 
> 时间：2012-06-06T17:59:30.020
> 
> 标签：drupal, facebook-graph-api, drupal-7

你好，

我正在使用drupal 7做一个网站，我通过FB手动注册我不想在drupal中使用任何可用的模块。

现在我想获取连接到我网站的用户的 fb 朋友列表，并获取他的朋友中的哪些人也连接到我的网站。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:04:39.783

```
$friends_list = file_get_contents('https://graph.facebook.com/me/friends?access_token=' . $atoken );
$friends_list_array  = json_decode($friends_list,true);
$arr= $friends_list_array['data'];
$friend_ids_arr = array();
foreach($arr as $friend) {
    $friend_ids_arr[] = $friend['id'];
}
$friend_ids = implode("," , $friend_ids_arr);
echo $friend_ids; // output: id1,id2,id3...etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:02:36.477

> 有什么建议么 ？

怎么样：阅读文档……？

用户的好友列表可以通过[/me/friends下的 Graph API 访问](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends)

# sencha-touch - 如何用逗号格式化数字？

> ID：10919575
> 
> 赞同：1
> 
> 时间：2012-06-06T17:59:34.537
> 
> 标签：sencha-touch, sencha-touch-2

在 Sencha Touch 2 中，如何格式化带有 0 或 2 位小数的逗号数字？我想有一种内置的方法可以做到这一点？

例如，我有 1234.567，我需要的数字是 1,234 和 1,234.57。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:09:14.397

您可以仅使用 JavaScript 轻松完成： **将逗号添加到数字**

```
function addCommas(nStr)
{
nStr += '';
x = nStr.split('.');
x1 = x[0];
x2 = x.length > 1 ? '.' + x[1] : '';
var rgx = /(\d+)(\d{3})/;
while (rgx.test(x1)) {
    x1 = x1.replace(rgx, '$1' + ',' + '$2');
}
return x1 + x2;
} 
```

**四舍五入到最接近的整数**

```
var result = Math.round(original) 
```

**四舍五入到小数点后两位**

```
var result = Math.round(original*100)/100 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T16:20:42.380

```
function iFormatValueTwoDecimals(inValue)
{
    var leftSide  = Math.floor(inValue);
    var rightSide = Math.round((inValue - leftSide)*100);

    if(rightSide === 0)
    {
        rightSide = '00';
    }
    else if(rightSide < 10)
    {
        rightSide = rightSide + '0';
    }

    return  leftSide+'.'+rightSide;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:09:04.833

看看 Ext JS 4 中的这个函数`Ext.util.Format`，它不是 Sencha Touch 2 API 的一部分。只需在您的应用程序中实现它即可。

[http://docs.sencha.com/ext-js/4-1/source/Format.html#Ext-util-Format-method-number](http://docs.sencha.com/ext-js/4-1/source/Format.html#Ext-util-Format-method-number)

# tsql - 显示在 WHERE 子句中找到的正确条件

> ID：10919577
> 
> 赞同：3
> 
> 时间：2012-06-06T17:59:41.343
> 
> 标签：tsql

我有两个具有相同列的表。如果发生更改，则将其记录下来，`table2`然后我进行比较`table1`并`table2`查看它们是否不同。如果它们不同，我断定发生了变化，我想在结果表中显示它。

例如：

```
SELECT t1.name, t1.age, t1.profession, column_changed, old_value, new_value
FROM   table1 t1, table2 t2
WHERE  t1.column1<>t2.column1 
    OR t1.column2<>t2.column2 
    OR t1.column3<>t2.column3 
```

当然，这个查询是不正确的。我想要`column_changed`, `old_value`,`new_value`显示相关值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:26:11.903

年龄、姓名、职业是否构成主键（或至少是唯一键？）：

如果是这样，您可以执行以下操作：

```
SELECT 
  t1.name, t1.age, t1.profession, 
  t1.column1 as t1column1, t2.column1 as t2column1, 
  t1.column2 as t1column2, t2.column2 as t2column2, 
FROM   
  table1 t1, table2 t2 
WHERE 
  (t1.name = t2.name and t1.age = t2.age and t1.profession = t2.profession) and
  (
   t1.column1<>t2.column1      
   OR t1.column2<>t2.column2     
   OR t1.column3<>t2.column3) 
```

当然，这需要两个表中相同的唯一键。此外，我清楚地更改了查询结果以显示所有列，而不仅仅是更改的列。在单个 T-SQL 查询中识别像这样更改的那个是尴尬的（但可能）所以我的建议是像这样返回它，并根据您的用例让应用程序/表示层处理查找更改的列或只是扫描肉眼可见。

如果你真的想用 T-SQL 来做，你可以用 UNIONS 来做，比如：

```
SELECT 
  t1.name, t1.age, t1.profession, 
  'column1' as ColumnChanged,
  t1.column1 as oldValue,
  t2.column1 as newValue
FROM   
  table1 t1, table2 t2 
WHERE 
  (t1.name = t2.name and t1.age = t2.age and t1.profession = t2.profession) and
   t1.column1<>t2.column1  
UNION ALL #better peformance than UNION, which would enforce uniqueness
SELECT 
  t1.name, t1.age, t1.profession, 
  'column2' as ColumnChanged,
  t1.column2 as oldValue,
  t2.column2 as newValue
FROM   
  table1 t1, table2 t2 
WHERE 
  (t1.name = t2.name and t1.age = t2.age and t1.profession = t2.profession) and
   t1.column2<>t2.column2 
....... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:07:54.303

尝试这个：

```
Select t1.name, t1.age, t1.profession,
    case when t1.column1 <> t2.column1 then 'column1 changed'
        when t1.column2 <> t2.column2 then 'column2 changed'
        -- and so on...
        end as [column_changed],
    case when t1.column1 <> t2.column1 then t1.column1
        when t1.column2 <> t2.column2 then t1.column2
        -- and so on...
        end as [old_value],
    case when t1.column1 <> t2.column1 then t2.column1
        when t1.column2 <> t2.column2 then t2.column2
        -- and so on...
        end as [new_value]
From table1 t1, table2 t2
Where t1.column1 <> t2.column1
Or t1.column2 <> t2.column2
Or t1.column3 <> t2.column3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T21:10:41.123

这是您的解决方案重写为单个 SELECT 语句（或者，如果您愿意，@ganders 的重写以支持同一行中的多个更改）：

```
SELECT
  x.column_changed,
  t1.column1 AS old_value,
  t2.column1 AS new_value
FROM table1 t1
  INNER JOIN table2 t2 ON t1.name = t2.name
  INNER JOIN (
    SELECT 'column1' UNION ALL
    SELECT 'column2' UNION ALL
    …
  ) x (column_changed) ON (
    x.column_changed = 'column1' AND t1.column1 <> t2.column1 OR
    x.column_changed = 'column2' AND t1.column2 <> t2.column2 OR
    …
  ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T17:45:20.957

经过进一步的头脑风暴后，我得出结论，ganders 解决方案只需稍加改进即可更好地工作。改进是一个while循环和一个计数变量。我们需要这样做，以防一次更改多列而不仅仅是一列。但是，它也会导致输出 NULL，因此您可以删除它们。这是修改后的查询：

```
WHILE @count<3
BEGIN
  Select t1.name, t1.age, t1.profession,     
    case when t1.column1 <> t2.column1 and @count = 1 then 'column1 changed'         
      when t1.column2 <> t2.column2 @count = 2 then 'column2 changed'         
      -- and so on...         
    end as [column_changed],     
    case when t1.column1 <> t2.column1 @count = 1 then t1.column1         
      when t1.column2 <> t2.column2 @count = 2 then t1.column2         
      -- and so on...         
    end as [old_value],     
    case when t1.column1 <> t2.column1 @count = 1 then t2.column1         
      when t1.column2 <> t2.column2 @count = 2 then t2.column2         
      -- and so on...         
    end as [new_value] 
  From table1 t1, table2 t2 
  Where t1.column1 <> t2.column1 Or t1.column2 <> t2.column2 Or t1.column3 <> t2.column3 
  SET @counter = @counter + 1
END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T18:26:54.867

我使用**name**列**在 t2.name = t1.name 上添加了一个连接 @T2 t2**到您的查询中。假设它可以用来链接两个表之间的记录。

 **```
select 
    t1.name, t1.age, t1.profession,
    column_change =
        case when t1.column1 <> t2.column1 then 'column1'
             when t1.column2 <> t2.column2 then 'column2'
             when t1.column3 <> t2.column3 then 'column3'
      end,
   old_value =
        case when t1.column1 <> t2.column1 then t1.column1
             when t1.column2 <> t2.column2 then t1.column2
             when t1.column3 <> t2.column3 then t1.column3
      end,
    new_value = 
        case when t1.column1 <> t2.column1 then t2.column1
             when t1.column2 <> t2.column2 then t2.column2
             when t1.column3 <> t2.column3 then t2.column3
        end
from @T1 t1
    join @T2 t2 on t2.name = t1.name
where 
    (t1.column1 <> t2.column1
    or t1.column2 <> t2.column2
    or t1.column3 <> t2.column3) 
```**

# android - 为什么我的进度条没有垂直居中？

> ID：10919580
> 
> 赞同：6
> 
> 时间：2012-06-06T17:59:50.757
> 
> 标签：android, layout, view, alignment

我有以下布局...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:background="@drawable/bg_generic_portrait">
  <ListView android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/issue_list_item_background_normal"
            android:listSelector="@drawable/issue_background_selector"
            android:divider="@drawable/separator"
    >
  </ListView>
  <ProgressBar
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:id="@+id/preloader"
    style="@android:style/Widget.ProgressBar.Large"/>

  <TextView android:id="@android:id/empty"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FF0000"/>
</LinearLayout> 
```

它看起来像这样...... http://i.stack.imgur.com/Ra5c6.png

**我也想让预加载器垂直居中，怎么了？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T18:33:20.160

不知何故，layout_gravity 不能很好地工作。您需要做的是将 progress_bar 嵌套在 linear_layout 中，并将该布局的重力设置为中心，如下所示：

```
<LinearLayout android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:gravity="center">
<ProgressBar
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:id="@+id/preloader"
          style="@android:style/Widget.ProgressBar.Large"/>
</LinearLayout> 
```

我不建议将重力设置为最顶部的线性布局，因为如果您更改列表或添加某些内容，可能会发生有趣的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:41:51.113

您正在尝试做的事情似乎有些问题。布局中进度条顶部的 ListView 可以根据其内容具有可变高度。因此，使用线性布局无法确保进度条保持在屏幕中心。

您可能希望查看[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html) 类，该类将在您将数据加载到后台列表中时显示进度对话框。

或者，您可以使用 RelativeLayout 作为顶级布局并`android:layout_centerInParent="true"`为 ProgressBar 指定属性，从而使 ProgressBar 和 ListView 重叠

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:16:35.243

那是因为您使用的是 a `LinearLayout`，我建议您使用 a`RelativeLayout` 并让属性中心`layout_centerVertical`像这样使用：

```
<ProgressBar
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_centerVertical="true"
    android:id="@+id/preloader"
    style="@android:style/Widget.ProgressBar.Large"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:18:33.507

`android:gravity="center"`在您的父 LinearLayout 中设置。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:gravity="center"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T18:16:55.090

我不知道你占用了多少空间，但如果你想真正定义你想要的项目`Listview`，你可能想使用 a`<RelativeLayout>`而不是。`<LinearLayout>``x`

# java - 无法从上下文将请求字符编码设置为 UTF-8

> ID：10919584
> 
> 赞同：6
> 
> 时间：2012-06-06T17:59:58.053
> 
> 标签：java, jsf, jsf-2, primefaces

我正在尝试将 Primefaces 中的示例实现到 WAB 包中。

```
 <?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:p="http://primefaces.org/ui"  >
        <h:head>
            <ui:insert name="header">           
                <ui:include src="header.xhtml"/>         
            </ui:insert>
        </h:head>
        <h:body>

            <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
            <!-- layer for black background of the buttons -->
            <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
                <!-- Include page Navigation -->
                <ui:insert name="Navigation">           
                    <ui:include src="Navigation.xhtml"/>         
                </ui:insert>

            </div>  

            <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
                <h:graphicImage alt="Demo edit form"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_linuxz.png" />
            </div>
            <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

                <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                    <div id="settingsHashMap" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">
                        <h:form id="test">

                            <p:barChart id="basic" value="#{LinuxController.categoryModel}" legendPosition="ne"
                                        title="Basic Bar Chart" min="0" max="200" style="height:300px"/>

                            <p:barChart id="horizontal" value="#{LinuxController.categoryModel}" legendPosition="se" style="height:300px"
                                        title="Horizontal Bar Chart" orientation="horizontal" min="0" max="200"/>

                            <p:barChart id="stacked" value="#{LinuxController.categoryModel}" legendPosition="ne" style="height:300px"
                                        title="Stacked Bar Chart" stacked="true" barMargin="50" min="0" max="300"/>

                        </h:form>

                    </div>   

                </div>  
            </div>

        </h:body>
    </html>

import org.glassfish.osgicdi.OSGiService;
import org.primefaces.model.chart.CartesianChartModel;
import org.primefaces.model.chart.ChartSeries;

// Update form example
@Named("LinuxController")
@SessionScoped
public class Linux implements Serializable {

    private CartesianChartModel categoryModel;

    public Linux() {
        createCategoryModel();

    }

    public CartesianChartModel getCategoryModel() {
        return categoryModel;
    }

    private void createCategoryModel() {
        categoryModel = new CartesianChartModel();

        ChartSeries boys = new ChartSeries();
        boys.setLabel("Boys");

        boys.set("2004", 120);
        boys.set("2005", 100);
        boys.set("2006", 44);
        boys.set("2007", 150);
        boys.set("2008", 25);

        ChartSeries girls = new ChartSeries();
        girls.setLabel("Girls");

        girls.set("2004", 52);
        girls.set("2005", 60);
        girls.set("2006", 110);
        girls.set("2007", 135);
        girls.set("2008", 120);

        categoryModel.addSeries(boys);
        categoryModel.addSeries(girls);
    }
} 
```

当我尝试访问 JSF 页面时，该页面为空。我在 Glassfish 日志文件中收到此错误：

```
[#|2012-06-06T20:53:47.931+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=321;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:53:48.880+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=323;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:53:52.714+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=321;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:53:56.434+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=324;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:53:57.591+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=322;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:54:25.828+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=323;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:54:26.912+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=321;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-06-06T20:54:28.010+0300|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=324;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context /test, because request parameters have already been read, or ServletRequest.getReader() has already been called|#] 
```

我该如何解决这个问题？我想这可能是由 POM 配置引起的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-06T18:12:43.520

JSF/Facelets 默认使用 UTF-8，它在恢复视图期间设置，但是 PrimeFaces ajax 视图处理程序尝试在视图恢复之前访问请求参数，因此将使用服务器的默认字符编码，它是 ISO- 8859-1。`<glassfish-web-app>`您需要将以下条目添加到`/WEB-INF/glassfish-web.xml`文件中，以指示 Glassfish 服务器也使用 UTF-8：

```
<parameter-encoding default-charset="UTF-8"/> 
```

### 也可以看看：

*   [通过 PrimeFaces 输入组件检索到的 Unicode 输入已损坏](https://stackoverflow.com/questions/9634230/typing-chinese-with-primefaces-editor-component)

# mysql - 使用 perl 和 mysql 日期格式提取星期几

> ID：10919585
> 
> 赞同：1
> 
> 时间：2012-06-06T17:59:58.840
> 
> 标签：mysql, perl, datetime

我正在循环一系列连续的日期。我需要找出哪些是周末，以便将它们丢弃。一种方法是通过 perl（我的脚本是用什么编写的）来确定星期几，或者在每次通过循环时进行查询。要检查的日期永远不会超过 30 个，通常是 5 个或更少。加载 Date::Time 并使用 perl 或在不需要模块的情况下运行 Query 会更有效吗？如果 perl 是最好的方法，我可以帮助从 YYYY-MM-DD 格式中提取星期几。我可以使用 1-7 号或短名称 mon-sun。

```
2012-05-01
2012-05-02
2012-05-03
2012-05-04
2012-05-05
2012-05-06 
```

不确定这是否可能，但也许更合适的解决方案是编写一个查询（因为我知道开始和结束并且它们是连续的）来计算 x 和 y 之间的天数，其中 dayofweek NOT IN(6,7)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:15:21.710

请参阅[DateTime::Format::Strptime](http://p3rl.org/DateTime%3a%3aFormat%3a%3aStrptime)和[DateTime](http://p3rl.org/DateTime)。

```
use 5.010;
use strictures;
use DateTime::Format::Strptime qw();
my $parser = DateTime::Format::Strptime->new(pattern => '%F');
for my $date (qw(
    2012-05-01
    2012-05-02
    2012-05-03
    2012-05-04
    2012-05-05
    2012-05-06
)) {
    my $dow = $parser->parse_datetime($date)->day_of_week;
    say "$date is a weekend day" if 6 == $dow or 7 == $dow;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:15:38.760

MySQL 有一个[星期函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_dayofweek)，你可以直接使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:25:13.470

最明显的解决方案是使用该[`Time::Piece`](https://metacpan.org/module/Time%3a%3aPiece)模块，它自 v5.9 以来一直是 Perl 的核心模块，因此可能不需要在您的系统上安装。

该`wday`方法返回一周中的数字日期，其中 1 == 星期日，因此对于周末，您正在寻找 7（星期六）或 1 的值。这可以进行调整，以便星期六由零（而星期日由 1）表示写作

```
my $dow = $tp->wday % 7; 
```

之后就是一个周末的测试`$dow < 2`。

这里有一些代码来演示。

```
use strict;
use warnings;

use Time::Piece;

while (<DATA>) {
  chomp;
  my $tp = Time::Piece->strptime($_, '%Y-%m-%d');
  my $dow = $tp->wday % 7;
  print $_;
  print " (weekend)" if $dow < 2;
  print "\n";
}

__DATA__
2012-05-01
2012-05-02
2012-05-03
2012-05-04
2012-05-05
2012-05-06 
```

**输出**

```
2012-05-01
2012-05-02
2012-05-03
2012-05-04
2012-05-05 (weekend)
2012-05-06 (weekend) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T19:42:36.477

您可以使用核心[Time::Local](http://perldoc.perl.org/Time/Local.html)模块，然后使用[`localtime`](http://perldoc.perl.org/functions/localtime.html). 工作日 0 对应于星期日，6 对应于星期六。

```
#! /usr/bin/env perl

use strict;
use warnings;

use Time::Local;

my @dates = qw(
  2012-05-01
  2012-05-02
  2012-05-03
  2012-05-04
  2012-05-05
  2012-05-06
);

my @days = qw/ Sun Mon Tue Wed Thu Fri Sat /;

foreach my $date (@dates) {
  my($yyyy,$mm,$dd) = split /-/, $date;
  my $time_t = timelocal 0, 0, 0, $dd, $mm-1, $yyyy-1900;
  my $wday = (localtime $time_t)[6];
  my $weekend = ($wday == 0 || $wday == 6) ? " *" : "";

  print "$date: $days[$wday] ($wday)$weekend\n";
} 
```

输出：

```
2012-05-01：周二（2）
2012-05-02: 星期三 (3)
2012-05-03：周四（4）
2012-05-04：周五（5）
2012-05-05: 星期六 (6) *
2012-05-06: 太阳 (0) *
```

为了好玩，您可以使用 Swiss Army Chainsaw 并抓取*cal*实用程序的输出。

```
#! /usr/bin/env perl

use strict;
use warnings;

use 5.10.0;  # for smart matching

sub weekday_type {
  my($date) = @_;
  die "$0: unexpected date '$date'"
    unless my($yyyy,$mm,$dd) =
             $date =~ /^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})$/;

  my $calendar = `cal -m $mm $yyyy`;
  die "$0: cal -m $mm $yyyy failed" if $?;

  for (split /\n/, $calendar) {
    if (/^ \s* [0-9]{1,2} (?: \s+ [0-9]{1,2})* \s*$/x) {
      my @dates = split;
      my @weekend = splice @dates, @dates > 1 ? -2 : -1;
      return "weekend" if ($dd+0) ~~ @weekend;
    }
  }

  "weekday";
} 
```

像这样使用它

```
my @dates = qw(
  2012-05-01
  2012-05-02
  2012-05-03
  2012-05-04
  2012-05-05
  2012-05-06
);

my @days = qw/ Sun Mon Tue Wed Thu Fri Sat /;

foreach my $date (@dates) {
  my $type = weekday_type $date;
  print "$date: $type\n";
} 
```

输出：

```
2012-05-01：平日
2012-05-02：工作日
2012-05-03：平日
2012-05-04：平日
2012-05-05：周末
2012-05-06：周末
```

我不建议在生产中这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T19:51:28.607

```
use Date::Simple qw/date/;
use Date::Range;

my ( $start, $end ) = ( date('2012-05-02'), date('2012-05-16') );
my $range = Date::Range->new( $start, $end );
my @all_dates = $range->dates;

foreach my $d (@all_dates) {
  my $date  = Date::Simple->new($d);
  print $date->day_of_week." ".$d."<br />";
  }

#--OUTPUT--#

3 2012-05-02
4 2012-05-03
5 2012-05-04
6 2012-05-05
0 2012-05-06
1 2012-05-07
2 2012-05-08
3 2012-05-09
4 2012-05-10
5 2012-05-11
6 2012-05-12
0 2012-05-13
1 2012-05-14
2 2012-05-15
3 2012-05-16 
```

# unit-testing - ASP .NET Web API 控制器测试

> ID：10919588
> 
> 赞同：5
> 
> 时间：2012-06-06T18:00:08.367
> 
> 标签：unit-testing, asp.net-web-api

我想对一些控制器操作进行单元测试，并最终测试验证属性和操作响应过滤器是否正常运行。使用 mvccontrib 在 ASP .NET MVC 中做这种事情很容易；然而，使用 Web API，模拟 HttpContext 似乎有点不同。

如何为 Web API 控制器模拟 HttpContext 以便我可以测试模型绑定等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:54:53.847

您不应该在 Web API 中需要 HttpContext。您需要的一切都应该在 HttpRequestMessage 及其属性集合中。

# colors - 在灰度图像中查找两种颜色之间的距离

> ID：10919592
> 
> 赞同：0
> 
> 时间：2012-06-06T18:00:29.277
> 
> 标签：colors, distance, grayscale

我知道很多方法可以找到两种颜色之间的距离 - 欧几里得或其他，在任何颜色空间 - RGB，HSV或其他，但我现在遇到一个更简单的问题，在灰度图像中找到两种颜色之间的距离和我不知道如何面对它。

假设我们有两个具有两种不同灰度的像素，a = 122 和 b = 201。

你如何定义距离？是79吗？或者使用欧几里得距离，例如，知道 Ra = 122 Ga = 122 Ba = 122 并且对于 Rb = 201、Gb = 201、Bb = 201 相同，这给出了约 136 的欧几里得距离。

我已经用大量示例计算了这两种不同的方法，结果非常不同，我不确定选择哪种方法。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:04:36.340

> “通用定义在与设备无关的色彩空间中使用欧几里得距离”

取自维基百科：[色差](http://en.wikipedia.org/wiki/Color_difference)

即使在灰度 R = G = B 中，一个像素仍然具有所有三个值。我会坚持欧几里得距离，这似乎是惯例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:11:36.703

我对这个主题了解不多，但我认为这取决于你想要达到的目标。假设您正在处理地理数据，并且您需要选择两点之间的距离函数。如果这两个点在一个城市中，您可以选择曼哈顿范数，并且您认为该距离比 2 范数（欧几里得）更好地近似于一个人需要步行的距离或其他...

但是，鉴于灰度颜色是一维的，我认为距离函数也应该是一维的。它不需要是`|a - b|`，但我认为它应该只考虑每种颜色的一个*参数*（组件，尺寸）。

# webbrowser-control - C# webbrowser 控件：页面打开新窗口但它不起作用

> ID：10919595
> 
> 赞同：1
> 
> 时间：2012-06-06T18:00:44.467
> 
> 标签：webbrowser-control, new-window

我使用 webbrowser 控件（在 C# - Visual Studio 和 .NET 的最新版本中）允许我读取和写入数据到特定网页。一切正常，直到页面尝试在新窗口中打开 pdf 文档（该页面包含 javascript 代码）。新窗口在我的 IE 上打开 OK。但是当 webbrowser 控件打开新窗口时什么都没有出现...我尝试将 firefox 设置为我的默认浏览器，看看它是否有任何区别，但没有任何好处。webbrowser 控件仍然打开 IE。我已经尝试捕捉新窗口的事件并将 url 引用到另一个 webbrowser 控件......再次没有成功！我怎样才能得到pdf文件？为什么新窗口会打开但不显示pdf？

# php - PHP：类相互使用

> ID：10919605
> 
> 赞同：4
> 
> 时间：2012-06-06T18:01:39.410
> 
> 标签：php

我有父类 Color 和子类 ColorRGBA 和 ColorHSLA。在 Color 类中，我想使用这些子项的静态函数，但出现错误“找不到 Class 'Color'”。这是同样的问题[http://forums.codeguru.com/showthread.php?t=469995](http://forums.codeguru.com/showthread.php?t=469995)但`class Color;`似乎在 PHP 中不起作用。

颜色.php：

```
include_once 'ColorRGBA.php';
include_once 'ColorHSLA.php';

class Color{
    public static function isValid(&$tokens, $i) {
        return ColorRGBA::isValid($tokens, $i) || ColorHSLA::isValid($tokens, $i);
    }
} 
```

ColorHLSA.php 和类似的 ColorRGBA.php

```
include_once 'Color.php';

class ColorRGBA extends Color {
    public static function isValid(&$t, &$i) {
        ...
    }
} 
```

我应该如何重建我的类层次结构或包含指令？或者还有其他选择如何使我的代码工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:10:48.897

是的，在 PHP 中没有像 C++ 中的“前向声明”。这就是为什么`class Color;`在 PHP 中无效。

现在你为什么得到`"Class 'Color' not found."`？问题是，这条线

```
class ColorRGBA extends Color 
```

在该行之前执行：

```
class Color { 
```

所以`Color`确实没有定义。要解决此问题，您可以执行以下操作：

```
class Color{
    public static function isValid(&$tokens, $i) {
        include_once 'ColorRGBA.php';
        include_once 'ColorHSLA.php';
        return ColorRGBA::isValid($tokens, $i) || ColorHSLA::isValid($tokens, $i);
    }
} 
```

这是有效的，因为`Color`该类现在已完全定义，并且`ColorRGBA`/`ColorHSLA`类仅在`isValid`被调用时才定义。

您也可以放在类`include_once`的定义之后`Color`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:07:41.120

您不能在 Color.php 中包含 ColorRGBA.php，在 ColorRGBA.php 中包含 Color.php。你会得到循环依赖。这就是为什么你得到类未找到错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:16:45.677

为了解决这类问题，也许你应该考虑实现一个[工厂类](https://en.wikipedia.org/wiki/Factory_method_pattern#PHP)。如果这不是您的风格，那么解决此问题的另一种优雅方法是使用[__autoload()](http://www.php.net/manual/en/language.oop5.autoload.php)。

至于代码的维护。根据您介绍的颜色数量，这将很困难。为什么不尝试类似的东西：

```
class Color{
    public static function isValid($type, &$tokens, $i){
        $class_name = 'Color'.$type;            
        if (!class_exists($class_name)) {
            throw new Exception('Missing '.$class_name.' class.');
        }

        $class_name::isValid(&$tokens, $i);
    }
} 
```

*PHP 3.5+*

# java - 设置微调器选择不起作用

> ID：10919610
> 
> 赞同：2
> 
> 时间：2012-06-06T18:01:53.833
> 
> 标签：java, android, android-xml, android-spinner

我正在尝试使用 setSelection 设置微调器，以显示特定选项，如下所示：

```
Spinner gender;
gender = (Spinner) findViewById(R.id.spinner_edit_gender);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.gender_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    gender.setAdapter(adapter);
    if (strGender.equals("male"))
        gender.setSelection(0,true);
    else
        gender.setSelection(1,true); 
```

它总是设置微调器的第一个选项而不是我想要的

任何人都知道为什么并且可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:44:35.840

有两件事要尝试：

1.) 我将在这里暗中尝试，并建议您尝试在其 XML 中定义微调器的选项。这就是我在我`setSelection()`成功使用的应用程序之一中的内容。

```
<Spinner android:id="@+id/spinner_edit_gender"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"                
    android:prompt="@string/genders"
    android:entries="@array/gender_array"/> 
```

然后你的代码变成：

```
Spinner gender = (Spinner) findViewById(R.id.spinner_edit_gender);
if (strGender.equalsIgnoreCase("male"))
    gender.setSelection(0,true);
else
    gender.setSelection(1,true); 
```

或者如果我们想变得更漂亮：

```
Spinner gender = (Spinner) findViewById(R.id.spinner_edit_gender);
(strGender.equalsIgnoreCase("male")) ? gender.setSelection(0,true) : gender.setSelection(1,true); 
```

我更改`equals()`为`equalsIgnoreCase()`因为您的数组中的值与示例中代码中的值的大小写不匹配（“男性”与“男性”）。

2.) 当我输入第一部分时，我注意到您的 ArrayAdapter 的类型是`CharSequence`. 尝试将其更改为`String`然后测试您的原始代码。但是，根据您的需要，您可能需要考虑在 XML 中定义选项，因为至少在我看来，与处理 ArrayAdapters 相比，它是为微调器定义选项的一种更简洁、更简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:09:20.463

尝试使用`setSelection(int)`而不是`setSelection(int, boolean)`.

# html - 在表单中实现ajax保存

> ID：10919613
> 
> 赞同：0
> 
> 时间：2012-06-06T18:02:05.640
> 
> 标签：html, ajax, forms

我正在实现一个虚拟旅游应用程序，并希望将 ajax 功能添加到旅游构建过程中。

我在页面上有许多迷你表单，其数量由指定目录中的图像数量决定。

所以页面目前看起来像

```
---------------------------------------------------
|             |           Location   
|             |           Latitude
|  Thumb      |           Longitude       --------
|             |                           | Save |
|--------------                           --------
|
---------------------------------------------------
---------------------------------------------------
|             |           Location   
|             |           Latitude
|  Thumb      |           Longitude       --------
|             |                           | Save |
|--------------                           --------
|
---------------------------------------------------
---------------------------------------------------
|             |           Location   
|             |           Latitude
|  Thumb      |           Longitude       --------
|             |                           | Save |
|--------------                           --------
|
--------------------------------------------------- 
```

并继续拍摄 n 幅图像。

我想做的是让保存按钮执行一个ajax函数来保存信息而不刷新页面。我的问题与按钮 ID 有关。由于表单是通过循环中的 PHP 回显语句呈现的，我可以将循环编号添加到按钮 ID，但是如何在 jquery 函数中使用所述 ID？

具体来说，

```
$("#save").click(function(){
  //ajax POST code goes here
}); 
```

`#save`当末尾添加数字时将不起作用。

我还有哪些其他选项可以为这些表单实现 ajax 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:13:33.910

我会为每个按钮添加一个类，然后将单击事件附加到该类，然后以这种方式找到 ID。然后你可以运行你的 AJAX。

像这样：

```
$('.buttonClass').click(function (){
    var id = this.id;
    var $thisButton = $('#' + id);
    //Can do jQuery stuff with $thisButton now
    //Run AJAX
}); 
```

只需确保将类添加到每个保存按钮即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:31:54.117

**编辑** 我可能误解了你的问题——我以为你想通过这些表格上传图片。我的答案的第一部分适用，第二部分可能不相关。您仍然可以使用该方法，即使使用您拥有的表单（没有文件元素），但对于您的用例，还有其他方法可能更“常见”。

* * *

看起来你正在使用 jQuery，但在我进入“jQuery 方式”之前，我将讨论这个的香草方法

您的目标是双重的：首先，区分表单，以便您可以跟踪哪个 for 正在做什么，其次，您希望通过`IFRAME`模拟 AJAX 式表单提交来提交您的表单。

第一部分很简单：为表单元素、按钮和容器本身使用某种唯一标识符：

```
<div class="oneFormContainer oneFormContainerGTRX2">
    <form class="oneForm oneFormGTRX2" id="GTRX2">
         <!-- form elements -->
        <button class="oneFormButton onFormButtonGTRX2" rel="GTRX2">Submit</button>
    </form>
</div> 
```

在这个例子中，整个 shebang 有一个唯一标识符“GTRX2”（一个随机字符串），所以我把它作为一个类放在每个元素上。我更喜欢处理类而不是 id，但大多数情况下你可以用 id 做同样的事情。这里的底线是，当单击按钮时，可以读取`rel`属性并快速定位关联的容器（显示加载消息）和关联的表单（提交）。

正如我所提到的，这里目标的第二部分是将表单提交到`IFRAME`. 这可能会令人惊讶，因为`IFRAME`s 的 rap 很差，但在这种情况下，您将使用隐藏的来模拟 AJAX 请求——也就是说，您将使用普通形式的帖子，但它会发生与页面加载异步。这种策略是必需的，因为使用 AJAX 的标准 XHR 方法，无法提交文件。

在伪javascript中，然后：

```
onPageLoad {
    // add a 'click' event to all elements with the class "oneFormButton"
    document.body.getElementsByClassName('oneFormButton').addEvent('click', handleFormUpload);
}
handleFormUpload {
    var uid = clickedButton.get('rel');
    var form = document.getElementByClassName('oneForm'+uid);
    var container = document.getElementByClassName('oneFormContainer '+uid);

    // make a hidden iframe element, add to body
    var iframe = createElement('iframe');
    iframe.id = 'ajFormSubmitFrame'+uid;
    iframe.name = 'ajFormSubmitFrame'+uid;
    iFrame.style.position = 'absolute';
    iFrame.style.top= '-9000';
    iFrame.style.left= '-9000';
    iFrame.style.width= '10px';
    iFrame.style.height= '10px';
    document.body.appendChild(iFrame);

    // tell the form to target the iframe
    form.target = 'ajFormSubmitFrame'+uid;

    // add an onload event to capture the return
    iFrame.addEvent( 'load', uploadCallback );

    // show some kind of loading message
    showLoader(container);

    // submit the form
    form.submit();
}

uploadCallback  {
  // deal with the response

  // and be sure to remove that iFrame, reset the target property of your form, and clean up the loading message
} 
```

哇！了解了所有这些之后，流行的库通常会将其封装成某种魔法。你有这些：

[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/) - 对于 jQuery [http://pixeline.be/experiments/jqUploader/](http://pixeline.be/experiments/jqUploader/) - 对于 jQuery [http://www.fyneworks.com/jquery/multiple-file-upload/#tab -示例](http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Examples)- 用于 jQuery

[http://mootools.net/forge/p/form_upload](http://mootools.net/forge/p/form_upload) - 对于 mootools（万岁！）

不要认为你**必须**为此使用一个库——使用上面的伪代码作为基础，推出你自己的伪代码并不难，它完全符合你的需要，而没有笨重的库开销。

此外，您还`FileReader`需要考虑新的 API（超出此答案的范围），请参阅文档以获取示例：[https ://developer.mozilla.org/en/DOM/FileReader](https://developer.mozilla.org/en/DOM/FileReader)

# javascript - 访问单个 JSON 对象数组中的值

> ID：10919614
> 
> 赞同：3
> 
> 时间：2012-06-06T18:02:06.750
> 
> 标签：javascript, jquery, ajax, json

我在这上面浪费了两天时间，我再也受不了了。我从我的`$.ajax`电话中获得了格式良好的 JSON 数据。下面的示例...

```
"results":[
"{"a":"data","b":"data","c":"data","d":"data"}",
"{"a":"data","b":"data","c":"data","d":"data"}",
"{"a":"data","b":"data","c":"data","d":"data"}",
"{"a":"data","b":"data","c":"data","d":"data"}"
] 
```

我试图访问这个 JSON 对象的单个数组中的值，但无法弄清楚。下面是我的代码...

```
success:function (data) {

/*
$.each(data.results, function(i, val) {
console.log(i, val);
});
*/

$('a.previewUrl').each(function (i) {
    var res = jQuery.parseJSON(data.results[0]);
    var previewUrl = $(this);
if(previewUrl.attr("href") == '') {
    previewUrl.attr("href", res[i].d);
}

});

} // end success 
```

对数组中每个 JSON 对象的`console.log`迭代打印结果很好，但我想我已经尝试了十几种不同的方法来在`$.each()`循环中获取这些值。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:54:55.170

您的 Json 无效。试着把它通过[jsonlint](http://jsonlint.com)看看会发生什么。

我认为这可能是您的目标：

```
{
"results": [
    {
        "a": "data",
        "b": "data",
        "c": "data"
    },
    {
        "a": "data",
        "b": "data",
        "c": "data"
    },
    {
        "a": "data",
        "b": "data",
        "c": "data"
    },
    {
        "a": "data",
        "b": "data",
        "c": "data"
    }
]} 
```

and if you're using jQuery's $.getJSON function, you don't need to parse your data or if you're using the $.ajax function, set the datatype to json so it wil parse the data for you.

# hbase - HBase Thrift：如何连接到远程 HBase 主/集群？

> ID：10919618
> 
> 赞同：4
> 
> 时间：2012-06-06T18:02:11.390
> 
> 标签：hbase, thrift, cloudera

感谢 Cloudera 发行版，我在本地机器上运行了一个 HBase master/datanode + Thrift 服务器，可以编写和测试 HBase 客户端程序并使用它，没问题。

但是，我现在需要在生产中使用 Thrift，并且我无法找到有关如何让 Thrift 与生产 HBase 集群一起运行的文档。

据我了解，我需要在**客户端节点**上运行 hbase-thrift 程序，因为 Thrift 程序只是 HBase 的另一个中间客户端。

所以我猜我必须能够以某种方式将主节点主机名/IP 指定给 HBase-Thrift？我该怎么做？

另外，关于如何在生产中扩大规模有什么建议吗？我只需要这样的设置：

```
Client <-> Thrift client <-> HBase Master <-> Multiple HBase workers 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T19:11:15.307

# 让它运行

您不必在本地计算机上运行 Thrift 服务器，它可以在任何地方运行，但 RegionServers 通常是一个好地方*。然后在代码中连接到该服务器。

一个 Python 示例：

```
transport = TSocket.TSocket("random-regionserver", 9090) 
```

您显然会`random-regionserver`用运行 Thrift 服务器的服务器之一替换 。

该服务器从通常的位置获取其配置。如果您使用的是 CDH，那么您会在其中找到配置，`/etc/hbase/conf/hbase-site.xml`并且您需要添加一个属性`hbase.zookeeper.quorum`：

```
<property>
  <name>hbase.zookeeper.quorum</name>
  <value>list of your zookeeper servers</value>
</property> 
```

当您从下载的 Apache 发行版启动 Thrift 服务器时，这与此类似，只是`hbase-site.xml`可能位于不同的目录中。

# 扩大规模

现在扩大规模的一种简单方法是在 Thrift 客户端中保留所有 Regionserver 的列表，并在连接时随机选择一个。或者您创建多个连接并每次使用一个随机连接。某些语言绑定（即 PHP）有一个`TSocketPool`可以传入所有服务器的位置。否则，您需要做一些手动工作。

使用这种技术，所有读取和写入都应该或多或少地分布在集群中的 Thrift 服务器上。到达 Thrift 服务器的每个读取或写入操作*仍将*被转换为来自 Thrift 服务器的基于 Java 的 API 调用，然后打开与正确 Regionserver 的网络连接以执行请求的操作。

这意味着您将无法获得与使用 Java API 时一样好的性能。如果您自己缓存区域位置并点击适当的 Thrift 服务器，这*可能会*有所帮助，但即便如此，即使它最终在本地服务器上，也会进行额外的 Java API 调用。[HBASE-4460](https://issues.apache.org/jira/browse/HBASE-4460)将有助于解决这种情况，但这*不*包含在 CDH3u4 或 CDH4 中。

[* 存在[HBASE-4460](https://issues.apache.org/jira/browse/HBASE-4460)问题，它实际上在 Regionserver 中嵌入了 Thrift 服务器。]

# php - Symfony2，如何使表单标签类/属性与 其输入不同？

> ID：10919619
> 
> 赞同：40
> 
> 时间：2012-06-06T18:02:12.490
> 
> 标签：php, forms, symfony

我想构建一个带有标签和输入的表单，但它们的类应该不同。下面的代码为具有相同属性的输入创建标签：

```
 public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
                ->add('hours', null ,
                  array('attr'=> 
                             array(
                                 'placeholder'=>'Working Hours',
                                 'class'=>'ui-spinner-box') ) )
    } 
```

在我上面的代码中，`ui-spinner-box`将为标签和输入输出。它甚至会为其标签放置占位符。

那么如何使其`attr`分别为标签创建，以便我可以输出如下内容：

```
<label class="MYCLASSFOR_LABEL"   for="input_id">Hours</label>
<input class="MYCLASSFOR_INPUTS"  type="text" id="input_id" name="" value="" > 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-06T21:02:15.487

如[文档](http://symfony.com/doc/current/reference/forms/twig_reference.html#reference-form-twig-variables)中所述：

*   attr ：将在字段上呈现为 HTML 属性的键值数组
*   label_attr：将在标签上呈现为 HTML 属性的键值数组

您可以在树枝模板或表单构建器中设置这些属性：

**树枝模板：**

*   对于 symfony 2.1 和更新的使用：

    ```
    {{ form_label(form.hours, null, {'label_attr': {'class': 'foo'}}) }} 
    ```

*   在旧的 symfony 2.0 中它曾经是

    ```
    {{ form_label(form.hours, { 'label_attr': {'class': 'MYCLASSFOR_LABEL'} }) }}
    {{ form_widget(form.hours, { 'attr': {'class': 'MYCLASSFOR_INPUTS'} }) }} 
    ```

**表单生成器**

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('hours', null, array(
        'label_attr' => array('class' => 'MYCLASSFOR_LABEL'),
        'attr'       => array('class' => 'MYCLASSFOR_INPUTS'),
    ));
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-10-15T03:47:22.443

这可能是新的，但现在有一个简单的方法可以做到这一点：

```
$builder
    ->add('hours', null , array(
        'attr'=> 
            array(
                'placeholder'=>'Working Hours',
                'class'=>'MYCLASSFOR_INPUTS') 
        ) ,
        'label_attr' => array(
            'class' => 'MYCLASSFOR_LABEL'
        )
    ); 
```

您正在寻找的选项是`label_attr`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-23T09:05:31.203

这在 Symfony 2.3 中对我有用：

```
{{ form_row(form.hours,  {   'label': 'Hours:'
                            ,'label_attr': {'class': 'MYCLASSFOR_LABEL'}
                            ,'attr': {'class': 'MYCLASSFOR_INPUTS'} 
                        }
           )
}} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-05T17:52:32.353

以上不再正确，至少在我使用它的上下文中。在 Symfony 2.1 中，解决方案是：

```
{{ form_label(form.item, label|default(null), { 'label_attr': { 'class': 'MYCLASS' } }) }} 
```

# .net - 如何从 WSDL 中获取 XSD

> ID：10919622
> 
> 赞同：0
> 
> 时间：2012-06-06T18:02:30.703
> 
> 标签：.net, wsdl

我有来自服务提供商的 WSDL，如何在不手动复制和粘贴的情况下从中提取 XSD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:13:23.667

如果您安装了 perl，您可能还会有 xpath 程序，在这种情况下，您可以使用以下命令提取模式：

```
xpath myfile.wsdl /wsdl:definitions/wsdl:types/xsd:schema > myfile.xsd 
```

如果您在 .NET 中执行此操作，您仍然可以使用 XPath，但详细信息将取决于您使用 WSDL 的准确程度。这是一个关于在 .NET 中使用 XPath 的页面，您可能会发现它很有用：http: [//msdn.microsoft.com/en-us/magazine/cc164116.aspx](http://msdn.microsoft.com/en-us/magazine/cc164116.aspx)

# couchdb - 速率限制 - 单独使用 CouchDB 和 Redis 或 CouchDB

> ID：10919625
> 
> 赞同：1
> 
> 时间：2012-06-06T18:02:43.050
> 
> 标签：couchdb, redis, rate-limiting

我编写了一个带有 CouchDB 后端的应用程序。我在 CouchDB 上投入了很多时间，所以我不愿意将所有内容转移到不同的 NoSQL 数据库（如 Redis）。

问题是我现在需要实现速率限制（基于 IP 地址）功能。

有[很多例子](http://chris6f.com/rate-limiting-with-redis)说明 Redis 对这类任务有多好，但是因为我不想为其他任务放弃 CouchDB，这意味着我基本上将运行（并支持）两个数据库（1 个用于大多数数据，1 个用于速率限制）等等......

1.  与 Redis 一起运行 CouchDB 是否闻所未闻？
2.  CouchDB 本身是否适合处理速率限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:59:27.053

**与 Redis 一起运行 CouchDB 是否闻所未闻？**

Redis 通常与其他存储解决方案（MySQL、PostgreSQL、MongoDB、CouchDB 等）相辅相成。与许多其他 NoSQL 解决方案一样，Redis 并不适用于*所有*类型的工作负载或情况。Redis 的作者是务实和开放的人，当他们更适应这种情况时，他们经常建议使用其他解决方案而不是 Redis。

因此，Redis 是一个优秀的团队成员，并且通常很容易集成到现有的基础架构中。

这是[Redis 与 CouchDB 一起使用的示例](http://blog.mudynamics.com/2012/01/17/blitz-io-using-redis-transactions-with-couchdb/)。

**CouchDB 本身是否适合处理速率限制？**

CouchDB 有许多有用的特性来实现 Chris O'Hara 的文章中描述的速率限制策略。例如，它支持对多个文档的[批量操作](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API)（具有可选的原子性）。“桶跨度”可以存储在单个文档中。[可以使用更新处理程序](http://wiki.apache.org/couchdb/Document_Update_Handlers)来覆盖计数器的就地增量。

IMO，主要缺少的功能是自动项目过期（CouchDB 不提供 AFAIK）。因此，您必须设计一种巧妙的机制来摆脱 CouchDB 之上的过时数据。

主要问题是 CouchDB 并不是真正为这种工作负载设计的：它是一个面向日志结构的文档数据库。每次计数器必须增加时，都会涉及 JSON 解包/打包操作、要执行的一些 Javascript 代码以及在仅附加文件中编写整个文档的新修订版。[您可以在此处](https://plus.google.com/u/0/107397941677313236670/posts/CyvwRcvh4vv)找到一篇描述 CouchDB 如何存储其数据的好文章。

我怀疑在 CouchDB 之上实施的速率限制策略不会很好地扩展（I/O 太多、CPU 消耗过多、网络协议效率低下）。例如，CouchDB 是一个 RESTful 服务器；我不会觉得启动客户端 HTTP 操作（对 CouchDB 的 REST 查询）来限制我系统的每个传入 HTTP 查询的速率。

Redis 更适合这种工作负载（快速、内存中、无 I/O、高效的客户端协议、无 JSON 解析/格式化、增量是本机原子操作等......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:02:52.997

您可以使用 Memcached 进行速率限制 - 正如您所提到的，它有一个很好的计数器增量命令，而且过时的数据会在适当的时候自动从缓存中清除，因此它具有 Redis 对这个应用程序的所有好处，而没有烦人的功能重复（和复杂性）在 CouchDB 之上运行 Redis 会带来。

[http://simonwillison.net/2009/jan/7/ratelimitcache/](http://simonwillison.net/2009/jan/7/ratelimitcache/)

您可以很容易地将 memcached 添加到您自己的设置中，或者您可以调查 CouchBase，其当前的服务器产品集成了 CouchDB 派生数据库和 Memcached 兼容性：

[http://www.couchbase.com/memcached](http://www.couchbase.com/memcached)

就我个人而言，我不喜欢 Couchbase 从 CouchDB 分叉的方式，但对于您的应用程序来说，它可能是一个完美的选择。

# oop - 在 Lua 中实现 OOP 时尝试调用方法“print”（一个 nil 值）

> ID：10919626
> 
> 赞同：0
> 
> 时间：2012-06-06T18:02:43.770
> 
> 标签：oop, class, lua

所以，我正在尝试在 Lua 中编写一个简单的类来表示 CSV 字段：

```
csv_entry = {}
csv_entry.__index = csv_entry

function csv_entry.create(...)
   return arg
end

function csv_entry:tostring()
   local str = string.char()
   for i,v in ipairs(self) do
      if i < #self then
     str = str .. v
      else
     str = str .. v .. ", "
      end
   end
end

function csv_entry:print()
   print(self:tostring())
end 
```

但是当我尝试像这样使用这个类时：

```
c = csv_entry.create("Volvo", 10000, "Eric")
c:print() -- line 25 
```

我收到错误消息

```
lua: csv.lua:25: attempt to call method 'print' (a nil value) 
```

我无法真正弄清楚这里的问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T21:47:10.670

你可能打算这样做：

```
function csv_entry.create(...)
   return setmetatable(arg, csv_entry)
end 
```

* * *

您发布的版本`cvs_entry.create`只是返回它的参数打包到一个表中，所以这段代码：

```
c = csv_entry.create("Volvo", 10000, "Eric")
c:print() 
```

完全等同于这段代码：

```
c = {"Volvo", 10000, "Eric"}
c:print() 
```

`c`不包含`print`条目，因此`c.print`返回`nil`并`c:print()`失败，因为您尝试“调用” `nil`。

* * *

旁注：`arg`可变参数函数的隐式参数在 Lua 5.1（6 年前）中被删除。现在正确的做法是：

```
function csv_entry.create(...)
    local arg = {...}
    return setmetatable(arg, csv_entry)
end 
```

或者简单地说：

```
function csv_entry.create(...)
   return setmetatable({...}, csv_entry)
end 
```

* * *

只要我们在这里：你不会得到任何输出，`csv_entry:tostring`因为它不会返回任何东西。此外，如果您要做的只是用逗号分隔符连接一堆项目，您可以使用`table.concat`：

```
function csv_entry:tostring()
    return table.concat(self, ', ')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T06:03:10.613

我重写了你的代码以满足它的用途，它对我来说运行正常：

```
csv_entry = {}  

function csv_entry:create(...)
    o = {content = {}}
    self.__index = self;
    setmetatable(o, self)
        for i = 1, arg.n do
            o.content[i] = arg[i];
        end
    return o;
end

function csv_entry:tostring()
    local resStr = ""
    for i, v in pairs(self.content) do
      resStr = resStr .. v;
      if i < #(self.content) then
          resStr = resStr .. ", "
      end
    end
    return resStr;
end

function csv_entry:print()
    print(self:tostring())
end

c = csv_entry:create("Volvo", 10000, "Eric")
c:print() 
```

就像@Mud 所说，代码中的 create(...) 只是一个常规调用，并从...返回所有参数，如果您希望 csv_entry 像一个类一样工作，那么您必须将设置 metatable 和 __index 的代码放入create(...)，并从 csv_entry 类返回一个实例

# c# - 使用自定义表单编辑 DataRows

> ID：10919627
> 
> 赞同：0
> 
> 时间：2012-06-06T18:02:43.623
> 
> 标签：c#, .net, winforms, data-binding

我有一个要可视化和使用的数据集。我使用 DataGridView 组件来显示它的表格，但是在添加新行/编辑现有行时，我不想使用 DataGridView 的功能：我想显示一个自定义表单，使用 TextBoxes 和 ComboBoxes 等等，和确定/取消按钮。

有一个包含 Name (string)、Forme (string)、Image (byte[])、Attr1 (string)、Attr2 (string)、IsSpecial (bool) 列的表。Forme 和 Attr2 可以为空，其他都不是，并且 Image 应该包含一张图片。此外，必须从另一个表（具有 ID（长）、名称（字符串）列）中查找 Attr1 和 Attr2。

所以我创建了一个新表单，在其上放置了两个文本框、一个图片框、两个组合框和一个复选框。我已经有一个问题：如何在文本框/组合框中表示 DBNull？

接下来，绑定本身。我想我必须做这样的事情：

```
class MainForm
{
    // ...
    private void btAdd_Click(object sender, EventArgs e)
    {
        using (EditFrom editForm = new EditForm())
        {
            // I have to create a new row, right?
            var newRow = theTable.newStrongTypedRow();

            if (editForm.ShowData(binding) == DialogResult.OK)
                theTable.addStrongTypedRow(newRow);
        }
    }

    private void btEdit_Click(object sender, EventArgs e)
    {
        using (EditFrom editForm = new EditForm())
        {
            if (editForm.ShowData(binding) == DialogResult.OK)
                binding.EndEdit();
            else
                binding.CancelEdit();
        }
    }
}

class EditForm
{
    // ...
    public DialogResult ShowData(SomeBinding binding)
    {
        // tie the controls to the datarow which is being edited right now
        BindAllControls(binding);

        // let the user input the data
        return ShowDialog();
    }
} 
```

但是我对“SomeBinding”有什么用呢？BindAllControls() 里面有什么？或者也许我把这一切都颠倒了，这不是我应该如何表示/编辑数据？也许有人可以推荐一本关于这个主题的书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:18:59.640

我认为您会希望使用 BindingSource 来处理所有绑定。您可以将控件配置为绑定到 BindingSource，它应该处理控件和 DataSet 之间的所有转换。

绑定可以这样设置： `this.nameTextBox.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.testDataBindingSource, "Name", true));` 您可以将 BindingSource 作为“SomeBinding”传入。

# spreadsheetgear - Spreadsheetgear - 如何控制标签栏

> ID：10919628
> 
> 赞同：0
> 
> 时间：2012-06-06T18:02:44.737
> 
> 标签：spreadsheetgear

当我在 Spreadsheetgear 中创建具有多个工作表的工作簿时，将其保存到文件中，然后打开它 - 选项卡栏仅显示添加的最后一张工作表。我必须单击选项卡栏导航箭头才能显示所有 4 个选项卡。有谁知道如何调整标签栏显示的设置？

用于将工作簿选项卡滚动到第一个位置的 Excel 宏是这样的：

ActiveWindow.ScrollWorkbookTabs Position:=xlFirst

但是，我无法弄清楚如何在 Spreadsheetgear 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:27:39.743

这是 SpreadsheetGear 10.0 中的一个已知错误。它应该在下一个版本中修复。请参阅下面我从支持部门收到的评论：

> 看起来你遇到了一个已知的错误。SpreadsheetGear 正在写出不正确的“firstSheet”索引，这导致 Excel “滚动”到相应的错误位置，几乎隐藏了其余选项卡。我们发现导致此问题的场景都包括在同一例程中向工作簿添加和删除/隐藏工作表，尽管可能还有更多我们不知道的场景。
> 
> 我们打开了一个工作项来研究在我们的下一个主要版本中修复这个问题，该版本很快就会发布——我们可能会在一个月内发布 Beta 版本，尽管这可能会滑倒。

# html - div与css的位置

> ID：10919629
> 
> 赞同：0
> 
> 时间：2012-06-06T18:02:50.343
> 
> 标签：html, css, position

我想知道是否可以将主要内容显示在左侧，将标题显示在右侧但是 HTML 是这样的

```
<div id="header" style="float:right; height:1000px; width:60%;">
   head
</div>
<div id='main' style ="float:left; height:1000px; width: 40%;">
   main
</div> 
```

我已经尝试过了，但它不起作用

顺便说一句，标题绝对需要放在第一位。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:16:51.247

[jsfiddle](http://jsfiddle.net/RGNGK/)一切都按您的需要工作。但是我会在这些块之后添加样式清晰的空白 div，以进一步避免以下块的问题。

或者你可能想要这个？[jsfiddle](http://jsfiddle.net/RGNGK/1/)

# amazon-ec2 - 使用 ssh 连接 ec2 实例操作超时错误

> ID：10919639
> 
> 赞同：0
> 
> 时间：2012-06-06T18:03:18.373
> 
> 标签：amazon-ec2, amazon-web-services

创建一个新实例后，我试图访问我的实例，如下所示：

```
ssh -i private_key.pem root@my_instance_public_domain 
```

但是操作超时，我已经使用更新了私钥文件权限

```
chmod 400 
```

并通过添加新的绑定规则编辑默认安全组，选择 SSH 和源 Ip 作为 1.12.34.0/32

但获取端口 22: Operation timed out 。

我错过了什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:50:46.527

要进行测试以使其正常工作，您可能需要将规则设置为 0.0.0.0/0。

# asp.net - 在没有 GAC 的情况下在多个子应用程序之间共享一个 HttpModule

> ID：10919643
> 
> 赞同：6
> 
> 时间：2012-06-06T18:03:25.500
> 
> 标签：asp.net, .net, iis, httpmodule

我在 IIS 中有一个网站设置，其中一个 web.config 在根目录下设置了许多子应用程序虚拟（大约 35 个），其中一些使用自己独特的覆盖/配置。

我有两个 HttpModule，我想同时为所有子应用程序实现。在不使用 GAC 的情况下，有没有办法在 web.config 中指定实现，以便这些模块可以应用于所有子应用程序，而无需将模块代码重新编译到每个子应用程序中？我可以将 HttpModule 程序集存储在站点结构中的某个位置以供所有子应用程序使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:58:23.847

可以在根 web.config (`system.webServer/modules`部分) 中注册一个 http 模块。模块必须有一个强名称（必须签名）：

```
<add name="MyModule" preCondition="managedHandler" type="MyModule.Namespace, MyModuleAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=bfd166351ed997df" /> 
```

现在 IIS 期望该模块位于 bin 目录（或 GAC 中）。`dependentAssembly`部分指示 IIS 在哪里可以找到程序集文件：

```
 <runtime>
        <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="MyModuleAssembly" publicKeyToken="bfd166351ed997df"/>
                <codeBase version="1.0.0.0"
                          href="file://c:/SharedLibs/MyModuleAssembly.dll" />
            </dependentAssembly>
        </assemblyBinding>
    </runtime> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:45:33.080

假设事后将其正常添加到 web config 和 bin 文件夹对您不起作用，在当前框架中您有几种可能性：

**如果您不介意更改 Web 配置，但需要将模块存储在 bin 之外，**您可以使用 System.Web.PreApplicationStartMethod 为 AppDomain.AssemblyResolve 事件注册处理程序，然后加载事件处理程序并返回类型

**如果您不想修改 web.config 或需要您的事件位于堆栈的顶部，**就像您通过 GAC 处理它并更改机器级别的 web 配置一样，您可以使用 System.Web.PreApplicationStartMethod 获取代码只需在 bin 目录中即可在启动时运行，然后使用 MVC Razor 库中的 Microsoft.Web.Infrastructure.DynamicModuleHelper.DynamicModuleUtility.RegisterModule。这样做会给您带来与成为机器模块列表中的最后一个模块相同的结果。

**如果您不想修改 web 配置并且需要在事件堆栈中更早，**那么您需要做一些事情来重新排序事件处理程序。我需要这样做一次以尝试调试正在吞噬错误的东西。在反射器中稍微戳了一下，我想出了这个函数来获取现有的事件处理程序

```
Dim t As Type = target.[GetType]()

Public Function GetEventSubscribers(ByVal target As Object, ByVal eventName As String) As [Delegate]()
    Dim w = CType(t.GetField("_events", BindingFlags.Instance Or BindingFlags.Static Or BindingFlags.NonPublic).GetValue(target), System.ComponentModel.EventHandlerList)
    Dim k = t.GetFields(BindingFlags.[Static] Or BindingFlags.Instance Or BindingFlags.NonPublic).Where(Function(x) x.Name.StartsWith("Event" & eventName)).Select(Function(x) x.GetValue(target)).ToList()
    Dim d() As [Delegate] = k.SelectMany(Function(x)
        If w(x) Is Nothing Then
            New [Delegate]() {}
        Else
            Return w(x).GetInvocationList()
        End If
    End Function).ToArray
    Return d
End Function 
```

如果您使用 EventName 将 HttpApplication 实例传递给它，您将获得所有已注册的处理程序委托，这将允许您在每个委托上调用 RemoveEventHandler()。

如果您对错误事件执行此操作，则添加您自己的处理程序，然后以正确的顺序重新添加预先存在的委托，然后您的处理程序首先触发，然后任何其他处理程序有机会破坏偶数状态和只要您不自己更改事件状态，应用程序的其余部分似乎就更明智了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:44:41.483

您可以在 dll 中添加 http 模块。将 dll 放在应用程序的 bin 文件夹中，并从 web.config 引用 http 模块

```
 <add name="MyHttpModule" type="MyDll.MyHttpModule, MyDll" /> 
```

# java - 带有 springsource 工具套件的 JDBC 不起作用

> ID：10919647
> 
> 赞同：0
> 
> 时间：2012-06-06T18:03:39.010
> 
> 标签：java, spring, jdbc, sts-springsourcetoolsuite

我刚刚从 netbeans 切换到 springsource 工具套件，但遇到了一个问题：

我已经下载了 mysql-connector-java-5.1.20-bin.jar 将文件添加到库中，但我仍然收到此警告：

```
java.lang.ClassNotFoundException: com.mysql.jdbc
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at database.Database.checkConnection(Database.java:20)
    at database.UserDatabase.getUser(UserDatabase.java:114)
    at register.processRequest(register.java:30)
    at register.doGet(register.java:74)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:88)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
java.lang.NullPointerException
    at register.processRequest(register.java:31)
    at register.doGet(register.java:74)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:88)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
jun 06, 2012 7:59:12 PM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/Burgerdemocratie] has started
jun 06, 2012 7:59:12 PM org.apache.catalina.core.ApplicationContext log
INFO: Destroying Spring FrameworkServlet 'appServlet' 
```

这是我认为很标准的连接代码：

```
public class Database {

    protected static Connection connection = null;
    public static boolean checkConnection() throws Exception {
        if (connection == null || connection.isClosed()) {
            String driver = "com.mysql.jdbc.Driver";
            String url = "jdbc:mysql://localhost:3306/2012gwtgr2";
            String login = "gwx2";
            String pass = "VCxxxR";
            try {
                Class.forName(driver).newInstance();
                connection = DriverManager.getConnection(url, login, pass);

            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
        if (connection == null || connection.isClosed()) {
            return false;
        } else {
            return true;
        }
    }

} 
```

有人能帮助我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:10:13.940

如果您有一个 Web 项目，那么它应该放在 WebContent/WEB-INF/lib 文件夹下，并将它也添加到您的库中。这应该可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T06:31:41.810

如果您有一个 Web 项目，那么它应该放在 WebContent/WEB-INF/lib 文件夹下，并将它也添加到您的库中。这应该可以解决问题。

尝试这个！

# javascript - 在客户端 JavaScript 中访问 Express.js 局部变量

> ID：10919650
> 
> 赞同：70
> 
> 时间：2012-06-06T18:03:50.217
> 
> 标签：javascript, node.js, express, pug

好奇我是否做对了，如果不是，你们将如何处理这个问题。

我有一个 Jade 模板，它需要渲染从 MongoDB 数据库中检索到的一些数据，并且我还需要访问客户端 JavaScript 文件中的这些数据。

我正在使用 Express.js 并将数据发送到 Jade 模板，如下所示：

```
var myMongoDbObject = {name : 'stephen'};
res.render('home', { locals: { data : myMongoDbObject } }); 
```

然后在**home.jade**里面我可以做这样的事情：

```
p Hello #{data.name}! 
```

其中写道：

```
Hello stephen! 
```

现在我想要的是也可以访问客户端 JS 文件中的这个数据对象，这样我就可以在将对象发送回服务器以更新数据库之前，通过单击按钮来操作对象。

我已经能够通过将“数据”对象保存在 Jade 模板的隐藏输入字段中，然后在我的客户端 JS 文件中获取该字段的值来完成此操作。

**内部home.jade**

```
- local_data = JSON.stringify(data) // data coming in from Express.js
input(type='hidden', value=local_data)#myLocalDataObj 
```

然后在我的客户端 JS 文件中，我可以像这样访问 local_data：

**在 myLocalFile.js 中**

```
var localObj = JSON.parse($("#myLocalDataObj").val());
console.log(localObj.name); 
```

然而，这种字符串化/解析业务感觉很混乱。我知道我可以将我的数据对象的值绑定到我的 Jade 模板中的 DOM 对象，然后使用 jQuery 获取这些值，但我想访问从我的客户端 JS 中的 Express 返回的实际对象。

我的解决方案是最优的，你们将如何做到这一点？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-06T18:17:23.870

渲染完成后，仅将渲染的 HTML 发送到客户端。因此，将不再有可用的变量。您可以做的，不是在输入元素中写入对象，而是将对象输出为呈现的 JavaScript：

```
script(type='text/javascript').
    var local_data =!{JSON.stringify(data)} 
```

编辑：显然 Jade 在第一个右括号后需要一个点。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-06T18:26:25.020

我做的有点不同。在我的控制器中，我这样做：

```
res.render('search-directory', {
  title: 'My Title',
  place_urls: JSON.stringify(placeUrls),
}); 
```

然后在我的jade文件中的javascript中，我像这样使用它：

```
var placeUrls = !{place_urls}; 
```

在本例中，它用于 twitter bootstrap typeahead 插件。然后，如果需要，您可以使用类似的东西来解析它：

```
jQuery.parseJSON( placeUrls ); 
```

另请注意，您可以省略本地人： {} 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-06T13:00:07.917

使用 Jade 模板：

如果您在包含的静态 HTML 文件上方插入 @Amberlamps 代码片段，请记住指定**!!! 5**在顶部，以避免您的样式被破坏，在**views/index.jade**：

```
!!! 5
script(type='text/javascript')
    var local_data =!{JSON.stringify(data)}

include ../www/index.html 
```

这将在实际静态 HTML 页面加载之前传入您的 local_data 变量，以便该变量从一开始就在全局范围内可用。

服务器端（使用 Jade 模板引擎）- **server.js**：

```
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');

app.get('/', ensureAuthenticated, function(request, response){
    response.render('index', { data: {currentUser: request.user.id} });
});

app.use(express.static(__dirname + '/www')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-06T09:21:03.177

您不需要在渲染调用中传递局部变量，局部变量是全局变量。在您的 pug 文件调用中，不要放置键表达式，例如`#{}`. 只需使用类似的东西： `base(href=base.url)`

`base.url`在哪里`app.locals.base = { url:'/' };`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-06T18:17:54.220

你听说过socket.io吗？（http://socket.io/）。从 express 访问对象的一种简单方法是在 node.js 和您的 javascript 之间打开一个套接字。通过这种方式，数据可以轻松地传递到客户端，然后使用 javascript 轻松地进行操作。代码不需要太多，只需一个`socket.emit()`来自 node.js 和一个`socket.on()`来自客户端。我认为这将是一个有效的解决方案！

# ms-access - 以表单形式访问 2010 VBA 图片对象

> ID：10919651
> 
> 赞同：2
> 
> 时间：2012-06-06T18:03:50.597
> 
> 标签：ms-access

我有一个带有一个字段（club_name）的表单，我在这个表单中有一个图片对象。在文件夹中的某个地方，我有一些图片 (*.png)，每个俱乐部的图片与我表中的记录相同。例如，我有一条记录“FCB”，在该文件夹中我有一张图片“FCB.png”。我自己的代码是这样的：

> Private Sub Form_Current()
> Image5.Picture = "C:\Users\Milad\Desktop\club imgs\" & Club_Name.Text & ".png"
> End Sub

但这是不对的。
请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:21:33.523

不要引用控件的文本属性。它仅在控件具有焦点时可用。如果必须使用属性，请使用值。

```
Me.Image5.Picture = "C:\Users\Milad\Desktop\club imgs\" & Me.Club_Name & ".png" 
```

您还可以通过使用“真实”名称来检查它是否正常工作：

```
Me.Image5.Picture = "C:\Users\Milad\Desktop\club imgs\FCB.png" 
```

重新评论

```
sPath = CurrentProject.Path & "\"
sBlank = "Blank.png" ''Your own default empty picture

If IsNull(Me.Club_Name) Then
    sFile = sBlank
Else
    ''Does the file exist? Note: Use FilesystemObject
    ''instead if you are working network paths.

    sFile = Dir(sPath & Me.Club_Name & ".png")

    ''Empty string ("")
    If sFile = vbNullString Then
        sFile = sBlank
    End If
End If

Me.Image5.Picture = sPath & sFile 
```

# delphi - 我应该重写什么来管理 Delphi 复合组件中的组件布局？

> ID：10919652
> 
> 赞同：2
> 
> 时间：2012-06-06T18:04:11.533
> 
> 标签：delphi, custom-component

我正在开发一个 Delphi 组件，它由一个带有一些标签和按钮的面板组成。它看起来像这样：

![在此处输入图像描述](../Images/0799aedb1ee4c5b0ac9a45fef4ad0ca5.png)

或像这样：

![在此处输入图像描述](../Images/1a07ca3d4aa669a6a5b0c7fb8522dd92.png)

取决于属性的设置。此外，标签的布局会根据第一个标签的长度而变化。

我一直在用 TFrame 制作原型，并在框架的 OnPaint 方法中进行布局计算。在基于 TPanel 的组件中执行此操作的正确位置是什么？或者，更准确地说，在 TCustomAdvPanel 中，这就是我的派生。它是否像这样在 Paint 方法的覆盖中起作用？

```
procedure TDateRangePicker.Paint;
const
  hSpacing = 5;
begin
  if FShowRefresh then
  begin
    btnRefresh.Visible := true;
    btnRefresh.Left := Width - hSpacing - btnRefresh.Width;
    btnClearDates.Left := btnRefresh.Left - hSpacing - btnClearDates.Width;
    btnChooseDates.Left := btnClearDates.Left - hSpacing - btnChooseDates.Width;
  end
  else begin
    btnRefresh.Visible := false;
    btnClearDates.Left := Width - hSpacing - btnClearDates.Width;
    btnChooseDates.Left := btnClearDates.Left - hSpacing - btnChooseDates.Width;
  end;
  lblRangeCaption.Left := hSpacing;
  lblDateRange.Left := lblRangeCaption.Left + lblRangeCaption.Width + hSpacing;
  inherited Paint;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:02:51.927

绝对不要使用该`Paint`方法重新定位控件。在最坏的情况下，这会再次触发该`Paint`方法，一次又一次......因为，好吧：由于更换控件，面板需要重新绘制。`Paint`，以及所有等价物，仅用于绘制自己。

关于何时实现您的代码：这应该在`ShowRefresh`属性的设置器中完成。

关于如何实现您的`ShowRefresh`属性：当然，您可以像现在一样移动控件。您还可以考虑使用[`Margins`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TControl.Margins)(Delphi XE) 并对齐按钮和标签。然后属性设置器将变得相当简单：

```
type
  TDateRangePicker = class(TCustomPanel)
  private
    FChooseButton: TButton;
    FClearButton: TButton;
    FRefreshButton: TButton;
    FLabel1: TLabel;
    FLabel2: TLabel;
    function GetLabel1Caption: String;
    function GetRefreshButtonVisible: Boolean;
    procedure SetLabel1Caption(const Value: String);
    procedure SetRefreshButtonVisible(Value: Boolean);
  public
    constructor Create(AOwner: TComponent); override;
  published
    property RefreshButtonVisible: Boolean read GetRefreshButtonVisible
      write SetRefreshButtonVisible default True;
    property Label1Caption: String read GetLabel1Caption
      write SetLabel1Caption;
  end;

...

constructor TDateRangePicker.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FChooseButton := TButton.Create(Self);
  FChooseButton.Caption := 'Choose';
  FChooseButton.Align := alRight;
  FChooseButton.AlignWithMargins := True;
  FChooseButton.Margins.Left := 10;
  FChooseButton.Parent := Self;
  FClearButton := TButton.Create(Self);
  FClearButton.Caption := 'Clear';
  FClearButton.Align := alRight;
  FClearButton.AlignWithMargins := True;
  FClearButton.Margins.Left := 10;
  FClearButton.Parent := Self;
  FRefreshButton := TButton.Create(Self);
  FRefreshButton.Caption := 'Refresh';
  FRefreshButton.Align := alRight;
  FRefreshButton.AlignWithMargins := True;
  FRefreshButton.Margins.Left := 10;
  FRefreshButton.Parent := Self;
  FLabel1 := TLabel.Create(Self);
  FLabel1.Caption := 'Foo caption: ';
  FLabel1.Align := alLeft;
  FLabel1.Layout := tlCenter;
  FLabel1.Parent := Self;
  FLabel2 := TLabel.Create(Self);
  FLabel2.Caption := 'From 03/08/2012 to 06/06/2012';
  FLabel2.Align := alLeft;
  FLabel2.Layout := tlCenter;
  FLabel2.Parent := Self;
end;

function TDateRangePicker.GetLabel1Caption: String;
begin
  Result := FLabel1.Caption;
end;

function TDateRangePicker.GetRefreshButtonVisible: Boolean;
begin
  Result := FRefreshButton.Visible;
end;

procedure TDateRangePicker.SetLabel1Caption(const Value: String);
begin
  FLabel1.Caption := Value;
end;

procedure TDateRangePicker.SetRefreshButtonVisible(Value: Boolean);
begin
  FRefreshButton.Visible := Value;
  FRefreshButton.Left := Width;
end; 
```

和测试程序：

```
procedure TMainForm.TestButtonClick(Sender: TObject);
begin
  DateRangePicker1.Label1Caption := 'Test: ';
  DateRangePicker1.RefreshButtonVisible := not DateRangePicker1.RefreshButtonVisible;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:41:25.873

您可以为 TDateRangePicker **创建一个属性，例如：**

```
property ShowRefresh:boolean read GetShowRefresh write SetShowRefresh

procedure TDateRangePicker.SetShowRefresh( Value : boolean);
begin
  btnRefresh.Visible := Value;
  // Force autosize after hidding Refresh button
  Autosize := True;
end; 
```

因此，您在绘图期间无事可做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T23:24:54.843

您在创建子控件时设置初始位置，然后在需要更新它们时更新位置（更改属性时，调整父组件大小时等）。您不得更改`Paint()`方法或`OnPaint`事件中的位置。

如果您使用的是现代版本的 Delphi，则应该使用子控件的`Align`、`Margins`和`AlignWithMargins`属性。这样，您只需在创建控件时定位一次，并让 VCL 完成所有艰苦的工作，在需要时自动重新定位它们。

# ruby - 通过 RVM 安装 MRI 时出现 curl 错误

> ID：10919654
> 
> 赞同：0
> 
> 时间：2012-06-06T18:04:18.007
> 
> 标签：ruby, curl, rvm

有人可以向我解释一下吗？RVM 安装正确，但是当我想通过 RVM 安装 MRI Ruby 时，出现此错误。

```
[user@p31]~% rvm install 1.9.3
Installing Ruby from source to: /path/to/user/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...

curl: (7) couldn't connect to host
There was an error, please check /path/to/user/.rvm/log//*.log. Next we'll try to fetch via http.
Trying ftp:// URL instead.

curl: (7) couldn't connect to host
There was an error, please check /path/to/user/.rvm/log//*.log
There has been an error while trying to fetch the source.  
Halting the installation.
There has been an error fetching the ruby interpreter. Halting the installation. 
```

我在 bash、zsh 和 csh 中遇到同样的错误。

我`extract.log`的只有一行。

```
tar xmzf /u/b/ogbuluij/.rvm/archives/yaml-0.1.4.tar.gz -C /u/b/ogbuluij/.rvm/src --no-same-owner 
```

# python - 调用 gtk.main 后执行一个函数

> ID：10919659
> 
> 赞同：3
> 
> 时间：2012-06-06T18:04:36.213
> 
> 标签：python, gtk, pygtk

这是我的困境：我有一个带有 pygtk 窗口的日志解析器。用户通过对话框打开文件后，我有一个进度条显示它们大约何时完成打开（因为这可能是一个漫长的过程）。我最近添加了一个选项，允许用户通过命令行指定文件。

我的问题是，因为我必须在调用`gtk.main()`. 因此，窗口，更重要的是，进度条直到这个冗长的加载完成后才会显示，给用户没有任何指示。

所以，我希望有一种方法可以在调用后执行函数`gtk.main()`，或者有人有另一种方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:04:20.777

不要在解析命令行参数后立即从命令行开始该过程，只需将命令行参数传递给您的应用程序类（或存储在变量中）并在您输入后处理它`gtk.main`。这样你就可以先设置你的 GUI。在开始这个过程之前，每次你增加进度条时，确保你让 Gtk 赶上使用类似的东西：

```
 while Gtk.events_pending():
        Gtk.main_iteration() 
```

# flash - html5视频聊天

> ID：10919661
> 
> 赞同：1
> 
> 时间：2012-06-06T18:04:36.250
> 
> 标签：flash, html, video, chat

是否有 ant 工具或者 html5 是否支持用户之间的实时视频流，就像我们可以在 flash 中一样。类似一对一视频聊天（Skype）的东西，无需为浏览器安装任何模块。

我可以用 html5 做到这一点还是我需要使用 flash。

还有其他解决方案吗？

我有一些 html5 解决方案，但都需要安装一些模块。我想做的是：一对一视频聊天，无需安装闪存或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T13:20:11.030

尝试使用 WebRTC，它非常适合 P2P 连接。我建议从[http://simplewebrtc.com/](http://simplewebrtc.com/)开始，看看它是否适合您，然后搜索合适的框架。

并非所有浏览器都支持，但可以在最新的 Chrome、Firefox 和 Opera 中使用。IE 和 Safari 尚不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:15:39.607

关于单向视频流：这是我在想同样的事情时遇到的另一篇文章。

[在 HTML5 中通过 RTSP 或 RTP 流式传输](https://stackoverflow.com/questions/1735933/streaming-via-rtsp-or-rtp-in-html5)

似乎 HTML5 不在乎，但浏览器支持不太可能。我想如果您可以同时将流转码为多种格式，则可以使其以一种方式工作

至于多向，我从来没有听说过这样的事情。这需要在客户端 PC 上设置流媒体服务器，直接的 HTML 不允许这样做。

# python - 平均列表python列

> ID：10919664
> 
> 赞同：36
> 
> 时间：2012-06-06T18:04:42.693
> 
> 标签：python

我有一个列表列表：类似于：

```
data = [[240, 240, 239],
        [250, 249, 237], 
        [242, 239, 237],
        [240, 234, 233]] 
```

我想平均一下

```
[average_column_1, average_column_2, average_column_3] 
```

我的一段代码不是很优雅。这是遍历列表的天真方式，将总和保存在单独的容器中，然后除以元素的数量。

我认为有一种pythonic方法可以做到这一点。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-06T18:07:24.180

纯 Python：

```
from __future__ import division
def mean(a):
    return sum(a) / len(a)
a = [[240, 240, 239],
     [250, 249, 237], 
     [242, 239, 237],
     [240, 234, 233]]
print map(mean, zip(*a)) 
```

印刷

```
[243.0, 240.5, 236.5] 
```

数字货币：

```
a = numpy.array([[240, 240, 239],
                 [250, 249, 237], 
                 [242, 239, 237],
                 [240, 234, 233]])
print numpy.mean(a, axis=0) 
```

蟒蛇 3：

```
from statistics import mean
a = [[240, 240, 239],
     [250, 249, 237], 
     [242, 239, 237],
     [240, 234, 233]]
print(*map(mean, zip(*a))) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-06T18:07:59.913

```
data = [[240, 240, 239],
        [250, 249, 237], 
        [242, 239, 237],
        [240, 234, 233]]
avg = [float(sum(col))/len(col) for col in zip(*data)]
# [243.0, 240.5, 236.5] 
```

这是有效的，因为`zip(*data)`会给你一个包含列分组的列表，`float()`只有在 Python 2.x 上才需要调用，除非使用整数除法，否则它使用整数除法`from __future__ import division`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-06T18:07:23.843

使用`zip()`，像这样：

```
averages = [sum(col) / float(len(col)) for col in zip(*data)] 
```

`zip()`接受多个可迭代参数，并返回这些可迭代对象的切片（作为元组），直到其中一个可迭代对象不能再返回任何内容。实际上，它执行转置操作，类似于矩阵。

```
>>> data = [[240, 240, 239],
...         [250, 249, 237], 
...         [242, 239, 237],
...         [240, 234, 233]]

>>> [list(col) for col in zip(*data)]
[[240, 250, 242, 240],
 [240, 249, 239, 234],
 [239, 237, 237, 233]] 
```

通过`sum()`对这些切片中的每一个进行执行，您可以有效地获得按列计算的总和。只需除以列的长度即可获得平均值。

旁白：在 Python 2.x 中，整数除法默认使用小数，这就是为什么`float()`调用将结果“提升”为浮点类型的原因。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-09-11T14:17:16.850

```
import numpy as np

data = [[240, 240, 239],
        [250, 249, 237], 
        [242, 239, 237],
        [240, 234, 233]]

np.mean(data, axis=0)
# array([ 243\. ,  240.5,  236.5]) 
```

似乎工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-23T14:14:40.990

您可以使用`map`和`zip`：

```
list(map(lambda x: sum(x)/len(x), zip(*data))) 
```

```
[243.0, 240.5, 236.5] 
```

# ruby-on-rails - 将 Google 图表导出为 PDF

> ID：10919669
> 
> 赞同：3
> 
> 时间：2012-06-06T18:05:05.167
> 
> 标签：ruby-on-rails, pdf, svg, google-visualization

我将这个 gem 用于我的 RoR 应用程序：[Google Visualr](http://googlevisualr.herokuapp.com/)在我的应用程序中生成一些图表。所以我认为我有这样的代码：

```
<div id='chart'></div>
<%= render_chart @chart_data, 'chart' %> 
```

这呈现了一个[谷歌图表](https://developers.google.com/chart/)，我不得不说它非常酷。但是，如何从图表制作 PDF？我使用的是旧的谷歌图像图表，将图像渲染为 pdf 非常容易，但是使用这个 SVG，我看不到该怎么做。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:05:27.927

我没有使用 Google Charts，但我使用的是 Highcharts。我在使用 2 个 gem 的组合将图表渲染为 pdf 方面取得了巨大成功：

wicked_pdf - [https://github.com/mileszs/wicked_pdf](https://github.com/mileszs/wicked_pdf) 和 wkhtmltopdf-binary - [https://github.com/zakird/wkhtmltopdf_binary_gem](https://github.com/zakird/wkhtmltopdf_binary_gem)

第二个是 wicked_pdf 的二进制依赖项。它使用起来非常简单，它可以以 pdf 格式呈现您的 Rails 视图。如果您打算在 heroku 上部署，请将第二个 gem 替换为：

wkhtmltopdf-heroku - [https://github.com/bradphelan/wkhtmltopdf-heroku](https://github.com/bradphelan/wkhtmltopdf-heroku)

# javascript - 为 Valums 上传者创建取消

> ID：10919675
> 
> 赞同：0
> 
> 时间：2012-06-06T18:05:48.107
> 
> 标签：javascript, jquery, file-upload

我希望向我的上传程序添加一个取消按钮，但要将其从 filuploader.js 模板中取出，因为我需要我的取消在带有进度条的新 div 中弹出并显示文件、进度等的详细信息

这里的任何帮助都会很棒，因为它是项目的最后一部分，我在这个阶段已经对上传器进行了大量定制

我需要知道如何设置取消按钮并允许它取消当前上传的文件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:08:28.047

您没有说明您正在使用哪个库，但由于您标记了 jQuery 和 FileUploader，我想您正在使用 Blueimp 的 jquery 文件上传器。

如果是这种情况，您可以查看[此处](http://blueimp.github.com/jQuery-File-Upload/)的演示页面，该页面已实现取消按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T12:15:16.823

只需`FALSE`从 onSubmit 方法返回：

```
var uploader = new qq.FileUploaderBasic({
    onSubmit: function(id, fileName){
        // return false to cancel upload
        return false;
    }
} 
```

# jquery - 类似 SoundCloud Stratus 的 jQuery 弹窗

> ID：10919678
> 
> 赞同：0
> 
> 时间：2012-06-06T18:06:05.560
> 
> 标签：jquery, popup, soundcloud

不好意思问这个！在音乐播放器上工作，需要对其实现某种弹出窗口功能，以便我的访问者在浏览所有页面时可以收听（比 ajaxing 页面进出更容易）。

我搜索了[Stratus](http://stratus.sc/)源代码，并确定特定行为是通过他们的 JS API 处理的，这对我来说太复杂了，我无法理解。

那么，关于以完全相同的方式进行操作的最简单方法的任何建议？IE 预先确定的窗口大小，仍然在站点本地等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:56:11.950

找到 SoundCloud 使用的插件：

[http://swip.codylindley.com/popupWindowDemo.html](http://swip.codylindley.com/popupWindowDemo.html)

# javascript - 与父元素相比，Javascript 获取范围

> ID：10919680
> 
> 赞同：1
> 
> 时间：2012-06-06T18:06:11.207
> 
> 标签：javascript, selection, range

我有一个函数返回一个包含两个元素的数组（在 IE 中不起作用）

*   用户在 div 中选择的内容的 html 代码（id=text）
*   选择范围

如果用户在文本 div 内选择一个简单的字符串，则范围返回正确的值，但是当用户在 div 的子元素（例如 div#text->p）内选择一个字符串时，范围的值与子元素相关，但是我希望他们与父母有关（div#text）

这里有一个 JsFiddle [http://jsfiddle.net/paglia_s/XKjr5/](http://jsfiddle.net/paglia_s/XKjr5/)：如果您在茶馆中选择一串普通文本或普通文本+粗体文本，您将获得正确的选择，而如果您选择粗体字（“ am") 你会得到错误的，因为范围与子元素有关。

有一种方法可以使范围始终与 div#text 相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:04:41.937

你可以使用我的[Rangy](https://code.google.com/p/rangy)库和它的新[TextRange 模块](https://code.google.com/p/rangy/wiki/TextRangeModule)，它提供了 Range 和 selection 的方法来转换容器元素的可见文本中的字符偏移量。例如：

```
var container = document.getElementById("text");
var sel = rangy.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
    var rangeOffsets = range.toCharacterRange(container);
} 
```

`rangeOffsets`有属性`start`并且`end`相对于里面的可见文本`container`。可见文本不一定与 jQuery`text()`方法返回的相同，因此您需要使用 Rangy 的`innerText()`实现。例子：

[http://jsfiddle.net/timdown/KGMnq/5/](http://jsfiddle.net/timdown/KGMnq/5/)

或者，如果您不想使用 Rangy，您可以调整我之前[在 Stack Overflow 上发布的](https://stackoverflow.com/questions/9841082/execcommand-inserthtml-breaks-stored-window-getselection/9841644#984164)函数。但是，这些依赖于 DOM Range 和 Selection API，因此不适用于 IE < 9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:53:46.633

如果您不想在这里使用图书馆，那么这是一种对我有用的方法。该函数返回相对于给定节点的 textContent 的光标偏移量（与子节点无关）。注意：当前光标位置必须位于给定节点或其任何子节点中。它不是跨浏览器兼容的（特别是不适用于 IE），但我认为修复它也没有太多工作：

```
function getCursorPositionInTextOf(element) {
    var range = document.createRange(),
        curRange = window.getSelection().getRangeAt(0);
    range.setStart(element, 0);
    range.setEnd(curRange.startContainer, curRange.startOffset);
    //Measure the length of the text from the start of the given element to the start of the current range (position of the cursor)
    return document.createElement("div").appendChild(range.cloneContents()).textContent.length;
} 
```

# android - Android - 我需要一个通用方法来自动截屏并保存到 SD 卡

> ID：10919683
> 
> 赞同：0
> 
> 时间：2012-06-06T18:06:45.360
> 
> 标签：android, view

**更新** 我添加了以下代码：

```
 v1.setDrawingCacheEnabled(true);
    v1.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
    v1.layout(0, 0, v1.getMeasuredWidth(), v1.getMeasuredHeight()); 
    v1.buildDrawingCache(true); 
```

现在我得到了截图，但它们不是我需要的。例如，我需要捕获的一个屏幕由一个包含 ImageView 和 ListView 的 LinearLayout 组成。在应用程序执行期间加载 Activity 时，列表显示 10 个项目。我得到的捕获只显示了顶部的图像视图和大约 1.5 个列表项。我能做些什么来准确捕捉屏幕显示的内容吗？（我会发布我得到的照片，但由于 IP 问题，我基本上必须编辑所有内容，并且发布一个填充的黑色矩形并不是超级有用）

**/更新**

我的目标是 Android 2.2，并尝试开发一个可以从任何活动中调用的类，以捕获当前屏幕并将图像存储在 SD 卡上（最好是 PNG）。我发现了类似的问题，但这里有一个重要区别：我无法创建新视图，也无法将此代码构建到每个 Activity 中（我可以在每个 Activity 中添加一个函数调用）。
所以我需要 1）获取当前 Activity 的视图（我正在使用 ((ViewGroup)findViewById(android.R.id.content)).getChildAt(0)) 和 2）将该视图传递给另一个函数类（定义如下）。我已经尝试将[这个](https://stackoverflow.com/a/5069354)和[这个](https://stackoverflow.com/a/4264989)结合起来，但是在 .getDrawingCache() 调用之后我得到的位图是空的，所以 .compress 炸弹。

这是代码：

```
public static void captureScreen(View v1){
                View v1= v;
        v1.setDrawingCacheEnabled(true);
        Bitmap bm = v1.getDrawingCache();
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        try {
            bm.compress(Bitmap.CompressFormat.PNG, 100, bytes);
        } catch (Exception e1) {
            Log.e("BM.Compress", e1.getMessage());
        }

        //create a new file name "test.jpg" in sdcard folder.
        File f = new File(Environment.getExternalStorageDirectory()
                                + File.separator + context.getPackageName().replace(".", File.separator) 
                                + File.separator + "screenshots" + File.separator +  "test.jpg");
        //Log.d("CF", context.getPackageName());
        try {
            f.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }
        //write the bytes in file
        try {
            FileOutputStream fo = new FileOutputStream(f);
            fo.write(bytes.toByteArray());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
} 
```

日志猫：

```
06-06 16:37:14.613: D/AndroidRuntime(284): Shutting down VM
06-06 16:37:14.613: W/dalvikvm(284): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-06 16:37:14.768: E/AndroidRuntime(284): FATAL EXCEPTION: main
06-06 16:37:14.768: E/AndroidRuntime(284): java.lang.RuntimeException: Unable to start activity ComponentInfo{pkgname.pkgnameExpo/pkgname.pkgnameExpo.SplashActivity}: java.lang.NullPointerException: println needs a message
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.os.Looper.loop(Looper.java:123)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-06 16:37:14.768: E/AndroidRuntime(284):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 16:37:14.768: E/AndroidRuntime(284):  at java.lang.reflect.Method.invoke(Method.java:521)
06-06 16:37:14.768: E/AndroidRuntime(284):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-06 16:37:14.768: E/AndroidRuntime(284):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-06 16:37:14.768: E/AndroidRuntime(284):  at dalvik.system.NativeStart.main(Native Method)
06-06 16:37:14.768: E/AndroidRuntime(284): Caused by: java.lang.NullPointerException: println needs a message
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.util.Log.println_native(Native Method)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.util.Log.e(Log.java:215)
06-06 16:37:14.768: E/AndroidRuntime(284):  at pkgname.pkgnameExpo.Classes.CFunctions.captureScreen(CFunctions.java:432)
06-06 16:37:14.768: E/AndroidRuntime(284):  at pkgname.pkgnameExpo.SplashActivity.onCreate(SplashActivity.java:38)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-06 16:37:14.768: E/AndroidRuntime(284):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-06 16:37:14.768: E/AndroidRuntime(284):  ... 11 more 
```

我只能从调试中得知，在调用 bm.compress 之前，bm 为空，而 v1 则不是。有任何想法吗？

**更新** 这是新的 LogCat，我认为它告诉我它无法创建文件？

```
06-06 22:13:55.975: I/System.out(12244): debugger has settled (1400)
06-06 22:13:58.351: E/BM.Compress(12244): nullfixnull
06-06 22:13:58.411: W/System.err(12244): java.io.IOException: No such file or directory
06-06 22:13:58.421: W/System.err(12244):    at java.io.File.createNewFileImpl(Native Method)
06-06 22:13:58.432: W/System.err(12244):    at java.io.File.createNewFile(File.java:1160)
06-06 22:13:58.432: W/System.err(12244):    at pkgname.pkgnameExpo.Classes.CFunctions.captureScreen(CFunctions.java:441)
06-06 22:13:58.441: W/System.err(12244):    at pkgname.pkgnameExpo.SplashActivity.onCreate(SplashActivity.java:38)
06-06 22:13:58.451: W/System.err(12244):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-06 22:13:58.451: W/System.err(12244):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-06 22:13:58.461: W/System.err(12244):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-06 22:13:58.461: W/System.err(12244):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-06 22:13:58.471: W/System.err(12244):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-06 22:13:58.471: W/System.err(12244):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 22:13:58.491: W/System.err(12244):    at android.os.Looper.loop(Looper.java:123)
06-06 22:13:58.491: W/System.err(12244):    at android.app.ActivityThread.main(ActivityThread.java:4627)
06-06 22:13:58.501: W/System.err(12244):    at java.lang.reflect.Method.invokeNative(Native Method)
06-06 22:13:58.511: W/System.err(12244):    at java.lang.reflect.Method.invoke(Method.java:521)
06-06 22:13:58.511: W/System.err(12244):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-06 22:13:58.522: W/System.err(12244):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-06 22:13:58.522: W/System.err(12244):    at dalvik.system.NativeStart.main(Native Method)
06-06 22:13:58.531: W/System.err(12244): java.io.FileNotFoundException: /mnt/sdcard/pkgname/pkgnameExpo/screenshots/test.jpg (No such file or directory)
06-06 22:13:58.541: W/System.err(12244):    at org.apache.harmony.luni.platform.OSFileSystem.openImpl(Native Method)
06-06 22:13:58.551: W/System.err(12244):    at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:152)
06-06 22:13:58.551: W/System.err(12244):    at java.io.FileOutputStream.<init>(FileOutputStream.java:97)
06-06 22:13:58.561: W/System.err(12244):    at java.io.FileOutputStream.<init>(FileOutputStream.java:69)
06-06 22:13:58.561: W/System.err(12244):    at pkgname.pkgnameExpo.Classes.CFunctions.captureScreen(CFunctions.java:447)
06-06 22:13:58.571: W/System.err(12244):    at pkgname.pkgnameExpo.SplashActivity.onCreate(SplashActivity.java:38)
06-06 22:13:58.571: W/System.err(12244):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-06 22:13:58.581: W/System.err(12244):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-06 22:13:58.581: W/System.err(12244):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-06 22:13:58.591: W/System.err(12244):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-06 22:13:58.591: W/System.err(12244):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-06 22:13:58.601: W/System.err(12244):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 22:13:58.601: W/System.err(12244):    at android.os.Looper.loop(Looper.java:123)
06-06 22:13:58.612: W/System.err(12244):    at android.app.ActivityThread.main(ActivityThread.java:4627)
06-06 22:13:58.612: W/System.err(12244):    at java.lang.reflect.Method.invokeNative(Native Method)
06-06 22:13:58.621: W/System.err(12244):    at java.lang.reflect.Method.invoke(Method.java:521)
06-06 22:13:58.631: W/System.err(12244):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-06 22:13:58.631: W/System.err(12244):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-06 22:13:58.641: W/System.err(12244):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:31:58.373

您似乎正在为您的文件构建一个相当深的路径名。如果所有这些目录都不存在，您需要在一个文件对象上调用 mkdirs()，该文件对象代表您要写入文件的目录。

# c++ - wstring.find_last_not_of() 将国际字符之后的所有内容视为空格？

> ID：10919686
> 
> 赞同：0
> 
> 时间：2012-06-06T18:07:02.420
> 
> 标签：c++, unicode, wstring

```
#include <iostream>
#include <windows.h>
using namespace std;

int main() {
  wstring my_str(L"El Niño     ");
  cout << my_str.find_last_not_of(L' ');
} 
```

此代码返回 6 但不应返回 7 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T18:08:47.803

指数从零开始。最后一个非空格字符的索引位于索引 6：

```
L"El Niño     "
        ^
  0123456 
```

# powershell - Powershell - 如何在 foreach 循环中显示下一个 $line

> ID：10919687
> 
> 赞同：0
> 
> 时间：2012-06-06T18:07:03.213
> 
> 标签：powershell, foreach, line

我目前正在解析 .cpp 文件中的字符串，并且需要一种使用 _T 语法显示多行字符串块的方法。为了排除一行 _T 字符串，我包含了一个 -notmatch ";" 参数来排除它们。这也排除了我需要的字符串块的最后一行。所以我需要显示下一个字符串，让最后一个字符串块用“;” 已经包括了。

我试过 $foreach.moveNext() | out-file C:/T_Strings.txt -append 但没有运气。

任何帮助将不胜感激。:)

```
 foreach ($line in $allLines)

    {

    $lineNumber++

    if ($line -match "^([0-9\s\._\)\(]+$_=<>%#);" -or $line -like "*#*" -or $line -like "*\\*" -or $line -like "*//*" -or $line -like "*.dll* *.exe*")
    {
        continue
    } 

    if ($line -notlike "*;*" -and $line -match "_T\(\""" ) # Multiple line strings
    {
        $line | out-file C:/T_Strings.txt -append
        $foreach.moveNext() | out-file C:/T_Strings.txt -append
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:12:23.577

在您的示例中，`$foreach`is 不是变量，因此您不能在其上调用方法。如果你想要一个迭代器，你需要创建一个：

```
$iter = $allLines.GetEnumerator()

do
{
    $iter.MoveNext()
    $line = $iter.Current
    if( -not $line )
    {
        break
    }
} while( $line ) 
```

不过，我建议您不要使用正则表达式。改为解析 C++ 文件。这是我能想到的最简单的解析*所有*_T 字符串的方法。它不处理：

*   注释掉 _T 字符串
*   _T 字符串中的 ")
*   文件末尾的 _T 字符串。

您必须自己添加这些检查。如果你只想要多行 _T 字符串，你也必须过滤掉单行字符串。

```
$inString = $false
$strings = @()
$currentString = $null

$file = $allLines -join "`n"
$chars = $file.ToCharArray()
for( $idx = 0; $idx < $chars.Length; ++$idx )
{
    $currChar = $chars[$idx]
    $nextChar = $chars[$idx + 1]
    $thirdChar = $chars[$idx + 2]
    $fourthChar = $chars[$idx + 3]

    # See if the current character is the start of a new _T token
    if( -not $inString -and $currChar -eq '_' -and $nextChar -eq 'T' -and $thirdChar -eq '(' -and $fourthChar -eq '"' )
    {
        $idx += 3
        $inString = $true
        continue
    }

    if( $inString )
    {
        if( $currChar -eq '"' -and $nextChar -eq ')' )
        {
            $inString = $false
            if( $currentString )
            {
                $strings += $currentString
            }
            $currentString = $null
        }
        else
        {
            $currentString += $currChar
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:20:36.140

想出执行此操作的语法：

```
$foreach.movenext()
$foreach.current | out-file C:/T_Strings.txt -append 
```

您需要移动到下一个，然后通过管道传输当前的 foreach 值。

# ruby-on-rails - ElasticSearch 和轮胎/Rails：对单个方面使用两个字段

> ID：10919693
> 
> 赞同：2
> 
> 时间：2012-06-06T18:07:34.180
> 
> 标签：ruby-on-rails, search, elasticsearch, tire

将 Elasticsearch 与 Rails 3 和轮胎宝石一起使用。

我在几个领域都有工作，但我现在有一个特殊要求，不确定是否可行。我的模型项目中有两个字段都存储相同的值：Country1 和 Country2

用户最多可以为一个项目存储两个国家/地区。两者的下拉菜单相同。两个字段都不是必需的。

我想要的是一个单一的方面，它“合并”来自 Country1 和 Country2 的值​​，并会智能地处理点击这些方面（即无论是在 1 还是在 2 中都会找到它）

到目前为止，这是我的模型：（注意 Country1/2 可以是多个单词）

```
class Project < ActiveRecord::Base
  mapping do
    indexes :id
    indexes :title, :boost => 100
    indexes :subtitle
    indexes :country1, :type => 'string', :index => 'not_analyzed'
    indexes :country2, :type => 'string', :index => 'not_analyzed'
  end
  def self.search(params)
    tire.search(load: true, page: params[:page], per_page: 10) do
    query do
      boolean do
        must { string params[:query], default_operator: "AND" } if params[:query].present?
        must { term :country1, params[:country] } if params[:country].present?
      end
    end
    sort { by :display_type, "desc" }
    facet "country" do
      terms :country1
    end

  end
end 
```

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:51:23.327

Tyre 中的此提交[https://github.com/karmi/tire/commit/730813f支持在“术语”方面聚合多个字段。](https://github.com/karmi/tire/commit/730813f)

界面是：

```
Tire.search('articles-test') do
  query { string 'foo' }
  # Pass fields as an array, not string
  facet('multi') { terms ['bar', 'baz'] }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:50:37.460

根据术语方面的弹性搜索文档[http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)，这应该是可能的：

> 多领域：
> 
> 术语 facet 可以针对多个字段执行，返回这些字段的聚合结果。例如：

```
{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "fields" : ["tag1", "tag2"],
                "size" : 10
            }
        }
    }
} 
```

您是否尝试为术语 facet 提供一系列字段`terms :country1, :country2`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T13:47:14.160

这似乎可行，但我需要对其进行更多测试： facet('country') { terms fields: [:country1, :country2]}

# python - 通过 Python 更改 Konsole 标题

> ID：10919696
> 
> 赞同：4
> 
> 时间：2012-06-06T18:07:43.307
> 
> 标签：python, console, kde, konsole

如何在 Python 中更改 Konsole 标题？我找到了这段代码：

```
>>> import sys
>>> sys.stdout.write("\x1b]2;test\x07") 
```

但它只适用于 Gnome 终端，而不适用于 Konsole（在 Kubuntu 上）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T18:20:18.590

我会`"\x1b]0;test\x07"`试一试（注意`0`而不是`2`）。

有一个关于 Konsole 未正确处理 xterm 转义序列[的开放错误；](https://bugs.kde.org/show_bug.cgi?id=231405)也许在修复之前它根本不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:19:53.967

```
dcop "$KONSOLE_DCOP_SESSION" renameSession "New title here" 
```

这应该有效。您还可以在没有 renameSession 部分的情况下运行该命令，以获取您可以更改的其他选项的列表。

# c# - WCF 错误：从管道读取错误：无法识别的错误 109 (0x6d)

> ID：10919703
> 
> 赞同：4
> 
> 时间：2012-06-06T18:08:28.193
> 
> 标签：c#, wcf

我有一个通过 TCP 通道工作的自托管 WCF 服务。

除了属于一个客户的所有 Win7 机器（这些在域上）外，这表现良好。

在这些机器上，尽管使用了 TCP 通道，但一些 .NET 内部结构似乎出了问题，我得到了一个与管道相关的错误：

> “从管道读取错误：无法识别的错误 109 (0x6d)。
> 
> System.ServiceModel.Channels.PipeConnection.OnAsyncReadComplete(Boolean haveResult, Int32 error, Int32 numBytes)。”

我曾尝试以域管理员身份运行该服务，以防权限是问题的一部分，但没有任何成功。

我在另一台 Win7（非域机器）、XP 和服务器操作系统上安装了相同的代码，没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:50:26.320

也许它与传输模式有关。

尝试将传输模式从缓冲更改为流式 -

[http://msdn.microsoft.com/en-us/library/ms731913.aspx](http://msdn.microsoft.com/en-us/library/ms731913.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-04T10:51:14.410

由于数据无效，可能会出现此问题。

我通过进入我的代码直到找到异常（通过创建 DTO 对象）来修复它。在我从数据库中删除条目后，该错误得到了修复。

# linux - 为什么 chmod 命令不能将 DIR 的内容识别为目录？

> ID：10919705
> 
> 赞同：0
> 
> 时间：2012-06-06T18:08:29.870
> 
> 标签：linux, makefile

我正在尝试编写一个生成文件以在执行时执行以下操作：

```
CMVC_VIEW = ../../.. 
TB_DIR = $(CMVC_VIEW)/tarball_images 
SMAC_TOOLS = $(TB_DIR)/smac_tools 
SMAC_BIN = $(SMAC_TOOLS)/bin 
DIR_LIST = $(TB_DIR) \
    $(SMAC_TOOLS) \
    $(SMAC_BIN)

install:
    rm -f *.o
    for DIR in $(DIR_LIST); do \
      echo $${DIR}; \
      chmod 2775 $${DIR}; \
    done 
```

但是，当 makefile 运行时，我收到一条错误消息，提示 chmod: missing operand after `2775`。我不明白为什么会发生这种情况，因为它`$${DIR}`应该包含与需要更改其访问权限的目录相对应的路径。

`$${DIR}`当我用静态目录路径替换时，这似乎有效。

出于此 makefile 的目的，假设该`DIR_LIST`宏被分配给由空格分隔的目录列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:03:26.763

You're getting confused by make variable references and shell variable references. Remember, make will interpret any string like `$(FOO)` as a reference to a *make* variable, lookup the variable with that name, and replace the reference with the value. Your shell-based `for` loop creates a *shell* variable called DIR, but since you have (had) just `$(DIR)`, make was trying (and failing) to find a make variable called DIR.

Your solution works because the double `$` prevents make from doing its own variable reference resolution, so the literal `$(DIR)` gets passed to the shell, which then does its own variable resolution! That works, of course, because the `for` loop created the DIR variable.

# gnuplot - 我可以在 gnuplot 标题中仅使用数据文件中的某些数字吗？

> ID：10919708
> 
> 赞同：1
> 
> 时间：2012-06-06T18:08:45.603
> 
> 标签：gnuplot

我有一个包含许多数据列的数据文件，前两行如下所示：

```
#time a1 b1 c1 d1 a2 b2 c2 d2 
1 2 3 4 5 6 7 8 9 
```

我想在图表上加上一个标题，如下所示：

```
a1=2, a2=6, b1=3, b2=7, c1=4, c2=8, d1=5, d2=9 
```

所以，基本上只是从第一行获取数据并添加一些文本。这可能吗？

谢谢麦吉尔森！这是脚本（第一部分。）

```
#filename = "a6_a.txt"

//defining variables called ofac and residual

unset multiplot
set term aqua enhanced font "Times-Roman,18" 

set lmargin 1
set bmargin 1
set tmargin 1
set rmargin 1
set multiplot
set size 0.8,0.37

set origin 0.1,0.08  #bottom
 set xlabel "time" offset 0,1  #bottom

 set ylabel "{/Symbol w}_i - {/Symbol w}_{i+1}"
 set yrange [-pi:pi]
 plot filename using 1:(residual($7 -$14)) ti "" pt 1 lc 2, \
            "" using 1:(residual($14-$21)) ti "" pt 1 lc 3, \
            "" using 1:(residual($21-$28)) ti "" pt 1 lc 4

set origin 0.1,0.36 #mid
 set format x ""    #mid, turn off x labeling
 set xlabel ""      #mid
 set ylabel "P_{i+1}/P_i" offset 2,0
 set yrange [*:*]
 plot filename using 1:(($10/ $3)**1.5) ti "P_2/P_1" pt 1 lc 2, \
            "" using 1:(($17/$10)**1.5) ti "P_3/P_2" pt 1 lc 3, \
            "" using 1:(($24/$17)**1.5) ti "P_4/P_3" pt 1 lc 4

set origin 0.1,0.64 #top
 set ylabel "semi-major axes"
 set yrange [*:*]
 plot filename using 1:($3):($4*$3) with errorbars ti "" pt 1 lc 1, \
   "" using 1:($10):($10*$11) with errorbars ti "" pt 1 lc 2, \
   "" using 1:($17):($17*$18) with errorbars ti "" pt 1 lc 3, \
   "" using 1:($24):($24*$25) with errorbars ti "" pt 1 lc 4

unset multiplot
unset format 
unset lmargin
unset bmargin
unset rmargin
unset tmargin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:24:37.970

你可能*只能*使用 gnuplot 来做到这一点（我认为），但这会很痛苦。最简单的解决方案是编写一个外部脚本，它将为您格式化标题 - 例如在 python 中（未经测试）：

```
#python script formatTitle.py
import sys
fname=sys.argv[1]
with open(fname,'r') as f:
    line1=f.readline().split()
    line2=f.readline().split()

pairs=sorted(zip(line1,line2)[1:])
print (", ".join("%s=%s"%(p[0],p[1]) for p in pairs)) 
```

然后在gnuplot中：

```
set title "`python formatTitle.py datafile.dat`" 
```

**编辑**

您上面的脚本有一些问题。首先，`//`不是 gnuplot 中的注释字符——所以这会立即引发某种语法错误。接下来，您将`filename`其用作字符串变量（这没关系），但您尚未在任何地方定义它。（脚本的第一行可能会起作用，除非它已被注释掉）。最后，我无法检查，因为我没有您的数据文件，但是您对`lmargin`etc ++`set size`的使用`set origin`（对我来说）有点难以跟踪。更聪明的人可能对此没有问题。但是，当我想明确对齐我的图时，我使用`margin`.

```
#make plots go from 0.1 to 0.9 on the screen (screen range is 0-1)
# (0,0) is the lower left corner, (1,1) is the upper right.
set lmargin at screen 0.1
set rmargin at screen 0.9 
```

然后对于每个子图，您可以执行以下操作：

```
NPLOTS=3
SCREENSIZE=0.8  #leave .1 for the top and bottom border
DY=SCREENSIZE/NPLOTS #height of each plot

#bottom
set tmargin at screen 0.9-2*DY
set bmargin at screen 0.9-3*DY
#other commands
plot ... 

#middle
set tmargin at screen 0.9-DY
set bmargin at screen 0.9-2*DY
#other commands ...
plot ...

#top
set tmargin at screen 0.9
set bmargin at screen 0.9-DY
#other commands ...
plot ... 
```

当然，您可以根据自己的喜好调整位置。

# tfs - TFS 构建和 msbuild

> ID：10919710
> 
> 赞同：0
> 
> 时间：2012-06-06T18:08:52.947
> 
> 标签：tfs, msbuild

我已经使用默认模板配置了 TFS 构建并根据计划运行我的构建。我还有一个单独的 msbuild 文件，需要与 TFS Build 一起运行，为此我创建了一个 InvokeProcess 活动，该活动使用 msbuild 命令执行批处理文件。

但是我得到异常 msbuild 不能被识别为内部或外部命令。这是正确的方法吗？

谢谢杰

# parameters - Wicket 在页面之间传递参数

> ID：10919715
> 
> 赞同：0
> 
> 时间：2012-06-06T18:09:30.380
> 
> 标签：parameters, wicket

我是检票口的新手。我有一个检票口应用程序类，其中登录页面作为主页。登录后，用户被带到用户选择要导航的系统（用户可以访问多个系统）的页面（页面 X）。

现在对于一个新的需求，客户端将获得具有特定系统 ID 的 URL。如果 URL 具有该参数（例如 ...?system=22），登录页面将获取该参数。登录后用户将被带到系统 (22) 屏幕，中间页面（第 X 页）将被跳过。为了实现这一点，我需要将参数从登录传递到下一页（第 X 页），该页面将自动选择系统并将用户带到系统（22）屏幕。

将参数从一页传递到另一页的最佳方法是什么。遵循正确的方法：

从成功登录后的第一页：

setResponsePage(NextPage.class, params);

参数将具有系统 ID。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:52:25.600

一般来说，是的。

并且在目标页面类中必须有一个接受`PageParameters`.

然而，在登录页面的特殊情况下，这不是一个好主意，因为有几个现成的解决方案。[比如这个](http://wicket.apache.org/learn/projects/authroles.html)。即使您不想使用它们，您仍然可以使用内置的[拦截页面](https://cwiki.apache.org/WICKET/using-intercept-pages.html)支持。

# orm - Doctrine2 注释问题

> ID：10919718
> 
> 赞同：1
> 
> 时间：2012-06-06T18:09:47.377
> 
> 标签：orm, doctrine-orm

我有一个使用 Doctrine 2.0 的项目，效果很好。我尝试升级到 2.2.2，但是我注意到了几个不同之处：

/** * Entities\Log * * @ORM\Table(name="log") * @ORM\Entity(repositoryClass="Repositories\LogRepository") */

是2.2.2中的显示方式。

但这就是它在 2.0.x 中的显示方式：

/** * 实体\日志 * * @Table(name="log") * @Entity(repositoryClass="Repositories\LogRepository") */

如果我将 2.2.2 转换为看起来像 2.0，一切都很好，它会加载，并且缓存中有对象的副本。但是，当我不理会它时，会出现此错误：

应用程序路径：/www/sites/diracianbilling-repository/trunk/application
**致命错误**：未捕获的异常 'Doctrine\ORM\Mapping\MappingException' 带有消息 'Class Entities\Log 不是有效实体或映射的超类。在 /usr/share/php/Doctrine/ORM/Mapping/MappingException.php:147 堆栈跟踪：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:01:53.577

我猜您是从数据库中生成实体的。

Doctrine 2.2.2 出于某种原因会生成这些本身无法解析的注释。这显然是一个错误。

作为一种解决方法，您可以将生成器配置为提供 2.0 样式的注释。使用[dminer 的解决方案](https://stackoverflow.com/questions/4065606/generate-annotated-doctrine2-entites-from-db-schema)并在生成之前添加以下行：

```
$generator->setAnnotationPrefix(""); 
```

# antlr - ANTLR - 语义谓词和 LL(1)

> ID：10919722
> 
> 赞同：1
> 
> 时间：2012-06-06T18:09:58.567
> 
> 标签：antlr, antlr3

我想在 ANTLR 中创建一个允许多重分配的 LL(1) 语法，例如：x = y = 5;

我认为语义谓词在这种情况下很有用，但以下规则不起作用:(

```
 tokens {
BECOMES = '='
}

    assignment_statement
            :   IDENTIFIER BECOMES expr
            ;

        expr
            :   (IDENTIFIER BECOMES)=> IDENTIFIER BECOMES expr
            |   expr_or
            ;

        IDENTIFIER
            :   LETTER (LETTER | DIGIT)*
            ; 
```

ANTLRWORKS 给出了 NoViableAltException。

你知道我做错了什么以及如何使这项工作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:35:05.340

当然，具有向前看 2 个标记的*句法*（不是*语义）谓词的语法不是 LL(1)。*

但是，您不需要谓词，只需执行以下操作：

```
grammar T;

options {
  output=AST;
}

tokens {
  BECOMES = '=';
}

assignment_statement
 : (IDENTIFIER BECOMES)+ expr ';'
 ;

expr
 : IDENTIFIER
 | NUMBER
 ;

IDENTIFIER
 : LETTER (LETTER | DIGIT)*
 ;

NUMBER
 : DIGIT+
 ;

fragment LETTER : 'a'..'z' | 'A'..'Z';
fragment DIGIT  : '0'..'9'; 
```

它将`"x=y=5;"`按如下方式解析输入：

![在此处输入图像描述](../Images/57327b9fe94b5922cc51046e4b04987f.png)

但会拒绝像`"x=2=3;"`.

此外，ANTLRWorks 的解释器不适用于任何类型的谓词：请改用 ANTLRWorks 的调试器。

# asp.net - 试图在后端获取一个字符串值并在前端使用它

> ID：10919724
> 
> 赞同：0
> 
> 时间：2012-06-06T18:10:08.513
> 
> 标签：asp.net, c#-4.0

我在后端有一个字符串值：

```
string header = "Name of Front page"; 
```

然后在asp.net前端我有：

```
<legend><a href="GenPrefixList.aspx">**I want to use the string "header" in here**</a></legend> 
```

我将字符串分配给 asp:Label 但像和图例这样的 html 标签不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:13:25.503

你需要两件事：

1.  字符串值的公开可见性。

2.  从页面调用此可见选项。

尽管公共财产被认为是最佳实践，但您可以通过几种不同的方式来做到这一点。

```
public string Header { get { return header; } } 
```

此时可以输出值：

.NET 4.0 及更高版本：

```
<%:Header%> 
```

在 .NET 4.0 之前：

```
<%=Header%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:14:21.680

在 C# 代码中：

```
string header = "Name of Front page";
link1.InnerHtml = header; 
```

在您的 aspx 页面中：

```
 <legend><strong><a runat="server" id="link1" href="GenPrefixList.aspx">Sample</a></strong></legend> 
```

使文本加粗：

**第一个选项：**

您可以使用

```
<strong></strong> 
```

例如。

```
<legend><strong><a runat="server" id="link1" href="GenPrefixList.aspx">Sample</a></strong></legend> 
```

标签

**第二种选择：** 您可以使用 CSS

```
style="font-weight:bold" 
```

例如。：

```
<legend><a runat="server" style="font-weight:bold" id="link1" href="GenPrefixList.aspx">Sample</a></legend> 
```

# php - 一组连接到多个数据库之一的 PHP 文件

> ID：10919727
> 
> 赞同：2
> 
> 时间：2012-06-06T18:10:22.663
> 
> 标签：php, mysql, database

我试图找出一种好的、安全的方法来让单个文件目录（我们的应用程序的一个实例）连接到一系列多种可能性中的单个数据库。我们过去做事的方式是每个客户都有一组文件和一个数据库，他们的一组文件将被配置为直接链接到他们的数据库。这行得通，但是很难在所有客户中保持应用程序的标准化版本；确保每个人都有最新的更新。

我正在考虑解决它的一种方法是拥有一个用于登录过程的独特的通用数据库。在该数据库中将有一个包含用户特定数据库名称的字段，然后将其存储在他们的会话中。一旦他们登录，应用程序就会查看会话以获取他们的数据库的名称，并直接连接到该数据库。

我很确定这种方法会奏效，我只是担心它可能会出现一些安全问题。关于如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:18:12.713

对于每个客户，您唯一需要知道的是数据库连接的用户、密码、dbname 和主机名。我只需将它们存储在一个配置文件中，每个客户一个，根据客户命名：

```
/path/to/configs/customer1.ini
/path/to/configs/customer2.ini
/path/to/configs/customer3.ini 
```

然后，您的应用程序会根据 VHOST 中设置的环境变量甚至 $_SERVER['HTTP_HOST'] 中的值来选择要加载的配置文件。

例如，您的 index.php 可能具有以下内容：

```
if (!preg_match('/pattern to ensure valid hostname/', $_SERVER['HTTP_HOST'])) {
    header('HTTP/1.1 403 Forbidden');
    exit;
}
$config = '/path/to/configs/' . $_SERVER['HTTP_HOST'] . '.ini';
if (!file_exists($config)) {
    header('HTTP/1.1 404 Not Found');
    exit;
}
require_once $config; 
```

然后创建：

```
/path/to/configs/customer.com.ini 
```

作为：

```
dbname = whatever
user = whatever
pass = whatever
dbhost = whatever 
```

（呃，对不起，你不会 require_once 一个 ini 文件，但你明白了......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:14:20.387

你用过 Wordpress MU 吗？他们巧妙而清晰地解决了这类问题。他们使用`oAuth`and `Cookies`，而不是将它们存储在`sessions`.

如果你不能使用`oAuth`，我想最好的选择是`cookies`。使用`domain cookies`与 Apache 类似的东西`Virtual Hosts`，您可以从 MySQL 获得所有身份验证详细信息，正如您所说，它引用了表并基于域/用户名，您可以使用该实例。

我们将此概念称为多租户应用程序。

# c - 从 C 文件中获取输入

> ID：10919729
> 
> 赞同：1
> 
> 时间：2012-06-06T18:10:31.310
> 
> 标签：c, file, input

我是编程和stackoverflow的新手，这就是为什么我有时可能会在我编写代码并想从文件中获取输入时遇到简单的问题`

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{
   int len1=0;
   FILE* p;
   char a;
   char b[10];
   p = fopen(argv[1],"r");
   while (1)
   {
      a = fgetc(p);

      if(a == ' ') break;
      else
      {
         len1++; 
         b[len1-1] = a;
      }
   }
   printf("%c\n", b0);
   return 0;
} 
```

它给出了分段错误，原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:15:04.170

你有一个缓冲区溢出。如果您`while`在阅读十个字符后将循环更改为停止，即使尚未达到*空间，您也应该可以。*

此外，您将一个字符传递`b[len1]`到 into `printf`，并将其*解释*为指针。无论如何，这都会发生段错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{
   int len1=0;
   FILE* p;
   char a;
   char b[10+1]; // <<== need one more byte for the terminator
   if (argc != 2)
   {
      fprintf(stderr, "Need to supply a filename\n");
      return (-1);
   }
   p = fopen(argv[1],"r");
   if (p == NULL)
   {
      fprintf(stderr, "Cannot open file %s\n", argv[1]);
      return(-2);
   }
   while (len1 < 10) // <<== avoid buffer overruns
   {
      a = fgetc(p);

      if(a == ' ') break;
      else
      {
         len1++; 
         b[len1-1] = a;
      }
   }
   b[len1] = '\0'; // <<== Don't forget to zero-terminate
   printf("%s\n", b); // <<== Pass the buffer, not the last character from it
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:20:22.027

您的程序中有两个逻辑错误 ::
1.`while(1)`您有一个非终止循环，它将导致 stackoverflow。
2.`char b[10]`在这里， b 是一个大小为 10 的 char 数组，即 ie `b[0] to b[9]`，但在您的程序`len1++`中，每次迭代都在执行，这将访问超出 的内存`b[9]`。

要克服这些问题，请使用`while(len1<10)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:14:38.000

而不是`while (1)`，您应该根据表 b 的大小**测试循环索引**（所以 10）

你到底想做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:16:59.653

你有两个问题

1.  当您读取文件并且前 10 个字符不是空格时会发生什么？数组 b 将被耗尽。
2.  `printf`正在尝试打印一个字符串。`b[len1]`是一个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T18:12:41.347

`char b[10]`只有10个元素。`len1`无限循环的每次迭代都会递增。这很快就变成了 > 10。最终，在超过 10 的某个地方，您写入了一些您也无权访问的内存。因此出现了段错误。

# gcc - 交叉编译asm错误

> ID：10919731
> 
> 赞同：1
> 
> 时间：2012-06-06T18:10:44.957
> 
> 标签：gcc, arm, cross-compiling

我正在使用 arm-linux-gnueabi-gcc 编译此函数，但它给了我一个错误 `expected string literal before ‘)’ token`

```
void flush_icache(void)
{
  u32 tmp = 0;
  asm volatile(" mcr p15, 0, %0, c7, c5, 0\n\t": : "r"(tmp) : );
} 
```

我无法删除。如果有人有任何想法，请解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:21:03.153

也许在“r”和“（tmp”）之间放一个空格？

这是有关 GCC“扩展 ASM 命令”的文档：

*   [http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Extended-Asm](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Extended-Asm)

*   [http://gcc.gnu.org/onlinedocs/gcc/Explicit-Reg-Vars.html#Explicit-Reg-Vars](http://gcc.gnu.org/onlinedocs/gcc/Explicit-Reg-Vars.html#Explicit-Reg-Vars)

此链接也可能有帮助：

*   [http://www.ethernut.de/en/documents/arm-inline-asm.html](http://www.ethernut.de/en/documents/arm-inline-asm.html)

============= 附录=============

另一个建议：

```
void flush_icache(void)
{
  u32 tmp = 0;
  asm volatile(
    " mcr p15, 0, %0, c7, c5, 0\n\t" 
    :             /* no output registers */
    : "r"(tmp)    /* input */
  );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T05:51:20.113

正如我所料，使用 crosstool-chain 时出现了问题。所以以前我使用的是 codesourcery(2008) 提供的旧版本，然后我转移到 2010 工具链。
这可能是改变 ARM 架构的问题。

# java - Struts 2 Validation清除url参数

> ID：10919732
> 
> 赞同：0
> 
> 时间：2012-06-06T18:10:45.007
> 
> 标签：java, struts2

如果我在`http://foo.bar?fooId=123`并且验证失败（动作类中的验证方法）我会被重定向到`http://foo.bar`没有`fooId`参数。这会导致表单字段丢失其值。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:13:53.203

您正在使用`GET`发送参数，验证失败的服务器正在向您发送相同的输入页面，而不是`GET`使用`POST`，并且一切正常。

您的配置将如下所示：

`<result name="input">inputPage.jsp</result>`它会丢弃您提交的任何参数。

另请注意，如果操作将导致任何更新，则不应调用[HTML 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) ，而应使用。`GET``POST`

# ruby-on-rails - Rails 布尔值和回调默认为 false

> ID：10919744
> 
> 赞同：0
> 
> 时间：2012-06-06T18:12:24.590
> 
> 标签：ruby-on-rails, callback, boolean

更新：如果使用 after_validation 回调，它会按需要工作（例如，`false`值是持久的）。仍然想知道为什么会这样，但我想这已经解决了我的目的:)

对于布尔字段，我希望模型中的回调将默认值设置为`false`而不是`nil`.

目前，当我创建新记录时，它最初将值显示为`false`，但随后将其显示为`nil`。

想知道这里发生了什么，以及是否可以通过回调实现所需的行为。

这是在模型中：

```
 after_save :default_is_forsale

  def default_is_forsale
    self.not_for_sale = false if self.not_for_sale.nil?
  end 
```

这是 rails 控制台输出（省略了不相关的位）：

```
1.9.3p125 :001 > Item.create(name: "thing 4")
   (0.1ms)  begin transaction
  SQL (6.4ms)  INSERT INTO items [...]
   (190.8ms)  commit transaction
 => #<Item id: 20, name: "thing 4", not_for_sale: false> 
```

酷，创建了默认值为 的新记录`false`。但是当我再次检查时：

```
1.9.3p125 :002 > Item.last
  Item Load (0.3ms)  SELECT [...]
 => #<Item id: 20, name: "thing 4", not_for_sale: nil> 
```

很奇怪，现在的值为`nil`。

但是，如果我创建一个新记录并将值显式设置为`false`，它的行为与我预期的一样：

```
1.9.3p125 :003 > Item.create(name: "more thing", not_for_sale: false)
   (0.1ms)  begin transaction
  SQL (0.7ms)  INSERT INTO items [...]
   (225.2ms)  commit transaction
 => #<Item id: 21, name: "more thing", not_for_sale: false> 
```

检索时，记录仍显示其布尔值`false`

```
1.9.3p125 :004 > Item.last
  Item Load (0.3ms)  SELECT [...]
=> #<Item id: 21, name: "more thing", not_for_sale: false> 
```

顺便说一句，我在其他地方读到，通过数据库迁移可以实现所需的结果，但我是 Rails 新手，想通过模型来完成它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:16:51.447

您希望在`before_save`回调中使用它。`after_save`毫不奇怪，在记录已经保存*后调用回调。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:27:16.307

默认情况下，更改您的迁移以将此布尔值设置为 false。如果有代码我会告诉你的。

我刚刚读到你是'rails新手'，但这没关系。您无需在模型中执行此操作，除非您希望该记录为真。

# ruby-on-rails - 使用 gem Tire 和 elasticsearch 进行高级搜索

> ID：10919751
> 
> 赞同：1
> 
> 时间：2012-06-06T18:13:00.847
> 
> 标签：ruby-on-rails, ruby, gem, elasticsearch, tire

我正在尝试使用宝石轮胎在我的应用程序中进行搜索。我有表格区域、城市、酒店、房间和房间信息。

我需要的是通过查询和其他文本字段（如 date_from、date_to 和房间数）查找酒店。在模型中，我有计算酒店是否有空闲房间并发送布尔值的方法。如何使用此布尔方法过滤查询？

谢谢

在hotel.html.erb

```
<%= form_tag search_hotels_path, :method => 'post' do %>
  <%= label_tag :query %>
  <%= text_field_tag :query, params[:query] %>
  <%= label_tag 'From' %>
  <%= text_field_tag :date_f, params[:date_from] %>
  <%= label_tag 'To' %>
  <%= text_field_tag :date_to, params[:date_to] %>
  <%= label_tag 'Rooms' %>
  <%= text_field_tag :rooms, params[:rooms] %>
  <%= submit_tag :search %>
<% end %> 
```

在酒店.rb

```
class Hotel < ActiveRecord::Base
include Tire::Model::Search
include Tire::Model::Callbacks

belongs_to :city
belongs_to :area
has_one :area, :through => :city
has_many :rooms, :dependent => :delete_all

def search(params)

        tire.search do
            query do
                boolean do  
                    must { string params[:query] } if params[:query].present?
                    must { term rooms_available params, true}
                end
            end 
        end

end

self.include_root_in_json = false
def to_indexed_json
    to_json(methods: [:area_name,:city_name])
end

def area_name
    city.area.name
end
def city_name
    city.name
end

def rooms_available params
    exit
    begin_date = params[:date_from].to_date
    end_date = params[:date_to].to_date
    number_of_rooms = params[:rooms]

    rooms.each do |room|
        if room.available(begin_date, end_date, number_of_rooms)
            return true
        end
    end
    return false
end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:36:39.230

把它放在 to_json 方法中：

```
def to_json
  {
    :area_name => self.area_name, 
    :city_name => self.city_name,
    :rooms_available => self.rooms_available
   }.to_json
end 
```

然后：

```
def search(params)

    tire.search do
        query do
            boolean do  
                must { string params[:query] } if params[:query].present?
                must { term rooms_available, true}
            end
        end 
    end

end 
```

但是在这种情况下，最好将 rooms_available 放在过滤器中，因为这是必须的，而且您不关心对该子句的评分。

```
def search(params)

    tire.search do
        query do
            boolean do  
                must { string params[:query] } if params[:query].present?
            end
        end 
        filter do
            boolean do  
               must { term rooms_available, true}
            end
        end
    end

end 
```

希望这可以帮助 ：）

# maven - mojo-executor 对插件依赖项的支持？

> ID：10919753
> 
> 赞同：1
> 
> 时间：2012-06-06T18:13:06.330
> 
> 标签：maven, maven-plugin

我正在使用[mojo-executor](https://github.com/TimMoore/mojo-executor)库从另一个 Maven 插件中调用许多 Maven 插件。

但是，当我调用它们时，我找不到任何方法来指定对插件的依赖关系。这是一个问题`maven-assembly-plugin`，我需要添加一个程序集描述符文件作为依赖项。在另一个级别添加依赖项似乎不会将描述符文件放到插件的类路径中。

知道这是否可能，或者是否可以改进 mojo-executor 以提供此功能？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:38:58.143

mojo-executor 将在没有任何类路径的环境中执行 mojo。您需要手动添加依赖项。

```
Dependency dep = new Dependency();  
dep.setGroupId("groupId");
dep.setArtifactId("artifactId");
dep.setVersion("0.0.1-SNAPSHOT");

Plugin assembly = MojoExecutor.plugin(
   "org.apache.maven.plugins", 
   "maven-assembly-plugin", 
   "2.3");

assembly.addDependency(dep)

MojoExecutor.executeMojo(assembly,
   MojoExecutor.goal("single"),
   ...
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:06:08.783

您知道也可以为插件定义依赖项：

```
 <plugin>
    <groupId>com.soebes.maven.plugins.mlv</groupId>
    <artifactId>maven-license-verifier-plugin</artifactId>
    <version>0.4</version>
    <dependencies>
      <dependency>
        <groupId>com.company.licenses</groupId>
        <artifactId>allprojects</artifactId>
        <version>1.0</version>
      </dependency
    </dependencies>
    <configuration>
      <!-- Optional you can put your configurations here -->
    </configuration>
  </plugin> 
```

这会将依赖项放在插件的类路径上。那可能会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T14:11:46.743

也许您需要在我们的 Maven 插件目标类的 @Mojo 注释中放置一个 requiresDependencyResolution 参数。像这样的东西：

```
@Mojo(name = "your-goal", defaultPhase = LifecyclePhase.xxx,
  requiresDependencyResolution = ResolutionScope.COMPILE_PLUS_RUNTIME
)
public class YourGoalMojo... 
```

这对于您的 Maven 插件在执行之前/执行之前解析和可用的依赖项是必要的。mojo-executor 项目的 README 页面在其基于 maven-dependency-plugin 的示例之后提到了这一点：

*   [https://github.com/TimMoore/mojo-executor/blob/master/README.md](https://github.com/TimMoore/mojo-executor/blob/master/README.md)

可以在此处找到有关 @Mojo 注释参数化的更多信息：

*   [http://maven.apache.org/developers/mojo-api-specification.html](http://maven.apache.org/developers/mojo-api-specification.html)

# java - Corba，在两台机器上运行 Hello World

> ID：10919754
> 
> 赞同：1
> 
> 时间：2012-06-06T18:13:11.137
> 
> 标签：java, corba, idl

我正在尝试在两台机器上运行一个简单的客户端-服务器程序，

我读了这个[页面](http://docs.oracle.com/javase/1.5.0/docs/guide/idl/tutorial/jidl2machines.html)，但我得到了这个错误：

```
Jun 04, 2012 6:43:10 PM com.sun.corba.se.impl.transport.SocketOrChannelConnectio
nImpl <init>
WARNING: "IOP00410201: (COMM_FAILURE) Connection failure: socketType: IIOP_CLEAR
_TEXT; hostname: xx.xx.xx.xx; port: 1050"
org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No
        at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(Unknown Source)
        at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(Unknown Source)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(Unknown Source)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(Unknown Source)
        at com.sun.corba.se.impl.transport.SocketOrChannelContactInfoImpl.createConnection(Unknown Source)
        at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(Unknown Source)
        at com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.request(Unknown Source)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.invoke(Unknown Source)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(Unknown Source)
        at HelloClient.main(HelloClient.java:17)
Caused by: java.net.ConnectException: Connection refused: connect
        at sun.nio.ch.Net.connect0(Native Method)
        at sun.nio.ch.Net.connect(Unknown Source)
        at sun.nio.ch.Net.connect(Unknown Source)
        at sun.nio.ch.SocketChannelImpl.connect(Unknown Source)
        at java.nio.channels.SocketChannel.open(Unknown Source)
        at com.sun.corba.se.impl.transport.DefaultSocketFactoryImpl.createSocket(Unknown Source)
        ... 12 more

ERROR : org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No

org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No
        at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(Unknown Source)
        at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(Unknown Source)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(Unknown Source)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(Unknown Source)
        at com.sun.corba.se.impl.transport.SocketOrChannelContactInfoImpl.createConnection(Unknown Source)
        at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(Unknown Source)
        at com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.request(Unknown Source)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.invoke(Unknown Source)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown Source)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(Unknown Source)
        at HelloClient.main(HelloClient.java:17)
Caused by: java.net.ConnectException: Connection refused: connect
        at sun.nio.ch.Net.connect0(Native Method)
        at sun.nio.ch.Net.connect(Unknown Source)
        at sun.nio.ch.Net.connect(Unknown Source)
        at sun.nio.ch.SocketChannelImpl.connect(Unknown Source)
        at java.nio.channels.SocketChannel.open(Unknown Source)
        at com.sun.corba.se.impl.transport.DefaultSocketFactoryImpl.createSocket(Unknown Source)
        ... 12 more 
```

您能否让我知道如何使用 Corba 和 java 在互联网上的两台机器上运行像“Hello Wrold”这样的简单程序？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:27:45.847

> 我如何使用 Corba 和 java 在互联网上的两台机器上运行像“Hello Wrold”这样的简单程序？

我认为**互联网**是这里的关键。您需要确保：

1.  客户端可以通过您指定的**IP 地址**访问服务器（即 IP 地址是公共的，或者在任何相关防火墙上设置了适当的伪装规则）；
2.  有适当的防火墙和/或端口转发规则允许客户端访问服务器上的**端口 1050**。

我建议首先让客户端和服务器在同一子网上运行时工作，然后才继续进行分布式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T18:57:47.010

1.  Run orb `start orbd -ORBInitialPort 1050`
2.  Run your class client and server with: `-ORBInitialPort 1050 -ORBInitialHost localhost`

or alternative: 1\. Run server: tnameserv -ORBInitialPort 1050

2.  Run client: java YourServer -ORBInitialPort 1050 java YourClient -ORBInitialHost 127.0.0.1 -ORBInitialPort 1050

[a similar problem](https://stackoverflow.com/questions/24218532/corba-orbd-error/37576507#37576507)

# android - 无论如何要使菜单项变小...？

> ID：10919755
> 
> 赞同：-3
> 
> 时间：2012-06-06T18:13:21.190
> 
> 标签：android

我想知道是否有`to decrease the size of menu items displayed`来自 xml 或通过编码的方式......？

另一个问题是我可以在屏幕底部绘制 tabwidget。我的意思是我希望他们在底部我可以这样做...？

另一个问题是`two column list view`android中有没有。现在我知道有一个`list view with two item`，但他们互相关注。一个在另一个下方，但有没有`listview`像表格一样的列...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:45:29.607

要回答你的第三个问题，你可以在这里找到很好的教程：

```
http://www.technotalkative.com/android-multi-column-listview/ 
```

要回答您的第二个问题，您可以执行以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
<TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>
</TabHost> 
```

# java - Jetty - 相对路径在开发中起作用，而不是在部署中

> ID：10919756
> 
> 赞同：1
> 
> 时间：2012-06-06T18:13:23.560
> 
> 标签：java, deployment, jetty, relative-path

我创建了一个在 Jetty 上运行 Java 后端的 GWT 程序。我使用相对路径来访问 sqlite 数据库。这在 Eclipse 中运行良好。

当我将程序推送到 Web 服务器时，这种方法不再起作用，因为 Jetty 使用不同的工作目录。我检查了`System.getProperty("user.dir")`。

有三种可能的解决方案：

1.  使用绝对路径。

    *   不过似乎不是一个好的解决方案。不同的服务器可能有不同的目录结构。
2.  告诉码头使用正确的目录

    *   听起来像是一个很好的解决方案，但我还没有真正找到如何实现这一点。谁能给我一个提示，指出文档的正确位置？我找不到它。
3.  用tomcat/其他东西交换码头

    *   可能的解决方案，但我更喜欢解决方案 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:06:20.497

我建议将 SqlLite 作为数据源连接访问，而不是通过文件路径访问。以下链接说明了如何执行此操作。

[http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/3f5369b0aea1a265](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/3f5369b0aea1a265)

# spring-mvc - Spring MVC，绑定，验证后的多选选项

> ID：10919757
> 
> 赞同：0
> 
> 时间：2012-06-06T18:13:23.687
> 
> 标签：spring-mvc, validation

提前感谢您的帮助。

我有一个正在使用 JSR 303 验证的表单。验证失败后，控制器返回表单，显示验证错误，并使用原始值呈现表单。这适用于除多选元素之外的所有类型的表单元素。

命令对象：

```
public class TaskOrder implements Serializable {
   private static final long serialVersionUID = 1L;

   ...

   @XmlTransient
   @ManyToMany
   @<OtherJPAAnnotations...>
   private List<Contractor> subcontractors;

   ...

} 
```

承包商等级：

```
public class Contractor implements Serializable {
   private static final long serialVersionUID = 1L;

   @Id
   @GeneratedValue(strategy=GenerationType.IDENTITY)
   @<OtherJPAAnnotations...>
   private Integer id;

   @<OtherJPAAnnotations...>
   private String name;

} 
```

控制器：

```
@RequestMapping(value="processingPath", method=RequestMethod.POST)
public String createNewTaskOrder(@Valid @ModelAttribute TaskOrder taskOrder,
   BindingResult result,
   Model model) {

   ...

   if (!result.hasErrors()) {

      //No binding errors, lots of processing...

   else {

      model.addAllAttributes(result.getModel());
      model.addAttribute(taskOrder);

      model.addAttribute("subs", myDAOInstance.getSubs());

      return this.setupNewTaskOrder(model);

   }

}

@RequestMapping("getFormPath")
public String setupNewTaskOrder(Model model) {

   if (!model.containsAttribute("taskOrder")) {

      TaskOrder taskOrder = new TaskOrder();
      taskOrder.setId(0);
      model.addAttribute(taskOrder);

   }

   return "_n/admin/taskOrder/new";

} 
```

表格：

```
<form:form commandName="taskOrder" action="processPath">

   ...

   <form:select path="subcontractors">
      <form:options items="${subs}" itemValue="id" itemLabel="name"/>
   </form:select>

   ...

</form> 
```

当我使用相同的表单打开现有的“TaskOrder”时，会在“分包商”多选中选择这些值。

但是，尝试添加新的“TaskOrder”时，当它从验证返回时，未选择值。我知道选定的值被附加到模型并返回，但只是没有在 select 元素中被选中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:32:21.773

谢谢您的帮助。碧珠……你说得对！

对于那些可能偶然发现此问题的人，我将此处描述的“EqualsUtil”类添加到我的项目中： [http ://www.javapractices.com/topic/TopicAction.do?Id=17](http://www.javapractices.com/topic/TopicAction.do?Id=17)

然后将以下方法添加到我的 Contractor 类中：

```
@Override
public boolean equals(Object o) {

   if (this == o) return true;
   if (!(o instanceof Contractor)) return false;

   Contractor c = (Contractor) o;

   //Here I ignore the other properties since "id" and "name" are what
   //I'm primarily concerned with...
   return EqualsUtil.areEqual(this.name, c.name) &&
        EqualsUtil.areEqual(this.id, c.id);

} 
```

# asp.net - WCF 未绑定到 url

> ID：10919764
> 
> 赞同：0
> 
> 时间：2012-06-06T18:13:51.933
> 
> 标签：asp.net, wcf, iis, rest

我有一个我刚刚编写的小程序，它使用以下 uri 模板。

```
[UriTemplate = "xml/{user_id}/{content_id}/{time}")] 
```

在我的本地开发机器上

```
/blahblah.svc/xml/1/1/1 
```

在我的远程机器上

/myapp/blahblah.svc/xml/1/1/1

可以，但是当我尝试将其部署到远程计算机时，我收到 500 错误，当我查看 500 错误时，服务器似乎正在尝试在 blahblah.svc/xml/ 中查找 web.config。

在 blahblah.svc 之后，它似乎没有正确绑定到 url。

在我的 web.config 中，我有：-

```
<system.serviceModel>
     <services>
  <service name="JASWebservices.JCPSRest" behaviorConfiguration="ServiceBehaviour">
    <endpoint address ="" binding="webHttpBinding" contract="JASWebservices.IJCPSRest" behaviorConfiguration="web">
    </endpoint>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
   </system.serviceModel> 
```

因此，如果我在本地（在我的开发机器上）访问它，它就可以工作。如果我在 prod 服务器上远程访问它，它需要 500 秒。目前我能看到的唯一区别是在开头包含 /myapp/，因为 prod 服务器上有多个站点，每个站点都有自己的 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:59:19.140

尝试添加这一行

```
<endpoint name="mexHttpBinding" address="mex" binding="mexHttpBinding" contract="IMetadataExchange" /> 
```

后

```
<endpoint address ="" binding="webHttpBinding" contract="JASWebservices.IJCPSRest" behaviorConfiguration="web">
</endpoint> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:43:18.987

这是一个奇怪的问题，所以我在使用 UriTemplate + ServiceContract 将 Microsoft WCF 用于 REST 实现时发现了一个相当缺乏的问题。

如果您使用 IIS 并将其托管在 UNC 路径（即 NFC 或 SMB 或 CIFS 系统）上，它将无法正常工作。您必须将服务移动到本地目录才能运行。

我在使用 Windows 7 和 Windows Server 2008 R2 的两个不同的机器（一个 SMB 和一个 NFS）上进行了尝试，并且两者都出现了相同的问题。

# jquery - 如何在jquery mobile中将标签放在输入元素的顶部

> ID：10919766
> 
> 赞同：1
> 
> 时间：2012-06-06T18:13:55.090
> 
> 标签：jquery, css, html

是否有一种简单的“正确”方式将标签从输入元素的侧面移动到顶部？如果我在标签中禁用它，它会进入顶部，但这似乎是个骗局。

![盒子](../Images/95abc6f0d230e92ad4cfefccf1e5a090.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:57:00.310

如果您的标签不在 a 中，`.ui-field-contain`则它的样式`block`与`inline-block`.

# php - 通过 PHP 清除 cookie

> ID：10919768
> 
> 赞同：-4
> 
> 时间：2012-06-06T18:14:05.023
> 
> 标签：php, cookies

如何通过 php 清除 cookie？

我需要一个 php 代码来清除 cookie，然后刷新页面。

我需要一些链接`<a href=""></a>`，当我单击它时，cookie 被清除并刷新页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:16:30.860

[来自 PHP 手册](http://us2.php.net/manual/en/function.setcookie.php)（在来这里寻求帮助*之前*你应该阅读它）

**Example #2 setcookie() 删除示例**

删除 cookie 时，您应确保过期日期已过，以触发浏览器中的删除机制。示例遵循如何删除上一个示例中发送的 cookie：

```
<?php
// set the expiration date to one hour ago
setcookie ("TestCookie", "", time() - 3600);
setcookie ("TestCookie", "", time() - 3600, "/~rasmus/", "example.com", 1);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:39:07.643

您将只能删除设置了过期时间的 cookie。如果您将它们的过期时间设置为 0，这意味着“cookie 将在会话结束时（浏览器关闭时）过期”，并且浏览器将保留它们，尽管接收到删除标头。（无论如何，Firefox 13）。

见[php setcookie()](http://www.php.net/manual/en/function.setcookie.php)

# php - 使用 curl 发布和获取参数

> ID：10919770
> 
> 赞同：0
> 
> 时间：2012-06-06T18:14:09.437
> 
> 标签：php, curl

我正在尝试用 curl 替换使用 url（例如 .../?id=123）的传递参数。如果无法使用 curl，请忽略。

我试着在网上寻找例子，但我只能看到如何发布数据但没有得到它。我在其中一个网站上得到了这个，但我失去了它的参考。

```
 $post_data['ID'] = '1';

                        //traverse array and prepare data for posting (key1=value1)
                        foreach ( $post_data as $key => $value) {
                        $post_items[] = $key . '=' . $value;
                        }

                        //create the final string to be posted using implode()
                        $post_string = implode ('&', $post_items);

                        //create cURL connection
                        $curl_connection = curl_init('posturl.php');

                        //set options
                        curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
                        curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
                        curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
                        curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
                        curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

                        //set data to be posted
                        curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

                        //perform our request8
                        $curlresult = curl_exec($curl_connection);

                        //show information regarding the request
                        // print_r(curl_getinfo($curl_connection));
                        echo curl_getinfo($ch, CURLINFO_HTTP_CODE);

                        //close the connection
                        curl_close($curl_connection); 
```

我如何从 posturl.php 获取参数

有没有人可以发布和使用 curl 的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:20:27.000

尝试更换

```
//create cURL connection
$curl_connection = curl_init('posturl.php'); 
```

和

```
//create cURL connection
$curl_connection = curl_init("posturl.php?$post_string"); 
```

并发表评论

```
//curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:17:51.667

`cURL`主要用于从`HTTP POST`方法中检索呈现的 HTML。而且你做得非常好。现在你到底想检索什么？参数来自`posturl.php`? 然后最后您可以正确使用此代码：

```
foreach($post_items as $parameter => $value)
    echo "The value of $parameter is $value.\n"; 
```

我不确定我是否理解了这个问题，但这是我可以帮助你的方式。希望这可以帮助。

# wordpress - WordPress 自定义帖子类型单页（评论）

> ID：10919772
> 
> 赞同：0
> 
> 时间：2012-06-06T18:14:15.580
> 
> 标签：wordpress, comments, custom-post-type

我创建了一个自定义帖子类型和一个可以正常工作的单页模板。但是我在为它启用单个页面上的评论时遇到了问题。

这是我的功能：

```
 add_action('init', 'vblog'); 
    function vblog() {
    register_post_type('vblog', array(
    'labels' => array(
            'name' => __( 'VTV' ),
            'singular_name' => __( 'VTV' ),
            'add_new' => 'Add New VBlog',
            'add_new_item' => 'Add New VBlog',
            'edit' => 'Edit VBlog',
            'edit_item' => 'Edit VBlog',
            'new_item' => 'New VBlog',
            'view' => 'View VBlogs',
            'view_item' => 'View VBlog',
            'search_iteme' => 'Search VBlogs',
            'not_found' => 'No VBlogs Found',
            'not_found_in_trash' => 'No VBlogs found in Trash',
            'parent' => 'Parent VBlog',
    ),
    'public' => true,
    'supports'  =>  array('title', 'editor','custom-fields', 'thumbnail', 'revisions', 'comments'),
    'taxonomies' => array('category', 'post_tag')
)); 
```

}

所以我确保我在支持数组中添加了“评论”。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:56:53.487

扩展评论作为答案。

您已正确注册 post_type 以支持评论。在您的 single-{post_type}.php 模板中，您需要在循环内调用评论模板（在 endwhile 和 else endif 之间）。

```
if ( comments_open() || '0' != get_comments_number() )
        comments_template( '', true ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:42:05.550

添加此代码 single-vblog.php

```
comments_template( '', true ); 
```

如果显示评论已关闭，您可以在 phpmyadmin 中运行此命令

```
UPDATE wp_posts SET comment_status = 'open' WHERE post_type = 'vblog'; 
```

# java - 定义数据源

> ID：10919777
> 
> 赞同：0
> 
> 时间：2012-06-06T18:14:25.620
> 
> 标签：java, spring, google-app-engine

通常我们这样定义一个数据源：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
<property name="driverClassName" value="org.hsqldb.jdbcDriver"/>
<property name="url" value="jdbc:hsqldb:mem:."/>
<property name="username" value="sa"/>
<property name="password" value=""/>
</bean> 
```

但是，如何定义指向像 Appengine Datastore 这样的 NoSQL 数据库的“dataSource”？

这个想法是允许将“dataSource”传递到用于 Spring 安全性的 bean 中：

```
 <authentication-manager>
        <authentication-provider>
            <jdbc-user-service data-source-ref=”dataSource” />
        </authentication-provider>
    </authentication-manager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:25:17.957

Spring 安全性需要 JDBC 数据源。Yiou 需要为您的 NoSQL 数据库获取 JDBC 驱动程序。AFAIK，Google App Engine Datastore 没有附带 JDBC 驱动程序，但是有一些尝试编写一个，所以你可以试一试。

# ruby - 检查两个数组是否具有相同的内容（以任何顺序）

> ID：10919783
> 
> 赞同：101
> 
> 时间：2012-06-06T18:14:44.990
> 
> 标签：ruby, arrays, comparison

我将 Ruby 1.8.6 与 Rails 1.2.3 一起使用，并且需要确定两个数组是否具有相同的元素，无论它们的顺序是否相同。保证其中一个数组不包含重复项（另一个可能，在这种情况下答案是否定的）。

我的第一个想法是

```
require 'set'
a.to_set == b.to_set 
```

但我想知道是否有更有效或更惯用的方式来做到这一点。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-06-06T18:34:50.343

这不需要转换来设置：

```
a.sort == b.sort 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-23T14:36:41.137

对于两个数组 A 和 B： A 和 B 具有相同的内容，如果： `(A-B).blank? and (B-A).blank?`

或者您可以检查： `((A-B) + (B-A)).blank?`

同样正如@cort3z 所建议的，这个解决方案 als0 适用于多态数组，即

```
 A = [1 , "string", [1,2,3]]
 B = [[1,2,3] , "string", 1]
 (A-B).blank? and (B-A).blank? => true
 # while A.uniq.sort == B.uniq.sort will throw error `ArgumentError: comparison of Fixnum with String failed` 
```

：：：：：：：：：：： 编辑 ：：：：：：：：：：：：：

正如评论中所建议的，上述解决方案因重复而失败。尽管根据提问者甚至不需要的问题，因为询问者对重复不感兴趣（他在检查之前将他的数组转换为设置并且屏蔽重复，即使你看他在检查之前使用 .uniq 运算符的公认答案也掩盖了重复。）。但是，如果您对重复项感兴趣，只需添加计数检查即可解决问题（根据问题，只有一个数组可以包含重复项）。所以最终的解决方案是： `A.size == B.size and ((A-B) + (B-A)).blank?`

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2019-06-24T15:18:17.473

**红宝石 2.6+**

Ruby[`difference`](https://ruby-doc.org/core-2.6/Array.html#method-i-difference)在 2.6 中引入。

这在这里提供了一个非常快速、非常易读的解决方案，如下所示：

```
a = [1, 2, 3, 4, 5, 6]
b = [1, 2, 3, 4, 5, 6]

a.difference(b).any?
# => false
a.difference(b.reverse).any?
# => false

a = [1, 2, 3, 4, 5, 6]
b = [1, 2, 3]
a.difference(b).any?
# => true 
```

然而，反过来是不正确的：

```
a = [1, 2, 3]
b = [1, 2, 3, 4, 5, 6]
a.difference(b).any?
# => false 
```

这意味着要获得两个方向的差异，必须运行：

```
a.difference(b).any? || b.difference(a).any? 
```

运行基准测试：

```
a = Array.new(1000) { rand(100) }
b = Array.new(1000) { rand(100) }

Benchmark.ips do |x|
  x.report('sort')   { a.sort == b.sort }  
  x.report('sort!')  { a.sort! == b.sort! }  
  x.report('to_set') { a.to_set == b.to_set }  
  x.report('minus')  { ((a - b) + (b - a)).empty? }  
  x.report('difference') { a.difference(b).any? }
  x.report('difference two way') { a.difference(b).any? || b.difference(a).any? }
end

                sort     10.175k (± 6.2%) i/s -     50.778k in   5.015112s
               sort!     10.513k (± 6.8%) i/s -     53.212k in   5.089106s
              to_set      4.953k (± 8.8%) i/s -     24.570k in   5.037770s
               minus     15.290k (± 6.6%) i/s -     77.520k in   5.096902s
          difference     25.481k (± 7.9%) i/s -    126.600k in   5.004916s
  difference two way     12.652k (± 8.3%) i/s -     63.232k in   5.038155s 
```

我的结论是，这`difference`是单向差异的绝佳选择。

如果你需要双向检查，那就是性能和可读性之间的平衡。对我来说，可读性很重要，但这是一个根据具体情况进行的调用。

希望对某人有所帮助！

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-04-21T12:09:52.420

速度比较

```
require 'benchmark/ips'
require 'set'

a = [1, 2, 3, 4, 5, 6]
b = [1, 2, 3, 4, 5, 6]

Benchmark.ips do |x|
  x.report('sort')   { a.sort == b.sort }  
  x.report('sort!')  { a.sort! == b.sort! }  
  x.report('to_set') { a.to_set == b.to_set }  
  x.report('minus')  { ((a - b) + (b - a)).empty? }  
end  

Warming up --------------------------------------
            sort    88.338k i/100ms
           sort!   118.207k i/100ms
          to_set    19.339k i/100ms
           minus    67.971k i/100ms
Calculating -------------------------------------
            sort      1.062M (± 0.9%) i/s -      5.389M in   5.075109s
           sort!      1.542M (± 1.2%) i/s -      7.802M in   5.061364s
          to_set    200.302k (± 2.1%) i/s -      1.006M in   5.022793s
           minus    783.106k (± 1.5%) i/s -      3.942M in   5.035311s 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-02-25T04:41:56.783

当 和 的元素`a`是`b`时[`Comparable`](http://ruby-doc.org//core-2.2.0/Comparable.html)，

```
a.sort == b.sort 
```

根据@steenslag 的评论更正@mori 的答案

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-06-06T18:27:08.160

如果你期望`[:a, :b] != [:a, :a, :b]` `to_set`不起作用。您可以改用频率：

```
class Array
  def frequency
    p = Hash.new(0)
    each{ |v| p[v] += 1 }
    p
  end
end

[:a, :b].frequency == [:a, :a, :b].frequency #=> false
[:a, :b].frequency == [:b, :a].frequency #=> true 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-20T13:56:55.000

如果您知道数组的长度相等并且两个数组都不包含重复项，那么这也可以：

```
( array1 & array2 ) == array1 
```

**说明：**在这种情况下，`&`运算符返回 a1 的副本，其中不包含在 a2 中找不到的任何项目，这与原始 a1 相同，前提是两个数组具有相同的内容且没有重复。

**Analyis：**鉴于顺序没有改变，我猜这是作为一个双迭代实现如此一致`O(n*n)`，特别是对于大型数组来说比`a1.sort == a2.sort`在最坏情况下应该执行的更糟糕`O(n*logn)`。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-21T11:30:22.003

结合起来`&`也`size`可能很快。

```
require 'benchmark/ips'
require 'set'

Benchmark.ips do |x|
  x.report('sort')   { a.sort == b.sort }  
  x.report('sort!')  { a.sort! == b.sort! }  
  x.report('to_set') { a.to_set == b.to_set }  
  x.report('minus')  { ((a - b) + (b - a)).empty? }
  x.report('&.size') { a.size == b.size && (a & b).size == a.size }  
end  

Calculating -------------------------------------
                sort    896.094k (±11.4%) i/s -      4.458M in   5.056163s
               sort!      1.237M (± 4.5%) i/s -      6.261M in   5.071796s
              to_set    224.564k (± 6.3%) i/s -      1.132M in   5.064753s
               minus      2.230M (± 7.0%) i/s -     11.171M in   5.038655s
              &.size      2.829M (± 5.4%) i/s -     14.125M in   5.010414s 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-06T18:30:32.277

一种方法是遍历没有重复的数组

```
# assume array a has no duplicates and you want to compare to b
!a.map { |n| b.include?(n) }.include?(false) 
```

这将返回一个 true 数组。如果出现任何 false，则外部`include?`将返回 true。因此，您必须反转整个事物以确定它是否匹配。

# javascript - 如何防止链接样式化他们的孩子

> ID：10919788
> 
> 赞同：0
> 
> 时间：2012-06-06T18:15:18.780
> 
> 标签：javascript, jquery, html, css

我正在重新开发一个网站，我想在菜单中有简单的链接，以便用户可以在新选项卡中打开它们，目前菜单项如下所示：

```
<li class='menu-left-row' id='messages' onclick=\"javascript:showscreen_load('messages.php?sel=overview','messages','menu-left')\">
    <div class='menu-left-picture'>
    <img src='IMG/menu-left-messages.png'>
    </div>
    <div class='menu-left-item'>
    Messages
    </div>
</li> 
```

现在我设置了一个函数，该函数将所有链接与类“toggle_reconstruct”相交，所以我想拥有它，而不是像这样：

```
<li class='menu-left-row' id='messages'>
    <div class='menu-left-picture'>
    <img src='IMG/menu-left-messages.png'>
    </div>
    <div class='menu-left-item'>
    <a class='toggle_reconstruct' href='/messages/'>Messages</a>
    </div>
</li> 
```

但现在链接正在设置菜单项文本的样式，在这种情况下，“消息”变为粗体和蓝色。会有很多其他菜单项有很多不同的样式，有什么办法可以防止链接对其内容进行样式设置？

更新：有人刚刚指出我使用：

```
a:link {font-weight:inherit; color:inherit;text-decoration:none;} 
```

这会是一个有效的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:18:32.263

您可以将 div 移到`a`标签之外，也可以对其应用一个类并为其提供自定义样式（覆盖链接给出的样式）。因此，在这种情况下，您可能希望向`menu-left-item`该类添加一些 CSS，使其看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:18:57.973

您可以在 CSS 中使用直系后代符号来防止样式级联超过第一级

```
.nav > li {background-color: #ccc;} 
```

*无法在 IE6 上运行*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:22:59.083

只需添加这样的样式：

```
<style>
a.toggle_reconstruct {
  color: #000000;
  text-decoration: none;
}
</style> 
```

这是你想要达到的目标吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:30:03.357

您可以通过两种方式阻止子代继承。

**添加一个类：**

如果你有一个嵌套列表，那么这将是一个问题。你想给主列表而不是子列表的背景，然后给主列表一个类。

```
<ul class="nav">
    <li class="main">Home</li>
    <li class="main">
        About
        <ul>
            <li>Products</li>
            <li>Contact</li>
            <li>Corporate</li>
    </li>
<ul> 
```

而CSS为：

```
.nav .main {background-color: #ccc;} 
```

**通过特异性运算符：**

```
<ul class="nav">
    <li>Home</li>
    <li>
        About
        <ul>
            <li>Products</li>
            <li>Contact</li>
            <li>Corporate</li>
    </li>
<ul> 
```

而CSS为：

```
.nav > li {background-color: #ccc;} 
```

***注意：**特异性方法在 IE 6 中不起作用！*

希望这可以帮助。:)

# javascript - addEventListener 不适用于 onbeforeunload

> ID：10919790
> 
> 赞同：18
> 
> 时间：2012-06-06T18:15:25.937
> 
> 标签：javascript, events, google-chrome, addeventlistener, onbeforeunload

```
window.addEventListener("onbeforeunload",function() {return "are you sure?"}); 
```

^ 这似乎不起作用......根本......页面将简单地关闭而不显示确认框......

我意识到...

```
window.onbeforeunload = function() {return "are you sure?"} 
```

会工作，但我想添加到功能（例如添加许多事件侦听器到“onbeforeunload”函数）而不是完全重写函数！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-06T18:17:16.347

`on`从中删除`onbeforeunload`。

另外，请注意，这`addEventListener`在较旧的 IE 和可能的其他浏览器中不起作用。如果您想要一致的事件绑定，请使用库。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-09-10T10:41:31.333

Mozilla开发者网络 API 参考中有一个“几乎跨浏览器的工作示例”，[用于 beforeunload 事件](https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload)。使用他们的代码。

# 2014 年，那是

```
window.addEventListener("beforeunload", function (e) {
  var confirmationMessage = "\o/";

  (e || window.event).returnValue = confirmationMessage;     //Gecko + IE
  return confirmationMessage;                                //Webkit, Safari, Chrome etc.
}); 
```

# 2020年，现在是

```
window.addEventListener('beforeunload', (event) => {
  // Cancel the event as stated by the standard.
  event.preventDefault();
  // Chrome requires returnValue to be set.
  event.returnValue = '';
}); 
```

# 上述所有的？

如果我需要这个，我想把这项工作委托给图书馆。如果我必须自己做，我想一个人可以做到以上所有，只是为了更加确定

*   不要尝试设置有意义的消息文本，它只会给出不一致的用户体验
*   `event = event || window.event`
*   `event.preventDefault()`，也许在检查 preventDefault 是否已定义之后？
*   `event.returnValue = ''`
*   `return ''`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-06T14:26:51.533

*EventListeners*没有前缀`on`，但它适用，或者我可以说*EventHandlers有必要*

 **所以，请记住

> EventHandlers =**前缀**
> 
> EventListeners =**前缀关闭****

# javascript - javascript区分iOS原生uiwebview和iOS桌面webapp

> ID：10919796
> 
> 赞同：0
> 
> 时间：2012-06-06T18:15:48.130
> 
> 标签：javascript, ios, xcode, html

我正在使用`navigator.useragent`请求获取所有浏览器或 webkit 信息。我能够区分所有浏览器或 webkit，但 webapp（iOS 桌面书签）和本机应用程序 iOS webkit 之间没有区别。两者都抛出相同的信息字符串。如何区分他们？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:53:59.803

要检测您的网站是否已被应用程序 Safari 打开，请编写：

```
if("standalone" in window.navigator&&!window.navigator.standalone) 
```

要检测您的网站是否已保存到主屏幕然后打开，请编写：

```
if("standalone" in window.navigator&&window.navigator.standalone) 
```

# php - SQL 查询，比较表、字符串和整数之间的数据

> ID：10919798
> 
> 赞同：1
> 
> 时间：2012-06-06T18:15:56.400
> 
> 标签：php, mysql, sql, database, join

这更像是一个“方法”问题，我还没有拿到代码。但我是 SQL 和 php 的新手，想聪明地解决这个问题。

场景如下：

我有一个名为 Donations 的表，每个表在名为 AREA 的列中都有一个字符串值。AREA 可以具有九个预定值（东北、西北、市中心等）中的任何一个。

我还有一张志愿者表，每个人都指定了他们愿意前往的地区，以帮助领取捐款。对于每个志愿者，我有 9 列，每列都有 1 或 0，对应于上面列出的九个区域（NW、NE、DT 等...）

我想运行一个查询、一系列查询或 php/sql 组合，我可以在其中搜索所有活跃的捐赠，获得它们所在的区域，然后查询志愿者表，并获取仅那些的电子邮件地址列表愿意前往其中一个或多个地区的志愿者。

任何帮助表示赞赏。（顺便说一句，这两个表之间没有共享键值。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:24:02.200

我会考虑让 Areas 成为它自己的表（ID、Name）。然后为 Donations 表添加 AreaID (ForeignKey) 而不是 Area 字符串列。

对于志愿者 - 区域协会，我会考虑制作一个名为 VolunteerAreas 的链接表，其结构为 VolunteerID，AreaID。

编写一些脚本来获取现有数据并将其转储为新格式应该很简单。

那你可以做...

获得积极捐款

```
SELECT * FROM Donations WHERE Active = 1 
```

从选定区域获取电子邮件

```
SELECT Email FROM Volunteers v
JOIN VolunteerAreas va ON va.VolunteerID = v.ID
WHERE va.AreaID = @AreaID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:25:14.933

你的第一个查询看起来像

```
SELECT [area] FROM [database] WHERE donationSelector = selectedValue 
```

然后根据你从上面得到的变量`$i`为列名设置一个变量`$area`

```
<?php
switch($area) {
    case "Northwest" :
        $i = "NW";
        break;
    case "Northeast" :
        $i = "NE";
        break;
    ...etc.
} 
```

然后做另一个查询

```
SELECT * FROM [database] WHERE %s = 1, $i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:22:53.840

所以，我完全通过一种完全不同的方法解决了这个问题，尽管我确信上述方法会奏效。

我为每个区域分配了一个素数，从 2、3、5 等开始……然后当志愿者注册时，它通过乘以他们愿意去的区域为他们创建一个代码。

我对捐赠使用了相同的质数，并为每笔捐赠分配了适当的质数。

然后我运行了这个连接查询，看看志愿者的代码是否可以被任何可用的捐款整除。

$q = "从存在的 PUPS 中选择 Distinct(EMAIL)（从 STATUS = 'ACTIVE' AND (REGIONCODE Mod AREAPRIME = 0) 的捐赠中选择 *）";

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:28:10.113

我强烈建议您更改架构，使用多个表而不是两个。

*下面的 SQL 是一个没有主键、外键、索引等的骨架。*

```
CREATE TABLE area (
  id           INT NOT NULL AUTOINCREMENT,
  name         VARCHAR(128)
)

CREATE TABLE volunteer (
  id           INT NOT NULL AUTOINCREMENT,
  name         VARCHAR(128)
)

CREATE TABLE coverage (
  area_id      INT,
  volunteer_id INT
) 
```

首先，在前两个表中使用代理主键（id 列）意味着您可以更改实体的名称而不会破坏任何内容。

其次，当您添加新区域时，您只需要向每个表添加新记录，而不是向志愿者表添加新的二进制标志字段。

第三，查询变得更整洁、更易维护、更快……

```
SELECT
  volunteer.*
FROM
  area
INNER JOIN
  coverage
    ON area.id = coverage.area_id
INNER JOIN
  volunteer
    ON volunteer.id = coverage.volunteer_id
WHERE
  area.name IN ('NW', 'SE')
GROUP BY
  volunteer.id 
```

# php - 使用 PHP 的唯一 ID

> ID：10919799
> 
> 赞同：-6
> 
> 时间：2012-06-06T18:16:01.777
> 
> 标签：php, sql, database, unique-key

谁能告诉我如何创建唯一ID？例如：

```
Account id 9845673333
Account id 9845673334
Account id 9845673335
Account id 9845673336 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:18:34.803

您可以只存储一个从 1 开始的整数值，并在每次需要发出新帐户 ID 时递增它。

那么，它将永远是独一无二的。

# desire2learn - 如何在 Desire2Learn 上进行单点登录？

> ID：10919800
> 
> 赞同：2
> 
> 时间：2012-06-06T18:16:08.093
> 
> 标签：desire2learn

我正在尝试创建连接到 Desire2Learn 的 iOS 应用程序，我有该应用程序的用户名/密码，并且我的客户不希望登录再次出现以访问desire2learn 站点，基本上我正在寻找 SSO，所以如果用户进入我的app ，使用 D2L api 我应该能够获取身份验证、密钥和签名参数来访问 D2L 服务。请提供示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:15:10.590

Valence API 身份验证系统使用基于 Web 的身份验证过程，该过程返回用户 ID 和用户密钥。文档页面上有[idkey auth 详细信息。](http://docs.valence.desire2learn.com/basic/auth.html)真的没有办法使用 Desire2Learn 用户名和密码直接进行 api 调用（类似于 facebook connect 那种方式）。但是，返回的 ID 和密钥是长期存在的（基本上直到用户重置密码），因此您可以避免多次登录的可用性问题。

完成此操作的最佳方法是加载浏览器或浏览器控件的应用程序。[Desire2Learn 作业评分](http://itunes.apple.com/us/app/desire2learn-assignment-grader/id503947702?mt=8)器也可以这样做。

ios 没有像其他平台那样的正式“入门”示例，但是，有一个[基本的 ios 库](http://code.google.com/p/desire2learn-valence/source/browse/#svn/trunk/LearningFrameworkAPI/clientplatforms/ios/libsrc)可以帮助准备 auth 调用并为 api 调用创建正确的 sig。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:17:57.470

我们遇到了同样的问题，所以我们构建了一个 php 应用程序，它基本上使用 cURL 执行身份验证过程，给定用户名和密码。密钥存储在数据库中，因此当用户尝试登录时，如果 un/pw 正确，则将密钥发送回 ios 应用程序。如果密钥过期，则执行宣誓流程，并将新密钥发送回 ios 应用程序 - 所以从 ios 应用程序的角度来看，唯一需要的就是 un/pw，仅此而已。

# wcf - 唯一证书认证和 REST 服务

> ID：10919801
> 
> 赞同：4
> 
> 时间：2012-06-06T18:16:08.203
> 
> 标签：wcf, rest, wcf-security, restful-authentication, wcf-authentication

我正在收集信息以实现系统的证书身份验证方案，该系统要求移动设备客户端使用证书进行身份验证，然后才能被授予访问系统使用的服务的权限。我正在寻找可能的解决方案，允许我向系统的受信任用户颁发唯一证书，以便他们可以与他们的移动设备一起使用，以及其他登录凭据。

具体来说，客户端设备上的移动应用程序（例如 Android 应用程序）将使用 WCF REST 服务，并且需要检查客户端是否具有正确的证书以及用户提供的有效用户凭据. 此外，在这种情况下，安全性是关键且备受关注。

我的问题是，在刚刚描述的场景中，是否可以实施唯一的证书身份验证并高度重视安全性？如果不是，有哪些不同的替代方案或实现这一目标的最佳方式？

此外，对于用于 PIV/CAC 卡的单独颁发的证书，是否可以利用这些证书使用移动设备进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:57:58.297

这种性质的安全性始终是一个难以解决的问题。这种性质的主要方法之一是使用 diffie hellman 密钥交换首先建立一个密钥系统。每个用户都有自己唯一的密钥，只有初始握手会是过程密集型的。然后，此时您可以运行任意数量的加密算法，以便在每次进行身份验证时验证密钥。

因此，这就引出了一个问题，即如何在发送密钥之前首先建立密钥，以及可以使用哪些唯一信息在移动客户端创建密钥。这导致我们走上了一条灰色的道路，因为有许多不同的方法可以做到这一点，并且都有自己的考虑。例如，您可以使用 Android 操作系统的原生架构来获取手机的唯一 ID，或者使用用户 Google Play 帐户 ID 作为原始密钥中的哈希值。但是，请记住 diffie hellman 是匿名的，因此您需要在与用户交换密钥之前先对用户进行身份验证。之后，尽管您可以只使用签名的请求。

基本上，这深入研究了一个安全领域，需要利用给定的资源进行深思熟虑，并且知道您在移动平台上，您需要保持 CPU 周期较低，这意味着没有密集的加密算法。上述方法只是您可以实施的一种解决方案。

此外，如果您确实开发了一个 Android 应用程序，则可以通过应用程序接口通过推送轻松完成此身份验证。您基本上可以将证书推送到调用或撤销访问权限的应用程序，因此这应该是最简单的路线。如果你想在 Symbian OS 上使用它，那么你将不得不像我上面描述的那样做更多的工作。此外，由于您基本上要求的是登录而不是完全加密，因此密钥签名系统的开销应该不会太难，但实现跨平台可能会变得棘手。

希望这能为您提供进一步研究和想法的起点。

# c# - 如何在集成的谷歌地球上设置特定位置的坐标？

> ID：10919805
> 
> 赞同：0
> 
> 时间：2012-06-06T18:16:34.403
> 
> 标签：c#, google-earth

我在我的 C# 表单中集成了谷歌地球，我想使用代码 ge.setcameraparams() 将相机设置为选定的坐标；，但是在编译没有错误之后，当我单击我编写代码的按钮时，程序退出显示我有无效的参数。为什么会这样？这是我的代码：

```
private void button4_Click_1(object sender, EventArgs e) 
{ 
     ge.SetCameraParams(1.3338139, 103.77629, 15.00, 0, 9.00, 10.00, 
 20.00, 1); 
} 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:46:11.057

尝试 ：

```
ge.SetCameraParams(1.3338139, 103.77629, 15.00, 
EARTHLib.AltitudeModeGE.RelativeToGroundAltitudeGE, 9.00, 10.00, 20.00, 1); 
```

# jquery - 使用 jQuery 的 prop() 切换禁用的属性不起作用

> ID：10919808
> 
> 赞同：20
> 
> 时间：2012-06-06T18:16:39.097
> 
> 标签：jquery

首先，[小提琴](http://jsfiddle.net/kqnZz/3/)。

```
$('#enableButtonB').click(function (e) {
   if($(e.target).is(':checked'))
   {
       $('#myButtonB').removeProp('disabled');
       alert('Enable Button B');
   }
   else
   {
       $('#myButtonB').prop('disabled', true); 
       alert('Disable Button B');
   }
}); 
```

我正在尝试使用 jQuery`.prop()`和`removeProp()`方法来启用和禁用基于某些标准的按钮。`removeProp()`在元素上调用之前，它似乎工作正常。之后，任何后续调用都`prop()`无法禁用按钮。

重复启用和禁用元素的正确方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-06T18:19:45.877

代替

```
.removeProp('disabled') 
```

采用

```
.prop('disabled',false) 
```

小提琴：http: [//jsfiddle.net/kqnZz/6/](http://jsfiddle.net/kqnZz/6/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-06T18:30:13.023

首先，[http://jsfiddle.net/iambriansreed/KxGVa/](http://jsfiddle.net/iambriansreed/KxGVa/)

jQuery 文档很棒。[`removeProp`](http://api.jquery.com/removeProp)说：

> **注意：**请勿使用此方法删除本机属性，例如选中、禁用或选中。这将完全删除该属性，并且一旦删除，就不能再次将其添加到元素中。用于`.prop()`将这些属性设置为`false`。

改变：

```
.removeProp('disabled') 
```

...到...

```
.prop('disabled', false) 
```

...和...

```
.prop('disabled', 'disabled') 
```

...到...

```
.prop('disabled', true) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-25T21:19:26.867

试试这个简短的功能是否可以解决您的需求：

```
$("#enableButtonB").click(function(){
  $("#myButtonB").prop('disabled', function (_, val) { return ! val; });
}); 
```

用户[Explosion Pills](https://stackoverflow.com/questions/11903293/toggle-disabled-attribute-in-jquery)获得该功能的信任 :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-18T14:52:32.150

此行将用作切换禁用功能：

```
$('#myButtonB').prop('disabled', !$('#myButtonB').prop('disabled')); 
```

如果你在 jquery 函数中使用它，你可以像这样使用它：

```
$('#enableButtonB').on('click', function() {
     $('#myButtonB').prop('disabled', !$('#myButtonB').prop('disabled'));
}); 
```

# ios - UIView beginAnimations 在自定义属性上太快了

> ID：10919819
> 
> 赞同：0
> 
> 时间：2012-06-06T18:17:50.000
> 
> 标签：ios, uiview, core-animation

我将 UIButton 子类化以创建自己的 UIRoundButton。我正在尝试为一个名为 radius 的自定义属性设置动画。它确实发生了变化，但它立即发生了变化。我试图将动画持续时间增加到 5000，但动画仍然在一毫秒内发生。

这是代码：

```
UIRoundButton *tempItem = [self.buttons objectAtIndex:currentElement];
[tempItem setInnerColor:UIColorFromRGB(0xcdcdcd)];

currentElement = currentElement + 1;
UIRoundButton *tempItem2 = [self.buttons objectAtIndex:currentElement];
[tempItem2 setInnerColor:UIColorFromRGB(0xff0000)];

[UIView beginAnimations:@"ToggleViews" context:nil];
[UIView setAnimationDuration:5000];
tempItem.radius = 20;
tempItem2.radius = 40;
[UIView commitAnimations]; 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:19:54.460

隐式视图动画不适用于自定义属性。如果您想要这种行为，您必须在 CALayer 级别执行此操作。

# android - PGU（Pygame GUI API）可以与 pgs4a（Android 的 PyGame 子集）一起使用吗？

> ID：10919823
> 
> 赞同：0
> 
> 时间：2012-06-06T18:18:00.563
> 
> 标签：android, python, pygame, pgu

到目前为止，我已经成功使用[pgs4a 0.9.4](http://pygame.renpy.org/)让简单的 PyGame 应用程序在 Android 上运行。我的下一个实验是看看我是否可以在[PGU](http://code.google.com/p/pgu/)中使用 PyGame GUI 小部件；不幸的是，这似乎不起作用，尽管一些论坛帖子暗示它应该这样做。有没有人在这方面取得成功？

我仍在摸索学习如何捕获和记录错误信息，因此以下是我尝试演示问题的最小示例。此应用程序仅以白色文本显示带有错误消息（如果有）的黑屏。

请注意，仅导入 PGU 模块就足以破坏事情。也就是说，如果我注释掉“from pgu import gui”，那么一切正常。令人讨厌的部分是异常似乎没有被干净地捕获 - 应用程序在启动后立即退出 - 所以我不确定 PGU 导入中的问题出在哪里。

```
import pygame
msg = 'OK'
try:
    from pgu import gui # pass works without error
except Exception as e:
    msg = str(e)

try:
    import android
except ImportError:
    android = None

FPS = 30
WIDTH, HEIGHT = 480, 800

def main():
    pygame.init()
    screen = pygame.display.set_mode((WIDTH, HEIGHT))
    if android:
        android.init()
        android.map_key(android.KEYCODE_BACK, pygame.K_ESCAPE)
    font = pygame.font.Font(None, 24)
    surf = font.render(msg, True, (255, 255, 255))
    pygame.time.set_timer(pygame.USEREVENT, 1000 / FPS)
    while True:
        ev = pygame.event.wait()
        if android:
            if android.check_pause():
                android.wait_for_resume()
        if ev.type == pygame.USEREVENT:
            screen.fill((0, 0, 0, 255))
            screen.blit(surf, (10, 400))
            pygame.display.flip()
        elif ev.type == pygame.QUIT or (ev.type == pygame.KEYDOWN and
                                        ev.key == pygame.K_ESCAPE):
            break
    pygame.quit()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:56:48.513

最近读到这个，但还没有尝试过。看起来您需要将要导入的其他模块复制到应用程序目录中。 [http://possiblywrong.wordpress.com/2012/06/16/python-on-android/](http://possiblywrong.wordpress.com/2012/06/16/python-on-android/)

# spring - jsp中的显示全部

> ID：10919824
> 
> 赞同：0
> 
> 时间：2012-06-06T18:18:03.893
> 
> 标签：spring, hibernate, jsp

我有一个用hibernate设置的数据库。在我的 jsp 页面中，我显示了一个用于插入值的表单，并将这些值传递给我的 java 类，然后将该条目保存到数据库中，这工作正常，但是当我想显示表中的数据时，它给了我错误

```
org.apache.jasper.el.JspPropertyNotFoundException: /list_object.jsp(45,0) '${objectManager.allObjects}' The class 'ObjectManager$$EnhancerByCGLIB$$b2d7311' does not have the property 'allObjects' 
```

对于线路

```
<c:forEach var="object" items="${objectManager.allObjects}"> 
```

在

```
<c:forEach var="object" items="${objectManager.allObjects}">
    <tr>
    <td><c:out value="${object.objectID}"/></td>
    <td><c:out value="${object.objectRule}"/></td>
    </tr>
</c:forEach> 
```

我认为这是 Hibernate-Proxy-Object 的一个问题，但我使用另一个表/bean 运行相同的操作

```
<c:forEach var="object" items="${objectManager.allLayouts}"> 
```

它运行得很好。我检查了我的 xml 配置文件和我的 hbm.xml 配置，并且 bean 设置正确。我不知道错误来自哪里，以及为什么它对一个 Spring-bean 工作正常而不对另一个工作

编辑：

```
 @Transactional
 public class ObjectManager{
      private SessionFactory sessionFactory;

      public void saveObject(Objects object){
           getCurrentSession().save(object);
      }

      @SupressWarnings("unchecked")
      public Iterable<Objects> getAllObjects(){
            return getCurrentSession().createCriteria(Objects.class)
                   .addOrder(Order.desc("objectID"))
                   .list():
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:30:41.173

我认为这个错误是不言自明的。

对象没有`getAllObjects()`方法`objectManager`。

您的*工作*示例使用不同的方法 - `getAllLayouts()`.

# java - java-尝试使用/转换接口以与/代替抽象类一起使用

> ID：10919825
> 
> 赞同：0
> 
> 时间：2012-06-06T18:18:05.987
> 
> 标签：java, list, arraylist

我想使用一个 java 库来代替 ArrayLists...这个库（“Vanilla Java Collections”）需要一个接口以下列方式声明——

```
interface MutableBoolean {
    public void setFlag(boolean b);
    public boolean getFlag();
} 
```

这就是这份清单的声明方式——

```
// create a huge array of MutableBoolean
HugeArrayList<MutableBoolean> hugeList = new HugeArrayBuilder<MutableBoolean>() {}.create();
List<MutableBoolean> list = hugeList; 
```

这就是检索数据的方式——

```
for (MutableTypes mb : list) {
boolean b1 = mb.getBoolean(); 
```

在同一个接口中可以有多种数据类型来插入/检索字符串、整数、双精度等值......

现在，在我正在处理的应用程序中，有一个自定义变量定义——

```
public abstract class Variable implements MutableVariable  {

    abstract public byte[] toBinary();
    abstract public byte[] toBinary(String charset);
    abstract public String toString();
    abstract public String toString(String charset);
    abstract public List toList();
    abstract public boolean isEmpty();
    abstract public Object getWrappedObject();
    ----plus some more functions---- 
```

还有一个类“NodeVariable”扩展了“Variable”，另一个类“ListVariable”实现了变量——每个ListVariable都有一个List加上一些与列表和字符串操作有关的实用函数。

我想实现数组替换（“Vanilla Java Collections”）——它需要一个接口——代替“ListVariable”。但是“变量”类是一个抽象类。所以我在这里很困惑 - 我如何实现接口以便我可以使用 ArrayList Substitute("Vanilla Java Collections") 代替 "ListVariable"？

这是否可能对利用“ListVariable”的现有代码进行最小的更改，即通过对“ListVariable”类进行所有/大部分更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:27:45.913

如果我正确理解您的问题，您不想使用一个名为的类`ArayListVariable`，您可以在任何可以使用`ListVariable`. 如果是这种情况，您可以扩展`Variable`抽象类

```
public class ArrayListVariable extends Variable
{
  // overrides of required functions
} 
```

或者实现`MutableVariable`接口

```
public class ArrayListVariable implements MutableVariable
{
  // implementations of required functions
} 
```

# php - 如果第一个字母是“R”，则使用 php 删除第一个字母 .. 如何？

> ID：10919829
> 
> 赞同：1
> 
> 时间：2012-06-06T18:18:27.810
> 
> 标签：php, regex, if-statement

我试图删除第一个字母，如果它是“r”，例如使用`ltrim`函数，但它没有用。

如何使用“if”检查第一个字母是否是“r”或“n”等

```
<?php
    $string = "no";

    if (ltrim($string ,'r')) {
        echo 'Yes';
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:38:02.737

这是一个单行，其他人都使用子字符串，这是不同的：

```
preg_replace('/(^[Rr])/', '', $string); 
```

**编辑**

以上将替换它，误解了问题。在这里您可以执行以下操作：

```
if(preg_match('/(^[Rr])/', $string)){
   echo "Yes";   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:20:30.017

可以像访问数组一样访问字符串元素...

```
if(strtolower($string[0]) == 'r'){
    $string = substr($string, 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:20:31.067

```
if($str[0] == 'r') {
    $str = substr($str, 1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T18:21:00.733

一种可能的解决方案：

```
if(strtolower(substr($string, 0, 1)) === 'r')
{
    //do something
} 
```

删除第一个字母：

```
$str = substr($string, 1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T18:21:51.710

试试看：

```
<?php
$string = "no";
if(substr($string ,0,1) == 'n'){
    echo 'Yes';
}

?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-06T18:26:07.337

ltrim 用于从字符串的左侧删除空格或其他预定义字符。您可以使用以下方法检查字符串的第一个字符：

```
$string = "no";
if($string[0] == 'r'){
  echo "yes";
} 
```

见[演示](http://codepad.org/BpHoAgXW)

# javascript - 垂直对齐的谷歌可视化仪表

> ID：10919830
> 
> 赞同：0
> 
> 时间：2012-06-06T18:18:29.280
> 
> 标签：javascript, html, css, google-visualization

我想将谷歌仪表垂直对齐。这是我的 javascript 代码（它是从谷歌游乐场复制粘贴）

```
<script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Memory', 80],
          ['CPU', 55],
          ['Network', 68]
        ]);

        var options = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('menu2'));
        chart.draw(data, options);
      }
    </script> 
```

这是我的 html div

```
<div id="menu2"></div> 
```

和CSS

```
#menu2
{
background-color:#FFD700;
height:570px;
width:150px;
float:right;
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:43:32.013

我刚刚将内联样式添加到将加载仪表的 div 中。鉴于我的谷歌，Ans 从脚本中删除了所有宽度高度选项。

这是小提琴：http: [//jsfiddle.net/NB3Eg/](http://jsfiddle.net/NB3Eg/)

您可以在此处使用其 html 和 css [https://code.google.com/apis/ajax/playground/?type=visualization#gauge](https://code.google.com/apis/ajax/playground/?type=visualization#gauge)

# c++ - 如何使用 gdb 调试插件

> ID：10919832
> 
> 赞同：1
> 
> 时间：2012-06-06T18:18:31.407
> 
> 标签：c++, gdb

我正在尝试使用 gdb 调试程序的插件。我之前看到一个问题，表明 gdb 中的目录命令可能会有所帮助。我认为这会有所帮助，因为当我尝试在插件的代码中设置断点时，我收到错误消息：“没有名为的源文件...”当我使用目录时它似乎没有做任何事情带有源路径结构的命令。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:37:45.507

> "No source file named..."

GDB will not be able to set a breakpoint until your plugin is *actually* loaded into the inferior (being debugged) process.

Use `(gdb) info shared` command to check whether your plugin is already loaded or not.

If it isn't, you can set a "deferred" breakpoint (GDB should be asking you whether you want to set such a breakpoint, assuming you have the default `set confirm on` setting).

If your plugin is already loaded and visible in `info shared` output, then you haven't built your plugin with debug info. Rebuild it with `-g`, and you should be able to set breakpoints in it.

# scrollview - ScrollView 只能容纳一个孩子

> ID：10919835
> 
> 赞同：0
> 
> 时间：2012-06-06T18:18:33.683
> 
> 标签：scrollview

我有多个线性布局，我需要添加更多项目。他们的第一个布局包含背景图像。我不确定它是否应该在哪里，但是如果我将该图像放入另一个布局中，它似乎被放在其他所有东西之上，我看不到其他项目。我想我需要用一些东西包裹整个布局并使其可滚动。我只是不知道是什么。每次我将 ScrollView 添加到 LinearLayout 时，都会出现异常“ScrollView 只能托管一个孩子......”代码如下。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/dsbackground"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <EditText
        android:id="@+id/custinfo"
        android:layout_width="165dp"
        android:layout_height="75dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:hint="  Customer Name/Job Name/Job Zip"
        android:inputType="textMultiLine"
        android:lines="3"
        android:textSize="15dp" />

    <EditText
        android:id="@+id/discount"
        android:layout_width="40dp"
        android:layout_height="37dp"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="32dp"
        android:layout_weight="25"
        android:hint="  %"
        android:inputType="number"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:gravity="center"
        android:text="Width"
        android:textStyle="bold" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:gravity="center"
        android:text="Length"
        android:textStyle="bold" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:gravity="center"
        android:text="Eave"
        android:textStyle="bold" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:gravity="center"
        android:text="Pitch"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <EditText
        android:id="@+id/width"
        android:layout_width="fill_parent"
        android:layout_height="37dp"
        android:layout_weight="25"
        android:gravity="center"
        android:inputType="number"
        android:textStyle="bold" >
    </EditText>

    <EditText
        android:id="@+id/length"
        android:layout_width="fill_parent"
        android:layout_height="37dp"
        android:layout_weight="25"
        android:gravity="center"
        android:inputType="number"
        android:textStyle="bold" >
    </EditText>

    <EditText
        android:id="@+id/eave"
        android:layout_width="fill_parent"
        android:layout_height="37dp"
        android:layout_weight="25"
        android:gravity="center"
        android:inputType="number"
        android:textStyle="bold" >
    </EditText>

    <EditText
        android:id="@+id/pitch"
        android:layout_width="fill_parent"
        android:layout_height="37dp"
        android:layout_weight="25"
        android:gravity="center"
        android:inputType="number"
        android:textStyle="bold" >
    </EditText>
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="58dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="17dp"
        android:gravity="left"
        android:text="ROOF"
        android:textSize="17dp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/roofsqft"
        android:layout_width="110dp"
        android:layout_height="37dp"
        android:layout_weight="25.32"
        android:hint="SQFT"
        android:inputType="number"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/rooftotal"
        android:layout_width="90dp"
        android:layout_height="37dp"
        android:layout_marginLeft="5dp"
        android:layout_weight="25.32"
        android:hint="Total" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <Spinner
        android:id="@+id/Spinnerrvalue"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:entries="@array/rvalue"
        android:prompt="@string/rvalue" />

    <Spinner
        android:id="@+id/spinnerfacing"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:entries="@array/facing"
        android:prompt="@string/facing" />

    <EditText
        android:id="@+id/roofprice"
        android:layout_width="wrap_content"
        android:layout_height="36dp"
        android:layout_gravity="center"
        android:layout_weight="34.48"
        android:hint="Price"
        android:inputType="number"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="58dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="17dp"
        android:gravity="left"
        android:text="WALL"
        android:textSize="17dp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/wallsqft"
        android:layout_width="110dp"
        android:layout_height="37dp"
        android:layout_weight="25.32"
        android:hint="SQFT"
        android:inputType="number"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/walltotal"
        android:layout_width="90dp"
        android:layout_height="37dp"
        android:layout_marginLeft="5dp"
        android:layout_weight="25.32"
        android:hint="Total" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <Spinner
        android:id="@+id/Spinnerrvalue"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:entries="@array/rvalue"
        android:prompt="@string/rvalue" />

    <Spinner
        android:id="@+id/spinnerfacing"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:entries="@array/facing"
        android:prompt="@string/facing" />

    <EditText
        android:id="@+id/wallprice"
        android:layout_width="wrap_content"
        android:layout_height="36dp"
        android:layout_gravity="center"
        android:layout_weight="34.48"
        android:hint="Price"
        android:inputType="number"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <EditText
        android:id="@+id/roofaddition"
        android:layout_width="wrap_content"
        android:layout_height="36dp"
        android:layout_gravity="center"
        android:layout_marginLeft="15dp"
        android:hint="Roof Addition"
        android:inputType="number"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/walldeduct"
        android:layout_width="wrap_content"
        android:layout_height="36dp"
        android:layout_gravity="center"
        android:layout_marginLeft="15dp"
        android:hint="Wall Deducts"
        android:inputType="number"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="40dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <Button
        android:id="@+id/process"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:text="PROCESS" />

    <EditText
        android:id="@+id/total"
        android:layout_width="125dp"
        android:layout_height="43dp"
        android:layout_gravity="center"
        android:layout_marginLeft="42dp"
        android:hint="      Total    "
        android:inputType="number"
        android:textStyle="bold" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:57:40.723

试试这个：（伪代码）

```
<LinearLayout 
android:background= "your background"
>
<Scrollview>
<Linear layout>
<Your layout>
</Your layout>
</Linear layout>
</scrollview>
<Linearlayout> 
```

如果你不明白，写在这里

# c# - C#如何打开两个窗口并使一个窗口控制某些变量

> ID：10919838
> 
> 赞同：-2
> 
> 时间：2012-06-06T18:18:37.380
> 
> 标签：c#

好的，所以我将尽力解释这一点。我和我的一群朋友正在举办一个流媒体活动，作为对观众的一点额外的事情，我们决定让我们自己的自定义 C# 游戏在流媒体中运行。

这是我的问题，我们想要在一个单独的窗口中使用某种形式的表单框，这样我们就可以将它移动到第二个监视器中。我们希望它在第二个监视器上，因为我们正在捕获整个屏幕并且我们不希望他们（观众）看到表单框。

我们需要这种形式来控制某些变量，这些变量会触发游戏中的事件，以添加 AI 的错觉。我不只是制作人工智能的原因是因为我们希望它根据我们无法控制的观众做不同的事情。反正有没有在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:23:13.560

在您的 form1 类中为您的变量创建 getter 和 setter，然后从您的 form2 类中调用它们。

```
public int value;

public void setValue(int val){
this.value = val;
}
public int getValue{
return this.value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:33:58.180

如果您创建了一个代表您的视图的类（如 ViewModel）。它实现了 INotifyPropertyChanged... 你可以创建一个公共静态实例（可能是一个单例），你可以将两个表单绑定到。如果您的属性是这样创建的：

```
 private string _Message;
    public string Message
    {
        get { return _Message; }
        set
        {
            _Message = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Message"));
        }
    } 
```

当任一表单更新类实例上的值时，都应通知这两种表单。

这不是线程安全的！！！但这可能无关紧要。

# inheritance - 创建一个继承自“OpenLayers.Feature.Vector”的 JavaScript 类

> ID：10919841
> 
> 赞同：2
> 
> 时间：2012-06-06T18:18:51.027
> 
> 标签：inheritance, openlayers

我目前正在创建一个应用程序原型，其中包含一个 OpenLayers 组件（地图本身）。

我想创建具有附加属性的特殊“功能”。

*它们应该从OpenLayers.Feature.Vector*继承，也就是说，使用它的构造函数和自定义参数和附加属性。

我一直在寻找，但我找不到任何简单的例子来说明如何做到这一点。

*注意：我的应用程序对象结构不是基于“OpenLayers.Class”类型，因此它们是常见的 javascript 对象。

所以这里是应该从 OpenLayers.Feature.Vector 继承的 Class 并且应该返回它的一个特殊实例，

```
// Class "SpecialRegion"
function SpecialRegion(bounds, options) {

 /* should return an OpenLayers.Feature.Vector with additional properties (objects) which makes this class different */

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:39:54.153

如果要扩展我强烈推荐的 OpenLayers.Feature.Vector 类，则必须使用 OpenLayers.Class 对象：

```
SpecialRegion = OpenLayers.Class(OpenLayers.Feature.Vector, {
    customAttribute: 'value',

    /**
     * OpenLayers Constructor
     */
    initialize: function(bounds, options) {
        // Call the super constructor, you will have to define the variables geometry, attributes and style
        OpenLayers.Feature.Vector.prototype.initialize.apply(this, {geometry, attributes, style});
        this.customAttribute = 'new value';
    },

    // Each instance will share this method. It's clean and efficient
    customMethod: function(param) {
        ...
    }
}); 
```

实例化

```
var myVector = new SpecialRegion(bounds, options);
myVector.customMethod(param);
var val = myVector.customAttribute; 
```

如果您只想为单个实例定义特殊方法和/或属性，而不必定义它自己的类：

注意：如果您经常这样做，您的应用程序可能会变得非常混乱，我建议您使用上述解决方案。

```
function customMethod2 = function(param) {
    ...
};

function SpecialRegion(bounds, options) {
    // Call the constructor, you will have to define the variables geometry, attributes and style
    var vector = new OpenLayers.Feature.Vector(geometry, attributes, style);

    vector.customAttribute = 'new value';

    // Each instance created with SpecialRegion will have their own copy of this method, the code is cleaner but it's memory inefficient
    vector.customMethod = function(param) {
        ...
    };

    // Each instance share the same copy of this method (defined on top), the code is harder to read/maintain but it's more memory efficient
    vector.customMethod2 = customMethod2;

    return vector;
}; 
```

实例化

```
var myVector = SpecialRegion(bounds, options);
// Don't use the keyword 'new' here, SpecialRegion is a function, not a proper class.
myVector.customMethod(param);
myVector.customMethod2(param);
var val = myVector.customAttribute; 
```

# php - PHP - 将多维关联数组的键字符串转换为数字

> ID：10919848
> 
> 赞同：3
> 
> 时间：2012-06-06T18:19:21.037
> 
> 标签：php, multidimensional-array, associative-array, key-value

我有一个像这样的多维关联数组：

```
$type = Array(
  [unit-1] = Array(
    [taxon-1] = Array(
      [0] = Array(
        [a] = 1,
        [b] = 1,
        [c] = 'string1'
      ),
      [1] = Array(
        [a] = 1,
        [b] = 1,
        [c] = 'string2'
      ),
    ),
    [taxon-2] = Array(
      [0] = Array(
        [a] = 1,
        [b] = 2,
        [c] = 'string3'
      ),
      [1] = Array(
        [a] = 1,
        [b] = 2,
        [c] = 'string4'
      ),
    ),
  [unit-2] = Array(
    [taxon-1] = Array(
      [0] = Array(
        [a] = 2,
        [b] = 1,
        [c] = 'string5'
      ),
      [1] = Array(
        [a] = 2,
        [b] = 1,
        [c] = 'string6'
      ),
    ),
    [taxon-2] = Array(
      [0] = Array(
        [a] = 2,
        [b] = 2,
        [c] = 'string7'
      ),
      [1] = Array(
        [a] = 2,
        [b] = 2,
        [c] = 'string8'
      ),
    ),
  ) 
```

如何将所有关联键（unit-1、unit-2... 和 taxon-1、taxon-2...）转换为序数（0、1... 和 0、1...）。我是否需要使用 foreach 循环，如果是，它将如何进行？

请注意，数组中没有有限数量的单位和分类单元。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T18:35:26.033

如果肯定有两个级别：

```
$type = array_values(array_map('array_values', $type)); 
```

要重新索引数组中的所有数组键：

```
function array_reindex($array) {
    if(is_array($array)) {
        return array_map('array_reindex', array_values($array));
    } else {
        return $array;
    }
} 
```

尚未对其进行测试，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:20:32.170

你可以使用[`array_values`](http://php.net/manual/en/function.array-values.php)它。

# python - Python：如何从 .t xt 文件中打印 unicode 字符串

> ID：10919850
> 
> 赞同：0
> 
> 时间：2012-06-06T18:19:43.420
> 
> 标签：python, unicode, character-encoding, file-manipulation

我正在使用 Python 3.2.3 和空闲来编写文本游戏。我正在使用 .txt 文件来存储稍后将由程序打开并在终端上绘制的地图方案（暂时空闲）。

.txt 文件中的内容是：

```
╔════Π═╗
Π      ║ 
║w bb c□
║w bb c║ 
╚═□══□═╝ 
```

Π：门；□：窗；b：床；c：电脑；w: 衣柜

由于我是编程新手，因此我在执行此操作时遇到了难题。

这是我到目前为止为此编写的代码：

```
doc =  codecs.open("D:\Escritório\Codes\maps.txt")
map = doc.read().decode('utf8')
whereIsmap = map.find('bedroom')
if buldIntel == 1 and localIntel == 1:
    whereIsmap = text.find('map1:')
    itsGlobal = 1
if espLocation == "localIntel" == 1:
    whereIsmap = text.find('map0:')
if buldIntel == 0 and localIntel == 0:
    doc.close()

for line in whereIsmap:
    (map) = line
    mapa.append(str(map))
doc.close()

if itsGlobal == 1:
    print(mapa[0])
    print(mapa[1])
    print(mapa[2])
    print(mapa[3])
    print(mapa[4])
    print(mapa[5])
    print(mapa[6])
    print(mapa[7])

if itsLocal == 1 and itsGlobal == 0:
    print(mapa[0])
    print(mapa[1])
    print(mapa[2])
    print(mapa[3])
    print(mapa[4]) 
```

有两张地图，每一张都有一个标题，较小的一张是 map1（我展示的那个）。

如果我尝试运行程序，Python 会给出此错误消息：

```
Traceback (most recent call last):
  File "C:\Python32\projetoo", line 154, in <module>
    gamePlay(ask1, type, selfIntel1, localIntel, buildIntel, whereAmI, HP, time, itsLocal, itsBuild)
  File "C:\Python32\projetoo", line 72, in gamePlay
    map = doc.read().decode('utf8')
  File "C:\Python32\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte 
```

我该怎么做才能将地图完全按照我在那里显示的方式打印到 IDLE 终端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:25:39.493

问题是您使用`codecs.open`时没有指定编码，然后尝试解码由返回的字符串`doc.read()`，即使它已经是 Unicode 字符串。

`codecs.open`要解决此问题，请在对:的调用中指定编码`codecs.open("...", encoding="utf-8")`，这样以后就不需要调用了`.decode('utf-8')`。

此外，由于您使用的是 Python 3，因此您可以使用`open`：

```
doc = open("...", encoding="utf-8").read() 
```

最后，您需要在打印时重新编码 unicode 字符串：

```
print("\n".join(mapa[0:4]).encode("utf-8")) 
```

# qt - QtCore 对 QCoreApplication 的依赖

> ID：10919851
> 
> 赞同：2
> 
> 时间：2012-06-06T18:19:44.493
> 
> 标签：qt, shared-libraries, code-reuse

我正在尝试将 Qt 用作库（类似于[this](https://stackoverflow.com/questions/7979978/reusing-qtcore-module-in-any-c-project)），因为我想在一些*当前*非 Qt 应用程序中重用 Qt 类，并在共享库中作为跨平台胶水。一切都是非 GUI 的。

*DirectConnection*可以轻松避免一些问题，一些可以通过私有事件循环解决，甚至可以在线程中运行[假*QCoreApplication*](https://stackoverflow.com/questions/2150488/using-a-qt-based-dll-in-a-non-qt-application/10434948#10434948)并且它可以工作（最后的手段）。

我想知道哪些模块依赖于*QCoreApplication*的运行实例，没有它就无法工作。

一些 Qt 模块（在*QtCore*中）确实需要一个*QCoreApplication*实例才能正常运行。例如*QTimer*依赖*QCoreApplication*来调度定时器事件。我正在阅读 QtConcurrentRun 的[*文档*](http://doc.qt.nokia.com/4.6/qtconcurrentrun.html)[，](http://doc.qt.nokia.com/4.6/qtconcurrentrun.html)*它似乎依赖于*QThreadPool*的全局实例，我将尝试查看应用程序执行是否至关重要，或者该实例是否是在首次访问时创建的，或者可能不是。*

 *我将学习*QCoreApplicationPrivate*源代码（目前是 Windows 和 Linux），但非常感谢任何正确方向的提示。

核心应用程序的其他功能依赖项是什么？请注意，它可能取决于操作系统。

Edit1：感谢 Kuba 的回答，看来*QCoreApplication*事件循环对于调度计时器和套接字事件来说不是必需的。所以一些*QtCore模块需要**QCoreApplication*的实例，但不需要有一个正在运行的应用程序事件循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:15:23.293

您将 a 的存在`QCoreApplication`与正在运行的事件循环混为一谈。这两个是不同的概念。后者可能需要前者，但后者不必与前者在同一个线程中运行。

`qApp->exec()`最值得注意的是，如果您在构建 QCoreApplication 的线程中没有任何要调度的事件，您实际上不必调用。

QCoreApplication 的存在似乎不是问题。事情变得更加棘手`QApplication`- 您可以在非 gui 线程中启动它，但它不可移植，并且无法在 OS X 上运行。我试图弄清楚为什么它不起作用，但我没有现在有很多时间来提供令人满意的解决方案——还没有。

QCoreApplication 的事件循环需要运行以将套接字通知和计时器事件分派到其他线程也是一种误解。QCoreApplication 的事件循环并没有什么特别之处。当您在该线程中实例化第一个 QEventLoop 时，会为该线程创建一个特定于平台的 QAbstractEventDispatcher 实例。QEventLoop 不知道有关该平台的任何具体信息。

QCoreApplication 的`exec()`方法非常简单，它创建了一个 QEventLoop 的实例，因此将创建一个特定于平台的 QAbstractEventDispatcher 的实例。这个例子在任何方面都不是特别的。就我目前阅读的代码而言，它与在任何其他线程中创建的任何其他事件调度程序相同。

如果所有底层窗口系统都支持它，那么实际上可以使 Qt GUI 代码成为多线程的——每个线程的事件接收和分派已经作为一个小小的第一步。最大的障碍，可能是唯一的一个，将是 X 库及其[显示锁](http://ask.slashdot.org/comments.pl?sid=50400&cid=5099482)。显示锁显然是线程之间争用的问题。您需要每个想要与 GUI 对话的线程都打开到 X 服务器的单独连接，我不知道 Xlib 是否有支持的方式来做到这一点。*

# c# - ASP.NET Web 窗体 Facebook 开放图集成无法将令牌添加到会话状态

> ID：10919856
> 
> 赞同：0
> 
> 时间：2012-06-06T18:20:03.510
> 
> 标签：c#, asp.net, facebook, api, facebook-opengraph

我已经多次使用这个网站作为资源来寻找我的问题的答案，但这是我第一次发帖；因为我无法找到解决我问题的答案。

我正在尝试构建一个简单的 Facebook 应用程序，该应用程序会将单个静态帖子发布到添加应用程序的任何用户流（并且可以使用按钮控件多次重新发布消息（用于积分））。

我找到了大量的源代码和 C# Facebook SDK 的不同方法，但我目前在测试当前状态下的实现时遇到错误，表明 accessToken 为空，因此尝试将其用于数据收集不可能的。

这是我正在尝试的代码（我正在通过 HttpContext 上下文变量）：

```
var accessToken = context.Request["accessToken"];
        var accessToken_copy = context.Request["AccessToken"];
        context.Session["AccessToken"] = accessToken;
        if (accessToken_copy == null)
        {
            try
            {
                accessToken_copy = context.Request["accessToken"];
            }
            catch
            {
                accessToken_copy = SampleToken;
            }
        }

        var client = new FacebookClient(accessToken_copy);
        dynamic result = client.Get("me", new { fields = "name,id" });
        name = result.name;
        receiptID = result.id; 
```

这是服务器抛出的错误：

```
Server Error in '/' Application.
Value cannot be null.
Parameter name: accessToken
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentNullException: Value cannot be null.
Parameter name: accessToken

Source Error:

Line 44: 
Line 45: 
Line 46:             var client = new FacebookClient(accessToken_copy);
Line 47:             dynamic result = client.Get("me", new { fields = "name,id" });
Line 48:             name = result.name; 
```

任何帮助都会非常有帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:39:01.013

你忘了“我”结尾的“/”

看

```
dynamic result = client.Get("me/", new {fields ="name,id"}); 
```

# php - 简单的 xml 在实时服务器上不起作用

> ID：10919857
> 
> 赞同：0
> 
> 时间：2012-06-06T18:20:10.907
> 
> 标签：php, simplexml, zoho

我有调用 zoho api 的脚本，它在 localhost 上工作正常但是当我将脚本上传到服务器时它不起作用，错误说

```
Severity: Warning
Message: simplexml_load_file(https://crm.zoho.com/crm/private/xml/Leads/getMyRecords?newFormat=1&apikey={removed}&ticket={removed}): failed to open stream: Connection refused
Filename: models/xml_model.php
Line Number: 25 
```

我检查了 php.ini 设置以检查是否启用了简单的 xml，我可以看到它已启用。我还可以看到本地和主服务器的“allow_url_fopen”设置为“ON”

有什么我必须检查的吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:48:02.607

看看输出：

```
<?php phpinfo(); ?> 
```

它在“Registered PHP Streams”中显示了什么？你在那一行看到“https”吗？

如果没有，只需添加：

```
extension=php_openssl.dll 
```

到您的 php.ini 文件并重新启动 Web 服务器。它将加载 OpenSSL 扩展。

# uml - 类图编辑器

> ID：10919858
> 
> 赞同：0
> 
> 时间：2012-06-06T18:20:11.400
> 
> 标签：uml, tool-uml

我有一个非常大的文件.umlclass。里面有很多类，Enumerationtypes，relationships....我想在类图编辑器里整理一下，但是因为不知道东西在哪里所以不可能。

在 Eclipse 的项目资源管理器中，我可以看到树，在视图属性中，我可以看到每个属性的属性，但在类图编辑器中看不到它。

在图表编辑器中是否有任何类型的选择或查找每个资源？我正在使用 UML2Tools 插件。

提前致谢。

拉蒙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:41:06.123

实际上 UML2Tools 没有一个成熟的编辑器。考虑为您的 Eclipse UML2 模型使用另一个编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:27:25.197

Omondo EclipseUML 可以读取所有 UML2Tools 模型。

您只需要创建一个空的类图并将一个分类器拖放到图中即可。该项目将立即导入所有模型，然后允许您使用类图作为模型的查看器以图形方式在模型中导航。这真的很好，因为您的图表不再是模型本身，因为它对于许多工具而言，而只是您模型的查看器。真的很酷的功能:-)

# javascript - Javascript 动画未运行

> ID：10919859
> 
> 赞同：2
> 
> 时间：2012-06-06T18:20:11.607
> 
> 标签：javascript

我正在尝试创建一个上下滑动的动画菜单。不幸的是，它不起作用。我检查了错误控制台，没有语法错误。这是我的 Javascript：

```
function showLayer() {
    var hiddenLayer = document.getElementById("mainmenu");
    var layerPosition = parseInt(hiddenLayer.style.bottom);
    if (layerPosition > 700) {
        hiddenLayer.style.bottom = (layerPosition + 5) + "px";
        setTimeout("showLayer()", 20);
    }
}

function hideLayer() {
    var hiddenLayer = document.getElementByID("mainmenu");
    hiddenLayer.style.bottom = "700px";
} 
```

这是整个上下文：

```
<script type="text/javascript">
function showLayer() {
var hiddenLayer = document.getElementById("mainmenu");
var layerPosition = parseInt(hiddenLayer.style.bottom);
if (layerPosition > 700) {
hiddenLayer.style.bottom = (layerPosition + 5) + "px";
setTimeout("showLayer()", 20);
}
}
function hideLayer() {
var hiddenLayer = document.getElementByID("mainmenu");
hiddenLayer.style.bottom = "700px";
}
</script>

<style type="text/css">
div#mainmenu { position: absolute; bottom: 700px; left: 9px; width: 600px; 
height: 350px; border-style: solid; background-color: rgb(0, 0, 0) ; border-    
width: 3px; border-top-right-radius: 7px; border-top-left-radius: 7px; }
div#mainbutton { position: absolute; top: 674px; left: 12px; width: 28px;     
height: 28px; border-style: solid; border-color: rgb(255, 255, 255); border-width: 
1px; border-radius: 4px; }
div#mainbuttontext { position: absolute; top: 679px; left: 22px; color: rgb(255, 255, 
255); font-style: normal; font-size: 18px; font-family:"Arial"; }
</style>

<div id="mainbutton"></div>
<div id="mainmenu" onClick="showLayer('mainmenu')">&nbsp;</div>
<div id="mainbuttontext">F</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:00:56.533

我想我找到了你的问题！这很奇怪，我无法解释，但要在 javascript 中**获得**样式，css 必须是内联的（**设置**样式不是必需的）。

所以我通过将css内联来修改你的代码。

**HTML：**

```
<div id="mainmenu" style="position:absolute;bottom:100px;" onclick="showLayer('mainmenu');">Click me!</div>

<!--I wrote 100px just for the test, you can change it and modify the js--> 
```

**JS：**

```
function showLayer()
{
    var hiddenLayer=document.getElementById("mainmenu");
    var layerPosition=parseInt(hiddenLayer.style.bottom);
    if(layerPosition>50)
    {
        hiddenLayer.style.bottom=(layerPosition+5)+"px";
        setTimeout("showLayer()",20);
    }
}

function hideLayer()
{
    var hiddenLayer=document.getElementById("mainmenu");
    hiddenLayer.style.bottom="700px";
} 
```

**小提琴：http:** [//jsfiddle.net/8MWfV/](http://jsfiddle.net/8MWfV/)

这是一个小提琴，表明非内联 css 不起作用：http: [//jsfiddle.net/kfUrP/](http://jsfiddle.net/kfUrP/)

# php - Jquery（ajax）PHP搜索结果未显示在表单下的search_results div中

> ID：10919861
> 
> 赞同：0
> 
> 时间：2012-06-06T18:20:15.787
> 
> 标签：php, jquery, html, ajax, dom

对于我正在为学校制作的网站，我第一次尝试广泛使用 Jquery，尽管到目前为止我已经做了很多，但我遇到了两个（最有可能相关的）问题。

我知道即将到来的案例有点长，但我觉得有必要为阅读本文的每个人提交所有相关代码，以便更好地了解正在发生的事情。

基本上，该网站是一个 index.html 文件，其中包含 CSS、几个按钮和一个带有 ID 内容的 div。我使用这段代码来完成这项工作：

```
 <script type="text/javascript">
        if ($('#content').innerHTML == " "){
            $(document).ready(function(){
                $('#content').load('main_text.html');
            });
        }
    </script>   
    <script type="text/javascript">
        function loadContent(elementSelector, sourceURL) {
            $(""+elementSelector+"").load(""+sourceURL+"");
        }
    </script> 
```

然后是一个名为 search.html 的内容页面，它只包含一个表单，该表单将搜索字符串提交给 search.php 页面（通过 ajax），然后该页面应立即将搜索结果放回同一搜索中名为 search_results 的 div .html 文件。我用于此的 jquery：

```
 <script type='text/javascript'> 
        $(document).ready(function(){ 
        $("#search_results").slideUp(); 
            $("#search_button").click(function(e){ 
                e.preventDefault(); 
                ajax_search(); 
            }); 
            $("#search_term").keyup(function(e){ 
                e.preventDefault(); 
                ajax_search(); 
            }); 

        }); 

        function ajax_search(){ 
            $("#search_results").show(); 
            var search_val=$("#search_term").val(); 

            $.post("Functions/search.php", {search_term : search_val}, function(data){
                if (data.length>0){ 
                    $("#search_results").html(data); 
                } 
            }) 
        } 
    </script> 
```

我遇到的问题如下：在我有第一行代码之前： if ($('#content').innerHTML == " "){; 实施后，我会打开网站，很好地加载 main_text.html，我可以很好地导航到其他子页面。但是在 search.html 的表单字段中输入一些内容并没有显示任何结果（只是输入应该已经触发了该功能）。当我点击此表单上的搜索按钮时，没有看到查询结果，main_text.html 文件再次加载到#content div 中。这让我假设，不知何故，代码：

```
 $(document).ready(function(){
        $('#content').load('main_text.html');
    }); 
```

被再次称为不受欢迎。Hency 为什么我实施了检查 innerHTML 是否存在的原因。

但是，现在，当我第一次加载页面时，#content div 根本不会加载任何初始内容。（网页上的部分刚刚变成黑色，就像我的页面背景一样）我必须单击任何按钮才能在我的主要内容 div 中再次加载一些内容。此外，当我现在回到 search.html 时，键入任何内容以获取结果，就像以前一样，仍然不起作用。如果我现在点击搜索按钮，我会再次得到我刚打开页面时看到的初始结果：一个黑色的#content div。

所以不知何故，最大的问题是从我的 PHP 获取结果的 jquery 似乎不起作用。如果修复了 search.html 的 #search_result div 中未显示的 searchresults 问题，我的 content.innerhtml 检查问题可能已经过时。

任何人都知道我可以做些什么来解决这个问题。或者，对于我正在制作的那种网站，我可以采取哪些其他方法。由于我正在尝试在这里学习 jquery，因此总是赞赏更好的方法，我宁愿学习自己以正确的方式做这件事。:)

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:39:03.450

这里有几点需要注意：

```
<script type="text/javascript">
    if ($('#content').innerHTML == " "){
        $(document).ready(function(){
            $('#content').load('main_text.html');
        });
    }
</script>   
<script type="text/javascript">
    function loadContent(elementSelector, sourceURL) {
        $(""+elementSelector+"").load(""+sourceURL+"");
    }
</script> 
```

在上面，您正在测试是否`space`在带有`id of content`.

jQuery 使用 .html() 或 .text() 与容器中保存的数据进行比较，因此如果您想使用 jQuery 原则进行维护，请更改此行。沿着同样的思考过程，你正在准备一份`IF`声明`element``document is actually ready and loaded.`

您应该将 document.ready 函数移动`outside`到`if statement`. 这将允许您确保该元素在 DOM 中可用，并且您确实可以对该元素执行检查。

```
<script type="text/javascript">
  $(document).ready(function(){ 
    if ($('#content').html("")){
        $('#content').load('main_text.html');
    }
  });
</script> 
```

此外，虽然易于提供且功能齐全，但我建议开始使用`$.ajax`而不是`$.get / $.post`. 对于我为什么这么认为，我有个人偏好，但我不会深入探讨，只是*个人喜好*。

```
$.ajax({
  url: "Functions/search.php",
  type: 'POST',
  data: "search_term="+search_val,
  success: function(data){
    if (data.length>0){ 
      $("#search_results").html(data); 
    } 
}); 
```

最后，您应该使用`GET method`而不是`POST method`. 根据 REST/SOAP 实践，您正在从服务器检索数据，而不是将数据发布到服务器。遵循这两个简单的想法是最佳实践。这并不是因为 Web 服务器很难解释数据；但是，相反，它是让您为更大规模的应用程序部署或未来的团队环境做好准备。这样，团队中的每个人都对将使用什么方法用于什么目的有一个期望。

无论如何，长话短说，你也离开了括号`semicolons`的末尾。`closing })`虽然这不是问题，也不会导致您的开发出现缺陷，`coding is all about uniformity`. 您已经`;`在其他地方使用了关闭，因此请尝试保持相同的统一设计。

祝你好运。

# html - 如果用户离开或关闭浏览器，HTML5 Web Workers 会完成吗？

> ID：10919868
> 
> 赞同：4
> 
> 时间：2012-06-06T18:20:29.447
> 
> 标签：html, web-worker

如果 web worker 启动，然后用户转到另一个页面或关闭浏览器，web worker 是否仍然完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:24:33.220

一旦所有所有者都关闭，工人将终止。如果您有一个共享的工作人员，它将保持活动状态，直到所有所有者都关闭（例如，它可能存在于另一个选项卡中）。关闭浏览器将永远杀死所有工作人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:24:09.470

当浏览器关闭时，web worker 停止，因为它没有在外部服务器上运行。

* * *

[类似的问题](https://stackoverflow.com/questions/8875310/what-happens-to-an-html5-web-worker-thread-when-the-tab-is-closed-while-its-run)

# javascript - UIWebView 是否允许 XML DOM 解析器？

> ID：10919872
> 
> 赞同：0
> 
> 时间：2012-06-06T18:20:42.217
> 
> 标签：javascript, iphone, objective-c, ios, uiwebview

我不太确定，也找不到任何东西。

使用 stringByEvaluatingJavascriptFromString:，我已经能够从 Objective-c 操作页面中的 javascript。但是，我现在想通过将原始 xml 数据从 iOS UIWebView 传递到 html 文件（应用程序本地）来填充表单字段，然后使用解析的数据。

查看 W3C 文档，似乎我需要执行以下操作：

```
parser = new DOMParser();
xmlString = parser.parseFromString(txt, "text/xml"); 
```

它应该从 XML 中返回一个 DOM 对象（这里由字符串 txt 表示）。然后我应该能够访问这个 DOM 对象的属性

```
xmlString.getElementsByTagName("from")[0].childNodes[0].nodeValue; 
```

假设我们有一个 XML 节点，例如：

```
<from>Sender</from> 
```

但是，这似乎不起作用。将该 nodeValue 设置为字符串并返回它会返回 nil。同样，不会填充表单域。

那么，我的问题是，应用程序中的嵌入式浏览器是否可以利用 DOM 解析器 - 如果可以，我可以使用什么语法来访问其中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:25:02.530

解决了，不幸的是非常快。似乎在设置表单字段时，您需要指定 VALUE 而不是 innerhtml。

所以我做了：

```
document.getElementById("FIELDID").value = 
            xmlString.getElementsByTagName("from")[0].childNodes[0].nodeValue; 
```

此外，我将传递给 DOM 解析器的参数错误 - 第二个参数是“text/xml”。

# android - 删除不同选项卡中的列表项

> ID：10919873
> 
> 赞同：1
> 
> 时间：2012-06-06T18:20:42.233
> 
> 标签：android, listview, android-tabhost

我有一个使用两个独立数据库的选项卡主机活动。每个选项卡都有一个列表视图。我正在尝试使用上下文菜单通过长按来删除列表项。我所拥有的将在 list1 选项卡上工作，但不会删除 list2 选项卡中的列表项。这是我的代码：

```
public class TabListActivity extends TabActivity implementsOnTabChangeListener,OnClickListener{

private static final String LIST1_TAB_TAG = "Mixed Recipes";
private static final String LIST2_TAB_TAG = "Pre-Mixed Recipes";

// The two views in our tabbed example
private ListView listView1;
private ListView listView2;

private TabHost tabHost;
private DatabaseManager mDbHelper;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs);
    mDbHelper = new DatabaseManager(this);
    mDbHelper.open();

    tabHost = getTabHost();
    tabHost.setOnTabChangedListener(this);

    // setup list view 1
    listView1 = (ListView) findViewById(R.id.list1);
    registerForContextMenu(listView1);
    // setup list view 2
    listView2 = (ListView) findViewById(R.id.list2);
    registerForContextMenu(listView2);
    // add views to tab host
       tabHost.addTab(tabHost.newTabSpec(LIST1_TAB_TAG).setIndicator(LIST1_TAB_TAG).setContent(new TabContentFactory() {
        public View createTabContent(String arg0) {
            return listView1;
        }
    }));
    tabHost.addTab(tabHost.newTabSpec(LIST2_TAB_TAG).setIndicator(LIST2_TAB_TAG).setContent(new TabContentFactory() {
        public View createTabContent(String arg0) {
            return listView2;
        }
    }));
    tabHost.setCurrentTab(1);
    tabHost.setCurrentTab(0);

 }

/**
 * Implement logic here when a tab is selected
 */
public void onTabChanged(String tabName) {
    if(tabName.equals(LIST2_TAB_TAG)) {
        //do something
        fillDatapremix();
    }
    else if(tabName.equals(LIST1_TAB_TAG)) {
        //do something
        fillData();
    }
}

private void fillData() {
Cursor notesCursor = mDbHelper.fetchAllNotes();
startManagingCursor(notesCursor);

// Create an array to specify the fields we want to display in the list (only TITLE)
String[] from = new String[]{DatabaseManager.KEY_NAME, DatabaseManager.KEY_ROWID};
//String1[] from = new String[]{DatabaseManager.KEY_ROWID};

// and an array of the fields we want to bind those fields to (in this case just text1)
int[] to = new int[]{android.R.id.text1};
//int[] to = new int[]{android.R.id.text2};

// Now create a simple cursor adapter and set it to display
SimpleCursorAdapter notes = 
    new SimpleCursorAdapter(this,android.R.layout.simple_list_item_2, notesCursor, from,   to);
listView1.setAdapter(notes);

listView1.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {

    Intent myIntent = new Intent(view.getContext(),
            NoCalc.class);
    myIntent.putExtra(DatabaseManager.KEY_ROWID, id);

    startActivity(myIntent);
}
});
}
public void onClick(View v) {
    // TODO Auto-generated method stub
}   

private void fillDatapremix() {
Cursor notesCursor = mDbHelper.fetchAllNotespremix();
startManagingCursor(notesCursor);

// Create an array to specify the fields we want to display in the list (only TITLE)
String[] from = new String[]{DatabaseManager.KEY_NAME, DatabaseManager.KEY_ROWID};
//String1[] from = new String[]{DatabaseManager.KEY_ROWID};

// and an array of the fields we want to bind those fields to (in this case just text1)
int[] to = new int[]{android.R.id.text1};
//int[] to = new int[]{android.R.id.text2};

// Now create a simple cursor adapter and set it to display
SimpleCursorAdapter notes = 
    new SimpleCursorAdapter(this,android.R.layout.simple_list_item_2, notesCursor, from,   to);
listView2.setAdapter(notes);

listView2.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {

    Intent myIntent = new Intent(view.getContext(),
            Premix2.class);
    myIntent.putExtra(DatabaseManager.KEY_ROWID, id);

    startActivity(myIntent);
}
});
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
super.onCreateContextMenu(menu, v, menuInfo);
switch (v.getId()) {
}
menu.setHeaderTitle("Delete Recipe?");
menu.add(0, v.getId(), 0, "Delete");

}

public boolean onContextItemSelected(MenuItem item) {
switch(item.getItemId()) {
    case R.id.list1:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        mDbHelper.deleteRow(info.id);
        fillData();
        return true;
    case R.id.list2:
        AdapterContextMenuInfo info1 = (AdapterContextMenuInfo) item.getMenuInfo();
        mDbHelper.deleteRow(info1.id);
        fillData();
        return true;

}
return false;
}
} 
```

我的问题是，如何获得第二个选项卡以从列表和数据库中删除列表项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:55:20.967

您有单独的 fillData() 和 fillDatapremix() 函数和 2 个单独的函数来从 2 个数据库中检索游标，但看起来在您的 onContextItemSelected 函数中，您对每个列表使用相同的 DatabaseManger 删除函数和 fillData() 函数。

看起来您需要为第二个数据库使用不同的删除函数，然后使用 fillDatapremix() 而不是 fillData() 来更新 listView。

# apache-camel - 如何将文件移动到错误目录并使用 apache camel 回滚其他移动？

> ID：10919874
> 
> 赞同：2
> 
> 时间：2012-06-06T18:20:51.057
> 
> 标签：apache-camel

首先：我是骆驼新手:-)

我想将文件从输入目录传输到输出目录并做一些 java 的事情。如果出现问题，我想将文件移动到错误目录并回滚以移动到输出目录。

这是我在 java dsl 中的路线：

```
onException(Exception.class).handled(true).to("file://C:/temp/camel/error");
from("file://C:/temp/camel/in?delete=true").to("file://C:/temp/camel/out").bean(ServiceBean.class, "callWebservice"); 
```

如果在 ServiceBean 中抛出错误，该文件将被复制到错误文件夹中，但它也保留在 out 目录中。

回滚的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T04:12:00.830

There is a moveFailed option. Just use that, then you dont need the onException etc. [http://camel.apache.org/file2](http://camel.apache.org/file2)

```
from("file://C:/temp/camel/in?delete=true&moveFailed=C:/temp/camel/error")
  .to("file://C:/temp/camel/out")
  .bean(ServiceBean.class, "callWebservice"); 
```

And instead of storing to out in the route, then just use the move option so it becomes

```
from("file://C:/temp/camel/in?move=/temp/camel/out&moveFailed=/temp/camel/error")
  .bean(ServiceBean.class, "callWebservice"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:38:41.927

我认为您不能轻松地“回滚”文件系统操作。也许您可以重新设计您的流程，首先将文件复制到某个中间“阶段”目录，完成您需要的工作，并根据该工作的结果将文件移动到“输出”或“错误”目录。

# database - 哪种 DBMS 适合我的需求？

> ID：10919875
> 
> 赞同：1
> 
> 时间：2012-06-06T18:20:53.323
> 
> 标签：database, relational-database

我正在开展一个旨在分析从各种终端收集的生物特征数据的项目。该过程对性能不是很关键。相反，它是 I/O 有界的。数据量非常庞大。（每张表有数亿条记录）。不幸的是，数据库是关系型的。并且有20个外键。在作业完成期间更改引用键的值非常常见。所以在收集数据的过程中会有很多 UPDATE 和 SET NULL 。

目前，设计了数据库的语义。所有程序几乎完成，并且创建了数据库的 MySQL 原型。它适用于样本（小规模）数据。

我进行搜索以找到适合该项目的 DBMS。谷歌搜索“DBMS 比较”，......没有帮助。人们说对立的事情。有人说 MySQL 会执行更快的插入和更新，有人说 Oracle9 更好......

我在 DBMS 之间找不到任何可靠的、基于基准的比较。我在日常项目中使用 MySQL，但这个看起来更重要。

我们需要的：

*   DBMS 的许可和成本并不重要，但当然首选开源（GPL 或 LGPL）（因为整个项目将在 LGPL 下发布）。
*   非常快的插入，非常快的更新，需要大量的外键。
*   DBMS 应一次响应 0 - 100 个连接。
*   终端通过本地网络 (LAN) 连接到服务器。

我真正在寻找的是各种 DBMS 的基准。它可能包含图表、不同操作（插入、更新、删除）在各种情况下（与引用字段或普通表的关系）的单独比较......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:38:10.600

对于这类答案，我会推荐 PostgreSQL、Informix 或 Oracle。PostgreSQL 是开源的（BSDL，GPL 兼容，大家都同意）。原因与数据建模的某些方面有关，这些方面可能对您的情况非常有帮助。一般来说，你有两个重要的问题：

1）我可以为我正在做的事情调整我的数据库多远？我可以扩展多远？

和

2）我如何建模我的数据？

首先，Oracle 和 PostgreSQL 更复杂但更灵活。这种灵活性可能会派上用场。其次，灵活性可能会在以后为您节省*大量*精力。此外，它为优化打开了新的大门，这在直接的关系模型中是不可能的。首先我建议看一下：[http](http://db.cs.berkeley.edu/papers/Informix/www.informix.com/informix/corpinfo/zines/whitpprs/illuswp/wave.htm) ://db.cs.berkeley.edu/papers/Informix/www.informix.com/informix/corpinfo/zines/whitpprs/illuswp/wave.htm ，因为它会给你一些背景至于我在想什么。此外，如果您查看 Stonebraker 所说的内容，您会发现直接的基准测试实际上是苹果与橘子的比较。

使用 ORDBMS 的想法意味着一些重要的事情：

1.  您可以根据数据对数据进行功能建模。例如，您可以在 Java 或 Python 中使用一个函数来操作您的数据并返回结果。您可以索引这些函数的输出，如果需要或不需要在 insert 和 select 性能之间进行交易，则可以交易 insert 以换取 select 性能。
2.  存储的数据越少意味着插入越快。
3.  使用自定义类型和函数扩展数据的能力，提供对数据的更高性能访问。

PostgreSQL 9.2 将在足够的硬件上支持每秒大约 14000 次写入，这没什么好打喷嚏的。当然，这取决于写入的宽度、服务器上的硬件性能等。Affilias 使用 PostgreSQL 来管理 .org 和 .info 顶级域（网络规模！）以及 Skype 的基础架构（仍然，即使在微软购买它们之后）。

最后，作为信息管道的一部分，如果您正在处理大量数据并且需要在发送到 PostgreSQL 之前进行一些预处理，您可以查看 array-native db（对于科学工作中常见的 NoSQL 方法）或 VoltDB（对于用于高吞吐量处理的内存存储）。尽管它们是截然不同的系统，但 VoltDB 和 Postgres 实际上是由同一个人启动的。

最后，关于基准图表，主要的数据库供应商或多或少地禁止在其许可协议中发布此类图表，因此您将找不到它们。

# c# - 试图用 wpf 创建一个箭头的形状？

> ID：10919876
> 
> 赞同：0
> 
> 时间：2012-06-06T18:20:58.183
> 
> 标签：c#, wpf

我正在尝试创建这样的形状：

----------> <----------

没有破折号，它必须是垂直的......有没有一种简单的方法可以使用后面代码中的 wpf 中的 Line 控件来做到这一点？谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:35:26.277

有很多方法可以做你想做的事。这是设置高度的简单方法。

```
<Grid Height="100" Width="10">
    <Grid.RowDefinitions>
        <RowDefinition Height="35" />
        <RowDefinition Height="10" />
        <RowDefinition Height="10" />
        <RowDefinition Height="10" />
        <RowDefinition Height="35" />
    </Grid.RowDefinitions>
    <Line Grid.Row="0" Y1="0" Y2="35" X1="0" X2="0" Stroke="Black" StrokeThickness="1" HorizontalAlignment="Center" />
    <Path Grid.Row="1" Data="M0,0 L5,10 L10,0Z" Stroke="Black" Fill="Black" StrokeThickness="1" HorizontalAlignment="Center" />
    <Path Grid.Row="3" Data="M0,10 L5,0 L10,10" Stroke="Black" StrokeThickness="1" HorizontalAlignment="Center" />
    <Line Grid.Row="4" Y1="0" Y2="35" X1="0" X2="0" Stroke="Black" StrokeThickness="1" HorizontalAlignment="Center" />
</Grid> 
```

您可以通过在 Data 属性的末尾添加 Z 来关闭箭头。设置填充值将为箭头着色。

这是一些很酷的箭头东西的一个很好的[链接](http://charlespetzold.com/blog/2007/04/191200.html)。

# r - 从 data.frame 中提取行标签 (?)

> ID：10919877
> 
> 赞同：3
> 
> 时间：2012-06-06T18:20:58.657
> 
> 标签：r, dataframe

从 data.frame 开始...

```
df = data.frame(k=c(1,5,4,7,6), v=c(3,1,4,1,5))
> df
  k v
1 1 3
2 5 1
3 4 4
4 7 1
5 6 5 
```

我可能会进行一些任意操作...

```
> foo1 = df[df$k>3,]
> foo2 = head(foo1[order(foo1$v),], 2)
> foo2
  k v
2 5 1
4 7 1 
```

此时`foo2`已以某种方式保留了原始行号`df`（在本例中为 2 和 4）。

我如何提取这些？

```
> insert_magic_function_here(foo2)
[1] 2 4 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T18:22:30.103

我想你正在寻找`rownames`.

# sql - 动态添加列进行查询

> ID：10919881
> 
> 赞同：1
> 
> 时间：2012-06-06T18:21:07.180
> 
> 标签：sql, sql-server-2008, tsql, dynamic

我正在尝试创建一个动态查询，该查询根据错误代码选择特定列。

例如，我有一个包含多列的错误表 (ErrorTable)：

```
Transaction Number 
Transaction Amount
Transaction Date
Error Code
Error Description
+100 other columns 
```

错误表

```
Error Code
Error Description
Error Column 
```

我正在尝试获取将获得以下内容的查询：

```
ErrorCode
ErrorDescription
ErrorColumn (Column Based On Error Code) 
```

我尝试使用如下动态 SQL，但仍然只返回了列的名称，也许我做错了什么？

```
DECLARE @SQL VarChar(1000)
SELECT @SQL = 'SELECT et.ErrorCode, et.ErrorDescription, e.ErrorColumn 
               FROM ErrorTable et
                   INNER JOIN Errors e ON e.ErrorCodeID = et.ErrorCode'
Exec ( @SQL) 
```

如果我在动态查询中使用 @ErrorColumn = 'TransactionDate' 而不是 e.ErrorColumn 我会得到结果，但对于上面的查询我没有。有任何想法吗？

**更新 2**

通过上述查询，我​​得到以下结果：

```
ErrorCode    ErrorDesc              TransactionDate    TransactionAmount
1            Invalid Trans Date     TransactionDate    TransactionAmount
2            Invalid Trans Amount   TransactionDate    TransactionAmount 
```

我想要以下内容：

```
ErrorCode    ErrorDesc              TransactionDate    TransactionAmount
1            Invalid Trans Date     May 1st            
2            Invalid Trans Amount                      65 Cats 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:47:27.933

您是否打算这样做：

```
DECLARE @ErrorColumn SYSNAME = N'TransactionDate';
-- presumably the above is a parameter to the procedure

DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'SELECT et.ErrorCode, et.ErrorDescription, et.' 
  + QUOTENAME(@ErrorColumn)
  + ' FROM dbo.ErrorTable AS et
      INNER JOIN dbo.Errors AS e
      ON e.ErrorCodeID = et.ErrorCode;';

EXEC sp_executesql @sql; 
```

根据进一步的信息，也许您想要的是：

```
SELECT et.ErrorCode, et.ErrorDescription, 
  TransactionDate   = CASE et.ErrorColumn WHEN N'TransactionDate' 
    THEN e.TransactionDate   ELSE NULL END,
  TransactionAmount = CASE et.ErrorColumn WHEN N'TransactionAmount' 
    THEN e.TransactionAmount ELSE NULL END
FROM dbo.ErrorTable AS et 
INNER JOIN dbo.Errors AS e
ON et.ErrorCode = e.ErrorCodeID; 
```

或这个：

```
SELECT et.ErrorCode, et.ErrorDescription, 
  TransactionDate   = CASE et.ErrorColumn WHEN N'TransactionDate' 
    THEN e.TransactionDate   ELSE '' END,
  TransactionAmount = CASE et.ErrorColumn WHEN N'TransactionAmount' 
    THEN e.TransactionAmount ELSE '' END
FROM dbo.ErrorTable AS et 
INNER JOIN dbo.Errors AS e
ON et.ErrorCode = e.ErrorCodeID; 
```

如果只需要返回数据集中实际存在的列，则稍微复杂一些。您基本上必须构建动态 SQL 以仅包含您必须在最终查询中引用的列。

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += ',' + CHAR(13) + CHAR(10) 
  + et.ErrorColumn + ' = CASE et.ErrorColumn WHEN N''' 
  + et.ErrorColumn + ''' THEN e.' + et.ErrorColumn + ' ELSE NULL END'
FROM dbo.ErrorTable AS et INNER JOIN dbo.Errors AS e
ON et.ErrorCode = e.ErrorCodeID
GROUP BY et.ErrorColumn;

SELECT @sql = N'SELECT et.ErrorCode, et.ErrorDescription' 
  + @sql + '
  FROM dbo.ErrorTable AS et 
INNER JOIN dbo.Errors AS e
ON et.ErrorCode = e.ErrorCodeID;';

PRINT @sql;

-- EXEC sp_executesql @sql; 
```

# ios - 如何检测 NSUserDefault 的变化？

> ID：10919885
> 
> 赞同：1
> 
> 时间：2012-06-06T18:21:20.193
> 
> 标签：ios, xcode, switch-statement, nsuserdefaults

我有开关，我想检测是否有任何开关改变了位置，如果进行了改变，我需要开始我的行动。

切换存储位置`NSUserDefaults`

```
- (IBAction)saveSwitch:(id)sender
{     
    NSUserDefaults *defs1 = [NSUserDefaults standardUserDefaults];
    [defs1 setBool: blackSwitch.on forKey: @"blackKey"];

    NSUserDefaults *defs2 = [NSUserDefaults standardUserDefaults];
    [defs2 setBool: greenSwitch.on forKey: @"greenKey"];

    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T19:14:32.183

您可以在拨打电话时发布通知`synchronize`

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"MyAppSettingsChanged" object:self userInfo:nil]; 
```

然后在你的其他班级听通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onAppSettingsChanged:) name:@"MyAppSettingsChanged" object:nil];

-(void) onAppSettingsChanged:(NSNotification)notification
{
   // settings changed
} 
```

如果需要，您可以`NSDictionary`在调用时传递一个到 userInfo`postNotificationName`中，其中包含诸如哪些设置已更改之类的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T08:58:57.447

如果您使用的是 NSUserDefaults ，最简单的方法是订阅[NSUserDefaultsDidChangeNotification](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/uid/20000318-BAJIEFCA)。它会在发生变化时自动发送。

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(appSettingsDidChange:)
                                             name:NSUserDefaultsDidChangeNotification
                                           object:nil]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-11T14:51:17.077

跟踪更改的最佳方法`NSUserDefaults`是使用 KVO 添加观察者。这样，您无需手动执行任何自定义通知代码或跟踪更改。

在想要了解更改的类中，只需将其注册为指定键的侦听器：

```
[[NSUserDefaults standardUserDefaults] addObserver:self forKeyPath:@"blackKey" options:NSKeyValueObservingOptionNew context:nil];    
[[NSUserDefaults standardUserDefaults] addObserver:self forKeyPath:@"greenKey" options:NSKeyValueObservingOptionNew context:nil]; 
```

然后只需响应通知：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if (object == defaults) {
         // Here you can grab the values or just respond to it with an action.
    }
} 
```

现在，只要其中一个键发生更改，您就会自动收到通知。

这是一个超级干净的解决方案，允许大量重复使用。例如，如果您将`NSKeyValueObservingOptionInitial`键添加到`options`上面的参数 ( `NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew`) 中，那么它也会将初始值通知您的观察者方法，即使对于初始状态，您也可以重用该方法。

* * *

斯威夫特版本

设置默认值：

```
NSUserDefaults.standardUserDefaults().addObserver(self, forKeyPath: "blackKey", options: .New, context: nil)
NSUserDefaults.standardUserDefaults().addObserver(self, forKeyPath: "greenKey", options: .New, context: nil) 
```

观察者：

```
override func observeValueForKeyPath(keyPath: String, ofObject object: AnyObject, change: [NSObject : AnyObject], context: UnsafeMutablePointer<Void>) {
    if object is NSUserDefaults {
        // Here you can grab the values or just respond to it with an action.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:53:42.153

您无法检测 NSUserDefaults 中的更改。相反，跟踪开关本身何时更改，并处理该事件。例子：

```
[blackSwitch addTarget:self
                action:@selector(blackSwitchChanged:) 
      forControlEvents:UIControlEventValueChanged]; 
```

处理开关位置变化：

```
- (IBAction)blackSwitchChanged:(id)sender {
    NSLog(@"Black switch changed");
    ..
    // check if blackSwitch is on or off.
} 
```

# c# - 如何将这两种相似的方法合二为一？

> ID：10919887
> 
> 赞同：2
> 
> 时间：2012-06-06T18:21:24.327
> 
> 标签：c#

以下方法只是彼此的倒数。我怀疑我可以将逻辑组合成一种方法。我更喜欢避免反射。是否可以将它们结合起来并保持可读性？

```
 private void btnAdd_Click(object sender, EventArgs e)
    {
        LabEntity selectedItem = bindingSource1.Current as LabEntity;
        selectedLabsData.Add(selectedItem);
        availableLabsData.Remove(selectedItem);
    }

    private void btnRemove_Click(object sender, EventArgs e)
    {
        LabEntity selectedItem = bindingSource2.Current as LabEntity;//new binding source
        availableLabsData.Add(selectedItem);//called Add instead of remove
        selectedLabsData.Remove(selectedItem);//called Remove instead of Add
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T18:29:26.603

您可以将逻辑分解为辅助方法：

```
private void ListFixup(object entity, List<Item> addList, List<Item> removeList)
{
    LabEntity selectedItem = entity as LabEntity;
    // don't forget your error checking here

    addList.Add(selectedItem);
    removeList.Remove(selectedItem);
}

private void btnAdd_Click(object sender, EventArgs e)
{
    ListFixup(bindingSource1.Current, selectedLabsData, availableLabsData);
}

private void btnRemove_Click(object sender, EventArgs e)
{
    ListFixup(bindingSource2.Current, availableLabsData, selectedLabsData);
} 
```

我不确定这有助于提高可读性，但它确实减少了代码重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:31:22.247

```
private void btnAdd_Click(object sender, EventArgs e)
{
   SwapThem( bindingSource1, selectedLabsData, availableLabsData );
}

private void btnRemove_Click(object sender, EventArgs e)
{
   SwapThem( bindingSource2, availableLabsData, selectedLabsData );
}

// I just don't know the proper type-cast of the "toAddTo" and "toRemoveFrom" parameters.
private void SwapThem( BindingSource bs, List<yourType> toAddTo, List<yourType> toRemoveFrom )
{
   LabEntity selectedItem = bs.Current as LabEntity;
   toAddTo.Add(selectedItem);
   toRemoveFrom.Remove(selectedItem);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:32:53.840

没有任何方法可以重构不会显着降低代码可读性的两种方法，您可以在发布的其他一些答案中看到这一点。这是为了可读性而可以接受代码重复级别的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:29:10.923

为发件人添加标签？

```
private void btnClick(object sender, EventArgs e)
{
Button *myButton = (Button)sender;
if (myButton.tag == 1){
        LabEntity selectedItem = bindingSource1.Current as LabEntity;
        selectedLabsData.Add(selectedItem);
        availableLabsData.Remove(selectedItem);
}
else {
LabEntity selectedItem = bindingSource2.Current as LabEntity;//new binding source
        availableLabsData.Add(selectedItem);//called Add instead of remove
        selectedLabsData.Remove(selectedItem);//called Remove instead of Add
}
} 
```

我没有检查编译器错误，这只是一个例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T18:31:48.253

让两个按钮都链接到一个事件处理程序。处理程序可能看起来像这样：（请原谅对按钮的多项检查，因为我不知道要为 'availableLabsData' 和 'selectedLabsData' 声明持有者的类型）：

```
 private void btnClick(object sender, EventArgs e)
    {
        var bindingSource = (sender == btnRemove) ? bindingSource2 : bindingSource1;   
        var selectedItem = source.Current as LabEntity;
        if(sender == btnRemove) 
        {
            availableLabsData.Add(selectedItem);
            selectedLabsData.Remove(selectedItem);
        }
        else if(sender == btnAdd)
        {
            availableLabsData.Remove(selectedItem);
            selectedLabsData.Add(selectedItem);
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T19:00:29.377

每个人都没有过火而牺牲代码的可读性是正确的

我唯一的想法是...

仅从发布的代码来看，它看起来像`selectedLabsData`并且`availableLabsData`紧密交织在一起，因此我不会将与它们相关的逻辑放在您的事件处理程序中。将逻辑放在不同的方法中（最好是不同的类），这样您就不会不小心更新一个而不更新另一个。这样做的好处是使所讨论的方法更简单、更“可读”。

```
private void LabsDataAdded(LabEntity value)
{
    selectedLabsData.Add(value);
    availableLabsData.Remove(value);
}

private void LabsDataRemoved(LabEntity value)
{
    availableLabsData.Add(value);
    selectedLabsData.Remove(value);
} 
```

那么方法就是：

```
private void btnAdd_Click(object sender, EventArgs e)
{
    LabsDataAdded(bindingSource1.Current as LabEntity);
}

private void btnRemove_Click(object sender, EventArgs e)
{
    LabsDataRemoved(bindingSource2.Current as LabEntity);
} 
```

更好的是，您可以使用 lambda 表达式使代码更加简洁：

```
btnAdd.Clicked += (sender, e) => LabsDataAdded(bindingSource1.Current as LabEntity);
btnAdd.Clicked += (sender, e) => LabsDataRemoved(bindingSource1.Current as LabEntity); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-06T18:23:51.257

像这样的东西：

```
private void btnAdd_Click(object sender, EventArgs e)
{
    LabEntity selectedItem = bindingSource1.Current as LabEntity;
    RemoveItemFromList(selectedItem);
}

private void btnRemove_Click(object sender, EventArgs e)
{
    LabEntity selectedItem = bindingSource2.Current as LabEntity;//new binding source
    RemoveItemFromList(selectedItem);
}

private void RemoveItemFromList(LabEntity ent)
{
    selectedLabsData.Add(ent);
    availableLabsData.Remove(ent);
} 
```

# python - 在 python 中获取正在运行的显示服务器的名称

> ID：10919888
> 
> 赞同：2
> 
> 时间：2012-06-06T18:21:28.590
> 
> 标签：python, linux, unix, xorg

如何在 Python 中获取当前 Linux 会话中使用的显示服务器的名称？例如，我想知道用户是否使用 Xorg 或 Wayland。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:38:18.560

您将需要一个 Xlib`Display`指针和一种方法来调用[ServerVendor()](http://linux.die.net/man/3/servervendor)和可能`VendorRelease()`的 .

~~使用`pygtk`，您可以使用[gdk_x11_display_get_xdisplay()](http://developer.gnome.org/gdk/stable/gdk-X-Window-System-Interaction.html#gdk-x11-display-get-xdisplay)来获取`Display *`~~.

*更新：*我的立场得到纠正：`gtkmm`有一个绑定到这个函数，但`pygtk`显然没有。

该库仍然可能提供对返回的信息的访问`ServerVendor()`（快速搜索显示几个调用，但其中大多数似乎用于兼容性解决方法）。

甚至[Python-Xlib](http://python-xlib.sourceforge.net/)似乎也没有提供对`ServerVendor()`. 您可能必须编写自己的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:39:12.930

我不确切知道这对 Wayland 有什么作用，但您可以`xdpyinfo`像这样使用：

```
import subprocess

p = subprocess.Popen(['xdpyinfo'], stdout=subprocess.PIPE)
for line in p.communicate()[0].split('\n'):
    if line.startswith('vendor'):
        k, v = line.split(':')
        v = v.strip()
        print "%s=%s" % (k, v) 
```

# windows - WIN32里面的文字改TextOut

> ID：10919892
> 
> 赞同：0
> 
> 时间：2012-06-06T18:21:49.177
> 
> 标签：windows, winapi, win32gui

这将在屏幕上显示带有透明背景和彩色文本的文本，但是如果我想更改

稍后发短信，我该怎么办？我应该使用：SendMessage(); 或： SetWindowText( ) 如果是，如何以及是否

不，然后呢？？？如何

```
case WM_PAINT:

       dc = BeginPaint(hwnd, &Ps);

SetBkMode(dc, TRANSPARENT);

        SetTextColor(dc, RGB(454,0,0)); 

       TextOut(dc, 10, 200, L"SEE? ", 5);

       EndPaint(hwnd, &Ps);

       break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:37:32.387

如果您想绘制与窗口关联的文本 - 您应该这样做：

1.  不要`TextOut`用硬编码的字符串调用。而是通过`GetWindowText`.
2.  为消息添加处理程序`WM_SETTEXT`。收到后 - 使您的窗口（或至少假定绘制文本的区域）无效。

现在对透明度等进行一些解释。

我假设您的窗口有一个关联的背景画笔（即在类注册时它`WNDCLASS`有非零成员）。`hbrBackground`如果不是 - 您在未绘制区域上方绘制透明文本，其中可能包含任何垃圾。

在调用`BeginPaint`您的窗口过程期间收到`WM_ERASEBACKGROUND`. 假设您将它传递给`DefWindowProc`- 您的窗口的客户区域将由背景画笔填充。这样每次您开始绘画时 - 您的窗口的客户端都会被一些画笔填充。然后在新填充的背景上透明地绘制文本。这样就不会出现涂抹现象。

每当您想更改窗口上的视觉效果时 - 就地绘制额外的东西是不够的。因为在任何时候操作系统都可能要求您的窗口重新绘制自身。因此，您的窗户必须能够在收到后充分地自行绘制`WM_PAINT`。

一种常见的做法是在某些更改时使您的窗口（或其一部分，使用`InvalidateRect`或类似功能）无效。然后，当您收到`WM_PAINT`- 重新粉刷您的窗口。

# windows-phone - 测试 Windows phone 7 应用程序

> ID：10919895
> 
> 赞同：0
> 
> 时间：2012-06-06T18:21:55.603
> 
> 标签：windows-phone

请原谅我这个看似愚蠢的问题，但是在网上翻了一番之后，我似乎找不到如何测试我的 Windows Phone 应用程序。我不是指指南，我实际上是指将其发送给 Microsoft 以检查它是否“正常”或在 Visual Studio 上检查它，因为我认为在 VS 中有一种方法可以做到这一点。

非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:25:10.483

[这](http://create.msdn.com/en-US/home/about/app_submission_walkthrough)应该会有所帮助。请记住，在将其发送到 microsoft（或 appHub）之前，您的应用程序需要相当完美。提交不是免费的:)

编辑：这是假设您询问如何提交以供审核。当您提交您的应用程序时，审核流程就会开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:26:12.887

对于应用程序测试，您需要[sdk](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27570) ... 有了 sdk，您就有了一个完美的模拟器来测试您的应用程序。对于在您的设备上部署应用程序，在您购买年度订阅成为开发人员后，您必须关联您的手机并在您的 PC 上安装 zune（阅读[此处](http://msdn.microsoft.com/en-us/library/ff769512%28v=vs.92%29.aspx)）。测试后，您可以通过此过程提交您的应用程序（阅读[此处](http://create.msdn.com/en-US/home/about/app_submission_walkthrough)）。

# git - 将我的存储库推送到 Github 时出错

> ID：10919897
> 
> 赞同：0
> 
> 时间：2012-06-06T18:22:05.397
> 
> 标签：git, github, terminal

我在终端中输入：

```
Parkers-MacBook-Pro:first_app ppreyer$ git push -u origin master
Username: 
Password: 
```

我得到这个错误：

```
error: The requested URL returned error: 403 while accessing https://github.com/ppreyer/first_app.git/info/refs

fatal: HTTP request failed 
```

我猜这与我的用户名和密码有关，但我觉得我输入了正确的信息。有没有办法弄清楚我的用户名和密码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:24:15.210

看起来你的远程网址是错误的。

尝试运行以下命令：

```
git remote rm origin
git remote add origin git@github.com:ppreyer/first_app.git
git push origin master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:20:59.557

将您的 GitHub 用户名添加到您 url 中 github.com 之前的“remote.origin.url”：

[https://ppreyer@github.com/ppreyer/first_app.git](https://ppreyer@github.com/ppreyer/first_app.git)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:39:55.990

您可能已经克隆了公共只读 url。如果您可以设置 ssh 密钥并将其添加到您的 github 帐户中，它也会更好。

遵循本[指南](https://help.github.com/articles/generating-ssh-keys)。

要解决您可能面临的问题，您可以按照 Gazier 发布的答案进行操作。我正在添加另一种方法。

1.  编辑`.git/config`你的 repo 目录下的文件
2.  `url=entry`在部分下查找`[remote "origin"]`
3.  确保它是`git@github.com:ppreyer/first_app.git`

现在尝试将原点推送到主控

# php - 如何让方法等待外部调用的回调完成？

> ID：10919900
> 
> 赞同：1
> 
> 时间：2012-06-06T18:22:37.840
> 
> 标签：php, oop

以下代码是我试图理解的简化示例。

我正在使用一个使用回调来处理多个请求的外部库。最终，我一直试图弄清楚如何`Test->inc()`调用`ExternalLib`每个数组元素，然后等待所有回调执行后再继续。

如您所见，第 18 行的致命错误是由于调用方法通过`call_user_func`. 我该怎么做，或者有更好的方法吗？

```
class Test {
    public $a = array();

    public function inc(array $ints){
        $request = new ExternalLib();
        foreach ($ints as $int) {
            $request->increment($int);
        }

        while( count($this->a) < count($ints) ) {
            usleep(500000);
        }

        $test->dump();
    }

    public function incCallback($in, $out) {
        /* append data to Test class array */
        $this->a[] = array($in => out); /* Fatal error: Using $this when not in object context */
    }

    public function dump() {
        /* Print to screen */
        var_dump($this->a);
    }
}

class ExternalLib {
    /* This library's code should not be altered */
    public function increment($num) {
        call_user_func(array('Test','incCallback'), $num, $num++);
   }
}

$test = new Test();
$test->inc(array(5,6,9)); 
```

期望的输出：

```
array(3) {
  [5]=>
  int(6)
  [6]=>
  int(7)
  [9]=>
  int(10)
} 
```

此代码也可在[键盘上获得](http://codepad.org/XgR2N5p4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:32:48.717

问题不是时间/等待问题。这是一个静态与实例化的问题。

调用函数 using`call_user_func(array('Test','incCallback')...`与调用 相同`Test::incCallback`。`$this`进行静态调用时不能使用。

您将需要修改外部库以使用实例化对象或修改 Test 类以使用所有静态数据。

**编辑**

我不确切知道您要完成什么，但是如果使该类作为静态类运行是您唯一的选择，那么这就是您必须做的...

您的代码还有其他几个问题：

*   根据您想要的输出，您不想要`a[] = array($in, $out)`，而是`a[$in] = $out`
*   `$num++`直到调用函数之后才会增加......你想要`++$num`

这是一个工作示例...

```
class Test {
    public static $a;

    public function inc(array $ints){
        $request = new ExternalLib();
        foreach ($ints as $int) {
            $request->incriment($int);
        }

        while( count(self::$a) < count($ints) ) {}

        self::dump();
    }

    public function incCallback($in, $out) {
        /* append data to Test class array */
        self::$a[$in] = $out;
    }

    public function dump() {
        /* Print to screen */
        var_dump(self::$a);
    }
}

class ExternalLib {
    /* This library's code should not be altered */
    public function incriment($num) {
        call_user_func(array('Test','incCallback'), $num, ++$num);
   }
}

Test::$a = array();
Test::inc(array(5,6,9)); 
```

# jquery - 防止 Jquery Mobile Listview 中的默认链接行为

> ID：10919902
> 
> 赞同：2
> 
> 时间：2012-06-06T18:22:38.517
> 
> 标签：jquery, jquery-mobile

**背景：**

我正在使用 jQuery Mobile (JQM) 开发电子商务网站。我创建了一个产品页面，该页面使用 JQM 的 Split Button Listview 属性列出了特定类别中的所有产品。

**这是我的工作代码：**

```
<ul data-role="listview" data-inset="true" data-split-icon="plus" data-split-theme="d"         data-theme="d" data-dividertheme="d">
<li data-role="list-divider" class="listdivider">SPI_Level3Entry</li>
<!-- SPI_HTML_Product_Entry1 -->
<li class="prod"><a href="SPI_ProdFullLink" onmouseover="window.status=''; return     true;" rel="SPI_ProdThumbnail"><img src="SPI_ProdThumbnail" alt="SPI_ProdEntryDesc"/>
<!-- SPI_HTML_Product_LinkItemNum -->
<h2>SPI_ProdEntryID</h2>
<!-- SPI_HTML_Product_LinkItemNum -->
<!-- SPI_HTML_Product_Entry_Others -->
<p class="space"><b>
<!-- SPI_HTML_Product_ColHdr_PNs -->
SPI_ColHdrOther</b>
<!-- SPI_HTML_Product_ColHdr_PNs -->
: SPI_ProdEntryOther</p>
<!-- SPI_HTML_Product_Entry_Others -->
<p class="description"><b>Description</b>: SPI_ProdEntryDesc</p>
<!-- SPI_HTML_AllowOrderPlacement -->
<!-- SPI_HTML_AllowViewPriceAvail -->
<p class="space"><b>Qty Avail</b>: SPI_ProdQtyAvail</p>
<p class="space"><b>Unit Price</b>: <span class="price">SPI_ProdEntryPrice</span></p>
<!-- SPI_HTML_AllowViewPriceAvail -->

<input name="SPI_CartProductIDFieldName" type="hidden" value="SPI_ProductID" />
<input name="SPI_CartMfgProdIDFieldName" type="hidden" value="SPI_MfgProdID" />
<input name="SPI_CartProductDescFieldName" type="hidden" value="SPI_ProductDesc" />
<input type="number" name="SPI_CartOrdQtyFieldName" class="nolink" value="0" />

</a>
<a href="#" onClick="javascript:if (document.AddItem.SPI_CartOrdQtyFieldName.value==0)    {document.AddItem.SPI_CartOrdQtyFieldName.value='1'};document.AddItem.submit();">Add</a>
<!-- SPI_HTML_AllowOrderPlacement -->
</li>
</ul> 
```

**问题**

如您所见，每个 li 的内容都包装在一个“a href”属性中。在“a href”属性中，我有一个文本输入。问题是，当我单击文本输入以输入值时，会产生默认的“a href”行为。

**问题**

如何防止 JQM 中文本输入的默认“a href”行为，同时保留其余 li 内容的默认“a href”行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:27:58.380

您可以通过在事件对象上调用 preventDefault() 来防止默认行为。

**示例**：

```
$('a').click(function(event){
    event.preventDefault();
    //also possible
    event.stopImmediatePropagation();
}) 
```

# android - Android ListView 内的按钮不响应点击

> ID：10919903
> 
> 赞同：2
> 
> 时间：2012-06-06T18:22:38.533
> 
> 标签：android, android-listview, android-button

我有一个默认的 ListView，我已经为列表项添加了我的自定义视图，但是这些视图中的按钮大部分时间都是不可点击的。当按钮接收到单击事件时，我会输出一个 Log.v，但是我必须点击该按钮几乎十几次才能注册单击。

我遇到的另一个与他相关的问题是，当按下按钮时，我希望发生动画，显示菜单从其下方滑出。目前我已经尝试了几种不同的方法，比如为视图创建一个自定义类，而不是只使用布局充气器来获取视图的 relativeLayout 对象，但没有任何工作正常。我什至尝试过使用`listview.getAdapter().notifyDataSetChanged();`，但是当我想要动画时，它只有一个用于扩展视图的弹出位置。

我到处搜索，似乎唯一可能的解决方案是重写我自己的自定义列表视图或使用带有滚动视图的线性布局。后者似乎更容易，但我认为它几乎不像列表视图那样优化。

任何建议将不胜感激，如果您需要查看一些代码，请告诉我...

谢谢！

更新：

包含以下`getView()`内容：

```
 Holder hold;
    convertView = friends.get(position);
    hold = new Holder();
    hold.pos = position;
    convertView.setTag(hold);
    return convertView; 
```

基本上我现在将一个传递`ArrayList<RelativeLayout>`给适配器，这样我就不必每次都创建一个新视图，这样当我向下滚动时动画将保持动画......

在`OnCreate()`这个活动中，我`ArrayList<RelativeLayout>`用下一个代码设置了它，但这只是暂时的，因为我计划稍后使用另一种方法，比如异步任务或其他东西，以便这个视图包含一些数据......

```
 RelativeLayout temp;
    for(int i=0; i<30; i++){
        temp = (RelativeLayout) inflater.inflate(R.layout.list_item, null);

        final LinearLayout extraListItemInfo = (LinearLayout) temp.findViewById(R.id.extraListItemInfo);

        Button infoBtn = (Button) temp.findViewById(R.id.infoBtn);
        infoBtn.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                Log.v("ListItem", "Button has been clicked... ");
                extraListItemInfo .setVisibility(View.VISIBLE);

                ExpandAnimation closeAnim = new ExpandAnimation(extraListItemInfo , animHeight);
                closeAnim.setDuration(750);
                closeAnim.setFillAfter(true);

                if(extraListItemInfo .getTag() == null || !extraListItemInfo .getTag().equals("expanded")){
                    extraListItemInfo .getLayoutParams().height = 0;
                    friendInfoList.startAnimation(closeAnim.expand());
                    extraListItemInfo .setTag("expanded");
                }else if(extraListItemInfo .getTag().equals("expanded")){
                    extraListItemInfo .startAnimation(closeAnim.collapse());
                    extraListItemInfo .setTag("closed");
                }
                //((BaseAdapter) listview.getAdapter()).notifyDataSetChanged(); i tried it here once but then left it
    //as the only action inside the listview's onitemclick()
            }
        });

        listItems.add(temp);
    } 
```

这是我正在使用的列表项：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/darkgrey"
    android:paddingBottom="5dp" >

    <LinearLayout
        android:id="@+id/extraListItemInfo "
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/listItemInfo"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="-10dp"
        android:background="@color/grey"
        android:orientation="vertical"
        android:visibility="gone" >

        <RelativeLayout
            android:id="@+id/RelativeLayout04"
            android:layout_width="match_parent"
            android:layout_height="@dimen/activity_list_height"
            android:layout_marginTop="5dp" >

            <ImageView
                android:id="@+id/ImageView04"
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:layout_margin="5dp"
                android:src="@drawable/logo_d" />

            <TextView
                android:id="@+id/TextView04"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/ImageView04"
                android:text="TextView"
                android:textColor="@color/black"
                android:textSize="17dp" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/RelativeLayout03"
            android:layout_width="match_parent"
            android:layout_height="@dimen/activity_list_height" >

            <ImageView
                android:id="@+id/ImageView03"
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:layout_margin="5dp"
                android:src="@drawable/logo_d" />

            <TextView
                android:id="@+id/TextView03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/ImageView03"
                android:text="TextView"
                android:textColor="@color/black"
                android:textSize="17dp" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/RelativeLayout02"
            android:layout_width="match_parent"
            android:layout_height="@dimen/activity_list_height" >

            <ImageView
                android:id="@+id/ImageView02"
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:layout_margin="5dp"
                android:src="@drawable/logo_d" />

            <TextView
                android:id="@+id/TextView02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/ImageView02"
                android:text="TextView"
                android:textColor="@color/black"
                android:textSize="17dp" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="@dimen/activity_list_height" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:layout_margin="5dp"
                android:src="@drawable/logo_d" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/imageView1"
                android:text="TextView"
                android:textColor="@color/black"
                android:textSize="17dp" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/RelativeLayout01"
            android:layout_width="match_parent"
            android:layout_height="@dimen/activity_list_height">

            <ImageView
                android:id="@+id/ImageView01"
                android:layout_width="wrap_content"
                android:layout_height="25dp"
                android:layout_margin="5dp"
                android:src="@drawable/logo_d" />

            <TextView
                android:id="@+id/TextView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/ImageView01"
                android:text="TextView"
                android:textColor="@color/black"
                android:textSize="17dp" />
        </RelativeLayout>
    </LinearLayout>
        <RelativeLayout
        android:id="@+id/listItemInfo"
        android:layout_width="wrap_content"
        android:layout_height="95dp"
        android:background="@drawable/friend_cell_background2x"
        android:clickable="true" >

        <RelativeLayout
            android:id="@+id/leftLayout"
            android:layout_width="90dp"
            android:layout_height="match_parent" >
            <ImageView
                android:id="@+id/imgCompany"
                android:layout_width="60dp"
                android:layout_height="50dp"
                android:layout_centerHorizontal="true"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="10dp"
                android:scaleType="centerInside"
                android:src="@drawable/user2x" />
            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:scaleType="fitXY"
                android:src="@drawable/online_indicator2s" />

        </RelativeLayout>

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/leftLayout"
            android:background="@android:color/transparent"
            android:gravity="left|center"
            android:orientation="vertical"
            android:paddingLeft="5dp" >

            <TextView
                android:id="@+id/lblCompanyName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Contact Name"
                android:textColor="@color/white"
                android:textSize="18dp"
                android:textStyle="bold" >

            </TextView>

            <TextView
                android:id="@+id/lblReawrdDesc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Last Played Offer"
                android:textColor="@color/white"
                android:textSize="17dp" >

            </TextView>
        </LinearLayout>

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="5dp"
            android:src="@drawable/facebook_btn2x" />
        <Button
            android:id="@+id/infoBtn"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentBottom="true"
            android:layout_alignRight="@+id/imageView4"
            android:background="@drawable/info_btn2x"
            android:clickable="true" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="13dp"
            android:layout_toLeftOf="@+id/infoBtn"
            android:text="Follows 30+"
            android:textColor="@color/white"
            android:textSize="11dp" />

        <Button
            android:id="@+id/button1"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="75dp"
            android:layout_height="20dp"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="10dp"
            android:layout_marginRight="10dp"
            android:layout_toLeftOf="@+id/textView2"
            android:background="@drawable/fan_btn2x"
            android:text="Fans 30+"
            android:textColor="@color/white"
            android:textSize="11dp" />

        <ImageView
            android:id="@+id/imageView5"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/imageView4"
            android:src="@drawable/google_btn2x" />

    </RelativeLayout>

</RelativeLayout> 
```

抱歉，任何可能使事情难以阅读的布局问题...但我希望这可以帮助你们理解我的问题...谢谢

更新 2：

所有这些答案在某种程度上都有帮助，但我认为我必须首先解决的主要问题是为什么在我首先滚动离开该 listItem，然后返回它，然后单击按钮之前，按钮不会收到点击事件再次......如果有人可以帮助找到解决方案，我**认为**其他一切都会更容易解决......谢谢......

根据要求提供屏幕截图，但请记住，这张照片是在三星 Galaxy Tab 10.1 上拍摄的，由于我在这个更大的屏幕上使用了相同的布局，它看起来与我通常测试的手机（摩托罗拉 droid x那不是root，不能截图...）

![在此处输入图像描述](../Images/30b8e8a84a06c3d5a672b3162d4f5c87.png)

另一个更新：通过扩展 ArrayAdapter 而不是基本适配器，我设法使点击和动画效果很好。可悲的是，我仍然遇到问题，因为只有列表的下半部分是可点击的。列表的上半部分仍然像以前一样出现非常故障的点击事件......关于这次发生的事情有什么想法吗？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:16:16.207

好吧，这并不是真正的答案，但是在重写了几次之后，我设法修复了它，使其完全按照我想要的方式运行。

这次我将所有数据与每个视图分开，并让每个列表项成为一个自定义类，继承`RelativeLayout`并`OnClickListener`为其特定的`infoBtn`.

我的适配器现在只是扩展了 ArrayAdapter<> 并覆盖了这个`getView()`方法：

```
public View getView(int position, View convertView, ViewGroup parent) {

    if(convertView != null && (convertView instanceof FriendListItem2))
        ((FriendListItem2) convertView).setFriendInfo(friends.get(position));
    else
        convertView = new FriendListItem2(getContext(), friends.get(position));

    return convertView;
} 
```

最后，在此页面的主要活动中，我只需`ListView`使用我将数据传递到的适配器进行设置。

这一切都比我以前更干净，我希望它没有对代码进行多次重写来让它正确。希望有人可以从中受益，尽管我仍然不知道为什么我之前遇到了问题。

感谢您之前的所有建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:33:28.780

这是为每一行创建的复杂布局......

无论如何，当您使用`new`关键字时，您正在创建一个不同的范围。简而言之，您的 onClickListener*没有*`extraListItemInfo`看到您希望它看到的 30 个不同的引用。

尝试这样的事情：

```
@Override
public void onClick(View v) {
    LinearLayout extraListItemInfo = v.getParent();
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T20:17:21.220

尝试在放置子视图的顶级布局中使用此属性。

```
android:descendantFocusability="blocksDescendants" 
```

它有点棘手，但我建议如果上面的行不起作用，请尝试在从按钮中删除 focusable=true 和 focusable="false" 之间切换。它应该工作。

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:08:20.690

添加`android:onClick="onClick"`到您的按钮 xml，它将使其调用该`onClick()`方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T10:42:26.617

我有同样的问题。尝试从相对布局中获取“android:clicable="true"”。当您这样做时，活动希望您将 setOnClickListener 设置为该 RelativeLayout 。它对我有用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T09:26:16.947

您可以从 ListViewAdapter 类的 getView() 方法触发按钮上的单击事件。看到这个问题

[Android：如何在 ListView 的 List 项中为 Button 设置 onClick 事件](https://stackoverflow.com/questions/12596199/android-how-to-set-onclick-event-for-button-in-list-item-of-listview)。

# linq - LINQ 左加入我的多个字段？我有 SQL 工作但无法将其转换为 linq 查询

> ID：10919904
> 
> 赞同：1
> 
> 时间：2012-06-06T18:22:39.800
> 
> 标签：linq, entity-framework, left-join, inner-join

我想知道是否有人可以提供帮助

我有一个简单的 SQL 查询，就是这样。

```
SELECT * FROM ITEM INNER JOIN CODES ON ITEM.ITEMID = CODES.ITEMID AND
        ITEM.CATID = CODES.CATID 
```

这很好用，所以我在 LINQ 中创建了以下查询

```
from i in Item join  c in codes
      on new { i.itemid, i.catid } equals new { c.itemid, c.catid } 
```

效果很好，但他们我意识到我实际上需要一个 LEFT JOIN 来代替 INNER JOIN。所以现在运行良好的 sql 是 :- (注意左连接)

```
SELECT * FROM ITEM LEFT JOIN CODES ON ITEM.ITEMID = CODES.ITEMID AND
        ITEM.CATID = CODES.CATID 
```

所以现在一切似乎都正常了，我用 SQL 取回了我需要的数据

我想知道是否有人可以伸出援助之手，我被卡住了:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:17:37.353

我认为这是你需要往下走的方向：

```
from i in Item 
   join c in codes on new { i.itemid, i.catid } equals new { c.itemid, c.catid } 
   into grouped
   from g in grouped.DefaultIfEmpty()
   select new
   {
      ItemId = c.itemid,
      CatItemId = g != null ? g.itemid : "Empty"
   }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:18:48.467

你应该看看：[http ://codingsense.wordpress.com/2009/03/08/left-join-right-join-using-linq/](http://codingsense.wordpress.com/2009/03/08/left-join-right-join-using-linq/)

关键是 --> 从 JoinedEmpDept.DefaultIfEmpty() 中的 dept 进入 JoinedEmpDept

# c - 我如何跟踪内存分配？

> ID：10919905
> 
> 赞同：4
> 
> 时间：2012-06-06T18:22:44.187
> 
> 标签：c, linux, debugging, memory-leaks, mmap

我有一个非常独特的问题，我在一个特殊的硬件上运行 Linux，这是一个基于 Octeon 的硬件。我看到我的进程在执行特定操作时不断分配内存。我想跟踪代码的哪一部分正在进行此调用。

这是有关我的环境的详细信息

1.  Octeon MIPS 架构 32 位。
2.  Linux 内核 2.6
3.  最小的 linux 实现。

但是，这是我需要解决的选项/限制。

1.  不确定创建我自己的 malloc 是否会有所帮助。如果这是可能的，有人可以解释一下吗？
2.  无法使用 walgrind 等工具，不适用于此架构。
3.  代码库很大，不完全理解，因此审查不可行和快速。
4.  strace 给了我分配的内存地址，但是我怎样才能找出创建这个的代码呢？

请建议是否有办法解决这个问题。

非常感谢。

我忘了提到的另一件事，该进程的虚拟内存继续增加到 1.4GB，在此之后它停止并且我看到代码中的分配因 ENOMEM 而失败。这个 1.4 GB 的限制与 32 位机器有关吗？AFAIU 32 位机器应该允许每个进程 3 GB 的虚拟内存不是吗？此外，没有每个进程的限制，我已经用 setrlimit/getrlimit 确认了这一点。

干杯，帕万

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:29:38.037

如果你想在 上写一个包装函数`malloc`，你可以在不修改代码中调用函数的每个实例的情况下这样做，一个简单的宏技巧就足够了：

```
void* my_malloc(size_t size, const char *file, int line, const char *func);

#define malloc(X) my_malloc( X, __FILE__, __LINE__, __FUNCTION__)

void* my_malloc(size_t size, const char *file, int line, const char *func)
{

    void *p = malloc(size);
    printf ("Allocated = %s, %i, %s, %p[%li]\n", file, line, func, p, size);

    /*Link List functionality goes in here*/

    return p;
} 
```

同样，您也可以映射`free`来调用自己的函数。

您可以维护已分配地址的列表，并继续在 中添加新条目`malloc`并从列表中删除相关条目`free`。程序末尾的列表中剩下的内容是带有位置的内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:26:58.073

您可能想看看[Dmalloc](http://dmalloc.com/)。应该比 valgrind 更少依赖架构。

# linq - 使用 linq 计算过去一小时内修改的文件数

> ID：10919907
> 
> 赞同：1
> 
> 时间：2012-06-06T18:22:50.873
> 
> 标签：linq

```
 var query=from file in Directory.GetFiles(source_path, filename, SearchOption.TopDirectoryOnly)
              where File.GetLastWriteTime(file) >= DateTime.Now.AddHours(-1)
              select file;

    Console.Write(query.ToList().Count.ToString()); 
```

我正在使用上面的代码来获取过去一小时内修改的文件数。寻找更简单的解决方案。即将计数作为查询本身的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T18:27:40.470

`Count()`可以带谓词：

```
Directory.GetFiles(source_path, filename, SearchOption.TopDirectoryOnly).Count(file => File.GetLastWriteTime(file) >= DateTime.Now.AddHours(-1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:31:43.000

您也可以调用`Count()`查询本身。

```
var source = Directory.GetFiles(source_path, filename, 
    SearchOption.TopDirectoryOnly);
var timeStamp = DateTime.Now.AddHours(-1);
int count = (from file in source
            where File.GetLastWriteTime(file) >= timeStamp
            select file)
            .Count();

Console.Write(count); 
```

更快的解决方案是使用[`Count()`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)接受谓词的重载。

# android - 使用 xerces 进行 Android 架构验证

> ID：10919910
> 
> 赞同：1
> 
> 时间：2012-06-06T18:23:10.157
> 
> 标签：android, xml, validation, xerces

我正在尝试使用 Xerces 针对 xsd 模式文件验证 xml 文件。我遇到了无法解决的错误，下面是 logcat 输出。请注意，在 java 应用程序中尝试相同的代码和 xercesImpl.jar 文件会产生准确的验证结果，但将相同的代码移动到 android 会导致错误。请指教。

```
E/AndroidRuntime(792): java.lang.NoClassDefFoundError: org.apache.xerces.parsers.SAXParser 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:01:03.203

解决方案是使用移植到 Android 的 Apache Xerces。[这里](http://code.google.com/p/xerces-for-android/)有一个项目

您必须执行 svn chekout 并将 proyect 导出到 jar 文件以用作您的 android proyect 中的库。

SchemaFactory 实例的代码稍作更改。我给你看一个例子：

```
import mf.javax.xml.validation.Schema;
import mf.javax.xml.validation.SchemaFactory;
import mf.javax.xml.validation.Validator;
import mf.org.apache.xerces.jaxp.validation.XMLSchemaFactory;

SchemaFactory  factory = new XMLSchemaFactory();
Schema esquema = factory.newSchema(".../file.xsd"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:55:06.933

问题是android没有xerces和验证接口=）但是你可以简单地从xerce添加验证：

您可以在 adnroid 中使用 xerces 和本机模式验证（在 java 中） - 您必须下载 xerces 源并（经过一些简单的操作）将其包含到您自己的代码中 - 您将能够使用 DocumentBuilderFactory.setShema 方法。

[https://stackoverflow.com/questions/13142567/xml-schema-validation-xmlsignature-with-xerces-in-android](https://stackoverflow.com/questions/13142567/xml-schema-validation-xmlsignature-with-xerces-in-android)

# javascript - IE8 getPrototypeOf 方法

> ID：10919915
> 
> 赞同：7
> 
> 时间：2012-06-06T18:23:33.840
> 
> 标签：javascript, internet-explorer, dojo

很简单：

我有代码`Object.getPrototypeOf(...)`用于获取 Dojo Widget 的继承类（只是一个 JS 对象）。`Object.getPrototypeOf(...)`IE8 不支持。我需要一个 IE 解决方法。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T13:27:38.447

Jon Resig 的 polyfill 工作 [http://ejohn.org/blog/objectgetprototypeof/](http://ejohn.org/blog/objectgetprototypeof/)

我把它做得更小了

```
if (typeof Object.getPrototypeOf !== "function")
    Object.getPrototypeOf = "".__proto__ === String.prototype
        ? function (object) {
            return object.__proto__;
        }
        : function (object) {
            // May break if the constructor has been tampered with
            return object.constructor.prototype;
        }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T09:53:46.260

使用[https://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)。除其他外，它还支持[Object.getPrototypeOf](https://github.com/es-shims/es5-shim/blob/v4.5.9/README.md#shams)。

资料来源：[来自 Modernizr 项目的 ECMAScript 5 polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#ecmascript-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:31:11.260

使用 Dojo.declared 创建的类及其超类存储元数据，因此您不需要使用 getPrototypeOf。

我认为你可以得到第一个超类

```
MyClass.prototype.constructor._meta.bases[1] 
```

及其原型

```
MyClass.prototype.constructor._meta.bases[1].prototype 
```

（bases[0] 似乎是类本身）

* * *

虽然你为什么甚至需要得到原型？您很可能最终会重新实现 dojo.declare 已经提供的某些功能

# mysql - 学说检查 fetchOne

> ID：10919916
> 
> 赞同：0
> 
> 时间：2012-06-06T18:23:37.130
> 
> 标签：mysql, sql, doctrine

我的简单查询：

```
 $list = Doctrine_Query::create()
            ->from('liste l')
            ->where('l.id =?', $id)
            ->fetchOne(); 
```

$id = 123;

我知道我的数据库中没有 $id =123 的条目。当我计算 $list 时，我得到结果 1。我如何通过查询或查询结果知道我的数据库中没有 $id = 123 的条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:43:23.843

var_dump 给了我错误！

所以我只是做一个快速：

```
if ($list == FALSE) {
....} 
```

# javascript - 用于 JavaScript 的 Techart；回收右侧未使用的空间

> ID：10919920
> 
> 赞同：0
> 
> 时间：2012-06-06T18:24:02.763
> 
> 标签：javascript, html, teechart

将 TeeChart 用于 HTML5/Javascript；我正在尝试找到一种方法让图表区域扩展到没有右轴的图表右侧的未使用空间。设置右轴 visible='false' 不起作用。

```
<html>
<head>
<script type="text/javascript" src="http://www.bankdynamics.com/teechart/src/teechart.js"></script>
<script type="text/javascript">

function DrawCharts()
{
var Chart1=new Tee.Chart(document.getElementById("ChartCanvas1"));
Chart1.addSeries(new Tee.Bar([0,0,0,0]) );
Chart1.addSeries(new Tee.Bar([0,0,0,0]) );

Chart1.title.visible=false;
Chart1.legend.visible=false;

Chart1.axes.left.visible=false;
Chart1.axes.right.visible=false;
Chart1.axes.bottom.visible=false;
Chart1.axes.top.visible=false;

Chart1.palette.colors[0] = "#626200";
Chart1.palette.colors[1] = "#800040";
Chart1.palette.colors[2] = "#00a8a8";
Chart1.palette.colors[3] = "#8080c0";

Chart1.panel.transparent=true;

var OutFlowsSeries = Chart1.series.items[0];
var  InFlowsSeries = Chart1.series.items[1];

OutFlowsSeries.marks.style="label";
 InFlowsSeries.marks.style="label";

OutFlowsSeries.colorEach="yes";
 InFlowsSeries.colorEach="yes";

 InFlowsSeries.data.values[0] =  2;
OutFlowsSeries.data.values[0] = -2;

 InFlowsSeries.data.values[1] =  1;
OutFlowsSeries.data.values[1] = -1;

 InFlowsSeries.data.values[2] =  4;
OutFlowsSeries.data.values[2] = -4;

 InFlowsSeries.data.values[3] =  3;
OutFlowsSeries.data.values[3] = -3;

Chart1.draw();
}
</script>

</head>

<body onLoad="DrawCharts();">

<canvas id="ChartCanvas1" width="700" height="200" style="border:1px solid black;">
(This browser does not support HTML5 Canvas feature)
</canvas>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:46:35.180

我们刚刚解决了这个问题。请写信给“steema dot com 的信息”，询问新的 js。

此外，请注意还有另一个设置可以控制每个图表边缘的百分比空间，可以将其设置为零：

var m=Chart1.panel.margins; m.left=m.right=m.top=m.bottom=0;

Steema 支持团队。

# android - 使用 achartengine 应用程序化平底锅

> ID：10919931
> 
> 赞同：0
> 
> 时间：2012-06-06T18:25:04.700
> 
> 标签：android, achartengine

有没有办法可以从代码中应用平底锅？我希望我的饼图最初显示有点偏离中心（向下一点）。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:31:46.507

看看[渲染器](http://www.achartengine.org/content/javadoc/org/achartengine/renderer/package-frame.html)API。我想你应该使用`setInitialRange(double[] range, int scale)`函数，但我不能从你的问题中确定：你的意思是“偏移”最初显示**在**图表中的数据还是改变整个图表位置（稍微下方）？

也许张贴图片可以帮助您了解您的需求

# java - 为什么我们不能在 Java 中同时拥有 this() 和 super() ？

> ID：10919934
> 
> 赞同：4
> 
> 时间：2012-06-06T18:25:11.663
> 
> 标签：java, constructor, default-constructor

我有这个程序：

```
public class A
{
    public A(){
    System.out.println("I am in A");
    }

    public static void main(String args[]){
    B a = new B("Test");
    }
}

class B extends A
{   
    public B(){
    System.out.println("I am in B");
    }

    public B(String s){
    this();
    super();
    System.out.println("I am in B as " + s);
    }
} 
```

现在为什么我不能调用`this`构造函数`B`来调用默认构造函数？这给了我编译时错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:33:34.620

`this`并且`super`必须是构造函数中的**第一**行。

编辑：

语言规范

> > 8.8.7。构造函数体
> 
> 构造函数主体的第一条语句可能是对同一类或直接超类的另一个构造函数的显式调用（第 8.8.7.1 节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:27:29.380

`this()`调用同一类中的另一个构造函数。

`super()`调用超级构造函数`super()`。如果显式写入 no，编译器将隐式添加一个。因此，您最终会调用`super()`两次。

所以，两者都是不允许的。

* * *

编辑

在您的代码上下文中：记住，`super()`应该始终是构造函数的第一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:31:27.117

经过进一步思考，我的回答如下所示基本上是正确的，但缺乏一些细微差别。本质上，您可以调用一次超级构造函数。这是为了确保您的超类只构造一次。这意味着给定构造函数的第一行可以是对当前类中的另一个构造函数的调用，也可以是对超类中的构造函数的调用。这也意味着您只能在任何给定的构造函数中调用另一个构造函数一次；您必须选择调用当前或超类中的一个。这确保了所有超类将在当前对象之前完全构造。

老解释：

根本原因是必须先构造所有超类，然后才能构造子类。为此，如果构造函数的第一行不存在这样的调用，Java 将隐式调用 super()。覆盖此行为的唯一方法是在您的超类中显式调用不同的构造函数。基本上，Java 必须先创建层次结构，然后才能创建。

将您的构造函数放在首位违反了此要求，因此是非法的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T17:17:01.897

根据 Java 的 this() 和 super() 应该是构造函数中的第一条语句。现在关键是我们不能同时写这两个作为第一行。如果你写 this() 而不是 super，不要期望 super 会是隐式调用。它就像它一样简单。你没有选择将它们一起写在一个构造函数体中

# jquery - 对 jquery 中的每个 span 元素使用函数

> ID：10919938
> 
> 赞同：-1
> 
> 时间：2012-06-06T18:25:17.487
> 
> 标签：jquery, class, hide, show, html

这是我的 css 和 Jquery 我创建了这两个函数来在单击表格中的图像时显示文本，然后如果单击文本，它会再次显示图像。

```
<style>
.espanto {
    margin:0px 25px 0px 25px;
    display:none;
}

</style>
  <script>
function showImage(){
                $('.espanto').show();
                $('.hide').hide();
            }
            function hidonio(){
                $('.espanto').hide();
                $('.hide').show();
            }
</script> 
```

然后我有这个结构。这是我对表格进行编码并使用类来实现它的地方

```
 <div id="content">
    <p align="center"><span class="titles" style="color:#1A4487; line-height:10px;">Productos Artesanales Gourmet</span></p>
    <div class="bar"></div>
    <p class="parag" style="  ">Kanaan le ofrece una extensa seleccion de conservas, chutneys, aceites y salsas, que le brindaran ese sabor que usted estaba buscando, por favor no dude en contactarnos si desea una cotizacion o muestras gratis, de clic en alguna imagen para ver su descripcion.</p>
    <p align="center"><span class="titles espanto" style="color:#1A4487; line-height:10px;"><br />
      Descripciones.</span></p>
    <table align="center" style="color:#1A4487;" width="650" border="0">
      <tr>
        <td width="250px"><p class="titles" align="center" > <span class="parag espanto"><br />
             <a href="#" onclick="hidonio()" >Producto de origen Hindú que sirve para acompañar y hornear carnes como pescado, pollo, cerdo, etc. Dándole un exquisito sabor a sus platillos, sabores: ciruela, tamarindo, carambolo, calabaza,  durazno y piña</a></span><a href="#" onclick="showImage()" ><img src="pr/Chutneys 2.jpg" height="200" class="hide" /></a><br />
            Chutneys</p></td>
        <td width="250px"><p class="titles" align="center"><span class="parag espanto"><br />
            <a href="#" onclick="hidonio()" > Aceites aderezados para saborizar carne y ensaladas de sabor canela, romero, laurel, thai, (rojo y picante), y hiervas finas</a></span><a href="#" onclick="showImage()" ><img src="pr/Aceites 2 a.jpg" height="200" class="hide"/></a><br />
            Aceites </p></td>
        <td width="250px"><p class="titles" align="center"> <span class="parag espanto"><br />
             <a href="#" onclick="hidonio()" >Conservas dulces (frutas en almíbar)<br />
            De todo tipo de frutas (guayaba, mango, durazno, piña, camote, calabaza, etc.)<br />
            <br />
            Conservas saladas (encurtidos)
            En salmuera o en vinagre (col morada, calabacita, espárragos, chichar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:35:43.217

您应该遵循不显眼的 JavaScript 的 jQuery 方法，并避免使用内联函数和 onclick 处理程序。

而是使用选择器在元素上定义点击事件，如下所示：

```
$('.titles a:first').on('click', function(){
  $(this).closest('p').find('.espanto').hide();
  $(this).closest('p').find('.hide').show();
}); 
```

这基本上是您的第一个场景。第二个将与`$('.titles a:last')...`.

[查看关于on](http://api.jquery.com/on/)、[selectors](http://api.jquery.com/category/selectors/)和[traversing](http://api.jquery.com/category/traversing/)的 jQuery 文档

* * *

**更新**

这是一个工作的[jsFiddle](http://jsfiddle.net/EqG63/1/)应该做你想做的事。上面的代码并没有完全正常工作，尤其是选择器获取链接是假的。这是小提琴的更新：

```
$('table td').find('a:first').on('click', function(){
    $(this)
        .parent()
            .hide()
        .parent().find('img').show();
}).end()
    .find('a:last').on('click', function(){
        $(this).hide()
            .closest('td').find('span:first').show();
    });​ 
```

# java - HashMap 没有调用 Object.equals？

> ID：10919941
> 
> 赞同：4
> 
> 时间：2012-06-06T18:25:31.187
> 
> 标签：java, object, collections, hashmap

我编写了一个覆盖类 Object 中的 equals(Object) 方法的类，以使用该对象的实例值将该类类型的对象与该类类型的其他对象进行比较。

当我将对象的一个​​实例作为键放在 HashMap 中，然后在地图上调用 get(Object) 并使用一个新的但相同的对象作为键时，它返回 null。

我尝试将一个新的、相同的对象传递给 equals 方法，它返回 true，所以问题不在于我的比较代码。

根据我通过调试收集的信息，我的对象中的 equals(Object) 方法从未被调用过。

但是，如果您在 HashMap 中使用 String 键，然后将具有相同字符的新实例传递给 get(Object)，它会成功返回该值。

为什么会这样？我需要做什么才能让 HashMap 测试键基于我的 equals 方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T18:27:30.433

您还需要覆盖[`Object.hashcode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29). 看一下链接，因为它指定了这一点，`hashcode()`并`equals()`有一个合同来确保`HashTable`'s、`HashMap`'s 和`HashSet`'s 中的正确功能。

在 a`HashMap`中，值存储在桶中，通过键的哈希码到达桶中。一旦找到合适的桶，然后将equals方法应用于桶的每个成员，直到确定相等。因此，确保您的哈希算法“哈希好”很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:28:50.923

您还应该覆盖 hashCode 否则它将无法工作，因为 HashMap（顾名思义）等同于基于哈希集合的相等性。覆盖equals的Java“荣誉代码”是您还应该同时覆盖hashCode。

# android - 来自另一个类的 Android 呼叫首选项

> ID：10919942
> 
> 赞同：0
> 
> 时间：2012-06-06T18:25:32.573
> 
> 标签：android, preferences

我只是无意中删除了我的最后一个问题，所以又来了。

我有以下课程，我将它们拼凑在一起以测试首选项课程。我面临的问题是，当我从首选项类传递或调用时，什么也没有发生。代码编译得很好，但我无法获取或设置我的偏好。它似乎被卡住了，`SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);`因为我使用了一些打印语句来查看它停止的位置。我已经尝试在 android 网站上使用该示例，但这并没有帮助。有人有什么想法吗？

```
public class Preferences extends Activity{

public void getSetPrefs(){

    Preferences p = new Preferences();

    p.setLocationPref("london", "1");

    String location = p.getLocation();
    String location_id = p.getLocation();

}
} 
```

//首选项类

```
public class Preferences extends Activity{

    /** Sets location preferences */
public void setLocationPref(String location, int location_id){

    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString("location", location);
    editor.putInt("location_id", location_id);
    editor.commit();
}

/** Get location from preferences */
public String getLocation(){

    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String location = sharedPreferences.getString("location", "");

    return location;
}

/** Get location ID from preferences */
public int getLocationID(){

    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    int locationID = sharedPreferences.getInt("location_id", 0);

    return locationID;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:21:26.490

我总是通过如下调用来检索首选项：

```
String location = PreferenceManager.getDefaultSharedPreferences(this).getString("location", ""); 
```

# ms-access - 访问：在链接表源更改结构时通知？

> ID：10919944
> 
> 赞同：0
> 
> 时间：2012-06-06T18:25:34.967
> 
> 标签：ms-access, odbc, ms-access-2007

我通过 Oracle ODBC 在 Access 2007 中导入了一个表。我的问题是，有时 Oracle 中的表会改变结构（例如添加了新列），而当这种情况发生时，Access 不会自动获取其链接表中的更改。相反，它继续使用旧结构，更糟糕的是，某些行根本不会出现在 Access 查询中（我不知道为什么？）。

另一个问题是我对 Oracle DB 没有任何控制权，因此更改可能随时发生。一直手动更新链接表太麻烦了。是否可以以某种方式设置 Access 以通知我更改？我的意思是，Access 必须能够以某种方式告诉某些事情发生了变化——问题是；它可以告诉我吗？

问候，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:03:21.713

运行此函数 - 您可以将其链接到表单打开事件，或者仅在需要刷新数据时运行它

```
Sub relinkTables()
Dim tdf As DAO.TableDef

    For Each tdf In CurrentDb.TableDefs
        ' check if table is a linked table
        If Len(tdf.Connect) > 0 Then
            tdf.Connect = "your odbc connection string to the DSN or database"
            tdf.RefreshLink
        End If
    Next

End Sub 
```

# php - 使用正则表达式 PHP 进行递归标记匹配

> ID：10919945
> 
> 赞同：2
> 
> 时间：2012-06-06T18:25:35.450
> 
> 标签：php, regex, recursion, tags

我正在使用“特殊”标签，但我遇到了递归问题。有一个例子：

```
<!-- BEGIN foo --> parent text <!-- BEGIN bar --> child text <!-- END --> aditional parent text<!-- END --> <!-- BEGIN foobar --> third text <!-- END --> 
```

当我使用`[^BEGIN]`它时效果很好，直到我没有在标签内输入 B。与它相同`[^<!\-\-]`。我一直在玩`(?!BEGIN)`，`(?<!BEGIN)`但没有成功。

我的最后一次尝试看起来像这样（但它不起作用）：

```
#<!--\s?BEGIN\s?(.+?)\s?-->((?!BEGIN).|(?R))*<!--\s?END\s?-->#s 
```

谢谢你的回答，
汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:10:37.740

尝试这个：

```
#<!-- BEGIN [a-z]+ -->([a-z ]*(?R)?[a-z ]*)<!-- END --># 
```

实际上，不要那样尝试；正如评论中提到的，解析器确实应该优先用于递归解析。但这[*确实*](http://ideone.com/E9Uzy)[有效](http://ideone.com/E9Uzy)。[_](http://ideone.com/E9Uzy)

 *请注意：

*   我对您的输入做了一些假设（例如假设 'foo' 和 'bar' 将始终是字母数字，并且空格是非可选的。）您可以很容易地将它们改回来。
*   它只会捕获最底层的匹配标签。一旦你有了这些，如果你想找到任何嵌套的匹配项，你需要再次运行它。递归性仅用于匹配开始与适当的结束。*

# python - 如何在ubuntu的右键菜单中添加一个选项

> ID：10919946
> 
> 赞同：2
> 
> 时间：2012-06-06T18:25:38.157
> 
> 标签：python, ubuntu, glade

我正在为 ubuntu 12.04 制作一个应用程序。我想要做的是在我们右键单击某个选择选项时出现的菜单栏中添加一个选项。
**为了更清楚——**

* * *

通常，当我们选择一些文本并右键单击时，会出现一些选项，例如
剪切
复制
粘贴
，我想添加另一个选项，我该怎么做。

单击该选项时，只需执行另一个应用程序并将所选数据发送到该应用程序。

我将使用 Glade 和 python 进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T22:14:02.730

你应该先了解一些关于 glade 和 gtk 的基础知识。以下只是注释：

> 1-在林间空地，您可以使用菜单按钮创建菜单。
> 
> 2-右键单击它并选择“编辑...”
> 
> 3-从窗口中可以添加项目。（右侧显示菜单项的名称和类型，左侧显示所选项目的属性，下部显示可以连接到菜单项的信号）
> 
> 4-现在将菜单项与执行您想要的功能连接（单击该选项时只需执行另一个应用程序并将所选数据发送到该应用程序。）
> 
> 5-转到您的代码。照常拿菜单。

```
self.menu = self.builder.get_object("menu") 
```

> 6-要在右键单击一个对象时弹出菜单，您应该将该对象与执行菜单的函数连接起来（假设它的名称是 :on_button_press ）：

```
def on_button_press(self, treeview, event):
    if event.button == 3:

        x = int(event.x)

        y = int(event.y)

        time = event.time

        pthinfo = treeview.get_path_at_pos(x, y)

        if pthinfo is not None:

            path, col, cellx, celly = pthinfo

            treeview.grab_focus()

            treeview.set_cursor( path, col, 0)

            self.popupmenu.popup( None, None, None, event.button, time)

        return True 
```

# facebook-graph-api - 如何知道哪个 Facebook 应用正在发送实时更新

> ID：10919949
> 
> 赞同：0
> 
> 时间：2012-06-06T18:25:44.977
> 
> 标签：facebook-graph-api, real-time, signature, updates, facebook-requests

我有一个应用程序将处理多个 Facebook 应用程序订阅的实时更新。在验证签名步骤中，我需要知道 Facebook 为我提供了哪个 Facebook 应用程序的更新（以便我可以使用正确的应用程序密码）。我还没有看到提供此信息的示例请求，但我可能会错过它。有没有办法知道订阅是针对哪个应用程序的（无需迭代我已知的应用程序并尝试每个秘密直到一个有效）？

我的一个想法是订阅 Facebook 并提供一个回调 URL，该 URL 在路径中包含 App ID，以便我可以这样解析它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:58:17.263

带有 App ID 的回调 URL 似乎是唯一的方法。

特别是从：

> 请注意，一旦确认订阅，将不会再次发送 hub.mode、hub.challenge 和 hub.verify_token 参数。
> 
> 来自[https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:52:45.397

我知道这个帖子有点旧，但我发布这个是因为它可以帮助其他人寻找这个。

使用单个端点处理多个应用程序调用的最佳方法是使用您的应用程序 ID 发送 get 参数。

例如：将 callbackurl 设置为`http://yoursite.com/callback.php?id=xxxxxxxxxxxx`

您可以使用`$_GET['id']`. 简单，而且工作得很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T16:23:25.450

您可以尝试将 verify_token 令牌参数设置为应用 ID。然后在您的回调文件上使用 $_GET['hub_verify_token'] 检查哪个应用程序发送了更新。

# java - 正则表达式找到最短匹配？

> ID：10919950
> 
> 赞同：2
> 
> 时间：2012-06-06T18:25:45.383
> 
> 标签：java, regex

我的程序检索 HTML 页面内容，然后在页面中查找 jpg 图像链接。

我想使用正则表达式来捕捉图像但是我在这里遇到了问题..

为了做到这一点，我使用了模式

> “http.*?jpg”

但这让我捕捉到了这样的表达：“http://someURL...http://imageURL.jpg”

所以我想我想找到的是最短匹配，即找到“jpg”并向后看第一个“http”

***是否可以使用正则表达式？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:29:53.683

尝试`http:[^:]*?jpg`这是一种 hacky 方法，以确保您只有一个分号，因此只有一个 http: 块，您可以进一步选择 url 的常用分隔符

`http:[^:\"\}\{\s]*?\.jpg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:51:33.050

如何使用基于负前瞻的正则表达式来确保最短的文本在`http://`和 .jpg` 之间匹配，如下所示：

```
/http:\/\/(?!.*?http:\/\/).+?\.jpe?g/ 
```

# php - 使用 jQuery 查找子链接并删除父类

> ID：10919956
> 
> 赞同：1
> 
> 时间：2012-06-06T18:26:22.937
> 
> 标签：php, jquery, list, variables, tabs

**问题：**

我有一个包含两个选项卡的列表。当我提交表单并重新加载页面时，我想跟踪用户上次打开的选项卡以便再次激活它。

**HTML 代码：**

```
<ul id="myTab" class="nav nav-tabs">
    <li class="active">
        <a href="#participants" data-toggle="tab">Participants</a>
    </li>
    <li>
        <a href="#gradevalues" data-toggle="tab">Criteria</a>
    </li>
</ul> 
```

**PHP代码：**

PHP 将生成一个包含“participants”或“gradevalues”的变量 $subtabname。

**设想：**

如果我在#gradevalues 上并提交表单，变量$subtabname 将包含“gradevalues”。我希望 jQuery 从#participants 中删除“活动”类，并将其添加到#gradevalues 的li 中。

**问题：**

我将如何使用 jQuery 使用此 PHP 变量查找元素并移至其父 li 以删除/添加“活动”类？

**[更新]：非最佳工作 jQuery 代码**

```
$( "#myTab li.active" ).removeClass("active");
$( "#myTab a[href=#'.$subtabname.']" ).parent("li").addClass("active"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:31:16.053

在 PHP 文件中：

```
<body data-activetab="<?php echo $subtabname ?>"> 
```

在 jQuery 文件中：

```
(function () {
    var subtabname = $( 'body' ).data( 'activetab' );
    var $activeTab = $( 'a[href="#' + subtabname '"]', 'myTab' ).parent();
    $activeTab.addClass( 'active' ).siblings().addClass( 'active' );
}()); 
```

* * *

我已经稍微优化了你的代码：

```
(function ( $ul, active ) {
    $ul.children().removeClass( active );
    $ul.find( 'a[href="#.$subtabname."]' ).parent().removeClass( active );
}( $( '#myTab' ), 'active' )); 
```

我将类名作为字符串传递以避免代码重复（在您的代码中，类名字符串重复三遍）。我还将 DOM 查询的数量从两个减少到一个。

顺便说一句，如果您需要在代码的其他一些部分中引用 #myTab 元素，请将其缓存在一个变量中，并使用该变量而不是对同一元素执行多个 DOM 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:30:49.877

```
$('#' + $subtabname).parent().addClass('active'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:34:02.467

您可以从服务器端返回该 php 变量（$tabname）。在javascript中做这样的事情：

```
var tabname = "<?php echo $tabname ?>"
// in case if other tab has this class, so remove it first safer side
jQuery('li').removeClass('active');
// add class to that required tab
jQuery('#'+tabname).parent('a').addClass('active'); 
```

# wpf-controls - 我需要做些什么才能在同一个表单中多次使用 UserControl 吗？

> ID：10919962
> 
> 赞同：0
> 
> 时间：2012-06-06T18:26:46.773
> 
> 标签：wpf-controls

我正在创建一个自定义 UserControl，它将代表 TabItem 的表单内容。基本上，我正在使用[这个问题](https://stackoverflow.com/questions/4535868/wpf-adding-dynamic-controls-to-dynamically-added-tabitem)的建议。但是，我正在设计的 UserControl 有几个文本字段、复选框等，我需要处理这些数据以将其插入 SQL 数据库。但是，我现在正在设计控件，并且我想确保在开始添加包含所有这些文本字段的选项卡后不会遇到重叠名称的问题。

我想我的问题是：处理这些文本字段需要做些什么特别的事情吗？基本上，我将遍历 TabItems，从它们各自的表单中获取数据，并对其进行处理。

我知道这个问题非常笼统，但我对 WPF 非常陌生（因为这是我学习它的第一天），而且我已经负责编写一个完全成熟的应用程序，我完全不知所措。只是想确保我从写作开始！如果我应该指定更多信息，请告诉我，我会尽力而为。如果我遗漏了什么，我不希望这个问题立即结束，因为我迫切需要它得到回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:55:16.210

创建用户控件是好的方法的第一步。基本上，您将使用您计划公开的所有字段来填充您的控件。您关于重叠名称的问题令人困惑，因为这通常不会发生在 UI 设计中，除非您需要继续在所有选项卡中显示一致的可变数据。

我建议您简要研究一下 MVVM，但仅从使用视图模型将值绑定到您的字段的角度来看。如果您在不同的控件中有控件名称，则具有相同数据的多个字段不是问题。但是，您必须在每次对控件的访问前加上用户控件名称。换句话说：

```
pageOne.Title = "Fluid Temperatures";
pageTwo.Title = "Fluid flowrates";
pageThree.Title = "Fluid Viscosities";

pageOne.FluidName="Carbonic Acid";
pageTwo.FluidName="Carbonic Acid";
pageThree.FluidName="Carbonic Acid"; 
```

您会发现使用视图模型和双向数据绑定将使您的生活变得更加轻松。

希望这对您的情况有所帮助。

# javascript - 如何将 JavaScript 对象编码为 JSON？

> ID：10919965
> 
> 赞同：75
> 
> 时间：2012-06-06T18:26:56.430
> 
> 标签：javascript, jquery, json, checkbox, hashtable

有没有一种将 JavaScript 对象编码为 JSON 的好方法？

我有一个键值对列表...名称来自复选框，并且根据是否选中该框，该值是真还是假：

```
var values = {};
$('#checks :checkbox').each(function() { values[this.name]=this.checked; }); 
```

我想将这些值传递到 JSON 对象中，以便存储到 cookie 中以呈现表（将根据用户检查的内容添加列）。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-06-06T18:31:30.687

我认为您可以使用[JSON.stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
// after your each loop
JSON.stringify(values); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-06T18:48:46.143

现在所有主流浏览器都包含原生 JSON 编码/解码。

```
// To encode an object (This produces a string)
var json_str = JSON.stringify(myobject); 

// To decode (This produces an object)
var obj = JSON.parse(json_str); 
```

请注意，只有有效的 JSON 数据才会被编码。例如：

```
var obj = {'foo': 1, 'bar': (function (x) { return x; })}
JSON.stringify(obj) // --> "{\"foo\":1}" 
```

有效的 JSON 类型包括：对象、字符串、数字、数组、`true`、`false`和`null`。

一些 JSON 资源：

*   [Mozilla 开发者网络上的 JSON](https://developer.mozilla.org/en/JSON)
*   [维基百科上的 JSON](https://en.wikipedia.org/wiki/JavaScript_Object_Notation)

# java - 无法绑定锁定端口 - webdriver 2.22

> ID：10919968
> 
> 赞同：3
> 
> 时间：2012-06-06T18:27:01.397
> 
> 标签：java, firefox, selenium, webdriver

我收到一个错误，我的 webdriver (2.22) 无法在 45000 毫秒内绑定到锁定端口 7054。

**版本：**

*   操作系统：WinXP
*   法郎：12
*   网络驱动程序：2.22.0
*   爪哇：1.6

**情况**

今天早上一切正常，我的测试运行了。我的 FF 没有安装在“预期”的位置（我安装它时没有工作 PC 的管理员权限）。因此，我必须创建 Firefox 驱动程序，如下所示

new FirefoxDriver(new FirefoxBinary(new File("C:\Documents and Settings\larsonre\Local Settings\Application Data\Mozilla Firefox\firefox.exe")), null);

今天我终于获得了管理员权限。所以我卸载了 FF 并重新安装它，所以它会在 C:\Program Files\Mozilla Firefox\firefox.exe 中，我将调用更改为“new FirefoxDriver();” 现在我收到 webdriver 无法绑定到锁定端口的错误。

如果我使用指定二进制路径但为其提供新路径的代码，我会收到相同的错误。

我没有看到 firefox 启动，也没有在任务管理器中看到 firefox 进程。

有任何想法吗？（下面的故障跟踪）

**- - - 痕迹 - - -**

org.openqa.selenium.WebDriverException：无法在 45000 毫秒内绑定到锁定端口 7054 构建信息：版本：'2.22.0'，修订：'17048'，时间：'2012-05-29 14:59:54' 系统信息：os.name：'Windows XP'，os.arch：'x86'，os.version：'5.1'，java.version：'1.6.0_29' 驱动程序信息：driver.version：FirefoxDriver at org.openqa.selenium .internal.SocketLock.lock(SocketLock.java:94) at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:68) at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java :207) 在 org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:93) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:147) 在 edu.si.solaa._02_ListOfValidAppIDs。setUp(_02_ListOfValidAppIDs.java:24) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在 java.lang.reflect .Method.invoke(Unknown Source) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) 在 org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27) 在 org.junit.internal.runners.statements。 RunAfters.evaluate(RunAfters.java:31) 在 org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79) 在 org.junit.runners。BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) 在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) 在 org.junit。 runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org .junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run( JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:第 467 章.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

java.lang.NullPointerException at edu.si.solaa._02_ListOfValidAppIDs.tearDown(_02_ListOfValidAppIDs.java:32) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect .DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners .model.ReflectiveCallable.run(ReflectiveCallable.java:15) 在 org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) 在 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java :37) 在 org.junit.runners 的 org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)。BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) 在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) 在 org.junit。 runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org .junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run( JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:第 467 章.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:53:15.080

显然我只需要在安装后重新启动我的机器.....

# geolocation - 在空白地图上定位噪声源？

> ID：10919973
> 
> 赞同：0
> 
> 时间：2012-06-06T18:27:22.973
> 
> 标签：geolocation, maps, geocoding, geospatial

我将描述这个实验。我有一个很大的领域，巨大的领域。在那个领域有树木、灌木和多个扬声器 (5)。这些扬声器不会移动并发出独特的声音。

我还有一个可以捕捉每一个声音的移动设备。它能够区分每个扬声器并忽略白噪声。该设备为扬声器提供声音的响度值。每一秒，该设备都会保存一个扬声器列表以及它们的声音有多大。当我靠近扬声器时，设备发现声音更大。

在实验结束时，我有一张表，其中包含扬声器的响度随时间变化的情况。这应该足以对每个点进行三角测量。

毕达哥拉斯会成功吗？（地球不是完全平坦的）有人有数学公式或图书馆吗？有谁知道我如何用这些信息追踪地图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:40:25.087

有趣的问题。

您需要能够将响度的变化映射到位置。为此，您需要知道衰减率。这将因频率而异 - 低和高以不同的速率下降。这不是毕达哥拉斯。

这将为您提供围绕扬声器一圈的一系列位置。

对两个扬声器重复此操作，您将有两个重叠的圆圈。他们的交点将是一个点。那将是位置。该位置是直角三角形中具有直角的点。

您现在知道您相对于扬声器的位置，但不知道您在世界上的位置。但是你会提前知道每个扬声器的位置。您可以将它们的 x,y 坐标添加到您的相对坐标中以获得绝对位置。

（实际上这些形状是 3D 的，所以圆是球体，x,y 坐标是 x,y,z 坐标）。

在这个阶段你可以使用毕达哥拉斯来获得两个扬声器之间的距离。但是到这个阶段你已经知道你在场上的位置，而且你会在不使用毕达哥拉斯的情况下找到它。

# ruby-on-rails - Rails 3：创建新的 rails 资产助手，例如指向 s3 的 image_tag

> ID：10919977
> 
> 赞同：1
> 
> 时间：2012-06-06T18:27:37.570
> 
> 标签：ruby-on-rails, asset-pipeline

什么是创建一个新的资产标签助手的最佳方法，它的工作方式与 image_tag 完全相同，除了指向 s3？

所以我希望发生这种情况：

```
image_path "foo.jpg" # => "/assets/foo.jpg" (default behavior)
s3_image_path "bar.jpg" # => "http://site.s3.amazon.com/assets/bar.jpg" 
```

最好的方法是在 application_helper.rb 中创建一个新的助手吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:56:53.970

我刚刚在 application_helper.rb 中编写了模仿默认资产助手的新助手，如下所示：

```
def s3_image_path(filename)
  "http://site.s3.amazonaws.com/assets/#{filename}"
end

def s3_image_tag(filename, options={})
  image_tag(s3_image_path(filename), options)
end 
```

所以`s3_image_tag("image.jpg")`会指向`http://site.s3.amazonaws.com/assets/image.jpg`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:37:26.457

如果 site.s3.. 不在 rails 应用程序中且未使用asset_pipeline，则只需在图像 src 中直接引用 url。

如果 s3 是您的应用程序站点，那么只需在将要使用的上下文中编写一个新的帮助程序。

或者[http://site.s3.amazon.com/assets/bar.jpg](http://site.s3.amazon.com/assets/bar.jpg)的东西看起来像

```
<img src="<%=@root_url%>/assets/bar.jpg" /> 
```

那么，为什么另一个不同呢？我的意思是你为什么有两个？

**编辑：**

我要做的只是在应用程序帮助程序中使用一个字符串来保存托管站点的 URL。然后是返回图像的辅助方法 `tag("img", :src => "#{s3_image_link}/bar.jpg")`

# python - 来自终端的 Python SciPy 调用失败

> ID：10919980
> 
> 赞同：1
> 
> 时间：2012-06-06T18:27:45.773
> 
> 标签：python, ubuntu, numpy, terminal, scipy

我正在尝试使用标准从 Ubuntu 终端调用以下 Python 脚本

`python rosen.py`

但它失败了。我可以`F5`闲置，它工作正常，但从终端调用时失败。的代码`rosen.py`如下：

```
from scipy.optimize import fmin

def rosen(x):
    b=sum(100.0*(x[1:]-x[:-1]**2.0)**2.0 + (1-x[:-1])**2.0)
    print b
    return b

x0 = [1.3, 0.7, 0.8, 1.9, 1.2]
xopt = fmin(rosen, x0, xtol=1e-8)
print xopt 
```

再次，在空闲运行时它工作正常，但是当从终端调用时它说 scipy 不存在......

我可以从终端或空闲运行以下 numpy 代码，它工作正常：

```
import numpy as np
a=np.sin(1)
print a 
```

它将在终端窗口或空闲窗口中打印，具体取决于调用它的位置。

基本上，我怎样才能让 rosen.py 导入 SciPy 并在从 Ubuntu 终端调用时运行？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:31:14.063

你有

```
#!/usr/bin/python 
```

在你的文件的顶部来识别python解释器的位置？并使您的脚本可执行

```
chmod +x rosen.py 
```

然后任何一个命令都适用于我在 Ubuntu 下：

```
./rosen.py 
```

或者

```
python rosen.py 
```

（`chmod`如果您希望能够在不`python`先在命令行上键入的情况下运行脚本，则 是可选的。`python rosen.py`将在不带 的情况下工作`chmod`）

而且由于您已经在脚本中导入了 scipy，所以我不确定我是否理解问题的那一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:40:53.107

在我看来，您的版本`idle`指向的 python 实现与 PATH 中的第一个实现不同。试试这个（从命令行——不是python）：

```
head -1 `which idle` 
```

和：

```
which python 
```

路径是否相同？如果没有，那可能是你的问题。要解决此问题，根据您的系统设置，您可以重新排序 PATH 以获取要调用的正确版本的 python，或者您可以在路径的早期某处创建指向正确 python 实现的符号链接。

# java - CheckBox ajax 未执行

> ID：10919987
> 
> 赞同：0
> 
> 时间：2012-06-06T18:28:04.547
> 
> 标签：java, ajax, jsf, checkbox

基本思想是在未**选中**`selectManyCheckbox`时启用。当我第一次加载页面并**取消选中**ajax中的呈现似乎不起作用，因为仍然禁用。我怎样才能检查出什么问题？或者我错过了什么？`selectBooleanCheckbox`****`selectBooleanCheckbox``selectManyCheckbox`****

 ****这发生在我第一次加载页面时，如果我点击按钮并突然使用复选框，它就会开始工作。

干杯，

```
 <h:form id="formActualizacionCubo">
        <rich:panel id="panelActualizacionCubo"
                    style="width: 350px">
            <f:facet name="header">
                <h:outputText value="Administracion Cubo de Información PEC"/>
            </f:facet>

            <h:outputLabel for="selectDependenciasCubo"
                           value="Actualizar TODO el Cubo de informacion?"/>
            <h:selectBooleanCheckbox id="selectDependenciasCubo"
                                     value="#{administrationBean.actualizaTodasDependencias}">
                <f:ajax event="click"
                        listener="#{administrationBean.doClearCuboLabels}"
                        render="opcionesDependenciasCubo seleccionDependencias messageActualizaCubo actualizacionCuboCorrecta"/>
            </h:selectBooleanCheckbox>

            <a4j:outputPanel id="opcionesDependenciasCubo">
                <h:selectManyCheckbox id="seleccionDependencias" 
                                      layout="pageDirection" required="true"
                                      requiredMessage="Seleccione al menos una dependencia."
                                      disabled="#{administrationBean.actualizaTodasDependencias}"
                                      value="#{administrationBean.dependenciasPorActualizar}">
                    <f:selectItems value="#{administrationBean.dependenciasOpciones}"/>
                    <f:ajax event="click"
                            listener="#{administrationBean.doClearCuboLabels}"
                            render="messageActualizaCubo actualizacionCuboCorrecta"/>
                </h:selectManyCheckbox>
                <rich:message id="messageActualizaCubo" 
                              for="seleccionDependencias"/>
            </a4j:outputPanel>
            <h:panelGrid columns="3">
                <a4j:commandButton id="btnActualizaCubo" value="Actualizar Cubo PEC"
                                   render="messageActualizaCubo actualizacionCuboCorrecta @this"
                                   onbegin="this.disabled=true;
                                   document.getElementById('formActualizacionCubo:imgProcesandoCubo').style.display='block'"
                                   oncomplete="this.disabled=false;
                                   document.getElementById('formActualizacionCubo:imgProcesandoCubo').style.display='none'"
                                   action="#{administrationBean.doActualizaCubo}"/>
                <h:panelGroup/>
                <h:graphicImage id="imgProcesandoCubo" url="img/imgLoading.gif"
                                style="display: none"/>
            </h:panelGrid>
            <a4j:outputPanel id="actualizacionCuboCorrecta" style="font-size: 14px; color: #D17100">
                <h:outputText rendered="#{administrationBean.actualizacionCuboCorrectaLabelRendered}"
                              value="Actualización correcta !"/>
                <h:outputText rendered="#{administrationBean.actualizacionCuboFalloLabelRendered}"
                              value="Fallo la actualización !"/>
            </a4j:outputPanel>
        </rich:panel>
    </h:form> 
```

**更新**

贴出我的Backing bean代码，也许你会发现它有问题

```
private HashMap<String, String> dependencias;
private boolean actualizaTodoCuboChecked = true;
private List<String> dependenciasOpciones;
private List<String> dependenciasPorActualizar;
private boolean actualizacionCuboCorrectaLabelRendered = false;
private boolean actualizacionCuboFalloLabelRendered = false;

public boolean isActualizaTodoCuboChecked() {
    return actualizaTodoCuboChecked;
}

public void setActualizaTodoCuboChecked(boolean actualizaTodoCuboChecked) {
    this.actualizaTodoCuboChecked = actualizaTodoCuboChecked;
    dependenciasPorActualizar.clear();
}

public List<String> getDependenciasOpciones() {
    return dependenciasOpciones;
}

public void setDependenciasOpciones(List<String> dependenciasOpciones) {
    this.dependenciasOpciones = dependenciasOpciones;
}

public List<String> getDependenciasPorActualizar() {
    return dependenciasPorActualizar;
}

public void setDependenciasPorActualizar(List<String> dependenciasPorActualizar) {
    this.dependenciasPorActualizar = dependenciasPorActualizar;
}

public boolean isActualizacionCuboCorrectaLabelRendered() {
    return actualizacionCuboCorrectaLabelRendered;
}

public boolean isActualizacionCuboFalloLabelRendered() {
    return actualizacionCuboFalloLabelRendered;
}

public void doClearCuboLabels(){
    actualizacionCuboCorrectaLabelRendered = false;
    actualizacionCuboFalloLabelRendered = false;
}

public void doActualizaCubo() {
    if (actualizaTodoCuboChecked) {
        //Actualiza todas las dependencias
        //actualizacionCuboCorrectaLabelRendered = db.actualizarCuboInformacion(dependenciasOpciones);
    } else {
        //Actualiza solo las dependencias seleccionadas
        //actualizacionCuboCorrectaLabelRendered = db.actualizarCuboInformacion(dependenciasPorActualizar);
    }
    actualizacionCuboCorrectaLabelRendered = true; //Eliminar esta fila cuando se descomenten las llamadas en el IF-ELSE
    actualizacionCuboFalloLabelRendered = !actualizacionCuboCorrectaLabelRendered;
}

private void loadDependenciesFromXML() {
    XStream reader = new XStream(new DomDriver());
    reader.alias("root", Map.class);
    dependencias =
            (HashMap<String, String>) reader.fromXML(new File(ROOT_DIR + "/confFiles/dependencias.xml"));
    dependenciasOpciones = new ArrayList<String>();
    for (String s : dependencias.keySet()) {
        dependenciasOpciones.add(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:19:57.863

最后一步一步检查了我所有的代码后，我意识到这两个列表没有被初始化。所以问题得到了解决，从这个改变：

```
private List<String> dependenciasOpciones;
private List<String> dependenciasPorActualizar; 
```

对此

```
private List<String> dependenciasOpciones = new ArrayList<String>();
private List<String> dependenciasPorActualizar = new ArrayList<String>(); 
```

然后一切都很完美。****

# java - 如何在 Java/Scala 中观察/跟踪类成员访问？

> ID：10919994
> 
> 赞同：2
> 
> 时间：2012-06-06T18:29:10.403
> 
> 标签：java, scala, attributes, listener, trace

我正在开发现有 Java ORM (Ebean) 的 Scala 扩展。该项目的目标是为 ORM 添加尽可能多的类型安全性。代替

```
Ebean.find(Product.class).fetch("name", "unit").findList() 
```

我终于希望能够写出类似的东西

```
(objects of entity[Product] with attributes name and unit) getIt 
```

（请注意，这只是第一个 DSL 方法）。

ORM 模型已经定义为

```
@Entity
public class {
    public String name;
    public String unit;
} 
```

**为了在编译时为查询中的属性实现类型安全，我需要在例如`(new Product()).name`.**

我认为这是确保仅使用该类中存在的此类模型成员的最佳方法，但是，在运行时，我需要一种方法来识别该变量已被访问。否则我只会打电话给那个成员`name`，而不会在我的查询中知道这一点。

有谁知道如何实现这一目标？**是否有可能跟踪访问变量的时间并在运行时将该信息提供给任何其他对象？**

我已经考虑过使用 getter 和 setter，而不是在模型类中使用公共成员，但这会使查询或模型变得非常难看。另一个问题是必须为每个模型手动添加任何额外的特定方法。

如果有人能提出可能的解决方案，我会很高兴。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:59:54.713

如果您愿意将模型对象的字段定义为类似 Record Fields 的内容，那么 Emil 的建议可能会奏效，但如果您使用自定义类型在 Java ORM 之上构建解决方案可能会成为问题。如果您需要跟踪字段访问，我认为您最好的选择是使用[CGLib](http://cglib.sourceforge.net/)或[Javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)之类的库进行运行时字节码检测。您可以将经过检测的“虚拟”对象传递到函数的主体中，然后跟踪在本地线程中访问了哪个字段。这就是它在[Squeryl](http://squeryl.org)中的完成方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:49:46.347

你可以看看 Lift 的人是如何实现[Mapper](http://www.assembla.com/spaces/liftweb/wiki/Mapper)和 Records 的。它允许使用伴随对象（以及使用原始 sql）进行类型安全查询。它确实需要将特征继承到您的模型中，并且字段被指定为对象而不是常规 val。不过可能会有所帮助。[您可以在此处](https://github.com/lift/framework/tree/master/persistence)找到持久性内容的来源。

# android - Android：几个 orderBy 语句

> ID：10919997
> 
> 赞同：0
> 
> 时间：2012-06-06T18:29:16.090
> 
> 标签：android, sql-order-by

是否可以在一个查询中创建两个 orderBy 语句。假设我想在第 1 列之后和第 2 列之后排序我的数据。最好的方法是什么？

真诚的 杰斯珀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:32:35.847

你就说`ORDER BY Column1, Column2`。如果您使用其中一种方法的*orderBy*参数`query`，则在构建查询时删除`ORDER BY`为您插入的前缀。

# java - 使用休眠和接缝保持多对多关系

> ID：10919998
> 
> 赞同：1
> 
> 时间：2012-06-06T18:29:23.087
> 
> 标签：java, hibernate, seam, persist

我有一个与现有数据库通信的程序。有一个复合表，其中有一个员工和一个车辆作为它的复合键。在编辑或添加员工页面上，他们是一个下拉框，用于选择员工喜欢哪些车辆，然后将车辆列表存储在员工类的哈希表中。但是，该列表不会持久存在或存储在复合表中。我是接缝新手，整天都在试图解决这个问题。任何帮助，将不胜感激。

以下是我的一些课程： 员工：

```
@Entity
@Table(name = "flower_store_employee", schema = "dbo", catalog = "tyler")
public class FlowerStoreEmployee implements java.io.Serializable, Comparable<FlowerStoreEmployee> {

/**
 * 
 */
private static final long serialVersionUID = -1727355085366851150L;
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name = "employee_id", unique = true, nullable = false)
private Integer employeeId;
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "address_id")
private FlowerStoreAddress flowerStoreAddress;
@Column(name = "name_first", length = 25)
@Length(max = 25)
private String nameFirst;
@Column(name = "name_last", length = 25)
@Length(max = 25)
private String nameLast;
@Column(name = "ssn")
private String ssn;
@Column(name = "phone")
private String phone;
@Column(name = "pay")
private int pay;
@OneToMany(fetch = FetchType.LAZY, mappedBy = "flowerStoreEmployee")
private Set<FlowerStoreDelivery> flowerStoreDeliveries = new HashSet<FlowerStoreDelivery>(
        0);
@Cascade({org.hibernate.annotations.CascadeType.ALL })
@ManyToMany(fetch = FetchType.LAZY, mappedBy = "flowerStoreEmployees")
//@JoinTable(name = "flower_store_emp_vehicle", schema = "dbo", catalog = "tyler", joinColumns = { @JoinColumn(name = "vehicle_id", nullable = false, updatable = true) }, inverseJoinColumns = { @JoinColumn(name = "employee_id", nullable = false, updatable = true) })
private Set<FlowerStoreVehicle> flowerStoreVehicles = new HashSet<FlowerStoreVehicle>(
        0);
public FlowerStoreEmployee() {
}

public FlowerStoreEmployee(int employeeId) {
    this.employeeId = employeeId;
}

public FlowerStoreEmployee(FlowerStoreAddress flowerStoreAddress, String nameFirst,
        String nameLast, String ssn, String phone, int pay,
        Set<FlowerStoreDelivery> flowerStoreDeliveries,
        Set<FlowerStoreVehicle> flowerStoreVehicles) {
    this.employeeId = employeeId;
    this.flowerStoreAddress = flowerStoreAddress;
    this.nameFirst = nameFirst;
    this.nameLast = nameLast;
    this.ssn = ssn;
    this.phone = phone;
    this.pay = pay;
    this.flowerStoreDeliveries = flowerStoreDeliveries;
    this.flowerStoreVehicles = flowerStoreVehicles;
}

public int getEmployeeId() {
    return this.employeeId;
}

public void setEmployeeId(int employeeId) {
    this.employeeId = employeeId;
}

public FlowerStoreAddress getFlowerStoreAddress() {
    return this.flowerStoreAddress;
}

public void setFlowerStoreAddress(FlowerStoreAddress flowerStoreAddress) {
    this.flowerStoreAddress = flowerStoreAddress;
}

public String getNameFirst() {
    return this.nameFirst;
}

public void setNameFirst(String nameFirst) {
    this.nameFirst = nameFirst;
}

public String getNameLast() {
    return this.nameLast;
}

public void setNameLast(String nameLast) {
    this.nameLast = nameLast;
}

public String getSsn() {
    return this.ssn;
}

public void setSsn(String ssn) {
    this.ssn = ssn;
}

public String getPhone() {
    return this.phone;
}

public void setPhone(String phone) {
    this.phone = phone;
}

public int getPay() {

    return this.pay;
}

public void setPay(int pay) {
    this.pay = pay;
}

public void setPay(String pay){
    this.pay = Integer.parseInt(pay);
}

public Set<FlowerStoreDelivery> getFlowerStoreDeliveries() {
    return this.flowerStoreDeliveries;
}

public void setFlowerStoreDeliveries(
        Set<FlowerStoreDelivery> flowerStoreDeliveries) {
    this.flowerStoreDeliveries = flowerStoreDeliveries;
}

public Set<FlowerStoreVehicle> getFlowerStoreVehicles() {
    return this.flowerStoreVehicles;
}

public void setFlowerStoreVehicles(
        Set<FlowerStoreVehicle> flowerStoreVehicles) {
    this.flowerStoreVehicles = flowerStoreVehicles;
}

public int compareTo(FlowerStoreEmployee emp) {
    if(this.employeeId > emp.employeeId){
        return 1;
    }
    else 
        if(this.employeeId < emp.employeeId){
                return -1;
        }
    else{
        return 0;
    }
} 
```

车辆：

```
@Entity
@Table(name = "flower_store_vehicle", schema = "dbo", catalog = "tyler")
public class FlowerStoreVehicle implements java.io.Serializable {

/**
 * 
 */
private static final long serialVersionUID = 5349431404739349258L;
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name = "vehicle_id", unique = true, nullable = false)
private int vehicleId;
@Column(name = "vin", length = 17)
@Length(max = 17)
private String vin;
@Column(name = "license", length = 10)
@Length(max = 10)
private String license;
@Column(name = "make", length = 15)
@Length(max = 15)
private String make;
@Column(name = "model", length = 20)
@Length(max = 20)
private String model;
@Column(name = "color", length = 20)
@Length(max = 20)
private String color;
@OneToMany(fetch = FetchType.LAZY, mappedBy = "flowerStoreVehicle")
private Set<FlowerStoreDelivery> flowerStoreDeliveries = new HashSet<FlowerStoreDelivery>(
        0);
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "flower_store_emp_vehicle", schema = "dbo", catalog = "tyler", joinColumns = { @JoinColumn(name = "vehicle_id", nullable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = "employee_id", nullable = false, updatable = false) })
private Set<FlowerStoreEmployee> flowerStoreEmployees = new HashSet<FlowerStoreEmployee>(
        0);

public FlowerStoreVehicle() {
}

public FlowerStoreVehicle(int vehicleId) {
    this.vehicleId = vehicleId;
}

public FlowerStoreVehicle(int vehicleId, String vin, String license,
        String make, String model, String color,
        Set<FlowerStoreDelivery> flowerStoreDeliveries,
        Set<FlowerStoreEmployee> flowerStoreEmployees) {
    this.vehicleId = vehicleId;
    this.vin = vin;
    this.license = license;
    this.make = make;
    this.model = model;
    this.color = color;
    this.flowerStoreDeliveries = flowerStoreDeliveries;
    this.flowerStoreEmployees = flowerStoreEmployees;
}

public int getVehicleId() {
    return this.vehicleId;
}

public void setVehicleId(int vehicleId) {
    this.vehicleId = vehicleId;
}

public String getVin() {
    return this.vin;
}

public void setVin(String vin) {
    this.vin = vin;
}

public String getLicense() {
    return this.license;
}

public void setLicense(String license) {
    this.license = license;
}

public String getMake() {
    return this.make;
}

public void setMake(String make) {
    this.make = make;
}

public String getModel() {
    return this.model;
}

public void setModel(String model) {
    this.model = model;
}

public String getColor() {
    return this.color;
}

public void setColor(String color) {
    this.color = color;
}

public Set<FlowerStoreDelivery> getFlowerStoreDeliveries() {
    return this.flowerStoreDeliveries;
}

public void setFlowerStoreDeliveries(
        Set<FlowerStoreDelivery> flowerStoreDeliveries) {
    this.flowerStoreDeliveries = flowerStoreDeliveries;
}

public Set<FlowerStoreEmployee> getFlowerStoreEmployees() {
    return this.flowerStoreEmployees;
}

public void setFlowerStoreEmployees(
        Set<FlowerStoreEmployee> flowerStoreEmployees) {
    this.flowerStoreEmployees = flowerStoreEmployees;
}

} 
```

复合表ID：

```
/**
 * FlowerStoreEmpVehicleId generated by hbm2java
 */
@Embeddable
public class FlowerStoreEmpVehicleId implements java.io.Serializable {

private int vehicleId;
private int employeeId;

public FlowerStoreEmpVehicleId() {
}

public FlowerStoreEmpVehicleId(int vehicleId, int employeeId) {
    this.vehicleId = vehicleId;
    this.employeeId = employeeId;
}

@Column(name = "vehicle_id", nullable = false)
public int getVehicleId() {
    return this.vehicleId;
}

public void setVehicleId(int vehicleId) {
    this.vehicleId = vehicleId;
}

@Column(name = "employee_id", nullable = false)
public int getEmployeeId() {
    return this.employeeId;
}

public void setEmployeeId(int employeeId) {
    this.employeeId = employeeId;
}

public boolean equals(Object other) {
    if ((this == other))
        return true;
    if ((other == null))
        return false;
    if (!(other instanceof FlowerStoreEmpVehicleId))
        return false;
    FlowerStoreEmpVehicleId castOther = (FlowerStoreEmpVehicleId) other;

    return (this.getVehicleId() == castOther.getVehicleId())
            && (this.getEmployeeId() == castOther.getEmployeeId());
}

public int hashCode() {
    int result = 17;

    result = 37 * result + this.getVehicleId();
    result = 37 * result + this.getEmployeeId();
    return result;
}

} 
```

复合表：

```
@Entity
@Table(name = "flower_store_emp_vehicle", schema = "dbo", catalog = "tyler")
public class FlowerStoreEmpVehicle implements java.io.Serializable {

private FlowerStoreEmpVehicleId id;

public FlowerStoreEmpVehicle() {
}

public FlowerStoreEmpVehicle(FlowerStoreEmpVehicleId id) {
    this.id = id;
}

@EmbeddedId
@AttributeOverrides({
        @AttributeOverride(name = "vehicleId", column = @Column(name = "vehicle_id", nullable = false)),
        @AttributeOverride(name = "employeeId", column = @Column(name = "employee_id", nullable = false)) })
@NotNull
public FlowerStoreEmpVehicleId getId() {
    return this.id;
}

public void setId(FlowerStoreEmpVehicleId id) {
    this.id = id;
}

} 
```

这是保存员工的代码：

```
public String addEmployee(){
    Set<FlowerStoreVehicle> vehicleSet = new HashSet<FlowerStoreVehicle>();
    FlowerStoreEmployee n = new FlowerStoreEmployee();
    if(first!=null && first!=""){
        n.setNameFirst(first);
    }
    if(last!=null && last!=""){
        n.setNameLast(last);
    }
    if(pay!=null && pay!=""){
        int intPay = (int)(Double.parseDouble(pay)*100);
        n.setPay(intPay);
    }
    if(phone!=null && phone!=""){
        n.setPhone(phone);
    }
    if(ssn!=null && ssn!=""){
        n.setSsn(ssn);
    }
    if(vehicle!=null && vehicle!=""){
        String[] vehStr = vehicle.split(" ");
        for(int i = 0; i < vehStr.length; i++){
            int vehId = Integer.parseInt(vehStr[i]);
            vehicleSet.add(entityManager.find(FlowerStoreVehicle.class, vehId));
        }
    }
    if(!vehicleSet.isEmpty()){
        n.setFlowerStoreVehicles(vehicleSet);
    }
    entityManager.persist(n);
    if(zip!=null && zip!=""){
        FlowerStoreZip zipCode = entityManager.find(FlowerStoreZip.class, Integer.parseInt(zip));
        if(zipCode==null){
            zipCode = new FlowerStoreZip();
            if(zip!=null && zip!=""){
                zipCode.setZipCode(Integer.parseInt(zip));
        }
        if(city!=null && city!=""){
            zipCode.setCity(city);
        }
        if(state!=null && city!=""){
            zipCode.setState(state);
        }
        entityManager.persist(zipCode);
        }
    }
    FlowerStoreAddress add = new FlowerStoreAddress();
    if(house!=null && house!=""){
        add.setHouseNumber(Integer.parseInt(house));
    }
    if(street!=null && street!=""){
        add.setStreet(street);
    }
    if(zip!=null && zip!=""){
        add.setFlowerStoreZip(entityManager.find(FlowerStoreZip.class, Integer.parseInt(zip)));
    }
    return "/employee.xhtml";
} 
```

如果需要更多信息，请告诉我。任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:19:23.490

首先，检查你的代码，你有很多错误的指令：在 Java 中，你将字符串与`equals()`方法进行比较，而不是像这样：`ssn != ""`.

问题的根源不是 Seam 本身，而是 Hibernate。首先，通过 向车辆集合添加元素`n.getFlowerStoreVehicles().add(...)`，不要重新分配整个集合`n.setFlowerStoreVehicles(...)`（这在实体创建期间可能不是问题，但在实体持久化后修改集合时会成为问题。

关系未正确保持的原因是 FlowerStoreEmployee 是关系的“弱”方面（注释中具有“mappedBy”属性的方面）。将`@JoinTable`注解移至 FlowerStoreEmployee 类并从 FlowerStoreVehicle 中移除，从 FlowerStoreEmployee 中移除`mappedBy`并放入 FlowerStoreVehicle ( `mappedBy="flowerStoreVehicles"`)。由于关系是双向的，因此分配给关系的双方：

```
FlowerStoreVehicle veh = entityManager.find(FlowerStoreVehicle.class, vehId);
veh.getFlowerStoreEmployees().add(n); // one direction: vehicle -> employee
n.getFlowerStoreVehicles().add(veh);  // the other direction: employee -> vehicle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:00:10.033

代码末尾没有 entityManager.persist，除了保留 ZipCode 之外，没有保留任何对象。

# php - PHP & jQuery 报表生成器

> ID：10919999
> 
> 赞同：1
> 
> 时间：2012-06-06T18:29:23.590
> 
> 标签：php, jquery, forms, jquery-ui-draggable

我希望为我网站上的用户构建一个简单的报告工具。他们将能够抓取类似的项目，（获取所有有笔记的联系人），（获取所有有 XXX 项目的联系人）

特点： - 将项目拖放到页面上（jQuery UI）---> 每个项目都有 PHP 代码从数据库中抓取项目（联系人/笔记等） - 将报告打印到 PDF 或直接打印到打印机- 保存报告，以便他们可以返回并在需要时通过更多拖放进行编辑。

我知道这很复杂，我发现了这一点，并认为这可能是“保存”已生成数据库的报告的开始。 [http://daffl.github.com/jquery.dform/](http://daffl.github.com/jquery.dform/)

另一个潜在的例子是谷歌分析仪表板，它们非常强大。我不需要那种复杂性，而是像这样简单的东西。

任何指针或提示将不胜感激。