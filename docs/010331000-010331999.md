# StackOverflow 问答 10331000-10331999

# html - CSS class1 > class2 是什么意思？

> ID：10331000
> 
> 赞同：0
> 
> 时间：2012-04-26T09:47:59.690
> 
> 标签：html, css, css-selectors

我在一些代码示例中看到了 class1 > class2 { class definition } 。上面的符号是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T09:49:26.603

如果`class2`是 的直接后代（子）`class1`，则将规则应用于具有 class 的元素`class2`。

请注意，这在 ie 版本 7 及更低版本中不起作用

一个小演示：

[http://jsfiddle.net/jjqzK/](http://jsfiddle.net/jjqzK/)

另请注意，它应写为

`.class1 > .class2`（在类名前加上点 ( `.`) 而不仅仅是名称）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:16:01.713

请检查这个演示（请删除/添加（>）然后你可以看到有什么不同）

[http://jsfiddle.net/pZtTy/1/](http://jsfiddle.net/pZtTy/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T09:59:58.683

这里的类 2 是类 1 的直接子级。例如：

```
<div class="class1">
   <div class="class2">
     .....
   </div>
   <div class="class2">
     .....
   </div>
   <div class="class2">
     .....
   </div>
   .....
</div> 
```

那么如果我们调用：

```
.class1 > .class2{
    /* something */
} 
```

那么只有“class1” div 中的第一个“class2” div 会受到样式的影响。

# xcode - 带有 UIViewController（或 UITableViewController）的 tableView 属性

> ID：10331004
> 
> 赞同：0
> 
> 时间：2012-04-26T09:48:12.520
> 
> 标签：xcode, uiviewcontroller, uitableview, reloaddata

```
#import <UIKit/UIKit.h>

@interface FourthViewController : UIViewController{

//@interface FourthViewController : UITableViewController{ 
```

我想更新我的表格视图，所以我尝试使用`[self.tableView reloadData]`，但我什至无法输入这行代码，因为我在 a 中工作，`UIViewController`并且该`tableView`属性仅适用于`UITableViewController`'s。所以我试图变得聪明，只是将其更改`UIViewController`为`UITableViewController`但我得到了这个错误：

```
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UITableViewController loadView] loaded the "b4k-XH-Uhj-view-V2h-dE-ixJ" nib but didn't get a UITableView.' 
```

我觉得这很奇怪，因为 UITableViewController 可以为 tableView 工作，但反过来不行，但是接缝就像我弄错了，或者这里发生了什么？如果您需要更多代码 =) 提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:31:20.427

UITableViewController 实际上只是一个 UIViewController，它包含一个到 UITableView 的出口并实现了两个 tableview 委托：UITableViewDelegate 和 UITableViewDataSource。

您可能需要考虑将 nib 文件中的 viewcontroller 实例替换为 UITableViewController 而不是标准的 UIViewController。

或者，您可以手动调整 ForthViewController 实例，方法是为包含的 UITableView 创建一个 outlet 以将 tableview 作为属性公开。

但是，如果您这样做，您还必须在某处（可能在 ForthViewController 中）手动实现两个 tableview 委托 UITableViewDelegate 和 UITableViewDataSource，并手动将 UITableView 与这些委托关联。

# java - 使用 MVC 从视图页面检索 Java bean

> ID：10331006
> 
> 赞同：0
> 
> 时间：2012-04-26T09:48:15.407
> 
> 标签：java, model-view-controller, web-applications, javabeans

我对 MVC 的实际工作方式有点困惑。

到目前为止，这是我拥有的类型：

1.  静态 jsp 页面有一个发布到控制器 servlet 的表单。
2.  控制器使用数据库访问对象从数据库中获取适当的信息并将其存储到 java bean 中。
3.  将该java bean设置为请求属性，转发到其他jsp页面进行显示。

我感到困惑的是，当我访问的第一个 jsp 页面不是静态的并且我需要检索一个 java bean 以进行显示而没有一些表单发布到控制器来检索它时该怎么办。

似乎如果我调用数据库访问对象来从我的 jsp 页面中生成我需要的 java bean，它将违背 MVC 的本质。

所以我的问题是应该如何处理？在这种情况下，我应该如何在坚持 MVC 原则的同时检索我需要的 java bean？

谢谢！

编辑：我将添加一些代码以使其更清晰：

目前我有一个名为 owner.jsp 的页面，它应该显示酒店列表。在该页面中，我正在获取这样的酒店列表：

```
<%
    HotelDAO hotelDAO = new HotelDAO();
    List<HotelBean> hotels = hotelDAO.getHotels();
    pageContext.setAttribute("hotels", hotels);
%> 
```

然后使用 EL 使用 forEach 循环显示每个酒店。

这根本不通过控制器。我将如何调整它以与 MVC 模型一起使用？

对我来说，检查“hotels”bean 是否已设置并转发到控制器页面，然后再设置“hotels”bean 并转发回 owner.jsp 页面，这似乎不合逻辑。

在这种情况下，MVC 如何确保用户始终通过控制器？我之前写的其他页面都是静态的，只有当你提交了一些表单时，它才会进入控制器，设置一些 bean 并转发到某个页面进行显示。

# javascript - asp.net更新面板中的jquery脚本

> ID：10331015
> 
> 赞同：2
> 
> 时间：2012-04-26T09:48:43.937
> 
> 标签：javascript, jquery, asp.net, css

我编写了一个 jquery 脚本来隐藏 document.ready 中的表格边框。

```
 $(document).ready(function () {
      $(".todotable").last().css("border-bottom", "none");
  }); 
```

此外，我已将标记放在 asp.net 更新面板中，以便在我需要更新表格时回发整个页面。复制相同的 jquery 代码并将其放在更新面板中。但是每次加载更新面板时它都不会应用样式更改。

找不到问题所在。我是否需要将更新面板中的 document.ready 替换为其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:54:57.520

问题是因为您在每次请求后加载内容，不会再次调用文档就绪处理程序。

相反，您需要将代码添加到`endRequest`updatePanel 的事件中。试试这个：

```
$(function() {
    // your jQuery code to execute on page load...
});

Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function() {
    // code to execute on updatePanel change
    $(".todotable").last().css("border-bottom", "none");
}); 
```

# c++ - 当没有数据要读取时，读取套接字会给出 errno EAGAIN，而且如果我断开网络连接

> ID：10331016
> 
> 赞同：1
> 
> 时间：2012-04-26T09:48:45.670
> 
> 标签：c++, sockets

如果可用，我正在调用读取函数来捕获接收到的数据包。当没有要获取的数据包时，我得到 errno EAGAIN，但是当网络断开连接时，我也得到 EAGAIN，所以我无法区分这两种情况。

```
 while ( ((n = read(sockfd, &(buffer[pos]), 1)) > 0) and not messageFound) {

            //reading byte by byte
            if (n == 1) {
               // Some stuff.. 
            }
        }

// Never returning 0, but when returning negative values:
        if (n < 0){
            qDebug()<< "Read error #" << errno << ": " << strerror(errno);
            if(errno != EAGAIN){ // It is always this error, so it's never entering here
                qDebug()<< "Disconnected. Reason #" << errno << ": " << strerror(errno);
                *connected = false;
            }
        } 
```

有什么方法可以检查套接字是否已断开连接，或者在调用 read 之前知道是否有可用的数据包？（我尝试使用 select 但似乎不起作用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:55:14.833

对于 POSIX 套接字，关闭连接和没有数据准备好之间的区别在于返回值。当连接关闭时，返回值为 0，当没有数据时返回负值（参见[手册页](http://linux.die.net/man/2/recv)）

# asp.net-mvc - MvcHtmlString.Create() 和 Html.Raw() 之间的区别

> ID：10331019
> 
> 赞同：28
> 
> 时间：2012-04-26T09:48:57.607
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我正在创建一个 MVC 项目。使用 MVC 4 和 Razor。在构建了一些页面之后，我想知道：两者有什么区别

```
MvcHtmlString.Create() 
```

和

```
Html.Raw() 
```

如果您能在这里帮助我理解这一点，那就太好了。

提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-26T10:04:32.537

[这是查看可用于 ASP.NET ( https://github.com/aspnet/AspNetWebStack/](https://github.com/aspnet/AspNetWebStack/) )的源代码的绝佳机会。

查看 HtmlHelper.cs，这是以下代码`Html.Raw()`：

```
public IHtmlString Raw(string value)
{
    return new HtmlString(value);
}

public IHtmlString Raw(object value)
{
    return new HtmlString(value == null ? null : value.ToString());
} 
```

这是 MvcHtmlString 类的代码：

```
namespace System.Web.Mvc
{
    public sealed class MvcHtmlString : HtmlString
    {
        [SuppressMessage("Microsoft.Security", "CA2104:DoNotDeclareReadOnlyMutableReferenceTypes", Justification = "MvcHtmlString is immutable")]
        public static readonly MvcHtmlString Empty = Create(String.Empty);

        private readonly string _value;

        public MvcHtmlString(string value)
            : base(value ?? String.Empty)
        {
            _value = value ?? String.Empty;
        }

        public static MvcHtmlString Create(string value)
        {
            return new MvcHtmlString(value);
        }

        public static bool IsNullOrEmpty(MvcHtmlString value)
        {
            return (value == null || value._value.Length == 0);
        }
    }
} 
```

最显着的区别是`Html.Raw()`接受任何对象，而`MvcHtmlString.Create()`只接受字符串。此外，`Html.Raw()`返回一个接口，而 Create 方法返回一个 MvcHtmlString 对象。最后， Create 以不同的方式处理 null。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T10:03:37.800

没有实际区别。

`MvcHtmlString.Create`创建 的实例，[`MvcHtmlString`](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring.aspx)而`Html.Raw`方法创建 的实例[`HtmlString`](http://msdn.microsoft.com/en-us/library/system.web.htmlstring.aspx)，但`MvcHtmlString`只是继承自`HtmlString`，因此它们的工作方式相同。

# objective-c - 获取目标 c 中的启动时间

> ID：10331020
> 
> 赞同：3
> 
> 时间：2012-04-26T09:49:08.037
> 
> 标签：objective-c, ios, boot

如何在目标 c 中获取 ios 的启动时间？

有没有办法得到它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T10:37:04.063

不知道这是否适用于 iOS，但在 OS X（本质上是相同的操作系统）中，您将使用[sysctl()](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/sysctl.3.html#//apple_ref/doc/man/3/sysctl)。这就是 OS X Unix 实用程序的`uptime`工作方式。 [源代码](http://www.opensource.apple.com/source/shell_cmds/shell_cmds-149/w/w.c?txt)可用 - 搜索“boottime”。

```
#include <sys/types.h>
#include <sys/sysctl.h>  

// ....  

#define MIB_SIZE 2  

int mib[MIB_SIZE];
size_t size;
struct timeval  boottime;

mib[0] = CTL_KERN;
mib[1] = KERN_BOOTTIME;
size = sizeof(boottime);
if (sysctl(mib, MIB_SIZE, &boottime, &size, NULL, 0) != -1)
{
    // successful call
    NSDate* bootDate = [NSDate dateWithTimeIntervalSince1970:boottime.tv_sec];
} 
```

iOS沙盒环境中编程的受限性质可能会使其无法工作，我不知道，我没有尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-13T20:02:43.230

我接受了 JeremyP 的回答，给出了完整的微秒精度的结果，澄清了局部变量的名称，改进了顺序，并将其放入一个方法中：

```
#include <sys/types.h>
#include <sys/sysctl.h>  

// ....  

+ (nullable NSDate *)bootDate
{
    // nameIntArray and nameIntArrayLen
    int nameIntArrayLen = 2;
    int nameIntArray[nameIntArrayLen];
    nameIntArray[0] = CTL_KERN;
    nameIntArray[1] = KERN_BOOTTIME;

    // boot_timeval
    struct timeval boot_timeval;
    size_t boot_timeval_size = sizeof(boot_timeval);
    if (sysctl(nameIntArray, nameIntArrayLen, &boot_timeval, &boot_timeval_size, NULL, 0) == -1)
    {
        return nil;
    }

    // bootSince1970TimeInterval
    NSTimeInterval bootSince1970TimeInterval = (NSTimeInterval)boot_timeval.tv_sec + ((NSTimeInterval)boot_timeval.tv_usec / 1000000);

    // return
    return [NSDate dateWithTimeIntervalSince1970:bootSince1970TimeInterval];
} 
```

# html - 导航 li 文本延伸到 li 之外而不是做第二行？

> ID：10331023
> 
> 赞同：0
> 
> 时间：2012-04-26T09:49:13.300
> 
> 标签：html, css, drop-down-menu

我创建的下拉导航使 li 中的文本超出 li 边界，而不是第二行。

我怎样才能使 li 文本下降到下一行？

![这是li扩展文字的图片，安纳普尔纳大本营跋涉文字](../Images/b3d0bb9f6c4cf9504a9c630ae9cca4bb.png)

这是我的代码

```
#navigationSecond ul li ul{
visibility:hidden;
position:absolute;
width:182px;
list-style:none;
top:38px !important;
height:auto;
border-top:2px #FFF solid;
background:#FFF; 
```

}

# 导航秒 ul li ul li{

```
float:none;

border-radius:6px;
padding:10px 0px 10px 0px;
border:#FFF 1px solid;
margin:0 !important;
height:auto; 
```

}

# 导航秒 ul li ul li a{

```
display:block;
padding:0px 0px 0px 20px;

color:#000;
font-weight:bold;
font-size:13px;
text-shadow:#FFF 0px 1px 0px;
text-decoration:none;
overflow:auto;
height:auto; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:18:30.493

如果您不希望文本超出 li 并且 li 宽度是固定的，则表示为 li 设置宽度并将其保留在内部。

```
#navigationSecond ul li{width:120px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:55:36.903

可 `word-wrap: break-word;`用于文本显示在下一行。检查此链接[http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap](http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:04:49.353

请为`li`标签设置适当的宽度。

# java - 如何在 JAR 文件中搜索字符串

> ID：10331025
> 
> 赞同：67
> 
> 时间：2012-04-26T09:49:20.563
> 
> 标签：java, jar

我的应用程序是基于 Java EE 构建的。

我在这个应用程序中有大约 50 个罐子。

是否可以搜索特定关键字（实际上我想搜索关键字`BEGIN REQUEST`）？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-04-26T09:57:04.577

您可以在 Linux 或 OSX 上使用 zipgrep：

```
zipgrep "BEGIN REQUEST" file.jar 
```

如果您想搜索多个罐子，请执行

```
find libdir -name "*.jar" -exec zipgrep "BEGIN REQUEST" '{}' \; 
```

where`libdir`是一个包含所有 jar 的目录。该命令也将递归搜索子目录。

对于windows，可以下载cygwin并在其下安装zipgrep：[http ://www.cygwin.com/](http://www.cygwin.com/)

**编辑 1**

要查看找到表达式的文件的名称，您可以这样做，

```
find libdir -name "*.jar" | xargs -I{} sh -c 'echo searching in "{}"; zipgrep "BEGIN REQUEST" {}' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-09T19:03:02.020

**注意：**这不是一个准确的答案，它只是一种快速的启发式方法。如果您需要查找类的名称（例如，哪个 jar 具有类 Foo？）或者方法名称，那么这可能会起作用。

```
grep --text 'your string' your.jar 
```

这将像搜索文本一样搜索 jar 文件。这更快，因为它不会扩展存档，但这也是它不太准确的原因。如果您需要详尽无遗，那么这不是您应该使用的方法，但是如果您想在退出之前更快地尝试一些东西，`zipgrep`这是一个好方法。

* * *

从`man grep`,

> ```
>  -a, --text
>           Process  a binary file as if it were text; this is equivalent
>           to the --binary-files=text option. 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-08T09:51:36.557

在 android 中，我必须在 jar 和 aar 文件中搜索我正在寻找的某个字符串，这是我在 mac 上的实现：

```
find . -name "*.jar" -o -name "*.aar" | xargs -I{} zipgrep "AssestManager" {} 
```

本质上是在当前目录中查找所有 jars 和 aar 文件（并且 find 命令默认是递归的）将结果通过管道传递给 zipgrep 并通过 xargs 将每个文件名作为参数应用。最后的括号告诉 xargs 将您从 find 命令获得的文件名放在哪里。如果要搜索整个主目录，只需更改 find 。寻找~

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-12T20:05:20.610

打印找到搜索字符串的文件名的单线解决方案，它不会用不必要的“搜索”日志堵塞您的控制台：

```
find libdir -wholename "*.jar" | xargs --replace={} bash -c 'zipgrep "BEGIN REQUEST" {} &>/dev/null; [ $? -eq 0 ] && echo "{}";' 
```

编辑:: 删除不必要的 if 语句，并使用 -name 而不是 -wholename （实际上，我使用了 Wholename，但这取决于您的场景和偏好）::

```
find libdir -name "*.jar" | xargs --replace={} bash -c 'zipgrep "BEGIN REQUEST" {} &>/dev/null && echo "{}";' 
```

您也可以使用 sh 代替 bash。最后一件事，--replace={} 相当于 -I{} （我通常使用长选项格式，以避免以后再次进入手册）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-05T10:32:09.400

使用 WinRar 搜索，在 jar 中搜索或查找包含特定文本的类名非常容易。它高效且至少对我有用。

只需在 WinRar 中打开任何 jar，单击“..”，直到到达要开始搜索的顶部文件夹（包括子文件夹）。

确保检查以下选项：

1.) 在“要查找的文件名”、“存档类型”字段中提供“*”

2.) 选中“在子文件夹中查找”、“在文件中查找”、“在档案中查找”复选框。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-01T12:18:40.503

[Fastjar](http://fastjar.sourceforge.net/) - 很旧，但适合您的需求。Fastjar 包含名为 jargrep（或 grepjar）的工具。使用方式与 grep 相同：

```
>  locate .jar | grep hibernate | xargs grepjar -n 'objectToSQLString'

org/hibernate/type/EnumType.class:646:objectToSQLString
org/hibernate/sql/Update.class:576:objectToSQLString
org/hibernate/sql/Insert.class:410:objectToSQLString
org/hibernate/usertype/EnhancedUserType.class:22:objectToSQLString
org/hibernate/persister/entity/SingleTableEntityPersister.class:2713:objectToSQLString
org/hibernate/hql/classic/WhereParser.class:1910:objectToSQLString
org/hibernate/hql/ast/tree/JavaConstantNode.class:344:objectToSQLString
org/hibernate/hql/ast/tree/BooleanLiteralNode.class:240:objectToSQLString
org/hibernate/hql/ast/util/LiteralProcessor.class:1363:objectToSQLString
org/hibernate/type/BigIntegerType.class:114:objectToSQLString
org/hibernate/type/ShortType.class:189:objectToSQLString
org/hibernate/type/TimeType.class:307:objectToSQLString
org/hibernate/type/CharacterType.class:210:objectToSQLString
org/hibernate/type/BooleanType.class:180:objectToSQLString
org/hibernate/type/StringType.class:166:objectToSQLString
org/hibernate/type/NumericBooleanType.class:128:objectToSQLString
org/hibernate/type/CustomType.class:543:objectToSQLString
org/hibernate/type/TimeZoneType.class:204:objectToSQLString
org/hibernate/type/DateType.class:343:objectToSQLString
org/hibernate/type/LiteralType.class:18:objectToSQLString
org/hibernate/type/ByteType.class:189:objectToSQLString
org/hibernate/type/LocaleType.class:259:objectToSQLString
org/hibernate/type/CharBooleanType.class:171:objectToSQLString
org/hibernate/type/TimestampType.class:409:objectToSQLString
org/hibernate/type/CurrencyType.class:256:objectToSQLString
org/hibernate/type/AbstractCharArrayType.class:219:objectToSQLString
org/hibernate/type/FloatType.class:177:objectToSQLString
org/hibernate/type/DoubleType.class:173:objectToSQLString
org/hibernate/type/LongType.class:223:objectToSQLString
org/hibernate/type/IntegerType.class:188:objectToSQLString 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T00:57:19.547

下面的命令显示了带有文件名和 jar 文件名的结果。

1.  在 jar 文件列表中查找字符串。

    ```
    find <%PATH of the Folder where you need to search%> -name "*.jar" -print -exec zipgrep "jar$|<%STRING THAT YOU NEED TO FIND>" '{}' \; 
    ```

2.  在 jar 文件列表中查找类名。

    ```
    find . -name "*.jar" -print -exec jar tvf {} \; |grep -E "jar$|<%CLASS NAME THAT YOU NEED TO FIND>\.class" 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-20T10:25:12.103

虽然有使用反编译器或 eclipse 的方法，但是当这些 jar 不属于您的项目时会变得很棘手，或者在使用反编译器并且您在多个文件夹中放置了 100 或 1000 个 jar 时会特别痛苦。

我发现[这个](https://www.windows-commandline.com/search-classes-in-jar-file/)CMD 命令很有用，它有助于在目录中的 jar 列表中查找类名。

```
forfiles /S /M *.jar /C "cmd /c jar -tvf @file | findstr "classname" && echo @path 
```

您可以导航到您想要的路径，然后从那里打开 cmd 并运行此命令，或者直接在命令本身中提供路径，如下所示

```
forfiles /S /M *.jar /C "cmd /c jar -tvf @file | findstr /C:"classname" && echo @path 
```

我的用例是在 Glassfish 中找到一个特定的类，所以命令看起来像这样：

[![在此处输入图像描述](../Images/6eb652470de3a40adb33de3e94d18d1c.png)](https://i.stack.imgur.com/7f3Yb.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-09T13:02:37.823

在 alvinalexander.com 上找到以下脚本。搜索当前目录中的所有 jar 文件很简单但很有用

```
#!/bin/sh

LOOK_FOR="codehaus/xfire/spring"

for i in `find . -name "*jar"`
do
  echo "Looking in $i ..."
  jar tvf $i | grep $LOOK_FOR > /dev/null
  if [ $? == 0 ]
  then
    echo "==> Found \"$LOOK_FOR\" in $i"
  fi
done 
```

将“codehaus...”替换为您的查询，即类名。

样本输出：

```
$ ./searchjars.sh

Looking in ./activation-1.1.jar ...
Looking in ./commons-beanutils-1.7.0.jar ...
Looking in ./commons-codec-1.3.jar ...
Looking in ./commons-pool.jar ...
Looking in ./jaxen-1.1-beta-9.jar ...
Looking in ./jdom-1.0.jar ...
Looking in ./mail-1.4.jar ...
Looking in ./xbean-2.2.0.jar ...
Looking in ./xbean-spring-2.8.jar ...
Looking in ./xfire-aegis-1.2.6.jar ...
Looking in ./xfire-annotations-1.2.6.jar ...
Looking in ./xfire-core-1.2.6.jar ...
Looking in ./xfire-java5-1.2.6.jar ...
Looking in ./xfire-jaxws-1.2.6.jar ...
Looking in ./xfire-jsr181-api-1.0-M1.jar ...
Looking in ./xfire-spring-1.2.6.jar ...
==> Found "codehaus/xfire/spring" in ./xfire-spring-1.2.6.jar
Looking in ./XmlSchema-1.1.jar ... 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-01T09:45:57.970

使用 jfind jar

> JFind 可以在文件系统的任何位置找到 Java 类文件，即使它隐藏在 zip 中的耳朵内的罐子深处的许多层级！

[http://jfind.sourceforge.net/](http://jfind.sourceforge.net/)

# visual-c++ - Outlook 功能区自定义

> ID：10331029
> 
> 赞同：1
> 
> 时间：2012-04-26T09:49:34.610
> 
> 标签：visual-c++, outlook, ribbon, outlook-addin, outlook-2010

我在 Visual Studio 中使用 vc++ 时在 Outlook 功能区中添加了一个选项卡。但是在 Outlook 2010 中打开特定邮件时我需要隐藏该选项卡。我已经为相同的 ![第一的](../Images/38d19f266203675181144c405d3a4e02.png) 第一个图像显示附加了快照：我添加了自定义选项卡，它是当我打开 Outlook 时正确加载。 ![第二](../Images/7154671c39fc1017966df787607639fd.png) 现在达到要求.. 第二张图片显示：当我在 Outlook 中打开特定邮件时，我必须从那里隐藏自定义选项卡，并且我必须在 Outlook 中的更多选项下方添加相同的选项

添加或删除什么 xml 以使其工作

帮助正在进行的工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:47:40.960

您需要`getVisible`在功能区 UI 中处理选项卡事件。

```
<ribbon>
    <tabs>
        <tab id="MyTab" getVisible="MyTab_GetVisible" label="MyTab">
            <group label="MyGroup" id="MyGroup" >
                <button id="MyButton" size="large" label="MyButton" imageMso="HappyFace" onAction="OnMyButtonClick"/>
            </group>
        </tab>
    </tabs>
</ribbon> 
```

要切换选项卡可见性，您需要`MyTab_GetVisible`根据需要实施。请参阅[MSDN 上的 SampleAddin 以供参考](http://msdn.microsoft.com/en-us/library/ee692172.aspx#OfficeOLExtendingUI_SampleAddin)。

```
// Only show MyTab when inspector is a read note.
public bool MyTab_GetVisible(Office.IRibbonControl control)
{
    if (control.Context is Outlook.Inspector)
    {
        Outlook.Inspector oInsp = control.Context as Outlook.Inspector;
        if (oInsp.CurrentItem is Outlook.MailItem)
        {
            Outlook.MailItem oMail = oInsp.CurrentItem as Outlook.MailItem;
            return oMail.Sent;
        }
        else
            return false;
    }
    else
        return true;
} 
```

# c# - 无法读取隐藏字段

> ID：10331035
> 
> 赞同：2
> 
> 时间：2012-04-26T09:50:02.077
> 
> 标签：c#, asp.net, html

在部分页面（菜单）中，我有这个：

```
@foreach (var category in db.Query("SELECT categoryName FROM Category")) {
    <li><a href="#">@category.categoryName</a>
        <ul class="submenu">
            <form action="/Products/?@Request.QueryString" method="post">
                <input type="hidden">
                    @Html.Hidden("cat", category.categoryName)
                </input>
            </form>
        </ul>
    </li>
} 
```

在我重定向到的页面中，我有这个：

```
if (IsPost) {
    if (Request["cat"] != null) {
        <p>The category is @Request["cat"]!</p>
    }
} 
```

它重定向很好，但我无法将“cat”变量传递给我重定向到的页面。通常，当我成功使用重定向时，我使用输入类型 =“提交”。这里的区别在于这些是超链接，这无疑是原因。我宁愿保留超链接。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:46:31.930

为了在表单标签中提交值，您必须提交表单。您没有任何代码来提交表单。

提交表单通常通过`input type="submit"`您提到的方式实现，但其他技术也是可能的（例如使用 JavaScript 提交表单）。

在您的情况下，我想知道您是否真的必须执行`POST`.

那么这种方法呢？

```
@foreach (var category in db.Query("SELECT categoryName FROM Category")) {
    <li>
        <a href="/Products/?@Request.QueryString&cat=@category.categoryName">
            @category.categoryName
        </a>
    </li>
} 
```

# c# - 为用户控件使用带有类型参数的基类

> ID：10331036
> 
> 赞同：0
> 
> 时间：2012-04-26T09:50:02.200
> 
> 标签：c#, winforms, type-parameter

我有一个用户控件，它似乎不喜欢我使用带有类型参数的基类。有什么办法解决这个/我错过了什么吗？

```
public partial class PopupSelector : PopupSelectionControl3<int>
{
    public PopupSelector()
    {
        InitializeComponent();
    }
}

... Plus the designer code ...

public class PopupSelectionControl3<TValue> : XtraUserControl
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:02:13.013

WinForms 设计器不能很好地处理通用用户控件。

bernhardrusch[在这里提供了一个解决方法](https://stackoverflow.com/questions/677609/generic-base-class-for-winform-usercontrol "也可以看看")

```
public partial class UserControl : UserControlDesignable  {  ... } 

public class UserControlDesignable : BaseUserControl<Someclass> { } 
```

可以在[此处找到有关解决方法的更多详细信息](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/afdfce40-8d7a-4300-bd8d-26e18c320a71)

# c# - 如何访问表中多个 tbody 的行？

> ID：10331039
> 
> 赞同：1
> 
> 时间：2012-04-26T09:50:16.200
> 
> 标签：c#, asp.net, html-table, row, cells

我有这样的事情：

```
<table id="tableId" runat="server">
<thead>
    <tr>
        <th>Example thead1</th>
        <th>Example thead2</th>
   </tr>
</thead>
<tbody id="tb0">
    <tr>
        <td>Example 1</td>
        <td>Something</td>
   </tr>
</tbody>
<tbody id="tb1">
    <tr>
         <td>Example 2</td>
         <td>Something</td></tr>
</tbody>
<tbody id="tb2">
    <tr>
        <td>Example 3</td>
        <td>Something</td>
   </tr>
</tbody>
</table> 
```

我使用多个具有不同 ID 的“tbody”，因此我可以随时删除或创建它。

**我想做的是从表“tableId”中的多个“tbody”中获取每一行。**

在 C# 中，如果我使用命令“ **tableId.Rows[0].Cells[0].InnerHtml** ”，我会得到结果：“ **Example thead1** ”。

但是，如果我使用“ **tableId.Rows[3].Cells[0].InnerHtml** ”，我无法在表格行中获得“示例 3”，而不是它，我得到一个错误，指出该行没有存在或超出索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:52:07.550

使 tbody 元素成为服务器控件。

```
<tbody id="tb2" runat="server">
    <tr>
        <td>Example 3</td>
        <td>Something</td>
   </tr>
</tbody> 
```

然后根据需要切换可见性：

```
tb2.Visible = true / false; 
```

根据评论：

设计者可能不会创建对`tb1, tb2, tb3`控件的引用，因为它们是`tableId`. 如果是这样：

```
var tb2 = tableId.FindControl("tb2");
tb2.Visible = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:23:57.720

我已经测试了你的代码。并发现**tableId.Rows[3].Cells[0].InnerHtml**将始终给出**示例 3** ..根据您的 aspx 标记代码，这是正确的。

我认为您的位置行索引不正确，即如下所示

**表结构中不存在的**tableId.Rows[4].Cells[0].InnerHtml 。****

 **这就是为什么你得到**指定参数的错误超出了有效值的范围。参数名称：索引**

希望这会帮助你......快乐的编码......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T10:02:00.783

你可以使用 JQuery，类似这样的东西....

```
$('tbody', '#tableid'); 
```

但我想这取决于你想用它们做什么，以及在哪里

jQuery 文档：

选择器： http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

遍历：[http ://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)**

# jakarta-ee - RestEasy @EJB 返回 null

> ID：10331041
> 
> 赞同：4
> 
> 时间：2012-04-26T09:50:26.950
> 
> 标签：jakarta-ee, resteasy, jboss7.x, ejb-3.1

我有一个用 RestEasy 实现的 jax-rs 服务，我正在使用 Jboss as7 并用 @Signleton 注释实现了一个signleton ejb。当服务器启动（@startup）时会启动signleton，我想将它注入到使用@EJB的jax-rs中。问题是这个类总是空的，我开始迷路了，因为在我看过的每个教程中，这就是他们注入 ejb 的方式。我应该使用任何特殊的 xml 文件吗？我究竟做错了什么？

```
@Path("/")
public class Service extends Application{
@EJB
private GlobalStore store;
public Service(){
fromejbstore = store.getSentiment();//null pointer is thrown
}
} 
```

Signleton ejb 是：

```
@Singleton
@Startup
public class GlobalStore {
 Sentiment sentiment;
 @PostConstruct
public void initialize() {
 //do something
}
public Sentiment getSentiment(){return sentiment;}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T13:58:14.820

我已将代码更改为如下所示并避免注入：

```
 `try{
        InitialContext ctx=new InitialContext();
        localRef = (myEjb) ctx.lookup("java:global/appName/EjbName");
       }catch(NamingException ne){
            System.out.println("\n[MyRestService]NamingException: "+ne);
            ne.printStackTrace();
       }` 
```

找不到@EJB 注释不起作用的原因，可能这与RestEasy 有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T11:58:30.303

AFAIK，@EJB 注释注入不适用于 POJO - 尝试将您的 Service 类转换为无状态会话 bean（通过在类级别添加 @Stateless 注释）并且 GlobalStore 注入应该像魅力一样工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T11:18:49.420

当我从 Rest 服务调用 EJB 时，我遇到了同样的问题。当我注入@EJB 时我得到了空值。当我尝试在服务类中添加@Stateless 时没有问题。我认为您可以在 Service 类中添加 @Stateless 。那么就没有问题了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:41:34.317

我认为您以错误的方式激活您的 JAX-RS。一个扩展`Application`和注释的类`@ApplicationPath`是 Java EE 6“无 XML”方法来激活 JAX-RS。

```
@ApplicationPath("/rest")
public class JaxRsActivator extends Application {
 /* class body intentionally left blank */
} 
```

那么你`Service`应该在同一个包中，`JaxRsActivator`但不需要扩展`Application`：

```
@Path("/test")
public class Service
{
  @EJB private GlobalStore store;

  @GET @Path("/test")
  public String getTime()
  {
   boolean test = (store==null);
   return "Test: "+test;
  }
} 
```

您可以使用浏览器对其进行测试`http://<host>/<context>/rest/test/test`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-20T19:04:22.300

上面提供的答案是正确的。将@Stateless 添加到服务，添加服务实现的@Local 注释接口，然后在类中通过将@EJB 添加到该接口的引用来访问该无状态bean。我在 Websphere Liberty Profile 上可能需要做的唯一另一件事是在 WEB-INF 目录中创建 beans.xml 文件以停止该 cdi bean 上的 NPE。

```
@Stateless
public class ServiceImpl implements Service {
    public void doSomething() {
        System.out.println("I did something");
    }

    @PostConstruct
    public void postConstruct() {
        System.out.println("I was just constructed");
    }

    @PreDestroy
    public void preDestroy() {
        System.out.println("Arrgg I am being destroyed");
    }
}

@Local
public interface Service {
    public void doSomething();
}

public class Client {

    @EBJ Service service;

    public void someMethod() {
        service.doSomething();
    }
} 
```

../WEB-INF/beans.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
  http://java.sun.com/xml/ns/javaee 
  http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

您可以在 bean 上添加 post 构造和 pre destroy 注释方法，以查看它在应用程序启动和关闭时被创建和销毁。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-09-03T15:12:02.933

在 web-inf 中添加 beans.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

并更改类扩展应用程序：

```
import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;

import java.util.HashSet;
import java.util.Set;

@ApplicationPath("/rest")

public class YourApplication extends Application
{
   HashSet<Object> singletons = new HashSet<Object>();

   public YourApplication()
   {
      getClasses().add(yourOwnClass.class);
   }

   @Override
   public Set<Class<?>> getClasses()
   {
      HashSet<Class<?>> set = new HashSet<Class<?>>();
      return set;
   }

    enter code here

   @Override
   public Set<Object> getSingletons()
   {
      return singletons;  
   }
} 
```

# maven - 为什么我的测试会泄漏文件描述符？

> ID：10331044
> 
> 赞同：1
> 
> 时间：2012-04-26T09:50:47.060
> 
> 标签：maven, selenium, junit, jenkins, surefire

我正在使用 JUnit 和 Selenium2 来测试我的应用程序。我使用 Maven 和在 Jenkins 中运行的 surefire 插件执行测试。几周后测试很好，我添加了越来越多的测试，现在测试失败并显示以下消息：

```
Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.11:test (default-test) on project guitest: Failure or timeout
...
Process leaked file descriptors 
```

我首先以为我只是在我的代码中打开文件，例如使用 WebDriver（和 apache commons IO 复制它们）截屏时：

```
File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
File destFile = new File(...);
FileUtils.copyFile(scrFile, destFile); 
```

但是即使删除了屏幕截图记录，问题仍然存在。

你们有什么指示这里有什么问题和/或如何解决这个问题吗？

**编辑：**

我已经实现了一个 WebdriverPool，以重用 WebDrivers / 浏览器实例。测试完成后，我使用关闭挂钩关闭所有打开的实例：

```
Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override
    public void run(){
        for (WebDriver driver : drivers.values())
            driver.close();

        if (!driversInUse.isEmpty())
            throw new IllegalStateException("There are still drivers in use (" + driversInUse.size() + ")");
    }
}); 
```

这可能是问题吗？

# javascript - jQuery循环播放动画

> ID：10331045
> 
> 赞同：0
> 
> 时间：2012-04-26T09:50:56.357
> 
> 标签：javascript, jquery

[我有一架直升机在这个网站](http://www.koodoocreative.co.uk/~stagesca)的屏幕上平移，它目前从左到右。但 30 秒后，我希望它改变方向。然后在 30 秒后再次改变方向。真的是一个循环

*   左>右
*   右 > 左

在一个循环中。

我正在使用[jQuery Spritely](http://spritely.net/)为直升机制作动画。

我当前的 jQuery 设置如下：

```
$(document).ready(function()
{       
/* Initial Helicopter Movement */
 $('#helicopter').pan({fps: 30, speed: 1.5, depth: 10, dir: 'right'});
 $('#helicopter').spState(1);

 setInterval(function() {
   $("#helicopter").spStop();
   $('#helicopter').pan({fps: 30, speed: 1.5, dir: 'left'});
   $('#helicopter').spState(2);
   $("#helicopter").spStart();
 }, 5000 ); 
}; 
```

我将如何实现我的循环？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:58:34.303

有一个变量跟踪您当前的方向，并在每次触发该功能时在您的时间间隔内更改它。

```
$(function() {

 var dir = 'right';

 /* Initial Helicopter Movement */
 $('#helicopter').pan({fps: 30, speed: 1.5, depth: 10, dir: dir});
 $('#helicopter').spState(1);

 setInterval(function() {

   if (dir == 'left') dir = 'right';
   else dir = 'left';

   $("#helicopter").spStop();
   $('#helicopter').pan({fps: 30, speed: 1.5, dir: dir});
   $('#helicopter').spState(2);
   $("#helicopter").spStart();
 }, 30000 ); 
}); 
```

但是你可以稍微优化你的代码，因为 fps 和速度总是一样的

```
var props = {
  fps:30,
  speed:1.5,
  depth:10,
  dir:'right'
};

$(function() {

 /* Initial Helicopter Movement */
 $('#helicopter').pan(props);
 $('#helicopter').spState(1);

 setInterval(function() {

   if (props.dir == 'left') props.dir = 'right';
   else props.dir = 'left';

   $("#helicopter").spStop();
   $('#helicopter').pan(props);
   $('#helicopter').spState(2);
   $("#helicopter").spStart();
 }, 30000 ); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:11:31.517

将 setInterval 函数内的代码块更改为：

```
setInterval(function() {
    if (props.dir == 'left') {
    props.dir = 'right';
    $("#helicopter").spState(1).spChangeDir('right');
}
    else { 
        props.dir = 'left';
    $("#helicopter").spState(2).spChangeDir('left');
    }
}, 5000 ); 
```

在这里，您只是`props.dir`每 5 秒检查一次值并交替方向。`Spritely JS`具有内置`spChangeDir()`方法，不需要在每个间隔后设置和重置属性。

# silverlight-4.0 - 在 Devexpress DXGrid(Silverlight) 中使组行内容加粗

> ID：10331046
> 
> 赞同：1
> 
> 时间：2012-04-26T09:50:56.683
> 
> 标签：silverlight-4.0, devexpress

我在做 silveriight 4 应用程序。

我在下面启用了分组的​​ devexpress 网格（v11）。

```
<dxg:GridControl x:Name="grid_labinvestigation" AutoExpandAllGroups="True"  CustomColumnDisplayText="grid_labinvestigation_CustomColumnDisplayText" >
       <dxg:GridControl.Columns>
       <dxg:GridColumn FieldName="LabTest" Header="Tests"  MinWidth="150"  />
        <dxg:GridColumn FieldName="LabTestCategory" Header="Test Category" GroupIndex="0" />
        <dxg:GridColumn FieldName="Selected_"  Header="Select" MinWidth="50"/>
        <dxg:GridColumn FieldName="LabTest_UID" Visible="False" />
         </dxg:GridControl.Columns>
        <dxg:GridControl.View>
         <dxg:TableView Name="grid_labinvestigation_view"  ShowGroupPanel="False"  />
         </dxg:GridControl.View>
         </dxg:GridControl> 
```

我想让分组列的内容**加粗**

怎么做到呢？？

# android - Android和访问数据库

> ID：10331049
> 
> 赞同：0
> 
> 时间：2012-04-26T09:51:12.853
> 
> 标签：android, sql

我有一个关于访问数据库的问题。我有一个数据库，但在我的设备上的数据中看不到这个数据库。在数据模拟器上，我可以看到这个数据库，但在设备数据文件夹上是空的。我需要这样做，因为当我想用模拟器在 DDMS 透视图中查看数据库时，我的 Eclipse 卡住了，我必须重新启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:00:58.147

Android 不提供对其`data`在设备中的应用程序文件夹的访问。您可以[root您的设备](http://www.tomsguide.com/us/Root-Your-Android-Phone,review-1688.html)（这实际上意味着您让每个人都可以访问您设备中的所有文件），或者您可以将数据库移动到sdcard（如果这是一个可能的选项）。您可以从 adb 访问 sdcard 中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:00:33.240

您可以从终端（在 android 工具文件夹或平台文件夹中）使用 ADB 访问数据库。除非您根设备，否则您无法访问设备中的数据库。那就是限制应用程序数据被打开。（其他应用程序的数据）。

# jquery - Jquery 中的日期时间选择器

> ID：10331052
> 
> 赞同：0
> 
> 时间：2012-04-26T09:51:24.827
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在尝试使用以下代码来使用日期时间选择器，并且我希望日期格式为**dd/MM/yyyy**

```
$(".datepick").datepicker({
            dateFormat:'dd-MM-yyyy'               
        }); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:57:23.263

全年是**yy**不是**yyyy**

所以使用

```
$(".datepick").datepicker({
    dateFormat:'dd-MM-yy'               
}); 
```

[您可以在http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)查看可用的日期格式

演示在[http://jsfiddle.net/gaby/MhQaf/](http://jsfiddle.net/gaby/MhQaf/)

# automated-tests - 在 Funkload 基准测试中识别失败原因

> ID：10331057
> 
> 赞同：0
> 
> 时间：2012-04-26T09:51:50.593
> 
> 标签：automated-tests, funkload

有没有办法获得有关 Funkload 测试在基准测试期间如何失败的更多详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:39:11.743

我发现的唯一方法是读取生成的 xml 并在那里记录实际的异常文本。

# sql - 当另一台服务器上的作业完成时，如何启动作业或进程？

> ID：10331058
> 
> 赞同：2
> 
> 时间：2012-04-26T09:51:50.927
> 
> 标签：sql, sql-server-2008, windows-services, etl

我想在另一台服务器上的作业成功完成后立即在我的服务器上发送邮件或自动启动作业。我可以访问另一台服务器并且可以查看作业状态，但我无法更改正在运行 SSIS 包的作业本身。

基本上，我想在源停止自我刷新后立即开始刷新我的数据库（通过通过作业运行 ETL）。我很想在这个 Windows 服务实现旁边提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:01:07.493

我冒昧地编辑了问题和标题以使其更加明确。我从您的描述中了解到，当服务器 B 上的作业成功完成时，您希望在服务器 A 上运行作业（或启动其他进程）。您无法更改服务器 B 上的作业定义，但您可以登录到它并查看作业历史记录。

如果您无法更改服务器 B 上的作业或其他任何内容，则意味着它无法在作业完成时通知服务器 A。因此，您需要从服务器 A 查询服务器 B，使用 Windows 服务或可能每隔几分钟（或几小时，或任何合适的）运行的简单脚本。

[您可以使用 SMO Job](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.agent.job.aspx)类从 .NET 或 PowerShell或使用[sp_help_job](http://msdn.microsoft.com/en-us/library/ms186722.aspx)过程从 TSQL 查询作业的状态。其中哪个是更好的解决方案取决于您希望如何实现轮询机制。

# audio - Sox 混合延迟

> ID：10331059
> 
> 赞同：1
> 
> 时间：2012-04-26T09:51:52.940
> 
> 标签：audio, delay, wav, mixing, sox

我有延迟混合声音的问题。

我运行这个

`sox -M f1.wav f1.wav f1.wav f1.wav out.wav delay 3 3 4 4 5 5`

在声音的最终文件音量正在改变（减少）。我怎样才能避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T17:27:17.217

您还可以使用 -v 控制每个信号的音量。你没有要求这个，但我的经验是，在某些时候你可能会使用它。我花了一段时间才在网上找到这个选项。

```
sox -m -v 1 file1.wav -v 0.5 file2.wav out.wav 
```

希望有人觉得这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:33:50.893

虽然`man sox`没有描述合并（-M）的自动衰减，但这让我感到惊讶。以下适用于“混合”模式 (-m)

> 与其他方法不同，如果不执行平衡，“混合”组合有可能导致组合器中的削波。所以在这里，如果没有给出手动音量调整，为了确保不会发生削波，SoX 会自动将每个输入信号的音量（幅度）调整为 ¹/ n 倍，其中 n 是输入文件的数量。如果这导致音频太安静或不平衡，则可以如上所述手动设置输入文件音量；对混音使用规范效应是另一种选择。

因此，即使手册明确排除了“混合”以外的所有模式，我当然会尝试“标准”效果或以其他方式指定音量调整，因为我看不出如何在不衰减的情况下合并信号同时避免削波。

# actionscript-3 - 用身体在空中发送短信

> ID：10331061
> 
> 赞同：0
> 
> 时间：2012-04-26T09:52:00.070
> 
> 标签：actionscript-3, air, sms

我正在寻找如何在空中发送短信。我在谷歌搜索时发现了这段代码：

```
var callURL:String="sms:0-123-456-7890";
var targetURL:URLRequest = new URLRequest(callURL);
navigateToURL(targetURL); 
```

它的工作，但如何添加正文文本，它可以用来向多个号码发送短信？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:24:09.907

这是使用 URI 方案的标准的链接[https://www.rfc-editor.org/rfc/rfc5724#section-2.2](https://www.rfc-editor.org/rfc/rfc5724#section-2.2)。

但不幸的是，似乎没有办法实现这一点，因为 iOS 和 Android 都不完全支持此功能。

这是Android ussue的链接[http://code.google.com/p/android/issues/detail?id=12142](http://code.google.com/p/android/issues/detail?id=12142) 这里是关于iOS [sms url scheme在IOS5上不起作用的答案](https://stackoverflow.com/questions/8414986/sms-url-scheme-not-working-on-ios5)

# android - 如何在android中清除画布

> ID：10331062
> 
> 赞同：0
> 
> 时间：2012-04-26T09:52:03.640
> 
> 标签：android, pdf, canvas, annotations

在画布上尝试了复合操作和**注释 pdf**之后，我现在尝试在新页面调用时删除注释。

我该怎么做呢？

**我需要清除画布以获取新注释；**

这可能会持续一段时间，所以我不认为每次都注释一个新矩形将是最有效的选择，即使每次调用任何页面时都会呈现 PDF ......

那么如何清除注释以显示清晰的新页面…………

我也使用过 PorterDuff.Mode.clear 这在我的情况下也不起作用.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:53:33.143

打电话

```
 Canvas.drawColor(Color.BLACK) 
```

# ruby-on-rails - 使用 Thinking Sphinx 进行具有多个索引的全局搜索

> ID：10331066
> 
> 赞同：2
> 
> 时间：2012-04-26T09:52:28.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sphinx, thinking-sphinx

我不想对一组类进行全局搜索，但我想指定它应该使用的索引数组，这可能吗？我已经用谷歌搜索并尝试了不同的解决方案，但还没有运气。

这可以正常工作（尽管对于一个索引）。

```
ThinkingSphinx.search "query", :classes => [Foo, Bar], :index => "my_foo_index" 
```

这会引发错误：

```
ThinkingSphinx.search "query", :classes => [Foo, Bar], :index => "my_foo_index,my_bar_index"
> ThinkingSphinx::SphinxError: distributed index 'my_foo_index' in multi-index query found 
```

这样做：

```
ThinkingSphinx.search "query", :classes => [Foo, Bar], :index => ["my_foo_index", "my_bar_index"]
> NoMethodError: undefined method `force_encoding' for ["my_foo_index", "my_bar_index"]:Array 
```

我还尝试将模型索引命名为相同的名称，例如 Foo 模型和 Bar 模型上的“my_index”，但是在重建索引时出现此错误：

```
ERROR: section 'my_index_core_0' (type='source') already exists in /dev/config/development.sphinx.conf line 116 col 1. 
```

我能想出的唯一解决方案是对每个模型进行多次搜索，然后合并结果。不过这有点吹，因为我会在搜索中失去相关性......

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T12:02:28.613

尝试以下操作：

```
ThinkingSphinx.search 'query', :classes => [Foo, Bar],
  :index => 'my_foo_index_core,my_bar_index_core' 
```

如果您有增量，也将`my_foo_index_delta`和添加`my_bar_index_delta`到列表中。这将避免分布式索引。

# unit-testing - 使用在单元测试中需要寄存器类型的 IoC 容器测试工厂方法

> ID：10331070
> 
> 赞同：1
> 
> 时间：2012-04-26T09:52:41.863
> 
> 标签：unit-testing, inversion-of-control, unity-container, ioc-container

**更新**

我想根据它的方法使用来确定是否应该对工厂进行单元测试，因为如果我想测试它，我需要使用 IoC 容器注册类型，在我的案例中使用 Unity。如果我模拟工厂，它实际上并没有测试工厂方法。

下面是一个工厂类，它根据其参数创建类型的实例。

```
public class CarFactory
    {

        public ICar CreateCar(string CarType)
        {
            ICar Car;

            switch (CarType)
            {
                case RepositoryType.Car1:

                    Car = Ioc.ContainerWrapper.Resolve<Car1>();

                    break;
                case RepositoryType.Car2:       
                    Car = Ioc.ContainerWrapper.Resolve<Car2>();

                    break;

                default:

                    Car = Ioc.ContainerWrapper.Resolve<Car3>();

                    break;

            }

            return Car;
        }

    }

      class Car1 
    {

        private readonly IRepository1 _IRepository1;

        public Car1(IRepository1 repository1)
        {
            _IRepository1 = repository1;

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:01:50.763

您必须准备适合此测试的容器（即具有`Risk`可解析的类）。使用您当前的实现，您无能为力。

当然，这引发了关于这是否是单元测试的问题，但我们可以假设统一已经过良好测试并且可以工作（即假设它不会成为*单元测试*的可能失败点）。

这是代码中对 IoC 容器的强烈依赖的自然缺点。有人可能会争辩说你可以用你的自定义抽象包装容器......然后注入它？这感觉不对，我还没有看到有人这样做。

有关相关问题，请参阅[此问题](https://stackoverflow.com/q/10260485/343266)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:03:07.683

你不能像这样测试：

```
[设置]
公共无效设置（）
{
  // 这里的代码设置容器....
}

[测试]
公共无效example_test（）
{
  var factory = new RiskFactory();
  var risk = factory.CreateGoldRisk("xxxx");
  Assert.True（风险为Risk1）；
}

```

在旁注中。你有一个 IOC 容器。然后在工厂包装的容器包装纸。你的架构可能有太多的抽象层..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T16:47:11.110

从我的角度来看，你走在正确的道路上。

工厂的目的是创建一个对象，以便允许他们调用服务定位器（是的，您仍在使用服务定位器反模式，但您正在将其从您的域移动到工厂）

参考：

[https://github.com/ninject/ninject.extensions.factory/wiki](https://github.com/ninject/ninject.extensions.factory/wiki)

回到你原来的问题，我相信你应该测试你的工厂以保证你得到正确的对象，具体取决于所使用的参数，在我看来这是单元测试还是任何类型的集成测试存在争议在这篇 Martin Fowler 文章之后仍然是一个单元测试：

[http://martinfowler.com/articles/mocksArentStubs.html#ClassicalAndMockistTesting](http://martinfowler.com/articles/mocksArentStubs.html#ClassicalAndMockistTesting)

这就是我将如何测试它：

```
IRisk myRisk = new RiskFactory().CreateGoldRisk("Risk1");

myRisk.Should().NotBeNull().And.BeOfType<Risk1>(); 
```

# jquery - 访问多文件上传表单的文件名

> ID：10331075
> 
> 赞同：6
> 
> 时间：2012-04-26T09:52:55.880
> 
> 标签：jquery, file-upload, input

我想读出我的多上传表单的文件名，但是 Javascript 只是添加了第一项。

```
<input name="upload[]" id="upload" type="file" multiple="multiple"> 
```

```
$("#upload").change(function() {
    $("#upload").each(function() {
        $("#upload_prev").append(this.value);
    });
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T10:06:32.660

jQuery 还不能很好地支持多个文件上传字段。您最好的选择是恢复为原生 javascript 以访问该`files`集合。试试这个：

```
$("#upload").change(function() {
    var files = $(this)[0].files;
    for (var i = 0; i < files.length; i++) {
        $("#upload_prev").append(files[i].name);
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/Vs5Hk/2/)

此外，这里有几个问题与您的示例已修复，例如在重新选择并在新行上附加文件名时清除以前的文件列表：http: [//jsfiddle.net/Vs5Hk/3/](http://jsfiddle.net/Vs5Hk/3/)

# java - 如何使用 SimpleXML 框架处理继承？

> ID：10331076
> 
> 赞同：1
> 
> 时间：2012-04-26T09:53:07.470
> 
> 标签：java, android, inheritance, simple-framework

我目前正在使用[SimpleXML](http://simple.sourceforge.net/)框架来解析 XML 文件，并且遇到了一个反复出现的问题。

接收到的 XML 可以是这样的：

```
<root>
   <B>
      ...
   </B>
</root> 
```

或类似的东西：

```
<root>
   <C>
      ...
   </C>
</root> 
```

我希望 B 和 C 扩展另一个类，比如 A。

使用 SimpleXML 的简洁方法是：

```
@Root(name="root")
class Root {

   @Element(name="B", required="false")
   private B b;

   @Element(name="C", required="false")
   private C c;
}

class B extends A {

}

class C extends A {

} 
```

我知道我可以做一些我在 SimpleXML 文档中找到的事情，改变我的 XML 格式：

```
<root>
   <A class="example.B">     // or "example.C"
      ...
   </A>
</root> 
```

然后是我的 Java 类：

```
@Root(name="root")
class Root {

   @Element(name="A")
   private A a;
}

class B extends A {

}

class C extends A {

} 
```

我真的很想使用这个解决方案，但我完全不确定是否要在解析它之前在客户端完成更改 XML 的过程。问题是它不能在服务器端完成，因为我无法控制它。

所以我的问题是：

**这是我唯一的解决方案吗？**

**在这种情况下，你们知道是否有一种快速的解决方案可以在客户端更改我的 xml 文件？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:48:29.597

我不确定如何进行继承，但我找到了使用接口的解决方案（在我的情况下没问题）

诀窍是使用：

```
@Root(name="root")
class Root {

   @ElementUnion({
       @Element(name="B", type=B.class),
       @Element(name="C", type=C.class)
   })
   private A a;
}

interface A {

}

class B implements A {

}

class C implements A {

} 
```

如果我们可以对继承做同样的事情，那就太好了。

更新：继承可以使用`@ElementUnion`. 尽管文档中没有指定，但这也有效：

```
@Root(name="root")
class Root {

   @ElementUnion({
       @Element(name="B", type=B.class),
       @Element(name="C", type=C.class)
   })
   private A a;
}

class A {

}

class B extends A {

}

class C extends A {

} 
```

# java - 使用转义字符串将对象保存在休眠状态

> ID：10331078
> 
> 赞同：0
> 
> 时间：2012-04-26T09:53:14.453
> 
> 标签：java, hibernate

我正在尝试在 java 中使用 Hibernate 保存一个对象。该对象包含一个字符串，该字符串可以包含 '.

当我打电话给`session.save(myObject)`我时，由于这些非法字符，我在 SQL sintax 中收到一条错误消息。

我不构造SQL查询，所以我认为Hibernate会避免注入，但它没有......除了`myString.replace()`避免注入之外还有其他选择吗？

非常感谢。

Hibernate：3.0 MySQL 版本：5.0.51b-community-nt-log via TCP/IP 我不知道我有哪个 jdbc 驱动程序版本，是的，正在研究它。

代码很简单：

```
public Serializable objectBerria(Object o){
        Serializable s = session.save(o.getClass().cast(o));
        return s;
} 
```

Object 可以是一个包含 ' 字符的类。

```
Información: Hibernate: select jokoak0_.id as id3_, jokoak0_.izena as izena3_, jokoak0_.mota as mota3_, jokoak0_.plataforma as plataforma3_, jokoak0_.image as image3_, jokoak0_.prezioa as prezioa3_, jokoak0_.stock as stock3_ from angry_bee.jokoak jokoak0_ where (jokoak0_.izena='drake' s ' and joko.plataforma=' PS3 )
Advertencia: SQL Error: 1064, SQLState: 42000
Grave: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 's ' and joko.plataforma=' PS3 )' at line 1
Grave: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.loader.Loader.doList(Loader.java:2223)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.hql.classic.QueryTranslatorImpl.list(QueryTranslatorImpl.java:912)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
    at dbHelper.existsGame(dbHelper.java:174)
    at jokoBerriaBean.upload(jokoBerriaBean.java:98)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:737)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:467)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:254)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:228)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:43)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:56)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 's ' and joko.plataforma=' PS3 )' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    at com.mysql.jdbc.Util.getInstance(Util.java:384)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2275)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:674)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2220)
    ... 59 more

Advertencia: #{jokoBerriaBean.upload()}: java.lang.NullPointerException
javax.faces.FacesException: #{jokoBerriaBean.upload()}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 37 more
Caused by: java.lang.NullPointerException
    at dbHelper.existsGame(dbHelper.java:178)
    at jokoBerriaBean.upload(jokoBerriaBean.java:98)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:737)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:467)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:254)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:228)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:43)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:56)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 38 more

Advertencia: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at dbHelper.existsGame(dbHelper.java:178)
    at jokoBerriaBean.upload(jokoBerriaBean.java:98)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:737)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:467)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:254)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:228)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:43)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:56)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:03:23.690

可能休眠不会修改字符串。

在 SQL 中，' 是字符串分隔符（如 Java 中的 "）。要转义 '，您必须将其加倍（错误：`Mary\'s house`正确：）`Mary''s house`。

# ruby-on-rails - 更改表时出现死锁

> ID：10331080
> 
> 赞同：2
> 
> 时间：2012-04-26T09:53:27.230
> 
> 标签：ruby-on-rails, postgresql, migration

我在我的 Rails 应用程序中对包含很多行的表运行以下迁移：

```
rake db:migrate
*** [] rake aborted!
*** [] An error has occurred, this and all later migrations canceled:
*** [] 
*** [] PG::Error: ERROR:  deadlock detected
*** [] DETAIL:  Process 33319 waits for AccessExclusiveLock on relation 18486 of database 16948; blocked by process 29772.
*** [] Process 29772 waits for ShareLock on transaction 8652; blocked by process 33319.
*** [] HINT:  See server log for query details.
*** [] : ALTER TABLE "topics" DROP "most_recent_post_id"
*** [] 
*** [] Tasks: TOP => db:migrate
*** [] (See full trace by running task with --trace)
 ** [] ==  RemoveMostRecentPostsColumnsOnTopics: migrating 
 ** [] Updated 56875150 rows out of 568715 tries
 ** [] -- remove_column(:topics, :most_recent_post_id) 
```

运行的代码是这样的：

```
def self.up
  rows_updated = 0
  rows_tried = 0

  Topic.find(:all).each do |topic|
    rows_tried += 1
    rows_updated += 1 if topic.update_attribute :updated_at, topic.most_recent_post_created_at
  end

  puts "Updated #{rows_updated} rows out of #{rows_tried} tries"

  remove_column :topics, :most_recent_post_id
  remove_column :topics, :most_recent_post_created_at
end 
```

然后我尝试将其作为显式锁来执行，但是在搜索有关问题的信息时，我意识到 ALTER TABLE 已经使用 ACCESS EXCLUSIVE 锁锁定了表，根据此：[http ://www.postgresql.org/docs /9.1/static/explicit-locking.html](http://www.postgresql.org/docs/9.1/static/explicit-locking.html)

我可以做些什么来完成我的更改吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:42:09.440

您有两个进程试图获得独占访问权限：

```
Process 33319 waits for AccessExclusiveLock on relation 18486 of database 16948; blocked by process 29772.
Process 29772 waits for ShareLock on transaction 8652; blocked by process 33319. 
```

其中之一是您的迁移任务。我假设另一个是你的服务器。我建议：

*   如果您正在运行开发环境，请退出服务器，运行迁移并重新启动服务器。
*   如果您正在运行生产环境并且需要在不关闭服务器的情况下运行迁移，您可以将 #migrate 方法添加到您的服务器应用程序，以便它在同一进程中运行。

（老实说，我刚刚开始在多处理环境中深入研究 PostgreSQL——如果我了解更多，我会发布更好的答案。）

# php - 以流畅的方式记录错误

> ID：10331084
> 
> 赞同：38
> 
> 时间：2012-04-26T09:53:31.083
> 
> 标签：php, pdo

我一直在阅读特别的“错误日志”，我提出了“error_log”函数，它似乎是一个很好的工具来处理错误日志。但是如何最流畅、最好的使用它呢？

如果我有一个

```
try {
     //try a database connection...

} catch (PDOException $e) {
    error_log($e->getMessage(), 3, "/var/tmp/my-errors.log");

} 
```

这会将错误记录在 my-errors.log 文件中。但是如果我有时需要更改文件的位置、新文件夹或其他东西的位置怎么办。如果我有大量文件，我需要全部更改。

现在我开始考虑使用一个变量来设置错误日志的路径。当然可以，但是如果我想在函数或类方法中使用 error_log 怎么办？然后我需要将变量设置为全局变量，但这被认为是不好的做法！但是如果我不应该在一个类的深处使用这个函数，那不也被认为是不好的做法吗？这里有什么好的解决方案？

```
<?php

function legit() {
    try {
        if (1 == 1) {
            throw new Exception('There was an error here');
        }
    } catch (Exception $e) {
        throw new Exception('throw the error to the try-catch outside the function...');
    }

}

try {
    legit();
} catch (Exception $e) {
    echo 'error here' . $e->getMessage();

    //log it
} 
```

这是我上面所说的一个例子（没有在类/函数中深入记录......这是一个好方法吗？）

进一步：

我不太确定我应该如何使用一般的例外。假设我想在方法中使用 SQL 对数据库执行 INSERT，我会使用 try/catch，然后在失败时重新抛出异常吗？这被认为是好的做法吗？请举例。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-10T16:57:54.720

首先，我想赞扬您查看 PHP 中的标准错误方法。不幸的是`error_log`，您发现了一些限制。

这是一个很长的答案，请继续阅读以了解：

1.  错误
    *   直接记录错误`trigger_error`与`set_error_handler`
    *   好的错误变坏的地方 - 致命错误。
2.  例外
    *   声压级
    *   拿他们怎么办？
3.  代码
    *   设置
    *   用法

**TL;DR**用于`trigger_error`引发错误并`set_error_handler`记录它们。

# 1\. 错误

当程序中的事情没有按预期进行时，您通常会希望引发错误以便通知某人或某事。错误是指程序可能继续运行，但发生了值得注意的、可能有害或错误的情况。此时，许多人希望使用他们选择的日志记录包立即记录错误。我相信这是完全错误的做法。我建议使用`trigger_error`来引发错误，以便可以使用`set_error_handler`. 让我们比较这些选项：

**直接记录错误**

因此，您选择了您的日志记录包。现在，您可以在代码中出现错误的任何地方将调用传播到您的记录器。让我们看一下您可能拨打的单个电话（我将使用与 Jack 回答中的记录器类似的记录器）：

`Logger::getLogger('standard')->error('Ouch, this hurts');`

你需要什么来运行这段代码？

```
    类：记录器
    方法：getLogger
    返回：带有方法“错误”的对象

```

这些是使用此代码所需的依赖项。每个想要重用此代码的人都必须提供这些依赖项。这意味着标准的 PHP 配置将不再足以重用您的代码。在最好的情况下，使用依赖注入，您仍然需要将记录器对象传递到所有可能发出错误的代码中。

此外，除了代码负责的任何事情之外，它还负责记录错误。这违背了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

我们可以看到**直接记录错误是不好的**。

**trigger_error 救援**

PHP 有一个被称为函数的函数[`trigger_error`](http://php.net/manual/en/function.trigger-error.php)，它可以像标准函数一样用来引发错误。与它一起使用的错误级别在[错误级别常量](http://www.php.net/manual/en/errorfunc.constants.php)中定义。作为用户，您必须使用用户错误之一：`E_USER_ERROR`或`E_USER_WARNING`默认值`E_USER_NOTICE`（其他错误级别保留用于标准功能等）。使用标准 PHP 函数来引发错误允许代码在任何标准 PHP 安装中重复使用！我们的代码不再负责记录错误（只确保它被引发）。

使用`trigger_error`我们只执行一半的错误记录过程（引发错误）并将响应错误的责任留给接下来将介绍的错误处理程序。

**错误处理程序**

我们使用该函数设置了一个自定义错误处理程序[`set_error_handler`](http://au.php.net/manual/en/function.set-error-handler.php)（参见代码设置）。此自定义错误处理程序取代了标准 PHP 错误处理程序，后者通常根据 PHP 配置设置在 Web 服务器错误日志中记录消息。我们仍然可以通过`false`在自定义错误处理程序中返回来使用这个标准错误处理程序。

自定义错误处理程序只有一个职责：响应错误（包括您想要执行的任何日志记录）。在自定义错误处理程序中，您可以完全访问系统，并且可以运行您想要的任何类型的日志记录。几乎任何使用观察者设计模式的记录器都可以（我不打算深入讨论，因为我认为它是次要的）。这应该允许您挂接新的日志观察器以将输出发送到您需要的地方。

您可以完全控制在代码的单个可维护部分中对错误执行您喜欢的操作。现在可以在项目之间或在单个项目中从页面到页面快速轻松地更改错误记录。有趣的是，即使`@`被抑制的错误也会以 0 的值进入自定义错误处理程序`errno`，如果[`error_reporting`](http://php.net/manual/en/function.error-reporting.php)尊重掩码，则不应报告。

**当好的错误变坏时 - 致命错误**

无法从某些错误继续。自定义错误处理程序无法处理以下错误级别：`E_ERROR`, `E_PARSE`, `E_CORE_ERROR`, `E_CORE_WARNING`, `E_COMPILE_ERROR`, `E_COMPILE_WARNING`。当这些类型的错误由标准函数调用触发时，自定义错误处理程序将被跳过并且系统关闭。这可以通过以下方式生成：

`call_this_function_that_obviously_does_not_exist_or_was_misspelt();`

这是一个**严重**的错误！无法恢复，系统即将关闭。我们唯一的选择是[`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)与关闭达成协议。但是，只要脚本完成（成功和不成功），就会执行此函数。当最后一个错误是致命错误时，使用这个和[`error_get_last`](http://php.net/manual/en/function.error-get-last.php)一些基本信息可以记录（此时系统几乎关闭）。发送正确的状态代码并显示您选择的内部服务器错误类型页面也很有用。

# 2\. 例外

可以以与基本错误非常相似的方式处理异常。`trigger_error`您的代码将抛出异常而不是异常（手动使用`throw new Exception`或来自标准函数调用）。用于[`set_exception_handler`](http://php.net/manual/en/function.set-exception-handler.php)定义要用于处理异常的回调。

**声压级**

标准 PHP 库 (SPL) 提供了[异常](http://php.net/manual/en/spl.exceptions.php)。它们是我引发异常的首选方式，因为`trigger_error`它们是 PHP 的标准部分，不会为您的代码引入额外的依赖项。

**拿他们怎么办？**

抛出异常时，可以进行三种选择：

1.  抓住它并修复它（然后代码继续，好像没有发生任何不好的事情一样）。
2.  抓住它，附加有用的信息并重新抛出它。
3.  让它冒泡到更高的水平。

在堆栈的每一层，都会做出这些选择。最终，一旦它冒泡到最高级别，您设置的回调`set_exception_handler`将被执行。这是您的日志记录代码所属的地方（出于与错误处理相同的原因），而不是分布在`catch`代码中的整个语句中。

# **3.代码**

## 设置

**错误处理程序**

```
function errorHandler($errno , $errstr, $errfile, $errline, $errcontext)
{
    // Perform your error handling here, respecting error_reporting() and
    // $errno.  This is where you can log the errors.  The choice of logger
    // that you use is based on your preference.  So long as it implements
    // the observer pattern you will be able to easily add logging for any
    // type of output you desire.
}

$previousErrorHandler = set_error_handler('errorHandler'); 
```

**异常处理程序**

```
function exceptionHandler($e)
{
    // Perform your exception handling here.
}

$previousExceptionHandler = set_exception_handler('exceptionHandler'); 
```

**关机功能**

```
function shutdownFunction()
{
    $err = error_get_last();

    if (!isset($err))
    {
        return;
    }

    $handledErrorTypes = array(
        E_USER_ERROR      => 'USER ERROR',
        E_ERROR           => 'ERROR',
        E_PARSE           => 'PARSE',
        E_CORE_ERROR      => 'CORE_ERROR',
        E_CORE_WARNING    => 'CORE_WARNING',
        E_COMPILE_ERROR   => 'COMPILE_ERROR',
        E_COMPILE_WARNING => 'COMPILE_WARNING');

    // If our last error wasn't fatal then this must be a normal shutdown.  
    if (!isset($handledErrorTypes[$err['type']]))
    {
        return;
    }

    if (!headers_sent())
    {
        header('HTTP/1.1 500 Internal Server Error');
    }

    // Perform simple logging here.
}

register_shutdown_function('shutdownFunction'); 
```

## 用法

**错误**

```
// Notices.
trigger_error('Disk space is below 20%.', E_USER_NOTICE);
trigger_error('Disk space is below 20%.'); // Defaults to E_USER_NOTICE

// Warnings.
fopen('BAD_ARGS'); // E_WARNING fopen() expects at least 2 parameters, 1 given
trigger_error('Warning, this mode could be dangerous', E_USER_WARNING);

// Fatal Errors.    
// This function has not been defined and so a fatal error is generated that
// does not reach the custom error handler.
this_function_has_not_been_defined();
// Execution does not reach this point.

// The following will be received by the custom error handler but is fatal.
trigger_error('Error in the code, cannot continue.', E_USER_ERROR);
// Execution does not reach this point. 
```

**例外**

之前的三个选项中的每一个都在此处以通用方式列出，修复它，附加到它并让它冒泡。

1 可修复：

```
try
{
    $value = code_that_can_generate_exception();
}
catch (Exception $e)
{
    // We decide to emit a notice here (a warning could also be used).
    trigger_error('We had to use the default value instead of ' .
                  'code_that_can_generate_exception\'s', E_USER_NOTICE);
    // Fix the exception.
    $value = DEFAULT_VALUE;
}

// Code continues executing happily here. 
```

2 附加：

看下面怎么`code_that_can_generate_exception()`不知道`$context`。此级别的 catch 块有更多信息，如果通过重新抛出它有用，它可以附加到异常中。

```
try
{
    $context = 'foo';
    $value = code_that_can_generate_exception();
}
catch (Exception $e)
{
    // Raise another exception, with extra information and the existing
    // exception set as the previous exception. 
    throw new Exception('Context: ' . $context, 0, $e);
} 
```

3让它冒泡：

```
// Don't catch it. 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-07T04:20:20.210

已要求使此答案更适用于更大的受众，所以就这样吧。

**前言**

错误处理通常不是您在编写应用程序时首先要考虑的事情。作为间接结果，它会在需要时得到加强。但是，利用 PHP 中的现有机制也不必花费太多。

这是一篇相当长的文章，所以我把它分解成合乎逻辑的文本集。

**触发错误**

在 PHP 中有两种不同的触发错误的方式：

1.  PHP 本身的错误（例如使用未定义的变量）或内部函数（例如`imagecreatefromjpeg`无法打开文件），
2.  用户代码使用触发的错误[`trigger_error`](http://sg.php.net/trigger_error)，

这些通常打印在您的页面上（除非[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)关闭或[`error_reporting`](http://sg.php.net/manual/en/function.error-reporting.php)为零），这应该是生产机器的标准，除非您像我一样编写完美的代码......继续前进）；[`set_error_handler`](http://sg.php.net/set_error_handler)这些错误也可以被捕获，让您可以通过稍后解释的使用来了解代码中的任何问题。

**抛出异常**

异常在三个主要方面不同于错误：

1.  处理它们的代码可能远离它们被抛出的地方。源处的变量 state 必须显式传递给 Exception 构造函数，否则您只有堆栈跟踪。
2.  异常和捕获之间的代码被完全跳过，而在发生错误（并且不是致命的）之后，代码仍然继续。
3.  它们可以从主`Exception`类扩展；这允许您捕获和处理特定异常，但让其他人在堆栈中冒泡，直到它们被其他代码捕获。另见：[http ://www.php.net/manual/en/language.exceptions.php](http://www.php.net/manual/en/language.exceptions.php)

后面会给出一个抛出异常的例子。

**处理错误**

通过注册错误处理程序来捕获和处理错误非常简单，例如：

```
function my_error_handler($errno, $errstr, $errfile = 'unknown', $errline = 0, array $errcontext = array())
{
    // $errcontext is very powerful, it gives you the variable state at the point of error; this can be a pretty big variable in certain cases, but it may be extremely valuable for debugging
    // if error_reporting() returns 0, it means the error control operator was used (@)
    printf("%s [%d] occurred in %s:%d\n%s\n", $errstr, $errno, $errfile, $errline, print_r($errcontext, true));

    // if necessary, you can retrieve the stack trace that led up to the error by calling debug_backtrace()

    // if you return false here, the standard PHP error reporting is performed
}

set_error_handler('my_error_handler'); 
```

[`ErrorException`](http://php.net/manual/en/class.errorexception.php)对于踢，您可以通过注册以下错误处理程序（PHP >= 5.1）将所有错误转换为：

```
function exception_error_handler($errno, $errstr, $errfile, $errline)
{
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}

set_error_handler("exception_error_handler"); 
```

**处理异常**

在大多数情况下，您处理的异常尽可能接近导致它允许备份计划的代码。例如，您尝试插入数据库记录并抛出主键约束异常；您可以通过更新记录来恢复（设计为大多数数据库可以自己处理）。有些异常无法在本地处理，因此您希望将它们级联。例子：

```
function insertRecord($user, $name)
{
    try {
        if (true) {
            throw new Exception('This exception should not be handled here');
        }
        // this code is not executed
        $this->db->insert('users', array('uid' => $user, 'name' => $name));
    } catch (PDOException $e) {
        // attempt to fix; an exception thrown here will cascade down
        throw $e; // rethrow exception

        // since PHP 5.3.0 you can also nest exceptions
        throw new Exception("Could not insert '$name'", -1, $e);
    } catch (WhatEverException $e) {
        // guess what, we can handle whatever too
    }
} 
```

**滑溜的例外**

那么当你在任何地方都没有捕捉到异常时会发生什么？您也可以使用[`set_exception_handler`](http://sg.php.net/set_exception_handler).

```
function my_exception_handler(Exception $exception)
{
    // do your stuff here, just don't throw another exception here
}

set_exception_handler('my_exception_handler'); 
```

除非您没有有意义的方法来处理代码中任何地方的异常，否则不鼓励这样做。

**记录错误/异常**

现在您正在处理错误，您必须在某处记录它。在我的示例中，我使用了一个 Apache 从 Java 移植到 PHP 的项目，名为[LOG4PHP](http://logging.apache.org/log4php/)。还有其他的，但它说明了灵活的日志记录工具的重要性。

它使用以下概念：

1.  [记录器](http://logging.apache.org/log4php/docs/loggers.html)- 代表您执行记录的命名实体；它们可以特定于您项目中的某个类，也可以作为通用记录器共享，
2.  [Appenders](http://logging.apache.org/log4php/docs/appenders.html) - 每个日志请求都可以根据预定义的条件（例如日志级别）发送到一个或多个目的地（电子邮件、数据库、文本文件），
3.  级别 - 日志从调试消息分类到致命错误。

说明不同消息级别的基本用法：

```
Logger::getLogger('main')->info('We have lift off');
Logger::getLogger('main')->warn('Rocket is a bit hot');
Logger::getLogger('main')->error('Houston, we have a problem'); 
```

使用这些概念，您可以建模一个非常强大的日志记录工具；例如，在不更改上述代码的情况下，您可以实现以下设置：

1.  收集数据库中的所有调试消息供开发人员查看；您可以在生产服务器上禁用此功能，
2.  将警告收集到每日文件中，您可以在一天结束时通过电子邮件发送，
3.  立即发送有关致命错误的电子邮件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T12:02:42.313

定义它，然后使用它:)

```
define('ERRORLOG_PATH', '/var/tmp/my-errors.log');

error_log($e->getMessage(), 3, ERRORLOG_PATH); 
```

或者，只需将第三个参数`error_log`设为可选，将其默认为您想要的路径。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-11T09:06:46.250

另外，对于错误日志（实际上是所有日志），我会使用事件调度器，就像 symfony 框架那样。

看看这个 sf 组件（它非常轻量级的依赖，不需要整个框架，可能有 3 个相关的 php 类和 2 个接口）

[https://github.com/symfony/EventDispatcher](https://github.com/symfony/EventDispatcher)

这样，您可以在应用程序引导程序中的某处创建调度程序：

```
use Symfony\Component\EventDispatcher\EventDispatcher;
use Symfony\Component\EventDispatcher\Event;

$dispatcher = new EventDispatcher();

//register listeners
$dispatcher->addListener('application.log', function (Event $event) {
    //do anything you want
}); 
```

然后，您可以通过类似的方式在代码的任何位置引发事件

```
$dispatcher->dispatch(new GenericEvent('application.log', array('message' => 'some log', 'priority' => 'high')); 
```

当然，您可以使用自己的事件子类化事件类：

```
class LogEvent extends GenericEvent {
    public function __construct($message, $priority = 'INFO') {
        parent::__construct('application.log', array('message'=>$message,'priority'=>$priority));
    }
    public function getMessage() { return $this->getArgument('message'); }
    public function getPriority() { return $this->getArgument('priority'); }
}

// now raising LogEvent is much cleaner:
$dispatcher->dispatch(new LogEvent('some log')); 
```

这也将允许您创建更多自定义事件，例如 ExceptionEvent

```
 class ExceptionEvent extends GenericEvent {
    public function __construct(Exception $cause) {
        parent::__construct('exception.event', array('cause' => $cause));
    }
 } 
```

并相应地处理它们。

## 优点

*   您将日志记录逻辑与应用程序分开
*   您可以在运行时轻松添加和删除记录器
*   您可以轻松注册任意数量的记录器（即 DebugLogger 将所有内容记录到文本文件中，ErrorLogger 仅将错误记录到 error_log，CriticalLogger 仅记录生产环境中的严重错误并通过电子邮件将它们发送给管理员等）
*   您可以将事件调度程序用于更多的事情，而不仅仅是记录（实际上对于每个适合观察者模式的工作）
*   实际的记录器只不过是“实现细节”——它很容易替换，以至于你的日志去哪里都没有关系——你可以随时替换日志目的地，而不必重构你的方法的名称，或者改变任何东西在代码中。
*   将很容易实现复杂的日志路由逻辑或全局更改日志格式（通过配置记录器）
*   如果您对侦听器（记录器）和调度程序（进入通知日志事件的类）使用依赖注入，一切都会变得更加灵活

## 实际记录

正如有人已经说过的，我建议使用开箱即用的库，比如提到的 Monolog、Zend_Log 或 log4php，可能没有理由手动编写这些东西（你最不想要的就是损坏的错误记录器！）

PS：将代码片段视为伪代码，我没有测试它们。详细信息可以在提到的库的文档中找到。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-07T21:02:14.800

如果您仍然需要处理日志的自定义方式（即您不想使用标准`trigger_error()`），我建议您查看 Zend_Log（[http://framework.zend.com/manual/en/zend.log.overview。 html](http://framework.zend.com/manual/en/zend.log.overview.html) ) 出于以下原因：

1.  这可以作为一个独立的组件使用，ZF 不是一个全栈框架。你可以只复制 Zend_Loader 和 Zend_Log 命名空间，实例化 Zend_Loader 并使用它。见下文：

    ```
    require_once('Zend/Loader/Autoloader.php');

    $loader = Zend_Loader_Autoloader::getInstance();

    $logger = new Zend_Log();    
    $writer = new Zend_Log_Writer_Stream('php://output');

    $logger->addWriter($writer);    
    $logger->log('Informational message', Zend_Log::INFO); 
    ```

2.  向您提供了许多日志库，但我相信 Zend 团队（PHP 语言的创始人）知道他们在做什么

3.  您可以使用任何编写器（数据库、STDOUT - 见上文、文件等，您可以自定义它来编写您自己的以将日志消息发布到 Web 服务）
4.  日志级别
5.  可能会更改日志格式（但开箱即用的格式对我来说很棒）。上面带有标准格式化程序的示例将产生如下内容：

> 2012-05-07T23:57:23+03:00 信息 (6)：信息性消息

5.  只是阅读参考，它可能被配置为捕获 php 错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T08:50:40.047

有两个挑战要应对。首先是灵活地登录到不同的频道。在这种情况下，您应该看看例如[Monolog](https://github.com/Seldaek/monolog)。

第二个挑战是将登录融入到您的应用程序中。恕我直言，最好的情况是不明确使用日志记录。例如，[方面方向](http://en.wikipedia.org/wiki/Aspect-oriented_software_development)就派上用场了。一个很好的示例是[flow3](http://flow3.typo3.org/)。

但这更多是对问题的鸟瞰...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T03:36:44.360

我使用我自己的函数，它允许我通过设置或更改第二个参数来编写多种类型的日志文件。

通过将 log 函数包含在我认为对我的开发项目“原生”的函数库中，我解决了您所问的关于“什么是正确的方法”的概念性问题。这样我就可以认为这些函数只是“我的”php核心的一部分，比如`date()`或`time()`

在这个基本版本的 dlog 中，我还处理数组。虽然我最初使用它来记录错误，但我最终将它用于其他“快速而肮脏”的短期跟踪，例如记录代码进入某个部分的时间，以及用户登录等。

```
function dlog($message,$type="php-dlog")
{
    if(!is_array($message)  )
        $message=trim($message);
    error_log(date("m/d/Y h:i:s").":".print_r($message,true)."\n",3, "/data/web/logs/$_SERVER[HTTP_HOST]-$type.log");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T02:14:49.600

正如 KNL 所说，这是非常正确的，但不幸的是，到目前为止还没有记录，PHP 开发人员不推荐抛出异常的错误，并且有人在文档中犯了错误。它确实会导致许多扩展的错误，所以不要这样做。

这已经在 irc 上的#PHP 上进行了辩论。

“但是，错误可以简单地转换为带有 ErrorException 的异常。” 在[http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)将被删除。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-08T05:38:50.927

大多数错误记录器和异常记录器对大多数人来说都是无用的，因为它们无法访问日志文件。

我更喜欢使用自定义错误处理程序和自定义异常处理程序，并且如果系统在数据库上运行，则在生产期间将这些错误直接记录到数据库中。

在开发过程中，当设置了 display_errors 时，它们不会记录任何内容，因为所有错误都会在浏览器中引发。

作为旁注：不要让您的自定义错误处理程序抛出异常！这真是个坏主意。它可能会导致缓冲区处理程序和某些扩展出现错误。此外，一些核心 PHP 函数（如 fopen()）会在失败时发出警告或通知，这些应该相应地处理，并且不应该停止应用程序有异常会做。

在 PHP 文档中提到让错误处理程序抛出异常是一个注释错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-01T07:31:57.457

如果 PHP 处理错误的方式对您来说不够灵活（例如，有时您想记录到数据库，有时记录到文件，有时是其他），您需要使用/创建自定义 PHP 记录框架。

您可以浏览[https://stackoverflow.com/questions/341154/php-logging-framework](https://stackoverflow.com/questions/341154/php-logging-framework)中的讨论，或者直接尝试首选[KLogger](https://github.com/katzgrau/KLogger)。不过，我不确定它是否支持自定义日志记录目标。但至少，它是一个小而易读的类，您应该能够根据自己的需要进一步扩展它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-09T10:52:56.070

我会选择 Tom vand der Woerdt 的日志记录解决方案，它对您的要求最简单且最有效。

至于另一个问题：

您不需要在函数内捕获/重新抛出异常，除非您有解决方案的特定类型的异常。

有点简单的例子：

```
define('ERRORLOG_PATH', '/var/tmp/my-errors.log');
function do_something($in)
{
    if (is_good($in))
    {
        try {
            return get_data($in);
        } catch (NoDataException $e) {
            // Since it's not too big a deal that nothing
            // was found, we just return false.
            return false;
        }
    } else {
        throw new InvalidArguementException('$in is not good');
    }
}

function get_data($data)
{
    if (!is_int($data))
    {
        InvalidArguementException('No');
    }
    $get = //do some getting.
    if (!$get)
    {
        throw new NoDataException('No data was found.');
    } else {
        return $get;
    }
}

try {
   do_something('value');
} catch (Exception $e) {
   error_log($e->getMessage(), 3, ERRORLOG_PATH);
   die ('Something went wrong :(');
} 
```

在这里，您只会捕获 ，`NoDataException`因为您有一些其他逻辑可以对其进行排序，所有其他错误都属于第一个捕获并由顶级捕获处理，因为所有抛出的异常都必须在其层次结构中的某个点继承自`Exception`.

显然，如果您`Exception`再次抛出（在初始`try {}`或顶部之外`catch {}`），您的脚本将退出并出现 Uncaught Exception 错误并且错误日志记录会丢失。

如果您想一路走下去，您还可以使用自定义错误处理功能`set_error_handler()`并将您的日志也放在那里。

# perl - 在 Perl 中，为什么我关闭 STDOUT 后 print 不生成任何输出？

> ID：10331091
> 
> 赞同：0
> 
> 时间：2012-04-26T09:53:45.823
> 
> 标签：perl, stdout

我有代码：

```
open(FILE, "<$new_file") or die "Cant't open file \n";
@lines=<FILE>;

close FILE;

open(STDOUT, ">$new_file") or die "Can't open file\n";
$old_fh = select(OUTPUT_HANDLE);
$| = 1;
select($old_fh);

for(@lines){
    s/(.*?xsl.*?)xsl/$1xslt/;
    print;
}
close(STDOUT);  
STDOUT -> autoflush(1);
print "file changed"; 
```

关闭后关闭`STDOUT`程序不写最后打印`print "file changed"`。为什么是这样？ ***已*编辑****打印我想在控制台上写的消息 no to file

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:01:03.997

我想这是因为`print`默认文件句柄是`STDOUT`，此时它已经关闭。您可以重新打开它，或打印到其他文件句柄，例如`STDERR`.

```
print STDERR "file changed"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T10:26:19.330

一条`print`语句将输出 中的字符串`STDOUT`，这是默认的输出文件句柄。

所以声明

`print "This is a message";`

和

`print STDOUT "This is a message";`

在您的代码中，您已关闭`STDOUT`然后打印消息，这将不起作用。重新打开`STDOUT`文件句柄或不要关闭它。脚本结束时，文件句柄将自动关闭

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T10:10:01.917

这是因为你已经关闭了存储在 中的文件句柄`STDOUT`，所以`print`不能再使用它了。一般来说，打开一个新的文件句柄到一个预定义的句柄名称中并不是一个好主意，因为它必然会导致混乱。使用词法文件句柄或只是为输出文件使用不同的名称要清楚得多。是的，您必须在`print`调用中指定文件句柄，但是您不会对`STDOUT`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T16:15:25.150

您似乎对在 perl 中如何完成[文件 IO 操作](http://perldoc.perl.org/perlopentut.html)感到困惑，所以我建议您阅读一下。

## 什么地方出了错？

你正在做的是：

*   打开文件进行阅读
*   读取整个文件并关闭它
*   使用 STDOUT 文件句柄打开同一个文件进行覆盖（org 文件被截断）。
*   调整默认打印句柄，以便在您显示的代码中甚至未打开的文件句柄上设置自动刷新。
*   对所有行执行替换并打印它们
*   关闭 STDOUT，然后在一切完成后打印一条消息。

您最大的主要错误是尝试重新打开默认输出文件句柄 STDOUT。我认为这是因为您不知道如何[`print`](http://perldoc.perl.org/functions/print.html)工作，即您可以提供一个文件句柄来打印到`print FILEHANDLE "text"`. 或者您不知道 STDOUT 是预定义的文件句柄。

您的其他错误：

*   你没有使用`use strict; use warnings;`. 您编写的任何程序都不应该没有这些。它们将防止您做坏事，并为您提供有关错误的信息，并为您节省数小时的调试时间。
*   除非你真的需要，否则你永远不应该“slurp”一个文件（将整个文件读取到一个变量中），因为这是无效且缓慢的，并且对于大文件会导致你的程序由于内存不足而崩溃。
*   永远不要重新分配默认文件句柄 STDIN、STDOUT、STDERR，除非 A) 你真的需要，B) 你知道你在做什么。
*   [`select`](http://perldoc.perl.org/functions/select.html)设置打印的默认文件句柄，阅读文档。这很少是您需要关心的事情。该变量***为当前选定的文件句柄***`$|`设置自动刷新（如果设置为真值）。所以你所做的实际上什么也没做，因为 OUTPUT_HANDLE 是一个不存在的文件句柄。如果您跳过了这些语句，它将为 STDOUT 设置自动刷新。（但你不会注意到任何区别）*`select`*
**   `print`使用打印缓冲区，因为它很有效。我假设您正在尝试自动刷新，因为您认为您的打印被捕获在缓冲区中，这是不正确的。一般来说，这不是您需要担心的事情。程序结束时会自动刷新所有打印缓冲区。*   在大多数情况下，您不需要显式关闭文件句柄。文件句柄在超出范围或程序结束时会自动关闭。*   推荐使用词法文件句柄，例如，`open my $fh, ...`而不是全局的，例如`open FILE, ..`，因为前面的语句，并且因为避免全局变量总是一个好主意。*   建议使用三参数 open：`open FILEHANDLE, MODE, FILENAME`. 这是因为否则您可能会冒着文件名中的元字符损坏您的`open`语句的风险。*

 *## 快速修复：

现在，正如我在评论中所说，这 - 或者更确切地说，你*想要*`-p`的，因为这段代码是错误的 - 与命令行开关的惯用用法几乎相同：

```
perl -pi.bak -e 's/(.*?xsl.*?)xsl/$1xslt/' file.txt 
```

这个简短的小片段实际上完成了您的程序所做的所有事情，但做得更好。解释：

*   `-p`switch 自动假定您提供的代码在`while (<>) { }`循环内，并在您的代码执行后打印每一行。
*   `-i`switch 告诉 perl 对文件进行就地编辑，将备份副本保存在“file.txt.bak”中。

因此，该单行相当于这样的程序：

```
$^I = ".bak"; # turns inplace-edit on
while (<>) {  # diamond operator automatically uses STDIN or files from @ARGV
    s/(.*?xsl.*?)xsl/$1xslt/;
    print;
} 
```

这相当于：

```
my $file = shift; # first argument from @ARGV -- arguments 
open my $fh, "<", $file or die $!;
open my $tmp, ">", "/tmp/foo.bar" or die $!; # not sure where tmpfile is
while (<$fh>) {                           # read lines from org file
    s/(.*?xsl.*?)xsl/$1xslt/;
    print $tmp $_;                        # print line to tmp file
}
rename($file, "$file.bak") or die $!;     # save backup
rename("/tmp/foo.bar", $file) or die $!;  # overwrite original file 
```

inplace-edit 选项实际上创建了一个单独的文件，然后将其复制到原始文件上。如果使用备份选项，则首先备份原始文件。您*不需要*知道这些信息，只需知道使用`-i`开关将导致`-p`(and `-n`) 选项实际对原始文件执行更改。

`-i`不需要在激活备份选项的情况下使用交换机（Windows 除外），但建议使用。一个好主意是先在没有选项的情况下运行单行，因此输出会打印到屏幕上，然后在看到输出正常后添加它。

## 正则表达式

```
s/(.*?xsl.*?)xsl/$1xslt/; 
```

您搜索包含“xsl”的字符串两次。的用法`.*?`在第二种情况下很好，但在第一种情况下不好。每当您发现自己使用通配符字符串开始正则表达式时，您可能做错了什么。**除非**你试图捕捉那部分。

但是，在这种情况下，您将其捕获并删除它，然后将其放回原处，这完全没有用。因此，首要任务是将那部分去掉：

```
s/(xsl.*?)xsl/$1xslt/; 
```

现在，移除某些东西并将其放回去实际上只是一个根本不移除它的魔术。我们不需要这样的魔术，因为我们一开始就不能删除它。使用[环视断言](http://perldoc.perl.org/perlre.html#Look-Around-Assertions)，您可以实现这一点。

在这种情况下，由于你有一个可变长度的表达式并且需要一个**后**向断言，我们必须使用`\K`(mnemonic: Keep) 选项，因为没有实现可变长度的后视。

```
s/xsl.*?\Kxsl/xslt/; 
```

所以，由于我们没有取出任何东西，我们不需要使用`$1`. 现在，您可能会注意到，“嘿，如果我将 'xsl' 替换为 'xslt'，我根本不需要删除 'xsl'。” 这是真的：

```
s/xsl.*?xsl\K/t/; 
```

您可以考虑为此正则表达式使用选项，例如`/i`，这会导致它忽略大小写，从而也匹配诸如“XSL FOO XSL”之类的字符串。或者`/g`允许它每行执行所有可能匹配的选项，而不仅仅是第一个匹配。[在perlop](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)中阅读更多内容。

## 结论

完成的单线是：

```
perl -pi.bak -e 's/xsl.*?xsl\K/t/' file.txt 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T10:09:46.363

```
open OLDOUT, ">&", STDOUT;
close STDOUT;

open(STDOUT, ">$new_file") or die "Can't open file\n";
...
close(STDOUT);  
open (STDOUT, ">&",OLDOUT);
print "file changed"; 
```*

# javascript - Internet explorer 和 body onload

> ID：10331097
> 
> 赞同：0
> 
> 时间：2012-04-26T09:53:53.900
> 
> 标签：javascript, xhtml, internet-explorer-8, internet-explorer-9, onload

我有一个页面，我想在其中使用功能。首先有一个 addTitle() 函数，该函数生成到一个 div 中。这是功能：

```
function addTitle(){

var ni = document.getElementById('div_fieldset');

var titleSpan = document.createElement("span");
ni.appendChild(titleSpan);
titleSpan.setAttribute("id","titleSpan");
titleSpan.setAttribute("class","fields");

if(titleSpan.previousSibling.nodeName=="#text"){    
    document.getElementById("titleSpan").style.paddingLeft="85px";
    titleSpan.style.width="86.5%";      
}else{
    var titleSelect = document.createElement("select");
    titleSelect.setAttribute("size","1");
    titleSelect.setAttribute("name","titleSelect");
    titleSelect.setAttribute("class","logicalOpSelect");

        orOption=document.createElement("OPTION");
        orText=document.createTextNode("OR");
        orOption.appendChild(orText);
        orOption.setAttribute("value","OR");
        titleSelect.appendChild(orOption);

        andOption=document.createElement("OPTION");
        andText=document.createTextNode("AND");
        andOption.appendChild(andText);
        andOption.setAttribute("value","AND");
        titleSelect.appendChild(andOption);

    titleSpan.appendChild(titleSelect);
}

    var titleSpanInner = document.createElement("span");
    titleSpan.appendChild(titleSpanInner);
    titleSpanInner.setAttribute("class","labels");
    titleSpanInner.innerHTML="Title";

    var titleInput = document.createElement("input");
    titleSpan.appendChild(titleInput);
    titleInput.setAttribute("class","input_text");
    titleInput.setAttribute("type","text");
    titleInput.setAttribute("name","title_input");
    titleInput.setAttribute("size","50");

    var removeButton = document.createElement("input");
    titleSpan.appendChild(removeButton);
    removeButton.setAttribute("id","removeTitle");
    removeButton.setAttribute("class","removeButton");
    removeButton.setAttribute("type","button");
    removeButton.setAttribute("value","Delete field");
    removeButton.setAttribute("onClick","remove(this.id)");
} 
```

然后是html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8"/>
<title>Search</title>
<link rel="stylesheet" href="css/search.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
</head>
<script type="text/javascript">
function AddTitle(){
   ...
   Here is the addTitle code, which is placed above
   ...
}
</script>
<body onload="addTitle();">
  <div id="box">
  <form name="search" method="post" action="search.php">
    <div id="div_fieldset">
    </div>
    <input class="button" type="submit" value="Search">
  </form>                                                               
  </div>
</body>
</html> 
```

而在 Internet eplorer 8 或 9 中，field_set div 没有任何内容，只有 titleSpan 跨度。但是，如果我将整个 addTitle 源放入 field_set div，那么 addTitle 的最后一部分不会出现，这个：

```
var removeButton = document.createElement("input");
titleSpan.appendChild(removeButton);
removeButton.setAttribute("id","removeTitle");
removeButton.setAttribute("class","removeButton");
removeButton.setAttribute("type","button");
removeButton.setAttribute("value","Delete field");
removeButton.setAttribute("onClick","remove(this.id)"); 
```

问题是什么，解决方案是什么？谢谢！

# php - 有没有办法在 php nusoap 库中获取注册的函数名称？

> ID：10331098
> 
> 赞同：0
> 
> 时间：2012-04-26T09:53:56.910
> 
> 标签：php, soap, nusoap

我想在数组中获取注册的函数名称。是否可以？
如果我可以从客户端代码中获取该数组，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:38:05.400

我不确定这是否是您的意思，但请尝试：

```
print_r(get_defined_functions()); 
```

这会给你这样的东西：

```
Array
(
    [internal] => Array
        (
            [0] => zend_version
            [1] => func_num_args
            [2] => func_get_arg
            [3] => func_get_args
            [4] => strlen
            [5] => strcmp
            ...
            [1274] => xmlwriter_write_dtd_attlist
            [1275] => xmlwriter_output_memory
            [1276] => xmlwriter_flush
        )

    [user] => Array
        (
            [0] => foo
            [1] => bar
        )
) 
```

用户子数组是您要查找的子数组。

# c++ - 我有一个应用程序，其中清单文件包含对 Visual Studio 2008 运行时的引用，但我想在 VS2010 express 中编译它

> ID：10331104
> 
> 赞同：1
> 
> 时间：2012-04-26T09:54:27.463
> 
> 标签：c++, visual-studio-2010, visual-c++, x86

我有一个应用程序（VC++），其中清单文件包含对 Visual Studio 2008 运行时的引用，但我想在 VS2010 express 中编译它。应该在清单文件中进行哪些更改，尽管我已经为 VS2010 编译了所有库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:47:34.233

如果你有项目文件，你应该可以在 VS2010 中打开它，项目会为你提供自我升级。

如果没有，您可能可以在 VS2010 中“从现有代码创建一个新项目”并最终得到正确的清单。不过，我认为 VS2010 Express Edition 不支持此功能。

我会对手动清单编辑保持警惕，因为我不清楚 VS2010 和 VS2008 还需要什么。

# c# - 将 IO.Stream 写入（读取）到（从）ApplicationData.Current.LocalFolder

> ID：10331105
> 
> 赞同：1
> 
> 时间：2012-04-26T09:54:28.820
> 
> 标签：c#, windows-8, microsoft-metro

将 amnd write 和 IO.Stream（在我的情况下从 Internet 下载的 Zip 文件）读取到 ApplicationData.Current.LocalFolder 的最佳方法是什么

我试过

```
public static async Task WriteToFile(
       this System.IO.Stream input,
       string fileName,
       StorageFolder folder = null)
    {
        folder = folder ?? ApplicationData.Current.LocalFolder;
        var file = await folder.CreateFileAsync(
            fileName,
            CreationCollisionOption.ReplaceExisting);
        using (var fs = await file.OpenAsync(FileAccessMode.ReadWrite))
        {
            using (var outStream = fs.GetOutputStreamAt(0))
            {
                using (var dataWriter = new DataWriter(outStream))
                {
                    byte[] buffer = new byte[8 * 1024];
                    int len;
                    while ((len = input.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        dataWriter.WriteBytes(buffer);
                    }

                    await dataWriter.StoreAsync();
                    dataWriter.DetachStream();
                }

                await outStream.FlushAsync();
            }
        }
    } 
```

用于写作和

```
StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(filename);
var fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
var stream = fileStream.AsStreamForRead(); 
```

但是文件在途中的某个地方损坏了。我认为读取没有问题，所以它应该在写入文件的某个地方。有没有更好的方法将 IO.Stream 写入 ApplicationData.Current.LocalFolder 有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:28:27.680

试试这个：

```
static async void DownloadFileAsync(
    this HttpClient httpClient,
    string requestUri,
    string fileName,
    StorageFolder folder = null)
{
    folder = folder ?? ApplicationData.Current.LocalFolder;

    var file = await folder.CreateFileAsync(
        fileName, CreationCollisionOption.ReplaceExisting);

    using (var httpStream = await httpClient.GetStreamAsync(uri))
    using (var fileStream = await file.OpenAsync(FileAccessMode.ReadWrite))
    {
        await httpStream.CopyToAsync(fileStream.AsStreamForWrite());
    }
} 
```

MSDN：[HttpClient 类](http://msdn.microsoft.com/en-us/library/hh193681%28v=vs.110%29.aspx)、[HttpClient.GetStreamAsync 方法](http://msdn.microsoft.com/en-us/library/hh551738%28v=vs.110%29.aspx)、[WindowsRuntimeStreamExtensions.AsStreamForWrite 方法](http://msdn.microsoft.com/en-us/library/hh582117%28v=vs.110%29.aspx)、[Stream.CopyToAsync 方法](http://msdn.microsoft.com/en-us/library/hh159084%28v=vs.110%29.aspx)。

# objective-c - 编译 iPad 应用程序时出现奇怪错误（ld：重复符号 _OBJC_CLASS_$）

> ID：10331115
> 
> 赞同：1
> 
> 时间：2012-04-26T09:54:54.903
> 
> 标签：objective-c, ios

当我编译我的项目时，我有这个错误：

```
ld: duplicate symbol _OBJC_CLASS_$_DNCloseButton in /Users/.../Library/Developer/Xcode/DerivedData/...Objects-normal/i386/DNCloseButton-7045D069F03DAA13.o for architecture i386
Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang++ failed with exit code 1 
```

我知道问题出在课堂上`DNCloseButton`，但我不知道如何解决？谢谢你的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T10:23:27.667

确保您只在头文件 (.h) 中声明了一次接口，并使用`#import`and not导入了该头文件`#include`。

有时 XCode 会稍微启动一下，并在链接器阶段将同一个文件链接两次。要解决这个问题：

*   从项目中删除文件（选择“删除引用”选项），然后再次添加。
*   用 shift-cmd-k 清理
*   建造

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T23:50:06.513

如果在您的编译源构建阶段包含两次源文件，则会发生这种情况。

要在 Xcode 4 中检查这一点：

*   从文件列表中选择您的项目。
*   从左栏中选择您的目标。
*   单击顶部栏上的构建阶段选项卡。
*   在搜索字段中，输入导致链接器错误的类的名称。在上述问题的情况下，它是 DNCloseButton（忽略前面的 _）。

如果该类的源文件在 Compile Sources 列表中出现两次，请删除其中一个条目。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T11:33:23.893

如果您不小心`#import`使用`.m`文件而不是`.h`文件，您也可能会收到此错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T09:59:26.960

在以下情况下可能会发生这种情况。

您已将相同的类实现放入两个不同的文件中；

您实际上只有一个此类的实现，但是您还在项目中链接了一个框架或库，其中包含一个与您的名称完全相同的类。

尝试在整个项目中找到您的班级，并确保您的项目中只有一份可用。

# eclipse - 发生错误，查看日志文件 Eclipse?

> ID：10331119
> 
> 赞同：1
> 
> 时间：2012-04-26T09:55:09.803
> 
> 标签：eclipse

> **可能重复：**
> [启动 Eclipse 时出现以下错误](https://stackoverflow.com/questions/2493415/i-am-getting-a-following-error-while-launching-my-eclipse)

最近一个带有 ADT 插件的 Eclipse 没有任何原因没有运行。当我尝试运行它时，它说发生了错误，请参阅日志文件。我搜索了几件事，但找不到任何解决方案。我怎样才能继续前进？

这是我的eclipse日志文件。

```
SESSION 2012-04-26 12:45:00.093 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_22
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86 -clean

!ENTRY org.eclipse.osgi 4 0 2012-04-26 12:45:00.765
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the       org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)`enter code here` 
```

# openoffice.org - 如何隐藏openoffice writer中的导航按钮

> ID：10331122
> 
> 赞同：3
> 
> 时间：2012-04-26T09:55:17.743
> 
> 标签：openoffice.org, uno

Openoffice writer 在垂直滚动条下方显示了一组导航按钮（向上、选择、向下）。

*   我希望删除它，因为我的应用是[kiosk software](http://en.wikipedia.org/wiki/Kiosk_software)。
*   我只想删除导航按钮，而不是滚动条。
*   我正在尝试使用[Java UNO bindings](http://www.openoffice.org/api/docs/java/ref/overview-summary.html)以编程方式删除/隐藏这些。但是，如果由于 UNO 的性质而有解决方案，则应该可以使用任何语言。
*   我正在使用 openoffice 3.3.0

![导航按钮](../Images/1961963e79dfa1cd066b989823f3e823.png)

我尝试过的事情：

*   视图设置：可以通过从通过 XTextDocument => CurrentController => XViewSettingsSupplier => XViewSettings 获得的[视图设置中](http://www.openoffice.org/api/docs/common/ref/com/sun/star/text/ViewSettings.html)设置属性（“ShowVertRuler”，false）来隐藏滚动条。导航按钮不存在类似的属性。有趣的是，隐藏滚动条也隐藏了导航按钮，这意味着它是一个小部件？

*   XUIElement 访问：我通过 XFrame 获取 XLayoutManager、遍历 XUIElement 列表并使用 XUIElement 的 ResourceURL 调用 XLayoutManager.hideElement() 来删除其他元素，例如工具栏。

*   XAccessible 访问：我找到了如何通过获取 XAccessible 引用来获取滚动条值的示例。看到[这个线程](http://www.oooforum.org/forum/viewtopic.phtml?t=90841)。然而，似乎只能使用 XAccessible 设置/获取模型值，而不影响可见性。

*   查看[UNO](http://www.openoffice.org/api/docs/common/ref/com/sun/star/module-ix.html)的文档并进行大量谷歌搜索。

就 API 而言，我只是在寻找正确方向的指针。我可以自己编写任何必要的代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T15:14:33.153

由于 Openoffice 是免费软件，您可以访问源代码并删除显示导航按钮的行，以创建没有此按钮的自定义版本的 Openoffice。

# java - 出现滚动条时 JScrollPane 调整包含 JPanel 的大小

> ID：10331129
> 
> 赞同：9
> 
> 时间：2012-04-26T09:55:42.580
> 
> 标签：java, swing, jpanel, jscrollpane

`JScrollPane`在我的 Java 应用程序中使用时有一个小问题。

我有一个`JScrollPane`包含一个`JPanel`. 这`JPanel`是使用可以是任何宽度的按钮（垂直排序）动态更新的。自动将`JPanel`其宽度调整为`JButton`内部最大的组件。

现在，当垂直滚动条出现时，它占用了 my 右侧的一些空间`JPanel`，这导致最大的按钮不会完全出现。除了显示整个按钮之外，我不想使用水平滚动条。

有没有办法`JPanel`在出现滚动条时调整我的大小，以便它很好地出现在我的按钮旁边？或者有没有其他方法可以让滚动条出现在我的旁边`JPanel`？

提前致谢！

**编辑**：这是我的问题的演示。当您将窗口大小调整为较小的高度时，右侧的一小部分按钮会被覆盖。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import java.awt.GridLayout;

/**
 * @author Dylan Kiss
 */

public class Demo {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    JFrame myFrame = new JFrame("Demo");
                    JPanel sideBar = new JPanel();
                    JPanel centerPanel = new JPanel();
                    centerPanel.add(new JLabel("This is the center panel."));

                    JPanel buttonContainer = new JPanel();
                    JButton myButton = null;

                    for (int i = 0; i < 20; i++) {
                        buttonContainer.setLayout(new GridLayout(20, 1, 0, 0));
                        myButton = new JButton("This is my button nr. " + i);
                        buttonContainer.add(myButton);
                    }

                    sideBar.setLayout(new BorderLayout(0, 0));

                    JScrollPane scrollPane = new JScrollPane(buttonContainer);

                    sideBar.add(scrollPane);

                    myFrame.getContentPane().add(sideBar, BorderLayout.WEST);
                    myFrame.getContentPane().add(centerPanel, BorderLayout.CENTER);

                    myFrame.setLocationByPlatform(true);
                    myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    myFrame.pack();
                    myFrame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T11:25:54.943

这是一个简单但不漂亮的解决方案：

```
scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS); 
```

编辑：我认为在你的情况下这可能不起作用。这是一个更好的解决方案，尽管它有很多样板：

```
private class ButtonContainerHost extends JPanel implements Scrollable {
    private static final long serialVersionUID = 1L;

    private final JPanel buttonContainer;

    public ButtonContainerHost(JPanel buttonContainer) {
        super(new BorderLayout());
        this.buttonContainer = buttonContainer;
        add(buttonContainer);
    }

    @Override
    public Dimension getPreferredScrollableViewportSize() {
        Dimension preferredSize = buttonContainer.getPreferredSize();
        if (getParent() instanceof JViewport) {
            preferredSize.width += ((JScrollPane) getParent().getParent()).getVerticalScrollBar()
                    .getPreferredSize().width;
        }
        return preferredSize;
    }

    @Override
    public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
        return orientation == SwingConstants.HORIZONTAL ? Math.max(visibleRect.width * 9 / 10, 1)
                : Math.max(visibleRect.height * 9 / 10, 1);
    }

    @Override
    public boolean getScrollableTracksViewportHeight() {
        if (getParent() instanceof JViewport) {
            JViewport viewport = (JViewport) getParent();
            return getPreferredSize().height < viewport.getHeight();
        }
        return false;
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return true;
    }

    @Override
    public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
        return orientation == SwingConstants.HORIZONTAL ? Math.max(visibleRect.width / 10, 1)
                : Math.max(visibleRect.height / 10, 1);
    }
} 
```

它实现了 Scrollable 以获得对滚动的完全控制，通过跟踪视口高度来确保按钮在空间可用时展开，并始终将垂直滚动条的宽度添加到首选宽度。当垂直滚动条可见时它可能会扩展，但无论如何看起来很糟糕。像这样使用它：

```
scrollPane = new JScrollPane(new ButtonContainerHost(buttonContainer)); 
```

在我看来，由于 javax.swing.ScrollPaneLayout 中可能存在错误，因此需要这种解决方法：

```
if (canScroll && (viewSize.height > extentSize.height)) {
    prefWidth += vsb.getPreferredSize().width;
} 
```

这里extentSize 设置为视口的首选大小，viewSize 设置为viewport.getViewSize()。这似乎不正确，AFAIK 视口内的视图大小应始终等于首选大小。在我看来，视图大小应该与视口的实际大小而不是其首选大小进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T13:01:06.977

一个简单的解决方法，以满足您的要求

```
Is there a way to resize my JPanel when a scrollbar appears, so it 
appears nicely next to my buttons? 
```

是[EmptyBorder](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)的使用，这会让你实现你想要的，应该发生的，如下图所示：

![滚动条设置](../Images/27dc302a9ad11b9ff9387b2b00b0ab28.png)

我刚刚在这行之后添加了下面写的这行`JPanel buttonContainer = new JPanel();`

**加线**

```
buttonContainer.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20)); 
```

这是您添加的代码：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import java.awt.GridLayout;

/**
 * @author Dylan Kiss
 */

public class Demo 
{
    public static void main(String[] args) 
    {
        EventQueue.invokeLater(new Runnable() 
        {
            @Override
            public void run() 
            {
                try 
                {
                    JFrame myFrame = new JFrame("Demo");
                    JPanel sideBar = new JPanel();
                    JPanel centerPanel = new JPanel();
                    centerPanel.add(new JLabel("This is the center panel."));

                    JPanel buttonContainer = new JPanel();
                    buttonContainer.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
                    JButton myButton = null;

                    for (int i = 0; i < 20; i++) 
                    {
                        buttonContainer.setLayout(new GridLayout(20, 1, 0, 0));
                        myButton = new JButton("This is my button nr. " + i);
                        buttonContainer.add(myButton);
                    }

                    sideBar.setLayout(new BorderLayout(0, 0));

                    JScrollPane scrollPane = new JScrollPane(buttonContainer);      

                    sideBar.add(scrollPane);

                    myFrame.getContentPane().add(sideBar, BorderLayout.WEST);
                    myFrame.getContentPane().add(centerPanel, BorderLayout.CENTER);

                    myFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                    myFrame.pack();
                    myFrame.setLocationByPlatform(true);
                    myFrame.setVisible(true);
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:38:08.933

当 JPanel 需要调整大小时，您可以通过调用 setPreferredSize 来调整 JPanel 的大小。

```
buttonContainer.setPreferredSize(Dimension d); 
```

# java - 如何在java中将数据对象的字符串数组转换为另一个数据对象的数组列表

> ID：10331130
> 
> 赞同：-3
> 
> 时间：2012-04-26T09:55:47.753
> 
> 标签：java, arrays, arraylist

我有车辆数据对象返回字符串数组。我想转换或转换为 Arraylist BuyingDo 数据对象。我有 ArrayList objectList

我得到这样的价值

```
VehicleDo list[]=data.getList() 
```

我正在这样转换

```
objectList=(ArrayList<BuyingDo)list 
```

但它不工作任何人都可以告诉如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:02:00.783

你的问题有点……嗯……不清楚。

我认为您的意思是：

```
List<VehicleDO> realList = Arrays.asList(list); 
```

或这个：

```
List<BuyingDO> realList = new ArrayList<BuyingDO>(list.length);
for (VehicleDO vdo : list){
    realList.add((BuyingDO)vdo);
} 
```

当然，假设 VehicleDO 可以转换为 BuyingDO。

类似的东西？

# c# - 在隐藏的 Word2010 中创建图表时，Excel 会打开。如何禁用此功能？

> ID：10331132
> 
> 赞同：4
> 
> 时间：2012-04-26T09:56:07.407
> 
> 标签：c#, excel, ms-word

简而言之：

这一行：

```
doc.InlineShapes.AddOLEObject("Excel.Chart.8"); // doc is a Microsoft.Office.Interop.Word.Document object 
```

打开 Excel。如何禁用此功能？

* * *

更多细节：

我正在尝试使用 c# 中的 Word2010 脚本从模板创建 docx 文档。我以这种方式打开文档：

```
Word.Document doc = app.Documents.Open(@"xxxx.docx",Visible:false); 
```

在脚本期间，Word2010 不会出现，但 Excel2010 会出现，当我在 word 文档中创建图表时（“Excel.Chart.8”）

我在显示器上看到了整个图表脚本过程，这不是我想要的。

有没有办法在这个过程中隐藏 Excel2010（图表工具）？

编辑：创建 excel 图表的示例：

```
Microsoft.Office.Interop.Word.Application app = new Microsoft.Office.Interop.Word.Application();
Word.Document doc = app.Documents.Open(@"xxxx.docx",Visible:false);
string classtype = "Excel.Chart.8";
Bookmark shapeBookMark = doc.Bookmarks.get_Item("mybookmark");
Word.InlineShape wrdInlineShape = doc.InlineShapes.AddOLEObject(classtype, Range: shapeBookMark.Range);
if (wrdInlineShape.OLEFormat.ProgID == classtype)
      {
         object verb = Word.WdOLEVerb.wdOLEVerbHide;
         wrdInlineShape.OLEFormat.DoVerb(ref verb);
         Excel.Workbook obook = (Excel.Workbook)wrdInlineShape.OLEFormat.Object;
         Excel.Worksheet sheet = (Excel.Worksheet)obook.Worksheets["Sheet1"];
         //then the access of a cell goes like this:
         ((Microsoft.Office.Interop.Excel.Range)sheet.Cells[1, 1]).Value = "data";
      } 
```

注意必须使用 Visible:false 参数，否则 excel 和 word 都会出现在**较长的脚本过程中**。在一个简短的，它不会出现，但我需要做长脚本过程（创建，填充和格式化 16 个图表/docx）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:27:03.097

尽管我使用的是 Office 2007 而不是 2010，但我可以在我的机器上重新创建它。到目前为止，我设法找到的唯一半解决方案是获取 Excel 的活动实例并将其切换为不可见。Excel 会闪烁一秒钟然后消失，但至少在您执行脚本/图表时它不会保持可见。

因此，将其插入到您的代码中：

```
Word.InlineShape wrdInlineShape = doc.InlineShapes.AddOLEObject(classtype, Range: shapeBookMark.Range);
Excel.Application xlApp = (Excel.Application)Marshal.GetActiveObject("Excel.Application");
xlApp.Visible = false;

if (wrdInlineShape.OLEFormat.ProgID == classtype)
{
    // etc... 
```

# quicktime - 使用 QTKit 获取变形视频的预缩放大小

> ID：10331136
> 
> 赞同：0
> 
> 时间：2012-04-26T09:56:26.650
> 
> 标签：quicktime, qtkit

我有一个 QuickTime .mov (H.264) 的视频文件 - 如果我使用 QuickTime Player 10 打开并使用 Movie Inspector 检查，我可以看到预缩放大小为 1440x1080，显示大小为 1920x1080。

我使用 QTKit 和以下属性打开视频：`QTMovieOpenAsyncOKAttribute`, `QTMovieIsActiveAttribute`, `QTMovieResolveDataRefsAttribute`, `QTMovieDontInteractWithUserAttribute`.

两者都`QTMovieCurrentSizeAttribute`提供`QTMovieNaturalSizeAttribute`1920x1080。

如果我用 QuickTime 7 打开电影，我可以使用 GetMovieBox() 找到大小为 1920x1080 的帧，并且可以在 1440x1080 处访问帧。如何使用 QTKit 获取 1440x1080 分辨率信息？

我已经尝试使用这个问题中给出的仿射变换：[QTMovieCurrentSizeAttribute 和 QTMovieSizeDidChangeNotification 替换](https://stackoverflow.com/questions/6182760/qtmoviecurrentsizeattribute-and-qtmoviesizedidchangenotification-replacements)，但它给出了一个身份变换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:59:44.367

您需要获取实际视频轨道的尺寸，而不是电影。

```
QTTrack* videoTrack = nil;

for (QTTrack* track in [movie tracks])
{
    if ([track attributeForKey:QTTrackMediaTypeAttribute] == QTMediaTypeVideo)
    {
        videoTrack = track;
        break;
    }
}

NSSize dimensions = [(NSValue*)[videoTrack attributeForKey:QTTrackDimensionsAttribute] sizeValue]; 
```

通常不需要这样做，因为视频轨道的尺寸和尺寸`QTMovieNaturalSizeAttribute`是相等的。但是，对于变形视频，电影自然尺寸属性告诉我们视频应该如何显示，当轨道尺寸表示实际视频帧的大小（较小）时。

`QTMovieCurrentSizeAttribute`不推荐使用奇怪的添加，它根本与数据无关。

# objective-c - 在可可应用程序中解析 xml 文件

> ID：10331146
> 
> 赞同：0
> 
> 时间：2012-04-26T09:57:06.657
> 
> 标签：objective-c, cocoa, xml-parsing

我有一个 xml 文件，它看起来像：

```
<?xml version="1.0" ?>
<Response val="true">
    <Version vers="1.2"/>
    <Release>
         This release allows start
    </Release>
</Response> 
```

在我的可可应用程序中，我想在“=”之后和“发布标志”之间解析信息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:58:41.190

这是对 Objective-C XML 解析器的精彩回顾：

[如何为您的 iPhone 项目选择最佳 XML 解析器](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

对于同样简单的任务，我在选择 TouchXML 之前考虑了 NSXMLParser。

# apache - htaccess 删除扩展

> ID：10331147
> 
> 赞同：1
> 
> 时间：2012-04-26T09:57:09.170
> 
> 标签：apache, .htaccess

我希望将所有请求`abcxyzpqr.do`发送到`abcxyzpqr` 即所有带有扩展名的请求都应该是相同的名称但没有扩展名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:02:22.773

试试这个：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

将 html 替换为您的文件扩展名，例如：php、htm、asp

它应该按照您想要的方式工作。

学分/更多信息： [http ://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/)

# java - StringBuffer 对象比较

> ID：10331148
> 
> 赞同：0
> 
> 时间：2012-04-26T09:57:23.260
> 
> 标签：java, jdk1.6

我创建了两个 StringBuffer 如下

```
StringBuffer buffer1 = new StringBuffer("Text");
StringBuffer buffer2 = new StringBuffer(buffer1); 
```

如果将那些 StringBuffer 与 equals 方法进行比较，那么它返回 false？

```
if (buffer1.equals(buffer2))
    System.out.println("true");
else
    System.out.println("false"); 
```

equals() 比较字符串的内容。所以，我不知道这里返回 false 的原因是什么......

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T10:00:32.197

`StringBuffer.equals()`不比较字符串内容。你必须做`toString().equals()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T10:02:19.353

你应该使用`toString()`.

```
if (buffer1.toString()
          .equals(buffer2.toString()))
      System.out.println("true");
else
      System.out.println("false"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T10:04:54.680

您正在比较对象而不是文本。buffer1 与 buffer2 不同

阅读equals方法的JDK参考

equals 方法在非空对象引用上实现等价关系：

它是自反的：对于任何非空引用值 x，x.equals(x) 应该返回 true。它是对称的：对于任何非空引用值 x 和 y，当且仅当 y.equals(x) 返回 true 时，x.equals(y) 才应该返回 true。它是可传递的：对于任何非空引用值 x、y 和 z，如果 x.equals(y) 返回 true 并且 y.equals(z) 返回 true，则 x.equals(z) 应该返回 true。它是一致的：对于任何非空引用值 x 和 y，x.equals(y) 的多次调用始终返回 true 或始终返回 false，前提是没有修改对象上 equals 比较中使用的信息。对于任何非空引用值 x，x.equals(null) 应该返回 false。Object 类的 equals 方法实现了对象上最有区别的可能等价关系；也就是说，对于任何非空引用值 x 和 y，

请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

# sql - SQL Server 2008 RC2 智能感知不工作

> ID：10331150
> 
> 赞同：0
> 
> 时间：2012-04-26T09:57:25.427
> 
> 标签：sql, sql-server, intellisense

我已经尝试了一切。我检查了它是否已启用，我安装了修补程序（我已经有了它），我刚刚进行了修复。我仍然没有任何智慧。

我还能检查什么？这真让我抓狂！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:00:39.820

检查它可能不起作用的以下原因：

1 查询窗口连接到下层服务器（例如 SQL Server 2005），其中 IntelliSense 不起作用

2 也许您需要根据[此处安装 SQL 2008 R2 Service Pack 1](https://stackoverflow.com/questions/552458/why-is-sql-server-2008-management-studio-intellisense-not-working)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:19:37.830

您可以尝试在 Edit->IntelliSense 菜单中刷新本地 IntelliSense 缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:05:21.537

我做了一个完全重新安装（不是修复），它现在可以工作了。这可能是一个损坏的安装。希望这可以节省一些时间！

# java - 有没有办法从命令行配置 Maven POM 的版本？

> ID：10331153
> 
> 赞同：7
> 
> 时间：2012-04-26T09:57:50.317
> 
> 标签：java, maven, continuous-integration, maven-3

有没有办法在不编辑 POM 的情况下更改版本号？

```
<groupId>org.example</groupId>
<artifactId>example</artifactId>
<version>1.0.0</version> 
```

我们有一个 CI 系统，我们想要发布夜间构建，但没有使用`-SNAPSHOT` Maven 的解决方案，所以如果`1.0.0`是当前版本，我们只想拥有`CI-NIGHTLY-BIULD-20120426`.

我建议使用类似的东西可以做到这一点`mvn deploy -Dversion=CI-NIGHTLY-BIULD-20120426`，但显然不是。不好的解决方案是让 CI 服务器`pom.xml`每次都编辑，但我认为这很不方便。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T10:24:20.723

我建议使用分类器。

```
<groupId>foo</groupId>
<artifactId>bar</artifactId>
<version>1.0</version>

<properties>
    <!-- default classifier is empty -->
    <my.project.classifier></my.project.classifier>
</properties>

<build>
...
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.1</version>
    <configuration>
      <classifier>${my.project.classifier}</classifier>
    </configuration>
    <executions>...</executions>
  </plugin>
</plugins>
</build> 
```

和

```
mvn package -Dmy.project.classifier=NIGHTLY-2012-04-26_02-30 
```

* * *

Maven[文档](http://maven.apache.org/pom.html)说分类器：

> 分类器：你可能偶尔会在坐标上找到第五个元素，那就是分类器。我们稍后会访问分类器，但现在知道这些类型的项目显示为 groupId:artifactId:packaging:classifier:version 就足够了。

和

> 分类器允许区分从相同 POM 构建但内容不同的工件。它是一些可选且任意的字符串——如果存在的话——被附加到工件名称之后，紧跟在版本号之后。作为这个元素的动机，例如，考虑一个项目，它提供了一个针对 JRE 1.5 的工件，但同时也提供了一个仍然支持 JRE 1.4 的工件。第一个工件可以配备分类器 jdk15，第二个工件配备 jdk14，以便客户端可以选择使用哪一个。
> 
> 分类器的另一个常见用例是需要将辅助工件附加到项目的主要工件。如果您浏览 Maven 中央存储库，您会注意到分类器源和 javadoc 用于部署项目源代码和 API 文档以及打包的类文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T19:09:36.730

我认为您也可以使用[版本](http://mojo.codehaus.org/versions-maven-plugin/)Maven 插件。我发现它对这样的事情非常有用。

您可以分两步完成：

1.  设置必要的版本：`mvn versions:set -DnewVersion=CI-NIGHTLY-BIULD-20120426`
2.  部署：`mvn deploy`
3.  如果您需要恢复更改，请使用`mvn versions:revert`（如 Mark 建议的那样）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:36:43.770

我强烈推荐阅读Axel Fontaine 的[Maven Releases on Steroids](http://www.axelfontaine.com/2011/01/maven-releases-on-steroids-adios.html)（[第 2](http://www.axelfontaine.com/2011/01/maven-releases-on-steroids-2-preparing.html)部分，[第 3 部分](http://www.axelfontaine.com/2011/02/maven-releases-on-steroids-3-rounding.html)）。它很棒，我很高兴使用它。

它不仅详细说明了如何按照您的要求进行操作，而且还包含了如何将构建版本与 CI 服务器绑定的好建议。

简而言之，以下是要点：

1.  Maven 发布很慢，需要更快地完成
2.  你参数化你的项目版本，比如

    ```
    <version>${VERSION_NUMBER}</version>
    ...
    <properties>
    ...
        <VERSION_NUMBER>1.0-SNAPSHOT</VERSION_NUMBER>
    ...
    </properties> 
    ```

3.  本地构建获得该版本：`1.0-SNAPSHOT`
4.  发布构建**仅从**您的 CI 服务器完成
5.  在您使用的 Jenkins/Hudson 项目配置中

    ```
    clean deploy scm:tag -DVERSION_NUMBER=${BUILD_NUMBER} 
    ```

这样你就可以在每个 Jenkins 构建中获得一个新版本，而不仅仅是每晚。

您可以更改配置以使用

```
clean deploy scm:tag -DVERSION_NUMBER=1.0.0-CI-NIGHTLY-BIULD-${BUILD_ID} 
```

你会得到类似的版本`1.0.0-CI-NIGHTLY-BIULD-2012-04-26_12-20-24`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T10:04:03.037

您可以将版本号参数化为

```
<groupId>foo</groupId>
<artifactId>bar</artifactId>
<version>${my.project.version}</version>

<properties>
    <my.project.version>1.0</my.project.version>
</properties> 
```

并使用命令行驱动版本号

```
mvn package -Dmy.project.version=NIGHTLY 
```

虽然这是可能的，但 Maven 3 不鼓励这样做。

# lua - 我如何在 lua 中模拟带符号的 32 位整数

> ID：10331155
> 
> 赞同：0
> 
> 时间：2012-04-26T09:57:58.777
> 
> 标签：lua, bitwise-operators

在 Java 中，当我执行左移操作时，由于整数/长溢出，我得到一个负数结果：0xAAAAAAAA << 7 给我 -183251938048

但是，在 Lua 中，因为一切都是 52 位浮点数的 Lua 数字；我无法在左移时触发溢出：bit_lshift(0xAAAAAAAAA,7) 给我 1431655680

如何在 Lua 中模拟 32 位有符号整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:35:02.433

你编写一些 C 函数来处理这个问题，然后将它们导出到 Lua。

虽然一般来说，Lua 代码不应该接触这么低级的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:56:07.627

我希望我不会因为这样说而被视为拖钓，但从 Lua 模拟 Java 的最佳方法是使用 Lua 中的 Java。

如果您需要模拟 Java，很可能您的 Lua 已经嵌入其中。只需将 Java 的二进制操作暴露给 Lua 程序，它就可以使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:41:45.153

您正在寻找 Lua 中的位操作库。一个这样的库[`bitop`](http://bitop.luajit.org/)来自 LuaJIT 的作者，它直接包含它而无需安装。您也可以在标准 Lua 中安装它。

另一个库是[`bit32`](http://www.lua.org/manual/5.2/manual.html#6.7)库，它包含在 Lua 5.2 中。

这两个库都允许您操作 32 位数字。例如`bitop`：

```
local bit = require 'bit
print(bit.lshift(0xAAAAAAAA, 7)) --> 1431655680 
```

我不知道你是如何得到负数的，因为 1431655680 是我在 C 中通过 (0xAAAAAAAAA<<7)&0xFFFFFFFF 得到的（并且也在“编程计算器”中这样做）。

# java - JTable 服务器端排序

> ID：10331156
> 
> 赞同：1
> 
> 时间：2012-04-26T09:58:01.690
> 
> 标签：java, swing

我有一个客户端/服务器应用程序，我的 JTables 是分页的，它只显示一个数据范围。现在我想处理排序但服务器端。如何自定义默认排序实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:00:35.430

我找到了一个可行的解决方案，但我确信它不是最好的！:)

```
...
final MyTableModel myModel = new MyTableModel();
final MySorter mySorter = new MySorter(myModel);
mySorter.addRowSorterListener(new RowSorterListener() {

  @Override
  public void sorterChanged(RowSorterEvent e) {
    // server side sorting
    sortDataByColumn(mySorter.getColumnToSort());
  }
});

JTable table = new JTable();
table.setModel(myModel);
table.setRowSorter(mySorter);
...

class MySorter extends TableRowSorter<TableModel> {      

  private String columnToSort;

  public MySorter(AbstractTableModel model) {
    super(model);
  }

  @Override
  public void sort() {
    // do nothing! because server side sorting
  }

  @Override
  protected void fireSortOrderChanged() {
    // build a string like [+-]column_identifier.
    // where + is for ASC and - for DESC ordering
    final SortKey k = getSortKeys().get(0);
    final String colName = getModel().getTableColumnModel()
      .getColumn(k.getColumn()).getIdentifier().toString();

    if (colName != null && !colName.isEmpty()) {
      columnToSort = (k.getSortOrder() == SortOrder.ASCENDING ? '+' : '-') + colName;
    } else {
      columnToSort = null;
    }
    super.fireSortOrderChanged();
  }

  public String getColumnToSort() {
    return columnToSort;
  }
} 
```

# android - 如何开发在包含和不包含 GMS 的 Android 设备上运行的应用程序？

> ID：10331161
> 
> 赞同：1
> 
> 时间：2012-04-26T09:58:22.587
> 
> 标签：android, maps, google-play-services

我想开发一个包含地图功能并在 Android 操作系统上运行的应用程序。我的问题是这个应用程序如何在没有谷歌地图库的 Android 设备上运行？

例如，有一个包含一些片段的活动，其中一个片段包括地图特征。在这种情况下，活动“必须”扩展地图库中的 MapActivity。这在有 GMS 的设备上没有问题，但是没有 GMS 的设备呢？

首先，我在 AndroidManifest.xml 中为地图库添加一个属性 'required="false"'

```
<uses-library android:name="com.google.android.maps" 
    android:required="false"/> 
```

如果设备中没有地图库，则活动不使用地图片段。但是activity扩展了MapActivity，并且MapActivity在地图库中。当设备有地图库时，此活动如何扩展 MapActivity 并在设备没有时扩展 Activity ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:43:18.397

您可以通过使用两个不同的类来实现这一点，一个扩展 MapFragment，一个扩展 Fragment 或 Activity，然后检查 Google Play 服务的可用性。

如果您打算使用 Google Maps V2（并且您应该因为 V1 将在 3 月停止工作），有一种方法可以检查 Google Play 服务是否可用[http://developer.android.com/google/play-services/setup。 html](http://developer.android.com/google/play-services/setup.html)

一旦确定 Google Play 服务是否可用，您可以实例化扩展 MapFragment 的活动或扩展 Activity 的活动。

当然，通用功能将在类之间共享，在这种情况下，您将不得不通过组合来完成，因为继承不可用。

# visual-studio-2010 - 调试现有的共享点解决方案

> ID：10331163
> 
> 赞同：2
> 
> 时间：2012-04-26T09:58:27.790
> 
> 标签：visual-studio-2010, debugging, iis, sharepoint-2010, build

我最近将一个共享点解决方案从 TFS 映射到本地目录并成功“获得”了最新版本。

它没有构建，但这是因为解决方案中包含的几个项目的属性中没有站点 URL。因此，使用中央管理员，我创建了一个新的 Web 应用程序（端口 36352）。U 然后将 url 和端口添加到站点 URL 中，它现在可以正常构建。

但是，当我使用调试器运行时，出现以下两个错误：

* * *

错误 2 部署步骤“回收 IIS 应用程序池”中出现错误：无法连接到 SharePoint 站点：: **36352/">http://** :36352/（出于安全原因已删除 url）。请确保这是一个有效的 URL，并且SharePoint 网站正在本地计算机上运行。如果您将此项目移动到新计算机上，或者如果 SharePoint 网站的 URL 在您创建项目后发生了更改，请更新项目的网站 URL 属性。

和

错误 3 程序“Path.PowerShell.exe”（出于安全原因已删除路径）不包含适用于入口点的静态“Main”方法

* * *

似乎第一个错误与我将它“连接”到我创建的新 Web 应用程序的方式有关 - 我做这部分对吗？

第二个错误似乎与调试器应该执行的入口点有关，但这是一个共享点站点 - 所以我只想运行该站点（VS 是否没有以某种方式将其识别为共享点？）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T22:49:19.710

当我在另一台服务器上有解决方案时，我遇到了这个异常。确保您的解决方案与 SharePoint Web 应用程序位于同一台服务器上。运行解决方案时，Visual Studio 会打包解决方案并尝试将其部署到您在属性中指定的 URL。如果您的项目是一个场解决方案，例如可视化 Web 部件，那么请确保您拥有部署权限。

# jsf - 如何使用 MyFaces 1.1.5 在运行时创建 HtmlSelectOneMenu

> ID：10331166
> 
> 赞同：1
> 
> 时间：2012-04-26T09:58:42.810
> 
> 标签：jsf, binding, runtime, myfaces, selectonemenu

我使用 myfaces-api-1.1.5.jar。（可悲的是，不能使用除此之外的任何东西！）

我想在运行时（即动态）从我的支持 bean testBB 创建以下内容。

```
<t:selectOneMenu 
    value="#{testBB.someVO}"
    converter="someVOConverter"
    valueChangeListener="#{testBB.vcl}"
    onchange="submit();" style="width:170px">

    <f:selectItems value="#{testBB.selectItemList}"/>
</t:selectOneMenu> 
```

到目前为止，我的代码如下：

```
private UIComponent createComponent(
    String id, String componentType, UIComponent parent) {

    if (componentType == null) {
        throw new NullPointerException("argument 'componentType' is null");
    }

    if (parent == null) {
        throw new NullPointerException("argument 'parent' is null");
    }

    UIComponent newComponent = this.
        getApplication().createComponent(componentType);
    newComponent.setId(id);
    newComponent.setParent(parent);
    parent.getChildren().add(newComponent);
    logger.debug("new Component created.. ");

    return newComponent;
}

private HtmlSelectOneMenu createSelectOneMenu(
    String id, UIComponent parent, String expr) {
    HtmlSelectOneMenu selectOneMenu = 
        (HtmlSelectOneMenu) this.createComponent(id, 
        HtmlSelectOneMenu.COMPONENT_TYPE, parent);
    UISelectItems items = (UISelectItems)this.
        createComponent("selectItem", UISelectItems.COMPONENT_TYPE, selectOneMenu);
    ValueBinding valueBinding = this.getApplication().createValueBinding(expr);
    items.setValueBinding(id, valueBinding);

    return selectOneMenu;
} 
```

我称之为：

```
this.createSelectOneMenu("someId", "somePanelGrid", "#{testBB.selectItemList}"); 
```

我尝试了 Google 并搜索了 StackOverflow，但找不到特定于 MyFaces 和 JSF 1.1 的任何内容。

所有帮助将不胜感激。

# android - 创建syncml客户端和服务器

> ID：10331173
> 
> 赞同：0
> 
> 时间：2012-04-26T09:58:58.937
> 
> 标签：android, c, syncml

我想为客户端和服务器实现 SyncML/OMA DS 协议，以从设备同步数据。我不知道如何为 Android 和低端手机的客户端和服务器实现 SyncML。我在网上搜索过，但只有 SyncML 的 PDF 文件，有些网站说要下载 SyncML 服务器的软件。

我想在没有任何软件的情况下制作 SyncML 服务器和客户端。是否有任何适用于 SyncML 的 API？我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:47:20.053

不确定这是否有帮助，但是如果您能够使其在 android 上运行，那么有一个可用的库可以满足您的需求。 [https://gitorious.org/libsynthesis](https://gitorious.org/libsynthesis)

# jquery - 如何将空格替换为 a 中的 通过使用 jquery

> ID：10331174
> 
> 赞同：2
> 
> 时间：2012-04-26T09:59:03.197
> 
> 标签：jquery, jquery-ui, whitespace

如何将空格替换为**;** 使用 jquery 在有序列表中？

```
<ol id="selectable" class="ui-selectable">
  <li class="ui-widget-content ui-selectee">a</li>
  <li class="ui-widget-content ui-selectee" style=""> </li>
  <li class="ui-widget-content ui-selectee">t</li>
  <li class="ui-widget-content ui-selectee">e</li>
  <li class="ui-widget-content ui-selectee">s</li>
  <li class="ui-widget-content ui-selectee">t</li>
</ol> 
```

*行：*

```
<li class="ui-widget-content ui-selectee" style=""> </li> 
```

应该像

```
<li class="ui-widget-content ui-selectee" style="">&nbsp;</li>     (or $nbsp;$nbsp;) 
```

有人知道我该如何解决这个问题： .ui-widget-content if whitespace than $nbsp ... ？

亲切的提醒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:01:35.073

```
 $('#selectable li').each(function() {
      $(this).html($(this).text().replace(/\s/g, '&nbsp;'));
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:01:57.527

```
$("li.ui-widget-content").contents().each(function () {
  if (this.nodeType == 3) {  // 3 == TEXT_NODE
    $(this).text( $(this).text().replace(/ /g, String.fromCharCode(160)) );
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:05:02.903

您首先需要通过 trmming 数据和检查长度来检查文本值是否为空

如果长度为零，那么您将提供 html 内容为 `&nbsp;`

```
$('li.ui-widget-content').each(function() 
{   
    if(($.trim($(this).text()).length==0)
       $(this).html("&nbsp;");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:13:01.753

```
$(document).ready(function(){

    $('#selectable > li').each(function(){
        if ($(this).text()==" ") { //you're looking for 'space'
            this.innerHTML="&nbsp;";
        }
    });

}); 
```

# c# - 如何获得枚举值变化的事件？

> ID：10331178
> 
> 赞同：3
> 
> 时间：2012-04-26T09:59:14.340
> 
> 标签：c#, silverlight

当我将它用作自定义控件的属性时，我创建了 1 个枚举，我想触发一个事件以更改枚举属性。请帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T10:04:17.953

一个**伪代码**

定义你的委托

```
public void delegate EnumPropertyChangedDelegate(object sender, Enum newValue); 
```

定义事件

```
public event EnumPropertyChangedDelegate  EnumPropertyChanged; 
```

在您的财产中

```
private MyEnum myEnum = .... some value
public MyEnum EnumProperty
{
     get {return myEnum;} 

     set {
         if(value != myEnum)
         {
             myEnum = value;
             if(EnumPropertyChanged!=null)
                 EnumPropertyChanged(this, myEnum);
         }
     }   

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T10:07:35.407

使用 setter 调用函数或调用事件委托。

```
 public enum PersonName
  {
      Eric,
      George,
      David,
      Frank
  }

  private PersonName myPersonName

  public PersonName MyPersonName
  {
      get { return myPersonName; }
      set
      {
          myPersonName = value;
          //simply call what you want done
          PersonNamePropertyChanged();
      }
  } 
```

在此处查看更多信息[http://msdn.microsoft.com/en-us/library/ms743695.aspx](http://msdn.microsoft.com/en-us/library/ms743695.aspx) 使用 INotifyPropertyChanged 完成

# android - Rss 解析问题 (XML)

> ID：10331179
> 
> 赞同：0
> 
> 时间：2012-04-26T09:59:25.130
> 
> 标签：android

这是我要从中提取数据的 RSS、XML 文件。我已经用 SAX 解析器完成了我的全部工作，一切正常。但我解析了整个 RSS 文件并获取了每个元素数据，例如 .

但我的问题是我正在获取整个文件元素数据，但我只想要其中的元素。

```
<rss version="2.0">
<channel>
<title>RSS Feed</title>
<link>http://www.xyz.com</link>
<description>Calendar RSS Feeds</description>
<language>en-us</language>
<ttl>60</ttl>
<item>
<title>
title 1
</title>
<description>description 1</description>
<link>
http://www.xyz.com
</link>
<guid isPermaLink="false">6027@http://www.xyz.com</guid>
</item>
<item>
<title>
title 2
</title>
<description>description 2</description>
<link>
http://www.xyz.com
</link>
<guid isPermaLink="false">5554@http://www.xyz.com</guid>
</item>
<item>
</channel>
</rss> 
```

我已经尝试了所有的组合来设置这个我会在这里展示我的代码我做了 startElement 和 endElement 方法： -

```
public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub

        current = true;

        if (localName.equals("channel"))
        {
            itemList = new ItemList();
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        // TODO Auto-generated method stub
        current = false;

        if(localName.equals("title"))
        {
            itemList.setTitle(currentValue);
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        // TODO Auto-generated method stub

        if(current)
        {
            currentValue = new String(ch, start, length);
            current=false;
        }
    } 
```

任何人请建议我如何只检索仅在元素下的元素。

我也试过这个，但这给了我错误

```
public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub

        current = true;

        if (localName.equals("channel"))
        {
            if (localName.equals("item"))
            {
            itemList = new ItemList();
            }
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:07:35.187

试试这个，希望对你有帮助......

```
url = new URL("http://www.abcd.com/rss.xml");//.......
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    if(conn.getResponseCode() == HttpURLConnection.HTTP_OK){
          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = dbf.newDocumentBuilder();
          Document doc;
          doc = db.parse(url.openStream());
          doc.getDocumentElement().normalize();
          NodeList itemLst = doc.getElementsByTagName("item");

          Array.Description = new String[itemLst.getLength()];//........
          Array.Title = new String[itemLst.getLength()];
          Array.image = new String[itemLst.getLength()];
          Array.Date = new String[itemLst.getLength()];

          for(int i=0; i < itemLst.getLength(); i++){

                Node item = itemLst.item(i);
                if(item.getNodeType() == Node.ELEMENT_NODE){
                      Element ielem = (Element)item;
                      NodeList title = ielem.getElementsByTagName("title");
                      NodeList date = ielem.getElementsByTagName("pubDate");

                      NodeList description = ielem.getElementsByTagName("description");

                    ////.........
                      Array.Title[i] = title.item(0).getChildNodes().item(0).getNodeValue();
                      Array.Description[i] = description.item(0).getChildNodes().item(0).getNodeValue();
                      Array.Date[i] = date.item(0).getChildNodes().item(0).getNodeValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:22:32.683

```
public class headlinesparser {

public static void parse(){
URL url;
try {
    url = new URL("http://www.abcd.com/taxonomy/term/19/rss.xml");//.......
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    if(conn.getResponseCode() == HttpURLConnection.HTTP_OK){
          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = dbf.newDocumentBuilder();
          Document doc;
          doc = db.parse(url.openStream());
          doc.getDocumentElement().normalize();
          NodeList itemLst = doc.getElementsByTagName("item");

          Headlines.Description = new String[itemLst.getLength()];//........
          Headlines.Title = new String[itemLst.getLength()];
          Headlines.image = new String[itemLst.getLength()];
          Headlines.Date = new String[itemLst.getLength()];

          for(int i=0; i < itemLst.getLength(); i++){

                Node item = itemLst.item(i);
                if(item.getNodeType() == Node.ELEMENT_NODE){
                      Element ielem = (Element)item;
                      NodeList title = ielem.getElementsByTagName("title");
                      NodeList date = ielem.getElementsByTagName("pubDate");

                      NodeList description = ielem.getElementsByTagName("description");

                    ////.........
                      Headlines.Title[i] = title.item(0).getChildNodes().item(0).getNodeValue();
                      Headlines.Description[i] = description.item(0).getChildNodes().item(0).getNodeValue();
                      Headlines.Date[i] = date.item(0).getChildNodes().item(0).getNodeValue();

                    if (Headlines.Description[i].contains("<img ")){

                    String img  = Headlines.Description[i].substring(Headlines.Description[i].indexOf("<img "));
                    String cleanUp = img.substring(0, img.indexOf(">")+1);
                    img = img.substring(img.indexOf("src=") + 5);
                    int indexOf = img.indexOf("'");
                    if (indexOf==-1){
                        indexOf = img.indexOf("\"");
                    }
                    img = img.substring(0, indexOf);

                    //setImgLink(img);

                    Headlines.image[i]=img;

                      }

                }

          }

    }

} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (DOMException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (ParserConfigurationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (SAXException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

}

} 
```

# android - PhoneGap 程序中的错误“网页不可用”

> ID：10331182
> 
> 赞同：2
> 
> 时间：2012-04-26T09:59:35.883
> 
> 标签：android, cordova

```
package com.phonegap;

import org.apache.cordova.*;
import android.os.Bundle;

public class PhoneGapSampleActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("assets/www/index.html");
    }
} 
```

我将此代码用于 PhoneGap 应用程序..

但它显示一个错误。![在此处输入图像描述](../Images/e036c6dcb383f46811ae03b09168d918.png)

我在 assets/www 文件夹中添加了 index.html 文件。但它显示一个错误......任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:27:55.670

你忘了`file:///`. 请记住，拥有**三个**斜线很重要！

另外我认为它应该是 android_asset 而不是资产。

在我的应用程序中是：`"file:///android_asset/www/index.html"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:08:20.320

简单的谷歌搜索来到了这个：

[phonegap 不起作用](https://stackoverflow.com/questions/3384878/phonegap-doesnt-work)

> 解决方案是将 phonegap.0.9.4.js 和 phonegap.0.9.4.jar 重命名为 phonegap.jar 和 phonegap.js。

# php - PHP 卷曲 GET & POST

> ID：10331183
> 
> 赞同：0
> 
> 时间：2012-04-26T09:59:40.570
> 
> 标签：php, curl

我现在正在使用以下代码卷曲一个 URL，无论是附加到 URL 末尾的 get 还是 POST 数据都可以正常工作。但不是 get 和 post。

但是，当我使用高级休息客户端（为谷歌浏览器添加）时，它工作得很好。烦人的是，我看不到它发出的模仿它的请求。

这是我正在用它打的电话。

```
$fields = array(
        'searchPaginationResultsPerPage'=>500               );
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
$fields_string = rtrim($fields_string,'&');

$curl = curl_init(); 
curl_setopt( $curl, CURLOPT_URL, 'http://www.microgenerationcertification.org/mcs-consumer/installer-search.php?searchPaginationPage=1' );
curl_setopt( $curl, CURLOPT_FOLLOWLOCATION, true );
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($curl,CURLOPT_POST,count($fields));
curl_setopt($curl,CURLOPT_POSTFIELDS,$fields_string);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 80);  
$str = curl_exec($curl);  
curl_close($curl); 
```

只是将其用作测试而不是其他任何东西，但似乎无法使其正常工作。我总是能得到前 500 个结果，但不能得到下一个 500 个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:07:12.067

不知道为什么会失败，看起来不错..当您跳过 CURL 并使用 PHP 流方法时会发生什么：

```
$postdata = http_build_query(
    array(
        'searchPaginationResultsPerPage' => 500
    )
); 
$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded',
        'content' => $postdata
    )
);

$context  = stream_context_create($opts);

$result = file_get_contents('http://www.microgenerationcertification.org/mcs-consumer/installer-search.php?searchPaginationPage=1', false, $context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:07:52.583

这有效

```
$fields = array (
        'searchPaginationResultsPerPage' => 500,
        'searchPaginationPage' => 1 
);

$headers = array (
        "Connection: keep-alive",
        "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19",
        "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
        "Accept-Encoding: gzip,deflate,sdch",
        "Accept-Language: en-US,en;q=0.8",
        "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3" 
);

$fields_string = http_build_query ( $fields );
$cookie = 'cf6c650fc5361e46b4e6b7d5918692cd=49d369a493e3088837720400c8dba3fa; __utma=148531883.862638000.1335434431.1335434431.1335434431.1; __utmc=148531883; __utmz=148531883.1335434431.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); mcs=698afe33a415257006ed24d33c7d467d; style=default';
$ch = curl_init ();
curl_setopt ( $ch, CURLOPT_URL, 'http://www.microgenerationcertification.org/mcs-consumer/installer-search.php?searchPaginationPage=1&searchPaginationResultsPerPage=500' );
curl_setopt ( $ch, CURLOPT_FOLLOWLOCATION, true );
curl_setopt ( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt ( $ch, CURLOPT_CONNECTTIMEOUT, 80 );
curl_setopt ( $ch, CURLOPT_COOKIE, $cookie );
curl_setopt ( $ch, CURLOPT_HTTPHEADER, $headers );

$str = curl_exec ( $ch );
curl_close ( $ch );

echo $str; 
```

您需要 cookie 信息并确保 curl 使用的是 GET 而不是 POST

见演示：[http](http://codepad.viper-7.com/gTThxX) : //codepad.viper-7.com/gTThxX（希望cokkies在你查看之前没有过期）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:10:12.633

我查看了您正在抓取的页面并注意到以下内容：

*   当您更改每页的结果时，它会再次发布您的搜索
*   他们似乎正在使用会话来存储您的搜索参数

使用 CURL 时，您没有保留会话 ID（这样做可能比您想要的要复杂一些），因此这与网站上的行为不同。

但是，我确实注意到，如果您将 searchPaginationResultsPerPage 参数附加到 URL，它可以正常工作。像这样：

[http://www.microgenerationcertification.org/mcs-consumer/installer-search.php?searchPaginationPage=0&searchPaginationResultsPerPage=500](http://www.microgenerationcertification.org/mcs-consumer/installer-search.php?searchPaginationPage=0&searchPaginationResultsPerPage=500)

这意味着您实际上可以使用 file_get_contents 而不必担心 CURL 的东西。

# facebook - 如何在 facebook 中创建社交阅读器应用程序？

> ID：10331184
> 
> 赞同：0
> 
> 时间：2012-04-26T09:59:40.393
> 
> 标签：facebook, facebook-graph-api, user-interface

我想创建社交阅读器 Facebook 应用程序，例如华盛顿邮报社交阅读器。但我不知道它的登录名和它是如何工作的。我有一个包含每日新闻更新的网站。所以我想要社交阅读器应用程序，所以如果用户从我的网站阅读蚂蚁新闻，那么它会在 Facebook 时间轴上发布。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:46:41.983

首先你需要创建一个 facebook 应用程序：http: [//developers.facebook.com/docs/guides/canvas/](http://developers.facebook.com/docs/guides/canvas/) http://developers.facebook.com/docs/appsonfacebook/tutorial/

画布应用程序基本上是 iframe 页面。意味着主页托管在您自己的网站中。

那么你应该阅读：[https](https://developers.facebook.com/docs/opengraph/keyconcepts/) ://developers.facebook.com/docs/opengraph/keyconcepts/了解什么是动作以及如何使用它。

我建议你找一个 facebook api 来处理大部分的身份验证。和背景的东西。

您需要为您的内容创建一个网页并请求必要的权限（如 publish_stream、publish_actions、电子邮件等），然后您可以将“x reads y”类型的操作发布到用户墙。

# java - ListView Item 内的 Viewgroup 中的随机项

> ID：10331186
> 
> 赞同：1
> 
> 时间：2012-04-26T09:59:45.057
> 
> 标签：java, android, listview, viewgroup

我有一个列表视图，在列表视图中，每个项目都是一个线性布局，带有 textview 和一个由 Java 代码添加的 textview 的视图组。但是该列表显示了正确的列表项文本视图，但视图组内的随机文本视图。有人有建议或想法吗？

抱歉上次我没有添加代码。现在在这里：

```
View view = null;
        Business b = filteredBusinessList.get(position);
        String ba = "";
        if(b.getAddress().length() > 0 && b.getAddress() != null) {
            ba += b.getAddress()+", ";
        }
        if(b.getDistrict().length() > 0 && b.getDistrict() != null) {
            ba += b.getDistrict();
        }
        if(b.getZoneName().length() > 0 && b.getZoneName() != null) {
            ba += ", " + b.getZoneName();
        }
        if(convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.business_list_item_nolocation, null);
            final NoLocationViewHolder viewHolder = new NoLocationViewHolder();
            viewHolder.tvBusinessName = (TextView) view.findViewById(R.id.tvBusinessName);
            viewHolder.tvBusinessAddress = (TextView) view.findViewById(R.id.tvBusinessAddress);
            viewHolder.flowLayout = (FlowLayout) view.findViewById(R.id.flow_layout);

            if(b.getContactNumber() != null && !b.getContactNumber().equals("")) {
                String[] contactNumbers = b.getContactNumber().split(",");
                int count = contactNumbers.length;
                for(final String numbers : contactNumbers) {
                    Log.d("NUMBER",b.getName() +">>> "+  numbers);
                    final FlowViewHolder fvh = new FlowViewHolder();
                    fvh.tvCon = new TextView(context);
                    fvh.tvCon.setId(11+count++);
                    fvh.tvCon.setText(numbers.trim());
                    fvh.tvCon.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
                    fvh.tvCon.setTextSize(14);
                    fvh.tvCon.setTextColor(Color.WHITE);
                    fvh.tvCon.setTypeface(null, Typeface.BOLD);
                    fvh.tvCon.setPadding(7, 4, 7, 4);
                    fvh.tvCon.setShadowLayer(1, 1, 1, Color.BLACK);
                    fvh.tvCon.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.business_nolocation_call_bg));
                    fvh.tvCon.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            showAlert("contact", numbers);                  
                        }
                    });
                    fvh.tvCon.setOnTouchListener(new OnTouchListener() {

                        @Override
                        public boolean onTouch(View v, MotionEvent event) {
                            switch (event.getAction()) {
                                case MotionEvent.ACTION_DOWN:   ((TextView)v).setBackgroundDrawable(context.getResources().getDrawable(R.drawable.business_nolocation_call_bg_pressed));
                                                                                                ((TextView)v).setTypeface(null, Typeface.BOLD);
                                                                                                break;
                                case MotionEvent.ACTION_CANCEL:
                                case MotionEvent.ACTION_UP: ((TextView)v).setBackgroundDrawable(context.getResources().getDrawable(R.drawable.business_nolocation_call_bg));
                                                                                    break;
                            }
                            return false;
                        }
                    });
                    FlowViewHolder fv = (FlowViewHolder) viewHolder.flowLayout.getTag();
                    viewHolder.flowLayout.addView(fvh.tvCon,new FlowLayout.LayoutParams(3, 3));
                    viewHolder.flowLayout.setTag(fvh);
                }
            }
            view.setTag(viewHolder);
        } else {
            view = convertView;
        }
        NoLocationViewHolder holder = (NoLocationViewHolder) view.getTag();
        holder.tvBusinessName.setText(b.getName());
        holder.tvBusinessAddress.setText(ba);
        return view; 
```

我已经使用了[本网站中给出的 FlowLayout](http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/)

# objective-c - 如何通过按钮单击更改 UIPickerView 中的行大小？

> ID：10331188
> 
> 赞同：1
> 
> 时间：2012-04-26T09:59:49.933
> 
> 标签：objective-c, ios, uipickerview

我尝试以这种方式进行操作：`reloadAllComponents:`单击按钮时调用但不调用`rowHeightForComponent:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T10:35:25.503

您不需要像`@auspicious99`建议的那样释放 pickerView 来设置新的单元格高度。而是在每次触发 reloadAllComponents 时设置委托或数据源，如下所示：

```
pickerView.delegate = self; //or pickerView.dataSource = self;
[pickerView reloadAllComponents]; 
```

为什么 reloadAllComponents 方法不触发 rowHeightForComponent 方法真的很奇怪，但这看起来是使用上述技巧的有效解决方法。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:17:49.063

从文档来看，它看起来`reloadAllComponents:`只是为组件内的新数据调用代理，但大概不会询问大小。

相反，我会尝试调用`rowSizeForComponent:`每个组件。在此方法的文档中，它说：“返回：给定组件中行的大小。这通常是显示组件中用作行的最大字符串或视图所需的大小。选择器视图获取的值这个属性通过调用pickerView:widthForComponent:和pickerView:rowHeightForComponent:委托方法，并缓存。默认值为(0, 0)。

然后，在您的 UIPickerViewDelegate 中，我将同时实现`pickerView:widthForComponent:`和`pickerView:rowHeightForComponent:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:33:34.883

您可能需要释放 UIpickerview 并在 pickerView:rowHeightForComponent 中使用适当的返回值创建另一个：

这似乎很痛苦，但我想不出另一种解决方案。

不幸的是，调用 rowSizeForComponent 似乎无济于事，因为正如文档所说，“选择器视图通过调用 pickerView:widthForComponent: 和 pickerView:rowHeightForComponent: 委托方法来获取此属性的值，并缓存它。” 因此，调用 rowSizeForComponent 只提供缓存的值，而不是调用 pickerView:rowHeightForComponent: 来获取新值。

# java - 如何找到默认的 JMX 端口号？

> ID：10331189
> 
> 赞同：56
> 
> 时间：2012-04-26T09:59:50.810
> 
> 标签：java, profiling, jmx, jvisualvm

我正在远程 Windows XP 上的 Java 6 VM 上运行 Java 应用程序，我可以在其上运行 jvisualvm.exe 以自动连接到正在运行的应用程序。

现在我需要从本地计算机连接该应用程序，但我不知道远程计算机的 JMX 端口号。我在哪里可以找到它？或者，我必须使用一些 VM 参数重新启动该应用程序以指定端口号吗？

在阅读了[如何在服务器中找到 JMX 端口](https://stackoverflow.com/questions/7531211/how-to-find-the-jmx-port-in-a-server)的问题后，我在远程计算机上执行了命令

```
netstat -apn 
```

但一无所获。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-28T22:53:15.880

> 现在我需要从本地计算机连接该应用程序，但我不知道远程计算机的 JMX 端口号。我在哪里可以找到它？或者，我必须使用一些 VM 参数重新启动该应用程序以指定端口号吗？

默认情况下，JMX 不会在端口上发布，除非您从该页面指定参数：[如何激活 JMX...](https://stackoverflow.com/questions/856881/how-to-activate-jmx-on-my-jvm-for-access-with-jconsole)

```
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.port=9010
-Dcom.sun.management.jmxremote.local.only=false
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false
-Djava.rmi.server.hostname=localhost 
```

*注意：*您需要注意上述某些设置的安全后果。

此外，如果您正在运行，您应该能够访问任何这些系统属性以查看它们是否已设置：

```
if (System.getProperty("com.sun.management.jmxremote") == null) {
    System.out.println("JMX remote is disabled");
} else [
    String portString = System.getProperty("com.sun.management.jmxremote.port");
    if (portString != null) {
        System.out.println("JMX running on port "
            + Integer.parseInt(portString));
    }
} 
```

根据服务器的连接方式，您可能还必须指定以下参数。作为初始 JMX 连接的一部分，jconsole 连接到 RMI 端口以确定 JMX 服务器正在哪个端口上运行。当您最初启动启用 JMX 的应用程序时，它会查看自己的主机名以确定在初始 RMI 事务中返回的地址。如果您的主机名不在`/etc/hosts`或设置为不正确的接口地址，则可以使用以下内容覆盖它：

```
-Djava.rmi.server.hostname=<IP address> 
```

顺便说一句，我的[SimpleJMX 包](http://256stuff.com/sources/simplejmx/)允许您同时定义[JMX 服务器](http://256stuff.com/sources/simplejmx/javadoc/simplejmx/com/j256/simplejmx/server/JmxServer.html#setServerPort%28int%29)和[RMI 端口](http://256stuff.com/sources/simplejmx/javadoc/simplejmx/com/j256/simplejmx/server/JmxServer.html#setRegistryPort%28int%29)，或者将它们都设置为同一个端口。上面定义的端口`com.sun.management.jmxremote.port`其实就是RMI端口。这告诉客户端 JMX 服务器正在哪个端口上运行。

# cakephp - Cakephp 使用特定规则验证特定字段而不保存来自控制器的数据

> ID：10331194
> 
> 赞同：1
> 
> 时间：2012-04-26T10:00:03.523
> 
> 标签：cakephp

我想使用 Cakephp 模型验证来验证字段，而不保存数据，为此我在控制器中使用以下代码。

```
$this->Model->set($this->data);
if ($this->Model->validates()) {
   ......
} 
```

但在这里我只想验证一些特定的字段，如“email_field”及其规则之一“email”。在模型中，我为“email_field”指定了一些其他规则，例如“unique”和“notempty”，但我不想验证这些规则。

如何实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T11:34:00.097

上面的方法肯定会起作用，但是当 cake 已经记录了如何验证模型的特定字段时，它不是一个优雅的解决方案。

```
 if ($this->Model->validates(array('fieldList' => array('field1', 'field2')))) {
       // valid
   } else {
      // invalid
   } 
```

[更多详情请参阅食谱](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T10:17:13.403

你有不同的选择

您可以动态取消设置其他规则：

```
unset($this->Model->validate['field']['someRuleName']); 
```

或者您可以为该字段分配一个全新的规则集

或者您可以为此验证使用不同的“不存在”字段，例如具有特殊规则的“some_other_field”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T13:25:08.910

```
......
$this->Registry->validate = array(
    'email_field' => array(
       'between' => array(
            'rule' => array('between', 10, 100),
            'message' => 'Your custom message here',
            'required' => true,
        ),
    )
);
$this->Model->set($this->data); 
if ($this->Model->validates(array('fieldList' => array('email_field')))) {
    ......
} 
```

# grails - 在标签的属性中使用 scriptlet 或 EL（Grails UI 插件）

> ID：10331196
> 
> 赞同：0
> 
> 时间：2012-04-26T10:00:06.153
> 
> 标签：grails, tags, el, gsp, scriptlet

我想在我的 gsp 中针对不同的 id 触发相同的对话框。所以这里是代码：

```
 <div class="yui3-widget-bd">
   <g:each in="deployments" status="index" var="workflow">
      <% def id = "reloadFile"+index %>
         <gui:dialog title="Reload File" form="true" modal="true"
                     controller="admin" action="reloadFile"
                     triggers="[show:[id:'${id}', on:'click']]">
         <p>To reload the file, please...</p><br />
         <input type="file" id="deploymentFile" name="deploymentFile" />
         </gui:dialog>
   </g:each>
</div> 
```

问题是脚本代码：

```
triggers="[show:[id:'<%=id %>', on:'click']]" 
```

没有得到评估。在生成的 html 源中侦听事件的 Javascript 部分如下所示：

```
 YAHOO.util.Event.addListener("${id}", "click", GRAILSUI.gui_e0100d149e0a7b531017e0decaee9fce.show, GRAILSUI.gui_e0100d149e0a7b531017e0decaee9fce, true); 
```

那么我怎样才能使源看起来像这样呢？：

```
YAHOO.util.Event.addListener("reloadFile1", "click", GRAILSUI.gui_e0100d149e0a7b531017e0decaee9fce.show, GRAILSUI.gui_e0100d149e0a7b531017e0decaee9fce, true); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:41:41.733

与jsps相同：

*   如果你想执行一些代码

    <% def something = true %>

*   如果要使用执行的返回

    <%= 什么？“这是一个真实的陈述”：“这是错误的”%>

请注意，这可能是代码异味，99.9% 的情况下代码应该位于域、控制器或 taglib 中。

[这是更多信息的参考文档。](http://grails.org/doc/2.1.0/guide/theWebLayer.html#GSPBasics)

# installation - Inno Setup 模块化安装

> ID：10331201
> 
> 赞同：0
> 
> 时间：2012-04-26T10:00:23.690
> 
> 标签：installation

我正在尝试使用客户端/数据库方法发布程序。

客户端和数据库可以安装在 2 台不同的计算机上。

我正在尝试做的是一个安装程序，它在开始时询问您是否要安装客户端、数据库或两者。

这可能吗？我应该修改哪个部分？

我警告你，我从未编写过 Inno Setup 脚本，我一直使用 ISTools，但如果没有其他方法，我已经准备好动手了：P

编辑：更多信息。目前我有 3 个安装程序，一个用于客户端，一个用于 DB（即 postgreSQL），一个用于 PDFCreator。我正在做的是将文件复制到一个目录，然后询问用户他想要安装什么：[运行]部分，安装后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:21:54.470

是的，有可能。看一下 CodeDlg.iss 示例。它展示了如何创建一个对话框来询问要安装哪个版本。在 CodeDlg 的情况下，它是一个程序的各种版本（轻型、赞助、付费），但概念是相同的。我以前也这样做过。就我而言，在初始化期间，我读取了注册表设置并设置了一些变量来选择我安装的版本（客户端或服务器）。我这里没有，但稍后会得到它并添加到这个答案中。

# exception - 如何以编程方式添加布局/设计异常

> ID：10331205
> 
> 赞同：0
> 
> 时间：2012-04-26T10:00:32.617
> 
> 标签：exception, magento, layout

我想在布局中添加一个例外（因为它可以在 www.url.de/admin/system_config/edit/section/design/ 的点主题下）。问题是我想通过代码而不是通过 magento 后端添加这个“添加异常”。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:02:08.360

*根据 OP 评论，目标是根据模块控制器为配置的默认设置更改主题配置。*

这似乎是个坏主意™。在幕后更改主题配置将 (1) 无效或 (2) 使管理站点的人感到困惑。

1.  如果设计资产在配置的默认字段之上匹配，则设计例外将不适用
2.  如果设计例外确实适用，它会默默地改变标准 Magento 设计配置建模

如果可能，最好（在您的控制器类或超类中）向`core/layout_update`对象实例添加自定义句柄，然后利用布局更新系统来执行此操作。

# android - 检索GSM网络信息Android？

> ID：10331208
> 
> 赞同：1
> 
> 时间：2012-04-26T10:00:41.530
> 
> 标签：android

我想在我的 android 应用程序中使用 BCCH、BSIC 等 gsm 网络信息。如何使用 android SDK 检索这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:09:07.987

```
 TelephonyManager telMgr = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE); 
```

电话管理器是你的朋友。;)

# html - 使用css的div矩阵结构

> ID：10331209
> 
> 赞同：2
> 
> 时间：2012-04-26T10:00:42.390
> 
> 标签：html, css

我是电子商务网站中我的产品显示页面的这个 html，但是对齐有一些问题....在这个页面中将接近 100 个产品，所以我需要像矩阵一样显示它

```
<div  style=" margin: 0 auto; width:640px; text-align: left">
     <div class="leftcol" >left column 1
           <p>my text</p>
           <p>my text</p>
     </div>
     <div class="leftcol" >right column
           <p>my textmy text my text my text</p>
     </div>   
     <div class="leftcol" >left column
           <p>my text</p>
           <p>my text</p>
           <p>my text</p>
           <p>my text</p>
           <p>my text</p>
     </div>
     <div class="leftcol" >right column
          <p>my textmy text my text my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
     </div>
     <div class="leftcol" >
           left column 2
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
          <p>my text</p>
    </div> 
```

我的 CSS

```
.leftcol{width: 200px;background:yellow;margin-right:10px;float:left; } 
```

所有产品 div 的大小都相同`200px`，但是 div 的高度会像示例一样发生变化，我需要[像这样](http://pinterest.com/) [http://pinterest.com/显示 div](http://pinterest.com/)

显示器是这样的

![在此处输入图像描述](../Images/d3908391e0490c6eb355d5fb892c6473.png)

[但我需要通过下一个 div 示例来填补这些空白，请参阅此站点 [http://pinterest.com/][1] http://pinterest.com/](http://pinterest.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:34:46.537

masonry 和 pinterest 都使用绝对定位来实现您所需要的。而且我猜这对于您也具有响应能力的复杂布局来说是必须的。

但是对于一个简单的固定宽度，我可能会这样做：

```
<ul id="matte">
   <ul id="first-col">

      <ul class="product-cat">
         <li>...</li>
         <li>...</li>
         ...
      </ul>

      <ul class="product-cat">
         <li>...</li>
         <li>...</li>
         ...
      </ul>

   </ul>

   <ul id="second-col">

      <ul class="product-cat">
         <li>...</li>
         <li>...</li>
         ...
      </ul>

      <ul class="product-cat">
         <li>...</li>
         <li>...</li>
         ...
      </ul>

   </ul>

   <ul id="third-col">

      <ul class="product-cat">
         <li>...</li>
         <li>...</li>
         ...
      </ul>

      <ul class="product-cat">
         <li>...</li>
         <li>...</li>
         ...
      </ul>

   </ul>
</ul> 
```

所以，这背后的想法是把布局分成列，根据最短的列添加内容，而不是在js中计算整个布局。这甚至可以与用户生成的内容一起使用我猜你在哪里检测到最短并相应地注入内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:12:07.293

几乎类似于[获得固定高度的 div 以继续下一行](https://stackoverflow.com/questions/10278299/getting-fixed-height-div-to-continue-on-next-line/10278584#10278584)。

根据您的要求，这应该匹配：http: [//jsfiddle.net/bXvaj/](http://jsfiddle.net/bXvaj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:35:59.777

最后，来自数据库的 div 内容无法仅使用 CSS 对齐矩阵。所以我们想使用 jQuery 我在评论中使用“@Gaby aka G. Petrioli”回答

使用[masonry.desandro.com](http://masonry.desandro.com/)或[isotope.metafizzy.co](http://isotope.metafizzy.co/)

# vb.net - 如何将 VB 6 中的代码转换为 VB.NET？

> ID：10331213
> 
> 赞同：0
> 
> 时间：2012-04-26T10:00:48.873
> 
> 标签：vb.net, vb6-migration

我有机会在迁移项目（VB 到 VB.NET）中工作。我对 RecordSet 功能感到困惑。在我们的项目中，我们根据场景使用 DataReader。但是在像 dsr.EOF 这样的循环案例中。

```
 Dim recordset As dao.RecordSet
If recordset .EOF Then
       '    '    msgbox "Please enter some number ", vbOKOnly, "Number Not Found"
       '    '    txtAdd.SetFocus
       '    '    Exit Sub
End If 
```

如何将其转换为 VB.NET？我们需要写 If Not reader.Read 或 If reader.Read。

有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:10:35.717

我想你可能会追求的是以下

```
Dim reader As IDataReader
' <fill the reader with your query via an IDbCommand>
Dim dataFound As Boolean = false

Using reader = command.ExecuteQuery()
    While reader.Read()
        ' <perform your data processing here>
        dataFound = True
    End While

    If dataFound = False Then
        ' <Here you do your processing for the case where data was not found.>
    End If
End Using 
```

或者，如果您只关注一行数据，那么我们有：

```
Dim reader As IDataReader
' <fill the reader with your query via an IDbCommand>

Using reader = command.ExecuteQuery()
    If reader.Read() Then
        ' <perform your data processing here>
    Else
        ' <Here you do your processing for the case where data was not found.>
    End While
End Using 
```

# scalability - 在十亿个唯一字符串的列表中搜索子字符串

> ID：10331214
> 
> 赞同：0
> 
> 时间：2012-04-26T10:00:49.137
> 
> 标签：scalability, database-performance

我有一个大约十亿个唯一字符串的列表，长度最多只有几十个字符。我想找到包含或匹配搜索字符串的所有字符串，最好在不到 100-200 毫秒的时间内，并且在尽可能少的硬件上（我假设我需要大量的 RAM）。存储和检索它的最佳方法是什么？

*   根据我的阅读，MySQL`LIKE '%search%'`不使用索引，但`LIKE '%search'`两者`LIKE 'search%'`都使用。作为最后的手段，这是可以接受的，但并不理想，因为我想在目标字符串中的任何位置找到搜索字符串。
*   使用像 Redis 这样的键值存储将需要存储所有可能的子字符串组合，并且我认为需要大量 RAM。
*   字符串列表大约有十几个 GB。像 Lucene 这样的全文搜索服务器是否可行，甚至是理想的，而不是拥有数十亿行/文档/记录？它肯定会节省解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:45:17.013

您是否考虑过使用众多 MapReduce 框架之一来解决您的问题？MapReduce 的本质是分而治之，因此您正在解决一个非常简单的问题（例如，十亿个唯一字符串中的一个是否包含您的搜索词）十亿次，然后您将十亿个答案组合成一个答案。而不是只有一台具有大量 RAM 的机器来解决您的问题，您可以要求许多配备较少的机器一起解决您的问题。一探究竟。这可能是您正在寻找的。

# java - 使用 mybatis 注解获取嵌套对象

> ID：10331215
> 
> 赞同：3
> 
> 时间：2012-04-26T10:00:51.057
> 
> 标签：java, mybatis

我有一个这样的 POJO

```
class foo
{
private String id;
private String attribute;
private Map<String, String> dataMap;
} 
```

我的数据模型是

```
Table Item
- INT id
- CHAR attribute 
```

//将dataMap存储为键值对

```
Table Data
- INT id
- CHAR key
- CHAR value 
```

现在，我想结合以下 2 个查询

第一个查询：

```
@Select("select * from Item where attribute=#{attribute}"
public List<Item> getItemList(@Param("attribute") String attribute); 
```

另一个查询来获取给定 id 的所有键值对

如何进行单个查询，给定属性，获取 id 列表并填充嵌套对象（dataMap）

//已经通过@Results，@Result ..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T16:08:00.280

这种情况在 myBatis 中可以通过两种方式解决：

*   嵌套选择 - 您检索项目列表，并为每个项目运行单独的选择以获取数据；
*   嵌套结果——您通过运行单个连接查询来检索具有关联数据的项目，并让 myBatis 处理结果中的重复子集；

第一个选项对性能非常不利，并导致所谓的“n+1 选择问题”。第二种是做这类事情的首选方式。

[MyBatis 用户指南](http://code.google.com/p/mybatis/downloads/detail?name=MyBatis-3-User-Guide.pdf)包含一个使用嵌套结果的示例，但它是用于 XML 配置的。Java 注释有一些限制，但理论上应该可以做到（我从未尝试过 id，因为我不喜欢在 Java 代码中进行选择，但以下文章提供了一些有用的信息：[IBatis (MyBatis)：处理连接：高级结果映射、关联、集合、N+1 选择问题](http://java.dzone.com/articles/ibatis-mybatis-handling-joins)）。

# jquery - Requirejs - 仅在条件为真时加载模块

> ID：10331216
> 
> 赞同：5
> 
> 时间：2012-04-26T10:00:51.473
> 
> 标签：jquery, backbone.js, requirejs, js-amd

使用Requirejs，如何仅在条件为真时才加载模块？例如，如果用户是管理员，则加载模块 a.js 文件。

PS：我将 Backbone 与 Requirejs 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T10:19:40.157

像这样的东西？

```
define([], function () {
    function realWork (modulea) {
        // do stuff ...
        // so stuff with modulea
        if (modulea) {
            ...
        }
    }

    if (isAdmin) {
        require(["modulea"], function (modulea) {
            realWork(modulea);
        });
    } else {
        realWork();
    }
}); 
```

如果您发现自己重复了这种模式，您也许可以[编写自己的 requirejs 插件](http://requirejs.org/docs/plugins.html)来整理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:25:14.447

或者

```
define(['isAdmin!modelea'], function(modulea){ 
  if (modulea) { 
    // doSomethingWithIt(); 
  } 
}); 
```

# php - 如何使用 php 在我的服务器上存储图像并使用 mysql 对其进行索引？

> ID：10331225
> 
> 赞同：1
> 
> 时间：2012-04-26T10:01:31.210
> 
> 标签：php, mysql, indexing, save

我想将图像存储在我的服务器上并用我的数据库对其进行索引，以便以后可以通过用户名或从上传图像的人那里收集的其他信息来搜索它们。我以为我会让我的程序在上传时将上传的位置保存到数据库中。我很确定这是可能的，但作为 php 的新手，我需要一个开始的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:32:38.567

这不仅仅是关于文件的上传和将元数据存储到数据库中。确保保存您的应用程序以防被劫持。

*   按表格上传图片。

*   确保在将元数据存储到数据库时如何处理损坏的上传或上传失败。（否则使用垃圾收集之类的东西来避免磁盘空间不足或数据库条目没有相关文件。）

*   **始终只有注册用户才能上传**、使用会话 cookie

*   **确保您的服务器只接受有效会话的有效表单数据！！！**

*   **确保您在服务器上运行了病毒扫描程序**，如果可能的话，让您的脚本对其做出反应，但不要向外部显示。

*   **改名！！！服务器上的文件，取消文件类型后缀**（将此信息存储在数据库中，包括要发送的 mimetype），也许使用压缩。

*   **永远不要让用户知道文件的存储位置！！！**使用下载脚本将有关文件路径的信息隐藏到外部！

**编辑：**

这不是一个完整的列表，只是让您对它的外观有一个印象！

**上传：**

构建一个上传脚本，如......

*   像这样构建数据库表：

    文件

    `uid, id, filename, real_filename, suffix, content_length, datetime_upload`

    扩展（可能性列表）

    `uid, id, suffix, mimetype`

    用户->文件关系

    `uid, id, user_id, file_id`

*   确保从有效的用户会话调用上传脚本或退出

*   确保用户是否有权存储数据（角色模型）或退出

*   接收表单并检查表单数据是否有效（变量、验证码等）或退出

*   检查文件类型是否允许，可选择在最终保存之前对文件进行二进制检查（文件类型在标题中）和/或病毒检查

*   为文件建立一个空条目并接收file_id，否则出错

*   建立新的文件名，fe

    `$new_filename = $file_id . '-' . md5($old_filename);`

*   将数据存储到光盘

*   如果存储正常，则更新数据库条目，否则删除条目并出错

*   为 user_id->file_id 存储一个条目

*下载：*

构建一个下载脚本，如...

*   确保从有效的用户会话中调用下载脚本或退出

*   确定用户是否有权下载这条数据（角色模型和用户->文件关系）或退出

*   获取旧文件名、大小和 mimetype 以执行一些发送操作

*   使用标头中存储的 mimetype 将文件发送到浏览器，以避免文件在客户端被接受并作为不同的东西 (fe .exe) 执行。添加正确的下载标头、内容长度和缓存标头。从正确的文件中添加二进制数据流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:05:42.413

要遵循的步骤：

您可以通过多种方式进行操作 - 使用 AJAX 上传器，或者您是否只是要在表单中选择图像并将图像与用户数据一起保存......

但是 AJAX 的简单过程是......

*   上传图片
*   返回图片名称
*   使用用户参考将图像名称保存到数据库
*   搜索 - 从数据库中搜索图像参考到图像在数据库中的存储位置

否则

*   按保存
*   上传图片到目录
*   如果传输成功，请保存文件名以及用户信息
*   通过用户引用搜索数据库并获取该用户的图像名称

# actionscript-3 - Flash AS3 - DisplayObject 参数错误 - 尝试删除和添加加载的内容

> ID：10331226
> 
> 赞同：1
> 
> 时间：2012-04-26T10:01:35.040
> 
> 标签：actionscript-3, flash, removechild, displayobject, argument-error

我正在使用 flash 和 as3 来尝试构建照片加载器/查看器/上传工具。我正在使用文件引用来处理浏览/加载/上传功能。我当前的阶段有 2 个加载器框，我将用户选择的图像加载到其中。不过，如果用户决定，我需要能够删除图像并重新选择另一个图像。

所以在文件加载事件中我有这个代码：

```
// Load Image into Editor Function.
function onMovieClipLoaderComplete(event:Event):void {
    var loadedContent:DisplayObject=event.target.content;
    currentLoader =event.target.loader as Loader;

    currentLoader.x=currentX;
    currentLoader.y=currentY;

    currentContent.buttonMode=true;
    currentContent.addChild(currentLoader);
    addChild(currentContent);

    currentLoader.mask = currentMask;

    addChild(replace_btn);
} 
```

在我的替换按钮上，我有：

```
replace_btn.addEventListener(MouseEvent.CLICK, replaceImage);

function replaceImage(event:Event):void {
    currentContent.removeChild(currentLoader);
    removeChild(currentContent);
} 
```

一旦按下替换按钮，它工作正常，但是当我将另一个图像加载到加载器中时 - 下次我按下替换按钮（或任何后续时间）时，我的 flash as3 文件中出现以下参数错误：

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/removeChild()
at MethodInfo-13() 
```

有谁知道这意味着什么？奇怪的是它只发生在第二次而不是第一次。我想如果我有： `currentContent.addChild(currentLoader); addChild(currentContent);` 在加载然后只是 `currentContent.removeChild(currentLoader); removeChild(currentContent);` 在替换功能上它会起作用吗？

如果这也有帮助，完整的 as3 代码如下所示

我只学习 Flash 3-4 个月，所以请放轻松，如果我的代码没有以最好的方式完成，我深表歉意！:)

劳伦

```
// Set Start Up Values.
var image1_loader:Loader = new Loader();
var image1_content:Sprite = new Sprite();
var image1_mask:Sprite = new Sprite(); image1_mask.graphics.beginFill(0x000000,1);         image1_mask.graphics.drawRect(54, 59, 330, 330); image1_mask.graphics.endFill();

var image2_loader:Loader = new Loader();
var image2_content:Sprite = new Sprite();
var image2_mask:Sprite = new Sprite(); image2_mask.graphics.beginFill(0x000000,1);     image2_mask.graphics.drawRect(384, 59, 330, 165); image2_mask.graphics.endFill();

var currentBtn;
var currentLoader;
var currentContent;
var currentMask;
var currentX;
var currentY;

replace_btn.visible=false;

// Define FileReference.
 var canvasImage:FileReference;

// Image Buttons Function.
image1_btn.addEventListener(MouseEvent.CLICK, start_fileRef);
image2_btn.addEventListener(MouseEvent.CLICK, start_fileRef);

image1_content.addEventListener(MouseEvent.MOUSE_DOWN, setCurrentSelection);
image2_content.addEventListener(MouseEvent.MOUSE_DOWN, setCurrentSelection);

function setCurrentSelection(e:MouseEvent):void {
if (e.currentTarget===image1_content){currentContent=image1_content;}
if (e.currentTarget===image2_content){currentContent=image2_content;}
}

// Browse File Function.
function start_fileRef(e:MouseEvent):void {
trace("onBrowse");
if (e.target===image1_btn){currentBtn=image1_btn; currentLoader=image1_loader;     currentContent=image1_content; currentMask=image1_mask; currentX=54; currentY=59;}
if (e.target===image2_btn){currentBtn=image2_btn; currentLoader=image2_loader; currentContent=image2_content; currentMask=image2_mask; currentX=384; currentY=59;}

canvasImage=new FileReference();
canvasImage.addEventListener(Event.SELECT, onFileSelected);
var imageTypeFilter:FileFilter = new FileFilter("JPG/PNG Files","*.jpeg; *.jpg;*.gif;*.png");
canvasImage.browse([imageTypeFilter]);
}

// Selected File Function.
function onFileSelected(event:Event):void {
trace("onFileSelected");
canvasImage.addEventListener(Event.COMPLETE, onFileLoaded);
canvasImage.addEventListener(ProgressEvent.PROGRESS, onProgress);

var canvasImageName = canvasImage.name;
canvasImage.load();
}

// File Progress Function.
function onProgress(event:ProgressEvent):void {
var percentLoaded:Number=event.bytesLoaded/event.bytesTotal*100;
trace("loaded: "+percentLoaded+"%");
}

// File Loaded Function.
function onFileLoaded(event:Event):void {
var fileReference:FileReference=event.target as FileReference;

var data:ByteArray=fileReference["data"];
trace("File loaded");
var movieClipLoader:Loader=new Loader();
movieClipLoader.loadBytes(data);
movieClipLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onMovieClipLoaderComplete);

canvasImage.removeEventListener(Event.COMPLETE, onFileLoaded);
}

// Load Image into Editor Function.
function onMovieClipLoaderComplete(event:Event):void {
var loadedContent:DisplayObject=event.target.content;
currentLoader =event.target.loader as Loader;

currentLoader.x=currentX;
currentLoader.y=currentY;

currentContent.buttonMode=true;
currentContent.addChild(currentLoader);
addChild(currentContent);

currentLoader.mask = currentMask;

addChild(replace_btn);

// Reveal Retry Button over Hover Function //
currentContent.addEventListener(MouseEvent.ROLL_OVER, hover);
replace_btn.addEventListener(MouseEvent.ROLL_OVER, hover);
currentContent.addEventListener(MouseEvent.ROLL_OUT, unhover);
replace_btn.addEventListener(MouseEvent.ROLL_OUT, unhover);

function hover(event:Event):void {
    replace_btn.visible=true;
}
function unhover(event:Event):void {
    replace_btn.visible=false;
}

replace_btn.addEventListener(MouseEvent.CLICK, replaceImage);

function replaceImage(event:Event):void {
    currentContent.removeChild(currentLoader);
    removeChild(currentContent);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:19:28.430

这`currentContent.removeChild(currentLoader);`应该没问题，但这 `removeChild(currentContent);`很可能是问题的根源。因为您将它添加为`currentContent.addChild(currentLoader)`，所以您也必须删除容器 var (currentContent) 。

# c++ - the different combinations of a vector's values

> ID：10331229
> 
> 赞同：0
> 
> 时间：2012-04-26T10:01:39.510
> 
> 标签：c++, vector, superset

Suppose I have a vector of n values, I want to get the different combinations of its values, for example: if I have vect = [a, b, c] the different combinations that I want are: [a, b, c], [a,b], [a,c], [b,c], [a], [b], [c]

Note that for example [a,b] is the same as [b,a] so I don't need to keep both of them.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T10:07:17.623

Count from `0` to `2^vector.size() - 1`. If bit i of your loop variable is 1, include `vector[i]` in your combination.

```
vector<char> v;
v.push_back('a');
v.push_back('b');
v.push_back('c');
for (int counter = 0; counter < (1 << v.size()); ++counter)
{
    vector<char> combination;
    for (int i = 0; i < v.size(); ++i)
    {
        if (counter & (1 << i))
            combination.push_back(v[i]);
    }

    // do something with combination
} 
```

Edit: if you want to exclude the empty set, start counting at 1.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:30:47.267

Give you a pseudo code, please convert it to real code.

```
vector resultVec;
while (!inputVec.empty)
{
    char c = inputVec.pop_back();

    foreach(one in resultVec)
    {
         combined = combine c and one;
         resultVec.push_back(combined);
    }

    resultVec.push_back(c);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:54:31.357

Imagine you have a function which can already do this for you. Let's call it `combinations`.

If you were going to implement your own version of this, `my_combinations`, you could do it by looking at the first element in your vector, calling `combinations` on the rest of the vector, and then combining your element with each of the combinations.

Once you'd implemented this, you could delegate to your own version of `combinations` instead of using the pre-existing one.

# java - 如何使 OpenSessionInViewFilter 排除静态资源

> ID：10331230
> 
> 赞同：2
> 
> 时间：2012-04-26T10:01:42.560
> 
> 标签：java, hibernate, web.xml, open-session-in-view

我已经为我的 MVC webapp 实现了 OpenSessionInViewFilter，它工作得几乎完美。唯一的问题是它还会为从网络服务器请求的每个图像、js、css 等创建一个会话。这是我不想要的。

我使用 struts2、spring 和 hibernate，这是我的 web.xml

```
<filter>
    <filter-name>lazyLoadingFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>lazyLoadingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

所以因为我正在映射 url-pattern /* 它还需要所有图像等。我尝试将它设置为 *.jsp 和 *.action，但后来我又得到了延迟加载异常......我应该怎么做? 我已经寻找答案 5 个小时了，我的脑海里有点疯狂。

我需要做的就是让这个过滤器忽略所有静态资源。就是这样！对于其他一切它可以运行。听起来很简单，但真的很烦我，我不知道怎么做。

任何帮助将不胜感激。

我是否需要扩展过滤器来编写我自己的过滤器并在其中排除？如果是这样。如何？

编辑：似乎我可以在过滤器链的顶部为我的静态文件设置过滤器映射。然后将它们发送到“ByPassFilter”，从而绕过这些静态资源的过滤器链。这是要走的路吗？？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:20:48.963

这种情况下的一般做法是使用 Apache Web 服务器与带有[mod_jk 模块的应用程序服务器 (Tomcat/JBoss) 的组合。](http://en.wikipedia.org/wiki/Mod_jk)

[这是](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)描述如何使用此组合的链接。（[另一个链接](http://www.serverwatch.com/tutorials/article.php/2203891/Integrating-Tomcat-with-Apache.htm)）

使用此配置的主要优点是

1.  静态内容可以由 Apache Web 服务器提供。
2.  动态内容请求（如 *.jsp、*.action 等）被委托给 tomcat。
3.  可能还有其他有用的模块，例如静态内容的内容[压缩](http://httpd.apache.org/docs/2.0/mod/mod_deflate.html)，从而提高响应时间。
4.  它比应用服务器为所有内容提供服务的场景更安全。

我知道这可能不是您正在寻找的解决方案，我建议这样做，因为这是一种普遍做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:12:16.110

就您的 Bypassfilter 实现而言，如果您在前面有这样一个过滤器，那么一旦您跳过过滤器链中的下一个过滤器，那么基本上链中的其余过滤器也将被跳过（这似乎没有在大多数情况下是一件可取的事情）。此外，请求的过滤器调用表现得像

> Filter1 -> Filter2 --> Struts Action/BL --> 过滤器 2 --> 过滤器 1

因此，OpenSessionInViewFilter 将在您的 struts 操作中处理请求后启动（这可以通过在 web.xml 中的视图过滤器中打开会话后放置另一个绕过过滤器来避免）。但是总体而言，我似乎总是不希望跳过整个过滤器链来跳过单个过滤器。

我从来没有遇到过跳过 OpenSessionInViewFilter 的需要，但是如果我必须这样做，那么我将拥有一个*扩展 OpenSessionInViewFilter*过滤器的过滤器，而不是一个 Bypassfilter 过滤器，这将从处理中跳过我的静态资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T15:21:34.197

仅包含您需要的模式元素。

像这样的东西：

```
<filter-mapping>
    <filter-name>lazyLoadingFilter</filter-name>
    <url-pattern>*.html</url-pattern>
    <url-pattern>/profile/edit</url-pattern>
    <url-pattern>/cars/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-07T21:39:45.097

以防万一有人需要扩展的解决方案`OpenSessionInViewFilter`。它可以防止为预定义的静态资源创建 Hibernate 会话。

```
/**
 * Skips OpenSessionInViewFilter logic for static resources
 */
public class NonStaticOpenSessionInViewFilter extends OpenSessionInViewFilter {

    static final Pattern STATIC_RESOURCES = Pattern.compile("(^/js/.*)|(^/css/.*)|(^/img/.*)|(^/fonts/.*)|(/favicon.ico)");

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        String path = request.getServletPath();
        if (STATIC_RESOURCES.matcher(path).matches()) {
            filterChain.doFilter(request, response);
        } else {
            super.doFilterInternal(request, response, filterChain);
        }
    }

} 
```

基本上 Spring 应该提供一些属性，例如`excludePatterns`for `OpenSessionInViewFilter`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-26T10:51:13.527

我完全同意@Santosh 的回答。

`OpenSessionInViewFilter`创建资源并将其添加到对象`ThreadLocal`中，如果从未使用过会话，则从未实际创建过会话，这也意味着该请求未使用数据库连接。（这可能是您问题的答案）。

如果您仍然需要控制事物，您始终可以创建另一个过滤器来扩展`OpenSessionInViewFilter`并执行[`getSession`](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html#getSession%28org.hibernate.SessionFactory%29)基于调用哪个资源的方法。

# crystal-reports - 还有其他方法可以计算水晶报表中的组记录吗？

> ID：10331231
> 
> 赞同：1
> 
> 时间：2012-04-26T10:01:43.923
> 
> 标签：crystal-reports

我想计算在一个组下找到的记录总数，并据此我需要分配减少百分比。

详细地，

*   如果用户获得的产品少于 3 件，他将获得 10%
*   如果用户获得 4-10 件产品，他将获得 15%
*   如果他有 10-20 个产品，他将获得 20% 作为扣除

例如，将以下内容视为水晶报表：

**用户 1**
**产品扣减**
Apple 15 %
Orange 15 %
Lemon 15 %
Strawberry 15 %
Grapes 15 %

在这里，我使用运行总计计算了该组中的记录并写了一个公式。取决于计数，它会扣除
但得到的问题是，我得到以下输出...

**用户 1**
**产品扣除**
Apple 10 % //*因为计数是 1*
橙色 10 % //*因为计数是 2*
柠檬 10 % //*因为计数是 3*
草莓 15 % //*因为计数是 4*
葡萄 15 % //*因为计数是 5*

如果记录总数为 4-15，我想将所有产品扣除为 15 %。这里产品的总数是 5 个，在 4-15 的范围内，所以所有的产品都应该扣除 15%。
请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T13:47:43.090

您不需要运行总计字段 (RT) 即可进行简单计数；请改用汇总字段。汇总字段可以在组的页眉和页脚中使用（RT 只能在页脚中使用）。

选择一个字段（最好是唯一字段），然后选择插入 | 摘要字段... 从选择列表中选择计数或非重复计数。

您也可以在公式中使用此摘要：

```
//{@discount}
//Assumes there is a group on {table.fruit_name}):
SELECT Count({table.key_field}, {table.fruit_name})
CASE 1 to 3: .1
CASE 4 to 5: .15
DEFAULT: 0 
```

# moq - Moq.MockVerificationException ：以下设置不匹配：

> ID：10331236
> 
> 赞同：1
> 
> 时间：2012-04-26T10:01:58.330
> 
> 标签：moq

我收到了这个错误

> 测试“EM.CoreTest.Services.UnitTestEventSevice.EventService_Return_10_Events”失败：Moq.MockVerificationException：以下设置不匹配：IPricePackRepository pricepack => pricepack.Delete(It.Is(a => a.PP_EventID == 1)) 在 Moq .Mock.Verify() Services\UnitTestEventSevice.cs(52,0)：在 EM.CoreTest.Services.UnitTestEventSevice.EventService_Return_10_Events()

我想知道为什么在那部分会引发错误，因为它们与 eventPersistenceMock 具有相同的逻辑。请帮我。

```
 namespace EM.CoreTest.Services
    {
        [TestFixture]
        public class UnitTestEventSevice
        {
            [SetUp]
            public void StartUp()
            {
                AutoMapperConfiguration.Configure();
            }
            [Test]
            public void EventService_Return_10_Events()
            {
                var eventPersistenceMock = new Mock<IEventRepository>();
                var pricepackPersistenceMock = new Mock<IPricePackRepository>();
                var regformPersistenceMock = new Mock<IRegFormRepository>();
                var attendeePersistenceMock = new Mock<IAttendeeRepository>();
                var eventlists = GetEvents();
                var pricepacks = GetPricepacks();
                var currentevent = eventlists.ToList()[1];
                eventPersistenceMock.Setup(r => r.GetAll()).Returns(eventlists);
                eventPersistenceMock.Setup(u => u.Single(It.IsAny<Func<tbl_SBAem_Event, bool>>())).Returns(eventlists.Where(a => a.EventMngID == currentevent.EventMngID).Single());
                eventPersistenceMock.Setup(r => r.Delete(currentevent)).Verifiable();
                eventPersistenceMock.Setup(r => r.SaveChanges()).Verifiable();

                 pricepackPersistenceMock.Setup(pricepack => pricepack.GetAll()).Returns(pricepacks);
                 pricepackPersistenceMock.Setup(pricepack => pricepack.Delete(It.Is<tbl_SBAem_PricePackages>(a => a.PP_EventID == currentevent.EventMngID))).Verifiable();
                 pricepackPersistenceMock.Setup(pricepack => pricepack.SaveChanges()).Verifiable();

                 regformPersistenceMock.Setup(rgform => rgform.Delete(It.Is<tbl_SBAem_RegForm>(a => a.RF_EventID == currentevent.EventMngID))).Verifiable();
                 regformPersistenceMock.Setup(rgform => rgform.SaveChanges()).Verifiable();

                 attendeePersistenceMock.Setup(atnd => atnd.Delete(It.Is<tbl_SBAem_Attendee>(a => a.AT_RegID == currentevent.EventMngID))).Verifiable();
                 attendeePersistenceMock.Setup(atnd => atnd.SaveChanges()).Verifiable();

                var eventservice = new EventService(eventPersistenceMock.Object,pricepackPersistenceMock.Object,regformPersistenceMock.Object,attendeePersistenceMock.Object);

                Assert.AreEqual(eventservice.EventLists().Count, 10);
                Assert.AreEqual(eventservice.CustomizedQuestions(1).EventMngID, 1);
                Assert.IsTrue(eventservice.DeletePage(currentevent.EventMngID));

                eventPersistenceMock.Verify();
                pricepackPersistenceMock.Verify();    
                regformPersistenceMock.Verify();
                attendeePersistenceMock.Verify();
            }

            private IEnumerable<tbl_SBAem_PricePackages>  GetPricepacks()
            {
                var listtblsbaemPricePackages = new List<tbl_SBAem_PricePackages>();
                for (var i = 0; i < 10; i++)
                {
                    var tblsbaemPricePackages = new tbl_SBAem_PricePackages
                    {
                        PP_AID = 1
                    ,
                        PP_AccessLevel = "Access Level"
                    ,
                        PP_AttendeeCount = 50
                    ,
                        PP_Cost = (decimal?)34.45
                    ,
                        PP_Desc = "Pricepacks Description"
                    ,
                        PP_EnforceCount = 1
                    ,
                        PP_EventID = i
                    ,
                        PP_GID = 1
                    ,
                        PP_Name = "Name"
                    ,
                        PP_Tax = (decimal?)23.12
                    ,
                        PricePackageID = i
                    };
                    listtblsbaemPricePackages.Add(tblsbaemPricePackages);
                }
                return listtblsbaemPricePackages;
            }

            private IEnumerable<tbl_SBAem_Event> GetEvents()
            {
                var listtblsbaemConfig = new List<tbl_SBAem_Event>();
                for (var i = 0; i < 10; i++)
                {
                    var tblSbAemEvent = new tbl_SBAem_Event
                    {
                        EventMngID = i
                        ,
                        EM_AID = null
                        ,
                        EM_Agree1Name = "Rene agree"
                        ,
                        EM_Agree1Value = "Yes"
                        ,
                        EM_Agree2Name = "Tessa Agree"
                        ,
                        EM_Agree2Value = "Yes"
                        ,
                        EM_AllowSignup = null
                        ,
                        EM_BccNotify = "rene_florendo@yahoo.com.ph"
                        ,
                        EM_ChargeTiming = "10:00 am"
                        ,
                        EM_ContactEmail = "rene.florendo@codelean.com"
                        ,
                        EM_ContactName = "Rene Florendo"
                        ,
                        EM_ContactPhone = "1234567"
                        ,
                        EM_CurAttendee = null
                        ,
                        EM_Date = DateTime.Now
                        ,
                        EM_Description = "It's me rene"
                        ,
                        EM_EditStatus = null
                        ,
                        EM_EmailIntro = "Hey dear I am rene"
                        ,
                        EM_EmailMessage = "I love you"
                        ,
                        EM_GID = null
                        ,
                        EM_GuestPass = "guessPass"
                        ,
                        EM_GuestUser = "rene"
                        ,
                        EM_Image = "image1.png"
                        ,
                        EM_Instructions = "just me"
                        ,
                        EM_Link = "htpp://yahoo.com"
                        ,
                        EM_Location = "makati city"
                        ,
                        EM_MapLink = "http://google.com/image.png"
                        ,
                        EM_MaxAttendee = null
                        ,
                        EM_RegEnd = new DateTime(2012, 4, 16)
                        ,
                        EM_RegStart = new DateTime(2012, 4, 16)
                        ,
                        EM_ReqAddress = null
                        ,
                        EM_ReqEmail = 1
                        ,
                        EM_ReqOrg = 1
                        ,
                        EM_ReqPhone = 1
                        ,
                        EM_ReqPhone2 = 1
                        ,
                        EM_ReqTitle = 1
                        ,
                        EM_ShowShip = 1
                        ,
                        EM_SkipAttendee = 1
                        ,
                        EM_Time = "10:00 am"
                        ,
                        EM_Type = "Type A"
                        ,
                        EM_isTemplate = 1
                        ,
                        EM_name = "Name me"
                        ,
                        EM_opt1Name = "optName1"
                        ,
                        EM_opt1Values = "optValues1"
                        ,
                        EM_opt2Name = "optName2"
                        ,
                        EM_opt2Values = "optValues2"
                        ,
                        EM_opt3Name = "optName3"
                        ,
                        EM_opt3Values = "optValues3"
                        ,
                        EM_opt4Name = "optName4"
                        ,
                        EM_opt4Values = "optValues4"
                        ,
                        EM_opt5Name = "optName5"
                        ,
                        EM_opt5Values = "optValues5"
                        ,
                        EM_opt6Name = "optName6"
                        ,
                        EM_opt6Values = "optValues6"
                        ,
                        EM_reqAgree1 = null
                        ,
                        EM_reqAgree2 = null
                        ,
                        EM_reqOpt1 = 1
                        ,
                        EM_reqOpt2 = 1
                        ,
                        EM_reqOpt3 = 1
                        ,
                        EM_reqOpt4 = 1
                        ,
                        EM_reqOpt5 = 1
                        ,
                        EM_reqOpt6 = 1

                    };
                    listtblsbaemConfig.Add(tblSbAemEvent);
                }
                return listtblsbaemConfig;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T03:22:13.417

抱歉，已经有一段时间了，您可能已经解决了数千次问题。但是我今天也遇到了这个问题，我对这个错误有了一些了解。

“以下设置不匹配”意味着您有一个模拟设置，但从未调用过。

这意味着你认为

> pricepack.Delete(a)

应该调用。但实际上它从未被调用过。

如果您知道为什么不调用它并且您认为这是正确的行为，请删除设置。否则，您可能需要调查为什么不调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:42:37.380

将语句更改`pricepackPersistenceMock.Setup(pricepack => pricepack.Delete(It.Is<tbl_SBAem_PricePackages>(a => a.PP_EventID == currentevent.EventMngID))).Verifiable();`为 `pricepackPersistenceMock.Setup(pricepack => pricepack.Delete(It.IsAny<Func<tbl_SBAem_PricePackages, bool>>())).Verifiable();`

```
 public void EventService_Return_10_Events()
        {
            var eventPersistenceMock = new Mock<IEventRepository>();
            var pricepackPersistenceMock = new Mock<IPricePackRepository>();
            var regformPersistenceMock = new Mock<IRegFormRepository>();
            var attendeePersistenceMock = new Mock<IAttendeeRepository>();
            var eventlists = GetEvents();
            var pricepacks = GetPricepacks();
            var currentevent = eventlists.ToList()[1];
            eventPersistenceMock.Setup(r => r.GetAll()).Returns(eventlists);
            eventPersistenceMock.Setup(u => u.Single(It.IsAny<Func<tbl_SBAem_Event, bool>>())).Returns(eventlists.Where(a => a.EventMngID == currentevent.EventMngID).Single());
            eventPersistenceMock.Setup(r => r.Delete(currentevent)).Verifiable();
            eventPersistenceMock.Setup(r => r.SaveChanges()).Verifiable();

             pricepackPersistenceMock.Setup(pricepack => pricepack.GetAll()).Returns(pricepacks);
             pricepackPersistenceMock.Setup(pricepack => pricepack.Delete(It.IsAny<Func<tbl_SBAem_PricePackages, bool>>())).Verifiable();
             pricepackPersistenceMock.Setup(pricepack => pricepack.SaveChanges()).Verifiable();

             regformPersistenceMock.Setup(rgform => rgform.Delete(It.IsAny<Func<tbl_SBAem_RegForm,bool>>())).Verifiable();
             regformPersistenceMock.Setup(rgform => rgform.SaveChanges()).Verifiable();

             attendeePersistenceMock.Setup(atnd => atnd.Delete(It.IsAny<Func<tbl_SBAem_Attendee,bool>>())).Verifiable();
             attendeePersistenceMock.Setup(atnd => atnd.SaveChanges()).Verifiable();

            var eventservice = new EventService(eventPersistenceMock.Object,pricepackPersistenceMock.Object,regformPersistenceMock.Object,attendeePersistenceMock.Object);

            Assert.AreEqual(eventservice.EventLists().Count, 10);
            Assert.AreEqual(eventservice.CustomizedQuestions(1).EventMngID, 1);
            Assert.IsTrue(eventservice.DeletePage(currentevent.EventMngID));

            eventPersistenceMock.Verify();
            pricepackPersistenceMock.Verify();    
            regformPersistenceMock.Verify();
            attendeePersistenceMock.Verify();
        } 
```

# c++ - 如何从 Matlab 调用具有多个输出的 C++ 函数？

> ID：10331247
> 
> 赞同：2
> 
> 时间：2012-04-26T10:02:27.577
> 
> 标签：c++, matlab, mex

我有一个 C++ DLL，我使用`calllib`. 我可以轻松调用仅具有输入参数的 C++ 函数或返回`mxArray`.

现在我无法调用具有多个输出参数的函数。比方说，我需要这个 Matlab 函数的 C++ 等价物，它返回一个矩阵和一个整数。

```
function [matrix, status] = foo()
status = 42;
matrix = ones(3,2);
end 
```

无论我尝试什么，它都会使 Matlab 崩溃，例如：

```
DLL_API void foo(mxArray* iop_matrix, int* op_status)
  {
  mxSetM(iop_matrix, 3);
  mxSetN(iop_matrix, 2);
  *op_status = 42;
  } 
```

但是，当我只需要一个输出参数时，我可以很容易地让它工作

```
DLL_API mxArray* foo(void)
  {
  return mxCreateNumericMatrix(3, 2, mxDOUBLE_CLASS, mxREAL);
  } 
```

在 C++ 中这种函数的正确实现是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:23:11.670

Matlab 函数的第一个输出参数应声明为 C 函数的输出参数。Matlab 函数的第二个输出参数应声明为 C 函数的第一个输入参数，该参数具有`mxArray **`类型等。

具有多个输出参数的 C++ 函数应如下所示

`mxArray *foo(mxArray **matrix);`

如果在这种情况下函数包含输入参数，则函数声明为

`mxArray *foo(mxArray **matrix, mxArray *_1stInpParam, mxArray *_2ndInpParam);`

# c# - 如何检查 GridView 是否包含 Button 字段

> ID：10331252
> 
> 赞同：1
> 
> 时间：2012-04-26T10:03:01.537
> 
> 标签：c#, gridview, buttonfield

我的问题是：

我有一个 GridView，它包含一个列（按钮字段）。现在我想在运行时知道我的 Grid 是否包含 Button 字段。

```
 foreach (DataColumn col in Table.Columns)
                {
                    ButtonField btnfield = new ButtonField();
                    btnfield.ButtonType = ButtonType.Image;

                    if (grid.Columns.Contains(btnfield))
                    {
                        grid.Columns.RemoveAt(grid.Columns.IndexOf(btnfield));
                    }

                } 
```

此代码不起作用。我想在没有行数据绑定的情况下完成这项任务。

问候祖海布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:59:54.713

如果我在这里得到您的问题，那么您要做的是：

```
foreach (GridViewRow row in YourGridView.Rows)
{
    //This should get the control in the cell, you could use FindControl too.
    Control ctrl = row.Cells[columnIndex].Controls[0];
    //Check the control type
    if (ctrl.GetType() == typeof(ButtonField))
    {
    }
} 
```

# javascript - 此 Javascript 片段的 W3C 验证错误

> ID：10331254
> 
> 赞同：1
> 
> 时间：2012-04-26T10:03:07.887
> 
> 标签：javascript, validation

我在使用这个 Javascript 代码时遇到了 w3c 验证错误，想知道一位善良的绅士/女士是否会抽出一点时间来看看。

```
// hide all element nodes within some parent element
function hideAll(parent) {
    var children = parent.childNodes, child;
    // loop all the parent's children
    for (var idx=0, len = children.length; idx<len; ++idx) { /* ERROR HERE */
        child = children.item(idx);
        // if element node (not comment- or textnode)
        if (child.nodeType===1) {
            // hide it
            child.style.display = 'none';
        }
    }
} 
```

**错误是：**

*   元素“len”未定义
*   特点 ”;” 属性规范列表中不允许

分号 at`idx<len;`是出错的地方。

有人可以解释我在上面的代码片段中哪里出错了吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:04:28.607

将其更改为：

```
// hide all element nodes within some parent element
function hideAll(parent) {
    var children = parent.childNodes, child;
    // loop all the parent's children
    var len = children.length;
    for (var idx=0; idx<len; ++idx) { /* ERROR HERE */
        child = children.item(idx);
        // if element node (not comment- or textnode)
        if (child.nodeType===1) {
            // hide it
            child.style.display = 'none';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:11:16.573

```
 **// hide all element nodes within some parent element

             function hideAll(parent) 
             {
                var children = parent.childNodes, child;

                // loop all the parent's children
                var len=children.length;

                 for (var idx=0; idx<len; ++idx) 
                 { /* ERROR HERE */

                   child = children.item(idx);

                    // if element node (not comment- or textnode)

                     if (child.nodeType===1) 
                     {
                         // hide it
                         child.style.display = 'none';
                     }
                } 
         }** 
```

# php - 合并两个数组

> ID：10331261
> 
> 赞同：0
> 
> 时间：2012-04-26T10:03:50.277
> 
> 标签：php

我必须数组。这是第一个：

```
array(3) 
{
  [0]=> string(10) "image1.jpg"
  [1]=> string(10) "image2.jpg"
  [2]=> string(10) "image3.jpg"
} 
```

第二个：

```
array(3)
{
[0]=> object(stdClass)#22 (4) 
   { 
    ["id"]=> string(1) "1" 
    ["name"]=> string(6) "Name 1"
    ["file"]=> string(15) "f1335421531.zip"
    ["desc"]=> string(6) " "
   }
[1]=> object(stdClass)#23 (4) 
   {
    ["id"]=> string(1) "2"
    ["name"]=> string(6) "Name 2"
    ["file"]=> string(15) "f1335421552.zip"
    ["desc"]=> string(6) " "
   }
[2]=> object(stdClass)#24 (4)
   {
    ["id"]=> string(1) "3"
    ["name"]=> string(6) "Name 3"
    ["file"]=> string(15) "f1335421588.zip"
    ["desc"]=> string(6) " " 
   }
 } 
```

如何将这些数组合并为一个包含以下项目：

```
[0]=> object(stdClass)#22 (4) 
   { 
    ["id"]=> string(1) "1" 
    ["name"]=> string(6) "Name 1"
    ["file"]=> string(15) "f1335421531.zip"
    ["desc"]=> string(6) " "
    ["img"]=> string(10) "image1.jpg"
   } 
```

等等

是否有任何功能可以做到这一点，或者我可能需要编写循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:08:20.527

第一个数组，称之为 $images

秒数组称之为 $objects

```
for($i=0; $i<count($objects); $i++){
    $object['img'] = $images[i];
}

var_dump($objects); //Check the result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:09:56.503

您需要将第二个数组的每个元素转换为当前为对象类型的数组类型，然后使用 array_merge 函数对其进行迭代，您可以实现您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:12:09.950

我认为没有特定的 php 函数，所以请尝试以下操作：

```
foreach ($array2 as $i => &$item) {
  $item->img = $array2[$i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:15:38.677

尝试

```
$std1 = new stdClass ();
$std1->id = "1";
$std1->name = "Name 1";
$std1->file = "f1335421531.zip";
$std1->desc = "";

$std2 = new stdClass ();
$std2->id = "2";
$std2->name = "Name 2";
$std2->file = "f1335421552.zip";
$std2->desc = "";

$std3 = new stdClass ();
$std3->id = "3";
$std3->name = "Name 3";
$std3->file = "f1335421588.zip";
$std3->desc = "";

$obj = array (
        $std1,
        $std2,
        $std3 
);
$image = array (
        "image1.jpg",
        "image2.jpg",
        "image3.jpg" 
);

for($i = 0; $i < count ( $obj ); $i ++) {
    $obj [$i]->img = $image [$i];
}

var_dump ( $obj ); 
```

输出

```
array
  0 => 
    object(stdClass)[1]
      public 'id' => string '1' (length=1)
      public 'name' => string 'Name 1' (length=6)
      public 'file' => string 'f1335421531.zip' (length=15)
      public 'desc' => string '' (length=0)
      public 'img' => string 'image1.jpg' (length=10)
  1 => 
    object(stdClass)[2]
      public 'id' => string '2' (length=1)
      public 'name' => string 'Name 2' (length=6)
      public 'file' => string 'f1335421552.zip' (length=15)
      public 'desc' => string '' (length=0)
      public 'img' => string 'image2.jpg' (length=10)
  2 => 
    object(stdClass)[3]
      public 'id' => string '3' (length=1)
      public 'name' => string 'Name 3' (length=6)
      public 'file' => string 'f1335421588.zip' (length=15)
      public 'desc' => string '' (length=0)
      public 'img' => string 'image3.jpg' (length=10) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T10:53:26.110

```
Try this:
$arr=array("image1.jpg","image2.jpg","image3.jpg");
$obj= array((object)array("id"=>"1","name"=>"name1","file"=>"asdb1.zip","desc"=>" "),
            (object)array("id"=>"2","name"=>"name2","file"=>"asdb2.zip","desc"=>" "),
            (object)array("id"=>"3","name"=>"name3","file"=>"asdb3.zip","desc"=>" ")
  );
for($i=0;$i<count($obj);$i++){
    $newObj=(array)$obj[$i];
    $newObj['img']=$arr[$i];
    $newArr[]=(object)$newObj;  
}
echo "<pre>";var_dump($newArr);echo "</pre>"; 
```

# emacs - Emacs：打开特定的信息部分

> ID：10331262
> 
> 赞同：2
> 
> 时间：2012-04-26T10:03:50.173
> 
> 标签：emacs, elisp

当我这样做时`describe-function info`，文档说：`Called from a program, FILE-OR-NODE may specify an Info node of the form "(FILENAME)NODENAME".`

我使用这种语法打开 Emacs 手册中的特定部分，例如`eval-expression (info "(emacs)mark")`.

但现在我有三个问题：

*   如何找出某个信息文件的文件名？（例如：Emacs Lisp Intro 的“elisp”）
*   怎么查到段名？（例如：“11 The Mark and the Region”的“mark”）
*   是否可以在调用之前列出信息文件及其部分`eval-expression`？
*   可选：是否可以在不运行信息模式的情况下完成上述所有操作？

为了澄清，我的问题源于节点名称（例如：“Shell”）和相应部分的标题（例如：“36 Running Shell Commands from Emacs”）不同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T11:08:07.310

> *   如何找出某个信息文件的文件名？（例如：Emacs Lisp Intro 的“elisp”）

`C-h``m`从`*info*`缓冲区中将告诉您该`c`键将`Put name of current Info node in the kill ring`（以及在回显区域中显示它）。从那里你可以`C-y`像往常一样拉它。

括号中的节点名称部分*是*文件的名称（减去其后缀和目录路径）。

要获取*包含*其目录路径的文件名（但仍减去任何后缀），您可以调用`(Info-find-file "file")`相关文件（在您的示例中为“emacs”）。

请注意，文件的后缀（如果有）可以是`Info-suffix-list`变量中的任何内容。

实际上，您*也可以*`info`将完整的文件路径作为参数传递给函数。这*通常*不太有用，但如果您设法最终得到冲突的信息文件，可能会很方便。以交互方式，`C-u``C-h``i`将提示您输入完整的文件名。

（要以交互方式输入节点名称，您可以使用`C-h``i``g`。）

> *   怎么查到段名？（例如：“11 The Mark and the Region”的“mark”）

这与第一个问题基本相同，只是它是您想要的括号后面*的节点名称部分。*再次，只是`c`用来找出。

> *   是否可以在使用 eval-expression 调用之前列出信息文件及其部分？

我不完全确定你的意思，但也许这些有帮助？

*   `d`将跳转到主目录（就像`C-h``i`你最初那样）。这是从变量`dir`目录中找到的所有文件生成的。`Info-directory-list`每个`dir`文件都包含每个文件的路径，但您不太可能需要查看这些路径。

*   `<`或`t`带您到文件的顶级节点，该节点通常显示文件的顶级内容。

*   `T`打开当前文件的全合一页目录。

*   `I`为您提供与当前文件匹配的模式的索引条目。

*   `C-s`可以搜索当前文件的所有节点（只需在每次点击当前节点的末尾再次键入它即可开始下一个搜索）。

*   `M-x` `info-apropos`可用于搜索*所有*信息文件。

显然，一旦您通过任何方法到达特定节点，您就可以使用`c`它来找出它的名称。

同样如前所述，一旦您进入`*info*`缓冲区，您可以使用相同的语法键入`g`以转到任何信息文件中的任何节点。如果您已经在该文件中，则`(file) node`可以省略，或者省略以到达指定文件的顶部节点。您可能更喜欢也可能不喜欢使用`(file)``node`
`M-:` `(info "(file) node")` `RET`

作为一种特殊情况，`g``*``RET`将整个当前信息文件呈现在单个缓冲区中。

关于一般主题的其他有用问答：

*   [同时读取多个 Emacs 信息文件](https://stackoverflow.com/questions/2289256/reading-multiple-emacs-info-files-simultaneously)
*   [如何在信息模式下在 emacs 中打开 *.info 文件？](https://stackoverflow.com/questions/1921049/how-to-open-info-file-in-emacs-in-info-mode)
*   [信息索引（在 emacs 内和非 emacs 内）](https://stackoverflow.com/questions/8122214/info-indexing-within-and-without-emacs)

还：

*   [http://www.emacswiki.org/emacs/InfoMode](http://www.emacswiki.org/emacs/InfoMode)

而且当然：

*   `M-:` `(info "(info) Top")` `RET`
*   `C-h``i``h`
*   `C-h``i``?`

# c++ - 尝试使用 Boost-Spirit 解析类似 SQL 的语句

> ID：10331264
> 
> 赞同：2
> 
> 时间：2012-04-26T10:03:55.337
> 
> 标签：c++, boost-spirit

我是 boost::spirit 的新手。我编写了解析 SQL 语句的程序，例如“select * from table where conditions”。它编译失败。报告了大量模板错误。那么，有人会帮助我吗？

```
#include <iostream>
#include <string>
#include <boost/spirit/include/qi.hpp>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

struct db_select {
    void exec() {}

    std::string filed;
    std::string table;
    std::string condition;
};

std::ostream& operator<<(std::ostream& os, const db_select& se) {
    return os << "filed: " << se.filed << " table: " << se.table << " condition: " << se.condition;
}

template <class Iterator>
struct selecter : qi::grammar<Iterator, db_select (), ascii::space_type> {
    selecter() : selecter::base_type(se) {
            se %= "select" >> +qi::char_ << "from" << +qi::char_ << "where" << +qi::char_;
    } 

    qi::rule<Iterator, db_select (), ascii::space_type> se;
};

int main(int argc, char* argv[]) {
    if (argc < 2)
            return -1;

    std::string str(argv[1]);
    const char* first = str.c_str();
    const char* last = &str[str.size()];
    selecter<const char*> se;
    db_select rst;

    bool r = qi::phrase_parse(first, last, se, ascii::space, rst);
    if (!r || first != last) {
            std::cout << "parse failed, at: " << std::string(first, last) << std::endl;
            return -1;
    } else
            std::cout << "success, " << rst << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T19:02:02.973

^(**编辑**最后在电脑后面，修改后的答案：)

有三件事需要注意

### 1\. 语法错误

解析器表达式包含错误（`<<`而不是`>>`预期的）。这导致了很多编译错误。注意`*******`编译器错误中的出现：

```
/.../qi/nonterminal/rule.hpp|176 col 13| error: no matching function for call to ‘assertion_failed(mpl_::failed************ 
```

旨在引导您找到源代码中的相应注释：

```
// Report invalid expression error as early as possible.
// If you got an error_invalid_expression error message here,
// then the expression (expr) is not a valid spirit qi expression.
BOOST_SPIRIT_ASSERT_MATCH(qi::domain, Expr); 
```

很容易固定。一个下来，两个去！

### 2.调整结构

为了将您的数据类型分配为规则属性，您需要使其*fusion compatible*。最方便的方法：

```
 BOOST_FUSION_ADAPT_STRUCT(db_select,
    (std::string,field)(std::string,table)(std::string,condition)); 
```

现在代码*编译*。但是解析失败。还有一个：

### 3\. 词素

此外，您还需要采取措施避免使用 +qi::char_ 表达式“吃掉”您的查询关键字。

作为基础，考虑将其编写为

```
 lexeme [  (!lit("where")  >> +qi::graph) % +qi::space ] 
```

*   `lexeme`禁止封闭表达式的船长
*   `!`断言指定的关键字**不能**匹配

最后，查看文档以`qi::no_case`进行不区分大小写的匹配。

## 完整代码

```
#include <iostream>
#include <string>
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>

namespace qi = boost::spirit::qi;

struct db_select {
    void exec() {}

    std::string field;
    std::string table;
    std::string condition;
};

BOOST_FUSION_ADAPT_STRUCT(db_select,(std::string,field)(std::string,table)(std::string,condition));

std::ostream& operator<<(std::ostream& os, const db_select& se) {
    return os << "field: " << se.field << " table: " << se.table << " condition: " << se.condition;
}

template <class Iterator>
struct selecter : qi::grammar<Iterator, db_select (), qi::space_type> {
    selecter() : selecter::base_type(se) {
        using namespace qi;
        se %= "select"
            >> lexeme [ (!lit("from")  >> +graph) % +space ] >> "from"
            >> lexeme [ (!lit("where") >> +graph) % +space ] >> "where" 
            >> +qi::char_;
    } 

    qi::rule<Iterator, db_select (), qi::space_type> se;
};

int main(int argc, char* argv[]) {
    if (argc < 2)
            return -1;

    std::string str(argv[1]);
    const char* first = str.c_str();
    const char* last = &str[str.size()];
    selecter<const char*> se;
    db_select rst;

    bool r = qi::phrase_parse(first, last, se, qi::space, rst);
    if (!r || first != last) {
            std::cout << "parse failed, at: " << std::string(first, last) << std::endl;
            return -1;
    } else
            std::cout << "success, " << rst << std::endl;

    return 0;
} 
```

## 测试：

```
g++ test.cpp -o test
./test "select aap, noot, mies from table where field = 'value'" 
```

输出：

```
success, field: aap,noot,mies table: table condition: field='value' 
```

# oracle - 如何在两个表中拥有唯一的主键？

> ID：10331265
> 
> 赞同：0
> 
> 时间：2012-04-26T10:04:02.450
> 
> 标签：oracle, unique, primary-key

我的系统中有两个表`EMPLOYEE`，`EMPLOYEE_FORECAST`. 两者都有相同的列，整个结构相同。我有另一个具有相同结构的存档表，称为`EMPLOYEE_ARCHIVE`表。

我需要将两个表中的数据放到这个存档表中。由于`EMPLOYEE`和中的记录`EMPLOYEE_FORECAST`可能具有相同的主键，例如，一条记录`EMPLOYEE`的 pk 为 100，而另一条记录的`EMPLOYEE_FORECAST`pk 也可能为 100，这肯定会发生，因此当它们插入存档表时，我将有一个重复的主键.

问题是我也会有一些关系表，比如`employee_products`，`employee_forecast_products`还有`employee_archive_products`。这些表将具有`emp_id`和`product_id`。因此，`emp_id`我将无法找出确切的员工。

`EMPLOYEE`那么，有没有办法让表和表都有唯一的主键`EMPLOYEE_FORECAST`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:17:37.913

创建一个通用超级表。创建另一个只有主键的表 EMPLOYEE_ID。让 EMPLOYEE、EMPLOYEE_FORECAST 和 EMPLOYEE_ARCHIVE 都引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:12:34.333

所以不能不使用 EMPLOYEE 表的 PK 列作为归档表的 PK 列。

您可以将新的 PK 列添加到存档表。

如果出于某种原因，您希望 EMPLOYEE 表的 PK 列成为存档表中的 PK，那么您可以在存档表中添加一个标志列，以指示记录来自哪个表。您可以在包含原始 PK 和标志列的存档表中拥有一个复合 PK。（一般来说，我不鼓励复合 PK-s，因此，即使您想拥有此标志列，您也可以在存档中添加一个额外的普通 PK 列。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:12:41.667

要扩展我的评论，请将存档表设置为：

```
EMPLOYEE
EMPID   NUMBER PK
EMPNAME VARCHAR2(30)
...

EMPLOYEE_FORECAST
EMPID   NUMBER PK
EMPNAME VARCHAR2(30)
...

EMPLOYEE_ARCHIVE
ORIG_TABLE VARCHAR2(30) PK
EMPID      NUMBER       PK
EMPNAME    VARCHAR2(30)
... 
```

中的数据`EMPLOYEE_ARCHIVE`：

```
ORIG_TABLE        EMPID      EMPNAME
------------------------------------
EMPLOYEE          100        JO BLOGGS
EMPLOYEE_FORECAST 100        JO BLOGGS 
```

由于存档表 PK 跨越原始表和 empid 列，因此它将对您的所有数据保持唯一性。

显然这只是一个示例，您可以使用任何您想要在存档表中强制执行唯一性的派生列。

希望能帮助到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:39:40.157

您的数据模型似乎有点混乱。如果 EMPLOYEE 和 EMPLOYEE_FORECAST 具有相同的结构，为什么要有两个表？这里的商业规则是什么？

如果它们应该是两个单独的表，为什么要将它们存储在一个公共存档表中？为什么不为每张桌子单独存档？

我同意@Ollie。您需要重新考虑您的数据模型，以便它清楚地表达您的业务运作方式。如果您在此处发布您的业务规则，我相信我们可以帮助您解决问题。但这可能是关键问题：以下键是识别一名员工（即现实世界中的一个人）还是两个？

```
employee.emp_id = 100
employee_forecast.emp_id = 100 
```

# c# - ASP.NET：处理母版页。行政项目

> ID：10331268
> 
> 赞同：0
> 
> 时间：2012-04-26T10:04:03.503
> 
> 标签：c#, asp.net, master-pages, admin, visibility

我试图了解这是如何工作的。我的想法是使用这样的母版页制作可管理的项目：

`Admin Head Section`
`User Head Section`
`-----------------`
`Admin Content PlaceHolder`
`User Content PlaceHolder`

1) 应该使用单个母版页还是 2 (Admin.Master + Main.Master) 来完成？
2) 如果用户未在数据库背后的代码中进行身份验证，是否可以隐藏管理部分？

整个想法是在目标 .aspx 页面中编写最少的代码（2 个目录：1 个用于管理任务，1 个用于普通用户操作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:08:39.600

我认为[嵌套母版页](http://msdn.microsoft.com/en-us/library/x2b3ktt7.aspx)会对您有很大帮助，或者至少它是处理这种设计的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:10:34.960

如果您使用的是内置的 FormsAuthentication 和 AspNetSqlMembershipProvider，那么我将使用一个母版页，并使用该`LoginView`控件。请参阅此处[http://msdn.microsoft.com/en-us/library/cc295194.aspx](http://msdn.microsoft.com/en-us/library/cc295194.aspx)

通过这种方式，您可以自定义用户在登录时看到的内容，以及他们订阅的角色。

然后，您可以将所有管理页面放在一个文件夹中，并将您对该文件夹的访问权限设置为只允许具有管理员角色的用户访问。这样，如果有人导航到此文件夹中的页面，他们将自动被重定向离开该文件夹。

# jquery - 让 jQuery 移动滚动视图也可以在桌面上工作？

> ID：10331277
> 
> 赞同：0
> 
> 时间：2012-04-26T10:04:40.260
> 
> 标签：jquery, internet-explorer, mobile, scrollview

我目前有一个可在桌面浏览器和平板电脑上运行的 Web 应用程序。除了 jquery 移动滚动视图之外，我得到了一切工作并听取了正确的事件类型。

我将此插件用于底部的导航栏。它适用于除 Internet Explorer 之外的所有浏览器。有谁知道要更改文件中的哪些内容以使其正常工作？

我还找到了插件 iScroll，但这个插件没有提供相同的功能。如果可能的话，我宁愿继续使用 jquery mobile scrollview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:29:19.370

为了让jquery mobile scrollview能和IE一起工作，修改jquery.mobile.scrollview.js第22行为： > scrollMethod: "scroll", // "translate", "position", "scroll" 这是默认设置的关于翻译，IE 不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:38:51.137

您可以在创建对象时通过首先检查浏览器是否为 IE 来设置选项，而不是编辑 jquery.mobile.scrollview.js：

```
if($.browser.msie){
   opts.scrollMethod = "scroll";
} 
```

在页面创建功能中使用它

```
var $page = $( this );

// For the demos that use this script, we want the content area of each
// page to be scrollable in the 'y' direction.

//$page.find( ".ui-content" ).attr( "data-" + $.mobile.ns + "scroll", "y" );

// This code that looks for [data-scroll] will eventually be folded
// into the jqm page processing code when scrollview support is "official"
// instead of "experimental".

$page.find( ":jqmData(scroll):not(.ui-scrollview-clip)" ).each(function () {
    var $this = $( this );
    // XXX: Remove this check for ui-scrolllistview once we've
    //      integrated list divider support into the main scrollview class.
    if ( $this.hasClass( "ui-scrolllistview" ) ) {
        $this.scrolllistview();
        scrollViewObj = $this;
    } else {
        var st = $this.jqmData( "scroll" ) + "",
            paging = st && st.search(/^[xy]p$/) != -1,
            dir = st && st.search(/^[xy]/) != -1 ? st.charAt(0) : null,

            opts = {
                direction: dir || undefined,
                paging: paging || undefined,
                scrollMethod: $this.jqmData("scroll-method") || undefined
            };

        if($.browser.msie){
            opts.scrollMethod = "scroll";
        }
        $this.scrollview( opts );
        scrollViewObj = $this;
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:21:11.030

它可能无法在 IE 上运行。jQuery mobile 非常基于 HTML5，IE 不太符合 HTML5。

最好的办法是查看[chrome 框架](https://developers.google.com/chrome/chrome-frame/)，让 Google 解决 IE 中缺乏 HTML5 支持的问题。实现起来非常简单，网站上有模板，它也应该加速网站上的其余 JavaScript。

希望有帮助！

# ruby - heroku 更新错误

> ID：10331290
> 
> 赞同：2
> 
> 时间：2012-04-26T10:05:06.053
> 
> 标签：ruby, macos, heroku, osx-lion

更新heroku后，当我再次尝试更新heroku时：

```
$ heroku update
/Users/ohho/.heroku/client/lib/heroku/command/update.rb:14:in `index': undefined method `disable' for Heroku::Updater:Module (NoMethodError)
from /Users/ohho/.heroku/client/lib/heroku/command.rb:148:in `run'
from /usr/bin/heroku:27:in `<main>' 
```

我该如何解决？

```
$ heroku status
All Systems Go: No known issues at this time.
$ heroku version
2.25.0
$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]
$ rvm -v
rvm 1.12.3 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:06:11.150

我刚试过，它对我有用。我在雪豹上，Ruby 1.9.3p290。它更新到 2.25.0。发现此 SO 链接 [Heroku 工具带在上次更新后无法运行](https://stackoverflow.com/q/8899029/1308014)

即使它适用于 Ubuntu。基本上他们删除并重新安装了heroku-toolbelt。

# contacts - 如何在 joomla 2.5 中为联系人添加多个图像？

> ID：10331293
> 
> 赞同：0
> 
> 时间：2012-04-26T10:05:39.760
> 
> 标签：contacts, joomla2.5

我正在使用 joomla 内置的联系人扩展来添加联系人。在此扩展中，有一个用于联系详细信息的部分。在那里，我们可以为联系人提供图像。

但我想为单个联系人显示 2 张图像。我怎么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:09:16.893

Joomla`com_contact`扩展程序并非旨在为联系人显示多个图像。

考虑以下选项：

1.  创建 1 个结合 2 个图像（并排或垂直）的图像
2.  在联系人描述中添加图片`style="float:right"`
3.  重载模板`/templates/your_template/html/com_contacts/contact/default.php`
4.  查看其他扩展，例如[aiContactSafe](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms/7901)

# java - 组件更改大小后文本消失

> ID：10331298
> 
> 赞同：2
> 
> 时间：2012-04-26T10:05:58.503
> 
> 标签：java, swing, jtextpane, jeditorpane

我在上面创建了一个jTable，以及TableCellRenderer，TableCellEditor。我需要把可编辑的（文本/html 上下文类型）JEditorPane 放在那里。当我在里面写一些文本并调整组件大小时，文本消失了。我做错了什么？此外，在此组件上方，我有带有文本版本的按钮：例如：

```
JButton bold = new JButton():
bold.setAction(new StyledEditorKit.BoldAction()); 
```

它是我的自定义模型的一部分：

```
private JEditorPane editorTxtPane = new JEditorPane("text/html", "");
private JEditorPane rendererTxtPane = new JEditorPane("text/html", "");
private final JPanel editorPanel = new JPanel();
private final JPanel rendererPanel = new JPanel();
private final ArrayList<FocusListener> editorFocusListeners = new ArrayList<FocusListener>();

public SampleModel() {
    super();

    rendererTxtPane.setContentType("text/html");
    editorTxtPane.setContentType("text/html");

    rendererPanel.add(initCellControls(rendererPanel, rendererLabel));
    rendererPanel.add(rendererTxtPane);

    editorPanel.add(initCellControls(editorPanel, editorLabel));
    JScrollPane sp = new JScrollPane(editorTxtPane);
    sp.setBorder(null);
    editorPanel.add(sp);

    editorTxtPane.addFocusListener(new FocusAdapter() {

        @Override
        public void focusGained(FocusEvent e) {
            super.focusGained(e);
            e.setSource(editorTxtPane);
            for (int i = editorFocusListeners.size() - 1; i >= 0; i--) {
                editorFocusListeners.get(i).focusGained(e);
            }
        }

        @Override
        public void focusLost(FocusEvent e) {
            super.focusLost(e);
            e.setSource(editorTxtPane);
            for (int i = editorFocusListeners.size() - 1; i >= 0; i--) {
                editorFocusListeners.get(i).focusLost(e);
            }
        }
    });
} 
```

这是我的编辑器和渲染器方法：

```
@Override
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    Comment c = data.get(row);
    rendererTxtPane.setText(c.getComment());
    return rendererPanel;
}

@Override
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
    Comment c = data.get(row);
    c.setNeedSave(true);
    editorTxtPane.setText(c.getComment());
    return editorPanel;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:58:16.303

这*不是*[*编辑器和渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的工作方式。特别是，编辑器仅在编辑单元格时有效。您`TableModel`应该存储每一行​​的`Document`. 编辑结束后，您的模型将使用修订后的 更新，如此[处](https://stackoverflow.com/a/10067560/230513)`Document`所述。您可以将您所做的与[示例](https://stackoverflow.com/a/10067560/230513)进行比较，这可能构成您的[sscce](http://sscce.org/)的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:15:46.627

这可能是以下两种情况之一的结果：

1.  您嵌入在可调整组件中的文本组件正在通过调整机制的过程被移出，因此当您调整它时，内部文本组件正在消失
2.  每当进行重绘过程时，平台不会在适当的时候调用标准的Swing重绘过程，因此您可以通过编码手动调用重绘。SWING 平台通常会在注意到整个 GUI 发生变化时自动调用 repaint 方法，但它会在其他一些进程完成后运行，在这种情况下手动调用 repaint 是不可避免的

# sharepoint - 是否可以对 SharePoint 列表元素单击事件上的单击事件做出反应？

> ID：10331301
> 
> 赞同：0
> 
> 时间：2012-04-26T10:06:04.597
> 
> 标签：sharepoint, events, click

是否可以对 SharePoint 列表元素单击事件上的单击事件做出反应？我在 SharePoint 网站上有一个列表。字段之一是超链接。当我点击这个超链接时，我想做出反应。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-07T06:50:37.503

是的，您有可能提供这样的 onclick 事件..可能对您有帮助

```
<div onClick={this.handleclick.bind(this)}/> 
```

# iphone - UIWebView 字体大小和 UItextView 字体大小的区别

> ID：10331302
> 
> 赞同：2
> 
> 时间：2012-04-26T10:06:14.020
> 
> 标签：iphone, objective-c, ipad, uiwebview, uitextview

谁能告诉我 UIWebView 的字体大小属性和 UITextView 的 FontSize 属性之间的主要区别是什么？

两者都是不同的，因为 UIWebView 的 Fontsize 比 UITextView 的字体大小要大得多，所以两者都是 15..

请告诉我，有什么区别？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:33:54.987

以下工作正常。

```
<html><body style="margin-top:0px; margin-left:0px"><marquee behavior="alternate" style="font-family:verdana;font-size:10px; color:red;">Test</marquee></font></body></html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:18:01.070

虽然两者都呈现 HTML，但主要区别在于，

**UIWebView**为您提供 HTML 视图，其字体大小取决于**ViewPort**，

**UITextView**可以控制其字体**大小**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:33:14.647

根据官方Objective C[网站](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html)：

“此类不支持文本的多种样式。您指定的字体、颜色和文本对齐属性始终适用于文本视图的全部内容。要在应用程序中显示更复杂的样式，您需要使用 UIWebView 对象和使用 HTML 呈现您的内容。”

我是如何理解的：在 UIVewView 上，您可以将其用作文本 HTML 标签，在 UITextView 中它将显示为纯文本。UIWebView 的字体大小取决于 ViewPort，您无法直接访问它，并且 UITextView 具有用于设置字体大小的属性。

# jquery - Jquery 自定义下拉菜单在 Internet Explorer 上不起作用

> ID：10331304
> 
> 赞同：0
> 
> 时间：2012-04-26T10:06:23.600
> 
> 标签：jquery, internet-explorer, twitter-bootstrap

我写了一些代码来将 jquery 下拉列表替换为 twitter bootstrap 中的下拉列表。 [http://jsfiddle.net/xuAQv/6/](http://jsfiddle.net/xuAQv/6/)

不幸的是，代码在 IE 9 或更低版本中无法正确运行。我不知道如何调试代码，并且在尝试 lint 代码后仍然有问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:41:24.593

解决了。这是 Jquery Prepend 的 Internet Explorer 问题。对于任何感兴趣的人，代码现在都在 jsfidde 上：http: [//jsfiddle.net/xuAQv/13/](http://jsfiddle.net/xuAQv/13/)

# javascript - JavaScript 中的“定义”是做什么用的（除了显而易见的）？

> ID：10331305
> 
> 赞同：167
> 
> 时间：2012-04-26T10:06:23.807
> 
> 标签：javascript, requirejs, requirejs-define, aloha

我已经在高低搜索了这方面的文档，但我在任何地方都找不到任何东西。

我正在使用 Aloha，并希望使用他们的侧边栏原型来创建我自己的新侧边栏，以附加到其他插件功能。

他们的 sidebar.js 就是从这个开始的，但是我一辈子都找不到任何文档来解释它的含义。

```
define( [
    'aloha/core',
    'aloha/jquery',
    'aloha/selection'
], function (Aloha, jQuery, Selection, Plugin) { 
```

然后它在那个包装器中继续定义一堆函数，所以`vars`和一些`proptotypes`- 我可以让我的头脑......

那是什么意思或我在哪里可以找到解释？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-04-26T10:11:13.983

如果没有看到整个脚本，我不能肯定地说，但它很可能是[`define`来自 RequireJS 的函数](http://requirejs.org/docs/api.html#define)，特别是该函数的“ [define with dependencies](http://requirejs.org/docs/api.html#defdep) ”形式。它用于定义“模块”：

> 模块与传统脚本文件的不同之处在于它定义了一个范围良好的对象，以避免污染全局命名空间。它可以显式列出其依赖项并获取这些依赖项的句柄，而无需引用全局对象，而是将依赖项作为定义模块的函数的参数接收。

而“define with dependencies”的形式`define`描述如下：

> 如果模块具有依赖项，则第一个参数应该是依赖项名称的数组，第二个参数应该是定义函数。加载所有依赖项后，将调用该函数来定义模块。该函数应该返回一个定义模块的对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-02-27T23:02:51.943

这是用于编写模块的 AMD 模式，AMD 代表异步模块定义，当您需要导入模块时基本上是异步的，而不是像 commonJS 之类的东西。

```
define(['module1', 'module2'], function(module1, module2) {
  console.log(module1.sayHi());
}); 
```

定义需要一个依赖数组，一旦所有这些都以非阻塞方式在后台（异步）加载，定义调用回调，回调反过来接受参数（在这种情况下是依赖）。

另一件需要注意的是，这些模块中的每一个也需要使用“define”关键字来定义。因此，例如 module1 的定义如下：

```
define([], function() {

  return {
    sayHi: function() {
      console.log('Hi Hi');
    },
  };
}); 
```

这种编写模块的方式 (AMD) 允许您在编写时考虑到浏览器兼容性（不像 nodeJS 中的 require()），您还可以定义多种格式，包括对象、JSON 等，例如 commonJS 需要模块作为对象。

请记住，AMD 有它自己的缺点。希望这可以帮助某人。

# freemarker - 如何在freemarker中查看日期？

> ID：10331307
> 
> 赞同：1
> 
> 时间：2012-04-26T10:06:50.733
> 
> 标签：freemarker

我在freemarker中有日期变量。我想检查日期是今天还是昨天。如果该日期是今天，则需要显示，`Today`否则显示`Yesterday`。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:19:19.740

如果您确定这些只是可能性（今天和昨天），那么您可以定义如下函数：

```
<#function isToday(aDate)>
  <#return .now?date?iso_local == aDate?date?iso_local>
</#function> 
```

然后您可以将其用作例如

```
${isToday(theDate)?string("today", "yesterday")} 
```

请注意，您需要 FreeMarker 2.3.17 或更高版本才能使该功能正常工作。还要注意服务器时区，因为它在本示例中使用（除非您在 FreeMarker 配置中手动设置...或`#setting`在模板中设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T08:57:49.420

${houradd(date, 1)?string("yyyy-MM-dd HH:mm:ss")}

${houradd(date, -1)?string("yyyy-MM-dd HH:mm:ss")}

# java - 字符串不变性内存问题

> ID：10331313
> 
> 赞同：4
> 
> 时间：2012-04-26T10:07:32.730
> 
> 标签：java, string

一旦 String 对象被创建，我们就无法修改它但是如果我们对它进行任何操作，JVM 将创建 New Object。在这里，通过创建新对象，JVM 会消耗更多内存。然后我认为这会导致内存问题，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:22:11.657

你是对的。绝对值得注意*这个*问题，即使它不会每次都影响您。

正如您所说，字符串在创建后无法更改 - 它们是不可变的，并且它们不会公开许多更改它们的方法。

但是，诸如 split() 之类的操作将在后台生成额外的字符串对象，并且**如果您持有对它们的引用，那么这些字符串中的每一个都会产生**[内存开销](http://www.javamex.com/tutorials/memory/string_memory_usage.shtml) 。

 **正如其他海报所指出的，对象会很小，垃圾收集通常会在旧对象超出范围后对其进行清理，因此您通常不必担心这一点。

但是，如果您正在做一些特定的事情并持有大量的字符串引用，那么这可能会咬到您。

根据您的用例 查看字符串[实习，注意链接页面上的警告。](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)

有两点需要注意：

1) 硬编码的字符串文字将被Java[自动实习](https://stackoverflow.com/questions/1855170/when-should-we-use-intern-method-of-string)，减少这种影响。

2) + 运算符在这方面更有效，它将在下面使用字符串生成器，从而提供性能和内存优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:09:11.887

不，那不是。如果您不持有指向 String 实例的强链接，它们最终将被垃圾收集器收集。

例如：

```
while (true) {
    new String("that is a string");
} 
```

在这个片段中，你不断地创建新的对象实例，但是你永远不会得到 OutOfMemoryException，因为创建的实例变成了垃圾（显然没有强链接）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:26:13.150

你必须知道的最大的内存问题是从一个大字符串中提取一个小子字符串。该子字符串共享原始字符串的 char 数组，即使原始字符串被 gc'd，巨大的 char 数组仍将被子字符串引用。解决方法是使用`new String(hugeString.substring(i))`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T10:09:54.643

它为新对象消耗更多内存，这是正确的。但这个事实本身并没有造成问题，因为垃圾收集器会迅速回收所有不可访问的内存。当然，您可以通过创建指向新创建的字符串的链接将其变成问题，但这将是您的程序的问题，而不是 JVM 的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T11:56:55.620

据我所知，**StringBuilder**（或用于线程安全的*StringBuffer*）对于管理 String 并使它们可变非常有用。

在一个巨大的字符串中操作一些字符不会“吃掉”内存中的许多字节。

它也更强大/更快的连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T19:48:58.310

由于字符串实例是不可变的，它可以被 jvm 重用。String 类使用享元设计模式实现，用于避免内存问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T10:17:14.090

未使用的对象由 GC 收集。

和不变性在java中有很多好处。

在 Java 中，尽可能多地实现不变性是一种很好的做法。

它们也可以安全地用于 Collections 框架中。

[检查这个](https://stackoverflow.com/questions/214714/mutable-vs-immutable-objects)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T10:09:49.420

产生的问题是产生垃圾的事实。虚拟机通过调用垃圾收集器来释放该垃圾使用的内存来解决此问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-26T10:10:16.250

一旦不再使用旧对象，垃圾收集器就可以将其删除。（这将在任何内存问题出现之前完成）。

如果要防止复制数据，请使用 StringBuilder。**

# macos - opengl 2.1中的多重采样抗锯齿？

> ID：10331316
> 
> 赞同：0
> 
> 时间：2012-04-26T10:07:40.733
> 
> 标签：macos, opengl, antialiasing, multisampling

我有一台带有 ATI radeon X1600 显卡的 2007 Macbook pro。我正在尝试使用多重采样功能使抗锯齿工作。

使用[GlView](http://www.realtech-vr.com/glview/)，这是我手头的信息：

渲染器信息是：

渲染器：ATI Radeon X1600 OpenGL 引擎供应商：ATI Technologies Inc. 内存：128 MB 版本：2.1 ATI-7.0.52 设备：MacBookPro2,2 着色语言版本：1.20 </p>

我检查了 arb_multisample 的扩展信息，它说：“提升为 OpenGL 1.3 中的核心功能”，那么假设在我的代码中我可以简单地说（就像我在 Opengl 2.1 上一样）是否正确：

`glEnable(GL_MULTISAMPLE)`

在我的应用程序代码中，我有一个数据结构，其中包含以下信息：顶点、索引和纹理，然后我使用 glDrawElements 等进行渲染。而且都是三角形网格。

代码看起来像这样：

```
 (capi:define-interface stad-viewer (capi:interface)
      ((double-buffered-p :initform t :initarg :double-buffered-p :accessor double-
          buffered-p))
      (:panes 
         (canvas opengl:opengl-pane
              :configuration (list :rgba t :depth t :depth-buffer 32 :double-buffered t)
              :min-width 1440 
              :min-height 900 
              :message "Stadium demo"
              :drawing-mode :quality
              :reader canvas
              :resize-callback 'resize-stad-canvas
              :display-callback 'redisplay-stad-canvas))
      (:layouts
         (main capi:column-layout '(canvas)))
      (:default-initargs :auto-menus NIL :title "Stadium Viewer"))    

;;; enable multisampling
(opengl:gl-enable opengl:*gl-multisample*)
(opengl:gl-sample-coverage 0.70 opengl:*gl-false*)

;;; some more opengl commands....

;;; rendering meshes
(dolist (wfmesh *wfmeshes*)
   (format t " ------ PREPARING MESH ---- ~A ~% " (mesh-name wfmesh))
   (multiple-value-bind (vertices indices)
        (prepare-mesh wfmesh)
      (let* ((gl-vertices (gl-vertexes vertices))
             (gl-indices (gl-indexes indices)))
        (if *texture-ids*
          (multiple-value-bind (texture-id found)
                    (gethash (mesh-name wfmesh) *texture-ids*)
             (when found
                (opengl:gl-bind-texture opengl:*gl-texture-2d* texture-id)
                (opengl:gl-tex-coord-pointer 2 opengl:*gl-float* 0 
                                                   (gl-texels (mesh-vertices wfmesh)   
                                                        1.0 t)))))      
        (opengl:gl-vertex-pointer 3 opengl:*gl-float* 0 gl-vertices)
        (opengl:gl-draw-elements opengl:*gl-triangles* 
                                   (length indices) 
                                   opengl:*gl-unsigned-int*
                                   gl-indices)))) 
```

我也如上所述启用了多重采样。[然而，这就是我得到的](http://picpaste.com/Screen_Shot_2012-04-26_at_3.28.10_PM-0eUlO03g.png)：

锯齿状的边缘清晰可见。

所以我的问题是：

1.  我对多重采样是核心功能的理解是否正确？
2.  只是启用多重采样和调用绘图代码工作还是需要更多步骤才能使多重采样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:26:31.503

你在使用 Cocoa NSOpenGLView 吗？因为那样你就可以在 Interface Builder 中启用多重采样。在任何情况下，您都必须专门使用示例缓冲区创建渲染上下文。无论如何， glEnable(GL_MULTISAMPLE) 是不够的。为了获得更具体的帮助，您需要说明如何创建 OpenGL 窗口/视图。

# php - 如何修改现有的 javascript 以显示包括美分在内的货币值？

> ID：10331318
> 
> 赞同：0
> 
> 时间：2012-04-26T10:07:46.563
> 
> 标签：php, javascript, currency, decimal

我正在处理的一个网站（我继承了它......我不太了解javascript）的代码当前设置为在数据库中任何数字的末尾显示“.00”（实际上是一个PHP包含页面) 使其在在线表格上显示为货币。

我的客户现在想要在列表中添加一个包含美分（5.50 美元）的金额，我需要帮助修改或修改脚本，以便我可以包含这些非整数金额。

这是（我认为/假设）解决货币格式的脚本片段：

```
function CurrencyFormatted(amount)
{
    var i = parseFloat(amount);
    if(isNaN(i)) { i = 0.00; }
    var minus = '';
    if(i < 0) { minus = '-'; }
    i = Math.abs(i);
    i = parseInt((i + .005) * 100);
    i = i / 100;
    s = new String(i);
    if(s.indexOf('.') < 0) { s += '.00'; }
    if(s.indexOf('.') == (s.length - 2)) { s += '0'; }
    s = minus + s;
    return s;
} 
```

有没有办法添加或更改此代码，以便我可以显示此（以及未来类似）金额所需的特定美分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:12:23.210

该代码正在做一些有趣的舍入操作，我无法真正解决这些问题，但是要格式化小数点右侧具有固定位数的数字，请对数字使用[`toFixed`](http://es5.github.com/#x15.7.4.5)函数：

```
var n = 1.2345;
n.toFixed(2); // "1.23" 
```

请注意，它会进行四舍五入，因此：

```
(1.234).toFixed(2); // "1.23"
(1.235).toFixed(2); // "1.24" 
```

（当你调用一个变量时你不需要括号`toFixed`，但是当你在文字上调用它时确实需要它们，就像我在上面的两个示例中所做的那样。自然，在你的情况下，你将使用一个变量所以不需要他们。）

* * *

在下面回复您的评论/问题：

> 感谢您的快速回复！我想我应该说我根本不知道 javascript，所以我的问题是：1）我在哪里将您提供的代码插入到我现有的代码中......

1）您在问题中引用的代码正在对输入的数字进行一系列操作，包括在尝试将其四舍五入为两位数之前添加半美分（以非常非最佳的方式）。如果现在的目标是忠实地再现输入数字的四舍五入到两位数的版本（这些都没有添加半美分的东西），你可以用这个替换整个函数：

```
function CurrencyFormatted(amount)
{
    return parseFloat(amount).toFixed(2);
} 
```

如果你想继续加半分：

```
function CurrencyFormatted(amount)
{
    return (parseFloat(amount) + 0.005).toFixed(2);
} 
```

> ...和 ​​2) 这是否允许我所有现有的其他数字继续按原样显示（例如，我的包含文件中的“25”显示为“25.00”）？

您输入到上面的任何数字（或数字字符串）都将被格式化为小数点右侧的两位数字，即使这些数字是`00`. 所以有了上面的，`CurrencyFormatted("25")`会返回`"25.00"`。

> ...或者我是否使用您建议的代码来替换我发布的部分或全部示例代码，因此，我是否需要更改所有数据库编号以适应这种情况？（即我现在应该在所有整数的末尾添加两个零吗？（25 变成 2500，等等）

您不需要添加`.00`到数据库中的整数或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:21:30.827

如果你想用 PHP checkout [money_format() 来做](http://php.net/manual/en/function.money-format.php)这件事，这里有一个例子：

```
<?php 
$value = 5;

setlocale(LC_MONETARY, 'en_US');
echo '$'.money_format('%i', $value) . "\n";//$5.00

$value = 5.545;

setlocale(LC_MONETARY, 'en_US');
echo '$'.money_format('%i', $value) . "\n";//$5.54

$value = 9.99;

setlocale(LC_MONETARY, 'en_US');
echo '$'.money_format('%i', $value) . "\n";//$9.99

?> 
```

# c# - 页眉和页脚菜单不起作用

> ID：10331322
> 
> 赞同：0
> 
> 时间：2012-04-26T10:08:07.737
> 
> 标签：c#, asp.net-mvc-3

我遇到了小问题（使用的技术 MVC3.0、EntityFramework、Code First、VS2010）

我们有两个角色类别和产品 - 这里我们对每个角色都有一个控制器文件夹 - 在类别文件夹中，我们有控制器、视图、共享、模型文件夹 - 在产品中，我们还有控制器、视图、共享、模型文件夹。问题从这里开始 - 在类别角色中，视图文件夹中有一个主页，由 4 个 .cshtml 文件组成。当我们尝试在 Product 角色中读取这 4 个 .cshtml 文件时，它显示错误“找不到资源”并显示路径 /Products/Home。这里产品角色没有视图文件夹中的主页，但类别包含视图文件夹中的主页文件夹。

任何人都可以对此提供帮助以下是我在产品文件夹 - 共享文件夹 - _layout.cshtml 中编写的代码

```
 <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>
                <li>@Html.ActionLink("FAQs", "FAQs", "Home")</li>
                <li>@Html.ActionLink("Help", "Help", "Home")</li> 
```

Category 文件夹由 HomeController.cs 文件组成。

在此先感谢 Bhanu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:22:41.687

尝试将其添加到您的 Global.asax ...

```
routes.MapRoute("Category",
                "Category/{controller}/{action}/{id}",
                new { controller = "Home", action = "index", id = UrlParameter.Optional }); 
```

# wpf - 是什么导致 VS 2010 SP1 WPF 设计器崩溃？

> ID：10331325
> 
> 赞同：5
> 
> 时间：2012-04-26T10:08:16.810
> 
> 标签：wpf, visual-studio-2010, crash, designer

在以下情况下，我们在 VS2010 WPF 设计器中的各种机器上遇到崩溃：

*   已安装 VS 2010 SP1
*   64 位 Windows 7
*   参考 NHibernate.dll（版本 1.2.0.712）

要重现错误，请创建新的 WPF 解决方案，执行以下操作：

*   创建新的 WPF 解决方案
*   打开主窗口，添加一个文本框，设置一些静态文本
*   添加对 FluentNhibernate.dll 版本 1.2.0.712 的引用
*   清理并重建解决方案
*   再次在设计器中打开主窗口，编辑文本
*   在设计器中，单击窗口左侧，然后再次返回文本框

没有数据/命令绑定，没有引用 FluentNHibernate 功能或任何高度复杂的代码，只有在 MainWindow.xaml 中具有以下 XAML 的新 WPF 解决方案：

```
<Window x:Class="testWpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Width="800"
    Title="MainWindow" Height="350" >
  <Grid>
    <TextBox Text="yxcydfdssdfsdfdsfsdsddsasdyxcasd"  />
  </Grid>
</Window> 
```

这是完整的堆栈跟踪：

```
System.Reflection.TargetInvocationException
Exception has been thrown by the target of an invocation.
   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)   
   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)   
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)   
   at System.Delegate.DynamicInvokeImpl(Object[] args)   
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)   
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)

System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.GetRuntimeTypeVariable(Type type)   
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.GetRuntimeType(Type type)   
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.EnsureRuntimeType(Type type)   
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.GetRuntimeType(Type type)   
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkType.TryGetRuntimeType()   
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.EnsureRuntimeType(Type type)   
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkProvider.GetRuntimeType(Type reflectionType)   
   at MS.Internal.Package.VSIsolationProviderService.RemoteReferenceProxy.VsReflectionResolver.GetRuntimeType(Type reflectionType)   
   at Microsoft.Windows.Design.Metadata.ReflectionMetadataContext.CachingReflectionResolver.GetRuntimeType(Type reflectionType)   
   at Microsoft.Windows.Design.Metadata.ReflectionMetadataContext.Microsoft.Windows.Design.Metadata.IReflectionResolver.GetRuntimeType(Type reflectionType)   
   at MS.Internal.Metadata.ClrType.get_RuntimeMember()   
   at MS.Internal.Metadata.ClrMember`1.Microsoft.Windows.Design.Metadata.Reflection.IReflectionMember.get_MemberInfo()   
   at MS.Internal.Metadata.ClrType.Equals(Object obj)   at System.Collections.Generic.ObjectEqualityComparer`1.Equals(T x, T y)   
   at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)   
   at Microsoft.Windows.Design.Metadata.Xaml.XamlExtensionImplementations.<>c__DisplayClass5.<FindAttachableProperties>b__4(ITypeMetadata walkType)   
   at MS.Internal.Design.Metadata.Xaml.XamlType.<GetAllAttachableProperties>d__7.MoveNext()   
   at MS.Internal.Design.Metadata.Xaml.XamlType.<FindAttachableProperties>d__0.MoveNext()   
   at Microsoft.Windows.Design.Metadata.Xaml.XamlExtensionImplementations.<FindAttachableProperties>d__7.MoveNext()   
   at MS.Internal.VirtualModel.VirtualModelPropertyCollection.<GetUncachedProperties>d__0.MoveNext()   
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)   
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)   
   at MS.Internal.VirtualModel.VirtualModelPropertyCollection.GetEnumerator()  
   at MS.Internal.Designer.PropertyEditing.Model.Properties.ModelPropertyMerger.<GetFirstProperties>d__0.MoveNext()   
   at MS.Internal.Designer.PropertyEditing.Views.PropertyEntryReader.RedraftEntries(IPropertyViewManager viewManager, Selection selection, Boolean attachedOnly, IEventCodeBehindProxy eventCodeBehindProxy, CategoryList categoryList)   
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.UpdateCategories(Selection selection, Boolean attachedOnly, IEntryReader entryReader)   
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.RefreshPropertyList(Boolean attachedOnly)   
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.OnSelectionChangedIdle() 
```

MS 已确认这是一个 SP1 错误，但为了获得令人满意的结果，我需要更多地了解这个问题......

是什么原因造成的，为什么它只在添加 FNH 时发生，为什么只在从某个位置添加它时（程序集是相同的 - 我们进行了逐字节比较）？没有SP1，它可以工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T16:25:18.600

我们有时通过添加来解决这个问题

```
if (System.ComponentModel.DesignerProperties.GetIsInDesignMode(this))
                return; 
```

在违规控件的加载事件中

# sql - 仅知道十年/世纪的sql存储日期

> ID：10331328
> 
> 赞同：6
> 
> 时间：2012-04-26T10:08:25.833
> 
> 标签：sql, date

我有一个要存储在数据库中的书籍列表。其中一个属性是该书首次出版的日期。在较旧的书籍（超过 100 年）中，我通常只知道十年（如 185X），或者如果是*非常古老*的书籍，则只知道世纪（如 15XX）。

您将如何将这些日期保存在 datetime2 字段中？15XX 等于 1500？例如，我希望能够查询超过一百年的书籍。所以我想以某种方式将这些值存储为有效的 datetime2 值。有什么建议吗？15XX 作为 '1500-01-01 00:00' 对我来说似乎是合理的。这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:22:45.093

唯一的缺点是当有人要求所有从 1550 年到 1650 年出版的书籍时。你的 15XX 变成了 1500，所以它不会包含在他的结果中。

当给定的书出版时，你真正拥有的是一段不确定的时期。我会存储 2 个日期：一个是期间开始时，另一个是结束时。现代书籍会将其设置为相同的日期，但最旧的书籍可以存储为 1500-01-01 00:00 - 1599-12-31 23:59

当然，这会使选择复杂化。你必须决定它是否值得。你可以宣称要求“1550 到 1650”是愚蠢的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T10:23:24.177

作为@dragon112 答案的扩展，您是否有可能需要`15XX`前两个选项中的两个选项？ *（就像 NULL 是和不是任何值一样，同时。）*

*   该书可能的最早日期（对于 15xx，它将是 1500）
*   该书可能的最年轻日期（对于 15xx，它将是 1599）

如果是这样，您可以存储两个日期并确定图书出版的日期范围。

这确实使您的查询/系统更加复杂。在编写这些 SQL 机器人时，它们在语法上是正确的，但您需要在任何给定情况下选择合适的，因为它们*可能会*给出不同的结果......

```
WHERE
  earliestPublishDate > '1550-01-01'

WHERE
  latestPublishDate > '1550-01-01' 
```

因此，在确定如何存储数据时最重要的问题是：
- 您将如何查询它？

您需要了解您的用例（或*可能*的用例）才能确定正确的数据表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:14:13.723

在我看来，有 3 种方法可以保存此类书籍的日期：

*   该书可能的最早日期（对于 15xx，它将是 1500）
*   该书可能的最年轻日期（对于 15xx，它将是 1599）
*   上面的一半（对于 15xx，它将是 1550）

这些方法与代码本身无关，但是当您查询某个年龄时，它们会影响您的结果。所以在我看来，任何对你来说感觉最好的东西都应该没问题。

换句话说，当你查询一本 500 年的书时，你想得到一本 15xx 年的书吗？因为现在是 2012 年，所以数据库不会返回这本书 (2012 - 500 = 1512)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T10:14:38.513

有趣的问题，我会考虑以下解决方案：

将值保存为数据库中的两个字段。第一个以您提到的“1500-01-01 00:00”格式存储，用于排序。第二个字段用于记录原始值15XX，其数据类型为字母数字类型。

使用这种方法，您不会丢失数据未知的事实。但是您仍然满足搜索某个日期之前的书籍的要求。

然后，日期时间字段严格根据字母数字字段计算得出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T10:17:49.800

如果您不需要使用日期存储时间，则使用数据类型“日期”，无需使用 datetime2 来仅允许从 01-01-0001 开始的日期。

日期还支持从 0001-01-01 到 9999-12-31 的日期。Datetime2 比 datetime 具有更高的时间精度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T11:04:44.170

```
DECLARE @var VARCHAR(100)
SET @var = ''
SET @var =  CASE LEN(@var) 
                WHEN 1 THEN @var + '000' 
                WHEN 2 THEN @var + '00' 
                WHEN 3 THEN @var + '0' 
                ELSE @var 
            END
SELECT CAST(@var AS DATE) 
```

# android - 适用于 Android 位置管理器的实用程序

> ID：10331330
> 
> 赞同：2
> 
> 时间：2012-04-26T10:08:41.650
> 
> 标签：android, geolocation, gps, locationmanager

我正在寻找一个可以更轻松地在 Android 中使用位置管理器的库。我希望它支持超时，从几个位置提供者获取位置，并从获得的结果中选择最佳估计。

你们知道任何提供此功能的库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:06:11.563

[http://android-developers.blogspot.fr/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.fr/2011/06/deep-dive-into-location.html) 如果你关注他的博客，他会发布很多代码

# wcf - 我的 WCF 元数据配置有什么问题？

> ID：10331333
> 
> 赞同：2
> 
> 时间：2012-04-26T10:08:49.323
> 
> 标签：wcf, web-config, nettcpbinding

这是[此问题](https://stackoverflow.com/questions/10316457/cant-access-net-tcp-service-from-wcf-test-client/10316856#10316856)的后续内容，我已将在 IIS 中运行的 WCF 服务（从 Visual Studio 2010 中）配置为运行一个 Web 服务和一个 net.tcp 服务。经过大量黑客攻击后，我设法将 Web 服务加载到 WCF 测试客户端中，但我无法将 Net.Tcp 服务加载到测试客户端中。

这是我的 Web.config：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="ServerService" behaviorConfiguration="ServerServiceBehaviour">
        <endpoint address="ServerService.svc" 
                  binding="netTcpBinding" 
                  bindingConfiguration="DefaultNetTcpBindingConfig" 
                  name="NetTcpEndPoint" 
                  contract="IServerService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="mex"
                  binding="mexTcpBinding"
                  contract="IMetadataExchange" 
                  bindingConfiguration="mexTcpBinding"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8523/"/>
          </baseAddresses>
        </host>
      </service>

      <service name="MyWebService" behaviorConfiguration="WebServiceBehaviour">
        <endpoint address="MyWebService.svc"
                  binding="wsHttpBinding"
                  bindingConfiguration="DefaultWSBinding"
                  name="MyWSEndPoint"
                  contract="IMyWebService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"
                  bindingConfiguration="mexHttpBinding"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/"/>
          </baseAddresses>
        </host>
      </service>

    </services>
    <bindings>
      <netTcpBinding>
        <binding name="DefaultNetTcpBindingConfig"
                 maxConnections="5"
                 portSharingEnabled="true" >
        </binding>
        <!--<binding name="mexBinding"
                 portSharingEnabled="true">
          <security mode="None"></security>
        </binding>-->
      </netTcpBinding>
      <wsHttpBinding>
        <binding name="DefaultWSBinding"/>
      </wsHttpBinding>
      <mexTcpBinding>
        <binding name="mexTcpBinding"/>
      </mexTcpBinding>
      <mexHttpBinding>
        <binding name="mexHttpBinding"/>
      </mexHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServerServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
        <behavior name="MexBehaviour">
          <serviceMetadata httpGetEnabled="true" policyVersion="Policy15"/>
        </behavior>
        <behavior name="WebServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

当我运行 Visual Studio 调试器来发布服务时，我可以通过在 WCF 测试应用程序中输入以下 url 来访问 Web 服务：

> [http://localhost:8523/MyWebService.svc](http://localhost:8523/MyWebService.svc)

但是，如果我将以下 URL 输入到 WCF 测试应用程序中，则会出现错误：

> net.tcp://localhost:8523/ServerService.svc

这是我看到的错误：

> 错误：无法从 net.tcp://localhost:8523/ServerService.svc 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: net.tcp://localhost:8523/ServerService.svc的 MSDN 文档元数据包含无法解析的引用：“net.tcp://localhost:8523/ServerService.svc”。您尝试为不支持 .Net 框架的服务创建通道。您可能会遇到 HTTP 端点。预期的记录类型“PreambleAck”，发现“72”。

阅读[此问题](https://stackoverflow.com/questions/201004/why-cant-i-connect-to-a-wcf-service-with-net-tcp-but-i-can-with-http)后，VS 2010 中的网络服务器是否可能不支持 net.tcp 绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:59:29.097

看起来我看到的问题是 Visual Studio 2010 中的 Web 服务器不支持 Net.Tcp 绑定。

通过安装 IIS7（IIS6 也不支持 Net.Tcp）并告诉 Visual Studio 改用 IIS，我稍微走得更远了。

您可以通过转到服务的属性页面并选择“Web 选项卡”选择使用本地 IIS Web 服务器单选按钮并配置网络服务器来执行此操作。

您还可以在此选项卡上启动一个外部程序，使其启动 WcfTestClient.exe 并将 URL 作为命令行参数传递给您的服务。

我仍然有问题，但它们是不同的问题，所以我会提出另一个问题。

# sql - Windows Phone 7 中的 TSQL

> ID：10331340
> 
> 赞同：0
> 
> 时间：2012-04-26T10:09:19.120
> 
> 标签：sql, silverlight, windows-phone-7, windows-phone-7.1

我正在将一个应用程序从 iPhone 移植到 Windows phone 7。服务器发送一个包含所有信息的 SQL 文件（T-SQL 查询）。有没有办法在 SQL CE 中执行这些命令？

我可以将 sql 文件解析为纯文本文件，但我想知道 sql ce 是否可以自动执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:52:00.527

Windows Phone中没有直接的SQL访问，唯一的办法就是使用Linq to SQL！

Windows Phone 中的所有数据库访问都基于生成的数据模型，这些模型将表及其行变成对象的集合。

您甚至不能调用方法来执行 SQL 命令，就像在桌面上使用 ExecuteNonQuery()

所以，在我看来，你能解决这个问题的唯一方法是发送整个 SQL Compact 数据库文件 (*.sdf)，将其保存到独立存储，然后使用 Linq to SQL 访问它，或者你必须编写一些代码来解析你的 SQL 文件......

# c++ - 点云库简单示例链接错误

> ID：10331341
> 
> 赞同：7
> 
> 时间：2012-04-26T10:09:21.293
> 
> 标签：c++, visual-studio-2010, cmake

我正在尝试从[http://pointclouds.org/documentation/tutorials/pcl_visualizer.php](http://pointclouds.org/documentation/tutorials/pcl_visualizer.php)运行以下 PCL 简单查看器示例 我已经使用 Cmake 和推荐的 Cmakelists.txt 成功构建了二叉树

生成后，当我尝试构建它时，出现以下错误：

```
error LNK2019: unresolved external symbol "public: void __thiscall pcl::visualization::PCLVisualizer::initCameraParameters(void)" (?initCameraParameters@PCLVisualizer@visualization@pcl@@QAEXXZ) referenced in function "class boost::shared_ptr<class pcl::visualization::PCLVisualizer> __cdecl simpleVis(class boost::shared_ptr<class pcl::PointCloud<struct pcl::PointXYZ> const >)" (?simpleVis@@YA?AV?$shared_ptr@VPCLVisualizer@visualization@pcl@@@boost@@V?$shared_ptr@$$CBV?$PointCloud@UPointXYZ@pcl@@@pcl@@@2@@Z)`

error LNK2019: unresolved external symbol "public: void __thiscall pcl::visualization::PCLVisualizer::addCoordinateSystem(double,int)" (?addCoordinateSystem@PCLVisualizer@visualization@pcl@@QAEXNH@Z) referenced in function "class boost::shared_ptr<class pcl::visualization::PCLVisualizer> __cdecl simpleVis(class boost::shared_ptr<class pcl::PointCloud<struct pcl::PointXYZ> const >)" (?simpleVis@@YA?AV?$shared_ptr@VPCLVisualizer@visualization@pcl@@@boost@@V?$shared_ptr@$$CBV?$PointCloud@UPointXYZ@pcl@@@pcl@@@2@@Z)

error LNK2019: unresolved external symbol "public: bool __thiscall pcl::visualization::PCLVisualizer::setPointCloudRenderingProperties(int,double,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int)" (?setPointCloudRenderingProperties@PCLVisualizer@visualization@pcl@@QAE_NHNABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) referenced in function "class boost::shared_ptr<class pcl::visualization::PCLVisualizer> __cdecl simpleVis(class boost::shared_ptr<class pcl::PointCloud<struct pcl::PointXYZ> const >)" (?simpleVis@@YA?AV?$shared_ptr@VPCLVisualizer@visualization@pcl@@@boost@@V?$shared_ptr@$$CBV?$PointCloud@UPointXYZ@pcl@@@pcl@@@2@@Z) 
```

这些只是其中的几个……我在 cmakelists.txt 中遗漏了什么吗？

```
cmake_minimum_required(VERSION 2.6 FATAL_ERROR)

project(pcl_visualizer_viewports)

find_package(PCL 1.5.1 REQUIRED)

include_directories(${PCL_INCLUDE_DIRS})

link_directories(${PCL_LIBRARY_DIRS})

add_definitions(${PCL_DEFINITIONS})

add_executable (pcl_visualizer_demo pcl_visualizer_demo.cpp)

target_link_libraries (pcl_visualizer_demo ${PCL_LIBRARIES}) 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:15:31.730

发现问题所在：虽然我运行的是 64 位机器，但我的编译器（VS2010）配置为 32 位，所以我需要卸载 64 位点云库并安装 32 位版本。现在它起作用了。经验教训 :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:44:28.897

看起来您没有链接 PCL 库。这可能是因为`${PCL_LIBRARIES}`在运行 CMake 时未正确设置。你可以添加

```
message("PCL_LIBRARIES - ${PCL_LIBRARIES}") 
```

调用后到您的 CMakeLists.txt 文件`find_package`以检查值。

如果您使用的是 CMake v2.8.8，[则此错误](http://cmake.org/Bug/view.php?id=13125)可能是您出现问题的原因。尝试恢复到[v2.8.7](http://www.cmake.org/files/v2.8/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T10:11:06.477

我也有同样的问题，我通过手动链接 pcl_visualization.lib 文件解决了。可以在visual c++ 2010中尝试以下步骤：

> 项目属性 -> 链接器 -> 输入 -> 附加依赖项 -> 添加文件。

就我而言，我添加了**G:\PCL\PCL 1.6.0\lib\pcl_visualization_release.lib**用于发布和**G:\PCL\PCL 1.6.0\lib\pcl_visualization_debug.lib**用于调试。

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:37:13.867

我认为如此复杂可以通过这种方式找到错误。我已经在我的电脑、Windows 7 64 位和 VStudio 2010 中安装了 PCL，示例运行良好。

确保已正确安装您的 PCL 和依赖项。请查看[此处](http://pointclouds.org/downloads/)的下载部分就我而言，我下载了“一体式”版本。

按照说明一步一步来，不是很复杂。

[在你可以在这里](http://pointclouds.org/documentation/tutorials/using_pcl_pcl_config.php)看到“cmake文件”的结构之后尝试下载最新版本的cmake

[最后，在此处](http://pointclouds.org/documentation/tutorials/)运行 PCL 网站中的基本项目

祝你今天过得愉快

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-10T06:57:44.350

我[在这里](https://github.com/PointCloudLibrary/pcl/issues/2987)解释了如何在 Windows 中的一个安装程序中安装 PCL 1.8.1。问题是什么，请确保：

[![在此处输入图像描述](../Images/8d9db62e6ed59835f863b94e445462c7.png)](https://i.stack.imgur.com/82Nq2.png)

# google-drive-api - 访问用户 Google Drive 上的所有文件

> ID：10331342
> 
> 赞同：10
> 
> 时间：2012-04-26T10:09:24.110
> 
> 标签：google-drive-api

SkyDrive 和 Dropbox 的 api 具有管理用户整个驱动器的选项。对于 Google Drive，drive.file 范围似乎只允许访问应用程序创建的文件。Google Drive 是否有可以访问整个驱动器的范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:26:59.923

编辑：以下答案*是*正确的，但最新版本的 Drive API 允许使用`https://www.googleapis.com/auth/drive`. 此用例不再需要 Documents List API。请参阅[https://developers.google.com/drive/scopes#requesting_full_drive_scope_for_an_app](https://developers.google.com/drive/scopes#requesting_full_drive_scope_for_an_app)

准确地说，Drive API 允许访问由应用程序创建的文件以及用户从 Drive UI（通过打开方式）使用应用程序打开的文件。

要操作用户的所有 Drive 文件，您可以使用[Google Document List API](https://developers.google.com/google-apps/documents-list/)。尽管我们目前禁止 Drive 应用程序（通过 Open-with 和 Create 对话框集成到 Drive UI 中的应用程序）请求访问 Document List API，因为我们希望将 Drive 应用程序保持在每个文件的安全模型上。（基本上在 Drive SDK 设置中添加文档列表范围会引发错误）。

# ruby-on-rails - Kaminari 分页不显示在搜索中

> ID：10331343
> 
> 赞同：1
> 
> 时间：2012-04-26T10:09:34.390
> 
> 标签：ruby-on-rails, search, pagination, kaminari

我正在使用 Kaminari 对搜索结果进行分页。

搜索找到 5 个结果，页面显示控制器中 per() 方法中定义的 2 个结果，但不显示任何分页。如果我手动将“？page=2”附加到浏览器窗口中的 URL，我只能进入第二页。

**控制器代码：**

```
def show
   @search = Search.find(params[:id])
   @adverts = @search.adverts.page(params[:page]).per(2)
end 
```

**查看代码：**

```
<ul class="adverts_small">
<% for advert in @adverts %>
   # Render adverts
<% end %>
</ul>

<%= paginate @adverts %> 
```

我正在使用 Kaminari 0.13.0。

有什么想法可能导致这个问题吗？

# ios - 从 rdbms 迁移的核心数据

> ID：10331344
> 
> 赞同：0
> 
> 时间：2012-04-26T10:09:34.657
> 
> 标签：ios, sqlite, core-data

我正在尝试从纯 sqlite（使用 FMDB 包装器）迁移到核心数据。

我的主要原因是 icu 问题（我有一些多语言项目 - 德语、西班牙语、希腊语、中文）很难从 sqlite 中搜索到，而不是核心数据上内置的 icu。（NSDiacriticInsensitive | NSCaseInsensitive）

通常，我的数据（编码书）具有以下结构：

```
id
parentId
content
contentType
nContent
vieworder 
```

其中 nContent 是我需要放弃的变音符号/不区分大小写的字段，因为它会大大降低我的数据库速度（我使用了索引，我使用了优化，但我找不到任何东西来加快搜索过程）。

我对核心数据概念感到困惑——我可以在主从项目中理解它，但我无法理解如何实现自引用项目对象——

使用上述结构存储的典型数据是这样的：

```
 Chapter A
  Chapter A.1
   Title 1
    Content #1
   Title 2
    Content #2
  Chapter A.2
 [...] 
```

其中“章节/标题/内容”是内容字段（因此它从大于 256 的小字符串到大文本块不等）。

所以我的问题是： * 如何在核心数据实体/类中实现这种结构（我知道它需要自引用关系） * 如何找到每个级别的项目（例如我想找到所有 Title 类型-- 这就是我有 contentType 字段的原因） * 在核心数据结构上索引它是否会为我提供比普通 sql 更好的索引和更好的时间搜索率（我在 nContent 字段上使用 LIKE %% 结构）？* 将它留在 SQLITE 上并尝试寻找不同的索引策略会更好吗？

请随时回答这些问题或至少给我一个见解。

**这里的更新** 是我的意思的另一个更“现实”的例子：

```
Beginning HTML (Type: Chapter, parentid:0,id:1)
 The fundamental pieces (Type Chapter, parentid:1, id:2)
  How to begin (Type: title, parentid:2, id:3)
   [content] (Type: content, parentid:3, id:4)
  Using paragraphs (Type title, parentid:2, id:5)
   [content] (Type: content, parentid:5, id:6)
 Using Forms (Type: chapter, parentid:1, id:7)
  ... (and so on) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:11:16.453

**编辑**

考虑到你的澄清...

你可能想重新审视你的设计，看看什么效果最好。然而，一个简单的开始方法是......

```
ContentObject
    title: NSString
    type: whatever
    content: NSString
    subcontent: 1-to-Many relationship to ContentObject 
```

在 Xcode 模型视图中，您只需从 ContentObject 控制单击并拖动到自身。将进行自我参考。

然后，将其设为多，并将其命名为“子内容”或其他名称。然后，将反向关系命名为“父级”。

现在，您有一个对象列表，您可以将子对象添加到每个对象，CoreData 将自动管理指向彼此的指针。您还可以为任何属性添加索引以加快搜索速度。

如果您的实际内容可能会变得很大，您可能希望使其成为一个独立的实体，并与之建立关系。

# .net - 跟踪最坏情况的执行时间

> ID：10331345
> 
> 赞同：1
> 
> 时间：2012-04-26T10:09:34.927
> 
> 标签：.net, performance, optimization, dottrace

我有一段代码（.NET4 C#）应该在紧密循环中运行——其他线程通过这个循环异步向线程提供信息并处理它的命令。该代码平均足够快（100 - 200 微秒），但大约每 2 秒一次需要更多时间，通常大约 15 毫秒。

这些峰值并没有太大改变平均值，但我想找出它们发生在代码的哪些部分——我不关心平均值，而是关心最坏情况下的执行时间。是否有任何工具可以收集此类信息？我试过 dotTrace 但没有运气，它只显示平均值，我想忽略大多数情况。

总是可以选择使用秒表等编写我自己的分析器，但是在整个代码中部署这些是相当笨拙的。

注意：我知道我应该预料到一些上下文切换会导致这些峰值与繁忙循环，但代码是在专用于该应用程序的 24 核服务器上运行的。因此，我希望我能以某种方式将它们减少到最低限度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:38:09.777

你也试过ANTS吗？链接：[http](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/) ://www.red-gate.com/products/dotnet-development/ants-performance-profiler/ 它为您提供的数字是所选区域的平均值。但是，当您选择堆栈跟踪时，时间线视图顶部显示的绿色条会显示该堆栈视图的执行位置；因此您可以单击每一个并查看堆栈每次执行的数字（时序等）。这需要一些手动比较，但这是可能的。

不确定您尝试的探查器是否有类似的东西，YourKits 也是另一个流行的探查器，我也不知道它是否提供类似的东西。

# javascript - 停止页面刷新

> ID：10331346
> 
> 赞同：2
> 
> 时间：2012-04-26T10:09:40.303
> 
> 标签：javascript, xmlhttprequest, onreadystatechange

我正在编写一小段代码，该代码通过 html 表单从用户那里获取输入，然后使用**XMLHttpRequest**从服务器（在本地运行）检索信息（以 xml 格式） ，一旦我得到信息，我将其输出到使用列表中我为**onreadystatechange**编写的方法。但是，一旦将列表写入页面，它会自动刷新页面并且列表消失。我完全不知道为什么要这样做？！我已经设法使用**window.onbeforeunload**强制停止页面刷新并停止刷新，但我不禁认为有更好的方法解决这个问题，我一定做错了什么。我的代码如下：

```
var xmlhttp=null; 
```

函数 byObserver(){

```
var a = document.forms["byObserverForm"]["observerName"].value;
a = encodeURIComponent(a);

if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}else{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
if (xmlhttp) {
    xmlhttp.onreadystatechange = onReadyStateByObserver;
    xmlhttp.open("GET","http://localhost:8004/birdobs/observer/" + a, false);
    xmlhttp.send();   
} 
return false; 
```

}

```
function onReadyStateByObserver(){

if (xmlhttp.readyState == 4){

    if (xmlhttp.status == 200){

        var xmlDoc = xmlhttp.responseXML;
        var observations = xmlDoc.getElementsByTagName("observation");

        if (observations.length != 0){

            // output into unordered list 
            var f = document.createDocumentFragment();
            var e = document.createElement("ul");
            f.appendChild(e);
            var ul = f.firstChild;

            for (i = 0; i<observations.length; i++) {
                var li = document.createElement("li");

                var te = document.createTextNode(observations[i].getAttribute("observer"));
                li.appendChild(te);
                ul.appendChild(li);
            }  // end for 
            document.getElementById("content").appendChild(f);

            window.onbeforeunload = function(){
                return "Refresh";
            }

        }
    }
} 
//have also tried return false here 
```

}

任何帮助将不胜感激，因为我花了很长时间试图解决这个问题，非常感谢提前！（我没有包含 HTML，因为我认为不需要它，但请询问它是否有帮助，我会发布它！）我最后会添加我在 chrome 中运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:13:09.397

当您提交表单时，您应该停止默认事件，例如`return false`在提交时调用的函数末尾。也许页面正在刷新，因为您没有停止`submit`事件（因此浏览器被重定向到`action`表单属性指定的页面）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:14:52.930

这很可能是因为浏览器仍在提交表单。您需要通知浏览器您不希望发生默认的表单提交处理。

`false`从您的 onsubmit 方法返回应该执行此操作。

** 更新 **

假设您正在使用`onsubmit`处理程序并且正在调用的函数`byObserver`然后尝试以下操作：

```
<!-- HTML -->
<form ... onsubmit="return byObserver()">

// javascript
function byObserver() {
  ...
  return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:13:51.017

在通过提交表单调用的方法结束时，您需要`return false;`

看起来被触发的函数是`byObserver`，所以你会做以下事情：

```
function byObserver(){
   [...]
   return false;
} 
```

# java - 如何使用stacktrace查找线程启动方法的调用类名

> ID：10331349
> 
> 赞同：6
> 
> 时间：2012-04-26T10:09:46.847
> 
> 标签：java, swing

有人可以建议一些解决方案如果我想获取线程启动方法的调用类名

例如，如果我在 main 中启动一个线程，堆栈跟踪将调用类名称作为线程和调用者方法名称作为索引 2 的运行。请帮助查找调用者类的正确名称和线程的方法名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:21:49.407

看起来您正在尝试绑定跨多个线程的任务。如果您直接启动一个线程，您可以做的最好的事情是在构造函数中为其命名，然后将调用类和方法名称与新线程的名称一起记录下来。但是，如果您使用`ExecutorService`.

更一般地，您应该使用嵌套诊断上下文进行调查，以允许您绑定多线程操作：[在多线程应用程序中记录活动](https://stackoverflow.com/q/83117/116509)

# javascript - Javascript/Jquery 将标签值绑定到文本框的值

> ID：10331357
> 
> 赞同：-4
> 
> 时间：2012-04-26T10:10:16.840
> 
> 标签：javascript, jquery, asp.net

在 asp.net 应用程序中，

我有一个标签和一个文本框。

我希望标签始终具有与文本框相同的值。

文本框的值可以由用户更改，也可以由代码中的其他函数更改，我希望标签随之更改。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:12:44.123

```
$("#textboxId").change(function(){
   $("#labelId").text($(this).val());
}) 
```

# objective-c - 如何一次将 200 多个条目插入 plist？

> ID：10331359
> 
> 赞同：0
> 
> 时间：2012-04-26T10:10:21.463
> 
> 标签：objective-c, ios, cocoa-touch, plist

我正在做一个项目，在该项目中我已经创建了包含 200 多个项目的 plist，但现在的问题是我需要为每个项目添加另一个键及其对应的值。我有一个具有该键值的 excel 表，有没有一种方法可以将 excel 表的值添加到我的 plist 中，而不是手动添加它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:23:16.623

将 Excel 文件转换为 CSV，然后使用该 CSV 文件将数据提取到 pList 中。

# python - 使用 PyMC 进行双重积分

> ID：10331365
> 
> 赞同：0
> 
> 时间：2012-04-26T10:10:42.727
> 
> 标签：python, scipy, integration, mcmc, pymc

我需要使用[MCMC 方法](http://en.mobile.wikipedia.org/wiki/Markov_chain_Monte_Carlo#section_1)执行双重积分。我已经使用[romberg](http://docs.scipy.org/doc/scipy-0.10.1/reference/generated/scipy.integrate.romberg.html)和[doublequad](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.dblquad.html)集成完成了它，结果正确。我还需要使用 MCMC 集成来比较结果。我发现很难理解[PyMC](http://pymc.googlecode.com/svn/doc/index.html)。

大纲是这样的：我有一些时间序列数据，我需要找出适合它的分布。我有一组方程式告诉我该做什么涉及双重积分。

希望得到一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:42:51.813

我建议你从一个简单的直接采样 MC 开始，然后做一个微不足道的 2D 积分，你可以用纸和铅笔得到答案。然后转到 MCMC 以获得相同的积分。

# xml - XSLT 转换无法解决如何包含命名空间？

> ID：10331366
> 
> 赞同：0
> 
> 时间：2012-04-26T10:11:00.637
> 
> 标签：xml, xslt

我正在尝试创建一个 XSLT 文件，并且我可以在不包含任何一个文件中的命名空间的情况下让它工作，但是一旦我包含在其中一个文件中，它就会停止工作。这是我正在使用的示例。

我的 XML 文件

```
 <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
  <cd>
    <title>Empire sdf</title>
    <artist>Bob sdf</artist>
    <country>2</country>
    <company>asdfs</company>
    <price>12.90</price>
    <year>1935</year>
  </cd>
</catalog> 
```

我的转换文件。

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
  <html><body><table border="1">
    <tr bgcolor="#9acd32"><th>Title</th><th>Artist</th></tr>
    <xsl:for-each select="catalog/cd">
    <tr>   
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="artist"/></td>
    </tr>
    </xsl:for-each>
  </table></body></html>
</xsl:template>

</xsl:stylesheet> 
```

我的结果

```
<?xml version="1.0" encoding="UTF-8"?>
<html>
    <body>
        <table border="1">
            <tr bgcolor="#9acd32">
                <th>Title</th>
                <th>Artist</th>
            </tr>
            <tr>
                <td>Empire Burlesque</td>
                <td>Bob Dylan</td>
            </tr>
            <tr>
                <td>Empire sdf</td>
                <td>Bob sdf</td>
            </tr>
        </table>
    </body>
</html> 
```

不，如果我将上述内容更改为此。我的新 XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog
xmlns="http://www.someurl.com/v3.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.someurl.com/v3.0 ../someschema.xsl"
>

  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
  <cd>
    <title>Empire sdf</title>
    <artist>Bob sdf</artist>
    <country>2</country>
    <company>asdfs</company>
    <price>12.90</price>
    <year>1935</year>
  </cd>
</catalog> 
```

我的新转换文件。

```
 <?xml version="1.0" encoding="ISO-8859-1"?>

        <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.someurl.com/v3.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.someurl.com/v3.0 ../someschema.xsl">
        <xsl:output method="xml" indent="yes"/>
        <xsl:template match="/">
          <html><body><table border="1">
            <tr bgcolor="#9acd32"><th>Title</th><th>Artist</th></tr>
            <xsl:for-each select="catalog/cd">
            <tr>   
              <td><xsl:value-of select="title"/></td>
              <td><xsl:value-of select="artist"/></td>
            </tr>
            </xsl:for-each>
          </table></body></html>
        </xsl:template>

        </xsl:stylesheet> 
```

我现在在转换后的文件中没有数据？如果这个问题是基本的，请原谅，我没有使用 XSLT 的经验，我目前正试图解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:19:17.957

在 XSLT 2.0 中：您只需在您的`xsl:stylesheet`元素中添加以下属性：`xpath-default-namespace="http://www.someurl.com/v3.0"`.

使用 XSLT 1.0：您必须通过提供前缀来限定 xsl 文件中的名称空间。下面的例子：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ns="http://www.someurl.com/v3.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.someurl.com/v3.0 ../someschema.xsl">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/">
        <html><body><table border="1">
            <tr bgcolor="#9acd32"><th>Title</th><th>Artist</th></tr>
            <xsl:for-each select="ns:catalog/ns:cd">
                <tr>   
                    <td><xsl:value-of select="ns:title"/></td>
                    <td><xsl:value-of select="ns:artist"/></td>
                </tr>
            </xsl:for-each>
        </table></body></html>
    </xsl:template>

</xsl:stylesheet> 
```

# c - 对 _mm_crc32_u64 的未定义引用

> ID：10331377
> 
> 赞同：1
> 
> 时间：2012-04-26T10:12:13.973
> 
> 标签：c, linux, gcc, x86-64

我有一个使用`_mm_crc32_u64`. 为此，我包含了头文件`smmintrin.h`，并且在`-msse4.1`使用`gcc`. 但是，当我编译它时，我得到了`undefined reference to _mm_crc32_u64`错误。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:34:42.903

我这样做了，它奏效了！所以基本上我不得不使用 msse4.2 而不是 msse4.1。

```
gcc44 crc.c -msse4.2 
```

# c++ - 这是如何定义的？

> ID：10331381
> 
> 赞同：1
> 
> 时间：2012-04-26T10:12:28.397
> 
> 标签：c++, c, declaration

这个陈述如何定义？难道它不应该只是一个声明，因为它在我们定义一个 struct date 类型的对象之前不分配任何内存？

```
struct Date { int d , m , y ; }; 
```

我正在阅读 Bjarne Stroustrup 所著的《C++ 编程语言》这本书，其中（在第 4.9 节中）已经说过这是一个声明和一个定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:15:37.250

```
struct Date; // forward declaration

struct Date{ int d, m, y; }; // class definition (struct is a class-key) 
```

另见[ISO 14882:98 9.1-1 和 -2 类定义](http://www.kuzbass.ru:8086/docs/isocpp/class.html)

也相关[ISO 14882:98 3.2 单一定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T10:22:03.457

这不是任何一种语言的声明。C99 在 6.8 中定义语句，C++11 在 6 中定义语句。

在 C 中，它不是一个定义，它只是一个声明：C99 的 6.7/5 说：

> 标识符的定义是对该标识符的声明： — 对于一个对象，导致为该对象保留存储空间；——对于函数，包括函数体；— 对于枚举常量或 typedef 名称，是标识符的（唯一）声明。

由于这不是这三件事，所以它不是标识符的定义。在 C99 语法中，它是一个*struct-or-union-specifier*（后跟一个分号），而后者又是一个*type-specifier*（后跟一个分号），这是允许的*声明*形式之一(6.7/1)。

在 C++ 中，它是一个类说明符或类定义：C++11 的 9/2 说

> 类*说明符*通常称为类定义。

在 C 和 C++ 中，通常说“每个定义都是声明”，所以这可能就是 Stroustrup 说它既是声明又是定义的原因。

由于上述“定义”的定义，在 C 语言中这是严格正确的。*在 C++ 中，我认为在语法中类说明符*是声明实际上并不正确，但类定义引入了完整类型，而类声明引入了不完整类型。不完整的类型没有什么可以做，而完整的类型也不能做，所以类定义“和”类声明一样`struct Date;`好，甚至更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:14:26.690

`struct Date`这是C 和`Date`C++ 中新类型的声明。声明不是陈述。并且没有为新类型的声明保留任何内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:25:34.680

它声明了类型`Date`。它定义了`Date`s 成员，因此定义了它将创建的对象的大小。

它没有声明任何方法，因此不需要为类完成任何其他定义。

此外，如果您不声明或定义构造函数、析构函数、赋值运算符等，C++ 将尝试自动为您合成它们。所以这个最小的定义`Date`包括一个默认构造函数、赋值运算符和析构函数。

# jquery - Jquery datepicker onselect事件中的JSF f：ajax标签

> ID：10331387
> 
> 赞同：-1
> 
> 时间：2012-04-26T10:12:57.593
> 
> 标签：jquery, jsf-2

如何`f:ajax`在 jquery datepicker`onselect`事件上触发事件

可能吗？

如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:55:35.863

如果你想`<f:ajax`在`onSelect`事件上执行，你需要一个**解决方法**，原因`<f:ajax/>`是一个 JSF 标记，不能像使用 JSF 一样连接到 jquery 组件......，

只是放置

```
<h:commandButton id="myButton" style="display:none">
    <f:ajax render="..." listener="..." execute="..."/>
</h:commandButton> 
```

`onSelect`并从这样的事件中单击它

```
onSelect: function(dateText, inst) {
    $("#myButton").click(); //this will click the hidden button and execute its `<f:ajax `
} 
```

你可能需要一个更好的 $("#myButton") 选择器（如果它的内部形式没有 prependId="false" 等......但我猜这对你来说没什么大不了的......）

顺便提一句

[primefaces 库已经集成了 datepicker ，称之为 p:calendar ，所以看看...](http://www.primefaces.org/showcase/ui/calendarAjax.jsf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:21:59.047

不，那是不可能的。该`f:ajax`功能在服务器端添加到 jsf 组件。jQuery datepicker 在客户端工作。

改用 jQuery ajax 函数，或使用基于 JSF 的组件库之一，如 Primefaces。

# android - Android：在启动时在后台执行应用程序登录

> ID：10331388
> 
> 赞同：5
> 
> 时间：2012-04-26T10:12:58.437
> 
> 标签：android, android-activity, controller, android-service, aidl

我有一个`VOIP`应用程序，我需要在设备启动时在后台登录应用程序。

目前，我的应用程序的初始化是在`UI`Active( `onCreate()`) 上完成的。

我脑子里有以下几点，任何人都可以帮助并消除我的疑虑。

1.  服务设计是必须要完成这个任务的？？
2.  哪个`Service Remote(AIDL)`或本地服务，为什么？
3.  `UI`和交互是如何`Service`发生的？
4.  活动后`UI`谁得到回调？`UI`还是`Service`？
5.  我应该将数据`Service`作为我的`Controller`ie ，反之亦然吗？`Service``UI`

示例应用程序：Skype。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T04:49:57.770

所以有很多方法可以实现你想要的，关键是什么更适合你的风格和设计。希望您会发现这些信息很有用。

1.  对于在启动时在后台登录的应用程序，有几个选项。您需要的第一件事是广播接收器，它在清单中定义为接收器。让 BroadcastReceiver 捕获[ACTION_BOOT_COMPLETED](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED)意图。从这里您可以启动您的服务。这导致#2。

2.  如果您所做的只是 RESTful 调用，那么真正的 IntentService 将是理想的。[IntentService](http://developer.android.com/reference/android/app/IntentService.html)和[Service](http://developer.android.com/reference/android/app/Service.html)之间的区别很简单：IntentService 在主线程之外运行，执行它的“代码”并死掉。然而，服务在主线程上运行（这是一个重要的事实）并且运行时间很长，因此必须告诉它[stopSelf()](http://developer.android.com/reference/android/app/Service.html#stopSelf%28%29)。更进一步来说，与 Activity 相比，Service 也不太可能被杀死（应用程序组件被杀死以在内存中为新启动的应用程序腾出空间），即。它具有更高的优先级。该服务也可以声明为需要通知但给予更高优先级的[前台服务。](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)我认为在您的情况下，服务将是完美的。

3.  一旦您的 UI（活动）打开，连接到服务的最佳方式将是[Binder](http://developer.android.com/reference/android/app/Service.html#onBind%28android.content.Intent%29)。如果需要，这将允许从不同的应用程序/组件到服务的多个接口。AIDL 是很酷的东西，但根据我的经验，管理起来要困难得多，因为所有参数都必须是原始参数或 Parcables。AIDL 也较慢且效率较低，因为它实际上是 IPC 的一种形式。当服务启动时，会调用 onStartCommand() 方法。如果服务由试图绑定到它的应用程序启动，则调用 onBind() 方法。但是您可以使用和 Intent 启动服务，然后绑定到它。如果您更喜欢 RESTful 方法，您可以快速调用数据，您可以将 IntentService 与[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)一起使用。 [这是一篇](http://neilgoodman.net/2012/01/01/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-2/)关于 Google I/O 示例的精彩文章，如果您对 IntentService 和 ResultReceiver 感兴趣，那么总体上实现得很好。

4.  这取决于你。使用 Binder 或 AIDL，您的 Activity 可以像对象方法一样调用服务方法，其中“回调”只是方法返回。如果您使用 ResultReceiver，则与 Receiver 交互的 Activity 将是回调。您也可以来回传递 Intent，但这可能会变得混乱。同样对于您的情况，Binder 方法和接收器一样好。

5.  将服务视为 MVVM 系统中的模型 - 将其用作从中获取数据的助手，而不是控制应用程序逻辑的东西。

抱歉，如果这看起来很混乱，有很多方法可以实现您正在寻找的东西。这只是最适合您的情况的问题，您“感觉”更好。更不用说 Android SDK 是相当大的。我试图找到所有可以帮助你的话题。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:04:38.503

尝试使用引导接收器的服务。 [这是](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)我在快速谷歌搜索后找到的一个例子。然后确保将登录信息存储在应用程序启动时的某处。不知道你可能有什么回调，所以很难回答那部分。我会说，如果回调应该影响 UI，那么让活动在启动时接管它们。如果仅在服务运行时需要 UI，最好抛出通知并让它使用回调数据调用适当的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:32:48.123

您可以通过后台服务包 com.javaorigin.android.sample.service 验证用户登录；

```
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyService extends Service {

   String tag="TestService";
   @Override
   public void onCreate() {
       super.onCreate();
       Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
       Log.i(tag, "Service created...");
   }

   @Override
   public void onStart(Intent intent, int startId) {      
       super.onStart(intent, startId);  
       Log.i(tag, "Service started...");
   }
   @Override
   public void onDestroy() {
       super.onDestroy();
       Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
   }

   @Override
   public IBinder onBind(Intent intent) {
       return null;
   }
}

public class SampleAction extends Activity {
   @Override
   protected void onCreate(Bundle savedInstanceState) {      
       super.onCreate(savedInstanceState);
       TextView view = new TextView(this);      
       view.setText("Service Test");
       Intent i = new Intent();
       i.setClassName( "com.javaorigin.android.sample.service",
        "com.javaorigin.android.sample.service.MyService" );
       bindService( i, null, Context.BIND_AUTO_CREATE);
       this.startService(i);      
       setContentView(view);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:06:22.790

如果您登录需要很长时间`[AccountManager][1]`，并且只执行一次。`AccountManager`令牌背后的想法或您需要在`Service`.

在您的特定情况下，我认为与您沟通的最佳方式`Activity`是对其`Service`具有约束力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T06:38:21.313

有关基本`Service`用法的最佳知识来源是[SDK](http://developer.android.com/guide/topics/fundamentals/services.html)。长话短说`AIDL`用于 IPC 通信，只要您在同一进程中运行服务，您就不需要它。我想你有两个选择：

1.  如果您只需要登录，您可以在启动时启动服务，登录，然后发送带有捆绑登录数据的粘性广播，然后在应用程序中接收。有关在启动时启动服务的一组好方法，请参阅[此问题。](https://stackoverflow.com/questions/4562734/android-starting-service-at-boot-time)

    ```
    @Override
    public void onCreate() {
        Data data = performLogin();
        Intent i = new Intent(ACTION_VOIP_LOGIN);
        i.putExtra(EXTRA_LOGIN_DATA, data);
        mContext.sendStickyBroadcast(i);
    }

    ...

    private final class LoginReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            // You may use a Bundle instead
            Data data = intent.getParcelableExtra();
            processLoginData(data)
        }
    }

    protected void onCreate(Bundle savedInstanceState) {
         ...
         IntentFilter filter = new IntentFilter(ACTION_VOIP_LOGIN);
         mContext.registerReceiver(new LoginReceiver(), filter);
    } 
    ```

2.  在第二种情况下，您可能希望将所有逻辑移至服务。在这里，您将扩展`Binder`该类。有关详细信息，请参阅此[SDK 文章](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Binder)。

# php - 使用 Symfony Forms、Twig 和 SymfonyTwigBridge 时如何覆盖默认模板？

> ID：10331389
> 
> 赞同：4
> 
> 时间：2012-04-26T10:12:59.887
> 
> 标签：php, twig, symfony-forms, silex

我在 Silex 应用程序中使用 Symfony 和 Twig。

我有一个注册页面，其中包含以下表格：

```
{% extends "base.twig" %}

{% block title %}Welcome to My Example site{% endblock %}
{% block head %}
{{ parent() }}
{% endblock %}
{% block content %}

<div class="row">
<div class="span12">
    <h2>Register</h2>
    <p>
        Register for this site and we'll give you free access to cool stuff
        in addition you can subscribe to our premium content.
    </p>

    <form  action="{{app.config.site.secureUrl}}/register-handler" method="post">
        <fieldset >
            {{ form_widget(form) }}
            <button type="submit" class="btn btn-info">Send</button>
        </fieldset>
    </form>
</div>
</div>

</div>

{% endblock %} 
```

尝试呈现页面时出现以下错误：

> Twig_Error_Syntax：第 35 行的“form_div_layout.html.twig”中不存在过滤器“trans”

我已将其缩小为未安装 Symfony 翻译扩展，因此默认模板位于：

```
vendor\symfony\twigbridge\Symfony\Bridge\Twig\Resources\views\Form\form_div_layout.html.twig 
```

无法正确渲染。

我根据上面的模板制作了一个没有翻译功能的新模板。

# 问题

如何让 Twig 使用新模板而不是默认模板？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T10:57:03.663

如果您想使用自己的表单模板，您只需在注册 Twig 时在选项中指定它：

```
$app->register(new Silex\Provider\TwigServiceProvider(), array(
      'twig.path' => __DIR__ . '/[Path_to_views_directory]',
      'twig.class_path' => __DIR__ . '/vendor/twig/lib',
      'twig.form.templates'   => array([path_to_your_overriden_template]),
 )) ; 
```

请参阅文档：[TwigProvider 文档](http://silex.sensiolabs.org/doc/providers/twig.html)

但我认为最好使用原始模板并像这样注册翻译提供者：

```
$app->register(new Silex\Provider\TranslationServiceProvider(), array(
      'locale' => '[Your_locale]',
      'translation.class_path' =>  __DIR__ . '/../vendor/symfony/src',
      'translator.messages' => array()
)) ; 
```

如果您使用验证，请不要忘记阅读这本食谱：

[翻译食谱](http://silex.sensiolabs.org/doc/cookbook/translating_validation_messages.html)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:55:03.463

你应该注册[SymfonyBridgesServiceProvider](http://silex.sensiolabs.org/doc/providers/symfony_bridges.html)和[TranslationServiceProvider](http://silex.sensiolabs.org/doc/providers/translation.html)。

那应该给你反式过滤器并解决你最初的问题。

# java - JNDI 与 spring mvc3 集成

> ID：10331391
> 
> 赞同：2
> 
> 时间：2012-04-26T10:13:08.773
> 
> 标签：java, tomcat, spring-mvc, jdbc, jndi

我正在使用 Spring MVC 3 和 MySQL 服务器。我正在尝试将 JNDI 用于 JDBC 连接，但它返回 NULL 数据源。这是引发空指针异常的一段代码。

`server.xml`文件包含：

```
 <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/>
  </GlobalNamingResources> 
```

`context.xml`文件内容

```
 <Resource name="jdbc/Test" auth="Container" type="javax.sql.DataSource"
           maxActive="100" maxIdle="30" maxWait="10000"
           username="root" password="123456" driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost:3306/test"/> 
```

`web.xml`档案馆：

```
 <resource-ref>
      <description>DB Connection</description>
      <res-ref-name>jdbc/Test</res-ref-name>
      <res-type>javax.sql.DataSource</res-type>
      <res-auth>Container</res-auth>
    </resource-ref> 
```

`despatcher-servlet.xml`文件：

```
 <bean name="myDataSourceInJndi" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName">
            <value>java:comp/env/jdbc/Test</value>
        </property>
    </bean>

    <bean name="dbConfiguration" class="com.biztree.springtest.database.DataBaseConfiguration" >
        <property name="dataSource" ref="myDataSourceInJndi" />
    </bean> 
```

`DataBaseConfiguration.java`

```
package com.biztree.springtest.database;

import javax.sql.DataSource;

public class DataBaseConfiguration {

    DataSource dataSource;

    public DataBaseConfiguration() {
        // TODO Auto-generated constructor stub
    }

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    public DataSource getDataSource() {
        return dataSource;
    }
} 
```

听到是连接代码

```
 /*    this code work throw NullPointerException */
        try {

            DataBaseConfiguration baseConfiguration = new DataBaseConfiguration();
            DataSource ds = baseConfiguration.getDataSource();
            System.out.println("ds Object : " + ds);
            connection = ds.getConnection();
        } catch (Exception exception) {
            exception.printStackTrace();
        } 
```

但它`ds`是空的。

如果我使用以下代码而不是正常工作

```
 /*    this code work fine */
        try {
            Context initCtx = new InitialContext();
            Context envCtx = (Context) initCtx.lookup("java:comp/env");
            DataSource ds = (DataSource)  envCtx.lookup("jdbc/Test");

            System.out.println("ds Object : " + ds);
            connection = ds.getConnection();
        } catch (Exception exception) {
            exception.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:20:07.247

您需要打开 spring 的调试日志记录，和/或调试 spring 以查看它实际查找的内容，并将其与您的直接 JNDI 代码正在执行的操作进行比较。

像这样的事情也可能让你失望：

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jndi/JndiLocatorSupport.html#setResourceRef(boolean](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jndi/JndiLocatorSupport.html#setResourceRef(boolean) )

（你在 JndiObjectFactoryBean 上设置了这个属性，它会自动添加 comp/env 部分......检查默认值是什么并确保它设置正确）

无论如何，一旦您调试 spring 以查看它在做什么，您将能够确认。

# gtk - 如何在 GTK+ 中保持瞬态窗口位于顶部

> ID：10331394
> 
> 赞同：4
> 
> 时间：2012-04-26T10:13:14.897
> 
> 标签：gtk

我正在将一个大型（100 多个文件）8 岁的 GTK+ 应用程序从 Red Hat 2.4 移植到 Ubuntu Lucid。它是工业控制面板的全屏应用程序，操作员无法访问底层操作系统。

它有各种弹出窗口（例如触摸键盘），可以出现在主应用程序的前面。但是，当我在 Ubuntu Lucid 上编译和运行它时，弹出窗口仍然隐藏在主屏幕后面。

这个使用与应用程序相同的 GTK+ 调用的程序演示了这个问题：

```
#include <gtk/gtk.h>
#include <glib.h>
#include <glib/gprintf.h>

int main(int argc, char *argv[])
{
    GtkWidget *mainwindow;
    GtkWidget *popwindow;
    GtkWidget *label;

    gtk_init(&argc, &argv);

    mainwindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_position(GTK_WINDOW(mainwindow), GTK_WIN_POS_CENTER);
    gtk_window_set_decorated(GTK_WINDOW(mainwindow), FALSE);
    gtk_window_fullscreen(GTK_WINDOW(mainwindow));
    gtk_widget_show_all(mainwindow);

    popwindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_keep_above(GTK_WINDOW(popwindow), TRUE);
    gtk_window_set_modal(GTK_WINDOW(popwindow), TRUE);
    gtk_window_set_decorated (GTK_WINDOW (popwindow), FALSE);
    gtk_window_set_resizable (GTK_WINDOW(popwindow), FALSE);
    gtk_window_set_position( GTK_WINDOW (popwindow), (GtkWindowPosition)GTK_WIN_POS_CENTER);
    gtk_window_set_transient_for(GTK_WINDOW(popwindow),GTK_WINDOW(mainwindow));

    label = gtk_label_new(g_strdup_printf ("My GTK version is %d.%d.%d", gtk_major_version, gtk_minor_version, gtk_micro_version));
    gtk_container_add(GTK_CONTAINER(popwindow), label);
    gtk_widget_show(label);
    gtk_widget_show(popwindow);

    gtk_main();

    return 0;
} 
```

弹出窗口保持隐藏状态，只有在 Alt-Tab 到不同窗口（不是主窗口）时才能看到。如果我删除对 gtk_window_set_transient_for() 的调用，则会出现弹出窗口，但桌面面板也会出现，从而可以访问底层操作系统。

有没有办法获得所需的行为？Ubuntu Lucid 使用 GTK+ 2.20.1

谢谢你的帮助

理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:11:20.187

使用[gtk_window_present()](http://developer.gnome.org/gtk/2.24/GtkWindow.html#gtk-window-present)按堆叠顺序实际提升弹出窗口：

```
gtk_window_present (GTK_WINDOW (popwindow)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:57:11.897

看起来这是故意的：全屏窗口始终位于顶部，但这取决于您的窗口管理器。

[https://answers.launchpad.net/awn/+question/126562](https://answers.launchpad.net/awn/+question/126562)

[http://mail.gnome.org/archives/gtk-perl-list/2007-April/msg00071.html](http://mail.gnome.org/archives/gtk-perl-list/2007-April/msg00071.html)

[http://mail.gnome.org/archives/gtk-list/2003-November/msg00059.html](http://mail.gnome.org/archives/gtk-list/2003-November/msg00059.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-03T11:34:46.157

使用[set_keep_above()](http://www.pygtk.org/pygtk2reference/class-gtkwindow.html#method-gtkwindow--set-keep-above)。

示例（Python）：

```
# Create dialog 
d = gtk.Dialog("RT600", buttons=("OK",True,"Cancel",False))

# Centering dialog
d.set_position(gtk.WIN_POS_CENTER)

# Keep dialog above main window !
d.set_keep_above(True)

# run the dialog
result = d.run() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T13:35:14.220

如前所述，这实际上取决于窗口管理器：您的代码可以在我的系统（xfwm）上运行。

我建议禁用它，而不是隐藏东西。尽管面板可以被窗口覆盖，但快捷方式（以及该面板所需的任何内容）仍将启用。这是在默认用户主目录中编写自定义[.xinitrc](http://en.wikibooks.org/wiki/Guide_to_X11/Starting_Sessions)的问题，例如：

```
#! /bin/sh
openbox &
myapplication
shutdown -h 
```

这具有避免桌面包袱并在关闭 myapplication 后关闭系统的额外好处。

附加说明：GTK+2 本身模仿了一个（**非常原始**的）窗口管理器，因此您可以尝试直接启动*myapplication*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-31T10:35:49.127

[尝试](https://developer.gnome.org/gtk3/stable/GtkWindow.html#gtk-window-set-type-hint)

```
gtk_window_set_type_hint(GTK_WINDOW(popwindow), GDK_WINDOW_TYPE_HINT_DIALOG) 
```

[这](https://developer.gnome.org/gtk3/stable/GtkWindow.html#gtk-window-set-type-hint)应该将弹出窗口保持在主窗口之上！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-01T13:28:38.373

简单地用

```
gtk_window_set_keep_above(GTK_WINDOW(window), TRUE); 
```

# java - 修改源 GraphML 文件时如何更新 Prefuse 或 JUNG 图？

> ID：10331397
> 
> 赞同：0
> 
> 时间：2012-04-26T10:13:30.870
> 
> 标签：java, visualization, jung, prefuse

我正在使用 JUNG 或 Prefuse 从 GraphML 源文件渲染图形。现在另一个程序用新的节点和边定期更新这个源文件。我也想更新图表以反映这些变化。我在这两个 API 本身中都找不到任何让我这样做的东西（没有适当的刷新（TIMER）或重绘（TIMER）类型的方法）。这样做的一种方法可能是在一段时间后终止 JFrame 并再次重做整个数据加载、可视化和渲染过程，但这对我来说似乎不合适。

所以问题是，什么是尽可能简单和快速地做到这一点的最佳方法？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:35:00.763

“定期”检查源文件。如果你挂在`f`文件的句柄上，你可以查询`f.lastModified()`，如果自上次检查以来其他程序已经完成了它的脏工作，更新！如果其他程序仅编写更新文件（如果您有能力进行更改，这将是明智的 - 更少的文件要读取，确切地知道要在模型中更改什么等），则适用类似的解决方案。

“定期”有点棘手-您的情况可能很简单，以至于“每X（毫秒）秒检查一次”就可以了。Java 中的周期性任务可以通过多种方式实现 - 参见，例如[this other question](https://stackoverflow.com/questions/1453295/timer-timertask-versus-thread-sleep-in-java)。

JUNG 在更新演示中重新渲染/重新绘制，例如[这个](http://jung.sourceforge.net/applet/animatingaddnodedemo.html)。他们文档中链接的[教程](http://www.grotto-networking.com/JUNG/JUNG2-Tutorial.pdf)(pdf) 涵盖了第 5 节中的动态更新（该部分是关于交互性的，但在出现新信息时进行更新的必要条件都已涵盖）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:01:33.473

JUNG 提供了允许你监听变化的包装器（ObservableGraph）。

收到更新通知后，您必须更新布局，然后刷新可视化。后者以 Swing 的常用方式完成。

# ruby-on-rails - 如何将字符串数组转换为rails中的下拉列表？

> ID：10331399
> 
> 赞同：3
> 
> 时间：2012-04-26T10:13:37.313
> 
> 标签：ruby-on-rails

我是rails的初学者，我有很多次：

> [“08:30”、“09:00”、“09:30”、“10:00”、“10:30”、“11:00”、“11:30”、“12:00”、“ 12:30”、“13:00”、“13:30”、“14:00”、“14:30”、“15:00”、“15:30”、“16:00”、“16: 30”、“17:00”、“17:30”、“18:00”、“18:30”、“19:00”、“19:30”、“20:00”、“20:30” , "21:00", "21:30"]

如何使用`options_from_collection_for_select`. 我尝试使用

`<%= select_tag "start_time", options_from_collection_for_select(@start_time,:id, :name ) %>`

但它回来了`"undefined method 'name' for "08:30":String"`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T10:18:40.407

假设

```
@options = ["08:30", "09:00", "09:30", "10:00", "10:30", "11:00", "11:30", "12:00", "12:30", "13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00", "17:30", "18:00", "18:30", "19:00", "19:30", "20:00", "20:30", "21:00", "21:30"] 
```

代码将是

```
<%= select_tag "start_time", options_for_select(@options) %> 
```

请参阅[options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:20:57.787

您可以使用如下

```
 <%= f.select :time, options_for_select(MONTHS, @job.time) %> 
```

MONTHS => 你的数组

# html - 从 GWT 页面中提取 HTML 内容

> ID：10331401
> 
> 赞同：1
> 
> 时间：2012-04-26T10:13:42.347
> 
> 标签：html, gwt, html-parsing, jericho-html-parser

我想解析用 GWT 编写的 HTML 页面的内容。我尝试使用 Jericho HTML 内容解析器对其进行解析，但问题是页面源没​​有内容。在对 GWT 页面进行了一些研究之后，我了解到 GWT 页面是用 JAVA 编写的，GWT 编译器从 java 代码创建了一个复杂的 js 页面结构，以在浏览器上显示 HTML 内容。

有没有办法可以解析这些类型的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:41:43.553

就像 (m) 任何“单页 Web 应用程序”（包括 Twitter，它*不是*用 GWT 构建的）一样，您必须运行 JavaScript 代码，然后抓取 DOM。

这可以使用[HtmlUnit](http://htmlunit.sourceforge.net/)、[PhantomJS](http://phantomjs.org/)或类似工具*轻松*完成（一切都是相对的） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:22:13.913

如果代码被编译`OBF - Obfuscated mode`（代码通常以这种模式编译以供生产使用）将非常困难，因为`JS`创建的文件是非人类可读的。

此[链接](http://css.dzone.com/news/understanding-gwt-compiler)可能有助于您更好地了解 GWT 编译器。

**编辑**：

[给你](http://blog.gdssecurity.com/labs/tag/gwt)。这也可能会有所帮助。这里提到了如何`De-obfuscate the Javascript`。

**编辑2**：

[GWT-Penetration-Testing-Toolset](https://github.com/GDSSecurity/GWT-Penetration-Testing-Toolset) - 检查此工具。

# python - Python Winsock - 如何通过已经激活的 Winsock 连接发送数据

> ID：10331402
> 
> 赞同：0
> 
> 时间：2012-04-26T10:13:43.263
> 
> 标签：python, winsock, ping, irc

我的脚本是用大多数人不熟悉的不同语言编写的 [MQL4]，但我已将 python 功能导入代码中，因此我可以在脚本中执行 python 代码。我的问题是，我正在使用 MQL4 连接到服务器，并且我想使用 python 通过其流发送数据。到目前为止，我只能让python创建自己的连接。无论如何要连接到已经打开的 Windows 套接字？

MQL 代码

```
void ircconnect(){
int struct_sockaddr[4];
int addr, port_low, port_high;
int opts[1];
int c;

if (irc_disabled == 1) return(0);

// fill the sockaddr struct
addr = inet_addr(server_addr);
port_low = server_port & 0x00ff;
port_high = (server_port & 0xff00) >> 8; 
struct_sockaddr[0] = AF_INET | (port_high << 16) | (port_low << 24);
struct_sockaddr[1] = addr;
struct_sockaddr[2] = 0;
struct_sockaddr[3] = 0;

// connect
s = socket(AF_INET, SOCK_STREAM, 0);

opts[0] = 1000; // send timeout milliseconds
setsockopt(s, SOL_SOCKET, SO_SNDTIMEO, opts, 4);

c = connect(s, struct_sockaddr, 16); 
```

Python代码

```
//Initialize Python Dll
PyInit();
PyExecute("from Tkinter import *");
PyExecute("root = Tk()");   

//Import necessary modules
PyExecute("import socket, os");

//Connect
PyExecute("network = \"irc.ircnetwork.com\"");
PyExecute("port = 6667");
PyExecute("irc = socket.socket(socket.AF_INET, socket.SOCK_STREAM)");
PyExecute("irc.connect((network, port))");

//Identify
PyExecute("irc.recv(1024)");
PyExecute("irc.send(\\"NICK Nick\\r\\n\")");
PyExecute("irc.send(\\"USER Nick Nick Nick :Nick IRC\\r\\n\")");
PyExecute("irc.send(\\"JOIN #channel\\r\\n\")");
PyExecute("irc.send(\"PRIVMSG NickServ IDENTIFY <pass>\\r\\n\")");
PyExecute("VERSION = \"version>\\r\\n\"");

//Listen for PING
PyExecute("while True:");
PyExecute("data = irc.recv(1024)");
PyExecute("print data");
PyExecute("if data.find(\"PING\") != -1:");

//Send PONG
PyExecute("irc.send(\"PONG \" + data.split() [ 1 ] + \"\\r\\n\")");
PyExecute("elif data.find(\"VERSION\") !=-1:");
PyExecute("irc.send(VERSION + \"\\r\\n\")");
PyExecute("elif data.find(\"NOTICE\") !=-1:");
PyExecute("nick = data.split(\"\!\") [ 0 ].replace (\":\", \"\" )");
PyExecute("message = \":\".join( data.split (\":\") [ 2: ] )"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T00:47:00.183

# 是的。

这是可能的，也是值得推荐的。

比您的 MQL 代码可以与任何交易对手“对话”——无论是`Python`, `java`, `C#/C++`, `PHP`, ..., `Erlang`, ... 交易对手。

不要冒着使用原始 O/S 套接字的麻烦和问题的风险，而是使用像**ZeroMQ**这样的更高抽象的方式，它具有由 Austen Conrad 移植和发布的**MQL4ZMQ绑定，**

# java - 从 JSF NullPointerException 启动 Applet

> ID：10331403
> 
> 赞同：0
> 
> 时间：2012-04-26T10:13:43.413
> 
> 标签：java, jsf, applet, myfaces, trinidad

当我在 jsf 页面中运行小程序时（我正在使用 myfaces 和 trinidad 组件），日志在小程序加载时向我显示：

```
SEVERE: Servlet.service() for servlet faces threw exception
java.lang.NullPointerException
        at org.apache.myfaces.trinidadinternal.ui.RootRenderingContext.getRendererManager(RootRenderingContext.java:193)
        at org.apache.myfaces.trinidadinternal.uinode.UIXComponentUINode.getRenderer(UIXComponentUINode.java:379)
        at org.apache.myfaces.trinidadinternal.uinode.UIXComponentUINode.renderInternal(UIXComponentUINode.java:166)
        at org.apache.myfaces.trinidadinternal.uinode.UINodeRendererBase.encodeEnd(UINodeRendererBase.java:70)
        at org.apache.myfaces.trinidad.component.UIXComponentBase.encodeEnd(UIXComponentBase.java:913)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:672)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:668)
        at org.apache.myfaces.trinidad.render.CoreRenderer.encodeChild(CoreRenderer.java:606)
        at org.apache.myfaces.trinidad.render.CoreRenderer.encodeAllChildren(CoreRenderer.java:623)
        at org.apache.myfaces.trinidadinternal.renderkit.core.xhtml.PanelPartialRootRenderer.renderContent(PanelPartialRootRenderer.java:70)
        at org.apache.myfaces.trinidadinternal.renderkit.core.xhtml.BodyRenderer.renderContent(BodyRenderer.java:154)
        at org.apache.myfaces.trinidadinternal.renderkit.core.xhtml.PanelPartialRootRenderer.encodeAll(PanelPartialRootRenderer.java:153)
        at org.apache.myfaces.trinidadinternal.renderkit.core.xhtml.BodyRenderer.encodeAll(BodyRenderer.java:81)
        at org.apache.myfaces.trinidad.render.CoreRenderer.encodeEnd(CoreRenderer.java:493)
        at org.apache.myfaces.trinidad.component.UIXComponentBase.encodeEnd(UIXComponentBase.java:913)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:672)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:668)
        at org.apache.myfaces.shared_impl.view.JspViewDeclarationLanguageBase.actuallyRenderView(JspViewDeclarationLanguageBase.java:355)
        at org.apache.myfaces.shared_impl.view.JspViewDeclarationLanguageBase.renderView(JspViewDeclarationLanguageBase.java:194)
        at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:281)
        at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
        at org.apache.myfaces.trinidadinternal.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:165)
        at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)
        at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:293)
        at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:199)
        at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)
        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)
        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)
        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)
        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)
        at org.apache.catalina.connector.CoyoteAdapter.service(Unknown Source)
        at org.apache.coyote.http11.Http11Processor.process(Unknown Source)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Unknown Source)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:662) 
```

小程序运行正常，但是为什么会出现这个异常呢？

我使用此代码启动小程序（我还使用 f:verbatin 代替 tr:output 和转义）

```
<%@page contentType="text/html"%>
<%@page pageEncoding="ISO-8859-15" %>

<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://myfaces.apache.org/trinidad" prefix="tr"%>
<%@taglib uri="http://myfaces.apache.org/trinidad/html" prefix="trh"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<f:view>
    <f:loadBundle basename="es.atc.planem.resources.general" var="general"/>
    <c:import url="/contents/head.jsp"/>
    <trh:body id="body">
        <tr:form id="general">
            <tr:panelPage>
               <tr:panelGroupLayout layout="vertical">
                    <tr:outputText escape="false" value="<applet  mayscript code=\"org.jdesktop.applet.util.JNLPAppletLauncher\"
                                   codebase=\"#{general['visor.ruta']}\"
                                   width=#{general['visor.width']}
                                   height=#{general['visor.height']}
                                   archive=\"jars/applet-launcher.jar,jars/jogl.jar, 
                                   jars/gluegen-rt.jar,
                                   jars/swing-worker-1.1.jar,
                                   jars/swingx-beaninfo-1.6.2.jar,
                                   jars/swingx-core-1.6.2.jar,
                                   jars/appframework-1.0.3.jar,
                                   jars/mail.jar,
                                   jars/postgis-2.0.0SVN.jar,
                                   jars/postgis_pljava.jar,
                                   jars/postgresql-9.0-801.jdbc4.jar, 
                                   jars/xSocket-2.8.15.jar,
                                   jars/worldwind.jar,
                                   jars/Plan-EM_Applet.jar\">
                                   <param name=\"jnlp_href\" value=\"visor.jnlp\"> 
                                   <param name=\"subapplet.classname\" value=\"WWJApplet\">
                                   <param name=\"subapplet.displayname\" value=\"WWJ Applet\">
                                   <param name=\"noddraw.check\" value=\"true\">
                                   <param name=\"progressbar\" value=\"true\">
                                   <param name=\"progressbar\" value=\"true\">
                                   <param name=\"jnlpNumExtensions\" value=\"1\">
                                   <param name=\"jnlpExtension1\"
                                   value=\"#{general['visor.ruta']}/jogl.jnlp\"></applet>" id="_applet"/>
                    <tr:spacer height="10px"/>
                    <tr:commandButton id="btnCancelar" actionListener="#{bBean.cerrarVisor}"
                                      styleClass="small" 
                                      text="#{general['boton.texto.cerrar']}"/>
                </tr:panelGroupLayout>
            </tr:panelPage>
        </tr:form>
    </trh:body>
</f:view> 
```

谢谢！

# php - 字符串到日期值php的转换

> ID：10331407
> 
> 赞同：1
> 
> 时间：2012-04-26T10:13:51.033
> 
> 标签：php, datetime, type-conversion

我的日期字符串值为“ **Wed, 25 Apr 2012 23:17:06 -0400** ”

我想将其转换为日期值

ps：我使用的是 php 5.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:17:20.747

试试这个

```
$str = "Wed, 25 Apr 2012 23:17:06 -0400";
$date = date("Y-m-d",strtotime($str)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:16:49.810

你的意思是：

```
 $date = "Wed, 25 Apr 2012 23:17:06 -0400";
echo date("Y-m-d H:i:s", strtotime($date)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:18:14.720

```
$date_val = 'Wed, 25 Apr 2012 23:17:06 -0400';
echo date('Y-m-d', strtotime($date_val)); 
```

您可以随意更改日期格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:18:37.157

看看这些：

[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

你可以做类似 date('Ymd' strtotime('Wed, 25 Apr 2012 23:17:06 -0400'));

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T10:18:51.323

我发现了以下功能，希望对您有所帮助：

```
<?php
    $str = "Wed, 25 Apr 2012 23:17:06 -0400";
    $myDate = strtotime($str);
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T10:19:41.727

试试这个 $dateSrc = "Wed, 25 Apr 2012 23:17:06 -0400"; $dateTime = new DateTime($dateSrc);

# linux - DHCP 服务器将任何 URL 重定向到登录页面

> ID：10331408
> 
> 赞同：2
> 
> 时间：2012-04-26T10:13:53.413
> 
> 标签：linux, redirect, dns, dhcp, spoofing

我有一个 linux DHCP 服务器，我需要将所有网络流量重定向到一个登录页面，该页面将说明如何在网络上注册他​​们的计算机。

无论用户输入什么 URL，都需要将用户重定向到网页（在 DHCP 服务器上）。

即：用户键入 google.com 他们会立即重定向到 192.168.10.1。此 DHCP 服务器将永远不会用于访问 Web。一旦用户从登录页面获得注册计算机的说明，他们将被列入此特定 DHCP 服务器的黑名单，并被迫从主 DHCP 服务器请求 IP。

如何创建这样的重定向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:49:47.407

您似乎正在尝试设置所谓的强制门户。

这有几个组件，其中一个确实是 DHCP 服务器，但这并不是最关键的。

**简短概述**

您的网络将至少包含以下组件：

*   DHCP 服务器
*   DNS 服务器
*   网关
*   登录系统

客户端将从 DHCP 服务器获得 IP 地址，并被告知使用您的 DNS 服务器和网关。

**解决方案 1：基于 DNS 的重定向**

在用户登录之前，您的 DNS 服务器会回复登录 Web 服务器的 IP 地址。注意在 DNS 回复上设置一个非常低的 TTL。您要确保客户端浏览器在登录后重新解析 IP 地址。

这很可能会导致除端口 80 上的 Web 浏览之外的任何应用程序出现问题。

**方案二：TCP拦截**

这是一个稍微困难的解决方案，但可能会更好。DNS 服务器总是为客户端试图访问的任何网站返回正确的 IP 地址。网关会将端口 80 上的 TCP 会话重定向到登录服务器。所有其他数据包都应该得到一个 ICMP 错误回复（例如网络不可达）。

# iteration - 如何从 Handlebars 每个循环中逃脱？

> ID：10331409
> 
> 赞同：2
> 
> 时间：2012-04-26T10:14:10.980
> 
> 标签：iteration, each, handlebars.js

我正在使用 Handlebars 的每个帮助器迭代数组，但是当我在循环内部时，如何引用循环数组中不包含对象的 mixin？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-07T07:09:53.683

车把中的变量通过基于深度的路径访问。因此，可以使用**{{../variable_name}}访问 #each 之外的变量**

# python - 解析区域字符串语言

> ID：10331413
> 
> 赞同：1
> 
> 时间：2012-04-26T10:14:30.287
> 
> 标签：python, encoding

我正在使用 python 进行 exel 解析。
到目前为止，我一直使用英语，但是当我遇到区域语言时，我得到了错误。

例子 ：

```
IR05 měsíční (monthly) 
```

它给了我错误

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\u011b' in position 6: ordinal not in range(128) 
```

我如何解析它并且我可以再次在输出文件中用相同的语言编写？

我的代码：

```
for j in val:
    print 'j is - ', j
    str(j).replace("'", "") 
```

我在替换语句中收到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:52:28.807

```
>>> "IR05 měsíční (monthly)".decode('utf8')
u'IR05 m\u011bs\xed\u010dn\xed (monthly)' 
```

这是原始字符串的 unicode 版本（以 utf8 编码）。

现在您可以将它与您解码的其他字符串（来自文件）进行比较（来自 utf8 或 latin2 或其他格式），并且可以比较它们。

```
>>> 'IR05 m\xecs\xed\xe8n\xed (monthly)'.decode('latin2')
u'IR05 m\u011bs\xed\u010dn\xed (monthly)' 
```

现在您可以比较两个 unicode 字符串：

```
>>> s_utf8 = "IR05 měsíční (monthly)"
>>> s_latin2 = 'IR05 m\xecs\xed\xe8n\xed (monthly)'
>>> s_utf8.decode('utf8') == s_latin2.decode('latin2')
True 
```

要将字符串写入文件，请`encode`再次：

```
>>> s = s_utf8.decode('utf8')

>>> filehandle.write(s.encode('utf8')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:39:27.207

错误可能是由str(j)引起的，试试这个：

```
for j in val:
    print 'j is - ', j
    j.replace("'", "") 
```

# c# - 为什么我们需要观察者模式？

> ID：10331414
> 
> 赞同：3
> 
> 时间：2012-04-26T10:14:32.373
> 
> 标签：c#, java, design-patterns, observer-pattern

我读了一本关于观察者模式的书。它给出了以下示例：

类`clock`，带方法`time()`

Class `message`，其中 3 个类继承自它：`Fax, Mail, Memo`.

应用程序希望在上午 12 点到达时发送消息。

本书推荐观察者模式。它说如果我们添加新的类：`VideoMsg`扩展消息，它会影响类时钟的实现。但我不明白为什么。时钟类将保存`message`' 对象的集合，如果我们添加一个新的继承类，它不会改变时钟类。

如果有人能解释上面的例子，或者给出一个更好的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:38:18.903

用简单的话，让你理解[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)

如果有 1000 人订阅了一份日报。

每当有新副本到达时，即每天，发布者都会向其订阅者发送副本。

同样的方式一个类将在获得新信息时向其观察者发送信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:26:39.907

因为新的新类，即观察者，只会调用`subscribe`时钟实例中的方法，当时钟到达 12AM 时，它会调用该`notifyObservers`方法，该方法将遍历订阅者并调用他们的`notify`方法，告诉他们现在是 12AM .

他们将以自己的方式对此做出反应，通过向用户显示消息或响铃或其他方式，您无需更改时钟实现中的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:23:32.527

老实说，很难给出答案，因为示例中没有太多的实现细节。

在观察者模式中，“被观察对象”（Subject）将持有对观察者的引用，而主题*通常*负责构造“消息”发送给观察者。这意味着，如果您需要通知 Observers 有新消息，则需要更改 Subject 的实现，因为它需要知道新消息是如何构造的。

但是，这仅描述了正常的观察者模式实现。正如您所说，也有可能使主题不依赖于消息的情况或变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:45:44.030

本质是：

被观察者不需要持有观察者的引用，只需要提供一个处理程序来描述被通知时的行为。

将观察者模式与 OO 理论继承和多态结合起来，您将看到您的代码将变得多么灵活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T11:07:57.953

除了缺少细节之外，我猜“消息”会观察时钟对象以按时触发“动作”。取决于“如何”（观察）？这是实施它*可能*意味着改变时钟是必要的。观察者模式是“我们叫你——不要叫我们”的模式。它基本上可以防止昂贵的忙等待循环。

# c++ - 无法编译 QtCreator

> ID：10331415
> 
> 赞同：1
> 
> 时间：2012-04-26T10:14:33.747
> 
> 标签：c++, qt, compilation

我正在尝试使用 gcc 4.7 构建 QtCreator，但出现以下错误： ![在此处输入图像描述](../Images/065f9e7e873916364becc0c520f8415b.png)

关键是我卸载了QtSDK，而是从源代码构建了Qt（但不是我现在正在做的QtCreator）。我检查了`PATH`变量并且没有在任何地方提到 QtSDK，但是 mingw32-make 正在从某个地方获取它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:56:33.097

在尝试编译之前，您是否从 README 中完成了这些工作？

```
set QTDIR=<working_directory>\qt
set PATH=%QTDIR%\bin;<path_to_mingw>\bin;<working_directory>\creator\bin;%PATH%
set QMAKESPEC=win32-g++ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:01:13.783

既然您**对 Windows 的 Qt Creator**感兴趣并且有**一个**二进制文件，为什么不这样安装呢？

[http://qt.nokia.com/downloads/downloads#qt-creator](http://qt.nokia.com/downloads/downloads#qt-creator)

# sql-server - 使用 JPA 和 EclipseLink 进行 MS SQL Server 全文搜索

> ID：10331419
> 
> 赞同：1
> 
> 时间：2012-04-26T10:14:46.090
> 
> 标签：sql-server, jpa, jpa-2.0, eclipselink, jpql

MSSQL 2008 EclipseLink 2.3.0 JPA 2.0

我正在尝试进行 JPQL 查询以使用 MSSQL 的全文搜索功能。

正如我们所知，FUNC 上瘾的 EclipseLink 函数不起作用 [1] 因为它期望返回值，而 MSSQL `freetext`[2] 实际上不是一个函数，而是一些看起来像函数 [3] 的魔术谓词，我正在尝试使用[4]中提到的下一个强大的功能，`SQL`

我试过这个

```
and SQL('freetext(?, ?)', d.title, :title) 
```

和这个

```
and SQL('freetext(?, :title)', d.title) 
```

和 =1 结尾的组合

```
and SQL('freetext(?, ?)', d.title, :title) = 1 
```

没有任何成功。它说的是

第 5 行，第 7 列：意外令牌 [(]。内部异常：NoViableAltException(83@[()* loopback of 383:9: (d= DOT right= attribute ) *])] 根本原因 NoViableAltException(83@[()* 383:9 的环回：(d= DOT right= attribute )*])

其中第 5 行第 7 列在 SQL 关键字之后的第一个左括号周围。

我试图避免使用本机 SQL，因为我想利用不使用许多一对多相关类编写连接的优势。

使用 SQL 特殊功能的正确方法是什么？

[1][如何从 JPA 使用 MySQL 的全文搜索](https://stackoverflow.com/questions/9186845/how-to-use-mysqls-full-text-search-from-jpa)

[2] [http://msdn.microsoft.com/en-us/library/ms176078(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms176078(v=sql.105).aspx)

[3] [Hibernate + MSSQL + 通过包含全文搜索](https://stackoverflow.com/questions/9488094/hibernate-mssql-fulltext-search-via-contains)

[4] [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Support_for_Native_Database_Functions#SQL](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Support_for_Native_Database_Functions#SQL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:05:19.390

EclipseLink 中的 SQL 运算符是 EclipseLink 2.4 中的新功能。为此，您需要使用 EclipseLink 2.4 里程碑或每晚构建。

如果不能使用 2.4，则可以使用本机 SQL 查询。

[http://www.eclipse.org/eclipselink/downloads/milestones.php](http://www.eclipse.org/eclipselink/downloads/milestones.php)

# share - Google+ 分享 - 无法定位到 iframe - 出现错误：“此内容无法在框架中显示”

> ID：10331423
> 
> 赞同：1
> 
> 时间：2012-04-26T10:15:03.173
> 
> 标签：share, google-plus

我想知道是否有其他人遇到过这个问题。

我想将 google+ 分享网址定位到 iframe，而不必打开一个新窗口。

以下是我正在使用的测试代码：

```
<?php
$url = "https://plus.google.com/share?url=http%3A%2F%2Feu.arithon.com%2Frss%2Fjobdetails.php%3Fclient_user_id%3Darithon_1348%26jobs_id%3D10000";
?>
<!DOCTYPE html>
<html>
<head>
</head>
<body>

    <div>
        <iframe src = "<?php echo $url ?>" frameborder=no width=600 height=300></iframe>
    </div>

    <script type="text/javascript">
        function openShareWindow()
        {   
            url =  "<?php echo $url ?>";
            window.open(url, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600');
            return false;       
        }
    </script>

    <a href="javascript:void()" onclick="openShareWindow();">
        <img src="http://eu.arithon.com/new_arithonASP/new_images/arithon_post.jpg" alt="Share on Google+"/>
    </a>

</body>
</html> 
```

在 Internet Explorer 中，iframe 显示错误“此内容无法在框架中显示...”等

在Firefox中，没有错误并且iframe是空的！

有什么方法可以将 url 定位到 IE 中的 iframe 而不会出现此错误？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:21:40.383

共享 URL 旨在打开一个新窗口，而不是在 iframe 中打开，因此像这样使用它是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:49:27.807

当您使用`<iframe>`时，您在 IE 中的结果可能取决于您拉入的来源。换句话说，某些来源会起作用，某些来源会产生这个问题。如果您在 IE 中收到错误消息**“此内容无法在框架中显示。为保护您输入本网站的信息的安全性，此内容的发布者不允许在框架中显示”**尝试以下操作：

添加`security="restricted"`到您的标签：

> <iframe src="YOUR_URL" security="restricted">

在尝试引入 Blogspot / Blogger 博客时，我遇到了完全相同的问题。添加`security="restricted"`属性后，问题就消失了。

这是来自 Microsoft 的文档：http: [//blogs.msdn.com/b/ie/archive/2008/01/18/using-frames-more-securely.aspx](http://blogs.msdn.com/b/ie/archive/2008/01/18/using-frames-more-securely.aspx)

# iphone - 我无法对我的 iOS 应用程序进行代码签名

> ID：10331426
> 
> 赞同：7
> 
> 时间：2012-04-26T10:15:24.780
> 
> 标签：iphone, ios, xcode, code-signing, code-signing-certificate

我之前购买了开发者计划，并将证书安装到我的钥匙串中（iPhone 开发者和 iPhone 发行版）。当我将应用程序部署到真实设备时，Xcode 给了我这个错误：
代码签名错误：默认钥匙串中没有有效的证书/私钥对。
当我转到 Organizer>Teams 时，出现错误并显示以下消息：
无法使用此团队中的身份进行代码签名：没有可用的私钥。
当我转到配置文件时，出现此错误：未找到有效的签名身份。
我尝试从门户下载证书并将它们再次移动到我的钥匙串，但我发现这些证书没有附带任何密钥。我在哪里可以得到钥匙？而且，我的钥匙串中也没有看到软件签名证书。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T10:19:11.943

我已经通过删除与应用程序签名相关的所有内容（因此在 Xcode、Keychain Access 和 developer.apple.com 上）解决了这个问题，并[按照供应门户主页](https://developer.apple.com/ios/manage/overview/index.action)上的向导（称为启动助手）创建了新的配置文件。

# python - python中'gem'的等价物是什么？

> ID：10331430
> 
> 赞同：15
> 
> 时间：2012-04-26T10:15:37.267
> 
> 标签：python

> **可能重复：**
> [python 有包/模块管理系统吗？](https://stackoverflow.com/questions/2436731/does-python-have-a-package-module-management-system)

在红宝石中，我可以做类似的事情

```
gem install my-cool-gem 
```

我如何在python中做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-26T10:17:31.180

您正在寻找[PyPi - Python 包索引。](http://pypi.python.org/pypi).

你做：

```
pip install package 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T10:34:39.457

如果您安装了[setuptools](http://pypi.python.org/pypi/setuptools)，那么您可以使用[easy_install](http://packages.python.org/distribute/easy_install.html)。我猜两者都从 PyPI 获取包。pip虽然比 easy_install[更受欢迎。](https://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install)

# javascript - 在标签库jsp中调用一个javascript函数

> ID：10331433
> 
> 赞同：1
> 
> 时间：2012-04-26T10:15:48.850
> 
> 标签：javascript, jsp, jsp-tags

如何在标签库中的 jsp 中调用 javascript 函数。我试过类似的东西，下面是我的代码。

JavaScript 函数：

```
 function myconfirmBox(msg){ alert(msg);} 
```

JSP代码：

```
<s:if test="Messages()">
            myconfirmBox("hello");
        </s:if> 
```

我实际上做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:19:43.083

JSP 的东西**在服务器上**运行，你的 JavaScript 代码将**在客户端上**运行（除非你试图与 Rhino 集成，我怀疑不是这样）。所以你在那里所做的实际上是`myconfirmbox("hello");`作为页面上的文本输出的。

如果您希望它作为内联脚本运行，请`<script>`在其周围添加标签。但更有可能您需要退后一步，看看更广泛的上下文，您可能希望在显示确认框之前等待某种事件发生（即使只是页面完全加载）。

在编写动态服务器端代码时，您始终必须考虑实际发送到浏览器以进行解释的内容。您可以使用 Chrome 开发者工具中的网络选项卡等工具来查看您实际发送的内容，这样您就可以看到浏览器正在使用什么。

# php - 解析 cURL 获取信息 PHP

> ID：10331437
> 
> 赞同：0
> 
> 时间：2012-04-26T10:16:12.330
> 
> 标签：php, curl

我有一个 cURL 响应：

```
<html version="-//W3C//DTD XHTML 2.0//EN" xml:lang="en" xsi:schemaLocation="http://www.w3.org/1999/xhtml http://www.w3.org/MarkUp/SCHEMA/xhtml2.xsd" xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<HEAD>
<TITLE>Request Error</TITLE>
</HEAD>
<BODY>
<DIV id="content">
<P class="heading1"><B>Error Status Code:</B> 'BadRequest'</P>
<P><B>Details: </B>Customer email address is not unique - xxxxxxxxx@xxxxxx.com</P>
</DIV>
</BODY>
</html> 
```

当我通过 SimpleXMLElement 将其转换为 XML 对象时，我无法访问 P 标签内的内容。有没有一种快速的方法来获取标头响应（400），或者更好地获取 cURL 系统发送的信息。

我得到了结果：

```
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSLCERT, SPEKTRIX_CERT);
curl_setopt($ch, CURLOPT_SSLKEY, SPEKTRIX_KEY);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADERFUNCTION, 'handleHeader');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($ch, CURLOPT_VERBOSE, false);
curl_setopt($ch, CURLOPT_HEADERFUNCTION, 'handleHeader');
curl_setopt($ch, CURLOPT_STDERR, fopen('php://output', 'w'));
$requestHeaders = array();
curl_setopt($ch, CURLOPT_HTTPHEADER, $requestHeaders);
$result = curl_exec($ch); 
```

感谢您的任何见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:18:45.750

这个怎么样：

```
...prepare $ch...
$output = curl_exec($ch);
$info = curl_getinfo($ch);
echo $info['http_code']; // will output 400 for an invalid request 
```

# nutch - Nutch Fetcher 用 N 挂起的线程中止

> ID：10331440
> 
> 赞同：2
> 
> 时间：2012-04-26T10:16:29.067
> 
> 标签：nutch

我正在使用 Nutch-1.4 来抓取网站。我在爬行中面临的问题是 fetcher 总是用 N 个挂起的线程中止。日志文件中的条目是，

> INFO fetcher.Fetcher - -activeThreads=1, spinWaiting=0, fetchQueues.totalSize=0
> INFO fetcher.Fetcher - -activeThreads=1, spinWaiting=0, fetchQueues.totalSize=0
> INFO fetcher.Fetcher - -activeThreads=1, spinWaiting= 0, fetchQueues.totalSize=0
> WARN fetcher.Fetcher - 用 1 个挂起的线程中止。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:48:39.257

尽管有所有意图，但有些请求似乎挂起。当 Fetcher 线程长时间不执行任何活动时，就会发生这种情况。[请参阅此处](http://www.docjar.com/html/api/org/apache/nutch/fetcher/Fetcher.java.html)的第 932-936 行。

**在这里处理的步骤：**

1.  检查在此消息记录到日志文件之前抓取了哪些 url。（请参阅日志中的 fetching... 语句）。
2.  这些网址是否需要大量时间来加载？（尝试`wget`从同一台机器访问这些 url。
3.  那些页面的内容大吗？（检查它们的大小））
4.  超时值通常为 600 秒。在hadoop配置的mapred-site.xml中增加配置[mapred.task.timeout的值。](http://hadoop.apache.org/common/docs/r0.20.0/mapred-default.html)（对于本地模式，只需在 nutch-site.xml 中添加较大的值即可）
5.  您是否正在执行任何需要花费大量时间的操作（例如解析）？应用程序是否挂在某个地方？

我想如果你能解决这些问题，你可以把它修好。

还阅读[了这个](http://lucene.472066.n3.nabble.com/Nutch-1-2-fetcher-aborting-with-N-hung-threads-td2411724.html)和[这个](http://lucene.472066.n3.nabble.com/Nutch-1-1-Crawl-is-slow-hangs-and-aborts-eventually-td1402770.html)。

# php - PHPUnit 和 MySQL 截断错误

> ID：10331445
> 
> 赞同：14
> 
> 时间：2012-04-26T10:16:48.957
> 
> 标签：php, mysql, phpunit

`TRUNCATE`我对 PHPUnit在插入夹具之前总是运行*而不*首先设置外键检查的行为感到头疼：

`Syntax error or access violation: 1701 Cannot truncate a table referenced in a foreign key constraint`

基本上，PHPUnit 在插入固定装置之前会尝试截断表格。我该如何告诉它`SET FOREIGN_KEY_CHECKS=0;`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-26T10:48:02.877

我似乎找到了答案。我最终通过扩展一个类来覆盖一些方法。

```
<?php

/**
 * Disables foreign key checks temporarily.
 */
class TruncateOperation extends \PHPUnit_Extensions_Database_Operation_Truncate
{
    public function execute(\PHPUnit_Extensions_Database_DB_IDatabaseConnection $connection, \PHPUnit_Extensions_Database_DataSet_IDataSet $dataSet)
    {
        $connection->getConnection()->query("SET foreign_key_checks = 0");
        parent::execute($connection, $dataSet);
        $connection->getConnection()->query("SET foreign_key_checks = 1");
    }
} 
```

然后示例用法：

```
class FooTest extends \PHPUnit_Extensions_Database_TestCase
{
    public function getSetUpOperation()
    {
        $cascadeTruncates = true; // If you want cascading truncates, false otherwise. If unsure choose false.

        return new \PHPUnit_Extensions_Database_Operation_Composite(array(
            new TruncateOperation($cascadeTruncates),
            \PHPUnit_Extensions_Database_Operation_Factory::INSERT()
        ));
    }
} 
```

因此，我有效地禁用了外键检查，并在它们被设置时将它们重新设置。显然，您应该创建一个具有此功能的基类并扩展它，而不是 PHPUnit 的 TestCase。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T23:12:32.247

或者，您可以通过删除所有记录然后重新设置自动增量计数器的组合来模拟截断。

首先，您必须创建新的数据库操作类来处理重置表的自动增量值。

```
/**
 * Resets all AUTO_INCREMENT counters on all tables in a dataset.
 * @see PHPUnit_Extensions_Database_Operation_IDatabaseOperation
 */
class ResetAutoincrementOperation implements PHPUnit_Extensions_Database_Operation_IDatabaseOperation
{

    /* 
     * @see PHPUnit_Extensions_Database_Operation_IDatabaseOperation::execute()
     */
    public function execute(PHPUnit_Extensions_Database_DB_IDatabaseConnection $connection, 
            PHPUnit_Extensions_Database_DataSet_IDataSet $dataSet)
    {
        foreach ($dataSet->getReverseIterator() as $table) {
            $query = "ALTER TABLE {$connection->quoteSchemaObject($table->getTableMetaData()->getTableName())}"
                . " AUTO_INCREMENT = 1
            ";

            try {
                $connection->getConnection()->query($query);
            } catch (PDOException $e) {
                throw new PHPUnit_Extensions_Database_Operation_Exception('RESET_AUTOINCREMENT', 
                        $query, array(), $table, $e->getMessage());
            }
        }
    }
} 
```

现在覆盖上面描述的`getSetUpOperation()`和方法。`getTearDownOperation()`

```
class FooTest extends PHPUnit_Extensions_Database_TestCase
{
    /**
     * @see PHPUnit_Extensions_Database_TestCase::getTearDownOperation()
     */
    protected function getTearDownOperation ()
    {
        // Clean up after ourselves
        return new PHPUnit_Extensions_Database_Operation_Composite(array(
            PHPUnit_Extensions_Database_Operation_Factory::DELETE_ALL(), // 1\. delete all records from table
            new ResetAutoincrementOperation() // 2\. reset auto increment value
        ));
    }

    /**
     * @see PHPUnit_Extensions_Database_TestCase::getSetUpOperation ()
     */
    protected function getSetUpOperation ()
    {
        return new PHPUnit_Extensions_Database_Operation_Composite(array(
                PHPUnit_Extensions_Database_Operation_Factory::DELETE_ALL(), // 1\. delete all records from table
                new ResetAutoincrementOperation(), // 2\. reset auto increment value
                PHPUnit_Extensions_Database_Operation_Factory::INSERT() // 3\. insert new records
        ));
    }
} 
```

使用 MySQL 5.5.24 和 PHPUnit 3.6.10 为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T05:57:39.957

```
\DB::statement('SET FOREIGN_KEY_CHECKS=0;'); 
```

# javascript - javascript将值传递给弹出页面

> ID：10331448
> 
> 赞同：0
> 
> 时间：2012-04-26T10:16:54.957
> 
> 标签：javascript, forms, popup

我有一个 100 行的订单表格。对于其中的每一个，都有一个带有弹出窗口的按钮，用户可以在其中选择他们想要订购的产品。

我已经改编了我在网上找到的一个 javscript，它按照下面的代码工作。我的问题是我有 100 行，每个产品的名称分别为 sku1、sku2、sku3 ... sku4、sku5。我不想创建 100 个 javascript 代码实例？

我正在寻找一种将输入字段 sku3 的值传递给弹出窗口的方法，以便它知道将值发送回哪个字段。

任何帮助，将不胜感激。

我的主页代码是：（相关代码片段 - 真实文档中的 100 行）

```
<tr id="r1">  
    <td>
        <input size=10  type=number id=sku1 name=sku1>
        <img src=q.png border=0 onClick="window.open('popupselector.php','orderform','width=500,height=600');">
    </td>
    <td>
        <input type="number" name="qty1" id="qty1">
    </td>   
</tr>
<tr id="r2">  
    <td>
        <input size=10  type=number id=sku2 name=sku2>
        <img src=q.png border=0 onClick="window.open('popupselector.php','orderform','width=500,height=600');">
    </td>
    <td>
        <input type="number" name="qty2" id="qty2">
    </td>   
</tr>
<tr id="r3">  
    <td>
        <input size=10  type=number id=sku3 name=sku3>
        <img src=q.png border=0 onClick="window.open('popupselector.php','orderform','width=500,height=600');">
    </td>
    <td>
        <input type="number" name="qty3" id="qty3">
    </td>   
</tr> 
```

popupselector.php 的 javascript 代码是：

```
<SCRIPT LANGUAGE="JavaScript">

function sendValue(s){
var selvalue = s.options[s.selectedIndex].value;
window.opener.document.orderform.sku1.value = selvalue;
window.close();
}

</script>
<form name=selectform>

<SELECT NAME=selectmenu size=30> 
<?=$options?> 
</SELECT> 

<input type=button value="Select" onClick="sendValue(this.form.selectmenu);">
</form> 
```

在 javascript 有 sku1 的地方，我希望它是一个变量，具体取决于用户单击的行：

```
window.opener.document.orderform.sku1.value = selvalue; 
```

我不想将 sku1、sku2、sku3 硬编码到这些页面中，因为我需要 100 个 popupselector.php 页面。

谢谢和问候，瑞恩史密斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:33:15.370

我认为您可以创建一个变量作为`id`项目的变量，然后在循环中查询它们。

```
function sendValue(s){
    for (var i = 1; i < 101; i++) {
        var selvalue = s.options[s.selectedIndex].value;
        var itemId = 'sku' + i;
        var item = document.getElementById(itemId).value = selvalue;
    }
    window.close();
} 
```

如果`selvalue`在每个循环中都没有变化，则可以将其移出循环

**- - 更新以将 id 从表单发送到 javascript 弹出窗口 - -** 您可以使用 DOM 访问在 img 点击之前站立的输入的 id：

```
function sendValue(s){
    var inputField = s.previousSibling; // will be the space between <input> and <img>
    if (inputField.nodeName != 'INPUT') 
        inputField = inputField.previousSibling; // will be the <input> node

    // Here you can get id, name... attributes with: inputField.getAttribute('id'), inputField.getAttribute('name')
    window.close();
} 
```

**一些想法**：如果表格行是从 PHP 代码生成的，为什么不直接将 id 插入到 img 标记中并将其返回到 popupselector.php 中

```
<img src=q.png border=0 onClick="window.open('popupselector.php?<?=$rowId ?>','orderform','width=500,height=600');"> 
```

# actionscript-3 - 为什么 Firefox 会覆盖我的对象的 allowScriptAccess 标签？

> ID：10331450
> 
> 赞同：0
> 
> 时间：2012-04-26T10:17:07.937
> 
> 标签：actionscript-3, flash, firefox

我的页面上有这个目标代码。

```
<object data='http://example.com/player.swf' height='398' id='player' type='application/x-shockwave-flash' width='398'>
<param name='flashvars' value='config=http://example.com/config.js'>
<param name='movie' value='http://example.com/player.swf'>
<param name='allowfullscreen' value='true'>
<param name='allowScriptAccess' value='never'>
</object> 
```

如果我`ExternalInterface`的 ActionScript 代码中有调用，它们将在 Firefox 上运行，而不是在 Chrome 上运行。使用 Firebug 仔细检查后，我注意到不仅我的`allowScriptAccess`标签被覆盖，而且还注入了一个新标签：

```
<param value="always" name="allowScriptAccess">
<param name="AllowNetworking" value="all"> 
```

**为什么会这样？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:33:16.207

原来[FlashFirebug](http://www.o-minds.com/products/flashfirebug)对此负责。

# javascript - 如何通过 JS 代码连接 JS 事件处理程序

> ID：10331451
> 
> 赞同：2
> 
> 时间：2012-04-26T10:17:10.123
> 
> 标签：javascript, html, javascript-events

我有一个像这样的 HTML 元素：

```
<span id="myspan" ondblclick="edit(this)">Text to be edited</span> 
```

我如何绑定相同类型的处理程序-> 编辑（此）

通过javascript 到ondblclick 事件？我想要下面的东西；

```
function someMethod(){
   var span = document.getElementById("myspan");

   span.ondblclick = edit(span); // This line doesn't work...

} 
```

非常感谢您的帮助

南墩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:18:34.963

它不起作用，因为您将该函数的结果分配给 dbclick 处理程序。试试这个；

```
span.ondblclick = function() {
    edit(span); 
}; 
```

或者你可以做

```
span.ondblclick = edit; 
```

但你需要改变你的编辑功能

```
function edit(event) {
    var span = event.target;
    // do your stuff
} 
```

这样您就可以定位单击的元素。

# c# - X 轴和 Y 轴上的 Windows 窗体 C# 图形轴标签

> ID：10331455
> 
> 赞同：10
> 
> 时间：2012-04-26T10:17:28.427
> 
> 标签：c#, winforms, charts

谁能告诉我如何在图表的 xy 轴上写标签？那些说“时间（s）”和“速度（m / s）”的人。

我正在使用`System.Windows.Forms.DataVisualization.Charting.Chart`. 我缺少的地方应该有一个简单的属性，还是更复杂？

![带有标记轴的图](../Images/d9ab129c7979f536daf5f383c4807348.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T10:28:52.393

我正在使用网络上的图表控件，并通过以下方式设置 X 和 Y 轴标题。

我假设 API 与 winforms 相同。

```
var chartArea = new ChartArea("MyChart");
...
chartArea.AxisX.Title = "Times(s)";
chartArea.AxisY.Title = "Speed (m/s)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-07T18:12:09.253

没有一个解决方案对我有用。我使用以下代码帮助我在 Windows 表单图表上添加轴标题。我添加了几个有用的属性，所以任何正在研究它的人都可以知道如何使用它。我搜索了很多以找出所有这些属性。这种类型的例子很少。

```
chartESTOr.Titles.Add("Est OR Date " + " (" + Year + ")").Font = new Font("Arial", 10, FontStyle.Bold); // Chart Title
chartESTOr.ChartAreas["ChartArea1"].AxisX.Title = "Month";  // Chart X Axis Title
chartESTOr.ChartAreas["ChartArea1"].AxisX.TitleAlignment = StringAlignment.Center; // Chart X axis Text Alignment 
chartESTOr.ChartAreas["ChartArea1"].AxisX.TextOrientation = TextOrientation.Rotated270; // Chart X Axis Text Orientation 
chartESTOr.ChartAreas["ChartArea1"].AxisX.TitleFont = new Font("Arial", 8, FontStyle.Bold); // Chart X axis Title Font
chartESTOr.ChartAreas["ChartArea1"].AxisX.Interval = 1; // Chart X Axis Interval
chartESTOr.ChartAreas["ChartArea1"].AxisY.Title = "Quote Value (USD)"; // Chart Y Axis Title 
chartESTOr.ChartAreas["ChartArea1"].AxisY.TitleAlignment = StringAlignment.Center;  // Chart Y axis Text Alignment 
chartESTOr.ChartAreas["ChartArea1"].AxisY.TextOrientation = TextOrientation.Horizontal; // Chart Y Axis Text Orientation
chartESTOr.ChartAreas["ChartArea1"].AxisY.TitleFont = new Font("Arial", 8, FontStyle.Bold); // Chart Y axis Title Font
chartESTOr.ChartAreas["ChartArea1"].AxisY.LabelStyle.Format = "{0:0,}K"; // Chart Y Axis lable format 
```

# php - 未定义的索引和无效的foreach（）参数php

> ID：10331457
> 
> 赞同：1
> 
> 时间：2012-04-26T10:17:33.927
> 
> 标签：php, forms, undefined-index

我有一个页面显示用户已保存到 MYSQL 数据库的项目，并将其与复选框一起显示出来。我希望当用户单击此复选框并单击保存按钮时，记录将被删除，但我的标题中出现错误。

显示假期表格。

```
 <form action="deleteProcess.php">
<?php
        foreach($db->query($sql) as $row)
        {
            echo "<p>" . $row['title'] . "<br \>" . 
                         $row['description'] . "<br \>" . 
                         $row['link'] . "<br \>" .
                         $row['pubDate'] . 
                         "<input type='checkbox' name='del[]' value='$row/['title'/]'/>" . 
                         "</p>";    
        }
?>
        <input type="submit" name="delete" value="submit" />
        </form> 
```

删除process.php

```
foreach($_POST['del'] as $check_value)
        {
            //takes session value and assigns it to a variable so that when a holiday is saved it can be distinguished by user
            $user = $_SESSION['name'];
            //assign the value of previous checkbox to $check
            $check = $check_value;
            //assign xpath query to variable $fav
            $fav = "channel/item [title = \"$check\"]";
            //loads instance of xml file as $holidayDoc
            $holidayDoc = simplexml_load_file('holidays.xml');
            //executes xpath search within holidays.xml and results stored in $favourites
            $favourites = $holidayDoc->xpath($fav);

        //for each element of the associative array $favourites, key will be referred to as $currentFav. 
        foreach($favourites as $currentFav)
        {
            echo "{$currentFav->link}". "<br \>";
            echo "{$currentFav->title}". "<br \>";
            echo "{$currentFav->description}". "<br \>";
            echo "{$currentFav->pubDate} ". "<br \>";
            //sql statement that states which values will be inserted into which column
            $sql = "DELETE FROM `saved_holidays` (`subscriberID`, `link`, `pubDate`, `title`, `description`) 
        VALUES ('$user', '$currentFav->link', '$currentFav->pubDate', '$currentFav->title', '$currentFav->description')";

            //connect to database then execute the sql statement.
            $db->exec($sql);
            //close connection to the database
            $db = null; 
```

错误显示`foreach($_POST['del'] as $check_value)`在线路上，我无法理解为什么它不起作用，任何帮助将不胜感激。

> 注意：未定义索引：第 14 行 /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11026991/public_html/Ass/deleteProcess.php 中的删除
> 
> 警告：在第 14 行的 /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11026991/public_html/Ass/deleteProcess.php 中为 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:22:17.240

您的`del`复选框根本没有从表单中发布。您需要添加`method="post"`到您的表单中。

`<form action="deleteProcess.php" method="post">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:21:47.340

您应该首先检查是否设置了 $_POST['del'] 因为如果没有选中复选框，则不会。

```
if(isset($_POST['del'])){
    foreach($_POST['del'] as $del){}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:22:24.427

您通过 $_POST 访问您的复选框值，但您的 Form-Tag 没有定义方法！你必须设置`<form method="POST">`，否则你必须使用`$_GET['del']`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T10:23:21.343

`method="post"`中缺少`<form action`。

您的删除 SQL 语法也不正确。从数据库中删除记录时，您不指定列。您删除了整条记录。

删除语法是：

```
DELETE FROM table_name WHERE condition 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T10:24:56.637

您的表格中缺少`method="post"`您，因此没有发布任何内容，这是您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T10:23:22.290

这个错误很明显。

```
$_POST['del'] 
```

不存在，因为`del`它不是已发布表单的有效字段。

如果`del`是复选框的名称，您首先必须通过添加`post action`到您的表单来检索它们

# objective-c - XCode：目标 C：UIPageViewController 中的多个视图

> ID：10331461
> 
> 赞同：1
> 
> 时间：2012-04-26T10:17:56.290
> 
> 标签：objective-c, xcode

我正在制作一个简单的杂志应用程序并使用 UIPageViewController 进行尝试。

我的计划是在每个页面和用户交互上都有动画。

我设法查看了每个页面中具有不同图像的所有页面，但我知道它只是一个查看器，因为它只有一个视图，即 UIImageView 和一系列数组。

我想要的是拥有不同的视图控制器，以便我可以在其上添加其他功能并添加一些按钮。

我正在开发新 XCode 的基于页面的应用程序。

可能吗？？

# maven - Maven执行计划

> ID：10331462
> 
> 赞同：7
> 
> 时间：2012-04-26T10:17:56.280
> 
> 标签：maven, alm

我有一个很长的构建，其中包含大量步骤、插件和执行，这些步骤、插件和执行配置在大约 30 个 pom 中，属于一个复杂的模块化项目。由于构建花费了太多（2h），我想对其进行一些简化，为此我希望 maven 列出我在不执行它的情况下会经历的所有步骤。就像是：

```
$ mvn --dry-run clean
[INFO] Reactor Build Order:
[INFO] 
[INFO] Main project
[INFO] Module#1
[INFO] Module#2
[..]
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Main Project
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ main ---
[INFO] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Module#1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ module1 ---
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0:01.020s
[INFO] Finished at: Thu Apr 26 09:56:14 CEST 2012
[INFO] Final Memory: 198M/379M
[INFO] ------------------------------------------------------------------------ 
```

有没有办法在我不挖掘几兆的日志文件的情况下获得这样的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:46:34.550

由于显然没有 OOTB 方法可以做到这一点，我最终编写了[plan-maven-plugin](https://github.com/skuro/plan-maven-plugin)。它允许您展开提供`goals`参数的计划：

```
mvn plan:plan -Dgoals=clean,javadoc:jar,sources:jar,package,gpg:sign,install 
```

或将其作为正常构建的一部分执行：

```
mvn plan:plan clean javadoc:jar sources:jar package gpg:sign install 
```

样本输出：

```
$ mvn plan:plan clean javadoc:javadoc package install site:site
[...]
[INFO] --- plan-maven-plugin:1.1:plan (default-cli) @ plan-maven-plugin ---
[INFO]
[INFO] Current lifecycle:
[INFO]     pre-clean
[INFO]     clean
[INFO]     post-clean
[INFO]     validate
[INFO]     initialize
[INFO]     generate-sources
[INFO]     process-sources
[INFO]     generate-resources
[INFO]     process-resources
[INFO]     compile
[INFO]     process-classes
[INFO]     generate-test-sources
[INFO]     process-test-sources
[INFO]     generate-test-resources
[INFO]     process-test-resources
[INFO]     test-compile
[INFO]     process-test-classes
[INFO]     test
[INFO]     prepare-package
[INFO]     package
[INFO]     pre-integration-test
[INFO]     integration-test
[INFO]     post-integration-test
[INFO]     verify
[INFO]     install
[INFO]     deploy
[INFO]
[INFO] Execution plan:
[INFO]     [-] tk.skuro:plan-maven-plugin:plan (default-cli)
[INFO]     [clean] org.apache.maven.plugins:maven-clean-plugin:clean (default-clean)
[INFO]     [-] org.apache.maven.plugins:maven-javadoc-plugin:javadoc (default-cli)
[INFO]     [validate] org.apache.maven.plugins:maven-enforcer-plugin:enforce (enforce-maven)
[INFO]     [generate-resources] org.apache.maven.plugins:maven-plugin-plugin:descriptor (default-descriptor)
[INFO]     [process-resources] org.apache.maven.plugins:maven-resources-plugin:resources (default-resources)
[INFO]     [compile] org.apache.maven.plugins:maven-compiler-plugin:compile (default-compile)
[INFO]     [process-test-resources] org.apache.maven.plugins:maven-resources-plugin:testResources (default-testResources)
[INFO]     [test-compile] org.apache.maven.plugins:maven-compiler-plugin:testCompile (default-testCompile)
[INFO]     [test] org.apache.maven.plugins:maven-surefire-plugin:test (default-test)
[INFO]     [package] org.apache.maven.plugins:maven-jar-plugin:jar (default-jar)
[INFO]     [package] org.apache.maven.plugins:maven-plugin-plugin:addPluginArtifactMetadata (default-addPluginArtifactMetadata)
[INFO]     [validate] org.apache.maven.plugins:maven-enforcer-plugin:enforce (enforce-maven)
[INFO]     [generate-resources] org.apache.maven.plugins:maven-plugin-plugin:descriptor (default-descriptor)
[INFO]     [process-resources] org.apache.maven.plugins:maven-resources-plugin:resources (default-resources)
[INFO]     [compile] org.apache.maven.plugins:maven-compiler-plugin:compile (default-compile)
[INFO]     [process-test-resources] org.apache.maven.plugins:maven-resources-plugin:testResources (default-testResources)
[INFO]     [test-compile] org.apache.maven.plugins:maven-compiler-plugin:testCompile (default-testCompile)
[INFO]     [test] org.apache.maven.plugins:maven-surefire-plugin:test (default-test)
[INFO]     [package] org.apache.maven.plugins:maven-jar-plugin:jar (default-jar)
[INFO]     [package] org.apache.maven.plugins:maven-plugin-plugin:addPluginArtifactMetadata (default-addPluginArtifactMetadata)
[INFO]     [install] org.apache.maven.plugins:maven-install-plugin:install (default-install)
[INFO]     [-] org.apache.maven.plugins:maven-site-plugin:site (default-cli)
[INFO] 
```

# css - Facebook HTML5 活动提要自定义 css

> ID：10331470
> 
> 赞同：1
> 
> 时间：2012-04-26T10:18:18.300
> 
> 标签：css, facebook, plugins

有没有办法将自定义 css 添加到 HTML5 [Facebook 活动插件](https://developers.facebook.com/docs/reference/plugins/activity/)？

这是它的代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-activity" data-width="300" data-height="300" data-header="true" data-recommendations="false"></div> 
```

我想显示更大的图像并更改链接的颜色。谢谢。乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:20:54.977

当然，您应该能够挂钩 Facebook 提供的元素类，例如：

```
.fbWidgetTitle
{
 // Change styles on the title of the activity box
} 
```

使用 Firebug 或任何你必须检查源代码的工具，看看你能连接到什么。

# jquery - 防止 jQuery Mobile 在拖动时切换列表视图项

> ID：10331472
> 
> 赞同：0
> 
> 时间：2012-04-26T10:18:23.167
> 
> 标签：jquery, mobile, draggable, jquery-ui-sortable, collapsable

我有一个 jqm 列表视图，其中有可折叠的部分，并希望所有列表元素都是可拖动的（准确地说是可排序的）[http://jsfiddle.net/aaTAJ/20/](http://jsfiddle.net/aaTAJ/20/)。

可折叠列表项被删除后，它的内容被切换，这就是我想要摆脱的。

到目前为止，我有：

```
 jQuery('ul').sortable({
    revert: 50,
    axis: 'y',
    placeholder: 'ui-state-highlight',
    opacity: 0.75,
    start: function(event, ui) {
        window.preventCollapsibleToggle = true;

    },
    stop: function(event, ui) {
        window.preventCollapsibleToggle = false;
    }
}) 
```

这需要在 jqm 核心中进行修改：

```
...
collapsible.bind("expand collapse", function(event) {
if (!event.isDefaultPrevented() && !window.preventCollapsedToggle) {

    event.preventDefault();

    /* ... */

}
}).trigger(o.collapsed ? "collapse" : "expand"); 
```

它正在工作，但如果可能的话，我宁愿不改变 jqm 核心。

有人有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:52:37.357

删除线

```
revert: 50, 
```

似乎完成了这项工作：http: [//jsfiddle.net/aaTAJ/33/](http://jsfiddle.net/aaTAJ/33/)

此外，[文档](http://api.jqueryui.com/draggable/#option-revert)指出“revert”是一个布尔值。

# entity-framework - 如何使用 LINQ to SQL 一次连接多个表？

> ID：10331480
> 
> 赞同：2
> 
> 时间：2012-04-26T10:18:47.637
> 
> 标签：entity-framework, linq-to-sql

```
Users:
    userid    name    email
    1         venkat   v@g.com
    2         venu     ve@g.com
    3         raghu    r@g.com

patners:
id   userid   patnerid  status
1     1        2           1
2     1        3           1

location:
id   userid    lat    lon
1     1        12.00  13.00
2     2        14.00  12.00
3     3        14.00  14.23 
```

如果用户以 userid=1 的身份发送请求，那么我需要拉他的模式 [2,3] lat,lon 值和他们的名字......如何实现这一点？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:26:03.430

```
var locations = 来自 Context.users 中的 u
                在 u.partners 中加入 p
                加入 l 在 p.locations
                其中 u.userid = 1
                选择 l;

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:30:06.207

```
var query = from p in parters
            join u in users on p.userid equals u.userid
            where u.userid == 1
            select new
            {
                //properties of p & u  
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:30:18.273

下一行应该做的事情。另请查看[LINQ 101 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

```
var result = from u in db.Users
             join p in db.Partners on u.userid equals p.userid
             join l in db.locations on l.userid equals u.userid
             where u.userid == 1
             select new 
                    {
                      UserId= u.userID,
                      PatnerID = p.patnerid
                    }; 
```

# java - Spring Entity bean 未知。使用新的 Spring 3.1 packagesToScan 属性并且没有 persistence.xml

> ID：10331490
> 
> 赞同：2
> 
> 时间：2012-04-26T10:19:20.273
> 
> 标签：java, spring, jpa, spring-data-jpa

我的 EclipseLink 和 Spring（MVC 和 spring-data）版本 3.1.1 设置的另一个问题：

[根据本文](http://www.baeldung.com/2011/12/13/the-persistence-layer-with-spring-3-1-and-jpa/)，我正在尝试在不使用 persistence.xml 文件的情况下让 JPA 工作。在文章中说：

> 通常，JPA 通过 META-INF/persistence.xml 文件定义一个持久化单元。从 Spring 3.1 开始，不再需要此 XML 文件 - LocalContainerEntityManagerFactoryBean 现在支持“packagesToScan”属性，可以指定要扫描 @Entity 类的包。
> 
> persistence.xml 文件是要删除的最后一个 XML 文件——现在，JPA 可以完全设置而无需 XML。

我知道如果使用persistence.xml 文件，这里的所有实体类都应该在这里声明。但是，我正在尝试使用该`packagesToScan`属性。下面是完整的启动日志和在向 servlet 发出一个请求后产生的错误，该 servlet 最终尝试在数据库中创建一个新用户。它似乎没有认识到该`User`对象是一个实体。由于我对 Spring 的经验很少，我想知道是否有人首先可以发现我正在犯的错误，但除此之外，知道调试它的最佳方法。我想知道 EntityManagerFactory 已经识别了哪些 Entity 对象。

我的备份选项是切换到使用 persistence.xml（实际上还没有尝试过），但如果可能的话，我想摆脱它（少一个 XML 文件需要担心）。

**更新：**根据 Sean Patrick Floyd 的回答，我在对 entityManagerFactory 进行了推荐的配置更改后更新了错误日志，但这并没有解决主要问题。我还尝试了另一种方法，通过创建一个 persistence.xml 文件（旧的和更常见的方法）并在我访问的 servlet 中添加一小段测试代码来启动它功能。所以现在我的 servlet 中有这段代码：

```
User user = new User();
user.setFirstName("John");
user.setLastName("Doe");
// user = userService.addUser(user);

EntityManagerFactory emf = Persistence.createEntityManagerFactory("proxiPU");
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
em.persist(user); 
em.getTransaction().commit();
em.close();
emf.close(); 
```

而这个 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

    <persistence-unit name="proxiPU" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>com.proxi.user.User</class>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="eclipselink.jdbc.driver" value="org.hsqldb.jdbcDriver"/>
            <property name="eclipselink.jdbc.url" value="jdbc:hsqldb:file:\Users\nly31175\hsqldb;shutdown=true"/>
            <property name="eclipselink.jdbc.user" value="proxi"/>
            <property name="eclipselink.jdbc.password" value=""/>
            <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.HSQLPlatform"/>
            <property name="eclipselink.logging.level" value="FINEST"/>
            <property name="eclipselink.orm.throw.exceptions" value="true"/>
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
            <property name="eclipselink.ddl-generation.output-mode" value="database"/>
        </properties>
    </persistence-unit>
</persistence> 
```

这实际上有效，所以我现在想知道 EntityManagerFactory 的初始化方式是否存在问题或类似的问题。我已经包含了应该执行数据库相关工作的 UserService 类的代码。

这是完整的启动日志（包括错误）：

```
INFO: Reloading Context with name [/proxi] is completed
INFO : com.proxi.controller.HomeController - Welcome home! The client locale is en_GB
[EL Info]: 2012-04-26 15:17:35.066--ServerSession(313687096)--Thread(Thread[http-bio-8980-exec-3,5,main])--EclipseLink, version: Eclipse Persistence Services - 2.2.0.v20110202-r8913
[EL Config]: 2012-04-26 15:17:35.079--ServerSession(313687096)--Connection(1182807222)--Thread(Thread[http-bio-8980-exec-3,5,main])--connecting(DatabaseLogin(
    platform=>HSQLPlatform
    user name=> ""
    connector=>JNDIConnector datasource name=>null
))
INFO : hsqldb.db.HSQLDB36EB6EA7CB.ENGINE - checkpointClose start
INFO : hsqldb.db.HSQLDB36EB6EA7CB.ENGINE - checkpointClose end
[EL Config]: 2012-04-26 15:17:36.016--ServerSession(313687096)--Connection(1257700692)--Thread(Thread[http-bio-8980-exec-3,5,main])--Connected: jdbc:hsqldb:file:\Users\nly31175\hsqldb;shutdown=true
    User: proxi
    Database: HSQL Database Engine  Version: 2.2.6
    Driver: HSQL Database Engine Driver  Version: 2.2.6
INFO : hsqldb.db.HSQLDB36EB6EA7CB.ENGINE - Database closed
[EL Config]: 2012-04-26 15:17:36.365--ServerSession(313687096)--Connection(385835848)--Thread(Thread[http-bio-8980-exec-3,5,main])--connecting(DatabaseLogin(
    platform=>HSQLPlatform
    user name=> ""
    connector=>JNDIConnector datasource name=>null
))
INFO : hsqldb.db.HSQLDB36EB6EA7CB.ENGINE - checkpointClose start
INFO : hsqldb.db.HSQLDB36EB6EA7CB.ENGINE - checkpointClose end
[EL Config]: 2012-04-26 15:17:36.877--ServerSession(313687096)--Connection(603544782)--Thread(Thread[http-bio-8980-exec-3,5,main])--Connected: jdbc:hsqldb:file:\Users\nly31175\hsqldb;shutdown=true
    User: proxi
    Database: HSQL Database Engine  Version: 2.2.6
    Driver: HSQL Database Engine Driver  Version: 2.2.6
INFO : hsqldb.db.HSQLDB36EB6EA7CB.ENGINE - Database closed
[EL Info]: 2012-04-26 15:17:37.328--ServerSession(313687096)--Thread(Thread[http-bio-8980-exec-3,5,main])--file:/C:/Users/nly31175/workspace/spring/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/proxi/WEB-INF/classes/_default login successful
Apr 26, 2012 3:17:37 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/proxi] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: Object: com.proxi.user.User@5ca3ce3f is not a known entity type.] with root cause
java.lang.IllegalArgumentException: Object: com.proxi.user.User@5ca3ce3f is not a known entity type.
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4128)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:406)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at $Proxy23.persist(Unknown Source)
    at com.proxi.user.UserService.save(UserService.java:27)
    at com.proxi.user.UserService.addUser(UserService.java:39)
    at com.proxi.controller.HomeController.home(HomeController.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

根上下文.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->
    <bean id="userService" class="com.proxi.user.UserService" >
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <!-- Starting with Spring 3.1, the persistence.xml XML file is no longer 
        necessary. The LocalContainerEntityManagerFactoryBean now supports a ‘packagesToScan’ 
        property where the packages to scan for @Entity classes can be specified. -->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="jpaDialect" ref="jpaDialect" />
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.proxi.user" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
                <property name="databasePlatform" value="org.eclipse.persistence.platform.database.HSQLPlatform" />
            </bean>
        </property>
        <property name="loadTimeWeaver">
            <bean class="org.springframework.instrument.classloading.SimpleLoadTimeWeaver" />
        </property>
    </bean>

    <bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect " />

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:file:\Users\nly31175\hsqldb;shutdown=true" />
        <property name="username" value="proxi" />
        <property name="password" value="" />
    </bean>

    <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

</beans> 
```

用户.java 类：

```
/**
 * 
 */
package com.proxi.user;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Table;

import javax.persistence.Id;

    /**
     * Represents an application user.
     */
    @Entity
    @Table(name = "user")
    public class User {

        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        @Column(name = "id")
        private Long id;

        @Column(name = "first_name")
        private String firstName;

        @Column(name = "last_name")
        private String lastName;

        // /////// GETTERS AND SETTERS ///////////

        public String getFirstName() {
            return firstName;
        }

        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }

        public String getLastName() {
            return lastName;
        }

        public void setLastName(String lastName) {
            this.lastName = lastName;
        }

        public Long getId() {
            return id;
        }

        public void setId(Long id) {
            this.id = id;
        }
    } 
```

这是 UserService.java

```
package com.proxi.user;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.PersistenceUnit;

import org.springframework.transaction.annotation.Transactional;

/**
 * Performs user related operations.
 * 
 */
public class UserService {

    @PersistenceUnit
    private EntityManagerFactory entityManagerFactory;

    @Transactional
    public User save(User user) {
        EntityManager entityManager = entityManagerFactory.createEntityManager();

        if (user.getId() == null) {
            entityManager.persist(user);
            return user;
        } else {
            return entityManager.merge(user);
        }
    }

    public User findUser(String userid) {
        return null;
    }

    public User addUser(User user) {
        return save(user);
    }

    // /////////////////////// GETTERS AND SETTERS //////////////////////

    public EntityManagerFactory getEntityManagerFactory() {
        return entityManagerFactory;
    }

    public void setEntityManagerFactory(EntityManagerFactory entityManagerFactory) {
        this.entityManagerFactory = entityManagerFactory;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:18:56.527

> 内部异常：java.sql.SQLSyntaxErrorException：对象名称已经存在：USER 在语句 [CREATE TABLE 用户（id BIGINT GENERATED BY DEFAULT AS IDENTITY（START WITH 1，INCREMENT BY 1）NOT NULL，first_name VARCHAR（255），last_name VARCHAR（ 255), 主键 (id))]

这似乎是问题所在：Spring / EclipseLink 正在尝试创建一个已经存在的表。

尝试从您的 xml 上下文中删除此行：

```
<property name="generateDdl" value="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:51:16.443

我已经在这个问题上搜索了好几天，我能想到的最好的结果是在本教程中对 JPA 的限制做一个小注释，标题为：[EclipseLink JPA Deployed on Tomcat 6 using Eclipse WTP](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Tomcat_Web_Tutorial#Non-JTA_Datasource)。相关部分说：

> 由于 Tomcat 不是与 Java EE 5 兼容的服务器，因此 JPA 存在一些限制。
> 
> *   没有动态编织（仪器）——实体的静态编织仍然可以通过 EclipseLink 获得。
> *   无法`@EJB`注入会话 bean（包含`EntityManager`） - 直接使用持久性工厂和管理器。
> *   没有`@PersistenceContext`注入容器管理的持久性单元可用 - 使用 `Persistence.createEntityManagerFactory(JTA_PU_NAME)`。

我认为后两点适用于我遇到的问题。正如我所说，我可以让它与测试代码片段一起工作，但是当我尝试正确连接它时，我遇到了问题。因此，没有任何其他答案，我认为这是我将不得不接受的答案。欢迎任何进一步的见解，因为我不觉得这是一个非常令人满意的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:47:45.023

@chrisjleu 你非常接近。我通过将 eclipse 链接设置为使用静态编织来使其工作：

```
private static final Properties jpaProperties = new Properties();
static {
    jpaProperties.put("eclipselink.logging.level", "INFO");
    jpaProperties.put("eclipselink.weaving", "static");
} 
```

并将其添加到`LocalContainerEntityManagerFactoryBean.setJpaProperties(jpaProperties)`

为了让静态编织工作，我正在使用 AspectJ。我的项目在 Maven 中，所以我使用以下插件：

```
 <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.2</version>
                <!-- NB: do not use 1.3 or 1.3.x due to MASPECTJ-90 and do not use 1.4 
                    due to declare parents issue -->
                <dependencies>
                    <!-- NB: You must use Maven 2.0.9 or above or these are ignored (see 
                        MNG-2972) -->
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjrt</artifactId>
                        <version>${version.aspectj}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjtools</artifactId>
                        <version>${version.aspectj}</version>
                    </dependency>
                </dependencies>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>test-compile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <outxml>true</outxml>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-aspects</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>
                    <source>${version.java}</source>
                    <target>${version.java}</target>
                </configuration>
            </plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:14:15.613

您的`persistence.xml`文件是否存在于项目中？
如果是这种情况`persistence.xml`，请从项目中完全删除。该文件在某种程度上与`packagesToScan`属性冲突，即使您没有在配置中的任何地方明确提及它。我自己也遇到过这种特殊情况。

# android - android xml 在带有 WVGA 的 api 8 中加载良好，但在带有 WXGA720（平板电脑）的 api 14 中崩溃

> ID：10331491
> 
> 赞同：2
> 
> 时间：2012-04-26T10:19:26.827
> 
> 标签：android, xml, tablet

程序加载正常，我可以通过几个屏幕，但是当 main.xml 尝试加载时，程序仅在 api 14 上崩溃。

日志输出：

```
04-26 09:02:14.290: E/AndroidRuntime(566): FATAL EXCEPTION: main
04-26 09:02:14.290: E/AndroidRuntime(566): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.surreall.yacht/com.surreall.yacht.yatzee}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.os.Looper.loop(Looper.java:137)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-26 09:02:14.290: E/AndroidRuntime(566):  at java.lang.reflect.Method.invokeNative(Native Method)
04-26 09:02:14.290: E/AndroidRuntime(566):  at java.lang.reflect.Method.invoke(Method.java:511)
04-26 09:02:14.290: E/AndroidRuntime(566):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-26 09:02:14.290: E/AndroidRuntime(566):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-26 09:02:14.290: E/AndroidRuntime(566):  at dalvik.system.NativeStart.main(Native Method)
04-26 09:02:14.290: E/AndroidRuntime(566): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
04-26 09:02:14.290: E/AndroidRuntime(566):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-26 09:02:14.290: E/AndroidRuntime(566):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.Activity.setContentView(Activity.java:1835)
04-26 09:02:14.290: E/AndroidRuntime(566):  at com.surreall.yacht.yatzee.onCreate(yatzee.java:211)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.Activity.performCreate(Activity.java:4465)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
04-26 09:02:14.290: E/AndroidRuntime(566):  ... 11 more
04-26 09:02:14.290: E/AndroidRuntime(566): Caused by: java.lang.reflect.InvocationTargetException
04-26 09:02:14.290: E/AndroidRuntime(566):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-26 09:02:14.290: E/AndroidRuntime(566):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
04-26 09:02:14.290: E/AndroidRuntime(566):  ... 23 more
04-26 09:02:14.290: E/AndroidRuntime(566): Caused by: java.lang.OutOfMemoryError
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.Bitmap.nativeCreate(Native Method)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.content.res.Resources.loadDrawable(Resources.java:1937)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.View.<init>(View.java:2780)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.view.ViewGroup.<init>(ViewGroup.java:385)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.widget.LinearLayout.<init>(LinearLayout.java:174)
04-26 09:02:14.290: E/AndroidRuntime(566):  at android.widget.LinearLayout.<init>(LinearLayout.java:170)
04-26 09:02:14.290: E/AndroidRuntime(566):  ... 26 more 
```

由于堆栈溢出的 30k 个字符问题限制，我无法发布 main.xml 的内容，而且还不止这些。从哪里开始的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T00:28:35.940

[在这里](https://stackoverflow.com/questions/7837122/java-lang-outofmemoryerror-on-android-4-0-api-14)发现了类似的问题

显然这是 android 模拟器的堆大小问题。我将用于 API 14 的模拟器的 AVD 中的“最大 VM 应用程序堆大小”从 24 更改为 48，并且它不再崩溃。它仍然不能完全解释为什么 API 从使用 6mb 的堆变为 23.5mb，我希望最终用户设备上的硬件都至少有 48mb 的堆，否则他们的应用程序会崩溃。现在我将其标记为已修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:41:24.413

according to my experience , it can also occur on a real device - the exact same out-of-memory exception occured for me on the galaxy nexus . i think it occurs because of the resolution .

here are possible solutions:

1.  sample the images according to your need.
2.  set a larger heap size in the manifest.
3.  if the images are static , create your own imageView alternative , which only shows the image and after that doesn't hold a reference to it (or use softreference and a builder instead) .
4.  use opengl /ndk or whatever framework that can bypass the heap size limit .
5.  in any case , do not store all of your images . instead , store only those that you need currently , and the rest can stay in your cache (which could be LRU cache or softreference cache ) .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T23:58:40.783

您尝试在布局中加载太大的图像。请参阅错误消息的底部：

```
OutOfMemoryError
Resources.loadDrawable() 
```

它在一个里面的某个地方`LinearLayout`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T20:55:40.210

检查问题是否与自 API 14 以来默认启用的硬件加速无关，更多信息在这里：

[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

在我正在处理的一个应用程序中，我们在一个特定视图上崩溃了，这是由 API 14 启用的硬件加速引起的。上面的链接显示了如何在多个级别禁用它，在我的例子中，只是在视图级别禁用它，因为如果您尝试使用新主题（自 ICS 以来引入），禁用整个应用程序会导致一些问题。

# c - 大端和小端机器的结构填充

> ID：10331493
> 
> 赞同：3
> 
> 时间：2012-04-26T10:19:33.230
> 
> 标签：c, endianness

我正在通过编译器负责对齐，如以下链接中所述。

[http://vcfaq.mvps.org/lang/11.htm](http://vcfaq.mvps.org/lang/11.htm)

我将我的问题概括为我们必须以编程方式对齐的场景以及编译器将为我们做的那些场景？

如果两台机器具有不同的字节序类型，即一台 m/c 是大字节序，另一个是小字节序并且通过 TCP/IP 协议进行通信，是否需要填充？

请澄清我的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:36:27.660

`write()`当您通过（或任何您的函数）发送原始结构时，您只需要担心填充和对齐。检查您的编译器文档，了解如何强制编译器关闭填充，并在 1 字节边界上对齐，如果发送结构是您真正想要做的。不过，只能在网络层执行此操作，因为您正在有效地关闭您正在编译的架构的数据优化。如果您在应用程序特定算法（大量读取和写入）中使用结构，如果您摆弄对齐和填充设置，您**将失去性能。**

此外，您还必须确保结构的所有字段都采用双方都同意的字节序。填充和对齐不影响字节序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:26:15.810

TCP/IP 将网络字节顺序定义为 Big-Endian。具有 Little-Endian 架构的计算机必须在传输数据和接收数据之前将 TCP/IP 标头信息中的字节重新排序为 Big-Endian 格式。

TCP/IP 套件中的所有协议层都被定义为大端。

填充/对齐不受字节序的影响。

# r - 矩阵中存在的响应模式数

> ID：10331494
> 
> 赞同：2
> 
> 时间：2012-04-26T10:19:34.933
> 
> 标签：r, matrix

如何在 R 中的矩阵中为所有变量获取实际响应模式的数量？例如，我有一个由 3 个变量 a、b、c 和三个观察值组成的数据集。

```
a<-c(0,1,0)
b<-c(1,0,1)
c<-c(1,0,1)
d<-cbind(a,b,c) 
```

导致矩阵

`d`

如果我没记错的话，它有两种响应模式：0,1,1 出现在两个观察中，1,0,0 出现在一个观察中。是否有一个函数可以告诉我是否需要在更大的数据集中进行计算？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:32:01.320

另一种可能性是使用`duplicated()`. 这将仅获得独特响应模式的数量，而不是它们是什么。

```
length( which( !duplicated(d) ) )

# [1] 2 
```

这看起来比使用`apply()`和/或快得多`table()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:26:22.247

你可以试试：

```
table(apply(d, 1, paste, collapse="")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:22:05.120

主题的变化，允许选择感兴趣的列。

```
d<-data.frame(d)
d$combined<-with(d, paste(a,b,c))
table(d$combined)

0 1 1 1 0 0 
    2     1

data.frame(table(d$combined))

Var1 Freq
1 0 1 1    2
2 1 0 0    1 
```

有关提示 ，请参阅[计算 R 中的唯一值。](https://stackoverflow.com/questions/4215154/count-unique-values-in-r)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T15:25:41.710

什么，还没有`ddply`解决办法？你`plyr`的粉丝越来越慢了...

```
> library(plyr)
> d <- as.data.frame(d)
> ddply(d, ~a+b+c, summarize, n=length(c))
  a b c n
1 0 1 1 2
2 1 0 0 1 
```

也可以使用`paste`可能更少的输入来创建公式：

```
f <- paste("~", paste(names(d), collapse="+"))
ddply(d, as.formula(f), summarize, n=length(c)) 
```

# javafx-2 - Java FX 2 表格单元格编辑和焦点

> ID：10331497
> 
> 赞同：6
> 
> 时间：2012-04-26T10:19:41.303
> 
> 标签：javafx-2

我一直在学习一些关于 JavaFX 2 的知识，但我遇到了可编辑表格单元格的问题，我也找不到解决方案。为了节省大量代码的粘贴，我创建了一个项目，其中仅包含 JavaFX 文档中的 TableView 示例：http: [//docs.oracle.com/javafx/2/ui_controls/table-view.htm](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)

如果您运行此代码，您会看到以下行为：

1.  单击一行选择该行。
2.  单击选定行中的单元格会将单元格转换为文本字段，以便对其进行编辑。
3.  单击文本字段可以编辑内容。

问题是单击三下即可到达可以编辑单元格的位置。我想要实现的是当创建的文本字段（例如步骤2）焦点直接切换到文本字段时。

关于如何实现这一点，我最好的猜测是添加`textField.requestFocus()`到`startEditing()`方法的末尾：

```
@Override
public void startEdit() {
    super.startEdit();

    if (textField == null) {
        createTextField();
    }
    setGraphic(textField);
    setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
    textField.selectAll();
    textField.requestFocus();
} 
```

但这不起作用。如果我在文本字段中添加一个焦点侦听器，我会发现它获得了焦点，但随后又失去了焦点。在侦听器中放置一个断点似乎表明 TableView 在显示文本字段之前正在重新获得焦点。

因此，问题是如何在编辑开始时将焦点放在文本字段上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T10:27:38.373

您能否将这一行替换为`textField.requestFocus();`：

```
 Platform.runLater(new Runnable() {
            @Override
            public void run() {
                textField.requestFocus();
            }
       }); 
```

然后再试一次。

# javascript - 如果文本与 jQuery 中的字符串匹配，则删除元素

> ID：10331504
> 
> 赞同：1
> 
> 时间：2012-04-26T10:20:15.697
> 
> 标签：javascript, jquery

我有以下标记：

```
<div id="breadcrumbs">
  <ul>
   <li><span class="crumblink"><a href="/">Home</a></span></li>
   <span class="arrows"> »</span>  
   <li><span class="crumblink"><a href="/locations-brands">Publishing Regions</a></span></li>
   <span class="arrows"> »</span>  
   <li><span class="crumblink"><a href="/locations-brands/publications">Locations &amp; Brands</a></span></li>
   <span class="arrows"> »</span>
   <li><span class="crumblink"><a href="/locations-brands/publications/popupbrand">Publications</a></span></li>
   <span class="arrows"> »</span>  
  </ul>
</div> 
```

如何删除`<li>`if 具有字符串“Publications”及其下一个`span.arrows`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T10:22:34.470

有几种方法可以做到这一点，但一种是使用[`$()`](http://api.jquery.com/jQuery)选择器来查找`li`s，然后遍历它们（[`each()`](http://api.jquery.com/each)很方便）使用[`text()`](http://api.jquery.com/text)来获取它们的文本，`String#indexOf`检查内容，并[`next()`](http://api.jquery.com/next)查看下一件事是否是一个相关的跨度（但请参阅下面的注释），当然[`remove()`](http://api.jquery.com/remove)要删除一个元素。

选择`li`s 时，*可以*使用 jQuery 添加的特殊[`:contains("text")`选择器](http://api.jquery.com/contains-selector/)，但请注意，如果这样做，则意味着 jQuery 无法使用浏览器内置的工具来查找元素，因此可能会影响性能。

* * *

请注意，您的 HTML 无效。[`ul`元素](http://www.w3.org/TR/html5/the-ul-element.html#the-ul-element) **不能**有`span`子元素；元素的唯一有效直接子`ul`元素是[`li`元素](http://www.w3.org/TR/html5/the-li-element.html#the-li-element)`spans`（如果您愿意，可以在其中包含）。当您发送这样的无效标记时，浏览器会做什么将取决于浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:22:43.700

试试这个：

```
$('#breadcrumbs li:contains("Publications")')  
     /* find li node containing Publications */
  .next('span').remove().end()                
     /* search next span and remove it */
  .remove();                                   
     /* end() reset last selection (made with next()), so last remove() is removing the li */ 
```

小提琴示例：http: [//jsfiddle.net/MZysf/](http://jsfiddle.net/MZysf/)

# php - php中的输入验证

> ID：10331505
> 
> 赞同：0
> 
> 时间：2012-04-26T10:20:23.207
> 
> 标签：php, validation

```
public function registration()
    {
    $this->load->library('form_validation');
    // field name, error message, validation rules
    $this->form_validation->set_rules('user_name', 'User Name', 'trim|required|min_length[4]|xss_clean');
    $this->form_validation->set_rules('email_address', 'Your Email', 'trim|required|valid_email');`enter code here`
    $this->form_validation->set_rules('password', 'Password', 'trim|required|min_length[4]|max_length[32]');
    $this->form_validation->set_rules('con_password', 'Password Confirmation', 'trim|required|matches[password]');
        } 
```

我已经在执行验证的 codeigniter 中做到了这一点。我如何在 php native 中做类似的工作？我的意思是验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:32:21.353

您可以通过 php 变量访问发布的表单值[`$_POST`](http://www.w3schools.com/php/php_post.asp)。然后，您需要在 php 中编写执行不同验证的函数：-

*   必需：这很简单，只需检查该值是否为空字符串
*   trim：[php 中有一个内置函数可以执行此操作](http://php.net/manual/en/function.trim.php)
*   有效的电子邮件：您需要为此使用[正则表达式](http://www.regular-expressions.info/email.html)

这些应该让你开始，其余[的看看 codeigniter 是如何做](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Form_validation.php)的，或者[一篇关于使用 php 进行服务器端验证](http://www.9lessons.info/2009/07/server-side-form-validation-regular.html)的文章。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:03:41.917

我过去的做法是为它构建对象……一个表单对象、一个表单字段对象和一个表单字段验证器对象。

因此，您将创建所有字段对象，并在需要时将验证器附加到它们，然后将全部附加到表单 - 所以您最终会得到如下内容：

```
$oFieldUsername = new FormField('username', new Validator(Validator::TYPE_EMAIL));
$oFieldPassword = new FormField('password', new Validator(Validator::TYPE_PASSWORD));

$oForm = new Form(Form::METHOD_POST, '/path/to/action.php');
$oForm->attachField($oFieldUsername);
$oForm->attachField($oFieldPassword);

//form has not been posted
if(!$oForm->isReceived()) {
  $oForm->render('/path/to/view.tpl.php');
}

//the form HAS been posted but IS NOT VALID
elseif(!$oForm->isValid()) {
  $oForm->render('/path/to/view.tpl.php');
}

//the form HAS been posted and the data LOOKS valid
else {
  //do processing and hand-off
} 
```

验证器处理诸如确定是否需要字段数据，如果数据与空字符串 (RegExp) 匹配，则例如不需要。

但他们也可以处理电子邮件验证（有或没有 getmxrr() 查找）或其他任何事情，您只需为特定情况构建验证器类型......或者您有通用验证器：

```
new Validator(Validator::TYPE_EMAIL); //basic email validator
new Validator(Validator::TYPE_EMAIL_WITH_MX); //email validator with getmxrr()
new Validator(Validator::TYPE_REGEXP, '/^[\w]+$/'); //generic regular expression with the pattern to match as the second parameter
new Validator(Validator::TYPE_INT_MIN, 10); //integer with a minimum value of 10
new Validator(Validator::TYPE_REGEXP, '/^[\w\s]*$/', true); //the third parameter could be an override so that the validation is optional - if the field has a value it MUST validate, if it doesn't have a value, it's fine 
```

这为您提供了所需的验证灵活性。该`Form::isValid()`方法所做的只是遍历所有附加字段，检查它们是否有验证器，如果有，该`Validator::isValid()`方法是否返回 true。

您还可以使用以下内容将多个验证器附加到字段：

```
//the field value must be an integer between 5 and 10 (inclusive)
$oField->addValidator(new Validator(Validator::TYPE_INT_MIN, 5));
$oField->addValidator(new Validator(Validator::TYPE_INT_MAX, 10)); 
```

……反正我就是这么干的。

# objective-c - 使用 __block 和 self

> ID：10331508
> 
> 赞同：2
> 
> 时间：2012-04-26T10:20:50.170
> 
> 标签：objective-c, ios, block

我知道有几种方法可以做到这一点。但我想检查我所做的方式是否会导致泄漏。

我的项目中有一个块（使用 ARC），为了防止保留周期，我做了以下操作

```
 id __block blockSelf = self; 
```

然后在块内用blockSelf替换self。这是一个好的编码习惯吗

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:29:55.013

您的代码仍将在块内保留一个 self 对象 - 我执行以下操作：

```
__weak SomeObject *weakSelf = self; 
```

也看到[这个答案](https://stackoverflow.com/questions/8577154/how-can-a-weakly-retained-block-cause-a-retain-cycle-when-capturing-self)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T09:30:12.157

对于 MRC，

```
__block id blockSelf = self; 
```

不会保留“自我”。

但是，对于 ARC，它不起作用。你必须使用：

```
__weak id weakSelf = self; 
```

# php - php 全局函数或过程

> ID：10331509
> 
> 赞同：-1
> 
> 时间：2012-04-26T10:20:53.113
> 
> 标签：php, function, procedures

我有一些 php 代码可以用来检查传入的 url，我有数百个 php 页面，我必须在其中检查传入的 url，我想让该代码像一个可以在所有 php 页面中调用的过程或函数。所以我可以很容易地将我的代码效果应用到所有页面。这是我的 php 代码

```
<?php
ob_start();
$domain = array("http://a.sml.com.pk/default.aspx","http://a.sml.com.pk/");
if(!in_array($_SERVER['HTTP_REFERER'],$domain))
{
$URL1="http://a.sml.com.pk"; 
header ("Location: $URL1");

}
else{

set_time_limit(500);
$url = 'http://appsrv01.shakarganj.com.pk:7778/reports/rwservlet?reptestsfpl&report=sales_milk';
$pdf = 'milksales.pdf';
$pdfbak = 'bak/'.$pdf;

if (filesize($pdf) > 10000)
{
copy($pdf,$pdfbak);
}

if ((int)time() > filemtime($pdf) + 30) 
{
file_put_contents($pdf, file_get_contents($url));
}
header('Pragma: public');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Content-Type: application/pdf');

if (filesize($pdf) > 10000)
{
readfile($pdf);
}
else
{
readfile($pdfbak);
}
}
?> 
```

现在我想为此代码制作程序，该程序应该应用于我的所有文件

```
ob_start();
    $domain = array("http://a.sml.com.pk/default.aspx","http://a.sml.com.pk/");
    if(!in_array($_SERVER['HTTP_REFERER'],$domain))
    {
    $URL1="http://a.sml.com.pk"; 
    header ("Location: $URL1");

    }
    else{ 
```

请任何人帮助我将其他部分之前的代码转换为过程以及如何在所有文件重新调整其他部分中调用该过程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:38:52.693

您可以在一个 php 文件中编写以下代码，例如 domainCheker.php

```
<?php
    $domain = array("http://a.sml.com.pk/default.aspx","http://a.sml.com.pk/");
    if (!in_array($_SERVER['HTTP_REFERER'], $domain)) 
    {
        header ("Location: http://a.sml.com.pk");
        exit;
    }
?> 
```

现在，在开始时在所有页面中包含这个 php 文件，比如

```
<?php
    include 'PATH_CHECK_DOMAIN';//  give the above file path 
?> 
```

之后就可以开始编码了…………！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:25:01.343

```
function test_referer()
{
    static $domain = array("http://a.sml.com.pk/default.aspx","http://a.sml.com.pk/");
    if (!in_array($_SERVER['HTTP_REFERER'], $domain)) {
        header ("Location: http://a.sml.com.pk");
        exit;
    }
} 
```

在您的代码中，您会调用：

```
test_referer();
// domain verified, continue your code 
```

# mysql - 在 MySQL 中使用唯一索引更新行（学说 2）

> ID：10331512
> 
> 赞同：0
> 
> 时间：2012-04-26T10:21:01.073
> 
> 标签：mysql, doctrine-orm

我有一个记录列表，`position`其中包含一个`unique index`.

因此管理员可以通过在后端 ui 中移动行来更改行的位置。在 PHP 代码中，我收到一个带有行 ID 和新位置的 JSON。

所以这是一个可能的例子：

```
1 -> 4
2 -> 1
3 -> 3
4 -> 5
5 -> 2 
```

如何在不违反唯一约束的情况下使用 Doctrine 2 正确更新它？

# django - 从 Windows 7 客户端访问托管在 VM 中的 Django 应用程序的步骤

> ID：10331518
> 
> 赞同：0
> 
> 时间：2012-04-26T10:21:24.087
> 
> 标签：django, wxpython, sql-server-2008-r2, vmware, python-2.7

我们使用 DJango 1.3.1、Python 2.7.2 开发了一个应用程序，使用数据库作为 SQL server 2008。所有这些都托管在 VM 上的 Win 2008 R2 操作系统中。客户端将 Windows 7 作为操作系统。

我们在没有虚拟机的情况下开发了应用程序，突然客户回来说他们只能在虚拟机上托管应用程序。现在的挑战是从客户端访问应用程序到 VM 上的服务器。

如果有人做过此类应用程序，请请求他们共享步骤以访问 VM 上的应用程序。

因为我擅长独立系统，不了解 VM 可访问性。

我们已经完成了所有项目，等待有人尽快回复。

提前感谢您的指导。

问候，湿婆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:43:28.340

也许这可以帮助你一点，虽然我的设置略有不同。我正在通过 OS X 上的 VMware fusion 运行在 Windows7 上开发的 ASP.NET Web 应用程序。我从 VM 外部（Mac 浏览器或网络内的其他计算机/电话）访问 Web 应用程序。

以下是所需的设置：

*   网络适​​配器设置为（桥接），以便 VM 拥有自己的 IP 地址
*   将 VM 配置为具有静态 IP

此时，VM 正在充当自己的机器，因此您可以像访问网络上的另一台服务器一样访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:57:56.653

*应该影响您的应用程序的*VM 和传统机器之间没有区别。就您的代码而言，它不关心它是安装在普通机器上还是虚拟来宾上。

唯一的考虑因素（正如@Brett 所指出的）是网络。

如果目标是*只有*主机才能访问来宾，那么您需要设置一个“仅限主机”适配器。如果您的应用程序通过 VMWare Workstation（桌面产品）运行，请参阅vmware 的[此支持文档](http://www.vmware.com/support/ws55/doc/ws_net_advanced_ipaddress.html)。

如果应用程序要部署在 vmware 的基础架构产品（如 EXSi）上，那么过程会更简单。您只需在虚拟机本身中为网络适配器分配正确的 IP - 就好像没有虚拟化一样。

你已经用 wxpython 标记了你的问题。如果您需要远程桌面访问 - 您可以在您的来宾 (Windows Server) 上启用远程桌面，并通过 RDC 从 Windows 7 访问该应用程序。

# java - css 与 selenium 2.20+ 悬停

> ID：10331519
> 
> 赞同：4
> 
> 时间：2012-04-26T10:21:26.333
> 
> 标签：java, css, selenium, hover

我想使用 selenium 激活 css 中定义的 :hover 类。这显然不是新的，但以前线程的所有建议方法都不再起作用了。

认为我已经尝试过（不成功）

*   `Selenium`- 界面（使用`WebDriverBackedSelenium`）和`mouseOver`
*   `Actions`使用`moveToElement(..).build().perform()`
*   自`RenderedWebElement`2.20 以来已弃用，但我找不到`hover()` 它提供的方法的替代品。

这次有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:48:27.963

[试试 Mark Collin在这里](https://groups.google.com/forum/#!topic/selenium-users/oxmxWe-Roro)提到的这个解决方案。为我工作..

```
Locatable hoverItem = (Locatable) driver.findElement(By.xpath("//a[contains(text(),'Appliances')]"));
Mouse mouse = ((HasInputDevices) driver).getMouse();
mouse.mouseMove(hoverItem.getCoordinates()); 
```

# ruby-on-rails - 代码设计//函数包装器

> ID：10331520
> 
> 赞同：-2
> 
> 时间：2012-04-26T10:21:29.447
> 
> 标签：ruby-on-rails, ruby

我一直想知道如何在代码设计方面改进这部分代码：

（我对使用不同的默认属性调用相同的函数特别感兴趣——大量的代码重复）

```
def follow_pages(number_of_pages = 5, sleep_interval = 5)
  process_pages true, number_of_pages, sleep_interval
end

def unfollow_pages(number_of_pages = 5, sleep_interval = 5)
  process_pages false, number_of_pages, sleep_interval
end

def process_pages(follow = true, number_of_pages = 5, sleep_interval = 5)
  number_of_pages.times do |page|

    sleep rand(sleep_interval)

    if follow
      follow_all_pages
    else
      unfollow_all_pages
    end

  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:40:35.407

你可以这样做：

```
def follow_pages(*args)
  process_pages true, *args
end

def unfollow_pages(*args)
  process_pages false, *args
end

def process_pages(follow = true, number_of_pages = 5, sleep_interval = 5)
  ...
end 
```

您基本上接受任何参数，为`follow`参数添加值并将其传递给 main`proess_page`方法。我不确定它是否使代码更具可读性，但它绝对可以避免重复参数的默认值。

# django - django manytomany 自关系顺序按中间表 id

> ID：10331528
> 
> 赞同：5
> 
> 时间：2012-04-26T10:22:04.833
> 
> 标签：django

模型：

```
class Person(models.Model):
   friends= models.ManyToManyField("self", blank=True, null=True)

friends = person.friends.order_by('friends__id')[:5] 
```

我也试过

```
friends = Person.objects.filter(friends=obj).order_by('-friends__id')[:5] 
```

我需要得到按中间表 id (pk) 排序的朋友。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:53:37.320

直接使用中间表，不再是查询集。

```
friends = [pf.to_person for pf in 
    person.friends.through.objects.filter(from_person=person)
    .select_related('to_person')
    .order_by('pk')] 
```

或者您需要在订购部分编写原始 SQL。

```
person.friends.order_by(person.friends.through._meta.db_table+'.id') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:31:37.750

`friends = person.friends.order_by('pk')`

```
In [20]: [f.pk for f in p.friends.order_by('-pk')]
Out[20]: [3, 2]

In [21]: p.pk
Out[21]: 1

In [22]: [f.pk for f in p.friends.order_by('pk')]
Out[22]: [2, 3] 
```

# mysql - MySQL：更新具有串联结果的列

> ID：10331529
> 
> 赞同：0
> 
> 时间：2012-04-26T10:22:07.100
> 
> 标签：mysql, sql

我有一列包含一个字符串，并且由于错误，一些字符串值是错误的。所以我想通过获取原始字符串并将选择中的信息连接到它来修复字符串。理想情况下，它会是这样的：

```
UPDATE table as t
SET t.string = SELECT CONCAT(t.string, 
                             (SELECT fix FROM othertable where id=t.id )
                            ); 
```

但当然，我不能使用`concat`. 我不得不说我没有用任何其他方法走得很远。
有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:22:53.547

如果保证子查询只返回一个值，您可以简单地删除`SELECT`关键字 before `CONCAT`：

```
UPDATE table as t
SET t.string = CONCAT(t.string, 
                      (SELECT fix FROM othertable where id=t.id)
                     ); 
```

如果子查询可能返回多个值，则可以[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat "GROUP_CONCAT (MySQL)")像这样应用快速修复：

```
UPDATE table as t
SET t.string = CONCAT(t.string, 
                      (SELECT GROUP_CONCAT(fix) FROM othertable where id=t.id)
                     ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:28:37.753

试试下面的：

```
UPDATE
table as t

INNER JOIN 
othertable as o

ON
t.id = o.id

SET
t.string = CONCAT(t.string, o.fix) 
```

请注意，在 MySQL（如上）中，它与不使用关键字 FROM 的 MSSQL 有点不同。

# javascript - Titanium - 通过 iOs Simulator 进行 IOS 调试

> ID：10331535
> 
> 赞同：2
> 
> 时间：2012-04-26T10:22:23.027
> 
> 标签：javascript, ios, debugging, titanium, ios-simulator

有没有比我目前正在做的更好的方法来使用 Titanium 进行调试？我总是在 iOs 模拟器中运行我的项目。问题是对于我所做的每一个小调整，我都必须关闭 iOs iPhone 模拟器并再次调试。

有没有更快的调试方法？当我总是必须关闭并重新启动模拟器时，开发应用程序需要花费大量时间。

你们在做什么来测试 iOs？

（加载 Android 模拟器也需要很长时间来测试）。

此致，

Duikboot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:02:13.373

如果您想在 Titanium 中进行正确调试，Titanium Studio 现在提供 iOS 和 Android 调试。您可以在此处查看有关如何操作的视频指南：[https ://vimeo.com/21949107](https://vimeo.com/21949107)

至于“调试”，如进行细微更改并重新启动模拟器。您需要将您在 Titanium 中编写的所有内容重新编译为 C，这就是您需要重新启动模拟器的原因。

对于风格变化，我建议查看[http://www.kraniumjs.com](http://www.kraniumjs.com) - 因为他们设置了一个很棒的框架，可以插入风格变化。非常适合 UI 调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:13:09.967

不确定如何加载 iOS 模拟器，但它应该非常快。千万不要建立你的钛项目，在 xCode 中加载整个东西，然后从那里运行模拟器。

对于 iOS 和 Android，在 Titanium Studio 的模拟器上运行。通常（至少在我的机器上）这大约需要 10-20 秒。Android 有时会慢一些。

iOS 模拟器会在重新部署到模拟器时自动关闭。最好是使用 Titanium Studio 2.0。（最新的）

Android 模拟器不会关闭，而是关闭应用程序，然后在模拟器上重新安装。

如上所述，这是一个快速的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T18:34:32.927

我找到了一种无需关闭模拟器即可在模拟器中重新启动 iOS Titanium 应用程序的方法。

由于在模拟器中运行的应用程序实际上是对您的原始 .js 文件进行符号链接，因此您通常可以使用 ios-sim 使用更新的源代码重新启动您的应用程序。

使用 ios-sim 的命令行有点麻烦，所以我创建了一个工具来自动化该过程

[http://tech.frontseat.org/2013/08/titanium-refresh-make-code-changes-without-rebooting-the-simulator/](http://tech.frontseat.org/2013/08/titanium-refresh-make-code-changes-without-rebooting-the-simulator/)

# forms - 请问如何从表格中生成句子？

> ID：10331560
> 
> 赞同：0
> 
> 时间：2012-04-26T10:23:39.710
> 
> 标签：forms, sentence

用户填写表格。使用表单中的文本，程序会自动生成句子。

例如：

> `[enter name]`, 一`[student/professor]`,在他的研究中`[enter name of university]`获得了奖项; 该奖项是在in颁发的。来自世界各地的著名科学家出席了会议。`[enter award]``[name of topic]``[name of conference]``[name of country]`

生成的文本将变为：

> ****马来西亚国家石油大学**学生**Muhammad Afiq在****石油管道路线**研究方面获得卓越奖；该奖项是在**马来西亚****绿色技术会议上**颁发的。来自世界各地的著名科学家出席了会议。**

 ****你知道我可以使用哪种技术或语言来学习如何做到这一点吗？我是一名记者。所以我正在寻找一种方法来设计一个简单的程序，让我能够在我不想写的时候填写表格。

我知道一些 Python，但我无法使用它来创建这个程序。到目前为止，我所有的搜索（包括在这个网站上）都返回了 NLP 和 AI 的结果——这不是我想要的。也许我使用了错误的搜索词？

请您指点我一个可以学习如何做到这一点的地方，或者在某个地方有一个模块吗？

谢谢。

编辑：

我用 Python 试过这个：

```
full_name =input("enter name")
occupation =input("enter occupation")
name_of_university =input("enter name of university")
award= input("enter award received")
topic=input("enter topic")
conference =input("enter name of conference")
country =input("enter name of country")
display_concatenation =   full_name+occupation+name_of_university+award+topic+conference+country
print (display_concatenation) 
```

它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:15:09.897

If I understand your idea, shouldn't it be like this?

```
name = raw_input("Your name")
student_proff = raw_input("Student/proffessor")
s = "[enter name], a [student/professor] of [enter name of university], received the award of [enter award] in his research on [name of topic]; the award was given at the [name of conference] in [name of country]. The conference was attended by eminent scientists from all over the world."
print s
s = s.replace("[enter name]", name).replace("[student/professor]", student_proff)
print s 
```

**UPDATED:** Added working example :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:28:03.367

我相信几乎所有语言都支持字符串。因此，假设名称位于“fullName”字段中，您将开始构建字符串

```
string sentence = fullName.Value() + ", a " + .. 
```

[http://www.w3schools.com/](http://www.w3schools.com/)是一个不错的网站，您可以从这里开始。Java、.NET、Python、Ruby 都会这样做，这只是个人选择****

# iphone - UInavigatioController 自定义动画显示白色背景iphone

> ID：10331561
> 
> 赞同：0
> 
> 时间：2012-04-26T10:23:41.140
> 
> 标签：iphone, uinavigationcontroller, core-animation

我想在 uinavigation 控制器中实现自定义动画。我已经做到了

```
 CATransition* transition = [CATransition animation];
    transition.duration = 0.20f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    transition.type = kCATransitionMoveIn;
    transition.subtype = kCATransitionFromTop;
    [self.navigationController.view.layer addAnimation:transition
                                                forKey:kCATransition];
    [self.navigationController pushViewController:viewController animated:NO]; 
```

但是当视图控制器弹出时它显示一个白色的背景。我怎样才能删除它由于一些问题我现在不能使用presentmodelviewcontroller

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:40:46.783

我不是告诉你这样做。但是你也可以尝试这种方式。,.,

```
view2 *vw2=[[view2 alloc]initWithNibName:@"view2" bundle:nil];
[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:0.80];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight 
                       forView:self.navigationController.view cache:NO];
[self.navigationController pushViewController:vw2 animated:NO];

//    [self.navigationController pushViewController:aboutShowViewController animated:YES];
[UIView commitAnimations]; 
```

或者

```
CATransition *transition = [CATransition animation];
transition.duration = 1.0f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade;

[self.navigationController.view.layer addAnimation:transition forKey:nil];
[self.navigationController pushViewController:vw2 animated:NO]; 
```

它可能会帮助你一点.,.

我在学习。，。，。

# c++ - C++：我应该使用“typedef”还是“使用命名空间”？

> ID：10331562
> 
> 赞同：40
> 
> 时间：2012-04-26T10:23:47.303
> 
> 标签：c++, namespaces, using-directives

我正在编写一个包含多个依赖模块的库。当我包含来自不同模块的文件时，我应该使用以下方式解析名称空间：

```
using namespace project1::namespace1;
class1 obj; 
```

或者

```
typedef project1::namespace1::class1 class1;
class1 obj; 
```

每种方法的优缺点是什么？我在某个地方读到了我们应该`typedef`在 .H 文件和`using`.C 文件中使用的地方，这是可取的吗？

我在使用“typedef”时遇到的一个问题是，如果我在第三个模块中同时包含原始类和带有“typedef”的类，则会导致命名空间模糊。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-26T10:29:48.897

您说的两个选项不等效。这个：

```
using namespace project1::namespace1; 
```

从名称空间中提取*所有内容*，使您几乎无法控制并可能发生冲突。我在这里只看到缺点，没有优点。

但是您不需要使用 a`typedef`来引入单个符号，您可以使用

```
using project1::namespace1::class1; 
```

无论您使用它还是使用它`typedef`都没有太大的区别。但请记住，这`typedef`仅限于类型和枚举，而`using`可以引用值、函数等：

```
namespace X {
  const int x{42};
  enum Fruit{Apple, Pear};
}

using X::x; // OK
typedef X::x xx; // Error! 'x' in namespace 'X' does not name a type 
```

所以这两个表达式并不完全等价。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T10:40:01.800

永远不要**为了使名称更易于键入而**在头文件中使用`using`or 。`typedef`

 **在源文件中，由您决定。写出整个名称似乎被认为是一种很好的做法，因为它可以非常清楚地说明您的意思。如果你的命名空间太长，你可以使用命名空间别名来减少混乱，但仍然保持含义清晰：`namespace ns = project1::namespace1;`

无论哪种方式，如果您要将符号导入全局命名空间，请使用`using`，而不是`typedef`. `typedef`主要用于当您想用不同的名称调用类型时，很多时候因为它是一个模板 - 例如，`my_map`而不是`std::map<std::string, my_type>`，它仍然很清楚，但打字更好。

另外，请参阅这个问题：[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-26T10:28:31.840

最明确的方法是不使用任何这些方法 - 只需编写`new project1::namespace1::class1()`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T10:37:13.303

采用 `using project1::namespace1::class1`

或者，您可以将使用名称空间限制在本地范围内，既方便又不污染全局名称空间。

```
void function()
{
    using namespace project1::namespace1;

    class1 obj;

    ...
} 
```**

# c# - WPF复合/串联字段

> ID：10331565
> 
> 赞同：0
> 
> 时间：2012-04-26T10:23:57.457
> 
> 标签：c#, wpf

我正在使用 MVVM 并且在我的数据库中有一个字段是一个字符串并表示一个坐标。在屏幕上，我想将其分解为坐标部分，以便于用户进行编辑。到目前为止，我有一堂课可以帮助：

```
public class Coord
{
    public int LatDegree {get;set;}
    public int LatMinute {get;set;}
    public int LatSecond {get;set;}
    public char Latitude {get;set;}
    public int LonDegree {get;set;}
    public int LonMinute {get;set;}
    public int LonSecond {get;set;}
    public char Longitude {get;set;}

    public Coord(string coord)
    {
            string[] coordAsString =coord.Split(' ');
            this.LatDegree=Int32.Parse(coordAsString[0]);
            this.LatMinute=Int32.Parse(coordAsString[1]);
            this.LatSecond=Int32.Parse(coordAsString[2]);
          this.Latitude = (coordAsString[3].ToCharArray())[0];
            this.LonDegree = Int32.Parse(coordAsString[4]);
            this.LonMinute = Int32.Parse(coordAsString[5]);
          this.LonSecond = Int32.Parse(coordAsString[6]);
          this.Longitude = (coordAsString[7].ToCharArray())[0];
    }

    public override string ToString()
    {
        string asString = String.Format(...//omitted for brevity
        return asString;
    }
} 
```

在我的视图模型中

```
 private Coord relativeGridOrigin;
    private Coord RelativeGridOrigin
    {
        get 
        {
            if(relativeGridOrigin==null)
            {
                relativeGridOrigin = new Coord(myMainObject.relativeGridOrigin);
            }
            return relativeGridOrigin;
        }
        set
        {
            relativeGridOrigin = value;
            myMainObject.relativeGridOrigin = relativeGridOrigin.ToString();
        }
    } 
```

我目前将纬度度控制绑定到：

```
 public int LatitudeDegree
    {
        get { return RelativeGridOrigin.LatDegree; }
        set
        {
            RelativeGridOrigin.LatDegree = value;
            myMainObject.relativeGridOrigin = relativeGridOrigin.ToString();
        }
    } 
```

但我不想要那个 LatitudeDegree 包装器（以及我需要的其他 7 个） - 我只想将控件绑定到我的 Coord 对象中的 LatDegree，但我需要 myMainObject.relativeGridOrigin 随时更改这 8 个值之一更改_我想我希望调用RelativeGridOrigin 设置器。我想我要么需要将 RelativeGridOrigin 设置器传递给 Coord 类，要么让我的视图模型监听 Co​​ord 类的属性更改，但我不知道该怎么做，或者是否有另一种更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:27:38.857

[按照这个对我的MVVM 模式和依赖子](https://stackoverflow.com/questions/10350746/wpf-mvvm-pattern-and-dependent-children)项的另一个问题的回答之后， 我意识到只要任何 Coord 设置器更改值并且 VM 可以监听它并更新主对象时只引发一个事件就更简洁了

# vb.net - 如何检查数据表是空还是空

> ID：10331568
> 
> 赞同：14
> 
> 时间：2012-04-26T10:24:01.007
> 
> 标签：vb.net, datatable, nullreferenceexception

如何检查 a`DataTable`是否从未设置，这意味着它将是`Null`or `Nothing`？我不是说空的`DataTable`。

例如：

```
Dim dt As DataTable = TryCast(Session("dt"), DataTable)

If dt.Rows.Count <> 0 Then
    'Do something !
End If 
```

如果`Session("dt")`从未设置或由于某种原因丢失在内存中，`dt.Rows.Count <> 0`将抛出此异常：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-26T10:25:41.933

首选：

```
If dt Is Nothing Then ... 
```

*   [`Is`-操作员](http://msdn.microsoft.com/en-us/library/kb136x1y.aspx)
*   [`Nothing`](http://msdn.microsoft.com/en-us/library/0x9tb07z%28v=vs.100%29.aspx)

或（类似VB6）

```
If IsNothing(dt) Then ... 
```

[IsNothing 函数](http://msdn.microsoft.com/en-us/library/5adx7fxz%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T17:15:33.223

dt2 = 数据表 如果 dt2.Rows.Count > 0

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-24T08:37:51.587

如果值数据类型是 varbinary(MAX)，则使用

```
if dt.rows(0).item(2) Is DBNull.Value then... 
```

# ruby-on-rails - 未定义的方法获取 false:FalseClass

> ID：10331569
> 
> 赞同：9
> 
> 时间：2012-04-26T10:24:19.343
> 
> 标签：ruby-on-rails, gem

我创建了一个简单的 rails 应用程序，当我运行 rails 时。它发出这一堆错误：-s 我试图重新安装 activerecord，但它无法解决问题。此外，我尝试使用 rvm 删除所有 gemset 并重新安装，但它仍然是一样的。

```
/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:33:in `resolve_string_connection': undefined method `fetch' for false:FalseClass (NoMethodError)
from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:23:in `spec'
from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:127:in `establish_connection'
from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/railtie.rb:76:in `block (2 levels) in <class:Railtie>'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:25:in `each'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /home/vic4ever/crowdvn/crowd.vn/config/environment.rb:5:in `<top (required)>'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /home/vic4ever/crowdvn/crowd.vn/config.ru:4:in `block in <main>'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
from /home/vic4ever/crowdvn/crowd.vn/config.ru:1:in `new'
from /home/vic4ever/crowdvn/crowd.vn/config.ru:1:in `<main>'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T03:30:35.933

您需要一个数据库适配器（即`config/database.yml`）。

我将假设您使用 Git 进行源代码控制以确保您自己的安全。当您按照以下说明操作时，它还可以帮助您查看所做的更改。

生成一个新的`database.yml`：

```
$ cd ~/path/to/my-existing-rails-app
$ rails new my-existing-rails-app --database=sqlite 
```

一系列提示将询问您是否要创建/覆盖现有文件。继续对提示回答“否”，直到您看到一个要求创建`config/database.yml`. 如果您看到提示，请回答“是”，然后继续回答“否”。

如果您已经在本地/开发环境中安装了这些`--database=sqlite`，您也可以使用`--database=postgresql`或代替。`--database=mysql`

更进一步，还有更多选择`--database=DATABASE`

```
mysql
oracle
postgresql
sqlite3
frontbase
ibm_db
sqlserver
jdbcmysql
jdbcsqlite3
jdbcpostgresql
jdbc 
```

# progress-4gl - 进度 4gl - .ped 文件

> ID：10331571
> 
> 赞同：1
> 
> 时间：2012-04-26T10:24:36.787
> 
> 标签：progress-4gl, openedge

每当我尝试***“THIS-PROCEDURE:FILE-NAME”***来显示我正在使用的当前 .p 文件时，我总是得到一个***.ped 文件***。我想知道什么是 .ped 文件以及显示文件名的方法，即我的程序中 .p 文件的名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T10:57:17.300

当您直接从过程编辑器运行程序时，它甚至可能是程序的未保存版本，Progress 会创建一个包含编辑器内容的临时文件 (.ped)，以便能够编译和运行您的程序。如果您想接收正确的文件名，只需运行过程 using`RUN prog.p`而不是直接从过程编辑器运行它。

# javascript - 休息 api 会话

> ID：10331572
> 
> 赞同：2
> 
> 时间：2012-04-26T10:24:49.243
> 
> 标签：javascript, html, session, scala, rest

我正在构建一个带有后端和前端的 Web 应用程序，后端构建在 scala 中，前端构建在 html、css、jquery（backbone.js、jquery.js、underscore.js）中。

如何创建登录？所以基本上你可以将前端视为一个应用程序，我们只向其余后端发出 json 请求。

感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T10:38:34.363

Scala 与否，JSON 与否，XHR 与否，机制仍然相同。您将登录名和密码发送到服务器（在客户端对密码进行盐哈希处理以使其更安全），服务器对其进行身份验证（检查登录名和密码是否与数据库中的匹配），然后为用户创建一个会话（在数据库或内存中 - 取决于您的需要）并将会话 ID 作为 cookie 发送给用户（AJAX 请求/响应应该与 cookie 一起正常工作）。

现在，在每个请求中，您检查会话 cookie 并验证它是否指向有效用户（即，它是否指向任何东西）。注销就像删除具有给定 ID 的会话条目一样简单。ID 应该以这样的方式创建：首先：它很长（以最大程度地减少会话劫持的威胁），其次：它包含编码的日期（以便您可以清除过期的会话）。

这就是所谓[的基于表单的身份验证](http://en.wikipedia.org/wiki/Form-based_authentication)。

**// 编辑**

让我回答评论中的问题。会话如何工作？

服务器创建会话。Session 只是 DB 中的表，有 2 列：ID 和 Value（在这里，您将保存以 JSON 编码的会话数据，并在必要时进行压缩，例如您想从 eShop 购买的东西）。当客户端成功通过身份验证时，服务器通过 cookie 将会话 ID 发送给用户。因此服务器必须在响应中添加以下标头：

```
Set-Cookie: session=ID32445235423tdwfnmm; Expires=Wed, 09 Jun 2012 10:18:14 GMT 
```

现在浏览器理解了这个标头并为客户端设置了 cookie。从这一点开始，每当您发出请求时，浏览器都会自动将 cookie 添加到请求中，因此从现在开始的每个请求都将具有以下标头

```
Cookie: session=ID32445235423tdwfnmm; other_cookie:other_value; 
```

除非日期在 之后`Wed, 09 Jun 2012 10:18:14 GMT`。如果是这种情况，那么我们的会话 cookie 将被省略（请注意，这与在服务器端销毁会话不同，您必须手动处理）。

现在您必须`Cookie`在服务器端解码标头并检索 ID。在这一点上使用一些框架是一个好主意，因为在每个请求中编写解码代码是一种不好的做法。您应该在这里使用所谓的中间件。现在这个中间件检索 ID，检查数据库中的会话并将结果（即用户是否通过身份验证）存储在请求对象中以供稍后使用（即在最终请求处理程序中）。

如您所见，您根本不使用 JavaScript。

**此外，您仅**在登录请求上设置 cookie （尽管您可以在每个请求上设置它以减少会话劫持问题 - 但这更加复杂）。存储 ID 是浏览器的工作。在服务器端，您只检查`Cookie`标头是否包含`session`密钥。

# ios - NSPlaceholderString initWithFormat:locale:arguments: Xcode 仪器泄漏

> ID：10331579
> 
> 赞同：0
> 
> 时间：2012-04-26T10:25:32.423
> 
> 标签：ios, json, memory-leaks, nsstring, nsdictionary

以下功能；“ProcessArrayForscrollView”读取发送url接收到的JSON数据；"urlProcess" 并将获取的数据值以 NSString 格式存储在 NSMutableArrays 中。

```
#import "SBJson.h"
#import "SBJsonStreamParser.h"

@implementation AllShowsViewController

NSURL *url = nil;
NSString * arrayDataString;
NSData *dataAllShowsView;
NSError *errorAllShowsView;
NSString *data_stringAllShowsView;
SBJsonParser *parserAllShowsView;
NSArray *data_arrayAllShowsView;
NSDictionary *itemNSDictAllShowsView;
NSMutableArray  *thumbnailImageURLAllShows;
NSMutableArray  *thumbnailShowCountAllShows;

-(void)ProcessArrayForscrollView{
    thumbnailImageURLAllShows = [[NSMutableArray alloc] init];
    thumbnailShowCountAllShows = [[NSMutableArray alloc] init];
    dataAllShowsView = [[[NSData alloc] initWithContentsOfURL:urlProcess] autorelease];
    errorAllShowsView = nil;
    data_stringAllShowsView = [[[NSString alloc] initWithData:dataAllShowsView encoding:NSUTF8StringEncoding]autorelease];
    parserAllShowsView = [[[SBJsonParser alloc] init] autorelease];
    data_arrayAllShowsView = [[[NSArray alloc] initWithArray:[parserAllShowsView objectWithString:data_stringAllShowsView error:&errorAllShowsView]] autorelease];
    for(itemNSDictAllShowsView in data_arrayAllShowsView){
         arrayDataString = [NSString stringWithFormat:@"%@",[itemNSDictAllShowsView objectForKey:@"thumbnail_small"]];    //memory leak notification here
        [thumbnailImageURLAllShows addObject: arrayDataString];  
        arrayDataString = nil;

        arrayDataString = [NSString stringWithFormat:@"%@",[itemNSDictAllShowsView objectForKey:@"showcount"]];    //memory leak notification here
        [thumbnailShowCountAllShows addObject: arrayDataString];
        arrayDataString = nil;
    }
}

-(void)dealloc{
    [super dealloc];
}

- (void)viewDidUnload{
    if(thumbnailImageURLAllShows != nil){
        [thumbnailImageURLAllShows release];
        thumbnailImageURLAllShows = nil;
    }
    if(thumbnailShowCountAllShows != nil){
        [thumbnailShowCountAllShows release];
        thumbnailShowCountAllShows = nil;
    }
    [super viewDidUnload];
}
@end 
```

我运行代码以使用 Xcode 工具检查内存泄漏，并在两行出现泄漏。从上面的 viewController 切换后会通知此泄漏；“AllShowsViewController”到任何其他 viewController（有一个 nib 文件）。关于如何消除泄漏的任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:55:31.960

尝试为您的 NSMutableArrays 实现您的 setter/getter，例如：

```
if (!thumbnailImageURLAllShows) {
        thumbnailImageURLAllShows = [[NSMutableArray alloc] init];
} 
```

并且还插入一个异常断点来知道你的代码到底在哪里崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:50:08.757

我认为`viewDidUnload`不能保证被调用。字符串未正确释放，因为容器 ( `NSMutableArray`s) 未正确释放。我建议尝试将清理代码移入`thumbnailImageURLAllShows`或`thumbnailShowCountAllShows`移入`viewDidDisappear`或`dealloc`查看是否会有内存泄漏。

# javascript - 如何在 Ant Mail Task 的帮助下在 HTML Body 部分以纯文本形式发送邮件

> ID：10331582
> 
> 赞同：0
> 
> 时间：2012-04-26T10:25:46.703
> 
> 标签：javascript, html, ant

我正在通过 Ant 邮件任务发送构建状态的电子邮件。

```
<target name="htmllink">
<exec executable="svn" outputproperty="**svnlog**">
      <arg line="log -r ${bottom_rev}:${top_rev} -v svn://172.16.143.200/Repository/branches/${project.svn.url}/${build_tech} --username ${svn.username} --password ${svn.username}" />
</exec> 
<mail from="AutoDeploy@amphorainc.com"
              messagemimetype="text/html"
              tolist="pkumar@amphorainc.com"
              cclist="pkumar@amphorainc.com"
              bcclist="pkumar@amphorainc.com"
              subject="BUILD SCRIPT AUTOMATED MAIL FOR ${patch.name}"
              mailhost="172.16.143.41"
              charset="ISO-8859-1">  <!-- local SMTP mailhost IP -->
<message src="OC.html" />
</mail>
</target>`
here i am using OC.html message source page for mailing contents like below
`<html>
<head>
<STYLE TYPE="text/css">
td{font-family: Calibri; font-size: 12pt;}
.color {color:black;font-size:10pt;display : block;line-height:16px; text-align : center;background-color:#D4AEBB; border:outset 3px #DB7093;text-decoration:none;width:50%;}  
.color:HOVER {color:red;font-size:10pt;display : block; line-height:16px;text-align : center;background-color : #F0DEE5; border :inset 3px #CC3366;text-decoration:none;width:50%;}
</STYLE>
</head>
<body onload="wrapLines(30, ${svnlog})">
<a class="color" href="http://172.16.170.113/dashboard/Patch_details.aspx?patch_name=${patch.name}&branch_name=${project.svn.url}" rel="Does not exist">BDT Report</a></br>
BR#${BR.number}</br>
The build is completed and available at FTP site.</br>
</br>
Objective-C patch</br>
*******************************************************************************</br>
Patch Name      :  ${patch.name}</br>
Revision Number :  ${bottom_rev} to ${top_rev}</br>
FTP Location    :  ${ftp.location}/${patch.name}.tar.gz</br>
*******************************************************************************</br>
SVN Log Info</br>
************</br>
**${svnlog}**</br></br>
</body>
</html> 
```

在正文部分，我打印了 ant 变量 ${svnlog}，它是一堆代码签入描述行。因此，这里将所有行打印在一个长行中，而不是单独一行。

我怎样才能在单独的行中得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:00:34.110

```
<body onload="wrapLines(30, ${svnlog})">
<pre>
<a class="color" href="http://172.16.170.113/dashboard/Patch_details.aspx?patch_name=${patch.name}&branch_name=${project.svn.url}" rel="Does not exist">BDT Report</a></br>
BR#${BR.number}</br>
The build is completed and available at FTP site.</br>
</br>
Objective-C patch</br>
*******************************************************************************</br>
Patch Name      :  ${patch.name}</br>
Revision Number :  ${bottom_rev} to ${top_rev}</br>
FTP Location    :  ${ftp.location}/${patch.name}.tar.gz</br>
*******************************************************************************</br>
SVN Log Info</br>
************</br>
**${svnlog}**</br></br>
</body>
</pre> 
```

# android - android中GridView中的水平滚动

> ID：10331583
> 
> 赞同：5
> 
> 时间：2012-04-26T10:25:58.047
> 
> 标签：android, gridview, horizontalscrollview

我想在一列中以水平滚动的方式在网格视图中显示图像缩略图。我玩过很多参数，但我不知道我做错了什么。请有人帮助我。主.xml：

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <GridView
        android:layout_width="500dp"
        android:layout_height="400dp"
        android:id="@+id/grid"
        android:columnWidth="300dp"
        android:padding="5dp"
        android:horizontalSpacing="10dp"
        android:verticalSpacing="10dp"
        android:scrollbars="horizontal"
        android:stretchMode="spacingWidthUniform">
    </GridView>
</LinearLayout> 
```

活动代码：

```
//---the images to display---
Integer[] imageIDs = {
        R.drawable.library,
        R.drawable.library,
        R.drawable.library,
        R.drawable.library,
        R.drawable.library,
        R.drawable.library,
        R.drawable.library                   
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridView = (GridView) findViewById(R.id.grid);
    gridView.setAdapter(new ImageAdapter(this));
    gridView.setNumColumns(imageIDs.length);

}

public class ImageAdapter extends BaseAdapter
{
    private Context context;

    public ImageAdapter(Context c)
    {
        context = c;
    }

    public int getCount() {
        return imageIDs.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(context);
            imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(imageIDs[position]);
        return imageView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:00:44.837

主要的.xml

```
<HorizontalScrollView 
   android:id="@+id/horizontalScrollView1" 
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content"
   android:fillViewport="true"
   android:scrollbars="horizontal" >

<GridView
    android:layout_width="500dp"
    android:layout_height="400dp"
    android:id="@+id/grid"
    android:columnWidth="300dp"
    android:padding="5dp"
    android:horizontalSpacing="100dp"
    android:verticalSpacing="10dp"
    android:scrollbars="horizontal"
    android:stretchMode="spacingWidthUniform">
</GridView>
</HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T06:11:39.853

如果您没有很多图像要显示，您可以尝试以下操作：

```
public class MyHorizontalView extends HorizontalScrollView {
    private LinearLayout internalWrapper;

    public StampsCustomView(Context context) {
        super(context, null);

    }

    public StampsCustomView(Context context, AttributeSet attr) {
        super(context, attr);

        setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT));
        setFadingEdgeLength(0);
        this.setHorizontalScrollBarEnabled(false);
        this.setVerticalScrollBarEnabled(false);

        internalWrapper = new LinearLayout(context);
        internalWrapper.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        internalWrapper.setOrientation(LinearLayout.HORIZONTAL);
        addView(internalWrapper);

    }

    public void addImages(int[] images) {
        internalWrapper.removeAllViews();
        for (int i = 0; i < images.length; i++) {
            ImageView iv = new ImageView(getContext());
            iv.setImageResource(images[i]);
            internalWrapper.addView(iv);
        }

    }
} 
```

在这里，我有一个扩展 Horizo​​ntalScrollView 的视图，并向它添加了一个 linearLayout。

有一个名为的函数`addImages`将图像的资源 ID 作为输入来显示它们。您可以修改它以添加任何视图或图像 `internalWrapper`。

您可以将此视图用作：

```
<com.example.android.MyHorizontalView
            android:id="@+id/h_view"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dp"
            android:orientation="horizontal" >
        </com.example.android.MyHorizontalView> 
```

并且在活动中

```
MyHorizontalView hView=(MyHorizontalView)findViewById(R.id.h_view);
hView.addImages(<-resource ids->); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:39:43.517

检查这个，...

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
 <HorizontalScrollView 
       android:id="@+id/horizontalScrollView1" 
       android:layout_width="fill_parent" 
       android:layout_height="wrap_content"
       android:fillViewport="true"
       android:scrollbars="none" >
    <GridView
        android:layout_width="500dp"
        android:layout_height="400dp"
        android:id="@+id/grid"
        android:columnWidth="300dp"
        android:padding="5dp"
        android:horizontalSpacing="10dp"
        android:verticalSpacing="10dp"
        android:scrollbars="horizontal"
        android:stretchMode="spacingWidthUniform">
    </GridView>
     </HorizontalScrollView>
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T10:57:37.060

试试这段代码

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class Test2Activity extends Activity {   
    /** Called when the activity is first created. */   
     public Integer[] imageIDs = {   
                R.drawable.library,   
                R.drawable.library,   
                R.drawable.library,      
                R.drawable.library,      
                R.drawable.library,   
                R.drawable.library,           
                R.drawable.library                         
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            GridView gridView = (GridView) findViewById(R.id.grid);
            gridView.setAdapter(new ImageAdapter(this, imageIDs));
            gridView.setNumColumns(imageIDs.length);

    }

    class ImageAdapter extends BaseAdapter
    {
        private Context context;
        Integer[] imageIDs;

        public ImageAdapter(Context c, Integer[] imageIDResults)
        {
            context = c;
            imageIDs = imageIDResults;
        }

        public int getCount() {
            return imageIDs.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent)
        {
            ImageView imageView;
            if (convertView == null) {
                imageView = new ImageView(context);
                imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            } else {
                imageView = (ImageView) convertView;
            }
            imageView.setImageResource(imageIDs[position]);
            return imageView;
        }
    }
} 
```

# certificate - 在验证过程中，一个证书能否导致多个有效的证书链？

> ID：10331585
> 
> 赞同：2
> 
> 时间：2012-04-26T10:26:03.203
> 
> 标签：certificate

在证书验证期间是否可能构建了多个证书链？也许在交叉证书场景中？

我试图了解交叉认证方法，如果在这种情况下验证用户证书可能会导致获得两个证书链，这让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:51:37.173

是的，这是世界上最大的 PKI 之一的一个已知问题，与它可以链接的多种方式有关。这个问题的一部分是由于最初的 CA 根后来收到来自其他 CA 的签名而导致的，我相信这些签名实际上“略微”从属于它们。

然而，大多数人并不理解这一点，因为 PKI 是一个利基市场，即使是那些理解它的人，也并不总是理解链接和其他。

好吧，你现在在大联盟:)

# c# - 如何在 app.config 中添加换行符？

> ID：10331587
> 
> 赞同：28
> 
> 时间：2012-04-26T10:26:15.450
> 
> 标签：c#, app-config

我不知道如何在 app.config 中编写由两行或多行组成的消息。我在配置文件中的常用代码是：

```
add key="msg_test" value="This is test message." 
```

我用 c 清晰的代码阅读它，例如：

```
ConfigurationSettings.AppSettings[msg_test]; 
```

我想写一些类似的东西

```
add key="msg_test" 
    value="This is test message \n are you sure you want to continue?" 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-26T10:35:24.900

您可以在值中使用换行符：

```
add key="msg_test" value="This is
test message." 
```

您还可以使用 XML 编码的字符：

```
add key="msg_test" value="This is&#13;&#10;test message." 
```

（我都测试过，它们都有效。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-26T10:35:22.997

换行符的 XML 转义是`&#xA;`，所以这应该有效：

```
<add key="msg_test" 
value="This is test message &#xA; are you sure you want to continue?"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-16T14:03:23.640

在 Visual Studio 中，在属性/设置中，在字符串设置中，单击下拉箭头，输入第一行文本，按`Shift-Enter`，输入第二行文本。

[![在此处输入图像描述](../Images/3f7caca4b9fde1e304206b0f60f35f71.png)](https://i.stack.imgur.com/85rAm.png)

# hbase - 在 HUB 上创建 HBASE 转换

> ID：10331597
> 
> 赞同：0
> 
> 时间：2012-04-26T10:27:04.290
> 
> 标签：hbase

我如何开发将执行以下操作的通用程序。

一个。从 HBASE 读取数据 b. 将数据加载到 HBASE c. 在 MapReduce 中使用 HBASE 表作为查找

我需要创建足够通用的转换，并且它们应该很容易集成到数据管道中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:05:21.900

HBase 将数据存储为字节数组，因此您可以将任何数据放入您想要的。您可以将所有内容序列化为 XML 或 JSON，并将 HBase 视为纯 blob 存储。这实际上非常有效，只要您只想按键查询，或根据键扫描表即可。

这样做会失去一件事是基于行值在服务器端进行过滤的能力。例如，如果您想要上个月的 HTTP 事务表中的所有行（其中键基于时间戳），但您只想查看有错误条件（500 响应）的行，如果您将响应代码存储为列，您可以创建一个仅返回具有 500 响应代码的项目的过滤器。虽然您仍然需要扫描表的相关部分，但只有与错误代码匹配的数据才会通过网络发送到您的 hbase 客户端。

解决此问题的一种方法是使用混合方法，将数据存储为序列化对象（JSON / XML / 其他），并为您可能想要过滤的内容存储其他列。

# licensing - 开源许可证和谷歌代码

> ID：10331599
> 
> 赞同：-1
> 
> 时间：2012-04-26T10:27:12.003
> 
> 标签：licensing

我喜欢开源的想法，“你买，你自己使用，修改等等”，但我不喜欢有人拿走我的项目，编辑 5 行，然后商业转售的想法。如果我的班级在另一个项目中，那又如何；但是，如果我的整个项目在稍作修改的情况下被转售，那么这个想法让我很兴奋。

所以我想使用 code.google.com 来托管我的开源项目，但我想使用一个许可证来阻止人们（合法地）转售或免费分发（没有重大修改）我的项目。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:35:59.090

也许您应该使用 GPLv3 等限制性的 copyleft 许可证来发布您的代码。这样人们就可以在开源项目中使用您的代码，并且他们添加或更改的任何代码都需要在相同的许可下发布。

如果有人决定拿走你的代码并出售它，他们还需要发布他们的源代码，这会消除他们的大部分商业动机......

[http://www.gnu.org/licenses/quick-guide-gplv3.html](http://www.gnu.org/licenses/quick-guide-gplv3.html)

# c# - 如何仅在一个（水平）方向上使用 Pango-Sharp 缩放文本？

> ID：10331609
> 
> 赞同：0
> 
> 时间：2012-04-26T10:28:06.433
> 
> 标签：c#, mono, scale, pango

我需要用 pango-sharp 写一些文本，但根据字符数来缩放宽度。

这是我目前拥有的：

```
var layout = new Pango.Layout (Core.PangoContext);
layout.FontDescription = Pango.FontDescription.FromString (
  "'Courier New' CLM  20");
layout.SetMarkup (@"<span  color='black'>12</span>");
Area.GdkWindow.DrawLayout (Core.Area.Style.TextGC (
  StateType.Normal), 50, 50, layout); 
```

我无法找到任何提示来实现这一点。我在 Pango 中只找到了一个 XY 刻度，但没有在 X 或 Y 上找到刻度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:29:48.097

终于找到了解决办法：

(cc=cairocontext)

```
layout.FontDescription = Pango.FontDescription.FromString ("Courier New CLM  " + FontSize);
layout.SetText (Position.ToString ());
cc.Scale (1, 1);
cc.MoveTo (NoteCenterX, NoteCenterY - 12);

cc.Scale (ScaleX, 1);
Pango.CairoHelper.ShowLayout (cc, layout);
cc.Scale (1 / ScaleX, 1); 
```

# java - 绑定到 TypeLiteral 在 google guice 中是好是坏

> ID：10331610
> 
> 赞同：8
> 
> 时间：2012-04-26T10:28:13.947
> 
> 标签：java, dependency-injection, guice

Google guice 用来`new TypeLiteral<C<T>>() {}`克服我们无法使用的事实`C<T>.class`。

现在常见于以下情况：

```
bind(new TypeLiteral<C<T>>() {}).to(MyCSubclassTypedToT.class); 
```

然而，想象一个不同的场景。我们有一个通用接口，我们想要注入它，我们拥有的实现由一个通用类提供。

Guice 允许你这样做：

```
bind(new TypeLiteral<MyGenericInterface<T>>() {}).to(new TypeLiteral<MyGenericClass<T>>() {}); 
```

另一种方法是像这样扩展 MyGenericClass：

```
MyTypedClass extends MyGenericClass<T> 
```

然后像这样绑定它：

```
bind(MyGenericInterface<T>>() {}).to(MyTypedClass.class); 
```

如果 MyGenericInterface 被注入很多（尽管类型不同），并且每次注入时我都使用 MyGenericClass，后一种方法会导致代码过于冗长。因此我倾向于使用前者。

我很想听听其他人对在 guice 绑定的 to 子句中使用 TypeLiteral 的意见。恐怕我的选址可能有点短，因此看不到这种方法的缺陷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T00:01:17.483

在这种情况下，将 a`TypeLiteral`用于通用实现让我觉得要好得多。

让我这样说：“`MyTypedClass`如果你不使用 Guice，子类会存在吗？”。Guice 的一个基本准则是：你不应该改变你的实现类来适应 DI 框架（嗯，除了`@Inject`注释之类的东西）。

你从具体但通用的类中获得什么？一大损失是您必须在所有子类中复制 MyGenericClass 的构造函数。总而言之，这似乎是额外的代码，没有太多收获。

总而言之，使用`TypeLiteral`. 如果它在`.to(...)`绑定条款的部分（与 相对`bind(...)`，它甚至不会影响您`Module`的绑定的公开可见部分，所以我认为没有什么可担心的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:22:46.600

通常有两种情况：

1.  你想绑定到的所有`MyGenericInterface`实现`MyGenericClass`
2.  您想`MyGenericInterface`根据其类型绑定 base 的实现

对于第一个场景，`bind(MyGenericInterface).to(MyGenericClass);`就足够了，更简单，更容易理解。

对于第二种情况，您需要将特定类的实现绑定到特定实现，TypeLiteral 将发挥作用。

此外，您问题中的代码不清楚`T`是实际类还是泛型类型。如果是泛型类型，

`bind(new TypeLiteral<MyGenericInterface<T>>() {}).to(new TypeLiteral<MyGenericClass<T>>() {});`

和

`MyTypedClass extends MyGenericClass<T>`

不会编译，因为没有提供一些实际的类。

# wpf - 主窗口中的 WPF 视图

> ID：10331611
> 
> 赞同：2
> 
> 时间：2012-04-26T10:28:15.747
> 
> 标签：wpf, visual-studio

我使用 Visual Studio 2010 创建了一个新的 WPF 应用程序，所以我有一个默认值`MainWindow.xaml`，我创建了一个文件夹“视图”，其中包含几个 xaml 页面，它们是我的应用程序的不同视图。

我想要做的是在 MainWindow.xaml 中有这些视图，并以特定的时间间隔在它们之间转换。谁能给我一个关于如何实现这一目标的想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:10:54.840

您需要定义子窗体如何在 MainWindow 中显示，有几个现成的解决方案可以解决这个问题，查看这些链接：

*   [计时 WPF](http://chronoswpf.codeplex.com/)
*   [阿瓦隆码头](http://avalondock.codeplex.com/)
*   [WPF 多文档界面 (MDI)](http://wpfmdi.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:16:01.227

对于一个简单的场景（没有任何复杂性等），您可以像处理组成一组子对象的父对象一样执行相同的操作。

```
Class A{
private View FirstView;
private View SecondView;

...

} 
```

那么您可能希望将其直观地放置在您的 UI 层次结构中，就像在 Grid 的子级或 Canvas 的实例中一样。

为了更好地使用，请尝试 DI 或 IoC 容器，以免担心创建对象和保留引用。

[http://code.google.com/p/autofac/](http://code.google.com/p/autofac/)

您可能还想考虑视图和窗口之间的通信。为此，请查看 EventAggregator 实现

[https://stackoverflow.com/questions/2343980/event-aggregator-implementation-sample-best-practices](https://stackoverflow.com/questions/2343980/event-aggregator-implementation-sample-best-practices)

# sql - 在 PostgreSQL 中分组 AND 和 OR 条件

> ID：10331613
> 
> 赞同：19
> 
> 时间：2012-04-26T10:28:28.623
> 
> 标签：sql, postgresql, parentheses, operator-precedence

我总是在 sql 查询中使用方括号。但我有例子：

```
DELETE FROM prog 
WHERE prog_start >= $1 AND prog_start < $2
   OR prog_end > $1 AND prog_end <= $2 
```

是否等于：

```
DELETE FROM prog
WHERE ( prog_start >= $1 AND prog_start < $2 )
   OR ( prog_end > $1 AND prog_end <= $2 ) 
```

或不 ？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-26T10:33:46.367

在 SQL 中，`AND`运算符优先于`OR`运算符。PostgreSQL 遵守此处的规范。[您可以在文档Lexical Structure: Operator Precedence](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-PRECEDENCE)中获得 PostgreSQL 中的确切优先级。

因此，在您的情况下，结果将是相同的。但是，简单地使用括号会更容易、更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:40:39.583

它按照运算符优先级 [http://www.postgresql.org/docs/6.5/static/operators.htm#AEN1615](http://www.postgresql.org/docs/6.5/static/operators.htm#AEN1615)进行。

要形成一个复杂的条件，最好用括号括起来。

# html - 更改悬停按钮的图像？

> ID：10331615
> 
> 赞同：4
> 
> 时间：2012-04-26T10:28:36.660
> 
> 标签：html, css, forms

嗨，我有一个 HTML 按钮，设置如下：

`<input type="image" src="derp.png">`

由于图像不是通过 CSS 分配的，我该如何在悬停时更改它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T10:34:50.463

一个非常简单的方法：

`<input type="image" src="derp.png" onMouseOver="this.src='aderp.png'" onMouseOut="this.src='derp.png'">`

JSFiddle（演示）：http: [//jsfiddle.net/E6xHr/](http://jsfiddle.net/E6xHr/)

有更多不显眼的方法可以做到这一点，但这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:35:15.203

像下面这样的东西会起作用（尽管目前未经测试），它需要将备用图像存储在 custome`data-*`属性中，以便脚本知道在哪里找到它，然后`src`以类似`data-*`的方式存储原始图像以便将其放回鼠标移出：

```
var inputs = document.getElementsByTagName('input');

for (var i = 0, len = inputs.length; i < len; i++) {
    input = inputs[i];
    input.onmouseover = function(){
        this.setAttribute('data-orig-image',this.getAttribute('src'));
        this.src = this.getAttribute('data-alt-image');
    };
    input.onmouseout = function(){
        this.src = this.getAttribute('data-orig-image');
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/vyKFd/)。

请记住，以上要求您`input`拥有 HTML 表单：

```
<input type="image" src="http://path.to/default/image.png" data-alt-image="http://path.to/mouseover/image.png" />​ 
```

* * *

**编辑**添加了一个 CSS 选项，不幸的是这有点不完美，并且要求在其属性`input`中没有设置图像：`src`

```
input[type=image] {
    background-image: url(http://davidrhysthomas.co.uk/img/dexter.png);
    background-repeat: no-repeat;
    background-position: 50% 50%;
    width: 200px;
    height: 185px;
}
input[type=image]:hover,
input[type=image]:active,
input[type=image]:focus {
    background-image: url(http://davidrhysthomas.co.uk/img/mandark.png);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/vyKFd/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:38:32.433

我可以看到您有两个选择：

1）CSS

```
input.change {
background-image:url(derp.png);
}

input.change:hover {
background-image:url(mouseover.png);
} 
```

（将类“更改”添加到示例中的输入元素。）

2）JavaScript

```
<input type="image" src="derp.png" onmouseover="this.src='mouseover.png'" onmouseout="this.src='derp.png'"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T10:44:25.217

由于提供的大多数答案都是 JavaScript 本机或基于 CSS 的方法，因此我建议使用 jQuery 解决方案。您可以简单地[`hover()`](http://api.jquery.com/hover/)在 jQuery 中使用。

**jQuery 脚本**

```
$(document).ready(function() {
 $('#img1').hover(function() {
    $('#img1').attr('src','second_img.jpg');
  }, function() {
   // do something here
   alert('hovered out');
 });
}); 
```

**HTML**

```
<input id="img1" type="image" src="first_img.png"> 
```

请参阅[工作示例](http://jsfiddle.net/pxSew/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T10:07:33.453

我的想法是在按钮下方放置一个图像，并将按钮背景图像转换的 alpha 设置为 0，以便您可以看到下面的图像。

# ios - 使用 ARC 加载许多 .jpg 文件时收到内存警告和崩溃

> ID：10331617
> 
> 赞同：0
> 
> 时间：2012-04-26T10:28:49.483
> 
> 标签：ios, iphone, ipad

我的记忆有问题。我使用 ARC。我正在将 .jpgs 加载到我的视图上的 UIImageView。

```
Code showing example situation:

//.h file

@interface myClass : UIViewController
{
    IBOutlet UIImageView * back;
}
// don' t have @property
// back is connected in .xib

//.m file
-(void) viewDidLoad {
    UIImage *  myImg =[UIImage imageNamed:imgName];

    back.image=myImg;
}

-(void) returnToPrevoriousView {
   [self removeFromSuperview];
   back.image = nil;
} 
```

问题是我从另一个视图来到这个视图，而 imgName 可以有很多值。例如，我可以来 myClass 六次，然后我有日志：**收到内存警告**和我的应用程序崩溃。

我认为 myImg 没有从内存中释放？我不知道怎么解决？JPG大约有100kb。

PS。当我加载 .png 时，它可以工作（也更快），尽管 .png 图像通常有 600kB。但我认为它仍然不释放内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:29:37.843

`UIImage imageNamed:`如果您确定该图像不会在您的应用程序中再次使用，请不要使用。`imageNamed:`使用将使用额外内存的内部缓存机制。

从[UIImage 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)：

> 此方法在系统缓存中查找具有指定名称的图像对象，如果存在则返回该对象。如果匹配的图像对象尚未在缓存中，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。

而是使用`UIImage imageWithContentsOfFile:`一次性图像，因为这些图像没有被缓存。

***注意***：只会`imageNamed:`自动加载视网膜版本（@2x）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:23:57.540

**一般来说**，尝试使用 PNG 图像 .. 因为 iOS 已经过优化，可以非常有效地处理 PNG 图像 .. JPEG 图像不提供这种优化，当 iOS 开始显示 jpg 时，它需要一个更复杂的解码过程，这将花费更多的 CPU 能量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:44:43.533

将属性分配给 IBOutlet 并合成它。

# ruby-on-rails - 应该安装什么电子邮件程序才能使 ar_mailer_rails3 工作？

> ID：10331623
> 
> 赞同：1
> 
> 时间：2012-04-26T10:29:16.397
> 
> 标签：ruby-on-rails, ar-mailer

ar_mailer_rails3 不发送电子邮件

```
bundle exec ar_sendmail_rails3 -e production -v
expired 0 emails from the queue
found 175 emails to send 
```

我认为这是可能的，因为服务器上没有设置电子邮件发送。我安装了mail-utils，但没有生效。

谢谢你的帮助。

# android - Webview，样式表相对路径 int url

> ID：10331634
> 
> 赞同：0
> 
> 时间：2012-04-26T10:30:25.683
> 
> 标签：android, webview

```
 <base href="http://www.myurl.com/">
        <link href="templates/default/css/mycss.css?1" rel="stylesheet" type="text/css" /> 
```

我正在尝试使用 android webview 加载一个 url。页面已加载，但没有 css。有一种方法（用于相对路径）。有没有办法直接用css加载页面而不缓存并用[loadDataWithBaseURL](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:34:16.733

尝试这个...

```
 Description = (WebView)findViewById(R.id.webView1);
    Description.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
    Description.getSettings().setJavaScriptEnabled(true);
    Description.getSettings().setBuiltInZoomControls(true);
    //PodcastDescription.setTextSize(20.f);
    //PodcastDescription.setTypeface(tf);

    Bundle mybundle = getIntent().getExtras();
    Integer NewsNumber = mybundle.getInt("number");

    String CurrentDescription = Entertainment.Description[NewsNumber];

    Description.loadDataWithBaseURL (null, "<html><head><style>@font-face{font-family:'MeeraRegular'; src: url('file:///android_asset/fonts/Meera.ttf');}body{font-family:'MeeraRegular'; font-size:20px; } </style></head><body>"+CurrentDescription+"</body></html>", "text/html", "UTF-8",
    null); 
```

# sitecore - 获取页数

> ID：10331637
> 
> 赞同：0
> 
> 时间：2012-04-26T10:30:57.953
> 
> 标签：sitecore, sitecore6, sitecore-dms

我正在使用 Sitecore 6.5 开发网站

其中一项要求是在右上角显示 5 个最受欢迎的页面。

为此，我考虑使用分析报告用于页数的函数。

我想知道是否可以通过使用 Analytics API 来做到这一点`Sitecore.Analytics`

如果是这样，我可以有一些代码片段来做，因为我完全迷失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T21:23:00.040

我知道这已经回答了，但是为什么不直接使用 PageDataTable 来查询呢？我做了这样的事情：

```
 public static Dictionary<Item, int> GetVisitsCountForItem(Item item)
    {
        Sitecore.Analytics.Data.DataAccess.DataSets.VisitorDataSet.PagesDataTable pagesDataTable = new VisitorDataSet.PagesDataTable();
        var pageViews = pagesDataTable.Select(p => p.ItemId == item.ID.Guid);
        var dic = new Dictionary<Item, int>();
        dic.Add(item, pageViews.Count());
        return dic;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:08:40.133

以下是在 DMS 中执行此操作的方法：

```
private const string CommandText = "\r\nSELECT \r\ncount(distinct {0}VisitId{1})\r\n FROM {0}Pages{1}\r\n WHERE {0}ItemId{1} = {2}YourItemId{3}";

public static int GetPageViews(ID pageId)
{
  return DataAdapterManager.Provider.Sql.ReadOne<int>(CommandText, ReadPageViews, new object[] { "YourItemId", pageId.ToString() });
}

private static int ReadPageViews(DataProviderReader reader)
{
  return DataAdapterManager.Provider.Sql.GetInt(0, reader);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:17:26.840

您可以查看博客文章“ [Sitecore OMS 数据查询 – 浏览次数最多的页面](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/09/mostviewedList.aspx)”，该文章旨在获取 OMS（**而非**DMS）的浏览次数最多的页面。这至少可以为您提供一个起点，但您需要调整代码以匹配更新的 API。

# c++ - Qt + VS2010 编译器：如何创建一个简单的项目，用于为 VC 静态链接的 boost 编译？

> ID：10331639
> 
> 赞同：2
> 
> 时间：2012-04-26T10:31:03.807
> 
> 标签：c++, visual-studio, visual-studio-2010, qt, boost

如何创建一个简单的项目，该项目将使用为 VC 静态链接的 boost 编译（类似于 C:/boost）？我的项目文件应该是什么样子的？

我试图添加到 .pro

```
INCLUDEPATH += C:/BOOST/include/boost-1_49
DEPENDPATH += C:/BOOST/lib
 LIBS += -LC:/BOOST/lib -llibboost_system-vc100-mt-sgd-1_49 -llibboost_thread-vc100-mt-sgd-1_49 
```

但我得到：

```
msvcprtd.lib(MSVCP100D.dll):-1: ERROR: LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) already defined in libboost_system-vc100-mt-sgd-1_49.lib(error_code.obj)

msvcprtd.lib(MSVCP100D.dll):-1: ERROR: LNK2005: "public: __thiscall std::_Container_base12::_Container_base12(void)" (??0_Container_base12@std@@QAE@XZ) already defined in libboost_system-vc100-mt-sgd-1_49.lib(error_code.obj)

msvcprtd.lib(MSVCP100D.dll):-1: ERROR: LNK2005: "public: void __thiscall std::_Container_base12::_Orphan_all(void)" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in libboost_system-vc100-mt-sgd-1_49.lib(error_code.obj)

:-1: WARNING: LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library

debug\loader.exe:-1: ERROR: LNK1169: one or more multiply defined symbols found 
```

当我尝试编译类似的东西时：

```
#include <QtGui/QApplication>
#include <iostream>

#include <boost/filesystem.hpp>

int main(int argc, char *argv[])
{
    boost::filesystem::path p;
} 
```

所以我想知道如何更改我的 .proo 文件以正确链接到使用 VS 编译器的 Qt Creator 为 VC 编译的静态 boost？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:46:23.700

如果您使用该`--runtime-link=static`标志构建 boost，那么它们是针对静态 CRT 库编译的，即使用`/MT`（和`/MTd`用于调试的）编译器标志。

您的错误表明您的项目正在尝试与动态 CRT 库链接，即使用`/MD`and `/MDd`。如果这些设置在您的 .pro 文件中，它们将成为`QMAKE_CXXFLAGS_RELEASE`和`QMAKE_CXXFLAGS_DEBUG`变量的一部分。然而，它们可能根本没有列出——我认为默认是使用动态 CRT 库。

您项目中的所有库都需要链接到同一个 CRT。

您需要`--runtime-link=shared`在构建 boost 时使用（尽管您仍然可以使用`--link=static`此选项创建静态 boost 库），或者在 .pro 文件中添加/更改`/MD`and`/MDd`到`/MT`and `/MTd`。

# ios - 在 iOS 5 中刷新 JSON 表

> ID：10331640
> 
> 赞同：0
> 
> 时间：2012-04-26T10:31:06.290
> 
> 标签：ios, xcode, json

我有一个表格视图，它由一个重复的 tableviewcell 填充，但填充了来自网络上的 JSON 文件的详细信息。所以我在启动时有 15 个单元格，每个单元格都有自己的 JSON 详细视图。我想知道如何实现一个刷新系统，最好使用一个按钮，让应用程序重新下载 JSON 文件。这样，如果我在数据库中进行更改，则可以手动更新它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:40:57.487

所以你已经有一个函数来下载 JSON 并使用它来呈现你的表格？

创建一个调用该函数的按钮，并在它返回后通过调用 UITableView 上的 reloadData 重新加载 UITableView。

# java - 如何在 Java 中使用访问者进行 AST

> ID：10331641
> 
> 赞同：3
> 
> 时间：2012-04-26T10:31:07.460
> 
> 标签：java, abstract-syntax-tree

我正在使用[org.eclipse.jdt.core.dom](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2Fpackage-summary.html)来生成一些给定 Java 源代码的 AST。生成 AST 后，我有了根节点。

如何使用 an`ASTVisitor`来解析我的 AST 以获取所有叶节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-29T13:55:45.020

## 访客模式

如果您还不熟悉特定的设计模式，我建议您先阅读[访问者模式。](https://sourcemaking.com/design_patterns/visitor)

本质上，它归结为使用双重调度来调用`Visitor`类上的适当方法，将访问的对象作为参数传递。通常，它的实现方式与以下（YMMV）类似：

```
public interface Node {
    void acceptVisitor(Visitor v);

    Collection<Node> getChildren();
}

// Incomplete implementation, for demonstration only
public class SubNode implements Node {

    @Override
    public void acceptVisitor(Visitor v) {
        if(v.preVisit(this)) {
            v.visit(this);
            v.postVisit(this);
        }
        getChildren().forEach(child -> child.accept(v));
    }
}

public interface Visitor {
    boolean preVisit(Node node);

    void visit(Node node);

    void visit(SubNode node);

    void postVisit(Node node);
} 
```

然后`Visitor`实现接口，并将其传递给`acceptVisitor`a 的方法`Node`（通常，但不总是，树的根节点）。

* * *

## Eclipse 实现

**要更全面地了解如何实现您[的](http://www.vogella.com/tutorials/EclipseJDT/article.html)`ASTVisitor`.**

在您的特定情况下，您需要扩展[`org.eclipse.jdt.core.dom.ASTVisitor`](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTVisitor.html)类，覆盖您关心`visit`的实现的方法。[`org.eclipse.jdt.core.dom.ASTNode`](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTNode.html)然后将 this 的一个实例传递给 AST 的根节点`ASTVisitor`的方法。[`accept`](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2Fpackage-summary.html)

* * *

## 叶节点

由于您正在寻找叶节点（定义为没有子节点的 AST 节点），您可以执行[以下](https://stackoverflow.com/a/11853270/2489497)操作来检索 an 的子节点`ASTNode`：

```
public Object[] getChildren(ASTNode node) {
    List list= node.structuralPropertiesForType();
    for (int i= 0; i < list.size(); i++) {
        StructuralPropertyDescriptor curr= (StructuralPropertyDescriptor) list.get(i);
            Object child= node.getStructuralProperty(curr);
        if (child instanceof List) {
                return ((List) child).toArray();
        } else if (child instanceof ASTNode) {
            return new Object[] { child };
            }
        return new Object[0];
    }
} 
```

通过调用此方法并传递您检查的每个节点，您可以确定该节点是否没有子节点（`length`返回数组的值为 0）并将它们添加到`Collection`您的 a 中`ASTVisitor`以跟踪它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T13:30:58.497

这可能不是正确的方法，但这可以获取所有叶节点。

1）维护两组节点，比方说`S1`和`S2`。
2）遍历所有节点并将每个节点添加到`S1`。
3) 如果`node.getParent() != null`，则添加`node.getParent()`到`S2`
4) 这意味着`S1`跟踪所有节点，同时`S2`拥有所有内部节点。所以叶节点是`S1 - S2`。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:41:48.000

一个例子是这样的：

```
package de.vogella.jdt.astsimple.handler;

import java.util.ArrayList;
import java.util.List;

import org.eclipse.jdt.core.dom.ASTVisitor;
import org.eclipse.jdt.core.dom.MethodDeclaration;

public class MethodVisitor extends ASTVisitor {
  List<MethodDeclaration> methods = new ArrayList<MethodDeclaration>();
    @Override
    public boolean visit(MethodDeclaration node) {
      methods.add(node);
      return super.visit(node);
    }

    public List<MethodDeclaration> getMethods() {
      return methods;
    }
} 
```

# javascript - javascript，在匿名对象创建期间访问其他成员？

> ID：10331645
> 
> 赞同：3
> 
> 时间：2012-04-26T10:31:52.023
> 
> 标签：javascript, this, member, anonymous

试图让下面的代码工作；由于为 store 变量分配了一个匿名对象，因此使用函数调用填充“数据”属性。此设置还应设置其他对象的属性“masterData”的内容。我希望“this”关键字引用正在创建的匿名对象，但我错了......

```
 var store = {

        masterData : [],

        revert: function() {

            this.data = shallowCopy(this.masterData);
        },

        data: (function() {

            var overviewData = getOverviewData();
            this.masterData = overviewData;
            return chartData;

            }).call(),
    }; 
```

另请参阅“恢复”属性；它提供了一个函数，该函数将创建对象数据属性内容的副本。

应该使用什么，因为“this”返回 DOMWindow 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:44:18.820

我有同样的问题，我只是通过发送带有函数的范围来解决它。

```
 var self = this;
    setInterval( yourFunction(self), 1000);

    yourFunction:function( self )
    {
        console.log(this);
        console.log(self);
    } 
```

您会看到，当它记录“this”时，它指的是 DOM，而 self 指的是您来自哪里。我希望这有帮助！:)

编辑：不是在数据内部设置masterData，而是在创建数据后设置主数据。

```
var store = {

    masterData : [],

    revert: function() {

        this.data = shallowCopy(this.masterData);     //Here is where you create data
        masterData = this.data.overviewData;       //set the masterData
    },

    data: (function() {

        var overviewData = getOverviewData();
        return chartData;

        }).call(),
}; 
```

我认为这应该可行，否则对不起:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:04:17.743

`data`在定义对象之前调用该函数；`this`在该对象出现之前不会是该对象的别名。您可以将构造函数与私有的短期变量一起使用：

```
var getOverviewData = function () { return "I'm overview data!" }
var chartData = "I'm chart data!"

var store = new function () {
  var _masterData
  this.revert = function() {
    this.data = shallowCopy(this.masterData)
  }
  this.data = (function() {
    _masterData = getOverviewData()
    return chartData
  }).call()
  this.masterData = _masterData
}()

console.log(store)
// { revert: [Function],
//   data: 'I\'m chart data!',
//   masterData: 'I\'m overview data!' } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:15:31.360

改变流线

```
}).call(), 
```

到

```
})() 
```

或者，如果您真的想使用该`call`方法：

```
 }).call(store) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-23T16:40:04.190

[`this`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this)调用匿名函数时不会引用当前对象，因为它不遵循在作用域中设置的模式，`obj.func()`并且不受其他方式的约束。相反，它指的是[全局窗口对象](https://developer.mozilla.org/en-US/docs/Web/API/Window)（或在[严格模式下](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)）。`this``func``obj``undefined`

[`call`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call)，[`apply`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/apply)并且[`bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind)没有帮助，因为`store`尚未定义对象，因此没有对象可以作为`thisArg`参数提供。另一方面， with `store.revert`,`this`指`store`的是它被调用的时间并按预期运行。

该示例似乎过于做作，因为没有明显的动机将设置`masterData`作为也设置的匿名函数的副作用`data`。看来您可以执行以下操作：

```
// some sameple funcs and data for testing purposes
var getOverviewData = function () { return [42]; };
var shallowCopy = function (a) { return a.slice(); };
var chartData = [24];

var store = {
  masterData: getOverviewData(),

  revert: function () {
    this.data = shallowCopy(this.masterData);
  },

  data: chartData,
};

console.log(store.data);
store.revert();
console.log(store.data);
```

一般来说，如果一个模式看起来很难应用，它通常是不必要的，或者是实现预期结果的次优方式。OP 提出的`data`IIFE setter 打破了经验法则：它没有单一的职责，并通过改变对象而产生副作用。

现在，假设您在定义此属性时确实需要`this`从[IIFE](https://developer.mozilla.org/en-US/docs/Glossary/IIFE)访问（或者对于确实有正当动机的未来读者），有多种方法可以实现这一点。

最明显和直接的解决方案是创建`store`对象，然后添加数据并在第二步中对其进行变异：

```
var getOverviewData = function () { return [42]; };
var shallowCopy = function (a) { return a.slice(); };
var chartData = [24];

var store = {
  masterData: [],

  revert: function () {
    this.data = shallowCopy(this.masterData);
  },
};
store.data = (function () {
  this.masterData = getOverviewData();
  return chartData;
}).call(store);

console.log(store.data);
store.revert();
console.log(store.data);
```

如果你不喜欢这两个步骤，你可以把它扔进 IIFE：

```
var getOverviewData = function () { return [42]; };
var shallowCopy = function (a) { return a.slice(); };
var chartData = [24];

var store = (function () {
  var store = {
    masterData: [],

    revert: function () {
      this.data = shallowCopy(this.masterData);
    },
  };
  store.data = (function () {
    this.masterData = getOverviewData();
    return chartData;
  }).call(store);
  return store;
})();

console.log(store.data);
store.revert();
console.log(store.data);
```

[另一种方法是使用此处](https://stackoverflow.com/a/10332128/6243352)所示的构造函数并调用它[`new`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new)，使您可以访问`this`上下文。

您正在使用的 IIFE 可能是一个完全独立的函数，它接受一个对象作为参数并改变它的两个属性，但这只是为了完整性而提及；它可能仅在您计划为多个对象重用该函数时才有用，在这种情况下，您不妨创建一个成熟的[类](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes)或非 IIFE 构造函数。

# android - 如何从Android上的本机代码获取临时文件夹的路径？

> ID：10331648
> 
> 赞同：6
> 
> 时间：2012-04-26T10:32:06.477
> 
> 标签：android, android-ndk

`getenv("TMPDIR")`返回`NULL`。关于什么是临时文件夹/在哪里创建一个的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T10:51:47.867

据我所知，Android 中没有全局 /tmp，您应该使用**缓存**目录。

用于`getCacheDir()`获取“ **tmp** ”目录。

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)和 [http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29](http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)

# actionscript-3 - 文本输入文本不显示，除非它集中在 flex 4.6 android 应用程序中

> ID：10331649
> 
> 赞同：4
> 
> 时间：2012-04-26T10:32:07.343
> 
> 标签：actionscript-3, apache-flex, air, android-emulator, flex4.6

我正在使用 flex 4.6 和 air 3.1 为 android 开发 AIR 应用程序。在应用程序中，我有一个视图，其中有一个文本输入和一个搜索按钮。输入一些文本并单击搜索按钮后，将进入结果视图。从结果视图用户可以通过单击返回按钮返回到 searchview。SearchView`destructonPolicy`保持不变`never`，我`navigator.popView()`用来返回 searchview。问题是当我返回搜索视图时，文本输入为空，其中应该显示 txt以前键入。但是当焦点在文本输入上时，文本出现。我希望在再次显示该视图后立即显示文本。知道为什么会发生此问题

**PS-**当我在 android 模拟器（OS 2.3.3）中安装 apk 后检查时会发生此问题。我没有 android 设备来检查这个。所以不确定这是否只是模拟器的问题。如果我使用 flex `4.5.1`sdk 这个问题**没有**发生

这是代码

主要的mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                            xmlns:s="library://ns.adobe.com/flex/spark" firstView="views.HomeView">
</s:ViewNavigatorApplication> 
```

主页视图.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView" destructionPolicy="never">

    <fx:Script>
        <![CDATA[
            protected function button1_clickHandler(event:MouseEvent):void
            {
                navigator.pushView(ResultView);
            }
        ]]>
    </fx:Script>
    <s:layout>
        <s:VerticalLayout horizontalAlign="center"/>
    </s:layout>
    <s:TextInput prompt="Enter some text"/>
    <s:Button label="Search" click="button1_clickHandler(event)"/>
</s:View> 
```

结果视图.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="ResultView">

    <fx:Script>
        <![CDATA[
            protected function button1_clickHandler(event:MouseEvent):void
            {
                navigator.popView();

            }
        ]]>
    </fx:Script>

    <s:navigationContent>
        <s:Button label="&lt;" click="button1_clickHandler(event)"/>
    </s:navigationContent>
</s:View> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T10:27:05.913

由于 Flex 4.6 上存在该问题；但不是 Flex 4.5，这可能是使用 StageText 的新默认 TextInput 外观的副作用/重绘问题。[我在这里](https://www.flextras.com/blog/index.cfm/2012/5/1/Why-does-a-TextInput-appear-above-my-Popup-in-Flex-46)写了一点。

在您的 4.6 应用程序中，尝试设置默认的 Flex 4.5 皮肤：

```
<textInput skinClass="spark.skins.mobile.TextInputSkin" /> 
```

# java - 从 html 调用 web 服务

> ID：10331653
> 
> 赞同：1
> 
> 时间：2012-04-26T10:32:21.763
> 
> 标签：java, javascript, html

我们使用 Netbeans 创建了用于温度转换的 Web 服务。它工作正常。

```
@WebMethod(operationName = "tempConverter")
public Double tempConverter(@WebParam(name = "temp") double temp, 
                            @WebParam(name = "choice") int choice) {
    switch(choice)
    {
        case 1:
        tempConv =  (9.0/5.0)*(ip)+32.0;
        break;

        case 2:
        tempConv = (5.0/9.0)*(ip-32.0);
        break;
     }
     return tempConv;
} 
```

但是我们想在 html 中使用这个 web 服务。chanService 是 web 服务的名称。

代码是：

```
<script language="javascript">
            function initialize()
            {
                service.useService("http://localhost:8080/chanService/chanService.java?WSDL","tempConverterService");
            }

            function getTemp()
            {
                var temp,choice;
                temp=document.getElementById('temp').value;
                choice=document.getElementById('choice').value;
                service.tempConverterService.callService(tempConverter,temp,choice);

            }
            function Result() 
{ 
alert(event.result.value); 
} 

        </script>

    </head> 
    <body onload="initialize()" id="service" onresult="Result()">
        <form name="form1">
            <input type="text" name="temp" id="temp" value="0" size="50" />
            <input type="text" name="choice" value="1" id="choice" size="50" />
            <input type="button" value="Submit" name="submit" onclick="getTemp()"/>
        </form> 
```

但这不起作用。请帮忙，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:11:50.677

您需要在 body 标记中添加 style="behavior:url(webservice.htc)" 并将文件放在页面的同一文件夹中。

请参阅此[http://msdn.microsoft.com/en-us/library/ie/ms531063(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms531063(v=vs.85).aspx)

# google-app-engine - 设计一个电子邮件“api”

> ID：10331655
> 
> 赞同：0
> 
> 时间：2012-04-26T10:32:27.570
> 
> 标签：google-app-engine, email, incoming-mail

所以，我在 Google 的应用引擎上构建了这个网络服务，我希望它能够接收电子邮件。

问题是，我需要授权传入的邮件并*仅*根据**TO**字段确定目的地。这是为了让人们将服务集成到他们已经运行的任何电子邮件发送系统中。

至少我需要变量、密钥和目的地（这也是一个电子邮件地址）：

一个例子可能是：

`af922514-60bc-4595-956d-ec29e6351d8e,kristian@mide.dk@application.appspotmail.com`

那是行不通的（我认为），有没有办法逃避第一个@，或者我应该完全以其他方式解决这个问题？

我考虑过对其进行基本编码：

```
af922514-60bc-4595-956d-ec29e6351d8e,kristian@mide.dk@application.appspotmail.com 
```

变成这样：

```
YWY5MjI1MTQtNjBiYy00NTk1LTk1NmQtZWMyOWU2MzUxZDhlLGtyaXN0aWFuQG1pZGUuZGs=@application.appspotmail.com 
```

我不确定电子邮件地址中是否允许使用结尾的“=”

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:26:37.523

首先，逗号是不行的，因为它会建议多个收件人，大多数邮件客户端会将逗号视为分隔符。

你可以做的是像这样格式化它：

> some-var+recipient-addresse+domain.tld@someapp.appspotmail.com

当您的应用收到电子邮件时，您只需执行一个匹配所有内容的正则表达式，直到第一个 + 号。你有你的变量，然后匹配其余的直到一个@符号，用@替换最后一个+，你就有了电子邮件。

这也将允许收件人电子邮件包含 +，因为您只替换第一个和最后一个 + 符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:49:08.337

由于`+`不属于主机名，您可以将最后一个替换`+`为`@`：

`some-id,myinbox+tag+gmail.com@someapp.appspotmail.com`

翻译为：

`myinbox+tag@gmail.com`和`some-id`

# c - 链表打印

> ID：10331659
> 
> 赞同：1
> 
> 时间：2012-04-26T10:32:54.747
> 
> 标签：c, list, linked-list

我正在制作这个链接（上面的代码），我需要当信息（国家）与以前的信息相同时，链接列表只更新计数并且不存储信息示例

如果有这个输入

```
mmm 1
mmm 2
mmm 3 
```

输出将需要是`mmm3`

我应该怎么做才能做到这一点

```
void insertitem(ListNode **startPtr,booking_type* bookings){
    int ans=0;

    ListNode *prevNode =NULL ,*curNode=*startPtr;

    ListNode *newNode = (ListNode*)malloc(sizeof(ListNode));

    strcpy(newNode->data, bookings->country); //newNode->data =bookings->country;
    newNode->nextPtr = NULL;
    newNode->count = 1;  
    while ((curNode!=NULL)&&(strcmp(curNode->data,bookings->country)<=0) ) // future : use strcmp 
    {
      if(strcmp(curNode->data,bookings->country)==0){
        newNode->count++;
      }

      prevNode=curNode;
      curNode = prevNode->nextPtr;
    }

    if(prevNode == NULL)
        *startPtr=newNode;
    else
        prevNode->nextPtr = newNode;

    newNode->nextPtr = curNode;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:57:34.977

```
void insertitem(ListNode **startPtr,booking_type* bookings){
    int dif;
    ListNode *curNode. *newNode;

    for (dif = -1; (curNode= *startPtr); startPtr = &curNode->nextPtr ) {
      dif = strcmp(curNode->data,bookings->country);
      if (dif==0) {
          /* found it! we're almost done */
          curNode->count += 1;
          return; }
      if (dif > 0) break; 
    }
    /* when we get here, startPtr points to the pointer where we should
    ** insert our new node.
    ** *ptr becomes our tail, and ptr should point at the new node
    */
    newNode = malloc(sizeof *newNode);
        /* TODO: check for malloc() failure here ... */
    strcpy(newNode->data, bookings->country);
    newNode->nextPtr = *startPtr;
    newNode->count = 1;  
    *startPtr=newNode;
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:41:42.613

当您看到有一个具有相同国家/地区的 LL 节点时，您当前正在增加新节点的计数：

```
if(strcmp(curNode->data,bookings->country)==0){
        newNode->count++;
} 
```

相反，您可以做的是增加已经存在的节点的计数。同样在这种情况下，您不会插入新节点，因此您需要释放 malloced 节点并从函数返回：

```
if(strcmp(curNode->data,bookings->country)==0){
        curNode->count++;
        free newNode;
        return;
} 
```

# jquery - Formly jQuery 表单插件，错误提交

> ID：10331660
> 
> 赞同：0
> 
> 时间：2012-04-26T10:32:56.267
> 
> 标签：jquery

我已经按照实现 Formly ( [http://thrivingkings.com/formly/](http://thrivingkings.com/formly/) ) 的说明进行操作，并且所有验证都有效，只是当我在验证后添加 JS 代码来处理提交时，表单提交到服务器，即使表单上发生错误。请参阅“Faz”在 Formly 网站上的评论。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:50:11.833

实际上 Luvdubz 和 Faz 走错了路——他们不应该像以前那样在提交按钮上附加一个事件：

```
<input name="typeform" onclick="submit('pdf_connexion2.php')" type="submit" value="Connexion"> 
```

Formly 实际上已经为开发人员做到了这一点。当用户成功完成表单，即通过验证后，正式调用回调函数。在回调函数中，你可以做任何你喜欢的事情。

```
$('#ContactInfo').formly({'theme':'Dark'}, function(e){
   alert('Yay..validation has passed..do with me as you will!!');
   // basically you can put anything here to trigger the post
}); 
```

最简单的例子可能是：

```
<form id="contactInfo">
  <input ... />  
  <input ... />
  <input ... />  
  <input type="submit" value="Sign up" />
  <input type="reset" value="Clear" /> 
</form>

<script>
  $(document).ready(function(){ 
    $('#contactInfo').formly({'theme':'Dark'}, function(e){
      $.post("sometarget.php", $("#contactInfo").serialize());
    });
  });
</script> 
```

# groovy - 在 Groovy 中查找文件是否已更改的快速过程

> ID：10331662
> 
> 赞同：0
> 
> 时间：2012-04-26T10:33:03.443
> 
> 标签：groovy, directory

我正在编写一个将文件从一个目录复制到另一个目录的 Groovy 脚本。目前，我正在使用：

```
new AntBuilder().copy( todir:'/dest/' ) {
  fileset( dir:'src' ) 
```

为了加快这个过程，我希望脚本足够聪明，能够识别没有更改的文件并且不复制这些文件。

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:38:46.557

您应该能够使用[`modified`ant 任务](http://ant.apache.org/manual/Types/selectors.html#modified)：

```
new AntBuilder().with {
  copy( todir:'/dest/' ) {
    fileset( dir:'src' ) {
      modified()
    }
  }
} 
```

这通过散列文件并将其与目标文件夹中的散列进行比较来工作。

我相信，如果你只是这样做：

```
new AntBuilder().with {
  copy( todir:'/dest/', preservelastmodified:'true', overwrite:'false' ) {
    fileset( dir:'src' ) 
  }
} 
```

它应该只复制较新的文件...添加`verbose:'true'`到复制方法中也应该显示它在做什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T08:22:02.857

对于像我这样在这里寻找解决方案的人来说，使用[AntBuilder 同步任务](http://ant.apache.org/manual/Tasks/sync.html)似乎是最好的方法：

```
new AntBuilder().sync(todir: targetDir, overwrite: true) {
    fileset(dir: sourceDir) {
    }
} 
```

如果您正在使用 jenkins 管道，则需要使用以下方法注释该方法`@NonCPS`：

```
@NonCPS
public void Synchronize() {
    new AntBuilder().sync(todir: targetDir, overwrite: true) {
        fileset(dir: sourceDir) {
        }
    }
} 
```

# tomcat - 错误网关错误与tomcat和apache2

> ID：10331663
> 
> 赞同：1
> 
> 时间：2012-04-26T10:33:03.973
> 
> 标签：tomcat, apache2, http-error

我想在同一个系统上运行两个网站（localhost@8080 和 localhost@4040），所以我在 apache2 中配置了 dispatcher.any，所以上面可以实现。但我无法从 localhost:8080 渲染农场获取数据。我的 apache 无法连接到渲染农场。在日志中，我得到

[Thu Apr 26 05:23:55 2012] [E] [4056(1488)] 无法连接到渲染 rend01 (localhost:8080)：连接被拒绝。[Thu Apr 26 05:23:55 2012] [E] [4056(1488)] 找不到有效的渲染

我的浏览器显示 502 错误网关错误。我不知道发生了什么？

我的第二台服务器（localhost@4040）运行良好。如果有人对此有任何想法，请提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:58:50.373

解决了这个问题。这是一些语法错误，我仍然找不到原因。我在这里发布答案，因为它肯定会帮助以后的其他人。

在提供渲染农场作为本地主机时，我正在使用

/主机名：“本地主机”

/端口：“8080”

上面的语法实际上有错误。当我将“localhost”替换为 127.0.0.1 时，它起作用了。所以正确的语法是

/主机名：127.0.0.1

/端口：“8080”

它解决了这个问题。:)

# java - 包含 /（斜杠）的罗盘查询

> ID：10331665
> 
> 赞同：2
> 
> 时间：2012-04-26T10:33:27.367
> 
> 标签：java, lucene, indexing, compass-lucene

我在我的项目中使用基于指南针的索引。我对字段“名称”的基于注释的配置是：

```
@SearchableProperty(name="name")
@SearchableMetaData(name="ordering_name", index=Index.NOT_ANALYZED)
private String name; 
```

现在为“名称”字段存储以下值：

```
1\. Temp 0 New n/a
2\. e/f search
3\. c/d search 
```

现在不同场景的搜索结果如下：

```
1\. 'c/d' -> +(+alias:TempClass +(c/d*)) +(alias:TempClass) -> 1 record found
2\. 'n/a' -> +(+alias:TempClass +(n/a*)) +(alias:TempClass) -> 0 record found
3\. 'search' -> +(+alias:TempClass +(search*)) +(alias:TempClass) -> 2 records found 
```

因此，当我尝试搜索“n/a”时，它应该搜索值为“Temp 0 New n/a”的第一条记录。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:55:31.343

在某些时候，您的查询分析与您的文档分析不匹配。

您很可能在内部使用 Lucene 的[StandardAnalyzer](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/standard/StandardAnalyzer.html)进行查询解析，但不是在索引时使用，如下所示：

```
@SearchableMetaData(name="ordering_name", index=Index.NOT_ANALYZED)) 
```

此分析器中使用的[StandardTokenizer](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/standard/StandardTokenizer.html)将字符`/`视为单词边界（例如空格），生成标记`n`和`a`. 稍后，令牌`a`被[StopFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/StopFilter.html)删除。

以下代码是此解释的示例（输入为`"c/d e/f n/a"`）：

```
Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
TokenStream tokenStream = analyzer.tokenStream("CONTENT", new StringReader("c/d e/f n/a"));
CharTermAttribute term = tokenStream.getAttribute(CharTermAttribute.class);
PositionIncrementAttribute position = tokenStream.getAttribute(PositionIncrementAttribute.class);
int pos = 0;
while (tokenStream.incrementToken()) {
    String termStr = term.toString();
    int incr = position.getPositionIncrement();
    if (incr == 0 ) {
        System.out.print(" [" + termStr + "]");
    } else {
        pos += incr;
        System.out.println(" " + pos + ": [" + termStr +"]");
    }
} 
```

您将看到以下提取的令牌：

```
 1: [c]
 2: [d]
 3: [e]
 4: [f]
 5: [n] 
```

请注意，预期的位置 6: with token`a`缺失。如您所见，Lucene 的[QueryParser](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/queryParser/QueryParser.html)也执行此标记化：

```
QueryParser parser = new QueryParser(Version.LUCENE_36, "content", new StandardAnalyzer(Version.LUCENE_36));
System.out.println(parser.parse("+n/a*")); 
```

输出是：

```
+content:n 
```

编辑：解决方案是使用[WhitespaceAnalyzer](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/WhitespaceAnalyzer.html)，并将字段设置为 ANALYZED。以下代码是 Lucene 下的概念证明：

```
IndexWriter writer = new IndexWriter(new RAMDirectory(), new IndexWriterConfig(Version.LUCENE_36, new WhitespaceAnalyzer(Version.LUCENE_36)));
Document doc = new Document();
doc.add(new Field("content","Temp 0 New n/a", Store.YES, Index.ANALYZED));
writer.addDocument(doc);
writer.commit();
IndexReader reader = IndexReader.open(writer, true);
IndexSearcher searcher = new IndexSearcher(reader);
BooleanQuery query = new BooleanQuery();
QueryParser parser = new QueryParser(Version.LUCENE_36, "content", new WhitespaceAnalyzer(Version.LUCENE_36));
TopDocs docs = searcher.search(parser.parse("+n/a"), 10);
System.out.println(docs.totalHits);
writer.close(); 
```

输出是：`1`。

# mysql - 没有唯一字段的mysql分区

> ID：10331666
> 
> 赞同：0
> 
> 时间：2012-04-26T10:33:43.823
> 
> 标签：mysql, database-partitioning

我想对我的表进行分区。表格是：

```
create_table "multimedia", :force => true do |t|     
   t.integer   "id"   
   t. binary   "data"    
   t.integer   "device_id"         
   t.datetime  "created_at"                  
end 
```

`id`是主键
created_at 是表的简单索引并且没有唯一性

我需要按字段 created_at 对表进行分区。在我的表中，只有过去 7 天的记录，所以我想按天对它进行分区。我写了这个：

```
partition by range (to_days(created_at))          

  ( PARTITION p20120417 VALUES LESS THAN (to_days('2012-04-17 23:59:59 +0200')),                   
    PARTITION p20120418 VALUES LESS THAN (to_days('2012-04-18 23:59:59 +0200')),                
    PARTITION p20120419 VALUES LESS THAN (to_days('2012-04-19 23:59:59 +0200')),              
    PARTITION p20120420 VALUES LESS THAN (to_days('2012-04-20 23:59:59 +0200')),               
    PARTITION p20120421 VALUES LESS THAN (to_days('2012-04-21 23:59:59 +0200')),             
    PARTITION p20120422 VALUES LESS THAN (to_days('2012-04-22 23:59:59 +0200')),                  
    PARTITION p20120423 VALUES LESS THAN (to_days('2012-04-23 23:59:59 +0200')),                    
    PARTITION p20120424 VALUES LESS THAN (to_days('2012-04-24 23:59:59 +0200'))                
); 
```

代码给了我这个错误：

> PRIMARY KEY 必须包含表的分区函数中的所有列

我需要该表仅由 created_at 分区并且它不能是唯一的。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:41:44.290

制作你的主键（id，created_at），因为 id 是唯一的，所以它保证是唯一的。然后您可以使用 created_at 作为您的表分区标准。

# iphone - 使用子字典键排序

> ID：10331667
> 
> 赞同：2
> 
> 时间：2012-04-26T10:33:44.200
> 
> 标签：iphone, ios5

我在对包含字典及其子字典的 nsmutablearray 进行排序时遇到了一些问题。以下是我的 nsmutablearray。我想使用**actualScore**键对该数组进行排序。

```
sorteddictioary:(
    {
    "0:Present and past" =         (
                    {
            SubUnit = "Present simple (\U2018I do\U2019)";
            SubUnitExercise = "Exercise 2";
            SubUnitExerciseProgress = "<SubUnitExerciseProgress: 0x777d8d0> (entity: TSubUnitExerciseProgress; id: 0x77d2710 <x-coredata://1ADCDF30-EC80-4B40-8A9E-58BA0532D014/TSubUnitExerciseProgress/p1> ; data: {\n    actualScore = 6;\n    editDate = \"2012-04-25 13:22:38 +0000\";\n    subUnitExercise = \"0x7784270 <x-coredata://1ADCDF30-EC80-4B40-8A9E-58BA0532D014/TSubUnitExercise/p2>\";\n    time = \"106.246\";\n    totalScore = 10;\n})";
        }
    );
    "14:Prepositions" =         (
                    {
            SubUnit = "\U2018By\U2019";
            SubUnitExercise = "Exercise 2";
            SubUnitExerciseProgress = "<SubUnitExerciseProgress: 0x77a9000> (entity: TSubUnitExerciseProgress; id: 0x778d910 <x-coredata://1ADCDF30-EC80-4B40-8A9E-58BA0532D014/TSubUnitExerciseProgress/p2> ; data: {\n    actualScore = 7;\n    editDate = \"2012-04-26 05:54:45 +0000\";\n    subUnitExercise = \"0x77dc1c0 <x-coredata://1ADCDF30-EC80-4B40-8A9E-58BA0532D014/TSubUnitExercise/p278>\";\n    time = \"63.06152\";\n    totalScore = 10;\n})";
        }
    );
    "2:Future" =         (
                    {
            SubUnit = "Present tense (\U2018I am doing\U2019 / \U2018I do\U2019) for the future";
            SubUnitExercise = "Exercise 1";
            SubUnitExerciseProgress = "<SubUnitExerciseProgress: 0x77762d0> (entity: TSubUnitExerciseProgress; id: 0x778d920 <x-coredata://1ADCDF30-EC80-4B40-8A9E-58BA0532D014/TSubUnitExerciseProgress/p3> ; data: {\n    actualScore = 0;\n    editDate = \"2012-04-26 07:22:23 +0000\";\n    subUnitExercise = \"0x81e6e70 <x-coredata://1ADCDF30-EC80-4B40-8A9E-58BA0532D014/TSubUnitExercise/p46>\";\n    time = \"113.5866\";\n    totalScore = 10;\n})";
        }
    );
} 
```

)

有谁知道如何在具有带有子字典的字典的 nsmutable 数组之上进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:40:49.440

**尝试这个 ：**

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"SubUnitExerciseProgress.data.actualScore"  
                                                           ascending:YES];

[initialArray sortUsingDescriptors:[NSArray arrayWithObjects:descriptor,nil]];
NSMutableArray* sortedArray = [initialArray mutableCopy]; 
```

# c# - 更改生成的单元测试文件的目录

> ID：10331669
> 
> 赞同：2
> 
> 时间：2012-04-26T10:33:47.740
> 
> 标签：c#, visual-studio, unit-testing, visual-studio-2008, mstest

在 Visual Studio 2008 Professional 中，当我为一个方法创建单元测试时（使用原生的 vs Studio 框架和向导），生成的测试文件存根保存在测试项目的根目录中。

当我稍后将测试文件移动到子目录时，我无法使用向导为同一类的其他方法创建更多测试存根（它将在根目录中创建一个新的空文件，然后静默失败）

如何更改此设置，以便测试项目使用与我的主项目相同的文件夹结构；所以如果一个类是例如在`project-root\model\xyz.cs`，相应的测试类是自动生成的`testproject-root\model\xyzTest.cs`？

* * *

编辑：

补充一下，这似乎是视觉工作室的一个未解决的错误。除了下面答案中描述的解决方法之外，另一种可能性是在移动相应的测试类文件后简单地重命名自动生成的测试类。然后Visual Studio至少不会静默失败，而是在生成另一个测试方法时在根文件夹中重新创建旧的测试类文件，然后可以将该测试方法复制粘贴到正确的文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:38:17.620

我刚刚确认了您的问题，当为我移动的文件添加更多测试时，我刚刚生成了文件的前 2 行。

我猜该向导只是不知道如何查看子文件夹以知道将其添加到哪个文件，但是在尝试生成第二个同名类时出错。（我猜如果您重命名任何测试文件但将它们留在根目录中也会有这个问题，但我没有测试这个想法）

因此，如果您想继续使用该向导，我认为无论如何都没有。您应该能够将其移至根目录，使用向导，然后将其移回右侧。这是我能想到的最佳选择。

我认为测试能力在 VS2010 中得到了很大的提高，我没有使用过，但也许已经为那个版本修复了它......

[这个答案](https://stackoverflow.com/a/4977722/356218)提供了一个解决方案，使用 3rd 方代码模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:35:52.017

移动或重命名文件夹时，您唯一需要做的就是从主项目中正确包含 dll、exe 或清单。

听起来您不仅希望它位于单独的文件夹中，而且还希望它位于单独的项目中？

将文件夹按您想要的方式排列后，右键单击测试项目的引用，然后单击“添加引用”。单击“浏览选项卡”，然后找到您的主项目，进入其 bin/Debug 文件夹并选择适当的 dll 或 exe。

这当然假设您可以首先编译您的主项目。要仅编译源项目，请在解决方案资源管理器中右键单击它，单击“构建”或“调试/启动新实例”。

这应该会奏效。我希望：p。

# javascript - 使用javascript隐藏框架集中的框架

> ID：10331672
> 
> 赞同：0
> 
> 时间：2012-04-26T10:33:56.960
> 
> 标签：javascript, html, frames

我的要求是有多个框架，每个框架边框都有一个图标，可以在单击图标时隐藏和显示框架。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:11:09.570

这是一个小小提琴，它做了一个非常基本的版本。希望足以让您走上正确的道路。[http://jsfiddle.net/bAsBe/](http://jsfiddle.net/bAsBe/)

基本上，您可以在按下切换按钮时简单地在每个帧上切换一个类，然后该类将隐藏或宽度设置为 0（取决于帧位置）

在示例中，您可以看到多个帧相互交互的位置稍微复杂一些，因为您需要调整另一个帧以使用由另一个被最小化的帧创建的可用空间。

但是，当您知道框架将在哪里以及如何访问它们时，您应该能够为您的界面设置条件。

# regex - Jmeter 正则表达式提取器，用于捕获代码中的动态值

> ID：10331673
> 
> 赞同：0
> 
> 时间：2012-04-26T10:33:58.287
> 
> 标签：regex, jmeter

这里我使用 Jmeter 2.6 来测试一个 .net 应用程序。通过正则表达式提取器提取动态值时，我无法继续并获得匹配计数=0。

我的表达是：

```
window.open('ConsumptionBatchSerial.aspx?Quantity='+ReturnQty+'&ItemCode='+ItemCode+'&Batch='+Batch+'&Serial='+Serial+'&StDetailsId='+StDetailsId+'','','width=810,height=350,left=100,top=150,resizable=1') 
```

我想从中提取`Itemcode,Quantity,Serial,Batch,StDetailsId`.

任何人都可以对这个概念有任何想法吗？如果您知道这种情况，请发布。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:59:53.170

如果您想捕获解析后的数据，这将显示在浏览器中，这样的事情应该可以工作。

`(??)Quantity=([^&]*)&ItemCode=([^&]+)&Batch=([^&]+)&Serial=([^&]+)&StDetailsID=([^,]+)`

如果该字符串是您想要匹配的确切字符串，那么这样的事情应该可以工作。

`(??)Quantity='\+([^\+]*)\+&ItemCode='\+([^\+]*)\+&Batch='\+([^\+]*)\+&Serial='\+([^\+]*)\+&StDetailsID=\+([^\+]+)`

（还不能在任何地方发表评论以要求澄清，抱歉）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T12:02:33.110

正则表达式格式以获取以下值

```
1\. Quantity
2\. Itemcode
3\. Batch
4\. Serial
5\. StDetailsId 
```

正则表达式

```
Quantity=(.+)&ItemCode=(.+)&Batch=(.+)&Serial=(.+)&StDetailsId=(.+)','', 
```

# vba - VBA - 为什么这会给我一个错误？

> ID：10331674
> 
> 赞同：1
> 
> 时间：2012-04-26T10:33:58.643
> 
> 标签：vba, excel

以下代码是从日志文件中删除重复行的子代码的开头，因此得名。但是，在测试了我到目前为止所拥有的东西之后，我无法理解为什么这会给我一个错误。这是代码：

```
Sub cleanUpLogFile()

Dim logFileStr As String

Dim newBook As Workbook
Dim fd1 As FileDialog

MsgBox "Select your log file.", vbInformation, "Important Info"
Set fd1 = Application.FileDialog(msoFileDialogFilePicker)
With fd1
    .AllowMultiSelect = False
    .Filters.Clear
    .Filters.Add "*.xl* Files", "*.xl*", 1
    'if user selects a file then
    If .Show Then
        'assign selection to variable
        logFileStr = fd1.SelectedItems.Item(1)
        Else 'display prompt and exit sub
            MsgBox "You didn't select your indexation file. Exiting...", _
                vbCritical, "Important Info"
            Exit Sub
    End If
End With

Set newBook = Workbooks.Open(logFileStr, 0)
newBook.Close (0)
Set newBook = Nothing

MsgBox "finished"

errHandler:
MsgBox "Encountered an error: " & Err.Number & " -> " & Err.Description, _
        vbExclamation, "Error! - from cleanUpLogFile() sub"
Err.Clear
Exit Sub
End Sub 
```

错误消息框也没有给我太多信息；`err.Number`显示为“0”，而相应的描述 from`err.Description`不存在。

有任何想法吗？

谢谢，QF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:47:02.367

您在 errHandler: 标签之前缺少 Exit Sub 语句。

VB 中的标签实际上只是代码中某个位置的书签，因此如果您希望函数在返回标签下方的代码之前退出，您需要告诉它这样做。

在您的情况下，即使没有错误， errHandler: 标签下的代码也会运行，并且输出确实是“没有错误”。

因此，将您的代码更改为：

```
... more code
Set newBook = Nothing

MsgBox "finished"
Exit Sub
errHandler:
MsgBox "Encountered an error: " & Err.Number & " -> " & Err.Description, _
        vbExclamation, "Error! - from cleanUpLogFile() sub"
Err.Clear
Exit Sub
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:49:48.723

您可以通过最初尝试运行有效的东西来进行故障排除。如果它没有以空的 With...End With 运行，那么错误就在外面。否则你会知道它在里面。然后在 With...End With 中一次添加一行，看看什么时候弹出错误，然后尝试修改该行。

希望这可以帮助。

# mysql - 选择多个标量值作为多行

> ID：10331675
> 
> 赞同：2
> 
> 时间：2012-04-26T10:33:58.747
> 
> 标签：mysql, sql

我需要一种很好的方法来选择一组值作为行。

这是我想做的一个例子：

```
mysql> select 1 as v union select 2;
+---+
| v |
+---+
| 1 |
| 2 |
+---+
2 rows in set (0.00 sec)

mysql> 
```

**有没有更好的方法来编写这样的查询？**

值列表在查询生成时是已知的。

# maven - 有没有办法在不使用 install:install file 命令的情况下将所有外部 .jar 包含到 maven 存储库中

> ID：10331676
> 
> 赞同：1
> 
> 时间：2012-04-26T10:34:04.620
> 
> 标签：maven, repository, m2e

在我的项目中，使用了很多 .jar 文件，并且它们不在 maven 存储库中（本地和 Web）。

使用安装命令将它们一一包含在存储库中的异常，是否有任何方法或插件可以将它们一次放入存储库中。

如果有，请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:06:57.643

正如 Kal 在评论中所说，使用脚本。这就是我们使用的 - 只需修改每个`set`语句中的值

```
set GROUP_ID=someNamespace
set ARTIFACT_ID=myartifact
set VERSION=1
set COMPONENT=%ARTIFACT_ID%-%VERSION%
set FILEPATH=D:\my.jar

call mvn install:install-file ^
 -DgroupId=%GROUP_ID% ^
 -DartifactId=%ARTIFACT_ID% ^
 -Dversion=%VERSION% ^
 -Dfile=%FILEPATH% ^
 -Dpackaging=jar ^
 -DgeneratePom=true

set GROUP_ID=someNamespace2
set ARTIFACT_ID=myartifact2
set VERSION=1
set COMPONENT=%ARTIFACT_ID%-%VERSION%
set FILEPATH=D:\my2.jar

call mvn install:install-file ^
 -DgroupId=%GROUP_ID% ^
 -DartifactId=%ARTIFACT_ID% ^
 -Dversion=%VERSION% ^
 -Dfile=%FILEPATH% ^
 -Dpackaging=jar ^
 -DgeneratePom=true 
```

# asp.net - Firefox 和 Chrome 中 ASP.Net(C#) 中的会话

> ID：10331678
> 
> 赞同：1
> 
> 时间：2012-04-26T10:34:14.240
> 
> 标签：asp.net, session, firefox, google-chrome, logout

我想问一下注销后会话丢失的问题：

我编写了代码，但它只能在 Internet Explorer 中运行，而不能在 Mozilla Firefox 或 Google Chrome 中运行。在这两种浏览器中，如果我单击后退按钮进行注销后，它将返回到用户的帐户。

注销页面代码（在页面加载时）-

```
FormsAuthentication.SignOut();
Session.Abandon();
Session["CustomerId"] = null;
FormsAuthentication.RedirectToLoginPage(); 
```

在每隔一页或母版页上-

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
if (Session["CustomerId"] == null)
{
    Response.Redirect("~/Login.aspx");
} 
```

在 web-config 文件中-

```
<authentication mode="Forms">
   <forms name="MyCookie" loginUrl="Login.aspx" protection="All" timeout="90"    slidingExpiration="true"></forms>
</authentication> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:58:01.697

如果你按下回车，即使用户退出，你仍然看到用户信息，那是因为你没有注意缓存浏览器，所以页面没有被浏览器缓存。

对于您不希望保留在浏览器缓存中的所有页面，您需要设置：

```
CurrentPage.Response.Cache.SetExpires(DateTime.UtcNow.AddYears(-4));
CurrentPage.Response.Cache.SetValidUntilExpires(false);
CurrentPage.Response.Cache.SetCacheability(HttpCacheability.NoCache);
CurrentPage.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
CurrentPage.Response.Cache.SetNoStore();
CurrentPage.Response.ExpiresAbsolute = DateTime.Now.Subtract(new TimeSpan(1, 0, 0, 0));
CurrentPage.Response.Expires = 0;
CurrentPage.Response.CacheControl = "no-cache";
CurrentPage.Response.AppendHeader("Pragma", "no-cache");
CurrentPage.Response.Cache.AppendCacheExtension("must-revalidate, proxy-revalidate, post-check=0, pre-check=0"); 
```

现在IE不保留数据的原因，另一个保留它们是因为每个浏览器选择工作的设置，或者你已经设置。这里的要点是，如果您想避免将此数据保存在浏览器缓存中，您必须拥有控制权，并且不要让浏览器使用默认设置。

此外，单独的 HttpCacheability.NoCache 可能对一个浏览器就足够了，但对所有浏览器来说还不够。还最好使用 SSL，因为此页面可能会在路上被代理缓存...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:27:38.510

您需要在 Page_init() 事件中检查用户会话。如果会话为空，则将用户重定向到登录页面。因此，如果您注销并尝试单击后退按钮，则系统会将用户重定向到不在该用户帐户上的登录页面。

这是您需要检查用户会话的事件，

```
 protected void Page_init(object sender, EventArgs e)
    {
        if (Session["User"] == null)
        {
            Response.Redirect("Login.aspx");
        }
    } 
```

希望这会帮助你。谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:47:24.027

您可以使用 ajax 或 iframe 保持会话活跃。
这是一个简单的例子：[使用 iframe 保持会话活跃](http://www.kad1r.com/article.aspx?articleId=303&Category=ASP.Net&title=Keep-session-alive-with-iframe-in-asp.net)

# r - 叠加图（由 plotLMER.fnc 生成）

> ID：10331684
> 
> 赞同：1
> 
> 时间：2012-04-26T10:05:38.307
> 
> 标签：r, ggplot2

我正在尝试为 2 个 lmer 生成的模型叠加图（表示嵌套所有其他条件的条件的 2 个级别），但 ggplot 返回一个我无法理解的错误。如果 ggplot2 不是正确使用的工具，有人可以建议一个替代方案来巧妙地处理范围差异（对于 ylimit），好吗？

```
> plot1 <- plotLMER.fnc(datPrH.lmer11, pred="L1", intr=list("Word.Order",     levels(dat$Word.Order), "end"), addlines=TRUE)
> plot2 <- plotLMER.fnc(datPrM.lmer11, pred="L1", intr=list("Word.Order", levels(dat$Word.Order), "end"), addlines=TRUE)
> ggplot(plot1 + plot2) 
```

错误：ggplot2 不知道如何处理数字类的数据

# asp.net-mvc - 数据存在但无法显示

> ID：10331689
> 
> 赞同：1
> 
> 时间：2012-04-26T10:34:51.610
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 JSON 函数来返回以下数据，这是我所期望的：

```
[{"ShowId":1,"Title":"The Forresters Axe","Date":"\/Date(1339714800000)\/","Time":{"Hours":19,"Minutes":0,"Seconds":0,"Milliseconds":0,"Ticks":684000000000,"Days":0,"TotalDays":0.79166666666666663,"TotalHours":19,"TotalMilliseconds":68400000,"TotalMinutes":1140,"TotalSeconds":68400}}] 
```

但是当我尝试在视图页面上显示标题时，我遇到了问题。这是查看页面代码：

```
<table> @foreach (var showList in Model) {<tr><td>@showList.Title</td></tr>}<.table> 
```

这是我一直在使用的 ActionResult，但是当我进入视图时，我无法获取要显示的数据。我使用上面的 JSON 函数来仔细检查我是否拥有正确的数据并且没有尝试调用不存在的东西。

```
enter/*-------------------------------------------------------
      BOOKING/CHECKAVAIL ACTIONRESULT CALLING CHECKAVAIL VIEW
        Select information from Run table where the id == ShowId

     ------------------------------------------------------*/
    public ActionResult CheckAvail(int id)
    {
        var showList = from r in db.Runs
                       join s in db.Shows on r.ShowId equals s.ShowId
                       where r.ShowId == id
                       select new
                     {
                         ShowId = r.ShowId,
                         Title = s.Title,
                         Date = r.Date,
                         Time = r.Time
                     };
        return View(showList);
    } 
```

我得到的错误是：

RuntimeBinderException 未被代码处理

“对象”不包含标题的定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:48:14.593

使用该表达式`new { ... }`，您正在创建一个基本上不支持将方法作为模型传递的[匿名类型。](http://msdn.microsoft.com/en-us/library/bb397696.aspx)`View`

有一些解决方法：

*   [ASP.NET MVC 中使用动态的匿名视图模型](http://www.gregshackles.com/2010/09/anonymous-view-models-in-asp-net-mvc-using-dynamics/)
*   [将匿名类型传递给 ASP.NET MVC 的视图](http://www.ienablemuch.com/2011/03/passing-anonymous-type-to-aspnet-mvcs.html)

但最简单的解决方案是创建一个视图模型来保存您的数据：

```
public class CheckAvailViewModel
{
    public int ShowId { get; set; }
    public string Title { get; set; }
    public DateTime Date { get; set; }
    public DateTime Time { get; set; }
} 
```

并从您的查询中返回：

```
var showList = from r in db.Runs
                     // ...
                     select new CheckAvailViewModel
                     {
                         ShowId = r.ShowId,
                         Title = s.Title,
                         Date = r.Date,
                         Time = r.Time
                     };
return View(showList.ToArray()); 
```

# ubuntu - ubuntu zfs 挂载需要延迟吗？

> ID：10331690
> 
> 赞同：0
> 
> 时间：2012-04-26T10:34:53.700
> 
> 标签：ubuntu, zfs, automount

我有一个来自 freenas 盒子的 ZFS 池。我从那里导出它并将其导入到 Ubuntu 11.10 盒子中。这已经安装了 ZFS 本机（Darik Horn 的 ZFS PPA），它工作正常（我认为）。Ubuntu 系统安装在一对镜像的 320gb 笔记本电脑驱动器上。

启动时，有时我会在启动时收到“等待硬盘警告”（该卷是另一个活动 zfs 卷的副本，所以我不介意在我播放时它是否被丢弃）。

登录后，zpool 状态显示我已损坏随机卷上的数据，并建议删除和重建。当只有一个驱动器显示错误时，它曾经进行过重新同步。

如果我导出卷然后导入 -f 它，那很好。没有数据损坏，卷安装正常。

使用 gsmartcontrol 显示卷中的所有驱动器都已通过。

我的 zpool 问题是硬盘即将死机的迹象吗？或者只是准备安装东西的时间。我可以在驱动器准备好之前延迟安装 zfs 吗？

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:23:26.867

忽略 SMART 状态。很少有驱动器准确报告 SMART。

如果 BIOS 报告延迟启动，并且 ZFS 报告校验和错误，那么磁盘确实坏了。

# events - 区分用户触发和代码触发的事件

> ID：10331691
> 
> 赞同：1
> 
> 时间：2012-04-26T10:34:58.687
> 
> 标签：events, javascript-events

我有一个包含视频的组件：`<div class="component"><video src="..." /></div>`.

现在我想通过两种方式管理播放的状态：

1.  侦听可以通过单击本机播放/暂停按钮来更改的播放状态并对其进行处理（更改组件布局，通知其他组件......）

2.  通过让我们说从外部手动触发播放`myComponent.playContent()`

**我不知道如何正确管理这个。**例如，当用户单击本机视频控件时，将`play`调度一个事件。当我手动调用`myComponent.playContent()`which 调用`domVideo.play()`时，`play`事件也会被调度，所以**如果我只是监听`play`事件，它会被混淆或调用两次等**。

**问题是这里混合了两种不同的东西。**

**首先**，可以通过用户单击本机控件来触发播放开始，在这种情况下，我想捕获事件并对其进行各种处理。这是典型的“冒泡”，自下而上的流程。

**其次**，*程序（通常是组件）* 希望以“自上而下”的方式触发播放，在这里我想区分触发的事件以避免将其视为用户创建的播放事件。

我多次遇到这个问题，例如 ExtJS 的选项卡面板（`tabchange`事件）中的选项卡更改事件，我不知道如何在基于事件的编程范例中解决这个问题。

**我正在寻找一个通用的解决方案或正确的方法**。它不仅仅是关于原生 DOM 事件。我有一个 `YT.Player`（YouTube 播放器）对象，它有自己的事件，具有相同的模型，我遇到了同样的问题。

编辑：一些技巧`setTimeout`和取消是可能的，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:23:47.987

我不确定 DOM 的细节，但让我告诉你它在 Flex / Flash Player 中是如何工作的，它也是客户端、基于事件的运行时 / 编程模型。

因此，让我们有一个**组件 C**（例如，您示例中的视频播放器）和一个**应用程序 A** - 只是包含您的组件的东西（可以是子应用程序、应用程序模块等；我们称之为*application*）。

组件的公共 API 是这样的：

```
component VideoPlayer
    function play()
    event playStateChange 
```

我将描述两种情况，一种没有 MVC 框架（“准系统”解决方案），另一种有 MVC 框架。

**1）没有任何MVC框架**

应用程序需要引用该组件并在某处调用类似这样的内容：

```
videoPlayer.addEventListener("playStateChange", function() {...}) 
```

如果它需要在 VideoPlayer 上开始播放，它只需调用

```
videoPlayer.play(); 
```

简单的。

（我不明白你在问题底部描述的问题，即为什么调用 play() 应该再次调度相同的事件 - 在 Flex 中，程序员需要明确地这样做，这可能是一个错误；当然如有必要，调度不同命名的事件可能是有意义的，但那是另一回事。）

**2) 使用 MVC 框架**

Flex 应用程序通常非常大，具有单独的屏幕、内容窗格、容器、组件等深度嵌套的层次结构，因此应用程序直接引用应用程序中的所有组件可能不切实际。

因此，MVC 框架（命名不正确，我们暂且不说……）通常提供一个中央事件总线，应用程序的不同部分可以通过该总线进行通信。因此，有了这个框架，应用程序中任何地方的任何代码都可以执行以下操作：

```
eventBus.dispatchEvent("globalPlayEvent") 
```

并且组件（VideoPlayer）在其实例化过程中会做这样的事情：

```
eventBus.addEventListener("globalPlayEvent", function() {
    play();
} 
```

相反方向的通信将是相似的 - 组件只会在一些已调度的全局事件/事件总线上调度“playStateChange”，任何感兴趣的人都可以处理它。在这个模型中，你不依赖于我认为好的事件冒泡。

这回答了你的问题了吗？

# asp.net - 自定义分页 asp.net

> ID：10331693
> 
> 赞同：1
> 
> 时间：2012-04-26T10:35:07.450
> 
> 标签：asp.net, c#-4.0

我想实现自定义分页，其中页码显示为 Prev 1 2 3 4 5...25 26 27 28 29 30 Next。

```
private void PopulatePager(int recordCount, int currentPage)
{
    double dblPageCount = (double)((decimal)recordCount / decimal.Parse(ddlPerPage.SelectedValue));
    int pageCount = (int)Math.Ceiling(dblPageCount);
    recdcnt = pageCount;
    List<ListItem> pages = new List<ListItem>();
    if (pageCount > 0)
    {
        ListItem lp = new ListItem("Previous", "1", currentPage > 1);
        lp.Attributes.Add("class", "pages previous");
        pages.Add(lp);
        //pages.Add(new ListItem("First", "1", currentPage > 1));
        for (int i = 1; i <= pageCount; i++)
        {
            // pages.Add(new ListItem(i.ToString(), i.ToString(), i != currentPage));
            ListItem li = new ListItem(i.ToString(), i.ToString(), i != currentPage);
            li.Attributes.Add("class", "pages");

            pages.Add(li);
        }
        ListItem ll = new ListItem("Next", pageCount.ToString(), currentPage < pageCount);
        ll.Attributes.Add("class", "pages next");
        pages.Add(ll);
        //pages.Add(new ListItem("Last", pageCount.ToString(), currentPage < pageCount));
    }
    rptPager.DataSource = pages;
    rptPager.DataBind();
} 
```

rptPager 是中继器。

这将输出显示为 Prev 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 Next 但我希望它显示为 Prev 1 2 3 4 5...25 26 27 28 29 30 下一个。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:12:35.813

编写逻辑以仅显示前 5 个页码，包括当前页和最后 5 个页码

```
 for (int i = 1; i <= pageCount; i++)
  {
      if ((i > currentPage - 5 && i <= currentPage) || (i > pageCount - 5))
      {
          // pages.Add(new ListItem(i.ToString(), i.ToString(), i != currentPage));
          ListItem li = new ListItem(i.ToString(), i.ToString(), i != currentPage);
          li.Attributes.Add("class", "pages");

          pages.Add(li);
      }
      else if (((ListItem)pages[pages.Count - 1]).Text != "...")
      {
          ListItem li = new ListItem("...",String.Empty);
          li.Attributes.Add("class", "pages");
          pages.Add(li);
      }
  } 
```

# android - 从手机内存中读取图像（无 SD）

> ID：10331694
> 
> 赞同：0
> 
> 时间：2012-04-26T10:35:07.023
> 
> 标签：android, image, gallery, sd-card

我目前正在努力解决一个我希望你帮我解决的问题......基本上我正在尝试以这种方式从手机的内部图库中获取一些图像

> 意图意图 = new Intent();
> 
> intent.setType("图片/*");
> 
> 意图.setAction（意图.ACTION_GET_CONTENT）；
> 
> startActivityForResult(Intent.createChooser(intent, "选择图片"),SELECT_IMAGE);

但是当我使用这个在 onActivityResult 方法中获取 Uri 时

> URI images_uri = data.getData();

数据为空（从 SD 卡中获取图像时不会发生这种情况）

我该如何解决？

此外，作为次要问题，我怎样才能获得超过 1 张图像？我读过有关使用 ACTION_SEND_MULTIPLE 的信息，但这打开了发送方法的选择，而不是从哪里获取图像的地方......

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:57:25.960

尝试这个

```
 public static final int GALLERY_CODE = 322;
    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Picture"),
            GALLERY_CODE);

         @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) { //Assinging on corresponding import
    super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == GALLERY_CODE && resultCode == RESULT_OK) {
        Uri selectedImageUri = data.getData();
        selectedImagePath = getPath(selectedImageUri);
        try {
            //add logic for coping file
        } catch (Exception e) {
            e.printStackTrace();
        }
       }

    }

    public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:45:40.617

好吧，在我的情况下，它实际上是一个错误的缓存列表（画廊显示的照片实际上并不存在，所以如果我选择它们，实际的 URI 原来是 nil）。

在调用 ACTION_GET_CONTENT 意图之前，我建议添加以下命令：

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

这将告诉画廊它应该刷新其数据。如果你这样做，小心在你的线程中放置一个短暂的睡眠（例如：

```
 Thread.sleep(1000); 
```

）。这应该允许刷新操作在实际打开之前完成。至少在我的手机上，这阻止了 Gallery 应用程序的短暂闪烁。

# sql - sql查询中的动态列

> ID：10331695
> 
> 赞同：3
> 
> 时间：2012-04-26T10:35:11.297
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

在某些应用程序中，我使用以下 sql 查询，

```
SELECT DATE, 
SUM( CASE WHEN project_id =  '6' THEN spent_time  ELSE 0 END ) project_1, 
SUM( CASE WHEN project_id =  '41' THEN spent_time  ELSE 0 END ) project_2, 
SUM( CASE WHEN project_id =  '14' THEN spent_time ELSE 0 END ) project_3
FROM tasks
WHERE user_id =80
GROUP BY DATE, project_id 
```

它返回以下输出

![在此处输入图像描述](../Images/c6be7c9a64bb36e89962f3c2edc270f4.png)

但在上面的 SQL 查询中，我使用了预定义的列。我正在寻找一个解决方案，其中我有动态列说我事先不知道项目 ID。

我还想要一个额外的列，显示每一行的 project_1、project_2、project_3 的总和。

因此，结果结构将是 DATE、PROJECT_1、PROJECT_2、PROJECT_3、SUM_OF_PROJECTS

我还可以获取该行不存在的数据吗？例如`2012-04-03`在下面的例子中。最好不要使用日历表

任何指针将不胜感激。

***其他细节：数据库-mysql、Rails(2.3.14)***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:54:15.327

我不确定您使用的是什么数据库引擎，但下面的示例使用 Microsoft SQL Server。我相信它可以很容易地适应其他引擎。

首先，我使用以下查询创建了一些设置数据：

```
create table tasks(
[id] int not null identity(1,1),
[DATE] smalldatetime not null,
project_id int not null,
spent_time int not null,
primary key ([id])
)
go
insert into tasks([date],project_id,spent_time)
select '2012-04-02',1,10
union all select '2012-04-02',1,5
union all select '2012-04-02',2,5
union all select '2012-04-03',1,8
union all select '2012-04-03',2,1
go 
```

正如上面评论中提到的，您需要动态生成 SQL 语句。我在变量@sql 中执行此操作，然后在最后执行它。这是我的解决方案：

```
declare @sql nvarchar(4000), @project_id nvarchar(10)
select @sql = 'select [date]'

declare c cursor for select distinct convert(nvarchar(10),project_id) as project_id from tasks order by project_id
open c
fetch c into @project_id
while @@FETCH_STATUS = 0
begin
    select @sql = @sql + ', sum(case when project_id = ' + @project_id + ' then spent_time else 0 end) as project_' + @project_id
    fetch c into @project_id
end
close c
deallocate c

select @sql = @sql + ', sum(spent_time) as sum_of_projects from tasks group by [date] order by [date]'
exec (@sql) 
```

正如我的测试数据所预期的那样，它会生成输出：

```
date        project_1  project_2
----        ---------  ---------
2012-04-02  15         5
2012-04-03  8          1 
```

希望这可以帮助！

**更新**

OP 已经表示希望避免使用游标，因此以下代码也可以在不使用游标的情况下工作（至少在 MS SQL Server 上）......

```
declare @sql nvarchar(4000), @project_id nvarchar(10)
select @sql = 'select [date]'

select @sql = @sql + ', sum(case when project_id = ' + project_id + ' then spent_time else 0 end) as project_' + project_id
from (select distinct CONVERT(nvarchar(10), project_id) as project_id from tasks) q

select @sql = @sql + ', sum(spent_time) as sum_of_projects from tasks group by [date] order by [date]'
exec (@sql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:52:52.543

您需要编写写入 SQL 的代码。没有办法让单个静态 SQL 查询返回动态列数。只有通过动态构建查询本身，您才能做到这一点。

您的示例代码很好。对于固定数量的项目。

您甚至可以将“6”、“41”和“14”作为参数，这意味着您的查询将始终返回三个项目，但每次它们可能是不同的项目。

但是要拥有第四个项目，您需要更改查询。

您可以编写代码以动态进行更改（动态 SQL），或者一次计算出您需要的最多列，然后忍受该限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:45:22.457

您可以尝试使用枢轴。查看[http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)以获取示例

# java - 使用 JRI 在 Java 中调用 R 的 sqldf 包

> ID：10331697
> 
> 赞同：1
> 
> 时间：2012-04-26T10:35:20.093
> 
> 标签：java, r, jri, sqldf

我已经使用 JRI 开发了 Java 代码，用于在 Java 上执行 R 代码。现在，我遇到了一个问题（在数据框的列中提取不同的值），我必须使用 R 的 sqldf 包并尝试在我的 Java 代码中使用它的功能。这是示例代码（橙色是默认情况下已经存在于 R 中的数据集）：

```
public class RCode2 {
    public static JRIEngine re;
    private static  org.rosuda.REngine.REXP rexp;

    public RCode2()
    {
        try {
            re = new JRIEngine(new String [] {"--vanilla"});
        } catch (REngineException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
        System.out.println("Rengine created, waiting for R");               
    }
    public static void main(String[] args) {
        RCode2 rCode2= new RCode2();
        rCode2.testSqldf(); 
        re.close();
    }
    public void testSqldf(){
        rexp=re.parseAndEval("library(sqldf,lib.loc=\"C:/Program Files/R/R-"+"2.15.0/library\")\n");
        System.out.println(rexp.isNull());
        rexp=re.parseAndEval("dframe<-sqldf(\"select * from Orange\")");
        System.out.println(rexp.isNull());
    }
} 
```

上述代码的输出是：

```
Rengine created, waiting for R
true
true 
```

这意味着“dframe”不包含任何内容。但是当我尝试在 R 上运行相同的 sqldf func: sqldf("select * from Orange") 时，它给了我 35 行。如何在 java 中使用 sqldf 函数以获得想要的结果？

我的环境变量设置如下：

```
R_HOME=C:\Program Files\R\R-2.15.0
R_LIBS=C:\Program Files\R\R-2.15.0\library
R_LIBS_USER=C:\Program Files\R\R-2.15.0\library
Path=C:\Program Files\R\R-2.15.0\bin\i386;C:\Program Files\R\R-2.15.0\library\rJava\jri 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:53:51.383

您发布的代码甚至无法编译。清理后它工作得很好：

```
C:\Program Files\R\R-2.15\library\rJava\jri>run RCode2
Rengine created, waiting for R
org.rosuda.REngine.REXPString@10d448[14]
org.rosuda.REngine.REXPGenericVector@1bf216a+[3]named 
```

如果您的代码有问题，您应该确保从 R 控制台提供 I/O，这样您才能真正看到由代码引起的错误（请参阅示例中的 TextCondole 类）。

最后，stats-rosuda-devel 邮件列表是询问 rJava/JRI 的地方。

编码：

```
import org.rosuda.REngine.JRI.*;
import org.rosuda.REngine.*;

public class RCode2 {
    public static JRIEngine re;
    private static  org.rosuda.REngine.REXP rexp;

    public RCode2()
    {
        try {
            re = new JRIEngine(new String [] {"--vanilla"});
        } catch (REngineException e) {
            e.printStackTrace();
        }
        System.out.println("Rengine created, waiting for R");               
    }
    public static void main(String[] args) {
        RCode2 rCode2= new RCode2();
        rCode2.testSqldf(); 
        re.close();
    }
    public void testSqldf(){
        try {
            rexp = re.parseAndEval("library(sqldf)");
            System.out.println(rexp);
            rexp = re.parseAndEval("dframe<-sqldf(\"select * from Orange\")");
            System.out.println(rexp);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# javascript - 如何在 HTML 输入文本中正确显示引号

> ID：10331698
> 
> 赞同：0
> 
> 时间：2012-04-26T10:35:20.993
> 
> 标签：javascript, escaping

我需要`value='dummy'`在 input中显示一个字符串`type=text`。哪种方法是正确的？

如果我使用`&lt;input type=text value='+escape(str)+"'&gt;` 我得到`value%3D%27dummy%27`。如果我不逃避，那么在第一次引用之后我什么也看不到。我想以正确的方式查看字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:37:34.533

在这种情况下你需要使用 unescape，试试

```
'<input type="text" value="'+unescape(str)+'">' 
```

[http://www.w3schools.com/jsref/jsref_unescape.asp](http://www.w3schools.com/jsref/jsref_unescape.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:44:44.593

我建议您不要使用字符串来定义值。相反，选择 DOM 元素并设置其值。

```
// Provided you select your input in the "input" variable
input.value = str 
```

这样，您不必为转义/取消转义而烦恼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T02:52:20.640

如果您的值被单引号包围，那么：

```
"<input type='text' value='"+"John's".replace(/'/igm,"&apos;")+"' />"; 
```

如果您的值被双引号括起来，那么：

```
'<input type="text" value="'+'"one two"'.replace(/"/igm,"&quot;")+'" />'; 
```

如果您不确定：

```
'<input type="text" value="'+'"one two Jon\'s"'.replace(/"/igm,"&quot;").
   replace(/'/igm,"&apos;")+'" />'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:37:40.460

```
 <input type='text' value="value='dummy'">   </input> 
```

编辑：抱歉，我意识到这不是您想要的，请参阅**gillesc**答案

# android - getprotobyname 错误 iptables

> ID：10331699
> 
> 赞同：4
> 
> 时间：2012-04-26T10:35:21.123
> 
> 标签：android

我在有根设备上安装了支持 iptables 的 android。

我似乎得到了这个错误，有人知道为什么吗？

```
iptables -A INPUT -p tcp -i eth0 --dport 8000 -m state --state NEW -j ACCEPT 
```

```
FIX ME! implement getprotobyname() bionic/libc/bionic/stubs.c:378 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T20:58:46.497

您可以键入 6 而不是 tcp。

**iptables -A INPUT -p 6**（而不是 iptables -A INPUT -p tcp ）

[http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xml](http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xml)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-22T15:55:57.680

Android 使用 Bionic libc，这是一个非常小的 libc，缺少很多东西。该错误消息表示`getprotobyname()`未在 Bionic libc 中实现。`iptables`似乎在触发此错误时无论如何都会运行该命令，但我的猜测是它忽略了该`-p tcp`部分并只是为所有协议设置规则。

幸运的是，该功能对于使用 iptables 并不是必不可少的。`getprotobyname()`只是将协议名称（如 tcp）转换为数字（tcp == 6）。你可以在这里找到这些数字：[http ://www.iana.org/assignments/protocol-numbers/protocol-numbers.xml](http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xml)

请改用协议号`-p 6`来消除错误消息：

`iptables -A INPUT -p 6 -i eth0 --dport 8000 -m state --state NEW -j ACCEPT`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:30:36.190

On some devices this may be just a warning but the rule will be OK. Check that the rule appears using iptables -L INPUT -nv and then try it.

# ios - 从 gklocalplayer 获取信息（电子邮件昵称）

> ID：10331704
> 
> 赞同：0
> 
> 时间：2012-04-26T10:35:27.753
> 
> 标签：ios, iphone, gamekit

我正在构建一个游戏，其中我使用 Apple 的服务结合我自己的服务器，我想获取本地用户的电子邮件信息和昵称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:53:12.797

昵称（别名）可以通过使用获得

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer]; 
```

接着

```
NSSTring *userName = [localPlayer alias]; 
```

就是这样，我不确定您是否应该在未经他们同意的情况下获取用户的电子邮件并将其缓存在您的服务器上，我什至不确定苹果是否会发出用户电子邮件。

我会这样做的唯一方法是使用警报向用户询问电子邮件！

# asp.net - 如何修改 ASP.NET MEmbership 存储过程

> ID：10331705
> 
> 赞同：0
> 
> 时间：2012-04-26T10:35:39.310
> 
> 标签：asp.net

我在我的 web 应用程序中使用了 ASP.NET 成员资格，并且我使用 GetAllUsers 方法来列出用户，但是此方法返回按用户名排序的列表我想通过 CrateDate 订购它我为我的 sql 中的存储过程提供资金，但我不知道如何修改或编辑它:(这是我的 GetAllUsers 存储过程的代码：

```
 USE [MoftakiDB]
GO
/****** Object:  StoredProcedure [dbo].[aspnet_Membership_GetAllUsers]    Script Date: 04/26/2012 14:24:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO
ALTER PROCEDURE [dbo].[aspnet_Membership_GetAllUsers]
    @ApplicationName       nvarchar(256),
    @PageIndex             int,
    @PageSize              int
AS
BEGIN
    DECLARE @ApplicationId uniqueidentifier
    SELECT  @ApplicationId = NULL
    SELECT  @ApplicationId = ApplicationId FROM dbo.aspnet_Applications WHERE LOWER(@ApplicationName) = LoweredApplicationName
    IF (@ApplicationId IS NULL)
        RETURN 0

    -- Set the page bounds
    DECLARE @PageLowerBound int
    DECLARE @PageUpperBound int
    DECLARE @TotalRecords   int
    SET @PageLowerBound = @PageSize * @PageIndex
    SET @PageUpperBound = @PageSize - 1 + @PageLowerBound

    -- Create a temp table TO store the select results
    CREATE TABLE #PageIndexForUsers
    (
        IndexId int IDENTITY (0, 1) NOT NULL,
        UserId uniqueidentifier
    )

    -- Insert into our temp table
    INSERT INTO #PageIndexForUsers (UserId)
    SELECT u.UserId
    FROM   dbo.aspnet_Membership m, dbo.aspnet_Users u
    WHERE  u.ApplicationId = @ApplicationId AND u.UserId = m.UserId
    ORDER BY u.UserName

    SELECT @TotalRecords = @@ROWCOUNT

    SELECT u.UserName, m.Email, m.PasswordQuestion, m.Comment, m.IsApproved,
            m.CreateDate,
            m.LastLoginDate,
            u.LastActivityDate,
            m.LastPasswordChangedDate,
            u.UserId, m.IsLockedOut,
            m.LastLockoutDate
    FROM   dbo.aspnet_Membership m, dbo.aspnet_Users u, #PageIndexForUsers p
    WHERE  u.UserId = p.UserId AND u.UserId = m.UserId AND
           p.IndexId >= @PageLowerBound AND p.IndexId <= @PageUpperBound
    ORDER BY u.UserName
    RETURN @TotalRecords
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:38:32.340

这是一个普通的存储过程，因此您可以`ALTER PROCEDURE`像使用任何其他 SP 一样对其进行修改。

但是我建议不要这样做。该 SP 是会员提供者的一部分，您不知道代码所做的假设。更改排序可能会破坏会员系统的某些关键部分。

最好获取所有用户并使用 linq`OrderBy`运算符在内存中重新排序返回的序列。

```
var users = Membership.GetAllUsers().Cast<MembershipUser>()
            .OrderBy(mu => mu.CreationDate); 
```

强制转换是必需的，因为集合 ( `MembershipUserCollection`) 仅实现非泛型`IEnumerable`接口。

# spring - Spring Security：在后台任务中调用@PreAuthorize 保护的方法的正确方法是什么？

> ID：10331707
> 
> 赞同：8
> 
> 时间：2012-04-26T10:35:52.887
> 
> 标签：spring, spring-security

我有一个使用@PreAuthorize 保护的方法

```
@PreAuthorize("hasRole('ROLE_ADMIN') and (#action.userId != principal.id)")
public void execute(EditAction action) 
```

现在我需要从后台任务中调用此方法。如果我只是运行此代码 - 我会捕获一个异常：

> AuthenticationCredentialsNotFoundException：在 SecurityContext 中找不到 Authentication 对象

似乎，我需要将所需的身份验证设置为 SecurityContext。我可以：

1.  为后台任务编写一些自定义 AuthenticationToken。
2.  将 UsernamePasswordAuthenticationToken 与假用户一起使用。
3.  不要在后台任务中使用安全方法。
4.  还有其他建议吗？

什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:13:56.893

您可以在当前线程和会话中自己注册一个身份验证令牌（如果在 Web 应用程序中使用）：

```
SecurityContextHolder.getContext().setAuthentication(token);
session.put(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, SecurityContextHolder.getContext()); 
```

只要您添加适当的角色，您就可以为此使用标准的 UsernamePasswordAuthenticationToken。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-25T15:01:11.827

在这种情况下，手动解决方法是一个选项：

(1) 如果这是一项独立的工作，

在调用安全方法之前，创建一个 Authentication 对象并将其设置为安全上下文。在安全方法执行完成后，从安全上下文中删除 Authentication 对象。

```
public final class AuthenticationUtil {

//Ensures that this class cannot be instantiated
private AuthenticationUtil() {
}

public static void clearAuthentication() {
    SecurityContextHolder.getContext().setAuthentication(null);
}

public static void configureAuthentication(String role) {
    Collection<GrantedAuthority> authorities = AuthorityUtils.createAuthorityList(role);
    Authentication authentication = new UsernamePasswordAuthenticationToken(
            "user",
            role,
            authorities
    );
    SecurityContextHolder.getContext().setAuthentication(authentication);
} 
```

所以它看起来像

```
AuthenticationUtil.configureAuthentication(role);
// Call to the secured method 
AuthenticationUtil.clearAuthentication(); 
```

(2) 对于 web 应用，我们不能将 authentication 对象设为 null，不要调用

```
AuthenticationUtil.configureAuthentication(role);
// call to the secured method 
```

# css - 显示部分文本的下拉列表

> ID：10331708
> 
> 赞同：0
> 
> 时间：2012-04-26T10:35:53.997
> 
> 标签：css, internet-explorer-9

我在 IE9 中的下拉列表显示了部分文本。例如，有一个名为“Hello World”的选择。但是当我选择它时，它显示“你好”。

我尝试禁用 css，我发现这个 css 导致了问题。

.ui-widget { font-family: Verdana; 字体大小：1.1em；} .ui-widget 输入，.ui-widget 选择，.ui-widget textarea，.ui-widget 按钮 { font-family: Verdana; 字体大小：1em；}

当我禁用此 font-family : Verdana 或减小字体大小时，它会显示。我无法更改核心 css 文件，因为它可能会影响其他一些部分。有什么好的建议可以让我破解吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:39:38.637

在我看来，您在下拉列表中设置了明确的 CSS 宽度。为您的 Web 应用程序创建一个新的 CSS 文件，并向其中添加以下内容，以允许下拉菜单展开以适合其中的文本；

```
.ui-widget select {width: auto !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:40:38.557

将类添加到特定控件并指定重要标记以确保它覆盖所有其他 css 设置。

IE

```
.dropDownFont
{
    font-size: 11px !importnant;
} 
```

或者您可以使用选择选择器将其应用于所有选择项：

```
select
{
    font-size: 11px !importnant;
} 
```

# ruby - javascript 事件 - watir-webdriver chromedriver 不工作？

> ID：10331711
> 
> 赞同：2
> 
> 时间：2012-04-26T10:36:11.000
> 
> 标签：ruby, watir, watir-webdriver, selenium-chromedriver

我一直在尝试使用 watir-webdriver 测试 Javascript 事件，这在 Firefox 和 IE 中似乎都可以正常工作，但是我在使用 Chrome 时遇到了问题。

```
browser.span(:class, 'over').fire_event "onmouseover" 
```

上面的行似乎导致脚本中断。我正在使用最新的 chrome webdriver (19.0.1068.0)，并且我的 gem 是最新的。

chrome 日志文件显示：脚本执行失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:50:49.557

看起来这样有效：

```
browser.span(:class, 'over').hover 
```

# c# - 将已排序数组快速就地分区为两个已排序子数组

> ID：10331715
> 
> 赞同：6
> 
> 时间：2012-04-26T10:37:01.703
> 
> 标签：c#, algorithm

*编辑 - 我删除了所有不必要的上下文解释 - 太罗嗦，最终与问题无关。总之，我在构建平衡 KD 树的过程中对坐标数组进行了分区（更多信息[请参见维基百科文章的构造部分](http://en.wikipedia.org/wiki/K-d_tree#Construction)。我实际上有 n 个项目的 k 个并行数组，每个项目都必须通过相同的比较进行分区）*

这不是家庭作业——我写这个问题的目的是为了确保传达所有的细微差别。

给定排序数组：

```
 int[] ints =  { 0, 1, 2, 3, 4, 5, 6 };
 //this one is important - my current solution fails on this
 int[] ints2 = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 }; 
```

***请注意，由于一位同事的澄清，这些数组的所有保证`element[n]`都是小于或等于`element[n+1]`.***

对它们的成功操作会将它们分成两个子数组`L`和`R`（如下所示）：

```
/*ints == */  { 1, 3, 5, 0, 2, 4, 6 }
              /*|> L <|  |>   R  <|*/

/*ints2 == */ { 1, 3, 5, 7, 9, 0, 2, 4, 6, 8 }
              /*|>    L    <|  |>    R    <|*/ 
```

`L`包含奇数和`R`偶数，同时保留这些子数组中这些元素的原始排序顺序。

理想情况下，该函数不会**对**元素进行重新排序（已经提前执行了冗长的排序操作）并且它不会使用临时数组。我相信这意味着我正在寻找 O(N) 复杂性和 O(1) 内存。

该函数可以提供每个子数组的开始和结束元素 - 即调用者可以提前知道有多少项目将落在左侧/右侧（可能通过提前扫描数组的奇数/偶数）。 ***在现实中编辑***它就像一个数组一样开始；所以在*没有*这些值的情况下可以工作的解决方案是好的，因为否则如果需要初始通过，完整的解决方案实际上最多只能是 O(2n) 复杂度。

这是我目前的尝试所在 - 我已经更新了它并从原始帖子中评论了它。

```
public void DivideSubArray(int[] array, int leftStart, int leftCount, 
  int rightStart, int rightCount)
{
  int currentLeft = leftStart, currentRight = rightStart;
  int leftCounter = leftCount;
  int temp;
  int readahead;
  while (leftCounter != 0) {
    if ((array[currentLeft] % 2) == 0)
    {
      //remember the element we swap out
      temp = array[currentRight];
      //Set as next item on the right. We know this is the next lowest-sorted 
      //right-hand item because we are iterating through an already-sorted array
      array[currentRight++] = array[currentLeft];
      // * read ahead to see if there are any further elements to be placed
      // * on the left - move them back one by one till there are no more.
      readahead = currentLeft + 1;
      while ((array[readahead] % 2) != 0)
      {
        array[currentLeft++] = array[readahead++];
        leftCounter--;
      }
      //Now write the swapped-out item in, but don't increment our currentLeft.  
      //The next loop will check if the item is in the correct place.
      array[currentLeft] = temp;
    }
    else //this item is already in the correct place
    {
      currentLeft++;
      leftCounter--;
    }
  }
} 
```

当调用如下：

```
int numOdd = ints.Count(i => (i % 2) == 1);
DivideSubArray(ints, 0, numOdd, numOdd, ints.Length - numOdd); 
```

`ints`它为（和许多其他数组）生成预期的数组，但不是`ints2`：

```
{ 1, 5, 3, 7, 9, 0, 2, 6, 4, 8 } 
```

所以它正确分区 - 但交换`3,5`和`6,4`. 我明白***为什么***：因为在第一个循环`5`中被交换到左边，然后`2`被传播，因为算法说这`5`是奇怪的并且应该保留。我写了一个可以修复它的决策树，但是在遵循它几个循环之后，它推断出解决方案是递归的。

我正在努力了解如何在不在子数组中运行更多排序操作或创建临时列表/数组作为工作区的情况下解决这个问题。当然，虽然排序可能会增加复杂性，但会保留内存需求；如果事实证明它是最快的解决方案，那么使用它是有意义的。

您可以在我的回答下看到我当前最快（在运行时）和最佳内存解决方案。作为衡量标准 - 上述尝试不仅会产生不正确的结果，而且需要的时间是我答案中代码的 3 倍。

我*觉得*必须有一种简单的方法来利用单个“备用”变量来交换项目 - 我只是看不到它 - 我希望 SO 集体大脑会:)

当然，如果答案是“不”，那就这样吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:27:26.080

我认为您可以通过以下方式使您的任务更容易：首先修改数组，首先将奇数按升序写入数组的开头，然后将偶数按降序写入最后。对于您的示例 {0,1,...6}，这看起来像 {1,3,5,6,4,2,0}。在你这样做之后，再做一次线性传递来反转数组的第二部分（这非常简单直接）。

为什么我认为这应该更容易？好吧，因为您在第一步中应该做的就是常规 qsort 算法会做的事情（使用有点陌生的比较运算符）。您可以搜索互联网以查看 qsort 分区是如何完成的（例如[这里](https://stackoverflow.com/questions/2095153/quicksort-not-sorting-correctly)有一个示例）。我真的相信，如果您在这两个步骤上解决问题，那么实施解决方案对您来说会更容易。另请注意，整体复杂性没有改变。

希望这会帮助你。

编辑：这是我相信你可以做我建议的第一部分的方法：

```
public void DivideSubArray(int[] array, int leftStart, 
              int leftCount, int rightStart, int rightCount)
{
    int currentRight = rightStart + rightCount - 1;

    int current = leftStart;
    while (current < currentRight) {
        if ((array[current] % 2) == 0)
        {
            int temp = array[current];
            array[current] = array[currentRight];
            array[currentRight] = temp;
            currentRight--;
        } else {
            current++;
        }
    } 
} 
```

我没有提供反转偶数部分的代码，因为我相信它非常简单，而且我还想强调这种方法在多大程度上简化了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:08:59.243

我设法找到了一个不使用临时数组的解决方案——对于大 N 来说速度非常慢；我什至不会发布它的代码，那太糟糕了！

**编辑 - 这是对我原来的解决方案的改进。复杂性在技术上是 O(2n)（因为 List.CopyTo 方法使用 Array.Copy，根据框架文档，它是 O(n)）并且内存是 O(n)。**

是的，该解决方案只是采用数组并即时进行拆分，而不是提前依赖奇数/偶数拆分的知识。这意味着（当回归到我的实际代码时）不需要初始通过 - 所以它是可取的。

这个解决方案很简单：它扫描数组，将赔率移回数组的开头（或者如果它们已经在正确的位置，则将它们留在原处）并将偶数添加到列表中。当循环完成时，列表被复制到数组的其余部分。它以牺牲内存为代价满足了我的复杂性要求——最坏的情况是 O(n)——并且对我已经使用的代码有很大的改进（它比两个列表的解决方案快两倍）。它也不需要初始通过即可获得奇数/偶数拆分。

```
public void DivideSubArray(int[] array)
{       
    int currentOdd=0;
    List<int> even = new List<int>(array.Length / 2);
    for (int i = 0; i < array.Length; i++)
    {
        if ((array[i] % 2) != 0)
        {
            even.Add(array[i]);
        }
        else
        {
            if (currentOdd != i)
                array[currentOdd++] = array[i];
            else
                currentOdd++;
        }
    }
    even.CopyTo(array, currentOdd);
} 
```

请注意列表的初始容量 - 正如 Mooing Duck 在下面的评论中提到的那样，我可以通过利用一些概率并选择稍高的值来进一步改进（假设平均会观察到大致均匀的分裂）。

也就是说，该算法在偶数拆分时执行最慢 - 如果有更多奇数项目，那么它只是一堆交换。如果有更多的偶数，是的，`Add`需要更多的操作，但它只会是一个 List 调整大小会影响性能。

我最后一次尝试是看看我是否能实现 izomorphius 建议的 - 以正确的顺序建立赔率，并以相反的顺序或任何顺序建立赔率，而无需额外的数组。如果这是可能的，那么该解决方案将是 O(1) 内存，但 O(n + (排序复杂度)) - 如果它的性能在实践中甚至是上述解决方案的一半，我可能会采用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:46:45.240

我不认为有任何“直接”的方式来划分列表而没有一端或另一端被打乱，但仍然可以有一个线性时间常数空间解决方案。izomorphius 提供的分区方法将导致右侧以相反的顺序结束（在线性时间内很容易纠正），而另一端以某种可预测的方式加扰，来自右侧的那些元素混合在一起，以相反的顺序，与来自左侧的那些。可以很容易地在恒定时间内确定给定元素是否来自右侧（只需将其与左侧的最后一项进行比较），然后可以轻松地在线性时间内反转已从右侧移动的元素的顺序右侧到左侧。

一旦这样做了，就会留下一个分区问题，这与原来的非常相似，但只有一半大小；唯一的区别是分割标准是基于节点的值是大于还是小于“原始”最后一个元素，而不是它是偶数还是奇数。因此，人们基本上可以将原始算法应用于较小的数据集。由于可以预先确定拆分的哪一侧将有更多项目，因此可以放置拆分，以便剩余的一侧不超过原始大小的一半。最终结果是，对大小为 2N 的数组进行分区所花费的时间是对大小为 N 的数组进行分区的时间的 O(1) 倍。由于单元素数组可以在恒定时间内完成（显然可以），这意味着*将由两个任意混合的排序数据运行组成的任意大小的数组划分为两个不相交的排序数据运行，可以使用常数空间在线性时间内完成*。

顺便说一句，虽然整数无关紧要，但需要注意的是，上述算法依赖于比较两个元素并知道第一个元素属于第二个元素的左侧还是右侧的能力。因此它不能用作稳定排序算法的基础。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T17:27:30.827

我可以在这个线程上尝试一下吗？我可以看到你在说 C#。我不懂语言，但我认为这对这项任务并不重要。

问题描述中缺少一些东西 - 排序数组的来源。可能我应该发表评论要求澄清，但我决定去写一个涵盖我能想到的所有可能性的答案。希望这样的答案将来能为更多的人服务。

基本上，任务将我们放在一个盒子里：“你有一个数组，现在将它拆分到位”。但是，我想稍微解释一下这个数组的起源：

*   **案例 1：**从某处读取数组并在代码中排序（内存中）。如果是这种情况，将偶数与赔率分开有一个优雅的解决方案，这不会产生任何开销：
    1.  确定奇数和偶数（通过单次遍历数组`O(n)`）。
    2.  确定数组中的最大和最小数字。让我们打电话给他们`MAXM`和`MINM`。这可以在第一遍中完成以确定偶数和奇数。
    3.  再次通过数组添加`MAXM - MINM + 1`每个奇数。目标是确保所有奇数都大于偶数。这在时间上是线性的`O(n)`
    4.  使用 kth_element 算法拆分数组（基本上是快速排序关键分离的单遍）。利用您已经知道每个赔率有多少并且所有赔率都大于所有赔率这一事实，将偶数与奇数分开。该算法以线性时间运行`O(n)`，但遗憾的是我只有[C++ 库实现](http://www.cplusplus.com/reference/algorithm/nth_element/)的参考（没有 C#）。
    5.  遍历奇数对应的所有数组槽，并`MAXM - MINM + 1`从每个数中减去，得到原始奇数。这在时间上也是线性的`O(n)`
    6.  最后分别对偶数和赔率部分进行排序。这不会增加整体排序的复杂性，但您会将 to 部分彼此分开。
*   **案例 2：**您读取已经从某个持久存储中排序的数组，例如硬盘上的文件，并提前知道奇数和偶数的数量。
    1.  在这种情况下，您只需要在输入数字的数组中放置：一个用于下一个跟随偶数，一个用于下一个跟随奇数。这个解决方案应该是显而易见的，它根本不会影响性能。
*   **情况 3：**您读取了已经从某个持久存储中排序的数组，例如硬盘上的文件，但事先不知道奇数和偶数的数量。
    1.  从数组的开头开始填充偶数，从数组的末尾开始填充赔率。这样，最后两个序列将在中间相遇。
    2.  因此，您将把偶数从赔率中拆分出来，但奇数将按降序排列，而不是增加。您只需对奇数部分（也是线性的）进行就地反转，您就拥有了所需的数组。

希望至少有一个所描述的场景适合您，并且您将能够使用其中的想法解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T18:54:30.447

我认为，可能存在 O(n) 时间和 O(1) 空间算法。但它可能太复杂了，我们无法理解。

我将通过以下方式说服您：

1.  向您展示原始问题的一个特例，我们称之为 A。
2.  考虑问题 A 的反面，我们称其为问题 B。并证明如果我们得到其中任何一个的 O(n) 时间和 O(1) 空间解，那么我们可以修改它来解决另一个问题。
3.  我将向您展示问题 B 可以在 O(n) 时间和 O(1) 空间内解决，但解决方案非常复杂，需要大量数学运算。

所以这意味着，您的问题不太可能得到简单的解决方案，否则我们可以轻松解决问题 B。

## 1.考虑一个特殊情况：

令 A[] = {1,2,3,4,5,6,7,8}，从 1 到 2n，在本例中 n = 4。所以你想把它改成{1,3,5,7,2,4,6,8}，对吧？我们称之为问题 A。一般来说，这意味着您有一个大小为 2n 的数组 A，从 A[1] 到 A[2n]，您想将其重新排列为 A[1],A[3],A[ 5]...,A[2n-1],A[2],A[4],A[6],A[2n]。这是您的问题的一个特例。如果你找到了问题的解决方案，那么问题 A 就很容易解决。

## 2.问题A的反面。

让我们考虑一个相关的问题。令 B = {1,2,3,4,5,6,7,8}，我们想将其更改为 {1,5,2,6,3,7,4,8}。这就像你有一副纸牌，你想做一个完美的洗牌，把它们分成两等份，然后交替合并。所以一般来说，你有一个大小为 2n 的数组 B，从 B[1] 到 B[2n]。您想将其重新设置为 B[1],B[n+1],B[2],B[n+2],....B[n],B[2n]。

然后你就会意识到问题A和问题B是逆运算。也就是说，对于一个大小为 2n 的数组，如果先做 B 操作，再做 A 操作，就会变成原来的数组，同样先做 B 再做 A。

如果你对置换有一定的了解，你就会知道，如果我们得到一个 A 的算法，那么我们可以改变它，使它适用于 B。如果你不熟悉这个，我可以稍后再详细说明。

## 3.问题B不容易解决。

问题 B 是否存在 O(n) 时间和 O(1) 空间算法。确实存在，您可以查看[Computing the Cycles in the Perfect Shuffle Permutation](http://webhome.cs.uvic.ca/~jellis/Publications/shuffle.ps)。这是一篇 12 页的论文，这意味着你不太可能在面试中提出这个解决方案。我读过它，它确实需要大量的数论数学。这更像是一个理论上的解决方案。

## 结论：

**似乎没有一个简单的（这意味着不需要 10 页纸）O(n) 时间 O(1) 空间解决您的问题，即使对于问题 A 中的特殊情况也是如此。**否则我们可以将其修改为解决问题 B。我不确定您的广义问题是否有 O(n) 时间 O(1) 空间解决方案。

如果你真的对这个问题感兴趣。你可以看看 Knuth 的 The Art of Computer Programming。有一章讨论原位置换。

理解我的想法可能并不容易，所以如果您有任何问题，请发表评论。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T17:33:26.940

```
// stable_partition.cpp
// example general inplace stable partition.

#include <algorithm>
#include <functional>
#include <iterator>
#include <iostream>
#include <vector>

template<typename Fwd, typename Pred>
  Fwd
  inplace_stable_partition(Fwd first, Fwd last, Pred pred)
  {
    ptrdiff_t nmemb = std::distance(first, last);

    if (nmemb == 1)
      return pred(*first) ? last : first;
    if (nmemb != 0)
      {
        Fwd split = first;
        std::advance(split, nmemb/2);

        first = inplace_stable_partition(first, split, pred);
        last = inplace_stable_partition(split, last, pred);

        std::rotate(first, split, last);
        std::advance(first, std::distance(split, last));
      }
    return first;
  }

int
main(int argc, char* argv[])
{
  using namespace std;

  vector<int> iv;
  for ( int i = 0; i < 10; i++ )
    iv.push_back(i);

  copy(iv.begin(), iv.end(), ostream_iterator<int>(cout, " "));
  cout << endl;

  inplace_stable_partition(iv.begin(), iv.end(), bind2nd(modulus<int>(), 2));

  copy(iv.begin(), iv.end(), ostream_iterator<int>(cout, " "));
  cout << endl;
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-26T11:53:41.753

看起来您正在寻找一种稳定的就地排序算法，它具有特殊的元素关系顺序（任何奇数都小于任何偶数）。

鉴于此，我认为你不能比 O(n ln n) 更好。

我会进行就地合并排序。

如果您不需要保留具有相同值的元素的顺序，请使用快速排序，这对于就地处理要简单得多（但是，对于数十亿个元素，这可能不太适合）。

# java - springmvc @RequestMapping 下面两个urls如何精确匹配？

> ID：10331719
> 
> 赞同：0
> 
> 时间：2012-04-26T10:37:25.023
> 
> 标签：java, spring, spring-mvc

springmvc @RequestMapping 在我的代码中

```
@RequestMapping("/{c1}-{c2}-{c3}-{c4}.htm")
public void category(@PathVariable("c1") Integer c1,@PathVariable("c2") Integer c2,@PathVariable("c3") Integer c3,@PathVariable("c4") Integer c4){
    System.out.println(c1);
    System.out.println(c2);
    System.out.println(c3);
    System.out.println(c4);
}

@RequestMapping("/{c1}-{c2}-{c3}-{c4}-{label}.htm")
public void label(
        @PathVariable("c1") Integer c1,
        @PathVariable("c2") Integer c2,
        @PathVariable("c3") Integer c3,
        @PathVariable("c4") Integer c4,
        @PathVariable("label") Integer label){
    System.out.println(c1);
    System.out.println(c2);
    System.out.println(c3);
    System.out.println(c4);
    System.out.println(label);
} 
```

我要 url " **/2-5-3-138-8.htm** " 映射 " **label** " 方法~

但实际映射“**类别**”方法并解析出参数：

*   c1:2-5
*   c2:3
*   c3:138
*   c4:8

如何让这条路径“ **/2-5-3-138-8.htm** ”匹配“ **label** ”方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:43:10.020

尝试更新模式如下：

```
@RequestMapping("/{c1:[0-9]+}-{c2:[0-9]+}-{c3:[0-9]+}-{c4:[0-9]+}.htm")
...
@RequestMapping("/{c1:[0-9]+}-{c2:[0-9]+}-{c3:[0-9]+}-{c4:[0-9]+}-{label}.htm") 
```

# sql-server - 如何在 Linux 上打开和编辑 mdf sql server 数据库文件

> ID：10331720
> 
> 赞同：3
> 
> 时间：2012-04-26T10:37:27.620
> 
> 标签：sql-server, linux, mdf

如何在 linux 上打开和编辑 mdf sql server 数据库文件？

我用ubuntu！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-14T22:24:46.167

截至 2016 年 12 月，有适用于 Linux 的 SQL Server 版本。推荐的方法是从官方 Docker 映像运行 SQL Server：

*   [https://hub.docker.com/r/microsoft/mssql-server-linux/](https://hub.docker.com/r/microsoft/mssql-server-linux/)
*   [https://hub.docker.com/r/microsoft/mssql-tools/](https://hub.docker.com/r/microsoft/mssql-tools/)

然后它就像对您的数据库运行 SQL 脚本一样简单。甚至还有一个用于管理数据库的 VS Code 插件：[https](https://github.com/Microsoft/vscode-mssql) ://github.com/Microsoft/vscode-mssql 。

* * *

## 回答 #2

> 赞同：-16
> 
> 时间：2012-04-26T10:42:59.023

格式化硬盘，安装Windows，安装sql server，加载数据库（提示：mdf i 不够，可能还需要LDF文件），然后根据需要修改数据。

MDF 文件在内部非常复杂，它不像编辑它们那么容易，抱歉。它们是特定于 SQL Server 的，因此您将需要 SQL Server。

# objective-c - Objective-C: Extend a default object with constant values

> ID：10331724
> 
> 赞同：0
> 
> 时间：2012-04-26T10:37:40.320
> 
> 标签：objective-c, constants, categories

Having just started with Objective-C, this might be a pretty basic question. In objective-c, how can I define constants when extending a default object (say UIViewController). The constant values will then be used by all the objects extending the default object.

One way to do this can be creating categories for the object, something like this...

```
@implementation UIViewController (Constants)

+ (NSString *)navigationView {
    return @"navigationView";
}
+ (NSString *)detailView {
    return @"detailView";
}

@end 
```

Would using `#define` values in category implementation also work fine for this??? Or may be some better ways are there to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:43:05.420

That is fine. That will work as expected, although I would suggest using more appropriate names (the selector `navigationView` suggests you'll get back an actual view rather than a string with its name in).

You can use `#defines` if you wish - just define them straight in a header file. Or you can define string constants e.g.

```
// in the header

extern NSString* const NAVIGATION_VIEW_NAME; // declaration

// in a .m file somewhere

NSString* const NAVIGATION_VIEW_NAME = @"navigationView"; // definition 
```

# java - 一些 char 正在转换为 ( )

> ID：10331726
> 
> 赞同：0
> 
> 时间：2012-04-26T10:37:41.150
> 
> 标签：java

我有以下java代码行..

```
 String description = new String(somestring.getBytes("ISO_8859_1"),"UTF-8"); 
```

现在它被存储在 oracle 列中

somestring1 --> ()，作为雇主，吸引最有才华的人来这里工作。

somestring2 --> () 中的高级领导已经分配了足够的劳动力。

所以，这里我无法理解什么 char 被 () 取代了。

任何人都可以在这里提供帮助，哪个 char 被转换为 () 并存储在 db 中。

谢谢，-邦德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:40:45.097

> 我有以下一行java代码

好吧，你不应该。那行代码根本上是错误的，不应该存在。它表明您在编码方面做错了事。[在阅读了每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)之后，删除该行并修复任何让您认为需要该行的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:41:15.667

您的代码已损坏，并且会经常损坏文本。

```
 String description = new String(somestring.getBytes("ISO_8859_1"),"UTF-8"); 
```

这指示 Java 采用 UTF-16 Unicode 字符序列，并尝试将它们表示为 8859-1 字节。不在 8859-1 中的每个字符都将转换为“？”。然后，您要求 Java 假装这些字节是 UTF-8，然后（返回）转换为 UTF-16。这将破坏*另*一段字符，因为 8859-1 与 UTF-8 不同。当它到达甲骨文时，它已经是火车残骸了。

# java - 如何区分 ActionEvent 中的多个组合框

> ID：10331728
> 
> 赞同：0
> 
> 时间：2012-04-26T10:37:58.813
> 
> 标签：java, swing, user-interface, jcombobox, actionlistener

我有两个类，一个包含两个组合框的 gui 类和一个侦听两个组合框的侦听器类。该软件是关于比萨的，组合框是选择比萨的类型和数量，我将发布相关代码。

```
(gui class)
private Listener listen = new Listener();
private JComboBox chooseItem = new JComboBox();
private JComboBox quantity = new JComboBox();
private String[] selection = {"Choose a Pizza","Margherita", "Pepperoni", "Four Seasons", "Chips", "Garlic Bread", "Potato Wedges", "Cocacola", "Orange Juice", "Lemonade"};
private String[] qSelection = {"0","1","2","3","4","5","6","7","8","9","10"};

private void comboBoxs() {
 choosePizza = new JComboBox(selection);
    chooseItem.setSelectedIndex(0);
    panel.add(choosePizza);
    choosPizza.addActionListener(listener);

 quantity = new JComboBox(qSelection);
    quantity.setSelectedIndex(0);
    panel.add(quantity);
    quantity.addActionListener(listener);
} 
```

在侦听器类中，我被卡住了，到目前为止还没有找到解决方案。我必须使用 ActionListener，但我不确定如何区分这两个组合框。

```
(listener class)

public void actionPerformed(ActionEvent event) {

   if (actionCommand.equals("Confirm")) {
          String q = new String();
          String d = new String();
            d = description;
            q = quantity;
    }

 else {
        JComboBox cbq = (JComboBox)event.getSource();
        String itemNumber = (String)cbq.getSelectedItem();
        getQuantity(itemNumber);

        JComboBox cb = (JComboBox)event.getSource();
        String name = (String)cb.getSelectedItem();
        getItemName(name);
   }
 }

  public String getItemName(String name) {
        description = new String();
        description = name;
        return name;
  }

  public String getQuantity(String itemNumber){
        quantity = new String();
        quantity = itemNumber;
        return itemNumber;
 } 
```

所以，总结一下：当我在两个 JComboBox 中选择值时，我希望能够将选定的 chooseItem JComboBox 项目存储在“描述”字符串中，并将选定的数量 JComboBox 项目存储在“数量”字符串中。

目前，chooseItem JComboBox 所选项目显示为两个值，并且根本不显示数量。（这实际上是在描述字符串中最后出现的框和数量指向 null 之前的进度。）

我能够在网上找到的所有示例都只涉及带有单个 JComboBox 的 ActionListener，我一直试图让它工作几个小时，但没有运气，我完全陷入困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:47:13.033

您可以为每个组合框附加一个单独的侦听器，以便您的侦听器知道它接收的事件来自该特定的组合框。

另一种解决方案是让侦听器访问这些组合框（通过在您的类中公开它们，或者通过将它们作为参数传递给您的侦听器的构造函数），并将事件源与这些组合框进行比较以确定哪个组合框导致事件。

就我个人而言，我更喜欢在我的听众和我的组件之间进行一对一的映射，以避免这种复杂性。

小旁注：您发布的代码中有一些奇怪的东西

*   `public void getQuantity(String itemNumber)`：`void`与您实际返回某些东西的事实冲突->不会编译
*   在您的侦听器中，您两次询问事件的来源并将其转换为两个不同的组合框。这当然是不正确的

    ```
    JComboBox cbq = (JComboBox)event.getSource();
    String itemNumber = (String)cbq.getSelectedItem();
    getQuantity(itemNumber);

    //this returns the same combobox as above, so probably incorrect behavior
    JComboBox cb = (JComboBox)event.getSource();
    String name = (String)cb.getSelectedItem();
    getItemName(name); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:01:59.870

在您的控制器类中，您可以使用以下方法测试源的来源：

```
if(e.getSource() == gui.chooseItem){

}
else if(e.getSource() == gui.quantity){

} 
```

当然，这意味着您在侦听器类中提供了您的 gui 参考，并将设置`quantity`和`chooseItem`组合框设置为 public。

您也可以使用`actionCommand`，我认为它更干净：

在 gui 中：

```
chooseItem.setActionCommand("itemCB");
quantity.setActionCommand("quantityCB"); 
```

在侦听器类中：

```
if(e.getActionCommand().equals("itemCB")){
}
else if(e.getActionCommand().equals("quantityCB")){
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:08:25.623

在这种情况下，我通常只为每个组合框创建一个匿名 ActionListener。就像是：

```
String foo;
String bar;

JComboBox fooBox = new JComboBox();
JComboBox barBox = new JComboBox();

fooBox.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent event) {
        foo = "Updated";
    }
});

barBox.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent event) {
        bar = "Updated";
    }
}); 
```

等等。

# php - 如何提取（多维）数组？

> ID：10331730
> 
> 赞同：0
> 
> 时间：2012-04-26T10:38:04.043
> 
> 标签：php, arrays, multidimensional-array, foreach

我的阵列包括：

```
Array ( 
      [**Anconia**] => Array ( [1335372330] => 7 [1335190784] => 7 [1334883979] => 7 [1334672871] => 7 [1334539093] => 7 [1334337930] => 7 [1334189033] => 7 [1334007668] => 7 [1333567097] => 7 [1332973327] => 7 [1332533799] => 7 [1332215655] => 7 [1331697329] => 7 [1331239651] => 7 [1331075294] => 7 [1330983800] => 7 [1330658201] => 7 [1330484662] => 7 [1330202828] => 7 [1330028992] => 7 ) 
      [**Angellica**] => Array ( [1335372330] => 9 [1335190784] => 9 [1334883979] => 10 [1334539093] => 10 [1334337930] => 10 [1334189033] => 10 [1334007668] => 10 [1331697329] => 9 [1331239651] => 9 [1331075294] => 9 [1330983800] => 9 [1330658201] => 10 [1330484662] => 10 [1330202828] => 8 [1330028992] => 9 )
)

TimeStamp    Tally Number
[1335372330] => 7 
```

尝试提取此内容时，使用 foreach 使我感到困惑。想要打印一次 NAME（以粗体打印）并显示时间戳 = 多少。

我该怎么做呢？

提前致谢！

编辑：

我的尝试

```
foreach($results as $k => $v) { 
   $THEAD .= "<th scope='col'>".$k."</th>"; 
   $TBODY .= "<tr><th scope='row'>".$v."</th>"; 
   $TBODY2 .= "<td>".$results[$k]."</td>"; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:49:19.553

通常，您可以像遍历单级数组一样遍历嵌套数组。例子：

```
$myArray = array(
    'first-level-first-key' => array(
        'second-level-first-key' => 'some value',
        'second-level-second-key' => 'another value'
    ),
    'first-level-second-key' => array(
        'seond-level-another-key' => 'yet another value'
    )
);

foreach($myArray as $first_level_key => $first_level_value) {
    echo 'Key: '. $first_level_key .'<br />';
    echo 'Values: ';
    foreach($first_level_value as $second_level_key => $second_level_value) {
        echo $second_level_value .', ';
    }
    echo '<br /><br />';
} 
```

这将打印出：

```
Key: first-level-first-key
Values: some value, another value,

Key: first-level-second-key
Values: yet another value, 
```

现在您知道如何遍历嵌套数组了。玩得开心！

**编辑**

多一点解释，作为对 tmyie 下面评论的回答：正如您所见，每个元素本身就是一个数组：

```
$myArray['first-level-first-key'] = array('second-level-first-key' => ... ); 
```

第一个 foreach 循环遍历所有“第一级”数组（在我的示例中，键为“第一级-....”的元素）。因此，在该循环中，变量`$first_level_value`包含一个数组。第二个 foreach 循环遍历*该*第二级数组。如果您在第二级元素中保存了另一个数组，那么这种循环嵌套实际上是无穷无尽的。

将其与在您面前放置几个盒子进行比较。在第一个循环中，您说“打开我面前的每个盒子”。然后对于您打开的*每个*盒子，嵌套循环会说“打开我在那个盒子里找到的每个盒子”，依此类推。

虽然如果你写这个，你的应用程序设计很可能有一些非常错误的地方，但下面的例子是完全有效的：

```
foreach($myArray as $x) {
    foreach($x as $y) {
        foreach($y as $z) {
            foreach($z as $p) {
                // etc
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:48:00.507

既然`$v`是你的另一个数组`foreach`，你需要做另一个`foreach`：

```
foreach($results as $k => $v) {
   foreach($v as $timestamp => $tally) {
      // do whatever you want
   }
} 
```

我没有给你一个完整的代码，而是希望把它作为一个练习留给你，但这就是 - 根据你的问题 - 提取多维数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:57:44.773

你可以试试这个

```
<?php 

echo '<table>';
echo '  <tr>';
echo '    <th>Time Stamp</th>';
echo '    <th>Tally </th>';
echo '  </tr>';

    foreach($myArray as $timeStampArray) 
    {
       foreach($timeStampArray as $timestamp => $tally) 
       {

          echo '  <tr>';
          echo '    <td>'.$timestamp .'</td>';
          echo '    <td>'.$tally.' </td>';
          echo '  </tr>';
       }
    }
echo '</table>';
?> 
```

# matlab - Matlab/Octave 是否支持对矩阵切片的操作？

> ID：10331736
> 
> 赞同：3
> 
> 时间：2012-04-26T10:38:19.580
> 
> 标签：matlab, matrix, operators, octave, slice

到目前为止，我是 Octave/Matlab 的新手，您可以应用矩阵运算（如`*`）或单元格运算（如`.*`）。

现在我遇到了这两种模式之间的问题。

例如（这只是**EXAMPLE**）我有一个矩阵（10,10）和一个向量（10,1）。我想在切片中使用这个矩阵（在本例中为列切片）并向它们添加向量。所以将向量添加到第一列，将向量添加到第二列，......，将向量添加到最后一列。当然，在结果中获取矩阵（10,10）。

到目前为止，我提出了两种方法：

1.  手动循环列，并添加向量

2.  重复向量，然后将整个重复向量（所以现在它真的是矩阵）添加到矩阵中

第二种使用向量化的方式，但是消耗内存很多，第一种情况，没有向量化的方式（手动循环），但是内存并没有被过度使用。

**问题**——有没有不错的第三种方式，切片模式？我可以说，将矩阵视为切片，将向量添加到切片，然后删除此类视图，并像往常一样对待矩阵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T10:51:52.803

您可以使用 Matlab 的 bult in binary-singleton-expansion ( [bsxfun](http://www.mathworks.co.uk/help/techdoc/ref/bsxfun.html) ) 以内存高效的方式实现您想要的结果。

```
x = ones(10); %// 10x10 matrix
y = 1:10; %// 10x1 matrix
z = bsxfun(@plus, x, y) 
```

这将给出以下输出

```
z =

 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11
 2     3     4     5     6     7     8     9    10    11 
```

使用 repmat 命令通常是浪费的（正如您在问题中指出的那样），通常可以避免。有关 bsxfun 与 repmat 的详细说明，请参阅本文

[http://blogs.mathworks.com/loren/2008/08/04/comparing-repmat-and-bsxfun-performance/](http://blogs.mathworks.com/loren/2008/08/04/comparing-repmat-and-bsxfun-performance/)

至少对于乘法，您可以使用涉及对角矩阵的技巧来获得结果。您可以使用 sparse 关键字来减少对角矩阵临时存储的内存使用量

```
x = ones(10); %// 10x10 matrix
y = 1:10; %// 10x1 matrix
yd = sparse(diag(y)); %// 10x10 matrix, but memory is only used to store data and its indicies

z =  yd * x %// 10x10 matrix 
```

但是，bsxfun 解决方案通常更胜一筹。

# jquery - 如何在另一个 div 离开屏幕时显示一个 div，例如 Facebook 的时间轴功能

> ID：10331737
> 
> 赞同：1
> 
> 时间：2012-04-26T10:38:21.760
> 
> 标签：jquery, html, css

Facebook 的新时间线功能给我留下了深刻的印象，尤其是当您向下滚动个人资料并显示一个小菜单时，您可以选择查看他们的时间线或查看有关他们的更多信息。仅当您向下滚动到页面的特定长度时才会显示此 div，然后当您向上滚动时 i 再次消失。

我正在建立一个项目，这种系统将极大地受益。有一个很长的常见问题解答页面，我认为最好在屏幕左侧提供常见问题解答菜单，以便用户可以自然向下滚动并可以选择跳转到不同的问题，而不是使用手风琴系统并拥有用户点击FAQ标题，然后显示内容。

但是，我不确定它叫什么以及如何构建它。有没有人建造过这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:18:20.040

我找到了答案，我正在寻找的是所谓的“粘性 div”。我首先在 Stackoverflow 上找到了这篇[文章](https://stackoverflow.com/questions/10051419/show-hide-div-on-page-scroll)，然后我访问了这个解释概念并给出代码的[网站。](http://blog.yjl.im/2010/01/stick-div-at-top-after-scrolling.html)

使用该代码，我对其进行了修改以提供我需要的东西。所以在我放的 HTML 中：

```
<div id="quicknav" style="display:none;">
    <p>Navigation!</p>
</div> 
```

在 JQuery 中：

```
function sticky_relocate() {
  var window_top = $(window).scrollTop();

  var div_top = $('#faq').offset().top;

  if (window_top > div_top)
    $('#quicknav').show()
  else
    $('#quicknav').hide();
  }

  // If you have jQuery directly, use the following line, instead
  $(function() {
    $(window).scroll(sticky_relocate);
    sticky_relocate();
  }); 
```

这段代码让我有一个 Facebook 时间线式的 div，我很高兴！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:18:55.067

我创建了一个包含问题列表的示例常见问题页面（非常基本），当您向下滚动时，在 100 像素之后，页面顶部会出现一个项目：http: [//jsfiddle.net/LKqwY/](http://jsfiddle.net/LKqwY/)

```
$(function() {
    $(window).scroll(function() {
       if($(this).scrollTop() > 100) {
            $('#menu').fadeIn();
        } else {
            $('#menu').fadeOut();
        }
    });
});​ 
```

它只是检查您在滚动时向下滚动了多远，如果超过 100 像素，则菜单会淡入。如果您返回到 100 像素或更接近页面顶部，它将再次淡出。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T10:48:24.793

如果单击按钮，则必须加载要显示的数据，然后可以在页面上使用 jquery 向下滚动：`$('html, body').animate({scrollTop:1056}, 'slow',function(){ alert('scrolling is done');});`

我在这个页面上实现了：http: [//greenpark.shoplupe.com/](http://greenpark.shoplupe.com/)

看一下源码，有个函数叫showBlogEntry(id)

# web-crawler - 如何抓取/索引频繁更新的网页的策略？

> ID：10331738
> 
> 赞同：21
> 
> 时间：2012-04-26T10:38:21.777
> 
> 标签：web-crawler, search-engine

我正在尝试构建一个非常小的利基搜索引擎，使用 Nutch 来抓取特定网站。一些网站是新闻/博客网站。如果我抓取，比如说，techcrunch.com，并存储和索引他们的首页或他们的任何主页，那么在几个小时内我对该页面的索引就会过期。

像谷歌这样的大型搜索引擎是否有一种算法可以非常频繁地重新抓取频繁更新的页面，甚至每小时？或者它只是对频繁更新的页面评分很低，所以它们不会被退回？

如何在我自己的应用程序中处理这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-24T06:19:48.340

好问题。这实际上是`WWW`研究界的一个活跃话题。所涉及的技术称为**重新抓取策略**或**页面刷新策略**。

据我所知，文献中考虑了三个不同的因素：

*   **更改频率**（网页内容的更新频率）
    *   [1]：形式化了数据“新鲜度”的概念，并使用 a`poisson process`来模拟网页的变化。
    *   [2]：频率估计器
    *   [3]：更多调度策略
*   **相关性**（更新的页面内容对搜索结果的影响程度）
    *   [4]：最大限度地提高查询搜索引擎的用户体验质量
    *   [5]：确定（接近）最佳爬行频率
*   **信息寿命**（随着时间的推移从网页中出现和消失的内容片段的生命周期，与变化频率没有强相关性）
    *   [6]：区分临时内容和持久内容

您可能想决定哪个因素对您的应用程序和用户更重要。然后，您可以查看以下参考以获取更多详细信息。

* * *

**编辑**：我简要讨论了 [2] 中提到的频率估计器，以帮助您入门。基于此，您应该能够找出其他论文中可能对您有用的内容。:)

请按照我在下面指出的顺序阅读本文。只要你知道一些概率和统计数据 101 应该不会太难理解（如果你只使用估计器公式可能会少得多）：

步骤 1\. 请转至**第**6.4 节 - 应用到网络爬虫。在这里，Cho 列出了 3 种估计网页更改频率的方法。

*   统一策略：爬虫以每周一次的频率重新访问所有页面。
*   幼稚策略：在前 5 次访问中，爬虫以每周一次的频率访问每个页面。在 5 次访问之后，爬虫使用 naive estimator 估计页面的变化频率（第 4.1 节）
*   我们的政策：爬虫使用建议的估计器（第 4.2 节）来估计更改频率。

步骤 2\. 天真的政策。请转到第 4 部分。您将阅读：

> 直观地说，我们可以使用`X/T`（`X`：检测到的变化的数量，`T`：监控周期）作为估计的变化频率。

子序列 4.1 节刚刚证明了这个估计是有偏差的^([7](http://en.wikipedia.org/wiki/Estimator_bias))，不一致的^([8](http://en.wikipedia.org/wiki/Consistent_estimator))和低效的^([9](http://en.wikipedia.org/wiki/Efficient_estimator))。

步骤 3\. 改进的估计器。请转至第 4.2 节。新的估算器如下所示：![在此处输入图像描述](../Images/b1c47fbcfa1925db845e2d202bc91cd7.png)

其中`\bar X`是`n - X`（元素未更改的访问次数）并且`n`是访问次数。所以只要用这个公式来估计变化频率。您不需要理解小节其余部分中的证明。

第 4 步。第 4.3 节和第 5 节中讨论了一些技巧和有用的技术，它们可能对您有所帮助。第 4.3 节讨论了如何处理不规则间隔。第 5 节解决了这个问题：当元素的最后修改日期可用时，我们如何使用它来估计更改频率？使用最后修改日期的建议估算器如下所示：

![在此处输入图像描述](../Images/87999348bbf88fcc20ebf8b9aec80b7c.png)

论文中图10之后对上述算法的解释很清楚。

第 5 步。现在，如果您有兴趣，可以查看第 6 节中的实验设置和结果。

就是这样了。如果您现在感觉更有信心，请继续尝试 [1] 中的新鲜纸。

* * *

**参考**

[1] [http://oak.cs.ucla.edu/~cho/papers/cho-tods03.pdf](http://oak.cs.ucla.edu/~cho/papers/cho-tods03.pdf)

[2] [http://oak.cs.ucla.edu/~cho/papers/cho-freq.pdf](http://oak.cs.ucla.edu/~cho/papers/cho-freq.pdf)

[3] [http://hal.inria.fr/docs/00/07/33/72/PDF/RR-3317.pdf](http://hal.inria.fr/docs/00/07/33/72/PDF/RR-3317.pdf)

[4] [http://wwwconference.org/proceedings/www2005/docs/p401.pdf](http://wwwconference.org/proceedings/www2005/docs/p401.pdf)

[5] [http://www.columbia.edu/~js1353/pubs/wolf-www02.pdf](http://www.columbia.edu/~js1353/pubs/wolf-www02.pdf)

[6] [http://infolab.stanford.edu/~olston/publications/www08.pdf](http://infolab.stanford.edu/~olston/publications/www08.pdf)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T18:14:10.017

谷歌的算法大多是封闭的，他们不会告诉他们是如何做到的。

[我使用有向图](http://en.wikipedia.org/wiki/Directed_graph)的概念构建了一个爬虫，并将重新爬取率基于页面的[度中心](http://en.wikipedia.org/wiki/Centrality#Degree_centrality)性。您可以将网站视为一个有向图，其中页面作为节点，超链接作为边。具有高中心性的节点可能是更新更频繁的页面。至少，这是假设。

这可以通过存储 URL 和它们之间的链接来实现。如果您抓取并且不丢弃任何链接，则每个站点的图表将会增长。为每个站点的每个节点计算（标准化的）进出度将让您衡量哪个页面最有兴趣更频繁地重新抓取。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T19:04:45.897

尝试保留一些关于更新频率的首页统计信息。检测更新很容易，只需存储[ETag/Last-Modified](http://www.mnot.net/cache_docs/)并在您的下一个请求中发送回[If-None-Match/If-Updated-Since标头。](http://www.mnot.net/cache_docs/)保持[运行平均](http://en.wikipedia.org/wiki/Moving_average)更新频率（例如最近 24 次爬网）可以让您相当准确地确定首页的更新频率。

爬取首页后，您将确定下一次更新的预期时间，并在该时间左右将新的爬取作业放入存储桶中（一小时的存储桶通常是快速和礼貌之间的良好平衡）。每小时您只需获取相应的存储桶并将作业添加到您的作业队列中。像这样，您可以拥有任意数量的爬虫，并且仍然可以控制各个爬虫的调度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T06:29:14.417

无论如何，我都不是这个主题的专家，但站点地图是缓解这个问题的一种方法。

> 用最简单的术语来说，XML 站点地图（通常称为站点地图，带有大写字母 S）是您网站上的页面列表。创建和提交站点地图有助于确保 Google 了解您网站上的所有页面，包括可能无法通过 Google 的正常抓取过程发现的 URL。此外，您还可以使用站点地图向 Google 提供有关您网站上特定类型内容的元数据，包括视频、图片、移动设备和新闻。

谷歌专门使用它来帮助他们抓取新闻网站。您可以在此处找到有关站点地图的更多信息，并[在此处](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)找到有关 Google 新闻和站点地图[的信息](http://support.google.com/news/publisher/bin/answer.py?hl=en&answer=75717)。

通常，您可以在网站的 robots.txt 中找到 Sitemaps.xml。例如，TechCrunch 的 Sitemap 只是

[http://techcrunch.com/sitemap.xml](http://techcrunch.com/sitemap.xml)

这将这个问题变成了定期解析 xml。如果您在 robots.txt 中找不到它，您可以随时联系网站管理员，看看他们是否会提供给您。

更新 1 2012 年 10 月 24 日上午 10:45，

我与我的一位团队成员交谈，他给了我一些关于我们如何处理这个问题的额外见解。我真的想重申，这不是一个简单的问题，需要很多部分解决方案。

我们做的另一件事是监视几个“索引页面”以了解给定域的更改。以纽约时报为例。我们在以下位置为顶级域创建一个索引页面：

`http://www.nytimes.com/`

如果您查看该页面，您会注意到其他子区域，例如世界、美国、政治、商业等。我们为所有这些创建额外的索引页面。业务有额外的嵌套索引页面，如 Global、DealBook、Markets、Economy 等。一个 url 有 20 多个索引页面并不少见。如果我们注意到索引中添加了任何其他 url，我们会将它们添加到队列中以进行爬取。

显然，这非常令人沮丧，因为您可能必须为每个要抓取的网站手动执行此操作。您可能需要考虑为解决方案付费。我们使用[SuprFeedr](http://superfeedr.com/)并且对它非常满意。

此外，许多网站仍然提供 RSS，这是一种有效的网页抓取方式。我仍然建议联系网站管理员，看看他们是否有任何简单的解决方案可以帮助您。

# c# - 访问 javascript 文件 .js 中的 C# 变量

> ID：10331740
> 
> 赞同：4
> 
> 时间：2012-04-26T10:38:30.913
> 
> 标签：c#, javascript, asp.net

是否可以使用一些 C# 变量创建一个 javascript 文件？像这样的东西：

```
var foo =  <%= CODE_VALUE.foo %>; 
```

或者我是否必须在我包含在该`<head>`部分中的 usercontrol.ascx 中创建它们？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T10:43:53.363

您不能在 .js 文件中包含此代码，因为它不是由 asp.net 编译的，因此不会将其`CODE_VALUE.foo`转换为代码。

你可以做的是在加载这个你赢得使用的 .js 文件之前放置这个变量，并将它们设置在任何 aspx 或用户控件上。

例如

```
<script>
 var foo = <%=CODE_VALUE.foo%>;
<script>
<script type="text/javascript" src="fileToUseTheFoo.js">   
</script> 
```

或者，您可以创建一个读取 javascript 文件的处理程序，包含您的自定义变量并根据需要创建完整的 javascript 代码，并将其作为 javascript 发送。

一些相关的：[如何在外部 javascript 文件中获取 asp.net 客户端 ID](https://stackoverflow.com/questions/3845900/how-to-get-asp-net-client-id-at-external-javascript-file/3851247#3851247)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:41:45.360

不，您不能在 .js 文件中使用服务器端标签。而是在需要它们的页面/控件上创建变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T10:41:49.547

Javascript 文件是静态文件，也由 Web 服务器静态提供，无需使用 ASP.NET 处理它们。

因此，如果您真的想插入该值，您可以创建一个空的 .aspx 页面并在其中包含所有 javascript，然后将 .aspx 页面包含在`script src`.

但我可能更喜欢使用 Web 服务，每次需要接收值时都可以从 javascript 调用 Web 方法。

# java - 数组索引存储在新数组中

> ID：10331744
> 
> 赞同：0
> 
> 时间：2012-04-26T10:38:37.780
> 
> 标签：java

我需要对数组项进行排序并将旧索引存储在新数组中，所以我尝试`treemap`收集它，按照我的预期，我在收集中得到了完整的输出，但是当我将集合转换为数组时出现问题。

```
float[] array = new float[10];
        array[0] = 11;
        array[1] = 10;
        array[2] = 3;
        array[3] = 40;
        array[4] = 5;
        array[5] = 60;
        array[6] = 4;
        array[7] = 41; 
        array[8] = 110;
        array[9] = 8;         

        Map<Float, Integer> map = new TreeMap<Float, Integer>();
        for (int i = 0; i < array.length; ++i) {
            map.put(array[i], i);
        }
        Collection<Integer> indices = map.values();
        System.out.println("indices"+indices);
        String s[] = (String[])indices.toArray(new String[0]);
        for (int i = 0, n = s.length; i < n; i++)
         {
              System.out.println(s[i]);
         } 
```

**它引发如下错误：**

```
04-18 14:55:13.380: ERROR/AndroidRuntime(859): FATAL EXCEPTION: main
04-18 14:55:13.380: ERROR/AndroidRuntime(859): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jcord/com.jcord.Jcord_for_Con_lat_long_to_east_nothenActivity}: java.lang.ArrayStoreException
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.os.Looper.loop(Looper.java:123)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at java.lang.reflect.Method.invoke(Method.java:521)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at dalvik.system.NativeStart.main(Native Method)
04-18 14:55:13.380: ERROR/AndroidRuntime(859): Caused by: java.lang.ArrayStoreException
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at java.util.AbstractCollection.toArray(AbstractCollection.java:357)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at com.jcord.Jcord_for_Con_lat_long_to_east_nothenActivity.onCreate(Jcord_for_Con_lat_long_to_east_nothenActivity.java:50)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-18 14:55:13.380: ERROR/AndroidRuntime(859):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:41:48.307

代替

```
 String s[] = (String[])indices.toArray(new String[0]); 
```

和

```
 Integer s[] = (Integer[])indices.toArray(new Integer[0]); 
```

# sql - oracle sql事务块正确的语法？

> ID：10331756
> 
> 赞同：0
> 
> 时间：2012-04-26T10:39:21.443
> 
> 标签：sql, oracle

如果有一个 ParentTable table1 和 child-table table2 并且我想确保两者都被创建（以正确的顺序！）或者没有被创建，这是正确的语法吗？

```
begin    
  insert into table1 values (seq.nextvalue, 'test') ;
  insert into table2 values (seq.currvalue, 'test3');
  commit;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:53:04.173

如果您担心序列分配中的不同值，请在插入之前将其提取到变量中。如果引发任何异常，它将回滚插入，否则将提交它们。

```
DECLARE
   v_seq_id NUMBER;
BEGIN
   SELECT seq.nextval
     INTO v_seq_id
     FROM dual;
   --
   INSERT INTO table1
   VALUES (
      v_seq_id,
      'test'
   );
   --
   INSERT INTO table2
   VALUES (
      v_seq_id,
      'test3'
   );
   --
   COMMIT;
EXCEPTION
   WHEN others
   THEN
      <log_error>
      ROLLBACK;
END; 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:41:36.260

未经测试，但必须是这样的

```
begin    
  insert into table1 values(seq.nextval, 'test') ;
  insert into table2 values(seq.currval, 'test3');
  commit;
end; 
```

# c# - 从字符串 XML 读取数据

> ID：10331764
> 
> 赞同：1
> 
> 时间：2012-04-26T10:39:54.383
> 
> 标签：c#, xml

我的情况是这样的，我有一个字符串格式的xml数据。

```
<?xml version="1.0" encoding="utf-16"?>
<Tree AllowNodeEditing="True" ShowLineImages="False" CheckBoxes="True" EnableAjaxSkinRendering="False" AutoPostBackOnCheck="True" AutoPostBack="True">
 <Node Text="IMG_1468.JPG" Value="../../CMS/Images/Fotogalerie/548/IMG_1468.JPG" Checked="True" Selected="True" tekst="Afbeelding IMG_1468.JPG" thumb="../../CMS/Images/Thumbs/548/IMG_1468.JPG" /> 
```

从上面的字符串中，我需要选择每个节点的“值”并将其存储在数据表中。我怎样才能实现这一点..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:57:23.543

我会使用[XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)类。

```
XElement xmlTree = XElement.Parse("yourXMLString"); 
```

然后您可以使用 XElement 方法分析每个元素，例如：

```
foreach (XElement el in xmlTree.Elements())
   // Do what you want with el 
```

你也可以查询它：

```
<Tree>
  <Node Text="IMG_1468.JPG" Value="../../CMS/Images/Fotogalerie/548/IMG_1468.JPG" />
</Tree>

string yourValue = xmlTree.Elements("Node")
                      .Where(x => (string) x.Attribute("Text") == "IMG_1468.JPG")
                      .Select(x => (string) x.Attribute("Value"))
                      .Single(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T10:42:49.320

一种方法是将字符串转换为 xmldoc，而不是使用 LINQ 读取 xmldoc：

**字符串到 XML：**

```
 String rawXml =
              @"<root>
                    <person firstname="Riley" lastname="Scott" />
                    <person firstname="Thomas" lastname="Scott" />
                </root>";
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.LoadXml(rawXml);

var lv1s = from lv1 in xdoc.Descendants("person")
           select new { 
               firstname = lv1.Attribute("firstname").Value,
                lastname = lv1.Attribute("lastname").Value
           }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T10:54:06.497

使用`Linq to XML`：

```
XDocument doc = XDocument.Parse(xml_string);
var values = (from f in doc.Elements().Descendants()
              select f.Attribute("Value").Value).ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T10:56:56.287

```
XmlNodeList elementList = doc.GetElementsByTagName("*");
for (int i = 0; i < elementList.Count; i++)
{
    string attrVal = elementList[i].Attributes["Value"].Value;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T11:01:58.790

```
XDocument doc = XDocument.Parse(xml);
var values = from element in doc.XPathSelectElements("/Tree/Node")
                     where element.Attribute("Value") != null
                     select (element.Attribute("Value").Value); 
```

# android - 在android中再次选择时关闭选项卡

> ID：10331766
> 
> 赞同：1
> 
> 时间：2012-04-26T10:40:17.550
> 
> 标签：android, android-widget, android-tabhost, android-tabactivity, android-tabs

我正在为自己的知识学习和实现浏览器。

我已经制作了标签，并且可以在标签中启动网页。

单击当前聚焦的选项卡时，我想关闭一个选项卡。

有没有人试图关闭具有当前焦点的特定选项卡？

我没有使用 TabActivity，我的构建目标是 9

我还在学习浏览器的实现，所以我的问题可能有点幼稚，请多多包涵:)

[我在这里](https://stackoverflow.com/questions/5487770/get-notified-when-current-tab-is-selected-again)关注了一个帖子

# dynamics-crm-2011 - CRM 2011 - 显示特定实体的功能区按钮

> ID：10331767
> 
> 赞同：2
> 
> 时间：2012-04-26T10:40:20.057
> 
> 标签：dynamics-crm-2011, ribbon, crm

> **可能重复：**
> [如何配置 CRM 功能区 xml 以仅在特定父实体的上下文中查看实体时显示实体的功能区按钮](https://stackoverflow.com/questions/9195302/how-to-configure-crm-ribbon-xml-to-display-a-ribbon-button-for-an-entity-only-wh)

我正在尝试使用“DisplayRule”来隐藏/显示特定实体的按钮！我在“注册”表单上有一个子网格，在该子网格中，用户必须选择一些要添加到购物篮中的项目。

但是我为篮子创建的按钮显示在每个表单上，其中为该篮子创建了子网格。

该按钮只需要出现在“注册”表单上，而在其他实体上则不应出现该按钮。我使用了以下 XML 语句，但它似乎不起作用：

```
 <DisplayRules>
        <DisplayRule Id="A.HideButtonOnOtherForm">
          <EntityRule AppliesTo="PrimaryEntity" EntityName="ave_registration" Context="Form"  />
        </DisplayRule>
      </DisplayRules> 
```

上面的 XML 语句隐藏了所有实体的按钮......但它应该只在注册时显示它......我做错了什么？ave_registration 是我的注册实体的名称 :)

# html - UIwebview 纵向媒体查询

> ID：10331770
> 
> 赞同：1
> 
> 时间：2012-04-26T10:40:36.863
> 
> 标签：html, objective-c, css, ios, orientation

我试图在 webview 中加载一些 html，我希望将不同的 css 用于横向和纵向

这是我的html的头部

```
NSMutableString *htmlString = [NSMutableString stringWithString:@"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">"];

        [htmlString appendString:@"<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" id=\"bp-doc\">"
         "<head>"
         "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>"
         "<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\" />" ];
        //landscape css
        [htmlString appendString:@"<link rel='stylesheet' media='screen and (orientation: landscape)' href='landscape.css' type='text/css'/>"];
        //portrait css
        [htmlString appendString:@"<link rel='stylesheet' media='screen and (orientation: portrait)' href='portrait.css' type='text/css'/>"];

        [htmlString appendString:@"<link rel='stylesheet' href='style.css' type='text/css'/>"
         "<script type='text/javascript' src='jquery-1.6.2.min.js'></script>"
          "<script type='text/javascript' src='script.js'></script>"
         "</head>"
         ]; 
```

我也在视图控制器中执行此操作 shouldAutorotateToInterfaceOrientation: 方法

```
int i =0;
    switch (interfaceOrientation){
        case UIInterfaceOrientationPortrait:
            i = 0;
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            i = 180;
            break;
        case UIInterfaceOrientationLandscapeLeft:
            i = 90;
            break;
        case UIInterfaceOrientationLandscapeRight:
            i = -90;
            break;
    }
    [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.__defineGetter__('orientation',function(){return %d;});window.onorientationchange();",i]]; 
```

但是portrait.css 从不用于纵向。似乎方向肖像的媒体查询根本不起作用。

# c# - 如何防止 VisualStudio 设计器在代码中添加 BeginInit 和 EndInit 方法？

> ID：10331774
> 
> 赞同：2
> 
> 时间：2012-04-26T10:40:43.860
> 
> 标签：c#, winforms, visual-studio

当 Visual Studio Designer 将以下行添加到代码中时，我的应用程序 UI 会发生一些不良位移。

```
((System.ComponentModel.ISupportInitialize)(this.splitContainer1)).BeginInit();
:
:
((System.ComponentModel.ISupportInitialize)(this.splitContainer1)).EndInit(); 
```

我该如何预防？

* * *

***版：***

我创建了一个只有两个嵌套`SplitContainer`的新简单项目，并遇到了同样的问题。

►<em>问题：

如下代码所示，`SplitterWidth`of`splUpperSection`保持不变！如果你删除`BeginInit`和`EndInit`方法，这个属性（`SplitterWidth`）将被改变！ **难道是农事BUG？？？**

该`InitializeSplitContainers`方法包含 Visual Studio 设计器自动生成的代码。您也可以简单地创建一个新表单并向其中添加两个嵌套的拆分容器，它们的 a`SplitterWidth`为 1 以轻松解决问题。

►<em>代码：

```
using System.ComponentModel;
using System.Drawing;
using System.Windows.Forms;

namespace TestApp
{
    public partial class Form1 : Form
    {
        //
        // SplitContainers
        //
        private SplitContainer splBase;
        private SplitContainer splUpperSection;

        /// <summary>
        /// The form has initially no child control.
        /// </summary>
        public Form1()
        {
            InitializeComponent();
            InitializeSplitContainers();
        }

        private void InitializeSplitContainers()
        {
            this.splBase = new SplitContainer();
            this.splUpperSection = new SplitContainer();
            ((ISupportInitialize)(this.splBase)).BeginInit();
            this.splBase.Panel1.SuspendLayout();
            this.splBase.SuspendLayout();
            ((ISupportInitialize)(this.splUpperSection)).BeginInit();
            this.splUpperSection.SuspendLayout();
            this.SuspendLayout();
            // 
            // splBase
            // 
            this.splBase.BackColor = Color.Red;
            this.splBase.Dock = DockStyle.Fill;
            this.splBase.FixedPanel = FixedPanel.Panel1;
            this.splBase.IsSplitterFixed = true;
            this.splBase.Location = new Point(0, 0);
            this.splBase.Name = "splBase";
            this.splBase.Orientation = Orientation.Horizontal;
            // 
            // splBase.Panel1
            // 
            this.splBase.Panel1.Controls.Add(this.splUpperSection);
            // 
            // splBase.Panel2
            // 
            this.splBase.Panel2.BackColor = Color.White;
            this.splBase.Size = new Size(400, 400);
            this.splBase.SplitterDistance = 115;
            this.splBase.SplitterWidth = 1;
            this.splBase.TabIndex = 0;
            // 
            // splUpperSection
            // 
            this.splUpperSection.BackColor = Color.Chartreuse;
            this.splUpperSection.Dock = DockStyle.Fill;
            this.splUpperSection.FixedPanel = FixedPanel.Panel1;
            this.splUpperSection.IsSplitterFixed = true;
            this.splUpperSection.Location = new Point(0, 0);
            this.splUpperSection.Name = "splUpperSection";
            this.splUpperSection.Orientation = Orientation.Horizontal;
            // 
            // splUpperSection.Panel1
            // 
            this.splUpperSection.Panel1.BackColor = Color.White;
            // 
            // splUpperSection.Panel2
            // 
            this.splUpperSection.Panel2.BackColor = Color.White;
            this.splUpperSection.Size = new Size(400, 115);
            this.splUpperSection.SplitterDistance = 25; // ←Will be set
            this.splUpperSection.SplitterWidth = 1;     // ←Won't be set (stays: 4)
            this.splUpperSection.TabIndex = 0;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new SizeF(6F, 13F);
            this.AutoScaleMode = AutoScaleMode.Font;
            this.ClientSize = new Size(400, 400);
            this.Controls.Add(this.splBase);
            this.Name = "Form1";
            this.Text = "Bug Form";
            this.splBase.Panel1.ResumeLayout(false);
            ((ISupportInitialize)(this.splBase)).EndInit();
            this.splBase.ResumeLayout(false);
            ((ISupportInitialize)(this.splUpperSection)).EndInit();
            this.splUpperSection.ResumeLayout(false);
            this.ResumeLayout(false);
        }
    }
} 
```

►<em>解决方法：

```
public Form1()
{
    //
    // Initializing components including split-containers..
    //
    InitializeComponent();
    {
        //
        // keeping initializing on..
        //
        splBase.SplitterWidth = 1;
        splUpperSection.SplitterWidth = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:43:41.987

这些调用需要通知`this.splitContainer1`对象所有初始化都已完成，以避免必须按指定顺序输入对象属性值。

只有当您调用 EndInit 时，才会评估属性的值。

也就是说，如果您在对象属性上设置的值不会取代对象，那么无论如何这都不应该取代您的 UI。

编辑：调用 EndInit() 时唯一发生的事情是容器执行以下方法：

```
if (this.newPanel1MinSize != this.panel1MinSize)
{
    this.ApplyPanel1MinSize(this.newPanel1MinSize);
}
if (this.newPanel2MinSize != this.panel2MinSize)
{
    this.ApplyPanel2MinSize(this.newPanel2MinSize);
}
if (this.newSplitterWidth != this.splitterWidth)
{
    this.ApplySplitterWidth(this.newSplitterWidth);
} 
```

所以你的问题必须与这三个属性中的一个或多个有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-06T13:09:45.407

I got this error when I merged changes back from a working project which was migrated from 2010 to 2015\. In the Updated Project the 2 new lines were added in the designer something like:

```
 ((ISupportInitialize)(this.splBase)).BeginInit(); 
```

and

```
 ((ISupportInitialize)(this.splBase)).EndInit(); 
```

If I ran the version running on 2015, it ran without issues.

To resolve this in VS 2010, **I deleted both of these lines**. After that the project has been working fine.

# php - PHP正则表达式拆分字符串

> ID：10331779
> 
> 赞同：-1
> 
> 时间：2012-04-26T10:41:03.127
> 
> 标签：php, regex

我想在 php 中用正则表达式拆分字符串。

例如（此处为字符串，此处为 12345 另一个字符串，

从上面的字符串中，我需要 1) - 5 位代码 2) - 5 位代码之前的字符串，最多大括号 3) - 5 位代码之后的字符串，最多逗号

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:45:28.307

**试试这个 ：**

```
\(([\w\s]+)\,\s([0-9]+)\s([\w\s]+)\, 
```

# jquery - 在 jQuery Mobile 中更改页面时，不会在第二页上调用事件处理程序

> ID：10331781
> 
> 赞同：1
> 
> 时间：2012-04-26T10:41:03.913
> 
> 标签：jquery, ajax, events, mobile, handlers

我在我的应用程序中使用 jQuery Mobile。我有 index.html 页面，我尝试将另一个页面添加到我的应用程序中。所以在 index.html 页面上，我有一个指向 Camera.html 页面的链接：

```
<a href="Camera.html">Take a photo</a>   // A. version 
```

当我单击该链接时，相机的页面会滑入（它重定向到带有滑动动画的 Camera.html 页面），但在相机页面上没有调用任何事件处理程序（加载、DOMContentLoaded 等）。我认为 jQuery Mobile 使用 ajax 重定向到其他页面，这就是不调用事件处理程序的原因。

如果我将其更改为以下内容，则会调用事件，但不会为页面重定向设置动画：

```
<a href="Camera.html" data-ajax="false">Take a photo</a>   // B. version 
```

我想保留动画，我也更喜欢在相机页面上调用一些事件（我想用它来初始化）。所以我有以下问题。

1.  如果我使用 A. 版本重定向到其他页面，您是否知道至少一个将被调用的事件？
2.  如果我使用版本 A.，我可以以某种方式手动调用另一页上的某些事件吗？
3.  我应该以其他方式重定向到另一个页面吗？

请给我一些代码示例好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:56:16.670

请澄清当您的意思是它滑入时，您是否将 div 标签动画化到屏幕中？

如果页面重定向到 Camera.html，那么如果您将脚本包含在 Camera.html 的脚本标记中，它们只会在 Camera.html 加载时执行

另外尝试：

*   如果要为 div 标签设置动画，请使用 $('div').load() 事件
*   尝试添加

    ```
    $('body id="camerabody"').load(function(){ alert("Body Loaded"); }) 
    ```

其中camerabody 是Camera.html 文件中body 标签的id

*   如果您使用 jquery.animate 引起动画，则可以在动画完成时指定回调

    ```
    $('div').animate(
             {height:'+=50'},
             1000,
             function(){ alert("animation complete"); 
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:14:40.073

> 我想保留动画，我也更喜欢在相机页面上调用一些事件（我想用它来初始化）。所以我有以下问题。

尝试使用它来使用**pageinit**或**pageshow初始化您的页面**

```
jQuery('[data-role="page"]').live('pageinit', function(){
  /* page initialization */
}) 
```

**pageinit**被触发一次 - 在 DOM 中创建页面时，每次显示页面时都会触发**pageshow**

# ruby-on-rails - delay_job 在生产中使用错误的发件人发送电子邮件

> ID：10331787
> 
> 赞同：0
> 
> 时间：2012-04-26T10:41:38.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, actionmailer, delayed-job

我在rails 3.1.3上工作并使用delayed_job 3.0.1

我在有效的电子邮件发件人中发现电子邮件有问题。

首先，我将 ActionMailer 设置为与 Gmail 一起使用`(xxx.gmail.com)`，它工作正常。

在我在生产服务器上部署了一段时间之后。

我已经设置了新的 ActionMailer 来使用我的邮件服务器。

并在开发中对其进行了测试。然后我将代码部署到生产服务器。它也可以正常工作。

**但有时使用我的旧 Gmail`(xxx.gmail.com)`作为发件人向客户发送电子邮件。（正确发送，没有错误）**

PS。我使用 rails_config gem 来保存电子邮件设置。

我已经尝试调试了 2 天，运气好。

*   `Settings.mail_sender`在生产服务器上的 Rails 控制台内多次打印。它正确返回（“无回复”）
*   重新启动delayed_job。
*   重启服务器。
*   尝试将发件人放入日志中。（当发件人不是 Gmail 时，它会写入日志）。
*   检查我的项目，那里没有任何 gmail 设置或数据库。

有我的代码

```
# config/settings/production.yml
  mail_sender: '"no-reply" <no-reply@myapp.com>'

# MyMailer.rb

default :from => Settings.mail_sender

def greeting(receiver)                   
  @receiver = receiver
  Delayed::Worker.logger.info "-------In inform client"
  Delayed::Worker.logger.info "========inform client from #{Settings.mail_sender}"

  mail(:to => "#{receiver.full_name} <#{receiver.email}>",
    :subject => "Hello") do |format|                   
      format.html
  end

  Delayed::Worker.logger.info inspect
end

# code I call the delayed_job
  MyMailer.delay.greeting(client) if client.can_receive_email? 
```

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:26:00.450

我已经将我的应用程序部署到新服务器（使用相同的数据），问题就消失了。

然后我尝试关闭旧服务器一段时间，然后再次启动旧服务器。

问题也没有了。看起来很混乱，就像僵尸线程卡在我的旧服务器上一样。

最后，我发现了真正的问题，delayed_job 的过程卡在了我的服务器上，因为转储问题。

# php - 如何使用 WordPress 在 es_ES.po 文件中添加/修改新变量值

> ID：10331792
> 
> 赞同：0
> 
> 时间：2012-04-26T10:41:48.183
> 
> 标签：php, wordpress

我想使用自己定义的变量

1- 我使用 es_ES.po 2- #: wp-content/themes/twentyeleven/tmp_login_step1.php:16 msgid "注册一个新帐户" msgstr "Registrar una cuenta nueva"

3-在线16

但它不是翻译它只是显示在 __e(“Register a new account”)

照原样注册一个新帐户

事实上，如果我使用 es_ES.po 文件中已经填充的其他一些 __e(“sweetheart”)，它可以工作，但为什么我自己定义的变量不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:40:16.607

这个解释应该可以帮助你：[http ://codex.wordpress.org/Translating_WordPress](http://codex.wordpress.org/Translating_WordPress)

您需要使用翻译工具生成 MO（机器对象）文件。

# objective-c - Web 服务应用程序的设计模式（使用 APNS）

> ID：10331796
> 
> 赞同：1
> 
> 时间：2012-04-26T10:42:16.863
> 
> 标签：objective-c, ios, apple-push-notifications, cocoa-design-patterns

我有一个 Web 服务应用程序，我使用来自服务器的 GET 请求获取我的数据。我想在我的应用程序上激活[APNS](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)并阅读一些关于这个主题的[好教程。](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)我发现我们可以在一次推送中发送大约 200 字节的数据。我的问题是，通过推送通知而不是在指定时间发送 GET 请求来传递我的应用程序的所有数据是真的吗？

**注意：**目前，当我的数据库中的任何表发生更改时，我会推送通知并作为响应，我的用户打开应用程序。在此启动期间，我向我的服务器创建了一个 GET 请求以获取新数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:45:35.387

不能保证每次推送通知都能到达。所以你不应该将它用于你的数据。它应该按预期用作通知。

以下是苹果在他们的[文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)中关于推送通知的说法：

> **重要提示：**由于无法保证交付，因此您不应依赖远程通知工具通过有效负载将关键数据交付给应用程序。并且永远不要在有效负载中包含敏感数据。您应该只使用它来通知用户有新数据可用。

# vb6 - 如何在 UserControl VB6 中隐藏/删除 ToolTipText 属性

> ID：10331799
> 
> 赞同：2
> 
> 时间：2012-04-26T10:42:31.317
> 
> 标签：vb6, activex

标题说明了所有内容，“如何在 Visual Basic 6 ActiveX 组件中隐藏/删除 UserControl 中的 ToolTipText 属性”。

我写了一个 ActiveX 控件，该控件没有/不需要 ToolTipText 属性，我希望从中删除该自动创建的属性，但我不知道如何！

是否有任何 API 或其他东西可以从属性窗口中删除 ToolTipText 属性？

![隐藏-删除 ToolTipText 属性](../Images/4f6e6a8b24fe746b5ba5a0c4be5f22d5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:11:02.367

该`.ToolTipText`属性是 VB6 中控件扩展器的属性，而不是您的用户控件的属性，因此您无权隐藏它。但是，当您将`.InvisibleAtRuntime`属性设置为`True`.

# drupal - drupal 7中的菜单项激活

> ID：10331800
> 
> 赞同：0
> 
> 时间：2012-04-26T10:42:33.220
> 
> 标签：drupal, menu, internationalization, drupal-7

我想在 page.tpl.php 中做这样的事情：

```
<?php
$main_menu_tree = menu_tree('main-menu');
    [ get current page/path ]
    [ IF we are on page1 THEN set menu item "item1" active ]
    print drupal_render($main_menu_tree);
    ?> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:01:57.770

我想你正在寻找[`menu_set_active_item()`](http://api.drupal.org/api/drupal/includes!menu.inc/function/menu_set_active_item/7)：

```
if ($_GET['q'] == 'page1') {
  menu_set_active_item('item1');
} 
```

在此过程中执行 in page.tpl.php 可能为时已晚，无法实际工作。文档页面建议在页面构建的早期进行，例如在`hook_init()`.

# mysql - JOIN 中的 MySQL 条件表名

> ID：10331807
> 
> 赞同：1
> 
> 时间：2012-04-26T10:43:05.630
> 
> 标签：mysql, tablename

我正在研究知识产权管理系统，我在数据库中有 2 个表 - 商标和设计。

然后我有反对意见。这意味着，如果其他人拥有与我们客户相似的商标或设计，经理可以制造新的反对意见。

例如，我有 3 个表：

商标：

```
id 
name 
```

设计：

```
id
name 
```

反对：

```
id
name
object_id
object_table 
```

我不知道，与什么表反对有关，但我应该有可能进行这种查询：

```
SELECT id, name, opposition_object.name FROM opposition
LEFT JOIN (trademark|design) as opposition_object on opposition.object_id =   (trademark|design).id 
```

首先，我考虑将表名存储为对立表的 object_table 列，但后来我意识到我不知道是否可以查询表名，首先，这肯定是一个糟糕的设计。

但是我在这里被击中了，什么都没有出现在我的脑海中。那么有没有人有任何想法如何处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:53:20.017

也许是这样的：

```
SELECT 
    id, 
    name, 
    COALESCE(trademark.name,design.name) AS object_name
FROM 
    opposition
    LEFT JOIN trademark 
        on opposition.object_id =   trademark.id
        AND trademark.object_table ='trademark'
    LEFT JOIN design
        on opposition.object_id =   design.id
        AND design.object_table ='design' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:50:06.093

```
SELECT opposition.id, opposition.name, trademark.name AS object_name
FROM opposition
LEFT JOIN trademark
  ON opposition.object_id = trademark.id
WHERE opposition.object_table = 'trademark'

UNION

SELECT opposition.id, opposition.name, design.name AS object_name
FROM opposition
LEFT JOIN design
  ON opposition.object_id = design.id
WHERE opposition.object_table = 'design' 
```

这发出两个查询：一个加入`trademark`表和一个加入`design`。然后使用 将结果统一为一个结果集`UNION`。

# css - 将 div 对齐到另一个 div

> ID：10331808
> 
> 赞同：2
> 
> 时间：2012-04-26T10:43:10.723
> 
> 标签：css, html, css-float

我有两个 div，就像附加的图片一样。我的问题是 div2 没有进入 div1 （当 div1 完成时），如图 1 所示，但仍保留在列中（如附上的第二张图片）。

![第一张图片](../Images/cb632703a1d47cafaace2d5ab7f65c18.png) ![第二张图片](../Images/01a6e37cebab27925d84fcdd5e59c47c.png)

div1 css 是：

```
width: 391px;
height: 380px;
float: left;
margin-right: 10px; 
```

而 div2 css ishas 没有 css（我不知道要插入什么）。

我能怎么做？

谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:02:57.143

假设您的标记是

```
<div id="div1">...</div>
<div id="div2">...</div> 
```

您必须什么都不做**，**因为如果`div2`没有应用任何样式，那么整个布局将像图 1 中的那样

见小提琴：http: [//jsfiddle.net/qAqv3/](http://jsfiddle.net/qAqv3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:47:26.967

一个div只能有一个宽度和一个高度，所以它只能是一个矩形。您可以将 div1 插入 div2，并使用 float:left 设置 div2（包括 div1）的内容。

这是一个演示：http: [//jsfiddle.net/DX2vJ/1/](http://jsfiddle.net/DX2vJ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:51:04.357

您可以在 div 中创建一个 div，然后设置与第一个 div 相关的第二个 div（至少我认为这是您尝试做的）

```
#Menu
{
    position:absolute;
    text-align: left;
    width="1024px";
    height="768px";
}

#startButton
{
    position:relative;
    left: 400px;
    top: -350px;
}

<div id="Menu"> <img src="path/to/img.jpg" width="1024px" height="768px"></img>

    <div id="startButton">
        <img src="path/to/img.jpg">
    </div>

</div> 
```

我希望这对你有帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T11:13:46.680

在您的第一张图片上没有`div`L 格式，div 是矩形。

如果你想要一个像第一张图片这样的设计，请遵循 gabitzish 和/或 Arjen van Heck，如果你想要一个`div` **低于其他**（两个矩形），`clear: both;`请使用第二个 div 的 css 规则。

# java - Jasper 报告中的转换异常“无法创建报告 java.lang.String 无法转换为 java.lang.Integer”

> ID：10331809
> 
> 赞同：0
> 
> 时间：2012-04-26T10:43:27.133
> 
> 标签：java, swing, casting, jasper-reports

我是碧玉报告的新手。我使用 SQL Server 存储过程创建了一份报告。从 Swing 框架查看报告时，我收到以下异常。

```
 Could not create the report java.lang.String cannot be cast to java.lang.Integer 
```

我已经使用与 sql Server 2000 中存储过程的定义相同的数据类型定义了报表的参数。

以下是 .jrxml 文件的一部分，显示了存储的 proc 调用的参数和查询。

```
 <parameter name="CatID" class="java.lang.String"/>
<parameter name="Start" class="java.lang.Integer"/>
<parameter name="Stop" class="java.lang.Integer"/>
<parameter name="GoldID" class="java.lang.String"/>
<parameter name="Percentage" class="java.lang.Float"/>
<parameter name="Karat" class="java.lang.Integer"/>
<parameter name="DiaGrade" class="java.lang.Integer"/>
<parameter name="StoneGrade" class="java.lang.Integer"/>
<queryString>
    <![CDATA[{call PriceList($P{CatID},$P{Start}  ,$P{Stop},$P{GoldID},$P{Karat},$P{StoneGrade} ,$P{DiaGrade},$P{Percentage} ) }]]>
</queryString>
<field name="Design" class="java.lang.String"/>
<field name="DesignP" class="java.lang.String"/>
<field name="Model" class="java.lang.String"/>
<field name="GoldCode" class="java.lang.String"/>
<field name="CatID" class="java.lang.String"/>
<field name="OrnID" class="java.lang.Integer"/>
<field name="StoneID" class="java.lang.String"/>
<field name="ProfitPer" class="java.math.BigDecimal"/>
<field name="PlatingChg" class="java.lang.Integer"/>
<field name="SetCode" class="java.lang.String"/>
<field name="CompCost" class="java.math.BigDecimal"/>
<field name="USRate" class="java.math.BigDecimal"/>
<field name="CCost" class="java.math.BigDecimal"/>
<field name="Karat" class="java.lang.Integer"/>
<field name="GoldIDConv" class="java.lang.String"/>
<field name="StoneGrade" class="java.lang.Integer"/>
<field name="DiaGrade" class="java.lang.Integer"/>
<field name="CompCost1" class="java.math.BigDecimal"/>
<field name="GCost" class="java.math.BigDecimal"/>
<field name="ACost" class="java.math.BigDecimal"/>
<field name="SCost" class="java.math.BigDecimal"/>
<field name="Cost" class="java.math.BigDecimal"/>
<field name="Percentage" class="java.math.BigDecimal"/>
<field name="Price" class="java.math.BigDecimal"/> 
```

我的存储过程的一部分如下

```
 create PROCEDURE PriceList
@CatID      char(1),
@Start      int,
@Stop       int,
@GoldID     char(1),
@Karat      tinyInt,
@StoneGrade tinyint,
@DiaGrade   tinyInt,
@Percentage numeric(6,3)

    AS
    DECLARE @mGold varchar(4),
         @TotStones int,
     @StoneGradePrice int,
     @CurrRate numeric(9,5)

Select @mGold = ''

Select @CurrRate = Rate From Currency Where Currency = 1
           Select @TotStones = 0

Select @StoneGradePrice = 0

    IF @GoldID='W'
SELECT @mGold='W'

    IF @GoldID='N'
    SELECT @mGold='WN'

   IF @GoldID='P'
   SELECT @mGold='PT'

  IF @GoldID = 'Z' 
  Select @mGold = '(2T)'
  IF @GoldID = 'Q' 
  Select @mGold = '(2P)'
  SELECT    Design=convert(varchar(20),Design+@mGold),
  DesignP=Design,Model=dbo.GetModel(Design),GoldCode=@mGold,
    CatID,
    OrnID,
    StoneID,
    ProfitPer,
    PlatingChg,
    SetCode,
            CompCost ,
    USRate=@CurrRate,
    CCost=CUS/@CurrRate
INTO #CTemp
FROM Charges a
WHERE a.CatID=@CatID
     AND OrnID BETWEEN @Start AND @Stop

   IF @GoldID='0'or @GoldID = 'Z'  or @GoldID = 'T' or @GoldID = 'Q'   or @GoldID = 'V' 
SELECT  a.CatID,
OrnID,Small=max(isnull(b.Small,0)), Medium=max(isnull(b.Medium,0)), Large=max(isnull(b.Large,0)),Karat=@Karat,GCost=SUM(GUS),KChainConv=max(KChainConv)
INTO #GTemp
FROM GoldCost a left outer  join CatGoldPlatingChg b on a.catid = b.catid  and b.GoldID = @GoldID
WHERE a.CatID=@CatID AND mKarat=@Karat
     AND OrnID BETWEEN @Start AND @Stop 
GROUP BY a.CatID,OrnID

    SELECT  a.*,
    b.Karat,
    GoldIDConv=@GoldID,
StoneGrade,
    DiaGrade,
        CompCost1=coalesce(CompCost *((100+KChainConv)/100),0),
    GCost=coalesce(GCost,0) +( coalesce((case PlatingChg when 1 then           Small        when 2 then Medium else Large end),0)/@CurrRate) ,
                       ACost=coalesce(ACost,0),
    SCost= coalesce(SCost,0),
    Cost=coalesce(CCost,0)+ coalesce(ACost,0) + coalesce(GCost,0)+ (coalesce((case PlatingChg when 1 then Small when 2 then Medium else Large end),0)/@CurrRate) +coalesce(SCost,0) + coalesce(CompCost *((100+KChainConv)/100),0),
    Percentage=@Percentage,
    Price=(convert(numeric(10,0),ceiling((((
           coalesce(CCost,0)+ coalesce(ACost,0) + coalesce(GCost,0) + (coalesce((case PlatingChg when 1 then Small when 2 then Medium else Large end),0)/@CurrRate) +coalesce(SCost,0)) * (100+ProfitPer))/100) + coalesce((CompCost) *((100+KChainConv)/100),0) )  * (100+@Percentage)/100))
FROM #CTemp a
    LEFT JOIN tempdb.#GTemp b ON (a.CatID=b.CatID AND a.OrnID=b.OrnID )
    LEFT JOIN tempdb.#ATemp d ON (a.CatID=d.CatID AND a.OrnID=d.OrnID )
    LEFT JOIN tempdb.#STemp c ON (a.CatID=c.CatID AND a.OrnID=c.OrnID  AND a.StoneID=c.StoneID)
WHERE b.GCOST IS NOT NULL AND c.SCOST IS NOT NULL
ORDER BY a.CatID,a.OrnID 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T10:51:15.980

错误很明显：

```
java.lang.String cannot be cast to java.lang.Integer 
```

您正在尝试将 String 对象转换为 Integer。那是做不到的。它们不是同一类型。因此，相应地验证输入数据和定义的字段数据类型。其中之一是异常的原因。

# ruby-on-rails - Ruby on Rails 中的深度模型嵌套

> ID：10331811
> 
> 赞同：5
> 
> 时间：2012-04-26T10:43:34.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, nested

在一个相当大的项目中，我遇到了深度模型嵌套的问题。例如存在这样的模型：

```
class Communication::Conversation::ForProposal < Communication::Conversation::Base
  ...
end 
```

此外，每次我们需要指定 table_name、class_name、foreign_keys 等。

您知道哪些替代方案以及您认为模型实际上应该如何命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:52:31.650

在最新版本的 Rails 中，您可以通过将模型放在 app/models 下的目录中来命名模型。您可以为这些模型尝试 app/models/communication/conversation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:35:59.820

您应该考虑使用 mixins。它可以帮助您按功能组织代码，从而使您的代码更清晰。以下页面很好地解释了它。

[http://juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/](http://juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/)

我一直在 GitHub 上查看 Rails 的一些源代码，非常干净。他们大量使用mixin。

[https://github.com/rails/rails/tree/master/activemodel/lib](https://github.com/rails/rails/tree/master/activemodel/lib)

# sql-server - SQL Server ISDATE() 函数 - 有人可以解释一下吗？

> ID：10331817
> 
> 赞同：5
> 
> 时间：2012-04-26T10:44:03.633
> 
> 标签：sql-server, function, date-formatting

因此，我查看了 SQL Server 中 ISDATE() 函数的文档，并在示例中看到了这一点：

```
SET DATEFORMAT mdy;
SELECT ISDATE('15/04/2008'); --Returns 0.
SET DATEFORMAT mdy;
SELECT ISDATE('15/2008/04'); --Returns 0.
SET DATEFORMAT mdy;
SELECT ISDATE('2008/15/04'); --Returns 0.
SET DATEFORMAT mdy;
SELECT ISDATE('2008/04/15'); --Returns 1. 
```

最后一个示例返回 1（有效日期），但上面的日期格式与函数表达式中的格式不匹配。我认为这是文档中的错误，但后来好奇地自己尝试了一下，它确实返回了 1。

那么，当日期格式为 mdy 时，为什么 '2008/04/15' 是有效日期？

此处的文档：http: [//msdn.microsoft.com/en-us/library/ms187347 (SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms187347(SQL.105).aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T10:50:16.950

来自[http://msdn.microsoft.com/en-us/library/ms187347%28SQL.105%29.aspx#SessionSettingDependencies](http://msdn.microsoft.com/en-us/library/ms187347%28SQL.105%29.aspx#SessionSettingDependencies)

> ISDATE 的返回值取决于 SET DATEFORMAT、SET LANGUAGE 和默认语言选项设置的设置。

因此，如果给定的字符串不适用于设置的日期格式，它还会检查默认语言选项，该选项允许日期格式为 y/m/d

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T11:16:22.690

如果我们将 DateFormat 设置为 mdy，那么它将对该格式的所有日期验证为真。

如果根据 mdy 发现无效的日期格式，则根据语言检查设置。如果根据语言支持找到有效日期，则返回 true，否则返回 false。

如果用户 A 的默认语言为 us_english，则 2006 年 4 月 6 日的日期将被解释为 2006 年 4 月 6 日。如果用户 B 的默认语言为“英国”，则日期将被解释为 6 月 4 日， 2006 年。

```
/* Use these sessions settings. */
SET LANGUAGE us_english;
SET DATEFORMAT mdy;
/* Expression in mdy dateformat */
SELECT ISDATE('04/15/2008'); --Returns 1.
/* Expression in mdy dateformat */
SELECT ISDATE('04-15-2008'); --Returns 1\. 
/* Expression in mdy dateformat */
SELECT ISDATE('04.15.2008'); --Returns 1\. 
/* Expression in myd  dateformat */
SELECT ISDATE('04/2008/15'); --Returns 1.

SET DATEFORMAT mdy;
SELECT ISDATE('15/04/2008'); --Returns 0.
SET DATEFORMAT mdy;
SELECT ISDATE('15/2008/04'); --Returns 0.
SET DATEFORMAT mdy;
SELECT ISDATE('2008/15/04'); --Returns 0.
SET DATEFORMAT mdy;
SELECT ISDATE('2008/04/15'); --Returns 1.

SET DATEFORMAT dmy;
SELECT ISDATE('15/04/2008'); --Returns 1.
SET DATEFORMAT dym;
SELECT ISDATE('15/2008/04'); --Returns 1.
SET DATEFORMAT ydm;
SELECT ISDATE('2008/15/04'); --Returns 1.
SET DATEFORMAT ymd;
SELECT ISDATE('2008/04/15'); --Returns 1.

SET LANGUAGE English;
SELECT ISDATE('15/04/2008'); --Returns 0.
SET LANGUAGE Hungarian;
SELECT ISDATE('15/2008/04'); --Returns 0.
SET LANGUAGE Swedish;
SELECT ISDATE('2008/15/04'); --Returns 0.
SET LANGUAGE Italian;
SELECT ISDATE('2008/04/15'); --Returns 1.

/* Return to these sessions settings. */
SET LANGUAGE us_english;
SET DATEFORMAT mdy; 
```

数字格式可以使用破折号 (-)、点 (.) 或斜线 (/) 作为分隔符。SQL Server 解析字符串的规则不会因分隔符而改变。一个常见的误解是 ANSI SQL 格式（有时被错误地称为“ISO 格式”），1998-02-23，对于 smalldatetime 和 datetime 是语言中立的。它不是。它是一种数字格式，因此它取决于 SET DATEFORMAT 和 SET LANGUAGE 设置：

```
SET LANGUAGE us_english 
SELECT CAST('2003-02-28' AS datetime) 
-----------------------
2003-02-28 00:00:00.000

SET LANGUAGE british 
SELECT CAST('2003-02-28' AS datetime) 
Server: Msg 242, Level 16, State 3, Line 4
The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value. 
```

请仔细阅读错误信息。它准确地说明了问题所在。您将日期时间值指定为字符串，并且由于该字符串不是根据您使用的格式和 DATEFORMAT 设置形成的，因此 SQL Server 无法将该字符串转换为日期时间值。

# linux - 如何在没有调试符号的情况下调试核心文件

> ID：10331818
> 
> 赞同：1
> 
> 时间：2012-04-26T10:44:06.090
> 
> 标签：linux

我有一个没有调试符号的核心文件，但是当崩溃时，又生成了一个带有 .debug 扩展名的文件。

我从来没有使用过这个文件。是否可以使用此 .debug 文件调试内核？

# ios - AWS ios 分段上传

> ID：10331819
> 
> 赞同：1
> 
> 时间：2012-04-26T10:44:09.867
> 
> 标签：ios, file-upload, amazon-web-services, multipart

我想在 aws 存储桶上上传大型音频文件。如何使用 s3 中的多部分上传功能来实现这一点？任何教程的链接都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:59:20.957

我将从 iOS SDK 开始： http: [//aws.amazon.com/sdkforios/](http://aws.amazon.com/sdkforios/)

这是您可能已经看过的文档：http:
[//docs.amazonwebservices.com/AWSiOSSDK](http://docs.amazonwebservices.com/AWSiOSSDK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:02:27.047

Amazon 的[AWS SDK for iOS](http://aws.amazon.com/sdkforios/)声称能够“使用 Amazon S3 存储和检索任意数量的数据”。我自己没有尝试过，但下载 SDK 并使用示例文件可能是一个不错的起点。

# c++ - 测试使用 wxwidgets 中的线程的应用程序

> ID：10331822
> 
> 赞同：1
> 
> 时间：2012-04-26T10:44:22.657
> 
> 标签：c++, multithreading, testing, wxwidgets

我有一个项目： - 访问[http://wxwidgetsthreadsafety.blogspot.in/](http://wxwidgetsthreadsafety.blogspot.in/)，该项目说一个线程正在增加计数器的值直到它达到 0xFFFFFFFF 和另一个线程 main() 显示值，虽然我已经使用了关键部分，我需要知道如何测试它，我的意思是我想运行多个线程，比如 10 个线程并进行测试。

我正在使用 wxwidgets-2.8.12 和 netbeans 7.1.1 如果有，请添加代码。

谢谢

# c# - 静态方法中的 div runat="server" 空引用异常

> ID：10331824
> 
> 赞同：2
> 
> 时间：2012-04-26T10:44:28.633
> 
> 标签：c#, html, user-controls, static, nullreferenceexception

我在设置为 runat 服务器的 aspx 页面中有一个 div。

```
<div class="article-container" runat="server" id="divArticleContainer"></div> 
```

现在这个 div 将通过静态方法添加一个用户控件：

```
public static void LoadCurrentArticle(int index)
    {
        divArticleContainer.Controls.Clear();
        Page pg = new Page();
        string path = @"/Frontend/Controls/Article/ArticleItem.ascx";
        ArticleItem control = (ArticleItem)pg.LoadControl(path);
        control.Functionality.article = Functionality.articles.ElementAt(index);
        divArticleContainer.Controls.Add(control);
    } 
```

基本上是为了给你一个简要的概述，我的程序正在加载一个新闻文章列表。在触摸手势（向左或向右滑动）上，对 Web 方法 GetNext() 和 GetPrevious() 的 ajax 调用将移动到列表中的下一项或上一项。

```
[WebMethod]
    public static void GetNext(int index)
    {
        int idx = index;
        idx++;
        if (idx < Functionality.articles.Count())
        {
            LoadCurrentArticle(idx);
            Functionality.index = idx;
        }
        else
        {
            idx = 0;
            LoadCurrentArticle(idx);
            Functionality.index = idx;
        }
    }

    [WebMethod]
    public static void GetPrevious(int index)
    {
        int idx = index;
        idx--;
        if (idx >= 0)
        {
            LoadCurrentArticle(idx);
            Functionality.index = idx;
        }
        else
        {
            idx = Functionality.articles.Count() - 1;
            LoadCurrentArticle(idx);
            Functionality.index = idx;
        }
    } 
```

我的主要问题是“divArticleWrapper”返回一个空引用异常。有解决这个问题的方法吗？ ![在此处输入图像描述](../Images/4bdb5e0abb1a82614b73e2e5fb9ec6be.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:48:39.537

在静态方法中，您无法访问页面控件 `divArticleWrapper`...

您不能从静态方法访问非静态控件。

静态方法只能访问静态变量..

**编辑**

静态方法不能访问实例状态（例如非静态控件）。从方法声明中删除静态，或者将控件的引用作为参数传递给方法：

```
private static void YourStaticMethod(HtmlControl div) 
{    
 //than do your task
} 
```

...并这样称呼它：

```
YourStaticMethod(divArticleWrapper); 
```

# c# - 找不到网络路径

> ID：10331825
> 
> 赞同：0
> 
> 时间：2012-04-26T10:44:30.083
> 
> 标签：c#, .net, webclient

我正在尝试将文件发送到我们的一台服务器，但我不断收到错误“找不到网络路径”。下面是我用来发送文件的代码

```
 try
        {                
            Console.WriteLine("Uploading file to server....Please wait!!");
            WebClient client = new WebClient();

            NetworkCredential nc = new NetworkCredential(userName, password, "domain");

            Uri address = new Uri(@"\\126.00.00.01\MyFolder\test.txt");

            client.Credentials = nc;

            string fullpath = Path.Combine(Directory.GetCurrentDirectory(), filePath);

            byte[] arrReturn = client.UploadFile(address, fullpath);
            Console.WriteLine("File uploaded sucessfully");
            System.Threading.Thread.Sleep(2000);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            System.Threading.Thread.Sleep(5000);
        } 
```

请问我做错了什么。服务器在测试时似乎可以在 Windows 资源管理器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:52:20.220

[连接网络共享时如何提供用户名和密码](https://stackoverflow.com/questions/295538/how-to-provide-user-name-and-password-when-connecting-to-a-network-share)-看答案

您不能使用 WebClient 将文件写入 UNC 路径

# php - 向用户显示 json 时的 XSS

> ID：10331827
> 
> 赞同：0
> 
> 时间：2012-04-26T10:44:32.003
> 
> 标签：php, javascript, jquery, json, xss

我通过 jQuery 获取一些 JSON 格式的数据，然后我需要将其显示给用户，但是它容易受到 XSS 攻击。我在这里有什么选择，我应该在将数据放入数据库之前去除字符吗？我正在使用的框架（Kohana）有一个漂亮的功能`HTML::Chars();`，但由于我用 javascript 显示数据，所以我不能在那里使用它。

一种选择似乎是遍历**每个**被 json 编码的数组元素并应用于`HTML::Chars();`它。它是唯一的选择吗，如果是这样，那么这样做的最佳方式是什么？

例子：

1.  用户输入一些数据：`title, body`
2.  数据存储到数据库中
3.  然后其他一些用户进入站点，从数据库中获取数据数组并导出为 json 格式
4.  我的 jQuery 脚本正在获取 json 并将新元素附加到我的页面正文。

代码：

```
$(document).ready(function(){
    $.ajax({
        url: '/timeline/latest/1',
        dataType: 'json',
        success: function(data){
            $.each(data, function(key, val) {
                switch (val.type){
                    case 'post': // I have only made post so far
                        addPost(val);
                        break;
                }
            });
        }
    });
})
function addPost(val){
    $('.content .timeline').prepend(val.title + '<br />' + val.body); // xss vulnerable
} 
```

从数据库中获取数据

```
<?php

class Controller_Timeline extends Controller{
    public function Action_Latest(){
        $parentID = $this->request->param('id');
        $modelTimeline = new Model_Timeline();

        // Here I get latest entries, big array
        $latest = $modelTimeline->Latest($parentID);

        // Response it and encode with JSON
        $this->response->body(json_encode($latest));
    }
} 
```

到目前为止，我的解决方案是这样的，在我回显 $latest 我遍历数组并应用反 xss 函数之前，我不知道它有多优化：

```
array_walk($latest, function(&$latest){
    foreach ($latest as &$key){
        $key = HTML::chars($key);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:00:36.567

我建议你像 Drupal 那样做。

Drupal 不过滤任何输入。如果要显示此 HTML 代码而不进行过滤，它会将文本存储在具有 XSS 漏洞的数据库中。

相反，它会过滤输出。你绝对应该在服务器端这样做。

您应该从[`filter_xss()`](http://api.drupal.org/api/drupal/core!includes!common.inc/function/filter_xss/8)Drupal 使用的功能中启发自己。

确保它适用于您的每个条目。如果可以的话，请在全球范围内进行，如下所示：

```
// In the Model_Timeline class
public function Latest( $id ) {

    // Get your array, and then
    foreach ( $array as $entry ) {

        // Filter each entry
        // I use $util->filter_xss but use it how you implemented it
        $entry = $util->filter_xss( $entry );
    }

    // And return the filtered array
    return $array;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:10:39.513

您应该在将 mysql_real_escape_string 存储到数据库之前调用它，htmlspecialchars 是可选的。您的问题是您不想只向用户显示 html，因此 htmlspecialchars 将无法工作，因为它会编码类似`<a>`的内容，`&lt;a&gt;`因此如果您打算在用户页面上使用 html（您会必须再次将其转回可用的 html，这样就显得多余了）。

在这种情况下，没有简单的答案 - 这取决于您正在处理什么样的 html？如果它是纯粹的演示，`<em>` `<p>` `<strong>`你应该严格解析 html 服务器端并检查它是否只有这些东西，并拒绝或删除任何危险的东西，如`<script>`. 但它更复杂，因为您还必须对 onClick="do something bad" 等元素属性中的 javascript 感到厌烦。

总之，在使用 PHP 发送 JSON 之前清理你的 html，这是最好的代表：[http ://htmlpurifier.org/](http://htmlpurifier.org/)

# .net - 更改某些记录器的日志记录级别

> ID：10331828
> 
> 赞同：0
> 
> 时间：2012-04-26T10:44:40.130
> 
> 标签：.net, log4net

我在我的应用程序中使用 log4net 进行日志记录，它工作正常。

我使用的库之一（NHibernate）也使用 log4net，我也想记录它的消息，但我想用不同的级别记录它们。因此，如果库使用 level 记录某些内容`ERROR`，我希望消息以 level 出现在我的日志中`WARN`，因为我不认为这些是错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:40:04.990

据我所知：你不能。

您可以做的是将休眠错误记录到不同的附加程序，这样它们就不会出现在错误所在的“正常”日志中。你会得到这样的东西：

```
<root>
  <level value="ERROR" />
  <appender-ref ref="NormalLogAppender" />
</root>
<logger name="NHibernate">
  <level value="ERROR" />
  <appender-ref ref="NHibernateLogAppender" />
</logger> 
```

# windows-phone-7 - 使用 MvvmCross 框架时查找两个 Geo 位置之间的距离

> ID：10331836
> 
> 赞同：1
> 
> 时间：2012-04-26T10:45:29.653
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我正在使用 MvvmCross 框架来构建一个跨平台（iOS、Android、WP7）应用程序。我正在使用 MvxGeoLocationWatcher，它为我创建具有所需的经度、纬度、速度、航向等的 MvxGeoLocation 对象。

我需要找到两个位置之间的距离（如乌鸦飞翔）。在 Android 上，我调用`fromLocation.distanceTo(toLocation)`. 在 iO 上我会使用`CLLocationDistance distance = [fromLocation distanceFromLocation:toLocation];`.

因此，这两个平台都使用位置上的方法来计算距离，而这目前在 MvxGeoLocation 对象上不可用。

有计划尽快添加吗？如果不是，我添加此功能的最佳方法是什么？

1.  我是否会更改类本身并提供特定于平台的实现 - 也许通过使其成为部分类并将特定代码放入特定于平台的代码部分类中。或者也许通过使用扩展方法？
2.  或者也许最好的方法是采用两点并返回距离的方法。在什么情况下这个方法应该在 MvxGeoLocationWatcher 上？
3.  在我自己中添加计算算法，可能使用[计算两个地理点在 km c# 中的距离](https://stackoverflow.com/questions/6544286/calculate-distance-of-two-geo-points-in-km-c-sharp)并忘记使用平台特定的实现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:02:49.353

目前 mvvmcross 故意不包括 lat/lng 计算。

这样做的动机是：

*   减少代码大小 - 并非每个应用程序都需要这些计算
*   此外，我认为某些计算最好由本机库而不是通用 C# 完成 - 例如，某些多边形计算将受益于本机硬件加速。这种类型的想法不仅适用于地理计算，还适用于其他领域 - 例如，无论需要像图像处理这样的事情，那么使用本机加速是有意义的。

可能 mvvmcross 在将来的某个时候提供了一个“官方的”位置助手 IoC 插件（或一组扩展方法）......例如，也许我们围绕[http://xamarin.com/mobileapi](http://xamarin.com/mobileapi)构建了一个 IoC 插件。 ..我也很高兴其他人也能构建和发布它们。

所以....

在一个非常简单的层面上，计算两个 lat/lng 点之间的距离在 C# 中很容易实现 - 有大量相当简单的代码示例可用，例如[http://www.movable-type.co 上的优秀 javascript 示例。 uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html) - github 和 codeplex 上有大量库，例如[http://sharpmap.codeplex.com/](http://sharpmap.codeplex.com/)

在 RunSat（包括 iPhone）中，我使用：

```
using System;

namespace Cirrious.NewRunSat.Core.Models.Utils
{
    public class DistanceCalcs
    {
        /// <summary>
        /// Calculates the distance between two points of latitude and longitude.
        /// Great Link - http://www.movable-type.co.uk/scripts/latlong.html
        /// </summary>
        /// <param name="lat1">First coordinate.</param>
        /// <param name="long1">First coordinate.</param>
        /// <param name="lat2">Second coordinate.</param>
        /// <param name="long2">Second coordinate.</param>
        /// <returns>the distance in metres</returns>
        public static Double DistanceInMetres(double lat1, double lon1, double lat2, double lon2)
        {

            if (lat1 == lat2 && lon1 == lon2)
                return 0.0;

            var theta = lon1 - lon2;

            var distance = Math.Sin(deg2rad(lat1)) * Math.Sin(deg2rad(lat2)) +
                           Math.Cos(deg2rad(lat1)) * Math.Cos(deg2rad(lat2)) *
                           Math.Cos(deg2rad(theta));

            distance = Math.Acos(distance);
            if (double.IsNaN(distance))
                return 0.0;

            distance = rad2deg(distance);
            distance = distance * 60.0 * 1.1515 * 1609.344;

            return (distance);
        }

        private static double deg2rad(double deg) {
          return (deg * Math.PI / 180.0);
        }

        private static double rad2deg(double rad) {
          return (rad / Math.PI * 180.0);
        }
    }
} 
```

请注意，此片段上的许可证是 CC 归属 - 因为它源自可移动类型 - [http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)：

> 我提供这些公式和脚本供免费使用和改编，作为我对开源信息领域的贡献，我从中获得了很多。欢迎您重新使用这些脚本 [根据简单的署名许可，没有任何明示或暗示的保证]，前提是您保留我的版权声明和对本页的引用。

# google-drive-api - 通过 google drive api 恢复视频 url，以便在 html5 播放器中流式传输视频

> ID：10331837
> 
> 赞同：4
> 
> 时间：2012-04-26T10:45:32.913
> 
> 标签：google-drive-api

我看到谷歌驱动器使用 Flash 播放器来传输上传的视频。

您是否知道 google drive api 是否提供视频的绝对 URL 以便使用 html5 播放器流式传输视频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:53:54.360

[答案](https://stackoverflow.com/questions/10311092/displaying-files-e-g-images-stored-in-google-drive-on-a-website/10313702)与嵌入图像的答案非常相似。

因此，基本上要获取可嵌入视频的 URL，您必须：

*   在 Drive 应用程序中，当用户单击文件并使用您的应用程序打开它时，您可以通过 URL 参数获取文件的 ID。
*   使用 Drive API 和文件 ID 查询文件元数据：返回的文件元数据是一个包含一堆信息的 JSON 对象。
*   在文件元数据中有一个名为“downloadURL”的属性，它给出了实际文件的 URL。

获取文件元数据的示例在[这里](https://developers.google.com/drive/v1/reference/files/get)。

如果您的文件已公开共享，则该 URL 将可直接访问。如果文件不是公开的，您将不得不使用 OAuth 2.0 来授权对该 URL 的请求。

问题：该 URL 只能暂时起作用。所以它并不适用于每个用例。

# eclipse - ECLIPSE Indigo 启动时的运行时异常

> ID：10331838
> 
> 赞同：1
> 
> 时间：2012-04-26T10:45:35.233
> 
> 标签：eclipse, application-error, startup-error

发生了错误。检查日志文件。

* * *

## 错误详情：

!ENTRY org.eclipse.osgi 4 0 2012-04-26 16:04:01.984 !MESSAGE 应用程序错误 !STACK 1 java.lang.RuntimeException: 应用程序“org.eclipse.ui.ide.workbench”在注册表。可用的应用程序有：org.eclipse.ant.core.antRunner、org.eclipse.equinox.app.error、org.eclipse.equinox.p2.director、org.eclipse.equinox.p2.garbagecollector.application、org.eclipse .pde.junit.runtime.uitestapplication, org.eclipse.pde.junit.runtime.legacytestapplication, org.eclipse.pde.junit.runtime.coretestapplication, org.eclipse.pde.junit.runtime.coretestapplicationnonmain, org.eclipse.pde .junit.runtime.nonuithreadtestapplication、org.eclipse.update.core.standaloneUpdate、org.eclipse.update.core.siteOptimizer。在 org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248) 在 org.

# php - 用 PHP 编写 MySQL 数据库查找/替换脚本

> ID：10331843
> 
> 赞同：7
> 
> 时间：2012-04-26T10:45:51.143
> 
> 标签：php, mysql, wordpress, migration

我目前正在将我的定制网站重新开发为 WordPress 驱动的 CMS。

我一直在做的网站只是我现有的 URL plus `/dev/`，即`http://my.website.com/dev/`.

我将把这个网站`http://my.website.com`移到周末，因此需要删除对`/dev/`URL 的所有引用。

基本上，我想做的是`/dev`对我的数据库进行“查找和替换”。我可以确切地看到哪些表具有此值，但是根据 WordPress 安装，很多这些字段自然是序列化数据 - 一个简单的`dump`> `open with notepad++`>`find & replace`会破坏。

我为此目的开发的代码在这里：

```
<?php

$look_at[] = array( "table" => "wp_options", "fields" => array( "option_value" ), "id_field" => "option_id" );
$look_at[] = array( "table" => "wp_postmeta", "fields" => array( "meta_value" ), "id_field" => "meta_id" );
$look_at[] = array( "table" => "wp_posts", "fields" => array( "post_content", "guid" ), "id_field" => "ID" );
$look_at[] = array( "table" => "wp_sfmeta", "fields" => array( "meta_value" ), "id_field" => "meta_id" );
$look_at[] = array( "table" => "wp_sfoptions", "fields" => array( "option_value" ), "id_field" => "option_id" );
$look_at[] = array( "table" => "wp_sferrorlog", "fields" => array( "error_text" ), "id_field" => "id" );

for ( $i = 0; $i < sizeof ( $look_at ); $i++ ) {
    foreach( $look_at[$i]["fields"] as $field ) {

        $sql = 'SELECT `' . $field . '`, `' . $look_at[$i]["id_field"] . '` FROM  `' . $look_at[$i]["table"] . '`;';
        $res = mysql_query( $sql );

        while ( $row = mysql_fetch_assoc( $res ) ) {

            $table = $look_at[$i]["table"];
            $id_field = $look_at[$i]["id_field"];
            $old_val = $row[$field];
            $id = $row[$id_field];

            $unserialized_value = @unserialize( $old_val );

            if ( $old_val === 'b:0;' || $unserialized_value !== false )
                $new_val = serialize( str_replace( array( "/dev/", "/dev" ), array( "/", "" ), $unserialized_value ) );
            else
                $new_val = str_replace( array( "/dev/", "/dev" ), array( "/", "" ), $old_val );

            $update_array[] = array( "id_field" => $id_field, "id" => $id, "table" => $table, "key" => $key, "old_val" => $old_val, "new_val" => $new_val );

        }

    }
}

for ( $i = 0; $i < sizeof( $update_array ); $i++ ) {
    if ( $update_array[$i]["old_val"] !== $update_array[$i]["new_val"] )
        $updated_sql .= 'UPDATE ' . $update_array[$i]["table"] . ' SET `' . $update_array[$i]["key"] . '` = \'' . $update_array[$i]["new_val"] . '\' WHERE `' . $update_array[$i]["id_field"] . '` = \'' . $update_array[$i]["id"] . '\';';
}

mysql_query( $updated_sql );

?> 
```

* * *

序列化数据示例：

```
a:6:{s:5:"width";s:3:"400";s:6:"height";s:3:"530";s:14:"hwstring_small";s:22:"height='96' width='72'";s:4:"file";s:30:"2011/12/Amazonas-English-1.jpg";s:5:"sizes";a:13:{s:9:"thumbnail";a:3:{s:4:"file";s:30:"Amazonas-English-1-125x165.jpg";s:5:"width";s:3:"125";s:6:"height";s:3:"165";}s:6:"medium";a:3:{s:4:"file";s:30:"Amazonas-English-1-339x450.jpg";s:5:"width";s:3:"339";s:6:"height";s:3:"450";}s:5:"large";s:0:"";s:14:"post-thumbnail";a:3:{s:4:"file";s:30:"Amazonas-English-1-125x165.jpg";s:5:"width";s:3:"125";s:6:"height";s:3:"165";}s:23:"indexleft-species-thumb";a:3:{s:4:"file";s:30:"Amazonas-English-1-200x265.jpg";s:5:"width";s:3:"200";s:6:"height";s:3:"265";}s:13:"species-thumb";a:3:{s:4:"file";s:30:"Amazonas-English-1-288x381.jpg";s:5:"width";s:3:"288";s:6:"height";s:3:"381";}s:17:"indexheader-thumb";a:5:{s:4:"file";s:30:"Amazonas-English-1-400x300.jpg";s:5:"width";s:3:"400";s:6:"height";s:3:"300";s:4:"path";s:38:"2011/12/Amazonas-English-1-400x300.jpg";s:3:"url";s:88:"http://www.xxxxxxxxxxx.com/dev/wp-content/uploads/2011/12/Amazonas-English-1-400x300.jpg";}s:14:"random-thumb-1";a:3:{s:4:"file";s:28:"Amazonas-English-1-56x75.jpg";s:5:"width";s:2:"56";s:6:"height";s:2:"75";}s:14:"random-thumb-2";a:3:{s:4:"file";s:29:"Amazonas-English-1-75x100.jpg";s:5:"width";s:2:"75";s:6:"height";s:3:"100";}s:14:"random-thumb-3";a:3:{s:4:"file";s:29:"Amazonas-English-1-94x125.jpg";s:5:"width";s:2:"94";s:6:"height";s:3:"125";}s:14:"random-thumb-4";a:3:{s:4:"file";s:30:"Amazonas-English-1-113x150.jpg";s:5:"width";s:3:"113";s:6:"height";s:3:"150";}s:14:"random-thumb-5";a:3:{s:4:"file";s:30:"Amazonas-English-1-132x175.jpg";s:5:"width";s:3:"132";s:6:"height";s:3:"175";}s:13:"d4p-bbp-thumb";s:0:"";}s:10:"image_meta";a:10:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";}} 
```

**附加编辑**

不幸的是，在其他序列化数组中还有其他实例`/dev/`，例如这个例子：

`'a:1:{i:0;a:5:{s:4:"type";s:5:"image";s:3:"loc";s:107:"/home/xxxxx/domains/xxxxxxxxx.com/public_html/dev/wp-content/sp-resources/forum-image-uploads/matt/2012/01/";...`

或者，

`a:1:{i:0;a:5:{s:4:"data";s:88:"Your search - <b>link:http://www.xxxxxxxxx.com/dev/</b> - did not match any documents. ";...`

因此，我不认为一个简单的`preg_replace`（或回调）会成功，但我想一个高级的可能？

* * *

我的问题是：

1.  有没有更简单的方法来做到这一点？！
2.  上面的代码会遇到什么问题吗？

我很难预见我的代码会出现问题（糟糕的程序员，我深表歉意），因此对使用此代码运行测试有点担心。

* * *

**最后编辑：工作代码**

因为我的 SQL 转储几乎是`100mb`，所以我不得不使用具有无限内存的 WAMP。

```
<?php
    error_reporting(E_ALL);
    ini_set('display_errors', 'On');
    ini_set('memory_limit', '-1');

    $handle = @fopen("amend-this.sql", "r");
    if ($handle) {
        while (($buffer = fgets($handle, 4096)) !== false) {
          $newLine = preg_replace_callback('@s:(\d+)(:\\\"[^"]*www.seriouslyfish\.com)/dev@', create_function('$matches', 'return \'s:\'.($matches[1] - 4).$matches[2];'), $buffer);
          $newLine = preg_replace_callback('@s:(\d+)(:\\\"[^\\\"]*/home/sfish/domains/seriouslyfish\.com/public_html)/dev@', create_function('$matches', 'return \'s:\'.($matches[1] - 4).$matches[2];'), $newLine);
          $newLine = str_replace('http://dunc.seriouslyfish.com/dev/', 'http://www.seriouslyfish.com/', $newLine);
          $newLine = str_replace('http://www.seriouslyfish.com/dev/', 'http://www.seriouslyfish.com/', $newLine);
          $newLine = str_replace('/dev', '', $newLine);
          file_put_contents( "amended.sql", $newLine, FILE_APPEND );
        }
        fclose($handle);
    }
?> 
```

此代码将我的新 SQL 文件放入同一目录 ( `X:\wamp\www`) 中，以便我进一步操作。

我在数据重复方面遇到了一些问题，`/dev`由于某种原因，文件中仍有 67 个实例，但我使用[Notepad++](http://notepad-plus-plus.org/)和[WinMerge](http://winmerge.org/)对所有这些进行了整理，最后我花了大约 45 分钟来搜索/替换超过 9000 万个字符的数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T10:54:07.753

当我遇到同样的问题时，我运行了数据库的 mysqldump，然后在文本编辑器中打开并搜索/替换值，然后使用 SQL 创建新数据库。非常简单，速度惊人，尤其是一次性的。

正如所指出的，序列化数据有问题，所以你可以用一个简单的 PHP 文件做类似的事情：

```
<?php
$handle = @fopen("/tmp/dump.sql", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
      $newLine = preg_replace_callback('@s:(\d+)(:\\\"[^"]*xxxxxxxxxxx\.com)/dev@', create_function('$matches', 'return \'s:\'.($matches[1] - 4).$matches[2];'), $buffer);
      $newLine = preg_replace_callback('@s:(\d+)(:\\\"[^\\\"]*xxxxxxxxxxx\.com/public_html)/dev@', create_function('$matches', 'return \'s:\'.($matches[1] - 4).$matches[2];'), $newLine);
      $newLine = str_replace('http://www.xxxxxxxxxxx.com/dev/', 'http://www.xxxxxxxxxxx.com/', $newLine);
      echo $newLine;
    }
    fclose($handle);
}
?> 
```

**注意：**这适用于 mysqldump，如果您正在测试，则需要删除s 中的s`\\\`之前的 - 这只是 mysqldump 转义引号。`"``preg_replace_callback`

**另请注意：**有两个 preg 替换（一个用于普通 URL，一个用于服务器路径），一个 str 替换用于剩余的标准 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T10:52:58.157

有序列化修复程序 wordpress 插件，它为非程序员做： http: [//davidcoveney.com/575/php-serialization-fix-for-wordpress-migrations/](http://davidcoveney.com/575/php-serialization-fix-for-wordpress-migrations/)

您也可以[使用 PHP](http://caritatis.wordpress.com/2010/06/18/fixing-paths-in-drupal-database/)来完成。

此外，这是一个示例 MySQL 代码： [https ://data.stackexchange.com/drupal%20answersmeta/query/80128/sql-search-and-replace](https://data.stackexchange.com/drupal%20answersmeta/query/80128/sql-search-and-replace)

小心，因为这是一个非常危险的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T17:47:40.387

您不能为此使用 WP CLI 吗？

```
wp search-replace https://example.dev https://example.com 
```

# c# - 如何阅读 configSections

> ID：10331844
> 
> 赞同：4
> 
> 时间：2012-04-26T10:45:51.300
> 
> 标签：c#, app-config

我在我的 App.Config 中设置了一些自定义配置部分，因此我现在有一个看起来像这样的 configSection。

```
<configSections>
    <section name="Section1" type="ConfigSections.MySection, MyNamespace"/>    
    <section name="Section2" type="ConfigSections.MySection, MyNamespace"/>    
    <section name="Section3" type="ConfigSections.MySection, MyNamespace"/>    
</configSections> 
```

我想做的是在代码中阅读*这一部分*，以便在运行时找出我有哪些部分。我试过了：

```
var mySections = ConfigurationManager.GetSection("configSections"); 
```

但这返回null。我确定我错过了一些简单的东西，但我找不到任何关于如何做到这一点的信息。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T11:33:54.970

使用[`Configuration.Sections`](http://msdn.microsoft.com/library/system.configuration.configuration.sections%28v=vs.80%29.aspx)-property 获取声明的配置节的名称。然后，如果需要，可以选择使用`ConfigurationManager.GetSection()`来检索单个部分。

请注意，您可能希望使用相应的[`SectionInformation.IsDeclared`](http://msdn.microsoft.com/library/system.configuration.sectioninformation.isdeclared%28v=vs.80%29.aspx)或`ConfigSource`的值[`ConfigurationSection.SectionInformation`](http://msdn.microsoft.com/library/system.configuration.configurationsection.sectioninformation%28v=vs.80%29.aspx)来找出该部分实际上是在您的配置文件中声明的，还是继承自`machine.config`或以其他方式。

例子：

```
 var cfg = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
    var localSections = cfg.Sections.Cast<ConfigurationSection>()
       .Where(s => s.SectionInformation.IsDeclared); 
```

最后，请注意，这种方法只会让您获得配置部分。它不会返回配置部分，这些配置部分本身位于`<sectionGroup>`. 对于他们，您首先需要 iterate over `Configuration.SectionGroups`，它有自己的[`Sections`](http://msdn.microsoft.com/library/system.configuration.configurationsectiongroup.sections%28v=vs.80%29.aspx)-property 包含每个部分组部分。它还可以包含嵌套的部分组，再次通过[`SectionGroups`](http://msdn.microsoft.com/library/system.configuration.configurationsectiongroup.sectiongroups%28v=vs.80%29.aspx)每个`ConfigurationSectionGroup`实例的属性访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:23:15.453

如果将所有部分放入一个部分组中，这将起作用：

```
<configSections>
      <sectionGroup name="FMGlobal.Common.SecuritySubsystem.ADAzManFeed">
        <section name="ADFolders" type="System.Configuration.NameValueSectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      </sectionGroup>
    </configSections>

  var  NVC = (ConfigurationManager.GetSection( _
    "FMGlobal.Common.SecuritySubsystem.ADAzManFeed") 
```

# java - 在java中合并已经排序的LinkedList

> ID：10331847
> 
> 赞同：0
> 
> 时间：2012-04-26T10:46:04.740
> 
> 标签：java, sorting, data-structures, linked-list

我收到一个问题，说合并已经对 2 个linkedList 进行了排序，并将最终输出作为 Sorted LinkedList。所以我使用了合并排序算法的合并方法并得到了输出，它实际上是正确的方法还是我应该遵循其他方法。

这是一段用于理解的代码-

```
private <T extends Comparable<T>> List<T> merge(List<T> left , List<T> right){
    List<T> result = new ArrayList<T>();
    while(left.size()>0 && right.size()>0){
        //Left is less than right
        if(left.get(0).compareTo(right.get(0))<0)
            result.add(left.remove(0)); //add the left if small and remove it from the list             
        else
            result.add(right.remove(0));
    }

    //if left size is greater than 0 , the needed to add left to result
    //it proves that if any of the sizes of left/right is more then those are greater size
    if(left.size()>0)
        result.addAll(left);
    else
        result.addAll(right);

    return result;
} 
```

我的输入 -

```
 List<String> sorted1 = new LinkedList<String>();
            sorted1.add("Asdsd");
            sorted1.add("ReR");
            sorted1.add("asdasd");
            sorted1.add("ghjhj");
            sorted1.add("zxcxc");
            List<String> sorted2 = new LinkedList<String>();
            sorted2.add("Awdf");
            sorted2.add("Gautom");
            sorted2.add("asa");
            sorted2.add("ggg");
            sorted2.add("qwq");
            sorted2.add("rtrt");

            System.out.println("ORIGINAL SoRTED LIST\n" + 
                    "=================\n" +
                    sorted1 + "and "+sorted2+"\n");
            List<String> sorted_String2 = new MergeSortAbhishek().merge(sorted1,sorted2);
            System.out.println("\nFINAL SORTED LIST\n" +
                    "=================\n" +
                    sorted_String2 + "\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:50:33.270

对我来说听起来很对。如果没有看到“合并排序中的合并 arg”所指的代码，就不能肯定地说，但这个概念是正确的。

仅供参考，对于 Code Review 站点来说，这将是一个更合适的问题。

[CodeReview 堆栈交换](https://codereview.stackexchange.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:11:54.263

就我个人而言，我更喜欢使用完全合并 2 个排序列表的特殊方法。`merge`方法 from`MergeSortAbhishek`可能会混淆，因为您没有对任何内容进行排序。而且这个方法可能会做一些特殊的排序动作。

# android - Android 这个应用程序打开和关闭 GPS

> ID：10331848
> 
> 赞同：0
> 
> 时间：2012-04-26T10:46:20.613
> 
> 标签：android, gps, return

我最近在 Google Play 上看到了这个应用

> [https://play.google.com/store/apps/details?id=com.androidlost&hl=fr](https://play.google.com/store/apps/details?id=com.androidlost&hl=fr)

我特别想知道它是如何做那种事情的？？（知道出于安全原因，您通常无法使用 Android SDK 进行操作...）

```
* start/stop GPS
* start/stop WIFI 
```

有什么技巧可以让这成为可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:56:24.883

对于以编程方式启用/禁用 GPS，请参阅[此](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker) 和 Wifi：

```
String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
final Intent poke = new Intent();
poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
 poke.setData(Uri.parse("0")); 
int wifistatus = ((WifiManager)con.getSystemService(Context.WIFI_SERVICE)).getWifiState();
if(wifistatus==1)  //if WIFI is disabled
{
sendBroadcast(poke);
}
else //if WIFI is enable
{
sendBroadcast(poke);
} 
```

manifest.xml 权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>
<uses-permission  android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

# android - 在 Android 活动之间传递对象的限制

> ID：10331850
> 
> 赞同：0
> 
> 时间：2012-04-26T10:46:36.450
> 
> 标签：android, android-activity

如其他地方所述；Android活动之间传递实例的方式，要么使传递的对象实现可序列化的接口，要么实现可打包的接口。在我看来，只要您的 Android 应用程序旨在显示您的狗的年龄和姓名，这很好。在不使用静态引用的情况下使用稍微高级的对象是有问题的。

要传递的对象正在使用例如外部库来实现其目的。为了使所有使用的类（包括库中的类）能够进行序列化，需要声明此接口，否则 Android 将抛出运行时 IOException，说明对象无法序列化（某些东西不是隐含的可序列化接口或没有无参数）构造函数）。因此，我猜想，可序列化的工作方法需要重新编译库。Parcel 方法需要将对象的字段写入某些输出。此输出支持自定义对象，但传递对象（包括库）再次需要实现可序列化接口才能工作。

使用外部库传递实例的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:14:39.353

One of the approaches is to implement Serializer class for each not Serializable type you wants to pass between activities. Here is a simple Serializer interface:

```
public interface Serializer {
    void serialize(Object object, DataOutputStream out);

    Object deserialize(DataInputStream in);
} 
```

After that you can use [this](http://docs.yworks.com/graphml/doc/api/org/graphdrawing/graphml/util/Base64.html) or any other Base64 encoder/decoder to convert `DataOutputStream` to `String` or other serializable type. Use for this purposes methods like:

```
private String serializeToString(Object object, Serializer serializer) {
    ByteArrayOutputStream bStream = new ByteArrayOutputStream();
    DataOutputStream dStream = new DataOutputStream(bStream);

    try {
        serializer.serialize(object, dStream);
    } catch (IOException e) {
        logger.error(e, "Couldn't serialize " + object);
        return null;
    }

    return Base64.encodeToString(bStream.toByteArray(), false);
}

private Object deserializeFromString(String string, Serializer serializer) {
    try {
        return serializer.deserialize(
                new DataInputStream(
                        new ByteArrayInputStream(
                                Base64.decode(string))));
    } catch (IOException e) {
        logger.error(e, "Couldn't deserialize [" + string + "]");
        return null;
    }
} 
```

After that you can simply pass your object through activities serialized as `String` and simply deserialize it back to your object when you need.

# osgi - 如何使用 Tycho 构建与 Felix 兼容的 OSGi 包？

> ID：10331851
> 
> 赞同：4
> 
> 时间：2012-04-26T10:46:39.927
> 
> 标签：osgi, equinox, apache-felix, tycho

我正在尝试构建用于 Equinox 和 Felix 的 OSGi 包。我的一些包使用 javax.* 包，例如 javax.net。

JRE 提供了那个包，没有问题，它在两个框架中都可以工作。

Felix 要求我在 MANIFEST.MF 中导入该包：

```
Import-Package: javax.net 
```

这是有道理的，因为只有 java.* 包应该被隐式包含。出于某种原因，Equinox 无论如何都很好，它似乎神奇地找到了它们。

当我使用 Tycho 构建时，我的问题就出现了。当我添加 Import-Package 时，Tycho 构建失败：

> ```
> Resolution errors:
>    Bundle com.dexels.mybundle - Missing Constraint: Import-Package: javax.net; version="0.0.0" 
> ```

简而言之：没有导入包 Felix 失败，Tycho 失败。

我知道这种使用系统捆绑片段[的解决方法](http://blog.meschberger.ch/2008/10/osgi-bundles-require-classes-from.html)，但我真的希望我不需要诉诸于此。

有没有办法将这些包添加到第谷？

我可以使用 org.osgi.framework.system.packages.extra 之类的东西吗？

谢谢，弗兰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:04:16.170

如果您使用提供此包的 JDK 指定 Bundle-RequiredExecutionEnvironment 标头，则 tycho 应该能够解析该包。

你可能会遇到[https://bugs.eclipse.org/bugs/show_bug.cgi?id=371565](https://bugs.eclipse.org/bugs/show_bug.cgi?id=371565)

如果是这样，您将需要 tycho 0.15.0，请参阅[http://wiki.eclipse.org/Tycho/Release_Notes/0.15](http://wiki.eclipse.org/Tycho/Release_Notes/0.15)

# java - 如何在 vaadin 表上设置自定义排序器？

> ID：10331852
> 
> 赞同：3
> 
> 时间：2012-04-26T10:46:41.840
> 
> 标签：java, vaadin

我想让我的表格在排序时忽略字母大小写，所以我找到[了这个](https://vaadin.com/forum/-/message_boards/view_message/339736)链接，但我不知道在哪里可以让表格使用新的 ItemSorter。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:25:19.650

您需要将ItemSorter添加到表格使用的*容器*中；两种容器类型公开#setItemSorter - IndexedContainer 和 AbstractBeanContainer。Vaadin 表的默认容器是 IndexedContainer。

以下代码段应将 ItemSorter 添加到表中。

```
Container container = table.getContainerDataSource();      
  if (container instanceof IndexedContainer) {
    ((IndexedContainer) container).setItemSorter(itemSorter);
  } else if (container instanceof AbstractBeanContainer){
    ((AbstractBeanContainer) container).setItemSorter(itemSorter);
  } 
```

# doctrine - Symfony项目继承和sfguard

> ID：10331853
> 
> 赞同：0
> 
> 时间：2012-04-26T10:46:42.190
> 
> 标签：doctrine, symfony-1.4, sfguard

这是我的 Schema.yml 的正确语法吗？

```
 user_type_1 :
    inheritance:
    type:             concrete
    extends:          sfGuardUser
 columns:
   name: { type: string(255) }

  user_type_2 :
    inheritance:
    type:             concrete
    extends:          sfGuardUser
 columns:
   name: { type: string(255) } 
```

我的项目由两种类型的用户**user_type_1**和**user_type_2**组成，我希望它们都从 sfGuardUser 继承，我应该使用继承类型**具体**或**column_aggregation**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:01:15.687

你可以使用任何一种，这取决于你想要什么。从[文档](http://readthedocs.org/docs/doctrine/en/latest/en/manual/inheritance.html)：

**具体**
的具体继承为子类创建单独的表。然而，在具体继承中，每个类都会生成一个包含所有列（包括继承列）的表。为了使用具体继承，您需要向子类添加显式 parent::setTableDefinition() 调用，如下所示。

**列聚合**
在下面的示例中，我们有一个名为实体的数据库表。用户和组都是实体，它们共享同一个数据库表。实体表有一个名为 type 的列，它告诉实体是组还是用户。然后我们确定用户是类型 1 和组类型 2。我们唯一要做的就是创建 3 条记录（与之前相同）并从父类添加对 Doctrine_Table::setSubclasses() 方法的调用。

使用具体继承将创建 2 个表（user_type_1 和 user_type_2），而 column_aggregation 只会创建 1 个具有“类型”列的表。

# android - 如何将 Spinner 选定的项目值转换为字符串？

> ID：10331854
> 
> 赞同：91
> 
> 时间：2012-04-26T10:46:55.017
> 
> 标签：android, android-spinner

我有 5 个微调器。为了使它总结到这一点。

这是 xml 中的微调器

```
<Spinner
            android:id="@+id/text_interested"
            android:layout_span="2"
            android:layout_width="wrap_content"
            android:layout_height="60px"
            android:entries="@array/interestedarrays"
            android:prompt="@string/interestedprompt" /> 
```

这是 Java 中的 Spinner

```
submitbtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
interested.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
                        public void onItemSelected(
                                AdapterView<?> adapterView, View view,
                                int i, long l) {
                            interesting = interested.getItemAtPosition(i).toString();
                        }

                        public void onNothingSelected(
                                AdapterView<?> adapterView) {

                        }
                    });
    }
}); 
```

这里的解释：

该页面有一个按钮。按下此按钮将从微调器中读取数据。我用这个检查了输出

```
System.out.println(interested.getItemAtPosition(i).toString()); 
```

它甚至没有给我任何东西。

如何检索值并将其字符串化？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2012-04-26T10:58:39.210

尝试这个：

```
String text = mySpinner.getSelectedItem().toString(); 
```

像这样，您可以获得不同 Spinner 的价值。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-03-05T17:59:08.097

```
String Text = mySpinner.getSelectedItem().toString(); 
```

**或者**

```
mySpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        Object item = parent.getItemAtPosition(position);
    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-26T10:49:44.030

您可以通过使用从 Spinner 获取所选项目，

```
interested.getSelectedItem().toString(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-26T11:14:57.240

try this

```
 final Spinner cardStatusSpinner1 = (Spinner) findViewById(R.id.text_interested);
    String cardStatusString;
    cardStatusSpinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent,
                View view, int pos, long id) {
            cardStatusString = parent.getItemAtPosition(pos).toString();
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

 final Button saveBtn = (Button) findViewById(R.id.save_button);
    saveBtn .setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            System.out.println("Selected cardStatusString : " + cardStatusString ); //this will print the result
        }
    }); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-28T13:53:39.730

如果您的 Spinner 由 SQLite 游标填充，则解决方案是：

```
Spinner mySpin = (Spinner) findViewById(R.id.myspin);
mySpin.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {  
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
           SQLiteCursor item = (SQLiteCursor) parent.getItemAtPosition(position);
           String value = String.valueOf(item.getString(0));
           Toast.makeText(getApplicationContext(), "The option is:" + value , Toast.LENGTH_SHORT).show(); 
 } 
```

PS： In `item.getString(0)`-> 0 是您要获取的光标上列的索引。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-09-04T17:33:46.230

使用 Kotlin 获取所选项目：

```
spinner.selectedItem.toString() 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-07-16T05:09:48.763

In addition to the suggested,

```
String Text = mySpinner.getSelectedItem().toString(); 
```

You can do,

```
String Text = String.valueOf(mySpinner.getSelectedItem()); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-06-03T18:18:28.560

由于 Android 开发的最新语言是 Kotlin。下面是我们如何在 Kotlin 中使用匿名对象来做到这一点。

```
spinnerName?.onItemSelectedListener = object : AdapterView.OnItemSelectedListener{
    override fun onNothingSelected(parent: AdapterView<*>?) {
       println("Nothing Selected")
    }

    override fun onItemSelected(parent: AdapterView<*>?, view: View?, position: Int, id: Long) {
       val selectedString = yourList[position]
    }

} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-26T10:57:27.520

我认为您希望单击按钮时选择微调器的项目..

尝试[getSelectedItem()](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItem%28%29)：

```
spinner.getSelectedItem() 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-12-11T07:42:29.490

当您从微调器中选择任何值时，您将获得选定的值，

```
interested.getSelectedItem().toString(); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-02-08T19:00:01.287

尝试这个

```
sp1 = String.valueOf(spinner.getSelectedItem()); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-02-08T06:00:42.533

最好的方法是：-

```
String selectedItem = spinner.getSelectedItem().toString(); 
```

您可以在此处参考文档：[Spinners](https://developer.android.com/guide/topics/ui/controls/spinner.html)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-26T10:53:34.183

通过为您的适配器对象实现 SpinnerAdapter 我使用`interested.getItem(i).toString()`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-24T19:18:20.710

```
 spinnerType = (AppCompatSpinner) findViewById(R.id.account_type);
    spinnerType.setPrompt("Select Type");

    spinnerType.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            TypeItem clickedItem = (TypeItem) parent.getItemAtPosition(position);
            String TypeName = clickedItem.getTypeName();
            Toast.makeText(AddAccount.this, TypeName + " selected", Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

# php - PHP 新行 \n 和 \r\n 不起作用

> ID：10331855
> 
> 赞同：12
> 
> 时间：2012-04-26T10:46:58.947
> 
> 标签：php, line, newline, break

```
 $rows = mysql_num_rows($result) ;
  for ($j=0 ; $j < 3 ; $j++) {
  for ($i=0 ; $i < 3 ; $i++) {
    $row = mysql_fetch_array($result) ;
    echo '<a href="image2.php?id='.$row['ID'].'">'."<img src='".$row['Image']."' />".'</a>' ;

  }
   echo "\r\n";
  } 
```

该代码显示三组三张图像。我的理解是 \r\n 和 \n （双引号）应该创建一个新行。然而，它只是在图像之间插入一个空格。是调用方式 \r\n 错误还是使用错误的代码来插入新行（换行符）

示例（# = 一张图片）：

没有回声 \r\n: ######### 有回声 \r\n: ### ### ###

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T10:48:19.253

当空白是HTML 文本的一部分时，它[不会逐字显示。](http://www.maproom.co.uk/invis1.htm)`\r`并且`\n`不是通用常数；它们只是角色，取决于使用它们的任何程序来决定如何处理它们。

你应该[`<br>`](http://htmldog.com/reference/htmltags/br/)改用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-26T10:50:07.630

你`echo "\r\n";`在循环之外。将其移动到循环内。

此外，如果您希望换行符在浏览器中可见，您也应该打印 a `<br />`。

```
 $rows = mysql_num_rows($result) ;
  for ($j=0 ; $j < 3 ; $j++) {
  for ($i=0 ; $i < 3 ; $i++) {
    $row = mysql_fetch_array($result) ;
    echo '<a href="image2.php?id='.$row['ID'].'">'."<img src='".$row['Image']."' />".'</a>' ;
  }
    echo "<br />\n";    
  } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T10:48:47.430

你需要：

```
echo '<br />'; 
```

代替：

```
echo "\r\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T03:57:55.040

您还可以考虑设置适当的标头示例：

```
 $data = [
    [1,2,3],
    [4,5,6],
    [7,8,9]
];
header("Content-Type: text/plain");
foreach($data as $row){
    echo implode(',', $row) . "\r\n";
} 
```

# javascript - 使用 knockout.js 在文本框中输入文本后立即启用按钮

> ID：10331858
> 
> 赞同：0
> 
> 时间：2012-04-26T10:47:02.707
> 
> 标签：javascript, knockout.js

我正在使用淘汰赛 2.0.0。我有一个按钮、文本框和一个视图模型。如果文本框中没有文本，我将禁用“保存”按钮。

0">保存

这一切都很好，只是它需要用户单击页面的另一部分来启用/禁用保存按钮。即，一旦用户开始输入（或删除所有文本），它就不会发生。

在 knockout.js 中是否可以执行此操作？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:52:46.210

如果您使用 'valueUpdate: "afterkeydown"' 进行绑定，它应该会立即更新，请查看 Knockout 网站上的此示例，说明此行为：

[简单列表示例](http://knockoutjs.com/examples/simpleList.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:49:57.523

如果您正在使用`value`绑定处理程序，那么您可以使用`valueUpdate`绑定在更新时进行更改。您可以将其更改为`keyup`而不是默认的`change`. [文档](http://knockoutjs.com/documentation/value-binding.html)。

# c++ - 如何测量 Arduino 函数的执行速度？

> ID：10331866
> 
> 赞同：13
> 
> 时间：2012-04-26T10:47:43.377
> 
> 标签：c++, time, arduino, measurement, stopwatch

我需要确定 Arduino 执行某个功能的速度。

这样做的最佳时间是什么时候？到目前为止，我发现了一个带有 Stopwatch 类的东西，但我想知道是否有任何本地方法可以做到这一点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-26T11:39:20.480

一种直接的方法是使用 Arduino 库中的`[millis()](http://arduino.cc/en/Reference/Millis)`or`[micros()](http://arduino.cc/en/Reference/Micros)`函数。您将获得更细粒度的结果`[micros()](http://arduino.cc/en/Reference/Micros)`。

例如：

```
unsigned long start = micros();
// Call to your function
myFunction();
// Compute the time it took
unsigned long end = micros();
unsigned long delta = end - start;
Serial.println(delta); 
```

仔细阅读文档`[micros()](http://arduino.cc/en/Reference/Micros)`：有一些关于时间分辨率的信息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-26T15:14:35.023

最少干扰的方法是在函数调用之前将端口引脚设置为高电平，然后将其设置为低电平。将示波器放在端口引脚上并测量高电平时间。

通过在上升沿触发并观察下降沿的抖动，这也可以让您对执行时间的可变性有一个很好的定性了解。

# c++ - 如何在调试时将 Visual Studio 配置为“跳过”智能指针代码？

> ID：10331871
> 
> 赞同：7
> 
> 时间：2012-04-26T10:48:10.460
> 
> 标签：c++, visual-studio-2010

我知道可以将 VS 配置为不单步执行特定功能（例如，您知道可以工作的无聊智能指针代码，只是在调试时妨碍理解代码）。如何为我正在调试的代码中使用的自定义智能指针执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:51:40.597

[http://www.cprogramming.com/debugging/visual-studio-msvc-debugging-NoStepInto.html](http://www.cprogramming.com/debugging/visual-studio-msvc-debugging-NoStepInto.html)

> Visual Studio 9 (2010) Visual Studio 2010 引入了一些小的变化——特别是，当你想避免单步执行一个函数时，你应该简单地省略“=NoStepInto”：
> 
> 10 字符串\:\:.*
> 
> 使用“=NoStepInto”根本行不通。其次，您现在可以将您的配置放入 HKCU，而不是 HKLM，让您的设置不会干扰其他用户，而是写入 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0_Config\NativeDE\StepOver。
> 
> 最后，我听说使用 \oper 的旧语法不再有效。一个简单的解决方法是使用：
> 
> . *操作员。*
> 
> （请注意 =NoStepInto 的省略。）

# ruby-on-rails - Request.referer 总是指向主机

> ID：10331878
> 
> 赞同：2
> 
> 时间：2012-04-26T10:48:24.937
> 
> 标签：ruby-on-rails, ruby, apache, rvm, passenger

似乎`request.referer`或`request.env['HTTP_REFERER']`没有在我的设置中提供正确的引用。推荐人始终是我的应用程序的主机（`http://mydomain.tld`）。根据我之前的页面，我希望有一个不同的引用者，例如`http://mydomain.tld/tasks/1`或`http://mydomain.tld/tasks`。

这是我的虚拟主机设置：

```
<VirtualHost *:80>
 ServerName referer
 RailsEnv development

 DocumentRoot /var/www/referer/public
 <Directory /var/www/referer/public>
   Options None
   AllowOverride None
   Order deny,allow
   Allow from all
 </Directory> 
```

```
# passenger.conf
<IfModule mod_passenger.c>
 PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11
 PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p125/ruby
</IfModule>

# passenger.load
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/ext/apache2/mod_passenger.so 
```

我正在使用带有乘客 rvm 的 apache。我的设置有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:31:59.997

啊，我的错。我安装了一个新的浏览器插件[Script no](https://addons.mozilla.org/de/firefox/addon/noscript/)。这就是我的推荐人未设置的原因......

# arrays - 如何使用计时器为字符串网格中的字符串插入排序设置动画？

> ID：10331880
> 
> 赞同：1
> 
> 时间：2012-04-26T10:48:27.433
> 
> 标签：arrays, delphi, sorting

我正在尝试使用计时器移动字符串，以便在我的 delphi 程序中为插入排序设置动画。任何人都可以提供任何建议吗？

```
procedure TForm1.Button1Click(Sender: TObject);
var
current_position, index, count : integer ;
temp : string ;

begin
current_position := 0 ; //start insertion sort
repeat
current_position := current_position + 1 ; //set up pointers
index := 0 ;
while index <= current_position do
 begin
 if word[index] > word[current_position] then
  begin
  temp:= word[current_position];
   for count := current_position downto index + 1 do
    begin
    word[count]:= word[count-1]
    end;
    word[index]:= temp;
   end;
   index:= index + 1
  end;
 until current_position = 9 ;

 for current_position := 0 to 9 do
 StringGrid1.Cells[0,current_position]:= word[current_position];

end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:13:52.123

你可以在你的代码中插入`Sleep(<milliseconds>);`和`Application.ProcessMessages;`来减慢它并显示进度。这[确实会引入一些问题/不需要的行为](http://delphi.about.com/od/objectpascalide/a/delphi-processmessages-dark-side.htm)，所以你应该小心。

# php - utf 8 - PHP 和 MySQLi UTF8

> ID：10331883
> 
> 赞同：26
> 
> 时间：2012-04-26T10:48:41.723
> 
> 标签：php, character-encoding, mysqli

我的表字符集是 utf8，它的排序规则是 utf8。现在我有这个代码：

```
 $mysqli = new mysqli("localhost", "root", "", "Amoozeshgah");

            if (mysqli_connect_errno()) {
                  printf("Connect failed: %s\n", mysqli_connect_error());

            }
          if (!$mysqli->set_charset("utf8")) {
    printf("Error loading character set utf8: %s\n", $mysqli->error);
} else {
    printf("Current character set: %s\n", $mysqli->character_set_name());
}
        mysql_set_charset('utf8');
            if ($stmt = $mysqli->prepare("SELECT About_Title FROM Tbl_About WHERE About_Id=?")) {
                $city = 8;

               /* bind parameters for markers */
                $stmt->bind_param("s", $city);

              /* execute query */
                $stmt->execute();

               /* bind result variables */

                  $result = $stmt->get_result();

             /* fetch value */
            while ($myrow = $result->fetch_assoc()) {

        // use your $myrow array as you would with any other fetch
        printf("%s is in district %s\n", $city, $myrow['About_Title']);
        print("shod");

    } 
```

但输出是：

```
Current character set: utf8 8 is in district Ù†ØªÙ…Ù†ØªØ´Ø³ shod 
```

我能做些什么？编辑：我替换了：

```
if (!$mysqli->set_charset("utf8")) {
        printf("Error loading character set utf8: %s\n", $mysqli->error);
    } else {
        printf("Current character set: %s\n", $mysqli->character_set_name());
    }
            mysql_set_charset('utf8'); 
```

和

```
$mysqli->set_charset("utf8") 
```

但没有区别。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-26T11:03:53.753

请替换`mysql_set_charset('utf8');`为`$mysqli->set_charset("utf8")`:-)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-02-12T12:33:49.180

```
or mysqli_set_charset($this->mysqli,"utf8");
mysqli_set_charset($conn,"utf8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-08T08:42:39.407

以防万一您在代码中使用“json_encode”，例如：

```
json_encode($rows); 
```

只需将其更改为：

```
json_encode($rows,JSON_UNESCAPED_UNICODE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-20T22:12:36.820

有趣的场景可能会帮助其他人。没有技术细节/解释，而只是朝着正确方向的推动/线索。

场景：基于成功/验证的 IPN PayPal 交易远程自动创建用户帐户。Mysqli Query 创建用户和 usermeta 数据，但该数据的值包含隐藏的格式字符，并使表单处理中调用的该数据的使用无效。非常简单的解决方案，无需更改/更改任何现有的数据库表。基本上，这可以确保您的数据只是 ASCII 可打印字符，甚至使用 $mysqli->set_charset("utf8"); 并不是那么重要，因为您正在准备要处理和输入“ASCII clean”的数据。

```
 $create_ipn = $mysqli->prepare("INSERT INTO xxx_somewhere (some_ipn_parameter , email, domain, item) VALUES (?, ?, ?, ?)");
    $create_ipn->bind_param("ssss", $some_ipn_parameter, $email, $domain, $item);

    $some_ipn_parameter = preg_replace( '/[^\x01-\x7F]/', "", 'the_actual_ipn_data' );
    $email = 'edward@ait-pro.com';
    $domain = '';
    $item = 'Test';
    $create_ipn->execute(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-21T03:31:14.827

When fetching data from database, you do not only get the data correctly, but also need to show it on pages correctly, so try using UTF-8 encoding in your page header:

`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`

`<meta charset="utf-8">`

That's my problem and solution, thanks to Rohit Kumar Choudhary.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-02T08:41:35.057

在您的 php 文件中，在代码顶部添加以下内容

```
header('Content-Type: text/plain; charset=utf-8'); 
```

# c++ - 如何开始 bho（浏览器帮助对象）编程

> ID：10331890
> 
> 赞同：1
> 
> 时间：2012-04-26T10:49:27.227
> 
> 标签：c++, internet-explorer, com, bho

我需要开发一个 bho，但我以前从未使用过它。那么有人可以给我一些关于如何开始bho的建议吗？欢迎提供一些教程。PS：我熟悉C++开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:48:31.887

以下是一些示例： [http ://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/a7900d83-572f-4781-a0c4-41ea39710d31/](http://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/a7900d83-572f-4781-a0c4-41ea39710d31/)

[http://www.adp-gmbh.ch/win/com/bho.html](http://www.adp-gmbh.ch/win/com/bho.html)

希望有帮助

# antlr - 最佳模糊度解决

> ID：10331891
> 
> 赞同：1
> 
> 时间：2012-04-26T10:49:42.037
> 
> 标签：antlr, grammar, antlr3, ambiguity

我正在尝试解决如何处理`ANTLR`. 我需要正确解析标识符或带有大小前缀的标识符。首先我想到了这个错误的语法

```
grammar PrefixProblem;
options       
{   
    language = Java;
}
goal: (size_prefix ':')? id;
size_prefix: B;
id: LETTER+;
LETTER: 'A'..'Z' ;
B: 'B';
WSFULL:(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

我需要处理`B`as `ID`，`B:B`与`id` `B`prefix一样`B`。它没有用。

然后我找到了两个解决这个问题的方法。

```
grammar PrefixSolution1;
options       
{   
    language = Java;
}
goal: (size_prefix ':')? id;
size_prefix: B;
id: (LETTER | B)+;
LETTER: 'A' | 'C'..'Z' ;
B: 'B';
WSFULL:(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

在上面的代码中，`B`从`lexer`规则中删除并在`id`规则中连接。

```
grammar PrefixSolution2;
options       
{   
    language = Java;
}
goal: PREFIX_VAR;
PREFIX_VAR: (B WSFULL* ':' WSFULL*)? ID;
fragment ID: (LETTER)+;
fragment LETTER: 'A'..'Z' ;
fragment B: 'B';
WSFULL:(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

在这里，我只是将规则移至`lexer`.

`PrefixSolution1`有一个主要缺点，我需要将词法分析器规则分成更小的块，然后再连接起来。

`PrefixSolution2`：这种方法导致我需要始终考虑应该忽略的空白字符。

对我来说，这两种解决方案都会导致为整个语言编写语法变得一团糟。还有其他解决方案吗？如果不是，哪种方式是最优化的？

所有源代码都可以[在这里找到](https://www.dropbox.com/sh/mf42x6rpzzho2ra/OfG33UJzWt/ANTLRProblem/Prefix)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:57:20.117

我不会和他们中的任何一个一起去。我只是创建`ID`令牌而*不是* `B`令牌（或创建`PREFIX_VAR`令牌：这属于解析器）。

您可以在解析器规则中`capB`使用*消除歧义的语义谓词*¹来匹配大写字母 B ( )，如下所示：

```
grammar Test;

goal
 : (prefixVar | ID)+ EOF
 ;

prefixVar
 : capB ':' ID 
 ;

capB
 : {input.LT(1).getText().equals("B")}? ID
 ;

ID : LETTER+;
WS : (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};

fragment LETTER: 'A'..'Z' ; 
```

这会将输入解析`B:B B B:C`为以下解析树：

![在此处输入图像描述](../Images/0c795018a1ed04be5d0d9b9bce912775.png)

¹ [ANTLR 中的“语义谓词”是什么？](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:42:06.607

试试这个：

```
grammar PrefixProblem;

options       
{   
language = Java;
}

 goal: (size_prefix ':')? (id|B);

size_prefix: B;

id: LETTER+;

LETTER: 'A'|'C'..'Z' ;

B: 'B';

WSFULL:(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

# sql - SqlServer：- 插入和查看数据时出现死锁和锁定问题

> ID：10331895
> 
> 赞同：1
> 
> 时间：2012-04-26T10:49:47.853
> 
> 标签：sql, sql-server, database-deadlocks

我有一个页面，在该页面中，我在另一个用户请求查看的同一时间点通过过程将值插入到 3 个表中。但是发生了DeadLock的错误。

而且我的插入过程也变慢了。比如 50 个用户在该表中并行插入数据，并且 15 个用户请求查看该数据。

```
" DEAD LOCK victim with Process ID(52)'Error" 
```

![在此处输入图像描述](../Images/c2307e3f13ae313b2f7715b611594472.png)

我在所有三个表中都有 CusterIndex 和 Non ClusterIndex。其中启用了页级锁定和行级锁定。禁用它们会帮助我吗？

![在此处输入图像描述](../Images/b883aaac08652263e37cc85d1a0c7678.png)

只有在进行查看或插入时，它才能正常工作。但是当同时过程开始加息时。它会触发“超时错误”或“死锁受害者”以供查看。并且锁越来越多，并且等待时间开始为 0.1< 分钟，然后逐渐增加。

提前致谢

# c# - .NET 4.5 Beta - 功能区控件

> ID：10331906
> 
> 赞同：1
> 
> 时间：2012-04-26T10:50:21.983
> 
> 标签：c#, ribbon-control, .net-4.5

我尝试使用 .NET 4.5 Beta 和 Visual Studio 11 Beta 中提供的新 WPF Ribbon 控件。但是有一件事让我很困惑。

[MSDN 功能区类](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon%28v=vs.110%29.aspx)

当我们添加这样简单的 XAML 时：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <Ribbon>
    </Ribbon>
</StackPanel> 
```

然后我们得到了我们的 Ribbon（正如预期的那样），但是这样的 Ribbon 默认只有一个元素 - 这是令人讨厌的部分。它看起来类似于 RibbonApplicationMenu 对象，但我无法添加任何子项或事件删除此人。当我们单击向下箭头时，它正在垂直扩展（您可以在下图中看到它）。

[http://s17.postimage.org/3lvh8wyb3/ribbon4_5.png](http://s17.postimage.org/3lvh8wyb3/ribbon4_5.png)

任何人都知道如何删除这个对象？或者也许如何使用它？当我尝试从 MSDN 站点创建示例时，它们都工作正常，期望这个默认元素与我在 XAML 中添加的东西一起出现。有人试过同样的吗？谢谢你的帮助。

* * *

是的，这是真的。也许我的问题不是很精确。总而言之，您帮助 mi 解决了这个问题。我的问题存在是因为我使用的是`<RibbonApplicationMenu>`标签而不是`<Ribbon.ApplicationMenu>`您的示例。这导致我在默认菜单之外获得了一个全新的应用程序菜单 - 这就是我感到困惑并想删除它的原因。无论如何，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:45:05.687

您可以将其用作：

```
 <Ribbon>
        <Ribbon.ApplicationMenu>
            <RibbonApplicationMenu SmallImageSource="..." >
                <RibbonApplicationMenuItem Header="New" Click="New_Click" ImageSource="..." />
                <RibbonApplicationMenuItem Header="Open" Click="Open_Click" ImageSource="..." />
                <RibbonApplicationMenuItem Header="Save" Click="Save_Click" ImageSource="..." /> 
```

我建议不要删除它，每个标准功能区都有一个应用程序菜单。

# javascript - jQuery：如何确定索引 单击时无序列表中的元素？

> ID：10331908
> 
> 赞同：0
> 
> 时间：2012-04-26T10:50:27.403
> 
> 标签：javascript, jquery

我想知道被点击的 li 元素在无序列表中的索引。如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:51:33.427

```
$('ul li').on('click', function(ev) {
   var index = $(this).index();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:53:21.640

这个 ？ [http://api.jquery.com/index/](http://api.jquery.com/index/)

```
<head>
  <style>
div { background:yellow; margin:5px; }
span { color:red; }
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <span>Click a div!</span>
<div>First div</div>
<div>Second div</div>
<div>Third div</div>
<script>
$("div").click(function () {
  // this is the dom element clicked
  var index = $("div").index(this);
  $("span").text("That was div index #" + index);
});
</script>

</body>
</html> 
```

*来自 Jquery Api 的代码*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T10:51:51.080

```
$( 'li' ).on( 'click', function() {
    $( this ).index()
} ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T10:57:43.353

这样做： -

```
$('li').click(function() {
   alert($(this).index());
}); 
```

# sql - SUBSTR 在 CLOB 上的表现

> ID：10331912
> 
> 赞同：25
> 
> 时间：2012-04-26T10:50:48.813
> 
> 标签：sql, oracle, plsql, oracle11g, clob

我有一个 PL/SQL 过程，它在参数上做了很多`SUBSTR`s 。`VARCHAR2`我想删除长度限制，所以我尝试将其更改为`CLOB`.

工作正常，但性能受到影响，所以我做了一些测试（基于2005 年的[这些测试](http://www.orafaq.com/forum/mv/msg/47418/123773/0/#msg_123773)）。

* * *

**更新**：我可以在具有不同 Oracle 版本和不同硬件的几个不同实例上重现这一点，`dbms_lob.substr`总是明显慢`substr(CLOB)`于`SUBSTR(VARCHAR2)`.

Bob 的结果和上面链接中的测试讲述了一个不同的故事。

任何人都可以解释这一点，或者至少重现鲍勃或我的结果吗？谢谢！

* * *

**试验结果：**

> +000000000 00:00:00。**004000000** (VARCHAR2)
> +000000000 00:00:00。**298000000** (CLOB SUBSTR)
> +000000000 00:00:00。**356000000** (DBMS_LOB.SUBSTR)

**测试代码：**

```
DECLARE
  l_text   VARCHAR2(30) := 'This is a test record';
  l_clob   CLOB := l_text;
  l_substr VARCHAR2(30);
  t TIMESTAMP;
BEGIN
  t := SYSTIMESTAMP;
  FOR i IN 1..100000 LOOP
    l_substr := SUBSTR(l_text,1,14);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (VARCHAR2)');

  t := SYSTIMESTAMP;
  FOR i IN 1..100000 LOOP
    l_substr := SUBSTR(l_clob,1,14);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (CLOB SUBSTR)');

  t := SYSTIMESTAMP;
  FOR i IN 1..100000 LOOP
    l_substr := DBMS_LOB.SUBSTR(l_clob,14,1);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (DBMS_LOB.SUBSTR)');
END; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T11:26:35.080

（谎言，*该死的*谎言和基准……）

我重新运行了您的测试 10 次，将字符串扩展为整整 30 个字符，并得到以下平均结果：

```
+000000000 00:00:00.011694200 (VARCHAR2)
+000000000 00:00:00.901000600 (CLOB SUBSTR)
+000000000 00:00:00.013169200 (DBMS_LOB.SUBSTR) 
```

然后我将子字符串范围更改为 5,14（DBMS_LOB.SUBSTR 为 14,5）并得到：

```
+000000000 00:00:00.011731000 (VARCHAR2)
+000000000 00:00:01.010840000 (CLOB SUBSTR)
+000000000 00:00:00.011427000 (DBMS_LOB.SUBSTR) 
```

然后我将范围更改为 17,14（DBMS_LOB.SUBSTR 为 14,17）并得到

```
+000000000 00:00:00.013578900 (VARCHAR2)
+000000000 00:00:00.964527400 (CLOB SUBSTR)
+000000000 00:00:00.011416800 (DBMS_LOB.SUBSTR) 
```

最后，我将范围更改为 25,14（DBMS_LOB.SUBSTR 为 14,25）并得到

```
+000000000 00:00:00.011210200 (VARCHAR2)
+000000000 00:00:00.916439800 (CLOB SUBSTR)
+000000000 00:00:00.013781300 (DBMS_LOB.SUBSTR) 
```

我的结论是，在处理 CLOB 时，最好使用 DBMS_LOB.SUBSTR，因为与对“正常”VARCHAR2 使用 SUBSTR 相比，它似乎实际上没有性能损失。针对 CLOB 的 SUBSTR 似乎遭受了显着的性能损失。作为记录 - 操作系统 = HP/UX（Unix 变体），Oracle 版本 = 11.1，处理器 = HP Itanium 2-plex。YMMV。

分享和享受。

* * *

而且因为如果值得做就值得过度，这里有更多的结果，字符串扩展到 32767 个字符。每组结果给出的子字符串范围：

```
1, 25000
+000000000 00:00:00.198466400 (VARCHAR2)
+000000000 00:00:02.870958700 (CLOB SUBSTR)
+000000000 00:00:00.174490100 (DBMS_LOB.SUBSTR)

1000, 25000
+000000000 00:00:00.253447900 (VARCHAR2)
+000000000 00:00:02.491790500 (CLOB SUBSTR)
+000000000 00:00:00.193560100 (DBMS_LOB.SUBSTR)

10000, 25000
+000000000 00:00:00.217812000 (VARCHAR2)
+000000000 00:00:02.268794800 (CLOB SUBSTR)
+000000000 00:00:00.222200200 (DBMS_LOB.SUBSTR) 
```

同一天，同样的结论。

克苏鲁fhtagn。

* * *

（再次突破，亲爱的朋友们，再次......）

重新运行基准测试，将 CLOB 的大小更改为 3276700，并从 2475000 开始从中间获取子字符串，长度为 25000 我得到：

```
+000000000 00:00:00.176883200 (VARCHAR2)
+000000000 00:00:02.069482600 (CLOB SUBSTR)
+000000000 00:00:00.175341500 (DBMS_LOB.SUBSTR) 
```

（请注意，更改仅影响最后两个测试）。

并且...相同的结果，不同的日子。

YMMV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-05T10:24:17.770

我知道这已经很老了，但可能仍然与旧系统上的人有关。这看起来像一个数据类型转换问题。根据我注意到@bernhard.weingartner 看到的效果，偏移量和数量参数的数据类型似乎有很大的不同。

这是在 Linux (OEL 5.6) 上的 11.2.0.3 上运行的，并增加到一百万次迭代只是为了使差异更加明显：

```
DECLARE
  l_text   VARCHAR2(30) := 'This is a test record';
  l_clob   CLOB := l_text;
  l_substr VARCHAR2(30);
  t TIMESTAMP;
BEGIN
  t := SYSTIMESTAMP;
  FOR i IN 1..1000000 LOOP
    l_substr := SUBSTR(l_text,1,14);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (VARCHAR2)');

  t := SYSTIMESTAMP;
  FOR i IN 1..1000000 LOOP
    l_substr := SUBSTR(l_clob,1,14);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (CLOB SUBSTR)');

  t := SYSTIMESTAMP;
  FOR i IN 1..1000000 LOOP
    l_substr := DBMS_LOB.SUBSTR(l_clob,14,1);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (DBMS_LOB.SUBSTR with 14,1)');

  t := SYSTIMESTAMP;
  FOR i IN 1..1000000 LOOP
    l_substr := DBMS_LOB.SUBSTR(l_clob,14.0,1.0);
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (DBMS_LOB.SUBSTR with 14.0,1.0)');

  t := SYSTIMESTAMP;
  FOR i IN 1..1000000 LOOP
    l_substr := DBMS_LOB.SUBSTR(l_clob,cast(14 as number), cast(1 as number));
  END LOOP;
  dbms_output.put_line( SYSTIMESTAMP - t || ' (DBMS_LOB.SUBSTR with casts)');
END;
/ 
```

```
+000000000 00:00:00.043019000 (VARCHAR2)
+000000000 00:00:03.671621000 (CLOB SUBSTR)
+000000000 00:00:05.704337000 (DBMS_LOB.SUBSTR with 14,1)
+000000000 00:00:00.040097000 (DBMS_LOB.SUBSTR with 14.0,1.0)
+000000000 00:00:00.040907000 (DBMS_LOB.SUBSTR with casts) 
```

[11gR2 文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e40758/d_lob.htm#i999349)将形式参数显示为 INTEGER 类型，但实际上传递整数（或 pls_integer 或 binary_double）很慢，而显式传递数字则很快。

从您最初的问题和 Bob 的结果来看，这看起来像是在 11.1 和 11.2 之间发生了变化。我没有要测试的 12c 实例，所以不知道它是否再次更改。是否是由于`dbms_lob`PL/SQL 默认处理数值的方式发生了变化还是更广泛的变化尚不清楚。我在 MOS 上没有找到任何看起来相关的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T19:19:32.227

在以下系统上运行您的脚本 3 次：

Oracle Database 11g 企业版 11.1.0.7.0 - 64 位生产

结果如下：

```
+000000000 00:00:00.007787000 (VARCHAR2)
+000000000 00:00:03.093258000 (CLOB SUBSTR)
+000000000 00:00:00.340017000 (DBMS_LOB.SUBSTR)

+000000000 00:00:00.019460000 (VARCHAR2)
+000000000 00:00:03.302425000 (CLOB SUBSTR)
+000000000 00:00:00.336915000 (DBMS_LOB.SUBSTR)

+000000000 00:00:00.007773000 (VARCHAR2)
+000000000 00:00:03.210619000 (CLOB SUBSTR)
+000000000 00:00:00.336689000 (DBMS_LOB.SUBSTR) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T08:04:08.773

我看到在 11gR1 上，DBMS_LOB.substr 的测试运行顺利，但对于 11gR2，该功能很慢。

下面是我`Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production`在 AIX6 上的测试。

```
+000000000 00:00:00.009440000 (VARCHAR2)
+000000000 00:00:00.749113000 (CLOB SUBSTR)
+000000000 00:00:01.177685000 (DBMS_LOB.SUBSTR) 
```

# jquery - 关于 on 方法的 Jquery 问题

> ID：10331915
> 
> 赞同：2
> 
> 时间：2012-04-26T10:51:07.713
> 
> 标签：jquery, events, methods

嗨，我有一个表单，我有一些选择框，我使用一个小而简单的小 jquery 插件来帮助我设置它们的样式。

```
$.fn.extend({
customSelect : function(options) {

  if(!$.browser.msie || ($.browser.msie&&$.browser.version>6)){
  return this.each(function() {

        var outerClass = options.customClass,
            innerClass = options.customClass_inner;

        var currentSelected = $(this).find(':selected');
        var html = currentSelected.html();
        if(!html){ html='&nbsp;'; }
        $(this).after('<span class="customStyleSelectBox"><span class="customStyleSelectBoxInner">'+html+'</span></span>').css({position:'absolute', opacity:0,fontSize:$(this).next().css('font-size')});
        var selectBoxSpan = $(this).next();
        var selectBoxWidth = parseInt($(this).width()) - parseInt(selectBoxSpan.css('padding-left')) -parseInt(selectBoxSpan.css('padding-right'));         
        var selectBoxSpanInner = selectBoxSpan.find(':first-child');
        selectBoxSpan.css({display:'inline-block'});
        selectBoxSpanInner.css({width:selectBoxWidth, display:'inline-block'});
        var selectBoxHeight = parseInt(selectBoxSpan.height()) + parseInt(selectBoxSpan.css('padding-top')) + parseInt(selectBoxSpan.css('padding-bottom'));
        $(this).height(selectBoxHeight).change(function(){
        selectBoxSpanInner.text($(this).find(':selected').text()).parent().addClass('changed');
        }); 
  });
  }
}
});
$('select').customSelect(); 
```

没关系，它很好用，问题是我还有一个按钮，如果你点击广告越来越多的选择框，只要你想要。（不管为什么：P）这些选择框也是用jquery 的帮助，所以我将它动态添加到 dom 中。

所以我的问题是这些新的选择框当然不会继承样式，我知道这是因为我稍后将它们添加到 dom 中，但是我可以在 on 方法的帮助下让它们继承谁呢？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:53:36.920

你只需要再打电话

```
$('select.newSelect').customSelect(); 
```

在将新选择添加到 DOM 之后。小心添加一个特殊的类，以便您的 customSelect() 代码仅适用于新添加的元素，否则您附加事件两次。或者您可以概括插件，使其不会附加事件两次，但这更困难（提示使用`.data()`）

如果你打电话，为了避免做奇怪的事情，`$('select.newSelect').customSelect();`你可以做

```
 if(!$.browser.msie || ($.browser.msie&&$.browser.version>6)){
  return this.each(function() {

  if($(this).data('customSelectApplied') !== ''){
        // whe already attached the custom functionality here
        return;
    }else{
        //continue as usual
        $(this).data('customSelectApplied', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:55:30.033

该`on`功能在这里对您没有帮助。每次添加新元素时只需调用该函数：

```
$("<select id="aaa">").appendTo('#foo').customSelect(); 
```

* * *

如果您想在一个查询中获取新的“选择”：
在 DOM 就绪时执行此操作：

```
$(function(){
    $('select').customSelect().addClass('old');
}); 
```

后来

```
$('select:not(.old)').customSelect().addClass('old'); 
```

* * *

**您还可以更改插件**以添加该类并忽略该类的元素`old`：

```
$.fn.extend({
customSelect : function(options) {

  if(!$.browser.msie || ($.browser.msie&&$.browser.version>6)){
  return this.filter(':not(.old)').each(function() { // <==== ====== ===== ====== ===
        $(this).addClass('old'); // <==== ====== ===== ===== ====
        var outerClass = options.customClass,
            innerClass = options.customClass_inner;

        var currentSelected = $(this).find(':selected');
        var html = currentSelected.html();
        if(!html){ html='&nbsp;'; }
        $(this).after('<span class="customStyleSelectBox"><span class="customStyleSelectBoxInner">'+html+'</span></span>').css({position:'absolute', opacity:0,fontSize:$(this).next().css('font-size')});
        var selectBoxSpan = $(this).next();
        var selectBoxWidth = parseInt($(this).width()) - parseInt(selectBoxSpan.css('padding-left')) -parseInt(selectBoxSpan.css('padding-right'));         
        var selectBoxSpanInner = selectBoxSpan.find(':first-child');
        selectBoxSpan.css({display:'inline-block'});
        selectBoxSpanInner.css({width:selectBoxWidth, display:'inline-block'});
        var selectBoxHeight = parseInt(selectBoxSpan.height()) + parseInt(selectBoxSpan.css('padding-top')) + parseInt(selectBoxSpan.css('padding-bottom'));
        $(this).height(selectBoxHeight).change(function(){
        selectBoxSpanInner.text($(this).find(':selected').text()).parent().addClass('changed');
        }); 
  });
  }
}
}); 
```

然后你只需像这样使用它：

```
$('select').customSelect(); 
```

它会忽略 "old" `<select>`s。

# java - 如果字节码是在 1.4 中编译的，我们还会获得 Java 6 的性能提升吗？

> ID：10331921
> 
> 赞同：7
> 
> 时间：2012-04-26T10:51:31.320
> 
> 标签：java, bytecode, jvm-hotspot

我假设在浏览[本文档](http://java.sun.com/performance/reference/whitepapers/6_performance.html)后 Java 1.4 和 Java 6 之间存在巨大的性能差异。

我的问题是，当它必须运行的字节码在 1.4 中编译时，Java 6 运行时是否仍然具有魔力？

“为什么是这个问题？”的一些背景。在[这里](https://stackoverflow.com/questions/10224677/mixing-java-1-4-and-1-6-bytecode-in-a-class-hierarchy/10225197#10225197)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T10:57:48.893

是的，因为大多数优化是由 JVM 在运行时完成的，所以编译器在优化方面做得很少。因此，使用旧 Java 编译器编译的代码仍将受益于新的 JVM。

但是，在编译时执行了一些优化，例如`String`用`StringBuilder`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T04:19:38.707

正如 Tomasz Nurkiewicz 所指出的，大部分优化是由 JIT 编译器完成的，您应该会看到在 java 6 而不是 java 1.4 上运行所带来的性能优势。但是，这并不能保证您将获得最佳结果。如果您使用较慢（较旧）的数据结构变体，您仍然可能会错过好处。例如，StringBuffer 代替 StringBuilder，Vector 代替 LinkedList，Hashtable 代替 HashMap，等等……

您还可以考虑使用 javac 的 -deprecated 标志进行编译。您可能想要替换不推荐使用的方法，因为它们通常意味着有更好的替代方法可以实现相同的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:32:08.480

java 中几乎所有的优化都发生在 jit 中，因此只依赖于运行应用程序的 jvm 版本。javac 字节码编译器只会发出最直接的字节码。我认为现阶段没有任何优化，除了使用`StringBuilder`/的字符串连接`StringBuffer`。

Java 6 及更高版本可以对使用目标版本 6 编译的类使用更快、更简单的[字节码验证器](http://stochastyk.blogspot.de/2005/12/type-checking-verifier-in-java6.html)。javac 编译器会在每个堆栈槽中创建有关数据类型的附加信息，验证器必须验证这些信息。在以前的版本中，验证者必须推断出这些更复杂的类型。此更改只会加速类的加载，并且在实际执行字节码时应该没有影响。

我认为版本 5 或 6 中字节码的另一个变化是类文件中的常量池可以引用类和接口。同样，这可能只会影响类加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T03:01:33.597

不仅会有巨大的性能提升，而且即使在 Java 6 版本之间也存在很大差异。我在 18 个月的时间里跟踪了 Java 6 的次要版本，并看到了 15-20% 的加速。

顺便说一句，Java 7 已经发布，并且是首选的生产版本 - 您是否有理由不想使用该版本？

哦，还有最后一件事。如果您需要证明对管理的好处，那么您应该阅读大量有关 Java 应用程序性能测量的内容。我在即将于 2012 年 5 月 / 6 月发行的 Oracle 的 Java 杂志上有一篇文章，如果您需要的话，它是真正的 101。这是一个非常棘手的主题，所以你应该做大量的阅读，否则你可能会得到非常误导性的数字。

# ruby - Ruby：将unix时间戳转换为日期

> ID：10331926
> 
> 赞同：41
> 
> 时间：2012-04-26T10:51:37.337
> 
> 标签：ruby, datetime, unix-timestamp

```
irb> dt = Time.now.utc
=> 2012-04-26 10:47:01 UTC

irb> dti = dt.to_i
=> 1335437221 
```

现在，如何转换`dti`回日期/时间？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-26T10:52:34.063

使用[`Time.at`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-c-at).

```
Time.at(1335437221)
# => 2012-04-26 12:47:01 +0200 
```

# php - CodeIgniter 中的分页：所有数据都打印在一个页面中

> ID：10331928
> 
> 赞同：8
> 
> 时间：2012-04-26T10:51:39.853
> 
> 标签：php, codeigniter, pagination

我正在尝试在我的 PHP 项目中进行分页，codeigniter 有自己的名为“分页”的类，我已经使用了它。现在我在我的视图页面中有一个页面链接。但是所有数据都打印在一个页面上，这是我的代码..

```
 $mydata = array('mydata' => $this->Admin_model->view_job_posts());
        $this->load->library('pagination');;
        $config['base_url'] =site_url('/admin/view_job_posts/');
        $config['total_rows'] = count($mydata["mydata"]);
        $config['per_page'] = 1;
        $config['num_links'] = 2;
        $config['uri_segment'] = 2;         
        $this->pagination->initialize($config);

        $mydata['links'] = $this->pagination->create_links();

        $this->load->view('pages/admin_view_jobs', $mydata); 
```

帮帮我，伙计们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:09:07.950

那是因为您正在加载所有内容，CodeIgniter 没有实现任何 AI 算法：p 检查您的第一行代码：

```
$mydata = array('mydata' => $this->Admin_model->view_job_posts()); 
```

考虑为模型添加 2 个额外参数（$number_of_rows，$offset），这样，您就可以在特定页面上准确加载所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T13:41:18.430

你可以检查这个或者只是尝试将你的uri-segment“2”更改为“3”

```
 $data = array();   
        $this->load->library('pagination');
        $config['base_url']=site_url().'Happy/sectionpage/';
        $config['total_rows']=$this->db->get('tbl_blog')->num_rows();
        $config['per_page']=4;
        //$config['num_links']=6;
        $config['uri_segment']=3;
        $this->pagination->initialize($config); 
```

# iphone - 使用 core-plot 在 iPhone 中实现绘图图

> ID：10331930
> 
> 赞同：0
> 
> 时间：2012-04-26T10:51:41.753
> 
> 标签：iphone, objective-c, xcode, xcode4, core-plot

我正在尝试使用链接实现绘图图。

[http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application](http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)

但至于支持，我需要添加绘图文件和框架。

[如何正确安装 CorePlot 框架？](https://stackoverflow.com/questions/6826259/how-to-install-coreplot-framework-correctly)

**`I am using xcode 4.1`**

将 CorePlotHeaders 复制到我的 Xcode 项目中

将 libCorePlotCocoaTouch.a 复制到我的 Xcode 项目中

在我的目标*构建设置*中添加到**其他链接器标志**：**-ObjC -all_load**

 ***在**`xcode 4.1`**

***`And please provide me any other best tutorials for Graph applications in xcode4.1`***

我有一个错误导致应用程序崩溃

*由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSCFString sizeWithTextStyle:]: unrecognized selector sent to instance 0x4e88e20”*

第一次抛出调用堆栈：（0 CoreFoundation 0x012865a9 __exceptionPreprocess + 185

```
1   libobjc.A.dylib                     0x000b4313 objc_exception_throw + 44
2   CoreFoundation                      0x012880bb -[NSObject(NSObject) 
```

不识别选择器：] + 187

```
3   CoreFoundation                      0x011f7966 ___forwarding___ + 966
4   CoreFoundation                      0x011f7522 _CF_forwarding_prep_0 + 50
5   ESPT                                0x00031b60 -[CPTTextLayer sizeThatFits] + 125
6   ESPT                                0x00031cab -[CPTTextLayer sizeToFit] + 62
7   ESPT                                0x000316bf -[CPTTextLayer initWithText:style:] + 188
8   ESPT                                0x0002bf69 -[CPTAxis 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:55:30.097

转到项目的**Build Settings** -> **Linking Options**。

看这里 ：

![在此处输入图像描述](../Images/3360a86313ee7a57e0c3c2c0d2dedecc.png)***

# iphone - 无法在选取框内更改 UILabel 的框架

> ID：10331936
> 
> 赞同：0
> 
> 时间：2012-04-26T10:52:04.887
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uilabel

我[将此](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)代码用于 UILabel 选框。但我无法更改标签的高度。我使用的标签字体大小为 60。标签文本从其底部开始超出范围。即使经过长时间的调试，我也无法找出我的文本在底部被剪切的原因。感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:27:52.663

尝试使用`[string sizeWithFont:]`. 下面的代码对我来说很好。

```
NSString* message=@"Polska pozdrawia";
CGSize fontSize=[message sizeWithFont:[UIFont systemFontOfSize:60.0f]];
AutoScrollLabel* label=[[AutoScrollLabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, fontSize.height)];
[label setFont:[UIFont systemFontOfSize:60.0f]];
[label setText:message];
[self.view addSubview:label];
[label scroll]; 
```

# java - 编写返回 void 的方法是一种好习惯吗？

> ID：10331939
> 
> 赞同：12
> 
> 时间：2012-04-26T10:52:20.690
> 
> 标签：java, return, return-value, void

我正在开发一个由复杂对象组合驱动的用 java 编码的复杂企业应用程序。例如：在特定场景中，要执行一个操作，流程如下：

```
login() -> 
Followed by defined sequence of 10 to 20 method calls in different classes -> 
Followed by a logout() 
```

在框架内，几乎所有的操作，包括登录、注销，以及 10 到 20 个方法调用中的许多都没有返回类型。任何错误行为都由框架处理。说，在登录

```
public void login(){
try{
 //login actions
 //chained sequence of calls

}catch(){
 // framework handling exceptions and other rollback options
}
} 
```

中间的 10 到 20 个动作是在框架的不同层次结构中对不同对象的方法调用。

一个随机类看起来像这样：

```
class someobject{

def variable

void action1(){ do something on variable }
void action2(){ do something on variable }
...
} 
```

变量经常更改状态，并且这些操作具有仅由框架定义的序列，我觉得这很烦人。

我会说，如果有适当的返回类型，或者至少有一些方法，比如 boolean 的情况`login()`，生活会容易得多。由于对一系列 void 返回函数的严格遵守，我发现很难通过调试来理解流程，而且单元测试对我来说成了一场噩梦。

所以现在，我的印象是编写返回某些东西的函数总是更好，*尤其是当涉及到一系列动作时*。那么，这是一个安全的假设吗？我想听听你对此的看法。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T10:55:00.703

一个方法最基本的可测试性是通过它的返回码。如果`login`您需要（如您所述）能够测试您现在是否已登录，并且`boolean`返回是显而易见的方式。否则，您必须检查一些属性，这似乎是不必要的非原子和复杂的（尽管可能由于其他原因需要）。

对我来说，这个论点扩展到任何有意义的方法。使用`void`返回码很常见，但更多是由于旧习惯而不是良好的设计原因。简单的属性设置器是一个反例，我相信还有其他的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T10:57:51.933

当一个方法对类中的本地数据进行操作时，void 方法是完全合理的，只要它对类上下文中有意义的一些“行为”进行建模。例如，如果您有一个对其内容进行排序的 SpecialSortedList，即 myList.sort()，则 sort() 方法将无效，因为它对与 SpecialSortedList 相关的某些行为进行建模。

如果方法不对类中的本地数据进行操作，即通过参数接受其数据并返回一些数据（即不依赖本地数据），则最好将其声明为静态，甚至将其移动到实用程序或助手类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T11:03:21.247

在我看来，不必总是在动作链上返回某些东西这完全取决于您的要求。即在登录身份验证方法中最好返回布尔结果以进行简化。如果一系列动作独立于一个和另一个，那么在我看来，没有必要返回任何不会被任何动作使用的东西。因此，如果一个动作的结果影响下一个动作，那么它应该返回一些东西以进行简化和测试，以便您可以直接从导致问题的方法的输出中提取。确定方法后，您可以检查已确定的特定方法。所以基本上每件事都取决于你的要求。如果您的要求在不返回任何东西的情况下得到更好的处理，那么您应该接受它。此外，您应该遵循最佳实践或设计模式以提高效率，这对于所有情况都会更好，并且您最终可以摆脱混乱。这只是我的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T18:41:47.247

我越来越喜欢返回状态码而不是 void。这做了几件事：

1.  我允许调用你的函数的代码知道接下来要做什么（例如，如果操作失败，那么调用代码可能需要做一些与操作成功不同的事情）。
2.  测试和调试更容易（正如你提到的）。我已经开始相信为可测试性编写代码是确保代码质量的最佳方法之一（当然假设您确实对其进行了测试）。void 函数很难测试。

我的偏好是尽可能让大多数函数接受参数，返回答案并且不更改任何类变量。正如 Jaco 所提到的，这些可以声明为静态的，甚至可以移动到实用程序类中。然后你可以让一些控制器函数利用返回值的函数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-15T07:52:28.657

我会将答案分为两部分：

*   什么时候返回“void”有用 -

    **如果该方法返回一个值只是为了指示不正确的状态/异常，那么它应该返回“void”。异常应该负责处理所有错误场景，而不是说“布尔”返回值**。现在，调用代码需要再次验证布尔值和异常。如果它只抛出异常，那么调用代码会更容易和更清晰。

*   什么时候返回 void 没那么有用 -

    如果方法执行任何操作并返回值作为结果，则不应返回“void”，需要返回相关的结果类型（布尔/整数/对象等）。

**一般来说，返回值应该实际对应于方法是否返回。它不应该对应于方法是否正确执行（好吧，它应该是）。**所有的输入验证/异常场景都应该通过抛出相应异常的方式来处理。例如，当输入无效时抛出 IllegalArgumentException，而不是返回“布尔”表示方法未执行。

# java - 当 DefaultTableModel 已更改时，在 JTable 上设置模型

> ID：10331949
> 
> 赞同：1
> 
> 时间：2012-04-26T10:53:00.563
> 
> 标签：java, swing, model-view-controller, oop, user-interface

> TableModelListener 为侦听 TableModel 更改的对象定义接口。

[表模型监听器](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/TableModelListener.html)

如何将此应用于 JTable，以便它监听 DefaultTableModel 中的更改？此外，在调用 setModel 之后，该功能不应该是内置的吗？为什么不希望 JTable 反映对模型的更改？

News 中 defaultTableModel 的引用指向与 MessagesController 中相同的实例（这是正确的吗？），那么如果基础对象已更新，为什么我必须在 JTable 上显式调用 setModel 呢？

JTable 自我更新的更好方法是什么？也许[tableChanged](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTable.html#tableChanged%28javax.swing.event.TableModelEvent%29)？

我不明白，如果 News 中的引用和 MessagesController 中的引用都指向具有相同值的*不同*对象，为什么需要调用 setModel()。毕竟，News.defaultTableModel 现在已经更新了。为什么要重新调用 setModel()？

```
package net.bounceme.dur.nntp;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Toolkit;
import java.util.logging.Logger;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableModel;

public class News {

    private static final Logger LOG = Logger.getLogger(News.class.getName());
    static JFrame frame = new JFrame();
    static JTextPane text = new JTextPane();
    static JSlider slider = new JSlider();
    static MessagesController messagesController = new MessagesController();
    static DefaultTableModel defaultTableModel = new DefaultTableModel();
    static JTable table = new JTable();

    private static void createAndShowGUI() {
        defaultTableModel = messagesController.getDefaultTableModel();
        table.setModel(defaultTableModel);
        table.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {

            public void valueChanged(ListSelectionEvent evt) {
                java.awt.EventQueue.invokeLater(new Runnable() {

                    public void run() {
                        int row = table.convertRowIndexToModel(table.getSelectedRow());
                        row = Math.abs(row);  //how can this be negative?
                        LOG.fine("row " + row);
                        MessageBean messageBean = messagesController.getMessageBean(row);
                        text.setText(messageBean.getContent());
                        text.setContentType("text/html");
                    }
                });
            }
        });

        slider.setMinimum(1);
        slider.setMaximum(messagesController.getMax());
        slider.setValue(messagesController.getMax());
        slider.addChangeListener(new javax.swing.event.ChangeListener() {

            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                java.awt.EventQueue.invokeLater(new Runnable() {

                    public void run() {
                        int index = slider.getValue();
                        LOG.fine("slider " + index);
                        messagesController.setIndex(index);
                        defaultTableModel = messagesController.getDefaultTableModel();
                        table.setModel(defaultTableModel);
                        table.getSelectionModel().setSelectionInterval(1, 1);
                    }
                });
            }
        });
        table.getSelectionModel().setSelectionInterval(1, 1);
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(3, 1));
        panel.add(table);
        panel.add(text);
        panel.add(slider);
        frame.add(panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        frame.pack();
        frame.setVisible(true);
        frame.setSize(screenSize);
    }

    public static void main(String args[]) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

可能我误解了[pass-by-value](http://javadude.com/articles/passbyvalue.htm)，尽管我已经读过这些术语根据上下文具有不同的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:01:43.167

1)`row = Math.abs(row); //how can this be negative?`

如果没有任何选定的行然后代码行

```
int row = table.convertRowIndexToModel(table.getSelectedRow()); 
```

返回`-1`值，最好先测试`if(table.getSelectedRow() > -1)`一下

2）没有理由替换TableModel，也没有DefaultTableModel，JTable可以返回它的TableModel，[JTable#getModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getModel%28%29)

3) 从上下文不确定，但也许你看过[JTable 排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:05:46.770

> 如果基础对象已更新，`setModel()`为什么我必须显式调用？`JTable`

你不应该。

> `JTable`更新自身的更好方法是什么？

更新模型 ,`TableModel`应该触发通知视图 ,`JTable`更新自身所需的事件。`DefaultTableModel`为你做这个；为您的模型调用`AbstractTableModel`提供了方便的方法。[这里](https://sites.google.com/site/drjohnbmatthews/table)`fireXxx()`有一个后者的例子。另请参阅[*如何使用表格：创建表格模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

 *创建一个新的、空白`DefaultTableModel`的 in`News`似乎是虚假的，因为（看不见的）`MessagesController`模型会迅速取代它。

也不清楚你为什么`invokeLater()`在`ListSelectionListener`和 中使用`ChangeListener`。这些方法应该已经在[事件调度线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上运行。如果没有，您将需要同步对任何共享数据的访问。*

# java - 这个小部件在 Java 中叫什么？

> ID：10331951
> 
> 赞同：3
> 
> 时间：2012-04-26T10:53:04.557
> 
> 标签：java, swing, user-interface, widget

我一直试图找到这个小部件，但不知道它叫什么。 ![在此处输入图像描述](../Images/fed3b64c8d473f28402f6547179d4aa2.png)

我可能应该补充一点，箭头键 (in|de) 会减少值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T10:54:30.547

它被称为[微调器](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T10:56:02.857

它被称为[JSpinner](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSpinner.html)，Swing 教程对所有标准组件进行了[概述](http://docs.oracle.com/javase/tutorial/ui/features/components.html)。

# c# - 如何从非托管 dll 创建对象？

> ID：10331964
> 
> 赞同：1
> 
> 时间：2012-04-26T10:53:39.657
> 
> 标签：c#, dll, unmanaged

我创建了一个包含非托管 c++ 代码（不是 COM 对象）的 dll。

虽然有很多关于如何 PInvoke dll 中的 STATIC 方法的示例，但我没有找到如何从包含的类构造对象的方法。这可能吗？

# php - 青年学生选择题图片测验

> ID：10331971
> 
> 赞同：0
> 
> 时间：2012-04-26T10:54:07.960
> 
> 标签：php, javascript, html

我正在尝试使用多个提交按钮进行测验。我想要一张带有十个按钮的图片。每次考生按下按钮时，我都希望发布值并更改图片。到目前为止，我已经尝试了三种方法：-

1.使用 onclick 和 javascript 我可以完成所有动画，但没有发布值。从谷歌我得到的印象是我必须使用更多的 javascript 来提交值？

2.在php中使用变量，第一张图片会显示，第一个值会发布，但什么都没有发生，添加一个循环意味着所有图片都出现在另一个之上，而无需等待任何按钮被点击......

3.我尝试为每张图片做单独的html页面，然后将值发布到一个php文件中，该文件执行$score++；并转到下一个 html 文件，但 $score 不正确。因为它是一个局部变量？这是否意味着我必须保留 MySQL 中的价值才能获得它？此外，这似乎是对整个事物进行编程的一种非常浪费的方式......

这是没有的代码。2：

```
<?php
include 'header.php';

if ($round==1) {$ans='Banana';}
if ($round==2) {$ans='Book';}
if ($round==3) {$ans='Pencil';}
...and so on

if ($_POST['submit']==$ans) {$score++; echo "Right!"; $round++; }
else
{$round++;}
?>

<html>
<form action="index.php" method="post">

<input type="submit" class="button1"  name="submit" value="Banana">
<input type="submit" class="button2" name="submit" value="Balloon">
<input type="submit" class="button3" name="submit" value="Dog">
<input type="submit" class="button4" name="submit" value="Mouse">
<input type="submit" class="button5" name="submit" value="Chair">
<input type="submit" class="button6" name="submit" value="Twelve">
<input type="submit" class="button7" name="submit" value="Pen">
<input type="submit" class="button8" name="submit" value="Book">
<input type="submit" class="button9" name="submit" value="Ball">
<input type="submit" class="button10" name="submit" value="Elephant">
</form>
</html>

<?php

if($ans=="Banana")
{   
echo '<img src="Banana.png" id="picture" class="picture" height="600" width="600" alt="script.aculo.us" />';
}
if($ans=="Pencil")
{   
echo '<img src="Pencil.png" id="picture" class="picture" height="600" width="600" alt="script.aculo.us" />';
}
{   
echo '<img src="Book.png" id="picture" class="picture" height="500" width="500" alt="script.aculo.us" />';
}
...and so on

include 'footer.php';

?> 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:07:51.147

我会让每个按钮将其值提交给一个函数（onclick="answered('pencil')"）

然后，我将有一个正确答案顺序的数组，以及用户所在回合的计数器整数。在已回答的函数中，我会将提交的值与“round”位置的答案数组中的项目进行比较（可能会根据您想要的计数方式减一），并且可能会增加猜测计数（如果这是您的评分）

当两个值匹配时，递增计数器，并更改图像的 src 属性。如果不是，则显示一些“再次猜测”消息

最后一轮完成后，您可以将猜测计数发布到服务器进行存储（如果这是您的意图）

这是一些示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<div id="buttons">
<button onclick="answered('banana')">Banana</button>
<button onclick="answered('balloon')">Balloon</button>
<button onclick="answered('dog')">Dog</button>
<button onclick="answered('mouse')">Mouse</button>
<button onclick="answered('chair')">Chair</button>
<button onclick="answered('twelve')">Twelve</button>
<button onclick="answered('pen')">Pen</button>
<button onclick="answered('book')">Book</button>
<button onclick="answered('ball')">Ball</button>
<button onclick="answered('elephant')">Elephant</button>
</div>
<div id="msg"></div>
<img id="photo" />

</body>
<script type="text/javascript">
var turn=0;
var guess=0;
//this is the order of correct answers
var answers = ['banana','book','elephant','dog','pen','balloon','mouse','ball','chair','twelve'];
//these are the image urls (yours would be more like 'Pen.png'
var images= ['http://caloriesinbanana.net/wp-content/uploads/2012/01/Calories-in-Banana.jpeg','http://www.instructables.com/image/FZJO197FB11U3O8/Write-a-good-book.jpg','http://images.nationalgeographic.com/wpf/media-live/photos/000/004/cache/african-elephant_435_600x450.jpg','http://1.bp.blogspot.com/-pKym47-kmsk/Trj8aES5iRI/AAAAAAAADII/5tUPH7YZUnw/s1600/Dog.jpg','http://tacticalpens.net/wp-content/uploads/2011/05/surefire-tactical-pen.jpg','http://1.bp.blogspot.com/-zLp3E7kSKm4/TV6W5FNY44I/AAAAAAAAAy8/lvievPXdh68/s1600/red+balloon.jpg','http://kids.mdbc.gov.au/__data/page/735/Pilliga_Mouse.JPG','http://thelatesthiss.org/wp-content/uploads/2012/03/soccer-ball1.png','http://remodelista.com/img/sub/uimg//02-2011/ikea-olle-chair-red.jpg','http://ctmls.ctreal.com/wp-content/uploads/2011/12/twelvekillerblogposts.jpg'];

document.getElementById('photo').setAttribute('src',images[turn]);
function answered(a){
    guess++;
    if(a==answers[turn]){
        turn++;
        if(turn!=answers.length){
            document.getElementById('msg').innerHTML='<span style="color:#FFF;background-color:#0F0;">Great Job!!</span>';
            setTimeout(clr,1000);
            document.getElementById('photo').setAttribute('src',images[turn]);
        }
        else{
            alert('You finished the quiz. You were right '+answers.length+'/'+guess+' times for a score of '+Math.round(100*answers.length/guess)+'%');
        }
    }
    else{
        document.getElementById('msg').innerHTML='<span style="color:#FFF;background-color:#F00;">Guess Again</span>';
        setTimeout(clr,2000);
    }
}

function clr(){
    document.getElementById('msg').innerHTML='';
}

</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:18:11.870

在您的情况下，优雅的解决方案是使用 javascript（带有 onClick）和 AJAX（一个支持 AJAX 查询的库，如 jQuery - [http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/).Every) ）。每次用户单击选择一个按钮时，您应该更新 javascript 中的分数值并请求新图像的 url 及其正确答案。当用户单击最后一个按钮发送时，您应该发送最终分数。您可以在这里找到有关 AJAX 的更多详细信息：http: [//www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp) 希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T23:57:45.293

在这些方法中，第三种方法优于其他方法。通常在 MCQ 页面上，问题被保留或单独的页面。***如果您使用会话***，您可以解决局部变量的问题

 *```
$_SESSSION['score'] += $score
echo $_SESSION['score']; 
```*

# c# - 迭代地将值关联到 C# 中的变量，就像 python 对 [2, 1, 3] 中的 (red, green, blue) 所做的那样

> ID：10331977
> 
> 赞同：3
> 
> 时间：2012-04-26T10:54:39.510
> 
> 标签：c#

将数组 [1, 2, 3] 视为他的排列的一个实例。

在我的代码中，我需要将此值与我的变量相关联，以便我可以按名称引用它们

我正在尝试获取可读且简单的代码作为 Python 版本

在 Python 中，如果你有：

```
permutation = [2, 1, 3] 
```

你可以做：

```
for (red, green, blue) in permutation
for (a, b, c) in permutation
if b is red 
```

...

**我需要做的是以完全相同的顺序将特定排列中的值与变量相关联：如果我有 [2, 1, 3] 排列和 (red, green, blue) 变量我想发生 red = 2 green =1蓝色 = 3**

我认为在 C# 中可以通过 Dictionary 或 OrderedDictionary 来完成类似的事情，也许是具有有意义名称的 ExtensionMethod ......也许像 colors["red"] == letters["a"] 这样的东西可以

我试图勾勒出不同的实现，但我认为我遗漏了一些东西这就是我所勾画的：

```
enum ColorsEnum
{
    red, green, blue
}

public static Dictionary<string, int> Valorize(IEnumerable<string> keys, IEnumerable<int> values)
    {
           ...
    }

public static Dictionary<string, int> AsColorDictionaryWithValues(this string[] keys, int[] values)
{
           ...
}

public static void Valorize(Dictionary<string, int> dic, IEnumerable<int> values)
{
    foreach (var item in Enum.GetNames(typeof(ColorsEnum)))
    {
        dic.Add(item, [incremental_number]);
    }
} 
```

你认为什么是好的解决方案（我关心可读性和简单性）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:09:58.280

您是否正在寻找这样的扩展方法？

```
public static void Do<T1, T2, T3>(this Tuple<T1, T2, T3> tuple,
                                  Action<T1, T2, T3> action)
{
    action(tuple.Item1, tuple.Item2, tuple.Item3);
} 
```

*用法：*

```
var list = new List<Tuple<int, int, int>>
{
    Tuple.Create(255, 0, 0),
    Tuple.Create(0, 255, 0),
    Tuple.Create(0, 0, 255),
};

list.ForEach(t => t.Do((red, green, blue) =>
{
    Console.WriteLine("R: {0}, G: {1}, B: {2}", red, green, blue);
})); 
```

*输出：*

```
R: 255, G: 0, B: 0
R: 0, G: 255, B: 0
R: 0, G: 0, B: 255 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:17:34.360

我已经整理了一个相当直接的扩展方法，我称之为`ForEachBundle`，来做你想做的事。

因此，例如，如果您有这个数组：

```
var xs = new [] { 1, 2, 3, 4, 5, 6, }; 
```

然后你`ForEachBundle`像这样打电话：

```
xs.ForEachBundle(
    (red, green, blue)
        => Console.WriteLine("{0}:{1}:{2}", red, green, blue)); 
```

结果是：

```
1:2:3
4:5:6 
```

我假设如果在这个例子中可枚举有第七个值，它会忽略那个“额外”值。否则，如果您需要处理这种情况，您可以修改我的代码以使用默认值或可为空的类型。

这是我的定义`ForEachBundle`：

```
public static void ForEachBundle<T>(
    this IEnumerable<T> @this,
    Action<T, T, T> action)
{
    if (@this == null) throw new System.ArgumentNullException("@this");
    var a = action;
    if (a == null) throw new System.ArgumentNullException("action");
    using (var en = @this.GetEnumerator())
    {
        while (true)
        {
            if (en.MoveNext())
            {
                var t0 = en.Current;
                if (en.MoveNext())
                {
                    var t1 = en.Current;
                    if (en.MoveNext())
                    {
                        var t2 = en.Current;
                        a(t0, t1, t2);
                    }
                    else break;
                }
                else break;
            }
            else break;
        }
    }
} 
```

让我知道这是否符合您的要求。

* * *

这是一个为不完整的“捆绑包”添加默认值的版本：

```
public static void ForEachBundle<T>(
    this IEnumerable<T> @this,
    Action<T, T, T> action)
{
    if (@this == null) throw new System.ArgumentNullException("@this");
    var a = action;
    if (a == null) throw new System.ArgumentNullException("action");
    using (var en = @this.GetEnumerator())
    {
        while (en.MoveNext())
        {
            var t0 = en.Current;
            var t1 = en.MoveNext() ? en.Current : default(T);
            var t2 = en.MoveNext() ? en.Current : default(T);
            a(t0, t1, t2);
        }
    }
} 
```

# php - ColdFusion 等价于 PHP hash_hmac

> ID：10331980
> 
> 赞同：3
> 
> 时间：2012-04-26T10:54:54.587
> 
> 标签：php, coldfusion

```
$key = "12345678876543211234567887654321";
$iv = "1234567887654321";
$plaindata = "This is a test string";

$enc = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaindata, MCRYPT_MODE_CBC, $iv));

$str = hash_hmac("sha256", utf8_encode($iv . '.' . $enc), utf8_encode($key));

echo($str); 
```

这给了我 e63d4ab83f90cfec1acdaf831091b6394167ae728b657e44afad1e7553843eeb

如何在 ColdFusion9 开发版中获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:05:06.583

我在这个页面上找到了一个解决方案[http://www.isummation.com/blog/calculate-hmac-sha256-digest-using-user-defined-function-in-coldfusion/](http://www.isummation.com/blog/calculate-hmac-sha256-digest-using-user-defined-function-in-coldfusion/)

您需要像这样调用函数

```
<cfoutput>#LCase(HMAC_SHA256(iv & "." & Encrypted_Data, key))#</cfoutput> 
```

像魅力一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:11:43.937

没有时间完全解决它，但我认为[HMAC SHA1 ColdFusion](https://stackoverflow.com/questions/2959972/hmac-sha1-coldfusion)应该能够让你到达那里。如果由于某种原因你不能完全正确（曾经有过），你也可以考虑将 php-cli 与 cfexecute 一起使用。这不是最快的解决方案，但如有必要，它允许您使用 php 函数。

编辑：从上一个答案中复制了函数，并添加了关于需要更改的行的注释。

```
<cffunction name="hmacEncrypt" returntype="binary" access="public" output="false">
 <cfargument name="signKey" type="string" required="true" />
 <cfargument name="signMessage" type="string" required="true" />

 <cfset var jMsg = JavaCast("string",arguments.signMessage).getBytes("iso-8859-1") />
 <cfset var jKey = JavaCast("string",arguments.signKey).getBytes("iso-8859-1") />

 <cfset var key = createObject("java","javax.crypto.spec.SecretKeySpec") />
 <cfset var mac = createObject("java","javax.crypto.Mac") />

 <!--- this line had to be changed to the 256 version --->
 <cfset key = key.init(jKey,"hmacSHA256") />

 <cfset mac = mac.getInstance(key.getAlgorithm()) />
 <cfset mac.init(key) />
 <cfset mac.update(jMsg) />

<cfreturn mac.doFinal() /> 
```

# android - 如何在android中获得意图的结果？

> ID：10331984
> 
> 赞同：2
> 
> 时间：2012-04-26T10:55:14.640
> 
> 标签：android, android-intent

我想访问 *#0228# 的结果（我使用的是三星 Galaxy i9000，可能是三星的 ..）我可以拨打这个号码

```
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.parse("tel:"+ "*" + Uri.encode("#") + "0228" + Uri.encode("#")));
startActivity(intent); 
```

在我可以看到电池信息和 gsm 信息（即 hsdpa）之后，它会调用 *#0228#

我想立即获得这些信息。我不知道什么是最好的方法。你知道，它总是会打开一些活动，然后会关闭，我会得到信息。也许必须有另一种简单的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:37:41.183

根据您想要什么样的信息，您应该查看 [http://developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

和

[http://developer.android.com/reference/android/os/BatteryManager.html](http://developer.android.com/reference/android/os/BatteryManager.html)

我认为不可能拦截 USSD 调用的结果（如此处所述：[Can the android API be used to intercept and read operator messages (USSD messages)?](https://stackoverflow.com/questions/9820853/can-the-api-intercept-and-read-operator-messages)）而且我也不认为这是必要的，尤其是对于信息您似乎正在寻找的（gsm 和电池信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:11:16.177

这里也有一个解决方案：

[如何在 android 中读取 USSD 消息？](https://stackoverflow.com/questions/6515906/how-to-read-ussd-messages-in-android)

有些人入侵了 ussd 类。但我还没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:35:15.773

三星 Y 没有提供正确的电池电压，但 ussd 调用 *#0228# 是正确的。我的唯一方法是访问 /sys/class/power_supply/battery/volt

# ajax - extjs：如何在列渲染器中使用 ajax 调用？

> ID：10331986
> 
> 赞同：2
> 
> 时间：2012-04-26T10:55:26.950
> 
> 标签：ajax, extjs, extjs3

我现在得到的是：

```
renderer : function(value) {
    var ret;
    var conn = new Ext.data.Connection();
    conn.request({
        method : 'POST',
        url : rsdBackend,
        params : {
            get_object_by_id : 'true',
            rsd_type : record.data.references_table,
            object_id : value,
            uid : logged_user_id
        },
        success : function(responseObject) {
            var data = Ext.decode(responseObject.responseText);
            ret = data[0].object_name;
        }
    });
    return ret;
} 
```

如果一列包含指向另一个数据的链接（数据库术语中的外键），我需要显示它引用的对象的名称。

所以，我能想到的最好的方法是在渲染器中使用 ajax 调用。它有效，但问题是：我怎样才能返回响应？

上面的代码不起作用，原因`ret`在我尝试的地方未定义`return`。

如何做到这一点，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:22:42.810

基于这个线程[Sencha forum thread](http://www.sencha.com/forum/showthread.php?72216-Grid-asynchronous-update-of-cell-data)

我做了一个异步渲染器。

在我的示例中，我想在我的记录关联中显示第一条记录的“名称”值。

“fileRecord_store()”是我的关联商店的名称（通过“hasMany”关联模型创建）

在网格面板中，您可以制作这样的渲染器：

```
 { header: 'Filename',  dataIndex: 'Files_id',      flex: 2,
    renderer: function(value, meta, record, rowIndex, colIndex, store, view) {
          var divId = 'my_cell_to_update_' + record.id;
          record.columnsNameUpdate(divId);
          return String.format("<div id='" + divId + "'>Loading...</div>"); 
                }
}, 
```

现在在模型类中我添加了这个函数：

```
columnsNameUpdate : function(divId){

    this.fileRecord_store().on('load', this.updateColumn,this, {divId : divId});
    this.fileRecord_store().load();
},

updateColumn : function(store, model, success, options){
    this.fileRecord_store().un('load', this.updateColumn,this);
    Ext.fly(options.divId).update(store.first().get('filename')); 
} 
```

这对我来说很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:54:11.687

我不认为你可以这样做。Ajax 调用是异步的，`renderer()`函数是同步的。我现在无法想象如何将它们混合在一起。

在渲染网格之前，您需要获取`renderer()`函数（所有单元格！）完成所需的所有信息。为什么不能为它创建一个额外的商店，先加载它然后使用它？

# php - HDFS thrift 服务器返回本地 FS 的内容，而不是 HDFS

> ID：10331992
> 
> 赞同：1
> 
> 时间：2012-04-26T10:55:56.840
> 
> 标签：php, hadoop, thrift, hdfs

我正在使用 Thrift 访问 HDFS。

1.  这是 HDFS 上预期的（和正确的）内容。

    ```
    [hadoop@hdp-namenode-01 ~]$ hadoop fs -ls /
    Found 3 items
    drwxr-xr-x   - hadoop supergroup          0 2012-04-26 14:07 /home
    drwxr-xr-x   - hadoop supergroup          0 2012-04-26 14:21 /tmp
    drwxr-xr-x   - hadoop supergroup          0 2012-04-26 14:20 /user 
    ```

2.  然后我启动一个 HDFSThriftServer

    ```
    [hadoop@hdp-namenode-01 ~]$ jps
    17290 JobTracker
    16980 NameNode
    27289 Jps
    17190 SecondaryNameNode
    17511 RunJar
    25270 HadoopThriftServer 
    ```

3.  尝试通过 PHP 中的 Thrift 访问内容。

```
 $transport = new TSocket(HDFS_HOST, HDFS_PORT);
    $transport->setRecvTimeout(60000);
    $transport->setSendTimeout(60000);
    $protocol =new TBinaryProtocol($transport);
    $client = new ThriftHadoopFileSystemClient($protocol);
    logv("connect hdfs");
    $transport->open();
    logv("testing existent of `%s'", $remote_uri);
    $remote_path = new Pathname(array('pathname' => $remote_uri));
    $remote_file = null;
    try {
            $remote_file = $client->listStatus($remote_path);
    } catch(Exception $e) { }
    if (!$remote_file)
        loge("could not open `%s'", $remote_uri); 
```

While`$remote_uri`是绝对路径。对于`$remote_uri === '/non/existent'`or`'/user'`等​​，listStatus 总是失败。但是如果我将其更改为`'/tmp'`，我发现它列出了`'/tmp'`thrift 服务器本地 FS 的内容。

所以返回的内容是thrift服务器上的本地FS，而不是HDFS！这里有什么问题？

# sql-server - SQL Server 动态 SQL 从多个同名表中选择相同的列

> ID：10331993
> 
> 赞同：0
> 
> 时间：2012-04-26T10:55:57.717
> 
> 标签：sql-server, sql-server-2005

我有多个更新的表（很少）在我的数据库中创建新表。然后，我必须使用 case 函数更新我的报告以查询这些历史表。鉴于我必须提供的报告数量，这是一项冗长的练习，这可能意味着我的报告由于冗长的案例陈述和完整的外部连接而表现不佳。我希望使用某种通配符来查看这些名称相似的表以提取数据（我需要的列都具有相同的名称），这样每次更新数据库时，我都不需要重写我所有的查询。例如

```
Table1.PaymentStatus
Table1.Amount
Table2.PaymentStatus
Table2.Amount
....
TableX.PaymentStatus
TableX.Amount 
```

是我需要的字段吗->

```
Payment Status   Amount
All Data         All Data 
```

希望我可以创建某种动态 sql，包括 Union All，然后将这种子查询链接到我的其余表。我对动态 SQL 没有太多经验，并且在论坛上找到了这个查询并正在尝试调整它（并同时学习！）但运气不佳。

```
declare @columns table (idx int identity(1,1), table_name varchar(100), column_name varchar(50)) 

insert into @columns (table_name, column_name)  
select table_name, column_name 

from INFORMATION_SCHEMA.COLUMNS 

where table_name like '%Special%' 

declare @sql nvarchar(4000) 

declare @i int 
declare @cnt int 

declare @col varchar(100) 
declare @table varchar(100) 

select @i = 0, @cnt = max(idx), @sql = '' from @columns 

select *
from @columns

while @i < @cnt 
begin 
    select @i = @i + 1 

    select @col = column_name, @table = table_name from @columns where idx = @i 

    if len(@sql) > 0 
        select @sql = @sql + ', ' 

    select @sql = @sql + '[' + @table + '].[' + @col + '] as [' + @table + '_' + @col + ']' 
end 

select @sql = 'select ' + @sql + ' from *' 

exec sp_executesql @sql 
```

我有另一个关于创建视图并将我的查询链接到这个视图的建议，所以我只需要在每次更新时更新这个视图，但想知道是否有更自动化的解决方案。不幸的是，我无法控制这些副本的创建方式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:00:35.543

创建一个视图，一个包装表的视图，然后编写一个查询，使用最新的表删除并重新创建视图。

然后，只要表发生更改，您就可以运行该查询一次。

您可以通过查询 sys.tables 来获取表的列表。