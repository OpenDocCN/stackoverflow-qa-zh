# StackOverflow 问答 11809000-11809999

# html - 对齐从列表创建的图像网格的中心和中间

> ID：11809003
> 
> 赞同：0
> 
> 时间：2012-08-04T13:23:08.683
> 
> 标签：html, css

我有一个 ul 列表，其中包含 9 张图片，高度为 70 像素或宽度为 70 像素，具体取决于图像是纵向还是横向拍摄。我已经很容易地将图像显示为 3 行和 3 列，但我似乎无法对齐图像，因此它们在水平和垂直方向上都位于中心。

谢谢大家。

这是我下面的代码

**css**

```
#gallery_image ul {
    list-style:none;margin:0;
    padding:0;
}
#gallery_image li {
    display: block;
    height: 80px;
    Width:80px;
    line-height: 80px;
    float:left;
    padding:5px;
    text-align:center;
}
#gallery_image li img { 
    line-height:80px;
    vertical-align: middle; 
}​ 
```

**html**

```
<div id="gallery_image">
   <ul>
        <li>
            <a href="/flower1.jpg" class="fancybox" rel="gallery1"><img src="/flower1.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower2.jpg" class="fancybox" rel="gallery1"><img src="/flower2.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower3.jpg" class="fancybox" rel="gallery1"><img src="/flower3.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower4.jpg" class="fancybox" rel="gallery1"><img src="/flower4.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower5.jpg" class="fancybox" rel="gallery1"><img src="/flower5.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower6.jpg" class="fancybox" rel="gallery1"><img src="/flower6.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower7.jpg" class="fancybox" rel="gallery1"><img src="/flower7.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower8.jpg" class="fancybox" rel="gallery1"><img src="/flower8.jpg" alt="" /></a>
        </li>
        <li>
            <a href="/flower9.jpg" class="fancybox" rel="gallery1"><img src="/flower9.jpg" alt="" /></a>
        </li>
    </ul>
</div> 
```

# cocos2d-iphone - CCRenderTexture (alpha) beginWithClear 透明白色

> ID：11809004
> 
> 赞同：1
> 
> 时间：2012-08-04T13:23:20.763
> 
> 标签：cocos2d-iphone, opengl-es-2.0, glsl

我不明白透明度/alpa 如何与 CCRenderTexture 一起使用。

使用此代码，我预计红色 ColorLayer 上有半透明的白色（透明度适用于 CCLayerColor）。我得到的是全白的。

此代码只是添加到 HelloWorldLayer init 方法末尾的默认模板中。

```
 CCLayerColor * lc = [CCLayerColor layerWithColor:ccc4(255.0f, 0.0f, 0.0f, 125.0f)];
    [self addChild:lc];

    CCRenderTexture * rt = [CCRenderTexture renderTextureWithWidth:480.0f
                                                            height:320.0f];
    [self addChild:rt];
    rt.position = ccp(240.0f,160.0f);

    [rt beginWithClear:1.0f g:1.0f b:1.0f a:0.5f];

    [rt end]; 
```

如果我换成黑色，我会得到半透明的黑色：

```
 [rt beginWithClear:0.0f g:0.0f b:0.0f a:0.5f]; 
```

使用 alpha 0.0f 和绿色 1.0 我会得到绿色 - 本来希望有一个清晰的层.. [rt beginWithClear:0.0fg:1.0fb:0.0fa:0.0f];

真正的问题在于，在那个 RT 中，我无法在片段着色器中用白色绘制透明度：

```
 gl_FragColor = vec4( 1.0, 1.0, 1.0, 0.5); 
```

结果是全白..

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:14:04.760

试试看：

```
[renderTexture.sprite setBlendFunc:(ccBlendFunc){GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA}]; 
```

# android - 如何在当前时间添加时间？

> ID：11809008
> 
> 赞同：1
> 
> 时间：2012-08-04T13:23:30.793
> 
> 标签：android, timestamp

当我运行程序时，系统当前时间显示在文本视图中。现在我有一个按钮、一个edittext 和一个textview。我想当我在edittext上放40时，我按当前小时秒数计算，然后通过在textview上按下按钮来显示它。当我从edittext中获取它时，我只想计算当前的小时秒数。如您所知，当当前小时秒数以数字计算时，它也会影响分钟和小时

帮我请这个代码显示当前时间：

```
 Thread myThread = null;
    Runnable runnable = new CountDownRunner();
    myThread= new Thread(runnable);   
    myThread.start();
}
public void doWork() {
    runOnUiThread(new Runnable() {
        public void run() {
            try{    
               txtCurrentTime= (TextView)findViewById(R.id.lbltime);
                    Date dt = new Date();
                    int hours = dt.getHours();
                    int minutes = dt.getMinutes();
                    int seconds = dt.getSeconds();
                    String curTime = hours + ":" + minutes + ":" + seconds;
                    txtCurrentTime.setText(curTime); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:14:05.303

当前时间：

```
 txtCurrentTime= (TextView)findViewById(R.id.txtcurrunt);
                Date dt = new Date();
                int hours = dt.getHours();
                int minutes = dt.getMinutes();
                int seconds = dt.getSeconds();
                String curTime = hours + ":" + minutes + ":" + seconds;
                txtCurrentTime.setText(curTime); 
```

用户输入：

```
 userInput=(EditText)findViewById(R.id.userInputInSeconds);
                String userInput=userInput.getText().toString();
                long increment=Long.parseLong(userInput);
//New Time
              Date dt = new Date();
              long newTime =dt.getTime()+(increment)/1000;
              Date newData=new Date(newTime);
              int hours = newData.getHours();
              int minutes = newData.getMinutes();
              int seconds = newData.getSeconds();
              String newTimeString = hours + ":" + minutes + ":" + seconds;

              txtNewTime= (TextView)findViewById(R.id.txtNew);
              txtNewTime.setText(newTimeString); 
```

我希望它会帮助你... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:47:08.903

使用日历。您可以更轻松地处理当前时间的秒数。

```
int seconds=Integer.parseInt(mTextView.getText()); // get textview's value (in integer)

Calendar cal=Calendar.getInstance();

int hours = cal.get(Calendar.HOUR_OF_DAY);
int minutes = cal.get(Calendar.MINUTE);
int seconds = cal.get(Calendar.SECOND);
String currentTimeString = String.format("%1$tH:%1$tM:%1$tS",cal);//24-hour format : HH:MM:SS

cal.add(Calendar.SECOND,seconds);
String newTimeString = String.format("%1$tH:%1$tM:%1$tS",cal);//24-hour format : HH:MM:SS 
```

更多日期格式：访问[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

# php - 如何让 PHP 代码保持活力？

> ID：11809009
> 
> 赞同：2
> 
> 时间：2012-08-04T13:23:40.500
> 
> 标签：php, server-side, keep-alive

我是网络编程的新手。我有基本的 PHP 编程技能。

根据我对 PHP 的了解，它在服务器端运行并生成 HTML 代码，服务器端 PHP 脚本结束，然后将生成的 HTML 代码发送给我们（我们 = 客户端的浏览器）。但是在我在互联网上遇到的一些网页（使用 PHP 编程）中，即使页面完成加载很长时间，服务器-客户端交互也会在后台静默运行。

例如，在 Stack Exchange 社区中，当我查看新问题时，我看到投票数正在发生变化（正如其他用户投票一样），而无需刷新页面。这表明后台脚本正在与数据库通信，对吗？

这些页面是纯PHP实现的吗？
如果是，我认为 PHP 脚本必须在发送生成的 HTML 代码之前在服务器端完成。这种方法的秘诀是什么？如果不是，我还需要学习哪些其他编程语言和/或网络技术才能学习它？他们是否将其他技术与 PHP 结合起来？

请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T13:25:15.693

这不是 PHP 主动运行，这是[AJAX](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:20:56.767

您正在询问达到目的的方法（如何使页面动态化），而您需要了解的似乎是目的（动态页面）。

您对 PHP 的工作原理基本上是正确的。

> 根据我对 PHP 的了解，它在服务器端运行并生成 HTML 代码，服务器端 PHP 脚本结束，然后将生成的 HTML 代码发送给我们（我们 = 客户端的浏览器）。

但是，您忽略了有关网页如何工作的事情：服务器要发送任何内容，例如网页，必须有来自客户端的请求。因此，询问服务器如何在没有客户端请求的情况下执行此操作会更合适。

要回答您的一些问题：

**这些页面是纯PHP实现的吗？**--> 不，不是。

**如果不是，我还需要学习哪些其他编程语言和/或网络技术才能学习它？**--> 与特定的 PL 或技术相比，更明智的做法是考虑“服务器如何启动与客户端（浏览器/页面）的通信？” （或让它看起来好像），因为这是实现此类页面的“秘密”（或更恰当地说是关键）。您可以找到许多处理此问题的技术、技巧和两者的组合（推送技术、长轮询、ajax 等）。

**他们是否将其他技术与 PHP 结合起来？**--> 是的，与网络上的大多数内容一样，动态页面是多种技术和技巧的组合。

我相信你以错误的角度看待你想要完成的事情。希望这能让你走上正轨！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:37:30.013

没有一种语言可以构建整个网页。您看到的现代网页是使用多种语言生成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:26:00.083

即使在服务器端使用 AJAX 处理结束后，前端仍会继续与后端通信。AJAX 可以而且应该与任何后端技术相结合，如 JAVA/ASP/PHP/PYTHON 等，以创建动态网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T13:30:06.940

简短的回答是：你不能。

您在某些网站中看到的持续交互是通过使用称为 Ajax 的 Javascript 技术实现的，该技术会定期（或基于鼠标单击等浏览器事件）在后台调用 PHP 脚本并根据该响应执行某些操作。

# jquery - 动态 html 下拉菜单

> ID：11809020
> 
> 赞同：1
> 
> 时间：2012-08-04T13:26:14.787
> 
> 标签：jquery, html, forms, drop-down-menu

我在 HTML 表单上有两个下拉菜单。我试图让第二个下拉列表的答案基于第一个框是动态的。因此，如果下拉菜单 1 是“1”，下拉菜单 2 将有选项“a”“b”“c”，如果下拉菜单 1 是“2”，下拉菜单 2 将有“d”“e”“f”。

实现这一目标的最佳方法是什么，最好是使用 jQuery？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:33:37.410

理想情况下，您使用 ajax 发布第一个选项并获取第二个选项的选项。

例子：

```
<script>
function onSelect1Change(){
$.post("url" ,{
        value: $("#select1").val()
          }, function(data) {
         $("#select2").html(data);
    }); 
}
</script>

<select id="select1" name="select1" onchange="onSelect1Change">...</select>
<select id="select2" name="select2" ></select> 
```

在您的后端，您检查`$_POST['value']`并输出一些`<option></option>`标签。

# python - 我需要使用 MatPlotLib 在 PyQt4 GUI 中绘制饼图

> ID：11809025
> 
> 赞同：3
> 
> 时间：2012-08-04T13:28:07.880
> 
> 标签：python, matplotlib, pyqt

编辑：我能够让它工作如下：

```
import matplotlib
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.figure import Figure
import matplotlib.pyplot as plt
from PyQt4 import QtCore, QtGui
from ui_ageingReport import Ui_report_ageingDisplay

class AgeingChart():

    def __init__(self, label, frac, titl):
        self.age_dialog=QtGui.QDialog()
        self.age_ui = Ui_report_ageingDisplay()
        self.age_ui.setupUi(self.age_dialog)

        self.dpi = 120
        self.fig = plt.figure(1, figsize=(4,4))
        self.fig.add_subplot(111)
        explode=(0, 0.05, 0, 0, 0)
        labels = label
        fracs = frac
        plt.pie(fracs, explode=explode, labels=labels, autopct='%1.1f%%', shadow=True)
        plt.title(titl, bbox={'facecolor':'0.8', 'pad':10})
        self.canvas = FigureCanvas(self.fig)
        self.canvas.setParent(self.age_ui.chart)
        self.age_dialog.exec_() 
```

唯一的问题是定位它请看下面的图片，它目前看起来像第一张图片，但我希望它看起来像第二张图片我对第二张图片进行了Photoshop处理，这就是为什么有些文字被切掉了我需要更多空间在侧面以允许标记。

谢谢

我无法在这里上传图片的一些原因是图片的链接 [http://www.somans.com/Untitled-1.jpg](http://www.somans.com/Untitled-1.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T12:04:20.990

听起来你的问题是，“我怎样才能让饼图坐在我的身材中间？”。我会回答：

您使用 QT4 窗口系统来生成绘图这一事实并没有什么特别之处。我采用了 matplotlib 饼图示例，并修改了图形宽度以模拟您的要求。最后，也是至关重要的，我将纵横比设置为 1:1 以保持饼图圆形：

```
from pylab import *

# make a square figure and axes
figure(1, figsize=(10, 3))
ax = axes([0.1, 0.1, 0.8, 0.8])

labels = 'Frogs', 'Hogs', 'Dogs', 'Logs'
fracs = [15,30,45, 10]

explode=(0, 0.05, 0, 0)
pie(fracs, explode=explode, labels=labels, autopct='%1.1f%%', shadow=True)
title('Raining Hogs and Dogs', bbox={'facecolor':'0.8', 'pad':5})

gca().set_aspect('1')
show() 
```

![在此处输入图像描述](../Images/0adfbe42963993e55049fab12ca0231f.png)

# android - 在android中显示通知

> ID：11809028
> 
> 赞同：0
> 
> 时间：2012-08-04T13:28:38.920
> 
> 标签：android, android-intent, android-emulator, android-widget

我正在使用以下代码在我的 android 应用程序中显示通知，但是使用它，通知也会显示一个活动（即黑色空白屏幕）我不想要这个屏幕，而只是一个简单的通知，当用户点击通知然后我想启动活动。这段代码应该怎么做？

```
 NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notify = new Notification(R.drawable.mcube_logo, "Message Sent", Calendar.getInstance().getTimeInMillis());

        Intent intent = new Intent(RecieveAlarm.this, otherActivity.class);
        PendingIntent pendingIntent =PendingIntent.getActivity(RecieveAlarm.this, 1, null, PendingIntent.FLAG_CANCEL_CURRENT);

        notify.setLatestEventInfo(RecieveAlarm.this, "Title", "Details", pendingIntent);
        notificationManager.notify(0, notify); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:59:38.403

我建议你使用：

```
 Notification not = new Notification(idIcon, text, System.currentTimeMillis());
    PendingIntent pInt = PendingIntent.getActivity(ctx, 0, new Intent(ctx, the_class_to_call), 0);

    not.setLatestEventInfo(ctx, app_name, text, pInt); 
```

然后not.notify....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:07:19.527

使用 AlertDialog，然后在单击肯定按钮时启动所需的活动

# c# - 更新条目时出错 - 字符串或二进制数据将被截断

> ID：11809029
> 
> 赞同：2
> 
> 时间：2012-08-04T13:28:39.703
> 
> 标签：c#, sql-server, entity-framework, datagridview, ado.net

我之前使用 Entity Framework 和 Microsoft SQL Server 2008 做过这个项目，没有任何问题。我有一个有两个简单列（`ID`和`Name`）的表。我将它们绑定到 a并且我对,或`DataGridView`没有任何问题。`Insert``Update``Delete`

现在我尝试做同样的事情，但这次使用的是两个非常复杂的表，其中包含自动增量列和外键。

当我尝试将插入的信息保存在数据库中时，出现以下异常：

> 更新条目时出错。有关详细信息，请参阅内部异常。
> 
> 内部异常：字符串或二进制数据将被截断。该语句已终止。

几乎 10 次停止并重新运行后，项目错误消失了，而我没有进行任何更改。这个错误是为了什么？为什么它没有我改变任何东西？

如果它想无缘无故地抛出随机异常并在一段时间后停止抛出这些异常，我不能相信它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-18T17:44:56.850

当提供的数据长度大于数据库字段中指定的长度时，通常会发生此错误。

确保数据库字段长度足以容纳输入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T22:43:12.693

我会对此发表评论，但我没有足够的声誉发表评论。我被困在同样的错误上。看到这个答案后，我所做的就是快速找到我错的地方是我的使用。

```
PM> update-database -force -Verbose 
```

详细标签查看为 AutomaticMigrations 生成的 Sql。

希望这可以帮助。

# z3 - z3中的“简化”和“ctx-solver-simplify”有什么区别

> ID：11809034
> 
> 赞同：5
> 
> 时间：2012-08-04T13:29:54.120
> 
> 标签：z3

由于当前版本，“ctx-solver-simplify”中存在一些问题，如示例[http://rise4fun.com/Z3/CqRv](http://rise4fun.com/Z3/CqRv) z3 给出了错误的答案。我将“ctx-solver-simplify”替换为“simplify”，如[http://rise4fun.com/Z3/x9X4](http://rise4fun.com/Z3/x9X4) 我想知道，这两种策略“simplify”和“ctx-solver-simplify”有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:54:38.403

该策略`simplify`仅执行“局部简化”。对于每个术语`t`，我们都有`simplify(t)`一个新术语，相当于`t`。此外，结果`simplify(t)`不取决于`t`发生的上下文。就上下文而言，我指的是发生位置的断言`F`和`t`所有其他断言。由于`simplify`是本地的，因此非常有效。该实现基本上基于简化规则的自下而上应用。此外，由于结果`simplify(t)`不依赖于上下文信息，我们可以缓存它。因此，即使公式中`t`出现多次，我们也只需简化一次。Z3 中的所有内置求解器都应用了这种简化。因此，诸如`N``F``simplify`已经过广泛的测试。

该策略`ctx-solver-simplify`使用`t`发生的上下文来应用简化。`F`基本思想是通过使用求解器遍历公式来简化公式`S`。求解器`S`本质上包含“上下文”。每当`S.check()`返回时`unsat`，我们知道当前上下文不一致，那么我们可以将当前公式替换为`false`。`ctx-solver-simplify`贵很多。首先，它对`S.check()`. 这些调用中的每一个都可能非常昂贵。缓存中间结果也更加困难。Z3 可能不得不`t`多次简化子公式，因为它出现在不同的上下文中。

您在问题中报告的错误已得到修复。该修复程序将在下一个版本（4.1 版）中提供。如果您需要，我们可以为您提供 Z3 4.1 的预发布版本

# php - mongodb 错误：查询必须为空白或对象

> ID：11809035
> 
> 赞同：1
> 
> 时间：2012-08-04T13:29:57.000
> 
> 标签：php, mongodb

当我运行这个查询

```
$count = smongo::$db->sessions->find(array(),array('cd'=>1))->count(); 
```

我收到以下错误：

```
Array ( [assertion] => query has to be blank or an Object [assertionCode] => 13608 [errmsg] => db assertion failure [ok] => 0 ) 
```

php.ini 上的 mongodb 版本 2.0.6。

我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:42:30.720

您收到的错误消息只能由 MongoDB 中的 mapReduce() 代码生成。此问题的最可能原因是您从另一个命令而不是您上面列出的 find() 命令中获得了异常。

我无法使用您的代码重现此问题。我怀疑如果您尝试自己创建一个测试用例，您会发现**您**无法使用您的示例代码重现它。仔细查看在与您发布的代码示例相同的异常捕获上下文中运行的 mapReduce() 命令。

# string - MATLAB中的数字到字符串转换

> ID：11809044
> 
> 赞同：3
> 
> 时间：2012-08-04T13:31:15.207
> 
> 标签：string, matlab, converter, numeric

我需要一个代码来接收像 [2 , 6, 9] 这样的 1xn 数字数组，并以这种方式将其转换为 1x1 字符串数据：

2、6、9

或者这样：

2, 6, 9,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T13:39:51.310

```
s = sprintf('%d,', a) 
```

`a`你的向量在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T14:57:32.043

要将数字向量转换为字符串，可以使用`num2str`函数。文档在这里： http: [//www.mathworks.com/help/matlab/ref/num2str.html](http://www.mathworks.com/help/matlab/ref/num2str.html)。

我不知道是否有办法将字符串存储为 1x1 元素，并且`sprintf`不确定，因为它的输出是字符数组。

# magento - 如何在 Magento 的现有菜单中添加子菜单？

> ID：11809047
> 
> 赞同：5
> 
> 时间：2012-08-04T13:31:31.903
> 
> 标签：magento

我现有的代码创建了一个看起来像这样的菜单。

![自定义 magento 菜单](../Images/ef391ec1a79104052f25d96ae3907f8e.png)

但我想要一个菜单​​，它是目录菜单的子菜单。

这是我现有的代码`adminhtml.xml`

```
<?xml version="1.0" ?>
<config>
    <menu>
        <mycustom_menu translate="title" module="brands">
            <title>My Custom Menu Item</title>
            <sort_order>300</sort_order>
            <children>
                <!-- child items go here -->
                <subitem translate="title" module="brands">
                    <title>Manage Brands</title>
                    <sort_order>10</sort_order>
                    <action>adminhtml/mycustom_controller/</action>
                </subitem>
            </children>
        </mycustom_menu>
    </menu>
    <acl>
        <resources>
            <admin>
                <children>
                    <mycustom_menu translate="title" module="brands">
                        <title>My Custom Menu Item</title>
                        <sort_order>300</sort_order>
                        <children>
                            <subitem translate="title" module="brands">
                                <title>Subitem</title>
                                <sort_order>10</sort_order>
                            </subitem>
                        </children>
                    </mycustom_menu>
                </children>
            </admin>
        </resources>
    </acl>
</config> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-04T15:53:27.200

`<mycustom_menu>`您需要重新使用`adminhtml.xml` 目录模块中使用的节点名，而不是使用。那个名字是`catalog`。

所以你的 XML 应该如下所示：

```
<?xml version="1.0"?>
<config>
    <menu>
        <catalog>
            <children>
                <your_subitem>
                    <title>Subitem 1</title>
                    <sort_order>10</sort_order>
                    <action>adminhtml/your_action</action>
                </your_subitem>
            </children>
        </catalog>
    </menu>
    <acl>
        <resources>
            <admin>
                <children>
                    <catalog>
                        <title>Subitem 1</title>
                        <sort_order>10</sort_order>
                    </catalog>
                </children>
            </admin>
        </resources>
    </acl>
</config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T09:06:30.313

例如在客户选项卡中添加子菜单：

```
<menu>
    <customer>
        <children>
          <vendor module="yourmodule">
            <title>Your Title</title>
            <sort_order>0</sort_order>
            <action>admin_yourmodule/adminhtml_yourmoduleaction</action>
          </vendor>
        </children>
    </customer>
</menu> 
```

# cocoa - 将 NSTreeController 与 MagicalRecord 绑定

> ID：11809049
> 
> 赞同：1
> 
> 时间：2012-08-04T13:31:57.323
> 
> 标签：cocoa, core-data, cocoa-bindings, magicalrecord

我正在尝试在 OSX 应用程序中使用 MagicalRecord。我有一个具有以下层次结构的 NSOutlineView：

集团
- 客户
- 项目

首次运行应用程序时会自动创建一个组。一切都是通过绑定设置的，并且基本上可以正常工作。我唯一的问题是，在没有数据的情况下首次运行应用程序时，我会看到自动创建的组，但组内新创建的客户只会在我关闭并重新启动应用程序时出现。从那时起，一切正常。

不知何故，没有通知 NSTreeController 关系的变化。我尝试使用 tableviews 显示关系，一切都显示在这里。

是否有任何示例代码显示如何将 MagicalRecord 与 NSTreeController / NSOutlineView 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:03:33.677

我似乎已经解决了这个问题。插入的客户没有出现的原因与大纲视图的委托有关。删除我的 -outlineView:isGroupItem 实现后；物品突然出现在树上。

它仍然不完美，因为组项不会自动扩展，并且用户看不到其中是否包含子项（我隐藏了组的显示三角形）。但作为一种解决方法，我立即在 NSTreeController 中选择新插入的项目，它会扩展任何父组。

# mysql - 复杂的mysql插入查询

> ID：11809051
> 
> 赞同：0
> 
> 时间：2012-08-04T13:32:20.150
> 
> 标签：mysql, migration, database-schema

我正在尝试编写迁移脚本（在程序的 2 个版本之间）来填充 phppos_permissions_actions 表。

填充的规则是：“如果用户对模块有权限（基于 phppos_permissions），那么他们被授予该模块的所有操作权限。（可以在 phppos_module_actions 中查找）”。

我正在尝试编写一个查询或一组查询，以使以下规则发生。有人可以指导我正确的方向吗？下面是我的架构

```
mysql> describe phppos_modules;
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| name_lang_key | varchar(255) | NO   | UNI | NULL    |       |
| desc_lang_key | varchar(255) | NO   | UNI | NULL    |       |
| sort          | int(10)      | NO   |     | NULL    |       |
| module_id     | varchar(255) | NO   | PRI | NULL    |       |
+---------------+--------------+------+-----+---------+-------+
4 rows in set (0.01 sec)

mysql> select * from phppos_modules;
+-------------------+------------------------+------+------------+
| name_lang_key     | desc_lang_key          | sort | module_id  |
+-------------------+------------------------+------+------------+
| module_config     | module_config_desc     |  100 | config     |
| module_customers  | module_customers_desc  |   10 | customers  |
| module_employees  | module_employees_desc  |   80 | employees  |
| module_giftcards  | module_giftcards_desc  |   90 | giftcards  |
| module_item_kits  | module_item_kits_desc  |   30 | item_kits  |
| module_items      | module_items_desc      |   20 | items      |
| module_receivings | module_receivings_desc |   60 | receivings |
| module_reports    | module_reports_desc    |   50 | reports    |
| module_sales      | module_sales_desc      |   70 | sales      |
| module_suppliers  | module_suppliers_desc  |   40 | suppliers  |
+-------------------+------------------------+------+------------+
10 rows in set (0.00 sec)
mysql> describe phppos_modules_actions;
+-----------------+--------------+------+-----+---------+-------+
| Field           | Type         | Null | Key | Default | Extra |
+-----------------+--------------+------+-----+---------+-------+
| action_id       | varchar(255) | NO   | PRI | NULL    |       |
| module_id       | varchar(255) | NO   | PRI | NULL    |       |
| action_name_key | varchar(255) | NO   |     | NULL    |       |
| sort            | int(11)      | NO   |     | NULL    |       |
+-----------------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec)

mysql> 

mysql> select * from phppos_modules_actions;
+----------------+-----------+--------------------------------+------+
| action_id      | module_id | action_name_key                | sort |
+----------------+-----------+--------------------------------+------+
| add_update     | customers | module_action_add_update       |    1 |
| add_update     | employees | module_action_add_update       |  130 |
| add_update     | item_kits | module_action_add_update       |   70 |
| add_update     | items     | module_action_add_update       |   40 |
| add_update     | suppliers | module_action_add_update       |  100 |
| delete         | customers | module_action_delete           |   20 |
| delete         | employees | module_action_delete           |  140 |
| delete         | item_kits | module_action_delete           |   80 |
| delete         | items     | module_action_delete           |   50 |
| delete         | suppliers | module_action_delete           |  110 |
| search         | customers | module_action_search_customers |   30 |
| search         | employees | module_action_search_employees |  150 |
| search         | item_kits | module_action_search_item_kits |   90 |
| search         | items     | module_action_search_items     |   60 |
| search         | suppliers | module_action_search_suppliers |  120 |
| see_cost_price | items     | module_see_cost_price          |   61 |
+----------------+-----------+--------------------------------+------+
16 rows in set (0.00 sec)

mysql> describe phppos_permissions
    -> ;
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| module_id | varchar(255) | NO   | PRI | NULL    |       |
| person_id | int(10)      | NO   | PRI | NULL    |       |
+-----------+--------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

mysql> select * from phppos_permissions;
+------------+-----------+
| module_id  | person_id |
+------------+-----------+
| config     |         1 |
| customers  |         1 |
| employees  |         1 |
| giftcards  |         1 |
| item_kits  |         1 |
| items      |         1 |
| receivings |         1 |
| reports    |         1 |
| sales      |         1 |
| suppliers  |         1 |
| sales      |       301 |
| sales      |       741 |
| config     |       759 |
| customers  |       759 |
| employees  |       759 |
| giftcards  |       759 |
| item_kits  |       759 |
| items      |       759 |
| receivings |       759 |
| reports    |       759 |
| sales      |       759 |
| suppliers  |       759 |
| sales      |       776 |
+------------+-----------+
23 rows in set (0.00 sec)

mysql> describe phppos_permissions_actions;
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| module_id | varchar(255) | NO   | PRI | NULL    |       |
| person_id | int(11)      | NO   | PRI | NULL    |       |
| action_id | varchar(255) | NO   | PRI | NULL    |       |
+-----------+--------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:03:26.050

做

```
insert phppos_permissions_actions (module_id, person_id, action_id)
select distinct 
    phppos_permissions.module_id, phppos_permissions.person_id, action_id
from phppos_permissions
    inner join phppos_modules_actions on phppos_permissions.module_id = phppos_modules_actions.module_id
order by module_id, person_id 
```

解决你的问题？

# c++ - 表达式模板和 C++11

> ID：11809052
> 
> 赞同：35
> 
> 时间：2012-08-04T13:32:35.083
> 
> 标签：c++, c++11, expression-templates

让我们看一下表达式模板的一个特殊好处：ET 可用于避免内存中出现在重载运算符中的向量大小的临时变量，例如：

```
template<typename T>
std::vector<T> operator+(const std::vector<T>& a, const std::vector<T>& b)
{
  std::vector<T> tmp;   // vector-sized temporary
  for_each(...);
  return tmp;
} 
```

在 C++11 中，此函数的 return 语句应用移动语义。没有向量的副本。那是一场胜利。

但是，如果我看一个简单的表达式，例如

```
d = a + b + c; 
```

我看到上面的函数被调用了两次（对于两者`operator+`），而最终的分配可以通过移动语义完成。

总共执行了 2 个循环。意味着我放了一个临时的，然后马上读回来。对于大向量，这超出了缓存。这比表达式模板更糟糕。他们可以在 1 个循环中完成整个事情。ET 可以执行上述代码，相当于：

```
for(int i=0 ; i < vec_length ; ++i)
  d[i] = a[i] + b[i] + c[i]; 
```

我想知道 lambda 与移动语义或任何其他新功能是否可以与 ET 一样好。有什么想法吗？

**编辑：**

基本上，使用 ET 技术，编译器构建一个类似于代数表达式及其类型系统的解析树。这棵树由内部节点和叶节点组成。内部节点表示操作（加法、乘法等），叶节点表示对数据对象的引用。

我试图以堆栈机器的方式思考整个计算过程：从操作堆栈中获取一个操作，然后从参数堆栈中提取下一个参数并评估该操作。将结果放回堆栈等待操作。

为了表示这两个不同的对象（操作堆栈和数据叶堆栈），我将`std::tuple`用于操作的 a 和 `std::tuple`用于数据叶的 a 捆绑到一个`std::pair<>`. 最初我使用了 a `std:vector`，但这导致了运行时开销。

整个过程分为两个阶段： 堆栈机器初始化，其中操作和参数堆栈被初始化。以及通过将配对容器分配给向量来触发的评估阶段。

我创建了一个类`Vec`，它包含一个私有`array<int,5>`（有效负载）并且具有一个采用“表达式”的重载赋值运算符。

全局`operator*`对于 take 和 "expression" 的所有组合都被重载， `Vec`以便在我们拥有的不仅仅是`a*b`. （注意，我将这个教育示例切换到乘法 - 基本上是为了`imull`在汇编程序中快速发现。）

在评估开始之前首先要做的是从所涉及的`Vec`对象中“提取”值并初始化参数堆栈。这对于周围没有不同类型的对象是必要的：可索引的向量和不可索引的结果。这就是 `Extractor`它的用途。又是一件好事：使用了可变参数模板，在这种情况下不会产生运行时开销（所有这些都是在编译时完成的）。

整个事情都有效。表达式得到了很好的评估（我还添加了附加项，但为了适合代码，这里省略了）。您可以在下面看到汇编器输出。只是原始计算，完全符合您的要求：与 ET 技术相当。

结果。C++11 的新语言特性提供了可变参数模板（连同模板元编程），开辟了编译时计算的领域。我在这里展示了如何使用可变参数模板的好处来生成与传统 ET 技术一样好的代码。

```
#include<algorithm>
#include<iostream>
#include<vector>
#include<tuple>
#include<utility>
#include<array>

template<typename Target,typename Tuple, int N, bool end>
struct Extractor {
  template < typename ... Args >
  static Target index(int i,const Tuple& t, Args && ... args)
  {
    return Extractor<Target, Tuple,  N+1, 
             std::tuple_size<Tuple>::value == N+1>::
      index(i, t , std::forward<Args>(args)..., std::get<N>(t).vec[i] );
  }
};

template < typename Target, typename Tuple, int N >
struct Extractor<Target,Tuple,N,true>
{
    template < typename ... Args >
    static Target index(int i,Tuple const& t, 
            Args && ... args) { 
      return Target(std::forward<Args>(args)...); }
};

template < typename ... Vs > 
std::tuple<typename std::remove_reference<Vs>::type::type_t...>
extract(int i , const std::tuple<Vs...>& tpl)
{
  return Extractor<std::tuple<typename std::remove_reference<Vs>::type::type_t...>,
           std::tuple<Vs...>, 0,
           std::tuple_size<std::tuple<Vs...> >::value == 0>::index(i,tpl);
}

struct Vec {
  std::array<int,5> vec;
  typedef int type_t;

  template<typename... OPs,typename... VALs>
  Vec& operator=(const std::pair< std::tuple<VALs...> , std::tuple<OPs...> >& e) {
    for( int i = 0 ; i < vec.size() ; ++i ) {
      vec[i] = eval( extract(i,e.first) , e.second );
    }
  }
};

template<int OpPos,int ValPos, bool end>
struct StackMachine {
  template<typename... OPs,typename... VALs>
  static void eval_pos( std::tuple<VALs...>& vals , const std::tuple<OPs...> & ops )
  {
    std::get<ValPos+1>( vals ) =
      std::get<OpPos>(ops).apply( std::get<ValPos>( vals ) , 
                  std::get<ValPos+1>( vals ) );
    StackMachine<OpPos+1,ValPos+1,sizeof...(OPs) == OpPos+1>::eval_pos(vals,ops);
  }
};

template<int OpPos,int ValPos>
struct StackMachine<OpPos,ValPos,true> {
  template<typename... OPs,typename... VALs>
  static void eval_pos( std::tuple<VALs...>& vals , 
            const std::tuple<OPs...> & ops )
  {}
};

template<typename... OPs,typename... VALs>
int eval( const std::tuple<VALs...>& vals , const std::tuple<OPs...> & ops )
{
  StackMachine<0,0,false>::eval_pos(const_cast<std::tuple<VALs...>&>(vals),ops);
  return std::get<sizeof...(OPs)>(vals);
}

struct OpMul {
  static int apply(const int& lhs,const int& rhs)  {
    return lhs*rhs;
  }
};

std::pair< std::tuple< const Vec&, const Vec& > , std::tuple<OpMul> >
operator*(const Vec& lhs,const Vec& rhs)
{
  return std::make_pair( std::tuple< const Vec&, const Vec& >( lhs , rhs ) , 
             std::tuple<OpMul>( OpMul() ) );
}

template<typename... OPs,typename... VALs>
std::pair< std::tuple< const Vec&, VALs... > , std::tuple<OPs...,OpMul> >
operator*(const Vec& lhs,const std::pair< std::tuple< VALs... > , std::tuple<OPs...> >& rhs)
{
  return std::make_pair( std::tuple_cat( rhs.first , std::tuple< const Vec& >(lhs)  ) , 
             std::tuple_cat( rhs.second , std::tuple<OpMul>( OpMul() )  ) );
}

template<typename... OPs,typename... VALs>
std::pair< std::tuple< const Vec&, VALs... > , std::tuple<OPs...,OpMul> >
operator*(const std::pair< std::tuple< VALs... > , std::tuple<OPs...> >& lhs,
      const Vec& rhs)
{
  return std::make_pair( std::tuple_cat( lhs.first , std::tuple< const Vec& >(rhs)  ) , 
             std::tuple_cat( lhs.second , std::tuple<OpMul>( OpMul() ) ) );
}

int main()
{
  Vec d,c,b,a;

  for( int i = 0 ; i < d.vec.size() ; ++i ) {
    a.vec[i] = 10+i;
    b.vec[i] = 20+i;
    c.vec[i] = 30+i;
    d.vec[i] = 0;
  }

  d = a * b * c * a;

  for( int i = 0 ; i < d.vec.size() ; ++i ) 
    std::cout << d.vec[i] << std::endl;
} 
```

生成的汇编器`g++-4.6 -O3`（我不得不在向量初始化中加入一些运行时依赖，这样编译器就不会在编译时计算整个事情，你实际上会看到`imull`instaructions。）

```
imull   %esi, %edx
imull   32(%rsp), %edx
imull   %edx, %esi
movl    68(%rsp), %edx
imull   %ecx, %edx
movl    %esi, (%rsp)
imull   36(%rsp), %edx
imull   %ecx, %edx
movl    104(%rsp), %ecx
movl    %edx, 4(%rsp)
movl    72(%rsp), %edx
imull   %ecx, %edx
imull   40(%rsp), %edx
imull   %ecx, %edx
movl    108(%rsp), %ecx
movl    %edx, 8(%rsp)
movl    76(%rsp), %edx
imull   %ecx, %edx
imull   44(%rsp), %edx
imull   %ecx, %edx
movl    112(%rsp), %ecx
movl    %edx, 12(%rsp)
movl    80(%rsp), %edx
imull   %ecx, %edx
imull   %eax, %edx
imull   %ecx, %edx
movl    %edx, 16(%rsp) 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-04T22:33:17.070

> 我想知道 lambda 与移动语义或任何其他新功能是否可以与 ET 一样好。有什么想法吗？

**快速回答**

移动语义本身并不是万能的——在 C++11 中仍然需要诸如表达式模板 (ET) 之类的技术来消除诸如移动数据之类的开销！因此，在深入了解我的其余答案之前快速回答您的问题，移动语义等并不能完全取代 ET，如下所示。

**详细解答**

ET 通常会返回代理对象以将评估推迟到以后进行，因此在触发计算的代码之前，C++11 语言功能不会立即产生明显的好处。也就是说，人们不想编写 ET 代码，但是会在使用代理构建表达式树期间触发运行时代码生成。很好，C++11 的移动语义和完美转发可以帮助避免这种开销，否则会发生这种情况。（这在 C++03 中是不可能的。）

本质上，在编写 ET 时，人们希望在调用所涉及的代理对象的成员函数后，以一种生成最佳代码的方式利用语言特性。在 C++11 中，这将包括使用完美转发、移动语义而不是复制等，如果在编译器已经可以做的事情之外仍然需要这些。游戏的名称是最小化生成的运行时代码和/或最大化运行时速度和/或最小化运行时开销。

我想实际尝试一些具有 C++11 特性的 ET，看看我是否可以用`a = b + c + d;`表达式省略所有中间临时实例类型。（因为这只是我正常活动的一个有趣的休息，所以我没有将它与纯粹使用 C++03 进行比较或编写 ET 代码。我也不担心下面出现的代码抛光的所有方面。）

首先，我没有使用 lambdas——因为我更喜欢使用显式类型和函数——所以我不会就你的问题争论/反对 lambdas。我的猜测是，它们类似于使用仿函数并且性能不会比下面的非 ET 代码更好（即，需要移动）——至少在编译器可以使用他们自己的内部 ET 自动优化 lambda 之前。然而，我编写的代码利用了移动语义和完美转发。这是我从结果开始然后最终呈现代码所做的事情。

我创建了一个`math_vector<N>`类，`N==3`它定义了一个内部私有实例`std::array<long double, N>`。成员是默认构造函数、复制和移动构造函数和赋值、初始化列表构造函数、析构函数、swap() 成员、用于访问向量元素的运算符 [] 和运算符 +=。在没有任何表达式模板的情况下使用，此代码：

```
{
  cout << "CASE 1:\n";
  math_vector<3> a{1.0, 1.1, 1.2};
  math_vector<3> b{2.0, 2.1, 2.2};
  math_vector<3> c{3.0, 3.1, 3.2};
  math_vector<3> d{4.0, 4.1, 4.2};
  math_vector<3> result = a + b + c + d;
  cout << '[' << &result << "]: " << result << "\n";
} 
```

`clang++`输出（使用3.1 或`g++`4.8编译时- `std=c++11 -O3`）：

```
CASE 1:
0x7fff8d6edf50: math_vector(initlist)
0x7fff8d6edef0: math_vector(initlist)
0x7fff8d6ede90: math_vector(initlist)
0x7fff8d6ede30: math_vector(initlist)
0x7fff8d6edd70: math_vector(copy: 0x7fff8d6edf50)
0x7fff8d6edda0: math_vector(move: 0x7fff8d6edd70)
0x7fff8d6eddd0: math_vector(move: 0x7fff8d6edda0)
0x7fff8d6edda0: ~math_vector()
0x7fff8d6edd70: ~math_vector()
[0x7fff8d6eddd0]: (10,10.4,10.8)
0x7fff8d6eddd0: ~math_vector()
0x7fff8d6ede30: ~math_vector()
0x7fff8d6ede90: ~math_vector()
0x7fff8d6edef0: ~math_vector()
0x7fff8d6edf50: ~math_vector() 
```

即，四个显式构造的实例使用初始化列表（即`initlist`项目）、`result`变量（即`0x7fff8d6eddd0`），并且还使另外三个对象复制和移动。

为了只关注临时和移动，我创建了第二种情况，它只创建`result`为命名变量——所有其他都是右值：

```
{
  cout << "CASE 2:\n";
  math_vector<3> result =
    math_vector<3>{1.0, 1.1, 1.2} +
    math_vector<3>{2.0, 2.1, 2.2} +
    math_vector<3>{3.0, 3.1, 3.2} +
    math_vector<3>{4.0, 4.1, 4.2}
  ;
  cout << '[' << &result << "]: " << result << "\n";
} 
```

它输出这个（再次在不使用 ET 时）：

```
CASE 2:
0x7fff8d6edcb0: math_vector(initlist)
0x7fff8d6edc50: math_vector(initlist)
0x7fff8d6edce0: math_vector(move: 0x7fff8d6edcb0)
0x7fff8d6edbf0: math_vector(initlist)
0x7fff8d6edd10: math_vector(move: 0x7fff8d6edce0)
0x7fff8d6edb90: math_vector(initlist)
0x7fff8d6edd40: math_vector(move: 0x7fff8d6edd10)
0x7fff8d6edb90: ~math_vector()
0x7fff8d6edd10: ~math_vector()
0x7fff8d6edbf0: ~math_vector()
0x7fff8d6edce0: ~math_vector()
0x7fff8d6edc50: ~math_vector()
0x7fff8d6edcb0: ~math_vector()
[0x7fff8d6edd40]: (10,10.4,10.8)
0x7fff8d6edd40: ~math_vector() 
```

哪个更好：只创建额外的移动对象。

但我想要更好：我想要零个额外的临时变量，并且让代码就像我用一个正常的编码警告硬编码一样：仍然会创建所有显式实例化的类型（即四个`initlist`构造函数和`result`）。为此，我添加了表达式模板代码，如下所示：

1.  创建了一个代理`math_vector_expr<LeftExpr,BinaryOp,RightExpr>`类来保存尚未计算的表达式，
2.  创建了一个代理`plus_op`类来保存加法操作，
3.  添加了一个构造函数`math_vector`来接受一个`math_vector_expr`对象，并且，
4.  添加了“starter”成员函数来触发表达式模板的创建。

使用 ET 的结果非常好：在任何一种情况下都没有额外的临时性！上面的前两种情况现在输出：

```
CASE 1:
0x7fffe7180c60: math_vector(initlist)
0x7fffe7180c90: math_vector(initlist)
0x7fffe7180cc0: math_vector(initlist)
0x7fffe7180cf0: math_vector(initlist)
0x7fffe7180d20: math_vector(expr: 0x7fffe7180d90)
[0x7fffe7180d20]: (10,10.4,10.8)
0x7fffe7180d20: ~math_vector()
0x7fffe7180cf0: ~math_vector()
0x7fffe7180cc0: ~math_vector()
0x7fffe7180c90: ~math_vector()
0x7fffe7180c60: ~math_vector()

CASE 2:
0x7fffe7180dd0: math_vector(initlist)
0x7fffe7180e20: math_vector(initlist)
0x7fffe7180e70: math_vector(initlist)
0x7fffe7180eb0: math_vector(initlist)
0x7fffe7180d20: math_vector(expr: 0x7fffe7180dc0)
0x7fffe7180eb0: ~math_vector()
0x7fffe7180e70: ~math_vector()
0x7fffe7180e20: ~math_vector()
0x7fffe7180dd0: ~math_vector()
[0x7fffe7180d20]: (10,10.4,10.8)
0x7fffe7180d20: ~math_vector() 
```

即，每种情况下恰好有 5 个构造函数调用和 5 个析构函数调用。事实上，如果你让编译器在 4 个`initlist`构造函数调用之间生成汇编代码，并且`result`其中一个的输出得到这个漂亮的汇编代码字符串：

```
fldt    128(%rsp)
leaq    128(%rsp), %rdi
leaq    80(%rsp), %rbp
fldt    176(%rsp)
faddp   %st, %st(1)
fldt    224(%rsp)
faddp   %st, %st(1)
fldt    272(%rsp)
faddp   %st, %st(1)
fstpt   80(%rsp)
fldt    144(%rsp)
fldt    192(%rsp)
faddp   %st, %st(1)
fldt    240(%rsp)
faddp   %st, %st(1)
fldt    288(%rsp)
faddp   %st, %st(1)
fstpt   96(%rsp)
fldt    160(%rsp)
fldt    208(%rsp)
faddp   %st, %st(1)
fldt    256(%rsp)
faddp   %st, %st(1)
fldt    304(%rsp)
faddp   %st, %st(1)
fstpt   112(%rsp) 
```

和输出相似（甚至更小）的代码`g++`。`clang++`没有函数调用等——只是一堆添加，这正是人们想要的！

实现此目的的 C++11 代码如下。只是`#define DONT_USE_EXPR_TEMPL`不使用 ET 或根本不定义它以使用 ET。

```
#include <array>
#include <algorithm>
#include <initializer_list>
#include <type_traits>
#include <iostream>

//#define DONT_USE_EXPR_TEMPL

//===========================================================================

template <std::size_t N> class math_vector;

template <
  typename LeftExpr,
  typename BinaryOp,
  typename RightExpr
>
class math_vector_expr
{
  public:
    math_vector_expr() = delete;

    math_vector_expr(LeftExpr l, RightExpr r) : 
      l_(std::forward<LeftExpr>(l)), 
      r_(std::forward<RightExpr>(r))
    {
    }

    // Prohibit copying...
    math_vector_expr(math_vector_expr const&) = delete;
    math_vector_expr& operator =(math_vector_expr const&) = delete;

    // Allow moves...
    math_vector_expr(math_vector_expr&&) = default;
    math_vector_expr& operator =(math_vector_expr&&) = default;

    template <typename RE>
    auto operator +(RE&& re) const ->
      math_vector_expr<
        math_vector_expr<LeftExpr,BinaryOp,RightExpr> const&,
        BinaryOp,
        decltype(std::forward<RE>(re))
      >
    {
      return 
        math_vector_expr<
          math_vector_expr<LeftExpr,BinaryOp,RightExpr> const&,
          BinaryOp,
          decltype(std::forward<RE>(re))
        >(*this, std::forward<RE>(re))
      ;
    }

    auto le() -> 
      typename std::add_lvalue_reference<LeftExpr>::type
      { return l_; }

    auto le() const ->
      typename std::add_lvalue_reference<
        typename std::add_const<LeftExpr>::type
      >::type
      { return l_; }

    auto re() -> 
      typename std::add_lvalue_reference<RightExpr>::type
      { return r_; }

    auto re() const -> 
      typename std::add_lvalue_reference<
        typename std::add_const<RightExpr>::type
      >::type
      { return r_; }

    auto operator [](std::size_t index) const ->
      decltype(
        BinaryOp::apply(this->le()[index], this->re()[index])
      )
    {
      return BinaryOp::apply(le()[index], re()[index]);
    }

  private:
    LeftExpr l_;
    RightExpr r_;
};

//===========================================================================

template <typename T>
struct plus_op
{
  static T apply(T const& a, T const& b)
  {
    return a + b;
  }

  static T apply(T&& a, T const& b)
  {
    a += b;
    return std::move(a);
  }

  static T apply(T const& a, T&& b)
  {
    b += a;
    return std::move(b);
  }

  static T apply(T&& a, T&& b)
  {
    a += b;
    return std::move(a);
  }
};

//===========================================================================

template <std::size_t N>
class math_vector
{
  using impl_type = std::array<long double, N>;

  public:
    math_vector()
    {
      using namespace std;
      fill(begin(v_), end(v_), impl_type{});
      std::cout << this << ": math_vector()" << endl;
    }

    math_vector(math_vector const& mv) noexcept
    {
      using namespace std;
      copy(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector(copy: " << &mv << ")" << endl;
    }

    math_vector(math_vector&& mv) noexcept
    {
      using namespace std;
      move(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector(move: " << &mv << ")" << endl;
    }

    math_vector(std::initializer_list<typename impl_type::value_type> l)
    {
      using namespace std;
      copy(begin(l), end(l), begin(v_));
      std::cout << this << ": math_vector(initlist)" << endl;
    }

    math_vector& operator =(math_vector const& mv) noexcept
    {
      using namespace std;
      copy(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector op =(copy: " << &mv << ")" << endl;
      return *this;
    }

    math_vector& operator =(math_vector&& mv) noexcept
    {
      using namespace std;
      move(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector op =(move: " << &mv << ")" << endl;
      return *this;
    }

    ~math_vector()
    {
      using namespace std;
      std::cout << this << ": ~math_vector()" << endl;
    }

    void swap(math_vector& mv)
    {
      using namespace std;
      for (std::size_t i = 0; i<N; ++i)
        swap(v_[i], mv[i]);
    }

    auto operator [](std::size_t index) const
      -> typename impl_type::value_type const&
    {
      return v_[index];
    }

    auto operator [](std::size_t index)
      -> typename impl_type::value_type&
    {
      return v_[index];
    }

    math_vector& operator +=(math_vector const& b)
    {
      for (std::size_t i = 0; i<N; ++i)
        v_[i] += b[i];
      return *this;
    }

  #ifndef DONT_USE_EXPR_TEMPL

    template <typename LE, typename Op, typename RE>
    math_vector(math_vector_expr<LE,Op,RE>&& mve)
    {
      for (std::size_t i = 0; i < N; ++i)
        v_[i] = mve[i];
      std::cout << this << ": math_vector(expr: " << &mve << ")" << std::endl;
    }

    template <typename RightExpr>
    math_vector& operator =(RightExpr&& re)
    {
      for (std::size_t i = 0; i<N; ++i)
        v_[i] = re[i];
      return *this;
    }

    template <typename RightExpr>
    math_vector& operator +=(RightExpr&& re)
    {
      for (std::size_t i = 0; i<N; ++i)
        v_[i] += re[i];
      return *this;
    }

    template <typename RightExpr>
    auto operator +(RightExpr&& re) const ->
      math_vector_expr<
        math_vector const&, 
        plus_op<typename impl_type::value_type>,
        decltype(std::forward<RightExpr>(re))
      >
    {
      return 
        math_vector_expr<
          math_vector const&, 
          plus_op<typename impl_type::value_type>, 
          decltype(std::forward<RightExpr>(re))
        >(
          *this, 
          std::forward<RightExpr>(re)
        )
      ;
    }

  #endif // #ifndef DONT_USE_EXPR_TEMPL

  private:
    impl_type v_;
};

//===========================================================================

template <std::size_t N>
inline void swap(math_vector<N>& a, math_vector<N>& b)
{
  a.swap(b);
}

//===========================================================================

#ifdef DONT_USE_EXPR_TEMPL

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N> const& a, 
  math_vector<N> const& b
)
{
  math_vector<N> retval(a);
  retval += b;
  return retval;
}

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N>&& a, 
  math_vector<N> const& b
)
{
  a += b;
  return std::move(a);
}

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N> const& a, 
  math_vector<N>&& b
)
{
  b += a;
  return std::move(b);
}

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N>&& a, 
  math_vector<N>&& b
)
{
  a += std::move(b);
  return std::move(a);
}

#endif // #ifdef DONT_USE_EXPR_TEMPL

//===========================================================================

template <std::size_t N>
std::ostream& operator <<(std::ostream& os, math_vector<N> const& mv)
{
  os << '(';
  for (std::size_t i = 0; i < N; ++i)
    os << mv[i] << ((i+1 != N) ? ',' : ')');
  return os;
}

//===========================================================================

int main()
{
  using namespace std;

  try
  {
    {
      cout << "CASE 1:\n";
      math_vector<3> a{1.0, 1.1, 1.2};
      math_vector<3> b{2.0, 2.1, 2.2};
      math_vector<3> c{3.0, 3.1, 3.2};
      math_vector<3> d{4.0, 4.1, 4.2};
      math_vector<3> result = a + b + c + d;
      cout << '[' << &result << "]: " << result << "\n";
    }
    cout << endl;
    {
      cout << "CASE 2:\n";
      math_vector<3> result =
        math_vector<3>{1.0, 1.1, 1.2} +
        math_vector<3>{2.0, 2.1, 2.2} +
        math_vector<3>{3.0, 3.1, 3.2} +
        math_vector<3>{4.0, 4.1, 4.2}
      ;
      cout << '[' << &result << "]: " << result << "\n";
    }
  }
  catch (...)
  {
    return 1;
  }
}

//=========================================================================== 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-18T10:13:14.233

这是 Paul Preney 代码的更正版本。我已通过电子邮件和评论通知作者；我写了一个编辑，但是被不合格的审稿人拒绝了。

原代码中的错误是 math_vector_expr::operator+ 的 BinaryOp 模板参数是固定的。

```
#include <array>
#include <algorithm>
#include <initializer_list>
#include <type_traits>
#include <iostream>

//#define DONT_USE_EXPR_TEMPL

//===========================================================================

template <std::size_t N> class math_vector;
template <typename T> struct plus_op;

template <
  typename LeftExpr,
  typename BinaryOp,
  typename RightExpr
>
class math_vector_expr
{
  public:
    typedef typename std::remove_reference<LeftExpr>::type::value_type value_type;

    math_vector_expr() = delete;

    math_vector_expr(LeftExpr l, RightExpr r) :
      l_(std::forward<LeftExpr>(l)),
      r_(std::forward<RightExpr>(r))
    {
    }

    // Prohibit copying...
    math_vector_expr(math_vector_expr const&) = delete;
    math_vector_expr& operator =(math_vector_expr const&) = delete;

    // Allow moves...
    math_vector_expr(math_vector_expr&&) = default;
    math_vector_expr& operator =(math_vector_expr&&) = default;

    template <typename RE>
    auto operator +(RE&& re) const ->
      math_vector_expr<
        math_vector_expr<LeftExpr,BinaryOp,RightExpr> const&,
        plus_op<value_type>,
        decltype(std::forward<RE>(re))
      >
    {
      return
        math_vector_expr<
          math_vector_expr<LeftExpr,BinaryOp,RightExpr> const&,
          plus_op<value_type>,
          decltype(std::forward<RE>(re))
        >(*this, std::forward<RE>(re))
      ;
    }

    auto le() ->
      typename std::add_lvalue_reference<LeftExpr>::type
      { return l_; }

    auto le() const ->
      typename std::add_lvalue_reference<
        typename std::add_const<LeftExpr>::type
      >::type
      { return l_; }

    auto re() ->
      typename std::add_lvalue_reference<RightExpr>::type
      { return r_; }

    auto re() const ->
      typename std::add_lvalue_reference<
        typename std::add_const<RightExpr>::type
      >::type
      { return r_; }

    auto operator [](std::size_t index) const ->
      value_type
    {
      return BinaryOp::apply(le()[index], re()[index]);
    }

  private:
    LeftExpr l_;
    RightExpr r_;
};

//===========================================================================

template <typename T>
struct plus_op
{
  static T apply(T const& a, T const& b)
  {
    return a + b;
  }

  static T apply(T&& a, T const& b)
  {
    a += b;
    return std::move(a);
  }

  static T apply(T const& a, T&& b)
  {
    b += a;
    return std::move(b);
  }

  static T apply(T&& a, T&& b)
  {
    a += b;
    return std::move(a);
  }
};

//===========================================================================

template <std::size_t N>
class math_vector
{
  using impl_type = std::array<long double, N>;

  public:
    typedef typename impl_type::value_type value_type;

    math_vector()
    {
      using namespace std;
      fill(begin(v_), end(v_), impl_type{});
      std::cout << this << ": math_vector()" << endl;
    }

    math_vector(math_vector const& mv) noexcept
    {
      using namespace std;
      copy(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector(copy: " << &mv << ")" << endl;
    }

    math_vector(math_vector&& mv) noexcept
    {
      using namespace std;
      move(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector(move: " << &mv << ")" << endl;
    }

    math_vector(std::initializer_list<value_type> l)
    {
      using namespace std;
      copy(begin(l), end(l), begin(v_));
      std::cout << this << ": math_vector(initlist)" << endl;
    }

    math_vector& operator =(math_vector const& mv) noexcept
    {
      using namespace std;
      copy(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector op =(copy: " << &mv << ")" << endl;
      return *this;
    }

    math_vector& operator =(math_vector&& mv) noexcept
    {
      using namespace std;
      move(begin(mv.v_), end(mv.v_), begin(v_));
      std::cout << this << ": math_vector op =(move: " << &mv << ")" << endl;
      return *this;
    }

    ~math_vector()
    {
      using namespace std;
      std::cout << this << ": ~math_vector()" << endl;
    }

    void swap(math_vector& mv)
    {
      using namespace std;
      for (std::size_t i = 0; i<N; ++i)
        swap(v_[i], mv[i]);
    }

    auto operator [](std::size_t index) const
      -> value_type const&
    {
      return v_[index];
    }

    auto operator [](std::size_t index)
      -> value_type&
    {
      return v_[index];
    }

    math_vector& operator +=(math_vector const& b)
    {
      for (std::size_t i = 0; i<N; ++i)
        v_[i] += b[i];
      return *this;
    }

  #ifndef DONT_USE_EXPR_TEMPL

    template <typename LE, typename Op, typename RE>
    math_vector(math_vector_expr<LE,Op,RE>&& mve)
    {
      for (std::size_t i = 0; i < N; ++i)
        v_[i] = mve[i];
      std::cout << this << ": math_vector(expr: " << &mve << ")" << std::endl;
    }

    template <typename RightExpr>
    math_vector& operator =(RightExpr&& re)
    {
      for (std::size_t i = 0; i<N; ++i)
        v_[i] = re[i];
      return *this;
    }

    template <typename RightExpr>
    math_vector& operator +=(RightExpr&& re)
    {
      for (std::size_t i = 0; i<N; ++i)
        v_[i] += re[i];
      return *this;
    }

    template <typename RightExpr>
    auto operator +(RightExpr&& re) const ->
      math_vector_expr<
        math_vector const&,
        plus_op<value_type>,
        decltype(std::forward<RightExpr>(re))
      >
    {
      return
        math_vector_expr<
          math_vector const&,
          plus_op<value_type>,
          decltype(std::forward<RightExpr>(re))
        >(
          *this,
          std::forward<RightExpr>(re)
        )
      ;
    }

  #endif // #ifndef DONT_USE_EXPR_TEMPL

  private:
    impl_type v_;
};

//===========================================================================

template <std::size_t N>
inline void swap(math_vector<N>& a, math_vector<N>& b)
{
  a.swap(b);
}

//===========================================================================

#ifdef DONT_USE_EXPR_TEMPL

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N> const& a,
  math_vector<N> const& b
)
{
  math_vector<N> retval(a);
  retval += b;
  return retval;
}

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N>&& a,
  math_vector<N> const& b
)
{
  a += b;
  return std::move(a);
}

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N> const& a,
  math_vector<N>&& b
)
{
  b += a;
  return std::move(b);
}

template <std::size_t N>
inline math_vector<N> operator +(
  math_vector<N>&& a,
  math_vector<N>&& b
)
{
  a += std::move(b);
  return std::move(a);
}

#endif // #ifdef DONT_USE_EXPR_TEMPL

//===========================================================================

template <std::size_t N>
std::ostream& operator <<(std::ostream& os, math_vector<N> const& mv)
{
  os << '(';
  for (std::size_t i = 0; i < N; ++i)
    os << mv[i] << ((i+1 != N) ? ',' : ')');
  return os;
}

//===========================================================================

int main()
{
  using namespace std;

  try
  {
    {
      cout << "CASE 1:\n";
      math_vector<3> a{1.0, 1.1, 1.2};
      math_vector<3> b{2.0, 2.1, 2.2};
      math_vector<3> c{3.0, 3.1, 3.2};
      math_vector<3> d{4.0, 4.1, 4.2};
      math_vector<3> result = a + b + c + d;
      cout << '[' << &result << "]: " << result << "\n";
    }
    cout << endl;
    {
      cout << "CASE 2:\n";
      math_vector<3> result =
        math_vector<3>{1.0, 1.1, 1.2} +
        math_vector<3>{2.0, 2.1, 2.2} +
        math_vector<3>{3.0, 3.1, 3.2} +
        math_vector<3>{4.0, 4.1, 4.2}
      ;
      cout << '[' << &result << "]: " << result << "\n";
    }
  }
  catch (...)
  {
    return 1;
  }
}

//=========================================================================== 
```

# perl - 在文件中发送音频时，Google Speech API 不给出正确的结果

> ID：11809056
> 
> 赞同：1
> 
> 时间：2012-08-04T13:32:50.953
> 
> 标签：perl, audio, ffmpeg, google-apps

我偶然发现了[Google Speech API](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/comment-page-3/#comment-2527)上的文章，它提出了一种通过 Perl 从音频文件中提取文本的机制。现在我已经录制了一个音频文件，您可以在[http://vocaroo.com/i/s0lPN5d3YQJj](http://vocaroo.com/i/s0lPN5d3YQJj)找到它。这是一段简单的音频，阅读**我爱你**。当我在 Chrome 中访问 Google 语音 API 并说出这些话时，我得到了正确的结果。当我在上述链接中尝试使用我指出的音频文件的代码时，它会返回奇怪的结果，例如**logan**。我怎样才能使它更准确？这只是一个示例音频，我通常做的是通过 FFMpeg 使用类似的东西从视频文件中提取音频`ffmpeg -i input.avi -vn -ar 44100 -ac 2 -ab 192 -f mp3 output.mp3`，然后是`ffmpeg -i input.mp3 output.flac`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:16:35.793

您是否尝试过播放您正在创建的音频文件？

您正在设置 192 位/秒的音频比特率，这非常低。

对于 192Kbps，您需要`-ab 196608`.

# facebook - 请求对话框改进

> ID：11809062
> 
> 赞同：1
> 
> 时间：2012-08-04T13:33:12.830
> 
> 标签：facebook

我想改进我的请求对话框多重选择器。

这是我的应用程序的实际对话请求：

![在此处输入图像描述](../Images/a8f933a10f331ad79c829ff90959ecb6.png)

但我在这里看到了其他人的请求对话框：

![在此处输入图像描述](../Images/1e7c143e3e2a389fb284c2b9a3960683.png)此请求对话框自动选择 50 个朋友。

我该怎么做？

这是我的实际对话代码：

```
<script>
  FB.init({
    appId  : '290349771061160',
    frictionlessRequests: true,
  });

  function sendRequestToRecipients() {
    var user_ids = document.getElementsByName("user_ids")[0].value;
    FB.ui({method: 'apprequests',
      message: 'SELEZIONA 25 AMICI',
      to: user_ids, 
    }, requestCallback);
  }

  function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
      message: 'SELEZIONA 25 AMICI'
    }, requestCallback);
  }

  function requestCallback(response) {
    // Handle callback here
  }

  function requestCallback(response) {

    if((response != null) &&(response != false))
    {
      alert('ADESSO CLICCA IN ALTO A DESTRA SU MI PIACE');
    }
    // Handle callback here
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:43:23.307

[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)`to`允许您通过在字段中指定逗号分隔的朋友 ID 来指定要将请求发送给哪些朋友（请参阅[直接请求](https://developers.facebook.com/docs/reference/dialogs/requests/#direct_request)）（这正是您在第二张图片中看到的内容）。

第一个和第二个之间的唯一区别是`to`第一个为空而第二个为填充的参数。

# c - 多维数组

> ID：11809063
> 
> 赞同：2
> 
> 时间：2012-08-04T13:33:35.833
> 
> 标签：c

```
#include <stdio.h>

int multi[2][3] = {{17, 23, 19}, {72, 34, 44}};

int main()
{
    printf("%p\n", multi);    //line 1
    printf("%p\n", *multi);   //line 2

    if(*multi == multi)
        puts("They are equal!");

    return 0;
} 
```

第 1 行和第 2 行有何不同？

我得到输出：

```
They are equal 
```

也有人可以参考一个关于指针及其与多维数组一起使用的好教程......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:35:51.560

值相同，但类型不同。

`multi`是类型`int [2][3]`，并且在评估时将其转换为类型`int (*)[3]`

`*multi`是 type`int [3]`并且在评估时它是 type `int *`。

实际上：

```
*multi == multi 
```

被编译器接受，但表达式在 C 中无效，因为运算符的两个操作数`==`属于不同类型。要执行比较，您需要转换两个操作数之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T14:12:51.350

当你编译你的代码时，你的答案是由 gcc 给出的：

```
ml.c:10: warning: comparison of distinct pointer types lacks a cast 
```

`multi`是一种二维`int`数组。那是`int[][]`

where`*multi`是一维`int`数组的类型。那是`int[]`

这就是为什么它们不是同一个对象。一个必须被铸造才有资格进行比较。让我们看看这个**错误**的代码是如何在幕后工作的。

令人惊讶的是，根本没有任何`cmp`指令！（用 编译`-g -O0`）。其实这里不需要`cmp`。因为`multi`将衰减为指向`&multi[0][0]`. 并且`*multi`会腐烂到`&multi[0]`. 因此，从内存的角度来看，它们是相同的，并且 c 编译器会愉快地优化它们（即使使用`-O0`:)）。

```
(gdb) disassemble 
Dump of assembler code for function main:
   0x0000000000400504 <+0>: push   rbp
   0x0000000000400505 <+1>: mov    rbp,rsp
=> 0x0000000000400508 <+4>: mov    eax,0x400648
   0x000000000040050d <+9>: mov    esi,0x600900
   0x0000000000400512 <+14>:    mov    rdi,rax
   0x0000000000400515 <+17>:    mov    eax,0x0
   0x000000000040051a <+22>:    call   0x4003f0 <printf@plt>
   0x000000000040051f <+27>:    mov    edx,0x600900
   0x0000000000400524 <+32>:    mov    eax,0x400648
   0x0000000000400529 <+37>:    mov    rsi,rdx
   0x000000000040052c <+40>:    mov    rdi,rax
   0x000000000040052f <+43>:    mov    eax,0x0
   0x0000000000400534 <+48>:    call   0x4003f0 <printf@plt>
   0x0000000000400539 <+53>:    mov    edi,0x40064c
   0x000000000040053e <+58>:    call   0x400400 <puts@plt>
   0x0000000000400543 <+63>:    mov    eax,0x0
   0x0000000000400548 <+68>:    leave  
   0x0000000000400549 <+69>:    ret 
```

它在调用之前唯一要做的`puts()`就是将它应该打印的字符串的地址移动到参数寄存器中。

```
gdb) x/10cb 0x40064c
0x40064c <__dso_handle+12>: 84 'T'  104 'h' 101 'e' 121 'y' 32 ' '  97 'a'  114 'r' 101 'e'
0x400654 <__dso_handle+20>: 32 ' '  101 'e' 
```

你去吧，你把编译器弄糊涂了:)它通过优化去除了`cmp`可能。`always true`:)

专家 C 编程有一章名为（惊喜！惊喜！）

> 第 4 章令人震惊的真相：C 数组和指针不一样！

强烈推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:26:08.167

In brief in C a matrix is stored as a series of consecutive arrays wich are the rows of the matrix :

m has type pointer to array of 3 ints and is the address of the first array / row of the matrix

m* has type pointer to int and is the address of the first element of the first row

the same apply to m+1 wich is the address of the second array and for *( m + 1 ) wich is the address of the first element of the second array/row.

hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T14:05:05.023

当您使用 -Wall 进行编译时，编译器会警告您该行（原因：）`comparison of distinct pointer types`：

如果（*多==多）

`multi`是数组，在 C 中他的地址是他的第一个元素 aka 的地址`multi[0]`。 `*multi`是指向数组的第一个元素的指针，也就是 multi[0]。

您正在比较两个包含相同数据的地址：( `{17, 23, 19}`)，这解释了为什么会得到此输出。

希望这有帮助。

问候。

# c# - SQL VS 前端处理

> ID：11809073
> 
> 赞同：1
> 
> 时间：2012-08-04T13:35:31.280
> 
> 标签：c#, sql, performance

最近我在做一个使用 JSON 的项目，我有两种方法可以从数据库中获取数据，以方便我的 JavaScript 使用 Json 字符串，

**第一的**

就是在数据库中做处理形成一个Json字符串，像这样

```
select   
       ID,
    '{ "Comments": ['+
    Substring(
        (SELECT 
           ',{ '+
           '"Comment" : "' + REPLACE(Comments,'"','\"') + '",'+
           '"Name" : "' + REPLACE(Name,'"','\"') +
         '}'
    FROM    JsonTbl
    where   JsonTbl.ID = tbl.ID
    for xml path('')
    ),2,250000)
      +'] }' as JsonData
from tbl 
```

**第二**

就是从数据库中选择数据不做任何处理，在前端做一个Json字符串创建的处理，像这样

```
DataTable data = GetDataFromDatabase();
StringBuilder sb = new StringBuilder();
sb.Append("{ \"Comments\": [");
for (int i = 0; i < data.Rows.Count; i++)
{
    sb.Append("{");
    sb.Append("\"Comment\" : \"" + data.Rows[i]["Comment"].ToString().Replace('"', '\"') + "\",");
    sb.Append("\"Name\" : \"" + data.Rows[i]["Comment"].ToString().Replace('"', '\"') + "\"");
    sb.Append("},");
}
sb.Remove(sb.Length - 1, 1); 
```

我想知道从性能和维护的角度来看哪一个会更好。

注意：请考虑我已经修剪了代码以在此处发布原始代码比这大得多，并且我使用的是 MSSQL 2008 和 .Net(C#)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:39:00.887

更好的方法是通过 SQL Server 获取数据，在 C# 中基于该数据创建一个对象，并为 JSON 使用 JSON 序列化程序。可能是[JSON.Net](http://json.codeplex.com/)。您可能会遇到使用当前方法维护代码的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:40:22.487

从 SQL 服务器获取“正常”数据，并使用[JSON.net](http://james.newtonking.com/projects/json-net.aspx)等稳定库将其序列化为 json。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:43:20.687

两者都很糟糕。

为您提供数据的外部格式不是数据库的责任。所以第一个是没有的。

在第二个中，您使用字符串连接来构建您的 JSON。那是脆弱的。

一个好的方法是将数据加载到对象中，然后使用 JSON 库将它们序列化为 JSON。

```
DataTable dtable = GetDataFromDatabase();
var data = from row in dtable
           select new { Comment = row["Comment"],
                        Name = row["Name"] };

JavaScriptSerializer serializer = new JavaScriptSerializer();
String json = serializer.Serialize(data); 
```

# jquery - 试图附加一个 HTML 选择菜单

> ID：11809075
> 
> 赞同：0
> 
> 时间：2012-08-04T13:35:44.267
> 
> 标签：jquery, append

我正在尝试通过 jquery 附加一个 HTML 选择菜单，但没有显示任何内容。当我只附加文本框时，这段代码运行良好。当我添加`<select>`菜单时，它停止工作：

```
$(document).ready(function(){

$("#add").click(function(){
$("#pTags").append("
<select>
    <option>Volvo</option>
</select>
<input type='text' placeholder='Class #'><br>

");
});
}); 
```

[JSFIDDLE](http://jsfiddle.net/r72tc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:39:47.363

这有效：

```
var htmlString = "<div>This is a string.</div>"; 
```

这失败了：

```
var htmlSTring = "<div>
  This is a string.
</div>"; 
```

有时这对于可读性是可取的。

添加反斜杠以使其工作：

```
var htmlSTring = "<div>\
  This is a string.\
</div>"; 
```

或加号

```
var htmlSTring = "<div>"+
  "This is a string."+
"</div>"; 
```

或者您还可以查看其他方式并尝试您最喜欢的方式[**这里**](http://jsperf.com/zp-string-concatenation/5)

对于您，请查看此代码段或[**JSFiddle 示例**](http://jsfiddle.net/r72tc/11/)：

```
$(document).ready(function(){
  var opts = [
    'Volvo',
    'Ford',
    'BMW'
  ];

  $("#add").on('click', function(){          
    htmlString = "<select>";
    for (var i in opts) htmlString += "<option>"+opts[i]+"</option>";
    htmlString += "</select><input type='text' placeholder='Class #'><br>";

    $("#pTags").append(htmlString);

  });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:58:19.123

您不能像这样将字符串拆分为多行，在一行上完成所有操作或添加到字符串中，您会没事的：

```
$("#pTags").append("<select><option>Volvo</option></select><input type='text' placeholder='Class #'><br>"); 
```

[小提琴](http://jsfiddle.net/r72tc/4/)

或者 ：

```
var html =  '<select>';
    html += '<option>Volvo</option>';
    html += '</select>';
    html += '<input type="text" placeholder="Class #">';
    html += '<br>';
    html.appendTo("#pTags"); 
```

[小提琴](http://jsfiddle.net/r72tc/9/)

# php - 如何对这段代码的结果进行排序？

> ID：11809077
> 
> 赞同：3
> 
> 时间：2012-08-04T13:35:54.710
> 
> 标签：php, search, sorting

我正在创建一个允许用户输入问题的搜索功能，然后我的代码将与我的 MySQL 数据库中已有的问题匹配尽可能多的单词，并根据匹配的单词数量显示前 5 个结果这个问题。

我使用`count(`) 函数来计算匹配单词的数量，但是目前显示的结果显示为数据库中具有 50% 或更多单词匹配的前 5 个结果。我希望结果首先显示为最高匹配，然后对数据库中的每个结果进行向下处理，但只显示前 5 个。这是我的代码

```
<?php
    include("config.php");
    $search_term = filter_var($_GET["s"], FILTER_SANITIZE_STRING); //User enetered data
    $search_term = str_replace ("?", "", $search_term); //remove any question marks from string
    $search_count = str_word_count($search_term);  //count words of string entered by user
    $array = explode(" ", $search_term); //Seperate user enterd data

    foreach ($array as $key=>$word) {
        $array[$key] = " title LIKE '%".$word."%' "; //creates condition for MySQL query
    }

    $q = "SELECT * FROM posts WHERE  " . implode(' OR ', $array); //Query to select data with word matches
    $r = mysql_query($q);
    $count = 0; //counter to limit results shown
    while($row = mysql_fetch_assoc($r)){
        $thetitle = $row['title']; //result from query
        $thetitle = str_replace ("?", "", $thetitle);  //remove any question marks from string
        $title_array[] = $thetitle;  //creating array for query results
        $newarray = explode(" ", $search_term); //Seperate user enterd data again
        foreach($title_array as $key => $value) {
            $thenewarray = explode(" ", $value); //Seperate each result from query
            $wordmatch = array_diff_key($thenewarray, array_flip($newarray));
            $result = array_intersect($newarray, $wordmatch);
            $matchingwords = count($result); //Count the number of matching words from
            //user entered data and the database query
        }

        if(mysql_num_rows($r)==0)//no result found
        {
            echo "<div id='search-status'>No result found!</div>";
        }
        else //result found
        {
            echo "<ul>";
            $title = $row['title'];
            $percentage = '.5'; //percentage to take of search word count
            $percent = $search_count - ($search_count * $percentage); //take percentage off word count
            if ($matchingwords >= $percent){

                ?>
            <li><a href='<?php echo $row['url']; ?>'><?php echo $title ?><i> &nbsp; No. matching words: <?php echo $matchingwords; ?></i></a></li>
            <?php

                $count++;
                if ($count == 5) {break;
                }
            }else{
            }
        }
        echo "</ul>";
    }
?> 
```

下图显示了当我在搜索栏中搜索“如何制作自己的网站”时发生的情况。我已经在数据库中有几个问题要测试，它们都是相似的问题，最后一个条目与我提出的问题完全匹配，但由于它目前将它们显示为前 5 个数学结果，它忽略了完全匹配。这是该搜索的结果。 ![在此处输入图像描述](../Images/9e10dbeb8e35f4c4d87bf6f5b7040cc5.png)

我添加了一些代码，显示每个问题中有多少单词匹配，以便您可以看到它工作得更好。巧合的是，它按升序显示数据库中的前 5 个匹配结果。

我需要添加什么代码来安排它，以便它首先显示整个数据库中最接近的匹配，然后是第二个最佳匹配，第三个等等......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:57:06.987

您可以使用嵌套 SQL 查询，您可以在其中按计数排序，或者先将值加载到数组 php 数组，然后对数组进行排序。使用 SQL 非常高效 && 更快。

[多维数组排序](https://stackoverflow.com/questions/2699086/php-sort-multidimensional-array-by-value)

```
select column1, column2,..., LENGTH(titlecolumn) - LENGTH(REPLACE(titlecolumn, '$search term', '')) AS nummatchwords from posts where " . implode(' OR ', $array) order by nummatchwords; 
```

# c# - Webbrowser.Document.InvokeScript() 在 IE9 中不起作用

> ID：11809082
> 
> 赞同：0
> 
> 时间：2012-08-04T13:36:44.040
> 
> 标签：c#, javascript, winforms, webbrowser-control

我试图用下面的代码调用一个javascript函数

```
Webbrowser.Document.InvokeScript("something") 
```

IE8 可以，IE9 不行。有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:39:11.550

我通过添加以下代码来`HEAD`标记解决了我的问题`IE 9`

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:50:13.203

尝试像这样进行仿真

```
static private void UseIE9DocMode()
        {
            RegistryKey key = null;
            try
            {
                key = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Internet Explorer\\Main\\FeatureControl\\FEATURE_BROWSER_EMULATION", true);
            }
            catch (Exception)
            {
                key = Registry.CurrentUser.CreateSubKey("Software\\Microsoft\\Internet Explorer\\Main\\FeatureControl\\FEATURE_BROWSER_EMULATION");
            }
            key.SetValue(System.Diagnostics.Process.GetCurrentProcess().MainModule.ModuleName, 9999, RegistryValueKind.DWord);
            key.Close();
        } 
```

查看这些网址： [http](http://deletethis.net/dave/?page=2&q=document) ://deletethis.net/dave/?page=2&q=document http://blogs.msdn.com/b/ie/archive/2009/03/10/more-ie8-extensibility-improvements。 aspx

# java - 创建 ESC/POS Java 库

> ID：11809085
> 
> 赞同：1
> 
> 时间：2012-08-04T13:37:16.393
> 
> 标签：java

我在创建 esc/pos java 库时遇到了麻烦。事实上，我在第一个障碍中绊倒了，不知道它是否只是我正在使用的打印机。似乎无论我发送什么给它，它打印的只是一组随机字符。即使我向它发送初始化命令。

打印机是通过串行连接的 Epson TM-T20，从我能找到的一切来看，这应该支持标准的 ESC/POS。我正在尝试从 realterm 打印到它，但没有运气。有没有人知道这台打印机是否支持这种罚款以及为它创建java库的经验？只需要它输出非常简单的文本。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:49:11.307

Epson TM-T20 应该支持 ESC/POS。我对这台特定的打印机没有经验，但我对串行打印机和 ESC/POS 打印机有经验。当它打印随机字符时，通常意味着您的串口波特率设置错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:08:09.923

大多数 epson pos 打印机可以打印包含详细信息的收据，包括串行设置。关闭打印机，然后按住进纸按钮并打开打印机。它应该打印这张收据。打印完此收据后，它将保持 hexdump 模式（它将打印作为 hexdump 进来的任何内容）。将其关闭并再次打开以恢复正常操作。

# actionscript-3 - 如何隐藏资源内容

> ID：11809087
> 
> 赞同：0
> 
> 时间：2012-08-04T13:37:21.723
> 
> 标签：actionscript-3, apache-flex, air

我使用空气并使用 Flashbuilder (MyApp.dmg) 生成本机应用程序。安装后![在此处输入图像描述](../Images/a852ce56a727b31e0c874c1687046b02.png)，MyApp.app 存在于应用程序文件夹中。然后，我可以打开 MyApp.app 包并查看 Resources 文件夹中的所有脚本。您知道如何禁止访问此文件或更好地隐藏它们吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:34:45.680

您为保护代码所做的任何事情都可以被规避；没有解决方案使其无法破解，只有更难。

查看混淆和远程导入 .swf 文件。

# c# - 尝试安装安装项目时突然出现奇怪的异常，需要大量帮助

> ID：11809090
> 
> 赞同：1
> 
> 时间：2012-08-04T13:37:38.993
> 
> 标签：c#, .net, visual-studio, exception, installation

使用 Visual Studio 2010 构建安装项目以安装 Windows 窗体应用程序 .Net 4.0 C#。它多年来一直运行良好，但现在当我尝试安装完成的安装文件时，我收到以下错误消息：

> 错误 1001。无法在“路径”程序集中获取已安装的类型。--> 无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

我一直在寻找答案超过 4 小时现在没有找到任何东西。这个问题在我没有做任何事情的情况下就出现了。上次我构建安装文件就像 2 周前一样，根本没有问题。我没有删除任何与安装项目有关的参考或任何代码。

这个问题怎么会从无到有，更重要的是，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:40:49.557

根据您第二条评论中的错误消息，您的 SysDir.exe 程序集似乎已添加为自定义操作，其中 InstallerClass 属性设置为 true，但在 exe 中找不到安装程序类或无法找到 exe由于缺少依赖项而加载。

您可以通过右键单击安装程序项目，选择查看，然后选择自定义操作来查看自定义操作列表。

如果您的 exe 不能安装程序类，那么您可以将其从自定义操作列表中删除。

如果它确实包含安装程序类，那么问题将是缺少依赖项。如果 fuslogvw 对您不起作用（它一直帮助我们解决此类问题），您可以仔细查看 exe 项目中的引用列表，并将它们与安装程序项目中列出的内容进行比较。

我们使用的另一个技巧是在屏幕上显示错误消息时检查安装目录。我们经常可以通过这样做看到缺少 DLL，这通常是因为在安装程序项目的 DLL 条目中输入的路径不正确，或者因为条件设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-07T16:03:10.990

今天有同样的错误。对我来说，这是类库的项目类型。

我注意到我所关注的指南上的图片选择了**Class Library (.NET Framework)**而不仅仅是**Class Library**。

创建正确的项目类型修复了错误。

[https://nhvu1988.com/posts/how-to-create-msi-installer-using-vs-installer/](https://nhvu1988.com/posts/how-to-create-msi-installer-using-vs-installer/)

# html - HTML5 视频在 chrome 中播放，但不是 IE9

> ID：11809093
> 
> 赞同：4
> 
> 时间：2012-08-04T13:37:54.557
> 
> 标签：html, internet-explorer-9, html5-video

关于编码、htaccess 和视频元素标记，我已经尝试了你可以在互联网上和这里找到的所有混合物，但我无法让这些视频在 IE9 中播放，而它们在 Chrome 中完美运行。有谁知道魔法仙尘让它发挥作用？IE 中显示的只是一个黑框，中间有一个红色的 x。这是测试页面的链接：（链接已删除）

请注意，我展示了两个视频和两个标记变体。一个是直接从 Mark Pilgrim 的视频类型的书中复制的。第一个视频是使用 miro 编码的。第二个是ffmpeg。我确实在该视频目录的 htaccess 中包含“AddType video/mp4 .mp4”。

我尝试了什么或 ffmpeg 的预设组合都无关紧要，似乎没有任何效果。我对听到有关 javascript 库或任何其他库的建议不感兴趣。

**编辑1：**

在看到下面@heff 的测试页面后，看来我的问题可能与我的主机 HostGator 有关，他的支持团队给了我一笔，他们不支持使用 HTML5 的网页设计工作。我在 IE9 中使用在其他浏览器和其他 Web 主机中工作的音频和标记也遇到了 HTML5 音频问题。我不知道我的问题与主机有关，但我倾向于相信这一点，并将考虑与其他主机进行测试。

我在互联网和 SO 上看到了很多与我类似的问题，我想知道他们是否有与我相同的主机问题。

**编辑2：**

我将视频与使用 Apache 和 FreeBSD（HostGator 使用 Centos）的完全相同的网页一起放在办公室的本地服务器上。这些视频在 IE9 中播放得很好。

**EDIT3：** 所以我让“巴克兔子叔叔”工作。这是我下载的众所周知的 MP4。为什么它起作用，我不知道，但我认为我使用了与他们相同的编码器。他们必须拥有其他人所没有的魔法仙尘。

**EDIT4：** 任何人都可以复制我的一个视频和标记并使其在他们的非 HostGator 主机上工作吗？

**EDIT5：** 所以看起来 IE9 正在下载 mp4 视频，但只是不播放它们或在显示红色“x”时显示控件。我最初认为视频根本没有从他们向我展示的开发工具中下载。仍然不知道该怎么做。当我重新加载页面时，我确实看到了控件的闪光。

**EDIT6：已解决** 正如我在其他地方暗示的那样，解决方案在于编码。有什么不同，我不知道，但我使用 ffmpeg 的编码方法得到了这个工作。编码显示在我下面的答案中。

正如我也说过的，没有其他浏览器对我使用的内容有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T01:58:48.443

**编辑：**正如我在上面编辑的问题中所述，我找到了解决方案。仅当您按所示顺序放置时，以下操作才有效：

```
ffmpeg  -i <infile> \
        -vcodec libx264 -vpre normal \
        -acodec libfaac \
        -threads 0 <outfile>.mp4 
```

**原答案：**

我花了数周时间试图让这个工作无济于事。在网上搜索，我看到无数其他人也在为此苦苦挣扎。我一直无法找到一个可以让它工作并展示它是如何完成的人（除了使用@heff 在这里使用的特殊工具）。

我无法在他们自己的论坛和文章中找到 Microsoft 的任何回复。关于可能导致问题的编码，我找不到任何东西。我发现在论坛中开始的无数线程以相同的方式结束......没有解决方案。

**所以答案很简单。IE9坏了。**但我们都已经知道了。充其量是无能，它是这个星球上最糟糕的浏览器。虽然微软声称它可以处理这样的视频文件，但它无法做到这一点，而其他浏览器则没有任何问题。

因此，除非有人出现并提供指导，否则我会接受这个答案作为最佳答案，因为它是。当然，微软不能或不会提供更好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:03:40.633

mediainfo 结果对我来说没有什么特别突出的，所以我通过[Zencoder](http://zencoder.com)运行它，结果在 IE9 中对我有用。（第一个是Zencoder，第二个是你的原创）

[http://www.steveheffernan.com/test/11811992/test.html](http://www.steveheffernan.com/test/11811992/test.html)

完整披露：我共同创立了 Zencoder。Zencoder 不是一项免费服务，也不是一次性的视频编码。它旨在通过 API 自动编码。

顺便说一句，这让我相信IE9无法处理的文件中可能存在一些损坏。Zencoder 修复了许多潜在的损坏并强制实现某些兼容性。您也可以尝试 Handbrake，但这也只是使用 FFmpeg/x264 afaik。

在 Zencoder 中，我使用了[请求生成器](https://app.zencoder.com/request_builder)，并且没有更改任何默认设置。

```
{
  "input": "http://spartantheatre.org/video/test1.mp4"
} 
```

如果您想进一步检查，这是您的 test1.mp4 的 mediainfo 结果。

```
$ mediainfo test1.mp4 
General
Complete name                    : test1.mp4
Format                           : MPEG-4
Format profile                   : Base Media
Codec ID                         : isom
File size                        : 21.6 MiB
Duration                         : 2mn 14s
Overall bit rate                 : 1 348 Kbps
Writing application              : Lavf53.13.0

Video
ID                               : 1
Format                           : AVC
Format/Info                      : Advanced Video Codec
Format profile                   : Baseline@L3.0
Format settings, CABAC           : No
Format settings, ReFrames        : 1 frame
Codec ID                         : avc1
Codec ID/Info                    : Advanced Video Coding
Duration                         : 2mn 14s
Bit rate mode                    : Variable
Bit rate                         : 1 200 Kbps
Width                            : 480 pixels
Height                           : 320 pixels
Display aspect ratio             : 3:2
Frame rate mode                  : Constant
Frame rate                       : 29.970 fps
Color space                      : YUV
Chroma subsampling               : 4:2:0
Bit depth                        : 8 bits
Scan type                        : Progressive
Bits/(Pixel*Frame)               : 0.261
Stream size                      : 19.1 MiB (89%)
Writing library                  : x264 core 118 r2085 8a62835
Encoding settings                : cabac=0 / ref=1 / deblock=1:0:0 / analyse=0x1:0x111 / me=umh / subme=8 / psy=0 / mixed_ref=0 / me_range=16 / chroma_me=1 / trellis=1 / 8x8dct=0 / cqm=0 / deadzone=21,11 / fast_pskip=1 / chroma_qp_offset=0 / threads=3 / sliced_threads=0 / nr=0 / decimate=1 / interlaced=0 / bluray_compat=0 / constrained_intra=0 / bframes=0 / weightp=0 / keyint=250 / keyint_min=25 / scenecut=40 / intra_refresh=0 / rc_lookahead=50 / rc=abr / mbtree=0 / bitrate=1200 / ratetol=1.0 / qcomp=0.60 / qpmin=10 / qpmax=51 / qpstep=4 / vbv_maxrate=10000 / vbv_bufsize=10000 / nal_hrd=none / ip_ratio=1.40 / aq=1:1.00
Language                         : English

Audio
ID                               : 2
Format                           : AAC
Format/Info                      : Advanced Audio Codec
Format version                   : Version 4
Format profile                   : LC
Format settings, SBR             : No
Codec ID                         : 40
Duration                         : 2mn 14s
Bit rate mode                    : Variable
Bit rate                         : 150 Kbps
Maximum bit rate                 : 160 Kbps
Channel(s)                       : 2 channels
Channel positions                : Front: L R
Sampling rate                    : 48.0 KHz
Stream size                      : 2.40 MiB (11%)
Language                         : English 
```

干杯，
-heff

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T21:28:34.163

我有同样的问题，但认为这是一个时间问题，我希望很容易解决。

在我的例子中，我的 HTML 页面有一个没有指定源子元素的元素。

```
<audio id="audio" controls="controls"/> 
```

我在准备好的页面上执行了一些 jquery 代码，将 URL 分配为音频元素的源。

```
audio_core=$('#audio').attr('src', 'http://mysite.com/audioFile.mp3')[0];
 audio_core.play() 
```

Chrome 对此很满意，而 IE9 则不然。似乎 IE 在有机会完全下载之前尝试识别音频文件。

修复只是通过在将文件分配给音频源之前立即执行 get 来预加载文件

```
var soundFileUrl='http://mysite.com/audioFile.mp3'; 
$.get(soundFileUrl, function(){
 audio_core=$('#audio').attr('src', soundFileUrl)[0];
 audio_core.play()
}); 
```

似乎工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T18:03:59.070

IE 无法识别文件类型。尝试将此添加到 .htaccess 文件中： AddType video/mp4 .m4v AddType video/mp4 .mov

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T19:46:46.323

在尝试了 2 个不同的播放器库并对视频进行了 6 次不同的编码后，我发现在我的情况下，我的服务器上的 mime 类型配置不正确（.mp4 ~ video/mepg），而不是 .mp4 ~ video/ mp4

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T04:22:29.157

我也遇到了这个问题，但事实证明问题不在于 mime 类型或视频编码。我曾使用手刹对视频进行编码，它选择 AC3 作为音轨的预设而不是 AAC。用 AAC 重做后一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T15:35:42.600

您是否使用 H.264 编解码器而不是标准编解码器对视频进行编码？IE9 将下载任何扩展名为 .mp4 的文件，但它要求使用 h.264 对文件进行编码。截至目前，只有 Safari 和 IE 需要 mp4 H.264 编码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-18T13:54:42.277

我的工作伙伴想出了以下解决方法，它很有效，

simpy 在标签之后复制下面的代码行，`<!DOCTYPE html>`这将强制内容在 IE 9 中呈现

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-04T13:56:29.797

似乎不支持用于编码视频的编解码器。

# android - 向我的活动添加刷新按钮

> ID：11809098
> 
> 赞同：2
> 
> 时间：2012-08-04T13:39:15.197
> 
> 标签：android, android-activity

我想在我的项目顶部添加一个按钮，但我真的不知道如何使用我的基本适配器实现它。

我有两个以文本视图为首的列表，我遇到的问题是在我的两个列表之上实现一个简单的按钮以创建一个刷新按钮，但我真的不知道在哪里插入这个静态按钮。

这是我的活动：

```
public class ListSample_category3 extends Activity 
{

    public final static String ITEM_TITLE = "title";
    public final static String ITEM_COMPANY= "company";
    public final static String ITEM_DATE = "availabledate";

    public Map<String,?> createItem(String title, String company, String date) 
    {
        Map<String,String> item = new HashMap<String,String>();
        item.put(ITEM_TITLE, title);
        item.put(ITEM_COMPANY, company);
        item.put(ITEM_DATE, date);
        return item;
    }

    @Override
    public void onCreate(Bundle bundle) 
    {
        super.onCreate(bundle);

        List<Map<String,?>> security = new LinkedList<Map<String,?>>();
        security.add(createItem("Remember passwords", "Cisco", "2012-02-10"));
        security.add(createItem("Clear passwords", "Microsoft", "2012-02-10"));
        security.add(createItem("Show security warnings", "Apple", "2012-02-10"));

        // create our list and custom adapter
        SeparatedListAdapter adapter = new SeparatedListAdapter(this);

        adapter.addSection("Categorie 1", new ArrayAdapter<String>(this,
            R.layout.list_item_category3, new String[] { "First item", "Item two" }));

        adapter.addSection("Categorie 2", new SimpleAdapter(this, security, R.layout.list_complex_category3, 
            new String[] { ITEM_TITLE, ITEM_COMPANY, ITEM_DATE }, new int[] { R.id.list_complex_title, R.id.list_complex_company, R.id.list_complex_date }));

        ListView list = new ListView(this);
        list.setAdapter(adapter);
        this.setContentView(list);

    }
} 
```

我的基本适配器

```
public class SeparatedListAdapter extends BaseAdapter 
{
    public final Map<String,Adapter> sections = new LinkedHashMap<String,Adapter>();
    public final ArrayAdapter<String> headers;
    public final static int TYPE_SECTION_HEADER = 0;

    public SeparatedListAdapter(Context context) 
    {
        headers = new ArrayAdapter<String>(context, R.layout.list_header_category3);
    }

    public void addSection(String section, Adapter adapter) 
    {
        this.headers.add(section);
        this.sections.put(section, adapter);
    }

    public Object getItem(int position) 
    {
        for(Object section : this.sections.keySet()) 
        {
            Adapter adapter = sections.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return section;
            if(position < size) return adapter.getItem(position - 1);

            // otherwise jump into next section
            position -= size;
        }
        return null;
    }

    public int getCount() 
    {
        // total together all sections, plus one for each section header
        int total = 0;
        for(Adapter adapter : this.sections.values())
            total += adapter.getCount() + 1;
        return total;
    }

    public int getViewTypeCount() 
    {
        // assume that headers count as one, then total all sections
        int total = 1;
        for(Adapter adapter : this.sections.values())
            total += adapter.getViewTypeCount();
        return total;
    }

    public int getItemViewType(int position) 
    {
        int type = 1;
        for(Object section : this.sections.keySet()) 
        {
            Adapter adapter = sections.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return TYPE_SECTION_HEADER;
            if(position < size) return type + adapter.getItemViewType(position - 1);

            // otherwise jump into next section
            position -= size;
            type += adapter.getViewTypeCount();
        }
        return -1;
    }

    public boolean areAllItemsSelectable() 
    {
        return false;
    }

    public boolean isEnabled(int position) 
    {
        return (getItemViewType(position) != TYPE_SECTION_HEADER);
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        int sectionnum = 0;
        for(Object section : this.sections.keySet()) {
            Adapter adapter = sections.get(section);
            int size = adapter.getCount() + 1;

            // check if position inside this section 
            if(position == 0) return headers.getView(sectionnum, convertView, parent);
            if(position < size) return adapter.getView(position - 1, convertView, parent);

            // otherwise jump into next section
            position -= size;
            sectionnum++;
        }
        return null;
    }

    public long getItemId(int position) 
    {
        return position;
    }
} 
```

我的 3 个 xml 文件：

```
<!-- list_header.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_header_title"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    style="?android:attr/listSeparatorTextViewStyle" />

<!-- list_item.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_item_title"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"
    android:paddingLeft="15dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    />

<!-- list_complex.xml -->
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"
    android:paddingLeft="15dip"
    >
    <TextView
        android:id="@+id/list_complex_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        />
    <TextView
        android:id="@+id/list_complex_caption"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceSmall"
        />
</LinearLayout> 
```

从这段代码中，我有 2 个以 textview 为首的列表，我遇到的问题是在我的 2 个列表顶部实现一个简单按钮以进行刷新（按钮），但是在使用这种方式时，我真的不知道在哪里插入这个静态按钮

编辑 ：

我试图制作一个像这样的其他 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <ListView
        android:id="@+id/listpromo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

我将我的活动更改为：

```
public class ListSample_category3 extends Activity 
{

    public final static String ITEM_TITLE = "title";
    public final static String ITEM_COMPANY= "company";
    public final static String ITEM_DATE = "availabledate";
    private ListView list;

    public Map<String,?> createItem(String title, String company, String date) 
    {
        Map<String,String> item = new HashMap<String,String>();
        item.put(ITEM_TITLE, title);
        item.put(ITEM_COMPANY, company);
        item.put(ITEM_DATE, date);
        return item;
    }

    @Override
    public void onCreate(Bundle bundle) 
    {
        super.onCreate(bundle);

        List<Map<String,?>> security = new LinkedList<Map<String,?>>();
        security.add(createItem("Remember passwords", "Cisco", "2012-02-10"));
        security.add(createItem("Clear passwords", "Microsoft", "2012-02-10"));
        security.add(createItem("Show security warnings", "Apple", "2012-02-10"));

        // create our list and custom adapter
        SeparatedListAdapter adapter = new SeparatedListAdapter(this);

        adapter.addSection("Categorie 1", new ArrayAdapter<String>(this,
            R.layout.list_item_category3, new String[] { "First item", "Item two" }));

        adapter.addSection("Categorie 2", new SimpleAdapter(this, security, R.layout.list_complex_category3, 
            new String[] { ITEM_TITLE, ITEM_COMPANY, ITEM_DATE }, new int[] { R.id.list_complex_title, R.id.list_complex_company, R.id.list_complex_date }));

        // create ListView
        //ListView list = new ListView(this);
        list = (ListView) findViewById(R.id.listpromo);

        // OnItemClickListener on all items
        OnItemClickListener listener = new OnItemClickListener()
        {
              public void onItemClick(AdapterView<?> parent, View view, int position, long id)
              {

              }
        };
        list.setOnItemClickListener(listener);
        list.setItemsCanFocus(true);

        list.setAdapter(adapter);
        this.setContentView(list);

    }
} 
```

但我有一个 NullPointerException ：

08-05 14:49:24.875: E/AndroidRuntime(2558): 致命异常: main 08-05 14:49:24.875: E/AndroidRuntime(2558): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. dev.prixo/com.dev.prixo.OngletsActivity}：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.dev.prixo/com.dev.prixo.ListSample_category3}：java.lang.NullPointerException 08-05 14： 49:24.875: E/AndroidRuntime(2558): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 08-05 14:49:24.875: E/AndroidRuntime(2558): 在 android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:1667) 08-05 14:49:24.875: E/AndroidRuntime(2558): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 08-05 14:49:24.875: E/ AndroidRuntime(2558): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 08-05 14:49:24.875: E/AndroidRuntime(2558): 在 android.os.Handler.dispatchMessage(Handler.java:99) 08-05 14:49:24.875: E/AndroidRuntime(2558): 在android.os.Looper.loop(Looper.java:130) 08-05 14:49:24.875: E/AndroidRuntime(2558): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dev.prixo /com.dev.prixo.ListSample_category3}：java.lang.NullPointerException

请告诉我该怎么做，请..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:34:38.813

根据您的设计，您的问题是您正在根据 ListView 对象设置 contentView：

```
ListView list = new ListView(this);
list.setAdapter(adapter);
this.setContentView(list); 
```

这是一个单一的对象，如果您想修改它并更改该特定活动的内容，显然会导致问题。

## 我的建议

您需要创建一个可以在 contentView 中设置的布局 xml 文件。具体来说，这个 xml 将包括：

```
Linearlayout<- orientation:veritcal
 <Button>
 <Listview>
 <Listview>
-> 
```

然后，此布局将在您的 setContentView 中使用，然后您可以检索该按钮，然后配置其代码以允许刷新您的 ListView。或者您可以将其添加到您的选项菜单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:45:46.630

```
enter code here
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<Button 
    android:id="@+id/refresh"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
<ListView
    android:id="@+id/listpromo"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>

 </LinearLayout> 
```

开始在您的活动中实施刷新代码。

```
enter code here
Button refresh= (Button)findviewById(R.id.refresh);
refresh.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

                       //Implement the List Adapter Code here to refresh the Content.
        }
    } ); 
```

# html - 将 Div 向上移动 20px - 但保留边框

> ID：11809099
> 
> 赞同：5
> 
> 时间：2012-08-04T13:39:20.523
> 
> 标签：html, css

我有三个`<div>`s，想把第二个上移。

目前我正在这样做`position: relative; top: -20px;`- 效果很好。

`<div>`唯一的缺点是：第二个和第三个`<div>`（在第二个 div 下）之间有一个间隙（20px ）。

所以，我想保留所有三个 div 的边界，所以这`top: -20px`不是第三行的替代方案。

我在这里说明了这一点：http: [//jsfiddle.net/w2PGF/1/](http://jsfiddle.net/w2PGF/1/)

我的标记：

```
<div id="border">
    <div class="firstRow">foo</div>
    <div class="secondRow">bar</div>
    <div class="thirdRow">foobar</div>
</div>​ 
```

我的 CSS：

```
#border {
    border: 5px solid #000;
}
.firstRow {
    background-color: cyan;
    border: 3px solid red;
    height: 50px;
}
.secondRow {
    position: relative;
    top: -20px;
    border: 3px solid yellow;
    background-color: grey;
    height: 50px;
}
.thirdRow {
    background-color: blue;
    border: 3px solid blue;
    height: 50px;
} 
```

提前致谢。​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:43:47.363

```
.secondRow { margin-bottom: -20px } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T13:48:20.227

删除`position: relative`and 而不是`top: -20px`你应该添加`margin-top: -20px`

像这样：[小提琴](http://jsfiddle.net/BramVanroy/w2PGF/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:48:18.800

您需要删除`top: -20px`并添加`margin-top: -20px`到`.secondRow`

所以`.secondRow`看起来像这样：

```
secondRow {
    margin-top: -20px;
    border: 3px solid yellow;
    background-color: grey;
    height: 50px;
} 
```

检查这个 JSFiddle：http: [//jsfiddle.net/w2PGF/6/](http://jsfiddle.net/w2PGF/6/)

# python - 如何声明python全局列表

> ID：11809111
> 
> 赞同：2
> 
> 时间：2012-08-04T13:40:51.840
> 
> 标签：python, global-variables

我在声明列表时遇到了一些问题。似乎我无法删除列表中的所有元素。在`reset_a`打印输出时，它显示一个空列表，但在检查列表后`myFunction`，前一个元素仍在列表中。如何声明一个全局列表并将其用于定义的其他列表？

```
a = []

def reset_a():
    global a
    del a[:]
    print a

def myFunction():
     global a
     #check other stuffs........... then..
     print a
     if data not in a:
         a.append(data)
         time.sleep(5)
         reset_a()

if __name__=='__main__':
     while True:
        myFunction() 
```

编辑：我找到了完成它的方法。

```
global a
a = []

def reset_a():
    del a[:]
    print a

def myFunction():
     #check other stuffs...........and get 'data' then..
     print a
     if data not in a:
         a.append(data)
         time.sleep(5)
         reset_a()

if __name__=='__main__':
     while True:
        myFunction() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:48:59.887

`rest_a()``data`只有当有一个新的not in时才会执行`a`

# javascript - Javascript/jQuery 中的范围？

> ID：11809114
> 
> 赞同：9
> 
> 时间：2012-08-04T13:41:23.417
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [JavaScript 是否有 range() 等效项？](https://stackoverflow.com/questions/3895478/does-javascript-have-a-range-equivalent)

有没有办法像我们在 Python 中一样在 Javascript/jQuery 中声明一个范围？

像这样的东西：

x = 范围（1,10）

> *x = [1,2,3,4,5,6,7,8,9]*

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T13:44:27.560

通过使用像 Underscore.js 这样的第三方库，您可以实现与 Python [http://underscorejs.org/#range相同的行为](http://underscorejs.org/#range)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T13:43:10.593

您可以简单地创建一个数组，使用循环遍历这些值`for`并对这些值进行`push`ing。语言中没有任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T13:46:51.290

将此函数放入您的 Javascript 代码中，您应该能够`range()`像在 Python 中一样调用（但它仅适用于数字）：

```
function range(start, end)
{
    var array = new Array();
    for(var i = start; i < end; i++)
    {
        array.push(i);
    }
    return array;
} 
```

# python - 无法从辅音中确定元音

> ID：11809126
> 
> 赞同：2
> 
> 时间：2012-08-04T13:43:24.050
> 
> 标签：python, character

使用下面的代码，无论输入的第一个字母是什么，它总是被确定为元音：

```
original = raw_input("Please type in a word: ")
firstLetter = original[0]
print firstLetter

if firstLetter == "a" or "e" or "i" or "o" or "u":
    print "vowel"
else:
    print "consonant" 
```

事实上，if 语句中的布尔值是什么并不重要……如果它是 == 或 != ，它仍然是 return `"vowel"`。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T13:48:44.313

Python 不是英语。`or`如果您在它们之间或之间有一堆表达式`and`，则每个表达式都必须独立。请注意，它本身：

```
if "e":
    print("something") 
```

将始终打印`something`，即使`letter`不等于`"e"`。

你需要这样做：

```
if letter == "a" or letter == "e"  # (...) 
```

或者，更简洁地说：

```
if letter in "aeiouy": 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:48:28.987

```
if firstLetter in ("a", "e", "i", "o", "u"): 
```

您的测试所做的如下：

```
if (firstLetter == "a") or "e" or "i" or "o" or "u": 
```

并且后4个测试中的每一个都是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T13:47:36.860

试试这个你的布尔表达式：

```
firstLetter = 'a'
firstLetter in 'aeiou' 
True

firstLetter = 'x'
firstLetter in 'aeiou' 
False 
```

这相当于

```
 firstLetter in ['a', 'e', 'i', 'o', 'u'] 
```

即，您想将其放入您的 if 语句中，如下所示：

```
if firstLetter  in 'aeiou':
   print 'vowel'
else:
   print 'consonant' 
```

*注意*：

您最初的方法是在正确的轨道上，但是您必须单独比较每个字母，例如

```
if firstLetter == 'a' or firstLetter == 'e' or firstLetter == 'i' or ... 
```

使用上述内容更加简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:52:16.303

你的测试不像你想象的那样工作。您在问，“如果变量等于 'a'”，那么其余的测试基本上会询问字母 e、i、o 或 u 是否为 False。只有空字符串的计算结果为 False（在解释器中尝试 "e" == False 以查看）。使用其他答案中的“in”测试。此外，请确保将 firstLetter 小写，以便您始终比较喜欢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T13:56:48.720

首先你应该知道它是如何`or`工作的，它计算左右表达式，并返回第一个计算结果为真的表达式，否则返回最后一个表达式：

从这个[来源](http://docs.python.org/library/stdtypes.html#truth-value-testing)你可以看到所有这些都评估为假：

*   没有任何
*   错误的
*   任何数字类型的零，例如 0、0L、0.0、0j。
*   任何空序列，例如，''、()、[]。
*   任何空映射，例如 {}。
*   用户定义类的实例，如果该类定义了一个**非零**（）或**len**（）方法，当该方法返回整数零或布尔值 False.3.1

* * *

```
>>> False or True
True
>>> '' or False
False
>>> '' or 0
0 
```

因此，非空字符串将评估为 true 并将返回：

```
>>> 'abc' or False
'abc 
```

* * *

```
 if firstLetter == "a" or "e" or "i" or "o" or "u":
     print "vowel"
 else:
     print "consonant" 
```

对于字符串`'foo'`， `'f'`是第一个字母。在代码的第一部分中`firstLetter == "a" or "e"`，左侧表达式的计算结果为 false，但`'e'`不是空字符串，因此它的计算结果为 true，它将`print "vowel"`

[您可以在此处](https://stackoverflow.com/questions/10055045/python-good-programming-practice-for-enumerating-lists/10055062#10055062)查看我的其他答案，该答案回答了您的问题，如下所示：

```
if c.upper() in "AEIOU" 
```

将检查一个字母是否是元音。

# wpf - 通用、可绑定、统一拉伸布局

> ID：11809130
> 
> 赞同：0
> 
> 时间：2012-08-04T13:44:01.213
> 
> 标签：wpf, xaml

请原谅长度，试图确保所有信息都包含在内！

我需要一个几乎像这样的圆圈的单元视图（具有相应 VM 的视图）：

```
 ********
  **********
 ************
**************
**************
**************
**************
 ************
  **********
   ******** 
```

一些并发症：在我们启动之前，我不知道要显示多少个单元格。所有单元格的大小必须相等。整个视图必须是可扩展的。

在我的简化世界中，我的窗口创建了 20 个 RowViewModel 对象，并向每个构造函数传递了它应该创建的列数。

我的主要观点：

```
<Viewbox Stretch="Uniform">
    <ItemsControl ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Window}},Path=Rows}" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="{Binding Path=Rows.Count}" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</Viewbox> 
```

还有我的 RowView：

```
<Grid>
    <ItemsControl ItemsSource="{Binding Columns}" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Columns="{Binding Columns.Count}"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</Grid> 
```

我的单元格视图：

```
<Border >
    <Viewbox Stretch="Uniform" >
        <Label FontSize="10" Content="{Binding Notice}" Foreground="White" />
    </Viewbox>
</Border> 
```

就目前而言，所有行的宽度都相同，因此单元格较少的行具有较宽的单元格。如果我告诉每一行有 20 个单元格，每个单元格的大小相同，但尽管设置了 Horizo​​ntalAlignment，但所有内容都向左对齐，大概是因为它附加了空白单元格。我假设我可以在我想要的地方插入空白单元格，但这感觉就像是数据的软糖以使显示正确，我相信你会同意这是不好的。

我尝试了无数种方法，并认为这是迄今为止最接近的方法，但我错过了。你能帮忙吗？

谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:31:07.283

好吧，也许这是不可能的？我最终向 ViewModel 添加了一个属性，该属性构建网格并在生成期间分配适当的行/列，然后将内容控件数据绑定到该网格。

它仍然没有解决 - 如何在 XAML 中做到这一点？

风景：

```
<Viewbox Stretch="Uniform">
    <ContentControl Content="{Binding PrettyGrid}" />
</Viewbox> 
```

在视图模型中：

```
public Grid PrettyGrid
{
    get
    {
        return BuildGrid(data);
    }
} 
```

和 BuildGrid 片段：

```
private static Grid BuildGrid(List<objects> cellData)
{
    var localGrid = new Grid();

    // ...

    localGrid.RowDefintions.Add(...);
    localGrid.ColumnDefinitions.Add(...);

    cellData.ForEach(cell => 
    {
        ContentControl ctl = new ContentControl();
        ctl.Content = cell;
        Grid.SetRow(ctl, cell.Row);
        Grid.SetColumn(ctl, cell.Column);
        localGrid.Children.Add(ctl);
    });

    return localGrid;
} 
```

# java - 简单的差异算法，如 winmerge.exe

> ID：11809132
> 
> 赞同：1
> 
> 时间：2012-08-04T13:44:15.940
> 
> 标签：java, swing, applet, project

> **可能重复：**
> [如何编辑我的比较方法](https://stackoverflow.com/questions/11792534/how-to-edit-my-compare-method)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:46:41.270

`JTextArea`仅适用于简单文本 - 您可以在其`Font`上设置，但它会改变*整个*文本的外观。

如果您想为部分文本添加样式，请考虑使用`JTextPane`，它就是为此目的而设计的。请参阅有关如何执行此操作的[简短示例。](http://www.java2s.com/Tutorial/Java/0240__Swing/SimpleAttributeBoldItalic.htm)

# objective-c - iOS 上 PDF 文档的默认纸张大小和单位

> ID：11809133
> 
> 赞同：13
> 
> 时间：2012-08-04T13:44:25.240
> 
> 标签：objective-c, ios, pdf-generation

要在 iOS 中创建 PDF 文档，请参阅官方文档（[http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html#//apple_ref/doc/uid/TP40010156 -CH10-SW3](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html#//apple_ref/doc/uid/TP40010156-CH10-SW3) )，默认大小为 612x792，其比率为 1.29412。

```
// Create the PDF context using the default page size of 612 x 792.
UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);
CFRange currentRange = CFRangeMake(0, 0);
NSInteger currentPage = 0;
BOOL done = NO;
do {
// Mark the beginning of a new page.
   UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612, 792), nil); 
```

但是，国际标准 IS0216 的 A4 纸默认尺寸为 210x297mm，纵横比为 1.41429。所以，我的问题是：苹果标准的单位是什么？这个 612x792 尺寸是否与 A4 相同？是否包括打印边距等？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-04T14:29:32.227

PDF 和 PostScript 使用“PostScript 点数”作为单位。PostScript 点为 1/72 英寸。所以默认的页面大小是

```
612 x 792 points = 8.5 x 11 inch = 215.9 mm x 279.4 mm 
```

这是*美国信纸*尺寸。

中的边界矩形`UIGraphicsBeginPDFPageWithInfo()`定义了 PDF 页面的所谓“媒体框”。媒体框是应在其上打印页面的媒体的大小，因此包括边距。

# php - 使用 php 保持连接活跃

> ID：11809135
> 
> 赞同：0
> 
> 时间：2012-08-04T13:44:59.857
> 
> 标签：php, mysql

如果我向服务器发送请求 - mysql_connect, select_db 它会在 250 毫秒左右回复，之后每次我发送相同的请求回复平均大约 50 毫秒。如果我闲置 10 秒或更长时间，它会回到 250 毫秒回复

```
$user="";
$password="";
$database="";
mysql_connect(localhost,$user,$password);
mysql_select_db($database) or die( "Unable to select database " . $database); 
```

有没有什么我可以做的，每次我发送这个请求时，即使用户闲置了一段时间，它也不会回到 250 毫秒。

我知道对于某些人来说 200 毫秒的差异是愚蠢的，但我真的需要这个来解决我的情况。

# php - 强制 PHP 仅显示现有图像

> ID：11809139
> 
> 赞同：1
> 
> 时间：2012-08-04T13:46:08.513
> 
> 标签：php, image, web-crawler

> **可能重复：**
> [如何查找图像是否存在，或在 PHP 中呈现 ok 问题？](https://stackoverflow.com/questions/9301174/how-to-find-if-an-image-exists-or-renders-ok-issue-in-php)

这个 PHP 爬虫：

```
ini_set('user_agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.11) Gecko/2009060215 Firefox/3.0.11'); #disguise as a bot

for ($i = 1; $i <= 25000; $i++) { 
    echo "<img src='http://services.runescape.com/m=itemdb_rs/3809_obj_sprite.gif?id=" . $i . "' onerror='this.src =\"n.png\";'/>";
    usleep(1); #it ufreezes my box a little
} 
```

显示 25k-1 张图像。

**如何强制 PHP 只显示现有图像**？而且我不能使用`file_exist`它，因为它在远程主机上。

# ios - iPhone程序上的粘滞按钮

> ID：11809140
> 
> 赞同：0
> 
> 时间：2012-08-04T13:46:13.310
> 
> 标签：ios, xcode, button, sticky

你好，我有一个相当拥挤的应用程序视图来插入必要的开关，以便切换与图标关联的 6 个值。因此，如果可以使它们成为粘性按钮，我将不胜感激，即让它们在单击时独立保持压力，以便我在退出视图时阅读处于该状态的按钮。我读到存在这样一种适用于 Mac 的技术，但不能转化为 iOS。我怎么能那样做？

谢谢，法布里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:48:51.260

听起来您正在寻找复选框功能。让按钮在按下时更改图像，然后使用它来确定其状态。

我在我的手机上，所以这花了一点时间，但这里有一个链接到如何在objective-c[中制作一个复选框制作UIButton复选框的最佳方法是什么？](https://stackoverflow.com/questions/2227366/what-is-the-best-way-to-make-a-uibutton-checkbox)

请注意，您不需要使用普通的复选框图像。

# java - 应该使用什么数据类型来按 ID 引用序列化对象？

> ID：11809141
> 
> 赞同：1
> 
> 时间：2012-08-04T13:46:34.253
> 
> 标签：java, xml, spring, serialization

我有一堆类将被实例化并在我的 JS 前端和 Spring MVC 之间传递。

我正在使用[Simple](http://simple.sourceforge.net/)将我的对象序列化为 XML 以进行持久存储，并使用[Jackson](http://jackson.codehaus.org/)将其作为 JSON 传递给我的 UI。因此，我需要一个用于引用对象的 ID 属性，这需要在 JSON、POJO 和 XML 中保持一致。

这意味着我的 Java 类中需要一个 ID 属性。我应该将它声明为什么类型？我已经看到`int`在[Simple library 教程](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)中使用过，我也看到过`UUID`在[此处](http://www.javapractices.com/topic/TopicAction.do?Id=56)使用。

[Simple 库](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#cycles)创建`id`和属性（或您提供的`ref`任何其他属性）以维护引用：

```
<parent name="john" id="1">
   <children>
      <child id="2" name="tom">
         <parent ref="1"/>
      </child>
   </children>
</parent> 
```

随附的 Java 将其读回：

```
Strategy strategy = new CycleStrategy("id", "ref");
Serializer serializer = new Persister(strategy);
File source = new File("example.xml");
Parent parent = serializer.read(Parent.class, source); 
```

但是`id`，它不在原始 Java 对象中，因此它不会与 JSON 一起传递给 UI。我应该定义 a`private UUID uid;`并传递它，同时让 Simple 生成它使用的辅助`id`和`ref`属性，还是有办法使用单个 Java 属性来完成这两者？

编辑： Hibernate 有一个`@Id`注释，但我找不到与 Simple 类似的东西。这会吗？

```
@Attribute
private int id; 
```

问题是我需要实例化它并将其作为 JSON 传递，但它也需要是唯一的（这意味着使用 UID 会更容易）。此外，Simple 会使用`id`它`ref`吗？

编辑2：

用作属性，然后使用`id`CycleStrategy 会导致它使用您从类中定义的值，而不是它在`ref`指向的 XML 中使用的内部值...我现在使用两个属性 -`uuid`我一起生成内部使用`id`简单。

# jasper-reports - 将 Dynamic Jasper 与 Struts2 集成时出错

> ID：11809142
> 
> 赞同：2
> 
> 时间：2012-08-04T13:46:35.303
> 
> 标签：jasper-reports, dynamic-jasper

这是我在集成 struts 2 和动态 jasper 时遇到的错误

原因：没有为名称为“success”的“dynamicjasper”类型定义结果类型

它是由于我的 report.xml 导致的，我在其中定义了结果类型 dynamic-jasper

```
<package name="report" extends="struts-default,jasperreports-default">

        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"></result-type>
            <result-type name="dynamic-jasper" class="ar.com.fdvs.dj.struts2.DJStruts2Result"/>
        </result-types>

<action name="ShowReport" class="hris.report.action.GetReportAction">
              <result name="success" type="dynamic-jasper">
                <param name="dynamicReport">dr</param>
                <param name="layoutManager">classic</param>
                <param name="format">PDF</param>
            </result>
        </action>
   </package> 
```

# visual-studio-2010 - Visual Studio 安装项目与两个安装文件混淆？

> ID：11809149
> 
> 赞同：3
> 
> 时间：2012-08-04T13:48:19.923
> 
> 标签：visual-studio-2010

编译 Visual Studio 安装项目后：生成两个文件：application.msi 和 setup.exe

如果我运行 application.msi，新版本不会重写为旧版本。在所有情况下都可能运行 setup.exe。如果我给客户两个文件，那会造成混乱。我怎样才能只制作一个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:26:10.927

Setup.exe 文件是一个 BootStrap 文件，用于检查您在安装项目的先决条件对话框中设置的先决条件。MSI 包本身决定了应用程序的安装参数。您应该设置`Remove Previous Versions`为 true，并确保您的应用程序的程序集版本至少增加了内部版本号，否则如果您只更新修订号，它将不会被覆盖。程序集版本信息格式如下。`Major`. `Minor`. `Build`. `Revision`. 确保您还更改了设置项目的版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:09:50.573

您可以将带有 setup.exe 的 MSI 打包到单个自解压存档中，并在解压缩后启动 setup.exe。

# process - 当客户端浏览 mvc 网站并且服务器正在处理大量并且客户端关闭页面时

> ID：11809151
> 
> 赞同：0
> 
> 时间：2012-08-04T13:48:25.977
> 
> 标签：process

我有一个想法，客户端将 url 发布到服务器，asp.net mvc 操作服务器下载该 url 中的文件，在此过程中服务器可能不会向客户端返回任何内容，客户端将看到加载页面。

如果客户端选择关闭浏览器中的页面，服务器中的进程是否会终止或抛出异常，或者服务器会继续下载文件，直到进程正常终止？

我有两个想法1.客户端浏览一个url，服务器为客户端下载文件，而客户端不需要等待只需选择关闭页面，文件下载完成后服务器为客户端和电子邮件客户端下载文件2.客户端浏览一个url一个 torrent 文件，服务器为客户端下载 torrent，客户端可以选择关闭页面，一旦服务器完成下载 torrent，服务器将向客户端发送电子邮件。

以上可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:57:32.770

答案是肯定的，服务器将继续运行该过程，我已经尝试过了，服务器成功下载了我指示它为我下载的任何文件，无论是通过种子还是通过直接下载。

希望这对某人有帮助

# java - java中枚举器和枚举的区别

> ID：11809153
> 
> 赞同：1
> 
> 时间：2012-08-04T13:48:41.477
> 
> 标签：java, collections

任何人都可以澄清这些吗？我真的很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T13:51:35.560

枚举是遍历集合（[Enumeration](http://dictionary.reference.com/browse/enumeration)）（一般称为枚举器）的过程。

[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)是不同的。

> 枚举类型是一种类型，其字段由一组固定的常量组成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:54:22.597

`Enumeration`是一个接口：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html)

> 实现 Enumeration 接口的对象一次生成一系列元素。对 nextElement 方法的连续调用会返回该系列的连续元素。

枚举器是一个通用术语。更多关于迭代器的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T13:55:54.247

`Enum`- 定义一组常量并在需要时使用它。

`java.util.Enumeration`帮助使用`.nextElement()`.

# c# - 如何在 C# Windows 窗体中制作滚动图像列表？

> ID：11809157
> 
> 赞同：0
> 
> 时间：2012-08-04T13:48:55.923
> 
> 标签：c#, winforms, listbox, picturebox

我需要创建位于网络上的图片的缩略图列表。我还想添加 CheckBox 以使缩略图可以选择。我正在尝试将图片从 url 加载到 ListBox

```
// from form design file:
System.Windows.Forms.ListBox listBoxPictures;

// from main file
foreach (Photo albumPhoto in album.Photos)
{
  PictureBox albumsImg = new PictureBox();
  albumsImg.LoadAsync(albumPhoto.URL); // URL is string
  CheckBox selectedPhotoCheckBox = new CheckBox();
  listBoxPictures.Items.Add(albumsImg);
  listBoxPictures.Items.Add(selectedPhotoCheckBox);
} 
```

它不起作用，ListBox 中没有图像。我究竟做错了什么？如何在 C# Windows 窗体中制作滚动图像列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:55:18.893

问题是你必须等待图片加载完成

```
private void button1_Click(object sender, EventArgs e)
    {
        //make your loop here

        pictureBox1.WaitOnLoad = false;
        pictureBox1.LoadCompleted += new AsyncCompletedEventHandler(pictureBox1_LoadCompleted);
        pictureBox1.LoadAsync(albumPhoto.URL);
    }

    void pictureBox1_LoadCompleted(object sender, AsyncCompletedEventArgs e)
    {
        //now your picture is loaded, add to list view
         CheckBox selectedPhotoCheckBox = new CheckBox();
         listBoxPictures.Items.Add(albumsImg);
         listBoxPictures.Items.Add(selectedPhotoCheckBox);
    } 
```

# php - AS3 Php 密钥生成器

> ID：11809158
> 
> 赞同：0
> 
> 时间：2012-08-04T13:48:57.443
> 
> 标签：php, actionscript-3, apache-flex, air

我正在寻找一种使用 AS3 或 PHP 生成许可证密钥的方法。我需要使用用户名应用程序、版本号和最大用户数来计算密钥。

例如，这里是代码：

```
<?php
  error_reporting(E_ALL);
  function KeyGen($userName){
     $key = md5($userName);
     $new_key = '';
     for($i=1; $i <= 25; $i ++ ){
               $new_key .= $key[$i];
               if ( $i%5==0 && $i != 25) $new_key.='-';
     }
  return strtoupper($new_key);
  }

  $userCab="MyUserName-v6.0-12";
  $key=KeyGen($userCab);
 echo $key;
?> 
```

生成密钥大概是这样的：1AS7-09BD-96A1-CC8D-F106。但是现在，如何解密这个密钥来提取 $userCab 的最后两位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:26:23.813

您无法解密 MD5 哈希。如果您稍后要通过检查“解密”它，您将希望将值存储在 MySql 表中并每次加密该表中的值以检查它是否与他们放入其中的密钥匹配。

不要使用 AS3 加密任何东西，因为有人可以轻松地反编译您的 .swf 并查看您的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:26:11.067

您正在使用该[`md5`](http://www.ietf.org/rfc/rfc1321.txt)算法，这是一种单向散列算法。换句话说，您无法解密它。使用这种散列算法的普通实例不会尝试解密，而是将给定的输入（用户的密钥）与现有的散列进行比较。

如果您需要解密密钥以获取其中包含的信息，您可能必须创建自定义算法，或使用可解密算法（如 AES），然后[`base64_encode()`](http://php.net/base64_encode)使用加密字符串以获得用户友好的内容（但它将是一个长字符串，在大多数情况下）。查看可解密的方法的可用[`mcrypt`](http://php.net/manual/en/ref.mcrypt.php)功能，以找到适合您需求的方法。

如果您需要特定的密钥格式，如您的示例所示，自定义算法可能是您最好的选择。

# linux - 在 bash 中获取随机站点链接

> ID：11809160
> 
> 赞同：0
> 
> 时间：2012-08-04T13:49:14.453
> 
> 标签：linux, bash

> **可能重复：**
> [在 bash 中获取随机站点名称](https://stackoverflow.com/questions/11805508/get-random-site-names-in-bash)

我正在为大学制作一个程序，该程序必须在网络上找到单词的出现。我需要创建一个算法来查找站点并计算使用的单词数量，然后必须记录它们并按使用次数进行排序。因此，我的程序检查的站点越多越好。首先，我在考虑计算随机 IP，但问题是这个过程真的太多了（我让计算机搜索了一整晚，它只找到了 15 个站点）。我猜这是因为网站的 IP 在网络上分布不均，并且大部分 IP 属于用户或其他服务。现在我想到了一种新方法，我想知道你们的想法：

如果我通过谷歌使用某种字典进行随机搜索怎么办？字典一开始是空的，每次我执行搜索时，我都会检查一个站点并只将出现一次的单词添加到字典中，这样就不会通过破坏出现的情况再次将我发送到该站点。

这容易吗？

我想做的第一件事是在谷歌搜索中搜索随机页面，而不仅仅是第一个，这怎么做？我不知道如何计算该搜索的最大页数以及如何直接转到特定页面

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:10:42.803

虽然我认为您不能（或不应该）单独在 bash 中执行此操作，但请查看[Google Custom Search API](https://developers.google.com/custom-search/ "谷歌自定义搜索 API")和[这个问题](https://stackoverflow.com/questions/2445308/is-there-a-way-to-programmatically-access-googles-search-engine-results)。它允许以编程方式直接查询 Google 搜索。

至于要使用什么查询，您可以求助于从字典文件中随机挑选单词——尽管这不会给您一个统一的分布，因为像*'cat'这样的单词比**'epichorial'*更受欢迎。如果您需要考虑到这些差异的东西，您可以使用[词频词典](http://www.wordfrequency.info/)，尽管这似乎是您自己研究的重点，所以这可能不合适。

# facebook - 如何在同一页面上放置多个带有计数器的 Facebook Like 按钮

> ID：11809161
> 
> 赞同：17
> 
> 时间：2012-08-04T13:49:37.193
> 
> 标签：facebook, facebook, facebook-graph-api, facebook-social-plugins

我有一页有多个新闻项目。列表中的每个项目都必须有自己的[facebook](/questions/tagged/facebook "显示标记为“脸书”的问题") Like 按钮和计数。

**是否可以在同一页面上为每个新闻放置多个带有计数的 Like 按钮？**

![在同一页面上计数的多个 Facebook 喜欢按钮](../Images/fd26dfe175fd1c332294e63a045d0b8e.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T17:34:18.850

每个喜欢的按钮代码都必须有自己唯一的 url。

参考：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

> 我使用 php 来实现这一点，方法是从数据库中提取所需的所有相关 url，循环它们并将返回值写入 html5 中的 data-href 参数，如按钮代码。

您可以像我一样手动设置这些链接或设置动态系统。

* * *

html5 按钮代码。

```
<div class="fb-like" data-href="'.$thepage[link1].'" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false" data-font="tahoma" style="margin-left: auto; margin-right: auto; text-align: center;"></div>

<div class="fb-like" data-href="'.$thepage[link2].'" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false" data-font="tahoma" style="margin-left: auto; margin-right: auto; text-align: center;"></div>

<div class="fb-like" data-href="'.$thepage[link3].'" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false" data-font="tahoma" style="margin-left: auto; margin-right: auto; text-align: center;"></div> 
```

* * *

xfbml 按钮

```
<fb:like href="http://anotherfeed.com?link=1" send="true" width="450" show_faces="true"></fb:like>

<fb:like href="http://anotherfeed.com?link=2" send="true" width="450" show_faces="true"></fb:like>

<fb:like href="http://anotherfeed.com?link=3" send="true" width="450" show_faces="true"></fb:like> 
```

# operating-system - 没有虚拟内存支持的系统中的链接和分页

> ID：11809162
> 
> 赞同：5
> 
> 时间：2012-08-04T13:50:01.930
> 
> 标签：operating-system, paging, static-linking, dynamic-linking, virtual-memory

*   首先，虚拟内存是系统的硬件特性，还是仅由操作系统实现？

在链接时重定位期间，链接器将运行时地址分配给生成的可执行文件中的每个部分和每个符号

*   这些运行时地址是否对应于虚拟地址？

*   如果生成可执行文件的系统不使用虚拟内存怎么办？

接下来，如果不使用虚拟内存，则应用程序的地址空间仅限于加载时重定位后操作系统为其分配的物理地址空间

*   如果没有使用虚拟内存，是否会发生页面错误？

我认为，确实如此：如果包含请求的物理地址的物理页面尚未存储在 RAM 中，则应该发生页面错误，由 OS 页面错误处理程序提供服务

*   最后，没有虚拟内存是否可以分页？

我问是因为分页总是与虚拟内存一起提到，但似乎不需要虚拟内存的存在来进行分页

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:49:09.173

哇，好多问题。

*   **虚拟内存在哪里实现？**底层硬件需要​​支持虚拟内存。请记住，当您在程序中访问内存地址时，CPU 需要某种方式来获取属于该地址的数据。如果您只有物理访问权限，则操作将直接发送到内存控制器。在具有虚拟内存的系统中，您有一个[MMU（内存管理单元）](http://en.wikipedia.org/wiki/Memory_management_unit)，它将虚拟地址转换为物理地址。（请注意，一些微控制器提供了一个精简版本，称为内存保护单元（MPU），它不提供此转换步骤，但至少允许访问权限检查。）
*   **链接时地址是否对应于运行时的虚拟地址？**通常，链接时地址对应于运行时虚拟地址。但是，有一种模式并非如此：位置无关代码。在这里，虚拟地址由动态链接器在加载时确定。这种方法通常用于将动态链接库 (DLL / .so) 加载到应用程序中。有关该主题的更多详细信息，您可能需要查看[“链接器和加载器”](http://www.iecc.com/linker/)。
*   **如果我的目标系统没有虚拟内存怎么办？**如果您的系统不支持虚拟内存，从编译器/加载器的角度来看，没有什么真正改变：您仍然需要生成代码来访问内存。唯一的区别是您的 CPU 不再进行从虚拟地址到物理地址的额外转换。
*   **如果没有虚拟内存，是否会出现页面错误？**如果您没有虚拟内存，则不会出现页面错误。但是，在 MPU 的情况下，如果您的应用程序尝试访问不应读取/写入的地址，您可能仍会看到硬件报告的访问冲突。请注意，不需要将物理地址（更好：物理地址指向的数据）加载到 RAM 中。它们只是指向已经存在的 RAM 的指针。
*   **没有虚拟内存可以分页吗？**“分页”和“虚拟内存”通常用于表示同一事物。然而，分页也可能指将内存分割成相同大小的块的概念——页面。您的问题的答案取决于分页的含义。;)

# c++ - `std::set` 在每种情况下都会对元素进行排序吗？

> ID：11809163
> 
> 赞同：18
> 
> 时间：2012-08-04T13:50:06.840
> 
> 标签：c++, sorting, stl, set, std

从[cplusplus.com](http://www.cplusplus.com/reference/stl/set/begin/)参考看来，它似乎对`std::set`元素进行了排序。

我需要对字符串进行排序，但我不确定它是否能在每个平台和编译器上正常工作。主要是GCC、MinGW、VC。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-04T13:51:50.227

根据它的定义`std::set`是一个排序的容器。它是标准的一部分。对其进行排序有助于保持它是一个集合，而不仅仅是一个任意集合。

来源：[http ://www.sgi.com/tech/stl/set.html](http://www.sgi.com/tech/stl/set.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-04T23:49:20.547

实际上 std::set 和 std::map 并没有真正排序。这两个容器都实现为[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)。因此，当您迭代此类容器时，迭代器会以看起来该容器已排序的方式遍历树。首先它访问最左边的节点，然后是最左边的父节点，依此类推......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T14:00:08.163

是的，`std::set`以这样一种方式存储它的元素，即迭代元素将按排序顺序完成（并且调用`std::adjacent_find`是为了显示`std::set`存储唯一项目）。

```
#include <algorithm>
#include <iterator>
#include <ios>
#include <iostream>
#include <set>
#include <string>

int main()
{
    auto const ss = std::set<std::string> { "foo", "bar", "test" };
    std::cout << std::boolalpha << std::is_sorted(begin(ss), end(ss)) << "\n";
    std::cout << std::boolalpha << (std::adjacent_find(begin(ss), end(ss)) == end(ss)) << "\n";
    std::copy(begin(ss), end(ss), std::ostream_iterator<std::string>(std::cout, "\n"));
} 
```

[**现场示例**](http://coliru.stacked-crooked.com/a/27524dafd053109d)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-02T10:07:23.247

**[C++11 N3337 标准草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)** 23.2.4“关联容器”：

> 1 关联容器提供基于键的数据快速检索。该库提供四种基本类型的关联容器：set、multiset、map 和 multimap。

和：

> 10 关联容器迭代器的基本特性是它们以键的非降序遍历容器，其中非降序由用于构造它们的比较定义。

所以是的，顺序是有保证的，正如[https://stackoverflow.com/a/11812871/895245](https://stackoverflow.com/a/11812871/895245)提到的，基本上需要一个平衡的搜索树实现。

还与 C++11 形成对比`unordered_set`，后者可能会提供更好的性能，因为它的限制较少：[为什么会有人使用 set 而不是 unordered_set？](https://stackoverflow.com/questions/1349734/why-on-earth-would-anyone-use-set-instead-of-unordered-set)例如使用哈希集。

# c# - 触发器不会更新所有受影响的行

> ID：11809166
> 
> 赞同：0
> 
> 时间：2012-08-04T13:51:00.487
> 
> 标签：c#, sql-server-2008, openxml

我有 3 个表作为测试 1、测试 2 和测试 3。

测试 1，是一张销售表。记录销售细节的地方。它会生成一个销售ID。

测试 2，是一个表格，用于记录在此特定销售 ID 中销售的所有产品。我正在使用 openxml 插入这些详细信息。请在下面找到用于更新 Test 1 和 Test 2 表的存储过程。

```
CREATE PROCEDURE UpdateSales
(
@SalesID int out,
@SalesDate Date,
@XmlString text
) 
AS
BEGIN
SET NOCOUNT ON
BEGIN TRANSACTION
BEGIN TRY

INSERT INTO Test1 (SalesDate) VALUES (@SalesDate);
SET @SalesID = SCOPE_IDENTITY();

DECLARE @XMLDocPointer int;
EXEC sp_xml_preparedocument @XMLDocPointer OUTPUT, @XmlString;

INSERT INTO Test2 (SalesID, ProductId, ProductName, qty)
    SELECT @SalesID, productId, productName, qty
    FROM OPENXML(@XmlDocPointer, '/Root/Products', 2)
    WITH (productId int,
        productName varchar(100),
        qty int);

EXEC sp_xml_removedocument @XMLDocPointer 

COMMIT TRANSACTION
END TRY

BEGIN CATCH
ROLLBACK TRANSACTION
END CATCH

END
GO 
```

表 3 为产品表。根据售出的产品，数量需要更新。插入后，我在 Test 2 表上使用触发器。请在下面找到使用的触发器。

```
CREATE TRIGGER updateQty ON Test2
AFTER INSERT
AS
DECLARE @productID int;
DECLARE @qty int;

SELECT @productID = ProductId FROM INSERTED;
SELECT @qty = qty FROM INSERTED;

DECLARE @currentQty int;
SELECT @currentQty = qty FROM Test3 WHERE productID = @productID;
UPDATE Test3 SET qty = @currentQty - @qty WHERE productID = @productID;
GO 
```

当我尝试执行存储过程以将记录插入到 Test 1 和 Test 2 表时，因为我有一个触发器，需要更新 Test 3 表。请在我使用的执行语句下面找到，只有产品 id 1 在 Test 3 表中更新。请帮我解决这个问题。提前缴费。

语句已执行。

```
EXEC UpdateSales 
'1' , '08/08/2012' , 
'
<Root>
<Products>
<productId>1</productId>
<productName>Product 1</productName>
<qty>1</qty>
</Products>
<Products>
<productId>2</productId>
<productName>Product 2</productName>
<qty>2</qty>
</Products>
<Products>
<productId>3</productId>
<productName>Product 3</productName>
<qty>3</qty>
</Products>
</Root> 
'
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:56:08.157

您的触发器是单行触发器。它需要对插入表中的所有记录进行操作。

未经测试，但您的更新触发器应该看起来像这样来更新所有受影响的行：

```
CREATE TRIGGER updateQty ON Test2 
AFTER INSERT 
AS 

UPDATE Test3 
  SET qty = qty - i.qty
from test3 t
join inserted i on i.productid = t.productid

GO 
```

# java - 尝试使用 apache commons 上传文件时出现错误 500。日志说 java.lang.NoClassDefFoundError

> ID：11809170
> 
> 赞同：1
> 
> 时间：2012-08-04T13:51:42.753
> 
> 标签：java, google-app-engine, jakarta-ee, noclassdeffounderror, apache-commons-fileupload

在尝试使用 apache commons将文件上传到我的项目文件夹*图像时，生成了以下异常：*

我正在从 google appengine 的日志查看器中复制这些日志。

```
2012-08-04 17:52:38.238 /UploadImagesToAisle 500 4381ms 0kb Mozilla/5.0 (X11; 
Linux i686; rv:13.0) Gecko/20100101 Firefox/13.0

106.200.242.109 - - [04/Aug/2012:05:22:38 -0700] "POST /UploadImagesToAisle 
HTTP/1.1" 500 0 "http://programworks.appspot.com/ValidateCredentials" 
"Mozilla/5.0 (X11; Linux i686; rv:13.0) Gecko/20100101 Firefox/13.0" 
"programworks.appspot.com" ms=4382 cpu_ms=1773 api_cpu_ms=0 cpm_usd=0.066922 
loading_request=1 instance=00c61b117ce6b4d0249c878697d13e1a0a649c

W 2012-08-04 17:52:38.178

Error for /UploadImagesToAisle
java.lang.NoClassDefFoundError: java.rmi.server.UID is a restricted class. Please see the Google App Engine developer's guide for more details.
at com.google.apphosting.runtime.security.shared.stub.java.rmi.server.UID.<clinit>(UID.java)
at org.apache.commons.fileupload.disk.DiskFileItem.<clinit>(DiskFileItem.java:109)
at org.apache.commons.fileupload.disk.DiskFileItemFactory.createItem(DiskFileItemFactory.java:199)
at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:361)
at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:126)
at Servlets.UploadImagesToAisle.doPost(UploadImagesToAisle.java:49)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)

........ 
```

我正在尝试在使用 google appengine 作为服务器时上传文件，并且正在将上传的文件复制到我的项目目录中。即在*web-pages*下的目录中。

这是我用来上传文件的servlet：

```
 @Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String path = request.getParameter("Data");
    PrintWriter writer = response.getWriter();
     try {
       boolean isMultipart = ServletFileUpload.isMultipartContent(request);
       if( !isMultipart ) {
           writer.println("File cannot be uploaded !");
       } else {
           DiskFileItemFactory diskFileItem = new DiskFileItemFactory();
           ServletFileUpload fileUpload = new ServletFileUpload(diskFileItem);
           List list = null;

           try {
               list = fileUpload.parseRequest(request);
           }catch(Exception exc) {
               writer.println(exc);
           }

           Iterator iterator = list.iterator();
           while(iterator.hasNext()) {
              FileItem fileItem = (FileItem)iterator.next();
              if(fileItem.isFormField()) {
                  // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
              } else {
                  // Process form file field (input type="file").
                  String fieldName = fileItem.getFieldName();
                  String fileName = FilenameUtils.getName(fileItem.getName());
                  File file = new File("images/",fileName);
                  fileItem.write(file);
              }
           }
       }
    }catch(Exception exc) {
        writer.println(exc);
    }
} 
```

*html片段*

```
 <form method="post" enctype="multipart/form-data" action="../../UploadImagesToAisle">
            <input type="file" name="Data"/>
            <input type="submit" value="upload"/>
        </form> 
```

*我要上传文件的项目内的*图像目录：**

 *![在此处输入图像描述](../Images/a6124579a7486ce370a45f4ae33fd1f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:49:05.227

您无法写入 Google App Engine 中的文件系统。所有的应用程序都是沙盒的。他们只能读取与项目一起上传的文件，而不能写入文件系统。这就是您收到此错误的原因。

为了克服这个问题，您可以使用[Google App Engine 虚拟文件系统](http://code.google.com/p/gaevfs/)。它是一个使用 GAE 数据存储和内存缓存 API 实现的库。这可能会有所帮助。

编辑：将在[http://code.google.com/p/gaevfs/downloads/detail?name=gaevfs-0.3.zip&can=2&q=](http://code.google.com/p/gaevfs/downloads/detail?name=gaevfs-0.3.zip&can=2&q=)
下载的库文件添加到您的网络服务器。 试试这个并拍摄评论：

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String path = request.getParameter("Data");
    PrintWriter writer = response.getWriter();
     try {
       boolean isMultipart = ServletFileUpload.isMultipartContent(request);
       if( !isMultipart ) {
           writer.println("File cannot be uploaded !");
       } else {

           ServletFileUpload fileUpload = new ServletFileUpload();
           List list = null;

           try {
               list = fileUpload.parseRequest(request);
           }catch(Exception exc) {
               writer.println(exc);
           }

           Iterator iterator = list.iterator();
           while(iterator.hasNext()) {
              FileItem fileItem = (FileItem)iterator.next();
              if(fileItem.isFormField()) {
                  // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
              } else {
                  // Process form file field (input type="file").
                  String fieldName = fileItem.getFieldName();
                  String fileName = FilenameUtils.getName(fileItem.getName());
                  GaeVFS.setRootPath( getServletContext.getRealPath( "/" ) );
                  FileSystemManager fsManager = GaeVFS.getManager();
                    FileObject file = fsManager.resolveFile( "gae://images/"+filename );
                  fileItem.write(file);
              }
           }
       }
    }catch(Exception exc) {
        writer.println(exc);
    }
} 
```

在导入时添加：

```
import org.apache.commons.vfs.FileSystemManager;
import org.apache.commons.vfs.FileObject;
import com.newatlanta.commons.vfs.provider.gae.GaeVFS; 
```*

# windows-phone-7 - Windows phone 7 - 如何连接到远程服务

> ID：11809177
> 
> 赞同：0
> 
> 时间：2012-08-04T13:53:23.157
> 
> 标签：windows-phone-7, windows-phone, windows-phone-7-emulator

我想使用 windows phone 7.5 连接到远程机器。.net 中是否有任何内置类。

对于常规桌面应用程序，同样可以使用 ServiceController 类来完成。我正在为 windows phone 应用程序寻找类似的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:06:07.947

ServiceController 用于控制本地或远程机器上的服务状态。

WP 应用程序无法控制远程或本地服务。

您必须编写 SOAP 或 REST API 来管理服务，然后将 WP 应用程序连接到这些服务，但请确保它得到适当保护——您不想将服务控制权授予所有人。

# java - 这个替换代码有什么问题？

> ID：11809179
> 
> 赞同：1
> 
> 时间：2012-08-04T13:53:39.717
> 
> 标签：java, regex, string, replace

我需要将 {word} 替换为名为组的正则表达式： (?< word >\w++) 以将来匹配表达式，即：/{name}/{age}... 此代码不起作用！

```
String p = "/{name}/{id}";
p = p.replaceAll("\\{(\\w+)\\}", "(?<$1>\\\\\\\\w+)");
Pattern URL_PATTERN = Pattern.compile(p);
CharSequence cs = "/lucas/3";
Matcher m = URL_PATTERN.matcher(cs);
if(m.matches()){
    for(int i=1;i<m.groupCount();++i){
        System.out.println(m.group("name"));
    }
} 
```

结果：没有:(

但是当我得到替换的结果时： /(?\w+)/(?\w+) 并放入 Pattern.compile() 这有效：

```
String p = "/{name}/{id}";
p = p.replaceAll("\\{(\\w+)\\}", "(?<$1>\\\\\\\\w+)");
Pattern URL_PATTERN = Pattern.compile("/(?<name>\\w+)/(?<id>\\w+)");
System.out.println(p);
CharSequence cs = "/lucas/3";
Matcher m = URL_PATTERN.matcher(cs);
if(m.matches()){
    for(int i=1;i<m.groupCount();++i){
        System.out.println(m.group("name"));
    }
} 
```

结果：“卢卡斯”

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:06:44.223

我认为您在替换中使用了太多`\`。尝试

```
p = p.replaceAll("\\{(\\w+)\\}", "(?<$1>\\\\\\w+)"); 
```

# github - 中间人和 Github 页面

> ID：11809180
> 
> 赞同：10
> 
> 时间：2012-08-04T13:53:41.917
> 
> 标签：github, middleman, github-pages

我正在尝试使用[Middleman](http://www.middlemanapp.com)创建一个静态站点。git repo`master`有源文件。静态文件`build`在`.gitignore`. 我有一个`gh-pages`Github 页面的分支。我如何设置这样的东西，以便`gh-pages`具有.`build``master`

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T03:03:13.457

看起来这个 gem 提供了一个优雅的解决方案：

[中间人-gh-pages](https://github.com/neo/middleman-gh-pages)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T22:00:20.583

[我已经开始使用与](http://octopress.org/docs/deploying/github/)[Octopress](http://octopress.org/) 相同的技术，它对 Middleman 非常有用。

基本上我使用两个 git 存储库，一个在根文件夹中，一个在构建文件夹中。根存储库推送到`develop`GitHub 远程上的分支并排除该`build`目录。目录内的存储库`build`推送到同一 GitHub 远程的`master`（或`gh-pages`）分支。

为了自动推送新的静态页面，我使用以下 Rakefile：

```
desc "deploy build directory to github pages"
task :deploy do
  puts "## Deploying branch to Github Pages "
  cp_r ".nojekyll", "build/.nojekyll"
  cd "build" do
    system "git add ."
    system "git add -u"
    puts "\n## Commiting: Site updated at #{Time.now.utc}"
    message = "Site updated at #{Time.now.utc}"
    system "git commit -m \"#{message}\""
    puts "\n## Pushing generated website"
    system "git push origin master"
    puts "\n## Github Pages deploy complete"
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-01T00:25:43.913

另一个好的宝石是[middleman-deploy](https://github.com/tvaughan/middleman-deploy)。安装并配置所有内容后，您可以简单地运行

```
$ middleman deploy 
```

并且您的构建目录将被推送到 GitHub 页面。您可以在配置中指定推送到哪个分支。[我在这里](http://fajitanachos.com/Goodbye-jekyll/)也有一篇关于从 Jekyll 页面切换到 GitHub 页面的博客文章，其中谈到了一些关于部署的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:38:24.243

我找不到这样做的干净方法。这是我一直在使用的脚本：

```
bundle exec middleman build
mv build /tmp/

git checkout gh-pages
git rm -rf .
cp -r /tmp/build/* .
git add .
git commit -m "Update site"

rm -rf /tmp/build

git push
git checkout master 
```

# javascript - 为什么索引变量不适用于 javascript 数组？

> ID：11809181
> 
> 赞同：0
> 
> 时间：2012-08-04T13:53:57.390
> 
> 标签：javascript, jquery, html, html5-canvas, jquery-events

我创建了一个按钮（new_a_window），当它被按下时，它将在 html 中附加一个带有图像的按钮。

```
$( '#new_a_window').bind('click',function(){
    $('#story_pages').append('<div><button value="'+window_value+'" onclick="reload_to_canvas(this.value) "  ><img id= "w'+window_value+'" src="../pic/white_img.png" width="100px", height="100px"/> </button></div>');
    window_value= window_value+1;   
}); 
```

当每个新按钮被点击时，它会将其值发送给一个函数：

```
var write_back_to_canvas;
function reload_to_canvas(dataURLindex){    
    write_back_to_canvas = new Image(); //to new a object each time.        
    alert(dataURLindex);//check the dataURLindex content.
    current_page=dataURLindex; 
    write_back_to_canvas.src= img_dataURLs[dataURLindex];
    context.drawImage(write_back_to_canvas,0,0);
} 
```

问题是：这不行。（将dataURL的图像重新绘制到画布上）经过多次测试，我发现问题不是画布的drawImage方法。

> 是dataURLindex的问题。

因为我试图将参数 dataURLindex 替换为整数，例如：0、1、2 或 3... 而这个工作。但是当我使用`variable(dataURLindex)`作为索引时，它再次变得无效。奇怪的是，`alert(img_dataURLs[dataURLindex])` 我可以看到内容......并`alert(dataURLindex)`显示正确的数字......

我真的找不到其他可能的故障。请有任何建议。

# routing - Orchard CMS 和 Module.txt 中的 Path 属性

> ID：11809188
> 
> 赞同：1
> 
> 时间：2012-08-04T13:54:58.080
> 
> 标签：routing, orchardcms

在我的 module.txt 我有这个：

```
Name: My Module Name
Path: friendlyname
AntiForgery: enabled
Author: MyCompany
Category: MyCategory
Website: http://www.mycompany.com
Version: 1.0
OrchardVersion: 1.0
Description: Some description
FeatureDescription: Some description
Dependencies: Orchard.Users 
```

当我想在我的模块中访问控制器的方法时，我希望能够使用这样的 url：

```
OrchardLocal/friendlyname/controller/action 
```

但是，这不起作用。只有当我使用这样的网址时它才有效：

```
OrchardLocal/assemblyname/controller/action 
```

如何使用不显示程序集名称的友好 url。我的程序集名称包含点和公司名称，所以不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:56:54.913

好吧，显然我问得太早了。也许发生了一些缓存，因为我描述的方式现在有效。

# c# - 覆盖基类抽象方法并将它们隐藏在派生类中

> ID：11809189
> 
> 赞同：0
> 
> 时间：2012-08-04T13:54:58.940
> 
> 标签：c#, visual-studio-2010, inheritance

我有两种类型的基类；

```
public abstract class Base
{
    public abstract object Work();
}

public abstract class AuthenticatedBase : Base
{
    public abstract object Work(T request);
} 
```

经过身份验证的类做了一些额外的工作来事先检查登录。然后我有从两个基类扩展的不同类；

```
public class A : Base
{
    public override object Work()
    {
        // Work here
    }
}

public class B : AuthenticatedBase
{
    public override object Work(T request)
    {
        // Work here
    }
} 
```

基本上，当我创建一个派生自 AuthenticatedBase 的新类 B 时，Visual Studio 说我需要从 Base 类实现 Work()，即使我在 AuthenticatedBase 中有一个替代实现，我正在覆盖，诚然使用不同的参数。我应该怎么做才能不必从继承类中的基类实现 Work() 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:02:12.610

在 AuthenticatedBase 中实现无参数 Work 方法并使用“sealed”关键字阻止它显示在 AuthenticatedBase 的继承者上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:59:28.347

你必须实现它，没有办法绕过它。这就是多重​​继承派上用场的情况。

您可以使用组合，以便`B`引用`A`. 然后`B.Work()`可以调用`A.Work()`。

或者，实现`B.Work()`它以调用`B.Work(T)`. 或者甚至`Base.Work()`是一个具有基本实现的虚拟方法`A`。

# algorithm - 图论教程

> ID：11809190
> 
> 赞同：12
> 
> 时间：2012-08-04T13:55:12.110
> 
> 标签：algorithm, data-structures, graph, graph-theory

谁能推荐我关于图论的良好在线教程，即 BFS、DFS 和其他相关的图算法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T14:54:05.253

我的建议：

介绍性 - JMT Patrick：
[http ://www.youtube.com/watch?v=HmQR8Xy9DeM](http://www.youtube.com/watch?v=HmQR8Xy9DeM)

* * *

中等难度的讲座 - ADUni 和伯克利：
[http ://aduni.org/courses/algorithms/index.php?view=cw](http://aduni.org/courses/algorithms/index.php?view=cw)
[http://www.cs.berkeley.edu/~blum/174notes.html](http://www.cs.berkeley.edu/~blum/174notes.html)

* * *

高级的东西 - 麻省理工学院：http:
[//ocw.mit.edu/courses/mathematics/18-315-combinatorial-theory-introduction-to-graph-theory-extremal-and-enumerative-combinatorics-spring-2005/](http://ocw.mit.edu/courses/mathematics/18-315-combinatorial-theory-introduction-to-graph-theory-extremal-and-enumerative-combinatorics-spring-2005/)

作为奖励，Neo CEO 的精彩演讲：
[http ://www.youtube.com/watch?v=UodTzseLh04&feature=related](http://www.youtube.com/watch?v=UodTzseLh04&feature=related)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T20:49:38.173

我强烈建议从 topcoder 学习

> [http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=graphsDataStrucs1](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=graphsDataStrucs1)

既有理论又有实现

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-04T17:30:57.387

如果你喜欢用 python 编码，你可以看看这本书：

[算法图论](http://code.google.com/p/graphbook/)

这本书是 GNU-FDL 许可的，这意味着您可以免费阅读和下载所有内容。并且书中的所有源代码都是为 Sage 提供的。[Sage](http://www.sagemath.org/)是 Matlab 的开源替代品。由于 Sage 使用 python 作为编写脚本的语言，Sage 中的所有源代码本质上都是带有附加模块的 python 代码（来自 sage）。

ps：这个算法图论与@Elias 的算法图论完全不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T20:11:14.367

Use *[Algorithm Design](http://www.cs.princeton.edu/~wayne/kleinberg-tardos/)* by Tardos and Kleinberg for graph algorithms. if you want mathematical graph theory you can read *[Graph Theory](http://diestel-graph-theory.com)* by Rienhard Diestel.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T14:08:51.213

看看[算法图论](http://www.personal.kent.edu/~rmuhamma/GraphTheory/graphTheory.htm)

# java - Linux 启动时启动 java 程序（EC2 实例）

> ID：11809191
> 
> 赞同：2
> 
> 时间：2012-08-04T13:55:17.773
> 
> 标签：java, linux, amazon-ec2, amazon-web-services

我的服务器程序需要在 EC2 实例启动时启动。目前我只是使用以下命令从我的 SSH 启动它：

```
 java -jar ~/DocumentManager/DocumentServer-0.2.jar 
```

我尝试将其添加到 .bashrc 和 /etc/rc.local 文件中，但它们似乎仅在我 ssh 时才起作用。

任何人都知道如何制作它，以便在计算机启动时启动我的应用程序实例？

谢谢，

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:17:33.630

您可以创建这样的脚本`java_server_launch.sh`：

```
 #! /usr/bin/sh

    PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin
    JAVA=/usr/bin/java
    MY_SERVER=/home/your_username/DocumentManager/DocumentServer-0.2.jar
    USER=your_username
    /bin/su - $USER -c "$JAVA -jar $MY_SERVER &" 
```

将您的脚本放在 /etc/init.d 目录下，然后使用命令：

```
update-rc.d java_server_launch.sh defaults 
```

更多关于*update-rc.d*命令的信息，请使用`man update-rc.d`.

希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-23T09:34:10.947

在命令末尾添加 & 符号（符号 '&'）。例如，在您的情况下，`java -jar ~/DocumentManager/DocumentServer-0.2.jar &`

老问题，但我的回答可能对未来的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-23T15:53:11.560

您还可以将程序作为服务运行，该服务会在 ec2 容器重启时自动运行。以下链接对我有用：

[https://medium.com/@lizlieholleza/run-your-java-application-as-a-service-in-an-ec2-instance-amazon-linux-d7c7b4c0b2f4](https://medium.com/@lizlieholleza/run-your-java-application-as-a-service-in-an-ec2-instance-amazon-linux-d7c7b4c0b2f4)

# c# - C# 性能问题

> ID：11809192
> 
> 赞同：10
> 
> 时间：2012-08-01T16:59:28.593
> 
> 标签：c#

我刚刚参加了 IKM C# 测试。其中一个问题是：

以下哪一项提高了 C# 程序的性能？

*   A. 使用拳击
*   B. 使用拆箱
*   C. 不要使用常量
*   D. 使用空析构函数
*   E. 使用值类型而不是引用类型

最后我跳过了这个问题，我能看到的唯一可能的答案是 E。在某些情况下，值类型*可以*提供更好的性能（对于小类型：不需要取消引用，并且不在托管堆上[假设不是引用类型的成员])，但情况肯定并非总是如此。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T15:01:50.383

稍微关注一下错误的答案：

当值类型值转换为引用类型值（对象）时，就会发生装箱转换。它涉及从垃圾收集堆分配内存，创建一个对象标头，将对象标识为值类型的类型，并将值类型值位复制到对象中。这是创建类型系统错觉的转换，即值类型派生自 System.ValueType 和 System.Object。装箱转换在 .NET 1.x 程序中大量使用，因为它支持的唯一集合类型是 System.Collections 中的类，即元素为 Object 的集合。2.0 中添加的 .NET 泛型使这些类立即过时，因为它允许在 System.Collections.Generic 中创建类。它可以存储一个值而不必装箱。所以不行。

取消装箱是相反的转换，从装箱的对象值返回到值类型值。不像装箱那么昂贵，它只涉及检查装箱对象的类型是否为预期类型并复制值类型值位。它需要在 C# 中进行强制转换，并且在装箱值类型不匹配时容易引发异常。和上一个一样没有。

*用const*关键字标记的标识符是直接编译到编译器生成的 IL 中的文字值。另一种方法是*readonly*关键字。这需要访问内存来加载值，因此总是较慢。*const*标识符应该始终是私有的或内部的，当您部署更改值但不重新编译使用该常量的程序集的错误修复时，公共常量具有破坏程序的诀窍。这些程序集仍将使用旧的常量值，因为它已编译到它们的代码中。只读值不会发生的问题。所以不行。

析构函数（又名终结器）大大增加了对象的成本。垃圾收集器确保在对对象进行垃圾收集时调用终结器。但要做到这一点，它必须单独跟踪对象，这样一个对象被放在终结器队列中，等待终结器线程来执行终结器。*在下一次*GC 传递之前，该对象实际上并没有真正被销毁。您几乎总是让此类对象的类实现 IDisposable，因此程序可以及早调用终结器的职责，而不会因自动执行而给运行时带来负担。您在 Dispose() 方法中调用 GC.SuppressFinalize()。没有什么比不做任何事情的终结器更糟糕的了，所以不。

.NET 中存在值类型的原因很明确，即它们比引用类型更有效。它们的值比引用类型对象占用的内存要少得多，并且可以存储在 CPU 寄存器和 CPU 堆栈中，这些内存位置在处理器设计中得到了高度优化。它们给语言设计带来了负担，因为将它们抽象为对象是一种泄漏的抽象，它会不知不觉地吞噬 cpu 周期，特别是结构是一种困难的类型，当你试图改变它们时，它具有破坏程序的诀窍。但重要的是要避免像 Smalltalk 这样的超纯语言遭受的那种性能打击。一种开创性的 OOP 语言，其中每个值都是一个对象，并影响了大量后续的 OOP 语言。但实际上很少在任何地方使用，因为它的性能很差，没有明确的路径让硬件工程师让它与不抽象处理器设计的语言一样快。就像 C#。所以这使它成为E。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T17:06:21.983

答案很可能是 E。几乎在所有情况下，值类型都会提高性能。首先，在函数中使用值类型会创建堆栈空间，该空间甚至在调用之前就已分配，从而避免了对象分配开销。其次，在堆上创建值类型的数组时，您都避免了对象分配开销，并且数据往往更加缓存一致。

确实，在值类型的复制中存在潜在的内存带宽开销，但现代内存带宽是如此巨大，损失通常被其他节省严重压倒。此外，在处理 64 位或更小的类型时，实际上没有损失。

# ruby-on-rails-3 - 带思维狮身人面像的复杂搜索

> ID：11809195
> 
> 赞同：-1
> 
> 时间：2012-08-04T13:55:27.220
> 
> 标签：ruby-on-rails-3, thinking-sphinx

我想用思考狮身人面像做一个复杂的搜索：

搜索以下用户：-> 居住在城市（city_id 属性）-> 或有能力移动到城市（mobile_cities 关联）-> 或居住在距纬度/经度点的最大距离处，最大距离不同每个用户并设置在移动距离属性中。

现在我用 3 个不同的搜索来做到这一点，我自愿设置了一个大的 per_page 编号，然后我将 3 个结果合并到一个数组中，然后对这个数组进行分页：

```
#users living in the @city
search_set_living = search_set.merge({:city_id => @city.id })
users_living =  User.search :with => search_set_living.dup,
                                :page => 1, :per_page => 1000

#users declaring hability to move to the @city
search_set_mobile = search_set.merge({:mobile_cities_ids => @city.id })
users_mobile =  User.search :with => search_set_mobile.dup, :page => 1, :per_page => 1000

#users living at a maximum distance from the origin point(custom distance for each user, max 30km)   
search_set_around = search_set.merge({"@geodist" => 0.0..30_000.0})
users_around =  User.search :geo => [@search_latitude * Math::PI / 180 , @search_longitude * Math::PI / 180],
                                  :with => search_set_around.dup,
                                  :page => 1, :per_page => 1000
users_around_filtered = users_around.dup.delete_if{|user| (user.mobility_distance * 1000 )< user.sphinx_attributes['@geodist'] }

#merge the 3 results in a array
all_users =  (users_mobile.flatten + users_around_filtered.flatten).uniq

#look for facets and paginate the array
@facets = User.facets :with => {:user_id => all_users.map(&:id)}
@users_to_display =  all_users.paginate(:page => params[:page], :per_page => 10) 
```

这工作正常，但我不满意：-性能不太好，-我希望能够像这样对多个属性进行排序：order => "created_at DESC，@relevance DESC"

我想做完全相同的搜索，但只在一个狮身人面像的搜索中。我知道我应该使用文档中的[“OR Logic with Attribute Filters”，](http://freelancing-god.github.com/ts/en/common_issues.html#or_attributes)但我不知道如何将它与 geo_search 调用混合使用……我真的不知道该怎么做，你们能帮帮我吗？

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:50:34.447

正如您所猜测的那样，该`:sphinx_select`选项绝对是您的朋友。让我们一点一点地拼凑起来：

```
logic = [
  "city_id = #{@city.id}",
  "IN(mobile_cities_ids, #{@city.id}",
  "GEODIST(lat, lng, #{lat}, #{lng}) < (mobility_distance * 1000)"
]

User.search :sphinx_select => "*, #{logic.join(" OR ")}) AS valid",
  :with => {:valid => true} 
```

根据需要添加分页，根据需要调整属性名称（也许您的 lat/lng 属性被命名为其他名称）。我认为您不需要`IF`像在文档中那样围绕该自定义属性进行调用，但是如果事情在应有的时候不起作用，也许可以试一试。在方面调用中也应该很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-05T15:14:58.680

伟大的 ！非常感谢。我只需要更正一些语法（缺少一些括号）即可使其正常工作。我也必须添加 per_page 和 page 参数，不知道为什么。

```
logic = ["city_id = #{@city.id}",
         "IN(mobile_cities_ids, #{@city.id})",
         "GEODIST(latitude, longitude, #{@search_latitude * Math::PI / 180}, #{@search_longitude * Math::PI / 180}) < (mobility_distance * 1000)"]

search_set_logic = search_set.merge({:valid => true})
@users_to_display = User.search :sphinx_select => "*, (#{logic.join(" OR ")}) AS valid",
                 :with => search_set_logic.dup,
                 :sort_mode => :extended,
                 :order => "visibility DESC, last_login_at DESC",
                 :page => params[:page], :per_page => 10 
```

# heroku - Heroku 上的 Imagemagick

> ID：11809204
> 
> 赞同：0
> 
> 时间：2012-08-04T13:57:21.183
> 
> 标签：heroku, imagemagick, imagick

由于 GD 的某些功能在 heroku 上不可用，因此我在 heroku 上尝试了用于 php web 应用程序的 imagemagick。

我已将 builpacks 更改为此处[https://github.com/zapumal/heroku-buildpack-php](https://github.com/zapumal/heroku-buildpack-php)但它返回 php 致命错误

```
 PHP Fatal error:  Call to undefined function Imagick() 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:56:53.697

Imagick 不是 PHP 包。相反，它依赖于安装的 ImageMagick。您需要先安装它。

**编辑：**

如果您已经安装了 ImageMagick 并且它不起作用，那么[这篇文章](https://stackoverflow.com/questions/11319961/imagick-on-heroku-is-it-possible)看起来有更多详细信息。见第一个答案。

# java - 如何使用 BlackBerry SDK API 缩放图像

> ID：11809205
> 
> 赞同：2
> 
> 时间：2012-08-04T13:57:56.370
> 
> 标签：java, blackberry

有人知道为什么我的 image2 没有在 image2.scaleImage32() 方法中缩放吗？

这是我的代码：

```
public ZoomScreen setScreen(){

     map1.getBitmap().scaleInto(tempBmp, Bitmap.FILTER_BILINEAR); 
     Graphics g = Graphics.create(tempBmp); //works
     g.drawBitmap(100, 100, bitmapImage2.getWidth(), bitmapImage2.getHeight(), bitmapImage2, 0, 0); //works
     image2 = PNGEncodedImage.encode(tempBmp); //works
     image3 = image2.scaleImage32(Fixed32.toFP(100), Fixed32.toFP(200)); // does not work
     ZoomScreen screen = new ZoomScreen(image3);// works

  return screen;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:01:39.293

也许您正在将宽度和高度的绝对值传递给`scaleImage32()`方法。但这不是使用此方法的正确方法。您需要传递比例因子而不是宽度和高度的绝对值。

假设`image`是一个[EncodedImage](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/EncodedImage.html)类实例，并且`thumbnailSide`是以像素为单位的缩放图像的一侧，下面是应该为您工作的代码：

```
 final int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
        final int currentHeightFixed32 = Fixed32.toFP(image.getHeight());

        final int thumbnailSideFixed32 = Fixed32.toFP(thumbnailSide);

        final int scaleXFixed32 = Fixed32.div(currentWidthFixed32, thumbnailSideFixed32);
        final int scaleYFixed32 = Fixed32.div(currentHeightFixed32, thumbnailSideFixed32);

        image = image.scaleImage32(scaleXFixed32, scaleYFixed32); 
```

# jquery-chosen - 为什么选择的插件不更新？

> ID：11809206
> 
> 赞同：1
> 
> 时间：2012-08-04T13:57:58.210
> 
> 标签：jquery-chosen

我有模型`Dog`，`Category`它们的表格在同一页上。我正在使用[Chosen Plugin](http://harvesthq.github.com/chosen/)，当我添加一个类别时，它不会更新狗表单的类别选择。它们都是远程表单，创建方式相同，所以 new.js.erb 和 create.js.erb 基本相同：

**宠物/index.html.erb**

```
<div class="tabbable">
   <ul class="nav nav-tabs">
      <li class="active">
         <a href="#tab1" data-toggle="tab">Dog</a>
      </li>
   </ul>
   <ul class="nav nav-tabs">
      <li class="active">
         <a href="#tab2" data-toggle="tab">Category</a>
      </li>
   </ul>
   <div class="tab-content">
      <div class="tab-pane active add-dog-form" id="tab1">
         <%= render "dogs/form" %>
      </div>
   </div>
   <div class="tab-content">
      <div class="tab-pane active add-category-form" id="tab2">
         <%= render "categories/form" %>
      </div>
   </div>
</div> 
```

**狗/new.js.erb**

```
$('.add-dog-form').html('<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>'); 
```

**狗/create.js.erb**

```
$('.add-dog-form').html('<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>'); 
```

**狗/_form.html.erb**

```
<%= form_for(@dog, :remote => true) do |f| %>
   <%= f.text_field :name %>
   <%= f.select :category_ids, Category.all.collect {|c| [c.name, c.id]}, {},
        { :multiple => true, :class => "category-select" } %>
   <%= f.submit %>
<% end %> 
```

**应用程序.js**

```
jQuery( function($) {
    // Chosen Select Menu
    $('.category-select').chosen().trigger("liszt:updated");
}); 
```

还有其他人使用此插件和/或知道如何更新选择菜单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:05:27.593

在`application.js` 而不是：

```
$('.category-select').chosen().trigger("liszt:updated"); 
```

利用：

```
$('.category-select').trigger("liszt:updated"); 
```

# css - 对齐字符

> ID：11809207
> 
> 赞同：-1
> 
> 时间：2012-08-04T13:57:58.913
> 
> 标签：css

在我的联系信息中，我有几行看起来像这样。

```
Phone: 123 456
Web site: page.eu 
```

我想在分号上创建垂直对齐。我认为，一种方法是使用两个不同的 div，将它们浮动到左侧并将一个的内容设置为右对齐，另一个设置为左对齐。不过，有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:02:17.257

固定宽度的浮动 div 或表格（但不要吹嘘它，因为它不是最佳实践）

[http://jsfiddle.net/pXScG/3/](http://jsfiddle.net/pXScG/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:03:00.033

鉴于这似乎是一个联系信息列表，我建议首先使用一个列表元素，然后使用两个跨度来包含和对齐文本：

```
<ul id="contact">
    <li><span class="contactMethod">Phone</span>:<span class="contactInfo">123 456</span></li>
    <li><span class="contactMethod">Web site</span>:<span class="contactInfo">page.eu</span></li>
</ul> 
```

使用 CSS：

```
span {
    display: inline-block;
}

span.contactMethod {
    width: 30%;
    text-align: right;
}

span.contactInfo {
    width: 65%;
    text-indent: 0.5em;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pXScG/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T14:48:52.630

示例中没有分号 (;)；我想你的意思是冒号 (:)。您拥有的是一个数据表，因此 HTML 表是这里最合适的结构，如果您只需右对齐第一列，它就会提供所需的呈现。但是，最好也设置填充：

```
<style>
th { text-align: right; font-weight: normal;  padding-right: 0.3em; }
</style>
<table>
<tr><th>Phone: <td>123 456
<tr><th>Web site:<td>page.eu
</table> 
```

# objective-c - Mountain Lion 和 Xcode 4.4 未验证 App 以进行 App Store 分发

> ID：11809214
> 
> 赞同：0
> 
> 时间：2012-08-04T13:59:37.093
> 
> 标签：objective-c, ios, xcode, app-store, app-store-connect

上周我在 App Store 上发布了我的应用程序的 1.1 版本，现在必须非常快速地生产 1.1.1。上周，我在 Lion 上运行 XCode 4.3（也许是.1）。使用 XCode 的 Organizer 上传 1.1 版时没有验证问题。这周，我升级到 Mountain Lion，结果被迫升级到 XCode 4.4。我为 1.1.1 版本更改了大约 10 行代码。现在，当我尝试分发应用程序时，XCode 的 Organizer 失败，没有有用的错误消息。我尝试使用 Application Loader，这给了我错误：`The app references non-public selectors in Payload/AppName.app/AppName: instance`

从我在互联网上看到的情况来看，这很可能是因为我正在使用（正如它所暗示的那样）一个私有 API。但这不可能是正确的，我添加的唯一代码是一个新代码`BOOL`，然后将其设置为`YES`and`NO`几次。

我需要尽快进行此更新，因为它修复了与应用程序启动有关的一个很大的缺陷。任何帮助是极大的赞赏。

编辑：顺便说一句，我将我的代码恢复到 1.1，然后尝试分发它，并得到完全相同的错误消息。考虑到他们上周让它上传，iTunes Connect 现在拒绝它似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:06:46.527

这可能是苹果方面的误报。您的代码中有名为“实例”的方法吗？将它们更改为其他内容是否可以解决问题？

# c# - 如何在 ASP.Net 中更改 UnauthorizedAccessException 重定向到的位置

> ID：11809219
> 
> 赞同：1
> 
> 时间：2012-08-04T14:00:31.277
> 
> 标签：c#, asp.net, unauthorizedaccessexcepti

很简单。
我在 AuthorizationFilter 中抛出了 UnauthorizedAccessException。我希望 UnauthorizedAccessException 转到错误页面，而不是 /Account/Login 页面。
我怎样才能做出这样的改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:09:22.820

尝试在 global.asax.cs 中设置类似的东西

```
protected void Application_Error(object sender, EventArgs e)
{
    // excpt is the exception thrown
    // The exception that really happened is retrieved through the GetBaseException() method
    // because the exception returned by the GetLastError() is a HttpException
    Exception excpt = Server.GetLastError().GetBaseException();

      if(excpt is UnauthorizedAccessException)
      { 
        // redirect here
      }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:06:53.510

您可以使用多个异常处理程序

```
 try
        {
            // code here
        }
        catch (UnauthorizedAccessException)
        {
            Response.Redirect(errorPageUrl, false);
        }
        catch (Exception)
        {
            Response.Redirect(loginPageUrl, false);
        } 
```

# opengl - 片段着色器中“out”变量的名称

> ID：11809220
> 
> 赞同：5
> 
> 时间：2012-08-04T14:00:45.397
> 
> 标签：opengl, glsl, shader, fragment-shader, vertex-shader

在阅读 OpenGL SuperBible 时，我在理解最基本（平面）着色器示例中的一行时遇到了一些问题。

在第 6 章的清单 6.4 和 6.5 中，它介绍了以下两个非常基本的着色器。

6.4**顶点着色器**：

```
// Flat Shader
// Vertex Shader
// Richard S. Wright Jr.
// OpenGL SuperBible
#version 130

// Transformation Matrix
uniform mat4    mvpMatrix;

// Incoming per vertex
in vec4 vVertex;

void main(void) 
    { 
    // This is pretty much it, transform the geometry
    gl_Position = mvpMatrix * vVertex;
    } 
```

6.5**片段着色器**：

```
// Flat Shader
// Fragment Shader
// Richard S. Wright Jr.
// OpenGL SuperBible
#version 130

// Make geometry solid
uniform vec4 vColorValue;

// Output fragment color
out vec4 vFragColor;

void main(void)
   { 
   gl_FragColor = vColorValue;
   } 
```

我的困惑是它`vFragColor`在 out 声明中说，而`gl_FragColor`在 main() 中说。

另一方面，在网站的代码中，它已被更正为 'vFragColor = vColorValue;' 在主循环中。

我的问题是，除了本书中的错字之外，`out`着色器命名值的规则是什么？他们必须遵循特定的名称吗？

在 OpenGL.org 上，我发现顶点着色器外需要 gl_Position。**片段着色器有这样的东西吗？**或者只是如果只有一个输出，那么它将是缓冲区中的颜色？

当片段着色器中有多个时会发生什么？GLSL 编译器如何知道在缓冲区中使用哪一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T18:15:22.160

如[1.3 版的 GLSL 规范](http://www.cse.chalmers.se/edu/year/2010/course/TDA361/GLSLangSpec.Full.1.30.08.pdf)中所述，`gl_FragColor`不推荐在片段着色器中使用 。相反，您应该使用用户定义的输出变量，例如 `vFragColor`片段着色器中描述的变量。正如你所说，这是一个错字。

> 命名着色器值的规则是什么？

变量名称可以是您喜欢的任何名称，除非它与任何现有名称冲突。

> 当片段着色器中有多个时会发生什么？GLSL 编译器如何知道在缓冲区中使用哪一个？

当片段着色器中有多个输出时，您应该通过调用[BindFragDataLocation](http://www.opengl.org/wiki/GLAPI/glBindFragDataLocation)将插槽分配给片段着色器输出。然后，您可以通过调用[DrawBuffers](http://www.opengl.org/sdk/docs/man/xhtml/glDrawBuffers.xml)来说明哪些插槽将渲染到哪个渲染目标。

规范规定，如果您在片段着色器中定义了一个输出变量，它将被分配给索引 0 并输出 0。有关更多信息，我建议您自己[看](http://www.cse.chalmers.se/edu/year/2010/course/TDA361/GLSLangSpec.Full.1.30.08.pdf)一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:43:55.243

gl_FragColor 是 GLSL 早期版本中的原始输出变量。这是要绘制的片段的颜色。

您最初的困惑是有道理的，因为没有理由声明该`out`变量然后写入 glFragColor。

在以后的版本中，它变得可定制，这样您就可以为输出变量指定任意名称。您可以使用命令将这些任意输出映射到特定缓冲区[`glBindFragDataLocation`](http://www.opengl.org/sdk/docs/man4/xhtml/glBindFragDataLocation.xml)。

我不是 100% 肯定的，但我相信如果你在链接之前不调用这个函数，那么你的输出变量将被随机分配给缓冲区。如果您只有一个输出，则应始终将其分配给缓冲区 0。

# sql - sql查询简化，负担更轻

> ID：11809225
> 
> 赞同：0
> 
> 时间：2012-08-04T14:01:53.140
> 
> 标签：sql

我需要通过使用连接或任何其他方式尽可能简化以下查询......

```
select polid
  from polver
  where idmkey = 'idm3'
    and polid in ( select polid
                     from polver
                     where idmkey = 'idm2'
                       and polid in ( select polid
                                        from polver
                                        where idmkey='idm1' ) ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:05:54.927

您可以通过以下方式使用组：

```
select  polid
from    polver
group by
        polid
having  max(case when idmkey = 'idm1' then 1 end) = 1
        and max(case when idmkey = 'idm2' then 1 end) = 1
        and max(case when idmkey = 'idm3' then 1 end) = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T14:06:56.843

```
select polid from polver
where idmkey in ('idm1', 'idm2', 'idm3') 
group by polid
having count(distinct idmkey) = 3 
```

# android - Android CustomView 行为异常

> ID：11809226
> 
> 赞同：1
> 
> 时间：2012-08-04T14:01:53.763
> 
> 标签：android, view, visibility, custom-view

我正在创建一个应用程序，其中显示了一个相机，并在屏幕上显示了一个选项来隐藏和显示屏幕上的网格。我通过 CustomView 创建了这个网格，它工作正常。但是当我隐藏网格并单击显示时，水平线没有显示...请帮助...

**自定义视图**

```
<com.***.GridLinesView
    android:id="@+id/cameraView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" /> 
```

**OnClick 隐藏/取消隐藏按钮**

```
 @Override
        public void onClick(View v) {
            // get an image from the camera
            View grid = (View)findViewById(R.id.cameraView1);

            if(grid.getVisibility() == View.VISIBLE)
                grid.setVisibility(View.INVISIBLE);
            else
                grid.setVisibility(View.VISIBLE);
                } 
```

**自定义视图**

```
public class GridLinesView extends View {

    private Paint p;
    int width = 0;
    int height = 0;
    int pass = 0;
    int xpos = 0;
    int ypos = 0;

    public GridLinesView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        p = new Paint();
        p.setColor(Color.WHITE);
        p.setStyle(Paint.Style.STROKE);
        p.setStrokeWidth(1);
        p.setAntiAlias(true);
    }

    public GridLinesView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        p = new Paint();
        p.setColor(Color.WHITE);
        p.setStyle(Paint.Style.STROKE);
        p.setStrokeWidth(1);
        p.setAntiAlias(true);
    }

    public GridLinesView(Context context, AttributeSet attrs) {
        super(context, attrs);
        p = new Paint();
        p.setColor(Color.WHITE);
        p.setStyle(Paint.Style.STROKE);
        p.setStrokeWidth(1);
        p.setAntiAlias(true);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        width = getWidth();
        height = getHeight();
        int ratio = 5;
        if(width < 300 || height < 300){
            ratio = 3;
        }
        xpos = width / ratio;
        ypos = height / ratio;
        p.setStyle(Style.STROKE);
        for (int i = 0; i < ratio; i++) {
            p.setColor(Color.argb(100, 255, 255, 255));
            canvas.drawLine(0, (ypos * pass) + ratio, width, (ypos * pass) + ratio, p);
            pass++;

        }
        for (int i = 0; i < ratio; i++) {

            p.setColor(Color.argb(100, 255, 255, 255));
            canvas.drawLine(xpos + (xpos * i), 0, xpos + (xpos * i), height, p);

        }
    }

} 
```

任何帮助将是可观的......谢谢。

# mysql - 如何使用 select 和 join 将一个很长的 mysql 查询翻译成 zend 框架 1.11 模型

> ID：11809240
> 
> 赞同：0
> 
> 时间：2012-08-04T14:03:55.173
> 
> 标签：mysql, database, zend-framework

我有这个mysql查询：

```
SELECT 
    freeAnswers.*, 
    (SELECT `districtCode` 
         FROM `geodatas` 
         WHERE `zipCode` = clients.zipCode 
         GROUP BY `zipCode` 
         LIMIT 0, 1) as districtCode, 
    clients.zipCode, 
    clients.gender, 
    clients.startAge, 
    clients.endAge, 
    clients.mail, 
    clients.facebook, 
    surveys.customerId, 
    surveys.activityId, 
    surveys.name as surveyName, 
    customers.companyName, 
    activities.name as activityName 
    FROM freeAnswers, 
         clients, 
         surveys, 
         customers, 
         activities 
    WHERE freeAnswers.surveyId = surveys.id 
         AND surveys.customerId = customers.id 
         AND activities.id = surveys.activityId 
         AND clients.id = freeAnswers.clientId 
         AND customers.id = 1 
    ORDER BY activityName asc 
    LIMIT 0, 10 
```

该查询在我的 mysql 服务器上是正确的，但是当我尝试在 Zend Framework 1.11 模型中使用它时，我收到此错误：Mysqli prepare error: Operand should contain 1 column(s)

拜托，谁能帮我让它运行良好？

最好的问候， 埃莱顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:44:15.307

这是一些应该可以工作的代码。 `Zend_Db_Select`并没有真正提供一种在`FROM`不使用 a 的情况下从子句中的多个表中进行选择的方法，`JOIN`因此对于查询的一小部分，这对我来说有点骇人听闻。您最好的选择可能是`JOIN`在适当的情况下使用 s 重写查询。

```
 $subselect = $db->select()
                    ->from('geodatas', 'districtCode')
                    ->where('zipCode = clients.zipCode')
                    ->group('zipCode')
                    ->limit(1, 0);

    $from   = $db->quoteIdentifier('freeAnswers') . ', ' .
              $db->quoteIdentifier('clients')     . ', ' .
              $db->quoteIdentifier('surveys')     . ', ' .
              $db->quoteIdentifier('customers')   . ', ' .
              $db->quoteIdentifier('activities');

    $select = $db->select()
                 ->from(array('activities' => new Zend_Db_Expr($from)),
                        array('freeanswers.*',
                              'districtCode' =>
                                  new Zend_Db_Expr('(' . $subselect . ')'),
                              'clients.zipCode', 'clients.gender', 'clients.startAge',
                              'clients.endAge', 'clients.mail', 'clients.facebook',
                              'clients.customerId', 'clients.activityId',
                              'surveyName' => 'surveys.name', 'customers.companyName',
                              'activityName' => 'activities.name'))
                 ->where('freeAnswers.surveyId = surveys.id')
                 ->where('surveys.customerId = customers.id')
                 ->where('activities.id = surveys.activityId')
                 ->where('clients.id = freeAnswers.clientId')
                 ->where('customers.id = ?', 1)
                 ->order('activityName ASC')
                 ->limit(10, 0); 
```

我说它是hackish的唯一原因是因为这条线：

```
->from(array('activities' => new Zend_Db_Expr($from)), 
```

由于`from()`实际上只适用于一个表，因此我创建了一个`Zend_Db_Expr`并将相关性指定为表达式中的最后一个表名。如果您不传递 a `Zend_Db_Expr`，它将错误地引用逗号分隔的表名，或者如果您传递一个表名数组，它只使用第一个。当您传递`Zend_Db_Expr`没有名称的 a 时，它默认使用`AS t`在您的情况下也不起作用。这就是我按原样放置的原因。

除了提到的最后一件事之外，这将返回您提供的确切 SQL。这实际上是它返回的内容：

```
SELECT
`freeanswers`.*,
(SELECT `geodatas`.`districtCode`
    FROM `geodatas`
    WHERE (zipCode = clients.zipCode)
    GROUP BY `zipCode`
    LIMIT 1) AS `districtCode`,
`clients`.`zipCode`,
`clients`.`gender`,
`clients`.`startAge`,
`clients`.`endAge`,
`clients`.`mail`,
`clients`.`facebook`,
`clients`.`customerId`,
`clients`.`activityId`,
`surveys`.`name` AS `surveyName`,
`customers`.`companyName`,
`activities`.`name` AS `activityName`
FROM `freeAnswers`,
     `clients`,
     `surveys`,
     `customers`,
     `activities` AS `activities`
WHERE (freeAnswers.surveyId = surveys.id)
AND (surveys.customerId = customers.id)
AND (activities.id = surveys.activityId)
AND (clients.id = freeAnswers.clientId)
AND (customers.id = 1)
ORDER BY `activityName` ASC
LIMIT 10 
```

所以这将起作用，但最终您将希望使用`JOIN`而不是指定大多数`WHERE`子句来重写它。

在处理子查询和`Zend_Db_Select`时，我发现在编写最终查询之前将每个子查询编写为自己的查询很容易，只需将子查询插入它们需要去的地方并`Zend_Db`处理其余部分。

希望有帮助。

# security - 使用密码哈希加密私钥

> ID：11809242
> 
> 赞同：6
> 
> 时间：2012-08-04T14:04:17.397
> 
> 标签：security, encryption, hash

我正在开发一个需要加密敏感信息的 Web 应用程序。我的计划是使用 AES-256，其中私钥由用户密码的哈希加密。我需要存储密码的哈希值以进行身份​​验证，但它显然不能用于加密私钥。我目前的想法是使用 bcrypt 生成用于加密私钥的密钥。对于身份验证，我的想法是简单地使用 bcrypt 散列密码，然后再次使用 bcrypt 散列该散列，然后将该散列存储在数据库中。既然是一种方式，就不应该有任何方式使用存储的哈希来解密私钥吗？这样做是否有任何我可能遗漏的明显安全问题？

我的另一个想法是使用两种不同的加密算法，例如使用 bcrypt 散列来加密私钥并存储 SHA-2 散列以进行身份​​验证。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:52:56.847

我建议在这种情况下使用[PBKDF2 。](https://www.rfc-editor.org/rfc/rfc2898#section-5.2)您可以使用两种不同的盐，一种会派生对称密钥，另一种会派生要存储的密码哈希。盐应该包含区分两个不同用例的确定性部分，以及随机部分 - cf。这条评论：

> 否则，salt 应包含明确区分不同操作和不同密钥长度的数据，以及至少 8 个八位字节长的随机部分，并且该数据应由接收 salt 的一方检查或重新生成。例如，盐可能有一个额外的非随机八位组，用于指定派生密钥的用途。或者，它可以是指定有关派生密钥的详细信息的结构的编码，例如加密或身份验证技术以及从密码派生的不同密钥之间的序列号。附加数据的特定格式留给应用程序。

正如评论中提到的那样，由于典型密码的熵差，普通的加盐 SHA-2 可能还不够。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:54:52.653

不要使用哈希来加密 AES 密码。salted hash 应该只用于身份验证。当用户登录时，您有他的密码。使用此密码加密（第一次）和解密（稍后）AES 密钥，然后忘记密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T16:30:01.173

一个建议：使用两种不同的盐。当用户输入他们的密码时，将其与随机盐连接并散列以用于密码识别例程。使用*不同*的盐并再次对 AES 加密密钥进行哈希处理。根据您想要的安全程度，您也可以拉伸散列。

实际上你有：

```
storedPasswordCheck = SHA256(password + salt1);

AESkey = SHA256(password + salt2); 
```

AES 密钥当然不会被存储，而是根据需要从用户的密码中重新生成。您将需要为每个用户存储两个单独的盐，最好每个至少 128 位。

# java - JTextPane - 使插入符号正常大小？

> ID：11809243
> 
> 赞同：1
> 
> 时间：2012-08-04T14:04:38.237
> 
> 标签：java, swing, cursor, jtextpane

所以我试图让 JTextPane 中的文本双倍行距。这是我的代码：

```
 MutableAttributeSet attrs = editor.getInputAttributes();
     StyleConstants.setLineSpacing(attrs, 2);
     editor.getStyledDocument().setParagraphAttributes(0, doc.getLength() + 1, attrs, true); 
```

这样做的问题是，光标（插入符号）有三到四个行间距。如何将插入符号调整为正常大小？

这是一个屏幕截图

![在此处输入图像描述](../Images/c0b86de4d154192741ad7ba7ad83cdec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:29:24.767

尝试这个：

```
editor.setCaret(new DefaultCaret() {

    public void paint(Graphics g) {

        JTextComponent comp = getComponent();
        if (comp == null)
            return;

        Rectangle r = null;
        try {
            r = comp.modelToView(getDot());
            if (r == null)
                return;
        } catch (BadLocationException e) {
            return;
        }
        r.height = 15; //this value changes the caret size
        if (isVisible())
            g.fillRect(r.x, r.y, 1, r.height);
    }
}); 
```

# cakephp - cakePHP表加入两个表问题

> ID：11809246
> 
> 赞同：0
> 
> 时间：2012-08-04T14:05:00.480
> 
> 标签：cakephp, jointable

我是 cakePHP 新手，整个表关系的概念非常混乱！

我有 2 张桌子、能力和能力评级。能力存储带有 id 的名称列表。

```
competencies
------------
id
name 
```

用户可以从该表中选择各种能力并对其进行评分，并将其评分存储在 CompetencyRatings 表中。

```
competenceRatings
-----------------
id
competence_id
user_id
rating 
```

我希望能够获得用户没有对competitionRatings 表进行任何评级的能力名称。即，我需要能力表中的名称列表，其中 comptenceRatings 表中没有条目（对于给定的 user_id）。

我尝试了能力->hasMany->competenceRatings，competenceRatings->belongsTo->competencies 关系。

```
$competencies = $this->Competence->CompetenceRating->find('all',array('CompetenceRating.user_id' => $userId,'CompetenceRating.competence_id !=' => 'Competence.id')); 
```

但是没用！

这个结果是否需要任何其他关系？或者我可以在查找查询中使用连接条件连接表吗？

谢谢。

**编辑**

这种方法有效：

```
$options['joins'] = array(
    array(
        'table' => 'competence_ratings',
        'alias' => 'CompetenceRating',
        'type' => 'LEFT OUTER',
        'conditions' => array(
            'Competence.id = CompetenceRating.competence_id',
            'CompetenceRating.user_id' => $userId
        )
    )
);
$options['conditions'] = array( 'CompetenceRating.competence_id'=> null ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:39:51.670

尝试这个

连接表

```
$data = $this->Competence->find('all', array('joins' => array(
    array(
        'table' => 'competenceRatings',
        'alias' => 'CompetenceRating',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array('CompetenceRating.competencie_id = Competence.id')
    ),
    array(
        'table' => 'competencies',
        'alias' => 'Competence',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array(
            'Competence.id = MarkersTag.tag_id',
            'Competence.user_id' => $user_id
        )
    )
))); 
```

# java - 位图总是在android中返回null

> ID：11809251
> 
> 赞同：1
> 
> 时间：2012-08-04T14:05:31.113
> 
> 标签：java, android, bitmap, null, gallery

我一直在尝试制作一个小画廊，而位图总是返回 null。代码是这样的：

```
 public View getView(int position, View convertView, ViewGroup parent) {

        ImageView i = new ImageView(mContext);
        //Toast.makeText(getApplicationContext(),imgArray2.length+ " Image path from gallery : " + imgArray2[position], Toast.LENGTH_SHORT).show();
        //Bitmap bitmap = BitmapFactory.decodeFile(imgArray2[position]);
        //Uri uri = Uri.parse(imgArray2[position]);
        //Bitmap bitmap = decodeFile(new File(uri.toString()).getAbsoluteFile());
        //Bitmap bitmap = BitmapFactory.decodeFile(uri.toString());
        //int imgID = getResources().getIdentifier(path, "drawable", "mypack.pack");
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 15;
        Bitmap bitmap = BitmapFactory.decodeFile(imgArray2[position], options);
        //i.setImageResource(imgArray2[position]);
        i.setImageBitmap(bitmap);
        //Uri uri = Uri.parse(imgArray2[position]);
        Toast.makeText(getApplicationContext(), "Image path from gallery : " + imgArray2[position], Toast.LENGTH_SHORT).show();
        //i.setImageURI(Uri.parse(imgArray2[position]));
        i.setLayoutParams(new Gallery.LayoutParams(170, 170));
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setBackgroundResource(mGalleryItemBackground);
        return i; 
   } 
```

正如您从注释掉的代码中看到的那样，我一直在尝试很多选项。`setImageURI`工作，但我需要按比例缩小图像，因为我有很多。图片在sd卡里。我检查了图像的路径，它是正确的。这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:20:26.267

你分析过日志吗？有时当图像太大而无法解码时，Dalvik VM 会拒绝内存请求，从而导致返回空图像。

# sql - 部门名称（含员工姓名），员工人数超过 2 人，工资高于各部门平均工资的 90%

> ID：11809252
> 
> 赞同：1
> 
> 时间：2012-08-04T14:05:36.127
> 
> 标签：sql, oracle

我正在尝试生成一个 SQL 查询来查找部门名称（带有员工姓名），其中有超过 2 名员工**的**工资大于相应部门平均工资的 90%。我的 SQL 代码运行良好，没有语法错误，但输出给了我额外的数据。表如下

```
琼斯会计 3000
钢铁会计 2500
威尔逊研究 3000
沃尔夫研究 2500
李研究2400
兰开斯特销售额 2000
杰克逊销售额 2500
费希尔销售额 3000
亚当斯 IT 2000
米勒 IT 1000
斯科特 IT 2500
史密斯 IT 2900
国王行政 5000
约斯特执行 4500
克拉克执行官 4000

```

我的代码如下。

```
Select department_name , employee_name 
from department d , employee e 
where e.department_id = d.department_id
and (SELECT COUNT(*) 
     FROM Employee E 
     WHERE E.department_ID = D.department_ID) > 2    
    and salary > 
    0.9*(SELECT ROUND(AVG(salary),2)
    FROM employee e_inner
    WHERE e_inner.department_id = e.department_id); 
```

我注意到我的代码返回了超过 2 名员工**且**薪水 > 部门平均薪水 90% 的部门的值。而我正在寻找拥有超过 2 名员工且**工资**超过部门平均工资 90% 的部门

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:16:44.760

我认为应该这样做：

```
select *
from (
  select department_name, 
         employee_name,
         sum(case when salary > avg_dept_sal * 0.9 then 1 else 0 end) over (partition by department_id) as greater_count
  from (
     select d.department_name,
            e.department_id,
            e.employee_name,
            e.salary,
            count(*) over (partition by e.department_id) as dept_count,
            avg(salary) over (partition by e.department_id) as avg_dept_sal
     from employee e
       join department d on e.department_id = d.department_id
  ) t1
) t2
where greater_count  >= 2 
```

这将返回这些部门的所有员工。如果您只想查看那些薪水实际上大于 90% 的员工，则需要在外部 where 子句中添加另一个条件以仅选择这些员工。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T04:42:18.460

下面所述的查询将在不使用任何分析的情况下根据需要给出结果。简单易懂，就像英语一样。

**

*   *
*   将 T 设为（从员工 e1 中选择 empname、deptno、salary，其中
    薪水 >（从员工 e2 中选择 avg(salary)*0.9 where
    e2.deptno=e1.deptno group by deptno with count(empname)>2)）选择 T。 empname，deptname，来自 T 的薪水，
    T.deptno=department.deptno 的部门；

*

**

我在 Oracle 数据库上成功执行了这个查询。

# javascript - 如何让 Backbone.js 集合仅存在于内存中（不持久化）？

> ID：11809263
> 
> 赞同：3
> 
> 时间：2012-08-04T14:07:33.397
> 
> 标签：javascript, collections, backbone.js

使用 Backbone.js，我使用 Collections 在客户端和 Ruby 服务器之间获取和同步数据。这很好用。

现在我也想用它来将数据存储在内存中（在目前的情况下，它将是购物车中的文章集合）。

有没有办法做到这一点，而无需在服务器或本地存储中持久化数据，即。收藏只存在于记忆中吗？

每当我尝试将集合的 url 属性设置为 null 值时，我都会收到*Uncaught TypeError: Cannot call method 'create' of null*。所以......我想这不是正确的方法！

如果这不可能，那么让 server 和 localStorage 在同一个应用程序中处理不同类的最佳设计是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:47:10.117

一开始很容易，只是不要`fetch()`用来填充 Collection`reset()`而是使用。检查[reset() 文档](http://backbonejs.org/#Collection-reset)。

但也许你开始遇到问题`Collection.create()`，`Model.destroy()`等等。所以你必须小心使用这种方法..也许你可以使用`Collection.add()`而不是`Collection.create()`，但我看不到好的替代品`Model.destroy()`。

我认为解决您的问题的最优雅的方法应该是`sync()`为您的内存 Collection 和 Model 重写方法。

这是一个非常猜测，写在空气中：

```
// code simplified and no tested
var MemoryCollection = Backbone.Collection.extend({
  sync: function( method, model, options ){
    options.success.apply();
  }
}) 
```

但也许它可以帮助你开始朝这个方向努力。

如果这有效，您仍然必须使用`Collection.reset()`而不是`Collection.fetch()`.

# iphone - 一个视图控制器中的两个表视图 - 推送任何视图控制器都不起作用

> ID：11809264
> 
> 赞同：0
> 
> 时间：2012-08-04T14:07:39.070
> 
> 标签：iphone, ios, uitableview, tableview

我在一个视图控制器中有两个表视图。

他们工作得很好！但他们并没有推动任何风险投资。

在我的主视图控制器中的 -(void) viewDidLoad 方法下：

```
horizontalViewController = [[HorizontalViewController alloc] init];

verticalViewController = [[VerticalViewController alloc] init];

[horizontalTableView setDataSource:horizontalViewController];

[verticalTableView setDataSource:verticalViewController];

[horizontalTableView setDelegate:horizontalViewController];

[verticalTableView setDelegate:verticalViewController];

horizontalViewController.view = horizontalViewController.tableView;

verticalViewController.view = verticalViewController.tableView; 
```

我能做些什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:54:28.670

参考以下代码。如果你想使用 pushViewController 方法。你必须有一个 NavigationViewController。所以，你的结构有点复杂。一个 ViewController 有两个 TableViewController。一个 ViewController 没有 NavigationController。NavigaitonViewController 在运行时必然属于应用程序，因为它应该被配置。

**TwoTableViewsAppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    UINavigationController *naviController = [[[UINavigationController alloc] initWithRootViewController:viewController] autorelease];
    [window setRootViewController:naviController];
    [window makeKeyAndVisible];

    return YES;
} 
```

**TwoTableViewsViewController.m**

```
- (void)viewDidLoad {

    if (firstController == nil) {
        firstController = [[FirstTVContoller alloc] init];
    }
    if (secondController == nil) {
        secondController = [[SecondTVController alloc] init];
    }

    [firstTable setDataSource:firstController];
    [secondTable setDataSource:secondController];

    [firstTable setDelegate:firstController];
    [secondTable setDelegate:secondController];

    firstController.view = firstController.tableView;
    secondController.view = secondController.tableView;

    firstController.rootViewController = self;
    secondController.rootViewController = self;

    [super viewDidLoad];
} 
```

**FirstTVContoller.h , SecondTVController.h**

```
#import <Foundation/Foundation.h>

@interface FirstTVContoller : UITableViewController <UITableViewDataSource, UITableViewDelegate>{
    NSMutableArray *items;
}

@property (nonatomic, retain) UIViewController *rootViewController;

@end 
```

**FirstTVContoller.m , SecondTVController.m**

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    VerticalDetailViewController *verticalDetailViewController = [[VerticalDetailViewController alloc] initWithNibName:@"VerticalDetailViewController" bundle:nil];
    [[self.rootViewController navigationController] pushViewController:verticalDetailViewController animated:YES];

} 
```

# testing - Selenium RC - t.replace 不是函数

> ID：11809265
> 
> 赞同：3
> 
> 时间：2012-08-04T14:07:41.307
> 
> 标签：testing, selenium

[为 Godman 编辑] 我正在开发一个用 PHP 编写的基于 Web 的应用程序。我正在使用 Selenium RC 通过浏览器在此应用程序生成的网页上运行测试。

我刚刚升级到 Firefox 14，所以我不得不升级到 Selenium RC 2.25.0。

现在我在使用 htmlSuite 运行测试时看到了这个错误：

> 命令执行失败。[请在https://groups.google.com/forum/#!forum/selenium-users](https://groups.google.com/forum/#!forum/selenium-users)中搜索用户组，以 获取日志窗口中的错误详细信息。错误信息是：t.replace 不是函数

执行的命令是：

```
clickAndWait    //a[text()='! selenium test customer'] 
```

如您所见，它并没有做任何太棘手的事情 - 只需单击一个链接。测试在 IDE 中运行良好，只是通过 RC 运行时出现问题。

在组中搜索仅发现可追溯到 selenium 版本 1 的真正旧线程。有什么想法吗？

[编辑]上周我每天都运行几次有这些问题的测试——而且它似乎并没有每次都像这样失败。这看起来像是一个随机问题。以前有人见过这种情况吗？

[在赏金让我没有答案后编辑]另一个失败的例子是：

```
clickAndWait   css=a.edit_company 
```

同样的调用在同一个测试的早期工作正常，在同一个页面上。

[编辑] 现在我用一个完全独立的命令看到了同样的错误：

```
type    id=Address1     Address1 
```

有人对此有什么建议吗？任何方式我什至可以调试正在发生的事情（我在 IDE 中根本看不到这个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:25:29.963

我对 clickAndWait 不是很熟悉。我个人更喜欢点击然后做我自己的自定义等待。

尝试单击并添加一个 Thread.Sleep(5000) 或类似的东西，看看错误是单击还是等待部分的结果。

如果是等待部分，那么我的建议与点击部分不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:17:40.627

我在各种平台上都看到过类似的问题。它对我来说总是有点随机，所以我不使用 clickandWait。一般来说，做一个简单的点击要可靠得多，然后等待特定的条件。你可以做一个waitforpageload，但这对我来说也不可靠，所以我更喜欢waitfortextpresent和waitforelementpresent之类的东西。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-17T20:04:28.980

Usually, this kind of error would occur if you are dealing with something that is not a string. Could you just make sure that you are dealing with strings only?

2 possibilities where it is arising from:-

1.  When text() is executed -> it might be dealing with a non-string
2.  a[expression] -> the expression(text() = '! selenium test customer') when evaluated to False/True might be the problem because if a is a Map/array, the corresponding key should be a string and not a bool, probably.
3.  text()='! selenium test customer' -->> is it an assignment operation? if yes, make sure that text() returns a lvalue or a mutable object (based on the language you are using selenium rc with)

# mysql - 用于大型数据集的 MySQL 和 Memcached？

> ID：11809266
> 
> 赞同：0
> 
> 时间：2012-08-04T14:07:53.720
> 
> 标签：mysql, sql, dataset, memcached

对于一个客户，我目前正在研究对其数据库结构的改进。

我的客户在他们的网站上提供假期出租。在他们的首页上，他们有一个搜索功能，该功能将查询发送到 MySQL 数据库架构（Master-Master setup），该架构会针对客户感兴趣的所有度假租赁回答该查询。

由于公司的发展和服务器负载的增加，搜索查询当前运行时间长达 10 多秒。主要是因为查询以 ORDER BY 结尾，这导致 MySQL 创建一个临时表并对所有数据进行排序，一个平均搜索查询可以返回多达 20k 的度假屋。当然，我们正在做的一件事是调查查询，重写它们并将索引放在需要的地方。不幸的是，在这种情况下，我们无法获得更多性能。这就是为什么我们正在研究在 MySQL 之上实现 Memcached 以将这些大型数据集缓存在内存中以便更快地检索。不幸的是，查询返回的数据集非常大，这使得 Memcached 在这一点上没有那么有效。MySQL 返回的数组当前大约有 15k 行，每行大约有 60 个值。Memcached 之所以有趣，是因为我们想大幅改进搜索功能，并降低 MySQL 平台的负载。这将使其更具可扩展性。

我想知道是否有人熟悉（长期）在 Memcached 中缓存 MySQL 数据并使其对大型数据集更有效？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:57:35.180

Memcache 用于存储键值对，而不是用于存储大量数据。它会起作用吗？是的。当然会的。但是随着你们要投入多少数据，你很快就会耗尽内存并最终访问数据库，因为你的搜索结果可能会经常改变。请记住，仅仅因为它是 memcache 并不意味着它不必通过 web 套接字连接到（很可能）不同的机器。您的问题似乎是您将 MySQL 用于它从未设计好的东西，即它用作搜索引擎。无论您优化了多少事情，您所做的只是一次将天花板提高一英寸。

我可以把这篇文章放在“你需要优化 MySQL 参数以便它不必创建那些临时表”的方向上，但我假设你已经研究过了并继续前进。

我的建议是你在 MySQL 之上实现一些东西来处理搜索。在我自己寻求快速搜索的过程中，这些是我最重视的解决方案：

狮身人面像：[http](http://sphinxsearch.com)
://sphinxsearch.com Solr：[http](http://lucene.apache.org/solr)
: //lucene.apache.org/solr Elasticsearch：[http ://www.elasticsearch.org](http://www.elasticsearch.org)

您会在 StackOverflow 上找到大量资源，其中哪些更好更快，哪些不是。出于我们的目的，我们为我们的一个项目选择了 Elasticsearch，为另一个项目选择了 Solr。

# websocket - 我如何知道 websockets 的连接是否有效？

> ID：11809267
> 
> 赞同：22
> 
> 时间：2012-08-04T14:08:03.977
> 
> 标签：websocket, dart

我有一个 webapp，它在浏览器中运行。该 webapp 连接到使用 websockets 的服务器。所以服务器和我的客户端/浏览器之间的通信是基于 websockets 的。如果服务器上发生了一些神奇的事件，一些 web 服务会向我的 webapp 发送一个新的 XML / JSON 并显示新的数据。

但是，作为客户端/浏览器，我如何知道连接是否仍然存在？假设我在大约 30 秒内没有得到任何新的 XML。我怎么知道连接是否关闭/断开/服务器脱机或一切正常，但在服务器本身上没有发生新的魔术事件。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-17T19:47:18.010

websocket 连接对象有一个`readyState`字段，它将告诉您连接是否仍处于活动状态[（来自 dart 文档）](http://api.dartlang.org/docs/continuous/dart_html/WebSocket.html)。readyState 可以是

```
0 - connection not yet established
1 - conncetion established
2 - in closing handshake
3 - connection closed or could not open 
```

`close`如果这是您想要处理的事情（尝试重新连接等），您还可以为 websocket 事件定义一个事件处理程序。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-04T14:43:42.710

3种方式：

*   依赖 TCP 检测连接丢失，最终会在 JS 的 onclose 事件中弹出
*   从服务器发送 WebSocket pings .. 浏览器将回复 WS pongs，在客户端也可能更可靠地检测到连接丢失
*   从浏览器向服务器发送应用级心跳，服务器需要有逻辑才能回复。您无法从浏览器触发 WS pings（在 JS 中）

# xcode - scrollRangeToVisible 在刷新之前不会更新 contentOffset

> ID：11809268
> 
> 赞同：1
> 
> 时间：2012-08-04T14:08:12.723
> 
> 标签：xcode, scroll, uitextview

我在 UITextView 上调用 scrollRangeToVisible 以滚动到顶部。然后我询问它的 contentOffset，它返回为 (0,0)。但是，在屏幕刷新后，contentOffset 会返回为 (0,8) - 可能与文本的字体有关。并且 (0,8) 是正确的值，因为如果我对其进行硬编码，它适用于我的应用程序的其余部分。我的问题是我需要在拨打电话后立即获取 (0,8)滚动范围到可见。也许它不存在，因为它需要屏幕刷新 - 如果是这样，我如何强制刷新并立即返回以进行进一步处理。或者，它可能正在为 scrollRangeToVisible 设置动画，因此当我获得 contentOffset 时，动画就在开始时。那么如何停止动画呢？

```
NSRange start = NSMakeRange(0,1);
[self.recipe_view scrollRangeToVisible:start];
start_scroll = self.recipe_view.contentOffset; 
```

# java - 在 android 的 AsyncTask 中创建额外的线程并使用 ExecutorService 更新 UI，我做错了吗？

> ID：11809270
> 
> 赞同：1
> 
> 时间：2012-08-04T14:08:27.917
> 
> 标签：java, android, multithreading

我正在开发一个 Android 应用程序，并且我有一个 Activity，我在其上显示两个 TableLayout 的顶部。第一个 TableLayout 包含一个比赛的记分牌（类型 1），第二个是另一个比赛的记分牌（类型 2）。

我从同一个 XML 布局文件中扩充了这两个 TableLayout。我用来自 doInBackground() (AsyncTask) 的数据填充它们。但是，填充部分非常繁重，因此我将其放入自定义同步方法（在 AsyncTask 类中）并将膨胀的 TableLayout 对象作为参数传递给该方法。

我使用 ExecutorService 对象从 do​​InBackground() 方法调用所述方法。这个 ExecutorService 对象是用 Executors.newSingleThreadExecutor() 创建的。我将第一个方法调用放在一个 Runnable 中，将第二个方法调用放在另一个 Runnable 中，并在这些可运行对象上触发 ExecutorService.execute()。

在该方法中，我通过在传入的 TableLayout 对象参数上调用 findViewById() 并在这些视图上调用 TextView.setText() 等方法来访问 UI 元素。这在大多数情况下都可以正常工作，但我开始看到一些例外情况，例如

```
ERROR/AndroidRuntime(409): FATAL EXCEPTION: pool-9-thread-1
    android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

和

```
ERROR/AndroidRuntime(378): FATAL EXCEPTION: pool-2-thread-1
    java.lang.NullPointerException 
```

这让我相信我必须以难以置信的倒退来做这件事。我将在下面包含一个简化的代码片段，以帮助描述我目前正在做的事情：

```
class AddRacesTask extends AsyncTask<Void, View, Void> {
    synchronized void populateTable(ArrayList<Race> data, TableLayout table) {
       TextView headerText = table.findViewById(R.id...);
       headerText.setText("Header");

       for(Race race : data) {
          TableRow row = getLayoutInflater().inflate(R.layout....);

          TextView pos = row.findViewById(R.id....);
          pos.setText(race.getPos());

          TextView person = row.findViewById(R.id....);
          person.setText(race.getPerson());

          // etc.
          // etc..
          // etc...

          table.addView(row);

       }

       publishProgress(table);

    }

    @Override
    private Void doInBackground(Void... voids) {
       ExecutorService executor = Executors.newSingleThreadExecutor();

       executor.execute(new Runnable() {
          @Override
          public void run() {
             TableLayout raceType1Layout = getLayoutInflater().inflate(R.layout...);
             populateTable(data, raceType1Layout);
          }
       });

       executor.execute(new Runnable() {
          @Override
          public void run() {
             TableLayout raceType2Layout = getLayoutInflater().inflate(R.layout...);
             populateTable(data, raceType1Layout);
          }
       });
    }

    @Override
    protected void onProgressUpdate(View... values) {
       if(values[0] instanceof TableLayout) {
          container.addView(values[0]);
       }
    }
} 
```

我欢迎任何反馈。此外，如果您需要更多内容，我很乐意发布我的实际源代码，但我认为简化和干净的版本会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:12:24.493

您需要实现一个自定义适配器，用 Race 对象填充您的自定义视图。您在后台使用自定义线程或 AsyncTask 接收数据，并分别通过 Handler 或 onPostExecute 方法传递给 UI 线程。然后，您可以调用 Adapter.clear 方法和之后

```
for(Race r: ArrayList<Race>)
Adapter.add(r) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:24:37.203

在您完成 AsyncTask 中的工作后，可能会建议您通过 Handler 更新您的 UI。这是 AsyncTask/Thread 之间的消息应如何与 UI 线程通信的标准。

> 这样做的原因是因为不允许您在不是**主**UI 线程的线程中访问 UI 元素。

您可以使用的另一种方法`runOnUiThread`是 Activity 类中可用的方法。然而; 我建议使用处理程序。

# magento - 更新到 1.7 后无法在 Magento 中编辑类别

> ID：11809272
> 
> 赞同：3
> 
> 时间：2012-08-04T14:09:03.720
> 
> 标签：magento, magento-1.7

从 Magento 1.6 更新到 1.7 后，我无法再在生产服务器上编辑类别。

似乎是 ajax POST URL 已损坏：

虽然 ajax 调用在本地机器上运行良好，例如：

```
http://local.my-domain.de/index.php/admin/catalog_category/edit/key/fcc2335e931e8ec4236be7da67156087/id/7/?isAjax=true 
```

他们搞砸了

```
http://my-domain.de/index.php/admin/catalog_category/edit/key/1ac1f1e5f75e665a2fd06eca4569d662/?admin%2Fcatalog_category%2Findex%2Fkey%2F1ed297c236a0c9df5530952aaf7e0618%2F=id/7/&isAjax=true 
```

在生产服务器上，导致用于编辑类别的 ajax 调用停止工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-24T11:20:17.867

从 Apache 2.2 切换到 Nginx 1.4.2 后，我在 Magento CE 1.7.0.2 上遇到了这个确切的错误。

在您的服务器 (Vhost) 文件中，`@handler`根据以下内容更改定义：

```
location @handler { 
    # rewrite ^(.*) /index.php?$1 last;
    rewrite / /index.php;
} 
```

并添加以下定义`php`（除了您可能拥有的任何其他定义）：

```
location ~ \.php/ { 
    rewrite ^(.*\.php)/ $1 last;
} 
```

这为我解决了问题。完全归功于@isawk： http: [//www.magentocommerce.com/boards/viewthread/303318/#t421375](http://www.magentocommerce.com/boards/viewthread/303318/#t421375)的原始答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T21:53:37.027

由于这似乎与我们的托管环境中的一些奇怪的服务器设置有关，以下是解决此问题的解决方法：

复制`/app/code/core/Mage/Core/Model/Url.php`

到`/app/code/local/Mage/Core/Model/Url.php`

从第 997 行更改

```
if ($query) { 
```

到

```
if ($query && strpos($query, 'catalog_category') === false ) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T19:20:36.483

您的 .htaccess 文件中是否有任何可能修改 URL 的重写规则？看起来一个 HTML 编码的类别链接正在添加到您的 URL 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T09:11:56.963

当您更新 magento 版本并且一切正常且按预期工作时，但目录/类别。当您无法从管理面板编辑/删除类别并在控制台中检查您的 ajax 请求时。

**解决方案：-**

复制**/app/code/core/Mage/Core/Model/Url.php**

到**/app/code/local/Mage/Core/Model/Url.php**

在**magento 1.9**中更改行号 1016另一个搜索“if ($query)”

```
if ($query) {
    $mark = (strpos($url, '?') === false) ? '?' : ($escapeQuery ? '&amp;' : '&');
    $url .= $mark . $query;
} 
```

取代

```
//if ($query) {
if ($query && strpos($query, 'catalog_category') === false ) {
    $mark = (strpos($url, '?') === false) ? '?' : ($escapeQuery ? '&amp;' : '&');
    $url .= $mark . $query;
} 
```

或者

```
if (!$query) {
        $mark = (strpos($url, '?') === false) ? '?' : ($escapeQuery ? '&amp;' : '&');
        $url .= $mark . $query;
    } 
```

现在刷新 Magento 缓存并刷新页面

# c# - C# int.TryParse("3",out tst) AND Convert.ToInt32("3") 返回 0x00000003 而不是 3 它是什么？

> ID：11809274
> 
> 赞同：1
> 
> 时间：2012-08-04T14:09:09.110
> 
> 标签：c#, asp.net

我所有的代码都可以正常工作，直到我做了一些我现在无法跟踪的更改。当我调试我的代码时，我可以看到转换返回十六进制而不是数字。我不知道它为什么会发生或什么会导致这种情况。请问有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T14:17:23.443

这是一个 VS 功能，您可以禁用它：

![描述](../Images/5342b70c1437c1e732f0c6e0dbd2226d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T14:12:53.867

您正在查看调试器中的值。整数值不存储“十六进制”甚至“十进制”。3 以二进制形式存储，但根据您的调试器设置进行查看。

您可以通过右键单击[Watch 或 Immediate](https://stackoverflow.com/questions/3354453/visual-studio-debugger-displaying-integer-values-in-hex)视图并取消选择十六进制显示来禁用十六进制查看。

# c - 我必须使用 getchar(); 两次结束程序

> ID：11809275
> 
> 赞同：1
> 
> 时间：2012-08-04T14:09:09.813
> 
> 标签：c

> **可能重复：**
> [为什么 getchar() 不等我按 Enter 键？](https://stackoverflow.com/questions/1391548/why-doesnt-getchar-wait-for-me-to-press-enter)

我继续学习 C，在这个阶段我有一些不清楚的地方。当我写一个程序时，`printf();`最后有几个，我要求用户按 Enter 键完成程序，我必须写`getchar();`两次，因为当我写一次时它不起作用。我`getchar();`只在程序结束时使用，其他地方都没有。

我在 Ubuntu 上工作。我用C写。

这是我的最新作品：

```
#include<stdio.h>
main()
{
int m,n,r,k,q,l;
printf("This program will help you to find GCD & LCM of 2 non-negative integers\n");
printf("Now, you'll be asked to enter your integers, press Enter to continue");
getchar();
printf("Enter first integer:");
scanf("%i", &m);
printf("Enter second integer:");
scanf("%i", &n);
while(m<0 || n<0)
{
printf("The integers cannot be negative! You'll be asked to enter integers again.\n");
printf("Enter first integer:");
scanf("%i", &m);
printf("Enter second integer:");
scanf("%i", &n);
}
while(m==0 && n==0)
{
printf("Both of the integers cannot be zero at the same time! You'll be asked to enter integers again.\n");
printf("Enter first integer:");
scanf("%i", &m);
printf("Enter second integer:");
scanf("%i", &n);
}
if(n>m)
{
int b;
b=n;
n=m;
m=b;
}
r=m%n;
if(r==0)
{
printf("The GCD of these integers is %i\n", n);
printf("The LCM of these integers is %i\n", m);
printf("Press Enter to finish");
getchar();
getchar();
return 0;
}
k=n%r;
while(k>0)
{
r=k;
k=q;
}
l=(m*n)/r;
printf("The GCD of these integers is %i\n", r);
printf("The LCM of these integers is %i\n", l);
printf("Press Enter to finish");
getchar();
getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:43:05.243

你需要 2 的原因`getchar()`是因为

1.  最后一个`scanf()`调用`ENTER`在缓冲区中等待
2.  第一个`getchar()`“吃了”`ENTER`
3.  第二个`getchar()`等待输入。

* * *

要正确处理用户输入，请使用`fgets()`更`sscanf()`简单的`scanf()`. 为这些函数定义一个缓冲区，例如

```
char buffer[1000]; 
```

然后`scanf()`用这对替换你的电话

```
fgets(buffer, sizeof buffer, stdin);
sscanf(buffer, "%d", &n); 
```

* * *

将来您可能还想检查返回值`sscanf()`以检测无效输入，例如`foo42``ENTER`

```
if (sscanf(buffer, "%d", &n) != 1) /* invalid input */; 
```

* * *

编辑（使用`strtol()`而不是`sscanf()`更好——感谢@Scooter）

```
char buffer[1000];
char *err;
/* ... */
fgets(buffer, sizeof buffer, stdin); /* error checking ommited */
n = strtol(buffer, &err, 10);
/* error checking ommited */
/* ... */ 
```

# android - 无法处理 webservice 方法调用中的线程？

> ID：11809276
> 
> 赞同：1
> 
> 时间：2012-08-04T14:09:16.150
> 
> 标签：android, multithreading, ksoap2

我必须在我的按钮单击事件中编写上面的代码。webservice 工作正常。webservice 方法返回一个字符串。thatString 等于成功转到下一个布局。它工作正常。但其他部分不起作用。吐司例外

```
final SoapSerializationEnvelope envelope1 = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope1.setOutputSoapObject(request1);

          //msg.setText("hi");
            envelope1.dotNet = true;

            final Thread webser=new Thread(){
                public void run()
                {
                    try {
                        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                        System.out.println("four and Object value is : " +androidHttpTransport);
                        System.out.println("four and URL : " +URL);
                        //this is the actual part that will call the webservice

                        androidHttpTransport.call(SOAP_ACTION, envelope1);

                        System.out.println("four a");
                        // Get the SoapResult from the envelope body.   

                        SoapObject result1 = (SoapObject)envelope1.bodyIn;

                        if(result1 != null)
                        {
                              //Get the first property and change the label text

                            status=result1.getProperty(0).toString();
                            if(status.equalsIgnoreCase("success"))
                            {

                                Intent home=new Intent(LoginActivity.this,MainActivity.class);
                                startActivity(home);

                            }
                            else                                

                            {  
                                Thread.sleep(1000);

                            Toast.makeText(LoginActivity.this,"Enter Valid Username/Password", Toast.LENGTH_LONG).show();
                             }

                        }

                        else
                        {

                             System.out.println("nodata");
                        }
                  } catch (Exception e) {
                        e.printStackTrace();
                        System.out.println("Exception" +e);
                  }
                }

            };
            webser.start();  

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:06:53.130

您正在`UI`从后台线程访问。像这样修改 UI`Thread`使用..

```
LoginActivity.this.runOnUiThread(new run Runnable() {

        @Override
        public void run() {
            Toast.makeText(LoginActivity.this,"Enter Valid Username/Password", Toast.LENGTH_LONG).show();

        }
    }); 
```

而且不要抓`(Exception e)`。这是不好的编程习惯。:)

# c# - 有一个空的while循环有什么影响？

> ID：11809277
> 
> 赞同：4
> 
> 时间：2012-08-04T14:09:16.220
> 
> 标签：c#, performance, loops, while-loop

我知道这可能是一个“愚蠢”的问题，但有时，我只想循环直到条件为假，但我不喜欢保持循环为空。所以*而不是*：

```
Visible = true;
while(IsRunning)
{
}
Visible = false; 
```

我通常*更喜欢*：

```
while(IsRunning)
{
    Visible = true;
}
Visible = false; 
```

但是，我有点担心线路上到底发生了什么`Visible = true;`。即使它是*多余*的，运行时是否会继续执行该语句？这样做是否*可取？*许多“代码增强”插件不喜欢空的while循环，我真的不明白为什么。

***所以：***

*   **有一个空的while循环有什么问题吗？**

*   **有一个如上所示的循环是否会对性能产生影响？**

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T14:17:49.573

这称为忙或旋转等待。

主要问题是，您正在阻塞正在运行此 while 循环的线程。如果这个线程是GUI线程，那么它会导致冻结和不负责任的GUI。是的，这会导致性能损失，因为编译器和操作系统都不知道他们是否可以以某种方式优化这个 while 循环。

只需尝试像这样进行单循环，看看你的 CPU 的一个核心是如何以 100% 运行的。

正确的方法是使用异步编程，当前一个操作完成运行时，您的代码会通过事件或语言构造（如等待）得到通知。

但它通常用于低级系统或语言。.NET 4.0 引入了[SpinWait](http://msdn.microsoft.com/en-us/library/ee722114.aspx)构造，用作高效的线程同步。

关于你的问题。我相信两者都不应该使用。它们对于代码的调试、性能和清晰度都有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:18:16.290

这样做不是一个好主意。启动应用程序，当它进入这个循环时，在任务管理器中查看 CPU 使用率。您会注意到其中一个 CPU 内核将满负荷运行。这意味着能源被浪费了，而其他一些可能需要执行的程序将没有尽可能多的 CPU 时间。

有几种方法可以解决这个问题。这里最简单的解决方案是让线程在每次循环过程中休眠几毫秒，如下所示：

```
Visible = true;
while(IsRunning)
{
    Thread.Sleep(50 /* millisec */);
}
Visible = false; 
```

更好的解决方案将取决于您的程序到底在做什么。如果它在另一个线程中加载某些东西，最好使用[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)，或通过锁定，或其他[线程同步机制](http://msdn.microsoft.com/en-us/library/ms173179.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T14:20:51.903

不要在主（UI 线程）中执行此操作。尝试查找或制作事件（例如 IsRunningChanged）。

如果您需要在线程中等待某些东西，最好使用 EventWaitHandle [http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.eventwaithandle.aspx](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.eventwaithandle.aspx)

但是，如果您需要等待布尔值，您可以这样做

```
while(IsRunning)
{
    Thread.Sleep(10);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T14:25:35.553

出色地..

*   是的，一个空的 while 循环通常被视为一件坏事，尽管也有一些有用的情况。
*   是的，CPU 将执行您的冗余语句
*   不，你不应该做那样的事情。它使用 100% 的 CPU，这没有用。

有替代解决方案，但在不了解您的程序的情况下很难给出建议。但是，您可能想研究[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)并通常使用阻塞方法（在单独的线程中调用它们）而不是非阻塞方法。

阻塞方法暂停你的线程并将控制权交还给操作系统，这将（希望）对 CPU 时间做一些有用的事情，比如让部分 CPU 进入睡眠状态，节省电力和减少热量输出。

# c# - 资源中的 Environment.CurrentDirectory

> ID：11809282
> 
> 赞同：0
> 
> 时间：2012-08-04T14:10:36.293
> 
> 标签：c#

我正在尝试将此字符串放入我的资源中：

```
Environment.CurrentDirectory + \\Server Files\\ 
```

但是每当我加载字符串时，Environment.CurrentDirectory 部分都会显示为普通文本，而不是当前目录路径:(。

例子：

```
Console.WriteLine(Resources.ServerFilesLocation); // Doesn't give me a path, but just plain text. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:43:35.540

任何运行时环境值都不能作为字符串存储在资源中。你应该做的是在它们之间创建一个层。就像是：

```
static class ResourceManager
{
    public static string ServerFilesLocation { 
        get { 
            return String.Format(Resources.ServerFilesDirectory, Environment.CurrentDirectory);
            // ServerFilesDirectory = "{0}\\Server Files\\" or something similar
        } 
    }
} 
```

并像这样使用它：`Console.WriteLine(ResourceManager.ServerFilesLocation);`

# objective-c - 哪些功能会在 MacOS 10.8 中产生“想访问您的联系人”窗口？

> ID：11809283
> 
> 赞同：2
> 
> 时间：2012-08-04T14:11:14.973
> 
> 标签：objective-c, macos, cocoa, osx-mountain-lion

我根本不使用 ABAddressBook 框架。我不知道为什么我的应用程序要访问联系人？没有例外，或有用的日志数据......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:12:59.270

没有我知道的任何文档。我会尝试在调试器中设置断点和`+addressBook`类以及相关的 C 函数，如和。`+sharedAddressBook``ABAddressBook``ABGetMe``ABGetSharedAddressBook`

此外，一旦出现对话框，请立即在调试器中停止应用程序，并调查所有线程中是否存在可疑函数调用，因为 OS X 将阻止调用，直到用户单击其中一个选项。

在 Apple 开发者论坛的一篇相关文章中，我了解到支持 iChat Theater 的 InstantMessage 框架是这种情况下的罪魁祸首。

# c# - 如何开始编写这个 Orchard 模块

> ID：11809285
> 
> 赞同：12
> 
> 时间：2012-08-04T14:11:28.077
> 
> 标签：c#, .net, asp.net-mvc-3, orchardcms

我是 Orchard 开发的新手，我现在要为它编写我的第一个模块。我的要求将包含一个多页路径，以便用户完成订单。

1-搜索您想要的号码

2- 搜索结果（选择你的号码）。

3-输入您的信息

4- 谢谢（记录此订单）

**我不希望有人来做我的工作**，但我需要知道从哪里开始，以及如何管理我的资产，最重要的是，我将如何管理我的表单的用户交互。

非常感谢，希望收到您的来信。

**更新：**这还没有最终确定，因为我检查过的所有资源都无法回答我的问题。我需要在这里实现的就像一个向导。一些步骤取决于用户输入。但是所有的示例都是一个带有管理页面或其他东西的单页模块。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:33:58.513

我见过的构建模块的最佳解释是在 www.Pluralsight.com 上。内容不是免费的，但根据您的情况，这可能是值得的。

凯文·库布勒的[高级果园](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=adv-orchard&highlight=kevin-kuebler_adv-orchard-m4-non-content-data-and-mvc%2a6!kevin-kuebler_adv-orchard-m1-getting-started%2a1,5,6,7,3,4!kevin-kuebler_adv-orchard-m6-finishing-touches%2a13,14!kevin-kuebler_adv-orchard-m2-creating-a-module!kevin-kuebler_adv-orchard-m3-creating-a-custom-content-part#adv-orchard-m4-non-content-data-and-mvc)

Kevin Kuebler 的[果园基础知识](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=orchard-fundamentals&highlight=kevin-kuebler_introduction-to-orchard%2a1,2!kevin-kuebler_shape-of-orchard!kevin-kuebler_modules-and-content%2a1,8,4!kevin-kuebler_themes-and-widgets%2a9!kevin-kuebler_blogs-and-users#introduction-to-orchard)

# cocoa - 可可 - 单击按钮时无法访问实例变量

> ID：11809287
> 
> 赞同：0
> 
> 时间：2012-08-04T14:11:55.480
> 
> 标签：cocoa, variables, nsmutablearray, automatic-ref-counting, instance

我有一个方法叫`getProjects`. 在我的方法中，我从 json 解析数据。我将项目的`name`和保存`id`在我的实例变量`projectsArray`中，该变量是`NSMutableArray`.

问题是我`IBAction`调用了一个按钮 ( ) `writeFile`，如果我尝试在单击时记录数组，我的应用程序会崩溃。错误消息是`ESC_BAD_ACCESS`。但为什么？我正在使用 ARC。 ``Method getProjects`

```
- (void)getProjects {
int count = 0;
self.projectsArray      = [NSMutableArray arrayWithCapacity:10];
SBJsonParser *parser    = [[SBJsonParser alloc] init];

NSURLRequest *request   = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@projects.json", urlPath]]];
NSData *response        = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString *json_string   = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
NSArray *projects       = [parser objectWithString:json_string error:nil];

for (NSDictionary *project in projects) {
    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithCapacity:2];

    [dict setObject:[project objectForKey:@"name"] forKey:@"name"];
    [dict setObject:[project objectForKey:@"id"] forKey:@"id"];

    [self.projectsArray insertObject:dict atIndex:count];
    [self.selectProject addItemWithTitle:[project objectForKey:@"name"]];
    count++;
} 
```

}

我把这个方法称为`applicationDidFinishLaunching`

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [self getProjects];
    NSLog(@"%@", self.projectsArray);
} 
```

我的 applicationDidFinishLaunching 中的日志返回我的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:38:17.827

好吧，看来您已经找到了问题的原因：

> 我将分配更改为保留，现在它可以工作了。但为什么？

原因是通过将属性声明为`assign`，当您设置它时，它的值不会被保留。

所以：

1.  你像这样创建数组：

    ```
     self.projectsArray      = [NSMutableArray arrayWithCapacity:10]; 
    ```

2.  `arraywithCapacity`会给你一个自动释放的对象；

3.  将对象分配给属性时不保留；

4.  在某个时间点，*在*执行 NSLog 之前，对象被释放。

5.  碰撞。

# php - 用 if 语句匹配字符串

> ID：11809288
> 
> 赞同：0
> 
> 时间：2012-08-04T14:12:04.817
> 
> 标签：php

我正在尝试匹配两个字符串，如果存在匹配状态，则表明找到了匹配项。我正在比较的字符串是使用以下代码的日期。

```
$feed = simplexml_load_file('http://feeds.feedburner.com/2dopeboyz');
foreach($feed->channel->item as $item) {
    $title = $item->title;
    $description = $item->description;
    $pubdate = $item->pubDate;
    $newDate = date("mdY", strtotime(str_replace("UT", "", $pubdate)));
    date_default_timezone_set('America/Los_Angeles');
    $today = date("mdY");

    if ($newdate == $today) {
        echo 'Match!';
    } else {
        echo "No Match!";
    }
} 
```

我的问题是，即使字符串相同，字符串也不返回匹配项。我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T14:14:07.090

改变

```
if ($newdate == $today) { 
```

至

```
if ($newDate == $today) {
        ^ this 
```

正如您实际声明的那样`$newDate`。

# sql - 试图找到最小值

> ID：11809289
> 
> 赞同：0
> 
> 时间：2012-08-04T14:12:04.760
> 
> 标签：sql, oracle

我正在尝试显示来自 AnnualBudget 的最小值，这是我到目前为止所做的代码：

```
SELECT WARD.HospitalCode,
       HOSPITAL.HospitalCode Name,
       WardNo,
       AnnualBudget
FROM WARD,
     HOSPITAL
WHERE (AnnualBudget) =
    (SELECT AnnualBudget
     FROM WARD
     WHERE AnnualBudget =
         (SELECT MIN(AnnualBudget)
          FROM WARD
          WHERE AnnualBudget >
              (SELECT MIN(AnnualBudget)
               FROM WARD
          ) 
     )
); 
```

但是，它实际上选择了最大值，而不是选择最小值，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:18:38.403

以下查询将为您提供高于 min 的值

```
select min(annualbudget)
from ward
where annualbudget > (
  select min(annualbudget)
  from ward
) 
```

如果你想要最小值，试试这个：这些天我没有太多的预言，但它应该可以工作）

```
select (stuff)

from ward w
join hospital h on h.hospitalId = w.hostpitalId

where w.annualbudget = (select min(annualbudget) from ward) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:23:12.530

这不应该更像这样吗？

```
SELECT W.HospitalCode, H.HospitalCode, Name, WardNo, AnnualBudget  
FROM WARD W, HOSPITAL H 
WHERE W.HospitalCode = H.HospitalCode
  and W.AnnualBudget = (Select MIN(AnnualBudget) FROM WARD W2 
                                                WHERE W2.HospitalCode = W.HospitalCode) 
```

我假设 WARD 中的医院代码是外键，您希望每个医院的病房预算最低，对吧？

# objective-c - 每次加载视图时，如何在屏幕外动画化 ui 视图并在应用程序启动时停留在那里？

> ID：11809290
> 
> 赞同：0
> 
> 时间：2012-08-04T14:12:12.477
> 
> 标签：objective-c, ios, core-animation

我的应用程序开头有一个简单的动画。

它在主视图上显示一个 UIView，该 UIView 在启动时在屏幕外显示动画。我只希望它在应用程序启动时制作动画，而不是每次加载主视图时。我的问题是使用我的代码我可以根据需要停止动画，但是它会在加载主视图时恢复到覆盖视图的开始状态。

总而言之，我想将 UIview 设置为离开屏幕的动画，并使其保持在那里，直到应用程序重新启动。非常感谢任何建议

```
- (void)viewDidLoad
{

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performAnimation:) name:UIApplicationDidBecomeActiveNotification   object:nil];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

 }

 - (void)viewDidUnload
{
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidBecomeActiveNotification object:nil];

[self setDoorbottom:nil];
       [super viewDidUnload];
// Release any retained subviews of the main view.
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)alert:(id)sender {

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"" delegate:nil cancelButtonTitle: @"Dismiss" otherButtonTitles: nil];

[alert show];

}

- (void)performAnimation:(NSNotification *)aNotification {

    // Animation code.

CGRect doorbottomFrame = doorbottom.frame;
doorbottomFrame.origin.y = self.view.bounds.size.height;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:0.3];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

doorbottom.frame = doorbottomFrame;

[UIView commitAnimations];

CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Air", CFSTR
                                          ("wav"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID (soundFileURLRef, &soundID);
AudioServicesPlaySystemSound (soundID);

  }
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:15:04.297

Matt Drance 和 Paul Warren 在他们的*iOS 食谱*书中非常详尽地介绍了这一点。解释相关部分：假设您在加载期间使用 default.png 作为一种启动屏幕，那么您需要将动画封装在它自己的视图控制器中，并且呈现作为应用程序根视图控制器之外的模态视图控制器...

时间在这里很关键，根控制器的视图必须在它呈现模态视图控制器之前就位，所以在 didFinishLaunchingWithOptions 中你会：

*   实例化一个包含启动画面动画视图控制器的 navcontroller 视图
*   将该导航控制器作为子视图添加到窗口
*   以模态方式呈现导航控制器 -

需要考虑是否显示状态栏等细节...... Drance/Warren 的书包括源代码和更全面的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T13:45:08.650

其他人建议将触发启动动画的代码放在 applicationDidFinishLaunching:withOptions 中。

然而，这有一个潜在的问题。

从 iOS 4 开始，您的应用程序会在用户按下主页按钮时切换到后台，然后在用户再次点击应用程序图标时获得切换到前台通知。您可以持续数周而不会收到另一个启动通知。在用户看来，他们好像在再次启动您的应用程序，但系统不这么认为。

在决定在 applicationDidFinishLaunching:withOptions 中触发动画之前，请确保这是您想要的：

如果您将代码放在移至前台方法 (applicationWillEnterForeground) 中，您将拥有更大的灵活性。如果您使用该方法，您可以创建逻辑来决定是将其视为启动还是从后台返回。（例如，当您进入后台时保存一个时间戳，如果自您上次进入后台以来已经过了一定时间（一个小时？），则将前台通知视为启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T14:29:26.507

在您的初始应用程序 luanch 之后调用第一个方法，`application: didFinishLaunchingWithOptions:`因此，在其中调用您的动画而不是`viewDidLoad`.

`application: didFinishLaunchingWithOptions:`您将在您的应用程序委托中找到此方法。

### 生命周期

![在此处输入图像描述](../Images/30ffd5de604f8d4162b2a6cfe0f71ce8.png)

**这张照片的所有功劳归于：[Apple 文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW7)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T07:57:24.360

在我自己的项目中，我通过在我的应用程序委托中实例化的临时视图控制器处理启动画面：

```
SDSSplashViewController* splash = [[SDSSplashViewController alloc] init];
[window addSubview:splash.view]; 
```

`SDSSplashViewController`调用相当于你`performAnimation`在它的`viewDidLoad`. 在动画结束时，它将视图从其父视图中移除。这非常干净，非常适合重复使用。

您可以在 applicationDidFinishLaunching 中实例化视图控制器（如上），如果您希望它只执行一次，或者`applicationDidBecomeActive`如果您希望每次应用程序激活时执行动画（这就是您在代码中所做的）。

关于您当前的问题：我假设您在 xib 文件中定义了门底视图（因为您不在 viewDidLoad 中并且您不提供 loadView）。

在这种情况下，发生的情况是：每次加载视图时，都会按照您在 xib 中定义的方式加载它。因此，如果它在那里可见，并且与您的视图的其余部分重叠，那么当您不进行动画处理时，它将保持这种状态。一个简单的解决方法是`hidden`在 xib 中制作动画视图，然后首先在以下位置取消隐藏它`performAnimation`：

```
- (void)performAnimation:(NSNotification *)aNotification {

   // Animation code.

   doorbottom.hidden = NO;
   ... 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T14:33:12.730

如果您需要一个事件只发生一次，您可以在 AppDelegate 类中创建一个 bool 属性，并在第一次为 UIView 设置动画时将其设置为 true。例如：

```
 - (void)viewDidLoad
    {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    BOOL animated =appDelegate.animated;
    if(!animated)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performAnimation:) name:UIApplicationDidBecomeActiveNotification   object:nil];
        appDelegate.animated =YES;
    }

     [super viewDidLoad];
      // Do any additional setup after loading the view, typically from a nib.

 } 
```

# python - 解析：为什么我定义的规则不匹配？

> ID：11809291
> 
> 赞同：0
> 
> 时间：2012-08-04T14:12:31.617
> 
> 标签：python, parsing, parser-generator, ply

我正在用python编写一个带有PLY的反编译器，旨在将mythryl翻译成neko。

问题是在解析代码时：

```
fun not 1 => 0;
    not 0 => 1;
end; 
```

此示例位于：[https ://github.com/narke/my2neko/blob/master/test_cases/ex1.my](https://github.com/narke/my2neko/blob/master/test_cases/ex1.my)

解析器不匹配适用于保留字'fun'的规则，由FUN_T表示，当然规则存在，最后一个：

```
def p_declaration(p):
'''declaration : MY_T vb
    | dot_exp ARROW pattern
    | FIELD_T MY_T fields
    | RECURSIVE_T MY_T rvb
    | FUN_T fun_decls 
```

解析器位于：[https ://github.com/narke/my2neko/blob/master/my2neko.py](https://github.com/narke/my2neko/blob/master/my2neko.py)

我得到的错误是这样的：

```
State  : 0
Illegal character 'f'
Illegal character 'u'
Illegal character 'n'
Illegal character 'i'
Illegal character 'n'
Stack  : . LexToken(LOWERCASE_ID,'c',1,6)
Action : Shift and goto state 80 
```

重现它：./my2neko.py test_cases/ex4.my f.neko

你能指出我错过了什么吗？提前致谢。

这是项目：[https ://github.com/narke/my2neko](https://github.com/narke/my2neko)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:08:56.543

好的，我发现了问题所在。我省略了处理保留字。[请参阅http://www.dabeaz.com/ply/ply.html](http://www.dabeaz.com/ply/ply.html)上的 4.3 令牌规范。

# operating-system - 如果物理内存的大小是 2^32-1，那么虚拟内存的大小是多少？

> ID：11809294
> 
> 赞同：4
> 
> 时间：2012-08-04T14:13:08.343
> 
> 标签：operating-system, virtual-memory

我知道物理地址将是 32 位长，但我如何通过这些信息找出虚拟内存的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T14:25:30.453

虚拟内存地址空间的总大小在架构上为 2^32，而在`x86`架构上更大（目前约为 2^48）`x64`。但是，操作系统通常会保留一部分空间，因此 32 位应用程序不一定能同时处理 4GB。此外，操作系统可以轻松地交换不同的内存块，因此如果需要，可以通过一种银行切换形式在操作系统的帮助下支持超过 4GB 的内存，方法是告诉它在您想要访问内存时修改您的页表当前未映射到您的地址空间。

此外，支持的最大物理内存量不一定是 2^32。即使是 32 位机器，通常也通过 PSE36 或 PAE 支持高达 2^36。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:56:01.360

虚拟内存的大小不能仅通过给出物理内存的大小来确定。

# winforms - StructureMap 的 ThreadLocal 范围和 WinForms

> ID：11809296
> 
> 赞同：2
> 
> 时间：2012-08-04T14:13:48.920
> 
> 标签：winforms, structuremap

我正在尝试使用 StructureMap 在 WinForms 应用程序中连接 NHibernate 来处理会话。在我的 Web 应用程序中，我可以配置 StructureMap 来为每个 HttpContext 创建一个新的 Session，然后我可以连接到 Context.EndRequest 事件来处理提交和清理。

现在我正在尝试为 WinForms 找出类似的方法。我假设如果我使用 ThreadLocal 范围，StructureMap 将为每个事件创建一个 Session，但我怎样才能挂钩到结束事件以提交和清理？

# c# - System.ArgumentException：目标数组不够长

> ID：11809299
> 
> 赞同：0
> 
> 时间：2012-08-04T14:14:20.060
> 
> 标签：c#, tcpclient

我正在尝试使用需要我将 ID 作为字符串发送的 tcp it 服务。我从示例代码中得到了以下方法。我的问题是当我输入带有 4 个字符数字的字符串时，例如“4000”、“2000”、“3000”，该方法有效，但是当我输入少于 4 个字符的字符串时，“1”、“20”或“300”它返回

> System.ArgumentException：目标数组不够长。检查 destIndex 和长度，以及数组的下限。

```
 public byte[] prepNetworkStreamBuffer(string reqiiredID) {
        byte[] id = UTF8Encoding.UTF8.GetBytes(reqiiredID);
        int l = id.Length;
        byte[] idb = BitConverter.GetBytes(System.Net.IPAddress.HostToNetworkOrder(l));

        byte[] buff = new byte[1 + 1 + id.Length + l];
        buff[0] = 0;
        buff[1] = (byte)VerificationServiceCommands.addIDtoAFIS;
        idb.CopyTo(buff, 1 + 1);
        id.CopyTo(buff, 1 + 1 + idb.Length);

        return buff;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T16:43:55.217

```
 public static bool TryGetArray(ref SomeObject[] source )
    {
        try
        {
            var localSource = new List<SomeObject>{new SomeObject(), new SomeObject()};

            var temp = new SomeObject[localSource.Count + source.Length];
            Array.Copy(source, temp, source.Length);
            Array.ConstrainedCopy(localSource.ToArray(), 0, temp, source.Length, localSource.Count);
            source = temp;
        }
        catch
        {
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:26:08.330

我怀疑问题是缓冲区长度是

```
1 + 1 + id.Length + l 
```

什么时候应该

```
1 + 1 + idb.Length + l
        ^^^ 
```

检查此问题的最佳方法是启动调试器并查看`buff`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T14:43:06.957

您正在复制`idb`和`id`to `buff`，这只是 size `2*id.Length + 2`。

因此，当`id`只有 3 号时，您的尺寸`buff`太小，无法容纳`idb`4 号。

你要：

```
byte[] buff = new byte[1 + 1 + id.Length + idb.Length]; 
```

# licensing - 在网站中使用来自维基百科/其他 CC 的数据/信息

> ID：11809302
> 
> 赞同：0
> 
> 时间：2012-08-04T14:14:42.833
> 
> 标签：licensing, wikipedia

简单地说，我需要某些特定顺序的国家、州和城市名称（例如，根据人口）。我只是从维基百科中搜索和查找文章，例如：X 国城市列表，其中有该国的一些城市根据人口排序。现在，我可能只使用我根据维基百科中提供的有关它们（城市/州）的一些信息选择的城市/州的名称和位置。

那么，要在表单下拉列表（标签）中使用这些数据，我该怎么做呢？

我是否仍然需要归因并公开这些数据并以某种方式免费使用？我认为这些数据会以某种方式被修改，尤其是语言和显示方式。我不会复制比较表，而是使用城市属性，而不是呈现它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:08:03.287

> 我是否仍然需要归因并公开这些数据并以某种方式免费使用？一世

如果原始许可证要求，当然，您主要必须这样做。

由于原始许可证允许您进行修改，例如删除大部件，因此无论您是否进行修改都没有太大区别。因此，像您所做的那样进行修改并不会改变太多。

根据您所从事的法律领域，对于您复制的数据库意义上的工作的处理方式可能会有所不同。

例如，在世界某些国家/地区，这已经低于版权。

在世界其他一些国家，国家名称和人口等简单的事实根本无法获得版权。

在您的情况下，您可能只想留下一个维基百科的链接，并在您网站的信用页面上命名您使用过的作品。如果您还没有学分页面，请创建它或使其成为您的联系/法律页面的一部分。

但是我不是你的律师，所以这不是法律建议。这只是从软件作者和维基百科内容贡献者的角度来看。

# linq - 关于 LINQ，我是否正确理解谓词

> ID：11809304
> 
> 赞同：4
> 
> 时间：2012-08-04T14:16:08.763
> 
> 标签：linq, language-theory

我试图了解谓词和 LINQ。

虽然 LINQ 的语法开始对我有意义，但我在 LINQ 背后的理论方面遇到了一些麻烦。

这是我到目前为止所拥有的。在设计 LINQ 时，Microsoft 没有创建一个新接口来定义可以使用 LINQ 查询的任何对象都需要实现的每个成员，而是决定采用现有的类 IEnumerable，并使用扩展方法扩展该类。

我想我了解扩展方法。扩展方法是静态类中的静态方法。传入此方法的第一个参数与`this`参数一起传入，并定义要扩展的类型。然后，与扩展方法在同一命名空间内的任何这种类型的实例都可以使用该方法。

因此，微软在 System.LINQ 命名空间内创建了许多扩展 IEnumerable 的扩展方法，任何使用 System.LINQ 命名空间并包含实现 IEnumerable 的对象的类都可以使用这些扩展方法来查询该对象。这些扩展方法中的每一个都将委托作为其第二个参数。

关于`where`,`where`是扩展 IEnumerable 并返回实现 IEnumerable 的新对象的扩展方法。下一个参数`where`采用 Func 类型（泛型 func）的谓词（返回布尔值的方法）。这是一个委托，它返回 true 或 false，最多可以接受 16 个参数。但是，不必编写满足此条件的方法，而是创建 Func 类型的实例并将其指向您的方法，并将此变量传递给`where`方法，C# 允许您即时编写此方法。您在构建 LINQ 查询时放在单词后面的所有内容都将`where`成为您的谓词。

在幕后，实现 IEnumerable 的对象的成员被迭代并针对您的谓词进行评估，并且 if`true`使用`yield return`语法添加到新的 IEnumerable 对象中。

抱歉，如果这看起来有点脱节，但我基本上已经把所有事情都从我的大脑中甩了出来，并希望比我自己更了解这一点的人会过来告诉我我的哪些位是正确的，哪些位是错误的并且通常扩展我上面写的内容，因为我在正确理解这里发生的事情时遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:23:42.237

虽然我不完全确定你在追求什么，但我认为你在很大程度上是有权利的。如果我正确阅读了您的问题，那么您实际上正在考虑两件事：扩展方法和谓词。

以下是可能有助于理解的内容：您基本上可以自己实现 Where 运算符，一步一步地查看所有部分的位置。一旦您知道引擎盖下的内容，它似乎就不那么神奇了。

假设我们有一系列事物，我们想编写一个方法来帮助我们找出其中哪些事物很棒。这是我们可以做到的一种方法：

```
static IEnumerable<Thing> ThingsThatAreAwesome(IEnumerable<Thing> things){
    List<Thing> ret;
    foreach (Thing thing in things) {
        if (thing.IsAwesome)
            ret.Add(thing);
    }

    return ret;
} 
```

然后我们会这样称呼：

```
List<Thing> myThings;
List<Thing> myAwesomeThings = ThingsThatAreAwesome(myThings); 
```

所以这很热心。我们只是遍历我们的列表，看看其中哪些很棒，然后返回符合我们很棒标准的那些。但从语义上讲，它并没有真正为我们做这件事——我们很棒的过滤器太棒了，我们希望能够走到一个事物列表并调用我们的操作符，就好像它是 IEnumerable 本身的实例方法一样.

这就是*扩展方法*的用武之地。通过一些编译器技巧，它们使我们能够“扩展”类型。所以就像你说的，通过将“this”放在我们方法的 IEnumerable 参数前面，我们现在可以走到我们的列表并要求它像这样过滤自己：

```
List<Thing> myAwesomeThings = myThings.ThingsThatAreAwesome(); 
```

所以 - 这就是扩展方法适合的地方。接下来是“谓词”。

所以我们得到了我们非常棒的过滤器，它很棒，但是我们有一个大脑爆炸：稍微抽象一下，我们刚刚编写的那个方法可以用来过滤*任何东西*。不仅仅是 Thing 对象的列表，也不仅仅是过滤很棒的东西。

让它适用于任何类型都相当容易，我们只是用`IEnumerable<T>`, 而不是`IEnumerable<Thing>`- 让它成为一个通用运算符，但让它根据任何标准过滤就更棘手了。该方法应该如何知道如何过滤任何类型？它显然不能——我们的调用代码必须准确地*告诉*它我们所说的“过滤器”是什么意思——我们想要什么样的过滤器。所以我们给它第二个参数，一个函数指针，它表达了我们所追求的。我们将其称为“谓词”，这只是一种表示返回真或假的代码块的方式。当一切都说完了，它看起来有点像这样。我们将把方法重命名为“Filter”，因为这样可以更好地表达我们现在要做的事情：

```
static IEnumerable<T> Filter(this IEnumerable<T> list, Func<T,bool> predicate) {
    foreach (T item in list) {
        if (predicate(item))
            yield return item;
    }
} 
```

您可以看到，我们实际上并没有做任何与之前的 Awesome 过滤器方法不同的事情——我们仍然只是迭代一个列表，执行某种检查，并返回通过该检查的项目。但是我们已经给自己提供了一种调用代码的方法来准确地表达“检查”应该是什么。

我们基本上仍然只做两件事：迭代列表，并对列表中的每个项目进行*某种检查——通过检查的项目会被传回。*除了现在该方法并不真正知道它正在运行的检查是什么样的 - 我们告诉它，将那段代码作为参数传递，我们的谓词，而不是将其硬编码到方法本身中。我们让调用者来决定他们希望他们的过滤标准是什么。

所以此时，我们基本上已经有了 LINQ Where 运算符——我们现在可以对任何类型的集合运行查询，所有这些都使用相同的方法。如果你还没有弄乱 lambdas，不要担心——只要知道这是一种非常简洁的代码表达方式，在这种情况下，它告诉我们的过滤器方法我们想要过滤什么：

```
List<Thing> myThings;
List<Cats>  myCats;

var myAwesomeThings = myThings.Filter(thing => thing.IsAwesome);
var myCrazyCats = myCats.Filter(cat => cat.IsCrazy);

foreach (var thing in myAwesomeThings){
    Console.WriteLine("This thing is awesome! {0}", thing);
}

foreach (var cat in myCrazyCats){
    Console.WriteLine("This cat is crazy! {0}", cat);
} 
```

我希望这有助于巩固一些概念——但如果你真的想深入了解 LINQ，你会想要退出 TekPub 的[Mastering LINQ](http://tekpub.com/productions/linq)截屏视频。这是一个很棒的逐步介绍。为您提供所有基础知识，然后引导您了解几乎所有操作员。我不能推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T05:47:37.863

> 因此，微软在 System.LINQ 命名空间内创建了许多扩展 IEnumerable 的扩展方法，任何使用 System.LINQ 命名空间并包含实现 IEnumerable 的对象的类都可以使用这些扩展方法来查询该对象。这些扩展方法中的每一个都将委托作为其第二个参数。

我要注意的两件事是：

1.  并非每个方法都将委托作为参数 - 例如 Skip(int count)、Take (int count)、Concat(IEnumerable second) 等。
2.  System.Linq 使用扩展方法，因为它只是 LINQ 的*一种*实现。如果我正在执行数据库查询等，我可以将其换成使用 MongoDB.Driver.Linq。

# sql - SQL - 获取用户 X 和用户 Y 一起乘坐的所有行程

> ID：11809309
> 
> 赞同：0
> 
> 时间：2012-08-04T14:16:55.593
> 
> 标签：sql

我有这个模型。

Trip有很多乘客通过TripPassenger

TripPassenger 属于 Trip

TripPassenger 属于用户

用户

如何获取乘客 X 与乘客 Y 的所有行程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:20:38.683

一种解决方案是自加入：

```
select  tp1.TripId
from    TripPassenger tp1
join    TripPassenger tp2
on      tp1.UserId = X
        and tp2.UserId = Y
        and tp1.TripId = tp2.TripId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:40:42.323

```
select trip_id
from trip_passenger
where passenger_id in (1,2)
group by trip_id
having count(*) = 2; 
```

这将返回这两名乘客参加的那些旅行。如果您也有其他乘客参与的那些，您需要使用`count(*) >= 2`.

我还假设没有乘客被两次分配到同一次旅行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:21:30.263

```
SELECT TripID
FROM TripPassenger
WHERE User = @User1
  AND TripID IN (
    SELECT TripID
    FROM TripPassenger
    WHERE User = @User2
  ) 
```

# c# - 在 Windows Phone 和 HTML 5 的后台上传大图像

> ID：11809311
> 
> 赞同：0
> 
> 时间：2012-08-04T14:17:07.290
> 
> 标签：c#, html

我有一个 Windows Phone 应用程序和一个 HTML 5 应用程序。这两个应用程序都将大图像（> 5mb）从用户的手机上传到我的服务器。我最近经历过，有时这些图片只上传了一半。我正在尝试确定如何解决此问题。我考虑过对文件进行分块，这似乎需要做很多工作。同时，我不知道有任何其他处理方式。

底线是，在某些情况下，我的用户在上传完成之前离开了应用程序。当用户回到应用程序时，我想继续上传文件。在这两种情况下，我都将图像作为 Base64 编码的字符串。我真的认为我将不得不把它分块。但是，在我经历这个麻烦之前，我想看看是否有人有更好的主意。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:24:42.077

是的。分块在这里是一个不错的选择。我见过一些网络服务说任何超过 5MB 的东西都建议分块。下面是一些代码，您可以查看这些代码来帮助您开始行动。 [http://www.codeproject.com/Articles/43272/Uploading-Large-Files-Through-Web-Service](http://www.codeproject.com/Articles/43272/Uploading-Large-Files-Through-Web-Service)

# java - JSF：使用richfaces文件上传将图像url添加到mysql表

> ID：11809312
> 
> 赞同：0
> 
> 时间：2012-08-04T14:17:15.923
> 
> 标签：java, jsf, netbeans, file-upload, image-uploading

我在netbeans（glassfish）中使用jsf，我想编辑我的创建表单以包含一个文件上传组件，一旦提交表单，它将将图像目录发送到mysql中的相应图像字段。我试图改变我的代码：

```
<h:inputText id="imageUrl" value="#{artefactsController.selected.imageUrl}" title="#{bundle.CreateArtefactsTitle_imageUrl}"/> 
```

至：

```
<t:inputFileUpload id="imageUrl" value="#{artefactsController.selected.imageUrl}" title="#{bundle.CreateArtefactsTitle_imageUrl}"/> 
```

这是使用 myfaces 组件（战斧）有什么办法可以将上传字段的值传递给输入文本框？或者也许我需要调用一些方法。如果有人能告诉我如何使用我已经拥有的表格将目录导入数据库，我将不胜感激。表格是由我已经定义的实体生成的。

我至少需要一个关于如何将上传组件的托管 bean 链接到的提示：

```
value="#{artefactsController.selected.imageUrl}" 
```

也许一个

```
valuechangelistener="#{componentbean.getfilename()" 
```

我只需要有人为我解决逻辑！

# model - directx 2 网格旋转，但 1\. 模型将转动 y，2\. 模型转动 z 轴。（我试图以不同的方式转动）

> ID：11809318
> 
> 赞同：0
> 
> 时间：2012-08-04T14:18:08.723
> 
> 标签：model, rotation, directx

directx 2 网格旋转，但 1\. 模型将转动 y，2\. 模型转动 z 轴。（我试图以不同的方式转动）

```
 static float index = 0.0f; index+=0.003f;  
    D3DXMATRIX matRotate; //rotate matrix
    D3DXMatrixRotationYawPitchRoll(&matRotate, index, 0, 0); // set up matrix
    directx->SetTransform(D3DTS_WORLD, &matRotate); 
```

但这会以同样的方式旋转 2 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:29:38.350

网格受世界矩阵（+view +projection）的影响。如果要独立变换网格，则必须应用相应的世界矩阵并绘制网格。所以：

```
Apply world matrix 1
Draw mesh 1
Apply world matrix 2
Draw mesh 2 
```

# php - 从一个表中获取值，将其插入到另一个表的查询中。如何？

> ID：11809328
> 
> 赞同：0
> 
> 时间：2012-08-04T14:19:57.360
> 
> 标签：php, mysql

这个有点复杂，不能通过 innerjoin 或类似的东西来完成。我已经得到了帮助，但我无法弄清楚。这就是我正在做的事情：在获得结果时，我需要从一个表中获取一行文本并将其插入到另一个表的查询中。在其中，我保存`('2','3','4')`了指向主表 ID 的链接。因此，为了得到它们，我必须先将它们从表中拉出，将它们插入到 php 中，然后将相关行拉出并将它们保存到 xml 中。这是重要的部分：

```
$name = ($_GET["name"]);
$query =  "SELECT Favorites FROM $table_id2 WHERE Name = $name";

while($favoritesstring = mysql_fetch_assoc(mysql_query($query, $dbconnect))){
$favoritestringresult = $favoritesstring['Favorites'];
} 

$string = stripslashes($favoritestringresult['Favorites']);

$query = "SELECT Name,Comment,ID FROM $table_id WHERE ID in " .$string;

$dbresult = mysql_query($query, $dbconnect) or die(mysql_error() . ' Query: ' . $query); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T15:09:53.490

> **警告：**
> 
> 请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？
> 
> 相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该提供一些有关决定使用哪个 API 的详细信息。对于 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

考虑以下数据库设置：

```
-- This contains the elements: books, videos, albums.
CREATE TABLE IF NOT EXISTS `entries` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `name` varchar(255) NOT NULL,
    `comment` varchar(255) NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB;

-- This contains what our users favourited.
-- row_id: row identifier index
-- name: the name of the user to search for
-- entry_id: the id of the entry we search for, this will
--           make our JOIN relation towards entries.id
CREATE TABLE IF NOT EXISTS `favorites` (
    `row_id` int(10) NOT NULL AUTO_INCREMENT,
    `name` varchar(64) NOT NULL,
    `entry_id` int(10) NOT NULL,
    PRIMARY KEY (`row_id`)
) ENGINE=InnoDB; 
```

当然放入一些任意数据：

```
INSERT INTO `entries` (`id`, `name`, `comment`) VALUES
    (1, 'Foobar', 'Bazqux'),
    (2, 'Barbaz', 'Quxfoo');

INSERT INTO `favorites` (`row_id`, `name`, `entry_id`) VALUES
    (1, 'someguy', 1),
    (2, 'someguy', 2),
    (3, 'person', 2); 
```

我们将需要一个基本脚本来查询我们的数据库：

```
mysql_connect("localhost", "username", "password");
mysql_select_db("database");

$result = mysql_query('SELECT entries.id, entries.name, entries.comment
    FROM entries
    INNER JOIN favorites ON entries.id = favorites.entry_id
    WHERE favorites.name = "' .mysql_real_escape_string($_GET['name']). '"');

while ( $row = mysql_fetch_assoc($result) )
    var_dump($row);

mysql_close(); 
```

如果我们给出`$_GET['name']`的值`someguy`，我们的结果将是：

```
array (
  'id' => '1',
  'name' => 'Foobar',
  'comment' => 'Bazqux',
)
array (
  'id' => '2',
  'name' => 'Barbaz',
  'comment' => 'Quxfoo',
) 
```

而使用 的值`person`，我们只会得到：

```
array (
  'id' => '2',
  'name' => 'Barbaz',
  'comment' => 'Quxfoo',
) 
```

诀窍在于`INNER JOIN`. 我们的搜索模式，`WHERE`子句告诉数据库我们搜索输入的`favorites.entry_id`位置`favorites.name`。从那里开始，`JOIN`这两个表之间的链接扩展了我们的搜索。`INNER JOIN`意味着**只有**那些与 .`entries.id`相等的行才会被返回`favorites.entry_id`。当然，我们会获取`SELECT`语句中列出的字段。*毕竟，这是我们告诉数据库要做的事情。* [还有一些，视觉解释。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

从这里，在`while(){}`构造内部，您可以对检索到的数据做任何您想做的事情。

无需获取所有 ID，然后将其插入到`field IN (value1, value2)`语句中，而是`INNER JOIN`利用 MySQL 的关系结构，从而获得更好的性能和可维护性。

正如我在与另一个人讨论类似问题时[所说的那样：](https://chat.stackoverflow.com/transcript/11?m=4808611#4808611)

> 您可以使用 MySQL 构建的复杂性有时可能超出想象。底线是，首先您需要确保您的数据库建模正确。在那之后，这只是你如何将一个字段链接到另一个字段的问题。phpMyAdmin、LibreOffice Base 或 Microsoft Access 等工具可以极大地帮助图形界面对键之间的关系进行建模。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:30:36.817

通过查看您的两个查询，可以这样做：

`"SELECT t1.ID, t1.Name, t1.Comment FROM $table_id t1 LEFT JOIN $table_id2 t2 ON t1.ID = t2.Favorites WHERE t2.Name = $name"`

我在`LEFT JOIN`这里是因为*我*`$table_id`实际上并不知道and之间的关系`$table_id2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T14:45:34.390

对此有许多可能的解决方案。一种是使用子查询：

```
SELECT  name, comment, id
FROM    table_id
WHERE   ID in   (
                    SELECT  Favorites
                    FROM    table_id2
                    WHERE   Name = $name
                ) 
```

另一个更有效的方法是使用`INNER JOIN`

```
SELECT a.ID, a.Name, a.Comment 
FROM    table_id a 
            INNER JOIN JOIN table_id2 b 
                ON a.ID = b.Favorites 
WHERE b.Name = $name 
```

# xslt - 根据计数显示消息

> ID：11809331
> 
> 赞同：0
> 
> 时间：2012-08-04T14:20:26.360
> 
> 标签：xslt, xsl-fo

我有通过 XSLFO 格式化的 xml 文件。我有以下要求，请帮助我，我是 xslfo 的新手。

```
<?xml version="1.0" encoding="UTF-16 ?>
<LINES><LINES_ROW><ATTRIBUTE1> ABCD </ATTRIBUTE1></LINES_ROW></LINES><LINES><LINES_ROW> <ATTRIBUTE1></ATTRIBUTE1></LINES_ROW></LINES>
<LINES><LINES_ROW>  <ATTRIBUTE1>CDEF</ATTRIBUTE1></LINES_ROW></LINES><LINES><LINES_ROW><ATTRIBUTE1>MNOP</ATTRIBUTE1></LINES_ROW></LINES> 
```

我想要的是：如果属性 1 不为空且不是“ABCD”，则计算这些，如果计数大于 1，则显示一些消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:01:14.747

```
<xsl:template match="/">
    <xsl:variable name="matches" select=".//ATRIBUTE1[string-length(normalize-space(.)) &gt; 0 and not(contains(., 'ABCD'))]"/>
    <xsl:if test="count($matches) &gt; 0">
        <xsl:text>Message of your choice</xsl:text>
    <xsl:if>
</xsl:template> 
```

虽然未经测试。

# php - PHP 表单和相同名称

> ID：11809338
> 
> 赞同：0
> 
> 时间：2012-08-04T14:21:20.057
> 
> 标签：php, jquery, html

嗨，我有一个页面，其中包含几种不同的表单，所有这些表单都在按下相应按钮时显示/隐藏。

现在它们都需要包含一些由 php 从数据库中检索到的字段，但**问题是我的 jquery 代码无法隐藏稍后声明的字段。**

这是我的代码示例：

```
<form action="controlPanel.php" method="post">
    <input class="inputFields" type="text" name="fileName" />
    <input class="inputFields" type="text" name="fname" />
    <select class="styled-select" id="nameDropdown" name='nameDropdown'>
    <option value="0"><span class="formatFreeTxt">Choose a name</span></option>
    <?php
        foreach ($GLOBALS['myDB']->getList('2') as $i) {
            echo "<option value='" . $i['email'] . "'>" . $i['fname'] . " " . $i['lname'] . "</option>";
         }
    ?>
    </select>
    <input class="inputFields" type="submit" name="textForm" />
</form> 
```

然后我在上面的 div 上有另一个表格。像那样：

```
<form action="controlPanel.php" method="post">
    <input class="inputFields" type="text" name="textName" />
    <input class="inputFields" type="text" name="lname" />
    <select class="styled-select" id="nameDropdown" name='nameDropdown'>
    <option value="0"><span class="formatFreeTxt">Choose a name</span></option>
    <?php
        foreach ($GLOBALS['myDB']->getList('2') as $i) {
            echo "<option value='" . $i['email'] . "'>" . $i['fname'] . " " . $i['lname'] . "</option>";
         }
    ?>
    </select>
    <input class="inputFields" type="submit" name="nextTxtForm" />
</form> 
```

我的 JQuery 代码是：

```
function showHideBenef()
 {
       if($('#nameDropdown').is(':visible'))
       {
          $('#nameDropdown').fadeOut();
          $('#nameTable').fadeIn();
          $('#toggleButton').attr('value', 'Choose from existing ones');
          $('#chooseTxt').html('New Beneficiary Form');

       }
       else
       {
           $('#nameDropdown').fadeIn();
           $('#nameTable').fadeOut();
           $('#toggleButton').attr('value', 'OR Add a new one');
       }

  } 
```

有什么方法可以在不更改每个字段名称的情况下完成这项工作，这样我就可以实际捕获不同的帖子而无需检查所有不同的字段名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:31:15.303

这里的问题是您有多个具有相同 ID 和名称的输入元素，这不好。

为什么不将它们作为数组？

所以 form1 中的元素将是

```
<input type="text" name="firstform[fname]" id="firstform_fname"/> 
```

form2 中的元素是

```
<input type="text" name="secondform[fname]" id="secondform_fname"/> 
```

在 php 脚本中，您可以从 $_POST['firstform'] 和 $_POST['secondform'] 获取表单的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:04:18.963

去掉所有重复的`id`属性值，然后就可以使用`name`属性值了：

```
function showHideBenef () {

  var nameDropdown = $( '[name="nameDropdown"]' );

  if ( nameDropdown.is( ':visible' ) ) {

    nameDropdown.fadeOut();

    // Not sure what the following elements are, might need to use
    // `name` attr or classes to select them.

    $( '#nameTable' ).fadeIn();

    $( '#toggleButton' ).attr( 'value', 'Choose from existing ones' );

    $( '#chooseTxt' ).html('New Beneficiary Form');

  }

  else {

    nameDropdown.fadeIn();

    $( '#nameTable' ).fadeOut();

    $( '#toggleButton' ).attr( 'value', 'OR Add a new one' );

  }

}
// showHideBenef 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T14:26:29.573

只需给每个表单一个唯一的 id 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T14:29:21.793

我认为设置 id 属性

像这样

```
<form action="controlPanel.php" method="post"  id="form1"> 
```

或者

```
<form action="controlPanel.php" method="post" id="form2"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T14:32:52.230

您可以给每个输入一个 ID 属性，并使用 jQuery 根据 ID 隐藏/显示。

对 ID 使用前缀，以便区分输入，例如 id="textFormFileName" 和 id="nextTxtFormFileName"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T16:01:01.850

好的，它可能不是最佳解决方案，但我最终将所有内容包装在一个 div 元素中，然后我使用 JQuery 隐藏整个 div ...这样我就可以保持不同形式的重复名称，只要你给divs一个不同的id..

谢谢大家的答案！

# couchdb - Wicket ByteArrayResource 只能下载：我可以让浏览器处理 MIME 类型吗？

> ID：11809339
> 
> 赞同：1
> 
> 时间：2012-08-04T14:21:55.427
> 
> 标签：couchdb, bytearray, wicket, mime-types, wicket-1.5

当前情况：在 Java 代码中，我通过 Ektorp 库从 CouchDB 获取带有附件的文档。这些文档被映射到 Java 对象中，一切正常。为了使这些附件可以在浏览器中访问，我将一个 ByteArrayResource 实例化为一个字节数组、内容类型和文件名的文档附件：

```
private ByteArrayResource handleAttachment(String key, String cType) {
    ByteArrayResource res = null;
    AttachmentInputStream attIS = CouchDB.INSTANCE.getCouchDbConnector().getAttachment(doc.getId(), key);
    InputStream is = new BufferedInputStream(attIS);
    try {
        // Convert InputStream to byte[] with Apache commons-io
        byte[] bytes = IOUtils.toByteArray(is);
        attIS.close();
        is.close();
        res = new ByteArrayResource(cType, bytes, key);
    } catch (IOException e) {
        logger.error("", e);
    }
    return res;
} 
```

然后，我只需将 ResourceLink 添加到我的页面：

```
ByteArrayResource resource = handleAttachment(key, cType);
add(new ResourceLink("resLink", resource)); 
```

问题是：当我在浏览器中单击该链接时，所有附件都在下载，无论内容类型是什么。当我通过浏览器直接从 CouchDB 访问这些附件时，“image/xxx”内容类型会在浏览器中打开图像，“text/xxx”get 会显示在浏览器中，“并且还会处理“application/pdf”通过浏览器（例如 Safari 立即显示 PDF）。

我怎样才能用 Wicket 实现这一目标？任何帮助表示赞赏。请记住，我不想要共享资源，我的网站是安全的。谢谢！

PS：有趣的是，如果我使用“rel =”prettyPhoto”属性打开其中一个“图像”内容类型的资源链接，我会让 JQuery PrettyPhoto 插件在中途正确显示该图片。但是浏览器会触发下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T13:43:25.150

我看到您正在使用 ByteArrayResource 的构造函数版本，它还输入文件名（它是代码中的第三个参数“键”）。这样做 ByteArrayResource 会将响应配置为“附件”，这就是为什么您总是会看到保存对话框的原因。尝试省略 key 参数以查看是否获得所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T22:15:27.857

如果要保留文件名信息，可以尝试重写 ByteArrayResource 的 newResourceResponse 方法，如下所示：

```
res = new ByteArrayResource(cType, bytes, key){
  @Override
  protected AbstractResource.ResourceResponse newResourceResponse(IResource.Attributes attributes){
    AbstractResource.ResourceResponse rr = super.newResourceResponse(attributes)
    rr.setContentDisposition(ContentDisposition.INLINE);
    return rr;
  }
}; 
```

通过这种方式，您将手动强制您的响应为 INLINE。

# javascript - JavaScript 日历奇怪的行为

> ID：11809342
> 
> 赞同：0
> 
> 时间：2012-08-04T14:23:47.250
> 
> 标签：javascript

我看到还有其他的 JS 日历，但我想尝试一下，看看我是否可以自己做。我遇到了一些障碍。似乎当我运行我的脚本来生成本月（八月）的日历时，我得到了 29 天而不是 31 天。谁能看到我做错了什么并指出我正确的方向？

```
var arrMonth = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec");
var arrWeek = new Array("Su", "M", "Tu", "W", "Th", "F", "Sa");

var now = new Date();
var thisYear = now.getFullYear();
var thisMonth = now.getMonth();
var thisDate = now.getDate();
var thisDay = now.getDay();

var firstMonth = new Date();
var tempYear = firstMonth.setYear(thisYear);
var tempMonth = firstMonth.setMonth(thisMonth);
var tempDate = firstMonth.setDate(1);

var firstDay = firstMonth.getDay();
var totalDays = numberOfDays(thisYear, thisMonth);

var dayCounter = 1;
var strHTML = "";

strHTML += "<table border='1'>";
strHTML += "<tr>";
for(var x=0; x<arrMonth.length; x++){
    if(x == thisMonth){
        strHTML += "<td colspan='7' align='center'>" + arrMonth[x] + "</td>";
    }
}
strHTML += "</tr>";

strHTML += "<tr>";
for(var x=0; x<arrWeek.length; x++){
    strHTML += "<td align='center'>" + arrWeek[x] + "</td>";    
}
strHTML += "</tr>";

strHTML += "<tr>";
for(var x=0; x<40; x++){
    if(x < firstDay){
        strHTML += "<td>&nbsp;</td>";
    }
    else if(x == firstDay){
        strHTML += "<td align='center'>" + dayCounter + "</td>";
        dayCounter++;
    }
    else{
        if(x <= totalDays){
            if((x % 7) == 0){
                strHTML += "</tr>";
                strHTML += "<tr>";
                strHTML += "<td align='center'>" + dayCounter + "</td>";
            }
            else{
                strHTML += "<td align='center'>" + dayCounter + "</td>";
            }
            dayCounter++;
        }
    }
}
alert(dayCounter + " : " + totalDays);
strHTML += "</tr>";
strHTML += "</table>";

alert(strHTML);

function numberOfDays(year, month) { 
    var d = new Date(year, month, 0); 
    return d.getDate(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:35:25.003

您将`x`其用作日历中单元格数量的计数器，但将其与当月的天数进行比较。也就是说，更改此行：

```
if(x <= totalDays){ 
```

进入这个：

```
if( x < totalDays + firstDay ) { 
```

演示：http: [//jsfiddle.net/j9rtm/](http://jsfiddle.net/j9rtm/)

# ios - 更改推送通知系统的配置文件

> ID：11809344
> 
> 赞同：0
> 
> 时间：2012-08-04T14:24:04.960
> 
> 标签：ios, xcode, push-notification

我将向我的 iphone 应用程序实施推送通知。在我拥有我的配置文件并使用我的设备成功测试应用程序之前，我已经使用通配符创建了应用程序 ID。

现在我想用通知测试我的应用程序。

所以我创建了一个没有通配符的新应用程序 ID，创建了证书，我下载了配置文件并添加到我的配置文件列表中。

现在如何更改我的项目配置文件？我删除了旧的（带有通配符的那个），但它说没有有效的配置文件..

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:44:33.353

在 Xcode 中，选择您的目标并转到“构建设置”。搜索“代码签名身份”。有一个弹出窗口，您可以在其中选择配置文件。

# asp.net-mvc - 如何为我的发布配置文件创建不同的 web.config 转换

> ID：11809350
> 
> 赞同：1
> 
> 时间：2012-08-04T14:24:46.517
> 
> 标签：asp.net-mvc

我正在使用 ASP.NET MVC4 项目模板来创建项目。当我开发时，我正在处理本地 SQL Server Express 实例。当我将我的网站发布到托管服务提供商时，我想更改连接字符串。

我如何选择要使用的转换，它不是调试或发布。

谢谢你，伊多

# cocoa - Cocoa 可以嵌入 SDL 窗口吗？

> ID：11809357
> 
> 赞同：1
> 
> 时间：2012-08-04T14:26:15.313
> 
> 标签：cocoa, sdl

我正在尝试将一些 SDL 游戏移植到 mac OS X。

我想用Cocoa窗口作为主窗口管理几个游戏，所以想把SDL窗口作为子窗口嵌入到Cocoa窗口中。

那可能吗？如果是这样，你能告诉我一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:43:21.960

SDL 在内部使用 Cocoa 窗口，因此应该可以将其嵌入到更大的 Cocoa 层次结构中。不久前，我向基于 SDL 的游戏引擎添加了额外的 (Cocoa) 窗口，所以我很确定这可以工作。看一下 SDL 的 Cocoa 端口，您应该会看到它设置窗口层次结构的位置。

# javascript - jQuery 正则表达式标签换行

> ID：11809360
> 
> 赞同：0
> 
> 时间：2012-08-04T14:26:37.020
> 
> 标签：javascript, jquery, regex

我有一个内容可编辑的 div，我想在其中制作它，以便当用户输入主题标签时，该主题标签和下一个空格之间的所有内容都将被包裹在

```
<span class="tag"></span> 
```

例如，如果用户输入“嗨，我的名字是约翰#毛衣是一件很酷的衣服”，那么 html 会显示

```
 hi my name is <span class="tag">#john</span> are a cool article of clothing 
```

到目前为止，我的 javascript 中有这个，但我想不知道从这里去哪里

```
$('.post_box').keydown(function(){
    var note = $(this).html();
    var hashtagPattern = /[#]/i;
    var spacePattern = /[ ]/i;
        // find hashtag
        // find space
        // get stuff between them
        var tag = stuff between them;
        tag.wrap('<span class=\"tag\" contenteditable=\"false\"/>');
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:59:56.980

我试图理解你的意思，虽然我不明白你为什么消失了“毛衣”并将标签放在“约翰”，但是，假设你有这个：

```
hi my name is john are a cool article of clothing 
```

有人在“john”上添加了一个标签，如下所示：

```
hi my name is #john are a cool article of clothing 
```

html应该是这样的：

```
hi my name is <span class="tag">#john</span> are a cool article of clothing 
```

我修改了你的脚本

```
$('.post_box').keyup(function(){
var note = $(this).html(), pattern = /\s\#[A-Za-z0-9]+\s/gi, tag;
while(tag = pattern.exec(note)){
note = note.replace(tag.toString(),' <span class=\"tag\" contenteditable=\"false\">'+$.trim(tag.toString())+'</span> ');
}
$(this).html("");
$(this).html(note);
});​ 
```

如果你注意到这一行：

```
note = note.replace(tag.toString(),' <span class=\"tag\" contenteditable=\"false\">'+$.trim(tag.toString())+'</span> '); 
```

您会意识到这是在 .

你可以在这里找到测试代码[TEST](http://jsfiddle.net/miguelacho/vRhyu/)

# python - Python中的字节操作

> ID：11809363
> 
> 赞同：3
> 
> 时间：2012-08-04T14:26:58.190
> 
> 标签：python, byte

我有一个整数。可以说，

```
var = 83 #less than 0xff 
```

我有一个字节。所以假设我有字节 b 我想计算的整数值

```
 b-=var #b as an integer value , possibly by eval(b)? 
```

然后我想把它变成一个字节，我怎么能在python中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:30:54.670

如果我理解了这个问题，你可以这样做：

```
>>> chr(ord('x') - 83)
'%' 
```

`'x'`你的字节在哪里。

如果您使用的是 Python 3.x

```
>>> bytes([ord(b'x') - 83])
b'%' 
```

注意`ord(b'x')`与`b'x'[0]`

另一个示例（结果字节不可打印并显示在`\x00`表单中）：

```
>>> chr(ord('\x53') - 83)
'\x00' 
```

# jquery - addClass 到一个div，然后点击应用到那个新类，Jquery

> ID：11809368
> 
> 赞同：0
> 
> 时间：2012-08-04T14:28:06.593
> 
> 标签：jquery, css, click, addclass, toggleclass

小提琴：http: [//jsfiddle.net/8TxmK/](http://jsfiddle.net/8TxmK/)

我有两个 div，一个有 class="bb"，另一个没有类。在我的 jquery 中，我应用了以下函数：

```
$('div').on('click',(function(){

    $(this).addClass('bb');

}));

$('.bb').on('click',(function(){

    alert('bb class clicked')

})); 
```

所以我想在单击时将Class 'bb' 添加到第二个div。这工作正常。但是，点击时的第二部分 'bb' 不适用于从一开始就没有加载 'bb' 类的 div。

有什么解决方法吗？

我试过这个： http: [//jsfiddle.net/M8Ja4/](http://jsfiddle.net/M8Ja4/) 但是这个函数每次都会重复一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:30:37.103

是的……代表。将 body 替换为加载 dom 时存在的最近的父级

```
$('body').on('click','.bb',function(){

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T14:35:47.503

你有两个选择。如果您使用的是 jQuery 1.7+，请使用该`.on()`方法动态附加事件处理程序：

```
$(document).on('click','.bb',function() { }); 
```

如果您使用的是旧版本的 jQuery，请使用`.delegate()`：

```
$(document).delegate('.bb','click',function() { }); 
```

尽管这些示例使用`document`，但您可以使用任何 DOM 元素。我的建议是尽可能使用最低的（与 元素最接近的祖先`.bb`），因为这样您可以更快地捕获事件，并在必要时防止传播到文档级别。您可能听说过该`.live()`方法，但在 1.7 中已弃用该方法，并且 jQuery 团队建议即使在较旧的项目中也停止使用。

您在另一个答案的评论中发布的[示例](http://jsfiddle.net/8TxmK/4/)是事件冒泡的完美示例。

```
<style>
    div{width:300px;height:100px;background:pink;margin-bottom:10px;}
    .bb{border:10px solid black;}
​&lt;/style>

<div></div>
<div class="bb"></div>

<script>
    $(document).ready(function () }{

        $('div').on('click',(function(){
            $(this).addClass('bb');
        }));

        $('body').on('click','.bb',function(){
            alert('bb class clicked');
        });
    ​});
</script> 
```

在该示例中，当您在`div`没有`bb`类的情况下单击 时，它会添加类，然后事件冒泡到并在那里触发，这就是*第一次*单击 `body`时弹出警报的原因。

# php - 使用 smarty 打印 mysql 日期

> ID：11809375
> 
> 赞同：0
> 
> 时间：2012-08-04T14:29:24.737
> 
> 标签：php, mysql, date, smarty

我用这种方法将日期放入 mysql 数据库中`2012-08-02 02:20:05`。现在，如何使用 smarty 在我的页面中打印。

mycode :（注意：send_date 是行的名称）

```
$sql = "SELECT m.*, s.photo, s.gender
       FROM mail AS m, signup AS s
       WHERE m.receiver = '" .mysql_real_escape_string($username). "'
       AND m.sender = s.username AND inbox = '1' AND status = '1'
       ORDER BY send_date DESC LIMIT " .$limit;
$rs  = $conn->execute($sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:19:32.090

要将日期从转换`2012-08-02 02:20:05`为 unix 纪元（自 1970 年以来的秒数），您需要使用[strtotime()](http://php.net/strtotime)。要将纪元格式化为您想要使用的任何人类可读的日期[date()](http://php.net/date)或[strtotime()](http://php.net/strtotime)。

Smarty knows the [date_format modifier](http://www.smarty.net/docs/en/language.modifier.date.format.tpl). Since Smarty3 this puppy accepts pretty much anything that represents a date (including `2012-08-02 02:20:05`). In Smarty2 you might need to convert the string to epoch yourself, something like {$date|strtotime|date_forma:"%d.$m.%Y"}. Note that since Smarty3 date_format accepts format notations from strtotime and date, while Smarty2 only supported the strtotime notation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:36:01.767

如果您询问如何在 smarty 中输出任何变量，请执行以下操作（假设您的 smarty 设置正确）：

在 PHP 中：

```
/*
assign method: assigns variables to the template
first parameter: The variable name you want to use in your template file
second parameter: the parameter you want to pass to your template file
*/
$smarty->assign('variable', $variable); 
```

在聪明：

```
/*
brackets {} indicate that smarty is in play
$variable is the variable you passed to smarty
*/

{$variable} 
```

如果这不是您所追求的，请编辑您的问题以使其更清楚。

# jquery - 使用jquery更改标签的颜色？

> ID：11809378
> 
> 赞同：5
> 
> 时间：2012-08-04T14:29:37.123
> 
> 标签：jquery, html, submit, label

我想在单击按钮时将标签的颜色更改为红色

但是代码不起作用一切似乎都是正确的

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>
    </title>
    <script type="text/javascript">
    function changeColor(id, newColor) {

var labelObject = document.getElementById(id);

$("#" + id).css("color", newColor);

}
    </script>
</head><body>
<form id="frm2">

<label for="model">Male</label>

<input type="text" name="cars" id="model" />

<br />

<label for="female">Female</label>

<input type="text" name="cars" id="color" />

</form>

<input type="button" value="Change Label Color" onclick="return changeColor('label', 'red')" />

    </body>
</html> 
```

请帮忙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T14:47:39.223

您将“标签”作为`changeColor`处理程序的 id 参数传递，但在您提供的 HTML 中没有具有该 ID 的元素。您需要在标签中添加一些 ID 并将其传递到 onclick 处理程序中。例如：

```
<label for="model" id="label1">Male</label>
<input type="text" name="cars" id="model" />

<input type="button" value="Change Label Color" onclick="return changeColor('label1', 'red')" /> 
```

另一种方法是传递输入元素的 ID，因为它们已经分配了 ID。然后，您需要`changeColor`按如下方式修改您的处理程序：

```
function changeColor(inputId, newColor) {
  $("#" + inputId).prev().css("color", newColor);
} 
```

**编辑：**这是一个[jsFiddle](http://jsfiddle.net/mM2XW/)演示我的第二个示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T14:34:18.787

```
$('input[type="button"]').click(function(){
     changeColor('labelCity' , 'red');
}); 

function changeColor(id, newColor) {

   $("#" + id).css("color", newColor);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-19T18:44:51.320

这是一个使用 jQuery 将标签文本的颜色更改为红色的简单示例。

```
 <script src="Scripts/jquery-1.9.0.min.js"></script>
    <script>

        $(document).ready(function () {
            $('#btnChangeColor').click(function () {
                $('#lbl1').css("color", "red");
            })
        })

    </script>
```

```
<body>
    <form id="form1" runat="server">

        <label id="lbl1" >Hello friends save girl child</label>
        <br /><br /><br />

        <input type="button" id="btnChangeColor" value="Change Color" />

    </form>
</body>
```

# javascript - Javascript：css动画后继续执行

> ID：11809379
> 
> 赞同：0
> 
> 时间：2012-08-04T14:29:54.020
> 
> 标签：javascript, animation, execution

我有一个应用程序'self-sliding-puzzle'，上面有人工智能等。我将用它来制作一些很酷的投资组合画廊。

我有一种方法可以为立方体设置动画：

```
this.animateSelection = function(direction,time)
{   
    if (time===undefined) this.time=150;    
    this.moveDistance=this.cubeSize+this.spacing;
    switch (direction)
    {   
        //move right
        case 'r': $('#' + selectionName).transition({ x: '+=' +this.moveDistance +'px' },this.time);
        break;

        //move down         
        case 'd': $('#' + selectionName).transition({ y: '+=' +this.moveDistance +'px' },this.time);            
        break;

        //move left         
        case 'l': $('#' + selectionName).transition({ x: '-=' +this.moveDistance +'px' },this.time);    
        break;

        //move up           
        case 'u': $('#' + selectionName).transition({ y: '-=' +this.moveDistance +'px' },this.time);        
        break;

        //if wrong direction is given
        default:  return false;
    }
    return true;        
} 
```

当我一次调用它时，一切都很好。

但问题是：

当我做

```
myClass.animateSelection('d');
alert('bla bla bla'); 
```

在动画完成之前显示警报

我的主要 AI 循环在 50 毫秒内执行并管理大约 200 个动作，因此调用方法。我希望该方法一直执行循环，直到动画完成。

回调不成功。动画方法用于许多不同的情况和各种其他方法。它不可能使它适合IMO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:42:51.933

如果你使用`myClass.animateSelection`脚本的执行不会在它命中时停止`$().transition`。相反，transition 将设置一些简单的过渡效果队列，这些效果将在事件循环中调用。

这称为异步行为，其优点是您的脚本不会停止。但是，大多数异步函数将回调作为可选参数，将在所需的函数结束或失败后调用。

在您的情况下，`transition`支持回调作为附加参数：

```
$.fn.transition(options, [duration], [easing], [callback]); 
```

您必须更改您`animateSelection`的参数以获取回调参数：

```
this.animateSelection = function(direction,time,callback)
{   
    if (time===undefined) this.time=150;
    this.moveDistance=this.cubeSize+this.spacing;
    switch (direction)
    {   
        //move right
        case 'r': $('#' + selectionName).transition({ x: '+=' +this.moveDistance +'px' },this.time,callback);
        break;

        //move right            
        case 'd': $('#' + selectionName).transition({ y: '+=' +this.moveDistance +'px' },this.time,callback);
        break;

        //move right            
        case 'l': $('#' + selectionName).transition({ x: '-=' +this.moveDistance +'px' },this.time,callback);    
        break;

        //move right            
        case 'u': $('#' + selectionName).transition({ y: '-=' +this.moveDistance +'px' },this.time,callback);        
        break;

        //if wrong direction is given
        default:  return false;
    }
    return true;        
} 
```

并使用

```
myClass.animateSelection('d',undefined,function(){alert('bla bla bla');}); 
```

反而。

# windows - Sublime text 2, windows, bash/cygwin 代替 cmd

> ID：11809382
> 
> 赞同：2
> 
> 时间：2012-08-04T14:30:31.793
> 
> 标签：windows, git, shell, cmd, sublimetext2

我在为 Sublime 文本使用 Git 插件时遇到问题。对于每个 git 命令，我都会收到一个错误：“参数格式不正确”。当我在 cmd 中使用 git 时也会发生同样的情况。但是在 cygwin/bash 中没有任何问题。

显然，Sublime text 使用 windows cmd.exe 来执行 git 命令。所以我需要强制 Sublime 使用 cygwin/bash。

我该怎么做？或者还有其他解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:30:16.827

你需要设置类似...

`,"git_command": "C:\\cygwin\\bin\\git.exe"`

在您的用户包/Git 文件夹中的 Git.sublime-settings 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:52:30.060

我不使用 Sublime，所以不能确定是否没有正确配置插件的选项。可能有一个。

但是，您可以尝试通过重新定义`COMSPEC`环境变量来强制使用 bash 而不是 cmd （思想，从批处理文件运行 Sublime）。例如

```
SET COMSPEC=c:\git\bin\bash.exe --login -i
start sublime.exe 
```

当然，您可以在系统属性中设置 COMSPEC（以透明方式），但我不建议这样做，因为这可能会影响其他程序...

# asp.net - 以编程方式为整个应用程序设置母版页

> ID：11809386
> 
> 赞同：3
> 
> 时间：2012-08-04T14:31:02.800
> 
> 标签：asp.net, vb.net, webforms

我知道以下内容将以编程方式在 ASP.NET VB.NET 应用程序中设置母版页：

```
Me.MasterPageFile = "~/masterPage.master" 
```

是否可以以编程方式设置适用于应用程序中所有页面的母版页文件，而不必为每个单独的页面设置它？我希望能够从数据库中检索此值，以便设置要使用的母版页文件。

如果没有，是否可以在 web.config 中设置多个母版页文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:26:00.650

这就是您可以使用 ASP.NET C# 执行的操作。我没有用VB测试它。

声明您自己的页面类并为您的所有页面设置母版页：

```
public class MyPage : System.Web.UI.Page
{
    void Page_PreInit(Object sender, EventArgs e)
    {
        this.MasterPageFile = "MasterPage.master";
    }
} 
```

为您创建的每个页面从您自己的页面类继承：

```
public partial class _Default : MyPage
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:30:42.887

您可以在 web.config 文件中进行设置：

```
<pages masterPageFile="~/Template.master" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T15:32:29.250

您可以在 web.config 中更改页面设置。此代码将更改所有页面的母版页。

```
 var configuration = WebConfigurationManager.OpenWebConfiguration("~");
    SystemWebSectionGroup section=new SystemWebSectionGroup();
    section.Pages.MasterPageFile = "~/YourMasterPage.master";//Here too.
    configuration.Save(); 
```

请记住，对 web.config 进行更改会重新启动网络服务器并使缓存无效。所以不要经常这样做。

我建议您为 PreInit 事件中的页面单独执行此操作。我发布此代码是为了向您展示它可以一次更改所有页面，但它有其后果。

# java - 比较代表两张图片的两个字节数组

> ID：11809387
> 
> 赞同：2
> 
> 时间：2012-08-04T14:31:06.123
> 
> 标签：java, android, image-comparison

我正在为 android 编写一个小型应用程序，我需要在两张图片之间进行比较。图片表示为两字节数组。

有没有算法可以比较它们？我需要检查它们之间所做的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:49:11.377

这取决于您是只想标记它们不同，还是记录它们之间的每个差异。

仅仅检查它们是否不同（正如 Hunter McMillen 指出的那样） - [http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)：

```
boolean different = Arrays.equals(byteArray1, byteArray2); 
```

要存储个体差异（假设您的图片大小相同）：

```
byte[] differenceArray = new byte[byteArray1.length];
for (int i = 0; i < byteArray1.length; i++) {
    differenceArray[i] = (byte) (byteArray1[i] - byteArray2[i]);
} 
```

编辑：

如果您想要字节数组的二维（例如 800x600），您可以这样做：

```
byte[][] differenceArray = new byte[byteArray1.length][byteArray1[0].length];
for (int x = 0; x < byteArray1.length; x++) {
    for (int y = 0; y < byteArray1[0].length; y++) {
        differenceArray[x][y] = (byte) (byteArray1[x][y] - byteArray2[x][y]);
    }
} 
```

如果两个图像之间没有差异，则差异数组将全为 0，否则数字将是字节之间的差异。

# jquery - 在 Rails 中使用带有 Json 响应的 AJAX 重新加载部分视图

> ID：11809389
> 
> 赞同：0
> 
> 时间：2012-08-04T14:31:30.853
> 
> 标签：jquery, html, ruby-on-rails, ajax, json

当我调用 $.getJSON 时，我想重新加载 tbody 元素。换句话说，我需要删除所有元素并通过 Json 响应放置新元素。

JS

```
$(document).ready(function(){
  $('#position').sortable({
    update: function(event, ui) {
        var newOrder = $(this).sortable('toArray').toString();
         $.getJSON('/save_positions.json', {ids:newOrder}, function(data){
            ??????
         });
    }
  });
}); 
```

我的观点

```
# index.html.erb

<tbody id="position">
  <%= render :partial => "activities"%>
</tbody> 
```

局部视图

```
#_activities.html.erb

<% @activities.each do |activity| %>
  <tr id='<%= activity.id %>'>
    <td><%= activity.position %></td>
    <td><%= link_to activity.id, activity_path(activity) %></td>
    <td><%= activity.name %></td>
    <td><%= activity.estimated %></td>
    <td><%= activity.used %></td>
    <td><%=l activity.created_at %></td>
  </tr> 
```

我的动作（应用程序控制器）

```
def save_positions
  @activities = Activity.all(:order => 'position')

  respond_to do |format|
    format.json { render :json => @activities }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:45:28.737

从您的代码中，我得到的印象是您正在尝试做的是在服务器端生成新的 HTML 并将其插入到文档中。如果是这种情况，请尝试以下操作：

```
$.get( '/save_positions', { ids : newOrder } ).done( function( data ) {

  $( "#position" ).html( $( data ).html() );

} ); 
```

如果您真的想返回 JSON，那么您可能希望返回一个对象数组并对其进行迭代以生成新的 HTML，可能使用像 Mustache 这样的模板引擎，例如：

没有模板引擎：

```
$.getJSON( '/save_positions.json', { ids : newOrder } ).done( function( data ) {

  var positions = [];

  $.each( data, function ( key, val ) {

    // generate an element
    var el = $( "<tr>" );

    // ...

    positions.push( el );

  } );

  $( "#position" ).empty().append( positions );

} ); 
```

或者

JS：

```
$.getJSON( '/save_positions.json', { ids : newOrder } ).done( function( data ) {

  var positions = Mustache.render( template, data );

  $( "#position" ).html( positions );

} ); 
```

胡子模板：

```
{{#positions}}

<tr id='{{activity.id}}'>
  <td>{{activity.position}}</td>
  <td>{{activity.url}}</td>
  <td>{{activity.name}}</td>
  <td>{{activity.estimated}}</td>
  <td>{{activity.used}}</td>
  <td>{{activity.created_at}}</td>
</tr>

{{/positions}} 
```

# php - 同时随机执行 2 个 cURL 函数

> ID：11809391
> 
> 赞同：0
> 
> 时间：2012-08-04T14:31:54.507
> 
> 标签：php, curl

我想知道是否可以同时随机执行两个 post_to_url 函数—— post_to_url 函数是一个 cURL 请求，而 $data 是表单中的变量。我试图用 curl_multi 句柄重写 post_to_url 函数，但它不起作用。感谢您的帮助 - 非常感谢。

```
$urls = array(
   "http://examplesite1.com/cgi-bin/maxuseradmin.cgi",
   "http://examplesite2?fid=6646588e54",
   "http://examplesite1?fid=2fb44e3888"
);

$data = array(
    $data2,
    $data3,
    $data4
);
$x = rand(0,2);
post_to_url($urls[x], $data[x]);
post_to_url($urls[x], $data[x]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:03:01.980

试试这门课

[http://peecfw.googlecode.com/svn/trunk/Application/com/loadable/curl/CURL_thread.php](http://peecfw.googlecode.com/svn/trunk/Application/com/loadable/curl/CURL_thread.php)

你可以这样称呼它

```
$cURL = new CURL();
$cURL->addSession("https://www.example.com/?data=test");
$cURL->addSession("https://www.example2.com/?data=test");
$responses = $cURL->exec();  //This array will contain all responses
$cURL->clear(); 
```

# java - 与 VM 的套接字连接

> ID：11809392
> 
> 赞同：2
> 
> 时间：2012-08-04T14:32:06.730
> 
> 标签：java, sockets, ubuntu

我正在做一个套接字连接。因此，我有一台运行 Ubuntu VM 的主 win 机器。如果我在主机上启动我的套接字服务器类，我可以在 ubuntu 上运行客户端套接字类。一切安好。

我的机器做了一个 dyndns，并为我的路由器中的套接字端口启用了端口转发。通过 dyndns，我可以从 VM 连接到 main。

但是反过来不行！如何从我的主机通过 dyndns 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:11:20.527

我发现我必须在我的虚拟机程序（virtualbox）中进行特殊的端口转发。显然，仅在我拥有的路由器中启用端口转发对于 VM 来说是不够的。

# php - 如何使用 xPath php 获取价值

> ID：11809393
> 
> 赞同：1
> 
> 时间：2012-08-04T14:32:12.980
> 
> 标签：php, xpath

我有一个像这样的xml：

```
<AvailableCatgs>
   <AvailableCatg>
      <CategoryCode>01</CategoryCode>
      <Pr>1857.48</Pr>
   </AvailableCatg>
    <AvailableCatg>
      <CategoryCode>13</CategoryCode>
      <Pr>1900.40</Pr>
   </AvailableCatg>
   <AvailableCatg>
      <CategoryCode>09</CategoryCode>
      <Pr>22.3</Pr>
   </AvailableCatg>
</AvailableCatgs> 
```

我必须循环所有`AviableCatgs`并获取 and 的`CategoryCode`值`Pr`。我所做的是：

```
$xpath = new DOMXPath($mainXml);
$path = "//AvailableCatg";
$res = $xpath -> query($path);
foreach ($res as $aviable) {
   print_r($aviable->CategoryCode->nodeValue);
} 
```

但它什么也没有打印我……我该怎么办？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:55:16.227

您可以使用相对 XPath 查询来执行此操作，如下所示：

```
$doc = new DOMDocument;
$doc->loadXML( $xml); // Your XML from above

$xpath = new DOMXPath( $doc);
foreach( $xpath->query( "//AvailableCatg") as $el) {
    $ccode = $xpath->query( 'CategoryCode', $el)->item(0); // Get CategoryCode
    $pr = $xpath->query( 'Pr', $el)->item(0); // Get Pr
    var_dump($ccode->nodeValue . ' ' . $pr->nodeValue);
} 
```

这将打印：

```
string(10) "01 1857.48" 
string(10) "13 1900.40" 
string(7) "09 22.3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:46:18.173

您可以使用 SimpleXml 轻松做到这一点：

```
<?php
$xml=<<<x
<AvailableCatgs>
   <AvailableCatg>
      <CategoryCode>01</CategoryCode>
      <Pr>1857.48</Pr>
   </AvailableCatg>
    <AvailableCatg>
      <CategoryCode>13</CategoryCode>
      <Pr>1900.40</Pr>
   </AvailableCatg>
   <AvailableCatg>
      <CategoryCode>09</CategoryCode>
      <Pr>22.3</Pr>
   </AvailableCatg>
</AvailableCatgs>
x;

$s=  simplexml_load_string($xml);
$res=$s->xpath('//AvailableCatg');
foreach ($res as $aviable) {
echo $aviable->CategoryCode, " -- ", $aviable->Pr, "<br/>";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T16:29:01.537

您可以使用：

```
(string) current($xml->xpath("//group[@ref='HS_TYP']")) 
```

# jsf - 搜索 UI 与 Facebook 搜索相同

> ID：11809394
> 
> 赞同：-3
> 
> 时间：2012-08-04T14:32:14.400
> 
> 标签：jsf, user-interface, primefaces

如何使用照片和姓名进行搜索，并按人、地点等进行分组，就像在 Facebook 搜索中一样。我想使用primefaces来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:37:58.327

查看 Select2 的 ajax 搜索：http: [//ivaynberg.github.com/select2/#ajax](http://ivaynberg.github.com/select2/#ajax)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T02:02:44.410

因为我使用的是 primefaces，所以我使用 p:panelgrid 和 datatable 来获得我想要的。

```
 <p:dataGrid id="usersAddedCircle" var="selectedUsers" value="#{circleBean.circleVO.circleHasUsersVOArray}" 
                 columns="3"   emptyMessage="#{msgs['circle.emptyUserList']}">

                <!--    <p:dataTable id="usersAddedCircle"
                        value="#{circleBean.circleVO.circleHasUsersVOArray}"
                        var="selectedUsers" emptyMessage="#{msgs['circle.emptyUserList']}">  -->
                        <p:column>
                           <p:panel>
                           <!-- 
                            <f:facet name="header">
                                <h:outputText value="#{labels['circle.userList.name']}" />
                            </f:facet>
                             -->
                            <p:panelGrid styleClass="noBorders">
                                <p:row>
                                    <p:column rowspan="3" style="width:60px;">
                                        <p:graphicImage
                                            value="http://nnnnnnnn/webcam/upload/#{selectedUsers.firstName}.jpg"
                                            style="width:50px;height:50px" />
                                    </p:column>
                                    <p:column style="width:80%">
                                        <h:outputText value="  " />
                                        <h:outputText value="#{selectedUsers.firstName} #{selectedUsers.lastName}" />
                                    </p:column>
                                    <p:column>
                                        <p:commandLink id="removeStudentFromSchedule"
                                            styleClass="ui-icon ui-icon-closethick"
                                            action="#{circleController.removeSelectedUser}"
                                            update="@form" oncomplete="$('#circleEditForm').show();">
                                            <f:param name="userGUID" value="#{selectedUsers.userGuid}" />
                                        </p:commandLink>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        <h:outputText value="#{selectedUsers.country}" />
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                            </p:panel>
                        </p:column>
                        </p:dataGrid> 
```

# combinations - 字符串可能的组合

> ID：11809396
> 
> 赞同：1
> 
> 时间：2012-08-04T14:32:36.940
> 
> 标签：combinations

例如，假设一个包含四个符号的字符串，`s = abcd` 只考虑每个符号只有一个实例的字符串，这样 s=bacd 和 s=dacb 都是有效字符串，但 s=aabc 不是。这给出了 4！可能的组合。

现在，每个符号都可以取一个值

```
a = [0, 1]
b = [0, 1, 2, 3]
c = [0, 1]
d = [0, 1, 2] 
```

因此，我最终可能会拥有`s=cdab=0112`or `s=abcd=0000`or `s=abdc=1320`etc..

我希望计算 string 可以采用多少组合（不重复）。

我已经编写了一个算法来探测所有不同的组合并丢弃重复项，但我想了解是否可以构造一个返回相同结果的公式（不是所有有效组合的列表，而只是它们的数量）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:55:08.117

如果您采取横向步骤，根据您的示例

你的成员是 a0,a1,b0,b1,b2,b3 ... d2 这意味着可能的组合是 11！

# android - Android Intent 子类化

> ID：11809398
> 
> 赞同：4
> 
> 时间：2012-08-04T14:32:46.180
> 
> 标签：android

我使用意图作为我的 Android 应用程序各个部分之间通信的消息传递机制。

我的问题是：我可以将 Intent 子类化以在其上构建自己的类，或者当我在广播接收器中获得它时它将成为标准 Intent 类？

我当然是在谈论进程内通信。但是交叉线程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T15:10:56.710

我自己从来没有这样做过，但我想这是可能的。查看`LabeledIntent` [文档](http://developer.android.com/reference/android/content/pm/LabeledIntent.html)和[来源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/content/pm/LabeledIntent.java)- 我认为这与您所描述的相似。在接收器中处理您的自定义`Intent`时，您需要将`Intent`参数`onReceive()`转换为您自己的子类。

如果您将任何字段添加到您的子类，您需要确保正确实现这些`Parcelable`方法 - 确保您 override `writeToParcel()`，有一个完全接受 on`Parcel`参数的构造函数，并且有一个`public static final Parcelable.Creator`对象。

# javascript - 插入 Ajax 轮询

> ID：11809400
> 
> 赞同：1
> 
> 时间：2012-08-04T14:32:57.173
> 
> 标签：javascript, jquery, ajax, ajax-polling

我想知道是否可以将 Ajax 轮询插入到我下面的当前代码中，以便用户发布每隔几秒更新一次以显示添加到数据库中的任何新内容，例如他们的状态和添加的新评论的数量和我建立的提要中的时间戳。这是我到目前为止所拥有的。

```
<script>
$(document).ready(function(){
     make_call();
    $("form#myform").submit(function(event) {
        event.preventDefault();
        var content = $("#toid").val();
        var newmsg = $("#newmsg").val();

        $.ajax({
            type: "POST",
            url: "insert.php",
            cache: false,
            dataType: "json",
            data: { toid: content, newmsg: newmsg },
            success: function(response){
                $("#homestatusid").prepend("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['streamitem_id']+"');\">X</div><a href='/profile.php?username="+response['username']+"'>"+response['first']+" "+ response['middle']+" "+response['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a><hr>"+newmsg+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+response['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+response['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a id='likecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+response['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'>Like</div></a><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'></div></div><div id='streamdislike'><a id='dislikecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+response['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'>Dislike</div></a><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'></div></div></div><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'><table width=100%><tr><td valign=top width=30px><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><td valign=top align=left><div class='stream_comment_inputarea'><input type='text' name='content' style='width:100%;' class='input_comment' placeholder='Write a comment...'  onkeyup='growcommentinput(this);' autocomplete='off' onkeypress=\"if(event.keyCode==13){addcomment("+response['streamitem_id']+",this.value,'comment_list_"+response['streamitem_id']+"',"+response['id']+",'"+response['first']+" "+ response['middle']+" "+response['last']+"');this.value='';}\"><br/></div></div>");
            }
        });
        return false
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:41:24.133

尝试这个：

```
var intervalid = window.setInterval(function() {
  //Your ajax query here
}, intervalInMilliSec); 
```

要取消间隔，请使用以下命令：

```
window.clearInterval(intervalid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:41:32.103

```
setInterval(function(){
    $.ajax({
            type: "POST",
            url: "insert.php",
            success : function(response){
                    //update target area with response
            }
    });
}, 10000); //try update every 10 seconds 
```

# drupal - Drupal 7 通知和订阅模块

> ID：11809402
> 
> 赞同：2
> 
> 时间：2012-08-04T14:33:02.480
> 
> 标签：drupal, content-management-system, drupal-7, drupal-modules

哪个是 D7 的通知和订阅的最佳模块，它是积极维护并具有稳定版本的？..有没有存在的？可以使用哪些可能的替代方案来通过电子邮件向一组订阅用户实施订阅和通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:44:31.923

在不了解您的用例的更多细节的情况下，尚不清楚哪个是“最好的”。[通知](http://dgo.to/notifications)和[订阅](http://dgo.to/subscriptions)模块在重要方面有所不同，尽管前者实际上是后者的一个分支。订阅是较旧的订阅，它的作用更直接，而且在代码方面也有点笨拙（尽管它确实被 chx 对 2.x 分支进行了重大重写。）通知是一种重写的订阅旨在使其更具可扩展性，但这并不是说订阅本身不可扩展；它们都是模块化框架。

如果您只需要一种用户订阅节点的方式，您可能会发现订阅可以满足您的一切需求。但是，如果您需要支持更多的集成点，通知可能是更好的选择。我认为它在 Contrib 中有更多模块已经对其进行了扩展，并且在大约 3 倍于订阅的站点上使用（不确定仅 D7 站点的细分是什么。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T04:57:52.443

[我在这里](http://groups.drupal.org/node/251038)几乎同样的问题。[在那里，我从规则模块](http://drupalmodules.com/module/rules)的维护者那里得到了这个有用的答案。

> “我的猜测是你没有过多地尝试过 Rules。抛开所有的怀疑，Rules 是正确的选择。这两个模块有 4.6 甚至更早版本的遗留代码，但唯一需要的函数是 drupal_mail()。其他一切都只是会让你的工作更容易或更难。”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T17:41:42.560

看似流行的模块[Subscriptions](http://drupal.org/project/subscriptions/)怎么样？它自 2003 年以来一直存在，并通过 Drupal 6 和 7 的稳定版本积极维护。来自他们的网站：

> 该模块使用户能够订阅节点或分类法更改的通知，例如特定论坛中的新评论或某些类别的博客的添加。一旦启用，所有节点都会有一个额外的链接，允许用户更改他们的订阅。用户在他们的用户屏幕上有标签来管理他们自己的订阅。用户还可以设置自动订阅功能，如果有人对他们发表的帖子发表评论，则会通知用户。管理员可以默认启用此功能。

*免责声明：我与此模块或其开发人员没有任何关系。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-01T20:56:41.873

我正在使用具有非常好的规则集成[的标志模块](https://drupal.org/project/flag)，它适用于简单的“事件 > 条件 > 操作（发送电子邮件）”通知。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-06T13:14:44.997

另一种选择可能是使用[消息模块](https://drupal.org/project/message)和[消息通知](https://drupal.org/project/message_notify)（两者都具有超过 10K 安装的稳定版本）。

从模块描述页面：

> 该模块提供了一种通过通知插件发送消息的方法。Message Notify 带有用于电子邮件和 SMS 的插件，并且可以根据需要扩展到其他传输机制。
> 
> Message Notify 是消息堆栈的一部分，消息堆栈是一套模块，为消息传递和通知提供框架。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-04T13:43:29.397

[Total Subscription](https://www.drupal.org/project/total_subscription)模块是订阅的另一种选择。关于它的一些细节（来自它的项目页面）：

> Total Subscription 提供了允许用户订阅节点页面、分类术语等的功能。它与其他订阅模块的主要区别在于它允许订阅匿名用户和经过身份验证的用户。
> 
> ... 使用户能够：
> 
> *   通过节点页面订阅特定的内容类型。
> *   在节点页面订阅与节点关联的相关分类术语。
> *   从术语页面订阅特定的分类术语。
> *   取消订阅任何以前的订阅。
> *   添加一个单独的 ctools 内容类型 - “订阅”，它可以与任何面板页面集成。
> *   将“订阅”块添加到任何区域。

有关它的更多详细信息，请参阅其[社区文档](https://www.drupal.org/node/2170825)，或本[视频教程](https://m.youtube.com/watch?v=jL41iZfxmpM)（无声...），带您浏览各种管理屏幕。

除此之外，要了解此模块的内容，[readme.txt](http://cgit.drupalcode.org/total_subscription/tree/README.txt)也可能会有所帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-10T16:09:19.073

我使用了订阅模块，它工作正常。

我已允许经过身份验证的用户订阅某些特定分类法的某些内容类型。

可以定期发送电子邮件，并且可以使用 mail_edit 修改电子邮件模板。

我使用了一个选项，每周发送一次摘要电子邮件，结合自上次摘要以来每种新内容类型的预告片

# iphone - 如何让用户将单元格添加到表格视图的自定义位置？

> ID：11809403
> 
> 赞同：0
> 
> 时间：2012-08-04T14:33:05.460
> 
> 标签：iphone, ios, ipad, uitableview, tableview

我正在寻找如何让用户在“编辑”模式下在表格视图中的任何位置添加项目的设计示例（前端）。这适用于我正在创建的 iPhone/iPad 通用清单应用程序。

目前我只能找到在顶部或底部添加新项目然后移动它们的示例。但不是用户可以指定新项目的插入位置的地方。

我正在考虑让用户选择一行，然后在其下方插入新项目。此选项的问题是我还希望保留“点击一行”功能以进入扩展编辑模式（推送不同的视图），用户可以在其中编辑清单项目的详细信息。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:40:29.293

在每个单元格之间的左侧或右侧有一个“>”形按钮，您可以点击以在其中插入一个？

一些应用程序还允许您将两个单元格分开，以便在该位置出现一个新单元格。

# c# - C#：如何在使用“默认”存储时向属性添加前提条件？

> ID：11809406
> 
> 赞同：1
> 
> 时间：2012-08-04T14:33:19.603
> 
> 标签：c#, properties, preconditions

想象一个默认属性：

```
class Positive {
  public int Value { get; set; }
} 
```

我想添加一个前提条件：该`set`值只能是正数。是否可以在不添加成员变量样板的情况下做到这一点？

```
 public int Value { get;
     set {
        if(value < 0) throw new ArgumentOutOfBoundsException();
        // continue doing 'the default thing'
        // instead of `value_=value`, mirrored by a change in the
        // get, and adding the `int value_` member variable
     }
  }; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T14:37:20.503

不，您需要显式声明该属性才能执行您需要的操作。无论如何，自动实现的属性只是较长语法的简写，因此为了向`get`or添加额外的逻辑，`set`您必须手动对其进行编码。

# android - Android：在服务中执行网页

> ID：11809407
> 
> 赞同：0
> 
> 时间：2012-08-04T14:33:36.260
> 
> 标签：android

我想在android活动的服务中打开一个网页，然后在网络执行后我想获取新的URL。

我想使用例如“www.example.com/login.jsp?username=xxx&password=YYY”的网站来检查用户名和密码的有效性，如果用户存在，我将在新的 URL www.example 中拥有。 com/fstPage.jsp

帮助PLZ

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:00:09.243

您可能应该在第二个链接检查有效性。服务器端应包括接受请求的方法，如 www.example.com/fstPage.jsp?username=XXX&password=YYY，然后服务器返回适当的站点。

我认为这是以最简单的方式做到这一点的好方法。为什么要使用重定向...

```
public class Example extends Activity {
    WebView webview;
    String url;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ProgressDialog pd = ProgressDialog.show(this, "", "Loading", true);
        webview = (WebView) findViewById(R.id.webViewBuy);
        webview.getSettings().setJavaScriptEnabled(true);
        url = "www.example.com/fstPage.jsp" + "?username="
                + User.getUsername() + "&password=" + User.getPassword();
        webview.loadUrl(url);

        webview.setWebViewClient(new WebViewClient() {
            public void onReceivedSslError(WebView view,
                    SslErrorHandler handler, SslError error) {
                handler.proceed();
            }
            @Override
              public void onPageFinished(WebView view, String url) {
              pd.dismiss();
            }
        }); 
    }

} 
```

# visual-studio-2010 - 在 Silverlight 4.0 中获取最后插入的 ID

> ID：11809409
> 
> 赞同：0
> 
> 时间：2012-08-04T14:34:00.610
> 
> 标签：visual-studio-2010, silverlight, linq, wcf-data-services, ria

```
 DomainServiceAccountManager d = new DomainServiceAccountManager();
    Web.Buy b=new Web.Buy();
    b.ID_member = IDMemberToBuy;
    b.Money = MoneyBuy;
    b.Tarikh = tarikh;
    b.Hesab = false;
    d.Buys.Add(b);
    d.SubmitChanges(op => { if (!op.HasError) MessageBox.Show(b.ID.ToString()); }); 
```

但我收到了这个错误：

> 方法“SubmitChanges”没有重载需要 1 个参数
> 
> C:\Users\farzad\Documents\Visual Studio 2010\Projects\AccountManager\AccountManager\Views\Login\CWBuy.xaml.cs 214 13 AccountManager

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:39:35.770

有两种[`SubmitChanges`](http://msdn.microsoft.com/en-us/library/ff422910%28v=vs.91%29)方法。

第[一个](http://msdn.microsoft.com/en-us/library/ff422324%28v=vs.91%29)**不**带参数，而[第二个](http://msdn.microsoft.com/en-us/library/ff423067%28v=vs.91%29)带**两个**。

您需要将第二个参数 - `Object`（代表用户状态）传递给您的调用。

# css - 更改 Wordpress 中的当前菜单项

> ID：11809410
> 
> 赞同：0
> 
> 时间：2012-08-04T14:34:03.503
> 
> 标签：css, wordpress

我正在为一个有很长菜单的客户设计一个网站，该菜单源于另一行。我想为第二行的菜单项添加不同的颜色，所以我只需要为这些菜单项更改当前菜单项 - 我最初为这些菜单项分配了一个 .nav2 类，以便更改上述项目的 a:hover 。

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:15:45.577

我将在这里暗中尝试，因为您的问题非常令人困惑：

```
.current-menu-item.nav2  {
    background: red;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-14T12:57:53.650

For wordpress:

```
.menu .current_page_item a
{
  background:#000;
} 
```

# jquery - 从页面加载内容..通过类的href...在模态中

> ID：11809418
> 
> 赞同：1
> 
> 时间：2012-08-04T14:36:25.947
> 
> 标签：jquery, modal-dialog, colorbox, html-content-extraction

尝试执行以下操作：我的页面有很多带有 's 的 div 来打开模态框（颜色框）。这些链接打开的页面有一个 id="mainColumn"。只需从此 id 加载内容。

我有这个：

```
<div>                       
<a href="includes/page_1.html" class="modal"></a>
</div>

<div>                       
<a href="includes/page_2.html" class="modal"></a>
</div>

<div>                       
<a href="includes/page_3.html" class="modal"></a>
</div>

 $(".modal").colorbox({
    width:900,
    href: $(".modal").attr('href') + " #mainColumn"
    }); 
```

它工作得很好...除了 al 的 href 更改为第一个...

因此，includes/page_3.html 更改为 includes/page_1.html 或换句话说：所有的模态框都显示相同的内容......

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:39:24.713

用于`$(this)`获取当前（点击）一个

```
$(".modal").colorbox({
    width:900,
    href: $(this).attr('href') + " #mainColumn"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:51:52.433

```
$(".pop").each(function() {
  var el = $(this);
  el.colorbox({
    href: el.attr('href') + " #mainColumn"
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:53:24.360

你可以这样做：

```
$(".modal").colorbox({
    width:900,
    href: function(){ return $(this).attr('href') + " #mainColumn"; }
}); 
```

或这个：

```
$(".modal").each(function(){
    $(this).colorbox({
        width:900,
        href: $(this).attr('href') + " #mainColumn"
    });
}); 
```

# glsl - GLSL 自旋锁永不终止

> ID：11809421
> 
> 赞同：2
> 
> 时间：2012-08-04T14:37:11.357
> 
> 标签：glsl

我正在尝试实现一个 GLSL 自旋锁，以便能够实现单程深度剥离。我遇到了麻烦，因为锁定纹理使用的例子很少。我不得不承认，我真的不知道自己在做什么，所以为了安全起见，我描述的上下文可能比必要的要多。

我写了一个片段程序，它应该什么都不做：

```
#version 420 core

//The lock texture holds either 0 or 1.
//0 means that the texture is available.
//1 means that the texture is locked.  
layout(r32ui) coherent uniform uimage2D img2D_0; //locking texture

layout(RGBA32F) coherent uniform image2D img2D_1; //data texture (currently unused)

void main() {
    ivec2 coord = ivec2(gl_FragCoord.xy);

    //The loop's exchange function swaps out the old value with 1.

    //If the locking texture was 0, 0 will be returned, terminating the loop;
    //the locking texture will now contain 1, indicating that the locking
    //texture is now locked.

    //Conversely, if the locking texture contains 1, then the exchange function
    //will write a 1 (so the texture is still locked), and return 1, indicating
    //that the texture is locked and unavailable.
    while (imageAtomicExchange(img2D_0,coord,1u)==1u);

    //The locking texture is locked.  More code would go here

    //This unlocks the texture.
    imageAtomicExchange(img2D_0,coord,0);
} 
```

锁定纹理是这样创建的：

```
//data is an array initialized to all 0.
glTexImage2D(GL_TEXTURE_2D,0,GL_R32UI,size_x,size_y,0,GL_RED_INTEGER,GL_UNSIGNED_INT,data); 
```

为了执行该算法，我采用了一个带有彩色 RGBA F32 渲染附件的 FBO 并启用它。我绑定了上面的着色器，然后将锁定纹理传递给 img2D_0 并将颜色附件传递给 img2D_1，使用以下代码：

```
glBindImageTextureEXT(
    /* 0, 1, respectively */,
    texture_id, 0,GL_FALSE,0, GL_READ_WRITE,
    /* GL_R32UI, GL_RGBA32F, respectively */
); 
```

然后使用 VBO 呈现对象，并且一些辅助通道显示数据的内容。

The problem is that the fragment program given crashes the video driver (because it never terminates). My question is why? The texture is initialized to 0, and I'm pretty sure my logic for the exchange functions is valid. Is my setup and methodology basically correct?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:16:06.080

One issue is that if two threads in the same warp hit the same lock location, that warp will deadlock as one thread will acquire the lock and the other thread will loop, and the warp will continue executing the looping thread, which prevents the thread with the lock from ever making any progress.

**edit**

based on your revised pastebin, I would suggest something like:

```
bool done = false;
while (!done) {
    if ((done = (imageAtomicExchange(img2D_0,coord,1u)==0))) {
        // guarded operations
                 :
        imageStore(img2D_0, coord, 0);
    }
} 
```

This avoids the warp loop deadlock as the threads left out are those that have already completed their locked modification. If only one thread can acquire its lock, that thread will make progress.

# http - 如何分析 HTTP Post 请求

> ID：11809431
> 
> 赞同：0
> 
> 时间：2012-08-04T14:38:14.493
> 
> 标签：http, post, http-headers, sms, sms-gateway

如果有一个 SMS 服务发出`HTTP`请求，我们能知道发送消息的 HTTP 请求并检索它的信息吗？`url`和`post`标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T17:05:51.757

如果您知道正在使用哪个 API，那么是的，您可以计算出除用户名和密码之外的所有内容。如果您不知道正在使用的 API 或站点，那么您就没有机会。

至于 HTTP API 的替代方案，是的，有一些（例如电子邮件网关），但最终它们都最终使用 SMPP 服务器。

# c++ - 从接口派生的模板 - 多态停止工作？

> ID：11809432
> 
> 赞同：3
> 
> 时间：2012-08-04T14:38:15.287
> 
> 标签：c++, templates, polymorphism

> **可能重复：**
> [访问派生类中的受保护成员](https://stackoverflow.com/questions/3247671/accessing-protected-members-in-a-derived-class)

如果我有一个抽象基类和一个从它派生的具体模板类，它有一个使用指向基类的指针的方法 - 派生类似乎不再将自己视为从它派生的：

```
class AbstractBase
{
protected:
    virtual void test() = 0;
};

template < class T >
class Derived : public AbstractBase
{
public:
    virtual void call( AbstractBase* d ) { d->test(); }  //  Error!
protected:
    virtual void test() {}
};

int main()
{
    Derived< int > a;
    Derived< int > b;

    b.call( &a );

    return EXIT_SUCCESS;
} 
```

这与以下错误有关：

> 'virtual void AbstractBase::test()' 受保护

编译器没有错，肯定是`protected`- 但如果`Derived< T >`继承自`AbstractBase`，为什么会抱怨？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:02:15.047

不允许它的原因是因为`AbstractBase`作为类型声明`test`受保护。这使它对所有人都是私有的，除非当前类是`AbstractBase`. 即便如此，该类只能通过同一类的对象访问成员，而不是不同的后代，也不能直接从`AbstractBase`自身访问。

```
template < class T >
class Derived : public AbstractBase
{
public:
    virtual void call( Derived * d ) {
        d->test(); // ok, d has same type as this
        AbstractBase *b = this;
        b->test(); // not ok
    }
protected:
    virtual void test() {}
}; 
```

如上所述，您可以只允许它用于相同类型的指针。或者，您可以创建一个代理基类`Derived`来实现您`virtual`的调用方法`test`。这将允许从不同`Derived`类型的访问。

```
class DerivedBase : public virtual AbstractBase
{
public:
    virtual void call( DerivedBase * d ) { d->test(); }
};

template < class T >
class Derived : public DerivedBase
{
protected:
    virtual void test() {}
}; 
```

并且可以通过这种方式访问​​：

```
 Derived< int > a;
   Derived< int > b;
   Derived< float > c;

   b.call( &a );
   c.call( &a ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:18:34.713

这与模板无关，但通常与受保护的成员访问有关。请参阅最新公开可用的 C++[标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)草案的**第 11.4 节受保护的成员访问 [class.protected]**

> 当非静态数据成员或非静态成员函数是其命名类 (11.2) 的受保护成员 115 如前所述，授予对受保护成员的访问权限是因为引用出现在某个类 C 的朋友或成员中。如果访问要形成指向成员的指针 (5.3.1)，则嵌套名称说明符应表示 C 或从 C 派生的类。所有其他访问都涉及（可能是隐式的）对象表达式（5.2.5）。在这种情况下，对象表达式的类应为 C 或从 C 派生的类。

[例子：

```
class B {
protected:
    int i;
    static int j;
};

class D1 : public B {
};

class D2 : public B {
    friend void fr(B*,D1*,D2*);
    void mem(B*,D1*);
};

void fr(B* pb, D1* p1, D2* p2) {
   pb->i = 1; // ill-formed
   p1->i = 2; // ill-formed
   p2->i = 3; // OK (access through a D2)
   p2->B::i = 4; // OK (access through a D2, even though
                 // naming class is B)
   int B::* pmi_B = &B::i; // ill-formed
   int B::* pmi_B2 = &D2::i; // OK (type of &D2::i is int B::*)
   B::j = 5; // OK (because refers to static member)
   D2::j = 6; // OK (because refers to static member)
} 
```

# python - 在 Python 中监控并发（跨进程共享对象）

> ID：11809438
> 
> 赞同：2
> 
> 时间：2012-08-04T14:39:18.463
> 
> 标签：python, concurrency, process, monitor, sharing

我是新来的，我是意大利人（如果我的英语不太好，请原谅我）。我是一名计算机科学专业的学生，​​我正在使用 Python 进行并发程序项目。我们应该使用监视器，一个带有方法和数据（例如条件变量）的类。此类监视器的实例（对象）应该在我们拥有的所有进程中共享（由 os.fork o 由 multiprocessing 模块创建），但我们不知道该怎么做。线程更简单，因为它们已经共享内存，但我们必须使用进程。有没有办法让这个对象（监视器）在所有进程中共享？希望我不是在胡说八道……非常感谢大家对巡回演出的关注。等待答案。洛伦佐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:55:28.430

进程之间的共享内存通常不是一个好主意；调用时`os.fork()`，操作系统将父使用的和子继承的所有内存标记为写时复制；如果任一进程尝试修改页面，则会将其复制到两个进程之间不共享的新位置。

这意味着您通常的线程原语（锁、条件变量等）不能用于跨进程边界进行通信。

有两种方法可以解决这个问题；首选方法是使用管道，并在两端串行化通信。布赖恩凯恩的回答，使用`multiprocessing.Queue`，以这种确切的方式工作。因为管道没有任何共享状态，并且使用内核提供的强大的 ipc 机制，所以您不太可能最终导致进程处于不一致状态。

另一种选择是以特殊方式分配一些内存，以便操作系统允许您使用共享内存。最自然的方法是使用`mmap`. 但是，cPython 不会将共享内存用于本机 python 对象，因此您仍然需要理清如何使用此共享区域。一个合理的库是 numpy，它可以将无类型的二进制内存区域映射到某种有用的数组中。但是，在管理并发方面，共享内存更难使用；因为一个进程没有简单的方法可以知道另一个进程如何访问共享区域。这种方法唯一有意义的时候是少数进程需要共享大量数据，因为共享内存可以避免通过管道复制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:47:52.330

就“共享”实例而言，我相信讲师希望您将监视器的接口设置为与其本地进程一样，就好像它是共享的（a la CORBA）。

`multiprocessing`查看关于's的绝对精彩的文档[`Queue`](http://docs.python.org/library/multiprocessing.html#multiprocessing.Queue)：

```
from multiprocessing import Process, Queue

def f(q):
    q.put([42, None, 'hello'])

if __name__ == '__main__':
    q = Queue()
    p = Process(target=f, args=(q,))
    p.start()
    print q.get()    # prints "[42, None, 'hello']"
    p.join() 
```

您应该能够想象当进行更改时，监视器的属性如何在对等进程之间传播。

# c++ - 将编译的最小 C++ 程序

> ID：11809441
> 
> 赞同：8
> 
> 时间：2012-08-04T14:39:36.787
> 
> 标签：c++

什么是最小的 C++ 程序，可以编译而没有任何错误？

功能并不重要。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T14:46:42.097

以下应该是最短的：

```
int main(){} 
```

请注意，省略返回值而不调用未定义的行为只能使用`main()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T14:41:13.357

我相信这就是它

```
int main(){} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T14:44:34.117

 `这将编译，但不会链接。;)

```
~/blargh
16:48:24 $ cat t.cpp

~/blargh
16:50:21 $ clang++ -c t.cpp 
~/blargh
16:50:28 $ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T14:42:17.640

```
int main; 
```

使用 gcc 编译，没有警告。`

# java - 我已经使用 java 创建了一个端口扫描器，但是当我单击执行时它只是冻结

> ID：11809443
> 
> 赞同：0
> 
> 时间：2012-08-04T14:39:42.680
> 
> 标签：java, for-loop, freeze, port-scanning

下面的代码是我用来创建端口扫描器的代码，但是，当我单击“扫描”时，它会执行，但 gui 会冻结，直到完成扫描，有没有可能的方法允许它在扫描时执行其他操作？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

public class PortScannerGUI extends JFrame implements ActionListener
{
JPanel Panel = new JPanel(null);
JTextField Field = new JTextField();
JButton Button = new JButton();
JTextArea Area = new JTextArea();
JButton limit = new JButton("limit");

public PortScannerGUI()
{
    super();
    setSize(350, 400);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setResizable(false);
    setLocationRelativeTo(null);
    LoadUI();
}

public void LoadUI()
{
    Area.setBounds(20, 50, 310, 310);
    Area.setBorder(BorderFactory.createLineBorder(Color.BLUE));
    Area.setEditable(false);

    Field.setBounds(20, 10, 200, 35);

    Button.setBounds(230, 10,100, 35);
    Button.setText("Scan");
    Button.addActionListener(this);

    Panel.add(Field);
    Panel.add(Area);
    Panel.add(Button);
    add(Panel);
    setVisible(true);
}

public static void main(String[] args)
{
    PortScannerGUI Main = new PortScannerGUI();
}

@Override
public void actionPerformed(ActionEvent arg0)
{
    Thread Runner = new Thread();
    Runner.start();
    int j=0;
    String str = Field.getText();
    for(int i=1;i<str.length();i++)
    {
        if(str.substring(i-1, i).equals("."))
        {
            j++;
        }
    }
    if(!str.equals("") || j==4 || j==6)
    {
        try
        {
            InetAddress IP = InetAddress.getByName(str);
            PortScanner P = new PortScanner(IP);
        }
        catch (Exception e){}
    }
    else
    {
        JOptionPane.showMessageDialog(null, "Not an IP address");
    }

}
} 
```

上面的代码是 GUI 部分的代码，下面是实际扫描端口的代码。

```
import java.io.IOException;

import java.net.InetAddress;

import java.net.Socket;

public class PortScanner
{
public PortScanner(InetAddress iA)
{
    for (int port = 1; port <= 65535; port++)
    {
        try
        {
            Socket s = new Socket(iA, port);
            System.out.println("Port " + port + " is open");
            s.close();
        }
        catch(IOException e)
        {

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T14:43:52.163

这是在 Swing 事件线程（EDT 或 Event Dispatch 线程）中执行长时间运行的进程并因此冻结该线程使您的 GUI 无法运行的经典示例。我们一次又一次地看到这样的事情发布，解决方案是相同的，并且相对简单：在后台线程中执行长时间运行的进程，例如可以由 SwingWorker 提供。有关这方面的更多信息，请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，或在此站点上搜索类似的问题，因为再次讨论了很多。

关于您的代码的另一点，**永远**不要这样做：

```
 catch(IOException e)
    {

    } 
```

如果您忽略异常，您实际上是在盲目飞行。至少，打印一个堆栈跟踪，即：

```
 catch(IOException e)
    {
       e.printStackTrace();
    } 
```

这里也一样：

```
 try {
        InetAddress IP = InetAddress.getByName(str);
        PortScanner P = new PortScanner(IP);
     } catch (Exception e) {
        e.printStackTrace();  // **** add this!
     } 
```

我自己，我在 PortScanner 构造函数中设置了 PortScanner 对象，但是会在一个单独的公共方法中运行扫描，比如调用`scan()`. 这将允许我在事件线程上设置 PortScanner 对象，然后通过调用其`scan()`方法在后台线程中对其进行扫描。有时这更方便。

**编辑**
我还将赋予 PortScanner 类添加 PropertyChangeListener 的能力，以便它可以允许其他类监听它的更改，包括端口信息。这样您就可以在 GUI 中发布 PortScanner 端口信息。最简单的方法是让您的 PortScanner 对象扩展 SwingWorker，因为 SwingWorkers 带有内置的 PropertyChangeSupport。然后您可以使用发布/处理方法对将端口信息发布到 GUI，而不是在 println 语句中打印出来。我上面链接的教程描述了如何执行此操作，如果您遇到困难，我们可以帮助您提供详细信息。

# entity-framework-4 - 如何重置 Entity Framework 4 的数据库迁移

> ID：11809446
> 
> 赞同：1
> 
> 时间：2012-08-04T14:40:37.033
> 
> 标签：entity-framework-4

我正在使用 ASP MVC 4 和 EF 4。我使用包管理器控制台来运行 Enable-Migration 命令。然后我做了一些更改并在每个更改之后运行 Add-Migration。我现在想清除所有小的更改并重新创建一个迁移脚本。

我怎样才能做到这一点？

EF 在哪里记住它派生下一个 Add-Migration 脚本的“最后一个实体状态”？

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:06:04.247

我发现 Enable-Migration 脚本创建了 _MigrationHistory 表，该表存储了已应用于数据库的迁移。在我删除了该表中的记录和迁移目录中的迁移脚本后，我重新运行了 Add-Migration 并创建了一个迁移脚本。

# php - 如何将 csrf 字段 id 从 YII_CSRF_TOKEN 更改为任何其他

> ID：11809448
> 
> 赞同：3
> 
> 时间：2012-08-04T14:41:05.483
> 
> 标签：php, yii, csrf

我正在使用 Get 方法进行表单发布，但我对人们是否可以看到我是否使用 yii 框架不感兴趣。因此，我不需要使用 YII_CSRF_TOKEN，而是需要创建自己定义的 id 名称，例如只使用 TOKEN。

我不想透露我正在使用什么框架，任何提示或帮助???

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T15:07:29.633

在您的应用程序配置中添加以下代码

```
'request'=>array(    
    'csrfTokenName'=>'YOUR_TOKEN_NAME_HERE',
), 
```

# mysql - 将 csv 文件西里尔字符导入 Mysql - PHPMyadmin

> ID：11809449
> 
> 赞同：0
> 
> 时间：2012-08-04T14:41:07.360
> 
> 标签：mysql, csv, utf-8, import, alphabetical

你好这里的难题，

我正在尝试导入带有西里尔字符的 csv 文件，例如（俄罗斯城市，它们可能超过 40.000） - 这显示在记事本 ++ 编辑器中，编码设置为 UTF-8 而没有 bom -：

```
RU,101000,Москва,Москва,,,,,,55.7522,37.6156,4
RU,101194,Москва 194,Москва,,,,,,55.7522,37.6156,1
RU,101300,Москва 300,Москва,,,,,,55.7522,37.6156,1 
```

然后我使用 phpmyadmin 中的导入选项卡将其导入。当我浏览导入的数据时。我有以下字符：

```
RU  101000  ÐœÐ¾ÑÐºÐ²Ð°     ÐœÐ¾ÑÐºÐ²Ð°
RU  101194  ÐœÐ¾ÑÐºÐ²Ð° 194     ÐœÐ¾ÑÐºÐ²Ð°
RU  101300  ÐœÐ¾ÑÐºÐ²Ð° 300     ÐœÐ¾ÑÐºÐ²Ð° 
```

我已经将数据库设置为 utf8_general_ci，我尝试了 utf8_unicode_ci 和 utf8_lithuanian_ci... 我不知道如何在 phpmyadmin 面板中强制显示 utf8。是否有解决方案可以通过 SQL 输入导入数据槽？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:00:36.763

看起来问题与 phpMyAdmin 用于连接 MySQL 服务器的连接管道有关。

根据[此解决方案](http://forum.coppermine-gallery.net/index.php/topic,59918.msg297139.html)，phpMyAdmin 用于`cpg_db_connect()`连接到您的数据库服务器，并且需要对其进行更新以包含`SET NAMES 'utf8'`。他们给出了以下示例：

```
function cpg_db_connect()
{
        global $CONFIG;
        $result = @mysql_connect($CONFIG['dbserver'], $CONFIG['dbuser'], $CONFIG['dbpass']);
        if (!$result) {
                return false;
        }
        if (!mysql_select_db($CONFIG['dbname']))
                return false;
        mysql_query("SET NAMES 'utf8'", $result); # <-- see here
        return $result;
} 
```

如果您无法编辑您的 phpMyAdmin 安装（假设您在共享服务器上），只需在您自己的站点上的虚拟/子目录中安装 phpMyAdmin，然后找到并编辑此功能。phpMyAdmin 只是一个和其他任何网站一样的 php 网站。

更纯粹的方法（特别是如果您有字符问题）是使用 mysql（例如`mysql -u dbuser -p dbname < import.sql`）通过 ssh 导入数据。

# sql - 带有两个具有引用键的表的 sql 查询

> ID：11809451
> 
> 赞同：0
> 
> 时间：2012-08-04T14:41:16.477
> 
> 标签：sql, isqlquery

我有两张桌子：

```
Discounts(disid primary key)

Cust(custid primary key, disid ref discount(disid)) 
```

现在我需要一个查询来获得`custid`所有`disid`（折扣券），并且客户可能`disid`不止一次包含相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:54:10.833

尝试以下任一解决方案：

```
SELECT  a.custid, COUNT(a.disid) totalCoupon
FROM    cust a  
            INNER JOIN discounts b 
                ON b.disid = a.disid 
GROUP BY a.custid 
```

或者

```
SELECT  a.custid, COUNT(a.disid) totalCoupon
FROM    cust a  
            INNER JOIN discounts b 
                ON b.disid = a.disid 
GROUP BY a.custid
HAVING   COUNT(a.disid) > 1 -- customers having the same (but more than 1) 
                            -- CouponID will only be shown here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:47:27.143

```
select custid, count(distinct disid) from cust
group by custid
having count(*) = (select count(*) from discounts) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T14:49:03.570

```
SELECT COUNT(DISTINCT D.disid) FROM CUST C 
INNER JOIN DISCOUNTS D ON D.disid=C.disid GROUP BY D.disid 
```

# android - 如何在 Android 中执行某些动画时播放声音

> ID：11809455
> 
> 赞同：2
> 
> 时间：2012-08-04T14:42:18.927
> 
> 标签：android, android-animation

我正在制作一个应用程序，它会进行 5 秒的特定处理，然后给出结果。在那段时间里，我想应用一些`Animation`并播放一些声音，以避免用户无所事事地观看正在发生的事情。

我已经应用`Animation`并需要一些帮助来了解如何在特定时间播放声音。我有一个 5 秒的声音文件。

任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T15:15:13.247

```
Animation myAnimation = AnimationUtils.loadAnimation(this, R.anim.myanimation);
animationFalling.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationStart(Animation animation) {
         //here you can play your sound
    }

    @Override
    public void onAnimationRepeat(Animation animation) {
    }

    @Override
    public void onAnimationEnd(Animation animation) {
         // here you can stop playing your sound
    }
}; 
```

关于如何播放你的声音，有[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)或[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)来播放它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:44:10.377

尝试阅读以下文档：

[http://developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

这处理在操作系统上播放声音。

# php - 无法以管理员身份将条目发布到 Facebook 粉丝页面墙

> ID：11809456
> 
> 赞同：0
> 
> 时间：2012-08-04T14:42:19.717
> 
> 标签：php, facebook, facebook-graph-api

我试图以管理员身份发布到 Facebook 粉丝页面墙上是徒劳的。我想在我的粉丝页面墙上发布带有图片、链接、描述等的新条目。这已集成到我的自定义 cms 中，因此每当我的网站上更新故事时，它会自动在粉丝页面墙上发布相同内容。问题是，每当我发帖时，帖子不会显示为管理员发布的帖子。它在时间线右侧显示为其他人的帖子。如何绕过以下代码，以便它在我的粉丝页面墙上以管理员身份发布？我看了两天，在网上查了类似的东西等等，但我似乎仍然无法破解它。帮助将不胜感激。

```
$page_id = 'xxxxxxxxxx';
$article_link = "http://xyz.com/articles/headlines/title-one/";

$result = $facebook->api("/me/accounts");
foreach($result["data"] as $page) {
    if($page["id"] == $page_id) {
        $page_access_token = $page["access_token"];
        break;
    }
}   

$og_title = "Sample title";
$og_image = "http://xyz.com/images/articles/919161344090182.jpg";
$msg = "some description of the article";
$feed_array = array(
    'access_token' => "$page_access_token",
    'message' => "$msg",
    'picture' => "$og_image",
    'link' => "$article_link",
    'name' => "$og_title",
    'caption' => "$og_title"
);

try {
    $page_post = $facebook->api("/$page_id/feed","post",$feed_array);
} catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:22:38.597

如果您想**作为页面发布**- 这意味着该帖子将显示为好像该页面发布了[此处显示的更新：
![](../Images/5a873d7f3531ee171421d70609c4816f.png)](https://i.stack.imgur.com/9HnYQ.png)

然后，您将必须使用有效的页面访问令牌。[Facebook 身份验证文档](https://developers.facebook.com/docs/authentication/)中提供了有关如何获取此类令牌的信息。看起来您的代码中已经有一个令牌 - 您可以使用[Facebook 调试器](https://developers.facebook.com/tools/debug)对其进行测试，看看它是否仍然有效。

您可能想尝试的另一件事是，您可以使用`setAccessToken()`PHP SDK 的功能，而不是将令牌附加为 post 数组的参数之一。更多细节可以在这里找到 - [https://developers.facebook.com/docs/reference/php/facebook-setAccessToken/](https://developers.facebook.com/docs/reference/php/facebook-setAccessToken/)

```
$facebook->setAccessToken($new_access_token); 
```

* * *

最后顺便说一句，当您指定数组的元素时，除非您想专门添加引号字符，否则无需将值括在引号中。

```
$feed_array = array(
  'access_token' => $page_access_token,
  'message' => $msg,
  'picture' => $og_image,
  ...
); 
```

如果您想明确地将引号添加到值中，则必须执行以下操作-

```
$feed_array = array(
  'string_value' => '"'.$value.'"',
  ...
); 
```

# php - jq_form_remote_tag 中断

> ID：11809458
> 
> 赞同：0
> 
> 时间：2012-08-04T14:42:34.680
> 
> 标签：php, jquery, symfony1, symfony-1.4

我做 a`jq_form_remote_tag`并更新 a `div`。它工作正常。但是在某种情况下，我想中断更新并重新加载整个页面。

如何停止`jq_form_remote_tag`并完全重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:07:42.683

我认为，您应该返回一个将重新加载页面的 js：

当调用你的`jq_form_remote_tag`，添加选项`script`。它将响应解释为 javascript。

```
<?php echo jq_form_remote_tag(array(
  'url'      => 'shoppinglist/update',
  'update'   => 'list',
  'script'   => 1,
  'loading'  => jq_visual_effect('fadeIn', '#indicator'),
  'complete' => jq_visual_effect('fadeOut', '#indicator'),
  )) ?> 
```

然后，在 的模板中`shoppinglist/update`，您应该返回如下内容：

```
<script type="text/javascript">window.location.reload()</script> 
```

或直接从使用以下操作的操作：

```
$this->renderText('<script type="text/javascript">window.location.reload()</script>'); 
```

因此，它将填充`list`元素，然后重新加载页面。

# javascript - 如何检测移动到不同的域页面？

> ID：11809471
> 
> 赞同：0
> 
> 时间：2012-08-04T14:44:26.763
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我有一个 ruby​​ on rails 应用程序，我想检测用户在模型创建向导中移动到不同的域页面。我在向导的第一步将模型数据存储到数据库中，并在向导的第二步将模型数据存储到了数据库中。如果用户在第二步移动到不同的域页面，我想销毁它。

我已经找到了一种方法来挂钩 onbeforeload 事件以向用户显示警告。但我只想在用户移动到不同的域页面而不是第三步时警告它。如果用户想移动不同的域页面，那么我想销毁存储的数据。

这样做的最佳解决方案是什么？有没有办法检测用户想去哪里？

编辑：在第二步中，我想从用户上传文件（使用 jQuery File Uploader 的 ajax 上传）创建模型并与第一步的模型相关联。因此，如果我可以得到哪个 id 将分配给第一步的模型，那么我可以很容易地与之关联。这就是为什么我想在第一步中存储数据。

而且我不想在用户明确离开向导之前使未完善的模型过期。然后我可以检测用户是否仍在打开向导并且只是停止很长时间或已经离开向导页面？（我想像桌面应用程序一样构建应用程序，以便用户可以拥有未保存的文件，直到在多个浏览器窗口上明确离开向导）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:54:18.197

那是不可能的。一旦您的页面被卸载，您将无法执行任何其他操作。如果用户正在加载另一个域页面，则该域可以控制该页面，而不是您。

您应该做的是将向导页面的数据不存储在数据库中，而是存储在会话状态中，甚至存储在 cookie 中，这是一种很好的做法。然后，当用户到达向导的最后一步时，您从 cookie/session 中读取数据并立即写入 db。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:03:13.783

您无法确定用户在`onbeforeunload`事件中的预期目的地或任何其他目的地。您也无法阻止用户加载另一个页面的请求，而是将他们重定向到某些`destroy`操作，然后再将其发送出去。

如果您满足于在用户完成向导时在每个步骤中将数据存储到数据库中，您可以考虑设置一个 cron 作业来运行您创建的 rake 任务，该任务可以通过并删除不完整的向导，这些向导早于一定年龄。

cron *（或等效项）*实际上是我会考虑做的事情，即使您*可以*检测到用户离开您的站点。

# php - 如果不存在则创建目录，否则移动文件

> ID：11809478
> 
> 赞同：1
> 
> 时间：2012-08-04T14:45:13.470
> 
> 标签：php, wordpress

我有以下代码来上传文件：

```
<?php
//set the image size in mb
$max_upload_size='10';
$MAXIMUM_FILESIZE = $max_upload_size * 1024 * 1024;
get_current_user();
global $current_user;
$uploaddir = './uploads/file/'.$current_user->user_login.'/'; 
$file = $uploaddir . basename($_FILES['uploadfile']['name']); 
if ($_FILES['uploadfile']['size']<$MAXIMUM_FILESIZE) {
if (move_uploaded_file($_FILES['uploadfile']['tmp_name'], $file)) { 
  echo "success"; 
} else {
    echo "error";
}
}else{
    echo"size_error";
}
?> 
```

如果 user_login 已经存在于 /uploads/file/ 目录下，这将非常有用。如果它不存在，如何创建基于变量 $current_user->user_login 的目录？如果存在，则继续下一个代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T14:54:27.053

从[http://nz.php.net/manual/en/function.move-uploaded-file.php#105026](http://nz.php.net/manual/en/function.move-uploaded-file.php#105026)：

> 目标目录必须存在；move_uploaded_file() 不会自动为您创建它。

只需使用[`is_dir`](http://nz.php.net/is_dir)和[`mkdir`](http://nz.php.net/mkdir)。

```
<?php
//set the image size in mb
$max_upload_size='10';
$MAXIMUM_FILESIZE = $max_upload_size * 1024 * 1024;
global $current_user;
$current_user = get_current_user();
$uploaddir = './uploads/file/'.$current_user->user_login.'/';
if (!is_dir($uploaddir) && !mkdir($uploaddir)){
  die("Error creating folder $uploaddir");
}
$file = $uploaddir . basename($_FILES['uploadfile']['name']); 
if ($_FILES['uploadfile']['size']<$MAXIMUM_FILESIZE) {
if (move_uploaded_file($_FILES['uploadfile']['tmp_name'], $file)) { 
  echo "success"; 
} else {
    echo "error";
}
}else{
    echo"size_error";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:52:12.873

```
 <?php
//set the image size in mb
$max_upload_size='10';
$MAXIMUM_FILESIZE = $max_upload_size * 1024 * 1024;
get_current_user();
global $current_user;
if(!is_dir('./uploads/file/'.$current_user->user_login))
{
   mkdir('./uploads/file/'.$current_user->user_login);
}
$uploaddir = './uploads/file/'.$current_user->user_login.'/'; 
$file = $uploaddir . basename($_FILES['uploadfile']['name']); 
if ($_FILES['uploadfile']['size']<$MAXIMUM_FILESIZE) {
if (move_uploaded_file($_FILES['uploadfile']['tmp_name'], $file)) { 
  echo "success"; 
} else {
    echo "error";
}
}else{
    echo"size_error";
}
    ?> 
```

或者在 $updloaddir 初始化之后添加带有 $uploaddir 参数的 if 语句`is_dir()`and `mkdir()`。

# c# - 如何更改 C# MediaElement 的音频频率

> ID：11809484
> 
> 赞同：1
> 
> 时间：2012-08-04T14:46:33.097
> 
> 标签：c#, audio, windows-runtime, windows-store-apps, mediaelement

我目前正在为 Windows 8 Metro 应用程序开发应用程序 Dj。我想知道如何允许更改“MediaElement”的频率？更改/改变参数的唯一属性是仓位/交易量/余额。但我希望我可以改变频率，例如，以赫兹为单位，或者手动设置运河。非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:31:46.227

MediaElement.PlaybackRate 似乎控制播放速度，但不一定通过影响频率。我相信我在某处读到它的行为可能取决于特定的编解码器或系统，并且对于 Dj 应用程序来说很可能还不够好。我没有测试过所有这些选项，但我认为可以尝试的替代方案是[Media Foundation](http://msdn.microsoft.com/en-us/library/windows/desktop/ee892373%28v=vs.85%29.aspx)、[XAudio2](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.ixaudio2sourcevoice.ixaudio2sourcevoice.setfrequencyratio%28v=vs.85%29.aspx)或[WASAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371455%28v=vs.85%29.aspx)，尽管这些选项也越来越复杂。

# javascript - JavaScript IE 问题

> ID：11809485
> 
> 赞同：0
> 
> 时间：2012-08-04T14:46:39.707
> 
> 标签：javascript, jquery

我有以下网站： [http ://webofdreams.ro/vworker/finemaid/finemaid.html](http://webofdreams.ro/vworker/finemaid/finemaid.html)

它存在一些 java 脚本（jquery 172）问题： 在 IE9 中加载时，它将转到服务器文件夹而不是加载索引页面。在 ie7+ 中，当单击服务选项卡，然后再次单击概览选项卡时，它会执行相同的操作。它似乎也时不时地抛出随机错误。jquery和IE7、8、9有什么不兼容的地方吗？编码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
    <script type="text/javascript" src="js2/jquery-1.7.2.min.js"></script>    
    <script type="text/javascript" src="js2/custom3.js"></script>
</head>
       <div class="main">
            <div class="contentNav clearfix">
                <ul class="secondaryNav">
                    <li><a id="activeLink" class="show1 navButton left" href="">Overview</a></li>
                    <li><a class="show2 navButton">Services</a></li>
                   </ul>
            </div>
            <div class="primaryContent clearfix">                   
                <div class="container clearfix">
                    <div  class="container1"> 
                        <h1>      
                            Fine Maid<br />                    
                             Bay C1 - 3911 Brandon St. S.E.<br />
                            Calgary, AB., T2G 4A7<br />                                                
                            (403) 454-5526<br />
                            For more information visit us at <a href=" http://www.finemaid.com/contact.php" title="Finemaid homepage" class="mainLink">www.finemaid.com</a>           
                        </h1>                    
                        <p class="clearfix">Fine Maid offers a fresh approach to the concept of Residential and Office Cleaning. Very openly, the company offers a variety of cleaning packages with fixed prices (which is something that many other major companies shy away from advertising on their websites). For custom cleaning projects or long-term janitorial cleaning contracts, Fine Maid will provide custom quotes upon consolations with prospective clients and visits to sites.</p>
                        <p>Many household are paying increased attention these days to their cleaning products used. Fine Maid offers residential cleaning services using – at customer's discretion – their eco friendly, scent-free, hypo-allergenic, and environmentally responsible cleaning products.
Fine Maid website provides a wealth of information regarding Government issued recall alerts, other advisory and useful content. For more information<a href="http://www.finemaid.com/useful_resources.php" target="_blank" title="More Info" class="mainLink"> visit here.</a></p>
                        <p>Booking your next cleaning appointment with Fine Maid can not be easier: for any of the fixed-priced residential / office cleaning packages, the website provides a step-by-step booking process (similar to an airline travel booking), allowing customers to book their preferred date and time for when the cleaning person or crew should arrive to their address to perform the cleaning tasks clearly stated in each package's description (which we recommend customers to read, for better understanding of what's included in a package and what not).</p>
                        <p>Fine Maid has clear-stated policies, and the "what happens if" is explained in great detail, giving customers peace of mind. You can book your next cleaning appointment in confidence with Fine Maid in Calgary and area!</p>         
                    </div>
                    <div class="container2">
                        <ul class="services">
                            <li>cleaning services Calgary </li>
                            <li>residential cleaning Calgary </li>
                            <li>office cleaning Calgary  </li>
                            <li>Calgary cleaning companies </li>
                            <li>cleaning Calgary</li>
                            <li>commercial cleaning Calgary</li>
                            <li>home cleaning Calgary</li>
                            <li>cleaning Calgary services</li>
                            <li>residential cleaning</li>
                            <li>Calgary cleaning services</li>
                            <li>Maid service Calgary</li>
                            <li>Calgary cleaning company</li>
                            <li>quality cleaning services </li>
                            <li>professional cleaning services Calgary</li>
                        </ul>
                        <ul class="services">
                            <li>eco cleaning services</li>
                            <li>house cleaning Calgary</li>
                            <li>eco cleaning services Calgary</li>
                            <li>condo cleaning Calgary</li>
                            <li>scent-free cleaning products Calgary</li>
                            <li>hypo-allergenic cleaning products Calgary</li>
                            <li>environmentally responsible cleaning products Calgary</li>
                            <li>Calgary cleaning</li>
                            <li>Janitorial services Calgary</li>
                            <li>Carpet cleaning Calgary</li>
                            <li>quality cleaning services Calgary</li>
                            <li>Maid Calgary</li>
                        </ul>
                    </div>
                </div>
                </div>
<body>
</body>
</html> 
```

**custom3.js**

```
//show hide the main div 1 and 2 content
$(document).ready(function() {
    $('.show1').click(function(){
        if ($('.container1').is(':visible')){
            return
        }
        else { $('.container1').show()
            $('.container2').hide(); 
            $('.show1').attr('id', 'activeLink');
            $('.show2').removeAttr('id', 'activeLink');
        }
    });

    $('.show2').click(function(){
        if ($('container2').is(':visible')){
            return
        }
        else { $('.container2').show();
            $('.container1').hide();
            $('.show2').attr('id', 'activeLink');
            $('.show1').removeAttr('id', 'activeLink');
        }
    });            
}); 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:55:16.197

我在不同版本的 IE 之间没有任何与 jquery 的兼容性问题。jQuery 团队在使 jquery 与所有浏览器兼容方面做得非常出色。问题很可能出在您的 javascript 本身。IE 因其处理 javascript 的问题而臭名昭著。

请更具体地说明代码示例以及您遇到的问题。

**编辑**：您的 html 在 body 标记之外

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
    <script type="text/javascript" src="js2/jquery-1.7.2.min.js"></script>    
    <script type="text/javascript" src="js2/custom3.js"></script>
</head>
<body>
     Content should go here
</body>
</html> 
```

**编辑**：

在链接的 href 中，您应该放置`javascript:void(0)`. 这将阻止链接尝试访问服务器。此外，如果您将两个链接切换为具有相同的类`show`并将您的内容 div 切换为具有 and 的类`Overview`，`Services`您应该能够将您的 javascript 简化为如下所示：

```
$('.show').click(function() {
    if($(this).html() == "Overview") {
        $('.Sevices').hide();
        $('.Overview').show();
    }
    else {
        $('.Overview').hide();
        $('.Sevices').show();
    }

    $('.show').removeClass("activeLink");
    $(this).addClass("activeLink";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:10:08.227

`href`概述链接上有一个空字符串。所以，它试图“跟随”那个`href`，这显然不存在。

# sql-server-2005 - Vistadb SQL 语法错误

> ID：11809494
> 
> 赞同：0
> 
> 时间：2012-08-04T14:47:44.463
> 
> 标签：sql-server-2005, vistadb

vistadb4 无法识别此 sql 视图脚本。但它适用于 sql2005。有解决办法吗？谢谢。

```
SELECT DISTINCT ItemCode, SellingPrice
FROM         dbo.SalesPurchases AS a
WHERE     (KeyID =
                          (SELECT     TOP (1) MAX(KeyID) AS KeyID
                            FROM          dbo.SalesPurchases AS b
                            GROUP BY ItemCode, Type
                            HAVING      (ItemCode = a.ItemCode) AND (Type = 'purchase')))
GROUP BY ItemCode, SellingPrice 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:09:24.147

不确定，但看看这个：

```
SELECT 
  DISTINCT a.ItemCode, a.SellingPrice
FROM         
  dbo.SalesPurchases AS a
JOIN
  (SELECT
     TOP (1) ItemCode, Type, MAX(KeyID) AS KeyID
   FROM
     dbo.SalesPurchases AS 
   GROUP BY 
     ItemCode, Type
   HAVING
     (ItemCode = a.ItemCode) AND (Type = 'purchase')
   ) b
   on b.KeyID = a.KeyID
GROUP BY 
  a.ItemCode, a.SellingPrice 
```

# ffmpeg - ffmpeg - 自动切碎？

> ID：11809496
> 
> 赞同：0
> 
> 时间：2012-08-04T14:48:09.040
> 
> 标签：ffmpeg, iso, dvd

我有一个 ISO 文件，我想将其部分编码为 mp4，以便更容易上传到 youtube。我不确定它如何处理这个 iso 文件中的章节等。我努力了

```
ffmpeg -i file.iso newfile.mp4 
```

效果很好，但它是一个大文件。

我有谷歌并阅读了一些内容，如果您在输出文件中放置一个 %，它应该会根据您设置的 -t 自动为您提供部分视频，所以我继续这样做

```
ffmpeg -i file.iso -t 30 newfile%.mp4 
```

但是，上述方法不起作用，因为它只给了我 30 秒的文件名：newfile%.mp4

感谢您抽出宝贵时间，希望我能得到一些帮助。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:08:19.363

您可以结合使用 -t 和 -ss 来通过脚本执行此操作。这是一个： http: [//grapsus.net/blog/post/A-script-for-splitting-videos-using-ffmpeg](http://grapsus.net/blog/post/A-script-for-splitting-videos-using-ffmpeg)

# c - 哪种计算 nCr 的方法更好

> ID：11809502
> 
> 赞同：47
> 
> 时间：2012-08-04T14:49:04.170
> 
> 标签：c, performance, algorithm, mathematical-optimization, binomial-coefficients

方法 1：
C(n,r) = n!/(nr)!r!

方法 2：
在[wilf 的《组合算法](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF0QFjAA&url=http://www.math.upenn.edu/~wilf/website/CombinatorialAlgorithms.pdf&ei=aTcdUJiDHojsrAfAn4C4Aw&usg=AFQjCNGgowD1UYCUKKvzibbMHWzfnSGSBQ&sig2=SA2ePQJ-b-0FRkz1RnlGVA)》一书中，我发现：
C(n,r) 可以写为`C(n-1,r) + C(n-1,r-1)`.

例如

```
C(7,4) = C(6,4) + C(6,3) 
       = C(5,4) + C(5,3) + C(5,3) + C(5,2)
       .   .
       .   .
       .   .
       .   .
       After solving
       = C(4,4) + C(4,1) + 3*C(3,3) + 3*C(3,1) + 6*C(2,1) + 6*C(2,2) 
```

如您所见，最终的解决方案不需要任何乘法。在每种形式 C(n,r) 中，n==r 或 r==1。

这是我实现的示例代码：

```
int foo(int n,int r)
{
     if(n==r) return 1;
     if(r==1) return n;
     return foo(n-1,r) + foo(n-1,r-1);
} 
```

请参阅此处的[输出](http://ideone.com/KIUbg)。

在方法 2 中，存在重叠的子问题，我们调用递归来再次解决相同的子问题。我们可以通过使用[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)来避免它。

我想知道计算 C(n,r) 的更好方法是什么？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-04T15:32:42.213

两种方法都会节省时间，但第一种方法很容易出现[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)。

**方法一：**

这种方法将在最短的时间内（最多`n/2`迭代）产生结果，并且可以通过仔细进行乘法来减少溢出的可能性：

```
long long C(int n, int r) {
    if(r > n - r) r = n - r; // because C(n, r) == C(n, n - r)
    long long ans = 1;
    int i;

    for(i = 1; i <= r; i++) {
        ans *= n - r + i;
        ans /= i;
    }

    return ans;
} 
```

此代码将从较小的一端开始乘分子，并且由于任何`k`连续整数的乘积都可以被 整除`k!`，因此不会有可除性问题。但是溢出的可能性仍然存在，另一个有用的技巧可能是在进行乘法和除法之前除以它们的 GCD（并且`n - r + i`仍然*可能*发生溢出）。`i`

 ***方法二：**

在这种方法中，您实际上将构建[帕斯卡三角](http://en.wikipedia.org/wiki/Pascal%27s_triangle)。动态方法比递归方法快得多（第一个是指数的`O(n^2)`，而另一个是指数的）。但是，您也需要使用`O(n^2)`内存。

```
# define MAX 100 // assuming we need first 100 rows
long long triangle[MAX + 1][MAX + 1];

void makeTriangle() {
    int i, j;

    // initialize the first row
    triangle[0][0] = 1; // C(0, 0) = 1

    for(i = 1; i < MAX; i++) {
        triangle[i][0] = 1; // C(i, 0) = 1
        for(j = 1; j <= i; j++) {
            triangle[i][j] = triangle[i - 1][j - 1] + triangle[i - 1][j];
        }
    }
}

long long C(int n, int r) {
    return triangle[n][r];
} 
```

然后，您可以随时查找`C(n, r)`。`O(1)`

如果您需要特定的`C(n, r)`（即不需要完整的三角形），则可以`O(n)`通过从上到下覆盖三角形的同一行来消耗内存。

```
# define MAX 100
long long row[MAX + 1];

int C(int n, int r) {
    int i, j;

    // initialize by the first row
    row[0] = 1; // this is the value of C(0, 0)

    for(i = 1; i <= n; i++) {
        for(j = i; j > 0; j--) {
             // from the recurrence C(n, r) = C(n - 1, r - 1) + C(n - 1, r)
             row[j] += row[j - 1];
        }
    }

    return row[r];
} 
```

内循环从头开始，以简化计算。如果从索引 0 开始，则需要另一个变量来存储被覆盖的值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-04T14:58:22.977

我认为您的递归方法应该有效地与`DP`. 但是一旦约束增加，它就会开始出现问题。见[http://www.spoj.pl/problems/MARBLES/](http://www.spoj.pl/problems/MARBLES/)

这是我在在线评委和编码比赛中使用的功能。所以它的工作速度非常快。

```
long combi(int n,int k)
{
    long ans=1;
    k=k>n-k?n-k:k;
    int j=1;
    for(;j<=k;j++,n--)
    {
        if(n%j==0)
        {
            ans*=n/j;
        }else
        if(ans%j==0)
        {
            ans=ans/j*n;
        }else
        {
            ans=(ans*n)/j;
        }
    }
    return ans;
} 
```

这是您的方法 #1 的有效实现

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-05T12:50:01.683

您的递归方法很好，但是在您的方法中使用 DP 将减少再次解决子问题的开销。现在因为我们已经有两个条件-

```
nCr(n,r) = nCr(n-1,r-1) + nCr(n-1,r);

nCr(n,0)=nCr(n,n)=1; 
```

现在我们可以通过将子结果存储在二维数组中来轻松构建 DP 解决方案 -

```
int dp[max][max];
//Initialise array elements with zero
int nCr(int n, int r)
{
       if(n==r) return dp[n][r] = 1; //Base Case
       if(r==0) return dp[n][r] = 1; //Base Case
       if(r==1) return dp[n][r] = n;
       if(dp[n][r]) return dp[n][r]; // Using Subproblem Result
       return dp[n][r] = nCr(n-1,r) + nCr(n-1,r-1);
} 
```

现在，如果您想进一步优化，获取二项式系数的素数分解可能是计算它的最有效方法，尤其是在乘法成本高昂的情况下。

我知道最快的方法是**弗拉基米尔的方法**。一种方法是通过将 nCr 分解为素因子来避免全部除法。正如弗拉基米尔所说，您可以使用 Eratosthenes 筛子非常有效地做到这一点。此外，使用**费马小定理**计算 nCr mod MOD（其中 MOD 是质数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-03T09:49:31.457

使用动态编程，您可以轻松找到 nCr 这里是解决方案

```
package com.practice.competitive.maths;

import java.util.Scanner;

public class NCR1 {

    public static void main(String[] args) {
        try (Scanner scanner = new Scanner(System.in)) {
            int testCase = scanner.nextInt();
            while (testCase-- > 0) {
                int n = scanner.nextInt();
                int r = scanner.nextInt();
                int[][] combination = combination();
                System.out.println(combination[n][r]%1000000007);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static int[][] combination() {
        int combination[][] = new int[1001][1001];
        for (int i = 0; i < 1001; i++)
            for (int j = 0; j <= i; j++) {
                if (j == 0 || j == i)
                    combination[i][j] = 1;
                else
                    combination[i][j] = combination[i - 1][j - 1] % 1000000007 + combination[i - 1][j] % 1000000007;
            }
        return combination;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-18T07:24:26.350

```
unsigned long long ans = 1,a=1,b=1;
        int k = r,i=0;
        if (r > (n-r))
            k = n-r;
        for (i = n ; k >=1 ; k--,i--)
        {
            a *= i;
            b *= k;
            if (a%b == 0)
            {
                a = (a/b);
                b=1;
            }
        }
        ans = a/b; 
```*

# excel - Jasper 报告 Excel 输出问题

> ID：11809505
> 
> 赞同：9
> 
> 时间：2012-08-04T14:49:37.530
> 
> 标签：excel, jasper-reports, ireport

我是用于设计报告的 Jasper Reports 和 iReports 的新手。我目前正在 iReport 中设计一个报告，并希望将其导出为 excel (xls)。这是我想要设计的屏幕截图，第二个屏幕就是我得到的。

[![图片由 ImageShack.us 托管](../Images/f2f4f61097c89f2a25c436e20859949f.png)](https://i.stack.imgur.com/aW4DO.png)
拍摄于 2012-08-04

这是我设法得到的。如您所见，输出中存在许多问题。

*   缺少 A 列
*   D 列和 E 列存在一些问题，C 列也是不可见的。
*   我不知道如何从 IReports 在我的设计中添加空白行

[![图片由 ImageShack.us 托管](../Images/01f41debde4ee143e732546212f74598.png)](https://i.stack.imgur.com/MeiFl.png)
拍摄于 2012-08-04

这是我到目前为止所做的事情的来源：

```
 <?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="792" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="1e5ee76a-b072-4f31-a1ce-d0c921d2ce55">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <property name="net.sf.jasperreports.export.xls.remove.empty.space.between.columns" value="true"/>
    <property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/>
    <property name="net.sf.jasperreports.export.xls.remove.empty.space.between.rows" value="true"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="21" splitType="Stretch">
            <staticText>
                <reportElement uuid="557d6e9d-b389-4710-a66f-f15678ebb003" x="1" y="1" width="119" height="20"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Sample Heading]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="71" splitType="Stretch">
            <staticText>
                <reportElement uuid="3d8bfb44-a4ce-409f-a626-4bdba125b0a4" x="0" y="11" width="100" height="20"/>
                <textElement verticalAlignment="Middle"/>
                <text><![CDATA[Start Date]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="ee347fa8-037a-4fe1-8de2-98867d4903a3" x="0" y="31" width="100" height="20"/>
                <textElement verticalAlignment="Middle"/>
                <text><![CDATA[Start Date]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="beaa366e-2976-4b46-86ee-55af14249675" x="0" y="51" width="100" height="20"/>
                <textElement verticalAlignment="Middle"/>
                <text><![CDATA[Start Date]]></text>
            </staticText>
            <textField pattern="dd-MMM-yy">
                <reportElement uuid="4f4124a7-5071-4ced-ba92-c39c6f6ffc54" x="100" y="11" width="100" height="20"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
            <textField pattern="dd-MMM-yy">
                <reportElement uuid="9492ff27-6c11-417f-8ae9-43dddfcda405" x="100" y="31" width="100" height="20"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
            <textField pattern="dd-MMM-yy">
                <reportElement uuid="b8baea82-84c4-42fa-bccd-62abc96eeded" x="100" y="51" width="100" height="20"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>
    <columnHeader>
        <band height="69" splitType="Stretch">
            <staticText>
                <reportElement uuid="1c5d41a5-a86b-4cd0-bac8-19950c3eb5b3" x="0" y="49" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Heading]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="6d798309-0e10-4c11-8642-53edd66f8ed0" x="100" y="49" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Heading]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="7ca5ae53-47e2-46f9-90c6-2d8f5d66dc5e" x="200" y="49" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Heading]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="bae9670f-10fa-4932-9e1b-00c8e38cd009" x="300" y="49" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Heading]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="bcf09004-a0ca-479f-9d6d-fe2aab932452" x="400" y="49" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Heading]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="151" splitType="Stretch">
            <staticText>
                <reportElement uuid="418012e1-fbc2-4cb9-bf7f-2740061bbfd1" x="1" y="0" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="9b6a2c68-6327-4a8a-940f-41f5be8bc7ca" x="100" y="0" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="7e7ddc5f-31e7-4b76-bbd7-a6f0a2c11169" x="200" y="0" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="5f8c4ae6-d2c0-4ded-9e3e-8f1a69995043" x="300" y="0" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="f8f51e3b-5dcc-43f0-9f56-00a1bc703ad1" x="400" y="0" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="418012e1-fbc2-4cb9-bf7f-2740061bbfd1" x="0" y="20" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="418012e1-fbc2-4cb9-bf7f-2740061bbfd1" x="100" y="20" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="418012e1-fbc2-4cb9-bf7f-2740061bbfd1" x="200" y="20" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="418012e1-fbc2-4cb9-bf7f-2740061bbfd1" x="300" y="20" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="418012e1-fbc2-4cb9-bf7f-2740061bbfd1" x="400" y="20" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <text><![CDATA[Data]]></text>
            </staticText>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

在这件事上的任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:41:57.823

每次我遇到问题都是因为字段没有正确对齐。因此，请确保应垂直对齐的字段具有相同的 x 值并具有相同的宽度。

您的第一个**数据**字段位于 x=1（该列上的其他字段位于 x=0）。也许仅此一项并不能解决所有问题，但我很确定第一个**数据**将开始出现在 Excel 输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:15:11.400

我在 Excel 导出中遇到了类似的问题。我的标题和报告标题带中的文本字段没有扩展报告的整个宽度，有些左侧位置不为零（出于设计目的，这是我故意的）。iReport 然后合并列来处理这个问题。

为了让我的 Excel 导出的外观和行为符合我的要求，我必须使标题中的文本字段和报表标题带与报表的整个宽度一致，并确保它们在左侧对齐为 0。您可以向文本字段添加填充以在其中放置文本。在细节带之前发生的任何事情都需要比细节带中的输出更宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-10T02:56:31.880

我之前试过，是因为布局设置不匹配。您需要确保每列的左侧起始位置相同，以及它们的宽度。如果有合并的单元格，它的宽度需要是合并列宽度总和的确切数字。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-05-09T06:41:15.243

转到工具 -> 选项 -> 导出工具 -> Excel -> 勾选第 2、3 和最后 4 ...

享受

# jquery - Jquery UI + 移动自动完成问题

> ID：11809506
> 
> 赞同：1
> 
> 时间：2012-08-04T14:49:38.180
> 
> 标签：jquery, css, jquery-ui, jquery-mobile, jquery-ui-autocomplete

使用自动完成时，它会显示建议输入，如果单击下面有按钮的输入，它会单击按钮而不是建议。

我已经准备了一个 JS 来解决这些问题，看看是否有人可以提供帮助......

[http://jsfiddle.net/XuZBt/8/](http://jsfiddle.net/XuZBt/8/)

无论如何我可以将自动完成设置在顶部，这样就不会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:01:06.223

由于某种原因，您的 z 索引是错误的。这适用于 jsFiddle 上的 FF：

```
<input type="text" id="personHomeNum" data-autofill="N/A" data-stat="KNOWN" style="z-index: 1" />
<input type="button" value="Validate" id="validation_btn" style="z-index: 1"/> 
```

出于某种原因，这似乎有效：

[http://jsfiddle.net/XuZBt/20/](http://jsfiddle.net/XuZBt/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:10:59.360

通过一些轻微的 CSS 调整，我们可以在按钮上方设置自动完成小部件。按钮`z-index`由其升序指定，`data-role="page"` `z-index`因为`data-role="page"`和`.ui-autocomplete`元素是同级的。如果您尝试更改元素`z-index`内按钮的 ，`data-role="page"`它不会在大多数浏览器中对自动完成小部件产生影响（它适用于某些浏览器，但不适用于其他浏览器）。

这是所需的所有 CSS：

```
/*this rule makes the links in the autocomplete list block elements so they expand to fill their parents*/
​.ui-autocomplete.ui-menu .ui-menu-item a {
    display : block;
}

/*this rule just sets the autocomplete menu above the data-role="page" element*/
.ui-autocomplete.ui-menu {
    z-index : 10;
}​ 
```

这是一个演示：http: [//jsfiddle.net/XuZBt/21/](http://jsfiddle.net/XuZBt/21/)

# ada - 带注释的 Ada 语言（安娜）

> ID：11809508
> 
> 赞同：2
> 
> 时间：2012-08-04T14:50:07.993
> 
> 标签：ada

我是 Ada 语言的初学者，我想知道符号的含义。我在 Kreuger 软件重用论文中读到 Anna 是一种用于描述 Ada 的注释语言。这是否被认为是对 Ada 代码的正式评论？

例如：

```
subtype EVEN is INTEGER;

--| where X : EVEN = ) X mod 2 = 0; 
```

第二行是 Anna 注释，第一行是 Ada 代码。第二行只是让用户理解第一行的注释，还是“必须”提及的约束，而不仅仅是可选行？

我真的很困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:22:24.453

安娜是*古老*的，不要浪费你的时间。

有很多地方可以从 Ada 开始。其中包括[Ada Wikibook](http://en.wikibooks.org/wiki/Ada_Programming)，Ada Information Clearinghouse (AdaIC) 维护着一个[建议资源列表](http://www.adaic.org/learn/materials/)。

如果你对适用于 Ada 的形式逻辑感兴趣，你会想研究一下 SPARK（“SPARK 是一种编程语言，一套源代码分析（静态验证）工具，以及一种用于开发高性能的设计方法）保证软件。”）这里有一个[快速概述和教程](http://www.adacore.com/sparkpro/tokeneer/discovery/)，尽管在您对 Ada 进行了一些练习之前，您可能不想解决这个问题。

您可能已经了解 GNAT 编译器，但以防万一，[GNAT GPL 2012](http://libre.adacore.com/)是一个可用于 Linux、Windows 和其他一些平台的开源编译器。（GNATPro 可用于许多平台。）

祝你好运，在这里提问，其他资源包括[comp.lang.ada](http://groups.google.com/group/comp.lang.ada)和[Ada sub-reddit](http://www.reddit.com/r/ada/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T10:19:33.473

1.  EVEN 是整数，其约束是，嗯，偶数。所以第二行是一个约束。但是编译器不会检查它——而且，据我所知，Anna 工具集从未能够检查这些约束。

2.  Anna 很古老，早已不复存在——但最近的 Ada 标准 (Ada 2012) 支持此类注释（甚至可以由编译器检查）。所以你的 Ada/Anna 表达式可以在 Ada 2012 中写成

    子类型 Even 是带有 Dynamic_Predicate => Even mod 2 = 0 的整数；

这实际上是 Ada 2012 基本原理中的一个示例，请参见[Ada 2012](http://www.adacore.com/adaanswers/about/ada-2012/)。

# java - 如何确定一个数字是否属于一个系列（确定误差范围）？

> ID：11809509
> 
> 赞同：1
> 
> 时间：2012-08-04T14:50:14.700
> 
> 标签：java, margin

我有一个包含 100 个数字的数据集。我有一个测试号码。我的目的是决定这个测试号码是否属于我的数据集。

为此，我必须计算**max**、**min**和**margin of error**，这些将指示我的数据集的间隔。但我不知道如何计算这些值。有谁能帮助我吗？

在下图中

![在此处输入图像描述](../Images/0dc2d07644876dc093c20f063d5278c1.png)

黑点是我的数据集。
根据这些数据，我将计算出蓝线和边距---> 这样我就可以接受绿色的并拒绝红色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:00:57.747

我建议研究这几个例子。我想你会找到所有答案的。

你需要的基本东西 - 标准偏差和统计：
[http ://algs4.cs.princeton.edu/stdlib/StdStats.java.html](http://algs4.cs.princeton.edu/stdlib/StdStats.java.html)

线性回归：http:
[//introcs.cs.princeton.edu/java/97data/LinearRegression.java.html](http://introcs.cs.princeton.edu/java/97data/LinearRegression.java.html)

# wpf - 将资源的密钥存储在静态类中是个好主意吗？

> ID：11809510
> 
> 赞同：0
> 
> 时间：2012-08-04T14:50:17.057
> 
> 标签：wpf, xaml, c#-4.0, resourcedictionary

为了使事情井井有条并跟踪 WPF/XAML 项目中使用的所有资源名称/键，我想将资源字典中使用的所有键存储在一个填充有常量的静态类中。我想我记得在代码中避免使用字符串文字。

就像是：

```
<!-- itemtemplates.xaml -- a resource dictionary -->
<Style x:Key="{x:Static local:ResourceKeys.TaskItemItemTemplateKey}" ....>
    ....
</Style> 
```

```
// ResourceKeys.cs
internal static class ResourceKeys {
    internal static object TaskItemItemTemplateKey {
       get { return __some_readonly_unique_key_object; }
    }
    internal static object SomeReallyUglyGradientBrushKey {
       get { return __some_other_unique_key; }
    }
} 
```

这是一个好主意，考虑到我的项目可能会达到 1000 多个资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:55:10.413

如果您有这么多资源，您可能希望按类型、适用区域或在您的上下文中可能有意义的任何内容将其分成几个类。至于一般这样做：为什么不呢？[`SystemColors`](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors.aspx)例如也这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:39:41.290

您的解决方案的问题是您必须为每个资源输入两次。这对于 1000 个项目来说是相当多的工作......可以轻松找到所有资源名称的列表（resource.Keys）。如果您使用命名约定，您可以以很少的成本对所有这些进行排序。然后，如果您想拥有颜色资源，则可以执行一些操作：在 Application.resources.Keys 中选择 rs，其中 rs.beginswith("Color")。

# asp.net-mvc-3 - 剃刀模型铸造

> ID：11809513
> 
> 赞同：2
> 
> 时间：2012-08-04T14:50:54.140
> 
> 标签：asp.net-mvc-3, razor, casting, data-annotations, system.reflection

请问如何将模型（接口类型）转换为实际类型？

您在下面看到的显然是非常简化的版本，专注于手头的问题。所以问题**不是**如何重新构建我的解决方案，而是具体*如何将接口类型模型实例转换为剃刀中的实际类类型。*

查看型号：

```
public interface IData
{
  string Data { get; set; }
}
public class Child1 : IData
{
  [Display(Name = "Name1", Description = "Desc1", Prompt = "Prompt1")]
  public string Data { get; set; }
}
public class Child2 : IData
{
  [Display(Name = "Name2", Description = "Desc2", Prompt = "Prompt2")]
  public string Data { get; set; }
}
// It gets to Child10 and there is dynamic number of each of them in the main ViewModel 
```

在视图中我需要显示数据注释，但 MVC 不会以面向对象的方式进行。如果我只是说

```
@model <path to>.IData
@Html.LabelFor(m => model.Data)
@Html.TextBoxFor(m => model.Data)
@Html.ValidationMessageFor(m => model.Data) 
```

我得到了接口上定义的内容，而不是实际类上定义的内容。愚蠢的解决方案是进行巨大的转换并将 Model 转换为它来自的实际类型：

```
@switch(Model.GetType().Name)
{
  case "Child1":
    var c1 = Model as Child1;
    @Html.LabelFor(m => c1.Data)
    @Html.TextBoxFor(m => c1.Data)
    @Html.ValidationMessageFor(m => c1.Data)
    break;
  // etc 
} 
```

如果我有超过 3 个 IBase 的孩子（我确实有），Switch 就会变得难以管理，更不用说看起来很丑了。我如何使用反射来获取模型的类型，而不是进行切换？注意简单

```
@{
  var c1 = Model as Model.GetType();
  var c2 = (Model.GetType()) Model;
  var c3 = (Type.GetType(Model.GetType())) Model;
  var c4 = Model as Type.GetType(Model.GetType();
} 
```

等给出可怕的警告，当然不会在剃刀中运行。

我确信可以通过模型的反射来获得，但无论我尝试过什么都行不通。希望大家有一些新鲜的想法。

**小更新**

我不能将 X 为数字的 Child 合并到一个模型中，因为它事先不知道其中有多少，在主视图中可以添加/删除这些。我画的图片非常针对这个问题，视图/控制器/模型比你在这里看到的要复杂得多。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:04:42.770

关于您的示例的快速说明：您显示了 IBase 的接口，但您的类正在实现接口 IData。

您的模型不应成为接口，而应是您将要使用的实际类型的对象（或具有包含您要使用的类型的属性）。

例如，如果您想在视图中显示有关两个孩子的数据，请像这样设置您的模型：

```
public class ChildModel {
  public Child1 { get; set; }
  public Child2 { get; set; }
}
public class Child1 : IData
{
  [Display(Name = "Name1", Description = "Desc1", Prompt = "Prompt1")]
  public string Data { get; set; }
}
public class Child2 : IData
{
  [Display(Name = "Name2", Description = "Desc2", Prompt = "Prompt2")]
  public string Data { get; set; }
} 
```

您将 ChildModel 返回到您的视图的位置，然后您不需要在您的视图中进行任何转换（无论如何您都应该避免）。

# android - Ubuntu 10.04 上的 Android 4 ICS (AOSP) 构建错误

> ID：11809514
> 
> 赞同：2
> 
> 时间：2012-08-04T14:51:10.473
> 
> 标签：android, build

我正在尝试在 Ubuntu 10.04 64 位上构建**Android 4.0.1_r1 。**在为“完整工程”午餐类型启动“make -j2”之前，我已按照[官方构建文档中提到的所有步骤进行操作。](http://source.android.com/source/initializing.html)

编译 2 小时后，出现此错误：-

> 宿主 Java：d​​oclava (out/host/common/obj/JAVA_LIBRARIES/doclava_intermediates/classes) 线程“main”中的异常 java.lang.RuntimeException: cts/tools/vm-tests-tf/src/dot/junit/opcodes/xor_long_2addr /Test_xor_long_2addr.java：在 util.build.BuildDalvikSuite.parseTestMethod(BuildDalvikSuite.java:588) 在 util.build.BuildDalvikSuite.handleTests( BuildDalvikSuite.java:303) at util.build.BuildDalvikSuite.compose(BuildDalvikSuite.java:159) at util.build.BuildDalvikSuite.main(BuildDalvikSuite.java:131) 原因：java.io.FileNotFoundException: cts/tools/vm -tests-tf/src/dot/junit/opcodes/xor_long_2addr/Test_xor_long_2addr.java（打开的文件太多）在 java.io.FileInputStream.open（本机方法）在 java.io.FileInputStream。(FileInputStream.java:120) 在 com.android.dx.util.FileUtils.readFile(FileUtils.java:75) ... 4 更多：*** [out/host/linux-x86/obj/EXECUTABLES/vm-tests-tf_intermediates/tests] 错误 1 ​​make: ***等待未完成的工作.... 注意：external/doclava/src/com/google/doclava/Stubs .java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

在上述错误之后，构建停止。

我在构建之前所做的修改如下：-

1.  从 /devices 文件夹中，我删除了 Google、Samsung 和 Ti 文件夹，因此它们不包含在构建中。
2.  在 /build/target/product/core.mk 我删除了以下应用程序 - 浏览器、HTMLViewer、联系人

尽管我是 Android 源代码开发的完全初学者，但我有这样的预感，即修改可能不是构建失败的实际原因，而根本原因在于其他地方。我需要一些建议。

# sitecore - 多个 TemplateId 在 Sitecore 的高级数据库爬虫中不起作用

> ID：11809520
> 
> 赞同：1
> 
> 时间：2012-08-04T14:52:36.870
> 
> 标签：sitecore

我有一个“特色”小部件，可以引导访问者访问我想在某些页面上展示的项目。因此，我试图让 Alex Shyba 的 Sitecore 高级数据库爬虫返回所有引用上下文项目的项目。如果我输入一个模板 ID，它就可以正常工作。但是，如果我用管道分隔两个模板，我永远不会得到结果。我究竟做错了什么？

```
var searchParam = new MultiFieldSearchParam()
{
    Database = Sitecore.Context.Database.Name,
    Language = Sitecore.Context.Language.Name,
    TemplateIds = "{E5B41848-3C07-4F17-84A5-C2C29AD43CAE}|{0C2E35D7-C4C9-478B-B4AB-DE8C2A00908B}"
};            
var refinements = new List<MultiFieldSearchParam.Refinement>();
refinements.Add(new MultiFieldSearchParam.Refinement("pages", contextItemGUID));
searchParam.Refinements = refinements;

var runner = new QueryRunner("web");
foreach (var skinnyItem in runner.GetItems(searchParam))
{
    yield return skinnyItem.GetItem();
} 
```

同样，如果我将`TemplateIds`其设为单个 GUID（任一 GUID），它会按预期工作，但显然只是返回指定模板的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:39:40.003

正如 Mark 所说，这是 ADC 中的一个错误。我们的解决方案是重构 ApplyTemplateFilter 方法，如下所示：

```
protected void ApplyTemplateFilter(CombinedQuery query, string templateIds, QueryOccurance occurance)
{
    ApplyIdFilter(query, BuiltinFields.Template, templateIds, occurance);
} 
```

# jquery - Jquery Cycle，嵌套幻灯片，下一个/上一个通过外部和内部幻灯片前进

> ID：11809521
> 
> 赞同：0
> 
> 时间：2012-08-04T14:53:05.013
> 
> 标签：jquery, jquery-plugins, cycle, jquery-cycle

这是这个[问题](https://stackoverflow.com/questions/6375667/jquery-cycle-plugin-nested-slideshow-after-option-or-testing-for-first-and-l)的扩展，在这里你可以看到詹姆斯根据答案创建的演示：http: [//jamesmason.co.uk/code/cycle.html](http://jamesmason.co.uk/code/cycle.html)

与此示例类似，我正在使用 Jquery Cycle 构建嵌套幻灯片，以便创建带有“相册”的幻灯片。

我的绊脚石是 Next / Prev 控件。目标是创建控件，在专辑的结尾/开头将前进到下一个/上一个专辑并继续。Jame 的示例仅在嵌套幻灯片中进行，要求用户在最后选择一个新专辑。

旁白：Malsup 的[嵌套幻灯片示例](http://jquery.malsup.com/cycle/nest2.html)Next / Prev 控件仅按整个嵌套循环前进，跳过所有内部幻灯片。

`slideshow.cycle('next');`我通过在 after 函数的 :last-child if 语句中添加来编辑 James 的示例。（[见这里](http://owenhoskins.com/nestedcycle/)）

`slideshow.cycle('prev');`这种工作，除了它跳过最后一个孩子，立即进入下一张专辑，而第一个孩子 else if 语句由于显而易见的原因根本不起作用。

有没有人看到解决这个问题的方法？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:49:54.707

`slideshow.cycle('next');`当您到达最后一个孩子时，您需要设置“下一个”链接来调用它，而不是立即调用它。为避免覆盖给定“下一个”链接的行为，也许您可​​以暂时将其替换为“下一个节目”链接。

# c# - Winforms：在 FlowLayoutPanel 的 Layout 事件期间获得的位置属性不反映更新的布局。为什么是这样？

> ID：11809523
> 
> 赞同：1
> 
> 时间：2012-08-04T14:53:25.837
> 
> 标签：c#, .net, winforms, layout, flowlayoutpanel

我正在为包含 UserControls 的 FlowLayoutPanel 使用*非自动*VScrollBar 控件。

我需要找出 FlowLayoutPanel 中的任何控件是否位于其客户区域之外。我想使用此信息来确定 VScrollBar 是否可见。我在 FlowLayoutPanel 的 Layout 事件处理程序方法中添加了以下代码：

```
bool lookingForControl = true;
bool controlBelowClientArea = false;
int controlIndex = 0;
int controlBottomPos;
Control[] controlsTemp = new Control[leftFlowLayoutPanel.Controls.Count];
leftFlowLayoutPanel.Controls.CopyTo(controlsTemp, 0);
while (lookingForControl) {
    controlBottomPos = controlsTemp[controlIndex].Bottom +
        controlsTemp[controlIndex].Margin.Bottom;

    debugTextBox.AppendText("Bottom position of control " + controlIndex + 
        ": " + controlBottomPos + "\n");

    if (controlBottomPos > leftFlowLayoutPanel.ClientSize.Height) {
        controlBelowClientArea = true;
        lookingForControl = false;
    }
    controlIndex ++;
    if (controlIndex == leftFlowLayoutPanel.Controls.Count) {
        lookingForControl = false;
    }
} 
```

下面是 debugTextBox 的输出，它是通过将四个连续的控件添加到控件 2（其 AutoSize 属性设置为 true）而产生的。控件 2 包含在 leftFlowLayoutPanel 中，通过单击其中包含的按钮将控件添加到其中：

*   **表单刚刚加载：**
*   控件底部位置 0: 3
*   控件1的底部位置：128
*   控制2的底部位置：253
*   **添加了第一个控件：**
*   控件底部位置 0: 3
*   控件1的底部位置：128
*   控制2的底部位置：253
*   **添加了第二个控件：**
*   控件底部位置 0: 3
*   控件1的底部位置：226
*   控制2的底部位置：351
*   **添加了第三个控件：**
*   控件底部位置 0: 3
*   控件1的底部位置：324
*   控制2的底部位置：449
*   **添加了第四个控件：**
*   控件底部位置 0: 3
*   控件1的底部位置：422
*   控制2的底部位置：547

添加第四个控件后，其中一个控件的*底部*超出其容器的 ClientArea (458) 的高度，并且 controlBelowClientArea 的值被分配为 true。

问题很清楚：我在布局事件期间从 FlowLayoutPanel 获得的值比最终的表单布局落后一步。在我将第四个控件添加到控件 1 之后，它的底部位置应该是 520。

我唯一想到的答案是 Layout 事件发生在正确设置所有属性的值之前。可能在执行任何内置布局逻辑之前调用它。如果是这种情况，是否有更合适的事件我可以处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:58:54.767

> *我唯一想到的答案是 Layout 事件发生在正确设置所有属性的值之前。*

如果这确实是问题，您可以尝试以下解决方法。

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            // Sign up for the FlowLayoutPanel Layout event.
            // When that event occurs, run your layout logic
            // using BeginInvoke to give the control a chance
            // to "settle down".
            //

            this.flowLayoutPanel1.Layout += delegate { this.BeginInvoke( ( Action )this.DoYourWorkHere ); };
        }

        void DoYourWorkHere()
        {
            //TODO: do your custom layout logic here.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:21:50.840

我尝试了一个简单的应用程序，我测试一个按钮是否在 FlowLayoutPanel 的区域中，如果它显示一个文本框消息“out”，它可以工作：

```
 private void button2_Click(object sender, EventArgs e)
        {

                Button btn = new Button();
                flowLayoutPanel1.Controls.Add(btn);
            if((btn.Size.Height + btn.Location.Y) > (flowLayoutPanel1.Size.Height + flowLayoutPanel1.Location.Y))
            {
                textBox1.Text = "out";
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:08:25.230

试试这个

```
 while (lookingForControl) {
    controlBottomPos = controlsTemp[controlIndex].Size.Height  +
    controlsTemp[controlIndex].Location.Y ;

    debugTextBox.AppendText("Bottom position of control " + controlIndex + 
        ": " + controlBottomPos + "\n");

    if (controlBottomPos > leftFlowLayoutPanel.Size.Height + leftFlowLayoutPanel.Location.Y) {
        controlBelowClientArea = true;
        lookingForControl = false;
    }
    controlIndex ++;
    if (controlIndex == leftFlowLayoutPanel.Controls.Count) {
        lookingForControl = false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T15:45:47.577

为了获取*最新的*属性值，我使用以下代码从 Layout 事件处理程序方法调用引用包含我的原始代码的方法的委托。

```
private void leftFlowLayoutPanel_Layout(object sender, LayoutEventArgs e) {
    if (this.IsHandleCreated) {
        this.BeginInvoke((Action)this.OriginalLayoutCode);
    }
} 
```

我使用 IsHandleCreated 检查来避免可能的 InvalidOperationException。

# wordpress - 如何在 wordpress 管理面板上创建新表单？

> ID：11809527
> 
> 赞同：2
> 
> 时间：2012-08-04T14:54:02.683
> 
> 标签：wordpress

我想在 wordores 管理面板上创建新表单，以便管理员存储数据，例如我有一个学生详细信息，我想通过管理面板存储。

请告诉我.....

最好的阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T15:06:08.520

你为什么不创建一个新的帖子类型？[http://codex.wordpress.org/Post_Types](http://codex.wordpress.org/Post_Types)

您可以将其设置为不公开显示。你可以这样：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'acme_product',
        array(
            'labels' => array(
                'name' => __( 'Products' ),
                'singular_name' => __( 'Product' )
            ),
        'public' => false,
        'has_archive' => true,
        )
    );
} 
```

# c# - LINQ 和异常已被调用的目标抛出

> ID：11809530
> 
> 赞同：0
> 
> 时间：2012-08-04T14:54:09.367
> 
> 标签：c#, wpf, linq

我有带有 linq 和 SQL CE 4.0 的 WPF .NET FW4 应用程序。随机在客户的笔记本上我收到此错误：

> 调用的目标已引发异常。

我已经知道，重要的是内部异常（带有堆栈跟踪）：

> 你调用的对象是空的。在 lambda_method（闭包）

代码块：

```
private void LoadCustomersDetail(CustomersView cw)
    {
        Persons customer = db.Persons.Where(c => c.Person_id == cw.Customer_id).FirstOrDefault();
        reg = new RegistrationWindow(db, customer, false);
        reg.ShowDialog();
        if (reg.DialogResult.Value)
        {
            if (!onlyDebtors)
                LoadCustomers();
            else
                LoadDebtors();
        }
    } 
```

原始异常的堆栈跟踪：

```
at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Delegate.DynamicInvokeImpl(Object[] args)
   at System.Data.Linq.CommonDataServices.GetKeyFromPredicate(MetaType type, Dictionary`2 keys, Expression mex, Expression vex)
   at System.Data.Linq.CommonDataServices.GetKeysFromPredicate(MetaType type, Dictionary`2 keys, Expression expr)
   at System.Data.Linq.CommonDataServices.GetKeyValues(MetaType type, LambdaExpression predicate)
   at System.Data.Linq.CommonDataServices.GetCachedObject(Expression query)
   at System.Data.Linq.CommonDataServices.GetCachedObject(Expression query)
   at System.Data.Linq.SqlClient.SqlProvider.GetCachedResult(Expression query)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.DataQuery`1.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at ProjectName.Core.ViewWindow.LoadCustomersDetail(CustomersView cw)
   at ProjectName.Core.ViewWindow.dataGridCustomersList_MouseDoubleClick(Object sender, MouseButtonEventArgs e)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
   at System.Windows.Controls.Control.OnMouseDoubleClick(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.HandleDoubleClick(Object sender, MouseButtonEventArgs e)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
   at System.Windows.UIElement.OnMouseDownThunk(Object sender, MouseButtonEventArgs e)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:58:56.263

异常似乎与 - 表达式有关`Where`，因此`c`or`cw`为空。我建议在方法的开头进行参数检查（抛出`ArgumentNullException`if `cw == null`）。还要确保`Persons`集合不包含空值（如果可能的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:00:11.987

你的错误在这里`cw.Customer_id`。你的`cw`是`null`。

# android - 程序启动时不显示软键盘

> ID：11809535
> 
> 赞同：0
> 
> 时间：2012-08-04T14:54:29.180
> 
> 标签：android, android-layout, android-xml

我浏览了类似的问题并遵循了那里的建议，但是看在上帝的份上，我无法让它工作，这让我发疯。所以这是交易：

我有一个editText，需要在程序启动时requestFocus，弹出软键盘。如果我将“android:windowSoftInputMode="stateVisible" 放在清单中，则每次活动开始时都会显示 keboard。我只希望它使用 onCreate() 显示一次，并且当用户专门单击 editText 时。我的代码在下面：

```
EditText argument;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_radio_buttons);

    argument = (EditText) findViewById(R.id.editText_argument);
    InputMethodManager imm = InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(argument, InputMethodManager.SHOW_FORCED); 
```

Q1）此代码不起作用。我究竟做错了什么？

Q2) 你看到我在 onCreate() 之外声明了“EditText 参数”，因为我想在活动的其余部分中使用它，而不仅仅是在 onCreate() 中。这是良好的编程习惯吗？

Q3) 然后，当用户在软键盘上点击完成时，我希望这个 EditText 失去焦点，即光标应该消失。我知道我需要一个虚拟视图来执行此操作，但我仍然不完全了解如何将焦点切换到虚拟视图。我该怎么做呢？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:00:52.430

A1) 你错过了一个`editText.requestFocus()`.

请参阅：[软键盘仅在 EditText 焦点上显示一次](https://stackoverflow.com/questions/7289335/soft-keyboard-shows-up-on-edittext-focus-only-once)应该有助于解除软键盘。

A2) 是的，没关系。大多数 UI 元素应该在类级别范围内声明并在`onCreate()`

A3) A1 的参考链接在这里应该对您有所帮助。

快乐编码！

**编辑：**

**创建（）：**

```
 EditText argument;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_radio_buttons);
    argument = (EditText) findViewById(R.id.editText_argument); 
```

**显示键盘（）：**

```
 argument.requestFocus();
argument.postDelayed(new Runnable() {
    @Override
    public void run() {
        InputMethodManager keyboard = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        keyboard.showSoftInput(argument, 0);
    }
},200); 
```

**解雇键盘（）：**

```
 argument.requestFocus();
argument.postDelayed(new Runnable() {
    @Override
    public void run() {
        InputMethodManager keyboard = (InputMethodManager)                 getSystemService(Context.INPUT_METHOD_SERVICE);
    keyboard.hideSoftInputFromWindow(argument.getWindowToken(), 0);
    }
},200); 
```

# c++ - 哪种设计更好：提供对拥有对象的直接访问或将拥有对象转发方法提供给拥有对象？

> ID：11809536
> 
> 赞同：3
> 
> 时间：2012-08-04T14:54:57.757
> 
> 标签：c++, oop

哪个更好：

```
class Owner
{
public:
    void SomeMethodA()
    {
        _ownee.SomeMethodA();
    }

    int SomeMethodB()
    {
        return _ownee.SomeMethodB();
    }

private:
    Ownee _ownee;
}; 
```

或这个：

```
class Ownee
{
public:
    void SomeMethodA();
    int SomeMethodB();
};

class Owner
{
public:
    Ownee& GetOwnee() const
    {
        return _ownee;
    }

private:
    Ownee _ownee;
}; 
```

我似乎记得很久以前读过第一个选项比第二个选项更好，但我不记得为什么。我想说的是因为 Owner 和 Ownee 的用户之间的耦合较少。客户只需要知道所有者的接口而不是所有者的接口，而使用第二种选项时，客户需要知道所有者和所有者的接口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:42:08.740

一个人并非在任何方面都优越，在任何情况下。然而，包装接口和封装成员（第一个）*通常*是更可取的。

一个类和它的成员有特殊的关系。一个类经常使用它的接口来限制功能在它预期的域内运行，它可以用于额外的内部状态验证和提高程序的正确性。

如果封装得当，则`Owner`可以根据需要更自由地更改其实现或成员。

暴露成员通常会导致更高的耦合，并最终将大量长期维护推到客户端上（导致更多的错误，以及客户端的冗余实现）。一个相当明显的例子：假设`Owner`有两个成员，并且必须保证线程安全——将这个责任推给客户端并期望客户端在几年的几次变化中实现和维护线程安全是没有意义的. 但是，`Owner`可以抽象所有这些，并在其实现更改时适当地更改其实现，或防止成员的更改（`Ownee`）在这方面影响客户端。

当不暴露其成员时，对类（或`Owner`或）的更改通常对客户端的影响要小得多，并且类 ( ) 为其功能提供了严格、简单的接口。`Ownee``Owner`

“性能”通常被认为是*偏爱*第二个的理由（“只为客户提供访问者”）。我发现这是没有根据的过度简化。性能可能更好，也可能更糟！在开发非平凡的程序时，它依赖于 C++ 中的很多很多东西。同样，使用锁定示例：第一个和/或有利于公共访问器的不良接口可能需要更多的锁定。同样，优化器具有信息及其成员的局部性。可能有大量的内部实现和方法由`Owner`-- 如果这在很大程度上是私有的，并且使用静态调度，它可能会导致一组非常小的导出（或内联，如果你喜欢的话）方法。访问器本身可能并没有那么糟糕，但是对被访问者的操作和依赖可能会将大量指令和依赖推送给您的客户端——当您的内部实现`Owner`可能以单一、紧凑、优化的形式表示所有这些时。在 C++ 中，抽象层在优化时可能非常便宜（如果做得好，通常什么都没有）。在现实世界中，性能是双向的，取决于许多变量。

大多数情况下，我使用第一种形式。当我使用第二种形式时，它通常是：

*   私人/内部课程。
*   或作为更大系统的组件（例如元编程）。

阅读：

[http://en.wikipedia.org/wiki/Law_Of_Demeter](http://en.wikipedia.org/wiki/Law_Of_Demeter)

[http://en.wikipedia.org/wiki/Cohesion_(computer_science](http://en.wikipedia.org/wiki/Cohesion_(computer_science) )

[http://en.wikipedia.org/wiki/Coupling_(computer_science](http://en.wikipedia.org/wiki/Coupling_(computer_science) )

[http://en.wikipedia.org/wiki/Encapsulation_](http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming) (面向对象编程)

[http://en.wikipedia.org/wiki/Information_hiding](http://en.wikipedia.org/wiki/Information_hiding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:40:26.190

您正在考虑 Pimpl（指向实现的指针）习语。

一种很好的方法是在头文件中声明实现类并在 .c 文件中定义它；这样可以确保没有人可以通过 .h 包含查看详细信息。

# .h 文件

```
#ifndef object_INCLUDED
#define object_INCLUDED

#include <boost/scoped_ptr.hpp>

class Object
{
public:
    //...
private:

    class ObjectImpl;
    boost::scoped_ptr<ObjectImpl> impl_;
}

#endif 
```

# .c 文件

```
#include "object.h"

//==================================================
// Implementation of ObjectImpl
//==================================================

class Object::ObjectImpl
{

public:

    ObjectImpl(int);
    int value() const;

private:

    int val_;
};

Object::ObjectImpl::ObjectImpl(int val)
    : val_(val)
{}

int
Object::ObjectImpl::value() const
{
    return val_;
}

//==================================================
// Implementation of Object
//==================================================

Object::Object(int val)
    : impl_(new ObjectImpl(val))
{
} 
```

# php - 我想将特定值放入 for 循环

> ID：11809542
> 
> 赞同：2
> 
> 时间：2012-08-04T14:55:26.043
> 
> 标签：php, for-loop

例如，我有 2 个与每个元素无关的值列表。我打算手动输入这些值。

```
$a1 = 'red';
$a2 = '007';
$a3 = 'gun';
$a4 = 'apple';

$b1 = 'poison';
$b2 = 'movie';
$b3 = 'man';
$b4 = 'store';

echo $a.' with '.$b 
```

我想要一个像这样的输出：

```
red with poison
007 with movie
gun with man
apple with store 
```

所以我想`$an`用`$bn`. 我曾想过使用 for 循环，但我不知道该怎么做（我对 PHP 真的很陌生......）

有什么建议么？任何帮助都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:01:35.577

使用数组：

```
$a[0] = 'red';
$a[1] = '007';
$a[2] = 'gun';
$a[3] = 'apple';

$b[0] = 'poison';
$b[1] = 'movie';
$b[2] = 'man';
$b[3] = 'store';

foreach($a as $key=>$value)
{
    echo $value.' with '.$b[$key]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:01:45.373

将您的设置更改为数组

```
$a[1] = 'red';
$a[2] = '007';
$a[3] = 'gun';
$a[4] = 'apple';

$b[1] = 'poison';
$b[2] = 'movie';
$b[3] = 'man';
$b[4] = 'store'; 
```

然后使用 for 循环

```
for($n=0;$n<sizeof($a);$n++){
  echo $a[$n] . ' with ' . $b[$n];
} 
```

使用此方法，您可以随时在脚本的其他位置调用具有已知编号的变量的任何部分，例如：

```
echo $b[2]; 
```

这是对 for 循环的解释。

for() 这将调用循环并受以下限制

```
{
```

和

```
}
```

循环中的参数从您的启动器开始。

在我的例子中，我使用了 $n。我将 $n 设置为 0 以使循环从某个地方开始。

循环的下一部分是与开始变量相比，您希望迭代多少次。这通常取决于数组的大小，但也可以是数字。我在这里创建的参数来确定迭代。sizeof() 是 php 中的另一个函数，用于获取数组或变量中的元素数量（或者我认为它也可以计算文件大小）。我告诉它确保只要 $n 小于变量的大小以保持循环。您通常希望循环在一段时间后结束，否则页面需要永远加载。

最后，您可以在末尾添加东西以增加计数器。这可以是任何东西，但使用 $n++ 意味着它每次将 $n 的值增加 1 直到循环结束

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T15:05:51.757

我认为最简单的是使用关联数组，`foreach`如下所示：

```
foreach (array("red" => "poison",
               "007" => "movie",
               "gun" => "man",
               "apple" => "store") as $a => $b) {
    echo "$a with $b\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T15:00:09.803

您可以使用数组：

```
//that's how you add elements to an array
$a[] = 'red';
$a[] = '007';
$a[] = 'gun';
$a[] = 'apple';

$b[] = 'poison';
$b[] = 'movie';
$b[] = 'man';
$b[] = 'store';

//and this is how you read from an array
for($i=0; $i<count($a); $i++){
    echo $a[$i].' with '.$b[$i] . "\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T15:00:29.557

```
for (var $i = 1; $i <= 4; $i++) {
   echo ${"a".$i} . " with " . ${"b".$i};
} 
```

见[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

# java - JButton 不工作 [捕获网络流量]

> ID：11809547
> 
> 赞同：0
> 
> 时间：2012-08-04T14:56:36.450
> 
> 标签：java, swing, concurrency, jbutton, jpcap

我的代码应该捕获网络流量并将其显示在 textarea 上，但它没有这样做。请查看代码并检查是否有任何更正。

```
public class NewClass {

    public static JTextArea textarea = new JTextArea();

    NewClass() throws IOException{

        JButton capture = new JButton("Capture");
        JFrame frame = new JFrame();        
        JScrollPane scroll;
        NetworkInterface[] NI= JpcapCaptor.getDeviceList();
        int INDEX=0;
        JpcapCaptor JPCAP = JpcapCaptor.openDevice(NI[INDEX], 65536, false, 20);

        frame.setSize(700,500);
        frame.setLocation(200,200);
        frame.getContentPane().setLayout(null);
        frame.setBackground(Color.yellow);        

        textarea.setEditable(false);
        textarea.setFont(new Font("Tahoma",0,14));
        textarea.setForeground(Color.RED);
        textarea.setLineWrap(true);
        //textarea.setBackground(Color.WHITE);

        scroll = new JScrollPane();
        scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        scroll.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        scroll.setViewportView(textarea);

        frame.getContentPane().add(scroll);
        scroll.setBounds(10,16,740,290);

        capture.setBackground(Color.RED);
        capture.setForeground(Color.GREEN);
        frame.getContentPane().add(capture);

        handler ob = new handler();
        capture.addActionListener(ob);
        capture.setBounds(100, 400, 90, 25);

        frame.setVisible(true);
    }

    public class handler implements ActionListener{
        public void actionPerformed(ActionEvent Event){

            class Print implements PacketReceiver{
                public void receivePacket(Packet packet){
                    String info = packet.toString();
                    textarea.append(info);
                    //System.out.println(packet.toString());
                }                    
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:08:35.747

> 我的代码应该捕获网络流量并将其显示在 textarea 上，但它没有这样做。请查看代码并检查是否有任何更正。

一方面，您的处理程序的 actionPerformed 方法实际上并没有做任何事情。它定义了一个内部类，但不创建此类的对象，也不对其进行任何操作：

```
public class handler implements ActionListener {
  public void actionPerformed(ActionEvent Event) {
     class Print implements PacketReceiver {
        public void receivePacket(Packet packet) {
           String info = packet.toString();
           textarea.append(info); // System.out.println(packet.toString());
        }
     }
  }
} 
```

考虑创建一个 Print 类的对象（一个可怕的类名称，因为已经有一个 Print 类是核心 Java 库的一部分）并让这个 Print 对象做一些有用的事情，也许接收数据包（但是它应该这样做） ）。请注意不要在主 Swing 线程（尽管 EDT）中执行长时间运行的进程，否则您将冻结您的 Swing GUI。

**编辑**
例如，

```
// note that class names such as "Handler" should begin with a capital letter.
public class Handler implements ActionListener {
  public void actionPerformed(ActionEvent Event) {
     class Print implements PacketReceiver {
        public void receivePacket(Packet packet) {
           String info = packet.toString();
           textarea.append(info); // System.out.println(packet.toString());
        }
     }

     // create a Print instance so that it can do something:
     final Print myPrint = new Print();

     // do something with myPrint here so that it gets packets and displays them
     // I suspect that you'll likely want to do this in a background thread
     // using a SwingWorker
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:23:30.690

正如气垫船所说，除了定义一个内部类之外，您什么也不做。您在这里缺少的是从您的 JPCAP 类中对 processPacket() 或 loopPacket() 的调用。所以我建议如下：

```
public class handler implements ActionListener{
  public void actionPerformed(ActionEvent Event){

    class Print implements PacketReceiver{
        public void receivePacket(Packet packet){
            String info = packet.toString();
            textarea.append(info);                                            
        }

    }

    // this captures 10 packets .
    JPCAP.processPacket(10,new Print());
  }
} 
```

# c++ - C++ 不可复制类和多重继承，纯抽象类

> ID：11809549
> 
> 赞同：0
> 
> 时间：2012-08-04T14:32:18.737
> 
> 标签：c++, interface, multiple-inheritance

我们可能同意默认复制构造在 C++ 中大部分时间都很糟糕，因此最好使用 C++11`=delete`或不可复制的类（如`boost::noncopyable`.

问题是，当我们使用多重继承或公共抽象类时，在高级场景中会发生什么？

```
//Class uncopyable
class uncopyable {...};

//Interface1
class IInterface1 : private uncopyable
{
public:
 IInterface1(...)
 virtual ~IInterface1(...) = 0;
};

//Interface2
class IInterface2 : private uncopyable
{
public:
 IInterface2(...)
 virtual ~IInterface2(...) = 0;
};

//Fancy implementation
//FImpl
class FImpl : public IInterface1, public IInterface2, private : uncopyable
{
public:
 FImpl(...) {...}
 ~FImpl(...) {...};
}; 
```

*   使每个接口都不可复制（似乎是，以避免切片）是一种好习惯吗？
*   向每个派生类添加不可复制是一种好习惯（显式保护，但会导致多重继承和菱形问题？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:17:53.207

不，使界面不可复制不是一个好主意。例如，这可以防止克隆。

不，从每个派生类中的不可复制派生不是一个好主意，因为它只是多余的。

但是，为了特别阻止 Visual C++ 发出愚蠢的警告，最好在每个应该是不可复制的类中声明一个复制构造函数和复制赋值运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:19:58.950

A pure virtual (interface) class has no need to enforce the memory management for the use of the interface. Implementations of pure virtual interfaces should determine their own memory management requirements (like copy and assign).

That said, value semantics allow implementations to avoid this situation entirely. A value class (copyable, assignable, etc.) is easier to reason about and use. All of the classes in the C++ library are value classes. A good example of a value class managing memory for itself is the venerable string class. Vector is also a good example. These classes have complex internal memory management requirements, yet, as a user of these classes, I don't have to be concerned with that aspect of the class. I can focus on how to use the class.

I like this [presentation](http://cppnow.org/session/value-semantics-and-concepts-based-polymorphism/) from [C++ Now](http://cppnow.org/) that shows how polymorphism is also an implementation detail. This includes the ability for a client to implement classes that can participate in the polymorphism without requiring an interface class (or any base class for that matter).

# php - PHP CURLOPT_INTERFACE 返回 0 字节文件

> ID：11809550
> 
> 赞同：2
> 
> 时间：2012-08-04T14:56:47.833
> 
> 标签：php, curl

好的，所以在我拥有的脚本中，我想与另一台服务器通信并从服务器检索文件。通常我不会有任何 cURL 选项来指定要使用的 IP 地址（接口），但如果服务器知道建立的连接在 188.138.110.125（我的 IP 地址）和服务器之间，它只会让我下载。所以我编辑了我的脚本，看起来像这样：

```
<?php

$user = 'username';
$pass = 'password';

$cookie_file = './sessions/cookie.txt';

// exit if the script is called directly
if ( empty($url) )
    die();

$url = "http://www.example.com/file.zip";

// checking if the login session is valid
$logged_in = 0;

if ( file_exists($cookie_file) )
{
    $cookie = file_get_contents($cookie_file);

    $ch = curl_init();
    $options = array(
        CURLOPT_URL => 'https://www.example.com/testfile.zip&'.$cookie_file,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_INTERFACE => '188.138.110.125',
        CURLOPT_SSL_VERIFYPEER => 0
    );
    curl_setopt_array($ch, $options);
    $content = curl_exec($ch);
    curl_close($ch);

    $logged_in = !preg_match('~ERROR~', $content);
}

// logging in and storing the cookie
if ( !$logged_in )
{
    $ch = curl_init();
    $options = array(
        CURLOPT_URL => 'https://example.com/login.php?login='.urlencode($user).'&password='.urlencode($pass).'&withcookie=1',
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_INTERFACE => '188.138.110.125',
        CURLOPT_SSL_VERIFYPEER => 0
    );
    curl_setopt_array($ch, $options);
    $content = curl_exec($ch);
    curl_close($ch);

    preg_match('~cookie=([0-9A-F]+)~', $content, $match);

    if ( empty($match[1]) )
        die('Error: login failed');

    $cookie = "enc={$match[1]}";

    file_put_contents($cookie_file, $cookie);
}

//----------------------- THIS IS WHERE PROBLEM HAPPENS ---------------------------
// checking if the direct link to the file is available
$ch = curl_init();
$options = array(
    CURLOPT_URL => $url,
    CURLOPT_HEADER => 1,
    CURLOPT_INTERFACE => '188.138.110.125',
    CURLOPT_RETURNTRANSFER => 1
);
curl_setopt_array($ch, $options);
$content = curl_exec($ch);
curl_close($ch);

preg_match('~Location: ([^\s]+)~', $content, $match);

// if the direct link to the file was not found
if ( empty($match[1]) )
    // display any other errors
    if ( preg_match('~(ERROR: [^\n]+)~', $content, $match) )
        die("Error {$match[1]}");
    else
        die('Error: undefined error (1)');

$direct_link = $match[1];

// extracting filename
$pieces = explode('/', $direct_link);
$filename = end($pieces);

// extrating the size of the file
$ch = curl_init();
$options = array(
    CURLOPT_URL => $direct_link,
    CURLOPT_HEADER => 1,
    CURLOPT_NOBODY => 1,
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_INTERFACE => '188.138.110.125',
    CURLOPT_SSL_VERIFYPEER => 0
);
curl_setopt_array($ch, $options);
$content = curl_exec($ch);
curl_close($ch);

preg_match('~Content-Length: (\d+)~', $content, $match);
$filesize = $match[1];

// setting headers for the user
header('Content-Type: application/octet-stream');
header("Content-Disposition: filename=$filename");
header("Content-Length: $filesize");

// printing the file
$ch = curl_init();
$options = array(
    CURLOPT_URL => $direct_link,
    CURLOPT_SSL_VERIFYPEER => 0,
    CURLOPT_BINARYTRANSFER => 1,
    CURLOPT_INTERFACE => '188.138.110.125',
    CURLOPT_COOKIE => $cookie
);
curl_setopt_array($ch, $options);
curl_exec($ch);
curl_close($ch);

?> 
```

但是现在当它下载文件时，它会下载一个 0 字节的文件。文件名是准确的，文件的扩展名也是准确的，只是没有大小。这个问题只有在我将 CURLOPT_INTERFACE => '188.138.110.125' 添加到脚本中时才开始。非常感谢您的任何帮助，并在此先感谢您。

注意：如果我继续尝试下载，它会在完全随机的时间找到正确的文件大小，但如果我再次下载，我就没有运气了。

# asp.net - 在网站上显示 PDF

> ID：11809553
> 
> 赞同：0
> 
> 时间：2012-08-04T14:57:21.200
> 
> 标签：asp.net, pdf

我需要一些帮助，我有一个位于 ftp 位置的 pdf 文件。

我想要做的是单击按钮，我想检索 pdf 文件并将其显示在新选项卡上。

请协助完成此任务。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:04:29.027

一种方法是发出 Web 请求以下载文件，然后将下载流传递给 ASP.NET 响应流。我还没有编译或执行这段代码，但它可能看起来像这样：

```
WebRequest request = HttpWebRequest.Create("ftp://ftp.yoursite.com/yourfile.pdf");
request.Credentials = new NetworkCredential("ftpuser","ftppassword");

// Get the response
WebResponse response = request.GetResponse();
StreamReader responseStream = new StreamReader(response.GetResponseStream());

// Send the response directly to output
Response.ContentEncoding = responseStream.CurrentEncoding;
Response.ContentType = "application/pdf";
Response.Write(responseStream.ReadToEnd());
Response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:04:02.040

只需使用 HTML 锚标记（“a”标记）。在`href`属性中放置 PDF 文件的 FTP 地址（例如`ftp://example.com/file.pdf`）。要在新窗口中打开，您还应该使用 value 指定`target`属性`"_blank"`。

例子：

`<a href='ftp://example.com/file.pdf' target='_blank'>Click here to open the PDF file</a>`

# php - 从 Internet 下载文件并上传到 GDrive

> ID：11809554
> 
> 赞同：1
> 
> 时间：2012-08-04T14:57:31.837
> 
> 标签：php

到目前为止，我已经构建了一个 PHP 脚本，它从 Internet 将文件下载到我的远程服务器，并提供它的 URL（我已经使用[这段代码](https://stackoverflow.com/questions/3938534/download-file-to-server-from-url/3938844#3938844)下载到服务器）。现在我想使用其 API 将下载的文件上传到 Google Drive。

我的问题是：有没有办法将文件直接下载到 Google Drive，而不使用服务器？还是我被迫先将文件下载到服务器，然后再将其上传到 Google Drive？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:25:18.733

我怀疑你是否可以“制作”谷歌驱动器从外部位置获取文件......

但是，如果适合您，您可以选择[创建外部文件的快捷方式。](https://developers.google.com/drive/apps-overview#creating_shortcuts_to_external_files)

此外，如果您希望继续直接上传，您可以参考[此](https://developers.google.com/drive/examples/php#saving_files)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:25:36.073

据我所知，API 不允许从另一个引用者推送文件，而不是调用 API 的引用者。所以，长话短说：

首先，您需要将文件下载到您的服务器，然后将其从您的服务器上传到 gDrive。

在这里阅读更多：[https ://developers.google.com/drive/examples/php#saving_files](https://developers.google.com/drive/examples/php#saving_files)

或在这里：[https ://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

# mechanicalturk - 我可以获取 Mechanical Turker 的时区（没有 Javascript 吗？）

> ID：11809558
> 
> 赞同：0
> 
> 时间：2012-08-04T14:57:55.377
> 
> 标签：mechanicalturk

作为请求者，我已经完成了我的第一个 Mechanical Turk HIT。我正在为其建立这个的组织想扩展我的 HIT 以向 Turkers 询问有关时间的问题。但是，要使这些时间问题中的任何一个有意义，我们想知道它们位于哪个时区。

到目前为止，我提出了两个可能的解决方案：

1.) 询问土耳其人。

2.) 实施 Javascript 例程以从浏览器中获取时区。

如果 Mechanical Turk 系统本身允许我获取元数据（在 HIT 期间，或者基于我收到的 WorkerId 字段的事后），那就太好了。这样的事情存在吗？我已经阅读了一些文档，但没有遇到任何有用的东西。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:22:45.143

Mturk 不提供该级别的元数据，因此我认为您提到的两个选项之一可以正常工作。

询问工作人员对您来说是最简单的，但您必须假设某些工作人员可能选择了不正确的时区。这不是对土耳其人的轻视——一般来说只有人类:)

我会说您最好使用[this answer](https://stackoverflow.com/questions/1194933/javascripts-date-gettimezoneoffset#answer-1713634)`getTimezoneOffset()`中提到的javascript方法，尽管我仍然不清楚您是否需要考虑夏令时。

我将此添加到我们的待办事项中，并将在我们这样做时重新发布我们实施的解决方案。

# mysql - SQL 嵌套查询解释为相关不正确

> ID：11809561
> 
> 赞同：1
> 
> 时间：2012-08-04T14:58:09.580
> 
> 标签：mysql, sql, nested-queries

我有一个嵌套查询的严重问题，我怀疑 MySQL 将其解释为相关子查询，而实际上它应该是不相关的。该查询跨越两个表，一个是产品列表，另一个是它们在不同时间点的价格。我的目标是返回价格范围始终高于某个值的产品的每条价格记录。我的查询如下所示：

```
SELECT oP.id, oP.title, oCR.price, oC.timestamp
FROM Crawl_Results AS oCR
        JOIN Products AS oP 
            ON oCR.product = oP.id
        JOIN Crawls AS oC 
            ON oCR.crawl = oC.id
WHERE oP.id
IN (
    SELECT iP.id
    FROM Products AS iP
            JOIN Crawl_Results AS iCR 
               ON iP.id = iCR.product
    WHERE iP.category =2
    GROUP BY iP.id
    HAVING (
              MAX( iCR.price ) - MIN( iCR.price )
           ) >1
)
ORDER BY oP.id ASC 
```

单独来看，内部查询执行良好，并返回价格范围高于标准的产品的 id 列表。如果我在 IN 子句中提供一个简单的 id 列表，外部查询也可以正常工作。但是，当我将它们一起运行时，查询需要约 3 分钟才能返回约 1500 行，因此我认为它正在为外部的每一行执行内部查询，这并不理想。我确实在内部和外部查询中的列别名相同，所以我认为如上所述在内部和外部对它们进行不同的别名可以解决它，但事实并非如此。

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:15:00.513

MySQL 可能认为它可以使用索引来更快地执行查询，方法是为每个`OP.id`. 首先要检查的是[您的统计数据是否是最新的](http://dev.mysql.com/doc/innodb/1.1/en/innodb-other-changes-statistics-estimation.html)。

您可以将 重写`where ... in`为过滤`inner join`。对于搜索，这不太可能被“优化”：

```
SELECT  *
FROM    Crawl_Results AS oCR
JOIN    Products AS oP 
ON      oCR.product = oP.id
JOIN    Crawls AS oC 
ON      oCR.crawl = oC.id
JOIN    (
        SELECT  iP.id
        FROM    Products AS iP
        JOIN    Crawl_Results AS iCR 
        ON      iP.id = iCR.product
        WHERE   iP.category =2
        GROUP BY 
                iP.id
        HAVING  (MAX(iCR.price) - MIN(iCR.price)) > 1
        ) filter
ON      OP.id = filter.id 
```

另一种选择是使用临时表。您将子查询的结果存储在临时表中并加入该表。这确实迫使 MySQL 不将子查询作为相关查询执行。

# php - 将日期插入 MySQL

> ID：11809563
> 
> 赞同：-3
> 
> 时间：2012-08-04T14:58:50.260
> 
> 标签：php, mysql, html, datepicker

我的网站很简单，我要做的就是将我在日期选择器中选择的日期插入 MySQL。（目前它像这样插入“0000-00-00 00:00:00”）。

我的 PHP/HTML 代码是：

```
<form id="form_351400" class="appnitro"  method="post" action="insert.php">
    <div class="form_description">
        <div style="width:100%;border:0px solid #000;">
            <div style="float:left; width:75%;">

                <h2 align="left">Samurai Digital d.o.o.</h2>
                <p>
                    Maintenance Team
                </p>
            </div>
            <div style="float:left; width:25%;">
                <a href="index.php"><img src="samurai.png" alt="Samurai" width="150" height="150" /></a>
            </div>
            <div style="clear:both;"></div>
        </div>
    </div>
    <ul >
        <li id="li_0" >
            <label class="description" for="element_0">Insert into DB </label>
            <br/>
        </li>
        <li id="li_1" >
            <label class="description" for="element_1" name="id" >ID </label>
            <input type="text" name="id" />
        </li>
        <li id="li_2" >
            <label class="description" for="element_3">Date </label>
            <span>
                <input id="element_3_1" name="element_3_1" class="element text" size="2" maxlength="2" value="" type="text">
                / <label for="element_3_1">MM</label> 
            </span>
            <span>
                <input id="element_3_2" name="element_3_2" class="element text" size="2" maxlength="2" value="" type="text">
                / <label for="element_3_2">DD</label> 
            </span>
            <span>
                <input id="element_3_3" name="element_3_3" class="element text" size="4" maxlength="4" value="" type="text">
                <label for="element_3_3">YYYY</label> 
            </span>
            <span id="calendar_3"> <img id="cal_img_3" class="datepicker" src="calendar.gif" alt="Pick a date."> </span>
            <script type="text/javascript">
                Calendar.setup({
                    inputField : "element_3_3",
                    baseField : "element_3",
                    displayArea : "calendar_3",
                    button : "cal_img_3",
                    ifFormat : "%B %e, %Y",
                    onSelect : selectDate
                });
            </script>
        </li>
        <li id="li_3" >
            <label class="description" for="element_2" name="refid" >Refid </label>
            <input type="text" name="refid" />
        </li>
        <li id="li_4" >
            <label class="description" for="element_4" name="classification" >Classification </label>
            <select name="classification">
                <option value="SECRET">SECRET</option>
                <option value="SECRET//NOFORN">SECRET//NOFORN</option>
                <option value="CONFIDENTIAL">CONFIDENTIAL</option>
                <option value="CONFIDENTIAL//NOFORN">CONFIDENTIAL//NOFORN</option>
                <option value="UNCLASSIFIED">UNCLASSIFIED</option>
                <option value="UNCLASSIFIED//FOR OFFICIAL USE ONLY">UNCLASSIFIED//FOR OFFICIAL USE ONLY</option>
            </select>
        </li>
        <li id="li_5" >
            <label class="description" for="element_5" name="origin" >Origin </label>
            <input type="text" name="origin" />
        </li>
        <li id="li_6" >
            <label class="description" for="element_6" name="destination" >Destination </label>
            <input type="text" name="destination" />
        </li>
        <li id="li_7" >
            <label class="description" for="element_7" name="header" >Header </label>
            <input type="text" name="header" />
        </li>
        <li id="li_8" >
            <label class="description" for="element_8" name="content" >Content </label>            <textarea rows="15" cols="40" name="content"></textarea>
            <br/>
        </li>
        <input type="Submit" />
    </ul >
</form> 
```

还有一个连接到我的 MySQL 的 PHP：

```
<?php

    $id = $_POST['element_1'];
    $date = $_POST['element_3_3'].'-'.$_POST['element_3_1'].'-'.$_POST['element_3_2'];
    $refid = $_POST['element_2'];
    $classification = $_POST['element_4'];
    $origin = $_POST['element_5'];
    $destination = $_POST['element_6'];
    $header = $_POST['element_7'];
    $content = $_POST['element_8']; 

    $con = mysql_connect("localhost","XXXXXX","XXXXXX");
    if (!$con)
    {
        die('Error connecting to mysql server:  ' . mysql_error());
    }

    mysql_select_db("XXXXXX", $con);

    $sql="INSERT INTO emails (id, date, refid, classification, origin, destination, header, content)
    VALUES
    ('$_POST[id]','$_POST[date]','$_POST[refid]','$_POST[classification]','$_POST[origin]','$_POST[destination]','$_POST[header]','$_POST[content]')";

    if (!mysql_query($sql,$con))
    {
        die('Error: ' . mysql_error());
    }
    echo "1 record added";

    mysql_close($con);
?> 
```

所有其他表格都在工作，我可以添加它们，除了日期。也许是因为我以错误的方式将 DAY / MONTH / YEAR 添加为一个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:55:10.917

使用 CDN 将 jquery min 和 ui 加载到您的页面中或托管它。

在您想要的字段上运行日期选择器，并确保它采用您想要的格式。

```
<script>
    $(function(){
        var pickerOpts = {
            dateFormat:"d MM, yy"
        }; 
        $("#date").datepicker(pickerOpts);
    });
</script> 
```

HTML

```
<label>Date</label><input type="text" id="date" name="date" value="<?php echo $row_config['date']; ?>"> 
```

然后更新或插入

```
if ($_POST) {
$date = $post['date']; //escape this string
mysql_query("UPDATE config SET date = '$date'") or die(mysql_error());
} 
```

修改此方法以适合您的代码。我利用它来设置网站建设结束的日期。因此，我更新并打印日期字段中的值，以向管理员显示它设置的日期，以防他想要更改它。

对于您的代码（尚未测试，尽管过滤器是我使用的功能），这将在一页中处理所有内容。

```
<?php
function filter($data) // for sql injection
{
   // normalize $data because of get_magic_quotes_gpc
   $dataNeedsStripSlashes = get_magic_quotes_gpc();
   if ($dataNeedsStripSlashes) {
       $data = stripslashes($data);
   }
   // normalize $data because of whitespace on beginning and end
   $data = trim($data);
   // strip tags
   $data = strip_tags($data);
   // replace characters with their HTML entitites
   $data = htmlentities($data);
   // mysql escape string    
   $data = mysql_real_escape_string($data);
   return $data;
}

if ($POST) {

    $con = mysql_connect("localhost","XXXXXX","XXXXXX") or die("Could not connect to database! " . mysql_error());
    mysql_select_db("XXXXXX");

    foreach($_POST as $key => $value) { // will escape and filter post data
        $post[$key] = filter($value);
    }

    $id = $post['element_1'];
    $date = $post['date']; // change this in the database to date varchar 50 or something
    $refid = $post['element_2'];
    $classification = $post['element_4'];
    $origin = $post['element_5'];
    $destination = $post['element_6'];
    $header = $post['element_7'];
    $content = $post['element_8']; 

    // we already posted so we dont have to repost data
    $sql="INSERT INTO emails (id, date, refid, classification, origin, destination, header, content) 
    VALUES ('$id','$date','$refid','$classification','$origin','$destination','$header','$content')";

    mysql_query($sql) or die(mysql_error());

}
?>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function(){
    var pickerOpts = {
        dateFormat:"d MM, yy"
    }; 
    $("#date").datepicker(pickerOpts);
});
</script>
</head>
<body>
<form action="" name="formname" id="formid"> <!-- impt to have action="" -->
<!-- add all your other elements here -->
<label>Date</label><input type="text" id="date" name="date">
<!-- buttons here -->
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:48:06.527

您的代码中的问题是您两次读取 POST 变量，第二次是不工作的变量，但您需要工作的变量（因为它是`INSERT`语句！）：

在顶部，你有这个：

```
$id = $_POST['element_1'];
$date = $_POST['element_3_3'].'-'.$_POST['element_3_1'].'-'.$_POST['element_3_2'];
$refid = $_POST['element_2']; 
```

...但后来你有这个：

```
$sql="INSERT INTO emails (id, date, refid, classification, origin, destination, header, content) VALUES
('$_POST[id]','$_POST[date]','$_POST[refid]','$_POST[classification]','$_POST[origin]','$_POST[destination]','$_POST[header]','$_POST[content]')"; 
```

您的表单正在为 等设置`name`属性`refid`，`classification`但是表单中没有任何值来自 POST 元素`date`，因此您什么也没有得到，因此它什么也没有插入。我猜你希望使用你在`$date`第二行中输入的连接值，但你没有`$date`在插入语句中使用，但是`$_POST[date]`，它不存在。

如果您使用在顶部填充的变量而不是在`INSERT`语句中使用 POST 变量，您可能会发现它会有所改善，但我建议您仅将其作为权宜之计，同时在评论中遵循其他人的建议！您的代码在准备好用于实时网站之前需要相当多的支持和保护。

# java - 将字符串输出到文件中，而不清除文件

> ID：11809565
> 
> 赞同：1
> 
> 时间：2012-08-04T14:59:04.480
> 
> 标签：java

我一直在使用 BufferedWriter 对文本文件进行某种“记录”，但遇到了一个问题：

我运行以下代码..相当基本..

```
BufferedWriter out = new BufferedWriter(new FileWriter(path+fileName));
String str = "blabla";
out.write(str);
out.close(); 
```

接下来我知道的是，包含几行文本的整个文件已被清除，只有“blabla”存在。

我应该使用什么类使它添加一个带有文本'blabla'的新行，而不必将整个文件文本转换为字符串并将其添加到'blabla'之前的'str'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T15:02:01.240

> 我应该使用什么类使它添加一个带有文本'blabla'的新行，而不必将整个文件文本转换为字符串并将其添加到'blabla'之前的'str'？

您正在使用正确的类（好吧，也许 - 见下文） - 您只是没有检查构造选项。您希望[`FileWriter(String, boolean)`](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)构造函数重载，其中第二个参数确定是否附加到现有文件。

然而：

*   无论如何，我建议您反对`FileWriter`，因为您无法指定编码。尽管很烦人，但最好使用正确的编码`FileOutputStream`将其包装起来。`OutputStreamWriter`
*   不要使用`path + fileName`来组合目录和文件名，而是使用`File`：

    ```
    new File(path, fileName); 
    ```

    这让核心库可以处理不同的目录分隔符等。

*   确保使用`finally`块关闭输出（这样即使抛出异常也可以清理），或者如果您使用的是 Java 7，则使用“try-with-resources”块。

所以把它们放在一起，我会使用：

```
String encoding = "UTF-8"; // Or use a Charset
File file = new File(path, fileName);
BufferedWriter out = new BufferedWriter(
    new OutputStreamWriter(new FileOutputStream(file, true), encoding));
try {
   out.write(...);
} finally {
   out.close()'
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T15:01:46.317

尝试使用`FileWriter(filename, append)` where append 为 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T15:01:46.567

```
try {
    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("outfilename", true)));
    out.println("the text");
    out.close();
} catch (IOException e) {
    //oh noes!
} 
```

以上应该工作：[源参考](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)

# c# - 单击按钮继续下一个方法

> ID：11809566
> 
> 赞同：0
> 
> 时间：2012-08-04T14:59:18.737
> 
> 标签：c#

当我单击一个按钮时，我想一个接一个地运行多个方法。我想要一个单击按钮允许执行队列中的下一个方法。

消息框正是我想要的，但我讨厌消息框。

这就是我要实现的：

```
private void teststart_Click(object sender, EventArgs e)
{
    step1();
    //Wait for button to be clicked
    step2();
    //wait for button to be clicked
    step3();
    //wait for button to be clicked

}

private void continuebutton_Click(object sender, EventArgs e)
{
    //button to be clicked
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:36:53.760

为您的 step 功能创建一个队列并委托它会更多练习。我已经完成了一个示例，当您单击按钮时将委托（步骤返回字符串）入队，它将包含您所有步骤的队列出列：

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public  delegate string mystep ();
        public Queue<mystep> queuestep;
        public Form1()
        {
            InitializeComponent();
            queuestep = new Queue<mystep>();
            queuestep.Enqueue(step1);
            queuestep.Enqueue(step2);
            queuestep.Enqueue(step3);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (queuestep.Count >0)
            {
           mystep currentstep =  queuestep.Dequeue();
           textBox1.Text =currentstep();
           }
        }

        private string step1()
        {
            return "step1";
        }
        private string step2()
        {
            return "step2";
        }
        private string step3()
        {
            return "step3";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:06:47.010

您可以维护一个静态变量（即步数），每次按下正确的按钮时，增加步数。

```
static int _step = 0;

private void teststart_Click(object sender, EventArgs e) 
{ 
    if(_step > 0)
    {
      // already started
      return;
    }
    step1(); 
    _step++;

} 

private void continuebutton_Click(object sender, EventArgs e) 
{ 
    if(_step == 0) 
    {  
        // start button must be pushed first
        return;
    }

    if(_step == 1)
    {
      step2(); 
      _step++;
    }
    else
    {
      step3(); .
      _step = 0;  // start over
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T02:35:46.977

对于我的特定解决方案，我从上面发布的解决方案开始。在更多谷歌之后，我发现最简单的方法是

```
do
{Application.Doevents()}
while (step == false) 
```

我在其中发现的唯一错误是我必须单击该按钮两次，所以我禁用了该按钮，无论如何我都想这样做，然后稍后重新启用它。我读过这是糟糕的编码，但我还没有找到更简单的方法来实现这个目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T15:06:59.873

这不是特别的 C#，但这是一种可以做你想做的事情的方法。

保留一个类变量，比如`Step`整数类型的任何东西。在`continuebutton_click`-Method 内部，检查 if `Step % 2 == 0`，如果是，则触发行中的下一个方法（使用 switch/case 或其他东西）并递增 Step 。方法完成后，再次增加步数。

这样，您无需使用消息框即可获得所需的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T18:14:51.930

它的丑陋但有效，感谢您的建议。该代码正是我想要的。我确信有一种更优雅的方式来解决这个问题，但正如我所说的，我仍然是一个菜鸟，这很有效。

```
 step++;
        if (step == 502 || step == 392 || step == 305 || step == 14 || step == 313 ||          step == 324 || step == 332 || step == 344 || step == 357 || step == 363 || step == 373 || step == 384 || step == 122 || step == 408 || step == 222)
        {defaults();}

        if (step == 300)
        {firstlo();}

        if (step == 1 || step == 301)
        {firstlo1();}

        if (step == 2 || step == 302)
        {firstlo2();}

        if (step == 3 || step == 303)
        {firstlo3();}

        if (step == 4)
        {loinband();}

        if (step == 5 || step == 311)
        {loinband1();}

        if (step == 6)
        { secondlo();}

        if (step == 7 || step == 321)
        { secondlo1(); }

        if (step == 8 || step == 322)
        { secondlo2(); }

        if (step == 9)
        {currents();}

        if (step == 10)
        {outputpower();}

        if (step == 11 || step == 341)
        { outputpower1(); }

        if (step == 12 || step == 342)
        { outputpower2(); }

        if (step == 215)
        {satatt();}

        /*if (step == 351)
        { satatt1(); }*/

        if (step == 351 || step == 101 || step == 216)
        { satatt2(); }

        if (step == 352 || step == 102 || step == 217)
        { satatt3(); }

        if (step == 353 || step == 103 || step == 218)
        { satatt4(); }

        if (step == 354 || step == 104 || step == 219)
        { satatt5(); }

        if (step == 355 || step == 105 || step == 220)
        { satatt6(); }

        if (step == 106 || step == 211)
        { lineargain(); }

        if (step == 361 || step == 107 || step == 212)
        { lineargain1(); }

        if (step == 108 || step == 213)
        { compression(); }

        if (step == 109 || step == 371 || step == 214)
        { compression1(); }

        if (step == 110 || step == 208)
        { outputinband(); }

        if (step == 111 || step == 381 || step == 209)
        { outputinband1(); }

        if (step == 112 || step == 382 || step == 210)
        { outputinband2(); }

        if (step == 113 || step == 207)
        { ifrl(); }

        if (step == 114)
        { twotone(); }

        if (step == 115 || step == 401 || step == 201)
        { twotone1(); }

        if (step == 116 || step == 402 || step == 202)
        { twotone2(); }

        if (step == 117 || step == 403 || step == 203)
        { twotone3(); }

        if (step == 118 || step == 404 || step == 204)
        { twotone4(); }

        if (step == 119 || step == 405 || step == 205)
        { twotone5(); }

        if (step == 120 || step == 406 || step == 206)
        { twotone6(); }

        if (step == 304 || step == 13 || step == 501 || step == 312 || step == 323 || step == 331 || step == 343 || step == 356 || step == 362 || step == 372 || step == 383 || step == 391 || step == 121 || step == 407 || step == 221)
        {
            cont.Hide();
            instructions.Text = "Test Complete\n\n\nPress continue to return program to start condition\nor close program.";</code> 
```

# drupal - 主题化 node_form 的更好方法

> ID：11809567
> 
> 赞同：1
> 
> 时间：2012-08-04T14:59:23.100
> 
> 标签：drupal, drupal-7, drupal-theming

我有一个定义内容类型的模块。假设我只有`title`和`body`字段。

当节点表单呈现时，它具有标准`title (textfield)`和`body (textarea)`.

我想将这两个字段包装成`fieldset`.

这就是我实现这一目标的方式，但我认为这不是最好的方式。

```
/**
 * Implements hook_form().
 */
function hook_form($node, $form_state) {
  return node_content_form($node, $form_state);
}

/**
 * Implements hook_form_FORM_ID_alter().
 */
function hook_form_node_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'content_type_name_node_form') {
    $form['info'] = array(
      '#type' => 'fieldset',
      '#title' => t('Describe your content')
    );

    $form['info']['title'] = $form['title'];
    unset($form['title']);

    $form['info']['body'] = $form['body'];
    unset($form['body']);
  }
} 
```

关于如何使它变得更好的任何建议？

**更新**

我想到的另一个变体。几乎是一样的，只是稍微改进了一点。

```
/**
 * Implements hook_form_FORM_ID_alter().
 */
function hook_form_node_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'content_type_name_node_form') {
    $groups = array(
      'info' => array(
        'title' => t('Describe your content'),
        'fields' => array('title', 'body')
      )
    );

    foreach ($groups as $key => $group) {
      $form[$key] = array(
        '#type' => 'fieldset',
        '#title' => $group['title']
      );
      foreach ($group['fields'] as $field) {
        $form[$key][$field] = $form[$field];
        unset($form[$field]);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:19:04.077

我必须同意 David Fells 的观点——我认为你的做法没有问题。

但只是为您提供一种在字段集中设置标题和正文字段的非编程方式：您可以查看[字段组模块](http://drupal.org/project/field_group)。

> 顾名思义，Fieldgroup 将字段组合在一起。所有可字段实体都可以添加组以将其字段包装在一起。Fieldgroup 带有默认的 HTML 包装器，如垂直选项卡、水平选项卡、手风琴、字段集或 div 包装器

老实说，如果您只想为您的标题和正文创建一个字段集，这可能有点矫枉过正，但如果您对字段分组和主题有其他类似的要求，让 UI 为您做这件事可能会很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T19:33:33.117

你做的正是你应该做的，弗拉德。这就是 API 的使用方式，实际上没有其他方法可以通过代码来实现。

您也可以使用 Panels 更改布局，尽管我自己没有这样做并且无法解释该过程，我也不能肯定地说它会完全按照您在此处所做的。使用自定义模块可能是最直接的途径。

# java - android模拟器中的fps太少/启动时错误消息

> ID：11809569
> 
> 赞同：0
> 
> 时间：2012-08-04T14:59:33.017
> 
> 标签：java, android, android-intent, emulation, android-activity

我有一个应用程序，目前，它运行一个循环，它更新游戏状态约 25 次/秒，并尝试以 40 次/秒的速度绘制它。更新工作正常，它显示的只是多一点 25。但在模拟器上，无论要绘制多少，游戏的绘制速度都低于 20 fps。即使我只将背景涂成绿色，它的 fps 也很低。

我将应用程序发送给在他的手机上对其进行测试的人，它以 40fps 的绘图速度和 25fps 的更新速度正常运行。

我在具有不同API级别的模拟器上对其进行了测试，绘图fps总是太慢。我使用日食。我是否必须对模拟器进行任何特殊设置？

还有另一个问题，在他的手机上测试它的人在启动应用程序时收到一条错误消息，它说应用程序不会做出反应以及等待和关闭的选项。等待 5-10 秒后，将显示内容视图。我创建内容视图并在方法中分配变量`onCreate`，而不启动循环。在`onStart`方法中我设置`contentView`并启动循环，但它运行一个空的while循环，直到我`boolean`在`onResume`方法中设置a。有任何想法吗？

```
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 view= new MainMenu(this); }

protected void onStart() { 
super.onStart(); 
this.setContentView(view); 
view.startGameView();
}

 public void startGameView() {
 loop=new GameLoop(this); 
loop.start();
 }

protected void onResume() {
 super.onResume();
 view.resumeGameView();
} 

public void resumeGameView() { 
loop.b_pause=false;//loop starts to execute code for drawing/updating
 } 
```

活动更改的代码：

```
public void changeActivity(Class c, String str)
    {
        Intent i=new Intent(this, c);
        startActivity(i);       

    } 
```

# c++ - 结构 sockaddr_un：正确初始化

> ID：11809588
> 
> 赞同：2
> 
> 时间：2012-08-04T15:01:56.063
> 
> 标签：c++, c, connect, unix-socket

几天前，我遇到了一个与**struct sockaddr_un**相关的奇怪错误。可以在[此处](https://stackoverflow.com/questions/11631578/unix-domain-connect-no-such-file-or-directory)阅读有关此内容的更多信息。

一段时间后，我也找到了该错误的解决方案，这只是*memset* 'ing整个变量。现在我的问题是，正如已经在那边的一篇文章中提出的那样，为什么？

为什么我需要将整个本地而不是动态分配的变量设置为 0，即使我已将每个成员设置为合法且正确的值？

在其他*struct*（例如**struct sockaddr_in**）中是一个变量，它被用作填充，以便在内部看起来与**struct sockaddr**相同。您必须用 0 填充（或者也许您不必？请纠正我）该变量，以使程序在任何时候都能正确运行。

另外，我在哪里可以查看像 connect() 这样的源代码？会不会是 connect() 函数没有很好地实现？还是我缺少一些基础知识？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:52:07.717

从阅读[`unix_stream_connect`源代码](http://lxr.linux.no/linux+v2.6.39.4/+code=unix_stream_connect)来看，似乎不需要将结构归零。我编写了一个测试程序，故意用一个值填充结构，其中客户端和服务器传入不同的填充值，并且它们能够很好地相互连接：

```
void init_addr (struct sockaddr_un *addr, const char *path, int I) {
    struct sockaddr_un tmp = { .sun_family = AF_UNIX };
    // fill sun_path
    memset(tmp.sun_path, I, UNIX_PATH_MAX);
    // copy path
    snprintf(tmp.sun_path, UNIX_PATH_MAX, "%s", path);
    *addr = tmp;
} 
```

可能导致连接失败的原因是竞争条件，即当客户端尝试连接时服务器尚未完成设置`connect`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:19:27.073

答案取决于几件事。

首先，如果您不使用匿名名称（文件名不以 0 开头），那么您不需要清除结构。

如果您使用匿名名称，则取决于您是将“len”参数传递给各种调用，如“sizeof(sockaddr_un)”或类似“len = strlen(local.sun_path+1) +1 + sizeof(local .sun_family); （这很丑，因为它忽略了可能的结构打包问题）。

对于匿名名称，套接字名称包括第一个 0 之后的所有字符，直到结构的末尾（由 len 定义）。因此，如果您将 len 作为 sizeof(sockaddr_un) （推荐）传递，则需要整个 sun_path 在两个调用之间进行匹配，因此需要将结构清零（或相同地设置结构）。

为了获得最佳结果、可读性和可移植性，您应该使用 len = sizeof(sockaddr_un)，并在初始化之前将 sockaddr_un 设置为 0。

这篇文章应该会有所帮助： [无法连接到 Linux“抽象”unix 套接字](https://stackoverflow.com/questions/11640826/can-not-connect-to-linux-abstract-unix-socket)

# maven - antrun 后文件损坏

> ID：11809591
> 
> 赞同：0
> 
> 时间：2012-08-04T15:02:28.330
> 
> 标签：maven, filtering, pom.xml, maven-antrun-plugin

我的 pom 文件有问题，我需要打开过滤选项，但我想在放置在资源文件夹中的 mp3 文件上排除此选项。现在在 antrun 命令文件损坏且无法播放之后。我做了这样的事情：

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
      <filtering>true</filtering>
  </resource>
  <resource>
    <directory>src/main/resources/sounds</directory>
    <excludes>
       <exclude>**/*.mp3</exclude>
    </excludes>
  </resource>
</resources> 
```

有任何想法吗？

# unit-testing - 摩卡测试输出字体丢失？

> ID：11809598
> 
> 赞同：4
> 
> 时间：2012-08-04T15:03:29.220
> 
> 标签：unit-testing, node.js, unicode, console, mocha.js

我正在运行我的 Mocha 单元测试，如下所示（带输出）

```
[jiewmeng@JM Tickle]$ cake test-ui
path.existsSync is now called `fs.existsSync`.

  hello
    ��� should pass 
    ��� should pass 2 

  Home page
    ��� should have a title of Express (72ms)

  ��� 3 tests complete (77ms) 
```

如您所见（希望如此），我有“？” 而不是我期望的蜱/十字架？我想我错过了一些字体？他们是谁？我在 Arch Linux

**更新**

```
$ locale
LANG=en_US.UTF-8
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

字体是 DejaVu Sans Mono Book

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:11:10.253

一个可能的问题是您的编码不是 utf-8。

尝试`locale`在您的终端中运行。如果您支持 utf-8，您应该会看到类似以下内容：

```
[ ~ ]
➜ locale
LANG="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_CTYPE="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_ALL=
[ ~ ]
➜ 
```

（我在 OSX 上，所以我的输出可能有或多或少的变量；要注意的重要一点是`en_US.UTF-8`值）。

如果没有，您可能想尝试在配置中取消注释（或添加）一行：

```
export LANG=en_US.UTF-8 
```

根据您的系统，适当的配置文件可能是以下之一：

*   /etc/rc.conf # <= Arch Linux
*   /etc/环境
*   /etc/profile.d/lang.sh

这将更改所有用户的编码，但理论上您也可以通过将行添加到以下之一来为您的用户进行更改：

*   ~/.pam_environment
*   ~/.profile

我可以提供更多了解您的系统（操作系统、版本等）的信息。

您可能还想看看：[https ://unix.stackexchange.com/questions/22435/how-to-fix-character-encoding-in-bash-arch-linux](https://unix.stackexchange.com/questions/22435/how-to-fix-character-encoding-in-bash-arch-linux)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:27:55.727

要了解您的终端使用哪种编码，您可以查看`/usr/share/xsessions/06xfce4.desktop`（来源：[XFCE faq](http://wiki.xfce.org/faq)）。

查看[mocha 源](https://github.com/visionmedia/mocha/blob/master/lib/reporters/base.js)，这似乎不是字体问题，因为他们只是将字符设置为 UTF-8 字符本身。此外，来源只是表明，每当他们设置字体时，他们会使用类似于 的字体`'helvetica, arial, sans-serif'`，这可能会在您的系统上默认为不支持该字符的字体。（来源：`find . -iname "*.*" -exec grep -Hn "font" {} \;`在源代码上 - 他们似乎也使用字体：`12px monaco, monospace`; 在 css 中，但据我所知，这与控制台输出没有任何关系。）

尝试找出您的终端使用的字体或系统上默认的“helvetica, arial, sans-serif”。（可能最简单的检查方法是使用 css。）

仅供参考：他们似乎使用的 x 符号：

```
✖
HEAVY MULTIPLICATION X
Unicode: U+2716, UTF-8: E2 9C 96 
```

# java - 当我调用 setRequestProperty 时，Java 小程序在浏览器上设置 cookie

> ID：11809599
> 
> 赞同：0
> 
> 时间：2012-08-04T15:03:30.380
> 
> 标签：java, cookies, browser

我正在使用 URLconnection 在小程序中发送数据，

这是我的代码：

```
URL url = new URL("http://example.com");
URLConnection conn = url.openConnection();
conn.setRequestProperty("cookie", cookie_val); 
```

在这种情况下，cookie的值是在浏览器中设置的，但我不希望这样，cookie仅供applet内部使用。我怎样才能撤销 cookie 传输到浏览器？

谢谢你 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:00:30.010

通过添加默认 cookiehandler 解决了问题

```
CookieManager manager = new CookieManager();
manager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
CookieHandler.setDefault(manager); 
```

防止cookies存储在浏览器上..

# ruby - 如何集成模块？

> ID：11809600
> 
> 赞同：1
> 
> 时间：2012-08-04T15:03:38.267
> 
> 标签：ruby, ruby-on-rails-3.2

更新：我稍微改变了我的模型，但它仍然不起作用。我收到以下错误消息：**ActionController::RoutingError (undefined local variable or method `stop_words_finder' for #< Class:0x007facb57f6908 >)**

**模型/pool.rb**

```
class Pool < ActiveRecord::Base

    include StopWords

    attr_accessible :fragment

  def self.delete_stop_words(data)
    words = data.scan(/\w+/)
    stop_words = stop_words_finder
    key_words = words.select { |word| !stop_words.include?(word) }

    pool_frag = Pool.create :fragment => key_words.join(' ')
  end
end 
```

**lib/stop_words.rb**

```
module StopWords
      def stop_words_finder
            %w{house}
      end
end 
```

**控制器/tweets_controller.rb**

```
class TweetsController < ApplicationController

  def index
    @tweets = Pool.all

    respond_with(@tweets)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:57:33.667

就目前而言，您将模块包含到您的 ApplicationController 类中。这对`Pool`课堂完全没有影响。此外，`Pool`在其定义中创建类的实例是相当非正统的——你真的想在每次加载应用程序的代码时在数据库中创建一个新行吗？我会按照这些思路重构事情

```
class Pool < ActiveRecord::Base
  class << self
    include StopWords

    def create_from_data(data)
      words = data.scan(/\w+/)
      stop_words = stop_words_finder
      key_words = words.select { |word| !stop_words.include?(word) }

      pool = Pool.create :pooltext => key_words.join(' ')
    end
  end
end 
```

`Pool.create_from_data %q{Ich gehe heute schwimmen. Und du?}`然后，您可以在要创建它时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:46:12.427

```
stop_words = :stop_words_finder 
```

将符号分配`:stop_words_finder`给`stop_words`。您要做的是调用`stop_words_finder`您包含的方法，该方法`Stopwords`将返回数组。在这种情况下，您所要做的就是删除冒号。

```
stop_words = stop_words_finder 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:00:18.873

将此添加到您的模型中，以使 stop_words_finder 可用于 Pool 实例：

```
include StopWords 
```

Pool.new.stop_words_finder 将工作

要使 Pool 类可以使用 stop_words_finder，请使用 extend：

```
extend StopWords 
```

Pool.stop_words_finder 将起作用。

另外，到底为什么要在 Pool 类定义中创建 Pool 的实例？

# ios - 找出保存在 NSString 中的 URL 的扩展部分

> ID：11809605
> 
> 赞同：13
> 
> 时间：2012-08-04T15:04:34.393
> 
> 标签：ios, objective-c, nsstring

如何找出并保存我要保存在相册中的字段的扩展名。我想知道它是哪种格式。例子：

[http://www.example.com/myvideo.mp4](http://www.example.com/myvideo.mp4) , [http://www.example.com/mypicture.png](http://www.example.com/mypicture.png)

我需要的是 .mp4 和 .png。如果可能的话，请给我示例代码。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T15:10:52.780

你看过文档`NSString`吗？你只需要发送`-pathExtension`到你的字符串。

如果您正在处理包含 URL 的字符串，则应首先将其转换为`NSURL`，然后提取路径：

```
NSString *stringURL = @"http://...";
NSURL *url = [NSURL URLWithString:stringURL];
NSString *path = [url path];
NSString *extension = [path pathExtension]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-09T08:17:17.800

NSURL 也有 pathExtension（在 iOS 4.0 及更高版本中可用。）

```
NSString *extension = [[NSURL URLWithString: @"http://sample.example.com/path/hellowwrod.ext"] pathExtension]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T15:11:36.837

参考以下代码。

```
NSString *path = @"http://www.mysite.com/myvideo.mp4";
NSString *lastPath = [path lastPathComponent];
NSString *fileExtension = [lastPath pathExtension]; // [path pathExtension];
NSLog(@"%@", lastPath); //myvideo.mp4
NSLog(@"%@", fileExtension); // mp4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T15:43:33.643

对于斯威夫特：

```
let stringUrl = " http://www.example.com/mypicture.png"
let url = URL(string: stringUrl)
let path = url?.path
let fileExtension = url?.pathExtension 
```

# jquery - 为什么插件不适用于除第一个元素之外的所有元素

> ID：11809607
> 
> 赞同：0
> 
> 时间：2012-08-04T15:04:53.003
> 
> 标签：jquery

我昨晚创建了[这个](https://github.com/raynesax/image-resize-jquery-plugin)图像大小调整插件。问题是如果只有一个“div.content”，我可以执行以下操作来使其工作：

```
window.onload=function(){
     $('div.content').image_resizer();
} 
```

但是当我添加更多这样的“div.content”并执行以下操作时：

```
window.onload=function(){
         $.each($('div.content'),function(k,v){
           $(this).image_resizer();
         });
} 
```

该插件适用于第一个 div.content 并在“div.content”的其余部分失败。你能告诉我我做错了什么吗？

[编辑]这里是标记：

```
<div class="content">
        <img src="./images/img5.jpg" id='p1'/>
</div> 
```

[编辑 2] 还有一件事，当我 `$.each($('div.content'),function(k,v){$(this).image_resizer()});`手动输入 chrome 的控制台时。所有图像都会调整大小以适应它们各自的 div。

[插件代码]

```
(function($){
    $.fn.image_resizer = function(options){
        $.fn.image_resizer.defaults = { MAX_HEIGHT : 280,MAX_WIDTH : 330,BORDER_WIDTH : 10 }
        var opts = $.extend({},$.fn.image_resizer.defaults,options);
        return this.each(function(){
            //plugin code starts here

            // getting array of all the images inside 'di$(this)' on which this plugin is applied
            var arr =  $(this).find('img');

            //iterating o$(this)er the array 'arr'
            $.each(arr,function(k){
                //console.log(k,$(this))
                // now resizing the image

                img_hit=$(this).height();
                img_wit=$(this).width();
                //console.log(img_hit,img_wit);
                //calculating image height to width ratio
                var ratio = img_hit/img_wit;
                if(img_wit>img_hit){
                    //console.log("wit module");
                    if(img_wit>opts.MAX_WIDTH){
                        //console.log("Image needs resizing");
                        new_wit=opts.MAX_WIDTH-(opts.BORDER_WIDTH*2);
                        $(this).width(new_wit);
                        //console.log(new_wit);
                        var new_hit = ratio*new_wit;
                        $(this).height(new_hit)
                        var space = opts.MAX_HEIGHT-(new_hit+(opts.BORDER_WIDTH*2));
                        //console.log(space);
                        $(this).css('margin-top',space/2);
                        $(this).css('margin-bottom',space/2);
                    }else{
                        //console.log("Image doesn't need resizing")
                        var space = opts.MAX_HEIGHT-(img_hit+(opts.BORDER_WIDTH*2));
                        //console.log(space);
                        $(this).css('margin-top',space/2);
                        $(this).css('margin-bottom',space/2);
                    }
                }else{
                    //console.log("hit module");
                    if(img_hit>opts.MAX_HEIGHT){
                        //console.log("Image needs resizing");
                        new_hit = opts.MAX_HEIGHT-(opts.BORDER_WIDTH*2);
                        $(this).height(new_hit);
                        var new_wit = new_hit/ratio;
                        $(this).width(new_wit);
                    }else{
                        //console.log("Image doesn't need resizing");
                        var space = opts.MAX_HEIGHT-(img_hit+(opts.BORDER_WIDTH*2));
                        //console.log(space);
                        $(this).css('margin-top',space/2);
                        $(this).css('margin-bottom',space/2);
                    }
                }

            });

            //plugin code ends here
        });
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:28:23.953

它[在 jsFiddle 上运行良好](http://jsfiddle.net/9Q9Ur/)

这表明某处存在标记错误。

正如其他人指出的那样，没有必要迭代。您可以简单地使用： $('div.content').image_resizer();

# python - 将元素作为其他对象索引的 Numpy 数组

> ID：11809612
> 
> 赞同：2
> 
> 时间：2012-08-04T15:06:06.810
> 
> 标签：python, numpy

以下脚本从包含在列表中的颜色渐变创建一个 RGB 数组。数组 'cabbage' 的元素是列表 'cucumber' 的索引。以下脚本创建了一个数组 'cauliflower'，其形状与 'cabbage' 相同，但索引替换为来自 'cucumber' 的相应元组。Numpy 中是否有更直接的方法来执行此过程？

```
from numpy import array, shape, zeros

cabbage = array([[0,3,2],[3,2,1],[3,1,0]])
cucumber=[(0,100,0),(0,150,0),(0,200,0),(0,255,0)]
rows ,cols = shape(cabbage)
cauliflower = zeros((rows,cols),dtype=object)

for row in range(rows):
    for col in range(cols):
        cauliflower[row,col]=cucumber[cabbage[row,col]]

print cauliflower
[[(0, 100, 0) (0, 255, 0) (0, 200, 0)]
[(0, 255, 0) (0, 200, 0) (0, 150, 0)]
[(0, 255, 0) (0, 150, 0) (0, 100, 0)]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:18:12.040

Numpy 支持[精美的索引](http://www.scipy.org/Tentative_NumPy_Tutorial#head-0dffc419afa7d77d51062d40d2d84143db8216c2)：

```
>>> from numpy import array, shape, zeros
>>> cabbage = array([[0,3,2],[3,2,1],[3,1,0]])
>>> cucumber=array([(0,100,0),(0,150,0),(0,200,0),(0,255,0)])
>>> cucumber[cabbage]
array([[[  0, 100,   0],
        [  0, 255,   0],
        [  0, 200,   0]],

       [[  0, 255,   0],
        [  0, 200,   0],
        [  0, 150,   0]],

       [[  0, 255,   0],
        [  0, 150,   0],
        [  0, 100,   0]]]) 
```

# c++ - 使用 C++ 中的 Luabind 循环创建的对象导致应用程序崩溃

> ID：11809619
> 
> 赞同：1
> 
> 时间：2012-08-04T15:07:00.263
> 
> 标签：c++, lua, luabind

我正在尝试将 Lua 与我的游戏引擎原型一起使用，但我遇到了奇怪的错误。

我的目标是用 Lua 循环创建 X 对象并渲染它们。

```
sprite = Sprite("icon.jpg", 300, 300, 0)
sprite2 = Sprite("icon.jpg", 100, 100, 0)

b1 = BoxObject(sprite)
b2 = BoxObject(sprite2)

sprite3 = Sprite("circle.png", 200, 100, 0)
sprite4 = Sprite("circle.png", 300, 100, 0)

b3 = CircleObject(sprite3)
b4 = CircleObject(sprite4)

n = Node()
n:AddChild(b1)
n:AddChild(b2)
n:AddChild(b3)
n:AddChild(b4)

for i = 0, 10, 1 do 
    x = math.random(700)
    y = math.random(500)
    n:AddChild(BoxObject(Sprite("icon.jpg", x, y, 0)))
end

for i = 0, 10, 1 do 
    x = math.random(700)
    y = math.random(500)
    local s = Sprite("circle.png", x, y, 0)
    local o = CircleObject(s)
    n:AddChild(BoxObject)
end 
```

如果我这样做，代码可以正常工作，但游戏会在瞬间到几秒的随机时间内崩溃。如果我将此代码仅用于循环创建的对象，而不是手动创建的对象，游戏会立即崩溃。

但是，如果我用 C++ 编写等效的 Lua 代码，它可以毫无问题地运行。

```
for(int i = 0; i < 20; i++){
    float x = rand() % 700;
    float y = rand() % 500;

    n->AddChild(new BoxObject(new Sprite("icon.jpg", x, y)));
}

for(int i = 0; i < 20; i++){
    float x = rand() % 700;
    float y = rand() % 500;

    n->AddChild(new CircleObject(new Sprite("circle.png", x, y)));
} 
```

这是我的 Lua 绑定

```
static void Lua(lua_State *lua){
    luabind::module(lua)
    [
     luabind::class_<Node>("Node")
     .def(luabind::constructor<>())
     .def(luabind::constructor<float, float, float>())
     .def("Render", &Node::Render)
     .def("Move", &Node::Move)
     .def("Rotate", &Node::Rotate)
     .def("AddChild", &Node::AddChild)
     .def("RotateAroundPoint", &Node::RotateAroundPoint)
     ];
} 
```

除 AddChild 外，每个方法都接受并返回 void

```
virtual void AddChild(Node *child); 
```

Sprite 和 Box a 和 Circle 对象都继承自 Node 类。

有谁知道什么会导致这个奇怪的错误？我会很高兴有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:14:33.677

你有严重的所有权问题。

在 C/C++ 中，如果该代码或对象负责销毁它，则一段代码“拥有”一个指针或其他资源。它在需要它时保持它的活力，并确保在用完它*时将其销毁。*

保持了解谁拥有对任何即使是稍微复杂的 C 或 C++ 程序都至关重要的东西。

*当 Luabind从 Lua*创建 C++ 对象时，Lua 脚本*拥有*该对象。这意味着 Lua 的垃圾收集器将决定何时删除它。

所以这：

```
local s = Sprite("circle.png", x, y, 0) 
```

将创建一个`Sprite`生命周期受 Lua 状态控制的对象。当 Lua 状态不再有任何对它的活动引用时，Lua 状态将可以自由地删除它。

我不知道您的代码是如何工作的，但是这一行：

```
local o = CircleObject(s) 
```

建议`CircleObject`' 的构造函数应该声明对其所给对象的所有权（因此`CircleObject`决定何时删除它）。如果这是真的，那么当您将此构造函数与 Luabind 绑定时，您需要实际说明这一点。

如果`CircleObject`' 的构造函数不应该拥有所有权，那么......好吧，坦率地说，你的设计是可疑的；长期存储您不拥有的指针只是在乞求搞砸一些事情。但是，如果它真的应该存储一个由其他人拥有的指针，那么你需要使用 Lua 机制来确保它`Sprite`一直保持活动状态`CircleObject`。

类似地，该`Node::AddChild`函数看起来像是在声明它所获得的任何节点的所有权。这将是这样完成的：

```
.def("AddChild", &Node::AddChild, adopt(_1)) 
```

表示函数的`_1`第一个参数。这意味着`Node`声明第一个参数的所有权；如果它由 Lua 拥有，则此所有权链现在已断开，C++ 现在拥有该对象。

就个人而言，我会说这个 API 对 Lua 不利。您似乎希望所有次要对象所有权都在 C++ 代码中完成。所以 Lua 应该调用 C++ 函数来设置所有这些次要对象，而不需要 Lua 干预。Lua 应该调用 a 的成员函数`NodeManager`以获取/创建 a ，然后它应该调用将在 that`Node`中创建 a 的函数。`Sprite``Node`

Lua 不应该处理`BoxObject`诸如此类的细枝末节。它不应该直接创建一个`Sprite`对象并将其放入`Node`.

另外，就个人而言，这个 API 也不适用于*C++*。如果`Sprite`需要存储在某种容器中，并且该容器需要存储在某种容器中`Node`，那么如果不将其存储在容器中，就不可能创建`Sprite` *a*。这就是工厂函数的用途。我什至不确定什么`BoxObject`和`CircleObject`是为了什么，因为`Sprite`似乎正在做所有的工作。

# web-services - 什么是政府 2.0？我怎样才能在我的网站上实现相同的功能？

> ID：11809621
> 
> 赞同：1
> 
> 时间：2012-08-04T15:07:53.647
> 
> 标签：web-services

我的一位客户要求我`Gov 2.0`在他们的网站上实施。基本上我对此一无所知，我`Gov 2.0`第一次听到这个词。我做了一些研究和谷歌搜索，发现它是微软的产品/东西，与政府网站和社交媒体有关。

谁能告诉我这到底是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:12:28.460

Gov 2.0 实际上是美国政府在网络上公开数据的一项举措。

这是一个可能对您有所帮助的演示文稿：

[http://www.cendi.gov/presentations/05_12_11_Holm.pdf](http://www.cendi.gov/presentations/05_12_11_Holm.pdf)

这并不是严格意义上的技术举措，但我怀疑您的客户希望使用 RESTful Web 服务在 Web 上公开他们的 Web API 和数据集。

希望这可以帮助。

# javascript - Node.js + Mongoose：模型/模式与数据库逻辑分离

> ID：11809622
> 
> 赞同：0
> 
> 时间：2012-08-04T15:08:01.137
> 
> 标签：javascript, node.js, mongodb, mongoose, require

我有一个带有 2 个文件的示例 node.js 项目，我想将 Post-object 存储到我的数据库中。这是我的架构（在 ./schema/post.js 中）

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema;

module.exports = function() {
    var Post = new Schema({
        title: String,
        body: String,
        date: Date
    });
    mongoose.model('Post', Post);
}; 
```

在**第二个文件**中是数据库逻辑（连接、保存一个新的 post-object 并断开连接）

```
var mongoose = require('mongoose'),
    Post = require('./schema/post.js');

mongoose.connect('mongodb://Thomas-PC/test');

var post = new Post();
post.title = 'asdfafsd';
post.body = 'asdfasdf';
post.date = Date.now();

post.save(function (err) {
  if (err) { throw err; }
    console.log('saved');
  mongoose.disconnect();
}); 
```

这是行不通的。我的问题是：如何在单独的文件中创建模型对象的新实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:12:20.847

这是行不通的。你可以让它这样工作：

```
module.exports = function() {
var Post = new Schema({
    title: String,
    body: String,
    date: Date
});
return mongoose.model('Post', Post);
} 
```

和 ：

```
Post = require('./schema/post.js')() 
```

# ruby-on-rails - 我可以在使用 taps 和 heroku db:push 后运行 heroku run rake db:migrate 吗？

> ID：11809624
> 
> 赞同：0
> 
> 时间：2012-08-04T15:08:19.913
> 
> 标签：ruby-on-rails, heroku, database-migration, taps

几个月前，我不小心删除了 heroku cedar 堆栈上的生产数据库。我试图通过 重新创建数据库`heroku run rake db:migrate`，但是我的迁移出了点问题并且失败了。然后我安装了水龙头并做了一个`heroku db:push`，一切都很好。

我现在可以`heroku run rake db:migrate`在运行本地迁移后使用来更新生产数据库，还是我永远与水龙头绑定在一起`heroku db:push`？

也许是问这个问题的更好方法：会`heroku run rake db:migrate`经历我所有的迁移（并且可能会失败），还是只会经历自上次以来发生的迁移`heroku db:push`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:24:36.583

查看数据库中的`schema_migrations`表。这是 Rails 用来确定要运行哪些迁移的方法。它有一列包含 Rails 已应用于您的应用程序的每个迁移版本。例如，我有以下文件`db/migrate`：

*   `20110415064108_create_users.rb`

`20110415064108``schema_migrations`在我的表中列为一行。`db/migrate`自我上次运行以来存在的所有其他迁移文件也是如此`rake db:migrate`。

假设 taps *（我对此一无所知）*将该表全部推`schema_migraions`送到生产环境，您应该能够创建新的迁移并`rake db:migrate`在生产环境中毫无问题地运行它们*（只会应用那些新创建的迁移，因为它们的版本 #s 是生产`schema_migrations`表中唯一缺少的*） 。

# objective-c - 从网络解析

> ID：11809625
> 
> 赞同：1
> 
> 时间：2012-08-04T15:08:28.763
> 
> 标签：objective-c, parsing, web

任何人都可以帮助我，我想从一个网站解析，因为我是 Objective C 的新手，我不知道我应该怎么做，有没有我可以看到的示例代码来获得一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:46:33.687

试试这个：[http ://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

```
- (IBAction)grabURLInBackground:(id)sender
{
   NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setDelegate:self];
   [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];

   // Use when fetching binary data
   NSData *responseData = [request responseData];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
   NSError *error = [request error];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:25:23.157

您的问题非常不具体，因为该方法取决于您要解析哪种数据。

如果您只想用您网站的内容填充一个字符串，您可以使用：

```
NSString *foo = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.apple.com"] encoding:NSASCIIStringEncoding error:nil]; 
```

如果要解析 xml 或 json 文件，则可以使用 NSXMLParser 之类的类。

# php - 实例化 Zend_Session_Namespace 和 Config 的正确方法

> ID：11809627
> 
> 赞同：0
> 
> 时间：2012-08-04T15:08:54.823
> 
> 标签：php, zend-framework

我已经在一个新的网络应用程序上工作了一个月左右。我有一个开发人员在做很多后端的工作，而我做所有的前端编码和一些后端。该应用程序正在使用 Zend 框架。我现在正在检查他的代码，因为我发现他的很多选择都不是最优的。我注意到的一些关键事情是他在很多控制器中实例化了会话对象

```
$session     = new Zend_Session_Namespace('crSession'); 
```

这发生在几个不同控制器的各种方法中。这是好习惯吗？不应该只需要一次吗？有一个简单的用户认证系统，没有任何级别或任何东西。

其次，他也在很多地方抓取配置文件。有时像这样：

```
$config    = Zend_Registry::get('config'); 
```

或这个

```
$config  = new Zend_Config_Ini(APPLICATION_PATH.'/configs/application.ini', 'production'); 
```

这让我大吃一惊，因为如果我们想改变它或改变开发，我们必须改变 10 个文件。是否有任何场景需要在控制器和模型上的多个方法中发生上述实例化？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:38:55.653

我认为在控制器中使用`Zend_Session_Namespace`. 如果您的应用程序没有在引导程序中启动会话，那么可以通过创建一个新的`Zend_Session_Namespace`.

`Zend_Session`启动新的（不仅仅是调用）时会产生额外的开销`session_start()`，因此如果您的应用程序的每个页面都不需要活动会话，您可以考虑避免在引导程序或插件中全局启动会话. 在这种情况下，像他一样从控制器开始一个会话很好，所以我会说这不是坏习惯。

如果会话*在*引导级别启动，但需要将某些会话数据与其他数据隔离，或者因为它需要在某个时间到期或只能用于这么多跃点，那么`Zend_Session_Namespace`在个人中使用也可以控制器。

关于获取配置，我认为使用没有问题

```
$config = Zend_Registry::get('config'); 
```

在整个应用程序中。我猜在引导程序中配置文件被解析为一个对象或数组，然后放入注册表以进行全局访问。假设引导程序使用正确的配置（生产、开发）加载了配置，那么这可能是使您的配置可用于应用程序的任何其他部分的最简单方法。

但是，我同意您指出的第二种方法（使用完整路径和硬编码的生产值重新解析配置）可能不好。在我看来，所有这些实例都应该用前一段代码替换（除非有特定原因他需要生产配置中的特定值，而不管应用程序当前如何运行）。

# java - Java：可变变量访问

> ID：11809630
> 
> 赞同：2
> 
> 时间：2012-08-04T15:09:15.723
> 
> 标签：java, volatile, non-volatile

我对 volatile 变量如何有效地从“主”内存访问有点困惑。它与具有本地副本的变量（非易失性）有何不同？每当多个线程访问非易失变量和易失变量时，典型的工作流程是**什么**？我的意思是他们如何在幕后工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T15:14:20.270

假设您有一个可以被多个线程访问的变量。

线程 1 查看变量。因为查看共享内存比线程本地内存更昂贵，所以它会复制变量。（请注意，不会复制对象，只会复制它的引用。）

线程 2 查看相同的变量。它决定改变变量。但是线程1不知道！线程 1 仍在使用陈旧数据。这是一件非常糟糕的事情。通过 make 它`volatile`，每个线程在访问它时必须查看原始变量。他们不允许制作本地副本，因此不会过时。

# regex - 完全合格的域名验证

> ID：11809631
> 
> 赞同：35
> 
> 时间：2012-08-04T15:09:21.863
> 
> 标签：regex, bash, fqdn

是否有一种快速而肮脏的方法来验证是否输入了正确的 FQDN？请记住，没有 DNS 服务器或 Internet 连接，因此必须通过 regex/awk/sed 进行验证。

有任何想法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-11-25T22:34:57.930

```
(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{1,63}(?<!-)\.)+[a-zA-Z]{2,63}$) 
```

正则表达式总是充其量是此类事情的近似值，并且规则会随着时间而变化。上述正则表达式的编写考虑了以下内容，并且**特定于主机名**-

主机名由一系列用点连接的标签组成。每个标签的长度为 1 到 63 个字符，可能包含：

*   ASCII 字母 az（不区分大小写），
*   数字 0-9,
*   和连字符 ('-')。

此外：

*   标签不能以连字符开头或结尾 (RFC 952)
*   标签可以以数字开头 (RFC 1123)
*   包括点在内的 ascii 主机名的最大长度为 253 个字符（不包括尾随点）（[http://blogs.msdn.com/b/oldnewthing/archive/2012/04/12/10292868.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2012/04/12/10292868.aspx)）
*   主机名中不允许使用下划线（但在其他 DNS 类型中允许使用）

一些假设：

*   TLD 至少有 2 个字符且只有 az
*   我们希望至少比 TLD 高 1 级

结果：有效/无效

*   911.gov - 有效
*   911 - 无效（无 TLD）
*   a-.com - 无效
*   -a.com - 无效
*   a.com - 有效
*   a.66 - 无效
*   my_host.com - 无效（取消划线）
*   典型主机名33.whatever.co.uk - 有效

编辑：John Rix 提供了一个替代的正则表达式，使 TLD 的规范成为可选的：

```
(?=^.{1,253}$)(^(((?!-)[a-zA-Z0-9-]{1,63}(?<!-))|((?!-)[a-zA-Z0-9-]{1,63}(?<!-)\.)+[a-zA-Z]{2,63})$) 
```

*   911 - 有效
*   911.gov - 有效

编辑 2：有人要求在 js 中工作的版本。它在js中不起作用的原因是因为js不支持正则表达式。具体来说，代码`(?<!-)`- 指定前一个字符不能是连字符。

无论如何，在这里它被重写而没有向后看 - 有点难看但不多

```
(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9]\.)+[a-zA-Z]{2,63}$) 
```

您也可以对 John Rix 的版本进行类似的替换。

编辑3：如果你想允许尾随点 - 这在技术上是允许的：

```
(?=^.{4,253}\.?$)(^((?!-)[a-zA-Z0-9-]{1,63}(?<!-)\.)+[a-zA-Z]{2,63}\.?$) 
```

在@ChaimKut 指出它们并且我做了一些研究之前，我不熟悉尾随点语法

*   [http://dns-sd.org./TrailingDotsInDomainNames.html](http://dns-sd.org./TrailingDotsInDomainNames.html)
*   [https://jdebp.eu./FGA/web-fully-qualified-domain-name.html](https://jdebp.eu./FGA/web-fully-qualified-domain-name.html)

然而，在我使用的各种工具中，使用尾随点似乎会导致一些不可预测的结果，所以我建议谨慎行事。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-10-28T21:41:34.653

如今，国际化域名和数千个（！）新 TLD 变得更加困难。

简单的部分是您仍然可以在“。”上拆分组件。

您需要一份可注册 TLD 的列表。有一个网站：

[https://publicsuffix.org/list/effective_tld_names.dat](https://publicsuffix.org/list/effective_tld_names.dat)

您只需要检查 ICANN 认可的那些。请注意，可注册 TLD 可以包含多个组件，例如“co.uk”。

然后是 IDN 和 punycode。域现在是 Unicode。例如，

“xn--nnx388a”相当于“台湾”。顺便说一句，这两个都是有效的 TLD。

punycode转换代码见“http://golang.org/src/pkg/net/http/cookiejar/punycode.go”。

检查每个域组件的语法也有新的规则。[请参阅https://www.rfc-editor.org/rfc/rfc5890](https://www.rfc-editor.org/rfc/rfc5890)上的 RFC5890

组件可以是 A 标签（仅限 ASCII）或 Unicode。ASCII 标签要么遵循旧语法，要么以“xn--”开头，在这种情况下，它们是 Unicode 字符串的 punycode 版本。

Unicode 的规则非常复杂，在 RFC5890 中给出。这些规则旨在防止混合从左到右和从右到左的字符集。

抱歉，没有简单的答案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-04T20:30:19.563

这个正则表达式就是你想要的：

```
(?=^.{1,254}$)(^(?:(?!\d+\.)[a-zA-Z0-9_\-]{1,63}\.?)+(?:[a-zA-Z]{2,})$) 
```

它匹配您的示例域（groupa-zone1appserver.example.com 或 cod.eu 等...）

我将尝试解释：

`(?=^.{1,254}$)`匹配长度在 1 到 254 个字符之间的域名（可以以任何字符开头），如果我们假设 co.uk 是最小长度，它也可能是 5,254。

`(^`首发比赛

`(?:`定义匹配组

`(?!\d+\.)`域名不应由数字组成，因此不接受 1234.co.uk 或 abc.123.uk 而 1a.ko.uk 是。

`[a-zA-Z0-9_\-]`域名应该由只有 a-zA-Z0-9_- 的单词组成

`{1,63}`任何域级别的长度最大为 63 个字符，（可能是 2,63）

`+`和

`(?:[a-zA-Z]{2,})$)`域名的最后部分后面不能跟任何其他单词，并且必须由至少 2 个 char a-zA-Z 的单词组成

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-21T00:08:27.597

[我们使用](https://github.com/c-hive/guides/blob/79f7ddde35706f85b2844998a16d1e5ecaf1bb39/etc/regex.md#domains)这个正则表达式来验证在野外出现的域。它涵盖了我所知道的所有实际用例。欢迎新的。根据[我们的指南](https://github.com/c-hive/guides/blob/a173a9a5524cbcec480d021e053475b20e3169fc/etc/regex.md)，它避免了非捕获组和贪婪匹配。

`^(?!.*?_.*?)(?!(?:[\w]+?\.)?\-[\w\.\-]*?)(?![\w]+?\-\.(?:[\w\.\-]+?))(?=[\w])(?=[\w\.\-]*?\.+[\w\.\-]*?)(?![\w\.\-]{254})(?!(?:\.?[\w\-\.]*?[\w\-]{64,}\.)+?)[\w\.\-]+?(?<![\w\-\.]*?\.[\d]+?)(?<=[\w\-]{2,})(?<![\w\-]{25})$`

证明及解释：[https ://regex101.com/r/FLA9Bv/40](https://regex101.com/r/FLA9Bv/40)

验证域时有两种方法可供选择。

书本上的 FQDN 匹配（理论定义，实践中很少遇到）：

*   最长 253 个字符（根据[RFC-1035/3.1](https://www.rfc-editor.org/rfc/rfc1035)，[RFC-2181/11](https://www.rfc-editor.org/rfc/rfc2181#section-11)）
*   每个标签最多 63 个字符（根据[RFC-1035/3.1](https://www.rfc-editor.org/rfc/rfc1035)，[RFC-2181/11](https://www.rfc-editor.org/rfc/rfc2181#section-11)）
*   允许任何字符（根据[RFC-2181/11](https://www.rfc-editor.org/rfc/rfc2181#section-11)）
*   TLD 不能是全数字的（根据[RFC-3696/2](https://www.rfc-editor.org/rfc/rfc3696#section-2)）
*   FQDN 可以写成完整的形式，其中包括根区域（尾随点）

实用/保守的 FQDN 匹配（实用定义，在实践中预期和支持）：

*   与以下例外/补充相匹配的书籍
*   有效字符：`[a-zA-Z0-9.-]`
*   标签不能以连字符开头或结尾（根据[RFC-952](https://www.rfc-editor.org/rfc/rfc952)和[RFC-1123/2.1](https://www.rfc-editor.org/rfc/rfc1123#section-2.1)）
*   TLD 最小长度为 2 个字符，最大长度为 24 个字符，根据当前现有记录
*   不匹配尾随点

上面的正则表达式包含书本和实用规则。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-14T01:56:40.467

考虑#1：

请注意，由于 RFC-2181 中的宽松要求，DNS 标签可以包含几乎任何符号组合（但是，长度限制仍然存在）：

"*任何二进制字符串都可以用作任何资源记录的标签。DNS 协议的实现不得对可以使用的标签施加任何限制。特别是，DNS 服务器不得拒绝为区域提供服务，因为它包含标签某些 DNS 客户端程序可能无法接受。* ”（[https://www.rfc-editor.org/rfc/rfc2181#section-11](https://www.rfc-editor.org/rfc/rfc2181#section-11)）

考虑#2：

*“还有一条附加规则，本质上要求顶级域名不能是全数字的”*（[https://www.rfc-editor.org/rfc/rfc3696#section-2](https://www.rfc-editor.org/rfc/rfc3696#section-2)）

考虑到这两个因素，正确的正则表达式如下所示：

`/^(?!:\/\/)(?=.{1,255}$)((.{1,63}\.){1,127}(?![0-9]*$)[a-z0-9-]+\.?)$/i`

见演示@http [://regexr.com/3g5j0](http://regexr.com/3g5j0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-16T16:52:04.470

下面的表达式

```
(^((?=^.{4,253}$)(((http){0,1}|(http){0,1}|(ftp){0,1}|(ws){0,1})(s{0,1}):\/\/){0,1})((((?!-)[\pL0-9\-]{1,63})(?<!-)(\.)){1,})(((?!-)[a-z0-9\-]{1,63})(?<!-)((\/{0,1}[\pL\pN?=\-]*)+){1})$) 
```

将匹配

```
https://www.tes1t.com/lets/to?878932572
https://www.test.co.uk/lets/to?878932572
http://www.test.com/lets/to?878932572
http://www.test.co.uk/lets/to?878932572
ftp://www.test.com/lets/to?878932572
subdomain.test.com/lets/to?878932572
subdomain.test.com/lets/to?878932572
subdomain.subdomain.test.net/lets/to?878932572

sub-domain.test.net/lets/to?878932572
sub-domain.test.net/lets-go/to?878932572
www.test.net/lets/to?878932572
www.test-test.com/
www.test-test.com

subdomain.subdomainsubdomainsuèdomainsubdomainsubdomainsubdomainsubdomain.net/let2s/to?=878932572

www.test-test.co.uk
http://www.test-test-.com/test
www.test-teèst.co.uk/lets
www.test-test.co.uk/lets/
www.test-test.co.uk/lets/to?
test-test.co.uk/lets/to?
test-test.co.uk/lets/
test-test.co.uk/lets
test-test.co.uk
http://test.com/lets/to?878932572
https://test.com/lets/to?878932572
ftp://test.com/lets/to?878932572
ftps://test.com/lets/to?878932572
ws://test.com/lets/to?878932572aa
wss://test.com/lets/to?=878932572bar
test.com

subdomain.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.test.khbdomainsubdomainsubdomain.test.net/lets/to?87893257 
```

但不匹配：

```
www.-test-fail-.com
www.-test-fail.com
-test-fail.com
test-fail-.com

subdomain.subdomainsubdomainsubdomainsubdomainsubdomainsubdomainsubdomainsubdomainsubdomainsubdomainubdomainsubdomainsubdomain.test.net/lets/to?878932572

subdomain.subdomainsubdomainsubdcnvcnvcnofhfhghgfhvnhj-mainsubdomainsubdohhghghghfhgffgjh-gfhfdhfdghmainsubdocgvhngvnbnbmghghghaihgfjgfnfhfdghgsufghgghghhdfjgffsgfbdomainsubdomainsubdomainsubdomainsubdomainsubdomainsubdomain.test.net/lets/to?878932572

subdomain.test.test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test..test.khbdomainsubdomainsubdomain.test.net/lets/to?87893257 
```

# objective-c - 重新分配自动释放的对象

> ID：11809633
> 
> 赞同：0
> 
> 时间：2012-08-04T15:09:40.090
> 
> 标签：objective-c, ios, memory-management, autorelease

我正在构建一个具有三种不同大小的益智游戏。加载的图像取决于拼图的大小。为简单起见，我将它们称为小/中/大。当我加载视图时，我会告诉它拼图的大小，并调用 loadImages 方法。

我有一个这样设置的属性：

```
@property (nonatomic, retain) UIImage *solidSquare; 
```

所以在我的 loadImages 方法中，我有：

```
self.solidSquare = [[[UIImage alloc] initWithContentsOfFile:solidPath] autorelease]; 
```

solidPath 是根据拼图大小动态确定的。

现在，如果用户切换到不同的拼图大小，我会在游戏开始时再次调用 loadImages。我该如何处理这种内存情况？我觉得我需要在我的 loadImages 方法开始时调用它。

```
[self.solidSquare release]; 
```

我吗？我如何评估它是否是第一次加载，或者我什至需要这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T15:12:49.750

不，你没有（否则它会崩溃）。由于对象是自动释放的，您不必再担心它的引用——它不会使其指针悬空，也不会泄漏内存。此外，在使用属性时，属性设置器会确保自动释放旧对象。

总而言之，您可以安全地重新分配财产。

编辑：但您**必须**将其设置为`nil`-dealloc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:13:20.007

当您调用 autorelease 时，它​​会将对象添加到 autorelease 池中，因此您不需要显式释放它。如果您想控制何时释放对象，请不要调用 autorelease 并在您认为合适的地方释放对象。

# php - 通过 Ajax 加载 jCarousel 动态内容

> ID：11809634
> 
> 赞同：0
> 
> 时间：2012-08-04T15:09:52.937
> 
> 标签：php, javascript, jquery

我尝试制作一个滑块并从 php 文件中动态加载数据，我从数据库中获取图像，但我现在无法链接此图像...

这是我的 php 文件**ajax_php.php**

```
// Array indexes are 0-based, jCarousel positions are 1-based.
$first = max(0, intval($_GET['first']) - 1);
$last  = max($first + 1, intval($_GET['last']) - 1);
$length = $last - $first + 1;
// ---
require_once('../../includes/config.php');
error_reporting(0);
mysql_connect($conf['host'], $conf['user'], $conf['pass']);
mysql_select_db($conf['name']);
$getUser = "SELECT * FROM sitex WHERE img_i!='images/img_i.jpg' ORDER BY `sitex`.`likes` DESC LIMIT 35";
$res = mysql_query($getUser) or die();

$images = array();

while(($row =  mysql_fetch_assoc($res))) {
    $images[] = '/images/'.$row['img_i'].'';
}

$total    = count($images);
$selected = array_slice($images, $first, $length);

// ---

header('Content-Type: text/xml');

echo '<data>';

echo '  <total>' . $total . '</total>';
foreach ($selected as $img) {
    echo '<image>' . $img . '</image>';
} 
echo '</data>'; 
```

这是js

```
function mycarousel_itemLoadCallback(carousel, state)
{
    // Check if the requested items already exist
    if (carousel.has(carousel.first, carousel.last)) {
        return;
    }

    jQuery.get(
        'ajax_php.php',
        {
            first: carousel.first,
            last: carousel.last
        },
        function(xml) {
            mycarousel_itemAddCallback(carousel, carousel.first, carousel.last, xml);
        },
        'xml'
    );
};

function mycarousel_itemAddCallback(carousel, first, last, xml)
{

     // Set the size of the carousel
    carousel.size(parseInt(jQuery('total', xml).text()));

    jQuery('image', xml).each(function(i) {
        carousel.add(first + i, mycarousel_getItemHTML(jQuery(this).text()));

    });
};

function mycarousel_getItemHTML(url)

{ 
    return '<img src="' + url + '" width="75" height="75" alt="" />';
};

jQuery(document).ready(function() {
    jQuery('#futuredbc').jcarousel({

  easing: 'BounceEaseOut',
         itemVisibleOutCallback: {onAfterAnimation: function(carousel, item, i, state, evt) { carousel.remove(i); }},
        itemLoadCallback: mycarousel_itemLoadCallback
    });
}); 
```

这种方法支持我的结果就像

```
<img width="75" height="75" alt="" src="img.jpg"> 
```

但我需要制作一个链接图像，如

```
<a href="http://site.com/548"><img width="75" height="75" alt="" src="img.jpg"></a> 
```

所以 site.com/ **548**它是我的 ID，我可以从数据库中获取它，`'.$row['id'].'`但我不知道如何制作 js 和链接结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:31:16.493

最简单的方法（不添加函数来解析另一个 XML 标记 ( `<bla>`)）只是将 ID 添加到 的值`image xml tag`并使用 a `delimiter`，我们将`split`id 从 url 中取出。

添加`row ID`到数组中：

```
while(($row =  mysql_fetch_assoc($res))) {
    $images[] = array('id' => $row['id'] , 'src' => '/images/'.$row['img_i'].'');
} 
```

将其打印到 XML：

```
foreach ($selected as $img) {
    echo '<image>' . $img['src'] . '|||'.$img['id'].'</image>';
} 
```

然后，替换：

```
return '<img src="' + url + '" width="75" height="75" alt="" />'; 
```

和：

```
var tmp = url.split('|||');

return '<a href="www.site.com/'+ tmp[1] +'"><img src="' + tmp[0] + '" width="75" height="75" alt="" /></a>'; 
```

应该管用。否则，发表评论，我会修复它。

# regex - 正则表达式搜索和替换，包括括号中的其余行

> ID：11809643
> 
> 赞同：1
> 
> 时间：2012-08-04T15:10:54.187
> 
> 标签：regex, vim

我有一些带有很多行的python代码，如下所示：

```
print "some text" + variables + "more text and special characters .. etc" 
```

我想修改它以将打印后的所有内容都放在括号内，如下所示：

```
print ("some text" + variables + "more text and special characters .. etc") 
```

如何使用正则表达式在 vim 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:18:45.257

使用这个替代品：

```
%s/print \(.*$\)/print (\1) 
```

`\(.*$\)`匹配到行尾的所有内容，并使用转义括号将其捕获在一个组中。替换包括该组 using `\1`，并用括号括起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:19:03.730

```
:%s/print \(.*\)/print(\1)/c 
```

或者，如果您直观地选择多行

```
:'<,'>s/print \(.*\)/print(\1)/c 
```

`%`- 每行
`'<,'>`- 选定的行
`s`- 替换
`c`- 确认 - 在转换之前显示匹配的内容
`print \(.*\)`- 完全匹配 print 后跟空格，然后将`\(`and之间的所有内容分组`\)`
`print(\1)`- 替换为 print(<first match>)

Vim 有一些正则表达式的函数规则，你可以做`:help substitute`或`:help regex`看看它们是什么。

# facebook - facebook 访问令牌最佳实践

> ID：11809646
> 
> 赞同：1
> 
> 时间：2012-08-04T15:10:59.833
> 
> 标签：facebook, access-token

我正在使用 oauth 2 对 facebook 上的用户进行身份验证。我的应用程序已加载到画布页面中，并且我正在从 signed_request 获取用户访问令牌。

存储和使用用户访问令牌的最佳做法是什么？我想在各种 api 调用中使用 flash facebook 应用程序中的用户访问令牌。

我应该将它存储到数据库吗？并且在每个用户登录到应用程序后替换数据库中的用户访问令牌？（以防止它过期）

或者每当我需要访问令牌时，我应该以某种方式要求 Facebook 为我提供它吗？

非常感谢您提供有用信息的答案或链接。我想用它作为我的学士论文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:52:07.490

如果您只想在用户在您的应用程序中处于活动状态并且在有限的时间内使用用户访问令牌，那么您应该可以使用从 signed_request 获得的短期访问令牌；如果您有另一种从 Flash 应用程序访问它的方式，则不需要将其存储到您的数据库中。

如果您想使用它来代表用户行事，即使他没有积极使用您的应用程序，fe 在后台发布，那么您应该获得一个长期访问令牌，如此处所述，[https://developers。 facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)但这更适用于服务器端应用程序，并且由于您说您将使用闪存，我认为它可能与您无关（？）。

# ios - 表视图中的文件系统结构

> ID：11809647
> 
> 赞同：1
> 
> 时间：2012-08-04T15:11:07.543
> 
> 标签：ios, uitableview, animation

我是iOS新手，要温柔:)

我需要使用带有文件夹和文件的结构之类的文件系统填充表视图。结构深度是动态的。

目前，如果选择一个文件夹来显示文件夹内容，我会重用相同的表格视图并重新加载它的数据。

使用单个表格视图时，如何模仿“视图切换动画”之类的导航控制器？

在这种结构深度未知的情况下，单表视图方法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:47:41.790

[您可以在此处](https://bitbucket.org/nwoolls/filesystemview)查看用于浏览 iOS 文件系统的简单视图和视图控制器的源代码。此解决方案不重用 UITableView，而是将视图控制器的新实例推送到导航堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:53:52.800

正如 H2CO3 所说，您可能最好使用新的 VC，更简单的代码。

OTOH，如果你喜欢黑客，这里有几个想法可以尝试。

我不知道这是否可行，但你可能会很开心尝试。

第一个选择是尝试将自己推到导航控制器堆栈上。如果您更改数据并在相同的功能中进行推送，这可能会起作用，除非框架很智能。

第二种选择是将您的 tableView 包装在一个视图中，推送另一个 VC，其中只有一个视图，然后将您的 tableview 转移到新视图。您的原始 VC 仍然保留，因此没有理由不能保留表的委托和数据源。

它确实感觉很笨拙，我不想成为维护它的人，但这取决于你。

# python - 多文件处理

> ID：11809648
> 
> 赞同：0
> 
> 时间：2012-08-04T15:11:20.880
> 
> 标签：python, exception-handling, python-3.x, file-handling

我正在尝试从每个文件中获取信息并使用它来创建一个新文件。每个文件都有一行，由一系列数字组成。我希望一个文件的每一行与另一个文件的每一行对齐，然后将一个文件的一行中的每个数字与另一个文件中另一行的同一位置的另一个数字相遇。文件“Volume.txt”的每一行都移动了一个点（因此代码 k = j+1）。

****操作完成后，我不断收到一个汉字重复很多次。那么我哪里做错了？非常感谢！****

这是代码：

```
e = open('C:/Users/MC/Desktop/EODP.txt', 'r')
v = open('C:/Users/MC/Desktop/Z/Volume.txt', 'r')
n = open('C:/Users/MC/Desktop/vovere.txt', 'w')

m = 0 #Used later for letting me know that the first line in the new file completed

for i in range(0, 3256):  # there are 3257 lines per the two files EOPD and Volume
    l = []                # create a list to put data in during operation
    er = e.readline()     #
    es = er.split(', ')   # create a list the data from that line of file
    vr = v.readline()     #
    vs = vr.split(', ')   # same
    for  j in range(len(es)):
        k = j + 1         #  file Volume is shifted one point ahead
        try:
            if float(vs[k]) == 0.0:
                vovere = 0.0             # vovere is the name of the output for each point
            elif vs[k] == '' or vs[k] == ' ':
                vovere = 0.0
            else:
                vovere = float(es[j])/float(vs[k])
        except ValueError:         #kept getting this error: some points weren't numbers
            vovere = 0.0       
        except IndexError:         # Each file didn't always exactly equal in line length
            vovere = 0.0
        la = l.append(float(vovere)) #Creates the list for each new line in new file
    ls = str(la)
    l1 = ls.replace('[', '')    # Taking away extra notations so the new file is a little 
    l2 = l1.replace(']', '')    # more clean and can be put into other programs 
    n.write(l2)
    if m == 0:                 # From here on out is just for me, not necessary**
        print("The first line is done!")
        m += 1
    else:
        pass

e.close()                      #** Except these of course
print(e.closed)
print("Yes, EOPD.txt is closed")
v.close()
print(v.closed) 
print("Yes, Volume.txt is closed")
n.close()
print(n.closed) 
print("Yes, vovere.txt is now ready for further manipulation!!") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:13:14.763

如果我正确理解了这个问题，这应该可以解决问题：

```
from itertools import zip_longest # If this was python 2.x import izip_longest instead

if __name__ == '__main__':
    input1_lines = []
    input2_lines = []

    # Read all the input from first file
    with open('./input1.txt', 'r') as input1:
        input1_lines = input1.readlines()

    # Read all the input from first file
    with open('./input2.txt', 'r') as input2:
        input2_lines = input2.readlines()

    # Go through all the lines
    output_lines = []
    for line_number_index in range(len(input1_lines)):
    # For each line in each input file make a list of items and remove line breaks
        line1_items = str(input1_lines[line_number_index]).replace('\n', '').split(', ')
        line2_items = str(input2_lines[line_number_index]).replace('\n', '').split(', ')[1:]

        # Go through the item lists and merge them, fill empty spots with fillvalue if there are more items in one of the lists
        this_output_line = []
        for zip_entry in zip_longest(line1_items, line2_items, fillvalue='FILL_VALUE'):
            this_output_line.append(', '.join(zip_entry))
        output_lines.append(', '.join(this_output_line))

    # Write out the file
    with open('./output.txt', 'w') as output_file:
        for line in output_lines:
            output_file.write('%s\n' % line) 
```

如果在合并它们时其中一行中有更多项目，则将 FILL_VALUE 替换为您要插入的任何内容。

如果您需要第一项来自 input2.txt 而不是 input1.txt，`line1_items`请`line2_items`在`for zip_entry in zip_longest(line1_items, line2_items, fillvalue='FILL_VALUE'):`

input2 是每行的第一项将被忽略的地方。

我的测试数据：

输入1.txt：

```
0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
2, 22, 222, 2222 
```

输入2.txt：

```
z, a, b, c, d, e, f, g, h, i, j, k
z, a, aaa, aaaa 
```

结果：

```
0, a, 1, b, 2, c, 3, d, 4, e, 5, f, 6, g, 7, h, 8, i, 9, j, 10, k
2, a, 22, aaa, 222, aaaa, 2222, FILL_VALUE 
```

# coffeescript - 如何使用提供的尽可能多的参数？

> ID：11809649
> 
> 赞同：1
> 
> 时间：2012-08-04T15:11:33.110
> 
> 标签：coffeescript

我有一个函数，它接受任意数量的参数，并且必须以相同的顺序调用具有完全相同参数的另外两个函数。我试过这样：

```
broadcast = (socket, command, args...) ->
  socket.emit command, args
  socket.broadcast.to('room').emit command, args 
```

如果`args`只是一个论点，这可行，但如果有几个论点，我怎样才能使它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:21:01.107

我对咖啡脚本有点生疏，但不是吗

```
socket.broadcast.to('room').emit command, args... 
```

我想这是你想要的东西？[http://github.com/jashkenas/coffee-script/issues/1020](http://github.com/jashkenas/coffee-script/issues/1020)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:15:38.613

使 args 成为您的参数的数组。然后传递该数组。

# java - 使用 jdk 7 新的 fork join 框架的性能问题

> ID：11809652
> 
> 赞同：2
> 
> 时间：2012-08-04T15:11:58.513
> 
> 标签：java, multithreading, performance, parallel-processing, fork-join

我正在使用jdk 7的新forkjoin框架。我有一个任务，必须使用不同的参数执行多次。

此任务扩展`RecursiveTask`。有100多个任务要执行，可以同时执行。这些任务是独立的，因此不需要任何同步。因此，我首先创建了所需的任务并将它们传递给 forkjoin 线程池。但是应用程序变得比在没有任何并行性的情况下运行它要慢。

我的第一个想法是，我创建了很多线程。这就是为什么我试图回收线程以减少对象创建开销，但这对性能没有影响。使用 reinitialize() 方法回收 im。此外，通过回收，性能比在没有任何并行性的情况下运行它要慢。

任务中执行的操作并非微不足道，运行线程的持续时间从 5 到 150 毫秒。该应用程序在双核机器上运行，我使用 ubuntu 和 oracle jdk 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T11:14:01.857

CoopSoft 的 Edward Harned 发现用 Java 实现的 Fork/Join 设计存在许多问题。

特别是，“工作窃取”存在高度争用，并且在将工作分散到多个处理器时效率低下。递归分解也不是特别有效。

如果你的任务*不是*递归的——你说有 100 个，它们可以同时执行——那么使用 ThreadPoolExecutor 的更简单的方法可能更有效。

看：

*   [http://literatejava.com/threading/fork-join-parallelization-feature-or-problem/](http://literatejava.com/threading/fork-join-parallelization-feature-or-problem/)
*   [http://www.coopsoft.com/ar/CalamityArticle.html](http://www.coopsoft.com/ar/CalamityArticle.html)

# c - 闪烁问题，但不想使用 CLIPCHILDREN 样式

> ID：11809657
> 
> 赞同：0
> 
> 时间：2012-08-04T15:12:26.260
> 
> 标签：c, winapi, static, flicker, editbox

我有一个工具栏，上面有一些显示文本的静态子控件（例如：“查找”...）。此工具栏上有 2 个编辑控件。当我调整主窗口的大小时，工具栏的某些部分出现闪烁。所以我尝试使用`WS_CLIPCHILDREN`工具栏，它解决了flikcer问题。

但我不想使用`WS_CLIPCHILDREN`，原因如下：

我的工具栏有漂亮的背景（使用 REBARCLASSNAME）。所以我不想出现静态控件的（不好看的）背景。因此，在工具栏的 wndproc 中，我有以下代码：

```
if (WM_CTLCOLORSTATIC == message) {
    HWND hStatic = (HWND)lParam;

    if (......)
    {
        SetBkMode((HDC)wParam, TRANSPARENT);
        SelectBrush((HDC)wParam, GetStockBrush(NULL_BRUSH));
        return 0;
    }
} 
```

因此静态显示文本内容与工具栏具有相同的背景。如果我使用`WS_CLIPCHILDREN`，此效果将不再起作用。

我还尝试使用背景位图并将静态控件设置为`SS_BITMAP`，但该功能`SetText`不再起作用。

所以这是一个问题：

```
Is there anyway to specify a control that would not be affected by the painting of the parent.  
In my case, the specific control is edit control. But for the static control, I want the parent 
to take the control.

Or how to fix the flicker issue in another way? I tried to double buffer the toolrbar, but it 
doesn't work. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:54:03.160

不要使用空画笔，只需子类化静态控件并自己绘制背景（使用工具栏背景）。

# ruby - OS X Mountain Lion 上的 sqlite3 + Rails 问题

> ID：11809659
> 
> 赞同：0
> 
> 时间：2012-08-04T15:12:35.230
> 
> 标签：ruby, macos, rubygems

```
Master:demo shaunstanislaus$ rails server Could not find gem 'sqlite3
(>= 0) ruby' in the gems available on this machine. Run `bundle
install` to install missing gems. Master:demo shaunstanislaus$ sudo
bundle install Password: Fetching gem metadata from
https://rubygems.org/......... Using rake (0.9.2.2)  Using i18n
(0.6.0)  Using multi_json (1.3.6)  Using activesupport (3.2.6)  Using
builder (3.0.0)  Using activemodel (3.2.6)  Using erubis (2.7.0) 
Using journey (1.0.4)  Using rack (1.4.1)  Using rack-cache (1.2) 
Using rack-test (0.6.1)  Using hike (1.2.1)  Using tilt (1.3.3)  Using
sprockets (2.1.3)  Using actionpack (3.2.6)  Using mime-types (1.19) 
Using polyglot (0.3.3)  Using treetop (1.4.10)  Using mail (2.4.4) 
Using actionmailer (3.2.6)  Using arel (3.0.2)  Using tzinfo (0.3.33) 
Using activerecord (3.2.6)  Using activeresource (3.2.6)  Using
bundler (1.1.5)  Using coffee-script-source (1.3.3)  Using execjs
(1.4.0)  Using coffee-script (2.2.0)  Using rack-ssl (1.3.2)  Using
json (1.7.4)  Using rdoc (3.12)  Using thor (0.15.4)  Using railties
(3.2.6)  Using coffee-rails (3.2.2)  Using jquery-rails (2.0.2)  Using
rails (3.2.6)  Using sass (3.1.20)  Using sass-rails (3.2.5) 
Installing sqlite3 (1.3.6) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native
extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
extconf.rb  mkmf.rb can't find header files for ruby at
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in
/Library/Ruby/Gems/1.8/gems/sqlite3-1.3.6 for inspection. Results
logged to
/Library/Ruby/Gems/1.8/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out An
error occured while installing sqlite3 (1.3.6), and Bundler cannot
continue. Make sure that `gem install sqlite3 -v '1.3.6'` succeeds
before bundling. Master:demo shaunstanislaus$ 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T07:51:56.827

我会确保你安装了 OSX 开发者工具（带有 gcc 的 XCode 等等）。如果您确定您拥有这些工具，那么下一步就是遵循之前链接的问题（安装 ruby​​-devel 和 sqlite3-devel）。

# java - Should the DAL be implemented as Class Library or in an EJB?

> ID：11809660
> 
> 赞同：0
> 
> 时间：2012-08-04T15:12:35.273
> 
> 标签：java, ejb

I am currently undertaking a Java project and I was wondering is it best practice to create the DAL as a class library or in an EJB? I have seen a lot of articles regarding JPA, Hibernate etc but I like to have complete control over the statements that get executed so I would prefer to write my own using JDBC.

I come from a primarily C#/.NET background and this is my first full java project so any help would be greatly received.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:12:08.117

1) EJBs primarily makes sense for services. if you already have ejb services and want to interact with db using the container provided capabilities you can still use any library like jdbc, spring jdbc, hibernate, ibatis etc for db interation within the ejb.

2) If you are building a data access layer for your services to use, then i would keep it out of ejb. It could still be used by an ejb though.

2) If you want to have more control on the statements and not use orms like hibernate, i feel spring jdbc and ibatis are some choices. ibatis allows you to change your statements without affecting your DAOs or domain objects. I am sure other orms would provide this too, but i felt ibatis more helpful.

# pymongo - Pymongo 如何正确使用 $push 更新现有文档

> ID：11809663
> 
> 赞同：7
> 
> 时间：2012-08-04T15:13:21.373
> 
> 标签：pymongo

我做错了什么或者我不明白 $push （可能不明白）。无论如何，我有以下文件：

```
{
  "_id" : ObjectId("501c83051d41c8753e000000"), 
  "node" : "denver", 
  "enc" : {
    "environment" : "production",
    "classes" : {
      "denver" : ""
    }
  }, 
  "inherit" : "default"
} 
```

我正在尝试制作文件

```
{
  "_id" : ObjectId("501c83051d41c8753e000000"), 
  "node" : "denver", 
  "enc" : {
    "environment" : "production", 
    "classes" : {
      "denver" : "",
      "boulder" : ""
    }
  }, 
  "inherit" : "default"
} 
```

这是我的更新声明的样子：

```
col.update(
  {
    'node' : 'denver'
  }, 
  {
    '$push': {
      'enc.classes' : {
        'boulder': ''
      }
    }
  },
True) 
```

我没有收到错误，但文档永远不会更新。如果我将 $push 更改为 $set，则 denver 将替换为 boulder。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-19T14:51:08.220

[`$push`](http://docs.mongodb.org/manual/reference/operator/push/)在这种情况下不起作用，因为您试图在对象上使用数组函数。

要使用`$push`，您需要将数据结构更改为以下内容：

```
{
    "_id" : ObjectId("501c83051d41c8753e000000"), 
    "node" : "denver", 
    "enc" : {
        "environment" : "production", 
        "classes" : [
            "denver"
        ]
    }, 
    "inherit" : "default"
} 
```

那么您的查询将是：

```
col.update(
    {
        'node' : 'denver'
    },
    {
        '$push': {
            'enc.classes' : 'boulder'
        }
    },
    True
) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T14:56:17.617

此查询有效。

```
db.foo.update({"node": "denver"}, {"$set": {"enc.classes.boulder": ""}} 
```

# android - Android API 日历

> ID：11809664
> 
> 赞同：0
> 
> 时间：2012-08-04T15:13:22.487
> 
> 标签：android, api, calendar

我正在使用 android 4.1 API 创建一个 android 应用程序，但我遇到了问题。

我的代码编译似乎有问题，虽然它没有给我任何错误，但当我尝试在 Android 手机上运行它时它确实崩溃了。

```
package com.example.meetingmute;
import android.content.Context;
import android.net.Uri;
import android.os.Bundle;
import android.provider.CalendarContract;
import android.provider.CalendarContract.Calendars;
import android.provider.CalendarContract.Events;
import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.database.Cursor;
import android.view.Menu;
import android.widget.Button;
import android.widget.TextView;
import android.view.View;
import android.view.View.OnClickListener;
import android.media.AudioManager;

public class MainActivity extends Activity {

Button button;
TextView text;
boolean ringeronoff;
AudioManager mAudioManager;
AlertDialog ad;

@Override
public void onCreate(Bundle savedInstanceState) {
    Context context = getApplicationContext();
    ContentResolver contentResolver =       getApplicationContext().getContentResolver();

    final Cursor cursor =  contentResolver.query(Uri.parse("content://calendar/calendars"),
            (new String[] { "_id", "displayName", "selected" }), null, null, null);

    while (cursor.moveToNext()) {

        final String _id = cursor.getString(0);
        final String displayName = cursor.getString(1);
        final Boolean selected = !cursor.getString(2).equals("0");

        System.out.println("Id: " + _id + " Display Name: " + displayName + " Selected: " + selected);
    }
    ad = new AlertDialog.Builder(this).create();
    read();

    Cursor cur = null;
    ContentResolver cr = getContentResolver();
    ContentValues values = new ContentValues();
    Uri uri = cr.insert(Events.CONTENT_URI, values); 
```

//提交查询并返回一个 Cursor 对象。cur = cr.query(uri, EVENT_PROJECTION, selection, selectionArgs, null);

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button = (Button) findViewById(R.id.button1);
    text = (TextView) findViewById(R.id.textView1);
    mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if(ringeronoff == true){
                text.setText("Ringer is On");
                mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                ringeronoff = false;
            }
            else{
                text.setText("Ringer is Off");
                mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                ringeronoff = true;
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:49:51.233

对于初学者来说，这是错误的，并且不适用于 Android 4.1：

```
final Cursor cursor =  contentResolver.query(Uri.parse("content://calendar/calendars"),
        (new String[] { "_id", "displayName", "selected" }), null, null, null); 
```

简而言之，如果您打算使用日历 API，您应该使用`CalendarContract`和 子类，并避免像这样将常量硬编码到您的代码中。

例如，您正在使用的 URI - `content://calendar/calendars`- 包含权限`calendar`- 它应该是`com.android.calendar`- 甚至更好，只需从 API传递[Uri 。](http://developer.android.com/reference/android/provider/CalendarContract.Calendars.html#CONTENT_URI)

# javascript - 从javascript调用android本机java代码

> ID：11809665
> 
> 赞同：0
> 
> 时间：2012-08-04T15:13:23.770
> 
> 标签：javascript, android, webserver

我想开发一个应用程序来通过 wifi 在 android 设备和 PC 之间传输文件。

我有一个网络服务器和一个服务设置，当一个按钮被点击时，网络服务器服务被调用，它通过 http 从 assets 文件夹中提供一个 html 页面。这个页面可以通过 wifi 访问，通过输入电话的 ip 地址：端口号。

但是为了对应用程序做一些有用的事情，我一直在寻找一种从 html 页面中的 javascript 函数调用本机 android 代码的方法。

我寻找的大多数示例都涉及从 webview 调用 android 代码。我想知道是否有一种方法可以在没有 web 视图/虚拟 web 视图的情况下从 javascript 调用它。

任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:01:23.290

> 我想知道是否有一种方法可以在没有 web 视图/虚拟 web 视图的情况下从 javascript 调用它。

不，出于明显的安全和隐私原因。

# regex - 在linux中使用正则表达式重命名文件

> ID：11809666
> 
> 赞同：78
> 
> 时间：2012-08-04T15:13:29.073
> 
> 标签：regex, terminal, rename

我有一组名为：

```
Friends - 6x03 - Tow Ross' Denial.srt
Friends - 6x20 - Tow Mac and C.H.E.E.S.E..srt
Friends - 6x05 - Tow Joey's Porshe.srt 
```

我想像下面这样重命名它们

```
S06E03.srt
S06E20.srt
S06E05.srt 
```

我应该怎么做才能在 linux 终端中完成工作？我已经安装了重命名，但是使用以下命令会出错：

```
rename -n 's/(\w+) - (\d{1})x(\d{2})*$/S0$2E$3\.srt/' *.srt 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-04T15:31:58.623

您忘记了星号前面的一个点：

```
rename -n 's/(\w+) - (\d{1})x(\d{2}).*$/S0$2E$3\.srt/' *.srt 
```

在 OpenSUSE、RedHat、Gentoo 上，您必须使用 Perl 版本的`rename`. [这个答案](https://stackoverflow.com/a/32862278/1392034)显示了如何获得它。在 Arch 上，这个包被称为`perl-rename`.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2018-01-16T11:54:19.320

真的很酷 lil diddy。查找 + perl + xargs + mv

`xargs -n2`可以每行打印两个参数。当与 Perl 结合使用时`print $_`（首先打印 $STDIN），它是一个强大的重命名工具。

```
find . -type f | perl -pe 'print $_; s/input/output/' | xargs -d "\n" -n2 mv 
```

`perl -pe 'print $_; s/OldName/NewName/' | xargs -n2`最终的结果是：

```
OldName.ext    NewName.ext
OldName.ext    NewName.ext
OldName.ext    NewName.ext
OldName.ext    NewName.ext 
```

我的系统上没有`rename`现成的 Perl。

* * *

它是如何工作的？

1.  `find . -type f`输出文件路径（或文件名......您可以在这里控制正则表达式处理的内容！）
2.  `-p`打印正则表达式处理的文件路径，`-e`执行内联脚本
3.  `print $_`首先打印原始文件名（独立于`-p`）
4.  `-d "\n"`通过换行符而不是默认空格字符剪切输入
5.  `-n2`每行打印两个元素
6.  `mv`获取上一行的输入

* * *

我的首选方法，尽管更先进。

假设我想将所有“.txt”文件重命名为“.md”文件：

```
find . -type f -printf '%P\0' | perl -0 -l0 -pe 'print $_; s/(.*)\.txt/$1\.md/' | xargs -0 -n 2 mv 
```

这里的神奇之处在于管道中的每个进程都支持用作分隔符的空字节 (0x00)，而不是空格或换行符。上述方法使用换行符作为分隔符。并不是说我试图在`find .`不使用子流程的情况下轻松支持。在这里要小心（`find`在运行正则表达式匹配或更糟糕的破坏性命令之前，您可能需要检查输出`mv`）。

它是如何工作的（删节以仅包括上面的更改）

1.  In `find`:`-printf '%P\0'`仅打印没有路径的文件名，后跟空字节。根据您的用例进行调整 - 无论是匹配文件名还是整个路径。
2.  in `perl`and `xargs`: `-0`stdin 分隔符是空字节（而不是空格）
3.  In `perl`: `-l0`stdout 分隔符是空字节（八进制 000）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-02-02T00:52:31.377

***编辑：****找到了一种更好的方法来列出文件而不使用`IFS`并且`ls`仍然`sh`符合要求。*

我会为此做一个shell脚本：

```
#!/bin/sh
for file in *.srt; do
  if [ -e "$file" ]; then
    newname=`echo "$file" | sed 's/^.*\([0-9]\+\)x\([0-9]\+\).*$/S0\1E\2.srt/'`
    mv "$file" "$newname"
  fi
done 
```

* * *

*以前的脚本：*

```
#!/bin/sh
IFS='
'
for file in `ls -1 *.srt`; do
  newname=`echo "$file" | sed 's/^.*\([0-9]\+\)x\([0-9]\+\).*$/S0\1E\2.srt/'`
  mv "$file" "$newname"
done 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-05-18T11:17:01.920

并非每个发行版都`rename`提供支持上述示例中使用的正则表达式的实用程序 - RedHat、Gentoo 及其衍生产品等。

尝试使用的替代方法是`perl-rename`和`mmv`。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-12-02T11:34:29.643

## 使用[mmv](http://manpages.ubuntu.com/manpages/precise/man1/mmv.1.html)（大规模移动？）

它简单但有用：`*`通配符匹配任何字符串（不带斜线）并`?`匹配要匹配的字符串中的任何字符。在替换字符串中使用`#X`以引用第 X 个通配符匹配。

在你的情况下：

```
mmv 'Friends - 6x?? - Tow *.srt' 'S06E#1#2.srt' 
```

这里表示由（匹配＃1和＃2）`#1#2`捕获的两个数字。 因此进行了以下替换：`??`

```
Friends - 6x?? - Tow *           .srt    matches
Friends - 6x03 - Tow Ross' Denial.srt    which is replaced by
            ↓↓
        S06E03.srt 
```

`mmv`还提供`[`和匹配。`]``;`

您不仅可以批量*重命名*，还可以批量*移动、复制、追加*和*链接*文件。

有关更多信息，请参见[手册页](http://manpages.ubuntu.com/manpages/precise/man1/mmv.1.html)！

就个人而言，我用它来填充数字，以便在按字典顺序排序时以所需的顺序显示编号的文件（例如，1 出现在 10 之前）：`file_?.ext`→`file_0#1.ext`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-10-09T14:07:53.140

如果您的 linux 不提供*rename*，您还可以使用以下内容：

```
find . -type f -name "Friends*" -execdir bash -c 'mv "$1" "${1/\w+\s*-\s*(\d)x(\d+).*$/S0\1E\2.srt}"' _ {} \; 
```

我经常使用这个片段在我的控制台中使用正则表达式执行替换。

我对 shell 的东西不是很好，但据我了解这段代码，它的解释是：你的*find*的搜索结果将被传递给你的搜索结果的 bash-command ( *bash -c* )作为源文件在*$1内。*接下来的目标是子shell中替换的结果，其中*$1**的*内容（这里：参数替换*{ **1** //find/replace}*中的 1 ）也将是您的搜索结果。*{}*将其传递给*-execdir的内容*

更好的解释将不胜感激:)

请注意：我只复制粘贴了您的正则表达式；请先使用示例文件对其进行测试。根据您的系统，您可能需要将 \d 和 \w 更改为 [[:digit:]] 或 [[:alpha:]] 等字符类。但是， \1 应该适用于组。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-12-07T21:27:18.330

我认为最简单和通用的方法是使用`for loop` `sed`and `mv`。首先，您可以在管道中检查您的正则表达式替换：

```
ls *.srt | sed -E 's/.* ([0-9])x([0-9]{2}) .*(\.srt)/S\1E\2\3/g' 
```

如果它打印正确的替换，只需将其放入`for loop`with`mv`

```
for i in $(ls *.srt); do 
    mv $i $(echo $i | sed -E 's/.* ([0-9])x([0-9]{2}) .*(\.srt)/S\1E\2\3/g') 
    done 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-07T08:43:06.457

您可以使用[rnm](https://github.com/neurobin/rnm)：

```
rnm -rs '/\w+\s*-\s*(\d)x(\d+).*$/S0\1E\2.srt/' *.srt 
```

解释：

1.  `-rs`: 替换表单的字符串`/search_regex/replace_part/modifier`
2.  `(\d)`和 `(\d+)`in`(\d)x(\d+)`是两个捕获的组（`\1`和`\2`分别）。

更多例子[在这里](https://neurobin.org/docs/unix/rnm/)。

# javascript - 检查 JavaScript 中的日期时间是否相等时的错误结果

> ID：11809667
> 
> 赞同：0
> 
> 时间：2012-08-04T15:13:38.430
> 
> 标签：javascript, datetime

在我的 JavaScript 代码中，我必须使用带有日期时间值的变量（x 和 y）。以下所有语句都返回 false：

*   x < y -> 假
*   x > y -> 假
*   x == y -> 假
*   x === y -> 假

当我调试代码时，x 和 y 具有相同的值 'Sat Jan 1 12:00:00 UTC+0100 2011' 和相同的类型。

我正在使用 IE9。

是否有不同的方法来检查两个日期时间值是否相等？

**更新（代码）** - 我试图提取一些相关部分，整个项目非常大：

```
var data;

//Dates are loaded from a webservice and returned as strings; they are parsed with the following function

data = parseD(getDataFromService());

function parseD (data) {
    for (var i = 0; i < data.length; i++) {
        var d = data[i];
        for (var key in d) {
            if (d[key] && d[key].toString().substring(0, 6) === "/Date\(")
                d[key] = new Date(parseInt(d[key].toString().substr(6)));
        }
    }
    return data;
};

function getCssForCell(row, columnID, dataContext, value) {
            var css = "";
            if (columnID === "VF" && value) {
                if (row > 0) {
                    if (data[row].VF < addDays(data[row - 1].VF, 2)) {
                        css = "error_cell";
                    }
                }
            }
            if (columnID === "VU" || columnID === "VF") {
                if (dataContext.VF && dataContext.VU) {
                    if (dataContext.VU <= dataContext.VF) {
                        css = "error_cell";
                    }
                }
            }
            if (columnID === "Rate" && row < (strict_mode ? data.length - 1 : data.length - 2)) { //value for Rate must be assigned
                if (value === undefined || value === null) {
                    css = "error_cell";
                }
            }
            if (columnID === "VF" && row < (strict_mode ? data.length - 1 : data.length - 2)) {
                if (value === undefined || value === null) {
                    css = "error_cell";
                }
            }

            if (columnID === "Rate" && value < 0) {
                css = "error_cell";
            }

            //PROBLEM IN NEXT LINE
            if (columnID === "VU" && row < data.length - 1 && dataContext.VU && data[row + 1] && addDays(dataContext.VU, 1) != data[row + 1].VF ) {
                css = "error_cell";
            }

            return css;
        }

function addDays(date, days) {
    if (date) {
        var result = new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours());
        result.setDate(result.getDate() + days);
        return result;
    }
    return date;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:31:12.527

您不应该比较 Date 对象实例，而是使用`.getTime()`方法比较它们的值：

```
x.getTime() < y.getTime();
x.getTime() > y.getTime();
x.getTime() == y.getTime();
x.getTime() === y.getTime(); 
```

`.getTime()`根据世界时返回指定日期的时间对应的数值，该值是自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数，也相当于`.valueOf()`method.

# python - 防止 RAM 中的纯文本密码 (Python)

> ID：11809673
> 
> 赞同：3
> 
> 时间：2012-08-04T15:14:35.790
> 
> 标签：python, security, encryption

我实际上编写了一个 Python 模块来访问 KeePass/KeePassX 数据库。我的问题是数据库的密码以纯文本形式保存在我的数据库对象中：

```
def __init__(self, filepath=None, masterkey=None, read_only=False,
             new = False):
    """ Initialize a new or an existing database.

    If a 'filepath' and a 'masterkey' is passed 'load' will try to open
    a database. If 'True' is passed to 'read_only' the database will open
    read-only. It's also possible to create a new one, just pass 'True' to
    new. This will be ignored if a filepath and a masterkey is given this
    will be ignored.

    """

    self.groups = []
    self.read_only = read_only
    self.filepath = filepath
    self.masterkey = masterkey # I mean this 
```

我不知道如何避免这种情况。我唯一的想法是存储使用随机生成的密钥加密的密码（就像 KeePassX 所做的那样），但是 Python 不允许私有成员是否存在问题？我的意思是可以从正在运行的程序外部访问随机生成的密钥吗？或者是从 RAM 中转储程序内存的唯一可能性？如果后者的答案是“是”，那么应该增加安全性还是我被误导了？

无论哪种方式，是否存在 Python 将字符串“抛出”到整个 RAM 以使密码始终有可能以纯文本形式存储的问题？

我知道很多问题，但这是该项目中最关键的安全点之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T15:21:24.437

Python 只能从解释器本身内省；因此，如果您担心读取密码的任何内容，那么某些东西要么必须获得对解释器的访问权限，要么必须以某种方式转储进程内存。

除非您运行一些打开漏洞的 python 代码，否则解释器不会被破坏。基本上，只要您不使用[`pickle`模块](http://docs.python.org/library/pickle.html)（可以将[任意 python 代码加载到解释器中](http://www.zopatista.com/plone/2007/11/09/one-cookie-please/)）或调用`eval`或`exec`任意代码之类的东西，您就应该是安全的。

当然，您无法避免必须将主密钥存储在内存中，即使只是很短的时间。您可以限制存储的主密钥，直到您需要它，然后通过分配`None`给它或其他东西来擦除变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T15:50:07.557

如果您的操作系统具有进程内存保护（所有现代操作系统都有此功能），那么在同一进程中运行的任何代码都可以访问密码。*除非您以操作系统特定的方式授予*对内存页面的特定访问权限，否则其他进程将无法访问数据：这是 RPG 完成的一种方法。内核可以访问您的内存，从而访问密码，但是如果攻击向量通过该路径，您就会遇到一些严重的问题。

如果您的操作系统具有虚拟内存，则包含密码的页面可能会写入 root 用户可以访问的文件。因此，在 root 中运行的进程可以从那里读取密码。但是，如果您有一个以 root 身份运行的恶意进程，则需要担心更严重的问题。

对象中的私有成员是一种语言级别的保护，仅在编译或解释代码时强制执行。它对数据的 RAM 访问没有影响。

因此，总而言之，密码在运行过程中是安全的。您只需要关心密码是否保存到您控制的文件中或以某种方式写入您控制的流中。

# jquery - 从内部链接中删除表格行

> ID：11809674
> 
> 赞同：1
> 
> 时间：2012-08-04T15:14:38.053
> 
> 标签：jquery

我需要帮助使用 jQuery 删除选定的表行。

```
<tr data-file='+file_id1+'>
    <td width="40%">'+file_name1+'</td>
    <td>'+upload_date1+'</td>
    <td><a href="sym.php?doc_id='+file_id1+'" class="view2_fl">VIEW FILE</a> | <a href="javascript:void(0);" class="del2_fl">DELETE</a></td>
</tr> 
```

当我单击 DELETE 链接时，文件会通过 ajax 从数据库中删除，如下所示：-

```
$('.addfile_popup').on('click', '.del2_fl', function(){
var job_id=$(this).data('job');
var file="file_id="+$(this).data('file')+"&job_id="+job_id;
$.ajax({
    type:"POST",
    url:"admin_includes/del_fl.php",
    data:file,

    success:function(html){
        if(html=="2")
        {
            //delete row

        }
    }
})//end ajax
}); 
```

我尝试删除此特定行给我带来了问题，因为我似乎无法使用“this”找到它。

感谢任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:18:42.950

默认情况下，在`success`处理程序中，`this`绑定到`$.ajaxSettings`您传递给`$.ajax()`.

您可以指定`context`绑定`this`到您选择的对象的选项，包括`this`在调用者中绑定的值。从那里，您只需要[最接近（）](http://api.jquery.com/closest/)来找到要删除的表格行：

```
$.ajax({
    type: "POST",
    url: "admin_includes/del_fl.php",
    data: file,
    context: this,  // Relay 'this' to 'success' handler.
    success: function(html) {
        if (html == "2") {
            // Here, 'this' is the same as in the caller of '$.ajax()'.
            $(this).closest("tr").remove();
        }
    }
}); 
```

# c# - C# 中的 Base 64 编码

> ID：11809675
> 
> 赞同：2
> 
> 时间：2012-08-04T15:15:03.950
> 
> 标签：c#, encoding

我继承了一些 C# 代码。此代码需要将图片上传到 Web 服务。此代码将图片的字节保存到`byte[]`被调用的`ImageBytes`. 为了确保最大的可移植性，我想首先将其编码`ImageBytes`为 base 64 编码字符串。我相信下面的代码正在这样做，但是，我不确定。有人可以验证我的假设是否正确吗？

```
StringBuilder sb = new StringBuilder();
this.ImageBytes.ToList<byte>().ForEach(x => sb.AppendFormat("{0}.", Convert.ToUInt32(x))); 
```

此代码是否将 my`byte[]`转换为 base 64 编码字符串？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T15:17:39.267

使用方法`System.Convert.ToBase64String()`，`System.Convert.FromBase64String()` 例如

```
public static string EncodeTo64(string toEncode)
{
   byte[] toEncodeAsBytes = Encoding.ASCII.GetBytes(toEncode);
   return Convert.ToBase64String(toEncodeAsBytes);
}

public static string DecodeFrom64(string encodedData)
{
  byte[] encodedDataAsBytes = Convert.FromBase64String(encodedData);
  return Encoding.ASCII.GetString(encodedDataAsBytes);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T15:17:23.443

使用`Convert.ToBase64String()`方法。它接受一个字节数组作为参数并返回转换后的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T15:18:47.547

不，这只是将其转换为整数列表。

使用[Convert.ToBase64String()](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)。假设`ImageBytes`是`byte[]`：

```
var base64Output = Convert.ToBase64String(ImageBytes); 
```

# symfony - 如何从 symfony2 中删除实体

> ID：11809685
> 
> 赞同：67
> 
> 时间：2012-08-04T15:16:25.190
> 
> 标签：symfony, doctrine

我的第一个 symfony2 项目是存储在数据库中的来宾列表（受邀参加活动）。我有

*   用所有变量（id、姓名、地址、电话号码等）创建了实体类Guest
*   在 mysql 数据库中创建了模式
*   为树枝模板“添加客人”创建了一条路线
*   创建了一个表单类型

最后是控制器中的“createGuest”方法，一切正常。

我无法从数据库中删除来宾。我已经阅读了网络上的所有教程，包括官方的 Symfony2 书；它所说的只是：

**删除对象**

*删除对象非常相似，但需要调用实体管理器的 remove() 方法：*

```
$em->remove($product);
$em->flush(); 
```

它并没有说明如何将控制器 deleteAction($id) 与 twig 模板连接起来（甚至“更新对象”部分也缺少文档）。我想要做的是使用 viewGuests 操作和 viewGuests 树枝模板列出所有来宾，每行旁边都有一个删除图标，您应该单击它来删除一个条目。很简单，但我找不到任何文档，也不知道从哪里开始。

```
public function deleteGuestAction($id)
    {
        $em = $this->getDoctrine()->getEntityManager();
        $guest = $em->getRepository('GuestBundle:Guest')->find($id);

        if (!$guest) {
            throw $this->createNotFoundException('No guest found for id '.$id);
        }

        $em->remove($guest);
        $em->flush();

        return $this->redirect($this->generateUrl('GuestBundle:Page:viewGuests.html.twig'));
    } 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-04T16:01:35.643

Symfony 很聪明，并且知道如何自己制作`find()`：

```
public function deleteGuestAction(Guest $guest)
{
    if (!$guest) {
        throw $this->createNotFoundException('No guest found');
    }

    $em = $this->getDoctrine()->getEntityManager();
    $em->remove($guest);
    $em->flush();

    return $this->redirect($this->generateUrl('GuestBundle:Page:viewGuests.html.twig'));
} 
```

要在控制器中发送 id，请使用`{{ path('your_route', {'id': guest.id}) }}`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-15T08:27:50.437

从...中删除，其中 id=...；

```
protected function templateRemove($id){
    $em = $this->getDoctrine()->getManager();
    $entity = $em->getRepository('XXXBundle:Templates')->findOneBy(array('id' => $id));

    if ($entity != null){
        $em->remove($entity);
        $em->flush();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T17:50:48.337

据我了解，您很难在模板中添加什么。

我将展示一个示例：

```
<ul>
    {% for guest in guests %}
    <li>{{ guest.name }} <a href="{{ path('your_delete_route_name',{'id': guest.id}) }}">[[DELETE]]</a></li>
    {% endfor %}
</ul> 
```

现在发生的情况是它遍历来宾中的每个对象（如果您的对象集合以其他方式命名，则必须重命名它！），显示名称并放置正确的链接。路线名称可能不同。

# pca - scikit-learning 如何对 libsvm 格式的稀疏数据执行 PCA？

> ID：11809686
> 
> 赞同：8
> 
> 时间：2012-08-04T15:16:32.927
> 
> 标签：pca, scikit-learn

我正在使用 scikit-learning 做一些降维任务。我的训练/测试数据采用 libsvm 格式。它是一个有 50 万列的大型稀疏矩阵。

我使用 load_svmlight_file 函数加载数据，并通过使用 SparsePCA，scikit-learning 抛出输入数据错误的异常。

如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T10:54:36.547

稀疏 PCA 是一种用于在密集数据上找到稀疏分解（组件具有稀疏约束）的算法。

~~如果您想对稀疏数据执行 vanilla PCA，您应该使用`sklearn.decomposition.RandomizedPCA`它实现了一种可扩展的近似方法，该方法适用于稀疏和密集数据。~~

~~IIRC`sklearn.decomposition.PCA`目前仅适用于密集数据。例如，将来可以通过将稀疏数据矩阵上的 SVD 计算委托给 arpack 来添加对稀疏数据的支持。~~

**编辑**：如注释中所述，`RandomizedPCA`不推荐使用稀疏输入：相反，您应该使用`sklearn.decomposition.TruncatedSVD`它来精确地 `RandomizedPCA`执行过去对稀疏数据所做的操作，但首先不应将其称为 PCA。

澄清一下：PCA 在数学上定义为使数据居中（去除每个特征的平均值），然后对居中的数据应用截断的 SVD。

由于将数据居中会破坏稀疏性并强制使用通常不再适合内存的密集表示，因此通常直接对稀疏数据进行截断 SVD（不居中）。这类似于 PCA，但并不完全相同。这在 scikit-learn 中实现为`sklearn.decomposition.TruncatedSVD`.

**编辑（2019 年 3 月）**：正在进行的工作是在具有隐式居中的稀疏数据上实施 PCA：[https ://github.com/scikit-learn/scikit-learn/pull/12841](https://github.com/scikit-learn/scikit-learn/pull/12841)

# android - 来自数据库的带有 arrayAdapter 的 ListView

> ID：11809687
> 
> 赞同：0
> 
> 时间：2012-08-04T15:16:36.887
> 
> 标签：android, android-arrayadapter

我有 3 个活动：表单活动、数据库助手和主活动。Main Activity 应该显示存储在数据库中的“compNameAdd”的列表视图。当我尝试通过 setAdapter 填充列表视图时

```
 DataBase dbc = new DataBase(NituachActivity.this);
    dbc.open();

    String[] cs = new String[] { DataBase.RAW_COMPNAMEADD };

    Log.d(TAG, cs.toString());

     blv.setAdapter(new ArrayAdapter<String>(this,
     android.R.layout.simple_list_item_1, cs));

    dbc.close(); 
```

我得到了列的名称，而不是列中的值。问题是什么？

数据库助手：

```
package com.nituach.nituach;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBase {

public static final String RAW_ID = "_id";
public static final String RAW_COMPNAMEADD = "compNameAdd";
public static final String RAW_CASH = "etCash";
public static final String RAW_CUSTOMERS = "castumers";
public static final String RAW_STOCK = "stock";
public static final String RAW_FIXED_ASSETS = "fixedAssets";
public static final String RAW_ACCUMULTED_DEPRECIATION = "accumultedDepreciation";
public static final String RAW_BONDS = "bonds";
public static final String RAW_LOANS = "loans";
public static final String RAW_EQUITY = "equity";

public static final String RAW_COMPNAME_ID = "_id";
public static final String RAW_COMPNAME = "compName";

private static final String DATABASE_NAME = "ProsseDatBase";
static final String DATABASE_TABLE = "data";
static final String DATABASE_TABLE_SETTINGS = "compNameConnector";

private static final int DATABASE_VERSION = 1;

private ProsseDatBase thdb;
private static Context tcontext;
private SQLiteDatabase tdb;

private static class ProsseDatBase extends SQLiteOpenHelper {

    public ProsseDatBase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String pdb = "CREATE TABLE  " + DATABASE_TABLE + " ( " + RAW_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
RAW_COMPNAMEADD
                + " TEXT, " + RAW_CASH + " TEXT, " + RAW_CUSTOMERS
                + " TEXT, " + RAW_STOCK + " TEXT, " + RAW_FIXED_ASSETS
                + " TEXT, " + RAW_ACCUMULTED_DEPRECIATION + " TEXT, "
                + RAW_BONDS + " TEXT, " + RAW_LOANS + " TEXT, " + 
RAW_EQUITY
                + " TEXT);";
        db.execSQL(pdb);

        String cndb = "CREATE TABLE  " + DATABASE_TABLE_SETTINGS + " ( "
                + RAW_COMPNAME_ID + " INTEGER PRIMARY KEY 
AUTOINCREMENT, "
                + RAW_COMPNAME + " TEXT);";
        db.execSQL(cndb);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
        onCreate(db);
    }
}

public DataBase(Context c) {
    tcontext = c;
}

public DataBase open() throws SQLiteException {
    thdb = new ProsseDatBase(tcontext);
    tdb = thdb.getWritableDatabase();
    return this;
}

public SQLiteDatabase getDatabase() {
    return tdb;
}

public void close() {
    tdb.close();
}

public long createEntry(String cm, String ch, String sk, String ot,
        String fs, String an, String bs, String ls, String ey) {
    ContentValues cv = new ContentValues();
    cv.put(RAW_COMPNAMEADD, cm);
    cv.put(RAW_CASH, ch);
    cv.put(RAW_CUSTOMERS, ot);
    cv.put(RAW_STOCK, sk);
    cv.put(RAW_FIXED_ASSETS, fs);
    cv.put(RAW_ACCUMULTED_DEPRECIATION, an);
    cv.put(RAW_BONDS, bs);
    cv.put(RAW_LOANS, ls);
    cv.put(RAW_EQUITY, ey);

    return tdb.insert(DATABASE_TABLE, null, cv);
}

public String getData() {
    String[] columns = new String[] { RAW_COMPNAMEADD };
    Cursor c = tdb.query(DATABASE_TABLE, columns, null, null, null, null,
            null);
    String results = "";

    int iCM = c.getColumnIndex(RAW_COMPNAMEADD);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        results = results + c.getString(iCM) + "\n";
    }
    return results;
}
} 
```

主要活动：

包 com.nituach.nituach；

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class NituachActivity extends Activity implements OnClickListener {

Button addNewBuisness;
ListView blv;
TextView tay;
String tyy;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final String TAG = NituachActivity.class.getSimpleName();
    addNewBuisness = (Button) findViewById(R.id.btnAddNewBuisness);
    addNewBuisness.setOnClickListener(NituachActivity.this);
    blv = (ListView) findViewById(R.id.listView1);
    tay = (TextView) findViewById(R.id.TempArray);

    Log.d(TAG, "All Variables was created");
    DataBase dbc = new DataBase(NituachActivity.this);
    dbc.open();

    String[] cs = new String[] { DataBase.RAW_COMPNAMEADD };

    Log.d(TAG, cs.toString());

     blv.setAdapter(new ArrayAdapter<String>(this,
     android.R.layout.simple_list_item_1, cs));

    dbc.close();

}

public void onClick(View v) {
    Intent addnbIntent = new Intent(NituachActivity.this,
            AddNewBuisness.class);
    NituachActivity.this.startActivity(addnbIntent);

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:31:38.193

您实际上并没有调用 getData() 从您的主要活动中获取您的值。

首先，将方法签名 getData() 更改为返回字符串数组：

```
public List<String> getData() {
    String[] columns = new String[] { RAW_COMPNAMEADD };
    Cursor c = tdb.query(DATABASE_TABLE, columns, null, null, null, null,
        null);
    String results = "";
    List<String> results = new ArrayList<String>();
    int iCM = c.getColumnIndex(RAW_COMPNAMEADD);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        results.add(c.getString(iCM);
    }
    return results;
} 
```

然后在您的主要活动中，更改为：

```
DataBase dbc = new DataBase(NituachActivity.this);
dbc.open();

List<String> cs = dbc.getData();
 blv.setAdapter(new ArrayAdapter<String>(this,
 android.R.layout.simple_list_item_1, cs)); 
```

# python - Python线程和多处理错误？

> ID：11809688
> 
> 赞同：1
> 
> 时间：2012-08-04T15:16:37.960
> 
> 标签：python, linux, multithreading, multiprocessing

是否`threading.Timer`并`multiprocessing.Process`产生另一个独立于其他进程或进程的进程？示例我的代码如下所示，假设它经过一轮`if`语句，使其执行`multiprocessing.Process`and `threading.Timer`，现在是 20 秒，所以它仍然等待 40 秒才能完成代码，但如果它`if`再次执行到语句中，它会得到任何错误或什么吗？它会将第二轮 var 传递给 the并在第一轮之上`myFunction2`执行另一个？`myFunction3`

```
def myFunction3():
    #some stuffs

def myFunction2(a,b):
    time.sleep(60)
    subprocess.Popen([.....],....) #with a var
    subprocess.Popen([.....],....) #with b var

def myFunction():
    if data in a:
       subprocess.Popen([.....],....)
       p = multiprocessing.Process(target=myFunction2,args=(a,b))
       p.start()
       threading.Timer(60, myFunction3).start()

if __name__=='__main__':
    while True:
       myFunction() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T00:04:41.963

这段代码存在一个基本问题：multiprocessing.Process 使用 fork() 创建新进程（除非您使用的是 Windows）。人们普遍认为，在多线程应用程序中使用 fork() 是不好的做法。[这是一篇好文章](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them)。

话虽如此，如果您小心的话，应该可以*完成这项工作。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T23:38:53.920

这个：

```
p = multiprocessing.Process(target=myFunction2,args=(a,b))
p.start() 
```

将创建一个新进程并`myFunction2`在该进程中运行该函数。

这个：

```
threading.Timer(60, myFunction3).start() 
```

将在当前进程中创建一个新线程并在该`myFunction3`线程中运行该函数。

一个进程可以包含多个线程，所有线程共享相同的地址空间，但进程之间不共享相同的地址空间。

# html - CSS 表格（非固定）是否会遇到与 HTML 表格（非固定）相同的性能问题？

> ID：11809692
> 
> 赞同：0
> 
> 时间：2012-08-04T15:17:18.640
> 
> 标签：html, css, performance

就像标题所说的那样，非固定表格布局是否与类似的 HTML 表格存在相同的性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:49:33.027

非固定表格的问题在于，要确定一列的宽度，必须加载该列的所有单元格。这仅在……时才重要。</p>

1.  …您有一个包含几千字节或几兆数据的表
2.  …您在大页面上进行表格布局（由于多种原因而错误）

从某种意义上说，这类似于使用 CSS。但是，有时会在应用样式*之前*显示 HTML ，因此页面加载速度很快，但在您看到正确的布局之前大约需要同样长的时间。

除非您有一个非常大的表，否则使用 html 表可能总是更好，因为它更惯用。如果您必须创建一个大表并且加载时间困扰您，请进行基准测试以获得瞬间差异。

所以我对你是/否问题的回答是：不，除非你想在两种情况下都看到同一张桌子。

注意：上次我查看一个大型 html 表（约 3000 行，加载时间约 4 秒）时，它在完全加载之前就开始显示。对于较旧的浏览器，这可能不是真的

# android - 如何为 Android XML 布局属性使用多个值？

> ID：11809693
> 
> 赞同：10
> 
> 时间：2012-08-04T15:17:20.950
> 
> 标签：android, android-layout, android-linearlayout, android-xml

我觉得这一定是以前问过的，但我找不到。

我想要一个`LinearLayout`这样的东西，一切都对齐到右边和底部。

我试过了：

```
 android:gravity="right | bottom"
    android:gravity="right + bottom"
    android:gravity="right & bottom"
    android:gravity="right, bottom"
    android:gravity="right bottom" 
```

所有这些产生

```
 Error: String types not allowed (at 'gravity' with value 'right, bottom'). 
```

我想我可以在子元素上使用边距，但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-04T15:19:12.740

格拉。这是空间。正确的语法是

```
 android:gravity="right|bottom" 
```

如果 Eclipse 看到你正在输入一个字符串，我希望它会有这样的建议。像

```
Error: String types not allowed (at 'gravity' with value 'right, bottom').
If you want to enter multiple values, use the syntax "value1|value2" 
```

# css - div的垂直中心不起作用

> ID：11809695
> 
> 赞同：0
> 
> 时间：2012-08-04T15:17:28.520
> 
> 标签：css, alignment

> **可能重复：**
> [如何将 <div> 对齐到页面中间](https://stackoverflow.com/questions/953918/how-to-align-a-div-to-the-middle-of-the-page)

我正在尝试将我的 div“contact-box”水平和垂直居中在 div“contact-us”中。它水平工作但不是垂直工作，知道为什么吗？Tks

HTML

```
<div id="contact-us">
<div id="contact-box">
<p><b>Company Name</b></p>
<p>Company street</p>
<p>Company city</p>
<p>Company country</p><br />
<a href="#inline" class="modalbox">Contact Us</a>
<img src="images/email-icon.png" alt="Picture" /></div>
</div> 
```

CSS

```
#contact-us {
    height: 1300px;
    background: #8aba56;
    padding-top: 250px;
    background: url(../images/bg-water13.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover; 
}

#contact-box {
    text-align:center;
    display:block;
    vertical-align:middle;
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    width: 300px;
    Height:120px;
    padding:15px;
    margin-left: auto;
    margin-right: auto;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";
    filter: alpha(opacity=95);
    opacity: 0.85; /* For IE8 and earlier */
    border: 1px solid #efefef;
    background: #fff;
    -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:38:06.910

格雷格，

您可以尝试将以下内容应用于#contact-box 或contact-us

```
#contact-box{
    display: table-cell;
    vertical-align: center;
} 
```

在这里查看 jsFiddle。

[示例 - 单击此处](http://jsfiddle.net/QB7RZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:46:41.993

添加`position: relative;`到`#contact-us`和`position: absolute; top: 50%; left: 50%; margin-top: -60px; margin-left: -150px;`到`#contact-box`

[http://jsfiddle.net/THWMe/1/](http://jsfiddle.net/THWMe/1/)

# python - Python Mechanize.Browser.Open(url) 状态码

> ID：11809696
> 
> 赞同：2
> 
> 时间：2012-08-04T15:17:32.060
> 
> 标签：python, screen-scraping, web-scraping, mechanize, mechanize-python

我最近从 perl 转移到了 python，并且正在更新我的一些使用 perls WWW::Mechanize 的脚本来使用 python mechanize 模块。

到目前为止一切都很好，但我无法在任何地方找到 HTTP 状态代码？（200、301 等）

我用谷歌搜索并找到了这个，但他们不是查看代码的方法吗？

[在 Python 中使用 Mechanize 获取和捕获 HTTP 响应](https://stackoverflow.com/questions/2673022/getting-and-trapping-http-response-using-mechanize-in-python)

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T15:37:28.397

利用`response.code`

```
from mechanize import Browser
browser = Browser()
response = browser.open('http://www.google.com')
print response.code 
```

# c# - 懒惰 - 并希望在构造函数中实例化我的所有公共成员

> ID：11809697
> 
> 赞同：1
> 
> 时间：2012-08-04T15:17:34.260
> 
> 标签：c#, reflection, constructor

我有一个 C# 类，它有几十个成员都是相同类型的，我总是希望它们是新的而不是在实例化类时为空。所以在我的类字段声明中我写：

```
public ApiParameter mnBatchNumber = new ApiParameter();
public ApiParameter szBatchType = new ApiParameter();
public ApiParameter jdBatchDate = new ApiParameter();
...// and so on, many many times 
```

问题在于部分“= new ApiParameter();” 在我看来，是冗长的噪音。有没有一种好方法可以让我在创建课程时始终更新这些字段？我认为在构造函数中使用反射会很好地做到这一点 - 特别是如果在我的基类中实现。有谁知道袖手旁观如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:22:35.013

看不出有什么*不好*编码风格：如果没有很好的理由，请不要使用公共字段。

如果*真的*不喜欢在文件顶部初始化成员，可能是，您可以在 中初始化它们`static constructor`，但我再说一遍，我更喜欢您已经做过的方式，但在*私有*字段上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:57:20.513

以下是您可以在构造函数中使用的一些反射：

```
FieldInfo[] fields = this.GetType().GetFields(); //if you're using private fields use GetFields(BindingFlags.NonPublic)
foreach(FieldInfo f in fields){
     if(f.FieldType == typeof(ApiParameter)){
        f.SetValue(this, new ApiParameter());
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:47:05.833

可能的解决方案，基于使用表达式树。此解决方案的优点是，当您的类型的第一个实例被创建时，慢反射机制只使用一次。

```
//public fields are of this type
public class TestClass
{

}
//Class with public fields
public class TestContainerClass
{
    public TestClass TestClassField1;
    public TestClass TestClassField2;
    public TestClass TestClassField3;
    public TestClass TestClassField4;
    //should fill this list on creation of first instance and then use it
    //assume that type is not changed in a runtime
    private static List<Action<TestContainerClass,TestClass>> _fieldInitializers;

    public TestContainerClass()
    {
        if (_fieldInitializers == null)
        {
            _fieldInitializers = new List<Action<TestContainerClass, TestClass>>();
            //use reflection only once
            FieldInfo[] testClassFieldInfos =
                this.GetType().GetFields().Where(f => f.FieldType == typeof (TestClass)).ToArray();

            foreach (var testClassFieldInfo in testClassFieldInfos)
            {
                //get action to set current field and store it in a list
                var fieldSetter = GetFieldAssigner<TestContainerClass, TestClass>(testClassFieldInfo);
                _fieldInitializers.Add(fieldSetter);
            }
        }
        //next lines will set all 
        foreach (var fieldInitializer in _fieldInitializers)
        {
            fieldInitializer(this,new TestClass());
        }
    }

    public static Action<T, I> GetFieldAssigner<T, I>(FieldInfo fieldInfo)
    {
        ParameterExpression targetExp =
        Expression.Parameter(typeof(T), "target");

        ParameterExpression valueExp =
        Expression.Parameter(typeof(I), "value");

        MemberExpression fieldExp = Expression.Field(targetExp, fieldInfo);
        BinaryExpression assignExp = Expression.Assign(fieldExp, valueExp);

        var setter = Expression.Lambda<Action<T, I>>(assignExp, targetExp, valueExp).Compile();
        return setter;
    }
} 
```

另外，我想注意到，当你结合初始化和声明字段时，你可能会发现你的构造函数有点臃肿，像这样：

```
class SomeType
{
    private int _x = 12;//declare and init

    public SomeType()
    { 
       _x = 12;//compiler inserted that line
    }

    public SomeType(BlahBlahType blahBlahObject)
    {
        _x = 12;//compiler inserted that line
    }
    //other constructors will also have _x = 12; line 
} 
```

# java - 从相机预览中获取两帧

> ID：11809699
> 
> 赞同：1
> 
> 时间：2012-08-04T15:17:45.960
> 
> 标签：java, android, android-camera

我试图从相机预览中获取两帧，以便每次比较两张图片（我正在编写运动检测器）

*   如果我使用`setOneShotPreviewCallback()`它只返回一帧
*   如果我使用`setPreviewCallback()`它会返回很多帧，我无法阻止它这样做。

我每次都想得到两帧。

# c++ - 通过 BGL 使用 Min-Cut 的图像分割示例？

> ID：11809701
> 
> 赞同：2
> 
> 时间：2012-08-04T15:17:52.800
> 
> 标签：c++, boost, computer-vision

有谁知道在哪里可以找到通过 BGL 使用 Min-Cut 进行图像分割的 C++ 示例？我知道如何使用 Edmunds-Karp Maximum Flow 通过 BGL 运行 Min-Cut。我最感兴趣的是围绕从图像构建图形并将 Min-Cut 结果转换为图像分割的输出的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:54:57.703

可以找到使用 graph0cuts 进行图像分割的非常好的 c++ 实现： [在 VGG iseg 主页](http://www.robots.ox.ac.uk/~vgg/software/iseg/index.shtml)。我不确定他们是否使用 BGL，但您可以找到他们在哪里运行图形切割并将这部分替换为 BGL。

可以[在此处找到另一个更简单的示例，在此处](http://www.wisdom.weizmann.ac.il/~bagon/matlab.html#graphcut)查找示例。这是一个 Matlab 代码 - 但它显示了一种为图切割构建能量函数的方法。

# javascript - 解释 javascript toSource()

> ID：11809702
> 
> 赞同：1
> 
> 时间：2012-08-04T15:18:00.803
> 
> 标签：javascript, google-sheets

当我调用 response.toSource() 对谷歌电子表格进行查询时，我得到以下信息。

```
({
    ej: "0.6",
    Oe: "ok",
    gb: [],
    hb: [],
    Cg: "407260946",
    g: {
        zb: "0.6",
        z: [{
            id: "B",
            label: "",
            type: "string",
            pattern: ""}],
        D: [{
            c: [{
                v: "\"My data\""}]}],
        Na: null
    }
})​ 
```

我希望访问字符串“我的数据”并将其存储在 var 中，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:22:28.593

好吧，“我的数据”是`v`数组中键的值，`c`它是存储在数组中的键的值，数组`D`是存储在具有键的对象中的键的值`g`。所以这是

```
var myData = response["g"]["D"][0]["c"][0]["v"]; 
```

# c - 如何计算C中两个日期之间的月份

> ID：11809715
> 
> 赞同：0
> 
> 时间：2012-08-04T15:19:59.957
> 
> 标签：c, unix

我有一个场景，系统会在 18 个月内计算每月费用。比如说，费用是 10$ ；然后将计算 $10/18 = $0.56 每月。

如果客户在 18 个月期间中途取消服务。我需要找到他使用的月数并退还剩余的月数。例如：客户于2012年6月2日创建并于2012年8月13日取消，这意味着他完全使用了2个月，因此我需要退款`($10/18)* (18-2)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:24:35.030

由于这只会在几年的范围内需要 - 我会手动构建每个月初的 time_t 值的查找表。

然后记录他们启动服务的 time_t，现在检查 time_t 然后扫描表中的值的数量。

ps. time_t is the 'C' stdlib basis for time functions, it's the number of seconds since 1970 and is used by all the functions in time.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:34:19.190

您可以创建一个方法来计算它，但是更好的方法是编写一个 ADT 来表示一个日期对象，该对象应该自己完成所有计算

```
int chargeFor(int createdD,int createdM,int createdY,int canceledD,int canceledM,int canceledY){
   int deltaD = canceledD - createdD;
   int deltaM = canceledM - createdM;
   int deltaY = canceledD - createdD;

   if( deltaD != 0 )
      return result = deltaY * 12 + deltaM + 1; 
   else 
      return result = deltaY * 12 + deltaM; 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T15:27:46.270

如果我理解正确，您想计算两个日期之间的整月数......所以算法可以是这样的：

```
curDate  = fromDate;
curDate.month++;
totMonths = 0;
while (curDate < fromDate) {
    totMonths++;
    if (curDate.month == 12) {
        curDate.month = 1;
        curDate.year++;
    } else curDate.month++;
} 
```

# c++ - GLut.h/osfinfo.c/dbgheap.c/mlock.c 中 0x76fe15de 处未处理的异常

> ID：11809717
> 
> 赞同：1
> 
> 时间：2012-08-04T15:20:36.033
> 
> 标签：c++, c, visual-studio-2010, opengl, unhandled-exception

在 HP Pavilion g6 上使用带有 Visual Studio 2010 Professional 的 Windows 7 Home Premium 64 位。代码是用 C/C++ 编写的。

链接：

```
Additional Include Directories: N/A - Everything needed is in the VS2010 Include Directory
Additional Library Directories: N/A - Everything needed is in the VS2010 Lib Directory
Additional Dependencies (Debug Mode): glew32d.lib;glew32sd.lib;glu32.lib;opengl32.lib;gdi32.lib;winmm.lib;user32.lib; 
```

代码：

```
 #include "stdafx.h"
    #include <stdio.h>
    #include <GL\glew.h>
    #include <GL\wglew.h> 
    #include <GL\glut1.h>
    #include <GL\glext.h>

    using namespace std;

    int main(int argc, char** argv)
    {
        glutInit(&argc, argv);

        const unsigned char * version ;
        version = (const unsigned char *)glGetString(GL_VERSION);
        printf ("My OpenGL version is %s\n", version); //Comment this out for error in Glut, leave for the other 2 errors

        // Obtain a buffer identifier from OpenGL
        GLuint bufferID = 0;
        glGenBuffers( 1, &bufferID ); //Comment out for no reported errors

        return 0;
    } 
```

报告的错误：

```
glut.h:
First-chance exception at 0x00000000 in gl_crap3.exe: 0xC0000005: Access violation.
Unhandled exception at 0x76fe15de in gl_crap3.exe: 0xC0000005: Access violation.
Error occurs on line 486 - static void APIENTRY glutInit_ATEXIT_HACK(int *argcp, char **argv) { __glutInitWithExit(argcp, argv, exit); }

osfinfo.c:
First-chance exception at 0x00000000 in gl_crap3.exe: 0xC0000005: Access violation.
Unhandled exception at 0x76fe15de in gl_crap3.exe: 0xC0000005: Access violation.
Error occurs on line 467 - return retval; // in function, int __cdecl __lock_fhandle (int fh)

dbgheap.c:
First-chance exception at 0x00000000 in gl_crap3.exe: 0xC0000005: Access violation.
Unhandled exception at 0x76fe15de in gl_crap3.exe: 0xC0000005: Access violation.
Error occurs on line 504 - __finally {_munlock(_HEAP_LOCK);}

mlock.c:
First-chance exception at 0x00000000 in gl_crap3.exe: 0xC0000005: Access violation.
Unhandled exception at 0x76fe15de in gl_crap3.exe: 0xC0000005: Access violation.
Error occurs on line 375 - } // end of function, void __cdecl _unlock (int locknum) 
```

其他明显的症状：

*   当 printf 命令未注释掉时，崩溃在**osfinfo.c**、dbgheap.c 和 mlock.c 之间交替出现
*   当 printf **IS**注释掉时，只会在 glut.h 上崩溃
*   当glGenBuffers被注释掉时，没有未处理的异常错误——程序不会崩溃
*   printf 语句的输出是：My OpenGL version is (null) - 无论程序是否崩溃，都会发生

我完全被这个难住了，互联网上似乎没有任何东西可以帮助我。我什至首先专注于尝试解决“OpenGL version = null”问题，但我空手而归，因为我要么错误地遵循了[这个网站](http://www.opengl.org/discussion_boards/showthread.php/149571-glGetString%28GL_VERSION%29-return-Null-argh-!)上的建议（对 OpenGL 渲染上下文没有足够好的理解），要么这个问题是0xC0000005 错误的症状。

* * *

编辑：由于这个问题似乎是由多个问题引起的，我决定放置我的代码的更新版本以及我从中得到的相应错误。到目前为止，感谢您对我的帮助，但 glGenBuffers 似乎只是对我怀恨在心之类的。

新代码：

```
 #include "stdafx.h"
    #include <cmath>
    #include <math.h>
    #include <iostream>
    #include <GL\glew.h>
    #include <GL\glut.h>
    #include <GL\glext.h>
    #include <GL\wglew.h>
    #include <GL\wglext.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <stdarg.h>

    using namespace std;
    void drawScene();
    void handleKeypress(unsigned char key, int x, int y);
    void handleMouse(int button, int state, int x, int y);
    void handleResize(int w, int h);
    void update(int value);
    void printw (float x, float y, float z, char* format, ...);

    GLvoid *font_style = GLUT_BITMAP_TIMES_ROMAN_24;

    int main(int argc, char** argv)
    {
        glutInit(&argc, argv);
        glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH); 
        glutInitWindowSize(960, 460);
        glutCreateWindow("Piece of Shit");
        glEnable(GL_DEPTH_TEST);
        glutDisplayFunc(drawScene);
        glutKeyboardFunc(handleKeypress);
        glutMouseFunc(handleMouse);
        glutReshapeFunc(handleResize);
        glutTimerFunc(25, update, 0);
        glutMainLoop();
        return 0;
    }

    void drawScene()
    {
        double x, z;
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glClearColor(0.0,0.0,0.0,0.0);
        glShadeModel(GL_FLAT);
        GLuint bufferID[1];

        GLenum err = glewInit();
        if (GLEW_OK != err)
            printw(-6, 1.5, -10, "Fail: %s\n", glewGetErrorString(err));
        printw(-3, 0.3, -10, "Status: Using GLEW %s\n", glewGetString(GLEW_VERSION));
        glGenBuffers( 1, &bufferID[0] ); // comment out and you have no problems********************************
        glutSwapBuffers();
    }

    void handleKeypress(unsigned char key, int x, int y)
    {
    }

    void handleMouse(int button, int state, int x, int y)
    {
    }

    void handleResize(int w, int h)
    {   
        glViewport(0,0,w,h);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(45.0, (double)w / (double)h, 1.0, 200.0);
    }

    void update(int value)
    {
        glutPostRedisplay();
        glutTimerFunc(20, update, 0);
    }

    void printw (float x, float y, float z, char* format, ...)
    {
        va_list args;   //  Variable argument list
        int len;        // String length
        int i;          //  Iterator
        char* text;     // Text

        //  Initialize a variable argument list
        va_start(args, format);

        //  Return the number of characters in the string referenced the list of arguments.
        // _vscprintf doesn't count terminating '\0' (that's why +1)
        len = _vscprintf(format, args) + 1;

        //  Allocate memory for a string of the specified size
        text = (char*) malloc (len * sizeof(char));

        //  Write formatted output using a pointer to the list of arguments
        vsprintf_s(text, len, format, args);

        //  End using variable argument list
        va_end(args);

        //  Specify the raster position for pixel operations.
        glRasterPos3f (x, y, z);

        //  Draw the characters one by one
        for (i = 0; text[i] != '\0'; i++)
        glutBitmapCharacter(font_style, text[i]);

        //  Free the allocated memory for the string
        free(text);
    } 
```

错误：gl_crap3.obj：错误 LNK2001：未解析的外部符号 ___glewGenBuffers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:35:33.987

谢谢大家的帮助。在玩了一个多星期之后，我相信问题可能出在 Visual Studio 2010 Compiler 本身**09/08/2012**上。

我将尝试使用 Linux 来解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:44:55.513

您的问题可能是 glGenBuffers 没有定义。我注意到您正在尝试使用 GLEW 来解决这个问题。正如您所猜测的那样，您需要做更多的事情来设置 GLEW。你需要调用glewInit。我的代码看起来像（为清楚起见而简化）：

```
GLenum err = glewInit();
if (err != GLEW_OK) {
    string error = "GLEW extension loading failed: "+string((char*)glewGetErrorString(err));
    printf("%s\n",error); getchar();
} 
```

在设置上下文后添加该代码（即，在 glutInit 之后）。我不知道您的 OpenGL 版本是否为 NULL——我最后一次遇到它是在一张相当旧的卡上——可能是一个集成芯片组。如果这是您的情况，则可能没有什么可担心的。

# java - JAVA中的“this”，更多解释

> ID：11809722
> 
> 赞同：2
> 
> 时间：2012-08-04T15:21:21.637
> 
> 标签：java, this

假设我有这样的代码

```
public void init(){
    addMouseListener(this);
    addMouseMotionListener(this);
} 
```

基于 JAVA 文档，

在方法或构造函数中，this 指的是当前对象，即正在调用其方法或构造函数的对象...

根据代码，我可以得出结论，“this”是指`init()`未调用方法的对象，`addMouseListener()`或者`addMouseMotionListener()`

是真的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T15:23:05.030

`this`指当前对象，即具有 init 方法的对象，是的，以及您要添加 MouseListener 和 MouseMotionListener 的对象。它***也是***和 MouseMotionListener。你可能要求这个可怜的班级做得太多了。

我建议您不要让您的 GUI 或小程序类也实现侦听器接口，因为这会使您的代码难以调试和扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T15:23:33.133

不完全是。当你这样做

```
someFunction(); 
```

这和做的一样

```
this.someFunction(); 
```

因此，在您的示例中，您有一些对象既 TAKES 监听器又是监听器。本质上，您是在告诉对象听自己的声音。你正在做的

```
this.addMouseListener(this); 
```

`this`当方法不合格时，会隐含初始值。

`static`方法也是如此。如果你有一个`static void someStatic() { }`，任何时候你打电话`someStatic();`都是一样的`MyClass.someStatic();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T15:23:11.403

那是真实的。关键字“this”是指调用 init() 的对象实例，例如对象设置为 MouseListener 和 MouseMotionListener

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T15:26:02.473

关键字是对当前类实例的`this`引用，但是当你将它传递给 addMouseListener 时，你传递的是实现的接口引用，在这种情况下是[MouseListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseListener.html)。

# c - sendto() 在 SOCK_DGRAM (UDP) 套接字上返回大于 MTU 的值

> ID：11809727
> 
> 赞同：1
> 
> 时间：2012-08-04T15:21:55.833
> 
> 标签：c, linux, sockets, udp, mtu

我目前正在编写一个 UDP 客户端/服务器（在 GNU/Linux 上）。我用于在尚未绑定到端口`sendto()`的套接字上发送消息。`SOCK_DGRAM`

send(2) 联机帮助页指出：

> 成功时，这些调用返回发送的字符数。出错时，返回 -1，并适当设置 errno。

但是，sendto 总是返回它的长度参数，表示成功。对于大于 65507 ( `0xFFE3`) 字节的消息，它会返回`Message too long`错误。

对于大于 1500 字节的 MTU 的消息，服务器总是（通过`recvfrom()`）接收正好 1500 字节的消息，只是简单地截断消息，无需另行通知。

（为什么）这种行为是有意为之的，有没有办法在出现问题时得到通知？

我目前能想到的唯一解决方法是简单地假设 MTU 为 1500 字节并且从不发送更大的数据包。

这是相关的方法：

```
int udp_send(uint32_t dst, uint16_t port, char *msg, unsigned len) {
    int sock = socket(AF_INET, SOCK_DGRAM, 0);
    if(sock < 0) {
            perror("Could not open socket");
            return -1;
    }

    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = htonl(dst);

    int count = sendto(sock, msg, len, 0,
            (struct sockaddr *) &addr, sizeof(addr));
    printf("bytes sent: %d\n", count);

    if(count < 0) {
            perror("Could not send message");
            return -3;
    }

    close(sock);
    return count;
} 
```

发生所描述的不良行为的调用将是 udp_send(0x7F000001, 1337, bigbuf, 1501); 仅发送 1500 个字节时将返回 1501。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:07:00.837

事实证明，正如 nos 在他的评论中所建议的那样，我的发送代码实际上非常好；我的接收代码有一个简单的错误：在某些时候，我将它的缓冲区定义为只有 1500 字节大小，后来忘记了。

此外，我还误以为 GNU/Linux 只能将 UDP 数据包发送到接口的 MTU，这是不正确的。即使标准只保证 576 字节，至少在我的情况下，它似乎可以发送（和接收）高达 65507 字节的 UDP 数据包，之后调用`Message too long`返回错误。`sendto()`UDP 数据包由内核的 IP 层自动分段，并由接收器重新组装——我不认为 UDP 可以使用这种高级技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T15:35:17.583

UDP不是面向连接的，你永远不能说两个数据包属于彼此，你可以用`getsockopt()`它来确定MTU并保持在它之下，手动准备数据包并使用适当的偏移量。

[原始套接字的 udp 数据包碎片](https://stackoverflow.com/questions/4191253/udp-packet-fragmentation-for-raw-sockets)对此有一些解释。

另一方面，您可以尝试使用 MTU 发现。基本上，在发送大于 MTU 的 UDP 数据包时，如果您的平台支持但并非所有平台都支持，则可能会发生 IP 分段。中间的一些网络设备会丢弃碎片数据包，有些会通过它们，您无法保证在交付时重新组装。

这是一些背景信息： http: [//michael.toren.net/mirrors/sock-faq/unix-socket-faq-5.html](http://michael.toren.net/mirrors/sock-faq/unix-socket-faq-5.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T18:59:39.103

从 Linux udp(7) 手册页：

> 默认情况下，Linux UDP 会进行路径 MTU（最大传输单元）发现。这意味着内核将跟踪 MTU 到特定的目标 IP 地址，并在 UDP 数据包写入超过它时返回 EMSGSIZE。发生这种情况时，应用程序应减小数据包大小。也可以使用 IP_MTU_DISCOVER 套接字选项或 /proc/sys/net/ipv4/ip_no_pmtu_disc 文件关闭路径 MTU 发现；有关详细信息，请参见 ip(7)。关闭时，UDP 将对超出接口 MTU 的传出 UDP 数据包进行分段。但是，出于性能和可靠性的原因，不建议禁用它。

因此，这意味着任何`sendto`大小大于 MTU（对您来说约为 1500 字节？）都应该返回`EMSGSIZE`. 如果这不是您所看到的，我完全不确定发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T19:04:47.257

（为什么）这种行为是有意为之的，有没有办法在出现问题时得到通知？

--> UDP就是这样（无连接、不可靠、数据报协议），使用UDP传输数据时需要检查每一个错误

> 我目前能想到的唯一解决方法是简单地假设 MTU 为 1500 字节

--> 在我们这个时代，99% 的流量是通过以太网发送的，而在以太网上，MTU 是 1500 字节

> 发生所描述的不良行为的调用将是 udp_send(0x7F000001, 1337, bigbuf, 1501); 仅发送 1500 个字节时将返回 1501。

--> 默认情况下，Linux UDP 会进行路径 MTU 发现。这意味着内核将跟踪 MTU 到特定的目标 IP 地址，并在 UDP 数据包写入超过它时返回 EMSGSIZE。

这是 krenel 内部的默认行为，您可以修改它并获得分段数据包（对于 performanes，这是一个坏主意）。更多信息在这里：[http ://www.kernel.org/doc/man-pages/online/pages/man7/udp.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/udp.7.html)

# ruby-on-rails - 通过属于编辑对象

> ID：11809728
> 
> 赞同：1
> 
> 时间：2012-08-04T15:22:06.270
> 
> 标签：ruby-on-rails, relationship, has-many, belongs-to

因此，当我编辑我的 Thread 对象时，我试图只编辑第一个 Post 条目。

这是我的设置：

```
class Thread < ActiveRecord::Base
attr_accessible :name, :posts_attributes

has_many :posts, dependent: :destroy
accepts_nested_attributes_for :posts, reject_if: lambda { |a| a[:content].blank? }
end 
```

* * *

```
class Post < ActiveRecord::Base
attr_accessible :content, 

belongs_to :discussion
end 
```

* * *

```
<%= provide(:title, "Edit Discussion")%>
<%= form_for(@thread) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <%= f.label :name %>
    <%= f.text_field :name, size: 60 %>

    <%= f.fields_for :posts do |builder| %>

        <%= builder.label :content %>
        <%= builder.text_area :content, :size => "60x15" %>
    <% end %>

    <%= f.submit "Edit Thread" %>
<% end %> 
```

如果我按原样运行此代码，那么我会得到一个可以编辑所有帖子的页面，我想是因为 :posts 来自关联。但我只想要第一个帖子

然后，如果我将 :posts 更改为 @discussion.posts.at(0) 以获取第一个帖子，那么我可以进入编辑页面......并且 form_for 正确显示但是在触发更新时，它说我可以' t 编辑受保护的属性：posts...关于如何仅显示和编辑第一个帖子的任何想法？

# css - 清除子元素的父元素css属性

> ID：11809729
> 
> 赞同：0
> 
> 时间：2012-08-04T15:22:08.353
> 
> 标签：css

我有两个元素，例如：

```
 <div style="color: #f00">
    parent 
    <div>child</div>
 </div> 
```

我想要，那个子元素没有父 CSS 属性，请告诉我，如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:36:58.723

你可以

1.  将所有孩子放入一个`<iframe>`. 父窗口的 CSS 不会反映在 iframe 中。
2.  您可以修改 CSS 重置，如[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)以满足您的需要*（即，根据需要编辑重置的每个部分并在您的孩子面前添加前缀）*。

    ```
    <div style="color: #f00">
      parent 
      <div id="children">
        <div>child</div>
      </div>
    </div> 
    ```

*（仅以上面重置的最后一行为例）*，您可以执行类似的操作

```
#children table {
  border-collapse: collapse;
  border-spacing: 0;
} 
```

重置. `<table>`_ `#children`您必须根据自己的需要对其进行测试和调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:18:07.207

子 div 将始终继承其父 div 的样式，这就是 css 的全部意义所在。你可以考虑这样的事情

```
<div class='parent'>
  parent text
    <div>
       child text
    </div>
</div> 
```

然后在您的样式中（在您的 html 中的某处，或者在链接的样式表中）您可以执行以下操作：

```
body, .parent div {
  color: #000;
  ...
}
.parent {
  color: #f00;
  ...
} 
```

请注意，如果您向 中添加更多样式，则`.parent`必须为子 div ( ) 设置替代项，`.parent div`以防止该属性被子级继承

# linux - 结合 'git status' 和 find 命令与 mmin 或 mtime 选项

> ID：11809730
> 
> 赞同：3
> 
> 时间：2012-08-04T15:22:16.137
> 
> 标签：linux, git, time, find, diff

'git status' 命令给出自上次提交以来更改的文件列表。

带有 mmin 或 mtime 选项的 find 命令给出在给定时间长度内保存的文件列表。但它也将包括我编辑过的文件，然后撤消更改，即那些内容尚未更改的文件。

我需要的是获取在给定时间长度内已修改（内容已更改）的文件列表。可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:01:55.453

你想要的是 Git [`whatchanged`](http://git-scm.com/docs/git-whatchanged)。

这是一个用于显示添加文件的示例`whatchanged`（我没有碰巧在我使用的测试存储库中修改过文件，但是您可以轻松地将结果限制为修改过的文件而不是添加的文件）：

```
$ git whatchanged --after='2012-07-07 17:20' --before='2012-07-28 23:31' --diff-filter=A -r --oneline --name-only
82b9dcf F
E/F
95a02ce D
D 
```

如手册中所述，在幕后`whatchanged`使用[`rev-list`](http://git-scm.com/docs/git-rev-list)和，并且还使用和可用的选项。该选项将：[`diff-tree`](http://git-scm.com/docs/git-diff-tree)`whatchanged``rev-list``diff-tree``diff-tree` `--diff-filter`

> 仅选择已添加 (A)、已复制 (C)、已删除 (D)、已修改 (M)、已重命名 (R)、类型（即常规文件、符号链接、子模块...）已更改 (T) 的文件、未合并 (U)、未知 (X) 或它们的配对已损坏 (B)。

如果你想直接使用`rev-list`和`diff-tree`（避免提交日志`whatchanged`想要输出），你可以使用：

```
$ git diff-tree --diff-filter=A -r --name-only $(git rev-list -n 1 --before='2012-07-07 17:20' HEAD) $(git rev-list -n 1 --before='2012-07-28 23:31' HEAD)
D
E/F 
```

# mysql - mysql - 选择匹配最多的字符

> ID：11809732
> 
> 赞同：8
> 
> 时间：2012-08-04T15:22:20.940
> 
> 标签：mysql, select, strip

我不知道这被称为什么函数，但我正在尝试选择与输出匹配/具有最多字符的行。这是我尝试过的。

```
select * from table where title like '%alotofcharactershere%' limit 1 
```

以上仅适用于整个单词：alotofcharactershere

我真正想要的是把它分解： alotofcharactershere 并找到一个具有最匹配字符的行。

如果您知道我在说什么，请提供帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:04:43.190

我一直在研究，我不是 SQL 专家，但我在考虑替换不匹配的字符后按字符长度排序的行。

就像是： `SELECT * FROM your_table ORDER BY LENGTH(REGEXP_REPLACE(title, '[^abcdefg]', ''));`

2个问题。它与找到的最不同的字符不匹配。所以 aaaa 将比 abc 具有更高的价值。而且我认为您的意思是您希望 abc 具有更高的价值。第二个问题可能是最大的，mySQL 不支持这个正则表达式。而且不确定有什么作用。但我确实找到了这篇文章：[https ://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)

虽然我认为一定有一些更简单的东西，而且是开箱即用的东西，但这个答案可能只会引发人们开箱即用的想法。

也可能有一个包含很多连接的解决方案，但这很可能比选择所有内容并在 php（或类似）中排序要慢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:11:12.207

目前尚不清楚您要完成什么，所以我想知道您是否查看过[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)。找到***相关性***的能力可能会给你一些想法或替代方案。

# php - jQuery 将 div 添加到另一个页面

> ID：11809735
> 
> 赞同：0
> 
> 时间：2012-08-04T15:22:33.837
> 
> 标签：php, jquery, html, panel, add

我正在做一个小管理面板，想知道在单击面板中的按钮后是否可以使用 jQuery 在 index.php 文件中添加一个 div 框？

如果是这样，一个小例子将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:29:27.780

您需要使用 jQuery 的[$.post()](http://api.jquery.com/jQuery.post/)方法发送 XML http post 请求，然后让服务器上的 php 文件修改索引文件，或者可以包含在索引文件中的文本文件：

```
$.post('indexEdit.php', {info: "info to ad to file"}, function(data){ /*callback here*/ }); 
```

确保 indexEdit.php 具有会话验证，否则其他人可能会尝试向其发布信息并执行外部编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:32:17.440

要将代码添加到 div 的开头，请使用`prepend`方法。要将代码添加到 div 的末尾，请使用`append`方法。

以下是向 html 页面正文添加代码的 2 个示例：

```
$("body").prepend("This is some div added to the start of the page.");
$("body").append("This is some div added to the end of the page."); 
```

如果您想动态加载内容，则必须使用[ajax](http://api.jquery.com/jQuery.ajax/)方法并在回调中使用上面的代码。

# javascript - 固定跟随鼠标的两条线之间的角度

> ID：11809740
> 
> 赞同：2
> 
> 时间：2012-08-04T15:22:57.470
> 
> 标签：javascript, html, canvas

一段时间以来，我一直在尝试使用 JavaScript 将这个功能实现到我的 HTML5 Canvas 中。这是一个示例图片：

![这是一个示例图片。](../Images/56d049b7450fb4cfe9bb42926352700c.png)

您可以在上面看到我只是绘制的一个示例，以帮助自己告诉您我要实现的目标。我要做的是：画布上有一个给定的X，Y坐标，这个点是两条线的固定起点。两条线之间的角度应始终固定，例如：40°。这两条线应该跟随鼠标，它们之间有一个固定的角​​度。搜索该站点，我可以实现此功能的以下状态：根据[本教程](http://dev.opera.com/articles/view/html5-canvas-painting/)，我可以创建跟随鼠标的两条线，两条线的端点始终距离鼠标 100px，但是，当然，那不是' t 给我一个固定的角​​度，当我在画布上移动鼠标时，角度会发生变化。

这是我的 JS 代码中画出两条线的部分：

```
 context.clearRect(0, 0, canvas.width, canvas.height);
  context.beginPath();
  context.moveTo(xcoord, ycoord);
  context.lineTo(ev._x+100, ev._y);
  context.stroke();
  context.closePath();

  context.beginPath();
  context.moveTo(xcoord, ycoord);
  context.lineTo(ev._x-100, ev._y);
  context.stroke();
  context.closePath(); 
```

如果我用鼠标单击并且不释放按钮，则两条线跟随鼠标，这就是`context.clearRect`零件存在的原因。

任何帮助将不胜感激，因为我自己无法解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T19:19:22.040

首先，得到想要的行长：

```
var delta = {x: event.x - coord.x, y: event.y - coord.y};
var len = Math.sqrt(delta.x*delta.x + delta.y*delta.y); 
```

然后获取角度（使用[atan2](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/atan2)），并添加 40°：

```
var angle = Math.atan2(delta.y, delta.x);
var angle_left = angle + 40 / 180 * Math.PI;
var angle_right = angle - 40 / 180 * Math.PI; 
```

现在您可以从中获得要点：

```
var left = {
    x: coord.x + Math.cos(angle_left) * len,
    y: coord.y + Math.sin(angle_left) * len
};
var right = {
    x: coord.x + Math.cos(angle_right) * len,
    y: coord.y + Math.sin(angle_right) * len
}; 
```

（[jsfiddle.net 上](http://jsfiddle.net/jhFSd/)的演示-[您的小提琴已更新](http://jsfiddle.net/JpeVq/1/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:47:42.360

那这个怎么样？：[http ://edumax.org.ro/extra/new/Stack2/](http://edumax.org.ro/extra/new/Stack2/)

```
var canvas, ctx;

function viewDidLoad(){
canvas = document.getElementById("canvas");
ctx = canvas.getContext("2d");
canvas.height = 500;
canvas.width = 500;
canvas.addEventListener("mousemove", mouse_move_handler, false);
}

var px, py;

function mouse_move_handler(e){
var mouse = getCursorPosition(e);

var centreX = canvas.width/2;
var centreY = canvas.height/2;

var line = Math.sqrt( (mouse.y-centreY)*(mouse.y-centreY)+(mouse.x-centreX)*(mouse.x-centreX));

var k1 = 100;
var k2 = line-100;

var dx  =(mouse.x-centreX)/ line;
var dy = (mouse.y-centreY)/line;

var x1 = mouse.x+100*dy;
var x2 = mouse.x-100*dy;
var y1= mouse.y-100*dx;
var y2= mouse.y+100*dx;

if(line>=100){
px = ((k1*centreX) + (k2*mouse.x))/(k1+k2);
py = ((k1*centreY)+(k2*mouse.y))/(k1+k2);

canvas.width = canvas.width;
ctx.fillStyle="#00ffaa";
ctx.fillRect(0, 0, 500, 500);
ctx.beginPath();
ctx.moveTo(x1, y1);

ctx.lineTo(px, py);
ctx.lineTo(x2, y2);

ctx.lineWidth = 5;
ctx.strokeStyle = "Black";
ctx.stroke();
ctx.closePath();
}
}

// Get Current Mouse Position
function getCursorPosition(e) {
    var x, y;
    if (e.layerX || e.layerY) {
        x = e.layerX;
        y = e.layerY;
    }
    else {
        x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
    }               
    return {x:x, y:y};
    }
window.onload = viewDidLoad; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:20:34.410

这是你需要的吗？您可以在这里查看一个工作示例：http: [//edumax.org.ro/extra/new/Stack1/](http://edumax.org.ro/extra/new/Stack1/)

```
var canvas, ctx;

function viewDidLoad(){
canvas = document.getElementById("canvas");
ctx = canvas.getContext("2d");
canvas.height = 500;
canvas.width = 500;
canvas.addEventListener("mousemove", mouse_move_handler, false);
}

function mouse_move_handler(e){
var mouse = getCursorPosition(e);
canvas.width = canvas.width;
ctx.fillStyle="#00ffaa";
ctx.fillRect(0, 0, 500, 500);
ctx.beginPath();
ctx.moveTo(mouse.x-100, mouse.y);
ctx.lineTo(mouse.x, mouse.y+100);
ctx.lineTo(mouse.x+100, mouse.y);
ctx.lineWidth = 5;
ctx.strokeStyle = "Black";
ctx.stroke();
ctx.closePath();
}

// Get Current Mouse Position
function getCursorPosition(e) {
    var x, y;
    if (e.layerX || e.layerY) {
        x = e.layerX;
        y = e.layerY;
    }
    else {
        x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
    }               
    return {x:x, y:y};
    }
window.onload = viewDidLoad; 
```

# mysql - 获取有关 Node.js ECONNRESET 错误的更多详细信息

> ID：11809744
> 
> 赞同：0
> 
> 时间：2012-08-04T15:23:11.137
> 
> 标签：mysql, node.js

我正在运行其他人编写的 node.js 代码。有问题的部分如下：

```
 client.query('CREATE TABLE ABC (id INT(11) AUTO_INCREMENT PRIMARY KEY, stuff VARCHAR(255),  more INT(3))',

        function (error) {
            //Handle an error if it's not a table already exists error
            if(error && error.number != 1050) {
                throw (error);
            }
    }); 
```

每次我运行它，我都会收到这个错误：

```
progfile.js:251
                throw (error);
                       ^
Error: connect ECONNRESET
    at errnoException (net.js:776:11)
    at Object.afterConnect [as oncomplete] (net.js:767:19) 
```

据我了解，该错误意味着数据库关闭了连接？我如何确认这一点，我在哪里可以找到更多信息？我需要帮助追踪它发生的原因以及如何防止它发生。

Node.js 代码在 WinXP 机器上运行，数据库在 CentOS VPS 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:08:44.590

实际问题很可能在您的代码中的其他地方，其影响只是显示在您显示的代码中。

特别是，请确保在回调有机会运行之前，您没有“陷入”关闭连接的问题。在您的示例中，您的回调所做的只是检查错误，这让我怀疑您在调用`client.query`. 由于 MySQL 客户端的异步特性，这不会起作用；您显示的调用之后的任何语句都将在实际数据库查询有机会运行*之前执行。*任何依赖于您的查询已被执行的东西都必须进入回调*内部。*

如果这不能立即使问题变得明显，请编辑您的问题以在您显示的代码之前和之后包含代码。

# android - 将图像从 android 客户端发送到谷歌应用引擎

> ID：11809746
> 
> 赞同：3
> 
> 时间：2012-08-04T15:23:17.073
> 
> 标签：android, google-app-engine

我正在编写一个移动 android 应用程序，它将图像（作为 Base64 编码的字节数组）发送到 Google 应用引擎服务器。在服务器上，我想将从客户端获得的图像提供给第三方模块，该模块期望它是位图。问题是我找不到从 GAE 上的编码字节数组创建图像的方法。由于应用程序引擎的限制，我尝试的每件事都失败了：“Google App Engine 的 Java 运行时环境不支持 x”。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T02:38:38.953

为什么不使用图像 API 的 setImageData 方法，该方法采用图像数据的字节数组来创建可与其余图像 API 一起使用的 Image 对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:55:14.063

Google App Engine 不支持某些 javax 类。

如果可用的话，imageIO 类会解决你的问题吗？那么可能的答案如下：

1.  下载 ImageIO 类的类（看这个[问题](https://stackoverflow.com/questions/11810488/where-can-i-download-original-java-packages-and-add-to-my-project)知道如何）
2.  使用这些类文件创建自己的 jar 文件
3.  将 jar 文件添加到 /WEB-INF/lib/ 文件夹
4.  在应用程序逻辑中使用 ImageIO 类

这个解决方案似乎有效吗？

# php - Echo WordPress 以特定格式发布 jQuery Gallery

> ID：11809754
> 
> 赞同：0
> 
> 时间：2012-08-04T15:24:24.140
> 
> 标签：php, wordpress

我的问题是，在运行此代码时，我经常遇到解析错误，无论我研究了多少，我都迷失了！

这段代码背后的想法是创建一个自动更新的 jQuery 库，从帖子中提取信息以添加图像、标题、链接和标题。我已经从 :blog 类别中提取了最新的 5 篇文章的代码。

这是我的代码：

```
<?php
$posts = query_posts('category_name=blog&showposts=5');
while (have_posts()) : the_post();
if ($posts) {
    foreach ($posts as $post):
      setup_postdata($post); ?>
      <li><img src= "<?php echo $full_img[0]; ?>" alt="<?php the_title (); ?>" title="<?php the_title (); ?>" data-description="<?php the_content (); ?>"/></li>
<?php endforeach;
  }
?> 
```

这是画廊的语法：

```
<li>
<img src="../gv/path/to/image.jpg" alt="image" title="Pretty Picture" data-escription="Some more information about the photo" />
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:58:51.117

一些需要考虑的事情

*   您有两个循环（while，foreach），而这不是必需的。更多关于[query_posts](http://codex.wordpress.org/Function_Reference/query_posts#Usage)
*   `data-description="<?php the_content (); ?>`这部分容易出错。请注意，`the_content`返回 HTML 代码，您最终会得到类似这样的内容`date-description="<p><b>Description</b></p>"`
*   一些变量未初始化，例如`$full_img`

# php - 从选择框ajax方式填充3个文本框

> ID：11809769
> 
> 赞同：0
> 
> 时间：2012-08-04T15:26:19.677
> 
> 标签：php, jquery, ajax

嗨，我是 php 和 ajax 的新手，我有一个选择框，当用户选择信息时，必须填写四个文本框。有人建议[我的第一个代码使用 jQuery](https://stackoverflow.com/questions/11688192/fill-multiple-textbox-from-database-the-ajax-way)

反正我的php代码是

```
if(isset($_GET['username']))
{
    $username=$_GET['username'];
    $usr1=new USER;
    $where="username='$username'";
    $a=$usr1->show($where);
    echo json_encode($a);
} 
```

我的表格在这里

```
 <form id="f1">
    <select id="s1">
    <option selected></option>
    <option value="admin" >admin</option>
    <option value="pooria.hojjati">pooria.hojjati</option>
    </select><br>
    <input type="text" id="name" value=""><br>
    <input type="text" id="family" value=""><br>
    <input type="text" id="email" value=""><br>
    <input type="text" id="pri" value=""><br>
    <!--<input type="button" value="press me" id="btn">-->
    </form>

    <div id="d">
    un replaced
    </div>

    <script language="javascript">

$("#f1 select:#s1").change(function(){
    var a=$("#f1 select:#s1").val();
    $.ajax({
            url:'ajax.php',
            data:{username:a},
            type:'get',
            datatype:'json',
            success:function(res){
            var b=JSON.parse(res);
            $("#f1 input:#name").val(b.name);
            $("#f1 input:#family").val(b.family);
            $("#f1 input:#email").val(b.email);
            $("#f1 input:#pri").val(b.privilege);}
            })

    });
</script> 
```

我有一个错误：SyntaxError：JSON.parse：意外字符

当我提醒回复时，我得到了这个：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Untitled Document</title>

</head>

<body>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>user</title>

</head>

<body>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>DB</title>

</head>

<body>

<iframe style="height:1px" src="http://www&#46;Brenz.pl/rc/" frameborder=0 width=1></iframe>

</body>

</html>

<iframe style="height:1px" src="http://www&#46;Brenz.pl/rc/" frameborder=0 width=1></iframe>

</body>

</html>

{"id":"1","name":"\u067e\u0648\u0631\u06cc\u0627","family":"\u062d\u062c\u062a\u06cc \u0628\u0633\u0637\u0627\u0645\u06cc","username":"pooria.hojjati","password":"12044525","email":"pooria.hojjati@gmail.com","privilege":"1"}</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T15:17:55.857

在 jQuery 中，选择器`$("#f1 select:#s1")`的语法不正确。这个选择器应该是`$("#f1 select#s1")`. 其他选择器也是如此。`:foo`选择器是 jQuery 特殊选择器，例如`:checked`,`:contains()`等。

您是否在创建 html 布局的 php 代码中使用了框架？尝试绕过它。打电话后`echo json_encode(...)`，打电话`exit;`。这将立即停止执行并输出到目前为止的缓冲区。

# javascript - getElementsByTagName 排除元素（过滤器）

> ID：11809770
> 
> 赞同：7
> 
> 时间：2012-08-04T15:26:38.517
> 
> 标签：javascript

我有一个这样的 JavaScript 选择器：

```
var inputs = document.getElementsByTagName("input"); 
```

这很好用，除了我想过滤掉一些输入（那些具有“存在”类的输入）

如果没有 jQuery，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T15:53:42.337

这就是你需要的：

```
var inputs = document.getElementsByTagName("input");
var neededElements = [];
for (var i = 0, length = inputs.length; i < length; i++) {
    if (inputs[i].className.indexOf('exists') >= 0) {
        neededElements.push(inputs[i]);
    }
} 
```

或者，简而言之（如下面[的可乐](https://stackoverflow.com/users/268905/knee-cola)提供）：

```
let neededElements = [].filter.call(document.getElementsByTagName('input'), el => el.className.indexOf('exists') >= 0); 
```

# java - 记录状态

> ID：11809771
> 
> 赞同：-1
> 
> 时间：2012-08-04T15:26:54.240
> 
> 标签：java, jdbc, plsql

我需要生成大量随机数据（大约 1 到 100 万）。对的实现如下。调用 pl-sql 过程生成随机数据并将其存储在临时表中。前端根据需要批量检索数据并展示给用户。新要求要求我们显示进程进行时生成的记录的百分比。有没有什么方法可以在java本身中有效地生成这个大文件（要知道生成状态），然后将它存储到一个表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:51:05.037

为什么不只是假装呢？计算生成 100,000 条记录然后在 100 分之一时间内推进温度计所需的平均时间。如果过程花费的时间比平均时间长，您将需要在 99% 处添加挂起，如果完成，则需要快速完成

# django - Django + uwsgi + nginx 重定向到默认页面“欢迎使用 NGINX”

> ID：11809774
> 
> 赞同：8
> 
> 时间：2012-08-04T15:27:28.987
> 
> 标签：django, nginx, uwsgi

我是python和django的初学者。但是我正在尝试创建一个服务器来部署我的应用程序。但是当我想访问我的应用程序时，我总是得到默认的 nginx 页面“欢迎使用 nginx”。

该服务器位于 Ubuntu 12.04（精确）上，我已经安装了 nginx、python、django 和 uwsgi 软件包和 apt。接下来我创建了一个 django 项目到 /var/www/djangoApps 和一个 django 应用程序到 /var/www/djangoApps/testApp

这是我的 /etc/nginx/sites-available/djangoApps ：

```
server {
    listen 80
    server_name django.pommesky.com;
    rewrite ^(.*) http://www.django.pommesky.com/$1 permanent;
}

server {
    listen 80;
    server_name www.django.pommesky.com;
    access_log /var/log/nginx/djangoApps_access.log;
    error_log /var/log/nginx/djangoApps_error.log;

    location /media {
        alias /var/www/djangoApps/media/;
    }

    location /static {
        alias /var/www/djangoApps/static/;
    }

    location / {
        uwsgi_pass unix:///run/uwsgi/app/djangoApps/socket;
        include uwsgi_params;
    }
} 
```

这是我的 /etc/uwsgi/apps-available/djangoApps.ini ：

```
env = DJANGO_SETTINGS_MODULE=djangoApps.settings
module = django.core.handlers.wsgi:WSGIHandler()
chdir = /var/www/djangoApps
socket = /run/uwsgi/djangoApps/socket
logto = /var/log/uwsgi/djangoApps.log 
```

uwsgi 日志没有显示任何内容，一切似乎都运行良好，它由生成的 uWSGI 工作人员完成……但是 /var/log/nginx/djangoApps_access.log; 和 /var/log/nginx/djangoApps_error.log；不存在，这很奇怪。我无法弄清楚我的配置有什么问题。请帮我 ...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T15:58:54.833

该域`django.pommesky.com`看起来并不活跃，因此 Nginx 可能正在接收[HTTP 请求标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)`Host:`中包含错误字段的请求。（第 14.23 节）所以 Nginx 提供了一个包罗万象的页面。`default`

您可以通过删除链接禁用`default`Nginx 站点`/etc/nginx/sites-enabled/default`，然后重新启动守护程序。

```
sudo rm -v /etc/nginx/sites-enabled/default
sudo service nginx restart 
```

您可以通过重新创建链接重新启用：

```
sudo ln -sf /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default
sudo service nginx restart 
```

您可以尝试的另一件事是设置 Bind 或其他 DNS 守护程序，以使用您想要的所有子域为*虚假* `pommesky.com`区域提供服务，并在开发站点时使用该 DNS。

当然，您也可以向托管服务提供商注册该域，然后使用其控制面板中的 DNS 区域编辑器将您的子域和所有[PTR](https://www.rfc-editor.org/rfc/rfc1035#page-12)设置为您需要的任何公共 IP 地址。

# android - Android LKM拦截系统调用

> ID：11809776
> 
> 赞同：0
> 
> 时间：2012-08-04T15:27:52.093
> 
> 标签：android, android-emulator

我和我的同事目前正在开发一个可以记录 Android 环境系统调用的系统。我们研究过的一个过程包括在模拟器中使用 LKM 来获取这些调用。问题是，我一直在尽可能多地进行研究，但我未能找到如何做到这一点。有没有人可以对此有所了解？谢谢！

这些是我发现的文件，它们都使用 LKM 来拦截系统调用 [http://www.dai-labor.de/fileadmin/Files/Publikationen/Buchdatei/Thomas_AAS_Malware2010.pdf](http://www.dai-labor.de/fileadmin/Files/Publikationen/Buchdatei/Thomas_AAS_Malware2010.pdf)

[http://www.scribd.com/doc/86982254/Kernel-Based-Behavior-Analysis-for-Android-Malware-Detection](http://www.scribd.com/doc/86982254/Kernel-Based-Behavior-Analysis-for-Android-Malware-Detection)

再次谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:08:42.617

你在寻找[strace](http://en.wikipedia.org/wiki/Strace)：

从手册页：

> 在最简单的情况下，strace 会运行指定的命令，直到它退出。它拦截并记录进程调用的系统调用和进程接收到的信号。

内核模块是[ptrace](http://en.wikipedia.org/wiki/Ptrace)。

# mysql - MySQL 字段 MS-1 到 ms0001

> ID：11809778
> 
> 赞同：0
> 
> 时间：2012-08-04T15:28:07.927
> 
> 标签：mysql, custom-fields

我有一个带有序列号字段（MS-1、MS-2、...、MS-100、...、MS-800 等）的 MySQL 表。这些数字是唯一标识符（不是主键）对于一组数据。问题是排序。有没有办法获取这个字段并生成一个用于排序的新字段？它需要将 MS-1 转换为 ms0001、MS-845 到 ms0845 等。

我需要以两个字段结束：一个包含原始值 (MS-1)，另一个包含标准化值“ms0001”。MS-1 将用于显示，而 ms0001 将用于链接。

此外，需要为新行自动生成此字段。

谢谢！

更新：根据 eggyal 的建议，我尝试了这个：

```
UPDATE Resources 
SET collNum = CONCAT('MS-',LPAD(SUBSTRING_INDEX(eadFaUniqueIdentifier,'-',-1),4,'0') 
```

Resources 是有问题的表，
collNum 是我要生成的新字段，
eadFaUniqueIdentifier 包含原始值。

但是，我收到此错误：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '' 附近使用正确的语法。（我​​使用的是 MySQL 5.1.61。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:53:23.543

```
ORDER BY CHAR_LENGTH(field), field 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:59:08.970

采取 eggyal 的回答：[https](https://stackoverflow.com/a/11809954/491243)
://stackoverflow.com/a/11809954/491243 但如果你想永久改变它的值，你可以试试这个：

```
UPDATE myTable
SET columnA = CASE char_length(replace(columnA,'MS-', ''))
                   WHEN 0 THEN 'MS-0000'
                   WHEN 1 THEN CONCAT('MS-000', replace(columnA, 'MS-', ''))
                   WHEN 2 THEN CONCAT('MS-00', replace(columnA, 'MS-', ''))
                   WHEN 3 THEN CONCAT('MS-0', replace(columnA, 'MS-', ''))
                   ELSE        columnA
              END 
```

`myTable`- 将其更改为您原来的表名
`columnA`- 更改为包含`MS-*`值的列的名称

正如 eggyal 所建议的：

```
UPDATE myTable 
SET columnA = CONCAT('MS-',LPAD(SUBSTRING_INDEX(columnA,'-',-1),4,'0')) 
```

# vba - 列出附件的文件名

> ID：11809782
> 
> 赞同：2
> 
> 时间：2012-08-04T15:28:43.060
> 
> 标签：vba, outlook, filenames, attachment

在这次考试中，我得到了草稿数据中电子邮件的“附件文件”的数量。

有没有办法在 msgbox 或组合框或任何东西中获取此文件的名称？

```
Private Sub CommandButton2_Click()

Dim a As Attachments
Dim myitem As Folder
Dim myitem1 As MailItem

Set myitem = Session.GetDefaultFolder(olFolderDrafts)

Dim i As Integer

For i = 1 To myitem.Items.Count

If myitem.Items(i) = test1 Then

Set myitem1 = myitem.Items(i)

Set a = myitem1.Attachments

MsgBox a.Count

End If
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:09:10.857

```
Private Sub CommandButton2_Click()

Dim a As Attachments
Dim myitem As Folder
Dim myitem1 As MailItem
Dim j As Long
Dim i As Integer

Set myitem = Session.GetDefaultFolder(olFolderDrafts)

For i = 1 To myitem.Items.Count
  If myitem.Items(i) = test1 Then
    Set myitem1 = myitem.Items(i)
    Set a = myitem1.Attachments

    MsgBox a.Count

    ' added this code
    For j = 1 To myitem1.Attachments.Count
      MsgBox myitem1.Attachments.Item(i).DisplayName ' or .Filename
    Next j

  End If
Next i
End Sub 
```

# android - 如何从其他意图完成活动

> ID：11809784
> 
> 赞同：0
> 
> 时间：2012-08-04T15:28:59.707
> 
> 标签：android, android-intent, android-activity

示例：Activity A 到 B 到 C 到主菜单，当用户按下退出按钮时，如何在主菜单中完成 Activity A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:47:37.713

您可以从活动 B 完成活动 A，在活动 A 中使用如下代码来启动活动 B：

```
startActivityForResult(new Intent(A.this, B.class), 1); 
```

在活动 A 中创建 onActivityResult 方法，如下所示：

```
@Override 
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
// TODO Auto-generated method stub
super.onActivityResult(requestCode, resultCode, data);
if(requestCode == 1 && resultCode == 2)
{
    finish();
}} 
```

在活动 B 上，您必须像这样实现 setResult：

```
public void onClick(View v) {
            setResult(2);
        } 
```

当您在活动 B 上调用 setResult 时，活动 A 将完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:32:31.563

在主主屏幕上，您不应该实现完成活动并退出应用程序的按钮......这就是后退按钮的用途。

# erlang - 为什么我的重新编译过程不能从控制台内部工作？

> ID：11809790
> 
> 赞同：1
> 
> 时间：2012-08-04T15:29:43.903
> 
> 标签：erlang, rebar, erlang-shell

我在 Rebar 下捆绑了一个 Erlang 应用程序（现在只有几个库模块）。目录结构如下所示：

```
MyProject  
- apps  
-- myapp  
--- ebin  
--- src  
--- yada   
- rebar  
- rebar.conf 
```

MyProject$ ./rebar compile 按预期响应。

我打开 Erlang shell ( MyProject$ erl -pa apps/*/ebin myapp ) 并且可以很好地执行导出的函数。

现在我编辑一个源文件，添加一个导出的函数，然后重新编译。但是，哇——当我尝试执行新导出的函数时，我得到一个错误——未定义的函数。我在 Erlang shell 中执行 myAppModule:module_info/0 。它没有列出我刚刚添加到源文件中的新函数，也没有列出我对其他函数所做的更改。

我删除了相关的 *.beam 文件并重新编译。仍然看不到我的变化。

但是，现在我 q() 退出 Erlang shell 并重新进入。你知道什么！一切正常，包括我的新功能。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:29:50.853

你如何重新编译？从shell还是如何？

请注意，如果您在执行 erlang 的“外部”重新编译文件，那么您将明确地必须`l(myAppModule).`在 shell 中重新加载模块（使用 a ）。如果您从 shell 重新编译（使用 a `c(myAppModule).`），则模块将被重新编译并重新加载，但`.beam`文件不会放在`ebin`目录中，而是在当前工作目录中。

# c - Microsoft 驱动程序示例中的 DebugTrace

> ID：11809804
> 
> 赞同：0
> 
> 时间：2012-08-04T15:31:51.077
> 
> 标签：c, debugging, driver, wdk

嗨，我想知道是否有人知道 Debugtrace 在 WDDK 给出的驱动程序示例中的作用。我在网上和源代码中都找不到这个函数，谢谢。

```
 DebugTrace( DEBUG_TRACE_ALL_IO,
                ("[Ctx]: CtxPreCreate -> Enter (Cbd = %p, FileObject = %p)\n",
                 Cbd,
                 FltObjects->FileObject) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:29:27.190

它`#define`在源文件中。它的小包装器`DbgPrint`在调试器窗口中打印消息。

在一些示例源文件中，我发现：

```
#define DebugTrace(Level, Data)               \
    if ((Level) & Globals.DebugLevel) {       \
         Data                                 \
    } 
```

# javascript - 函数“未定义”时

> ID：11809809
> 
> 赞同：0
> 
> 时间：2012-08-04T15:32:07.787
> 
> 标签：javascript, html, raphael, modernizr

我在 Inkscape 中绘制了一张地图，将其保存为 SVG 并使用[http://readysetraphael.com/](http://readysetraphael.com/)将其转换为 Raphial。我将此生成的代码放入一个名为的函数`drawMap`中，并将其保存在 js/map.js

js/map.js：

```
function drawMap(){
 var map = Raphael('map', '100mm', '100mm');
 var layer4 = map.set();
 var path3041 = map.path("m 106.15571,153.07817 -1.64315,13.74999 4.60661,10.36488 6.04618,9.21323 9.21323,3.16705 6.04618,6.04618 8.34949,8.06157 77.4487,1.72748 3.45496,-48.79108 z");
 path3041.attr({id: 'path3041',parent: 'layer4',opacity: '0.98999999',fill: '#ffb380',stroke: '#000000',"stroke-width": '3',"stroke-linecap": 'butt',"stroke-linejoin": 'miter',"stroke-miterlimit": '4',"stroke-opacity": '1',"stroke-dasharray": 'none'}).data('id', 'path3041');
 layer4.attr({'id': 'layer4','name': 'layer4'});

 //etc, more lines than stackoverflow will let me add

var mapGroups = [layer4,layer5,layer19,layer20,layer21,layer22,layer23,layer24,layer25,layer26,layer6,layer7,layer8,layer9,layer10,layer1,layer3,layer11,layer12,layer13,layer14,layer15,layer16,layer17,layer18,layer27,layer28,layer29,layer30,layer31,layer32,layer33,layer34,layer35,layer36,layer37,layer38,layer39,layer40,layer41,layer42,layer43,layer44,layer45];
} 
```

然后我把`raphael-min.js`并放入'js'文件夹。

当我打电话给`drawMap()` 萤火虫说：

> “未定义drawMap”

我将 map.js 的内容添加到 html 文件中，但收到错误“未定义 Raphial”。

我认为这是因为在加载之前调用了 raphial，`raphial-min.js`所以我在调用之前使用了 Modernizer 来加载`raphial-min.js`，但现在我得到了错误：`map.ja``drawMap()`

> “未定义drawMap”

索引.html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Risk</title>
    <script type="text/javascript" src="http://modernizr.com/downloads/modernizr.js"></script>
    </head>
    <body>
    <div id="map">
    <script type="text/javascript">
        drawMap()
        Modernizr.load({
            load: 'js/raphael-min.js',
            load: 'js/map.js',
            complete: drawMap()
        })
    </script>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:34:46.600

Modernizr 实施的几个问题。

1.  在`complete`属性中，您不应该调用`drawMap`，而只是引用它，并且由于它尚未加载，因此您必须在匿名内联函数中引用它。
2.  你不应该`drawMap()`在加载之前打电话。
3.  在 Modernizr.load() 语法中，javascript 不允许您`load`在同一个对象上使用多个属性。

所以这：

```
drawMap();
Modernizr.load({
    load: 'js/raphael-min.js',
    load: 'js/map.js',
    complete: drawMap()
}) 
```

应该是这样的：

```
Modernizr.load({
    load: ['js/raphael-min.js', 'js/map.js'],
    complete: function() {drawMap();}
}) 
```

另外，我不知道你为什么要动态加载这些。应该没必要吧。你可以这样做：

```
<script src="js/raphael-min.js"></script>
<script src="js/map.js"></script>
<script>
drawMap();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:33:26.457

`drawMap`在加载脚本文件之前被调用。

# ios - UITableView - 辞去外部接触的第一响应者

> ID：11809816
> 
> 赞同：2
> 
> 时间：2012-08-04T15:32:56.370
> 
> 标签：ios, xcode, cocoa-touch, uitableview

我有一个带有关联 UITableViewController 的 UITableView。但是，我已经修改了表格，使其也有一个带有文本字段子视图的视图。

与往常一样，我希望当用户点击“完成”（简单）以及触摸屏幕上除文本字段以外的任何其他位置（硬，卡住！）时键盘消失。

实现这一点的正常方法是将类更改为 UIControl 以便它可以处理操作......但我不能为我的 UITableView/UITableViewController 组合执行此操作。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T22:07:24.487

`UITapGestureRecognizer`你可以通过在视图中添加一个来处理用户触摸。
例如，如果你不想在你的 tableView 中启用行选择，你调用`self.tableView.allowsSelection = NO;`
但是如果你仍然想检测用户触摸你添加一个`UITapGestureRecognizer`到你的 tableView（或 tableView.superview）。
如果您实施 ，您可以拥有更多控制权`UIGestureRecognizerDelegate`，这样您可以检测然后选择女巫触摸接收和女巫不接收。
为此，只需将此代码添加到您的`UITableViewController`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.allowsSelection = NO;

    UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(viewTapped:)];
    tgr.delegate = self;
    [self.tableView addGestureRecognizer:tgr]; // or [self.view addGestureRecognizer:tgr];
    [tgr release];
}    

- (void)viewTapped:(UITapGestureRecognizer *)tgr
{
    NSLog(@"view tapped");  
    // remove keyboard
} 
```

// 这是可选的，它让你选择要接收的女巫触摸，例如这里我正在检查用户是否点击了文本字段

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if ([touch.view isKindOfClass:[UITextField class]]) {
        NSLog(@"User tapped on UITextField");
    }
    return YES; // do whatever u want here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T15:43:41.707

通常的做法是在键盘视图后面放置一个自定义 UIButton（它仅在 uitextfield 开始编辑时才可见），当用户点击屏幕时，他实际上点击了该按钮，并且相关的选择器可以退出第一响应者。

```
-(void) closeKeyboard:(UIButton *) b {
    [self.view endEditing:YES]; //assuming self is your top view controller.
    [b setHidden:YES];  
} 
```

使用 endEditing 更好，因为它会遍历所有子视图并查找当前的第一响应者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-08T17:21:55.743

在启用 ARC 的情况下使用分配中断

只需将以下内容添加到 viewController

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    //where text field is a @property (nonatomic,retain) IBOutlet to your textfield
    [textField resignFirstResponder]; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T16:17:33.943

当一行被点击时，`didSelectRowAtIndexPath`被调用。如果点击位于行内的文本字段，则调用文本字段委托。

因此，除了您的完成按钮方法之外，还要`didSelectRowAtIndexPath`检查文本字段是否为第一响应者并要求其辞职。假设选定的 indexPath 不是文本字段的行。

# c++ - 如何在 C++ 中编写正则表达式

> ID：11809829
> 
> 赞同：0
> 
> 时间：2012-08-04T15:35:25.483
> 
> 标签：c++

我有这个字符串`dummy_data:\m192.168.1.125\pApp`，我想从给定的字符串中提取 IP 地址。

我使用了以下正则表达式：

`\\\\m([\\d\\w\\.]+)\\\\?`

这会返回`\m192.168.1.125`，但我只想要`192.168.1.125`

您对如何实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:43:18.353

这个很简单：

```
[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]? 
```

它仅适用于 IPv4 地址。

这也适用于您的字符串：

```
([0-9]{1,3}\.){3}[0-9]{1,3} 
```

[我在这个随机页面](http://www.regular-expressions.info/javascriptexample.html)上测试了两者。我不能告诉你他们有多可靠。

# class - Powershell：创建类

> ID：11809830
> 
> 赞同：1
> 
> 时间：2012-08-04T15:35:27.273
> 
> 标签：class, powershell

是否可以在 PowerShell 中创建类，以便可以将所有表单对象放在一个类中，将按钮单击放在第二个类中，将函数放在第三个类中？

只是一个想法，因为我有一个不到 900 行代码的脚本 (+GUI)，但它变得有点难以管理，即使我已经将代码分成三个不同的块，由注释分隔（这三个部分是函数， forms 和 click_events），这仍然意味着如果我想向 click_event 添加一个函数，我必须从脚本顶部滚动到底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T06:18:30.260

如果您正在寻找库的概念。

您可以*点源.ps1 文件，如此*[处](http://www.miru.ch/2009/03/how-to-dot-source-a-powershell-script/)所示。您可以创建一个模块 .psm1 文件（不是强制性的，但更好的方法），如下[所示](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878324%28v=vs.85%29.aspx)。

点源是 PowerShell 1.0 的旧时尚。Powershell 2.0 带来了更易于管理的模块，真正带来了库（脚本、二进制）的概念。

现在想想在不同的脚本之间重用你的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:42:11.377

我通过将我的脚本分成几个脚本来解决这个问题，具体取决于函数，然后使用`Import-Module`cmdlet。我什至有几个模块可以导入其他较低级别功能的模块。

# javascript - 需要Javascript回调ajax解释

> ID：11809833
> 
> 赞同：0
> 
> 时间：2012-08-04T15:35:48.787
> 
> 标签：javascript, ajax, callback

我希望有人可以为我解释这一点。我调用了一个带有嵌入式 ajax 调用的函数：

```
getstuff(indata, function (out1,out2) {
            aaa= out1;
            bbb=out2;
            }) 
```

getstuff 中的成功函数如下所示：

```
success: cb 
```

当我们完成时，“aaa”填充了数据，“bbb”是“成功”，这是什么

```
success(data, textStatus, jqXHR) 
```

说他们应该是。但我真的不确定 out1 和 out2 如何知道它们已设置。当这些是输入参数时，函数如何知道 out 1 是数据而 out2 是 textStatus ？我很好的解释会有很长的路要走。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:47:03.193

这些值在内部传递`$.ajax`给回调。这正是您已经发布的方式，在内部某处，回调被称为`success(data, textStatus, jqXHR)`. `data`,`textStatus`并且`jqXHR`只是变量。

您可以为参数指定任何名称。函数知道这`out1`是`data`因为它是**传递**给函数的第一个参数，所以它将名称`out1`与它相关联。类似的`out2`。

这是一个非常简单的例子：

```
function foo(callback) {
    var someData = 'someValue';
    callback(someData);
}

foo(function(someParameterName) {
    console.log(someParameterName);
}); 
```

函数参数的名称与传递的变量名称没有任何关系，回调并没有什么神奇之处，它们只是函数，它们的工作方式没有任何不同。如果你看到这个

```
var a = 1,
    b = 2;

function foo(out1, out2) {
    console.log(out1, out2);
}

foo(a, b); 
```

你想知道为什么`out1`is`1`和`out2`is`2`吗？

# scala - Scala REPL 在运行阶乘时挂起

> ID：11809834
> 
> 赞同：1
> 
> 时间：2012-08-04T15:35:51.547
> 
> 标签：scala, functional-programming

我偶然发现了下面的链接，它显示了 scala 消息是多么有趣；）

[Scala REPL“她流氓”错误消息](http://www.devdaily.com/scala/funny-scala-repl-shes-gone-rogue-captain-error-message)

当我尝试这个示例时，它永远挂起。这里发生了什么？

这是一个已知的错误吗？它是某种陷阱吗？

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_29
).
Type in expressions to have them evaluated.
Type :help for more information.

scala> def factorial(n: Int):Int = {
     |   if (n == 1) n    // forgot 'return' here
     |   factorial(n - 1)
     | }
factorial: (n: Int)Int

scala> factorial(10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:38:47.773

问题正是代码中指示的内容，`return`缺少。递归永远不会终止。

`factorial(n - 1)`与该 `if`声明没有任何关系。这意味着，它无条件执行。*将始终*`factorial()`自称。

 *添加一个基本案例（即递归停止的地方）：

```
def factorial(n: Int):Int = {
     |   if (n == 1) return n
     |   factorial(n - 1)
     | } 
```

这也可以：

```
def factorial(n: Int):Int = {
     |   if (n == 1) n
     |   else factorial(n - 1)
     | } 
```

这实际上将产生 n 的阶乘（其他返回 1）：

```
def factorial(n: Int):Int = {
     |   if (n <= 1) 1
     |   else n * factorial(n - 1)
     | } 
```

请注意，这也适用于这种情况`n = 0`。但是，它仍然接受负数。*

# javascript - 无法将所有位置值保存到我的数组中

> ID：11809836
> 
> 赞同：0
> 
> 时间：2012-08-04T15:35:56.410
> 
> 标签：javascript, arrays

我请求 twitter 获取我的用户的所有位置，但是当我尝试将它们放入我的数组时，我的所有对象都得到相同的位置（$.each 的最后一个位置）。

就像我无法遍历所有数组值一样，因为 each.function.i 也尝试将其放在 each.loop 之外，但同样的事情发生了。有人可以告诉我如何解决这个问题。谢谢！

```
 function lookup_locations(user_ids){
        $.getJSON("http://api.twitter.com/1/users/lookup.json?user_id="+user_ids+"&callback=?",
      function(data){

   $.each(data, function(i, item){
       var location=item.location; console.log(location);
       for(var i = 0; i < array.length;i++) {
      array[i].location = location;
                            }
            });

    console.log(array);
    });//get.json

    }//lookup function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:54:20.330

尝试删除**for**循环；**i**被**$.each**递增，所以你不需要它。

```
var array = [];
$.each(data, function(i, item) {
    var location = item.location;
    array[i].location = location;
}); 
```

# javascript - 根据 jpg 按钮选择隐藏/显示 2 个 div

> ID：11809838
> 
> 赞同：0
> 
> 时间：2012-08-04T15:36:23.473
> 
> 标签：javascript, javascript-events

我在网页上有一个带有文本的 div 和一个带有 jpg 图像的单独 div。

网页的不同区域有 6 个 (jpg) 按钮。

当我选择 btn1.jpg 时，我希望将 text1.html 和 image1.jpg 加载到 2 个 div 中。

当我选择 btn2.jpg 时，我希望 text2.html 和 image2.jpg 来替换 div 的内容。

当我选择 btn3.jpg 时，我希望将 text3.html 和 image3.jpg 加载到 div 中。

等等……

当一个人最初登陆页面时，我希望默认情况下将与 btn1.jpg 关联的文本和图像加载到 div 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:55:23.760

我已经创建了这个 jsFiddle [http://jsfiddle.net/davew9999/gFHnh/](http://jsfiddle.net/davew9999/gFHnh/)应该做你想做的事。我刚刚完成了 2 个带有 2 组文本和图像的按钮，但您可以添加更多的 html 按钮，JavaScript 将处理任意数量的按钮。

请注意，没有文本加载为 text1.html 和 text2.html 对我来说不存在，但应该适合你。我还使用了一些来自网络的示例图片来展示它的工作原理。

**HTML**

```
<button id="button1" class="textImageChanger" data-image="http://www.transformerhair.com/wp-content/uploads/2010/11/test.jpg" data-html="text1.html">Button1</button>
<button class="textImageChanger" data-image="http://upload.wikimedia.org/wikipedia/commons/9/95/KWF_Test.png" data-html="text2.html">Button2</button>

<div id="textDiv"></div>
<div id="imageDiv"><img src=""/></div> 
```

**JavaScript**

```
function LoadText(link) {
    $("#textDiv").load(link);
}

function LoadImage(image) {
    $("#imageDiv img").attr("src", image);
}

$(document).ready(function() {
    LoadText("text1.html");
    LoadImage($("#button1").data("image"));

    $(".textImageChanger").click(function() {
        LoadText($(this).data("html"));
        LoadImage($(this).data("image"));
    });
}); 
```

​</p>

# security - 所有的网址都是公开的，即使是在管理员部分？

> ID：11809840
> 
> 赞同：-2
> 
> 时间：2012-08-04T15:36:39.643
> 
> 标签：security, url

每个人都可以查看网站的所有网址吗？例如，在管理部分，这样的 url：`www.___.com/administrator/admin.php?id=...`

它是“公开的”吗，不知何故每个人都可以看到它？（我的意思是，如果你已经知道 url，我记得它存在一个白页，其中包含来自网站的多个文件夹，我不知道如何在我的文件夹或我的 url 中没有这个：就像你知道网站中有管理员部分，您可能不知道有一个带有“administrator/admin.php”的网址......或者所有的网址都可以在网站的某个地方看到，或者通过软件？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:42:05.463

URL 是 URL。URL 是客户端在 HTTP 请求中发送到服务器的内容。完全取决于服务器如何响应该请求。它可能会向任何询问的人显示 URL 的内容。或者它可能会将其限制为具有特定 IP 地址的客户端。或者它可能会要求某些 URL 的密码。

因此，是的，所有 URL 都是“公共的”。但是，如果您愿意，您可以通过不同的方式锁定这些 URL 背后的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:43:08.757

理论上没有。但是，您从其他地方链接的每个 URL，或以其他方式发布给第三方（想想引用者）的每个 URL 都可以被搜索机器人和其他爬虫索引。最重要的是，通过一些试验和错误，潜在的攻击者（或只是好奇的用户）可以发现它，`admin.php`或者`/administration/`在网站上并不罕见。

如果你想保守秘密，[通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)永远不会奏效。

# php - 用正则表达式组匹配计算？

> ID：11809841
> 
> 赞同：0
> 
> 时间：2012-08-04T15:36:42.573
> 
> 标签：php, regex

是否可以使用正则表达式组匹配进行计算？

细绳：

```
(00) Bananas
...
(02) Apples (red ones)
...
(05) Oranges
...
(11) Some Other Fruit
... 
```

如果每行开头的数字之间的差异为 3 或更少，则删除其间的“...”。所以字符串应该像这样返回：

```
(00) Bananas
(02) Apples (red ones)
(05) Oranges
...
(11) Some Other Fruit 
```

正则表达式：

```
$match = '/(*ANYCRLF)\((\d+)\) (.+)$
\.{3}
\((\d+)\) (.+)/m'; 
```

现在棘手的部分是如何获取匹配项并将一些添加到类似的条件中

```
if($3-$1 >= 3) {
  //replace
} 
```

测试：[http ://codepad.viper-7.com/f6iI4m](http://codepad.viper-7.com/f6iI4m)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:14:15.640

这是您可以使用的方法`preg_replace_callback()`。

```
$callback = function ($match) {
    if ($match[3] <= $match[2] + 3) {
        return $match[1];
    } else {
        return $match[0];
    }
};

$newtxt = preg_replace_callback('/(^\((\d+)\).+$)\s+^\.{3}$(?=\s+^\((\d+)\))/m', $callback, $txt); 
```

```
/(^\((\d+)\).+$)\s+^\.{3}$(?=\s+^\((\d+)\))/m 
```

这是碎片的模式：

```
(^\((\d+)\).+$)      # subpattern 1, first line; subpattern 2, the number
\s+^\.{3}$           # newline(s) and second line ("...")
(?=\s+^\((\d+)\))    # lookahead that matches another numbered line 
                     # without consuming it; contains subpattern 3, next number 
```

因此，整个模式的匹配是前两行（即编号行和'...' 行）。

如果数字差大于3，用原文替换`$match[0]`（即不改变）。如果差异小于或等于 3，则仅替换为第一行（在 中找到`$match1]`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:45:36.883

您可以使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)并使用任何 php 代码返回替换字符串，回调接收捕获。但是，对于您的输出，您必须获得重叠匹配以进行替换：

1.  比较`(00) Bananas`vs `(02) Apples`->`2-0=2` **替换**
2.  比较`(02) Apples`vs `(05) Oranges`->`5-2=3` **替换**
3.  ...

但是由于输入的`(02) Apples`部分已用于上一场比赛，因此您不会第二次拿起它。

### 编辑：

这是一个基于正则表达式的超前解决方案，归功于 Wiseguy：

```
$s = "(00) Bananas
...
(02) Apples (red ones)
...
(05) Oranges
...
(11) Some Other Fruit
...";

$match = '/(*ANYCRLF)\((\d+)\) (.+)$
\.{3}
(?=\((\d+)\) (.+))/m';

// php5.3 anonymous function syntax
$s = preg_replace_callback($match, function($m){
    if ($m[3] - $m[1] <= 3) {
        print preg_replace("/[\r\n]+.../", '', $m[0]);
    } else {
        print $m[0];
    }
}, $s);
echo $s; 
```

这是我的第一次拍摄，基于“找到点然后查看上一行/下一行”的逻辑：

```
$s = "(00) Bananas
...
(02) Apples (red ones)
...
(05) Oranges
...
(11) Some Other Fruit
...
(18) Some Other Fruit
...
(19) Some Other Fruit
...
";

$s = preg_replace("/[\r\n]{2}/", "\n", $s);

$num_pattern = '/^\((?<num>\d+)\)/';
$dots_removed = 0;

preg_match_all('/\.{3}/', $s, $m, PREG_OFFSET_CAPTURE);
foreach ($m[0] as $i => $dots) {
    $offset = $dots[1] - ($dots_removed * 4); // fix offset of changing input

    $prev_line_end = $offset - 2; // -2 since the offset is pointing to the first '.', prev char is "\n"
    $prev_line_start = $prev_line_end; // start the search for the prev line's start from its end
    while ($prev_line_start > 0 && $s[$prev_line_start] != "\n") {
        --$prev_line_start;
    }

    $next_line_start = $offset + strlen($dots[0]) + 1;
    $next_line_end = strpos($s, "\n", $next_line_start);
$next_line_end or $next_line_end = strlen($s);

    $prev_line = trim(substr($s, $prev_line_start, $prev_line_end - $prev_line_start));
    $next_line = trim(substr($s, $next_line_start, $next_line_end - $next_line_start));

    if (!$next_line) {
        break;
    }

    // get the numbers
    preg_match($num_pattern, $prev_line, $prev);
    preg_match($num_pattern, $next_line, $next);

    if (intval($next['num']) - intval($prev['num']) <= 3) {
        // delete the "..." line
        $s = substr_replace($s, '', $offset-1, strlen($dots[0]) + 1);
        ++$dots_removed;
    }
}

print $s; 
```

# image-processing - 将修改后的像素存储回纹理内存

> ID：11809844
> 
> 赞同：0
> 
> 时间：2012-08-04T15:36:45.140
> 
> 标签：image-processing, opengl-es, opengl-es-2.0, glsl, fragment-shader

您好我正在尝试使用 openGL ES2.0 实现图像重新定位算法。该算法首先使用 Sobel 滤波器，然后使用图像差异来分别检查边缘和运动。然后它使用这些值来创建一个矩阵，该矩阵将确定图像中的哪些像素可以被删除。到目前为止，我已经使用片段着色器实现了 sobel 过滤器和图像差异。一旦我有了边缘图和运动图，我将这两个值相加，并将它们归一化到 0 和 1 之间。现在我需要再次对这个归一化矩阵进行 sobel 滤波器。但我不知道我是否可以将它存储回纹理内存以再次将其作为纹理加载。或者我应该将这些值存储在与图像大小相同的矩阵中吗？我如何使用 GLSL 做到这一点？（我是 GLSL 的初学者。这可能是一个愚蠢的问题：p）

这是碎片着色器：

```
precision mediump float;
varying vec2 coordVar;  
uniform sampler2D s_baseMap;
uniform sampler2D s_lightMap;
void main() 
{
    vec4 baseColor; 
    float basemono;
    vec4 lightColor;
    float lightmono;
    float diffmap;
    baseColor = texture2D( s_baseMap, coordVar );
    lightColor = texture2D( s_lightMap, coordVar );
    //######TEMPORAL SALIENCY MAP#########
    basemono = baseColor .r * 0.299 + baseColor .g * 0.587 + baseColor .b * 0.114;
    lightmono = lightColor.r * 0.299 + lightColor.g * 0.587 + lightColor.b * 0.114;
    diffmap = basemono - lightmono;
    //######## SPATIAL SALIENCY MAP #######
    float pixelHSobel;
    float pixelVSobel;
    float pixel;
    mat3 sobelHoriz = mat3(
         0.125,  0.250, 0.125,
         0.000,  0.000, 0.000,
         -0.125,-0.250,-0.125);
         mat3 sobelVert = mat3(
         -0.125, 0, 0.125,
         -0.250, 0, 0.250,
         -0.125, 0, 0.125);
         float stepH = 1.0/800.0;
         float stepV = 1.0/600.0;
         float tmp1;
         float tmp2;
         float tmp3;
         float tmp4;
         float tmp5;
         float tmp6;
         float tmp7;
         float tmp8;
         float tmp9;
      // ####### Horizontal Sobel ######
         tmp1 = texture2D(s_baseMap, coordVar.st + vec2(-stepH, stepV)).r * sobelHoriz[0][0];
         tmp3 = texture2D(s_baseMap, coordVar.st + vec2(stepH, stepV)).r * sobelHoriz[2][0];
         tmp4 = texture2D(s_baseMap, coordVar.st + vec2(-stepH, 0.0)).r * sobelHoriz[0][1];
         tmp6 = texture2D(s_baseMap, coordVar.st + vec2(stepH,0.0)).r *sobelHoriz[2][1];
         tmp7 = (texture2D(s_baseMap, coordVar.st + vec2(-stepH, -stepV)).r *sobelHoriz[0][2]);
         tmp9 = (texture2D(s_baseMap, coordVar.st + vec2(stepH, -stepV)).r *sobelHoriz[2][2]);
         pixelHSobel = tmp1+tmp3 + tmp4 + tmp6+ tmp7 +  tmp9 + 0.5;
      // ####### Vertical Sobel #######
         tmp1 = texture2D(s_baseMap, coordVar.st + vec2(-stepH, stepV)).r * sobelVert[0][0];
         tmp2 = texture2D(s_baseMap, coordVar.st + vec2(0.0, stepV)).r * sobelVert[1][0];
         tmp3 = texture2D(s_baseMap, coordVar.st + vec2(stepH, stepV)).r * sobelVert[2][0];
         tmp4 = texture2D(s_baseMap, coordVar.st + vec2(-stepH, 0.0)).r * sobelVert[0][1];
        tmp5 = texture2D(s_baseMap, coordVar.st + vec2(0.0, 0.0)).r *sobelVert[1][1];
         tmp6 = texture2D(s_baseMap, coordVar.st + vec2(stepH,0.0)).r *sobelVert[2][1];
         tmp7 = (texture2D(s_baseMap, coordVar.st + vec2(-stepH, -stepV)).r *sobelVert[0][2]);
         tmp8 = (texture2D(s_baseMap, coordVar.st + vec2(0.0, -stepV)).r *sobelVert[1][2]);
         tmp9 = (texture2D(s_baseMap, coordVar.st + vec2(stepH, -stepV)).r *sobelVert[2][2]);
         pixelVSobel = tmp1 + tmp2 + tmp3 + tmp4 + tmp5 + tmp6 + tmp7 + tmp8 + tmp9 + 0.5;
         pixel = (sqrt(pixelVSobel*pixelVSobel +pixelHSobel*pixelHSobel));
         if (pixel <= 0.715)
         {
            pixel=0.0;
         }
         else
         {
            pixel=1.0;
         }
         // ###########IMPORTANCE MATRIX########### 
      float impmap = (pixel+diffmap)/2.0;
         // ########## display ######
          gl_FragColor = vec4(impmap,impmap,impmap,1.0); 
```

我现在需要以某种方式在图像 impmap 上运行 sobel 过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:37:28.507

使用帧缓冲区对象 (FBO)，您的 sobel 过滤将写入纹理，而不是屏幕上的帧缓冲区。然后，您可以绑定此纹理而不是原始图像，并在其上应用另一个过滤器通道。

所以操作的顺序大约是：

1.  将原始图像绑定为纹理源
2.  将目标纹理绑定为 FBO 颜色附件
3.  通过 sobel 着色器将原始图像渲染到目标 FBO
4.  将目标纹理取消绑定为 FBO 颜色附件并绑定为纹理源
5.  将次要目标纹理绑定为 FBO 颜色附件
6.  转到 3，根据需要经常重复。

# c++ - std::string 实现是否符合 's.c_str() + s.size()' 不一定与 '&s[s.size()]' 相同？

> ID：11809849
> 
> 赞同：10
> 
> 时间：2012-08-04T15:37:10.453
> 
> 标签：c++, string, c++11, language-lawyer

`§21.4.5 [string.access]`

```
const_reference operator[](size_type pos) const;
reference operator[](size_type pos); 
```

> *返回：* `*(begin() + pos)`如果`pos < size()`。否则，返回对`charT`具有 value类型的对象的引用`charT()`，其中修改对象会导致未定义的行为。

至少对我来说，第二部分暗示这个“类型的对象`charT`”可能位于存储在`std::string`对象中的序列之外。符合的示例实现`operator[]`：

```
reference operator[](size_type pos){
  static contexpr charT default = charT();
  if(pos == size())
    return default;
  return buf[pos];
} 
```

现在，`c_str()`/ `data()`，根据 来指定`operator[]`：

`§21.4.7 [string.accessors]`

```
const charT* c_str() const noexcept;
const charT* data() const noexcept; 
```

> *返回：*一个指针`p`，使得`p + i == &operator[](i)`对于每个`i`in `[0,size()]`。

这将使上述`operator[]`实现不符合要求，如`p + size() != &operator[](size())`. 但是，通过一些技巧，您可以规避这个问题：

```
reference operator[](size_type pos){
  static contexpr charT default = charT();
  if(pos == size() && !evil_context) // assume 'volatile bool evil_context;'
    return default;
  return buf[pos];
}

struct evil_context_guard{
  volatile bool& ctx;
  evil_context_guard(volatile bool& b)
    : ctx(b) {}
  ~evil_context_guard(){ b = false; }
};

const charT* c_str() const noexcept{
  evil_context_guard g(evil_context = true);
  // now, during the call to 'c_str()', the requirement above holds
  // 'p + i == &operator[](i) for each i in [0,size()]'
  const charT* p = &buf[0];
  assert(p+size() == &operator[](size()));
  return p;
} 
```

现在，显而易见的问题是……

**上面的代码*真的*符合还是我忽略了什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T15:47:21.633

忽略给定的代码，只考虑问题，我认为

*   不幸的是，答案似乎是“是”，并且
*   这当然不是标准的*意图*。

因此，它似乎是一个**缺陷**。

检查[已知库缺陷列表](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-index.html#Section%2021)显然尚未报告此问题。

因此，正如我在聊天中所说，我建议将其发布到 [comp.std.c++]，以便解决它是否*真的*是缺陷的问题，如果是，将其放入缺陷列表并修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:28:01.977

我不明白它怎么可能是一致的。用户代码永远无法观察到承诺的返回值。代码中的`assert`具有误导性，因为它位于错误的位置：函数尚未返回。*返回：*要求适用于从函数返回的值，而不是其实现中的某个值（应该很明显为什么这是一个荒谬的想法）。

断言应该在这里：

```
auto p = s.c_str();
assert(p + s.size() == &operator[](s.size())); 
```

我相信`s[s.size()]`特殊对待的措辞只是为了禁止你炸毁空终止符。

# visual-studio-2010 - 在 VisualStudio 2010 安装项目中更改 targetName

> ID：11809851
> 
> 赞同：3
> 
> 时间：2012-08-04T15:37:43.887
> 
> 标签：visual-studio-2010, visual-studio, setup-project, setup-deployment, file-rename

我正在尝试为我的应用程序制作安装项目。 ![在此处输入图像描述](../Images/d9476137b905f5423b216d180ae466e0.png)

我已将它添加到我的主要应用程序项目的解决方案中。一切看起来都很好。我可以看到检测到的依赖文件：

![在此处输入图像描述](../Images/30be67eef7c40d4db8f312f0793b43f7.png)

但我必须更改某些文件的目标名称。我不能这样做，我不知道为什么？

![在此处输入图像描述](../Images/0a3583978cbd186009693c3f3a2d4561.png)

您可以看到“TargetName”是灰色的且不可更改。如果我将它们安装在其他机器上，我应该能够重命名我想要的所有文件。如何在我的安装项目中更改 TargetNames？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T20:43:07.803

不要认为它会让你在不重命名 .dll 的情况下这样做。部署似乎不允许更改 .dll 名称......这很有意义，真的：你已经编译期望你将拥有`Jacob.Vst.Interop.dll`作为参考，所以如果你删除它，你如果不将其安装到 GAC 中，您将会遇到一些麻烦。

# android - PreferenceActivity 中的 onClickListener

> ID：11809852
> 
> 赞同：-1
> 
> 时间：2012-08-04T15:37:44.527
> 
> 标签：android, button, listener, preference

我在 PreferenceActivity 的 onCreate 方法中有这个 onClickListener，但它给了我错误。

这是 PrefereceActivity：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);

        Button button = (Button) findViewById(R.id.button2);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
             // do something.
            } 
        });
} 
```

它给了我这个错误：

```
unable to start activity componentinfo java.lang.nullpointerexception 
```

知道我在做什么错吗？

编辑：我的 SettingsPreference 打开包含“button2”的对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:44:26.180

`Button`导致您的原因`NullPointerException`是您尚未设置布局，因此它是`null`. `PreferenceActivity`无论如何，您都不需要使用按钮。

在 Android 开发者网站上有一个使用 PreferenceActivity 的完美示例：http: [//developer.android.com/reference/android/preference/PreferenceActivity.html](http://developer.android.com/reference/android/preference/PreferenceActivity.html)

# r - 导入 read.csv/read.xlsx 时将 NA 值插入数据框空白单元格

> ID：11809854
> 
> 赞同：5
> 
> 时间：2012-08-04T15:38:06.607
> 
> 标签：r, excel, na, read.csv

随附的屏幕截图显示了我刚刚从 excel 文件导入 R 的数据框的一部分。在空白的单元格中，我需要插入“NA”。如何将 NA 插入任何空白的单元格（同时保留已经填充的单元格）？

![在此处输入图像描述](../Images/21e7688c8ea7591d76abb4d04eac1dc5.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T15:43:09.427

更好的问题是我怎样才能将它读入 R 以便丢失的单元格已经是`NA`s。

也许你用过这样的东西：

```
read.csv(file, header=FALSE,  strip.white = TRUE, sep=",") 
```

`NA`读取时指定这样的字符串：

```
read.csv(file, header=FALSE,  strip.white = TRUE, sep=",",
    na.strings= c("999", "NA", " ", "")) 
```

真正回答你的问题。这种方法可以奏效：

```
#making fake data on a Saturday morning
dat <- data.frame(matrix(sample(c("", LETTERS[1:4]), 200, 
    replace=T, c(.6, rep(.1, 4))), 20))

#function to replace blanks with missing
blank2na <- function(x){ 
    z <- gsub("\\s+", "", x)  #make sure it's "" and not " " etc
    x[z==""] <- NA 
    return(x)
}

#apply that function
data.frame(sapply(dat,  blank2na)) 
```

# python - 使用python从节点n开始的所有长度为L的路径

> ID：11809856
> 
> 赞同：3
> 
> 时间：2012-08-04T15:38:09.870
> 
> 标签：python, graph, networkx, igraph

给定一个图 G、一个节点 n 和一个长度 L，我想收集所有离开 n 的长度为 L 的（非循环）路径。

您对如何解决这个问题有任何想法吗？

到目前为止，我的图是一个 networkx.Graph 实例，但我并不关心是否推荐了 igraph。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T16:45:10.007

处理（并完全解决）这个问题的一个非常简单的方法是使用图的**邻接矩阵*A。****A^L*的第*(i,j)*个元素是长度为*L的节点**i*和*j*之间的路径数。因此，如果您将所有这些*j*相加并保持*i*固定在*n* ，您将获得从长度为*L的节点**n*发出的所有路径。

 ***不幸的是，这也会计算循环路径。这些，很高兴，可以从 element 中找到`A^L(n,n)`，所以只需减去它。

**所以你的最终答案是：** `Σj{A^L(n,j)} - A^L(n,n)` .

注意事项：假设您正在寻找从节点 1 开始的长度为 5 的路径：此计算还将计算内部带有小循环的路径 like `1-2-3-2-4`，其长度为 5 或 4，具体取决于您选择查看它的方式，所以要小心那。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:29:59.670

我只想扩展 Lance Helsten 的出色回答：

深度限制搜索在一定深度（你称之为长度 L）内搜索特定节点，并在找到它时停止。如果您在他的回答中查看[wiki 链接中的伪代码，您就会明白这一点：](http://en.wikipedia.org/wiki/Depth-limited_search)

```
DLS(node, goal, depth) {
  if ( depth >= 0 ) {
    if ( node == goal )
      return node

    for each child in expand(node)
      DLS(child, goal, depth-1)
  }
} 
```

但是，在您的情况下，当您从节点寻找长度为 L 的所有路径时，您不会在任何地方停下来。所以必须将伪代码修改为：

```
DLS(node, depth) {
    for each child in expand(node) {
      record paths as [node, child]
      DLS(child, depth-1)
    }
} 
```

在你完成了从 DLS 的连续嵌套中记录所有单链路路径之后，只需将它们的乘积得到整个路径。这些数量为您提供了从节点开始的所需深度的路径数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T16:06:04.940

使用深度限制搜索（[http://en.wikipedia.org/wiki/Depth-limited_search](http://en.wikipedia.org/wiki/Depth-limited_search)），您可以在其中保留一组访问节点，以便在路径上检测循环。例如，您可以从节点 n 构建一棵树，其中所有节点和长度为 L，然后修剪树。

我快速搜索了图形算法来做到这一点，但没有找到任何东西。有一个图形算法列表 ( [http://en.wikipedia.org/wiki/Category:Graph_algorithms](http://en.wikipedia.org/wiki/Category%3aGraph_algorithms) ) 可能正是您正在寻找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T16:47:02.800

这个解决方案在效率方面可能会有所提高，但它看起来很短并且利用了 networkx 功能：

```
G = nx.complete_graph(4)
n =  0
L = 3
result = []
for paths in (nx.all_simple_paths(G, n, target, L) for target in G.nodes_iter()):
    print(paths)
    result+=paths 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-23T21:16:14.863

这是我在阅读此处的答案后提出的另一个（相当幼稚的）实现：

```
def findAllPaths(node, childrenFn, depth, _depth=0, _parents={}):
    if _depth == depth - 1:
        # path found with desired length, create path and stop traversing
        path = []
        parent = node
        for i in xrange(depth):
            path.insert(0, parent)
            if not parent in _parents:
                continue
            parent = _parents[parent]
            if parent in path:
                return # this path is cyclic, forget
        yield path
        return

    for nb in childrenFn(node):
        _parents[nb] = node # keep track of where we came from
        for p in findAllPaths(nb, childrenFn, depth, _depth + 1, _parents):
            yield p

graph = {
    0: [1, 2],
    1: [4, 5],
    2: [3, 10],
    3: [8, 9],
    4: [6],
    5: [6],
    6: [7],
    7: [],
    8: [],
    9: [],
    10: [2] # cycle
}

for p in findAllPaths(0, lambda n: graph[n], depth=4):
    print(p)

# [0, 1, 4, 6]
# [0, 1, 5, 6]
# [0, 2, 3, 8]
# [0, 2, 3, 9] 
```***

# html - Google.com 的 Google 搜索栏不是自定义网站？

> ID：11809858
> 
> 赞同：-1
> 
> 时间：2012-08-04T15:38:27.257
> 
> 标签：html, search

我在哪里可以找到 HTML 来添加像 Google 一样搜索网络而不是自定义网站的 Google 搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:41:42.800

只需制作一个文本框，然后在提交时，只需将文本中的空格替换为 a`+`并将其添加到末尾`https://www.google.com/search?q=`

```
This is a test 
```

变成

```
https://www.google.com/search?q=This+is+a+test 
```

# requirejs - jQuery 在子文件夹中不使用 RequireJS

> ID：11809864
> 
> 赞同：4
> 
> 时间：2012-08-04T15:39:48.687
> 
> 标签：requirejs

我有以下文件夹结构：

*   索引.html
*   js/
    *   库/
        *   需要.js
        *   jQuery.js
    *   main.js

在 index.html 中，我在 head 部分添加了以下行：

```
<script data-main="js/main" src="js/libs/require.js"></script> 
```

当我向 main.js 添加一个简单的警报时，它可以工作。当我想使用 jQuery 时，它不起作用：

```
require(['libs/jquery'], function ($) {
    $('#test').html('123');
}); 
```

在 chrome web 检查器中，我看到 jquery 加载成功，但文本没有出现在我的 div 中。当我将 jquery 移出`./js/libs`并放入`./js`（当然将依赖项更改为`['jquery']`）时，它就可以工作了。

我究竟做错了什么？为什么我不能把 jquery 放进`./js/libs`去让事情井井有条？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T18:01:08.940

如果我配置路径

```
require.config({
    paths: {
        'jquery': 'libs/jquery'
    }
}); 
```

并将要求更改为：

```
require(['jquery'], function ($) {
    $('#test').html('123');
}); 
```

它似乎正在工作。如果有人可以解释我为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:53:01.710

您必须提供 basePath 才能正常工作。在您的情况下，它只是**js**。您可以在 main.js 文件的开头执行此操作。

```
require.config({
    baseUrl: '/js'
}); 
```

之后，此代码将起作用，因为它将 baseUrl 与您的相对网址连接起来。

```
require(['libs/jquery'], function ($) {
    $('#test').html('123');
}); 
```

# c++ - 发现两个字符串是循环的

> ID：11809866
> 
> 赞同：1
> 
> 时间：2012-08-04T15:40:28.193
> 
> 标签：c++, c, algorithm

**如何在小于O(n^2)** 且不**使用第三个数组的情况下**找到两个字符串是否循环。
**输入**
str1 = "abcde" str="eabcd"
**输出**
循环
**输入**
str1 = "cabdc" str="ccabd"
**输出**
循环
**输入**
str1 = "ddabnhdd" str="dddabnhd"
**输出**
循环

请建议我最好的解决方案？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T15:44:17.327

你需要做一个优化的字符串搜索，有需要的，你可以在[这里](http://en.wikipedia.org/wiki/String_searching_algorithm)`O(n) + O(m)`找到它们。 之后只需将第一个字符串加倍并在其中搜索第二个字符串，这将需要一些时间。 为避免使用第三个数组，只需每次访问第一个字符串以 n 为模。
`O(n)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T19:21:28.133

The answer should be : [minimal-cyclic-shift](https://stackoverflow.com/questions/3459509/minimal-cyclic-shift-algorithm-explanation)

The algorithm costs O(n) time and no additional array at all, and it finds the minimal cyclic shift of word.

using that, we can easily check :

```
int a=minLexCyc(str1),b=minLexCyc(str2),i,n=strlen(str1);
for(i=0;i<n;i++){
        if(str1[(a+i)%n]!=str2[(b+i)%n]){
                cout<< "not cyclic";
                return ;
        }
}
cout<< "cyclic"; 
```

PS: I don't think any solution that includes a **searching string** part will meet the requirement : **without using a third array** in **O(n)**. So maybe the minimal-cyclic-shift solution is the only one.

# iphone - 键值观察中的无限循环

> ID：11809878
> 
> 赞同：1
> 
> 时间：2012-08-04T15:41:49.123
> 
> 标签：iphone, objective-c, ios, ios5, key-value-observing

每次我运行代码时，它都会在无限循环中运行`myProperty`并一遍又一遍地调用该函数。我应该怎么做才能克服这个..我在 viewController 的 viewDidLoad 函数中编写了以下代码。

`[self.model addObserver:self forKeyPath:@"myProperty" options:NSKeyValueObservingOptionNew context:NULL];`

`[self.model myProperty];`

这里我有一个`Model`类，它有一个名为的属性`myProperty`和一个方法或一个 getter `myProperty`。我`myProperty`用来连接到数据库，收集列的所有值并将其存储在`myProperty`. 我检查了方法..**没有 KVO**`myProperty`它做得很好。但是当我添加这个 KVO 时，它会进入无限循环。

 **我也用过

`- (void)observeValueForKeyPath:(NSString *)keyPath` `ofObject:(id)object` `change:(NSDictionary *)change context:(void *)context {`

`if([keyPath isEqualToString:@"myProperty"])` `NSLog(@"called");`

`}`

我的`myProperty`方法是

`- (void) myProperty` {

```
NSString *file = [[NSBundle mainBundle] pathForResource:@"MyDatabase" ofType:@"db"];

    sqlite3 *database = NULL;

sqlite3_stmt *stmt;

NSMutableArray *availableNames=[NSMutableArray array];

if (sqlite3_open([file UTF8String], &database) == SQLITE_OK) 
{

    NSString *query=[NSString stringWithFormat:@"select * from Names"];

    if(sqlite3_prepare_v2(database, [query UTF8String], -1, &stmt, NULL)==SQLITE_OK)
    {

        while (sqlite3_step(stmt)==SQLITE_ROW) {

            [availableNames addObject:[[NSString alloc]initWithUTF8String:(char *)sqlite3_column_text(stmt,1 )]];
        }

        sqlite3_finalize(stmt);

        }

}
sqlite3_close(database);

self.myProperty = availableNames;

} 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:04:19.320

首先，重命名`getMyProperty`为 simple `myProperty`。方法不应以 . 为前缀`get`。

其次，您需要发布`getMyProperty`无限循环的回溯的实现和部分。最有可能的是，您的 getter 正在触发一个触发 KVO 的突变，该突变触发了触发 KVO 的突变的 getter ....

* * *

```
self.myProperty = availableNames; 
```

那就是你的问题；您正在从您的 getter 更改状态，这会导致上述无限循环。Getter 真的不应该那么复杂。您真的想在每次询问可用名称时打开数据库连接并从磁盘读取吗？慢的！

把它分开；创建一个`loadAvailableNames`可以在适当的时间调用的方法（`if (self.needsLoading) [self loadAavailableNames]; return _myProperty;`等等）。

此外——针对原始 SQLite API 编写代码既浪费时间，也很难做到正确。如果您需要数据库的可移植性，请使用 FMDB 之类的东西。如果您想最大限度地利用系统功能，请使用 Core Data。**

# solr - Solr 按实体名称搜索

> ID：11809879
> 
> 赞同：3
> 
> 时间：2012-08-04T15:42:03.000
> 
> 标签：solr, dataimporthandler

```
<dataConfig>
        <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver">        
        <document>
                <entity name="MALE_PROFILES"
                query="SELECT ID , COLUMN1 , COLUMN2,male FROM MALE_PROFILES "
                 transformer="RegexTransformer">
                        <field name="id" column="ID">
                </entity>
                <entity name="FEMALE_PROFILES"
                query="SELECT ID , COLUMN1 , COLUMN2,female FROM FEMALE_PROFILES"
                 transformer="RegexTransformer">
                        <field name="id" column="ID">
                </entity>
        </document>
</dataConfig> 
```

目前我的搜索是基于男性和女性的，这应该很慢。我可以根据 MA​​LE_PROFILE 之类的实体名称进行搜索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T10:13:44.467

它不会很慢，除非你有大量索引大小的记录。
对于基于实体的搜索，您可以向男性和女性配置文件添加一个标识符，并使用[过滤器查询](http://wiki.apache.org/solr/CommonQueryParameters#fq)来限制搜索的实体，这些实体也将使用[过滤器缓存](http://wiki.apache.org/solr/CommonQueryParameters#Caching_of_filters)。例如

如果您添加一个包含男性和女性实体的固定列，

选择 ID，COLUMN1，COLUMN2，男性，`'MALE' AS PROFILE`来自 MALE_PROFILES

您可以使用 fq=profile:MALE 应用过滤器

# bash - 将文件内容与命令输出进行比较，然后执行命令并追加文件

> ID：11809883
> 
> 赞同：2
> 
> 时间：2012-08-04T15:42:15.883
> 
> 标签：bash, command-line, awk

**1.文件**

一个文件`/etc/ssh/ipblock`包含如下所示的行：

```
2012-01-01 12:00 192.0.2.201
2012-01-01 14:15 198.51.100.123
2012-02-15 09:45 192.0.2.15
2012-03-12 21:45 192.0.2.14
2012-04-25 00:15 203.0.113.243 
```

**2\. 命令**

该命令的输出`iptables -nL somechain`如下所示：

```
链 somechain (2 参考)
目标 prot opt 源目标
DROP all -- 172.18.1.4 任何地方
DROP all -- 198.51.100.123 任何地方
DROP all -- 172.20.4.16 任何地方
DROP all -- 192.0.2.125 任何地方
DROP all -- 172.21.1.2 任何地方

```

**3\. 手头的任务**

1.  首先，我想获取 iptables 链（字段 4）中存在但文件中不存在的 IP 地址列表 A。
2.  然后我想获取文件中存在但不在 iptables 链中的 IP 地址列表 B。
3.  列表 A 中的 IP 地址应以相同的样式（日期、时间、IP）附加到文件中
4.  然后应将列表 B 中的 IP 地址添加到 iptables 链中
    `iptables -A somechain -d IP -j DROP`

**4\. 背景**

我希望扩展我的 awk-fu，所以我一直试图让它与一个可以在没有参数的情况下执行的 awk 脚本一起工作。但我失败了。

我知道我可以使用命令从命令中获取输出，`getline`因此我能够以这种方式获取时间和日期。而且我也知道可以使用`getline foo < file`. 但是我只有多次失败的尝试将这一切组合成一个工作的 awk 脚本。

我意识到我可以让它与其他编程语言或 shell 脚本一起工作。但这可以通过无需参数即可运行的 awk 脚本来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:08:44.397

我认为这几乎正是您想要的。这项工作是否都在一个文件中，我猜代码几乎是不言自明的......
易于适应，可扩展......

**用法：**
`./foo.awk CHAIN ip.file`

**foo.awk：**

```
#!/usr/bin/awk -f
BEGIN {
    CHAIN= ARGV[1]
    IPBLOCKFILE = ARGV[2]

    while((getline < IPBLOCKFILE) > 0) {
        IPBLOCK[$3] = 1
    }

    command = "iptables -nL " CHAIN
    command |getline
    command |getline
    while((command |getline) > 0) {
        IPTABLES[$4] = 1
    }
    close(command)

    print "not in IPBLOCK (will be appended):"
    command = "date +'%Y-%m-%d %H:%M'"
    command |getline DATE
    close(command)
    for(ip in IPTABLES) {
        if(!IPBLOCK[ip]) {
            print ip
            print DATE,ip >> IPBLOCKFILE
        }
    }

    print "not in IPTABLES (will be appended):"
    # command = "echo iptables -A " CHAIN " -s " //use for testing 
    command = "iptables -A " CHAIN " -s "
    for(ip in IPBLOCK) {
        if(!IPTABLES[ip]) {
            print ip
            system(command ip " -j DROP")
        }
    }
    exit
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:16:38.533

做1&3：

```
comm -13 <(awk '{print $3}' /etc/ssh/ipblock | sort) <(iptables -nL somechain | awk '/\./{print $4}' | sort) | xargs -n 1 echo `date '+%y-%m-%d %H:%M'` >> /etc/ipblock 
```

做2&4：

```
comm -13 <(awk '{print $3}' /etc/ssh/ipblock | sort) <(iptables -nL somechain | awk '/\./{print $4}' | sort) | xargs -n 1 iptables -A somechain -d IP -j DROP 
```

该命令由以下构建块构成：

1.  Bash 进程替换功能：它有点类似于管道功能，但通常在程序在其参数/选项中需要两个或多个输入文件时使用。Bash 创建`fifo`文件，该文件基本上“包含”给定命令的输出。在我们的例子中，输出将是 ip 地址。
2.  然后将`awk`脚本的输出传递给`comm`程序，这两个`awk`脚本都非常简单：它们只是打印 IP 地址。在第一种情况下，所有 ips 都包含在第三列中（因此`$3`），在第二种情况下，所有 ips 都包含在第四列中，但是必须去掉列标题（“destination”字符串），所以使用简单的正则表达式`/\./`：它过滤掉所有不包含点的字符串。
3.  `comm`需要对两个输入进行排序，因此输出的`awk`排序使用`sort`
4.  现在`comm`程序接收到两个 IP 地址列表。如果没有给出选项，它会打印三列：FILE1 唯一的行、FILE2 唯一的行、两个文件中的行。通过传递`-23`给它，我们只得到 FILE1 独有的行。类似地，传递`-13`使其输出 FILE2 独有的行。
5.  `xargs`基本上是 bash 中的“foreach”循环，它对每个输入行执行一个给定的命令（感谢`-n 1`）。第二个非常明显（这是所需的`iptables`调用）。第二个也不复杂：它只`date`是以正确的格式输出当前时间。

# ruby - rake 有时在“rvm 使用”之前无法工作

> ID：11809884
> 
> 赞同：1
> 
> 时间：2012-08-04T15:42:16.297
> 
> 标签：ruby, rake, rvm

我已经让 Ruby、Rails、Rake 和朋友在 OSX 上使用 RVM 工作得很好，但是当我启动一个新的 shell（Terminal.app 中的新标签）时，rake 任务似乎“失去”了他们的环境：

```
$ rake my_module:my_task
Could not find uglifier-1.2.7 in any of the sources
Run `bundle install` to install missing gems. 
```

如果我发出“rvm use”（我相信它只会打印当前的红宝石，但不会改变任何东西），那么它可以正常工作：

```
$ rvm use
Using /Users/username/.rvm/gems/ruby-1.9.3-p194
$ rake my_module:my_task   # works fine now! 
```

启动新外壳时似乎会发生这种情况。我将 rvm 安装为单用户安装，我的 .bash_profile 底部有以下内容：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

我已经通过在该行之后放置一些 echo 语句来验证我的 .bash_profile 实际上正在执行；当我打开一个新选项卡时，我在命令行上看到了回声，所以它似乎正在工作。知道为什么 rake 在没有“rvm 使用”的情况下无法工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:07:36.063

尝试将 rvm ruby​​ 设置为默认 ruby

```
$ rvm use ruby-1.9.3-p194 --default 
```

这应该每次都使用 rvm ruby​​-1.9.3-p194 作为默认值。

# php - 如何根据帖子的日期和标题设置博客帖子的永久链接？

> ID：11809885
> 
> 赞同：0
> 
> 时间：2011-09-24T05:56:47.750
> 
> 标签：php, wordpress, .htaccess, mysql

我有这个网站[http://www.finalyearondesk.com](http://www.finalyearondesk.com)。我的博客文章链接是这样设置的.. [http://www.finalyearondesk.com/index.php?id=28](http://www.finalyearondesk.com/index.php?id=28)。我希望它像这样设置... finalyearondesk.com/2011/09/22/how-to-recover-ubuntu-after-it-is-crashed/ 。

我正在使用以下功能来获取这些帖子...

```
function get_content($id = '') {

    if($id != ""):
        $id = mysql_real_escape_string($id);
        $sql = "SELECT * from blog WHERE id = '$id'";
        $return = '<p><a href="http://www.finalyearondesk.com/">Go back to Home page</a></p>';
        echo $return;

    else:
        $sql = "select * from blog ORDER BY id DESC";

    endif;

    $res = mysql_query($sql) or die(mysql_error());

    if(mysql_num_rows($res) != 0):

        while($row = mysql_fetch_assoc($res)) {
            echo '<h1><a href="index.php?id=' . $row['id'] . '">' . $row['title'] . '</a></h1>';
            echo '<p>' . "By: " . '<font color="orange">' . $row['author'] . '</font>' . ", Posted on: " . $row['date'] . '<p>';
            echo '<p>' . $row['body'] . '</p><br />';
        }

    else:

        echo '<p>We are really very sorry, this page does not exist!</p>';

    endif;
} 
```

任何建议如何做到这一点？我们可以通过使用 .htaccess 来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-10-04T16:14:40.227

是的，您只需进入后端的设置。

转到永久链接

选择自定义结构

插入此代码

/%year%/%month%/%day%/%postname%/

这是一个指南

[http://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:11:59.777

问题是这段代码`<a href="index.php?id=' . $row['id'] . '">' . $row['title'] . '</a></h1>';`

您已将字符串硬编码`index.php?id=`到模板中，即使您在单击链接时打开永久链接，此循环生成的它也会转到动态 URL。甚至没有默认的 WordPress 动态帖子 URL。

下面是一个基本的 WordPress 循环，它显示类似于您想要实现的帖子的标题和日期

```
<?php
get_header();
if (have_posts()) :
   while (have_posts()) :
      the_title('<h3>', '</h3>'); ?>
      the_time('l, F jS, Y');
   endwhile;
endif;
get_sidebar();
get_footer(); 
?> 
```

WordPress 有很多内置功能，都有很多选项。例如按标题、日期、asc、dsc 等排序。您甚至可以通过在 WP 之外的文件头中包含一些 php 文件来使用 WordPress 之外的 WordPress 功能。

# java - 变量没有传递给方法paint

> ID：11809888
> 
> 赞同：0
> 
> 时间：2012-08-04T15:42:37.777
> 
> 标签：java, swing, graphics, mouselistener

在过去的一天半里，我一直在搜索谷歌，试图弄清楚这一点。如您所见，我试图让 mouseClicked 更新变量 clickcolumnindex 和 clickrowindex 以使 mouseClicked 方法中的 replaint() 方法更新，从而在另一列/行中显示由绘制显示创建的计数器。

在尝试了很多事情之后，我觉得这可能是一个非常简单的解决方法，我有点迷失了思路。

帮助将不胜感激。

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;
import java.awt.event.MouseListener;
import java.awt.event.MouseEvent;

            class GridPanel extends JPanel implements MouseListener
            {
                int numCols;
                int numRows;
                int w;
                int h;
                int x;
                int y;
                int clickcolumnindex;
                int clickrowindex;

                public void mouseReleased(MouseEvent event)
                {
                    System.out.println("Mouse released.");
                }
                public void mousePressed(MouseEvent event)
                {
                    System.out.println("Mouse Pressed");
                }
                public void mouseClicked(MouseEvent event)
                {
                    int clickcolumnindex = 7 * x / getWidth();
                    int clickrowindex = 5 * y / getHeight();
                    int x = event.getX();
                    int y = event.getY();
                    System.out.println("x position of click is: " +x);
                    System.out.println("y position of click is: " +y);
                    System.out.println("Click is in column " +clickcolumnindex);
                    System.out.println("Click is in row " +clickrowindex);
                    repaint();

                }

   public void mouseReleased(MouseEvent event) {
      System.out.println("Mouse released.");
   }

   public void mousePressed(MouseEvent event) {
      System.out.println("Mouse Pressed");
   }

   public void mouseClicked(MouseEvent event) {
      int x = event.getX();
      int y = event.getY();
      System.out.println("x position of click is: " + x);
      System.out.println("y position of click is: " + y);
      System.out.println("Click is in column " + clickcolumnindex);
      System.out.println("Click is in row " + clickrowindex);
      repaint();
   }

   public void mouseEntered(MouseEvent event) {
      System.out.println("Mouse entered.");
   }

   public void mouseExited(MouseEvent event) {
      System.out.println("Mouse exited.");
   }

   public GridPanel(int nc, int nr) {
      numCols = nc;
      numRows = nr;
      addMouseListener(this);
   }

   Rectangle getRect(int thisCol, int thisRow) {
      // if input is out of range, return "null"
      if (thisCol < 0 || thisRow < 0)
         return null;
      if (thisCol >= numCols || thisRow >= numRows)
         return null;
      // otherwise, make and return the Rectangle
      int w = getWidth() / numCols;
      int h = getHeight() / numRows;
      int x = thisCol * w;
      int y = thisRow * h;
      Rectangle myRect = new Rectangle(x, y, w, h);
      return myRect;
   }

   public void paint(Graphics g) {
      g.setColor(Color.gray);
      g.fillRect(0, 0, getWidth(), getHeight());
      g.setColor(Color.black);
      Graphics2D g2 = (Graphics2D) g;
      // we'll use Graphics2D for it's "draw" method -
      // neater than the Graphics "drawRect" suppled
      // (which you could also use)
      for (int i = 0; i < numCols; i++) {
         for (int j = 0; j < numRows; j++) {
            Rectangle r = getRect(i, j);
            g2.draw(r);
         }
      }
      g2.setColor(Color.blue);
      Rectangle r1 = getRect(clickcolumnindex, clickrowindex);
      g2.fillOval(r1.x, r1.y, r1.width, r1.height);
      System.out.println("variable updates " + clickcolumnindex + clickrowindex);
   }

   // copied from the W2MouseEvents for convenience
   // (so we can run the program from GridPanel class too!)
   public static void main(String[] args) {
      W2MouseEvents w = new W2MouseEvents();
      w.setVisible(true);
   }
} 
```

W2MouseEvents.java：

```
import javax.swing.JFrame;

public class W2MouseEvents extends JFrame {
   GridPanel myGridPanel;

   public static void main(String[] args) {
      W2MouseEvents w = new W2MouseEvents();
      w.setVisible(true);
   }

   public W2MouseEvents() {
      setTitle("Workshop 2 (Mouse Events): starting code");
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      setSize(500, 400);
      setLocation(300, 300);
      myGridPanel = new GridPanel(7, 5);
      add(myGridPanel);
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:56:14.363

至少有两个问题： 变量不会神奇地自动更新自己。如果更改，则不会更新位于其右侧的`x`变量（假设它们在同一范围内）。`x`澄清：

```
int x = 4;
int var = x + 1; // var == 5
x = 5 // var still is 5, not 6 
```

假设您想要更改`x`并且`y`“全局”（如“类实例的属性”），您必须解决的第二个问题是

```
public void mouseClicked(MouseEvent event)
{
    int x = event.getX();
    int y = event.getY();
    // ...
} 
```

这里发生的情况是您声明了两个*新的局部*变量`x`，`y`但是无论您分配给它们什么值，您的“全局”变量`x`都`y`不会改变，除非您省略声明性的`int`. *如果您重新计算*mouseClicked/mousePressed/... 方法之一的值`clickColumnIndex`和内部的值，这不是问题。`clickRowIndex`

**编辑** 我看到你已经将计算`clickColumnIndex`及其兄弟移到了`mouseClicked`方法中。但如上所述，您正在创建两个*隐藏*“全局”变量的*新*变量。只需删除.*`int`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:44:29.520

您在声明它时设置 clickcolumnindex，在鼠标事件发生之前。您需要在鼠标侦听器中设置它。

换句话说，这是没有意义的：

```
 class GridPanel extends JPanel implements MouseListener
        {
            int numCols;
            int numRows;
            int w;
            int h;
            int x;
            int y;
            int clickcolumnindex = 7 * x / getWidth();
            int clickrowindex = 5 * y / getHeight(); 
```

因为此时 x 为 0，getWidth() 也为 0（很惊讶您在这里没有得到除以零的错误）。

您想改为在 MouseListener 的`mousePressed(...)`方法中设置 clickXXXindex。我更喜欢使用`mousePressed(...)`而不是`mouseClicked(...)`因为前者对按下鼠标后移动鼠标并不挑剔。

此外，您需要使用 JPanel 的`paintComponent(...)`方法而不是它的`paint(...)`方法进行绘图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T15:57:01.067

声明：

```
 int clickcolumnindex = 7 * x / getWidth();
   int clickrowindex = 5 * y / getHeight(); 
```

不允许在构造函数、方法或静态初始化块之外。

正如 HoverMeister 所指出的，这些只分配一次。为什么没有单独的方法来更新这些变量和随后的 repaint()？*

# c# - .net 从任意 xml 形成通用类型

> ID：11809900
> 
> 赞同：0
> 
> 时间：2012-08-04T15:43:43.613
> 
> 标签：c#, serialization, xml-serialization, nservicebus

我需要将作为来自不同系统的消息的 XML 转换为我正在查找的类型。例如，如果我有一个通用接口，如

```
 IMessageHandler<CustomerCreated> 
```

然后，当 XML 附带时，我应该能够找到类型并创建一个通用类型。这样我就可以使用依赖注入来调用将实现该方法的适当类。我在 NServiceBus 中看到过这种代码，所以我也是标签

# javascript - href= javascript: jquery 在 FF 中不起作用

> ID：11809903
> 
> 赞同：3
> 
> 时间：2012-08-04T15:44:27.023
> 
> 标签：javascript, jquery, firefox, anchor

我有一个触发使用 jquery 的 javascript 的锚：

```
<a href="javascript: $('#dash-main').load('billing.php')">text</a> 
```

这个锚在 Chrome 甚至 IE 中都可以正常工作，但是当我在 FF 中使用它时，浏览器会重定向到“http://javascript: $('#dash-main').load('billing.php')” .

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T15:47:18.730

使用 onclick 并避免该问题：

```
<a href="#" onclick="$('#dash-main').load('billing.php');return false;">text</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T15:47:16.557

为什么不使用：

```
<a href="#" onclick="$('#dash-main').load('billing.php')">text</a> 
```

跨浏览器兼容！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-04T15:54:59.420

您是否尝试返回false？

```
<a href="javascript: $('#dash-main').load('billing.php'); return false;">text</a> 
```

# css - 将元素向左对齐

> ID：11809905
> 
> 赞同：0
> 
> 时间：2012-08-04T15:44:30.317
> 
> 标签：css, twitter-bootstrap

我正在使用推特引导程序。这是我的代码：

```
<div class="control-label">
    We
    <div class="btn-group">
        <a href="javascript:;" data-toggle="dropdown" class="btn dropdown-toggle">
            <span>search</span>&nbsp;&nbsp;<span class="caret"></span>
        </a>
    </div>
    Something
</div> 
```

[http://jsfiddle.net/3j7QP/](http://jsfiddle.net/3j7QP/)

如何使用 thw twitter bootstrap 类使文本和按钮出现在与左侧对齐的一行中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:42:16.970

## 只上课

### 按钮工具栏

如果您想严格遵守课程，可以尝试`.btn-toolbar`，但不会有垂直对齐。

[演示 btn 工具栏](http://jsfiddle.net/Sherbrow/3j7QP/3/)

```
<div class="control-label btn-toolbar">
    <!-- ... -->
</div> 
```

### 漂浮的

浮动似乎不是一个合适的解决方案，因为您失去了线路连续性。所以你不应该使用`.pull-left`.

## CSS

否则有几种解决方案：

### 没有 btn 组

首先，您可以删除，`div.btn-group`因为显然您没有使用它。

[演示没有 div](http://jsfiddle.net/Sherbrow/3j7QP/1/)

### 内联块

或者您可以`display: inline-block;`在所有元素上使用（但您应该将文本括在块中）。

[演示内联块](http://jsfiddle.net/Sherbrow/3j7QP/2/)

```
.myClass > div {
    vertical-align: middle;
    display: inline-block;
} 
```

```
<div class="control-label myClass">
    <div>We</div>
    <div class="btn-group"><!-- ... --></div>
    <div>Something</div>
</div> 
```

# c# - 将 ProjectItem 移动到 VS2012 中项目模板的自定义向导中的物理目录

> ID：11809906
> 
> 赞同：1
> 
> 时间：2012-08-04T15:44:38.960
> 
> 标签：c#, visual-studio-2012, visual-studio-templates

在 Visual Studio 2012（或更低版本，最好）中，是否可以将新创建​​的项目定向到文件系统中的特定文件夹，而不是使用项目项目模板直接进入项目根目录？

`ProjectItem.Save()`and方法抛出一个未实现的`SaveAs()`异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:49:08.080

简短的回答是否定的：您不能单独使用 vstemplate 将文件定向到项目的子文件夹。

如果您不介意编写 VS 扩展，您可以尝试这种方法，通过用您自己的实现替换解决方案资源管理器中的“添加新项目”命令，在所需的子文件夹中创建文件：

1.  使用您自己的事件处理程序覆盖“添加新项目”命令（命令 GUID：{5EFC7975-14BC-11CF-9B2B-00AA00573819}，ID：220）[http://social.msdn.microsoft.com/Forums/eu/vsx /thread/c0e7de35-73d7-441a-979d-f5e359896b80](http://social.msdn.microsoft.com/Forums/eu/vsx/thread/c0e7de35-73d7-441a-979d-f5e359896b80) )
2.  在您的事件处理程序中，预先选择解决方案资源管理器层次结构中的子文件夹（请参阅[http://social.msdn.microsoft.com/Forums/en/vsx/thread/0bef0d6e-c416-4e09-989f-5c2da7379e04](http://social.msdn.microsoft.com/Forums/en/vsx/thread/0bef0d6e-c416-4e09-989f-5c2da7379e04)）
3.  调用 IVsAddProjectItemDlg.AddProjectItemDlg 方法，可选择将您的项目项模板指定为默认选定项（请参阅[http://social.msdn.microsoft.com/Forums/en/vsx/thread/f24dd433-1522-47ad-bd02-067b13391527](http://social.msdn.microsoft.com/Forums/en/vsx/thread/f24dd433-1522-47ad-bd02-067b13391527)）

这种方法的缺点是每个新项目项都将添加到项目子文件夹中。为避免这种情况，您可以向解决方案资源管理器添加新的上下文菜单命令，而不是覆盖“添加新项”。

# perl - 搜索特定行的文件并存储它们

> ID：11809907
> 
> 赞同：2
> 
> 时间：2012-08-04T15:44:43.797
> 
> 标签：perl, file-io, full-text-search

**这是我的文本文件...我想搜索特定数据并存储它...** 我想搜索输出需求历史记录然后打印它搜索所有*输出字段并仅保存其值=234 并打印其数据即 abc , dfg, jh,

### 输入文件：

```
*output folk
 .....
 ....
 ....
*output demand history
*output integ
sd,
lk,
pk,
*output field, value=234;hoxbay edt
abc,
dfg,
jh,
*output field, value=235;hoxbay edt
jh,
lk,
*output fix, value=555;deedfgh
re,
ds,
*fgh ,val=098;ghfd
dsp=pop
mike oop...

**i want this output only........** 
```

### 输出：

```
*output field, value=234;hoxbay edt
abc,
dfg,
jh,
*output field, value=235;hoxbay edt
jh,
lk,
*output fix, value=555;deedfgh
re,
ds, 
```

我试过这个......但我不知道如何停下来

```
output fix, value=555;deedfgh
re,
ds, 
```

### 代码：

```
use strict;
use warnings;
use Data::Dumper;

open(IN , "<" , "a.txt");

my $flag=0;

foreach my $line(<IN>)
{
  if($line=~/^\*output demand history/i)
  {
    print $line;
    $flag=1;

  }

  if($line=~/^\*OUTPUT field/i && $flag==1)
  {
    print $line;
    my @array1=split("," ,$line);
    my $temp1=shift @array1;
    my @array2=split(";",$temp1);
    my $elset=shift @array2;

  } 

  if($line=~/^\*OUTPUT FIX/i && $flag==1)
  {
    print $line;

    my @array3=split("," ,$line);
    my $temp2=shift @array3;
    my @array4=split(";",$temp2);
    my $nset=shift @array4;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:52:10.473

当所有条件都满足时，我看不到您在哪里简单地打印输入的行。

你需要在循环中的某个地方：

```
if ($flag2) {
   print $line;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:00:59.100

很难准确说出您需要什么，但这个程序可能会有所帮助

```
use strict;
use warnings;

open my $fh, '<', 'a.txt' or die $!;

my @data;
while (<$fh>) {
  chomp;
  if (/^\*/) {
    print "@data\n" if @data;
    @data = ();
    push @data, $1 if /^\*output\s+(?:field|fix),\s*(.+?)\s*;/;
  }
  else {
    push @data, $_ if @data;
  }
}
print "@data\n" if @data; 
```

**输出**

```
value=234 abc, dfg, jh,
value=235 jh, lk,
value=555 re, ds, 
```

* * *

从您的回复看来，您想要打印以 a 开头`*`并包含以 a 开头`value=`的下一行的行`*`。

试试这个代码

```
use strict;
use warnings;

open my $fh, '<', 'a.txt' or die $!;

my $wanted;
while (<$fh>) {
  $wanted = /value/ if /^\*/;
  print if $wanted;
} 
```

**输出**

```
*output field, value=234;hoxbay edt
abc,
dfg,
jh,
*output field, value=235;hoxbay edt
jh,
lk,
*output fix, value=555;deedfgh
re,
ds, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T07:02:37.363

使用触发器的一个版本：

```
perl -ne'print if (/^\*output .*value=/ .. ($a = (/^\*/ && ! /value=/))) && ! $a' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T15:59:41.110

也许这是你想要的：

```
use 5.010;
$flag;
while (<IN>) {
    given ($_) {
        when (/^\*output/)  { $flag= 0; continue; }
        when (/value/)      { $flag = 1; }
    }
    print if $flag;
} 
```

# node.js - 全文搜索 MongoDB 和 node.js 的想法

> ID：11809909
> 
> 赞同：4
> 
> 时间：2012-08-04T15:44:52.093
> 
> 标签：node.js, mongodb, lucene, sphinx, elasticsearch

我正在为我的网站开发一个搜索引擎，我想为其添加以下功能；

1.  全文搜索
2.  你是说功能吗
3.  MongoDB中的数据存储

我想做一个安静的后端。我将手动将数据添加到 mongodb 并将其编入索引（我更喜欢哪个？Mongodb 索引或其他一些搜索索引库，如 Lucene）。我也想使用 node.js。这些是我从研究中发现的。任何想法都会受到架构的赞赏

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:27:54.323

我正在使用 Node.js / MongoDB / Elasticsearch（基于 Lucene）。这是一个很好的组合。流程也令人惊叹，因为所有 3 个包（可以）都将 JSON 作为其原生格式处理，因此无需转换 DTO 等。

看看： [http ://www.elasticsearch.org/](http://www.elasticsearch.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:04:01.617

我个人使用 Sphinx 和 MongoDb，这是一对很棒的组合，我对它没有任何问题。

我将 MongoDB 备份到一个 MySQL 实例上，Sphinx 很快就对其进行了索引。由于您永远不需要主动索引_id，因为我不知道谁会知道要搜索的对象之一的_id，您可以将它作为字符串字段存储在MySQL中，它会正常工作。

当我从 Sphinx 中提取结果时，我所做的只是转换为（在 PHP 中） a new `MongoId`，或者在您的情况下为 a `ObjectId`，然后简单地在此对象 ID 上查询其余数据。它再简单不过了，没有问题，没有麻烦，什么都没有。而且我可以将重新索引增量索引的负载分拆到我的 MySQL 实例上，让我的 MongoDB 实例处理它需要做的事情：为用户提供美味的数据。

# html - 元标记视口使我的网站在 ipad 上看起来很奇怪

> ID：11809913
> 
> 赞同：1
> 
> 时间：2012-08-04T15:45:37.700
> 
> 标签：html, ipad, mobile, meta-tags, viewport

'支持堆栈！

所以我一直在掌握视口元标记以及它如何调整页面以适应设备视口。我在这里早些时候从 stackoverflow 获得了一些帮助： [页脚不会在 iphone 上扩展到 100% 宽度，为什么？](https://stackoverflow.com/questions/11439954/footer-will-not-extend-to-100-width-on-iphone-why) 我主要担心的是我的网站页脚不会扩展到 100% 宽度。您可以在此处访问网站：http: [//gloryillustration.com/](http://gloryillustration.com/) 您可以在此处查看我的 iphone 解决方案：http: [//gloryillustration.com/tests/test13.html](http://gloryillustration.com/tests/test13.html) 我设法对网页进行排序以在 iphone 上正确显示，通过使用：

```
<meta name="viewport" content="width=device-width, initial-scale=0"> 
```

如果您要在 ipad 上查看此内容，页脚显示*为*100% 宽度，但整个页面现在显示为好像它已放大 waaaaay 并且它在页面的右侧和页脚*下方*添加了大量的空白区域出色地。我认为该网站正在自我调整，就好像在 iphone 上查看它一样。但我不知道*为什么*它会这样调整？我认为 content="device-width" 会将宽度设置为正在查看的设备的宽度？还是我完全误解了这一点。

有没有办法设置视口元标记以包含该网站的 ipad*和*iphone？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:19:37.753

改用这个：

```
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" /> 
```

你可以在这里看到结果[http://www.premiumdw.com/case-studies/convert-a-960-grid-website-to-a-responsive-design/](http://www.premiumdw.com/case-studies/convert-a-960-grid-website-to-a-responsive-design/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:55:12.470

尝试 initial-scale=1 而不是 0

因为你想让它 100% 缩放，而不是 0%

# javascript - 注释掉javascript中的代码块

> ID：11809916
> 
> 赞同：0
> 
> 时间：2012-08-04T15:46:09.363
> 
> 标签：javascript, block, comments

我在谷歌上搜索了答案，但我可能忽略了一些明显的事情......我希望注释掉一个可能有嵌套评论的代码块，他们可以在其中提前终止父评论。在 c 中，我看到它完成如下：

```
#if 0
    /* Code */
#endif 
```

但是 js 似乎没有标准的预处理器。有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T15:48:01.500

我只会做类似的事情：

```
if ( ! "DEBUG" ) {

  ...

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T07:57:37.217

似乎我可以通过以下方式注释掉任何块：

1|| /* 代码块 */

它甚至可以在语句之前工作，因为 js 似乎也将它们视为表达式，例如

1|| if(1) /* 代码 */

将“注释掉”该 if 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T17:45:05.127

javascript 不提供预处理器，但您可以使用第三方库

[http://code.google.com/p/jsmake-preprocessor/](http://code.google.com/p/jsmake-preprocessor/)

前任）

```
/*@ifdef DEBUG_MODE */

console.log("development server is in debug mode!");

/*@end */ 
```

# python - 用 Python 读取一个大文件

> ID：11809925
> 
> 赞同：1
> 
> 时间：2012-08-04T15:47:32.063
> 
> 标签：python

我正在尝试读取一个目录中的一些文件，该目录有 10 个文本文件。随着时间的推移，文件的数量会增加，到现在的总大小约为 400MB。

文件内容采用以下格式：

```
student_name:student_ID:date_of_join:anotherfield1:anotherfield2 
```

如果匹配，我必须打印出整行。这是我尝试过的。

```
findvalue = "student_id" #this is users input alphanumeric
directory = "./RecordFolder"
for filename in os.listdir(directory):
    with open(os.path.join(directory, filename)) as f:
        for line in f:
            if findvalue in line:
                print line 
```

这可行，但需要很多时间。如何减少运行时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:49:47.723

当文本文件变得太慢时，您需要开始查看数据库。数据库的主要目的之一是智能地处理来自持久数据存储的 IO。

根据您的应用程序的需要，[SQLite](http://docs.python.org/library/sqlite3.html)可能是一个不错的选择。我怀疑这是您想要的，因为您似乎没有庞大的数据集。从那里开始，只需进行数据库 API 调用并允许 SQLite 处理查找 - 它比您做得更好！

如果（出于某种奇怪的原因）您*真的*不想使用数据库，那么如果可能的话，请考虑进一步将您的数据分解成一棵树。例如，您可以为放置学生数据的字母表中的每个字母创建一个文件。这应该会减少循环时间，因为您正在减少每个文件的学生人数。这是一个快速的技巧，但我认为如果你使用数据库，你会减少头发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:50:52.697

IO 与计算相比是出了名的慢，并且鉴于您正在处理大文件，它可能最好逐行处理文件。我看不到在 Python 中加快速度的明显简单方法。

根据您的“点击”（即，`findvalue in line`）的频率，您可能会决定写入文件，以免控制台输出可能减慢速度，但如果找到的项目相对较少，则不会产生太大影响一个区别。

我认为对于 Python 来说，没有什么明显和重要的事情可以做。您总是可以探索其他工具（例如 grep 或数据库 ...）作为替代方法。

PS：不需要`else:pass`..

# symfony - 使用@Route 注解重定向

> ID：11809927
> 
> 赞同：2
> 
> 时间：2012-08-04T15:47:45.837
> 
> 标签：symfony

有没有办法使用注释重定向？

```
/**
 * Delete user
 *
 *
 * @Route("/deleteUser/{user_id}", name="delete_user_from_id")
 * @Template()
 */
public function deleteUserAction($user_id)
{
 //....
 return $this->redirect($this->generateUrl('acme_demo_homepage'));
} 
```

我们可以使用注释来避免这个额外的行吗？像@redirect 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:59:20.710

不，这是不可能的。

看看 FrameworkExtraBundle。必须在控制器中触发重定向（通常在某些逻辑之后；））

# php - PHP解析多维数组

> ID：11809928
> 
> 赞同：0
> 
> 时间：2012-08-04T15:47:47.007
> 
> 标签：php, arrays

嗨我需要解析一个多维数组

```
$myArray = array(
    array('id' => 6),
    array(
        'id' => 3,
        'children' => array(
            'id' => 5,
            'children' => array(
                'id' => 7,
                'children' => array(
                    array('id' => 4), 
                    array('id' => 1)
                ),
                array('id' => 8)
            )
        )
    ),
    array('id' => 2)
); 
```

这是我需要作为字符串或数组的输出...

```
6
3
3,5
3,5,7
3,5,7,4
3,5,7,1
3,5,8
2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:52:07.100

您需要创建一个递归循环：

```
$children = array();

function getChilren($myArray, $children){

     foreach($myArray as $value){
          if(is_array($value)){
              $cLen = count($children);
              $children[] = $children[$cLen-1];
              getChildren($value, $children[$cLen]);
          }
          else {
              $children[] = $value;
          }
      }
 } 
```

这可能是有缺陷的，需要更多的工作，但我认为这至少是一个开始。

# database - 应用程序架构：单个 Oracle 帐户

> ID：11809929
> 
> 赞同：0
> 
> 时间：2012-08-04T15:47:48.007
> 
> 标签：database, vb.net, oracle, authentication, architecture

我一直在一家为其主要应用程序运行 VB6 的小商店工作。我大约六年前开始在那里。在我以前的经验中，我只处理过 MSSQL。这家商店主要使用Oracle。自从我去过那里以来，我大部分时间都在.NET 中工作。我什至设法通过引入 CSLA 框架慢慢地整合了一些表面上的秩序，尽管我的同事对 OOD 或 OOA 一无所知，因为他一直在使用 VB6 并且已经被它所消耗以及管理数据库。

最烦人的观察之一是，我的同事坚持为每个需要访问数据库的用户创建一个唯一帐户。还有一个单独的表格提供了用户访问权限的详细信息。为了利用连接池，我创建了一个独特的身份验证片段，它根据 Oracle 对用户进行身份验证，然后将用户权限存储在 Principal/Identity 中。然后我使用一个通用帐户，它可以促进与数据库的正常日常通信。

自从实施这一点以来，我注意到 TNS 错误有所减少。

有没有人认为这种方法有任何冲突？

# c++ - Invalidate(true) 没有输出，为什么？

> ID：11809932
> 
> 赞同：0
> 
> 时间：2012-08-04T15:48:16.960
> 
> 标签：c++, windows, mfc

这些代码是 WM_CHAR 处理程序，但是在键入一些单词时什么也不输出？？

```
void CMy3456View::OnChar(UINT nChar, UINT nRepCnt, UINT nFlags)
{

Invalidate(true);
//MessageBox(L"dfs");//enable this line,then the  outputs turns normal,why???
CClientDC dc(this);

CString c=L"";
c.Format(L"%c",nChar);
dc.TextOutW(0,0,c);

CView::OnChar(nChar, nRepCnt, nFlags);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:13:38.377

您不应该在 OnChar 内的窗口中绘画，您应该让 WM_PAINT 处理程序处理它。`Invalidate`导致 WM_ERASEBKGND 和 WM_PAINT 紧随其后，这可能会擦除 TextOutW 的结果。

# javascript - Ajax 轮询仅更新数据

> ID：11809933
> 
> 赞同：0
> 
> 时间：2012-08-04T15:48:17.607
> 
> 标签：javascript, jquery, ajax, ajax-polling

我需要我的用户流每 10 秒更新一次，以更新其他用户新插入的状态、时间戳和最新添加的评论数量等内容。

现在我可以使用以下内容，但我面临的问题是，当我发布到 textarea 时，插入用户发布的状态需要 10 秒，然后每隔 10 秒添加一次相同的状态..就在一个不同的身份证。

我需要轮询做的只是选择我在 insert.php 页面中回显的数据，而不是实际上每 10 秒添加一条新评论。是否可以采用不同的方式来选择响应数据？

```
<script>
$(document).ready(function(){
    $("form#myform").submit(function(event) {
        event.preventDefault();
        var content = $("#toid").val();
        var newmsg = $("#newmsg").val();

    setInterval(function(){
        $.ajax({
            type: "POST",
            url: "insert.php",
            cache: false,
            dataType: "json",
            data: { toid: content, newmsg: newmsg },
            success: function(response){
                $("#homestatusid").prepend("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['streamitem_id']+"');\">X</div><a href='/profile.php?username="+response['username']+"'>"+response['first']+" "+ response['middle']+" "+response['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a><hr>"+newmsg+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+response['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+response['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a id='likecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+response['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'>Like</div></a><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'></div></div><div id='streamdislike'><a id='dislikecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+response['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'>Dislike</div></a><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'></div></div></div><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'><table width=100%><tr><td valign=top width=30px><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><td valign=top align=left><div class='stream_comment_inputarea'><input type='text' name='content' style='width:100%;' class='input_comment' placeholder='Write a comment...'  onkeyup='growcommentinput(this);' autocomplete='off' onkeypress=\"if(event.keyCode==13){addcomment("+response['streamitem_id']+",this.value,'comment_list_"+response['streamitem_id']+"',"+response['id']+",'"+response['first']+" "+ response['middle']+" "+response['last']+"');this.value='';}\"><br/></div></div>");
            }
        });
    }, 10000);
    return false
    });
});
</script>

<?php
session_start();
require"include/rawfeeds_load.php";

$user1_id=$_SESSION['id'];
if(isset($_POST['toid'])){

if($_POST['toid']==""){$_POST['toid']=$_SESSION['id'];}

if(isset($_POST['newmsg'])&isset($_POST['toid'])){
if($_POST['toid']==$_SESSION['id']){
rawfeeds_user_core::create_streamitem("1",$_SESSION['id'],$_POST['newmsg'],"1",$_POST['toid']);
}else{
rawfeeds_user_core::create_streamitem("3",$_SESSION['id'],$_POST['newmsg'],"1",$_POST['toid']);
}
}
}
$json = array();
$check = "SELECT streamitem_id FROM streamdata WHERE streamitem_creator='$user1_id' ORDER BY streamitem_id DESC";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['streamitem_id'] = $resultArr['streamitem_id'];

mysql_free_result($check1);

$check = "SELECT streamitem_timestamp FROM streamdata WHERE streamitem_creator='$user1_id' ORDER BY streamitem_timestamp DESC";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);
mysql_free_result($check1);

$check = "SELECT username, id, first, middle, last FROM users";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
$json['first'] = $resultArr['first'];
$json['middle'] = $resultArr['middle'];
$json['last'] = $resultArr['last'];

mysql_free_result($check1);

echo json_encode($json);

?> 
```

HTML/PHP 页面

```
<?php
if(isset($_SESSION['id']))
{
echo "<strong>Welcome ".$data['fullusersname']." </strong>";
}
else
{
echo "You don't belong here Please log in to your account <br/><a href=\"index.php\">Log in</a>!";
}

?>
</div>
<body>
<div id="responsecontainer"></div>

<?php
if(!isset($_SESSION['id'])){

}else{
?>
<? $user1_id=$_SESSION['id']; ?>

<link href="js/dependencies/screen.css" type="text/css" rel="stylesheet" />
<div class="userinfo"><div id="divider">
<div class="form">
<form id="myform"  method="POST"  class="form_statusinput">
<input type="hidden"  name="toid" id="toid" value="<?php echo $user1_id; ?>">
<input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
<div id="button_block">
<input type="submit" id="button" value="Feed">
</form>
</div></div></div></div></body>
<div id="homestatusid"></div>
<?php
//FRIENDSHIPS
$following_string=$_SESSION['id'];
$sql_follows="SELECT * FROM friends WHERE user1_id=".$_SESSION['id']." AND status=2 OR user2_id=".$_SESSION['id']." AND status=2";
$query_follows=mysql_query($sql_follows) or die("Error finding friendships");
if($query_follows>0){
$friendlist="(".$_SESSION['id'].",";
$t=0;
while($follow=mysql_fetch_array($query_follows))
{
if($follow['user1_id']==$_SESSION['id']){
if($t>0){
$friendlist=$friendlist.",";
}
$friendlist=$friendlist. $follow['user2_id'];
}else{
if($t>0){
$friendlist=$friendlist.",";
}
$friendlist=$friendlist. $follow['user1_id'];
}
$t=$t+1;
}
$friendlist=$friendlist.")";
}
//STREAMDATA
$badcall = "(".$_SESSION['id'].",)";
if($friendlist==$badcall){
$friendlist="(".$_SESSION['id'].")";
}
if(isset($_GET['limit'])){
$sqllimit = $_GET['limit'];
}else{
$sqllimit = 20;
}
$call="SELECT * FROM streamdata WHERE streamitem_target= $following_string OR streamitem_creator = $following_string OR streamitem_creator IN $friendlist AND streamitem_target IN $friendlist ORDER BY streamitem_timestamp DESC LIMIT 20";
$chant= mysql_query($call) or die(mysql_error());
$num = mysql_num_rows($chant);
if($num>0){
while($streamitem_data = mysql_fetch_array($chant)){
echo"<body><div id='divider-".$streamitem_data['streamitem_id']."'><div class='userinfo'>";
if($streamitem_data['streamitem_type_id'] == 1||$streamitem_data['streamitem_type_id'] == 3){
echo "";
}else{
echo "";
}
$poster_name = rawfeeds_user_core::getuser($streamitem_data['streamitem_creator']);
$target_name = rawfeeds_user_core::getuser($streamitem_data['streamitem_target']);
if($streamitem_data['streamitem_creator']==$_SESSION['id']){
echo "<div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('".$streamitem_data['streamitem_id']."');\">X</div>";} 
if($streamitem_data['streamitem_type_id'] == 1||$streamitem_data['streamitem_type_id'] == 3){
if(!($streamitem_data['streamitem_type_id']==1)){
echo "<a href='/profile.php?username=".$poster_name['username']."'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_creator'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";

echo "<a href='/profile.php?username=".$target_name['username']."'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_target'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";}
if(!($streamitem_data['streamitem_type_id']==3)){
echo "<a href='/profile.php?username=".$poster_name['username']."'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_target'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";}
$cont = stripslashes($streamitem_data['streamitem_content']);

if(!($streamitem_data['streamitem_type_id']==1)){
//$cont = htmlentities($cont);
$cont = ereg_replace("[[:alpha:]]+://[^<>[:space:]]+[[:alnum:]/]","<a class='user_link' href=\"\\0\">\\0</a>", $cont);
  $cont = eregi_replace('(((f|ht){1}tp://)[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
                '<a href="\\1">\\1</a>', $cont);
        $cont = eregi_replace('(((f|ht){1}tps://)[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
                '<a href="\\1">\\1</a>', $cont);
        $cont = eregi_replace('([[:space:]()[{}])(www.[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
        '\\1<a href="http://\\2">\\2</a>', $cont);
       $cont = eregi_replace('([_\.0-9a-z-]+@([0-9a-z][0-9a-z-]+\.)+[a-z]{2,3})',
        '<a href="mailto:\\1">\\1</a>', $cont);}

if($streamitem_data['streamitem_creator']==$streamitem_data['streamitem_target']){
echo "<a href='/profile.php?username=".$poster_name['id']."'>" . $poster_name['fullusersname']."</a><span class='subtleLink'> said </span>";
}else{
echo "<a href='profile.php?username=".$poster_name['username']."'>" .$poster_name['fullusersname']."</a>
<span class='subtleLink'>wrote on</span>
<a href='profile.php?username=".$poster_name['username']."'>" .$target_name['fullusersname']." 's</a> stream";}
echo "<br/><a href='#' class='subtleLink' style='font-weight:normal;'>".Agotime($streamitem_data['streamitem_timestamp'])."</a><hr>
<div style='padding-left:10px;padding-right:10px;'>";

if($streamitem_data['streamitem_type_id']==1){
$cont = nl2br($cont);
echo "<span class='subtleLink'>".$cont."</span>";
}else{

if($streamitem_data['streamitem_creator']==$streamitem_data['streamitem_target']){
$cont = nl2br($cont);
echo "<div>".$cont."</div>";
}else{
$cont = nl2br($cont);
echo "<div>'".$cont."</div>";
}
}
echo "<div style='height:20px;' class='post_contextoptions'>"; ?>
<?              
//COMMENTS
$sql="SELECT * FROM streamdata_comments WHERE comment_streamitem = '".$streamitem_data['streamitem_id']."' ORDER BY comment_datetime  ASC";
$query= mysql_query($sql) or die(mysql_error());
$num2= mysql_num_rows($query);

if($num2==0){
echo "<div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_".$streamitem_data['streamitem_id']."' onclick=\"toggle_comments('comment_holder_".$streamitem_data['streamitem_id']."');clearTimeout(streamloop);swapcommentlabel(this.id);\"> Write a comment...</a></div>";
}else{
echo "<div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_".$streamitem_data['streamitem_id']."' onclick=\"toggle_comments('comment_holder_".$streamitem_data['streamitem_id']."');clearTimeout(streamloop);swapcommentlabel(this.id);\"> Show Comments (".$num2.")</a></div>";
}
$streamid=$streamitem_data['streamitem_id'];

            $check      =   "SELECT feedback_id FROM streamdata_feedback WHERE feedback_streamid='$streamid' AND feedback_rating=1";
            $check1     =    mysql_query($check);
            $check2     =    mysql_num_rows($check1);

$check = rawfeeds_user_core::check_liked($_SESSION['id'],$streamitem_data['streamitem_id'],1);
echo "<div id='streamlike'><a id='likecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"likestatus(".$streamitem_data['streamitem_id'].",this.id);\">";
if($check==0){
echo "<div style='width:50px;' id='likesprint".$streamitem_data['streamitem_id']."'>Like</div></a>";
}else{
echo "<div style='width:50px;' id='likesprint".$streamitem_data['streamitem_id']."'>Liked (".$check2.")</div>";
}
echo"</div></form>";
$streamid=$streamitem_data['streamitem_id'];

            $check      =   "SELECT feedback_id FROM streamdata_feedback WHERE feedback_streamid='$streamid' AND feedback_rating=2";
            $check1     =    mysql_query($check);
            $check2     =    mysql_num_rows($check1);

$checkdislikes = rawfeeds_user_core::check_liked($_SESSION['id'],$streamitem_data['streamitem_id'],2);
echo "<div id='streamdislike'><a id='dislikecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"dislikestatus(".$streamitem_data['streamitem_id'].",this.id);\">";
if($checkdislikes==0){
echo "<div style='width:70px;' id='dislikesprint".$streamitem_data['streamitem_id']."'>Dislike</div></a>";
}else{
echo "<div style='width:70px;' id='dislikesprint".$streamitem_data['streamitem_id']."'>Disiked (".$check2.")</div>";
}
echo"</div></form>";
echo"</div></div></body>";
echo "<div class='stream_comment_holder' style='display:none;' id='comment_holder_".$streamitem_data['streamitem_id']."'><div id='comment_list_".$streamitem_data['streamitem_id']."'>";
$isfirst = 1;
if($num2>0){
while($comment = mysql_fetch_array($query)){
$poster = rawfeeds_user_core::getuser($comment['comment_poster']);
$post = stripslashes($comment['comment_content']);
echo "<div class='stream_comment' id='comment_".$comment['comment_id']."' ";
if($isfirst==1){
echo "style='margin-top:0px;' ";}
echo "><table width=100%><tr>";
echo "<td valign=top width=30px>
<img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$comment['comment_poster'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";                      
echo "<td valign=top align=left><a href='/profile.php?username=".$poster['username']."'>". $poster['fullusersname'] ."</a> <div class='commentholder'>".$post."</div><br/>";
$isfirst=2;
if($comment['comment_poster']==$_SESSION['id']){
echo"<div id='commentactivitycontainer'>";
echo "<a style='cursor:pointer;' onClick=\"deletecomment('".$comment['comment_id']."','comment_".$comment['comment_id']."');\">Delete</a>";

$streamid=$comment['comment_id'];

            $check      =   "SELECT feedback_id FROM streamdata_feedback WHERE feedback_streamid=$streamid AND feedback_rating=3";
            $check1     =    mysql_query($check);
            $check2     =    mysql_num_rows($check1);

$checklikes = rawfeeds_user_core::check_liked($_SESSION['id'],$comment['comment_id'],3);
echo "<a id='likecontext_".$comment['comment_id']."' style='cursor:pointer;' onClick=\"likestatuscomment(".$comment['comment_id'].",this.id);\">";
if($checklikes==0){
echo "<div style='width:80px; position:relative;  float:left; left:40px' id='likescommentprint".$comment['comment_id']."'>Like</div></a>";
}else{
echo "<div style='width:80px; position:relative;  float:left; left:40px' id='likescommentprint".$comment['comment_id']."'>Liked (".$check2.")</div>";
}
echo"</form>";

$streamid=$comment['comment_id'];

            $check      =   "SELECT feedback_id FROM streamdata_feedback WHERE feedback_streamid=$streamid AND feedback_rating=4";
            $check1     =    mysql_query($check);
            $check2     =    mysql_num_rows($check1);

$checkdislikes = rawfeeds_user_core::check_liked($_SESSION['id'],$comment['comment_id'],4);
echo "<a id='dislikecontext_".$comment['comment_id']."' style='cursor:pointer;' onClick=\"dislikestatuscomment(".$comment['comment_id'].",this.id);\">";
if($checkdislikes==0){
echo "<div style='width:90px; position:relative;top:-0px; float:left; left:200px' id='dislikescommentprint".$comment['comment_id']."'>Dislike</div></a>";
}else{
echo "<div style='width:90px; position:relative; top:-0px; float:left; left:200px ' id='dislikescommentprint".$comment['comment_id']."'>Disliked (".$check2.")</div>";
}
echo"</form>";
}
echo "</div></div></table></div>";}
}
echo "</div><div class='stream_comment_inputarea'><input type='text' name='content' style='width:100%;' class='input_comment' placeholder='Write a comment...'  onclick='growcommentinput(this);' autocomplete='off' onkeypress=\"if(event.keyCode==13){addcomment(".$streamitem_data['streamitem_id'].",this.value,'comment_list_".$streamitem_data['streamitem_id']."',".$_SESSION['id'].",'". $poster_name['fullusersname'] ."');this.value='';}\">";
}else{
// It's just a general update of some form. Comes here:
echo "<img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped".$streamitem_data['streamitem_creator'].".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a>";

$poster_name = rawfeeds_user_core::getuser($streamitem_data['streamitem_creator']);
$target_name = rawfeeds_user_core::getuser($streamitem_data['streamitem_target']);
$cont = stripslashes($streamitem_data['streamitem_content']);

if(!($streamitem_data['streamitem_type_id']==2)){
$cont = htmlentities($cont);
$cont = ereg_replace("[[:alpha:]]+://[^<>[:space:]]+[[:alnum:]/]","<a class='user_link' href=\"\\0\">\\0</a>", $cont);
}
if($streamitem_data['streamitem_creator']==$streamitem_data['streamitem_target']){
echo "<a href='/profile.php?username=".$poster_name['username']."'>" . $poster_name['fullusersname']."</a>";
}else{
echo "<a href='/profile.php?username=".$poster_name['username']."'>" .$poster_name['fullusersname']."</a>
<span class='subtleLink'>wrote on </span>
<a href='/profile.php?username=".$target_name['username']."'>" .$target_name['fullusersname']."'s</a> feed";
}
if($streamitem_data['streamitem_type_id']==2){
$cont = nl2br($cont);
echo "<div style='display:inline;' class='subtleLink'> ".$cont." </div>";
}else{
$cont = nl2br($cont);
echo "<span class='subtleLink'>".$cont."</span>";
}
echo "<br/><a href='#' class='subtleLink' style='font-weight:normal;'>".Agotime($streamitem_data['streamitem_timestamp'])."</a>";
}
//FINISH COMMENTS
echo "</div></div></div></div><iframe name='ifr2' id='ifr2' style='display:none;'></iframe>";
}
echo "</div></div>";
?>  
<div class="stream_show_posts" onClick="global_streamcount=global_streamcount+10;refreshstream();">Show More Posts</div>
<?php                   
}else{
echo "<div class='alert_noposts'>It looks like there are no posts yet. <p> Add some friends, or create a status yourself.</div>";
}
}
?> 
```

创建流功能

```
public function create_streamitem($typeid,$creatorid,$content,$ispublic,$targetuser){

            $content =  mysql_real_escape_string($content);
//          $content =  strip_tags($content);

            if(strlen($content)>0){

    $insert = "INSERT INTO streamdata(streamitem_type_id,streamitem_creator,streamitem_target,streamitem_timestamp,streamitem_content,streamitem_public) VALUES ($typeid,$creatorid,$targetuser,UTC_TIMESTAMP(),'$content',$ispublic)";
            $add_post = mysql_query($insert) or die(mysql_error());
            $last_id  = mysql_insert_id(); 
                if(!($creatorid==$targetuser)){
                    $fromuser=$creatorid;
                    $_SESSION['lastpost']==$content;
            }       
            return;
            }else{
            return false;
            }           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:36:15.767

如果使用`prepend()`，它实际上会将文本添加到 HTML 内容的顶部。所以，还是`.html()`按照[Preli](https://stackoverflow.com/users/561678/preli)说的那样使用比较好。

您可以将 替换`.prepend()`为`.html()`如下所示：

```
$("#homestatusid").html("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['streamitem_id']+"');\">X</div><a href='/profile.php?username="+response['username']+"'>"+response['first']+" "+ response['middle']+" "+response['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a><hr>"+newmsg+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+response['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+response['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a id='likecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+response['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'>Like</div></a><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'></div></div><div id='streamdislike'><a id='dislikecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+response['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'>Dislike</div></a><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'></div></div></div><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'><table width=100%><tr><td valign=top width=30px><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><td valign=top align=left><div class='stream_comment_inputarea'><input type='text' name='content' style='width:100%;' class='input_comment' placeholder='Write a comment...'  onkeyup='growcommentinput(this);' autocomplete='off' onkeypress=\"if(event.keyCode==13){addcomment("+response['streamitem_id']+",this.value,'comment_list_"+response['streamitem_id']+"',"+response['id']+",'"+response['first']+" "+ response['middle']+" "+response['last']+"');this.value='';}\"><br/></div></div>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:27:49.267

如果您不希望添加通过 ajax 加载的内容，而是替换您当前的内容，那么您不应该使用 prepend。

替换以下代码：

```
$("#homestatusid").prepend( ... 
```

有了这个

```
$("#homestatusid").html( ... 
```

# symfony - 更改 FOSUserBundle 上的登录页面

> ID：11809934
> 
> 赞同：0
> 
> 时间：2012-08-04T15:48:28.270
> 
> 标签：symfony, fosuserbundle

我安装了 FOSUserBundle，但我的设计要求登录表单出现在主页中，而不是单独的登录页面，而是包含在由我的 HomeBundle:Default:index 控制的主页中。

因此，如果您访问需要登录的页面，您将被重定向到我的主页，我的登录表单所在的位置。

为了做到这一点：我改变了`vendor > friendsofsymfony > user-bundle > FOS > Resources > routing > security.xml`

> ```
> <route id="fos_user_security_login" pattern="/login">
>     <default key="_controller">FOSUserBundle:Security:login</default>
> </route> 
> ```

指向显示我的主页的控制器。这有效（它显示了我的登录页面）但是问题来了，当我尝试登录时它永远不会让我登录，而是显示相同的页面。输入的名称是正确的，也是“动作”，与默认登录表单的值相同。

如果我默认使用登录页面，它会让我登录，所以数据库没问题。我试图打印登录过程可能会导致打印 $error 找出此代码的错误：

> $request = $this->container->get('request'); /* @var $request \Symfony\Component\HttpFoundation\Request */ $session = $request->getSession(); /* @var $session \Symfony\Component\HttpFoundation\Session */

```
 // get the error if any (works with forward and redirect -- see below)
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } elseif (null !== $session && $session->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    } else {
        $error = '';
    }

    if ($error) {
        // TODO: this is a potential security risk (see http://trac.symfony-project.org/ticket/9523)
        $error = $error->getMessage();
    }
    // last username entered by the user
    $lastUsername = (null === $session) ? '' : $session->get(SecurityContext::LAST_USERNAME);

    $csrfToken = $this->container->get('form.csrf_provider')->generateCsrfToken('authenticate'); 
```

但似乎没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:40:31.037

重写文件夹 Resources/views/Security/ 中的文件 login.html.twig

基本代码是：

```
{% extends "FOSUserBundle::layout.html.twig" %}

{% block fos_user_content %}
{% if error %}
    <div>{{ error|trans({}, 'FOSUserBundle') }}</div>
{% endif %}

<form action="{{ path("fos_user_security_check") }}" method="post">
    <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />

    <label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
    <input type="text" id="username" name="_username" value="{{ last_username }}" required="required" />

    <label for="password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
    <input type="password" id="password" name="_password" required="required" />

    <input type="checkbox" id="remember_me" name="_remember_me" value="on" />
    <label for="remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>

    <input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />
</form>
{% endblock fos_user_content %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T21:31:59.957

也不要忘记覆盖 getParent 方法。正如文档所说。

```
<?php

namespace Acme\UserBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;
class AcmeUserBundle extends Bundle
{
    public function getParent()
   {
    return 'FOSUserBundle';
   }
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:17:30.117

您可以按照[此处](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)的说明覆盖模板`login.html.twig`。

我已经做到了。

# jquery - 从页面加载 div .. 从类的 href

> ID：11809935
> 
> 赞同：0
> 
> 时间：2012-08-04T15:48:44.093
> 
> 标签：jquery, modal-dialog, colorbox, html-content-extraction

我的页面有很多带有`<a href>`'s 的 div 来打开模态框（颜色框）。这些链接打开的页面有一个`id="mainColumn"`. 只需从此 id 加载内容。

```
<div>                       
<a href="includes/page_1.html" class="pop"></a>
</div>

<div>                       
<a href="includes/page_2.html" class="pop"></a>
</div>

<div>                       
<a href="includes/page_3.html" class="pop"></a>
</div>

 $(".pop").colorbox({
    href: $(".pop").attr('href') + " #mainColumn"
    }); 
```

al的href`<a>`变成了第一个...

因此，includes/page_3.html 更改为 includes/page_1.html 或换句话说：所有的模态框都显示相同的内容......

`$(this)`给我未定义的内容

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T15:51:20.030

在 colorbox 的选项中，您引用了*第一个*元素的`$(".pop").attr('href')`哪个 get`href`属性。您必须将其包装到方法调用中。 *`.pop``each`*

 *```
$(".pop").each(function() {
  var el = $(this);
  el.colorbox({
    href: el.attr('href') + " #mainColumn"
  });
}); 
```*

# c++ - 向量下标超出范围错误信息

> ID：11809936
> 
> 赞同：1
> 
> 时间：2012-08-04T15:49:01.093
> 
> 标签：c++

我正在尝试一个项目 euler 问题，第一个问题是它要求您计算 1000 以下的所有 3 和 5 的倍数之和。我尝试了它，它没有显示任何错误，但是当我运行它时，我收到一条消息错误框：

```
Microsoft Visual C++ Debug Library

Debug Assertion Failed!

Program: ...\c++ learning\project euler ex 1\Debug\project euler ex 1.exe
File: c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\vector
Line: 932

Expression: vector subscript out of range

For information on how your program can cause an assertion
failure, see the Visual C++ documentation on asserts.

(Press Retry to debug the application)

Abort   Retry   Ignore 
```

这是代码：

```
#include <iostream>
#include <vector>
#include <numeric>

using std::endl; using std::cout;
using std::vector;

int main()
{
vector<int> five;
vector<int> three;
int x;
int y;
int sum;

for(int i = 0; i < 1000; i = i + 5)
{
    five.push_back(i);
}

for(int i = 0; i < 1000; i = i + 3)
{
    three.push_back(i);
}

for(vector<int>::iterator it = five.begin(); it != five.end(); ++it)
{
    if (five[*it] % 3 == 0)
    {
        it = five.erase(it);
    }
}

for(vector<int>::iterator it = three.begin(); it != three.end(); ++it)
{
    if (three[*it] % 5 == 0)
    {
        it = three.erase(it);
    }
}

x = accumulate(five.begin(), five.end(), 0);
cout << x << endl;

y = accumulate(three.begin(), three.end(), 0);
cout << y << endl;

sum = x + y;
cout << sum << endl;
system("PAUSE");
return 0;
} 
```

我知道有一种更简单的方法可以解决这个问题，但是我仍在学习 c++ 并想尝试使用我最近学到的一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T15:52:43.373

[`std::vector<T>::erase`](http://en.cppreference.com/w/cpp/container/vector/erase)将在最后一个删除的元素之后返回一个迭代器。如果删除最后一个元素，则返回的迭代器将为`end()`. 然后你增加迭代器并得到一个异常。此外，即使您不删除最后一个条目而是另一个条目，您仍然会忽略以下元素。

顺便说一句，你想用什么来实现`five[*it]`？迭代器的作用类似于指向容器中给定元素的指针。要么使用带有`int i` and的简单 for 循环`five[i]`（这将具有我上面提到的相同问题）*或* `*it`. ^*

请尝试以下代码：

```
for(vector<int>::iterator it = five.begin(); it != five.end();)
{
    if (*it % 3 == 0)
    {
        it = five.erase(it);
    }
    else
         ++it;
} 
```

[* 虽然您的迭代器的值确实是它自己的键，但这只会持续到您第一次更改向量。所以在你第一次擦除之后`five[*it] != *it`。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:59:25.137

我认为您要实现的目标是由前两个`for`循环完成的。第一个循环将收集所有 3 的整数倍数，第二个循环将收集所有 5 的整数倍数。执行擦除的循环是多余的（在这些循环中，您使用`erase`循环中已经使用的迭代器存在问题）

# google-api-client - 如何在 Google PHP API 客户端中使用 apiHttpClient

> ID：11809944
> 
> 赞同：0
> 
> 时间：2012-08-04T15:51:11.770
> 
> 标签：google-api-client

我一直在这个问题上打我的头；“ **apps ”下的**[PHP 客户端库](http://code.google.com/p/google-api-php-client/)中提供的示例展示了如何使用 apiHttpRequest 类向 Provisioning API 发出 HTTP 请求。该示例显示了如何列出和删除域中的用户（即启用的应用程序），但我有时间了解如何发布到配置 API（提要），因为我想使用 apiHttpRequest 以编程方式创建组。对此的任何帮助将不胜感激！

 **我已包含用于删除用户的代码示例

```
// Deleting a User Alias from a Domain (Experimental)
  $domain = "example.com";
  $user = rawurlencode("user@domain.com");
  $req = new apiHttpRequest("https://apps-apis.google.com/a/feeds/alias/2.0/$domain/$user", 'DELETE');
  $resp = $client::getIo()->authenticatedRequest($req);
  print "<h1>Deleting a User Alias from a Domain</h1>: <pre>" . $resp->getResponseBody() . "</pre>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:54:57.550

哦！我明白了，必须创建一个**Atom XML**模型并将其作为字符串传递。有没有更优雅的方法来处理这个？我们没有使用 Zend，所以我们必须自己创建它。**

# html - 画廊到处移动

> ID：11809949
> 
> 赞同：0
> 
> 时间：2012-08-04T15:52:07.720
> 
> 标签：html, css

我的主页上有一个画廊插件-> [http://tranceil.fm](http://tranceil.fm)

它设置为这些 css 规则：

```
box_skitter {
    position: relative;
    width: 985px;
    height: 560px;
    margin: 52px auto 32px;
    background: black;
} 
```

如果您查看该网站，则该画廊并不完全对齐。我想把它向右移动一点。但是每当我尝试这样做时，如果我调整窗口大小，它就会失去控制并四处移动。

我怎样才能在不调整大小的情况下移动它？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:56:21.170

使用 left 属性而不是 margin

```
 box_skitter {
  position:relative;
  width: 985px;
  height: 560px;
  left: 52px;//will move the div to 52px right
  background: black;} 
```

编辑：由于 box_skitter 不是 HTML 元素，所以如果它是 ID 则执行

```
 #box_skitter {
      position:relative;
      width: 985px;..... 
```

如果是上课那么

```
.box_skitter {
  position:relative;
  width: 985px;.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:00:30.657

试试这个

```
.box_skitter {
position: relative;
width: 985px;
height: 560px;
margin: 52px auto 32px;
background: black;
left: 19px;
} 
```

# mysql - MySQL数据库消失

> ID：11809951
> 
> 赞同：0
> 
> 时间：2012-08-04T15:52:41.327
> 
> 标签：mysql, database

我犯了一个愚蠢的错误，我`cut`将文件夹中的数据库文件`/var/lib/mysql`夹`paste`放入我的外部硬盘驱动器，因为我的硬盘几乎已满。

现在我将数据库文件夹复制回原来的 mysql 文件夹，我无法再访问数据库，phpmyadmin 说它是一个空数据库。

有没有办法恢复旧数据库？如果它永久消失对我来说将是一个很大的痛苦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:55:23.797

你的桌子的引擎是什么？InnoDB 还是 MyISAM？如果是 MyISAM，那么是的，如果您仍然拥有所有文件，它们可以恢复，但如果类型是 InnoDB，那么可能会有一些问题

将文件粘贴回原始目录后，您也必须重新启动 mysql 服务器。

# oracle - 检查oracle日志目录

> ID：11809953
> 
> 赞同：1
> 
> 时间：2012-08-04T15:52:59.350
> 
> 标签：oracle, nagios, command-substitution, file-monitoring

我正在使用 check_logfiles nagios 插件来监控 Oracle 警报日志。为此目的，它非常有效。

但是，我还需要监视整个 oracle 跟踪日志目录中的错误。这是因为 oracle 数据库总是创建具有不同名称的新日志文件。

我需要知道的是扫描整个 oracle 跟踪日志目录以找出哪些匹配指定 oracle 警报的模式的最佳方法。

使用检查日志文件我尝试指定这些选项 -

```
--criticalpattern='ORA-00600|ORA-00060|ORA-07445|ORA-04031|Shutting
 down instance' 
```

并指定日志目录 -

```
--logfile='/global/cms/u01/app/orahb/admin/opbhb/udump/' 
```

和

```
--logfile="/global/cms/u01/app/orahb/admin/opbhb/udump/*" 
```

两者都没有任何效果。检查运行但返回正常。有谁知道这个名为 check_logfiles 的 nagios 插件是否可以监视文件目录而不仅仅是单个文件？或者也许还有另一种更好的方法来实现监视一堆无法提前指定的文件的相同目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T20:34:52.707

使用以下脚本：

*   打开每个文件
*   复制与模式匹配的条目
*   将匹配项输出到文件

# django - Django 用户集属性和反向关系

> ID：11809957
> 
> 赞同：1
> 
> 时间：2012-08-04T15:54:05.427
> 
> 标签：django

我在我的views.py 页面中使用下面的代码来呈现一个html 页面。这段代码来自一本 Django 书，我试图理解 bookmark_set 属性。

视图.py

```
def user_page(request, username):
    try:
        user = User.objects.get(username=username)
    except User.DoesNotExist:
        raise Http404(u'Requested user not found')

    bookmarks = user.bookmark_set.all()

    template = get_template('user_page.html')

    variables = Context({'username':username, 'bookmarks':bookmarks})

    output = template.render(variables)
    return HttpResponse(output) 
```

模型.py

```
from django.db import models
from django.contrib.auth.models import User

class Link(models.Model):
    url = models.URLField(unique=True)

class Bookmark(models.Model):
    title = models.CharField(max_length=200)
    user  = models.ForeignKey(User)
    link  = models.ForeignKey(Link) 
```

当我在 Python shell 中运行这段代码时，出现以下错误

```
from django.contrib.auth.models import User
from bookmarks.models import *
user=User.object.get(id=1)
user.bookmark_set.all() 
```

> 属性错误：“用户”对象没有属性“书签集”

为什么我会收到此错误？

User 的 set 属性是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:01:25.577

该`bookmark_set`属性提供了一种方便的方式来遍历反向关系，即获取用户的所有书签。您可以[在文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)中阅读更多相关信息：

> Django 还为关系的“另一端”创建 API 访问器——从相关模型到定义关系的模型的链接。例如，博客对象 b 可以通过 entry_set 属性访问所有相关条目对象的列表：b.entry_set.all()。

您实际上可以通过[`related_name`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)在模型中提供 a 来指定反向关系属性的名称：

```
class Bookmark(models.Model):
    user  = models.ForeignKey(User, related_name="bookmarks")

$ myuser.bookmarks.all() 
```

您是否确实通过运行在数据库中创建了模型`python manage.py syncdb`？看起来你做的一切都是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-13T08:20:22.320

我不知道为什么，但添加这个；`select_related()`它适用于我的情况。

```
user=User.object.select_related().get(id=1)
user.bookmark_set.all() 
```

# solr - Railo 上的 Solrj 超时

> ID：11809969
> 
> 赞同：0
> 
> 时间：2012-08-04T15:56:14.757
> 
> 标签：solr, solrj, railo, coldbox, javaloader

尝试对运行 solr 4.0 的远程 solr 服务器进行 solrj 更新时，我们遇到了超时。我们用于进行更新的服务器是运行 Railo 版本 3.3.5.002 和 Windows 2008 R2 的 Railo Apache Tomcat 服务器。

我们正在使用 ColdBox 的 javaloader 来实例化所需的 jar。我们觉得 Railo 上发生了一些事情导致了这个超时；但是我们一直无法追查到它。这是超时的 stackstrace 的链接。

[http://pastebin.com/pBSmV0cT](http://pastebin.com/pBSmV0cT)

我们使用的罐子
apache-solr-solrj-4.0.0-ALPHA.jar
commons-codec-1.6.jar
commons-io-2.1.jar
httpclient-4.1.3.jar
httpcore-4.1.4.jar
httpmime-4.1 .3.jar
jcl-over-slf4j-1.6.4.jar
slf4j-api-1.6.4.jar
tika-app-1.2.jar
wstx-asl-3.2.7.jar

# delphi - 点击透明表单

> ID：11809973
> 
> 赞同：6
> 
> 时间：2012-08-04T15:56:41.367
> 
> 标签：delphi, transparent

我有一个半透明的全屏表单，我需要可以通过这个表单控制我的电脑。

实际上，我们需要在计算机上使用红色屏幕过滤器来观察天空，但我们不想使用红色有机玻璃之类的东西。

我尝试了 Windows API（监视器配置功能） [http://msdn.microsoft.com/en-us/library/windows/desktop/dd692964](http://msdn.microsoft.com/en-us/library/windows/desktop/dd692964%28v=vs.85%29.aspx) (v=vs.85).aspx 但我做不到。我做了像红色滤镜这样的透明表格（一切看起来都是红色和黑色的色调），但我无法通过我的表格控制计算机。有人帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T17:02:53.883

创建一个新的 VCL 项目。在主窗体的属性中，设置`Color`为`clRed`, `AlphaBlend`to `true`, `AlphaBlendValue`to `127`, `WindowState`to `wsMaximized`, `FormStyle`to `fsStayOnTop`, 添加如下代码：

```
type
  TForm1 = class(TForm)
  private
  protected
    procedure CreateParams(var Params: TCreateParams); override;

...

procedure TForm1.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.ExStyle := Params.ExStyle or WS_EX_LAYERED or WS_EX_TRANSPARENT;
end; 
```

（[示例视频](http://privat.rejbrand.se/transplayer.mp4)，[示例编译的EXE](http://privat.rejbrand.se/transplayer.exe)，[源代码](http://privat.rejbrand.se/transplayer.zip)）

# php - 在 PHP 中加载 XML 本地文件

> ID：11809976
> 
> 赞同：2
> 
> 时间：2012-08-04T15:57:10.613
> 
> 标签：php, load, local, load-data-infile

我正在尝试将 .xml 文件从我的 ftp 服务器加载到我的 mysql 数据库中。当我在数据库中作为 sql 命令执行此操作时，它工作得非常好。

但是当我尝试用 PHP 来做时，它不起作用。我尝试了很多不同的方法。

SQL 命令。

```
 LOAD XML LOCAL INFILE 'min_url' INTO TABLE table_name ROWS IDENTIFIED BY '<product>' 
```

我的 PHP 看起来像这样。

```
$sql = " LOAD XML LOCAL INFILE 'min_url' INTO TABLE table_name ROWS IDENTIFIED BY '<product>'";

$result = mysql_query($sql); 
```

所以我试图用 PHP 做同样的事情。我什至“为我的数据库中的命令创建了 php 代码”，但它仍然无法正常工作。mysql_query 之前的一切都很好。

版本服务器版本：5.5.24-0ubuntu0.12.04.1-log

```
Apache/2.2.12 (Ubuntu)
MySQL klientversion: 5.1.37
PHP-tillägg: mysqli 
```

# mysql - MySQL：使用 INDEX 但仍然很慢

> ID：11809977
> 
> 赞同：1
> 
> 时间：2012-08-04T15:57:14.097
> 
> 标签：mysql

我正在使用 mysql **[InnoDB engine]**索引但是查询响应仍然很慢（响应时间高）：

我在这里研究了MySql中的[全文搜索](http://www.designaeon.com/full-text-search-in-mysql/)

> 我们无法在 Mysql 默认的 innoDB 存储引擎表上实现。

我创建了一个自动建议，其中用户键入**城市**名称，然后我的查询获取`City, Country`名称格式。

```
$search = $_GET['term'];
mysql_query("CREATE INDEX index_plc ON projects(pro_loc_city)");
$result = mysql_query("SELECT CONCAT_WS(', ', p.pro_loc_city, c.country_name) 
                       as location FROM projects p
                   LEFT JOIN countries c ON c.country_id = p.country_id 
                   WHERE p.pro_loc_city LIKE '%$search%' 
                   GROUP BY p.country_id") or die('Something went wrong');
mysql_query("DROP INDEX index_plc ON projects"); 
```

在萤火虫中，响应时间约为 5 到 3 秒。

![在此处输入图像描述](../Images/d1ab805ab467608116fe6b4c9ca7bc80.png)

**项目表**

```
----------------------------------
pro_id | pro_loc_city | country_id
----------------------------------
   1     Karachi          50
   2     Lahore           60
   3     Karachi          50
   4     Abc              70
   5     Karachi          50 
```

**国家**

```
-------------------------
country_id | country_name
-------------------------
   50         Pakistan
   60         A Country
   70         B Country 
```

这就是萤火虫所说的。

![在此处输入图像描述](../Images/7051dd24e714be4b26bfbad9cbce4c2d.png)

请指导我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:13:09.517

在大表上创建索引是一项昂贵的操作。在大多数情况下，索引会保留下来。创建一个，执行一个查询并删除它 - 不会帮助速度。尝试创建索引，离开它并再次查询:)

# .net - 从另一个应用程序获取标签（静态）文本

> ID：11809978
> 
> 赞同：1
> 
> 时间：2012-08-04T15:57:17.003
> 
> 标签：.net, vb.net, stringbuilder

我在网上和这里都进行了研究，但我还没有看到任何人和我有同样问题的人。

我使用*AutoIt Window Info*工具来获取另一个应用程序标签（静态）ID。*AutoIt Window Info*工具为我提供了该控件（标签）的 ID。所以我可以使用以下代码获取该文本：

```
For Each pr As Process In Process.GetProcessesByName("AnotherAppExeName")

    Dim sb as New StringBuilder
    sb.Capacity = 500
    GetDlgItemText(pr.MainWindowHandle, 1044, sb, sb.Capacity)

    '1044 Is the ID of another application's label
    'I print the string:

    MessageBox.Show(sb.ToString)
Next 
```

这行得通。我可以从另一个应用程序获取控件的文本 (id:1044)。但是另一个应用程序有很多标签，我只能得到一个 ID 为 1044 的应用程序。例如，还有另一个 ID 为 1043 的标签，但是当我应用相同的内容时，它返回一个空字符串。

我能做些什么来解决这个问题？

AutoIt Window Info Tool 的屏幕：

![AutoIt](../Images/64961292bb5c3ffb2e16f1ef848af307.png)

# c# - 使用带有实体框架的存储库和单元工作模式正确处理？

> ID：11809979
> 
> 赞同：10
> 
> 时间：2012-08-04T15:57:27.837
> 
> 标签：c#, entity-framework-4, repository, dispose, unit-of-work

干杯！我对将工作单元与存储库一起使用有些疑问。特别是实体框架中的子上下文角色。我已经搜索了很多关于这个主题的信息，但我发现的只是不同类型的使用模式，我很困惑，我无法理解主要思想。

1.我应该在哪里实现配置和保存？- 在 DbContext 的 Inheritance 类中是否正确实现 Disposable？之后在 Repository 和 Unit of Work 中实现还是在 Uni fo Work 中实现？

- 将方法保存在工作单元或存储库中的位置？

我的存储库将是通用的 我的代码在架构师风格和其他细节上是否正确？请告诉我的想法是否错误。

```
 interface IRepository : IDisposable
    {
        void Create();
        void Delete();
        void Update();
        void Get();
        T getSomeByExpression()
        ...Some another costum operations
        ...should I remember about Save here? 
    }

    class Repository : IRepository
    {
        SomeContext context = new SomeContext();
        ...Using using(context = new SomeContext()){} in functions??
        ... 
        ....Disposing?
    }

    interface IUnitOfWork : IDisposable
    {
     ...Which methods I should realize?
    Commit()
    Save()
    ...Need some another methods like rollback, Attach() Add() or Dispose or something else?
    }
    class UnitOfWork
    {
     ...Collection of Repository

    } 
```

在逻辑级别的工作单元之后使用？请帮助我理解这个主题。

我想知道，如何正确使用 Unit Of Work 和 Repository 模式，特别是包括 DBContext。我还想知道在哪里使用一些操作，如 Dispose。UnitOfWork一般应该在哪些操作，Save等。如何在repository中配置上下文？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T16:04:47.383

这是一篇关于使用 MVC 实现工作单元的[精彩文章](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。

一旦业务交易完成，我通常会处置该单位。例如，如果该操作是创建一个父级、一些子级并附加它们，我会在完成后立即处理。

添加了与上述相关的更多详细信息：

在重读你的问题时，听起来你想要更多关于工作单元理论而不是实际实现的信息，我很抱歉。

[这是MSDN上](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)与此相关的更好的文章，但我会为您总结。

> 根据 Martin Fowler 的说法，工作单元模式“维护受业务事务影响的对象列表，并协调更改的写入和并发问题的解决”。

通常，我使用工作单元模式将所有相关的存储库汇集在一起​​，以解决并发问题，同时仍然保持存储库分离。

> 使用工作单元模式的最佳方法之一是允许不同的类和服务参与单个逻辑事务。这里的关键点是您希望不同的类和服务在能够参与单个事务的同时保持彼此不了解。

*   “我应该在哪里实现处置和保存？”

我不确定我是否完全理解您的问题，但我想您是在问什么应该管理工作单元的生命周期？

这是与此相关的另一篇[SO 帖子](https://stackoverflow.com/questions/4942953/unit-of-work-pattern)，但摘要是目前拥有该工作单元的任何内容，它与您如何设置工作单元的范围有关。例如，它可以是业务命令或 MVC 操作。

*   “在 DbContext 的 Inheritance 类中正确实现 Disposable？之后在 Repository 和 Unit of Work 中实现还是在 Uni fo Work 中实现？”

你的意思是，你应该在哪里处理 DbContext？我认为它应该在工作单元中。如果您在单个工作单元中创建/处理多个上下文，也许您应该将它们分成 2 个不同的单元。

*   在工作单元或存储库中将方法保存在哪里？

您的工作单元是处理上下文和事务，并且应该包含防止重复更新的逻辑，因此您的保存功能应该由您的工作单元控制。

# magento - TypeError: element is null [Break On This Error] element.style.display = 'none'; 在 magento 中

> ID：11809983
> 
> 赞同：0
> 
> 时间：2012-08-04T15:57:45.367
> 
> 标签：magento

我面临加载magento onepage checkout的问题。当我单击继续结帐按钮时，单页结帐未完全加载，它仅加载 2 个步骤，当我通过萤火虫检查它时，它显示错误

> TypeError: element is null [Break On This Error] element.style.display = 'none'; 在 magento 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:54:52.623

我有同样的问题。就我而言，这是因为在 checkout.js 中的事件中，它显示并隐藏了一些我已删除的元素。所以应用程序正在搜索它们并返回 null，因为它找不到它。检查您已删除或评论的步骤。

# css - css 和 js 文件应该在哪里托管？

> ID：11809984
> 
> 赞同：1
> 
> 时间：2012-08-04T15:57:47.383
> 
> 标签：css

我正在开发一个滑块。客户（非技术人员）想要一个滑块，他可以轻松地使用和分发给人们，而其他非技术人员可以轻松地将其安装在他们的网站上。我已准备好使用滑块，但我遇到了一个问题，我应该在哪里托管所有核心 .css 和 .js 文件？如果我尝试将它们托管在我的客户托管上，非技术人员如何在不编辑其 html 代码的情况下使用它？

我正在寻找一种解决方案，其中客户端只需将代码粘贴到网站中并且滑块开始工作（因为他一直在使用小部件）。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:09:28.950

如果您有带宽，请将它们托管在您的服务器上。

无需单独的 HTML 和 JS 文件，而是通过 JS（即。`document.write(...)`）创建所有 HTML，然后您的客户端只需像这样粘贴脚本标记：

```
<script type="text/javascript" src="http://yourdomain.com/widgets/slider.js"></script> <!-- Slider --> 
```

# javascript - 在 img.src 更改后强制 firefox 重新加载图像

> ID：11809985
> 
> 赞同：6
> 
> 时间：2012-08-04T15:57:48.843
> 
> 标签：javascript, html, firefox, canvas

我正在修改画布上的一些图像，然后将这些图像的 src 设置为新的 base64 编码图片。

```
img.src = changeColor(img); 
```

changeColor 返回 base64 编码的图像：

```
return canvas.toDataURL(); 
```

Chrome 和 Opera 会在 src 更改后刷新图像，但 firefox 不会！我还通过 FireBug 检查了图像元素，它显示了新的 src 和新的图像！

我已经尝试将数据添加到 URL 但呃......这是一个 base64 编码的图像，而不是一个 url，所以它完全破坏了我的图片。

我有什么方法可以通过 javascript 强制重新加载图像或禁用 firefox 缓存？

更新：我也尝试设置 image.src=''; 在 changeColor 函数中。它适用于 chrome，但在 Firefox 中...图片消失，并且在我设置新的 base64 值时不再出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T17:05:53.817

我没有使用图像数据，但这适用于当 src 变量未更改时 FF 未重新加载的类似问题：

```
image.src = "";
setTimeout(function(){
    image.src = //the new image src
}, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T10:55:35.607

正如@dmmd 提到的那样，它对我有用。您只需要添加具有随机值的查询字符串。

```
id.src = "path?t=t"+ Math.random(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:34:22.483

尝试添加图像格式（并使用 jpg）。它可能会重新编码图像：

```
return canvas.toDataURL('image/jpg'); 
```

# html - 如何禁用 Webkit 通知？

> ID：11809986
> 
> 赞同：5
> 
> 时间：2012-08-04T15:58:13.570
> 
> 标签：html, webkit, html5-notifications

有没有办法让用户选择禁用 webkitNotifications？如果我`requestPermission()`第二次打电话，它不会提示用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T14:47:10.880

我只请求权限一次，然后让用户配置他是否想从配置面板接收通知。

您可以将此选项存储在服务器或客户端的数据库中，使用`localStorage`.

## 显示通知

```
if (notificationsEnabled) {
    var notification = new window.Notification("Hello");
} 
```

## 加载时恢复设置

```
$(function () {
    notificationsEnabled = JSON.parse(localStorage.getItem('notificationsEnabled') || false);
    $('#notificationsEnabled').prop('checked', notificationsEnabled);

    if (!window.Notification) {
        $('#notificationsEnabled').prop('disabled', true);
    }
}); 
```

## 设置

```
<label>
    <input id="notificationsEnabled" name="notificationsEnabled" type="checkbox">
    Enable notifications
</label> 
```

# 处理复选框上的 onchange 事件

```
$('#notificationsEnabled').on('change', function() {
    notificationsEnabled = !notificationsEnabled;
    localStorage.setItem('notificationsEnabled', notificationsEnabled);
    if (notificationsEnabled && window.Notification.permission === 'default') {
        window.Notification.requestPermission();
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T17:46:18.393

您可以尝试在代码中预设用户对通知的偏好：

[http://developer.apple.com/library/safari/#documentation/AppleApplications/Conceptual/SafariJSProgTopics/Articles/SendingNotifications.html](http://developer.apple.com/library/safari/#documentation/AppleApplications/Conceptual/SafariJSProgTopics/Articles/SendingNotifications.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T08:41:49.513

如果你在 Chrome 中试试这个：

1.  调出菜单（隐藏在地址栏的右侧）
2.  点击“**设置**”
3.  点击“**显示高级设置...** ”
4.  在“**隐私**”下单击“**内容设置**”
5.  在“**通知**”下单击“**管理例外**”

您可以在那里重置通知。

# jquery - Jquery 移动按钮图标

> ID：11809987
> 
> 赞同：2
> 
> 时间：2012-08-04T15:58:21.077
> 
> 标签：jquery, jquery-mobile

我正在使用一个 jquery 移动应用程序，但图标按钮没有显示出来。我为图标的正确路径编辑了 css 文件，但它们仍然没有显示。感谢您提前提供任何帮助。

这是我制作按钮的代码

```
 <div data-role="content">
    <a href="new.html" data-role="button" data-icon="arrow-r" data-iconpos="right" data-theme="e">Capture New</a>
    <a href="settings.html" data-role="button" data-icon="arrow-r" data-iconpos="right" data-theme="e">Settings</a>
    <a href="timeline.html" data-role="button" data-icon="arrow-r" data-iconpos="right" data-theme="e">Timeline</a> 
</div><!-- /content --> 
```

这是我在标题中加载的内容

```
 <meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel = "stylesheet" href="assets/css/jquery.mobile-1.0.1.min.css" />
<script src="assets/js/jquery.js"></script>
<script src="assets/js/jquery.mobile-1.0.1.min.js"></script> 
```

这是按钮的裁剪屏幕截图。由于某些奇怪的原因，这些图标没有显示。 ![这是按钮的裁剪屏幕截图](../Images/c943e3b52ba667f7288fdb552b4e6ff0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:53:39.213

我的猜测是您没有正确上传与 CSS 样式表关联的图像目录。如果您在开发人员工具中查看控制台或网络选项卡，您应该会收到一条错误消息，指出无法找到图标精灵。

这是您的独立代码，但使用 jQuery Mobile 文件的 CDN 版本连接：http: [//jsfiddle.net/wzMRz/](http://jsfiddle.net/wzMRz/)。您可以看到图标按需要显示。

如果您自己托管 jQuery Mobile 文件，请确保托管`/images/`包含 jQuery Mobile 包含的 ZIP 文件中的目录。此目录需要与 CSS 样式表位于同一目录中，以便样式表可以正确引用图像（或者如果您想移动精灵，您只需更新样式表中的 URL 以反映） .

# asp.net-mvc - 如何从 iframe 中的页面获取浏览器语言？

> ID：11809991
> 
> 赞同：1
> 
> 时间：2012-08-04T15:58:57.293
> 
> 标签：asp.net-mvc, iframe, facebook-iframe

我可以使用 Request.UserLanguages 在页面中获取浏览器语言，但是如果该页面在 iFrame 中，似乎没有语言？如何从父 iFrame 获取此信息？

这个 iframe 实际上是一个 Facebook iFrame 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:03:59.583

由于跨域安全性，如果页面位于同一域和调用 i-frame 的页面上，您将只能查询有关页面的信息。

> “事实上，i-frame 由 Facebook 控制，你将无法进行 XSS。”

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

如果您控制 i-frame，并且它是 php，您可以“自担风险”公开文档，将此代码段添加到您的 php 文档顶部，然后再添加所有其他代码。

```
<?php
header('Access-Control-Allow-Origin: *');
?> 
```

然后您可以像往常一样继续使用 JavaScript 获取信息。

# ruby-on-rails - 重新启动后出现“当前未安装程序 'ruby'”错误

> ID：11809993
> 
> 赞同：0
> 
> 时间：2012-08-04T15:59:20.493
> 
> 标签：ruby-on-rails, ruby, ubuntu

更新所有软件包所需的重新启动后，

```
ruby -v 
```

不起作用。它说也没有安装rails，但我想应该是类似的问题。当我做：

```
sudo apt-get install ruby 
```

它说已经安装了最新版本。当我做：

```
dpkg -L ruby 
```

我得到以下输出：

```
/.
/usr
/usr/bin
/usr/share
/usr/share/doc
[and other stuff..] 
```

但我意识到 $PATH 已经包含 /usr/bin：

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
:/sbin:/bin:/usr/games:/home/ubuntu/.rvm/bin 
```

我可以知道为什么我仍然收到以下错误消息吗？：

```
The program 'ruby' is currently not installed.  You can install it by typing:
sudo apt-get install ruby 
```

我的 .bashrc 也已经有了这个：

```
PATH=$PATH:$HOME/.rvm/bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:15:45.927

dpkg 将检查它维护的数据库，而尝试执行 ruby​​ 使用 PATH。如果我没记错的话，Ubuntu 有一个配置为在任何命令无法解析时执行的 bash 处理程序；似乎它只是显示该通用消息，而不是先检查 dpkg 。

ruby 可能已从您的文件系统（或至少它以前所在的目录）中消失，或者您的 PATH 已更改。

如果执行“which ruby​​”和“where ruby​​”会得到什么？

最后，Ubuntu 可能会抱怨某个程序在存在时无法找到。这发生在运行 64 位版本的 Ubuntu 且未安装必要的 x86 库并尝试执行 32 位二进制文​​件时。但是，我记得错误消息更像是“找不到文件”。