# StackOverflow 问答 10890000-10890999

# javascript - 如何在javascript中动态添加和更改div？

> ID：10890000
> 
> 赞同：1
> 
> 时间：2012-06-05T00:06:05.213
> 
> 标签：javascript, html

我有以下代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

function timeMsg()
{
var t=setTimeout("enterquestion()",900000);
}

function enterquestion()
{
document.getElementById("questions").innerHTML += '<p>'  + document.getElementById("question").value;

}
</script>
</head>
<body>

<h1>Testing Website</h1>
<p id="questions"></p>

<input type="text" name="question" id="question" />
<button type="button" onclick="timeMsg()">Enter question</button>

</body>
</html> 
```

这段代码所做的只是允许用户输入一个问题，然后在 15 分钟后将问题添加到问题列表中。

我想要对代码做的就是让它立即将文本“QUESTION RECORDED”放在问题将出现的位置，而不是简单地将问题添加到末尾，它应该替换“问题记录”文本与问题。

我无法弄清楚如何以一种可以同时输入多个问题的方式进行操作。

任何帮助表示赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:38:37.813

当您想要替换元素的全部内容而不是添加或插入子节点时，innerHTML 属性很方便。为此，使用[createElement](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#ID-2141741547)更容易。

以下是一个帮助您前进的示例：

```
<script>
function addDiv(parent, text) {
  var div = document.createElement('div');
  div.appendChild(document.createTextNode(text));
  parent.appendChild(div);
}
</script>

<form action="serverprocess" onsubmit="return false;">
  <input type="text" name="qText" value="Question text">
  <button onclick="
    addDiv(document.getElementById('container'), this.form.qText.value);
  ">Add question</button>
</form>
<div id="container"></div> 
```

在上面，如果 javascript 不可用或未激活，则将提交表单并在服务器上进行处理。如果它可用，那么它将在本地处理并且表单不会提交，尽管提交确实应该基于操作的成功完成。

我把它留给你思考。

# javascript - JQuery Beginner .after 不工作

> ID：10890004
> 
> 赞同：-1
> 
> 时间：2012-06-05T00:07:12.903
> 
> 标签：javascript, jquery, html

代码有什么问题？我确定js文件的路径是正确的。我认为这是代码。它没有显示插入的段落..

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Embedded Script</title>
        <meta charset="utf-8"/>
    </head>
    <body>
        <h1>Embedded Script Example</h1>
        <script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" charset="utf-8">

        $(document).ready(function(){
            $("h1").after("<p>I've just inserted a paragraph</p>");
        });
        </script>
    </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:25:16.187

您的路径一定是错误的，或者您的 jQuery 库以某种方式损坏。我已经复制了您的代码，将 jQuery 路径更改为 jquery.com 上的最新代码，并将页面上传到[http://www.apsillers.com/inline.html](http://www.apsillers.com/inline.html)。用于`Ctrl+U`查看源代码以验证它是否与您的相同。（我会使用小提琴，但我认为它不允许内联脚本。）

这非常确凿地证明您的问题是由于未能正确加载 jQuery 库。检查您的错误控制台，并验证它`jQuery`是您的 JS 控制台中的一个现存对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T00:11:56.193

```
$("<p>I've just inserted a paragraph</p>").insertAfter("h1"); 
```

# ffmpeg - 从歌曲文件中提取未解码的音频有效载荷？

> ID：10890005
> 
> 赞同：1
> 
> 时间：2012-06-05T00:07:17.407
> 
> 标签：ffmpeg, mp3, aac, m4a, md5sum

有哪些工具可用于从歌曲文件中提取未解码的原始音频负载？

我正在寻找一种适用于 wma、m4a、mp3 和 ogg 文件的解决方案。

目的之一是能够计算音频有效载荷的 md5sum。

我试过`ffmpeg -i <song file> -f md5 -`了，但这实际上做了一个不需要的解码过程。此外，这似乎会根据使用的解码器版本产生不同的结果。

我尝试过`ffmpeg -i <song file> -acodec copy - > <raw payload file>`，但 ffmpeg 抱怨它不知道所需的输出格式，即使`copy`已明确指定。

我尝试了各种化身，`-map_metadata -1`但[文档](http://ffmpeg.org/ffmpeg.html#Advanced-options)充其量是迟钝的。

最后，理想的情况是拥有歌曲文件的原始未解码音频部分的标准输出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:22:28.863

你真的，真的很亲近。如果您只是想对原始音频数据进行校验和，请结合您发布的 2 个命令行——`'-acodec copy'`用于提取原始数据和“-f md5”来计算 MD5：

```
ffmpeg -i audio.file -acodec copy -f md5 - 
```

这会将 MD5 和转储到标准输出。如果您希望将哈希值放入文件中，请将命令行末尾的“-”替换为文件名。

您想提取原始音频数据还有其他原因吗？我知道这是可能的，但这样做感觉可能属于“解决错误问题”的范畴。如果您从各种格式（如 wma、m4a、mp3 和 ogg）中提取原始音频数据，您将无法了解以后如何使用这些数据（除非您打算存储上下文其他地方，比如在数据库中）。

# javascript - 使用 Phantomjs 使用 Google Feed API

> ID：10890006
> 
> 赞同：0
> 
> 时间：2012-06-05T00:07:35.893
> 
> 标签：javascript, rss, phantomjs, google-feed-api

我正在尝试将[这个 google feed api 的示例](http://code.google.com/apis/ajax/playground/#historical_entries)翻译为与 Phantomjs 一起使用。按照Phantomjs的[示例，我有以下内容：](https://github.com/ariya/phantomjs/blob/master/examples/phantomwebintro.js)

```
var page = require('webpage').create();

page.onConsoleMessage = function(msg) {
    console.log(msg);
};

// Our callback function, for when a feed is loaded.
function feedLoaded(result) {
  if (!result.error) {
    // Loop through the feeds, putting the titles onto the page.
    // Check out the result object for a list of properties returned in each entry.
    // http://code.google.com/apis/ajaxfeeds/documentation/reference.html#JSON
    for (var i = 0; i < result.feed.entries.length; i++) {
      var entry = result.feed.entries[i];
      console.log(entry.title);
    }
  }
}

page.includeJs("http://www.google.com/jsapi?key=AIzaSyA5m1Nc8ws2BbmPRwKu5gFradvD_hgq6G0", function() {
    google.load("feeds", "1");
    var feed = new google.feeds.Feed("http://www.digg.com/rss/index.xml");
    feed.includeHistoricalEntries(); // tell the API we want to have old entries too
    feed.setNumEntries(250); // we want a maximum of 250 entries, if they exist

    // Calling load sends the request off.  It requires a callback function.
    feed.load(feedLoaded);

phantom.exit();
}); 
```

输出说：

```
ReferenceError: Can't find variable: google 
```

我试过定义 var google；就在包含但没有运气之后。一般来说，我是 Phantomjs 和 js 的新手。任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:34:45.267

因此，您使用“includeJs”回调的方式存在问题。

您假设的该功能是在页面的上下文中执行的：它不是。它在主上下文中执行。

您在页面中注入了一个库：很好。现在，我想，您想在该页面中执行“Stuff”。您必须使用以下功能：

```
page.evaluate(function, arg1, arg2, ...); 
```

另外，我看到您希望收到以下结果：

```
feed.load() 
```

在回调中。这很好，但是您需要*弥合差距*：页面上下文中的回调不能在幻像上下文中调用（但是！）。您需要阅读一下文档，看看您想如何提出解决方案。

牢记在心：致电

```
page.evaluate() 
```

可以返回 JSON 和其他 JS 简单类型（字符串、数字、布尔值）：那应该是你的“门”。

# intellij-idea - 如何将“省电模式”切换到 IntelliJ Idea 中的键盘快捷键？

> ID：10890009
> 
> 赞同：2
> 
> 时间：2012-06-05T00:08:05.237
> 
> 标签：intellij-idea

每次我希望打开或关闭“省电模式”时都需要使用主菜单，这让我有些恼火。可以为此使用热键吗？我使用 IntelliJ Idea 11.1.2 社区版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:10:30.270

Ctrl+Shift+A（Help | Find action），输入“power”，见“Power save mode”，回车。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:36:30.457

*   `CTRL ALT S`去设置
*   在左侧搜索**Keymap 。**
*   通过单击复制键映射的**副本**给它一个名称
*   在右侧搜索**Power以获取 Power Save**
*   点击**省电模式**
*   在显示的对话框中分配键绑定。

在社区版中检查了这一点。

# git - 有效检索包含提交的版本

> ID：10890011
> 
> 赞同：6
> 
> 时间：2012-06-05T00:08:43.857
> 
> 标签：git

在命令行中，如果我键入

```
git tag --contains {commit} 
```

要获取包含给定提交的版本列表，每次提交大约需要 11 到 20 秒。由于目标代码库存在超过 300,000 次提交，因此为所有提交检索此信息需要很多时间。

但是，`gitk`显然设法很好地检索了这些数据。根据我的搜索，它为此使用了缓存。

我有两个问题：

1.  如何解释该缓存格式？
2.  有没有办法`git`从命令行工具获取转储以生成相同的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T18:51:11.877

您几乎可以直接从`git rev-list`.

`latest.awk`：

```
BEGIN { thiscommit=""; }
$1 == "commit" {
    if ( thiscommit != "" )
        print thiscommit, tags[thiscommit]
    thiscommit=$2
    line[$2]=NR
    latest = 0;
    for ( i = 3 ; i <= NF ; ++i ) if ( line[$i] > latest ) {
        latest = line[$i];
        tags[$2] = tags[$i];
    }
    next;
}
$1 != "commit"  { tags[thiscommit] = $0; }
END { if ( thiscommit != "" ) print thiscommit, tags[thiscommit]; } 
```

示例命令：

```
git rev-list --date-order --children --format=%d --all | awk -f latest.awk 
```

您也可以使用`--topo-order`，并且您可能必须在`$1!="commit"`逻辑中清除不需要的引用。

根据您想要的传递性以及列表的明确程度，累积标签可能需要字典。这是一个获得所有提交的所有参考的明确列表：

`all.awk`：

```
BEGIN {
    thiscommit="";
}
$1 == "commit" {
    if ( thiscommit != "" )
        print thiscommit, tags[thiscommit]
    thiscommit=$2
    line[$2]=NR
    split("",seen);
    for ( i = 3 ; i <= NF ; ++i ) {
        nnew=split(tags[$i],new);
        for ( n = 1 ; n <= nnew ; ++n ) {
            if ( !seen[new[n]] ) {
                tags[$2]= tags[$2]" "new[n]
                seen[new[n]] = 1
            }
        }
    }
    next;
}
$1 != "commit"  {
    nnew=split($0,new,", ");
    new[1]=substr(new[1],3);
    new[nnew]=substr(new[nnew],1,length(new[nnew])-1);
    for ( n = 1; n <= nnew ; ++n )
        tags[thiscommit] = tags[thiscommit]" "new[n]

}
END { if ( thiscommit != "" ) print thiscommit, tags[thiscommit]; } 
```

`all.awk`花了几分钟来完成 322K linux 内核 repo 提交，大约每秒一千次或类似的东西（大量重复的字符串和冗余处理）所以如果你真的想要完整的话，你可能想用 C++ 重写它交叉产品......但我不认为 gitk 表明，只有最近的邻居，对吧？

# gwt - 如何使用用户搜索查询在 GWT 中添加书签

> ID：10890018
> 
> 赞同：0
> 
> 时间：2012-06-05T00:09:25.633
> 
> 标签：gwt

我是 GWT 的新手，但我做了足够的搜索以了解我可以使用历史机制在 GWT 中做书签。

但是当我需要将书签应用于用户搜索查询时，我仍然感到困惑。例如，主页可能有几个标签（我可以在这里使用历史记录机制来为标签添加书签）。在用户导航到特定选项卡并执行一些搜索查询之后。现在，如果他希望将此搜索结果 URL 加入书签，我该如何使用 GWT 来做到这一点。

我尝试了一些选项：GWT HyperLinks Widgets、Anchors、UrlBuilder 但我真的不确定最方便的一个。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:41:44.837

[您应该在此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory)阅读有关 GWT 历史的文档。

作为您的案例的示例，假设您想记住用户在哪个选项卡上（参数 t）以及用户搜索的查询（参数 q）。您将输入您的网址，例如

> # t=2&q=你好

然后当您的 GWT 模块正在加载时。检查 url 以查看这些参数是否在此处。如果是，请解析它们以加载正确的选项卡并进行搜索。如果没有，请从头开始加载。示例理论代码：

```
private int selectedTab;
private String query;

public void onModuleLoad() {
    String token = History.getToken();
    if (!Strings.isNullOrEmpty(token)) {
        // parse the history token
        String t = token.substring(2,3);
        String q = token.substring(6, token.length());
        int tabIndex = Integer.valueOf(t);
        setSelectedTab(tabIndex);
        search(q);
    } else {
        // init from scratch
        setSelectedTab(0);
    }

    // Add a listener to your tab panel, to change the History token everytime the
       tab changes
    tabPanel.addSelectionHandler(new SelectionHandler<Integer>(){
        public void onSelection(SelectionEvent<Integer> event) {
             selectedTab = event.getSelectedItem();
             setSelectedTab(selectedTab);
             changeHistoryToken();
        }});        

    // Add listeners for your search query stuff
}

private void changeHistoryToken() {
    History.newItem("t=" + selectedTab + "&q=" + query);
}

private void setSelectedTab(int index) {
    // Set the selected tab
} 
```

关键是，每次应用程序的状态发生变化时，都会向历史记录添加一个新项目。此项目是一个字符串，表示您的应用程序的状态。然后，当您加载应用程序时，请检查此令牌是否在此处。如果是，请通过解析令牌并设置正确的值（选择的选项卡、搜索查询等）来初始化您的应用程序。如果没有历史令牌，则使用默认值初始化。

不要忘记通过将此 iframe 添加到您的页面来启用历史记录支持：

```
 <iframe src="javascript:''"
      id="__gwt_historyFrame"
      style="width:0;height:0;border:0"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:12:44.410

您还可以使用历史记录机制来存储搜索查询。您的网址可能如下所示：

```
 http://host.html#tab=<tabname>;search=<query> 
```

如果您使用[超链接](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Hyperlink.html)小部件，历史记录会自动更新。

# svn - 在 SVN 的根目录下创建文件夹是一种好习惯吗

> ID：10890019
> 
> 赞同：0
> 
> 时间：2012-06-05T00:09:34.783
> 
> 标签：svn

在 SVN 的根目录下为项目创建文件夹是一种好习惯吗？还是应该在 中创建文件夹`trunk`？

例如，以下设置可以吗？

`svn://servername/myproject`

还是应该...

`svn://servername/trunk/myproject`

我了解上述两个选项都有效，但我正在寻找一些最佳实践建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:14:15.407

如果你想遵循惯例，你应该把它放在行李箱里。如果你不这样做，它不会导致 SVN 出现问题，但树干、分支和标签都是有意义的。

如果您想了解更多有关此内容以及最佳实践的信息，请查看[此站点](http://blog.jmfeurprier.com/2010/02/08/svn-trunk-branches-and-tags/)。

# java - 在java中计算一个简单的表达式

> ID：10890022
> 
> 赞同：0
> 
> 时间：2012-06-05T00:10:29.017
> 
> 标签：java, algorithm, math, stack

我如何在 java 中评估该中缀表达式：((1) *2/4+2-1)。我知道我可以使用 2 个堆栈：1 个 1st 用于字符（* +-/）。第二个整数。

然后检查字符的优先级并同时计算！？

那么有没有更完美的方法来计算这样的表达式？！..

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:18:21.747

你在写计算器吗？查看此算法的[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)（这可能对您有所帮助）。您还可以为此或动态语言使用第三方库（Javascript Engine/Groovy/BeanShell/Google：java 计算器库/等）

# css - Trying to change the colour of submenu links

> ID：10890023
> 
> 赞同：0
> 
> 时间：2012-06-05T00:10:39.097
> 
> 标签：css, html, menu, navigation, drop-down-menu

I have a navigation with hidden sub menus that display when ever their parent menu link is hovered over. I' a bit stuck on how to actually target the links with the list of the parent navigation item.

Here is my code:

```
<nav id="nav">
        <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li>
            <a href="#">Categories</a>
            <ul>
                <li><a href="#">12" Vinyl album</a></li>
                <li><a href="#">12" Vinyl single</a></li>
                <li><a href="#">7" Vinyl album</a></li>
                <li><a href="#">7" Vinyl single</a></li>
                <li><a href="#">CD</a></li>
                <li><a href="#">DVD</a></li>
                <li><a href="#">Book</a></li>
                <li><a href="#">Calendar</a></li>
                <li><a href="#">Other</a></li>
            </ul>
        </li>
        </ul>
</nav> 
```

I have tried the following without any luck:

```
nav li ul li a:link{
    color:#fba326;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:18:02.363

The only problem I see is that you should use a:hover instead of a:link like so

```
nav li ul li a:hover{
    color:#fba326;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:21:31.097

If you are trying to override the default color of the links. The following CSS would work.

```
nav li ul li a {
    color: #fba326;
} 
```

# asp.net-mvc - System.InvalidOperationException：序列不包含任何元素 [MVC]

> ID：10890024
> 
> 赞同：1
> 
> 时间：2012-06-05T00:10:39.857
> 
> 标签：asp.net-mvc, model-view-controller

我正在尝试根据参数获取产品列表。从产品描述列表 (Index.chtml) 中，当我单击产品描述时，我想转到仅列出具有该产品描述的产品的页面。

例如：如果我单击 Index.chtml 页面上的“Barstools”，我只想浏览 Browse.chtml 页面上的 barstools。

但我不断收到此错误：

```
Exception Details: System.InvalidOperationException: Sequence contains no elements

Source Error: 

Line 25:         {
Line 26:             // 
Line 27:             var productModel = productDB.ProductDess.Include("Products")
Line 28:                 .Single(p => p.productDesName == productD);
Line 29:             return View(productModel); 
```

这是我所拥有的：

**楷模：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：： ::::::::::::::::::::::::::::::**

* * *

产品.cs

* * *

```
[Table("Product")]
[Bind(Exclude = "productID")]
public class Product
{
    [ScaffoldColumn(false)]
    [Key]
    public string productID { get; set; }
    public string productName { get; set; }
    public string productDim { get; set; }
    public string productWoodSp{ get; set; }
    public string productFabric { get; set; }
    public string productTop { get; set; }
    public string productFinish { get; set; }
    public string productAddInfo { get; set; }
    public string productImgURL { get; set; }
    public string productType { get; set; }

    public string collectionID { get; set; }
    public virtual Collection collection { get; set; }

    public string productDesID { get; set; }
    public virtual ProductDes ProductDes { get; set; }
} 
```

* * *

产品描述文件

* * *

```
[Table("ProductDes")]
public class ProductDes
{
    [Key]
    public string productDesID { get; set; }
    public string productDesName { get; set; }

    public List<Product> Products { get; set; }
} 
```

* * *

产品实体.cs

* * *

```
public class ProductEntities : DbContext
{
    public DbSet<Collection> Collections { get; set; }
    public DbSet<Project>    Projects    { get; set; }
    public DbSet<Product>    Products    { get; set; }
    public DbSet<ProductDes> ProductDess  { get; set; }
} 
```

**控制器:::::::::::::::::::::::::::::::::::::::::::::::: ::::::::::::::::::::::::::::**

```
using System.Web.Mvc;
using StoreWeb.Models;
using System.Data.Entity;

namespace StoreWeb.Controllers
{
public class SampleController : Controller
{
    ProductEntities productDB = new ProductEntities();

    public ActionResult Index()
    {
        var productDes = productDB.ProductDess.ToList();
        return View(productDes);
    }

    //
    public ActionResult Browse(string productD)
    {
        //
        var productModel = productDB.ProductDess.Include("Products")
            .Single(p => p.productDesName == productD);
        return View(productModel);
    }
}
} 
```

**意见::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::::::::::::::::::::**

```
@model StoreWeb.Models.ProductDes

@{
    ViewBag.Title = "Browse" + Model.productDesName;
}

<h2>Browse</h2>
@foreach (var product in Model.Products)
    {

        <p />
        <a href="@Url.Action("Details", new { id = product.productID })">
        <img src="@product.productImgURL"  alt="@product.productName" />
            @product.productID @product.productName
        </a> 

    } 
```

* * *

有人可以建议我该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T01:12:06.873

在控制器中，更改

```
var productModel = productDB.ProductDess.Include("Products")
    .Single(p => p.productDesName == productD); 
```

至

```
var productModel = productDB.ProductDess.Include("Products")
    .SingleOrDefault(p => p.productDesName == productD); 
```

在视图中，改变

```
@foreach (var product in Model.Products) {
} 
```

至

```
@if (Model != null) {
    foreach (var product in Model.Products) {
    }
} 
```

# java - ScheduledThreadPoolExecutor 线程中的 GWT 环境错误

> ID：10890025
> 
> 赞同：0
> 
> 时间：2012-06-05T00:10:47.420
> 
> 标签：java, multithreading, google-app-engine, gwt

我正在尝试编写 GWT 应用程序的服务器端组件，该组件应每 3 分钟提取一次 XML 文件，并在解析 XML 后保持 Hashtable 为最新。

经过一番研究，我使用 ScheduledThreadPoolExecutor 设置了线程

```
stationParser = new TFLStationsParserThread(bikeStations);
scheduler.scheduleWithFixedDelay(stationParser, 2, 180, SECONDS); 
```

TFLStationsParserThread 有一个最小的构造函数，这个 run() 方法

```
public void run() {
    System.out.println("TFLStationsParserThread run()");
    stationParser.refreshStationData(stations);
} 
```

stationParser 最终通过以下命令获取数据

```
HTTPResponse response = URLFetchServiceFactory.getURLFetchService().fetch(request); 
```

这是我的问题：当这`.fetch()`是从 ScheduledThreadPoolExecutor 中运行时，我收到以下错误

```
com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'urlfetch' or call 'Fetch()' was not found.
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:98)
    at com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:37)
    at couk.mtaylor.bikes.server.TFLStationsParser.refreshStationData(TFLStationsParser.java:66)
    at couk.mtaylor.bikes.server.TFLStationsParserThread.run(TFLStationsParserThread.java:35)
    ... 
```

如果我注释掉`scheduleWithFixedDelay`调度程序并`refreshStationData`直接调用，那么我不会遇到这样的问题。

这使我相信该线程缺少一些必需的 GWT 库，但这超出了我的知识范围，我无法在网上找到任何有帮助的解决方案。

为什么我会从计划的线程中获得这些 GWT 错误消息，而不是在我直接调用该方法时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:07:40.843

我无法证实这一点，但我认为这可能是 GAE 告诉我这不是如何在 GAE 中执行线程的方式。如果我从构建路径中删除 GAE 并停止使用 .fetch()，则代码可以正常工作。

现在我放弃了为 GAE 编写的想法，同时我更习惯了 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:26:17.163

[尝试在 google app engine for java 中实现异步 http 时遇到奇怪的异常](https://stackoverflow.com/questions/2299673/getting-strange-exception-trying-to-implement-asynchronous-http-in-google-app-en)

您是否尝试将其作为 Java 应用程序而不是 Web 应用程序运行？

# data-binding - 以模式更新时，页面上的 knockout.js 数据未更新

> ID：10890029
> 
> 赞同：1
> 
> 时间：2012-06-05T00:11:11.353
> 
> 标签：data-binding, knockout.js, modal-dialog

我正在使用 knockout.js 和 twitter bootstrap 的模态插件对用户的电子邮件地址进行数据绑定，以便他们可以通过模态进行更改。但是，当我在模式内的输入框中编辑它时，我希望看到页面上的电子邮件地址同时更新。我的数据绑定有问题吗？

这是下面的jsFiddle：http: [//jsfiddle.net/XN58K/1/](http://jsfiddle.net/XN58K/1/)

```
var model = {
    "SchoolEmailAddress": "email@domain.com",
    "FirstName": "John",
    "LastName": "Doe",
    "MiddleName": null,
    "Id": 3
};

$(document).ready(function() {
    var viewModel = new AccountSettingsViewModel();
    ko.applyBindings(viewModel);

    viewModel.user(model);
});

function User(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);
}

function AccountSettingsViewModel() {
    var self = this;
    this.user = ko.observable();

    this.editEmail = function() {
        $("#editEmailModal").modal("show");
    }    
}

<div data-bind="with: user">
    <div>Email Address <a href="javascript:void(0);" data-bind="click: $parent.editEmail">Edit</a></div>  
    <div><label data-bind="text: SchoolEmailAddress"></label></div>
</div>    
<div id="editEmailModal" class="modal hide fade" data-bind="with: user">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3><span class="icon-envelope" style="vertical-align: middle"></span> Edit Your Email Address</h3>
        </div>        
        <div class="modal-body">             
            <div class="modalRow"> 
                <div class="modalLabel">Email Address:</div>               
                <div><input type="text" data-bind="value: SchoolEmailAddress" class="span4" /></div>
            </div>                    
        </div>    
        <div class="modal-footer">
            <a href="javascript:void(0);" class="btn-gray swatch" data-dismiss="modal">Cancel</a>
            <a href="javascript:void(0);" class="btn-school swatch" data-dismiss="modal">Save Changes</a>        
        </div>        
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:35:20.267

看起来你有一个`User`没有被使用的构造函数，所以没有一个用户属性是可观察的。

你会想做这样的事情：

```
viewModel.user(new User(model)); 
```

这将通过映射插件发送用户（看起来这在小提琴中没有引用）。

[http://jsfiddle.net/rniemeyer/XN58K/2/](http://jsfiddle.net/rniemeyer/XN58K/2/)

这看起来像这个问题的问题。它不会进入“保存/取消”按钮。

# asp.net-mvc - ASP.NET MVC3简单评论系统---显示评论

> ID：10890031
> 
> 赞同：0
> 
> 时间：2012-06-05T00:11:25.657
> 
> 标签：asp.net-mvc, asp.net-mvc-3, null, asp.net-mvc-partialview

试图将评论系统添加到我的页面。我希望能够为每个页面上的评论搭建一个列表视图。

我想我可以只使用脚手架代码并通过将返回值更改为 a 并将其放入部分视图`PartialView(db.Comments.ToList());`中。`ViewResult``ActionResult`

`@for (item in model) {....}`它以空引用中断`exception error`。

所以......关于我如何做到这一点的任何想法？例如：任何地方的任何评论系统。

```
 @model IEnumerable<_2nditeration.Models.Comment>

@{
    ViewBag.Title = "Messages";
}

<h2>Messages</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            uname
        </th>
        <th>
            email
        </th>
        <th>
            subject
        </th>
        <th>
            referrer
        </th>
        <th>
            Created
        </th>
        <th>
            comment
        </th>
        <th></th>
    </tr>
@*BREAKS HERE!!!!!!with a null reference exception on the Model object*@
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.uname)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.subject)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.referrer)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Created)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.comment)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
            @Html.ActionLink("Details", "Details", new { id=item.ID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ID })
        </td>
    </tr>
}

</table> 
```

控制器动作

```
public class CommentsController : Controller
{
    private DbEntity db = new DbEntity();

    //
    // GET: /Comments/Read
    public ActionResult ReadComments()
    {
        return PartialView(db.Comments.ToList());
    } 
```

和模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace _2nditeration.Models
{
    public class Comment
    {
        public int ID { get; set; }
        [Display ( Name = "Name")]
        public string uname { get; set; }
        [Display(Name = "Email Address")]
        public string email { get; set; }
        [Display(Name = "Subject")]
        public string subject { get; set; }
        public string referrer { get; set; }
        public DateTime? Created { set; get; }
        [Required]
        [Display(Name = "Comment")]
        public string comment { get; set; }
    }
} 
```

# php - PHP从数据库中获取数据，并在while循环外使用

> ID：10890034
> 
> 赞同：2
> 
> 时间：2012-06-05T00:11:55.203
> 
> 标签：php, mysql, html

```
<?php   
$q=select * from students where (dynamic for user searching)   
$qry=mysql_fetch_array($q);   
while($row=mysql_fetch_array())   
{   
   **// i do not need data here?**   
}   
?>   
< table>   
< tr>< td><?php echo **$row[?][?];** ?>< /td>< td><?php echo **$row[?][?];** ?>< /td>...< /tr>   
< tr>< td><?php echo **$row[?][?];** ?>< /td>< td><?php echo **$row[?][?];** ?>< /td>...< /tr>   
....    
< /table> 
```

需要生成 html 表格格式的动态报告，html 表格的行和列对于结果是静态的，所以我不能在 while 循环中使用 echo 我必须在循环外部访问它我有一个选择单行单列的想法表格的每个单元格分开，但任何替代方案或解决方案都将耗费时间和长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:16:26.567

您不必使用 while 循环。您可以根据需要获取数据。

```
$row1 = mysql_fetch_array($qry);
$row2 = mysql_fetch_array($qry); 
```

不过我不喜欢这样做，因为您必须跟踪资源（在这种情况下为 $qry）并且您必须继续输入 mysql_fetch_*() 所以我倾向于在使用结果之前将结果加载到数组中。

```
$result = array();
while($row=mysql_fetch_object($qry))
{
    $result[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T00:15:50.543

在循环中构建表格，然后将其回显到页面。例如，如果您正在构建一个表，其中每一行都有一个用户的 ID 和名称，它看起来像这样：

```
$table = "";
while($row=mysql_fetch_array($qry)) {   
   $tablerow = "<tr><td>" . $row['id'] . "</td><td>" . $row['name'] . "</td></tr>";
   $table .= $tablerow;
}   

// you've built a string with the entire table. Now write it to the page.
echo($table); 
```

在 while 循环之外构建表通常是一个坏主意，因为您重复了很多代码，而且您不知道需要放入多少行。但是如果您真的想按照您显示的方式进行操作您的问题（也许是因为您只想要查询中的某些特定行？），在您的 while 循环中构建一个数组，然后在它之外引用该数组。

```
$results = array();
while($row=mysql_fetch_array()) {   
    $results[] = $row;
} 
```

然后您可以使用`<td><?php echo($results[0]['id']) ?></td>`第一个用户的 ID 号写入一个单元格，依此类推。

# javascript - 在 chrome 扩展中向用户显示消息

> ID：10890036
> 
> 赞同：1
> 
> 时间：2012-06-05T00:12:00.887
> 
> 标签：javascript, user-interface, google-chrome, google-chrome-extension

我的问题不是编码，而是一般的设计问题。我编写了一个 chrome 扩展，通过 socks5 代理（通过 ssh）将用户连接到 vpn 网络。如果代理进程被终止或连接中断，socks 代理将重新连接，并且在连接成功时（失败的）选项卡将重新加载。连接到网络时，browseraction 图标略微动画化。到目前为止，这工作正常。

我现在想要的是一个体面但可见的提示，即后台发生了一些事情，用户必须等待几秒钟才能单击链接或打开选项卡。我已经考虑过警报，但是任何人都讨厌它们，当然它们是对的。然后我想到了类似 twitter 或咆哮的动画消息，但是用内容脚本注入页面似乎不适用于错误页面。也似乎不可能在浏览器操作中将消息显示为文本或显示弹出窗口。

我的问题是：你们中是否有人知道可以很好地解决这个问题的扩展，或者知道如何解决这个问题。它应该是一见钟情而不会令人讨厌的。欢迎任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:21:59.917

您可以为浏览器操作或页面操作图标设置动画。查看示例：[http ://code.google.com/chrome/extensions/samples.html#9a6e4ec46997fb92b324974afa08a3d007e2537f](http://code.google.com/chrome/extensions/samples.html#9a6e4ec46997fb92b324974afa08a3d007e2537f)

# bash - 在 bash 脚本中转换日期/时间并生成偏移量

> ID：10890039
> 
> 赞同：0
> 
> 时间：2012-06-05T00:12:44.977
> 
> 标签：bash, datetime, date, time

我需要一个脚本来进行一些日期/时间转换。它应该作为一个特定时间的输入。然后它应该以小时：分钟的形式和经过的毫秒数生成一系列偏移量。

例如，对于 03:00，它应该返回 04:02:07 (3727000ms*) 05:04:14 (7454000ms)、06:06:21 等...

我将如何将其作为 bash 脚本执行？理想情况下，它可以在 Mac OS X 和 Linux（Ubuntu 或 Debian）上运行。

*   (1小时* 60分钟/小时*60秒/分钟*1000毫秒/秒)+(2分钟*60秒/分钟* 1000毫秒/秒)+(7秒*1000毫秒/秒) = (60*60*1000)+(2* 60*1000)+(7*1000) = 3727000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:14:24.820

```
time2ms () {
    local time=$1 hour minute second
    hour=${time%%:*}
    minute=${time#$hour:}
    minute=${minute%:*}
    second=${time#$hour:$minute}
    second=${second/:}
    echo "$(( ( (10#${hour} * 60 * 60) + (10#${minute} * 60) + 10#${second} ) * 1000 ))"
}

ms2time () {
    local ms=$1 hour minute second
    ((second = ms / 1000 % 60))
    ((minute = ms / 1000 / 60 % 60))
    ((hour = ms / 1000 / 60 / 60))
    printf '%02d:%02d:%02d\n' "$hour" "${minute}" "${second}"
}

show_offsets () {
    local time=$1 interval=$2 time_ms interval_ms new_time
    time_ms=$(time2ms "$time")
    interval_ms=$(time2ms "$interval")
    new_time=$(ms2time $((time_ms + interval_ms)) )
    echo "$new_time (${interval_ms}ms)"
} 
```

演示：

```
$ show_offsets 03:00 1:02:07
04:02:07 (3727000ms)
$ show_offsets 03:00 2:04:14
05:04:14 (7454000ms)
$ show_offsets 03:00 3:06:21
06:06:21 (11181000ms) 
```

# c# - 任何更好的方法来确定基于 T 和子类的类型

> ID：10890041
> 
> 赞同：0
> 
> 时间：2012-06-05T00:13:41.837
> 
> 标签：c#, generics, .net-2.0

编写一些处理响应和请求的代码。两者都可以是 XML 的形式，也可以是通过转换和序列化创建的 C# 对象的形式。（这是.NET 2.0）

Response 和 Request 是较大消息类型的基本实现。现在我有 GetEligibility 和 FindCandidates。

下面使用的 Model.MessageModel 类的示例：

```
public partial class GetEligibilityResponseMessage : ResponseMessage

public partial class ResponseMessage : Message 
```

因为我不想复制我的映射功能，所以我决定使用泛型来简化流程，而且效果很好：

**基类代码**

```
 public virtual Model.MessageModel.Message MapToModel<T>(XmlDocument xml)
    {
        V3Mapper mapper = new V3Mapper();
        Model.MessageModel.Message message = mapper.MapToDomainModel<T>(xml, Environment) as Model.MessageModel.Message;
        return message;
    }

    public virtual XmlDocument MapToXml<T>(Model.MessageModel.Message message)
    {
        V3Mapper mapper = new V3Mapper();
        XmlDocument xml= mapper.MapToV3Message<T>(message, Environment);
        return xml;
    } 
```

当我的代码第一次被调用时，它有一个 XML 文档。我知道这个文档将被映射为一个请求，所以我调用了一个被覆盖的虚拟方法（我认为它很难看）。将映射代码保留在基础中的原因是不重复代码，但我发现我正在做我想通过以下方式避免的确切事情：

**获取资格：基类**

```
 public override Model.MessageModel.Message MapToModel<T>(XmlDocument xml)
    {   
        if(typeof(T).IsAssignableFrom(typeof(GetEligibilityResponseMessage)))
        {
            return base.MapToModel<GetEligibilityResponseMessage>(xml);
        }
        else if (typeof(T).IsAssignableFrom(typeof(GetEligibilityRequestMessage))) 
        {
            return base.MapToModel<GetEligibilityRequestMessage>(xml);
        }
        return null;//because this is a quick code snippet
    } 
```

有没有更优雅的方式来做到这一点？我总是知道我是在处理响应还是请求。我想让功能保持打开状态，这样它就不会太紧耦合，但同时又要功能强大且速度快。

这将通过许多不同的消息类型来实现，我真的很讨厌复制/粘贴风格的编码，所以一个优雅的解决方案会很棒，但我不确定是否有一个。（.NET 2.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:44:18.817

您可以使用[MethodInfo.MakeGenericMethod 方法](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod%28v=vs.100%29.aspx)来避免在调用泛型方法之前检查类型。下面是一个快速使用示例：

```
class Program
{
    public static void Generic<T>(T toDisplay)
    {
        Console.WriteLine("\r\nHere it is: {0}", toDisplay);
    }

    static void Main(string[] args)
    {
        MethodInfo mi = typeof(Program).GetMethod("Generic");
        MethodInfo miConstructed = mi.MakeGenericMethod(typeof(DateTime));

        DateTime now = DateTime.Now;
        miConstructed.Invoke(null, new object[] { now });
    }
} 
```

请注意，我使用了**typeof(DateTime)**，但在您的情况下，您可以将其替换为**typeof(T)**以实现所需的松散耦合解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:19:12.003

如果您只想验证请求和响应类型，您可以让您的基类知道这一点：

```
public class BaseClass
{
    private readonly Type _requestType;
    private readonly Type _responseType;

    protected BaseClass(Type requestType, Type responseType)
    {
        _requestType = requestType;
        _responseType = responseType;
    }

    public T MapToModel<T>(XmlDocument xml)
    {
        if (typeof(T) != _requestType && typeof(T) != _responseType)
            throw new InvalidOperationException("Invalid type");

        var mapper = new V3Mapper();
        return mapper.MapToDomainModel<T>(xml, Environment);
    }
}

public GetEligibility : BaseClass
{
    public GetEligibility() 
        : base(typeof(GetEligibilityRequestMessage), typeof(GetEligibilityResponseMessage))
    {}
} 
```

您甚至可以更进一步，使用知道返回什么`BaseClass`的专用`MapToRequest`和方法进行通用化：`MapToResponse`

```
public class BaseClass<TRequest, TResponse>
    where TRequest:RequestMessage,
          TResponse:ResponseMessage
{
    public TRequest MapToRequest(XmlDocument xml)
    { return MapToModel<TRequest>(xml); }

    public TResponse MapToResponse(XmlDocument xml)
    { return MapToModel<TResponse>(xml); }

    private T MapToModel<T>(XmlDocument xml)
    {
        var mapper = new V3Mapper();
        return mapper.MapToDomainModel<T>(xml, Environment);        
    }
}

public GetEligibility : BaseClass<GetEligibilityRequestMessage, GetEligibilityResponseMessage>
{} 
```

# assembly - 编写我自己的 BIOS

> ID：10890048
> 
> 赞同：47
> 
> 时间：2012-06-05T00:14:39.557
> 
> 标签：assembly, x86, bios

我不是疯了，只是重新发明轮子：D
我写了引导加载程序、鼠标和键盘迷你驱动程序、迷你操作系统等等。

我一直在尝试避免 DOS 中断，只使用 BIOS 中断，试图推进统一的迷你操作系统，但突然我决定编写自己的 BIOS :)

传说中说：
我是高级程序员，然后是低级程序员。有一天我会成为机器语言程序员！

BIOS 是用汇编语言编写的吗？怎么刷？机制是什么？我可以开始编辑我当前的 BIOS 吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-05T03:32:27.440

BIOS 可以用汇编语言编写，但并非必须如此，某些部分需要获取系统调用的参数，因为它们与编译器调用约定不匹配。

你怎么刷它？因主板而异，我会从一个开源虚拟机开始，然后为此编写一个 bios。或者在您编写了 bios 的地方创建一个虚拟机。该机制因供应商而异，通常您启动 dos（dos 并没有死，它在 PC 世界中非常活跃，尤其是主板开发和嵌入式系统）。我不会乱搞一块真正的主板，如果你还不知道所有这些问题的答案，那么如果你走这条路，你会弄坏许多主板。

您可以尝试为您的主板进行 bios 升级并对其进行逆向工程（尽管可能有一个点击协议表明您不会这样做）。如果你弄清楚了，你既可以加载它，也可以破解它。我不会去那里，在你弄清楚之前你会砖你的系统。

写简历真的是你所追求的吗？相当老派，就像为了好玩而编写 6502 代码一样。有许多更有用和更有趣的低级问题。

如果您可以编写 asm，则编写机器代码一点也不难，您可以只是为了好玩而去做。x86 很糟糕，您应该花一些时间学习其他系统及其 asm 和机器代码（并为它们编写操作系统）。ARM一统天下，不依赖bios。有人告诉我，要在非 x86 系统上安装显卡，您仍然需要在 x86 BIOS 上的 x86 中进行一些操作，才能弄清楚如何在无需运行 x86 BIOS 的情况下调出主流显卡。观看模拟器运行 bios 并查看它的作用，找出它在没有 bios 的情况下替换 init 上的电源...编写指令集模拟器或反汇编程序是编写机器代码之外的下一步，我什至不会浪费在 x86 上的第二次，

如果 x86 BIOS 是您想要的方式，那么最好的方法是为 qemu、virtualbox 或其他虚拟机编写、替换或修改 BIOS。用您的BIOS替换该BIOS可能会替换某个目录中的文件或使用命令行选项来指定备用BIOS。一旦您在这方面经验丰富，那么如果仍然有带有旧版 bioses 的主板，也许您可​​以破解自己的编程方式（需要购买几个每种类型的主板，因为您会砖一些）。有如此多的嵌入式系统可以以 20 到 200 美元的价格获得相同水平的经验，如果没有像样的原理图和文档，在 pc 主板上破解是没有意义的。您可以挖掘一台原始 PC，其中记录了原理图和 bios 列表，并且插入了BIOS，因此如果您的BIOS无法启动（并且不会破坏主板），则它不是一块砖，您可以重新编程或更换BIOS芯片。可能想使用微控制器来代替假的 bios，因为找到合适的硬件来重新编程更多的 bios 芯片可能更难找到可以工作的原始 PC ......有一个 amiga 社区可能会更有趣，并且会很高兴您改进/调整他们的 BIOS，比如将现代硬件置于遗留系统调用之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-27T18:17:01.560

如果您想为兼容 IBM PC 的计算机编写 BIOS（这是当今大多数台式 PC，尽管 CPU 指令集有更多扩展，以及一些不同的 BUS 接口），那么我建议您查看***[IBM PC](https://nofile.io/f/oKNYFtFSex2/1502234_PC_Technical_Reference_Apr83.pdf)***、***[IBM PC XT](https://nofile.io/f/ddXsbVJoTMo/1502237_PC_XT_Technical_Reference_Apr83.pdf)***和***[IBM PC AT 技术参考手册](https://nofile.io/f/gZwhY2eMy0g/6183355_PC_AT_Technical_Reference_Mar86.pdf)***。特别是 IBM PC AT 手册，因为那是事实上的标准。

这些手册有一个 IBM 在他们的计算机上使用的完整 BIOS 的程序列表，并且它们是汇编语言的。您可能需要稍微搜索一下这些手册（尤其是 IBM PC AT 手册）才能找到它们，因为有些没有直接列在目录中，但它们就在那里。希望这些 BIOS 可以帮助您入门。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-30T18:30:11.437

BIOS 可以用任何您喜欢的语言编写，尽管较低级别的语言给您更多的控制权。汇编代码和机器代码几乎相同，区别在于微代码接口和您键入的内容，例如。对于机器代码，您只需输入 2 个字符，程序集会为您提供字母数字。当我需要计算机每隔几个小时启动一次并且没有找到任何可以做到这一点的 BIOS 时，我开始寻找自定义 BIOS。

要刷新 BIOS，请遵循制造商指南。BIOS 现在已替换为 UEFI（以增加安全性）。结帐：[https ://www.pcworld.com/article/187437/how-to-update-your-bios.html](https://www.pcworld.com/article/187437/how-to-update-your-bios.html)

x86 和 amd64 指令参考：[https](https://www.felixcloutier.com/x86/)
://www.felixcloutier.com/x86/ 带有扩展名的 x86 指令：[https](https://en.wikipedia.org/wiki/X86_instruction_listings)
://en.wikipedia.org/wiki/X86_instruction_listings i386 指令参考：[https://css.csail.mit。 edu/6.858/2014/readings/i386.pdf](https://css.csail.mit.edu/6.858/2014/readings/i386.pdf)
x86 组装指南：[https](https://www.cs.virginia.edu/~evans/cs216/guides/x86.html)
://www.cs.virginia.edu/~evans/cs216/guides/x86.html 英特尔指令集参考：[https://software.intel。 com/sites/default/files/managed/a4/60/325383-sdm-vol-2abcd.pdf](https://software.intel.com/sites/default/files/managed/a4/60/325383-sdm-vol-2abcd.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-21T00:20:15.370

FWIW Modbin 是一个 DOS 程序，顾名思义，它可以修改 BIN 映像，特别是为了对现有 BIOS 代码进行简单的相当极端的更改。

如果你能得到一个旧主板（很多都被扔掉了），我会鼓励你玩转 BIOS。它的信息丰富且有趣，如果有人如此倾向于并且您似乎是 :) 曾经有一段时间我从主板上下载了 BIOS 映像，这些主板具有相同或相似的芯片组，但由不同的制造商制造……有时具有相当大的优势，包括诸如在原始主板制造商丢球或倒下后继续获取 BIOS 更新等简单的问题，以及面向功能和性能的选项和更改。

这导致了“HOT Flashing”，它正在拉起一个带插座的 BIOS 芯片，以便引脚几乎没有接触，一旦启动，拉动那个并替换一个坏的（通常是我用 fuxored 的），同时仍在运行和闪烁它使用使系统保持活动状态的缓存 BIOS 功能。为我们这些极客说服的人提供有趣的东西，让我有信心为 OS/2 编写设备驱动程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-29T00:22:55.700

除了让电脑运行之外，还有其他方法可以刷新 BIOS。但它需要一些硬件。不过应该不会很贵。

你可以尝试这种技术：http: [//hackaday.com/2010/11/18/build-your-own-soic-progamming-clip/](http://hackaday.com/2010/11/18/build-your-own-soic-progamming-clip/)

我今天看到的这个演讲： [https ://conference.hitb.org/hitbsecconf2015ams/sessions/how-many-million-bioses-would-you-like-to-infect/](https://conference.hitb.org/hitbsecconf2015ams/sessions/how-many-million-bioses-would-you-like-to-infect/)

它更详细地解释了它，尽管您可能不是在寻找感染，但涵盖了一些获取 bios 的技术，其中编程剪辑就是其中之一。

# google-app-engine - 自动备份到 Google Cloud Storage - 使用 cron.yaml 的 Google App Engine Datastore

> ID：10890050
> 
> 赞同：5
> 
> 时间：2012-06-05T00:15:01.433
> 
> 标签：google-app-engine

因此，我正在尝试使用 cron.yaml 自动化我们的 GAE 数据存储备份。此外，我想使用 Google Cloud Storage 作为我们备份的目的地。我创建了一个存储桶并设置了 ACL。手动备份可通过 Datastore 管理控制台进行。我什至可以让 cron 工作。但是，我们将相同的代码库推送到 3 个不同的环境：开发、登台、生产。因此，我想根据应用程序名称将不同存储桶中的备份分开。

我希望暂存数据存储区转到 myapp_staging_bk 存储桶，在 myapp_dev_bk 存储桶中进行开发，并使用 myapp_live_bk。

cron.yaml：

```
 cron:
- description: My Daily Backup
  url: /_ah/datastore_admin/backup.create?name=BackupToCloud&kind=LogTitle&kind=EventLog&filesystem=gs&gs_bucket_name=whitsend
  schedule: every 12 hours
  target: ah-builtin-python-bundle 
```

如果我能想出一种方法在上面的 url 中提取应用程序名称，所有这一切都将变得非常容易。像这样的东西：

```
url: /_ah/datastore_admin/backup.create?name=BackupToCloud&kind=LogTitle&kind=EventLog&filesystem=gs&{myapp}_bk=whitsend
  schedule: every 12 hours 
```

其中 {myapp} 是 app.yaml 中应用的名称。

[https://developers.google.com/appengine/articles/scheduled_backups](https://developers.google.com/appengine/articles/scheduled_backups)没有说明这种类型的设置。

我知道我可以使用我们的 CI 服务器来解决这个问题，但我想避免这种情况。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:40:50.140

修改 cron handler 调用自己的代码，然后根据自己的 App ID 填写 bucket name 参数后，要么调用代码从你自己的代码开始备份，要么从你自己的代码 URLFetch 开始备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T11:33:13.590

为了准确地说 Nick 所说的，您可以在代码中使用任务队列 API。这就是 cron 工作在幕后所做的。

例如，如果您使用 python：

```
task = taskqueue.add(
    url='/_ah/datastore_admin/backup.create',
    target='ah-builtin-python-bundle',
    params={
        'name': 'my_backup',
        'kind': ['kind1','kind2','kind3'],
        'filesystem':'gs',
        'gs_bucket_name':'[MY_GCS_BUCKET]',
    })

response.write(
    'Task {} enqueued, ETA {}.'.format(task.name, task.eta)) 
```

# java - 使用java程序动态纠正java代码中的错误（源码分析+错误清除）

> ID：10890051
> 
> 赞同：0
> 
> 时间：2012-06-05T00:15:06.750
> 
> 标签：java, eclipse, analysis

我接到了一项任务，我需要将 C# 库转换为 java 库，因此我使用实用工具（C# 到 Java 转换器）将 C# 代码转换为 java。但是，该工具在转换代码方面的效率约为 60%。因此，为此我需要编写完成其余整改的程序。

为了实现它，我使用了 Java Compiler API 来定位错误代码。然而，从 Java 编译器诊断返回的错误是非常通用的，它并没有向程序提供很多关于错误是什么以及如何纠正的指示？

我相信 Eclipse 有一个快速修复（在编译时给出的提示和解决方案），实际上可以实现相同的效果，因此有什么方法可以使用 Eclipse API 来“快速修复”代码，如果不是，那会是什么解决这个问题的理想方法？

我确实查看了 Eclipse API，但我无法找到 quickfix API。

# javascript - jQuery UI自动完成下拉不显示

> ID：10890052
> 
> 赞同：3
> 
> 时间：2012-06-05T00:15:19.447
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete, spotify

我正在尝试使用 jQuery UI 自动完成功能来搜索 spotify 的音乐库。虽然一切顺利，但我确实得到了成功的回应：

![jQuery 自动完成 Spotify 歌曲搜索](../Images/1ff76269b70e940b1bbbe1cef0f37849.png)

没有下拉建议。例如，我正在搜索“时间”，我想看看：

*   **汉斯·齐默的《时间》** <--（这就是我要找的）
*   Pitbull**时光**倒流
*   **Big Time** Rush提升

等等这是我的 JavaScript 代码：

```
<script>$(function() {$( "#spotify_song_search" ).autocomplete({source: function(request, response) {
        $.get("http://ws.spotify.com/search/1/track.json", { q: request.term },function( data ) { alert(data); response(data);});
    },success: function(data) {
            // pass your data to the response callback 
            alert(data); response(data);
        }});});</script> 
```

我一定做错了什么。我还在这里检查了 jQuery 文档：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)但它没有给出任何解释为什么会发生这种情况。我添加了警报，看看我是否至少会得到响应，我这样做了，但它只是返回`[object Object]`。我需要做什么才能显示搜索结果？

**错误：** `Uncaught SyntaxError: Unexpected token ILLEGAL`在第 417 行： ![在此处输入图像描述](../Images/b76d5493158136bb6496505ee65eeaff.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:47:40.570

自动完成小部件希望数据以非常特定的方式格式化，以便可以对其进行解析。您提供或传递给`response`回调的数组必须是：

1.  带有字符串的数组，*或*
2.  包含具有**标签**属性、**值**属性或两者的对象的数组。

*（有关更多信息，请参阅“概述”/“预期数据格式”下的自动完成文档）*

当您拥有无法更改的数据源时，执行此操作的典型方法是`$.map`将结果转换为自动完成期望的格式：

```
$("#spotify_song_search").autocomplete({
    source: function(request, response) {
        $.get("http://ws.spotify.com/search/1/track.json", {
            q: request.term
        }, function(data) {
            response($.map(data.tracks, function (el) {
                return el.name;
            }));
        });
    }
}); 
```

**示例： http:** [//jsfiddle.net/ANmUs/](http://jsfiddle.net/ANmUs/)（注意：这似乎目前在 Firefox 中不起作用；这可能是由于响应的大小。但它在 Chrome 中运行良好）

# c# - 如何设置已选中的组合框编辑 UI 项的某些复选框？

> ID：10890054
> 
> 赞同：1
> 
> 时间：2012-06-05T00:15:55.047
> 
> 标签：c#, winforms, combobox, editor, devexpress

如何设置[CheckedComboBoxEdit](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsCheckedComboBoxEdittopic) UI 项的某些复选框？这是给 DevExpress 的。因此，如果我有一个包含 5 个复选框的下拉列表，并且我希望在表单加载时只选中下拉列表中的两个复选框，那么 C# 代码会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:25:15.010

将数据加载到[CheckedComboBoxEdit](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsCheckedComboBoxEdittopic)后，您需要执行以下操作：

```
checkedComboBoxEdit.Properties.Items[0].CheckState = CheckState.Checked;
checkedComboBoxEdit.Properties.Items[3].CheckState = CheckState.Checked; 
```

这会将列表中的第 1 项和第 4 项标记为已选中。

相关帮助文章：[CheckedListBoxItem.CheckState](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsControlsCheckedListBoxItem_CheckStatetopic)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-08T09:26:02.063

chccmbobox_username.Properties.SeparatorChar = ";"

Dim st As String = ""

对于每个模型作为 TicketModel 的结果

```
st += model.User_LongName & ";" 
```

下一个

chccmbobox_username.SetEditValue(st)

# python - 如何在 PySNMP 中实现自定义 MIB？

> ID：10890069
> 
> 赞同：7
> 
> 时间：2012-06-05T00:18:12.893
> 
> 标签：python, mib, pysnmp

我已经有了 MIB 文本文件（我需要以某种方式将其制成 .py 文件吗？？）。我正在尝试使用 PySNMP（不是 net-snmp）。我已经能够连接到我的设备并打印出一些信息，但这些信息并不是很有帮助（只是 ObjectName、ObjectIdentifier 等）。我希望能够与设备通信（发送命令以更改和读取值），但我看到的所有教程似乎都没有什么帮助。有谁知道如何使用我的自定义 MIB 与我的设备进行有效通信？我错过了什么好网站？[http://pysnmp.sourceforge.net/](http://pysnmp.sourceforge.net/)没问题，但我需要别的东西......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:01:00.993

要将 MIB 与 pysnmp 一起使用，您应该首先将您的 MIB 转换为 pysnmp 格式（这是 Python 对象的集合）。使用 pysnmp/tools/build-pysnmp-mib shell 脚本以下列方式完成转换：

```
$ sh build-pysnmp-mib -h
build-pysnmp-mib: illegal option -- h
Convert MIB text file into PySNMP-compliant module, see http://pysnmp.sf.net.
Usage: build-pysnmp-mib [-o pysnmp-mib-file ] [ mib-text-file ] 
```

确保您还安装了 libsmi（pysnmp 脚本使用 libsmi 发行版中的 smidump 工具）。

除非您将新的 pysnmp MIB 文件放入 pysnmp/smi/mibs/（这不是一个好主意），否则您还必须将 pysnmp 指向您自己的 MIB 所在的位置。这可以按照[这里](http://pysnmp.sourceforge.net/faq.html#4)的解释来完成。

完成 MIB 后，您可以按照[此处](http://pysnmp.sourceforge.net/examples/4.x/v3arch/oneliner/manager/withmib/setgen.html)的说明从脚本中使用它。

您可以通过调用 pysnmp-apps 软件包附带的 pysnmpget/pysnmpset 工具快速检查新 MIB 的工作方式。

顺便说一句，您需要使用的 MIB 很可能已经转换为 pysnmp 格式并与 pysnmp-mibs 包一起分发。

# symfony - 带有transchoice的symfony2翻译

> ID：10890074
> 
> 赞同：2
> 
> 时间：2012-06-05T00:18:41.823
> 
> 标签：symfony, translation, yaml, twig, pluralize

我正在翻译以下键`activity.fr.yml`

```
user.list.link: '{1}et %count% autre|]1,Inf[voir les %count% autres' 
```

使用 tranchoice

```
<a href="{{ moreLink }}" >{% transchoice count from "activity" %}user.list.link{% endtranschoice %}</a> 
```

我收到以下错误

`An exception has been thrown during the rendering of a template ("Unable to choose a translation.")`

我认为已找到翻译，否则我不会收到有关无法选择翻译但密钥本身的错误。

此外，来自同一个 yaml 的所有其他密钥甚至其他 tranchoice 都得到了很好的翻译。

我按照[文档](http://symfony.com/doc/master/book/translation.html#twig-templates)并尝试添加`with {'%count%': count}`但没有成功。

有人知道这里出了什么问题吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:03:30.967

语法很好，但作为 %count% 传递的值不能为负数，也不等于 0，因为复数字符串中没有 {0} 定义。因此，我进行了测试以确保该值 >= 0 并像这样修改了字符串并对其进行了修复。

```
user.list.link: '{0}|{1}et %count% autre|]1,Inf[voir les %count% autres' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:58:16.747

您需要传递用于确定将选择的翻译的参数。

查看[文档](http://symfony.com/doc/master/book/translation.html#twig-templates)中的以下示例：

```
{% transchoice count with {'%name%': 'Fabien'} from "app" %}
    {0} There is no apples|{1} There is one apple|]1,Inf] There are %count% apples
{% endtranschoice %} 
```

适应你的例子：

```
{% transchoice count with {'%count%': count} from "activity" %}
    user.list.link
{% endtranschoice %} 
```

如果它不起作用，则可能找不到您的翻译。所以，symfony 使用你的密钥作为后备并且不能确定一个有效的选择，因为你的密钥不支持这个。

要检查这一点，请尝试使用这样的密钥：

```
user.list.link | user.list.link.many 
```

不要忘记在您的活动目录中使用相同的密钥。

# python - subprocess.call() 与 GUI (Tkinter) 交互

> ID：10890076
> 
> 赞同：3
> 
> 时间：2012-06-05T00:18:48.667
> 
> 标签：python, python-2.7, tkinter, subprocess

有没有办法通过 Tkinter 的小部件使用标准输入`subprocess.call()`或与标准输入交互，并将标准输出输出到小部件？`subprocess.Popen()``Entry``Text`

我不确定如何处理这样的事情，因为我是使用该`subprocess`模块的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:59:14.510

认为我已经掌握了使用`Entry`as stdin 进行子进程的基础知识。您可能需要根据自己的需要调整它（re：输出到`Text`小部件）。

这个例子调用了一个测试脚本：

```
# test.py:

#!/usr/bin/env python
a = raw_input('Type something!: \n') #the '\n' flushes the prompt
print a 
```

只需要一些输入（来自`sys.stdin`）并打印出来。

通过 GUI 调用它并与之交互是通过以下方式完成的：

```
from Tkinter import *
import subprocess

root = Tk() 

e = Entry(root)
e.grid()

b = Button(root,text='QUIT',command=root.quit)
b.grid()

def entryreturn(event):
    proc.stdin.write(e.get()+'\n') # the '\n' is important to flush stdin
    e.delete(0,END)

# when you press Return in Entry, use this as stdin 
# and remove it
e.bind("<Return>", entryreturn)

proc = subprocess.Popen('./test.py',stdin=subprocess.PIPE)

root.mainloop() 
```

现在输入`Entry` `e`的任何内容（后跟`Return`键），然后通过 stdin 传递到`proc`.

希望这可以帮助。

* * *

还要检查[这个](https://stackoverflow.com/questions/527197/intercepting-stdout-of-a-subprocess-while-it-is-running)关于子流程问题的标准输出的想法。您需要编写一个新的标准输出来将标准输出重定向到文本小部件，例如：

```
class MyStdout(object):
    def __init__(self,textwidget):
        self.textwidget = textwidget
    def write(self,txt):
        self.textwidget.insert(END,txt)

sys.stdout = MyStdout(mytextwidget) 
```

但我建议阅读人们已经实现这一目标的其他示例。

# macos - NSTextView：获取文本更改（插入和删除）

> ID：10890082
> 
> 赞同：3
> 
> 时间：2012-06-05T00:19:46.240
> 
> 标签：macos, cocoa, nstextview

我有一个`NSTextView`，我收到了`-textDidChange:`通知。从中，我可以获得整个文本视图的当前字符串值，但我不知道如何判断删除和添加的内容。

例如，如果文本视图中的字符串是`This is a string`并且用户删除了`g`，我如何才能知道该更改？

有没有办法实现这一点，最好没有子类化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:27:02.153

有几个[委托方法](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSTextViewDelegate_Protocol/Reference/Reference.html)应该可以满足您的需求：

```
– textView:shouldChangeTextInRange:replacementString:
– textView:shouldChangeTextInRanges:replacementStrings:
– textView:shouldChangeTypingAttributes:toAttributes:
– textViewDidChangeTypingAttributes: 
```

# javascript - jQuery 在 `$.queue()` 中在哪里做动画/计时器？

> ID：10890084
> 
> 赞同：1
> 
> 时间：2012-06-05T00:20:15.233
> 
> 标签：javascript, jquery, animation

我正在查看 jQuery 的源代码（特别是`queue()`函数），并看到它只是将函数放入`.data()`与该元素关联的对象中：

```
queue: function( elem, type, data ) {
    var q;
    if ( elem ) {
        type = ( type || "fx" ) + "queue";
        q = jQuery._data( elem, type );

        // Speed up dequeue by getting out quickly if this is just a lookup
        if ( data ) {
            if ( !q || jQuery.isArray(data) ) {
                q = jQuery._data( elem, type, jQuery.makeArray(data) );
            } else {
                q.push( data );
            }
        }
        return q || [];
    }
} 
```

现在看看`._data`which is 只是`.data()`第四个参数 true，在哪里设置了计时器或动画？或者任何函数调用这个问题：

```
data: function( elem, name, data, pvt /* Internal Use Only */ ) {
    if ( !jQuery.acceptData( elem ) ) {
        return;
    }

    var privateCache, thisCache, ret,
        internalKey = jQuery.expando,
        getByName = typeof name === "string",

        // We have to handle DOM nodes and JS objects differently because IE6-7
        // can't GC object references properly across the DOM-JS boundary
        isNode = elem.nodeType,

        // Only DOM nodes need the global jQuery cache; JS object data is
        // attached directly to the object so GC can occur automatically
        cache = isNode ? jQuery.cache : elem,

        // Only defining an ID for JS objects if its cache already exists allows
        // the code to shortcut on the same path as a DOM node with no cache
        id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey,
        isEvents = name === "events";

    // Avoid doing any more work than we need to when trying to get data on an
    // object that has no data at all
    if ( (!id || !cache[id] || (!isEvents && !pvt && !cache[id].data)) && getByName && data === undefined ) {
        return;
    }

    if ( !id ) {
        // Only DOM nodes need a new unique ID for each element since their data
        // ends up in the global cache
        if ( isNode ) {
            elem[ internalKey ] = id = ++jQuery.uuid;
        } else {
            id = internalKey;
        }
    }

    if ( !cache[ id ] ) {
        cache[ id ] = {};

        // Avoids exposing jQuery metadata on plain JS objects when the object
        // is serialized using JSON.stringify
        if ( !isNode ) {
            cache[ id ].toJSON = jQuery.noop;
        }
    }

    // An object can be passed to jQuery.data instead of a key/value pair; this gets
    // shallow copied over onto the existing cache
    if ( typeof name === "object" || typeof name === "function" ) {
        if ( pvt ) {
            cache[ id ] = jQuery.extend( cache[ id ], name );
        } else {
            cache[ id ].data = jQuery.extend( cache[ id ].data, name );
        }
    }

    privateCache = thisCache = cache[ id ];

    // jQuery data() is stored in a separate object inside the object's internal data
    // cache in order to avoid key collisions between internal data and user-defined
    // data.
    if ( !pvt ) {
        if ( !thisCache.data ) {
            thisCache.data = {};
        }

        thisCache = thisCache.data;
    }

    if ( data !== undefined ) {
        thisCache[ jQuery.camelCase( name ) ] = data;
    }

    // Users should not attempt to inspect the internal events object using jQuery.data,
    // it is undocumented and subject to change. But does anyone listen? No.
    if ( isEvents && !thisCache[ name ] ) {
        return privateCache.events;
    }

    // Check for both converted-to-camel and non-converted data property names
    // If a data property was specified
    if ( getByName ) {

        // First Try to find as-is property data
        ret = thisCache[ name ];

        // Test for null|undefined property data
        if ( ret == null ) {

            // Try to find the camelCased property
            ret = thisCache[ jQuery.camelCase( name ) ];
        }
    } else {
        ret = thisCache;
    }

    return ret;
} 
```

编辑zzzzBov：

```
animate: function( prop, speed, easing, callback ) {
    var optall = jQuery.speed( speed, easing, callback );

    if ( jQuery.isEmptyObject( prop ) ) {
        return this.each( optall.complete, [ false ] );
....
    return optall.queue === false ?
        this.each( doAnimation ) :
        this.queue( optall.queue, doAnimation ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:50:35.143

jQuery 的[`animate`方法](http://api.jquery.com/animate)是一个复杂的野兽（*参见下面*的参考资料）。它首先对参数进行规范化，然后立即跳转到jQuery[方法](http://api.jquery.com/queue)`doAnimation`使用的回调函数。jQuery 队列的动画，因此它们按顺序发生。队列本身不会为任何东西设置动画，它只是充当执行动画的代码的触发器。[`queue`](http://api.jquery.com/queue)

在结尾处`doAnimation`，有一个循环来为动画中的每个相关属性设置动画（*第 8576 - 8618 行，v1.7.2 行*）。循环的第一行实例化一个新`jQuery.fx`对象：

```
e = new jQuery.fx( this, opt, p ); 
```

在循环结束时，`e.custom(...)`在几个地方调用。这是重要的功能。如果您仔细查看`jQuery.fx.prototype.custom`（*请参阅下面*的参考资料），您会发现：

```
if ( t() && jQuery.timers.push(t) && !timerId ) {
    timerId = setInterval( fx.tick, fx.interval );
} 
```

行`setInterval`是 jQuery 的动画心跳开始的地方。这指向`jQuery.fx.tick`（*参见下面*的参考资料），它遍历每个计时器`jQuery.timers`。如果您查看上面的代码片段，您会注意到该`if`语句的一部分涉及推`t`入计时器堆栈。`t`设置`jQuery.fx.prototype.custom`为：

```
function t( gotoEnd ) {
    return self.step( gotoEnd );
} 
```

这就是 jQuery 动画发生的地方。

* * *

# 参考

jQuery 的`animate`功能（*第 8484 - 8627 行，v1.7.2*）：

```
animate: function( prop, speed, easing, callback ) {
    var optall = jQuery.speed( speed, easing, callback );

    if ( jQuery.isEmptyObject( prop ) ) {
        return this.each( optall.complete, [ false ] );
    }

    // Do not change referenced properties as per-property easing will be lost
    prop = jQuery.extend( {}, prop );

    function doAnimation() {
        // XXX 'this' does not always have a nodeName when running the
        // test suite

        if ( optall.queue === false ) {
            jQuery._mark( this );
        }

        var opt = jQuery.extend( {}, optall ),
            isElement = this.nodeType === 1,
            hidden = isElement && jQuery(this).is(":hidden"),
            name, val, p, e, hooks, replace,
            parts, start, end, unit,
            method;

        // will store per property easing and be used to determine when an animation is complete
        opt.animatedProperties = {};

        // first pass over propertys to expand / normalize
        for ( p in prop ) {
            name = jQuery.camelCase( p );
            if ( p !== name ) {
                prop[ name ] = prop[ p ];
                delete prop[ p ];
            }

            if ( ( hooks = jQuery.cssHooks[ name ] ) && "expand" in hooks ) {
                replace = hooks.expand( prop[ name ] );
                delete prop[ name ];

                // not quite $.extend, this wont overwrite keys already present.
                // also - reusing 'p' from above because we have the correct "name"
                for ( p in replace ) {
                    if ( ! ( p in prop ) ) {
                        prop[ p ] = replace[ p ];
                    }
                }
            }
        }

        for ( name in prop ) {
            val = prop[ name ];
            // easing resolution: per property > opt.specialEasing > opt.easing > 'swing' (default)
            if ( jQuery.isArray( val ) ) {
                opt.animatedProperties[ name ] = val[ 1 ];
                val = prop[ name ] = val[ 0 ];
            } else {
                opt.animatedProperties[ name ] = opt.specialEasing && opt.specialEasing[ name ] || opt.easing || 'swing';
            }

            if ( val === "hide" && hidden || val === "show" && !hidden ) {
                return opt.complete.call( this );
            }

            if ( isElement && ( name === "height" || name === "width" ) ) {
                // Make sure that nothing sneaks out
                // Record all 3 overflow attributes because IE does not
                // change the overflow attribute when overflowX and
                // overflowY are set to the same value
                opt.overflow = [ this.style.overflow, this.style.overflowX, this.style.overflowY ];

                // Set display property to inline-block for height/width
                // animations on inline elements that are having width/height animated
                if ( jQuery.css( this, "display" ) === "inline" &&
                        jQuery.css( this, "float" ) === "none" ) {

                    // inline-level elements accept inline-block;
                    // block-level elements need to be inline with layout
                    if ( !jQuery.support.inlineBlockNeedsLayout || defaultDisplay( this.nodeName ) === "inline" ) {
                        this.style.display = "inline-block";

                    } else {
                        this.style.zoom = 1;
                    }
                }
            }
        }

        if ( opt.overflow != null ) {
            this.style.overflow = "hidden";
        }

        for ( p in prop ) {
            e = new jQuery.fx( this, opt, p );
            val = prop[ p ];

            if ( rfxtypes.test( val ) ) {

                // Tracks whether to show or hide based on private
                // data attached to the element
                method = jQuery._data( this, "toggle" + p ) || ( val === "toggle" ? hidden ? "show" : "hide" : 0 );
                if ( method ) {
                    jQuery._data( this, "toggle" + p, method === "show" ? "hide" : "show" );
                    e[ method ]();
                } else {
                    e[ val ]();
                }

            } else {
                parts = rfxnum.exec( val );
                start = e.cur();

                if ( parts ) {
                    end = parseFloat( parts[2] );
                    unit = parts[3] || ( jQuery.cssNumber[ p ] ? "" : "px" );

                    // We need to compute starting value
                    if ( unit !== "px" ) {
                        jQuery.style( this, p, (end || 1) + unit);
                        start = ( (end || 1) / e.cur() ) * start;
                        jQuery.style( this, p, start + unit);
                    }

                    // If a +=/-= token was provided, we're doing a relative animation
                    if ( parts[1] ) {
                        end = ( (parts[ 1 ] === "-=" ? -1 : 1) * end ) + start;
                    }

                    e.custom( start, end, unit );

                } else {
                    e.custom( start, val, "" );
                }
            }
        }

        // For JS strict compliance
        return true;
    }

    return optall.queue === false ?
        this.each( doAnimation ) :
        this.queue( optall.queue, doAnimation );
} 
```

`jQuery.fx`（*第 8577 行，v1.7.2* ）的实例化：

```
e = new jQuery.fx( this, opt, p ); 
```

`jQuery.fx.prototype.custom`（第 8806 - 8836 行，v1.7.2）：

```
// Start an animation from one number to another
custom: function( from, to, unit ) {
    var self = this,
        fx = jQuery.fx;

    this.startTime = fxNow || createFxNow();
    this.end = to;
    this.now = this.start = from;
    this.pos = this.state = 0;
    this.unit = unit || this.unit || ( jQuery.cssNumber[ this.prop ] ? "" : "px" );

    function t( gotoEnd ) {
        return self.step( gotoEnd );
    }

    t.queue = this.options.queue;
    t.elem = this.elem;
    t.saveState = function() {
        if ( jQuery._data( self.elem, "fxshow" + self.prop ) === undefined ) {
            if ( self.options.hide ) {
                jQuery._data( self.elem, "fxshow" + self.prop, self.start );
            } else if ( self.options.show ) {
                jQuery._data( self.elem, "fxshow" + self.prop, self.end );
            }
        }
    };

    if ( t() && jQuery.timers.push(t) && !timerId ) {
        timerId = setInterval( fx.tick, fx.interval );
    }
} 
```

`jQuery.fx.tick`（*第 8949 - 8965 行，v1.7.2*）：

```
tick: function() {
    var timer,
        timers = jQuery.timers,
        i = 0;

    for ( ; i < timers.length; i++ ) {
        timer = timers[ i ];
        // Checks the timer has not already been removed
        if ( !timer() && timers[ i ] === timer ) {
            timers.splice( i--, 1 );
        }
    }

    if ( !timers.length ) {
        jQuery.fx.stop();
    }
} 
```

# css - 需要根据浏览器大小调整内容 div（在页眉和页脚 div 之间）

> ID：10890086
> 
> 赞同：1
> 
> 时间：2012-06-05T00:20:37.027
> 
> 标签：css, html

我遇到了页面布局问题。我觉得答案很简单，我已经做了很多工作来寻找答案和实验，但我似乎无法确定它。

页面需要一个固定高度的页眉和页脚，但可以随浏览器窗口水平调整。在这两者之间，有一个'主' div 应该水平和垂直扩展以填充页眉和页脚之间的所有可用空间（但我不能在浏览器窗口上出现滚动条）。'main' div 本身应该有一个固定宽度的左侧'sidebar' 和一个'content' div 占据剩余空间。

我要附上一张图片来解释我正在努力的方向，但我没有 10 个代表作为新用户，所以我无法附上图片（由于“垃圾邮件预防机制”）。

我一直在这里玩小提琴：http: [//jsfiddle.net/pURjN/4/](http://jsfiddle.net/pURjN/4/)

我正在寻找一些指示和方向。请随意摆弄那个小提琴。

谢谢，
J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:28:20.797

使用绝对定位。似乎您不一定需要“主要” div，但它也不会受到伤害。

```
#header {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 75px;
}
#sidebar {
    position: absolute;
    top: 75px;
    left: 0;
    bottom: 75px;
    width: 250px;
}
#content {
    position: absolute;
    top: 75px;
    left: 250px;
    right: 0;
    bottom: 75px;
}
#footer {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
} 
```

[http://jsfiddle.net/gilly3/pURjN/7/](http://jsfiddle.net/gilly3/pURjN/7/)

如果没有额外的 div，它也能正常工作：http: [//jsfiddle.net/gilly3/pURjN/8/](http://jsfiddle.net/gilly3/pURjN/8/)

# android - 接收器、服务、警报管理器和状态栏通知

> ID：10890088
> 
> 赞同：0
> 
> 时间：2012-06-05T00:21:16.707
> 
> 标签：android, notifications, broadcastreceiver, android-service, alarmmanager

我有一个在设备启动时运行的接收器和服务，但是假设用户从不关闭他的设备，我应该如何处理？

如何从我的接收器/服务中使用警报管理器安排状态栏通知？

```
package it.bloomp.service;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

public class EventsNotificationService extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        System.out.println("Service created.");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        System.out.println("Service destroyed.");
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onCreate();
        System.out.println("Service started.");
    }
} 
```

...

```
package it.bloomp.service;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class EventsNotificationReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            Intent serviceIntent = new Intent(context, EventsNotificationService.class);
            context.startService(serviceIntent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:06:21.773

您可以使用适合您要求的其他类型的广播接收器。或者您可以使用 Timer 类设置一个时间段来定期运行您的任务，如下所示；

```
Timer time;
time..scheduleAtFixedRate(new TimerTask() {            
        @Override
        public void run() {
           //Your task         
        }
    }, 0/*Start delay*/, 1000/*Delay period*/); 
```

**更新：** 要安排通知，您可以执行以下操作：

```
Intent intentSafety_Check_Service = new Intent(Activity_Add_Safety_Check.this, Safety_Check_Service.class);

    pendingIntent = PendingIntent.getService(Activity_Add_Safety_Check.this,                Integer.parseInt(currCheckID), intentSafety_Check_Service, 0);

    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

    Calendar calendar = Calendar.getInstance();

    calendar.setTimeInMillis(/*Your alarm date converted in milliseconds*/);

    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent); 
```

# php - JSON 说明

> ID：10890091
> 
> 赞同：0
> 
> 时间：2012-06-05T00:21:30.940
> 
> 标签：php, jquery, json, csv, callback

有人可以帮我分解下面的陈述... base_url 最初指向我只能假设是一个包含 .csv 文件的目录。

鉴于我的服务器上有一个自定义 .csv 文件，我更改了 base_url 的地址，但没有看到任何数据。

我有大约一百万个问题，截止日期很短。任何帮助将不胜感激。

顺便说一句...我已经浏览了 JQUERY 站点的其他站点以尝试理解.. 任何帮助将不胜感激。

```
$.getJSON(this.base_url+"?callback=?", {cmd:"getMakes", year:"2009"}, function(data) {

   //The 'data' variable contains all response data.
   var makes = data.Makes;
   for (var i = 0; i < makes.length; i++)
   {
       //You can now do what you like with the response data
       alert(makes[i].make_display);
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:58:52.677

通过查看脚本的语法和使用它的上下文，我将把它扔在那里说，'this.base_url' 不应该是一个 .CSV 文件。

首先，`$.getJSON`将为您的网络服务器设置一个 GET 请求。如果它只是对 CSV 文件的 GET 请求，那么一切都有意义，因为您正在获取 CSV 文件。但是，添加了 JSON 关键字，这意味着您期望对您的 GET 请求进行格式正确的 JSON 响应。

其次，您正在添加 GET 数据，`?cmd=getMakes&year=2009`. CSV 文件本质上是文件系统上的平面文件。它不是智能文件，这意味着它不是由逻辑驱动的，除非您在 .htaccess 文件中进行重定向或修改 MIME 类型。

您可能正在寻找 .csv 以外的文件。一些框架允许您解释一个链接，例如`http://domain.com/api/function`，它看起来像一个省略扩展名的 url。

# android - 从动态视图中识别按钮

> ID：10890100
> 
> 赞同：1
> 
> 时间：2012-06-05T00:22:17.883
> 
> 标签：android, button, dynamic

我已经为动态布局编写了这段代码，我正在使用这个循环来生成一对按钮（这是我生成它们的代码部分）

```
 for(int i = 1; i <= 2 ; i++) {
        Button button1 = new Button(this);
        button1.setTag("age");
        button1.setId(i);
        layout.addView(button1);

        Button button2 = new Button(this);
        button2.setId(i);
        button2.setTag("country");
        button2.setEnabled(false);
        layout.addView(button2);

        button1.setOnClickListener(this);
        button2.setOnClickListener(this);
       } 
```

我想要做的是，如果单击 button1，则 button2 应该被启用（最初它被禁用）。

如果按钮是在 xml 中创建的，这将是一项非常容易的任务，因为它们将为每个按钮具有单独的 R.id.xxxxx 名称，但在这里我无法理解如何检测 OnClick 中的另一个按钮（查看 v ) 方法，以便我可以更改它是否启用，我尝试为每个按钮添加标签，以便我有另一个参数来识别按钮但我不知道如何使用视图信息识别另一个按钮单击的按钮1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:33:23.623

我假设您在点击处理中使用了按钮标签。要保留标签数据并在按钮之间添加所需的接线，您可以创建一个用作标签的数据结构：

```
static class ButtonTag {
    String buttonType;
    Button partner;
    ButtonTag(String type, Button button) {
        buttonType = type;
        partner = button;
    }
} 
```

然后你可以重新组织你的设置代码：

```
for(int i = 1; i <= 2 ; i++) {
    Button button1 = new Button(this);
    button1.setId(i);
    layout.addView(button1);

    Button button2 = new Button(this);
    button2.setId(i);
    button2.setEnabled(false);
    button1.setTag(new ButtonTag("age", button2));
    button2.setTag(new ButtonTag("country", button1));
    layout.addView(button2);
} 
```

点击处理显然需要更改为强制`getTag()`转换为 a`ButtonTag`而不是 a `String`。

如果您不需要“年龄”和“国家”信息来区分按钮类型，只需将每个按钮设置为另一个按钮即可。

编辑：

对于后一种方案，您可以在点击侦听器中使用它：

```
public void onClick(View v) {
    Object tag = v.getTag();
    if (tag instanceof Button) {
        Button btn = (Button) tag;
        btn.setEnabled(true);
        v.setEnabled(false);
    }
} 
```

如果您出于其他原因需要标签的“年龄”和“国家”部分，则代码只会略有不同：

```
public void onClick(View v) {
    Object tag = v.getTag();
    if (tag instanceof ButtonTag) {
        ButtonTag bTag = (ButtonTag) tag;
        bTag.partner.setEnabled(true);
        v.setEnabled(false);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T11:03:16.737

在参考这个问题here（[通过ID或TAG查找按钮](https://stackoverflow.com/questions/9783102/find-button-by-id-or-tag/9783190#9783190)）后，我得到了问题的解决方案，它解决了我面临的问题！

```
public class DynmaicViewExperimentActivity extends Activity implements OnClickListener{

List<Button> buttons;

@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        buttons = new ArrayList<Button>();
        setDynamicContentViewOfThisPage();
    }

public void onClick(View v) {
    // TODO Auto-generated method stub
    int buttonType = 0;
    if (v.getTag()=="age")
            buttonType = 1;
    else if (v.getTag()=="country")
            buttonType = 2;
    switch (buttonType) {
        case 1:
            for(Button b: buttons) {
                if(b.getId() == v.getId() && b.getTag().equals("country")){
                    b.setEnabled(true);
                    v.setEnabled(false);
                    }
        case 2:
            for(Button b: buttons) {
                if(b.getId() == v.getId() && b.getTag().equals("age")){
                    b.setEnabled(true);
                    v.setEnabled(false);
                    }
                }
            }
        }

private void setDynamicContentViewOfThisPage() {
    // Defining the Scroll View and the LinearLayout
    ScrollView sv = new ScrollView(this);
    LinearLayout l = new LinearLayout(this);
    l.setOrientation(LinearLayout.VERTICAL);
    sv.addView(l);

                                for(int i = 1; i <= 2 ; i++) {

                                  Button button1 = new Button(this);
                                  button1.setId(i);
                                  button1.setTag("age");
                                  buttons.add(button1);
                                  l.addView(button1);

                                  Button button2 = new Button(this);
                                  button2.setId(i);
                                  button2.setTag("country");
                                  buttons.add(button2);
                                  l.addView(button2);

                                  button.setOnClickListener(this);
                                  button2.setOnClickListener(this);

    // Set the content View to this
        this.setContentView(sv);
    }
   }
 } 
```

# c# - C# asp.net：Chrome 中的 Cookie 过期日期

> ID：10890102
> 
> 赞同：9
> 
> 时间：2012-06-05T00:22:28.007
> 
> 标签：c#, google-chrome, date, cookies

我在使用 chrome 时遇到了 C# 中 cookie 的过期日期的问题。

这是我正在使用的代码：

```
public static void createCookie(Users u, DateTime expirationDate)
{
    HttpCookie loginCookie = new HttpCookie("cookie");
    loginCookie.Value = "somevalue";
    loginCookie.Expires = DateTime.UtcNow.AddDays(1d);
    HttpContext.Current.Response.Cookies.Add(loginCookie);
} 
```

我已经通过 Fiddler 运行了这段代码，它确实返回了正确的到期日期。cookie 的过期日期在 Firefox 和 IE9 中也是正确的但是，当我在 chrome 中运行它时，过期日期总是设置为：Sun, 07 Dec 1969 03:28:36 GMT

始终在格林威治标准时间 3:28:36，它永远不会改变。任何关于为什么会发生这种情况的想法将不胜感激。谢谢！

我还尝试使用 DateTime.Now.AddDays(1d) 设置到期日期，结果相同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T00:33:28.777

这是chrome当前版本的bug，是过期日期显示错误，不是实际过期时间，chrome会尊重你设置的值！

这是在他们的夜间版本中修复的错误的链接（验证为已修复 20.0.1132.7（官方版本 136817））：[http ://code.google.com/p/chromium/issues/detail?id=125546](http://code.google.com/p/chromium/issues/detail?id=125546)

# firefox - Firefox 光标不可见，单击其他任何内容时变为可见

> ID：10890103
> 
> 赞同：6
> 
> 时间：2012-06-05T00:22:43.017
> 
> 标签：firefox, focus, contenteditable

我遇到了我遇到过的最奇怪的错误，而我在这个问题上几乎无能为力。任何对如何调试（或任何聪明的解决方法）有想法的人都会很棒。

问题：

我正在使用 contenteditable 在 Firefox 中制作一个简单的所见即所得编辑器。当我通过 ajax 加载要编辑的文本时出现问题。在加载之前，光标看起来很好（一瞬间），一旦文本加载它就会消失。您仍然可以输入文本，并且光标肯定还在“那里”（状态框显示当前行/列就好了），但是光标不可见并且选择覆盖不出现。

这就是真正奇怪的原因：在任何其他 dom 元素上、firebug 上，甚至在另一个窗口上单击 ANYWHERE 都会使光标返回并表现得像正常一样。事实上，光标出现问题的唯一时间是最开始时，即最初加载页面或刷新时。单击 contentedtiable div 内的任何位置都无法修复它——您必须单击外部才能刷新。

现在，我只需要一个解决方法。我已经尝试了 500 种 $(someelement).click 或 $(someelement).focus，但它们并没有完全复制用户的“实际”点击。

有没有人见过这样的事情？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T19:25:10.993

好吧，我没有找出导致问题的原因，但我发现一个快速而肮脏的修复方法可以解决问题。我只是将一个锚标记附加到 DOM，将其聚焦（使用 jQuery .focus），然后将其删除。

我之前尝试过 .focus 很多次，但我总是在 div 或 li 元素上尝试它，但没有奏效。它需要是一个锚标签。我怀疑这是因为锚标签实际上有一些可见的组件指向它的焦点，这会重置 Firefox 的内部光标显示机制中的某些内容。

无论哪种方式，如果你试图解决这样的问题并且这并不能解决它，请查看 MorganTiley 的解释——这可能会给你一些好的线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:07:01.570

这是因为当您加载内容时，您正在更改 html 节点的结构，从而使选择无效（光标只是折叠的选择）。我建议尝试通过[Rangy](http://code.google.com/p/rangy/)重置它。它与 jquery 结合使用效果很好。使用 jquery 获取 contentEditable 区域中的第一个元素，例如第一段，然后创建一个新的范围并选择该段落（节点）并折叠开始。这会将光标放在内容的最开头。这是一些粗略的代码

```
$(document).ready(function() {
  //init rangy
});

function ajaxLoaded {
  var p = $(".contenteditablediv p:first")[0];
  var sel = rangy.getSelection();
  sel.collapse(p, 0);
} 
```

# mono - MonoDroid - 如何使用 DialogPreference？

> ID：10890104
> 
> 赞同：0
> 
> 时间：2012-06-05T00:23:21.070
> 
> 标签：mono, xamarin.android

我正在尝试通过子类化 DialogPreference 类并在我的首选项 xml 文件中声明它来实现 DialogPreference。

当我在我的 PreferenceActivity 中调用 AddPreferencesFromResource 时，我得到一个 System.NotSupportedException。我无法捕捉到这个异常来复制它，所以我在下面有几个屏幕截图，说明抛出异常时的样子。

[我已经从这里](https://stackoverflow.com/questions/5533078/timepicker-in-preferencescreen)复制并隐藏了 DialogPreference 的代码。

这如何在 Mono for Android 中实现？

这是我的 DialogPreference xml：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<PreferenceCategory android:title="Opening Odds">
    <app.monodroid.TimePickerPreference
     android:key="openoddstime"
     android:title="Opening Odds Time"
     android:dialogMessage="Time of day to get the opening odds."
     android:defaultValue="">
    </app.monodroid.TimePickerPreference>
</PreferenceCategory> 
```

截图： ![在此处输入图像描述](../Images/d3aeab60fbd9364b05da827a6ca9d686.png)

![在此处输入图像描述](../Images/8f702d2c3a046851683d642d942c8494.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:19:56.983

t 可能是错误的，但我很确定你错过了带有两个参数的构造函数，`IntPtr`并且`Android.Runtime.JniHandleOwnership`. 我认为您必须覆盖所有包装器的基本构造函数。

# javascript - 将表单条目传递给不同页面javascript中的另一个表单

> ID：10890105
> 
> 赞同：0
> 
> 时间：2012-06-05T00:23:31.907
> 
> 标签：javascript

我想将用户在表单字段中输入的值从被调用的票价传递到不同的页面，在 javascript 中有一个不同的表单，称为 fare1

表格1：

```
<form action="/estimate-fare" name="fare" method="link" enctype="multipart/form-data">   
  <div class="pickupaddressWrapper">
    <label for="pickupaddress">Pickup Address: <span class="form-required" title="This  field is required.">*</span></label>
    <input type="text" maxlength="128" name="pickupaddress" id="pickupaddress" size="30"  value="" class="form-text required" />
  </div>

  <div class="dropoffaddressWrapper">
    <label for="dropoffaddress">Dropoff Address: <span class="form-required" title="This field is required.">*</span></label>
    <input type="text" maxlength="128" name="dropoffaddress" id="dropoffaddress" size="30" value="" class="form-text required" />
  </div>
  <input type="submit"  id="edit-submit" value="" class="form-submit" /> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:30:38.940

在玩了之后，它击中了我......为什么不通过另一种形式传递值？不涉及查询字符串，所有内容都在 $_POST 数据中传递。

```
/estimate-fare/index.php

<?php 
$pickupat = $_POST['pickupaddress'];
$dropoffat = $_POST['dropoffaddress'];
$distance = calcDistance($pickupat,$dropoffat); // the function that calculates or looks up distance between points - (float) miles
$time = calcTime($pickupat,$dropoffat); // function to calculate time taken at present time of day - (int) minutes
$fare1 = $distance * 10 * $distancerate; // meter rate per 10th of a mile
$fare2 = $time * $timerate; // meter rate per minute
$estfare = ($fare1 > $fare2) ? $fare1 : $fare2;
?>
<html>
<body>
 ...
 <form method="post" action="summary.php">
 <input type="text" value="<?php echo $pickupat; ?>">
 <input type="text" value="<?php echo $dropoffat; ?>">
 <input type="text" value="<?php echo $distance; ?> Miles">
 <input type="text" value="<?php echo $time; ?> Minutes">
 <input type="text" value="<?php echo $estfare; ?>">
 <input type="submit" value="Next">
 </form>
 ...
 </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:01:02.003

如果您的票价表单处理程序引用 fare1 页面，则可以通过查询字符串传递值并将它们保存在 fare1 中。

# matlab - Matlab 命令行窗口输出源

> ID：10890106
> 
> 赞同：-1
> 
> 时间：2012-06-05T00:23:43.253
> 
> 标签：matlab, command-prompt

> **可能重复：**
> [在 Matlab 中查找当前 m 文件的位置](https://stackoverflow.com/questions/2720140/find-location-of-current-m-file-in-matlab)

有谁知道如何在 Maltab 中找到向命令窗口提供输出的函数？我编写了一个包含许多函数的代码，我已经输出到命令窗口，但我找不到哪个函数负责。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:43:43.097

如果所有输出都由您自己的代码打印，您可以轻松地将 all`fprintf`和`disp`调用替换为您自己的函数调用，这些函数调用可以选择在所有输出前面加上函数名称。

这是代码：

获取函数名.m：

```
function [CurrentFunctionName, PreviousFunctionName] = getfunctionname()
CurrentFunctionName = '';
PreviousFunctionName = '';
MyStack = dbstack('-completenames');
if (length(MyStack) < 2)
    error('Function getfunctionname.m cannot be called from MATLAB console.');
elseif (length(MyStack) == 2)
    CurrentFunctionName = MyStack(2).name;
else
    CurrentFunctionName = MyStack(2).name;
    PreviousFunctionName = MyStack(3).name;
end
return 
```

myprintf.m:

```
function myprintf(varargin)
global PrefixOutputWithFunctionName
if (PrefixOutputWithFunctionName)
    [~, PreviousFunctionName] = getfunctionname;
    fprintf('### %s.m:\n', PreviousFunctionName);
end
disp(sprintf(varargin{:}));
return 
```

mydisp.m:

```
function mydisp(varargin)
global PrefixOutputWithFunctionName
if (PrefixOutputWithFunctionName)
    [~, PreviousFunctionName] = getfunctionname;
    fprintf('### %s.m:\n', PreviousFunctionName);
end
disp(varargin{:});
return 
```

主函数.m：

```
function mainfunction()
global PrefixOutputWithFunctionName

% set PrefixOutputWithFunctionName to false to disable prefixing.
PrefixOutputWithFunctionName = true;

% the code goes here...

% example output.
myprintf('some text...\n some more text...');
return 
```

# php - 关联数组到 JSON

> ID：10890107
> 
> 赞同：13
> 
> 时间：2012-06-05T00:23:55.237
> 
> 标签：php, json, array-push

我希望能够生成以下格式的 JSON 输出：

```
{"a":{"ax":1,"abx":2},"b":{"bax":1,"bbx":2},"c":3,"d":4,"e":5} 
```

虽然我发现各自的代码是这样的：

```
$arr = array('a' => array('ax' => 1, 'abx' => 2), 'b' => array('bax' => 1, 'bbx' => 2), 'c' => 3, 'd' => 4, 'e' => 5); 
```

，我正在努力通过使用来自 SQL 查询的数据来生成此输出。我已经尝试过*array_push()*和*array_merge()*并且我设法得到的最接近的是：

```
[{"a":{"ax":1,"abx":2}},{"b":{"bax":1,"bbx":2}}, ....] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T08:07:14.777

首先，您应该从表中查询所有数据，然后将其移动到数组中。之后，使用该`json_encode($array)`功能。

将您的数组放在参数中。

然后输出将采用 JSON 格式。

```
$query = "select *  from employees";
$result = mysql_query($query);
while($row = mysql_fetch_array($result))
{
  $employee = $row['employee'];
  $country = $row['country'];

  $employees[] = array('employee'=> $employee, 'country'=> $country);
}

echo $jsonformat = json_encode($employees); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T00:26:05.253

将要编码的数据加载到数组中，然后使用[json_encode()](http://php.net/manual/en/function.json-encode.php)：

```
json_encode($arr); 
```

# objective-c - 访问键盘 API

> ID：10890108
> 
> 赞同：3
> 
> 时间：2012-06-05T00:23:56.633
> 
> 标签：objective-c, xcode, macos, cocoa

我正在寻找拦截 Mac 应用程序中的键盘事件。

我希望用户启动一个“记录”活动，该活动将复制基石，然后是一个“停止”活动。

这可以通过 Cocoa 的 Mac API 实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T00:38:01.893

看看 NSEvent 方法 addLocalMonitorForEventsMatchingMask:handler:。这将允许您接收在您的应用程序中发生的事件（特别是在您的情况下的 keyDown 事件），然后您可以使用该方法返回的击键来做任何您想做的事情。这是一个如何使用该方法的简单示例：

```
self.keystrokes = [NSMutableString string];
    [NSEvent addLocalMonitorForEventsMatchingMask:NSKeyDownMask handler:^NSEvent* (NSEvent* event){
        NSString *keyPressed = event.charactersIgnoringModifiers;
        [self.keystrokes appendString:keyPressed];
        return event;
    }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T00:40:45.963

要拦截所有键盘输入（如果需要，还可以拦截鼠标），请查看[Quartz Events API](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)。[这篇文章](https://stackoverflow.com/questions/1603030/how-to-monitor-global-modifier-key-state-in-any-application)有一些代码演示了 API 的用法。

# php - $.AJAX JQUERY/PHP 登录脚本，具有自己的奇怪意愿

> ID：10890109
> 
> 赞同：0
> 
> 时间：2012-06-05T00:24:00.097
> 
> 标签：php, jquery, ajax, json, oop

各位程序员好！

我构建的登录脚本有一个非常烦人的问题。它是一个脚本，通过 $.AJAX (jquery) 调用将用户名变量和密码变量从 HTML 表单发送到 check.php 文件。变量通过 JS 中的 keyUp 函数发送。诀窍是没有提交按钮，当变量与数据库匹配时，用户会自动登录。check.php 是具有多种方法的 OOP，当 vars 与 db 匹配时，php 会向 js 发送一个 json_encode。我想将脚本和设置文件分开。当我将数据库设置放在 check.php 文件中时，脚本就可以工作了。如果我尝试使用顶部的包含从外部加载它们，则脚本不起作用。

JS：

```
$("#wachtwoord, #gebruikersnaam").keyup(function(){
    passnum = $("#wachtwoord").val();
    usernum = $("#gebruikersnaam").val();

    if(passnum.length > 2 && usernum.length > 2) {

        $.ajax({
            type: "POST",
            url: "classes/check.php",
            dataType: 'json',
            data: "gebruikersnaam="+usernum+"&wachtwoord="+passnum, 
            success: function(check){
                          if(check.login == 'true') { 
                      Do Stuff! 
```

PHP：

```
(other methods and other unnecessary stuff above these lines of code...)
public function check(){

            if ($_POST){
            $u = $_POST['gebruikersnaam'];
            $u = strtolower($u);
            $u = trim($u);
            $p = $_POST['wachtwoord'];
            mysql_connect(host, user, pw);
            mysql_select_db(db);

                $gebruiker = mysql_real_escape_string($u);
                $wachtwoord = mysql_real_escape_string($p);
                $query = mysql_query("SELECT * FROM gebruikers WHERE gebruikersnaam = '".$gebruiker."' AND wachtwoord = '".$wachtwoord."'");
            if(mysql_num_rows($query))
            {
        $this->validate();
        }

    }
}

public function validate(){
        $return['login'] = "true";
        echo json_encode($return); 
```

我发现这种形式的脚本可以工作特别奇怪，但是当我包含一个文件时，它不会将 json 返回给 JS。我尝试了多种方法，但似乎没有任何帮助。即使我包含一个空白的 php 文件，脚本也会停止工作。问题是，我想将所有配置数据加载到一个单独的文件中，并且我不希望 my_sql 数据出现在登录/检查 php 文件中。

对此有什么想法吗？

由于这个奇怪的问题，我感到头疼。

希望我犯了一个愚蠢的错误！

提前致谢！

RJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:49:39.733

我想我解决了我自己的问题。

用了大约 2 个小时的精彩调试工具，我实际上取得了进展。

```
//the infamous include:
include ("classes/config.php");

//the dir the check.php was in:
classes!!

//error:
Warning: include() [function.include]: Failed opening 'classes/classes/config.php' for inclusion 
```

奇怪的是，当它打开时没有显示 php 错误，但是错误在 POST/GET 请求中流回了 jquery 脚本。使用 Firebug，我终于发现包含 php 错误的 POST 请求作为 html 流式传输回 php 文件。

很高兴这是一个愚蠢的错误，感谢您的提示和技巧！

希望我没有浪费任何人的时间！

谢谢，

RJ

# .net - 通过云/虚拟化环境部署多依赖 .NET Winforms 应用程序

> ID：10890111
> 
> 赞同：0
> 
> 时间：2012-06-05T00:24:11.727
> 
> 标签：.net, winforms, cloud, virtualization

我们开发了一个 .NET Winforms 应用程序，它通过 Web 服务连接到中央 SQL Server 数据库。胖客户端本身依赖于一些外部依赖项，例如 Microsoft Office、Office Web Components 和 .NET Framework 4.0。

部署此类应用程序（仅 .NET Winforms 胖客户端部分）（如虚拟化应用程序）有哪些可用选项？我们正在努力实现的目标是：

*   简化安装过程，用户目前必须在各种 Windows 环境中安装许多先决条件，每个先决条件都有自己的特点。
*   同质化用户体验并降低支持成本。此外，允许应用程序在 Windows 以外的平台上运行。

我们正在查看的规模约为 10,000 个桌面用户。

我查看了来自 Numecent [http://www.numecent.com/technology/cloudpaging.html](http://www.numecent.com/technology/cloudpaging.html)的 Cloud Paging 产品，它与所需的相似。想知道是否有人有将传统的 .NET Winform 应用程序转换为虚拟化产品的经验，以及是否有人有任何建议和想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:28:38.657

你在正确的轨道上。

Numecent 解决了您的 .NET 应用程序的交付问题，并允许在胖客户端集成其他软件资产的外部依赖项，包括（但不限于）Microsoft Office、Office Web Components 和 .Net 4.0 框架。此外，任何或所有这些依赖项都可以作为包的一部分包含（如果它们不在或不希望在胖客户端上使用这些资产）。

对于交付，Cloudpaging 将大大减少这些应用程序及其依赖项的大小。例如，一个非常流行的 CAD 应用程序在 .NET 中提供了 134MB 的完整功能（CAD 应用程序本身是 3GB！）。我怀疑 SQL 胖客户端会小得多。

至于您的其他问题，简化安装过程和处理不同 Windows 环境的先决条件是降低支持成本和更好地满足最终用户的基础。Numecent 已经证明了这两者，并在生产中成功地进行了商业部署，类似于您的用例。他们也有其他平台（例如平板电脑）的解决方案。

我建议你去

[http://www.numecent.com/contact/contact-us.html](http://www.numecent.com/contact/contact-us.html)

会有人与您联系并提供详细答复。

# database - 通过 PHPMyAdmin 的“新版本”“正确”导出/迁移 Drupal 数据库

> ID：10890112
> 
> 赞同：0
> 
> 时间：2012-06-05T00:24:24.287
> 
> 标签：database, drupal, drupal-7, phpmyadmin

我已经截取了我的设置；如果我打算在单独的服务器上将它迁移回 Drupal，我是否拥有所有这些权利？我计划最好通过 SSH 再次导入它，但也可以使用 PHPMyAdmin。

![截屏](../Images/719e57185caa082e90f62be6a872dd43.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:12:46.860

如果您有 ssh 访问权限，我强烈建议使用 mysqldump 命令导出，然后使用 mysql 命令导入。我有使用 phpmyadmin 导出和导入 drupal db 的糟糕经历（例如超时问题）。还要注意 mysqldump/mysql 的速度要快得多。

出口：

```
mysqldump -u=xxx -p=xxx mydb > dump.sql 
```

进口：

```
mysql -u=xxx -p=xxx mydb < dump.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:17:12.033

我认为最好取消选中`AUTO_INCREMENT`下面的 CREATE `enter code here`TABLE 选项，然后检查`IF NOT EXISTS`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:05:58.707

您可能还想考虑使用 Drupal 的[Backup and Migrate](http://drupal.org/project/backup_migrate)模块，这可能比通过 phpmyadmin 自己做更容易。

> 备份和迁移简化了备份和恢复 Drupal 数据库或将数据库从一个 Drupal 站点复制到另一个站点的任务。它支持 gzip、bzip 和 zip 压缩以及自动计划备份。
> 
> 通过备份和迁移，您可以将部分或全部数据库表转储到文件下载或保存到服务器上的文件中，并从上载或以前保存的数据库转储中恢复。您可以选择默认排除哪些表以及要备份和缓存数据的数据。

# php - 从表 A 和 B 中提取结果，然后使用结果从表 A 中获取行的查询

> ID：10890113
> 
> 赞同：0
> 
> 时间：2012-06-05T00:24:45.703
> 
> 标签：php, mysql

有人从我在 Stack Overflow 上提出的上一个问题中给了我下面的查询。它应该从两个表中提取“submissionid”，称为**submission**和**addresses**，其中`zip = '$zip'`。（“submissionid”和“zip”都出现在两个表中。）

然后，我想查找与所有这些“submissionid”相对应的字段“title”。“标题”字段仅出现在表格**提交**中。

然后，我希望查询生成所有结果“标题”的列表。

我怎样才能修改查询来做到这一点？下面的查询似乎省略了从**提交**结果。

```
$sqlStr = "SELECT s.title, s.points, s.submissionid
         FROM submission s 
         INNER JOIN addresses ad
         on ad.submissionid = s.submissionid
         WHERE ad.zip = '$zip'
     ORDER BY s.points DESC, s.title ASC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:42:52.153

不确定这是否是您想要的。

将您的原始查询放入子查询中，并选择具有相同提交 id 的所有提交

```
SELECT
  title,
  points,
  submissionid
FROM submission
WHERE submissionid IN (
  # Original Query
  SELECT s.submissionid
  FROM submission s
    JOIN addresses ad ON ad.submissionid = s.submissionid
  WHERE ad.zip = '$zip'
)
ORDER BY 
  points DESC, 
  title ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:31:03.203

只需添加`OR s.zip = '$zip'`到您的`WHERE`条款。通过一些额外的整理，您的查询变为：

```
SELECT   submission.title, submission.points, submission.submissionid
FROM     submission JOIN addresses USING (submissionid)
WHERE    submission.zip = '$zip' OR addresses.zip = '$zip'
ORDER BY submission.points DESC, submission.title ASC 
```

# php - Sublime Text2 类变量提示 php

> ID：10890114
> 
> 赞同：0
> 
> 时间：2012-06-05T00:24:54.847
> 
> 标签：php, ide, editor, sublimetext

大家好，有谁知道我如何做到这一点，所以 SublimeText2 会在一个 php 文件中为我建议类变量和函数 - 类似于 eclipse 和 aptana？

即，当我键入时，`$this->`我会弹出一个可访问的属性。现在它给了我所有东西的清单。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:22:06.763

签出这个插件，你需要一个包管理器来安装它

[https://github.com/Kronuz/SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)

# c# - 对包含透明元素的自定义 FrameworkElement 的整个区域进行命中测试

> ID：10890119
> 
> 赞同：2
> 
> 时间：2012-06-05T00:25:20.033
> 
> 标签：c#, wpf, frameworkelement

我有一个自定义控件，它继承自`FrameworkElement`. 它包含一个`Visual`包含透明区域的区域。我试图让整个控件区域响应命中测试，但此刻，当我单击显示透明区域的控件的一部分时`Visual`，单击会传递到底层。

有没有一种方法可以在不使用 hack 的情况下使整个控件可命中测试？

我想远离诸如绘制`Visual`白色背景之类的技术，或者`Border`在具有相同事件处理程序集的自定义控件周围添加一个。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:53:52.177

只需使用透明画笔，它就会响应命中测试。

例如，如果您有空背景画笔，那么命中测试将直接通过。

如果您使用 Brushes.Transparent 作为背景或填充区域，那么它将适用于命中测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:57:42.380

使用 Background 或 Fill = "{x:Null}" 这是某些类（如 Grid）的默认值，与 Background 或 Fill = "Transparent" 不同。将透明设置为背景/填充颜色应该可以。

# clojure - clojurescript (js* "c=1") 不起作用

> ID：10890121
> 
> 赞同：1
> 
> 时间：2012-06-05T00:25:32.410
> 
> 标签：clojure, clojurescript

这一直困扰着我一段时间。在 repl 我可以输入：

```
ClojureScript:cljs.user> (js* "window")
==> #<[object DOMWindow]>
ClojureScript:cljs.user> (js* "window.a=1")
==> 1
ClojureScript:cljs.user> (js* "window.a")
==> 1 
```

但如果我输入：

```
ClojureScript:cljs.user> (js* "c=1")
==> 1
ClojureScript:cljs.user> (js* "c")
=>       ; expect 1 but returns nothing 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:44:32.070

js* is an implementation detail, you shouldn't be using it at all.

# reverse-engineering - IDA Pro 中的调试部分是什么？

> ID：10890129
> 
> 赞同：3
> 
> 时间：2012-06-05T00:27:21.290
> 
> 标签：reverse-engineering, disassembly, ida

我尝试用我糟糕的汇编技能分析一个 dll 文件，如果我无法实现非常琐碎的事情，请原谅我。我的问题是，在调试应用程序时，我只在调试会话中找到我正在寻找的代码，在我停止调试器后，地址就消失了。dll 看起来没有被混淆，因为许多代码都是可读的。看看[截图](https://dl.dropbox.com/u/3055964/ida.png)。我正在寻找的代码位于 debug376 部分中的地址 07D1EBBF。顺便说一句，我从哪里得到这个 debug376 部分？

所以我的问题是，如何在不调试的情况下找到此功能？谢谢

更新

好的，正如我所说，一旦我停止调试器，代码就会消失。我什至无法通过字节序列找到它（但我可以在调试模式下）。当我启动调试器时，代码并没有立即反汇编，我应该在那个地方添加一个硬件断点，只有当断点被命中时，IDA才会显示反汇编代码。看看这个[屏幕截图](https://dl.dropbox.com/u/3055964/ida2.gif) 你会看到我感兴趣的代码行，如果程序没有在调试模式下运行，它是不可见的。我不确定，但我认为这类似于在运行时解包代码，这在设计时是不可见的。

无论如何，任何帮助将不胜感激。我想知道为什么隐藏该代码，直到断点命中（它显示为“db 8Bh”等）以及如果可能的话如何在不调试的情况下找到该地址。顺便说一句，这可能是来自不同模块（dll）的代码吗？

谢谢

更新 2

我发现 debug376 是在运行时创建的段。这么简单的问题：我怎样才能找出这个片段来自哪里:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T23:14:18.827

因此，一旦程序运行，您就会在调试器窗口中看到代码，并且一旦它不再运行，您似乎在原始 Hex-Dump 中找不到非常相同的操作码？

拍摄**内存快照**可能会对您有所帮助。在您感兴趣的指令附近暂停程序的执行以确保它们在那里，然后从“调试器”菜单中选择“**获取内存快照”。**IDA 将询问您是否只复制在定义为“加载程序段”（PE 加载程序从预定义表中创建的段）或当前似乎属于被调试程序的“所有段”的段中找到的数据（*包括*这样可能是由解包例程、解密器等创建的）。选择“**所有段**”，您应该可以看到包括*调试段在内的内存内容*（调试时创建或识别的段）在不调试应用程序时在 IDA 中。

您可以随时通过按*Shift+F7*或单击“视图” > “**打开子视图”中的“****分段**”来**查看**分段列表。

 **请记住，您尝试分析的程序可能会选择在下次加载时在其他位置创建该段，以使您更难理解发生了什么。

**更新以匹配您的第二个问题**

当程序从某处解压数据时，它必须在某处复制内容。Windows 是一种虚拟机，如今当您尝试在不允许的位置执行或编写代码时，它会让您非常讨厌。所以任何程序，只要我们在windows下都会以某种方式

1.  注册一堆新内存或覆盖它已经拥有的内存。这通常是通过调用类似 malloc 之类的东西来完成的[你的代码看起来好像它可能是一种非常密集的指针语言......也许是 VB 或面向对象的东西]它主要归结为从 Windows调用**VirtualAlloc**或**VirtualAllocEx** kernel32.dll，有关其调用约定的更多详细信息，请参见[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx)。
2.  如果在调用 VirtualAlloc 时还没有，也许可以设置 Windows 异常处理并将内存范围标记为可​​执行。这将通过再次从 kernel32.dll调用**VirtualProtect来完成。**请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898(v=vs.85).aspx)和[http://msdn.microsoft.com/en-us/library/windows/ desktop/aa366786(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366786(v=vs.85).aspx)以获取更多信息。

所以现在，您应该在程序中迈出一步，从其默认入口点 (OEP) 开始，并寻找对这些函数之一的调用，可能将内存保护设置为 PAGE_EXECUTE 或后代。之后可能会出现某种循环解密内存内容，将它们复制到新位置。您可能只想跳过它，这取决于您对程序的兴趣，只需将光标放在循环之后（通常是 IDA 中的粗蓝线），然后从右键单击出现的菜单中单击“运行到光标”汇编代码。

如果失败，只需尝试在 kernel32.dll 的 VirtualAlloc 上放置一个硬件断点，看看在进入 return 语句时是否有任何有趣的事情，以便在 Alloc 或 Protect 调用之后执行链将带你到任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:59:20.137

您需要找到该代码的相对虚拟地址，这将允许您再次找到它，而不管加载地址如何（这些天几乎所有使用 ASLR 的系统都非常方便）。RVA 通常计算为`virtual address - base load address = RVA`，但是，您可能还需要考虑截面基数。

另一种方法是每次使用 IDA 的变基工具将 dll 变基到相同的地址。**

# c++ - octave C++ api中的浅矩阵构造

> ID：10890131
> 
> 赞同：1
> 
> 时间：2012-06-05T00:27:23.917
> 
> 标签：c++, matrix, octave, shallow-copy

有没有办法在octave的C++ api中从指向数据+大小的指针构造一个矩阵（即，不使用深拷贝）？可能是一种未记录的不安全方式，调用者必须管理相应的内存，或者一种将指针分配给数据的方式？我唯一能找到的是 dMatrix.h 中的一个方法，但它是私有的：

```
Matrix (double *d, octave_idx_type r, octave_idx_type c); 
```

与 Array.h 相同，指向数据的指针似乎是私有的。

# python - 将文本文件中的文本转换为字典中的列表

> ID：10890142
> 
> 赞同：0
> 
> 时间：2012-06-05T00:29:27.480
> 
> 标签：python, list, file-io, dictionary

例如，我有一个包含人们电话号码、姓名、地址的文本文件。看起来像这样，每行末尾都有一个返回

```
555-667282,bill higs,67 hilltop

555-328382,john paul,85 big road

555-457645,zac fry,45 tony's rd

555-457645,kim fry,45 tony's rd 
```

我想把它全部放在字典里，在字典里电话号码是关键，名字和地址是一个列表。所以如果我想打印字典，它会看起来像这样。这样做的代码是什么

> {555-667282：['bill higs'，'67 hilltop']，555-328382：['john paul'，'85 big road']，555-457645：['zac fry'，'45 tony's rd'] ,['金弗莱','45 tony's rd']}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:36:31.270

```
dicto = {}

with open('your_file.txt') as f:
    for line in f:
        s_line = line.rstrip().split(',')
        dicto[s_line[0]] = s_line[1:] 
```

编辑：

要处理与一个电话号码关联的多个条目的情况：

```
from collections import defaultdict

dicto = defaultdict(list)

with open('your_file.txt') as f:
    for line in f:
        s_line = line.rstrip().split(',')
        dicto[s_line[0]].append(s_line[1:]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:56:04.717

这种文件格式是`csv`标准库中的模块旨在处理的。但是，您不能按照您想要的方式布置字典，因为字典键只能映射到一件事。解决该限制的一种简单方法是将每个电话号码映射到列表列表，如下面的示例代码和输出所示：

```
import csv

result = {}
with open('numbers.txt', 'rb') as input:
    for phone_number, name, address in csv.reader(input):
        if phone_number in result:
            result[phone_number] += [[name, address]]
        else:
            result[phone_number] = [[name, address]]

print result 
```

输出：

```
{'555-328382': [['john paul', '85 big road']], 
 '555-457645': [['zac fry', "45 tony's rd"], ['kim fry', "45 tony's rd"]], 
 '555-667282': [['bill higs', '67 hilltop']]} 
```

内部`for`循环中的代码可以通过使用另一个名为`defaultdict`的标准库类来简化，该类是`dict`. 每当引用不存在的值时，它们会自动将字典条目初始化为指定的默认值。以下是如何将其应用于此示例：

```
import collections
import csv

result = collections.defaultdict(list)
with open('numbers.txt', 'rb') as input:
    for phone_number, name, address in csv.reader(input):
        result[phone_number] += [[name, address]]

print result 
```

第二版的输出：

```
defaultdict(<type 'list'>, {
 '555-328382': [['john paul', '85 big road']],
 '555-457645': [['zac fry', "45 tony's rd"], ['kim fry', "45 tony's rd"]],
 '555-667282': [['bill higs', '67 hilltop']]}) 
```

`defaultdict`否则，其他代码可以像使用常规字典一样使用对象。

# java - setText not displaying the value to a TextView

> ID：10890144
> 
> 赞同：1
> 
> 时间：2012-06-05T00:29:41.763
> 
> 标签：java, android, eclipse

Let me preface that I'm new to programming for Android. I've been doing my due diligence to research to no avail. I have the source code below and I'm having issues with returning the value for returning.

I have the code laid out on eclipse and it's not triggering any errors. But when I build the code below, it comes back with an error. After inspecting the values in debug view, I can see the proper values just not binded to the TextView.

```
public class MyFirstActivity extends Activity {
/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      calculateResult(2012, 9, 29);
  }
  private void calculateResult(int year, int month, int day) {
      long days = 0L;
      int returning = 0;

      java.util.Calendar cal = new java.util.GregorianCalendar(year, month-1, day);

      long todayMI = new java.util.Date().getTime();
      long calMI = cal.getTimeInMillis();
      long millDiff = calMI - todayMI;

      if (millDiff < 0) {
            returning = 0;
      } else {
            days = millDiff / 1000 / 60 / 60;
            returning = (int) Math.ceil(days / 24f);
      }

      TextView days_int_remaining = (TextView) findViewById(R.id.days_int_remaining);
      days_int_remaining.setText(returning);
  }
} 
```

If it helps, here's the TextView on my layout XML:

```
<TextView
      android:id="@+id/days_int_remaining"
      android:layout_height="wrap_content"
      android:layout_width="wrap_content"
      android:layout_gravity="center_horizontal|center_vertical"
      android:shadowColor="#5000"
      android:shadowDx="4"
      android:shadowDy="3"
      android:shadowRadius="1"
      android:textColor="#fff"
      android:textSize="70dip"
      android:textStyle="bold"
/> 
```

It may be something simple that I'm missing. Anything to help me further understand the code is appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:43:35.087

I believe that the error you get is "runtime-error - close application".

If you look at method `setText(...)` that is overloaded you will see that it takes arguments with `CharSequence` (this is probably what you want) and `int resId` (this is what you provide).

resId - will seek if there is an resource in `/values/strings.xml` with given `name` attribute.

The resolution is to provide `String`:

```
days_int_remaining.setText(String.valueOf(returning)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:42:25.757

Turn your `returning` int into a string.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T00:45:39.703

just use

```
TextView days_int_remaining = (TextView) findViewById(R.id.days_int_remaining);
days_int_remaining.setText(String.valueOf(returning)); 
```

instead of

```
TextView days_int_remaining = (TextView) findViewById(R.id.days_int_remaining);
days_int_remaining.setText(returning); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T00:47:24.290

Try this code :

Basically you have to convert your int value to a string before calling setText();

```
public class MyFirstActivity extends Activity {
/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      TextView days_int_remaining = (TextView) findViewById(R.id.days_int_remaining);
      int resultat = calculateResult(2012, 9, 29);
      days_int_remaining.setText(Integer.toString(resultat));
  }
  private int calculateResult(int year, int month, int day) {
      long days = 0L;
      int returning = 0;

      java.util.Calendar cal = new java.util.GregorianCalendar(year, month-1, day);

      long todayMI = new java.util.Date().getTime();
      long calMI = cal.getTimeInMillis();
      long millDiff = calMI - todayMI;

      if (millDiff < 0) {
            returning = 0;
      } else {
            days = millDiff / 1000 / 60 / 60;
            returning = (int) Math.ceil(days / 24f);
      }

       return returning;

  }
} 
```

# assembly - HLA 你好，世界 - 汇编错误

> ID：10890145
> 
> 赞同：1
> 
> 时间：2012-06-05T00:29:52.113
> 
> 标签：assembly, gnu-assembler, hla

我已经开始阅读 Randall Hyde 的“组装艺术”来开始刺激我的味觉。[我从这里](http://net.pku.edu.cn/~course/cs201/2003/mirrorWebster.cs.ucr.edu/Page_hla/0_hla_dnld.html)下载并安装了 HLA 1.38（我需要 64 位支持），并按照那里列出的文档和上面的书中的描述编写了 Hello, World 程序。

```
program helloWorld;
#include ("stdlib.hhf");
begin helloWorld;
    stdout.put("Hello, World!", nl);
end helloWorld; 
```

当我运行时`hla helloWorld.hla`，我收到以下错误消息： `helloWorld.asm:66: Error: ambiguous operand size or operands invalid for 'push'`

有问题的装配线如下：

```
pushd   0       ;/* No Dynamic Link. */ 
```

由于我对汇编语言非常熟悉，因此我不知道如何使这项工作发挥作用。我假设我的 gas 版本和 HLA 1.38 之间存在差异。所以问题仍然存在：现在呢？

编辑：我尝试只编译“程序”、“开始”和“结束”指令（消除它与标准库有关的可能性），并用一个实际上什么都不做的程序得到相同的结果。

我在 64 位 CrunchBang Linux 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:25:34.700

以防万一其他试图闯入 Assembly 的人偶然发现这个线程：对于熟悉高级语言并希望在第一天不跳水的情况下更接近机器的人来说，HLA 是一个很棒的中间步骤。

然而，正如 Tom 所说，它不能替代实际的汇编语言。即，一旦您对 HLA 和一些汇编命令感到满意，然后再转向真正的汇编语言。这将远不那么令人生畏（个人经验）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T09:17:45.000

如果你想学习**汇编**，我真的建议你放弃 HLA 和这本糟糕的书。通常，您希望使用汇编程序以便完全控制生成的代码。HLA 将其带走。而且，如果您想要一种更高级的语言而不用担心寄存器分配以及推送和弹出，那么还有更好的选择。

至于您的问题，HLA 生成的 asm 似乎不是 GAS 的有效语法。由于它主要针对 Windows，因此 Linux 似乎没有经过很好的测试。您可以尝试`.intel_syntax noprefix`在文件顶部添加“”，或者将 $ 添加到所有直接值（例如 0），但我怀疑不会有一个简单的修复。

# linux - 在 Linux 中使用加密狗运行 IAR Embedded Workbench for Arm 的建议

> ID：10890146
> 
> 赞同：7
> 
> 时间：2012-06-05T00:29:52.857
> 
> 标签：linux, ubuntu, ubuntu-10.04, iar

我正在运行 Ubuntu 10.04 和 Wine 1.2。我能够安装 IAR 软件，但无法找到加密狗许可证。无论如何在 Ubuntu 的 Wine 中使用加密狗许可证还是我必须使用 PC 许可证？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T05:01:13.197

IAR 不支持在 linux 上运行它的软件，我在某处读到有人能够使用 wine 为 MSP430 启动 IAR 嵌入式工作台。

关于许可证，据我记得，您只需要输入序列号和随附的代码即可。

# svg - SVG 字体可以在 IE8 中使用吗？

> ID：10890147
> 
> 赞同：0
> 
> 时间：2012-06-05T00:30:30.897
> 
> 标签：svg

如何让 SVG 字体在 IE 8 中工作？

在这里，我定义了一个字形，它在我尝试过的所有浏览器中完美显示，除了 IE8（[链接到源代码](http://dl.dropbox.com/u/142733/svg-font.html)）：

```
<html>
<head>
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" id="Layer_1" enable-background="new 0 0 542 324" space="preserve" viewBox="0 0 542 324" version="1.1" y="0px" x="0px">
        <defs>
            <font id="PlainBlackNormal" horiz-adv-x="199">
                <glyph unicode="!" horiz-adv-x="253" d="M232 798q0 -24 -8 -62t-18 -78t-19.5 -74t-12.5 -50l-5 -25q-3 -11 -5.5 -25t-4 -33t-1.5 -47q0 -33 5 -56l7 -36q2 -13 -0.5 -19t-16.5 -6q-11 0 -23.5 22.5t-24 56t-20 74t-11.5 76.5l20 170q-1 17 -5 37t-11 35t-17.5 21.5t-24.5 -4.5h-16q0 3 -2.5 5t-2.5 5 q0 5 26.5 21t62.5 42q1 0 14 10l28 23q15 13 30 23.5t21 10.5q12 0 23.5 -29t11.5 -88zM238 119q0 -12 -24.5 -37t-59.5 -70q-4 3 -18 16t-29.5 29.5t-27.5 33t-12 26.5q0 3 11.5 19t26.5 34l27 31q12 14 15 14q1 0 15.5 -13.5t31.5 -31t30.5 -33t13.5 -18.5z"></glyph>
                <font-face font-family="PlainBlackNormal" units-per-em="1000" ascent="1000" descent="-200"></font-face>
            </font>
        </defs>
        <text id="one" font-size="84.06" space="preserve" transform="matrix(1 0 0 1 47.276 67.043)" font-family="PlainBlackNormal" fill="#000" color="#000">!</text>
    </svg>
</body> 
```

我做错了什么会阻止上述内容在 IE8 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:34:37.067

由于 IE8 不支持 SVG，它也不支持 SVG 字体。

# sql - 返回第一个条目为 1 且所有后续行为 0 的结果

> ID：10890150
> 
> 赞同：0
> 
> 时间：2012-06-05T00:31:03.653
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在处理奇怪的 SQL 查询

```
 Patient_ID    Count    order_no
 1               1          1
 2               1          2  
 2               0          3
 2               0          4
 3               1          5
 3               0          6 
```

我需要像上面那样计算病人，对于每个新病人，计数列是 1。如果重复，下面的条目应该是 0

我很困惑如何让它在 SQL 中工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T00:38:50.253

为了使第一个条目为 1 和所有后续条目为 0，我相信您需要按订单号进行分区排名。请查看下面的 sqlfiddle 以测试结果。

[http://www.sqlfiddle.com/#!3/4e2e2/17/0](http://www.sqlfiddle.com/#!3/4e2e2/17/0)

```
SELECT
patient_id
,CASE WHEN r.rank = 1 
 THEN 1
 ELSE 0
 END
, order_number
FROM
(
  SELECT 
  order_number
  ,patient_id
  ,ROW_NUMBER() OVER (PARTITION BY patient_id ORDER BY order_number)[rank] 
  FROM 
  PatientTable
)r 
```

# asp.net - asp.net 会话注销

> ID：10890152
> 
> 赞同：1
> 
> 时间：2012-06-05T00:31:16.760
> 
> 标签：asp.net, session, session-timeout

我做了一个asp.net 应用程序。此应用程序具有会话变量，可显示用户已登录或已注销。如果有什么方法可以在不转到单个页面的情况下捕获会话到期，并且一旦注销，用户可以重定向到登录（重新登录）页面？

我的 asp.net 类可以继承一些基类，它可以有一些抽象方法来检查会话是否存在。

请建议我一些架构来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:34:55.257

> 此应用程序具有会话变量，可显示用户已登录或已注销。

这可以通过检查`HttpContext.Current.Request.IsAuthenticated`属性来实现。

> 如果有任何方法可以在不转到单个页面的情况下捕获会话到期并且一旦 > 这是注销的用户可以重定向到登录（重新登录）页面？

在您的应用程序中配置以下元素`web.config`以限制\允许访问您站点上的资源\页面\目录：

```
<authorization> 
   <allow .../>
   <deny .../>
</authorization> 
```

[http://msdn.microsoft.com/en-us/library/8d82143t](http://msdn.microsoft.com/en-us/library/8d82143t)

并且，配置`FormsAuthentication` [defaulturl 和 loginurl 属性](http://msdn.microsoft.com/en-us/library/1d3t3c61)以将用户重定向到受限资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:00:25.263

您可以使用 global.asax 的会话结束事件：

```
void  Session_End(Object sender, EventArgs E) {
// your code....
} 
```

当会话到期时调用此事件。

# jquery - jQuery：工具提示定位

> ID：10890156
> 
> 赞同：0
> 
> 时间：2012-06-05T00:32:11.000
> 
> 标签：jquery, css

我试图弄清楚如何正确地将工具提示置于链接下方（因此它没有与链接对齐）。

```
 [Link]
      [tooltip should appear like this]

                   [Link]
                   [tooltip should not appear like this] 
```

我也试图弄清楚为什么我的工具提示没有淡入。

[http://jsfiddle.net/fj4xz/](http://jsfiddle.net/fj4xz/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:53:44.160

那里 ：

```
$('a.tooltip').hover(function() {
    var title = $(this).attr('title');
    var offset=$(this).offset();
    var width=$(this).outerWidth();
    var height=$(this).outerHeight();
    $content=$('<div class="tooltip">' + title + '</div>').fadeIn();
    $(this).append($content);
    var middle = offset.left+(width-$content.outerWidth())/2;
    // middle = Math.max(offset.left,offset.left+(width-$content.outerWidth())/2 );
    $content.offset({ top: offset.top+height, left: middle });
    $('div.tooltip').hover(function() {
        $(this).fadeOut('fast');            
    });
}, function() {
    $(this).find('div').fadeOut('fast');
}); 
```

​您可以使代码更具可读性，但想法就在那里；）

[编辑] 代码已更改，即使文本太长也必须居中。（我误读了这个问题）

# android - 如何让静态 SQLite 数据库显示在我的 listView 中

> ID：10890157
> 
> 赞同：0
> 
> 时间：2012-06-05T00:32:23.287
> 
> 标签：android, database, sqlite, android-listview, static-data

我将从列出到目前为止的代码开始...

这是我的主要活动课程：

```
public class SQLiteDatabaseMain extends Activity
{
    ListView list;
    DatabaseHelper helper;
    SQLiteDatabase db;
    DatabaseAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        init();
    }

    public void init()
    {
        helper = new DatabaseHelper(this);

        list = (ListView) findViewById(R.id.listView1);

        db = helper.getWritableDatabase();

        helper.populateGrocery(db);

    }

} 
```

这是我的 DatabaseHelper 类：

```
public class DatabaseHelper extends SQLiteOpenHelper
{

private static final String DATABASE_NAME = "grocerystoretest.db";
private static final String DATABASE_TABLE = "grocerystoreitems";
private static final String GROCERY_KEY_NAME = "name";
private static final String GROCERY_KEY_TYPE = "type";
private static final int SCHEMA_VERSION = 1;

SQLiteDatabaseMain sqlMain = new SQLiteDatabaseMain();

public DatabaseHelper(Context context)
{
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db)
{
    db.execSQL("CREATE TABLE "
            + DATABASE_TABLE
            + " (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, type TEXT);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int arg1, int arg2)
{
    // db.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);

}

public void insert(String name, String type)
{
    ContentValues cv = new ContentValues();
    cv.put("name", name);
    cv.put("type", type);

    getWritableDatabase().insert(DATABASE_TABLE, "name", cv);
}

public void update(String id, String name, String type)
{
    ContentValues cv = new ContentValues();
    String[] args =
    { id };

    cv.put("name", name);
    cv.put("type", type);

    getWritableDatabase().update(DATABASE_TABLE, cv, "_ID=?", args);
}

public void delete(String id, String name, String type)
{
    ContentValues cv = new ContentValues();
    String[] args =
    { id };

    cv.put("name", name);
    cv.put("type", type);

    getWritableDatabase().delete(DATABASE_TABLE, "_ID=?", args);
}

public void populateGrocery(SQLiteDatabase db)
{
    ArrayList<GroceryObj> groceryArrayList;
    groceryArrayList = buildGroceryArrayList();
    String insertStmt = null;
    for (int i = 0; i < groceryArrayList.size(); i++)
    {
        insertStmt = "INSERT INTO " + DATABASE_TABLE + " ("
                + GROCERY_KEY_NAME + ", " + GROCERY_KEY_TYPE + ") "
                + "VALUES (\"" + groceryArrayList.get(i).getName()
                + "\", \"" + groceryArrayList.get(i).getType() + "\");";
        db.execSQL(insertStmt);
    }
}

private ArrayList<GroceryObj> buildGroceryArrayList()
{
    ArrayList<GroceryObj> aL = new ArrayList<GroceryObj>();
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    try
    {
        Context context;
        context = sqlMain.getApplicationContext();

        DocumentBuilder builder = factory.newDocumentBuilder();
        InputStream raw = context.getAssets().open("default_grocerystore.xml");
        Document dom = builder.parse(raw);
        Element root = (Element) dom.getDocumentElement();
        NodeList groceryItems = ((Document) root)
                .getElementsByTagName("grocery");
        for (int i = 0; i < groceryItems.getLength(); i++)
        {
            String name = null;
            String type = null;
            Node item = groceryItems.item(i);
            NodeList groceryItem = item.getChildNodes();
            for (int j = 0; j < groceryItem.getLength(); j++)
            {
                Node nodeItem = groceryItem.item(j);
                String nodeName = nodeItem.getNodeName();
                if (nodeName.equalsIgnoreCase("name"))
                {
                    name = nodeItem.getFirstChild().getNodeValue();
                } else if (nodeName.equalsIgnoreCase("type"))
                {
                    type = nodeItem.getFirstChild().getNodeValue();
                }
            }
            aL.add(new GroceryObj(name, type));
        }
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    return aL;
}

public String getName(Cursor c)
{
    return (c.getString(1));
}

public String getType(Cursor c)
{
    return (c.getString(3));
}

} 
```

这是我的 GroceryObj 类：

```
public class GroceryObj
{

private String name = "";
private String type = "";

public GroceryObj(String name, String type)
{
    this.name = name;
    this.type = type;
}

public String getName()
{
    return (name);
}

public void setName(String name)
{
    this.name = name;
}

public String getType()
{
    return (type);
}

public void setType(String type)
{
    this.type = type;
}

} 
```

我的 DatabaseAdapter 类现在是空白的。这是我需要弄清楚的！：

```
public class DatabaseAdapter extends CursorAdapter
{

public DatabaseAdapter(Context context, Cursor c)
{
    super(context, c);
}

@Override
public void bindView(View view, Context context, Cursor cursor)
{

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent)
{
    return null;
}

} 
```

然后我有一个 xml 文件，它按名称和类型存储所有杂货：

```
<?xml version="1.0" encoding="utf-8"?>
<default_grocerystore>
    <grocery>
            <name>Bread</name>
            <type>Bakery</type>
    </grocery>
    <grocery>
            <name>Rolls</name>
            <type>Bakery</type>
    </grocery>
    <grocery>
            <name>Juice</name>
            <type>Beverages</type>
    </grocery>
    <grocery>
            <name>Soda</name>
            <type>Beverages</type>
    </grocery>
</default_grocerystore> 
```

最后，我有一个 row.xml，它只是两个 textView，用于显示 ListView 每一行中每个项目的名称和类型。

我的 main.xml 只是一个 TextView 和一个列表视图。

我真正坚持的是适配器。我以前使用数据库适配器通过editTexts 和持有者对象将行插入数据库，但我从来没有只使用静态数据库并通过我的listView 将其转换为每一行以查看。任何人都可以通过listView查看我的数据库需要什么？任何帮助将不胜感激，因为我在这里完全被难住了。在过去的几个小时里，我一直在绞尽脑汁试图找出如何做到这一点。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:15:21.487

`SimpleAdapter`用于静态数据，因此如果您要使用动态数据，您的性能可能会有所不同。如果您想使用动态数据，其他方法可能是使用不同类型的适配器，例如`ArrayAdapter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:23:10.623

你不需要使用 CursorAdapter，一个简单的 ArrayAdapter 就可以了。只需将数据库查询的结果存储在 ArrayList 中（您已经在这样做），然后将该列表传递给适配器的构造函数。您的数组适配器必须能够接受 GroceryObj 类型的数组列表，然后您可以调用 GroceryObj.getName() 或 getType() 来填充您的 ListView

# android - Android (ActionBarSherlock) 有什么方法可以在纵向和横向上保持相同的 ActionBar 高度？

> ID：10890159
> 
> 赞同：10
> 
> 时间：2012-06-05T00:32:28.313
> 
> 标签：android, landscape, android-actionbar, actionbarsherlock, portrait

过去几天我一直在使用 ActionBar 和 ActionBarSherlock，在 ActionBar 中填写一些信息时遇到了一些问题。

当应用程序以竖屏模式运行时，ActionBar 看起来不错，并且可以显示所有数据，例如：

![纵向模式下的 ActionBar](../Images/d6aa9fe1f988c2f105f603c3bcf19311.png)

但是当我切换应用程序以横向显示时，一些数据被裁剪：

![横向模式下的 ActionBar](../Images/34e660fa94bcd671c03c0c7e7b3686d7.png)

您可以注意到由于 ActionBar 的新高度，状态图标和电子邮件都被裁剪了。

在这种情况下，我想为纵向和横向保持相同的大小，以便应用程序看起来不错。我无法减小操作栏标题的字体大小，因为它可能包含其他图标。

我将这些图标放在操作栏标题和副标题中的方式是使用 Html.fromHtml

有什么想法可以解决这个问题吗？我正在使用 ActionBarSherlock 库！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T01:14:42.397

~~一种可能不太漂亮的方法可能是覆盖 ActionBar in 中的默认高度值`dimens.xml`。~~

例如，竖屏中的默认值为：

```
<dimen name="abs__action_bar_default_height">48dip</dimen> 
```

在风景中：

```
<dimen name="abs__action_bar_default_height">40dip</dimen> 
```

~~可能有一种更简洁的方法可以做到这一点，但我不得不承认我对 ActionBarSherlock 的内部知识知之甚少。~~

* * *

**编辑：**想一想，当在 ICS 上使用本机 ActionBar 时，这可能不起作用，因为高度将解析为`?android:attr/actionBarSize`. 我建议您等待更好的建议，例如来自 Jake 本人的建议。

**第二次编辑：** 在 Jake 的回复之后，要使其在 ICS 和 ICS 之前的设备上与 ActionBarSherlock 一起工作，您似乎需要做的就是将以下内容添加到您的应用程序主题中：

```
<item name="actionBarSize">@dimen/some_value</item>
<item name="android:actionBarSize">@dimen/some_value</item> 
```

然后，您可以在相关的肖像/土地资源桶中添加实际值。

**第三次编辑**[感谢**alvarolb** ]：XML 样式示例：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>   
    <style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarSize">48dip</item>
        <item name="android:actionBarSize">48dip</item> 
    </style> 
</resources> 
```

并在对应的activity中，设置这个新样式

```
android:theme="@style/Theme.Styled" 
```

和..它的工作原理！

# jquery - 图片在屏幕后面旋转，1px 问题

> ID：10890160
> 
> 赞同：0
> 
> 时间：2012-06-05T00:32:36.707
> 
> 标签：jquery, html, css

您好，我在使用此滑块时遇到问题：[http](http://www.unscspartanteamomega.com/home2) ://www.unscspartanteamomega.com/home2当我在 Google Chrome 开发工具上打开该网站时，我发现问题来自`<div id="featured" class="orbit" style="width: 1px; height: 370px; ">`1px 阻止了图片，我已经检查过了我的 CSS 什么都没有，我不知道如何摆脱 1px。有人可以指出我或帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:45:30.000

你的`div`“特色”ID 有风格`width:1px;`

编辑：对不起，我忘了说，它不是`css`内联样式，也不是由一些 JavaScript 动态添加的。检查您的 html 源并删除 style="width:1px;" 在那个 div 上或指定正确的维度。

顺便提一句。如果你没有我建议你安装萤火虫，会节省你很多时间和精力！

# html - 通过套接字空间发送数据，通过空间接收

> ID：10890161
> 
> 赞同：1
> 
> 时间：2012-06-05T00:33:02.597
> 
> 标签：html, c++, qt, sockets, large-data

为此，我正在使用带有 QT4 的 C++。当我尝试发送大型 html 文件（在本例中为 8kb）时，发送和接收的过程运行良好。但是收到的文件在 html 文件的每个字符之间都有空格。这里是一个例子，文件是这样发送的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">a</p></body></html> 
```

它已收到，如下所示：

```
 ¼ < ! D O C T Y P E   H T M L   P U B L I C   " - / / W 3 C / / D T D   H T M L   4 . 0 / / E N "   " h t t p : / / w w w . w 3 . o r g / T R / R E C - h t m l 4 0 / s t r i c t . d t d " > 
 < h t m l > < h e a d > < m e t a   n a m e = " q r i c h t e x t "   c o n t e n t = " 1 "   / > < s t y l e   t y p e = " t e x t / c s s " > 
 p ,   l i   {   w h i t e - s p a c e :   p r e - w r a p ;   } 
 < / s t y l e > < / h e a d > < b o d y   s t y l e = "   f o n t - f a m i l y : ' M S   S h e l l   D l g   2 ' ;   f o n t - s i z e : 8 . 2 5 p t ;   f o n t - w e i g h t : 4 0 0 ;   f o n t - s t y l e : n o r m a l ; " > 
 < p   s t y l e = " - q t - p a r a g r a p h - t y p e : e m p t y ;   m a r g i n - t o p : 0 p x ;   m a r g i n - b o t t o m : 0 p x ;   m a r g i n - l e f t : 0 p x ;   m a r g i n - r i g h t : 0 p x ;   - q t - b l o c k - i n d e n t : 0 ;   t e x t - i n d e n t : 0 p x ; " > < / p > < / b o d y > < / h t m l > 
```

我用于发送和接收的代码：

发送代码：qDebug() << "已连接。发送文件到服务器"; QString text = ui->QuestHtmlText->toPlainText();

```
if(text.length() < 1024)
{
    QByteArray block;
    QDataStream out(&block, QIODevice::WriteOnly);
    out << quint16(0) << QUESTION_HTML;
    out << text;
    out.device()->seek(0);
    out << quint16(block.size() - sizeof(quint16));
    qDebug() << "Block size: " << block.size();
    socket.write(block);
    return;
}

for(int i = 0; i < text.length(); i+=1024)
{
    QByteArray block;
    QDataStream out(&block, QIODevice::WriteOnly);
    out << quint16(0) << QUESTION_HTML;
    if((text.length() - i) > 1024)
        out << text.mid(i, i+1024);
    else
        out << text.right(1024 - i);
    out.device()->seek(0);
    out << quint16(block.size() - sizeof(quint16));
    qDebug() << "Block size: " << block.size();
    socket.write(block);
} 
```

接收代码：

```
qDebug() << "Writing File";
QDataStream in(this);
QString temp = "Teste.html", text;
QFile myFile(".//Questions//" + temp);
myFile.open(QIODevice::WriteOnly);
QDataStream out(&myFile);
while(!in.atEnd())
{
    in >> text;
    out << text;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:17:41.783

@Eugen 我怀疑 quint16 要么根本没有写入，要么位于文件末尾。参见下文。

@Patrick[不要](https://stackoverflow.com/questions/10971872/receiving-data-with-spaces-thru-sockets)仅仅因为您觉得服务不够快而重新发布。Stackowerflow 不是热线电话。

您在文件中返回的内容不是您的原始文本，而是 QString 序列化形式，这毫不奇怪是 UTF-16。如果您想要返回文本，请将输入 QDataStream 读回 QString 并将其保存到文件中。

虽然在数据前面加上一个长度通常是个好主意，但对于 QString >> QDataStream 来说绝对是多余的。[在这里](http://qt-project.org/doc/qt-4.8/datastreamformat.html)或[这里](http://www.developer.nokia.com/Community/Wiki/How_to_perform_file_IO_using_QDataStream_in_Qt)阅读一些东西。此外，您开发了一种令人难以置信的令人困惑的方式，我怀疑它什么都不做。QByteArray 没有实现 QIODevice （实际上，为什么应该这样做）所以你的 out.device()->seek() 是一个基本的虚拟实现，为[空并且只返回 true](http://qt-project.org/doc/qt-4.8/qiodevice.html#seek)。如果在序列化转储文件的末尾找到您的长度“标题”，我不会感到惊讶。

**编辑：**我认为您的 html 传输可能只有通过完全忽略混淆的 quint 操作并使用`out`QTextStream 而不是 QByteStream 才能开始正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:05:23.527

I bet there are not spaces between characters (but 0s) & you get the extra chars due to your use of `quint16`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:26:57.620

我解决了将其写入文件并将此文件获取到 QByteArray 并将 QbyteArray 完全发送到套接字的问题。

# mysql - 导出大型 MySql 表

> ID：10890163
> 
> 赞同：4
> 
> 时间：2012-06-05T00:33:11.187
> 
> 标签：mysql, sql, excel, ms-access

我在 MySql 中有一个使用 PhpMyAdmin 管理的表。目前它大约有 960,000 行。

我有一个老板喜欢在Excel中查看数据，也就是说每周，我必须将数据导出到Excel中。

我正在寻找一种更有效的方法来做到这一点。因为我实际上不能一次完成整个表格，因为它超时了。所以我一直坚持将表“分块”成更小的查询并像这样导出它。

我尝试将 Excel（和 Access）直接连接到我的数据库，但同样的问题；它超时。有没有办法延长连接限制？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T02:38:44.977

你的老板是雨人吗？他只是在原始“数据”中发现“信息”吗？

还是他在 excel 中构建函数而不是询问他真正需要的东西？

和他坐一个小时，看看他实际上在用数据做什么。被问到什么问题？（手动）检测到哪些模式？编写一个真正的工具来查找该信息，然后将其插入您的监控/警报系统。

或者，换个新老板。 *认真*的。你可以告诉他我是这么说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T00:39:47.443

老实说，对于这种大小的数据，我建议做一个 mysqldump 然后将表导入到另一个安装在其他地方的 MySQL 副本中，也许在专门用于此任务的虚拟机上。从那里，您可以根据需要设置超时等，而不必担心资源限制会炸毁您的生产数据库。在基于 Unix 的操作系统或基于 Windows 的系统上使用`nice`进程优先级，您应该能够做到这一点，而不会对生产系统产生太大影响。

或者，您可以[设置](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)生产数据库的副本并从那里提取数据。拥有一个从生产系统复制各种表甚至整个数据库的所谓“报告数据库”实际上是大型环境中相当普遍的做法，以确保您不会意外杀死生产数据库为某人提取数字。作为一个额外的优势，您不必等待 mysqldump 备份完成才能开始为您的老板提取数据；你可以马上做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T01:29:38.093

行数不会太多。运行查询以将数据导出到 csv 文件中：

```
SELECT column,column2 INTO OUTFILE '/path/to/file/result.txt'
  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
  LINES TERMINATED BY '\n'
  FROM yourtable WHERE columnx = 'çondition'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T00:37:34.217

一种选择是使用表[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html)或[*`mysqldump`*](http://dev.mysql.com/doc/en/mysqldump.html)将表导出为 CSV，然后 Excel 可以直接打开该表。

# c# - 列表 只显示最后一项

> ID：10890166
> 
> 赞同：2
> 
> 时间：2012-06-05T00:33:26.263
> 
> 标签：c#

试图从一串零件名称中列出一个列表。它正在跳过显示除列表中最后一个名称之外的所有名称。为什么要这样做？有没有更好的方法来做到这一点？

*我的代码背后*

```
 List<string> Ta1PartNumbers = ta1input.Split('\n').ToList<string>(); //Trying to split at the line break.. Would this be the proper way to do it?

    foreach (string Tpartnumber in TramPartNumbers)
    {
        Div1.InnerText = (Tpartnumber);
    } 
```

列表是这样的：
**Part_numbers
1017foo
1121bar
等。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:35:57.087

您正在重置循环的每次迭代的 innerText 值，因此它只保留最后一个。尝试使用`+=`运算符附加

```
foreach (string Tpartnumber in TransimPartNumbers)
{
    Div1.InnerHtml += Tpartnumber + "<br />";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:38:53.687

我犯的这个错误比我应该犯的要多。尝试：

```
Div1.InnerText = "";
foreach (string Tpartnumber in TransimPartNumbers)
{
   Div1.InnerText += (Tpartnumber);
} 
```

您基本上每次都覆盖以前的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T00:40:47.477

我会避免在不需要的地方使用 List 。改用这种拆分方法，但我认为你想要 \r\n... 和其他海报一样，你需要 += 追加，而不是 + 更新。

```
string[] lines = Regex.Split(ta1input, "\r\n");

foreach (string line in lines)
{
    Div1.InnerText += Tpartnumber;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T00:43:16.900

循环的每次迭代都将`InnerText`of替换`Div1`为当前字符串。这就是为什么你只得到最后一个字符串，你写了所有以前的字符串。

但是，为什么还要拆分字符串呢？如果您只想将所有字符串写入 div，您可以这样做：

```
Div1.InnerText = ta1Input; 
```

你想要什么作为最终的 HTML？

```
Part_numbers<br/>
1017foo<br/>
1121bar<br/>
etc..<br/> 
```

或者

```
<div>Part_numbers</div>
<div>1017foo</div>
<div>1121bar</div>
<div>etc..</div> 
```

或者是其他东西？就个人而言，我更喜欢后者。我会做这样的事情：

```
string[] Ta1PartNumbers = ta1input.Split('\n');

foreach (string Tpartnumber in Ta1PartNumbers)  
{
    var div = new HtmlGenericControl("div");
    div.InnerText = Tpartnumber;
    Div1.Controls.Add(div);
} 
```

# google-apps-script - 在 Google Apps 脚本库中创建类似命名空间的组织

> ID：10890177
> 
> 赞同：8
> 
> 时间：2012-06-05T00:34:43.587
> 
> 标签：google-apps-script, namespaces, jsdoc

我正在研究使用谷歌应用程序脚本构建一个工具集。问题在于，据我所知，只允许一个级别的组织。您可以创建一个名为 Stopwatch 的库并调用方法 Stopwatch.start() 和 Stopwatch.stop() 这很酷。

我想到的是更像 Utils.Stopwatch().start() 和 Utils.Timer.start() 等。我认为这在 javascript 中当然是可能的，但为了继续破坏 Apps Script 自动完成功能，它需要以某种格式添加。下面是一个做错的例子（给出一个错误），但可能会节省一些时间。它基于[这篇](http://www.dustindiaz.com/namespace-your-javascript/)文章。

```
/**
* A stopwatch object.
* @return {Object} The stopwatch methods
*/
function Stopwatch() 
{
  var current;

  /**
  * Stop the stopwatch.
  * @param {Time} time in miliseconds
  */
  function timeInSeconds_(time)
  {
    return time/1000;
  }

  return 
    {
      /**
      * Start the stopwatch.
      */
      start: function() 
      {
        var time = new Date().getTime();
        current = timeInSeconds_(time);
      },

      /**
      * Stop the stopwatch.
      * @return {decimal} time passed since calling 
      *    start (in seconds)
      */
      stop: function() 
      {
        var time = new Date().getTime();
        var difference = timeInSeconds_(time) - this.current;
        return difference.toFixed(3);
      }
    };
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T09:50:39.587

在 Google 原生支持此类功能之前，您可以使用与构造函数相同级别的注释来定义空函数。您甚至可以保留原始代码结构。这将在编辑器中启用自动完成。另外，您将获得为您的库自动生成的文档，例如[https://script.google.com/macros/library/versions/d/YOUR_PROJECT_KEY](https://script.google.com/macros/library/versions/d/YOUR_PROJECT_KEY)

例子：

```
/**
* Constructor.
* @constructor
* @param {String} apiKey Doxument API key
* @param {String} apiToken Doxument API token
*/    
function DoxumentApi(apiKey, apiToken) {
  // public api
  return {
        get: function(id, params) {
          var httpResponse = execute('/docs/' + id + '.json?' + buildQuery(params));
          return parse(httpResponse);
        }
    }
}

/**
* Get document record.
* @param {String} id document id
* @param {Object=} params optional. extra get params
* @return {Object} Document object
*/    
function get(id, params) {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T05:11:21.660

您可以在此处提交功能请求：

[http://code.google.com/p/google-apps-script-issues/issues/list](http://code.google.com/p/google-apps-script-issues/issues/list)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T23:33:29.270

它还不起作用，但团队确实知道它。在此之前，您需要在站点上记录您的库。我想您也可以将方法放在描述中。对于新服务来说，这确实是一个很好的开始，但我和你在一起大约 5 分钟，并且已经想要更多。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:18:20.753

使用 OO 怎么样？

它看起来组织得很好，很容易记录。

```
/**
 * A stopwatch Class.
 *
 * @constructor
 */
function Stopwatch() {
  this.current =  new Date().getTime();
}

/**
 * Starts the stopwatch
 */
Stopwatch.prototype.start = function(){
  this.current = new Date().getTime();
};

/**
 * Stops the stopwatch
 *
 * @return {number} Number of seconds since Stopwatch was started
 */
Stopwatch.prototype.stop = function(){
  return ((new Date().getTime()) - this.current) / 1000;
}; 
```

例子。如果您的库被导入为`Utils`.

```
var s = new Utils.Stopwatch();
s.start();

// (...) 

Logger.log(s.stop()); 
```

PS：这是未经测试的代码。

作为副作用，您可以有多个秒表，每个秒表都维护自己的局部变量`current`

**更新**

虽然这在 JSDoc 之后得到了正确记录，但它目前没有使用 Google Apps 脚本自动完成这些方法。

# python - 在本地安装 Numpy

> ID：10890178
> 
> 赞同：4
> 
> 时间：2012-06-05T00:34:45.807
> 
> 标签：python, numpy, installation

我在没有 root 权限的远程计算机上有一个帐户，我需要安装 Python 的本地版本（远程计算机的 Python 版本与我拥有的某些代码不兼容），那里有 Numpy 和 Scipy。从昨天开始，我一直在尝试在本地安装 numpy，但没有成功。

我在 /home/myusername/.local/ 中成功安装了本地版本的 Python（2.7.3），所以我通过`/home/myusername/.local/bin/python`. 我尝试了两种安装 Numpy 的方法：

1.  我从官网下载了最新的稳定版Numpy，解压，进入解压后的文件夹，做了：`/home/myusername/.local/bin/python setup.py install --prefix=/home/myusername/.local`. 但是，我收到以下错误，然后是一系列其他错误（源自此错误）：

    ```
    gcc -pthread -shared build/temp.linux-x86_64-2.7/numpy/core/blasdot/_dotblas.o
    -L/usr/local/lib -Lbuild/temp.linux-x86_64-2.7 -lptf77blas -lptcblas -latlas 
    -o build/lib.linux-x86_64-2.7/numpy/core/_dotblas.so
    /usr/bin/ld: /usr/local/lib/libptcblas.a(cblas_dptgemm.o): relocation 
    R_X86_64_32 against `a local symbol' can not be used when making a shared 
    object; recompile with -fPIC 
    ```

    不知道这意味着什么（除了错误显然与 LAPACK 库有关），我只是执行了与上面相同的命令，但现在按照错误的建议输入 LDFLAGS='-fPIC'，即我做了 `LDFLAGS="-fPIC" /home/myusername/.local/bin/python setup.py install --prefix=/home/myusername/.local`。但是，我得到了同样的错误（除了在上面的 gcc 命令之后添加了前缀 -fPIC）。

2.  我尝试使用 pip 安装它，即`/home/myusername/.local/bin/pip install numpy`在我的本地路径中成功安装 pip 之后执行 /）。但是，我得到完全相同的错误。

我在网上搜索，但似乎没有一个错误与我的相似。我的第一个猜测是，这与一些需要 root 权限才能执行的代码有关，或者可能与 LAPACK 库的版本有关。

帮助，有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:04:23.270

错误消息告诉您，您的 ATLAS 库尚未使用该`-fPIC`标志构建。这意味着它不能链接到像 Python 扩展模块这样的共享库。您需要使用该`-fPIC`标志重建 ATLAS。ATLAS 文档描述了如何执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:55:33.317

从源代码构建有点痛苦。是否可以避免这样做？

如果我们假设您尝试在 x86 计算机（英特尔、AMD 等）上安装，您是否可以将 Python 安装在另一台您拥有 root 权限的 x86 计算机上*，*然后制作 Python 安装的 tar 存档，将 tar 复制到另一台计算机，然后解压缩 tar 存档？

上述问题在于，预构建的 Python 可能具有用于查找库的硬编码路径：它可能需要库在其中`/usr/share`或其他任何地方。这将是一个 hack，但您可能能够制作`chroot`监狱并让 Python 运行。

您可能还想看看 Enthought Python Distribution (EPD)。我相信 EPD 安装程序只会询问您希望 EPD 安装在哪里，然后将其安装在那里。

[http://www.enthought.com/products/epdgetstart.php?platform=linux](http://www.enthought.com/products/epdgetstart.php?platform=linux)

有一个免费版本的环保署。如果您想要 64 位，则必须为 EPD 付费，但如果 32 位适合您，那么您可能只需要 EPD Free。

[http://www.enthought.com/products/epd_free.php](http://www.enthought.com/products/epd_free.php)

PS Enthought 网站似乎拒绝任何不以`www.`! 这意味着某些 Google 搜索链接不起作用，除非您对其进行编辑以`www.`在开头插入 。我相信他们很快就会解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:16:54.483

您可能想查看 EasyBuild 以构建启用了 numpy 和 scipy 的本地 Python 版本，请参阅[http://hpcugent.github.com/easybuild/](http://hpcugent.github.com/easybuild/)。

它基本上把所有讨厌的东西都从你身上带走了，你只需要稍微配置一下（指定你希望软件结束的地方，例如），然后你可以用你选择的包构建 Python命令。

# html - 防止 DIV 用流体布局换行

> ID：10890180
> 
> 赞同：0
> 
> 时间：2012-06-05T00:34:55.380
> 
> 标签：html, css, fluid-layout

当我缩小浏览器窗口时，我无法阻止 DIV 换行到下一行。我一定缺少一些小而简单的东西，但我已经做了一段时间了，我无法弄清楚。它似乎只踢掉了“博客”div，而不是“信息”div。有什么建议么？

这是一个例子： [http ://www.spynsycle.com/portfolio/](http://www.spynsycle.com/portfolio/)

CSS：

```
/* Level 1 */
#container {
    min-width: 800px;
    width: 100%;
    min-height: 768px;
    height: 100%;
    background-color: lightgrey;
}

/* Level 2 */
#portfolio {
    min-width: 396px;
    width: 40%;
    min-height: 768px;
    height: 100%;
    float: left;
    background-color:lightgreen;

} 
#information {
    min-width: 108px;
    width: 20%;
    min-height: 768px;
    height: 100%;
    float: left;
    background-color: lightcoral;
}
#blog {
    min-width: 396px;
    width: 40%;
    min-height: 768px;
    height: 100%;
    float: left;
    background-color: lightblue;
} 
```

HTML：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Portfolio</title>
        <link rel="stylesheet" href="css/index.css" type="text/css" />
    </head>
    <body>
        <div id="container">
            <div id="portfolio">
                Port       
            </div>
            <div id="information">
                Info
            </div>
            <div id="blog">
                Blog
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:47:48.713

因为您`min-width`以像素为单位进行分配，所以随着页面变小，最终您将用完足够的像素来维持宽度的总和，并且您的浏览器正在强制您的博客`div`换行。您的宽度总计为`900px`，因此一旦浏览器窗口下降到下方`900px`，您将开始看到环绕。

发生的事情最终是你`min-width`的`396px`变得大于`40%`浏览器的宽度。

# ruby-on-rails - 具有嵌套资源的可排序表行

> ID：10890189
> 
> 赞同：1
> 
> 时间：2012-06-05T00:36:35.090
> 
> 标签：ruby-on-rails, jquery-ui-sortable

在我的 Rails 应用程序中，一个 Timesheet has_many Entries 和一个 Entry belongs_to a Timesheet。

```
class Timesheet < ActiveRecord::Base
  has_many :entries, order: 'position', dependent: :destroy
end

class Entry < ActiveRecord::Base
  belongs_to :timesheet
end 
```

我正在关注 Railscast 147 的可排序列表（更新版本）。在开发日志中，我注意到我的参数哈希正确地更新了排序顺序，但是在重新加载时它没有正确保存位置。此外，请求正在由创建操作而不是我的自定义排序操作​​处理。这是我的控制器。

```
class EntriesController < ApplicationController
  before_filter :signed_in_user
  before_filter :find_timesheet

  def index
    @entries = @timesheet.entries.order("position")
    @entry = @timesheet.entries.build
  end

  def create
    @entry = @timesheet.entries.build(params[:entry])
    @entry.position = @timesheet.entries.count + 1
    if @entry.save
      #flash[:notice] = "Entry created"
      #redirect_to timesheet_entries_path
      respond_to do |format|
        format.html { redirect_to timesheet_entries_path }
        format.js
      end
    else
      flash[:alert] = "Entry could not be added"
      render 'new'
    end
  end

  def destroy
    @entry = @timesheet.entries.find(params[:id])
    @entry.destroy
    respond_to do |format|
      format.html { redirect_to timesheet_entries_path, flash[:notice] = "Entry destroyed" }
      format.js
    end
  end

  def sort
    params[:entry].each_with_index do |id, index|
      @timesheet.entries.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end

  private

    def find_timesheet
      @timesheet = Timesheet.find(params[:timesheet_id])
    end  
end 
```

和我的 routes.rb 文件。

```
Sledsheet::Application.routes.draw do

  resources :timesheets do
    resources :entries, only: [:index, :create, :destroy] do
      collection { post :sort }
    end
  end
end 
```

entry.js.coffee

```
jQuery -> 
    $("#entries tbody").sortable(
        helper: fixHelper
        update: ->
            $.post($(this).data('update-url'), $(this).sortable('serialize'))
    ).disableSelection() 
```

开发日志的输出

```
Started POST "/timesheets/8/entries" for 127.0.0.1 at 2012-06-04 20:14:18 -0400
Processing by EntriesController#create as */*
  Parameters: {"entry"=>["60", "59", "61"], "timesheet_id"=>"8"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'qDs53hgOWfRMbNN9JKau3w' LIMIT 1
  Timesheet Load (0.1ms)  SELECT "timesheets".* FROM "timesheets" WHERE "timesheets"."id" = ? ORDER BY date DESC LIMIT 1  [["id", "8"]]
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `stringify_keys' for "60":String):
  app/controllers/entries_controller.rb:11:in `create' 
```

我用谷歌搜索了关于未定义方法的错误，但我很困惑为什么在这种情况下无论如何都会调用创建操作？我在页面上有一个 new_entry 表单，它通过 Ajax 创建一个新条目。也许这会干扰排序？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:26:45.150

没有 'stringify_keys' 方法的原因是*因为*您将数组传递给 create 操作而不是 sort 操作。`data-update-url`您的 erb.html 文件中有什么用途？应该是`sort_entries_path`。

# java - java游戏bug，应该很简单

> ID：10890191
> 
> 赞同：0
> 
> 时间：2012-06-05T00:37:10.433
> 
> 标签：java

我目前正在尝试在 java 中克隆游戏“Lumines”。我只有几个月的简单 java 经验，以前尽可能努力不把我的问题带到互联网上，但我一直在研究这个 bug 几个小时，但没有成功。如果您不熟悉 Lumines，请观看此视频：[lumines 视频](http://www.youtube.com/watch?v=P9GQGt1oDSc)。在视频中，您将看到当一行块落在已铺设块的顶部时，外行继续下落。这就是我的错误所在。我已经成功地得到它，所以外柱将在大多数位置继续下降，但是如果你旋转一个块并将其放到地板上，然后旋转另一个块并放下它，这样右外柱应该会继续下降，它不倒。

由于有很多源代码/图像，而且它是如此糟糕以至于令人尴尬（我正在努力提高它的效率，我只是想先把主要部分弄下来），我将上传文件供您下载这里：[来源/图像](http://www.mediafire.com/?7g76lrac6r2eu)

当你运行它时，按一次向上箭头并等待块落下。当下一个块出现在顶部时，按一次向上箭头和一次向右箭头。等待该块掉落，您将看到该错误。

（不要笑我的 1337 c0d3z ）

# parsing - IronPython compile() 不接受 AST 对象

> ID：10890192
> 
> 赞同：1
> 
> 时间：2012-06-05T00:37:11.073
> 
> 标签：parsing, ironpython, abstract-syntax-tree

在它说的文档中，“源”可以是 str 或 AST 对象

尝试编译我的 ast root 时：

```
dl = compile(newRoot, '<string>', 'eval') 
```

我得到这个例外：

```
expected str, got Module 
```

我正在使用 IronPython 的最新版本。

有什么想法为什么这不起作用？我发现的所有示例似乎都是这样做的，没有任何问题。

是否有编译 AST 对象的解决方法？

谢谢！！！！

PD：我发现了这个问题，但似乎没有活动：http: [//ironpython.codeplex.com/workitem/32526](http://ironpython.codeplex.com/workitem/32526)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:43:01.433

首先，IronPython 不支持这个。

IronPython 实际上很难支持它（直到今天我才知道它需要支持）。IronPython 的`_ast`模块是其自身 AST 的包装器，目前仅实现 IronPython AST => CPython AST 的转换，但不能反过来。这是相当多的（老实说，相当乏味）的工作，所以我不确定它什么时候会得到修复。

如果有一个流行的程序或库因此而损坏，则将其移到优先级列表中，并且始终欢迎修补程序。

# iphone - 以编程方式使用 ios-core 数据创建新表

> ID：10890205
> 
> 赞同：6
> 
> 时间：2012-06-05T00:39:02.907
> 
> 标签：iphone, ios, database, sqlite, core-data

Core Data 可以让我以编程方式创建新表吗？或者如果我需要，我需要直接使用 SQLite。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:59:45.133

从 CoreData 的角度来看，您并没有真正创建新表，因为数据库表只是与核心数据模型相关联的一种可能的持久性存储类型。

但是，您可以使用 NSEntityDescription 类以编程方式创建新的核心数据实体。在 NSEntityDescription 类文档中，您会发现：

```
Entity descriptions are editable until they are used by an object graph manager. This
allows you to create or modify them dynamically. However, once a description is used 
(when the managed object model to which it belongs is associated with a persistent store
coordinator), it must not (indeed cannot) be changed. This is enforced at runtime: any
attempt to mutate a model or any of its sub-objects after the model is associated with a 
persistent store coordinator causes an exception to be thrown. If you need to modify a
model that is in use, create a copy, modify the copy, and then discard the objects with
the old model. 
```

我从来没有尝试在运行时修改一个，所以我不确定当你有一个现有的 SQLite 持久性存储时它到底有多好，如果有的话。但它可能值得玩弄 NSEntityDescription 看看它是否能让你接近你想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:42:29.197

您通常使用 Xcode 的数据模型设计工具以图形方式创建托管对象模型。（如果您希望可以在运行时以编程方式构建模型

[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-207332-TPXREF151)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T14:28:23.693

但是，您可以：

*   创建一个对象模型上下文（在您正在/使用的当前上下文之外）
*   创建一个或多个实体
*   为该模型创建一个单独的持久存储
*   保存实体等...
*   完成后关闭商店

您不能即时更改模型，因为它们在被拉入运行时环境时几乎是固定的。

# asp.net - ASP.NET 回发有空的请求正文，但只是有时

> ID：10890209
> 
> 赞同：1
> 
> 时间：2012-06-05T00:39:39.327
> 
> 标签：asp.net, request, load-balancing

我在一个高流量的 ASP.NET 网站上工作，大约每 30 分钟一次，我们收到一个触发 POST 请求`HttpException: Request timed out.`在我们的调试中，我们发现 ASP.NET 正在获取请求，但不是请求正文. 这是**标题**：

```
Connection: Keep-Alive
Content-Length: 49476
Content-Type: application/x-www-form-urlencoded
Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Encoding: gzip,deflate
Accept-Language: en-US,en
Host: abc.123.com
Referer: https://abc.123.com/page.aspx 
```

请求正文为空。我们支持负载均衡器，如果这有什么帮助的话。

我的问题是，**我将如何调试和解决这样的问题**？根据这篇文章中接受的答案：

[诊断“请求超时”HttpExceptions](https://stackoverflow.com/questions/441792/diagnosing-request-timed-out-httpexceptions)

看起来可能发生的情况是请求被分成两个 TCP 段，一个用于标头，一个用于正文。由于我们在具有公共虚拟 IP 的负载平衡器后面，因此完全有可能将一个 TCP 段发送到一台服务器，而另一个发送到另一台服务器。这会是一个合理的案例吗？还是其他原因造成的？

# java - 您是否应该使用 AccountManager 来存储 Android 应用程序的用户名和密码？

> ID：10890211
> 
> 赞同：19
> 
> 时间：2012-06-05T00:39:48.280
> 
> 标签：java, android, accountmanager, password-storage, android-account

我想知道是否应该实施`AccountManager`以保存用户凭据，例如用户名、电子邮件、密码等。我找不到自己使用它的充分理由。

我不希望其他应用程序可以访问`Accounts`，我真的不希望它们显示在“帐户和同步”设置中（尽管这可能没什么大不了的）。

所以我的问题是：我应该使用它吗？优点缺点？我可以隐藏`Accounts`其他应用程序并阻止它们出现在“帐户和同步”中吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T02:53:59.137

这个问题的公认答案可能会对您有所帮助... [我应该使用 Android AccountManager 做什么？](https://stackoverflow.com/questions/2720315/why-should-i-use-android-accountmanager)

还应该指出，正如上面的帖子以及在[没有 SyncAdapter 的 AccountManager 中提到的那样？](https://stackoverflow.com/questions/3085242/accountmanager-without-a-syncadapter)，你不能`AccountManager`没有 a `SyncAdapter`，所以在你的特定情况下使用它可能不好。

我看不出有任何理由`AccountManager`专门使用一个来存储这种类型的信息——归根结底，这与自己手动将数据存储在自己的数据库或文件中没有什么不同。如果有的话，它可能会使事情复杂化——你为什么不把它存储起来`SharedPreferences`呢？

我能想到鼓励使用的唯一原因是，`AccountManager`如果您想在多个不同的应用程序之间共享您的帐户，因为数据存储在中央 Android 数据存储区中，所有应用程序都可以访问该数据存储区。但是，如果这不是必需的，我认为它可能更容易使用`SharedPreferences`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-16T00:25:30.257

### 概述

使用 AccountManager 存储凭据比存储在文件或 SQL 数据库中安全得多。
任何其他应用程序都可以检索文件，这与通过 AccountManager 不同，Android 将强制只有您的应用程序才能访问密钥。

但即使是 AccountManager 也没有完全保护，例如在手机丢失的情况下，[请参阅此了解更多信息](http://security-n-tech.blogspot.co.uk/2011/01/security-issue-exposed-by-android.html)。

### 良好做法

*   我建议使用 AccountManager 并且**不**以明文形式存储密码，而是以散列形式存储。
*   并且为了更高级别的安全性，最好存储由 web 服务提供并关联到帐户（在 web 服务端）的设备专用令牌，并允许用户撤销令牌。

### 不好

*   不要**将**明确的甚至散列的密码存储为文件或任何人都可以访问的数据库中。
*   永远不要存储清晰的密码，而是始终使用哈希值。

### 也可以看看

*   [什么可以保护 Android AccountManager 密码不被其他应用读取？](https://stackoverflow.com/questions/8174835/what-protects-android-accountmanager-passwords-from-being-read-by-other-apps)
*   [http://developer.android.com/training/articles/security-tips.html#Credentials](http://developer.android.com/training/articles/security-tips.html#Credentials)

# python - While 循环不会继续到 If 语句

> ID：10890217
> 
> 赞同：-1
> 
> 时间：2012-06-05T00:41:34.543
> 
> 标签：python, loops

我是 Python 新手，我想弄清楚为什么我的程序不会超过初始输入。一切正常，直到我输入一个数字。然后它只是回到程序的开头。循环语句如下所示：

```
 loop = 1
 choice = 0
 while loop == 1:
     choice = menu()
     if choice == 1:
        (List of commands)
     elif choice == 2:
        (List of commands)  etc...
     elif choice == 5:
        loop = 0 
```

我是一个大菜鸟，所以我敢打赌这是一个荒谬的问题，但我只是难住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:30:41.237

`TypeError: can't multiply sequence by non-int of type 'str'`意味着你像这样乘以'5'*'5'，它们是`str`但不是int 5*5。

`'1'+'1' = '11'`但是_`1 + 1 = 2`

所以你应该将**str**更改为**int**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:35:02.083

```
NO_ACTION, SMTH_ACTION, SMTH_OTHER_ACTION, EXIT_ACTION = 0,1,2,3
choice = NO_ACTION
while True:
    choice = int(menu()) # python strong typed!

    if choice is SMTH_ACTION:
        (List of commands)

    elif choice is SMTH_OTHER_ACTION:
        (List of commands)  etc...

    elif choice is EXIT_ACTION:
       break 
```

不需要退出标志 - 使用`break`关键字。不要使用“幻数”——定义常量。

# c - 我如何用 C 做到这一点？斐波那契数列

> ID：10890219
> 
> 赞同：-4
> 
> 时间：2012-06-05T00:42:02.827
> 
> 标签：c

也许有人可以帮助我解决这个问题。

*   使用周期的概念生成斐波那契数列，直到达到 10000 或多一点。

所以我有这段代码，它应该可以工作并向我展示我想要的东西，但它没有。有人可以告诉我它有什么问题吗？它打开但它不起作用@_@

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i=0,j=0,sum=1,num;

    while(sum>=1000){
    {
       printf("%d\n",sum);
        i=j;
        j=sum;
        sum=i+j;    

     } 
  system("pause");  
} 
```

* * *

我为计算斐波那契数列而编写的代码如下：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i=0,j=0,sum=1,num;
    printf("Introduce the limit for the Fibonacci sequence: ");
    scanf("%d",&num);
    while(sum<num)
    {
       printf("%d\n",sum);
        i=j;
        j=sum;
        sum=i+j;               
    }   
  system("pause");  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:46:30.087

在第一个片段中，您有一个错字

```
while(sum>=1000){ 
```

应该

```
while (sum < 10000){ 
```

因为你作业的措辞，我说的是“小于”而不是“小于或等于”。

你想打印出 F [n]其中 F [n]是第一个这样的数字 > 10000。因为`j`真的是 F [n-1]将 while 循环条件更改为

```
while (j <= 10000)
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:49:37.593

而 sum >= 1000 意味着它永远不会启动，因为 sum = 1。我认为你想要 <=。第二个是无限循环，因为 sum 总是大于 num

# .net - 在创建巨大的位图之前是否可以确定是否有足够的可用内存？

> ID：10890224
> 
> 赞同：1
> 
> 时间：2012-06-05T00:43:23.770
> 
> 标签：.net

有时，我可以创建一个 10000x10000 位图，有时我不能

取决于有多少可用物理 RAM 可用

我想知道是否有办法在进程开始之前弄清楚是否有足够的内存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:48:36.923

您可以使用它来获取当前进程：

```
Process proc = Process.GetCurrentProcess(); 
```

然后使用它来获取私有内存使用情况：

```
proc.PrivateMemorySize64; 
```

您也可以这样做（使用 System.Diagnostics.PerformaceCounter）：

```
protected PerformanceCounter ramCounter; 
ramCounter = new PerformanceCounter("Memory", "Available MBytes");
var freeRAMInMB = ramCounter.NextValue(); 
```

以上将获得以 MB 为单位的可用 RAM 量...

# python - 当意外的 EOF 循环未返回到下一个文件时，Python 脚本停止处理

> ID：10890227
> 
> 赞同：0
> 
> 时间：2012-06-05T00:43:43.543
> 
> 标签：python, abstract-syntax-tree, glob, unexpectendoffile

我有一个脚本，它使用 glob 读取目录中的多个文件，然后根据在特定 json 字段中的每一行上找到的日期将它们逐行拆分为新文件：

这是一个有效的脚本：

```
import json
import glob
import fileinput
from dateutil import parser
import ast
import gzip

line = []

filestobeanalyzed = glob.glob('../data/*')

for fileName in filestobeanalyzed:
        inputfilename = fileName
        print inputfilename
        for line in fileinput.input([inputfilename]):
                line = line.strip();
                if not line: continue
                line = ast.literal_eval(line)
                line = json.dumps(line)
                if not json.loads(line).get('created_at'): continue
                date = json.loads(line).get('created_at')
                date_converted = parser.parse(date).strftime('%Y%m%d')
                outputfilename = gzip.open(date_converted, "a")
                outputfilename.write(line)
                outputfilename.write("\n")

outputfilename.close() 
```

到达目录中第一个文件的末尾时出现以下错误：

```
python split_json_docs_by_date_with_dict-to-json.py 
../data/research_data_p1.json
Traceback (most recent call last):
  File "split_json_docs_by_date_with_dict-to-json.py", line 18, in <module>                                                                                  
    line = ast.literal_eval(line)                                                                                                                            
  File "/usr/lib64/python2.7/ast.py", line 49, in literal_eval                                                                                               
    node_or_string = parse(node_or_string, mode='eval')                                                                                                      
  File "/usr/lib64/python2.7/ast.py", line 37, in parse                                                                                                      
    return compile(source, filename, mode, PyCF_ONLY_AST)                                                                                                    
  File "<unknown>", line 1                                                                                                                                   
    {u'user': {u'follow_request_sent': None, u'profile_use_background_image': False, u'default_profile_image': False, u'geo_enabled': False, u'verified': False, u'profile_image_url_https': u'https://si0.twimg.com/profile_images/1829421396/yA6hEz2j_normal', u'profile_sidebar_fill_color': u'DDEEF6', u'id': 15054232, u'profile_text_color': u'333333', u'followers_count': 117, u'protected': False, u'id_str': u'15054232', u'profile_background_color': u'858585', u'listed_count': 6, u'utc_offset': -25200, u'statuses_count': 9418, u'description': u"Hi- I'm Jordan, and I refuse to put any effort into this bio. Well... except just enough to type this I guess.", u'friends_count': 59, u'location': u'Washington Terrace, UT', u'profile_link_color': u'0084B4', u'profile_image_url': u'http://a3.twimg.com/profile_images/1829421396/yA6hEz2j_normal', u'notifications': N 
```

对我来说很明显 ast 无法评估该行，因为它不完整但是如果我插入：

```
if not ast.literal_eval(line): continue 
```

之前：

```
line = ast.literal_eval(line) 
```

我仍然得到完全相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:04:48.643

如果您只是想忽略错误，那么您可以在 try 块中捕获异常并继续。如果您想解析多行 JSON，那么 fileinput 可能不是最佳选择。

这是一个适合您的编辑。它包含基本的多行 JSON 支持和 try 块，因此无法解析的代码不会使程序崩溃。这是未经测试的，因为我无权访问您的测试数据。只需删除带有注释的行即可删除基本的多行 JSON 支持。

```
import json
import glob
import fileinput
from dateutil import parser
import ast
import gzip

line = []

filestobeanalyzed = glob.glob('../data/*')

for fileName in filestobeanalyzed:
        inputfilename = fileName
        print inputfilename
        pastlines = "" # stores previous unparsable lines
        for line in fileinput.input([inputfilename]):
                line = pastlines + line # put past unparsable lines with current line
                line = line.strip();
                if not line: continue
                try:
                    line = ast.literal_eval(line)
                    line = json.dumps(line)
                    pastlines = "" # reset unparsable lines
                except:
                    pastlines += line # add current line to unparsable lines
                    continue
                date = json.loads(line).get('created_at', None)
                if not date: continue
                date_converted = parser.parse(date).strftime('%Y%m%d')
                outputfilename = gzip.open(date_converted, "a")
                outputfilename.write(line)
                outputfilename.write("\n")

outputfilename.close() 
```

# java - GWT 客户端错误（TypeError）：b 为空

> ID：10890231
> 
> 赞同：2
> 
> 时间：2012-06-05T00:44:29.360
> 
> 标签：java, javascript, gwt, requestfactory

我有简单的 GWT 2.4.0 RequestFactory 应用程序，当调用 fire 方法时，它会因客户端异常而失败。

```
context.checkPassword(tbLogin.getText(), ptbPasswd.getText())
        .fire(new Receiver<EmployeeProxy>() {

            @Override
            public void onSuccess(EmployeeProxy response) {
                Window.alert(response == null ?
                        "Login faild!" :
                        response.getDisplayName()
                                + " login success!");
            }

            @Override
            public void onFailure(ServerFailure error) {
                Window.alert("Somthing wrong");
            }

        }); 
```

FireBug 和 Chrome 开发者工具什么也没显示。我刚刚收到一条警报消息：

```
(TypeError): b is null
 fileName: http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html
 stack: Oz(null,"{\"F\":\"ru.itskills.daxx.acme.client.EmployeeRequestFactory\",\"I\":[{\"O\":\"yGR3sMWWOGTu_ikQGxTCqleAi3E=\",\"P\":[\"cas\",\"cas1\"]}]}",[object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1197
gB([object Object],null)@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1169
jB([object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1079
VA([object Object],[object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:475
YW([object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1172
Pc([object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1253
Bc([object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1253
Ad([object Object],[object Object],null)@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1216
sd([object Object],[object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1170
Ho([object Object],[object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:532
Hc([object MouseEvent],[object Object],[object HTMLButtonElement])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1077
Jo([object Object],[object MouseEvent])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1014
Ro([object MouseEvent])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1253
vn([object MouseEvent],[object HTMLButtonElement],[object Object])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:935
([object MouseEvent])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1250
zb((function (a) {var b, c = this;while (c && !(b = c.__listener)) {c = c.parentNode;}c && c.nodeType != 1 && (c = null);b && $n(b) && vn(a, c, b);}),[object HTMLButtonElement],[object Arguments])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:663
Cb((function (a) {var b, c = this;while (c && !(b = c.__listener)) {c = c.parentNode;}c && c.nodeType != 1 && (c = null);b && $n(b) && vn(a, c, b);}),[object HTMLButtonElement],[object Arguments])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:1164
([object MouseEvent])@http://localhost:8084/app/BDB5AC36BC159624D4B51B3846C167DF.cache.html:965

 lineNumber: 1197 
```

它可能是什么以及如何解决它？

“详细”模式编译后出现同样的错误。

```
(TypeError): this$static is null
 fileName: http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html
 stack: com_google_web_bindery_requestfactory_gwt_client_DefaultRequestTransport_$send__Lcom_google_web_bindery_requestfactory_gwt_client_DefaultRequestTransport_2Ljava_lang_String_2Lcom_google_web_bindery_requestfactory_shared_RequestTransport$TransportReceiver_2V(null,"{\"F\":\"ru.itskills.daxx.acme.client.EmployeeRequestFactory\",\"I\":[{\"O\":\"yGR3sMWWOGTu_ikQGxTCqleAi3E=\",\"P\":[\"cas\",\"cas1\"]}]}",[object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:6394
com_google_web_bindery_requestfactory_shared_impl_AbstractRequestContext_$doFire__Lcom_google_web_bindery_requestfactory_shared_impl_AbstractRequestContext_2Lcom_google_web_bindery_requestfactory_shared_Receiver_2V([object Object],null)@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:6925
com_google_web_bindery_requestfactory_shared_impl_AbstractRequestContext_$fire__Lcom_google_web_bindery_requestfactory_shared_impl_AbstractRequestContext_2V([object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:6993
com_google_web_bindery_requestfactory_shared_impl_AbstractRequest_$fire__Lcom_google_web_bindery_requestfactory_shared_impl_AbstractRequest_2Lcom_google_web_bindery_requestfactory_shared_Receiver_2V([object Object],[object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:6825
ru_itskills_daxx_acme_client_App$1_$onClick__Lru_itskills_daxx_acme_client_App$1_2Lcom_google_gwt_event_dom_client_ClickEvent_2V([object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:14243
com_google_gwt_event_dom_client_ClickEvent_dispatch__Lcom_google_gwt_event_shared_EventHandler_2V([object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:713
com_google_gwt_event_shared_GwtEvent_dispatch__Ljava_lang_Object_2V([object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:633
com_google_web_bindery_event_shared_SimpleEventBus_$doFire__Lcom_google_web_bindery_event_shared_SimpleEventBus_2Lcom_google_web_bindery_event_shared_Event_2Ljava_lang_Object_2V([object Object],[object Object],null)@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:916
com_google_gwt_event_shared_HandlerManager_$fireEvent__Lcom_google_gwt_event_shared_HandlerManager_2Lcom_google_gwt_event_shared_GwtEvent_2V([object Object],[object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:848
com_google_gwt_user_client_ui_Widget_$fireEvent__Lcom_google_gwt_user_client_ui_Widget_2Lcom_google_gwt_event_shared_GwtEvent_2V([object Object],[object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:2898
com_google_gwt_event_dom_client_DomEvent_fireNativeEvent__Lcom_google_gwt_dom_client_NativeEvent_2Lcom_google_gwt_event_shared_HasHandlers_2Lcom_google_gwt_dom_client_Element_2V([object MouseEvent],[object Object],[object HTMLButtonElement])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:662
com_google_gwt_user_client_ui_Widget_$onBrowserEvent__Lcom_google_gwt_user_client_ui_Widget_2Lcom_google_gwt_user_client_Event_2V([object Object],[object MouseEvent])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:2926
com_google_gwt_user_client_ui_Widget_onBrowserEvent__Lcom_google_gwt_user_client_Event_2V([object MouseEvent])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:2993
com_google_gwt_user_client_DOM_dispatchEvent__Lcom_google_gwt_user_client_Event_2Lcom_google_gwt_user_client_Element_2Lcom_google_gwt_user_client_EventListener_2V([object MouseEvent],[object HTMLButtonElement],[object Object])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:2348
([object MouseEvent])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:2617
com_google_gwt_core_client_impl_Impl_apply__Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2((function (evt) {var listener, curElem = this;while (curElem && !(listener = curElem.__listener)) {curElem = curElem.parentNode;}curElem && curElem.nodeType != 1 && (curElem = null);listener && com_google_gwt_user_client_impl_DOMImpl_isMyListener__Ljava_lang_Object_2Z(listener) && com_google_gwt_user_client_DOM_dispatchEvent__Lcom_google_gwt_user_client_Event_2Lcom_google_gwt_user_client_Element_2Lcom_google_gwt_user_client_EventListener_2V(evt, curElem, listener);}),[object HTMLButtonElement],[object Arguments])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:269
com_google_gwt_core_client_impl_Impl_entry0__Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2((function (evt) {var listener, curElem = this;while (curElem && !(listener = curElem.__listener)) {curElem = curElem.parentNode;}curElem && curElem.nodeType != 1 && (curElem = null);listener && com_google_gwt_user_client_impl_DOMImpl_isMyListener__Ljava_lang_Object_2Z(listener) && com_google_gwt_user_client_DOM_dispatchEvent__Lcom_google_gwt_user_client_Event_2Lcom_google_gwt_user_client_Element_2Lcom_google_gwt_user_client_EventListener_2V(evt, curElem, listener);}),[object HTMLButtonElement],[object Arguments])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:301
([object MouseEvent])@http://localhost:8888/app/247A5A4B14F8C1DBCC38D63FB852104D.cache.html:286

 lineNumber: 6394 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:46:08.753

从您的代码片段中，可以`null`检查和不检查三件事：

1.  `tbLogin.getText()`
2.  `ptbPasswd.getText()`
3.  `response.getDisplayName()`

要追查问题，请使用“输出样式：详细”编译项目并重新测试。该错误将显示 Java 堆栈而不是“b 为空”。

![在此处输入图像描述](../Images/a2cd313f73c0b2b4a6ef28488b1b594a.png)

如果您通过 ANT 编译，请添加`-style DETAILED`arg，例如：

```
<java failonerror="true" fork="true" classname="com.google.gwt.dev.Compiler">
    ...
    <arg line="-style" />
    <arg value="DETAILED" />
    ...
</java> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:30:46.287

我敢打赌你忘了`initialize()`你的 RequestFactory。

# sql-server - 基于季节的数据库架构/设计

> ID：10890232
> 
> 赞同：1
> 
> 时间：2012-06-05T00:45:02.793
> 
> 标签：sql-server, database-design

在引入赛季概念之前，我有一个简单的体育注册系统架构：

玩家注册为团队的一员

团队注册为俱乐部的一部分

一支球队在一个分区比赛

组织创建部门

每个季节都会发生这种情况。所以我需要一种方法来跟踪每个赛季的所有这些。这里最好的方法是什么？我应该引入“季节”实体并在上述所有实体之间建立多对多关系吗？或者有没有一种方法可以“存档”每个赛季的所有内容，但也能够即时提取所有基于赛季的数据（用于报告等等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:14:08.983

这种设计允许球队从一个赛季到另一个赛季转移到不同的部门，而不必每年都重新创建（尽管它不允许像温尼伯喷气机队搬到凤凰城并在他们的历史赛季中保留他们的旧名字统计）。

```
CREATE TABLE dbo.Organizations
(
  OrgID INT PRIMARY KEY,
  Name NVARCHAR(255) NOT NULL UNIQUE
  -- , ... other columns
);

CREATE TABLE dbo.Divisions
(
  DivisionID INT PRIMARY KEY,
  Name NVARCHAR(255) NOT NULL,
  OrgID INT NOT NULL FOREIGN KEY REFERENCES dbo.Organizations(OrgID)
  -- , ... other columns
  -- UNIQUE might be (Name) or (OrgID, Name)
);

CREATE TABLE dbo.Clubs
(
  ClubID INT PRIMARY KEY,
  Name NVARCHAR(255) NOT NULL UNIQUE,
  -- , ... other columns
);

CREATE TABLE dbo.Teams
(
  TeamID INT PRIMARY KEY,
  Name NVARCHAR(255) NOT NULL,
  ClubID INT NOT NULL FOREIGN KEY REFERENCES dbo.Clubs(ClubID)
  -- , ... other columns
); 
```

现在要跟踪季节：

```
CREATE TABLE dbo.Seasons
(
  SeasonID INT PRIMARY KEY,
  StartDate DATE NOT NULL,
  EndDate DATE,
  Name NVARCHAR(255) NOT NULL -- e.g. '1997-98' for seasons that cross Jan 1
  -- , ... other columns
);

CREATE TABLE dbo.SeasonTeams
(
  SeasonID INT FOREIGN KEY REFERENCES dbo.Seasons(SeasonID),
  DivisionID INT FOREIGN KEY REFERENCES dbo.Divisions(DivisionID),
  TeamID INT FOREIGN KEY REFERENCES dbo.Teams(TeamID),
  PRIMARY KEY (SeasonID, DivisionID, TeamID)
); 
```

您可能需要约束或触发器来防止团队在任何给定年份属于多个部门。

现在，您还需要表示给定赛季/球队的名单。

```
CREATE TABLE dbo.Players
(
  PlayerID INT PRIMARY KEY,
  Name NVARCHAR(255) NOT NULL,
  -- , ... other columns
);

CREATE TABLE dbo.TeamRoster
(
  PlayerID INT NOT NULL FOREIGN KEY REFERENCES dbo.Players(PlayerID),
  TeamID INT NOT NULL,
  SeasonID INT NOT NULL, 
  DivisionID INT NOT NULL,
  FOREIGN KEY (TeamID, SeasonID, DivisionID) REFERENCES
    dbo.SeasonTeams (TeamID, SeasonID, DivisionID)
); 
```

您还需要用于时间表、排名、球员统计数据等的表格……但这应该是一个开始。

# ruby - 如何重构这些方法并删除第一行的依赖项检查

> ID：10890234
> 
> 赞同：0
> 
> 时间：2012-06-05T00:45:11.723
> 
> 标签：ruby, refactoring, dependencies

我本质上是在制作一个预先计算其大部分字段的表格。所以，我有一堆方法依赖于以前的方法，或者应该返回 nil。目前我正在做一系列检查，我想删除它们。

（忽略计算，它们只是示例）

```
def age
  return unless dob  # Not so bad... 
  Date.today - dob
end

def age_at_start
  return unless dob && start_date  # Getting worse
  start_date - dob
end

def compensation
  return unless age_at_start && time_worked && salary && staff_rating  # Shoot me now
  some_calculation(age_at_start, time_worked, salary, staff_rating)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:29:09.847

It partially depends on what you're *really* doing, aside from the example--without context it's difficult to know what would be the most meaningful under the circumstances.

Can't do much better than:

```
def age
  Date.today - dob if dob
end 
```

Same with this one--I wouldn't break out the guard clause yet:

```
def age_at_start
  dob && start_date ? start_date - dob : nil
end 
```

Here I'd break out the guard clause, because (a) you can, and (b) IMO testing is easier:

```
def compensation
  some_calculation if can_be_compensated?
end

def can_be_compensated?
  age_at_start && time_worked && salary && staff_rating
end 
```

If `some_calculation` is actually 'external' and needs the args, I might wrap it in a method that has access like your original and `can_be_compensated?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:53:47.560

```
def age
  (Date.today - dob) if dob
end

def age_at_start
  (start_date - dob) if dob && start_date
end

def compensation
  some_calculation(time_worked, age_at_finish, salary, staff_rating) if age_at_start && time_worked && salary && staff_rating
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T01:11:56.690

当条件开始变得太长时，我总是遇到麻烦。曾经有帮助的事情是将其中一些包装成 individual `methods`。这条路线至少会为您提供几个可以在测试中存根的公共方法。

```
def age
  return unless dob
  Date.today - dob
end

def age_at_start
  return unless valid_age_at_start(start_date, dob)
  start_date - dob
end

def compensation
  return unless valid_compensation(age_at_start, time_worked, salary, staff_rating)
  some_calculation(time_worked, age_at_finish, salary, staff_rating)
end

def valid_age_at_start(start_date, dob)
  start_date && dob
end

def valid_compensation(age_at_start, time_worked, salary, staff_rating)
  age_at_start && time_worked && salary && staff_rating
end 
```

或者您可以创建一个仅验证您的论点的方法：

```
def age
  return unless dob
  Date.today - dob
end

def age_at_start
  return unless valid_arguments?(start_date, dob)
  start_date - dob
end

def compensation
  return unless valid_arguments?(age_at_start, time_worked, salary, staff_rating)
  some_calculation(time_worked, age_at_finish, salary, staff_rating)
end

private

def valid_arguments?(*args)
  args.each do |arg|
    return false unless arg
  end
  return true
end 
```

诚然，这两条路线仍然有点难看。

# char - const char * 怎么可能改变？

> ID：10890238
> 
> 赞同：0
> 
> 时间：2012-06-05T00:45:53.753
> 
> 标签：char, gdb, constants

我正在编写一个可以递归打印目录的程序，下面是 gdb 调试段

请注意，d_path（它是作为参数传递给 print_dir_tree 的 const char *）在“if (dr == NULL) {”步骤之前是“/home/cifer/.gftp”，但是，它被打印为“/home/ cifer/!\200" 在此子句之后

谁能告诉我为什么？多谢！

```
Breakpoint 1, print_dir_tree (d_path=0x805b058 "/home/cifer/.gftp", depth=4)

    at dir_demo.c:15

15      DIR *dr = opendir(d_path);

(gdb) print d_path

$2 = 0x805b058 "/home/cifer/.gftp"

(gdb) print d_path

$3 = 0x805b058 "/home/cifer/.gftp"

(gdb) step

16      if (dr == NULL) {

(gdb) print d_path

$4 = 0x805b058 "/home/cifer/!\200"

(gdb) step

20      struct dirent *de = NULL;

(gdb) print d_path

$5 = 0x805b058 "/home/cifer/!\200"

(gdb) step

21      while((de = readdir(dr)) != NULL) {

(gdb) print d_path

$6 = 0x805b058 "/home/cifer/!\200"

(gdb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:45:00.647

我需要查看您的代码才能确定，但​​如果您询问是否可以更改 const，答案是肯定的。如果您要问如何更改它，那很简单，它被视为常规变量，但它会在更改时向您发出警告。如果您尝试更改它并避免出现警告，您可以复制该变量，然后对其进行更改。

# ruby-on-rails - 仅当对象中存在属性时，如何才能使 RABL 呈现属性？

> ID：10890239
> 
> 赞同：0
> 
> 时间：2012-06-05T00:46:03.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rabl

我有一个 RESTful 用户模型，并且当正在寻找的用户对象不是当前用户时，我试图过滤要包含在显示 JSON 响应中的属性。

逻辑：

```
if params[:id]==current_user
  json => {:name: <name value>, :birthdate: <birthdate>}
else
  json => {:name: <name value>}
end 
```

当我在控制器中过滤属性时，我得到一个 MissingAttribuiteError 并带有以下代码：

*用户控制器*

```
def show
  if params[:id]==current_user.id.to_s
    @user=User.find(params[:id])
  else
    @user=User.find(params[:id], :select => [:name])
  end
  respond_with(@user)
end 
```

*用户/show.json.rabl*

```
object @user
attributes :name, :birthdate 
```

仅当对象中存在属性时，如何才能使 RABL 呈现属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:15:56.020

显然容易的事情应该很容易。这行得通。

[但不确定视图级别的过滤是否比控制器中的过滤更好或更差。]

*用户控制器*

```
def show
    @user=User.find(params[:id])
    respond_with(@user)
end 
```

*用户/show.json.rabl*

```
if @user==current_user
  attributes :birthdate
end 
```

# c++ - 获取 std::future 的状态

> ID：10890242
> 
> 赞同：99
> 
> 时间：2012-06-05T00:46:36.600
> 
> 标签：c++, multithreading, c++11, future

是否可以检查 a`std::future`是否已完成？据我所知，唯一的方法是`wait_for`用零持续时间调用并检查状态是否`ready`存在，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-06T16:06:38.027

你是对的，除了`wait_until`用过去的时间打电话（这是等价的）之外，没有更好的方法了。

如果您想要更方便的语法，您总是可以编写一个小包装器：

```
template<typename R>
  bool is_ready(std::future<R> const& f)
  { return f.wait_for(std::chrono::seconds(0)) == std::future_status::ready; } 
```

注意，如果函数被延迟，这将永远不会返回 true，因此`wait_for`在您可能希望在经过一定时间后或系统负载较低时同步运行延迟任务的情况下，最好直接检查。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-04T23:56:56.707

在std::future[的作品](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3857.pdf)中有一个 is_ready 成员函数。同时，VC 实现有一个 _Is_ready() 成员。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-05T03:07:11.583

我的第一个赌注`wait_for`是以 0 的持续时间进行调用，并检查可以是`future_status::ready`、`future_status::deferred`或的结果代码`future_status::timeout`。

`valid()``true`如果引用共享状态，则将返回`*this`，与该状态是否*就绪*无关。请参阅[cppreference](http://en.cppreference.com/w/cpp/thread/future)。

# c - C - 使用 stat() 获取字节时遇到问题

> ID：10890243
> 
> 赞同：0
> 
> 时间：2012-06-05T00:46:45.280
> 
> 标签：c, stat

```
char string[50], s[50];
struct stat buf;
int counter = 0;

while (fgets(string, sizeof string, stdin)) {
    if (strspn(string, "size ") == 5) {
        for (int i = 5; i < strlen(string); i++) {
            s[counter] = string[i];
            counter++;
        }
        s[counter] = '\0';

        if (stat(s, &buf) < 0)
            return 1; //PROBLEM OCCURED

        printf("FILE: %s\n", s);
        printf("SIZE: %d\n", (int)buf.st_size);
    }
 } 
```

程序的上下文不是很重要，但我尝试使用它，因为在“size”之后，文件名是唯一的输入。然后我将它传递给 stat 如果它存在，它应该给我给定文件的字节。最终，程序每次都返回 1，就像我使用 stat 错误一样。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:55:55.360

fgets() 返回尾随的换行符，因此您的“文件名”永远不会正确。

代替：

```
for(int i = 5; i < strlen(string); i++) {
   s[counter] = string[i];
   counter++;
}
s[counter] = '\0'; 
```

和：

```
char *source = &(string[5]), *dest = s;
while((*source != 0) && (*source != 10) && (*source != 13)) {
   *dest++ = *source++;
}
*dest = 0; 
```

这样，您将复制所有内容，直到零（字符串结尾）、回车或换行 - 而不是将 CR 和/或 LF 字符也附加到字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:09:44.380

我猜潜在的问题存在于 strspn() 的使用中。strspn() 的返回值可以从

> 如果 str1 中的所有字符都在 str2 中，则函数返回整个 str1 字符串的长度，如果 str1 中的第一个字符不在 str2 中，则函数返回零。

您可以检查源字符串是否包含“大小”的比较值。

[参考](http://www.cplusplus.com/reference/clibrary/cstring/strspn/)。

# php - 使用随机盐验证密码

> ID：10890244
> 
> 赞同：1
> 
> 时间：2012-06-05T00:46:50.513
> 
> 标签：php, password-hash

我一直在尝试了解存储在带有 mysql 数据库的用户表中的哈希和盐。我完成了存储它们，但似乎无法理解如何验证用户何时登录。
我已经查看并看到了单独和一起存储盐和哈希。我生产的盐是随机的。

有任何想法吗？
我已经发布了我的代码。

```
<?php
$password = 'passwordwhatever';

//generate the salt
function gen_salt() {
    $salt = uniqid(mt_rand(), true) . sha1(uniqid(mt_rand(), true));
    $salt = crypt('sha512', $salt);
    return $salt;
}

//generate the hash
function gen_hash($salt, $password) {
    $hash = $salt . $password;
    for($i = 0; $i < 100000; $i++) {
        $hash = crypt('sha512', $hash);
    }

    $hash = $salt . $hash;
    return $hash;
}

$password = gen_hash(gen_salt(), $password);
echo $password;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:51:20.807

只要您生产相同的盐，就没有太大关系。将其存储在您的数据库中，在配置中，只要您可以访问它。反转 SHA512 哈希的工作量非常大，除非你是五角大楼，否则没人会打扰。关键是您希望能够使用相同的盐重复哈希，这样您就可以非常确定输入是相同的，而不必存储敏感输入。如果这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:48:43.180

盐需要包含在数据库中的某处（或某处）。一些选项是将盐附加到哈希或存储为自己的字段。我喜欢将它附加到哈希中。

```
$password = $salt . '.' . $hash; 
```

然后当用户登录时，您获取他的密码，将其分解为哈希和盐，并使用您的密码生成功能（使用密码中的盐而不是随机盐）来确定它是否与密码中的密码匹配D b。

```
list($salt,$hash) = explode('.', $password);
$check = gen_hash($salt, $input_pass);
if ($check === $password)
    // valid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T00:51:43.973

也许你应该看看[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)。[这](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)可能会帮助你。我写了一些[教程](http://www.phpgangsta.de/schoener-hashen-mit-bcrypt)，但它们是德语的。哦，PHP 5.3 原生支持 bcrypt。

# iphone - 如何改善 imageView 从后面出现

> ID：10890245
> 
> 赞同：0
> 
> 时间：2012-06-05T00:46:57.130
> 
> 标签：iphone, uiimageview

我有两个 imageViews ，一个在另一个之上。当我做滚动手势时，下面的会出现在前面。我不满意的是，下面的图片会突然出现。我想要得到的效果正在逐渐显现。你可以看看[这个网站](http://www.imgmodels.com/details.aspx?cityID=1&modelid=148544&agencyID=&from=&pic=059.jpg&hd=por&subid=5570&mainsubid=5570&catID=3&indx=1)（尝试改变图片）。任何人都可以给我一些关于实现这一目标的线索，或者从后面出现一些改进 imageview 的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:16:36.290

您想使用动画将 imageView 的 alpha 从 0 逐渐更改为 1。这将达到您想要的效果。

像这样的东西...

```
imageView.alpha = 0;

  [UIView animateWithDuration:0.3 delay:0.0 options:UIViewAnimationCurveLinear
        animations:^{
            imageView.alpha = 1;
        }
        completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:13:20.403

正如另一张海报所建议的那样，您的描述听起来就像您只想要一个简单的交叉淡入淡出。

但是，您发布的链接看起来像一个封面流式动画。这就是你所追求的吗？如果你在 GitHub 上搜索，有几个开源库可以让你做到这一点。这是相当复杂的核心动画。

# iphone - 如何同时检测主视图 UILongPressGestureRecognizer 和子视图 UIPanGestureRecognizer

> ID：10890246
> 
> 赞同：1
> 
> 时间：2012-06-05T00:47:13.360
> 
> 标签：iphone, ios, xcode, uiview, uipangesturerecognizer

我的 UILongPressGestureRecognizer 和 UIPanGestureRecognizer 遇到了问题。

我希望在我的 self.view 中长按以在我的 self.view 中添加一个带有 UIPanGestureRecognizer 的视图。

但是 UIPanGestureRecognizer 无法识别。

我错过了什么吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //[self initImagesAndGesture];

    UILongPressGestureRecognizer *tapRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(addImgView:)];
    tapRecognizer.numberOfTouchesRequired = 1;
    tapRecognizer.minimumPressDuration = 0.7;
    [tapRecognizer setDelegate:self];
    self.view.userInteractionEnabled = YES;

    [self.view addGestureRecognizer:tapRecognizer];   
}

-(void)addImgView:(UILongPressGestureRecognizer *)recognizer
{
    NSLog(@"tappppp");

    if(UIGestureRecognizerStateBegan == recognizer.state) {
        // Called on start of gesture, do work here

        NSLog(@"UIGestureRecognizerStateBegan");
        UIImage *img = [UIImage imageNamed:@"beer.png"];
        UIImageView *imgView = [[UIImageView alloc]initWithImage:img];

        UILabel *timeStamp = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];
        timeStamp.text = [NSString stringWithFormat:@"%f",[NSDate date]];

        UIView *drinkView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 50, 50)];
        [drinkView setUserInteractionEnabled:YES];

        CGPoint tapLocation = [recognizer locationInView:recognizer.view];

        [timeStamp setCenter:CGPointMake(tapLocation.x, tapLocation.y)];
        [imgView setCenter:CGPointMake(tapLocation.x,tapLocation.y)];

        [drinkView addSubview:imgView];
        [drinkView addSubview:timeStamp];

        [drinkView setUserInteractionEnabled:YES];

        [imgView setUserInteractionEnabled:YES];
        [timeStamp setUserInteractionEnabled:YES];

        UIPanGestureRecognizer *recognizer1 = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan1:)];
        [recognizer1 setDelegate:self];
        [drinkView addGestureRecognizer:recognizer1];
        [self.view addSubview:drinkView];

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:19:34.930

```
-(void)addImgView:(UILongPressGestureRecognizer *)recognizer
{
    NSLog(@"tappppp");

    if(UIGestureRecognizerStateBegan == recognizer.state) {
        // Called on start of gesture, do work here

        NSLog(@"UIGestureRecognizerStateBegan");
        UIImage *img = [UIImage imageNamed:@"beer.png"];
        UIImageView *imgView = [[UIImageView alloc]initWithImage:img];

        UILabel *timeStamp = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 150, 30)];
        timeStamp.text = [NSString stringWithFormat:@"%f",[NSDate date]];

        UIView *drinkView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 75,115)];
        drinkView.backgroundColor=[UIColor redColor];
        [drinkView setUserInteractionEnabled:YES];

        CGPoint tapLocation = [recognizer locationInView:recognizer.view];

        [drinkView setCenter:CGPointMake(tapLocation.x,tapLocation.y)];

        [drinkView setUserInteractionEnabled:YES];
       [imgView setUserInteractionEnabled:YES];
        [timeStamp setUserInteractionEnabled:YES];

        [drinkView addSubview:imgView];
        [drinkView addSubview:timeStamp];

        UIPanGestureRecognizer *recognizer1 = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan1:)];
        [recognizer1 setDelegate:self];
        [drinkView addGestureRecognizer:recognizer1];

        [self.view addSubview:drinkView];

    }

    if(UIGestureRecognizerStateChanged == recognizer.state) {
        // Do repeated work here (repeats continuously) while finger is down
        NSLog(@"UIGestureRecognizerStateChanged");

    }

    if(UIGestureRecognizerStateEnded == recognizer.state) {
        // Do end work here when finger is lifted
        NSLog(@"UIGestureRecognizerStateEnded");

    }
} 
```

# linux - 状态 FIN_WAIT_1 出现问题

> ID：10890247
> 
> 赞同：3
> 
> 时间：2012-06-05T00:47:13.713
> 
> 标签：linux, networking, tcp

最近我有一些端口保持在**FIN_WAIT_1**状态，直到两天后。目标端口由一个服务器进程使用，客户端通过此端口连接到服务器进程。

情况是我们停止了服务器进程，很明显，此时某些客户端仍在与服务器连接。据我了解，服务器进程向客户端发送一个 FIN 包并等待 ACK 包返回。不幸的是，该 ACK 包似乎直到两天后才出现在服务器端。

我的问题是是否有任何配置，例如超时到**FIN_WAIT_1**状态。我浏览了互联网搜索，但在那里一无所获。请帮忙告诉我你是否有这方面的经验。

顺便说一句，当 FIN_WAIT_1 发生在端口上时，服务器进程已经消失了。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T03:48:57.990

该`FIN_WAIT_1`状态正在等待`ACK`该`FIN`端刚刚发送的对等方。该传出`FIN`受制于所有正常的 TCP 重试和超时处理，因此如果另一端完全消失并且从未响应，则 TCP 应该将连接超时并重新设置它是理所当然的。这就是你找不到特定`FIN_WAIT_1`超时的原因：没有，只有普通的 TCP 写定时器。

这一切都应该在十分钟左右的时间内发生。

如果状态持续存在并导致其他问题，我认为您别无选择，只能重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T18:56:26.013

你确定这是卡在 FIN_WAIT 中的相同端口吗？这可能是由于负载平衡器或 NAT 设备在不活动超时后丢弃连接并静默丢弃任何进一步的数据包，这是某些设备的默认行为。

# php - 解决“找不到类”错误

> ID：10890249
> 
> 赞同：-1
> 
> 时间：2012-06-05T00:47:29.063
> 
> 标签：php, whois

任何人都告诉我为什么我会收到错误“找不到类‘Whois’”。这与线路有关，`$whois = new Whois();`但我不确定是什么。

```
<form method="post" action="">
  <div style="margin:auto;width:300px;">
  <label for="domain name">Domain Check:</label><br />
  <input type="text" name="domain" /><br /><br />
  <input type="submit" />
</form>
<br />
<?php
if (isset($_REQUEST['domain'])) { // check to see if form has been submitted
function getwhois($domain, $tld)
{
require_once("whois.class.php");

$whois = new Whois();

if( !$whois->ValidDomain($domain.'.'.$tld) ){
    return 'Sorry, the domain is not valid or not supported.';
    }

if( $whois->Lookup($domain.'.'.$tld) ){
    return $whois->GetData(1);
    }else{
    return 'Sorry, an error occurred.';
    }
}

$domain = trim($_REQUEST['domain']);

$dot = strpos($domain, '.');
$sld = substr($domain, 0, $dot);
$tld = substr($domain, $dot+1);

$whois = getwhois($sld, $tld);

echo "

";
echo $whois;
echo "
";
}
?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:48:38.420

我认为您应该将 移到`require_once`文件的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:50:37.940

确保从正确的目录加载它

```
require_once("whois.class.php"); 
```

# java - 为什么 getResource 会给出不同的结果？

> ID：10890253
> 
> 赞同：0
> 
> 时间：2012-06-05T00:48:36.113
> 
> 标签：java, getresource

Bellow 是我的代码，当我在 IDE 中运行这些代码时，它运行良好，但是当我在 dos 命令中运行时，它给了我一个 NullPointException 错误。请帮我一把。谢谢！

```
 //first get the classLoader
    ClassLoader classLoader = TestMainPath.class.getClassLoader();
    //show message
    System.out.println("loader=" + classLoader);
    //
    URL r = classLoader.getResource("TestMainPath/TestMainPath.class");
    System.out.println("r=" + r);
    String mainPath =r.getPath();
    System.out.println(mainPath);
    File sf = new File(mainPath + "/main/newfile");
    System.out.println(sf.getPath());
    System.out.println(sf.exists()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T01:05:11.473

Your problem is only because your IDE does not launch the app as you do. In your case the difference is on the classpath. Check how your IDE launch your program, which classpath it uses. Verify also that your class file is really where you expect it to be when you launch from the command line.

# ios - 在 iOS 上后台换站

> ID：10890258
> 
> 赞同：0
> 
> 时间：2012-06-05T00:49:16.597
> 
> 标签：ios, audio-streaming

我想知道我是否在 iPhone 上安装了广播流媒体应用程序，是否可以让应用程序在后台运行时自动切换到新电台？到目前为止，我听说苹果不允许在后台执行任何操作。只有一些处于特定状态的事件被允许运行，直到这些状态结束。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:54:18.133

根据[iOS 开发人员文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，这是可能的。

> 在 iOS 4 及更高版本中，多任务处理允许应用程序在用户切换到另一个应用程序后继续在后台运行，同时仍尽可能延长电池寿命。大多数应用程序在进入后台后不久就会进入暂停状态。只有向用户提供重要服务的应用程序才能继续运行任意时间。
> 
> 鼓励您尽可能避免在后台执行并让您的应用程序暂停。如果您发现需要执行后台任务，以下是一些合适的指导原则：
> 
> 您需要至少实现几种特定用户服务中的一种。
> 您需要执行一个有限长度的任务。
> 当您的应用程序未运行时，您需要使用通知来提醒用户一些相关信息。
> 系统会尽可能长时间地将暂停的应用程序保留在内存中，仅当可用内存量变低时才将其删除。保留在内存中意味着您的应用程序的后续启动要快得多。同时，暂停意味着您的应用不会很快耗尽设备的电池。

接着...

> 对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，只允许特定类型的应用程序在后台运行：
> 
> 在后台向用户播放可听内容的应用程序，例如音乐播放器应用程序 让用户随时了解其位置的应用程序，例如导航应用
> 程序 支持互联网协议语音 (VoIP)的
> 应用程序 报亭应用程序下载和处理新内容
> 从外部附件接收定期更新的
> 应用程序 实现这些服务的应用程序必须声明它们支持的服务并使用系统框架来实现这些服务的相关方面。声明服务让系统知道您使用了哪些服务，但在某些情况下，实际上是系统框架阻止了您的应用程序被挂起。

和

> 对某些类型的后台执行的支持必须由使用它们的应用程序提前声明。应用程序使用其 Info.plist 文件声明对服务的支持。将 UIBackgroundModes 键添加到 Info.plist 文件中，并将其值设置为包含以下一个或多个字符串的数组：
> 
> 音频——应用程序在后台向用户播放可听内容。（此内容包括使用 AirPlay 的流式音频或视频内容。） 位置 - 该应用程序让用户随时了解他们的位置，即使它在后台运行时也是如此。
> voip——该应用程序使用户能够使用 Internet 连接拨打电话。
> newsstand-content - 该应用程序是一个 Newsstand 应用程序，可在后台下载和处理杂志或报纸内容。
> external-accessory - 该应用程序与需要通过外部附件框架定期提供更新的硬件附件配合使用。
> bluetooth-central — 该应用程序与需要通过 CoreBluetooth 框架定期提供更新的蓝牙配件配合使用。
> 前面的每个值都让系统知道您的应用程序应该在适当的时间被唤醒以响应相关事件。例如，一个开始播放音乐然后移动到后台的应用程序仍然需要执行时间来填充音频输出缓冲区。包含音频键会告诉系统框架它们应该继续播放并以适当的时间间隔对应用程序进行必要的回调。如果应用程序不包含此键，则当应用程序移至后台时，应用程序正在播放的任何音频都会停止。

和

> 连续播放音频的应用程序（即使应用程序在后台运行）可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（具有值音频）来注册为后台音频应用程序。包含此密钥的应用程序必须在后台向用户播放有声内容。
> 
> 背景音频应用程序的典型示例包括：
> 
> 音乐播放器应用程序 支持通过 AirPlay VoIP 应用程序
> 播放音频或视频的应用程序 当 UIBackgroundModes 键包含音频值时，系统的媒体框架会自动阻止相应的应用程序在移动到后台时被挂起。只要它正在播放音频或视频内容，应用程序就会继续在后台运行。但是，如果应用程序停止播放音频或视频，系统将暂停它。
> 
> 您可以使用任何系统音频框架来启动背景音频的播放，并且使用这些框架的过程不变。（对于通过 AirPlay 播放视频，您必须使用 Media Player 框架来呈现您的视频。）因为您的应用在播放媒体文件时不会暂停，所以当您的应用在后台时，回调正常运行。但是，在您的回调中，您应该只做为回放提供数据所必需的工作。例如，流式音频应用程序需要从其服务器下载音乐流数据并将当前音频样本推送出去以进行播放。您不应执行任何与播放无关的无关任务。
> 
> 由于可能有多个应用程序支持音频，因此系统会限制哪些应用程序可以在任何给定时间播放音频。前台应用程序始终有权播放音频。此外，根据其音频会话对象的配置，还可能允许一个或多个后台应用程序播放一些音频内容。您应该始终适当地配置应用程序的音频会话对象，并仔细使用系统框架来处理中断和其他类型的音频相关通知。有关如何为后台执行配置音频会话对象的信息，请参阅音频会话编程指南。

要阅读完整的文档，请转到答案开头的链接并转到标题`Background Execution and Multitasking`。记得检查安装应用程序的设备是否有多任务处理；只有 iOS4+ 设备有它。

# odbc - 如果文本列中的数据超过 32768 个字符 (2^15)，则 Sybase 15.5 ODBC 驱动程序无法检索文本列中的全部内容

> ID：10890259
> 
> 赞同：0
> 
> 时间：2012-06-05T00:49:24.053
> 
> 标签：odbc, sap-ase

我将 XML 内容作为字符串存储在`text`列中，但升级到 Sybase 驱动程序 15.5 后，我无法检索完整的字符串。它总是被截断为 32768 个字符。

我已经尝试过[这里](https://stackoverflow.com/questions/10023730/retrieve-xml-data-from-text-column)`FOR XML AUTO, TYPE`建议的关键字，但它对我不起作用。

我正在使用的驱动程序是：

> Adaptive Server 企业版 15.05.00.1

服务器版本为：

> Adaptive Server Enterprise/15.0.3/EBF 17163 ESD#3/P/Linux Intel/Linux 2.6.9-42.ELsmp i686/ase1503/2726/32-bit/FBO/Fri Feb 5 04:45:36 2010'

有谁知道这是否是驱动程序错误？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:29:42.927

解决方案是在运行查询之前设置 textsize

```
set TEXTSIZE  2147483647 
```

2147483647 是 2^ 31 - 1

# python - 如何用正则表达式匹配句子中的表情符号

> ID：10890261
> 
> 赞同：1
> 
> 时间：2012-06-05T00:49:48.713
> 
> 标签：python, regex, emoticons

我正在使用 Python 来处理微博（中国类似推特的服务）句子。句子中有一些表情符号，对应的unicode是`\ue317`etc。为了处理句子，我需要用gbk对句子进行编码，见下图：

```
 string1_gbk = string1.decode('utf-8').encode('gb2312') 
```

会有一个`UnicodeEncodeError:'gbk' codec can't encode character u'\ue317'`

我试过`\\ue[0-9a-zA-Z]{3}`了，但没有用。我如何在句子中匹配这些表情符号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T01:22:26.597

`'\ue317'`不是的子字符串`u"asdasd \ue317 asad"`- 它是人类可读的 unicode 字符表示，并且不能被正则表达式匹配。正则表达式与`repr(u'\ue317')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T00:55:28.180

尝试

```
string1_gbk = string1.decode('utf-8').encode('gb2312', 'replace') 
```

应该输出吗？而不是那些表情符号。

[Python 文档](http://docs.python.org/library/stdtypes.html#str.encode)- [Python Wiki](http://wiki.python.org/moin/UnicodeEncodeError)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T00:57:51.600

这可能是因为反斜杠是正则表达式语法中的特殊转义字符。以下对我有用：

```
>>> test_str = 'blah blah blah \ue317 blah blah \ueaa2 blah ue317'
>>> re.findall(r'\\ue[0-9A-Za-z]{3}', test_str)
['\\ue317', '\\ueaa2'] 
```

请注意，它不会错误地匹配`ue317`末尾没有反斜杠的末尾。显然，`re.sub()`如果您希望替换那些字符串，请使用。

# ios - GDataServiceGoogleDocs

> ID：10890262
> 
> 赞同：2
> 
> 时间：2012-06-05T00:49:56.893
> 
> 标签：ios, xcode, google-docs, gdata-api, google-docs-api

我目前正在将 GData 与 Objective-C 结合起来，特别是我正在尝试使用 Google Docs API。但是，我在编译时遇到了以下问题：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_GDataServiceGoogleDocs", referenced from:
      objc-class-ref in GDataViewController.o
  "_OBJC_CLASS_$_GDataQueryDocs", referenced from:
      objc-class-ref in GDataViewController.o
ld: symbol(s) not found for architecture i386 
```

我搜索了很多地方，但答案很少。特别是解决方案似乎与它是否以 32/64 位编译有关，正如这篇文章所暗示的那样：[Undefined symbols: "_OBJC_CLASS_$_GDataServiceGoogleDocs"](https://groups.google.com/group/gdata-objectivec-client/browse_thread/thread/eb67c2b2edc3e565/3a352cdab90bba8f)。但是，我并不完全了解如何纠正这个问题，因为这是我第一次遇到这个问题，但我已经检查了 PROJECT 和 TARGETS 的构建设置下的架构都是

> 标准（armv7） - $（ARCHS_STANDARD_32_BIT）

多谢！

ps 我正在用 iOS5.1 和 Xcode 4.3.2 编译它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:36:38.383

您如何将 Google Docs API 整合到您的应用程序中？作为源还是作为静态库？

“特别是解决方案似乎与它是否以 32/64 位编译有关” - 您的问题与此无关，因为您正在为 iOS 构建应用程序

# javascript - 如何在 JavaScript 中调用自执行函数？

> ID：10890263
> 
> 赞同：14
> 
> 时间：2012-06-05T00:50:00.833
> 
> 标签：javascript

当我有一些代码需要多次执行时，我将其包装在一个函数中，这样我就不必重复自己了。有时还需要在页面加载时执行此代码。现在我这样做：

```
function foo() {
   alert('hello');
}

foo(); 
```

我宁愿这样做：

```
(function foo() {
   alert('hello');
})(); 
```

问题是，这只会在页面加载时执行，但如果我尝试在随后的时间调用它`foo()`，它将无法正常工作。

我猜这是一个范围问题，但有没有办法让自执行函数在稍后被调用时工作？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-05T00:56:02.850

如果你的函数不依赖于返回值，你可以这样做......

```
var foo = (function bar() {
   alert('hello');
   return bar;
})();   // hello

foo();  // hello 
```

这使用命名函数表达式中的局部引用`bar`将函数返回给外部`foo`变量。

* * *

或者即使是这样，您也可以使返回值有条件...

```
var foo = (function bar() {
   alert('hello');
   return foo ? "some other value" : bar;
})();   // hello

alert( foo() );  // hello --- some other value 
```

或者只是手动分配给变量而不是返回......

```
var foo; 
(function bar() {
   alert('hello');
   foo = bar;
})();   // hello

foo();  // hello 
```

* * *

正如[@RobG](https://stackoverflow.com/users/257182/robg)所指出的，某些版本的 IE 会将标识符泄漏到封闭的变量范围中。该标识符将引用您创建的函数的副本。为了使您的 NFE IE 安全（r），您可以取消该引用。

```
bar = null; 
```

请注意，标识符仍会在作用域链上隐藏具有相同名称的标识符。无效化无济于事，而且局部变量不能被删除，所以明智地选择 NFE 名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T01:09:08.390

要从外部调用，该函数必须从外部可见。理想情况下，您应该让自执行函数将其注入到一些传入的上下文中（在这种情况下，`this`，它引用全局上下文）：

```
(function(context) {
  var foo = function() {
    alert('hello');
  };
  foo();
  context.foo = foo;
})(this);

...

foo(); 
```

更多有趣的模式可以在[这里](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)找到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T01:29:15.890

如果`foo()`打算成为一个全局函数，即 的属性`window`，您可以这样做：

```
(window.foo = function() {
   alert('hello');
})();

// at some later time
foo(); 
```

第一组括号中的表达式执行 create 的赋值`foo`，但也计算为函数，因此您可以`()`在最后立即调用它。

即使函数应该返回一个值，这种模式也有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-29T09:07:37.117

第二个函数`foo`是函数定义表达式。

在函数定义表达式中，您只能根据“Javascript 权威指南”在函数本身内调用具有名称的函数：

> **对于函数定义表达式，名称是可选的：如果存在，则名称仅在函数本身的主体内**引用函数对象。

它可以在递归函数定义表达式中使用。

例如：

```
var f = function factorial(n) {
    if (n == 0 || n == 1)
        return 1;
    else
        return n * factorial(n-1);
} 
```

# osgi - 如何在osgi蓝图xml中指定枚举？

> ID：10890265
> 
> 赞同：2
> 
> 时间：2012-06-05T00:50:13.523
> 
> 标签：osgi, blueprint-osgi

我正在尝试将依赖注入与 OSGI 蓝图一起使用。
我想通过在 XML DSL 中指定枚举对象来构造它。

在 Spring 上下文 XML 中，这看起来像 -

```
 <bean id="MyTestEnum" class="com.foo.TestEnum"
        factory-method="valueOf">
        <constructor-arg>
            <value>TYPEA</value>
        </constructor-arg>
    </bean> 
```

如何在 OSGI Blueprint XML 文件中实现这一点？我在标签处看到架构验证错误..

感谢任何指针！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T02:26:31.090

尝试将`constructor-arg`块替换为

```
 <argument value="TYPEA"/> 
```

# php - 如何在 Drupal 7 中管理预告片及其图像字段？

> ID：10890273
> 
> 赞同：4
> 
> 时间：2012-06-05T00:51:33.897
> 
> 标签：php, drupal, drupal-7

我是 Drupal 的新手，遇到了一些非常简单的问题。我一直在寻找解决方案一段时间，但在其他任何地方都没有取得明显的成功，所以我依赖你们......

1.  **如何在节点的预告片中为图像设置特定大小？**
2.  **是否可以创建一个预告片，其中出现的图像类似于实际图像的裁剪中心**（我希望在整个预告片中都有相同尺寸的图片，而打开内容可以显示原始尺寸和比例的实际图像)?
3.  **如何将预告片与节点本身分开设置样式，因此内容可能会以不同的方式放置**（预告片的图像可能出现在文本部分下方，而打开节点会将其显示在标题和文本上方）

我将在这里感谢与我的任何问题相关的任何帮助和建议！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T07:22:47.280

转到`admin/structure/types/manage/[CONTENT_TYPE]/display/teaser`管理所有字段的显示。

要配置图像的显示方式，请单击右侧的齿轮图标，选择所需的图像样式，然后单击更新。（不要忘记点击保存）。

要查看可用的图像样式并对其进行修改，请转到`admin/config/media/image-styles`

要添加新的图像样式，请转到`admin/config/media/image-styles/add`

希望这行得通……穆罕默德。

# android - 使用 TTS 通过 Intent 从 BARCODE 扫描仪说出字符串时，Android 本地发生变化

> ID：10890275
> 
> 赞同：0
> 
> 时间：2012-06-05T00:51:39.417
> 
> 标签：android, android-intent, locale, barcode, text-to-speech

我正在开发一个应用程序，该应用程序通过意图（条形码扫描仪）使用外部应用程序扫描条形码。收到扫描结果后，我使用此结果在数据库中查找文本，该文本可以是英语或法语，然后我通过另一个意图将其发送到另一个活动，该活动将通过 TTS 进行声音合成。我的应用程序应该支持法语和英语。我设法通过这种方式玩布尔值来做到这一点：

```
private String localelang = Locale.getDefault().getISO3Language();
private boolean is_fr = localelang.equalsIgnoreCase("fra"); 
```

如果当地人不是法国人，我的目标是强制我的应用程序强制 TTS 说英语口音（所以他们可以是日本人，或者我的 TTS 应该保持英语口音）。

我为设备选择了法语或英语以外的语言，问题就来了。因为在调用条形码扫描仪后，我的本地人似乎改变了一次以匹配设备，因为条形码扫描仪的这种外部意图，无论我尝试我的 TTS 还是设备的口音。

我知道这看起来很复杂，但我的代码太长而无法发送消息。这是我一直在尝试但徒劳的很多解决方案：

```
 public void onInit(int status) {       
        String synthesis = Aparler.toString();
    if (!is_fr){
        vocal.setLanguage(Locale.US);               
        vocal.speak( synthesis, TextToSpeech.QUEUE_FLUSH,null);
    }
    else if(is_fr){
        vocal.setLanguage(Locale.FRANCE);           
        vocal.speak( synthesis, TextToSpeech.QUEUE_FLUSH,null);
    } 
```

当我省略条形码扫描仪时，一切正常，我确信通过 intnent 调用另一个应用程序的事实是对此负责的。我什至无法调试它，因为 AVD 不支持相机扫描......这真的很令人沮丧......感谢您帮助我并原谅我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T02:13:18.790

我发现有一个选项是文本到规范设置，它覆盖了我的语言选择，我禁用了它，一切都像魅力一样！

# java - 服务器发送事件以更新 Java EE/jetty 上的 Emberjs 应用程序中的集合

> ID：10890279
> 
> 赞同：0
> 
> 时间：2012-06-05T00:52:14.350
> 
> 标签：java, spring-mvc, ember.js, server-push, servlet-3.0

该应用程序有一个小部件，其中项目列表根据服务器端的某些事件不断变化。服务器必须将这些更改推送到浏览器。

该应用程序使用 emberjs 作为 javascript mvc 框架，并且我已经设法按照这个股票代码示例实现了集合的基本更新。ttp://www.xeqtit.com/blog/2012/04/creating-a-stock-ticker-table-using-ember-js。

我正在尝试用对服务器的实际 REST 调用替换以下存根/模拟调用。

```
 setInterval(function() {
           Quotes.quotesController.processChange({
                  "code": "AAPL",
                   "value": (119*Math.random()).toFixed(2),
                   "bid": (120*Math.random()).toFixed(2),
                   "offer": (118*Math.random()).toFixed(2)
         });
      }, 3*1000); 
```

替换为，

```
 var source = new EventSource('data/quotes.json');

       source.onmessage = function(event){
            var data = event.data;
            Quotes.quotesController.processChange(event.data);
          }; 
```

- 我应该编写基于 Servlet 3.0 规范中的异步支持的 servlet 吗？-将服务器端的spring mvc与emberjs之类的客户端mvc框架集成起来是否理想？- 是否可以在码头服务器上仅使用 jersey/RESTlet 库来实现服务器发送事件/异步回调支持？

这是一个 java ee 应用程序，尚未做出服务器/框架的选择。我是 emberjs、spring mvc 和 comet 应用程序的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:26:53.007

使用 ember-data 存储您的报价并通过 WebSocket 提供它们怎么样？

您说没有做出选择：您是否考虑过使用 RoR 作为服务器端框架？到今天为止，它是对 ember 数据最友好的实现（以及 active-model-serializers）。用这个堆栈编写服务器端只是小菜一碟。

# tsql - [,...n] 在 T-SQL BNF 中是什么意思？

> ID：10890281
> 
> 赞同：1
> 
> 时间：2012-06-05T00:52:48.523
> 
> 标签：tsql, bnf

如果你看这个页面[http://msdn.microsoft.com/en-us/library/ms189499](http://msdn.microsoft.com/en-us/library/ms189499)是什么`[,...n]`意思？我怀疑它只是微软使用序列`{ }`符号的替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:58:33.037

那些 MSDN 页面上语法块正上方的那个[漂亮的大链接列出了他们的“约定”。](http://msdn.microsoft.com/en-us/library/ms177563)对于`[,...n]`，它有这样的说法：

> 表示前一项可以重复n次。出现的地方用逗号分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:54:35.900

这意味着可选的 N 次重复次数。

方括号表示语句的可选部分。因此，例如，您可以有一个`SELECT`没有`ORDER BY`子句的语句。

# database-design - 维度设计：不确定某些类型数据的事实与维度

> ID：10890285
> 
> 赞同：1
> 
> 时间：2012-06-05T00:53:33.710
> 
> 标签：database-design, star-schema, dimensional-modeling, fact-table

对于我正在开发的星型模式，我在决定特定维度中应该包含哪些内容以及事实表中应该包含哪些内容时遇到了一些麻烦。

例如，假设该项目正在为一家物业管理公司跟踪房屋。各种日期、承租人、合同等维度都相当简单。对于房子，无论数据位于何处，我们都希望跟踪当前所有者、当前租户、当前租赁合同，以及邻域、地址、当前租金价格、当前市场价值等信息. 请注意，所有者、租户和合同本身就是维度（邻居和地址也可能是维度，但我不太关心这些）。

许多关于房屋的数据将用于过滤查询，或用于多维数据集的行和列标题。其中一些仅作为辅助信息需要，逐个查看，而不是汇总。

鉴于数据，以及我需要用它做什么，我有（至少）三个选择：

*   DimHouse：房子表是一个维度，有很多属性，在事实表中可能看起来更好，但是由于它们是用于浏览和过滤的，所以它们需要在这里。当前租户等属性将需要雪花/支腿。
*   FactHouse：拥有与其他事实表连接的房屋信息的累积快照，可能使用修剪过的 DimHouse 作为桥梁。这对我来说似乎很奇怪，但它把看似事实的东西放在了事实表中。
    *   将当前所有者、当前承租人等放入相关事实表中，然后将这些事实作为所有者/承租人/等保持最新。改变（也很奇怪，但会让我们保持在星型模式的土地上）。

所以我一直在走维度路线。它让我有些心痛，但它达到了目标。我只想知道是否有更好的方法来组织数据。我不介意冗余（例如具有相似数据的事实表和维度表）或雪花，如果它们有意义并且是做事的最佳方式（对于“最佳”值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:28:12.073

关于星型模式的事情是，它是专门为使某些类型的查询变得简单和高效而设计的。

如果您发现某些类型的查询由于什么是维度和什么是事实而没有得到星标的帮助，那么您可以围绕维度和事实的替代视图构建额外的星标，以便更轻松地支持您要执行的查询。

你保持你的事务数据库规范化。当涉及到您的 BI 数据仓库时，您需要让您的冗余焦虑去避免心脏灼伤。

# comparison - 如何比较两个 ISO 标准指纹模板？

> ID：10890295
> 
> 赞同：3
> 
> 时间：2012-06-05T00:55:17.890
> 
> 标签：comparison, fingerprint, iso-19794

我找到了*Digital persona Finger FX*开源项目，它允许我提供指纹图像（位图）并以*ISO/IEC 19794-2:2005*格式保存指纹细节数据。

[https://github.com/FingerJetFXOSE/FingerJetFXOSE.git](https://github.com/FingerJetFXOSE/FingerJetFXOSE.git)

如何比较两个这样的 ISO/IEC 19794-2:2005 模板？

任何人都可以建议任何示例源代码或文章吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:19:07.417

[SourceAFIS](http://sourceforge.net/projects/sourceafis/)部分实现了 ISO/IEC 19794-2，并附带了一些 .NET 和 Java 中的示例（实验性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-22T18:10:07.603

用于比较 ISO 模板的代码不公开。您需要阅读[ISO/IEC 19794-2](http://camsunit.com/application/javascript-based-fingerprint-scanner-for-website-authentication-and-attendance.html#compare-fingerprint) 文档并实施您自己的文档。我们尝试过，但最终得到了错误的结果（例如接受错误的指纹、拒绝有效的指纹）。如果您对 3rd 方服务开放，可以尝试使用指纹匹配服务

1.  [凸轮](http://camsunit.com/application/javascript-based-fingerprint-scanner-for-website-authentication-and-attendance.html#compare-fingerprint)
2.  [M2Sys](http://www.m2sys.com)
3.  [神经技术](https://www.neurotechnology)

# mysql - 在mysql数据库中插入另一行，其值类似于前一行

> ID：10890299
> 
> 赞同：0
> 
> 时间：2012-06-05T00:55:41.003
> 
> 标签：mysql, insert

我有一张桌子，

```
BatchID Volume1 Volume2 Volume3

1        3.0      4.0     5.0
1        2.0      1.0     2.0
2        1.0      2.0     4.0 
2        1.0      1.0     1.0
2        1.0      1.0     1.0 
```

我正在尝试添加另一个具有相同volume1、volume2和volume3值的batchid 3，使其看起来像（来自batchID 2的相同记录）

```
1        3.0      4.0     5.0
1        2.0      1.0     2.0
2        1.0      2.0     4.0 
2        1.0      1.0     1.0
2        1.0      1.0     1.0
3        1.0      2.0     4.0 
3        1.0      1.0     1.0
3        1.0      1.0     1.0 
```

我写了以下查询

```
insert into table1 (BatchID,Volume1,Volume2,Volume3) Values 
(`3`,Select Volume1,Volume2,Volume3 from table1 where batchid = '2') 
```

给出一个错误。

PS我知道上面不是一个好的数据库设计。这是我实际设计的简化版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:58:21.320

您可以使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)：

```
INSERT INTO table1 (BatchID, Volume1, Volume2, Volume3)
SELECT 3, Volume1, Volume2, Volume3 FROM table1 WHERE batchid = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:01:29.867

免责声明：我尚未对此进行测试，因此请自行承担风险！

这行得通吗？

```
INSERT INTO table1 (BatchID, Volume1, Volume2, Volume3)
    SELECT 3, Volume1, Volume2, Volume3
    FROM table1
    WHERE BatchID = 2; 
```

# php - 如何使用 mySQL 内部连接 3 个表？

> ID：10890314
> 
> 赞同：0
> 
> 时间：2012-06-05T00:58:09.853
> 
> 标签：php, mysql

我已经正确加入了两个表如下

```
SELECT m.id as mid, c.id as cid FROM members m inner join companies c on m.id=c.id 
```

然后我也想添加第三张桌子，但我无法让它工作。

```
SELECT m.id as mid, c.id as cid, u.id as uid FROM members m inner join companies c on m.id=c.id inner join users u on m.id=u.id 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:02:46.250

将它们从内部连接切换到左连接。

如果您使用内部联接，并且所有三个表中都不存在结果，则它将被排除在外，看起来失败/不返回结果。

```
SELECT m.id as mid, c.id as cid, u.id as uid 
FROM members m 
left join companies c on m.id=c.id 
left join users u on m.id=u.id 
```

这应该可以解决您看到的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:07:45.730

您正在与用户和公司共享成员中的“id”列，这是您的意图吗？确实，您的表应该具有不同的 ID，并且只能连接外键。

例如

成员.id = 12345 成员.CompanyFk = 45632

公司.id = 45632

将 members.companyfk 加入到 Companies.id

# jsf - 您应该如何将页面拆分为 JSF 组件？

> ID：10890317
> 
> 赞同：2
> 
> 时间：2012-06-05T00:58:41.087
> 
> 标签：jsf, web-applications, layout

我正在开发一个 JSF Web 应用程序项目，其中外部 Web 开发人员提供所有（静态）HTML、CSS 和 JavaScript。将页面拆分为 JSF 组件以及管理未来设计更改的最佳方式是什么？

保持所有 html 页面完好无损，并根据需要添加动态内容的任何 JSF 组件是一种不好的做法吗？（这将有助于管理版本）

还是应该将整个站点拆分为原子 JSF 组件并遵循标准 JSF 准则？

您认为这样做会遇到哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:59:16.930

理想情况下，外部开发人员也可以使用 JSF，并创建可重用的复合组件。

但如果他们只提供静态 HTML 和 CSS，则必须有人手动将他们的代码转换为可重用的组件。因此，每当您需要更改与布局相关的内容时，您只需更新组件，所有客户端代码都将是最新的。此外，您可能会找到减少程式化 HTML/CSS 中常见的代码重复的方法。

*是的，您可以根据需要简单地开始添加 JSF 组件，但是如果您只有一个页面，或者如果您所做的每个*页面都需要非常不同的标记和样式，那么这可能是可行的。而且它对版本控制没有多大帮助，因为当您需要更改某些内容时，您最终将不得不更新每个页面。

我建议您好好看看[JSF 2.0 复合组件](http://www.coreservlets.com/JSF-Tutorial/jsf2/index.html#Composite-Components)，并尽可能多地使用它们。但是，有时 an[`ui:include`](http://www.coreservlets.com/JSF-Tutorial/jsf2/index.html#Templating)可能是更好的选择，因此您需要了解这[两者](https://stackoverflow.com/questions/5704620/what-is-the-difference-between-custom-components-and-composite-components)之间的区别[才能知道何时使用 which](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)。

# c# - lambda 表达式中的 if 语句和赋值

> ID：10890322
> 
> 赞同：0
> 
> 时间：2012-06-05T00:59:21.937
> 
> 标签：c#, linq, entity-framework, lambda

我有一个具有如下映射的 lambda 语句：

```
public enum Status
{
    Completed,
    InComplete,
    Ok
} 
```

询问：

```
var courses = query.Select(c => new SomeModel
      {
          Status = c.someQuery() ? Status.Completed : Status.Ok
      }); 
```

所以我希望 Status 有多个 if 语句，而不仅仅是一个三元运算。例如。

```
var courses = query.Select(c => new SomeModel
      {
          Status = if(c.someQuery())
                   { 
                       return Status.Completed;
                   }
                   else if(c.someOtherQuery())
                   {
                       return Status.InComplete;
                   }
                   else if(c.someOtherQuery1())
                   {
                       return Status.Ok;
                   }
      }); 
```

那么我该如何完成这样的事情呢？我正在使用实体框架 ORM。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T01:05:40.853

You could nest your ternary operations:

```
Status = c.someQuery() ? Status.Completed : 
    c.someOtherQuery() ? Status.InComplete : Status.Ok 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:11:09.447

你可以这样做吗？

```
myObjects
        .Where(d => d.isTrue == true && d.Value == 77)
        .Update(e => { e.Value = 1; e.isTrue = false; } ); 
```

小心使用我的 linq，它随时可能爆炸 ;-)

```
 /// <summary>
    /// Used to modify properties of an object returned from a LINQ query
    /// </summary>
    /// <typeparam name="TSource">The type of the source.</typeparam>
    /// <param name="input">The source</param>
    /// <param name="updater">The action to perform.</param>
    public static TSource Update<TSource>(this TSource input, Action<TSource> updater)
    {
        if (!updater.IsNull() && !input.IsNull())
        {
            updater(input);
        }
        return input;
    } 
```

为了充分解释这一点：

```
 public DataRow DoSomething(DataRow dataRow)
    {
        //DoSomething
        return dataRow;
    }

    var query = from dataRow in myDataTable.Rows.Cast<DataRow>()
                where
                    Double.TryParse(dataRow["Distance"].ToString(), out distance)
                    && distance > (11) && distance <= 99
                select dataRow.Update(f => DoSomething(f)); 
```

因此，您可以运行一个方法（someOtherQuery）并在您的 LINQ 中返回一个枚举，而无需嵌套（这是 baaaaaaaad...恕我直言）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T01:19:13.057

由于该逻辑无法转换为 T-SQL 语句，因此您需要在内存中执行此操作。我要做的是将该逻辑添加到您的模型中：

```
var courses = query.ToList().Select(c => new SomeModel
  {
      Status = c.GetStatus();
  });

public class SomeModel 
{
   ...

   public Status GetStatus()
   {
      if(this.someQuery())
      { 
          return Status.Completed;
      }
      else if(this.someOtherQuery())
      {
           return Status.InComplete;
      }
      else if(this.someOtherQuery1())
      {
          return Status.Ok;
      }
      ...
   }
} 
```

请注意，调用`ToList()`将使用 EntityFramework 执行查询，`Select`并将针对对象列表执行。

# jaxb - 将 SAX 与 JAXBContext 一起使用

> ID：10890323
> 
> 赞同：1
> 
> 时间：2012-06-05T00:59:24.097
> 
> 标签：jaxb, sax, saxparser

**我正在尝试将 XML 数据反序列化为新创建的 Java 内容树：**

我正在使用 SAX，在**src\main\java\Summaries.java**下有 Java 类，并试图简单地打印提取的文档：

```
String xmlPath = "C:\\workspace-sts-2.8.0.RELEASE\\RESTClient\\src\\main\\resources\\dailySummary.xml";
String xmlPath2 = "/dailySummary.xml";
String xmlPath3 = "/src/main/resources/dailySummary.xml";

InputStream inputStream = null;
InputSource inputSource = null;
Unmarshaller unmarshaller = null;
JAXBContext jc = null;
try 
{

// read from a file
// or try xmlPath1 or try xmlPath3
inputStream = RESTtestclient.class.getClassLoader().getResourceAsStream(xmlPath2);

inputSource = new InputSource(inputStream);
SAXParserFactory sax = SAXParserFactory.newInstance();
sax.setNamespaceAware(true);
XMLReader reader = sax.newSAXParser().getXMLReader();
SAXSource saxSource= new SAXSource(reader, inputSource);

// use jAXB
Class[] classes = new Class[1];
classes[0]= Summaries.class;
jc = JAXBContext.newInstance(classes);
unmarshaller = jc.createUnmarshaller();

@SuppressWarnings("unchecked")
**JAXBElement<Object> doc = (JAXBElement<Object>) unmarshaller.unmarshal(saxSource);**  // errors out here
sysout(doc);
} 
```

我收到这样的错误：

```
javax.xml.bind.UnmarshalException
 - with linked exception:

[org.xml.sax.SAXParseException: File "null" not found.]
     at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:315)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:505)
     at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:206)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:173)
     at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:120)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:103)
     at main.java.RESTtestclient.marshallJAXB(RESTtestclient.java:346)
    at main.java.RESTtestclient.main(RESTtestclient.java:82)

Caused by: org.xml.sax.SAXParseException: File "null" not found.
     at org.apache.xerces.framework.XMLParser.reportError(XMLParser.java:1156)
    at org.apache.xerces.readers.DefaultEntityHandler.startReadingFromDocument(DefaultEntityHandler.java:499)
     at org.apache.xerces.framework.XMLParser.parseSomeSetup(XMLParser.java:310)
    at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1034)
     at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200) 
```

有什么想法可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T09:01:52.197

您可以使用 JAXB 尝试以下方法`UnmarshallerHandler`：

```
package forum10890323;

import java.io.InputStream;
import javax.xml.bind.*;
import javax.xml.parsers.*;
import org.xml.sax.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);
        UnmarshallerHandler unmarshallerHandler = jc.createUnmarshaller().getUnmarshallerHandler();

        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        xr.setContentHandler(unmarshallerHandler);

        InputStream inputStream = Root.class.getClassLoader().getResourceAsStream("forum10890323/input.xml");
        InputSource inputSource = new InputSource(inputStream);
        xr.parse(inputSource);
        inputStream.close();

        Root root = (Root) unmarshallerHandler.getResult();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

# jpa - EJB3 Singleton with HashMap vs JPA 2nd Level @Cacheable on Entity

> ID：10890324
> 
> 赞同：0
> 
> 时间：2012-06-05T00:59:36.250
> 
> 标签：jpa, singleton, entity, ejb-3.1

我正在尝试确定使用带有 HashMap 的 EJB3 单例会话 bean 或在实体上使用带有 @Cacheable 注释的二级缓存更好的缓存方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:09:45.097

不确定你所说的单例 SessionBean 是什么意思，但听起来不太好。使用@Cacheable。

# android - ondraw 中的 while 循环

> ID：10890326
> 
> 赞同：0
> 
> 时间：2012-06-05T00:59:44.203
> 
> 标签：android, while-loop, ondraw

在我的抽奖中，它就像一个游戏。一个僵尸来了，你必须点击他，所以它会回到开始，而不是到你家。但是我想在我的游戏中添加一个暂停，所以我将把它全部包装在一个while循环中......好吧，当我在应用程序打开时尝试这个时，它只是以黑屏打开。这是我的一些代码。

```
@Override
protected void onDraw(Canvas canvas) 
{
    super.onDraw(canvas); 
    try {
        Thread.sleep(speed);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    text.setTextSize(50);
    white.setColor(Color.WHITE);
    NightGreen.setColor(Color.parseColor("#003300"));
    DayGreen.setColor(Color.parseColor("#339900"));
    clear.setARGB(0, 0, 0, 0);
    grass.set(0, canvas.getHeight()/2, canvas.getWidth(), canvas.getHeight());
    AndroidDudeHitbox.set((int) AndroidX, (int) AndroidY, (int) AndroidX + AndroidDude.getWidth(),(int)  AndroidY + AndroidDude.getHeight());
    DoorHitbox.set(canvas.getWidth()/2 + 360, canvas.getHeight()/2 - house.getHeight()/2, canvas.getWidth()/2 + 300 + house.getWidth() - 10, canvas.getHeight()/2 - house.getHeight() + house.getHeight());
    ZombieHitbox.set((int) ZombieX, (int) ZombieY, (int) ZombieX + Zombie.getWidth(), (int) ZombieY + Zombie.getHeight());
    PlayPauseHitbox.set(0, canvas.getHeight() - pause.getHeight(), pause.getWidth(), 25);

    while (PausePlay)
    {

        switch ((int) possition)
        {
        case 0:
            canvas.drawColor(Color.parseColor("#66FFFF"));
            canvas.drawBitmap(sun, (int) SunX, (int) SunY, null);
            canvas.drawRect(grass, DayGreen);
            canvas.drawBitmap(house, canvas.getWidth()/2 + 300, canvas.getHeight()/2 - house.getHeight(), null);
            canvas.drawBitmap(AndroidDude, (int) AndroidX - (AndroidDude.getWidth()/2), (int) AndroidY - (AndroidDude.getHeight()/2), null);
            text.setColor(Color.BLACK);
            if (counter < 300) canvas.drawText("QUICK! Get in your hous before Nightfall!", 160, canvas.getHeight()/2 + 100, text);
            text.setColor(Color.RED);

            //Log.d("Counter", "C: Counted " + counter);

            if (counter < 110) {SunY --; counter++;}
            if (counter >= 110 && counter < 240) {SunY --; SunX ++; counter++;} 
            if (counter >= 240 && counter < 360) {SunY -= 0.5; SunX ++; counter++;}
            if (counter >= 360 && counter < 662) {SunY -= 0.333; SunX ++; counter++;}
            if (counter >= 662 && counter < 1004) {SunY += 0.333; SunX++; counter++;}
            if (counter >= 1004 && counter < 1104) {SunY += 0.5; SunX++; counter++;}
            if (counter >= 1104 && counter < 1224) {SunY ++; SunX++; counter++;}
            if (counter >= 1224 && counter < 1345) {SunY ++; counter++;}
            if (counter >= 1345)
            {
                canvas.drawColor(Color.parseColor("#00001A"));
                canvas.drawRect(grass, NightGreen);
                canvas.drawBitmap(house, canvas.getWidth()/2 + 300, canvas.getHeight()/2 - house.getHeight(), null); 
                canvas.drawBitmap(moon, canvas.getWidth() - 300, 10, null);
                canvas.drawText("You didn't make it before night fall and you were killed", 25, canvas.getHeight()/2  + 100, text);
                canvas.drawText("by the fears of night!", canvas.getWidth()/2 - 200, canvas.getHeight()/2 + 150, text);
            }

            break;

        case 1: 
            canvas.drawColor(Color.parseColor("#00001A"));
            canvas.drawBitmap(moon, (int)MoonX, (int)MoonY, null);
            canvas.drawRect(grass, NightGreen);
            canvas.drawBitmap(houseDude, canvas.getWidth()/2 + 300, canvas.getHeight()/2 - house.getHeight(), null); 
            canvas.drawBitmap(pause, 0, canvas.getHeight() - pause.getHeight() - 25, null);

            canvas.drawBitmap(Zombie, (int) ZombieX, (int) ZombieY, null);
            if (ZombieX < canvas.getWidth()/2 + 300) ZombieX += 10;
            else 
                {
                    canvas.drawColor(Color.parseColor("#00001A"));
                    canvas.drawRect(grass, NightGreen);

                    canvas.drawText("The monsters got you!", 150, canvas.getHeight()/2  + 100, text);
                    canvas.drawBitmap(house, canvas.getWidth()/2 + 300, canvas.getHeight()/2 - house.getHeight(), null); 
                    canvas.drawBitmap(moon, canvas.getWidth() - 300, 10, null);
                    ZombieX = canvas.getWidth() + 100;
                    canvas.drawBitmap(play, 0, canvas.getHeight() - play.getHeight() - 25, null);
                }

            if (counter2 < 110) {MoonY --; counter2++;}
            if (counter2 >= 110 && counter2 < 240) {MoonY --; MoonX ++; counter2++;} 
            if (counter2 >= 240 && counter2 < 360) {MoonY -= 0.5; MoonX ++; counter2++;}
            if (counter2 >= 360 && counter2 < 662) {MoonY -= 0.333; MoonX ++; counter2++;}
            if (counter2 >= 662 && counter2 < 1004) {MoonY += 0.333; MoonX++; counter2++;}
            if (counter2 >= 1004 && counter2 < 1104) {MoonY += 0.5; MoonX++; counter2++;}
            if (counter2 >= 1104 && counter2 < 1224) {MoonY ++; MoonX++; counter2++;}
            if (counter2 >= 1224 && counter2 < 1345) {MoonY ++; counter2++;}
            if (counter2 >= 1345)
            {
                canvas.drawText("You killed " + Integer.toString(ZombiesKilled) + " Monsters!", canvas.getWidth()/2 - 100, canvas.getHeight()/2  + 100, text);
                ZombieX = canvas.getWidth() + 100;
                SunX = canvas.getWidth()/2 - sun.getWidth()/2;
                SunY = canvas.getHeight();
                canvas.drawColor(Color.parseColor("#66FFFF"));
                canvas.drawBitmap(sun, canvas.getWidth()/2, 0, null);
                canvas.drawRect(grass, DayGreen);
                canvas.drawBitmap(houseDude, canvas.getWidth()/2 + 300, canvas.getHeight()/2 - house.getHeight(), null);
                canvas.drawBitmap(play, 0, canvas.getHeight() - play.getHeight() - 25, null);
    }

            break;
        }
        canvas.drawText("Score " + Integer.toString(Score), 0, 10, white);      
        canvas.drawRect(AndroidDudeHitbox, clear);
        canvas.drawRect(DoorHitbox, clear);

        if (AndroidX > canvas.getWidth() || AndroidX < 0 || AndroidY > canvas.getHeight() || AndroidY < 0) {AndroidX = 30; AndroidY = canvas.getHeight()/2;} 

        if (DoorHitbox.contains((int) AndroidX, (int) AndroidY)) possition = 1;
        }
    invalidate();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:03:59.357

不不不。永远不要在里面耽搁`onDraw`。不要将任何游戏逻辑放入`onDraw`. 就画吧。你有一个黑屏的原因`onDraw`是没有返回给系统一个机会把你所有的绘图放到物理屏幕上。

相反，创建一个完全独立的线程来控制游戏逻辑（包括计时）。它可以将事件或可运行文件发布到 a[`Handler`](http://developer.android.com/reference/android/os/Handler.html)以更新游戏显示。

有关这个重要问题的介绍，请参阅文章[Painless Threading](http://developer.android.com/resources/articles/painless-threading.html)。

# android - 在数据库执行繁重的后台工作时冻结和应用程序的最佳方法是什么？

> ID：10890328
> 
> 赞同：6
> 
> 时间：2012-06-05T00:59:46.540
> 
> 标签：android, database, transactions

我有一个后台服务，每天一次在事务中做一些繁重的工作。如果用户恰好在这个时候启动了应用程序，我希望他们坐好直到它完成（大约 10 秒左右）。在所有活动中执行此操作的最佳方法是什么？检查服务是否在每个活动的“onResume”功能中运行？我们怎么知道它什么时候完成？我猜是本地广播...

最佳实践有人吗？

更新：我已经设法停止“onResume”，直到我的服务完成。问题是用户在那之前只看到一个空白屏幕。我在 onResume 暂停时尝试了进度对话框和常规对话框。但它们都只在 onResume 返回时才显示，这违背了目的。换句话说，进度对话框不会在调用“show()”之后立即“显示”:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:14:52.170

我会在数据库中有一个“***我正忙于处理***”标志。

并且应用程序应该检查启动，然后以一种很好的方式锁定应用程序，然后每隔 x 秒检查一次以查看标志的状态。它可以在正常处理期间执行此操作，因此每个操作在启动之前都会在本地和服务器上检查此标志。

似乎是一种简单的锁定方式。因此，您必须考虑可能使用信号量类型排列的争用（多个用户设置和取消设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:44:17.667

本地广播很好。

让您的活动询问服务是否忙，并在完成活动之前向用户显示适当的消息。

服务完成后，让它发送完成的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:50:28.240

在您的服务中使用**AsyncTask**来完成繁重的数据库工作。

并使用**Shared Preferences**保存一个标志，以通知其他活动正在进行中。当标志为真时表示工作正在进行中，当标志为假时表示工作已完成。

**做这样的事情：**

```
 private class DatabaseWork extends AsyncTask<String, Integer, Long> {

 protected void onPreExecute ()
  {
      //Set SharedPref flag = trueto notify other activities that work has been started.
   }
 protected Long doInBackground(URL... urls) {

      //Your database work
     return false;
 }

 protected void onProgressUpdate(Integer... progress) {
     //if you want to show progress to user
 }

 protected void onPostExecute(Long result) {
     //after complete your work set SharedPref flag = false to notify other activities that work has been finished.
 } 
```

}

现在您可以检查每个活动 onCreate 或 onResume 事件的 SharedPref 标志值。如果您发现 true，那么您可以显示一个进度对话框来告诉用户等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T19:52:13.260

我发现最好的方法是创建一个“加载活动”，它总是首先加载并在安全的情况下将用户发送到主屏幕。

# mysql - 将csv文件导入mysql

> ID：10890331
> 
> 赞同：0
> 
> 时间：2012-06-05T01:00:28.410
> 
> 标签：mysql

我正在尝试从仍在 excel 中的 csv 文件加载数据。到目前为止，这是我作为我的 sql 查询的语句：

```
LOAD DATA LOCAL INFILE 'C:\\Documents and Settings\\J03299\\Desktop\\TMETER.csv' 
INTO TABLE edata 
COLUMNS TERMINATED BY ',' ENCLOSED BY "" LINES TERMINATED BY '\n' 
(Year,Month,Day,MJD,xpiles,xstacks,Utilites); 
```

它导入第一行，然后忽略每隔一行，直到第 157 行？我想知道我缺少的是我的分隔符吗？以“\n”结尾的行？我的数据看起来像这样

```
2012,23,45,-0.876,3.456,768.50, 
```

不知何故，我猜它没有读取文件的结尾

有没有其他工具可以用来导入这些信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:01:49.837

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:31:17.240

解决了问题...这是我的愚蠢错误，显然我在创建表时使用年份作为主键，但年份不是唯一的。仅表示两个值，即 2012 年和 2013 年，因此它仅读取 2012 年的第一行，并且由于所有后续行都相同，因此它忽略它们直到到达 2013 年（下一个唯一主键）并将第一行带到那他们然后又放弃了。我的 LOAD 语句没有问题。感谢大家帮助我andi在创建数据库表时应该做得更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T01:07:30.037

On Windows, line termination is usually the carriage return character [U+000d](http://www.fileformat.info/info/unicode/char/000d/index.htm) followed by the linefeed character [U+000a](http://www.fileformat.info/info/unicode/char/000a/index.htm). As [the manual](http://dev.mysql.com/doc/en/load-data.html) states:

> **Note**
> 
> If you have generated the text file on a Windows system, you might have to use `LINES TERMINATED BY '\r\n'` to read the file properly, because Windows programs typically use two characters as a line terminator. Some programs, such as *`WordPad`*, might use `\r` as a line terminator when writing files. To read such files, use `LINES TERMINATED BY '\r'`.

Therefore:

```
LOAD DATA LOCAL INFILE 'C:\Documents and Settings\J03299\Desktop\TMETER.csv'
    INTO TABLE edata
    COLUMNS
        TERMINATED BY ','
        ENCLOSED BY ''
    LINES
        TERMINATED BY '\r\n'
    (Year, Month, Day, MJD, xpiles, xstacks, Utilites) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T01:48:09.190

问题是您的 SQL 查询具有：

```
LINES TERMINATED BY '\n' 
```

但是您的数据以“，”（逗号）结尾。

```
2012,23,45,-0.876,3.456,768.50, 
```

尝试将该行更改为：

```
 LINES TERMINATED BY ',\n' 
```

另一种选择是通过删除尾随逗号来清理输入数据。

# iphone - 指南针应用程序等自定义指南针校准视图

> ID：10890340
> 
> 赞同：0
> 
> 时间：2012-06-05T01:02:22.667
> 
> 标签：iphone, ios, core-location, magnetometer

![在此处输入图像描述](../Images/b7bafcb981fa3b31cc955417dd994d01.png)

我想用这种校准视图制作像本机指南针应用程序一样的指南针。
这个方法告诉你需要校准你的硬件 `- (BOOL)locationManagerShouldDisplayHeadingCalibration:(CLLocationManager *)manager`
但是如何得到校准完成的通知呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:12:39.957

您可以监控`headingAccuracy`后续位置更新，以查看您的准确性是否有所提高。这是苹果必须说的：

> 在校准完成或通过调用 dismissHeadingCalibrationDisplay 方法显式解除它之前，警报一直可见。在后一种情况下，您可以使用此方法设置计时器并在经过指定的时间后关闭界面。

因此，如果准确度增加，设置一个计时器并关闭它应该对您有用吗？

# php - 在php中将日文半角ascii转换为普通ascii

> ID：10890346
> 
> 赞同：0
> 
> 时间：2012-06-05T01:03:31.770
> 
> 标签：php, ascii

我有一个项目需要一个人将他们的邮政编码和国家输入表格。然后，该表格将采用该邮政编码并将其与国家/地区相匹配，以获取城市和州/省/县。我最初的目标市场之一是日本，他们使用半角和全角字符。我的邮政编码都是常规的 ascii 代码。这意味着任何日语全角或半角数字都需要转换为常规 ascii，但我不知道从哪里开始了解如何做到这一点。有人可以指出我正确的方向吗？文档、文章？到目前为止，谷歌对我来说毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:09:03.130

您正在寻找 mb_convert_kana：[http ://php.net/manual/en/function.mb-convert-kana.php](http://php.net/manual/en/function.mb-convert-kana.php)

# delphi - 具有异步 EnumObject (SHCONTF_ENABLE_ASYNC) 的 IShellFolder

> ID：10890361
> 
> 赞同：0
> 
> 时间：2012-06-05T01:06:46.517
> 
> 标签：delphi, asynchronous, namespaces

我在我的应用程序中有相当不正常的工作。我正在使用以下代码来枚举所有命名空间和一些根命名空间 - 例如 Nethood 的工作速度非常慢 - 加载时间超过一分钟（！！）这仅在 Win7 上发生，在旧系统上加载是可以的。

我正在使用 MustangPeak 库中的这个函数：

```
function TNamespace.EnumerateFolder(MessageWnd: HWnd; Folders, NonFolders,
  IncludeHidden: Boolean; EnumFunc: TEnumFolderCallback;
  UserData: Pointer): integer;
var
  Enum: IEnumIDList;
  Flags: Longword;
  Fetched: Longword;
  Item: PItemIDList;
  Terminate: Boolean;
  OldError: integer;
  OldWow64: Pointer;
begin
  Result := 0;

  OldError := SetErrorMode(SEM_FAILCRITICALERRORS or SEM_NOOPENFILEERRORBOX);
  try
    if Assigned(ShellFolder) then
    begin
      if Assigned(EnumFunc) then
      begin
        Terminate := False;
        Flags := 0;
        if Folders then
          Flags := Flags or SHCONTF_FOLDERS;
        if NonFolders then
          Flags := Flags or SHCONTF_NONFOLDERS;
        if IncludeHidden then
          Flags := Flags or SHCONTF_INCLUDEHIDDEN;

    // --- This is new added
    Flags := Flags or SHCONTF_ENABLE_ASYNC;

        if Valid then
        begin
          OldWow64 := Wow64RedirectDisable;
          try

            if ShellFolder.EnumObjects(MessageWnd, Flags, Enum) = NOERROR  then
            begin
              // Vista Enum is nil every once in a while
              if Assigned(Enum) then
              begin
                while (Enum.Next(1, Item, Fetched) = NOERROR) and not Terminate do
                begin
                  if EnumFunc(MessageWnd, Item, Self, UserData, Terminate) then
                   Inc(Result)
                end
              end
            end
          finally
            Wow64RedirectRevert(OldWow64)
          end
        end
      end
    end
  finally
    SetErrorMode(OldError);
  end
end; 
```

现在我在 MSDN 文档中读到，在 Win7 中支持新的异步标志，以便立即获得结果，然后在系统读取它时接收其他结果。

该标志称为 SHCONTF_ENABLE_ASYNC 并且我将它添加到我标记的地方的代码中（// --- 这是新添加的）

问题是因为我不知道如何在收到更新时捕获事件。

如何挂钩新收到的物品？是否存在系统（对象）发送到某个控件或结构等的某些事件（消息等）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:39:28.220

`SHCONTF_ENABLE_ASYNC`不会使枚举本身异步。它只是让您`IShellFolder`知道您正在监视 之外的异步更改通知`IShellFolder`，例如 with `SHChangeNotifyRegister()`，因此枚举不需要一次返回所有内容，因为更改通知将让您知道何时添加/删除/更改项目实时-时间。

# playframework-2.0 - Play 2.0 如何使用 WS.url 或 WS.WSRequest 发布 MultipartFormData

> ID：10890362
> 
> 赞同：8
> 
> 时间：2012-06-05T01:06:46.503
> 
> 标签：playframework-2.0

在 Java Http 请求中，我们可以这样做来制作多部分 HTTP POST。

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);

FileBody bin = new FileBody(new File(fileName));
StringBody comment = new StringBody("Filename: " + fileName);

MultipartEntity reqEntity = new MultipartEntity();
reqEntity.addPart("bin", bin);
reqEntity.addPart("comment", comment);
httppost.setEntity(reqEntity);

HttpResponse response = httpclient.execute(httppost);
HttpEntity resEntity = response.getEntity(); 
```

我怎样才能使用 WS.url 或 WS.WSRequest 实现相同的效果？

```
WSRequestHolder wsReq = WS.url("http//url");            
wsReq.setHeader("Content-type", "multipart/form-data"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T15:41:33.603

这很草率，绝对可以清理，但这是我为使其正常工作所做的。随意使它变得更好。

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;

import play.libs.WS;

import com.ning.http.multipart.FilePart;
import com.ning.http.multipart.MultipartRequestEntity;
import com.ning.http.multipart.Part;

ByteArrayOutputStream bos = new ByteArrayOutputStream();

// Build up the Multiparts
List<Part> parts = new ArrayList<>();
parts.add(new FilePart("file", new File(filename)));
Part[] partsA = parts.toArray(new Part[parts.size()]);

// Add it to the MultipartRequestEntity
MultipartRequestEntity reqE = new MultipartRequestEntity(partsA, null);
reqE.writeRequest(bos);
InputStream reqIS = new ByteArrayInputStream(bos.toByteArray());
WS.WSRequestHolder req = WS.url(InterchangeConfig.conflateUrl+"dataset")
    .setContentType(reqE.getContentType());
req.post(reqIS).map(...);
// or req.post(reqIS).get(); 
```

这都是使用 Play 2.0 框架中的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-27T16:49:42.890

目前唯一不依赖外部库的解决方案似乎是手动创建多部分表单数据请求。这是一个如何完成的示例，使用`play.libs.WS.url`：

```
WSRequestHolder wsRequestHolder = WS.url(URL);

String boundary = "--XYZ123--";

String body = "";
for (String key : data.keySet()) {
  body += "--" + boundary + "\r\n"
       + "Content-Disposition: form-data; name=\""
       + key + "\"\r\n\r\n"
       + data.get(key) + "\r\n";
}
body += "--" + boundary + "--";

wsRequestHolder.setHeader("Content-Type", "multipart/form-data; boundary=" + boundary);
wsRequestHolder.setHeader("Content-length", String.valueOf(body.length()));

wsRequestHolder.post(body); 
```

`data`将是一个`java.util.Map<String, String>`包含您要作为表单参数传递的所有名称/值对。`randomString`是一个随机值，使边界从请求到请求发生变化。添加二进制数据的工作方式相同。

这个[http://www.htmlcodetutorial.com/forms/form_enctype.html](http://www.htmlcodetutorial.com/forms/form_enctype.html)是了解规范的好地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-05T10:39:29.163

使用上述方法播放 2.3 的工作示例，还在上传文件时添加了 contentType。

```
public Promise<WSResponse> upload(Http.MultipartFormData.FilePart policyFilePart, String contentType) {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    List<Part> parts = new ArrayList<>();
    try {
        parts.add(new FilePart("file", policyFilePart.getFile(), contentType, null));
        parts.add(new StringPart("param1", "value1"));
        parts.add(new StringPart("param2", "value2"));
        Part[] partsA = parts.toArray(new Part[parts.size()]);

        // Add it to the multipart request entity
        MultipartRequestEntity requestEntity = new MultipartRequestEntity(partsA, new FluentCaseInsensitiveStringsMap());
        requestEntity.writeRequest(bos);
        InputStream reqIS = new ByteArrayInputStream(bos.toByteArray());
        return WS.url(baseUrl + "upload")
                .setContentType(requestEntity.getContentType())
                .post(reqIS).map(new Function<WSResponse, WSResponse>() {
                    @Override
                    public WSResponse apply(WSResponse wsResponse) throws Throwable {
                            return wsResponse;
                    }
                });
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:17:48.030

根据 play API 文档，似乎没有内置的多部分 POST 正文。

但是，可以使用该方法创建自己的多部分主体

```
post[T](body: T)(implicit wrt: Writeable[T], ct: ContentTypeOf[T]): Future[Response] 
```

使用您选择的类型 T，以及相应的 Writeable 和 ContentTypeOf 类型。

但这意味着要深入研究多部分主体如何与 HTTP 一起工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T05:11:53.470

正如 Romain Sertelon 建议的那样，您可以编写一个 Writeable 来处理这种情况。这是我写的一个：

```
package utilities

import java.io.{ByteArrayOutputStream, File}

import com.ning.http.client.FluentCaseInsensitiveStringsMap
import com.ning.http.multipart.{MultipartRequestEntity, FilePart, StringPart}
import play.api.http.HeaderNames._
import play.api.http.{ContentTypeOf, Writeable}
import play.api.mvc.{Codec, MultipartFormData}

object MultipartFormDataWriteable {

    implicit def contentTypeOf_MultipartFormData[A](implicit codec: Codec): ContentTypeOf[MultipartFormData[A]] = {
        ContentTypeOf[MultipartFormData[A]](Some("multipart/form-data; boundary=__X_PROCESS_STREET_BOUNDARY__"))
    }

    implicit def writeableOf_MultipartFormData(implicit contentType: ContentTypeOf[MultipartFormData[File]]): Writeable[MultipartFormData[File]] = {
        Writeable[MultipartFormData[File]]((formData: MultipartFormData[File]) => {

            val stringParts = formData.dataParts flatMap {
                case (key, values) => values map (new StringPart(key, _))
            }

            val fileParts = formData.files map { filePart =>
                new FilePart(filePart.key, filePart.ref, filePart.contentType getOrElse "application/octet-stream", null)
            }

            val parts = stringParts ++ fileParts

            val headers = new FluentCaseInsensitiveStringsMap().add(CONTENT_TYPE, contentType.mimeType.get)
            val entity = new MultipartRequestEntity(parts.toArray, headers)
            val outputStream = new ByteArrayOutputStream
            entity.writeRequest(outputStream)

            outputStream.toByteArray

        })(contentType)
    }

} 
```

以下是如何使用它：

```
import utilities.MultipartFormDataWriteable._

...

val url = "https://example.com"

val dataParts = Map(
    "foo" -> Seq("bar"),
    "alice" -> Seq("bob")
)

val file = new jave.io.File(... path to a jpg ...)
val fileParts = Seq(new FilePart("attachment", "foo.jpg", Some("image/jpeg"), file)

val multipartFormData = MultipartFormData(dataParts, fileParts, Seq(), Seq())

WS.url(url).post(multipartFormData) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T13:49:41.843

接受的答案不适用于 play 2.5。[play 2.6](https://www.playframework.com/documentation/2.6.x/JavaFileUpload)文档中的答案也不适用于 2.5。
以下工作正常：

```
Http.MultipartFormData.FilePart part = new Http.MultipartFormData.FilePart("fileKey",
                "abc.zip", "multipart/form-data",
                FileIO.fromFile(new File("/home/testData/abc.zip")));
List<Http.MultipartFormData.Part<Source<ByteString, ?>>> data = Arrays.asList(part);
Http.RequestBuilder requestBuilder = AuthFakeRequest.getAuthFakeRequest(routes.MyController.uploadZip()).method(POST)
                .bodyMultipart(data, mat);
Result result = route(app, requestBuilder); 
```

For`mat`和`app`对象，它们是在继承`play.test.WithApplication`类时获得的。

# plugins - 在现有 V3 地图上加载 Google 地球插件的正确方法？

> ID：10890363
> 
> 赞同：0
> 
> 时间：2012-06-05T01:06:50.920
> 
> 标签：plugins, marker, google-earth-plugin

我们有一个使用 Google Maps V3 的自定义地图，以帮助可视化我们社交媒体网站的信息，即博客、Wiki、论坛地理空间数据。

在显示地图之前，所有标记都被放入数组中，然后在每个标记上调用 setMap() 方法。

我们有一个 gui 界面，允许单独打开/关闭每组标记。

所有这些都运行良好，但下一个要求是将 google earth api 集成到地图中。

我见过 2 种方法来做到这一点，它们围绕着这些加载方法： 1) var earth = new GoogleEarth(data.map); 2) google.earth.createInstance('map_canvas', initCallback, failureCallback);

方法 1 效果最好，所有标记都会自动加载到谷歌地球中，并带有工作信息窗口等。问题 - 当界面扩展地图时没有，并且在打开/关闭图层时，谷歌地球会忽略它。您必须返回地图视图并关闭它们，然后返回地球视图才能看到变化。

方法 2 加载地图，它会展开以很好地适应地图画布，但没有点、没有用于切换视图的按钮、没有导航控件……什么都没有。

我有点迷茫，我应该从这里去哪里？有没有办法让谷歌地球插件像我当前的 V3 地图一样进行交互，而无需过多地重写现有代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:03:37.797

最好的方法是使用 Google Maps API Utility Library for Earth Integration：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/)

# python - Django - 捕获异常

> ID：10890368
> 
> 赞同：10
> 
> 时间：2012-06-05T01:07:54.263
> 
> 标签：python, django, exception

看这段代码：

```
try:
   ...  # do something
except:
   raise Exception('XYZ has gone wrong...') 
```

即使使用`DEBUG=True`，我也不希望它`raise Exception`给出那个黄页，但它确实如此。

我想通过将用户重定向到错误页面或显示错误来处理异常（在页面顶部给出 CSS 错误消息......）

我该如何处理？如果我简单地提出它，我会得到黄色的调试页面（同样，我不希望某些异常通过在 DEBUG=True 时显示调试页面来阻止站点运行）。

如何在views.py 中处理这些异常？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T01:16:54.477

你在这里有三个选择。

1.  提供[404 处理程序或 500 处理程序](https://docs.djangoproject.com/en/dev/topics/http/views/#the-404-page-not-found-view)
2.  在代码中的其他地方捕获异常并进行适当的重定向
3.  提供自定义中间件与`process_exception`实现

中间件示例：

```
class MyExceptionMiddleware(object):
    def process_exception(self, request, exception):
        if not isinstance(exception, SomeExceptionType):
            return None
        return HttpResponse('some message') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T01:16:12.107

您可以引发 404 错误或简单地将用户重定向到带有错误消息的自定义错误页面

```
from django.http import Http404
#...
def your_view(request)
    #...
    try:
        #... do something
    except:
        raise Http404
        #or
        return redirect('your-custom-error-view-name', error='error messsage') 
```

1.  [Django 404 错误](https://docs.djangoproject.com/en/dev/topics/http/views/#django.http.Http404)
2.  [Django 重定向](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-25T08:48:39.963

另一个建议是使用[Django 消息传递框架](https://docs.djangoproject.com/en/1.10/ref/contrib/messages/)来显示 flash 消息，而不是错误页面。

```
from django.contrib import messages
#...
def another_view(request):
    #...
    context = {'foo': 'bar'}
    try:
        #... some stuff here
    except SomeException as e:
        messages.add_message(request, messages.ERROR, e)

    return render(request, 'appname/another_view.html', context) 
```

然后在 Django 文档中的视图中：

```
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-24T12:31:44.207

如果您还想获得适当的回溯和消息。然后我会建议使用自定义中间件并将其添加到最后的 settings.py 中间件部分。

以下代码将仅在生产中处理异常。如果您愿意，可以删除 DEBUG 条件。

```
from django.http import HttpResponse
from django.conf import settings
import traceback

class ErrorHandlerMiddleware:

    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        response = self.get_response(request)
        return response

    def process_exception(self, request, exception):
        if not settings.DEBUG:
            if exception:
                message = "{url}\n{error}\n{tb}".format(
                    url=request.build_absolute_uri(),
                    error=repr(exception),
                    tb=traceback.format_exc()
                )
                # Do whatever with the message now
            return HttpResponse("Error processing the request.", status=500) 
```

# java - 在 Clojure/Java 中通过自定义协议隧道 HTTP

> ID：10890370
> 
> 赞同：1
> 
> 时间：2012-06-05T01:08:25.887
> 
> 标签：java, http, clojure

我想通过自定义传输协议传输 HTTP 请求流。是否有任何 Clojure 或作为后备的 Java HTTP 客户端可以让我访问底层请求流或让我过滤序列化的请求和响应？

我知道`clj-http`包装了 Apache HttpComponents，但似乎没有为 HC 内部提供很多挂钩，而且我研究了 HC 本身，但很难在工厂、接口和管理器的丛林中导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:14:41.167

您可以将请求正文作为流。为此，您需要将`:body`值设置为任何实现`InputStream`. `wrap-input-coercion`在[https://github.com/dakrone/clj-http/blob/master/src/clj_http/client.clj](https://github.com/dakrone/clj-http/blob/master/src/clj_http/client.clj)检查函数以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:14:10.103

[clj-http](https://github.com/dakrone/clj-http)包括读取和写入输入流的能力

```
(client/get "http://site.com/bigrequest.html" {:as :stream})

(client/post "http://site.com/resources"
         {:body (clojure.java.io/input-stream "/tmp/foo") :length 1000}) 
```

然后，您可以将此流包装在您选择的传输中。

# asp.net - ASP.NET SPA 作为 Silverlight 的替代品？

> ID：10890374
> 
> 赞同：2
> 
> 时间：2012-06-05T01:10:11.180
> 
> 标签：asp.net, silverlight, singlepage, single-page-application, asp.net-spa

我是一个庞大的 Silverlight 用户。
由于我开始意识到 Silverlight 迟早会消亡（据我所知，不会有 SL 6），因此我开始四处寻找替代技术。

我需要像 Silverlight 这样的流畅响应式 UI，并且我需要一种开发成本为零的技术。Silverlight 实际上非常棒，但它缺少一些关键特性（绑定类型、共享大小组等），而且由于它不会再被开发，我正在考虑其他事情。它也不是真正的多平台（最低支持 Android 和 iOS）。

**无论如何**，我研究了 ASP.NET SPA，我有点喜欢这个想法，但另一方面，我认为 HTML5/javascript 与 Silverlight 相去甚远，首先是 C#/VB.NET 作为一种语言，然后是所有相关的工具，例如 Entity-Framework、带有脚手架和验证的 WCF-RIA、SDK/Toolkit 等。

所以我的问题是，是否有任何方法可以制作将我的 Silverlight 网站转换为 HTML5+CSS3+Javascript 的生成器，以便它可以在每个平台上运行，也许可以通过将其转换为 SPA 应用程序。

您是否听说过任何涵盖此问题的现有项目？你认为它是可行的还是需要我几年的时间来开发它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:22:39.193

“有发电机吗？” - 答案是否定的，至少我没有看到任何值得的东西。好消息是，Silverlight 提供的所有服务在 SPA 中仍然非常可行。你当然可以用 HTML5/JavaScript 做很多事情，所以不要太担心。功能的最大区别在于您是否需要机器集成。由于您在浏览器中，因此您已被沙盒化。如果您需要，WPF/Silverlight 是更好的选择，尤其是因为您了解它们。

那里有SPA。我能想到的最大的是gmail和facebook。SPA 并不是什么新鲜事物，它们最近只是走在了前沿，因为技术已经发展，机会就在那里。

这应该回答你的问题。但是，如果您还有其他具体问题，请随时开火。

# php - 这些条件在php中哪个性能更好？

> ID：10890376
> 
> 赞同：-1
> 
> 时间：2012-06-05T01:10:33.680
> 
> 标签：php

我认为第一种方法具有更好的性能。

```
<?php if(cond) { $var = 'v1'; } else { $var = 'v2'; } ?> 
```

或者

```
<?php $var = (cond)?'v1':'v2'; ?> 
```

谢谢。

编辑：我的意思是服务器性能，比如浪费更少的内存......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T01:12:36.840

没有性能差异。只有可读性问题。停止如此重视这些微小的细节，而专注于更大的图景！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:24:28.423

对于那些好奇差异有多大的人：

在 G5 上进行 1000 万次迭代后，if/else 语句需要 15.987 秒，而三元语句需要 17.953 秒。

这是 1.61 超过 1000 万次迭代或 0.161 微秒的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T01:12:43.887

两者之间不会有任何明显的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T01:15:29.690

我猜它们以完全相同的速度运行，尽管第一个可能需要更多时间来解析，但幅度非常小。您的应用程序运行缓慢吗？我想你的瓶颈可能在其他地方。

# c++ - C++：将满足一定要求的二维数组的元素组成一个数组

> ID：10890377
> 
> 赞同：2
> 
> 时间：2012-06-05T01:10:57.843
> 
> 标签：c++, multidimensional-array

我是多维数组的新手，我现在正在努力解决的问题如下：我有一个“maxn”天数，以及这些天记录的最高和最低温度，我必须对此做一些事情数据。其中之一是确定温度低于和高于 0 的天数（即：记录的最低温度低于和最高温度高于）。程序必须输出发生这种事情的天数以及这些天的索引。

但是，无论我使用哪个循环以及如何使用，我都会把它搞砸，要么我得到一些完全不相关的东西，要么是一个无限循环。这是我到目前为止所拥有的：

```
void abovebelow (int n, float days[maxn][2]{

int counter=0;
float a[maxn];

for (int i=0; i<n; i++){
     for (int j=0; j<n; j++){
          if ((days[i][0]<0 && days[i][1]>0) || (days[i][1]<0 && days[i][0]>0)){
           counter++;
           i=a[j];
      cout<<counter<<" "<<a[j]<<" ";
   }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:20:45.863

你可以用简单的for循环来做到这一点。为什么要为此使用两个嵌套循环？

另外，如果条件可以修改为：

```
for (int i=0; i<n; i++) {
    if (days[i][0]*days[i][1]<0) {
        counter++;
        cout<<"Day "<<i+1<<endl;
    }
}
cout<<"Counter: "<<counter<<endl; 
```

PS：

1.我希望它是您粘贴的代码中的错字。函数声明中有语法错误。

2.在标准 C++ 中，没有 VLA（您在不知不觉中使用了特定于编译器的额外功能）。除非`maxn`是`const`（谢谢，James），否则您需要：

```
float *a = new fload[n];

//do all the stuffs here

delete[] a; 
```

# mysql - MySQL 特殊 ORDER BY

> ID：10890378
> 
> 赞同：4
> 
> 时间：2012-06-05T01:11:07.227
> 
> 标签：mysql, sql, sql-order-by

假设我有下表

```
name        | genre
---------------------
book 1      | scifi
book 2      | horror
book 3      | scifi
book 4      | romance
book 5      | horror 
```

如何按“流派”对上表进行排序`SQL`以获得以下结果。请注意顺序。它是 HSR，而不是 HR S。是否可以在不使用的情况下实现这一目标`UNION`？

```
name        | genre
------------------------
book 2      | horror
book 5      | horror
book 1      | scifi
book 3      | scifi
book 4      | romance 
```

**编辑：**只有 3 种流派。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T01:16:06.243

您可以使用字段功能自定义排序顺序

```
SELECT * FROM `table` ORDER BY FIELD(`genre`, 'horror', 'scifi', 'horror'), `name`; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:15:34.727

尝试： `select * from table order by case when genre="romance" then 1 else 0 end, genre;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T01:17:24.743

作为上述 ENUM 答案的替代方案，添加一个流派顺序表，其中包含以下内容：

```
genre_name | sort_order
-----------------------
scifi      | 2
horror     | 1
romance    | 3 
```

然后运行您的查询：

```
SELECT name, genre
FROM books JOIN genres ON books.genre = genres.genre_name
ORDER BY genres.sort_order, books.name; 
```

这具有额外的优势，允许您快速轻松地添加流派，而无需更改代码中的硬编码 ENUM。不过，无论哪种方式都应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T01:14:41.000

1.  您可以将您的流派列定义为一种`ENUM`类型。如[手册](http://dev.mysql.com/doc/refman/5.5/en/enum.html)所述：

    > `ENUM`值根据它们的索引号进行排序，这取决于枚举成员在列规范中列出的顺序。例如，在for`'b'`之前排序。空字符串排在非空字符串之前，NULL 值排在所有其他枚举值之前。`'a'``ENUM('b', 'a')`

    所以：

    ```
    ALTER TABLE my_table MODIFY genre ENUM('horror', 'scifi', 'romance'); 
    ```

    您的查询将是：

    ```
    SELECT * FROM my_table ORDER BY genre ASC; 
    ```

2.  或者，您可以存储一个流派表及其在排序中的位置，并将您的查询与该表连接：

    ```
    CREATE TABLE genres (genre VARCHAR(10) NOT NULL PRIMARY KEY, position INT);
    INSERT INTO genres VALUES ('horror', 1), ('scifi', 2), ('romance', 3);
    ALTER TABLE my_table ADD FOREIGN KEY (genre) REFERENCES genres (genre); 
    ```

    您的查询将是：

    ```
    SELECT   my_table.*
    FROM     my_table JOIN genres USING (genre)
    ORDER BY genres.position ASC; 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T01:18:11.813

首先，该表非常低效（冗余数据） - 所以只需创建一个包含所有类型的新表，并使用外键。

其次，在流派表中添加一列，并根据排序中所需的位置为每个流派分配一个唯一编号 - 然后从现在开始按该列对数据进行排序，完成（并且可以轻松更改排序顺序任何时候）。

# windows - git 认为文件已更改

> ID：10890380
> 
> 赞同：5
> 
> 时间：2012-06-05T01:11:15.427
> 
> 标签：windows, git

我在一台机器上对一个项目做了一些工作，然后推送到 github，在另一台机器上，克隆并做了一些工作，然后推送。然后我回到第一台机器并做了一个`pull`. 现在第一台机器认为最初在项目中的所有文件都已更改。我试过了

```
git checkout -f -- 
```

和

```
git rm --cached -r .
git checkout -f 
```

甚至尝试过

```
git stash 
```

但无论我做什么，都会`git status`告诉我这些文件已被更改。我如何让它停止？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T08:10:51.527

这似乎是一个行尾/autocrlf 问题。我意识到解决这个问题的一个很好的技巧（如果你的索引无关紧要的话）是：

```
$ git add -u .
$ git reset . 
```

# java - 在 Play 2.0 FakeRequest 中测试 MultipartFormData

> ID：10890381
> 
> 赞同：9
> 
> 时间：2012-06-05T01:11:22.697
> 
> 标签：java, playframework-2.0

我正在尝试为 Play 2 控制器创建一个功能测试，该控制器将多部分表单数据作为输入。FakeRequest 目前没有方法支持多部分表单 POST。还有什么其他方法可以测试这个控制器？

```
Map<String, Object> map = new HashMap<String, Object>();
map.put("param1", "test-1");
map.put("param2", "test-2");
map.put("file", file)
Result result = routeAndCall(fakeRequest(POST, "/register").withFormUrlEncodedBody(map));// NO SUCH METHOD 
```

编辑：这是我为测试多部分所做的解决方法。

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://localhost:3333/blobupload");

    FileBody imageFile = new FileBody(new File("test/resources/test-1.jpg"));
    StringBody guid1 = null;
    StringBody guid2 = null;
    try {
        guid1 = new StringBody("GUID-1");

    } catch (UnsupportedEncodingException e1) {
        e1.printStackTrace();
    }

    MultipartEntity reqEntity = new MultipartEntity();
    reqEntity.addPart("key1", imageFile);
    reqEntity.addPart("key2", guid1);

    httppost.setEntity(reqEntity);

    HttpResponse response;
    try {
        response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();

        assertThat(response.getStatusLine().getStatusCode()).isEqualTo(200);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
} catch (IOException e) {
        e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:28:35.800

您应该使用 callAction 来使用 withFormUrlEncodedBody

```
@Test
public void testMyAction() {
    running(fakeApplication(), new Runnable() {
        public void run() {                
            Map<String,String> data = new HashMap<String, Object>();
            data.put("param1", "test-1");
            data.put("param2", "test-2");
            data.put("file", file);

            Result result = callAction(
                controllers.whatever.action(),
                fakeRequest().withFormUrlEncodedBody(data)
            )
            ...
         }
     }
} 
```

我仅将 Scala api 用于 Play Framework 2，但我认为您不能使用 withFormUrlEncodedBody 测试多部分表单。

你可以在 Scala 中这样做：

```
import play.api.libs.Files._
import play.api.mvc.MultipartFormData._

class MyTestSpec extends Specification {

    "mytest should bla bla bla" in {
        running(FakeApplication(aditionalConfiguration = inMemoryDatabase())) {
            val data = new MultipartFormData(Map(
                ("param1" -> Seq("test-1")),
                ("param2" -> Seq("test-2"))
            ), List(
                FilePart("payload", "message", Some("Content-Type: multipart/form-data"), play.api.libs.Files.TemporaryFile(new java.io.File("/tmp/pepe.txt")))
    ), List(), List())

            val Some(result) = routeAndCall(FakeRequest(POST, "/route/action", FakeHeaders(), data))
            ...
        }
    }
} 
```

我猜你可以把它翻译成Java，对不起，我不知道如何用Java编码。

PD：对不起我的英语我还在学习

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:09:45.057

最简单的方法是使用 Scala，如下所示：

```
val formData = Map(
  "param-1" -> Seq("value-1"),
  "param-2" -> Seq("value-2")
)
val result = routeAndCall(FakeRequest(POST, "/register").copy(body=formData)) 
```

这是假设您的控制器方法是以下形式：

```
def register = Action(parse.tolerantFormUrlEncoded) { ... } 
```

如果您真的必须使用 Java，您将无法访问命名参数，因此必须完整调用上面的“复制”方法。还要小心导入 scala play.api.test.FakeRequest 对象，因为 Java FakeRequest 代理没有复制方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-24T21:40:38.510

这是使用 Java 中的 callAction() 为请求创建多部分/表单数据内容的解决方案。它至少在 Play 2.2.3 中有效。我的内容类型是 application/zip。您可能想要更改此设置。

```
@Test
public void callImport() throws Exception {
    File file = new File("test/yourfile.zip");
    FilePart<TemporaryFile> part = new MultipartFormData.FilePart<>(
            "file", "test/yourfile.zip",
            Scala.Option("application/zip"), new TemporaryFile(file));
    List<FilePart<TemporaryFile>> fileParts = new ArrayList<>();
    fileParts.add(part);
    scala.collection.immutable.List<FilePart<TemporaryFile>> files = scala.collection.JavaConversions
            .asScalaBuffer(fileParts).toList();
    MultipartFormData<TemporaryFile> formData = new MultipartFormData<TemporaryFile>(
            null, files, null, null);
    AnyContent anyContent = new AnyContentAsMultipartFormData(formData);

    Result result = callAction(
            controllers.routes.ref.ImportExport.import(),
            fakeRequest().withAnyContent(anyContent,
                    "multipart/form-data", "POST"));

    // Your Tests
    assertThat(status(result)).isEqualTo(OK);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-11T13:36:26.940

```
Map<String, Object> data = new HashMap<String, Object>();
map.put("param1", "test-1");
map.put("param2", "test-2");

  final Http.RequestBuilder request = Helpers.fakeRequest()
                .method(POST)
                .bodyForm(formData)
                .uri("/register");

        final Result result = route(app, request); 
```

# c# - ADO.NET 创建新的实体对象/上下文异常

> ID：10890382
> 
> 赞同：1
> 
> 时间：2012-06-05T01:11:37.867
> 
> 标签：c#, .net, ado.net

我对以下代码有疑问：

```
public static IQueryable<Osoba> GetOsoby()
{
    using (WeryfikacjaEntities context = new WeryfikacjaEntities())
    {
        IQueryable<Osoba> user = from s in context.Osobas select s;
        return user;
    }
} 
```

实际上问题发生在第三行，具体在：

```
WeryfikacjaEntities context = new WeryfikacjaEntities() 
```

我收到一个异常，其内部异常显示类似（不能粘贴它，除非你知道波兰语）：“找不到在配置中命名的给定连接，此连接不应该与 EntityClient 提供程序一起使用或不正确”。

异常本身给了我一些关于 XamlParse 的信息

我用过`EntityFramework`向导，所以我猜连接没问题。任何想法如何解决它？

哦`GetOsoby()`方法是这样调用的：

```
public static List<Worker> GetWorkers()
{
    var u = Class1.GetOsoby().Select(x => new Worker
    {
        _id = x.ID,
        _name = x.Imie,
        _surname = x.Nazwisko,
        _birthDate = x.DataUrodzenia,
        _position = x.Stanowisko,
        _earnings = x.Wynagrodzenie,
        _ageGroup = x.GrupaWiekowa,
        _department = Class1.GetDzialy().Where(
            y => y.ID == Class1.GetStanowiska().Where(
                z => z.ID == x.Stanowisko).FirstOrDefault().ID)
            .FirstOrDefault().ID
    }).ToList();

    return (List<Worker>)u;
} 
```

这是内部异常的 Stacktrace：

```
 in System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
   in System.Data.EntityClient.EntityConnection..ctor(String connectionString)
   in System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString)
   in System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
   in ClassLibrary1.WeryfikacjaEntities..ctor() w C:\Users\Rufix\documents\visual studio 2010\Projects\Zadanie 5\ClassLibrary1\Model1.Designer.cs:wiersz 40
   in ClassLibrary1.Class1.GetOsoby() w C:\Users\Rufix\documents\visual studio 2010\Projects\Zadanie 5\ClassLibrary1\Class1.cs:wiersz 13
   in Zadanie_5.Worker.GetWorkers() w C:\Users\Rufix\documents\visual studio 2010\Projects\Zadanie 5\Zadanie 5\Worker.cs:wiersz 39
   in Zadanie_5.MainWindow..ctor() w C:\Users\Rufix\documents\visual studio 2010\Projects\Zadanie 5\Zadanie 5\MainWindow.xaml.cs:wiersz 26

TargetSite: {Void ChangeConnectionString(System.String)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:21:31.450

声明上下文时，您可以指定连接字符串，并且可以像这样声明数据库上下文：

```
public class DatabaseContext : DbContext
    {
        public DatabaseContext() : base("SomeConnectionString"){}
    { 
```

你确定你正在调用正确的连接字符串吗？

如果没有，请粘贴内部异常的其余部分，以便我们查看

# php - 电子邮件中的动态表

> ID：10890390
> 
> 赞同：0
> 
> 时间：2012-06-05T01:13:17.033
> 
> 标签：php, mysql, html, phpmailer

在过去的几个小时里，我一直在尝试在电子邮件中创建一个动态表。我一直没有成功，我尝试在正文变量内外创建表并在其中回显它，但我没有成功把我的代码放在下面..任何帮助都会非常感谢..我要做的就是创建一个包含一些mysql数据的表，然后将它发送给一些客户..这只是我一直在尝试完成的事情

```
$link = mysql_connect('localhost', 'root', '');
    mysql_select_db('netbookdb');
    $sql="SELECT * FROM rep_log WHERE s_date = '2012-05-31'";
    $result=mysql_query($sql, $link);

$date=date('dmy');
require("../PHPMailer/class.phpmailer.php");
$mail = new PHPMailer();$mail = new PHPMailer();
$mail->IsSMTP();    // set mailer to use SMTP
$mail->Host = "smtp";    // specify main and backup server

$mail->From = "support@.vic.edu.au";    
$mail->FromName = "Ict Devices";   
$mail->AddAddress("email@h.vic.edu.au", "Matthew");

$mail->Subject = "Damage Log Report";

$mail->IsHTML(true);
$var='xlsx';
$date=date('dmy.');

$mail->Body = " while($rows=mysql_fetch_array($result)){
        $cases=$rows['cases'];
        $hg=$rows['hg'];
        $surname=$rows['surname'];
        $firstname=$rows['firstname'];
        $claim=$rows['claim'];
        $damage=$rows['damage'];
        $cost=$rows['cost'];

    }";
$mail->AltBody="Please Use a Html Compaible Email Veiwer";

if(!$mail->Send())
{
   echo "Error sending: " . $mail->ErrorInfo;;
}
else
{
   echo "Letter is sent";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:28:01.813

我使用我创建的代码和平来获取脚本以创建动态表，然后将其回显到电子邮件正文中，这只是一个基本表，但可以进行改进

```
$link = mysql_connect('localhost', 'root', '');
    mysql_select_db('Your Dataabse name');
    $sql="SELECT * FROM rep_log WHERE claim='Insurance' AND s_date = '2012-05-31'";
    $result=mysql_query($sql, $link);

$table= "<table width='100%' border='3' cellspacing='0' cellpadding='0'>";
$table .="<th>Cases</th>";
$table .="<th>HG</th>";
$table .="<th>Surname</th>";
$table .="<th>FristName</th>";
$table .="<th>Claim</th>";
$table .="<th>Damage</th>";
$table .="<th>Cost</th>";

    while($rows=mysql_fetch_array($result)){
        $cases=$rows['cases'];
        $hg=$rows['hg'];
        $surname=$rows['surname'];
        $firstname=$rows['firstname'];
        $claim=$rows['claim'];
        $damage=$rows['damage'];
        $cost=$rows['cost'];
    $table .="<tr>";
    $table .="<td>$cases</td>";
    $table .="<td>$hg</td>";
    $table .="<td>$surname</td>";
    $table .="<td>$firstname</td>";
    $table .="<td>$claim</td>";
    $table .="<td>$damage</td>";
    $table .="<td>$cost</td>";
    $table .="</tr>";

    }
$table .="</table>";

$date=date('dmy');
require("../PHPMailer/class.phpmailer.php");
$mail = new PHPMailer();$mail = new PHPMailer();
$mail->IsSMTP();    // set mailer to use SMTP
$mail->Host = "smtp";    // specify main and backup server

$mail->From = "support@ac.vic.edu.au";    
$mail->FromName = "Ict Devices";   
$mail->AddAddress("gs@hum.vic.edu.au", "Matthew");

$mail->Subject = "Damage Log Report";

$mail->IsHTML(true);
$var='xlsx';
$date=date('dmy.');

$mail->Body = "$table;";
$mail->AltBody="Please Use a Html Compaible Email Veiwer";

if(!$mail->Send())
{
   echo "Error sending: " . $mail->ErrorInfo;;
}
else
{
   echo "Letter is sent";
} 
```

# wcf - 用于安全 Internet 连接的 WCF 选项

> ID：10890391
> 
> 赞同：1
> 
> 时间：2012-06-05T01:13:28.473
> 
> 标签：wcf, security, iis, ssl

场景如下：

托管在 Internet 上的 WCF 服务。需要高度安全，因此我正在考虑传输和消息级别的安全性。

SSL 将在 IIS 上使用，将在传输层上使用证书。

消息需要加密和签名。在消息级别使用证书是最佳选择吗？主要关注的是发送者的身份和加密。此外，此服务必须是跨平台兼容的。这甚至可能与我正在谈论的那种配置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:27:46.630

> 托管在 Internet 上的 WCF 服务。需要高度安全，因此我正在考虑传输和消息级别的安全性。

无需结合消息和传输级别的安全性。选一个就够了。

> 在消息级别使用证书是最佳选择吗？

如果构建安全解决方案，证书是最可靠的选择。如果没有有效的证书或类似于 SSL 握手工作的东西，您将无法防御中间人攻击。

> 此外，此服务必须是跨平台兼容的。

`wsHttpBinding`如果您使用绑定，它将是。`netTcpBinding`是专有的，不会为您工作。

> 这甚至可能与我正在谈论的那种配置。

是的

您可以从此链接开始：http: [//msdn.microsoft.com/en-us/library/ms731925.aspx](http://msdn.microsoft.com/en-us/library/ms731925.aspx)

# php - 如何使用 PHP 从 url 保存图像？

> ID：10890392
> 
> 赞同：0
> 
> 时间：2012-06-05T01:13:36.687
> 
> 标签：php, image

图片网址为： http: [//phim.xixam.com/thumb/giotdang.jpeg](http://phim.xixam.com/thumb/giotdang.jpeg)

我的代码是：

```
$img = 'http://phim.xixam.com/thumb/giotdang.jpeg';
file_puts_content('abc.jpg', file_get_contents($img)); 
```

但我收到警告：

> file_get_contents（[http://phim.xixam.com/thumb/giotdang.jpeg](http://phim.xixam.com/thumb/giotdang.jpeg)）[function.file-get-contents]：打开流失败：HTTP请求失败！HTTP/1.0 403 禁止在...

我尝试通过*cURL*保存此图像，但也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:29:50.510

php 代码在技术上似乎是正确的，但似乎由于某种原因您被阻止了。假设您正在同一台机器上的浏览器中尝试它并且它可以工作，我猜想使用 UserAgent 字符串过滤。尝试使用带有 cURL 的有效用户代理字符串。

来自[http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)：

> -A，--用户代理
> 
> (HTTP) 指定要发送到 HTTP 服务器的用户代理字符串。如果此字段未设置为“Mozilla/4.0”，则一些做得不好的 CGI 会失败。要对字符串中的空格进行编码，请用单引号将字符串括起来。当然，这也可以使用 -H, --header 选项进行设置。
> 
> 如果多次设置此选项，则最后一个将是使用的那个。

# .net - 字符串在 LINQ to 对象中的位置

> ID：10890395
> 
> 赞同：0
> 
> 时间：2012-06-05T01:14:04.147
> 
> 标签：.net, vb.net, linq, linq-to-objects

我有一个这样的 linq 查询：

```
Elementos = From b In Elementos Where b.Value.IdGrupo = 0 Select b 
```

“Elementos”是一个字典（很长，MyObject）。MyObject 有大约 50 个属性。

我遇到的问题是我有一个新要求来接受带有“where”条件的字符串参数。类似的东西`"property1>10 and property2 like 'anystring' or property3<=25"`。（这意味着任何属性都可以有条件。我有字符串和数字属性。）

我想继续使用 linq，添加条件。我知道如果条件拼写错误或其他情况，它可能会产生异常，但这是可以接受的（通过尝试捕获）。我不想解析字符串来构建参数或任何东西。我有机会吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:48:46.187

您可以使用[动态 Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)：

```
Dim filter As String = "property1>10 and property2 like 'anystring' or property3<=25"
Dim results = Elementos.Where(filter) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:31:11.580

您可以尝试这样的事情，您可以通过附加额外的 Where 子句来构造查询。每个子句都将被视为 AND。

```
public class MyObject
{
    public String Bar {get;set;}
    public String Foo {get;set;}
}

var list = new[] { new MyObject { Foo= "Foo" }, new MyObject { Foo = "Foo", Bar = "Bar" }};
var query = list.Where(o => o.Foo == "Foo");
if(/* Some Condition */)
{
    query = query.Where(o => o.Bar == "Bar");
} 
```

# mips - f(n)，理解方程

> ID：10890398
> 
> 赞同：0
> 
> 时间：2012-06-05T01:14:31.667
> 
> 标签：mips, equations, equation-solving

我的任务是为以下公式编写 MIPS 指令代码：

```
f(n) = 3 f(n-1) + 2 f(n-2)  
f(0) = 1
f(1) = 1 
```

我在理解公式的实际含义时遇到问题。

据我了解，我们正在将一个 int n 传递给双递归程序。

因此，对于 f(0)，等式将是：

```
f(n)=3*1(n-1) + 2*(n-2) 
```

如果 n=10，则方程为：

```
f(10)=3*1(10-1) + 2*(10-2) 
```

我知道我根本没有做到这一点，因为它不会是递归的。您可以阐明方程式的实际含义的任何信息都会很棒。一旦我理解了方程式，我应该能够编写 MIPS 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:22:14.860

我认为这是一个差分方程。

你有两个起始值：

```
f(0) = 1
f(1) = 1
f(n) = 3*f(n-1) + 2*f(n-2) 
```

所以现在你可以继续这样：

```
f(2) = 3*f(1) + 2*f(0) = 3 + 2 = 5
f(3) = 3*f(2) + 2*f(1) = 15 + 2 = 17 
```

所以你的递归方法看起来像这样（我将编写类似 Java 的符号）：

```
public int f(n) {
    if (n == 0) {
        return 1;
    } else if (n == 1) {
        return 1; 
    } else { 
        return 3*f(n-1) + 2*f(n-2); // see? the recursion happens here.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:25:14.857

不，我认为你是对的，它是递归的。它似乎是[斐波那契数列](http://en.wikipedia.org/wiki/Fibonacci_number)的变体，一个经典的递归问题

请记住，递归算法有两个部分：

1.  基本情况
2.  递归调用

基本情况指定了您不能再递归的点。例如，如果您正在递归排序，则基本情况是长度为 1 的列表（因为单个项目是简单排序的）。

所以（假设 n 不是负数），你有 2 个基本情况：n = 0 和 n = 1。如果你的函数接收到一个等于 0 或 1 的 n 值，那么递归就没有意义了

考虑到这一点，您的代码应如下所示：

```
function f(int n):
    #check for base case

    #if not the base case, perform recursion 
```

所以让我们以斐波那契为例。

在斐波那契数列中，每个数字都是它之前的 2 个数字的总和。因此，给定序列`1, 2`，下一个数字显然是，`1 + 2 = 3`之后的数字是`2 + 3 = 5`，`3 + 5 = 8`依此类推。通俗地说，第 n 个斐波纳契数是第 (n - 1) 个斐波纳契数加上第 (n - 2) 个斐波纳契数，或`f(n) = f(n - 1) + f(n - 2)`

但是序列从哪里开始呢？这是基本情况。斐波那契将他的序列定义为从 开始`1, 1`。这意味着，对于我们的目的，`f(0) = f(1) = 1`. 所以...

```
function fibonacci(int n):
    if n == 0 or n == 1:
        #for any n less than 2
        return 1

    elif n >= 2:
        #for any n 2 or greater
        return fibonacci(n-1) + fibonacci(n-2)

    else:
        #this must n < 0
        #throw some error 
```

请注意，斐波那契与递归一起被教授的原因之一是因为它表明有时递归是一个坏主意。我不会在这里讨论它，但是对于大 n 这种递归方法**非常**低效。另一种方法是有2个全局变量，`n1`这样`n2`......

```
n1 = 1
n2 = 1

print n1
print n2

loop:
    n = n1 + n2
    n2 = n1
    n1 = n

    print n 
```

将打印序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T01:28:05.043

您有两个基本情况：

> **f(0)** = 1
> **f(1)** = 1

其他任何东西都使用递归公式。例如，让我们计算 f(4)。这不是基本情况之一，因此我们必须使用完整的方程式。代入 n=4 我们得到：

> **f(4)** = 3 f(4-1) + 2 f(4-2) = 3 **f(3)** + 2 **f(2)**

嗯，还没写完。要计算 f(4)，我们需要知道 f(3) 和 f(2) 是什么。这些都不是基本情况，所以我们必须做一些递归计算。好的...

> **f(3)** = 3 f(3-1) + 2 f(3-2) = 3 **f(2)** + 2 **f(1)**
> **f(2)** = 3 f(2-1) + 2 f(2- 2) = 3 **f(1)** + 2 **f(0)**

我们去吧！我们已经触底了。f(2) 是根据 f(1) 和 f(0) 定义的，我们知道这两个值是什么。我们得到了这些，所以我们不需要做更多的递归计算。

> **f(2)** = 3 **f(1)** + 2 **f(0)** = 3×1 + 2×1 = 5

现在我们知道 f(2) 是什么，我们可以展开递归链并求解 f(3)。

> **f(3)** = 3 **f(2)** + 2 **f(1)** = 3×5 + 2×1 = 17

最后，我们再次展开并求解 f(4)。

> **f(4)** = 3 **f(3)** + 2 **f(2)** = 3×17 + 2×5 = 61

# java - 强制其他手机识别安卓蓝牙设备名称的更新

> ID：10890399
> 
> 赞同：2
> 
> 时间：2012-06-05T01:14:34.143
> 
> 标签：java, android, bluetooth

我目前正在创建一个 Android 应用程序，该应用程序需要使用 Android 手机的名称来存储有关手机的信息。所以电话的名字总是在变化。然而，当其他手机执行多次蓝牙扫描时，它们似乎总是只使用手机识别的名字，即使手机名称发生了变化。有没有办法强制 Android 应用程序查看新名称或刷新某种缓存蓝牙扫描完成的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:21:49.697

如豪厄尔的回答中所述，您可以使用 setName 更改名称，并且可以使用 fetchUuuidsWithSdp() 强制更新另一部手机的名称，但我相信您无法强制另一部设备更新服务它为您提供的信息和名称。

我想你能做的最好的事情就是简单地创建一个新的连接并希望它触发它更新它在你身上的信息，但即使这样有效，它也将依赖于实现（即不可靠），因为它有没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:56:36.800

你`android.bluetooth.BluetoothAdapter.setName()`是用来设置名字的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:52:10.170

我只需要手动清除缓存，然后确保不配对手机。当电话未配对时，名称不会缓存在电话中。

# sencha-touch - 如何在 Sencha Touch 应用程序中所有视图之外的固定位置添加交互式动态组件

> ID：10890404
> 
> 赞同：1
> 
> 时间：2012-06-05T01:15:04.727
> 
> 标签：sencha-touch, touch, extjs, sencha-touch-2, docking

如何在 Sencha Touch 应用程序中所有视图之外的固定位置添加交互式动态组件。
使用顶部的菜单，我想在应用程序底部添加控制音频、显示其他随机信息和旋转图像的控件。此窗格不应隐藏/移动/刷新/等。通过菜单更改视图时，本质上它应该与应用程序的其余部分分开。非常希望能够使用 sencha 'audio' xtypes。

我应该实现这个：

*   直接进入 index.html
*   以某种方式将其添加到包含菜单的视图中
*   其他一些神奇的方式

![示例布局](../Images/2f8a59cee1368b3f9d9253ecabb8a1f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:07:38.473

神奇的方式是……停靠（在应用程序的其余部分之外，可能意味着您想在视口上进行文档处理）。

[http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-doked](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-docked)

```
var button = Ext.create('Ext.Button', {
      text: 'Button',
      id: 'rightButton'
 });

 Ext.create('Ext.Container', {
     fullscreen: true,
     items: [
         {
              docked: 'top',
              xtype: 'titlebar',
              items: [
                  button
              ]
          }
     ]
 });

 Ext.create('Ext.Panel', {
     html: 'Floating Panel',
     left: 0,
     padding: 10
 }).showBy(button); 
```

对于您的俯视图，我会使用类似于 Ext.TabPanel 的东西。 [http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel](http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel)

# google-maps - 在地图上隐藏 Google 地图制作工具数据

> ID：10890420
> 
> 赞同：0
> 
> 时间：2012-06-05T01:18:14.150
> 
> 标签：google-maps, google-maps-api-3

我想知道是否有任何方法可以隐藏或禁用用户为 Google Map Maker 提供的自行车线路/小径？

我的网站有一个骑行区域，当您将地图从 Google 地球切换到 Google 地图时，会显示一堆错误/不准确的地图制作者数据。 [http://www.trailforks.com/riding_areas/cumberland](http://www.trailforks.com/riding_areas/cumberland)

数据在 Map maker 上可见。 [http://goo.gl/Ebnq4](http://goo.gl/Ebnq4)

我的网站使用 GPS 数据来绘制路线图，这是有人手绘的地图制作者数据，我们希望将其从谷歌地图中隐藏起来，我们在道路视图中覆盖我们的路线数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:33:16.397

您可以自定义底图的样式，但不能以完美的粒度。在这种情况下，自行车道（和其他路径/路径）被归类为地方道路......所以如果你不介意丢失那些你可以用自定义样式将它们关闭。例如，如果您在实例化地图时传入 mapOptions，您可能会执行以下操作：

```
var mapOptions = {
 styles : [
    {
      featureType: "road.local",
      stylers: [
        { visibility: "off" }
      ]
    }
  ]
} 
```

# python - 将 python 脚本与 django 集成

> ID：10890425
> 
> 赞同：2
> 
> 时间：2012-06-05T01:19:46.203
> 
> 标签：python, django, forms

我在 python 中编写了一些测试脚本，它们为特定的应用程序调用了一些 api，并将结果输出到数据库，这样我就可以使用 jasper 来报告结果。目前，脚本使用python 解释器运行，即双击python 文件，该文件在脚本中修改了一些参数和变量，然后启动测试。我想转向一个更加用户友好的界面，这样其他人就可以使用这些测试脚本而无需修改 python 代码。所以我正在考虑使用 django 并创建一个包含复选框的网页，如果勾选了复选框，那么它将执行特定的 python 测试脚本或将值传递给给定变量的文本框，例如. 关于如何实现这一点，我有几个问题。

1 - 我需要在 django 源代码中实现 python 代码还是可以从 django 提供的网页调用 python 脚本？

2 - 如果我要从网页运行它，我如何确保如果网页关闭，测试将在后台继续。

3 - 有没有办法将测试用例的状态输出到网页，如果网页已关闭，如果网页重新打开，状态是否可用？

非常感谢 - 奥利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:42:59.927

如果你有一个 python 函数，你可以从 Django django 视图中调用，可能使用表单作为参数输入。如果您有长时间运行的进程，您可能需要考虑这里的提示：[How to start a long-running process from a Django view?](https://stackoverflow.com/questions/1619397/how-to-start-a-long-running-process-from-django-view)

```
from mytests import testfunc

def test_parameter_view(request):
    if request.method == 'POST': # If the form has been submitted...
        form = ParameterForm(request.POST)
        if form.is_valid():
            testfunc(form.cleaned_data['parameter'])   # <-- Here the actual testing happens
            return HttpResponseRedirect(reverse(test_result)) # Redirect after POST
    else:
        form = ParameterForm()

    return render_to_response('test.html', {
        'form': form,
    }) 
```

在您的`test_result`视图中，您可以访问数据库中的测试结果值。

用户是否关闭浏览器不会影响已经启动的服务器进程。而且由于您将结果写入数据库，因此它们是持久的，并且可以在测试完成后随时访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:33:18.793

如果您不想将脚本移植到 django 视图中，还有另一种方法：

1 - 设置一个表单，其中包含要传递给脚本的所有选项

2 - 获取或发布表单参数并使用`var1 = request.POST['param1']`等将它们保存到变量中

3 - 使用调用的模块`subprocess`来执行您的脚本。[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

# python - Python Urllib2 只读取文档的一部分

> ID：10890426
> 
> 赞同：1
> 
> 时间：2012-06-05T01:19:48.340
> 
> 标签：python, urllib2, urllib

好吧，这让我发疯了。

我正在尝试使用 Python 的 Urllib2 库从 Crunchbase API 中读取数据。相关代码：

```
api_url="http://api.crunchbase.com/v/1/financial-organization/venrock.js"
len(urllib2.urlopen(api_url).read()) 
```

结果是 73493 或 69397。文档的实际长度要长得多。当我在另一台计算机上尝试此操作时，长度为 44821 或 40725。我尝试更改用户代理，使用 Urllib，将超时增加到一个非常大的数字，并一次读取小块。总是一样的结果。

我认为这是服务器问题，但我的浏览器读取了整个内容。

Python 2.7.2、OS X 10.6.8，长度约为 40k。Python 2.7.1 作为 iPython 运行，长度约为 70k，OS X 10.7.3。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:03:05.767

该服务器有些古怪。如果您像您的浏览器一样请求使用 gzip 编码的文件，它可能会起作用。这是一些应该可以解决问题的代码：

```
import urllib2, gzip

api_url='http://api.crunchbase.com/v/1/financial-organization/venrock.js'
req = urllib2.Request(api_url)
req.add_header('Accept-encoding', 'gzip')
resp = urllib2.urlopen(req)
data = resp.read()

>>> print len(data)
26610 
```

那么问题是解压缩数据。

```
from StringIO import StringIO

if resp.info().get('Content-Encoding') == 'gzip':
    g = gzip.GzipFile(fileobj=StringIO(data))
    data = g.read()

>>> print len(data)
183159 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:48:06.937

我不确定这是否是一个有效的答案，因为它完全是一个不同的模块，但是使用该`requests`模块，我得到了大约 183k 的响应：

```
import requests

url = r'http://api.crunchbase.com/v/1/financial-organization/venrock.js'

r = requests.get(url)

print len(r.text)

>>>183159 
```

因此，如果项目还不算太晚，请在此处查看：http: [//docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)

编辑：使用您提供的代码，我也得到了`len`~36k

快速搜索并发现：[urllib2 not retrieving entire HTTP response](https://stackoverflow.com/questions/1824069/urllib2-not-retrieving-entire-http-response)

# macos - svn: XML 数据格式不正确

> ID：10890429
> 
> 赞同：0
> 
> 时间：2012-06-05T01:20:09.813
> 
> 标签：macos, svn

我在运行 Lion 的 Mac 上使用 Subversion 时遇到了一些问题。每当我尝试签出任何存储库时，我总是会收到此错误：

```
svn: XML data was not well-formed 
```

有什么建议吗？

提前致谢！

PS我几乎没有颠覆的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T01:59:26.530

是的，由于这个奇怪的错误，我遇到了很多问题。似乎当 svn 在现有的 .ssh 文件夹中有冲突的身份验证数据时，它会收到此错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-12T04:21:05.807

请删除（重命名以备备份）~/.ssh 和~/.subversion 目录。只删除 .ssh 应该可以。

# c++ - 使用winapi使用可变字体/格式的文字换行块

> ID：10890430
> 
> 赞同：1
> 
> 时间：2012-06-05T01:20:33.980
> 
> 标签：c++, winapi, text, mfc, word-wrap

我需要使用 MFC 和/或 Windows API 直接在屏幕上（不在富文本控件内）绘制任意字符串。字符串中的字符可以有不同的字体或颜色，可以是粗体、斜体、下划线或两者的任意组合。此外，用户可以选择将文本包装在他们选择的范围内，并可以通过调整字体大小来强制它适应。

我正在考虑按照以下方式做一些事情：

1.  将其解析为子字符串及其格式的向量
2.  使用 GetCharABCWidthsFloat 计算所有子字符串的宽度
3.  手动计算换行符需要落在哪里
4.  如有必要，使用较小的字体重复上述操作以使文本适合
5.  使用 DrawTextW 单独绘制每个子字符串，使用前面子字符串的宽度和换行点确定它们的位置

有更好的方法吗？如果没有，在实施时我应该注意什么问题或技巧？

（我知道 DrawText 的 DT_CALCRECT | DT_WORDBREAK 标志，但我认为这对我不起作用，因为 a）它假定整个字符串的字体/格式一致，并且 b）我看到一些留言板帖子指出它不能正确计算斜体字符的宽度。真的？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:20:34.417

XAML 是您的朋友。如果没有 ，则本机不支持`.NET`，但有 3rd 方库（例如 Xtreme Toolkit Pro）。这是 XAML 标记功能的演示：http: [//www.codejock.com/download/win32/markupsample.zip](http://www.codejock.com/download/win32/markupsample.zip)

多年来一直在使用它。不能抱怨。

# c++ - 可以选择接受参数的默认构造函数？

> ID：10890433
> 
> 赞同：0
> 
> 时间：2012-06-05T01:21:18.237
> 
> 标签：c++

如果未传入参数，是否可以让 1 个构造函数成为默认构造函数。

例如，不是有 2 个构造函数，其中 1 是默认构造函数，另一个是初始化传入的数字的构造函数，是否可以只有 1 个构造函数，如果传入一个值，则将该值设置为成员函数，以及如果没有传入任何值，则将成员函数设置为数字。

例子：

重量.H 文件：

```
 class Weight
{
public:
    Weight() { size = 0; }
    Weight(int a) : size(a) {}

    int size;
}; 
```

MAIN.CPP 文件：

```
int main(void)
{
  Weight w1;
  Weight w2(100);
} 
```

我一直在从事不同的学校项目，它们都需要不同类型的构造函数，我想知道是否有办法只拥有一次以节省时间。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:22:07.253

是的，构造函数参数可能有一个默认参数，就像其他函数一样。如果构造函数的所有参数都有默认参数，则构造函数也是默认构造函数。所以，例如，

```
class Weight
{
public:

    explicit Weight(int a = 0) : size(a) { }

    int size;
}; 
```

此构造函数可以用单个参数或不带参数调用；如果在没有参数的情况下调用它，则将其`0`用作参数的`a`参数。

请注意，我还声明了这个构造函数`explicit`。如果您有一个可以使用单个参数调用的构造函数，则应始终声明它`explicit`以防止发生不需要的隐式转换，除非您真的希望该构造函数是一个转换构造函数。

（如果您还不熟悉转换构造函数或隐式转换，那没关系；对于您将编写的大多数代码，只要遵循此规则就足够了。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T01:41:59.297

是的，正如[James](https://stackoverflow.com/a/10890440/1040374)所建议的那样，但您知道，如果您没有定义 Default 构造函数，如果您没有提供任何构造函数定义，编译器将接管定义部分。它本身不是问题，但定义默认构造函数以正确初始化值是一种更好的做法。

[Google C++ Style guide](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Default_Constructors#Default_Constructors)也推荐它。

# github - 在 GitHub 上为我的 ssh 密钥创建密码

> ID：10890435
> 
> 赞同：3
> 
> 时间：2012-06-05T01:21:30.610
> 
> 标签：github, ssh-keys, github-for-mac

我正在尝试设置一个 GitHub 帐户，每次我要为我的 SSH 密钥输入密码时，我的终端都会冻结。这是我的步骤：

Parkers-MacBook-Pro:~ ppreyer$ ssh-keygen -t rsa -C Parker.preyer1@gmail.com 生成公钥/私钥 rsa 密钥对。输入要保存密钥的文件 (/Users/ppreyer/.ssh/id_rsa): (/Users/ppreyer/.ssh/id_rsa): 创建目录 '/Users/ppreyer/.ssh'。Enter passphrase (empty for no passphrase): (WONT LET ME TYPE ANYTHING)

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:24:49.580

您在符合 Unix 标准的机器上。因此，大多数基于终端的密码输入机制都使用所谓的“Unix 密码字段”（据我所知，这是最常见的名称）。您实际上看不到您正在输入的字符，但它们就在那里。只需确保您键入两次相同的内容，您应该会很好。

试一试，输入您的密码，然后按 Enter。再次键入并再次按 Enter。您刚刚创建了一个 SSH 密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T06:56:06.520

我同意[MaxMackie](https://stackoverflow.com/users/623990/maxmackie)的[回答](https://stackoverflow.com/a/10890457/6309)（赞成），但我也喜欢以非交互方式生成我的 ssh 密钥：

```
[space]ssh-keygen -t rsa -f "${H}/.ssh/myKey" -C "Gitolite Admin access (not interactive)" -q -P "xxxx" 
```

这会在我的目录中生成一个“ `mykey`”私有 ssh 密钥和一个“ `mykey.pub`”公共 ssh 密钥。`~/.ssh`

注意命令前的空格，以避免在我的 bash 会话中将该命令记录在 bash 历史记录中（因为我`HISTCONTROL=ignorespace`在“[执行终端命令而不将其保存到 OS X 上的 .bash_history？](https://superuser.com/questions/324874/execute-a-terminal-command-without-saving-it-to-bash-history-on-os-x) ”中定义了一个）

# javascript - Javascript 提交有时在 chrome 中不起作用

> ID：10890437
> 
> 赞同：1
> 
> 时间：2012-06-05T01:21:54.417
> 
> 标签：javascript, google-chrome, javascript-events

我有一个自定义对话框，它接受用户输入并根据用户输入提交表单。这个 javascript 在 IE 和 Firefox 上运行良好。它有时也适用于 chrome，但有时没有响应。

```
<html>
    <head>
    <script type="text/javascript">

        window.onblur = function() { 
        window.focus(); 
        }

        var realtimePoLink = "./processAbc.do";
        var realtimePoMethod = "startAbc";
        var nightlyPoLink = "./processXyz.do";
        var nightlyPoMethod= "startXyz";

        function startPO(){
            var historyPoRadio = document.getElementById("nightlyPoRadio");
            if(historyPoRadio !=null && historyPoRadio.checked == true){
                document.getElementById("method").value = nightlyPoMethod;
                document.getElementById("poStartForm").action = nightlyPoLink;
            }
            else{
                document.getElementById("method").value = realtimePoMethod;
                document.getElementById("poStartForm").action = realtimePoLink;
            }
            document.forms["poStartForm"].submit();
            window.close();
        }
    </script>
    </head>

    <body>
        <form name="poStartForm" id ="poStartForm" method="POST" action="" target="ASSIAMainWindow">
            <input type="hidden" name="tn" value="0000010019">
            <input type="hidden" name="portId" value="">
            <input type="hidden" name="method" id="method" value="startPo">
            <input type="hidden" name="confirmation" value="YES">

            <table>
                <tr>
                    <td>
                        <input type="radio" name="poSourceValue" value="1" checked="checked">
                    <td>ABC
                </tr>
                <tr>    
                    <td>
                        <input type="radio" name="poSourceValue" value="2">
                    <td>MNO
                </tr>
                <tr>    
                    <td>
                        <input type="radio" name="poSourceValue" value="3" id="nightlyPoRadio">
                    <td>XYZ
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <input type="button" value="Start" onclick="javascript:startPO();"/>
                        <input type="button" value="Cancel" onclick="javascript:window.close();"/>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

不管表单是否提交，对话框总是关闭的。

# matlab - 如何在matlab中以非交互方式使用cftool

> ID：10890438
> 
> 赞同：2
> 
> 时间：2012-06-05T01:21:57.917
> 
> 标签：matlab, curve-fitting

有没有办法以非交互方式使用 cftool。例如，给定x、y和拟合函数，调用cftool生成并返回拟合数据，无需打开工具箱GUI。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:04:12.283

我不知道，但还有另一种方法。

文件/生成代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:40:32.307

您可以使用`fit`Curve Fitting Toolbox 附带的功能。要了解更多信息，请键入`doc fit`。或者您可以交互地使用 cftool，然后使用 File 菜单中的 Generate Code 创建一个函数，该函数使用该`fit`命令以编程方式重复您的交互工作。将此用作模板示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T22:38:41.853

```
function [fitresult, gof] = Custom_fit(x,y,My_Equation)

% example -->My_Equation = 'a*exp(-b*x)+c*exp(-d*x)' % y=f(x)

[xData, yData] = prepareCurveData( x, y );

% Set up fittype and options.
ft = fittype(My_Equation, 'independent', 'x', 'dependent', 'y' );
opts = fitoptions( 'Method', 'NonlinearLeastSquares' );
opts.Display = 'Off';
opts.StartPoint = [0.0376273842264444 0.821185653244809 0.81656489972889 0.961898080855054];

% Fit model to data.
[fitresult, gof] = fit( xData, yData, ft, opts );

end 
```

代码。

# css - 如何停止 Sass 在度量单位前添加空格？

> ID：10890445
> 
> 赞同：20
> 
> 时间：2012-06-05T01:23:01.417
> 
> 标签：css, sass

我正在尝试按照[本教程](http://www.netmagazine.com/tutorials/build-responsive-site-week-typography-and-grids-part-2)进行响应式布局设计，但使用 SASS/SCSS 作为我的基本规范语言。

为此，我定义了以下 SCSS：

```
body {
  font: 100%/1.5;
}

h1 {
  $h1_size: 24;
  font-size: ($h1_size / 16)em;
  line-height:(28 / $h1_size)em;
  margin-top: (24 / $h1_size)em;
} 
```

不幸的是，`sass`转换成 CSS 格式的输出如下所示：

```
h1 {
  font-size: 1.5 em;
  line-height: 1.167 em;
  margin-top: 1 em;
} 
```

— 单位与值之间用空格隔开。Chrome 将这些值视为无效而拒绝，并且仅在我自己手动删除空格时才使用它们。

**有没有办法通过调整我的 SCSS 或传递一个选项来解决这个问题`sass`？**

到目前为止，我已经尝试过：

*   将单位放在计算中：

    *   ( `font-size: ($h1_size / 16em)`) =>*语法错误*
    *   ( `font-size: (($h1_size)em / 16)`=>*`font-size: 24 em/16;`*这与我要解决的问题相同

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-05T01:37:42.877

您可以将 推`em`入`$h1_size`定义中，这将让您简单地除以 16 并在`ems`.

如果除法的两边都在`em`，你的结果将是无单位的。如果需要，您可以轻松地乘以`1em`取回您的单位。

```
h1 {
  $h1_size: 24em;
  font-size: ($h1_size / 16);
  line-height:(28em / $h1_size);
  margin-top: (24em / $h1_size * 1em);
} 
```

乘以`1em`也可以使某些东西更接近您的原始示例工作。`1em`您通常可以使事物保持无单位，然后仅在您希望该单位出现时乘以。这避免了我的第一个示例中的一些无意义的`em`扩散：

```
h1 {
  $h1_size: 24;
  font-size: ($h1_size / 16 * 1em);
  line-height:(28 / $h1_size);
  margin-top: (24 / $h1_size * 1em);
} 
```

哪种方式更有意义主要取决于您的输出主要是在一个单元中，还是各种不同的单元（包括没有）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-08-13T23:01:09.103

您可以使用 + 删除空格

```
h1 {
  $h1_size: 24;
  font-size: ($h1_size / 16)+em;
  line-height:(28 / $h1_size)+em;
  margin-top: (24 / $h1_size)+em;
} 
```

会输出。

```
h1 {
  font-size: 1.5em;
  line-height: 1.16667em;
  margin-top: 1em; } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-26T18:46:39.247

您需要像这样使用字符串插值：#{$variable}em

这是参考：[http ://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T01:36:32.953

将 em 放入变量中，所以`$h1_size: 24em;`

# javascript - Umbraco 从页面 @nodename 添加链接作为表单上的文本输入值

> ID：10890446
> 
> 赞同：1
> 
> 时间：2012-06-05T01:23:14.007
> 
> 标签：javascript, macros, umbraco, ascx

如何将来自页面@nodename 的链接添加为表单上的文本输入值？输入将被禁用，因此用户无法更改文本。

```
<input type="text" name="jobtitle" id="jobtitle" value="Job Title to be Prefilled here by linked from page @nodeName - Disabled field" disabled="disabled" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:26:03.973

我假设这是剃须刀？请改用@Model.Name。

# java - Java：寻找检查字符串在特定范围内是否存在 Unicode 字符的最快方法

> ID：10890449
> 
> 赞同：2
> 
> 时间：2012-06-05T01:23:43.023
> 
> 标签：java, string, unicode

我需要实现一个非常粗略的语言识别算法。在我的世界里，只有两种语言：英语和非英语。我有 ArrayList，我需要确定每个字符串是否可能是英语或其他语言，其 Unicode 字符在一定范围内。所以我想做的是使用某种类型的“存在”测试来检查每个字符串是否在这个范围内。如果它通过了测试，我说这个字符串不是英文的，否则就是英文的。我想尝试两种类型的测试：

1.  TEST-ANY：如果字符串中的任何字符在范围内，则字符串通过测试
2.  TEST-ALL：如果字符串中的所有字符都在范围内，则字符串通过测试

由于数组可能很长，我需要非常有效地实现它。在 Java 中执行此操作的最快方法是什么？

谢谢

更新：我专门通过查看特定范围的 Unicode 来检查非英语，而不是检查字符是否为 ASCII，部分是为了解决下面提到的“恢复”问题。我想弄清楚的是Java是否提供了任何基本上尽可能有效地实现TEST-ANY或TEST-ALL（或其他类似测试）的类/方法。换句话说，我试图避免重新发明轮子，尤其是如果在我之前发明的轮子更好的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T01:43:15.427

我真的不认为这个解决方案是确定语言的理想选择，但是如果你想检查一个字符串是否都是 ascii，你可以这样做：

```
public static boolean isASCII(String s){
    boolean ret = true;
    for(int i = 0; i < s.length() ; i++) {
        if(s.charAt(i)>=128){
            ret = false;
            break;
        }
    }
    return ret;
} 
```

那么，如果你试试这个：

```
boolean r = isASCII("Hello"); 
```

`r`等于真。但如果你尝试：

```
boolean r = isASCII("Grüß dich"); 
```

那么`r`等于假。我还没有测试过性能，但这会相当快，因为​​它所做的只是将一个字符与数字 128 进行比较。

但是正如@AlexanderPogrebnyak 在上面的评论中提到的那样，如果你给它“简历”，这将返回 false。请注意这一点。

### 更新：

> 我专门通过查看特定范围的 Unicode 来检查非英语，而不是检查字符是否为 ASCII

但是 ASCII*是*Unicode 中的一个范围（至少在 UTF-8 中）。Unicode 只是 ASCII 的扩展。什么代码@mP。我提供的是检查每个字符是否在一定范围内。我选择该范围为 ASCII，即十进制值小于 128 的任何 Unicode 字符。您也可以选择任何其他范围。但我选择 ASCII 的原因是它包含拉丁字母、阿拉伯数字和其他一些通常出现在“英语”字符串中的常见字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T17:31:50.913

以下是我最终实施 TEST-ANY 的方式：

```
// TEST-ANY
String str = "wordToTest";
int UrangeLow = 1234; // can get range from e.g. http://www.utf8-chartable.de/unicode-utf8-table.pl
int UrangeHigh = 2345;
for(int iLetter = 0; iLetter < str.length() ; iLetter++) {
   int cp = str.codePointAt(iLetter);
   if (cp >= UrangeLow && cp <= UrangeHigh) {
      // word is NOT English
      return;
   } 
}
// word is English
return; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T02:06:46.110

```
public static boolean isAscii( String s ){
    int length = s.length;
    for( int i = 0; i < length; i++){
       final char c = s.charAt( i );
       if( c > 'z' ){
          return false;
       }
    }
    return true;
} 
```

@Hassan 感谢您选择用小 z 对 big Z 进行的错字替换测试。

# c# - 将 utf-8 XML 文档转换为 utf-16 以插入 SQL

> ID：10890450
> 
> 赞同：1
> 
> 时间：2012-06-05T01:23:54.507
> 
> 标签：c#, xml, encoding

我有一个使用 utf-8 编码创建的 XML 文档。我想将该文档存储在 sql 2008 xml 列中，但我知道我需要将其转换为 utf-16 才能做到这一点。

我尝试使用 XDocument 来执行此操作，但在转换后我没有得到有效的 XML 结果。这是我尝试进行的转换（Utf8StringWriter 是一个从 StringWriter 继承并重载编码的小类）：

```
XDocument xDoc = XDocument.Parse(utf8Xml);
StringWriter writer = new StringWriter();
XmlWriter xml = XmlWriter.Create(writer, new XmlWriterSettings() 
                { Encoding = writer.Encoding, Indent = true });

xDoc.WriteTo(xml);

string utf16Xml = writer.ToString(); 
```

utf16Xml 中的数据无效，尝试插入数据库时​​出现错误：

```
{"XML parsing: line 1, character 38, unable to switch the encoding"} 
```

然而，最初的 utf8Xml 数据绝对是有效的，并且包含了我需要的所有信息。

更新：初始 XML 是通过使用 XMLSerializer（带有 Utf8StringWriter 类）从现有对象模型（*引擎*）创建 xml 字符串来获得的。代码是：

```
public static void Serialise<T>(T engine, ref StringWriter writer)
{
    XmlWriter xml = XmlWriter.Create(writer, new XmlWriterSettings() { Encoding = writer.Encoding });

    XmlSerializer xs = new XmlSerializer(engine.GetType());

    xs.Serialize(xml, engine);
} 
```

我必须像这样离开，因为我无法控制更改该代码。

在我什至将 utf16Xml 字符串发送到失败的数据库调用之前，我可以通过 Visual Studio 调试器查看它，我注意到整个字符串不存在，而是在 XML 查看器上收到**字符串文字未关闭错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:30:04.860

从 utf8xml 解析文档后，将文档的编码设置为 UTF-16

```
XDocument xDoc = XDocument.Parse(utf8Xml);
xDoc.Declaration.Encoding = "utf-16";
StringWriter writer = new StringWriter();
XmlWriter xml = XmlWriter.Create(writer, new XmlWriterSettings() 
                { Encoding = writer.Encoding, Indent = true });

xDoc.WriteTo(xml);

string utf16Xml = writer.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:52:54.283

错误在第一行`XDocument xDoc = XDocument.Parse(utf8Xml);`。很可能您将 utf8 流转换为字符串 (utf8xml)，但字符串中指定的编码仍然是 utf-8，因此 XML 阅读器失败。如果为真，则使用[Load](http://msdn.microsoft.com/en-us/library/bb358684)直接从流中加载 XML，而不是先将其转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T23:08:36.643

这是我必须做的才能让它工作。这只是将 XML 转换为 utf-16

```
string getUtf16Xml(System.Xml.XmlDocument xmlDoc)
{    
   System.Xml.Linq.XDocument xDoc = System.Xml.Linq.XDocument.Parse(xmlDoc.OuterXml);
   xDoc.Declaration.Encoding = "utf-16";

   return xDoc.ToString();    
} 
```

然后我可以将结果保存到数据库中。

# php - 在 PHP 中实例化对象后更改其类型

> ID：10890451
> 
> 赞同：1
> 
> 时间：2012-06-05T01:23:57.923
> 
> 标签：php, object

我们有一个系统，在我们知道它的具体类型是什么之前，我们有理由实例化一个对象。例如，我们希望在我们知道最终类是“book”还是“cd”之前实例化一个类“media”。

这就是我们正在做的事情。我们实例化“媒体”对象，一旦我们知道它是什么类型的媒体，我们就实例化一个“书”，传入媒体对象。

```
class Book extends Media
{
    public function __construct( $parent )
    {
        $vars = get_object_vars( $parent );

        foreach( $vars as $key => $value )
            $this->$key = $value;
    }   
}

//elsewhere
$item = new Media();
$item->setPrice( $price );
//other code, figure out the item type
$item = new Book( $item ); 
```

有没有更好的方法来做这样的事情？这是动态多态性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:16:44.217

如果你真的无法确定什么类型的对象，我可以推荐你的工厂模式。使用这种模式，您只有一个入口点，这有助于您使您的代码更简单易读。

简短的例子：

```
 class ObjectFactory {
        public static function factory($object, $objectType)
        {
            $result = false;

            switch ($objectType) {
                case 'book':
                    $result = new Book;
                    $result->setParams($object->getParams());
                    break;

                case 'otherType':
                    $result = new OtherType;
                    $result->setParams($object->getParams());
                    // or
                    $result->setParamsFromObject($object);
                    break;
                    ... //etc
            }
            return $result;
        }
    }

    class Book extends MediaAbstract
    {
        public function __set($name, $value)
        {
            $this->_params($name, $value);
        }

        public function __get($name)
        {
            return $this->_params[$value];
        }

        public function setParams(array $params)
        {
            $this->_params = $params;
            return $this;
        }

        public function getParams()
        {
            return $this->_params;
        }

        // in case u want store params as properties

        public function setParamsFromObject($object)
        {
            $vars = get_object_vars($object);
            foreach ($vars as $key => $value) {
                $this->$key = $value;
            }

            return $this;
        }
    }

$media = new Media;
$media->setParams($params)
// some stuff
//...
$book = ObjectFactory::factory($media, $objectType); 
```

# flash - 如何在 AS2 中将导入图像的颜色设置为透明度

> ID：10890453
> 
> 赞同：1
> 
> 时间：2012-06-05T01:24:15.263
> 
> 标签：flash, actionscript-2

如何将颜色 BLACK: 0x000000 设置为透明，通常魔法粉红色是透明的，但我想将 BLACK 设置为。

如果你不明白：http: [//j.imagehost.org/0829/WoodyGX_0.jpg](http://j.imagehost.org/0829/WoodyGX_0.jpg)

我有那个图像，在转换 80x80 精灵时，我希望背景是透明的，这意味着：没有背景，只有角色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:40:13.360

此时您最好将其放入 Fireworks，使用魔杖选择黑色像素，删除它们，然后将其保存为透明 png。然后使用它。

但是，如果你想让你的生活变得比它需要的更难，你可能会使用 getPixel 来获取所有黑色像素，然后使用 setPixel 将它们设置为透明。但是，blitting 的全部意义在于速度，而不是缓慢的逐像素操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:55:55.140

> 注意：这是 ActionScript 3 中的答案，以防您决定迁移到 ActionScript 3，但更适用于其他人和一般信息。

`BitmapData`您可以从源 中创建新的`BitmapData`，去除黑色像素（转换为 Alpha 通道）。

我为你创建了这个函数：

```
// Takes a source BitmapData and converts it to a new BitmapData, ignoring
// dark pixels below the specified sensitivity.
function removeDarkness(source:BitmapData, sensitivity:uint = 10000):BitmapData
{
    // Define new BitmapData, with some size constraints to ensure the loop
    // doesn't time out / crash.
    // This is for demonstration only, consider creating a class that manages
    // portions of the BitmapData at a time (up to say 50,000 iterations per
    // frame) and then dispatches an event with the new BitmapData when done.
    var fresh:BitmapData = new BitmapData(
        Math.min(600, source.width),
        Math.min(400, source.height),
        true, 0xFFFFFFFF
    );

    fresh.lock();

    // Remove listed colors.
    for(var v:int = 0; v < fresh.height; v++)
    {
        for(var h:int = 0; h < fresh.width; h++)
        {
            // Select relevant pixel for this iteration.
            var pixel:uint = source.getPixel(h, v);

            // Check against colors to remove.
            if(pixel <= sensitivity)
            {
                // Match - delete pixel (fill with transparent pixel).
                fresh.setPixel32(h, v, 0x00000000);

                continue;
            }

            // No match, fill with expected color.
            fresh.setPixel(h, v, pixel);
        }
    }

    // We're done modifying the new BitmapData.
    fresh.unlock();

    return fresh;
} 
```

如您所见，它需要：

*   要从中删除较暗像素的 BitmapData。
*   uint 表示您想要移除多少个黑色/灰色阴影。

这是使用您的源图像的演示：

```
var original:Loader = new Loader();
original.load( new URLRequest("http://j.imagehost.org/0829/WoodyGX_0.jpg") );
original.contentLoaderInfo.addEventListener(Event.COMPLETE, imageLoaded);

// Original image has loaded, continue.
function imageLoaded(e:Event):void
{
    // Capture pixels from loaded Bitmap.
    var obmd:BitmapData = new BitmapData(original.width, original.height, false, 0);
    obmd.draw(original);

    // Create new BitmapData without black pixels.
    var heroSheet:BitmapData = removeDarkness(obmd, 1200000);
    addChild( new Bitmap(heroSheet) );
} 
```

# java - 不兼容的魔法值 1010792557 仅适用于 1 个客户端

> ID：10890459
> 
> 赞同：1
> 
> 时间：2012-06-05T01:25:01.527
> 
> 标签：java, applet

我有一个客户收到此错误，而小程序为许多其他用户正常工作。

```
java.lang.ClassFormatError: Incompatible magic value 1010792557 in class file %className%
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at sun.applet.AppletClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.applet.AppletClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.applet.AppletClassLoader.loadCode(Unknown Source)
at sun.applet.AppletPanel.createApplet(Unknown Source)
at sun.plugin.AppletViewer.createApplet(Unknown Source)
at sun.applet.AppletPanel.runLoader(Unknown Source)
at sun.applet.AppletPanel.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
java.lang.SecurityException: class "%className%"'s signer information does not match signer information of other classes in the same package
at java.lang.ClassLoader.checkCerts(Unknown Source)
at java.lang.ClassLoader.preDefineClass(Unknown Source)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$000(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at sun.applet.AppletClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.applet.AppletClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.applet.AppletClassLoader.loadCode(Unknown Source)
at sun.applet.AppletPanel.createApplet(Unknown Source)
at sun.plugin.AppletViewer.createApplet(Unknown Source)
at sun.applet.AppletPanel.runLoader(Unknown Source)
at sun.applet.AppletPanel.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我相信这个魔法值代表了一个 xml 标签的开始（基于这个[不兼容的魔法值 1010792557 在尝试运行嵌入在 Facelets 中的小程序时](https://stackoverflow.com/questions/8030528/incompatible-magic-value-1010792557-when-trying-to-run-applet-embedded-in-facele/8031138#8031138)）。安全错误发生在魔法值错误之后，我怀疑它是第一个问题的副产品。

我无法理解的是为什么这只发生在一个客户身上。

所有客户端都使用 JRE 版本 1.6.0_24-b07 和 IE 8.0.6001.18702。

在客户端机器上，我尝试通过 Java 控制面板清除缓存、删除临时 Internet 文件和删除临时 Internet 文件。我还尝试从 javacpl“受信任的证书”列表中删除证书，甚至从 javacpl>Advanced>Security>Mixed Code 关闭验证。

我没有想法，很想听听有关问题/解决方案的任何建议。

哦，小程序托管在一个 java wicket 项目中，该项目通过 apache 2.2（在 windows server 2008 上）在 tomcat 7.0.19 上运行。

# oauth - 如何在 salesforce.com 中使用 grant_type=password oauth 流程？

> ID：10890467
> 
> 赞同：9
> 
> 时间：2012-06-05T01:27:11.463
> 
> 标签：oauth, passwords, salesforce

我正在尝试使用用户名密码流程（如本文最后一节中所述）获取授权[令牌](http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_on_Force.com)。

我正在发送以下请求（使用 Python 的 httplib，以防万一）：

```
https://login.salesforce.com/services/oauth2/token

POST data:

username=<un>&client_secret=<consumer_secret>&password=<pw+token>&grant_type=password&client_id=<consumer_key> 
```

并得到回应：

```
400 Bad Request
{"error":"unsupported_grant_type","error_description":"grant type not supported"} 
```

密码grant_type 真的不受支持，还是我遗漏了什么？即使我发送肯定有效的grant_type（例如authorization_code），它似乎也会出现此错误。

请注意，我已经尝试了[此处](https://stackoverflow.com/questions/4970534/iphone-objective-c-oauth-2-0-login-unsupported-grant-type)答案中的建议，但它们对我不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T01:49:58.867

通常这是因为 content-type 标头没有设置为正确的值，它应该是`application/x-www-form-urlencoded`.

还要确保您的参数已正确编码（特别是如果您手动构建 POST 有效负载）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T20:24:42.247

以下是有关如何在 JAVA 中将 grant_type=password oauth 流与 salesforce.com 一起使用的详细功能/逻辑：

```
 // Authenticate via OAuth
    JSONObject response = oauthLogin();
    System.out.println("Login response: " + response.toString(2));
    if (!response.has("access_token")) {
        throw new Exception("OAuth failed: " + response.toString());
    }

    ..........................

    private static JSONObject oauthLogin() throws Exception {

    org.eclipse.jetty.client.HttpClient jettyHttpClient = new org.eclipse.jetty.client.HttpClient();
    jettyHttpClient.start();

    String url = LOGIN_SERVER + "/services/oauth2/token";

    ContentExchange exchange = new ContentExchange();
    exchange.setMethod("POST");
    exchange.setURL(url);

    String message = "grant_type=password&client_id=" + CLIENT_ID
            + "&client_secret=" + CLIENT_SECRET + "&username=" + USERNAME
            + "&password=" + PASSWORD;

    exchange.setRequestHeader("Content-Type",
            "application/x-www-form-urlencoded");
    exchange.setRequestContentSource(new ByteArrayInputStream(message
            .getBytes("UTF-8")));

    jettyHttpClient.send(exchange);
    exchange.waitForDone();

    return new JSONObject(new JSONTokener(exchange.getResponseContent()));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T12:23:35.363

您必须在表单数据中将 grant_type 设置为“密码”。见下文。

表单数据应通过 adgrant_type=password&username=nilavghosh%40gmail.com&password=******

# android - 为什么从 XML 扩展布局的 PopupWindow 不接受触摸事件？

> ID：10890469
> 
> 赞同：2
> 
> 时间：2012-06-05T01:27:49.557
> 
> 标签：android

给定`PopupWindow`这样的定义：

```
public class MyWindow extends PopupWindow implements View.OnTouchListener {
    MyWindow(View view) {
        super(view);

        setHeight(view.getMeasuredHeight());
        setFocusable(true);
        setTouchable(true);
        setTouchInterceptor(this);
    }

    public boolean onTouch(View v, MotionEvent event) {
        System.out.println("onTouch()");
        return true;
    }
} 
```

由于某种原因，`onTouch()`从未调用过。

我究竟做错了什么？我怎样才能`PopupWindow`接受触摸事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:27:49.947

正如在另一个问题的[答案](https://stackoverflow.com/a/3122696/1427098)`PopupWindow`中所讨论的，需要`Drawable`显式设置背景，即使它已从 XML 膨胀并且在视觉上不需要背景设置。

我通过添加这一行来解决这个问题：

```
 setBackgroundDrawable(new ShapeDrawable()); 
```

给构造函数。

# android - 如何从 NativeActivity 与带有 Java 端窗口内容（Xperia Play）的 ActionBar 进行交互？

> ID：10890473
> 
> 赞同：0
> 
> 时间：2012-06-05T01:28:28.117
> 
> 标签：android, android-actionbar, android-4.0-ice-cream-sandwich, native-activity

对于 ICS 之前的 Xperia Play，从触摸板获取输入的唯一方法是通过 NativeActivity（不是普通的旧 Activity）。不幸的是，NativeActivity 中的所有绘图，顾名思义，都是在本机端完成的，而不是在 Java 端完成的。为了在 Java 端获得带有图形的本机端输入，必须在 NativeActivity 的 onCreate 方法中添加以下内容：

```
 getWindow().takeSurface( null );
    getWindow().setContentView( R.layout.main ); 
```

并通过 JNI 设置几个方法来接收来自本机端的触摸板和触摸屏输入。然后，您可以愉快地通过 Android 的 Java API 进行绘图，同时仍然获得触摸板输入。这对于 Xperia Play 运行的 pre-ICS 非常有效。即使通过 onCreateOptionsMenu 添加菜单也不会导致任何问题。

当 Xperia Play 运行 ICS 时，问题就出现了。菜单已移至操作栏。不幸的是，无法与操作栏交互（按下 3 个点会被忽略，就像我在按下操作栏后面的表面一样。）

万一有什么不同，我将通过 onCreateOptionsMenu 创建操作栏菜单选项。我正在使用 Window.FEATURE_ACTION_BAR_OVERLAY，并在用户按下“后退”按钮时使操作栏可见（mSingleton 是 NativeActivity 实例）：

```
mSingleton.runOnUiThread(
    new Runnable()
    {
        public void run()
        {
            if( mSingleton.getActionBar().isShowing() )
                mSingleton.getActionBar().hide();
            else
                mSingleton.getActionBar().show();
        }
    } ); 
```

这使操作栏可见，但正如我所提到的，我无法与之交互。有没有办法强制动作栏有焦点或什么？普通菜单在 ICS 之前的版本上运行良好的事实让我认为它也应该可以与操作栏交互，因为它只是一个不同类型的菜单。

# vb.net - 将包含 SSRS 报告的 VB.Net 应用程序部署到客户的计算机

> ID：10890474
> 
> 赞同：0
> 
> 时间：2012-06-05T01:28:29.880
> 
> 标签：vb.net, reporting-services, deployment

我们创建了一个 VB.Net 应用程序，其中包括在我的开发计算机上运行的 SSRS 报告。

您是否知道逐步指导我们在客户计算机上部署报告的步骤？

我们将在目标计算机上安装 SQL Server 2012 Express Advanced，然后配置报告服务，然后安装应用程序。我们需要帮助的最后一部分是将报告本身安装在目标计算机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:54:56.463

[将报表发布到报表服务器](http://msdn.microsoft.com/en-us/library/ms159270.aspx)

# ruby-on-rails - 无法在 Rails 中分配内存错误（在本地创建文件夹时）

> ID：10890476
> 
> 赞同：0
> 
> 时间：2012-06-05T01:29:08.257
> 
> 标签：ruby-on-rails, memory, memory-management

我有一个 Rails 应用程序，它偶尔会给我这个错误：

```
 Errno::ENOMEM 
```

错误来自此函数：

```
 def create_folder
    new_dir = self.id.to_s
    working_dir = '/home/user/files/'
   # THIS LINE IS CAUSING THE ERROR:
    %x[cd #{working_dir} && mkdir #{new_dir}]
    working_dir = working_dir + new_dir + '/'
    self.working_dir = working_dir
   self.save! 
```

这个错误是从控制器发生的，在创建模型时调用上述函数......

如果有人指出如何处理它，将非常感激..

我看不出它为什么发生或何时发生的任何模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:07:35.120

只是为了记录。当我开始使用 Ruby 的 Dir 时，错误就消失了。

所以

```
%x[mkdir NNN] # THIS IS BAD
Dir.mkdir("BBB") # THIS IS GOOD. 
```

# mongodb - 带有 MongoDB 的重复事件模式

> ID：10890480
> 
> 赞同：6
> 
> 时间：2012-06-05T01:29:18.340
> 
> 标签：mongodb, schema, schema-design, mongodb-query

我已经阅读了一些描述重复事件的数据存储方法的论文，但我仍在尝试围绕最佳实践，尤其是关于 MongoDB。

我主要关心的是廉价地检索给定时间范围内发生的所有事件。我的次要关注是修改和更改单个事件，而不会使整个事件链失控。

看看其他提出类似问题的人，我想出了一个可能性。我并没有完全接受它，并且会喜欢一些正确方向的指示。

我的想法：在每个事件文档中，有...

*   与 iCal 标准非常匹配的重复出现的字符串字段
*   包含对特定事件的更改/编辑（例如更改描述或开始时间，或取消单个事件）的“发生”嵌入文档或数组字段。
*   一个发生开始和结束字段，用于定义重复规则的易于查询的边界

优点：

*   能够存储更改并仍然保持与其他事件的关联
*   很容易询问，我在业务方面的模型将不得不构建每个事件

缺点/潜在问题：

*   如果编辑事件，并且用户决定将更改标记为应用于“所有事件” - 如何防止已经过去的事件被更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:20:17.783

这对我来说似乎是一个好方法。要“防止已经过去的事件被更改”，只需用一个布尔标志标记它们即可。您应该能够在查询和更新时轻松使用该标志和开始/结束日期。

或者，您可以： - 为原始事件设置结束日期 - 克隆事件，并为新事件设置新的开始和结束日期。- 清空克隆事件的发生字段

像这样做：

*之前*：

```
{
    'title' : "Gin O'Clock",
    'recurrance' : 'DAILY',
    'start_date' : '2012-01-01 17:00',
    'end_date' : false,
    'occurences' : [
        { 'date' : '2012-06-03 17:00', 'title' : "Jubilee Gin O'Clock" }
    ]
} 
```

*之后*：

```
{
    'title' : "Gin O'Clock",
    'recurrance' : 'DAILY',
    'start_date' : '2012-01-01 17:00',
    'end_date' : '2012-06-05 17:00,
    'occurences' : [
        { 'date' : '2012-06-03 17:00', 'title' : "Jubilee Gin O'Clock" }
    ]
},
{
    'title' : "Gin O'Clock an our earlier",
    'recurrance' : 'DAILY',
    'start_date' : '2012-06-06 16:00',
    'end_date' : false,
    'occurences' : [
    ]
} 
```

希望有帮助！

# php - PHP函数循环遍历变量并输出它

> ID：10890481
> 
> 赞同：0
> 
> 时间：2012-06-05T01:29:28.333
> 
> 标签：php, function

我正在尝试制作一个小 php 函数，以便我可以轻松地在我的网站中创建和更改链接。我正在为哈希页面使用 jQuery 插件，这是我的网站所驱动的，所有基于哈希的网站，所以我经常使用它，并且在某些时候如果我想更改 URL 设置，它会永远通过每个放置并执行。

我现在有这样的东西，它适用于前两个变量，但问题是有时可能只返回一个变量，而其他时候可能有 2 个或 4 个，将来甚至超过我定义的四个。

```
function href($page, $pageID, $subPage, $subPageID)
{

$href = 'href="#/'.$page.'/'.$id.'" rel="address:/'.$page.'/'.$id.'"';

return $href;   
} 
```

完成的链接如下所示：

```
<a href="#/home" rel="address:/home"></a> 
```

和或

```
<a href="#/profile/1" rel="address:/profile/1"></a> 
```

和或

```
<a href="#/profile/1/subPage/2" rel="address:/profile/1/subPage/2"></a> 
```

等等

我想使用该功能来完成此操作，其用法大致如下：

```
<a <?php echo href('home')?>></a> 
```

和或

```
<a <?php echo href('profile', '1')?>></a> 
```

和或

```
<a <?php echo href('profile', '1', 'subPage')?>></a> 
```

等等

任何有关如何解决此问题的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:49:17.340

试试这个：

```
function href(){
    $url = implode('/', func_get_args());
    $href = 'href="#/'.$url.'" rel="address:/'.$url.'"';
    return $href;   
} 
```

调用`href('hello', 'world', '1');`时应返回字符串

```
href="#/hello/world/1" rel="address:/hello/world/1" 
```

# javascript - JavaScript 中的地板编号：~~n、n|0 还是 Math.floor(n)？

> ID：10890486
> 
> 赞同：4
> 
> 时间：2012-06-05T01:30:03.880
> 
> 标签：javascript, integer

我最近发现了一些其他方法来删除 JavaScript 中数值的小数部分，而不是`Math.floor(n)`，特别是双位 NOT 运算符`~~n`并执行位或 0 `n|0`。

我想知道这些方法之间有什么区别，以及推荐一种方法而不是另一种方法的不同场景是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T01:39:57.917

所有位运算符的操作数都转换为有符号的 32 位整数：

```
Math.floor(2147483648) // 2147483648
2147483648 | 0         // 2147483648
~~2147483648           // 2147483648

Math.floor(2147483649) // 2147483649
2147483649 | 0         // -2147483647
~~2147483649           // -2147483647 
```

所以使用 Math.floor();

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T01:31:44.363

让下一个查看您的代码并使用`Math.floor()`.

[1%-40% 的性能提升](http://jsperf.com/js-floors)并不值得，所以不要让你的代码混乱和难以维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T01:39:38.180

（我完全同意 josh 的回答：赞成清晰的可维护代码。）

以下是对其他按位方法的解释：

位运算符之所以有效，是因为它们*仅对*32 位（有符号）整数进行运算符，但 JavaScript 中的数字都是 IEEE-754 值。因此，按位运算符的操作数会发生内部转换（*截断，而不是下限！）。*

然后，应用的按位运算（例如`n<<0`或）*充当*对转换后的值“不做任何事情”的恒等函数：也就是说，所有这些方法都依赖于应用于按位操作数的相同转换。`~~n``n|0`

 *尝试`n`作为负数或 [-2 ^(31) , 2 ^(31) -1] 之外的值：

```
(-1.23|0)            // -1
Math.floor(-1.23)    // -2

var x = Math.pow(2, 40) + .5
x|0                  // 0
Math.floor(x)        // 1099511627776 
```

快乐编码。*

# php - 使用PHP的数组中的子数组

> ID：10890488
> 
> 赞同：0
> 
> 时间：2012-06-05T01:30:06.073
> 
> 标签：php, arrays, loops, foreach, while-loop

当我执行以下操作时

```
$arr['exchange'] = array('to' => $to, 'rate' => $result[0]); 
```

该代码有效，但只打印一次。

当我这样做时

```
$arr['exchange'] .= array('to' => $to, 'rate' => $result[0]); 
```

它打印出来

```
{"from":"NZD","exchange":"ArrayArrayArrayArray"} 
```

什么是正确的循环方式，以便它可以在交换数组中设置 6 个子数组？

这是我的完整代码

```
<?php

$currencies = array("USD", "NZD", "KWD", "GBP", "AUD");
foreach ($currencies as $from)
{
$arr = array();
$arr['from'] = $from;
//$arr['exchange'] = array();

 foreach ($currencies as $to)
 {
    if($from != $to)
    {

        $url = 'http://finance.yahoo.com/d/quotes.csv?f=l1d1t1&s='.$from.$to.'=X';
        $handle = fopen($url, 'r');

        if ($handle) {
            $result = fgetcsv($handle);
            fclose($handle);
        }
        $results = $result[1].$result[2];
        $arr['exchange'] = array('to' => $to, 'rate' => $result[0]);

    }
 }
 print json_encode($arr);
 print"<br><br>";
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:33:37.383

在 PHP 中为数组添加附加索引时，可以使用方括号[]。

例如，`$arr['exchange'][] = array('to' => $to, 'rate' => $result[0]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:10:55.623

您的代码存在一些问题，即您正在寻找`[]`要附加到数组中的符号。

其次，我了解您要对阵列形成做什么，但我不确定为什么。使用键来跟踪各种汇率交叉点似乎更容易创建如下所示的数组，这也将在以后的 javascript 方面更容易管理。

```
 $currencies = array("USD", "NZD", "KWD", "GBP", "AUD");
    $cross = array();
    foreach ($currencies as $from) {
        $cross[$from] = array();
        foreach ($currencies as $to) {
            if ($from != $to) {
                $url = 'http://finance.yahoo.com/d/quotes.csv?f=l1d1t1&s=' . $from . $to . '=X';
                $handle = fopen($url, 'r');

                if ($handle) {
                    $result = fgetcsv($handle);
                    //echo "$from:$to - <br/>";
                    //var_dump($result);
                    fclose($handle);
                    $cross[$from][$to] = $result[0];
                }
            } else {
                $cross[$from][$to] = 1;
            }
        }
        print json_encode($cross);
        print"<br><br>";
    } 
```

这样你最终会得到这样的东西：

```
{
"USD": {...},
"NZD": {"USD":1.532,"NZD":1,"KWD":0.81,"GBP":1.546,"AUD":1.120},
"KWD": {...},
"GBP": {...},
"AUD": {...}
} 
```

并且可以在 javascript 中访问它，例如：

`cross[from][to]`

或者

`cross.NZD.USD`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:58:46.387

在上面的代码片段中，您需要使用 array_push 函数创建多维数组。

例如 array_push($arr['exchange'],array('to' => $to, 'rate' => $result[0]));

# internet-explorer - Using Twitter Bootstrap I cannot copy the text in the active Tab-pane in IE

> ID：10890489
> 
> 赞同：0
> 
> 时间：2012-06-05T01:30:13.543
> 
> 标签：internet-explorer, twitter-bootstrap, webfonts

I am using standard Twitter-Bootstrap code for nav-tabs - [http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

All functionality works but in IE9 and IE8 and IE7 browser modes I cannot select and copy any of the text content within the active panel. I can in Opera, Chrome etc.

Text outside the panel can be copied in IE.

I am using webfonts but these can be copied outside the active panel.

Cannot post link as its on locked down dev server. Tested the same on different machines

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:39:06.177

I had exactly the same issue yesterday.

Eventually found a CSS rule for .tab-content {display:table;} was causing the issue. I added my own CSS rule to override this, setting .tab-content{display:block;} and this fixed the issue. I don't know why display:table would do this, but that's how I fixed it...

# java - 如何从给定的随机生成器创建唯一的随机数

> ID：10890499
> 
> 赞同：5
> 
> 时间：2012-06-05T01:31:41.350
> 
> 标签：java, random, numbers, unique

```
Write an efficient algorithm to print the following two outputs 
```

> 您将获得一个名为 getrand100() 的预定义函数，该函数返回一个整数，该整数是 1-100 之间的一个随机数。您可以根据需要多次调用此函数，但请注意此函数非常耗费资源。您不能使用任何其他随机生成器。您不能更改 getrand100() 的定义。

```
int getrand100(){
    Random rand = new Random();
return (1+rand.nextInt(100));      
} 
```

*   输出 1：以随机顺序打印数字 1-20。（不是 20 个随机数）
*   输出 2：以随机顺序打印数字 1-200。（不是 200 个随机数）

笔记：

*   一世。每个数字都应该只打印一次。
*   ii. 数字列表中不应有任何模式。列表应该是完全随机
    的，即所有数字在任何地方出现的概率都是相等的。
*   iii. 您可以调用 getrand100() 任意次数来获取从 1 到 100 的随机数。
*   iv. 您不能使用除 getrand100() 之外的任何其他随机生成器函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:23:34.257

这个想法是使用给定的随机生成器来计算所需的随机数。

1) 对于随机数 1-20，只需将 100 个数均分即可表示 1 到 20。

2) 生成 1-200，找到 1 到 200 的偶数，然后加上（-1 或 0），得到 1 到 200 的所有数字。

```
import java.util.*;
public class Rand20_200{
   int number20[]=new int[20]; //numbers in random order
   int number200[]=new int[200];

   public Rand20_200(){
    int n=0;
    int ngen[]=new int[20]; //to store which random numbers are generated
    while(n<20){
      int rnd=1 + (getrand100()-1) / 5;
      if (ngen[rnd-1]==0){
        ngen[rnd-1]=1;
        number20[n++]=rnd;
      }
    }
    System.out.println("Random 20 numbers");
    print(number20);

    ngen=new int[200]; //to store which random numbers are generated
    int numoff[]={-1,0}; //offset to add
    n=0;
    while(n<200){
      int rnd=numoff[(getrand100()-1)/50]+ (getrand100()*2);
      if (ngen[rnd-1]==0){
     ngen[rnd-1]=1;
     number200[n++]=rnd;
      }
    }   
    System.out.println("\nRandom 200 numbers");
    print(number200);
   }

   int getrand100(){
    Random rand = new Random();
    return (1+rand.nextInt(100));      
   }

   void print(int arr[]){
     for(int i=0;i<arr.length;i++){
       System.out.print(arr[i]+" ");
     }
   }

   public static void main(String args[]){
     new Rand20_200();
   }

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:36:40.350

假设这是家庭作业，我会保持简洁的答案。:)

查看[模数](http://en.wikipedia.org/wiki/Modular_arithmetic)运算符 %

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:05:13.997

您可以使用您的值 (1 - 20, 1 - 200) 和随机数创建一个列表，然后根据随机数对列表进行排序。

```
public class RandomListItem
{
    int value;
    int sortindex;

    public RandomListItem(x,y)
    {
        value = x;
        sortindex = y;
    }
}

for(int i = 1; i <= maxvalue; i++)
{
    list.add(new RandomListItem(i, getrand100());
} 
```

这对于 200 列表可能不太好，因为您只能生成最多 100 个的随机数。可能想要使用 getrand100() * getrand100() 或其他东西来生成更广泛的随机数。

# iphone - 无法设置成员变量

> ID：10890502
> 
> 赞同：0
> 
> 时间：2012-06-05T01:32:26.967
> 
> 标签：iphone, objective-c

很奇怪的问题。

我有以下代码：

```
NSDictionary* notificationUserInfo = [pNotification userInfo];
NSManagedObject* newShoppingFilter = [notificationUserInfo valueForKey:@"shoppingListFilter"];
self.shoppingListFilter = newShoppingFilter;
NSLog(@"%@ tapped", [newShoppingFilter valueForKey:@"name"]); 
```

由于某种原因 self.shoppingListFilter = newShoppingFilter 没有设置变量。

我认为这是没有以某种方式初始化 self.shoppingListFilter 变量的一些问题，但我无法弄清楚。NSLog 显示正确的输出，newShoppingFilter 不为空，但 self.shoppingListFilter 为。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:09:56.817

我敢打赌 newShoppingFilter 是零。最有可能的是，通知用户信息字典中没有键“shoppingListFilter”。

在为 self.shoppingListFilter 赋值的行设置断点并检查 newShoppingFilter 的值。同时显示notificationUserInfo 的全部内容。

发布创建用户信息字典并将其传递到您发布的通知的代码。这将有助于追查问题。

# java - 类路径中的多个 Log4j.properties 文件

> ID：10890505
> 
> 赞同：17
> 
> 时间：2012-06-05T01:33:24.953
> 
> 标签：java, logging, log4j

Log4j 如何在其类路径中管理多个 log4j.properties？哪个 log4j.properties 文件优先？让我描述一下确切的场景。

我有多个由不同团队开发的 Maven 模块，每个模块都有自己的 log4j.properties 文件。所有这些 log4j.properties 文件都配置了 RootLogger 以及 ConsoleAppender 和 FileAppenders。

现在，当 Log4j 加载哪个 log4j.properties 文件时，它将用于配置 RootLogger 设置？另外，Log4j 将如何创建 Logger 层次结构？其他 3rd 方 jar 中的 log4j.properties 文件将如何影响日志记录过程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T07:07:18.587

类路径中的第一个文件将被加载。因此，如果 A.jar 和 B.jar 都包含一个文件，并且 A.jar 在类路径中位于 B.jar 之前，则将加载 A.jar 的文件。这就是类加载器的工作方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-15T20:24:53.727

**log4j 版本 1.x：**

正如其他人所说，log4j 在类路径中查找第一个配置文件。见： http: [//logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

但是当类路径中同时存在“log4j.xml”和“log4j.properties”文件时，从实验来看，log4j 似乎优先于“log4j.xml”而不是“log4j.properties”。

即首先，log4j 似乎在类路径中查找第一个“log4j.xml”文件。如果没有，那么 log4j 似乎会在类路径中查找第一个“log4j.properties”文件。

从下面的代码中复制和粘贴可能有助于确定正在使用的配置文件：

```
import org.apache.log4j.Logger;

public class TestLog4j
{

  static
  {
    System.out.println("Classpath: [" + System.getProperty( "java.class.path" ) + "]" );
    System.out.println("Found logging configuration files:");
    System.out.println("  log4j.xml: " + Logger.getRootLogger().getClass().getResource( "/log4j.xml" ) );
    System.out.println("  log4j.properties: " + Logger.getRootLogger().getClass().getResource( "/log4j.properties" ) );
  }

  public static void main(String[] args)
  {
    System.out.println("main():");
  }
} 
```

**编辑：**

**log4j 版本 2.x：**

默认配置文件的搜索顺序记录在这里： http: [//logging.apache.org/log4j/2.x/manual/configuration.html](http://logging.apache.org/log4j/2.x/manual/configuration.html)

即对于 log4j 版本 2.x，如果没有找到更高优先级的配置文件（例如 log4j2-test.[properties | yaml | json | xml]），那么如果在类路径中找到文件 log4j2.properties，则使用该文件。请注意，log4j2.xml 的优先级最低，仅当 log4j2 'properties'、'yaml' 或 'json' 配置文件都找不到时才会使用。

**注意：**为了帮助调试 log4j 配置问题，设置“log4j.debug”属性，例如：

```
java -Dlog4j.debug ... 
```

**另请参阅：** [如何正确初始化 log4j？](https://stackoverflow.com/questions/1140358/how-to-initialize-log4j-properly)

# sorting - yii 按自定义属性排序

> ID：10890507
> 
> 赞同：1
> 
> 时间：2012-06-05T01:34:05.057
> 
> 标签：sorting, yii, virtual-attribute

在我的*假期*模型*Vac*中，我有这个功能

```
public function getVacCount(){ 
```

此函数返回一个假期有多少天。

我想像这样向 cgridview 添加一个自定义列：

```
 <?php
    $this->widget('zii.widgets.grid.CGridView', array(
            ...
            array(
                'name' => 'count',
                'value' => '$data->getVacPeriod()'
            ),
            ...
        ),
    ));
    ?> 
```

它工作正常。但我不知道如何对这个自定义属性进行排序。我尝试使用 CSort 但它不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T04:41:09.580

要使用 CSort 进行排序，您需要将假期函数转换为 SQL 查询，然后将结果存储在模型中的公共变量中。

CSort 仅适用于 SQL 语句/函数，因为它在下面使用 ORDER BY 进行所有排序。

[此处](https://stackoverflow.com/questions/10472732/yii-add-filter-to-a-virtual-attribute-in-cgridview-and-make-it-sortable)提供更多信息（和演示代码）

这是我如何在我的网站上执行此操作的示例：

```
$criteria->select = array(
        "*",
        new CDbExpression("IF(survey.RequestDate, survey.RequestDate, SurveyCompleteDate) AS SurveyDate")
    ); 
```

然后，这允许我执行这种类型的过滤器：

```
return new CActiveDataProvider($this, array(
    'criteria' => $criteria,
    'sort'=>array(
        'attributes'=>array(
            'SurveyDate' => array(
                'asc' => 'SurveyDate',
                'desc' => 'SurveyDate DESC',
            ),
            '*',
        ),
    ),
); 
```

注意：您还需要在模型中定义一个公共变量来保存您正在执行的 CDbExpression 的结果。我的叫SurveyDate。

# javascript - 内容未加载到 Facebook 中

> ID：10890509
> 
> 赞同：0
> 
> 时间：2012-06-05T01:34:21.267
> 
> 标签：javascript, jquery, html, css, facebox

我在使用 facebox 时遇到了一些问题，似乎找不到解决方案。无论如何，我已正确显示所有内容并且图像可以正常工作，但我的内容不会加载。当您单击带有 rel="facebox" 标记的链接时，它会显示该框，但它只显示 loading.gif 而没有我的内容。有谁知道是什么原因造成的？这可能是非常简单的事情，但我似乎无法在我的代码中找到它。这是该页面的链接：[http](http://www.mcallaro.com/smc/contact.html) ://www.mcallaro.com/smc/contact.html 。目前我的内容是 display:block 所以你可以看到它在那里但是一旦你关闭它并点击联系按钮你会看到我的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:55:46.423

我以前没有使用过 facebox，但这很可能是你的问题：

```
<li><a href="#" rel="facebox">Contact Us</a></li> 
```

您的联系链接没有指向任何地方，因为它有 # 符号而没有其他文本。facebox 的链接与[锚链接](http://www.w3schools.com/HTML/html_links.asp)的工作方式类似。要使其工作，您必须将链接指向页面内的 div。例如：

您的链接如下所示：

```
<a href="#contact" rel="facebox">Contact Us</a><!-- #contact is the id of the div you are linking to --> 
```

您在同一页面中的 div 如下所示：

```
<div id="contact">
   <!-- Your content here -->
</div> 
```

截至目前，您的链接无处可去，并且您的联系信息位于带有内容类名称的 div 中。

实际上，您也不必有单独的联系我们页面。只需简单地将联系人 div 放在您将拥有链接的每个页面中，默认情况下它将隐藏，直到单击联系人链接。

# iphone - 在 xcode 中制作一个可分配的网格以进行 segue

> ID：10890510
> 
> 赞同：0
> 
> 时间：2012-06-05T01:34:37.057
> 
> 标签：iphone, objective-c, xcode4.2

我需要实现一个图像的网格视图，该视图要求每个段都连接到另一个视图控制器/或视图。

我的参数：

我需要 260 个片段：大约 18px x 18px 每个片段将被编号（1-260）并具有不同的（背景）图像必须突出显示一个片段（像 ical 一样的每日方块）您可以点击任何片段以转到下一个视图控制器

我查看了自定义 TVCells / Buttons，但还有更多选择吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:22:38.533

最后我选择了：

*   将故事板中的 1stViewController 链接到 2ndViewController 并在属性中命名 seque.identifier。
*   在 IB 中创建 UIButton 网格并在属性中为它们分配单独的标签（1-260 - 不要使用 0，因为它是默认值）。

为了每天更改按钮的背景图像，我设置了一个日计数器整数，并在 1stVC 编码的 viewDidLoad 中：

```
 [(UIButton*)[self.view viewWithTag:dayCount] setBackgroundImage:[UIImage imageNamed:@"image_Day.png"] forState:UIControlStateNormal]; 
```

由于有多个 UIButton，我认为将它们全部拖到 IB 中的 IBAction 是一项太长的任务，因此我以编程方式使用：

```
-(void) assignButtons{
[(UIButton*)[self.view viewWithTag:1] addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
[(UIButton*)[self.view viewWithTag:2] addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
} //etc for all 260 
```

然后使用 performSegueWithIdentifier: 在方法中：

```
-(IBAction) buttonClicked:(id)sender{

[self performSegueWithIdentifier:@"mySegue" sender:self];
} 
```

# php - 如何仅显示前几天或今天的内容？

> ID：10890513
> 
> 赞同：1
> 
> 时间：2012-06-05T01:35:41.007
> 
> 标签：php, date, if-statement

我有一个非常简单的问题，我只是不确定为什么我的代码不起作用。

```
<div id="right_bottom">
<?
list($y, $m, $d) = explode('-', $pagedata->program->start);
foreach($pagedata->program->__workouts as $day => $workout){
   if (date('F j, Y', mktime(0, 0 ,0, $m, $day, $y)) <= date('F j, Y')){
?>
   <div id="right_side">
    <div id="<?=$workout->id?>" class="side_items">
     <a class="workouts" href="<?=$pagedata->program->id?>,<?=$day?>">
     <img src="<?=PROTOCOL?>//<?=DOMAIN?>/img/workout/<?=$workout->image?>"><br />
     <strong><?=$workout->title?></strong></a><br />
     <h2><?=date('F j, Y', mktime(0, 0 ,0, $m, $day, $y))?></h2><br />
   </div>
  </div>

<?
}
}
?>
</div> 
```

我希望 IF 条件语句仅显示今天之前或等于今天的“右侧”DIV。

它目前仍在显示所有天

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:41:16.457

我会假设它是因为您正在尝试比较两个字符串。尝试比较 unix 时间戳：

```
if (mktime(0, 0 ,0, $m, $day, $y) <= time()){ 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:41:35.443

您正在将字符串作为十进制值进行比较，请尝试：

```
if(strtotime($y.'-'.$m.'-'.$day) <= strtotime('today')){
    // ...
} 
```

# c# - 更简单地重写递归算法 - Euler 15

> ID：10890516
> 
> 赞同：0
> 
> 时间：2012-06-05T01:36:25.997
> 
> 标签：c#, recursion

我想以非递归的方式重写这个算法（我用来解决 ProjectEuler 问题 15）的功能。

是的，我意识到有很多更好的方法可以解决实际问题，但作为一个挑战，我想尽可能简化这个逻辑。

```
public class SolveRecursion
{
    public long Combination = 0;
    public int GridSize;

    public void CalculateCombination(int x = 0, int y = 0)
    {
        if (x < GridSize)
        {
            CalculateCombination(x + 1, y);
        }
        if (y < GridSize)
        {
            CalculateCombination(x, y + 1);
        }
        if (x == GridSize && y == GridSize)
            Combination++;
    }
} 
```

和测试：

```
[Test]
public void SolveRecursion_GivenThree_GivesAnswerOf20Routes()
{
    solveRecursion.GridSize = 3;
    solveRecursion.CalculateCombination();
    var result = solveRecursion.Combination;
    Assert.AreEqual(20, result);
}

[Test]
public void SolveRecursion_GivenFour_GivesAnswerOf70Routes()
{
    solveRecursion.GridSize = 4;
    solveRecursion.CalculateCombination();
    var result = solveRecursion.Combination;
    Assert.AreEqual(70, result);
} 
```

编辑：这是另一个以两种方式编写的简单函数：

```
//recursion
private int Factorial(int number)
{
    if (number == 0)
        return 1;
    int returnedValue = Factorial(number - 1);

    int result = number*returnedValue;
    return result;
}

//loop
private int FactorialAsLoop(int number)
{
    //4*3*2*1
    for (int i = number-1; i >= 1; i--)
    {
        number = number*i;
    }
    return number;
} 
```

任何提示将不胜感激。我尝试了动态编程解决方案（它使用更多基于数学的方法）和一个成功解决难题的方程式。

我想知道——这第一个算法可以简单地做成非递归的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T17:20:46.940

非递归解决方案是：

```
const int n = 4;
int a[n + 2][n + 2] = {0};

a[0][0] = 1;
for (int i = 0; i < n + 1; ++i)
    for (int j = 0; j < n + 1; ++j) {
        a[i][j + 1] += a[i][j];
        a[i + 1][j] += a[i][j];
    }

std::cout << a[n][n] << std::endl; 
```

仅供参考，这个问题应该已经在纸上解决了，NxM 网格的答案是 C(N+M,N)，其中 C 是组合函数 - [http://en.wikipedia.org/wiki/Combination](http://en.wikipedia.org/wiki/Combination)

# android - 呼叫公共无效

> ID：10890518
> 
> 赞同：0
> 
> 时间：2012-06-05T01:36:34.077
> 
> 标签：android, class, void

我在一个班级中有一个公共空白，我想在它创建时在另一个班级中调用它，但似乎没有任何效果。这是我的第一个活动的代码

```
public class activityone extends Activity {

public void actionC() {

//actions

} 
```

有谁知道如何在我的第二堂课上称呼它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:52:01.893

通常，您需要有一个 activityone 类的实例才能调用实例方法。

要创建实例，您通常使用如下构造函数：

```
activityone a = new activityone();
a.actionC(); 
```

我不确定这是否是您想要的，因为`Activity`s 通常是由 Android 系统本身创建的，您应该处理该`onCreate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:13:15.073

这是您可以执行的操作：

```
public class activityone extends Activity {

/*public void actionC() {*/ //Instead on normal method, write your actions in onCreate()

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
//actions
} 
```

* * *

在您的第二个活动中，执行以下操作：

```
Intent intent = new Intent(getApplicationContext(),activityone.class);
startActivity(intent); 
```

希望能帮助到你 ！！！

# jquery - Mobile Safari 中不成比例的缩放/奇怪的图像截断

> ID：10890522
> 
> 赞同：0
> 
> 时间：2012-06-05T01:37:18.830
> 
> 标签：jquery, iphone, ios, mobile-safari

我们在一个简单的网页上显示六幅图像。

它们都以相同的尺寸显示，320 像素 x 180 像素。图像都大于这些尺寸，并被浏览器缩小。

然而，除了第四个和第五个图像之外的所有图像在 Mobile Safari 中都被不成比例地缩放，即使这些图像在桌面上看起来很好（具有适当的比例）。

如果我们只显示三幅图像，它们都会被正确渲染。

这是否与 iPhone 上有限的处理能力有关？

按比例渲染图像的选项有哪些？

我们正在使用 jQuery。

网页： http: [//www.panabee.com/potsticker](http://www.panabee.com/potsticker)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:55:38.073

您的图像设置为 100% 和 180 像素，因此除非浏览器的宽度正好为 320 像素，否则您的图像会失真。

您可以将`.stream`类设置为 320px 宽。

我建议使用图像标签。

将图像宽度设置为 100%，高度未定义。如果您需要裁剪图像，请将它们放在一个元素中并设置高度和溢出。

```
<div style="height:180px; overflow-y:hidden"><img .... 
```

尽管最好提前准备好图像以获得相同的比例。

如果您需要图像更窄一点，那么您可以设置元素父级的宽度。

此外，您可能希望在移动设备上使用较低分辨率的图像……这些图像很大。

# java - Java游戏开发。使瓦片地图更快。优化建议

> ID：10890523
> 
> 赞同：1
> 
> 时间：2012-06-05T01:37:18.923
> 
> 标签：java, optimization, map, game-engine

我正在尝试制作一个需要根据事件工作的全自动游戏引擎。我面临的问题是我制作了一个地图类，并在游戏类中初始化了它。它几乎是静态的，一个游戏只存在一张地图。通过清除当前地图中的对象并添加新地图来加载新地图。您可以在此处查看地图类的来源。

[http://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/map/Map.java](http://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/map/Map.java)

主要问题出现在碰撞检测中，我不应该使用暴力碰撞检测。这大大减慢了游戏的速度，我只想检查靠近物体的物体的碰撞。我一直在使用 MapLoader 接口来构建地图。我认为在另一个线程中调用对象的碰撞（）方法可能会有所帮助。但是，所有地图对象都在 Game 类中更新。

这是游戏课程，如果它可能有帮助的话

[http://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/core/Game.java](http://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/core/Game.java)

还有另一个问题，有时对象没有被销毁。我正在调用地图的 removeObject() 方法，但它需要 1 秒的延迟，有时根本不会删除。

它在一个平台游戏中给我 48-64 fps，游戏中有 158 个对象。但在太空侵略者风格的游戏中，它只给我 20-30 fps。非常感谢任何有关优化的建议...

如果有人能给我一个关于二进制间距等的教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:44:52.357

查看您的代码有两个建议：第一件事是您应该尽量减少碰撞检测中的对象分配，不要创建新`Rectangles`的，通过直接编写碰撞检测算法来处理已有的数据。

其次更重要的是：碰撞检测引擎应该使用两个级别来工作：

*   粗略级别的碰撞已经排除了肯定太远而无法碰撞的对象（您可以在这里使用许多技术，例如大碰撞斑点的[二进制空间分区](http://en.wikipedia.org/wiki/Binary_space_partitioning)算法，或对象的层次结构）
*   一个精细级别，它将使用更精确的算法计算可能发生的碰撞的具体细节

# sql - SQL中两列的元素商

> ID：10890525
> 
> 赞同：1
> 
> 时间：2012-06-05T01:37:24.203
> 
> 标签：sql, database

如何组合两个`SELECT`语句返回的列以给出它们的元素商数？

查询一：

```
SELECT COUNT(*) AS count
FROM table1
WHERE col2 = 1 AND col3 > 5
GROUP BY col4
ORDER BY col4 
```

查询 2：

```
SELECT COUNT(*) AS count
FROM table1
WHERE col2 = 1
GROUP BY col4
ORDER BY col4 
```

因此，如果他们返回如下内容：

```
Query 1        Query 2
count           count
-----------------------
1              5
2              4 
```

我会得到：

```
quotient
-------
0.2
0.5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:57:48.983

对于问题的 4 列版本，我们可以假设商在 中具有相同值的组之间`col4`。所以，答案就变成了：

```
SELECT col4, SUM(CASE WHEN col3 > 5 THEN 1 ELSE 0 END) / COUNT(*) AS quotient
  FROM table1
 WHERE col2 = 1
 GROUP BY col4; 
```

我保留`col4`在输出中，因为我认为如果没有确定哪个商与哪些值相关联的东西，比率（商）将没有用，尽管理论上，答案不希望输出中的该列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:46:40.383

如果您的实际查询无法按照其他答案进行简化，您可以加入子查询，如下所示：

```
select j1.count / j2.count as quotient
from (
   SELECT col4, COUNT(*) AS count
   FROM table1
   WHERE col2 = 1 AND col3 > 5
   GROUP BY col4      
) j1
join (
   SELECT col4, COUNT(*) AS count
   FROM table1
   WHERE col2 = 1
   GROUP BY col4
) j2 on j1.col4=j2.col4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T01:55:57.953

在这种情况下，您根本不需要两个单独的查询：

```
SELECT   SUM(col3 > 5) / COUNT(*)
FROM     table1
WHERE    col2 = 1
GROUP BY col4
ORDER BY col4 
```

# mongodb - mongodb获取计数而不重复查找

> ID：10890529
> 
> 赞同：7
> 
> 时间：2012-06-05T01:37:53.057
> 
> 标签：mongodb, count

在 MongoDb 中执行查询时，我需要获取所有匹配项的总数，以及作为有限/分页子集的文档本身。

我可以通过两个查询来实现目标，但我不知道如何用一个查询来做到这一点。我希望有一个 mongo 功能，在某种意义上，相当于 SQL_CALC_FOUND_ROWS，因为必须运行两次查询似乎有点矫枉过正。任何帮助都会很棒。谢谢！

编辑：这是执行上述操作的 Java 代码。

```
 DBCursor cursor = collection.find(searchQuery).limit(10);
     System.out.println("total objects = " + cursor.count()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T01:44:14.417

我不确定您使用的是哪种语言，但您通常可以`count`在游标上调用作为查询结果的方法`find`，然后使用相同的游标来获取文档本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T07:48:39.973

运行两次查询不仅过大，而且还存在不一致的风险。集合可能会在两个查询之间发生变化，或者每个查询可能会被路由到副本集中的不同对等点，这些对等点可能具有不同版本的集合。

游标上的 count() 函数（在 MongoDB JavaScript shell 中）确实运行了另一个查询，您可以通过键入“cursor.count”（不带括号）看到这一点，因此它并不比运行两个查询好。

在 C++ 驱动程序中，游标甚至没有“计数”功能。有“itcount”，但它只循环游标并获取所有结果，这不是你想要的（出于性能原因）。Java 驱动程序也有“itcount”，文档说它应该只用于测试。

似乎没有办法持续有效地“找到一些并获得总数”。

# html - 居中与动态表大小相邻且左对齐的表

> ID：10890539
> 
> 赞同：0
> 
> 时间：2012-06-05T01:40:37.847
> 
> 标签：html, css

这是一个例子 - [http://jsfiddle.net/Xb4gV/](http://jsfiddle.net/Xb4gV/)

我的问题是我想让左边的 2 张桌子居中，因为右边的第 3 张桌子会增加尺寸（网格视图）。我希望他们居中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:22:43.760

嗨，您只需像这样添加父 div 的宽度

```
#wrapper{
 vertical-align:top;
 margin: 0 auto;
overflow:hidden;
width:200px;
border:solid 10px red;    
} 
```

现场演示在这里[http://jsfiddle.net/Xb4gV/57/](http://jsfiddle.net/Xb4gV/57/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:57:08.853

不完全确定您要完成什么，但您可以尝试一下。离开你所说的你希望所有表格左对齐并在页面中间居中但你希望第三个表格能够在没有大小限制的情况下进行修改，对吗？如果是这样，这将起作用：

HTML：

```
<div class="wrapper">
<div class="center">
<table id="t1">
    <tr>
        <td>
            text
        </td>
    </tr>        
</table>
<table id="t2">
    <tr>
        <td>
            text
        </td>
    </tr>       
</table>
<table id="t3">
    <tr>
        <td>
            text</br>
            text</br>
            text</br>
            Resizable and centered
        </td>
    </tr>       
</table> 
```

CSS：

```
.wrapper{
clear: left;
float: left;
left: 50%;
margin: 0;
padding: 0;
position: relative;
text-align: left;
 }
.center{
float: left;
margin: 0;
padding: 0;
position: relative;
right: 50%;
}
#t1{
border: 1px solid black;
float:left;
}

#t2{
border: 1px solid black;
float:left;
}

#t3{
border: 1px solid black;
float:left;
} 
```

您可以将文本添加到任何表格单元格，它总是会重新调整大小和居中。

# android - 以编程方式设置 PreferenceScreen

> ID：10890541
> 
> 赞同：2
> 
> 时间：2012-06-05T01:40:46.083
> 
> 标签：android, android-layout

我有一个preferncescreen 页面，仅用于显示数据而不是保存它以进行设置

代码如下

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory android:title="Member Subscription Status">

        <PreferenceScreen
    android:title="Subscription Status"
    android:summary="Active">
</PreferenceScreen> 

        <PreferenceScreen
    android:title="Next Payment Date"
    android:summary="2012-06-21 18:00:00s">
</PreferenceScreen> 
        <PreferenceScreen
    android:title="Plan Type"
    android:summary="Family">
</PreferenceScreen> 
    </PreferenceCategory>

</PreferenceScreen> 
```

现在我想知道我应该如何设置preferncescreen的摘要以显示在屏幕上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T01:47:29.330

您可以`Preference`使用[findPreference()获取，然后使用](http://developer.android.com/reference/android/preference/PreferenceGroup.html#findPreference%28java.lang.CharSequence%29)[setSummary](http://developer.android.com/reference/android/preference/Preference.html#setSummary%28int%29) ()设置摘要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T01:48:18.623

找到了解决方案。必须先添加一个密钥

```
android:key="Subscriptionstatus" 
```

然后在活动

```
Preference pref = findPreference( "Subscriptionstatus" );
pref.setSummary("test"); 
```

# php - 为什么我编辑 mySQL 表的 php 代码显示为空白页？

> ID：10890543
> 
> 赞同：0
> 
> 时间：2012-06-05T01:41:00.217
> 
> 标签：php, mysql

我在网页中显示的 mysql 记录表的末尾有一个编辑按钮。

但是，当我单击编辑按钮时，我的 edit.php 只会生成一个空白页面。

我不知道为什么：

```
<?php
// contact to database
$connect = mysql_connect("localhost", "xxx", "xxx") or die ("Error , check your server connection.");
mysql_select_db("xxx");
?>

<?php
$posted_id = $_POST['ID'];
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<div class="form">            
<?php 

$result = mysql_query("SELECT * FROM ff_projections WHERE ID = '$posted_id'") or die ("Error in query");
if ($row = mysql_fetch_array($result)) {

echo "<form method='post' action='update.php'>";
echo "<label for='Player'>Player Name:</label> <input type='text' name='Player' value='" . $row['Player'] . "' />";
echo "<label for='Pass_Yds'>Pass Yds:</label> <input class='short' type='text' name='Pass_Yds' value='" . $row['Pass_Yds'] . "' />";
echo "<label for='Pass_TDs'>Pass TDs:</label> <input class='short' type='text' name='Pass_TDs' value='" . $row['Pass_TDs'] . "' />";
echo "<label for='Int_Thrown'>Int Thrown:</label> <input class='short' type='text' name='Int_Thrown' value='" . $row['Int_Thrown'] . "' />";
echo "<label for='Rush_Yds'>Rush Yds:</label> <input class='short' type='text' name='Rush_Yds' value='" . $row['Rush_Yds'] . "' />";
echo "<label for='Rush_TDs'>Rush TDs:</label> <input class='short' type='text' name='Rush_TDs' value='" . $row['Rush_TDs'] . "' />";
echo "<input type='submit' name='submit' value='Update Player' />";
echo "<input type='hidden' name='ID' value='" . $row['ID'] . "' />";
echo "</form>";
}
?>
</div>

</body>
</html> 
```

我将 ID 作为隐藏字段，因为我不希望它可见或可编辑。

这是使用edit.php的页面：

```
<?php
// contact to database
$connect = mysql_connect("localhost", "xxx", "xxx") or die ("Error , check your server connection.");
mysql_select_db("xxx");
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Kick Ass Fantasy Football Projections</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {

    $(".tab_content").hide();
    $(".tab_content:first").show(); 

    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_content").hide();
        var activeTab = $(this).attr("rel"); 
        $("#"+activeTab).fadeIn(); 
    });
});

</script>
</head>

<body>

<div>
<FORM METHOD="LINK" ACTION="index.php" style="margin:10px 0px">
<INPUT TYPE="submit" VALUE="Add More Players" style="padding:6px">
</FORM> 
</div>

<ul class="tabs"> 
    <li class="active" rel="tab1"> QB</li>
    <li rel="tab2"> RB</li>
    <li rel="tab3"> WR</li>
    <li rel="tab4"> TE</li>
    <li rel="tab5"> K</li>
    <li rel="tab6"> Def / ST</li>
</ul>

<div class="tab_container">
    <div id="tab1" class="tab_content">

    <table cellspacing="0" cellpadding="5" border="1" width="560">
    <tr style="text-align:center">
    <td style="text-align:left ; width:175px">Player Name</td>
    <td>Team</td>
    <td>Pass Yds</td>
    <td>Pass TDs</td>
    <td>Int Thrown</td>
    <td>Rush Yds</td>
    <td>Rush TDs</td>
    <td>TFP</td>
    <td>Edit Player</td>
    </tr>
    <?php
    $result = mysql_query("SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Total_Fantasy_Pts, ID FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC;");

    while($row = mysql_fetch_array($result))
    {
    echo "<tr style=\"text-align:center\"><td style=\"text-align:left\">{$row['Player']}</td>";
    echo "<td>{$row['Team']}</td>";
    echo "<td>{$row['Pass_Yds']}</td>";
    echo "<td>{$row['Pass_TDs']}</td>";
    echo "<td>{$row['Int_Thrown']}</td>";
    echo "<td>{$row['Rush_Yds']}</td>";
    echo "<td>{$row['Rush_TDs']}</td>";
    echo "<td>{$row['Total_Fantasy_Pts']}</td>";
    echo "<td>{$row['ID']}</td>";
    echo "<td><form action=\"edit.php\" method=\"post\"><input type=\"submit\" name=\"submit\" value=\"Edit\"></form></td></tr>";
    }
    ?>
    </table>

    </div>
</div>    

<div class="tab_container">
    <div id="tab2" class="tab_content">

    <table cellspacing="0" cellpadding="5" border="1" width="560">
    <tr style="text-align:center">
    <td style="width:175px ; text-align:left">Player Name</td>
    <td>Team</td>
    <td>Rush Yds</td>
    <td>Rush TDs</td>
    <td>Rec Yds</td>
    <td>Rec TDs</td>
    <td>Rec</td>
    <td>Fumbles</td>
    <td>TFP</td>
    </tr>
    <?php
    $result = mysql_query("SELECT Player, Team, Rush_Yds, Rush_TDs, Rec_Yds, Rec_TDs, Receptions, Fumbles, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'RB' ORDER BY Rush_Yds DESC;");

    while($row = mysql_fetch_array($result))
    {
    echo "<tr style=\"text-align:center\"><td style=\"text-align:left\">{$row['Player']}</td>";
    echo "<td>{$row['Team']}</td>";
    echo "<td>{$row['Rush_Yds']}</td>";
    echo "<td>{$row['Rush_TDs']}</td>";
    echo "<td>{$row['Rec_Yds']}</td>";
    echo "<td>{$row['Rec_TDs']}</td>";
    echo "<td>{$row['Receptions']}</td>";
    echo "<td>{$row['Fumbles']}</td>";
    echo "<td>{$row['Total_Fantasy_Pts']}</td></tr>";
    }
    ?>
    </table>    

    </div>
</div>

<div class="tab_container">
    <div id="tab3" class="tab_content">

    <table cellspacing="0" cellpadding="5" border="1" width="560">
    <tr style="text-align:center">
    <td style="width:175px ; text-align:left">Player Name</td>
    <td>Team</td>
    <td>Rec Yds</td>
    <td>Rec TDs</td>
    <td>Rec</td>
    <td>Fumbles</td>
    <td>TFP</td>
    </tr>
    <?php
    $result = mysql_query("SELECT Player, Team, Rec_Yds, Rec_TDs, Receptions, Fumbles, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'WR' ORDER BY Rec_Yds DESC;");

    while($row = mysql_fetch_array($result))
    {
    echo "<tr style=\"text-align:center\"><td style=\"text-align:left\">{$row['Player']}</td>";
    echo "<td>{$row['Team']}</td>";
    echo "<td>{$row['Rec_Yds']}</td>";
    echo "<td>{$row['Rec_TDs']}</td>";
    echo "<td>{$row['Receptions']}</td>";
    echo "<td>{$row['Fumbles']}</td>";
    echo "<td>{$row['Total_Fantasy_Pts']}</td></tr>";
    }
    ?>
    </table>    

    </div>
</div>

<div class="tab_container">
    <div id="tab4" class="tab_content">

    <table cellspacing="0" cellpadding="5" border="1" width="560">
    <tr style="text-align:center">
    <td style="width:175px ; text-align:left">Player Name</td>
    <td>Team</td>
    <td>Rec Yds</td>
    <td>Rec TDs</td>
    <td>Rec</td>
    <td>Fumbles</td>
    <td>TFP</td>
    </tr>
    <?php
    $result = mysql_query("SELECT Player, Team, Rec_Yds, Rec_TDs, Receptions, Fumbles, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'TE' ORDER BY Rec_Yds DESC;");

    while($row = mysql_fetch_array($result))
    {
    echo "<tr style=\"text-align:center\"><td style=\"text-align:left\">{$row['Player']}</td>";
    echo "<td>{$row['Team']}</td>";
    echo "<td>{$row['Rec_Yds']}</td>";
    echo "<td>{$row['Rec_TDs']}</td>";
    echo "<td>{$row['Receptions']}</td>";
    echo "<td>{$row['Fumbles']}</td>";
    echo "<td>{$row['Total_Fantasy_Pts']}</td></tr>";
    }
    ?>
    </table>      

    </div>
</div>

<div class="tab_container">
    <div id="tab5" class="tab_content">

    <table cellspacing="0" cellpadding="5" border="1" width="560">
    <tr style="text-align:center">
    <td style="text-align:left ; width:175px">Player Name</td>
    <td>Team</td>
    <td>FG</td>
    <td>Extra Pts</td>
    <td>TFP</td>
    </tr>
    <?php
    $result = mysql_query("SELECT Player, Team, FG, Extra_Pts, Overall_Pts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'K' ORDER BY FG DESC;");

    while($row = mysql_fetch_array($result))
    {
    echo "<tr style=\"text-align:center\"><td style=\"text-align:left\">{$row['Player']}</td>";
    echo "<td>{$row['Team']}</td>";
    echo "<td>{$row['FG']}</td>";
    echo "<td>{$row['Extra_Pts']}</td>";
    echo "<td>{$row['Total_Fantasy_Pts']}</td></tr>";
    }
    ?>
    </table>    

    </div>
</div>  

<div class="tab_container">
    <div id="tab6" class="tab_content">

    <table cellspacing="0" cellpadding="5" border="1" width="560">
    <tr style="text-align:center">
    <td>Team</td>
    <td>Sacks</td>
    <td>Int</td>
    <td>Def TD</td>
    <td>ST TD</td>
    <td>Shutouts</td>
    <td>TFP</td>
    </tr>
    <?php
    $result = mysql_query("SELECT Team, Sacks, Int_Caught, Def_TD, ST_TD, Shutouts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'Def / ST' ORDER BY Def_TD DESC;");

    while($row = mysql_fetch_array($result))
    {
    echo "<tr style=\"text-align:center\"><td>{$row['Team']}</td>";
    echo "<td>{$row['Sacks']}</td>";
    echo "<td>{$row['Int_Caught']}</td>";
    echo "<td>{$row['Def_TD']}</td>";
    echo "<td>{$row['ST_TD']}</td>";
    echo "<td>{$row['Shutouts']}</td>";
    echo "<td>{$row['Total_Fantasy_Pts']}</td></tr>";
    }
    ?>
    </table>      

    </div>
</div>    

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:12:27.377

永远不要忘记正确清理任何触及数据库“mysql_real_escape_string();.

但它似乎在抱怨未定义的索引 $_POST['ID'];，这是因为要么没有任何东西被发送到它，要么可能有一个命名问题被发布到该页面。

尝试将您的值之一的静态变量设置为 $posted_id: $posted_id = 3262732 （或已知的帖子 ID）以查看您的表单是否正确返回。

如果这确实有效，那么查看哪些数据正在发布到 edit.php。

# javascript - iOS上的Photoswipe画廊关闭事件

> ID：10890545
> 
> 赞同：0
> 
> 时间：2012-06-05T01:41:25.060
> 
> 标签：javascript, ios, ios5, jquery-mobile, photoswipe

我已经在我最近使用 jQueryMobile 的一个移动应用程序中实现了美妙的[photoswipe](http://www.photoswipe.com/)库，并且在将它与 iOS 5 结合使用时遇到了一个小问题（可能是其他的，但我只有一个 iOS 5 设备）。

下面是一个实现的javascript

```
<script type="text/javascript">

    (function (window, $, PhotoSwipe) {

        $(document).ready(function () {

            $('div.gallery-page')
                    .live('pageshow', function (e) {

                        var 
                            currentPage = $(e.target),
                            options = {},
                            photoSwipeInstance = $("ul.gallery a", e.target).photoSwipe(options, currentPage.attr('id'));

                        photoSwipeInstance.show(0);

                        return true;

                    })

                    .live('pagehide', function (e) {

                        var 
                            currentPage = $(e.target),
                            photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

                        if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                            PhotoSwipe.detatch(photoSwipeInstance);
                        }
                        console.log($(e.target));
                        history.back();

                        return true;

                    });

        });

    } (window, window.jQuery, window.Code.PhotoSwipe));

</script> 
```

上面的例子与实现指南所说的几乎完全一样，但有一个区别：当引发 pageshow 事件并附加实例时，我调用“photoSwipeInstance.show(0);” 以便立即显示图库。

这一切都很好，除了当我从工具栏关闭图库时，它会返回到静态页面而不是调用它的页面。

我的第一个想法是针对事件“onHide”实现一个方法并执行“history.back();” 陈述：

```
photoSwipeInstance.addEventHandler(PhotoSwipe.EventTypes.onHide, function (e) {
    history.back();
}); 
```

这在 Android 上就像一个魅力，但在 iOS 上什么也没发生，所以我想到了 iOS 设备的双重历史：

```
photoSwipeInstance.addEventHandler(PhotoSwipe.EventTypes.onHide, function (e) {
    console.log(navigator.appVersion);
    if ((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion)) {
        history.go(-2);
    } else {
        history.back();
    }

}); 
```

但仍然没有运气，iOS 只是坐在那里嘲笑我。有谁知道重定向回附加photoswipe实例的页面而不是返回到实际的html页面的最佳方法？这是最终 JS 标记的示例：

```
<script type="text/javascript">

(function (window, $, PhotoSwipe) {

    $(document).ready(function () {

        $('div.gallery-page')
                .live('pageshow', function (e) {

                    var 
                        currentPage = $(e.target),
                        options = {},
                        photoSwipeInstance = $("ul.gallery a", e.target).photoSwipe(options, currentPage.attr('id'));

                    // onHide event wire back to previous page.
                    photoSwipeInstance.addEventHandler(PhotoSwipe.EventTypes.onHide, function (e) {
                        console.log(navigator.appVersion);
                        if ((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion)) {
                            history.go(-2);
                        } else {
                            history.back();
                        }

                    });

                    photoSwipeInstance.show(0);

                    return true;

                })

                .live('pagehide', function (e) {

                    var 
                        currentPage = $(e.target),
                        photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

                    if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                        PhotoSwipe.detatch(photoSwipeInstance);
                    }

                    return true;

                });

    });

} (window, window.jQuery, window.Code.PhotoSwipe));

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:01:05.937

我有一个类似的问题 - 我相信 iOS 上的 onHide 事件没有触发，所以我通过监听 ToolBar 事件解决了它：

```
photoSwipeInstance.addEventHandler(PhotoSwipe.EventTypes.onToolbarTap, function(e){
if(e.toolbarAction === 'close'){
    //i needed to use a specific location here: window.location.href = "something";
    //but i think you could use the history back
    history.back();
}
}); 
```

# mysql - 在mysql中使用'case'自动递增

> ID：10890546
> 
> 赞同：0
> 
> 时间：2012-06-05T01:41:27.290
> 
> 标签：mysql, case, auto-increment, coalesce

我在 mysql 中有一个简单的表，它有不同类型的记录，由列中的值区分`ptype`

我的桌子看起来像这样

id1...ptype..usr...项目
1.....43.......2......7001
2......44.......2\. ......8001
3......43......2......7002
4......43......2......7003
5.....43.......3......7001

当我添加一条新记录时，我需要我的查询在`item`列中插入一个自动递增的值，基于`ptype`并特定于`usr`. 即，如果我插入一条新记录
id1...ptype..usr...item
6.....43........3......？

对于 ptype=43 和 usr=3 id1...ptype..usr...item
6.....43....3...... 7002

如果我们为 ptype=44 和 usr=2 添加另一条记录 id1...ptype..usr...item
7.....44.......2......8002

我想我应该先用`item`空白插入新记录，然后使用 CASE WHEN THEN 方法用从新记录（即@lastid）派生的信息更新该记录，但它不起作用。

```
SET @lastid := LAST_INSERT_ID();

SET @ptype =  (SELECT `ptype` FROM a1 WHERE `id1` = @lastid);

SET @item =  (SELECT (
CASE
when @ptype = 41 then (SELECT 1 + coalesce((SELECT max(`item`) FROM `a1` WHERE `ptype` = 41 AND `plate`=7 AND `userid` = @userid), 5000))
when @ptype = 42 then (SELECT 1 + coalesce((SELECT max(`item`) FROM `a1` WHERE `ptype` = 42 AND `plate`=7 AND `userid` = @userid), 6000))
when @ptype = 43 then (SELECT 1 + coalesce((SELECT max(`item`) FROM `a1` WHERE `ptype` = 43 AND `plate`=7 AND `userid` = @userid), 7000))
when @ptype = 44 then (SELECT 1 + coalesce((SELECT max(`item`) FROM `a1` WHERE `ptype` = 44 AND `plate`=7 AND `userid` = @userid), 8000)) 
when @ptype = 45 then (SELECT 1 + coalesce((SELECT max(`item`) FROM `a1` WHERE `ptype` = 45 AND `plate`=7 AND `userid` = @userid), 9000)) 
when @ptype = 46 then (SELECT 1 + coalesce((SELECT max(`item`) FROM `a1` WHERE `ptype` = 46 AND `plate`=7 AND `userid` = @userid), 10000)) 
ELSE 0
end) as item
from
a1 WHERE `id1` = @lastid); 
```

更新 a1 SET `item`= @item WHERE id1 = @lastid

照原样，@item 最初返回 0 的值，无论新记录具有什么“ptype”，并且为后续条目增加 1.... 我需要在每个 ptype 中添加的第一条记录为 5001 6001, 7001 ， ETC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:47:28.877

您可以使用触发器：

```
CREATE TRIGGER biA1 BEFORE INSERT ON a1 FOR EACH ROW SET NEW.item = (
  SELECT COALESCE(MAX(item), (NEW.ptype-36)*1000) + 1
  FROM   a1
  WHERE  ptype = NEW.ptype AND plate = 7 AND userid = NEW.userid
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:32:45.937

首先，你没有问的答案：通过在他们自己的表中创建行来扭转你的想法（使用 AUTO_INCREMENT 作为 eggyal 建议的），然后将数据移动到这个表中。

现在答案是：

您的信息有点不匹配，这可能解释了问题，或者只是一个红鲱鱼。例如，您没有描述“plate”是什么，但您在查询中使用了它。您还使用@userid，这在您的示例中没有设置。

我在顶部创建了一个似乎与您的数据相匹配的表格：

```
create table a1 (
  id1 int primary key auto_increment,
  ptype int,
  usr int,
  item int
); 
```

然后设置您似乎想要的变量：

```
set @userid = 2;
set @ptype = 43; 
```

并插入一行：

```
insert into a1 (ptype, usr) values (@ptype, @userid); 
```

像你一样把 id 拉回来：

```
SET @lastid := LAST_INSERT_ID(); 
```

然后你可以得到最大的“项目”：

```
select max(item) from a1  WHERE `ptype` = @ptype AND `usr` = @userid; 
```

要处理初始情况，您需要一个默认值。由于您将 ptypes 分隔 1000，因此您可以使用它：

```
SELECT ifnull(max(`item`),(@ptype % 40 + 2)*1000)+1 as next
FROM `a1`
WHERE `ptype` = @ptype
AND `usr` = @userid;

+------+
| next |
+------+
| 5001 |
+------+ 
```

请注意，这不是线程安全的，因此将其全部包装在事务/触发器中。

希望有帮助。

# jquery - 如何在没有适合移动设备的视图的本地链接上自动禁用 AJAX？

> ID：10890550
> 
> 赞同：2
> 
> 时间：2012-06-05T01:42:17.493
> 
> 标签：jquery, asp.net-mvc-3, jquery-mobile

我正在使用 Jquery Mobile 构建现有 ASP.NET mvc3 站点的移动版本。

我这样做的方法是在我的控制器中检测页面是否被移动设备请求，然后如果有移动设备，则提供适合移动设备的 mvc 视图，如果没有，则提供标准视图。

我遇到的问题是指向没有合适视图的页面的链接仍然被 jquery-mobile Ajaxed 到页面中，弄乱了布局。我知道您可以通过使用 data-ajax="false" 逐个链接地禁用此功能，但是我无法控制每个链接，因为它是基于 CMS 的站点，因此没有什么可以阻止用户从链接到网站内没有移动视图的页面。

我希望我能做的可能是在该站点的桌面版本的基本视图中包含一个属性，当它尝试 ajax 加载页面、拒绝它并重新加载没有 ajax 的链接时，jquery mobile 会拾取该属性。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:19:55.973

我建议渲染一些本地化的 JS 和 ViewBag 属性的组合来处理每个页面的问题，否则你最终会遇到一个场景，你必须在任何地方应用 'data-ajax="false"'，这是不漂亮。

除了您的控制器代码可能是用户代理检测以填充“ViewBag.IsMobileDevice”属性之外，类似以下内容可能会帮助您：

```
<script type="text/javascript">

    $( document ).bind( "mobileinit", function( event, data ){
        if ((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion) && @ViewBag.IsMobileDevice) {
            $.mobile.ajaxEnabled = false;
        }
    });

</script> 
```

请注意，我以 iphone/ipad/ipod 为例，但您可以根据自己的要求在其中使用任何东西。我会查看[51degrees.mobi](http://51degrees.codeplex.com/)以获取有关移动检测的一些灵感。

我希望这可以帮助您或至少为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:12:10.233

没有移动视图的 URL，你可以给它一个单独的类，比如“.no-mobi-view”，然后在 pagecreate 事件之前，你可以编写一个 javascript 代码来添加属性数据

```
$( document ).live( "pagebeforecreate", function( event){
    $('.no-mobi-view').attr("data-ajax","false");
}); 
```

它可能依赖于 CMS，但您可能可以在将 cms 输出发送到浏览器之前对其进行过滤。而不是您可以测试的课程`target=_blank`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:34:30.433

暂时我已经这样做了：

```
$(document).bind("pageload", function (event, data) {
    if ($("div[data-role=\"content\"]", data.xhr.responseText).length < 1) {
       window.location = data.url;                  
    } 
}); 
```

我正在检查加载的页面是否包含 jQuery 移动元素 data-role="content"，如果没有，则将浏览器重定向到正确的页面。这并不理想，因为我正在解析加载时每个页面的 html。这也意味着非移动站点被加载到 jquery mobile 中，然后在重定向上再次加载（尽管在这个站点中这种情况不应该经常发生）。

我还必须在该站点的桌面版本的主视图上添加一个带有 data-role="page" 的空隐藏 div，因为 jquery mobile 仍然尝试在 window.location 启动之前转换到非移动站点，而我无法解决如何防止这种情况。

# generics - 是否可以在 VHDL 中编写类型通用实体？

> ID：10890551
> 
> 赞同：5
> 
> 时间：2012-06-05T01:42:28.430
> 
> 标签：generics, vhdl, type-parameter

所以，我最近继承了一些 VHDL 代码，我的第一反应是，“VHDL 有结构，为什么它们到处都使用位向量？” 然后我意识到这是因为似乎没有任何方法可以写出这样的东西：

```
entity Queue is
    generic (
        EL : type
    );
    port (
        data_in  : EL;
        data_out : EL;
        ...
    );
end entity Queue; 
```

我真的希望这是可能的。有什么东西可以远程近似吗？即使我必须重新键入实体或组件声明，也只是为了避免为每个（以通用宽度为模）类型重新键入架构定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T10:41:42.030

是的，实现队列是这样做的经典原因之一！

自 VHDL-2008 以来，这一直在 VHDL 中。截至 2012 年年中，工具支持是可变的。谈论一个缓慢发展的行业！

*   Aldec[完全支持它](http://www.aldec.com/en/solutions/fpga_design/simulation_debugging)。
*   Modelsim 有部分支持 - 找不到指向其功能的公共链接。如果您安装了它，它位于 /technotes/vhdl2008.note
*   Xilinx (XST/ISIM) 不支持它，甚至 VHDL-2002。我找不到简单的链接，但[这些](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_1/xst_v6s6.pdf) [PDF](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_1/plugin_ism.pdf)中有关于 VHDL 兼容性的部分，其中只讨论了 VHDL-1993。
*   Altera 的工具[有部分支持，但不支持类型泛型](http://quartushelp.altera.com/11.1/mergedProjects/hdl/vhdl/vhdl_list_2008_vhdl_support.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:34:17.057

是的和不...

通用类型是即将推出的 VHDL-2008 标准的新功能：http: [//www.doulos.com/knowhow/vhdl_designers_guide/vhdl_2008/vhdl_200x_major/#GenericTypes](http://www.doulos.com/knowhow/vhdl_designers_guide/vhdl_2008/vhdl_200x_major/#GenericTypes)

然而，EDA 工具对 VHDL-2008 的支持仍然非常有限。即使您的工具支持它，使用此功能也会使您的代码不可移植。

坚持 VHDL-2002，一个解决方案是在一个包中声明你的接口类型，`mytypes`并在任何需要的地方使用它`use work.mytypes.all`。

# arrays - 通过 Graph API 将照片发布到 Facebook：OAuthException: (#100) param tags must be an array

> ID：10890554
> 
> 赞同：7
> 
> 时间：2012-06-05T01:42:55.410
> 
> 标签：arrays, facebook, json, facebook-graph-api, photos

我正在尝试通过 Graph API 在我的应用程序的测试用户帐户上将照片上传到 Facebook。仅存在`url, link, name`参数时，上传工作正常，返回有效的照片 ID。

**但是，如果我使用附加`tags`参数，我最终会返回以下错误：**

```
{
  "error": {
    "message": "(#100) param tags must be an array.", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

我已经尝试以`tags`我能想到的几乎所有可能的方式提供值，因为我知道 Graph API 并不简单（即使`url`是用于从 URL 上传照片的参数也没有在`photo`Graph下列出API方法）；

**单个用户 ID**

`tags=100003919104407`

**多个 CS 的用户 ID**

`tags=100003919104407,100003919104408,100003919104409`

**id 不是整数的数组**

`tags=[100003919104407, 100003919104404,100003919104405]`

**以 id 为字符串的数组**

`tags=["100003919104407", "100003919104404","100003919104405"]`

**包含对象的数组，根据 Facebook Graph API 文档**

`tags=[{"id":"100003919104407"},{"id":"100003919104404"},{"id":"100003919104405"}]`

如果有人能告诉我传递用户 ID 以便在照片中标记它们的正确格式/另一个参数，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T07:56:06.043

尝试这个

应该是这种格式

```
[{"to":"100003919104407","x":0,"y":0},  
{"to":"100003919104408","x":10,"y":10},  
{"to":"100003919104409","x":20,"y":20}] 
```

或者

```
[{"tag_uid":"100003919104407","x":0,"y":0},
{"tag_uid":"100003919104408","x":10,"y":10},
{"tag_uid":"100003919104409","x":20,"y":20}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:48:57.203

你从哪里得到你的信息？你检查过[标签](https://developers.facebook.com/docs/reference/api/photo/#tags)部分吗？

> 创造
> 
> 您可以通过向标签连接 PHOTO_ID/tags 发出 HTTP POST 请求来在照片上创建标签。
> 
> 注意：此功能旨在帮助用户在真实照片中标记他们的朋友。如果他们的朋友实际上不在该照片中，则不应使用此功能来鼓励用户标记他们的朋友，或者在合成照片中标记朋友。如果发现您的应用程序鼓励这种行为，您可能会禁用此功能。
> 
> 您可以使用两种方法指定要标记的用户：在 URL 路径中作为 PHOTO_ID/tags/USER_ID，或在 URL 参数中作为 PHOTO_ID/tags?to=USER_ID。要一次添加多个标签，您可以指定包含标签数组的 tags 属性，例如 PHOTO_ID/tags?tags=[{"id":"1234"}, {"id":"12345"}]。目前，您无法使用此 API 在照片中标记页面。

还有一个[例子](https://developers.facebook.com/blog/post/509/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T21:21:41.330

数组的 X 和 Y 值必须是 %，而不是像素

**示例 1（错误）**

img:(640,480) xy:(320,240) [{tag_uid:user_id,x:320,y:240}] <- 错误，因为 320 > 100%

**示例 2（右）** img:(640,480) xy:(320,240) px:(320,240) < %

[{tag_uid:user_id,x:50,y:50}] <- 对，因为 50 < 100%

# php - 自动创建电子邮件

> ID：10890556
> 
> 赞同：2
> 
> 时间：2012-06-05T01:43:14.640
> 
> 标签：php, email, postfix-mta, forwarding

首先，我只想说我知道有人问过类似的问题

*   [这里](https://stackoverflow.com/questions/6051971/how-can-i-automatically-create-an-email-address-for-my-website-members)
*   [和这里](https://stackoverflow.com/questions/7624294/how-can-i-automatically-create-an-email-address-for-anyone-who-signs-up-at-my-we)

但是，这两个问题都有问题。问题一只有一个答案（没有帮助），问题二需要与 Google Enterprise 配合使用。

我在 Linode 上托管了一个 LAMP 堆栈，它托管多个站点，每个站点在`sites-available`文件夹中都有一个单独的文件。我有一个特定的域，我们称之为 myawesomedomain.com。现在，myawesomedomain.com 现在没有任何内容，也没有任何适当的、成熟的网站。只是一个简单的形式。这些字段将包括：

*   用户名
*   电子邮件地址
*   密码

这就是我想要的。每当用户注册时，都会使用用户名 username@myawesomedomain.com 自动创建一封电子邮件。从那时起，每当向 username@myawesomedomain.com 发送电子邮件时，该电子邮件都会自动转发到用户注册时使用的电子邮件，这样电子邮件就不会存储在我的服务器上（因此不会占用空间）。

所以，我的基本问题是：

*   如何从 PHP 自动创建电子邮件地址
*   如何让电子邮件自动转发到 MySQL 数据库中的另一个电子邮件地址，而不是存储在我的服务器上。
*   我应该使用什么邮件服务器以及我应该如何设置它，这样它就不会干扰我的其他网站。
*   无论如何，缺乏垃圾邮件和病毒过滤可能会影响我。例如，如果黑客将 PHP 文件发送到 username@myawesomedomain.com，我的服务器是否会受到影响。
*   无论你觉得需要什么。

我听说过 Postfix，但我对邮件服务器知之甚少……

对不起，很长（？）的问题，提前谢谢你。

*编辑*

我应该把它放在 ServerFault 上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:20:26.927

“从 php 创建电子邮件别名”部分不是问题。如果您将 postfix 作为邮件服务器运行，那么就像在 mysql 表中插入一行一样简单。

```
INSERT INTO myaliastable (pattern, alias) VALUES ("john@myawesomedomain.com","john@example.net") 
```

看：

*   [http://www.postfix.org/MYSQL_README.html](http://www.postfix.org/MYSQL_README.html)
*   [http://www.postfix.org/postconf.5.html#virtual_alias_maps](http://www.postfix.org/postconf.5.html#virtual_alias_maps)

**但是：** 创建这样的转发服务会带来很多您应该注意的问题：

*   您必须在启用该转发器（发送消息，让收件人单击链接）之前验证目标电子邮件地址，否则垃圾邮件发送者将注册帐户并将您的系统用作开放中继
*   你必须运行一个非常好的垃圾邮件过滤器......转发垃圾邮件与发送垃圾邮件没有什么不同，并且会将你的服务器列入黑名单
*   如果目标服务器出于任何原因开始拒绝您的转发器，您将发送[反向散射](http://en.wikipedia.org/wiki/Backscatter_%28e-mail%29)，这会再次将您的服务器列入黑名单
*   如果发件人域使用[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)记录并且转发器的目标检查 SPF，转发的邮件将被拒绝。你可以添加[SRS](http://en.wikipedia.org/wiki/Sender_Rewriting_Scheme)重写，不幸的是在后缀中并不是那么简单

既然您说您对邮件服务器了解不多，我强烈建议您先阅读它们，查看垃圾邮件预防的最佳实践，然后再次处理这个项目。

# perl - 给定 Perl 中的包名，如何从包中调用子例程？

> ID：10890558
> 
> 赞同：5
> 
> 时间：2012-06-05T01:43:38.433
> 
> 标签：perl, reflection, methods, package

给定一个包含代表包名称的字符串的变量，我如何调用包的特定子例程？

这是我想出的最接近的事情：

```
package MyPackage;

sub echo {
    print shift;
}

my $package_name = 'MyPackage';
$package_name->echo('Hello World');

1; 
```

这段代码的问题是子程序被作为类方法调用；包名作为第一个参数传入。我想从包名称中调用子例程，而无需隐式传入特殊的第一个参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T02:06:24.470

听起来您实际上并不想将其称为方法，而是将其称为常规子例程。在这种情况下，您可以使用符号引用：

```
my $package_name = 'MyPackage';
{ 
    no strict 'refs';
    &{ $package_name . '::echo' }( 'Hello World' );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T02:40:14.220

Perl 方法调用只是常规的子例程，它将调用者作为第一个值。

```
use strict;
use warnings;
use 5.10.1;

{
  package MyPackage;
  sub new{ bless {}, shift } # overly simplistic constructor (DO NOT REUSE)
  sub echo{ say @_ }
}

my $package_name = 'MyPackage';
$package_name->echo;

my $object = $package_name->new();
$object->echo; # effectively the same as MyPackage::echo($object) 
```

```
MyPackage
MyPackage=HASH(0x1e2a070) 
```

* * *

如果要调用没有调用者的子例程，则需要以不同的方式调用它。

```
{
  no strict 'refs';
  ${$package_name.'::'}{echo}->('Hello World');
  &{$package_name.'::echo'}('Hello World');
}

# only works for packages without :: in the name
$::{$package_name.'::'}{echo}->('Hello World');

$package_name->can('echo')->('Hello World'); 
```

*   该[`can`](https://metacpan.org/module/UNIVERSAL#obj-can-METHOD-)方法返回对子例程的引用，如果在调用者上调用了该子例程，则该引用将被调用。然后可以单独使用 coderef。

    ```
    my $code_ref = $package_name->can('echo');
    $code_ref->('Hello World'); 
    ```

    使用有一些注意事项[`can`](https://metacpan.org/module/UNIVERSAL#obj-can-METHOD-)：

    *   `can`可以被包或它继承的任何类覆盖。
    *   定义方法的包可能与调用者不同。

    这实际上可能是您正在寻找的行为。

*   另一种方法是使用一种叫做[符号引用](http://perldoc.perl.org/perlref.html#Symbolic-references)的东西。

    ```
    {
      no strict 'refs';
      &{ $package_name.'::echo' }('Hello World');
    } 
    ```

    通常不建议使用符号引用。部分问题在于，可能会在您不打算使用符号引用的地方意外使用符号引用。这就是为什么你不能`use strict 'refs';`生效的原因。

    这可能是做你想做的最简单的方法。

*   如果您不想使用符号引用，可以使用[Stash](http://perldoc.perl.org/perlguts.html#Stashes-and-Globs)。

    ```
    $MyPackage::{echo}->('Hello World');
    $::{'MyPackage::'}{echo}->('Hello World');

    $main::{'MyPackage::'}{echo}->('Hello World');
    $main::{'main::'}{'MyPackage::'}{echo}->('Hello World');
    $main::{'main::'}{'main::'}{'main::'}{'MyPackage::'}{echo}->('Hello World'); 
    ```

    唯一的问题是你必须`$package_name`分开`::`

    ```
    *Some::Long::Package::Name::echo = \&MyPackage::echo;

    $::{'Some::'}{'Long::'}{'Package::'}{'Name::'}{echo}('Hello World');

    sub get_package_stash{
      my $package = shift.'::';
      my @package = split /(?<=::)/, $package;
      my $stash = \%:: ;
      $stash = $stash->{$_} for @package;
      return $stash;
    }
    get_package_stash('Some::Long::Package::Name')->{echo}('Hello World'); 
    ```

    不过这并不是什么大问题。快速[浏览 CPAN](http://cpan.org)后，您会发现[Package::Stash](http://p3rl.org/Package%3a%3aStash)。

    ```
    use Package::Stash;
    my $stash = Package::Stash->new($package_name);
    my $coderef = $stash->get_symbol('&echo');
    $coderef->('Hello World'); 
    ```

    （[纯 Perl](http://p3rl.org/Package%3a%3aStash%3a%3aPP)版本的[Package::Stash](http://p3rl.org/Package%3a%3aStash)使用符号引用，而不是 Stash）

* * *

甚至可以为子例程/方法创建别名，就好像从使用[Exporter](http://p3rl.org/Exporter)的模块中导入一样：

```
*echo = \&{$package_name.'::echo'};
echo('Hello World'); 
```

我建议限制别名的范围：

```
{
  local *echo = \&{$package_name.'::echo'};
  echo('Hello World');
} 
```

这是一个例外，您可以在其中使用`strict 'refs'`启用的符号引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T02:07:36.210

使用`&{ <EXPRESSION> }()`调用名称为表达式的 sub 的语法，如[`perldoc perlref`](http://perldoc.perl.org/perlref.html)列出取消引用运算符时所述：

> 诚然，在这种情况下使用花括号有点傻，但是 BLOCK 可以包含**任意表达式**，尤其是下标表达式：
> 
> ```
>  &{ $dispatch{$index} }(1,2,3); # call correct routine 
> ```

随机实例：

```
# Note no "use strict"!
use File::Slurp; 
my $p="File::Slurp"; 
@a=&{"${p}::read_file"}(".profile"); 
print $a[0]; 
```

# cakephp - cakephp 可以有多个“内容”吗？

> ID：10890559
> 
> 赞同：0
> 
> 时间：2012-06-05T01:43:56.923
> 
> 标签：cakephp

所以在 cakephp 的布局中，我们有

```
$this->fetch('content') 
```

正确的？这是否意味着我只能在一种布局中拥有一个“内容”？我真的需要来自多个控制器的多个内容可以完成吗？如何？请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:26:59.100

布局无法从控制器中提取信息。控制器是视图准备放置在布局中的地方。

当您访问 CakePHP URL 时，它采用以下格式：

`http://example.com/controller/action`

换句话说，您直接连接到控制器，而不是布局。

您使用控制器从模型中获取数据，然后当一切准备就绪时，您将其设置为视图，然后显示视图，并围绕它进行布局。因此，如果您希望 HTML/CSS 等出现在您的所有视图中，您只需将其放入布局中。

但是，要回答您的问题，您的控制器实际上没有任何内容。您的内容（大概）在您的数据库中。使用模型访问数据库，并且可以使用单个控制器从多个模型中提取数据，这通常通过定义多个模型之间的关系来完成。

# openoffice.org - 将 sxw 转换为 rml 错误

> ID：10890567
> 
> 赞同：1
> 
> 时间：2012-06-05T01:44:52.040
> 
> 标签：openoffice.org, openerp, rml

当我尝试使用 OpenOffice 将 sxw 文件转换为 rml 文件时，出现此错误：

```
Exception: 'asci' codec can't encode character u'\xe9' 
```

该错误的含义是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:55:35.080

[请在尝试将 Django 模型转换为 XML 时](https://stackoverflow.com/q/4817018/674598)检查此链接UnicodeEncodeError这与我们在这里遇到的问题相同。您可以在 openerp 中使用 yourfield.encode("utf-8") 或 format() 。[[格式（obj.your_str_field 或 ''）]]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:05:00.757

我们在 lp 上发布了类似的问题：[https](https://bugs.launchpad.net/openobject-server/+bug/956798) ://bugs.launchpad.net/openobject-server/+bug/956798 并且它已在链接分支上修复，您可以应用补丁，这将使您的报告能够容忍 Unicode编码。

谢谢你

# performance - 使用 J 编程语言编写大型项目

> ID：10890568
> 
> 赞同：22
> 
> 时间：2012-06-05T01:45:09.153
> 
> 标签：performance, functional-programming, j

**披露**

*这是一个“笼统”的问题，也许没有具体的答案，但它**并不**打算作为一场火焰战。在开始我的项目之前，我真的很想了解一些信息。*

我必须实现一个特定的项目，该项目将***真正***受益于 J 提供的数据结构和抽象。这是一个大型项目，旨在充当大型（软实时）Web 应用程序的中心组件。所以性能非常重要。

我一直试图找到一些关于在大型商业或开源项目中使用 J 的信息，但我无法找到任何信息来作为我继续前进的决定的依据。我有：

*   搜索 Google 趋势，但收到以下回复：“您的术语 - j 编程语言 - 没有足够的搜索量来显示图表。”
*   在免费（代码）上搜索，并没有找到使用 J 的单个项目
*   在 Sourceforge 上搜索，没有找到使用 J 的单个项目
*   在 Lambda the Ultimate 上搜索，只发现[下面的讨论](http://lambda-the-ultimate.org/node/2491)斜着引用了 APL
*   在 Google 和 Bing 上进行了一般搜索，但没有找到任何使用 J 部署的大型项目的示例

在我的项目中使用 J 会出错吗？它似乎拥有我想要的一切——尤其是在数据结构、抽象和简洁方面。当然，我可以花时间在 F#、C# 或 C++ 中模拟所有这些属性，但 J 已经有了它们，所以......

有人可以告诉我在重要项目中使用 J（或任何晦涩的语言）的一些缺点吗？它的性能不够吗？它没有图书馆吗？还有什么我应该知道的吗？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T04:22:57.350

我认为 J 适用于大型、重要项目的关键用途。但我也认为对于这样的项目，J 将是一个非常冒险的选择（阅读：高风险）。

据我所知，使用 J 作为主要软件系统的核心技术的两家大型公司是 Cognos 和 Luen Thai。（Cognos 已被 IBM 收购。）关于这些系统的一些讨论，或者至少是一些涉及它们的经验，已经出现在[J Chat 论坛](http://jsoftware.com/pipermail/chat/)中。但是，那里没有太多信息。

可能还有其他依赖 J 的大型软件系统，但我还没有确定它们（而且我多年来一直在关注它们。）

Dmitri Chubarov 正确地认为，难以找到适当熟练的开发人员可能是一个重大问题。此外，我认为对于尚未在数组语言方面掌握重要技能的人来说，很难估计他们需要付出多少努力才能擅长用 J 进行编程。我个人认为从一个快乐兴奋的态度，而这种态度可能会因软件项目的生产压力而处于危险之中。（在工作中学习 J 并喜欢它*是*可能的，但不应忽视程序员因为“必须”学习它而讨厌它的风险。）

另一个可能的困难是整合工作。J 有各种库，并已连接到各种其他软件系统，但与更流行的语言所取得的成就形成鲜明对比。我的经验表明 J 接口非常容易，我将其归因于如何与外部世界合作的一些不错的选择。（这包括 DLL、内存映射文件、套接字和文本文件脚本。）然而，在一个大型项目中，当连接到周围的支持软件时，您会比平时更频繁地进行创新。

在我看来，最大的因素是我是否有足够的团队来承担核心产品。实际上，这可能是一个比大多数“大型”项目所依赖的小得多的团队。数组语言与比该领域典型的小得多的团队相关联，我认为这是优势之一。如果你已经安排好让任何你需要的同事参与进来，那就太好了。如果没有，在你这样做之前不要提交这样的项目。

下一个最重要的事情是了解您期望获得的 J 的主要好处，以及在完成项目时检查您是否获得了这些好处的方法。我不是建议如何做到这一点的合适人选，但我相信你不想在不跟踪这样的高风险选择是否带来预期回报的情况下投入投资资金。

Paul Graham 曾写道，某些语言被视为秘密优势。J 绝对可以是这样一种语言。然而，仅仅使用 J 并不足以确保它具有他所想的那种优势。你所描述的 J 的吸引人的方面表明，这样的优势对你来说可能是触手可及的。如果您确实选择依赖它，那么让所有主要参与者都有一个强大而清醒的理解为什么选择这种语言来完成这项工作可能是至关重要的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T13:04:03.320

尽管已经接受了答案，但我仍在回答这个问题。

*   可移植性：我负责维护一个用 J 构建的大型代码库，其中大部分对于 J6 来说是不可移植的（或者这样做真的很危险），所以我被困在 J5 中。J 并不意味着非常向后兼容。事实上，大多数版本都引入了重大更改。版本 7 使用 Java 作为其前端，因此您的界面和使用 Windows 驱动程序 ( `wd`) 的所有内容都将无法正常工作。版本 8 承诺将 QT 用于*其*前端，因此您的新 Java 接口很可能不会被移植。公平警告。

*   IDE：对我来说，大型项目应该与可靠的 IDE 齐头并进。J's 是一个文本编辑器。

*   库：有很多 J 库，但 J 是众所周知的，存在几种语言，它们具有更丰富的库和框架。

*   代码结构：这完全取决于您，实际上没有一点反对 J. J 的地方可以像任何其他语言那样清晰或模糊。适用标准编程实践，并且应该始终尽可能明确地记录和描述。如果您发现某组“经过审查的脏话”比另一组效果更好，那么这在 J 中会加倍。

*   最后，如果您只需要 J 的某些功能，则可以将 J 用作组件。不幸的是，.NET 集成在 J7 中被放弃了（甚至在 J6 中也不是 100% 兼容，尤其是在它的 64 位风格中），但是有一些方法可以使它与外部世界通信。[例如， KDB](http://kx.com/)基于 J 的疏远兄弟 K，并且基本上包装了映射文件以便快速访问，J 也有一个设施。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T14:39:02.933

对我来说，J 是一种很好的脚本语言（起到支持作用），尤其是对于数学相关的计算。它非常独立，可以通过文件夹复制（尤其是windows环境）部署，这比ruby或python有优势。

例如，在 nodejs webapp 中，可以使用 child_process 调用 jconsole.exe 并通过命令行接口传递参数。

整个程序可以在windows azure平台上部署运行，也可以在本地机器上运行，无需额外安装（即node.exe和jconsole.exe在同一个文件夹中）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-11T13:21:27.313

> > 有人可以告诉我在重要项目中使用 J（或任何晦涩的语言）的一些缺点吗？

对于担任经理或项目负责人角色的人来说，在关键任务项目中使用更晦涩的语言的最大缺点是人员和技能。

1.  我们如何发现和评估潜在的团队成员在语言中的技能和才能？
2.  如果有人离开，我需要多长时间才能填补知识空白？
3.  当我们需要额外的帮助时，我们能否足够快地扩展开发团队？

对于一个重要的项目，我希望那些已经在语言方面非常有经验的人，而不是在学习过程中学习它。

# wcf - WCF 是否支持在 TransactionScope 内调用异步操作？

> ID：10890569
> 
> 赞同：4
> 
> 时间：2012-06-05T01:45:43.903
> 
> 标签：wcf, asynchronous, transactionscope

我正在尝试 WCF Transaction 实现，我想出了 WCF 4.0 是否支持异步事务的想法。

例如，我有几个启用了客户端\服务事务的服务操作，在客户端，我使用 TransactionScope，在事务中，我创建任务来异步调用这些操作。

在这种情况下，我假设事务将正常工作，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:32:18.573

我非常怀疑这一点。如果您开始异步操作，您似乎不再参与原始事务。

我写了一个小 LINQPad 测试

```
void Main()
{
    using (var scope = new TransactionScope(TransactionScopeOption.Required))
    {
    try
    {
        Transaction.Current.Dump("created");
        Task.Factory.StartNew(Test);
        scope.Complete();
    }
    catch (Exception e)
    {
    Console.WriteLine(e);
    }
    Thread.Sleep(1000);
}

Console.WriteLine("closed");
Thread.Sleep(5000);
}

public void Test()
{
using (var scope = new TransactionScope(TransactionScopeOption.Required))
    {
    Transaction.Current.Dump("test start"); // null
    Thread.Sleep(5000);
    Console.WriteLine("done");
    Transaction.Current.Dump("test end"); // null
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T09:39:13.887

您需要在创建的任务中设置 OperationContext 和 Transaction.Current。

更具体地说，在服务中，您需要这样做：

```
public Task ServiceMethod() {
    OperationContext context = OperationContext.Current;
    Transaction transaction = Transaction.Current;

    return Task.Factory.StartNew(() => {
         OperationContext.Current = context;
         Transaction.Current = transaction;

         // your code, doing awesome stuff
    }
} 
```

正如您可能怀疑的那样，这会变得重复，所以我建议为它编写一个帮助程序。

# javascript - 模拟 document.body 点击事件

> ID：10890570
> 
> 赞同：0
> 
> 时间：2012-06-05T01:45:47.273
> 
> 标签：javascript, jquery

我有一个大问题。我有一些第三方 js 包含，它们会在单击按钮时弹出一些信息，即在 iframe 中。当然，我无权访问此 iframe。但是第 3 方捕获了点击并关闭了 iframe 弹出窗口。所以行为是这样的 -

我是用户，我点击这个“第 3 方按钮，一个 iframe 弹出窗口锚定在右下角”。现在，如果单击主父页面（我的页面）上的任意位置，iframe 将关闭。

这是问题所在。我有一些自定义表单字段/跨度等....在其中我捕获点击之前他们冒泡，所以 document.body 永远不会得到那个“点击”。

我怎么能假装出来？我尝试了“mousedown”，这似乎传播了起来。所以我然后说了类似的话：

```
jQuery(document.body).mousedown(function(){
    jQuery(document.body).click();
}) 
```

所以，不管 mousedown 是什么，我都试着说有一个点击发生。但这不起作用。不知道为什么？如果我将该点击附加到一个 div 和警报上 - 它会发出警报，但也许“本机”它是不一样的。

当/如果单击的元素在冒泡之前捕获其本机单击事件时，真正模拟正文单击事件的任何想法？

编辑：我尝试了各种方法。IE：

```
<div id="captureclick"></div>
<script>
jQuery(document.body).mousedown(function(){
    jQuery("#captureclick").click();
})
</script> 
```

我也试过：jQuery的触发函数trigger('click');

不工作。我还没有尝试使用按钮作为“点击跟踪”。谢谢。

# unit-testing - Clojure 相当于 Python doctest？

> ID：10890571
> 
> 赞同：7
> 
> 时间：2012-06-05T01:45:51.587
> 
> 标签：unit-testing, clojure, marginalia

Python doctest 将简单测试与源代码相关联（在 Python 中，它们位于函数文档中）。 [更多信息和示例在这里](http://docs.python.org/library/doctest.html)。

Clojure有类似的东西吗？

我知道`clojure.test`使用`defn`.

环顾四周，我发现[了这个](https://github.com/Kobold/clj-doc-test)，但它似乎很不简洁（测试是在实际文本中，比如 Python - 当然扩展的宏`defn`会更可取？）。

或者也许还有其他方法可以解决一般问题，那就是我有一些测试（通常是简单的东西，展示了函数的基本属性），这些测试最好包含在文档中（我使用的是[marginia](http://fogus.me/fun/marginalia/)）而不是单独的单元测试文件。

*更新* 这是一个例子：我有一个函数可以计算从像素矩形到图像中心的（曼哈顿）距离（以像素为单位）。这听起来很简单，但是由于侧面具有奇数或偶数像素的图像的“中心”含义的差异，或者您从块的哪个部分测量，这使得事情变得复杂。所以我不得不写一些测试来把代码弄明白。现在我查看文档，如果文档包含这些测试，那将是最好的，因为它们比文字更好地解释了函数的作用......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T02:43:57.137

和元数据中的测试标志，[http://clojure.org/special_forms](http://clojure.org/special_forms)

```
(defn
 ^{:doc "mymax [xs+] gets the maximum value in xs using > "
   :test (fn []
             (assert (= 42  (mymax 2 42 5 4))))
   :user/comment "this is the best fn ever!"}
  mymax
  ([x] x)
  ([x y] (if (> x y) x y))
  ([x y & more]
   (reduce mymax (mymax x y) more)))

user=> (test #'mymax)
:ok
user=> (doc test)
-------------------------
clojure.core/test
([v])
  test [v] finds fn at key :test in var metadata and calls it,
  presuming failure will throw exception
nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T01:48:16.657

:pre 和 :post 表达式怎么样？ [http://blog.fogus.me/2009/12/21/clojures-pre-and-post/](http://blog.fogus.me/2009/12/21/clojures-pre-and-post/)

# android - 我不能将 setId 设置为动态的 Spinner？

> ID：10890572
> 
> 赞同：1
> 
> 时间：2012-06-05T01:45:57.437
> 
> 标签：android, spinner

我不能将 ID 设置为动态的 Spinner！？

我想要做的是为每个 TableRow 添加 1 个 Spinner，具体取决于数据库中的行数（我不想只显示数据库）。微调器的 id 需要根据数据库中的数字来设置。

```
final String mArray[] = { "1", "2", "3" };

do{
    int db_number = c.getInt(getColumnIndex("number"));
    int db_type = c.getInt(getColumnIndex("type"));

Spinner sp_type = new Spinner(this);
sp_type.setId(db_number + 10000);
ArrayAdapter<String> adapter = newArrayAdapter<String(this,android.R.layout.simple_spinner_item,
                                    mArray);
sp_type.setAdapter(adapter);
if (db_type == 1) {
    sp_type.setSelection(0);
} else if (db_type == 2) {
    sp_type.setSelection(1);
} else {
    sp_type.setSelection(2);
}
tr.addView(sp_type);
}while(c.moveToNext()); 
```

这会使应用程序崩溃。但是，如果我删除“sp_type.setId(db_number + 10000);”行 我没有收到错误。

这是logCat：

```
06-05 01:21:09.936: E/AndroidRuntime(815): FATAL EXCEPTION: main
06-05 01:21:09.936: E/AndroidRuntime(815): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.edjr/com.edjr.Settings_EditDb}: java.lang.ClassCastException: android.widget.AbsSpinner$SavedState
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2832)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread.access$1600(ActivityThread.java:117)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.os.Looper.loop(Looper.java:123)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-05 01:21:09.936: E/AndroidRuntime(815):  at java.lang.reflect.Method.invokeNative(Native Method)
06-05 01:21:09.936: E/AndroidRuntime(815):  at java.lang.reflect.Method.invoke(Method.java:507)
06-05 01:21:09.936: E/AndroidRuntime(815):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-05 01:21:09.936: E/AndroidRuntime(815):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-05 01:21:09.936: E/AndroidRuntime(815):  at dalvik.system.NativeStart.main(Native Method)
06-05 01:21:09.936: E/AndroidRuntime(815): Caused by: java.lang.ClassCastException: android.widget.AbsSpinner$SavedState
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.widget.CompoundButton.onRestoreInstanceState(CompoundButton.java:339)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.View.dispatchRestoreInstanceState(View.java:6278)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1215)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.view.View.restoreHierarchyState(View.java:6257)
06-05 01:21:09.936: E/AndroidRuntime(815):  at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1486)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.Activity.onRestoreInstanceState(Activity.java:844)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.TabActivity.onRestoreInstanceState(TabActivity.java:58)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.Activity.performRestoreInstanceState(Activity.java:816)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1096)
06-05 01:21:09.936: E/AndroidRuntime(815):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1625)
06-05 01:21:09.936: E/AndroidRuntime(815):  ... 12 more 
```

# asp.net-mvc-3 - 与实例化线程不同的工作流基础语言环境设置

> ID：10890576
> 
> 赞同：0
> 
> 时间：2012-06-05T01:46:59.713
> 
> 标签：asp.net-mvc-3, iis-7, workflow-foundation-4

我在 MVC 项目中托管了一些工作流。

在 web.config 中，我将 CurrentCulture 和 CurrentUICulture 设置为 en-AU，而服务器是 en（或者它是 en-US，没关系）。

无论如何，MVC 站点在澳大利亚语言环境中运行良好，但工作流基础在原始语言环境（en-US）中。

在工作流程开始时设置它可以解决问题，但它似乎更像是一种黑客攻击而不是一种解决方案。

那么，如何设置工作流线程的语言环境？

提前致谢。

# python - ctypes cdecl 在调用 gcc 编译的 dll 返回结构时缺少 4 个字节

> ID：10890577
> 
> 赞同：3
> 
> 时间：2012-06-05T01:47:03.377
> 
> 标签：python, windows, gcc, ctypes

我有我想使用 ctypes 调用的 ac 库（花栗鼠）。但是，它在返回结构的函数上失败？

我得到的错误是

```
File "qw.py", line 19, in <module>
b = cpBBNew3(1,2,3,4)
ValueError: Procedure called with not enough arguments (4 bytes missing) or wrong calling convention 
```

这是（相关的）c 代码：在 cpBB.h

```
typedef struct cpBB {
    cpFloat l, b, r ,t;
} cpBB;
cpBB cpBBNew3(cpFloat l, cpFloat b, cpFloat r, cpFloat t); 
```

在 cpBB.c

```
cpBB cpBBNew3(cpFloat l, cpFloat b, cpFloat r, cpFloat t) {
    cpBB bb = {l, b, r, t};
    return bb;
} 
```

编译

> gcc -O3 -std=gnu99 -shared -c
> 
> gcc -O3 -std=gnu99 -shared -s

然后python看起来像

```
from ctypes import *

chipmunk_lib = cdll.LoadLibrary('''C:/code/pymunk/trunk/pymunk/chipmunk.dll''')

class cpBB(Structure):
    pass
cpBB._pack_ = 4
cpBB._fields_ = [
    ('l', c_double),
    ('b', c_double),
    ('r', c_double),
    ('t', c_double),
]

cpBBNew3 = chipmunk_lib.cpBBNew3
cpBBNew3.restype = cpBB
cpBBNew3.argtypes = [c_double, c_double, c_double, c_double]

b = cpBBNew3(1,2,3,4) 
```

如果我使用 -mrtd 编译并使用 windll（使用 stdcall），则此特定示例有效。然而，当使用优化和新版本的 GCC 编译时，在整个库上使用 stdcall 会在库的其他部分产生分段错误，这就是为什么让 cdecl 工作会很好的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:27:49.073

根据结构和编译器/平台的大小，cdecl 可以通过在普通参数之前将隐藏指针传递给调用者分配的结构来返回结构。尝试以下操作：

```
b = cpBB()
cpBBNew3(byref(b),1,2,3,4) 
```

# java - 如何在命令行上设置 JVM 字符集？

> ID：10890578
> 
> 赞同：2
> 
> 时间：2012-06-05T01:47:12.350
> 
> 标签：java, character-encoding, jvm

设置JVM字符集的命令是什么？

（另外，查看当前JVM字符集的命令是什么，所以我知道如何在完成后将其重置为默认值）

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T01:49:25.950

Java 字符串在内部始终是 UTF-16（[javadoc 链接](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)），但您可以使用它`-Dfile.encoding=UTF-8`来促进读取具有默认字符集的文件。

只需确保 Java 在您设置它时可以访问该文件集，否则它将无法启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:08:48.860

[java.nio.charset.Charset.defaultCharset()](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29)将为您获取 JVM 的默认字符集。

# ios - 表视图重新加载数据不更新表视图

> ID：10890581
> 
> 赞同：0
> 
> 时间：2012-06-05T01:48:04.597
> 
> 标签：ios, uitableview, reloaddata

这的其他部分工作正常。但如果 itemFlag 为真，则在进行字母排序后，我无法让新信息正确显示。退出程序并重新启动显示新项目已成功添加到阵列中，并且所有内容都正确显示。

所以我的问题是，如果 itemFlag 为真，为什么 reloadData 不起作用？

这是代码：

```
- (void)changeFoodDetails:(NSString *)foodName withPoints:(NSString *)foodPoints{
    if (newItemFlag) {

        [_foodStuffsArray insertObject:[[FoodItem alloc] initWithName:foodName points:[foodPoints intValue]] atIndex:0];

        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

        [sharedManager sortFoodStuffArrayByName];
        [self.tableView reloadData];

        newItemFlag = false;
    }else {
        [_foodStuffsArray removeObjectAtIndex:currentFoodstuffArrayEntry];
        [_foodStuffsArray insertObject:[[FoodItem alloc] initWithName:foodName points:[foodPoints intValue]] atIndex:currentFoodstuffArrayEntry];
        [self.tableView reloadData];
    }
} 
```

# ios - 在 UIWindow 上设置 rootViewController 会改变 UIScrollView 与分页布局

> ID：10890584
> 
> 赞同：0
> 
> 时间：2012-06-05T01:48:11.053
> 
> 标签：ios, uiscrollview, paging, padding

**更新**

事实证明，下面的代码实际上并不是问题所在。在我的应用程序委托中，我正在做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] init];

    self.window.rootViewController = self.viewController;// <-- this does not work
    //[self.window addSubview:self.viewController.view]; // <-- this works

    [self.window makeKeyAndVisible];
    return YES;
} 
```

如果我删除语句“self.window.rootViewController = self.viewController”并将 viewController 的视图添加到窗口中，它就可以工作。谁能解释一下？在窗口上设置 rootViewController 是否会限制孩子的界限？我试图通过文档，但它并没有提到太多。

**原帖**

我在向 UIScrollView 中的页面添加填充时遇到问题。我基本上是在尝试设置一个简单的滚动视图，它在不同的页面中显示 UIView，由预定义的填充分隔（有点像没有照片的照片应用程序）。我一直在尝试从[WWDC 2010](https://developer.apple.com/videos/wwdc/2010/)和他们的示例应用程序[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)中遵循 Apple 的 ScrollView 示例，但总是想出在视图中显示的填充。该应用程序当前隐藏状态栏并向窗口添加 1 个视图控制器。为了简单起见，每个页面都应该显示一个绿色的 UIView，而有填充的空间是黄色的。您应该只在用户滚动时看到黄色。以下是前 3 页：

![第 1、2 和 3 页](../Images/d61f15ddab20e532ce98be06a5b83c96.png)

我在 .h 文件中声明了一个名为 pagingScrollView 的类级别字段。在我的单视图控制器中，我基本上只是在尝试遵循示例代码正在执行的操作。

```
#define PADDING  10
#define PAGE_COUNT 3

- (void)loadView
{
    CGRect pagingScrollFrame = [[UIScreen mainScreen] bounds];
    pagingScrollFrame.origin.x -= PADDING;
    pagingScrollFrame.size.width += (2 * PADDING);
    pagingScrollView = [[UIScrollView alloc] initWithFrame:pagingScrollFrame];

    pagingScrollView.pagingEnabled = YES;
    pagingScrollView.backgroundColor = [UIColor yellowColor];
    pagingScrollView.contentSize = CGSizeMake(pagingScrollFrame.size.width * PAGE_COUNT, pagingScrollFrame.size.height);

    self.view = pagingScrollView;

    for(int i = 0; i < PAGE_COUNT; i++) {
        CGRect frame = [self frameForPageAtIndex:i];
        UIView *page = [[UIView alloc] initWithFrame:frame];
        page.backgroundColor = [UIColor greenColor];
        [pagingScrollView addSubview:page];
    }
}

- (CGRect)frameForPageAtIndex:(NSUInteger)index {
    CGRect bounds = pagingScrollView.bounds;
    CGRect pageFrame = bounds;

    pageFrame.size.width -= (2 * PADDING);
    pageFrame.origin.x = (bounds.size.width * index) + PADDING;

    return pageFrame;
} 
```

pagingScrollFrame 的宽度为 340，因此（我认为）滚动视图将被分解为 340 像素的页面。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:14:28.073

简单地看一下，看起来你做的事情相当正确，除了你的内容大小的设置。你设置：

```
pagingScrollView.contentSize = CGSizeMake(pagingScrollFrame.size.width * PAGE_COUNT, pagingScrollFrame.size.height); 
```

如果您的每个页面确实彼此相邻，这将是正确的，但是当您在每个视图之间添加一个 10pt 填充时，您应该具有以下内容：

```
pagingScrollView.contentSize = CGSizeMake(pagingScrollFrame.size.width * PAGE_COUNT + PADDING * (PAGE_COUNT - 1), pagingScrollFrame.size.height); 
```

这应该可以纠正您的问题并导致黄色不在可见区域中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:28:52.997

分页关闭的原因是因为在窗口上设置 RootViewController 显然是在幕后做一些事情（那是什么，我不知道）。要解决的是，我使用向窗口添加视图的旧方法。

```
[self.window addSubview:self.viewController.view]; 
```

如果你认为你知道如何在设置 RootViewController 时修复它，请告诉我！

# mysql - Liquibase MySQL：'????????????????'附近的语法错误

> ID：10890590
> 
> 赞同：1
> 
> 时间：2012-06-05T01:49:11.880
> 
> 标签：mysql, liquibase

我正在尝试使用以下参数（默认参数，只是修改路径）运行 liquibase：

```
liquibase --driver=com.mysql.jdbc.Driver \
     --classpath=mysql-connector-java-5.1.20-bin.jar
     --changeLogFile=changelog.xml \
     --url="jdbc:mysql://localhost/example" \
     --username=root \
     migrate 
```

changelog.xml 非常小：

```
 <?xml version="1.0" encoding="UTF-8"?>   <databaseChangeLog  
 xmlns="http://www.liquibase.org/xml/ns/dbchangelog"  
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
 xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
          http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">  
 </databaseChangeLog> 
```

我得到的错误是：

> Liquibase 更新失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '????????????????' 附近使用正确的语法 在第 1 行 SEVERE 6/5/12 上午 2:42：liquibase：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '????????????????' 附近使用正确的语法 在第 1 行 liquibase.exception.DatabaseException: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '????????????????' 附近使用正确的语法 在 liquibase.integration.commandline.CommandLineUtils.createDatabaseObject(CommandLineUtils.java:111) 的第 1 行 liquibase.integration.commandline.Main.doMigration(Main.java:
> 在 liquibase.integration.commandline.Main.main(Main.java:134) 引起：com.mysql.jdbc.exceptions.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '????????????????' 附近使用正确的语法 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO. java:4028) 在 com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490) 在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651) 在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl .java:2677) 在 com.mysql.jdbc.ConnectionImpl.configureClientCharacterSet(ConnectionImpl.java:1943) 在 com.mysql.jdbc.ConnectionImpl。
> 在 com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305) 在 liquibase.integration.commandline.CommandLineUtils.createDatabaseObject(CommandLineUtils.java:101) ...2 更多

不知道是什么原因造成的。我正在运行 liquibase 2.0.5。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:04:46.087

我有一个非常相似的问题，'???????????????? 让我怀疑是字符集问题。附加：

```
  ?useJvmCharsetConverters=true
```

到 liquibase.properties 中的 url 字符串，正如[这篇文章](http://www.vanheusden.com/java/tt.php)中所建议的，为我修复了它。

我建议您尝试更换：

```
  --url="jdbc:mysql://localhost/example"
```

经过：

```
  --url="jdbc:mysql://localhost/example?useJvmCharsetConverters=true"
```

在您的 liquibase 命令行中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:29:09.547

我怀疑 MySQL 服务器的版本与您使用的 JDBC 客户端 jar 不匹配。现在 5.1 版本已经很老了，MySQL 的最新版本是 5.6

要对此进行调查，您可以使用 liquibase 生成一个 SQL 文件，并尝试使用[mysql](http://dev.mysql.com/doc/refman/5.6/en/mysql.html)之类的工具对您的数据库运行它。

```
liquibase --driver=com.mysql.jdbc.Driver \
     --classpath=mysql-connector-java-5.1.20-bin.jar
     --changeLogFile=changelog.xml \
     --url="jdbc:mysql://localhost/example" \
     --username=root \
     updateSQL 
```

# 更新

我使用调试运行我的示例，如下所示：

```
java -jar liquibase.jar --logLevel=debug --logFile=update.log updateSQL 
```

生成如下日志文件：

```
DEBUG 13/06/12 19:08:liquibase: Unable to load/access Apache Derby driver class to check version
DEBUG 13/06/12 19:08:liquibase: Connected to liquibase@localhost@jdbc:mysql://localhost:3306/liquibase
INFO 13/06/12 19:08:liquibase: Successfully acquired change log lock
DEBUG 13/06/12 19:08:liquibase: Executing QUERY database command: SELECT MD5SUM FROM `DATABASECHANGELOG` WHERE MD5SUM IS NOT NULL
INFO 13/06/12 19:08:liquibase: Reading from `DATABASECHANGELOG`
DEBUG 13/06/12 19:08:liquibase: Executing QUERY database command: SELECT FILENAME,AUTHOR,ID,MD5SUM,DATEEXECUTED,ORDEREXECUTED,TAG,EXECTYPE FROM `DATABASECHANGELOG` ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
..
.. 
```

重现了相同的 Apache Derby 消息（在我看来，这就像默认的数据库检查）。

重要的一点是 MySQL 连接消息是否出现在您的日志文件中？

如您所见，Liquibase 然后针对其 DATABASECHANGELOG 表执行 SQL 语句以确定 DB 模式的状态。

# jquery - jQuery自动完成返回数组

> ID：10890595
> 
> 赞同：0
> 
> 时间：2012-06-05T01:49:34.673
> 
> 标签：jquery, jquery-autocomplete

这是我的代码：

```
$("#input-search").autocomplete({
    source: function(request, response) {
            $.get('EmployeeSearchList.igx', { name: request.term }, 
            function(data) {
                response(data.split('\n'));
                }
            );
        }
    }); 
```

EmployeeSearchList.igx 返回这种格式。

```
[{label:"JP Fortes", value:"199829"},{label:"Jeffrey Dante", value:"200507"}] 
```

我怎样才能看到这个作为回报？

```
<li value="199829">JP Fortes</li>
<li value="200507">Jeffrey Dante</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:10:36.500

```
$("#input-search").autocomplete({
    source: function(request, response) {
        $.get('EmployeeSearchList.igx', { name: request.term }, 
        function(data) {
            var html = "";
            for(var i=0; i < data.length; i++){
               html += '<li value="'+data[i].value+'">'+data[i].label+'</li>';
            }
            $("ul").append(html);
        });
    }
}); 
```

像这样的东西应该可以解决问题。您可能需要进一步钻取`data`对象，因此只需检查返回的内容以确保您循环通过正确的数组。

# ruby-on-rails - 如何将枚举值绑定到rails中的字段

> ID：10890596
> 
> 赞同：0
> 
> 时间：2012-06-05T01:49:38.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在数据库中创建了一个枚举字段。现在我想将字段绑定到视图，使其显示所有可用值以供选择。在这种情况下男性和女性。

```
t.enum  :sex ,:limit => [:Male, :Female] 
```

编辑：

```
SQL generated:
Started PUT "/profiles/3" for 127.0.0.1 at 2012-06-04 22:11:35 -0700
Processing by ProfilesController#update as HTML
  Parameters: {"utf8"=>"?", "authenticity_token"=>"IJGsa4RfVeBC/LwD6PI69rJ5O0RxmPNTu7PavqK5hPM=", "profile"=>{"firstname"=>"Huzaifa ", "sex"=>"Female"}, "commit"=>"Update Profile", "id"=>"3"}
  [1m[36mProfile Load (1.0ms)[0m  [1mEXEC sp_executesql N'SELECT TOP (1) [profiles].* FROM [profiles] WHERE [profiles].[id] = @0', N'@0 int', @0 = 3[0m  [["id", "3"]]
  [1m[35mSQL (0.0ms)[0m  BEGIN TRANSACTION
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT @@TRANCOUNT[0m
  [1m[35mSQL (0.0ms)[0m  COMMIT TRANSACTION
Redirected to http://localhost:3000/profiles/3
Completed 302 Found in 5ms (ActiveRecord: 2.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:53:04.953

可以在表单中以多种方式呈现一系列值，但听起来您想要一个选择字段。我假设您的列名是“枚举”

```
= form_for @<model_name> |t| 
  = t.select :enum, [:Male, :Female] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:35:51.263

没有传递价值，

```
 <%= f.select :sex , [[ "Male" ,0] , ["Female" , 3 ]] %> 
```

# database - 使非窗口组件数据感知

> ID：10890597
> 
> 赞同：1
> 
> 时间：2012-06-05T01:49:57.717
> 
> 标签：database, delphi, components, data-aware

我有一个带有日期属性的非窗口组件。我想通过对日期字段的读取和写入功能使此组件数据感知。（换句话说，如果我在运行时更改日期，我想将新的日期属性值写入数据集。）我已经搜索了示例，但我找不到任何示例。找到了几个只读示例，例如 TDbLabel，但没有一个允许将更改写入数据集。如果有人能给我举个例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:12:48.773

这是您问题的通用代码方法

```
unit Unit1;

interface

uses
   Classes
  ,DB
  ,DBCtrls
  ;
type
  TDataAwareComponent = class(TComponent)
  private
    { private declarations }
    FDataLink : TFieldDataLink;
    FFromDateChange : Boolean;
    function GetDataField: string;
    function GetDataSource: TDataSource;
    function GetField: TField;
    function GetReadOnly: Boolean;
    procedure SetDataField(const Value: string);
    procedure SetDataSource(const Value: TDataSource);
    procedure SetReadOnly(const Value: Boolean);
    function GetDateProperty: TDateTime;
    procedure SetDateProperty(const Value: TDateTime);
  protected
    { protected declarations }
    procedure DataChange(Sender : TObject);
  public
    { public declarations }
    constructor Create(AOwner : TComponent);override;
    destructor  Destroy;override;
  public
    property Field        : TField    read GetField;
    property DateProperty : TDateTime read GetDateProperty write SetDateProperty;
  published
    { published declarations }
   property DataSource   : TDataSource           read GetDataSource  write SetDataSource;
   property DataField    : string                read GetDataField   write SetDataField;
   property ReadOnly     : Boolean               read GetReadOnly    write SetReadOnly;
  end;

implementation

{ TDataAwareComponent }
{------------------------------------------------------------------------------}
constructor TDataAwareComponent.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FDataLink                 := TFieldDataLink.Create;
  FDataLink.Control         := Self;
  FDataLink.OnDataChange    := DataChange;
end;
{------------------------------------------------------------------------------}
destructor TDataAwareComponent.Destroy;
begin
  FDataLink.Free;
  FDataLink := nil;
  inherited;
end;
{------------------------------------------------------------------------------}
procedure TDataAwareComponent.DataChange(Sender: TObject);
begin
  // Here a visual object would display the underlying field value.
  // For example if this component was a TEdit
  // the code would be something like

{  if FDataLink.Active then
    Self.Text := Field.AsString;
    And on the exit event of the TEdit the code would be reversed
    so the field can take the value the user entered.

    Since you do not need any UI interaction propably this event
    is useless to you.
    }
    // Of course there are more issues you should cover to
    // have a complete working solution.
    // This is only demostration code.

end;
{------------------------------------------------------------------------------}
function TDataAwareComponent.GetDataField: string;
begin
  Result := FDataLink.FieldName
end;
{------------------------------------------------------------------------------}
function TDataAwareComponent.GetDataSource: TDataSource;
begin
  Result := FDataLink.DataSource;
end;
{------------------------------------------------------------------------------}
function TDataAwareComponent.GetDateProperty: TDateTime;
begin
  //You do not need a separate property since you can access directly the field value.
  Result := 0;
  if Assigned(Field) and (Field.DataType in [ftTime,ftDate,ftDateTime]   then
    Result := Field.AsDateTime;
end;
{------------------------------------------------------------------------------}
function TDataAwareComponent.GetField: TField;
begin
  Result : FDataLink.Field;
end;
{------------------------------------------------------------------------------}
function TDataAwareComponent.GetReadOnly: Boolean;
begin
  Result := FDataLink.ReadOnly;
end;
{------------------------------------------------------------------------------}
procedure TDataAwareComponent.SetDataField(const Value: string);
begin
  FDataLink.FieldName := Value;
end;
{------------------------------------------------------------------------------}
procedure TDataAwareComponent.SetDataSource(const Value: TDataSource);
begin
  FDataLink.DataSource := Value;
end;
{------------------------------------------------------------------------------}
procedure TDataAwareComponent.SetDateProperty(const Value: TDateTime);
begin
  if Assigned(Field)  then
  begin
    FFromDateChange := True;
    try
      Field.DataSet.Edit;
      Field.Value := Value;
    finally
      FFromDateChange := False;
    end;
  end;
end;
{------------------------------------------------------------------------------}
procedure TDataAwareComponent.SetReadOnly(const Value: Boolean);
begin
  FDataLink.ReadOnly := Value;
end;
{------------------------------------------------------------------------------}

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:45:05.653

这将是一些代码，但是如果您的组件在其值更改时触发了事件，那么如果它处于`dsEdit`状态，那么它可以用于将更新的值发送到数据集。您还需要处理各种[TDataSource 事件](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.DB.TDataSource_Events)以了解数据集何时发生变化。

# jquery - jQuery 按钮直到第二次单击才起作用-如何在第一次单击之前与 zClip绑定

> ID：10890599
> 
> 赞同：0
> 
> 时间：2012-06-05T01:50:20.850
> 
> 标签：jquery, onclick, zclip

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:02:58.567

我以前从未使用过 zclip，但快速查看一下[使用文档](http://www.steamdev.com/zclip/#usage)，您似乎不需要将其绑定到单击上。所以你只需要让它工作：

```
$(document).ready(function(){
    $button = $('a.copy-btn');
    $button.zclip({
        path:'js/ZeroClipboard.swf',
        copy:$button.prev('p.copiedText').text()
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:08:54.690

我认为你应该试试这个：

```
$(document).ready(function() {

    $('a.copy-btn').each(function(i) {
        var $this = $(this);
        $(this).zclip({
            path: 'js/ZeroClipboard.swf',
            copy: $this.prev('p.copiedText').text()
        });
    });

});​ 
```

# php - 增加应用于图像的水印文本的大小

> ID：10890600
> 
> 赞同：-1
> 
> 时间：2012-06-05T01:50:24.020
> 
> 标签：php, image, gd

我有这个代码：

```
<?php  

$filename   =  'Tulips.jpg';
$stringSize = 10000;
$footerSize = 40;  
$footer     = 'Blyxo.com/post/1234535';  

list ( $width, $height, $image_type ) = getimagesize ( $filename );  
$im = imagecreatefromjpeg ( $filename );

imagefilledrectangle (  
        $im,  
        0,  
        $height,  
        $width,  
        $height - $footerSize, imagecolorallocate($im, 128, 128, 128));  

imagestring (
        $im,  
        $stringSize,  
        $width  - ( imagefontwidth ( $stringSize ) * strlen ( $footer ) ) - 2,  
        $height - $footerSize,  
        $footer,  
        imagecolorallocate ( $im, 255, 255, 255 ) );  

header ( 'Content-Type: image/jpeg' );  
imagejpeg ( $im ); 

?> 
```

所以; 图像如下所示：

![图片](../Images/afd77ab87ad87224d849435477fcd535.png)

但是，我想将字体设置得更大，但它不起作用；我正在尝试设置`$stringSize = 1000, $stringSize = 10, $stringSize= 9`，但 (...) 什么都没有。

而且，如果可能的话，我想知道如何在照片的开头设置页脚；不像绝对位置；一开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:59:50.453

![在此处输入图像描述](../Images/dc87885c88d5263004984cafc22be28a.png)

你已经使用了这个功能......水印在文本中设置任何角度，浅色或亮色，大小..

参考：http: [//in.php.net/manual/en/function.imagefttext.php](http://in.php.net/manual/en/function.imagefttext.php)

```
imagettftext ( resource $image , float $size , float $angle , int $x , int $y , int $color , string $fontfile , string $text ) 
```

# java - 将正则表达式查询转换为英文关键字查询

> ID：10890603
> 
> 赞同：0
> 
> 时间：2012-06-05T01:51:38.440
> 
> 标签：java, regex, reflection, tree

我正在尝试将正则表达式查询转换为关键字查询，以便关键字查询为我提供了正则表达式查询的超集。例如

*   “主机。*”可以转换为“主机*”
*   "host ((?10\.6\.2*)) ChuckN*" 可以转换为 "host *", "10 6 *", "Chuck* "
*   "host.* registered.+" 可以转换为 "host*", "registered*"
*   "10\.64\.2*" 可以转换为 "10 64 *"

为此，我正在寻找一个正则表达式树，它的叶子元素可以组合起来以获得关键字查询。我正在尝试访问用于存储正则表达式的 java 模式类中的数据结构。请让我知道如何做到这一点，或者是否有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:51:35.167

```
 System.out.println(
      (     "host."
        + "\nhost ((?10\\.6\\.2*)) ChuckN*"
        + "\nhost.* registered.+" 
        + "\n10\\.64\\.2*"
      )
        .replaceAll("(.?\\*)", "*")
        .replaceAll("\\.\\+", "*")
        .replaceAll("\\\\.", " ")
        .replaceAll("(\\.?[^A-Za-z0-9 \\*\\n])", "")
    ); 
```

输出

```
host
host 10 6 * Chuck*
host* registered*
10 64 * 
```

**编辑**：*最后一个*replaceAll*行已更正。*

您可能必须在最后一个*.replaceAll("sString", "")*中完成 sString 。

# programming-languages - Facebook signed_request 文档示例中的 base64 无效

> ID：10890608
> 
> 赞同：0
> 
> 时间：2012-06-05T01:52:24.480
> 
> 标签：programming-languages, facebook-oauth, facebook-authentication

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:12:11.170

我的商店用 C# 做东西，我们自己去添加填充。

了解 Facebook，从多年在他们的平台上开发......好吧，让我们说这个小小的文档打嗝并不让我感到惊讶。

# lisp - 将 Lisp 代码形成任务——与扁平化列表方法相关

> ID：10890612
> 
> 赞同：3
> 
> 时间：2012-06-05T01:53:32.723
> 
> 标签：lisp, common-lisp

我在尝试为我想解决的问题编写代码时遇到问题。它是这样的：

~ 目标：将嵌套列表扁平化为一个数字

1.  如果对象是列表，则将列表替换为其原子的总和。
2.  使用嵌套列表，首先展平最里面的列表并从那里开始工作。

例子：

```
 (CONDENSE '(2 3 4 (3 1 1 1) (2 3 (1 2)) 5))

       (2 3 4 (6) (2 3 (3)) 5)

       (2 3 4 (6) (8) 5)

       (28) 

  => 28 
```

我试图为这个问题实现扁平化列表功能，我最终得到了这个：

```
(defun condense (lst)
  (cond
    ((null lst) nil)
    ((atom lst) (list lst)))
    (t (append  (flatten (apply #'+ (cdr lst)))))) 
```

但它给了我错误:(

谁能向我解释我的处理/代码有什么问题？我该如何改进它？

* * *

更新：2012 年 6 月 5 日

```
(defun condense(lxt)
  (typecase lxt
    (number (abs lxt))
    (list
        (if (all-atoms lxt)
           (calculate lxt)
           (condense (mapcar #'condense lxt)))))) 
```

所以在这里，在这段代码中，显示了我的真实意图。我有一个函数`calculate`可以根据列表中的值执行计算。不一定每次都是相同的操作。另外，我知道我正在返回数字的绝对值；我这样做是因为我找不到另一种方法来返回数字本身。如果是数字，我需要找到一种方法来返回`lxt`数字。我让它在底部递归两次，因为这是它无限循环直到计算一个数字的一​​种方式。注意：此函数不再实现 flatten 函数，也不再使用其中的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:51:41.227

这是作业吗？如果是这样，请将其标记为这样。一些提示：

1.  你确定空列表的“浓缩”`nil`吗？（也许你应该返回一个数字？）
2.  你确定`condensation`一个元素是一个列表吗？（也许你应该返回一个数字？）
3.  你确定`condensation`最后一个案例是一个列表吗？（你不应该返回一个数字）？

简而言之，如果您所有的返回值都是列表，您`condense`将如何返回？`28`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:12:22.693

想象一下你已经有了你的功能。它得到什么？它必须产生什么？

给定一个原子，它返回什么？给定一个简单的原子列表，它应该返回什么？

```
(defun condense (x)
  (typecase x
    (number  
       ; then what?
       (condense-number x))
    (list
       ; then what?
       (if (all-atoms x)
         (condense-list-of-atoms x) ; how to do that?
         (process-further-somehow
            (condense-lists-inside x))))
    ; what other clauses, if any, must be here?
    )) 
```

必须`condense-lists-inside`做什么？根据你的描述，就是把里面的嵌套列表--每个都压缩成*一个数字*，原子原封不动。所以它会留下一个数字列表。为了*以某种方式进一步**处理*，我们已经“拥有”了一个功能，对吗？*`condense-list-of-atoms`*

 *现在，如何实施`condense-lists-inside`？这很容易，

```
(defun condense-lists-inside (xs)
  (mapcar #'dowhat xs)) 
```

做*什么*？为什么，`condense`当然！请记住，我们想象我们已经拥有它。只要它得到了它想要得到的东西，它就会生产出它设计生产的东西。也就是说，给定一个原子或一个列表（内部可能有嵌套列表），它将产生*一个 number*。

所以现在，填空，简化。特别是，看看你是否真的需要`all-atoms`检查。

***编辑：***实际上，使用`typecase`是一个不幸的选择，因为它将 NIL 视为 LIST。我们需要区别对待 NIL，而是返回一个“零值”。所以最好使用通常的`(cond ((null x) ...) ((numberp x) ...) ((listp x) ...) ... )`构造。

关于您的新代码：您犯了错误：要处理 之后返回的原子列表`(mapcar #'condense x)`，我们有一个函数`calculate`可以做到这一点，无需回溯到`condense`自身。当您在那里替换`calculate`时，很明显`all-atoms`根本不需要检查；它只是一种教学设备，用于简化代码的开发。:) 在我们开发的时候做多余的选择是可以的，如果我们在达到***正确的目标******之后***再把它们简化掉！

 *但是，删除`all-atoms`检查会破坏您的要求 #2。然后计算将如下进行

```
(CONDENSE '(2 3 4 (3 1 1 1) (2 3 (1 2)) 5))
==
(calculate (mapcar #'condense '(2 3 4 (3 1 1 1) (2 3 (1 2)) 5)))
== 
(calculate (list 2 3 4 (condense '(3 1 1 1)) (condense '(2 3 (1 2))) 5))
== 
(calculate (list 2 3 4 (calculate '(3 1 1 1)) 
                         (calculate (list 2 3 (calculate '(1 2)))) 5))
== 
(calculate (list 2 3 4 6 (calculate '(2 3 3)) 5))
== 
(calculate (list 2 3 4 6 8 5))
==
28 
```

即它将以从左到右的方式进行，而不是从最深的嵌套级别开始。将嵌套列表想象成一棵树（确实如此），这将在树的最深左角向上和向右“咀嚼”；带有`all-atoms`检查的代码将严格按照级别进行。

*所以最终的简化代码是：*

```
(defun condense (x)
  (if (listp x)
    (reduce #'+ (mapcar #'condense x))
    (abs x))) 
```

***备注：***查看归约序列的最后一个插图，出现了一幅清晰的画面 -用*计算*应用程序*替换*参数*树中的每个节点。*这是 fold 的一个明显例子[*，*](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29#Folds_as_structural_transformations)就像是在树上而不是在普通列表上完成的那样。*[](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29#Folds_as_structural_transformations)*`reduce`**

 **这可以直接用所谓的“car-cdr 递归”编码，用组合函数对单元格的递归调用的两个结果和组件的`cons`应用程序替换每个单元格：`f``car``cdr`

```
(defun condense (x) (reduce-tree x #'+ 0))
(defun reduce-tree (x f z)
  (labels ((g (x)
            (cond
             ((consp x) (funcall f (g (car x)) (g (cdr x))))
             ((numberp x) x)
             ((null x) z)
             (T (error "not a number")))))
    (g x))) 
```

正如你所看到的，这个版本是高度递归的，这不是很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:28:10.010

任务：*使用嵌套列表，首先展平最里面的列表并从那里开始工作*

```
sum
   flatten lists 
```

对于*sum*使用`REDUCE`，不是`APPLY`。

对于*展平列表*，您需要一个循环。Lisp 已经提供了专门的映射函数。

稍微高级一点：求和和展平都可以通过调用`REDUCE`.

您也可以在不使用 APPLY、REDUCE 等高阶函数的情况下写下递归......这需要更多的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:07:03.207

这里添加了对您遇到的错误的解释，实际上您已经接近解决您的问题，只需付出更多的努力，您就会得到正确的。

```
; compiling (DEFUN CONDENSE ...)

; file: /tmp/file8dCll3
; in: DEFUN CONDENSE
;     (T (APPEND (FLATTEN (APPLY #'+ (CDR LST)))))
; 
; caught WARNING:
;   The function T is undefined, and its name is reserved 
;   by ANSI CL so that even
;   if it were defined later, the code doing so would not be portable.
; 
; compilation unit finished
;   Undefined function:
;     T
;   caught 1 WARNING condition
;STYLE-WARNING: redefining CONDENSE in DEFUN

(defun condense (lst)
  (cond
    ((null lst) nil)
    ((atom lst) (list lst)))
  ;.------- this is a function call, not a condition
  ;|         (you closed the parens too early)
  (t (append  (flatten (apply #'+ (cdr lst))))))

;; Argument Y is not a NUMBER: (3 1 1 1)
;;    [Condition of type SIMPLE-TYPE-ERROR]

(defun condense (lst)
  (cond
    ((null lst) nil)
    ((atom lst) (list lst));             .-- not a number!
    ;You are calling #'+ -------.        |
    ;on something, which        |  '(3 4 (3 1 1 1) (2 3 (1 2)) 5)
    ; is not a number.          |   |
    (t (append  (flatten (apply #'+ (cdr lst)))))))

;; You probably wanted to flatten first, and then sum

(defun condense (lst)
  (cond
    ((null lst) nil);          .--- returns just the 
    ((atom lst) (list lst));  /     atom 28, you can
    ;  .---------------------/      just remove it.
    (t (append (apply #'+ (flatten lst))))))

;; Now, you are lucky that append would just return the 
;; atom if it's not a list

(defun condense (lst)
  (cond
    ((null lst) nil)
    ((atom lst) (list lst))
    (t (apply #'+ (flatten lst)))))

;; Again, you are lucky because (apply can take enough arguments
;; while your list is reasonably small - this will not always be
;; the case, that is why you need to use something more durable,
;; for example, reduce.

(defun condense (lst)
  (cond
    ((null lst) nil)
    ((atom lst) (list lst))
    (t (reduce #'+ (flatten lst)))))

;; Whoa!

(condense '(2 3 4 (3 1 1 1) (2 3 (1 2)) 5)) 
```

这一切都是因为该`flatten`功能确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T13:30:04.227

如果您的 lisp 已经实现`flatten`和`reduce`功能（例如 Clojure，我将在这里使用），您可以执行以下操作：

```
user=> (defn condense [l] (reduce + 0 (flatten l)))
#'user/condense
user=> (condense [1 [2 [[3 4] 5]]])
15
user=> 
```

如果做不到这一点，这些功能的幼稚实现可能是：

```
(defn flatten [l]
  (cond (nil?  l) l
        (coll? l) (let [[h & t] l]
                    (concat (flatten h) (flatten t)))
        true      [l])) 
```

和：

```
(defn reduce [op initial-value [h & t]]
  (if (nil? t)
    (op initial-value h)
    (op initial-value (reduce op h t)))) 
```

但请务必检查您正在使用的特定 Lisp 的语义。此外，如果您正在实施`reduce`and `flatten`，您可能希望使它们尾递归，我没有这样做以保持清晰。

在 Common Lisp 中，您可以执行以下操作：

```
(defun flatten (l)
    (cond ((null l) l)
          ((atom l) (list l))
          (t        (append (flatten (car l))
                            (flatten (cdr l)))))) 
```

并使用 apply 而不是 reduce：

```
(defun condense (l) (apply #'+ (flatten l))) 
```****

# algorithm - 并行计算 Pi 的快速算法

> ID：10890613
> 
> 赞同：24
> 
> 时间：2012-06-05T01:53:35.970
> 
> 标签：algorithm, parallel-processing, cuda, numerical-methods, pi

我开始学习 CUDA，我认为计算 pi 的长数字将是一个不错的入门项目。

我已经实现了易于并行化的简单蒙特卡罗方法。我只是让每个线程在单位正方形上随机生成点，计算出单位圆内有多少个点，然后使用归约运算计算结果。

但这肯定不是计算常数的最快算法。之前，当我在单线程 CPU 上进行此练习时，我使用[类似 Machin 的公式](http://en.wikipedia.org/wiki/Machin-like_formula)进行计算，以实现更快的收敛。对于那些感兴趣的人，这涉及将 pi 表示为反正切的总和并使用泰勒级数来评估表达式。

这种公式的一个例子：

![在此处输入图像描述](../Images/b345bab409d1dd7fc2fabdfca9067217.png)

不幸的是，我发现将这种技术并行化到数千个 GPU 线程并不容易。问题是大多数操作只是简单地进行高精度数学运算，而不是对长数据向量进行浮点运算。

所以我想知道，**在 GPU 上计算任意长的 pi 数字的最有效方法是什么？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-05T02:22:54.277

您应该使用[Bailey–Borwein–Plouffe 公式](http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)

为什么？首先，你需要一个可以分解的算法。所以，我首先想到的是将 pi 表示为无限和。然后，每个处理器只计算一个项，最后将它们全部相加。

然后，最好每个处理器处理小精度值，而不是非常高精度的值。例如，如果你想要十亿个小数，并且你使用[这里](http://en.wikipedia.org/wiki/List_of_formulae_involving_%CF%80)使用的一些表达式，比如[Chudnovsky 算法](http://en.wikipedia.org/wiki/Chudnovsky_algorithm)，你的每个处理器都需要处理十亿个长数字。这根本不是 GPU 的合适方法。

所以，总而言之，BBP 公式将允许您单独计算 pi 的数字（该算法非常酷），并且使用“低精度”处理器！阅读“用于 π 的 BBP 数字提取算法”

> 计算 π 的 BBP 算法的优点 该算法计算 π **，不需要具有数千甚至数百万位的自定义数据类型**。该方法计算第 n 位而不计算前 n - 1 位，并且可以**使用小型、高效的数据类型**。该算法是计算第 n 个数字（或第 n 个邻域中的几个数字）的最快方法，但是当目标是计算从 1 到 n 的所有数字时，使用大数据类型的 π 计算算法仍然更快。

# php - 使用 cURL php 抓取图像

> ID：10890617
> 
> 赞同：2
> 
> 时间：2012-06-05T01:54:13.097
> 
> 标签：php, image, curl, upload, save

尝试使用 cURL 将图像保存到我的服务器。图像似乎正在下载。它显示了正确的字节，但是当我链接图像时不起作用。然后我 DL 看到并没有它的空白图像。

这是我的代码......它有什么问题？

```
$ch = curl_init("'. $image .'");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$rawdata=curl_exec ($ch);
curl_close ($ch);

$fp = fopen("$rename.jpg",'w');
fwrite($fp, $rawdata); 
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:11:24.640

我测试了你的脚本，它对我来说很好，只需删除 $image 的无用双引号和点。

```
<?
$image ="http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5";
$rename="123";

$ch = curl_init($image);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$rawdata=curl_exec ($ch);
curl_close ($ch);

$fp = fopen("$rename.jpg",'w');
fwrite($fp, $rawdata); 
fclose($fp);
?> 
```

# python - Django最大递归深度超过十进制

> ID：10890620
> 
> 赞同：1
> 
> 时间：2012-06-05T01:55:15.580
> 
> 标签：python, django

我正在努力尝试找出 post_save 函数返回的原因：

```
Exception Type:     RuntimeError
Exception Value:    maximum recursion depth exceeded 
```

这是我的代码：

```
#post save functions of the order
def orderPs(sender, instance=False, **kwargs):
    if instance.reference is None:
        instance.reference = str(friendly_id.encode(instance.id))

    #now update the amounts from the order items
    total = 0
    tax = 0
    #oi = OrderItem.objects.filter(order=instance)
    #for i in oi.all():
    #    total += i.total
    #    tax += i.total_tax

    instance.total = total
    instance.tax = tax
    instance.save()

#connect signal
post_save.connect(orderPs, sender=Order) 
```

我现在已经注释掉了订单项目代码。

instance.total 和 instance.tax 是模型十进制字段。

似乎 post_save 函数处于无限循环中，不知道为什么我对所有 post_save 函数都使用了相同的格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:58:49.840

您正在调用`instance.save()`您的 post save 信号，从而递归地触发它。

您在此信号接收器中编辑的所有字段都非常简单地从已经存储在数据库中的其他值派生而来，从而产生了冗余。这通常不是一个好主意。改为写入属性或缓存属性：

```
from django.db.models import Sum
from django.utils.functional import cached_property

class Order(model.Model):
    ...
    @cached_property       # or @property
    def total(self):
         return self.orderitem_set.aggregate(total_sum=Sum('total'))['total_sum']

    # do the same with tax 
```

# c++ - 如何用链表重载运算符<<？

> ID：10890621
> 
> 赞同：0
> 
> 时间：2012-06-05T01:55:16.917
> 
> 标签：c++, linked-list, operator-overloading

对于类，我试图重载 << 运算符，以便打印出我创建的对象。我声明并添加到这个

```
WORD you; //this is a linked list that contains 'y' 'o' 'u' 
```

我想这样做

```
cout << you; //error: no operator "<<" matches theses operands 
```

我必须将插入运算符作为友元函数重载，并通过链接打印一个单词。

我已经声明并定义了重载函数，但它仍然不起作用。这是类声明文件，后面是带有函数的.cpp文件

```
#include <iostream>

using namespace std;
#pragma once

class alpha_numeric //node
{
public:
char symbol; //data in node
alpha_numeric *next;//points to next node
};

class WORD
{
public:
WORD(); //front of list initially set to Null
//WORD(const WORD& other);
bool IsEmpty(); //done
int Length();
void Add(char); //done
void Print(); //dont
//void Insert(WORD bword, int position);
//WORD operator=(const string& other);

friend ostream & operator<<(ostream & out, alpha_numeric *front);//******************<-----------------

private:
alpha_numeric *front; //points to the front node of a list
int length;

}; 
```

在 .cpp 文件中，我`*front`输入了参数，因为`front`当我尝试在函数中使用它时它说没有定义，即使我在类中声明了它。然后我尝试了这个。我不知道它是否正确。

```
ostream & operator<<(ostream & out, alpha_numeric *front)
{
alpha_numeric *p;
for(p = front; p != 0; p = p -> next)
{
    out << p -> symbol << endl;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:25:26.097

如果要为 WORD 类重载 <<，则参数必须是 'WORD' 类型。我认为在提出此类问题之前，您必须首先搜索 << 的重载。:-)

```
class WORD
{
friend ostream & operator<<(ostream & out, const WORD& w);
}

ostream & operator<<(ostream & out, const WORD& w)
{
alpha_numeric *p;
for(p = w.front; p != 0; p = p -> next)
    out << p -> symbol;
out<<endl;
return out;
} 
```

# javascript - 鼠标悬停在图像上时删除图像标题

> ID：10890622
> 
> 赞同：0
> 
> 时间：2012-06-05T01:55:18.457
> 
> 标签：javascript, jquery, html, css, lytebox

我正在为我的图片库使用 lytebox。它很好用，除非当用户将鼠标悬停在图像`html`上时，浏览器上会显示带有标签的文本。

前任：

```
<h1>This is the first image </h1>
<p>The image desc<p> 
```

我需要`title`我的图片库的属性，但不希望它在用户暂停图片时显示。那可能吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:12:03.540

```
var imgTitle;

$("img").hover(function(){
    imgTitle = $(this).attr("title");
    $(this).removeAttr("title");
}, function(){
   $(this).attr("title", imgTitle);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:12:08.237

我认为您必须执行以下操作：

```
$('#slideshow img').hover(function() {
    $(this).data('title', $(this).attr('title'));
    $(this).attr('title', '');
}, function() {
    $(this).attr('title', $(this).data('title'));
});​ 
```

演示：http: [//jsfiddle.net/lucuma/cX5MD/](http://jsfiddle.net/lucuma/cX5MD/)

您不会在 img 上看到标题，但如果您检查它们，您会发现它们仍然存在。

您也可以使用 jQuery`removeAttr`而`attr`不是将其设置为空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-10T19:55:53.497

像这样很简单

```
$('img').removeAttr('title'); 
```

# javascript - Backbone/Parse 中的类成员相互使用

> ID：10890629
> 
> 赞同：0
> 
> 时间：2012-06-05T01:55:50.653
> 
> 标签：javascript, class, backbone.js

```
var User = Parse.User.extend({
    // instance members
}, {
    // types
    TYPE_TRAINER : 1,
    TYPE_ATHLETE : 2,
    types: {
        TYPE_TRAINER : 'Trainer',
        TYPE_ATHLETE : 'Athlete'
    }
}); 
```

我想拥有`TYPE_TRAINER`并`TYPE_ATHLETE`维护对象之前定义的值`1`和值，以便我可以在模板中使用该对象。`2``types``types`

如果您不了解 Parse，`Parse.User`它是`Backbone.Model`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:50:01.180

您要问的内容在 JavaScript 对象文字中是不可能直接实现的。对象文字始终是左侧/键侧的文字值。

最接近的方法是使用`TYPE_TRAINER`和`TYPE_ATHLETE`键作为变量，通过方括号语法分配值以访问对象键/值对：

```
var a = 1;
var b = 2;

var obj = {};
obj[a] = "a";
obj[b] = "b"; 
```

这将导致`obj`对象如下所示：

```
 {
  1: "a",
  2: "b"
} 
```

所以你可以做这样的事情，在你的代码中得到你想要的：

```
 var userMethods = {
    // types
    TYPE_TRAINER : 1,
    TYPE_ATHLETE : 2
};

userMethods[userMethods.TYPE_TRAINER] = 'Trainer';
userMethods[userMethods.TYPE_ATHLETE] = 'Athlete';

var User = Parse.User.extend({
    // instance members
}, userMethods); 
```

它的代码比您可能想要的要多，但由于对象文字语法，它是实现您想要的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:48:49.037

Parse.Object [Javascript 文档](https://www.parse.com/docs/js/symbols/Parse.Object.html#.extend)说：

您应该致电：

```
var MyClass = Parse.Object.extend("MyClass", {
    // Instance properties
}, {
    // Class properties
}); 
```

或者，为了骨干兼容性：

```
var MyClass = Parse.Object.extend({
    className: "MyClass",
    // Other instance properties
}, {
    // Class properties
}); 
```

如果您想扩展`Parse.User`“类”（它是一个对象，而不是一个类），您需要包含`className`上述的，因为`Parse.User`它本身就是`Parse.Object`.

# opengl - 如何将纹理图片读入opengl

> ID：10890632
> 
> 赞同：-3
> 
> 时间：2012-06-05T01:56:28.057
> 
> 标签：opengl, graphics, textures

将纹理读入opengl的最简单格式是什么？是否有任何教程 - 好的教程，用于将 jpg、png 或 raw 等图像格式加载到可用于纹理映射的数组中（最好不使用 libpng 等库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:05:11.573

OpenGL itself does not knows nothing about common image formats (other than natively supported S3TC/DXT compressed and alikes, but they are a different story). You need to expand you source images into RGBA arrays. Number of formats and combinations are supported. You need to choose one that suits you, e.g. GL_ALPHA4 for masks, GL_RGB5_A1 for 1bit transparency, GL_BGRA/GL_RGBA for fullcolor, etc.

For me the easiest (not the fastest) way are PNGs, for their lossless compression and full Alpha support. I read the PNG and write RGBA values into array which I then hand over to OpenGL texture creation. If you don't need alpha you may as well accept JPG or BMP. Pipeline is common Source -> Expanded RGBA array -> OpenGL texture.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:13:19.970

链接上有一个方便的 OpenGL 纹理教程：[http ://www.nullterminator.net/gltexture.html](http://www.nullterminator.net/gltexture.html)

# jakarta-ee - Java-EE框架的静态分析

> ID：10890635
> 
> 赞同：2
> 
> 时间：2012-06-05T01:57:09.497
> 
> 标签：jakarta-ee, static-analysis, web-frameworks

有许多优秀的静态分析工具能够检测 J2EE 应用程序中的安全漏洞。

我的问题是：这些工具适用于 Struts 或 Spring 等 Java Web 框架有多好？

你能推荐一些关于这个主题的好文章或页面吗？

非常感谢，最好的问候

# mysql - “INSERT IGNORE”和“... ON DUPLICATE KEY UPDATE”都会发生什么？

> ID：10890636
> 
> 赞同：1
> 
> 时间：2012-06-05T01:57:41.987
> 
> 标签：mysql, sql, etl, talend

mysql 将如何处理[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)和[`… ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)？

这不是关于他们[差异](https://stackoverflow.com/q/548541/516748)的问题。我问是因为 Talend ETL 在 UI 后面执行此操作，我担心它会产生副作用，特别是如果我不想更新并执行以下操作：

```
String insertIgnore_tMysqlOutput_10 = "INSERT IGNORE INTO `"
+ "Employees"
+ "` (`Name`,`JobTitle`) VALUES (?,?) ON DUPLICATE KEY UPDATE `Name` = ?"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:03:25.877

`IGNORE`只是充当一种错误抑制器，而使致命错误充当警告。

`ON DUPLICATE KEY UPDATE`不会触发错误，因此`INGORE`对其没有影响。

因此，在使用`IGNORE`时也对重复键没有影响`ON DUPLICATE KEY UPDATE`。*但是*，如果发生不同的错误，那么`IGNORE`确实会产生影响。

# algorithm - RANDOMIZED-QUICKSORT 的概率超过最坏情况

> ID：10890638
> 
> 赞同：1
> 
> 时间：2012-06-05T01:58:37.337
> 
> 标签：algorithm

问题来自 clrs（练习 12.4-5）

> **考虑对 n 个输入数字的序列进行操作的 RANDOMIZED-QUICKSORT。证明对于任何常数 k > 0，除了 O(1/n^k) 的 n! 输入排列产生 O(n lg n) 运行时间。**

我怎样才能建立最坏情况的模型，并获得它的最大界限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:57:33.163

您可能需要阅读[此说明](http://www.cse.iitk.ac.in/users/sbaswana/Courses/CS648/Lectures/L-8.pdf)以进行快速介绍。然后，您可以阅读[本文](http://www.cs.jhu.edu/~kapild/randomized/files/notes/week2.pdf)（尤其是第 3.1 节）以获得详尽的解释。

# javascript - Windows 小工具 - 透明背景上的文本

> ID：10890644
> 
> 赞同：0
> 
> 时间：2012-06-05T01:59:51.823
> 
> 标签：javascript, windows, windows-desktop-gadgets

![在此处输入图像描述](../Images/f5afec55d6d186eaac7abbb4473fa72b.png)

你在这些文字上看到了我的问题。

我需要知道，我可以在透明背景上使用 g:text 或 html 文本，而没有像图片一样的粉红色效果。

谢谢

这是我的代码：

```
<g:background id="background" src="background.png" >
    <br><br><br>
     <g:text value="Hello"  color="black" >Hello data Center Testing</g:text>
        <span id="gadgetContent">
        Hello, World!
    </span>

</g:background> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:04:41.640

您必须使用 g:text 来显示没有洋红色伪影的文本。HTML 文本绝对行不通。

但是，在开发我的小工具时，我发现避免洋红色的唯一方法是将文本对象动态添加到 g:background 元素。

`background.addTextObject` [http://msdn.microsoft.com/en-us/library/windows/desktop/aa359355(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa359355(v=vs.85).aspx)

您也可以下载我的小工具，并提取源代码（未混淆）。 [http://adamncasey.co.uk/gadget.php](http://adamncasey.co.uk/gadget.php)

但是，为了完整回答这个问题，我附加了一个`onload`事件，然后将所有文本对象添加到`g:background`（`g:background`在 HTML 中定义）。

```
function onloadevent()
{
     document.getElementById("background").addTextObject("Hello data centre testing", "Calibri", 20, "black", 25, 25);
}
window.attachEvent("onload", onloadevent); 
```

应该做的伎俩

# ogg - 在没有 Ogg 的情况下使用 Vorbis？

> ID：10890647
> 
> 赞同：1
> 
> 时间：2012-06-05T02:00:26.197
> 
> 标签：ogg, oggvorbis, vorbis, matroska

我想知道为什么 Vorbis 需要任何容器？我知道您可以将 Vorbis 放在 Ogg 容器或 Matroska 容器中，但如果我不打算将它与任何视频或任何其他多媒体捆绑在一起，为什么 Vorbis 数据不能单独存在于自己的文件中？

有没有人有这样做的经验？我在搜索之前用谷歌搜索，我只在 oggvorbis 邮件列表中找到了一个没有详细信息的提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:11:55.450

这是完全可能的。您无需事先知道任何 Vorbis 数据包的长度（无论它们是标头还是音频）即可对其进行解码。如果没有 Ogg 包装器（或替代包装器），您将错过一些事情，但它们可能对您的应用程序并不重要：

*   页面校验和 - 如果您从磁盘或其他相当可靠的来源读取，则不太重要
*   页面粒度/最后一个样本位置 - 有助于提高搜索性能，并用于指定

但是，您可以通过以下方式轻松地从 ogg 文件（假设其中只有一个 Vorbis 流）生成纯 Vorbis 字节流：

1.  跳过 26 个字节
2.  `n`= 读取 1 个字节
3.  `countOfBytesToRead`= 下一个`n`字节的总和
4.  将字节读`countOfBytesToRead`入您的 Vorbis 字节流
5.  重复1-4直到Ogg文件用完

# assembly - 在 x86 程序集中向堆栈添加变量

> ID：10890648
> 
> 赞同：0
> 
> 时间：2012-06-05T02:00:35.310
> 
> 标签：assembly, x86, x86-16, local-variables

我想知道，如何在 ASM 的过程中设置局部变量？

谢谢！！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T07:13:06.570

如果要在堆栈上存储变量，则需要为其预留空间，这通常是通过`SUB ESP,xxx`序列来完成的，其中`xxx`是要为其腾出空间的“变量”的大小，与堆栈对齐方式对齐（通常4字节，也可以是8或16）。此规则的唯一例外是当变量在寄存器中时，在这种情况下，您可以`PUSH`在该寄存器上执行 a。

这个空间需要在函数退出时清理，所以如果你`PUSH`编辑了一个寄存器，你应该`POP`这样做，或者你最初编辑的大小`ADD ESP,xxx`在哪里/你编辑的寄存​​器的大小与堆栈大小对齐。`xxx``SUB``PUSH`

读取和写入是使用 完成的`MOV`，但这有点棘手，因为我们有两种情况，有堆栈帧和没有堆栈帧。

没有堆栈帧需要更多的数学运算，因为您需要补偿堆栈上的函数参数，所以如果我们的函数需要 2 个参数，并且我们为堆栈上的整数分配空间，我们可以通过 写入它`MOV [ESP + 0xC],value`，读取是相同的`MOV EAX,[ESP + 0xC]`.

使用堆栈帧，您的参数采用正索引，`EBP`并且您分配的内存从 负索引`EBP`，因此对于上面相同的示例，您可以这样做`MOV EAX,[EBP-4]`。

正如你所看到的，这有点棘手，所以更好的方法是创建代表你想要的 C 或 C++ 代码，编译它`-O0`（我们编译时没有优化以防止堆栈变量省略到寄存器）然后反汇编它，然后看看编译器是怎么做的。

# python - GTK Application .exe 无法在 Windows XP 机器上运行

> ID：10890649
> 
> 赞同：1
> 
> 时间：2012-06-05T02:00:45.567
> 
> 标签：python, windows-xp, gtk, exe

*编辑：* Windows 7 机器是 64 位，Windows XP 是 32 位

我使用 PyGTK、xlrd、xlwt 和 xlutils 制作了一个 Windows 应用程序。我已经使用 Py2Exe 将 python 脚本转换为 .exe 并且 .exe 执行并在我的 Windows 7 笔记本电脑上正常运行。

**我的问题：**当我将应用程序（及其 dll）移植到运行 WindowsXP 的计算机时，.exe 无法打开。.exe 无法正常工作的原因可能是什么？

MyApp.exe.log 错误输出：

> C:\Users\WindowsXPUser\MyApp.exe:11: GtkWarning: `C:\Users\Windows7User\Email Contact Manipulation\dist\lib\gtk-2.0\2.10.0\engines\libwimp.dll': %1 不是一个有效的 Win32 应用程序。回溯（最后一次调用）：
> 文件“MyApp.py”，第 5 行，
> 文件“gtk__init__.pyc”，第 40 行，
> 文件“gtk_gtk.pyc”，第 12 行，
> 文件“gtk_gtk.pyc”，第 10 行，在 __load ImportError: DLL load failed: 找不到指定的过程。

相关信息：

*   我使用 Python 2.7，GTK 版本 2.0
*   .exe 是使用 Py2Exe 生成的，我在 Windows 7 笔记本电脑上执行此操作
*   我已将整个 'dist' 文件夹复制到 Window XP 机器上，因此所有 dll 和其他文件都带有 .exe

**当 .exe 在我的 Windows 7 机器上运行良好时，您认为 .exe 无法在 Windows XP 机器上运行的原因是什么？**

我的 setup.py 代码：

```
# setup.py
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
    name = 'Bounceback Handler',
    description = '',
    version = '1.0',

    windows = [
                  {
                      'script': 'MyApp.py'
                  }
              ],

    options = {
                  'py2exe': {
                      'packages':'encodings',
                      'includes': 'cairo, pango, pangocairo, atk, gobject, gio',
                  }
              },

    data_files=None
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:20:36.360

如果您使用的是安装在 Windows 7 机器上的 64 位版本的 Python，它会创建一个 64 位的可执行文件。这不会在您的 32 位 XP 系统上运行。您必须安装 32 位版本的 python，然后使用 32 位版本的 py2exe 来创建您的可执行文件。

否则 Py2exe 可能会出现这样的奇怪问题。我会推荐使用[PyInstaller](http://www.pyinstaller.org/)

# asp.net - ASP .net 4.0 CSS .page 宽度不适用

> ID：10890650
> 
> 赞同：1
> 
> 时间：2012-06-05T02:01:28.217
> 
> 标签：asp.net, .net, css, .net-4.0

第一个问题，善良！;-)

使用 Visual Studio 2010，我从普通的 C# 网站模板创建了一个基本的 Framework 4.0 网站。我现在正在寻找编辑 MS 提供的 .css。

作为概念证明，我想采用默认的 960px .p​​age 宽度并将其更改为 550px。我已经直接通过代码手动更改了这个，我也尝试过通过管理样式工具栏。新宽度适用于设计视图，但在浏览器中运行时，我可以通过检查应用的样式来确认它始终为 960 像素。（在 Firefox 的 css 编辑器中将 960 更改为 550...）

我已经重新启动了VS2010，我的电脑，我已经重建了解决方案，重建了网站并从外部发布到IIS。我正在编辑的 .css 不适用于我的页面。

```
.page
{
    width: 550px;
    background-color: #fff;
    margin: 20px auto 0px auto;
    border: 1px solid #496077;
} 
```

对于那些可能比我更不熟悉 VS2010 的人来说，这个 .page 样式似乎是唯一具有规定宽度的地方，并且 960px 确实为整个站点设置了宽度。我正在使用的 .css 文件是位于 |ProjectDirectory|/Styles/Site.css 的生成文件

有任何想法吗？

# c++ - 为什么我会使用 push_back 而不是 emplace_back？

> ID：10890653
> 
> 赞同：276
> 
> 时间：2012-06-05T02:01:45.517
> 
> 标签：c++, c++11, std

C++11 向量具有新功能`emplace_back`。与`push_back`依赖编译器优化来避免复制的不同，它`emplace_back`使用完美转发将参数直接发送到构造函数以就地创建对象。在我看来，`emplace_back`一切都`push_back`可以做到，但有时它会做得更好（但永远不会更糟）。

我必须使用什么理由`push_back`？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2016-04-28T15:48:17.697

在过去的四年里，我对这个问题思考了很多。我得出的结论是，大多数关于`push_back`vs.的解释都`emplace_back`忽略了全貌。

去年，我在 C++Now 上做了一个关于[C++14 中的类型推导](https://www.youtube.com/watch?v=_utkragEjRA)的演讲。我在 13:49 开始谈论`push_back`vs. `emplace_back`，但在此之前有一些有用的信息提供了一些支持证据。

真正的主要区别与隐式与显式构造函数有关。考虑我们想要传递给`push_back`or的单个参数的情况`emplace_back`。

```
std::vector<T> v;
v.push_back(x);
v.emplace_back(x); 
```

在您的优化编译器掌握了这一点之后，就生成的代码而言，这两个语句之间没有区别。传统的智慧是`push_back`构造一个临时对象，然后将其移入，`v`而`emplace_back`将转发参数并直接将其构造在适当的位置，而无需复制或移动。根据标准库中编写的代码，这可能是正确的，但它错误地假设优化编译器的工作是生成您编写的代码。如果您是平台特定优化方面的专家并且不关心可维护性，只关心性能，优化编译器的工作实际上是生成您会编写的代码。

这两个语句之间的实际区别在于，更强大的`emplace_back`会调用任何类型的构造函数，而更谨慎的`push_back`只会调用隐式的构造函数。隐式构造函数应该是安全的。如果您可以`U`从 a隐式构造 a `T`，那么您就是说它可以毫无损失`U`地保存所有信息。`T`在几乎任何情况下通过 a 都是安全的，`T`如果你`U`改为 a 没有人会介意。隐式构造函数的一个很好的例子是从`std::uint32_t`to的转换`std::uint64_t`。隐式转换的一个不好的例子是`double`to `std::uint8_t`。

我们希望在编程时保持谨慎。我们不想使用强大的功能，因为功能越强大，就越容易意外地做一些不正确或意想不到的事情。如果您打算调用显式构造函数，那么您需要`emplace_back`. 如果您只想调用隐式构造函数，请坚持`push_back`.

**一个例子**

```
std::vector<std::unique_ptr<T>> v;
T a;
v.emplace_back(std::addressof(a)); // compiles
v.push_back(std::addressof(a)); // fails to compile 
```

`std::unique_ptr<T>`有一个来自 的显式构造函数`T *`。因为`emplace_back`可以调用显式构造函数，传递一个非拥有指针编译就好了。但是，当`v`超出范围时，析构函数将尝试调用`delete`该指针，该指针未分配，`new`因为它只是一个堆栈对象。这会导致未定义的行为。

这不仅仅是发明的代码。这是我遇到的一个真正的生产错误。代码是`std::vector<T *>`，但它拥有内容。作为迁移到 C++11 的一部分，我正确地更改`T *`为`std::unique_ptr<T>`指示向量拥有它的内存。然而，这些变化是基于我在 2012 年的理解，在此期间我想“`emplace_back`什么都`push_back`可以做，还有更多，那我为什么要使用`push_back`？”，所以我也`push_back`将`emplace_back`.

如果我将代码保留为使用更安全的代码`push_back`，我会立即发现这个长期存在的错误，并且它会被视为升级到 C++11 的成功。相反，我掩盖了这个错误，直到几个月后才发现它。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2012-06-05T02:12:26.380

`push_back`总是允许使用统一初始化，这是我非常喜欢的。例如：

```
struct aggregate {
    int foo;
    int bar;
};

std::vector<aggregate> v;
v.push_back({ 42, 121 }); 
```

另一方面，`v.emplace_back({ 42, 121 });`行不通。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2012-06-05T02:03:21.127

向后兼容 C++11 之前的编译器。

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2015-02-10T15:35:58.990

emplace_back 的某些库实现的行为与 C++ 标准中指定的不同，包括 Visual Studio 2012、2013 和 2015 附带的版本。

为了适应已知`std::vector::push_back()`的编译器错误，如果参数引用迭代器或其他在调用后将无效的对象，请优先使用。

```
std::vector<int> v;
v.emplace_back(123);
v.emplace_back(v[0]); // Produces incorrect results in some compilers 
```

在一个编译器上，v 包含值 123 和 21，而不是预期的 123 和 123。这是因为第二次调用`emplace_back`导致调整大小在该点`v[0]`变得无效。

上述代码的工作实现将使用`push_back()`而不是`emplace_back()`如下：

```
std::vector<int> v;
v.emplace_back(123);
v.push_back(v[0]); 
```

注意：使用整数向量是出于演示目的。我在一个更复杂的类中发现了这个问题，其中包括动态分配的成员变量，并且调用`emplace_back()`导致了硬崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T15:59:21.880

考虑使用 c++-17 编译器在 Visual Studio 2019 中发生的情况。我们在一个函数中有 emplace_back 并设置了正确的参数。然后有人更改了 emplace_back 调用的构造函数的参数。VS中没有任何警告，代码也编译得很好，然后在运行时崩溃。此后，我从代码库中删除了所有 emplace_back 。

# css - chrome中的OL编号不左对齐，出现在右侧

> ID：10890654
> 
> 赞同：0
> 
> 时间：2012-06-05T02:01:48.060
> 
> 标签：css, google-chrome, html-lists, css-float

我在 Chrome 中使用 OL 编号时遇到了一些奇怪的行为，这是我的标记：

```
<ol>
  <li>
    <div class="block left">
      <span class="block">Main Title<span class="alert">!</span></span>
      <input type='text' name='title-1' />
    </div>

    <div class="block left">
      <span class="block">Subtitle<span class="alert">!</span></span>
      <input type='text' name='title-2' />
   </div>

    <div class="block left">
      <span class="block">Add Image<span class="alert">!</span></span>
      <input type='file' name='image' size='30' />
    </div>
  </li> 
<ol> 
```

使用的类是：

```
 .block { display:block; }  
    .left { float:left; }  
    .alert { color:red; } 
```

我遇到的问题是我需要我的 OL 的编号出现在 LI 内容的左侧，但 Chrome 似乎将某种浮点属性归因于数字，使其出现在右侧。

任何人都可以就此事提供任何帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:24:38.320

```
ol li { margin-left: 60px; list-style-type: decimal; } 
```

将使数字可见。

将标签包裹在 li-elements 中`<div class="wrap">`并将这个 css 应用到它：

```
.wrap { display: inline-block; position: relative; top: 12px; } 
```

将解决您的问题-> [http://jsfiddle.net/GpfYk/2/](http://jsfiddle.net/GpfYk/2/)

`position: relative; top: 12px;`使位置更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:17:52.587

问题是你在`span`里面有一个“块”类`li`，并且两者都被浮动。如果您从 中删除 block 的类`span`，它应该可以解决问题。

或者，如果您希望保持元素内联，请尝试将它们设置为`display: inline-block`并删除“左”类以使它们浮动，如下例所示：http: [//jsfiddle.net/jglovier/zshPr/](http://jsfiddle.net/jglovier/zshPr/)

# iphone - 将 cv::Mat 转换为 UIImage opencv 2.4 时崩溃

> ID：10890656
> 
> 赞同：0
> 
> 时间：2012-06-05T02:02:06.457
> 
> 标签：iphone, objective-c, ios, opencv, uiimage

我正在尝试将 UIImage 转换为 cv::Mat，然后再转换回 UIImage 并将该 UIImage 插入 UIImageView。

这是我用来转换的代码：

```
UIImage * imageFromMat(const cv::Mat& cvMat){
NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize() * cvMat.total()];

CGColorSpaceRef colorSpace;

if (cvMat.elemSize() == 1) {
    colorSpace = CGColorSpaceCreateDeviceGray();
} else {
    colorSpace = CGColorSpaceCreateDeviceRGB();
}

CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

CGImageRef imageRef = CGImageCreate(cvMat.cols,                                
                                    cvMat.rows,                                 
                                    8,                                           
                                    8 * cvMat.elemSize(),                          
                                    cvMat.step[0],                                
                                    colorSpace,                                   
                                    kCGImageAlphaNone | kCGBitmapByteOrderDefault,   
                                    provider,                                        
                                    NULL,                                         
                                    false,                                         
                                    kCGRenderingIntentDefault);                  

UIImage *image = [[[UIImage alloc] initWithCGImage:imageRef] autorelease];
CGImageRelease(imageRef);
CGDataProviderRelease(provider);
CGColorSpaceRelease(colorSpace);

return image;

} 
```

它转换得很好，但是一旦我将它插入 UIImageView，我就会崩溃，所以我假设问题就在那里。

我注意到，如果我保留原始图像（转换为 cv::Mat 之前的图像），则不会发生崩溃，但会发生泄漏。

关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:33:36.800

原来我已经发布了 CGImageRef。

# php - 在每个页面的标题上显示一个值，而无需刷新页面

> ID：10890658
> 
> 赞同：0
> 
> 时间：2012-06-05T02:02:40.840
> 
> 标签：php

我需要在每个页面的标题上显示一些值（购物车维护的*净金额*和购物车中的物品数量）。当新商品添加到购物车或删除或更新购物车时，更新后的值应显示在标题上，用户无需刷新页面。

我想，我需要在页面完成加载后立即重新加载。我尝试了以下。

```
<META HTTP-EQUIV="REFRESH"; CONTENT="1";URL=ShoppingCart.php"> 
```

但它每秒刷新一次页面，这确实不是必需的。也尝试过使用`header()`类似的东西，但它不适合`header("Location: #");`

有没有办法这样做？每次更新购物车时，它应该反映在每个页面的标题上而不需要刷新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:08:35.140

您应该使用 AJAX。使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)。它非常简单，方便且美观！

# java - 修复由于 JTextArea 而导致的无响应 GUI？

> ID：10890659
> 
> 赞同：0
> 
> 时间：2012-06-05T02:02:40.727
> 
> 标签：java, swing, user-interface, jtextarea, event-dispatching

我正在设计一个程序，`JEditorPane`用户可以在其中输入和编译 Java 代码。然后他们可以在新进程中运行他们的程序，然后他们的输出将显示在`JTextArea`. 我通过扩展`JTextArea`并将其添加为成员来实现这一点：

```
private OutputStream writer = new OutputStream() {
    public void write(int b) {
        Console.this.append(String.valueOf((char) b));
    }
}; 
```

然后我有一个简单的`getStream()`方法，它返回`OutputStream`包装在 a 中的this `PrintWriter`，`System.setOut()`并`System.setErr()`使用`PrintWriter`.

现在问题来了：如果用户编译一个程序，其中大量输出一次发送到控制台（例如，无限循环的`System.out.println()`调用），整个 GUI 挂起。我试图通过使用 a`SwingWorker`来处理`append()`呼叫来解决此问题，但似乎没有任何效果。

有没有办法让 GUI 保持响应，即使大量文本被写入`JTextArea`? 我假设部分问题是`append()`通话后更新 GUI 所花费的时间。有没有办法将写入延迟`JTextArea`少量，以便用户可以单击按钮终止进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:15:11.573

我想知道您的问题是否是您在 OutputStream 中编写的方式。*也许您应该从*EDT写入 StringBuilder 对象，然后当出现“\n”时，将 EDT 上的字符串附加到 JTextArea。

像这样的东西：

```
// this is all called in a background thread
public void write(int b) throws IOException {

  if (b == '\r')
     return;

  if (b == '\n') {
     final String text = sb.toString() + "\n";
     SwingUtilities.invokeLater(new Runnable() {
        // except this is queued onto the event thread.
        public void run() {
           textArea.append(text);
        }
     });
     sb.setLength(0);

     return;
  }

  sb.append((char) b);
} 
```

# asp.net-mvc - uploadify 返回 http 错误 302

> ID：10890669
> 
> 赞同：2
> 
> 时间：2012-06-05T02:05:41.997
> 
> 标签：asp.net-mvc, asp.net-mvc-3, uploadify

我在我的 asp.net mvc3 项目上使用 uploadify。我在本地电脑上测试了我的代码，它可以工作。在我将它上传到生产服务器后，它返回了 http 错误 302。

我发现一些人遇到了同样的问题，但是他们使用了 [authorize] 属性，这会导致重定向。我没有使用它。我确实让它在我的本地正常工作。我还应该检查什么？

# iphone - 嵌套的 NavigationController 导致 uiview 调整大小

> ID：10890670
> 
> 赞同：0
> 
> 时间：2012-06-05T02:06:11.070
> 
> 标签：iphone, ios, uiview, uinavigationcontroller, uinavigationbar

我在另一个里面嵌套了一个导航控制器，现在它导致嵌套导航控制器内的 uiview 奇怪地调整大小。

以下是一些屏幕截图，向您展示发生了什么。

这是两个导航栏都显示的情况，您可以看到底部超出物理屏幕所能允许的范围。 ![在此处输入图像描述](../Images/9cf9bbbfbe4f627a447063dcd2434fa1.png)

这个只显示隐藏了主导航栏的子导航栏。如您所见，子栏上方有一个奇怪的空间，看起来像状态栏的高度。我不确定它是什么。 ![在此处输入图像描述](../Images/a81f028d63521b6fb00f0096d203c2cd.png)

最后，这仅显示了主导航栏和隐藏的子栏.. ![在此处输入图像描述](../Images/e4af364fe215d25a70344fd876f77cc4.png)

最后一个视图是我想使用的，但是..如果您查看视图的底部，它只会显示 A 的一部分.. 但是，如果您查看左侧 InterfaceBuilder 中的视图，您会看到界面应该有更多的字母，但奇怪的是视图没有调整大小以适应物理视图的范围......

如果您能告诉我如何让视图正确调整大小并正确放置所有内容，我希望提供的详细信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:28:25.110

我认为您为这些 UILabel 对象设置了 autoresizeMask 属性 = UIViewAutoresizingFlexibleBottomMargin，您将使最后一个 UILabel 与 UIView 的底部对齐。

# html - CSS 特异性 - 无法直截了当

> ID：10890672
> 
> 赞同：0
> 
> 时间：2012-06-05T02:06:35.307
> 
> 标签：html, css

任何人都可以告诉我为什么我不能使用 html 下面定义的特异性`list-style-type`从`<ul>`下面删除。

```
<footer><!-- this is where the footer starts-->
        <div class="container_12">
            <div class="grid_2">
                <ul>
                    <li>
                        <strong>
                            <a href="#">test</a>
                        </strong>
                    </li>
                    <li>
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a href="#">Why </a>
                    </li>
                    <li>
                        <a href="#">Get Started</a>
                    </li>
                    <li>
                        <a href="#">Customers</a>
                    </li>
                    <li>
                        <a href="#">Careers</a>
                    </li>
                </ul>

footer ul {
    list-style-type:none;
    margin:0px;
    padding: 0px;
} 
```

我也试过`footer div div ul {}`，但我似乎无法解决这个问题`ul`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:11:09.380

需要调用 CSS 类`.footer ul {...}`，并且页脚必须实际使用它：`<footer class="footer">`- 因为在 IE6 和任何其他不理解 HTML5 标签的浏览器中，您使用的任何解决方案`<footer>`都会重命名为`<div>`，因此 css 选择器不会应用任何更长...

**更新：**如果有任何东西覆盖了您的样式，请检查任何浏览器开发人员工具，或者尝试使用`list-style-type: none !important;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:14:30.963

您的示例肯定毫无问题地引用了无序列表，这两个示例实际上都是如此。也许您还有其他相互冲突的风格给您带来问题？

要查看它的工作情况，[请单击此处](http://jsfiddle.net/m_raffaele/MtDHz/)。*请注意，我在它周围放置了一个红色边框以帮助使其更清晰。*

# android - Android Libgdx 应用程序，无法解析 AndroidApplication

> ID：10890675
> 
> 赞同：2
> 
> 时间：2012-06-05T02:07:10.887
> 
> 标签：android, android-activity, libgdx

我被困在一个使用 libgdx 的 android 项目上。
我的桌面项目完美运行。
我的 android 项目包含 libs 文件夹，其中包含 armeabi 和 armeabi-v7a 以及 android gdx 后端。活动在清单中声明

我习惯使用这些工具。过去一切都很完美，突然间我面临一个持续性错误（在项目修复、清理、重新启动、重新下载库、尝试不同的 api、sdk 级别、jdk...之后）。

这是错误的日志

```
06-05 03:28:38.953: I/dalvikvm(5312): Failed resolving    
Lcom/badlogic/gdx/backends/android/AndroidApplication; interface 73 'Lcom/badlogic/gdx/Application;'
06-05 03:28:38.963: W/dalvikvm(5312): Link of class 'Lcom/badlogic/gdx/backends/android/AndroidApplication;' failed
06-05 03:28:38.963: W/dalvikvm(5312): Unable to resolve superclass of Lcom/me/example/Example_RLActivity; (94)
06-05 03:28:38.963: W/dalvikvm(5312): Link of class 'Lcom/me/example/Example_RLActivity;' failed
06-05 03:28:38.963: D/AndroidRuntime(5312): Shutting down VM
06-05 03:28:38.963: W/dalvikvm(5312): threadid=1: thread exiting with uncaught exception (group=0x409fb338)
06-05 03:28:38.963: E/AndroidRuntime(5312): FATAL EXCEPTION: main
06-05 03:28:38.963: E/AndroidRuntime(5312): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.me.example/com.me.example.Example_RLActivity}: java.lang.ClassNotFoundException: com.me.example.Example_RLActivity
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.os.Looper.loop(Looper.java:137)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at java.lang.reflect.Method.invokeNative(Native Method)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at java.lang.reflect.Method.invoke(Method.java:511)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at dalvik.system.NativeStart.main(Native Method)
06-05 03:28:38.963: E/AndroidRuntime(5312): Caused by: java.lang.ClassNotFoundException: com.me.example.Example_RLActivity
06-05 03:28:38.963: E/AndroidRuntime(5312):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-05 03:28:38.963: E/AndroidRuntime(5312):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
06-05 03:28:38.963: E/AndroidRuntime(5312):     ... 11 more 
```

我希望你们中的一些人可能已经面对这个问题并解决了它！在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T08:15:18.097

听起来像 Android r17 升级错误。有关解决方法，请参阅 badlogic 博客：[http ://www.badlogicgames.com/wordpress/?p=2362](http://www.badlogicgames.com/wordpress/?p=2362)

基本上，您需要将 libGDX jar 文件明确标记为来自 Android 项目的“导出”jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:28:13.483

嗨，我在[使用 jar 依赖项测试 Android 项目](https://stackoverflow.com/questions/6253173/testing-android-project-with-jar-dependecies)的线程中找到了正确答案，只需确保检查 java 构建路径的“订单/导出”选项卡中的 java 项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-16T06:46:31.770

看看[这个](https://stackoverflow.com/questions/13037107/libgdx-whttps://stackoverflow.com/questions/13037107/libgdx-wont-run-on-android/13037327#13037327ont-run-on-android/13037327#13037327)。我一直在配置和重新配置构建路径，但我的问题是我的主要项目使用的是 Java 1.7。调整您的项目以使用 Java 1.6，它应该可以开始工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T18:15:36.640

如果以上帖子都没有回答您的问题，并且您使用的是较新的 libGDX，它具有 Gradle 集成（我认为从版本 1.0.0 开始），请*确保*您已像[这样](https://github.com/libgdx/libgdx/wiki/Setting-up-your-Development-Environment-%28Eclipse%2C-Intellij-IDEA%2C-NetBeans%29)安装了 Eclipse / ADT Gradle 插件。

[在 ADT ... “升级”](https://code.google.com/p/android/issues/detail?id=72584)之后，我花了*很多*时间才弄清楚这一点。

希望这可以帮助。

# java - 从哪里开始构建压缩和解压缩文件的应用程序/系统

> ID：10890681
> 
> 赞同：-1
> 
> 时间：2012-06-05T02:09:01.250
> 
> 标签：java, android, algorithm, compression

我目前正在使用 Java/Android 开发一个允许用户压缩和解压缩文件的应用程序。起初，我开始研究文件大小，例如：

```
1Byte = 8Bits
1KB = 1024Byte
1MB = 1024KB
1GB = 1024MB
1TB = 1024GB
1PB = 1024TB
1EB = 1024PB
1ZB = 1024EB
1YB = 1024ZB 
```

在我研究了这个之后，我研究并阅读了网上的一些文章，发现有两种类型的文件压缩（如果我错了，请纠正我）：无损和有损。无损压缩意味着将文件压缩成较小的位而不会丢失任何单个文件，而有损压缩意味着在压缩文件时删除了重要文件。

我还读到压缩（运行长度编码方法）是这样的：

```
AAABBCCDFFFFEEEEH 
```

对此：

```
3A2B2CD4F4EH 
```

这让我了解了压缩/解压缩如何在文件上工作。

我还在网上搜索了有一个用于在 java 上压缩文件的 API（也适用于 android），它是

```
java.util.zip 
```

我还尝试了一些关于从各种有用的网站/论坛/等（包括 stackoverflow.com）压缩和解压缩文件的代码，这让我对这项研究有了经验。

我还阅读了有关数据压缩中使用的算法的信息

```
 Huffman encoding algorithm -  assigns a code to characters in a file based on how frequently those characters occur

run-length encoding - generates a two-part value for repeated characters: the first part specifies the number of times the character is repeated, and the second part identifies the character

Lempel-Ziv algorithm - converts variable-length strings into fixed-length codes that consume less space than the original strings. 
```

现在，我需要知道如何使用 java.util.zip 编写压缩和解压缩文件的算法（我也不知道如何使用它。网上的教程对我不起作用：/）。winzip、winrar、压缩文件夹（windows）和androzip（android app）使用什么算法？有人请逐步教我（把我当作一个没有受过教育的人）关于 java.util.zip 的工作原理和不同的算法。对不起，长篇大论的人。感谢您未来的帮助和帖子（如果有的话）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:39:50.817

```
public static final byte[] unzip(byte[] in) throws IOException {
// decompress using GZIPInputStream 
ByteArrayOutputStream outStream = 
  new ByteArrayOutputStream(EXPECTED_COMPRESSION_RATIO * in.length);

GZIPInputStream inStream = 
  new GZIPInputStream ( new ByteArrayInputStream(in) );

byte[] buf = new byte[BUF_SIZE];
while (true) {
  int size = inStream.read(buf);
  if (size <= 0) 
    break;
  outStream.write(buf, 0, size);
}
outStream.close();

return outStream.toByteArray();
}

public static final byte[] zip(byte[] in) {
try {
  // compress using GZIPOutputStream 
  ByteArrayOutputStream byteOut= 
    new ByteArrayOutputStream(in.length / EXPECTED_COMPRESSION_RATIO);

  GZIPOutputStream outStream= new GZIPOutputStream(byteOut);

  try {
    outStream.write(in);
  } catch (Exception e) {
    LOG.error("", e);
  }

  try {
    outStream.close();
  } catch (IOException e) {
      LOG.error("", e);
  }

  return byteOut.toByteArray();

} catch (IOException e) {
    LOG.error("", e);
  return null;
}
} 
```

# c# - C#/ASP.NET JSON 日期反序列化

> ID：10890682
> 
> 赞同：4
> 
> 时间：2012-06-05T02:09:05.513
> 
> 标签：c#, asp.net, json, datetime, deserialization

我正在尝试使用以下代码对对象进行反序列化，并且我想知道替换 json 日期的正确正则表达式是什么。当我运行以下代码时，正则表达式永远不会被触发。我在 json 字符串中使用标准的 JSON 日期格式。

```
{
    "UniqueId": "1000000003",     
    "Id": 3, 
    "ModifyTimestamp": "/Date(1338857699743)/"         
}

string json = // see above
string p = @"\\/Date\((\d+)\+\d+\)\\/";
MatchEvaluator matchEvaluator = new MatchEvaluator(convertJsonDateToDateString);
Regex reg = new Regex(p);
json = reg.Replace(json, matchEvaluator);
JavaScriptSerializer serializer = new JavaScriptSerializer();            
Student student = serializer.Deserialize<Student>(json) as Student; 

public static string convertJsonDateToDateString(Match m) {
        string result = string.Empty;
        DateTime dt = new DateTime(1970, 1, 1);
        dt = dt.AddMilliseconds(long.Parse(m.Groups[1].Value));
        dt = dt.ToLocalTime();
        result = dt.ToString("yyyy-MM-dd HH:mm:ss");
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T02:31:05.510

这是一个完全有效的解决方案：

```
using System;
using System.Windows.Forms;
using System.Text.RegularExpressions;

namespace ResolveOverlapIssue
{
    public partial class Form1 : Form
    {
        private static void DoSomethingElse<T>(ref T Id)
        {
            int i = 00;
        }

        public Form1()
        {
            InitializeComponent();

            string json = "{" +
                          "UniqueId: 1000000003," +
                          "Id: 3," +
                          "ModifyTimestamp: /Date(1338857699743)/" +
                          "}";

            MatchEvaluator matchEvaluator = ConvertJsonDateToDateString;
            var reg = new Regex(@".Date\(\d+\)\/.");
            json = reg.Replace(json, matchEvaluator);

        }

        public static string ConvertJsonDateToDateString(Match m)
        {
            var dt = new DateTime(1970, 1, 1);
            dt = dt.AddMilliseconds(long.Parse(m.Groups[1].Value));
            dt = dt.ToLocalTime();
            var result = dt.ToString("yyyy-MM-dd HH:mm:ss");
            return result;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:14:04.087

`@"\\/Date`部分看起来不对。它可能应该是`@"\/Date..."`或 `"\\/Data..."`。（尾随相同`"...\\/"`）

# python - Python - 列表的返回类型

> ID：10890686
> 
> 赞同：0
> 
> 时间：2012-06-05T02:09:23.120
> 
> 标签：python, list, types, undo

我正在尝试为我的图像编辑程序实现撤消功能。以下是我的部分代码：

```
def displayim(root, panel, img, editmenu):
    global image, L
    L.append(img)
    print(len(L))
    if (len(L) > 1):
        editmenu.entryconfig(0, state=NORMAL)
    else:
        editmenu.entryconfig(0, state=DISABLED)    
    image1 = ImageTk.PhotoImage(img)
    root.geometry("%dx%d+%d+%d" % (img.size[0], img.size[1], 200, 200))
    panel.configure(image = image1)
    panel.pack(side='top', fill='both', expand='yes')
    panel.image = image1
    image = img

def undo(root, panel, editmenu):
    global L
    i = len(L)
    del L[i-1]
    last = L.pop
    displayim(root, panel, last, editmenu) 
```

我的想法是，当调用任何打开图像或为图像添加效果的函数时，它将通过调用显示结果`displayim`。该参数`editmenu`确保如果没有要撤消的内容，则该`undo`命令将被禁用。变量`L`是一个列表，用于存储每个函数调用后图像的状态。调用该`undo`函数时，它将删除列表中的最后一项以及最后一项之前的一项（现在成为最后一项），并将这个新的最后一项传递给，`displayim`以便程序可以显示图像的先前状态和再次将其添加到列表中。

但是，当我尝试使用该`undo`功能时，出现错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "D:\Python32\lib\tkinter\__init__.py", line 1399, in __call__
    return self.func(*args)
  File "D:\Users\ichigo\workspace\SS2\test\main.py", line 26, in <lambda>
    editmenu.add_command(label="Undo", command=lambda:file.undo(root, panel, editmenu), state=DISABLED)
  File "D:\Users\ichigo\workspace\SS2\test\file.py", line 51, in undo
    displayim(root, panel, last, editmenu)
  File "D:\Users\ichigo\workspace\SS2\test\file.py", line 39, in displayim
    image1 = ImageTk.PhotoImage(img)
  File "D:\Python32\lib\site-packages\PIL\ImageTk.py", line 110, in __init__
    mode = Image.getmodebase(mode)
  File "D:\Python32\lib\site-packages\PIL\Image.py", line 225, in getmodebase
    return ImageMode.getmode(mode).basemode
  File "D:\Python32\lib\site-packages\PIL\ImageMode.py", line 50, in getmode
    return _modes[mode]
TypeError: unhashable type: 'list'
Exception AttributeError: "'PhotoImage' object has no attribute '_PhotoImage__photo'" in <bound method PhotoImage.__del__ of <PIL.ImageTk.PhotoImage object at 0x01B1AA50>> ignored 
```

`last`我猜这个错误意味着我传递给`displayim`from的变量`undo`不是 PIL 图像对象，所以它不能被添加到`PhotoImage`. 现在有什么适合我的解决方案吗？如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:17:01.837

你应该`last = L.pop`改为`last = L.pop()`

`L.pop`返回一个`<build-in method pop of list object>`但不是一个`PIL image object`

# r - 两个向量的随机抽样，找到样本的平均值，然后在 R 中制作一个矩阵？

> ID：10890688
> 
> 赞同：1
> 
> 时间：2012-06-05T02:09:34.390
> 
> 标签：r, matrix, sampling

谢谢你的时间！

我的数据框很简单。两列：第一列具有基因型 (1-39)，第二列具有特征值（数值、连续）。我想选择 8 种基因型并计算相关性状值的平均值和标准差。

最后，我想对 8 种基因型进行 10,000 次采样，并且对于每个样本，我想获得相关性状值的标准差和平均值。理想情况下，这将在一个矩阵中，其中每一行代表一个样本，每个基因型有 8 列，最后 2 列用于 stdev 和与这些基因型相关的性状值的平均值。这也可以以另一种方式进行。

1.  如何从数据框中的两个不同列中采样，以便两个值都显示在新样本中？即计算平均值和标准差的基因型和性状值

2.  如上所述，您如何将此样本放入矩阵中？

3.  你如何将这个过程重复 10,000 次？

再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T02:46:19.080

这将在 8 个性状的随机样本中返回具有基因型的所有行的单个样本：

```
dat[ dat$genotype %in% sample(1:39, 8), ] 
```

该`replicate`功能旨在重复随机过程。重复 3 次，从这样的 2 个基因型样本中获取“特征”的 sd：

```
dat <- data.frame(genotype=sample(1:5, 25,replace=TRUE), trait=rnorm(25) )
replicate ( 3, sd(dat[ dat$genotype %in% sample(1:5, 2), "trait" ]) )
[1] 0.7231686 0.9225318 0.9225318 
```

这记录了带有均值和 sd 值的样本 id：

```
replicate ( 3, {c( samps =sample(1:5, 2), 
                   sds=sd(dat[ dat$genotype %in% samps, "trait" ]) ,
                   means = mean(dat[ dat$genotype %in% samps, "trait" ]) )} )
            [,1]      [,2]      [,3]
samps1 1.0000000 1.0000000 5.0000000
samps2 5.0000000 3.0000000 1.0000000
sds    0.8673977 0.8673977 0.8673977
means  0.2835325 0.2835325 0.2835325 
```

# performance - NodeJS|Cluster process.send 和 worker.send 是否阻塞？如果有，表现如何？

> ID：10890689
> 
> 赞同：4
> 
> 时间：2012-06-05T02:09:37.480
> 
> 标签：performance, node.js, cluster-computing, synchronous

我有 2 个问题。

1.  process.send 和 worker.send 功能是否阻塞？而这种类型的进程间通信性能如何？

2.  我有一个集群，它的主服务器将更新推送给工作人员，而工作人员将聚合数据推送到主服务器。但是，有一个特定的查询，我需要来自 master 的最新数据。当请求进入工作人员时，我存储“响应”对象，然后执行 process.send() 以联系 master 以获取最新数据，然后在 master 上，我获取数据然后执行 worker.send () 发送回数据。我来回传递一个 responseId，以便当请求最终返回时，我知道要写回哪个响应，然后在其上调用 end() 函数。

有没有更好的方法在进程之间进行这样的同步调用？它不会经常发生，但是对于正在发生的所有其他非阻塞请求，这会产生什么样的性能影响？它会支撑其他一切吗？这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-01T05:33:09.067

> process.send 和 worker.send 功能是否阻塞

不。

> 以及这种类型的进程间通信的性能如何

大部分与 JSON 序列化/反序列化相同。数据传输由操作系统处理，速度非常快。

> 有没有更好的方法在进程之间进行这样的同步调用？

不在节点中。

> 它不会经常发生，但是对于正在发生的所有其他非阻塞请求，这会产生什么样的性能影响

不重要。就像查询数据库一样……当数据库运行并完成其工作时，Web 进程可以自由地响应其他请求。这里的校长相同（主 -> 工人）。

# javascript - Sencha Touch 2 Map 为列表中的每个项目使用不同的纬度和经度（Sencah）

> ID：10890690
> 
> 赞同：0
> 
> 时间：2012-06-05T02:09:43.103
> 
> 标签：javascript, google-maps, sencha-touch, extjs

我正在构建一个包含地址列表的应用程序。这个应用程序的工作方式是，一旦用户单击列表中的每个项目（地址），下一页就会显示地图，并且地图有一个标记，指向所单击地址的确切位置。由于代码中规定的纬度和经度坐标，这成为可能。我的问题是我有多个地址，每个地址都有唯一的经度和纬度。我想让我的应用程序以这样一种方式工作，当用户点击他们感兴趣的任何地址时，应用程序将打开一个页面并显示地图和一个指向地图上地址确切位置的标记。我的代码如下：它运行良好，但是当用户单击地址时，它会将它们带到相同的对数和纬度。

我的店铺：

```
Ext.define('List.store.Presidents', {
extend : 'Ext.data.Store',

config : {
    model : 'List.model.President',
    sorters : 'lastName',
    grouper : function(record) {
        return record.get('lastName')[0];
    },

    data : [{

        firstName : "Ikhlas HQ",
        lastName : "Tower 11A, Avenue 5, Bangsar South, No.8 Jalan Kerinchi 59200 Kuala Lumpur",
        latitude : 3.110649,
        longitude : 101.664991,
        id: 'm12',
    },
    {
        firstName : "PEJABAT WILAYAH SELANGOR",
        lastName : "No. 97, 97-1 & 97-2, Jalan Mahogani 5/KS7, Ambang Botanic, 41200 Klang,   Selangor",
        latitude : 3.003384,
        longitude : 101.45256,
        id: 'm1',
    }, ]

}
}); 
```

我的控制器：

```
Ext.define('List.controller.Main', {
extend: 'Ext.app.Controller',

config: {

    control: {
        'presidentlist': {
            disclose: 'showDetail'
        },
     }
 },
showDetail: function(list, record) {
            this.getMain().push({
                xtype: 'presidentdetail',
                title: record.fullName(),

listeners: {
            maprender: function(comp, map) {
                var position = new google.maps.LatLng(5.978132,116.072617);
                var marker = new google.maps.Marker({
                    position: position,
                    map: map
                        });
            google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                        });
            setTimeout(function() {
                    map.panTo(position);
                }, 1000);

                },
           }, 
        })
     },
}); 
```

我的观点：

```
Ext.define('List.view.PresidentDetail', {
extend : 'Ext.Map',
xtype: 'presidentdetail',

    config: {
                title: 'Details',
                styleHtmlContent: true,
                scrollable: 'vertical',
                //useCurrentLocation: true,
                layout: 'fit',

    mapOptions: {
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                navigationControl: true,
                navigationControlOptions: {
                style: google.maps.NavigationControlStyle.DEFAULT
                 }
            },
    }

}); 
```

我的模型：

```
Ext.define('List.model.President', {
extend : 'Ext.data.Model',
config : {
    fields : ['firstName', 'middleInitial', 'lastName', 'latitude', 'longitude']
},
fullName : function() {
    var d = this.data, names = [d.firstName, (!d.middleInitial ? "" : d.middleInitial + "."), d.lastName];
    return names.join(" ");
}
}); 
```

请帮帮我。我需要用纬度和经度标记列表中的每个地址，以便当用户单击地址时，它将指向地图的确切位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:54:16.083

您的线路：

```
var position = new google.maps.LatLng(5.978132,116.072617); 
```

固定在相同的坐标上，因此永远不会改变。

在我的应用程序中，我让视图向控制器触发一个事件，然后在控制器中引用记录的坐标，然后将其设置为地图。

鉴于：

```
 config: {
        layout: 'fit',
        items: [
            {
                xtype: 'map',
                listeners: {
                    maprender: function (extMapComponent, googleMapComp) {
                        this.fireEvent('googleMapRender', googleMapComp);
                    }
                 }
             }
        ]
 } 
```

控制器：

```
 refs: {
           mapRef: 'map'
   },

   Control: {            
            mapRef: {
                googleMapRender: 'onGoogleMapRender'
            }
   }

 onGoogleMapRender: function (googleMap) {

        // this.selectedRecord should be set when you select the item in the list 
        // so that you can pull the coordinates off
        var record = this.selectedRecord;

        var long = record.get("Longitude");
        var lat = record.get("Latitude");

        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, long);
        });

        marker.setMap(googleMap);

 } 
```

# iphone - Cocos2d 从 iphone 相册添加照片

> ID：10890691
> 
> 赞同：-1
> 
> 时间：2012-06-05T02:09:47.333
> 
> 标签：iphone, xcode, cocos2d-iphone

我想使用 iphone 的照片文件添加一个精灵。有什么简单的方法吗？cocos2d 是否支持文件系统。是否有任何获取照片文件的方法。

如果是这样，那么 cocos 接收什么格式的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:14:33.947

您可以使用 UIImagePickerController 获取 UIImage。

然后您可以使用以下代码从中创建一个 CCSprite。

```
CCSprite *mySpriteFromImage = [CCSprite spriteWithCGImage:[myPickerImage CGImage] key:@"pickerImage"]; 
```

# flash - Flash Media Server 管理员 API 连接重置

> ID：10890694
> 
> 赞同：1
> 
> 时间：2012-06-05T02:10:06.507
> 
> 标签：flash, flash-media-server

我正在尝试从 FMS 管理 API 中获取服务器统计信息，如下所示：

[http://example.com:1111/admin/getIOStats?auser=XXX&apswd=YYY](http://example.com:1111/admin/getIOStats?auser=XXX&apswd=YYY)

我在 Users.xml 配置中启用了 API 命令。

当我使用错误的用户名或密码时，如预期的那样，我会收到 XML 错误响应。

当我使用正确的用户名或密码时，我收到“连接重置”错误（“页面加载时与服务器的连接已重置。”）

我在 EC2 上的安全组应该是正确的，因为该 URL 在同一安全组中的开发 FMS 框上运行良好。

我查看了 Apache 日志和 FMS 日志，没有看到我的管理请求的任何痕迹，所以我一定是找错地方了。

所以，三个问题：

1.  什么在 :1111 上为管理 API 提供服务？阿帕奇？
2.  管理员 API 访问和错误日​​志在哪里？
3.  是什么导致我的连接重置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:30:38.847

供人们遇到相同问题时参考：连接重置错误是因为您需要在三个不同的地方启用通过 http 的 API 访问。

如果您的 conf/fms.ini 文件大部分是默认文件，请务必包含以下内容：

```
 USERS.HTTPCOMMAND_ALLOW = true 
```

然后在 conf/Users.xml 中，包括以下内容：

```
 <AdminServer>
        <HTTPCommands>
            <Enable>${USERS.HTTPCOMMAND_ALLOW}</Enable>
            <Allow>ping,getXXXStats</Allow>
            <Order>Allow,Deny</Order>
        </HTTPCommands>
    </AdminServer> 
```

总之：

*   `USERS.HTTPCOMMENT_ALLOW = true`在 fms.ini 中打开或关闭 http API 访问
*   确保`<Enable>`Users.xml 中的部分包含该值
*   准确列出您允许的 API 调用`<Allow>`

如果该`<Enable>`部分未设置为 true，您将收到连接重置错误（而不是像 500 或 403 这样更明智的错误）。

# c# - 控制对字段的读/写访问

> ID：10890695
> 
> 赞同：1
> 
> 时间：2012-06-05T02:10:19.943
> 
> 标签：c#, design-patterns, multiple-inheritance, access-modifiers

假设我们想在一个接口模式中分离出读写访问，如下所示。

```
namespace accesspattern
{
    namespace ReadOnly
    {
        public interface IA { double get_a(); }
    }
    namespace Writable
    {
        public interface IA : ReadOnly.IA { void set_a(double value); }
    }
} 
```

这很容易实现：

```
namespace accesspattern
{
    namespace ReadOnly
    {
        public class A : IA
        {
            protected double a;
            public double get_a() { return a; }
        }
    }
    namespace Writable
    {
        public class A : ReadOnly.A, IA
        {
            public void set_a(double value) { base.a = value; }
        }

    }
} 
```

假设我们需要另一个继承自 A 的类，因此我们继续为它定义一个接口：

```
namespace accesspattern
{
    namespace ReadOnly
    {
        public interface IB : ReadOnly.IA { int get_b(); }

    }
    namespace Writable
    {
        public interface IB : ReadOnly.IB, Writable.IA { void set_b(int value); }
    }
} 
```

实现这一点并不容易。总觉得Writable.B应该继承Writable.A和ReadOnly.B这两个基类，避免重复代码。

有推荐的设计模式吗？目的是能够根据要求分别返回“只读访问”和“读写访问”对象（在编译时决定）。如果解决方案模式可以很容易地添加更多的继承层，C、D 类......

我知道多重继承的问题在这里突然出现，并且已经在很多很多地方的其他地方详细讨论过。但我的问题不是“如何在不使用多重继承的情况下实现命名空间访问模式中定义的接口”（尽管我想学习最好的方法），而是**我们如何定义只读/可写一个类的不同版本，并且还支持继承而不会变得非常非常混乱**？

对于这里值得的是一个（混乱的）解决方案[见下文以获得更好的实现]：

```
 namespace accesspattern
    {
        namespace ReadOnly
        {
            public class A : IA
            {
                protected double a;
                public double get_a() { return a; }
            }
            public class B : IB
            {
                protected int b;
                public int get_b() { return b; }
            }
        }
        namespace Writable
        {
            public class A : ReadOnly.A, IA
            {
                public void set_a(double value) { base.a = value; }
            }
            public class B : ReadOnly.B, IB
            {
                private IA aObj;
                public double get_a() { return aObj.get_a(); }
                public void set_a(double value) { aObj.set_a(value); }
                public void set_b(int value) { base.b = value; }
                public B() { aObj = new A(); }
            }
        }
    }
} 
```

更新：我认为这（下）是尤金所说的。我认为这种实现模式非常好。通过只传递类的“writeProtected”视图，可以实现要求类的状态不会改变的算法，并且只使用“writeEnabled”视图，这意味着该函数将/可能导致状态避免的变化。

```
namespace access
{

    // usual usage is at least readable
    public interface IA { double get_a(); }
    public interface IB : IA { int get_b(); }

    // special usage is writable as well
    namespace writable
    {
        public interface IA : access.IA { void set_a(double value);  }
        public interface IB : access.IB, IA { void set_b(int value);}
    }

    // Implement the whole of A in one place
    public class A : writable.IA
    {
        private double a;
        public double get_a() { return a; }
        public void set_a(double value) { a = value; }
        public A() { }

        //support write-protection
        public static IA writeProtected() { return new A(); }
        public static writable.IA writable() { return new A(); }
    }
    // implement the whole of B in one place and now no issue with using A as a base class
    public class B : A, writable.IB
    {
        private int b;
        public double get_b() { return b; }
        public void set_b(int value) { b = value; }
        public B() : base() { }

        // support write protection 
        public static IB writeProtected() { return new B(); }
        public static writable.IB writable() { return new B(); }
    }

    public static class Test
    {
        static void doSomething(IA a)
        {
            // a is read-only
        }
        static void alterState(writable.IB b)
        {
            // b is writable
        }
        static void example()
        {
            // Write protected
            IA a = access.A.writeProtected();
            IB b = access.B.writeProtected();

            // write enabled
            writable.IA A = access.A.writable();
            writable.IB B = access.B.writable();

            Console.WriteLine(a.get_a());
            B.set_b(68);

            doSomething(A); // passed as writeprotected
            alterState(B); // passed as writable
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T11:23:50.520

我知道这个线程已经一岁了，但我想知道这样的东西是否有意义：

```
 interface ReadOnlyA
 {
    object A { get; }
 }

 interface WriteableA : ReadOnlyA
 {
   new object A {get; set;}
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:46:33.803

您可以在服务级别而不是实体级别提供读/写访问权限。在这种情况下，您可以**编写代码生成**围绕处理读/写访问的服务的包装器。使用的模式：装饰器、依赖注入

# ruby-on-rails-3 - 列出关联时，在连接模型中包含字段的 Rails 方法是什么？

> ID：10890699
> 
> 赞同：0
> 
> 时间：2012-06-05T02:10:40.843
> 
> 标签：ruby-on-rails-3, join, has-many-through

所以如果我有以下关系

```
class Item < ActiveRecord::Base
   has_many :item_user_relationships
   has_many :users, :through => :item_user_relationships
end

class User < ActiveRecord::Base
   has_many :item_user_relationships
   has_many :items, :through => :item_user_relationships
end

class ItemUserRelationship < ActiveRecord::Base
   belongs_to :item
   belongs_to :user

   attr_accessible :role
end 
```

`role`列出项目的所有用户时包含该属性的 Rails 方式是什么？

```
@users = @item.users # I want to include the role as part of a user 
```

谢谢！

**更新**：我仍然有这个问题。我的目标是获得一组用户模型，它们的角色包含在属性中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:28:52.657

我确定我是否理解正确，但也许这就是你想要的？

```
@users = @item.users
@users.each do |user|
  puts user.item_user_relationships.first.role
end 
```

# r - R：subset() 为等效的逻辑表达式返回不同的结果

> ID：10890706
> 
> 赞同：2
> 
> 时间：2012-06-05T02:11:21.933
> 
> 标签：r, subset

在为子集（）编写便利函数时，我遇到了一种奇怪的情况，即使用等效的逻辑语句会返回不同的子集。因此，例如：

```
dat = data.frame(ttl.stims = c(4,4,8,8), change = c('big', 'small'))
dat
ttl.stims = 4

#logical statements are equivalent
dat$ttl.stims == 4
dat$ttl.stims == ttl.stims

#subset evaluates differently
subset(dat, dat$ttl.stims == 4)
subset(dat, dat$ttl.stims == ttl.stims) 
```

我一直在通过以下方式解决这个问题：

```
index = dat$ttl.stims == ttl.stims
subset(dat, index) 
```

但我很好奇为什么前两个子集不会产生相同的结果！想法？想法？冠冕堂皇？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:18:03.747

`subset`因为对符号的调用`ttl.stims`在 的环境中被解释`dat`，所以它变成（解释后） `dat$ttl.stims`。我预测对子集的第二次调用会返回整个数据帧。

# sql - 如何获得分层树中孩子的累计总和？

> ID：10890707
> 
> 赞同：1
> 
> 时间：2012-06-05T02:11:27.410
> 
> 标签：sql, oracle

表“salary”的列是 att_month、emp_id（指向员工的 emp_id）、总计。
表“组织”列是 ID、IDParent、名称。
表“employee”的列是 emp_id、emp_name、dep_id（指向组织的 ID）。

目标是根据这三个表计算每个部门，每个月的汇总。我想知道是否有人可以提供 SQL 查询或优化我的？

我目前的查询如下：

```
 select * from (select yy.IDParent, xx.ID, name, sum(heji) total
       from (select CONNECT_BY_ROOT(ID) ID, heji
                  from (select aa.ID,
                           aa.IDParent,
                           aa.name,
                           nvl(sum(HJ), 0) as heji
                          from (select * from organization) aa,
                           (select att_month,
                                   b.dep_id,
                                   sum(total) as HJ
                              from salary a, employee b
                             where b.emp_id = a.emp_id
                               and to_char(att_month, 'yyyy-mm') =
                                   '2012-05'
                             group by att_month, b.dep_id) bb
                     where aa.ID = bb.dep_id(+)
                     group by aa.ID, aa.IDParent, aa.name)
                connect by prior ID = IDParent) xx,
               organization yy
         where xx.ID = yy.ID
         group by yy.IDParent, xx.ID, name)
    connect by prior ID = IDParent
     start with ID = '000'; 
```

但是，它太长了，需要优化。如何？

```
 CREATE TABLE "EMPLOYEE" 
       (    "ID" NUMBER(5,0), 
        "EMP_ID" VARCHAR2(5) NOT NULL ENABLE, 
        "PASSWORD" VARCHAR2(8) DEFAULT 1, 
        "EMP_NAME" VARCHAR2(30), 
        "DEP_ID" VARCHAR2(5), 
        "LEV" CHAR(1), 
        "SEX" CHAR(1), 
        "CATEGORY" VARCHAR2(20), 
        "EDU" VARCHAR2(8), 
        "BIRTHDAY" DATE, 
        "GN" DATE, 
        "RJ" DATE, 
        "PID" VARCHAR2(18), 
        "LTY" CHAR(1), 
        "GWMC" VARCHAR2(40), 
        "ZJ" VARCHAR2(20), 
        "JSZW" VARCHAR2(20), 
        "JSJB" VARCHAR2(20), 
        "GWGZ" NUMBER(6,2), 
        "MEMO" VARCHAR2(40), 
        "MODILEV" NUMBER(*,0) DEFAULT 0, 
        "STATION" NUMBER(5,0), 
         CONSTRAINT "PK_EMPLOYEE" PRIMARY KEY ("ID")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE, 
         CONSTRAINT "UK_EMPLOYEE" UNIQUE ("EMP_ID")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE
       ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
      STORAGE(INITIAL 196608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP" ;

      CREATE UNIQUE INDEX "PK_EMPLOYEE" ON "EMPLOYEE" ("ID") 
      PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX" ;

      CREATE UNIQUE INDEX "UK_EMPLOYEE" ON "EMPLOYEE" ("EMP_ID") 
      PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX" ;

      ALTER TABLE "EMPLOYEE" ADD CONSTRAINT "PK_EMPLOYEE" PRIMARY KEY ("ID")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE;

      ALTER TABLE "EMPLOYEE" MODIFY ("EMP_ID" NOT NULL ENABLE);

      ALTER TABLE "EMPLOYEE" ADD CONSTRAINT "UK_EMPLOYEE" UNIQUE ("EMP_ID")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE;

      CREATE TABLE "SALARY" 
       (    "EMP_ID" VARCHAR2(5), 
        "ATT_MONTH" DATE, 
        "JXGZ" NUMBER(8,2), 
        "YCXJJ" NUMBER(8,2), 
        "BZZJT" NUMBER(8,2), 
        "YBJT" NUMBER(8,2), 
        "WQJT" NUMBER(8,2), 
        "JBGZ" NUMBER(8,2), 
        "QTJ" NUMBER(8,2), 
        "BF" NUMBER(8,2), 
        "GSKH" NUMBER(8,2), 
        "BMKH" NUMBER(8,2), 
        "TOTAL" NUMBER(8,2), 
        "MEMO" VARCHAR2(80), 
        "CHECKLOCK" VARCHAR2(1) DEFAULT '2', 
        "MODILOCK" NUMBER(*,0) DEFAULT 1, 
        "MODITIME" DATE, 
        "SGSFF" VARCHAR2(1) DEFAULT 0, 
        "CT" NUMBER(8,2), 
        "RCJB" NUMBER(8,2), 
        "XJFF" NUMBER(8,2), 
        "STATION" NUMBER(11,0), 
        "DEP_ID" VARCHAR2(5), 
        "ID" NUMBER(11,0), 
         CONSTRAINT "PK_SALARY" PRIMARY KEY ("EMP_ID", "ATT_MONTH")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 196608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE
       ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
      STORAGE(INITIAL 327680 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP" ;

      CREATE UNIQUE INDEX "PK_SALARY" ON "SALARY" ("EMP_ID", "ATT_MONTH") 
      PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 196608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX" ;

      ALTER TABLE "SALARY" ADD CONSTRAINT "PK_SALARY" PRIMARY KEY ("EMP_ID", "ATT_MONTH")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 196608 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE;

      CREATE TABLE "organization" 
       (    "IDParent" VARCHAR2(5) NOT NULL ENABLE, 
        "ID" VARCHAR2(5) NOT NULL ENABLE, 
        "ZJMC" VARCHAR2(60), 
        "ZJJS" VARCHAR2(50), 
         CONSTRAINT "PK_organization" PRIMARY KEY ("ID")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE
       ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP" ;

      CREATE UNIQUE INDEX "PK_organization" ON "organization" ("ID") 
      PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX" ;

      ALTER TABLE "organization" ADD CONSTRAINT "PK_organization" PRIMARY KEY ("ID")
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
      STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
      TABLESPACE "JXKP_INDEX"  ENABLE;

      ALTER TABLE "organization" MODIFY ("IDParent" NOT NULL ENABLE);

      ALTER TABLE "organization" MODIFY ("ID" NOT NULL ENABLE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:14:20.643

我试图简化您的查询，请看一下：

```
SELECT 
    yy.IDParent, 
    xx.ROOT_ID, 
    yy.name, 
    SUM(xx.heji) total
FROM (
    SELECT 
        CONNECT_BY_ROOT(t.ID) ROOT_ID,
        t.heji
    FROM    (
                SELECT 
                    dept.ID,
                    dept.IDParent,
                    dept.name,
                    NVL(bb.HJ, 0) as heji
                FROM organization dept LEFT OUTER JOIN
                         (SELECT 
                                att_month,
                                b.dep_id,
                                SUM(total) as HJ
                          FROM 
                                salary a INNER JOIN employee b ON b.emp_id = a.emp_id
                          WHERE 
                                TO_CHAR(att_month, 'yyyy-mm') = '2012-05'
                          GROUP BY 
                                att_month, 
                                b.dep_id
                         ) bb ON dept.ID = bb.dep_id
            ) t
     CONNECT BY PRIOR t.ID = t.IDParent
    ) xx INNER JOIN organization yy ON xx.ROOT_ID = yy.ID
GROUP BY 
    yy.IDParent, 
    xx.ROOT_ID, 
    yy.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:53:34.720

*   在组织上添加索引：（IDParent），使用计算统计
*   添加基于函数的工资索引：TO_CHAR(att_month, 'yyyy-mm')

同样，由于您正在广泛解析一堆表，所以不要忘记检查您的全局统计信息是从何时生成的。如果您决定再次生成它们，则无需在创建密钥时使用 COMPUTE STATISTICS。

rgds。

# google-app-engine - google-app-engine eclipse policyutil.getKeyStore 非法arguementexception 无法启动调试环境

> ID：10890708
> 
> 赞同：0
> 
> 时间：2012-06-05T02:11:35.123
> 
> 标签：google-app-engine, eclipse-plugin

我似乎再也无法在 Eclipse 上启动我的 gae 开发环境了。一旦我启动它，它就会进入调试视图，其中找不到具有非法参数异常的 PolicyUtil.getKeyStore 的源。有没有其他人有这个问题？我试过删除我的运行配置，但没有运气。

任何帮助深表感谢。这是堆栈跟踪：

```
{Daemon Thread [Thread-1] (Suspended (exception IllegalArgumentException))  
    PolicyUtil.getKeyStore(URL, String, String, String, String, Debug) line: 65 
    PolicyFile.init(URL, PolicyFile$PolicyInfo) line: 635   
    PolicyFile.access$400(PolicyFile, URL, PolicyFile$PolicyInfo) line: 266 
    PolicyFile$3.run() line: 546    
    AccessController.doPrivileged(PrivilegedAction<T>) line: not available [native method]  
    PolicyFile.initPolicyFile(String, String, PolicyFile$PolicyInfo) line: 519  
    PolicyFile.initPolicyFile(PolicyFile$PolicyInfo, URL) line: 505 
    PolicyFile.init(URL) line: 464  
    PolicyFile.<init>() line: 309   
    NativeConstructorAccessorImpl.newInstance0(Constructor, Object[]) line: not available [native method]   
    NativeConstructorAccessorImpl.newInstance(Object[]) line: 39    
    DelegatingConstructorAccessorImpl.newInstance(Object[]) line: 27    
    Constructor<T>.newInstance(Object...) line: 513 
    Class<T>.newInstance0() line: 355   
    Class<T>.newInstance() line: 308    
    Policy.getPolicyNoCheck() line: 167 
    ProtectionDomain.implies(Permission) line: 224  
    AccessControlContext.checkPermission(Permission) line: 352  
    AccessController.checkPermission(Permission) line: 546  
    SecurityManager.checkPermission(Permission) line: 532   
    Policy.getPolicy() line: 133    
    SecurityManagerInstaller.install(URL...) line: 81   
    DevAppServerFactory.createDevAppServer(File, File, File, String, int, boolean, boolean, Map<String,Object>) line: 136   
    DevAppServerFactory.createDevAppServer(File, File, File, String, int, boolean) line: 78 
    DevAppServerFactory.createDevAppServer(File, String, int) line: 52  
    DevAppServerMain$StartAction.apply() line: 175  
    Parser$ParseResult.applyArgs() line: 48 
    DevAppServerMain.<init>(String[]) line: 128 
    DevAppServerMain.main(String[]) line: 104} 
```

我继续下载了最新的 GAE 和 eclipse 插件，希望能修复它，但没有运气。

问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:07:32.963

已修复 - 我的工作区已损坏。我创建了一个新的工作区文件夹，并且必须导入我的项目和设置。

# regex - 正则表达式匹配一些字符串

> ID：10890718
> 
> 赞同：-2
> 
> 时间：2012-06-05T02:12:42.213
> 
> 标签：regex, splunk

我正在做一个需要匹配输出中的某些字符串的项目..

这里是样本：

```
user code   timestamp                   Action Name                 S#TPLC Field Name  User code group profile              
SNGLASK     2012-05-30-20.33.53.003000  Insert User                 I                  TEST5       DISPLAY
SNGLASK     2012-05-23-22.06.44.422000  Change Password RSO part    U     LERAPR      SNGCHIS     FULL_AUTH
SNGLASK     2012-05-30-20.34.39.066000  Insert User Group Profil    I                             *NONE 
```

基本上我有一个应用程序需要了解空格后的每一行都属于下一列。然后，在动作名称之后，一切都可以视为其他。因此，我提出了如下的正则表达式格式：

```
REGEX = ^([^\s]+)\s+([^\s]+)\s+([^\s]+)s(.*)$
FORMAT = userCode::"$1" TimeStamp::"$2" ActionName::"$3" Others::"$4" 
```

策略是识别字符串然后忽略之后的空格。但是，这件事在动作名称之前有效，因为它们可能是动作名称之间的空格。因此，我的问题是，如何使用正则表达式让它识别操作名称中的字符串，就像我需要“插入用户”作为输入和“更改密码 RSO 部分”作为另一个输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:21:19.590

做这样的多部分词：

```
((\S+\s)+) 
```

它说一个或多个单词，用一个空格分隔。所以正则表达式应该是：

```
^((\S+\s)+)\s+(\S+)\s+((\S+\s)+)\s+(.*)$ 
```

# mysql - 格式化 MySQL 查询结果

> ID：10890719
> 
> 赞同：0
> 
> 时间：2012-06-05T02:12:56.393
> 
> 标签：mysql

我目前有一张桌子如下，

```
Column      Type
time        datetime             
ticket      int(20)              
agentid     int(20)              
ExitStatus  varchar(50)      
Queue       varchar(50) 
```

我想编写一个查询，它将按周分解，为每个 ExitStatus 提供一个计数列。到目前为止，我有这个，

```
SELECT ExitStatus,COUNT(ExitStatus) AS ExitStatusCount, DAY(time) AS TimePeriod 
FROM `table` 
GROUP BY TimePeriod, ExitStatus 
```

输出：

```
ExitStatus ExitStatusCount TimePeriod
NoAgentID                1          4 
Success                  3          4
NoAgentID                1          5
Success                  5          5 
```

我想更改它，以便它以这种格式返回结果：

```
week | COUNT(NoAgentID) | COUNT(Success) | 
```

理想情况下，我希望列是动态的，因为其他 ExitStatus 值可能是可能的。

此信息将被格式化并在页面上的表格中呈现给最终用户。这可以用 SQL 完成还是应该用 PHP 重新格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:24:16.237

这是一种方式；您可以使用`SUM()`来计算特定条件为真的项目数。最后，您只需按正常时间分组。

```
SELECT DAY(time) AS TimePeriod, 
  SUM('NoAgentID' = exitStatus) AS NoAgentID, 
  SUM('Success' = exitStatus) AS Success, ...
FROM `table` 
GROUP BY TimePeriod 
```

输出：

```
4 1 3
5 1 5 
```

不过，这里的列不是动态的，这意味着您必须在进行时添加条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:24:48.817

```
SELECT week(time) AS week,
        SUM(ExitStatus = 'NoAgentID') AS 'COUNT(NoAgentID)',
        SUM(ExitStatus = 'Success') AS 'COUNT(Success)'
FROM `table`
GROUP BY week 
```

我正在猜测 ExitStatus 列的工作原理。此外，还有许多解释“周”的方法，例如一年中的一周、一个月或季度……您需要将适当的函数放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:31:13.847

没有可以通过单个查询来解决您的问题（称为**交叉制表）的“通用”解决方案。**有四种可能的解决方案：

*   在您的查询中硬编码所有可能`ExitStatus`的 'es，并在您看到对它们越来越多的需求时保持更新。例如：

```
选择
    日（时间）AS TimePeriod，
    SUM(IF(ExitStatus = 'NoAgentID', 1, 0)) 作为 NoAgentID,
    SUM(IF(ExitStatus = 'Success', 1, 0)) 作为成功
    -- #TODO：在需要时/如果需要在此处添加其他人
从表
在哪里 ...
按时间段分组

```

*   执行第一个查询以获取所有可能`ExitStatus`的 'es，然后根据这些结果从您的高级编程语言创建最终查询。

*   在您的高级编程语言上使用特殊模块进行交叉制表。对于 Perl，您有[SQLCrossTab 模块](http://search.cpan.org/~gmax/DBIx-SQLCrosstab-1.17/SQLCrosstab.pm)，但我找不到用于 PHP的模块

*   [通过使用像Pentaho](http://mondrian.pentaho.com/)这样的 OLAP（数据的多维视图）向您的应用程序添加另一层，然后查询该层而不是原始数据

[您可以阅读有关这些解决方案的更多信息以及对该主题的整体讨论](http://onlamp.com/pub/a/onlamp/2003/12/04/crosstabs.html)

# cocoa-touch - 将文本阴影放在 UIButton 文本标签上

> ID：10890723
> 
> 赞同：2
> 
> 时间：2012-06-05T02:13:30.250
> 
> 标签：cocoa-touch, uibutton

我有一个`UIButton`我在上面放一个文本标签的。我想更改文本的颜色，并在距离文本 1 像素处放置一个阴影，以提供漂亮的 3D 视图。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T02:15:52.000

> 我想改变文字的颜色...

[`-[UILabel setTextColor:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/doc/uid/TP40006797-CH3-SW14)

> ...并且还放了一些阴影...

[`-[UILabel setShadowColor:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/doc/uid/TP40006797-CH3-SW1)

> ... 距离文字 1 像素

[`-[UILabel setShadowOffset:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/doc/uid/TP40006797-CH3-SW2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:18:42.110

您可以在 IB 中使用属性检查器中的文本颜色、阴影颜色和阴影偏移控件来执行此操作。

# javascript - 通过替换替代文本来调整点击插入

> ID：10890727
> 
> 赞同：0
> 
> 时间：2012-06-05T02:14:16.230
> 
> 标签：javascript, html, click

我正在尝试修改此脚本：[jQuery 示例：使用拖放插入文本](http://skfox.com/2008/11/26/jquery-example-inserting-text-with-drag-n-drop/)。

我的目标是让我的用户单击图像缩略图并将适当的降价图像代码插入到文本区域中。

我不熟悉 JS，所以我知道脚本的核心在这里发生：

```
$('#ClickWordList li').click(function() {
    $("#txtMessage").insertAtCaret($(this).text());
        return false
    }); 
```

具体来说，`.text()`那里的位，但不知道如何更改输出以适应我对插入降价片段的需要，而不仅仅是列表文本。

Markdown 内联图像语法如下所示：`![Alt text](/path/to/img.jpg)`

我尝试将列表更改为带有图像的 div，然后更改为`.insertAtCaret($(this).src);`但我得到“未定义”作为插入文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:24:32.000

`$(this).src`是未定义的，因为`$(this)`是 a `jQuery object`，并且 jQuery 对象没有`src`属性。假设您的选择器中有一个图像元素，您可以尝试：

```
$("#txtMessage").insertAtCaret($(this).attr('src')); 
```

[`.attr()`](http://api.jquery.com/attr/)jQuery 方法，当只给定一个参数时，将返回匹配元素的给定属性值。

**或者**

```
$("#txtMessage").insertAtCaret($(this)[0].src); 
```

获取文字 DOM 元素的`src`.

*额外说明（如果需要）*
jQuery 方法 在[`.text()`](http://api.jquery.com/text/)不给定参数时，将返回由 引用的元素内的所有文本`this`，即事件的目标，在本例中为元素`li`内的单击。`#ClickWordList`

`.insertAtCaret()`是`drag 'n drop`插件提供的 jQuery 对象的扩展函数。

`return false`将完全按照它说的做，返回所选元素`false`的`click`事件处理程序，这只是取消事件并防止其传播进一步冒泡 DOM。

抱歉，如果有任何错别字。

# c++ - 如何将字节顺序转换为位数组

> ID：10890730
> 
> 赞同：0
> 
> 时间：2012-06-05T02:14:39.220
> 
> 标签：c++, endianness

我正在寻找将值从小端转换为大端（反之亦然）。我将值表示为位数组，而不是单个整数。如何实现字节顺序交换功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:32:46.563

我不是一个真正的 C++ 人，所以我只是一般地这样做。

从大端转换为小端就是反转字节。即一个8位的段。

因此，如果您有一个`N`字节数组（此处为伪编码）：

```
bool bits[8*N]; 
```

你会做这样的事情：

```
for(int i = 0; i < N/2; i++) {
    for(int j = 0; j < 8; j++) {
        bool tmp = bits[8*i+j];
        bits[8*i+j] = bits[8*(N-i-1)+j];
        bits[8*(N-i-1)+j] = tmp;
    }
} 
```

在评论中，您提到“位”实际上是指向表达式的指针，这些表达式稍后会被评估为正确的位。以这种方式更改指针的顺序将在您稍后获得位时产生正确的字节序变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:24:07.140

您可以查看这篇优秀的[文章](http://www.gamedev.net/page/resources/_/technical/game-programming/writing-endian-independent-code-in-c-r2091)，其中解释了如何交换和处理不同字节序的数据。此外，[endian.h](http://linux.die.net/man/3/endian)函数集可能对您有所帮助。

# android - 在 Android 的活动中交换 UI 元素的标准方式是什么？

> ID：10890732
> 
> 赞同：0
> 
> 时间：2012-06-05T02:15:05.333
> 
> 标签：android

我有一个有几个视图的活动。大多数视图将保持不变，但有一个区域根据用户的操作具有不同的视图。换句话说，我们可能从 3 个按钮开始，然后在单击一个按钮时切换到倒计时。我认为创建不同的活动没有意义，因为大部分 UI（和逻辑）都是共享的。

Android中的标准方法是什么？我对这个平台真的很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:22:51.973

如果只有一小部分布局被交换，基本上我会使用 View.Visibility。如果设置为 GONE，则视图将不可见并且不占用任何空间。切换按钮单击事件的可见性可以解决问题。

[http://developer.android.com/reference/android/view/View.html#attr_android:visibility](http://developer.android.com/reference/android/view/View.html#attr_android:visibility)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:57:21.653

使用 ViewFlipper 或 ViewSwitcher 这些是在 Android 中切换 UI 元素的最佳方法。你可以放动画来动画你的 UI 切换。

像这样的用户：

```
 // the viewflipper
    private ViewFlipper flipview;

    // set the flipper
    flipview = (ViewFlipper) findViewById(R.id.flipview);

  //To show next UI element just do like this
    flipview.ShowNext(); 
```

# php - 如何检测服务器/脚本是否通过 cURL/file_get_contents() 访问他们的站点？（不包括用户代理和 IP 地址）

> ID：10890733
> 
> 赞同：0
> 
> 时间：2012-06-05T02:15:06.683
> 
> 标签：php, curl, file-get-contents

我遇到了一个问题，用户在通过脚本访问图像时遇到困难（使用`cURL`/ `file_get_contents()`）：

[如何使用 PHP 从 url 保存图像？](https://stackoverflow.com/questions/10890392/how-to-save-an-image-from-url-using-php)

`file_get_contents()`图片链接在使用请求时似乎返回 403 错误。但是在 cURL 中，返回了更详细的错误：

> 您被拒绝访问系统。如果您真的想访问，请关闭引擎或 Surf Proxy，假 IP。代理或不接受任何 Web 工具入侵防御系统。
> 
> 平明在线数据服务@ 2008 - 2012

在自己摆弄一个 cURL 请求后，我也无法访问相同的图像。我尝试将用户代理更改为可以成功访问图像的确切浏览器用户代理。我还在我的个人本地服务器上尝试了该脚本，该服务器（显然）使用与我的浏览器相同的 IP 地址......据我所知，用户代理和 IP 地址不在这种情况下。

别人怎么能检测到执行请求的脚本？

顺便说一句，这不是为了任何疯狂的事情。我只是好奇xD

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T03:56:58.050

它确实是由 JavaScript 设置的 cookie，然后重定向到原始图像。问题是 curl/fgc 不会解析 html 并将 cookie 设置为由 curl 将存储在其 cookie jar 中的服务器设置的唯一 cookie。

这是您在重定向之前获得的代码，它通过 JavaScript 制作一个没有名称但 location.href 作为值的 cookie：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HEAD>
<TITLE>http://phim.xixam.com/thumb/giotdang.jpeg</TITLE>
<meta http-equiv="Refresh" content="0;url=http://phim.xixam.com/thumb/giotdang.jpeg">
</HEAD>
<script type="text/javascript">
window.onload = function checknow() {
var today = new Date();
var expires = 3600000*1*1;
var expires_date = new Date(today.getTime() + (expires));
var ua = navigator.userAgent.toLowerCase();
if ( ua.indexOf( "safari" ) != -1 ) { document.cookie = "location.href"; } else { document.cookie = "location.href;expires=" + expires_date.toGMTString(); }
}
</script>
<BODY>
</BODY></HTML> 
```

但一切都不会丢失，因为通过预先设置/伪造 cookie，您可以规避此安全措施（使用 cookie 进行任何类型的安全性都是不好的原因）。

**cookie.txt**

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

phim.xixam.com  FALSE   /thumb/ FALSE   1338867990      location.href 
```

所以完成的 curl 脚本看起来像：

```
<?php
function curl_get($url){
    $return = '';
    (function_exists('curl_init')) ? '' : die('cURL Must be installed!');

    //Forge the cookie
    $expire = time()+3600000*1*1;
    $cookie =<<<COOKIE
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

phim.xixam.com  FALSE   /thumb/ FALSE   $expire     location.href

COOKIE;
    file_put_contents(dirname(__FILE__).'/cookie.txt',$cookie);

    //Browser Masquerade cURL request
    $curl = curl_init();
    $header[0] = "Accept: text/xml,application/xml,application/json,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";
    $header[] = "Pragma: ";

    curl_setopt($curl, CURLOPT_COOKIEJAR, dirname(__FILE__).'/cookie.txt');
    curl_setopt($curl, CURLOPT_COOKIEFILE, dirname(__FILE__).'/cookie.txt');
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0 Firefox/5.0');
    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
    curl_setopt($curl, CURLOPT_HEADER, 0);
    //Pass the referer check
    curl_setopt($curl, CURLOPT_REFERER, 'http://xixam.com/forum.php');
    curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
    curl_setopt($curl, CURLOPT_AUTOREFERER, true);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($curl, CURLOPT_TIMEOUT, 30);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);

    $html = curl_exec($curl);
    curl_close($curl);
    return $html;
}

$image = curl_get('http://phim.xixam.com/thumb/giotdang.jpeg');

file_put_contents('test.jpg',$image);
?> 
```

阻止爬虫的唯一方法是将所有访问者的 ips 记录在数据库中，并根据每个 ip 的访问量增加一个值，然后每周一次左右查看 ip 的热门点击，然后反向查找 ip 和看看它是否来自托管服务提供商，如果在你的防火墙或 htaccess 中阻止它，那么你不能真正停止对资源的请求，如果它是公开可用的，因为任何障碍都可以克服。

希望能帮助到你。

# android - 将 SVG 用于 Android 游戏的优缺点

> ID：10890734
> 
> 赞同：7
> 
> 时间：2012-06-05T02:15:11.653
> 
> 标签：android, svg, game-physics

我打算在 Android 中开始游戏，但我不确定是否应该使用 SVG 或 PNG 来制作图形。***我知道 SVG 的优势在于它的可扩展性***，如果我错了，请纠正我。但除此之外呢？还有其他人吗？关于性能，或速度等。

顺便说一句，游戏可能会涉及物理计算，而且画面真的会更新很多。那会是个问题吗？

我将为此使用 Java，而不是 HTML5。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T18:00:56.457

是的，我认为使用隐式可扩展资源（如[SVG](http://www.webopedia.com/TERM/S/SVG.html)和基于矢量的字体）在具有如此多样化显示的 Android 上会很有意义。但情况似乎并非如此。

在实践中，所有 Android 工具和示例都使用缩放位图，而不是像 SVG 这样的原生可缩放抽象。android 基础架构支持计算显示器的密度和大小，并使用它来查找适合设备大小的位图（请参阅[处理屏幕大小](http://developer.android.com/guide/practices/screens_support.html)）。大多数其他游戏库（如 libGDX）都类似地以位图为导向。

（可能其中一个重要原因是底层硬件也针对复制位图进行了优化。）

我建议坚持使用其他人都在使用的技术，并且工具和教程都围绕着它，除非你明确地有兴趣探索一些新的领域。即便如此，在实际评估任何新方法时，可能仍需要对其“正常”完成方式有很强的背景。

最近这个问题的一些答案可能对您有用： [https ://gamedev.stackexchange.com/questions/30111/why-dont-more-games-use-vector-art](https://gamedev.stackexchange.com/questions/30111/why-dont-more-games-use-vector-art)

# php - 将此时间戳插入 MySQL 时间戳列

> ID：10890736
> 
> 赞同：0
> 
> 时间：2012-06-05T02:15:45.607
> 
> 标签：php, mysql, codeigniter

我有一系列数据需要使用 PHP（Codeigniter）插入到 MySQL 表中。

**问题：**其中一个数据是一个时间戳，看起来像`06/01/12 01:43 PM`. 但是，当我将其插入 MySQL 时间戳列时，它变为`0000-00-00 00:00:00`. 如何格式化原始格式，以便将其正确插入时间戳列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:28:35.223

如果您想通过 PHP 执行转换，这非常简单：

```
$oldFormat = "06/01/12 01:43 PM";
$newFormat = date("Y-m-d H:i:s", strtotime($oldFormat)); 
```

[strtotime 文档](http://php.net/manual/en/function.strtotime.php)

[日期文档](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:19:30.813

您可以使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)功能：

```
INSERT INTO my_table VALUES (STR_TO_DATE('06/01/12 01:43 PM', '%m/%d/%y %r')) 
```

# hadoop - Hadoop Oozie 喜欢的项目

> ID：10890738
> 
> 赞同：0
> 
> 时间：2012-06-05T02:16:00.067
> 
> 标签：hadoop, workflow, oozie-coordinator

Oozie 是一个工作流/协调引擎，用于编排 Hadoop 作业，其中 Oozie 工作流作业是动作的有向无环图 (DAG)。

还有哪些其他类似 Oozile 的工作流引擎来管理集群上的作业链？

是否有一个通用的 Oozile 之类的工作流引擎，它能够通过插件或其他东西编排任何集群的作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:51:54.587

虽然我个人更喜欢 oozie，但您也可以[查看 azkaban](http://sna-projects.com/azkaban/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-18T09:22:07.023

Hortonworks 的 NIFI 是一个很棒的工作流引擎，可以满足您的要求。

# iphone - D3.js 来管理 Webkit translate3d：这可能吗？

> ID：10890743
> 
> 赞同：2
> 
> 时间：2012-06-05T02:16:48.647
> 
> 标签：iphone, mobile, webkit, d3.js

有谁知道如何使用 CSS3 Webkit translate3d 而不是普通的左 css 和 d3.js。在 iPhone translate3d 上运行得更快，我需要在发布 HTML 元素后的转换中执行此操作。

这是我的左侧 css 代码：

```
d3.select("#myHTMLElem").transition()
    .style("left", myNewPosX) + "px")
    .duration(500)
    .ease("cubic-in-out")
    .each("end", function(d) {
        // Do something after
}); 
```

JQuery 有一些东西，但我更愿意在这个项目中继续使用 d3.js。知道如何使用 translate3d 而不是 left 属性来制作前面的代码吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:58:03.087

我就是这样做的。对于平滑/功能转换，请确保在元素上执行转换之前将默认值应用于样式属性。

**默认样式（过渡前）：**

```
var svg = d3.select("div#wrapper").append("svg").append("g").attr("id", "usg").attr("style", function () {
    return "-webkit-transform: perspective(800) scale(1) scale3d(1, 1, 1) rotate3d(1, 0, 0, 0deg) translate3d(0, 0, 0);";
}); 
```

**过渡样式（转换默认值）：**

```
d3.select("#usg").transition().duration(2000).attr("style", function () {
    return "-webkit-transform: perspective(800) scale(1) scale3d(1, 1, 2) rotate3d(1, 0, 0, 55deg) translate3d(0px, 198px, 0px);";
}); 
```

# objective-c - 从目标 c 中的另一个视图控制器调用方法

> ID：10890747
> 
> 赞同：0
> 
> 时间：2012-06-05T02:17:18.000
> 
> 标签：objective-c

我有一个扩展 UIViewController 的控制器（名称：Parent.m），我向其中添加了另一个视图（控制器（名称：Child.m）），其中包含一个表视图。

单击 Child.m 表上的一行时，我想调用 Parent.m 类中的方法。我不想创建 Parent.m 的新实例。

有人可以解释我如何做到这一点。我需要在两者之间定义一个协议吗？如果是这样，有人可以解释我怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:26:51.757

如果您使用的是 UINavigationController，则可以通过在子视图控制器中执行类似操作来获得父视图控制器。

```
ParentViewcontroller * parentView = (ParentViewcontroller *)[self.navigationController.viewControllers lastObject]; 
```

如果您不使用 UINavigationController，则可以使用通知（可能有点矫枉过正）。或从父级到子级的键值观察（即根据子视图控制器中的更改更改某些内容的显示或值）。

或者，这里最直接的做法可能是将父级设置为子级的委托目标。

1)

在您的 ChildViewcontroller.h 文件中，创建一个如下所示的协议：

```
@protocol ChildViewDelegate

- (void) doSomethingWith: (NSString *) thisString;

@end 
```

2)

在您的 ChildViewcontroller 中创建一个委托属性（您将其设置为父视图）。

3)

在您的 ParentViewcontroller.h 文件中，在@interface 声明`<ChildViewDelegate>`之后添加“” ...即`UIViewController`

```
@interface ParentViewController : UIViewController <ChildViewDelegate> 
```

4)

实现“ `doSomethingWith:`”方法。

5)

当您从父级实例化/创建子 Viewcontroller 时，不要忘记将委托设置为父级。

6)

最后，当您想从孩子向父母发送消息时，它可能很简单：

```
[delegate doSomewthingWith: thisString]; 
```

# email - AppleScript 和 Mail.app：检查新消息是否包含字符串

> ID：10890749
> 
> 赞同：4
> 
> 时间：2012-06-05T02:17:36.287
> 
> 标签：email, applescript

我正在编写一个脚本来检查是否已提交特定的 Web 表单。

到目前为止的脚本是这样写的：

```
tell application "Mail"
check for new mail
set newmail to get the unread count of inbox
repeat with msg in newmail
    if msg's subject contains "New newsletter built by" then
        return msg's subject
    end if
end repeat
end tell 
```

我的收件箱中有一封未读的电子邮件供脚本使用，但我仍然收到错误消息：

```
error "Mail got an error: Can’t make 1 into type specifier." number -1700 from 1 to specifier 
```

任何帮助都将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:05:41.507

```
tell application "Mail"
    check for new mail
    repeat until (background activity count) = 0
        delay 0.5 --wait until all new messages are in the box
    end repeat
    try
        return subject of (first message of inbox whose read status is false and subject contains "New newsletter built by ")
    end try
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:49:21.767

Applescript 有点棘手。看起来您正在尝试解析收件箱的*计数*，而不是实际的收件箱。

试试这个脚本：

```
tell application "Mail"
    check for new mail
    -- instead of getting the unread count of inbox
    -- let's set an Applescript variable to every message of the inbox
    set myInbox to every message of inbox
    repeat with msg in myInbox
        -- and look at only the ones that are unread
        if read status of msg is false then
            -- and if the subject of the unread message is what we want 
            if msg's subject contains "New newsletter built by" then
                -- return it
                return msg's subject
            end if
        end if
    end repeat
end tell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T00:16:46.260

我实际上已经解决了这个问题，所以如果其他人需要帮助，我会在这里发布。核实：

```
tell application "Mail"
check for new mail

set checker to (messages of inbox whose read status is false)
set neworder to number of items in checker

if neworder > 0 then
    repeat with i from 1 to number of items in checker
        set msg to item i of checker
        if msg's subject contains "New newsletter built by " then
            return msg's subject
        end if
    end repeat
end if
end tell 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T23:01:36.913

加上jackjr300所说的......

```
tell application "Mail"
    set x to unread count of inbox
    check for new mail
    delay 3
    set y to unread count of inbox
    set z to y - x
end tell

if x = y then
    say "There is nothing to report"
end if

if z = 1 then
    say "You have one new message"
end if

if z = 2 then
    say "You have two new messages"
end if

if z = 3 then
    say "You have three new messages"
end if
if z = 4 then
    say "You have four new messages"
end if
if z = 5 then
    say "You have five new messages"
end if
if z = 6 then
    say "You have six new messages"
end if
if z = 7 then
    say "You have seven new messages"
end if
if z = 8 then
    say "You have eight new messages"
end if

if z = 9 then
    say "You have nine new messages"
end if
if z = 10 then
    say "You have ten new messages"
else
    say "You have more than ten new messages"
end if 
```

# delphi - CancelEdit 是否适用于 Delphi 的 TListView 中的 TListItem？

> ID：10890753
> 
> 赞同：1
> 
> 时间：2012-06-05T02:18:24.607
> 
> 标签：delphi, listview

如果我尝试

```
ListView1.items[0].EditCaption; 
```

它按预期工作，允许我编辑第一个项目标题，但是如果在编辑时我尝试

```
ListView1.items[0].CancelEdit; 
```

它不会取消编辑。是否有一些我遗漏的概念，是错误还是帮助错误？

这似乎是 Delphi 2007 和 XE2（可能还有其他）的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:10:24.060

我认为这是本机控件的问题，VCL 按照[文档说明](http://msdn.microsoft.com/en-us/library/bb761238%28v=vs.85%29.aspx)（调用`ListView_EditLabel(Handle, -1);`），但没有效果。根据 的[文档](http://msdn.microsoft.com/en-us/library/bb761260%28v=vs.85%29.aspx)，`ListView_GetEditControl`发送列表视图 a`WM_CANCELMODE`也应该有效，但事实并非如此。

此处的测试显示了以下工作，

```
winapi.windows.SetFocus(ListView1.Handle); 
```

有趣`ListView1.SetFocus`的是没有。

# css - CSS将所有div条浮动到底部

> ID：10890758
> 
> 赞同：0
> 
> 时间：2012-06-05T02:18:44.853
> 
> 标签：css

我有 10 组 DIV 嵌套在父 DIV 中：

```
<div id="bar_block">
    <div class="bar bar1"></div>
    <div class="bar bar2"></div>
    <div class="bar bar3"></div>
    <div class="bar bar4"></div>
    <div class="bar bar5"></div>
    <div class="bar bar6"></div>
    <div class="bar bar7"></div>
    <div class="bar bar8"></div>
    <div class="bar bar9"></div>
    <div class="bar bar10"></div>
</div> 
```

到目前为止，我已经使用了这个 CSS：

```
#bar_block {
    width:350px;
    height:75px;
}

.bar {
    border:1px solid #000;
    width:8%;
    float:left;
    margin-right:5px;
}

.bar1 {
    height:10%;
}

.bar2 {
    height:20%;
}

.bar3 {
    height:30%;
}

.bar4 {
    height:40%;
}

.bar5 {
    height:50%;
}

.bar6 {
    height:60%;
}

.bar7 {
    height:70%;
}

.bar8 {
    height:80%;
}

.bar9 {
    height:90%;
}

.bar10 {
    height:100%;
    margin:0;
} 
```

我希望所有的酒吧都漂浮在左下方。绝对位置对我不起作用，因为所有的酒吧都会挤在一起。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:15:32.760

尝试将容器和 div 的 CSS 更改为：

```
#bar_block {
    width:360px;
    height:75px;
    position:relative;
}

.bar {
    border:1px solid #000;
    width:24px;
    bottom:0;
    display:inline-block;
    margin-right:2px;
} 
```

结合底部和像素宽度的内联块应该做到这一点。

**[jsFiddle 示例](http://jsfiddle.net/JhzcW/1/)**。

# javascript - 在哪里可以找到类似于 Pinterest 的可滚动模态框的模态窗口/框？

> ID：10890762
> 
> 赞同：1
> 
> 时间：2012-06-05T02:19:30.697
> 
> 标签：javascript, jquery, modal-dialog, simplemodal, pinterest

我很难找到与 Pinterest 上的功能相似的模态框。

我目前正在使用简单模态（jQuery），但问题是高度不是动态的（放置`height: auto`有一些问题）并且模态框的位置固定在中心。因此，如果内容很长，它只会有一个自己的滚动条（在模式框内），而不是使用浏览器的主滚动条滚动。当我使用主浏览器的滚动条时，它正在滚动模式后面的内容（这是实际的网页），这不是我打算发生的。

你对使用什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:48:24.413

如果您右键单击一个对象并将其作为新选项卡/窗口打开，您将看到**Pinterest**覆盖在主页上。

也就是说，您可以通过扩展具有`iframe`半透明背景的完整视口来查看底层页面来实现相同的效果。

可以肯定的是，我没有遇到任何类似于 Pinterest 的自定义 jQuery 版本的灯箱[克隆，它隐藏在](http://planetozh.com/projects/lightbox-clones/)[**.js 文件**](http://jsfiddle.net/PWLvQ/)的某个位置。

* * *

**状态更新：**
如果您愿意创建自己的方法，我已经在我的 SO Answer 中概述了一个[**过程**](https://stackoverflow.com/a/11253923/1195891)

# asp.net - .NET Membership Profile 用户登录前后的一致性

> ID：10890764
> 
> 赞同：1
> 
> 时间：2012-06-05T02:19:54.753
> 
> 标签：asp.net, asp.net-mvc, profile, membership

当我在我的网络应用程序中启用个人资料时，我可以存储注册用户和匿名访问者的信息。

例如，假设我在 WhatColourDoYouLike.cshtml 或 WhatColourDoYouLike.aspx 有一个“你喜欢什么颜色”文本框，

1.  现在，在我登录之前，作为匿名访问者，我输入了“Hot Pink”，信息存储在 aspnet_Profile 表中，很酷。

2.  我以注册用户身份登录网站后，再次访问同一页面并输入“海洋蓝”。

3.  但是，当我现在注销并访问此页面以检查我的颜色偏好时，我没有“海洋蓝”。我回到“Hot Pink”。

猜猜看，当我深入研究 db aspnet_User 和 aspnet_Profile 表时，我发现自己有 2 组配置文件。注销时匿名我的一个个人资料=“Hot Pink”；我登录时注册我的第二个配置文件 =“海洋蓝”。

当我注册/注册/登录时，我总是有这样的印象，.NET 会知道他们是同一个人，并将匿名配置文件合并到注册用户配置文件中。然而，事实证明并非如此。难道我做错了什么？如何保持登录前后配置文件的一致性？

# windows-phone-7 - 在 WP7 XNA 中单击 SoundEffect 播放的开始和结束

> ID：10890768
> 
> 赞同：1
> 
> 时间：2012-06-05T02:20:42.920
> 
> 标签：windows-phone-7, audio, xna, soundeffect

我正在循环播放这个声音文件：[http](http://engy.us/misc/ThrusterLoop.wav) ://engy.us/misc/ThrusterLoop.wav 。它在 Windows 中可以在任意数量的播放器上完美播放，但是当我将它作为 SoundEffect 加载到 XNA 中时，它会在播放开始和结束时出现这些烦人的点击。

如果我将它循环一段时间，它不会在中间做任何这些烦人的点击。如果我将它作为独立声音播放，它仍然会在开始时单击。它在模拟器和我的物理设备上点击。

为什么要这样做？我的声音文件有问题吗？这是一个 16 位立体声 44.1 kHz PCM WAV 文件，我认为这是非常标准的。

(edit2) 我捕捉到通过 XNA 回放产生的声音，并将其与原始波形进行比较。看一看：

[http://engy.us/pics/Waveform_Original.png](http://engy.us/pics/Waveform_Original.png)
[http://engy.us/pics/Waveform_EmulatorXNA.png](http://engy.us/pics/Waveform_EmulatorXNA.png)

那个播放有点搞砸了！两个大幅度的变化一定是我听到的咔哒声。它似乎有点争先恐后。在开始时设置静音可能对某些人有所帮助，因为打乱的静音不会产生任何点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:38:15.460

使用[Audacity](http://audacity.sourceforge.net/)之类的程序来查看声音的波形。您可以通过正确排列波形来减少或消除“咔嗒声”，使其在 0db 标记（中心线）处开始和结束。在 Audacity 中，您可以分别在前面和后面使用 Fade In 和 Fade Out 来做到这一点，尽管这会导致您的声音音量“跳动”。要解决这个问题，请尽可能放大并仅在前后最小的可选区域上使用淡入/淡出。

需要注意的一件事是，当它循环时，您希望波浪继续……波浪。如，如果您的波形在声音的开头指向上方（它从 0db 开始向上），它应该在最后从下方上升到 0db，因此如果您要复制+粘贴声音正确在它本身之后，它形成了一个漂亮的波浪而不是一个高峰。

# css - 固定高度元素中的可选非滚动标题

> ID：10890773
> 
> 赞同：0
> 
> 时间：2012-06-05T02:21:34.573
> 
> 标签：css

我有一个固定大小的框，它设置为溢出时滚动。然而，有时它有一个标题，有时它没有；当标题出现时，我想不出一种方法来让它看起来很好看。我确切地知道它为什么会发生（标题将 100% 高度的滚动元素向下推出其容器），但我想不出一种非表格的方法来修复它。[这是显示问题的小提琴](http://jsfiddle.net/U8rPj/)；以及 SO 档案的完整代码：

HTML：

```
<div class="fixed-size">
  <ul class="scrollable">
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>four</li>
    <li>five</li>
    <li>six</li>
    <li>seven</li>
    <li>eight</li>
    <li>nine</li>
    <li>ten</li>
  </ul>
</div>

<div class="fixed-size">
  <div class="stays-at-top">
      Header
  </div>
  <ul class="scrollable">
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>four</li>
    <li>five</li>
    <li>six</li>
    <li>seven</li>
    <li>eight</li>
    <li>nine</li>
    <li>ten</li>
  </ul>
</div> 
```

CSS：

```
.fixed-size {
    height: 100px;
    width: 200px;
    display: inline-block;
    background-color: #fcc;
}

.scrollable {
    height: 100%;
    width: 100%;
    overflow-y: auto;
}

.stays-at-top {
    background-color: #f99;
}​ 
```

如果不清楚，我希望标题 ( `.stays-at-top`) 保持在顶部（即不要与他的朋友一起滚动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:45:37.697

[http://jsfiddle.net/EyPQW/6/](http://jsfiddle.net/EyPQW/6/)

```
.fixed-size {
    width: 200px;
    display: inline-block;
    background-color: #fcc;
}
.scrollable {
    height: 100px;  
    overflow: auto;    
}
.stays-at-top + .scrollable {
    margin-top: 17px;
    height: 83px;     
}
.stays-at-top {
    background-color: #f99;
    position: fixed;
    width: 200px;
}​ 
```

这应该满足全部要求。

`.fixed-size`指定 a `width`，但不指定 a `height`。

`.scrollable`指定 a`height`并`overflow: auto`允许其内容滚动。

`.stays-at-top + .scrollable``.stays-at-top`当我们有一个和一个`.scrollable`元素彼此紧邻时匹配，即当我们有一个固定的标题时。这里我们添加一个`margin-top`来使第一项可以清除固定表头，并将值重置为`height`中指定的值`.scrollable`减去该`margin-top`值。

`.stays-at-top`需要`position: fixed`和`width`匹配的`width`in `.fixed-size`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:29:29.010

只需将`scrollable`类移动到父级并删除`height:100%`, `width:100%`，然后将 更改`overflow-y:auto`为`overflow:auto`。

因此：http: [//jsfiddle.net/jglovier/U8rPj/4/](http://jsfiddle.net/jglovier/U8rPj/4/)

# mysql - MySQL 和 Hibernate 同时读写

> ID：10890774
> 
> 赞同：0
> 
> 时间：2012-06-05T02:21:34.643
> 
> 标签：mysql, performance, hibernate, transactions, load

我有一个包含以下部分的 Web 应用程序：

1.  评论员通过基于浏览器的工具不断地进行比赛评论。使用休眠将注释插入数据库。

2.  许多用户正在访问 URL 以阅读评论。Hibernate 正在从第 1 步中由评论员更新的表中读取数据。

3.  还有一些存储过程设置为每 1 小时运行一次。他们中很少有人访问同一个表（在步骤#1 和#2 中使用）用于读取和写入/更新目的。

现在我的问题是，每当网站有 100 多个并发用户观看特定比赛评论时，我的 MySQL 就会出现故障。它显示了许多卡在进程列表中的查询。其中许多处于*“复制到临时表”*状态。这使得 JBOSS 频繁重启。

我在休眠中使用事务来读取和写入目的。请帮忙，因为我因为这些崩溃而失去了重要的比赛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:12:44.697

你有一个性能问题。很难给出始终有效的解决方案。你可以考虑做的是：

1) 修改 HQL (Hibernate) 语句。为此，您可以`<property name="show_sql">true</property>`在配置文件中编写一个协议（如果您想查看实际参数，甚至可以使用 log4jdbc 之类的工具）并分析输出。在那里您可以看到您拥有最多的 SQL 请求。在许多情况下，读取和写入数据库数据的更好策略可以显着减少数据库流量。并检查您的表是否有良好的索引。

2）考虑使用二级缓存。（通常hibernate只使用一级缓存，这在你的情况下没有用，因为它绑定到一个会话。）那么至少读取实际评论的请求可以由缓存服务，不需要去数据库。（注意：缓存可能会干扰存储过程。看看你喜欢使用的缓存产品是否支持 MySQL 存储过程。最坏的情况你必须删除关键表的存储过程，让你的应用服务器做作业，因此它通过缓存。）

3）如果只有几个表被大量使用，您可以考虑由您的应用程序缓存它们。这是更多的工作，但也许您可以完全满足您的应用程序的需求，因此您可能比使用一般的二级缓存更快。

4）如果没有任何帮助并且流量真的太重，那么也许你必须投资更多的硬件。

祝你好运 ;-）

# jquery - 如何停止淡入淡出（）闪烁？

> ID：10890776
> 
> 赞同：8
> 
> 时间：2012-06-05T02:21:50.000
> 
> 标签：jquery

目前我有一个简单的 div，我想在鼠标悬停另一个 div 时淡入，但它会闪烁 3 次。

我已经阅读了其他一些问题，我认为这与我的代码结构有关。但我不知道如何纠正我的，因为它已经很基础了。

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.content .guide ul.guide li .event').mouseover(function(){
            $(this).find('.info').fadeIn();
        });
        $('.content .guide ul.guide li .event').mouseout(function(){
            $(this).find('.info').fadeOut();
        });
    });
</script> 
```

CSS

```
.content .guide ul.guide li .event .info {display:none;} 
```

HTML

```
<ul class="guide">
    <li class="mon">
        <div class="day">Monday</div>
        <div class="session-1 event">
            <time>7:30am</time>
            <span>Ep 5: <a href="">Lorem</a></span>
            <div class="info">
                <div class="tooltip"></div>
                <div class="wrap">
                    <div class="desc">Ep 8: Lorem ipsum</div>
                </div>
            </div>
        </div>
        <div class="session-2 event">
            <time>8:30pm</time>
            <span>Ep 5: <a href="">Lorem</a></span>
            <div class="info">
                <div class="tooltip"></div>
                <div class="wrap">
                    <div class="desc">Ep 8: Lorem ipsum</div>
                </div>
            </div>
        </div>
    </li>
    <li class="tue">
        <div class="day">Tuesday</div>
        <div class="session-1">
        </div>
        <div class="session-2">
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T02:25:27.047

您可以使用它`stop().fadeTo()`来防止这种情况。请参阅下面的代码和[演示](http://jsfiddle.net/CN6Uw/)

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.content .guide ul.guide li .event').mouseover(function(){
            $(this).find('.info').stop().fadeTo('slow',1);
        });
        $('.content .guide ul.guide li .event').mouseout(function(){
            $(this).find('.info').stop().fadeTo('slow',0);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T21:56:11.793

我只在谷歌浏览器中遇到了这个问题。

我已更改`.fadeIn`为`.fadeTo(myDuration,1)`修复它。

另外，对我来说，没有`.stop()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-20T13:32:03.623

我有这个，这解决了我的问题（我正在使用fadeIn和fadeOut）

```
$( "#board" ).stop().animate({ "opacity": 1 },300); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T22:22:03.893

老问题，但我想在解决这个问题之后添加我的发现，以防它们对任何偶然发现这个问题的人有所帮助。

使用 stop().fadeIn() 时，它只会暂停操作，直到触发下一个操作。

然后我尝试使用finish().fadeIn() 和finish().fadeOut() 而不是stop()。这工作得更好。当前正在播放的动画立即结束，并开始播放当前动画。

对于上面的示例，它将是：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.content .guide ul.guide li .event').mouseover(function(){
            $(this).find('.info').finish().fadeTo('slow',1);
        });
        $('.content .guide ul.guide li .event').mouseout(function(){
            $(this).find('.info').finish().fadeTo('slow',0);
        });
    });
</script> 
```

# php - 使用 php 以编程方式浏览远程网站

> ID：10890777
> 
> 赞同：2
> 
> 时间：2012-06-05T02:22:05.307
> 
> 标签：php, http

如何以编程方式使用 PHP 访问网站的安全站点并提取图像？有一个网站，我可以使用我的用户名/密码登录。登录后，我必须转到几个不同的页面才能下载图像。我正在尝试从运营商网站下载 POD（交付证明）图像。

这可以用 CURL 完成吗？

不幸的是，我无法直接访问图像，因为：a）它位于密码保护区域 b）我认为在您浏览时设置了会话变量，就像我浏览到货物的 POD 一样，没有添加请求变量到图像，所以我认为上一页必须设置一个会话变量来表示“这是我目前正在查看的寄售”。

另外-你们在这样做时可以看到任何道德限制吗？如果我公司允许您登录他们的网站，我不明白他们为什么会关心您是在物理上还是以编程方式登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:25:19.873

我经常使用 SimpleTest 的[PHP Scriptable Web Browser](http://simpletest.org/en/browser_documentation.html)来完成这些任务。

关于您的“道德”问题，如果您没有违反任何法律并出于个人目的获取信息，那么没有人应该关心。只是不要滥用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:24:49.577

如果您因为密码后面而无法访问它，那么是什么让您认为您可以编写一个自动脚本来获取它？

这种程序只能做尽可能多的事情，但重复使用时会更省力。

如果您只需要“***一个***”POD，那么您将浪费大量精力试图让一个程序为您完成它。

就个人而言，我非常关心是否有人使用机器人访问我的网站，但这是一种有偏见的观点，因为我制作游戏，所以机器人总是作弊。也就是说，大多数网站所有者可能不赞成不必要的机器人，搜索蜘蛛是一个明显的例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:27:46.987

是的，你应该使用 CURL。可能他们使用重定向。只要您不使用 CURLOPT_FOLLOWLOCATION，CURL 就不会自动处理它。

# arrays - (AS3) 两个数组关联？改变一个改变另一个

> ID：10890783
> 
> 赞同：0
> 
> 时间：2012-06-05T02:23:40.133
> 
> 标签：arrays, actionscript-3

当我从我的一个数组拼接一个条目时，它会从我的另一个数组拼接相同的条目......发生了什么？

```
 private static var words:Array = new WordFile().toString().split(/\n/);
        private static var wordsTemp:Array;

public static function checkWord (word:String):Boolean
    {
var truefalse:Boolean = wordsTemp.indexOf(word+"\r".toLowerCase()) > -1;
                trace (words.length)

                wordsTemp.splice(wordsTemp.indexOf(word+"\r".toLowerCase()), 1);

                trace (words.length)
   return truefalse

}
public static function resetArrays :void
{
wordsTemp = words
} 
```

使用这段代码，我每次开始新游戏时都会调用 resetArrays 函数。进入游戏后，程序将调用 checkWord 并传递一个单词。如果在单词数组中找到，就会从临时数组中拼接出来。但是，当我运行它时，两条迹线会产生 2 个不同的数字，而第二个则低一个（假设在数组中找到了该词）。这在我看来很奇怪，因为我正在拼接要重置的临时数组，但是在跟踪应该不变的数组时（除了我向您展示的操作之外，没有其他操作）似乎由临时数组中的拼接更改...

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:07:25.237

在 AS3 中，除`String`和（以及相关）之外的所有数据类型都**通过引用**`Number`复制

 **这意味着它仅在您使用时复制对原始对象的引用`myArray1 = myArray2`

更详细地说，考虑存储的内存`words`是`0x123456`

`wordsTemp = words`将`wordsTemp`指向相同的内存，即 0x123456

对 进行任何操作时`words`，会修改 0x123456 处的数组。但这就是`wordsTemp`所指的。所以实际上两者都是同一个对象。为了使两者不同，您需要*克隆*对象。如果是数组，您可以使用任何修改数组并返回新数组的方法来克隆它，例如`Array.slice`

```
wordsTemp=words.slice(0, words.length); //will do the trick 
```

或者，您可以不将任何内容连接到原始数组并获得副本

```
wordsTemp=words.concat(); 
```

或者，如果您想编写更多代码行，您可以执行以下操作：

```
wordsTemp=new Array();
for (var i:int=0; i<words.length; i++) {
    wordsTemp.push(words[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:36:18.217

当您执行 wordsTemp = words 时，您不只是分配数组项，而是分配程序中的内存空间。您必须将所有项目从第一个数组复制到第二个，但不要将其设置为相等。

您可以执行循环以将所有项目从 words 复制到 wordsTemp 或执行以下操作：

```
wordsTemp = words.slice(0, words.length); 
```

它将返回原始数组的副本而不修改它可以提供帮助的跳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:54:05.560

据我所知，在 AS3 中克隆数组的最简单和“标准”的方法是：

```
var cloneArray:Array = sourceArray.concat(); 
```**

# php - phpmyadmin 显示完整的 sql 输出

> ID：10890785
> 
> 赞同：6
> 
> 时间：2012-06-05T02:23:47.643
> 
> 标签：php, mysql, phpmyadmin

运行操作命令时，似乎 phpmyadmin 修剪了 sql 输出的结尾。我真的需要 phpmyadmin 来显示完整的输出

![在此处输入图像描述](../Images/4edd974866a54c24025386c51c06d083.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T02:33:50.570

在谷歌上快速搜索后，我发现了这个：[http ://wiki.phpmyadmin.net/pma/Config#MaxCharactersInDisplayedSQL](http://wiki.phpmyadmin.net/pma/Config#MaxCharactersInDisplayedSQL)

看来您只需要编辑 PHPmyadmin 的配置文件并设置`$cfg['MaxCharactersInDisplayedSQL'] = 1000;`为您想要的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-27T10:05:54.823

我的问题更简单。我正在使用“show create table”，但结果在少数字符后被截断。
PHPMyAdmin 实际上`"+options"`在结果上有一个小链接，带有“截断结果”之类的简单选项。只需要取消勾选！

如果要编辑 Torr 提到的文件，请查找：

*   `config.default.php`，在“librairies”文件夹中，其中包含现有参数
*   `config.inc.php`，您应该在其中复制/粘贴您需要的内容。

# apache-flex - 是否可以在外面使用““ 在 ” “？

> ID：10890787
> 
> 赞同：0
> 
> 时间：2012-06-05T02:24:04.800
> 
> 标签：apache-flex

我有一个新项目。其中一部分，Flex 是存在的。

```
<mx: Application xmlns:mx=...>
   <mx:script>
          import...

           function A() {
            }
    </mx:script>

    <mx:linkBar...>
    <mxViewStack ...>

       <mx:Canvas id="1st" ...>  **[HERE]**  </mx:Canvas>
       <mx:canvas id="2nd" ...>  ... </mx:Canvas>
       <mx:canvas id="3rd" ...>  ... </mx:Canvas> 
```

** 当 Viewstack 顺序调用 Canvas 时，A() 必须工作。

是否可以在中使用函数 A() `**HERE**]`？

或者请让我知道可以使用的可能功能或标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:30:46.790

下面的例子可以帮助你： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            private function A():void
            {
                //Your code
            }

            private function viewStackHandler():void
            {
                //Method One
                if(viewStackID.selectedIndex == 0)
                {
                    A();
                }
                else if(viewStackID.selectedIndex == 1)
                {
                    A();
                }
                else
                {
                    A();
                }
                //OR Method Second
                //call only A()

            }

        ]]>
    </fx:Script>
    <mx:VBox width="100%" height="100%">
        <mx:HBox width="100%" height="20">
            <s:Button label="One" click="{viewStackID.selectedIndex = 0}"/>
            <s:Button label="Two" click="{viewStackID.selectedIndex = 1}"/>
            <s:Button label="Three" click="{viewStackID.selectedIndex = 2}"/>
        </mx:HBox>
        <mx:ViewStack width="500" height="400" id="viewStackID" change="viewStackHandler()">
            <mx:Canvas id="canval1" borderColor="#FF0000" width="100%" height="100%">
                <s:Button label="One"/>
            </mx:Canvas>
            <mx:Canvas id="canval2" borderColor="#00FF00" width="100%" height="100%">
                <s:Button label="Two"/>
            </mx:Canvas>
            <mx:Canvas id="canval3" borderColor="#0000FF" width="100%" height="100%">
                <s:Button label="Three"/>
            </mx:Canvas>
        </mx:ViewStack>
    </mx:VBox>  
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:02:17.700

您可以使用将 Canvas 添加到 ViewStack 时调度的 add 属性

```
<mx:Canvas id="1st" add="A()"></mx:Canvas> 
```

# json - RestSharp 反序列化 JSON 内容（表示一个对象包含一个字节数组）错误

> ID：10890790
> 
> 赞同：23
> 
> 时间：2012-06-05T02:24:31.680
> 
> 标签：json, bytearray, deserialization, restsharp

客户端接收到正式的 JSON 内容`"{\"Id\":[1,2,3],\"Size\":56}"`，但在反序列化字节数组时出错。

1 下面的语句出现错误

```
IRestResponse<key> response = client.Execute<key>(request); 
```

2 错误消息是“没有为此对象定义无参数构造函数”。

3 客户端大小的对象类与服务器端的对象类相同：

```
public class key
{
    public byte[] id { get; set; }
    public int Size { set; get; }
} 
```

4 我尝试通过 JSON 格式传递包含字符串和整数的对象，这一切都很好，但字节数组。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-12-17T14:38:17.430

RestSharp 中的 JsonDeserializer 无法反序列化数组。而不是`byte[]`使用`List<byte>`. 有关更多信息，请参阅[https://github.com/restsharp/RestSharp/wiki/Deserialization](https://github.com/restsharp/RestSharp/wiki/Deserialization)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-20T14:34:19.237

我也遇到过这个问题。我的解决方案是使用 RestSharp 执行原始执行并使用 Json.NET 反序列化结果：

```
var response = client.Execute(request);
var keyResponse = JsonConvert.DeserializeObject<key>(response.Content); 
```

keyResponse 现在应该是从 JSON 内容反序列化的密钥类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-01T13:10:19.413

除了 Chris Hogan 的回复之外，我想指出的是，当 RestSharp 错误地使用了默认序列化程序而不是我分配的自定义 JSON.NET 序列化程序时，我收到了这个错误。

这样做的原因是我添加了一个内容类型的处理程序，`application/json`而我从中获取响应的 API 将内容返回为`text/json`.

因此，通过将`AddHandler`呼叫更改为`AddHandler("text/json", jsonDeserializer)`，我解决了这个问题。

# javascript - XML 解析错误：使用浏览器的内置解析器解析 XML 字符串时格式不正确

> ID：10890803
> 
> 赞同：0
> 
> 时间：2012-06-05T02:25:50.823
> 
> 标签：javascript, xml, xml-parsing, xsd

我正在尝试使用浏览器的内置解析器使用 JavaScript 解析 XML 字符串。我的 XML 字符串如下所示：

```
<?xml version='1.0' encoding='UTF-8' ?>
<xsd:schema xmlns:xsd='http://www.w3.org/2001/XMLSchema'
            xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
            xsi:schemaLocation='http://www.w3.org/2001/XMLSchema XMLSchema.xsd'
            elementFormDefault='qualified'
            version='1.0'>
<xsd:element name='probeMetadata' type='OASIS.System.Processor.LinuxProcessorProbe' />
<xsd:complexType name='OASIS.System.Processor.LinuxProcessorProbe'>
<xsd:complexContent>
<xsd:extension base='OASIS.System.Processor.ProcessorProbe'>
<xsd:sequence>
    <xsd:element name='nice_time' type='xsd:unsignedLong'  />
    <xsd:element name='iowait_time' type='xsd:unsignedLong'  />
    <xsd:element name='irq_time' type='xsd:unsignedLong'  />
    <xsd:element name='soft_irq_time' type='xsd:unsignedLong'  />
</xsd:sequence>
</xsd:extension>
</xsd:complexContent>
</xsd:complexType>
<xsd:complexType name='OASIS.System.Processor.ProcessorProbe'>
<xsd:sequence>
    <xsd:element name='idle_time' type='xsd:unsignedLong'  />
    <xsd:element name='system_time' type='xsd:unsignedLong'  />
    <xsd:element name='user_time' type='xsd:unsignedLong'  />
</xsd:sequence>
</xsd:complexType>
</xsd:schema> 
```

我编写了一个简单的 JavaScript 代码，只是为了检查解析器是否正确解析了我的 XML 并将其转换为有效的 XML DOM。JavaScript 代码如下所示：

```
parser = new DOMParser();
xmlDoc = parser.parseFromString(text, "text/xml");

x = xmlDoc.documentElement.childNodes;

document.getElementById("Text1").value = x[3].nodeName; 
```

这里的“文本”在 XML 之上。这段代码没有任何意义。一开始我只是想测试一些简单的东西。我在 w3school.com 测试了 XML 的有效性，它没有给我错误，所以我想 XML 中没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:37:14.833

以下对我有用。我正在使用 Chrome 20.0.1132.21 beta-m。

```
<html>
<head>
    <script>
        function test(){
            var text = "<?xml version='1.0' encoding='UTF-8' ?>\r\n"
            + "<xsd:schema xmlns:xsd='http://www.w3.org/2001/XMLSchema'\r\n"
            + "            xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'\r\n"
            + "            xsi:schemaLocation='http://www.w3.org/2001/XMLSchema XMLSchema.xsd'\r\n"
            + "            elementFormDefault='qualified'\r\n"
            + "            version='1.0'>\r\n"
            + "<xsd:element name='probeMetadata' type='OASIS.System.Processor.LinuxProcessorProbe' />\r\n"
            + "<xsd:complexType name='OASIS.System.Processor.LinuxProcessorProbe'>\r\n"
            + "<xsd:complexContent>\r\n"
            + "<xsd:extension base='OASIS.System.Processor.ProcessorProbe'>\r\n"
            + "<xsd:sequence>\r\n"
            + "    <xsd:element name='nice_time' type='xsd:unsignedLong'  />\r\n"
            + "    <xsd:element name='iowait_time' type='xsd:unsignedLong'  />\r\n"
            + "    <xsd:element name='irq_time' type='xsd:unsignedLong'  />\r\n"
            + "    <xsd:element name='soft_irq_time' type='xsd:unsignedLong'  />\r\n"
            + "</xsd:sequence>\r\n"
            + "</xsd:extension>\r\n"
            + "</xsd:complexContent>\r\n"
            + "</xsd:complexType>\r\n"
            + "<xsd:complexType name='OASIS.System.Processor.ProcessorProbe'>\r\n"
            + "<xsd:sequence>\r\n"
            + "    <xsd:element name='idle_time' type='xsd:unsignedLong'  />\r\n"
            + "    <xsd:element name='system_time' type='xsd:unsignedLong'  />\r\n"
            + "    <xsd:element name='user_time' type='xsd:unsignedLong'  />\r\n"
            + "</xsd:sequence>\r\n" + "</xsd:complexType>\r\n"
            + "</xsd:schema>"
            parser = new DOMParser();
            xmlDoc = parser.parseFromString(text, "text/xml");
            x = xmlDoc.documentElement.childNodes;
            document.getElementById("Text1").value = x[3].nodeName;         

        }
    </script>
</head>
<body>
    <input type="button" value="click" onClick="test()"/>
    <input type="text" name="Text1" id="Text1"/>
</body>
</html> 
```

# java - Java 类名区分大小写

> ID：10890805
> 
> 赞同：48
> 
> 时间：2012-06-05T02:26:14.553
> 
> 标签：java, jvm, jls

如果一个人在不同的目录中使用相同的不区分大小写的名称编写两个公共 Java 类，那么这两个类在运行时都不可用。（我在 Windows、Mac 和 Linux 上使用多个版本的 HotSpot JVM 进行了测试。如果有其他 JVM 可以同时使用它们，我不会感到惊讶。）例如，如果我创建一个名为的类`a`，并且一个命名`A`如下：

```
// lowercase/src/testcase/a.java
package testcase;
public class a {
    public static String myCase() {
        return "lower";
    }
}

// uppercase/src/testcase/A.java 
package testcase;
public class A {
    public static String myCase() {
        return "upper";
    }
} 
```

[我的网站](http://www.cs.cmu.edu/~jssunshi/stackoverflow/ClassNameCaseSensitivity.zip)上提供了三个包含上述代码的 Eclipse 项目。

如果尝试我像这样调用`myCase`两个类：

```
System.out.println(A.myCase());
System.out.println(a.myCase()); 
```

类型检查器成功了，但是当我运行由上面的代码直接生成的类文件时，我得到：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：testcase/A（错误名称：testcase/a）

在 Java 中，名称通常区分大小写。一些文件系统（例如 Windows）不区分大小写，所以我对上述行为的发生并不感到惊讶，但它似乎是*错误*的。不幸的是，Java 规范对于哪些类是可见的很奇怪。[Java 语言规范 (JLS)，Java SE 7 版](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)（第6.6.1 节，第 166 页）说：

> 如果一个类或接口类型被声明为 public，那么它可以被任何代码访问，只要声明它的编译单元（第 7.3 节）是可观察的。

在第 7.3 节中，JLS 以极其模糊的术语定义了编译单元的可观察性：

> 预定义包 java 及其子包 lang 和 io 的所有编译单元始终是可观察的。对于所有其他包，**主机系统确定哪些编译单元是可观察的**。

[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/jvms7.pdf)同样含糊不清（第 5.3.1 节）：

> 以下步骤用于使用引导类加载器加载并创建由 [二进制名称] N 表示的非数组类或接口 C [...] 否则，Java 虚拟机将参数 N 传递给引导类加载器以依赖于平台的方式搜索 C 的声称表示。

所有这些都导致了四个问题，按重要性降序排列：

1.  是否可以保证每个 JVM 中的默认类加载器可以加载哪些类？换句话说，我能否实现一个有效但退化的 JVM，它不会加载除 java.lang 和 java.io 中的类之外的任何类？
2.  如果有任何保证，上面示例中的行为是否违反了保证（即该行为是否是错误）？
3.  有什么方法可以同时加载 HotSpot`a`吗`A`？编写自定义类加载器会起作用吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-05T18:10:53.373

> *   对于每个 JVM 中的引导类加载器可以加载哪些类，是否有任何保证？

语言的核心部分，以及支持的实现类。不保证包含您编写的任何课程。（普通的 JVM 将您的类加载到与引导程序不同的类加载器中，事实上，普通的引导加载器通常从 JAR 中加载其类，因为这比充满类的大型旧目录结构更有效地部署。）

> *   如果有任何保证，上面示例中的行为是否违反了保证（即该行为是否是错误）？
> *   有没有办法让“标准”JVM 同时加载 a 和 A？编写自定义类加载器会起作用吗？

Java 通过将类的全名映射到文件名来加载类，然后在类路径中搜索该文件名。因此`testcase.a`去去去。`testcase/a.class`_ `testcase.A`_ `testcase/A.class`一些文件系统将这些东西混合在一起，并且可能会在需要时为其他文件系统提供服务。其他人做对了（特别是 JAR 文件中使用的 ZIP 格式的变体是完全区分大小写和可移植的）。Java 对此无能为力（尽管 IDE 可以通过使`.class`文件远离本机 FS 来为您处理它，但我不知道是否有任何实际这样做，而且 JDK`javac`肯定不是那么聪明）。

然而，这并不是这里要注意的唯一一点：类文件在内部知道它们在谈论什么类。文件中缺少*预期*的类仅意味着加载失败，导致`NoClassDefFoundError`您收到。你得到的是一个问题（至少在某种意义上是错误部署），它被检测到并得到了强有力的处理。从理论上讲，您可以构建一个可以通过不断搜索来处理此类事情的类加载器，但是*为什么要麻烦呢？*将类文件放在 JAR 中会更稳健地解决问题；这些都得到了正确处理。

更一般地说，如果您经常遇到这个问题，请在 Unix 上使用区分大小写的文件系统（推荐使用像 Jenkins 这样的 CI 系统）进行生产构建，并*找出哪些开发人员正在命名仅区分大小写的类并**让他们停下来，因为这非常令人困惑！***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T07:48:40.720

多纳尔的精彩解释几乎没有什么可补充的，但让我简要地思考一下这句话：

> ...具有相同不区分大小写名称的 Java 类 ...

*一般来说，名称和字符串本身*永远不会不区分大小写，只有存在*解释*才能做到。其次，Java 不做这样的解释。

因此，对您的想法的正确表述是：

> ... Java 类，其文件表示在不区分大小写的文件系统中具有相同的名称 ...

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-05T17:36:28.337

不要只考虑文件夹。

为您的类使用显式不同的命名空间（“包”），并且可能使用文件夹来匹配您的类。

当我提到“包”时，我不是指“*.JAR”文件，而是指以下概念：

```
package com.mycompany.mytool;

// "com.mycompany.mytool.MyClass"

public class MyClass
{
   // ...
} // class MyClass 
```

当您没有为您的代码指定包时，java 工具（编译器、IDE 等）假定对所有人使用相同的全局包。而且，如果有几个类似的类，它们有一个文件夹列表，可以在哪里查找。

包就像代码中的“虚拟”文件夹，适用于类路径或 Java 安装中的所有包。您可以拥有多个具有相同 ID 的类，但是，如果它们位于不同的包中，并且您指定要查找的包，则不会有任何问题。

只需我的 2 美分，用于您的一杯 Java 咖啡

# grails - Grails - 多个表单/传递远程复选框选择

> ID：10890810
> 
> 赞同：1
> 
> 时间：2012-06-05T02:27:04.900
> 
> 标签：grails, checkbox

我有一个基本结构：

```
<g:form>
   actionSubmit
</g:form>

<g:form>
  actionSubmit
</g:form>

<g:each in personList - variable=person>
   <tr>
     <td><g:checkBox name="personList" value="${person.id}" checked="${false}"/></td>
     <td>
         <g:form>
            actionSubmit
         </g:form>
     </td>
   </tr>
</g:each> 
```

这些表单中的每一个都依赖于 personList 复选框数组作为变量。我的代码的先前版本将整个 div 包装在一个表单中，当我在表中添加第三个表单时，它可以工作但导致问题。

如何通过选定的复选框？我有选择所有框的复选框 - 我只需要为该选定框数组分配一个变量/hiddenField。

谢谢！

**编辑**

使用单一表单的问题在于，我在每一行中都有一列，能够将元素添加到一对多关系中。如果我可以通过相应的动作提交传递 person.id（所以如果我在第 2 行点击 actionSubmit，我想传递第 2 行的 person.id），那么这就是小菜一碟。

但是，每当我尝试绑定人员 ID 时，我都会得到一个 ALL 人员 ID 数组。所以我想解决这个问题的唯一方法是有单独的表格。

```
 <td>
                                <div id="reportsToResultsDiv2_${person.id}" class="reportsToResultsDiv2_${person.id}">
                                    <g:select id="reportsTo" name="reportsTo.id" from="${rtResults}" optionKey="id" value="" />
                                    <g:actionSubmit action="addReportsTo" value="Add" params="[c_id:'${person.id}']"/>
                                </div>
                            </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:25:04.537

一个表单和几个 g:actionSubmit 按钮对你有用吗？

> 生成一个映射到特定操作的提交按钮，这使您可以在一个表单中拥有多个提交按钮。- [http://grails.org/doc/latest/ref/Tags/actionSubmit.html](http://grails.org/doc/latest/ref/Tags/actionSubmit.html)

```
<g:form controller="book">
    <g:checkBox name="personList" value="${person.id}"/>
    <tr><td>
        <g:actionSubmit action="action1" value="firstButton"/>
    </td></tr>
    <tr><td>
        <g:actionSubmit action="action2" value="secondButton"/>
    </td></tr>
</g:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:36:58.697

我不认为复选框既支持值又支持以这种方式检查。也许这就是你想要的？

```
<g:each in="${personList}" var="person>
    <g:form controller="person" action="doSomething">
        <g:hidden name="personId" value="${person.id}"/>
        <g:checkBox name="superFly" checked="${person.superFly}"/>
    </g:form>
</g:each> 
```

# php - 如何将现有 pdf 中的内容包含到生成的 pdf 中？

> ID：10890811
> 
> 赞同：0
> 
> 时间：2012-06-05T02:27:17.783
> 
> 标签：php, pdf, fpdf, fpdi

我正在使用 fpdf 作为脚本从我的 sql 数据创建 PDF。我想在该内容的末尾添加一个词汇表。我查看了 fpdi，但您只能从 PDF 中添加 1 页。如何添加所有页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:53:21.770

从[FPDI 文档](http://www.setasign.de/support/manuals/fpdi/fpdi/fpdi-importpage/)中...注意第一个参数。

* * *

# FPDI::importPage()

**描述**

```
class FPDI extends FPDF_TPL {

    mixed importPage ( integer $pageno[, string $boxName='/CropBox'] )
} 
```

将源页面转换为 FPDF_TPL 模板并返回创建的“模板”（或本例中的页面）的 id。

**参数**

*`$pageno`*

*   要导入的页码。

*`$boxName`*

*   用于显示导入页面的框。

    可能的值为：

    *   /媒体框
    *   /出血盒
    *   /修剪框
    *   /裁剪框
    *   /艺术盒

    如果没有找到一个盒子，FPDI 将查找它的父盒子并使用它。您可以检查使用 FPDI::getLastUsedPageBox() 导入的框。

**返回值**

如果页面被正确导入，该方法将返回模板（页面）的 id 以与 useTemplate() 一起使用。如果您在第二个参数中定义了错误的框，该方法将返回*false*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:31:16.730

```
$pagecount = $pdf->setSourceFile('yourpdf.pdf'); 

// import pages
for ($loop = 1; $loop <= $pagecount; $loop++) {
    $tplIdx = $pdf->importPage($loop);
    $pdf->addPage();
    $pdf->useTemplate($tplIdx);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:21:52.213

如何使用循环单独导入每个页面。

应该不难获得页数然后循环浏览页面。

# php - PDOException 没有被捕获？

> ID：10890813
> 
> 赞同：6
> 
> 时间：2012-06-05T02:27:46.287
> 
> 标签：php, exception, exception-handling, pdo, try-catch

我在[PHP](http://www.php.net/)中收到以下错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'localhost' (10061)' in C:\xampp\htdocs\project\Service\Database.class.php:26 Stack trace: #0 C:\xampp\htdocs\project\Service\Database.class.php(26): PDO->__construct('mysql:host=loca...', 'root', '', Array) #1 C:\xampp\htdocs\project\Service\Database.class.php(54): Service\Database::initialize() #2 C:\xampp\htdocs\project\index.php(15): Service\Database::getHandler() #3 {main} thrown in C:\xampp\htdocs\project\Service\Database.class.php on line 26 
```

**错误本身不是问题**，我故意终止了Windows 中的[MySQL](http://www.mysql.com/)服务以查看发生了什么（我正在使用[XAMPP](http://www.apachefriends.org/es/xampp.html)）。问题是我无法捕捉到[PDO](http://www.php.net/manual/en/class.pdo.php)对象抛出的异常，我不知道为什么。

```
try {
    $host       = "localhost";
    $dbname     = "project";
    $userName   = "root";
    $password   = "";
    $charset    = "utf8";
    $dsn        = "mysql:host=$host;dbname=$dbname;charset=$charset";

    $driverOptions = array(
        PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES $charset"
    );

    // This is the line that supposedly throws the exception (LINE 26):
    $dbh = new PDO($dsn, $userName, $password, $driverOptions);

    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    self::setHandler($dbh);
} catch (PDOException $e) {
    die("CATCHED"); // This line is never reached
} catch (Exception $e) {
    die("CATCHED"); // nor this one.
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T02:31:36.203

我唯一能想到的是，如果您在命名空间类中，并且应该使用`\PDOException`而不是`PDOException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:36:22.987

打开 error_reporting 并检查错误。

```
ini_set('display_errors', true);
error_reporting(E_ALL); 
```

在该行之前可能存在致命错误，或者 PDO 不可用。

# java - 在 Hashtable 上调用 Collection values() 时，Java 是否会重复数据？

> ID：10890815
> 
> 赞同：2
> 
> 时间：2012-06-05T02:27:47.973
> 
> 标签：java, memory-management, hashtable

我想遍历具有大量数据（大约 1 GB）的 Hashtable 的值。为此，我正在使用：

```
Hashtable<String,Object> myHashtable = new Hashtable<String,Object>;

// Fill the Hashtable here...

// Get the values as a Collection:
Collection<Object> myValues = myHashtable.values();

// Get the values as an array:
ArrayList<Object> myArray = myValues.toArray();

// Iterate through the values here... 
```

所以，我的问题是：我是否将存储的数据相乘？我是否在 RAM 中存储了 3 个相同值的副本（一份在 Hashtable 中，一份在 Collection 中，一份在 ArrayList 中）？

如果答案是肯定的，我复制了数据，有没有办法在不复制数据的情况下遍历 Hashtable 的值？

如果答案是否定的，那么这是否意味着 Collection 存储指针？在这种情况下，如果我在创建集合后修改 Hashtable 中的数据，集合是否反映了该更改？（对于 ArrayList 的问题相同）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:39:13.830

该`values()`方法不会*复制*数据，根据[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#values%28%29)，它返回地图中值的视图 - 意思是：如果您更改元素，`myValues`那么更改将反映在原始地图上。

另一方面，`toArray()` *确实会*重复数据，（并且它返回一个**数组**，而不是`ArrayList`您的代码所暗示的），因为它创建了一个新数组，其中包含`myValues`. 此外，由于数组包含对原始地图中元素的引用，如果对象是可变的，则它们上的更改将反映在地图上 - 但如果您修改数组本身（例如，将其元素之一设置为 null），则更改不会反映在地图上。

在不创建额外副本的情况下迭代映射值的最简单方法是对这些值使用迭代器：

```
for (Object val : myHashtable.values()) {
    // do something with each value
} 
```

请记住，因为映射中的值、内容`myValues`和内容`myArray`都是对相同对象的引用，所以您对它们所做的任何更改也会反映在其他对象上（假设它们是可变的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:39:21.530

查看[Hashtable.values() 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#values%28%29)。

> 集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。

返回的`Collection`包含对存储在您的相同对象的引用`Hashtable`，因此数据不会“重复”；它只是您的一个*视图*`Hashtable`。如果您更改其中一个存储的对象，您将观察到 the`Hashtable`和 the的变化`Collection`（因为它是同一个对象）。

# c - 在 C 中表示单个位

> ID：10890818
> 
> 赞同：1
> 
> 时间：2012-06-05T02:28:16.470
> 
> 标签：c, ansi, c89

如果我有 16 位代表 3 对值，每对 5 位长，另外一个 1 位值，完全按照这个顺序，使用位域来描述它是否安全？ANSI **C**是否保证位将完全按照我指定的顺序？

```
struct {
    unsigned v1 : 5;
    unsigned v2 : 5;
    unsigned v3 : 5;
    unsigned v4 : 1;
} test; 
```

如果没有，是否有任何其他数据结构可以用来表示这一点？还是我应该只存储两个 8 位`char`并以编程方式对其进行操作以确保可移植性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:38:15.300

我能找到的相关报价是 6.7.2.1(1)，来自 C99：

> 实现可以分配任何大到足以容纳位域的可寻址存储单元。如果有足够的空间剩余，紧跟在结构中另一个位域之后的位域将被打包到同一单元的相邻位中。如果剩余空间不足，则将不适合的位域放入下一个单元还是与相邻单元重叠是实现定义的。单元内位域的分配顺序（高位到低位或低位到高位）是实现定义的。未指定可寻址存储单元的对齐方式。

我认为这`unsigned`实际上不是“基础单元”类型，而是它只是位域声明本身的一部分：`T : n`表示“采用*n*位类型`T`”。真正的问题是是否*需要*选择一个“大”单元来实现。例如，它可以通过将单位设为 a 来使用*三个*字节`char`；一个为`v1`，一个为`v2`，最后一个为`v3, v4`。或者它可以使单元成为 16 位整数，在这种情况下，它只需要使用一个单元。

但是，正如您所指出的，单元内位字段的*顺序*是未指定的。C 中数据的原子单位是*地址*，位域没有地址。可以保证结构成员的地址按其声明的顺序增加，但您不能对位域（仅关于它们的基础单元）做出这样的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:36:11.573

您可以使用`uint16_t`from 类型`stdint.h`，它保证是无符号 16 位数量的类型同义词。如果您担心字节顺序，它会变得更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:33:15.493

除了位字段的实现定义方面，您可能还需要添加一个 pragma 或其他编译器指令来告诉编译器不要插入任何填充位。

这是我刚刚写的关于如何使用位域从字节值中提取一些位的答案。当我写这篇文章时，我发现我需要添加`#pragma pack(1)`，否则我的位字段不适合单个字节。

[在 C 中访问 c​​har 中的位](https://stackoverflow.com/questions/8584577/access-bits-in-a-char-in-c/10874261#10874261)

该答案还显示了如何使用 a`union`让您以完整字节或位字段的形式访问数据。您可以使用相同的技术以短整数或位字段的形式访问数据。

# mysql - MySQL中的条件累积SUM

> ID：10890819
> 
> 赞同：3
> 
> 时间：2012-06-05T02:28:17.450
> 
> 标签：mysql, sql

我有下表：

```
+-----+-----------+----------+------------+------+
| key | idStudent | idCourse | hourCourse | mark |
+-----+-----------+----------+------------+------+
|   0 |         1 |        1 |         10 |   78 |
|   1 |         1 |        2 |         20 |   60 |
|   2 |         1 |        4 |         10 |   45 |
|   3 |         3 |        1 |         10 |   90 |
|   4 |         3 |        2 |         20 |   70 |
+-----+-----------+----------+------------+------+ 
```

使用一个简单的查询，我可以根据`hourCourse`和向学生展示他们的加权平均值`mark`：

```
SELECT idStudent,
       SUM( hourCourse * mark ) / SUM( hourCourse ) AS WeightedAvg
  FROM `test`.`test`
  GROUP BY idStudent;
+-----------+-------------+
| idStudent | WeightedAvg |
+-----------+-------------+
|         1 |     60.7500 |
|         3 |     76.6667 |
+-----------+-------------+ 
```

但是现在我需要选择寄存器，直到`hourCourse`每个学生的累积总和达到阈值。例如，对于 30 的阈值`hourCourse`，只应考虑以下寄存器：

```
+-----+-----------+----------+------------+------+
| key | idStudent | idCourse | hourCourse | mark |
+-----+-----------+----------+------------+------+
|   0 |         1 |        1 |         10 |   78 |
|   1 |         1 |        2 |         20 |   60 |
|   3 |         3 |        1 |         10 |   90 |
|   4 |         3 |        2 |         20 |   70 |
+-----+-----------+----------+------------+------+ 
```

`key`不考虑 2，因为`idStudent`1 已经达到 30`hourCourse`与`idCourse`1 和 2。

最后，查询解决方案应该如下：

```
+-----------+-------------+
| idStudent | WeightedAvg |
+-----------+-------------+
|         1 |     66.0000 |
|         3 |     76.6667 |
+-----------+-------------+ 
```

有没有办法为此创建内联查询？提前致谢。

**编辑：**选择课程时的标准是从最高分到最低分。 **编辑：**当hourCourse 的累积总和小于30 时，包括寄存器。例如，将包括两个各20 小时的寄存器（总和40），以下不包括。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:16:54.807

您可以在子查询中计算每个 idStudent 的累积总和，然后只选择累积总和 <= 30 的结果：

```
select idStudent,
       SUM( hourCourse * mark ) / SUM( hourCourse ) AS WeightedAvg
from
(
  SELECT t.*,
  case when @idStudent<>t.idStudent
    then @cumSum:=hourCourse
    else @cumSum:=@cumSum+hourCourse
  end as cumSum,
  @idStudent:=t.idStudent
  FROM `test` t,
  (select @idStudent:=0,@cumSum:=0) r
  order by idStudent, `key`
) t
where t.cumSum <= 30
group by idStudent; 
```

演示：[http ://www.sqlfiddle.com/#!2/f5d07/23](http://www.sqlfiddle.com/#!2/f5d07/23)

# django - 让管理站点在 Django 项目中工作

> ID：10890825
> 
> 赞同：2
> 
> 时间：2012-06-05T02:29:29.773
> 
> 标签：django, django-admin

我正在尝试让管理站点为我的 Django 项目工作。我正在关注本教程[https://docs.djangoproject.com/en/1.4/intro/tutorial02/](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)并且我使用的是 Django 1.4。

网址.py：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r'^$', include('polls.urls')),
    # Examples:
    # url(r'^$', 'Blog.views.home', name='home'),
    # url(r'^Blog/', include('Blog.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    #url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

settings.py 是：

```
 DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'dev.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'polls',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    #'django.contrib.admindocs',

) 
```

我得到的错误消息是：

```
DoesNotExist at /admin/
Site matching query does not exist.
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin/
Django Version: 1.4
Exception Type: DoesNotExist
Exception Value:    
Site matching query does not exist.
Exception Location: /Users/IMAC/work3/env/lib/python2.7/site-packages/django/db/models/query.py in get, line 366
Python Executable:  /Users/IMAC/work3/env/bin/python
Python Version: 2.7.1
Python Path:    
['/Users/IMAC/work3/Blog',
 '/Users/IMAC/work3/env/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/Users/IMAC/work3/env/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/Users/IMAC/work3/env/lib/python27.zip',
 '/Users/IMAC/work3/env/lib/python2.7',
 '/Users/IMAC/work3/env/lib/python2.7/plat-darwin',
 '/Users/IMAC/work3/env/lib/python2.7/plat-mac',
 '/Users/IMAC/work3/env/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/IMAC/work3/env/Extras/lib/python',
 '/Users/IMAC/work3/env/lib/python2.7/lib-tk',
 '/Users/IMAC/work3/env/lib/python2.7/lib-old',
 '/Users/IMAC/work3/env/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/IMAC/work3/env/lib/python2.7/site-packages'] 
```

不确定是什么问题？需要一些指导。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:52:05.387

设置.py：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'data.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'try',
) 
```

网址.py：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',

    url(r'^admin/', include(admin.site.urls)),
) 
```

运行 syncdb 以创建数据库和用户。然后它应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:39:47.170

我在教程中遇到了同样的问题。您在尝试创建超级用户时提到了 Python 错误，是下面的错误吗？

```
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 428, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8 
```

这与您终端的区域设置有关。请参阅[此处](https://stackoverflow.com/questions/1830394/python-locale-strange-error-whats-going-on-here-exactly)了解 SO 解决方案。运行那里提到的两个导出命令，删除您的数据库文件，运行“python manage.py syncdb”再次创建数据库，输入“yes”创建超级用户。这不应该再给你一个错误，你现在应该能够访问本地主机上的管理站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T04:27:44.527

迟回复..

但我从这里得到了解决这个问题的方法

[http://satishgandham.com/2012/04/error-whil-creating-super-user-in-django1-4-on-mac/](http://satishgandham.com/2012/04/error-whil-creating-super-user-in-django1-4-on-mac/)

根据评论编辑

* * *

通过在添加用户之前在终端中运行此命令来纠正此问题

```
export LANG="en_US.UTF-8" 
```

我猜这个字符编码问题同时运行syncdb是访问django1.4的管理部分时出现以下错误的原因

# java - Httprest performance improvement

> ID：10890826
> 
> 赞同：1
> 
> 时间：2012-06-05T02:29:33.263
> 
> 标签：java, rest

I am doing a HTTPRest post call to send the data to a third party, my data is in the order of 3 to 10 million and i can send only one record per request along with username and password for authentication as specified by third party

sample code that i am using is

```
public static void main(String[] args) {

  try {

    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost(
        "http://localhost:8080/RESTfulExample/json/product/post");

    StringEntity input = new StringEntity("{\"qty\":100,\"name\":\"iPad 4\"}");
    input.setContentType("application/json");
    postRequest.setEntity(input);

    HttpResponse response = httpClient.execute(postRequest);

    if (response.getStatusLine().getStatusCode() != 201) {
        throw new RuntimeException("Failed : HTTP error code : "
            + response.getStatusLine().getStatusCode());
    }

    BufferedReader br = new BufferedReader(
                    new InputStreamReader((response.getEntity().getContent())));

    String output;
    System.out.println("Output from Server .... \n");
    while ((output = br.readLine()) != null) {
        System.out.println(output);
    }

  } catch (MalformedURLException e) {

    e.printStackTrace();

  } catch (IOException e) {

    e.printStackTrace();

  }

} 
```

for each request it is taking around 6 sec and if i calculate for 10 million records it will take hours , can some one please suggest me are the any ways to improve the performance ??

thanks in advance Sunny

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:28:05.370

首先，如果一个请求需要 6 秒，那么 1000 万条记录将需要 115 天。因此，在使用一些多线程技术从客户端提高性能之前，您应该首先将响应时间从 6 秒减少到几百毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T07:14:30.450

使用[此代码](http://yogeshmprajapati.blogspot.in/2011/12/login-to-fb-from-java.html) ，这将在调用 REST 时提高性能，因为它使用 Jax api 类，如 WebResource 等......

# java - (Java) Is there a type of object that can handle anything from primitives to arrays?

> ID：10890828
> 
> 赞同：0
> 
> 时间：2012-06-05T02:29:50.240
> 
> 标签：java, polymorphism

I'm pretty new to Java, so I'm hoping one of you guys knows how to do this. I'm having the user specify both the type and value of arguments, in any XML-like way, to be passed to methods that are external to my application.

Example: javac myAppsName externalJavaClass methodofExternalClass [parameters]

Of course, to find the proper method, we have to have the proper parameter types as the method may be overloaded and that's the only way to tell the difference between the different versions. Parameters are currently formatted in this manner:

(type)value(/type), e.g. (int)71(/int) (string)This is my string that I'm passing as a parameter!(/string)

I parse them, getting the constructor for whatever type is indicated, then execute that constructor by running its method, `newInstance(<String value>)`, loading the new instance into an `Object`. This works fine and dandy, but as we all know, some methods take arrays, or even multi-dimensional arrays.

I could handle the argument formatting like so: `(array)(array)(int)0(/int)(int)1(/int)(/array)(array)(int)2(/int)(int)3(/int)(/array)(/array)`... or perhaps even better... `{{(int)0(/int)(int)1(/int)}{(int)2(/int)(int)3(/int)}}`.

The question is, how can this be implemented? Do I have to start wrapping everything in an Object[] array so I can handle primitives, etc. as argObj[0], but load an array as I normally would? (Unfortunately, I would have to make it an Object[][] array if I wanted to support two-dimensional arrays. This implementation wouldn't be very pretty.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:49:12.303

是的，它被称为`java.lang.Object`. 您甚至可以将数组分配给`int[][]`声明为`java.lang.Object`.

但我担心这不是你想要的。您似乎正在编写一个客户端服务框架——客户端（您的用户）将一些数据传递给服务（您的应用程序）。现有的库可以做同样的事情，例如 Thrift、Protobuf。如果您正在寻找基于 XML 的解决方案，可以使用 SOAP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T02:54:34.820

您真正需要的是 JSON，以及用于处理它的 Java 工具包之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T04:12:54.377

我认为您在这里寻找的是一种基于 XML 文件中描述的属性动态调用 Java 方法的方法。

如果是这种情况，您可以探索 Java 反射 API。

示例类：

```
package foo;
public class Bar {

    public void doSomething(String x) {
        System.out.println("This is a method doSomething that takes in a String parameter");
    }

    public void doSomething(String [] arr, String str) {
        System.out.println("This is a method doSomething that takes in a String arr parameter and a String parameter");
    }
} 
```

要动态使用此类中的方法，请执行以下操作：

```
Class c = Class.forName("foo.Bar");
Object newInstance = c.newInstance();
Method method = c.getMethod("doSomething", String.class);
// This will locate the first method
method.invoke(newInstance, "Hello World");

Method method = c.getMethod("doSomething", String[].class, String.class);
// This will locate the second method

String [] arr = {"Hello", "World"};
method.invoke(newInstance, arr, "Hello World"); 
```

因此，您可以在 XML 文件中指定如下：

```
<method>
    <name>doSomething</name>
    <params>
        <param>java.lang.String</param>
    </params>
</method>
<method>
    <name>doSomething</name>
    <params>
        <param>java.lang.String[]</param>   // or any other annotation to indicate that its an arr
        <param>java.lang.String</param>
    </params>
</method> 
```

然后，读取 XML 文件并使用它动态查找 Java 方法。

动态创建数组：

```
Class c = Class.forName("java.lang.String");
int length = 5;
Object o = Array.newInstance(c, length); // o is a String arr of length 5
String [] arr = (String []) o; 
```

# ruby-on-rails - ruby script/rails server fail

> ID：10890829
> 
> 赞同：1
> 
> 时间：2012-06-05T02:30:19.430
> 
> 标签：ruby-on-rails, ruby

I am new to the ruby world. I want to run an existing Rails project, but I get the following error:

```
$ruby script/rails server
/Users/apple/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.0/ext/json/ext/json/ext/parser.bundle: undefined class/module Encoding (ArgumentError)
    from /Users/apple/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
    from /Users/apple/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:236:in `load_dependency' 
```

Should I install other packages or another version of rails? If I write a small project using `rails new xxx` then `$ruby script/rails server` works.

BTW: I am in mac.

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:40:25.733

The correct commands in different versions of rails are:

rails 2.3

```
ruby script/server 
```

rails 3

```
rails server #  or ruby script/rails server 
```

It is possible that the existing project is rails 2.3 and your environment is rails 3.0.

# jsf-2 - Container Managed Security with Remember Me option

> ID：10890831
> 
> 赞同：0
> 
> 时间：2012-06-05T02:30:47.097
> 
> 标签：jsf-2, security

I have container managed security enabled using a JDBC realm in glassfish.

Now I wanted to add Remember Me option capability so that user is not required to login everytime.

I haved searched the forum and found this two links ["remember me" functionality with jsf 2.0](https://stackoverflow.com/questions/6321309/remember-me-functionality-with-jsf-2-0) and [JSF "Remember me" option](https://stackoverflow.com/questions/4981246/jsf-remember-me-option) but I still can't understand how to implement remember me.

Does anybody have an advise how to do this?

I know Spring has solution for this but I am not using Spring option and I am using the following stack in building my web project

JSF2/EJB/JPA2/Glassfish/Primefaces

# iphone - NSNotificationcenter for app in suspended state

> ID：10890835
> 
> 赞同：1
> 
> 时间：2012-06-05T02:31:21.573
> 
> 标签：iphone, ios, xcode, nsnotificationcenter

I used the `NSNotificationcenter` to implement an event listener on a change in connectivity. When the user connects or disconnects from a WiFi network. Is it possible for this notification to be sent to the app while the app is in suspended mode?

It must be possible to do this, thinking about Skype for example how do it receive an incoming Skype call?

This is how I add my observer

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(reachabilityChanged:)
                                             name:kReachabilityChangedNotification
                                           object:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:09:09.643

不，常规应用程序不可能。Skype 将注册为 voip 类型的后台应用程序，它比常规应用程序具有更多在后台执行的能力。有 4 种类型的后台应用程序：音频、voip、位置、报摊。

如果应用程序不是这些类型之一，那么如果它被暂停，它可以再次执行的唯一方法是通过用户点击应用程序的图标或响应本地或远程通知。

# apache - mod_proxy 与 apache tomcat，我该如何设置？

> ID：10890836
> 
> 赞同：0
> 
> 时间：2012-06-05T02:31:29.070
> 
> 标签：apache, tomcat, apache2, tomcat6

我的应用程序在 localhost:8080 上提供服务。我想配置一些东西，以便它只是 localhost:80 （或没有指定端口的 localhost）上的服务器。我被告知要遵循[这些指示](http://tomcat.apache.org/tomcat-6.0-doc/proxy-howto.html)。

我下载的 apache-tomcat 位于 /home/myusername/tools/appname/apache-tomcat-6.0.33

我在该目录中找不到 httpd.conf 文件......所以我无法进行上述文章提到的更改。我不知道该怎么办。我是 apache/tomcat 的新手。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:49:28.163

这些说明适用于*apache*，它与 apache 的*tomcat*不同。你所拥有的（6.0.33 的东西）是 apache 的*tomcat*，它托管/运行 webapps 但通常不用作一般的网络服务器。您需要下载并安装 apache，然后您就可以按照这些说明进行操作。

您可以在此处下载 apache 网络服务器：[http ://httpd.apache.org/download.cgi](http://httpd.apache.org/download.cgi)

或者，如果您正在使用带有包管理器的操作系统，请改用您的操作系统的包管理器。

通常，httpd.conf 文件应位于`/etc/apache2/httpd.conf`（或`/etc/apache/httpd.conf`）。

# opengl-es - Translate ortographic to perspective

> ID：10890837
> 
> 赞同：0
> 
> 时间：2012-06-05T02:31:30.577
> 
> 标签：opengl-es, opengl-es-2.0, projection, perspective, orthographic

I have two points that describe line, problem is that i know coordinates of one for orthographic matrix (ie 150x250x0), and coordinates for second for perspective matrix (0.5x0.5x20.0f). I would like to translate orthographic coordinates to perspective so i can draw a line using glsl shader :). How to accomplish this task?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:20:09.393

您需要将一个顶点移动到其他矩阵空间。例如，让我们将 150x250x0 从正交空间移动到透视空间。为此，您需要通过倒置正交矩阵转换您的顶点。我不知道你用的是什么数学库，也许它已经有矩阵求逆的功能。否则使用此链接中的代码：[http](http://www.gamedev.net/topic/180189-matrix-inverse/) ://www.gamedev.net/topic/180189-matrix-inverse/ 。在这一步之后，您的顶点位于世界空间中。

PS：矩阵求逆需要一些大量的计算时间。如果您可以跟踪转换步骤（平移、旋转和缩放），则更简单的方法应该是分别反转这些步骤并在此之后组成一个矩阵。

# javascript - 使用 jQuery 覆盖默认的 javascript 功能

> ID：10890840
> 
> 赞同：1
> 
> 时间：2012-06-05T02:31:41.653
> 
> 标签：javascript, jquery, onchange

我正在尝试使用 jQuery 在下面的代码中覆盖更改事件的 JavaScript，但是我相信内联 JavaScript 优先于声明的 jQuery 功能。本质上，我正在尝试拥有我的网站的 AJAX 版本，其中包含一个额外的 JavaScript 文件。我需要这个功能在没有额外的 AJAX 版本的情况下仍然可以工作，但我不确定是否应该将它包含在主 JavaScript 文件中，或者像现在一样将它保持内联。任何有关他们的建议和信息将不胜感激！谢谢！

```
<form action="/cityhall/villages/" method="post" name="submit_village">
    <select name="village" onchange="document.submit_village.submit();">
        <option value=""></option>
    </select>
</form> 
```

我正在尝试使用 jQuery Form Plugin 将帖子提交给 PHP 以处理请求，如下所示：

```
var bank_load_options = { 
    target:        '#content',
    beforeSubmit:  showRequest,
    success:       showResponse
};
$('form.get_pages').livequery(function(){
    $(this).ajaxForm(bank_load_options);
    return false;
}); 
```

我修改了代码如下：

```
<form action="/cityhall/villages/" method="post" id="submit_village" name="submit_village">
    <select name="village" class="get_pages" rel="submit_village">
        <option value=""></option>
    </select>
</form>

<script>
# main JavaScript
$('.get_pages').live('change',function(e){
    var submit_page = $(this).attr('rel');
    $("#"+submit_page).submit();
});

# ajax JavaScript
var bank_load_options = { 
    target:        '#content',
    beforeSubmit:  showRequest,
    success:       showResponse
};
$('.get_pages').live('change',function(){
    var submit_page = $(this).attr('rel');
    $("#"+submit_page).ajaxForm(get_pages_load_options);
    return false;
});
</script> 
```

但是现在它只在我更改它时运行所有其他选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:51:49.343

您的非 ajax 版本也必须是非 jQuery 吗？如果不是，那么我也建议（就像@nnnnnn 所做的那样）你取消 onxyz 属性并在整个过程中使用 jQuery。

正如其他海报所暗示的那样，内联事件是不可取的，应该被取消。

如果您的非 ajax 版本必须使用 onxyz，那么我建议如下：

设置一个变量来存储此版本是否为 ajax（如何确定这取决于您和您的应用程序上下文）：

var is_ajax = true;

然后如果它是一个 ajax 版本试试这个：

```
$(function(){
    if(is_ajax){     
        //Unbind the change event from the village select box
        $('select[name="village"]').unbind('change');
        //As an extra measure, remove the onchange attribute
        $('select[name="village"]').removeAttr('onchange');
        //Re-bind the click event to execute your new ajax functionality
        $(document).on('change','select[name="village"]',function(){
            //Do ajax stuff for on-change event here
        });
    }
}); 
```

因为它位于 jQuery 的 document.ready 函数中，所以这段代码应该在 html dom（及其关联的 onchange 属性）被渲染后触发。因此，我想它会有效地剥离旧事件并重新绑定一个新事件。

演示：

[http://jsfiddle.net/foxwisp/hdL5R/](http://jsfiddle.net/foxwisp/hdL5R/)

如果您可以取消内联事件，那么我想您希望在初始 javascript 文件中执行此操作：

```
$(document).on('change','select[name="village"]',function(){
    document.submit_village.submit();
}); 
```

然后在您的 ajax 文件中包含以下内容：

```
$('select[name="village"]').removeAttr('onchange');
$(document).on('change','select[name="village"]',function(){
    //Do ajax stuff here
}); 
```

只要两者都在相同的范围和时间范围内，以便它们一个接一个地执行，那么以上应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:43:24.773

将所有 Javascript 放在一个地方（不是一个文件，但不是一半内联，一半在一个文件中）是一种很好的做法，因此我会删除所有内联 Javascript。

这也将帮助您解决优先问题，因为您可以从同一位置管理所有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:41:04.333

放置 javascript 的位置（很大程度上）是一种风格选择。就像 CSS 一样，将 javascript 放在页面源代码（内联）或页面头部是最初编写页面的好习惯，但对于生产页面来说是不好的做法。

话虽这么说，我有点困惑为什么你会加倍你的 onchange 事件。您是否也尝试将 jQuery 用于选择元素？

我不确定内联与单独 javascript 的一般行为是什么，但我敢说，与内联 CSS 类似，页内 javascript 将优先于外部文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T02:45:28.207

在这种特殊情况下，您可以在您的 AJAX 版本中放弃已触发的提交。

```
$('[name=submit_village]').on('submit', function(e) {
  e.preventDefault();

  //...Maybe other AJAX code...
}); 
```

# css - 如何避免在 CSS 中使用过多的类？

> ID：10890842
> 
> 赞同：1
> 
> 时间：2012-06-05T02:32:13.843
> 
> 标签：css, twitter-bootstrap

我正在使用引导 css 框架。我想创建一个有多种样式的表格。代码是这样的：

```
<table id="myTable" class="table table-bordered table-striped table-condensed">
  ....
</table> 
```

我怎样才能避免在这里使用这么多类（table table-bordered table-striped table-condensed）？CSS 可以做一些类似 OO 的扩展吗？我的意思是定义一个名为 myTable 的类，它可以有许多预定义的样式。

虚拟代码：

```
table.myTable{
  have_class: table table-bordered table-striped table-condensed;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:35:02.627

我不太清楚你的意思。通常，您只想在必要时使用类，然后首先按元素定位。如果不可能，`.class element`那么添加另一个类。请记住，您可以通过放置一个空格并添加另一个类/ID/元素来更具体地定位。你添加的越多，它就变得越具体。

例子

`table`

`#myTable tr`

`#myTable tr.first`

`#myTable .odd a`

此外，如果这是预定义的 twitter 引导类的问题，那就是使用网格/样式样板的问题。无论如何，它都不是轻巧或精简的。Twitter bootstrap 通常只是用于快速启动和原型设计……而不是用于已完成的网站。

如果您正在寻找完全干净的代码，您可能希望从头开始编写代码。

# android - 图书馆的错误

> ID：10890843
> 
> 赞同：1
> 
> 时间：2012-06-05T02:32:16.280
> 
> 标签：android, android-emulator

这是日志猫。我的程序是计算器，我不知道如何解决这个错误

```
E/AndroidRuntime(620): java.lang.RuntimeException: Unable to start activity ComponentInfo{calculator.tt/calculator.tt.CalculatorActivity}: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.widget.Button 
```

这是 main.xml 文件，我的布局有一个编辑文本和 5 个表格行。在最后一个表行中，我使相等的按钮比另一个按钮大。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/answer"
            android:layout_width="match_parent"
            android:layout_height="70dp"
            android:ems="10"
            android:gravity="right|center|end"
            android:lines="1" >

            <requestFocus />
        </EditText>

        <TableRow
            android:id="@+id/TableRow02"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:paddingTop="30dp" >

            <Button
                android:id="@+id/open"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="(" />

            <Button
                android:id="@+id/close"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text=")" />

            <ImageButton
                android:id="@+id/sqrt"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:src="@drawable/sqrt" />

            <Button
                android:id="@+id/add"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="+" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp" >

            <ImageButton
                android:id="@+id/x2"
                android:layout_width="77dp"
                android:layout_height="match_parent"
                android:src="@drawable/x2" />

            <ImageButton
                android:id="@+id/x3"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:src="@drawable/x3" />

            <Button
                android:id="@+id/giaithua"
                android:layout_width="77dp"
                android:layout_height="match_parent"
                android:text="x!" />

            <Button
                android:id="@+id/sub"
                android:layout_width="77dp"
                android:layout_height="match_parent"
                android:text="-" />

        </TableRow>

        <TableRow
            android:id="@+id/TableRow03"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp" >

            <Button
                android:id="@+id/key7"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="7" />

            <Button
                android:id="@+id/key8"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="8" />

            <Button
                android:id="@+id/key9"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="9" />

            <Button
                android:id="@+id/mul"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="*" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow04"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp" >

            <Button
                android:id="@+id/key4"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="4" />

            <Button
                android:id="@+id/key5"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="5" />

            <Button
                android:id="@+id/key6"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="6" />

            <Button
                android:id="@+id/div"
                android:layout_width="77dp"
                android:layout_height="wrap_content"
                android:text="/" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow05"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/key1"
                        android:layout_width="77dp"
                        android:layout_height="wrap_content"
                        android:text="1" />

                    <Button
                        android:id="@+id/key2"
                        android:layout_width="77dp"
                        android:layout_height="wrap_content"
                        android:text="2" />

                    <Button
                        android:id="@+id/key3"
                        android:layout_width="77dp"
                        android:layout_height="wrap_content"
                        android:text="3" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/dot"
                        android:layout_width="77dp"
                        android:layout_height="wrap_content"
                        android:text="." />

                    <Button
                        android:id="@+id/key0"
                        android:layout_width="77dp"
                        android:layout_height="wrap_content"
                        android:text="0" />

                    <ImageButton
                        android:id="@+id/minus"
                        android:layout_width="77dp"
                        android:layout_height="match_parent"
                        android:src="@drawable/minus" />

                </LinearLayout>
            </LinearLayout>

            <Button
                android:id="@+id/Equal"
                android:layout_width="77dp"
                android:layout_height="95dp"
                android:text="=" />
        </TableRow>

    </LinearLayout> 
```

这是计算器活动：

```
package calculator.tt;

import android.app.Activity;
import android.os.Bundle;
import android.text.InputType;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;

public class CalculatorActivity extends Activity {

    EditText answer1;
    String as;
    char c;
    double a, b, e;
    boolean k;
    Button addbutton;
    Button subbutton;
    Button divbutton;
    Button mulbutton;
    ImageButton x2button;
    ImageButton x3button;
    ImageButton sqrtbutton;
    Button gtbutton;
    Button opbutton;
    Button clbutton;
    Button dotbutton;
    ImageButton minusbutton;
    Button key0button;
    Button key1button;
    Button key2button;
    Button key3button;
    Button key4button;
    Button key5button;
    Button key6button;
    Button key7button;
    Button key8button;
    Button key9button;
    Button equalbutton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /*Khai báo các lớp cho các button*/
        answer1 = (EditText)findViewById(R.id.answer);
        answer1.setInputType(InputType.TYPE_NULL);

        addbutton = (Button)findViewById(R.id.add);
        addbutton.setOnClickListener(new AddbuttonHandler());

        subbutton = (Button)findViewById(R.id.sub);
        subbutton.setOnClickListener(new SubbuttonHandler());

        divbutton = (Button)findViewById(R.id.div);
        divbutton.setOnClickListener(new DivbuttonHandler());

        mulbutton = (Button)findViewById(R.id.mul);
        mulbutton.setOnClickListener(new MulbuttonHandler());

        equalbutton = (Button)findViewById(R.id.answer);
        equalbutton.setOnClickListener(new EqualbuttonHandler());

        sqrtbutton = (ImageButton)findViewById(R.id.sqrt);
        sqrtbutton.setOnClickListener(new SqrtbuttonHandler());

        x2button = (ImageButton)findViewById(R.id.x2);
        x2button.setOnClickListener(new X2buttonHandler());

        x3button = (ImageButton)findViewById(R.id.x3);
        x3button.setOnClickListener(new X3buttonHandler());

        minusbutton = (ImageButton)findViewById(R.id.minus);
        minusbutton.setOnClickListener(new MinusbuttonHandler());

        gtbutton = (Button)findViewById(R.id.giaithua);
        gtbutton.setOnClickListener(new GtbuttonHandler());

        dotbutton = (Button)findViewById(R.id.dot);
        dotbutton.setOnClickListener(new DotbuttonHandler());

        key0button = (Button)findViewById(R.id.key0);
        key0button.setOnClickListener(new key0buttonHandler());

        key1button = (Button)findViewById(R.id.key1);
        key1button.setOnClickListener(new key1buttonHandler()); 

        key2button = (Button)findViewById(R.id.key2);
        key2button.setOnClickListener(new key2buttonHandler()); 

        key3button = (Button)findViewById(R.id.key3);
        key3button.setOnClickListener(new key3buttonHandler()); 

        key4button = (Button)findViewById(R.id.key4);
        key4button.setOnClickListener(new key4buttonHandler()); 

        key5button = (Button)findViewById(R.id.key5);
        key5button.setOnClickListener(new key5buttonHandler()); 

        key6button = (Button)findViewById(R.id.key6);
        key6button.setOnClickListener(new key6buttonHandler()); 

        key7button = (Button)findViewById(R.id.key7);
        key7button.setOnClickListener(new key7buttonHandler());

        key8button = (Button)findViewById(R.id.key8);
        key8button.setOnClickListener(new key8buttonHandler()); 

        key9button = (Button)findViewById(R.id.key9);
        key9button.setOnClickListener(new key9buttonHandler());
        Log.e("Đang chạy đến đây","Xong khai bao cac lop");
    }
    /* Các lớp cho button*/
    private class X2buttonHandler implements OnClickListener{
        public void onClick (View v){
            k=true;
            a = Double.parseDouble(answer1.getText().toString());
            answer1.setText(a*a+"");

        }
    }
    private class X3buttonHandler implements OnClickListener{
        public void onClick (View v){
            k=true;
            a = Double.parseDouble(answer1.getText().toString());
            answer1.setText(a*a*a+"");
        }
    }
    private class MinusbuttonHandler implements OnClickListener{
        public void onClick (View v){
            a = Double.parseDouble(answer1.getText().toString());
            answer1.setText(-a+"");
        }
    }
    /*Tính căn bậc 2*/
    private class SqrtbuttonHandler implements OnClickListener{
        public void onClick (View v){
            k=true;
            a = Double.parseDouble(answer1.getText().toString());
            b = Math.sqrt(a);
            answer1.setText(b+"");
        }
    }
    /*Tinh giai thua*/
    private class GtbuttonHandler implements OnClickListener{
        public void onClick (View v){
            k=true;
            a = Double.parseDouble(answer1.getText().toString());
            b=1;
            for (int i=1;i<a+1;i++)
                {
                b=b*i;
                }
            answer1.setText(b+"");
        }
    }

    private class DotbuttonHandler implements OnClickListener{
        public void onClick (View v){
            int i;
            as = answer1.getText().toString();
            if (k)
                answer1.setText("");
            k=false;
            /*Chi cho duy nhat 1 dau cham xuat hien*/
            for (i=0;i<as.length();i++)             
                if(as.charAt(i)==46)
                { i=1;
                  break;
                }
            if (i!=1)
                answer1.append("."); 
        }
    }
    private class key0buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("0");
            k=false;
        }
    }
    private class key1buttonHandler implements OnClickListener{
        public void onClick (View v){               
            if (k)
                answer1.setText("");    
            answer1.append("1");
            k=false;
        }
    }
    private class key2buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");        
            answer1.append("2");
            k=false;
        }
    }
    private class key3buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("3");
            k=false;
        }
    }
    private class key4buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("4");
            k=false;
        }
    }
    private class key5buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("5");
            k=false;
        }
    }
    private class key6buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("6");
            k=false;
        }
    }
    private class key7buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("7");
            k=false;
        }
    }
    private class key8buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("8");
            k=false;
        }
    }
    private class key9buttonHandler implements OnClickListener{
        public void onClick (View v){
            if (k)
                answer1.setText("");
            answer1.append("9");
            k=false;
        }
    }

    private class AddbuttonHandler implements OnClickListener{
        public void onClick (View v){
            int i,z=0;
            String a1=null,a2=null;
            for (i=0;i<as.length();i++)
                if (as.charAt(i)==43||as.charAt(i)==42||as.charAt(i)==45||as.charAt(i)==47){
                        a1 = as.substring(0,i-1);
                        a2 = as.substring(i+1,as.length());
                        z=as.charAt(i);
                        break;
                    }
            a = Double.parseDouble(a1);
            b = Double.parseDouble(a2);
            if (z==43)
                answer1.setText(a+b + "");
            if (z==42)
                answer1.setText(a*b + "");
            if (z==45)
                answer1.setText(a-b + "");
            else answer1.setText(a/b + "");
            answer1.append("+");
    }
}
    private class MulbuttonHandler implements OnClickListener{
        public void onClick (View v){
            int i,z=0;
            String a1=null,a2=null;
            for (i=0;i<as.length();i++)
                if (as.charAt(i)==43||as.charAt(i)==42||as.charAt(i)==45||as.charAt(i)==47){
                        a1 = as.substring(0,i-1);
                        a2 = as.substring(i+1,as.length());
                        z=as.charAt(i);
                        break;
                    }
            a = Double.parseDouble(a1);
            b = Double.parseDouble(a2);
            if (z==43)
                answer1.setText(a+b + "");
            if (z==42)
                answer1.setText(a*b + "");
            if (z==45)
                answer1.setText(a-b + "");
            else answer1.setText(a/b + "");
            answer1.append("*");
        }
    }
    private class SubbuttonHandler implements OnClickListener{
        public void onClick (View v){
            int i,z=0;
            String a1=null,a2=null;
            for (i=0;i<as.length();i++)
                if (as.charAt(i)==43||as.charAt(i)==42||as.charAt(i)==45||as.charAt(i)==47){
                        a1 = as.substring(0,i-1);
                        a2 = as.substring(i+1,as.length());
                        z=as.charAt(i);
                        break;
                    }
            a = Double.parseDouble(a1);
            b = Double.parseDouble(a2);
            if (z==43)
                answer1.setText(a+b + "");
            if (z==42)
                answer1.setText(a*b + "");
            if (z==45)
                answer1.setText(a-b + "");
            else answer1.setText(a/b + "");
            answer1.append("-");
        }
    }
    private class DivbuttonHandler implements OnClickListener{
        public void onClick (View v){
            int i,z=0;
            String a1=null,a2=null;
            for (i=0;i<as.length();i++)
                if (as.charAt(i)==43||as.charAt(i)==42||as.charAt(i)==45||as.charAt(i)==47){
                        a1 = as.substring(0,i-1);
                        a2 = as.substring(i+1,as.length());
                        z=as.charAt(i);
                        break;
                    }
            a = Double.parseDouble(a1);
            b = Double.parseDouble(a2);
            if (z==43)
                answer1.setText(a+b + "");
            if (z==42)
                answer1.setText(a*b + "");
            if (z==45)
                answer1.setText(a-b + "");
            else answer1.setText(a/b + "");
            answer1.append("/");
        }
    }
    private class EqualbuttonHandler implements OnClickListener{
        public void onClick (View v){
            int i,z=0;
            String a1 = null, a2 = null;
            k=true;
            as = answer1.getText().toString();
            for (i=0;i<as.length();i++)
                if (as.charAt(i)==43||as.charAt(i)==42||as.charAt(i)==45||as.charAt(i)==47){
                        a1 = as.substring(0,i-1);
                        a2 = as.substring(i+1,as.length());
                        z=as.charAt(i);
                        break;
                    }
            a = Double.parseDouble(a1);
            b = Double.parseDouble(a2);
            if (z==43)
                answer1.setText(a+b + "");
            if (z==42)
                answer1.setText(a*b + "");
            if (z==45)
                answer1.setText(a-b + "");
            else answer1.setText(a/b + "");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:49:38.133

在此 Java 行中：
equalbutton = (Button)findViewById(R.id.answer);

您正在查找由此 XML 定义的 EditText：
<EditText
        android:id="@+id/answer"

看起来您打算这样写：
equalbutton = (Button)findViewById(R.id.Equal);

# php - Codeigniter 何时使用 insert_batch()

> ID：10890844
> 
> 赞同：0
> 
> 时间：2012-06-05T02:32:19.983
> 
> 标签：php, codeigniter

我正在 Codeigniter 中开发一个邮件队列，一次发送 100 条消息。我正在寻找执行此操作的最佳方法并遇到了`$this->db->insert_batch()`. 它看起来很有用，但我找不到有关何时或如何使用它的信息。有没有人将它用于邮寄目的？

```
$data = array(
   array(
      'title' => 'My title' ,
      'name' => 'My Name' ,
      'date' => 'My date'
   ),
   array(
      'title' => 'Another title' ,
      'name' => 'Another Name' ,
      'date' => 'Another date'
   )
);

$this->db->insert_batch('mytable', $data); 

// Produces: INSERT INTO mytable (title, name, date) VALUES ('My title', 'My name', 'My date'), ('Another title', 'Another name', 'Another date') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:44:08.553

您不能`$this->db->insert_batch()`用于发送电子邮件（显然），因为它用于将数据插入数据库。您可以做的是改用[CodeIgniter 电子邮件类](http://codeigniter.com/user_guide/libraries/email.html)。

```
$this->load->library('email');

$this->email->from('your@email.tld', 'Your Name');
$this->email->to('your@email.tld'); // Send the email to yourself to see how it looks
$this->email->bcc('...'); // Pass in a comma-delimited list of email addresses or an array

$this->email->subject('Email Test');
$this->email->message('Testing the email class.');

$this->email->send(); 
```

在我看来，这将是使用 CodeIgniter 向大量用户发送电子邮件的最佳方式。

# mysql - 为每个需要的国家创建一个表 - mysql

> ID：10890845
> 
> 赞同：0
> 
> 时间：2012-06-05T02:32:22.550
> 
> 标签：mysql, sql

我有一个结构如下的数据库：

*   t_person（idp、idcity、姓名、地址、电话、邮编、降序、保费）
*   t_city（idcity，idcountry，城市名）
*   t_country(idcountry, 国名)

我想要一个非常通用的“实时搜索”（类似谷歌）：

```
SELECT p.name, p.addr, p.zip, p.desc, c.cityname, x.countryname, 
MATCH (p.name, p.addr, p.zip, p.desc) 
AGAINST ('fred* tall* 94620*' IN BOOLEAN MODE) as score
FROM t_person p
INNER JOIN t_city c ON c.idcity = p.idcity
INNER JOIN t_country x ON x.idcountry = c. idcountry 
WHERE MATCH (p.name, p.addr, p.zip, p.desc) 
AGAINST ('fred* tall* 94620*' IN BOOLEAN MODE)
AND x.idcountry = 43 -- (i.e USA)
ORDER BY score DESC, p.name ASC, p.premium DESC 
```

当只有 1000 - 1500 行时，此查询运行大约 0.011 秒，但是当有 30000+ 行时，它将需要大约 1.2+ 秒（我已经使用数据生成器对其进行了测试）。问题是，如果我为每个国家/地区（1 --- n）人创建一个新表，如下所示：
t_person_uk、t_person_usa、t_person_spain，每个都有 1500 行，我认为这样搜索会非常快。
PD，在进行 AJAX 调用搜索之前，我已经有 0.25 秒的超时时间。
谢谢，再见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:33:07.260

这根本不是对您问题的直接回答，但评论有点太长了。

通常，这些类型的搜索是使用全文索引搜索引擎而不是 MySQL 构建的。全文搜索引擎将为您提供比`MATCH`MySQL 标准更多的可能性。

例如，您将能够进行部分匹配、返回按距离排序的结果、自动建议和自动完成。MySQL 只会为您提供最低限度的：一个匹配函数，具有两种或三种模式。

全文索引的一个很好的例子是构建在 Lucene 之上的[Apache Solr 。](https://lucene.apache.org/solr/)

[此外， geonames](http://download.geonames.org/export/dump/readme.txt)上还提供了一个免费且非常全面的地理数据数据库。

希望这对你来说不是太离题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:18:03.203

我的第一个建议是不要使用 SQL 搜索描述列的文本，如果您担心在高流量下过于努力地工作数据库，因为我怀疑您有很多文本坐在那里。特别是因为它在您的列中处于优先级链的下游。

在考虑了一会儿之后，我几乎 100% 肯定这是您最大的处理负载。我不知道你是如何在浏览器中提供结果的，但毫无疑问，你会得到更好的结果，比如使用 python 直接查找字符串。

除此之外，我不知道该告诉你什么。你可以像你说的那样分解你的表，以编程方式访问它们，如果你要这样做，我建议制作聚合表。但我真的不喜欢这个主意。

# c# - Lambda 表达式返回错误

> ID：10890847
> 
> 赞同：4
> 
> 时间：2012-06-05T02:32:24.297
> 
> 标签：c#, lambda

这是我的代码：

```
SomeFunction(m => { 
    ViewData["AllEmployees"].Where(c => c.LeaderID == m.UserID); 
 }) 
```

它返回此错误：

并非所有代码路径都返回类型为 lambda 表达式的值`System.Func<IEnumerable>`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T02:34:25.087

假设您正在尝试返回该`.Where()`查询的结果，您需要删除这些大括号和那个分号：

```
SomeFunction(m => ViewData["AllEmployees"].Where(c => c.LeaderID == m.UserID)) 
```

如果你把它们放在那里，`ViewData[...].Where()`将被视为一个语句而不是一个表达式，所以你最终会得到一个不会在它应该返回的时候返回的 lambda，从而导致错误。

或者，如果您坚持将它们放在那里，则需要一个`return`关键字，以便语句实际返回：

```
SomeFunction(m =>
{
    return ViewData["AllEmployees"].Where(c => c.LeaderID == m.UserID);
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T02:37:33.343

您可以将 lambda 的主体编写为表达式：

```
SomeFunction(m => ViewData["AllEmployees"].Where(c => c.LeaderID == m.UserID)) 
```

或作为声明：

```
SomeFunction(m => { 
    return ViewData["AllEmployees"].Where(c => c.LeaderID == m.UserID); 
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T02:35:11.333

简单地做

```
SomeFunction(m => ViewData["AllEmployees"].Where(c => c.LeaderID == m.UserID)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:03:27.017

关于您的代码库有几个未解决的问题.. 做疯狂的假设我认为这是正确的答案：

```
 SomeFunction(
            (m) =>
            {
                return ViewData["AllEmployees"].Where(
                       (c) => { return (c.LeaderID == m.UserID); });
            }); 
```

这就是为什么：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace App
{
    public class DataSet
    {
    }

    public class someclass
    {
        public DataSet Where(Func<Person, Boolean> matcher)
        {
            Person anotherone = new Person();
            matcher(anotherone);
            return new DataSet();
        }
    }

    public class Person
    {
        public string LeaderID, UserID;
    }

    class Program
    {
        public static Dictionary<String, someclass> ViewData;

        private static void SomeFunction(Func<Person, DataSet> getDataSet)
        {
            Person thepersonofinterest = new Person();
            DataSet thesetiamusinghere = getDataSet(thepersonofinterest);
        }

    static void Main(string[] args)
    {
        SomeFunction(
            (m) =>
            {
                return ViewData["AllEmployees"].Where(
                       (c) => { return (c.LeaderID == m.UserID); });
            });
    }
    }
} 
```

# sql - 如何编写文本框以使多个值用引号分隔？

> ID：10890849
> 
> 赞同：0
> 
> 时间：2012-06-05T02:32:24.943
> 
> 标签：sql, ms-access-2007

大家，早安！

我正在试验一个 Access 2007 表单，该表单包含一个将值插入查询的文本框。我希望能够在文本框中输入多个值。这些值用逗号分隔，但也包含在引号中。文本框中的值插入到 HAVING 子句中。

代码如下所示：

例子：

```
HAVING Max([COLOR].[COLOR_CODE] In ("11111","22222")) 
```

现在我想在表单上使用文本框来插入值，但我需要处理引号。因此，我在 SELECT 语句和 HAVING 子句中都将值转换为数字。

例子：

```
HAVING Max(CLng([COLOR].[COLOR_CODE] In ([Forms].[MyForm]![txtColorCode]))) 
```

问题是当我在表单上的文本框中输入 11111 时，查询有效，但是当我输入 11111,22222 时，查询无效。

所以我有这个想法；如果我可以输入，例如： `11111,22222,33333,44444`并使用代码将值格式化为`"11111","22222","33333","44444"`

这样我就可以放弃转换/CLng，只使用带有字符串的 IN 运算符。

如何格式化或转换以便将其插入到查询中。也许在提交？

我真的很感激和输入或想法。

感谢大家。

盖伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:15:15.937

这些价值观从何而来？列表框是不可能的吗？不要忘记，您可以很容易地从列表框中添加和删除值，如果您可以引用表格，则更容易。一旦你选择了值，你就可以遍历它们来创建你需要的子句。

您将始终必须在 VBA 中构建查询，您将无法在查询设计窗口中引用这样的文本框。

# count - 查询返回不正确的计数

> ID：10890850
> 
> 赞同：0
> 
> 时间：2012-06-05T02:32:26.167
> 
> 标签：count

我有以下查询。

```
SELECT a.link_field1 AS journo, count(a.link_id) as articles, AVG( b.vote_value ) AS score FROM dan_links a LEFT JOIN dan_votes b ON link_id = vote_link_id WHERE link_field1 <> '' and link_status NOT IN ('discard', 'spam', 'page') GROUP BY link_field1 ORDER BY link_field1, link_id 
```

此查询返回列表中第一项的计数 3。应该返回的是

```
Journo | count | score
John S | 2 | 6.00
Joe B | 1 | 4 
```

但是对于第一个 John S，它返回的计数为 3。

如果我直接查询

```
select * from dan_links where link_field1 = 'John S' 
```

如我所料，我得到 2 条记录返回。我一生都无法弄清楚为什么计数是错误的，除非由于某种原因它正在计算 dan_vote 表中的记录

我怎样才能得到正确的计数，或者我的查询完全错误？

编辑：表格的内容

dan_links

```
link_id | link_field1 | link | source | link_status
1 | John S | http://test.com | test.com | approved
2 | John S | http://google.com | google | approved
3 | Joe B | http://facebook.com | facebook | approved 
```

dan_votes

```
vote_id | link_id | vote_value
1 | 1 | 5
2 | 1 | 8
3 | 2 | 4
4 | 3 | 1 
```

编辑：看起来它出于某种原因正在计算投票表中的行数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:02:10.037

当您使用条件 link_id = vote_link_id 为每个匹配记录进行左外连接时，会创建一行，例如

```
link_id | link_field1 | link | source | link_status|vote_id|vote_value
1 | John S | http://test.com | test.com | approved|1|5
1 | John S | http://test.com | test.com | approved|2|8
2 | John S | http://google.com | google | approved|3|4
3 | Joe B | http://facebook.com | facebook | approved|4|1 
```

现在，当您在 link_field1 上进行分组时，John S 的计数为 3

嵌套查询可能有效

```
SELECT journo,count(linkid) as articles,AVG(score) FROM
(SELECT a.link_field1 AS journo, AVG( b.vote_value ) AS score, a.link_id as linkid 
FROM dan_links a 
LEFT JOIN dan_votes b 
ON link_id = vote_link_id 
WHERE link_field1 <> '' 
and link_status NOT IN ('discard', 'spam', 'page') 
GROUP BY link_id 
ORDER BY link_field1, link_id) GROUP BY journo 
```

上面的查询将给出不正确的平均值为**((n1+n2)/2+n3)/2 != (n1+n2+n3)/3**，所以使用下面的查询

```
SELECT journo,count(linkid) as articles, SUM(vote_sum)/SUM(count(linkid)) 
FROM
    (SELECT a.link_field1 AS journo, SUM( b.vote_value ) AS vote_sum, a.link_id as linkid, count(a.link_id) as count_on_id
    FROM dan_links a 
    LEFT JOIN dan_votes b 
    ON link_id = vote_link_id 
    WHERE link_field1 <> '' 
    and link_status NOT IN ('discard', 'spam', 'page') 
    GROUP BY link_id 
ORDER BY link_field1, link_id) GROUP BY journo 
```

希望这可以帮助。

# foursquare - Foursquare 场地搜索和服务条款

> ID：10890851
> 
> 赞同：0
> 
> 时间：2012-06-05T02:32:45.453
> 
> 标签：foursquare

我正在使用另一个场所提供商，但想从该提供商的场所结果中搜索 Foursquare 以进行 Foursquare 签到。这是可能的还是会被认为违反了服务条款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:44:18.247

为什么不阅读[https://developer.foursquare.com/overview/community](https://developer.foursquare.com/overview/community)上的政策？

在写这个答案时，那里写的是可以用其他数据源扩展他们的结果。

**不能**同时搜索foursquare 和Google Places，然后返回它们的结果/数据的组合。

如果我正在做一些我不确定的事情，我会做的就是直接在[https://developer.foursquare.com/overview/support上询问他们](https://developer.foursquare.com/overview/support)

在最后一段他们谈论政策（在支持页面上），说你可以直接给他们发电子邮件。

# git - 如何在 Git 中恢复？

> ID：10890855
> 
> 赞同：1
> 
> 时间：2012-06-05T02:33:22.273
> 
> 标签：git, git-revert

当前的 git 日志：

```
commit foo456
Merge: foo123 bar123
Author: foo

Merge branch 'master' of ......

commit foo123
Author: foo

change b

commit bar123
Author: bar

stable version 
```

我是 foo，如果我想恢复到稳定版本（提交 bar123），我应该使用`git revert HEAD~1`or`git revert HEAD~2`吗？也就是说 Merge(commit foo456) 也是有效的 commit 吗，我有点糊涂了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:35:36.037

如果您想*丢弃*合并提交并返回`bar123`，请使用：

```
git reset --hard bar123 
```

此时，您可以再次尝试合并。

该`git revert`命令会创建一个*新*的提交，该提交会逆转先前提交的效果，但未来合并的恢复提交的存在可能会令人困惑和有问题。

# node.js - 是否可以在 mongoDB map reduce 的 map 函数中使用 node.js？

> ID：10890856
> 
> 赞同：0
> 
> 时间：2012-06-05T02:33:28.623
> 
> 标签：node.js, mongodb

我正在尝试使用 Node.js 编写 MongoDB map/reduce 作业。我有调用 map reduce 的 node.js 代码正常工作，但我需要在 mapper 方法中调用 Node.js。看起来它将映射器（和减速器）解释为 Javascript，而不是 Node.js。

有没有办法将 mapper 和 reducer 作为 Node.js 函数执行？我可以做一些技巧或解决方法来从 Javascript 调用我的 Node.js 吗？

我的代码：

```
var mongo = require('mongodb'),
  Server = mongo.Server,
  Db = mongo.Db;

var fbFeed = require('./getFeeds');

var server = new Server('localhost', 27017, {auto_reconnect: true});
var db = new Db('test', server);

var map = function () {
    fbFeed.getFbFeed(this.dbId, function(record) {
        emit(record.fbId, record);
    });
}

var reduce = function (key, values) {
    return values;
}

db.open(function (err, db) {
    if (!err) {
        db.collection('facebookToScan', function (err, collection) {
            if (!err) {
                collection.mapReduce(map, reduce, {'out': "fbClicks"}, function(err, collection) {
                });
            }
        });
    }
}); 
```

（其中 './getFeeds' 包含`getFbFeed`）

我的错误是：

```
mr failed, removing collection :: caused by :: 9014 map invoke failed: JS Error: ReferenceError: fbFeed is not defined nofile_b:1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:05:07.323

我不知道这是可能的。MongoDB 中的 M/R 在其自己的 JavaScript 环境中运行将链接到运行 node.js 的 JavaScript 环境。

# html - 清除标签左侧

> ID：10890857
> 
> 赞同：2
> 
> 时间：2012-06-05T02:33:29.880
> 
> 标签：html, css

在这个[JSfiddle 中](http://jsfiddle.net/theoryshaw/RBLsF/6/)，我试图获取“注册忘记密码？” 低于“登录”。（如下图2）

我能弄清楚如何做到这一点的唯一方法是使用。

```
 form {overflow: hidden;} 
```

...但不想这样做，因为我会切断标签的末端。（如下图2所示）

有人有其他建议吗？

**图 1：**

![在此处输入图像描述](../Images/2bed2b52aa240a5774b4f20be8b47516.png)

**图 2：**

![在此处输入图像描述](../Images/d1cea7cf7fd0ff006bc5021104ae9062.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:37:13.437

将一些填充应用到 div holidng 链接：

```
<div class="devise_links" data-original-title="" style="padding-top:30px"> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/RBLsF/7/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T04:12:00.403

您可以像这样向链接的父元素添加清除：

.devise_links { 明确：两者；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:55:40.617

您介意尝试将您的登录按钮包装在 a `div`or`p`或 any中`block level element`，然后给出 a`clear:both`吗？

# c# - C# Awesomium Web 浏览器设置 DIV 内容

> ID：10890860
> 
> 赞同：0
> 
> 时间：2012-06-05T02:33:50.763
> 
> 标签：c#, dom, awesomium

我正在使用 C# 制作一个使用 Awesomium 作为界面的程序。当程序运行时，它会生成一个列表，有时该列表可能非常大（5 - 6k 行）。此列表仅生成一次并存储在机器上。

当表单加载时，它是一个 Web 浏览器控件，它从服务器加载网页并显示它，该网页本质上是标准 GUI 的替代品。

我需要做的是获取该列表并将其显示在浏览器控件中。有一个带有 ID 的 Div，我需要在其中显示列表。

任何帮助，将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:23:25.817

您应该能够使用 javascript 和`WebControl.ExecuteJavascript()`方法来完成此操作。下面是一个示例，它将以 id 为 myDiv 的 div 为目标，并向其添加 30 个子 div 和递增计数器：

```
var script = "for (var i = 0; i < 30; i++) {" +
             "var newdiv = document.createElement('div');" +
             "var txt = document.createTextNode('This text was added to the DIV for i = ' + i + '.');" +
             "newdiv.appendChild(txt);" +
             "document.getElementById('myDiv').appendChild(newdiv); " +
             "}";

awesomiumControl.ExecuteJavascript(script); 
```

# c# - WPF 关闭除活动子窗口和主窗口之外的所有子窗口

> ID：10890868
> 
> 赞同：1
> 
> 时间：2012-06-05T02:34:55.717
> 
> 标签：c#, wpf

当我打开一个新的子窗体时，我有如下 C# WinForms 代码来关闭所有子窗体：

```
private void CloseAllActiveForms(Form[] MdiChildren)
{
    Form[] childArray = MdiChildren;
    foreach (Form childform in childArray)
    {
        childform.Close();
    }
} 
```

如何在 WPF 窗口中使用？

我尝试了下面的代码，但它会关闭所有窗口，包括父窗口和活动窗口。

```
private void CloseAllWindows()
{
    for (int intCounter = App.Current.Windows.Count - 1; intCounter >= 0; intCounter--)
    {
        Application.Current.Windows[intCounter].Close();
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T02:57:03.897

据我所知，MDI 对 WPF 的支持是有限的，所以在创建伪子窗口时尝试使用 Tag 属性：

```
Window child = new Window();
child.Tag = "mdi_child"; 
```

然后，在你的循环中，像这样修改它：

```
foreach (Window win in App.Current.Windows)
{
    if (!win.IsFocused && win.Tag.ToString() == "mdi_child")
    {
        win.Close();
    }
} 
```

请注意，要使上述解决方案起作用，所有窗口都必须具有 Tag 属性，否则将在`win.Tag.ToString()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-19T04:39:13.000

这是我在 WPF 中用来关闭程序的所有子窗口的方法，此代码位于主`window.cs`文件中，但您可以修改`if(item!=this)`以检查特定窗口：

```
foreach(Window item in App.Current.Windows)
{
    if(item!=this)
        item.Close();
} 
```

No faffing around with sub-classes or more lists (especially as the code already has a list of windows associated with it.)

If you wanted to selectively close windows then you could always modify the if statement to use a variable on the window class or check one of the pre-existing variables *(such as a the class of the parent window)* on the base window class.

# asp.net-mvc-3 - 将 mvc 3 应用程序部署到服务器的要求

> ID：10890870
> 
> 赞同：0
> 
> 时间：2012-06-05T02:35:08.817
> 
> 标签：asp.net-mvc-3, iis-7, setup-deployment

我想在 Windows Server 2008 R2 中部署应用程序。但我想知道是否需要安装 .Net Framework 4.0，因为服务器中可用的版本是 2.0？我还需要安装 MVC 框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:38:49.390

您可以使用 ASP.NET MVC3 安装程序，

或者简单地将所需的 dll 复制到 Web 应用程序的 bin 目录中

例如 System.Web.Mvc.dll、System.Web.Helpers.dll、System.Web.Razor.dll、System.Web.WebPages.dll、System.Web.WebPages.Razor.dll、System.Web.WebPages。 Administration.dll、System.Web.WebPages.Deployment.dll、Microsoft.Web.Infrastructure.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:39:33.127

您不需要安装 MVC，只有 dll 可以完成任务

有不同的方法可以做到这一点，请参阅链接

[http://msdn.microsoft.com/en-us/library/dd410407(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd410407%28v=vs.90%29.aspx)

[http://msdn.microsoft.com/en-us/library/gg286946.aspx](http://msdn.microsoft.com/en-us/library/gg286946.aspx)

[http://weblogs.asp.net/scottgu/archive/2011/01/18/running-an-asp-net-mvc-3-app-on-a-web-server-that-doesn-t-have- asp-net-mvc-3-installed.aspx](http://weblogs.asp.net/scottgu/archive/2011/01/18/running-an-asp-net-mvc-3-app-on-a-web-server-that-doesn-t-have-asp-net-mvc-3-installed.aspx)

# c++ - 我应该如何访问 Boost SHA1 哈希？

> ID：10890871
> 
> 赞同：11
> 
> 时间：2012-06-05T02:35:08.903
> 
> 标签：c++, boost, sha1

我想用它`boost::uuids::detail::sha1`来为一个大的二进制 blob 创建一个散列。

请参阅：[提升 uuid sha1](http://www.boost.org/doc/libs/1_46_0/boost/uuid/sha1.hpp)

`sha1`位于`detail`名称空间中，因此不应“依赖”。如何在不实例化对象的情况下为我的 blob 创建 SHA1 哈希`detail`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T04:29:19.280

您的选择是：

*   使用`boost::uuids::detail::sha1`，如果它在未来的版本中发生变化，然后处理它。
*   找到 sha1 的另一个实现（例如，在 Crypto++ 中），然后使用它。

# android - 将 2 个微调器值相乘

> ID：10890876
> 
> 赞同：0
> 
> 时间：2012-06-05T02:36:16.827
> 
> 标签：android, spinner, android-spinner

字符串.xml

```
 <string-array name="fruits">
       <item>Apple</item>
       <item>Banana</item>
       <item>Orange</item>
       <item>Pear</item>
       <item>Watermelon</item>
       <item>Mango</item>
       <item>Pineapple</item>
       <item>Strawberry</item>
</string-array>

<string-array name="total">
    <item>1</item>
    <item>2</item>
    <item>3</item>
    <item>4</item>
    <item>5</item>
    <item>6</item>
    <item>7</item>
    <item>8</item>
</string-array>

<string-array name="calorie">
    <item>80</item>
    <item>101</item>
    <item>71</item>
    <item>100</item>
    <item>45</item>
    <item>135</item>
    <item>80</item>
    <item>53</item>
</string-array> 
```

Java 文件：

```
 public class Fruit extends Activity implements OnClickListener, OnItemSelectedListener {
private TextView tvFruit, tvNo;
Context context=this;   
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fruit);

    tvFruit = (TextView) findViewById(R.id.tvfruit);
    tvNo = (TextView) findViewById(R.id.tvno);

    final Spinner fruits = (Spinner)findViewById(R.id.spin_fruit);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this,R.array.fruits,android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    fruits.setAdapter(adapter);
    fruits.setOnItemSelectedListener(this);

    fruits.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
    long arg3) {
            // TODO Auto-generated method stub
            String selectedItem = fruits.getSelectedItem().toString();
            tvFruit.setText(selectedItem);
        }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    });

    final Spinner num = (Spinner)findViewById(R.id.spin_no);
    ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(
            this,R.array.total,android.R.layout.simple_spinner_item);
    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    num.setAdapter(adapter1);
    num.setOnItemSelectedListener(this);

    num.setOnItemSelectedListener(new OnItemSelectedListener(){
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
                // TODO Auto-generated method stub
                String selectedItem = num.getSelectedItem().toString();
                tvNo.setText(selectedItem);
            }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

        });

    Button save = (Button) findViewById(R.id.bsave);
    save.setTextColor(Color.BLUE);
    save.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                // Get the subject details and show it in an alertdialog
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setMessage("Success");
                builder.setPositiveButton("OK", null);
                builder.setNegativeButton("View Log", new DialogInterface.OnClickListener(){

                    public void onClick(DialogInterface dialog, int which) { // this part is done for the negative button 
                                                                             // if we want it to link to new intent
                        launchIntent();
                    }

                });
                builder.create().show();
            }

            //making the "View Log" button in dialog box to go to new intent FruitLog.class
            private void launchIntent(){
                Intent i = new Intent(Fruit.this, FruitLog.class);
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }

        });

    } 
```

![因此，当用户在微调器中单击 3 个香蕉时，我想知道如何执行卡路里相乘的代码。 一旦完成计算，它应该显示 303 卡路里在](../Images/8f3b7b2e798da1130adb096e5f7708b0.png)

因此，当用户在微调器中单击 3 个香蕉时，我想知道如何执行卡路里相乘的代码。一旦完成计算，它应该在“总卡路里”文本视图中显示 303 卡路里

有人可以指导我如何进行计算编码。例如，帮我摄入 2 个苹果卡路里，剩下的我会试着弄清楚。非常感谢。这个社区非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:31:00.323

使用您现有的代码，我会尝试这样的事情：

首先，将您的`calorie`数组更改为`integer-array`. 接下来，添加：

```
public int calculateCalories() {
    int[] calorie = getResources().getIntArray(R.array.calorie);
    return Integer.parseInt((String) num.getSelectedItem()) * calorie[fruits.getSelectedItemPosition()];
} 
```

此函数应返回所选水果的数量乘以它的热量值。明确地说，您将其直接设置为 TextView ，如下所示：

```
totalTextView.setText(String.valueOf(calculateCalories())); 
```

您必须通过以`num`与`fruits`声明相同的方式声明它们来使整个类可见`tvFruit`。

# python - Python中matplotlib中的饼图

> ID：10890879
> 
> 赞同：0
> 
> 时间：2012-06-05T02:36:30.927
> 
> 标签：python

`.txt`我正在尝试从具有数据集的文件 中绘制饼图，如下所示：

```
asp: 2.11
glu: 1.11
arg: 0.99
his: 5.11
acid: 11.1
base: 2.11 
```

现在，1）我想绘制一个带有前 4 个条目的饼图，并带有适当的标签。
2）然后使用最后两个条目的另一个饼图。

我正在尝试使用以下代码，但出现错误。我的代码是：

```
from pylab import *
inp = open('c:/users/rox/desktop/xx.txt','r').read().strip().replace(': ',' ').split('\n')
for line in map(str.split,inp):
    x = line[0]
    z = line[1]
    fracs = [x]
    labels = [z]
    pie(fracs,labels=labels,explode=None,autopct='%1.1f%%,shadow=False)
    show() 
```

但此代码正在生成错误报告：无法将字符串转换为浮点数...

我需要用它`tempfile` 来绘制`.txt`文件中存在的前 4 个条目吗？

如果我想使用最后两行数据集绘制饼图，那么可以使用`slicing`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:05:28.580

**编辑：**使输入更通用，因此可以从同一个文件中读取多个图：

```
import matplotlib.pyplot as plt

def read_data(f, num_lines=1, split_on=':'):
    lines = (f.next() for i in range(num_lines))
    pieces = (line.split(split_on) for line in lines)
    data = ((a,float(b)) for a,b in pieces)
    return zip(*data)

with open("xx.txt") as inf:
    amino_names, amino_values = read_data(inf, 4)
    ph_names, ph_values = read_data(inf, 2)

fig = plt.figure(figsize=(2,1))
p1 = fig.add_subplot(1,2,1)
p1.pie(amino_values, labels=amino_names)
p2 = fig.add_subplot(1,2,2)
p2.pie(ph_values, labels=ph_names)
fig.show() 
```

结果是

![在此处输入图像描述](../Images/03228aa5ac978bcc1885a3bb1f52d70d.png)

# iphone - 图片 描述 NSLog

> ID：10890881
> 
> 赞同：0
> 
> 时间：2012-06-05T02:36:41.653
> 
> 标签：iphone, ios, xcode

当我尝试`NSLog`用这个来塑造我的形象时；

```
NSLog([images description]); 
```

这出现：

```
2012-06-05 10:31:38.801 Project1[1180:1a303] (
    "<UIImage: 0x9a52bb0>",
    "<UIImage: 0x9c89460>",
    "<UIImage: 0x9c9c720>",
    "<UIImage: 0x8e4ee70>",
    "<UIImage: 0x8e805f0>"
) 
```

我正在从 . 加载我的 UIImage 。`NSDocumentDirectory`有人可以解释一下这是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:41:24.110

It looks like your `images` object is an `NSArray` (or similar array like object) of `UIImage`s. When you `NSLog` the description of the `images` array it is listing the objects in the array and calling `description` on each of those objects. As it doesn't make sense to get a text description of an image it instead prints the object type, in this case 'UIImage', and the address of the object in memory, e.g. `0x9a52bb0`.

I'm not sure what you mean by "And how to make this into NSInteger?' It doesn't make sense to convert an image into an integer.

# c# - C# Webdriver - 上传文件（silverlight）

> ID：10890882
> 
> 赞同：0
> 
> 时间：2012-06-05T02:36:54.537
> 
> 标签：c#, selenium, webdriver

我的 C# webdriver 自动化脚本正在尝试使用 Silverlight 对象的浏览按钮上传文件。请让我知道如何使用 webdriver 上传文件。

下面的代码适用于 HTML 文件上传，但不适用于上述情况。

```
driver.FindElement(By.XPath("//input[@id='fileInput']"), WaitTime).SendKeys("\\\\...\\....\\Test.txt"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:17:50.830

WebDriver 中的文件上传方法旨在与`<input type='file'>`元素一起使用。要使用上传文件的非 HTML 机制（包括 Silverlight 和 Flash），您需要研究其他库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:47:32.933

知道有一个用于 Java 小程序的工具，我挖掘并找到了这些：

[有一个将 Selenium RC 与 Silverlight 一起使用的工具！](http://code.google.com/p/silverlight-selenium/)不知道它实际上有多好，但你可以试一试。是的，我知道它只是 Selenium RC，但你可以试试[`WebDriverBackedSelenium`](http://seleniumhq.org/docs/03_webdriver.html#webdriver-backed-selenium-rc)......

Scott Hanselman 的博客（非常易读！） - “滥用” Silverlight 可以运行`Scriptable`方法。它是为 Selenium IDE 编写的，但同样适用于`WebDriver`.

[Silverlight 的测试框架。](http://archive.msdn.microsoft.com/silverlightut)由微软。Selenium 用于网页，尝试使用 Silverlight 魔法。

# android - 组合多个字符串数组资源

> ID：10890883
> 
> 赞同：0
> 
> 时间：2012-06-05T02:37:13.350
> 
> 标签：android

我有多个不同的类别，在每个类别中我使用一个字符串资源来填充 ListView，如下所示：

```
<string-array name="list">
        <item>item1</item>
        <item>item2</item>
        <item>item3</item>
    </string-array> 
```

我这样称呼他们：

```
String[] list = getResources().getStringArray(R.array.list); 
```

如何将这些组合成一个 String[] 以用作“全部”列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:53:51.367

您可以将两个数组列表组合成一个像这样：

```
ArrayList<String> first;
ArrayList<String> second;
second.addAll(first); 
```

由于您使用 Simple Array 有多种方法可以将数组更改为 arrayList，因此您可以在网上获取它。但是，为什么您不将它们存储在 xml 文件中的单个数组中，例如将其称为 global_content。你正在为此浪费时间和记忆！！

# vba - 在 VBA 宏中使用符号 #（哈希）

> ID：10890892
> 
> 赞同：57
> 
> 时间：2012-06-05T02:39:17.303
> 
> 标签：vba, excel

`#`Excel VBA中符号的使用是什么意思？

它是这样使用的：

```
 a = b /100# 
```

我不明白`#`after 的意义是`100`什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-05T03:07:09.353

Double 的类型声明字符是数字符号 (#)。也称为*哈希*

其他类型声明字符是：

1.  整数 ％
2.  长 ＆
3.  货币 @
4.  单身的 ！
5.  双倍的 ＃
6.  字符串 $

> 不明白#这里的意义。

这意味着在计算表达式时，类型声明字符前面的数字被视为特定数据类型而不是 Variant。

看这个例子，基本是一样的。

```
Sub Sample1()
    Dim a#

    a = 1.2

    Debug.Print a
End Sub

Sub Sample2()
    Dim a As Double

    a = 1.2

    Debug.Print a
End Sub 
```

**编辑**

让我更详细地解释一下。

考虑这两个过程

```
Sub Sample1()
    Dim a As Double, b As Integer

    b = 32767
    a = b * 100

    Debug.Print a
End Sub

Sub Sample2()
    Dim a As Double, b As Integer

    b = 32767
    a = b * 100#

    Debug.Print a
End Sub 
```

**问题**：其中一个会失败。你能猜出是哪一个吗？

**Ans** : 第一个程序`Sub Sample1()`将失败。

**原因**：

在`Sample2`，当你做`b * 100#`计算的结果将是类型`Double`。由于它在 Double 的范围内，所以计算成功并将结果分配给 variable `a`。

现在`Sample1`，当您进行计算时`b * 100`，计算结果将是类型`Integer`，因为两个操作数都是整数类型。但是计算结果超出了整数存储的限制。结果会出错。

希望能帮助到你 ：）

# sql - insert select with if else condition

> ID：10890894
> 
> 赞同：2
> 
> 时间：2012-06-05T02:39:28.597
> 
> 标签：sql, sql-server, sql-server-2005

I have 2 tables, table1 and table2, and I am using

```
insert into table1 
(  Col1,
   Col2,
   Col3
) 

select 
(  ColA,
   ColB,
   ColC
)
from 
table2 
```

but the logic between Col3 and ColC is this:

```
if ColC = 'A' then Col3 = Y
else Col3 = N 
```

What's the SQL for this, I am using SQL Server 2005.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:41:18.310

You can use a `case` expression:

```
insert into table1 
(  Col1,
   Col2,
   Col3
) 

select 
   ColA,
   ColB,
   case when ColC = 'A' then 'Y' else 'N' end
   -- alternatively:
   -- case ColC when 'A' then 'Y' else 'N' end
from 
table2 
```

# python - GAE Webapp: the cost of importing a bunch of request handlers

> ID：10890895
> 
> 赞同：3
> 
> 时间：2012-06-05T02:39:30.360
> 
> 标签：python, google-app-engine, webapp2

My python GAE app's central application file looks like this:

```
import webapp2
import homepage
import user_auth
import user_confirm
import admin_user
import admin_config
import config

app = webapp2.WSGIApplication([
                                (user_auth.get_login_url(), user_auth.LoginHandler),
                                (user_auth.get_logout_url(), user_auth.LogoutHandler),
                                ("/user/confirm", user_confirm.UserConfirmHandler),
                                ("/admin/config", admin_config.AdminConfigHandler),
                                ("/admin/user/add", admin_user.AdminAddUserHandler),
                                ("/admin/user", admin_user.AdminUserHandler),
                                ("/", homepage.HomepageHandler),
                            ], debug=True) 
```

As you can see, I must import a bunch of request handlers, but for each request, only one of them is used, the other imports are just useless!
That's a big waste of memory and performance because those unnecessary imports also import other things on their own. Does Google App Engine have some "caching" mechanism or something that makes these unnecessary imports negligible? I think not.

How can I avoid them? I just haven't found out the way to import 1 Request Handler per request. If I put all the routing to app.yaml, that would work the way I want, but it makes things complex because I must write `app = webapp2.WSGIApplication(...` for every request handler file and repeat those boring urls twice (both in the python file and in app.yaml).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:04:56.367

在这里找到了方法，已经内置到 webapp2 [http://webapp-improved.appspot.com/guide/routing.html#lazy-handlers](http://webapp-improved.appspot.com/guide/routing.html#lazy-handlers)

# php - If I already have a database, what PHP cart can implement it easily?

> ID：10890897
> 
> 赞同：0
> 
> 时间：2012-06-05T02:39:44.600
> 
> 标签：php, mysql, open-source, cart

At an internship, I am tasked with setting up whatever PHP shopping cart me and my co workers think is best. I installed Magento, and it looks really nice, but it develops its own MySQL database. That's not necessarily a bad thing, but my job already invested a lot of time in implementing a system that automatically synchronizes a MySQL database with Quickbooks data. That database already has 1300+ items in it and is ready to go. Magento forums are saying that Magento is really stuck to it's own database.

Is there a solution to this? Can Magento Community be modified so it works with a database already in place? Or is there another PHP MySQL shopping cart out there that can work with item/customer database that's already in place?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:44:47.043

除非您的公司已经投入巨额资金来构建他们当前的系统，并且除非它是高度定制的，否则他们可能会从尽早承认他们可能在尝试构建一个经过重新设计的轮子时走错了方向而受益。 - 已经发明了太多次了。

我从未使用过 Magento，但快速的谷歌搜索显示他们[支持 Quickbooks](https://www.magentocommerce.com/magento-connect/ecc-quickbooks-integration-for-your-online-business.html)，而且我确信快速导入脚本可以解决他们添加到系统中的约 1300 个项目。

# jquery - jQuery : validate date

> ID：10890898
> 
> 赞同：1
> 
> 时间：2012-06-05T02:39:45.897
> 
> 标签：jquery, validation, date

I am using jQuery validation plugin '**jquery.validation.js**' to validate date data type in '**date_of_birth**' field

I want to display a custom message above the "**date_of_birth**" filed as '**Age should be minimum of 16**' .

So I have written the following customised validation code :

```
{literal}
jQuery.validator.addMethod("dob", function (value, element) {
var startDate = $('#date_of_birth').val();
var finDate = 01/03/2012
var age=Date.parse(finDate)-Date.parse(startDate);
if (age >= 16){ 
    return false;
      }
      else
     {
    return true;
     }
 }, "Age should be minimum of 16");
{/literal} 
```

custom validation rules:

```
rules: {        
date_of_birth: {
dob: true
}
} 
```

But the sad part is that it's not working.

Please help me out...

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:30:12.020

```
$.validator.addMethod("dob", function() {
    var minDate  = new Date();
    minDate.setFullYear(minDate.getFullYear() - 16);

    var dob =  $('#date_of_birth').val();
    if( dob  <= minDate)
        return true;
    return false;
}, "Please specify a correct DOB:"); 
```

和：

```
 rules: {
    date_of_birth: { required: true, dob: "date_of_birth" },
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:52:37.690

我认为[jQuery EasyDate](http://easydate.parshap.com/)正是您正在寻找的。

# objective-c - MacRuby 无法将控制器链接到新窗口 xib

> ID：10890903
> 
> 赞同：0
> 
> 时间：2012-06-05T02:40:56.840
> 
> 标签：objective-c, xcode, nswindow, macruby, nswindowcontroller

**我的设置**

*   XCode 4.3.2
*   MacRuby 0.12 (ruby 1.9.2) [universal-darwin10.0, x86_64]
    *   截至 2012 年 6 月 4 日的最新每晚
*   操作系统 10.7.3

**目标**

在 MainMenu.xib 的单独 XIB 中有一个带有一些控件的窗口，并且能够以编程方式打开该窗口。我不希望它在启动时打开。

**尝试**

1.  我制作了一个新的 xib (Woot.xib) 并在其中创建了一个窗口
2.  我创建了一个新的 Ruby 类

    ```
    class WootController < NSWindowController
        attr_accessor :window
        def windowNibName
             return 'Woot'
        end
    end 
    ```

3.  我试图将 Woot.xib 中的 File's Owner 的类设置为 WootController，但发现它**不会**在`< NSWindowController`我的类定义中。如果我`< NSWindowController`从类定义中删除 ，则会填充出口，并且我可以将 XIB 中的窗口链接到我班级中的窗口出口。
4.  从我的 AppDelegate 的`applicationDidFinishLaunching`方法内部，我尝试过

    *试图*

    ```
    newWind = WootController.new
    puts newWind #outputs "#<AddCredentialsDialog:0x400191180>"
    newWind.window().makeKeyAndOrderFront(self) # results in no method error for nil 
    ```

    *尝试 2*

    ```
    newWind = WootController.initWithWindowNibName 'AddWindow'
    puts newWind #outputs "#<AddCredentialsDialog:0x400191180>"
    newWind.window().makeKeyAndOrderFront(self) # results in no method error for nil 
    ```

**问题**

1.  为什么我的任何一个尝试都不起作用？我已经准备好在 macruby 和使用 NSWindowController 上可以找到的所有内容。
2.  `WootController`如果我继承了我的类，为什么我不能链接它`NSWindowController`
3.  **除了将其全部放入 MainMenu.xib 之外，**还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:32:30.510

此解决方案有效

```
nib = NSNib.alloc.initWithNibNamed('Woot', bundle: nil)
newWind = WootController.new
nib.instantiateNibWithOwner(newWind, topLevelObjects:nil)
newWind.showWindow(self) 
```

一些注意事项

1.  在 Macruby 中，如果方法签名有命名参数，即使您只指定 nil 或方法签名不匹配并出现错误，您也**必须使用它们。**`no method`

    IE。`obj.foo('hello', to_whom: nil)`不一样`obj.foo('hello')`

2.  如果有命名参数，则**必须**使用括号。

    IE。**这** `obj.foo('hello', to_whom: nil)`会起作用，**不是这个** `obj.foo 'hello', to_whom: nil`

# ruby-on-rails-3 - how to write search method code to search more than one id at a time

> ID：10890905
> 
> 赞同：0
> 
> 时间：2012-06-05T02:41:16.573
> 
> 标签：ruby-on-rails-3, solr, sunspot-rails, sunspot-solr

In my project am trying to display products based on user choice. User can check which department(women, men and kids) and category (dress, tops, tees etc) they wish to see. For this am using check box. If user checks(selects) only women departments they all products which belongs to women will be displayed. If user checks(selects) both women department and dress category then the products which belongs to both women department and dress category will be displayed. If user selects both women and men departments and shoes category then all products which belongs to women and men department and shoes category will be displayed. To achieve this am using solr (sunspot gem). My question is can we pass multiple ids for department_id and category_id at the same time.

For example is it possible to

```
@search_res=ProductDetail.search do
  with :department_id, 1,2,3                  
  with :category_id, 1,2,3,4, etc (may be present or absent)           
end 
```

If it is possible please tell me how to do? Please give me syntax? Please help me.

**Update**

Thank you Salil for your answer, but department id and category id's are not static in this case. I will came to only when user selects at runtime. Means category_id and department_id's are generic. How to achieve this. I want something like this

```
@search_res=ProductDetail.search do
  with :department_id, params[:deptid]                  
  with :category_id,   params[:catid]         
end 
```

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:13:24.247

这里是：

```
@search_res=ProductDetail.search do
  all_of do
    with :department_id, [1,2,3]                  
    with :category_id, [nil,1,2,3,4] # I am not sure - but category_id nil should be to denote its absence 
  end
end 
```

参考更多信息： [太阳黑子自述文件](https://github.com/sunspot/sunspot#readme)

# python - Django regroup grouper

> ID：10890910
> 
> 赞同：1
> 
> 时间：2012-06-05T02:42:01.050
> 
> 标签：python, django, django-templates

I have successfully implemented the regroup call in my template to order missed donations by a pickup_id. The goal was to display all the routes where a a missed donation occured, and a list of all the names underneath the route name. Pickup routes can have the same name so I was grouping by pickup_id. When I do that and call {{ route.grouper }} it returns the ID of the pickup of course. How can I call the field 'route' which displays the route name from grouper?

I was trying things like this...

```
{{ route.grouper.route }} 
{{ route.route.grouper }} 
```

view

```
missed_routes = Donor.objects.filter(missed='YES').order_by('pickup_id') 
```

template

```
{% regroup missed_routes by pickup_id as missed_pickups %}
{% for route in missed_pickups %}
    <p>{{ route.grouper }}</p>
    <ul>
        {% for donor in route.list %}
            <li>{{ donor.last_name }}</li>
        {% endfor %}
    </ul>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:25:31.730

Grouper 只是一个字符串，因此您必须从路由实例中获取名称。不确定它会起作用，但尝试`{{ route.list.0.pickup.name }}`（我假设拾取是带有名称字段的拾取模型的外键）而不是`{{ route.grouper }}`

# erlang - What OTP behaviors should I use for such module?

> ID：10890911
> 
> 赞同：1
> 
> 时间：2012-06-05T02:42:07.347
> 
> 标签：erlang, erlang-otp

I have simple erlang module and I want to rewrite it based on OTP principles. But I can not determine what opt template I should use.

Module's code:

```
-module(main).

-export([start/0, loop/0]).

start() -> 
    Mypid = spawn(main, loop, []),
    register( main, Mypid).

loop() ->
    receive
        [Pid, getinfo] -> Pid! [self(), welcome],
            io:fwrite( "Got ~p.~n", [Pid] ),
            // spawn new process here
            loop();
        quit -> ok;
        X ->
            io:fwrite( "Got ~p.~n", [ X ] ),
            // spawn new process here
            loop()
    end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:01:10.313

gen_server would be fine.

Couple things:

*   it is a bad practice to send message to yourself
*   messages are usually tuples not lists because they are not dynamic
*   despite your comment, you do not spawn the new process. Call to loop/0 enters the same loop.

Gen_server init would hold your start/0 body. API calls sequence and proxy your calls via gen_server to handle_calls. To spawn new process on function call, add spawn function to the body of desired handle_call. Do not use handle_info to handle incoming messages -- instead of sending them call the gen_server API and 'translate' your call into gen_server:call or cast. e.g.

```
start_link() ->
    gen_server:start_link({local, ?MODULE}, ?MODULE, [], []).

init(_) ->
    {ok, #state{}}

welcome(Arg) ->
   gen_server:cast(?MODULE, {welcome, Arg}).

handle_cast({welcome, Arg},_,State) ->
  io:format("gen_server PID: ~p~n", [self()]),
  spawn(?MODULE, some_fun, [Arg]),
  {noreply, State}

some_fun(Arg) ->
  io:format("Incoming arguments ~p to me: ~p~n",[Arg, self()]). 
```

I have never compiled above, but it should give you the idea.

# c# - 如何使用fluent-NHibernate映射没有主键的相关表

> ID：10890919
> 
> 赞同：1
> 
> 时间：2012-06-05T02:44:00.060
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

对我来说看起来很常见：我有两个表：文档：dID (pk, int), dName(varchar)

和 document_options：dID (int)、oType(int)、oValue(varchar)

我想要一个带有属性 Options 的类 Document（一个 DocumentOption 类的列表）

由于 document_options 没有 PK 我不能使用 HasMany，而且该表中的行看起来也不像“真实”实体......

我看到了一种为文档选项生成自动编号键并使用 HasMany 进行映射的方法，或者可能创建一个复合 ID，但我想知道是否有更好的选项我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:06:17.130

在这种情况下，`DocumentOptions`是一个值对象，因为它没有自己的身份，并且在它所属的文档之外没有任何意义。因此，您将使用`Component`将集合属性映射到值对象。

```
public class Document : Entity // don't worry about Entity; it's a base type I created that contains the Id property
{
    public virtual string Name { get; set; }

    public virtual IList<DocumentOptions> Options { get; protected set; }

    public Document()
    {
        Options = new List<DocumentOptions>();
    }
}

public class DocumentOptions
{
    public virtual int Type { get; set; }

    public virtual string Value { get; set; }
} 
```

和映射：

```
public DocumentMap()
{
    Table("documents");

    Id(c => c.Id)
        .Column("dId")
        .GeneratedBy.HiLo("10");

    Map(c => c.Name)
        .Column("dName");

    HasMany(c => c.Options)
        .Component(c =>
                       {
                           c.Map(c2 => c2.Value).Column("oValue");
                           c.Map(c2 => c2.Type).Column("oType");
                       })
        .Table("document_options")
        .KeyColumn("dId")
        .Cascade.AllDeleteOrphan();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:10:21.167

如果我理解正确，我必须将选项映射为组件列表：

```
HasMany(x => x.DocumentOptions)
    .Table("document_options")
    .KeyColumn("dID")
    .Component(c => {
            c.Map(x => x.Option, "oID");
            c.Map(x => x.Value, "oValue");
    })
    .Fetch.Subselect(); //This type of join isn't strictly needed, is used for SQL optimization 
```

仅供参考：

```
public class Options {
    public virtual int Option { get; set; }
    public virtual int Value { get; set; }
}

public class Document {
    public virtual int ID { get; set; }
    public virtual String Name { get; set; }
    public virtual IList<DocumentOption> DocumentOptions { get; set; }
} 
```

# c# - C# .net 协议缓冲区 - protobuf-net 支持序列化对象值字典吗？

> ID：10890922
> 
> 赞同：10
> 
> 时间：2012-06-05T02:44:36.653
> 
> 标签：c#, protocol-buffers, protobuf-net

我是协议缓冲区的新手，我正在为 VS2010 使用 protobuf-net。从我在这里读到[的协议缓冲区](https://stackoverflow.com/questions/4194845/dictionary-in-protocol-buffers)中的字典，protobuf 似乎不能序列化具有对象类型作为值的字典。但在他的网站上，我读到了这个：

> 类型注释
> 
> 支持的：
> 
> 自定义类： 被标记为数据契约 具有 Silverlight 的无参数构造函数： 是公共的许多常见原语等单维数组： T[] List / IList Dictionary / IDictionary 任何实现 IEnumerable 并具有 Add(T) 方法的类型code assumes that types will be mutable around the elected members. 因此，不支持自定义结构，因为它们应该是不可变的。

这似乎是受支持的。

我可以像这样成功编译对象列表：

```
message ValuesObject {
    optional int32 SomeVal = 1;
    repeated SomeClass ListOfSomeClassTypes = 2;
} 
```

这适用于`List<SomeClass>`. 为什么我不能使用 protobuf-net a 进行序列化`Dictionary<int, SomeClass>`？序列化 a 的消息会是什么样子`Dictionary<int, SomeClass>`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T06:46:38.053

A`Dictionary<int,SomeClass>`完全可以使用 protobuf-net 进行序列化。Protobuf-net在代码优先工作时工作*最简单*，因此：*只需`Dictionary<int,SomeClass>`在您的模型中添加一个。*您根本*不需要使用 .proto - 主要用于跨平台目的。.proto 规范没有字典的概念，但如果您*需要*使用 .proto 模式，则将其序列化为：

```
message KeyValuePairInt32SomeClass {
    required int32 Key = 1;
    required SomeClass Value = 2;
} 
```

用字典作为

```
repeated KeyValuePairInt32SomeClass YourDictionary = [n]; 
```

# php - 如何将多行输出传输到另一个 php 文件以处理数据？

> ID：10890924
> 
> 赞同：0
> 
> 时间：2012-06-05T02:44:39.003
> 
> 标签：php, javascript

```
<form name="myForm" action="doControlAcc.php"  method="post" onsubmit="return validateForm(this);">
        <table cellpadding="0" cellspacing="0" border="20" class="display" id="acc" width="200">
            <thead>
            <tr><h2>Accessories summary</h2></tr>
            <tr>
                <th>Type</th>
                <th>Currently - Ex Factory</th>
                <th>Minimum Required Stock</th>
                <th>Update by</th>
                <th>Last update</th>
                <th>Re-Stock Amount</th>
                <th>Stock Out</th>

            </tr>
            </thead>
            <tbody>
               <?php
               $accessories = array()
               $query  = "SELECT description, current_stock, min_required_stock, c_ex_factory, last_update from Accessories”;

                $result= mysqli_query($link, $query) or die(mysqli_error($link));      
                $row = mysqli_fetch_array($result);

                while($row = mysqli_fetch_array($result)){ 
                    $order = $row['c_ex_factory'] - $row['min_required_stock'];
                    if ($order < 0){
                        $order = $row['min_required_stock']-$row['c_ex_factory'];
                        $color = "#FF0000";
                    }else{
                        $order = 0;
                        $color = "#00FF00";
                    }

                ?>
            <tr>
                <td name="accessories[]" id="accessories"   value=”&lt;?php echo $row['description'] ?>” <?php echo in_array($row['description', $ accessories) > <?php echo $row['description']; ?> </td>
                <td align="center" name="accessories[]"  id="accessories"   value=”&lt;?php echo $row[''c_ex_factory '] ?>” <?php echo in_array($row[''c_ex_factory ', $ accessories) > <?php echo $row['c_ex_factory']; ?> </td>
                <td align="center" name="accessories[]"  id="accessories"   value=”&lt;?php echo $row[''min_required_stock '] ?>” <?php echo in_array($row[''min_required_stock ', $ accessories) > <?php echo $row['min_required_stock']; ?> </td>
                <td align="center" name="accessories[]"  id="accessories"   value=”&lt;?php echo $row[' name '] ?>” <?php echo in_array($row[' name ', $ accessories) > <?php echo $row['name']; ?> </td>
                <td align="center" name="accessories[]"id="accessories"   value=”&lt;?php echo $row['description'] ?>” <?php echo in_array($row['description', $ accessories) > <?php echo $row['up_when']; ?> </td>
                <td align="center" name="accessories[]"  bgcolor="<?php echo $color; ?>" id="accessories" <?php echo in_array($row[' re_stock ', $ accessories) > <input type="text" size="5" name="re_stock" value=" <?php echo $order ?>"/> </td>
                <td align="center" name="accessories[]"id="accessories"   <?php echo in_array($row[' out_stock ', $ accessories) > <input type="text" size="5" name="out_stock" value ="0"/></td>                    
            </tr>

                <?php

                }

                ?>

               <tr>
                   <td> </td> 
                   <td>                         </td> 
                   <td></td> <td></td> <td></td> 
                <td><button  data-theme="b" id="submit" type="submit">Send order</button></td>
            </tr>
            </tbody>

        </table>

    </form> 
```

您好，我是网络编程新手。上面的代码将从数据库中获取数据以在 PHP 中创建一个表，然后它将用户输入的缺货和补货发送到 doControlAcc.php 文件。我面临的问题是我需要创建多个输入行，以便用户可以为不同的产品输入缺货和补货。而且我不知道如何在填写表格后将这些多行传递给 doControlAcc.php 文件。（即如何访问 doControlAcc.php 中的附件数组？）。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:50:49.860

这可能不是最好的方法，但您始终可以使用会话变量。我不太了解您正在编写的程序，所以我不能说会话是否足够安全，但是如果您想使用会话，请执行以下操作：

在文件的开头：

```
<?php
    session_start();
?> 
```

稍后，当变量全部设置好时：

```
$_SESSION['accessories'] = $accessories; 
```

要在另一个代码文件中访问它，您必须在每个代码文件中启动如上所示的会话。然后，就这样做；

```
$accessories = $_SESSION['accessories']; 
```

# python - Python OpenCv 给出错误 'cv2.cv.cvseq' 对象没有属性 'total'

> ID：10890931
> 
> 赞同：0
> 
> 时间：2012-06-05T02:45:44.277
> 
> 标签：python, opencv, python-2.7, edge-detection, hough-transform

我在网上寻找一些 Python 中的图像边缘检测代码，发现了一些我想看的有趣的东西。不幸的是，我不断收到此错误：**'cv2.cv.cvseq' 对象没有属性'total'**

出错的代码行是

```
lines = HoughLines2( dst, storage, CV_HOUGH_STANDARD, 1, CV_PI/180, 100, 0, 0 ); 
```

整个代码可以选择在 Hough Standard 和 Hough Probabilistic 之间切换，当我将其设置为使用概率方法（因此不需要“lines.total”代码段）它运行良好，所以我相当确定我有我需要安装和导入的所有东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:49:21.747

我不知道你为什么使用旧的 'cv' 版本，而新的 'cv2' 版本非常简单，所有对象都以 python 列表或 numpy 数组的形式返回，从用户的角度来看，这很容易处理。

HoughLines 函数的输出是 numpy 形状数组（1，行数，2）和（1，行数，4）。你可以做任何你想做的事情，因为你手头有所有的 numpy 函数。

这是检测线的示例，与您提到的相同，即在霍夫标准和霍夫概率之间切换： [houghlines.py](https://github.com/abidrahmank/OpenCV2-Python/blob/master/Official_Tutorial_Python_Codes/3_imgproc/houghlines.py)

以下是我使用该代码获得的结果：

霍夫标准：

![在此处输入图像描述](../Images/c4d85f8ea6ad74f9b34e2ba14fcb00f3.png)

霍夫概率：

![在此处输入图像描述](../Images/9a0c518fb4f6fea851346829b27a50ba.png)

当然，检测到的线取决于您尝试的参数值。因此，根据需要更改参数值并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:59:11.080

他们在 cv2 中停止了 cvseq。opencv 2.3.1 中没有模块 cv2.cv.cvseq

你应该使用

```
lines = cv2.HoughLines(dst, 1, CV_PI/180, 100, 0) 
```

[http://opencv.itseez.com/modules/imgproc/doc/feature_detection.html?highlight=houghlines#cv2.HoughLines](http://opencv.itseez.com/modules/imgproc/doc/feature_detection.html?highlight=houghlines#cv2.HoughLines)

cv2 库更加用户友好、快速和有效。您应该继续使用 OpenCV 2.3.1 或 2.4.0。如果您在安装 OpenCV 2.3.1 时遇到任何问题 - [http://jayrambhia.wordpress.com/2012/05/02/install-opencv-2-3-1-and-simplecv-in-ubuntu-12-04-precise -pangolin-arch-linux/](http://jayrambhia.wordpress.com/2012/05/02/install-opencv-2-3-1-and-simplecv-in-ubuntu-12-04-precise-pangolin-arch-linux/)

# ruby-on-rails - 使用 rspec 通过 should_receive 测试 ActionMailer

> ID：10890935
> 
> 赞同：3
> 
> 时间：2012-06-05T02:46:54.030
> 
> 标签：ruby-on-rails, rspec, rspec2, rspec-rails

我有一个这样的 RSpec 测试：

```
it "should ..." do
  # mailer = mock
  # mailer.should_receive(:deliver)
  Mailer.should_receive(:notification_to_sender)#.and_return(mailer)

  visit transactions_path
  expect do
    page.should_not have_css("table#transactions_list tbody tr")
    find('#some_button').click
    page.should have_css("table#transactions_list tbody tr", :count => 1)
  end.to change{Transaction.count}.by(1)
end 
```

如果我删除顶部的注释部分，则测试通过。但是随着注释部分的到位（我希望如何编写它），测试失败了。

我从网上的一些谷歌搜索中得到了评论部分，但我真的不明白它在做什么或为什么会修复它。如果没有这个，似乎应该有一种更清洁的方法来测试电子邮件。

任何人都可以解释一下吗？谢谢！

我正在使用 rails 3 和 rspec-rails 2.10.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:46:04.610

我认为您希望 Mailer 的实例接收 notification_to_sender 而不是类。来自 Rails API

> 您永远不会实例化您的邮件程序类。相反，您的交付实例方法会自动包装在以单词 Deliver_ 开头的类方法中，后跟您要交付的邮件方法的名称。上面定义的 signup_notification 方法是通过调用 Notifier.deliver_signup_notification 来传递的。

因此我会使用

```
Mailer.any_instance.should_receive(:notification_to_sender) 
```

此外，如果您需要获取最后发送的消息，请使用

```
ActionMailer::Base.deliveries.last 
```

我认为这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T03:48:18.277

你可能会调用`Mailer.notification_to_sender.deliver`你的控制器，或者更好的是，一个后台工作。我猜 notification_to_sender 可能也需要一个参数。

无论如何，当您在 Mailer 上调用该方法时，您将返回一个包含该方法`notification_to_sender`的实例。如果您只是在不调用的情况下进行操作，则可以在评论中运行您所拥有的内容，一切都会好起来的。我猜你也在打电话。`Mail::Message``deliver``Mailer.notification_to_sender``deliver``deliver`

在这种情况下，您的失败消息将类似于

```
NoMethodError:
  undefined method `deliver' for nil:NilClass 
```

这是因为`nil`大部分时间是 Ruby 的默认返回值，Rails 也继承了它。如果不指定`mailer = mock`and`.and_return(mailer)`部分，当控制器在测试上下文中执行时，notification_to_sender 将返回 nil 并且控制器将尝试调用`deliver`该 nil 对象。

您注释掉的解决方案是模拟出`notification_to_sender`的返回值（通常`Mail::Message`），然后期望`deliver`在其上调用该方法。

# git - 几个 git reset --soft HEAD 会发生什么^^

> ID：10890936
> 
> 赞同：-2
> 
> 时间：2012-06-05T02:46:59.750
> 
> 标签：git, github

> **可能重复：**
> [有没有办法撤销“git revert head”的影响？](https://stackoverflow.com/questions/3662543/is-there-any-way-to-undo-the-effects-of-git-revert-head)

错误地，我搞砸了我的 GIT。几次我执行了 git reset --soft HEAD^^ & 然后提交了我的更改。我从不关心这个命令的作用！

就这样开始了；我创建了我的本地分支，然后选择更改。后来我跟着 git reset --soft HEAD^^ & 然后每次都是本地提交。

我才意识到我做错了！

谁能解释这个命令的作用？对我的代码有什么影响吗？我的 HEAD 到底应该指向哪里？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:44:43.843

只需查看`git reflog`并找到您想要访问的原始 HEAD（引用为`HEAD@{0}`etc.）并执行`git reset --hard HEAD@{n}`

并尽量运行幂等命令。避免`HEAD~`等，如果您使用，请确保您不只是随机重新运行它们。

# java - 在 java 中附加到文本文件时遇到问题。可以创建 .txt 文件并添加数据，但会被覆盖

> ID：10890937
> 
> 赞同：1
> 
> 时间：2012-06-05T02:46:59.983
> 
> 标签：java, swing, file-io, io

好的，首先......是的，这是一个家庭作业问题。我被困住了。我已经能够创建 .txt 文件并将数据从 GUI 文本字段保存到其中。只要我不退出 GUI，它将继续添加到文件中。一旦我再次启动它，下次我保存任何内容时，整个文件都会被覆盖（单击 GUI 上的保存按钮）。我想做的是：

-从 GUI 文本字段输入数据 -单击保存按钮（创建文件并应该将数据附加到 .txt 文件） -能够从文件读取回面板 -能够关闭和重新打开 GUI 并根据需要附加 .txt 文件

我很接近，但我正在做一些我害怕的愚蠢的事情。下面是我的 GUI、CreateTextFile 和 ReadTextFile 的 java 代码

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;

import javax.swing.*;

public class DonorGUI extends JFrame
{

    // Components
    private JPanel panel;
    private JTextArea results;
    private JButton entryButton;
    private JButton exitButton;
    private JButton clearButton;
    private JButton saveButton;
    private JButton openButton;
    private JTextField donorField;
    private JTextField charityField;
    private JTextField pledgeField;

    //create variables
    String[] donorName = new String[20];
    String[] charityName = new String[20];
    double[] donationAmt = new double[20];
    int i = 0;

    // Constants for the window size
    private final int WINDOW_WIDTH = 750;
    private final int WINDOW_HEIGHT = 525;

    //Constructor
    public DonorGUI(){

        // Set the title.
        setTitle("Wounded Warrior Donation Tracker.");

        // Specify what happens when the close button is clicked.
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Build the panel that contains the other components.
        buildPanel();

        // Add the panel to the content pane.
        add(panel);

        // Size and display the window.
        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        setVisible(true);
    }

    //The buildPanel method creates a panel containing other components.
    private void buildPanel(){

        // Create labels to display instructions.
        JLabel message1 = new JLabel("Name of the Donor:");
        JLabel message2 = new JLabel("Name of the Charity:");
        JLabel message3 = new JLabel("Amount of the Pledge:");

        //instantiate the results area
        results = new JTextArea(25,60);
        results.setEditable(false);
        results.setWrapStyleWord(true);
        results.setLineWrap(true);
        results.setBorder(BorderFactory.createLoweredBevelBorder());

        // Create text fields to receive user input
        donorField = new JTextField(10);
        charityField = new JTextField(10);
        pledgeField = new JTextField(10);

        //create the user buttons to cause action
        entryButton = new JButton("Enter Donation.");
        entryButton.addActionListener(new EntryButtonListener());
        exitButton = new JButton("EXIT");
        exitButton.addActionListener(new ExitButtonListener());
        clearButton = new JButton ("Clear Fields");
        clearButton.addActionListener(new ClearButtonListener());
        saveButton = new JButton ("Save");
        saveButton.addActionListener(new SaveButtonListener());
        openButton = new JButton ("Open");
        openButton.addActionListener(new OpenButtonListener());

        // Create a panel.
        panel = new JPanel();
        panel.setBackground(Color.orange);

        //set the LayoutManager
        panel.setLayout(new FlowLayout());

        // Add the labels, text fields, and button to the panel.
        panel.add(message1);
        panel.add(donorField);
        panel.add(message2);
        panel.add(charityField);
        panel.add(message3);
        panel.add(pledgeField);
        panel.add(results);
        panel.add(entryButton);
        panel.add(clearButton);
        panel.add(saveButton);
        panel.add(openButton);
        panel.add(exitButton);      
    }
    private class EntryButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            donorName[i] = donorField.getText();
            charityName[i] = charityField.getText();
            if (donationAmt(pledgeField.getText())) {
                  donationAmt[i] = Double.parseDouble(pledgeField.getText());
            }else{
                donorField.setText("");
                charityField.setText("");
                pledgeField.setText("");
            }
            results.append(donorName[i]+" "+charityName[i]+" "+donationAmt[i]+"\n ");
            donorField.setText("");
            charityField.setText("");
            pledgeField.setText("");
            i++;
        } 
    }
    public boolean donationAmt(String amount) {

        if(amount==null || amount=="" || amount.length()<1){  //checking for empty field
            JOptionPane.showMessageDialog(null, "Please enter amount pledged");
            return false;
        }
        for(int i = 0; i < amount.length(); i++){  //verifying dollar amount entered as number
                if (!Character.isDigit(amount.charAt(i)) && amount.charAt(i)!='.'){ 
                    JOptionPane.showMessageDialog(null, "Invalid input.");
                    return false;
                } 
        }
        return true;

    }  
    private class ClearButtonListener implements ActionListener {

        public void actionPerformed (ActionEvent e) {
            donorField.setText("");
            charityField.setText("");
            pledgeField.setText("");
            }
    }
    private class ExitButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    }
    private class SaveButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            CreateTextFile cr = new CreateTextFile();
            cr.openFile();
            cr.addRecords(donorName, charityName, donationAmt);
            cr.closeFile();

            JavaDBClass db = new JavaDBClass();

        }

    }
    private class OpenButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            ReadTextFile read = new ReadTextFile();
            read.openFile();
            DonorGUI donor = read.readRecords();
            read.closeFile();           
            JavaDBClass db = new JavaDBClass(donor);
            for(int i = 0;i<donor.donationAmt.length;i++){

                try {
                    results.append(db.showTable()[i]+"\n");
                } catch (SQLException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

            }
        }

    }

    /* Application method */
    public static void main(String[] args){

        DonorGUI rpc = new DonorGUI();
    }
} 
```

创建文本文件 JAVA 代码：

```
/** This will create a text file based on user input and save it as donations.txt.
 * 
 */
import java.io.FileNotFoundException;
import java.util.Formatter;
import java.util.FormatterClosedException;
import java.util.NoSuchElementException;

public class CreateTextFile {

    //object that outputs text to a file
    private Formatter output;

    //try opening a file
    public void openFile(){

        try
        {
            output = new Formatter("C:/PRG421_Data/donations.txt");
        }
        catch (SecurityException securityException)
        {
            System.out.println("You cannot write to this file.");
        }
        catch (FileNotFoundException notFoundException)
        {
            System.out.println("You couldn't open or find the file.");
        }

    }
    //try writing to the file
    public void addRecords(String[] donor, String[] charity, double[] donation){

                try{
                     for (int j=0; j<donor.length; j++) {
                         if (donor[j] != null) {
                            output.format("\n%s %s %.2f",donor[j],charity[j],donation[j]);

                           }
                     }
              }

              catch (FormatterClosedException formatterClosedException){

                     System.out.println("You couldn't write to this file.");

              }

              catch (NoSuchElementException elementException){

                     System.out.println("Invalid Input.");

              }

       }
    //try closing the file
    public void closeFile(){
        if(output!=null)
            output.close();
    }
} 
```

阅读文本文件 JAVA 代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ReadTextFile {

    private Scanner input;

    //try to open the file
    public void openFile(){
        try{
            input = new Scanner(new File("C:/PRG421_Data/donations.txt"));
        }
        catch (FileNotFoundException fileNotFoundException)
        {
            System.out.println("File not found.");
            System.exit(1);
        }
    }
    //try to read from the file
    public DonorGUI readRecords(){

        DonorGUI gui = new DonorGUI();

        while(input.hasNext())
        {
            for(int j = 0;j<20;j++){
            gui.donorName[j] = input.next();
            gui.charityName[j] = input.next();
            gui.donationAmt[j] = input.nextDouble();
            }
        }
        return gui;

    }
    //try to close the file
    public void closeFile(){
        if(input!=null)
            input.close();

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T02:55:16.063

代替

```
 output = new Formatter("C:/PRG421_Data/donations.txt"); 
```

利用

```
output = new Formatter(new FileOutputStream("C:/PRG421_Data/donations.txt", true)); 
```

参数表示`true`追加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T02:52:04.420

```
output = new Formatter("C:/PRG421_Data/donations.txt"); 
```

AFAIU 这将覆盖现有的`File`. 而不是 a `String`，构造函数需要`OuputStream`已[打开的 a 来追加](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29)。

# objective-c - Objective-c中函数的声明和定义

> ID：10890939
> 
> 赞同：0
> 
> 时间：2012-06-05T02:47:09.710
> 
> 标签：objective-c, xcode4.3

我在 xcode4.3 中使用的最常见的功能之一是右键单击并转到函数的定义和/或声明。

有时我想知道属性的类型。显然我需要看到声明。我单击定义，它转到没有帮助的@synthesize 行。

有时我想知道一个函数是如何定义的，我点击定义，它进入声明，没有简单的方法去定义。

这有什么意义吗？为什么他们没有声明和定义？如果您仍然单击定义，您会去哪里？声明还是定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:18:01.367

不会控制左键单击将您带到定义。可能是圆柱体左键双击，我现在不在我的 Mac 上，但其中一个将我带到了定义祝你好运

# sql - 如何仅获取列名作为以下示例？

> ID：10890940
> 
> 赞同：0
> 
> 时间：2012-06-05T02:47:19.550
> 
> 标签：sql

目前，我有一串列名，如下所示（这个字符串是在存储的 pro 中计算的，列名是从几个表中获得的）：

```
@str = 'select FieldName1, FieldName2, FieldName3' 
```

在存储中，我该如何返回没有数据的数据表并且@str 是列名列表？我试图这样查询：

```
exec (@str) 
```

但它需要桌子。但我不想放入表，因为它会查询以获取数据，并且需要很长时间才能完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:50:32.810

在每个列名前面加上“null”，如下所示：

```
select null as FieldName1, null as FieldName2, null as FieldName3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:56:47.690

应用没有匹配数据的条件，例如

**编辑**：

感谢**@Brandon Moore**：

```
SELECT column1, column2
FROM   myTable
WHERE  1= 0 
```

# javascript - Javascript 框阴影

> ID：10890946
> 
> 赞同：2
> 
> 时间：2012-06-05T02:48:46.653
> 
> 标签：javascript, css

我有一个预览框阴影的框。用户输入长度、模糊、扩散和颜色（十六进制）。到目前为止，我有这个样式的输出，但它显然不起作用。

```
document.getElementById('jj_preview3').style["boxShadow"] = jj_input6 + 'px' + jj_input7 + 'px' + jj_input8 + 'px' + jj_input9 + '#' + jj_input10; 
```

*   `jj_input6`= 水平长度
*   `jj_input7`= 垂直长度
*   `jj_input8`= 蓝色半径
*   `jj_input9`= 传播
*   `jj_input10`= 阴影颜色

我必须进行哪些更改才能使上面的 javascript 代码片段正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:56:11.557

如果您放入空格，它应该可以工作。最后一个字符串文字中还缺少 'px' 。

```
document.getElementById('jj_preview3').style['boxShadow'] = jj_input6 + 'px ' + 
    jj_input7 + 'px ' + jj_input8 + 'px ' + jj_input9 + 'px #' + jj_input10; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:48:53.890

仅供将来参考：

```
 var someVariable = document.getElementById("someId")
 someVariable.style.boxShadow = "5px 5px 1.2em black"; 
```

注意：**1.2em**是模糊效果，也可以用**px**，也可以一起省略。

# jquery - 带有谷歌地图的 JQuery FancyBox

> ID：10890948
> 
> 赞同：4
> 
> 时间：2012-06-05T02:48:50.403
> 
> 标签：jquery, html, css, drupal-6, fancybox

我可以在 div 中使用 Drupal 代码打印地图。我希望这张地图出现在一个精美的盒子里并隐藏在网站上。我设法做到了（fancybox 工作正常），但是地图没有正确显示 - 没有导航，地图内只有灰色的空白区域（尽管有谷歌徽标）。有谁知道这里可能出了什么问题？我想可能是ID只渲染一个元素，所以它只渲染背景，其余的被忽略，但老实说我不知道​​（改用类）。任何建议表示赞赏。谢谢

我的代码：

```
<script type="text/javascript">
    $(document).ready(function() {

    $("a#inline").fancybox({
    'hideOnContentClick': true,
    'overlayColor'      : '#ccffee',
    'overlayOpacity'    : 0.8
    });
});

</script> 
```

显示地图的链接：

```
<a id="inline" href="#mapcontainer" >
Show Map
</a> 
```

打印地图的实际 Div（设置为可见时完美工作）

```
<div style="display:none">
<div id="mapcontainer">
<?php print $node->content['field_maploc']['field']['items']['#children'] ?> </div></div> 
```

PHP 代码生成以下 html：

```
<div style="width: auto; height: 400px;" id="openlayers-container-openlayers-map-auto-id-0" class="openlayers-container openlayers-container-preset-question_map"> <div style="width: auto; height: 400px;" id="openlayers-map-auto-id-0" class="openlayers-map openlayers-preset-question_map"></div> </div> 
```

当前输出 -![输出](../Images/be55d8f9cc828f9732005361f7dd19d1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T20:32:25.377

这似乎是一个问题（错误？）当谷歌地图被初始化为隐藏`div`时（使用选项卡时可能是相同的情况），因为`display:none`可能将其`width`和设置`height`为`0`.

当内联地图可见时，fancybox 能够计算其尺寸，因此当您移除`display:none`.

解决方法应该是在fancybox 已经打开后调整地图的大小，以便地图适合fancybox 的尺寸。您可以`onComplete`为此使用回调。

其他要记住的事情：

*   您可能需要设置`autoDimensions`或取决于选择器是否`true`具有css 尺寸（如果没有，则设置为，否则设置为。）我认为它具有尺寸，因为您可以内联显示地图，因此初始值为.`false``#mapcontainer``false``true``true`
*   由于您使用的是内联内容（fancybox v1.3.x），请注意[这个错误](http://groups.google.com/group/fancybox/browse_thread/thread/fab7b6d81a173b33)。相同的链接还显示了解决方法。

因此，您的 fancybox 自定义脚本应如下所示：

```
 $("a#inline").fancybox({
  'hideOnContentClick': false, // so you can handle the map
  'overlayColor'      : '#ccffee',
  'overlayOpacity'    : 0.8,
  'autoDimensions': true, // the selector #mapcontainer HAS css width and height
  'onComplete': function(){
    google.maps.event.trigger(map, "resize");
  },
  'onCleanup': function() {
   var myContent = this.href;
   $(myContent).unwrap();
  } // fixes inline bug
 }); 
```

调整地图大小的方法可能会有所不同，具体取决于您使用的谷歌地图 API 版本

您可以查看[https://stackoverflow.com/a/2590049/1055987](https://stackoverflow.com/a/2590049/1055987)以供进一步参考。

**更新**：我在[这里添加了一个演示](http://www.picssel.com/playground/jquery/googleMapInline_05jun12.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:53:34.127

是`hideContentOnClick`参数。尝试将该参数设置为`false`.

# java - 从字符串数组中获取不同的随机字符串

> ID：10890955
> 
> 赞同：0
> 
> 时间：2012-06-05T02:49:45.027
> 
> 标签：java, android, arrays, string, random

嗨，我有一个包含 50 个字符串的字符串数组，我希望它只选择 10 个随机结果并将它们显示在表格布局上，除了它只显示一个结果之外，我得到了所有正确的结果。这是我的代码：

```
private String[] list;
private static final Random rgenerator = new Random();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.layout1);

Resources res = getResources();
    list = res.getStringArray(R.array.names);
    String q = list[rgenerator.nextInt(list.length)];
int total = 10;

    for (int current = 0; current < total; current++) {
        // Create a TableRow and give it an ID
        TableRow tr = new TableRow(this);
        tr.setId(100 + current);
        tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        // Create a TextView to house the name of the province
        TextView labelTV = new TextView(this);
        labelTV.setId(200 + current);
        labelTV.setText(q);
        labelTV.setTextSize(14);
        labelTV.setGravity(Gravity.CENTER);
        labelTV.setTextColor(Color.WHITE);
        labelTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        tr.addView(labelTV);

        tablelayout.addView(tr, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T21:29:19.340

这就是我想出的..

```
import java.util.*;
public class RandomStringFromArray
{
    public static void main(String[] args)
    {
        Random rnd = new Random();
        Scanner scan = new Scanner (System.in);
        System.out.println("Enter how many string in the array");
        int x = scan.nextInt();
        ArrayList<String> arraystr = new ArrayList<String>();

        for (int i=0; i < x ; i++)
            {
                System.out.println("Enter elements of the array");
                arraystr.add(scan.next());
            }
        System.out.println("\nI picked: ");

        for ( int t = 0; t < 3; t++) // 3 is how many elements you want to pick
            {

                    int random = rnd.nextInt(x);
                    System.out.println(arraystr.get(random));
                    arraystr.remove(random);
            }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T22:10:09.983

你只得到一个答案的原因是你在循环之外得到了字符串，所以你只能得到一次。它应该看起来更像是在下面。

此外，如果你想避免重复，你将不得不做一些事情来处理它。java.util.Collections.shuffle() 可能适合您的目的，那么您只需获取前 10 个项目。

```
 int total = 10;

    for (int current = 0; current < total; current++) {
        String q = list[rgenerator.nextInt(list.length)];
        // Create a TableRow and give it an ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T02:54:25.863

通过使用集合非常简单，它将注意避免重复：

```
Set<Integer> uniques = new HashSet<Integer>();

while (uniques.size() < 10)
  uniques.add(rgenerator.nextInt(list.length);

for (Integer i : uniques)
{
  String q = list[i];

  ..
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T03:09:03.297

这称为“随机抽样”。两种常见的技术是：

*   简单地打乱整个列表/数组，确保使用公平的打乱算法，例如 Collections.shuffle() 提供的算法，然后取前 n 个元素；
*   遍历列表，每次根据随机数是否超过表示仍需要的项目数/剩余项目数的阈值来决定是否包含下一个项目。

如果您选择第一种方法，请确保您的 shuffle 是真正公平的算法。如果要求许多程序员从头开始编写 shuffle 算法，就会出错。Java 的 Collections.shuffle() 是如何做到这一点的一个例子。

您可能还对我不久前写的一篇关于[Java 中随机抽样](http://www.javamex.com/tutorials/random_numbers/random_sample.shtml)的文章感兴趣，其中包括第二种情况的示例框架代码。

为了知识起见，您可能还希望研究一种称为“水库抽样”的东西，尽管从可能的 50 个项目中选择 10 个项目是多余的。

# python - Xcode 4 - 如何在调试器中输入输入

> ID：10890956
> 
> 赞同：1
> 
> 时间：2012-06-05T02:49:57.960
> 
> 标签：python, debugging, xcode4

我在 Xcode 4 中运行 Python，我需要在调试器中输入一些输入。我怎么做？

# node.js - 如何在 express js 中配置 Bliss 模板？

> ID：10890958
> 
> 赞同：7
> 
> 时间：2012-06-05T02:50:24.893
> 
> 标签：node.js, express

我正在尝试我在其他问题中看到的但没有运气：

*   [Express.js 自定义模板引擎（板）](https://stackoverflow.com/questions/8886678/express-js-custom-template-engine-plate)
*   [node.js + express.js +dust.js 问题](https://stackoverflow.com/questions/10734555/node-js-express-js-dust-js-issues)

我试图用

```
app.register('.js.html', {
    compiler: function(str,options){...}
}); 
```

但是注册在 express js 中是未定义的。

我让 Bliss 以这种方式工作

```
exports.index = function(req, res){
    //res.render('index', {});
    res.send(bliss.render(__dirname+"/index",{}));
}; 
```

但我想改用 res.render('index',output) 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:34:34.137

你必须这样设置：

```
var Bliss = new require('bliss');
var bliss = new Bliss();
app.engine('.bliss',function(path,options,fn){
    fn(null,bliss.render(path, options));
}); 
```

然后你这样称呼它：

```
exports.index = function(req, res){
  res.render('user.bliss', { title: 'Express' });
}; 
```

您需要在 views 目录下创建一个名为 user.bliss 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T14:49:24.557

我在我的应用程序中这样使用它：

```
var Bliss = require('bliss');
var bliss = new Bliss();

app.get('/', function (req, res) {
   res.send(bliss.render('./app/views/layout','title'));
}); 
```

# php - move_uploaded_file() 给出所有者/组错误

> ID：10890961
> 
> 赞同：1
> 
> 时间：2012-06-05T02:51:13.453
> 
> 标签：php, linux, centos

我正在使用`move_uploaded_file()`将图像上传到服务器，但是它给出了通常的错误：

```
Warning: move_uploaded_file(upload/file.png) [function.move-uploaded-file]: 
failed to open stream: No such file or directory in 
/home/newuser/public_html/model/account.class.php on line 39

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move       
'/tmp/phpuLkUgE' to 'upload/file.png' in     
/home/newuser/public_html/model/account.class.php on line 39 
```

这**不是基于权限的**，因为我已将文件夹设置为具有 root 访问权限的 777 并`ls -l`正确显示它。

```
755 /home/newuser/public_html/model
755 /home/newuser/public_html/model/account.class.php
777 /home/newuser/public_html/upload 
```

**PHP线**

```
move_uploaded_file($_FILES["photo"]["tmp_name"], "../upload/file.png"); 
```

我认为问题归结为所有者/组设置配置不正确.. 不久前，我将所有网站作为一个帐户中的子域：

```
/home/olduser/public_html/subdomains/index.html 
```

然后我改变了这个并创建了一个新的用户帐户来更轻松地管理一个单独的网站，只是将文件移动到...

```
/home/olduser/public_html/subdomains
/home/newuser/public_html/index.html 
```

中的新文件夹`/home/newuser`现在拥有并分组为，`newuser newuser`但我认为 php 可能正在运行，`nobody olduser`所以这可能导致问题？

我可以尝试什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:57:14.720

Permissions to a particular file / directory don't just apply on the directory itself, but on the *whole* path leading up to it.

Example:

```
/home/ - needs 'x' permission (execute)
/home/newuser/ - needs 'x' permission
/home/newuser/public_html/ - needs 'x' permission
/home/newuser/public_html/avatar/ - needs 'wx' permission (execute + write) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:53:59.060

It was kind of touched on indirectly in Silver89's feedback under Jack's Answer, but not outright stated - so I wanted to provide an answer to what helped me with this issue which had me scratching my head for a long time. ;)

The best approach that I have found for the destination of move_uploaded_file() is to use the full absolute path. It can vary based on whether you are on a Unix\Linux server or Windows server, but this should give you the basic idea.

On my Unix server at work, you cannot use "../anything" but have to use the full absolute internal file path of `/var/www/html/uploads/imagename.jpg`.

So that is why your last test worked for you, Silver89 - because your server was probably trying to upload the image to `http://yourservername.com/upload/file.png` instead of `http://www.yourservername.com/yoursubfolder/upload/file.png`. It probably threw out the "../" part altogether and that folder didn't exist on the server.

You can find out what that full path name is by logging onto the server (terminal/ssh etc.) and issuing the 'pwd' command or by using PHP code and echoing the getcwd() command in a stripped php file in the folder where your images will go.

[This site](http://www.bin-co.com/php/articles/current_file_path.php) is helpful in figuring this out based on your server using different PHP Server Config Checking Functions - See the table midway down. You can simply echo these out to the screen such as:

```
echo $_SERVER["SCRIPT_FILENAME"]. 
```

This was a tough one for me so I hope this makes it a little easier for the next person to find - even if this is 8 months old. ;)

# c# - 在标签中显示整数

> ID：10890962
> 
> 赞同：1
> 
> 时间：2012-06-05T02:51:15.973
> 
> 标签：c#, asp.net

如何在标签中显示整数？我正在做的是计算总数，并试图将其显示在标签中。

```
public partial class total : System.Web.UI.Page
{
    int total;
    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = Server.HtmlEncode(Request.Cookies["confirm"]["quantity"]);
        int quantity = (int)Session["TextBox1Value"];

        if (Request.Cookies["user"]["items"] == "Tyres")
        {
            total = 20 * quantity;

            Label2.Text = ???
        }
    }
} 
```

或者有没有其他方法可以在同一页面上显示总数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T02:51:50.707

**采用**

```
Label2.Text = total.ToString(); 
```

**或者**

```
Label2.Text =  Convert.ToString(total); 
```

由于`Text`需要一个字符串，因此您必须`total`通过调用`ToString()`或将整数值转换为字符串`Convert.ToString(int)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:55:25.700

您可以使用 .ToString() 或 Convert.ToString() 方法来完成。

```
Label2.Text = total.ToString(); 
```

或者

```
Label2.Text =  Convert.ToString(total); 
```

# c - 简单 C 程序中的总线错误

> ID：10890963
> 
> 赞同：1
> 
> 时间：2012-06-05T02:51:31.310
> 
> 标签：c, bus-error

我有以下简单的程序。我正在从命令行运行“程序 file.txt”并得到“总线错误”而没有输出。我不知道我在这里做错了什么。

```
#include<stdio.h>

int main(char *arg[])
{

    FILE *file = fopen(arg[0], "r");

    if (file == NULL) {
        printf("Cannot open file.\n");
        exit(1);
    }

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:57:59.797

c入口函数的原型是

```
int main(int argc, char *arg[]); 
```

因此，对于您的原型，您实际上是在尝试取消引用 int 以传递给 fopen
试试这个

```
#include<stdio.h>
int main(int argc, char *argv[])
{
    FILE *file = fopen(argv[1], "r");
    if (file == NULL) {
        printf("Cannot open file.\n");
        exit(1);
    }
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:56:23.320

你能打印出 arg[0] 的值吗，假设 main 的类型是

```
int main(int argc, char* argv[]) 
```

argv[0] 是进程的名称，argv[1] 是第一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T02:58:29.493

的标准原型`main()`应该如下所示：

int main(int argc, char * argv[]);

你`main()`只用一个论点声明了你的，`argv`. 但是系统将参数计数作为第一个参数传递。

当您指定单个参数（文件`file.txt`）时，`argc`设置为 1。但您的程序试图使用整数 1 作为`char **`. 这给出了总线错误。

这是您的程序的编辑版本，它可以工作：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{

    FILE *file;

    if (argc != 2)
    {
        fprintf(stderr, "Usage: myprogram <filename>\n");
        exit(1);
    }

    file = fopen(argv[1], "r");

    if (file == NULL) {
        fprintf(stderr, "Cannot open file.\n");
        exit(2);
    }

    exit(0); // status 0 to signal no error
} 
```

变化：

*   我添加`#include <stdlib.h>`以获得`exit()`.

*   我检查参数的数量并打印一个 Usage: 字符串，如果它不正确。

*   我将错误消息打印到`stderr`而不是标准输出。

*   我改为`return 1`明确`exit(0)`表示程序正在成功退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T02:59:44.520

`argv[0]`包含应用程序名称。尝试`argv[1]`改用。

# algorithm - 什么是电路？

> ID：10890970
> 
> 赞同：0
> 
> 时间：2012-06-05T02:52:31.773
> 
> 标签：algorithm, math, computer-science, fft

*《算法*》一书通过“电路”演示了快速傅立叶变换，使用“电线”来传输数据。什么是电路？它只是本书作者为了更好地演示算法而提出的概念，还是公认的计算机科学概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:28:46.337

您的问题的答案是，是的，“电路”是理论计算机科学中公认的概念，借鉴了电子学的相关概念。布尔电路基本上就是它听起来的样子：一种用于计算二进制字符串的模型，由用电线串在一起的布尔逻辑门组成。您可以在 Wikipedia[上](http://en.wikipedia.org/wiki/Boolean_circuit)找到正式的定义。

如您所见，它们派上用场的地方是确定特定问题的复杂性。FFT 的例子很容易理解，但最著名的例子可能是库克对 NP 完全性的定义，它证明了确定给定布尔电路是否可满足是 NP 完全的。

Barrington 和 Maciel 有一系列计算复杂性[讲义](http://people.clarkson.edu/~alexis/PCMI/)，在第一讲中介绍了电路，并在整个过程中继续使用这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:36:34.100

有些问题很容易，有些问题很难。为了说明什么使问题变得容易，什么使问题变得更复杂，我们通常使用计算机模型并对这些模型施加约束。

[图灵机](http://en.wikipedia.org/wiki/Turing_machines)是一种用于定义问题类别的常用模型。例如，复杂度等级**P**包含这样的问题，即存在一个图灵机，它可以在 O(n^p) 时间内解决某个幂 p（多项式时间）的问题。我们可以在图灵机上获得具有其他时间或空间限制的其他复杂性类。

[非确定性图灵机](http://en.wikipedia.org/wiki/Non-deterministic_Turing_machine)是计算机的另一种模型。 [交替图灵机是另一种](http://en.wikipedia.org/wiki/Alternating_Turing_machine)。存在许多计算机模型，每个模型都可用于定义不同类型的问题。 [电路](http://en.wikipedia.org/wiki/Circuit_%28computer_theory%29)是这些计算机模型之一。

图灵机可用于对单线程计算机程序进行建模。在对大规模并行计算进行建模时，电路会大放异彩。例如，尼克的类或**NC**包含可以使用多项式数量的处理器“快速”（多对数时间）解决的问题。

# ruby-on-rails - 安装好设计后，如何轻松添加（和删除）模块？- 导轨 3

> ID：10890971
> 
> 赞同：1
> 
> 时间：2012-06-05T02:52:32.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我刚刚添加`:confirmable`但现在出现错误：

```
NameError in Devise::RegistrationsController#create

undefined local variable or method `confirmed_at' for #<User:0x000001025db288> 
```

我意识到在添加它之后，我没有做任何会产生迁移的事情。

如何获得新的迁移以更改现有设计安装上的当前架构？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:57:53.160

更新：这是关于如何更改现有表以满足设计需求的设计 wiki 页面：

对于低于 2.0 的设计

[https://github.com/plataformatec/devise/wiki/How-To:-change-an-already-existing-table-to-add-devise-required-columns](https://github.com/plataformatec/devise/wiki/How-To:-change-an-already-existing-table-to-add-devise-required-columns)

对于 2.0 之后的设计

[https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style](https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:04:09.960

我建议你看看这个[话题](https://stackoverflow.com/questions/4783392/how-do-i-enable-confirmable-in-devise)。

它可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:39:45.693

所以似乎最好的方法是通过这个[Devise Wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Upgrade-to-Devise-2.0-migration-schema-style)链接。

我刚刚测试了它，它似乎工作。

# box-api - Box API v2 每个请求上传多个文件限制为 20 个

> ID：10890973
> 
> 赞同：0
> 
> 时间：2012-06-05T02:52:44.470
> 
> 标签：box-api

我正在使用 Box API v2.0。当我尝试为每个请求上传超过 20 个文件时，只有前 20 个文件会上传到服务器上。

我收到这样的回复：

```
{ 
  "total_count": 20,
  "entries": [{
    "type": "file",
    "id": "2365556604",
    ...
  }, ... ]
} 
```

我在文档中找不到关于这种限制的任何提及，而且我可以使用 API v1.0 上传任意数量的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:53:04.890

我们刚刚对此进行了调查，这确实是 v2 API 的一个错误。我们正在努力解决它，修复后我会在这里更新。

# php - 我对 wp_enqueue_script 的新方法

> ID：10890974
> 
> 赞同：0
> 
> 时间：2012-06-05T02:52:50.017
> 
> 标签：php, wordpress, wordpress-theming

好的，我正在尝试消除所有可能的变量以进行故障排除。所以我没有在我的functions.php中，而是在我的header.php文件中删除了这段代码：

```
<?php $mdgtemplateloc = get_bloginfo( 'template_url' ).'/js/'; ?>
<?php echo '<!-- ' . $mdgtemplateloc . ' --> ?>
<?php wp_enqueue_script( 'hoverIntent', $mdgtemplateloc.'hoverIntent.js', array( 'jquery' ) ); ?>
<?php wp_enqueue_script( 'mdMenuAnimation', $mdgtemplateloc.'mdMenuAnimation.js', array( 'hoverIntent' ) ); ?> 
```

结果是在源代码中插入了一些空白，并且注释按要求显示。我的理解是，这会插入类似

```
<script type="text/javascript" src="[url]/js/mdMenuAnimation.js"></script> 
```

我想以正确的方式做到这一点，但 wp_enqueue_script 一直没有给我任何东西。我怀疑我在做一些根本错误的事情，但我找不到它，而且我通过 google 或 stackoverflow 或 wp codex 都找不到任何帮助。

为了澄清，这是我之前在functions.php文件中的内容：

```
function mdg_setup_scripts() {
  $mdgtemplateloc = get_bloginfo( 'template_url' ).'/js/';
  wp_register_script( 'hoverIntent', get_bloginfo('template_url').'/js/hoverIntent.js', array( 'jquery' ));
  wp_enqueue_script( 'hoverIntent' );
  wp_register_script( 'mdMenuAnimation', $mdgtemplateloc.'mdMenuAnimation.js', array( 'hoverIntent' ));
  wp_enqueue_script( 'mdMenuAnimation' );
}
add_action( 'wp_enqueue_scripts', 'mdg_setup_scripts' ); 
```

这也没有产生任何称为脚本的输出。我知道这一秒更像是应该的，但它没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:00:30.127

[`wp_enqueue_script()`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)不输出任何东西。你使用不正确。

您需要创建一个回调并将其添加到`wp_enqueue_scripts`操作中。通常这属于您的**functions.php**文件。

重新阅读文档。有一些你想要做什么的例子。

# css - 绝对定位不工作 Safari Mobile

> ID：10890976
> 
> 赞同：0
> 
> 时间：2012-06-05T02:53:39.113
> 
> 标签：css, mobile-safari

我的网站 www.anahataininternational.org 中的搜索部分可以在 FF、Chrome 和 Safari 中正确显示。但在 Safari 移动版中，它显示在页面中间。

```
#search_section {
position: absolute;
right: 490px;
top: 10px;
z-index: 5;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:43:07.167

我建议对页面布局进行一些更改，以便您可以使#search_section 相对于标题。

我已经为它创建了一个骨架结构。[http://jsfiddle.net/AACuy/](http://jsfiddle.net/AACuy/)

同时删除 left、top 和 position:absolute 属性。

站点中有太多类，我无法使用 firebug 进行更改并显示结果。

# php - 禁用链接 Onclick

> ID：10890979
> 
> 赞同：0
> 
> 时间：2012-06-05T02:54:09.747
> 
> 标签：php, javascript, html, jquery

> **可能重复：**
> [Reddit 风格的投票按钮](https://stackoverflow.com/questions/4975042/reddit-style-voting-button)

所以我一直在这个网站上工作，我想在我的网站中创建一个 stackoverflow/reddit 风格的投票系统。我想在用户单击链接时禁用链接，这样他们就无法投票两次。这是我的代码：

```
<a href="#" title="upvote" class="arrows" onclick ="submitVote(<?php echo
$lulz['link_id']; ?>, 1);
return false;">&uarr;</a> 
```

我需要保留当前的点击功能，以便我可以添加投票。我可以添加另一个来禁用它（使用 cookie）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:03:05.237

如果您使用 cookie，人们可能会作弊。任何人都可以删除 cookie，因此他们可以投票多次，只要他们愿意删除他们的 cookie。除了设置cookie之外，最好将信息存储在服务器上。但是，如果安全性不是那么重要并且您想使用 cookie，只需在 submitVote() 的末尾设置 cookie。在 submitVote() 的开头，您首先查找 cookie。如果它存在，那么您不会将投票发送到服务器。您可以使用 alert() 告诉用户他们不能投票两次。如果它不存在，那么只需将投票提交给服务器，然后添加 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:16:20.637

你在客户端做的任何事情都可能被击败，你必须在服务器上检查多个投票。但是您可以通过在单击按钮时简单地删除侦听器来进行部分实现：

```
<a href="voteManually.html" onclick="submitVote();  this.onclick='';">vote</a> 
```

请注意，简单地重新加载页面将使侦听器恢复活力，删除 cookie 将破坏 cookie 解决方案，重置调制解调器将破坏 IP 嗅探，并且……</p>

# multithreading - C# 中的简单 FFT 作为单核、多核和 OpenCL 版本？

> ID：10890980
> 
> 赞同：0
> 
> 时间：2012-06-05T02:54:10.567
> 
> 标签：multithreading, c#-4.0, opencl, fft

我在网络和 Stack Overflow 上搜索了 C# 中的 FFT 版本，这被问了好几次，并给出了一些答案，但是......

1.  我发现的所有 FFT 版本都针对速度进行了优化，但很难理解。
2.  几乎所有这些都是迭代版本，因此没有针对多核系统进行优化。
3.  Opencl 版本针对某些 gpu 模型进行了优化。

当我正在研究单核、多核、opencl 算法比较的案例研究时，我正在寻找 FFT 的最简单和免费的 C#/Opencl 版本，使用 float[]（真实，不需要复杂），正向和反向可选会很棒。如果它们可以在任何数组长度上工作，那也很好。有没有人偶然发现这样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:30:00.137

这个来自[Brahma](http://brahma.codeplex.com/)（我的开源项目）的[示例源代码](http://brahma.codeplex.com/SourceControl/changeset/view/92609#1697260)包含 Microsoft Research的[这篇FFT 论文的 C# 实现和 LINQ 实现 (OpenCL)。](http://research.microsoft.com/apps/pubs/default.aspx?id=70576)

Brahma 自动生成的内核是：

**FFT 内核**

```
 __kernel void brahmaKernel(int fftSize,__global float* a,__global float* ib,__global float* c,__global float* id,int size) 
    {
        int x = get_global_id(0);
        int b = ((floor(convert_float((x / fftSize))) * fftSize) / ((int)2));
        int offset = (x % (fftSize / ((int)2)));
        int x0 = (b + offset);
        int x1 = (x0 + (size / ((int)2)));
        float val0A = a[x0];
        float val0B = ib[x0];
        float val1A = a[x1];
        float val1B = ib[x1];
        float angle = (((float)-6.283185) * (convert_float(x) / convert_float(fftSize)));
        float tA = native_cos(angle);
        float tB = native_sin(angle);
        (c[x] = ((val0A + (tA * val1A)) - (tB * val1B)));(id[x] = ((val0B + (tB * val1A)) + (tA * val1B)));
    } 
```

**共轭和缩放内核**

```
 __kernel void brahmaKernel(float scale,__global float* a,__global float* ib) 
    {
        int x = get_global_id(0);
        (a[x] = (a[x] * scale));(ib[x] = (-(ib[x]) * scale));;
    } 
```

希望这可以帮助！

# playframework-2.0 - Play 2.0 FakeApplication的url地址是什么

> ID：10890990
> 
> 赞同：0
> 
> 时间：2012-06-05T02:55:46.777
> 
> 标签：playframework-2.0

在功能测试中，fakeApplication() 的实际地址是什么？

```
@Test
public void findById() {
  running(fakeApplication(), new Runnable() {
    public void run() {
      Computer macintosh = Computer.find.byId(21l);
      assertThat(macintosh.name).isEqualTo("Macintosh");
      assertThat(formatted(macintosh.introduced)).isEqualTo("1984-01-24");
    }
  });
} 
```

**编辑**

安迪的答案对我有用。

```
@Test
public void findById() {
  running(testServer(3333, fakeApplication(inMemoryDatabase())), new Runnable() {
    public void run() {
      HttpClient httpclient = new DefaultHttpClient();
      HttpPost httppost = new HttpPost("http://localhost:3333/endpoint");
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T05:17:03.263

AFAICT，如果你需要一个 url，你应该使用 FakeServer 而不是 FakeApplication

# c# - 在 C# 中，如何设计一个反映 SVG 协议的对象

> ID：10890992
> 
> 赞同：0
> 
> 时间：2012-06-05T02:56:02.877
> 
> 标签：c#, svg, xml-serialization

我正在构建一些基本 SVG 元素的非常粗略的实现。我想将对象序列化为可用的 XML 流。大部分细节我都可以接受，但由于某种原因，我陷入了可以包含一个或多个相同类型对象的对象类型（“g）”的基础知识上。

这是一个精简的示例：

```
<svg>
  <g display="inline">
    <g display="inline">
        <circle id="myCircle1"/>
        <rectangle id="myRectangle1"/>
    </g>
    <circle id="myCircle2"/>
    <rectangle id="myRectangle2"/>
  </g>
</svg> 
```

第一个“g”元素包含其他 g 元素。设计该对象的最佳方法是什么？

```
[XMLTypeOf("svg")]
public class SVG
{
    public GraphicGroup g {set; get;}
}

public GraphicGroup
{
   public GraphicGroup g {set; get;}
   public Circle circle { set; get;}
   public Rectangle rectangle { set; get;}
}

public Circle...
public Rectangle... 
```

这不太正确，甚至不接近。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:26:40.350

很抱歉，我不知道 C# 与 XML 的耦合`XMLTypeOf`（从何而来？没有出现在 MSDN 搜索中），但也许从公开常见 DOM 属性（如 id、style）的 SVGElement 派生就足够了。 ..并添加缺少的声明：

```
public class SVGElement
{
  public String id {set; get;}
  public String style {set; get;}
}

[XMLTypeOf("svg")]
public class SVG : public SVGElement
{
    public GraphicGroup g {set; get;}
}

[XMLTypeOf("g")]
public class GraphicGroup : public SVGElement
{
   public GraphicGroup g {set; get;}
   public Circle circle { set; get;}
   public Rectangle rectangle { set; get;}
}

[XMLTypeOf("circle")]
public class Circle : public SVGElement { ... }

[XMLTypeOf("rectangle")]
public class Rectangle : public SVGElement { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:24:48.190

使用多态性：

```
public interface IGraphic
{
    void Draw();
}

public class SVG
{
    public GraphicGroup GraphicGroup { get; set; }
}

public class GraphicGroup : IGraphic
{
    public GraphicGroup(Collection<IGraphic> graphics)
    {
        this.Graphics = graphics;
    }

    public Collection<IGraphic> Graphics { get; private set; }

    public void Draw()
    {
        Console.WriteLine("Drawing Graphic Group");
        foreach (IGraphic graphic in this.Graphics)
        {
            graphic.Draw();
        }
    }
}

public class Circle : IGraphic
{
    public void Draw()
    {
        Console.WriteLine("Drawing Circle");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:04:03.620

使用 xsd 和 xsd 编写代码生成器

# cocoa - Cocoa：如何动态调整 NSTextField 的大小？

> ID：10890996
> 
> 赞同：1
> 
> 时间：2012-06-05T02:56:18.510
> 
> 标签：cocoa, xcode4.3, nstextfield, cocoa-design-patterns

我创建了一个标签：

```
NSTextField *label = [NSTextField alloc] initWithFrame:NSMakeRect(50, 50, 100, 50)];
    [txtField setStringValue:inputString];
    [txtField setEditable:false]; 
```

inputString 的长度在编译时是未知的，那么如何调整标签的大小以使其全部放在一行中并在给它 inputString 后将其居中？

我还是 Cocoa 的新手，所以感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:47:31.997

使用 NSControl 的“- (void)sizeToFit”方法。这将根据其中的文本调整 textField 的大小。

要使文本居中，您可以在 Interface Builder 中进行，并且当您使用 sizeToFit 更新 textField 的大小时，该设置不会改变。