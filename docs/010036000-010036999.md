# StackOverflow 问答 10036000-10036999

# javascript - 用户/浏览器操作 Javascript 有多容易？

> ID：10036002
> 
> 赞同：1
> 
> 时间：2012-04-05T21:05:54.570
> 
> 标签：javascript, variables

我想知道用户/浏览器手动操作或执行 Javascript 代码有多容易。

我问的原因是我计划制作一个基于浏览器的游戏。我使用 Javascript 而不是 Java，因为我想让尽可能多的平台可以访问它。

这是我的意思的一般示例：用户可能会进入游戏页面。几个变量将存储在 JS 中，例如玩家的健康和力量值。玩家可能会选择攻击怪物，结果由几个存储的变量和在战斗中生成的一对决定。

那么玩家是否能够操纵存储的变量或调用我的 JS 函数之一（例如导致进行 AJAX 调用的函数）？

如果是这样，那我该如何防范呢？我可以使用服务器验证每个操作，但这是带宽密集型的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:10:49.033

点击`F12`，打开控制台，破解。

全局范围内的任何内容都容易受到修改。

然而，通过将你的游戏逻辑封闭在一个闭包中，它变得更难访问。

所以：

```
(function() {
    // all your game code here
})(); 
```

这将阻止访问局部变量。只要确保你用`var`.

此外，请确保混淆代码以使其更难修改，并在接受诸如高分提交之类的通信时要特别小心。我喜欢用现场制作的方法加密我的（例如从基数 10 转换为基数 42）。

尽可能将玩家的动作发送到服务器并确保它们是有效的。如果可以，请在服务器端保持游戏状态 - 部分是为了检查玩家是否按照规则进行游戏，但作为副作用，如果用户重新加载页面，您可以恢复游戏。

总而言之，你无法阻止作弊者，但你可以让他们很难受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:09:31.647

你有没有打开你的开发者控制台？您可以访问页面中运行的所有脚本。任何加载的东西都可以被操纵。

您可以通过在特定闭包中运行代码来使其更难。这个关于闭包的 SO 答案可能有助于澄清事情：[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

但是由于这都是客户端，如果有人真的想进入那里并改变事情以使自己受益，因为 JavaScript 允许运行时内省，所以没有什么是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:24:11.250

以这种方式防止作弊的唯一方法是与服务器验证所有操作。即使玩家无法使用适当的工具（他们可以）访问所有 javascript，他们也可以在网络级别攻击系统。

唯一的选择是如果 javascript 以某种方式获得了受信任的平台模块 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-22T17:37:50.987

您可能无法防止操纵真实值，但您可能会通过验证使其变得更复杂一些。

这就是我的意思。假设您正在保护健康价值，假设它被命名为“helath”。您声明了另一个健康值，假设我们将其命名为“hcheck”，但您不使其等于健康值。你给它一个-52或+786或其他的偏移值......你也可以存储异或值或者......有创意。稍后，您只需检查健康值是否对应于 hcheck 值，如果不对应，则将实际值解码回健康值。

当然，如果你愿意，你可以加盐更多，第三个值将是 health 和 hchek 值之间的某种计算。

让我们清楚一点。这并不能保证它会受到 100% 的保护，但它会让新手的事情变得复杂，更有经验的人根本不想浪费他们的时间，即使有第三个保护值（你可能永远不知道）有多少保护值/层）:)

哦，如果有人有时间和勇气跟随你的脚步并修复每个变量中的值，那么他们应该作弊；）

# git - git新手-难以理解为什么目录为空

> ID：10036008
> 
> 赞同：2
> 
> 时间：2012-04-05T21:06:12.350
> 
> 标签：git, null

我正在尝试将现有项目移动到新的 git repo

**到目前为止，我已经：**

1.  在 Github 中创建了一个新的 repo

2.  在本地克隆它

3.  将所有项目文件复制到 repo 目录中

4.  暂存所有文件

5.  完成初始提交

但是其中一个目录没有提交，当我在 Tower (Mac OSX GUI) 中查看它时，目录如下所示：

```
directory-name -> (null) 
```

**所以我然后：**

1.  删除了目录

2.  分阶段并提交了该更改

3.  再次将目录复制到仓库中

4.  暂存并提交目录的新副本

但该目录仍以 (null) 的形式位于暂存区。

导致这种情况的目录有什么问题？或者是目录里面的东西？

如果我选择了 tower 中的目录，我可以在 diff 部分看到以下内容：

```
- Subproject commit 9c9af5520163c9980adf780d527dd5a830ec4fe5
+ Subproject commit 9c9af5520163c9980adf780d527dd5a830ec4fe5-dirty 
```

我已经四处搜索，但我不完全理解其他答案抱歉 - 任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:09:57.670

您正在谈论的目录可能是空的或仅包含您的 git 配置忽略的文件。GIT 不跟踪空目录。

# php - 使用php将嵌入的js加载到页面中以将其隐藏在源代码中？

> ID：10036009
> 
> 赞同：0
> 
> 时间：2012-04-05T21:06:12.883
> 
> 标签：php, javascript, embedded-resource

我有一个脚本需要加载到页面中，但它很敏感，所以我不想透露脚本的来源。我知道 js 运行客户端，但是有什么方法可以用 php / 加载它的服务器端，或者只是将它嵌入服务器端以仍然在用户系统上运行？

脚本本身是一个简单的外部 js 脚本，如下所示：

```
<script type="text/javascript" src="myscripts.js"></script> 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:09:29.610

如果您希望浏览器运行脚本，它必须接收该脚本的源代码。您的声明“嵌入脚本服务器端”没有多大意义，“使用 .php 加载它的服务器端”也没有多大意义。浏览器要么接收要执行的脚本代码（因此，它对最终用户可见），要么不接收。

您可以尝试使用各种混淆方法使源代码更难理解，但任何有足够决心的人都会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:08:05.227

您可以通过这种方式隐藏脚本的源位置，但不能隐藏源代码。如果您希望它在客户端上执行，则必须将其发送给客户端。如果您将其发送给客户端，则用户可以执行它。不要把秘密的业务逻辑放在客户端，在服务器端处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:09:57.780

不，那里没有。您能做的最好的事情就是混淆您的代码，使没有经验的用户难以进行逆向工程。

# c# - 静态数据访问方法

> ID：10036017
> 
> 赞同：0
> 
> 时间：2012-04-05T21:07:46.237
> 
> 标签：c#, ado.net, data-access-layer

我知道创建自定义数据访问层不是一个好主意，除非您：1) 确切地知道您在做什么，和/或 2) 有非常具体的需求。但是，我正在维护一些使用自定义数据访问层的遗留代码，其中每个方法看起来像这样：

```
 using (SqlConnection cn = new SqlConnection(connectionString))
{
    using (SqlDataAdapter da = new SqlDataAdapter("sp_select_details", cn))
    {
        using (DataSet ds = new DataSet())
        {
            da.SelectCommand.Parameters.Add("@blind", SqlDbType.Bit).Value = blind;
            da.SelectCommand.CommandType = CommandType.StoredProcedure;
            da.SelectCommand.CommandTimeout = CommandTimeout;
            da.Fill(ds, "sp_select_details");
            return ds;
        }
    }
} 
```

因此，用法如下所示：

```
 protected void Page_Load(object sender, EventArgs e) {
    using (Data da = new Data ("SQL Server connection string")) {
        DataSet ds = da.sp_select_blind_options(Session.SessionID); //opens a connection
        Boolean result = da.sp_select_login_exists("someone");//opens another connection
    }
} 
```

我在想，使用微软的企业库可以让我免于设置和拆除，即每次方法调用都连接到 SQL Server。我的这种想法正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:13:22.657

是的，它肯定会节省您的*时间*，但您会在*性能*和*灵活性*方面付出代价。

因此，创建自定义`DataLayer`也是获得性能和灵活性的好主意。

考虑到您在谈论遗留代码，我想它可以工作，我不会将它更改为现代（但性能较低）*的东西，只是为了在我的代码中有一些新鲜的东西*。

与您应该在遗留代码中实现的任何其他新技术相比，可靠、可行`DataLayer`是最好的选择。

简而言之，只有当你有*真正*的理由这样做时才改变它。我理解你愿意改变这些东西，因为总是很难理解别人写的代码，但相信我，很多时候不改变旧的遗留代码是*项目*的最佳选择。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:19:41.370

我过去非常成功地使用了 Enterprise Library，Enterprise Library 会向您隐藏一些混乱的细节，但本质上它会在内部使用与您的示例中演示的代码相同的代码。

正如@tigran 所说，除非存在基本问题，否则我不建议尝试更改现有代码库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:21:00.857

是的，默认情况下连接池将打开。应用程序域基本上维护一个连接列表，当您发出创建连接的调用时，它会从池中返回一个未使用的连接，如果它存在，则创建一个，如果不存在。

因此，当您的连接 cn 在 using 语句中超出范围并被处理时，实际发生的情况是它返回到池中，为下一个请求做好准备，并根据各种优化参数在那里徘徊。

谷歌 ADO 连接池的更多细节，那里有很多。

# javascript - MVC2.0 读取文本框并将值添加到同一视图上的文本区域

> ID：10036019
> 
> 赞同：1
> 
> 时间：2012-04-05T21:07:52.123
> 
> 标签：javascript, ajax, asp.net-mvc-2

我有表单，其中有文本框值和链接（添加）。当用户在文本框中输入数据并单击添加时，它应该将输入的文本添加到同一视图的 textArea 中。我曾尝试使用 ajax.actionlink 执行此操作，但我似乎无法弄清楚如何将输入的文本传递给参数。谁能有另一个想法我可以尝试..我不能使用 Ajax.beginForm 因为我已经有 html 表单。

先感谢您。

这是到目前为止我使用 ajax 操作链接的 html 代码。

```
 <div class="editor-label">
                        <%: Html.Label("DefectID / FeatureID")%> <%: Html.TextBox("DefectID", "", new { @class = "required" })%> <%: Ajax.ActionLink("Add", "InsertDefectIDs", new AjaxOptions { UpdateTargetId = "DefectIds" }) %><%--<input type="button" name="add" value="Add" />--%>
                    </div>

                    <div class="editor-field">
                        <%: Html.TextAreaFor(model => model.DefectIds, new { rows = 5, cols = 12, @readonly = "true" })%>
                        <%: Html.ValidationMessageFor(model => model.DefectIds)%>
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:31:36.503

您应该能够执行以下操作：

HTML

```
<div class="editor-label">
    <%: Html.Label("DefectID / FeatureID")%> 
    <%: Html.TextBox("DefectID", "", new { @class = "required" })%> 
    <input type="button" name="add" value="Add" onclick="AddDefectId();" />
</div>

<div class="editor-field">
    <%: Html.TextAreaFor(model => model.DefectIds, new { rows = 5, cols = 12, @readonly = "true" })%>
    <%: Html.ValidationMessageFor(model => model.DefectIds)%>
</div> 
```

Javascript

```
<script type="text/javascript">
    function AddDefectId() {
        var defectId = document.getElementById('DefectId').value;

        if(defectId != "")
             document.getElementById('DefectIds').value += defectId + ","

        document.getElementById('DefectId').value = "";        
    }​
</script> 
```

这是一个直接的 html/javascript 示例：http: [//jsfiddle.net/zJpRA/6/](http://jsfiddle.net/zJpRA/6/)

# objective-c - 跟踪对象保留调用

> ID：10036024
> 
> 赞同：1
> 
> 时间：2012-04-05T21:08:01.047
> 
> 标签：objective-c, memory-management, memory-leaks, retaincount

如何跟踪保留我的对象的内容？我有一个对象`delloc`在从列表中删除时没有按预期进行。我的怀疑是某些东西正在增加保留计数，所以我想知道如何在理想情况下创建一个位置以在该对象的保留计数增加时中断代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:32:32.357

最好的答案是使用 Instruments；它将全天跟踪保留/发布。

[http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)

如果绝望，将 -retain 覆盖为简单`return [super retain];`的 . 这将为您提供一种可以方便地设置断点的方法。然后，您可以使用断点命令执行以下操作：

```
bt
continue 
```

这将导致调试器在每次调用时喷出回溯，然后继续。

# string - 为什么 Haskell 在处理字符串时会分配大量内存？

> ID：10036028
> 
> 赞同：4
> 
> 时间：2012-04-05T21:08:15.863
> 
> 标签：string, memory, haskell

我在 Haskell 中编写了一个程序，它必须加载和解析 UTF8 格式的大文本文件。该文件代表一个字典，每行都有键：值对。在我的程序中，我想要一个用于快速字典搜索的 Data.Map 容器。我的文件大约 40MB，但在将其加载到我的程序后，使用了 1.5 GB 的 RAM，并且从未释放。我做错什么了？内存使用量是预期的吗？

这是我的程序中的代码示例：

模块主要在哪里

```
import Engine

import Codec.Archive.Zip
import Data.IORef
import System.IO
import System.Directory
import qualified System.IO.UTF8 as UTF8
import qualified Data.ByteString.Lazy as B
import qualified Data.ByteString.UTF8 as BsUtf
import qualified Data.Map as Map

import Graphics.UI.Gtk
import Graphics.UI.Gtk.Glade

maybeRead :: Read a => BsUtf.ByteString -> Maybe a
maybeRead s = case reads $ BsUtf.toString s of
     [(x, "")] -> Just x
     _         -> Nothing    

parseToEntries :: [BsUtf.ByteString] -> [(BsUtf.ByteString, Int)]
parseToEntries [] = []
parseToEntries (x:xs) = let (key, svalue) = BsUtf.break (==':') x
                            value = maybeRead svalue
                        in case value of 
                            Just x -> [(key, x)] ++ parseToEntries xs 
                            Nothing -> parseToEntries xs 

createDict :: BsUtf.ByteString -> IO (Map.Map BsUtf.ByteString Int)
createDict str = do
    let entries = parseToEntries $ BsUtf.lines str
        dict = Map.fromList entries
    return (dict)

main :: IO ()
main = do

    currFileName <- newIORef ""

    dictZipFile <- B.readFile "data.db"    
    extractFilesFromArchive [] $ toArchive dictZipFile
    dictFile <- UTF8.readFile "dict.txt"
    dict <- createDict $ BsUtf.fromString dictFile

...

searchAccent :: Map.Map BsUtf.ByteString Int -> String -> Int
searchAccent dict word = let sword = BsUtf.fromString $ map toLower word
                             entry = Map.lookup sword dict
                         in case entry of
                            Nothing -> -1
                            Just match -> 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T21:39:19.957

快速回答。
主要问题是`System.IO.UTF8.readFile`将文件读入`String`.

假设瓶颈在这里：

```
dictFile <- UTF8.readFile "dict.txt"
dict <- createDict $ BsUtf.fromString dictFile 
```

在处理 UTF-8 文本时，最好使用`Data.Text`而不是`ByteString`. 尝试这样的事情：

```
import qualified Data.Text.Lazy as LT
import qualified Data.Text.Lazy.Encoding as LT

...
dictFile <- B.readFile "dict.txt"
dict <- createDict $ LT.decodeUtf8 dictFile 
```

另一个瓶颈是解析数字：您正在转换`ByteString`为`String`然后`read`它。最好使用`Data.Text.Lazy.Read`：

```
import qualified Data.Text.Lazy.Read as LT

maybeRead :: LT.Text -> Maybe Int
maybeRead s = case LT.decimal s of
    Left _  -> Nothing
    Right i -> Just i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T21:31:43.220

Haskell`String`类型是一个间接（因为懒惰）的字符链表；这在空间上是*非常*浪费的。对于大量文本，您可能希望尝试`Data.Text`（来自[http://hackage.haskell.org/package/text ）。](http://hackage.haskell.org/package/text)

（现在*编辑*源代码我看到字符串是惰性`ByteString`的而不是`String`，所以这不相关。分析是下一步。）

# c# - 流式操作符与延迟执行有何不同？

> ID：10036033
> 
> 赞同：9
> 
> 时间：2012-04-05T21:08:51.107
> 
> 标签：c#, linq

在 LINQ`Where`中是一个流式操作符。Where-as`OrderByDescending`是非流媒体运营商。AFAIK，流媒体运营商只收集下一个必要的项目。非流式操作符一次评估整个数据流。

我看不到定义 Streaming Operator 的相关性。对我来说，延迟执行是多余的。以我编写了一个自定义扩展并使用 where 运算符和 orderby 使用它的示例为例。

```
public static class ExtensionStuff
{
    public static IEnumerable<int> Where(this IEnumerable<int> sequence, Func<int, bool> predicate)
    {
        foreach (int i in sequence)
        {
            if (predicate(i))
            {
                yield return i;
            }
        }
    }
}

    public static void Main()
    {
        TestLinq3();
    }

    private static void TestLinq3()
    {
        int[] items = { 1, 2, 3,4 };

        var selected = items.Where(i => i < 3)
                            .OrderByDescending(i => i);

        Write(selected);
    }

    private static void Write(IEnumerable<int> selected)
    {
        foreach(var i in selected)
            Console.WriteLine(i);
    } 
```

无论哪种情况，`Where`都需要评估每个元素以确定哪些元素满足条件。它产生的事实似乎只是因为操作员获得了延迟执行而变得相关。

那么，流媒体运营商的重要性是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T21:11:45.903

有两个方面：速度和内存。

当您使用`.Take()`仅使用部分原始结果集的方法时，速度方面变得更加明显。

```
// Consumes ten elements, yields 5 results.
Enumerable.Range(1, 1000000).Where(i => i % 2 == 0)
    .Take(5)
    .ToList();

// Consumes one million elements, yields 5 results.
Enumerable.Range(1, 1000000).Where(i => i % 2 == 0)
    .OrderByDescending(i => i)
    .Take(5)
    .ToList(); 
```

因为第一个示例在调用 之前仅使用流式运算符，所以在停止评估`Take`之前您最终只能产生 1 到 10 的值。`Take`此外，一次仅将一个值加载到内存中，因此您的内存占用量非常小。

在第二个示例中，`OrderByDescending`不是流式传输，因此在 Take 拉出第一项的那一刻，通过`Where`过滤器的整个结果必须放在内存中进行排序。这可能需要很长时间并产生很大的内存占用。

即使您没有使用`Take`，内存问题也可能很重要。例如：

```
// Puts half a million elements in memory, sorts, then outputs them.
var numbers = Enumerable.Range(1, 1000000).Where(i => i % 2 == 0)
    .OrderByDescending(i => i);
foreach(var number in numbers) Console.WriteLine(number);

// Puts one element in memory at a time.
var numbers = Enumerable.Range(1, 1000000).Where(i => i % 2 == 0);
foreach(var number in numbers) Console.WriteLine(number); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:12:25.170

> 它产生的事实似乎只是因为操作员获得了延迟执行而变得相关。
> 
> 那么，流媒体运营商的重要性是什么？

即，您无法使用缓冲/非流扩展方法处理无限序列 - 而您可以仅使用流扩展方法“运行”这样的序列（直到您中止）。

以这种方法为例：

```
public IEnumerable<int> GetNumbers(int start)
{
    int num = start;

    while(true)
    {
        yield return num;
        num++;
    }
} 
```

你可以`Where`很好地使用：

```
foreach (var num in GetNumbers(0).Where(x => x % 2 == 0))
{
    Console.WriteLine(num);
} 
```

`OrderBy()`在这种情况下将不起作用，因为它必须在发出单个数字之前详尽地枚举结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T21:26:28.630

只是为了明确; 在您提到的情况下， where 流的事实没有任何优势，因为无论如何 orderby 都会吸收整个事情。但是，有时会使用流式传输的优势（其他答案/评论已给出示例），因此所有 LINQ 运算符都会**尽其所能进行**流式传输。Orderby**尽可能多地**流式传输，而这恰好不是很多。流非常有效的地方。

# mysql - 使用另一个查询从连接更新表？

> ID：10036039
> 
> 赞同：1
> 
> 时间：2012-04-05T21:09:25.767
> 
> 标签：mysql, sql, sql-update

我有一个表“玩家”和“奖励”。我有一些重复的玩家条目，它们具有不同的 ID，但其他信息相同。

我正在尝试更新与第二个玩家条目相关的奖项，以便我最终可以删除重复项。

这显然不是最有效的查询，但它只需要运行一次，并且只有 10-15 个重复项。到目前为止，我有这个：

```
UPDATE aw
SET aw.player_id = map.id1
FROM awards as aw,
    (SELECT a.id as id1, b.id as id2
    FROM players a, players b
    WHERE a.first_name = b.first_name 
    AND a.last_name = b.last_name 
    AND a.id != b.id 
    AND a.team is not null 
    AND a.college is not null) as map
WHERE map.id2 = aw.player_id 
```

这给了我一个未指定的语法错误，但如果我只用“Select aw.player_id, map.id1”替换前两行，它会返回一个包含预期值的两列表（所以列名和表引用都是正确的）。

我一定遗漏了一些明显的东西，但它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:15:35.920

[UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)中没有 FROM 。

您应该在 SET 之前在 UPDATE 部分定义表

```
UPDATE awards as aw,
  (SELECT a.id as id1, b.id as id2
  FROM players a, players b
  WHERE a.first_name = b.first_name 
  AND a.last_name = b.last_name 
  AND a.id != b.id 
  AND a.team is not null 
  AND a.college is not null) as map
SET aw.player_id = map.id1
WHERE map.id2 = aw.player_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:15:43.703

这在语法上应该是正确的。但是，我不确定它是否符合您的要求。**首先测试暂存数据！**

```
UPDATE
  players AS a 
INNER JOIN
  players AS b
ON
  a.first_name = b.first_name
  AND a.last_name = b.last_naem
  AND a.id != b.id
  AND a.team IS NOT NULL
  AND a.college IS NOT NULL
INNER JOIN
  awards AS aw
ON
  b.id = aw.player_id
SET
  aw.player_id = a.id 
```

# html - 文本输入字段中的单击拖动选择问题也会滚动父元素、webkit 错误或功能？

> ID：10036044
> 
> 赞同：11
> 
> 时间：2012-04-05T21:09:36.997
> 
> 标签：html, css, google-chrome, webkit, user-experience

自去年以来，我一直在使用 webkit 浏览器时遇到一种奇怪的行为，这让我发疯了。

我已经尝试对此进行搜索，但我似乎无法找到与此问题相关的关键字。

我有一个html结构如下：

```
<div style="border: 1px solid #000; width:200px;height:200px; overflow:hidden;position:relative">
    <div style="width:200px;position:absolute">
        <p>long line</p>
        <p><input type="text" value=""/></p>
        <p>long line</p>
    </div>
</div>​ 
```

您可以访问 jdfiddle 链接中的实时示例： [jsfiddle](http://jsfiddle.net/PJWz7/)

对我来说，使用 Chrome(18)，当在输入框中单击并拖动文本输入字段中的文本时，您可以“滚动”父元素，尽管 CSS 溢出设置为隐藏。

您可以通过单击选择并拖动右、上、下、左来从小提琴中尝试它。创造奇迹。

更复杂的 html 结构会产生更奇怪的滚动行为。事实上，我几乎可以做一个元素依次滑入和滑出的幻灯片动画，只需拖动选择即可。

幸运的是，这种行为在 Firefox 中是没有的。

有没有人也遇到这种行为？这应该是webkit的一个特性吗？有谁知道如何禁用这种“滚动”行为？

谢谢！

编辑：感谢@PhilipK，他找到了一个相关的帖子，下面回答了一个javascript解决方案。由于我的网页大量使用 javascript，我想知道是否有任何可能的 CSS 解决方案。

edit2：感谢@tiffon，他找到了另一个 javascript 解决方案。他的解决方案可以在 CSS 中实现（但对鼠标事件有一些限制，因此 CSS 解决方案有点不完整）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T00:16:00.473

我认为滥用`pointer-events: none;`可能是另一种选择：

重复问题：[https ://stackoverflow.com/a/13897395/1888292](https://stackoverflow.com/a/13897395/1888292)

[http://jsfiddle.net/7CuBV/21/](http://jsfiddle.net/7CuBV/21/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T22:51:15.490

所以这对我有用 - 见[这里](https://stackoverflow.com/questions/2467386/how-can-safari-be-prevented-from-scrolling-an-overflowhidden-iframe)- 基本上听`onscroll`事件并将两者都设置`scrollTop`为`scrollLeft`0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T12:14:49.287

我也发现了这个问题，经过一些实验后，我`overflow:hidden`从一个父`div`s（正在滚动的最外层`div`）中删除了一个，它似乎已经解决了它。我没有使用任何 iframe。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-25T15:32:56.420

我知道这是一个旧线程，但我刚刚遇到了同样的问题。

我创建了这个修复：

```
// DISABLE INPUT DRAG SCROLL (CHROME BUG FIX)
var disableScrollDrag = false;
$('input, select, textarea').unbind('mousedown').mousedown(function(e) {
    disableScrollDrag = true;
    $(this).css('pointer-events', 'none').addClass('disable-scroll-drag');
});

$('body').mousemove(function() {
    if (disableScrollDrag === true) {
        $('.disable-scroll-drag').each(function () {
            $(this).css('pointer-events', 'auto');
        });
        disableScrollDrag = false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T01:21:00.620

上面链接的示例给出了基本思想，但它是关于 iframe 的，在 div 内的文本输入上实现可能会有点混乱，这是我（和原始海报）所面临的。

这就是我最终使用 jquery 做的事情；

```
$('body').on('select', '.my_text_input', function(e) {
        $('.div_that_was_moving_weirdly').scrollLeft(0);
         return false;
    }); 
```

这仍然是不完美的，因为会有一个不和谐的滚动然后跳回来，因为选择事件似乎在您完成选择之前不会启动。我尝试了各种活动，但这是我能做的最好的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T19:45:02.957

第一次和这个奇怪的人搏斗。我发现如果我将文本字段的宽度设置为小于或等于容器的宽度，则父元素不会相对于文本输入值滚动。

# c# - 如何在asp.net c#中将值存储到href链接多个值

> ID：10036045
> 
> 赞同：3
> 
> 时间：2012-04-05T21:09:41.290
> 
> 标签：c#, asp.net

我想将大量值存储到此链接，以便以这种样式将值传递给 aspx 页面，如何增加值的数量。

```
htmlBody = string.Format(" Hi "+userName+ 
"\n Thank you for creating an account with RSS MANAGEMENT SYSTEM \n </ br>" + 
"Please click the below link to activate your account <br />" + 
"<a href='http://localhost:2386/ActivateUser.aspx?userName{0}&Id={1}'>Activate {0} </a>",
UName, user_name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:12:18.597

所以你的意思是这样的：

```
var someothervalue=1:
string.format("<a href='http://localhost:2386/ActivateUser.aspx?userName{0}&Id={1}'>Activate {0} </a>{2}", 
UName, user_name,someothervalue) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:16:58.527

像这样的东西？

```
var values = new Dictionary<string,string>{ 
                                                {"username", user_name},
                                                {"id", UName},
                                                {"otherparam", "lalala"}
                                         };

var queryString = string.Join("&" + values.Select(x => x.Key + "=" + x.Value));

var link = string.format("<a href='http://localhost:2386/ActivateUser.aspx?{0}'>Activate {1} </a>", queryString, user_name); 
```

# ruby-on-rails - 如何命名选择中的空白值？

> ID：10036050
> 
> 赞同：30
> 
> 时间：2012-04-05T21:10:01.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, simple-form

我在我的应用程序中使用 simple_form。

如何在我的选择中赋予空白值与 "" 不同的文本？

我只是找到一个选项是否包含空白。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-05T21:18:07.407

这取决于您如何构建选择选项。如果你像下面的代码那样做，只需将一个字符串传递给 :include 空白。

```
select("post", "person_id", Person.all.collect {|p| [ p.name, p.id ] }, {:include_blank => 'Some text here'}) 
```

如果您使用 options_for_select() 设置选项，则可以执行以下操作：

```
options_for_select([["Dollar", "$"], ["Kroner", "DKK"]]) 
```

value="" 是数组中的第二个值，下拉列表中显示的名称是第一个。因此，在您的情况下，您可以将第二个答案更改为如下所示：

```
options_for_select([["Some text here", ""], ["Dollar", "$"], ["Kroner", "DKK"]]) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-06T11:24:05.210

代替

```
:include_blank => true 
```

尝试

```
:include_blank => "your text here" 
```

如果这是你正在寻找的。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-23T07:52:38.870

如果您正在使用该`select_tag(name, option_tags = nil, options = {})`函数，正确的选项是`:prompt => "Some text"`而不是为`select`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T21:17:26.853

您可以通过添加`["Your Text", ""]`到传递给的数组的开头来手动执行此操作`options_for_select`，或者添加`"<option value=\"\">#{h("Your Text"}</option>"`到传递给的字符串的开头`select_tag`。

# c#-4.0 - Html agility pack/xpath 通过 [index] 帮助选择子节点，好吗？

> ID：10036052
> 
> 赞同：1
> 
> 时间：2012-04-05T21:10:09.600
> 
> 标签：c#-4.0, xpath, html-agility-pack

我一直在使用 C#/ html 敏捷包中设置的节点工作一段时间，通过反复试验，我有一个要循环的节点列表，从循环中获取每个节点的子节点。我想通过索引 # 来引用它们（似乎是最简单的，但我在这里发布）。我尝试了不同的方法来格式化 xpath，包括“[0]”、“/[0]”、“tr/[0]”等。这是我到目前为止所拥有的，一切正常，直到第一个评论线：

```
protected override List<IDataPoint> ReturnDataPointsFromIndividualAddressString(string AddressString)
            {
                List<IDataPoint> earningsAnnouncements = new List<IDataPoint>();

                HtmlWeb hwObject = new HtmlWeb();
                HtmlDocument htmlDoc = hwObject.Load(AddressString);

                if (htmlDoc.DocumentNode != null)
                {
                    List<HtmlNode> nodeList = new List<HtmlNode>();

                    var nodes = htmlDoc.DocumentNode.SelectNodes("html[1]/body[1]/table[4]/tr[1]/td[1]/table[1]/tr");

                    if (nodes != null)
                    {
                        foreach (HtmlNode n in nodes)
                        {
                            if (n.OuterHtml.Contains("finance.yahoo.com"))
                                    nodeList.Add(n);
                        }
                    }

                    foreach (HtmlNode node in nodeList)
                    {
                        EarningsAnnouncementDP earningsAnnouncement = new EarningsAnnouncementDP();

                        //Error: Expression must evaluate to a node set.
                        earningsAnnouncement.Company = (node.SelectSingleNode("[0]")).InnerText.ToString();
                        earningsAnnouncement.Ticker = node.SelectSingleNode("[1]").InnerText.ToString();
                        earningsAnnouncement.Estimate = node.SelectSingleNode("[2]").InnerText.ToString();
                        earningsAnnouncement.AnnouncementTime = node.SelectSingleNode("[3]").InnerText.ToString();

                        earningsAnnouncements.Add(earningsAnnouncement);
                    }

                    return earningsAnnouncements;
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:11:56.310

您已经遍历到`tr`节点。现在您应该访问`td`节点。所以你可以使用`XPATH`下面的。

```
node.SelectSingleNode("./td[1]").InnerText;
node.SelectSingleNode("td[1]").InnerText; 
```

第一个`td`节点也被访问为`td[1]`和 not `td[0]`。

正如亚历克斯指出的那样，您可以编写如下内容，这是一个很好的建议。

```
node.ChildNodes[0].InnerText 
```

高温高压

# php - 从表中选择、计数和删除记录简化

> ID：10036054
> 
> 赞同：1
> 
> 时间：2012-04-05T21:10:15.780
> 
> 标签：php, mysql

我有个问题。我有 3 个如下表：

1）met_ID（primair）等。

2) magn_ID (primair) met_ID (secondary) ...

3) sens_ID (primair) met_ID (secondary) ...

我必须删除表 1 中的记录，其中表 2 或 3 中的 met_ID 计数小于 10..

```
SELECT COUNT(*) AS count, met_ID
FROM tbl_1, tbl_2
Where met_ID = met_ID
GROUP BY met_ID 
```

我进行了查询，并在 PHP 中使用 WHILE 循环从表 1 中删除了该记录。它可以正常删除 1000 条记录，但我不确定它是否会完全用于表中的 100 000 条或更多记录。

有什么方法可以完成我在 sql 查询中所做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:14:29.210

首先使用具有...的子查询

其次，您没有选择 table2 和 table3 中出现的总和，而是在进行交叉连接，因此您的计数实际上是产品...

试试这个

```
DELETE from table_1 where met_ID IN 
(
  select met_ID FROM
  (
      SELECT met_ID FROM tbl_2   
      union
      select met_id FROM tbl_3
  )
  GROUP BY met_ID
  HAVING count(*) < 10
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:16:12.660

```
DELETE from tbl_1
WHERE 10 > (select count(*) from tbl_2 where tbl2.met_id=tbl1.met_id) OR
      10 > (select count(*) from tbl_3 where tbl3.met_id=tbl1.met_id) 
```

# c# - 通过键入对组合框中的值进行排序

> ID：10036061
> 
> 赞同：0
> 
> 时间：2012-04-05T21:10:44.777
> 
> 标签：c#

我有一个组合框，其中填充了`JobCode`数据库中的数据字段。有 1000 个`jobcode`，当用户需要选择一个时，`jobcode`他必须向下滚动`jobcode`组合框中的所有 s。我是否可以这样做，如果用户键入其中的某个字母，`jobcode`则会`jobcode`在列表顶部的组合框中显示以该字母开头的 s，以便用户可以轻松选择。例如，像在组合框中的 keypressevent 中添加一些代码。

用户仍然必须从`jobcode`列表中的 s 中进行选择，不要保留部分或错误输入的数据，否则会在插入和更新时导致错误的数据输入。

```
public void jobcomboboxload()
{
       OleDbConnection oleDbConnection1 = new System.Data.OleDb.OleDbConnection(connString);
       oleDbConnection1.Open();
       OleDbCommand oleDbCommand1 = new System.Data.OleDb.OleDbCommand("Select jobpk,jobcode from  jobcodemastertable", oleDbConnection1);
       OleDbDataReader reader = oleDbCommand1.ExecuteReader();
       DataTable dt = new DataTable();
       dt.Columns.Add("jobpk", typeof(int));
       dt.Columns.Add("jobcode", typeof(string));
       dt.Load(reader);
       cmbjobcode.ValueMember = "jobpk";
       cmbjobcode.DisplayMember = "jobcode";
       cmbjobcode.DataSource = dt.DefaultView;

       oleDbConnection1.Close();
   } 
```

`jobcode`是一个独特的领域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:18:14.703

*   使用 cmbjobcode.AutoCompleteMode = AutoCompleteMode.Suggest （或枚举的其他值）
*   使用 cmbjobcode.AutoCompleteSource = AutoCompleteSource.ListItems
*   更改您的查询，包括字段 jobcode 上的子句 ORDER BY

请不要忘记`using`围绕您的 OleDbConnection、OleDbCommand 和 OleDbDataReader 的声明。这将确保正确处理前面提到的变量。

为了检查不完整的值，您应该添加 Validating 事件，并在该事件中检查输入的文本是否存在于您的字符串中。
组合框有一个名为 FindStringExact() 的方法可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:25:55.530

将您的`ComboBox` `AutoCompleteMode`属性设置为`Suggest`AND `AutoCompleteSource`，`ListItems`否则您将看不到建议。

就像史蒂夫说的那样，您可以更改查询并在请求字段中添加 ORDER BY 以设置您希望它们在 SELECT 语句中的顺序。

希望这会有所帮助，如果您有任何问题，请不要犹豫。

# c - 标准流和 vfork

> ID：10036068
> 
> 赞同：3
> 
> 时间：2012-04-05T21:11:11.060
> 
> 标签：c, linux, fork, stdio

我正在玩一些 fork/vfork 函数，有些事情让我感到困惑。在史蒂文斯的书中写道：

> 请注意，在图 8.3 中，我们调用 _exit 而不是 exit。
> 
> 正如我们在第 7.3 节中所描述的，_exit 不执行任何标准 I/O 缓冲区的刷新。如果我们改为调用 exit，结果是不确定的。根据标准 I/O 库的实现，我们可能会看到输出没有差异，或者我们可能会发现父级 printf 的输出已经消失。如果子调用 exit，实现会刷新标准 I/O 流。如果这是库采取的唯一操作，那么我们将看到与子调用 _exit 时生成的输出没有区别。但是，如果实现还关闭了标准 I/O 流，则表示标准输出的 FILE 对象的内存将被清除。因为child是借用parent的地址空间，所以当parent恢复并调用printf时，不会出现任何输出，并且 printf 将返回 -1。请注意，父级的 STDOUT_FILENO 仍然有效，因为子级获得了父级文件描述符数组的副本（参见图 8.2）。大多数现代的退出实现都不会费心去关闭流。因为进程即将退出，内核会关闭进程中所有打开的文件描述符。在库中关闭它们只会增加开销而没有任何好处。

所以我尝试测试是否会出现 printf 错误，在我的 vfork 手册中有：

> 所有打开的 stdio(3) 流都被刷新和关闭。由 tmpfile(3) 创建的文件被删除。

但是当我编译并执行这个程序时：

```
 #include<stdio.h>
  #include<stdlib.h>
  #include<unistd.h>
  #include<sys/types.h>
  #include<sys/wait.h>

  int main()
{
  int s;
  pid_t ret;
  if (vfork() == 0)
  {
      //abort();
      exit(6);
  }
  else
  {
      ret=wait(&s);
      printf("termination status to %d\n",s);
      if (WIFEXITED(s))
          printf("normalnie, status to %d\n",WEXITSTATUS(s));
  }
  return 0;
} 
```

一切正常，我没有收到任何 printf 错误。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:20:14.780

您引用的段落末尾说：

> 大多数现代的退出实现都不会费心去关闭流。因为进程即将退出，内核会关闭进程中所有打开的文件描述符。在库中关闭它们只会增加开销而没有任何好处。

这很可能是正在发生的事情。您的操作系统实际上并没有关闭流（但它可能会刷新它）。

重要的不是`exit`这里做什么，而是它的基本概念。孩子正在共享父母的内存和堆栈框架。这意味着孩子可以很容易地改变父母没有预料到的东西，这很容易导致父母在重新开始运行时崩溃或行为不端。的手册页`vfork`说进程唯一可以做的就是调用`exit()`或`exec`. 事实上，孩子甚至不应该分配内存或修改任何变量。

要查看其影响，请尝试将`vfork`调用放在函数内部，让子函数返回或修改其中的一些变量，看看会发生什么。

# php - mysql_error 不生成错误消息

> ID：10036071
> 
> 赞同：0
> 
> 时间：2012-04-05T21:11:18.643
> 
> 标签：php, mysql

mysql连接失败时不显示错误消息

```
 if( ! $this->remote_connection_id = @mysql_connect($vars['hostname'], $vars['username'], $vars['password'], TRUE))
        {
            die('Could not connect: ' . mysql_error());
        } 
```

只显示`Could not connect:`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:13:55.753

尝试正确添加括号。

代替：

```
if( ! $a = foo()) 
```

采用：

```
if( !($a = foo())) 
```

您没有收到错误的原因是因为连接成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:34:14.760

尝试

```
$mysqli = new mysqli ( $vars ['hostname'], $vars ['username'], $vars ['password'], "test" );
if ($mysqli->connect_errno) {
    printf ( "Connect failed: %s\n", $mysqli->connect_error );
}
else
{
    echo "Am OK" ;

} 
```

谢谢

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T06:17:45.980

你有2个连接吗？像这样：

```
$link_lang_db = mysql_connect($conf_lang_db_host, $conf_lang_db_user, $conf_lang_db_password, 1) or die('Could not connect: ' . mysql_error($link_lang_db));
$link_editor_db = mysql_connect($conf_editor_db_host, $conf_editor_db_user, $conf_editor_db_password, 1) or die('Could not connect: ' . mysql_error($link_editor_db)); 
```

然后试试这个：

```
$result = mysql_query($query24f, $link_lang_db) or die("Error: " .mysql_error($link_lang_db)); 
```

希望它有所帮助。

# php - 如何检查一个类的对象是否已经存在于 PHP 中？

> ID：10036075
> 
> 赞同：4
> 
> 时间：2012-04-05T21:11:26.457
> 
> 标签：php

考虑以下代码场景：

```
<?php

//widgetfactory.class.php
// define a class
class WidgetFactory
{
  var $oink = 'moo';
}

?>

<?php

//this is index.php
include_once('widgetfactory.class.php');

// create a new object
//before creating object make sure that it already doesn't exist

if(!isset($WF))
{
$WF = new WidgetFactory();
}

?> 
```

widgetfactory 类在 widgetfactoryclass.php 文件中，我已将此文件包含在我的 index.php 文件中，我所有的站点操作都通过 index.php 运行，即对于包含此文件的每个操作，现在我想创建 widgetfactory 类的对象仅当它已经不存在时。我正在`isset()`为此目的使用，还有其他更好的选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T21:18:28.933

使用全局变量*可能*是实现这一目标的一种方式。执行此操作的常用方法是单例实例：

```
class WidgetFactory {
   private static $instance = NULL;

   static public function getInstance()
   {
      if (self::$instance === NULL)
         self::$instance = new WidgetFactory();
      return self::$instance;
   }

   /*
    * Protected CTOR
    */
   protected function __construct()
   {
   }
} 
```

`$WF`然后，稍后，您可以像这样检索实例，而不是检查全局变量：

```
$WF = WidgetFactory::getInstance(); 
```

声明的构造函数`WidgetFactory`是`protected`为了确保实例只能由`WidgetFactory`它自己创建。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T08:39:51.550

这应该做的工作：

```
if ( ($obj instanceof MyClass) != true ) {
    $obj = new MyClass();
} 
```

# php - 日期范围 - 最大范围，但不超过 - 在 PHP 中

> ID：10036078
> 
> 赞同：-1
> 
> 时间：2012-04-05T21:11:46.340
> 
> 标签：php, datetime

我有一个每月定期账单，我想在到期前 6 天向该人发送一封电子邮件，如果已经发送，则不要重新发送。在 PHP 中工作。我目前在数据库中有两列：paidUntil 和 sentReminder，都是 DATETIME，但我可以根据需要进行更改。

所以，在伪代码中：

```
IF(between 6 days before expiration and expiration date AND reminder NOT sent)
  send reminder
  set that reminder was already sent
else
  if the month has past and time for new reminder, go back to top 
```

下个月，重新开始整个过程​​。请注意，人们可以在每月的 1 日、9 日或任何给定日期到期。请帮忙！

编辑： **我基本上想在每个月的会员到期前 6 或 5 天向某人发送一次提醒**。就这样。这是我的一些代码，但我一直在犹豫如何检查我发送最后一次提醒的时间是否已经过得足以生成一个新的......抱歉这里的所有评论！

```
 $paidUntil = strtotime($oneUser->paidUntil);
    $paidUntilMonthPrior = strtotime('-1 month', $paidUntil);

    $reminderSent = strtotime($oneUser->reminderSent);

    //$paidDateRemindRange = strtotime('-6 days', $paidUntil);      //6 days till u remind somebody
    $noNeedToSend = strtotime('+25 days', $reminderSent);

    //$paidDateReset = strtotime('+1 day', $paidUntil);

    //if($thisMonth==date('F',$paidUntil)) {
    //  $sameMonth=true;
    //}

    //if($todayTime>$paidDateReminder && $todayTime<$paidUntil && $todayTime>$reminderSent)
    //  $expirationRange=true;              

    if($todayTime < $noNeedToSend) {
        // is within 25 days from last sending - do nothing
    } 
    elseif($todayTime>$noNeedToSend && $todayTime<$paidUntil) {
        //is between 25 days and still less than the paid until time AND has not been sent this cycle
        // send expiration email and mark that its been sent
        $expirationRange=true;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:19:32.763

我认为所有好的代码都始于一个可靠的计划。你有一个可靠的计划。看起来你不需要任何帮助。而且，一般来说，我们只想回答人们已经尝试过编码并遇到困难的问题。

但也许你错过了寻找两个`datetime`s 之间差异的逻辑？如果是这样，这里有一个例子：

```
<?php
$datetime1 = new DateTime('2012-01-11');
$datetime2 = new DateTime('2012-01-13');
$interval = $datetime1->diff($datetime2);
?> 
```

# java - 在android中解析xml文件

> ID：10036080
> 
> 赞同：2
> 
> 时间：2012-04-05T21:11:51.170
> 
> 标签：java, android, xml

我正在使用来自普通 java 应用程序的代码开发一个 android 应用程序。在这个 java 应用程序中，我正在解析一个 XML 文件，如下所示：

```
File xmlFile = new File("../project/src/resources/words.xml"); 
```

现在在android中这似乎不起作用。我得到一个文件未找到异常。我试图将文件保存在`res/xml`目录中，但我不确定如何访问它。

我可以使用与我的 java 应用程序相同的代码来解析 XML，还是有一种特殊的方法来解析 android 中的 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:16:35.550

是什么`../project/src/resources.words.xml`？这是您开发机器上项目目录中的路径名吗？当然，Android 程序将无法访问您机器上定义的文件路径。

如果`words.xml`是您想要访问的静态文件，则应将其包含在`/res/raw`项目的子目录中。然后您可以使用此处文档中描述的方法访问它：

[http://developer.android.com/reference/android/content/res/Resources.html#openRawResource(int](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource(int) )

或者，您可以将其放入`/assets`并使用此方法：

[http://developer.android.com/reference/android/content/res/AssetManager.html](http://developer.android.com/reference/android/content/res/AssetManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:20:14.477

你可以做：

```
InputStream is = this.getResources().openRawResource(resourceId);
BufferedReader br = new BufferedReader(new InputStreamReader(is));
... then read the content of the file as a stream ... 
```

您的文件必须放在`res/raw/yourfile`与您的文件名相对应`resourceId`的整数中`R.raw...`（`R.raw.yourfile`）

# maven - 如何使用 maven pom.xml 创建 jar

> ID：10036090
> 
> 赞同：13
> 
> 时间：2012-04-05T21:13:01.270
> 
> 标签：maven, jar, pom.xml

我需要一个示例 pom 文件来为我的 spring 项目创建一个 jar 文件。创建jar文件时如何指定为资源创建目录和文件夹。我可以使用 pom 创建 jar 文件。但我需要在我的 jar 文件中包含我的 applicationContext.xml。

如何在maven中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T21:17:56.727

如何做到这一点[在这里解释](http://draptik.wordpress.com/tag/pom-xml/)

这篇文章详细介绍了这个 pom，它使用 maven-jar-plugin 来完成它，我在以前的工作中编写了许多看起来几乎与此相同的 pom。希望这可以帮助

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.foo</groupId>
  <artifactId>my-app</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>my-app</name>
  <url>http://maven.apache.org</url>
  <build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
      <archive>
        <manifest>
          <addClasspath>true</addClasspath>
          <mainClass>org.foo.App</mainClass>
        </manifest>
      </archive>
    </configuration>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
  </plugin>
</plugins>
</build>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T22:27:53.833

Maven 使用约定优于配置，因此所有标准 Maven 项目都具有相同的[文件夹结构](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。由于应用程序上下文文件是一种资源，因此您应该将其放入`src/main/resources`文件夹（或其子文件夹之一）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T04:24:52.520

http://maven.apache.org/maven-v4_0_0.xsd"> 4.0.0 com.tridenthyundai.ains tridenthyundai war 1.0-SNAPSHOT Trident Hyundai Maven Webapp [http://maven.apache.org](http://maven.apache.org)

```
<!-- <repositories> <repository> <id>eclipselink</id> <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url> 
    </repository> </repositories> -->

<properties>
    <spring.version>3.0.5.RELEASE</spring.version>
    <junit.version>4.11</junit.version>
    <jdk.version>1.7</jdk.version>
    <jetty.version>8.1.8.v20121106</jetty.version>
</properties>

<dependencies>

    <!-- Spring 3 dependencies -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Apache Commons file upload -->
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>

    <!-- Apache Commons IO -->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.9</version>
    </dependency>

    <!-- See http://wiki.eclipse.org/EclipseLink/Maven -->
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.0.0</version>
    </dependency>

    <!-- optional - only needed if you are using JPA outside of a Java EE container -->
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.0</version>
    </dependency>

    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.17</version>
    </dependency>

    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
    </dependency>

</dependencies>
<build>
    <finalName>tridenthyundai</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>${jdk.version}</source>
                <target>${jdk.version}</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>${jetty.version}</version>
        </plugin>

        <!-- LOCAL Maven Tomcat Plugin -->
        <!-- <plugin> <groupId>org.apache.tomcat.maven</groupId> <artifactId>tomcat7-maven-plugin</artifactId> 
            <version>2.1</version> <configuration> <url>http://localhost:8080/manager/text</url> 
            <path>/tridenthyundai</path> <username>admin</username> <password>admin</password> 
            </configuration> </plugin> -->

        <!-- PRODUCTION Maven Tomcat Plugin -->
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <url>http://mobile.saptalabs.com/manager/text</url>
                <path>/tridenthyundai</path>
                <username>user</username>
                <password>passcode</password>
            </configuration>
        </plugin>

    </plugins>
</build> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-22T14:23:44.180

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.sapta.hr</groupId>
    <artifactId>hrweb</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>Saptalabs HR Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <repositories>
        <repository>
            <id>eclipselink</id>
            <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url>
        </repository>

        <repository>
            <id>releases</id>
            <name>Releases</name>
            <url>https://oss.sonatype.org/content/repositories/releases</url>
        </repository>
    </repositories>

    <properties>
        <spring.version>3.0.5.RELEASE</spring.version>
        <junit.version>4.11</junit.version>
        <jdk.version>1.7</jdk.version>
        <jetty.version>8.1.8.v20121106</jetty.version>
    </properties>

    <dependencies>

        <!-- Spring 3 dependencies -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>com.itextpdf</groupId>
            <artifactId>itextpdf</artifactId>
            <version>5.0.6</version>
        </dependency>

        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.9</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>3.7</version>
        </dependency>

        <!-- Apache Commons file upload -->
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2.2</version>
        </dependency>

        <!-- Apache Commons IO -->
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.9</version>
        </dependency>

        <!-- See http://wiki.eclipse.org/EclipseLink/Maven -->
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>eclipselink</artifactId>
            <version>2.0.0</version>
        </dependency>

        <!-- optional - only needed if you are using JPA outside of a Java EE container -->
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>javax.persistence</artifactId>
            <version>2.0.0</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.17</version>
        </dependency>

        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
        </dependency>

        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.3</version>
        </dependency>

        <dependency>
            <groupId>com.googlecode.mp4parser</groupId>
            <artifactId>isoparser</artifactId>
            <version>1.0-RC-27</version>
        </dependency>

        <dependency>
            <groupId>com.sapta.hr</groupId>
            <artifactId>hrcommon</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>

    </dependencies>
    <build>
        <finalName>saptalabs</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>${jdk.version}</source>
                    <target>${jdk.version}</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>${jetty.version}</version>
            </plugin>

            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <url>http://localhost:8081/manager/text</url>
                    <path>/saptalabs</path>
                    <username>admin</username>
                    <password>admin</password>
                </configuration>
            </plugin>

        </plugins>
    </build>
</project> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-05T20:25:59.290

您需要使用[maven jar 插件](https://maven.apache.org/plugins/maven-jar-plugin/)才能从项目中生成 Jar：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <classpathPrefix>lib/</classpathPrefix>
                <mainClass>MainClass</mainClass>
            </manifest>
        </archive>
    </configuration>
</plugin> 
```

查看有关使用 Maven 生成 Jar 文件的更多信息：[https ://javatutorial.net/create-java-jar-file-with-maven](https://javatutorial.net/create-java-jar-file-with-maven)

# ruby - 如何下载 Gem 的代码？

> ID：10036099
> 
> 赞同：0
> 
> 时间：2012-04-05T21:13:54.727
> 
> 标签：ruby, gem

我想下载 gem 的代码，但作者没有提供 Github 存储库（或其他任何东西）的链接来直接下载它。现在，`gem install`复制并复制了源代码所在的“ruby/gems/...”下的目录。有没有更简单的方法（单线）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:10:46.563

你可以`gem unpack gem_name`，这将解压当前工作目录中的 gem。如果已经安装，将使用本地版本，否则将首先获取：

```
→ gem unpack datamapper
Fetching: datamapper-1.2.0.gem (100%)
Unpacked gem: '/Users/michi/datamapper-1.2.0' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:03:14.890

您可以使用 gem-open，一个安装后的 gem，您可以使用它在编辑器中打开 gem：[https ://github.com/fnando/gem-open](https://github.com/fnando/gem-open)

# iphone - 在特定时间设置日期选择器

> ID：10036104
> 
> 赞同：0
> 
> 时间：2012-04-05T21:14:18.530
> 
> 标签：iphone, datepicker, alarm

大家好我有问题

我的代码我用今天的日期设置了一个日期选择器，之后如果用户更改了选择器，我设置了一个警报以在选择器的日期响铃。

我怎样才能在这些日期“阻止选择器”？

这是我的代码，希望对您有所帮助

```
NSDate *pickerDate = [NSDate date];

NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

// Divisione della data in fattori
NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit )
                                               fromDate:pickerDate];
NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit )
                                               fromDate:pickerDate];
// Set Up dell'alarme considerando tutti i fattori
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:[dateComponents day]];
[dateComps setMonth:[dateComponents month]];
[dateComps setYear:[dateComponents year]];
[dateComps setHour:[timeComponents hour]];
[dateComps setMinute:[timeComponents minute]];
//Notifica in meno di un minuto
[dateComps setSecond:0];
NSDate *itemDate = [calendar dateFromComponents:dateComps];
[dateComps release];
[alarmDatePickerUno setDate:itemDate animated:YES];
[alarmDatePickerDue setDate:itemDate animated:YES];

   }

 // ALARM UNO
 // Set Allarme Uno

 -(IBAction)setAlarmUno:(id)sender{

NSLog(@"picker in allarme");

NSCalendar *currentCalendar = [NSCalendar currentCalendar]; 

//Setting dell'allarme in base al picker
AlarmDateUno = [alarmDatePickerUno date];
NSLog(@"allarme settata alle");
NSLog(@"%@", AlarmDateUno); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:21:07.203

```
alarmDatePickerUno.userInteractionEnabled = NO;
alarmDatePickerDue.userInteractionEnabled = NO; 
```

**澄清后编辑**

如果您想在应用程序启动之间使用日期，则需要以某种方式保留该日期。我建议使用`NSUserDefaults`，但您也可以使用更复杂的 Core Data 解决方案。使用`NSUserDefaults`您将在每次创建`UIDatePicker`保存的值时检查并使用它来初始化选择器。

```
// Get the date
NSDate *unoDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"PickerUnoKey"];
if (unoDate) { // If we have a persisted date, we set the date of the datePicker
    [alarmDatePickerUno setDate:unoDate animated:NO];
} 
```

那么当用户改变picker的值时，就需要存储新的值。

```
// When the datePicker value has changed, we store the value
[[NSUserDefaults standardUserDefaults] setObject:alarmDatePickerUno.date forKey:@"PickerUnoKey"]; 
```

# html - 我可以在 Mobile Safari 中将原生样式的滚动限制为一个轴吗？

> ID：10036114
> 
> 赞同：1
> 
> 时间：2012-04-05T21:15:27.347
> 
> 标签：html, css, ios, webkit, mobile-safari

要在 Mobile Safari 中启用 DOM 元素的原生样式滚动，您可以在包含元素上使用此自定义 CSS 属性：

```
-webkit-overflow-scrolling: touch; 
```

是否可以将滚动限制在单个轴上？我的目标是达到这个效果：

```
overflow-x: scroll;
overflow-y: hidden; 
```

如上所述定义标准 CSS 属性似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:17:37.877

根据我能找到的，目前看来这是不可能的。为了不让任何人挂起，我会将此标记为正确答案，直到/如果 Apple 对 Mobile Safari 的行为做出相关更改。

# vb6 - VB6中Form_Activate()和Form_Load()的顺序

> ID：10036115
> 
> 赞同：7
> 
> 时间：2012-04-05T21:15:29.130
> 
> 标签：vb6

在 VB6 中调用 Form_Load() 和 Form_Activate() 函数的顺序是什么？在表单的上下文中，“激活”是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T21:18:11.633

来自[KB138819](http://support.microsoft.com/kb/138819)：

> 该`Form_Load`事件在表单首次加载到内存时触发。

和

> [...]`Activate`每次窗体成为活动窗口时都会调用该事件，只要焦点已在应用程序中的窗体之间移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:49:35.680

你可以自己试试！

```
Option Explicit

Private Sub Form_Activate()
    MsgBox "Form_Activate"
End Sub

Private Sub Form_Load()
    MsgBox "Fom_Load"
End Sub 
```

Form_Load msgbox 总是先出来！

# svn - 使用 svnant 的问题

> ID：10036116
> 
> 赞同：0
> 
> 时间：2012-04-05T21:15:33.233
> 
> 标签：svn, ant, svnant

我从其他人那里获得了一个使用 svnant 的 ant 构建文件，但我在让它工作时遇到了问题。我将导致我出现问题的部分提取到一个单独的文件中：

```
<project name="rev-check macrodef">
    <sequential>    
        <!-- ant contrib task definition -->
        <taskdef resource="net/sf/antcontrib/antlib.xml">
          <classpath>
            <pathelement location="C:/rms-it-apps/ant/taskdefs/ant-contrib-1.0b3.jar"/>
          </classpath>
        </taskdef>

        <taskdef resource="org/tigris/subversion/svnant/svnantlib.xml" loaderref="svnant.loader">
          <classpath>
            <pathelement location="C:/rms-it-apps/ant/taskdefs/svnant-1.3.1/lib/svnant.jar"/>
            <pathelement location="C:/rms-it-apps/ant/taskdefs/svnant-1.3.1/lib/svnClientAdapter.jar"/>
            <pathelement location="C:/rms-it-apps/ant/taskdefs/svnant-1.3.1/lib/svnjavahl.jar"/>
           </classpath>
        </taskdef>
    </sequential>
    <!-- <svn svnkit="false" javahl="false"> -->
    <svn>
        <info target="C:/dev/workspace/rmsitpew/PEW/src" />
        <wcversion prefix="wc" path="C:/dev/workspace/rmsitpew/PEW/src" />
    </svn>
    <echo>Here 1</echo> 
```

当我尝试仅使用`<svn>`标签运行它时，我得到以下输出：

```
C:\dev\svnant>runant

C:\dev\svnant>C:\Programs\eclipse\plugins\org.apache.ant_1.8.2.v20120109-1030\bi
n\ant.bat
Buildfile: C:\dev\svnant\build.xml
      [svn] Missing 'javahl' dependencies on the classpath !

BUILD FAILED
C:\dev\svnant\build.xml:19: Cannot find javahl, svnkit nor command line svn clie
nt

Total time: 0 seconds 
```

我看到了一个使用标签运行它的建议，`<svn svnkit="false" javahl="false">`但后来我得到了这个输出：

```
C:\dev\svnant>C:\Programs\eclipse\plugins\org.apache.ant_1.8.2.v20120109-1030\bi
n\ant.bat
Buildfile: C:\dev\svnant\build.xml
      [svn] Deprecated attribute 'svnkit'. This attribute will disappear with SV
NANT 1.3.2\. Use svnSetting instead.
      [svn] Deprecated attribute 'javahl'. This attribute will disappear with SV
NANT 1.3.2\. Use svnSetting instead.
      [svn] svn: The path 'C:\dev\workspace\rmsitpew\PEW\src' appears to be part
 of a Subversion 1.7 or greater
      [svn] working copy rooted at 'C:\dev\workspace\rmsitpew'.
      [svn] Please upgrade your Subversion client to use this working copy.
      [svn] <Info> failed.

BUILD FAILED
C:\dev\svnant\build.xml:18: Failed to set 'info' properties 
```

以下是目录 C:\rms-it-apps\ant\taskdefs\svnant-1.3.1\lib 的内容：

```
04/05/2012  10:44 AM             3,010 GANYMED-LICENSE
04/05/2012  10:44 AM           244,831 ganymed.jar
04/05/2012  10:44 AM             2,800 JAVAHL-LICENSE
04/05/2012  10:44 AM               544 JNA-LICENSE
04/05/2012  10:44 AM           948,100 jna.jar
04/05/2012  10:44 AM             2,276 SEQUENCE-LICENSE
04/05/2012  10:44 AM            76,383 svnant.jar
04/05/2012  10:44 AM            11,935 SVNCLIENTADAPTER-LICENSE
04/05/2012  10:44 AM           215,757 svnClientAdapter.jar
04/05/2012  10:44 AM            89,412 svnjavahl.jar
04/05/2012  10:44 AM             2,695 SVNKit-LICENSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:50:29.230

一些问题：

*   您的命令行客户端 (svn) 似乎比您用于签出/创建工作副本的客户端版本旧。您在 ant 中使用的 svn 版本**必须**与您在此工作副本上使用的其他 svn 工具完全相同。该错误提示您需要将命令行客户端更新为 1.7 版本
*   javahl 需要在 windows 中安装一些奇怪的库。有关详细信息，请参见[此处](http://deadmanwalking.wordpress.com/2007/07/28/ant-svn-task-svnant-and-javahl/)。或者询问提供任务的人。
*   您可以首先忽略已弃用的警告。并在一切正常时修复它。

我建议坚持使用命令行客户端或使用 svnkit。

[在这里](http://subclipse.tigris.org/svnant/svn.html)，您可以找到所有可用工具的总体概述，您可以将其与 ant 任务一起使用。

# html - Google Maps HTML5 在我的手机（Safari 浏览器）上不起作用

> ID：10036120
> 
> 赞同：0
> 
> 时间：2012-04-05T21:15:48.630
> 
> 标签：html, google-maps

我目前正在升级到 Google Maps Geolocation API 的“新”HTML5 版本，但遇到了一些问题。该功能在我的电脑上完美运行，但在我的带有 Safari 浏览器的手机上却不行。代码如下：

```
if(navigator.geolocation) {

    navigator.geolocation.getCurrentPosition(function(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var speed = position.coords.altitude;
        var coords = new google.maps.LatLng(latitude, longitude);
        alert(position.coords.speed);
        var mapOptions = {
                          zoom: 15,
                          center: coords,
                          mapTypeControl: true,
                          navigationControlOptions: {
                              style: google.maps.NavigationControlStyle.SMALL
                          },

                          mapTypeId: google.maps.MapTypeId.ROADMAP
                         };

        map = new google.maps.Map(
            document.getElementById('weather-map'), mapOptions
        );

        var marker = new google.maps.Marker({
            position: coords,
            map: map
        });
    });

} else {
    alert('Geolocation API stöds inte i din webbläsare');
} 
```

如果我在手机上设置`alert()`并`if(navigator.geolocation) {`更新页面，则会出现警报窗口，但如果我移动`alert()`并设置它之后`navigator.geolocation.getCurrentPosition(...`它不会显示。我已经测试了浏览器是否能够使用这个 API，并且确实如此。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:04:37.737

我让它工作了！:) 我错过了一些重要的行，比如函数`initialize()`和`show_position(p)`通过 Stan Wiechers “ [geo-location-javascript](http://code.google.com/p/geo-location-javascript/) ”获得位置。

# objective-c - Mac OS X：如何强制字段编辑器滚动而不是换行？

> ID：10036122
> 
> 赞同：5
> 
> 时间：2012-04-05T21:15:58.313
> 
> 标签：objective-c, macos, cocoa, appkit

我有一个 Cocoa，基于文档的 Mac OS X 应用程序。

我的应用程序中的一个功能是可以双击进行编辑的文本项目列表。当用户双击其中一个文本项时，我将当前窗口的`fieldEditor`文本字段放在单击的文本项上以允许编辑。

一切正常，除了一个问题。我无法弄清楚如何使`fieldEditor`文本字段**剪辑**+**滚动**而不是**包装**其文本。这是它目前的样子：

![在此处输入图像描述](../Images/813a0484803d65c426d7dfb1c60f1724.png)

看看文本是如何换行到第二行的？我不想要那个。我希望它保持一行滚动（并出现剪辑）。

这是一个在文本较少的列表项上正常工作的示例：

![在此处输入图像描述](../Images/314ff6b17023aa15a0bbb3da3e7db997.png)

这是我在视图控制器中尝试的内容：

```
NSWindow *win = [listItemView window];
NSText *fieldEditor = [win fieldEditor:YES forObject:listItemView];
[fieldEditor setFont:[TDListItemView titleFont]];
[fieldEditor setAlignment:NSLeftTextAlignment];
[fieldEditor setDrawsBackground:YES];
[fieldEditor setBackgroundColor:[NSColor whiteColor]];
[fieldEditor setString:str];
[fieldEditor setDelegate:self];
[fieldEditor selectAll:nil];

if ([fieldEditor isKindOfClass:[NSTextView class]]) {
    NSTextView *tv = (NSTextView *)fieldEditor;
    NSMutableParagraphStyle *style = [[[tv defaultParagraphStyle] mutableCopy] autorelease];
    [style setLineBreakMode:NSLineBreakByClipping];
    [tv setDefaultParagraphStyle:style];
}

CGRect r = [self fieldEditorRectForBounds:[listItemView bounds] index:idx]; // height here is 10.0
[fieldEditor setFrame:r];
[fieldEditor setNeedsDisplay:YES];
[[self view] addSubview:fieldEditor];
[win makeFirstResponder:fieldEditor]; 
```

注意中间的那部分：我检查这`fieldEditor`是否是一个实例，`NSTextView`以便调用`setDefaultParagraphStyle:`它的方法。这是我尝试`fieldEditor`通过值来剪辑其文本`NSLineBreakByClipping`。它没有任何效果。而且我什至不确定这是我应该做的让`fieldEditor`滚动在一行上。

另请注意，我在我的`-fieldEditorRectForBounds:index:`方法中计算的矩形的高度是正确的，并且提供了一个大小适合单行文本（在本例中为 14.0 像素）的矩形。

`fieldEditor`为了使显示单行滚动/剪切文本，我缺少什么？

* * *

我还尝试在中间部分添加这些行：

```
 [[tv textContainer] setHeightTracksTextView:YES];
    [[tv textContainer] setWidthTracksTextView:YES]; 
```

这具有调整可见部分大小的预期效果，`fieldEditor`这很好。但坏消息是它并没有改变文本仍然被包裹的事实，而不是被剪裁+滚动的事实。:(

* * *

这似乎与这个常数有关：

```
NSStringDrawingUsesLineFragmentOrigin 
```

可用于以下`options:`参数：

```
-[NSAttributedString drawWithRect:options:attributes:] 
```

但就我而言，我使用的是`NSText`字段编辑器，而不是`NSAttributedString`. `NSText`我不知道如何用字段编辑器做这种事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:52:42.357

*嗯... NSTextView完全*依赖 NSScrollView来实现其滚动行为。我不确定是否还有更多我没有看到的内容，但看起来您的问题的“历史性”解决方案是：

**使用不同的控件**

您可以在其标准 IB 标签配置中使用可编辑的 NSTextField，启用编辑并选择滚动作为行为。如果配置正确，它已经为您完成了所有繁重的工作 - 无需直接使用字段编辑器。

...或者...

**欺骗**

将字段编辑器动态地放入适当大小和配置的 NSScrollView（只允许水平滚动；不显示滚动条），然后在完成编辑后移除滚动视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T15:30:49.610

```
NSMutableParagraphStyle* style = [[NSMutableParagraphStyle alloc] init];
[style setLineBreakMode:NSLineBreakByTruncatingHead];

NSMutableDictionary* attributes = [[NSMutableDictionary alloc] init];
[attributes setObject:style forKey:NSParagraphStyleAttributeName];

NSTextView* textView = [[NSTextView alloc] init];
[textView setTypingAttributes:attributes]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T03:16:20.013

如果您使用 NSTextView，请尝试以下代码....

```
[self.textView setMaxSize:NSMakeSize(FLT_MAX, FLT_MAX)];
[self.textView setHorizontallyResizable:YES];
[[self.textView textContainer] setWidthTracksTextView:NO];
[[self.textView textContainer] setContainerSize:NSMakeSize(FLT_MAX, FLT_MAX)]; 
```

# php - [更新]需要/包含一个php并将值传递给另一个需要/包含的php

> ID：10036125
> 
> 赞同：0
> 
> 时间：2012-04-05T21:16:21.277
> 
> 标签：php, include, require

我将在两个必需/包含的 php 文件之间传递一些值，例如：

mysql.php：

```
<?php
    $conn = mysql_pconnect("mysql.host.com","root","password") or trigger_error(mysql_error(),E_USER_ERROR);
?> 
```

有趣的.php：

```
<?php
    function fun() {
    mysql_select_db($conn);
    }
?> 
```

主.php：

```
<?php
    require_once('mysql.php');
    require_once('fun.php');
    fun();
    //Output: Error that can't find $conn
?> 
```

对不起，我描述得太简单了。我发现如果代码直接运行，我可以通过两个包含的文件传递任何东西。但如果其中一个写成函数（如 fun.php），则 fun() 无法读取 mysql.php 的值。任何人都可以给我一个解决方案？原谅我英语不好，PHP知识差> <

更新：我发现的解决方案之一是在每个函数中插入 mysql.php 的代码，例如：fun.php：

```
<?php
    function fun() {
        $conn = mysql_pconnect("mysql.host.com","root","password") or trigger_error(mysql_error(),E_USER_ERROR);
        mysql_select_db($conn);
    }
?> 
```

但问题是它非常烦人（因为我写了很多函数）并且可能不安全，因为它存储了 mysql 服务器的用户名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:10:16.290

你的问题非常令人困惑。如果我理解它，那么答案取决于您如何使用包含的信息。

如果需要在函数中使用变量，则需要在函数开头将变量声明为“全局”（如果您是 OOP，则为 Class）。

例如，如果您的 main.php 文件定义了以下示例函数：

```
function exampleFunction()
{
    global $var1; //from inc1.php
    global $var2; //from inc2.php
    //now do something with the variables and probably return a result
} 
```

如果您正在编写 OOP，

```
class SomeClass
{
      global $var1; //from inc1.php
      global $var2: //from inc2.php
      private $var3; //local to this class
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:36:07.680

尝试使用全局变量 $var1 可以称为
$GLOBALS['var1'];
或
$_GET['var1'] = 1; $var2 = $_GET['var1'];

# javascript - 在 jQuery.blur 事件中获取元素焦点的 id？

> ID：10036128
> 
> 赞同：1
> 
> 时间：2012-04-05T21:16:29.700
> 
> 标签：javascript, jquery, dom

我使用 jQuery 编写了一些代码来执行 ajax 调用并在用户将焦点从字段移开时在页面上显示一条消息。我的字段被调用，用户输入一些文本并单击一个按钮以使用给定值`txtLogin`在数据库中创建一个新用户帐户。`txtLogin`

问题是有效值必须包含四个字母、一个破折号，然后再包含四个字母。我的客户坚持表格应该有两个字段，一个用于前四个字母，另一个用于后四个字母。

假设这两个字段被称为`txtLogin0`和`txtLogin1`。当用户将焦点从字段移开时，我仍然想进行 ajax 调用，但是当用户从两个字段之一移动到另一个字段时，不应调用 ajax 调用！

我当前的代码如下所示。

```
$('#txtLogin').blur(function() {
    var login = $(this).val();
    var isValid = testLogin(login);
    if (!isValid) alert('Login is invalid');
}); 
```

我想象我的新代码如下所示：

```
$('#txtLogin0').add('#txtLogin1').blur(function() {
    var focusId = The Id of the newly focused element
    if (focusId==='txtLogin0' || focusId==='txtLogin1) return
    var login = $(#txtLogin0').val() + '-' + $('#txtLogin1').val();
    var isValid = testLogin(login);
    if (!isValid) alert('Login is invalid');
}); 
```

如何在 jQuery.blur 事件中获取焦点移动到的元素的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:34:47.180

一个简单的技巧是创建两个 var 来存储当前和前一个元素，`onfocus`并`onblur`在计时器内调用 validate 方法，该方法将在 0 毫秒内触发。试试下面的代码，我认为它接近你想要的。

[**演示**](http://jsfiddle.net/skram/WY539/4/)

```
var prevEl, curEl;
$(document).ready(function() {
    $('#txtLogin0, #txtLogin1').blur(function() {
        prevEl = this.id;

        setTimeout(validateLogin, 0);

    }).focus(function() {
        curEl = this.id;
    });
});

function validateLogin() {
    if ((prevEl === 'txtLogin0' && curEl === 'txtLogin1') || (curEl === 'txtLogin0' && prevEl === 'txtLogin1')) {
        return;
    }
    prevEl = ''; curEl = '';
    var login = $('#txtLogin0').val() + '-' + $('#txtLogin1').val();
    var isValid = testLogin(login);
    if (!isValid) alert('Login is invalid');
}

function testLogin(txt) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-05T21:18:32.203

```
var focusId = $(this).attr('id'); 
```

# asp.net-mvc-3 - 从 Blob 存储中检索图像以设置它们在视图中

> ID：10036137
> 
> 赞同：0
> 
> 时间：2012-04-05T21:17:25.457
> 
> 标签：asp.net-mvc-3, razor, azure-blob-storage, asp.net-mvc-views, asp.net-mvc-controller

我正在使用来自[https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/#configure-access的 blob 教程中的以下代码](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/#configure-access)

我成功地将图像上传到 blob 存储中。

```
 CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
RoleEnvironment.GetConfigurationSettingValue("BlobConnectionString"));

// Create the blob client
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Retrieve reference to a previously created container
CloudBlobContainer container = blobClient.GetContainerReference("mycontainer");

// Retrieve reference to a blob named "myblob"
CloudBlob blob = container.GetBlobReference("myblob");

        BlobStream blobstream = blob.OpenRead();

        objimg =  System.Drawing.Image.FromStream(blobstream, true); 
```

我正在尝试从 blob 中检索图像并将其存储在 objimg 中，稍后将在 UI 中使用它。

但是，当执行到“System.Drawing.Image.FromStream”时，页面卡住显示等待状态。

为什么会这样？在视图中“window.setInterval”应该调用一个控制器函数来返回获得的图像。我应该如何将它发送到视图并在视图中设置它？

谢谢，阿尼尔

# ruby - where 子句中的 SQLITE3 字符串似乎很混乱

> ID：10036138
> 
> 赞同：0
> 
> 时间：2012-04-05T21:17:26.487
> 
> 标签：ruby, sqlite

我想知道是否有人对使用 sqlite3 gem 和 ruby​​ 1.9.x 的以下语句之间的区别有任何澄清：

```
@db.execute("INSERT INTO table(a,b,c) VALUES (?,?,?)", 
some_int, other_int, some_string) 
```

和

```
@db.execute("INSERT INTO table(a,b,c) VALUES (#{some_int},"+ 
+"#{some_int}, #{some_string})") 
```

我的问题是：当我使用第一种插入方法时，我无法使用以下语句查询“c”列：

```
SELECT * FROM table WHERE c='some magic value' 
```

我可以使用这个：

```
"SELECT * FROM table WHERE c=?", "some magic value" 
```

但我真正想要使用的是

```
"SELECT * FROM table WHERE c IN ('#{options.join("','")}')" 
```

这不适用于插入的类型。

有谁知道在数据库级别阻止`IN`正常工作的区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:44:40.887

插入行查询是不可能的，但行查询在获取数据时使用。

您在移动应用程序中使用的 SQLite 无法正常工作 bat 您在 SQLite 中编写的此行查询 浏览该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:52:37.400

我很久以前就知道了，但忘了回来指出，以防有人在其他时间发现这个问题。

差异原来是斑点。显然，当您使用上面的第一种形式（使用 (?,?) 的替换方法）时，SQLite3 使用博客来输入数据。但是，如果您构造一个普通的 SQL 语句，它会作为常规字符串插入，并且两者并不等价。

# android - 使用phonegap改变android的活动

> ID：10036141
> 
> 赞同：0
> 
> 时间：2012-04-05T21:17:43.060
> 
> 标签：android, cordova

我开始使用手机差距在 android 上制作游戏。我想在不同的布局之间切换（比如改变活动）。由于 phonegap 中没有任何活动，因此它扩展了 Droidgap。任何答案将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:14:27.553

PhoneGap 基本上使用 Android Webview 来显示所有活动。只需创建不同的 HTML 页面并在它们之间建立链接，您就应该能够在所有活动之间导航。

# c++ - 自动包含不同版本的 OpenCV 库

> ID：10036144
> 
> 赞同：1
> 
> 时间：2012-04-05T21:18:02.197
> 
> 标签：c++, visual-studio, opencv

我已经在 Windows 7 上的 Visual Studio 2008 上自动包含我的 c++ 代码的 opencv 库文件，代码如下：

```
#ifndef NDEBUG
#pragma comment(lib, "opencv_core231d.lib")
#pragma comment(lib, "opencv_highgui231d.lib")
#pragma comment(lib, "opencv_imgproc231d.lib")
#else
#pragma comment(lib, "opencv_core231.lib")
#pragma comment(lib, "opencv_highgui231.lib")
#pragma comment(lib, "opencv_imgproc231.lib")
#endif 
```

但是当系统安装了不同版本的 opencv 库时我遇到了麻烦，因为 .lib 文件的文件名中有版本（在本例中为 2.31）。有没有一种好方法可以自动或接近自动检测可用的 opencv 库版本，然后将适当的版本字符串滑入编译指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T05:39:51.507

不同的 OpenCV 版本之间有微小的变化——不多，但足以在您从 2.0 更改为 2.2 或从 2.2 更改为 2.3.1 时使您的应用程序崩溃。此外，beta 2.4 版本与以前的版本相比有足够的变化。

所以最好是使用 OpenCV 版本测试您的应用程序，并仅使用这些 dll 交付它。

一个小例子：

```
Mat a(3,3,CV_8UC3);

a.setTo( Scalar(10) ); // in 2.3.1 will set all channels to 10,
// in 2.2 will only set first channel. 
```

相应的 2.2 调用将是

```
a.setTo(Scalar::all(10)); 
```

或者

```
a = 0; // runs fine on 2.3.1\. Equivalent to setTo().
// Does not compile on earlier versions 
```

另一个例子是`cv::drawPoly()`，它在 2.2 和 2.3.1 上有不同的签名。

鉴于这些更改没有得到很好的记录，因此错误地错过其中一个的机会非常高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T07:07:09.237

通过合并以下文章，我制定了在各种版本的 OPENCV 上运行代码的解决方案：

1.  [如何用宏创建字符串](https://stackoverflow.com/questions/195975/how-to-make-a-char-string-from-a-c-macros-value)
2.  [连接宏中的字符串](https://stackoverflow.com/questions/1739102/concatenating-strings-in-macros-c)
3.  [#defines 中的 Pragma 语句](https://stackoverflow.com/questions/3030099/c-c-pragma-in-define-macro)，[支持 MSDN 上的 VS2008](http://msdn.microsoft.com/en-us/library/d9x1s805%28v=vs.90%29.aspx)
4.  奖励：[如何在解决方案中定义全局设置](https://stackoverflow.com/questions/377075/visual-c-2008-how-to-have-global-settings-defined-in-a-solution)

如前所述，如果您在不兼容的版本之间弹出，这可能会导致一些严重的问题，但对于那些支持的版本和功能，这可能对某些人有用。使用此技术设置一次 opencv 版本，并让您的代码通过以下任一方式自动链接到所需版本

1.  # 在源代码的一处定义 OPENCV_VERSION

2.  在属性表中定义它
3.  在系统环境变量中定义它。

我的代码最终是这样的：

```
#include <iostream>

// #define OPENCV_VERSION $(OPENCV_VERSION)
// #define OPENCV_VERSION 220

#define QUOTE(name) #name
#define STR(macro) QUOTE(macro) 

#define LINK_TO_OPENCV(libname) __pragma(comment(lib, "opencv_" #libname STR(OPENCV_VERSION)))
#define LINK_TO_OPENCV_DEBUG(libname) __pragma(comment(lib, "opencv_" #libname STR(OPENCV_VERSION) "d"))

#ifndef NDEBUG
LINK_TO_OPENCV_DEBUG("core")
LINK_TO_OPENCV_DEBUG("highgui")
LINK_TO_OPENCV_DEBUG("imgproc")
#else
LINK_TO_OPENCV("core")
LINK_TO_OPENCV("highgui")
LINK_TO_OPENCV("imgproc")
#endif 

int main()
{
    std::cout << STR(LINK_TO_OPENCV("core")) << "\n";
    return 0;
} 
```

现在在任何你喜欢的地方设置 OPENCV_VERSION。例如，您可以让每个人都包含一个头文件，其中包含以下行：

```
#define OPENCV_VERSION 220 
```

或者您可以转到 Project->Properties->C/C++->Preprocessor 并将 Preprocessor Definitions 设置为 OPENCV_VERSION=220。*或者*，您可以在整个解决方案的共享属性表中执行相同的操作。

*或者*，这很重要，您可以使用此技术在 Windows 本身中定义一个名为 OPENCV_VERSION_ENV 的全局环境变量，并将其值设置为版本代码（例如 220）。然后您可以将预处理器定义设置为`OPENCV_VERSION=$(OPENCV_VERSION_ENV)`，并将环境变量引入链接命令。你不能这样做，`#define OPEN_VERSION $(OPENCV_VERSION_ENV)`但由于属性页会自动翻译 $(macros) 我们可以在那里获取环境变量。

# javascript - jQuery UI：如果元素必须具有 id="selectable"，我如何才能拥有多个“可选”元素？

> ID：10036153
> 
> 赞同：3
> 
> 时间：2012-04-05T21:18:34.607
> 
> 标签：javascript, jquery, jquery-ui

我能够找到所有演示都遵循这种模式：

```
<ol id="selectable">
<li class="ui-widget-content">Item 1</li>
<li class="ui-widget-content">Item 2</li>
    ..
</ol> 
```

[jQuery UI 可选演示](http://jqueryui.com/demos/selectable/#default)

我尝试将列表的 ID 更改为唯一的，但它似乎不起作用。是否要求可选元素具有“可选”的 id 和 ID，如果是这样，您如何使多个列表可选？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T21:20:14.107

不需要使用 id。事实上，您也不需要使用 html 列表。

下面的示例使用 a`<div>`作为容器，`<span>`元素作为可选择项。

```
<div class="group">
  <span>Item 1</span>
  <span>Item 2</span>
  <span>Item 3</span>
</div>

<script>
  $(".group").selectable({ filter: 'span' });
</script> 
```

下一个示例使用数据属性选择器`[data-album]`来定位多个容器。这些`<p>`元素中的每一个都将被转换为一个单独的可选择对象，它们的子`<img>`元素作为被选择者。

```
<p data-album="Vacation">
  <img src="..." />
  <img src="..." />
  <img src="..." />
</p>

<p data-album="Birthdays">
  <img src="..." />
  <img src="..." />
  <img src="..." />
</p>

<script>
  $("[data-album]").selectable({ filter: 'img' });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T21:22:17.780

操作代码为：

```
$(function() {
    $( "#selectable" ).selectable();
}); 
```

您可以替换`#selectable`为指向您想要选择的任何选择器。所以它不一定是一个ID。它可能是一个像`.selectable`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T21:21:59.947

使用类而不是元素。一个元素的类可以包含多个值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-05T21:25:07.587

只需更改 te 行

```
¥('selectable').selectable(); 
```

到

```
¥('idChosed').selectable(); 
```

对于您选择的每个元素

# php - 致命错误：调用未定义的函数 geoip_open()

> ID：10036154
> 
> 赞同：-2
> 
> 时间：2012-04-05T21:18:37.117
> 
> 标签：php, phpmyadmin, geoip

突然一切顺利，我不知道为什么会发生致命错误，谁能告诉我解决方案？

警告：include(lang.php) [function.include]：无法打开流：第 59 行 /var/httpdocs/dev52/include.php 中不允许操作

警告：include() [function.include]：在第 59 行的 /var/httpdocs/dev52/include.php 中打开 'lang.php' 以包含 (include_path='.:') 失败

警告：include(lang2.php) [function.include]：无法打开流：第 61 行 /var/httpdocs/dev52/include.php 中不允许操作

警告：include() [function.include]：无法在第 61 行的 /var/httpdocs/dev52/include.php 中打开 'lang2.php' 以包含 (include_path='.:')

警告：include_once(inc.php) [function.include-once]：无法打开流：第 265 行的 /var/httpdocs/dev52/include.php 中不允许操作

警告：include_once() [function.include]：在第 265 行的 /var/httpdocs/dev52/include.php 中打开 'inc.php' 以包含 (include_path='.:') 失败

致命错误：在第 266 行的 /var/httpdocs/dev52/include.php 中调用未定义的函数 geoip_open()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:24:07.560

我建议您联系您的虚拟主机。如果一切正常，但突然停止工作，尤其是在像 phpMyAdmin 这样广泛使用的软件包上，则很可能有人更改了配置设置并将其搞砸了。

如果这没有帮助，或者如果您自己拥有服务器，请尝试重新安装 phpMyAdmin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:24:19.660

嵌套包含有时会发生这种情况，检查是否有任何`include();`语句，`lang.php`如果有，则直接包含这些文件。

# css - CSS 类 .foo.bar （没有空格）和 .foo .bar （有空格）有什么区别

> ID：10036156
> 
> 赞同：193
> 
> 时间：2012-04-05T21:18:44.093
> 
> 标签：css

请您解释一下这两个 CSS 类语法之间的区别：

```
.element .symbol {} 
```

和

```
.element.large .symbol {} 
```

我不明白两者之间的区别。第一行表示应用相同样式的两个不同类。但是关于第二个，附在“.element”后面的“.large”是什么意思？

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2012-04-05T21:20:56.457

```
.element .symbol 
```

意思是`.symbol`里面`.element`

```
.element.symbol 
```

意味着`.element`也有课程`symbol`。

所以，

```
.element.large .symbol 
```

表示`.symbol`里面`.element`也有类`large`。

* * *

## 回答 #2

> 赞同：172
> 
> 时间：2012-04-05T21:29:49.647

我想你对第一个的意思有一点误解。

```
.element .symbol {} 
```

意味着这些 CSS 设置将应用于任何具有 class 的 HTML 元素，该`.symbol`元素位于具有 class 的元素内`.element`。

```
<div class="element">
    <div class="symbol" />
</div> 
```

在本例中，您的第一个 CSS 条目将影响`<div>`中间的标签。

您的第二个示例意味着第一类需要两个类才能受到影响。除此之外，它等于第一个。

```
<div class="element large">
    <div class="symbol" />
</div> 
```

因此，如果 HTML 看起来像这样，CSS 值也将应用于内部`<div>`标签。

如果要设置单独应用于多个类的 CSS 标记，则需要使用逗号将它们分开。所以它看起来像这样：

```
.element, .symbol {} 
```

*编辑：*通过请求链接到 CSS 选择器的[文档](http://www.w3schools.com/cssref/css_selectors.asp)。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-04-05T21:24:28.050

使用

```
.element.large 
```

指具有**两个**类的元素：

```
<div class="element large"></div> 
```

而不是元素的后代：

```
.element .large 
```

意思是：

```
<div class="element">
    <div class="large"></div>
</div> 
```

只要

```
<div class="large"></div> 
```

正在“接收”样式。

**基本上**，被空格隔开意味着两个有`descendant`关系的元素。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-05T21:26:44.430

您将`.element .symbol`在另一个元素内部有一个元素的情况下使用它。例如：

```
<div class="element">
    <i class="symbol"></i>
</div> 
```

如果你想区分一些 div，你可以添加一个额外的类来只定位那些不同的，并用`.element.large .symbol`. 因此，例如：

```
<div class="element large">
    <i class="symbol"></i>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T21:21:23.923

在您的第二个示例中，选择器的第一部分只是一个具有两个类的元素，如`<span class="element large">`or `<span class="large element">`。

通常，选择器的每一部分都适用于一个 HTML 元素。

`table[border].clname`表示具有边框属性和类 clname 的表，而`table [border] .clname`表示具有类 clname 的元素，在具有边框属性的元素中，在表中。

（编辑：好吧，我说的是“一个 HTML 元素”，但当然你可以拥有多个适用于此的表格。你明白。）

# android - 如何在android上从一页导航到另一页？（共：3页）

> ID：10036157
> 
> 赞同：2
> 
> 时间：2012-04-05T21:18:56.503
> 
> 标签：android

我是 Android 开发的新手，我有一个关于如何从一个页面导航到另一个页面的问题。实际上，我想要做的是：打开应用程序，出现第一页，上面写着“你好，我是活动 1”。然后有一个按钮，上面写着“下一步”，你按下下一步，然后导航到第二页，上面写着“你好，我是活动 2”。在这个页面中有两个按钮，第一个是“上一个”，它带你回到第 1 页，第二个是“下一个”，它带你到第 3 页。基本上，这就是我卡住的地方，第 1 页和第 2 页工作正常，下一个和上一个按钮都可以，但是当我从第 2 页按“下一个”按钮时，我无法导航到第 3 页。我已经在这里上传了我的源代码，所以你们可以下载它并将其导入Eclipse 以准确查看我所做的。

点击[这里](http://www.2shared.com/file/ZkTxfWlb/Test.html/)下载。

如果有人可以帮助队友，我会很高兴，在此先感谢。

好的，代码显示在这里，我创建了 3 个活动，我也在 Manifest 中注册了这些活动，我还为这 3 个活动创建了 3 个布局。

**活动一**

```
import android.app.Activity;<br>
import android.content.Intent;<br>
import android.os.Bundle;<br>
import android.view.View;<br>
import android.widget.Button;<br>

public class Activity1 extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

        Button next = (Button) findViewById(R.id.Button01);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                startActivityForResult(myIntent, 0);
            }

        });
    }
} 
```

**活动2**

```
import android.app.Activity;<br>
import android.content.Intent;<br>
import android.os.Bundle;<br>
import android.view.View;<br>
import android.widget.Button;<br>

public class Activity2 extends Activity {

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);

        Button next = (Button) findViewById(R.id.Button02);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }

        });
    }

public void onCreate1(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.main2);

    Button next = (Button) findViewById(R.id.Button04);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent1 = new Intent(view.getContext(), Activity3.class);
            startActivityForResult(myIntent1, 0);
        }

    });
}
} 
```

**活动3**

```
import android.app.Activity;<br>
import android.content.Intent;<br>
import android.os.Bundle;<br>
import android.view.View;<br>
import android.widget.Button;<br>

public class Activity3 extends Activity {

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main3);

        Button next = (Button) findViewById(R.id.Button04);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }

        });
    }
} 
```

**主要的.xml**

```
 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#000000"
    android:text="This is Activity 1" />

       <Button android:text="Next"
        android:id="@+id/Button01"
        android:layout_width="250px"
            android:textSize="18px"
        android:layout_height="55px">
    </Button>    

</LinearLayout> 
```

**main2.xml**

```
 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#000000"
    android:text="This is Activity 2" />

       <Button android:text="Previous"
        android:id="@+id/Button02"
        android:layout_width="250px"
            android:textSize="18px"
        android:layout_height="55px">
    </Button>

       <Button
           android:layout_width="162dp"
           android:layout_height="34dp"
           android:text="Next"
           android:id="@+id/Button04"
           android:textSize="18px" />

</LinearLayout> 
```

**main3.xml**

```
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textColor="#000000"
android:text="This is Activity 3" /> 
```

我还在 Manifest 中注册了我的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:35:14.737

第 1 步：在 Activity1 中替换`startActivityForResult()`为`startActivity()`

步骤#2：从 Activity2 中删除您当前的代码`onClick()`并将其替换为调用`startActivity()`以启动 Activity3

第 3 步：完全重写 Activity3，因为它要么无法编译，要么在运行时崩溃，因为您指的是不存在的小部件（Button04）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-22T00:56:54.717

我不确定是否为时已晚，但如果您仍然需要明确的答案，那么：

您将需要`start activities`. 有`isn't`一个`DIRECT page navigation code`，但是有一个`start Activity`。通过`starting an activity`您可以转到另一个页面，因为该页面与活动相关。

```
Intent myIntent = new Intent(Enter_Your_Current_Activity.this, Enter_The_Activity_You_Want_To_Navigate_To.class);
startActivity(myIntent); 
```

希望这可以帮助！

ps 我在代码中使用的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:38:27.683

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Activity1 extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

        Button next = (Button) findViewById(R.id.Button01);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                startActivityForResult(myIntent, 0);
            }

        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-16T06:39:11.700

将一个页面导航到另一个页面的简单方法是`startActivity new Intent(firstpagename.this,secondpagename.class);`

# javascript - jQuery如何从url中删除#

> ID：10036158
> 
> 赞同：2
> 
> 时间：2012-04-05T21:19:10.840
> 
> 标签：javascript, jquery

我的网址生成如下：仅在 ie9 中显示

```
http://myurl.com/#/categories/posts 
```

如何从 url 中删除 # 并使其`http://myurl.com/categories/posts`与我的其他页面一样？谢谢。

我可以这样使用吗？我如何检测#因为首页没有#。

```
if ($.browser.msie  && parseInt($.browser.version, 10) === 9 && window.location.href.indexOf("#")) 
    {
        document.location.href = String( document.location.href ).replace( /#/, "" );
    } 
```

删除 #/`.replace( /#\//, "" );`如前所述使用 Kevin B

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T21:20:28.833

这不是一个真正的 JQuery 工作 - 为此使用普通的 Javascript。

```
document.location.href = String( document.location.href ).replace( /#/, "" ); 
```

**编辑** 添加@Kevin B的完整答案

```
document.location.href = String( document.location.href ).replace( "#/", "" ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T05:51:13.957

只需为锚标记的点击事件添加“return false”。

```
$("#selectorname").click(function(){
    if ($.browser.msie  && parseInt($.browser.version, 10) === 9 && window.location.href.indexOf("#")) 
    {
        document.location.href = String( document.location.href ).replace( /#/, "" );
    }
    return false; /* This prevents url from # */
}); 
```

要不然

```
<a href="#" onclick='return false'>Hey click me, I'm # free</a> 
```

或者只是让它简单

```
$("#selectorname").click(function(e){
   /* some statements */
   e.preventDefault();
}); 
```

这可以防止不触发默认操作。详细信息[在这里](http://api.jquery.com/event.preventdefault/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T21:23:06.507

```
$("a").attr("href",$("a").attr("href").replace(/#/, "")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T09:02:27.450

`<a href="#" onclick="return false">Hey click me, I'm # free</a>`做这项工作。我用它在 Bootstrap 动态选项卡切换期间隐藏 #。谢谢

```
<ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#i-ab" onclick="return false">ab</a></li>
                            <li><a data-toggle="tab" href="#i-cd" onclick="return false">cd</a></li>
                            <li><a data-toggle="tab" href="#i-ef" onclick="return false">ef</a></li>
                        </ul> 
```

# java - 如何：使用 FileOutputStream 编写文件？

> ID：10036159
> 
> 赞同：0
> 
> 时间：2012-04-05T21:19:20.963
> 
> 标签：java, amazon-s3, amazon-web-services

我正在做的是我正在为 BufferOutputStream 读取的文件和每一行数据将保存在 FileOutputStream 中，我想指定输出数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:54:39.087

如果我理解正确，您想从 S3 下载文件并使用 BufferedOutputStream 写入您的本地目录。

```
 S3Object object = s3.getObject(new GetObjectRequest(bucketName, key));
    InputStream is = object.getObjectContent();

 // Creating file
        File file= new File(localFilePath);
        FileOutputStream fos = new FileOutputStream(file);
        BufferedOutputStream bos= new BufferedOutputStream(fos);

    int read = -1;

    while ((read = is.read()) != -1) {
        bos.write(read);
    }

    bos.flush();
    bos.close();
    is.close(); 
```

# c# - C# 通过 SSL/TLS 获取 xml 站点 - https://

> ID：10036161
> 
> 赞同：2
> 
> 时间：2012-04-05T21:19:35.487
> 
> 标签：c#, xml, https, rss, ssl-certificate

我需要能够在控制台程序中从 https 网站读取 xml/rss。

到目前为止，我的程序支持纯 http，我一直在四处寻找，但似乎找不到一种简单的方法来实现对 https 的支持。该站点是否具有有效的证书并不重要，但我会获得有关如何检查这些证书的提示。

我可能对此不太了解，因此请提供任何提示！

我目前为 http 做的是：

```
XmlTextReader rssReader;
XmlDocument rssDoc;
rssReader = new XmlTextReader(url);
rssDoc = new XmlDocument();
rssDoc.Load(rssReader); 
```

在没有受信任证书的站点上尝试此操作时，我收到一条错误消息：“底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。”

```
string url = "https://somesite.com";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream resStream = response.GetResponseStream(); 
```

我的程序需要支持受信任和不受信任的 https 站点。

程序在服务器上运行，因此必须在代码中处理不受信任的 https 站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:30:04.047

对于证书问题，请尝试以下...

```
ServicePointManager.ServerCertificateValidationCallback += new System.Net.Security.RemoteCertificateValidationCallback((s, ce, ch, ssl) => true); 
```

...在开始的某个地方 - 或在提出请求之前。

这基本上是无条件地验证任何证书，有点简化。

编辑：这是“盲目地”信任（并且对您的应用程序具有全局特性）-正确的实施将处理参数-或需要实施[ICertificatePolicy](http://msdn.microsoft.com/en-us/library/system.net.icertificatepolicy.aspx)以专门处理不同的主机/证书。

编辑（证书）：关于证书和 SSL 的实际工作方式 - 与上述相关（基于评论/讨论）......

[http://www.verisign.com/ssl/ssl-information-center/how-ssl-security-works/index.html](http://www.verisign.com/ssl/ssl-information-center/how-ssl-security-works/index.html)
[SSL 究竟是如何工作的？](https://stackoverflow.com/a/7381711/417747)
[https://superuser.com/questions/84572/public-key-encryption](https://superuser.com/questions/84572/public-key-encryption)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:25:06.837

您必须发送`HttpWebRequest`或使用`HttpClient`. 两者都是为建立/协商这些连接而设计的。

可能的欺骗：[如何使用 XmlTextReader 从 https 加载 xml](https://stackoverflow.com/questions/1587806/how-to-load-xml-from-https-using-xmltextreader)

[如何使用 WebRequest 访问使用 https 的 SSL 加密站点？](https://stackoverflow.com/questions/560804/how-do-i-use-webrequest-to-access-an-ssl-encrypted-site-using-https)

[C# 中带有 https 的 HttpWebRequest](https://stackoverflow.com/questions/542024/httpwebrequest-with-https-in-c-sharp)

# watir-webdriver - 'browser.goto()' 生成 UnhandledAlertError

> ID：10036166
> 
> 赞同：0
> 
> 时间：2012-04-05T21:19:47.683
> 
> 标签：watir-webdriver, goto

我尝试使用“watir-webdriver”，它工作得很好（在 Ubuntu Linux 11.10 上，带有 Firefox）。

但是，对于一个检查浏览器并显示模式警报的网站，在调用“goto()”方法时出现错误：

```
b.goto('http://www.website.com/that/checks/the/browser/and/displays/modal/alert.html')
Selenium::WebDriver::Error::UnhandledAlertError: Modal dialog present
        from [remote server] file://.... 
```

这是 HTML 页面的内容：

```
<script type='text/javascript' language='JavaScript'>browserCheck();</script> 
```

如何避免出现此错误？

问候，

下午

# ruby-on-rails - Rails 应用中静态页面的最佳实践

> ID：10036167
> 
> 赞同：3
> 
> 时间：2012-04-05T21:19:52.963
> 
> 标签：ruby-on-rails, rails-routing

我正在为本地企业开发一个 ruby​​ on rails 应用程序。这些页面是“静态的”，但可以通过我为它们构建的后端 CMS 进行更改。是否有为静态页面创建控制器的最佳实践？现在我有一个包含所有静态路由的站点控制器，就像这样。

路线.rb

```
get "site/home"
get "site/about_us"
get "site/faq"
get "site/discounts"
get "site/services"
get "site/contact_us"
get "site/admin"
get "site/posts" 
```

或者我会更好地为这样的站点控制器创建成员路由而没有 crud，因为“站点”不需要有 CRUD。

```
resources :sites, :except => [:index, :new, :create, :update, :destroy]
member do
  get :home
  get :about_us
  get :faq
  get :discounts
  get :services
  get :contact_us
  get :admin
  get :posts
end 
```

还是有最佳实践/更好的方法？任何答案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T21:38:26.317

如果静态页面列表不会增加，那么您可以保留该列表，但如果您想要像 site/any_new_url 这样的动态列表，请将路线另存为

```
get 'site/:cms_page' => 'cms#show' # all requests matching site/any_page will go CmsController, show method 
```

这将有助于减少路由膨胀，但缺点是您不知道所有路由是有效的。您的示例代码可以是

```
def show
  @page_data = Page.find_by_page(:params[:cms_page])
end 
```

显示.html.erb

```
<%= @page_data.html_safe %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:03:24.810

不知道，如果我认为这是一种最佳实践或令人厌恶的做法，但这是我在解决相同问题时想出的。

我的理由是，该网站提供了一些特定的功能（这对于本次讨论并不重要）+ 一堆关于组织本身的信息（关于我们、联系方式、常见问题解答、主页简介等）。由于所有这些数据确实与组织相关，因此将这些事物中的每一个都作为属性的组织模型似乎是合理的。这是模型：

```
class Organisation < ActiveRecord::Base

  ...validations stuff...

  def self.attrs_regex
    Regexp.new(self.attrs.join("|"))
  end

  def self.attrs
    self.column_names.reject{|name| name =~ /id|created_at|updated_at/}
  end

end 
```

然后我使用 attrs 类方法根据列生成路由。这是在我的 routes.rb 中：

```
Organisation.attrs.each do |attr|
  get "#{attr}" => "organisation##{attr}", :as => attr.to_sym
  get "#{attr}/edit" => "organisation#edit", :as => "#{attr}_edit".to_sym, :defaults => { :attribute => attr }
  post "#{attr}" => "organisation#update", :as => :organisation_update, :defaults => { :attribute => attr}, :constraints => Organisation.attrs_regex
end 
```

控制器有点奇怪，我对这里的代码并不感到兴奋，但无论如何它都在这里。我需要确保属性已设置并可用于视图，以便我可以在那里做正确的事情，所以我在应用程序控制器中设置它：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :set_attribute

  def set_attribute
    @attribute = action_name.parameterize
  end

end 
```

对于组织控制器，我只是在 before_filter 中将@organisation 变量设置为数据库中的第一行也是唯一的行，然后让 Rails 执行其通常的魔法调用方法、失败和呈现同名视图。编辑操作只使用一个视图文件来编辑所有不同的属性：

```
class OrganisationController < ApplicationController

  before_filter :set_organisation

  def edit
    authorize! :edit, @organisation
    @attribute = params[:attribute].parameterize
  end

  def update
    authorize! :update, @organisation
    @attribute = params[:attribute]
    respond_to do |format|
      if @organisation.update_attributes(params[:organisation])
        format.html do 
          redirect_to "/#{@attribute}", notice: t('successful_update')
        end
        format.json { head :ok }
      else
        format.html { render action: "edit" }
      end
    end
  end

  private

  def set_organisation
    @organisation = Organisation.first
  end

end 
```

所以这就是我结束的地方。像你一样，我找到了 SO 以利用这里沸腾的天才，但[结果令人失望](https://stackoverflow.com/questions/4797499/dealing-with-mostly-static-content-in-rails)。如果那里有更好的东西，我仍然希望找到它。

我喜欢我所做的是路由是根据组织表的结构自动生成的。

我不喜欢我所做的是根据组织表的结构自动生成路由。

我知道当我必须处理 i18n 路由时，我会为这个设计决定付出代价，而且可能还有一千个其他原因表明这是一个我尚未发现的坏主意，但目前我有一个满意的客户。

最后，这不是建议你应该这样做，但我希望给你比我得到的更多，这样你就可以推进你的想法，并希望最终更接近最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:36:39.223

如果您要构建一个可能连接到数据库的 CMS，并允许您的客户更改其网站页面上的文本，我不建议您使用静态页面。在 Rails 术语中，静态页面是指在 /views/pages 目录中创建 html 文件。如果你走这条路，那么你就偏离了 Rails 的设计方式。

我相信您想要做的是在数据库中创建与您的帖子相对应的表并存储您的帖子等数据。您可以将信息从它对应的模型中提取到控制器中，然后使用视图来显示数据. 您可以为这些页面创建布局，然后为您添加的每个页面创建控制器。

至于路线，我建议使用以下方法：

```
map.resource :controller_name 
```

然后，您将在相应的显示控制器操作和每个页面的视图中添加显示来自 CMS 的信息的代码。

# caching - 替换 ravendb 中的现有数据库/概念证明

> ID：10036168
> 
> 赞同：1
> 
> 时间：2012-04-05T21:20:01.767
> 
> 标签：caching, ravendb

我们计划在 Intranet 上更改我们的多租户订购系统。

产品目录的所有产品都是通过 Web 服务检索的。这种后端架构是不可替代的。然而，今天，我们面临着应该通过新解决方案消除的性能问题。

因此，我们计划为每个租户使用一个缓存数据库，并且我们已经对 RavenDB 进行了第一次测试。

产品目录是比较静态的，我们主要会从缓存中读取数据。仅在购物车数据的中间存储处也被写入。

我们计划每小时重新生成每个数据库一次，然后用新数据库替换现有数据库。我们希望这可以简化使用新产品目录更新缓存数据库的过程。然而，有人怀疑这是否与 RavenDB 的架构相反。（现有索引、参考文献）

我们的方法完全可行吗？有没有人在类似情况下找到好的解决方案？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T05:33:39.270

MS007，使用 RavenDB 作为持久视图模型存储是很常见的。但我不明白您为什么要真正每小时刷新一次 RavenDB 数据库。简单地刷新更改的数据会便宜得多，而且您不必担心在删除数据库并创建新数据库时系统中发生了什么。

# javascript - 检测鼠标实际移动的时间，而不仅仅是页面移动的时间

> ID：10036169
> 
> 赞同：1
> 
> 时间：2012-04-05T21:20:03.290
> 
> 标签：javascript, jquery, navigation, mousemove

我在尝试在我的页面上创建导航时遇到了一个很大的问题。如果鼠标进入一个元素然后它会选择它，然后如果你使用箭头键它将选择相对于所选元素的元素。但是，当箭头键导致页面滚动时，这是一个问题，因为（取决于鼠标的位置）它将选择适当的元素，然后在页面移动后立即选择鼠标现在所在的项目（即使您没有不要移动鼠标）。

有谁知道如何解决这个问题？我尝试修改它，但我的解决方案似乎都不起作用。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:24:31.537

不确定我是否完全理解，但您应该能够结合使用`mousemove`和`keypress`事件：

```
$("#element").mousemove(function(e){
    alert("mouse moved");
});

$("#element").keypress(function(e){
    if (e.keyCode == 38 || e.keyCode == 40){ //up & down arrow keys
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:56:04.347

听起来您应该绑定“鼠标进入时选择”事件`mousemove`并取消绑定所述事件`mousestop`。 `mousestop`它本身并不存在，因此您必须以某种方式创建它或使用插件（至少有一些插件，例如[https://github.com/richardscarrott/jquery-mousestop-event/](https://github.com/richardscarrott/jquery-mousestop-event/)）。我认为这将是最简单的解决方案，但是您的 UI 似乎有点奇怪（您希望箭头键正常滚动页面*并*“选择”可能大于滚动大小的元素？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:22:45.097

尝试从检查箭头键的键盘事件处理程序返回 false：

```
element.onkeypress = function(ev) {
    // ...
    return false;
} 
```

这将阻止浏览器对事件的“默认行为”，即滚动。这也适用于链接，例如：如果您从链接的`click`事件处理程序返回 false，则单击该链接不会自动跟随它。

# android - 如何在Android中调试两个进程？

> ID：10036170
> 
> 赞同：11
> 
> 时间：2012-04-05T21:20:10.183
> 
> 标签：android, android-service

在我的应用程序中，一个活动启动了一个作为单独进程运行的服务，我想调试该活动以及该服务，但调试器不会在服务中的断点处停止？

感谢帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-11T00:31:06.690

只是为了详细说明这里的其他答案，您可以暂时放入`android.os.Debug.waitForDebugger();`辅助流程的代码以使其更容易。

然后，只需通过 DDMS 或 IntelliJ（或您正在使用的任何工具）将您的调试器附加到进程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-27T18:06:20.910

您需要在单独的进程上启用调试。

打开 DDMS 透视图（相对于 Debug 或 Java）。在 DDMS->Devices 中，选择您的服务的进程，然后单击调试按钮（小绿错误按钮）。一个调试图标将出现在您的进程附近，然后您应该能够在您的服务中使用断点。

请注意，您需要等到远程进程启动后才能启用调试。因此，您可能希望确保单独的进程在启动时启动，或者在启动远程服务的行之后立即在主进程中设置断点。

在启用调试之前：

![在此处输入图像描述](../Images/5a2cc2084c5e9a67a5b87b8e50b989d4.png)

启用调试后：

![在此处输入图像描述](../Images/47ac8ea407ae398f6ccdc3be2a09f345.png)

（当然也可以暂时使服务非远程工作，但我有一个不切实际的实例）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-24T18:22:46.947

暂时使它不是一个单独的过程。

@CommonsWare

# java - 如何避免使用 Java/Netty 进行 SSL 连接的 Diffie-Hellman？

> ID：10036174
> 
> 赞同：5
> 
> 时间：2012-04-05T21:20:19.303
> 
> 标签：java, ssl, netty

我在基于 Java 的 Usenet 客户端中使用 Netty 作为后端。该库工作正常，但是，在某些情况下，我无法通过 SSL 连接到远程服务器，因为正是这个错误：

[Java：为什么 SSL 握手会给出“无法生成 DH 密钥对”异常？](https://stackoverflow.com/questions/6851461/java-why-does-ssl-handshake-give-could-not-generate-dh-keypair-exception)

不幸的是，无论出于何种原因，这个 Java 错误似乎仍未得到修复。而且由于远程服务器不在我的控制之下，所以我需要一个解决方法。根据上面的链接，一种这样的“解决方案”是在 SSL 握手期间完全避免 DH（不是很漂亮，但可能总比没有好）。

但是，我不是 SSL 专家，所以我不确定如何在 Netty 中实现它；或更好：在我基于 Netty 的解决方案中。到目前为止，我正在创建这样的连接：

```
// configure the Netty client
ClientBootstrap bootstrap = new ClientBootstrap(clSockChannelFactory);

// configure the pipeline factory
bootstrap.setPipelineFactory(channelPipelineFactory);
bootstrap.setOption("tcpNoDelay", true);
bootstrap.setOption("keepAlive", true);
bootstrap.setOption("child.receiveBufferSizePredictorFactory", 
          new AdaptiveReceiveBufferSizePredictorFactory());

// start the connection attempt
InetSocketAddress isa = new InetSocketAddress(serverAddress, port);
ChannelFuture future = bootstrap.connect(isa);
...
channel = future.getChannel();
... 
```

好的，这很好，但是在我连接 SSL 套接字之前，我可以在哪里禁用密码套件，如上面的线程中所述？

提前感谢您的所有帮助！

亲切的问候，马蒂亚斯

PS：顺便问一下，为什么这个问题还没有在 Java 中解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:48:49.187

我不熟悉 Netty，但我建议遵循[安全聊天示例](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/securechat/SecureChatClientPipelineFactory.html)中的方法。

我不确定您有哪些默认 SSL/TLS 密钥/信任设置，但如果您没有自定义`SSLContext`的`SSLContext.getDefault()`.

然后，创建一个`SSLEngine`using [`SSLContext.createSSLEngine()`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLContext.html#createSSLEngine%28%29). 在此`SSLEngine`，您应该能够[启用您想要的密码套件](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLEngine.html#setEnabledCipherSuites%28java.lang.String%5B%5D%29)。假设您使用的是 Oracle JRE（或 OpenJDK），您将[在 Sun Provider 文档中找到密码套件列表](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)。

在此之后（这是特定于 Netty 的部分），`SslHandler`使用类似这样的设置（参见 Netty 示例）：

```
pipeline.addLast("ssl", new SslHandler(engine)); 
```

# mysql - 找出 2007 年比 1989 年事故更少的所有方形网格？

> ID：10036179
> 
> 赞同：0
> 
> 时间：2012-04-05T21:20:52.837
> 
> 标签：mysql, sql

我的*nycgrid*表具有以下架构`id,x1,x2,y1,y2`。它看起来像以下示例：

```
22,910000,920000,120000,130000
67,930000,940000,170000,180000
171,980000,990000,210000,220000 
```

另一个表*nyccrash*包含元组，其中包含有关 1989 年至 2007 年发生的车祸的信息（总共 12000 条记录）。第一个属性是**crash_year**，然后是事故类型、天气状况...等，并以纽约市发生车祸的**x_coordinate**和**y_coordinate结尾。**

```
2007,2,9,4,1,1028977,202232
2004,1,1,1,4,1012600,214101
2003,1,9,1,1,958775,156149
1999,1,1,1,1,997349,175503 
```

这是我之前在 stackoverflow 上提出的问题的扩展问题。

> 我试图找到方形网格（网格 ID），以使 2007 年发生的车祸比 1989*年少。nycgrid*表中有大约 100 行。我只需要那些在 2007 年发生的事故少于 1989 年的行。
> 
> 第二部分可能稍微容易一些，我如何找到每个方格 (nycgrid.id) 的车祸次数？换句话说，如何显示每个网格 id 上发生了多少次崩溃？每个崩溃都有关联的 x 和 y 坐标。每个网格都有一个构成正方形的 x1-x2-y1-y2 坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:29:08.457

从[RBarryYoung](https://stackoverflow.com/a/10022465/119477)对您最后一个问题的回答开始，我们只是使用年份`SUM/CASE`，然后比较这些值

```
SELECT ID
FROM

    (SELECT  
                grid.ID, 
                SUM(CASE WHEN yearCol = 1989 THEN 1 ELSE 0 END) CrashCount_1989,
                SUM(CASE WHEN yearCol = 2007 THEN 1 ELSE 0 END) CrashCount_2007
    FROM        crashes
    INNER JOIN  grid    
                ON  crashes.x_coordinate BETWEEN grid.x1 AND grid.x2
                And crashes.y_coordinate BETWEEN grid.y1 AND grid.y2
    WHERE       crashes.yearCol IN(1989, 2007)
    GROUP BY    grid.ID) t
WHERE CrashCount_2007 < CrashCount_1989 
```

# jquery - 对 jQuery 对象中的元素进行排序

> ID：10036180
> 
> 赞同：1
> 
> 时间：2012-04-05T21:20:54.647
> 
> 标签：jquery

```
<div class="myClass">1</div>
<div class="myClass">2</div>
<div class="myClass">3</div>
<div class="myClass">4</div>
<div class="myClass">5</div>
<div class="myClass">6</div>

var $myClass = $('.myClass');
$myClass.eq(0).text() //returns '1'
$myClass.eq(4).text() //returns '5'
$myClass.eq(5).text() //returns '6' 
```

我想要做的是手动重新排序 jQuery 中的对象。

```
//fantasy command reversing
$myClass.eqSorter([5,4,3,2,1,0]);
$myClass.eq(0).text() //returns '6'
$myClass.eq(5).text() //returns '1' 
```

我真正想要的是允许完全自定义的订单输入

```
//fantasy command custom ordering
$myClass.eqSorter([3,5,4,2,0,1]);
$myClass.eq(0).text() //returns '4'
$myClass.eq(5).text() //returns '2' 
```

现在我已经研究了`.sort`作为 javascript 的一部分来执行此操作的基本方法，但`.sort`采用动态参数来比较事物，并且不允许完全自定义顺序。我还研究了制作一个新的空白 jquery 对象，例如，我可以将元素传递给这样`$newObjectVar.eq(0) = $myClass.eq(3);`的对象。但到目前为止，我还没有找到一种方法来制作这样的空白 jQuery 对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:31:18.097

您可以创建一个这样的自定义方法，对 jQuery 对象中现有的 DOM 元素进行重新排序。一个问题是对 jQuery 对象的许多操作将它们排序为 DOM 顺序，因此如果您对 jQuery 对象执行其他操作，它们可能不会保持此顺序。

```
jQuery.fn.eqSorter = function(array) {
    // get copy of DOM element array
    var copy = this.toArray();
    // don't exceed bounds of arrays
    var len = Math.min(array.length, copy.length);
    for (var i = 0; i < len; i++) {
        var index = array[i];
        // make sure incoming index is within bounds of DOM object array
        if (index < copy.length) {         
            // put the index item into the i location
            this[i] = copy[index];
        }
    }
    return this;
}

$myClass.eqSorter([5,4,3,2,1,0]); 
```

* * *

经过一番思考，这是另一种更强大的做事方式，因为即使传入的数组中有错误，它也可以防止重复和漏洞。结果将仅是与传入数组中的索引匹配的元素。任何超出范围的重复或索引都将被忽略。

jQuery 的做事方式一般不是改变给定 jQuery 对象中的 DOM 元素，而是将现有的 jQuery 对象修改为新的 jQuery 对象。要以这种方式实现它，您可以这样做：

```
jQuery.fn.eqSorter = function(array) {
    var elems = [], doneIndexes = {}, index;
    for (var i = 0, len = array.length; i < len; i++) {
        index = array[i];
        // if the index is not out of range and it's not a dup, 
        // then get the corresponding DOM element from the jQuery object
        // and put it into the new array
        if (!doneIndexes[index] && index < this.length && index >= 0) {
            elems.push(this[index]);
            doneIndexes[index] = true;
        }
    }
    return this.pushStack(elems, "eqSorter", arguments);
}

var $myOrderedObj = $myClass.eqSorter([5,4,3,2,1,0]); 
```

这具有以下行为：

*   传入数组中的任何重复索引都将被忽略（仅处理第一个索引）
*   任何超出范围的索引都将被忽略
*   初始 jQuery 对象中未被索引引用的任何 DOM 元素都不会出现在结果中
*   此方法返回一个新的 jQuery 对象，可以与`.end()`

这里有一个工作测试平台：http: [//jsfiddle.net/jfriend00/DPhc9/](http://jsfiddle.net/jfriend00/DPhc9/)

# java - Java servlet - 会话清理 (HttpServletRequest)

> ID：10036187
> 
> 赞同：14
> 
> 时间：2012-04-05T21:21:19.337
> 
> 标签：java, session, servlets, request

关于 java servlet 和处理请求的最佳方式的一般问题。如果我从远程服务器请求中点击我的 doGet 方法：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
  ....
  <do work here>
  ....
  kill(request);
}

private void kill(HttpServletRequest request) {
//How do I kill the user session here?
} 
```

在我处理完请求并将输出生成给请求者之后，我想基本上“杀死”他们的会话。目前，该会话会持续存在，因此会占用内存。然后一旦达到最大值，所有其他调用都会超时。

我尝试使用请求对象创建一个 HttpSession 对象，但得到了相同的结果：

```
HttpSession session = request.getSession();
session.invalidate(); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-05T21:39:29.767

```
HttpSession session = request.getSession(false);
if (session != null) {
    session.invalidate();
} 
```

是按照文档建议的正确方法。客户端发送新请求后，将创建一个新会话。

您提到您的会话仍然占用内存。您对会话中的这些对象有任何其他引用吗？

您可能还想看看：[Servlet Session behavior and Session.invalidate](https://stackoverflow.com/questions/2879986/servlet-session-behavior-and-session-invalidate)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T12:01:47.677

您可以使用从会话中删除属性

```
session.removeAttribute("attribute name"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T21:27:13.800

尝试

```
session = request.getSession(false); // so if no session is active no session is created
if (session != null)
  session.setMaxInactiveInterval(1); // so it expires immediatly 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T05:26:45.650

如果您不想要会话行为，即在多个请求之间具有状态。你为什么要创建/使用会话。不要创建会话或不要在会话中存储任何内容。

为了确保您的代码没有使用会话，请编写一个将覆盖`getSession()`方法的请求包装器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-10T12:16:53.250

在 web.xml 中设置超时时间

# javascript - 计算的 observable 没有被执行

> ID：10036191
> 
> 赞同：1
> 
> 时间：2012-04-05T21:21:26.500
> 
> 标签：javascript, knockout.js

出于某种原因，当关联值发生变化时，我似乎无法得到一个 ko.computed 可观察值来计算。

这是一个代表客户的单个奖励​​积分记录的对象

```
//
// RewardPoints Model
var RewardPointsItemModel = function (data) {
    return {
        DateAwarded: ko.observable((data != null) ? data.DateAwarded : ""),
        Points: ko.observable((data != null) ? data.Points : 0)
    }
}; 
```

我定义了一个 viewModel，其中包含对“OrderDetailModel”的引用。这个 OrderDetailModel 有一个定义为 ko.observable 的属性，并使用一个新的空 OrderDetailModel 实例进行初始化；用一个空数组初始化，并应用于由“ *$OrderDetailForm* ”引用标识的 HTML 的适当部分。

```
$j(function () {
    //
    // initialize global DOM references
    $LoyaltyProgram = $j("#LoyaltyProgram");
    $LoyaltyHistory = $j("#LoyaltyHistory");
    $OrderDetailForm = $j("#OrderDetailForm");
    //
    // define and bind the viewModels
    viewModel = {
        OrderDetailModel: {
            OrderDetail: ko.observable( new OrderDetailModel([]) )
        }
    };
    ko.applyBindings(viewModel.LoyaltyHistoryOrderDetailModel, $OrderDetailForm[0]);

}); 
```

这是“ *OrderDetailModel* ”对象的定义。它将一组*RewardPointsItemModel*对象实例（如上定义）作为初始化参数“data”。最终它所做的是维护一个*RewardPointsItemModels*数组并计算每个*RewardPointsItemModels*的 Points 属性的总和。首次加载页面时，将使用空数组（见上文）创建 this 的实例，从而导致计算出的“ *TotalPoints* ”为 0（零）。

```
//
// OrderDetail Model
function OrderDetailModel(data) {
    var self    = this;
    this.RewardPoints = ko.observableArray(data);
    this.TotalPoints = ko.computed(function () {
        var points = 0;

        if (self.RewardPoints.length <= 0)
            return points;

        for (var i = 0; i < self.RewardPoints().length; i++) {
            var record = self.RewardPoints()[i];
            points += record.Points();
        }
        return points;
    });
}; 
```

用户交互执行对返回奖励积分记录列表的 WebAPI 服务的调用，然后将该数据作为“数据”参数传递给下面的回调函数。*在回调函数中，我创建了一个新的空数组，然后使用从 WebAPI 调用中检索到的记录创建的RewardPointsItemModel*对象的实例填充它。然后，我将存储在 ko.observable 属性 ... *viewModel.OrderDetailModel.OrderDetail* ...中的*OrderDetailModel*的现有实例中的 ko.observableArray 属性“ *RewardPoints* ”中的空数组值替换为**新的 rewardPoints 数组**。

 ****```
function Callback(data) {

    var rewardPoints = new Array();
    for (var i = 0; i < data.ServiceModel.length; i++) {
        var model = new RewardPointsItemModel(data.ServiceModel[i]);
        rewardPoints.push(model);
    }
    viewModel.OrderDetailModel.OrderDetail().RewardPoints(rewardPoints);
}; 
```

在这一点上，我希望 ko.computed 可观察属性“ *viewModel.OrderDetailModel.OrderDetail().TotalPoints()* ”重新计算，但是当我将跟踪代码放入计算函数中时，它甚至不会被调用，这表明函数未执行以更新值。我的理解是，如果依赖属性（在本例中为 RewardPoints）已更新（从空数组到填充数组），则计算属性应重新评估。

我知道这对我来说很复杂，所以我希望我已经清楚了。我希望有比我更流利的 Knockout 的人可以清楚地理解这一点，并找出为什么在初始化后计算值不计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:22:36.893

看起来你的问题在这里：

```
if (self.RewardPoints.length <= 0)
        return points; 
```

你需要做：

```
if (self.RewardPoints().length <= 0)
        return points; 
```

`self.RewardPoints`是一个`observableArray`，它是一个函数。函数的长度是为函数定义的参数的数量。An`observableArray`没有列出任何命名的参数，因为它从参数中读取它，因此值为 0。

因此，您当前的代码始终返回 0 而不是实际访问 的值`observableArray`来创建依赖项。****

# objective-c - 为什么不能输入为 id 的变量 接收一个id的参数 即使'otherProtocol'符合'someProtocol'？

> ID：10036202
> 
> 赞同：2
> 
> 时间：2012-04-05T21:22:21.187
> 
> 标签：objective-c, ios, macos, polymorphism, protocols

想象一下我有两个协议：

```
@protocol A
@end 
```

和

```
@protocol B <A> // Protocol B conforms to protocol A.
@end 
```

还有两个变量：

```
id<A> myVar = nil; 
```

和

```
id<B> otherVar = //correctly initialized to some class that conforms to <B>; 
```

那么，为什么我不能将 'otherVar' 分配给 'myVar' 呢？

```
myVar = otherVar; //Warning, sending id<B> to parameter of incompatible type id<A> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:29:57.650

协议的 ( `B`) 声明（不仅仅是它的前向声明）是否可见？声明是否先于`myVar = otherVar;`？

当申报顺序正确时，clang 没有抱怨。

为了显示：

```
@protocol A
@end

@protocol B; // << forward B

void fn() {
    id<A> myVar = nil;
    id<B> otherVar = nil;
    myVar = otherVar; // << warning
}

// declaration follows use, or is not visible:    
@protocol B <A>
@end 
```

而正确排序的版本不会产生警告：

```
@protocol A
@end

@protocol B <A>
@end

void fn() {
    id<A> myVar = nil;
    id<B> otherVar = nil;
    myVar = otherVar;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:26:49.007

检查它是否`conformsToProtocol()`，如果是，然后像这样投射它

```
myVar = (id <A>)otherVar; 
```

类似的问题可以在[Cast an instance to a @protocol in Objective-C 查看](https://stackoverflow.com/questions/617616/cast-an-instance-of-a-class-to-a-protocol-in-objective-c)

# actionscript-3 - 不使用draw API在actionscript 3中画线？

> ID：10036204
> 
> 赞同：0
> 
> 时间：2012-04-05T21:22:40.587
> 
> 标签：actionscript-3, movieclip, bitmapdata

我需要能够在 AS3 中的 2 点之间绘制一条粗图案线，我不能使用绘图 API，因为它并没有真正将细节（图案等）放入线条的粗细中，我想过也许使用线条创建位图版本，然后将其用作蒙版，但我记得很多年前看到一些使用电影剪辑作为线条来源的示例，但我现在根本找不到这样的示例，有任何想法吗？

我附上了我希望线条看起来如何的示例图像。![在此处输入图像描述](../Images/543352b8b32d790bf1737cd388440d53.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:47:55.863

我怀疑[`Graphics.lineBitmapStyle()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#lineBitmapStyle%28%29)会成功的。如果您想使用 a`Sprite`或`MovieClip`作为源，[`draw()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)则必须首先使用它`BitmapData`。稍后链接上的示例代码应该可以帮助您启动并运行它。

# java - 如何在 java 中使用 ActionListener 执行多个操作？

> ID：10036207
> 
> 赞同：0
> 
> 时间：2012-04-05T21:22:46.217
> 
> 标签：java, event-handling, awt, actionlistener

我现在正在编写一个涉及两个 JButton 的程序。包含这些 JButton 的类实现了 ActionListener，因此包含方法 ActionPerformed(ActionEvent e)。无论如何让这些 JButton 都在同一个 ActionPerformed 方法中执行独特的操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:24:42.080

当然，您可以通过以下方式区分它们：

```
public void actionPerformed(ActionEvent e) {
  Object src = e.getSource();

  if (src == bt1) {
    // do actions for bt1;
  }
  else if (src == b2) {
   // do action for bt2;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:24:48.090

您始终可以使用`e.getSource()`. 然后只需将该源与您的按钮进行比较，如果它们相等则执行特定操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:25:19.963

当然。比较对象`source`的`ActionEvent`以查看事件来自哪个按钮（即 call `getSource()`），然后采取相应的行动。

# java - 如何获取对标签父级的引用？

> ID：10036210
> 
> 赞同：2
> 
> 时间：2012-04-05T21:23:00.630
> 
> 标签：java, struts2, freemarker

我嵌套自定义标签的场景；IE：

```
<ss:mytag>
    <ss:othertag />
    <ss:othertag />
</ss:mytag> 
```

从 othertag 的 freemarker 模板中，我如何获得包装 mytag 父级的句柄？

我的目标是查看当前标签是否是其父标签的第一个子标签。也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:01:10.210

You could use global variables for that. Like you do `<#global mylib_othertagCnt = 0>` in `mytag`, and `<#global mylib_othertagCnt = mylib_othertagCnt + 1>` and then `<#if mylib_othertagCnt == 1>...</#if>` in `othertag`.

# android - 使用 ant / teamcity 构建一个引用 android 库项目的 android 项目

> ID：10036216
> 
> 赞同：6
> 
> 时间：2012-04-05T21:24:02.210
> 
> 标签：android, ant, teamcity

我有一个android项目说项目A ..现在这个项目项目A依赖于一个Android lib项目说LibX。现在 LibX 依赖于另一个 android 库项目 LibY。如何使用 ant 构建我的项目。

这是我引用的android文档-

[http://developer.android.com/guide/developing/projects/projects-cmdline.html](http://developer.android.com/guide/developing/projects/projects-cmdline.html)

这就是它所说的

在构建时，这些库一次一个地与应用程序合并，从最低优先级到最高优先级。**请注意，库本身不能引用另一个库，并且在构建时，库在与应用程序合并之前不会相互合并。**

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T11:54:45.290

由 Android 开发者网站提供： http: [//developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)中的源代码，Library Projects 部分：

> "... 从结构上看，库项目类似于标准的Android应用项目。例如，它在项目根目录下包含一个manifest文件，以及src/、res/等目录。项目可以包含相同的类型源代码和资源作为一个标准的Android项目，以同样的方式存储。例如，库项目中的源代码可以通过其R类访问自己的资源。
> 
> 但是，库项目与标准 Android 应用程序项目的不同之处在于，您不能将其直接编译为自己的 .apk 并在 Android 设备上运行。同样，您不能将库项目导出到自包含的 JAR 文件，就像对真正的库所做的那样。相反，您必须通过在依赖应用程序中引用库并构建该应用程序来间接编译库。
> 
> 当您构建依赖于库项目的应用程序时，SDK 工具会将库编译为临时 JAR 文件并在主项目中使用它，然后使用结果生成 .apk。如果在应用程序和库中都定义了资源 ID，这些工具会确保应用程序中声明的资源获得优先权，并且库项目中的资源不会编译到应用程序 .apk 中。这使您的应用程序可以灵活地使用或重新定义在任何库中定义的任何资源行为或值。
> 
> 为了进一步组织您的代码，您的应用程序可以添加对多个库项目的引用，然后指定每个库中资源的相对优先级。这使您能够以累积的方式构建应用程序中实际使用的资源。当从应用程序引用的两个库定义相同的资源 ID 时，工具会从具有较高优先级的库中选择资源并丢弃另一个。
> 
> 将库项目的引用添加到 Android 项目后，您可以设置它们的相对优先级。在构建时，这些库一次一个地与应用程序合并，从最低优先级到最高优先级。
> 
> 库项目可以引用其他库项目，并且可以以正常方式导入外部库（JAR）。……”

我在使用库 Rajawali（0.9 版）时遇到了类似的问题。需要分发文件。单个 jar 和应用程序将使用此 JAR 来显示 3D 屏幕。问题是我们的图书馆是使用图书馆资源 Rajawali 的定制。因此创建了两个项目结构（例如库项目）。生成时。由于您上面解释的原因，使用资源的 JAR 应用程序无法工作），这是因为该库使用图像的 Rajawali 功能来加载目标应用程序版本中无法识别的 ID。

单JAR的解决方案可以通过R.raw.X（Android方式）修改代码不使用Rajawali资源去使用文件夹assets/ *，使组件使用Rajawali AsseptManager打开资源来验证。解决方案是导出 JAR 文件夹，其中包含内部资产 / 和字节码 (* . 类) 以及我们的 LIB Rajawali。

通过 Fat-JAR Eclipse PlugIn（或 0.0.31 +）[更新站点 http://kuruczgrafika.de/fatjar] 可以生成单个 JAR 并在目标应用程序中使用它。ANT 脚本用于运行下面的 XML，并生成了一个 JAR 文件。将在 /build/lib3d_NAME_HERE.jar 中生成文件“lib3d_NAME_HERE.jar”（.JAR）

```
<?xml version="1.0"?>
<project name="lib3d_NAME_HERE" default="main" basedir=".">

    <property name="projectPath" value="D:\Development\lib3d_NAME_HERE"/>

    <!-- this file was created by Fat-Jar Eclipse Plug-in -->
    <!-- the ANT-Export is in a very early stage, so this -->
    <!-- is only experimental, ANT 1.6 or above is        -->
    <!-- required, feedback is always welcome:            -->
    <!--       http://sourceforge.net/projects/fjep       -->
    <!-- uncomment the following lines if using ANT outside Eclipse -->
    <!--
        <property name="fjepPath" value="reference:file:plugins/net.sf.fjep.fatjar_0.0.31/fatjar.jar"/>
        <taskdef name="fatjar.build" classname="net.sf.fjep.anttask.FJBuildTask" classpath="${fjepPath}"/>
        <typedef name="fatjar.manifest" classname="net.sf.fjep.anttask.FJManifestType" classpath="${fjepPath}"/>
        <typedef name="fatjar.exclude" classname="net.sf.fjep.anttask.FJExcludeType" classpath="${fjepPath}"/>
        <typedef name="fatjar.jarsource" classname="net.sf.fjep.anttask.FJJarSourceType" classpath="${fjepPath}"/>
        <typedef name="fatjar.filesource" classname="net.sf.fjep.anttask.FJFileSourceType" classpath="${fjepPath}"/>
    -->
    <!-- uncomment the above lines to use ANT outside of Eclipse -->
    <target name="main">
        <fatjar.build output="build/lib3d_NAME_HERE.jar">
            <fatjar.manifest/>
            <fatjar.filesource path="${projectPath}/bin/classes" relpath=""/>
            <fatjar.filesource path="${projectPath}/assets/" relpath="assets"/>
        </fatjar.build>
    </target>
</project> 
```

# java - Axis2 版本的 Axis 内核问题 - 如何从您的 java 项目中引用另一个项目

> ID：10036220
> 
> 赞同：0
> 
> 时间：2012-04-05T21:24:13.560
> 
> 标签：java, eclipse, kernel, axis2, buildpath

1) 我有需要修改的旧项目。我需要添加新的网络服务。我遇到了一些 jar 文件的问题。

我创建了新服务（Axis2），然后我使用 Eclipse 向导创建了 Web 服务客户端代码。一切看起来都很好，除了当我的 MyServiceStub.java 出现在客户端 java 项目中时，它找不到一些库。

我查看了其中的几个，似乎它正在寻找 Axis2-kernel-1.6.0.jar。目前在我的旧项目中，我看到了 Axis2-kernel-1.3.0.jar，似乎现有的 OtherServiceStub.java 文件正在使用这个 Axis2-kernel-1.3.0.jar。

我首先想到的是以前的 Web 服务是用早期版本的 Axis2 创建的。我现在的版本是1.6。问题是，我真的不明白为什么在 Project Facets 中它告诉我 Axis2 是 1.1 版......

**理想情况下，我想使用 Axis2-kernerl-1.3.0.jar，因为我想将更改保持在最低限度。我需要什么版本的 Axis2？任何建议如何解决我的问题？**

和 ...

2) 如果我有 2 个项目，**如何在另一个项目中自动引用一个项目的 JAR，所以当我在引用的项目中进行更改时，我看到它们在引用的项目中运行时有效？**现在，我将项目导出到 JAR，然后手动将 JAR（覆盖）复制到需要它的项目的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:01:54.040

1) 您需要使用当前正在运行的任何版本的内核axis2 Web 服务，即部署到具有内核版本的任何地方。您希望您的客户端代码基本上以相同版本的轴与服务器通信。

您可以在此处下载旧版本 [http://axis.apache.org/axis2/java/core/download.cgi](http://axis.apache.org/axis2/java/core/download.cgi)

2）运行与调试是不同的。如果您在服务器上运行axis2，而不是在eclipse 内部，最好的选择是导出jar 并上传到axis2 WEB-INF/lib 目录。这样，您就可以拥有一个您调试和编码的副本，与实际运行的副本分开。

# c++ - g++ 编译时间是否取决于数组大小？

> ID：10036225
> 
> 赞同：9
> 
> 时间：2012-04-05T21:24:28.940
> 
> 标签：c++, g++

我有一个 C++ 代码，它有 3 个数组声明。

`float A[NUM]; float B[NUM]; float C[NUM];`

当我用 编译时`NUM=512`，编译速度很快

`time g++ -DNUM=512 trials trials.cpp -lm`

`0.16s user 0.04s system 94% cpu 0.219 total`

但是，当我使用 编译时`NUM=167772160`，需要更多时间。

`time g++ -DNUM=167772160 trials trials.cpp -lm`

`7.90s user 0.69s system 99% cpu 8.604 total`

我已经好几年没用过 C++了。我很想知道为什么编译后的目标文件大小相同，但编译时会存在时间差异。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T21:40:05.727

这是一个众所周知的难题。在此过程中，将分配数组的实际内存

请参阅： [与交换空间相关的链接器性能？](https://stackoverflow.com/questions/8233363/linker-performance-related-to-swap-space)

> 看起来，正如我们可能怀疑的那样，看起来 ld 实际上是在尝试匿名映射这个数组的整个静态内存空间（或者可能是整个程序，很难说，因为程序的其余部分太小了，它可能都适合额外的 4096）。

还有相关的：

*   [静态分配程序编译时间长](https://stackoverflow.com/questions/4978664/long-compilation-time-for-program-with-static-allocation)
*   [奇怪的 GCC 行为](https://stackoverflow.com/q/7670110/85371)
*   gc 中缺少优化：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=4131](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=4131)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:29:25.130

您的数组是在本地还是全局声明的？如果是全局的，因为链接器应该在 .data 段分配内存，这可能需要很长时间。但是，如果您在本地声明它，因为内存是在运行时分配的，而不是链接时分配的。这将是链接器的问题，而是由编译器的分析器或优化器引起的问题。

# python - 使用 Python telnet lib w/o logout 命令

> ID：10036230
> 
> 赞同：1
> 
> 时间：2012-04-05T21:24:48.893
> 
> 标签：python, telnetlib

我正在尝试使用 python 的 telnetlib 模块从远程设备获取信息。不幸的是，远程设备似乎没有“注销”类型的命令。因此，您必须使用 CTRL-] 手动关闭连接（手动远程登录时）。我尝试使用 Telnet.close() 但似乎没有返回任何数据。

建议？

```
HOST = "172.16.7.37"
user = "Netcrypt"
password = "Netcrypt"

tn = telnetlib.Telnet(HOST)

tn.read_until("User: ")
tn.write(user + "\n")
if password:
   tn.read_until("Password: ")
   tn.write(password + "\n")

tn.write("session \n")

print tn.read_until("NC_HOST> ")

tn.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:28:39.133

您是否尝试将***`CTRL`+`]`***的 ASCII 字符写入telnet 连接？

`tn.write('\x1d')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:30:29.630

我最终不需要任何这些。交易是我必须阅读提示，发出我的命令，阅读直到下一个提示。永远不需要 read_all()。

这是工作代码：

```
import telnetlib

HOST = "172.16.7.37"
user = "Netcrypt"
password = "Netcrypt"

tn = telnetlib.Telnet(HOST)

tn.read_until("User: ")
tn.write(user + "\n")
if password:
    tn.read_until("Password: ")
    tn.write(password + "\n")

    tn.read_until('NC_HOST>')

    tn.write("session\n")

    data = tn.read_until('NC_HOST>')

print data 
```

# python - 打印中的 Python 无效语法

> ID：10036234
> 
> 赞同：0
> 
> 时间：2012-04-05T21:25:09.900
> 
> 标签：python, syntax, printing, python-3.x

对不起，我不熟悉Python...

它给了我以下错误消息

```
 File "gen_compile_files_list.py", line 36
    print 'java files:', n_src
                      ^
SyntaxError: invalid syntax 
```

即插入符号指向最后一个报价。它出什么问题了？

操作系统 Windows 7，Python 版本 3.2.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:27:37.713

在 Python 3 上，[print 是一个函数](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#print-is-a-function)。你需要这个：

```
print('java files:', n_src) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:28:10.380

打印 Python2 和 Python3 之间更改的语法；它[现在是一个函数](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#print-is-a-function)。

你需要改变：

```
 print 'java files:', n_src 
```

到

```
 print('java files:', n_src) 
```

或者，您可以尝试使用 2to3 工具将代码从 Python2 转换为 Python3 语法。如果您有兴趣[，这里有更多关于过渡的信息。](http://wiki.python.org/moin/PortingPythonToPy3k)这样，您可以维护一个适用于两个版本的单一代码库。

由于您不熟悉 python，请尝试安装 Python 2 并使用它运行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T21:28:53.450

`print`是 Python 3+ 中的一个函数。所以：

```
print ('java files:', n_src) 
```

# linux - 拆分基于列的文本文件

> ID：10036236
> 
> 赞同：0
> 
> 时间：2012-04-05T21:25:17.387
> 
> 标签：linux, split, centos, command-prompt

所以我有一张发票，我需要从中进行报告。它的平均长度约为 250 页。所以我正在尝试创建一个脚本来提取发票的特定价值并制作报告。这是我的问题：

1.  发票为 pdf 格式，跨越两列。在 Linux 命令中，我想使用 'pdftotext' Linux 命令转换为多个文本文件（每个 txt 文件代表每个 pdf 页面）。我怎么做
2.  我认识到“pdftotext”命令通过在页面的左侧和页面的右侧之间有 21 个空格来拆分它。我如何将数据的右侧（在连续读取至少21个空格后识别）到文件末尾
3.  由于文件很大而且我只有最后几页文件，我如何删除脚本中的所有这些文本文件（不是手动），直到我读到一个关键字（让我们说关键字=开始发票）？

我知道这是很多问题，但我对 Linux 命令可以做什么感到困惑。你们能指导我正确的方向吗？谢谢

PS：我正在使用`CentOS 5.2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:53:34.167

关于什么：

```
pdftotext YOUR.pdf | sed 's/^\([^ ]\+\) \{21\}.*/\1/' > OUTPUT
pdftotext YOUR.pdf | sed 's/.* \{21\}\(.*\)/\1/' >> OUTPUT 
```

但是您也应该检查`pdftotext`'s`-raw`和`-layout`options 。还有更多的方法可以做到这一点......

# apache - 使用 Apache 部署 Go Web 应用程序

> ID：10036238
> 
> 赞同：27
> 
> 时间：2012-04-05T21:25:20.770
> 
> 标签：apache, deployment, cgi, go, web-deployment

我找不到用于部署 Go Web 应用程序的 mod_go。有没有其他方法可以使用 Apache Web 服务器（甚至 IIS）在 Go 中运行 Web 应用程序？

**更新**：现在全职做了将近一年的 Go；这样做（Go with Apache）是在否定 Go 的目的（在高度并发方面的性能）。我使用 nginx 作为 http/https 的反向代理，并且很好地支持我的 Go 后端。虽然在使用 Go 时你必须稍微改变你对 webapps 的心态。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-05T21:53:01.710

没有 mod_go。（至少我没有听说过这样的事情。）

Go Web 应用程序本身就是一个功能强大的 Web 服务器。您可以在您的应用程序中监听端口 80，然后直接在您的服务器上运行它。相信我：它真的有效！

但是如果你不这样做（因为在同一台机器上有其他虚拟服务器、负载平衡等原因），你可以在你的 Go 应用程序前面使用 HTTP 服务器，如 nginx 或 Apache 作为 HTTP 代理。我使用 nginx，它很棒。[这是一个过时但仍然非常有用的](http://nf.id.au/posts/2010/10/deploying-go-web-services-behind-nginx-under.html)指南，介绍如何使用 nginx 做到这一点。我没有用 Apache 做过，但这[应该](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)会有所帮助。

我推荐你的 Go web 应用程序本身或 nginx 作为 HTTP 代理。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-06T10:05:32.807

除了其他选项之外，还有[net/http/fcgi](http://golang.org/pkg/net/http/fcgi/)包。这类似于 CGI 选项，但它使用 FastCGI 并且您的应用程序可以在需要时保持状态。

这是 jimt 示例的 FastCGI 版本。请注意，只有两行不同。根据您配置 Apache 的方式，您可能必须将第一个参数更改为不同的参数，但 nil 是常见的情况。

```
package main

import (
    "fmt"
    "net/http"
    "net/http/fcgi"
)

func hello(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Hello from Go!")
}

func main() {
    http.HandleFunc("/", hello)
    fcgi.Serve(nil, nil)
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-08T01:16:53.127

对于那些感兴趣的人，这里有一个最近发布的用于 Apache 的[mod_go ：](https://github.com/idaunis/mod_go)

[https://github.com/idaunis/mod_go](https://github.com/idaunis/mod_go)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-05T23:02:30.953

虽然并不理想，但您可以将 Go 程序作为 CGI 脚本运行，方法是将它们放在 cgi-bin 目录中。您可以像任何其他页面一样调用它们`server.com/cgi-bin/myapp?foo=bar`

示例程序如下所示：

```
package main

import (
    "fmt"
    "net/http"
    "net/http/cgi"
)

func hello(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Hello from Go!")
}

func main() {
    http.HandleFunc("/", hello)
    cgi.Serve(nil)
} 
```

这不如将程序作为自己的服务器运行那样最佳的原因是，使用 cgi 方法，每个请求都会调用该程序。所以它里面的任何状态都不会持续存在。

为清楚起见：您应该将编译后的二进制文件放在 cgi-bin 目录中。不是程序源。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-27T03:15:57.100

这会将域和子域请求代理到指定端口。

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    ServerName www.yourdomain.com
    ProxyRequests Off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass / http://127.0.0.1:8080/
    ProxyPassReverse / http://127.0.0.1:8080/
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    ServerName subdomain.yourdomain.com
    ProxyRequests Off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass / http://127.0.0.1:8081/
    ProxyPassReverse / http://127.0.0.1:8081/
</VirtualHost> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-09T04:46:55.027

我只是使用 Web 服务器的代理工具并将我的应用程序作为服务器上的常规守护程序（使用 daemonize）运行。在 apache 上是`ProxyPass`+ `ProxyPreserveHost`。

# .net - Windows 应用商店应用程序中的图像保存

> ID：10036242
> 
> 赞同：1
> 
> 时间：2012-04-05T21:25:40.007
> 
> 标签：.net, vb.net, image, save, windows-store-apps

我有两个按钮和一个图像控件。

现在，当我单击第一个按钮时，我正在尝试加载图像，如下所示。

```
 Dim openPicker As New FileOpenPicker
    openPicker.ViewMode = PickerViewMode.Thumbnail
    openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary
    openPicker.FileTypeFilter.Add(".jpg")
    openPicker.FileTypeFilter.Add(".jpeg")
    openPicker.FileTypeFilter.Add(".png")
    Dim file As StorageFile = Await openPicker.PickSingleFileAsync
    If Nothing IsNot file Then
        Dim image As New BitmapImage()
        Dim stream = Await file.OpenAsync(Windows.Storage.FileAccessMode.Read)
        image.SetSource(stream)
        Image1.Source = image
        LayoutRoot.Visibility = Windows.UI.Xaml.Visibility.Collapsed
        txtImgdisplay.Text = file.Path 
    Else
        txtImgdisplay.Text = "Invalid File"
    End If 
```

现在，当我单击第二个按钮时，我需要在对同一图像进行一些修改后将该图像保存到图片库中。

这就是我正在尝试做的事情，并且对如何获取已经加载到图像控件中的图像并保存它感到困惑。

```
 Dim fileSavePicker As New FileSavePicker()
    fileSavePicker.FileTypeChoices.Add("PNG", New String() {".png"})
    fileSavePicker.FileTypeChoices.Add("JPG", New String() {".jpg"})
    fileSavePicker.FileTypeChoices.Add("BMP", New String() {".bmp"})
    fileSavePicker.FileTypeChoices.Add("TIFF", New String() {".tiff"})
    fileSavePicker.FileTypeChoices.Add("EXIF", New String() {".exif"})
    fileSavePicker.FileTypeChoices.Add("ICO", New String() {".ico"})
    Dim saveFile As StorageFile = Await fileSavePicker.PickSaveFileAsync()

    If Nothing IsNot saveFile Then
        Dim image As New BitmapImage()
        Dim stream = Await StorageFile.GetFileFromPathAsync(txtImgdisplay.Text)
        LayoutRoot.Visibility = Windows.UI.Xaml.Visibility.Collapsed
        txtImgdisplay.Text = saveFile.Path
        Image1.Source = image
        Dim copyFile As StorageFile = Await saveFile.CopyAsync(Windows.Storage.KnownFolders.PicturesLibrary, "sample - Copy.png")
    Else
        txtImgdisplay.Text = "Invalid File"
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:27:00.300

我相信您需要做的就是调用位图对象的 Save 方法。

```
image.Save(pathToPictureFolder & filename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:42:58.053

尝试如下。1）将选定的文件（StorageFile）存储为成员变量。2）当第二个按钮被点击时。

> FolderPicker saveFolder = new FolderPicker();
> saveFolder.SuggestedStartLocation = PickerLocationId.Desktop;
> saveFolder.FileTypeFilter.Add("*"); StorageFolder storagefolderSave = 等待 saveFolder.PickSingleFolderAsync(); StorageFile storagefileSave = [选择的存储文件作为成员变量] await storagefileSave.CopyAsync(storagefolderSave, storagefileSave.Name, NameCollisionOption.ReplaceExisting);

# html - 如何在 CSS 中定位 div 的特定元素？

> ID：10036243
> 
> 赞同：10
> 
> 时间：2012-04-05T21:25:45.403
> 
> 标签：html, css

我有一些这样的代码：

```
<div id="foo">
 <img src="bar.png" align="right">
 <img src="cat.png" align="right"> 
</div> 
```

现在我的问题是如何在使用上述代码时在 CSS 中定位特定图像？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T21:28:50.430

这完全取决于您要定位的图像。假设它是第一个（尽管两者的实现相似）图像：

```
#foo img[src="bar.png"] {
    /* css */
}

#foo img[src^="bar.png"] {
    /* css */
}

#foo img:first-child {
    /* css */
}

#foo img:nth-of-type(1) {
    /* css */
} 
```

参考：

*   [CSS3 选择器](http://www.w3.org/TR/selectors/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-05T21:27:29.993

您可以向图像添加一个类或

```
.foo img:nth-child(2) { css here } 
```

或者

```
.foo img:first-child { css here }
.foo img:last-child { css here } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-21T18:55:07.947

我不知道为什么每个人都对#foo div 如此执着。您可以定位 img 标签，甚至不用担心 div 标签。这些属性选择器由“开头”选择。

```
img[src^=bar] { css }
img[src^=cat] { css } 
```

这些选择由“包含”。

```
img[src*="bar"] { css }
img[src*="cat"] { css } 
```

或者您可以通过确切的 src 进行选择。

```
img[src="bar.png"] { css }
img[src="cat.png"] { css } 
```

如果你想同时定位它们，那么你可以使用 div id。

```
#foo img { css } 
```

对于其中一张图片，根本无需担心#foo div。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T21:27:26.840

```
div > img:first-child {/*the first image*/}
div > img:last-child {/*the last image*/} 
```

那应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T21:28:28.900

以下所有解决方案仅适用于最近的浏览器。

您可以按子位置选择：

```
 #foo img:first-child { /* for the bar */ }
 #foo img:nth-child(2) { /* for the cat */ } 
```

您可以按子位置选择，仅计算图像：

```
 #foo img:first-of-type { /* for the bar */ }
 #foo img:nth-of-type(2) { /* for the cat */ } 
```

您可以按图片 URL 选择：

```
 #foo img[src^=bar] { /* for the bar */ }
 #foo img[src^=cat] { /* for the cat */ } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T21:52:57.173

```
#foo > IMG:first-child {/* first of two IMGs */}
#foo > IMG + IMG       {/* second one */} 
```

适用于所有浏览器，包括 IE7+。

# yahoo - 我的虚拟主机上的 API 调用失败

> ID：10036245
> 
> 赞同：0
> 
> 时间：2012-04-05T21:25:51.163
> 
> 标签：yahoo, yahoo-api

我正在尝试使用 Yahoo API 检索数据

这是我用来检索信息的 API

```
http://ff.search.yahoo.com/gossip?output=fxjson&command=QUERY 
```

这在我的本地服务器上工作，但是当我在我的网络应用程序中使用它时。查询显示空白结果。谁能告诉我为什么会这样。我尝试在 YDN 论坛中搜索它。但我找不到合适的信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:17:50.820

ff.search.yahoo.com 服务器用于在 Firefox 等浏览器中进行预输入搜索。它不是 API，我不建议开发任何使用它的东西。（除了可能违反服务条款外，它可能随时停止工作或更改。）

作为替代方案，您可以使用 Yahoo 的[YQL](http://developer.yahoo.com/yql/)服务从 Search Suggestions 搜索界面中进行选择。

这是搜索词“soccer”的示例查询（您可以在[YQL 控制台](http://developer.yahoo.com/yql/console/?q=select%20k%20from%20yahoo.search.suggestions%20where%20command%3D%22soccer%22&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys)中尝试）：

`select k from yahoo.search.suggestions where command="soccer"`

样本结果：

```
{
 "query": {
  "count": 10,
  "created": "2012-10-21T01:16:15Z",
  "lang": "en-US",
  "results": {
   "s": [
    {
     "k": "soccernet"
    },
    {
     "k": "soccer games"
    },
    {
     "k": "soccer.com"
    },
    {
     "k": "soccer ball"
    },
    {
     "k": "soccer offices raided"
    },
    {
     "k": "soccer jerseys"
    },
    {
     "k": "soccer shoes"
    },
    {
     "k": "fox soccer channel"
    },
    {
     "k": "world cup soccer"
    },
    {
     "k": "mls soccer"
    }
   ]
  }
 }
} 
```

# c# - 如何将这些嵌入元素转换为父元素的属性？

> ID：10036246
> 
> 赞同：3
> 
> 时间：2012-04-05T21:25:54.807
> 
> 标签：c#, xslt, serialization, xsd

我有一个大型 XSD，其元素如下所示：

```
<xs:element name="ProgramName" type="xs:string" minOccurs="0">
  <xs:annotation>
    <xs:documentation>PN</xs:documentation> 
  </xs:annotation>
</xs:element>
<xs:element name="TestItem" type="xs:string" minOccurs="0">
  <xs:annotation>
    <xs:documentation>TA</xs:documentation> 
  </xs:annotation>
</xs:element> 
```

我想将`<documentation>`元素折叠成祖父元素的属性，如下所示：

```
<xs:element name="ProgramName" type="xs:string" minOccurs="0" code="PN">
</xs:element>
<xs:element name="TestItem" type="xs:string" minOccurs="0" code="TA">
</xs:element> 
```

XSLT 如何做到这一点？或者，有没有比 XSLT 更好（阅读：更简单）的方法呢？

生成的 XSD 将用于`XSD.EXE`创建 C# 类，用于序列化和反序列化目的。原来的 XSD 不能这样使用，因为`XSD.EXE`删除了所有的注释元素，所以这些注释中包含的信息丢失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:36:04.923

这就是我的做法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[xs:annotation]">
    <xsl:copy>
      <xsl:attribute name="code"><xsl:value-of select="xs:annotation/xs:documentation"/></xsl:attribute>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>    
  </xsl:template>

  <xsl:template match="xs:annotation"/>      

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:54:11.973

这只是另一个答案:)

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="node()[local-name()='element']">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()[local-name()!='annotation']"/>
      <xsl:for-each select="node()[local-name()='annotation']/node()[local-name()='documentation']">
        <xsl:attribute name="code">
          <xsl:value-of select="."/>
        </xsl:attribute>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

确实，使用 XSLT 重新排列节点而不是手动进行是一个很好的想法 :) 我总是使用 XSLT ..
我们甚至可以使用它从 XSD 生成示例 XML .. 如果 XSD 具有可承受的大小:)

# input - OpenCL，简单的向量加法，但大输入的错误输出

> ID：10036248
> 
> 赞同：1
> 
> 时间：2012-04-05T21:26:03.203
> 
> 标签：input, vector, opencl

所以，在花了几个小时阅读和理解之后，我终于制作了我的第一个 OpenCL 程序，它实际上做了一些事情，它添加了两个向量并输出到一个文件。

```
#include <iostream>
#include <vector>
#include <cstdlib>
#include <string>
#include <fstream>

#define __CL_ENABLE_EXCEPTIONS
#include <CL/cl.hpp>

int main(int argc, char *argv[])
{
    try
    {
// get platforms, devices and display their info.
        std::vector<cl::Platform> platforms;
        cl::Platform::get(&platforms);

        std::vector<cl::Platform>::iterator i=platforms.begin();

        std::cout<<"OpenCL \tPlatform : "<<i->getInfo<CL_PLATFORM_NAME>()<<std::endl;
        std::cout<<"\tVendor: "<<i->getInfo<CL_PLATFORM_VENDOR>()<<std::endl;
        std::cout<<"\tVersion : "<<i->getInfo<CL_PLATFORM_VERSION>()<<std::endl;
        std::cout<<"\tExtensions : "<<i->getInfo<CL_PLATFORM_EXTENSIONS>()<<std::endl;

// get devices
        std::vector<cl::Device> devices;
        i->getDevices(CL_DEVICE_TYPE_ALL,&devices);
        int o=99;
        std::cout<<"\n\n";
// iterate over available devices
        for(std::vector<cl::Device>::iterator j=devices.begin(); j!=devices.end(); j++)
        {
            std::cout<<"\tOpenCL\tDevice : " << j->getInfo<CL_DEVICE_NAME>()<<std::endl;
            std::cout<<"\t\t Type : " << j->getInfo<CL_DEVICE_TYPE>()<<std::endl;
            std::cout<<"\t\t Vendor : " << j->getInfo<CL_DEVICE_VENDOR>()<<std::endl;
            std::cout<<"\t\t Driver : " << j->getInfo<CL_DRIVER_VERSION>()<<std::endl;
            std::cout<<"\t\t Global Mem : " << j->getInfo<CL_DEVICE_GLOBAL_MEM_SIZE>()/(1024*1024)<<" MBytes"<<std::endl;
            std::cout<<"\t\t Local Mem : " << j->getInfo<CL_DEVICE_LOCAL_MEM_SIZE>()/1024<<" KBbytes"<<std::endl;
            std::cout<<"\t\t Compute Unit : " << j->getInfo<CL_DEVICE_MAX_COMPUTE_UNITS>()<<std::endl;
            std::cout<<"\t\t Clock Rate : " << j->getInfo<CL_DEVICE_MAX_CLOCK_FREQUENCY>()<<" MHz"<<std::endl;
        }
        std::cout<<"\n\n\n";

 //MAIN CODE BEGINS HERE

 //get Kernel
        std::ifstream ifs("vector_add_kernel.cl");
        std::string kernelSource((std::istreambuf_iterator<char>(ifs)), std::istreambuf_iterator<char>());
        std::cout<<kernelSource;

   //Create context, select device and command queue.
        cl::Context context(devices);
        cl::Device &device=devices.front();
        cl::CommandQueue cmdqueue(context,device);

  // Generate Source vector and push the kernel source in it.
        cl::Program::Sources sourceCode;
        sourceCode.push_back(std::make_pair(kernelSource.c_str(), kernelSource.size()));

  //Generate program using sourceCode
        cl::Program program=cl::Program(context, sourceCode);

  //Build program..
        try
        {
            program.build(devices);
        }
        catch(cl::Error &err)
        {
            std::cerr<<"Building failed, "<<err.what()<<"("<<err.err()<<")"
                     <<"\nRetrieving build log"
                     <<"\n Build Log Follows \n"
                     <<program.getBuildInfo<CL_PROGRAM_BUILD_LOG>(devices.front());
        }

  //Declare and initialize vectors
        std::vector<cl_float>B(993448,1.3);
        std::vector<cl_float>C(993448,1.3);
        std::vector<cl_float>A(993448,1.3);
        cl_int N=A.size();

  //Declare and intialize proper work group size and global size. Global size raised to the nearest multiple of workGroupSize.
        int workGroupSize=128;
        int GlobalSize;
        if(N%workGroupSize) GlobalSize=N - N%workGroupSize + workGroupSize;
        else GlobalSize=N;
  //Declare buffers.
        cl::Buffer vecA(context, CL_MEM_READ_WRITE, sizeof(cl_float)*N);
        cl::Buffer vecB(context, CL_MEM_READ_ONLY , (B.size())*sizeof(cl_float));
        cl::Buffer vecC(context, CL_MEM_READ_ONLY , (C.size())*sizeof(cl_float));
  //Write vectors into buffers
        cmdqueue.enqueueWriteBuffer(vecB, 0, 0, (B.size())*sizeof(cl_float), &B[0] );
        cmdqueue.enqueueWriteBuffer(vecB, 0, 0, (C.size())*sizeof(cl_float), &C[0] );

 //Executing kernel
        cl::Kernel kernel(program, "vector_add");
        cl::KernelFunctor kernel_func=kernel.bind(cmdqueue, cl::NDRange(GlobalSize), cl::NDRange(workGroupSize));

        kernel_func(vecA, vecB, vecC, N);

 //Reading back values into vector A
        cmdqueue.enqueueReadBuffer(vecA,true,0,N*sizeof(cl_float), &A[0]);
        cmdqueue.finish();

  //Saving into file.
        std::ofstream output("vectorAdd.txt");
        for(int i=0;i<N;i++) output<<A[i]<<"\n";

    }
    catch(cl::Error& err)
    {
        std::cerr << "OpenCL error: " << err.what() << "(" << err.err() <<
                  ")" << std::endl;

        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} 
```

问题是，对于较小的 N 值，我得到的正确结果是 2.6 但对于较大的值，例如上面代码中的值 (993448)，我得到的垃圾输出在 1 和 2.4 之间变化。

这是内核代码：

```
__kernel void vector_add(__global float *A, __global float *B, __global float *C, int N) {

// Get the index of the current element
int i = get_global_id(0);

//Do the operation
if(i<N)    A[i] = C[i] + B[i];
} 
```

*更新：好的，看来代码现在可以工作了。我在上面的代码中修复了一些小错误 1）初始化 GlobalSize 的部分已经修复。2）enqueueWriteBuffer 中的愚蠢错误（给定的参数错误）它现在正在输出大 N 值的正确结果。*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T10:27:27.150

尝试将数据类型从浮点数更改为双精度数等。

# windows - 暂时打开回声

> ID：10036250
> 
> 赞同：2
> 
> 时间：2012-04-05T21:26:03.847
> 
> 标签：windows, cmd, dos, echo

我正在创建一个批处理文件并使用 @ECHO OFF 关闭了回显但是我需要在屏幕上演示批处理中的命令之一如何临时打开 ECHO

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:28:52.783

句法：

```
ECHO [ON | OFF]
ECHO [Message] 
```

一个简单的`ECHO ON`应该解决这个谜。

# sql-server - 创建以 DateTime 列为键的非聚集索引

> ID：10036253
> 
> 赞同：1
> 
> 时间：2012-04-05T21:26:27.340
> 
> 标签：sql-server, sql-server-2005, indexing

我正在优化我们系统上经常使用的查询。where 子句类似于

```
WHERE J.Visibility > 11 
and J.isactive='true' 
and J.isdeleted='false' 
AND (
       CutOffDate > '2012-04-05 00:00:00.000' 
       OR J.CreatedOn > '2011-10-08 00:00:00.000'
    ) 
AND J.Country = 'India' 
AND J.City='Bangalore' 
AND (J.Type > 0 AND J.Type < 230)  
AND J.Category in (20) 
```

已经存在具有 City、Type、Visibility、IsActive、IsDeleted 的 NC 索引（Index1）。我使用上述字段创建了一个新的 NC 索引，但也在开头添加了 CreatedOn、CutOffDate 和 Category。

所以新索引（Index2）上的键是 City、Category、CreatedOn、CutOffDate、Type、Visibility 等。 CreatedOn 和 CutOffDate 都是按降序排列的。但是，当我运行查询时，实际执行计划仍然对 Index1 而不是 Index2 进行了索引扫描。鉴于 DateTime 条件，我会认为 Index2 会是更好的选择，并且会导致索引搜索。但那并没有发生。

在调查为什么会发生这种情况时，我遇到了[这篇 MS 文章](http://support.microsoft.com/kb/253595)，现在我想知道是否需要像文章中提到的那样创建具有日期时间的索引。当我在 Google 上搜索时，我没有发现其他任何地方都提到过这种使用日期时间创建索引的技术，因此想知道其他人在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:49:03.083

**确切的**索引定义是什么？索引`(City, Category, CreatedOn, CutOffDate, Type, Visibility)`不能用于您的查询。事实上，假设您有一个标准，该标准`>`在两个字段上使用不等式比较 ( ) 并在它们之间使用 OR 条件，因此没有索引可能有助于比较的日期时间部分。您链接的文章与您的问题绝对无关。

为了让我们提出一个好的索引，您必须准确地告诉我们表的定义、您使用的准确查询以及每列中的基数（不同值的数量）。

# regex - 有没有一种在bash中用波浪号替换主目录的好方法？

> ID：10036255
> 
> 赞同：29
> 
> 时间：2012-04-05T21:26:29.283
> 
> 标签：regex, bash, path

我尝试使用路径并用 bash 中的波浪号替换主目录，我希望用尽可能少的外部程序来完成它。有没有办法只用bash来做到这一点。我有

```
${PWD/#$HOME/\~} 
```

但这并不完全正确。它需要转换：

```
/home/alice to ~
/home/alice/ to ~/
/home/alice/herp to ~/herp
/home/alicederp to /home/alicederp 
```

[值得一提的是，在提示符中转换 \w 值](http://www.gnu.org/software/bash/manual/html_node/Printing-a-Prompt.html)时，bash 源代码是如何做到的：

```
/* Return a pretty pathname.  If the first part of the pathname is
   the same as $HOME, then replace that with `~'.  */
char *
polite_directory_format (name)
     char *name;
{
  char *home;
  int l;

  home = get_string_value ("HOME");
  l = home ? strlen (home) : 0;
  if (l > 1 && strncmp (home, name, l) == 0 && (!name[l] || name[l] == '/'))
    {
      strncpy (tdir + 1, name + l, sizeof(tdir) - 2);
      tdir[0] = '~';
      tdir[sizeof(tdir) - 1] = '\0';
      return (tdir);
    }
  else
    return (name);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-05T23:07:43.783

我不知道作为变量替换的一部分直接执行此操作的方法，但您可以将其作为命令执行：

```
[[ "$name" =~ ^"$HOME"(/|$) ]] && name="~${name#$HOME}" 
```

请注意，这并不完全符合您的要求：它将“/home/alice/”替换为“~/”而不是“~”。这是故意的，因为有些地方的斜线很重要（例如`cp -R ~ /backups`，与 不同的东西`cp -R ~/ /backups`）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-19T15:04:46.580

请参阅[此 unix.stackexchange 答案](https://unix.stackexchange.com/a/207214)：

> 如果您使用的是 bash，则`dirs`内置函数具有所需的行为：
> 
> ```
> dirs +0
> ~/some/random/folder 
> ```

这可能使用您粘贴在那里的 Bash 自己的 C 代码。:)

以下是你如何使用它：

```
dir=...    # <- Use your own here.

# Switch to the given directory; Run "dirs" and save to variable.
# "cd" in a subshell does not affect the parent shell.
dir_with_tilde=$(cd "$dir" && dirs +0) 
```

请注意，这仅适用于已存在的目录名称。

# java - 如何停止系统的一部分并让用户界面仍然运行？

> ID：10036256
> 
> 赞同：1
> 
> 时间：2012-04-05T21:26:37.020
> 
> 标签：java, user-interface

我正在构建一个系统，其中有一个简单的 GUI，可以触发系统执行。我以一种在引发异常时`System.exit(0)`调用系统的方式实现了系统，因此应用程序停止。

我希望停止执行，就像现在一样，但是我希望 GUI 也不会关闭。我尝试在单独的线程中实现系统，但是当抛出一些异常时，应用程序仍然关闭。

有没有办法让 UI 保持打开状态，但仍然停止实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:32:08.530

您不能为此目的使用 Java system.exit，因为该函数会终止运行您的代码的 Java 虚拟机实例，从而停止应用程序的所有线程。

为了使 System.exit 现在按您希望的方式工作，您需要有两个不同的进程，以便每个进程都在自己的 Java 虚拟机中运行。但是，这将使将事物联系在一起变得更加困难。

理想情况下，您应该在实现中添加某种控制，以便您的 GUI 线程可以激活或停用一个自然会停止实现逻辑的开关。在我看来，这确实是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:29:50.890

从本质上讲，它们需要是单独的应用程序。也就是说，使它们成为独立的进程，而不是独立的线程。

UI 和后端之间的这种松散耦合将实现您想要的行为，并且还会产生与分离 UI 和后端的关注点相关的许多其他好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:31:11.643

不，如果您的程序在同一进程上运行，则无法让您的 UI 保持打开状态。我想您可以将您的 UI 和您的程序作为单独的应用程序运行，但这似乎很乏味且容易出错。如果抛出异常，您应该通知用户，而不仅仅是退出 JVM。

# javascript - 如何从哈希 url 获取参数？

> ID：10036261
> 
> 赞同：0
> 
> 时间：2012-04-05T21:26:59.510
> 
> 标签：javascript, regex

在我的一些页面上，我在 url 中有一个这样的哈希：[http://localhost/#/products/6959](http://localhost/#/products/6959)

如何检查我是否有可用的产品 ID，以便我可以将其保存在变量中以供以后使用？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:41:50.187

您应该能够通过访问`params`变量从 URL 中获取该 ID。在这种情况下，`params[:id]`应该做的伎俩。

另外，我不建议使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:45:10.680

您想要一个正则表达式来提取 javascript 中 url 末尾的数字吗？

```
"http://localhost/#/products/6959".match(/[0-9]+$/); 
```

编辑：或者如果你想确保这是产品：

```
"http://localhost/#/products/6959".match(/products\/([0-9]+$)/)[1]); 
```

括号表示您在 [1] 中找到的匹配组。

# database-design - 在与表联系人和法人实体的关系中设计客户表

> ID：10036264
> 
> 赞同：0
> 
> 时间：2012-04-05T21:27:05.470
> 
> 标签：database-design

我有两个具有以下属性（字段）的表：

## 接触

*   ID联系方式
*   姓
*   名
*   父亲姓名
*   IDGender
*   称呼
*   出生日期
*   ...

## 法律实体

*   IDLegalEntity
*   姓名
*   合法名称
*   IDLegalForm
*   ...

在我的数据库中，我想存储有关**Customers**的信息。

## 顾客

*   ID客户
*   税号
*   税务局
*   ...

客户可以是自然人（**联系人**）或公司（**法人实体**）。表**Customer**应如何与表**Contact**和表**Legal Entity**相关联，以便在其他表中使用唯一的 CustomerID（主键）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:59:13.027

这通常是通过实现一个超类型表来完成的。您可以通过在每个指向超类型的子类型表中放置一个外键来创建和子类型`LegalEntity`。`Contact`你可能会称它为`PotentialCustomer`.

然后将`Customer`表中的外键添加到适当的超类型记录（在 PotentialCustomer 中）。这使您可以将客户记录仅链接到一个表，避免使用多个可为空的外键。

它还允许您拥有一个超类型的单个实例，该实例恰好同时是多个子类型。这可能不适用于您的情况，但在您的法人实体在您的业务中扮演特定角色的情况下通常会出现这种情况。例如，很多时候您的供应商也可以是您的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:05:13.677

我会改变很多事情。首先，摆脱您那里的愚蠢的 ID 命名方案。以 ID 开头的一切看起来很奇怪。通常你会以 ID 结尾，大多数 ORM 会寻找以 ID 结尾的约定。

其次，除非他们碰巧是一家公司的联系人，否则我不会称您的自然人为“联系人”。否则，称他们为 Person。

第三，两者都使用取决于你想怎么做。您想一视同仁地对待所有客户、人员和合法实体吗？如果是这种情况，您需要一个具有 UniqueID 的客户表。您使用相同的 id 作为您的 Person/Contact 表和 LegalEntity 的主键。这将创建客户到客户类型的 1:1 映射，并且它们共享一个通用 ID 系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T06:34:25.057

在客户表中创建列CustomerType（个人/法人实体），在法人实体和联系人（子）表中创建外键CustomerId，以引用客户（父）表中的列CustomerId。

# php - 复选框删除 - For 循环内的 If 语句删除错误的条目

> ID：10036269
> 
> 赞同：1
> 
> 时间：2012-04-05T21:27:28.527
> 
> 标签：php, sql, arrays, if-statement, for-loop

我有一个显示我的数据库信息的页面。通过每个循环，打印一个复选框，如果选中并提交，则删除相关条目。复选框名称为“delete[]”，并且包含行 id 的隐藏值被命名为“id[]”。

这是我的表格的相关部分：

```
<tr><td valign='top'>
<label class='amarillo med' style='color:#C00;'>Delete Section </label>
<input type='checkbox' name='delete[]' />
<input type='hidden' name='id[]' value='" . $row['about_id'] . "' />
</td></tr> 
```

这是我的 php 和查询

```
$deleteCount = count($_POST['delete']);
for ($x = 0; $x < $deleteCount; $x++) {
if(isset($_POST['delete'][$x])) {
   $sql = 'DELETE FROM about WHERE about_id = \''.$_POST['id'][$x].'\'';
 $result = mysql_query($sql);
}
} 
```

这就是发生的事情。

如果返回三行，而我只想删除第三行，则选中第三个框并单击提交。这将删除返回的第一行。同样，如果返回三行并且我想删除第一和第三行，我提交并删除前两行。

看起来正在发生的是对于每个选中的复选框，从第一行开始删除许多行。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:44:25.953

最好和更简单的方法是使用

```
<input type="checkbox" name="delete[]" value="<?=$row['about_id']?>"/> 
```

进而

```
foreach($_REQUEST['delete'] as $delID)
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:44:34.227

使用以下代码

```
<tr><td valign='top'>
<label class='amarillo med' style='color:#C00;'>Delete Section </label>
<input type='checkbox' name='delete[$row['id']]' />
<input type='hidden' name='id[$row['id']]' value='" . $row['about_id'] . "' />
</td></tr> 
```

其中 $row['id'] 是行的 id

# powershell - 如何将参数类型转换为不同的对象类型

> ID：10036271
> 
> 赞同：2
> 
> 时间：2012-04-05T21:27:37.543
> 
> 标签：powershell, powershell-2.0

我正在PowerShell中编写一些脚本，我想知道是否有一种方法可以“声明”参数“X”，就像声明参数“-Credential”一样，例如在Get-WMIObject cmdlet中。

让我更具体一点。几乎所有 cmdlet 中的 Credential 参数都是 PSCredential 对象。但是，参数可以是 PSCredential 对象，也可以是带有用户名的字符串对象。

```
[CmdletBinding()]
param ([Parameter(Mandatory = $false)]
       [System.Management.Automation.PSCredential]
       $Credential) 
```

传递字符串时出现问题。当然，不能对参数进行参数转换。无法将类型“System.String”转换为类型 PSCrendential。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T07:14:06.447

试试这个：

```
param(
    [System.Management.Automation.Credential()]
    $Credential=[System.Management.Automation.PSCredential]::Empty
) 
```

至于参数参数转换，请查看这个很棒的脚本：

[http://poshcode.org/3024](http://poshcode.org/3024)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:34:40.020

更多信息:)

PowerShell 包含其中一种用于凭据的参数转换，因此，每当您编写具有 PSCredential 参数的脚本时，都应该使用 CredentialAttribute 来装饰它，如下所示：

```
param([Parameter(Mandatory = $false)]
      [System.Management.Automation.PSCredential]
      [System.Management.Automation.Credential()]$Credential =  [System.Management.Automation.PSCredential]::Empty) 
```

这有点令人困惑，因为您省略了属性名称的“属性”部分（即：您不必指定[[System.Management.Automation.CredentialAttribute()]](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.credentialattribute)），所以乍一看，它看起来像您'指定凭据类型两次。当然，实际上这是 PowerShell 中括号的另一种用法。要指定属性，您可以像使用类型一样使用方括号，但在其中使用括号（即使该属性不需要任何参数）。

[http://huddledmasses.org/more-custom-attributes-for-powershell-parameters/](http://huddledmasses.org/more-custom-attributes-for-powershell-parameters/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:53:37.363

如果将函数参数声明为 [T] 类型，则在调用该函数时可以提供 [X] 类型的任何对象，其中 [T] 具有采用 [X] 类型的单参数构造函数。

换句话说，如果您可以从 [String] 构造 [T]，则可以使用 [T] 或 [String] 调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:28:27.287

我就是这样做的。我这样声明参数：

[Parameter(Position=2)] [object]$Credential

然后在脚本的开头：

```
begin {
        Write-Verbose -Message "Starting  $($myinvocation.mycommand)"
        write-verbose -Message "Using volume $($volume.toUpper())"
        #convert credential to a PSCredential if a string was passed.
        if ( $credential -is [system.management.automation.psCredential]) {
            Write-Verbose "Using PSCredential for $($credential.username)"
        }
        ElseIf ($Credential) {
            Write-Verbose "Getting PSCredential for $credential"
            $Credential=Get-Credential $credential
        }
    } #Begin 
```

# wpf - 为什么折叠的元素仍然被标记为脏区域并被渲染？

> ID：10036273
> 
> 赞同：1
> 
> 时间：2012-04-05T21:27:38.040
> 
> 标签：wpf, progress-bar, wpftoolkit, region

我注意到在播放视频时出现了轻微的性能问题，并决定使用 Perforator 对其进行分析并轻松解决了这个问题，但我发现一个显眼的区域在 100% 的时间内被非常快速地绘制。我担心这个肮脏的区域会影响性能。

[这里的区域](http://i.imgur.com/W49qx.png) 是灰色的框，截图恰好在渲染之间捕捉到了它。

现在我找到了罪魁祸首——[一个繁忙的指示器](http://i.imgur.com/Tn4rY.png)（来自 WPFToolkit），其可见性设置为 Collapsed。没有其他折叠控件像这样呈现，所以我必须假设这是由于 ProgressBar IsIndeterminate 标志。

两个问题：

*   这会升级为真正的性能问题，还是相对普遍？
*   将其状态更改为 会更好`IsIndeterminate = true`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:38:16.163

WPF 中的动画会产生脏区，即使它被折叠或位于某些元素后面。这是已知问题，可能会导致性能下降，具体取决于元素数量和动画分辨率。

我建议您在进度指示器不可见时停止动画。这应该会有所帮助。

# javascript - jQuery 插件存储值

> ID：10036276
> 
> 赞同：0
> 
> 时间：2012-04-05T21:28:02.463
> 
> 标签：javascript, jquery, jquery-plugins, closures

我正在开发一个 jquery 插件，但在保存属性以供以后使用时遇到了问题。在下面的示例中，控制台输出是`18, 50, 50`当我正在寻找`18, 50, 18`. 我理解为什么会发生这种情况，但我无法找到一种保存`properties`以供多种不同方法使用的好方法。我有一种感觉，我错过了一些非常明显的东西，但我只是没有看到它。

```
<html>
    <body>
        <h1>Hello</h1>
        <h2>World</h2>

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
        <script type="text/javascript">
            (function ($) {
                var commonOperations, methods, properties;

                commonOperations = function () {
                    console.log(properties.height);
                };

                methods = {
                    init : function (overrides) {
                        var defaults;
                        defaults = { height: 18 };
                        properties = $.extend(defaults, overrides);

                        commonOperations();
                    },

                    foo : function () {
                        commonOperations();
                    }
                };

                $.fn.myPlugin = function (method) {
                    if (methods[method]) {
                        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
                    } else if (typeof method === 'object' || !method) {
                        return methods.init.apply(this, arguments);
                    } else {
                        $.error('Method ' + method + ' does not exist for jQuery.myPlugin');
                    }
                };
            }(jQuery));

            $(document).ready(function () {
                $("h1").myPlugin();
                $("h2").myPlugin({ height: 50 });
                $("h1").myPlugin("foo");
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:34:33.647

这取决于您的插件的性质，但使用`.data()`基于每个元素存储属性可能是有意义的。

```
 init: function(overrides) {
     return this.each(function() {
       var defaults = { whatever: "foo" };
       $(this).data('properties', $.extend(defaults, overrides));
     });
   } 
```

然后其他方法总是从元素中提取“属性”对象：

```
 foo : function () {
      return this.each(function() {
        commonOperations.call(this, $(this).data('properties'));
      });
    } 
```

# mysql - 为什么这个 MySQL 过程语法不正确？在测试服务器上工作

> ID：10036277
> 
> 赞同：2
> 
> 时间：2012-04-05T21:28:09.383
> 
> 标签：mysql, stored-procedures

我已经编写了几个程序并在我的虚拟主机服务器上成功实现了它们。但是，通过此过程，我得到 #1064 错误。我在 MySQL Workbench 中编写了它，它没有一点抱怨。在我的本地机器上工作正常。

```
USE mydb
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `temp`(
  IN p_page int(11),
  IN p_approved varchar(3))
  BEGIN
    DECLARE v_postsPerPage tinyint;
    DECLARE v_totalPostCount int(11);
    DECLARE v_listFrom int(11);

    SELECT posts_per_page INTO v_postsPerPage FROM diskus_settings;

    SELECT COUNT(*) INTO v_totalPostCount FROM diskus_post;

    SET v_listFrom = p_page * v_postsPerPage - v_postsPerPage;

    SELECT p.post_id, p.user_id, u.username, get_time_diff(p.date) as date, p.ip, p.text, p.parent_post_id, p.approved AS posts
    FROM diskus_post p, diskus_user u
    WHERE p.user_id = u.user_id
      AND p.approved = p_approved
    ORDER BY p.date DESC LIMIT v_listFrom, v_postsPerPage;
END $$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:53:56.910

> [12.2.9。选择语法](http://dev.mysql.com/doc/refman/5.5/en/select.html)
> 
> > 在存储程序中，LIMIT 参数可以使用整数值例程参数或 MySQL 5.5.6 的局部变量来指定。

[SP 不接受 LIMIT 子句中的变量](http://bugs.mysql.com/bug.php?id=11918)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:42:28.220

这应该工作 -

```
USE mydb
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `temp`(IN p_page int(11), IN p_approved varchar(3))
  BEGIN
    DECLARE v_postsPerPage tinyint;
    DECLARE v_totalPostCount int(11);
    DECLARE v_listFrom int(11);

    SELECT posts_per_page INTO v_postsPerPage FROM diskus_settings;

    SELECT COUNT(*) INTO v_totalPostCount FROM diskus_post;

    SET v_listFrom = p_page * v_postsPerPage - v_postsPerPage;

    SET @sql = CONCAT('SELECT p.post_id, p.user_id, u.username, get_time_diff(p.date) as date, p.ip, p.text, p.parent_post_id, p.approved AS posts
        FROM diskus_post p, diskus_user u
        WHERE p.user_id = u.user_id
        AND p.approved = p_approved
        ORDER BY p.date DESC
        LIMIT ', v_listFrom, ', ', v_postsPerPage);

    PREPARE stmt FROM @sql;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END $$ 
```

# performance - 如何检测缓慢的网页加载和不正常的用户

> ID：10036279
> 
> 赞同：0
> 
> 时间：2012-04-05T21:28:21.863
> 
> 标签：performance

谷歌和推特，仅举几例，在他们的页面中都有代码，可以检测页面加载时间慢，并向用户展示一个很好的消息。我想实现类似的东西，在我深入研究并尝试对其实现进行逆向工程之前，我想知道是否有任何现有的组件可以帮助实现这一目标。（我的搜索失败了）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:42:53.403

还没有看到任何现成的库可以做到这一点，但它真的只是一个 AJAX 微调器，而是一个在短暂延迟后加载的库吗？

# java - Jvm 本机代码编译疯狂 - 即使在编译代码之后，我似乎也会在一段时间内遭受奇怪的性能损失。为什么？

> ID：10036280
> 
> 赞同：13
> 
> 时间：2012-04-05T21:28:22.340
> 
> 标签：java, jvm, benchmarking, jvm-hotspot

## 问题

在用 Java 对一个简单的 QuickSort 实现进行基准测试时，我在`n vs time`绘制的图形中遇到了意想不到的问题：

![在此处输入图像描述](../Images/82d192c7b48704a54d4693a1a78d4aa3.png)

我知道 HotSpot 在某些方法似乎被大量使用后会尝试将代码编译为本机，因此我使用`-XX:+PrintCompilation`. 经过反复试验，它似乎总是以相同的方式编译算法的方法：

```
@ iteration 6 -> sorting.QuickSort::swap (15 bytes)
@ iteration 7 -> sorting.QuickSort::partition (66 bytes)
@ iteration 7 -> sorting.QuickSort::quickSort (29 bytes) 
```

我用这个添加的信息重复上面的图形，只是为了让事情更清楚一点：

![在此处输入图像描述](../Images/dcc16bb1e9407c1bc7002449fe507a2f.png)

在这一点上，我们都必须问自己：为什么在编译代码之后我们仍然会遇到那些丑陋的驼峰？也许它与算法本身有关？当然可以，幸运的是，我们有一种快速的方法来解决这个问题，使用`-XX:CompileThreshold=0`：

![在此处输入图像描述](../Images/d500138d20196ff697f5e677a41e0df8.png)

无赖！它确实必须是 JVM 在后台执行的操作。但是什么？我推测，虽然代码正在编译，但可能需要一段时间才能真正开始使用已编译的代码。也许在这里和那里添加几个`Thread.sleep()`s 可以帮助我们解决这个问题？

![在此处输入图像描述](../Images/e2ac93d5dc401bc36a66e711bc1e8f93.png)

哎哟! 绿色函数是 QuickSort 的代码，每次运行之间的内部间隔为 1000 毫秒（详见附录），而蓝色函数是我们的旧函数（仅用于比较）。

首先，给 HotSpot 时间似乎只会让事情变得更糟！也许它*看起来*只是因为其他一些因素而变得更糟，比如缓存问题？

免责声明：我正在对所示图形的每个点进行 1000 次试验，并`System.nanoTime()`用于测量结果。

## 编辑

在这个阶段，你们中的一些人可能想知道使用`sleep()`可能会如何扭曲结果。我再次运行 Red Plot（没有本地编译），现在中间有睡眠：

![在此处输入图像描述](../Images/51623143ac8749dd61ed07ce790fd036.png)

可怕的！

## 附录

在这里我展示`QuickSort`我正在使用的代码，以防万一：

```
public class QuickSort {

    public <T extends Comparable<T>> void sort(int[] table) {
        quickSort(table, 0, table.length - 1);
    }

    private static <T extends Comparable<T>> void quickSort(int[] table,
            int first, int last) {
        if (first < last) { // There is data to be sorted.
            // Partition the table.
            int pivotIndex = partition(table, first, last);
            // Sort the left half.
            quickSort(table, first, pivotIndex - 1);
            // Sort the right half.
            quickSort(table, pivotIndex + 1, last);
        }
    }

    /**
     * @author http://en.wikipedia.org/wiki/Quick_Sort
     */
    private static <T extends Comparable<T>> int partition(int[] table,
            int first, int last) {
        int pivotIndex = (first + last) / 2;
        int pivotValue = table[pivotIndex];
        swap(table, pivotIndex, last);
        int storeIndex = first;
        for (int i = first; i < last; i++) {
            if (table[i]-(pivotValue) <= 0) {
                swap(table, i, storeIndex);
                storeIndex++;
            }
        }
        swap(table, storeIndex, last);
        return storeIndex;
    }

    private static <T> void swap(int[] a, int i, int j) {
        int h = a[i];
        a[i] = a[j];
        a[j] = h;
    }
} 
```

以及我用来运行我的基准测试的代码：

```
public static void main(String[] args) throws InterruptedException, IOException {
    QuickSort quickSort = new QuickSort();

    int TRIALS = 1000;

    File file = new File(Long.toString(System.currentTimeMillis()));
    System.out.println("Saving @ \"" + file.getAbsolutePath() + "\"");

    for (int x = 0; x < 30; ++x) {
    //          if (x > 4 && x < 17)
    //              Thread.sleep(1000);

        int[] values = new int[x];

        long start = System.nanoTime();

        for (int i = 0; i < TRIALS; ++i)
            quickSort.sort(values);

        double duration = (System.nanoTime() - start) / TRIALS;
        String line = x + "\t" + duration;
        System.out.println(line);
        FileUtils.writeStringToFile(file, line + "\r\n", true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T22:08:06.377

好吧，看来我自己解决了这个问题。

我认为编译的代码可能需要一段时间才能启动的想法是正确的。问题是我实际实现基准测试代码的方式存在缺陷：

```
if (x > 4 && x < 17)
    Thread.sleep(1000); 
```

在这里，我假设唯一的“受影响”区域在 4 到 17 之间，我可以继续对这些值进行睡眠。事实并非如此。下面的情节可能很有启发性：

![在此处输入图像描述](../Images/130eddf40eae46c8aea3bce84e3aefc2.png)

在这里，我将原始的无编译功能（红色）与另一个无编译功能进行比较，但中间有睡眠。如您所见，它们以不同的数量级工作，这意味着混合使用和不使用睡眠的代码结果将产生不合理的结果，正如我所做的那样。

最初的问题仍未得到解答。是什么导致即使在编译发生后也会出现驼峰？让我们尝试找出这一点，在所有得分中加入 1s 睡眠：

![在此处输入图像描述](../Images/d458d494a345e492b1c6e774dfc08c40.png)

这产生了预期的结果。奇怪的驼峰正在发生，本机代码仍然没有启动。

比较 sleep 50ms 和 sleep 1000ms 函数再次得出预期结果：

![在此处输入图像描述](../Images/ae0ee9c74e2f7b3c07e3f24ee320009e.png)

（灰色的似乎还是有点延迟）

# python - Python平衡运动日程生成

> ID：10036281
> 
> 赞同：0
> 
> 时间：2012-04-05T21:28:23.003
> 
> 标签：python

我有以下代码示例

```
import itertools
import random
set_size = 2
schedule = set()
teams = range(10)
for comb in itertools.product(teams, repeat=set_size):
    comb = sorted(list(comb))
    if len(set(comb)) == set_size:
        schedule.add(tuple(comb))

schedule = list(schedule)
random.shuffle(schedule)

home = {}
for game in schedule:
    if home.has_key(game[0]):
        home[game[0]] += 1
    else:
        home[game[0]] = 1

print home 
```

它生成了一个有效的时间表，但问题是一些球队在主场比赛中非常不平衡。

例如，在家打印是

```
{0: 5, 1: 3, 2: 5, 3: 5, 4: 5, 5: 5, 6: 5, 7: 5, 8: 4, 9: 3} 
```

关键是球队，价值是主场数。如果我在一个联赛中有 10 支球队，我预计有些球队将获得 5 支主场，而其他球队仅获得 4 支球队，但有些球队获得 5 支球队，而其他球队仅获得 3 支球队

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:12:50.230

另一个例子：

```
import random

data = range(10)
home_games = len(data)/2
home = {}
schedule = []
for d in data:
    home[d] = 0

random.shuffle(data)

for i in range(len(data)):
    for j in range(1,len(data)-i):
        if j < home_games:
            schedule.append((data[i], data[j+i]))
            home[data[i]]+=1
        else:
            schedule.append((data[i+j], data[i]))
            home[data[j+i]]+=1

print home 
```

和输出：

> {0：5、1：5、2：4、3：4、4：4、5：5、6：5、7：5、8：4、9：4}

您可以在时间表上使用 random.shuffle 来更改配对顺序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:21:34.630

这是一个开始：

```
from itertools import combinations

def balance(teams):
  home_count = dict.fromkeys(teams,0)
  max_homes = len(teams)//2
  matches = []
  for a,b in combinations(teams,2):
    if home_count[a] >= max_homes:
      matches.append((b,a))
      home_count[b] += 1
    else:
      matches.append((a,b))
      home_count[a] += 1
  return matches

def home_games(matches):
  counts = {}
  for (a,b) in matches:
    counts[a] = counts.get(a,0) + 1
  return counts 
```

然后

```
>>> matches = balance(range(10))
>>> home_games(matches)
{0: 5, 1: 5, 2: 5, 3: 5, 4: 5, 5: 4, 6: 4, 7: 4, 8: 4, 9: 4} 
```

您应该洗牌传递给的球队顺序，`balance`因为最后几支球队的主场比赛总是更少。

您可能还需要分配比赛，以便任何一支球队在最后一场比赛后不会过早比赛，但这取决于同时举行的比赛数量。并且值得另一个 SO 问题。

# javascript - 内容脚本跨域或消息传递

> ID：10036283
> 
> 赞同：2
> 
> 时间：2012-04-05T21:28:33.627
> 
> 标签：javascript

我正在编写一个修改网站的 javascript 扩展。扩展为网站添加了一个按钮，点击它会修改页面内容。我的脚本必须将跨域 xmlhttprequests 发送到 websiteB，并在安装时获得这样做的权限。

我的问题是在我正在修改的网站的内容范围内运行的代码无权进行跨域请求，因为它在网页的内容范围内。我也不能轻松地在我的主要扩展代码和在页面上单击按钮时运行的代码之间传递变量。

这些是我的代码的相关部分：

```
 // ==UserScript==
    // @include        http://www.WebsiteB.com/*
    // @match          http://www.WebsiteB.com/*
    // ==/UserScript==

    var a = 1;

    button.innerHTML = '<a href="javascript:void(0)" onclick="myFunc();">clickMe</a>';
    menu.appendChild(button);

    contentEval(function() {
        myFunc = function() {
            //a is undefined

            //this part does not have cross domain request permission   
        };
    } 
```

我使用从[http://wiki.greasespot.net/Content_Script_Injection](http://wiki.greasespot.net/Content_Script_Injection)获取的 contentEval 来获取相关代码，以便能够与运行我的脚本的页面进行交互。没有它，我将无法从网站上的按钮调用 myFunc。也不能通过直接使用 myFunc(a) 将变量从主代码区域传输到 myFunc()。myFunc(1) 有效，但不适合我的需要。

我可能会以错误的方式处理事情。如果有，请赐教。

有没有办法从与网页交互的代码中获得跨域权限？如果没有，我应该使用什么来将消息从主代码区域传递到页面的内容脚本？

# iphone - ffmpeg 在 iOS 上的使用

> ID：10036286
> 
> 赞同：0
> 
> 时间：2012-04-05T21:28:50.037
> 
> 标签：iphone, c++, c, ios, ffmpeg

我知道要在 iOS 应用程序中使用 FFmpeg，您需要使用 ./configure 和 make 来生成 .a 文件，然后将其添加到项目中。

我的问题是，一旦 .a 文件出现在项目导航器和 Link Binary With Libraries 部分中，你如何在你的类中实际使用它们？，我看到 #import 语句中没有“框架”可以使用，所以我不知道如何访问类的方法和属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-02T07:59:38.247

您只需将头文件 (.h) 导入您的实现 (.m) 文件并继续。举个例子 ;

```
#import "avformat.h"

// Some code goes here

    /*
     *   avformat_open_input(AVFormatContext **ps, const char *filename, AVInputFormat *fmt, AVDictionary **options)
     */
    int openInputValue = avformat_open_input(&pFormatCtx, utf8FilePath, inputFormat, nil);
    NSLog(@"%s - %d # openInputValue = %d", __PRETTY_FUNCTION__, __LINE__, openInputValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:06:12.620

每个.a文件都有一些实现文件，每个实现文件都有一个接口文件，objc-c实现文件是.m/.mm，接口文件是.h，就像C/C++一样，所以如果你想使用这个库，你需要导入头文件（.h）。头文件可以告诉你类的方法和属性

# c# - 在 asp.net mvc3 视图中使用关键字

> ID：10036291
> 
> 赞同：1
> 
> 时间：2012-04-05T21:28:55.530
> 
> 标签：c#, asp.net-mvc-3, keyword, asp.net-mvc-views

我正在使用 MVC3 框架来设计一个网站。我从 ms sql 数据库中提取控制器中的数据，表中的一列被命名为“do”。当我尝试使用 @Model 关键字（例如：@Model.do）创建一个显示信息的视图时，我收到一个错误：

预期标识符；do 是一个关键字。

我想知道是否有办法在 MVC3 视图中使用列名（它们是 c# 中的关键字），还是我只能选择重命名数据库表中的列？

谢谢你 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:01:38.470

在 C# 中使用任何关键字的方式是在其前面加上一个“@”。例如，你会看到很多

```
@Html.ActionLink("My Link", "Action", null, new {@class="abc"}) 
```

将“class”属性添加到“a”标签。这是合法的代码：

```
class Program
{
    static void Main(string[] args)
    {
        Entity e = new Entity();
        e.@do = 10;
    }
}

class Entity
{
    public int @do
    {
        get;
        set;
    }
} 
```

也是如此

```
public void DoSomething(int @do)
{
    for (int i = 0; i < @do; i++)
    {
        // process i
    }
} 
```

如果您使用 ASPX 作为您的视图引擎，以下是可以的：

```
<%= Model.@do %> 
```

在 Razor 视图中，以下内容也是有效的：

```
@Html.Raw(Model.@do) 
```

或者

```
@(@Model.@do) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:35:15.443

没有办法在`do`视图模型（.cs 类）中定义变量。

```
"Error 1 Invalid token 'do' in class, struct, or interface member declaration" 
```

话虽如此，您可以在模型中重新映射，以便将列`do`映射到字段`do_field`

```
public class Entity
{
 [Column("do")]
 public string do_field { get; set; }
} 
```

# php - MongoDB打印子数组图像

> ID：10036295
> 
> 赞同：0
> 
> 时间：2012-04-05T21:29:09.600
> 
> 标签：php, mongodb, printing, find, echo

我在打印子数组时遇到了一些问题`homemain=>image`

这是我的 JSON

```
{
   "_id": ObjectId("4f7d0b9638fc5dc54c000000"),
   "station": "hits",
   "homemain": {
     "image": "URL",
     "link": "URL LINK" 
  } 
} 
```

正如您在 homemain 下看到的那样，它有图像我希望在页面上打印出 URL 一词。

这是我的 PHP 脚本

```
public function main($stationname)
    {
        // select a collection (analogous to a relational database's table)
         $collection = $this->db->Stations_Banner;

        // find everything in the collection
        $cursor = $collection->find(array("station"=>"hits"),array("homemain"));

        $test = array();
            // iterate through the results
            while( $cursor->hasNext() ) {
                $test[] = ($cursor->getNext());
            }
        //Print Results 
        return json_encode($test);

    } 
```

然后在我的 index.php 页面上，我称之为

```
<?php
    $banner = $fetch->main("hits");
    echo $banner;       
?> 
```

我试过用`$banner->homemain->image`我也试过像 $banner->homemain['image']

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:46:25.363

而不是这个：

```
return json_encode($test); 
```

只需这样做：

```
return $test; 
```

您不需要对其进行 json_encode 编码，因为您仍在 php 中使用它。然后在你的 index.php 中你可以这样做：

```
$banner = $fetch->main("hits");
echo $banner[0]['homemain']['image']; 
```

我假设您还想循环查看结果，而不是只显示第一个结果的图像，但您没有说您需要帮助，所以我只是在这里呼应第一个结果。

# python - Python xlutils 复制错误的年份

> ID：10036296
> 
> 赞同：0
> 
> 时间：2012-04-05T21:29:14.290
> 
> 标签：python, excel, xlwt, xlutils

我编写了一个脚本，可以更改 Excel 工作表中某个日期的值。当我使用 创建一个新的 excel 文件`copy`时，它会正确复制所有内容，但日期的年份部分除外。例如，它将从 2012 年 4 月 5 日到 2008 年 4 月 5 日。似乎所有日期都可以追溯到四年前。这是代码：

```
def exceledit():
#open excel sheet                                                           
import xlrd, xlwt, xlutils
import datetime
from xlutils.copy import copy
print 'Opening excel sheet...'
book = xlrd.open_workbook('test.xls', on_demand=True, formatting_info=True)
print 'Creating and editing new excel sheet...'
wbook = copy(book)
print 'Done creating new excel sheet'

sh = book.sheet_by_index(0)
#iterate through dates in excel sheet                                       
for colnum in range(sh.ncols):
    date = sh.cell_value(3, colnum+4)
    #if xlrd finds a date                                                   
    if date:
        #grab date data                                                     
        year, month, day, hour, minute, second =  xlrd.xldate_as_tuple(date\
    , book.datemode)
        #if dates are within the month currently being edited               
        if month == 04:
            #format excel date information to work with parkh dict          
            format =  str(month) + "/" + str(day) + "/" + str(year)        
            print 'Editing ' + format
            #clear cells to eliminate old information                       
            wbook.get_sheet(0).write(6, colnum+6, "")
            wbook.get_sheet(0).write(5, colnum+6, "")
    wbook.get_sheet(0).write(7, colnum+6, "")
            #iterate through hour segments for that day                     
            for x in parkh[format]:
                #if regular hours, insert in "HOURS" row                    
                if x[0] == 'Park Hours':
                    wbook.get_sheet(0).write(6, colnum+6, x[1])
                #if extra magic hours, insert in respective row             
                if x[0] == 'Extra Magic Hours':
                    #insert in morning row                                  
                    if int(x[1][0:1]) in range(2,9):
                        wbook.get_sheet(0).write(5, colnum+6, x[1])
                    #insert in evening row                                  
                    else:
                        wbook.get_sheet(0).write(7, colnum+6, x[1])

        if month == 05:
            break

print 'Done editing. Now saving...'
wbook.save('new.xls')
print 'new.xls saved' 
```

知道为什么它可能会改变年份吗？我还没有看到其他人在其他地方有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:16:24.770

您显然有一个使用 1904 日期系统的输入 Excel 文件。您的直接问题是`xlutils`不支持正确复制这些文件。幸运的是，修复是单行的，您甚至可以在完成复制后自己在脚本中进行修复：

```
wbook = copy(book)
wbook.dates_1904 = book.datemode 
```

这适用于复制日期，因为`xlwt`支持写入指定正在使用的日期模式的记录。

**警告**您使用 Worksheet.write() 写入文件的任何新日期值都**不会**正确写入，因为`xlwt`不幸的是，在将对象转换为 Excel 魔术浮点数时会忽略该设置`dates_1904`。`datetime.date``datetime.datetime`

我已经编写并测试了一个替换整个`Row.__excel_date_dt`方法的修复程序。它将很快提交到新的`xlwt`存储库`github`。同时，如果您急需，这里是代码：

```
def __excel_date_dt(self, date):
    adj = False
    if isinstance(date, dt.date):
        if self.__parent_wb.dates_1904:
            epoch_tuple = (1904, 1, 1)
        else:
            epoch_tuple = (1899, 12, 31)
            adj = True
        if isinstance(date, dt.datetime):
            epoch = dt.datetime(*epoch_tuple)
        else:
            epoch = dt.date(*epoch_tuple)
    else: # it's a datetime.time instance
        epoch = dt.datetime(1900, 1, 1)            
        date = dt.datetime.combine(epoch, date)
    delta = date - epoch
    xldate = delta.days + delta.seconds / 86400.0
    # Add a day for Excel's missing leap day in 1900
    if adj and xldate > 59:
        xldate += 1
    return xldate 
```

**警告**试图通过在 Excel 中打开文件来将文件转换为 1900 系统，取消勾选 1904 配置项并保存文件不起作用**-**日期将超出 4 年。

*似乎正常工作的是：*

*   在 Excel 中打开文件，将其另存为`XML Spreadsheet 2003 (*.xml)`... 这种格式以文本格式记录日期，例如 `1999-12-31T23:59:59.999`

*   在文本编辑器中打开 XML 文件，找到这样的行
    `<Date1904/>`...

*   在 Excel 中打开更改后的 XML 文件，
    应保留所有数据和格式，唯一的区别应该
    是不再勾选讨厌的 1904 框。然后您可以将其保存为 XLS 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:56:09.803

我在 Excel 工作簿中体验过这一点，甚至没有使用 Python。当同一个文件在 Windows 和 Mac 之间传递时，日期可能会发生奇怪的事情*（*尽管这不是典型的）。Excel for Windows 默认使用所谓的“1900”日期系统，而 Excel for Mac 默认使用“1904”日期系统。（这些是各个系统的起始年份。）

尽管 xlrd 文档和源代码强烈建议您坚持使用`datemode`工作簿中编码的值（就像您所做的那样），但我认为值得尝试明确地给出“其他”模式以`xldate_as_tuple`查看它是否可以解决您的问题：

```
year, month, day, hour, minute, second = xlrd.xldate_as_tuple(date,
    1 - book.datemode) 
```

`datemode`将`0`适用于 1900 模式，`1`适用于 1904 模式；`1 - datemode`翻转这个。

顺便说一句，只要在括号表达式中的逗号后换行，就可以不使用反斜杠换行。

# c# - 如何使用 SoapExtension 显示来自 asmx Web 服务的原始 SOAP 消息

> ID：10036299
> 
> 赞同：0
> 
> 时间：2012-04-05T21:29:34.907
> 
> 标签：c#, asp.net, .net, soap, asmx

我正在尝试制作一个简单的测试程序来显示在 aspx 页面和它使用的 asmx 服务之间发送的肥皂消息。我试过做 SoapExtension 类并修改我的 web.config，但似乎没有任何效果。这就是我所拥有的：

网页配置：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>

  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <webServices>
      <soapExtensionTypes>
        <add type="TraceExtension.TraceExtension, TraceExtension"
           priority="1" group="High" />
      </soapExtensionTypes>
    </webServices>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <bindings />
    <client />
  </system.serviceModel>
</configuration> 
```

从服务调用 HelloWorld 函数并将返回的字符串放入标签的简单调用页面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.IO;

namespace CS606_SOAP
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            WebService1 svc = new WebService1();
            Label1.Text = svc.HelloWorld();
        }
    }
} 
```

这是asmx：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;

namespace CS606_SOAP
{
    /// <summary>
    /// Summary description for WebService1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class WebService1 : System.Web.Services.WebService
    {
        [TraceExtension.TraceExtension]
        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }
    }

} 
```

我还在这里引用了类的 .dll 文件：

```
using System;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.IO;
using System.Net;

// Define a SOAP Extension that traces the SOAP request and SOAP
// response for the XML Web service method the SOAP extension is
// applied to.
namespace TraceExtension
{
    public class TraceExtension : SoapExtension
    {
        Stream oldStream;
        Stream newStream;
        string filename;

        // Save the Stream representing the SOAP request or SOAP response into
        // a local memory buffer.
        public override Stream ChainStream(Stream stream)
        {
            oldStream = stream;
            newStream = new MemoryStream();
            return newStream;
        }

        // When the SOAP extension is accessed for the first time, the XML Web
        // service method it is applied to is accessed to store the file
        // name passed in, using the corresponding SoapExtensionAttribute.  
        public override object GetInitializer(LogicalMethodInfo methodInfo, SoapExtensionAttribute attribute)
        {
            return ((TraceExtensionAttribute)attribute).Filename;
        }

        // The SOAP extension was configured to run using a configuration file
        // instead of an attribute applied to a specific XML Web service
        // method.
        public override object GetInitializer(Type WebServiceType)
        {
            // Return a file name to log the trace information to, based on the
            // type.
            return "C:\\" + WebServiceType.FullName + ".log";
        }

        // Receive the file name stored by GetInitializer and store it in a
        // member variable for this specific instance.
        public override void Initialize(object initializer)
        {
            filename = (string)initializer;
        }

        //  If the SoapMessageStage is such that the SoapRequest or
        //  SoapResponse is still in the SOAP format to be sent or received,
        //  save it out to a file.
        public override void ProcessMessage(SoapMessage message)
        {
            switch (message.Stage)
            {
                case SoapMessageStage.BeforeSerialize:
                    break;
                case SoapMessageStage.AfterSerialize:
                    WriteOutput(message);
                    break;
                case SoapMessageStage.BeforeDeserialize:
                    WriteInput(message);
                    break;
                case SoapMessageStage.AfterDeserialize:
                    break;
            }
        }

        public void WriteOutput(SoapMessage message)
        {
            newStream.Position = 0;
            FileStream fs = new FileStream(filename, FileMode.Append,
                FileAccess.Write);
            StreamWriter w = new StreamWriter(fs);

            string soapString = (message is SoapServerMessage) ? "SoapResponse" : "SoapRequest";
            w.WriteLine("-----" + soapString + " at " + DateTime.Now);
            w.Flush();
            Copy(newStream, fs);
            w.Close();
            newStream.Position = 0;
            Copy(newStream, oldStream);
        }

        public void WriteInput(SoapMessage message)
        {
            Copy(oldStream, newStream);
            FileStream fs = new FileStream(filename, FileMode.Append,
                FileAccess.Write);
            StreamWriter w = new StreamWriter(fs);

            string soapString = (message is SoapServerMessage) ?
                "SoapRequest" : "SoapResponse";
            w.WriteLine("-----" + soapString +
                " at " + DateTime.Now);
            w.Flush();
            newStream.Position = 0;
            Copy(newStream, fs);
            w.Close();
            newStream.Position = 0;
        }

        void Copy(Stream from, Stream to)
        {
            TextReader reader = new StreamReader(from);
            TextWriter writer = new StreamWriter(to);
            writer.WriteLine(reader.ReadToEnd());
            writer.Flush();
        }
    }

    // Create a SoapExtensionAttribute for the SOAP Extension that can be
    // applied to an XML Web service method.
    [AttributeUsage(AttributeTargets.Method)]
    public class TraceExtensionAttribute : SoapExtensionAttribute
    {

        private string filename = "log.txt";
        private int priority;

        public override Type ExtensionType
        {
            get { return typeof(TraceExtension); }
        }

        public override int Priority
        {
            get { return priority; }
            set { priority = value; }
        }

        public string Filename
        {
            get
            {
                return filename;
            }
            set
            {
                filename = value;
            }
        }
    }
} 
```

它运行良好，但实际上没有任何内容写入 log.txt 文件。有人知道这里有什么问题吗？顺便说一句，使用 .Net 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:37:07.457

为什么不使用[Wireshark](http://www.wireshark.org/)或[SoapUI 之](http://www.soapui.org/)类的东西？它将为您节省大量编码。

# database - 使用数据库函数的sql查询

> ID：10036301
> 
> 赞同：0
> 
> 时间：2012-04-05T21:29:46.340
> 
> 标签：database, postgresql, gps, plpgsql

我有通过坐标计算距离的数据库函数

```
CREATE OR REPLACE FUNCTION distance(lat1 FLOAT, lon1 FLOAT, lat2 FLOAT, lon2 FLOAT) RETURNS FLOAT AS $$
DECLARE                                                   
    x float = 69.1 * (lat2 - lat1);                           
    y float = 69.1 * (lon2 - lon1) * cos(lat1 / 57.3);        
BEGIN                                                     
    RETURN sqrt(x * x + y * y);                               
END  
$$ LANGUAGE plpgsql; 
```

现在我有 2 个表（有一对一的关系），一个叫做

**有列的人**--> Personid, name, lastname

和一个

**带有列的位置**--> Personid、纬度、经度。

现在我尝试使用 distnace 函数让距离小于 5 的人

我从以下查询开始首先获取 id

```
select loc.id,loc.latitude,loc.longitude from location loc
where distance(123,456,loc.latitude,loc.longitude)<0.5 
```

但不知道如何从上述查询中获取具有 id 的所有人。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:33:01.543

这是你要找的吗？

```
select p.*, loc.id,loc.latitude,loc.longitude 
from location loc inner join person p on (p.Personid=loc.Personid)
where distance(123,456,loc.latitude,loc.longitude)<0.5 
```

# ios - 当父 UIViewController 设置为 RootViewController 时，UIView 不会成为第一响应者

> ID：10036310
> 
> 赞同：2
> 
> 时间：2012-04-05T21:30:17.533
> 
> 标签：ios, ios5, uiview, uiviewcontroller, first-responder

我正在编写 BNR 的 iOS 编程书的第 7 章，但遇到了问题。在本章的开头，我设置了一个 UIViewController (HypnosisViewController) 和一个 UIView (HypnosisView)，它响应上一章中的运动事件。

我在 AppDelegate.m 文件中创建 UIViewController：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...
    HypnosisViewController *hvc = [[HypnosisViewController alloc] init];
    [[self window] setRootViewController:hvc];
    ...
} 
```

在 HypnosisViewController 中，我将 HypnosisView 设置为第一响应者：

```
- (void)loadView
{
    // Create a view
    CGRect frame = [[UIScreen mainScreen] bounds];
    HypnosisView *view = [[HypnosisView alloc] initWithFrame:frame];
    [self setView:view];

    [view becomeFirstResponder];
} 
```

在 HypnosisView 中，我确保向 canBecomeFirstResponder 返回 YES。不幸的是，HypnosisView 没有像以前那样响应运动事件。当我最终继续前进时，我有了一个有趣的发现。如果我将 HypnosisViewController 移动到 UITabBarController 中，HypnosisView 开始响应运动事件。代码看起来像这样：

```
HypnosisViewController *hvc = [[HypnosisViewController alloc] init];

UITabBarController *tabBarController = [[UITabBarController alloc] init];

NSArray *viewControllers = [NSArray arrayWithObjects:hvc, <insert more objs here>, nil];
[tabBarController setViewControllers:viewControllers];
[[self window] setRootViewController:tabBarController]; 
```

为什么 HypnosisViewController 设置为 RootViewController 时 HypnosisView 没有成为第一响应者？为什么将 HypnosisViewController 放在另一个控制器中后它就开始工作了？我对 RootViewController 缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T17:56:28.980

你的问题非常贴切。我也在学习同一本书，并且在同一章。问题是在我们使用 UITabBarController 之前，我们要么使用 HypnosisViewController 要么使用 TimeViewController。然后我们将在 AppDelegate.m 文件中执行 [self.window setRootViewController:hvc] 或 [self.window setRootViewController:tvc]。在这种情况下，setRootViewController 方法在内部调用 loadView 方法。因此，如果应该调用 loadView ，那么 becomeFirstResponder （根据您的代码作为方法调用驻留在其中）也应该被触发。所以在内部应该调用 canBecomeFirstResponder 现在当我们使用 UITabBarController 时，事情往往会中断。发生的事情不是通过 '[[self window] setRootViewController:tabBarController];' 调用 loadView 代码行，它通过'调用 [tabBarController setViewControllers:viewControllers];'。所以底线是 rootViewController 属性（当设置为 tabBarController 时）不会调用 loadView 方法，因此不会调用“becomeFirstResponder”。您可能会争辩说 loadView 确实是通过 '[tabBarController setViewControllers:viewControllers];' 调用的 但 setViewControllers 不用于设置根视图控制器。当我遇到这个问题时，我明确地调用了 becomeFirstResponder。就是这样：- 但 setViewControllers 不用于设置根视图控制器。当我遇到这个问题时，我明确地调用了 becomeFirstResponder。就是这样：- 但 setViewControllers 不用于设置根视图控制器。当我遇到这个问题时，我明确地调用了 becomeFirstResponder。就是这样：-

```
@implementation HypnoTimeAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions //method of UIApplicationDelegate protocol  
{
    NSLog(@"lets begin");
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    HypnosisViewController *viewController= [[HypnosisViewController alloc] init];

    TimeViewController *viewController2= [[TimeViewController alloc] init];

    NSLog(@"view controllers are done initializing!");

    UITabBarController *tabBarController= [[UITabBarController alloc] init];
    NSArray *viewControllers= [NSArray arrayWithObjects:viewController,viewController2, nil];

    [tabBarController setViewControllers:viewControllers];//loadView of HypnosisViewController gets called internally since the 'app view' isn't going to load from a XIB file but from 'HypnosisView.m'.loadView method of TimeViewController loads its own view from the XIB file.

    [self.window setRootViewController:tabBarController];

    self.window.backgroundColor = [UIColor whiteColor];

    [self.window makeKeyAndVisible];

    return YES;
}

@implementation HypnosisViewController

 -(void)loadView{

    NSLog(@"HypnosisView loading...");
    HypnosisView *myView= [[HypnosisView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.view= myView;
    [self configureFirstResponder];//configuring first responder
}

-(void) configureFirstResponder{
        BOOL viewDidBecomeFirstResponder= [self.view becomeFirstResponder];
        NSLog(@"Is First Responder set as HypnosisView? %i",viewDidBecomeFirstResponder);

    } 
```

# sql - SQL查询以计算多列中的条目

> ID：10036311
> 
> 赞同：2
> 
> 时间：2012-04-05T21:30:18.727
> 
> 标签：sql, sql-server, tsql

我有一个包含两个表 tblPlayers 和 tblMatches 的数据库。

tblPlayers 包含以下字段：playerID、playerName。

tblMatches 包含 matchID、scorer1ID、scorer2ID、scorer3ID。

我需要运行一个查询来计算球员的总进球数，并将其与他们的 playerID 一起返回。

我尝试了以下方法：

```
SELECT
tblPlayers.playerID, tblPlayers.playerName, count(*) AS goals
FROM
tblPlayers, matches
WHERE
(tblPlayers.playerID = tblMatches.scorer1ID
OR
tblPlayers.playerID = tblMatches.scorer2ID
OR
tblPlayers.playerID = tblMatches.goalscorer3ID)
GROUP BY tblPlayers.playerID
ORDER BY goals DESC 
```

但是，这并不能按要求工作，因为 count 函数不允许球员在一场比赛中得分超过一个球（例如，如果球员进了三个球，他的 ID 将出现在 scorer1ID 字段， scorer2ID字段和 scorer3ID 字段，但计数只返回值 1，当它需要为 3 时）。

希望这是有道理的，过去几天我一直在努力解决这个问题！非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:41:07.560

```
SELECT
    playerID,
    playerName,
    SUM(goals) AS goals
FROM 
(
    SELECT p.playerID, p.playerName, COUNT(*) AS goals
    FROM 
        tblPlayers p
        JOIN tblMatches m ON m.scorer1ID = p.playerID
    GROUP BY p.playerID, p.playerName

    UNION ALL

    SELECT p.playerID, p.playerName, COUNT(*) AS goals
    FROM 
        tblPlayers p
        JOIN tblMatches m ON m.scorer2ID = p.playerID
    GROUP BY p.playerID, p.playerName

    UNION ALL

    SELECT p.playerID, p.playerName, COUNT(*) AS goals
    FROM 
        tblPlayers p
        JOIN tblMatches m ON m.scorer3ID = p.playerID
    GROUP BY p.playerID, p.playerName
) sub
GROUP BY playerID, playerName 
```

或者，这是一个一次性完成的查询：

```
SELECT 
    p.playerID, 
    p.playerName, 
    SUM (
        CASE WHEN p.playerID = m.scorer1ID THEN 1 ELSE 0 END +
        CASE WHEN p.playerID = m.scorer2ID THEN 1 ELSE 0 END +
        CASE WHEN p.playerID = m.scorer3ID THEN 1 ELSE 0 END
    ) AS goals
FROM 
    tblPlayers p
    JOIN tblMatches m ON p.playerID IN (m.scorer1ID, m.scorer2ID, m.scorer3ID)
GROUP BY p.playerID, p.playerName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:42:22.413

这是一个糟糕的表格设计，但如果你坚持使用它，那么应该执行以下操作：

```
SELECT
tblPlayers.playerID, tblPlayers.playerName,  
(select count(*) from tblMatches m where p.playerId = m.Scoreer1Id)
+
(select count(*) from tblMatches m where p.playerId = m.Scoreer2Id)
+
(select count(*) from tblMatches m where p.playerId = m.Scoreer3Id)
from tblPlayers p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:44:55.647

试试这个。它使用嵌入式选择语句来计算玩家在每列中出现的次数

```
SELECT tblPlayers.playerID, tblPlayers.playerName, ((SELECT COUNT(*) FROM tblPlayers, matches WHERE tblPlayers.playerID = tblMatches.scorer1ID) + (SELECT COUNT(*) FROM tblPlayers, matches WHERE tblPlayers.playerID = tblMatches.scorer2ID) + (SELECT COUNT(*) FROM tblPlayers, matches WHERE tblPlayers.playerID = tblMatches.scorer2ID)) As [GoalsScored] 
FROM tblPlayers
WHERE
(tblPlayers.playerID = tblMatches.scorer1ID
OR
tblPlayers.playerID = tblMatches.scorer2ID
OR
tblPlayers.playerID = tblMatches.goalscorer3ID)
GROUP BY tblPlayers.playerID
ORDER BY goals DESC 
```

# c++ - 如何用函数改变数组？

> ID：10036313
> 
> 赞同：3
> 
> 时间：2012-04-05T21:30:35.763
> 
> 标签：c++

我对 C++ 很陌生，我遇到了一个问题。
我正在尝试编写二十一点游戏。我有一个大小为 52 的 'char' 类型的数组，里面有不同的卡片，我想洗牌。我不确定如何，但这不是问题。我做了一个名为“ShuffleDeck”的函数，但它不起作用，说它不能返回一个数组。我也无法引用数组。我该怎么办？这是我正在谈论的代码部分。

```
void ShuffleDeck(bool &rgCards[]) {
    for (int i = 1; i < 52; ++i) {
        //something
    }
    return rgCards[];
} 
```

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:33:31.157

您使用 a`std::vector`并随机播放其中的值。最好通过引用函数来传递它并处理原始向量。

从您的代码段中，您期望它做什么并不完全清楚 - 您通过`bool`引用传递一个数组，但将其作为一个返回，`int`其语法`rgCards[]`在该上下文中绝对没有意义。

编辑：根据 Fred 的评论 - 您可以使用[`random_shuffle`](http://www.cplusplus.com/reference/algorithm/random_shuffle/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:41:55.860

从您提供的代码片段看来，您正在尝试将数组的引用传递给`ShuffleDeck()`. 数组引用的 C++ 语法是数组`data-type (&)[N]`中`N`元素的数量。将您的功能更改为

```
void ShuffleDeck( char (&rgCards)[52] ) { ... } 
```

您可以将其设为模板函数并让编译器推断出数组长度

```
template<size_t N>
void ShuffleDeck( char (&rgCards)[N] ) { ... } 
```

最后，由于您使用的是 C++，您可能应该切换到使用容器类，例如`std::array`或`std::vector`代替 C 样式的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T22:29:42.387

你也可以这样做

```
void shuffle(int* deck, int size)
{
  for(int i =0; i < size; i++)
  {
    deck[i] = i;
  }
} 
```

这表明该数组确实是作为指针传递的。

```
int deck[52];
shuffle(deck,52); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T21:53:02.317

为了使代码与您编写的代码最相似，我将进行最少的更正：请注意，这`&`不是必需的，索引应从 0 开始。

```
void ShuffleDeck(bool rgCards[]) {
    for (int i = 0; i < 52; ++i) {
        //something
    }
} 
```

您对 rgCards[i] 所做的任何更改都将在调用 ShuffleDeck 后可用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T07:13:46.820

最干净的解决方案，IMO：

```
class Deck {
  char cards[52];
public:
  void Shuffle();
};

void Deck::Shuffle()
{
  // I can change cards here because both cards and Shuffle are members of Deck
} 
```

# c# - 绑定只能在 DependencyObject 的 DependencyProperty 上设置 - 当属性被 new 覆盖时

> ID：10036320
> 
> 赞同：6
> 
> 时间：2012-04-05T21:31:15.090
> 
> 标签：c#, wpf, xaml

我有一个如下的类层次结构，并且绑定到 VisibleRange 属性正在设计器中。

给定这里的类层次结构：

```
// Base class
public abstract class AxisBase : ContentControl, IAxis
{
    public static readonly DependencyProperty VisibleRangeProperty = DependencyProperty.Register(
        "VisibleRange", typeof(IRange), typeof(AxisBase), 
         new PropertyMetadata(default(IRange), OnVisibleRangeChanged));

    public IRange VisibleRange
    {
        get { return (IRange)GetValue(VisibleRangeProperty); }
        set { SetValue(VisibleRangeProperty, value); }
    }
}

// Derived class
public class DateTimeAxis : AxisBase
{
        public new IRange<DateTime> VisibleRange
        {
            get { return (IRange<DateTime>)GetValue(VisibleRangeProperty); }
            set { SetValue(VisibleRangeProperty, value); }
        }
}

// And interface definitions
public interface IRange<T> : IRange 
{
} 
```

设计师（XAML）在这里：

```
<local:DateTimeAxis Style="{StaticResource XAxisStyle}"                                               
       VisibleRange="{Binding ElementName=priceChart, 
                      Path=XAxis.VisibleRange, Mode=TwoWay}"/> 
```

我得到这个例外：

> 不能在“DateTimeAxis”类型的“VisibleRange”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

派生类`DateTimeAxis`公开了被`new`关键字覆盖的 VisibleRange 属性。我无法将泛型类型参数添加到基`AxisBase`类，而且我还需要访问这两个类中的属性。所以，我想知道考虑到这些限制，是否有人对如何更好地避免设计器异常有任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T21:36:30.823

“依赖属性”是您注册的东西：

```
 public static readonly DependencyProperty VisibleRangeProperty = 
    DependencyProperty.Register("VisibleRange", typeof(IRange), typeof(AxisBase), ...); 
```

当您查看该声明时，您可以看到它正在注册`typeof(IRange)`

> 派生类 DateTimeAxis 公开了被 new 关键字覆盖的 VisibleRange 属性。

是的，但它暴露的是“正常”属性，而不是依赖属性。
另一个因素是属性具有不同的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:36:52.387

*Try* to write in your code initialization of your `XAxis`, like

`AxisBase XAxis = new DateTimeAxis ()`

*Should* work.

# c++ - 在 c/c++ 中为有限差分法创建五对角稀疏矩阵的最佳方法是什么？

> ID：10036323
> 
> 赞同：4
> 
> 时间：2012-04-05T21:31:27.693
> 
> 标签：c++, c, sparse-matrix

在 MATLAB 中，使用如下命令创建五对角稀疏矩阵非常方便：

```
I = eye(m);  % create identity matrix
e = ones(m,1); % create an array of all 1's
T = spdiags([e -4*e e],[-1 0 1],m,m); 
S = spdiags([e e],[-1 1],m,m);
A = (kron(I,T) + kron(S,I))/hˆ2; 
```

我想知道在 c/c++ 中是否有任何巧妙的技巧可以做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:41:07.090

C++ 中没有稀疏矩阵类型。但是网络上有很多开源代数库（或者您可以编写自己的）。

Boost [uBLAS](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)支持稀疏矩阵，如果您只想“实验”有限差分，它可能是最佳选择。如果你需要更高级的求解器，你应该看看[GSL](http://www.gnu.org/software/gsl/)，或者考虑[LAPACK](http://www.netlib.org/lapack/)的 C 版本。

至于您最初的问题，据我所知，这些库都没有实现`kron`功能，因为它只是一个“方便”的例程。

# java - 具有非必需变量的构造函数

> ID：10036324
> 
> 赞同：2
> 
> 时间：2012-04-05T21:31:33.523
> 
> 标签：java, android

我想知道是否有可能，如果可以，如何创建一个构造函数，该构造函数接受三个变量，但如果最后两个未通过，则不会出现错误？

就像是：

```
public void onCreate(Bundle savedInstanceState, String s1<non essential>) 
    { 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T21:33:56.323

创建更多构造函数

```
public MyCreate(Bundle savedInstanceState) 
    {

public MyCreate(Bundle savedInstanceState, String s1) 
    {

public MyCreate(Bundle savedInstanceState, String s1, String s2) 
    { 
```

尝试阅读[这篇](http://leepoint.net/JavaBasics/oop/oop-45-constructor-overloading.html)关于构造函数重载的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:39:46.890

你有多种方法可以做到这一点。仅举几例：

*   **您可以拥有多个具有不同签名的构造函数**（如
    dash1e 所建议的）
*   **您可以拥有所需变量类型的列表**（或
    对象，以防您希望它完全通用），并拥有一个
    构造函数，该构造函数获取列表并在存在时使用其值。
*   **您可以有一个自定义数据模型类来封装
    您要处理的三种类型的值并在构造函数中使用它，**这样
    当
    您的类的构造函数获取它的值时，它们对于您的参数是可选的想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T01:28:06.850

我真的很喜欢[dash1e的回答](https://stackoverflow.com/a/10036352/348975)。 [Luis Miguel Serrano](https://stackoverflow.com/a/10036416/348975)有一些很好的补充建议。

此外——如果合适的话——你可以使用可变参数

```
public MyCreate(Bundle savedInstanceState, String ... args) 
```

具有相同的效果

```
public MyCreate(Bundle savedInstanceState, String [ ] args ) 
```

它与使用 List 的 Luis Miguel Serrano 非常相似，但您不必费心去创建 List。

# php - 在 MySQL 查询中使用 substr()

> ID：10036329
> 
> 赞同：-2
> 
> 时间：2012-04-05T21:31:52.560
> 
> 标签：php, string, function

我在查询中使用此函数`substr(tbarticles.articlebody,1,200) as description1`，但对于某些文章，我看到表格布局发生了变化，页面布局也发生了变化。似乎它也计算 html 字符。请让我知道我该如何解决？

我也使用过`mb_substr` ，但它没有返回任何`description1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:41:46.690

正如@Rocket 所说，您将需要使用 php，这是一个取自[类似问题](https://stackoverflow.com/questions/2398725/using-php-substr-and-strip-tags-while-retaining-formatting-and-without-break)的函数：-

```
function html_cut($text, $max_length)
{
$tags   = array();
$result = "";

$is_open   = false;
$grab_open = false;
$is_close  = false;
$in_double_quotes = false;
$in_single_quotes = false;
$tag = "";

$i = 0;
$stripped = 0;

$stripped_text = strip_tags($text);

while ($i < strlen($text) && $stripped < strlen($stripped_text) && $stripped < $max_length)
{
    $symbol  = $text{$i};
    $result .= $symbol;

    switch ($symbol)
    {
       case '<':
            $is_open   = true;
            $grab_open = true;
            break;

       case '"':
           if ($in_double_quotes)
               $in_double_quotes = false;
           else
               $in_double_quotes = true;

        break;

        case "'":
          if ($in_single_quotes)
              $in_single_quotes = false;
          else
              $in_single_quotes = true;

        break;

        case '/':
            if ($is_open && !$in_double_quotes && !$in_single_quotes)
            {
                $is_close  = true;
                $is_open   = false;
                $grab_open = false;
            }

            break;

        case ' ':
            if ($is_open)
                $grab_open = false;
            else
                $stripped++;

            break;

        case '>':
            if ($is_open)
            {
                $is_open   = false;
                $grab_open = false;
                array_push($tags, $tag);
                $tag = "";
            }
            else if ($is_close)
            {
                $is_close = false;
                array_pop($tags);
                $tag = "";
            }

            break;

        default:
            if ($grab_open || $is_close)
                $tag .= $symbol;

            if (!$is_open && !$is_close)
                $stripped++;
    }

    $i++;
}

while ($tags)
    $result .= "</".array_pop($tags).">";

return $result;
} 
```

**编辑：**我怀疑您的页面布局发生变化的原因是因为 substr 正在破坏您的 html。你需要做的是返回所有，`tbarticles.articlebody`一旦你把它放在 php 中的一个变量中（例如`$result['articlebody']`），然后使用下面的函数将它修剪到正确的长度。

所以像： -

```
 # Get entire field from database, don't use substr
 $result = mysql_query("SELECT tbarticles.articlebody as description1 FROM your_table");
 $row = mysql_fetch_array( $result );

 # Now make the description the correct length using the function above
 $short_description = html_cut($row['description1'], 200); 
```

希望这可以帮助。

# c# - 如何从控制台应用程序在 ASP.NET MVC 应用程序中进行身份验证

> ID：10036330
> 
> 赞同：4
> 
> 时间：2012-04-05T21:31:56.637
> 
> 标签：c#, asp.net-mvc-3, authentication, webclient, networkcredentials

我有一个控制台应用程序，它将 XML 发送到 MVC 应用程序并接收另一个 XML 作为响应。它工作得很好，但我想添加授权（出于显而易见的原因）。

这是来自控制台应用程序的代码：

```
using (var wc = new WebClient())
{
    return GetXmlFromBytes(
        wc.UploadData("URL", GetBytesFromXml(xmlToSend))
    );
} 
```

这是 MVC 应用程序的代码：

```
public ActionResult DoSomething()
{
    XElement xml = XElement.Load(new System.IO.StreamReader(Request.InputStream));
    var response = InsertDataFromXml(xml);
    return File(GenerateFileFromResponse, "text/xml", "result.xml");
} 
```

它有效。因此，为了实现授权，我添加了以下代码：

控制台（添加了`wc.Credentials`）：

```
using (var wc = new WebClient())
{
    wc.Credentials = new NetworkCredential("user", "password");
    return GetXmlFromBytes(
        wc.UploadData("URL", GetBytesFromXml(xmlToSend))
    );
} 
```

MVC 应用程序（添加了`[Authorize]`）：

```
[Authorize]
public ActionResult DoSomething()
{
    XElement xml = XElement.Load(new System.IO.StreamReader(Request.InputStream));
    var response = InsertDataFromXml(xml);
    return File(GenerateFileFromResponse, "text/xml", "result.xml");
} 
```

它不起作用。我不知道是否需要此信息来解决此问题，但我`web.config`有以下项目：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

事实上，MVC 应用程序发回的文件就是 LogOn 页面的 HTML！

我该怎么做才能解决这个问题？中是否缺少任何参数`NetworkCredentials`？我知道它可以用 实例化`domain`，但我不知道 MVC 应用程序中用户的域是什么。

而且，只是为了确保：我保证“用户”和“密码”是有效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:40:41.397

您正在混合凭据类型；

```
wc.Credentials = new NetworkCredential("user", "password"); 
```

用于 HTTP 身份验证。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

是表单认证。

这些是完全不同的，并且不兼容。从命令行应用程序使用表单身份验证具有挑战性，您需要使用请求进入登录页面，发布用户名和密码，然后获取返回的身份验证 cookie 并将其附加到后续请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:38:55.100

在使用表单身份验证时，您首先需要进行身份验证。

1.  调用登录 Web 方法并从 Http 响应中捕获 Auth Cookie
2.  将第二个 Http 请求上的 Auth Cookie 设置为 DoSomething 方法

或者，如果您在本地 Intranet 上，请设置 Authentication Mode="Windows"！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:47:21.483

创建一个[AuthenticationService](http://msdn.microsoft.com/en-us/library/system.web.applicationservices.authenticationservice.aspx)可用于进行表单身份验证。使用[ClientBaseExtensions](https://mytoolkit.svn.codeplex.com/svn/Shared/Networking/ClientBaseExtensions.cs)类，您可以从 WCF 服务客户端获取 cookie。将此 cookie 注入到另一个调用中...

```
String cookies = null;
var auth = new AuthenticationServiceClient();
using (new OperationContextScope(auth.InnerChannel))
{
    auth.Login("user", "password", null, true);
    cookies = auth.GetIncomingCookies();
} 
```

现在将 cookie 数据注入您的数据服务或 HTTP 调用。

请参阅[http://mytoolkit.codeplex.com/wikipage?title=ClientBaseExtensions](http://mytoolkit.codeplex.com/wikipage?title=ClientBaseExtensions)

# visual-studio - Visual Studio 2010：关闭所有未选择的内容

> ID：10036337
> 
> 赞同：3
> 
> 时间：2012-04-05T21:32:45.713
> 
> 标签：visual-studio, visual-studio-2010

当我打开一堆选项卡时，“关闭除此之外的所有选项卡”选项非常有用。有时我想保持 2 或 3 个窗口打开。有没有办法多选我想要的标签并“关闭所有未选择的标签”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T21:35:55.343

从文件、编辑、查看菜单：窗口 > Windows… ![在此处输入图像描述](../Images/43d09a0352c386cf86419dc7dea54c5a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T21:41:15.213

我使用[Productivity Power Tools 扩展](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)，它允许您在编辑器框架上“固定”页面，以及其他很棒的功能。

> •固定标签
> 
> 允许您固定标签以使其始终可见和可用。

然后是“关闭所有但固定”的选项

那应该完全符合您的目标。

# android - Android NFC 双向

> ID：10036342
> 
> 赞同：2
> 
> 时间：2012-04-05T21:32:59.943
> 
> 标签：android, nfc, android-beam

使用ICS 4.0.1（愿意升级到4.0.3）（不会root和重写android OS）

无论如何，在收到 android 光束后将 NDEF 消息发送回 android 手机

电话 A 横梁：“你好电话 B”
电话 B 回复：“你好电话 A”

我可以让 A 向 B 发送信号，但我如何让 B 向 A 发送信号？（我不想将设备移开并再次触摸它们）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T00:47:08.317

目前这是不可能的。将设备放在一起并且一个设备发送数据的那一刻，另一台设备将接收它，然后失去发送 UI 的触摸。目前，使用 UI 是传递信息的唯一方法。你不能真正以编程方式做到这一点。如果两个用户同时点击触摸发送数据，您可以同时发送数据，但发送给彼此的数据不一定相互依赖。

# ios - 当 CoreData 中实体的任何属性发生变化时，如何更新属性？

> ID：10036345
> 
> 赞同：1
> 
> 时间：2012-04-05T21:33:21.520
> 
> 标签：ios, core-data, sync

我有几个要与远程服务器同步的实体。我想在其任何属性更改时将 NSManagedObject 实例标记为脏。我怎样才能在不引起递归的情况下实现这一点。我尝试在 validateForUpdate 和 NSManagedObjectContextObjectsDidChangeNotification 通知中执行此操作。但两者都会导致递归。

# ruby-on-rails - 帮助您编码/调试的最佳实用 Rails gem

> ID：10036354
> 
> 赞同：2
> 
> 时间：2012-04-05T21:34:12.417
> 
> 标签：ruby-on-rails, ruby, debugging, gem

在 Rails 中编码时，您使用哪些**gem来帮助您提高工作****效率**或更轻松地进行**调试？**

有些 gem 是特定于任务的，当您需要实现该功能时，您可以轻松找到它们。带着这个问题，我正在寻找所有其他的，你可能不会想去搜索，但是一旦你听说过它，你就会在每个新项目上安装它。

请为每个回复保留一颗宝石，以帮助投票解决它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:40:13.067

对我来说，最有用的 Rails 调试工具之一是[pry](https://github.com/pry/pry)。这有点像功能更丰富的 IRB 控制台（我们可以访问所有模型等）和调试器——我们可以设置断点，观察变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:37:32.870

[**rails-footnotes**](http://github.com/josevalim/rails-footnotes)：在应用程序中显示脚注以便于调试，例如会话、请求参数、cookie、过滤器链、路由、查询等。
更重要的是，它包含直接在编辑器中打开文件的链接，包括回溯行。

[http://github.com/josevalim/rails-footnotes](http://github.com/josevalim/rails-footnotes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:39:45.737

**[awesome_print](http://github.com/michaeldv/awesome_print)**：在控制台中，漂亮地打印 Ruby 对象的全彩色，并以适当的缩进显示其内部结构。

[http://github.com/michaeldv/awesome_print](http://github.com/michaeldv/awesome_print)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T21:52:20.070

**[mailcatcher](http://mailcatcher.me/)**：捕获发送的电子邮件消息并将其显示在 Web 界面中。

> 运行 mailcatcher，将您最喜欢的应用程序设置为发送到 smtp://127.0.0.1:1025 而不是默认的 SMTP 服务器，然后查看[http://127.0.0.1:1080](http://127.0.0.1:1080)以查看到目前为止已到达的邮件。

无需污染您的收件箱并等待每封邮件在到达您之前绕过 smtp 服务器。在没有互联网连接的情况下进行编码时必须具备。

[http://mailcatcher.me/](http://mailcatcher.me/)

# dart - Dart 编辑器的主题

> ID：10036358
> 
> 赞同：2
> 
> 时间：2012-04-05T21:34:43.020
> 
> 标签：dart, dart-editor

现在，白色的背景刺痛了我的眼睛，因为这是一个*漫长*的黑夜。是否可以从 Dart 编辑器 (v 0.1) 更改主题（更暗）？选择背景颜色和语法高亮怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T03:53:19.787

是的，这是可能的，我刚刚在 Dart 编辑器上验证了这个快速修复，以获得较暗的背景`Version 0.1.0.201204042313`：

1.  关闭飞镖编辑器
2.  使用您喜欢的编辑器打开文件：`<DART-INSTALL-DIR>\workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.ui.editors.prefs`
3.  更改内容

*从：*

```
 #Fri Apr 06 20:28:37 EST 2012
 eclipse.preferences.version=1
 overviewRuler_migration=migrated_3.1 
```

*到：*

```
#Fri Apr 06 20:28:38 EST 2012
AbstractTextEditor.Color.Background.SystemDefault=false
AbstractTextEditor.Color.Background=208,208,223
eclipse.preferences.version=1
overviewRuler_migration=migrated_3.1 
```

启动 Dart 编辑器，背景应如下所示：![在此处输入图像描述](../Images/4f144a83b779ec874bc600e7fd4afec4.png)

您可以创建一个“完整主题”，只需向`org.eclipse.ui.editors.prefs`和`org.eclipse.jdt.ui.prefs`文件添加更多属性。

[我强烈建议您查看项目http://www.eclipsecolorthemes.org/](http://www.eclipsecolorthemes.org/)的“Eclipse Preferences (EPF)”示例文件

我还没有尝试过，但理论上你可以手动安装插件[Eclipse Color Theme](http://marketplace.eclipse.org/content/eclipse-color-theme)。

* * *

**2012 年 12 月 6 日更新**

新的`Dart Editor Build 0.2.7.1_r15699` [支持](http://news.dartlang.org/2012/12/new-dart-editor-build-0271r15699.html)编辑器和面板的主题。不再需要这个“技巧”，请使用自定义主题`Preferences --> Visual Theme` ![在此处输入图像描述](../Images/5371ce1d5837ab21b9c588046c509062.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T17:47:48.327

Hannes Rammer 为此构建了一个开源工具

*   [https://github.com/HannesRammer/Rainbow](https://github.com/HannesRammer/Rainbow) (GitHub)
*   [http://pub.dartlang.org/packages/rainbow](http://pub.dartlang.org/packages/rainbow)

也可在 [https://rainbow-dart.appspot.com/在线获取](https://rainbow-dart.appspot.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:03:10.407

我不相信这是可能的。它已作为问题提交：[http ://code.google.com/p/dart/issues/detail?id=293&q=themes&colspec=ID%20Type%20Status%20Priority%20Area%20Owner%20Summary](http://code.google.com/p/dart/issues/detail?id=293&q=themes&colspec=ID%20Type%20Status%20Priority%20Area%20Owner%20Summary)

# php - 如何通过仅包含 PEAR.php 文件来包含 PEAR 包？

> ID：10036363
> 
> 赞同：0
> 
> 时间：2012-04-05T21:35:04.377
> 
> 标签：php, include, pear, mdb2

我在托管网站上使用 PEAR，我想使用 MDB2 包。Web 上的每个站点都使用`require('MDB2.php')`. 可悲的是，我的虚拟主机只向我提供了主`PEAR.php`文件的位置。

但我想我记得一种包含 PEAR 包的方法，它没有专门通过文件名包含它们，而是`PEAR`通过调用一些静态函数来使用全局类。可悲的是，我多次浏览文档并尝试搜索可以帮助我找到解决方案的每个关键字组合，但我没有找到它。
那么，**这可能吗？**如果是这样，**我该怎么做？**

非常感谢，我已经找了好几个小时了:(

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:14:32.447

不，不能通过 PEAR 类加载 pear 包。

包含 pear 包的唯一官方方法是`require`/`include`您要使用的文件：

```
require_once 'MDB2.php'; 
```

此外，您的 Web 主机可能没有安装 MDB2，因此您需要自己发送。请参阅[共享主机上的安装](http://pear.php.net/manual/en/installation.shared.php)手册。

# qt - 使用 QtConcurrent 映射时序列参数出错

> ID：10036364
> 
> 赞同：0
> 
> 时间：2012-04-05T21:35:07.783
> 
> 标签：qt, concurrency, qimage, qtconcurrent

我正在尝试使用 QtConcurrent::map 来运行此功能

```
//This function is used through QtConcurrent::map to create images from a QString path
void MainWindow::createQImage(QString* path) {
    //create an image from the given path
    QImage* t = new QImage(*path);
    imageList->append(t);
} 
```

在这个容器/序列上（在主窗口标题中声明并在主窗口构造函数中初始化）

```
QList<QImage *> *imageList = new QList<QImage *>; 
```

这是我要运行的代码

```
QFutureWatcher<void> futureWatcher;
futureWatcher.setFuture(QtConcurrent::map(imageList, &MainWindow::createQImage)); 
```

这是我得到的错误：

```
request for member 'begin' in 'sequence', which is of non-class type 'QList<QImage*>*'
request for member 'end' in 'sequence', which is of non-class type 'QList<QImage*>*' 
```

我需要为“imageList”中的每个元素运行“createQImage”函数，它可以达到数千个。我认为问题出在 map 函数的第一个参数上。从我读过的内容来看，这可能与兼容性有关。网上没有太多我能够与之相关的示例代码。我是 Qt 新手，不是最有经验的程序员，但我希望能得到一些帮助和反馈。

或者，有没有更好的方法使用 QtConcurrent 来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:45:41.637

`QtConcurrent::map`想要一个序列作为它的第一个参数。您将一个指向序列的*指针传递给它。*

如果你这样做

```
futureWatcher.setFuture(QtConcurrent::map(*imageList, &MainWindow::createQImage)); 
```

它应该是快乐的。

请注意，编译器相当清楚问题所在。花点时间仔细阅读错误，它们通常不像最初看起来那样神秘。在这种情况下，它告诉您您传递的参数不是类类型。快速查看错误末尾的参数类型会发现它是一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:58:36.423

`QList`, `QImage`, `QString` are Copy-On-Write types (see [other Qt implicitly shared types](http://qt-project.org/doc/qt-4.8/implicit-sharing.html#shared-classes)), so you shouldn't use pointers to these types because they are basically already smart pointers.

And if you remove all pointers from your code, it should also fix the main problem.

# ios - 当 plist 文件受表单身份验证保护时，iOS Over The Air 安装失败

> ID：10036372
> 
> 赞同：2
> 
> 时间：2012-04-05T21:35:58.780
> 
> 标签：ios, asp.net-mvc-3, forms-authentication

我们正在尝试在使用表单身份验证的 MVC3 网站上实现 iOS Over The Air (OTA) 安装。

安装页面仅对经过身份验证的用户可用。我们还想使用 Forms Authentication 锁定实际的 *.plist 和 *.ipa 文件。这是为了防止有人在知道 url 的情况下尝试直接安装文件。

一旦我们设置了所有安全措施，我们就无法成功安装该应用程序。iPad 浏览器返回错误：“无法连接到 XXXX.com”。如果我们允许所有用户访问文件所在的文件夹，则安装成功完成。

这就是我们的问题。OTA 安装请求似乎***没有***在其请求中包含身份验证 cookie。目前，这是我们对正在发生的事情的最佳猜测，因为当我们允许所有用户访问该文件夹时，一切正常。此外，我们检查了 IIS 日志，似乎得出了相同的结论。

以下是相关的日志文件信息：

2012-04-05 20:42:37 XXX.XXX.XXX.XXX 获取 /[网站]/[安全文件夹]/[文件].plist - 80 - XXX.XXX.XXX.XXX iTunes-iPad-M/5.0 .1+(32GB) 302 0 0 46

2012-04-05 20:42:37 XXX.XXX.XXX.XXX GET /[WEBSITE]/login ReturnUrl=%2f[WEBSITE]%2f[SECURED FOLDER]%2f[FILE].plist 80 - XXX.XXX。 XXX.XXX iTunes-iPad-M/5.0.1+(32GB) 200 0 0 15

我们对日志文件的解释是对**/[WEBSITE]/[SECURED FOLDER]/[FILE].plist**的请求被拒绝并返回 302。记录的下一个请求是应用程序的登录页面，其中 plist 文件的路径作为返回 url：**/[WEBSITE]/login ReturnUrl=%2f[WEBSITE]%2f[SECURED FOLDER]%2f[FILE].plist**

关于我们如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T22:49:43.100

最后，我们的猜想是正确的。OTA 安装请求在其请求中不包含身份验证 cookie。

为了解决这个问题并仍然具有一定程度的身份验证，我们删除了对安装文件的安全限制。然后，我们将一次性使用验证密钥添加到 OTA 位置的链接。

# servlets - PhoneGap 文件传输到 Java Servlet

> ID：10036375
> 
> 赞同：1
> 
> 时间：2012-04-05T21:36:09.257
> 
> 标签：servlets, file-upload, cordova

我正在为 iOS 应用程序使用 PhoneGap 1.5，我需要通过 FileTransfer 对象将照片上传到 Java Servlet。有没有人这样做过？我见过的唯一示例使用 PHP，当我的 servlet 被调用时，我不清楚发生了什么。将很快发布代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:39:00.683

如果 PhoneGap FileTransfer 发送符合 RFC2388 规范的 HTTP 多部分/表单数据请求，那么您可以只使用标准[`request.getPart()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29)方法，或者，当您仍在使用 Servlet 版本 2.5 或更早版本时，详细概述的[Apache Commons FileUpload](http://commons.apache.org/fileupload)在这个答案中：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

# android - 在 Box2d 中仅将速度应用于一个轴（X 或 Y）？

> ID：10036376
> 
> 赞同：0
> 
> 时间：2012-04-05T21:36:26.087
> 
> 标签：android, box2d, andengine

我试图让玩家在接触平台时跳入游戏，但同时它应该由加速度计控制左右移动。因此，我正在考虑在接触侦听器的 Y 轴上应用线速度以使其跳跃，同时在加速度计改变其值时在 X 轴上应用线速度。

问题是当我使用 setLinearVelocity 方法时，它会在两个轴上设置 Velocity 的值。结果，玩家不会跳跃，因为加速度计改变了 Y 轴上的速度值。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:40:29.220

```
b2Vec2 v = body->GetLinearVelocity();
v.x = ...;
body->SetLinearVelocity( v ); 
```

# c# - PageMethods.Method 未从 javascript 调用

> ID：10036378
> 
> 赞同：0
> 
> 时间：2012-04-05T21:36:34.773
> 
> 标签：c#, asp.net, scriptmanager, pagemethods

我有一个 javascript 函数，它构建一个字符串，然后将字符串发送到 c# 代码隐藏以使用。问题是，PageMethods.Method 永远不会被调用。

相关代码：

页面：

```
<asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" EnablePartialRendering="true"
    runat="server" />
<script type="text/javascript">
function makeString() {
        debugger
        var a = document.getElementById("ddlRptYear").value + "_";
        var b = document.getElementById("ddlRptType").value + "_";
        var c = document.getElementById("ddlGeography").value + "_";
        var d = "";
        var e = "";
        var x = document.getElementById("ddlTouchPoint");
        var y = document.getElementById("ddlAOR");

        if (x.disabled == false) {
            d = x.value + "_";
        }

        if (y.disabled == false) {
            e = y.value;
        }

        var pptString = a + b + c + d + e + ".ppt";
        PageMethods.GetPPTString(pptString, onSuccess, onFail);
    } 
```

代码隐藏：

```
[System.Web.Services.WebMethod]
    public static void GetPPTString(string pptString)
    {
        if ((pptString == "") || (pptString == null))
        {
            throw new Exception("Error: No String Sent.");
        }
        else
        {
            throw new Exception(pptString);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:12:52.427

我必须在 RadioButtonList 上启用自动回发才能命中 SelectedIndexChanged 方法。它现在有效，但我需要在未来找出一些东西来克服不得不发回的问题。

# c - 箭头运算符与点运算符

> ID：10036381
> 
> 赞同：53
> 
> 时间：2012-04-05T21:36:57.623
> 
> 标签：c, pointers, structure

在我看来，C 的箭头运算符 (->) 是不必要的。点运算符 (.) 应该足够了。采取以下代码：

```
typedef struct {
    int member;
} my_type;

my_type   foo;
my_type * bar;
int       val;

val = foo.member;
val = bar->member; 
```

我们看到必须使用箭头运算符来取消引用 bar。但是，我更愿意写

```
val = bar.member; 
```

关于我是试图从结构中提取“成员”还是从指向该结构的指针中提取“成员”，这一点没有歧义。但是很容易使用错误的运算符，尤其是在重构代码时。（例如，也许我正在对 foo 进行一些复杂的操作，所以我将代码移动到一个新函数中并传递一个指向 foo 的指针）。我认为我不需要关心 foo 是否是指针；编译器可以担心细节。

所以问题是：从 C 语言中消除 -> 不是更简单吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-05T21:43:14.757

“箭头”运算符是语法糖。 `bar->member`是一样的`(*bar).member`。造成差异的原因之一是可维护性。箭头运算符与点运算符不同，跟踪哪些变量是指针，哪些不是指针变得容易得多。可能始终使用`.`并让编译器尝试做正确的事情，但我怀疑这会使语言更简单。相信编译器会解释你的*意思*而不是你*真正写*的东西，结果通常很糟糕。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T21:41:09.073

不，从语言中删除*并不*容易`->`，原因很简单，如果是的话，就必须重写大量的代码。但是，*可以*定义它`p.x`等效于`p->x`if`p`是一个指针。这将是一个向后兼容的更改，因为该代码当前是非法的。

# java - JButton 对 actionListener 无响应

> ID：10036385
> 
> 赞同：0
> 
> 时间：2012-04-05T21:37:09.533
> 
> 标签：java, jbutton, actionlistener

我在使用 actionListener 时遇到了麻烦。我创建了自己的简单对话框，它只有两个 JButton - 是和否。当我单击按钮时，actionListener 没有响应。

这是我的代码：

```
private void showInfoNewUML() {        
    Dimension buttonsSize = new Dimension(60, 25);
    Dimension programSize = new Dimension(1200, 700);
    final JDialog dialogWindow = new JDialog(this, "Erase actual UML diagram"
            + " with his files", true);        
    JTextArea descDialogWindow = new JTextArea("Do you really erase actual\n"
            + "UML diagram with his files?   ");
    descDialogWindow.setEditable(false);
    descDialogWindow.setBackground(new Color(220, 220, 220));
    descDialogWindow.setBorder(null);
    dialogWindow.getContentPane().setBackground(new Color(220, 220, 220));
    dialogWindow.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    dialogWindow.setModal(true);
    dialogWindow.setResizable(false);
    dialogWindow.setLayout(new FlowLayout());
    dialogWindow.setSize(310, 100);
    dialogWindow.setLocation((int) programSize.getWidth() / 2,
            (int) programSize.getHeight() / 2);
    JButton buttonYes = new JButton("Yes");
    JButton buttonNo = new JButton("No");
    buttonYes.setPreferredSize(buttonsSize);
    buttonNo.setPreferredSize(buttonsSize);
    dialogWindow.add(descDialogWindow);
    dialogWindow.add(buttonYes);
    dialogWindow.add(buttonNo);
    dialogWindow.setVisible(true);

    buttonYes.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            buttonAnoActionPerformed(e);
        }

        private void buttonAnoActionPerformed(ActionEvent e) {
            dialogWindow.setVisible(false);
        }
    });

    buttonNo.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            buttonNeActionPerformed(e);
        }

        private void buttonNeActionPerformed(ActionEvent e) {
            dialogWindow.setVisible(false);
        }
    });
} 
```

单击按钮后，我想关闭此对话框。当我点击右上角的十字按钮时，对话框窗口关闭。

感谢您帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:44:26.427

尝试在调用*之前*`dialogWindow.setVisible(true);`添加 ActionListeners 。

您的对话框是模态的，因此在对话框关闭之前`showInfoNewUML`会一直阻塞`dialogWindow.setVisible(true);`，这对于注册任何有用的侦听器来说太晚了。

# php - 在 Windows 中使用 PHP

> ID：10036388
> 
> 赞同：0
> 
> 时间：2012-04-05T21:37:35.477
> 
> 标签：php, windows-7

我最近继承了一个PHP网站来维护。我的知识是 ASP.Net 和 HTML。我需要帮助开始。

我下载了 WAMPServer。它安装正常，但它不运行。我尝试运行它，它就退出了。没有错误信息。

我正在运行 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:55:35.803

如您所见，您可能想在此处考虑 XAMPP [http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)。我强烈推荐那里有一个便携式版本。它不需要安装，所以它似乎总是在运行，即使你在其他设置上遇到了问题。

它还具有设置功能，因此它们确实作为服务运行，但我建议如果您刚刚开始，请不要弄乱您的注册表，直到您稍微了解一下并弄清楚您是否真的需要它**安装了**。

# events - 防止 Observer 方法被调用两次

> ID：10036390
> 
> 赞同：2
> 
> 时间：2012-04-05T21:37:39.000
> 
> 标签：events, magento, observers

我正在使用 Magento 1.5.1.0 和“mPAY24 支付网关”扩展。我有一个事件“sales_order_payment_pay”的观察者类，向物品的制造商发送通知电子邮件。

这个解决方案有一些奇怪的行为：

*   以注册用户身份登录时 - 按预期调用观察者方法
*   以访客用户身份结账时，“付款交易”（万事达卡，VISA）成功时触发“sales_order_payment_pay”事件，并在单击“返回按钮”返回 Magento 商店后第二次触发。因为这个行为电子邮件被发送两次。

有没有办法防止观察者方法被执行两次？

亲切的问候，伯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:26:10.190

不，作为客户端（与系统）开发人员，您无法决定事件何时触发。

以下是解决此问题的一些一般出发点：

相反，您需要更改观察者方法的行为。您需要检查系统的状态和/或数组中的对象，而不是盲目地在观察者方法中触发电子邮件`$observer->getData()`，并确定事件是在支付交易之后触发，还是在之后触发点击“点击返回按钮”。

如果是前者，请按预期发送您的电子邮件。如果是后者，只需`return`通过观察者方法和/或跳过带有条件的电子邮件。

如果这不是您自己的观察者方法的问题（它是核心观察者或作为模块一部分的观察者），请使用类重写将观察者方法替换为您自己的方法。如果检测到正确的状态，则调用`return parent::observerMethodName`，如果是“点击返回按钮”状态，则返回 null 并跳过调用父级。

如果观察者是使用硬编码的类名（不是类别名）设置的，那么您需要使用代码池覆盖来更改方法的行为。

# android - 客户端-服务器 TCP 通信

> ID：10036391
> 
> 赞同：1
> 
> 时间：2012-04-05T21:37:39.160
> 
> 标签：android, sockets, tcp, client

服务器应向客户端发送消息“Hello :: enter QUIT to exit”，然后客户端输入任何文本，服务器回显客户端的文本，在其消息前添加“From server:”。但似乎顺序混淆了，我似乎找不到在哪里！我整天都在做这个！

这是服务器的代码：

```
 import java.net.*;

public class Server {

    public static void main(String[] args) {

        int nreq = 1;
        try
        {
            ServerSocket sock = new ServerSocket (8080);
            for (;;)
            {
                Socket newsock = sock.accept();
                System.out.println("Creating thread ...");
                Thread t = new ThreadHandler(newsock,nreq);
                t.start();
            }
        }
        catch (Exception e)
        {
            System.out.println("IO error " + e);
        }
        System.out.println("End!");
    }
} 
```

线程处理程序代码：

```
 import java.io.*;
import java.net.*;

class ThreadHandler extends Thread {
    Socket newsock;
    int n;

    ThreadHandler(Socket s, int v) {
        newsock = s;
        n = v;
    }

    // @SuppressWarnings("deprecation")
    public void run() {
        try {

            PrintWriter outp = new PrintWriter(newsock.getOutputStream(), true);
            BufferedReader inp = new BufferedReader(new InputStreamReader(
                    newsock.getInputStream()));
            outp.println("Hello :: enter QUIT to exit");
            boolean more_data = true;
            String line;
            while (more_data) {
                line = inp.readLine();
                if (line == null) {
                    more_data = false;
                } else {
                    outp.println("From server: " + line + "\n");
                    if (line.trim().equals("QUIT"))
                        more_data = false;
                }
            }
            newsock.close();
        } catch (Exception e) {
            System.out.println("IO error " + e);
        }

    }
} 
```

和客户端代码：

```
 import java.io.*;
import java.net.*;
import java.util.Scanner;

public class Client {
    // @SuppressWarnings("deprecation")
    public static void main(String args[]) {
        Scanner scanner = new Scanner(System.in);
        try {
            Socket s = new Socket("localhost", 8080);
            PrintWriter outp = new PrintWriter(s.getOutputStream(), true);
            BufferedReader inp = new BufferedReader(new InputStreamReader(
                    s.getInputStream()));
            boolean more_data = true;
            System.out.println("Established connection");
            String line;
            while (more_data) {
                line = inp.readLine();
                String userInput = scanner.nextLine();
                outp.println(userInput);
                if (line == null) {
                    more_data = false;
                } else
                    System.out.println(line);
            }
            System.out.println("end of while");
        } catch (Exception e) {
            System.out.println("IO error " + e);
        }
    }
} 
```

我正在测试它，所以在我打算让客户端成为 Android 手机之后——如果可能的话——

* * *

更新：

我已将服务器的代码更改为：

```
outp.println("Hello :: enter QUIT to exit \n");
        boolean more_data = true;
        String line;
        while (more_data) {
        line = inp.readLine();
        System.out.println("Message '" + line + "' echoed back to client.");// !!
        if (line == null) {
            System.out.println("line = null");
            more_data = false;
        } else {
            outp.println("From server: " + line + ". \n");
            if (line.trim().equals("QUIT"))
                more_data = false;
        }
    }
    newsock.close();
    System.out.println("Disconnected from client number: " + n); 
```

并按照 Luis Miguel Serrano 的建议在 Hello 消息的末尾添加“\n”，并将客户端更改如下：

```
boolean more_data = true;
        System.out.println("Established connection");
        String line;// = inp.readLine();

        while (more_data) {
            line = inp.readLine();
            System.out.println(line);
            if (line == null) {
                // nothing read
                more_data = false;
            } else
                line = inp.readLine();
            System.out.println(line);
            String userInput = scanner.nextLine();
            if (userInput.trim() == "QUIT") {
                s.close();
                System.out.println("Disconnected from server.");
                more_data = false;
            } else
                outp.println(userInput);

        }
        System.out.println("end of while"); 
```

现在它工作正常。

**如果有人可以建议我一些 Android 客户端 Java 服务器教程将不胜感激。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:53:40.690

根据您的评论，这可能是一个冲洗问题。尝试添加以下行：

```
outp.flush(); 
```

后：

```
outp.println("Hello :: enter QUIT to exit"); 
```

当您写入流时，有时您写入的内容会保存在缓冲区中。如果要确保缓冲区被清空并实际发送字符串，则需要调用 flush() 方法。

更新

此外，将“\n”添加到来自服务器的 Hello 欢迎消息的末尾。我认为这将使它发挥作用。

# maven - IntelliJ 的 Maven 过滤支持如何工作？

> ID：10036400
> 
> 赞同：10
> 
> 时间：2012-04-05T21:38:29.307
> 
> 标签：maven, intellij-idea

我注意到，当您将 Maven 项目配置为使用属性过滤时，属性过滤似乎在非 Maven IntelliJ“制作”期间也有效。这意味着 Jetty/Tomcat/GWT/Glassfish 的 IntelliJ 运行配置仍将支持您的 maven 资源过滤。

因此，如果我将其添加到我的`pom.xml`：

```
 <build>
     <resources>
         <resource>
             <directory>src/main/resources</directory>
             <filtering>true</filtering>
             <includes>
                 <include>**/*.properties</include>
                 <include>**/persistence.xml</include>
             </includes>
         </resource> .... 
```

它应该在任何 intellij 运行配置开始之前过滤我的 properties 和 peristence.xml 文件中的任何属性。这对于交换 JDBC 引用或文件系统参数非常有用。

我遇到的唯一问题是 IntelliJ 似乎只尊重 src/main/resources 中的过滤，即使我将 pom.xml 更改为其他目录的第二个条目（即：src/integrationtest/resources）。

这一切似乎都是“自动的”。那么它是如何工作的，我可以在哪里（如果有的话）配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T19:32:27.650

好消息，看起来这个问题将在 13.1 中修复

[http://youtrack.jetbrains.com/issue/IDEA-25934](http://youtrack.jetbrains.com/issue/IDEA-25934)

编辑：抱歉，如果不够清楚，错误案例只是标记为“已修复”，没有进一步解释......但我在 13.1 EAP 版本（内部版本 134.1445）中进行了测试，虽然以前 IntelliJ 会覆盖资源，但它现在保留了网络Maven过滤的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-14T08:10:27.507

> IntelliJ IDEA 的 Make 功能能够过滤 Maven 资源。但是，IntelliJ IDEA 还不支持过滤 Web 资源。

来源：[http](http://www.jetbrains.com/idea/webhelp/maven.html#compile)
: //www.jetbrains.com/idea/webhelp/maven.html#compile 虽然在整个 intellij webhelp 中没有关于这种支持的更多细节，所以我想它应该像 maven 的 process-resources 阶段一样工作。

您遇到的问题可能是由于目录`src/integrationtest/resources`不遵循 maven 约定引起的。如果您这样做，也许它会起作用：

*   做了`src/test/resources/integrationtest/`

或者

*   配置 maven 以尊重`src/integrationtest`作为测试源（但如果`integrationtest`不是众所周知的约定，它将违反 maven 的 COC 规则）

或者

*   如果您想强调隔离，请使其成为另一个 Maven（子）模块`integrationtest`

至于过滤目录不同的是`src/main/resources`：过滤`src/main/webapp/META-INF`对我来说是开箱即用的。
（Maven 3.0.4，Intellij 12.1.4）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T15:41:35.810

Intellij（我使用的是 14.1）确实允许您在工件构建期间将自定义 Ant 任务定义为预处理/后处理。

转到项目结构 -> 工件 -> {选择工件} -> {预处理|后处理}选项卡。

因此，例如，我可以使用以下简单任务来模拟资源过滤，以防开箱即用：

```
<target name="filter" depends="clean">
    <copy todir="${maven.build.dir}/${maven.build.finalName}">
        <fileset dir="${maven.build.resourceDir.0}"/>
        <filterset begintoken="${" endtoken="}">
            <filter token="project.version" value="${project.version}"/>
        </filterset>
    </copy>
</target> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-10T16:03:44.400

不要忘记定义默认配置文件

```
 <profiles>
    <profile>
        <id>development</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            ...
        </properties>
    </profile>
 </profiles> 
```

# sql - 如何排除整个月的周末数据？

> ID：10036402
> 
> 赞同：0
> 
> 时间：2012-04-05T21:38:47.720
> 
> 标签：sql, tsql

我被困在必须排除周末票并需要计算其余票（仅工作日）的地步。

让我们假设：

```
tickets               dates
-----------           ----------
123                   04/05/2012
231                   04/06/2012
111                   04/07/2012
112                   04/08/2012 
113                   04/09/2012 
```

因此，在上表中，我们有 5 天的数据，包括工作日和周末。

我只需要工作日数据而不是像这样在我的决赛桌中的周末：

```
tickets               dates 
-----------           ----------
123                   04/05/2012
231                   04/06/2012
113                   04/09/2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:24:19.407

不要打扰日期优先。它可能会导致问题

```
select * from @t 
where datediff(d, 0, dates)%7 < 5 
```

编辑： Datefirst 因数据库而异。因此，您需要在使用一周的“DatePart(dw,dates)”之前设置 datefirst。这意味着每次运行脚本时都应该调用 datefirst。如果你决定把它放在一个函数中，你就完蛋了，因为你不能在那个函数中使用它。因此，每次调用该函数时，您都依赖于人们记住该 datefirst 部分。

我的解决方案不依赖于数据库的单独设置。

它的作用是这样的：

计算代表 1900-01-01（星期一）和日期的 0 之间的天数。

其中的模数 7 是介于 0（星期一）和 6（星期日）之间的天数，因此小于 5 是工作日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:49:01.760

您通常使用 set [datefirst](http://msdn.microsoft.com/en-us/library/ms181598.aspx)和[datepart](http://msdn.microsoft.com/en-us/library/ms174420.aspx)函数的组合来过滤掉查询中的工作日或周末。您对表结构的了解不多，因此仅将以下内容用作粗略指南。

一个例子是这样的：

```
set datefirst 1;  /* treat monday as first day of week */

select tickets from mytable 
    where datepart(dw,mydate) < 6;  /* select days 1 - 5 only */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T21:49:09.723

```
Select * From Tickets Where DatePart(dw,dates) between 2 And 6 
```

假设周日是第一天

你可以把它弄乱`SET DATEFIRST`

# ios - iAd 设备旋转导致“可能被遮挡”警告

> ID：10036404
> 
> 赞同：0
> 
> 时间：2012-04-05T21:38:56.763
> 
> 标签：ios, rotation, warnings, iad

我有一个仅纵向/纵向倒置的应用程序，我在其中实现了 iAds - 一切似乎都成功了，我实现它的页面只是一个图像视图和一堆按钮，所以我将它设置为不移动时广告在主视图上方移动，但如果我旋转设备，我得到的横幅可能会被遮挡错误。

我只能在页面上的每个会话中收到一次错误，进一步的旋转不会导致重复，但如果我转到另一个页面并返回，我可以再次重复警告。

如果我让应用程序运行一段时间，广告会根据它们的可用性来来去去，而不会发出警告 - 似乎没有广告在彼此之上。

这可能是轮换期间发生的短暂故障吗？有什么方法可以进一步诊断吗？

我添加了 [self.view bringSubviewToFront:theBannerView]; 到动画阶段，但它没有区别，这并不奇怪，因为它是旋转的，这就是问题所在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:24:00.680

我遇到了同样的问题。在屏幕方向更改期间，广告视图未完全显示在屏幕上，因此“横幅可能被遮挡”

为防止出现“错误”，您可以在旋转之前删除或隐藏广告视图，然后将其重新添加，

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [AFAddManager removeFromView];
}
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
    [AFAddManager updateOrientation:self.interfaceOrientation];
    [AFAddManager addToView:self.view];
} 
```

但这看起来不太好。您可以将 adview 替换为复制的图像，使其看起来像已旋转。

我将带着警告信息离开我的应用程序。我认为只要添加在一定时间内可见，您就可以获得展示的功劳。只要您的应用程序不经常轮换，它就不是问题。很高兴得到一些确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:55:32.173

尝试这个：

```
- (void)changeBannerOrientation:(UIInterfaceOrientation)toOrientation
{

    if (UIInterfaceOrientationIsLandscape(toOrientation)) {
        self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }

else {
        self.bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    }
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
        return YES;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                            duration:(NSTimeInterval)duration
{

    if (bannerView) {
        [self changeBannerOrientation:toInterfaceOrientation];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:09:14.537

我可以确认这个现象，我在任何一个方向上都没有收到初始页面加载错误，但我确实在旋转时得到了它。

我确实尝试了隐藏技巧来消除“错误”，但无济于事。正如马克所说，我想我应该把它拿出来，除非你付出很多努力，否则它看起来很难看。

我对此进行了一些阅读，并从 Apple 的文献中了解到，如果部分广告被遮挡，似乎不会加载新广告，这表明我们获得了加载每个广告的功劳，而不是总显示时间。

# jboss5.x - Gradle 提供了战争中存在的依赖项

> ID：10036405
> 
> 赞同：0
> 
> 时间：2012-04-05T21:39:07.023
> 
> 标签：jboss5.x, gradle

我想在我的战争中设置几个依赖项，因为这些 jar 是由服务器提供的。

所以我像这样设置我的 build.gradle：

```
apply plugin: 'war'
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp'

dependencies {
    compile project(':project1')
    providedCompile 'xml-apis:xml-apis:2.0.2',
        'javax.servlet:servlet-api:2.5',
        'javax.servlet.jsp:jsp-api:2.1',
        'javax.servlet:jstl:1.2',
        'com.sun.faces:jsf-api:2.1.6',
        'com.sun.faces:jsf-impl:2.1.6',
        'javax.transaction:jta:1.1'
} 
```

但是当我在我的服务器中部署我生成的战争时，提供的所有 jars 都存在并且我的服务器没有启动。

我的配置有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:24:38.710

看起来正确，对我来说效果很好。问题可能出在其他地方。

# html - HTML：浮点数内的浮点数

> ID：10036406
> 
> 赞同：0
> 
> 时间：2012-04-05T21:39:07.110
> 
> 标签：html, css

所以我的标题设置很好。然后我有我的身体。我想要发生的是让身体分裂（做得很好，没问题）。然后在左侧我有我的导航和右侧我有我的主体内容。我的问题是，如果我使用浮点数进行初始分割，那么我如何将右侧分成两半？我想要总共3个部分。左侧，然后是 leftRight 和 rightRight。

我的问题是，我可以在已经漂浮的东西里面放一个漂浮物吗？如果是这样，那怎么办？如果没有，那我怎样才能再次分裂我的身体右侧？

这是我尝试过的：http: [//people.eecs.ku.edu/~ageoffri/unavitSite/](http://people.eecs.ku.edu/~ageoffri/unavitSite/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:53:16.937

是的，您可以将浮动元素放在其他浮动元素中。

正如您所发现的，您的代码有一个放错位置的 div，因此您实际上并没有嵌套元素。

# c# - 将 1 周添加到当前日期

> ID：10036413
> 
> 赞同：13
> 
> 时间：2012-04-05T21:39:35.640
> 
> 标签：c#, datetime

我的代码中有这样的东西`DateTime.Now.ToString("dd.MM.yy");`，我需要给它加1周，就像`5.4.2012`变成`12.4.2012`我试图将它转换为int然后加起来，但是当它达到30时就会出现问题。

你能告诉我一些聪明的方法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-05T21:41:09.433

您希望将其保留为 a `DateTime`，直到您准备好将其转换为字符串。

```
DateTime.Now.AddDays(7).ToString("dd.MM.yy"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T21:41:55.960

首先，在您准备好显示或序列化它（例如，JSON 或保存在文件中）之前，始终将数据保持在其本机类型中。在添加或相乘之前，您不会将两个`int`变量转换为字符串，因此也不要使用日期。

保持原生类型有一些优点，例如将`DateTime`内部存储为 8 个字节，这比大多数字符串格式要小。但最大的优势是 .NET Framework 为您提供了一系列内置方法来执行日期和时间计算，以及从源字符串解析日期时间值。[完整列表可以在这里找到](https://docs.microsoft.com/en-us/dotnet/api/system.datetime?view=netcore-2.2)。

所以你的答案变成：

*   从 获取当前时间戳`DateTime.Now`。`DateTime.Now.Date`如果您宁愿使用午夜而不是当前时间，请使用。
*   使用`AddDays(7)`一周后计算。请注意，此方法会自动考虑到下个月或下一年的滚动（如果适用）。闰日也为您考虑在内。
*   使用您想要的格式将结果转换为字符串

```
// Current local server time + 7 days
DateTime.Now.AddDays(7).ToString("dd.MM.yy");

// Midnight + 7 days
DateTime.Now.Date.AddDays(7).ToString("dd.MM.yy"); 
```

* * *

框架中还有很多其他方法可以帮助：

*   国际化
*   UTC 和时区（尽管您可能想查看[NodaTime](https://nodatime.org/)以获得更高级的应用程序）
*   一些基本数学计算的运算符重载
*   `TimeSpan`处理时间间隔的类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T21:41:49.777

任何你不能使用 AddDays 方法的原因

```
DateTime.Now.AddDays(7) 
```

# c# - 如何在 LINQ 中选择所有字段以及一些新字段？

> ID：10036421
> 
> 赞同：5
> 
> 时间：2012-04-05T21:40:48.003
> 
> 标签：c#, linq, linq-to-sql, rdlc

1.  我收到了一份 RDLC 报告
2.  存储在 SQL DB 中的日期格式是格鲁吉亚语。我想在报告中显示日期为波斯语。
3.  使用 Linq，我想选择 DB 的所有字段以及一些用作波斯日期字段的新字段。

我使用了以下语法：

```
 var invoices = from invoice in dbContext.eve_Invoices
                    select new
                    {

                        invoice.CreatorID,
                        invoice.DateChange,
                        invoice.DateCreation,
                        invoice.DatePrint,
                        invoice.Discount,
                        invoice.DiscountPercentage,
                        invoice.DiscountType,
                        invoice.Fare,
                        invoice.ID,
                        invoice.InvoiceStatus,
                        invoice.NumberOfItems,
                        invoice.Packaging,
                        invoice.PrintID,
                        invoice.RawPrice,
                        invoice.RoundOff,
                        invoice.ServiceCharge,
                        invoice.ServingType,
                        invoice.TableID,
                        invoice.Tax,
                        invoice.TotalPrice,
                        invoice.ValidityStatus,
                        PersianYear = invoice.DateCreation != null ? pc.GetYear((DateTime)invoice.DateCreation) : 0,
                        PersianMonth = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0,
                        PersianDay = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0
                    }; 
```

除了新字段之外，还有什么方法可以传递发票的所有字段，例如：

```
 var invoices = from invoice in dbContext.eve_Invoices
                    select new
                    {

                        invoice.*,
                        PersianYear = invoice.DateCreation != null ? pc.GetYear((DateTime)invoice.DateCreation) : 0,
                        PersianMonth = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0,
                        PersianDay = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0
                    }; 
```

我也尝试了 select new {invoice,....} 但是它不会导致数据表与第一个相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T22:33:11.570

你可以传递所有的字段，但它并不漂亮，最好传递发票本身，而不是它的字段：

```
var invoices = from invoice in dbContext.eve_Invoices
                select new
                {
                    RelatedInvoice = invoice,
                    PersianYear = invoice.DateCreation != null ? pc.GetYear((DateTime)invoice.DateCreation) : 0,
                    PersianMonth = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0,
                    PersianDay = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0
                }; 
```

PS：我不确定这些行在 linq2entities 中是否正常工作（有些日子我没有任何 IDE，我忘记了一切：）：

```
PersianDay = invoice.DateCreation != null ? pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0 
```

如果这不起作用，我建议先获取数据然后进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:27:24.293

您可以使用发票本身。

```
var invoices = from invoice in dbContext.eve_Invoices
               select new
               {
                 invoice,
                 PersianYear = invoice.DateCreation != null ? >pc.GetYear((DateTime)invoice.DateCreation) : 0,
                 PersianMonth = invoice.DateCreation != null ? >pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0,
                 PersianDay = invoice.DateCreation != null ? >pc.GetDayOfMonth((DateTime)invoice.DateCreation) : 0
               }; 
```

您可以稍后访问这样的字段

```
 foreach (var invc in invoices)
  { 
     //invc.invoice.CreatorID
  } 
```

日期时间转换也有效。如果 invoice.DateCreation 是 Nullable 类型，您应该在转换之前注意它。

# c# - IE9 工具栏按钮的自定义图标

> ID：10036424
> 
> 赞同：2
> 
> 时间：2012-04-05T21:40:59.700
> 
> 标签：c#, internet-explorer, bho, browser-extension, protected-mode

我为 IE9 做了一个扩展，添加了一个工具栏按钮。

注册看起来像这样：

```
RegistryKey registryKey = Registry.LocalMachine.OpenSubKey(RegCmd, true);
if (registryKey == null)
   registryKey = Registry.LocalMachine.CreateSubKey(RegCmd);
RegistryKey key = registryKey.OpenSubKey(guid);
if (key == null)
  key = registryKey.CreateSubKey(guid);
key.SetValue("ButtonText", "My Button");
key.SetValue("CLSID", "{1FBA04EE-3024-11d2-8F1F-0000F87ABD16}");
key.SetValue("ClsidExtension", guid);
key.SetValue("Icon", "c:\myicon.ico");
key.SetValue("HotIcon", "c:\myicon.ico");
key.SetValue("Default Visible", "Yes");
key.SetValue("MenuText", "My Button");
key.SetValue("ToolTip", "My Button");
//key.SetValue("KeyPath", "no"); 
registryKey.Close();
key.Close(); 
```

问题是 - 图标被引用为文件系统上的文件，而不是 URL。IE Gallery 将插件分发为 .dll 而不是 .msi，因此我没有机会将 .ico 放到本地文件系统上。

如何让按钮使用我的图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:15:47.750

您应该能够将您的图标添加到 DLL 并使用`mydll.dll,0`或与图标类似的东西。

# javascript - 与 javascript 正则表达式的精确字符串匹配

> ID：10036427
> 
> 赞同：2
> 
> 时间：2012-04-05T21:41:07.377
> 
> 标签：javascript, regex

我正在努力解决可能是一个非常简单的正则表达式问题。我正在开发一个简单的原型，并且需要知道我在哪个页面上，因此如果用户单击菜单小部件以导航到同一视图，我不会重新加载它。

我有两个用户可以切换的 URL：

`http://localhost/TestMVC/Larry/LarryTiles`

`http://localhost/TestMVC/Larry/LarryTilesList`

URL 还可以有一些尾随查询字符串项，例如： [http://localhost/TestMVC/Larry/LarryTilesList?filterValue=servers](http://localhost/TestMVC/Larry/LarryTilesList?filterValue=servers)

LarryTiles 给了我这个问题。"/\bLarryTiles\b/" 周五工作（在这里其他问题的答案之后），但现在不匹配。:)

我需要在这两个 URL 中准确找到字符串“LarryTiles”和“LarryTilesList”，但不知道该怎么做。我的本地计算机和托管它的各种服务器之间的 URL 会发生变化，所以我不能依赖位置。

编辑：添加了带有尾随查询字符串的示例，我忘记了。对不起 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:48:35.767

您可以像这样获取 URL 的最后一个路径段：

```
function getLastPathSegment(url) {
    var match = url.match(/\/([^\/]+)\/?$/);
    if (match) {
        return(match[1]);
    }
    return("");
}

// returns "LarryTiles"
getLastPathSegment("http://localhost/TestMVC/Larry/LarryTiles");     

// returns "LarryTilesList"
getLastPathSegment("http://localhost/TestMVC/Larry/LarryTilesList"); 
```

所以，你可以这样做：

```
var endPath = getLastPathSegment(window.location.pathname);
if (endPath == "LarryTiles") {
    // some code
} else if (endPath == "LarryTilesList") {
    // some code
} else {
    // some code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:48:43.343

似乎你解释的工作，否则试试这个：http: [//jsfiddle.net/Wfz9d/](http://jsfiddle.net/Wfz9d/)

您有区分大小写的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T21:50:56.423

您可以使用以下代码：

```
str = 'http://localhost/TestMVC/Larry/LarryTiles?filterValue=servers';

if (str.match(/\/([^\/?]+)(?=\/$|\?|$)/)) {
   if (match[1] == 'LarryTiles')
       alert('LarryTiles found');
   else if (match[1] == 'LarryTilesList')
       alert('LarryTilesList found');
} 
```

# javascript - 使类型字段的输入以base64而不是二进制发送数据

> ID：10036431
> 
> 赞同：0
> 
> 时间：2012-04-05T21:41:13.837
> 
> 标签：javascript, html, html4

我正在用 html4 编写一个简单的上传表单。这是一个非常简单的过程，通常。我遇到的问题是图像数据，服务器需要 base64 并将处理我作为 base64 发送的任何内容，从而导致图像损坏。我可以为我的表单设置某种属性吗？如果没有，我可以设置一些 javascript 在将数据发送到服务器之前将其编码为 base64 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:01:57.777

这是一个有据可查的 base64 编码器/解码器[http://hellerim.net/base64_src.php](http://hellerim.net/base64_src.php)的链接。我修改了这段代码（见下文），因此它不需要“核心”类。

```
/// BEGIN_DOC(base64).METHOD(decode)
///
// method RETURNTYPE base64.decode(String inp [, enum outType [, bool safe [, bool lax]]])
//
// Encode input data into a base64 character string.
//
// Function arguments:
//     String inp:           base64 encoded data string to be decoded.
//     enum outType          Optional. This parameter specifies the type of the output and determines
//                           how the input data is to be interpreted.:
//                             0  - binary data; create a byte array (default)
//                             1  - 8-bit character string, assuming 1-byte characters encoded in inp
//                             2  - 16-bit (UniCode) character string, assuming 2-byte 
//                                  characters encoded in inp
//                           If 2 is passed to the function, but the number of base64 characters
//                           is odd, a value of null is returned.
//     bool safe             Optional. If this parameter is set to true, the standard base64 
//                           character set is replaced with a modified version where
//                           the characters '+' and '/' are replaced with '-' and '_',
//                           repectively, in order to avoid problems with file system
//                           namings which otherwise could occur on some systems.
//                           By default, the value of this argument is assumed to be
//                           false.
//     bool lax              Optional. If set to true, the function skips all input characters which
//                           cannot be processed. This includes the character '=', too, if
//                           it is followed by at least one different character before the string
//                           ends. However, if skipping infeasible characters amounts to a number
//                           of allowed base64 characters which is not amultiple of 4,
//                           this is considered an error and null is returned.
//                           If lax is set to false (the default), null is returned
//                           whenever an infeasible character is found.
//                           The purpose of this parameter is to give support in cases
//                           where data has been base64 encoded and later on was folded by
//                           some other software, e.g. '\r\n\'s have been inserted in email.
//                           exchange.
// Return value:             The function's processing result value is stored in a string or in
//                           a byte array before it is returned, depending on the value 
//                           assigned to the type parameter. In each case, the value
//                           maybe empty but not null if no error occurred.
// Errors:                   Whenever an error occurs, null is returned. Parameter values
//                           not defined above are considered errors.
//
/// END_DOC

base64.decode = function(inp, outType, safe, lax) {

  // do some argument checking
  if (arguments.length < 1) return null;
  if (arguments.length < 2) outType = 0; // produce character array by default
  if (outType != 0 && outType != 1 && outType != 2) return null;
  if (arguments.length >= 3 && safe != true && safe != false) return null;
  var sEnc = (arguments.length >= 3 && safe) ? this.encStringS : this.encString;  // select encoding character set
  if (arguments.length >= 4 && lax != true && lax != false) return null;
  var aDec = {};                // create an associative array for decoding
  for (var p = 0; p < sEnc.length; p++) { // populate array
    aDec[sEnc.charAt(p)] = p;
  }
  var out = (outType == 0) ? [] : '';
  lax = (arguments.length == 4 && lax); // ignore non-base64 characters
  var l = 0;               // work area
  var i = 0;               // index into input
  var j = 0;               // sextett counter
  var c = 0;               // input buffer
  var k = 0;               // index into work area
  var end = inp.length;    // one position past the last character to be processed
  var C = '';
  // check input
  if (lax) {
    var inpS = '';         // shadow input
    var ignore = false;    // determines wether '=' must be counted
    var cnt = 0;
    for (var p = 1; p <= inp.length; p++) {    // check and cleanup string before trying to decode
      c = inp.charAt(end - p);
      if (c == '=') {
        if (!ignore) {
          if (++cnt > 1) ignore = true;
        } else {
          continue;
        }
      } else if (undefined != aDec[c]) { // the character is base64, hence feasible
        if (!ignore) ignore = true;      // no more '=' allowed
        inpS = c + inpS;                 // prepend c to shadow input
      }
    }
    for (var p = 0; p <= cnt; p++) {     // at most cnt '=''s were garbage, a number in 
      if (p == 2) return null;           // [inpS.length, inpS.length + cnt] must be a
      if ((inpS.length + cnt) % 4 == 0) break;  // multiple of 4
    }
    if (inpS.length % 4 == 1) return null;   // must be 0, 2, or 3 for inpS to contain correctly base64 encoded data
    inp = inpS;                          // inp now contains feasible characters only
    end = inp.length;
  } else {
    if (inp.length % 4 > 0) return null;   // invalid length
    for (var p = 0; p < 2; p++) {        // search for trailing '=''s
      if (inp.charAt(end - 1) == '=') {
        end--;
      } else {
        break;
      }
    }
  }
  // convert
  for (i = 0; i < end; i++) {
    l <<= 6;                             // clear space for next sextett
    if (undefined == (c = aDec[inp.charAt(i)])) return null; // lax must be false at this place!
    l |= (c & 0x3f);    // append it
    if (j == 0) {
      j++;
      continue;                          // work area contains incomplete byte only
    }
    if (outType == 2) {
      if (k == 1) {                      // work area contains complete double byte
        out += String.fromCharCode(l >> (2 * (3 - j)));  // convert leftmost 16 bits and append them to string
        l &= ~(0xffff << (2 * (3 - j)));       // clear the 16 processed bits
      }
      k = ++k % 2;
    } else {                             // work area contains complete byte
      if (outType == 0) {
        out.push(l >> (2 * (3 - j)));          // append byte to array
      } else {
        out += String.fromCharCode(l >> (2 * (3 - j))); // convert leftmost 8 bits and append them to String
      }
      l &= ~(0xff << (2 * (3 - j)));           // clear the 8 processed bits
    }
    j = ++j % 4;                           // increment sextett counter cyclically
  }
  if (outType == 2 && k == 1) return null;  // incomplete double byte in work area

  return out;
} 
```

# perl - 使用中间变量访问 Spreadsheet::Read sheet 时出错

> ID：10036434
> 
> 赞同：0
> 
> 时间：2012-04-05T21:41:29.657
> 
> 标签：perl, compiler-errors, hashmap, perl-module

我不是 Perl 的专家，想知道为什么第一种获取 numSheets 的方法是可以的，而下面的方法不是：

```
use Spreadsheet::Read;
my $spreadsheet = ReadData("blah.xls");
my $n1 = $spreadsheet->[1]{sheets};     # okay
my %sh = %spreadsheet->[1];             # bad
my $n2 = $sh{label}; 
```

最后一行的下一行给出了错误

```
Global symbol "%spreadsheet" requires explicit package name at newexcel_display.pl line xxx 
```

我很确定我有正确的印记；如果我进行实验，我只能得到不同的错误。我知道电子表格是对数组的引用，而不是直接数组。我不知道元数据或单个工作表的哈希值，但是尝试不同的假设无济于事（至少以我适度的 perl 技能。）

我对Spreadsheet::Read 工作的参考是[http://search.cpan.org/perldoc?Spreadsheet::Read](http://search.cpan.org/perldoc?Spreadsheet::Read) 如果网上某处有很好的例子说明如何正确使用Spreadsheet，我想知道它们在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:43:04.347

这是不行的，因为它不是有效的 Perl 语法。原因是因为这不是拉里定义他的语言的方式。

变量前面的符号告诉你你想要做什么，而不是它是什么类型的变量。A`$`表示单个项目，`$scalar`例如`$array[0]`和对聚合的单个元素访问`$hash{$key}`。不要使用印记来强制类型。Perl 5 不这样做。

在您的情况下，`$spreadsheet`是一个数组引用。该`%spreadsheet`变量是一个命名散列，是一个完全独立的变量，与具有相同标识符的所有其他变量无关。`$foo`, `@foo`, 和`%foo`来自不同的命名空间。由于您尚未声明 a `%spreadsheet`，因此 strict 会抛出您看到的错误。

看起来您想从`$spreadsheet->[1]`. 所有引用都是标量，因此您要分配给标量：

```
 my $hash_ref = $spreadsheet->[1]; 
```

一旦你在标量中有哈希引用，你就可以取消引用它来获取它的值：

```
 my $n2 = $hash_ref->{sheets}; 
```

*[这是我们在Intermediate Perl](http://www.intermediateperl.com)*第一部分中介绍的内容。

# sorting - 根据内部表值对 lua 中的表进行排序

> ID：10036435
> 
> 赞同：0
> 
> 时间：2012-04-05T21:41:32.353
> 
> 标签：sorting, multidimensional-array, lua, lua-table

所以目前我在 Lua 中有一个表，其中包含另一个表（很像哈希表）。它叫做 email_table，里面有我的 person_table。email_table 的键是 email_addresses，而 person_table 包含有关人员的所有信息。

目前我正在尝试做的是根据 person_table 内部的值对我的 email_table 进行排序。不幸的是，Lua 的内置排序功能不适用于此类值。我将如何开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:48:23.063

你不能对不是数组的东西进行排序。如果您的键不是单调递增的整数，则无法对其进行排序。排序意味着顺序，并且表的非整数键没有排序。

如果“email_table 的键是 email_addresses”，则`email_table`无法排序。您可以有另一个表格，它是电子邮件地址的排序列表。但这必须是一个*列表*：键必须是单调递增的整数值（1、2、3、4 等）。那些有明确的顺序。

# python-3.x - 非致命 IronPython NumPy 异常

> ID：10036436
> 
> 赞同：0
> 
> 时间：2012-04-05T21:41:42.697
> 
> 标签：python-3.x, visual-studio-2010, numpy, exception, ironpython

我按照他们的说明为 IronPython安装了 Enthought 的[NumPy 实现。](http://www.enthought.com/repo/.iron/)

一切似乎都有效，包括`import numpy`and `import scipy`，但是在 IronPython 程序中使用这些语句会导致以下异常：

```
A first chance exception of type 'System.Collections.Generic.KeyNotFoundException' occurred in IronPython.dll

A first chance exception of type 'System.MissingMemberException' occurred in Microsoft.Dynamic.dll

A first chance exception of type 'System.MissingMemberException' occurred in IronPython.dll

A first chance exception of type 'IronPython.Runtime.Exceptions.TypeErrorException' occurred in Snippets.debug.scripting 
```

如何解决这些异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:33:39.713

我不会担心它们，而且我怀疑它们无论如何都可以被删除。这些都映射到 Python 异常，这意味着它们可能是保持与 CPython 的兼容性所必需的。在 CPython 中，异常速度很快（比 .NET 快几个数量级），因此它们在 Python 代码中比在 C# 中更常用。

IronPython 通常使用 .NET 异常机制来显示 Python 异常，这可能会导致某些代码的速度大幅下降。2.7 添加了一个“轻量级异常”机制，但它并没有被一致使用（兼容性现在比性能更重要，但我强烈考虑拉取请求）。可能会修改一些引发这些异常的代码以使用轻量级异常。

# coding-style - 不返回 null -- 搜索功能返回什么

> ID：10036438
> 
> 赞同：2
> 
> 时间：2012-04-05T21:41:49.653
> 
> 标签：coding-style

全部。我正在读一本书，其中一个想法是在编写方法时“不要返回 null”。当函数必须返回 null 时，他建议“抛出异常”或“使用特殊情况”。

如果方法返回类型是一个列表，我知道我可以返回一个空列表而不是 null。但是，如果返回类型是特定对象怎么办。例如，通过唯一 id 搜索数据库并返回结果的方法。如果方法找不到任何东西，我应该返回什么？

我尝试使用“抛出异常”，但最终为调用该函数的任何地方编写了更多编码和附加逻辑。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:55:01.977

如果您不想返回 null，则可以使用[Optional](http://docs.guava-libraries.googlecode.com/git-history/v10.0.1/javadoc/com/google/common/base/Optional.html)类之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:55:43.037

Null 被定义为不存在，这似乎与您想要的完全吻合。如果你的代码什么也不返回，对吧？

但是，一如既往，这取决于。

如果您的代码不打算返回任何内容，那么这样做可能会导致无法解决的问题。在这种情况下，抛出异常肯定更好。`1 / null`，不会在任何地方工作。

如果不存在是一个完全有效的返回值，那么为什么要返回异常？当然，假设您已经准备好代码来处理从查询返回的不存在的值，那么根本不需要抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:26:26.393

抛出异常是一项代价高昂的操作，因为存在上下文切换并且必须收集大量调试信息，因此您希望避免将它们作为控制流程流的一种方式（尤其是如果您可以在不抛出异常的情况下处理这种情况）。为了避免捕获异常，完全可以接受返回 null。

这方面的一个例子是 C# 中的几个[LINQ 函数](http://msdn.microsoft.com/en-us/library/system.linq.queryable.singleordefault.aspx)。这些方法可以返回 null：

```
SingleOrDefault(); // returns a single instance of an object, or null if not found

FirstOrDefault(); // returns the first matching object, or null if not found 
```

这允许您检查 null 而无需尝试使用异常处理来找出控制流。

我能想到的一个异常（请原谅双关语）是使用异常跨程序边界进行通信。例如，如果您有一个单独的 DLL 中的数据访问层，并且您需要将数据库故障传达回父程序，有时最好的方法是通过异常处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T22:41:33.490

如果可能是您可以返回的可能值，那么如果您找不到任何东西`Null`，则不应返回。`Null`例如，在：

```
[1, 2, 3, Null, 5].find(nonInteger) -> Null
[1, 2, 3, 4].find(nonInteger) -> Null 
```

该`.find`函数不能返回`Null`表示失败，因为有时它会返回`Null`成功！相反，您可以更改语义，或使用特殊对象：

```
# changed semantics (with extra information returned)
[1, 2, 3, Null, 5].find(nonInteger) -> index=4, value=Null
[1, 2, 3, 4].find(nonInteger) -> index=Null, value=Null

# changed semantics (with wrapper)
[1, 2, 3, Null, 5].find(nonInteger) -> new Maybe(Null)
[1, 2, 3, 4].find(nonInteger) -> new Maybe()

# special object
NoResultFound = new object()
[1, 2, 3, Null, 5].find(nonInteger) -> Null
[1, 2, 3, 4].find(nonInteger) -> NoResultFound 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T21:56:03.727

我认为返回 null 没有任何问题，但抛出异常似乎是最明智的选择。您最好的选择是创建您自己的自定义异常类。

无论哪种方式，代码看起来都应该差不多：

```
try {
    SearchResult someResult = searchForStuff();
}
catch ( ResultNotFoundException rnfe ) {
    /* do stuff */
}

/* almost the same as this */

SearchResult someResult = searchForStuff();

if ( someResult == null ) {
    /* do stuff */
} 
```

# javascript - Javascript将对象传递给函数问题

> ID：10036444
> 
> 赞同：-2
> 
> 时间：2012-04-05T21:41:54.457
> 
> 标签：javascript

在 javascript 中，我有一个我试图通过但不工作的对象：

```
 var inf1= { ID: "34343434" }; 
```

我喜欢在 javascript 中做的是将此对象传递给函数。我不知道该怎么做。

我有这样的调用功能

```
 function getinf(inf1)
  {
     var samp = JSON.parse(inf1);
     alert(samp.ID);
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T21:43:16.500

您`JSON.parse()`在 JSON 格式的字符串上使用。您不要在 javascript 对象上使用它。JSON 是一种文本格式。

您的`inf1`变量已经是一个 javascript 对象，因此无需解析它。

这应该可以正常工作：

```
var inf1= { ID: "34343434" };

function getinf(item)
{
    alert(item.ID);
}

getinf(inf1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:46:22.423

小心，有几件事：

`JSON.parse()`用于字符串

并传递你可以做的价值：

```
var inf1= { ID: "34343434" };
  function getinf(obj)
  {
     //code using obj...
     //you can acess obj.ID if you want
  }

getInf(inf1); //or any obj you want 
```

或者

```
var inf1= { ID: "34343434" };
function getinf()
{
   //code using inf1...
} 
```

# c#-4.0 - 如何正确实现 MediaTypeFormatter 来处理“多部分/混合”类型的请求？

> ID：10036445
> 
> 赞同：23
> 
> 时间：2012-04-05T21:41:55.477
> 
> 标签：c#-4.0, asp.net-web-api

考虑一个用 ASP.NET Web API 编写的 Web 服务，以接受任何数量的文件作为“多部分/混合”请求。辅助方法 mat 如下所示（假设`_client`是 的一个实例`System.Net.Http.HttpClient`）：

```
public T Post<T>(string requestUri, T value, params Stream[] streams)
{
    var requestMessage = new HttpRequestMessage();
    var objectContent = requestMessage.CreateContent(
        value,
        MediaTypeHeaderValue.Parse("application/json"),
        new MediaTypeFormatter[] {new JsonMediaTypeFormatter()},
        new FormatterSelector());

    var content = new MultipartContent();
    content.Add(objectContent);
    foreach (var stream in streams)
    {
        var streamContent = new StreamContent(stream);
        streamContent.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        streamContent.Headers.ContentDisposition =
            new ContentDispositionHeaderValue("form-data")
            {
                Name = "file",
                FileName = "mystream.doc"
            };
        content.Add(streamContent);
    }

    return _httpClient.PostAsync(requestUri, content)
        .ContinueWith(t => t.Result.Content.ReadAsAsync<T>()).Unwrap().Result;
} 
```

ApiController 子类中接受请求的方法有如下签名：

```
public HttpResponseMessage Post(HttpRequestMessage request)
{
    /* parse request using MultipartFormDataStreamProvider */
} 
```

理想情况下，我想这样定义它，其中联系人、源和目标是根据“Content-Disposition”标题的“名称”属性从“多部分/混合”内容中提取的。

```
public HttpResponseMessage Post(Contact contact, Stream source, Stream target)
{
    // process contact, source and target
} 
```

但是，使用我现有的签名，将数据发布到服务器会导致`InvalidOperationException`以下错误消息：

> 没有“MediaTypeFormatter”可用于读取媒体类型为“multipart/mixed”的“HttpRequestMessage”类型的对象。

互联网上有许多示例如何使用 ASP.NET Web API 和 HttpClient 发送和接收文件。但是，我还没有找到任何显示如何处理这个问题的方法。

我开始考虑实现一个自定义`MediaTypeFormatter`并将其注册到全局配置中。然而，虽然在自定义中处理 XML 和 JSON 序列化很容易`MediaTypeFormatter`，但不清楚如何处理几乎可以是任何东西的“多部分/混合”请求。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-06T04:23:41.867

看看这个论坛：[http ://forums.asp.net/t/1777847.aspx/1?MVC4+Beta+Web+API+and+multipart+form+data](http://forums.asp.net/t/1777847.aspx/1?MVC4+Beta+Web+API+and+multipart+form+data)

这是一段代码（由 imran_ku07 发布），它可以帮助您实现自定义格式化程序来处理多部分/表单数据：

```
public class MultiFormDataMediaTypeFormatter : FormUrlEncodedMediaTypeFormatter
{
    public MultiFormDataMediaTypeFormatter() : base()
    {
        this.SupportedMediaTypes.Add(new MediaTypeHeaderValue("multipart/form-data"));
    }

    protected override bool CanReadType(Type type)
    {
        return true;
    }

    protected override bool CanWriteType(Type type)
    {
        return false;
    }

    protected override Task<object> OnReadFromStreamAsync(Type type, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext)
    {
        var contents = formatterContext.Request.Content.ReadAsMultipartAsync().Result;
        return Task.Factory.StartNew<object>(() =>
        {
            return new MultiFormKeyValueModel(contents);
        });
    }

    class MultiFormKeyValueModel : IKeyValueModel
    {
        IEnumerable<HttpContent> _contents;
        public MultiFormKeyValueModel(IEnumerable<HttpContent> contents)
        {
            _contents = contents;
        }

        public IEnumerable<string> Keys
        {
            get
            {
                return _contents.Cast<string>();
            }
        }

        public bool TryGetValue(string key, out object value)
        {
            value = _contents.FirstDispositionNameOrDefault(key).ReadAsStringAsync().Result;
            return true;
        }
    }
} 
```

然后，您需要将此格式化程序添加到您的应用程序中。如果做自托管，您可以简单地添加它，包括：

```
config.Formatters.Insert(0, new MultiFormDataMediaTypeFormatter()); 
```

在实例化 HttpSelfHostServer 类之前。

**- 编辑 -**

要解析二进制流，您需要另一个格式化程序。这是我在我的一个工作项目中用来解析图像的一个。

```
class JpegFormatter : MediaTypeFormatter
{
    protected override bool CanReadType(Type type)
    {
        return (type == typeof(Binary));
    }

    protected override bool CanWriteType(Type type)
    {
        return false;
    }

    public JpegFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("image/jpeg"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("image/jpg"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("image/png"));
    }

    protected override Task<object> OnReadFromStreamAsync(Type type, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext)
    {
        return Task.Factory.StartNew(() =>
            {
                byte[] fileBytes = new byte[stream.Length];
                stream.Read(fileBytes, 0, (int)fileBytes.Length);

               return (object)new Binary(fileBytes);
            }); 
    }

    protected override Task OnWriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext, TransportContext transportContext)
    {
        throw new NotImplementedException();
    }
} 
```

在您的控制器/动作中，您需要执行以下操作：

```
public HttpResponseMessage UploadImage(Binary File) {
 //do something with your file
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-24T08:40:46.033

看看这篇文章[https://stackoverflow.com/a/17073113/1944993](https://stackoverflow.com/a/17073113/1944993) Kiran Challa 的回答真的很好！

必不可少的部分：

自定义内存 MultiaprtFormDataStreamProvider：

```
 public class InMemoryMultipartFormDataStreamProvider : MultipartStreamProvider
{
    private NameValueCollection _formData = new NameValueCollection();
    private List<HttpContent> _fileContents = new List<HttpContent>();

    // Set of indexes of which HttpContents we designate as form data
    private Collection<bool> _isFormData = new Collection<bool>();

    /// <summary>
    /// Gets a <see cref="NameValueCollection"/> of form data passed as part of the multipart form data.
    /// </summary>
    public NameValueCollection FormData
    {
        get { return _formData; }
    }

    /// <summary>
    /// Gets list of <see cref="HttpContent"/>s which contain uploaded files as in-memory representation.
    /// </summary>
    public List<HttpContent> Files
    {
        get { return _fileContents; }
    }

    public override Stream GetStream(HttpContent parent, HttpContentHeaders headers)
    {
        // For form data, Content-Disposition header is a requirement
        ContentDispositionHeaderValue contentDisposition = headers.ContentDisposition;
        if (contentDisposition != null)
        {
            // We will post process this as form data
            _isFormData.Add(String.IsNullOrEmpty(contentDisposition.FileName));

            return new MemoryStream();
        }

        // If no Content-Disposition header was present.
        throw new InvalidOperationException(string.Format("Did not find required '{0}' header field in MIME multipart body part..", "Content-Disposition"));
    }

    /// <summary>
    /// Read the non-file contents as form data.
    /// </summary>
    /// <returns></returns>
    public override async Task ExecutePostProcessingAsync()
    {
        // Find instances of non-file HttpContents and read them asynchronously
        // to get the string content and then add that as form data
        for (int index = 0; index < Contents.Count; index++)
        {
            if (_isFormData[index])
            {
                HttpContent formContent = Contents[index];
                // Extract name from Content-Disposition header. We know from earlier that the header is present.
                ContentDispositionHeaderValue contentDisposition = formContent.Headers.ContentDisposition;
                string formFieldName = UnquoteToken(contentDisposition.Name) ?? String.Empty;

                // Read the contents as string data and add to form data
                string formFieldValue = await formContent.ReadAsStringAsync();
                FormData.Add(formFieldName, formFieldValue);
            }
            else
            {
                _fileContents.Add(Contents[index]);
            }
        }
    }

    /// <summary>
    /// Remove bounding quotes on a token if present
    /// </summary>
    /// <param name="token">Token to unquote.</param>
    /// <returns>Unquoted token.</returns>
    private static string UnquoteToken(string token)
    {
        if (String.IsNullOrWhiteSpace(token))
        {
            return token;
        }

        if (token.StartsWith("\"", StringComparison.Ordinal) && token.EndsWith("\"", StringComparison.Ordinal) && token.Length > 1)
        {
            return token.Substring(1, token.Length - 2);
        }

        return token;
    }} 
```

然后，您可以像这样在 webapi 中使用“MemoryMultiPartDataStreamProvider”：

```
var provider = await Request.Content.ReadAsMultipartAsync<InMemoryMultipartFormDataStreamProvider>(new InMemoryMultipartFormDataStreamProvider());

    //access form data
    NameValueCollection formData = provider.FormData;

    //access files
    IList<HttpContent> files = provider.Files; 
```

# c# - 模仿 IS IN 的 LINQ 查询

> ID：10036448
> 
> 赞同：0
> 
> 时间：2012-04-05T21:41:56.397
> 
> 标签：c#, linq, linq-to-entities, ef-code-first

所以我有这个 linq 查询子句。

```
var ctx = new Context();
IQueryable<Users> consulta = ctx.Users;

if ( filters.Count > 0 )
   query = query.Where( p => filters.Contains(p.Name) || 
                             filters.Contains(p.LastName) ); 
```

**过滤器**

是一个包含无序姓名和姓氏的字符串列表（不必完整）。例如：过滤 {Mary, Joseph Ken} 但 DB {Mary Katie, Joseph Kendall}。

**预期成绩**

对于以前的过滤器，我希望查询返回用户列表，无论过滤器中的名称和姓氏是否不完整但正确。因此，如果过滤器有“Mary”，它必须找到带有“Mary Katie”的数据库记录，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:00:06.217

我认为你想要的是一个过滤器

```
Bob
Alice
Jane 
```

和查询中的项目，例如

```
Bob Nob
Alice Howzer
Jane Bob
Tim 
```

你会得到

```
Bob Nob
Alice Howzer
Jane Bob 
```

因为过滤器匹配名字或姓氏的任何部分，对吗？

为什么不向您的集合添加一个扩展方法来执行类似的操作

```
public static bool IsInAny(this IEnumerable<String> source, string name, string delim = " ")
{
    return source.Any(item =>
                          {
                             var splits = name.Split(new[] { delim }, StringSplitOptions.RemoveEmptyEntries);
                             return splits.Contains(item);
                          });
} 
```

这是一个可以用来测试它的测试

```
[Test]
public void TestInAny()
{
    var filters = new[] {"Bob", "Alice"};
    var items = new[] {"Bob Knob", "Alice Jane", "Tim"};

    var found = items.Where(i => filters.IsInAny(i)).ToList();
} 
```

显然这只是一种快速而肮脏的方式，并且有更干净的方式来做，但至少现在你已经封装了逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:04:25.290

您可以使用 mix of[`String.Contains`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)和`Any`来解决 linq2entity 中的问题，而无需从 DB 中获取额外数据：

```
var ctx = new Context();
IQueryable<Users> consulta = ctx.Users;

if ( filters.Count > 0 )
   query = query.Where( p => filters.Any(x=>x.Contains(p.Name)) || 
                             filters.Any(x=>x.Contains(p.LastName)) ||
                             filters.Any(x=>p.Name.Contains(x)) || 
                             filters.Any(x=>p.LastName.Contains(x))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:27:23.860

也许沿着这些思路？我还没有实际测试过，所以买家要小心。

```
public static bool IsIn(this string value, IEnumerable<string> compareList)
{
   foreach (string compareValue in compareList)
   {
        if (value.Contains(compareValue))
                return true;
   }
        return false;
} 
```

# objective-c - 如何获得游戏中心成就说明

> ID：10036449
> 
> 赞同：1
> 
> 时间：2012-04-05T21:42:17.827
> 
> 标签：objective-c, xcode4

如何将游戏中心成就描述放入 NSString？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:56:40.307

Apple 使用这个简单的块方法为您提供了非常好的服务：

```
- (void) retrieveAchievmentMetadata {
[GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:
    ^(NSArray *descriptions, NSError *error) {
        if (error != nil)
            // process the errors
        if (descriptions != nil)
            // use the achievement descriptions.
    }];
} 
```

然后，您可以从 descriptions 数组中提取 NSStrings。

这里有关于这个主题的更多文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Achievements/Achievements.html](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Achievements/Achievements.html)

我希望这有帮助！

# visual-studio-2010 - 将多个语句包装在大括号中

> ID：10036450
> 
> 赞同：19
> 
> 时间：2012-04-05T21:42:18.183
> 
> 标签：visual-studio-2010, resharper, curly-braces, curly-brackets

Visual Studio 2010 中是否有键盘快捷键（我也在使用 ReSharper 6.1），可以让我用花括号包围选定的文本块？我尝试**了“Surround With...”** （Ctrl+K、Ctrl+S），但我没有在列表中看到选择花括号作为周围元素的选项。常见的用例是我将有一个如下的 if 语句：

```
if (conditional)
    statement1;
// the rest of the program 
```

我会意识到在 if 语句中需要执行一些额外的任务，我添加了它们：

```
if (conditional)
    statement1;
    statement2;
    statement3;
// the rest of the program 
```

然后，我记得我需要将所有语句包装在花括号中，代码应该看起来像这样：

```
if (conditional)
{
    statement1;
    statement2;
    statement3;
}
// the rest of the program 
```

我想做的只是选择这三个语句，然后点击快捷键将它们包装在花括号中。我实际上最终做的是将光标移动到条件之后的行首，然后输入一个 { 字符，然后删除 ReSharper（无济于事）在 { 之后立即自动插入的 } 字符，然后将光标向下移动到结束块的最后一条语句并输入 } 以完成该块。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-05T21:54:09.627

选择代码行。

按 Ctrl EU（使用模板环绕）（或 Ctrl Alt J 用于 Intelli J）。

选择选项 7：{ }。

为我工作。

# r - 绘制一定范围内的拟合线 R

> ID：10036452
> 
> 赞同：17
> 
> 时间：2012-04-05T21:42:28.920
> 
> 标签：r, plot, lm, par

使用 R，我想绘制两个变量之间的线性关系，但我希望拟合线仅存在于数据范围内。

例如，如果我有以下代码，我希望这条线仅存在于 1:10 的 x 和 y 值（使用默认参数，这条线超出了数据点的范围）。

```
x <- 1:10
y <- 1:10
plot(x,y)
abline(lm(y~x)) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-06T16:35:34.877

除了使用`predict`with `lines`or之外，`segments`您还可以使用with`clip`函数`abline`：

```
x <- 1:10
y <- 1:10
plot(x,y)
clip(1,10, -100, 100)
abline(lm(y~x)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-05T21:53:36.377

代替使用`abline()`，(a) 保存拟合模型，(b) 使用`predict.lm()`找到对应于 x=1 和 x=10 的拟合 y 值，然后 (c) 使用`lines()`在两点之间添加一条线：

```
f <- lm(y~x)
X <- c(1, 10)
Y <- predict(f, newdata=data.frame(x=X))

plot(x,y)
lines(x=X, y=Y) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-05T22:05:25.387

您可以使用预测来做到这一点。

您可以预测 x 的特定值（请参阅 ?predict）

```
x<-1:10
y<-1:10
plot(x,y)
new <- data.frame(x = seq(1, 5, 0.5))
lines(new$x, predict(lm(y~x), new)) 
```

![在此处输入图像描述](../Images/92b581f2ec2f705636bd38b2906c9551.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-15T16:45:22.307

plotrix 库具有以下`ablineclip()`功能：

```
x <- 1:10
y <- 1:10
plot(x,y)
ablineclip(lm(y~x),x1=1,x2=5) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-17T10:47:09.770

另一种方法是使用该功能（[此处](https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/segments.html)`segments`的文档）。

假设你估计了这条线，你得到了 的截距`a`和 的斜率`b`。因此，您的拟合函数是`y = a + bx`。

现在，假设您想在`x0`和之间显示 x 的线`x1`。然后，以下代码绘制您的行：

```
# inputs

a <- 0.5
b <- 2

x0 <- 1
x1 <- 5

# graph

plot(c(0,5), c(0,5), type = "n", xlab = "", ylab = "", bty='l')
segments(x0, a+b*x0, x1, a+b*x1) 
```

**只需将 的值替换** `a, b, x0, x1` **为您选择**的值即可。

[![在此处输入图像描述](../Images/111952337d1010a647d70adc903c218d.png)](https://i.stack.imgur.com/e3nTl.png)

* * *

对于像我这样想为任意一对数字（而不是适合给定回归的数字）绘制一条线的人来说，您需要以下代码：

```
plot(c(0,5), c(0,5), type = "n", xlab = "", ylab = "", bty='l')
segments(x0, yo, x1, y1) 
```

**只需将 的值替换** `x0, y0, x1, y1` **为您选择**的值即可。

# css - IE 不应用样式

> ID：10036454
> 
> 赞同：7
> 
> 时间：2012-04-05T21:42:40.070
> 
> 标签：css, internet-explorer, styles, stylesheet

我在登台环境中将多个样式表编译为一个最小样式表样式在 IE 中本地应用，其中每个样式表都是独立的，但它们没有应用于 IE 中的登台环境，其中样式表被编译为一个最小样式表。我已经通过 CSS 验证器运行样式表，并检查了每个样式表并更正了我发现的任何语法错误。我不一定需要知道如何解决问题，我主要是想知道问题出在哪里。IE 开发者工具没有给我任何关于样式没有被应用的问题的反馈。

这是登台环境中登录页面的链接：[https](https://s-app.joinhere.com/manage/sessions/new) ://s-app.joinhere.com/manage/sessions/new 。样式在样式表中，只是没有在 IE 中应用。这是编译后的最小样式表的链接：[https ://staging.joinhere.com/assets/manage-d4f70cefc93b170b5f2a04509db697c8.css](https://staging.joinhere.com/assets/manage-d4f70cefc93b170b5f2a04509db697c8.css)

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T22:37:18.840

我试过你的页面，它在 Chrome 中运行良好。但是，正如您所描述的，它在 IE9 中看起来很奇怪，好像没有应用 CSS 样式。例如，样式`body#manage-sessions #main_container #login_container`未得到应用。我查看了开发人员工具中的 css 选项卡，结果发现样式甚至不存在，这解释了它是如何不起作用的。为了找出原因，我使用了开发人员工具中的网络检查器，并检查了 IE9 下载 css 时的响应，样式`body#manage-sessions #main_container #login_container`确实在响应中。这让我相信 IE 的最大 css 文件大小必须有一些限制。看来这确实是[这里描述的情况](http://neopatel.blogspot.com/2010/07/ie-css-size-limit.html). 显然，如果 css 文件超过一定大小，IE 会简单地忽略其他样式。因此，这就解释了为什么当 css 文件分开时一切都可以正常工作，以及为什么在组合它们后事情会分崩离析。要解决此问题，请尝试将您的大型 css 文件拆分为 2 个或更多低于 IE 限制的较小的文件，看看这是否能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T04:39:45.527

我不确定您的个人设置，但是，任何 < IE 10 都只能处理 32 个单独的样式表，之后的任何内容都会像它的工作一样出现在开发工具中，但请放心，33 样式表致力于无声的生活失败。

# python - Python：在主线程之外设置警报

> ID：10036461
> 
> 赞同：2
> 
> 时间：2012-04-05T21:43:49.667
> 
> 标签：python, signals, alarm

我知道您可以使用`signal.alarm()`在主线程中安排警报，但是有没有办法在不是您的主线程的线程中执行类似的操作，因为这些线程无法接收信号？我需要安排一些事情在未来 5 分钟内发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:09:24.077

使用`Timer`而不是信号。处理信号会打开很多蠕虫罐头，所以你应该尽可能避免它。在这种情况下，听起来你可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:57:36.930

您可以使用 threading.Event 通知您的线程有关事件。看看 threading.Timer 。

# unit-testing - 在测试运行中忽略静默标志

> ID：10036463
> 
> 赞同：2
> 
> 时间：2012-04-05T21:43:54.587
> 
> 标签：unit-testing, prolog, swi-prolog, plunit

我目前正在尝试使用[PlUnit](http://www.swi-prolog.org/pldoc/doc_for?object=section%280,%270%27,swi%28%27/doc/packages/plunit.html%27%29%29)测试套件，但在测试期间遇到了关闭谓词输出的问题。

[文档](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%276%27,swi%28%27/doc/packages/plunit.html%27%29%29)说我应该对类似的东西没问题`set_test_options([silent(true)]).`，但这似乎对我的测试运行没有任何影响。

我也尝试将这些选项放入我的`load_test_files/1`通话中，但它并没有改变任何东西。

如果有人可以提供有关此库的帮助，将不胜感激，因为我似乎误解了文档，并且在尝试查看此处失败的内容时无处可去。

# vb.net - 部署 VB.NET 程序在同一文件夹中找不到 dll

> ID：10036464
> 
> 赞同：1
> 
> 时间：2012-04-05T21:43:59.747
> 
> 标签：vb.net, deployment, dll

我在 VB.NET 中编写了一个程序，它使用了几个我用 c++ 编写的 .dll。dll 包装了旧版本程序中的一些功能。在我的开发计算机上一切正常，但我构建了一个发布版本，将它和 dll 复制到目标机器上，.exe 启动正常。当程序尝试使用 .dll 中的函数时，它会抛出异常并显示“无法加载 DLL”c:/the path/my.dll”，找不到指定的模块。”

我不知道它是否有任何区别，但我在主 vb 项目中使用以下方法定义 dll 函数：

```
Declare Function MyFunction Lib "c:/the path/my.dll" (ByVal in1 as Double, ByRef out1 as Double) as Integer 
```

我检查了目标上的 .net 框架，版本 4 似乎与开发计算机安装相同。两者都是windows XP机器。我不知道这是我编写 .dll 的方式，还是我的 vb.net 项目的方式。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:46:56.747

使用相对于您的可执行文件的路径，而不是绝对路径。

或者，更好的是，根本不使用路径，只列出 dll 文件的名称。然后将 dll 作为资源添加到您的项目中。然后，您应该能够轻松地将设置项目捆绑在内部，它们将自动在正确的位置进行调试和部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-30T21:18:14.483

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T16:11:19.640

找到了一个指向同样问题的[CodeProject 页面的链接。](http://www.codeproject.com/Questions/287555/Program-cant-find-dll-file)

基本上，您需要检查 DLL 文件的所有依赖项在运行位置是否可用。使用 Microsoft Dependency Walker 使我找到了解决方案，即我的 VB 应用程序中使用的一个 dll 文件引用了一个不同的 dll 文件。将其他 DLL 与其他运行文件一起放置后，不再出现错误！

# jquery - jQuery Spinner 控件出现在文本框下方

> ID：10036465
> 
> 赞同：2
> 
> 时间：2012-04-05T21:44:00.760
> 
> 标签：jquery, jquery-plugins

我正在使用这里找到的 jQuery 微调器工具：

[http://btburnett.com/spinner/example/example.html](http://btburnett.com/spinner/example/example.html)

当我尝试使用它时，微调器控件出现在文本框下方。谁能解释一下这个？我有一个例子说明这里发生了什么：

[http://jsfiddle.net/brandonnicoll/bMUtt/](http://jsfiddle.net/brandonnicoll/bMUtt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:48:36.857

您还需要链接`ui.spinner.css`文件。

检查此小提琴中的资源：http: [//jsfiddle.net/bMUtt/17/](http://jsfiddle.net/bMUtt/17/)

以下是 的内容`ui.spinner.css`：

```
.ui-spinner {position: relative}
.ui-spinner-buttons {position: absolute}
.ui-spinner-button {overflow: hidden} 
```

# sql-server - ssrs 中的目录

> ID：10036466
> 
> 赞同：1
> 
> 时间：2012-04-05T21:44:13.863
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2

我正在寻找有关如何在 ssrs 报告中构建目录的教程或建议，如下所示：

![在此处输入图像描述](../Images/ed8a4c8bf15b41eeaa6d5e6bfcb224c6.png)

我快到了，唯一的问题是我无法弄清楚如何计算表格中行的页码。可以用书签完成吗？或者可能是文档地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:24:09.457

我不相信这在 SSRS 中是可能的（在报告的正文部分导出连续的页码），因为页码仅在页眉中有效。

但是，您可以使用每个报表对象的页面名称属性来生成节号，并将其与在每个节的开头重置页码相结合，以便每个节始终从第*n* .1 页开始。

因此，您的内容页面可能如下所示：

```
Table of Contents

Submission ............... 1.1

Preface .................. 2.1

Executive Summary ........ 3.1

...

Appendices

          A.  Populations and Trends ....... A.1

          B.  Land Use Data ................ B.1
... 
```

# android - Android TableLayout 不垂直滚动

> ID：10036476
> 
> 赞同：5
> 
> 时间：2012-04-05T21:45:14.477
> 
> 标签：android, android-layout

提前感谢您的帮助。我对 Android 很陌生。

这是我的问题。我正在使用 TableLayout 来显示可编辑的字段。大约有二十行要显示。

在较小的设备上，这些行会溢出屏幕。我需要视图来允许用户上下滚动。我错过了什么？

尝试将 TableLayout 包装在 ScrollView 中，但没有成功。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T07:58:28.823

把你的`TableLayout`里面`ScrollView`

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableLayout
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

            </TableRow>

        </TableLayout>

    </ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:08:09.127

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <requestFocus />
            </EditText>

        </TableRow>

        <TableRow
            android:id="@+id/tableRow12"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText15"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

        </TableRow>

    </TableLayout>

</ScrollView> 
```

但是用 a`listView`代替怎么样？

# django - 使用具有动态值的 MaxValueValidator 进行 Django 表单验证

> ID：10036478
> 
> 赞同：2
> 
> 时间：2012-04-05T21:45:23.157
> 
> 标签：django, validation, datetime

我有一个将开始日期和结束日期作为输入的表单。我需要设置有效范围，但这取决于另一个字段，站点。像这样：

```
class GraphForm(forms.Form):
    site = forms.ChoiceField(choices=SITE_CHOICES, label=ugettext_lazy('Site'),
                widget=forms.Select(attrs={"onChange":'filterField()'})
                )
    startdate = forms.DateField(
                label=ugettext_lazy('Start Date'),
                validators=[MaxValueValidator(maxdate)], 
                )
    enddate = forms.DateField(
                label=ugettext_lazy('End Date'),
                validators=[MaxValueValidator(maxdate)], 
                )
    ... 
```

`maxdate`但我只能在选择站点时获得一个值：

```
getdate = Reports.objects.filter(site=site_name).values('recorded_on').order_by('-recorded_on')[:1]
maxdate = getdate[0]['recorded_on'] 
```

我的问题是如何实现此功能 - 我获取站点输入，然后在表单验证之前生成我的 maxdate 值。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:44:20.270

您不能在字段定义中执行此操作，因为每个字段都是单独验证的。但是，您可以为您的表单编写一个[自定义的清理方法](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)，为您检查开始日期和结束日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T23:37:40.743

您可以编写一个动态验证类，即一个不采用常量而是一个将在验证期间调用的函数的类。

```
from django.core.validators import MaxValueValidator
from django.core.exceptions import ValidationError

class DynamicMaxValueValidator(MaxValueValidator):
    def __call__(self, value):
        cleaned = self.clean(value)
        params = {'limit_value': self.limit_value(), 'show_value': cleaned}
        if self.compare(cleaned, self.limit_value()):
            raise ValidationError(
                self.message % params,
                code=self.code,
                params=params,
                )

def maxdate():
    getdate = Reports.objects.filter(site=site_name).values('recorded_on').order_by('-recorded_on')[:1]
    return getdate[0]['recorded_on']

class GraphForm(forms.Form):
    site = forms.ChoiceField(choices=SITE_CHOICES, label=ugettext_lazy('Site'),
                widget=forms.Select(attrs={"onChange":'filterField()'})
                )
    startdate = forms.DateField(
                label=ugettext_lazy('Start Date'),
                validators=[DynamicMaxValueValidator(maxdate)], 
                )
    enddate = forms.DateField(
                label=ugettext_lazy('End Date'),
                validators=[DynamicMaxValueValidator(maxdate)], 
                )
    ... 
```

请注意，您不能在初始化期间调用该函数（创建 DynamicMaxValueValidator 时 maxdate 后面没有括号）

# applescript - 在 Leopard 10.5.8 中调整图像大小的文件夹操作

> ID：10036481
> 
> 赞同：1
> 
> 时间：2012-04-05T21:45:35.600
> 
> 标签：applescript, directory

我对 AppleScript 一无所知，所以请原谅我。

目标是创建一个文件夹，我们的图形人员可以将库存照片放入其中并将其大小调整为 1280。所选文件夹是网络文件夹，所以不知道这是否是问题的一部分。他将从他的*Windows*工作站将图像粘贴到文件夹中。

到目前为止，这是我拼凑起来的：

```
on adding folder items to this_folder after receiving added_items
    repeat with this_item in added_items
        try
            rescale_and_save(this_item)
        end try
    end repeat
end adding folder items to

to rescale_and_save(this_item)
    tell application "Image Events"
        launch
        set the target_height to 1280
        -- open the image file
        set this_image to open this_item

        set typ to this_image's file type

        copy dimensions of this_image to {current_width, current_height}
        if current_height is greater than current_width then
            scale this_image to size target_height
        else
            -- figure out new height
            -- y2 = (y1 * x2) / x1
            set the new_width to (current_width * target_height) / current_height
            scale this_image to size new_width
        end if

        tell application "Finder" to set new_item to ¬
            (container of this_item as string) & "ex" & (name of this_item)
        save this_image in new_item as typ

    end tell
end rescale_and_save 
```

我已右键单击文件夹，启用文件夹操作，并添加了我的脚本。我复制了测试文件，但没有任何反应。

有任何想法吗？

编辑：

我查看了示例并想出了以下有效的脚本！：

```
property done_foldername : "Scaled Images"
property target_height : 1280
-- the list of file types which will be processed 
-- eg: {"PICT", "JPEG", "TIFF", "GIFf"} 
property type_list : {"JPEG", "TIFF", "PNGf"}
-- since file types are optional in Mac OS X, 
-- check the name extension if there is no file type 
-- NOTE: do not use periods (.) with the items in the name extensions list 
-- eg: {"txt", "text", "jpg", "jpeg"}, NOT: {".txt", ".text", ".jpg", ".jpeg"} 
property extension_list : {"jpg", "jpeg", "tif", "tiff", "png"}

on adding folder items to this_folder after receiving these_items
    -- CHECK FOR THE DESTINATION FOLDER WITHIN THE ATTACHED FOLDER
    -- IF IT DOESN'T EXIST, THEN CREATE IT
    tell application "Finder"
        if not (exists folder done_foldername of this_folder) then
            make new folder at this_folder with properties {name:done_foldername}
            set current view of container window of this_folder to list view
        end if
        set the target_folder to folder done_foldername of this_folder
    end tell
    -- PROCESS EACH OF THE ITEMS ADDED TO THE ATTACHED FOLDER
    try
        repeat with i from 1 to number of items in these_items
            set this_item to item i of these_items
            set the item_info to the info for this_item
            -- CHECK TO SEE IF THE ITEM IS AN IMAGE FILE OF THE ACCEPTED FILE TYPE
            if (alias of the item_info is false and the file type of the item_info is in the type_list) or (the name extension of the item_info is in the extension_list) then
                tell application "Finder"
                    -- LOOK FOR EXISTING MATCHING ITEMS IN THE DESTINATION FOLDER
                    -- IF THERE ARE MATCHES, THEN RENAME THE CONFLICTING FILES INCREMENTALLY
                    my resolve_conflicts(this_item, target_folder)
                    -- MOVE THE ITEM TO THE DESTINATION FOLDER
                    set the target_file to (move this_item to the target_folder with replacing) as alias
                end tell
                -- PROCESS THE ITEM
                process_item(target_file)
            end if
        end repeat
    on error error_message number error_number
        if the error_number is not -128 then
            tell application "Finder"
                activate
                display dialog error_message buttons {"Cancel"} default button 1 giving up after 120
            end tell
        end if
    end try
end adding folder items to

on resolve_conflicts(this_item, target_folder)
    tell application "Finder"
        set the file_name to the name of this_item
        if (exists document file file_name of target_folder) then
            set file_extension to the name extension of this_item
            if the file_extension is "" then
                set the trimmed_name to the file_name
            else
                set the trimmed_name to text 1 thru -((length of file_extension) + 2) of the file_name
            end if
            set the name_increment to 1
            repeat
                set the new_name to (the trimmed_name & "." & (name_increment as string) & "." & file_extension) as string
                if not (exists document file new_name of the target_folder) then
                    -- rename to conflicting file
                    set the name of document file file_name of the target_folder to the new_name
                    exit repeat
                else
                    set the name_increment to the name_increment + 1
                end if
            end repeat
        end if
    end tell
end resolve_conflicts

-- this sub-routine processes files 
on process_item(this_item)
    -- NOTE that the variable this_item is a file reference in alias format 
    -- FILE PROCESSING STATEMENTS GOES HERE 
    try
        -- convert alias reference to string
        set this_item to this_item as string
        with timeout of 900 seconds
            tell application "Image Events"
                launch -- always use with Folder Actions
                set this_image to open file this_item
                scale this_image to size target_height
                save this_image with icon
                close this_image
            end tell
        end timeout
    on error error_message
        tell application "Finder"
            activate
            display dialog error_message buttons {"Cancel"} default button 1 giving up after 120
        end tell
    end try
end process_item 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:05:53.827

我刚刚在放入 1 张图像的文件夹上测试了您的脚本，结果发现它反复运行，因为生成的（调整大小的）图像也被添加到该文件夹​​中。这是几秒钟后的样子，在我打断它之前：

![递归图像](../Images/4af3efae5d9e6fc36706e3cc2465f86e.png)

您应该看看里面的默认图像处理脚本`/Library/Scripts/Folder Action Scripts`，也许可以使用其中一个作为模板。它们基本上使用处理后的图像的子文件夹，并且还包含一些可能有用的文件名冲突解决功能。

# php - 清除 div 内容

> ID：10036482
> 
> 赞同：0
> 
> 时间：2012-04-05T21:45:37.077
> 
> 标签：php, jquery, mysql

```
$(function() {
    setInterval(function() {
        $.get("refresh.php", function(result) {
            $('#response').empty()
            .hide()
            .html(result)
            $("#response").append(result)
            .fadeIn("slow");
        });
    }, 5000);
}); 
```

实际上我的脚本在 refresh.php 中每 5 秒点击一次 refresh.php**我**从 mysql db 获取数据并创建一个模板，如：

```
<table>
<tr><td>Name<td><td>$fetch['name']</td></tr>
</table> 
```

我在萤火虫上检查了我的 refresh.php 在 5 秒后仅发送一次响应，但在所有浏览器上它显示了两次结果，例如：

```
<table>
    <tr><td>Name<td><td>$fetch['name']</td></tr>
    </table>
<table>
    <tr><td>Name<td><td>$fetch['name']</td></tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:48:08.313

它显示了两次结果，因为您将其放在那里两次：首先 using [`html`](http://api.jquery.com/html)，然后 using [`append`](http://api.jquery.com/append)：

```
$(function() {
    setInterval(function() {
        $.get("refresh.php", function(result) {
            $('#response').empty()
            .hide()
            .html(result)                 // <==== Here
            $("#response").append(result) // <==== And here
            .fadeIn("slow");
        });
    }, 5000);
}); 
```

`html``empty`用您提供的标记（或元素[s]）替换元素的内容（在使用之前不需要）。将您提供的标记（或元素[s]）`append` *附加到元素。*

你想要一个或另一个。我会去`html`：

```
$(function() {
    setInterval(function() {
        $.get("refresh.php", function(result) {
            $('#response')
                .hide()
                .html(result)
                .fadeIn("slow");
        });
    }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T21:50:19.653

使用以下

```
$.get("refresh.php", function(result) {

    $("#response").html(result);
}); 
```

# python - 获取 Jinja2 模板中所有块的字典

> ID：10036484
> 
> 赞同：2
> 
> 时间：2012-04-05T21:45:39.370
> 
> 标签：python, jinja2

假设我有一些 Jinja2 模板，里面有几个块：

```
{% block A %}Blah{% endblock %}
{% block B %}whatever{% endblock %}
{% block C %}you get the idea{% endblock %} 
```

我想要一个 Python 函数，它将它变成一个 dict（或 JSON，或其他），每个块都有一个条目。所以输出会是这样的：

```
{'A': 'Blah', 'B': 'whatever', 'C': 'you get the idea'} 
```

有没有既定的方法来做到这一点？

我问是因为我想通过 AJAX 更新我的应用程序页面，而不是在保持向后兼容性的同时重新加载。如果我可以解析我的 Jinja2 模板块，那么我可以使用完全相同的模板文件轻松生成整个页面或部分页面。所以，作为一个辅助问题......有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T03:06:06.813

您可以签出`[Template.blocks](http://jinja.pocoo.org/docs/api/#jinja2.Template.blocks)`字段。它具有块渲染功能的字典。

当使用上下文（我猜）作为参数调用块渲染函数时，它会返回生成器。

我希望以下代码片段对您有所帮助。

```
    对于 key，在 template.blocks.iteritems() 中的 blockfun：
        打印键, ':', ''.join(blockfun({}))

```

结果是：

```
    答：废话
    C：你明白了
    B：随便

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T03:10:04.330

这似乎有效：

```
from jinja2 import Template
from jinja2.utils import concat

t = """{% block A %}Blah{% endblock %}
{% block B %}whatever {{ a }}{% endblock %}
{% block C %}you get the idea{% endblock %}
"""

template = Template(t)
context = template.new_context({'a': 'AAAAAAAA'})
A = concat(template.blocks['A'](context))
B = concat(template.blocks['B'](context))
C = concat(template.blocks['C'](context))

print A
print B
print C 
```

这给了我在三个单独的变量中渲染的三个块中的每一个。

# c# - WPF 中静态组合框的简单值/索引

> ID：10036486
> 
> 赞同：0
> 
> 时间：2012-04-05T21:45:51.740
> 
> 标签：c#, wpf

所以我只想制作一个简单的组合框，它有 2 个值，真和假。关键是我要绑定的项目应该收到一个“1”表示真，一个“0”表示假。如果可能的话，我正在尝试使用纯 xaml 来完成（转换器是可以接受的，但我因此无法让它工作）。这是我的代码...

```
 <ComboBox SelectedItem="{Binding Criteria,Converter={StaticResource BoolToIntConverter}}">
                <ComboBox.Items>
                    <ComboBoxItem Name="True" Content="True" />
                    <ComboBoxItem Name="False" Content="False" />
                </ComboBox.Items>
            </ComboBox> 
```

转换器看起来像这样......

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        ComboBoxItem cbo = new ComboBoxItem();

        if (value.ToString() == "1")
            cbo.Name = "True";
        else
            cbo.Name = "False";
        return cbo;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value.ToString().Contains("True"))
            return 1;
        return 0;
    } 
```

它的工作原理是，如果我选择正确“1”设置正确，反之亦然，但是如果代码中的另一个位置将属性更改为 1 或 0，它还需要将当前项目设置为 True / False。Inotifyproperty changed 已在绑定字符串上正确设置，我可以中断被调用的隐蔽点，但该项目不会改变。有没有一种简单的方法可以在纯 xaml 中与组合框建立值/索引关系（我不想使用支持对象来实现这一点）。如果没有，有没有办法纠正我的转换器以获得我正在寻找的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:17:49.430

可以在复选框上应用控件模板以使其显示为组合框。如何在 XAML 中完成此操作的示例如下：

```
<CheckBox Content="Select" Width="100" Height="22">
        <CheckBox.Style>
            <Style TargetType="{x:Type CheckBox}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <ComboBox>
                                <ComboBoxItem x:Name="TrueComboBoxItem" Content="True" IsSelected="{Binding IsChecked, RelativeSource={RelativeSource AncestorType=CheckBox}, UpdateSourceTrigger=PropertyChanged}" />
                                <ComboBoxItem x:Name="FalseComboBoxItem" Content="False" />

                            </ComboBox>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>                     
        </CheckBox.Style>
    </CheckBox> 
```

我已经在 Snoop 中验证了它的工作原理。

[窥探](http://snoopwpf.codeplex.com)

# ruby-on-rails - 交易加速处理

> ID：10036488
> 
> 赞同：0
> 
> 时间：2012-04-05T21:46:01.013
> 
> 标签：ruby-on-rails, ruby, transactions

当我看到这段代码时，我正在阅读使用 Rails 进行敏捷 Web 开发：

```
Order.transaction do (1..100).each do |i|
    Order.create(:name => "Customer #{i}", :address => "#{i} Main Street",
      :email => "customer-#{i}@example.com", :pay_type => "Check")
end end 
```

作者说：“请注意，此代码在一个事务中完成所有这些工作。这不是此活动所必需的，但确实加快了处理速度”。

所以我的问题是，为什么事务会加快这段代码的处理速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:30:38.527

在这两种情况下，您的 Rails 应用程序都会创建 100 个单独的 INSERT 语句，但如果您没有显式创建事务，则每个更新/插入都位于其自己的事务中。事务应该是 ACID，特别是 D 代表持久性：一旦事务被提交，即使在 1 纳秒后发生电源故障，也有硬保证它已成功写入磁盘。

因此，提交事务需要刷新写入，这具有固有成本（这可以通过正确类型的 RAID 硬件来缓解）。另一方面，当您处于一个大事务的中间时，数据库没有义务在单个插入之后刷新写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:50:46.160

因为您在与数据库的一次交互中发生了 100 个创建，而不是 100 个单独的交互。对 db 的访问越少通常越快，因为您降低了与通信相关的成本。

# python - 将文件复制到新位置并增加文件名，python

> ID：10036489
> 
> 赞同：1
> 
> 时间：2012-04-05T21:46:03.813
> 
> 标签：python, auto-increment

我在尝试着：

1.  遍历一堆文件
2.  做出一些改变
3.  将旧文件复制到子目录。这是踢球者，如果新目录中的文件已经存在，我不想覆盖它。（例如，如果“Filename.mxd”已经存在，则复制并重命名为“Filename_1.mxd”。如果“Filename_1.mxd”存在，则将文件复制为“Filename_2.mxd”等等...）
4.  保存文件（但要保存，而不是保存，以便覆盖现有文件）

它是这样的：

```
for filename in glob.glob(os.path.join(folderPath, "*.mxd")):
    fullpath = os.path.join(folderPath, filename)

    mxd = arcpy.mapping.MapDocument(filename)

    if os.path.isfile(fullpath):
        basename, filename2 = os.path.split(fullpath)

    # Make some changes to my file here

    # Copy the in memory file to a new location. If the file name already exists, then rename the file with the next instance of i (e.g. filename + "_" + i)

    for i in range(50):
        if i > 0:
            print "Test1"
            if arcpy.Exists(draftloc + "\\" + filename2) or arcpy.Exists(draftloc + "\\" + shortname + "_" + str(i) + extension):
                print "Test2"
                pass
            else:
                print "Test3"
                arcpy.Copy_management(filename2, draftloc + "\\" + shortname + "_" + str(i) + extension)
    mxd.save() 
```

因此，我决定做两件事，就是将文件范围设置为远远超出我预期的范围（50）。我确信有更好的方法来做到这一点，只需递增到下一个数字而不设置范围。

如您所见，第二件事是脚本保存了范围内的所有内容。我只想在下一个不发生的 i 实例上保存一次。

希望这是有道理的，

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:19:21.587

使用 while 循环而不是 for 循环。使用while循环找到合适的i，然后保存。

代码/伪代码如下所示：

```
result_name = original name
i = 0
while arcpy.Exists(result_name):
    i+=1
    result_name = draftloc + "\\" + shortname + "_" + str(i) + extension
save as result_name 
```

这应该可以解决这两个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:37:36.640

感谢上面的 Maty 建议，我想出了我的答案。对于那些有兴趣的人，我的代码是：

```
 result_name = filename2
    print result_name
    i = 0

    # Check if file exists
    if arcpy.Exists(draftloc + "\\" + result_name):
        # If it does, increment i by 1
        i+=1
        # While each successive filename (including i) does not exists, then save the next filename
        while not arcpy.Exists(draftloc + "\\" + shortname + "_" + str(i) + extension):                
            mxd.saveACopy(draftloc + "\\" + shortname + "_" + str(i) + extension)            
    # else if the original file didn't satisfy the if, the save it.
    else:           
        mxd.saveACopy(draftloc + "\\" + result_name) 
```

# jquery - 使用 jQuery 删除视频标签后，如何阻止音频继续播放？

> ID：10036491
> 
> 赞同：7
> 
> 时间：2012-04-05T21:46:14.827
> 
> 标签：jquery, html, video, html5-video, autoplay

当我使用删除功能删除视频时，音频继续播放。如果我不将自动播放作为视频标签中的属性包含在内，则不会发生这种情况。我尝试了不同的东西，但似乎没有任何效果。

```
//$("#video").pause();
//$("#video").stop();
$("#video").empty();
$("#video").remove(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T12:29:19.043

可能有点晚了，但我遇到了同样的问题，上面的答案对我不起作用（是的，标签是由 jQuery 创建的）

我通过使用让它工作

```
jQuery('#myvideoTag').trigger('pause'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T10:50:21.673

首先尝试在 html 中创建“video”标签为空，并在 javascript 代码中创建“source”标签

```
<html>
.
.
<video id="main-video" autoplay=""></video>
.
.
</html>

<script>
   $('#main-video').append('<source type="video/mp4" src="URL.mp4">');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:21:19.013

您尝试调用的`pause`函数（第一个注释掉的行）存在于 DOM 对象上，而不是 jQuery 对象上。

可以通过 jQuery 的`get`函数获取 DOM 对象，例如：`$('element').get()[0]`.

[http://jsfiddle.net/calvintennant/bTmHn/](http://jsfiddle.net/calvintennant/bTmHn/)

# azure - Azure 上的 Umbraco

> ID：10036494
> 
> 赞同：0
> 
> 时间：2012-04-05T21:46:22.600
> 
> 标签：azure, umbraco

我们在 azure 上部署了 umbraco DB 和 umbraco 站点。顶级 umbraco 管理页面有效（abc.xyz.com/umbraco/login.aspx），但是，我们创建了多个域（lmn.abc.xyz.com、pqr.abc.xyz.com 等）。我们看不到其他网站的出现。该页面仅显示这些站点可用 (abc.xyz.com)。非常感谢您在这方面的帮助。

谢谢你。

普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:12:44.640

我只是在问另一个明显的问题。您是否将主机名信息添加到 Umbraco 节点？我假设 Umbraco 的 Content 节点下有多个站点。右键单击节点并选择“管理主机名”，将主机名添加到每个节点。

```
lmn-Home
  Page 1
  Page 2
abc-Home
  Page 1
  Page 2 
```

在本地浏览页面（属性选项卡中的 URL）。即 localhost:port/lmn-home/page1 等。

# objective-c - iOS：使用 NSXMLParser 从 HTTP 解析 xml

> ID：10036496
> 
> 赞同：0
> 
> 时间：2012-04-05T21:46:25.393
> 
> 标签：objective-c, ios, nsxmlparser

这是第一次使用 NSXMLParser 并且想知道您是否给我一些从 http 请求解析返回的 xml 的方向，如下所示：

```
<?xml version="1.0" ?>
<theresponse>
 <status>OK</status>
 <pricing currency="USD" symbol="$">
   <price class="items">24.00</price>
   <price class="shipping">6.00</price>
   <price class="tax">1.57</price>
 </pricing>
</theresponse> 
```

我知道解析委托方法的基础知识，我只想知道在 didEndElement/foundCharacters/didStartElement 中用于检索上述项目（货币/项目/运费/税）的代码是什么样的？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:55:19.370

这比一些标准`NSXMLParser`代码要复杂一些；因为本质上，当您在寻找`shipping`“您想要的”时`6.00`，但这两条数据会以不同的委托方法返回给您，这是正常的。但是通常元素会被命名为“ `shipping`”，因此在`parser:didEndElement:namespaceURI:qualifiedName:`将元素名称传递给方法时，您会自动获得该元素名称。

解决方案看起来很简单，有一个`_currentAttributes`ivar 并`parser:didStartElement:namespaceURI:qualifiedName:attributes:`做类似的事情`_currentAttributes = attributeDict;`，然后在`didEndElement:`方法中处理它。然而这种风格很容易被打破，即使在这个适度简单的`XML`.

我的处理方式是存储传入的属性字典`didStartElement:`，并将其设置在字典中作为元素名称键的对象。将这种风格与`NSMutableString`作为 characterBuffer 的标准使用相结合，您可以将所有逻辑放入`didEndElement:`方法中。

旁注：我也很喜欢让我的`NSXMLParserDelegate`课`NSXMLParser`子类，就像这个一样。但是，如果不是，委托方法将是相同的。

**项目解析器.h**

```
#import <Foundation/Foundation.h>
@interface ItemParser : NSXMLParser <NSXMLParserDelegate>
@property (readonly) NSDictionary *itemData;
@end 
```

**项目解析器.m**

```
#import "ItemParser.h"
@implementation ItemParser {
    NSMutableDictionary *_itemData;
    NSMutableDictionary *_attributesByElement;
    NSMutableString *_elementString;
}
-(NSDictionary *)itemData{
    return [_itemData copy];
}
-(void)parserDidStartDocument:(NSXMLParser *)parser{
    _itemData = [[NSMutableDictionary alloc] init];
    _attributesByElement = [[NSMutableDictionary alloc] init];
    _elementString = [[NSMutableString alloc] init];
}
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    // Save the attributes for later.
    if (attributeDict) [_attributesByElement setObject:attributeDict forKey:elementName];
    // Make sure the elementString is blank and ready to find characters
    [_elementString setString:@""];
}
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    // Save foundCharacters for later
    [_elementString appendString:string];
}
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    if ([elementName isEqualToString:@"status"]){
        // Element status only contains a string i.e. "OK"
        // Simply set a copy of the element value string in the itemData dictionary
        [_itemData setObject:[_elementString copy] forKey:elementName];
    } else if ([elementName isEqualToString:@"pricing"]) {
        // Pricing has an interesting attributes dictionary 
        // So copy the entries to the item data
        NSDictionary *attributes = [_attributesByElement objectForKey:@"pricing"];
        [_itemData addEntriesFromDictionary:attributes];
    } else if ([elementName isEqualToString:@"price"]) {
        // The element price occurs multiple times.
        // The meaningful designation occurs in the "class" attribute.
        NSString *class = [[_attributesByElement objectForKey:elementName] objectForKey:@"class"];
        if (class) [_itemData setObject:[_elementString copy] forKey:class];
    }
    [_attributesByElement removeObjectForKey:elementName];
    [_elementString setString:@""];
}
-(void)parserDidEndDocument:(NSXMLParser *)parser{
    _attributesByElement = nil;
    _elementString = nil;
}
-(void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError{
    NSLog(@"%@ with error %@",NSStringFromSelector(_cmd),parseError.localizedDescription);
}
-(BOOL)parse{
    self.delegate = self;
    return [super parse];
}
@end 
```

因此，为了测试，我将`XML`您在上面发布的内容存储到一个名为“ItemXML.xml”的文件中。并使用以下代码对其进行了测试：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"ItemXML" withExtension:@"xml"];
ItemParser *parser = [[ItemParser alloc] initWithContentsOfURL:url];
[parser parse];
NSLog(@"%@",parser.itemData); 
```

我得到的结果是：

```
{
    currency = USD;
    items = "24.00";
    shipping = "6.00";
    status = OK;
    symbol = "$";
    tax = "1.57";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:02:24.693

看看这个[教程](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)。它解释了如何使用 NSXMLParser 将 XML 中的数据解析为您自己的数据格式。

# c# - 无法将可检查的 MenuItem 绑定到父窗口的 Topmost（始终位于顶部）属性

> ID：10036497
> 
> 赞同：2
> 
> 时间：2012-04-05T21:46:51.083
> 
> 标签：c#, wpf, data-binding, relativesource, findancestor

我无法弄清楚我要去哪里错了。希望你们中的一个可以提供帮助。

我有一个包含 TabControl 的窗口。TabControl 有一个 ContextMenu，其中包含一个用于“始终在顶部”行为的可检查项。我想将此可检查项绑定到包含窗口的布尔 Topmost 属性。

无论我做什么，绑定都会失败，并且在调试输出中出现“找不到绑定源”错误。

*（这些摘录是从我的实际代码中大大简化的。我希望我没有不小心删掉任何相关的内容。）*

**首先我尝试了这个：**

```
<Window x:Name="myWindow" (blah blah other properties)>
    <TabControl x:Name="tabControl">
        <TabControl.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Always on Top" IsCheckable="True"
                          IsChecked="{Binding ElementName=myWindow,
                                              Path=Topmost,
                                              Mode=TwoWay}"/>
            </ContextMenu>
        ... 
```

那没有用。是因为 MenuItem 在窗口“myWindow”内吗？我需要使用 RelativeSource Ancestor 绑定吗？

**所以我尝试了这个：**

```
<Window x:Name="myWindow" (blah blah other properties)>
    <TabControl x:Name="tabControl">
        <TabControl.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Always on Top" IsCheckable="True"
                          IsChecked="{Binding RelativeSource={
                                                  RelativeSource FindAncestor,
                                                  AncestorType={x:Type Window}
                                              },
                                              Path=Topmost,
                                              Mode=TwoWay}"/>
            </ContextMenu>
        ... 
```

那也没有用。

所以现在我被困住了。如何使此绑定起作用？

注意：我的代码隐藏没有对这些元素做任何事情。我需要设置 Window.DataContext 还是什么？这可能会破坏此窗口的其他部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:59:52.160

是的，您的“TopMost”属性所在的任何对象都必须设置为窗口的 DataContext。如果将其设置为 Window 的 DataContext，那么您的控件应该能够从您在第一个示例中尝试的 ElementName 绑定中获取该属性。

您的视图将在其 DataContext 中查看名为“TopMost”的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:55:06.513

据我所知，菜单是在弹出窗口中绘制的，这实际上并不是窗口可视树的一部分。所以这里最好尝试使用MVVM，通过视图模型设置IsChecked。

# opencl - OpenCL - 如何在每个核心上产生一个单独的数学过程

> ID：10036507
> 
> 赞同：2
> 
> 时间：2012-04-05T21:47:54.593
> 
> 标签：opencl, gpu

我是 OpenCL 的新手，我正在编写一个 RSA 分解应用程序。理想情况下，应用程序应该在 NV 和 AMD GPU 目标上运行，但我没有找到一种简单的方法来确定每个 GPU 上的内核/流 proc 的总数。

有没有一种简单的方法可以确定任何硬件平台上总共有多少个核心/流 proc，然后在每个可用核心上生成一个分解线程？目标 RSA 模数将在共享内存中，并且每个因式分解线程对模数使用 Rho 因式分解攻击。

此外，是否知道 OpenCL 是否支持类似于 GNU MP 的多精度数学库来存储大型半素数？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:38:50.660

添加到 Roger 的答案中，您希望拥有比内核更多的线程的原因是因为 GPU 实现了非常有效的[上下文切换](http://en.wikipedia.org/wiki/Context_switch)以隐藏[内存延迟](http://en.wikipedia.org/wiki/Memory_latency)。一般来说，就处理器接收请求数据所花费的时间而言，每次内存访问都是一项非常昂贵的操作。但是如果一个线程正在等待内存事务，它可以被“暂停”，同时另一个线程可以被激活来进行计算（或其他内存访问）。因此，如果你有足够多的线程，你基本上可以隐藏内存访问延迟，并且你的软件可以在硬件的全部计算能力下运行（否则很少会发生这种情况）。

我会把它放在对罗杰帖子的评论中，但它的大小超出了限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:04:10.540

在 GPU 上，您不会像在 CPU 上那样为每个内核生成一个线程。相反，您希望启动的线程数多于内核数。我不会担心给定目标平台上可用的内核的确切数量。相反，不要专注于最适合您的问题的东西。

# javascript - JavaScript; 异步操作、回调和过多的递归

> ID：10036509
> 
> 赞同：0
> 
> 时间：2012-04-05T21:47:58.057
> 
> 标签：javascript, recursion, callback

当我尝试从本地 sqlite 或 ajax 请求中获取某些内容时，我无法返回一些值，我需要运行回调。

我有一些相当大的函数可以获取和处理一些数据，但我需要将它放入循环中并保存到完成。我不能像那样完成它，因为函数在内部回调运行之前就完成了。我可以让回调再次运行该函数，但它不会吃掉内存吗？或者它不会因为父函数完成并且内部变量和对象被破坏？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:18:04.600

我如果理解正确，您有一个将回调传递给要在循环中重复的函数的过程，该循环会产生多个未完成的回调。

对此的解决方案是保留回调的计数并在调用每个回调时将其递减。一旦计数器达到零，就进行最后的处理。

小心将计数器从 1 开始，并在所有回调传递完后将其递减，以确保计数器不会过早达到零。

# jquery - Rails - 在 AJAX 请求正在进行时显示加载器

> ID：10036513
> 
> 赞同：0
> 
> 时间：2012-04-05T21:48:27.313
> 
> 标签：jquery, css, ajax, ruby-on-rails-3, settimeout

我有一个表单，当这个表单通过 AJAX 发送时，我会显示 ajax-loader 图像，然后当请求完成时，我想在 2 秒内隐藏这个加载器。不幸的是，在实践中，ajax-loader 总是只在 0.5s 上显示（只是我的估计）。奇怪的是，CSS 类`transparent`在 2 秒内隐藏，但图像加载器没有。

忽略我重要的事情？为什么图像加载器不是在 2 秒内隐藏，而是在 0.5 秒内隐藏？

**update_page.html.haml**

```
 %h1 Update
= render :partial => 'update_it' 
```

**_update_it.html.haml**

```
%section#update_it
  = form_for(@user, :remote => true, :html => {:class => 'form-horizontal'}) do |f|
    ...
    = submit_tag 'Save changes', :id => 'update_information' 
```

**更新.js.haml**

```
$('#update_it').html("#{escape_javascript(render(:partial => 'update_it'))}");
setTimeout(function() {
  $('section#update_it').removeClass('transparent')
} , 2000); 
```

**脚本.js**

```
$(document).ready(function(){
  $("#update_information").click(function(){
    $('section#update_it').addClass('transparent');
    $('.transparent').append('<img src="/assets/ajax-loader.gif" alt="" id="loader" class="loader" />');
  });
}); 
```

**编辑**我还忘了一件事-当我第一次单击 SUBMIT 按钮时，使用的是 CSS class `transparent`，但是当我第二次单击该按钮时，就已经没有了。为什么？有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:42:11.563

对不起我的直截了当，但我认为你让简单的事情变得复杂。

尝试使用 jQuery 的 ajax 回调函数（例如 ajaxStart()）重新实现“ajax 加载器”。（见：[http](http://api.jquery.com/ajaxStart/) ://api.jquery.com/ajaxStart/ ）

并且一旦 ajax 完成，使用另一个回调函数，例如“success”或“complete”来替换 ajax-loader。（见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）

# html - 表溢出在 Chrome 和 IE 中工作，但在 Firefox 中不工作

> ID：10036514
> 
> 赞同：0
> 
> 时间：2012-04-05T21:48:30.060
> 
> 标签：html, css, html-table, screen

我试图获得一个总是占据整个屏幕的布局，不多也不少。布局有一个标题行、一个 200 像素宽的左栏（可滚动）和一个可滚动的内容区域。

这在 Chrome 和 IE 中有效，但在 Firefox 中，滚动条从不显示也不工作。有什么想法吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html>
<head>
    <style type="text/css">
* {
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    background-color: yellow;
    overflow: hidden;
}

#viewTable {
    width: 100%;
    height: 100%;
    background-color: red;
}

#header {
    height: 72px;
    background-color: blue;
}

#leftcol {
    vertical-align: top;
    width: 200px;
    height: 100%;
    background-color: green;
}

#menu {
    height: 100%;
    overflow: auto;
}

#rightcol {
    vertical-align: top;
    width: auto;
    height: 100%;
    background-color: purple;
}

#content {
    height: 100%;
    overflow: auto;
}
    </style>
</head>
<body>
</body>
<table id="viewTable" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="2" id="header">
            Header
        </td>
    </tr>
    <tr>
        <td id="leftcol">
            <div id="menu">
                0<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                100<br/>
            </div>
        </td>
        <td id="rightcol">
            <div id="content">
                0<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                1<br/>
                100<br/>
            </div>
        </td>
    </tr>
</table>
hi
</html> 
```

我本来更喜欢使用 CSS，但找不到任何方法来做到这一点。

嗨不应该显示，它只是在那里验证它没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:27:50.353

这是绝对定位的完美用例。

始终使您的 HTML 尽可能简单。

```
<html>
    <body>
        <div id="header">
            Header
        </div>
        <div id="leftcol">
            Leftcol
        </div>
        <div id="rightcol">
            main area
        </div>
    </body>
</html> 
```

CSS 设置绝对定位和溢出：在你的列上自动。

```
* {
    margin: 0;
    padding: 0;
}

html, body {
    background-color: yellow;
    overflow: hidden;
}
#header{
    position: absolute;
    top: 0px;
    left:0px;
    right: 0px;
    height: 72px;
    background-color: blue;
}
#leftcol {
    position: absolute;
    left: 0px;
    top: 72px;
    bottom: 0px;
    width: 200px;
    overflow: auto;
    background-color: green;
}
#rightcol {
    position: absolute;
    top: 72px;
    left: 200px;
    right: 0px;
    bottom: 0px;
    overflow: auto;
    background-color: purple;
} 
```

我设置了一个[JSFiddle](http://jsfiddle.net/hpsXg/)在浏览器中查看它：http: [//jsfiddle.net/hpsXg/](http://jsfiddle.net/hpsXg/)

# ios - 我的 IOS 应用程序如何知道多任务栏何时显示？

> ID：10036519
> 
> 赞同：2
> 
> 时间：2012-04-05T21:48:46.330
> 
> 标签：ios, xcode, uiapplicationdelegate

在大多数情况下，我的应用程序可以毫无问题地处理此操作。但是，有一次我有声音循环播放，如果双击主页按钮打开多任务栏，声音会继续播放，直到多任务栏关闭并结束其序列。

我希望有一个为此操作调用的 UIApplicationDelegate 方法，但我找不到它的任何文档。

# ruby-on-rails - 与相同表单中的另一个字段相比，验证字段是唯一的

> ID：10036520
> 
> 赞同：0
> 
> 时间：2012-04-05T21:48:47.447
> 
> 标签：ruby-on-rails, ruby

`new`假设我在or`edit`表单中有两个字段：

```
<%= f.text_field :email %>
<%= f.text_field :parent_email %> 
```

在我的模型中，我如何验证它`parent_email`不同于`email`? 该`exclusion`选项似乎可行，但我不知道如何访问`email`模型中的字段值。我需要在控制器中实现这个吗？

```
validates :parent_email, exclusion: self.email # doesn't work, nor does :email 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:54:21.037

以下应该有效（但我想那里有更酷的解决方案）：

```
class User
  validate  :email_differs_from_parent_email

  private
  def email_differs_from_parent_email
    if email == parent_email
      errors.add(:parent_email, "parent_email must differ from email") 
    end
  end
end 
```

# iphone - iPhone 应用程序中的类似标签的行为

> ID：10036522
> 
> 赞同：-1
> 
> 时间：2012-04-05T21:48:53.500
> 
> 标签：iphone, objective-c

我有一个 iPhone 应用程序，我需要类似标签的行为。我想相应地显示和隐藏每个标签的所有视图。对于两个选项卡，我将所有视图放在其他选项卡的顶部，并相应地隐藏和显示它们。但是当我必须实现第三个选项卡时，有很多我无法在 Interface Builder 中放置的视图。

谁能告诉我如何为这种情况制作 UI？

编辑：你能看看[这个](http://www.freeimagehosting.net/ld12h)，看看它是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:25:53.360

啊，我明白了！为什么不自己用一些有创意的 UIButtons 来做呢？只要它们处于固定位置，就可以制作一种单选组，例如将两个相距大约 50 px 的按钮配对，然后相应地设置它们的背景颜色。至于视图，可以很容易地使用 UIView 的 -bringSubviewToFront: 方法将它们调用到前面。

# objective-c - CALayer 将内容定位到左下角

> ID：10036523
> 
> 赞同：1
> 
> 时间：2012-04-05T21:49:01.010
> 
> 标签：objective-c, macos, core-animation

我正在尝试将图像绘制到 CALayer 上。我只需要一个图像，所以我创建了我的后期如下：

```
CALayer *layer = [CALayer layer]; 
```

我添加我的图像如下：

```
NSImage *img = [[NSImage alloc] initWithContentsOfFile:@"path/to/img.png"];
[layer setContents:img]; 
```

这可行，但是它会绘制我的图像以填充整个父框架（在此过程中拉伸我的图像）。

阅读文档，我发现以下内容：

```
[layer setContentsGravity:@"kCAGravityBottomLeft"]; 
```

我试图在父框架的左下角绘制我的图像，但是无论我做什么，它都会在底部中心绘制我的图标。反正有没有指定左下角？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T05:25:58.367

尝试这个：

```
CALayer *layer = [CALayer layer];
layer.contentsGravity = kCAGravityBottomLeft;
layer.contents = (id) aCGImageRef; 
```

请注意，`kCAGravityBottomLeft`声明为`NSString`并且该`contents`属性需要一个`CGImageRef`.

# c++ - 在 Windows 中的屏幕上渲染缓冲区

> ID：10036527
> 
> 赞同：4
> 
> 时间：2012-04-05T21:49:36.463
> 
> 标签：c++, c, windows, buffer, render

我正在寻找一种将字符缓冲区渲染到窗口内容区域的方法。这只是伪的，但旨在展示我真正想做的事情：

```
char buffer[300][200][3];    // 300px x 200px x RGB bytes
// ... render stuff into buffer
FancyWindowsFunctionToRenderBufferOnWindow(my_hwnd, buffer, 300, 200, offset_x, offset_y); 
```

有没有办法做类似的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T12:44:56.780

我认为您需要创建一个与设备无关的位图（DIB）。如果您已经准备好放置在应用程序窗口上的像素数组，您可能需要将整个数组复制到由 CreateDIBSection API 分配的缓冲区并调用 BitBlt 将 DIB 传输到窗口。这是我所知道的在 Win32 平台的计算机屏幕上将像素阵列显示为可见图片的唯一方法，它非常复杂且难以理解。

以下是我用来测试类似于您想要做的事情的步骤：

创建DIB：

```
BITMAPINFO bmi;
memset(&bmi, 0, sizeof(bmi));
bmi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
bmi.bmiHeader.biWidth = /* Width of your image buffer */
bmi.bmiHeader.biHeight = - /* Height of your image buffer */
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biBitCount = 32;
bmi.bmiHeader.biCompression = BI_RGB;

HDC hDesktopDC = GetDC(GetDesktopWindow());
HBITMAP hDib = CreateDIBSection(hDesktopDC, &bmi, DIB_RGB_COLORS, (void **)&buffer, 0, 0);
if (buffer == NULL) { /* ERROR */ }
HDC hDibDC = CreateCompatibleDC(hDesktopDC);
HGDIOBJ hOldObj = SelectObject(hDibDC, hDib);

/* Copy your array of pixels to buffer allocated above. */

ReleaseDC(GetDesktopWindow(), hDesktopDC); 
```

实现 WM_PAINT 事件处理程序（hWnd 变量保存下面的窗口句柄）：

```
case WM_PAINT:
    PAINTSTRUCT paint;
    HDC hWndDc = BeginPaint(hWnd, &paint);
    BitBlt(hWndDC, 0, 0, /* Width of DIB */, /* Height of DIB */,
           /* HDC of DIB (hDibDC in the above) */, 0, 0, SRCCOPY);
    EndPaint(hWnd, &paint);
    break; 
```

我真的不指望上面的代码片段会直接帮助你。如果您确定要使用上述片段中的 GDI 函数，我建议您仔细阅读 MSDN 上的 API 文档。因为在使用 API 时正确释放或删除 DC 或 GDI 对象是非常棘手的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T22:57:59.393

It sounds like you have an image (raster) stored as an array of chars (which is an odd choice, since you'd usually want an array of unsigned chars for raw bitmap images).

If you meet certain alignment constraints, you can display your bitmap pretty directly with [SetDIBits](http://msdn.microsoft.com/en-us/library/dd162973(v=vs.85).aspx). You fill out a BITMAPINFO structure that describes the pixel format and image dimensions, and then you pass that along with your data to SetDIBits. It'll paint them to a DC. It can be a little tricky to get all the parameters right.

The alignment requirement is that each scanline must begin on a 4-byte boundary. If you don't meet that requirement, you'll get garbage similar to having the wrong stride. You can make a copy of the data with the correct alignment if necessary.

# java - 读取 Jackson 中的嵌入对象

> ID：10036530
> 
> 赞同：23
> 
> 时间：2012-04-05T21:50:08.937
> 
> 标签：java, json, mapping, jackson

我正在尝试使用 Jackson 2.0-RC3 读取遗留的 JSON 代码，但是我被一个“嵌入式”对象困住了。

给定以下 JSON：

```
{
    "title": "Hello world!",
    "date": "2012-02-02 12:23:34".
    "author": "username",
    "author_avatar": "http://.../",
    "author_group": 123,
    "author_prop": "value"
} 
```

如何将其映射到以下结构：

```
class Author {
    @JsonPropery("author")
    private String name;

    @JsonPropery("author_avatar")
    private URL avatar;

    @JsonProperty("author_group")
    private Integer group;

    ...
}

class Item {
    private String title;

    @JsonProperty("date")
    private Date createdAt;

    // How to map this?
    private Author author;
} 
```

我试图这样做，`@JsonDeserialize`但似乎我必须以`Item`这种方式映射整个对象。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-09T17:41:14.243

To deal with an "embedded" object you should use `@JsonUnwrapped` — it's an equivalent of the Hibernate's `@Embeddable`/`@Embedded`.

```
class Item {
    private String title;

    @JsonProperty("date")
    private Date createdAt;

    // How to map this?
    @JsonUnwrapped
    private Author author;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:15:57.170

我首先将原始 JSON 反序列化为单个平面对象（有点像适配器），然后创建自己的域对象。

```
class ItemLegacy {
    private String title;

    @JsonProperty("date")
    private Date createdAt;

    @JsonPropery("author")
    private String name;

    @JsonPropery("author_avatar")
    private URL avatar;

    @JsonProperty("author_group")
    private Integer group;

    @JsonProperty("author_prop")
    private Integer group;
} 
```

然后使用此对象填写您的 Item 和 Author 对象并创建正确的关系。

```
 //... the deserialized original JSON
 ItemLegacy legacy ...

 // create an author
 Author author = new Author();
 author.setName(legacy.getName());
 author.setGroup(legacy.getGroup());
 ...

 // create an item
 Item item = new Item();
 item.setTitle(legacy.getTitle());
 ...

 // finally set the author... and you should have the desired structure
 item.setAuthor(author); 
```

**您的** `Item`类**只能从**以下形式自动反序列化：

```
{
    "title": "Hello world!",
    "date": "2012-02-02 12:23:34".
    "author": { 
                "name": "username", 
                "author_avatar": "http://...", 
                "author_group": "123", 
                "author_prop": "value" 
              }
} 
```

您也许可以通过自定义反序列化来做一些事情，但它肯定不是更简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T20:19:50.943

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我不确定 Jackson 是否支持这个用例，但下面是一个示例，说明如何利用 MOXy 的`@XmlPath`扩展来满足您的要求。请注意，从 2012 年 4 月 7 日起，您将需要使用 EclipseLink 2.4.0 夜间标签或更新版本。

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

**物品**

on的`author`属性`Item`映射为`@XmlPath('.')`。这意味着 的内容`Author`被拉到与 的内容相同的级别`Item`。我还需要使用`XmlAdapter`for`Date`属性，因为您使用的格式与 MOXy 的默认表示不匹配。

```
package forum10036530;

import java.util.Date;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlAccessorType(XmlAccessType.FIELD)
class Item {
    private String title;

    @XmlElement(name="date")
    @XmlJavaTypeAdapter(DateAdapter.class)
    private Date createdAt;

    @XmlPath(".")
    private Author author;
} 
```

**作者**

```
package forum10036530;

import java.net.URL;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
class Author {
    @XmlElement(name="author")
    private String name;

    @XmlElement(name="author_avatar")
    private URL avatar;

    @XmlElement(name="author_group")
    private Integer group;

    @XmlElement(name="author_prop")
    private String prop;
} 
```

**日期适配器**

```
package forum10036530;

import java.text.SimpleDateFormat;
import java.util.Date;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateAdapter extends XmlAdapter<String, Date> {

    private SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");

    @Override
    public Date unmarshal(String string) throws Exception {
        return dateFormat.parse(string);
    }

    @Override
    public String marshal(Date date) throws Exception {
        return dateFormat.format(date);
    }

} 
```

**jaxb.properties**

必须将使用以下条目调用的文件`jaxb.properties`与域类放在同一包中，以将 MOXy 指定为 JAXB (JSR-222) 提供程序。

```
javax.xml.bind.context.factory = org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**输入.json/输出**

```
{
   "title" : "Hello world!",
   "date" : "2012-02-02 12:23:34",
   "author" : "username",
   "author_avatar" : "http://www.example.com/foo.png",
   "author_group" : 123,
   "author_prop" : "value"
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html](http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html)

# ios - 使用 iOS 5 启动时应用程序崩溃 - 无法重现

> ID：10036531
> 
> 赞同：7
> 
> 时间：2012-04-05T21:50:13.523
> 
> 标签：ios, ios5, crash, nsuserdefaults, startup

对于一小部分用户，我们的 iOS 应用程序在启动时崩溃。

1.  我们无法在多个测试设备中的任何一个上重现此崩溃，无论是连接到 Xcode 还是未连接

2.  崩溃仅发生在 iOS 5 上，但发生在 iPod、iPhone 和 iPad 上

3.  崩溃是启动时的看门狗超时

4.  只有少数用户遇到了崩溃

5.  该应用程序仅在用户升级时崩溃

6.  如果用户删除，然后重新安装应用程序，崩溃就会停止

7.  关闭并再次打开设备无济于事

8.  项目中使用的唯一 XIB 是主窗口的基本空 XIB

如果有人对这次崩溃可能来自哪里有任何想法，我们肯定会很高兴听到。一个月来，我们一直试图追踪它，但没有成功。

非常感谢！

这是我们的应用程序：didFinishLaunchingWithOptions：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self.window setBackgroundColor:[UIColor myBackgroundColor]];

    gRootViewController = [[RootViewController alloc] init];

    [self performSelectorOnMainThread:@selector(loadGame) withObject:nil waitUntilDone:NO];

    return YES;

} 
```

这是符号化的崩溃日志：

```
Incident Identifier: 8AC99711-0817-4A93-AEFB-82E24FFE3291
Hardware Model:      iPhone3,1
Process:         myapp [92]
Path:            /var/mobile/Applications/B90DCE6D-F392-493E-8BC8-7FE0A64D80B0/myapp.app/myapp
Identifier:      myapp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-04-04 21:52:17.108 -0500
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  0

Application Specific Information:
com.mycompany.myapp failed to launch in time

Elapsed total CPU time (seconds): 20.130 (user 20.130, system 0.000), 100% CPU 
Elapsed application CPU time (seconds): 14.747, 73% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   CoreFoundation                  0x34fe7930 CFBasicHashFindBucket + 2012
1   CoreFoundation                  0x34fe713e CFDictionaryGetValue + 110
2   CoreFoundation                  0x35054722 __CFBinaryPlistCreateObject2 + 38
3   CoreFoundation                  0x35055514 __CFBinaryPlistCreateObject2 + 3608
4   CoreFoundation                  0x35055514 __CFBinaryPlistCreateObject2 + 3608
5   CoreFoundation                  0x3505574e __CFTryParseBinaryPlist + 158
6   CoreFoundation                  0x34ffe9a0 _CFPropertyListCreateWithData + 80
7   CoreFoundation                  0x350175da CFPropertyListCreateWithStream + 430
8   CoreFoundation                  0x350173c0 CFPropertyListCreateFromStream + 56
9   CoreFoundation                  0x350170f0 -[CFXPreferencesPropertyListSourceSynchronizer createPlistFromDisk] + 128
10  CoreFoundation                  0x35007532 -[CFXPreferencesPropertyListSourceSynchronizer synchronizeAlreadyFlocked] + 242
11  CoreFoundation                  0x35007436 -[CFXPreferencesPropertyListSourceSynchronizer synchronize] + 14
12  CoreFoundation                  0x35016b34 -[CFXPreferencesPropertyListSource synchronize] + 104
13  CoreFoundation                  0x3509050e __CFXPreferencesGetSourceForTriplet + 454
14  CoreFoundation                  0x35090238 __CFXPreferencesGetSearchListForBundleID + 164
15  CoreFoundation                  0x3509192e ___CFXPreferencesCopyAppValue_block_invoke_0 + 6
16  CoreFoundation                  0x34fe8b24 CFPreferencesCopyAppValue + 276
17  Foundation                      0x30ed341c -[NSUserDefaults(NSUserDefaults) initWithUser:] + 1356
18  Foundation                      0x30eb28f8 +[NSUserDefaults(NSUserDefaults) standardUserDefaults] + 100
19  UIKit                           0x320f015e _InitMagnificationFilter + 26
20  libsystem_c.dylib               0x36d4b7ce pthread_once + 70
21  UIKit                           0x320dbbcc -[UIView _createLayerWithFrame:] + 424
22  UIKit                           0x320db874 UIViewCommonInitWithFrame + 348
23  UIKit                           0x320db6dc -[UIView initWithFrame:] + 92
24  UIKit                           0x320effaa -[UIStatusBar initWithFrame:showForegroundView:] + 46
25  UIKit                           0x320eff70 -[UIStatusBar initWithFrame:] + 32
26  UIKit                           0x320efdc6 -[UIApplication _createStatusBarWithRequestedStyle:orientation:hidden:] + 78
27  UIKit                           0x320ef876 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 138
28  UIKit                           0x320bdc64 -[UIApplication handleEvent:withNewEvent:] + 1004
29  UIKit                           0x320bd708 -[UIApplication sendEvent:] + 48
30  UIKit                           0x320bd0dc _UIApplicationHandleEvent + 5820
31  GraphicsServices                0x362f2224 PurpleEventCallback + 876
32  CoreFoundation                  0x3507351c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
33  CoreFoundation                  0x350734be __CFRunLoopDoSource1 + 134
34  CoreFoundation                  0x3507230c __CFRunLoopRun + 1364
35  CoreFoundation                  0x34ff549e CFRunLoopRunSpecific + 294
36  CoreFoundation                  0x34ff5366 CFRunLoopRunInMode + 98
37  UIKit                           0x320eea0c -[UIApplication _run] + 544
38  UIKit                           0x320ebe76 UIApplicationMain + 1074
39  myapp                               0x00005800 main (main.m:62)
40  myapp                               0x00002404 0x1000 + 5124

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x34e833a8 kevent + 24
1   libdispatch.dylib               0x310d0ea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x310d0bc2 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x34e83004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x34e831fa mach_msg + 50
2   CoreFoundation                  0x350733ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x35072124 __CFRunLoopRun + 876
4   CoreFoundation                  0x34ff549e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x34ff5366 CFRunLoopRunInMode + 98
6   WebCore                         0x36e780f0 _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x36d5072e _pthread_start + 314
8   libsystem_c.dylib               0x36d505e8 thread_start + 0

Unknown thread crashed with unknown flavor: 5, state_count: 1

Binary Images:
    0x1000 -    0x1afff +myapp armv7  <31178538f2203d4095608727afa603d5> /var/mobile/Applications/B90DCE6D-F392-493E-8BC8-7FE0A64D80B0/myapp.app/myapp
0x2fe5a000 - 0x2fe7bfff  dyld armv7  <4a817f3e0def30d5ae2032157d889c1d> /usr/lib/dyld
0x3030e000 - 0x30312fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x30313000 - 0x30313fff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x30373000 - 0x308b7fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x308b8000 - 0x30937fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x3095f000 - 0x30a37fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x30a4e000 - 0x30a55fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x30a56000 - 0x30aa7fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x30b39000 - 0x30b39fff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x30b3a000 - 0x30baafff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x30be0000 - 0x30c1cfff  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x30c1d000 - 0x30c28fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x30c29000 - 0x30c29fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x30c4d000 - 0x30c96fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x30c97000 - 0x30c9afff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x30c9b000 - 0x30d21fff  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x30d5b000 - 0x30d5cfff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x30d6f000 - 0x30daffff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x30db0000 - 0x30db1fff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x30dca000 - 0x30de9fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x30dea000 - 0x30e22fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x30ea9000 - 0x30eb0fff  StoreKit armv7  <1bc0c05f99a8309d90476b42263e3487> /System/Library/Frameworks/StoreKit.framework/StoreKit
0x30eb1000 - 0x3102ffff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x3103b000 - 0x3103cfff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x3103d000 - 0x31052fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x31053000 - 0x31078fff  OpenCL armv7  <ec915bfc3f7633dda61b5fc87459119b> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x310bd000 - 0x310c3fff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x310c4000 - 0x310dafff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x310db000 - 0x310e5fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x310ec000 - 0x310f1fff  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x31131000 - 0x31142fff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x31143000 - 0x31143fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x31149000 - 0x31186fff  FTServices armv7  <28ed78e01a77388cb4c0f2f6ec33482c> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x311a6000 - 0x3121afff  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x3121b000 - 0x31257fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x313f2000 - 0x31416fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x3141a000 - 0x3144efff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x31476000 - 0x3147afff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x31485000 - 0x3152bfff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x31550000 - 0x3158efff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x315f9000 - 0x315fafff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x316f8000 - 0x316fffff  AssetsLibraryServices armv7  <0703f561f9a038b6850d6e93bba7e5f4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x31700000 - 0x31701fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x31767000 - 0x317b1fff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x317e4000 - 0x31841fff  StoreServices armv7  <628fbbc73ed93730962c53bfbfde6794> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x31a2d000 - 0x31b72fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x31b98000 - 0x31ba7fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x31ba8000 - 0x31c5efff  AVFoundation armv7  <35cb7a0eb1dc3554a777c1cc11cb0415> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x31cad000 - 0x31d05fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x31d06000 - 0x31d12fff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x31d19000 - 0x31d1ffff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x31d20000 - 0x31d24fff  IOSurface armv7  <6ae77a40f8e93f28bc466ca93f5675d4> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x31d3b000 - 0x31d5efff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x31e2c000 - 0x31e30fff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x31e43000 - 0x31e50fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x32039000 - 0x32045fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x32092000 - 0x320a3fff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x320b6000 - 0x320b9fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x320ba000 - 0x3255cfff  UIKit armv7  <d72bcc68e76a3a55a963590cdcffe8cd> /System/Library/Frameworks/UIKit.framework/UIKit
0x32566000 - 0x3270cfff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x32789000 - 0x329b6fff  MediaToolbox armv7  <ec9bc89489763c6c93f86c5c490b2d69> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x32d56000 - 0x32d5afff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x32d81000 - 0x32d90fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x32d91000 - 0x32d9bfff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x32da8000 - 0x32e0cfff  MessageUI armv7  <b74d79ea691a35ada276f063b7217a20> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x3362b000 - 0x3366afff  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x3366b000 - 0x3366ffff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x33676000 - 0x33746fff  WebKit armv7  <6ff2796c2f933050ac6ecdee9fc6a216> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x33822000 - 0x3386efff  CoreTelephony armv7  <e8eb52ca5fe33c7488a33efd222e7804> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33890000 - 0x338d8fff  CoreMedia armv7  <eb1f503312be3c93b07b2d0d25177000> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x3397d000 - 0x33a6bfff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x33a6c000 - 0x33b43fff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x33c7c000 - 0x33cb8fff  IMFoundation armv7  <77bb4365a65b32a49523b03da0340dbc> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x33cb9000 - 0x33ddefff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x33e4e000 - 0x33e77fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x33e91000 - 0x33e9dfff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x34005000 - 0x3401bfff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x343b0000 - 0x34671fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x34672000 - 0x34688fff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x346aa000 - 0x346fbfff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x346fc000 - 0x34733fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x3474d000 - 0x3477dfff  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x3483d000 - 0x34842fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x3491d000 - 0x34923fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x34a1c000 - 0x34a66fff  ManagedConfiguration armv7  <5e0a131bbfec305ea01f9e01f486da63> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x34a67000 - 0x34a93fff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x34a94000 - 0x34a9dfff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x34bd6000 - 0x34bedfff  WebBookmarks armv7  <bd20a05587783a8e9596eef1d3615ea7> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x34bee000 - 0x34c06fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x34c99000 - 0x34cadfff  PersistentConnection armv7  <65682d21486836a3aa3e17b9461e7b3a> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x34cb8000 - 0x34cedfff  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x34cf1000 - 0x34d6afff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x34e78000 - 0x34e7bfff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x34e82000 - 0x34e98fff  libsystem_kernel.dylib armv7  <7ac5560851ce3cb3981068092074b409> /usr/lib/system/libsystem_kernel.dylib
0x34fe6000 - 0x350fdfff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x35281000 - 0x352c6fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x35412000 - 0x35447fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x35448000 - 0x35591fff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x35599000 - 0x355e2fff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x358e8000 - 0x358eefff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x358ef000 - 0x35aacfff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x35ad7000 - 0x35ad9fff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x35b3e000 - 0x35b61fff  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x35baf000 - 0x35bfdfff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x35c07000 - 0x35cb5fff  Message armv7  <b8221d43401d315fb84398b7aa570fc1> /System/Library/PrivateFrameworks/Message.framework/Message
0x35dba000 - 0x35dbdfff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x35f76000 - 0x3615afff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x3615b000 - 0x3615bfff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x36299000 - 0x3629ffff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x362d4000 - 0x362e3fff  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x362e4000 - 0x362ecfff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x362ed000 - 0x362f7fff  GraphicsServices armv7  <e21a6e61bdd136b6805a9e3abe2e3d1f> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x362f8000 - 0x362fffff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x3630d000 - 0x36323fff  EAP8021X armv7  <fffe86a22bc434a6ae84f23bfecef9d6> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3632a000 - 0x363ecfff  Celestial armv7  <2a59586b0ae937c3b25fe526924aa885> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x364b7000 - 0x364bbfff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x364bd000 - 0x36583fff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x36584000 - 0x36584fff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x3659f000 - 0x365a2fff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x36631000 - 0x36636fff  CrashReporterSupport armv7  <2bb524b3bb3c3eb2932ce13b655b7c7c> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x36738000 - 0x36758fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x368bc000 - 0x368d9fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x368da000 - 0x368e9fff  SpringBoardServices armv7  <ca5b10014b473d2eaec5c48d89ee1b54> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x3692a000 - 0x3692afff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x36a58000 - 0x36a59fff  CoreSurface armv7  <7850befd26b630f183ee326aaadd7b34> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x36b47000 - 0x36b4afff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x36b84000 - 0x36c75fff  QuartzCore armv7  <a2afbe6483683d05ad51b106f98776e2> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x36cfa000 - 0x36cfbfff  libsystem_sandbox.dylib armv7  <66e985f3eea03ef08afb7cf4c153f76e> /usr/lib/system/libsystem_sandbox.dylib
0x36d3d000 - 0x36d41fff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x36d42000 - 0x36dcefff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x36dcf000 - 0x3758dfff  WebCore armv7  <814351ff217e3425a8e532c2e2251f73> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x3795b000 - 0x3795ffff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x3799c000 - 0x37a46fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x37a5d000 - 0x37aa0fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x37acb000 - 0x37b78fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x37bb8000 - 0x37bc0fff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x37bc3000 - 0x37bc8fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x37c6c000 - 0x37cb0fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x37d27000 - 0x37d8afff  IMCore armv7  <6e26e99b9b5f3829a8486ffd8c64f0d2> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x37da5000 - 0x37e3efff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x37eff000 - 0x37f01fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x37f1c000 - 0x37f1ffff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T22:08:19.543

因此，一般来说，在主线程上执行繁重的工作会导致应用程序的 UI 锁定。操作系统正在寻找 applicationDidFinishLaunchingWithOptions 在合理的时间后返回。如果没有，它将杀死您的应用程序并为您提供 8badf00d 异常代码。看看你过去的时间；超过20秒！我得到 8badf00d 的启动时间不到 5 秒。

显然，您不会一直在所有设备上都遇到这种崩溃。如果您的设置依赖于互联网连接（就像我的那样），您可能会在尝试连接 Edge 或阴暗 WiFi 连接的设备上获取它。如果您正在处理大量繁重的图形内容，这也可能会超过加载时间阈值。您在 iOS5 中看到这一点的唯一原因可能是 Apple 降低了 iOS5 设备的加载时间最大限制（更好的硬件、更好的软件、加载时间也应该更好，可以提出论点）。我强烈建议在后台线程中启动设置。如果该设置是您的应用程序不可或缺的一部分，请考虑首先使用加载指示器加载启动屏幕，并在设置完成后删除该视图。从用户的角度来看，

其他选项是优化加载代码，使其在几秒钟内完成。但是如果你现在只有 20 秒，我认为不可能进行那么多优化。

***更新：***来自苹果文档：

> 网络应用程序中看门狗超时崩溃的最常见原因是主线程上的同步网络。这里有四个影响因素： 同步网络 - 这是您发出网络请求并阻止等待响应的地方。主线程——同步网络一般来说不太理想，但如果你在主线程上执行它会导致特定的问题。请记住，主线程负责运行用户界面。如果您长时间阻塞主线程，用户界面就会变得无法接受。长时间超时——如果网络刚刚消失（例如，用户在进入隧道的火车上），任何未决的网络请求都不会失败，直到某个超时到期。大多数网络超时以分钟为单位，这意味着主线程上的阻塞同步网络请求可以使用户界面一次保持几分钟无响应。试图通过减少网络超时来避免这个问题并不是一个好主意。在某些情况下，网络请求可能需要几秒钟才能成功，如果您总是提前超时，那么您将永远不会取得任何进展。看门狗——为了让用户界面保持响应，iOS 包含一个看门狗机制。如果您的应用程序未能及时响应某些用户界面事件（启动、暂停、恢复、终止），看门狗将终止您的应用程序并生成看门狗超时崩溃报告。看门狗给你的时间没有正式记录，但它总是少于网络超时。这个问题的一个棘手方面是它高度依赖于网络环境。如果您总是在网络连接良好的办公室测试您的应用程序，您将永远不会看到这种类型的崩溃。但是，一旦您开始将应用程序部署给最终用户——他们将在各种网络环境中运行它——这样的崩溃就会变得很普遍。警告 总而言之，如果您在主线程上进行同步网络调用，您的应用程序在部署到广泛的用户时将遭受看门狗超时崩溃。一旦你开始将你的应用程序部署给最终用户——他们将在各种网络环境中运行它——这样的崩溃就会变得很普遍。警告 总而言之，如果您在主线程上进行同步网络调用，您的应用程序在部署到广泛的用户时将遭受看门狗超时崩溃。一旦你开始将你的应用程序部署给最终用户——他们将在各种网络环境中运行它——这样的崩溃就会变得很普遍。警告 总而言之，如果您在主线程上进行同步网络调用，您的应用程序在部署到广泛的用户时将遭受看门狗超时崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:14:18.960

正如其他人指出的那样，`0x8badf00d`这意味着某些事情使应用程序启动时间过长。

看起来有这个问题的用户在他们的偏好中存储了太多的东西（`NSUserDefaults`）。您不应该使用`NSUserDefaults`存储多个设置。您绝对不应该在其中存储大图像或二进制数据块！

崩溃日志显示读取和解析存储应用程序首选项的文件需要很长时间。通常这是因为文件太大。您的应用程序的首选项在第一次检查时会被读取，`+[NSUserDefaults standardUserDefaults]`一些 iOS 代码在启动时会执行此操作。（可能是为了检查语言偏好，或者是为了调试标志——但确切的原因并不那么重要，你第一次使用时仍然会遇到相同的行为`NSUserDefaults`。）

为了保存足够大的数据`0x8badf00d`，[Core Data](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/)可能是一个更好的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T15:16:11.397

我们刚刚隔离了一个与调用 Apple 服务器以检查应用内购买类似的启动崩溃。通过从销售中删除所有应用内购买，该应用重新开始为报告问题的用户运行。希望有帮助！

# c# - 使用另一个表单数据表

> ID：10036532
> 
> 赞同：0
> 
> 时间：2012-04-05T21:50:14.177
> 
> 标签：c#, sql-server

我有一个像主窗体这样的窗体，在 c# 中安装了其他窗体。但是我无法从主表单和其他表单访问已安装的其他表单的数据表。

所以我有兴趣从已安装的表单中“共享”一个数据表，我可以从其他表单中使用它。知道怎么做吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:52:08.240

您需要了解[可访问性级别](http://msdn.microsoft.com/en-us/library/ba0a1yw2%28v=vs.100%29.aspx)和基本[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)（[这里有更多信息](http://msdn.microsoft.com/en-us/library/dd460654.aspx)）。并确保您至少了解[基本原理](http://en.wikipedia.org/wiki/Object-oriented_programming#Fundamental_features_and_concepts)。[通过通过属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)（或`GetFoo()` [方法](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.100%29.aspx)）公开某些对象（例如数据表），您可以访问它。你需要意识到一个[表单](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)只是另一个[类](http://msdn.microsoft.com/en-us/library/ms173109.aspx)。

但是，您还需要考虑[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)和/或[演示和内容分离](http://en.wikipedia.org/wiki/Separation_of_presentation_and_content)；一个表单可能不是（通常也不**是**）共享这些东西的正确“对象”。所有的表单都应该关注它向用户呈现一个界面并显示一些数据。您可能需要考虑另一个持有数据表和/或更多数据逻辑的对象，并将该对象传递给 Form_A 和 Form_B，而不是让 Form_A 访问 Form_B 的公共属性。

# java - 将布尔对象与布尔基元进行比较

> ID：10036536
> 
> 赞同：-5
> 
> 时间：2012-04-05T21:50:55.247
> 
> 标签：java, boolean

这段代码的输出是什么？请解释如何在这里完成自动装箱或拆箱 id。

```
class MyBoolean
{
    Boolean[] bool = new Boolean[5];

    public static void main(String[] args)
    {
      new MyBoolean().myMethod();
    }

    public void myMethod()
    {
      if(bool[1]==true)
      {
        System.out.println("It's true");
      }
      else
      {
        System.out.println("It's false");
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T22:07:41.267

代码失败，`NullPointerException`因为`bool[1]`contains `null`。根据[Java 语言规范第 5.1.8 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)，a 的拆箱`Boolean`是通过调用引用来完成[`booleanValue()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html#booleanValue%28%29)的`Boolean`。因为在这种情况下，引用是`null`，所以你得到一个 NPE。

在对另一个答案的评论中，您写道：

> 问这个问题的原因是要了解我们是通过 AutoUnBoxing 还是通过 AutoBoxing 获得 NPE。据我了解，这是由于 AutoBoxing。

这是由于*拆箱*（从引用类型中提取原语），而不是装箱（将原语包装在引用类型中）。具体来说，来自[JLS 第 15.21.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.2)（*布尔等式运算符`==`和`!=`*）：

> 如果其中一个操作数的类型为`Boolean`，则进行拆箱转换（第 5.1.8 节）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T21:55:13.163

运行失败：bool[1] 为 null 并且比较抛出 NullPointerException。

# ios - 如何停止/播放视频

> ID：10036537
> 
> 赞同：0
> 
> 时间：2012-04-05T21:50:55.550
> 
> 标签：ios

```
#import "ViewController.h"

@implementation ViewController
@synthesize scrollView;

- (void)viewDidLoad
{
    [[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO];

    [self.view addSubview:scrollView];
    scrollView.contentSize = CGSizeMake(4096, 768);

    NSString *url = [[NSBundle mainBundle] pathForResource:@"F0" ofType:@"mov"];

    player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                          selector:@selector(movieFinishedCallback) 
                                          name:MPMoviePlayerPlaybackDidFinishNotification 
                                          object:player];
    player.view.frame = CGRectMake(0, 0, 1024, 768);
    player.scalingMode = MPMovieScalingModeAspectFill;
    [scrollView addSubview:player.view];
    [player play];

    UIImageView *image1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"29-30-p1.jpg"]];
    image1.frame = CGRectMake(1024,0,1024,768);
    image1.clipsToBounds = YES;
    [scrollView addSubview:image1];
    image1.animationImages = eyeFrames;
    image1.animationDuration = 0.25;
    image1.animationRepeatCount = 1;

    UIImageView *image2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"29-30-p2.jpg"]];
    image2.frame = CGRectMake(2048,0,1024,768);
    image2.clipsToBounds = YES;
    [scrollView addSubview:image2];

    UIImageView *image3 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"29-30-p3.jpg"]];
    image3.frame = CGRectMake(3072,0,1024,768);
    image3.clipsToBounds = YES;
    [scrollView addSubview:image3];

    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void) movieFinishedCallback:(NSNotification *) aNotification{
     MPMoviePlayerController *moviePlayer = [aNotification object];
     [[NSNotificationCenter defaultCenter] removeObserver:self
                                           name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:moviePlayer];
    [moviePlayer.view removeFromSuperview];
    [player release];

}

-(void)viewWillDisappear:(BOOL)animated{

    //NSLog(@"x=%f",scrollView.contentOffset.x);
    [player stop];

}

-(void)viewWillAppear:(BOOL)animated{
    [player play];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

伙计们，我不知道为什么`viewWillDisappear`and`viewWillAppear`循环不起作用。如果我滚动并在向后滚动时继续播放，我想停止视频。让我知道为什么它不起作用。顺便说一句，我不知道为什么视频结束后程序会终止。我在之前的项目中使用了相同的代码并且没有显示错误。我有点困惑。希望some1可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:43:04.050

你给`scrollView.contentSize = CGSizeMake(4096, 768);`这意味着当你滚动时视图不会消失或出现。滚动会按位置消失或出现。实际上滚动是在视图中。所以你需要在你滚动时操纵视频停止和播放。所以，你给框架`player`和当滚动移动位置出现时播放器位置然后播放它。当穿过播放器框架时停止它。在`scrollViewDidScroll`if else 条件下在方法中执行此播放和停止代码。

# winapi - 模拟 WM_GESTURE 事件

> ID：10036541
> 
> 赞同：1
> 
> 时间：2012-04-05T21:51:04.537
> 
> 标签：winapi, events, touch, mouseevent, gesture

如何在常规 Windows 桌面上模拟 WM_GESTURE 事件？

如有必要，我可以使用多个鼠标。我只想使用一个接口而不是硬编码它。

# java - 由于类长度导致Android验证器失败？

> ID：10036543
> 
> 赞同：0
> 
> 时间：2012-04-05T21:51:34.823
> 
> 标签：java, android

我正在编写我的第一个，当然是业余的，android 项目。目前我正在 viewpager 类中创建按钮，但我达到了在 instantiateItem 内添加代码、任何代码都会导致 viewpager 失败的地步。即使是不做任何事情的代码，例如： `int a = 1;` 只要它似乎是关键行号就会导致崩溃。整个程序运行良好，然后我在 instantiateItem 中的任何位置添加一行任何代码，然后它崩溃了。Android 构建目标是 4.0，min sdk 是 14。模拟器和我的 Galaxy nexus 手机都发生崩溃。viewpager 内的代码总长度为 1000 行，包括注释和空格，删除后的代码约为 850 行。

确切的错误：

VFY：0x9c6[1] 处的无效切换目标 26 (-> 0x9e0)

VFY：在 0x9c6 拒绝操作码 0x2b

W/dalvikvm(8886): VFY: 拒绝 Lcharacter/sheet/CharacterViewer$MyPagerAdapter;.instantiateItem (Landroid/view/View;I)Ljava/lang/Object;

W/dalvikvm(8886)：验证程序拒绝类 Lcharacter/sheet/CharacterViewer$MyPagerAdapter；

W/dalvikvm(8886): threadid=1: 线程以未捕获的异常退出 (group=0x40a661f8)

E/AndroidRuntime(8886): java.lang.VerifyError: character/sheet/CharacterViewer$MyPagerAdapter

字符查看器活动的代码：

```
public class CharacterViewer extends Activity { 
final DBAdapter db = new DBAdapter(this);   
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pager);     
    Intent startCharacterViewer = getIntent();
    final int activePagerPage = startCharacterViewer.getIntExtra("activePagerPage", 0);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(activePagerPage); } 

private class MyPagerAdapter extends PagerAdapter {

    Intent startCharacterViewer = getIntent();
    final int activeCharacter = startCharacterViewer.getIntExtra("activeCharacter", 0);
    public int getCount() {
        return 5;          
    }

    public Object instantiateItem(View collection, int position) {
        db.open();
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        String name = db.getAttribute(activeCharacter, 1);
        int level = Integer.valueOf(db.getAttribute(activeCharacter, 2));
        //repeats for many variables (106 total)
        db.close();
        View v = null;

        switch (position) {
        //case 0
        case 0:
            v = inflater.inflate(R.layout.details, null); 
            break;
        //case 1
        case 1:
            v = inflater.inflate(R.layout.features, null);
            break;
        //case 2    
        case 2:
            v = inflater.inflate(R.layout.summary, null); 
            TextView text1 = (TextView) v.findViewById(R.id.textViewName);
            text1.setText (name + "    level " + level + " " + characterClass);
            //repeats many times for more text views
            //many many buttons and text views defined here
        //case 3   
        case 3: 
            v = inflater.inflate(R.layout.skills, null);
            //more text views and buttons defined here

        case 4:
            v = inflater.inflate(R.layout.inventory, null);
            break;
        }

        ((ViewPager) collection).addView(v, 0);

        return v;
    } 
```

按钮和文本视图集代码嵌套在 instantiateItem 的 case 区域内。按钮之一的示例：

```
 TextView hpUpdaterText1 = (TextView) v.findViewById(R.id.textViewHP);
            TextView hpUpdaterText2 = (TextView) v.findViewById(R.id.textViewSurges);
            final int a1 = hpMax;
            final int b1 = hpSurgeMax;
            View.OnClickListener hpModifierListener = new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    final Dialog myDialog = new Dialog(CharacterViewer.this);
                    myDialog.setContentView(R.layout.edithitpoints);
                    myDialog.setTitle("Modify Permanent Health Values");
                    myDialog.setCancelable(true);
                    myDialog.show();                    
                    EditText text1 = (EditText) myDialog.findViewById(R.id.editTextHPMax);
                    text1.setText ("" + (a1));                      
                    EditText text2 = (EditText) myDialog.findViewById(R.id.editTextSurges);
                    text2.setText ("" + (b1));
                    //Cancel button
                    Button button1 = (Button) myDialog.findViewById(R.id.editHitPointsCancel);
                    button1.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            myDialog.dismiss();
            }});
                    //OK button
                    Button button2 = (Button) myDialog.findViewById(R.id.editHitPointsOK);
                    button2.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            EditText text1 = (EditText) myDialog.findViewById(R.id.editTextHPMax);
                            String a = text1.getText().toString();
                            if( a.length() == 0 ) {text1.setError( "Value Required" );}
                            EditText text2 = (EditText) myDialog.findViewById(R.id.editTextSurges);
                            String b = text2.getText().toString();
                            if( b.length() == 0 ) {text2.setError( "Value Required" );}
                            if (a.length() != 0 && b.length() != 0){
                            db.open();
                            db.updatePermanentHP(activeCharacter, a, b);                                
                            db.close();
                            //restart activity to update variables
                            Intent startCharacterViewer = new Intent("android.intent.action.SUMMARY");
                            startCharacterViewer.putExtra("activeCharacter", activeCharacter);
                            finish();
                            startCharacterViewer.putExtra("activePagerPage", 2);
                            startActivity(startCharacterViewer);
                            myDialog.dismiss();}
                            else {Toast msg = Toast.makeText(CharacterViewer.this,
                                    "Please enter a value for" + "\n" + "all available fields", Toast.LENGTH_SHORT);
                                    msg.show();;}
            }});
            }};
            hpUpdaterText1.setOnClickListener(hpModifierListener);
            hpUpdaterText2.setOnClickListener(hpModifierListener); 
```

只要在 instantiateItem 内的任何地方添加任何代码行都会导致错误。例如，我可以将这段代码剪切并粘贴到 instantiateItem 中的任何位置，这会使程序崩溃。这些变量名不用于任何用途。

示例问题代码块：

```
 int uuu = 1;
        int aaa = 2;
        int bbb = 3;
        int ccc = 4;
        int ddd = 5;
        int eee = 6; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:55:00.250

我相当肯定你的问题不是由于课程长度。我见过 8000 行长的旧 J2ME 代码，因为它们将代码全部折叠到一个类中（出于节省空间的原因）。现代手机和 IDE 肯定可以支持更多。发布您的一些代码，也许我们可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:25:50.693

我通过将所有文本视图和按钮代码从 instantiateItem 方法移到它们自己的方法中来解决这个问题，然后为每种情况调用这些方法，而不是将代码直接放在 instantiateItem 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:32:57.533

带有“正常大小”代码片段（即少于 10000 行）的 dex VRFY 错误消息意味着您在以下任一方面遇到了错误：

1.  Dalvik 字节码验证器。[Froyo Dalvik 字节码验证器中存在一个错误，在这里](http://code.google.com/p/android/issues/detail?id=11552)看起来很相似。您是否在 Froyo 上部署/测试？

2.  Java 编译器中的一个错误。如果 Java 编译器生成不正确的 Java 字节码，那么 Dalvik 字节码也将不正确。如果您使用 Eclipse 或 javac 进行编译，这不太可能发生。

3.  dexer 中的一个错误。dexer 将 Java 字节码翻译成 Dalvik 字节码。如果翻译过程中有错误，则会发出不正确的 Dalvik 字节码。

# ruby-on-rails - rails 应用程序部署错误 - 'blueprint/screen.css 未预编译'

> ID：10036544
> 
> 赞同：0
> 
> 时间：2012-04-05T21:51:40.723
> 
> 标签：ruby-on-rails, deployment, capistrano, blueprint-css

我正在尝试部署一个 Rails 应用程序......并且我正在遵循 capistrano 部署指南。我被困在我应该在 rails 控制台中运行 app.get("/") 的测试阶段。当我这样做时，我收到一条与我在我的应用程序中使用的蓝图 css 工具相关的错误消息。有没有人遇到过关于蓝图未预编译的类似错误？我不知道接下来要做什么来尝试修复此错误。提前感谢您提出的任何建议！

这是日志文件的错误输出：

```
Started GET "/" for 12.13.14.15 at 2012-04-05 14:15:50 -0700
Processing by PagesController#home as HTML
Rendered pages/home.html.erb within layouts/application (1.1ms)
Rendered layouts/_stylesheets.html.erb (1.3ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (blueprint/screen.css isn't precompiled):
    1: <!--[if lt IE9]>
    2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    3: <![endif]-->
    4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    5: <%= stylesheet_link_tag 'blueprint/print', :media => 'print' %>
    6: <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
    7: <%= stylesheet_link_tag 'custom', :media => 'screen' %>
  app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb___2010157553399413981_33056460'
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__4294160261947576619_31749320' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:59:26.993

尝试将其添加到您的 config/application.rb

config.assets.precompile = %w(screen.css)

# sql - 如果不使用存储过程，如何检查表是否存在并返回值（0/1）？

> ID：10036546
> 
> 赞同：1
> 
> 时间：2012-04-05T21:52:12.620
> 
> 标签：sql, sql-server, tsql

我只能通过存储过程看到这项工作，我无法弄清楚语法。我基本上有一些外部系统调用 SQL 查询，我想首先使用类似于以下的代码来验证表是否存在：

```
if (EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'dbo' AND  TABLE_NAME = 'OrderUpdates'))
  BEGIN
    --return 1 or 0 if it exists or doesn't exist
  END 
```

我无法让 return 语句正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:55:47.430

```
 SELECT CAST(COUNT(*) AS BIT) -- Should be unique to give 0 or 1 as result
 FROM INFORMATION_SCHEMA.TABLES
 WHERE TABLE_SCHEMA = 'dbo'
    AND TABLE_NAME = 'OrderUpdates'
    -- Not sure if you want views or not:
    AND TABLE_TYPE = 'BASE TABLE' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:55:33.360

我不太明白你在做什么 - RETURN 仅在存储过程或函数中有效。

如果你想要一个集合中的相同的东西（因为调用者期待一个行集），那么这样的事情可以工作：

```
SELECT 1 AS DoesItExist
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'dbo'
    AND TABLE_NAME = 'OrderUpdates'
UNION ALL
SELECT 0
WHERE NOT EXISTS (SELECT *
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'dbo'
    AND TABLE_NAME = 'OrderUpdates') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:06:51.307

SQL Server 有一个名为“tables”的表，其中包含数据库中的表列表。所以下面的代码应该会有所帮助：

```
CREATE PROCEDURE DoesTableExist(@table VARCHAR(50), @exists BIT OUTPUT)
AS
BEGIN
IF EXISTS(SELECT * FROM sys.tables WHERE name = @table)
    SET @exists = 1
ELSE
    SET @exists = 0

RETURN @exists
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T22:08:31.173

你可以这样做：

```
USE SomeDatabase;
IF OBJECT_ID('YourTable', 'U') IS NOT NULL 
BEGIN
    SELECT 1
END ELSE BEGIN
    SELECT 0
END 
```

如果您正在寻找用户表以外的类型，则可以将“U”更改`OBJECT_ID`为由中列出的类型确定的正确值[`sys.objects`](http://msdn.microsoft.com/en-us/library/ms190324.aspx)

# zend-studio - Zend Studio 9 带有新行的标签

> ID：10036550
> 
> 赞同：4
> 
> 时间：2012-04-05T21:52:39.173
> 
> 标签：zend-studio

```
$arr = array(
        ); 
```

当我在定义数组时按 Enter 换行时，它看起来像这样。它始终是 2 个选项卡而不是 1 个。我在 Zend Studio 8 中没有这个问题。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T10:28:17.773

## 视窗

`Window`> 首选项 > PHP > 代码样式 > 格式化程序 > `Edit...`>**换行**

**将数组初始值**设定项的默认缩进设置为**0**。

## 苹果电脑

`Zend Studio`> 首选项 > PHP > 代码样式 > 格式化程序 > `Edit...`>**换行**

**将数组初始值**设定项的默认缩进设置为**0**。

# ruby-on-rails - 验证：排除正则表达式

> ID：10036555
> 
> 赞同：0
> 
> 时间：2012-04-05T21:53:07.530
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, validation, ruby-on-rails-3.1

验证如何排除正则表达式？

我正在寻找这样的东西：

```
validates_format_of :string, :without => /\A(something)\Z/ 
```

这里[提到了](https://stackoverflow.com/a/4933515/18706)，但我不认为是真实的东西（`Unknown validator: 'WithoutValidator`）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-05T22:08:00.487

你可以自己写：

```
validate :name_exclude_pattern

def name_exclude_pattern
  unless self.name !~ /\A(something)\Z/
    errors.add(:name, "invalid format.")
  end
end 
```

当然，这必须为您要检查的每个属性完成。

# ios - UILabel 不会显示在应用程序中

> ID：10036563
> 
> 赞同：0
> 
> 时间：2012-04-05T21:53:58.490
> 
> 标签：ios, ipad, ios5, uilabel

我完全被这个难住了。

我在让 UILabels 显示在应用程序中时遇到问题。

我在 xib 中添加了三个标签。除了文本、文本对齐方式和它们连接到的 IBOutlet 之外，它们都具有相同的设置。当应用程序加载时，屏幕上只显示三个标签中的一个。我已经做了我能想到的一切来解决这个错误并修复它，但我却一无所获。

我已执行以下操作以尝试解决此问题：

1.  验证 IBOutlets 在 IB 中正确连接
2.  删除并重新连接 IB 中的出口连接
3.  验证标签是 alpha=1，并且 hidden=NO
4.  完全删除标签，重新创建并重新连接它们
5.  NSlogged 他们以确保他们不是零
6.  NSlogged 他们的属性以确保他们有有效的 CGRects，并且所有其他设置都符合预期
7.  许多干净的构建
8.  从设备中删除应用程序
9.  在设备上重新安装应用程序
10.  退出并重新启动 xcode
11.  将一个全新的标签拖到 IB 中的 xib 上，更改其背景颜色，输入静态文本。这个 UILabel 也没有显示
12.  将各种 UI 元素（按钮、控件、开关、我的一些 UI 图像）拖到标签应该在的 xib 区域中，所有这些都显示
13.  验证没有其他视图阻碍布局和/或覆盖标签
14.  在代码中验证我没有以任何方式更改标签，使它们不可见（即没有 alpha 或隐藏更改，文本和背景颜色不清晰，我没有覆盖内存位置，重新分配值，释放）
15.  以编程方式创建标签并在适当的位置绘制它们的矩形
16.  我什至得到了一个不同的设备并在它上面执行了相同的设备相关步骤
17.  谷歌搜索答案
18.  找到 Greg Fiumara 的博客并按照他的步骤进行操作
19.  我可能还尝试了其他一些我现在不记得的事情

完成所有这些之后，我仍然无法显示标签。而我在这个问题开头提到的第三个标签显示得很好。我完全被难住了。我可以包含代码片段，但我不确定这会如何帮助，尤其是考虑到上面的步骤 11、12 和 13。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:28:52.067

因为它与您列表中的第 7 位有关……我以前在 xcode 中遇到过类似这样的奇怪东西。您是否尝试过运行 Onyx？这已经修复了与 xcode 相关的各种项目。似乎 xcode 在 Mac 上留下了许多残留文件和幽灵，可能会产生非常奇怪的结果……尤其是如果您一次执行大量应用程序或示例。

[http://www.macupdate.com/app/mac/11582/onyx](http://www.macupdate.com/app/mac/11582/onyx)

希望这可以帮助。（如果没有，请上传示例代码，我/我们可以看一下） Mike

# python - 从旧样式转换为新样式后可以 Unpickle 类实例吗？

> ID：10036565
> 
> 赞同：6
> 
> 时间：2012-04-05T21:54:17.437
> 
> 标签：python, inheritance, pickle

在 python 中，是否有可能在转换为新样式后取消腌制为旧样式 python 类的对象？（即，具有不同“类签名”的对象）。*

例如，假设某些实例被保存为：

```
class foo: # old style 
```

然后在将类更改为从对象继承后腌制了更多对象：

```
class foo(object): # new style 
```

用一个 'ed 的对象`pickle.dump`可以被`pickle.load`同一个样式类 'ed，但任何一个都不会加载两者。我认为pickle使用的策略会根据继承发生变化（从对象继承的类有一个自动定义的 __reduce__ 方法，但没有继承的类没有）。当尝试从没有继承的代码（旧式定义）中加载带有继承性的旧式泡菜时，我得到与此[SO question](https://stackoverflow.com/q/3855428/218118)中看到的相同的参数错误；即使第二个参数是多余的，它仍然会更改“类签名”和预期的参数，并阻止加载。为了解决这个问题，我很乐意编写一个 unpickler，尽管我担心它可能涉及两个单独的子类 unpicklers [a la the docs](http://docs.python.org/library/pickle.html#subclassing-unpicklers)...如果我知道如何正确地解开每一个，我会很好地做到这一点。

关于我的情况的一点背景......我正在使用 TrialHandler 类来保存和重新加载按钮按下和反应时间以进行行为心理学实验。我们重构了 TrialHandler 类以从更抽象的 baseTrialHandler 继承，但这样做暂时将类签名更改为从*object*继承。但是，我们无法解开旧的 trial_handler 文件，所以它被改回来了。我想查看使用两个版本的试验处理程序运行的同一实验的数据，因此想在同一个脚本中取消两种类型的已保存日志文件。

或者，如果我不能编写一个自定义 unpickler 来解开两个对象，是否有另一种方法来序列化它们？我尝试直接转储到 yaml，但看起来我必须将类注册为可以被 yaml 化的东西，无论如何。

PsychoPy 邮件列表中包含特定错误问题的完整[描述。](https://groups.google.com/forum/?fromgroups#!topic/psychopy-dev/NEd-pm4lXOk)任何解释中间酸洗细节的博客文章，甚至是 python 继承，都将受到欢迎；我发现的最接近的是一个很好的解释为什么[酸洗是不安全](http://nadiana.com/python-pickle-insecure)的，将酸洗描述为“简单的基于堆栈的虚拟机”，这很好，但并不足以让我弄清楚我自己的基础知识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T03:49:33.890

遍历部分：

1.  Python中没有所谓的“类签名”，虽然我从你的问题中得到了这个想法
2.  不从 Python 2 程序中的“对象”继承应被视为错误。不从对象继承的类 - 也称为“旧样式”类，只是为了向后兼容而保留在语言上，当在 Python 2.2 中引入新样式类时（大约 2000/2001 年） - 旧样式类的一致性要低得多并且缺乏许多使今天的 python 成为如此好的语言的特性。

顺便说一句：unpickle 将尝试根据类限定名称反序列化对象 - 如在酸洗时`<module>.<class>`对象的属性中所示。`__class__.__name__`所以有可能有一种天真的方式，在 unpickle 异常（它引发 TypeError）上，交换具有相同名称的可用类，然后再次重试 unpickle 操作：你的类应该继承自“object”（更具体地说，有一个基于“类型”的元类）

至于我提到的例子，只要写一些东西：

```
try:
    new_obj = pickle.load(data_stream)
except TypeError: # if you know this was caused due to the new version of "Foo" class:
    current_foo = foomodule.Foo
    foomodule.Foo = foomodule.OldFoo
    new_obj = pickle.load(data_stream)
    foomodule.Foo = current_foo 
```

# haskell - 获取里面的函数名

> ID：10036567
> 
> 赞同：8
> 
> 时间：2012-04-05T21:54:32.970
> 
> 标签：haskell, template-haskell, hunit

我有一堆函数，比如：`method1`, `method2`, `method3`. 对于所有这些都有`HUnit`测试功能，例如：`testMethod1`, `testMethod2`, `testMethod3`.

```
testMethod1 = TestCase $
  assertEqual "testmethod1" ...

testMethod2 = TestCase $
  assertEqual "testmethod2" ...

testMethod3 = TestCase $
  assertEqual "testmethod3" ... 
```

我想避免将函数名称作为错误消息的前缀进行冗余复制，并将其称为：

```
testMethod1 = TestCase $
  assertEqual_ ... 
```

如何实现（赞赏任何“魔术”技巧）？

所以实际上的问题是如何在它的定义中使用函数名称？

* * *

**更新**。

从原始问题中实际上并不清楚，我也想处理这种情况：

```
tProcess = TestCase $ do
  assertEqual "tProcess" testResult $ someTest
  assertEqual "tProcess" anotherTestResult $ anotherTest
  assertEqual "tProcess" resultAgain $ testAgain 
```

最后我想写这样的东西：

```
tProcess = TestCase $ do
  assertEqual_ testResult $ someTest
  assertEqual_ anotherTestResult $ anotherTest
  assertEqual_ resultAgain $ testAgain 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T22:05:28.017

您不能直接执行此操作（即，您的测试用例以 开头`testMethodN = ...`），但您可以使用[Template Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)来获得：

```
testCase "testMethod1" [| do
    assertEqual_ a b
    assertEqual_ c d
 |] 
```

这涉及编写`testCase :: String -> Q Exp -> Q [Dec]`，将测试用例的名称和引用的表达式转换为声明列表的函数。例如：

```
{-# LANGUAGE TemplateHaskell #-}

import Data.Char
import Control.Applicative
import Control.Monad
import Language.Haskell.TH
import Data.Generics

assertEqual :: (Eq a) => String -> a -> a -> IO ()
assertEqual s a b = when (a /= b) . putStrLn $ "Test " ++ s ++ " failed!"

assertEqual_ :: (Eq a) => a -> a -> IO ()
assertEqual_ = error "assertEqual_ used outside of testCase"

testCase :: String -> Q Exp -> Q [Dec]
testCase name expr = do
    let lowerName = map toLower name
    e' <- [| assertEqual lowerName |]
    pure <$> valD
        (varP (mkName name))
        (normalB (everywhere (mkT (replaceAssertEqual_ e')) <$> expr))
        []
  where
    replaceAssertEqual_ e' (VarE n) | n == 'assertEqual_ = e'
    replaceAssertEqual_ _ e = e 
```

这里的基本思想是生成给定名称的定义，并将`assertEqual_`引用表达式中每次出现的变量替换为. 感谢 Template Haskell 对[Scrap Your Boilerplate](http://hackage.haskell.org/package/syb)的支持，我们不需要遍历整个 AST，只需为每个节点指定一个转换即可。`assertEqual *lowerName*``Exp`

请注意，它`assertEqual_`必须是具有正确类型的绑定标识符，因为引用的表达式在传递给之前会进行类型检查`testCase`。此外，`testCase`由于 GHC 的阶段限制，必须在与其使用的模块不同的模块中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-03T12:25:59.877

现有的答案解释了如何使用元编程来做到这一点，但*避免*这个问题的一种方法是让匿名测试以他们的名字作为参数。

然后我们可以使用 a`Data.Map`将它们与它们的名称相关联（在这种情况下，我只是使用原始断言，加上`map-syntax`包中的一些语法糖）：

```
import Data.Map
import Data.Map.Syntax
import Test.HUnit

assertEqual_ x y n = assertEqual n x y

Right tests = runMap $ do
  "test1" ## assertEqual_ 1 2
  "test2" ## assertEqual_ 1 1
  "test3" ## assertEqual_ 3 2 
```

要运行这些，我们可以`Data.Map`使用以下函数折叠：

*   将 name 和 assertion-waiting-for-a-name 作为参数
*   将名称传递给 assertion-waiting-for-a-name
*   将结果传递`Assertion`给`TestCase`
*   运行`TestCase`
*   绑定到另一个单子动作，使用`>>`

我们使用`return ()`默认的一元动作：

```
runTests = foldWithKey go (return ()) tests
    where go name test = (runTestTT (TestCase (test name)) >>) 
```

这给出了如下结果：

```
> go
### Failure:
test1
expected: 1
 but got: 2
Cases: 1  Tried: 1  Errors: 0  Failures: 1
Cases: 1  Tried: 1  Errors: 0  Failures: 0
### Failure:
test3
expected: 3
 but got: 2
Cases: 1  Tried: 1  Errors: 0  Failures: 1 
```

# wpf - wpf 组合框键/值字典

> ID：10036568
> 
> 赞同：0
> 
> 时间：2012-04-05T21:54:42.190
> 
> 标签：wpf, dictionary, combobox

我有一个用于选择文件扩展名的组合框，例如“图像，（*.png，*.jpg）”。我想从字典键/值对中获取数据。我为第一部分添加了字符串，例如“图像”，对于扩展我添加了一个列表，因为可以有多个。我在显示 SaveFileDialog 或 OpenFileDialog 时使用此数据。如何使用这些扩展作为 SaveFileDialog 的过滤器？你能提供帮助吗？

```
ExtensionCollection = new Dictionary<string, IList<String>>();
ExtensionTypeCollecction = new List<String>();
Extensions = new List<IList<String>>();
perExtension = new List<String>();
perExtension.Add("*.png");
perExtension.Add("*.jpg");
Extensions.Add(perExtension);
ExtensionTypeCollecction.Add("Images");
ExtensionCollection.Add("Images", perExtension); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:27:00.003

我想这就是你所追求的：

```
var d = new Dictionary<string, IList<string>>();
d.Add("Images", new List<string>{ "*.png", "*.jpg" });

var key = "Images";
var extensions = d["Images"];

var filter = key + "|" + string.Join(";", extensions.ToArray()); 
```

给予

```
filter = "Images|*.png;*.jpg" 
```

或者你可以这样做

```
var extString = string.Join(";", extensions.ToArray());
var filter = key +" (" + extString + ")|" + extString; 
```

这导致

```
filter = "Images (*.png;*.jpg)|*.png;*.jpg" 
```

如果需要，您当然可以添加常用的`"|All files (*.*)|(*.*)"`过滤器选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:59:53.603

这有帮助吗？

```
 foreach (string ext in Dictionary["images"])
   {
       Debug.WriteLine(ext);
   } 
```

# php - 从 MySQL 数据库中检索图像并使用 PHP 保存到服务器目录

> ID：10036569
> 
> 赞同：0
> 
> 时间：2012-04-05T21:54:47.867
> 
> 标签：php, mysql, json

我正在寻找一种方法将存储在不同服务器上的 MySQL 数据库中的图像保存到我当前正在使用的服务器上的目录中。我正在检索 JSON 数据，每个条目都显示一个 url，该 url 直接链接到**存储在数据库中**的图像。这是我目前正在做的，没有成功。

```
<?php
   $url = 'https://secure.example.com/app/api?accountid=000&apikey=000&action=getview&format=json&viewid=0000&tableid=0000';

   $ch = curl_init($url);
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
   $response = curl_exec($ch);
   curl_close($ch);

  $imageList = json_decode($response,true);

  $x = 1;

  foreach ($imageList as $imageItem) {
     $img = $imageItem['face_image'];

     echo "<img src='" . $img . "' width='150' height='200'/>"; //THIS WORKS, DISPLAYS IMAGES

     $dest_dir = "/uploads/"; //THIS DIRECTORY IS 777 CURRENTLY
     $src_file = $img;

     file_put_contents($dest_dir.$x.".jpg", $src_file);

     $x++;
}?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T21:58:34.500

您的目标似乎很可疑：`$dest_dir = "/uploads/"`这意味着服务器的根目录，即。, 等在哪里`bin`，`lib`而不是网络服务器的 DOCUMENT_ROOT。你可能没有权限在那里写。尝试：

`$dest_dir = $_SERVER['DOCUMENT_ROOT']."/uploads/"`

# java - 我需要帮助使用快速排序算法的分区步骤来分区数组和字符串的双端队列

> ID：10036577
> 
> 赞同：0
> 
> 时间：2012-04-05T21:55:16.610
> 
> 标签：java, arrays, string, quicksort, deque

因此，我有两种方法可以接收字符串数组或 Deque，以及枢轴字符串：

*   > 公共静态双端队列分区（双端队列，字符串）；

*   > 公共静态字符串[]分区（字符串[]，字符串）；

我想弄清楚的是它们将如何返回一个新数组或字符串的双端队列，其中包含与输入相同的字符串，但小于或等于枢轴的元素存储在新数组的开头或双端队列。字符串是否出现多次都没关系。

到目前为止，我发现的所有解决方案都涉及使用整数，而不是字符串，我不确定如何使它们适应这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:05:17.193

使用双端队列，您首先创建一个新的空双端队列，然后将字符串 <= 枢轴添加到双端队列的前面，将那些 > 枢轴添加到后面。使用 String[] 您基本上是手动模拟双端队列。您可以通过使用真正的双端队列然后在最后转换为字符串数组来做到这一点。或者您可以先创建结果字符串数组并维护两个单独的索引，一个用于前面，一个用于后面。前面的从 0 开始，后面的从 result.length - 1 开始。你应该能够自己弄清楚其余的。

# shell - 插入 Vim 函数参数和 shell 命令

> ID：10036578
> 
> 赞同：3
> 
> 时间：2012-04-05T21:55:18.737
> 
> 标签：shell, vim

我编写了一个可以重新加载 Safari 的小 .applescript 文件。我试图将它的执行挂钩到 vim 的 BufWritePost 事件中（因此 Safari 会在文件保存时自动重新加载）。

我把它放在我的 .vimrc 中：

```
function! SaveAndReloadSafari(delay) 
   " THIS IS WHERE MY PROBLEM IS>>>>>>>>>>>>>>> 
   !osascript ~/MySrc/applescript/reloadSafari.APPLESCRIPT a:delay
endfunction

if !exists("b:my_autocommands_loaded")
  let b:matts_autocommands_loaded = 1 

  au BufWritePost *.html,*\.css,*.js call SaveAndReloadSafari(0)
  au BufWritePost *.scss call SaveAndReloadSafari(2)
endif 
```

如您所见，我想在保存 .scss 文件后添加 2 秒延迟（以允许我的 SCSS 文件自动编译为 CSS）

我已经确认唯一缺少的部分是我使用 shell 命令插入 a:delay 的语法。（执行不带`delay`参数的命令可以正常工作）。

我的语法有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T21:59:22.630

您可以使用`:exec`

```
exec '!osascript ~/MySrc/applescript/reloadSafari.APPLESCRIPT ' . a:delay 
```

# python - Python CSV 作业程序

> ID：10036583
> 
> 赞同：0
> 
> 时间：2012-04-05T21:55:52.347
> 
> 标签：python, csv

我有一个家庭作业要做，与通过 csv 和函数读取文件有关。

基本思想是计算两年内足球运动员的冲球得分。我们使用提供给我们的文件中的数据。示例文件将是：

```
名称,,pos,team,g,rush,ryds,rtd,rtdr,ravg,fum,fuml,fpts,year
AJ,Feeley,QB,STL,5,3,4,0,0,1.3,3,2,20.3,2011
亚伦,布朗,RB,DET,1,1,0,0,0,0,0,0,0.9,2011
亚伦,罗杰斯,QB,GB,15,60,257,3,5,4.3,4,0,403.4,2011
阿德里安,彼得森,RB,MIN,12,208,970,12,5.8,4.7,1,0,188.9,2011
Ahmad,Bradshaw,RB,NYG,12,171,659,9,5.3,3.9,1,1,156.6,2011

```

换句话说，我们必须从文件中删除第一行，然后读取其余行，以逗号分隔。

要计算 rusher 评分，我们需要：

> Yds 是每次尝试的平均码数增益。这是 [总码数 / (4.05 * 尝试)]。如果此数字大于 2.375，则应使用 2.375。
> 
> perTDs 是每次进位达阵的百分比。这是 [(39.5 * 达阵数) / 尝试]。如果此数字大于 2.375，则应使用 2.375。
> 
> perFumbles 是每次进位失败的百分比。这是 [2.375 - ((21.5 * fumbles) / 尝试)]。
> 
> rusher 评分为 [Yds + perTDs + perFumbles] * (100 / 4.5)。

我到目前为止的代码：

```
playerinfo = []
teaminfo10 = []
teaminfo11 = []

import csv

file = raw_input("Enter filename: ")
read = open(file,"rU")
read.readline()
fileread = csv.reader(read)

#Each line is iterated through, and if rush attempts are greater than 10, the
#player may be used for further statistics.
for playerData in fileread:
    if int(playerData[5]) > 10:

        attempts = int(playerData[5])
        totalYards = int(playerData[6])
        touchdowns = int(playerData[7])
        fumbles = int(playerData[10])

        #Rusher rating for each player is found. This rating, coupled with other
        #data about the player is formatted and appended into a list of players.
        rushRating = ratingCalc(attempts,totalYards,touchdowns,fumbles)
        rusherData = rushFunc(playerData,rushRating)
        playerinfo.append(rusherData)

        #Different data about the player is formatted and added to one of two
        #lists of teams, based on year. 
        teamData = teamFunc(playerData)
        if playerData[13] == '2010':
            teaminfo10.append(teamData)
        else:
            teaminfo11.append(teamData)

#The list of players is sorted in order of decreasing rusher rating.
playerinfo.sort(reverse = True)
#The two team lists of players are sorted by team.
teaminfo10.sort()
teaminfo11.sort()

print "The following statistics are only for the years 2010 and 2011."
print "Only those rushers who have rushed more than 10 times are included."
print
print "The top 50 rushers based on their rusher rating in individual years are:"

#50 players, in order of decreasing rusher ratings, are printed along with other
#data.
rushPrint(playerinfo,50)

#A similar list of running backs is created, in order of decreasing rusher
#ratings.
RBlist = []
for player in playerinfo:
    if player[2] == 'RB':
        RBlist.append(player)

print "\nThe top 20 running backs based on their rusher rating in individual\
years are:"
#The top 20 running backs on the RBlist are printed, with other data.
rushPrint(RBlist,20)

#The teams with the greatest overall rusher rating (if their attempts are
#greater than 10) are listed in order of decreasing rusher rating, for both 2010
#and 2011.
teamListFunc(teaminfo10,'2010')

teamListFunc(teaminfo11,'2011')

#The player(s) with the most yardage is printed.
yardsList = mostStat(6,fObj,False)
print "\nThe people who rushed for the most yardage are:"
for item in yardsList:
    print "%s rushing for %d yards for %s in %s."\
    % (item[1],item[0],item[2],item[3])

#The player(s) with the most touchdowns is printed.
TDlist = mostStat(7,fObj,False)
print"\nThe people who have scored the most rushing touchdowns are:"
for item in TDlist:
    print "%s rushing for %d touchdowns for %s in %s."\
    % (item[1],item[0],item[2],item[3])

#The player(s) with the most yardage per rushing attempt is printed.
ypaList = mostStat(6,fObj,True)
print"\nThe people who have the highest yards per rushing attempt with over 10\
rushes are:"
for item in ypaList:
    print "%s with a %.2f yards per attempt rushing average for %s in %s."\
    % (item[1],item[0],item[2],item[3])

#The player(s) with the most fumbles is printed.
fmblList = mostStat(10,fObj,False)
print"\nThere are %d people with the most fumbles. They are:" % (len(fmblList))
for item in fmblList:
    print "%s with %d fumbles for %s in %s." % (item[1],item[0],item[2],item[3])

def ratingCalc(atts,totalYrds,TDs,fmbls):
    """Calculates rusher rating."""
    yrds = totalYrds / (4.05 * atts)
    if yrds > 2.375:
        yrds = 2.375

    perTDs = 39.5 * TDs / atts
    if perTDs > 2.375:
        perTDs = 2.375

    perFumbles = 2.375 - (21.5 * fmbls / atts)

    rating = (yrds + perTDs + perFumbles) * (100/4.5)

    return rating    

def rushFunc(information,rRating):
    """Formats player info into [rating,name,pos,team,yr,atts]"""
    rusherInfo = []
    rusherInfo.append(rRating)
    name = information[0] + ' ' + information[1]
    rusherInfo.append(name)
    rusherInfo.append(information[2])
    rusherInfo.append(information[3])
    rusherInfo.append(information[13])
    rusherInfo.append(information[5])

    return rusherInfo

def teamFunc(plyrInfo):
    """Formats player info into [team,atts,yrds,TDs,fmbls] for team sorting"""
    teamInfo = []
    teamInfo.append(plyrInfo[3])
    teamInfo.append(plyrInfo[5])
    teamInfo.append(plyrInfo[6])
    teamInfo.append(plyrInfo[7])
    teamInfo.append(plyrInfo[10])

    return teamInfo

def rushPrint(lst,num):
    """Prints players and their data in order of rusher rating."""
    print "Name                           Pos   Year  Attempts   Rating  Team"
    count = 0
    while count < num:
        index = lst[count]
        print "%-30s %-5s %4s  %5s      %3.2f  %s"\
              % (index[1],index[2],index[4],index[5],index[0],index[3])
        count += 1 
```

所以，是的，还有很多我必须定义的功能。但是到目前为止，您对代码有何看法？效率低吗？你能告诉我它有什么问题吗？因为在我看来这段代码会非常长（比如 300 行左右），但是老师说它应该是一个相对较短的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:55:01.167

这是一段代码，可以大大简化您的整个项目。

理解手头的任务可能需要一点时间，但总的来说，当您处理正确的数据类型和“关联数组”（dicts）时，这将使您的生活更加轻松

```
import csv

reader = csv.DictReader(open('mycsv.txt', 'r'))
#opens the csv file into a dictionary

list_of_players = map(dict, reader)
#puts all the dictionaries (by row) as a separate element in a list. 
#this way, its not a one-time iterator and all your info is easily accessible

for i in list_of_players:
    for stat in ['rush','ryds','rtd','fum','fuml','year']:
        i[stat] = int(i[stat])
    #the above loop makes all the intended integers..integers instead of strings
    for stat in ['fpts','ravg','rtdr']:
        i[stat] = float(i[stat])
    #the above loop makes all the intended floats..floats instead of strings

for i in list_of_players:
    print i['name'], i[' '], i['fpts']
    #now you can easily access and loop through your players with meaningful names
    #using 'fpts' rather than predetermined numbers [5] 
```

此示例代码展示了使用他们的姓名和统计数据（即名字、姓氏和 fpts）是多么容易：

```
>>> 
A.J. Feeley 20.3
Aaron Brown 0.9
Aaron Rodgers 403.4
Adrian Peterson 188.9
Ahmad Bradshaw 156.6 
```

当然，为了获得所有请求的统计信息（最大值等），需要进行一些调整，但是通过从一开始就保持数据类型正确，这使得执行这些任务变得不那么冗长。

现在（使用这些结构）可以在不到 300 行的时间内完成这项任务，而且您使用 python 的次数越多，您将学习完成它们的传统习语。lambda 和 sorted() 是你会爱上的函数的例子......及时！

# sql - 从存储过程返回单个字符串值而不使用输出参数

> ID：10036589
> 
> 赞同：0
> 
> 时间：2012-04-05T21:56:14.980
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

如何在不使用 SP 中的输出参数的情况下从存储过程返回单个字符串值。

这可能吗 ？

SP 返回的单个字符串值将包含成功或失败消息以及失败的原因。

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:01:50.193

在 sp 的末尾是这样的：

```
IF (SomeCondtion)
BEGIN
   SELECT 'Success'
END
ELSE
BEGIN
  SELECT 'No success'
END 
```

在此链接中，您可以找到适合您需求的其他方法[http://www.sqlteam.com/article/stored-procedures-returning-data](http://www.sqlteam.com/article/stored-procedures-returning-data)

# google-maps - 添加 Google Maps Weather 图层后，自动完成搜索栏停止工作

> ID：10036594
> 
> 赞同：2
> 
> 时间：2012-04-05T21:57:02.810
> 
> 标签：google-maps, google-fusion-tables, google-places-api

我有一个完美的工作谷歌地图，连接到我的 Fusion Tables，带有漂亮的搜索栏。直到... 今天早上我添加了新的 Google 地图天气图层。

之后，自动完成搜索栏/Google 地方信息停止工作。

我想尽一切办法，我想，今天，要修复它。

见[http://www.strahlen.org/map/mapweathertest.htm](http://www.strahlen.org/map/mapweathertest.htm)

有人可以检查我做错了什么吗？或者这是我影响之外的错误？

干杯! 坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:10:28.130

您已经包含了 maps-API 3 次。（您应该会收到控制台警告）

这足以包含 API 和两个库（地点+天气）：

```
<script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=weather,places"></script> 
```

修改后自动完成功能也将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:34:55.893

我正在创建我们校园的移动地图的班级。我们正在使用 Fusion Tables 和 Google Maps。让我感兴趣的是您如何合并 Active/old mine Active/old quarry Dump Natural露头博物馆 Collector Shop/Dealer Club Fair Lab Other 的复选框。你是怎么做到的？这些层中的每一层都使用 .kml，还是您只使用了一个 Fusion 表，并且有一个“类型”列，其中每个层都有一个“id”？

我们正在考虑在地图上显示所有建筑物，但添加应急箱位置、OneCard 位置，也许还有自动售货机。我们如何实施您在我们的地图上所做的事情？

大学教师

目前这是演示页面： [Fitchburg State University Mobile Demo](http://nolimitssocialmedia.comoj.com/interactivemap/mobilepage.html)

# c# - 在控制台应用程序中人工填充 HttpContext 对象

> ID：10036602
> 
> 赞同：1
> 
> 时间：2012-04-05T21:58:26.463
> 
> 标签：c#, asp.net, httpcontext

我正在为 log4net 编写一个包装库。这个库应该能够捕获上下文信息，例如查询字符串、cookie、表单字段等。

我从控制台应用程序调用这个包装类，而不是 TDD 类。

有没有办法在控制台应用程序中填充 HttpContext 对象，如下所示？

```
HttpContext c = new HttpContext(null);
c.Request.QueryString.Keys[1] = "city";
c.Request.QueryString[1] = "Los Angeles";
c.Request.QueryString.Keys[2] = "state";
c.Request.QueryString[2] = "CA"; 
```

然后按如下方式检索它？

```
Console.WriteLine(context.Request.QueryString.Keys[1]); 
```

尝试上述代码时出现以下异常。

```
Property or indexer 'System.Collections.Specialized.NameObjectCollectionBase.KeysCollection.this[int]' cannot be assigned to -- it is read only 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:13:18.573

您可以在此处阅读有关使用 Moq 伪造它的信息：http: [//o2platform.wordpress.com/2011/04/05/mocking-httpcontext-httprequest-and-httpresponse-for-unittests-using-moq/](http://o2platform.wordpress.com/2011/04/05/mocking-httpcontext-httprequest-and-httpresponse-for-unittests-using-moq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:16:41.403

模拟 HttpContext 并不容易。您可以使用[Typemock Isolator](http://www.typemock.com/typemock-isolator-product3)来设置上下文，但它不是免费的。另一种（更好的）方法是抽象 HttpContext 并针对抽象的模拟实现实现您的控制台（测试？）客户端

# java - 序列化/反序列化 ClassCastException: x 不能转换为 java.io.ObjectStreamClass

> ID：10036603
> 
> 赞同：2
> 
> 时间：2012-04-05T21:58:31.373
> 
> 标签：java, serialization, deserialization

使用 Java 的本机序列化，我间歇性地看到 ClassCastExceptions

```
java.lang.ClassCastException: myCompany.MyClass$MembershipServiceMethod cannot be cast to java.io.ObjectStreamClass 
```

或（不太频繁）

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.io.ObjectStreamClass 
```

当我反序列化特定不可变类的对象时。也就是说，对于特定的序列化表示总是会抛出异常，但大多数对象都可以成功序列化和反序列化。

```
public final class ServiceInteractionImpl implements ServiceInteraction, Serializable {
private static final long serialVersionUID = 1L;

private final InteractionSource source;
private final long startTime;
private final InteractionType type;
private final ServiceMethod method;
private final long duration;
private final String accompanyingMessage;

public ServiceInteractionImpl(final ServiceMethod method,
                                  final InteractionSource source,
                                  final InteractionType type,
                                  final long startTime,
                                  final long duration,
                                  final String accompanyingMessage) {
            this.source = source;
            this.startTime = startTime;
            this.duration = duration;
            this.type = type;
            this.method = method;
            this.accompanyingMessage = accompanyingMessage;
    }

    ...

    getters and canonical methods
} 
```

其中 InteractionSource、InteractionType 和 ServiceMethod 是枚举。我无法在我的本地环境中复制这一点，该环境运行对数百万个对象进行序列化和反序列化的 junit 测试。

这是编写代码

```
 fileLock.lock();
    try {
        final File recordFile = new File(recordFileName);
        boolean appendToFile = false;

        if (recordFile.exists()) {
            appendToFile = true;
        }

        final OutputStream fileOutputStream = new FileOutputStream(recordFileName, true);
        final OutputStream buffer = new BufferedOutputStream(fileOutputStream);

        ObjectOutput output;
        if (appendToFile) {
            output = new AppendableObjectOutputStream(buffer);
        } else {
            output = new ObjectOutputStream(buffer);
        }

        int localSerializedInteractionsCount = 0;

        try {
            for (final ServiceInteraction interaction : tempCollection) {
                output.writeObject(interaction);
                output.flush();
                localSerializedInteractionsCount++;
                rollBackCollection.remove(interaction);
            }
        } finally {
            output.close();
            serializedInteractionCount += localSerializedInteractionsCount;
        }
    } catch (IOException e) {
        LOGGER.error("could not write to file", e);
        //some roll-back code
    } finally {
        fileLock.unlock();
    } 
```

请参阅AppendableObjectOutputStream[的附加到 ObjectOutputStream](https://stackoverflow.com/questions/1194656/appending-to-an-objectoutputstream)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:18:49.797

如果类定义更改而没有更新 serialVersionUID，则这些错误可能来自基于旧类定义的陈旧对象实例。

# windows - ImportError：没有名为 mbtiapp.models 的模块

> ID：10036605
> 
> 赞同：0
> 
> 时间：2012-04-05T21:58:48.707
> 
> 标签：windows, django

我已经在我的 XP 电脑上安装了 python2.7 和 django 1.3.1。我也在运行一个 MySQL 数据库。受第一个 django 应用程序教程的启发，我创建了一个项目 'mysite' 和一个应用程序 'mbtiapp'。目录结构如下（我几乎都省略了）：

```
mysite  
mysite\mbtiapp  
mysite\mbtiapp\models.py  
mysite\mbtiapp\testMySQL.py 
```

如您所见，有一个小 Python 脚本“testMySQL.py”。这是一个在 MySQL 引擎的数据库中插入一行的小程序：

## 测试MySQL.py

```
from mbtiapp.models import InterestRate

i = InterestRate()
i.maturity_number = 2
i.maturity_unit = 'Y'
i.currency = 'USD'
i.rate = 2.8
i.save() 
```

* * *

一些可能相关的设置：

*   Windows 环境变量`DJANGO_SETTINGS_MODULE=settings`

*   窗口路径：`C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\QuickTime\QTSystem\;c:\jmbat;c:\MinGW\bin;c:\python27;c:Django-1.3.1;c:Django-1.3.1\django\bin`

*   Python 路径（sys.path）：`'C:\\jmv_docs\\Dropbox\\python-programming\\projects\\django\\mysite', 'C:\\WINDOWS\\system32\\python27.zip', 'c:\\python27\\DLLs', 'c:\\python27\\lib', 'c:\\python27\\lib\\plat-win', 'c:\\python27\\lib\\lib-tk', 'c:\\python27', 'c:\\python27\\lib\\site-packages', 'c:\\python27\\lib\\site-packages\\wx-2.8-msw-unicode'`

* * *

## 问题

如果我从 mbtiapp 运行 testMySQL.py（如上所述），我会得到：

```
Traceback (most recent call last):  
  File "mbtiapp\testMySQL.py", line 1, in <module>  
    from mbtiapp.models import InterestRate  
ImportError: No module named mbtiapp.models 
```

但是，当我将 testMySQL.py 放在上面的一个目录中（直接在“mysite”目录中）时，一切正常，并且在适当的表中插入了一行。关键是我想将我的代码放在应用程序目录中（在本例中为“mbtiapp”），因为这是它所属的位置，而不是一般项目目录中。

我知道可以找到很多类似的问题，但无论是在网络上，还是在 django 网站上，我都没有找到合适的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:26:37.413

This is an issue with importing. You can quickly fix it by changing import statement. Replace `mbtiapp.models` with `models` and it will work.

# android - Android NDK makefile：添加递归头搜索路径

> ID：10036606
> 
> 赞同：2
> 
> 时间：2012-04-05T21:58:50.627
> 
> 标签：android, makefile, android-ndk, java-native-interface

我正在将 iPhone 游戏 (c++) 移植到 Android，我才刚刚开始。

有什么办法可以在 Android.mk 文件中添加递归标头搜索路径？因为我的代码中的所有#include 都不包含路径，只是引号之间的文件名。在 Xcode 中，这可以完美运行，但 ndk 编译器找不到标头。

# javascript - jQuery滚动显示隐藏内容

> ID：10036610
> 
> 赞同：3
> 
> 时间：2012-04-05T21:59:25.070
> 
> 标签：javascript, jquery, html, css, scroll

如何使默认情况下页面上显示 6 个 div 元素，并且当用户滚动到页面底部时，又加载了 6 个？

如果你看到这个[例子](http://jsfiddle.net/gRzPF/1/)，它有多个 div。我希望最初只显示其中的 6 个，并且每次用户到达页面底部时，我希望再加载 6 个，直到您“用完” div。

到目前为止，我已经尝试过使用 jQuery 无限滚动插件，但它们不适用于我的情况，因为事实上我拥有的元素数量非常有限！

这如何使用 jQuery 来完成？提前致谢！

**编辑**

我相信可以将其余的 div 设置为隐藏（除了前 6 个），并触发一个函数，当到达页面底部时再加载 6 个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T22:13:25.107

我创建了一个非常简单的示例，它没有通过工作进行优化：

[http://jsfiddle.net/gRzPF/2/](http://jsfiddle.net/gRzPF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:03:04.480

您应该能够使用以下内容：

```
jQuery( window ).scroll( function( ) {
    var loadHeight = jQuery( document ).height( ) - jQuery( window ).height( );
    if( haveDivsToLoad && jQuery( window ).scrollTop( ) >= loadHeight ) {
        // fire your load function here
    }
} ); 
```

您可能需要玩`loadHeight`它才能使其满意。

编辑：我添加`haveDivsToLoad`到支票。您应该将其设为全局（或闭包）变量并将其设置为`true`或`false`取决于是否有更多`div`的 s 要加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:21:25.330

让我们假设您有一个 div 数组，每个 div 都使用`document.createElement("div")`或类似的初始化。让我们假设你有一个很大的数组。

```
var myArrayOfDivs = [];//see above
var DivsAdded = 6;//as stated, 6 were already added - index 6 is the 7th element
$(window).scroll(function () {
    if ($(window).scrollTop() == $(document).height() - $(window).height()) {
        for(int i = 0; i < 6; i++){
         if( myArrayOfDivs.length < DivsAdded ) break;
         $("#elementToAppendIn").append(myArrayOfDivs[DivsAdded++]);
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T13:01:15.267

经过一番试验，我找到了完美的答案：

[http://jsfiddle.net/jackdent/gRzPF/12/](http://jsfiddle.net/jackdent/gRzPF/12/)

# c# - 如何停止允许相同的主键

> ID：10036616
> 
> 赞同：0
> 
> 时间：2012-04-05T21:59:51.623
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

大家好，正在使用 MVC3 并且想知道如何停止在我的应用程序中输入相同的主键。我的主键设置为 NVARCHAR(100)，它可以允许控制台名称我需要一个 reg x 的 simlar 验证，以防止用户再次输入相同的名称谢谢

如果您需要更多信息，请询问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:06:04.390

正如我最近回答的那样，我建议不要使用 varchar() 和 nvarchar() 列作为主键。它们在连接和 QueryById() 操作上速度较慢，而且很容易允许编辑值（我也建议不要这样做）。编辑主键是不好的，因为列上有一个聚集索引。如果您对这些值进行了足够多的更改，那么您将扭曲索引并且必须重新构建。

最好使用 IDENTITY 列 (SQL Server) 或 SEQUENCE (Oracle) 并在 Name 列上设置 UNIQUE 约束。使用唯一约束，如果用户尝试输入重复名称，数据库引擎将抛出异常。您的代码应该捕获异常并向用户显示适当的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:07:18.020

我不认为你需要一个正则表达式。在将新记录添加到数据库之前，只需执行 a`select`并检查它是否已经存在。

和 mgnoonan 状态一样，使用 varchars 作为主键通常不是好的做法。每次我遇到它，它最终都会引起问题。

# facebook - ios5 中的 Facebook SSO

> ID：10036624
> 
> 赞同：4
> 
> 时间：2012-04-05T22:00:01.523
> 
> 标签：facebook, ios5, single-sign-on

我在将 facebook 集成到我的 iOS 应用程序时遇到问题。当我启动我的应用程序时，它会重定向到 facebook 应用程序，这很好。但是身份验证对话框只是从屏幕上消失了（就像一个关闭的模式视图控制器），委托方法没有触发，我留在了 facebook 应用程序中，而不是被重定向回我的应用程序。我显然没有成功初始化会话。我按照 iOS 教程中的步骤进行操作，但我一定是在某个地方出错了。我看到的大多数问题都是关于错误或试图从身份验证对话框中获得不同的行为。如果这是一个骗局，请引导我回答相同的问题，因为我在这里碰壁了。我已经按照教程中的说明设置了我的 .plist。我使用了从 iTunes 连接中获取的应用程序包标识符。我的常量 kAppID 是我从 Facebook Developer 应用程序界面获得的 AppID。阅读了 FB 静态库的头文件和实现文件，以及 FB 的文档和教程后，在我看来，如果我只想重定向到 FB 应用程序、登录并重定向回我自己的应用程序，这些步骤加上下面的代码就足够了。

在 AppDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    kAppID = @"(this is where my app ID is)";
    // Override point for customization after application launch.
    facebook = [[Facebook alloc] initWithAppId:kAppID andDelegate:self];
    [facebook setSessionDelegate:self];
    return YES;
} 
```

在 ViewController.m 中，我获取对同一 Facebook 实例的引用，然后调用以下命令：

```
- (void)loginToFacebook:(id)sender {
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }
    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }
} 
```

有什么我不知道的问题吗？或者，也许我错过了一个关键步骤？

哦，顺便说一句，Xcode 4.3.1、ios5SDK、iPhone 4S、ARC。

.plist 的 SS。![在此处输入图像描述](../Images/842f3c145ac982e4587e16e3d0ddb06b.png)

AppDelegate.h：

```
#import <UIKit/UIKit.h>
#import "Facebook.h"
#import "FBConnect.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate> {
    Facebook *facebook;
    NSUserDefaults *defaults;
    NSString *kAppID;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) Facebook *facebook;
@property (strong, nonatomic) id delegate;

@end 
```

AppDelegate.m:

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize facebook;
@synthesize delegate;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ViewController *viewController = [[ViewController alloc] init];
    kAppID = @"385380598149062";
    facebook = [[Facebook alloc] initWithAppId:kAppID andDelegate:viewController];

    return YES;
}

- (void)showSession {
    NSLog(@"FB Session: %@", [NSNumber numberWithBool:[facebook isSessionValid]]);
}

@end 
```

如您所见，这些方法并没有发生太多事情。委托类是 ViewController。我在 AppDelegate 中真正做的就是初始化 Facebook 实例。在那张纸条上，这是整个 ViewController.m（减去一些与 Facebook 无关的东西）：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize contacts, contactArray;

- (void)viewDidLoad
{
    [super viewDidLoad];
    defaults = [NSUserDefaults standardUserDefaults];
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    facebook = delegate.facebook;
    [facebook setSessionDelegate:self];
    [self loginToFacebook:nil];
    eventsArray = [[NSMutableArray alloc] initWithObjects:@"Event one", @"Event two", nil];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation = UIInterfaceOrientationPortrait);
    } else {
        return NO;
    }
}

- (void)loginToFacebook:(id)sender {
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
        NSLog(@"accessToken:%@\n expiry:%@", facebook.accessToken, facebook.expirationDate);
    }
    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    NSLog(@"handle open url");
    return [facebook handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [facebook handleOpenURL:url];
}

- (void)request:(FBRequest *)request didLoad:(id)result {
    //ok so it's a dictionary with one element (key="data"), which is an array of dictionaries, each with "name" and "id" keys
    fbContacts = [(NSDictionary *)result objectForKey:@"data"];
    NSLog(@"Request did load");
    for (int i=0; i<[fbContacts count]; i++) {
        NSDictionary *friend = [fbContacts objectAtIndex:i];
        long long fbid = [[friend objectForKey:@"id"]longLongValue];
        NSString *name = [friend objectForKey:@"name"];
        NSLog(@"id: %lld - Name: %@", fbid, name);
    }
}

- (void)fbDidLogin {
    NSLog(@"FB did log in");
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
    [facebook requestWithGraphPath:@"me/friends" andDelegate:self];
}

- (void)fbDidNotLogin:(BOOL)cancelled {
    NSLog(@"FB login cancelled");
}

/**
 * Called after the access token was extended. If your application has any
 * references to the previous access token (for example, if your application
 * stores the previous access token in persistent storage), your application
 * should overwrite the old access token with the new one in this method.
 * See extendAccessToken for more details.
 */
- (void)fbDidExtendToken:(NSString*)accessToken
               expiresAt:(NSDate*)expiresAt {
    NSLog(@"FB extended token");
}

/**
 * Called when the user logged out.
 */
- (void)fbDidLogout {
    NSLog(@"FB logged out");
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];
}

/**
 * Called when the current session has expired. This might happen when:
 *  - the access token expired
 *  - the app has been disabled
 *  - the user revoked the app's permissions
 *  - the user changed his or her password
 */
- (void)fbSessionInvalidated {
    NSLog(@"FB session invalidated");
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:28:05.530

.plist 看起来很棒，也许你只是忘记了 openurl 处理程序？

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [self.facebook handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [self.facebook handleOpenURL:url];
} 
```

升级版：

1.  作为一个实验，你可以试试这个（来自 Hackbook 的例子）：

    ```
    // Now check that the URL scheme fb[app_id]://authorize is in the .plist and can
    // be opened, doing a simple check without local app id factored in here
    NSString *url = [NSString stringWithFormat:@"fb%@://authorize",kAppId];
    BOOL bSchemeInPlist = NO; // find out if the sceme is in the plist file.
    NSArray* aBundleURLTypes = [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleURLTypes"];
    if ([aBundleURLTypes isKindOfClass:[NSArray class]] &&
        ([aBundleURLTypes count] > 0)) {
        NSDictionary* aBundleURLTypes0 = [aBundleURLTypes objectAtIndex:0];
        if ([aBundleURLTypes0 isKindOfClass:[NSDictionary class]]) {
            NSArray* aBundleURLSchemes = [aBundleURLTypes0 objectForKey:@"CFBundleURLSchemes"];
            if ([aBundleURLSchemes isKindOfClass:[NSArray class]] &&
                ([aBundleURLSchemes count] > 0)) {
                NSString *scheme = [aBundleURLSchemes objectAtIndex:0];
                if ([scheme isKindOfClass:[NSString class]] &&
                    [url hasPrefix:scheme]) {
                    bSchemeInPlist = YES;
                }
            }
        }
    }
    // Check if the authorization callback will work
    BOOL bCanOpenUrl = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString: url]];
    if (!bSchemeInPlist || !bCanOpenUrl) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Setup Error"
                                  message:@"Invalid or missing URL scheme. You cannot run the app until you set up a valid URL scheme in your .plist."
                                  delegate:self
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil,
                                  nil];
        [alertView show];
        [alertView release];
    } 
    ```

    在这一步我们将知道，使用 URL 方案是可以的。

2.  尝试更改 [facebook authorize:nil]; with [facebook 授权：[[NSArray alloc] initWithObjects:@"read_friendlists", nil]]; 所以也许 SSO 至少需要指定一个权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T15:40:49.633

我遇到了同样的问题，我被重定向到 facebook 应用程序，并且身份验证对话框被立即关闭，让我留在了 facebook 应用程序中。

问题出在 .plist 中，我忘记在 URL Schemes 中的 appID 号之前输入 fb。

![列表](../Images/df03d760185a89239bba086465fe58c9.png)

如果您的委托方法仍未触发，那是因为您必须将所有 facebook 逻辑放入应用程序的委托中。我还启用了上面所说的 aurav aka sparsh。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:31:13.117

经过长时间的努力终于找到了解决这个问题的方法，我不正确，但它对我的应用程序来说就像魅力一样：

> 去 developer.facebook.com
> 
> 从列表中选择您的应用程序（应用程序是您在 URL 方案中使用的应用程序）
> 
> 如果您的应用程序被选为本机应用程序，那么它将要求提供捆绑标识符
> 
> 通过您正在构建您的应用程序向他提供捆绑标识符
> 
> 如果您使用通配符捆绑标识符，则提供类似 com.product.abc 否则提供完整捆绑标识符。

并且您的 FB 登录将开始为您工作。![您的设置必须如图所示](../Images/02b87842a93c51c2d9069616ff7aa9e0.png)

# delphi - 如何为 VBScript 错误获取更具说明性的字符串

> ID：10036626
> 
> 赞同：2
> 
> 时间：2012-04-05T22:00:06.857
> 
> 标签：delphi, winapi, com, activex

只是为了更多地解释上下文，这是如何重现：

*   Delphi 7（但也可能是更新的版本）
*   导入类型库“Microsoft VBScript 正则表达式 5.5”

围绕这段代码编写一个程序：

```
var
  re:RegExp;
try
  re:=CoRegExp.Create;
  re.Pattern:='(';//is an invalid regex, but see below
  re.Test('');
except
  on e:Exception do
    Caption:=e.ClassName+' '+e.Message;
end; 
```

这将引发异常`EOleError OLE error 800A139C`

这样做是因为 SysErrorMessage 在此代码上返回一个空字符串，并且 EOleSysError 构造函数默认为 SOleError 资源字符串以返回某些内容。

是否有 Winapi 替代 SysErrorMessage 以获得更好的错误描述？如果我用谷歌搜索一下，代码确实代表“缺少括号”错误，但如果有办法从系统中获取（本地化）描述，我宁愿使用它，而不是必须添加枚举我的项目的错误描述常量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:48:54.790

那是一个[COM 错误](http://msdn.microsoft.com/en-us/library/bb446131.aspx)。要获取文本描述，请调用[GetErrorInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221032%28v=vs.85%29.aspx)，然后调用[IErrorInfo.GetDescription](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221268%28v=vs.85%29.aspx)。但是，如果您没有得到任何有用的回报，请不要感到惊讶。

# php - 使用 php 变量 + javascript 变量创建一个 href url

> ID：10036629
> 
> 赞同：1
> 
> 时间：2012-04-05T22:00:30.157
> 
> 标签：php, javascript, url, variables, href

我正在使用 Mysql+PHP 循环创建链接，但我需要在 url href 中添加一个 javascript var，例如：

javascript var 在 jquery cookie 中：`$.cookie('limit')`

**urls.php**：

```
<a href='page.php?id=1&limit=$.cookie('limit')'>1</a>
<a href='page.php?id=2&limit=$.cookie('limit')'>2</a>
<a href='page.php?id=3&limit=$.cookie('limit')'>3</a> 
```

在这种情况下，将 javascript var 放入隐藏输入中不起作用。

在我的**page.php 中**，我需要在 mysql 查询中同时使用 vars（id 和 limit）。**因此，在page.php**的隐藏输入中插入这个 javascript var无论如何都不起作用。

我试图从 href url 中删除 limit var 并将其添加到我的**page.php 中**，但它不起作用：

```
if(!empty($_REQUEST['limit']){
    $_REQUEST['limit'] = "<script type='text/javascript'>document.write($.cookie('limit'))</script>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:05:12.173

您没有将变量正确放入 php.ini 中。使用您的代码，您只需在字符串中写入限制。您需要将变量连接到这样的字符串：

```
if(!empty($_REQUEST['limit']){
    $limit = "<script type='text/javascript'>document.write('".$_REQUEST['limit']."')</script>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:13:55.227

如果限制被传递到您正在构建链接的页面中，那么您可以像您提到的那样通过 $_REQUEST 变量获取该数字。然后，您可以在该页面的逻辑中编写一个 for 循环来创建您想要的链接数量。在该循环中，您可以构建类似这样的内容以将 url 回显到页面上：

```
echo "<a href='page.php?id={$i}&limit=jscriptVar'>{$i}</a>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:06:36.880

Change links to this:

```
<a href='page.php?id=1' class='changeMe'>1</a>
<a href='page.php?id=2' class='changeMe'>2</a>
<a href='page.php?id=3' class='changeMe'>3</a> 
```

Add a javascript like this:

```
$(document).ready(function(){
    $('a[class="changeMe"]').each(function(){
        var newHref = $(this).attr("href") +"&limit="+ $.cookie('limit');
        $(this).attr("href", newHref);
    });
}); 
```

# android - 我可以在 Google App Engine（Java 项目）中使用来自 Android SDK 的 Uri.Builder

> ID：10036632
> 
> 赞同：0
> 
> 时间：2012-04-05T22:00:44.713
> 
> 标签：android, eclipse, google-app-engine, uri

[我在这个答案中](https://stackoverflow.com/a/6742274/617373)注意到了Uri.Builder我想知道我是否可以在 eclipse 的 GAE 项目中使用它

我想做类似的事情

```
Uri.Builder b = Uri.parse("https://mydomain.com").buildUpon();
b.path("/abc/{5D/{B0blhahblah-blah}I1.jpg");
Uri u = b.build(); 
```

我找不到将 Android SDK 添加到我的 Google 新 Web 应用程序项目的方法

有可能吗？怎么做？

提前谢谢...我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:08:27.647

`Uri.Builder`创建 Android`Uri`对象，而不是 Java`URI`对象。您需要：

1.  从开源存储库[中获取源代码`Uri`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/net/Uri.java)。

2.  可能会将其重构到您自己的包中。

3.  删除所有引用其他 Android 类的内容。

4.  进行您认为需要使用生成的`Uri`对象的任何其他修改。

# java - 在 JDK6 HTTP 服务器上使用 Spring 3 的 REST 服务

> ID：10036633
> 
> 赞同：2
> 
> 时间：2012-04-05T22:00:49.287
> 
> 标签：java, spring, rest, spring-mvc, simplehttpserver

是否有可能在没有 servlet 容器的情况下使用 spring 3.0 创建 REST 服务？因为我不想使用应用服务器。我尝试使用 SimpleHttpInvokerServiceExporter 和 Spring MVC 创建 REST 服务，但我得到了一个`java.lang.NoClassDefFoundError: javax/servlet/ServletException`，因为我不使用 servlet 容器。我的代码如下所示：

```
<beans>
  ...
    <bean name="serviceFacadeExporter" 
       class="org.springframework.remoting.httpinvoker.SimpleHttpInvokerServiceExporter">
        <property name="service" ref="serviceFacade" />
        <property name="serviceInterface" value="facade.ServiceFacade" />
    </bean>
    <bean id="httpServer"
        class="org.springframework.remoting.support.SimpleHttpServerFactoryBean">
            <property name="contexts">
                <map>
                    <entry key="/api/" value-ref="serviceFacadeExporter" />
                </map>
            </property>
             <property name="port" value="8082" />
    </bean>
   ...
</beans> 
```

服务看起来像这样

```
@Controller
public class ServiceFacadeImpl implements ServiceFacade {

  @Override
  @RequestMapping(value = "/protein/search/{searchString}")
  public long searchProtein(@PathVariable String searchString) {
    return 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:43:07.987

Spring MVC 需要 Servlet API

您可以通过以下方式使用 JSE 6 HTTP Server 创建一个简单的 Rest 服务

您创建一个资源类

```
@Path("/helloworld")
public class MyResource {

    // The Java method will process HTTP GET requests
    @GET
    // The Java method will produce content identified by the MIME Media
    // type "text/plain"
    @Produces("text/plain")
    public String getClichedMessage() {
        // Return some cliched textual content
        return "Hello World";
    }
} 
```

您创建一个 Rest 应用程序

```
public class MyApplication extends javax.ws.rs.core.Application{
    public Set<Class<?>> getClasses() {
        Set<Class<?>> s = new HashSet<Class<?>>();
        s.add(MyResource.class);
        return s;
    }
} 
```

这就是您启动服务器的方式

```
HttpServer server = HttpServer.create(new InetSocketAddress(8080), 25);
HttpContext context = server.createContext("/resources");
HttpHandler handler = RuntimeDelegate.getInstance().createEndpoint
(new MyApplication(), HttpHandler.class);
context.setHandler(handler);
server.start(); 
```

就这样。不需要 Spring MVC。

出于测试目的，这非常有效，对于许多请求的生产性使用，我将使用像 Jetty 或 Tomcat 这样的 WebContainer。

有关如何使用标准 JSE 6 HttpServer 构建 RESTFul 的更详细说明，请参阅 [RESTFul Webservice mit JAX-RS](http://it-republik.de/jaxenter/artikel/RESTful-Web-Services-mit-JAX-RS-4136.html)（德语）

# java - 如何防止将相同数据从 textField 添加到数据库？

> ID：10036634
> 
> 赞同：0
> 
> 时间：2012-04-05T22:01:14.797
> 
> 标签：java, mysql

我有一个小问题，我正在制作项目，我正在将数据从客户端发送到服务器，服务器将其发送到 mysql 数据库。我在客户端应用程序中有客户端和管理选项卡，在客户端选项卡中我输入用户名并连接到服务器，这个用户名正在发送到服务器，服务器保存到表用户的数据库中。在管理选项卡（客户端应用程序端）中，我连接以修改数据库中的一些数据并将新数据添加到数据库中。我的问题是：一步一步。我输入用户名，按连接，用户名字符串被发送到服务器并保存在表用户 2 中的 mysql 中。接下来，我转到管理选项卡，我想添加一些数据插入到 mysql (它'

这是我发送用户名的客户端代码：

```
String name = client.nameField.getText();
        out = new PrintWriter (os, true); 
        out.println(name); 
```

这是我发送数据的管理选项卡中的代码：

```
DataOutputStream os = new DataOutputStream (socket.getOutputStream()); 

                String name = client.nameField.getText();
                String title = Configuration.titleField.getText();
                String question = Configuration.questionField.getText();
                String answer1 = Configuration.answer1Field.getText();
                out = new PrintWriter (os, true);

                out.println(title);
                out.println(question);
                out.println(answer1); 
```

这是在服务器端接收数据的代码：

```
while(RunThread){

            String name;
            name = in.readLine();

           st.execute("INSERT INTO "+db+" .poll_users (name) VALUES ('" + name + "')");

            String title;
            title = in.readLine();
            if(title!=null)
            st.execute("INSERT INTO "+db+" .poll_titles (title) VALUES ('" + title + "')");

            String question;
            question = in.readLine();
            if(question!=null)
            st.execute("INSERT INTO "+db+" .poll_questions (question) VALUES ('" + question + "')");

            String answer1;
            answer1 = in.readLine();
            if(answer1!=null)
            st.execute("INSERT INTO "+db+" .poll_answers (answer) VALUES ('" + answer1 + "')"); 
```

如何让它工作？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:05:12.107

您是否缺少：

```
out.println(name); 
```

在打印标题之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:15:12.350

也许您应该将您的客户端服务器协议从依赖消息的顺序更改为更明确？可能会让它更健壮。

也许你应该发送这样的行：

```
 out.println("Name:" + name);
 out.println("Title:" + title);
 out.println("Question" + question);
 out.println("Answer" + answer1); 
```

然后您可以按任何顺序接收字段..

# c# - 如何使用 FolderBrowserDialog 或类似工具提示用户输入文件夹？

> ID：10036635
> 
> 赞同：1
> 
> 时间：2012-04-05T22:01:23.407
> 
> 标签：c#, winforms

我想提示用户输入文件夹，但允许他们粘贴路径。FolderBrowserDialog 似乎不支持这一点。我考虑过使用 OpenFileDialog，但这需要用户选择一个我不想要的文件——尽管它确实允许用户键入或粘贴路径。

如何让用户选择一个文件夹，同时允许他们键入或粘贴路径（到文件夹）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:21:28.500

您可以做的是制作一个带有文本框和文件夹浏览对话框的表单。然后用户可以粘贴或输入文件夹地址（然后您必须验证它）或仅使用其中的文件夹浏览对话框。

然后，只要用户想要使用它，只需将此表单显示为对话框。

# magento - 网站支付专业版（Paypal）Iframe

> ID：10036639
> 
> 赞同：6
> 
> 时间：2012-04-05T22:01:55.850
> 
> 标签：magento, paypal

我正在使用 Magento CE 1.6.2 并尝试使用 Website Payments Pro 系统。

我完成结帐流程，选择 Paypal PRO 链接作为我的付款方式，收到消息“下订单后您将需要输入付款详细信息”，进入我查看具有“下单”的订单的页面订购”按钮。

当我单击“下订单”时，我的期望是以 iframe 形式获得 paypal 按钮，但什么也没有出现。页面永远不会改变。

如果我在后端检查，订单在 Magento 中显示为“待付款”。

我应该提到我正在使用一个测试 PayPal 帐户执行此操作，并且我打电话给 PayPal，他们认为我的所有设置都是正确的，尽管我不确定我的设置是否正确。

关于为什么我在点击“下订单”后没有被引导到输入付款信息的页面有什么想法吗？Website Payments Pro 和 Magento 1.6.2 是否存在错误？

![在此处输入图像描述](../Images/fa32486cc108117414341378a8b123e6.png) [http://minus.com/lbkpOV6gikF0bs](http://minus.com/lbkpOV6gikF0bs)

我已启用调试模式，并且已在 payment_hosted_pro.log 中读取了 PAYPAL API 的正确响应。

```
2012-04-05T23:10:41+00:00 DEBUG (7): Array
(
    [url] => https://api-3t.sandbox.paypal.com/nvp
    [BMCreateButton] => Array
        (
            [METHOD] => BMCreateButton
            [BUTTONCODE] => TOKEN
            [BUTTONTYPE] => PAYMENT
            [L_BUTTONVAR0] => subtotal=14.88
            [L_BUTTONVAR1] => tax=0.00
            [L_BUTTONVAR2] => shipping=5.00
            [L_BUTTONVAR3] => invoice=100000050
            [L_BUTTONVAR4] => address_override=false
            [L_BUTTONVAR5] => currency_code=EUR
            [L_BUTTONVAR6] => buyer_email=jdoe@gmail.com
            [L_BUTTONVAR7] => billing_first_name=John
            [L_BUTTONVAR8] => billing_last_name=Doe
            [L_BUTTONVAR9] => billing_city=New York
            [L_BUTTONVAR10] => billing_state=New York
            [L_BUTTONVAR11] => billing_zip=0000
            [L_BUTTONVAR12] => billing_country=US
            [L_BUTTONVAR13] => billing_address1=no street
            [L_BUTTONVAR14] => billing_address2=
            [L_BUTTONVAR15] => first_name=John
            [L_BUTTONVAR16] => last_name=Doe
            [L_BUTTONVAR17] => city=New York
            [L_BUTTONVAR18] => state=New York
            [L_BUTTONVAR19] => zip=0000
            [L_BUTTONVAR20] => country=US
            [L_BUTTONVAR21] => address1=no street
            [L_BUTTONVAR22] => address2=
            [L_BUTTONVAR23] => paymentaction=authorization
            [L_BUTTONVAR24] => notify_url=http://www.magento.it/paypal/ipn/
            [L_BUTTONVAR25] => cancel_return=http://www.magento.it/paypal/hostedpro/cancel/
            [L_BUTTONVAR26] => return=http://www.magento.it/paypal/hostedpro/return/
            [L_BUTTONVAR27] => lc=IT
            [L_BUTTONVAR28] => template=templateD
            [L_BUTTONVAR29] => showBillingAddress=false
            [L_BUTTONVAR30] => showShippingAddress=false
            [L_BUTTONVAR31] => showBillingEmail=false
            [L_BUTTONVAR32] => showBillingPhone=false
            [L_BUTTONVAR33] => showCustomerName=false
            [L_BUTTONVAR34] => showCardInfo=true
            [L_BUTTONVAR35] => showHostedThankyouPage=false
            [VERSION] => 72.0
            [USER] => ****
            [PWD] => ****
            [SIGNATURE] => ****
            [BUTTONSOURCE] => Varien_Cart_WPP_IT
        )

    [response] => Array
        (
            [WEBSITECODE] => <form action="https://securepayments.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="HSS-IC0YjKMf1wXUUGEyDIpUTWddXlgnXvVl">
<input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - Il sistema di pagamento online più facile e sicuro!">
<img alt="" border="0" src="https://www.sandbox.paypal.com/it_IT/i/scr/pixel.gif" width="1" height="1">
</form>

            [EMAILLINK] => https://securepayments.sandbox.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=HSS-IC0YjKMf1wXUUGEyDIpUTWddXlgnXvVl
            [HOSTEDBUTTONID] => HSS-IC0YjKMf1wXUUGEyDIpUTWddXlgnXvVl
            [TIMESTAMP] => 2012-04-05T23:10:41Z
            [CORRELATIONID] => bb7df94045217
            [ACK] => Success
            [VERSION] => 72.0
            [BUILD] => 2764190
        )

    [__pid] => 5980
) 
```

为什么我在单页结帐中看不到网站付款专业表格？

*   Magento 1.6
*   全新安装
*   未安装自定义模板

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T05:13:08.183

终于解决了

我已经解决了在全新安装中始终启用调试模式的棘手问题，检查了文件和文件夹的正确权限并对其进行了测试以在我的目录中购买测试产品。

看看我在 system.log 中得到的 /var/log 文件夹，这条消息：

2012-04-06T06:39:06+00:00 CRIT (2): 无效的模板文件：frontend/base/default/template/paypal/hostedpro/iframe.phtml 我检查了目录frontend/base/default/template /paypal/ 并且**没有任何 hostspro 目录！！这在全新安装的 Magento 中真的很奇怪！**

我已经创建了目录并仅上传了 frontend/base/default/template/paypal/hss/iframe.phtml 文件，现在它也可以正常工作了！

这是一个真正的 Magento 错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T15:18:16.507

我发现问题出在我的自定义主题中。尝试将您的主题更改为默认主题，看看会发生什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T13:30:10.153

**对于 1.7.0.2，您不需要 hostspro 目录..hss 工作正常。**但我遇到了这个问题并花了很多时间来成功实现它......首先你必须`create a paypal account and a corresponding sandbox account`。 **在沙盒帐户中单击配置文件**将`pop up`出现..您将获得所有信息，例如`account information,API credentials,funding,settings,products`... ![在此处输入图像描述](../Images/77997576c4eb3c76160d2bfa64731c67.png)

使用电子邮件 ID 作为关联的贝宝帐户、API 凭据和`most importantly go to product`s..。`enable the checkbox of Payment pro`如果您不启用此复选框，您将无法使用专业付款托管解决方案或预付款...您将收到各种类型的错误..

另一个要记住的重要事情是`payment pro hosted solution is not available in every country`.. 它在`HongKong`, `United kingdom`...等中可用`not available in USA`.... [检查此页面](https://developer.paypal.com/webapps/developer/docs/classic/products/website-payments-pro-hosted-solution/) ，例如付款 并非每个国家/地区都提供预付款.. `its available in USA`...所以首先您必须检查它是否可用...取决于您必须创建您的沙盒帐户...例如`pro hosted solution create an account of UK or HK`..and for `payment advance create an account of USA`...

# python - 多条件有效查询

> ID：10036645
> 
> 赞同：0
> 
> 时间：2012-04-05T22:03:01.550
> 
> 标签：python, postgresql, psycopg2

我有一个数据库

```
books          (primary key: bookID)
characterNames (foreign key: books.bookID) 
locations      (foreign key: books.bookID) 
```

字符名称和位置的文本位置保存在相应的表中。
现在我想使用 psycopg2 编写一个 Python 脚本来查找给定字符名称和书中给定位置的所有出现，两者都出现。
目前，我执行 4 个查询：

```
SELECT bookID, position FROM characterNames WHERE name='XXX';
--> result is saved in list 'charnames'

SELECT DISTINCT bookID FROM characterNames WHERE name='XXX';
--> result is saved in list 'charnamesIDs'

SELECT bookID, position FROM locations WHERE locName='YYY';
--> result is saved in list 'locs'

SELECT bookID FROM locations WHERE locName='YYY';
--> result is saved in list 'locsIDs' 
```

这两个查询都可以给我 bookID，其中只有名称或位置出现。所以我的目标是消除所有的 'charnames' 元素，而 bookID 没有出现在 'locs' 中，反之亦然。我的方法是：

```
for cnameTuple in charnames:  
~if cnameTuple[0] in locsIDs:  
~~continue  
~del(cname) 
```

我为 locs 中的元组做了一个相应的循环。
不幸的是，这个算法需要很多时间。有没有办法更快地执行此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T23:36:40.597

使用 JOIN 进行查询可能会**更快、更简单。**
像这样的东西：

```
SELECT b.*, c.position, l.position
FROM   books b
JOIN   characternames c USING (bookid)
JOIN   locations l USING (bookid)
WHERE  c.name = 'XXX'
AND    l.locname = 'YYY'; 
```

*   通常最好[只从数据库服务器检索您需要的数据，](https://stackoverflow.com/q/7510092/939860)而不是在您的应用程序中获取过多的数据并进行过滤。数据库引擎针对过滤和排序进行了优化。一开始你几乎无法在你的应用程序中匹配它。

*   请注意我如何使用所有小写名称。阅读[有关标识符的手册](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)。

*   SELECT 语句的手册[，特别是关于 JOINs](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)的手册。

* * *

### 评论后更多信息

对于像 PostgreSQL 这样旨在处理*数百万*的 RDBMS 而言，“数千本书”完全没有问题。大表性能的关键是正确的[索引](http://www.postgresql.org/docs/current/interactive/indexes.html)。对于此处的查询，以下索引可能会有所帮助：

```
CREATE INDEX books_bookid_idx ON books(bookid); -- a primary key will do, too

CREATE INDEX cn_bookid_idx ON characternames (bookid);
CREATE INDEX cn_name_idx ON characternames (name);

CREATE INDEX locations_bookid_idx ON locations (bookid);
CREATE INDEX locations_locname_idx ON locations (locname); 
```

[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)的性能可能会更好。使用 进行测试[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)，它将显示使用了哪些索引以及查询的速度。创建索引非常快，试验它们很容易。只是不要保留不需要的索引。它们也有维护成本。

* * *

### 优化查询

我`think`现在明白了，你在找什么。应该优化此查询以获取每个位置或名称的所有位置`bookid`，但仅在同一本书中出现名称*和位置的位置，并且每本书没有更多详细信息：*

```
WITH b AS (
    SELECT bookid
    FROM   characternames
    WHERE  name = 'XXX'
    GROUP  BY 1
    INTERSECT
    SELECT bookid
    FROM   locations
    WHERE  l.locname = 'YYY'
    GROUP  BY 1
    )
SELECT bookid, position, 'char' AS what
FROM   b
JOIN   characternames USING (bookid)
WHERE  name = 'XXX'
UNION  ALL
SELECT bookid, position, 'loc' AS what
FROM   b
JOIN   locations USING (bookid)
WHERE  locname = 'YYY'
ORDER  BY bookid, position; 
```

### 要点

*   [CTE（`WITH`](http://www.postgresql.org/docs/current/interactive/queries-with.html)查询[）](http://www.postgresql.org/docs/current/interactive/queries-with.html)确保基本查询只执行一次。
*   [`INTERSECT`](http://www.postgresql.org/docs/9.1/static/sql-select.html#SQL-INTERSECT)仅选择`bookids`具有位置*和*名称的特征。
*   最后返回*所有*[`UNION ALL`](http://www.postgresql.org/docs/current/interactive/queries-union.html)找到的位置。如果要修剪具有相同位置的重复项，请改用。`SELECT`*`UNION`*
**   我订购`bookid, position`- 猜测这是需要的。*   添加了一个列`what`来标记位置的来源（位置或名称）。*

 ** * *

### 进一步优化

如果搜索词在每本书中出现**多次，您可以通过创建具有****不同**条目的辅助表来显着加快搜索速度`(bookid, term)`。在两列上创建一个多列主索引，并在 just 上创建一个附加主索引`term`。为位置创建一个这样的表，为名称创建另一个表。如果需要，请让它们与触发器保持同步，但我认为书籍的内容没有太大变化。将简化并加快 CTE。

如果这还不够快，请查看[全文搜索](http://www.postgresql.org/docs/current/interactive/textsearch.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:42:37.583

`see`如果它加快了操作，您可以使用 set to

```
>>> xxx = set([(1,'a'), (2,'b')])
>>> xxx
set([(1, 'a'), (2, 'b')])
>>> xxx = set([(1,'a'), (3,'c')])
>>> yyy
set([(1, 'a'), (3, 'c')])
>>> c = xxx.intersection(yyy)
>>> c
set([(1, 'a')])   # common between xxx and yyy
>>> xxx - c
set([(2, 'b')]) 
```*

# asp.net-mvc-3 - 无法使用官方 C# 驱动程序将 BsonDocument 从 MVC3 序列化为 Json

> ID：10036647
> 
> 赞同：3
> 
> 时间：2012-04-05T22:03:06.870
> 
> 标签：asp.net-mvc-3, model-view-controller, mongodb, json.net, mongodb-.net-driver

我的网络客户端发送 Json。MongoDB 实际上是 Json。这应该很容易，但我在与 MVC3 中的 C# 驱动程序作斗争时陷入困境。似乎没有简单的方法可以避免在 C# 类中工作。我原以为只需通过一点过滤来来回传递 Json 就很容易了。就像我在和一个 ORM 战斗，我不想这样。

无论如何，我（不情愿地）用 C# 构建了我的数据模型，我使用的是 Json.Net，我的序列化代码看起来像；

我的 JsonResult 序列化代码是；

```
public override void ExecuteResult(ControllerContext context)
{
    ...
    var serializedObject = JsonConvert.SerializeObject(Data, Formatting.None, new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore });
} 
```

如果没有对象映射，我一生都无法弄清楚如何做到这一点。因此，我有一个控制器动作；

```
public JsonResult test() 
{
    var col = _db.GetCollection<Project>("myCollection");

    var jsText = System.IO.File.ReadAllText(System.IO.Path.Combine(HttpContext.Server.MapPath("~/Controllers"), "MapReducers.js"));
    string map_cashflow = new Regex(@"//function map_cashflow(.*?)//end", RegexOptions.Singleline).Match(jsText).Captures[0].ToString();
    string reduce_cashflow = new Regex(@"//function reduce_cashflow(.*?)//end", RegexOptions.Singleline).Match(jsText).Captures[0].ToString();

    var mr = col.MapReduce(map_cashflow, reduce_cashflow);
    return Json(mr, JsonRequestBehavior.AllowGet); 
} 
```

现在，当我在其他地方（出于某种原因）序列化游标时，这可以工作，但我现在明白上面的失败是因为它试图序列化实际的 BsonDocument 而不是底层数据。当它尝试将第一个字段序列化为其他类型时出现错误，通常尝试将字符串或日期转换为 AsBoolean()。遗憾的是，驱动程序不能更轻松地对文档进行序列化。

我在尝试使用 BsonDocument 来表示我的对象图的动态部分时遇到了类似的麻烦。我认为这比 json 字符串更好，但它当然不会序列化。我最终使用 Dictionary<> 这很好。

我也试过这些，结果相似；

```
return Json(mr.GetResults());
return Json(mr.GetResults()).ToArray(); 
```

所以我也尝试了以下我看到人们成功的方法；

```
var jsonText = mr.ToJson(); // empty
var jsonText = mr.GetResults().toJson(); // Exception: No serializer found for type System.Collections.IEnumerator. 
```

我想做的就是把看起来几乎完全像 Json 的东西扔回去，但我不知道如何序列化它。这是唯一的方法吗？

```
var resultsObj = mr.GetResultsAs<ResultsClass>(); 
```

如果是这样，那就糟了。我不想仅仅为了存放结果文档而构建静态类型的类。ORM 疯了！我不需要进出 C# 对象，驱动程序确实更像是一个障碍而不是帮助。我想我宁愿只拥有Json。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:11:16.980

我看不出有什么理由需要为此创建对象模型，除非 MVC3 对您强加该要求。使用 BsonDocument 并直接序列化为 JSON 字符串应该没问题。阅读您的大部分帖子很难，但在调用 MapReduce 的结果归零时，GetResults() 方法返回一个 IEnumerable<BsonDocument> 类型的值，您应该能够轻松地将其转换为 JSON。这是一个简单的测试：

```
IEnumerable<BsonDocument> results = new BsonDocument[] 
{
    new BsonDocument("x", 1),
    new BsonDocument("x", 2)
};
var json = results.ToJson(); 
```

当我运行此代码时，json 变量最终包含以下内容：

```
[{ "x" : 1 }, { "x" : 2 }] 
```

特别是，我没有得到你提到的例外。您能否确保您使用的是足够新版本的 C# 驱动程序，并且如果您仍然收到异常回发完整的堆栈跟踪？

部分问题可能来自将 BsonDocument 与不属于 C# 驱动程序的 JSON 序列化程序混合和匹配。第三方 JSON 序列化程序（如您使用的返回 JsonResult 的 Json 方法）通常会对它们可以序列化和不能序列化的内容施加自己的限制。因此，您遇到的问题似乎与 MongoDB C# 驱动程序无关。

抱歉，我真的不太了解 MVC3 以及它如何将结果转换回 JSON 来说明这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:22:36.087

因此，我为 Json.Net 编写了一个单向插件，它允许我使用文档本身的 toJson() 方法序列化 BsonDocuments。这并不理想，因为我现在有两个不同的序列化程序堆栈；

```
public class BsonDocumentConverterPlugin : Newtonsoft.Json,JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        BsonDocument bsonDoc = (BsonDocument)value;
        writer.WriteRaw(bsonDoc.ToJson());
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException("Serialisation back to Bson not supported in this converter");
    }

    public override bool CanConvert(Type objectType)
    {
        return (objectType == typeof(BsonDocument));
    }
} 
```

并在我的 JsonResult 覆盖中；

```
 var serializedObject = JsonConvert.SerializeObject(Data, Formatting.None, 
                new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore,
                                             Converters = new List<JsonConverter>() { new BsonDocumentConverterPlugin() }
                }); 
```

不幸的是，这似乎不适用于我的 MapReduce 结果集，它有多个结果，因为它不会将它们序列化为一个数组，并且无论我使用哪种序列化方法都会错过逗号，从而导致无效的 json。BsonDocument.ToJson() 还会为日期写入无效的 json。在 strict 下它写为 ISODate()，在 JavaScript/TenGen 下它写为 newDate()。这两种情况都会导致我的浏览器出现问题。

所以最后，我不得不求助于构建对象图。

```
 public class MrResultsetCashflow
    {
        [MongoDB.Bson.Serialization.Attributes.BsonId]
        public DateTime date { get; set; }
        public FinancialItem value;
    } 
```

我浏览了原始的 MVC/json.net 序列化堆栈；

```
 var f = mr.GetResultsAs<MrResultsetCashflow>();
        return Json(f, JsonRequestBehavior.AllowGet); 
```

# jquery - SlidesJS 悬停暂停功能

> ID：10036650
> 
> 赞同：0
> 
> 时间：2012-04-05T22:03:30.887
> 
> 标签：jquery, html, hover, slideshow

我使用带有自定义分页的 SlideJS 这里是对幻灯片的 jquery 调用

```
$('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 5000,
            pause: 2500,
            hoverPause: true,
            animationStart: function(current){
                $('.caption').animate({
                    bottom:-35
                },100);
                if (window.console && console.log) {
                    // example return of current slide number
                    console.log('animationStart on slide: ', current);
                };
            },
            animationComplete: function(current){
                $('.caption').animate({
                    bottom:0
                },200);
                if (window.console && console.log) {
                    // example return of current slide number
                    console.log('animationComplete on slide: ', current);
                };
            },
            slidesLoaded: function() {
                $('.caption').animate({
                    bottom:0
                },200);
            }
        });
    }); 
```

我厌倦了这个

```
$(".next").mouseover(
            function () {
            stop();
            }) 
```

在 $('#slides').slides{('pause')}; 之后 刚刚打破了幻灯片并添加了十几个分页 li 的

[http://www.slidesjs.com](http://www.slidesjs.com)

我已经添加了这个并且能够让播放器停止，但我还没有弄清楚播放部分。任何想法？

```
$('#stop').mouseenter(function(){ clearInterval( $('#slides').data('interval'));
                });
$('#stop').mouseleave(function(){ playInterval ( $('#slides').data('interval', playInterval));  
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T13:54:25.817

最简单的方法是使用停止播放按钮来发挥您的优势。确保您已打开该选项：

```
$(element).slidesjs({
    play: {
        active: true,
        auto: true
    }
}); 
```

我这样做了：

```
$(element).on("mouseenter", function () {
    $(".slidesjs-stop").click();
});

$(element).on("mouseleave", function () {
    $(".slidesjs-play").click();
}); 
```

它有点蛮力，但效果很好。

# wcf - 如何从服务实现中识别 WCF 主机

> ID：10036651
> 
> 赞同：0
> 
> 时间：2012-04-05T22:03:30.973
> 
> 标签：wcf, wcf-hosting

我有一个托管在 Windows 服务上的 WCF 环境。我有两台主机（一台在 TCP 上，另一台在 NamedPipes 上）。不要对多台主机感到惊慌——这是一个消息传递引擎，主机是根据配置动态安装的。不管我有多少类型的主机，只有一种服务实现。现在的问题是，当我的服务实现被来电调用时，我如何识别它是来自主机 A 还是主机 B？在托管每种类型时，我可以指定一些标识主机信息的元数据，以便我可以从实现中访问它吗？请帮忙。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:17:41.023

在您的服务实现中调用`OperationContext.Current.Host`将使您能够访问托管调用的特定主机对象。

如果除了主机对象的类型和哈希码之外还需要元数据，您可以从中派生自己的服务主机类型，`System.ServiceModel.ServiceHost`并为其提供一些属性来保存该元数据。

例如：

```
public class MyServiceHost : ServiceHost
{
    public string Name { get; private set; }

    public MyServiceHost(string name, Type serviceType, params Uri[] baseAddresses) 
       : base(serviceType, baseAddresses) 
    {
        this.Name = name;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:02:44.260

我为我面临的问题找到了一个很好的解决方案。通常，当我们托管 WCF 端点时，这是我们遵循的代码。

```
ServiceHost serviceHost = new ServiceHost(typeof(IService)) 
```

在这里，您传入您向 ServiceHost 实例公开的接口的类型。除了这种方法，您可以使用 ServiceHost 构造函数的第二个重载，它接收一个实例化的对象！现在代码看起来像这样

```
ServiceImplementation implementation1 = new ServiceImplementation();
ServiceHost serviceHost = new ServiceHost(implementation1); 
```

这里唯一需要注意的是，您需要将您的实现实例模式标记为“InstanceContextMode.Single”，从而有效地使其成为 Singlreton。

现在它解决我的问题的方法是我使用我的实现类将任何元数据从主机传递到实现。我的代码现在看起来像这样。

```
// Create a metadata class just to hold your data.
public class MetaData   
{   
    public MetaData(string data1,int data2) 
    {   
        Data1 = data1;  
        Data2 = data2;  
    }

    public string Data1 { get; set; }   
    public int Data2 { get; set; }  
} 
```

// 只需将实例传递给主机。

```
MetaData metaData = new MetaData("D1", 100);
ServiceImplementation implementation1 = new ServiceImplementation(metaData);
ServiceHost serviceHost = new ServiceHost(implementation1); 
```

// 我的实现看起来像这样

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
internal class ServiceImplementation : IService 
{   
    private MetaData m_MetaData;    
    public ServiceImplementation(MetaData metaData) 
    {   
        m_MetaData = metaData;  
    }   

    public string Ping(string name) 
    {   
        return m_MetaData.Data1;    
    }   
} 
```

看到您在成员“m_MetaData”中拥有所有元数据。

# cocoa - 如何执行存储在 NSDictionary 中的块？

> ID：10036652
> 
> 赞同：9
> 
> 时间：2012-04-05T22:03:38.773
> 
> 标签：cocoa, nsdictionary, block

我对块有点陌生，需要一些帮助。我想在一个块中存储一个块，`NSDictionary`并在基于它的`key`. 这是我到目前为止的一个例子。

```
NSDictionary *blocks = [NSDictionary dictionaryWithObjectsAndKeys:
                              ^{NSLog(@"Log Block 1");}, @"Block1",
                              ^{NSLog(@"Log Block 2");}, @"Block2",
                              nil]; 
```

然后我通过使用枚举字典`keyEnumerator`。我知道该块已正确存储，因为我`NSLog(@"%@", [blocks objectForKey:key]);`在枚举期间调用并 get `<__NSGlobalBlock__: 0x100003750>`。所以我知道我可以访问它，但此时我该如何执行它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T22:16:05.177

尝试这个：

```
void(^myAwesomeBlock)() = [blocks objectForKey:key];
myAwesomeBlock(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-20T04:35:08.650

> **不过，我注意到，当对每个块进行后续调用时，它会返回与第一次执行时相同的信息，而不是包含此后可能发生变化的任何内容。有没有办法让它在每次调用时执行而不是返回原始信息？**

请参阅有关块的文档，特别是标题[为变量类型的](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)部分：

> 以下规则适用于块内使用的变量：
> 
> *   封闭词法范围的本地堆栈（非静态）变量被捕获为`const`变量。
>     
>     
>     
>     它们的值取自程序中块表达式的位置。在嵌套块中，值是从最近的封闭范围捕获的。
>     
>     
> *   使用存储修饰符声明的封闭词法范围的局部变量`__block`由引用提供，因此是可变的。
>     
>     
>     
>     任何更改都反映在封闭词法范围中，包括在同一封闭词法范围内定义的任何其他块。这些在“__block 存储类型”中有更详细的讨论。</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:17:34.303

你需要投：

```
id bar = [blocks objectForKey:@"Block1"];
((void(^)())bar)(); 
```

# client - iperf 2.0.5 中的 -y C 命令在服务器端不起作用

> ID：10036653
> 
> 赞同：0
> 
> 时间：2012-04-05T22:03:50.223
> 
> 标签：client, client-server

我正在尝试在 iperf 中使用 -y C 命令，该命令用于以 CSV 格式写入客户端和服务器之间的吞吐量。所以这是用于启动服务器的命令

```
 iperf -s -w 8M -f m -i 10 -p 4 // This works 
```

但是当我使用 -y C 以 CSV 格式写入输出时。服务器没有开始监听

```
 iperf -s -w 8M -f m -i 10 -p 4 -y C // This doesn't work. 
```

我不知道为什么这不起作用。但是客户端上的相同 -y C 似乎正在工作。高度赞赏答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:03:23.840

服务器处于监听模式。尝试向服务器发送一些数据。您将在服务器上看到以 CSV 格式接收的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T01:35:30.540

我刚刚在我的电脑上尝试了你的命令，我认为有一个错字。您将端口设置为 4 (-p 4)，这是保留端口之一（尽管维基百科说它[是 unassigned](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)。

如果我将您的命令更改为：

```
iperf -s -w 8M -f m -i 10 -P 4 -yc 
```

它可以工作（假设您打算有 4 个线程），尽管在 10 秒间隔结束之前它不会转储输出。

# jquery - jQuery：用数字获取类并替换它

> ID：10036657
> 
> 赞同：0
> 
> 时间：2012-04-05T22:04:07.727
> 
> 标签：jquery, class, replace, switch-statement

鉴于此 HTML：

```
<div id="foo">
    <input type=button class="foo abtn_1">
    <input type=button class="joe bbtn_2">
    <input type=button class="doe cbtn_2">
    <input type=button class="cool dbtn_1">
</div> 
```

当我单击一个按钮时，我需要**获取包含下划线的类（仅）并将其编号从 2 更改为 1。**

目前我对每个班级都使用它：

```
$('.abtn_1').live('click', function () {
 $(this).switchClass('abtn_1','abtn_2');
});
$('.abtn_2').live('click', function () {
 $(this).switchClass('abtn_2','abtn_1');
});
$('.bbtn_1').live('click', function () {
 $(this).switchClass('bbtn_1','bbtn_2');
});
$('.bbtn_2').live('click', function () {
 $(this).switchClass('bbtn_2','bbtn_1');
});
// etc 
```

因此，我没有多次这样做，而是想通过*获取下划线类并相应地更改它的数字来将整个事情变成一两行。*

我想它会像这样：

```
var a =      // $(this).attr('class') without number and underscore
var b =      // This class number only
var c = $(this).attr('class'); // If I wanted to call it from 
                               // its parent $('#foo input'). 

if a contains number 1 {
    $(this).switchClass(c, a + '_1')
} else {
    $(this).switchClass(c, a + '_2')
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:12:28.347

```
$(document).delegate('#foo input', 'click', function () {
    var currentClass = this.className, //you can use $(this).attr("class") here if you want
    slicedClass = currentClass.slice(0,-2); //I'm asuming the _number is always at the end and with one digit, for better slicing use .replace(/_[0-9]+/, "");

   if(currentClass.search("_1") !== -1) {
       $(this).switchClass(currentClass, slicedClass + '_2');
   } else {
      $(this).switchClass(currentClass, slicedClass + '_1');
   }

}); 
```

告诉我这是否适合你。

**编辑** 这是您在评论中提供的小提琴的工作版本，对它进行所需的更改 [http://jsfiddle.net/uFLsx](http://jsfiddle.net/uFLsx) :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:15:59.043

此代码将执行以下操作：

1.  对所有输入元素使用一个事件处理程序
2.  将不推荐使用`.live()`的替换为`.delegate()`（因为 OP 使用 jQuery 1.6）
3.  查找`aaa_1`或`bbb_2`类名，无论它在类名列表中的什么位置

这是代码：

```
​$(document).delegate('#foo input', 'click', ​function() {
    if (this.className.match(/_1(\s|$)/)) {
        this.className = this.className.replace("_1", "_2");
    } else {
        this.className = this.className.replace("_2", "_1");
    }
});​ 
```

使用`.delegate()`or`.on()`时，您应该为主 jQuery 对象选择器选择一个静态父元素。我`document`在这里使用只是因为您没有透露 HTML 的其余部分，但最好使用更接近实际目标元素的内容。

* * *

这是使用自定义替换功能的另一种有趣的方法：

```
$(document).delegate('#foo input', 'click', function() {
    this.className = this.className.replace(/_(\d)(\s|$)/, function(str, p1, p2) {
        return("_" + (p1 == "1" ? "2" : "1") + p2);
    });
});​ 
```

在这里演示：http: [//jsfiddle.net/jfriend00/xgUzT/](http://jsfiddle.net/jfriend00/xgUzT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:26:34.247

使用这样的东西：

```
$('#foo input').live('click', function () {
    var from_class = "";
    var to_class = "";

    $.each($(this).attr('class').split(/\s+/),function(i,c){
        var matches = c.match(/(\w+_)(\d)/i);               
        if(matches != null)
        {
            from_class = matches[0];
            from_number = matches[2];
            to_number = (matches[2] == '1')?'2':'1';
            to_class = matches[1]+to_number;
            return false;   // Stop the loop since we found the class.
        }
    });
    if(from_class != "" && to_class != "")
    {
        $(this).switchClass(from_class,to_class);
    }
}); 
```

就像 Johannes Klauß 所说，如果您使用的是新版本的 jQuery，请使用 .on() 而不是 .live() 。

# java - 检查 JDBC 选择查询的批量大小

> ID：10036660
> 
> 赞同：1
> 
> 时间：2012-04-05T22:04:31.993
> 
> 标签：java, jdbc, resultset, p6spy

我有一个超过 100K 记录的数据库，我想批量获取结果。我正在使用 SQL 服务器，并且 fetchsize 设置为 50。如何确保只检索 50 条记录，然后检索下 50 条记录。

我尝试使用 P6SPY 调试 SQL，输出显示对结果集中 n 条记录的 n 个查询。我想检查生成的 SQL 并确保应用了 fetchsize。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:56:08.067

这是我的发现：默认情况下，SQL 服务器 JDBC 驱动程序将所有记录提取到内存中。添加`selectMethod=cursor`到连接 url 字符串可以解决问题，现在将使用批量大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T23:00:46.090

我认为 P6SPY 是应用程序级工具，即它位于应用程序和原始 JDBC 驱动程序之间，因此无法窥探 JDBC 驱动程序和数据库服务器之间的交互。

如果您怀疑 JDBC 驱动程序不支持 fetchsize，您将不得不使用网络数据包嗅探器（如wireshark），使用数据库服务器本身中的任何请求日志记录或驱动程序公开的任何调试日志记录。

# c#-4.0 - 日期时间减法，日期跨度除法

> ID：10036661
> 
> 赞同：0
> 
> 时间：2012-04-05T22:04:40.767
> 
> 标签：c#-4.0

我必须减去两个日期并将其除以单元格数

```
Suppose: 
DateTime d1 = 10/6/2010 12:00:00 AM
DateTime d2  = 10/9/2010 11:59:59 PM
#Cells = 5 
```

现在我如何找到增量？增量是 TimeSpan 吗？`delta = (d2.subtract(d1))/5`? 这不起作用。

请建议孙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:07:42.900

```
delta = TimeSpan.FromSeconds((d2 - d1).TotalSeconds / 5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:07:52.407

```
TimeSpan delta = TimeSpan.FromTicks((d2.Subtract(d1).Ticks) / 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:16:31.010

```
d2.Subtract(d1) 
```

这导致不能被 5 整除的 DateTime 输出。

```
var ts = d1 - d2; 
```

ts 将具有 TimeSpan 类型。

然后，您可以使用此 TimeSpan 获取您的 delta，因为您没有指定 delta 类型是什么，您可以将其设置为代表 1/5 秒或 1/5 分钟或其他任何内容的双精度数。

```
var delta_sec = ts.TotalSeconds / 5.0;
var delta_min = ts.TotalMinutes / 5.0; 
```

# c# - 防止或预测内存不足异常

> ID：10036662
> 
> 赞同：0
> 
> 时间：2012-04-05T22:04:41.510
> 
> 标签：c#

我正在寻找一种策略，该策略将检测系统何时即将耗尽内存并使用 Application.Restart(); 重新启动系统；

WebBorwser 控件导致我采用这条路线，因为即使在处理附加到表单的 webbrowser 控件之后，内存使用量也不会减少，而且我读过的所有地方都说这是一个 IE 问题，我们任由他们摆布。（虽然我确实注意到如果我打开 IE，运行相同的网站，内存会增加，但当我关闭选项卡时会适当减少。...）

我不打算转向 webkit，因为 watin 不兼容，我不打算使用 GeckoFX，因为它不支持 javascript 或 jquery 支持，我不打算使用外部浏览器实例，因为嵌入式浏览器控件是一部分我的界面设计。

因此，现在我要做的是创建一个方法，该方法可以根据总内存动态检查可用内存，并在情况变得危急时执行重新启动以正确处理 GC 无法访问的资源并且我无法以编程方式弄清楚如何销毁。

我相信我可以做到这一点并从我停止的地方重新启动我的自动化并循环打开和打开这个守护进程。

谁能帮我弄清楚如何编码内存检查？这应该很容易。我找到了这个线程，但是我在实现它而不遇到错误时遇到了一些麻烦……也许另一种方法会更好？[您如何获得计算机的 RAM 总量？](https://stackoverflow.com/questions/105031/c-sharp-how-do-you-get-total-amount-of-ram-the-computer-has)

多谢你们！我希望这有帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:18:52.053

这没有多大意义。发生 OOM 是因为 CLR 内存管理器无法分配所需的内存卡盘。这可能是由于多种原因。在所有分配之前查看可用 RAM（这完全不相关）甚至可用 GC 内存并*不能*保证不存在 OOM。例如，如果您有 LOH 碎片，可用字节的总数可能会超过分配的需要，但如果 CLR 无法从空闲列表中分配单个连续的内存块，则请求仍然会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:09:55.283

当 Asp.Net 注意到它的可用内存不足时，它会从 httpcache 中驱逐东西，你可以通过 Reflector 进入框架的那个部分，并学习它是如何在那里完成工作的......

# node.js - 错误：node.js 未使用 openssl 加密支持编译

> ID：10036663
> 
> 赞同：2
> 
> 时间：2012-04-05T22:04:52.703
> 
> 标签：node.js, openssl, websocket

**我是 node.js 的新手，但一直试图让一个简单的 websockets 服务器运行。当我尝试运行示例服务器时，我收到错误消息：“错误：node.js 未使用 openssl 加密支持编译。” 当我运行 ./configure 时，我得到：**

检查程序 g++ 或 c++：/usr/bin/g++

检查程序 cpp：/usr/bin/cpp

检查程序 ar：/usr/bin/ar

检查程序ranlib：/usr/bin/ranlib

检查 g++：好的

检查程序 gcc 或 cc ： /usr/bin/gcc

检查程序 ar：/usr/bin/ar

检查程序ranlib：/usr/bin/ranlib

检查 gcc：好的

检查库 dl：是

检查openssl：是

检查库实用程序：是

检查库 rt：是

--- libeio ---

检查库 pthread：是

检查函数 pthread_create ：是

检查功能 pthread_atfork ：是

检查 futimes(2) ：是

检查预读（2）：是

检查 fdatasync(2) ：是

检查 pread(2) 和 pwrite(2) ：是

检查 sendfile(2) ：是

检查 sync_file_range(2) ：是 --- libev --- 检查头文件 sys/inotify.h ：是

检查功能 inotify_init ：是

检查标头 sys/epoll.h ：是

检查功能 epoll_ctl ：是

检查标头 port.h：未找到

检查标题 poll.h ：是

检查功能民意调查：是

检查标头 ['sys/types.h', 'sys/event.h'] ：未找到

检查标头 sys/queue.h ：是

检查功能 kqueue：未找到

检查标头 sys/select.h ：是

检查功能选择：是

检查标头 sys/eventfd.h ：是

检查功能 eventfd ：是

检查 SYS_clock_gettime ：是

检查库 rt：是

检查功能clock_gettime：是

检查功能 nanosleep ：是

检查功能 ceil ：是

使用 c++ 检查 fdatasync(2)：是

**这意味着已安装 openssl。谁能给我关于如何解决此错误的具体建议或说明？谢谢你。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:58:17.483

我假设您从源代码安装了 nodejs，并且您没有安装 openssl。要修复它，请安装 openssl，然后重新安装 nodejs。

# .htaccess - 让 index.php 在目录中捕获所有 URL？

> ID：10036664
> 
> 赞同：1
> 
> 时间：2012-04-05T22:04:56.523
> 
> 标签：.htaccess

`.htaccess`所以我从我的另一个项目中获得了以下文件内容，该项目在`http://www.example.com/`.

```
Options -MultiViews

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L,NC,QSA]
</IfModule> 
```

现在上面的工作很好，但现在我有一个新问题。我想使用相同的概念（将所有链接重定向到 index.php），但是这一次，它需要在一个目录中。（例如`http://www.myothersite.com/thisfolder/`）

所以我尝试`.htaccess`在`http://www.myothersite.com/thisfolder/`. 问题是，如何修改上面的代码，使其指向`index.php`inside的所有链接`thisfolder`？

仅供参考，见下图：

```
myothersite.com
 '-> thisfolder
      '-> .htaccess
      '-> index.php 
```

我需要将`.htaccess`文件放入其中，`thisfolder`因为我不希望它与我在其他文件夹中的其他项目混淆。我想把所有的动作都放在里面`http://www.myothersite.com/thisfolder/`。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:07:27.330

你试过这个吗？

`RewriteRule . /thisfolder/index.php [L,NC,QSA]`

# ios - 我怎么能勾勒出文本字体？

> ID：10036671
> 
> 赞同：6
> 
> 时间：2012-04-05T22:05:31.750
> 
> 标签：ios

我想在它的边框（轮廓）中显示另一种颜色的文本。我正在尝试使用在 MapOverlayView 中显示文本

```
[text drawAtPoint:CGPointMake(0,30) withFont:[UIFont fontWithName:@"Helvetica-Bold" size:(3 * MKRoadWidthAtZoomScale(zoomScale))] 
```

它工作正常，除了我需要显示轮廓的文本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T05:25:04.590

是的，您可以在 的帮助下显示轮廓文本`CGContextSetDrawingMode(CGContextRef, CGTextDrawingMode)`，尽管您可能需要调整一些数字和颜色以使其看起来更好。

使用 kCGTextFillStroke 似乎是合乎逻辑的，但这会使笔触压倒填充。如果您先描边，然后填充，如下面的块所示，您会在可读文本后面看到一个可见的轮廓。

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGPoint point = CGPointMake(0,30);
CGFloat fontSize = (3 * MKRoadWidthAtZoomScale(zoomScale));
UIFont *font = [UIFont fontWithName:@"Helvetica-Bold" size:fontSize];

// Draw outlined text.
CGContextSetTextDrawingMode(context, kCGTextStroke);
// Make the thickness of the outline a function of the font size in use.
CGContextSetLineWidth(context, fontSize/18);
CGContextSetStrokeColorWithColor(context, [[UIColor redColor] CGColor]);
[text drawAtPoint:point withFont:font];

// Draw filled text.  This will make sure it's clearly readable, while leaving some outline behind it.
CGContextSetTextDrawingMode(context, kCGTextFill);
CGContextSetFillColorWithColor(context, [[UIColor blueColor] CGColor]);
[text drawAtPoint:point withFont:font]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T21:59:31.087

接受的答案可能对我不起作用，因为`drawAtPoint:withFont:`已弃用。我能够让它与以下代码一起工作：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGFloat fontSize = 18.0;
CGPoint point = CGPointMake(0, 0);

UIFont *font = [UIFont fontWithName:@"Arial-BoldMT" size:fontSize];
UIColor *outline = [UIColor whiteColor];
UIColor *fill = [UIColor blackColor];

NSDictionary *labelAttr = @{NSForegroundColorAttributeName:outline, NSFontAttributeName:font};

CGContextSetTextDrawingMode(context, kCGTextStroke);
CGContextSetLineWidth(context, 2.0);
[text drawAtPoint:point withAttributes:labelAttr];

CGContextSetTextDrawingMode(context, kCGTextFill);
CGContextSetLineWidth(context, 2.0);
labelAttr = @{NSForegroundColorAttributeName:fill, NSFontAttributeName:font};
[text drawAtPoint:point withAttributes:labelAttr]; 
```

# android - Canvas.getClipBounds 是否分配一个 Rect 对象？

> ID：10036672
> 
> 赞同：4
> 
> 时间：2012-04-05T22:05:31.917
> 
> 标签：android, optimization, android-canvas, android-custom-view

在我的自定义视图中，我正在研究使用[Canvas.getClipBounds()](http://developer.android.com/reference/android/graphics/Canvas.html#getClipBounds%28%29)来优化我的 onDraw 方法（这样我每次调用时只绘制绝对必要的内容）。

但是，我仍然想绝对避免任何对象创建......

因此，我的问题是：`getClipBounds()`每次调用时是否分配一个新的 Rect ？还是只是简单地回收一个 Rect？

如果它正在分配一个新对象，我可以通过 using 来节省这笔费用[`getClipBounds(Rect bounds)`](http://developer.android.com/reference/android/graphics/Canvas.html#getClipBounds%28android.graphics.Rect%29)，它似乎使用传递的 Rect 而不是它自己的？

* * *

（在你尖叫过早优化之前，请考虑当放置在 ScrollView 中时，onDraw每秒可以调用*多次）*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T22:27:52.560

从 Android 4.0.1 开始，我查看了 Canvas 的源代码，如下所示：

```
/**
 * Retrieve the clip bounds, returning true if they are non-empty.
 *
 * @param bounds Return the clip bounds here. If it is null, ignore it but
 *               still return true if the current clip is non-empty.
 * @return true if the current clip is non-empty.
 */
public boolean getClipBounds(Rect bounds) {
    return native_getClipBounds(mNativeCanvas, bounds);
}

/**
 * Retrieve the clip bounds.
 *
 * @return the clip bounds, or [0, 0, 0, 0] if the clip is empty.
 */
public final Rect getClipBounds() {
    Rect r = new Rect();
    getClipBounds(r);
    return r;
} 
```

因此，回答您的问题， getClipBounds(Rect bounds) 将使您免于创建一个对象，但 getClipBounds() 实际上会在每次调用它时创建一个新的 Rect() 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:16:57.027

“getClipBounds()”的实际方法声明是这样的

1.  public boolean getClipBounds (Rect bounds) 所以它不会在你每次调用时创建一个新的 Rect。它将使用您将作为参数传递给此函数的 Rect 对象。我建议在 [此处查看此输入链接描述](http://developer.android.com/reference/android/graphics/Canvas.html#getClipBounds%28%29)

# redirect - 在 open_basedir ON 的共享服务器上替代 CURLOPT_FOLLOWLOCATION

> ID：10036674
> 
> 赞同：1
> 
> 时间：2012-04-05T22:05:53.733
> 
> 标签：redirect, twitter, curl

我正在编写一个脚本，该脚本从带有特定主题标签的推文中提取图像。通常这个脚本工作得很好，因为它只在 open_basedir 和 safe_mode 关闭没有问题的专用服务器上实现。

但是，现在，我正试图让这个脚本为一个客户端工作，该客户端将他的网站托管在一个共享服务器上，其中 open_basedir 为 ON。结果：尝试从 Twitter 图片 URL（多个客户端，如 Twitpic、Yfrog）获取重定向 URL 时给我一个错误。

这是我得到的错误：

> 警告：curl_setopt() [function.curl-setopt]: CURLOPT_FOLLOWLOCATION 在安全模式或 open_basedir 设置时无法激活.....

基本上，脚本会在数据库中生成推文，其中还存储了 URL。但是当尝试在服务器上创建图像时，它给了我结果：“隐藏”，如下面的脚本中所述，因为它无法从直接 URL 中找到 MIME 类型。因此，存储在数据库中的 URL 需要跟随图像路径来拉取图像并创建它。

我的问题是，有没有办法重写 FOLLOWLOCATION 部分？我已经搜索了大约 3 个小时的解决方案，但似乎无法正确实施......

希望有人可以帮助我

剧本：

```
<?php
# Database gegevens inladen
include('config.php');

$query = mysql_query("select * from tweets where loaded=0 and hidden=0 order by id asc limit ".$maximgload);
if(mysql_num_rows($query) > 0){
while($db = mysql_fetch_object($query)){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $db->url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    $buffer = curl_exec($ch);
    curl_close($ch);
    if(!empty($buffer)){
        # Afbeelding opslaan
        $fp = fopen($imgdir.'/'.$db->id.'.temp', 'x');
        fwrite($fp, $buffer);
        fclose($fp);

        if(!function_exists('mime_content_type')) {

            function mime_content_type($filename) {

                    $mime_types = array(

                        // images
                        'png' => 'image/png',
                        'jpe' => 'image/jpeg',
                        'jpeg' => 'image/jpeg',
                        'jpg' => 'image/jpeg',
                    );

                $ext = strtolower(array_pop(explode('.',$filename)));
                if (array_key_exists($ext, $mime_types)) {
                    return $mime_types[$ext];
                }
                elseif (function_exists('finfo_open')) {
                    $finfo = finfo_open(FILEINFO_MIME);
                    $mimetype = finfo_file($finfo, $filename);
                    finfo_close($finfo);
                    return $mimetype;
                }
                else {
                    return 'application/octet-stream';
                }
            }
        }

        # Bestand omzetten naar juiste formaat
        $mimetype = mime_content_type($imgdir.'/'.$db->id.'.temp');
        # Jpg
        if($mimetype == 'image/jpeg'){
            rename($imgdir.'/'.$db->id.'.temp',$imgdir.'/'.$db->id.'.jpg');
        }
        # Png
        elseif($mimetype == 'image/png'){
            rename($imgdir.'/'.$db->id.'.temp',$imgdir.'/'.$db->id.'.png');
        }
        # Ander (onbekend) formaat? weg er mee!
        else{
            @unlink($imgdir.'/'.$db->id.'.temp');
            @mysql_query("update tweets set hidden='1' where id='".$db->id."'");
            $result = 'file '.$db->id.' onbekend';
            break;
        }

        # Thumbnail maken
        $source_image = imagecreatefromstring($buffer);
        $source_width = imagesx($source_image); 
        $source_height = imagesy($source_image); 
        $source_ratio = $source_width / $source_height; 
        $destination_ratio = $thumbwidth / $thumbheight;
        // landscape
        if($source_ratio > $destination_ratio){ 
            $temp_width = (int)($source_height * $destination_ratio); 
            $temp_height = $source_height; 
            $source_x = (int)(($source_width - $temp_width) / 2); 
            $source_y = 0; 
        }
        // portrait
        else { 
            $temp_width = $source_width; 
            $temp_height = (int)($source_width * $destination_ratio); 
            $source_x = 0; 
            $source_y = (int)(($source_height - $temp_height) / 2); 
        } 
        $destination_x = 0; 
        $destination_y = 0; 
        $source_width = $temp_width; 
        $source_height = $temp_height; 
        $new_destination_width = $thumbwidth; 
        $new_destination_height = $thumbheight;

        $thumb = imagecreatetruecolor($thumbwidth,$thumbheight);
        imagecopyresampled($thumb,$source_image,$destination_x,$destination_y,$source_x,$source_y,$new_destination_width,$new_destination_height,$source_width,$source_height);
        # Thumbnail opslaan
        if($mimetype == 'image/jpeg'){
            imagejpeg($thumb,$imgdir.'/'.$db->id.'_thumb.jpg');
        }
        else{
            imagepng($thumb,$imgdir.'/'.$db->id.'_thumb.png');
        }

        # Bijwerken in database
        mysql_query("update tweets set loaded='1', mime='".$mimetype."' where id='".$db->id."'");
        $result = 'afb '.$db->id.' gemaakt';
    }
    # Kan url niet openen? Dan uit database gooien
    else{
        mysql_query("update tweets set hidden='1' where id='".$db->id."'");
        $result = 'afb '.$db->id.' hidden';
    }
}
}
else{
$result = 'done';
}
echo '<html>
<head>
<meta http-equiv="refresh" content="2">
<title>'.$result.'</title>
</head>
</html>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:12:35.290

检查这一功能，它使用递归来模拟跟随定位

```
/**
 * @param cURL  $ch                     - uchwyt do cURL
 * @param int   $redirects              - przekierowania
 * @param bool  $curlopt_returntransfer - CURLOPT_RETURNTRANSFER
 * @param int   $curlopt_maxredirs      - CURLOPT_MAXREDIRS
 * @param bool  $curlopt_header         - CURLOPT_HEADER
 * @return mixed
 */
function curl_redirect_exec($ch, &$redirects, $curlopt_returntransfer = false, $curlopt_maxredirs = 10, $curlopt_header = false) {
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $data = curl_exec($ch);
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    $exceeded_max_redirects = $curlopt_maxredirs > $redirects;
    $exist_more_redirects = false;
    if ($http_code == 301 || $http_code == 302) {
        if ($exceeded_max_redirects) {
            list($header) = explode("\r\n\r\n", $data, 2);
            $matches = array();
            preg_match('/(Location:|URI:)(.*?)\n/', $header, $matches);
            $url = trim(array_pop($matches));
            $url_parsed = parse_url($url);
            if (isset($url_parsed)) {
                curl_setopt($ch, CURLOPT_URL, $url);
                $redirects++;
                return curl_redirect_exec($ch, $redirects, $curlopt_returntransfer, $curlopt_maxredirs, $curlopt_header);
            }
        }
        else {
            $exist_more_redirects = true;
        }
    }
    if ($data !== false) {
        if (!$curlopt_header)
            list(,$data) = explode("\r\n\r\n", $data, 2);
        if ($exist_more_redirects) return false;
        if ($curlopt_returntransfer) {
            return $data;
        }
        else {
            echo $data;
            if (curl_errno($ch) === 0) return true;
            else return false;
        }
    }
    else {
        return false;
    }
} 
```

示例用法：

```
$ch = curl_init("http://some-website.com");
$redirects = 0;
curl_redirect_exec($ch, $redirects);
$info = curl_getinfo($ch);
curl_close($ch); 
```

代码取自：[http ://antczak.org/2009/12/curl-rozwiazanie-problemu-z-curlopt_followlocation/](http://antczak.org/2009/12/curl-rozwiazanie-problemu-z-curlopt_followlocation/)

# string - 是否可以将经过时间函数转换为整数？

> ID：10036675
> 
> 赞同：0
> 
> 时间：2012-04-05T22:05:54.810
> 
> 标签：string, time, casting, clojure, integer

我有以下功能：

```
(def elapsedtime (with-out-str (time (run-my-function)))) 
```

我想知道是否可以只存储时间的整数值，因为我现在只能存储一个字符串......

有什么建议吗？非常感谢

**更新**

```
So I did use this:
  (defmacro nsecs
  [expr]
  `(let [start# (. System (nanoTime))]
     ~expr
     (- (. System (nanoTime)) start#))) 
```

然后修改了这个：

```
(def elapsedtime (nsecs (run-my-function argument1 argument2))) 
```

但不起作用，我做错了什么？

“线程“AWT-EventQueue-0”中的异常 java.lang.IllegalArgumentException：传递给的 args (1) 数量错误：main$fn--105$nsecs”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:15:49.237

我们不从字符串中提取这个值，而是看一下[`time`宏](http://www.clodoc.org/doc/clojure.core/time)的来源。

```
(defmacro time
  "Evaluates expr and prints the time it took.  Returns the value of expr."
  {:added "1.0"}
  [expr]
  `(let [start# (. System (nanoTime))
         ret# ~expr]
     (prn (str "Elapsed time: "
               (/ (double (- (. System (nanoTime)) start#)) 1000000.0) " msecs"))
     ret#)) 
```

使用它作为新宏的基础，返回用于评估给定表达式的纳秒数。

```
(defmacro nsecs
  [expr]
  `(let [start# (. System (nanoTime))]
     ~expr
     (- (. System (nanoTime)) start#))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:01:45.327

DefMacro 解决方案对我不起作用，所以我使用了这个过滤解决方案：

```
(filter #(#{\0,\1,\2,\3,\4,\5,\6,\7,\8,\9,\.} %) my-double-number) 
```

返回的值正是我想要的。无论如何，感谢您的建议和您的时间。雪儿

# c# - XNA 4.0 寻找房间算法问题

> ID：10036680
> 
> 赞同：3
> 
> 时间：2012-04-05T22:06:15.507
> 
> 标签：c#, algorithm, xna, xna-4.0

我正在做一个个人项目，我仍然非常喜欢 XNA 和 C#（我在 Visual Basic 和 C++ 方面有一些经验）。这个项目只是在我开始真正的游戏之前测试代码和算法。

我遇到的问题是，当我点击进入时，我试图在地图上生成一个球体，但是我不希望球体在另一个或玩家之上生成，因为我有一个非常基本的碰撞检测系统。

问题特别是查找室返回一些奇怪的矩形，即使它应该能够在原点找到空间。有时它只会在另一个球体之上生成球体。如果我将玩家移动到球体中，这将导致崩溃。

这就是问题所在 -

```
 if (currentKeyState.IsKeyDown(Keys.Enter) && newBallDelay == 0)
        {
            Npcs newBall = new Npcs();
            //find room
            Rectangle rect;
            if (findRoom(newBall, ref rect))
            {
                newBall.postion = new Vector2(rect.X, rect.Y);
                characters.Add(newBall); //adds to a list of Npcs which is drawn in a foreach loop
                newBallDelay = 1; //prevents from adding too many spheres at once
            }
        } 
```

调用

```
 bool findRoom(Npcs newObject, ref Rectangle rectObject)
    {
        Rectangle player = new Rectangle((int)spritelocation.X, (int)spritelocation.Y, (int)sprite.Bounds.Width/4, (int)sprite.Bounds.Height/4);
        Rectangle check;
        for (int i = 0; i < characters.Count; i++)
        {
            check = new Rectangle((int)characters[i].postion.X, (int)characters[i].postion.Y, (int)characters[i].size.X, (int)characters[i].size.Y);
            for (int j = 0; j < 50; j++)
            {
                rectObject = new Rectangle(i * (int)newObject.size.X * 2, j * (int)newObject.size.Y * 2, (int)newObject.size.X, (int)newObject.size.Y); //size.X and size.Y are the height and width of the object, this creates rectangular grid to check through.
                if (!rectObject.Intersects(player) && !rectObject.Intersects(check))
                    return (true);
            }
        }

        return (false);
    } 
```

我怀疑它是否相关，但对于 newballdelay，我有这个更新

```
 if (newBallDelay > 0)
        {
            newBallDelay++;
            if (newBallDelay == 50)
                newBallDelay = 0;
        } 
```

感谢您花时间查看。再次，我是该网站的新手，我想我应该认为自己是编码新手，所以任何提示或建议将不胜感激。

编辑：固定内部 for 循环。正在检查和递增 i 而不是 j。不过还是同样的问题。

编辑 2：FindRoom 算法似乎返回两个位置之一，无论现场是否有东西。

编辑3：发现小问题精灵矩形的高度和宽度必须除以4才能正确检测精灵。

如果有帮助，这是我的整个代码（对不起，如果它很乱并且不符合正确的约定，我还在学习）

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Texture2D sprite;
    Texture2D background;
    Texture2D sphere;

    bool walking = false;
    int walkSpeed = 2;
    int newBallDelay = 0;
    //bool jump = false;

    int runSpeed = 5;
    int frame = 0;
    Random rand = new Random();

    int walkdir = 3; //0 = down, 1 = left, 2 = right, 3 = up
    Vector2 spritelocation = new Vector2(0,0);

    int imageH = 0;
    int imageW = 0;
    float elapsed = 0;

    private const int Frames = 4;
    private float frameSpeed = 0.15f;

    List<Npcs> characters = new List<Npcs>();
    Npcs ball = new Npcs();
    Npcs ball2 = new Npcs();
    Camera2d cam = new Camera2d();

    private SpriteBatch batch;
    SpriteFont Font1;
    Vector2 FontPos;

    public Game1()
    {

        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        IsMouseVisible = true;
        Window.AllowUserResizing = true;
        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        ball.size = (new Vector2(50, 50));
        ball.postion = (new Vector2(50, 50));
        characters.Add(ball);

        ball2.size = (new Vector2(50, 50));
        ball2.postion = (new Vector2(160, 80));
        characters.Add(ball2);
        spriteBatch = new SpriteBatch(GraphicsDevice);
        sprite = Content.Load<Texture2D>("sprite\\scaled");
        background = Content.Load<Texture2D>("sprite\\grass");
        sphere = Content.Load<Texture2D>("sprite\\ball");
        imageW = sprite.Bounds.Width;
        imageH = sprite.Bounds.Height;
        cam.Pos = new Vector2(350, 50);
        //cam.Rotation = 0.5f;
        // cam.Zoom = 2.0f // Example of Zoom in
        // cam.Zoom = 0.5f // Example of Zoom out

        spriteBatch = new SpriteBatch(GraphicsDevice);
        Font1 = Content.Load<SpriteFont>("LucidaConsole");

        batch = new SpriteBatch(this.graphics.GraphicsDevice);

        FontPos = new Vector2(graphics.GraphicsDevice.Viewport.Width - 90, 20);
    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();
        getInput();
        // TODO: Add your update logic here

        elapsed += (float)gameTime.ElapsedGameTime.TotalSeconds;

        //Delay for ball
        if (newBallDelay > 0)
        {
            newBallDelay++;
            if (newBallDelay == 50)
                newBallDelay = 0;
        }

        checkCollsion();

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        graphics.PreferredBackBufferWidth = 1366;
        graphics.PreferredBackBufferHeight = 728;
        graphics.GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here
        //// if using XNA 4.0
        spriteBatch.Begin(SpriteSortMode.BackToFront,BlendState.AlphaBlend,null,null,null,null, cam.get_transformation(null));

        //spriteBatch.Draw(background, new Vector2(-2000,-2000), new Rectangle(0,0,4000,4000), Color.White);

        for (int i = 0; i < characters.Count(); i++ )
        {
            spriteBatch.Draw(sphere, characters[i].postion, new Rectangle(0, 0, (int)Math.Round(characters[i].size.X), (int)Math.Round(characters[i].size.Y)), Color.White);
        }

        elapsed += (int)gameTime.ElapsedGameTime.TotalSeconds;
        while (elapsed > frameSpeed && walking)
        {
            frame++;
            elapsed = 0;
            frame = frame % Frames;
        }

        if (!walking)
            spriteBatch.Draw(sprite, spritelocation, new Rectangle(0, walkdir * (imageH / 4), (imageW / 4), (imageH / 4)), Color.White);
        else
            spriteBatch.Draw(sprite, spritelocation, new Rectangle(frame * (imageW / 4), walkdir * (imageH / 4), (imageW / 4), (imageH / 4)), Color.White);

        spriteBatch.End();

        base.Draw(gameTime);

    }

    protected void getInput() //Recieves keyboard input
    {
    KeyboardState currentKeyState = Keyboard.GetState();
        if (currentKeyState.IsKeyDown(Keys.Up))
        {
            walkdir = 3;
            walking = true;
            if ((currentKeyState.IsKeyDown(Keys.LeftShift)))
            {
                frameSpeed = 0.05f;
                spritelocation.Y -= runSpeed;
                cam.Move(new Vector2(0, -runSpeed));
            }
            else
            {
                frameSpeed = 0.15f;
                spritelocation.Y -= walkSpeed;
                cam.Move(new Vector2(0, -walkSpeed));
            }
        }
        else if (currentKeyState.IsKeyDown(Keys.Down))
        {
            walkdir = 0;
            walking = true;
            if ((currentKeyState.IsKeyDown(Keys.LeftShift)))
            {
                frameSpeed = 0.05f;
                spritelocation.Y += runSpeed;
                cam.Move(new Vector2(0, runSpeed));
            }
            else
            {
                frameSpeed = 0.15f;
                spritelocation.Y += walkSpeed;
                cam.Move(new Vector2(0, walkSpeed));
            }
        }
        else if (currentKeyState.IsKeyDown(Keys.Right))
        {
            walkdir = 2;
            walking = true;
            if ((currentKeyState.IsKeyDown(Keys.LeftShift)))
            {
                frameSpeed = 0.05f;
                spritelocation.X += runSpeed;
                cam.Move(new Vector2(runSpeed, 0));
            }
            else
            {
                frameSpeed = 0.15f;
                spritelocation.X += walkSpeed;
                cam.Move(new Vector2(walkSpeed, 0));
            }
        }
        else if (currentKeyState.IsKeyDown(Keys.Left))
        {
            walkdir = 1;
            walking = true;
            if ((currentKeyState.IsKeyDown(Keys.LeftShift)))
            {
                frameSpeed = 0.05f;
                spritelocation.X -= runSpeed;
                cam.Move(new Vector2(-runSpeed, 0));
            }
            else
            {
                frameSpeed = 0.15f;
                spritelocation.X -= walkSpeed;
                cam.Move(new Vector2(-walkSpeed, 0));
            }
        }
        else
        {
            walking = false;
            frameSpeed = 1f;
        }

        if (currentKeyState.IsKeyDown(Keys.Enter) && newBallDelay == 0)
        {
            Npcs newBall = new Npcs();
            //find room
            Rectangle rect = new Rectangle(0,0,(int)newBall.size.X,(int)newBall.size.Y);
            if (findRoom(newBall, ref rect))
            {
                newBall.postion = new Vector2(rect.X, rect.Y);
                characters.Add(newBall);
                newBallDelay = 1;
            }
        } //if enter key is hit
    } //get input

 bool findRoom(Npcs newObject, ref Rectangle rectObject)
 {
    Rectangle player = new Rectangle((int)spritelocation.X, (int)spritelocation.Y,     (int)sprite.Bounds.Width/4, (int)sprite.Bounds.Height/4);
    Rectangle check;
    for (int i = 0; i < characters.Count; i++)
    {
        check = new Rectangle((int)characters[i].postion.X, (int)characters[i].postion.Y, (int)characters[i].size.X, (int)characters[i].size.Y);
        for (int j = 0; j < 50; j++)
        {
            rectObject = new Rectangle(i * (int)newObject.size.X * 2, j * (int)newObject.size.Y * 2, (int)newObject.size.X, (int)newObject.size.Y); //size.X and size.Y are the height and width of the object, this creates rectangular grid to check through.
            if (!rectObject.Intersects(player) && !rectObject.Intersects(check))
                return (true);
        }
    }

    return (false);
}

    void checkCollsion(Npcs character, int index)
    {
        Rectangle char1 = new Rectangle((int)character.postion.X, (int)character.postion.Y, (int)character.size.X, (int)character.size.Y);
        Rectangle char2 = new Rectangle();
        for (int i = 0; i < characters.Count(); i++)
        {
            if (i != index)
            {
                char2 = new Rectangle((int)characters[i].postion.X, (int)characters[i].postion.Y, (int)characters[i].size.X, (int)characters[i].size.Y);
                if (char1.Intersects(char2))
                {
                    characters[i].hit(walkdir, (int)character.speed);
                    checkCollsion(characters[i], i);
                }
            }
        }
        character.speed = 0.0f;
    }

    void checkCollsion()
    {
        Rectangle char1 = new Rectangle((int)spritelocation.X, (int)spritelocation.Y, (int)sprite.Bounds.Width/4 - 10, (int)sprite.Bounds.Height/4 - 15);
        Rectangle char2 = new Rectangle();
        for (int i = 0; i < characters.Count(); i++)
        {
                char2 = new Rectangle((int)characters[i].postion.X, (int)characters[i].postion.Y, (int)characters[i].size.X, (int)characters[i].size.Y);
                if (char1.Intersects(char2))
                {
                    characters[i].hit(walkdir, runSpeed);

                    checkCollsion(characters[i], i);
                }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:10:56.427

我不再看到任何可能的错误，但我不知道上下文。

我认为最好的方法是逐步调试，也许将重要的数字记录到一个文件中，这样你就可以快速看到一些奇怪的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:53:35.980

好的，我从头开始修改了我的碰撞代码，以解决使 findRoom 毫无意义的工作。我还使用随机变量来确定球体的生成点。谢谢你帮助大家。我很感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:26:37.403

您的内部 for 循环正在初始化`int j = 0`但使用 `i++`. 这不会超过`characters`数组大小吗？这可能是问题所在。

# guava - 使用标准库组合两个 Iterables - 或 - 与多个 Iterables 的映射

> ID：10036682
> 
> 赞同：4
> 
> 时间：2012-04-05T22:06:30.887
> 
> 标签：guava, xtext, xtend

当给两个`Iterables`

```
val keys = newLinkedList('foo', 'bar', 'bla')
val vals = newLinkedList(42, 43, 44) 
```

我想像这样关联两个列表中的每个项目：

```
val Iterable<Pair<String, Integer>> expected 
    = newLinkedList('foo'->42, 'bar'->43, 'bla'->44) 
```

好的，我可以通过手动迭代两个列表来完成。

另一方面，这闻起来像

*   Xtend 或 guava 中提供了一些标准功能或
*   一些巧妙的技巧将在一行中完成。

对于 Python 中的示例，这将是显而易见的，因为它们的[map](http://docs.python.org/library/functions.html#map)函数可以采用多个列表。

如何使用带有最少代码的 Xtend2+ 来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T22:22:05.390

```
final Iterator it = vals.iterator();
expected = Iterables.transform(keys, new Function<String, Pair>() {
    public Pair apply(String key) {
        return new Pair(key, it.next());
    }
}); 
```

**AH添加：**

在 Xtend 中，这看起来像这样：

```
val valsIter = vals.iterator()
val paired = keys.map[ k | k -> valsIter.next ] 
```

# javascript - Handlebars.js 不替换标签

> ID：10036688
> 
> 赞同：2
> 
> 时间：2012-04-05T22:07:30.760
> 
> 标签：javascript, mustache, handlebars.js

我正在使用[Handlebars.js](http://www.handlebarsjs.com)（或尝试使用），即使是一个简单的示例，它也不会用数据替换实际的标签。

这是我所拥有的：

```
 <script id="template" type="text/x-handlebars-template">
     <div>Test Template</div>
     <p>Name: {{name}}</p>
    </script>

    <div id="template-preview"></div>

 <script>
 var source   = $("#template").html();
 var template = Handlebars.compile(source);
 var data = { name : 'first name'};
 $("#template-preview").html(template(data));
</script> 
```

我没有收到任何错误，它在模板预览中显示模板，但它`{{name}}`是空的。如果我在这里遗漏了什么，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:25:08.213

这对我有用（用 Chrome 测试）。您使用的是哪个版本的车把？

```
<!doctype html>
<head>
</head>
<body>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
     <script src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js"></script>
     <script id="template" type="text/x-handlebars-template">
     <div>Test Template</div>
     <p>Name: {{name}}</p>
     </script>
     <div id="template-preview"></div>

     <script>
        var source   = $("#template").html();
        var template = Handlebars.compile(source);
        var data = { name : 'Michael'};
        $("#template-preview").html(template(data));
     </script>
</body>
</html> 
```

# android - 将字符串值从 Activity 返回到 Fragment

> ID：10036694
> 
> 赞同：0
> 
> 时间：2012-04-05T22:08:00.487
> 
> 标签：android, interface, android-activity, return-value, fragment

我试图弄清楚如何从 Activity 类中的方法获取值到该 Activity 的片段中。我设置了三个文件：AsyncTaskActivity.java、EventsList.java 和 ListFragment.java。AsyncTaskActivity.java 具有返回字符串值的 getOtakuEvents() 方法。

```
package com.leobee;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.google.android.maps.MapActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

public class AsyncTasksActivity extends MapActivity implements EventsList{

        LocationManager locationManager;

           String stxtLat ;
           String stxtLong;
           double pLong;
           double pLat;
           String x;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

        // Acquire a reference to the system Location Manager
           locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

           // Define a listener that responds to location updates
           LocationListener locationListener = new LocationListener() {
               public void onLocationChanged(Location location) {
                   pLong=location.getLongitude();
                   pLat=location.getLatitude();
                   stxtLat=Double.toString(pLat);
                   stxtLong=Double.toString(pLong);
                   Toast.makeText(AsyncTasksActivity.this, stxtLong, Toast.LENGTH_SHORT).show();
                   Toast.makeText(AsyncTasksActivity.this, stxtLat, Toast.LENGTH_SHORT).show();

               }

               public void onStatusChanged(String provider, int status, Bundle extras) {}

               public void onProviderEnabled(String provider) {}

               public void onProviderDisabled(String provider) {}

             };

           // Register the listener with the Location Manager to receive location updates
           locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
           DownloadWebPageTask task = new DownloadWebPageTask();

           double numRand = Math.floor(Math.random()*1000);
             String userLat= stxtLat;
            String userLong= stxtLong;
            task.execute(new String[] { "http://www.leobee.com/otakufinder/scripts/geoloco.php?userLat="+userLat+"&userLong="+userLong+"&randNum="+numRand });

        }

        private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
            @Override
            protected String doInBackground(String... urls) {
                String response = "";
                for (String url : urls) {
                    DefaultHttpClient client = new DefaultHttpClient();
                    //HttpGet myGet = new HttpGet("http://foo.com/someservlet?param1=foo&param2=bar");

                    HttpGet httpGet = new HttpGet(url);
                    try {
                        HttpResponse execute = client.execute(httpGet);
                        InputStream content = execute.getEntity().getContent();

                        BufferedReader buffer = new BufferedReader(
                                new InputStreamReader(content));
                        String s = "";
                        while ((s = buffer.readLine()) != null) {
                            response += s;
                        }

                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
                return response;
            }

        @Override
        protected void onPostExecute(String result) {

             x =result;

                Log.v("values",x);

            }

        }

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }
        @Override
        public String getOtakuEvents() {
            // TODO Auto-generated method stub
            return x;
        }
} 
```

EventsList.java 是一个接口，可以帮助类知道 getOtakuEvents() 值可供它们使用。

```
package com.leobee;

public interface EventsList {

    String getOtakuEvents();

} 
```

最后，片段有一个从 getOtakuEvents() 获取值的方法，称为 getStringfromActivity()。

```
 package com.leobee;

    import android.content.Intent;
    import android.content.res.Configuration;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;

    // shows list view of items if fragment is not null this class will also show the item selected form Detailfragment class
    public class ListFragment  extends android.app.ListFragment{
    String events;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            String events =getStringfromActivity();

        }
public String getStringfromActivity() {
        String i;
        i=EventsList.getOtakuEvents();
            return i;
        }

    /*  public String getStringfromActivity() {

        return getActivity().getOtakuEvents();

        }*/

        @Override
        public void onActivityCreated(Bundle savedInstanceState){

            super.onActivityCreated(savedInstanceState);

        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1,values);
            setListAdapter(adapter);

        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id){

            String item =(String)getListAdapter().getItem(position);
            DetailFragment fragment = (DetailFragment) getFragmentManager().findFragmentById(R.id.detailFragment);

            if (fragment != null && fragment.isInLayout()){

            fragment.setText(item);
            }else{Intent intent = new Intent(getActivity().getApplicationContext(),
                    DetailActivity.class);
            intent.putExtra("value", item);
            startActivity(intent);

            }

        }
        @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);
            Log.e("text","config change detail fragment");
            // Checks the orientation of the screen

        }

    } 
```

我收到错误：无法从类型 EventsList 中对非静态方法 getOtakuEvents() 进行静态引用。这很令人困惑，因为我没有在 getOtakuEvents() 或片段中声明静态类型。

或者，我也在片段中尝试了这个版本的方法：

```
 public String getStringfromActivity() {

        return getActivity().getOtakuEvents();

        } 
```

我收到一个错误：方法 getOtakuEvents() 未定义 Activity 类型。这让我感到困惑，因为该方法*是*在父活动中定义的。

具体来说，我需要能够将字符串值从活动发送到片段。我正在尝试使用接口或 getActivity 方法来做到这一点。您能否查看我的代码并让我知道哪里出错以及如何解决？我已经在这两天的大部分时间里，似乎无法弄清楚。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:44:23.137

您可能可以从 SharedPreferences 存储和检索它

# appharbor - 从 AppHarbor 下载文件

> ID：10036695
> 
> 赞同：1
> 
> 时间：2012-04-05T22:08:00.517
> 
> 标签：appharbor

我使用[AppHarbor](https://appharbor.com/)设置我的网站，当我更改网站中的某些内容（上传图片）时，我将更改写入 XML 文件。图片的路径、名称、id等

如何查看我在服务器上编写的这个 XML 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:42:10.723

您不应该使用 AppHarbor 上的 web worker 文件系统来实现持久性。这是因为在部署新版本的代码或 AppHarbor 必须对您的应用程序进行维护时，更改会丢失。此外，如果您的应用程序使用多个 Web Worker，则文件系统更改不会在实例之间同步。改用 Amazon S3 或提供的[数据持久性插件](https://appharbor.com/addons)之一。

# windows - 如何在 IIS 7 上创建本地站点？

> ID：10036697
> 
> 赞同：0
> 
> 时间：2012-04-05T22:08:04.773
> 
> 标签：windows, internet-explorer, iis, web

我做了一个网站，我把它命名为 rar.com，它恰好是一个真实的网站（不是我创建的）。我希望 IIS 上列出的站点将我重定向到本地网页而不是外部站点。

1.  IIS --> 添加网站
2.  网站名称 == rar.com
3.  将物理路径设置为 c:\rar\index.html
4.  类型：http，IP 地址：未分配，端口：80
5.  主机名 www.rar.com
6.  添加另一个具有相同信息的绑定，但主机名设置为 rar.com

7.  转到：C:\Windows\System32\drivers\etc\hosts 并将以下行添加到文件中：127.0.0.1 www.rar.com（我也用 rar.com 尝试过）

8.  去IE，还是不行。

我在这里想念什么？对不起，我是 IIS 新手。环境：一台运行 Windows Server 2008 R2 和 IIS 7.0 的机器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:11:18.200

你确定你保存了hosts文件？您是否以管理员身份打开并编辑它？

如果您的服务器还用作工作站的 DNS 服务器，您也可以将 rar.com 域添加到您的 DNS 服务器，并在服务器地址上有一个 A 记录点。如果您的工作站使用例如您的调制解调器/路由器/ISP 的 DNS 地址，这将**不起作用。**

**编辑**如果您在工作站上运行浏览器并在服务器上运行网站，则 IP 地址不应为 127.0.0.1（即 localhost！）；在这种情况下，您应该将服务器的 IP 地址放在工作站上的 hosts 文件中！

# notepad++ - 如何在 Notepad++ 中自动执行一系列搜索和替换操作

> ID：10036705
> 
> 赞同：5
> 
> 时间：2012-04-05T22:08:32.637
> 
> 标签：notepad++

我有一个文件，其中有我必须删除的行数。这些行可以使用正则表达式来区分，因此利用一系列搜索和替换我可以删除它们。

现在我必须多次重复相同的任务。所以我正在寻找一种方法，我不需要一次又一次地经历这一系列的替换。有什么方法可以将这些替换系列批处理/编写成单个命令。

我尝试通过录制宏来做到这一点，但似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:46:31.123

如果您熟悉 Python，请尝试使用[Python 脚本](https://sourceforge.net/projects/npppythonscript/)插件。如果您不熟悉 Python，那么您很快就会熟悉它。使用该插件进行此类自动化操作只需动动手指。如果您无法使用某些东西，您可以在该插件的支持论坛上找到帮助。

[至少一个关于通过插件替换正则表达式的示例链接](https://sourceforge.net/projects/npppythonscript/forums/forum/1199074/topic/4667045)。

此外，我自己也在 N++ 中使用替换宏。您是否尝试使用复杂的单选项卡“查找/替换”对话框或多选项卡查找对话框的简单“替换”选项卡，它也支持正则表达式？后一个对我有用。我没有尝试第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-21T10:26:31.217

[Python Script](https://sourceforge.net/projects/npppythonscript/)插件示例脚本集合中的示例脚本[Multiples_SR.py](https://github.com/bruderstein/PythonScript/blob/master/scripts/Samples/Multiples_SR.py)（参见[讨论](https://community.notepad-plus-plus.org/topic/16942/pythonscript-any-ready-pyscript-to-replace-one-huge-set-of-regex-phrases-with-others/23)）可以满足您的需求。

从脚本的解释：

这个脚本：

*   读取当前目录的现有`"SR_List.txt"`文件，其中包含搜索/替换字符串列表，每行一个
*   一次选择一个 SEARCH 和 REPLACEMENT 正则表达式/表达式/字符串/字符的 COUPLE
*   在 NOTEPAD++ 中对当前编辑的文件执行此当前 S/R
*   循环到文件末尾

“SR_list.txt”文件中任何以“#”开头的 PURE BLANK 行或 COMMENT 行都将被忽略

对于每一行，在“SR_List.txt”文件中，格式为

```
<DELIMITER><SEARCH regex><DELIMITER><REPLACE regex><DELIMITER> 
```

# php - 唯一验证不起作用，我该怎么做？

> ID：10036707
> 
> 赞同：0
> 
> 时间：2012-04-05T22:08:36.660
> 
> 标签：php, validation, doctrine-orm, codeigniter-2

我正在使用 Doctrine 2.2.1 和 CodeIgniter 2.1.0

我正在尝试对表单中的电子邮件地址字段进行唯一验证 - 只是为了确保该字段不存在于数据库中。

[我首先在这里](http://codeigniter.com/user_guide/libraries/form_validation.html)查看这个好的（但过时的）教程和[这里](http://www.phpandstuff.com/articles/codeigniter-doctrine-scratch-day-3-user-signup-form)的 CodeIgniter 文档

CI 文档显示了使用 is_unique[table.field] 的示例，并且似乎说使用回调可以做到这一点，但我似乎并没有掌握该代码是如何做到的，我自己也无法让它工作。

我试过这个：

```
$this->form_validation->set_rules('email', 'E-mail',
                 'required|valid_email|is_unique[users.email]'); 
```

和这个：

```
$this->form_validation->set_rules('email', 'E-mail', 'callback_email_check'); 
```

（这几乎是从 CodeIgniter 示例中逐字记录的）

都不工作。第一个给我以下输出：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Signup_form::$db

Filename: libraries/Form_validation.php

Line Number: 954

Fatal error: Call to a member function limit() on a non-object in /../systemFolder/libraries/Form_validation.php on line 954 
```

第二个给了我这个输出：

> 致命错误：未捕获的异常“PDOException”，带有消息“SQLSTATE [23000]：完整性约束违规：1062 重复条目“email@address.com”，用于 /../applicationFolder/libraries/Doctrine/DBAL/Statement 中的键“email_index” .php:131 堆栈跟踪：#0 /../applicationFolder/libraries/Doctrine/DBAL/Statement.php(131): PDOStatement->execute(NULL) #1 /../applicationFolder/libraries/Doctrine/ORM/Persisters /BasicEntityPersister.php(239): Doctrine\DBAL\Statement->execute() #2 /../applicationFolder/libraries/Doctrine/ORM/UnitOfWork.php(896): Doctrine\ORM\Persisters\BasicEntityPersister->executeInserts( ) #3 /../applicationFolder/libraries/Doctrine/ORM/UnitOfWork.php(304): Doctrine\ORM\UnitOfWork->executeInserts(Object(Doctrine\ORM\Mapping\ClassMetadata in /../applicationFolder/libraries/Doctrine/DBAL/Statement.php 在第 131 行

我忽略了一些简单的事情吗？有关如何使用 CI/Doctrine 正确对数据库进行唯一验证的任何帮助？谢谢！

**注意：在将“数据库”添加到自动加载配置后，我能够开始`$this->form_validation->set_rules('email', 'E-mail', 'required|valid_email|is_unique[users.email]');`工作，但是，这完全破坏了 Doctrine。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T00:31:53.430

**这是100％的工作解决方案：**

-> 转到系统/库/form_validation.php

->转到第 954 行（您可能在 950 左右）

-> 用以下代码替换 is_unique 函数

```
public function is_unique($str, $field)
    {
        list($table, $field)=explode('.', $field);
        $this->CI->load->database('default');

        $query = $this->CI->db->limit(1)->get_where($table, array($field => $str));

        return $query->num_rows() === 0;
    } 
```

**实际上**错误是因为未知的 $db 对象，因为在调用 $db 之前没有加载数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:30:03.397

这似乎可以解决问题。不确定这是否是最好或最优雅的方式，但它确实有效。

```
$this->form_validation->set_rules('email', 'E-mail', 
                 'required|valid_email|callback_email_check'); 
```

```
public function email_check($str)
{
$user = $this->doctrine->em->getRepository('Entities\User')->findOneBy(array('email' => $str));
    if (isset($user)) {
            $this->form_validation->set_message('email_check', 'This email address is already in use');
                    return FALSE;
    } else
    {
        return TRUE;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T17:17:00.350

我刚刚遇到了同样的问题，这是 CodeIgniter 2.1 的问题。
有两个修复它。

**1.**从 repo 源升级 CodeIgniter，它有针对它的修复和针对其他问题的许多其他修复：
[Github 上的 Repo Source](https://github.com/EllisLab/CodeIgniter)

*或者*

**2.**打开`system/libraries/Form_validation`
Go to line`954`并将函数替换为`is_unique()`：

```
 public function is_unique($str, $field)
    {
        list($table, $field) = explode('.', $field);

        if (isset($this->CI->db)) {
            $query = $this->CI->db->limit(1)->get_where($table, array($field => $str));
            return $query->num_rows() === 0;
        }

        return FALSE;
    } 
```

这应该解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T23:50:42.310

Just add `$this->load->database();` in the `_construct` function

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T10:33:15.780

至于我的解决方案是在表名“用户”中，在你的验证规则中它必须是：`$this->form_validation->set_rules('email', 'E-mail', 'required|valid_email|is_unique[Users.email]');`- 表名是大写的。我希望这可以帮助别人。

同样在 CodeIgniter 2.0 中，您应该使用：

```
 is_unique[db,table_name,field_name] 
```

# excel - 将常量的字符串表示形式转换为常量？

> ID：10036711
> 
> 赞同：3
> 
> 时间：2012-04-05T22:09:05.480
> 
> 标签：excel, vba

我试图接受来自数据单元格的格式常量，所以我有一个字符串“xlTotalsCalculationAverage”。我如何将其转换为它所代表的 Excel 常量；常数`xlTotalsCalculationAverage`等于整数 2。

```
ActiveSheet.ListObjects(1).ListColumns(RemainingHeader).TotalsCalculation = xlTotalsCalculationAverage 
```

是静态表示。

```
TargetTotal = something("xlTotalsCalculationAverage")
ActiveSheet.ListObjects(1).ListColumns(RemainingHeader).TotalsCalculation = TargetTotal 
```

是我的目标。

我可以做一个巨大的 case 或 switch 语句，但是复制所有可能的值似乎很愚蠢。

如何让 Excel 将此字符串转换为已知的常量值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T23:16:38.397

总有这样的：

```
Sub Tester()
    MsgBox WhatIsTheValue("xlTotalsCalculationAverage")
    MsgBox WhatIsTheValue("xlTotalsCalculationCountNums")
End Sub

Function WhatIsTheValue(s As String) As Variant

        Dim VBProj As VBIDE.VBProject
        Dim VBComp As VBIDE.VBComponent
        Dim CodeMod As VBIDE.CodeModule
        Set VBProj = ActiveWorkbook.VBProject
        Set VBComp = VBProj.VBComponents("modTemp")
        Set CodeMod = VBComp.CodeModule

        With CodeMod
            .DeleteLines 1, .CountOfLines
            .InsertLines 1, "Public Function GetEnumVal()"
            .InsertLines 2, "GetEnumVal = " & s
            .InsertLines 3, "End Function"
        End With
        WhatIsTheValue = Application.Run("GetEnumVal")

End Function 
```

但真的 - 不要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T09:15:44.727

由于没有真正实用的解决方案，您通常会被困在编写自己的 switch 语句中。据我所知，由于 .NET 互操作库和 VBA 的枚举始终相同，因此我编写了一个程序，为 dll （列表）中的每个公共枚举生成 VBA 模块。这是我的 Office.Core、PowerPoint、Word、Excel、Publisher 和 Outlook dll 的输出：

[https://gitlab.com/jbjurstam/VbaHelpers/tree/master/GenerateVbaEnumHelpers/bin/Release/output](https://gitlab.com/jbjurstam/VbaHelpers/tree/master/GenerateVbaEnumHelpers/bin/Release/output)

这是它为每个枚举生成的代码示例：

```
Attribute VB_Name = "wMsoHyperlinkType"
Function MsoHyperlinkTypeFromString(value As String) As MsoHyperlinkType
    If IsNumeric(value) Then
        MsoHyperlinkTypeFromString = CInt(value)
        Exit Function
    End If

    Select Case value
        Case "msoHyperlinkRange": MsoHyperlinkTypeFromString = msoHyperlinkRange
        Case "msoHyperlinkShape": MsoHyperlinkTypeFromString = msoHyperlinkShape
        Case "msoHyperlinkInlineShape": MsoHyperlinkTypeFromString = msoHyperlinkInlineShape
    End Select
End Function

Function MsoHyperlinkTypeToString(value As MsoHyperlinkType) As String
    Select Case value
        Case msoHyperlinkRange: MsoHyperlinkTypeToString = "msoHyperlinkRange"
        Case msoHyperlinkShape: MsoHyperlinkTypeToString = "msoHyperlinkShape"
        Case msoHyperlinkInlineShape: MsoHyperlinkTypeToString = "msoHyperlinkInlineShape"
    End Select
End Function 
```

诚然，在你的项目中包含数千个模块是不切实际的，但是你真的需要这种功能是很罕见的，所以我只包括我在特定场合需要的东西。

# vb.net - vb.net + magento + quickbooks

> ID：10036715
> 
> 赞同：0
> 
> 时间：2012-04-05T22:09:28.833
> 
> 标签：vb.net, .net-3.5, quickbooks

我将使用 vb.net 3.5 在 Visual Studio 中开发一个 Windows 窗体应用程序。该应用程序将有一个非常大的后端数据库，需要许多表和超过 20k 条记录。该应用程序将安装在公司的局域网上，最多可供 6 人同时使用。

我不确定开发这个的最佳方法是什么，我有几个问题，如果有人能回答他们并指出正确的方向，我将不胜感激。

1.  最好使用的后端数据库是什么 - Sql 服务器或访问会好吗？
2.  vb.net 可以连接到 quickbooks 或 magento 数据库以更新记录、编辑它们或从应用程序交换信息。（我将构建一个 Windows 窗体应用程序）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:13:07.760

MS Access 可以处理您的数据需求。我们在具有非常大表的 Access 数据库上拥有多达 25 个用户。如果索引正确，性能还不错。但是，如果您负担得起，SQL Server 在性能、容量、备份、维护、监控和分析等方面都是更好的解决方案。

您需要让每个人都离开 Access 数据库以保护备份，这让我们感到沮丧。如果您在人们访问它时复制它，则该文件可能在内部不一致。

是的，Quickbooks 有一个 API，您可以通过 VB 访问它。我已经通过 VB.NET 使用 QB 完成了很多自定义应用程序开发。

Magento 的 API 理论上可以通过 VB.NET 访问，但是很多人很难使用它，而且他们周围的示例代码并不多。

# amazon-s3 - 如何使用 PHP 以特定顺序返回 Amazon S3 中的对象列表

> ID：10036716
> 
> 赞同：1
> 
> 时间：2012-04-05T22:09:40.187
> 
> 标签：amazon-s3

我正在使用适用于 PHP 的 Amazon S3 开发工具包。我想知道是否有一种方法可以按特定顺序检索对象，例如按文件名或按修改日期。目前它只是根据上传时间列出它们。我正在使用这种方法，但也许还有另一种更适合的方法。

```
$object_list_array = $s3->get_object_list(MYBUCKET, array(
  'prefix' => '/path/to/folder/with/files/'
)); 
```

表达我希望他们退回什么订单的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:05:39.920

不直接使用 SDK。但是，还有其他选择。例如，如果要将对象存储在数组中，则可以利用 PHP 的众多数组排序方法。

见这里： http: [//php.net/manual/en/array.sorting.php](http://php.net/manual/en/array.sorting.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:20:48.707

我不认为这是可能的。如果您检查 get_object_list 函数的定义

SDK/服务/s3.class.php

它列出了许多可以传递的选项，但是明显缺少定义结果顺序的选项：

*   分隔符
*   标记
*   最大键
*   聚合酶链反应
*   字首
*   卷发

在我有限的测试中，它似乎返回了按名称而不是创建日期排序的文件。

# ajax - SimpleModal Popup 用于不与 ajax 调用的帖子一起使用的帖子

> ID：10036721
> 
> 赞同：1
> 
> 时间：2012-04-05T22:10:27.023
> 
> 标签：ajax, simplemodal, infinite-scroll

我有一个帖子循环，我使用无限滚动来分页。我使用 SimpleModal 调用每个帖子的完整帖子弹出窗口，但它仅适用于最初加载的帖子。无限滚动调用的任何帖子只需单击即可进入实际的帖子页面。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:04:42.610

那是因为您的 SimpleModal 函数应用于加载文档时页面上存在的所有帖子。

加载文档后，无限滚动事物将触发 ajax 请求并在页面上添加新帖子（摘录）。

您需要做的是将 SimpleModal 函数附加到将来注册的点击事件上。所以如果你有类似的东西：

```
$('.post').click(function(){
  // show modal
}); 
```

将其更改为

```
$('.post').on('click', function(){
  // show modal      
}); 
```

我在这里假设这些脚本是 jQuery 插件。

看[`$.on()`](http://api.jquery.com/on/)

# c# - 打开文件对话框 - 设置 InitialDirectory 位置？

> ID：10036723
> 
> 赞同：1
> 
> 时间：2012-04-05T22:10:39.080
> 
> 标签：c#, dialog

如何设置打开文件对话框出现的初始目录？我想将其更改为位于我的 /bin/Debug 文件夹中的图像文件夹。我只是无法让它工作。

```
opdPicture.Title = "Choose a Picture";
opdPicture.InitialDirectory = ""; //Don't know what to set this to. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:17:13.790

[Application.StartupPath](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.application.startuppath?view=net-5.0)将为您提供 exe 所在的目录，所以我想您想使用[Path.Combine](https://social.msdn.microsoft.com/search/en-us?query=Path.Combine&x=0&y=0)来获取相对于启动路径的图像目录。

```
var imagePath = System.IO.Path.Combine( Application.StartupPath, "images" )

opdPicture.Title = "Choose a Picture";
opdPicture.InitialDirectory = imagePath ; 
```

# ruby-on-rails - 使用 Koala 发布到 Facebook 页面（不是用户页面）

> ID：10036728
> 
> 赞同：3
> 
> 时间：2012-04-05T22:11:17.127
> 
> 标签：ruby-on-rails, ruby, permissions, koala

如何使用考拉发布到用户页面？我不想发布到用户的墙上，而是发布到用户页面（用户可以管理许多页面）。

我现在的代码是这样的：

```
facebook_graph = Koala::Facebook::GraphAPI.new(self.token)
facebook_graph.put_wall_post(message) 
```

我知道你能做到

```
facebook_graph.put_wall_post(message, profile_id="page.id") 
```

self.token 已经在**manage_pages**的范围内，但我什至不认为这是必要的。那么，您将如何使用 Koala 发布到我拥有访问令牌的用户的特定页面？如何发现特定用户拥有的页面以及他们的通讯员 ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T22:56:21.990

Taken from the Koala README, this will post to a users wall:

```
@graph.put_object("me", "feed", :message => "I am writing on my wall!") 
```

So, the following will post to the Wall of a page (in your context):

```
graph = Koala::Facebook::GraphAPI.new(self.token)
graph.put_object(page.id, "feed", :message => "I am writing on a page wall!") 
```

Ensure, that the token you use is a user token (if you want to post as a user) or a page token if you want to post as the page itself.

More to read about Graph(Page): [http://developers.facebook.com/docs/reference/api/page/](http://developers.facebook.com/docs/reference/api/page/)

and Koala: [https://github.com/arsduo/koala](https://github.com/arsduo/koala)

EDIT: due to comment

To get Pages of a user

```
@graph.get_connections("me", "accounts") 
```

Documentation: [http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

# multithreading - 如何在 Perl 中记录 HTTP::Async 通信？

> ID：10036730
> 
> 赞同：0
> 
> 时间：2012-04-05T22:11:34.323
> 
> 标签：multithreading, perl, logging

`threads`我有一个使用`HTTP::Async`多个出站 IP 地址的 Perl 代码 >>

```
use threads ( 'yield',
              'exit' => 'threads_only',
              'stack_size' => 2*16384 );
use strict;
use warnings;
 no warnings 'threads';
use threads::shared;
use LWP::UserAgent;
use HTTP::Request;
use HTTP::Async;
...
my $async = HTTP::Async->new( ... );
...
foreach (@list) {
  $thread = threads->create( sub {
    local $SIG{KILL} = sub { threads->exit };
    ...
    $ua->local_address($ip);
    $request->url($url);
    $async->add($request);
    while ($response = $async->wait_for_next_response) {
      ...
    }
  }, $_);
}
... 
```

我需要生成一些包含**url**和**出站 IP**信息的基本应用程序**日志。**

 ****如何记录`HTTP::Async`通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:34:15.073

您实际上并没有在该代码中使用[LWP](http://search.cpan.org/dist/libwww-perl/lib/LWP/UserAgent.pm)，您只是在加载它。同样，从您的代码示例中也不清楚为什么要使用线程。HTTP::Async 负责“一次”执行多个 HTTP 请求。

它看起来不像[HTTP::Async](http://search.cpan.org/~evdb/HTTP-Async/lib/HTTP/Async.pm)有任何内置的调试机制，但是如果您需要帮助查看它是什么，在该模块中添加一个“调试”标志并在适当的位置添加一些警告语句会相对简单正在做。您还可以在自己的使用 HTTP::Async 的代码中添加调试代码。****

# python - 当值不唯一时，转置python字典中的值和键

> ID：10036731
> 
> 赞同：2
> 
> 时间：2012-04-05T22:11:53.233
> 
> 标签：python, dictionary

我想将键更改为 python 字典中的值，但原始字典中的值不是唯一的。

这是我所拥有的：

```
year_person = {2000: ‘Linda’, 2001: ‘Ron’, 2002: ‘Bruce’, 2003: ‘Linda’, 2004: ‘Bruce’, 2005 ‘Gary’, 2006: ‘Linda’} 
```

这就是我想将其更改为：

```
person_year = {‘Linda’: 2000, ‘Ron’: 2001, ‘Bruce’: 2002, ‘Linda’, 2003: ‘Bruce’, 2004 ‘Gary’, 2005: ‘Linda’: 2006} 
```

当我尝试使用 for 循环转换它时，每个人只有一对匹配。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T22:23:35.500

您也可以使用 defaultdict 执行此操作：

```
year_person = {2000: 'Linda', 2001: 'Ron', 2002: 'Bruce', 2003: 'Linda', 2004: 'Bruce', 2005: 'Gary', 2006: 'Linda'}

from collections import defaultdict
d = defaultdict(list)
for k, v in year_person.items():
    d[v].append(k)

print dict(d)
>>> {'Bruce': [2002, 2004], 'Linda': [2000, 2003, 2006], 'Ron': [2001], 'Gary': [2005]} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T22:38:00.550

只是为了提供当前答案中可能缺少的一些其他选项和信息：

如果您确定您的值是唯一的，因此可以成为键，最简单的方法是字典推导：

```
year_person = {2000: 'Linda', 2001: 'Ron', 2002: 'Bruce', 2003: 'Linda', 2004: 'Bruce', 2005: 'Gary', 2006: 'Linda'}
person_year = {key: value for (value, key) in year_person.items()} 
```

当然，在你的情况下，它们不是，所以这不起作用（因为它只给出找到的最后一个值）：

```
person_year = {'Bruce': 2004, 'Linda': 2006, 'Ron': 2001, 'Gary': 2005} 
```

相反，我们可以在 dict comp 中使用嵌套列表 comp：

```
{key: [value for value, check_key in year_person.items() if check_key==key] for key in year_person.values()} 
```

给我们：

```
{'Bruce': [2002, 2004], 'Linda': [2000, 2003, 2006], 'Ron': [2001], 'Gary': [2005]} 
```

这可行，但由于必须为每个条目循环遍历整个字典，因此效率不高。一个更好的解决方案是alan 给出[的`defaultdict`解决方案](https://stackoverflow.com/a/10036839/722121)，它只需要一个循环。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T22:18:10.153

你不想实现的东西在技术上是不可行的。字典的键不能重复，因为如果这样，您就不能使用键唯一地索引字典。

您可以做的是创建一个 (key,value) 对的字典，其中 value 是具有相同键的所有项目的列表。要实现它，您可以执行以下操作

```
>>> person_year={}
>>> [person_year.setdefault(v,[]).append(k) for (k,v) in year_person.iteritems()]
[None, None, None, None, None, None, None]
>>> person_year
{'Bruce': [2002, 2004], 'Linda': [2000, 2003, 2006], 'Ron': [2001], 'Gary': [2005]}
>>> 
```

请注意，如果您只对键值对而不是字典本身感兴趣，则可以将其存储为元组列表，如下所示

```
>>> [(v,k) for k,v in year_person.iteritems()]
[('Linda', 2000), ('Ron', 2001), ('Bruce', 2002), ('Linda', 2003), ('Bruce', 2004), ('Gary', 2005), ('Linda', 2006)]
>>> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T22:54:16.957

IMO，`defaultdict`在这里是不必要的，并且将其作为列表理解会牺牲可读性（尽管通常情况并非如此）。除非分析表明这确实是一个瓶颈，否则我会这样做：

```
def invert_to_lists(dct):
    inverted_dict = {}
    for key in dct:
        inverted_dict.setdefault(dct[key], []).append(key)
    return inverted_dict 
```

`defaultdict`是另一种复杂情况。在这种情况下使用`setdefault`很好，因为它只需要输入一次。在经历了导入和实例化 a 的复杂过程之后`defaultdict`，您将输入的内容不仅仅是调用`setdefault`.

# c++ - 修改已编译的静态库

> ID：10036733
> 
> 赞同：4
> 
> 时间：2012-04-05T22:12:22.280
> 
> 标签：c++, objective-c, c, ios, xcode

戴上你的 c++ 忍者巫毒手套。

我们购买了一个第三方库以在我们的 iOS 应用程序中使用。该库有 2 个版本，所以我们称它们`bull_frog_noises.a`为`toad_frog_noises.a`.

该公司从未想过有人会想在*一个应用程序中**同时*发出青蛙的声音，因此每个库都提供了*相同的方法名称*：

 **```
MAKE_FROG_NOISE(); 
```

**有没有办法重建或修改这些库，以便它们都可以在不相互冲突的情况下使用？** 这是理想状态：

```
MAKE_BULL_FROG_NOISE();
MAKE_TOAD_FROG_NOISE(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:26:41.613

您可以使用所需的方法名称构建另一个静态库作为这些库的包装器，然后将包装器库包含在项目中。

像这样：

1 - 创建一个名为 Bull_frog_noises_wrapper.a 的新静态库项目。

2 - 包括 Bull_frog_noises.a 作为这个新创建的库的依赖项。

3 - 创建这样的方法：

```
void MAKE_BULL_FROG_NOISE()
{
    MAKE_FROG_NOISE();
} 
```

4 - 对 toad_frog_noises.a 执行相同操作，创建如下方法：

```
void MAKE_TOAD_FROG_NOISE()
{
    MAKE_FROG_NOISE();
} 
```

5 - 在你的项目中添加这些包装器，你就完成了。

请注意您在主项目中使用的头文件，以免它们与内部库冲突。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T22:56:38.843

I would try using a hex editor to manually modify one of those libraries so that every instance of MAKE_FROG_NOISE was replaced with MAKE_TOAD_NOISE. You would have to be extremely careful to make only that one change. You can only replace bytes. Don't insert or delete anything. And don't change anything else in the file.**

# sql - SQL：如何从另一个表中删除符合条件的行

> ID：10036735
> 
> 赞同：2
> 
> 时间：2012-04-05T22:12:34.040
> 
> 标签：sql, sql-server

我可以使用 select 语句识别我想要的数据：

```
SELECT  InventoryUnitMeasure.ItemCode, 
        InventoryUnitMeasure.UPCCode,  
        InventoryItem.ItemName
FROM InventoryUnitMeasure 
   INNER JOIN InventoryItem 
         ON InventoryUnitMeasure.ItemCode = InventoryItem.ItemCode
where ItemName like 'SNT%' 
```

然后我尝试更改以像这样删除表 InventoryUnitMeasure 中的 UPCode 列，但出现错误：

```
DELETE upccode from
FROM dbo.InventoryUnitMeasure
  INNER JOIN  InventoryItem 
     ON InventoryUnitMeasure.ItemCode = InventoryItem.ItemCode
where ItemName like 'SNT%' 
```

我知道我犯了一个简单的错误，但我无法弄清楚，我尝试查看多个站点和多个搜索，但我只能看到在加入时如何删除整个表，而不仅仅是一列。

任何帮助将不胜感激。

我使用 SQL Server 作为 DBMS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:21:53.843

DELETE 语句不是用于删除整行吗？正如我理解你的问题，你可能应该使用 UPDATE 语句来代替..

```
UPDATE table dbo.InventoryUnitMeasure SET upcode = null ... 
```

一些关于语法的提示可以在[这里](http://geekswithblogs.net/faizanahmad/archive/2009/01/05/join-in-sql-update--statement.aspx)（快速谷歌搜索）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:19:48.387

```
DELETE InventoryUnitMeasure.upccode 
FROM dbo.InventoryUnitMeasure
    INNER JOIN  InventoryItem 
     ON InventoryUnitMeasure.ItemCode = InventoryItem.ItemCode
where ItemName like 'SNT%' 
```

这应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:22:43.750

你注意到有两个 FROM 语句一个接一个吗？只需将删除语句的开头更改为 DELETE FROM table_name ....

如果您希望更新某个列下的单元格的值，那么 Píďa 是正确的。如果您希望从表中删除整个列，则应使用 ALTER TABLE table_name

删除列 column_name

这意味着您正在更改该表的结构。

# mobile - 有没有办法在 couchdb 视图中发出附件数据

> ID：10036736
> 
> 赞同：13
> 
> 时间：2012-04-05T22:12:38.783
> 
> 标签：mobile, couchdb

我发现在网站上显示数据时使用 CouchDB 附件非常有用。但是，当我将数据库复制到移动环境时，运行视图然后必须循环浏览文档以访问其附件的效率非常低。在 iOS/Android 平台上，将数据存储为常规 BLOBS 并通过一个视图查询访问所有二进制数据似乎更有效，视图查询首先发出所有文档数据。有没有办法在我的地图函数中读取附件数据，并将其包含在发出语句中。我看到可以通过 _attachments 获得附件信息，但这并不能访问数据。

**更新** 在文档本身而不是附件中使用 BLOBS 的一个主要缺点（未在接受的答案中详述）是，当您更新文档时，您必须获取整个文档，然后将其发布回来。如果您不使用附件，则必须获取所有二进制数据，而附件则不需要。如果您要对文档执行更新，那么使用附件确实是设计二进制数据的唯一合理方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T00:08:13.917

你遇到了一个很好的问题！

什么是附件？

是二进制数据吗？好吧，您可以对数据进行 Base64 编码并将其直接存储在文档中（类似于[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)）。你当然可以有文本或应用程序/json 附件。所以不是这样。

是直接下载吗？并不真地。[显示和列表功能](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List)让您可以直接提供文档的任何部分（或基于文档数据构建新内容）。

那么什么*是*附件呢？对我来说，附件的工作定义是**在视图、显示和列表中无法访问的数据**。这是一种优化。您无法从服务器端 Javascript 访问它；但是您获得了速度，因为 CouchDB 不必对大量数据进行编码和解码。

有时我也将其视为 C 指针。使用指针非常快。它们是一种小型、简单的数据类型。然而，代价是额外的编程工作，因为它们必须被取消引用才能获取数据。你总是有一个额外的步骤。这就是速度的代价。CouchDB 附件是类似的。

如果您的数据很小（可能是网站图标、电子名片、文本）并且适合整个文档，那就去做吧！不要附加它们。但是，对于大多数图像和其他文件等较大的数据，附件就变得必要了。

## 多次提取

假设您查询一个视图并在屏幕上显示 20 行。现在您必须获取 20 个图像附件。

程序员本能地认为这是不可取的。而且，是的，这可能会破坏交易。然而，在许多情况下，这是一个很好的权衡。Donald Knuth 说：“过早的优化是万恶之源。” 从由 SSD 支持的本地服务器进行 21 次总提取会杀死我们吗？

在许多情况下，进行 20 次查询就可以了。关键是同时制作它们。CouchDB（和移动沙发库）针对并发请求进行了优化。你会发现获取 20 张图片与获取一张图片所花费的时间基本相同。

在每种语言中，同时获取 HTTP 资源的工作方式不同。在 Javascript 中，这*非常*简单，只需要几行带有[async.js](https://github.com/caolan/async)的代码。

```
// Assuming fetch_image(), and images = ['alice.png', 'bob.png',  etc.]
async.forEach(images, fetch_image, function(er) {
  if(er) throw er
  console.log('Fetched 20 images!')
}) 
```

# events - Dojo 事件教程

> ID：10036737
> 
> 赞同：1
> 
> 时间：2012-04-05T22:12:54.650
> 
> 标签：events, dojo, onmouseover

我是 Dojo 的新手，并试图了解如何处理事件。似乎至少有 3 或 4 种不同的方式将事件绑定到元素。更令人困惑的是，新的 v1.7 似乎已弃用某些方法，因此即使将我的 Web 搜索限制在最近几个月也无济于事。

让这个示例工作将是一个好的开始（我还没有弄清楚的一件事是应该加载哪些模块）：

[http://jsfiddle.net/sVJWY/](http://jsfiddle.net/sVJWY/)

但除此之外，我希望能找到一个很好的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:55:02.473

这是一个简化的工作示例。

```
// alert url when hover over link
require(["dojo/query", "dojo/on",  "dojo/domReady!"], function(query, on) {
    query("a").on("mouseover", function(evt) {
        alert(evt.target.href);
    });
}); 
```

[http://jsfiddle.net/RichAyotte/sVJWY/6/](http://jsfiddle.net/RichAyotte/sVJWY/6/)

这是一个带有 forEach 的示例。

```
require([
    "dojo/query"
    , "dojo/on"
    , "dojo/domReady!"], function(query, on) {
    query("a").forEach(function(node) {
        on(node, "mouseover", function(event) {
            alert(node.href);
        });
    });
}); 
```

[http://jsfiddle.net/RichAyotte/sVJWY/7/](http://jsfiddle.net/RichAyotte/sVJWY/7/)

请注意代码中的 onmouseover -> mouseover 或者您可以使用鼠标扩展。

```
require(["dojo/on", "dojo/mouse"], function(on, mouse){
  on(node, mouse.enter, hoverHandler);
}); 
```

[http://livedocs.dojotoolkit.org/dojo/on](http://livedocs.dojotoolkit.org/dojo/on)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T01:52:22.357

对于您的示例，这是 dojo 样式的正确 javascript

```
require(["dojo/dom", "dojo/parser", "dojo/domReady!","dojo/on","dojo/query"],
    function(dom,parser,domReady,on,query){
        dojo.ready(function(){
            query("a").forEach(function(node){
                on(node,"mouseover", function(event){alert(node.href);});
            });
        });            
    });​ 
```

您缺少 dojo 查询模块和新 AMD 系统的 dojo 样式

# c - C 代码行导致完全不相关的代码行出现分段错误

> ID：10036739
> 
> 赞同：2
> 
> 时间：2012-04-05T22:13:07.780
> 
> 标签：c, segmentation-fault, llvm, exc-bad-access, opencl

根据 Xcode 中的堆栈跟踪，我的程序在此处中断并给出 EXC_BAD_ACCESS：

```
int main (int argc, const char * argv[]) {
    float usd,btc,bid,ask,order_price,possible_price;
    DateData * prices = load_prices(); <---

DateData * load_prices(){
    FILE * file = fopen("price.dat", "rb"); <--- 
```

我确定这与那行代码无关，而是与后面的代码有关。在一个直到稍后才被调用的函数中，有一行代码似乎破坏了程序。当它在执行该行之前从函数返回时，程序没有这个问题，但是如果它应该从该行之后的函数返回，就会出现这个问题。

这行代码是对 OpenCL 的调用。它是否以某种方式破坏了程序？

```
err = clEnqueueReadBuffer(ocl_data->commands, ocl_data->output, CL_TRUE, 0, sizeof(CombinationResult) * PPO_COMBINATIONS, (*PPO_results)[x] + PPO_COMBINATIONS*(p + 5), 0, NULL, NULL); 
```

PPO_COMBINATIONS 定义为整数宏，PPO_results 的类型为 CombinationResult (*)[3][PPO_COMBINATIONS * 11]。ocl_data->commands 的类型为 cl_command_queue，ocl_data->output 的类型为 cl_mem。err、p 和 x 的类型为 int。

我将 Xcode 与“Apple LLVM Compiler 3.0”一起使用。出于某种原因，“LLVM GCC 4.2”编译器给出了“架构 i386 的格式错误的元数据记录”。

这是使用命令行使用gdb编译运行时的结果：

```
Matthew-Mitchell:Parrallel BitCoin Trading Algorithm matt$ gcc -g cmain.c -o test -lcurl -framework OpenCL -std=c99 -arch i386
Matthew-Mitchell:Parrallel BitCoin Trading Algorithm matt$ gdb testGNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Aug 15 16:03:10 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .... done

(gdb) run
Starting program: /Users/matt/Programming/Bit Coin algorithm/Parrallel BitCoin Trading Algorithm/test 
Reading symbols for shared libraries .+++.................................................................. done

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0xbea7d7cc
0x00003e9a in main (argc=0, argv=0x1000) at cmain.c:572
572 int main (int argc, const char * argv[]) { 
```

直接在命令行中运行时，程序会立即退出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T16:39:46.407

感谢戈麦斯先生的猜测，但实际答案一直盯着我看。答案是这个网站的名称。问题是主函数中的自动变量太大而导致堆栈溢出。解决方案是使用 malloc 分配数据。

对于从谷歌看到这个的人来说，检查你声明的变量有多大是个好主意。您可能希望在运行时分配内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T20:30:44.140

我要大胆猜测一下，当您尝试`(*PPO_results)[x] + PPO_COMBINATIONS*(p + 5)`通过. 我很容易相信您的整数宏 ,和您对 combine 的指针操作的组合指向堆栈，导致您意外写入应用程序的可执行区域。`void*`[`clEnqueueReadBuffer`](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clEnqueueReadBuffer.html)`PPO_COMBINATIONS``PPO_results`

如果它破坏了您调用 into 区域周围的堆栈`FILE * file = fopen("price.dat", "rb");`，这将重现您所看到的问题。作为奖励，这将阻止某些工具，例如`gdb`正确展开堆栈帧（从而抑制完整的堆栈跟踪），因为此时堆栈处于损坏且完全不可恢复的状态。

最简单的检查是通过在调试器中*逐步执行写入操作*或在应用程序上运行[边界检查器](http://en.wikipedia.org/wiki/Bounds_checking)来验证您的写入。Valgrind[有一个包含这个功能的补丁](http://valgrind.org/downloads/variants.html?njn)，并且这个空间中还有一些[其他的工具](http://software.intel.com/sites/products/documentation/hpc/compilerpro/en-us/fortran/lin/compiler_f/copts/fortran_options/option_check.htm)存在于 OSX 中。

祝你的申请好运。安全地使用您的缓冲区，您的程序将继续快乐。:)

**编辑：**关闭，但是，[不](https://stackoverflow.com/a/10076480/517815)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:41:04.117

将这行代码分成单独的行并分配给变量：

```
err = clEnqueueReadBuffer(ocl_data->commands, ocl_data->output, CL_TRUE, 0, sizeof(CombinationResult) * PPO_COMBINATIONS, (*PPO_results)[x] + PPO_COMBINATIONS*(p + 5), 0, NULL, NULL); 
```

这里有太多事情要安全地保存为一行代码。您还需要更多的错误检查：

```
if (ocl_data!=null) {
  //Making Assumtions here, don't expect to compile
  int crCalc=sizeof(CombinationResult)*PPO_COMBINATIONS;
  int ppoResult=0; 
  int ppoCFive=PPO_COMBINATIONS*(p + 5);

  //Check size of PPO_results before assigning
  if (x<sizeof((*PPO_results))
    ppoResult=(*PPO_results)[x];

  err = clEnqueueReadBuffer(ocl_data->commands, ocl_data->output, CL_TRUE, 0, crCalc, ppoResult + ppoCFive, 0, NULL, NULL);
} else (
  //Error message
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T04:47:39.243

当代码中某个奇怪的地方发生错误时，比如一个甚至没有被调用的函数，这可能是由于间接跳转到了损坏的代码指针。这不必是在程序中作为值可见的函数指针。它可能是堆栈上的损坏返回地址。

机器可能会欺骗自己使用之前在之前的函数调用链中使用的返回地址（其中堆栈上仍然有一些零碎）。

例子。您`load_prices`调用`fopen`了 ，因此它将返回地址放入堆栈。然后整个业务返回并且程序正在调用一些其他激活函数链，这样返回地址就不会被覆盖。（有时函数分配局部变量但不完全初始化它们。或者编译器安排临时区域，例如寄存器保存区域，但并不总是使用它们。）

无论如何，堆栈出了问题，然后执行了不正确的函数返回，从而`fopen`重新使用了给定的旧返回地址。Blam，你又回到了里面`load_prices`，好像`fopen`第二次回来了（类似于 setjmp/longjmp）。

# asp.net - 捕获异常时的用户体验

> ID：10036740
> 
> 赞同：1
> 
> 时间：2012-04-05T22:13:07.813
> 
> 标签：asp.net, user-interface, log4net

当用户在我的网站上输入信息并遇到异常时，捕获该异常的最佳方法是什么。我想知道发生异常时他们在表格上填写了什么。你是怎么处理的？你用过什么工具？我研究了 ELMAH 和 log4net，目前正在尝试使用 log4net 来捕获这些信息。关于捕获表单字段的最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:10:29.443

在一些项目中，我们一直在使用 ELMAH，但不知何故我不喜欢它。（虽然是我的个人经验）在 ELMAH 中读取过滤错误日志的能力很酷，但仅此而已。

我有编写自己的错误处理程序的最佳经验。一种方法是订阅该`Application_Error`事件。
另一种方法是编写一个自定义的 HealthMonitoring 提供程序。我在这里写过这个主题：[http ://www.tomot.de/en-us/article/6/asp.net/how-to-create-a-custom-healthmonitoring-provider-that-sends-e -mails](http://www.tomot.de/en-us/article/6/asp.net/how-to-create-a-custom-healthmonitoring-provider-that-sends-e-mails)
也许可以获得对引发异常的表单的引用并遍历每个控件/文本框并获取它们的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:23:27.573

您可以在 中注册应用程序错误处理程序`Global.Asax`，然后访问`HttpContext.Current`以检索请求和表单值。

```
protected void Application_Error(Object sender, EventArgs e)
{
    HttpContext currentContext= HttpContext.Current;

    // set the exception to the Context 
    Exception exception = currentContext.Server.GetLastError(); 
```

...

然后，您可以根据需要记录/保存此信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:45:58.537

在您`Application_Error`的 Global.asax.cs 中，您可以访问以下内容并记录它们。这就是我们所做的（删除了我们的细节）。

显然，在每个地方`var whatever = ...`，你都会这样做`LogInSomeWay(whatever)`。这段代码只是演示了将当前体验的每个重要部分分配给一个变量。

希望这可以帮助。

**代码**

```
void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError();
    HttpContext context = HttpContext.Current;

    bool requestAvailable = false;
    try
    {
        if (context.Request != null)
        {
            requestAvailable = true;
        }
    }
    catch{}

    if (context != null) var serverName = context.Server.MachineName;

    if (context != null && requestAvailable)
    {
        var referrer = context.Request.UrlReferrer != null ? context.Request.UrlReferrer.ToString() : "";

        // If you use forms authentication and define your own principal, do some logging with it here
        OurPrincipal user = OurContext.Current.LoggedOnPrincipal;
        if (user != null && user.Identity != null && user.Identity.IsAuthenticated && user.Person != null)
        {
            var logonName = user.Person.LogonName;
            var loginPersonName = user.Person.FirstName + " " + user.Person.LastName;
        }

        var userIP = context.Request.UserHostAddress;
        var userDns = context.Request.UserHostName;
        var userAgent = context.Request.UserAgent;
        var exceptionText = ex.ToString();

        foreach (string key in context.Request.ServerVariables.AllKeys)
        {
            var currentServerVarKey = key;
            var currentServerVarValue = context.Request.ServerVariables[key];
        }

        if (context.Request.ServerVariables["REQUEST_METHOD"] == "POST"
            && context.Request.Form != null && context.Request.Form.AllKeys != null)
        {
            foreach (string key in context.Request.Form.AllKeys)
            {
                var currentFormKey = key;
                var currentFormValue = context.Request.Form[key];
            }
        }
    }
} 
```

# sql - 如何在 sql 2008 中创建到 .dbf 的链接服务器？

> ID：10036745
> 
> 赞同：2
> 
> 时间：2012-04-05T22:13:48.187
> 
> 标签：sql, sql-server

我们有一个 sql 2008 并且想创建一个链接服务器到一个 dbf 文件。我应该选择哪个提供者，我拥有的提供者（ADsDSOObject、MSDAOSP、MSDASQL、MSIDXS、MSOLAP、SQLNCLI10、SQLOLEDB）

如果这些都不行，还有其他供应商吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-28T20:33:25.040

我的一步一步是：

*   安装驱动程序 Microsoft Access Database Engine 2010 Redistributable [AccessDatabaseEngine.exe 32Bit](http://www.microsoft.com/en-us/download/confirmation.aspx?id=13255) [AccessDatabaseEngine_x64.exe 64Bit](http://www.microsoft.com/en-us/download/confirmation.aspx?id=13255)

*   创建 Sql 2012 LinkedServer

    EXEC master.dbo.sp_addlinkedserver
    @server = 'LinkedServerName',
    @srvproduct = 'Microsoft ACE OLEDB 12',
    @provider = 'Microsoft.ACE.OLEDB.12.0',
    @datasrc = 'C:\DBF_Directory',
    @provstr = ' dBASE 5.0'

    EXEC master.dbo.sp_addlinkedsrvlogin
    @rmtsrvname = 'LinkedServerName'，
    @useself = 'False'， @locallogin
    = NULL，
    @rmtuser = 'Admin'，
    @rmtpassword = ''

    EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1
    EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters', 1

    从 LinkedServerName...TableName 中选择 *

*   如果您收到此错误：

    *   链接服务器“LinkedServerName”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”返回消息“未指定错误”。
    *   消息 7303，级别 16，状态 1，第 1 行无法为链接服务器“LinkedServerName”初始化 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”的数据源对象

    **我发现的问题是运行qry的用户在sqlserver临时目录上没有permission**

*   在这种情况下，您使用 SysinternalsSuite ProcessMon.exe 从 [https://technet.microsoft.com/en-us/sysinternals/bb842062.aspx下载](https://technet.microsoft.com/en-us/sysinternals/bb842062.aspx)

    *   应用过滤器 Ctr+L 和
    *   filter Result = 'ACCESS DENIED' 点击添加
    *   选择 Show Only File System Activity
        ，当 sql 查询运行时，您将看到如下内容：

    **sqlservr.exe:000 查询信息
    C:\Users\MSSQLSERVER\AppData\Local\Temp ACCESS DENIED**
    授予对 C:\Users\MSSQLSERVER\ 目录
    或
    **C:\Windows\ServiceProfiles\NetworkService\AppData\Local\Temp 访问被拒绝**
    的权限 授予 C:\Windows\ServiceProfiles\NetworkService\ 目录的权限

    所以我授予**用户**读/写权限，它正在运行 que sql qry 并且一切运行正常。

    **注意：**授予 MSSQLSERVER 对象的权限有点棘手。

    1.  我已经做好了：
        *   文件夹中的属性
        *   选择安全选项卡
        *   单击编辑按钮单击
        *   添加按钮
        *   输入对象名称：**NT Service\MsSqlServer**点击检查名称
        *   选择**MSSQLSERVER**对象 单击确定
        *   选择允许完全控制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:54:08.550

我已经看到了一些链接到 dbf 的方法。我认为我最喜欢的一个是使用可以[从 Microsoft 下载](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=14839)的 Visual FoxPro 提供程序。

安装后，我见过的最常见方法是使用以下设置：

从 EM Linked Server Properties 中选择“OLE DB Provider for Visual FoxPro”作为提供程序名称

产品名称：留空

数据源：包含 dbf 文件的文件夹的位置

提供者字符串：VFPOLEDB

* * *

其他用于链接 dbf 文件的选项包括 MDAC、ODBC 等，但是您可以通过这些选项通过链接执行的操作充其量是有限的，在最坏的情况下会出现错误和不可预测，具体取决于确切的版本。视觉 foxpro 提供商似乎做得最好。

* * *

这个[相关的 SO 链接](https://stackoverflow.com/questions/52822/how-to-import-a-dbf-file-in-sql-server)也有一些关于链接到 DBF 的附加信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:38:43.473

You cannot create a linked server with 64-bit SQL Server and 32-bit DBF drivers.

However, you can open a new SqlDataSource in Visual Studio using the .NET Framework Provider for OLE DB then MS OLE DB Provider for VFP. The connection string should look like this (or with UNC)

```
Provider=VFPOLEDB.1;Data Source=h:\Programs\Data;Persist Security Info=True;User    ID=Your_user;Password=your_password 
```

The config wizard includes a part to test your SQL. You can use this run ad hoc SQL.

# python - 全局变量不能在 Python 中赋值

> ID：10036747
> 
> 赞同：0
> 
> 时间：2012-04-05T22:14:03.967
> 
> 标签：python, global-variables

我无法将变量从一个定义的函数传递到另一个。例如，我希望用户从菜单中选择一个国家，然后将该国家保存在第一个函数的变量中。之后，用户必须从第二个菜单中选择他们想要的套餐，然后告诉程序有多少 12+、2+ 和 2- 岁的人要去。

完成后，我希望将所有保存的信息放到一张桌子上，例如，如果用户选择了西班牙和全膳套餐，并且有 2 人 12 岁以上和 1 人 2 岁以上，我希望程序转到西班牙表并添加价格。各个年龄段的价格都不同。

下面是我到目前为止得到的代码，我想知道是否有人可以帮忙。

```
def result():
    global spian
    global spianf
    total=spian*n+spianf
    print total

def total():
    global n
    global i
    result()

def age ():
    n=input("please select number of people age 12+")
    m=input("please select number of people age 2+ ")
    b=input("please select number of people age 2-")
    total()
    result()

def pack():
   print "1.Full Boaard"
   print "2.Half board"
   print "3.Beds only"
   print "4.Main menu"
   n=raw_input("please select you package ")
   if n=="1":
     age()
     return n;
   if n=="2":
    age()
   if n=="3":
    age()
   if n=="4":
    country()

def country ():
   print "1.Spain"
   print "2.Portugal"
   print "3.Italy"
   print "4.Turkey"
   print "5.Exit"
   i=raw_input("Please enter your choice of country ")
   if i=="1":
       pack()
       spain=1
   if i=="2":
      pack()
   if i=="3":
       pack()
   if i=="4":
       pack()
   if i=="5":
       exit

 country()
 spian=150
 spianf=50 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:46:24.417

如果你刚开始学习 python，我强烈建议不要养成这样的习惯，即在所有函数中对变量使用全局变量。

花点时间从 python 文档中查看此页面：http: [//docs.python.org/tutorial/controlflow.html#defining-functions](http://docs.python.org/tutorial/controlflow.html#defining-functions)

例如，虽然您可以在技术上解决此函数中的问题：

```
def age ():
    global n,m,b
    n=input("please select number of people age 12+")
    m=input("please select number of people age 2+ ")
    b=input("please select number of people age 2-") 
```

...你的函数返回一些东西会更有用

```
def age ():
    n=input("please select number of people age 12+")
    m=input("please select number of people age 2+ ")
    b=input("please select number of people age 2-")
    return n, m, b

# and call it like
n, m, b = age() 
```

如果你有一个想要修改你的函数`spian`，你可以这样做：

```
def newSpian(spianVal):
    return spianVal * 100

# and call it like
newSpianValue = newSpian(spian)
# or overwrite the old one
spian = newSpian(spian) 
```

这将使您的函数更加可重用，也更容易理解。当您对这样的所有事情使用全局变量时，甚至很难知道变量在逻辑中来自何处。您必须查看所有其他功能，以找出可能在此过程中改变了它，甚至创造了它的当前价值。

我还建议您使用比`a,b,c,d`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:30:08.477

您使用的 global 关键字错误。

您应该在要全局查看的函数中使用*它*。例如：

```
i = 5
def f(x):
    global i = x+1
f(2)
print i 
```

将打印 3

相比之下，你正在做的更像

```
global i = 5
def f(x):
    i = x+1
f(2)
print i 
```

打印 5

此外，您发布时的格式有点混乱，因此它使代码难以阅读。但我认为这是你的问题。

# objective-c - 无法检测负载方向 - iPad

> ID：10036748
> 
> 赞同：3
> 
> 时间：2012-04-05T22:14:09.660
> 
> 标签：objective-c, ipad, uiinterfaceorientation

我经历了许多不同的问题，出于某种原因，我仍然无法让我的 iPad 检测加载方向。

似乎最好的方法是检测 statusBarOrientation：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"View Loads");

    if ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeLeft
        || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeRight) {
        NSLog(@"This is Landscape"); 
    } else {
        NSLog(@"This is Portrait"); 
    }
} 
```

但它总是返回“肖像”。我的 .plist 和 shouldAutorotateToInterfaceOrientation 设置中有所有 4 个方向可用：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
                interfaceOrientation == UIInterfaceOrientationLandscapeRight || 
                interfaceOrientation == UIInterfaceOrientationPortrait);        
        } else {
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }
} 
```

有人有其他建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:52:36.563

iPad 应用程序始终以纵向模式启动，无论设备的实际方向如何（如果设备是这样，它们会立即旋转到横向）。如果您稍后在程序生命周期中使用相同的代码检查状态栏方向，您将看到它返回实际方向。

# axapta - 批处理参数

> ID：10036749
> 
> 赞同：2
> 
> 时间：2012-04-05T22:14:16.117
> 
> 标签：axapta, dynamics-ax-2009, x++

我创建了一个从实现 runbase 批处理的类调用的表单，因此我在表单上有一个批处理选项卡。

当我包含批处理作业时，它不使用当前的批处理参数，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:51:15.727

您错过了`super()`, 或 方法中`getFromDialog`的`pack`调用`unpack`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-26T07:28:18.993

在 main 方法中写一行，如下所述

```
If(batchjobClassName.prompt())
{
    call your run method here
} 
```

希望能帮助到你。

# python - 在 Python 中存储超过 9,000 位的大数字

> ID：10036751
> 
> 赞同：2
> 
> 时间：2012-04-05T22:14:54.193
> 
> 标签：python, file, integer, long-integer

我打算在 Python 中使用非常大的数字，但想知道 Python 是否可以处理非常大的数字。这些数字将有多达 3,000 个零。

而且，带有 3,000 个零的 1 使用多少字节？

第三个问题，如何将数字作为整数保存到 Python 文件中，而无需 str() 它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T22:22:38.803

Python 可以使用该类型存储任意长的整数`long`，甚至可以让您`long`通过附加 an`L`来指定文字（例如，`0L`是一个`long`零，而不是只是`0`一个`int`）。更好的是，当计算结果太大而无法用 表示时，它会自动将数字从`int`s 提升到s 。是一种成熟的数值类型，兼容所有 Python 数值运算。`long``int``long`

如果您需要的不仅仅是整数，那么您需要该`decimal`模块，它具有一种`Decimal`类型，可提供任意大小和精度的实数，而没有二进制浮点表示所固有的问题。

`long`和的缺点`Decimal`是它们分别比`int`和慢`float`，因为后者具有本机硬件支持。但是，对大数进行数学运算要比根本无法使用这些数字要慢一些。

至于大小，`int`对象在 32 位 Python 中为 12 个字节。对于内部 32 位数量而言，这种看似大的大小是由于 Python 的“一切都是对象”方法。（我相信，但不要引用我的话，值有 4 个字节，从实例到类型的指针有 4 个字节，引用计数器有 4 个字节，用于确定对象何时可以是垃圾-collected。这些字段在 64 位版本的 Python 上可能更大。）

a 的大小会`long`有所不同，因为它们会根据数量（加上对象开销）而有所不同，但任何`long`值的大小都可以使用来确定`sys.getsizeof()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T22:22:21.977

做一个大数字：

```
x = 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

看看它有多少字节：

```
print sys.getsizeof(x) 
```

将其写入没有 str() 的文件：

```
fd = open("file.txt", "wb")
fd.write("%u" %x)
fd.close() 
```

# java - 如何在不更改算法代码的情况下可视化算法？

> ID：10036753
> 
> 赞同：6
> 
> 时间：2012-04-05T22:15:11.867
> 
> 标签：java, visualization

我想可视化两种不同的算法，它们决定Java平面中的圆圈集合是否重叠：

*   一个 O(n²) 算法，检查每个圆的组合
*   使用扫描线的 O(nlogn) 算法

有没有办法让可视化类的对象“监听”算法类的对象，例如它可以看到算法何时在一对圆之间执行重叠检查并知道何时更新可视化？

其他示例：我可以将活动圆列表（与扫描线相交的圆）保留为扫描线算法的变量，并让另一个类（可视化类）获取该变量。但是该类如何知道列表何时更新并且必须更新可视化？

这正是我想到的策略。也许有更好的方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:04:30.080

也许阅读观察者模式可以帮助你：[https ://en.wikipedia.org/wiki/Observer_pattern](https://en.wikipedia.org/wiki/Observer_pattern)

您可以实现[java.util.Observer](http://docs.oracle.com/javase/6/docs/api/java/util/Observer.html)或给算法一个回调函数/对象。

您可以将任意数据交给观察者，足以让它决定算法何时执行重叠检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T23:15:03.703

我不确定这是否会对您有所帮助，但如果您无法更改算法的代码以支持观察者，那么一个（有趣的）选择是研究面向方面的编程。

例如，在 AspectJ（例如参见[http://en.wikipedia.org/wiki/AspectJ](http://en.wikipedia.org/wiki/AspectJ)）中，您可以指定（使用称为“切入点”的东西）位置（称为“连接点”），其中一些额外的代码（称为“建议”） ') 应该运行。您可以使用它来检测算法正在执行的重叠检查，并在您认为合适的情况下对其进行响应。

当然，以这种方式做事将涉及使用 AspectJ，因此仅使用普通 Java 是不可能的 - 但这是您可能想要研究的有趣的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:40:30.843

1.  具有代表圆（以及此问题/算法中存在的任何其他对象）的类并包含每个操作的方法。
2.  将算法实现为对 (1) 中的对象的操作 - 作为对方法的调用。
3.  创建一个可视化类，它检查 1 中的对象并在每个`Update()`方法上可视化它们的状态。
4.  创建 (1) 中所有类的子类，除了它们的原始行为外，它们还调用`Visualization.Update()`每个操作。

用 (4) 个类而不是 (1) 个类构建“你的世界”以进行可视化。

# ms-access - MS-Access 2003：如何组合依赖于不同表的查询条件

> ID：10036758
> 
> 赞同：0
> 
> 时间：2012-04-05T22:15:56.577
> 
> 标签：ms-access

我希望主题行不会太令人困惑。

所以我有一个查询，它根据设计师的经理从表（设计时间）中选择数据。经理编号由表格收集。我正在使用查询设计器，此列有：

```
Field: Managers_ID: ID, 
Table: Managers
Criteria: [Forms]![SelectManagerAndDateRange]![ManagerNumber] 
```

Managers 表具有“ID”作为其唯一标识符。

此查询的唯一缺陷是它不包括经理他/她自己工作过的任何设计时间。*在查询设计视图中，我可以为要添加的其他*记录添加第二个条件吗？我知道如何进一步过滤结果，但在这种情况下，我想添加更多。我可以在 Managers 表中查找有问题的经理的 PersonID，但随后我在 Design Hours 表中查找了 Person = that personID 的所有记录。

我正在使用 Access 2003。是的，我知道。我们计划在今年晚些时候升级到 2010。数据保存为 MDB。

任何帮助将不胜感激。

编辑：按要求截屏 ![问题中提到的关系和标准。 带圆圈的标准没有按预期工作。](../Images/ae6ee3b44e43dfa68bd8bd24ab41f1cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:30:05.413

一个可能对您有所帮助的一般答案：如果两个查询的返回具有相同数量的字段，最简单的方法是使用联合语句。

【SQL查询1】

联盟

【SQL查询2】

[按语句排序]

请注意，使用 Union 时，第二个查询中的字段名称并不重要，只要您与第一个查询具有相同的数量并且它们是相同的类型。订购时，请使用第一个查询中的字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T09:28:55.103

当您想要从不同的表中检索具有相同结构的数据时，可以使用**UNION查询。**

在您的情况下，我认为最好的解决方案是**JOIN**查询，例如

```
SELECT M.field1, M.field2, M.field3, H.field1, H.field2 ...whatever fields you need
FROM Managers as M
LEFT OUTER JOIN [Design Hours Table] as H
  ON H.Person = M.PersonID
ORDER BY ... whatever order you want 
```

您可以将此查询用作报表的*RowSource*，告诉 Access 按 Managers 表中的所有字段对结果进行分组。

但是，如果您将其用于表单，则可以使用**表单/子表单**组合。

您将原始查询设置为表单的*RowSource*，并使用所有所需的字段和标签对其进行设计。然后你插入一个*SubForm*，

![添加子表单](../Images/5c92e43916f13a6391330a0e98e96244.png)

并告诉 Access 使用现有表或查询子表单数据，然后为此选择*Design Hours*表，并选择使用字段*PersonID为**Managers*中的每条记录显示 Design Hours 中的记录。

 *现在，我想评论另一个问题：您在*Managers表中有一个**PersonID*字段，这是正确的，因为经理**是一个**人。您的设计中不正确的是 Managers 表中存在*FirstName*和*LastName*列（除非它不是真正的表，而是查询）。原因是*PersonID*定义了一组属性，*FirstName*和*LastName*就在其中。因此，根据您的设计，您最终可能会得到一个*PersonID* = 2013, *FirstName* = John, *LastName的经理************= O'Connor 和 People 表中的 ID 2013 指的是*FirstName* = Peter，*LastName* = Sellers，这将是不一致的。***********

 ****此外，您不需要此表中的 ID，因为字段 PersonID 最适合用作此表的 PK。

您从 People 表中检索 Name 和 SurName，因此连接类似于

```
SELECT M.field1, M.field2, M.field3, P.FirstName, P.LastName, H.field1, H.field2 ...whatever fields you need
FROM (Managers as M
INNER JOIN People as P ON P.ID = M.PersonID)
LEFT OUTER JOIN [Design Hours Table] as H
  ON H.Person = M.PersonID
ORDER BY ... whatever order you want 
```

问候，*****

# functional-programming - 方案快速排序 - 例外：尝试应用非程序（1 2 3 4 5 7 ...）

> ID：10036760
> 
> 赞同：1
> 
> 时间：2012-04-05T22:16:02.700
> 
> 标签：functional-programming, scheme, quicksort

我刚开始学习 Scheme（Petite Chez Scheme），作为对自己的挑战，我正在尝试实施快速排序。但是，当我运行它时出现以下异常：

```
Exception: attempt to apply non-procedure (1 2 3 4 5 7 ...) 
```

这是我在 Emacs 中的 Scheme 会话：

```
Petite Chez Scheme Version 8.4
Copyright (c) 1985-2011 Cadence Research Systems

> (define (set a i k)
    (define (reduce-list a i n)
      (if(= i n)
     a
     (reduce-list (cdr a) (+ i 1) n)))
    (if(= i 0)
       (cons k (cdr a))
       (let ((b (cons k (reduce-list a 0 (+ i 1)))))
     (let push-front ((lst b) (original-list a) (n (- i 1)))
       (if(<= n 0)
          (cons (list-ref original-list 0) lst)
          (push-front (cons (list-ref original-list n) lst) original-list (- n 1)))))))

(define (swap lst i j)
    (let ((a (list-ref lst i))
      (b (list-ref lst j)))
      (set (set lst i b) j a)))

(define (partition a i j r)
    (cond [(= j r) (cons (+ i 1) (swap a (+ i 1) j))]
      [(<= (list-ref a j) (list-ref a r)) (partition (swap a j (+ i 1)) (+ i 1) (+ j 1) r)]
      [else (partition a i (+ j 1) r)]))

(define (quicksort a p r)
    (if(< p r)
       (begin(
          (let* ((c (partition a (- p 1) p r))
            (q (car c))
            (b (quicksort (cdr c) p (- q 1))))
        (quicksort b (+ q 1) r))))
       a))

> (define lst (list 1 9 2 8 3 7 4 6 5))
> (define n (length lst))
> (trace quicksort)
(quicksort)
> (quicksort lst 0 (- n 1))
|(quicksort (1 9 2 8 3 7 4 6 5) 0 8)
| (quicksort (1 2 3 4 5 7 8 6 9) 0 3)
| |(quicksort (1 2 3 4 5 7 8 6 9) 0 2)
| | (quicksort (1 2 3 4 5 7 8 6 9) 0 1)
| | |(quicksort (1 2 3 4 5 7 8 6 9) 0 0)
| | |(1 2 3 4 5 7 8 6 9)
| | |(quicksort (1 2 3 4 5 7 8 6 9) 2 1)
| | |(1 2 3 4 5 7 8 6 9)
Exception: attempt to apply non-procedure (1 2 3 4 5 7 ...)
> 
```

谁能告诉我出了什么问题？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:38:10.253

问题在于

```
begin 
```

在快速排序中。什么时候

```
(quicksort b (+ q 1) r) 
```

最终返回 a （实际上是父快速排序中的 b ），然后 let* 块从

```
(define (quicksort a p r)
  (if(< p r)
     (begin(
            (let* ((c (partition a (- p 1) p r))
                   (q (car c))
                   (b (quicksort (cdr c) p (- q 1))))
              (quicksort b (+ q 1) r)))) 
     a)) 
```

至

```
(define (quicksort a p r)
  (if(< p r)
     (begin
        (b)) ;this is the cause of the error 
     a)) 
```

由于 b 是一个列表，因此尝试调用它会失败并出现错误。如果您删除 begin，let 块将按照您的意图运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:41:36.943

在快速排序中删除`(begin(`最后`)`一行`(quicksort b (+ q 1) r)`。

快速排序调用行上的和`(`之后的是应用第二次快速排序调用的结果。`begin``)`

这是因为它是函数体中的最后一个表达式`let*`，所以它是 let* 的返回值。它返回的列表是绝对不是过程的列表。

此外，所有让它们都有一个隐含的开始。

例如

```
(let ([a 1] [b 2] [c 3])
  (set! b 3)
  a
  b) 
```

将返回 3（简单的调用是毫无价值的，它的值被忽略）

它等价于以下代码：

```
(let ([a 1] [b 2] [c 3])
  (begin
     (set! b 3)
     a
     b)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T22:06:13.187

正如其他人已经说明了您的问题的答案，我想澄清其他答案中缺少的一些内容，希望能帮助您和/或其他人理解`(begin ())`.

我最常`(begin ())`像您在`(if ())`语句中那样使用，因为该函数在条件之后只有两个插槽。

因此，`(begin ())`当打算评估条件“在道路上分开”的一侧或两侧的多个语句时，它*本身*就变得有用。

一个例子：

```
(do ([i 0 (+ i 1)]) [(< i 10)]
  (if (= (% i 2) 1)
    (printf 'odd)
    (begin
      (printf 'even)
      'even))) 
```

上面我只`(begin ())`在我希望*Chez*执行两个单独的操作时使用，如果数字`i`是偶数。奇怪的时候`i`我不需要开始声明，我们可以继续。

请注意，*Chez Scheme*将按顺序评估 begin 语句的内容。在*[Scheme Programming Language](http://www.scheme.com/tspl4/start.html#./start:h2)*中，它在页面底部附近说：

> “语法形式 begin [...] 按从左到右的顺序计算其子表达式并返回最后一个子表达式的值，就像 let 或 lambda 表达式的主体一样。”

# android - Android ViewAnimator 展开高度

> ID：10036762
> 
> 赞同：0
> 
> 时间：2012-04-05T22:16:06.110
> 
> 标签：android, android-animation

我有一个 ListView，其中每个项目都有多个视图。我想在用户单击其中一项时显示/隐藏其中一项。我有这个工作，我有 ListView 适当地调整自己。现在我想为它制作动画，这就是我遇到问题的地方。我想让隐藏视图的高度从 0 扩展到实际高度。我看不出有任何方法可以用 ViewAnimator 做到这一点。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:32:57.240

我在 StackOverflow 上找到了一个正是我需要的答案。我基本上不得不重写 Animation 类并自己完成工作。我引用的答案在这里： [Android：展开/折叠动画](https://stackoverflow.com/questions/4946295/android-expand-collapse-animation)

# c - 结构内数组的动态内存分配，

> ID：10036763
> 
> 赞同：1
> 
> 时间：2012-04-05T22:16:11.130
> 
> 标签：c, struct, dynamic-memory-allocation, array-initialization

我不明白如何为另一个结构中的结构数组动态分配内存。如在，这是我的问题......我有一个包含主要的project.c文件，我有另一个polynomial.c文件，它处理所有的多项式操作，如添加项，将多项式乘以一个数字等......

这是 polynomials.h 的头文件

```
typedef struct term{
    int coeff;
    int expo;
} TERM;

typedef struct polynomial {

int size;
// This needs to be changed to calloc.. not sure how within a struct
TERM terms[20];

} POLYNOMIAL;
...
... 
```

我的 project.c 文件中也有这个，它为多边形数组动态分配内存。

```
POLYNOMIAL *polynomials = (POLYNOMIAL *)malloc(sizeof(POLYNOMIAL) * 8);
// 8 being the max number of polynomials I wan to store 
```

我在这里有两个问题，我应该何时以及如何为术语数组动态分配内存？我在想也许做一个指向一个指针的指针，该指针持有一个空的术语数组的 calloc 内存。这将在程序开始时完成，但在多项式分配之后（我认为）。

另一个问题，现在当我去释放内存时，应该在程序结束之前在它退出之前完成，并且我释放的顺序应该是自下而上，对吗？换句话说，先释放术语数组，然后释放多项式数组。

在这一点上，任何提示或指导都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:19:18.857

你可以简单地分配它

```
TERM *terms = calloc(20, sizeof(TERM)); 
```

您不能直接在 struct 声明中执行此操作，因此您要执行的操作类似于

```
POLYNOMIAL *polynomials = calloc(size, sizeof(POLYNOMIAL));

for (int i = 0; i < size; ++i)
  polynomials[i].terms = calloc(20, sizeof(TERM)); 
```

是的，您必须自下而上释放内存，首先释放所有术语，然后释放`POLYNOMIALS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:21:19.523

首先，您的`polynomial`结构应如下所示：

```
typedef struct polynomial {
   int size;
   TERM *terms;
} POLYNOMIAL; 
```

然后对于您拥有的每个`polynomial`结构：

```
p.terms = calloc(size, sizeof(*terms)); 
```

`terms`在释放结构之前，您需要释放指向的内存`polynomial`，否则您将无法访问该`terms`成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:20:12.583

由于您的问题已标记为作业，因此我不会确切地告诉您。

`TERM terms[20]`是一个文字就地数组。如果您在函数中声明这样的变量，它将在堆栈上为该数量的数组元素保留确切的空间。如果您在结构内部进行，则会在结构本身内部留下空间。因此，您被要求将某些内容从`X x[n]`等效指针语法更改为也用于数组语法。

您已经写过`POLYNOMIAL * polynomials`，所以您知道这既是 (a) 指向单个多项式的指针，或者 (b) 指向多项式数组的指针，而且您可以使用`malloc`表达式对其进行初始化。

如果您使用从问题中已经知道的内容，那么您肯定可以看到自己被要求直觉的内容；您可以重写该字段`term`，使其指向一个或多个`TERM`结构。

# android - Android：切换加速度计旋转状态设置

> ID：10036766
> 
> 赞同：7
> 
> 时间：2012-04-05T22:16:29.090
> 
> 标签：android, rotation, settings, default, accelerometer

*我在*您的应用程序中找到了大量设置旋转的示例，但我遇到的问题是切换位于以下位置的电话设置：**Settings, Display, Auto-rotate screen (checkbox)**。
我希望能够检查手机旋转状态，将其设置为相反（自动或关闭），然后关闭应用程序。

这就是我所拥有的：

```
import android.app.Activity;
import android.os.Bundle;
import android.provider.Settings;
import android.widget.Toast;

public class Rotation extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        try{
        if  (android.provider.Settings.System.getInt(getContentResolver(),Settings.System.ACCELEROMETER_ROTATION, 0) == 1){
            android.provider.Settings.System.putInt(getContentResolver(),Settings.System.ACCELEROMETER_ROTATION, 0);
            Toast.makeText(Rotation.this, "Rotation OFF", Toast.LENGTH_SHORT).show();
            finish();
            }
        else{
            android.provider.Settings.System.putInt(getContentResolver(), Settings.System.ACCELEROMETER_ROTATION, 1);
            Toast.makeText(Rotation.this, "Rotation ON", Toast.LENGTH_SHORT).show();
            finish();
            }
        }
        catch(Exception e){
            e.printStackTrace();
            Toast.makeText(Rotation.this, "Try failed!", Toast.LENGTH_SHORT).show();
            finish();
        }
    }
} 
```

如果您需要了解更多信息，请告诉我 :)
感谢您提供任何帮助，这让我很紧张**！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T05:53:23.493

您是否设置了正确的权限？

我没有，异常详细信息说，

`"Permission Denial: writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=306, uid=10037 requires android.permission.WRITE_SETTINGS"`

这几乎概括了它。

# c - 如何在 C 中嵌入资源文件？

> ID：10036769
> 
> 赞同：5
> 
> 时间：2012-04-05T22:16:36.463
> 
> 标签：c, embed, resource-files

我知道如何做到这一点的唯一方法是将文件转换为具有单个字节/字符数组的 C 源文件，该数组包含十六进制资源文件的内容。

有没有更好或更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:31:04.227

这是我在 gcc-arm 交叉编译器中使用的一个好技巧；通过汇编语言文件包括一个文件。在此示例中，它是`public_key.pem`我包含的文件的内容。

**公钥.s**

```
 .section ".rodata"
 .globl pubkey
 .type pubkey, STT_OBJECT
pubkey:
 .incbin "public_key.pem"
 .byte 0
 .size pubkey, .-pubkey 
```

对应**的pubkey.h**

```
#ifndef PUBKEY_H
#define PUBKEY_H
/*
 * This is a binary blob, the public key in PEM format,
 * brought in by pubkey.s
 */
extern const char pubkey[];

#endif // PUBKEY_H 
```

现在 C 源代码可以包含`pubkey.h`，`pubkey.s`用 gcc 编译并将其链接到您的应用程序中，然后就可以了。`sizeof(pubkey)`也有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T00:25:38.783

您描述的方式是最好的/最简单的/最便携的。只需编写一个快速工具（或查找现有工具）即可为您生成 C 文件。并确保在执行此操作时正确使用`const`（并且可能`static`）关键字，否则您的程序将浪费大量内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T10:03:09.843

不久前我需要这样的东西，我为此创建了一个工具。**[这是一个名为mkcres](https://github.com/jahnf/mkcres)** ( [https://github.com/jahnf/mkcres](https://github.com/jahnf/mkcres) )的 python 工具，我把它放在了 github 上。

*   尽管缺少一些文档，但有一些示例说明如何使用 CMake 或普通 make 文件将其集成到构建过程中。
*   将 .json 文件作为资源文件生成配置
*   它可以检测资源文件的变化，并在必要时自动重新生成相应的 C 文件。
*   缺点：你需要 python（2 或 3）
*   好处：不是特定于编译器的，应该适用于每个 C/C++ 编译器。

# c++ - 具有静态成员的 C++ 模板类 - 对所有类型的类都相同

> ID：10036770
> 
> 赞同：17
> 
> 时间：2012-04-05T22:16:36.740
> 
> 标签：c++, class, templates, variables, static

如果您有一个带有静态变量的模板类，有没有办法让该变量在该类的所有类型中都相同，而不是每种类型？

目前我的代码是这样的：

```
 template <typename T> class templateClass{
 public:
     static int numberAlive;
     templateClass(){ this->numberAlive++; }
     ~templateClass(){ this->numberAlive--; }
};

template <typename T> int templateClass<T>::numberAlive = 0; 
```

主要：

```
templateClass<int> t1;
templateClass<int> t2;
templateClass<bool> t3;

cout << "T1: " << t1.numberAlive << endl;
cout << "T2: " << t2.numberAlive << endl;
cout << "T3: " << t3.numberAlive << endl; 
```

这输出：

```
 T1: 2
 T2: 2
 T3: 1 
```

期望的行为是：

```
 T1: 3
 T2: 3
 T3: 3 
```

我想我可以使用某种类型的全局 int 来做到这一点，该类的任何类型都会递增和递减，但这似乎不太合乎逻辑，或者面向对象

感谢任何可以帮助我实现这一点的人。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-05T22:18:18.930

让所有类派生自一个公共基类，其唯一职责是包含静态成员。

```
class MyBaseClass {
protected:
    static int numberAlive;
};

template <typename T>
class TemplateClass : public MyBaseClass {
public:
    TemplateClass(){ numberAlive++; }
   ~TemplateClass(){ numberAlive--; }
}; 
```

# zsh - tmux 运行命令 - “返回 126”，这是什么意思？

> ID：10036772
> 
> 赞同：4
> 
> 时间：2012-04-05T22:16:54.597
> 
> 标签：zsh, tmux

在我的`.tmux.conf`我有这一行：

`bind r run "~/bin/tmux_renum"`

但它不起作用（它应该重新编号选项卡窗口 - 请参阅[http://brainscraps.wikia.com/wiki/Renumbering_tmux_Windows](http://brainscraps.wikia.com/wiki/Renumbering_tmux_Windows)）。它弹出黄色状态栏**'~/bin/tmux_renum' 返回 126**。

我无法弄清楚这意味着什么。有人见过这个吗？

我已经确定完全退出 tmux 会话，重新启动 tmux 进行测试。

如果重要的话，我也在使用 zsh。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T02:27:56.773

*tmux*命令（在您的配置中`run-shell`缩写为`run`）将字符串传递给`/bin/sh`^(†</sup>。除非您的脚本正在运行并`exit`使用代码 126，否则`/bin/sh`返回此退出代码的可能是您的。)

当执行命令出现问题时，shell 会给出高数字退出代码（126 和 127）。具体来说，（根据 POSIX.1）126 通常意味着该文件不可执行。

试试这个：

```
chmod +x ~/bin/tmux_renum 
```

* * *

^(†</sup> 从技术上讲，它使用 _PATH_BSHELL 定义的任何内容，但这几乎总是`/bin/sh`在类 Unix 系统上。)

# jquery - MVC ListBox 未将数据传递给 Action

> ID：10036773
> 
> 赞同：0
> 
> 时间：2012-04-05T22:16:56.533
> 
> 标签：jquery, asp.net-mvc, json

当我使用 FireBug 时，我看到 selectedPrdLctn 的选定值设置正确，但是当我通过 JSON 将它传递给我的操作时，它是 null

```
 $.getJSON('@Url.Action("GetCS")', { cntrParam: selectedPrdLctn }, function (getCS) { 
```

我的行动

```
 public ActionResult GetCS(String[] cntrParam) 
```

如果我使用 dropDownList，则该代码有效。知道为什么我没有通过选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:05:07.363

我怀疑问题出在您没有设置`traditional`参数并且 jQuery 没有以默认模型绑定器能够理解的格式发送集合。如果您使用 jQuery 1.4 或更高版本，则必须设置此参数。

例如：

模型：

```
public class MyViewModel
{
    public string[] SelectedValues { get; set; }
    public IEnumerable<SelectListItem> Items { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Items = new[] 
            {
                new SelectListItem { Value = "1", Text = "item 1" },
                new SelectListItem { Value = "2", Text = "item 2" },
                new SelectListItem { Value = "3", Text = "item 3" },
                new SelectListItem { Value = "4", Text = "item 4" },
            }
        };
        return View(model);
    }

    public ActionResult GetCS(string[] values)
    {
        return Json(new 
        { 
            message = string.Format("{0} item(s) selected", values.Length) 
        }, JsonRequestBehavior.AllowGet);
    }
} 
```

看法：

```
@model MyViewModel

@Html.ListBoxFor(
    x => x.SelectedValues, 
    Model.Items, 
    new { 
        id = "mylist",
    }
)

@Html.ActionLink("Send AJAX", "getcs", null, new { id = "mylink" }) 
```

脚本：

```
$(function () {
    $('#mylink').click(function () {
        var selectedValues = $('#mylist').val();
        $.getJSON(this.href, $.param({ values: selectedValues }, true), function (result) {
            alert(result.message);
        });
        return false;
    });
}); 
```

请注意我如何使用该[`$.param`](http://api.jquery.com/jQuery.param/)函数并将其作为代表传统参数的第二个参数传递给 true。尝试用`true`and调用它，`false`你会看到 FireBug 的不同之处，你就会明白为什么不设置这个参数它不起作用。

您还可以为所有 AJAX 请求全局设置此参数：

```
$.ajaxSetup({
    traditional: true
}); 
```

然后以下将起作用：

```
$.getJSON(this.href, { values: selectedValues }, function (result) {
    alert(result.message);
}); 
```

# tsql - TSQL - 单个查询中来自 DOB 的多个计数

> ID：10036775
> 
> 赞同：0
> 
> 时间：2012-04-05T22:17:07.667
> 
> 标签：tsql

对不起，如果这是一个新手问题。是否可以在单个查询中使用不同的 where 条件获取 Count 列表。基本上，我正在尝试获取按年龄显示申请人数量的列表。示例 20 - 29 30 - 39 等

非常感谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:27:47.973

也许这样的事情对你有用

```
SELECT SUM(case where DATEDIFF(YEAR, [dob], GETDATE()) between 20 and 29 then 1 else 0) AS 'Age_20_29',
SUM(case where DATEDIFF(YEAR, [dob], GETDATE()) between 30 and 39 then 1 else 0) AS 'Age_30_39',
[etc.]
FROM myTbl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:23:33.597

```
;WITH AgeGroups AS (
SELECT
  CASE 
    WHEN FLOOR(DATEDIFF(DAY, DOB, GETDATE()) / 365.25 BETWEEN 20 AND 29 
      THEN '20 - 29'
    WHEN FLOOR(DATEDIFF(DAY, DOB, GETDATE()) / 365.25 BETWEEN 30 AND 39 
      THEN '30 - 39'
  END AS AgeGroup
FROM YourTable
)
SELECT
  AgeGroup,
  COUNT(*) AS AgeGroupCount
FROM AgeGroups
GROUP BY AgeGroup 
```

# python - PyTables 说丢失，阻止安装 VITables

> ID：10036778
> 
> 赞同：1
> 
> 时间：2012-04-05T22:17:27.550
> 
> 标签：python, pytables

PyTables 是在 Windows上安装[VITables的要求之一。](http://vitables.org/index.html)我用 Table.test 检查了安装，一切看起来都不错。测试返回：

* * *

tables.test ()
PyTables 版本：2.3.1
HDF5 版本：1.8.8
NumPy 版本：1.6.1
Numexpr 版本：1.4.1（不使用 Intel 的 VML/MKL）
Zlib 版本：1.2.3（在 Python 解释器中）
LZO 版本：2.04（2010 年 10 月 31 日）
BZIP2 版本：1.0.6（2010 年 9 月 6 日）
Blosc 版本：1.1.2（2010-11-04）
Python 版本：2.7.2（默认，2011 年 6 月 12 日，15:08： 59) [MSC v.1500 32 位 (Intel)]
字节顺序：小
检测到的内核：4

在 260.580 秒内运行 4729 次测试

好的

* * *

但是，VITables 安装始终失败并显示以下消息：*“似乎没有安装 PYTables。正在中止 VITables 安装过程。* ”

知道如何解决这个问题吗？

谢谢。L.

# php - 从图像onclick调用php函数？

> ID：10036780
> 
> 赞同：0
> 
> 时间：2012-04-05T22:17:40.113
> 
> 标签：php, html

我是 php 脚本的初学者...我可以像这样使用 onclick 从 img 标签调用 php 函数吗？

```
<img src="3.png" onclick="myfunction();" /> 
```

我试过这个：

```
<a href="vote.php"><img src="3.png" /></a> 
```

但它不工作。我不想去 vote.php 页面。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:20:59.093

我认为你需要回到那里的一些基本概念。PHP 是一种服务器端语言，它在服务器上解释并在客户端呈现为 html。
另一方面，Javascript 由浏览器解释，在这种情况下您将使用它。`onclick`是一个js事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:21:35.920

有点。您的 onclick 事件应该在加载 php 文件的内部有一个 ajax 调用。然后，php 文件将打印/回显的任何内容都将在 ajax 响应中。

```
function myFunction() {
   $.ajax({
      url: 'vote.php',
      data: {
         vote: 1,
         id: 3
      },
      success: function( response ) {
         //do whatever with the response
      }
} 
```

如果您使用 jquery（或 mootools）进行 ajax 调用，它将比常规的 javascript ajax 请求更简单。上面使用了jquery。

文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:27:22.987

另一个不需要任何 Javascript 的选项是添加 iframe 并在那里发送投票请求

```
<a href="vote.php" target="voteframe"><img src="3.png" /></a>

<iframe id="voteframe" style="/*display:none*/" /> 
```

# java - Java isRollover() 方法不会在我的 Swing 应用程序中产生事件

> ID：10036787
> 
> 赞同：5
> 
> 时间：2012-04-05T22:18:15.177
> 
> 标签：java, swing, jbutton, changelistener

我正在阅读一本名为 Swing: A Beginner's guide 的好书。书中的这段代码创建了一个按钮和一个标签，用于提醒按钮的状态更改事件：

```
//Demonstrate a change listener and the button model

package swingexample2_6;

import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class ChangeDemo {

    JButton jbtn;
    JLabel jlab;

    public ChangeDemo() {
        //Create a new JFrame container
        JFrame jfrm = new JFrame("Button Change Events");

        //Specify FlowLayout for the layout manager
        jfrm.getContentPane().setLayout(new FlowLayout());

        //Give the frame an initial size
        jfrm.setSize(250, 160);

        //Terminate the program when the user closes the application
        jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create an empty label
        jlab = new JLabel();

        //Make a button
        jbtn = new JButton("Press for Change Event Test");

        //--Add change listener
        jbtn.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent ce) {
                ButtonModel mod = jbtn.getModel();
                String what = "";

                if (mod.isEnabled()) {
                    what += "Enabled<br>";
                }
                if (mod.isRollover()) {
                    what += "Rollover<br>";
                }
                if (mod.isArmed()) {
                    what += "Armed<br>";
                }
                if (mod.isPressed()) {
                    what += "Pressed<br>";
                }

                //Notice that this label's text is HTML
                jlab.setText("<html>Current stats:<br>" + what);
            }
        });

        //Add the components to the content pane
        jfrm.getContentPane().add(jbtn);
        jfrm.getContentPane().add(jlab);

        //Display the frame
        jfrm.setVisible(true);
    }

    public static void main(String[] args) {
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ChangeDemo();
            }
        });
    }
} 
```

除了翻转事件外，一切正常。底层操作系统是 Mac OS Lion。我应该把这个挥杆问题归咎于狮子还是我做错了什么？谢谢你。

更新1：我的neatbeans设置图片（我希望它有帮助） [![设置](../Images/fa79a026441e0f25cbe5fcaef680d506.png)](https://i.stack.imgur.com/IZrPd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T00:19:59.060

代码在 Leopard 上测试，Java 版本`1.6.0_26`如下所示。尾随`</html>`标签修复了翻转时的突出显示故障。

附录：使用下面的更新示例，添加`setRolloverEnabled(true)`允许模型按预期工作。有趣的是，Mac UI 委托 ,`com.apple.laf.AquaButtonUI`时什么都不`isRollover()`做`true`。如果它对您的应用程序很重要，您可以在以下谓词为时采取所需的操作`true`：

```
System.getProperty("os.name").startsWith("Mac OS X") 
```

作为参考，此[示例](https://stackoverflow.com/a/4170233/230513)演示了`setRolloverIcon()`.

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class ChangeDemo {

    private JButton jbtn;
    private JLabel jlab;

    public ChangeDemo() {
        JFrame jfrm = new JFrame("Button Change Events");
        jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jfrm.setLayout(new GridLayout(0, 1));
        jlab = new JLabel("", JLabel.CENTER);
        jbtn = new JButton("Press for Change Event Test");
        jbtn.setRolloverEnabled(true);

        jbtn.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent ce) {
                ButtonModel mod = jbtn.getModel();
                String what = "";

                if (mod.isEnabled()) {
                    what += "Enabled<br>";
                }
                if (mod.isRollover()) {
                    what += "Rollover<br>";
                }
                if (mod.isArmed()) {
                    what += "Armed<br>";
                }
                if (mod.isPressed()) {
                    what += "Pressed<br>";
                }

                //Notice that this label's text is HTML
                jlab.setText("<html>Current stats:<br>" + what + "</html>");
            }
        });

        JPanel panel = new JPanel();
        panel.setBorder(BorderFactory.createEmptyBorder(50, 10, 0, 10));
        panel.add(jbtn);
        jfrm.add(panel);
        jfrm.add(jlab);

        jfrm.pack();
        jfrm.setLocationRelativeTo(null);
        jfrm.setVisible(true);
    }

    public static void main(String[] args) {
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ChangeDemo changeDemo = new ChangeDemo();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T23:40:17.180

好吧好吧。我知道这已经得到了很好的回答，并且 OP 的问题是在 Mac 上，但这个答案需要分享。

如果您使用的是 Windows 7，如果您将主题设置为“经典”，则翻转效果将不起作用。将其设置为“基本”，翻转将起作用。

# php - 如何从 url 创建 $_FILES 数组

> ID：10036789
> 
> 赞同：1
> 
> 时间：2012-04-05T22:18:25.483
> 
> 标签：php, arrays, file, upload

我一直在寻找，但没有结果。我在一台服务器上有图像，并且有它们的 URL。我需要下载它们并创建 $_FILES 数组 - 与在表单中上传文件相同。谁能帮助我？提前致谢

# apache - Apache 服务器模块安装：如何解决 apxs 错误？

> ID：10036790
> 
> 赞同：0
> 
> 时间：2012-04-05T22:18:34.233
> 
> 标签：apache, unix, module, ftp

您能否向我解释以下错误的含义和可能的修复方法？

我正在尝试为 FTP [http://httpd.apache.org/mod_ftp/ftp/index.html](http://httpd.apache.org/mod_ftp/ftp/index.html)安装 Apache 模块。尝试使用**apxs**构建源文件时出现此错误：

```
apxs:Error: Sorry, cannot determine bootstrap symbol name.
apxs:Error: Please specify one with option `-n'. 
```

以下是上下文中的完整代码：

```
$ apxs -iac mod_ftp.c
/usr/share/apr-1/build-1/libtool --silent --mode=compile gcc    -DDARWIN -
DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp  -I/usr/include/apache2  -
I/usr/include/apr-1   -I/usr/include/apr-1   -c -o mod_ftp.lo mod_ftp.c && touch 
mod_ftp.slo
/usr/share/apr-1/build-1/libtool --silent --mode=link gcc -o mod_ftp.la  -rpath 
/usr/libexec/apache2 -module -avoid-version    mod_ftp.lo
apxs:Error: Sorry, cannot determine bootstrap symbol name.
apxs:Error: Please specify one with option `-n'. 
```

这是我尝试在 Apache 服务器上安装的第一个模块，我很难过。我似乎找不到对此的解释。特别是，**引导符号名称**是什么，如何使用选项 -n 指定一个？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-05T11:18:10.843

apxs 无法提取或丢失模块的描述。在源文件名之前为其提供`-n`标志，它应该可以工作，例如

```
apxs -iac -n mod_ftp mod_ftp.c 
```

在 mod_authnz_pam 的情况下为我工作：

```
apxs -iac -n mod_authnz_pam mod_authnz_pam.c -lpam -Wall -pedantic 
```

[作者](https://github.com/adelton/mod_authnz_pam)在他的安装方法中省略了 -n 标志，我遇到了你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:50:44.170

您是否尝试过按照[http://svn.apache.org/repos/asf/httpd/mod_ftp/trunk/README-FTP](http://svn.apache.org/repos/asf/httpd/mod_ftp/trunk/README-FTP)的指示？

由于 apxs 似乎在您的路径中，您应该能够做到：

```
./configure.apxs
make
make install 
```

# php - 调试PHP时Eclipse打开文件的完整路径

> ID：10036791
> 
> 赞同：14
> 
> 时间：2012-04-05T22:18:34.757
> 
> 标签：php, eclipse, xdebug

我有一个本地 PHP 服务器，它与带有 Xdebug JIT 设置的 eclipse 一起安装了 xdebug。除了一个非常烦人的问题外，一切都很好。

问题是每次我在 PHP 脚本中遇到断点时，Eclipse 都会使用完整路径打开 php 文件，而不是相对于工作空间的路径。这会创建两个打开的文件，除了在绝对文件中设置断点未正确显示在代码选项卡中（尽管它们显示在断点列表中）以及在不同文件之间设置或删除断点之外，这不是问题是特定于路径的 - 因此您无法与来自其他文件表示的断点进行交互。此外，跳转到新文件会在同一选项卡中打开。我希望 Eclipse 使用我已经打开的选项卡，我认为如果它不使用绝对路径打开文件会发生这种情况。

我尝试在 PHP 服务器配置中设置路径映射，但它们似乎没有任何效果。我愿意接受任何尝试的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-11T08:45:25.773

您需要设置路径映射以将项目文件映射到使用 x-debug 运行 php 的服务器

[http://www.eclipse.org/pdt/help/html/path_mapping.htm](http://www.eclipse.org/pdt/help/html/path_mapping.htm)

# php - 如何仅在 HTML 标记内删除新行

> ID：10036793
> 
> 赞同：0
> 
> 时间：2012-04-05T22:18:49.247
> 
> 标签：php, preg-replace

如何使用 preg_replace 仅在 HTML 标记内删除新行？

例子：

```
<table>

<tr>

<td></td>
</tr>
</table>

Text here. Text here

Text here. 
```

因此，在函数处理完上述代码后，返回应该是：

```
<table>    <tr>    <td></td>    </tr>    </table>

Text here. Text here

Text here. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:31:56.060

> 如何使用 preg_replace 仅在 HTML 标记内删除新行？

从技术上讲是的，但实际上，HTML 并不关心换行符，每个多个空白字符实际上都被读取为一个。如您的示例所示，您将 \n 替换为空格或 \t，因此实际上是相同的，这使我想到您可以执行以下操作：

```
$html = preg_replace('~(>[^>]*)(*BSR_ANYCRLF)\R([^<]*<)~', '$1 $3', $html); 
```

另请参阅：[php regex to match outside of html tags](https://stackoverflow.com/q/7891771/367456)和[How to replace different newline styles in PHP the smartest way？](https://stackoverflow.com/q/7836632/367456).

一种更安全的方法是使用 HTML 解析器，`DOMDocument`并将您的片段作为正文加载。然后替换正文子节点的子节点的文本节点中的所有换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:35:08.123

可能有更聪明的方法可以做到这一点，但是，这将完成你的工作。

```
$str = "test\n\n test2 <table>\n\n\n test 3</table>\n\n\n test4 test5";

while ($str2 = preg_replace('/(>[^<]*)\n([^<]*<)/', '\\1\\2', $str)) {
    if ($str2 == $str) break;
    $str = $str2;
}

echo ($str); 
```

它在 > 字符和 < 字符之间查找换行符，并删除它们。

# r - 检查函数输入在 R 中提供

> ID：10036800
> 
> 赞同：3
> 
> 时间：2012-04-05T22:19:40.853
> 
> 标签：r

我有以下（无意义的）功能，在`R`：

```
say <- function (string){
  if(!exists("string")){
    stop("no output string was specified")
  }
  cat(string)
} 
```

这在检查字符串对象是否实际存在方面非常好。但是，如果同名对象已经在工作区中浮动，即使函数中没有定义该错误，它也会忽略该错误。

我可以这样使 exists() 函数只在对象的函数空间中查找吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T22:22:25.780

你正在寻找`missing`. 其他人则这样做：

```
say <- function(string=NULL){
  if(is.null(string)){
    stop("no output string was specified")
  }
  cat(string)
} 
```

# ios - 自动上传Wordpress？

> ID：10036804
> 
> 赞同：0
> 
> 时间：2012-04-05T22:20:19.420
> 
> 标签：ios, database, wordpress

我希望我的网站在有人添加应用时自动更新。
一些例子：http:
[//iphoneapp-promocodes.com](http://iphoneapp-promocodes.com)
[http://www.appshots.net/](http://www.appshots.net/)

我想这样做，以便有人可以单击添加应用程序，然后他们将 iTunes 应用程序 url 放在框中，它将自动添加到我的网站。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:21:29.457

关键是要连接到存储应用程序的数据库，您应该编写一个脚本，返回表中包含的每个对象以及相应的属性。

尽管我不建议您为此使用 wordpress，但请尝试制作您的自定义 php 脚本或尝试使用 ruby​​ on rails 来在几分钟内完成这些事情。

虽然如果网站有 API，你可以使用它的功能来使用他们的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:23:16.763

如果我理解正确，您正在寻找 iTunes Affiliate Program。它的主页 (http://www.apple.com/itunes/affiliates/) 说：

> iTunes、App Store、iBookstore 和 Mac App Store 联属计划为您的网站或应用程序提供了一种独特的方式来链接到数百万首歌曲和数以千计的应用程序——以及书籍、好莱坞电影、电视节目、音乐视频、游戏、有声读物和播客。

他们有一个用于获取特定信息的 API。

# string - 如何从 Pascal 中的同一行读取两个字符串？

> ID：10036805
> 
> 赞同：1
> 
> 时间：2012-04-05T22:20:39.920
> 
> 标签：string, line, pascal

我正在尝试从 pascal 中的同一行读取两个字符串变量。
这两个字符串由空格分隔。

我试过像一个字符串一样读取它，然后将它分成两部分，但是我遇到了一个问题，因为字符串大于 255 个字符。

这是我要阅读的字符串：

> kyGOwpLobZvGynmdpiujxhUwphFsTTipuyAwpeffcckLuPouxmpQwGeMxqDoIqeWVkpdLueirlLiabfhxjnwbyMDYUfhGmlnFJdmfhtxljPqicbotSBvkKaQdsmbyrhmmSdexHjwdnecjRtzef mkhRyGOwpLobZvGynmdpiujxhUwphFsTTipuyAwpeffcckLumWbnbfdhlzFmnkkrwNsewPouxmpQwGeMxqDoIqeWVkpdLueirlLiabfhxjnwbyMDYUfhGmlnFJdmfhtxljPqicbotSBvkKaQdsmbyrhmmSdexHjwdnecjRtzeajfz`

该行并不总是相同的长度，并且空白空间不在同一位置。

我试图弄清楚是否通过从第二个字符串中删除一些字符可以得到第一个。

示例：STRING aSgasTsaRoIgfNfdsG
应该得到肯定的答案。

这是检查它的代码。

```
q:=1;  
for m:=1 to length(b) do  
begin  
if b[m] = a[q] then  
q:=q+1;
end;

q:=q-1;

writeln(q);

if q = length(a) then  
writeln('YES')  
else  
writeln('NO'); 
```

其中 a 是第一个字符串，b 是第二个字符串。

我将第一个大字符串作为一个变量读取，然后将其分成两部分。
当第一个字符串大于 255 个字符时会出现此问题。这就是为什么我想知道如何从同一行读取两个字符串。

我用来分隔字符串的代码：

```
readln(x);  

x:=LONGSTRINGHERE;  
blank:=' ';
Location := Pos(blank, x);  

a:=Copy(x, 1, (Location-1));  

b:=Copy(x, (Location+1), length(x)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:53:41.207

而不是使用`readln()`读取整行，也许您可​​以使用`read()`类型变量`char`一次将一个字符读取到您的第一个字符串中，直到您检测到一个空格然后读取第二个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:37:09.690

您可以使用 freepascal 编译器并用 ansistring 替换字符串，最长可达 2^16 = 65536 个字符。

# ruby-on-rails - 如何仅为列更新的子集更新模型的“updated_at”字段？

> ID：10036807
> 
> 赞同：4
> 
> 时间：2012-04-05T22:20:53.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, data-modeling

有一个典型的博客应用程序。每个用户都有_many 个帖子。每个帖子都有_many标签。我按 updated_at 对每个帖子进行排序，因此最近更新的帖子将显示在顶部。因此，例如，如果我更新帖子的内容，该帖子将出现在顶部。但是，当我只添加一个标签时也会发生这种情况，因为一个标签连接到其相应的帖子。

我只希望内容更新更改 updated_at 字段。我不希望 updated_at 更改帖子，因为我添加了标签。有没有办法做到这一点？或任何其他方式来实现这样的事情？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T04:41:00.633

我想到了两种方法：

1.  不要`:updated_at`用于您使用它的目的。而是创建一个新列，例如`:post_updated_at`，并在每次保存时手动更新它，以使帖子移动到顶部。Rails 为此提供了一种方便的模型方法：

    ```
    mypost.touch :post_updated_at 
    ```

2.  当您更新列并希望`:updated_at`保持不变时，请使用该[`#update_column`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column)方法，该方法直接使用您给它的值更新数据库中的列。请注意，它将值逐字写入数据库，因此如果有问题的列是花哨的`serialize`列或类似的列，您必须很聪明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T18:25:28.240

这是一个替代品，`save`可让您将“无聊”属性列入黑名单，即那些不触发时间戳更新的属性。它依赖 Rails 4+`update_columns`方法在保存期间抑制回调方法（小心抑制这些方法）。

```
# Here we configure attribs that won't trigger the timestamp update
IGNORED_ATTRIBS = Set.new %w(reviewed_at view_count)

# A "save" replacement
def fussy_save

  # Calculate any ignored attributes that are pending a save
  all_changed_attribs = Set.new(self.changed_attributes.keys)
  ignored_changed_attribs = IGNORED_ATTRIBS.intersection all_changed_attribs

  # Save the ignored attributes without triggering updated_at
  if ignored_changed_attribs.present?
    self.update_columns self.attributes.slice(*ignored_changed_attribs)
  end

 # perform a normal save only if there are additional attributes present
  if !all_changed_attribs.subset?(IGNORED_ATTRIBS)
    save
  end

end 
```

实施说明：

上面的最后一行是常规保存。我最初尝试在没有检查的情况下进行保存，基于如果已保存忽略的属性则不会发生任何事情（因为`save`什么都不做，并且如果没有保存属性，则不会更新时间戳）。但我发现这`changed_attributes`实际上是 Rails 内部的、明确的、参考，而不仅仅是对开发人员的方便（不太令人惊讶:)。开始弄乱它感觉很危险，所以我只是执行检查，所有更改的属性都将保存在 SQL 中（包括刚刚由 update_columns 保存的属性），但前提是存在未忽略的属性。

# java - SeverSocket 停止接受

> ID：10036810
> 
> 赞同：0
> 
> 时间：2012-04-05T22:21:05.847
> 
> 标签：java, sockets, networking

我正在开发一款基于事件结构的游戏，主要游戏逻辑托管在服务器上；目前它是一个非常小的功能集，只允许在两个参与者之间举办一场比赛。我已经阅读了有关的各种问题`ServerSocket`，但没有一个回答我的问题。我已经看过了

*   [ServerSocket accept 继续阻塞](https://stackoverflow.com/questions/8392141/serversocket-accept-continues-to-block)
*   [ServerSocket.accept()](https://stackoverflow.com/questions/5664235/serversocket-accept)
*   [在接受的套接字上调用 close() 之前，Java ServerSocket 不会接受新连接](https://stackoverflow.com/questions/6434773/java-serversocket-wont-accept-new-connections-until-close-is-called-on-the-ac)
*   [ServerSocket 接受() 方法](https://stackoverflow.com/questions/4307549/serversocket-accept-method)

在我的项目中，我使用`ObjectInputStream`和`ObjectOutputStream`. 一切都按预期工作（在服务器端和客户端都接收/发送），但是在两个套接字都注册后，实例的`accept`方法会`ServerSocket`继续永远阻塞，即使之前调用了相同的代码。也许这是通过套接字通信一次后出现的问题？

我的服务器日志显示以下内容：

> 等待接受
> 接受第一个套接字向套接字1
> 发送事件以通知等待对手
> 等待接受
> 接受第二个套接字
> 向两个套接字发送响应
> 等待接受（并永远阻塞）

当日志显示响应事件已发送时，它们已在客户端正确接收和处理。客户端调试输出显示下一个事件*肯定*已发送。也许是关于不关闭客户端套接字（在第三个链接问题中提到）？无论如何，我无法关闭客户端套接字，因为无法进行进一步的通信。

**客户端代码**

```
public void send(Event e) {
    try {
        ObjectOutputStream out = new ObjectOutputStream(
                socket.getOutputStream());
        out.writeObject(e);
        out.flush();
        log.debug("sending event... "+e);
    }
    catch(IOException ioe) {
        log.fatal("constructing oos failed", ioe);
    }
} 
```

**服务器端代码**

```
@Override
public void run() {
    running = true;
    while(running) {
        try {
            Socket s = socket.accept();
            ObjectInputStream ois = new ObjectInputStream(s.getInputStream());
            Event event = (Event) ois.readObject();

            try {
                Event[] response = controller.consume(event);
                ObjectOutputStream oos = new ObjectOutputStream(sockets[0].getOutputStream());
                oos.writeObject(response[0]);
                oos.flush();
                ObjectOutputStream oos2 = new ObjectOutputStream(sockets[1].getOutputStream());
                oos2.writeObject(response[1]);
                oos2.flush();
            }
            catch(...) {
                // multiple catch clauses for different exceptions
                // all just logging (nothing passes silently!)
            }
    }
} 
```

为了缩短，将两个套接字分配给`Socket[]`数组的方法被省略了，但由于**没有异常**，保持套接字有效。您知道什么可能导致所描述的行为吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:51:12.620

该[`accept`](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#accept%28%29)方法只接受*新*的连接。由于您只有两个客户端尝试连接到您的服务器，因此它将在您第三次调用`accept`.

旁注：您不需要不断创建新`ObjectInputStream`的s和`ObjectOutputStream`s。您可以只为每个创建一个，`Socket`并保留对它们的引用以供重复使用。

# ssms - 这个用于脚本数据的 SSMS 上下文菜单选项来自哪里？

> ID：10036819
> 
> 赞同：0
> 
> 时间：2012-04-05T22:21:53.877
> 
> 标签：ssms

下图显示了我要询问的上下文菜单。我在 SSMS 2008 R2 中使用它很长时间了，我认为它是 SSMS 的一个特性。今天我和另外两个开发人员一起工作，结果他们没有这个漂亮的小功能，事实上他们从未见过。所以现在我们想知道它是从哪里来的。是插件吗？它是由一些不起眼的功能打开的吗？ ![SSMS 脚本数据作为上下文菜单](../Images/4be44583e23ec65f162398c093fd4a27.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:28:03.950

这是 Microsoft 不支持的功能。它是 SSMS (SQL Server Management Studio) 的插件。

# r - 如何将 data.frame 放入 R 中的多维数组中？

> ID：10036822
> 
> 赞同：7
> 
> 时间：2012-04-05T22:22:04.437
> 
> 标签：r, dataframe, plyr

我正在寻找一种更通用的方法来从 data.frame 获取多维数组。

我希望能够根据需要从数据框中的尽可能多的变量中创建尽可能多的维度。

目前，该方法必须针对每个 data.frame 进行定制，需要转租以形成向量。

我会喜欢 plyr 中的熔化/铸造方法。

```
 data<-data.frame(coord.name=rep(1:10, 2),
             x=rnorm(20),
             y=rnorm(20),
             ID=rep(c("A","B"), each=10))

    data.array<-array(dim=c(10, 2, length(unique(data$ID))))

    for(i in 1:length(unique(data$ID))){
      data.array[,1,i]<-data[data$ID==unique(data$ID)[i],"x"]
      data.array[,2,i]<-data[data$ID==unique(data$ID)[i],"y"]
    }

data.array
, , 1

      [,1] [,2]
 [1,]    1    1
 [2,]    3    3
 [3,]    5    5
 [4,]    7    7
 [5,]    9    9
 [6,]    1    1
 [7,]    3    3
 [8,]    5    5
 [9,]    7    7
[10,]    9    9

, , 2

      [,1] [,2]
 [1,]    2    2
 [2,]    4    4
 [3,]    6    6
 [4,]    8    8
 [5,]   10   10
 [6,]    2    2
 [7,]    4    4
 [8,]    6    6
 [9,]    8    8
[10,]   10   10 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T23:07:26.043

由于某种微妙的原因，您可能无法应用**reshape2函数。**困难在于您的 data.frame 没有可用于指导您如何沿输出数组的第一维排列元素的列。

下面，我明确添加了这样一个列，将其命名为`"row"`. 有了它，您可以使用表达式`acast()`或`dcast()`函数以您选择的任何方式重塑数据。

```
library(reshape2)

# Use this or some other method to add a column of row indices.
data$row <- with(data, ave(ID==ID, ID, FUN = cumsum))

m <- melt(data, id.vars = c("row", "ID"))
a <- acast(m, row ~ variable ~ ID)

a[1:3, , ]
# , , A
# 
#   x y
# 1 1 1
# 2 3 3
# 3 5 5
#
# , , B
# 
#   x y
# 1 2 2
# 2 4 4
# 3 6 6 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T23:04:23.190

我认为这是对的：

```
array(unlist(lapply(split(data, data$ID), function(x) as.matrix(x[ , c("x", "y")]))), c(10, 2, 2)) 
```

# c# - 设置循环位域中的位范围

> ID：10036834
> 
> 赞同：3
> 
> 时间：2012-04-05T22:23:13.423
> 
> 标签：c#, bit-manipulation

我有一个由 64 位组成的位字段：

```
long bitfield = 0; 
```

我可以为给定索引设置位，如下所示：

```
void Set(long index)
{
   bitfield |= 1L << (int)(index % 64);
} 
```

即，如果索引为 0、64、128、...，则设置位 0，如果索引为 1、65、129，...，则设置位 1，依此类推。

*问题：*给定一个索引和一个计数（或一个较低和较高的索引），如何在不使用循环的情况下为该范围内的所有索引设置位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:55:59.537

```
long SetRangeMask(int lower, int upper)     // 3..7
{
   if (! (lower <= upper)) throw new ArgumentException("...");

   int size = upper - lower + 1;            // 7 - 3 + 1 = 5
   if (size >= 64) return -1;
   long mask = (1 << size) - 1;             // #00100000 - 1  = #000011111
   return mask << lower | mask >> -lower;   // #00011111 << 3 = #011111000
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:28:38.340

您可以使用查找表来组合位掩码

一个真正简单的方法，不考虑特殊情况或像这些问题提出的优化，看起来像：

```
 static readonly private long[] maskLUT = new long[64,64] { /* generated */ };

 void SetRange(long lobit, long hibit)
 {
     lobit %= 64;
     hibit %= 64;

     bitfield |= lobit<hibit? maskLUT[lobit,hibit] : maskLUT[hibit,lobit];
 } 
```

想法：

*   您可能会考虑给定的优化`[lobit...hibit]`，如果`hibit-lobit`>=64，您可以一次设置所有位。

*   考虑到两个边界都可以环绕的事实，需要考虑区域的连接性（您是先环绕两个边界，还是先环绕两个边界`lobit`，然后使用增量`hibit`从包裹的边界，就像前面提到的优化一样？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:30:47.197

您可以使用 2 ^x -1 创建一个 x 位长的掩码，然后将其移入并进行 OR 运算，如下所示：

```
void Set( int index, int count ) {
  bitfield |= (long)(Math.Pow( 2, count ) - 1) << ((index-count) % 64);
} 
```

**更新：** 我喜欢认为这可以`Math.Pow`优化左移两个的幂，但它可能不会。`Math.Pow`如果是这种情况，您可以通过将调用替换为相应的左移来获得更多性能：

```
public void Set( int index, int count ) {
  bitfield |= ((2 << count - 1) - 1) << ((index-count) % 64);
} 
```

# zend-framework - Zend Router 中的过滤请求

> ID：10036837
> 
> 赞同：0
> 
> 时间：2012-04-05T22:23:32.303
> 
> 标签：zend-framework, zend-route, zend-router

就编写 Zend 路由器而言，我是新手。我想路由表单的所有请求

/:用户名到控制器=>用户和操作=>配置文件。问题是我希望能够过滤 :username 将被路由。即我要过滤的用户名将被路由。

我要应用的最基本和最重要的过滤器是，如果 :username 匹配一些现有的控制器名称，它不应该被路由到 /user/profile。

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:26:09.540

这里有一些提示可以让你到达你想去的地方：

1.  路由聚合到堆栈上，因此它们是 LIFO（后进先出）。这意味着您的最高优先级路由应最后定义。对于这种特殊情况，您希望更早地列出您的 /:username 路由，以便它具有较低的优先级。这将允许您的其他现有路线首先被路由。
2.  您提到要“过滤”哪个 :username 将被路由。你有用户名的静态列表吗？如果是这样，您可以使用正则表达式路由并执行 (username1|username2|...)。如果您通过数据库查找用户名，则需要构建一个自定义路由类来查询您的数据库。
3.  或者，您可以简单地使用基于模式的路由，然后在前端控制器插件中进行过滤。

注意：如果您使用选项 #3，以下内容应该可以帮助您入门：

```
$router       = Zend_Controller_Front::getInstance()->getRouter();
$matchedRoute = $router->getCurrentRouteName(); 
```

您将根据路线名称采取行动。如果不是定义 /:username 路由的路由名称，则忽略。如果匹配，请查找用户名并过滤。

# ios - UITabBars 和 UITableViews。单击表格单元格时保持标签栏在屏幕上

> ID：10036844
> 
> 赞同：0
> 
> 时间：2012-04-05T22:24:01.330
> 
> 标签：ios, uitableview, uitabview

我正在尝试使用设置了 UITabBar 和 UITableViews 的 GUI。

我有一个以编程方式创建的 UITabView。其中一个选项卡显示了一个也是以编程方式创建的 UITableView。

然后，当调用 didSelectRowAtIndexPath 时，此 UITableView 会显示其他视图。

不幸的是，当单击表格单元格时，我的选项卡视图消失并显示新的表格视图。

我无法理解的是如何构建视图以使 tabBar 留在屏幕上。

是否像使 UITableViews 更短一样简单，或者是否有一些我缺少的窗口/视图魔力？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:53:10.887

您应该使用 UITabBarController 来显示 UITabBar 而不是直接进行。

然后使用 UITableViewController 作为给定选项卡的视图控制器。虽然我得到的印象是你想在选择一行时呈现后代 UITableViews。如果是这种情况，你应该使用 UINavigationController 作为标签栏的视图控制器，并让它管理你的 UITableViewControllers。

请记住，在 iOS 上，您确实需要使用视图控制器模式 - 框架在后台为您处理了很多事情。

* * *

跟进：

好的，以下简单的实现对我来说很好。请忽略此代码的许多明显问题（从我在应用程序委托中将其全部破解的事实开始！）；它的目的纯粹是作为控制器应该如何粘合在一起的模型。

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITableViewDelegate, UITableViewDataSource>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UINavigationController *navController;

@end

@implementation AppDelegate

@synthesize window = _window;
@synthesize navController = _navController;

- (void)dealloc
{
    [_navController release];
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    UITableViewController *rootTVC = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
    [[rootTVC tableView] setDelegate:self];
    [[rootTVC tableView] setDataSource:self];
    [rootTVC setTitle:@"Root Table"];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:rootTVC];
    [rootTVC release];
    [navController setTitle:@"My Table"];

    UIViewController *anotherViewController = [[UIViewController alloc] init];
    [anotherViewController setTitle:@"Not the table"];

    UITabBarController *tbc = [[UITabBarController alloc] init];
    [tbc setViewControllers:[NSArray arrayWithObjects:navController, anotherViewController, nil]];
    [self setNavController:navController];
    [navController release];
    [anotherViewController release];
    [[self window] setRootViewController:tbc];
    [tbc release];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *reuseIdentifier = @"foo";
    UITableViewCell *cell = [[tableView dequeueReusableCellWithIdentifier:reuseIdentifier] retain];
    if (! cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
    }
    [[cell textLabel] setText:[NSString stringWithFormat:@"Row %d", [indexPath row]]];
    return [cell autorelease];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    UITableViewController *newTVC = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
    [newTVC setTitle:[NSString stringWithFormat:@"Table %d", [indexPath row]]];
    [[newTVC tableView] setDelegate:self];
    [[newTVC tableView] setDataSource:self];
    [[self navController] pushViewController:newTVC animated:YES];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:56:40.337

使用 UITabBarController 而不是 UITabBar。

# python - 连接到网络服务

> ID：10036847
> 
> 赞同：0
> 
> 时间：2012-04-05T22:24:08.990
> 
> 标签：python

我有一些 PHP 代码，类似于下面显示的代码，它建立连接并获得响应（来自 Web 服务）。

我将如何在 Python 中做类似的事情？

```
$cObj = curl_init();.
curl_setopt($cObj, CURLOPT_URL,$this->urlws.'/trlink/link1/trlink');
curl_setopt($cObj, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($cObj, CURLOPT_TIMEOUT, 20);
curl_setopt($cObj, CURLOPT_HTTPHEADER, array());

curl_setopt($cObj, CURLOPT_POST, 1);
curl_setopt($cObj, CURLOPT_POSTFIELDS,"XMLString=".$xml);

$this->xml_response = curl_exec($cObj);. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:55:52.210

你可以试试 SUDS [https://fedorahosted.org/suds/](https://fedorahosted.org/suds/)

# jpa - JDBC 中的 EntityManger 刷新模式

> ID：10036852
> 
> 赞同：0
> 
> 时间：2012-04-05T22:24:26.623
> 
> 标签：jpa, flush, autoflush

JPA 本质上是 JDBC 的更高抽象。EntityManager 有一个 API setAutoFlushMode。它可以设置为 AUTO 或 COMMIT。用 JDBC 术语来说，这个等价物是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:44:53.217

JDBC 也具有自动提交功能。

它们都用于配置库是否应自动提交到数据库。

JDBC 的自动提交非常简单，它会立即将每次更新提交到数据库。如果没有自动提交，则在调用 commit 方法之前不会提交更改。

JPA AUTO 导致在执行查询之前刷新到数据库。像 find 这样的简单操作不需要刷新，因为库可以处理搜索，但是查询会复杂得多，因此如果设置了 AUTO，它将首先刷新它。如果模式设置为 COMMIT，它只会在调用 commit 或 flush 时刷新对数据库的更改。如果设置了 COMMIT 并运行查询，则不会返回尚未刷新的结果。

# c++ - 在函数中分配内存以返回给用户

> ID：10036854
> 
> 赞同：0
> 
> 时间：2012-04-05T22:24:43.610
> 
> 标签：c++, heap-corruption

我有一个函数通过串行发送命令，然后接收未知大小的响应。使用

```
(ioctl(fd_, FIONREAD, &bytes_in_buffer); 
```

我确定需要为读取分配多少内存。

```
//This code calls the function below
unsigned char CheckRefresh[] = {254, 124, 0};
unsigned char * response;
unsigned int size;
relay_board->SendCustomCommand(CheckRefresh, 3, &response, size);

ErrorCode SendCustomCommand(unsigned char * command, unsigned int command_size, unsigned char **response, unsigned int &response_size)
{
  //Send the command
  write(fd_, command, command_size);

  // ... Omitting Polling Code to Get correct number of bytes ...
  (ioctl(fd_, FIONREAD, &bytes_in_buffer);

  //Now getting the response
  response_size = (unsigned int)bytes_in_buffer;
  (*response) = new unsigned char(response_size);
  if(read(fd_, *response, response_size) < 0)
  {
    std::cout << "[ProXRSerial] SendCustomCommand: Read failed... -- Errno: " << errno << std::endl;
    return Failed;
  };
  return Success;
} 
```

我相信这正在破坏我的堆栈，因为我的下一个函数调用在

```
unsigned char * command = new unsigned char(3); 
```

具有以下内容：

```
sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) -
__builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) 
(old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 
* (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && 
((unsigned long)old_end & pagemask) == 0)' failed. 
```

有人可以提供一些建议吗？我很茫然，我认为像这样传递双指针可以让我为用户分配内存......

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T22:27:54.260

线

```
(*response) = new unsigned char(response_size); 
```

应该读

```
(*response) = new unsigned char[response_size]; 
```

您的版本分配*了一个*无符号字符，并使用 value 对其进行初始化`response_size`。

# ubuntu - 从互联网上的服务器访问网站

> ID：10036857
> 
> 赞同：0
> 
> 时间：2012-04-05T22:25:15.983
> 
> 标签：ubuntu, dns, static-ip-address

如何在 Internet 上访问我的服务器？我希望它有一个 piezosystems.com 的域，可以在互联网上访问但不公开。我的路由器的 IP 地址为 10.0.0.1，comcast，而我的服务器为 10.0.05，无法将其路由到 Internet。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:28:31.630

您可以做的是使用动态 DNS 服务（从动态 DNS 服务提供商获得）注册一个域名（或免费获得一个），该服务将该名称映射到您的临时 IP 地址（借助一个小型守护程序你在你的网络中运行，也许在你的路由器上）。

路由器上的端口转发负责将请求映射到`10.`网络上的内部服务器。例如`80`，您的外部地址的端口可以转到`80`您的`10.0.0.2`盒子的端口，这可能是一个网络服务器。

你不需要一个好的域名`<yourname>.com`，你可以免费获得动态 DNS。

`piezosystems.com`似乎被采取；你必须买它。

动态 DNS 的提供商也可以处理您的域注册，因此可以说“一站式购物”非常容易。

PS我投票将其移至superuser.com。

# c# - 通过选择项目更改 ToolStripDropDownButton 文本

> ID：10036858
> 
> 赞同：4
> 
> 时间：2012-04-05T22:25:17.897
> 
> 标签：c#, winforms

我已经被这个问题困扰了一段时间，我希望得到一些方向或答案。如何根据自身内部的选定项目更改 ToolStripDropDownButton 的文本？

我有一个要显示的网格，但我想即时更改网格的大小。通过选择 ToolStripDropDownButton 并选择预先确定的网格大小列表，ToolStripDropDownButton 的文本应更改以向用户显示新的网格大小。

任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T01:05:05.680

我找到了我的问题的答案，谢谢大家的回答。

```
 private void changeGridSizeDropDownButton_DropDownItemClicked(object sender, ToolStripItemClickedEventArgs e)
    {
        if (e.ClickedItem != null)
        {
            changeGridSizeDropDownButton.Text = e.ClickedItem.Text;
            // This line converts my list gridsize options like 64, 32, and 16
            // and Parses that text into the new selected gridsize.
            gridSize = Int32.Parse(e.ClickedItem.Text);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:46:06.550

你会很容易看到。

```
 myToolStripDropDownButton.DropDownItems[0].Text = "New grid size"; 
```

index[0] 是您`DropBox`刚刚更改它以访问其他项目的第一项。

这是为了更改项目的名称。

如果您需要在某处更改文本`ToolStrip`独立于您`DropDownButton`检查选择的项目而不是更改

```
 myToolStrip.Items.Add("DefautlGridSize");
       myToolStrip.Items[0].Text("NewGridSize"); 
```

如果您不需要`ToolStrip`特别是我会考虑使用`ComboBox`with a`Label`会更简单地完成工作。

希望这有帮助

# arrays - 配对操作的大 O 表示法

> ID：10036859
> 
> 赞同：3
> 
> 时间：2012-04-05T22:25:20.683
> 
> 标签：arrays, algorithm, list, big-o

对于配对操作，我很难理解大 O 符号。问题很简单——为数组中给定的数字列表生成所有可能的对。

我的第一个猜测是有一个嵌套的 for/foreach 循环并生成对。这很容易，我得到每个 n，我分析 n 个其他数字，这给了我 n^2 的复杂性。

现在，如果我尝试进一步优化它并说 (1,4) 与 (4,1) 相同，那么对于像 1,2,3,4,5 这样的排序数组。我只以这种方式在嵌套的 for 循环中运行配对操作

```
for (i =0; i < count; i++) {
    for (j = i + 1; j < count - 1; j++)
    }
} 
```

在这种情况下，我只运行数组 < n^2 次。对于 7 个数字的样本大小，我运行循环 21 次以生成对。我知道这不可能是一个 log-n 运算，我很想说这个运算收敛到 n^2，但我从我的数学或理论课上记不住足够明确地回答这个问题。我该如何解决这个问题？

背景：我接受了一个类似问题的采访，这源于我和朋友的一次争论，如果一个列表中的配对操作可以比 n^2 更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T22:29:15.070

您是正确的，您执行的操作少于 n ^(2 次)。问题是你做的操作少了多少。

让我们考虑一下数组中有多少对。如果 n 个数字中的每一个都可以与 (n - 1) 个其他数字配对，则可能的配对总数为 n(n - 1)。原始 for 循环的每次迭代都会生成这些对中的一个，因此您生成的对的总数为 n ² - n，即 O(n ² )。

现在，如果您通过说 (1, 4) 和 (4, 1) 相同来消除重复对呢？在这种情况下，请注意您生成的一半对将是无关的 - 您将生成每对两次。这意味着对的数量是 (n ² - n) / 2。这个表达式小于 n ²，但请注意它仍然是 O(n ² )，因为 big-O 表示法忽略了常量。

换句话说 - 您生成的对数少于 n ²对是对的，但您正在创建的对数总数仍然是 O(n ² )。

更一般地说 - 如果您曾经将算法所做的工作总量减少了某个常数因子（例如，您将工作量减少了一半，或者将工作量减少了 100 倍），那么您并没有改变 big-O 运行时的算法。Big-O 完全忽略常量。为了减少 big-O 运行时间，您需要将总工作量减少一个大于常数的量；比如说，乘以 n、log n 等因子。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:27:13.247

请记住，大 O 表示法涉及隐含的乘法常数。因此，如果您的运行时间 <= kn^2 as n -> infinity，您的复杂性仍然是 O(n^2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:27:50.110

它仍然是 O(n^2)，因为现在您拥有的对数正好是引入订单要求之前的*一半。*除以二不会改变大 O。

# android - 主页按钮被覆盖，但在选项菜单打开时仍然完成

> ID：10036861
> 
> 赞同：0
> 
> 时间：2012-04-05T22:25:29.787
> 
> 标签：android, back-button, homescreen, overwrite

我已经覆盖了背部和home键的功能，防止用户把手机当手机使用。我们正在向客户（学生）提供电话，我们不希望他们以某种模式滥用电话。

问题是，主页按钮被禁用，但是当我第一次打开选项菜单然后不选择选项，而是按主页按钮时，主页仍然正常工作。

无论如何要覆盖它并使用布尔值，有时是，有时不是..

我现在得到的是：

```
@Override
public void onBackPressed() {    
     if (buttonslocked) {
           //backbutton blocked!
        } else {
           super.onBackPressed();
        }
    }

@Override
public void onAttachedToWindow()
{  //HOMEBUTTON
    if(buttonslocked)
    {   
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
          super.onAttachedToWindow();
    }
    else
    {
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_APPLICATION); 
        super.onAttachedToWindow();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:26:27.197

您不能覆盖主页按钮功能。

澄清一下，尽管您可能会看到一些*可能会*提供您正在寻找的东西的黑客攻击..**这是不受支持和不鼓励的！**

# mysql - MySQL 数据库设计 - 特定案例、列或附加表？

> ID：10036862
> 
> 赞同：1
> 
> 时间：2012-04-05T22:25:38.217
> 
> 标签：mysql, database

我真的只是一个业余爱好者，抱负太远了，也就是说，我正在努力找出创建数据库的正确方法，以便数据库更改不需要客户端重构，而且速度也很快。请回答，就好像我不太了解典型的开发或 DBA 术语一样。

**情况：**我试图确定每个用户评价了多少本书。如果一本书具有以下**任何两个**，我会认为它被评为：

```
-Overall rating (ratings table)
-sub rating (ratings table)
-tag (book_tags table)
-list (book_lists table)

*Related tables: users, tags, lists 
```

**问题：**我有 10 个子评级和两个总体评级都在评级表中，每一个都在一列中（猜测这很糟糕，但不确定）。我是否应该有一个评级表（12 行）和一个 book_ratings 表，其中评级表的每一行都是用户的评级类型？

```
-e.g. book_ratings: id  |  user_id  |  book_id  |  rating_id 
```

如果是，如果 book_ratings 表上有 500k 本书，每本书有 12 种评分类型，10,000 个用户和总共 50 亿行，会发生什么？那会跑得超级慢吗？另一个考虑是我将来可能想添加更多的子评分类型，这也是我认为更改它可能很有价值的部分原因，但工作量很大，所以我想先检查一下。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:35:03.680

是的，我会按照你的描述改变结构——它更灵活，更“正确”（标准化）。

只有当每个用户对所有书籍给出所有评级时，你才会有 50 亿行（这确实很糟糕），这似乎不太可能。绝大多数用户不会评价任何东西，绝大多数书籍不会吸引任何评价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:36:10.487

您应该为您的系统建模以使其可用和可扩展。当您想要汇总结果等时，拥有 12 个评级列会给您带来很多痛苦。这个网站上有很多这类痛苦的例子。

随着它的增长，您可以通过添加索引、集群、数据分区等进行优化。

但是，如果您知道您将立即拥有大量数据，您可能需要考虑一些“大数据”解决方案，并且可能采用 NoSQL 方式。

# ruby-on-rails - 如何在 HAML %li HTML 标记的 CSS 属性中成功插入 Ruby？

> ID：10036863
> 
> 赞同：3
> 
> 时间：2012-04-05T22:25:41.603
> 
> 标签：ruby-on-rails, css, haml, erb, interpolation

长期聆听者，第一次来电者。我是芝加哥 Code Academy 的 6 个月大的开发人员，我已经在这个问题上停留了几个小时。在此之前，我感谢您的所有帮助和时间。

我正在将 ERB 模板转换为 HAML。再培训局是：

```
<ul class="nav nav-list">
  <li class="nav-header">
    <%= navigation_header %>
  </li>
  <% @navigation_links.each do |link| %>
  <% if link[:name].present? %>
    <li <%= link[:name] == @topic ? "class='active'" : "" %>>
      <%= link_to link[:name], link[:url] %>
    </li>
  <% else %>
    <hr />
  <% end %>
  <% end %>
</ul> 
```

我遇到问题的 ERB 行是：

```
<li <%= link[:name] == @topic ? "class='active'" : "" %>> 
```

我已经测试了许多变体，尽可能多地阅读 HAML 参考资料，并专注于[本](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#attributes)节：

> 您还可以使用 #{} 插值在 HTML 样式的属性中插入复杂的表达式：

```
%span(class="widget_#{@widget.number}") 
```

...并搜索了 Google & [StackOverflow](https://stackoverflow.com/questions/6656915/can-you-interpolate-ruby-variables-within-haml-css)，但我无法得到正确的输出；HAML 一直无视内联 CSS。经过我所有的基础工作，我对这个版本非常有信心，但它没有奏效：

```
- @navigation_links.each do |link|
  - if link[:name].present?
    %li{ :class => "#{ link[:name] == @topic ? "active" : ""}" }
      = link_to link[:name], link[:url]
  - else
    %hr 
```

我也尝试过 :erb 过滤器，但无济于事：

```
%ul.nav.nav-list
  %li.nav-header
    = navigation_header
- @navigation_links.each do |link|
  - if link[:name].present?
    :erb
      <li <%= link[:name] == @topic ? "class='active'" : "" %>>
    = link_to link[:name], link[:url]
  - else
    %hr 
```

而且我还尝试了一个 :css 过滤器，但是失败了。

有什么想法可能是错的吗？这是我在 StackOverflow 上的第一个问题，所以如果我遗漏了一些有用的信息或违反了任何规则，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T22:27:35.463

```
<li <%= link[:name] == @topic ? "class='active'" : "" %>> 
```

您不需要变量插值。这很容易转换为 HAML，如下所示：

```
%li{:class => (link[:name] == @topic) && "active"}
%li{:class => (link[:name] == @topic) ? "active" : "" } 
```

在您完全包含或省略该值的情况下，首选第一个。来自[HAML 文档](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#class-and-id-attributes)：

> 如果指定了单个值并且其计算结果为 false，则将其忽略；否则它将被转换为字符串。例如：
> 
> ```
> .item{:class => @item.is_empty? && "empty"} 
> ```

# primefaces - 选中复选框时显示面板覆盖

> ID：10036864
> 
> 赞同：0
> 
> 时间：2012-04-05T22:25:43.967
> 
> 标签：primefaces

基本上它在标题中所说的。问题是现在无论是否选中它都会显示更改。

```
 <h:selectBooleanCheckbox id="checkbox" value="checkbox" >
                    </h:selectBooleanCheckbox>

                    <p:overlayPanel for="checkbox" widgetVar="descOverlay">
                        Test
                    </p:overlayPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:53:45.020

尝试这个...

```
<h:selectBooleanCheckbox id="chkbox" value="checkbox" ></h:selectBooleanCheckbox>

<p:overlayPanel for="chkbox" widgetVar="desc" showEvent="mousedown" hideEvent="mousedown">
           Test
</p:overlayPanel> 
```

**修改：**

```
<h:selectBooleanCheckbox id="checkbox" onclick="(this.checked ? descOverlay.show() : descOverlay.hide());"/>
<p:overlayPanel for="checkbox" widgetVar="descOverlay" id="descOverlay" showEvent="mouseup" hideEvent="mouseup" appendToBody="true">
    Test
</p:overlayPanel> 
```

# javascript - 如何将选项卡缩略图保存到本地存储？

> ID：10036871
> 
> 赞同：0
> 
> 时间：2012-04-05T22:26:35.593
> 
> 标签：javascript, google-chrome-extension

我正在尝试跟踪我的 google chrome 扩展的标签缩略图，并且希望能够将它们保存到我的本地存储中。目前，我有一些类似的东西：

```
chrome.tabs.captureVisibleTab(tab.windowId, function(thumb) {
     // other code here...
} 
```

如何将拇指保存到本地存储？或者我不应该将拇指保存到本地存储，而是在下次浏览器加载时重新加载这些缩略图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:20:52.380

的回调[`chrome.tabs.captureVisibleTab`](https://developer.chrome.com/extensions/tabs.html#method-captureVisibleTab)接收数据 URI（`data:image/png;base64,...`或`data:image/jpg;base64,...`）。这是一个纯字符串，可以保存`localStorage`如下：

```
chrome.tabs.captureVisibleTab(tab.windowId, function(thumb) {
    // Example: Save by key URL
    localStorage.setItem(tab.url, thumb);
}); // <-- Don't forget the closing parenthesis.. 
```

在此示例中，屏幕截图保存在与选项卡的 URI 相同的键中，使用[`localStorage.setItem`](https://stackoverflow.com/tags/local-storage/info).
您可以按如下方式枚举键：

```
for (var i=0; i<localStorage.length; i++) {
    var keyname = localStorage[i];            // Or localStorage.key(0);
    var thumb = localStorage.getItem(keyname);// <-- Retrieve the value
} 
```

如果您不喜欢拇指，可以使用以下`localStorage.removeItem`方法将其移除：

```
var keyname = 'https://stackoverflow.com/';  // For example
localStorage.removeItem(keyname); 
```

**注意**：`localStorage`限制为 5MB。考虑使用异步[`chrome.storage`](https://developer.chrome.com/extensions/storage.html)API 来持久化数据。

# objective-c - 本例中的原始访问器

> ID：10036877
> 
> 赞同：0
> 
> 时间：2012-04-05T22:27:20.130
> 
> 标签：objective-c, core-data, primitive, accessor

有人可以通过这个示例帮助我理解原始访问器：我不明白自动设置的内容以及这些方法的顺序：

1.人被创建后，`willSave`第一个方法被调用了吗？（我猜`save:`是这样，因为在我们创建一个人之后调用`insertNewObjectForEntityForName`）

2.在 RootViewController （第二段代码）中，我们调用`eyeColor`with : `person.eyeColor`:
a) in的 getter `eyeColor`，我们调用 : `[self eyeColorData]`,
b) **but** `setPrimitiveEyeColorData` is in `willSave`，只有`primitiveEyeColor`存在时才可以访问，
c) **but** `setPrimitiveEyeColor` is in`eyeColor`并且只调用如果`[self eyeColorData]`存在。所以，我对这段代码有点困惑，有人可以帮助我吗？

这是关于`eyeColor`和的代码`eyeColorData`：

```
@dynamic eyeColorData;
@dynamic eyeColor;

@interface AWPerson (PrimitiveAccessors)

- (UIColor *)primitiveEyeColor;
- (void)setPrimitiveEyeColor:(UIColor *)value; 
- (NSData *)primitiveEyeColorData;
- (void)setPrimitiveEyeColorData:(NSData *)value;

@end

+ (id)personInManagedObjectContext:(NSManagedObjectContext *)moc {
    return [NSEntityDescription 
            insertNewObjectForEntityForName:@"Person"
            inManagedObjectContext:moc];
}

+ (id)randomPersonInManagedObjectContext:(NSManagedObjectContext *)moc {
    AWPerson *randomPerson = [self personInManagedObjectContext:moc];
    //...
    randomPerson.eyeColor = [self randomColor]; //setter eyeColor
    return randomPerson;
}

+ (UIColor *)randomColor {
    static NSArray *colorsArray = nil;

    if( !colorsArray ) {
        colorsArray = [[NSArray alloc] initWithObjects:
                       [UIColor lightGrayColor],
                       [UIColor blueColor],
                       [UIColor greenColor], nil];
    }

    int randomIndex = arc4random() % [colorsArray count];
    return [colorsArray objectAtIndex:randomIndex];
}

- (void)willSave {
    UIColor *color = [self primitiveEyeColor];
    if( color ) {
        [self setPrimitiveEyeColorData:
         [NSKeyedArchiver archivedDataWithRootObject:color]];
    } else {
        [self setPrimitiveEyeColorData:nil];
    }

    [super willSave];
}

- (UIColor *)eyeColor {
    [self willAccessValueForKey:@"eyeColor"];
    UIColor *tmpValue = [self primitiveEyeColor];
    [self didAccessValueForKey:@"eyeColor"];
    if( tmpValue ) return tmpValue;

    NSData *colorData = [self eyeColorData];
    if( !colorData ) return nil;

    tmpValue = [NSKeyedUnarchiver unarchiveObjectWithData:colorData];
    [self setPrimitiveEyeColor:tmpValue];

    return tmpValue;
} 
```

在 RootViewController 中：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    AWPerson *person = [[self fetchedResultsController] objectAtIndexPath:indexPath];

    [cell setBackgroundColor:person.eyeColor];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:38:48.477

**编辑 - 添加了关于`willSave`**回答您的第一个问题的信息，只要保存对象（使用该方法）
就会调用 willSave 。`save`因此，调用的第一个方法将是类方法之一（用于创建对象）或 init，然后，由于您说对象在创建后立即保存，因此将调用 willSave。

我认为理解这一点的关键是要认识到`eyeColor`,`primitiveEyeColor`和它们的设置器最终都与内存中的同一个变量（名为 eyeColor 的 iVar）进行交互。区别在于是否调用了 setter/getter（在本例中为`- (UIColor *)eyeColor {`函数）中的代码。

只有几种不同的方式可以与之交互：

1.  `[self primitiveEyeColor];` - 这直接读取 iVar 的值。
2.  `[self setPrimitiveEyeColor:tmpValue];` - 这直接设置 iVar 的值。
3.  `[self eyeColor]` - 这将调用`- (UIColor *)eyeColor`您的类中的方法（最终应该检索 iVar 或其表示形式）。
4.  `[self setEyeColor:value]` - 这会调用`- (void)setEyeColor:(UIColor *)newColor`你类中的方法。请注意，在这种情况下它不存在，因此它只是调用原始方法（并执行 KVO 魔术）。

在此特定代码中，他们使用“非标准持久属性”，因为 NSManagedObject 不支持 UIColor。[在这里](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html)阅读。

**编辑 2**
回答您的其他问题：

> `randomPerson.eyeColor = [self randomColor]`a)可以使用`[self primitiveEyeColor]`(in ) 访问颜色`willSave`？

是的，一旦设置了 eyeColor（通过`setEyeColor`方法或`setPrimitiveEyeColor`方法），您可以从中读取它`primitiveEyeColor`，它将返回相同的值。请注意，一旦它被设置，`eyeColor`并`primitiveEyeColor`返回相同的值，并且可以从你的类中的任何地方调用（不仅仅是`willSave`）。

> b) 所以 if `[self primitiveEyeColor] != nil`: in `eyeColor`，因此 : 行 `if( tmpValue ) return tmpValue;`应该总是为真......我们什么时候可以取消归档`eyeColorData`if`UIColor *tmpValue = [self primitiveEyeColor]`总是返回 in `-(UIColor *)eyeColor`？

如果为 nil ，此方法仅查看`eyeColorData`（在最后一次调用期间存储的）。这是一种优化，因为我们可以跳过所有这些，如果我们愿意，每次都可以取消存档。在这种情况下，一旦一个值被取消归档或设置为一个新值，它总是存储该值并返回**它**，这样我们就不必再次调用 unarchive。 `willSave``eyeColor``eyeColorData`

 **此外，我认为这里确实存在错误（尽管它可能是设计使然）。假设我们执行以下步骤：

1.  设置`eyeColor`为随机颜色（比如说蓝色）。
2.  保存对象。
3.  设置`eyeColor`为零

现在，如果您使用`[self eyeColor]`它检查颜色，将看到primitiveEyeColor 已重新`nil`归档`eyeColorData`并再次取消归档，因此返回之前存储的蓝色。您可能应该覆盖 set 函数，以便它设置`eyeColorData`为`nil`when`eyeColor`设置为`nil`。这样，`eyeColor`在将其设置为之后检查的值将按预期`nil`返回。`nil`**

# ruby-on-rails - 在两个关联模型中验证彼此的存在

> ID：10036882
> 
> 赞同：1
> 
> 时间：2012-04-05T22:27:32.567
> 
> 标签：ruby-on-rails, ruby, associations

我有以下两个模型：

```
class Parent < ActiveRecord::Base
  has_one :child, dependent: :destroy
  validates :child, presence: true
end

class Child < ActiveRecord::Base
  belongs_to :parent
  validates :parent, presence: true
end 
```

我想创建父对象。

如果我执行以下操作： `Parent.create!`或`Factory(:parent)`
引发异常：`ActiveRecord::RecordInvalid: Validation failed: Child can't be blank`

但出于同样的原因，我无法在没有 Parent 对象的情况下创建 Child 对象 - 我需要先创建 Parent 对象才能通过存在验证。看起来我在这里有某种无限递归。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:30:38.493

更新：

下面的代码在我的环境中运行良好（Rails3.2.2，ruby 1.8.7）

```
# parent.rb
class Parent < ActiveRecord::Base
  has_one :child
  validates :child, :presence => true
end
# child.rb
class Child < ActiveRecord::Base
  belongs_to :parent
  validate :parent, :presence => true
end

# parent_test.rb
require 'test_helper'
class ParentTest < ActiveSupport::TestCase
  test "should be saved" do 
    parent = Parent.new(:name => "111")
    child = Child.new(:name => "222", :parent => parent)
    parent.child = child
    parent.save!
    puts "after saved, parent: #{parent.inspect}"
    puts "after saved, child: #{child.inspect}"
    assert parent.id > 0
    assert child.id > 0
  end
end 
```

运行此测试并得到：

```
Started
after saved, parent: #<Parent id: 980190963, name: "111", created_at: "2012-04-05 23:19:31", updated_at: "2012-04-05 23:19:31">
after saved, child: #<Child id: 980190963, name: "222", parent_id: 980190963, created_at: "2012-04-05 23:19:31", updated_at: "2012-04-05 23:19:31">
.
Finished in 0.172716 seconds.

1 tests, 2 assertions, 0 failures, 0 errors 
```

以前的答案 =================

尝试分别初始化它们，然后添加关联，最后保存它们。

```
parent = FactoryGirl.build(:parent)
child = FactoryGirl.build(:child, :parent => parent)
parent.child = child

parent.save
child.save  # seems this line of code is redundant?  I am not sure. 
```

有关“构建，创建”的更多详细信息，请参见其官网：[https ://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)

# c# - 比较值是否在范围内的最快方法

> ID：10036884
> 
> 赞同：0
> 
> 时间：2012-04-05T22:27:41.443
> 
> 标签：c#, tuples

我有一堂课

```
public class VitalSign
{
    public double? Temprature { get; set; }
    public double? SystolicBP { get; set; }
    public double? DiastolicBP { get; set; }
    public double? PulseRate { get; set; }
    public double? Respirations { get; set; }
} 
```

和一个 Range 类

```
 public  class VitalRange
{
    public Tuple<double,double> TemperatureRange { get; set; }
    public Tuple<double, double> SystolicBPRange { get; set; }
    public Tuple<double, double> DiastolicBPRange { get; set; }
    public Tuple<double, double> RespirationsRange { get; set; }
    public Tuple<double, double> PulseRange { get; set; }
} 
```

与 VitalRange（温度）相比，我必须比较我的属性（比如温度）是否超出范围。在这种情况下我可以使用元组还是可以为范围设置 KVP？我会将一个巨大的列表与 VitalRange 进行比较。检查属性是否在范围内的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:48:41.763

我不知道你的问题是什么，很简单`if`，但是你可以使用扩展方法来封装它：

```
public static bool IsInRange(this double? input, Tuple<double, double> range)
{
   if (!input.HasValue)
      return false;
   return input >= range.Item1 && input <= range.Item2;
} 
```

并像这样使用它：

```
VitalRange sampleRanges = ....;
var validTempers = vitalSignList.Where(x=>x.Temprature.IsInRange(sampleRange.VitalRange); 
```

我想不出更快的方法，但我更喜欢封装。

# php - 在分页中隐藏偏移

> ID：10036888
> 
> 赞同：0
> 
> 时间：2012-04-05T22:27:50.537
> 
> 标签：php, apache, .htaccess, url

我有以下网址结构

```
http://www.mydomain.com/vpn-offers-p3.html 
```

此页面应重定向到

```
http://www.mydomain.com/vpn-offers.php?st=60&page=3 
```

> 这里 st 是分页的偏移量，会随着页面的变化而变化，而 page 是当前页码

我正在尝试以这种方式生成 url

```
<? if($st<$total-$rw){?><a href="<?
 echo "http://www.mydomain.com/vpn-providers-p";?><? echo$offset=$st+$rw."-".$pagenext=$page+1 ;?> class="nextprev">Next</a> 
```

**请注意，它也会在链接中显示偏移值**

我已经建立了以下“htaccess”规则

```
R`ewriteRule ^vpn-providers-p([^-]*)\.html$ /vpn-providers.php?st=(.*)&page=$1 [L]` 
```

如果你稍加注意，你会看到第一个 url 没有传递 offset 的值

有人可以告诉我如何在 URL 中隐藏偏移变量吗？虽然我需要正确重定向页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:30:20.107

@victor 他想隐藏查询字符串而不是删除它

在 url 中没有隐藏变量之类的东西！它应该以一种或另一种方式出现在网址中

无论如何，如果确实有必要，您可能可以在将用户重定向到新页面之前使用 cookie 和 javascript 来存储新变量，或者在这种情况下，您可以在不通过 url 的情况下找出偏移量

```
 offset =  current page -1 * per page 
```

最好改变

```
^vpn-providers-p([^-]*)\.html$
to
^vpn-providers-p([0-9]*)\.html$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:20:45.267

`.htaccess`发现这篇关于使用指令 从 URL 中删除查询字符串的帖子：http: [//briancray.com/2010/03/18/htaccess-hack-remove-url-query-strings/](http://briancray.com/2010/03/18/htaccess-hack-remove-url-query-strings/)

和

[mod_rewrite：从 URL 中删除查询字符串？](https://stackoverflow.com/questions/3457022/mod-rewrite-remove-query-string-from-url)

和

[http://www.webmasterworld.com/apache/4171357.htm](http://www.webmasterworld.com/apache/4171357.htm)

HTH，维克多

# java - 如果特定测试失败，则停止 JUnit 套件

> ID：10036894
> 
> 赞同：23
> 
> 时间：2012-04-05T22:28:08.850
> 
> 标签：java, junit

我有一个 JUnit 测试套件，格式如下：

```
@RunWith(Suite.class)
@Suite.SuiteClasses( { xx.class, yy.cass })

public class AllTests {

public static Test suite() {
    TestSuite suite = new TestSuite(AllTests.class.getName());
    //$JUnit-BEGIN$

    //$JUnit-END$
    return suite;
}
} 
```

然后这会像这样调用 vanilla 测试：

```
public class xxx {

@Test
public void test () throws {
    ... 
```

我有一种情况，如果在第一次测试中出现错误或失败，我想停止测试套件的其余部分运行。但是其他的错误/失败是可以的，套件应该尽可能多地完成其他测试。基本上，第一个测试失败表明运行其余测试是不安全的。

这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-14T03:59:29.240

首先你需要junit RunListener：

```
import org.junit.runner.notification.Failure;
import org.junit.runner.notification.RunListener;
import org.junit.runner.notification.RunNotifier;

public class FailureListener extends RunListener {

    private RunNotifier runNotifier;

    public FailureListener(RunNotifier runNotifier) {
        super();
        this.runNotifier=runNotifier;
    }

    @Override
    public void testFailure(Failure failure) throws Exception {
        super.testFailure(failure);
        this.runNotifier.pleaseStop();
    }
} 
```

然后准备一个套件：

```
public class StopOnFailureSuite extends Suite {

    public StopOnFailureSuite(Class<?> klass, Class<?>[] suiteClasses) throws InitializationError {
        super(klass, suiteClasses);
    }

    public StopOnFailureSuite(Class<?> klass) throws InitializationError {
        super(klass, klass.getAnnotation(SuiteClasses.class).value());
    }

    @Override
    public void run(RunNotifier runNotifier) {
        runNotifier.addListener(new FailureListener(runNotifier));
        super.run(runNotifier);
    }
} 
```

并运行您的套件：

```
@RunWith(StopOnFailureSuite.class)
@Suite.SuiteClasses({
    FirstTestClass.class,
    SecondTestClass.class,
    ...
}) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T23:04:12.737

打电话有什么问题`System.exit()`？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-06T03:55:15.890

如果是**第一次**测试，则考虑将其验证移至 @BeforeClass 并在失败时抛出异常。然后只有 @AfterClass 方法会在这个异常的情况下运行。

当然，这样您就缺少在测试设置方法中创建的所有夹具工件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-05T13:01:33.977

就像您的答案一样，但`@Before`在集成测试中使用，我做了这样的事情：

```
public class FooTest {

   private static boolean bar;

   @BeforeClass
   public static void setUpBeforeClass() throws Exception {
         bar = false;
   }

   @Before
   public void setUp() throws Exception {
         assertTrue(bar);
   }

   @Test
   public void test() {
         System.out.println("something");
         assertTrue(true);
   }

   @Test
   public void test1() {
         System.out.println("Something2");
         assertTrue(true);
   }
} 
```

问候！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-06T14:21:33.400

根据 Hiro2k 的回答（谢谢！），我使用了以下解决方案。这有点骇人听闻，但它确实有效。

可以阻止其他测试运行的测试位于@Suite.SuiteClasses 列表的顶部。然后该测试具有以下内容：

```
private static boolean shouldStopRestOfSuite = false;

    @Test
    public void test () throws Throwable {
    try {
            ... run some test code...
    }
    catch (Throwable e) {
        shouldStopRestOfSuite = true;
        throw e;
    }
} 
```

请注意，上面确实需要捕获 Throwable （不是异常），因此它可以捕获断言错误。它还会重新抛出错误，以便由 JUnit 记录以供分析。

然后还有另一种测试方法：

```
@Test
public void testKillIfNeeded () throws Exception {
    if (!shouldStopRestOfSuite) {
        return;
    }

    System.out.println ("Test suite killed due to dangerous error / failure");
    System.exit(1);
} 
```

上面是第二个运行，将终止 JUnit 进程。

使用此方法，如果出现问题，JUnit 测试不会因失败/错误而结束，但会记录失败/错误以供 JUnit 分析，并且不会运行进一步的测试。

不太漂亮，但它可以完成工作:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-15T05:11:38.330

首先，您应该在运行第二次测试之前捕获一个错误并进行检查。

```
@Rule
public ErrorCollector collector = new ErrorCollector(); 
```

**1.添加错误。**

```
collector.addError(new Throwable("first thing went wrong")); 
```

**2\. 依赖运行前检查**。

```
collector.checkThat(getResult(), not(containsString("ERROR!"))); 
```

参考 - [ErrorCollector](http://junit.org/junit4/javadoc/latest/org/junit/rules/ErrorCollector.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T03:41:27.800

您是否正在使用 ant 运行测试？

您可以编写一个自定义测试侦听器。您可以在 ant [http://ant.apache.org/manual/Tasks/junit.html](http://ant.apache.org/manual/Tasks/junit.html) ( enableTestListenerEvents) 中进行设置。

# android - ZXing 的格式？

> ID：10036902
> 
> 赞同：0
> 
> 时间：2012-04-05T22:28:57.403
> 
> 标签：android, barcode, zxing

我只是想知道 Zxing 的格式是什么。

`String format = intent.getStringExtra("SCAN_RESULT_FORMAT");`

你认为我可以删除这行代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:04:58.983

根据[后备箱中的最新版本](http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/Contents.java)：

```
 /**
     * Call intent.getStringExtra(RESULT_FORMAT) to determine which barcode format was found.
     * See Contents.Format for possible values.
     */
    public static final String RESULT_FORMAT = "SCAN_RESULT_FORMAT"; 
```

`Contents.Format`实际上不存在（不再存在），但是浏览代码似乎可以假设“格式”已被“类型”取代。`Contents.Type`定义了以下可能性：

```
public static final String TEXT = "TEXT_TYPE";
public static final String EMAIL = "EMAIL_TYPE";
public static final String PHONE = "PHONE_TYPE";
public static final String SMS = "SMS_TYPE";
public static final String CONTACT = "CONTACT_TYPE";
public static final String LOCATION = "LOCATION_TYPE"; 
```

换句话说：它为您提供有关由扫描的条形码编码的数据类型的信息。如果你不关心类型，你可以简单地忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:56:36.737

您是在谈论使用意图集成器吗？如果是这样，这就是您刚刚扫描的那种条形码。我不知道你的目的是什么，但如果你想支持更多的条码，你可能想考虑这条线更重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T06:04:56.083

这是一个命名扫描条形码格式的字符串，如“QR_CODE”或“UPC_A”。值来自[BarcodeFormat](http://code.google.com/p/zxing/source/browse/trunk/core/src/com/google/zxing/BarcodeFormat.java)类。你能把它去掉吗？当然，如果你不需要，不要写这行代码！

# c# - 在 MVC3 视图中使用嵌入式 javascript 或单独的 .js 文件更好吗？

> ID：10036903
> 
> 赞同：9
> 
> 时间：2012-04-05T22:29:03.113
> 
> 标签：c#, javascript, asp.net-mvc-3

有人告诉我，最好将 Javascript 代码放在单独的文件中以保持关注点分开，虽然这个想法引起了我的共鸣，但我觉得它并不实用。

这可能只是我的经验不足，因此提出了这个问题。

这是一个清晰的示例，我发现将代码放在视图中比将其放在单独的 javascript 文件中要好。

在我的视图中，我需要调用一个 JQueryUI 对话框，并使用我的模型名称动态设置标题。

```
$("#thumbs img").click(function () {
    var url = $(this).attr("src");
    $(".image-popup").attr("src", url);

    return $("#image-popup").dialog({
        modal: true,
        closeOnEscape: true,
        minHeight: 384,
        minWidth: 596,
        resizable: false,
        show: {
            effect: 'slide',
            duration: 500,
            direction: 'up'
        },
        hide: {
            effect: 'slide',
            duration: 250,
            direction: 'up'
        },
        title: '@Model.Product.Name'
    });
}); 
```

注意：

```
title: '@Model.Product.Name' 
```

如您所见，如果我在视图中使用 Javascript，我可以*访问强类型模型。*如果我使用单独的 Javascript 文件，情况并非如此。

我做错了吗，有什么我没有看到的吗？

如果我要使用单独的文件，由于我无法从 Javascript 文件中访问模型属性，它会是什么样子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T22:31:54.587

单独的js文件：

```
<div id="thumbs">
    <img data-dialog-title="@Model.Product.Name" src="[whatever url]" />
</div?

$("#thumbs img").click(function () {
    var title = $(this).data('dialog-title');
    var url = $(this).attr("src");
    $(".image-popup").attr("src", url);

    return $("#image-popup").dialog({
        modal: true,
        closeOnEscape: true,
        minHeight: 384,
        minWidth: 596,
        resizable: false,
        show: {
            effect: 'slide',
            duration: 500,
            direction: 'up'
        },
        hide: {
            effect: 'slide',
            duration: 250,
            direction: 'up'
        },
        title: title
    });
}); 
```

使用 HTML5 data-* 属性通过 dom 不显眼地访问模型属性。上面的 javascript 作为外部文件可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:57:13.890

如果您不能使用上述 HTML5 数据属性，那么也许[http://nuget.org/packages/RazorJS](http://nuget.org/packages/RazorJS)可以解决问题，似乎可以解决您的问题。

# java - n维空间的遍历

> ID：10036904
> 
> 赞同：7
> 
> 时间：2012-04-05T22:29:05.690
> 
> 标签：java, algorithm, search, recursion, multidimensional-array

我正在尝试编写一个算法，让我遍历 n 维空间内的所有所需点，以找到函数 f(x) 的最小值，其中 x 是大小为 n 的向量。

显然，搜索 2-d 或 3-d 空间非常简单，您可以简单地执行以下操作：

```
for(int i = 0; i < x; i++) {
    for(int j = 0; j < y; j++) {
        //and so on for however many dimensions you want 
```

不幸的是，对于我的问题，空间的维数不是固定的（我正在为统计程序中的许多函数编写一个通用的最小值查找器），所以我必须为我想使用的每个 n 值编写循环 -最终可能会相当大。

我一直在努力弄清楚如何使用递归来做到这一点，但看不到解决方案——尽管我确信那里有一个。

该解决方案不必是递归的，但它必须是通用且高效的（该嵌套循环中最内层的行将被调用很多......）。

我表示搜索量的方式是一个二维数组：

```
double[][] space = new double[2][4]; 
```

这将表示一个 4d 空间，在数组的位置 0 或 1 的每个维度中分别具有最小和最大界限。例如：

```
dim         0   1   2   3
    min(0):-10  5  10  -0.5
    max(1): 10 55  99   0.2 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T22:36:09.703

这是一般的想法：

```
interface Callback {
   void visit(int[] p); // n-dimensional point
}

// bounds[] - each number the limits iteration on i'th axis from 0 to bounds[i]
// current - current dimension
// callback - point
void visit(int[] bounds, int currentDimension, int[] p, Callback c) {
   for (int i = 0; i < bounds[currentDimension]; i++) {
        p[currentDimension] = i;
        if (currentDimension == p.length - 1) c.visit(p);
        else visit(bounds, currentDimension + 1, p, c);
   }
}

/// now visiting
visit(new int[] {10, 10, 10}, 0, new int[3], new Callback() {
   public void visit(int[] p) {
        System.out.println(Arrays.toString(p));
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:38:22.550

我会坚持使用递归，并将`Object`其用作参数，并带有一个额外的参数`dim`，并在您达到 1 的深度时将其转换为相关数组 [在我的示例中，它是一个`int[]`]

```
public static int getMin(Object arr, int dim) {
    int min = Integer.MAX_VALUE;
    //stop clause, it is 1-dimensional array - finding a min is trivial
    if (dim == 1) { 
        for (int x : ((int[])arr)) {
            min = Math.min(min,x);
        }
    //else: find min among all elements in an array of one less dimenstion.
    } else { 
        for (Object o : ((Object[])arr)) { 
            min = Math.min(min,getMin(o,dim-1));
        }
    }
    return min;
} 
```

例子：

```
public static void main(String[] args) {
    int[][][] arr = { { {5,4},{2}, {35} } , { {2, 1} , {0} } , {{1}}};
    System.out.println(getMin(arr, 3));
} 
```

将产生：

```
0 
```

这种方法的优点是不需要对数组进行任何处理 - 您只需按原样发送它，并将维度作为参数发送。
不利的一面是类型 [un]safety，因为我们动态地将其`Object`转换为数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T23:04:51.437

n 维数组可以展平为一维数组。您需要对这些事情进行数学计算：

*   计算所需的一维数组的大小。
*   找出从 n 维索引转换回一维索引所需的公式。

这就是我要做的：

*   将 n 维数组大小和索引表示为`int[]`。因此，5x7x1​​3x4 4 维数组的大小表示为 4 元素数组“{ 5, 7, 13, 4 }”。
*   n 维数组表示为一维数组，其大小是每个维度大小的乘积。所以一个 5x7x1​​3x4 的数组将被表示为一个大小为 1,820 的平面数组。
*   n 维索引通过乘法和加法转换为平面数组中的唯一索引。因此，5x7x1​​3x4 数组中的索引 <3, 2, 6, 0> 被转换为`3 + 2*5 + 6*5*7 + 0*5*7*13 == 223`. 要访问该 4 维索引，请访问平面数组中的索引 223。
*   您还可以从平面数组索引向后转换为 n 维索引。我将把它留作练习（但它基本上是在做 n 模计算）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T22:45:27.830

另一种选择是从 0 迭代到 x*y*z*...，就像在二进制和十进制表示之间转换数字时所做的那样。这是一个**非递归**解决方案，因此您不会遇到性能问题。

```
ndims = n;
spacesize = product(vector_sizes)
int coords[n];

for (i = 0; i < spacesize; i++) {
    k = i;
    for (j = 0; j < ndims; j++ ) {
         coords[j] = k % vector_sizes[j];
         k /= vector_sizes[j];
    }
    // do something with this element / these coords
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T23:06:38.037

这将遍历值列表（整数）并选择每个列表的最小值：

```
import java.util.*;
/**
    MultiDimMin

    @author Stefan Wagner
    @date Fr 6\. Apr 00:37:22 CEST 2012

*/
public class MultiDimMin
{
    public static void main (String args[])
    {
        List <List <Integer>> values = new ArrayList <List <Integer>> ();
        Random r = new Random ();
        for (int i = 0; i < 5; ++i)
        {   
            List<Integer> vals = new ArrayList <Integer> ();            
            for (int j = 0; j < 25; ++j)
            {   
                vals.add (100 - r.nextInt (200));   
            }
            values.add (vals);
        }
        showAll (values);
        List<Integer> res = multiDimMin (values);
        show (res);
    }

    public static int minof (List <Integer> in)
    {
        int res = in.get (0);
        for (int v : in)
            if (res > v) res = v;
        return res;
    }

    public static List<Integer> multiDimMin (List <List <Integer>> in)
    {
        List<Integer> mins = new ArrayList <Integer> ();
        for (List<Integer> li : in) 
            mins.add (minof (li));
        return mins; 
    }

    public static void showAll (List< List <Integer>> lili)
    {
        for (List <Integer> li : lili) {
            show (li);
            System.out.println ();
        }
    }   

    public static void show (List <Integer> li)
    {
        for (Integer i: li) {
            System.out.print (" " + i);
        }
        System.out.println ();
    }   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T22:35:42.227

功能不只是：

```
Function loopDimension(int dimensionNumber)
    If there is no more dimension, stop;
    for(loop through this dimension){
         loopDimension(dimensionNumber + 1);
    } 
```

# product - 购物。收集所有变体，但仅显示每个相同变体中的一个

> ID：10036905
> 
> 赞同：2
> 
> 时间：2012-04-05T22:29:09.820
> 
> 标签：product, shopify, variants

我正在尝试为 Shopify 中的产品单一视图开发自定义视图。我很难找到扩展标准功能的资源。标准功能只允许下拉菜单或单选按钮。

前任

**size|color|sex**每个产品可以有多个条目。

因此，如果我有**L|Black|Male**和**M|Black|Male**作为产品变体
，Shopify 将这些中的每一个显示为单个选项，而不是可供选择的单个选项列表。

我想让我的产品选择看起来类似于这个商店的产品页面 [http://www.petermanningnyc.com/products/tshirt](http://www.petermanningnyc.com/products/tshirt)

我似乎无法以一种可以复制类似功能的方式从 Shopify 输出数据。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:25:46.567

Shopify wiki 上的此页面应该是您正在寻找的内容：[http ://wiki.shopify.com/Tutorial_on_editing_existing_theme_to_use_products_with_multiple_options](http://wiki.shopify.com/Tutorial_on_editing_existing_theme_to_use_products_with_multiple_options)

它描述了如何将一些 javascript 添加到您的主题中，以将产品选项显示为单独的下拉列表。享受！

# django - 在查询集上寻找 Django any() 和 all()

> ID：10036908
> 
> 赞同：0
> 
> 时间：2012-04-05T22:29:31.187
> 
> 标签：django, combinations, django-queryset

我有一个包含 13 个复选框的表单，这些复选框共同构成了我的搜索条件……除了我还为 ALL 或 ANY 添加了一对单选按钮。

我希望能摆脱一些优雅的事情，比如：

```
priority_ids = request.GET.getlist("priority")  # checkboxes
collection   = request.GET.get("collection")    # radio buttons
priorities = []
for priority_id in priority_ids:
    priorities.append(Q(focus__priority=priority_id))
if   (collection == "any"): qset = any(priorities)
elif (collection == "all"): qset = all(priorities) 
```

但是，any() 和 all() 返回一个布尔值，而不是我可以在过滤器中使用的查询集。我想要一个与“Q(...) | Q(...) | Q(...)”或“Q(...) & Q(.. .) & Q(...)" 适用于 1 到 13 个标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:56:00.307

Django 无需为此做任何事情。您只需要将您的`Q`-s 与`&`和 分别`|`以一个简单的循环或更紧凑的方式与`reduce`.

关于术语，在我看来，您正在调用`Q`查询集，但事实并非如此。它是查询集上的过滤器。像下面这样的东西应该可以工作：

```
priority_ids = request.GET.getlist("priority")
collection   = request.GET.get("collection")
priority_filters = []
for priority_id in priority_ids:
    priority_filters.append(Q(focus__priority=priority_id))

base_qs = SomeModel.objects.all()

if collection == "any":
   filtered_qset = base_qs.filter(reduce(operator.or_, priority_filters))
elif collection == "all":
   filtered_qset = base_qs.filter(reduce(operator.and_, priority_filters)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-14T17:27:58.730

您可以使用 Q() 动态查询，如下所示...

```
from django.db.models import Q 
from priority_app.models import Priority  # get your model identified

#(whatever API place you had this):

    priority_id = request.GET.get("priority")   #getlist is isn't a proper list
    field_id = request.query_params.get('collection')
    if priority_id:
        priority_id_list = list(map(str.strip, priority_id.split(",")))

        dynamic_query_filters = Priority.objects.none()
        for a_item in priority_id_list:
            if collection == "any":
                dynamic_query_filters |= (Q(id=a_item))    # OR query
            else:
                dynamic_query_filters &= (Q(id=a_item))   # AND query

        queryset = Priority.objects.filter(dynamic_query_filters)   
        # you will notice, it executes in order of "query", maybe take them in different variables and chain them accordingly. 
```

# c - 测量过程及其子进程的时间

> ID：10036909
> 
> 赞同：0
> 
> 时间：2012-04-05T22:29:38.170
> 
> 标签：c, fork

我正在做一些涉及 fork、vfork 和克隆功能的分配。我需要测量父进程和所有子进程的用户、系统、实时。测量用户和系统时间很简单，要测量实时，我从 sys/times.h 调用时间，存储值和子进程调用

```
_exit(times(NULL)-procReal) 
```

我将此值添加到其他变量（请参见下面的代码）。

我的问题是，我存储的值应该在 fork 之前还是在 fork 之后计算？

```
procReal=times(NULL);//here
#ifdef FORK
        pid=fork();
#elif VFORK
        pid=vfork();
#endif
 procReal=times(NULL);//or maybe here 
    if ( pid <0)
        error_sys_f("fork failed");
    else if (pid ==0)
    {
        foo();  
    }
    else
    {
        wait(&statLoc);
        if (WIFEXITED(statLoc))
            childrenReal+=WEXITSTATUS(statLoc);
        else
            error_sys_f("unnormal exit from children");
    } 
```

procReal 是一个全局变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:46:34.833

当你分叉一个孩子时，在孩子的地址空间中有另一个 procReal 副本，与父级的不同。该值应在父“之前”分叉和父“之后”等待中计算。

# c# - 无法将 Json 字符串反序列化为包含对象数组的对象

> ID：10036911
> 
> 赞同：2
> 
> 时间：2012-04-05T22:29:58.867
> 
> 标签：c#, json, web-services, javascriptserializer

我有一个从 Web 服务调用返回的 JSON 对象，如下所示：

```
{"responseData":{"results":[{
    "mothraId":null,
    "studentId":null,
    "bannerPIdM":null,
    "externalId":null,
    "dFirstName":null,
    "dFullName":null,
    "dLastName":null,
    "dMiddleName":null,
    "modifyDate":"2012-02-24 06:24:33",
    "oFirstName":"Joe",
    "oFullName":"Joe R Smith",
    "oLastName":"Smith",
    "oMiddleName":"R",
    "iamId":"999999999",
    "ppsId":"999999999",
    "oSuffix":null,
    "dSuffix":null,
    "isEmployee":null,
    "isHSEmployee":null,
    "isFaculty":"N",
    "isStudent":"N",
    "isStaff":"N",
    "isExternal":"N",
    "privacyCode":null}]},
"responseStatus":0,
"responseDetails":""} 
```

我正在尝试使用以下内容将 JSON 字符串反序列化为对象：

```
ReturnObject allInOne = js.Deserialize<ReturnObject>(jsonResponse); 
```

ReturnObject 定义如下：

```
public class ReturnObject
{
    public String responseDetails { get; set; }
    public String responseCode { get; set; }
    public ResponseData responseData { get; set; }

    public class ResponseData
    {
        public List<PeopleResult> results { get; set; }

        public class PeopleResult{

            String iamId { get; set; }
            String mothraId { get; set; }
            String ppsId { get; set; }
            String studentId { get; set; }
            String bannerPIdM { get; set; }
            String externalId { get; set; }
            String oFirstName { get; set; }
            String oMiddleName { get; set; }
            String oLastName { get; set; }
            String oFullName { get; set; }
            String oSuffix { get; set; }
            String dFirstName { get; set; }
            String dMiddleName { get; set; }
            String dLastName { get; set; }
            String dSuffix { get; set; }
            String dFullName { get; set; }
            String isEmployee { get; set; }
            String isHSEmployee { get; set; }
            String isFaculty { get; set; }
            String isStudent { get; set; }
            String isStaff { get; set; }
            String isExternal { get; set; }
            String privacyCode { get; set; }
            String modifyDate { get; set; }
        }
    } 
```

不幸的是，除了 List 结果中的单个 PeopleResult 对象的内容之外，我得到了所有内容。PeopleResult 中所有属性的值为空。ReturnObject 类的结构或命名是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:33:14.200

PeopleResult 类中的所有属性都不是公共的。

# php - 选择一个以前没有被选中的随机行？

> ID：10036913
> 
> 赞同：0
> 
> 时间：2012-04-05T22:30:14.877
> 
> 标签：php, mysql, math

让我们把它放在最简单的表中，一个包含两个字段的表：“item_id”和“times_seen”。

```
| item_id | times_seen |
----------+-------------
|   1001  |     48     |
|   1002  |     25     |
|   1003  |      1     |
|   1004  |     12     |
|   1005  |     96     |
|   1006  |     35     | 
```

我试图找到一种随机选择一行的方法，但优先考虑以前没有被选中的项目。

*（显然，将发送第二个查询以在选择“times-seen”字段后增加它）*

虽然我目前的“项目”是一个 php/mysql 项目，但如果可能的话，我想要与语言无关的解决方案。我宁愿有一个可以在其他地方适应的基于数学的解决方案。不过，我并不反对 php 解决方案。我只想能够理解代码是如何工作的，而不是仅仅复制和粘贴它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:36:08.153

1.  获取表中的所有行
2.  确定最大值`times_seen`
3.  为每一行分配一个权重`max - times_seen`
4.  根据权重从列表中选择

第 4 步是棘手的​​部分，但您可以这样做：

```
$max = 1;
$rows = array();

$result = mysql_query("SELECT * FROM table");
while ($row = mysql_fetch_array($result)){
    $max = max($max, $row['times_seen']);
    $rows[] = $row;
}

$pick_list = array();
foreach ($rows as $row){
    $count = $max - $row['times_seen'];
    for ($i=0; $i<$count; $i++) $pick_list[] = $row['item_id'];
}
shuffle($pick_list);
$item_id = array_pop($item_id); 
```

要在 SQL 中完成所有操作：

```
SELECT * 
FROM table 
ORDER BY RAND( ) * ( MAX( times_seen ) - times_seen ) DESC
LIMIT 1 
```

这将选择权重与`times_seen`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:43:09.670

SQL解决方案怎么样：

```
select * from item order by times_seen + Rand()*100 limit 1; 
```

你将随机乘以多少（它的值介于 0 和 1 之间）取决于你想要多少随机性。

编辑：[http ://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)

# c# - 如何使用 ImapX lib 将邮件标记为已读？C＃

> ID：10036914
> 
> 赞同：1
> 
> 时间：2012-04-05T22:30:15.960
> 
> 标签：c#, messages, imapx

我正在使用免费的 lib ImapX，并且正在制作一个应用程序来将我的所有邮件标记为已收到。谁能帮我一把？

编辑：没关系，我自己发现了。当您处理它们时，它们会被标记为已读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-16T10:57:59.037

您需要添加标志，这将帮助您更新所看到的状态。

```
 foreach (var mess in messages)
  {
   mess.SEEN = true; 
  } 
```

如果您无法更改状态，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T20:36:03.947

首先，如果您使用的是旧的 ImapX 库，我邀请您升级到[ImapX 2](http://imapx.codeplex.com/)。它正在不断地开发和支持。还有所有常见操作的示例代码。

消息的`Process`方法不会将消息标记为已读，它只会下载包括附件在内的整个消息。在您的情况下，如果您调用将`Search`第二个参数设置为的方法`true`，则不必为每条消息都调用它。

要将消息标记为已读，只需使用`AddFlag`Message 的方法：

```
ImapX.FolderCollection folders = imapclient.Folders;
ImapX.MessageCollection messages = imapclient.Folders["INBOX"].Search("UNSEEN", true); 
foreach (var mess in messages)
{
    mess.AddFlag(ImapFlags.SEEN); 
} 
```

# java - 将 Java 与 Scala 集成：从 Scala 类扩展

> ID：10036926
> 
> 赞同：0
> 
> 时间：2012-04-05T22:31:23.300
> 
> 标签：java, scala, abstract-class, extends

我创建了一个使用 scala 的项目，该项目具有一些抽象类定义，例如：

```
abstract class A(n: String) {
    require(n!= null)
    val name = n

    var inputs: List[Input[_]]
    var outputs: List[Output[_]]
}

abstract class B(n: String) extends A(n){  
   def act
   def isValid : Boolean
   def getCs : List[C[_]]
}

abstract class C[Type]{
   var value: Type 
} 
```

现在我想在 Java 中使用该项目。我在一个新项目中导入了 scala lib，并在构建路径中添加了 scala 项目。我正在使用日食。

但是，当我尝试这样做时：

```
public class CoolClass extends B {  
    public CoolClass(){ }   
} 
```

**编辑：**

我在 Java 中使用它时遇到了一些问题，这让我产生了一些疑问。让我列举它们：

1.  我可以使用 Scala 中的列表还是在 Java 中出现错误？
2.  为什么在 Java 中扩展 B 的类中不能识别来自 A 的变量？
3.  我怎样才能声明`getCs`它提供一个接口`List<C>`而不是`List<C<?>>`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T22:47:30.730

我只是假设，你`class B`在你的 java中实现了你定义的所有方法`class CoolClass`。`B`正如错误消息所说，这里缺少的是对构造函数的调用。

```
class CoolClass extends B {
  public CoolClass() {
    super("");
  }
  // methods implementations
} 
```

您的 没有定义默认构造函数`class B`，因此您必须显式调用已定义的构造函数，即`B(n: String)`.

编辑：

1：你可以在两边使用任何你想要的东西。尽管在某些特殊情况下方法名称可能会有所不同，例如在 scala 中包含特殊字符的任何内容。

2：被识别，虽然不是字段，而是java代码中的方法。您可以使用`this.inputs()`和访问它们`this.outputs()`

3：尝试`def getCs[C]: List[C]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:52:30.270

您的 B 类基本上就像您描述的那样：

```
public abstract class B extends A {  
  public B(String n) {
    super(n);
  }

  public abstract void act()
  public abstract boolean isValid();
  public abstract List<C<?>> getCs();
} 
```

您的 CoolClass 缺少构造函数中的显式超级调用：

```
public CoolClass extends B {
  public CoolClass() { // override ctor with no string parameter
    super("defaultStringValue");
  }

  public CoolClass(String n) { // override ctor with no string parameter
    super(n);
  }
  … 
```

正如你所看到的，Scala 让声明和调用构造函数变得如此简单，我们忘记了它们在 Java 中添加了多少样板。

# java - nio的一些问题

> ID：10036927
> 
> 赞同：0
> 
> 时间：2012-04-05T22:31:40.867
> 
> 标签：java, nio

我决定用 java nio 制作我的 UDPclient 和 UDPserver。但我不明白几件事。这是代码

```
try {
  DatagramChannel channel = DatagramChannel.open();
  channel.configureBlocking(false);
  channel.connect(remote);
  //monitoring
  Selector selector = Selector.open();
  //read write keys
  channel.register(selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE);     
  ByteBuffer buffer = ByteBuffer.allocate(1024*64);//number of bytes for channel
  while (true) {
    selector.select(60000);//number of channels I think
    Set readyKeys = selector.selectedKeys();
    if (readyKeys.isEmpty()) { 
      break;
    }
    else {
      Iterator iterator = readyKeys.iterator();
      while (iterator.hasNext()) {
        SelectionKey key = (SelectionKey) iterator.next();
        iterator.remove();
        if (key.isReadable( )) {
          //read from buffer
          channel.read(buffer);
        } 
        if (key.isWritable()) {
          //write to buffer
          channel.write(buffer); 
        } 
      } 
    } 
  } 
} 
catch (IOException ex) {
  System.err.println(ex);
} 
```

如果我在控制台中写一些东西，事件`key.isWritable`会发生吗？如果服务器发送一些事件 isReadable 会发生吗？当例如用户编写“GETL”或“REGR”（我自己的方法）时，我不明白如何处理我的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:40:14.793

1.  您传递给的值`select`是超时而不是通道数。

2.  你需要做

    `DatagramChannel channelFromKey = (DatagramChannel) key.channel();`

不使用`channel`

我不明白你所说的你自己的事件是什么意思。选择该键时，从通道中读取数据报。

```
Iterator iterator = readyKeys.iterator();
while (iterator.hasNext()) {
    SelectionKey key = (SelectionKey) iterator.next();
    iterator.remove();
    if (key.isReadable( )) {
        DatagramChannel channelFromKey = 
             (DatagramChannel) key.channel();
        buffer.clear();
        // This is a DatagramChannel receive a datagram as a whole
        channelFromKey.receive(buffer);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T00:41:28.333

> 如果我在控制台中写一些东西，key.isWritable 中的事件会发生吗？

不会。唯一会发生的事件是在您向选择器注册的频道上。您还没有注册任何与控制台有关的通道，而且您不能，因为只有网络通道是 SelectableChannels，所以您必须有理由期望源自控制台的事件通过 Selector 出现。

> 如果服务器发送一些事件 isReadable 会发生吗？

是的。

> 当例如用户编写“GETL”或“REGR”（我自己的方法）时，我不明白如何处理我的事件。

我也没有。我什至不明白这个问题。您将从选择器获得的唯一事件是它定义的事件，在您注册的通道上。

# jsf-2 - JSF 2.0 和带有 Facelets 的 Primefaces

> ID：10036928
> 
> 赞同：0
> 
> 时间：2012-04-05T22:31:46.850
> 
> 标签：jsf-2, primefaces, facelets

我正在尝试将 primefaces 合并到我的 JSF 2.0 Web 项目中。

我最近从 facelets 1.x 更新到 2.0 并将 primefaces jar 添加到我的库文件夹中。一切都很好，除了我构建模板的方式与primefaces冲突。

我的***template.xhtml***看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0     Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title><ui:insert name="title">MILO</ui:insert></title>

    //Css   
    //js        

</h:head>

<h:body class="milo">
    <h:form styleClass="miloForm" enctype="multipart/form-data">
        <div id="container">
                <ui:insert name="header">
                    <ui:include src="/WEB-INF/templates/header.xhtml"/>
                </ui:insert>

              <ui:insert name="content">
                    <!--  include your content file or uncomment the include below and create content.xhtml in this directory -->
              </ui:insert>

              <ui:insert name="footer">
                <ui:include src="/WEB-INF/templates/footer.xhtml"/>
              </ui:insert>          </div>
    </h:form>
</h:body> 
```

我的***index.xhtml*** *看起来*像这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">

<ui:composition template="/WEB-INF/templates/base.xhtml">

<ui:define name="content">

         <p:editor/>        
</ui:define> 
```

一旦我有了这个， p:editor 就不会出现。任何想法为什么？控制台不会显示任何警告/错误。

编辑>>> 发现 JS 错误

![在此处输入图像描述](../Images/ff5b04130e8b0fd25a292668f325aba7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T23:57:34.053

在您的`template.xhtml`中，您需要**替换** `<head>`by`<h:head>`和`<body>`by `<h:body>`。你不应该添加另一个，这只会导致无效的 HTML。

特别是这`<h:head>`是强制性的，因为它允许 PrimeFaces 等组件库通过资源依赖注入自动包含必要的 CSS/JS 文件。仅当您有带有 a的元素`<h:body>`时才强制使用，以便它们将自动重新定位到生成的 HTML元素的最底部。`<h:outputScript>``target="body"``<body>`

* * *

**更新**您的具体问题是由手动加载的 jQuery 库和 PrimeFaces 自动包含的库中的冲突引起的。PrimeFaces 在幕后使用 jQuery 和 jQuery UI。如果您坚持使用 PrimeFaces，我建议您放弃手动加载的 jQuery 并改用 PrimeFaces 捆绑的。要覆盖不使用 PrimeFaces 组件的页面，您可以通过将以下行添加到每个页面显式加载 PrimeFaces 捆绑的 jQuery `<h:head>`：

```
<h:outputScript library="primefaces" name="jquery/jquery.js" /> 
```

# php - 在 ColdFusion MX7 和 PHP 5.x 上同样工作的哈希函数？

> ID：10036931
> 
> 赞同：3
> 
> 时间：2012-04-05T22:31:57.373
> 
> 标签：php, hash, coldfusion, sha1

我正在使用旧的 ColdFusion MX7 站点。他们想实现一个“salted hash”密码系统。但是在明年左右的某个时间，他们计划建立一个全新的 PHP 站点，并且不想重置（丢失）所有密码。

所以我正在寻找一些可以在两个平台上运行的代码。

我是新手，但据我所知，以下两个代码块应该做同样的事情。但是，它们会产生不同的结果。有人愿意帮忙吗？

冷融合代码：

```
 <cffunction name="computeHash" access="public" returntype="String">
        <cfargument name="password" type="string" />
        <cfargument name="salt" type="string" />
        <cfargument name="iterations" type="numeric" required="false" default="1024" />
        <cfargument name="algorithm" type="string" required="false" default="SHA-1" />
        <cfscript>
            var hashed = '';
            hashed = hash( password & salt, arguments.algorithm, 'UTF-8' );
        </cfscript>
        <cfloop from="1" to="#iterations#" index="i">
            <cfscript>
                hashed = hash( hashed & salt, arguments.algorithm, 'UTF-8' );
            </cfscript>
        </cfloop>
    </cffunction> 
```

PHP代码：

```
 function computeHash($password,$salt)
    {
        $hashed = '';
        $hashed = hash('sha1', $password . $salt);
        for ($i = 1; $i <= 1024; $i++) 
        {
            $hashed = hash('sha1', $hashed . $salt);
        }
        echo $hashed;
    } 
```

**更新1：** 感谢您的回复！使用密码“p@ssW0rd”和盐“JjXSROiYyKkxNzTklaiErQ==”生成以下结果：

**冷熔：**

代码，第 1 部分：

```
hashed = hash( password & salt, arguments.algorithm, 'UTF-8' ); 
```

生成：

```
A0A8DE3A3B2A8BFD74766EEE126950F4462D3BCB 
```

代码，第 2 部分：

```
hash( hashed & salt, arguments.algorithm, 'UTF-8' ); 
```

生成：

```
CFF9B75918B75761B5568854782CD709B2941637 
```

**PHP：**

代码，第 1 部分：

```
$hashed = hash('sha1', $password . $salt); 
```

生成：

```
a0a8de3a3b2a8bfd74766eee126950f4462d3bcb 
```

代码，第 2 部分：

```
hash('sha1', $hashed . $salt); 
```

生成：

```
e955404423747ec706561fa9a319ddac47194a65 
```

如您所见，第一次，输出匹配。但是当我重新哈希时，它们不再匹配。我很困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T05:22:15.480

> ColdFusion 生成`A0A8DE3A3B2A8BFD74766EEE126950F4462D3BCB`
> 
> , PHP 生成`a0a8de3a3b2a8bfd74766eee126950f4462d3bcb`
> 
> 如您所见，第一次，输出匹配。

这些字符串不相同。您需要将它们都转换为相同的情况 - 我将使用`strtoupper()`PHP 生成的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:43:23.687

Adobe 的CF函数[文档](http://livedocs.adobe.com/coldfusion/7/htmldocs/wwhelp/wwhimpl/common/html/wwhelp.htm?context=ColdFusion_Documentation&file=00000368.htm)未列为该参数的有效值。我想你应该通过。`hash``"SHA-1"``algorithm``"SHA"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:59:12.683

@DCoder 搞定了。问题是 ColdFusion 输出全部大写，而 PHP 输出全部小写。因此，在 PHP 代码中使用 strtoupper() 使它们的工作方式相同。此外，CF7 和 PHP 5 似乎支持 SHA-512，所以我正在切换到该算法。我在下面包含了更新的 CF 和 PHP 代码以供将来参考。:)

COLDFUSION 代码（除了算法不变）：

```
<cffunction name="computeHash" access="public" returntype="String">
    <cfargument name="password" type="string" />
    <cfargument name="salt" type="string" />
    <cfargument name="iterations" type="numeric" required="false" default="1024" />
    <cfargument name="algorithm" type="string" required="false" default="SHA-512" />
    <cfscript>
        var hashed = '';
        hashed = hash( password & salt, arguments.algorithm, 'UTF-8' );
    </cfscript>
    <cfloop from="1" to="#iterations#" index="i">
        <cfscript>
            hashed = hash( hashed & salt, arguments.algorithm, 'UTF-8' );
        </cfscript>
    </cfloop>
</cffunction> 
```

PHP 代码（添加了 strtoupper() 和新算法）：

```
function computeHash($password,$salt)
{
    $algorithm = 'sha512';
    $hashed = '';
    $hashed = strtoupper(hash($algorithm, $password . $salt));
    for ($i = 1; $i <= 1024; $i++) 
    {
            $hashed = strtoupper(hash($algorithm, $hashed . $salt));
    }
    echo $hashed';
} 
```

# haskell - Haskell：使用 Parsec 和 IO 解析文件

> ID：10036932
> 
> 赞同：2
> 
> 时间：2012-04-05T22:32:02.343
> 
> 标签：haskell, io, parsec

所以我仍然在尝试使用 Parsec，但我正在慢慢地将它融入我的工具箱。

当我有一个需要解析的文件时，我发现自己将文件作为字符串读取，然后将内容传递给解析：

```
problem <- readFile input                               
case runParser myParser () input problem of
  Left err  -> hPutStrLn stderr $ "Error: " ++ show err 
  Right cs  -> -- continue processing... 
```

不过，这似乎是一种相当常见的模式——我可以使用一些现有的函数来接受 a`ParsecT String u IO a`和 a`FilePath`并解析内容吗？我在hoogle中找不到任何东西，但这可能只是想象力的失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T22:48:26.687

没有`ParsecT`，但有。但是，如果您的代码片段是准确的，那么您实际上并不需要解析器中的 ，所以这应该不是问题。这样的事情应该产生你想要的行为：[`parseFromFile`](http://hackage.haskell.org/packages/archive/parsec/latest/doc/html/Text-Parsec-String.html)`:: Parser a -> String -> IO (Either ParseError a)``IO`

```
import Text.Parsec.String
import System.Exit
import System.IO

parse :: Parser a -> String -> IO a
parse p fileName = parseFromFile p fileName >>= either report return
  where
    report err = do
        hPutStrLn stderr $ "Error: " ++ show err
        exitFailure 
```

它仍然有点冗长，但是您可以定义`report`一些通用的地方并在整个程序中使用它；然后`parse`是单线。

# ruby-on-rails - 我无法让我的搜索表单和结果视图呈现 - 在现有搜索旁边使用 Thinking-sphinx

> ID：10036935
> 
> 赞同：0
> 
> 时间：2012-04-05T22:32:22.270
> 
> 标签：ruby-on-rails, views, rails-routing

我有一个 2.3.11 Rails 应用程序，我想添加一个全文搜索，以便能够搜索“文章”的内容和标题。我为此目的使用 Thinking-sphinx。我只想能够单击搜索链接到“/advanced_search”（在主页上）并出现搜索表单，然后一旦提交搜索表单，另一个视图 search_results.html.erb 会显示匹配列表文章。

问题：我发现我真的不明白视图是如何实际呈现的。我也不确定我的路由是否正确。我尝试了不同的东西，但由于某种原因，我发现的所有示例都不同。

所以我有一个搜索表单 /controllers/articles_controller/advanced_search ：

```
<% form_tag :controller => 'articles', :action => 'search', :method => 'get' do %>
  <%= text_field_tag :search, params[:search], :id => 'search_field' %>
  <%= submit_tag 'Search', :name => nil %>
<% end %> 
```

我有第二个视图来显示搜索结果，/controllers/articles_controller/search_results.html.erb：

```
<% @articles.each do |article| %>
  <li><%= link_to article.name, :action => 'show', :id => article.id %></li>
  <li><%= article.archived? %></li>
<% end %> 
```

这是我定义狮身人面像索引的模型：

class Article < ActiveRecord::Base validates_presence_of :name #rest of validation and associations here

define_index 做索引汇总索引 :name end end

这是我的控制器和新的搜索操作 /controllers/articles_controller：

```
class ArticlesController < ApplicationController 
```

load_and_authorize_resource

def index @articles = Article.all

```
respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @articles }
  format.json  { render :json => @articles }
end 
```

结尾

def search @articles = Article.search 参数[:search]

```
respond_to do |format|
  format.html # 
  format.xml  { render :xml => @articles }
  format.json  { render :json => @articles }
end 
```

结束结束

在我的 routes.rb 我有这条线，这可能是不正确的，但是当我把它拿出来时，我得到了路由错误 'No route matches "/advance_search" with {method => get}

```
map.connect 'advance_search', :controller => "articles, :action => search 
```

假设其他一切都是正确的，我将不胜感激有关如何正确呈现我的视图的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:51:14.600

让我感到困惑的问题之一是我认为嵌套路由被过度使用了。我现在找到了解决这个问题的方法。我很想为有相同问题的任何人留下一个直接的答案，但不幸的是，我的解决方案没有回答这个特定的问题，因为我以完全不同的方式解决了这个问题。然而，我后来确实注意到实际上还有其他类似的问题得到了回答。

# javascript - 运行一次javascript

> ID：10036939
> 
> 赞同：1
> 
> 时间：2012-04-05T22:32:46.367
> 
> 标签：javascript, cookies

我想运行一次 javascript。我尝试使用来自 Dynamic Drive 的脚本，但它似乎不适用于脚本。

我希望它在用户第一次访问该页面时运行，但随后不再弹出。

有什么帮助吗？

我的脚本是

```
 <script src="http://www.google.com/jsapi"></script><script>google.load("jquery", "1");</script> 
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<script type="text/javascript">
    Username="___", <!-- Facebook Username Without http://facebook.com/ -->
    Title="Join Our Facebook!", <!-- Title -->
    Skin="01", <!-- 01 Through 04 -->
    Time="15", <!-- Countdown In Seconds -->
    Wait="0", <!-- Wait For Popup -->
    Lang="en"
</script>
<script type="text/javascript" src="likeboxfbfanpro.js"></script>
<script type="text/javascript">$(document).ready(function(){$().popupbox({ closeable: false });});</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:44:14.793

你可以做两件事：

*   在您第一次显示消息后设置一个 cookie，并在每个页面加载时测试 cookie 的存在。如果 cookie 不存在则显示消息，如果存在则跳过它。

*   设置服务器端会话值（仅限会话）或数据库记录（如果您能以某种方式识别回访者（即 IP），则跨越会话）以在将第一页提供给客户端后控制 HTML。如果还没有会话/数据库值，则仅发送消息 html

如果你想设置cookies。这是一个处理 cookie 的小脚本：

```
function createCookie(name,value,days) {
if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
}
else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');
for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
}
return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

现在在您的代码中，您可以按如下方式使用它：

```
if (!readCookie('alreadyShown')) {
  .. add you show message code here...
  createCookie('alreadyShown', true)
} 
```

# objective-c - 使用 iOS 块格式的内部编译器错误

> ID：10036944
> 
> 赞同：0
> 
> 时间：2012-04-05T22:33:21.300
> 
> 标签：objective-c, ios, compiler-construction, objective-c-blocks

我正在尝试习惯这种格式。但是我不断遇到这样的奇怪问题......

```
 [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            mAccounts  = [[accountStore accountsWithAccountType:accountType] retain];

            if(acctId != nil) {
                mActiveAccount = [[accountStore accountWithIdentifier:acctId] retain];
            }
        }
    }]; 
```

当我编译时，我在块的最后一行得到一个错误......

```
internal compiler error: in convert_all_function_calls, at tree-nested.c:1976 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:17:15.750

我的编译器设置很混乱。我将其设置为默认值，每台计算机都会更改。它需要设置为“Apple LLVM 3.0”

# php - php中使用java脚本方法的依赖菜单？

> ID：10036946
> 
> 赞同：0
> 
> 时间：2012-04-05T22:33:59.320
> 
> 标签：php, javascript

我在我的项目中使用 HTML 和 PHP，但我有一个问题：

我有一个包含国家/地区的下拉列表，当用户选择一个国家/地区时，我希望另一个下拉列表与（该国家/地区的城市）一起出现

我有国家数据库和城市数据库（sql）

我尝试使用 java 脚本方法来做到这一点，但它没有用

这是我的代码

首先：这是国家下拉列表，它很好用：

```
<select name="SelectCountry"  id="SelectCountry" onchange="showCity()" >
            <?php 
            $Con= mysql_connect("localhost","root",""); 
if(!$Con) { die('Could not connect'.mysql_error());}
if(!mysql_selectdb("MyDB",$Con)){die(mysql_error());}
$sql = "SELECT *  FROM countries";
$result = mysql_query($sql) or die(mysql_error());
while($row=mysql_fetch_array($result)){
       echo ("<option value=\"".$row['CountryID']."\">".$row['Name']."</option>");

}
mysql_close($Con); 
```

其次，这是 java 脚本函数 showCity() //**没有任何工作！**

```
<script>
             function showCity()
{

alert("in the function !!");  

Document.write(" <?php echo "<select 'SelectCity' ,'SelectCity'";
            echo "</select>";
            $theCountry=$_GET['SelectCountry'];  // get the country ID
            $Con= mysql_connect("localhost","root",""); 
if(!$Con) { die('Could not connect'.mysql_error());}
if(!mysql_selectdb("MyDB",$Con)){die(mysql_error());}
$sql = "SELECT * FROM cities WHERE  cities.Fips=(SELECT Fips FROM countries WHERE CountryID='$theCountry')"; // retrive the cities for the spicific country (work when I enter the ID manully in the sql query e.g CountryID='43')

$result = mysql_query($sql) or die(mysql_error());
while($row=mysql_fetch_array($result)){
       echo ("<option value=\"".$row['Fips']."\">".$row['Fullname']."</option>"); // print all the cities in a menu (work when I enter the ID manully in the sql query e.g CountryID='43') 
}
mysql_close($Con);
             ");"; ?> ");
}
</script> 
```

**此方法是在用户使用Onchange**事件更改国家/地区时为特定国家/地区城市创建一个新的下拉列表

我希望你能帮助我

如果有任何问题或误解，我准备回答或解释

一切都好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:04:22.013

这不起作用，因为 $_GET['SelectCountry'] 总是为空。您对客户端和服务器端脚本之间的区别感到困惑。首次加载页面后，还没有 GET 变量，因此您的 Javascript 位于没有城市的浏览器上。更改国家不会使 getCity() 返回服务器。它只是看它已经拥有的东西，这没什么。您需要一个 AJAX 函数，它负责向服务器发送 GET 请求并返回结果。一旦它获得城市列表，它就会想知道你希望它对那个列表做什么。你给它一个从它们中下拉的函数。这称为回调。那里有很多教程告诉您如何制作 AJAX 函数以及将回调放在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:52:07.753

对于您的经验水平，如果您通过 onchange 所做的只是提交表单，那可能是最好的：

```
<select name="SelectCountry"  id="SelectCountry" onchange="this.form.submit();" > 
```

这相当于选择国家后按下提交按钮。（顺便说一句，您的摘录中缺少`</select>`，尽管我希望您只是没有在此处复制。）

然后在 PHP 中有类似...（请注意，此代码位需要在下拉框*之前*，以便当您想要回显它时变量就在那里）

```
if ( isset($_GET['SelectCountry']) )
{
    $country = $_GET['SelectCountry'];
    $citySelect = "<select name='SelectCity'>";
    //query DB for cities of that country
    ...
    //now add the options from the query just like you did for the countries, except now use the cities
    ...
    $citySelect .= "</select>";
}
else
{
    $citySelect = ""; //to make sure the variable isn't undefined
} 
```

现在您可以在 CountrySelect 下方添加：

```
<? echo $citySelect; ?> 
```

如果之前选择了一个国家，则会显示城市菜单。

请注意，这甚至不包括最低级别的安全性、防呆功能，而且让大型表单像这样工作可能非常复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T23:00:05.180

$_GET['SelectCountry'] 仅当您在表单标签中有选择并单击提交按钮重新加载页面时才有效（这会创建 $_GET 变量。一个简单的方法是将国家添加到您的地址 URL，这也会给你一个 $_GET 。

所以在 showCity() 函数中，这样写：

```
 var i = document.getElementById("SelectCountry").selectedIndex;
 var countryValue = document.getElementById("SelectCountry").options[i].text;
 window.location.href = '/?SelectCountry='+countryValue; 
```

这会将您的网页重定向到 mysite.com/?SelectCountry=USA 或类似的东西。然后你的代码就可以工作了。这不是最好的方法，但它应该会给你一些结果。

# vim - 在 Vim 中，是否可以在指定打开的拆分窗口中打开文件？

> ID：10036952
> 
> 赞同：3
> 
> 时间：2012-04-05T22:34:39.830
> 
> 标签：vim, editor

最近，我在编写 Ruby 时使用 Vim 作为我的编辑器，但我不知道我是否可以在 Vim 中做到这一点。假设在我的 Vim 中，我已经有 2 个垂直拆分窗口`A`，命名`B`如下：

![拆分窗口](../Images/b8177140fcf55744733bbfff02f37af3.png)

如果我将光标停在语句下，然后我点击`gf`跳转到源文件，但默认情况下它会显示在同一个窗口中。`xyz.rb``require``A`

是否有任何快捷方式或快速组合可以打开或`xyz.rb`在打开的`B`拆分窗口中显示源文件？（即使窗口`B`不存在，自动创建一个）

我检查了手册，它确实有一些方法可以`xyz.rb`在不同的水平拆分窗口或新选项卡中显示，但是如果我想在指定打开的拆分窗口中显示它是否有可能`B`。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T22:43:53.093

您描述的功能已经以“预览窗口”的形式存在。

您可以将键（例如`gf`）映射到类似的东西

```
:exec 'pedit ' . expand('<cfile>') 
```

*这将在预览*窗口中打开光标下的文件名。如果不存在，将打开一个新的预览窗口。有关**[`:he preview-window`](http://vimdoc.sourceforge.net/htmldoc/windows.html#preview-window)**更多信息，请参阅。

使用`^W``z`（或`:pclose`）关闭预览窗口

# c# - 如何获得从匿名类型的字符串成员到强类型控制器操作的隐式类型转换？

> ID：10036953
> 
> 赞同：1
> 
> 时间：2012-04-05T22:34:42.573
> 
> 标签：c#, asp.net-mvc-3

我的模型中有以下内容：

```
public sealed class OAuthProvider
{
    private readonly string name;

    private const string SOME_PROVIDER = "SOMEPROVIDER";
    public static readonly OAuthProvider SomeProvider = new OAuthProvider(SOME_PROVIDER);

    private OAuthProvider(String name) { this.name = name; }
    public override String ToString(){ return name; }
    public static implicit operator string(OAuthProvider oAuthProvider)
    {
        return oAuthProvider.name;
    }
    public static implicit operator OAuthProvider(string oAuthProvider)
    {
        switch (oAuthProvider)
        {
            case SOME_PROVIDER : return SomeProvider ;
            default: return null;
        }
    }
} 
```

这在我的`OAuth`控制器中：

```
public ActionResult Profile(OAuthProvider network)
{...} 
```

在我看来，这是：

```
@model SomeModel
Html.RenderAction("Profile", "OAuth", new { network = Model.Network }); 
```

`Model.Network`一个在哪里`string`

呈现此视图时，我可以看到（通过断点）`Model.Network`作为`string`非空值传入。尽管隐式类型转换已经到位，但My`Profile(OAuthProvider)`正在被调用。`network``null`

我会以错误的方式解决这个问题吗？我是否被迫进行明确的演员表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:16:47.713

不确定这是否可行，这不是对您所拥有的内容的直接答案（但在类似情况下很难说没有调试）但可能会有所帮助（并且有很多文字可供评论）......

在类似的情况下，当绑定没有按预期工作时，通常有助于调试 - 并且通过制作自定义活页夹。

在你的`Application_Start`你做这样的事情......

```
ModelBinders.Binders.Add(typeof(YourNamespace.OAuthProvider), new YourNamespace.Binders.OAuthProviderClassBinder()); 
```

（如果控制器从未达到动作或其他情况，您可以对控制器进行类似的操作，例如`ControllerBuilder.Current.SetControllerFactory(new RedirectControllerFactory());`工厂源自`DefaultControllerFactory`类似于下面的示例）

...然后在代码中的某处定义活页夹，简化...

```
public class OAuthProviderClassBinder : DefaultModelBinder
{
    //public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    //{
    //}
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        var model = (OAuthProvider)base.CreateModel(controllerContext, bindingContext, modelType);

        // ...you change, inspect set etc.

        return model;
    }
} 
```

...这是自定义绑定的方法，调整您的“传递”值 - 还要检查它们是否存在问题等
。您可能最好覆盖其他方法，例如`BindModel`

这是一个快速链接...
[创建自定义模型绑定器](http://www.markeverard.com/blog/2011/07/18/creating-a-custom-modelbinder-allowing-validation-of-injected-composite-models/)
[http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultmodelbinder.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultmodelbinder.aspx)

# c# - Excel 到 SQL 代码：找不到第 8 列错误

> ID：10036957
> 
> 赞同：0
> 
> 时间：2012-04-05T22:35:05.547
> 
> 标签：c#, sql, visual-studio-2010, excel

我已经多次查看我的代码，希望有人可以帮助我看到我没有看到的东西。我正在尝试将数据从 Excel 提取到 VS2010 中具有多列的 SQL 表中，但是当我尝试上传数据时，出现错误“无法找到第 8 列”。我认为第 8 列和其他任何列都没有问题。还有谁？谢谢！

```
protected void Button1_Click(object sender, EventArgs e)
{
    //make local copy
    string sheetname = "Sheet1";
    string path = Server.MapPath("~/Import.xls");
    //connect to local Excel
    try
    {

        FileUpload.SaveAs(path);
        System.Data.OleDb.OleDbConnection MyConnection;
        System.Data.DataSet DtSet;
        System.Data.OleDb.OleDbDataAdapter MyCommand;  //check sheet name
        MyConnection = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;");
        MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [" + sheetname + "$]", MyConnection);
        MyCommand.TableMappings.Add("Table", "TestTable");
        DtSet = new System.Data.DataSet();
        MyCommand.Fill(DtSet);
        SqlConnection curConnection = new SqlConnection(@"Data Source=1tc-Techcomm2;Initial Catalog=EventManagement;Integrated Security=True");
        curConnection.Open();
        SqlCommand curCommand;
        SqlParameter param;
        string str;

        for (int i = 0; i < DtSet.Tables[0].Rows.Count; i++)
        {
            if (DtSet.Tables[0].Rows[i][1] == DBNull.Value)
                continue;
            curCommand = curConnection.CreateCommand();
            curCommand.CommandText = @"Insert into TestSP (SessionHead_Title, SessionHead_Type, SessionHead_Description, SessionHead_Confirmed, SessionHead_Presenter, SessionHead_Champion, SessionHead_Objective, SessionHead_Notes, SessionHead_Schedule, SessionHead_Equipment, SessionHead_Hardware, SessionHead_CDA) Values (@a,@b,@c,@d,@e,@f,@g,@h,@i,@j,@k,@l,@m)";
            for (int j = 0; j < 13; j++)
            {
                param = new SqlParameter();
                str = "@";
                str += (char)('a' + j);
                param.ParameterName = str;
                param.SqlDbType = SqlDbType.VarChar;
                param.Value = DtSet.Tables[0].Rows[i][j];//This is where it errors out at after 8 times through
                curCommand.Parameters.Add(param);

            }
            Label1.Text = "THE EXCEL DATE HAS SUCCESSFULLY BEEN SENT TO THE DATABASE"; 

            int Event_Id = curCommand.ExecuteNonQuery();

        }
        MyConnection.Close();
        curConnection.Close();
    }
    catch (Exception ex)
    {
        //Response.Write(ex.ToString());
        Label1.Text = ex.Message; 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:48:58.880

我认为问题在于电子表格的列标题与表标题不匹配。我在某处读到 SQL Server 表中的列名在 Excel 文件中必须相同。我想这解决了它...感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:46:53.320

如果您知道 SQL Server 上表的结构，请尝试使用 SqlBulkCopy。映射您的列并将其写入服务器。您的数据集中已经有了数据。

```
SqlBulkCopy _bc = new SqlBulkCopy(curConnection);

_bc.DestinationTableName = "TestSP";

_bc.ColumnMappings.Add(new SqlBulkCopyColumnMapping("DataTableColumnName1", "SQLServerColumnName1");
_bc.ColumnMappings.Add(new SqlBulkCopyColumnMapping("DataTableColumnName2", "SQLServerColumnName2");
_bc.ColumnMappings.Add(new SqlBulkCopyColumnMapping("DataTableColumnName3", "SQLServerColumnName3");
_bc.ColumnMappings.Add(new SqlBulkCopyColumnMapping("DataTableColumnName4", "SQLServerColumnName4");

_bc.WriteToServer(DtSet.Tables[0]); 
```

如果您不了解结构，您仍然可以使用此过程，但您必须发挥创造力。我必须这样做，这很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-25T18:37:55.993

[user3611272](https://stackoverflow.com/users/3611272/user3611272)的[解决方案](https://stackoverflow.com/questions/21866099/mysql-for-excel-add-in-failing-to-append/24739996#24739996)帮助了我：

> ...我尝试附加一些随机表并转到附加弹出窗口底部的“高级选项”你会看到一些“存储列映射”和其中的一些映射，现在删除~~所有~~ *相关映射*然后点击“接受”现在你可以附加表格

# java - 删除双向递归关系的最简单方法是什么？

> ID：10036958
> 
> 赞同：17
> 
> 时间：2012-04-05T22:35:07.140
> 
> 标签：java, recursion, gson

我使用[Gson](http://code.google.com/p/google-gson/) 库将 Java 对象转换为 Json 响应......问题是，在 JPA 请求后，由于与其他实体的递归关系，从 DB 检索到的对象无法转换（[参见我之前的问题](https://stackoverflow.com/questions/10027268/how-to-serialize-a-java-util-liste-to-json-using-gson-library)），例如：

```
public class Gps implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "IMEI", nullable = false, length = 20)
    private String imei;
    //some code here...
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "gpsImei", fetch = FetchType.LAZY)
    private List<Coordonnees> coordonneesList;

public class Coordonnees implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "IDCOORDONNEES", nullable = false)
    private Integer idcoordonnees;
    //some code here...
    @JoinColumn(name = "GPS_IMEI", referencedColumnName = "IMEI", nullable = false)
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private Gps gpsImei; 
```

我的源代码：

```
 EntityManagerFactory emf=Persistence.createEntityManagerFactory("JavaApplication21PU");
  GpsJpaController gjc=new GpsJpaController(emf);

  Gps gps=gjc.findGps("123456789012345");

  for(int i=0;i<gps.getCoordonneesList().size();i++){
   gps.getCoordonneesList().get(i).setGpsImei(null);
  }  

  Gson gson=new Gson();
  String json=gson.toJson(gps);//convert to json response

  System.out.println(json); 
```

正如你在这里看到的，我做了：

```
 for(int i=0;i<gps.getCoordonneesList().size();i++){
     gps.getCoordonneesList().get(i).setGpsImei(null);
   } 
```

只是通过为 coordonneesList 中的每个 GPS 对象设置 null 来终止递归关系。

您认为这是一个很好的解决方案，还是有其他更实用的方法？谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-06T16:14:42.850

[有一个名为GraphAdapterBuilder](https://github.com/google/gson/blob/1d9e86e27c97cd85d898104b4ac42bb487d0d7d0/extras/src/main/java/com/google/gson/graph/GraphAdapterBuilder.java)的 Gson 扩展可以序列化包含循环引用的对象。这是来自相应测试用例的一个非常简化的示例：

```
Roshambo rock = new Roshambo("ROCK");
Roshambo scissors = new Roshambo("SCISSORS");
Roshambo paper = new Roshambo("PAPER");
rock.beats = scissors;
scissors.beats = paper;
paper.beats = rock;

GsonBuilder gsonBuilder = new GsonBuilder();
new GraphAdapterBuilder()
    .addType(Roshambo.class)
    .registerOn(gsonBuilder);
Gson gson = gsonBuilder.create();
System.out.println(gson.toJson(rock)); 
```

这打印：

```
{
  '0x1': {'name': 'ROCK', 'beats': '0x2'},
  '0x2': {'name': 'SCISSORS', 'beats': '0x3'},
  '0x3': {'name': 'PAPER', 'beats': '0x1'}
} 
```

请注意，GraphAdapterBuilder 类**不**包含在 gson.jar 中。如果你想使用它，你必须手动将它复制到你的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T02:25:06.933

我不知道与 Gson 的关系，但我正在与 Jackson 合作。查找使用其 ObjectMapper 类的示例。至于递归，请使用 @JsonManagedReference 和 @JsonBackReference 来阻止它。也可以查看这些示例用法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-21T10:46:09.023

您可以使用 @Expose(serialize = false) 来避免 Collection 被序列化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-14T19:00:42.390

我会将 GsonBuilder 配置为使用杰克逊注解：

```
GsonBuilder builder = new GsonBuilder()
    .addSerializationExclusionStrategy(serializationExclusionStrategy);

final ExclusionStrategy serializationExclusionStrategy = new ExclusionStrategy() {
  @Override
  public boolean shouldSkipField(FieldAttributes f) {
    return f.getAnnotation(JsonIgnore.class) != null
           || f.getAnnotation(JsonBackReference.class) != null;
  }

  @Override
  public boolean shouldSkipClass(Class<?> aClass) {
    return false;
  }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-06T15:07:24.270

使用**瞬态**忽略 google.gson 的 @OneToMany 集

# ios5 - iOS 5 试图从模态视图 pushViewController

> ID：10036963
> 
> 赞同：1
> 
> 时间：2012-04-05T22:35:19.573
> 
> 标签：ios5

我有一个使用情节提要的 iOS 5 选项卡式应用程序。

我的标签栏控制器指向三个导航控制器。

从其中一个来看，流程如下所示：

开始视图 --> 照片视图（模态） --> 目录视图

在照片屏幕上，我有一个带有以下代码的按钮：

```
- (IBAction)acceptPhotoButtonPressed:(id)sender {
    UIViewController *catalogView = [self.storyboard instantiateViewControllerWithIdentifier:@"CatalogView"];
    [self.navigationController pushViewController:catalogView animated:YES];
} 
```

我试过玩弄`presentingViewController`, `parentViewController`- 甚至类型将它们转换为`UINavigationController`. 这会导致它崩溃，并显示以下错误消息：

```
2012-04-06 00:32:45.808 myapp[19345:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITabBarController pushViewController:animated:]: unrecognized selector sent to instance 0x18d0d0' 
```

所以这告诉我，我没有得到 a `UINavigationController`，而是 a `UITabBarController`。

有没有办法解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T19:10:23.100

“推送”风格的 segue 只能从由`UINavigationController`. 如果你尝试这样做，否则什么都不会发生。

与其在问题中描述的那样以模态方式显示照片视图，不如将 UINavigationController 的实例显示为模态视图，并使照片视图成为导航视图的根视图控制器。（这都可以通过故事板设置）。然后你的 push segue 就可以工作了。

如果您不希望顶部导航栏出现在您的第一个视图控制器（照片视图）上，您可以使用：

```
[self.navigationController setNavigationBarHidden:YES animated:NO] 
```

这将隐藏顶部导航栏。一旦你推送了一个新的视图控制器，如果你想让导航栏重新出现在那个和任何后续的视图控制器上，你必须在新的视图控制器上将 setNavigationBarHidden 设置为 NO。

```
[self.navigationController setNavigationBarHidden:NO animated:NO] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T22:42:38.063

Segue 是从一个场景过渡到另一个场景的首选方式。

您可以从该按钮或 VC 本身创建一个 Segue，并将该 segue 连接到您要推送的场景。确保 Segue 属性设置为 Push，然后在按钮的 IBAction（假设您连接到 VC）中执行以下操作：

```
- (IBAction)acceptPhotoButtonPressed:(id)sender {
    [self performSegueWithIdentifier@"mySegueID" sender:nil];
} 
```

然后在 prepareForSegue 方法中：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString@"mySegueID"]) {
        //  Do whatever setup you need to do before firing the segue
    }
} 
```

如果您将 Segue 连接到按钮本身，那么您可以完全消除 performSegue 方法（您甚至不需要那个 IBAction）。

# iphone - MKOverlay 有时会消失

> ID：10036967
> 
> 赞同：8
> 
> 时间：2012-04-05T22:35:45.653
> 
> 标签：iphone, ios, mkmapview, mapkit, mkoverlay

我的地图中有两个叠加选项：一个 MKCircleOverlay 和一个 MKPolygonOverlay。第一个是可变半径，通过 UISlider 控制。最后一个可根据角的数量和位置进行自定义。如果我很快改变圆的半径（降低 UISlider 的值）有时我的叠加层消失（圆圈），之后无法再绘制多边形（当然也是圆圈）。应用程序不会崩溃。它可能是什么？

这是我使用的一些代码：

```
- (IBAction) addCircle:(id)sender
{
slider.hidden = NO;
slider.transform = CGAffineTransformMakeRotation(M_PI*(-0.5));

_longPressRecognizer= [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
_longPressRecognizer.minimumPressDuration = 1.0; 

[mapview addGestureRecognizer:_longPressRecognizer];
[_longPressRecognizer release];
}

- (void)handleLongPress:(UIGestureRecognizer *)gestureRecognizer
{
if (gestureRecognizer.state != UIGestureRecognizerStateBegan)
    return;
CGPoint touchPoint = [gestureRecognizer locationInView:mapview];    
CLLocationCoordinate2D touchMapCoordinate = [mapview convertPoint:touchPoint toCoordinateFromView:mapview];

MKPointAnnotation *pa = [[MKPointAnnotation alloc] init];
pa.coordinate = touchMapCoordinate;
pa.title = @"Circle Based Search";

[mapview addAnnotation:pa];
[pa release];

tmC = touchMapCoordinate;
double radius = 1000.0;

self.circleOverlay = [MKCircle circleWithCenterCoordinate:tmC radius:radius];
[mapview removeOverlays:[mapview overlays]];
[mapview addOverlay:circleOverlay];
[mapview removeAnnotations:[mapview annotations]];
}

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay 
{
if ([overlay isKindOfClass:[MKCircle class]])
{
    MKCircleView* circleView = [[MKCircleView alloc] initWithOverlay:overlay] ;
    circleView.fillColor = [UIColor blueColor];
    circleView.strokeColor = [UIColor blueColor];
    circleView.lineWidth = 5.0;
    circleView.alpha = 0.20;
        return circleView;
}
else
    if ([overlay isKindOfClass:[MKPolygon class]])
{
    MKPolygonView *polygonView = [[MKPolygonView alloc] initWithOverlay:overlay ];
    polygonView.fillColor = [UIColor blueColor];
    polygonView.strokeColor = [UIColor blueColor];
    polygonView.lineWidth = 5.0;
    polygonView.alpha = 0.20;
    return polygonView;
}
return [kml viewForOverlay:overlay];
}

- (void)addCircleWithRadius:(double)radius
{
self.circleOverlay = [MKCircle circleWithCenterCoordinate:tmC radius:radius];
[mapview removeOverlays:[mapview overlays]];
[mapview addOverlay:circleOverlay];
[mapview removeAnnotations:[mapview annotations]];
}

- (IBAction)sliderChanged:(UISlider *)sender
{
    double radius = (sender.value);
[self addCircleWithRadius:radius];
[mapview removeAnnotations:[mapview annotations]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:28:07.893

问题解决了。这是 UISlider 的问题，在笔尖中，在`Values`属性下滑块的检查器中进行了检查。在`Continuous`我取消选中之后，问题得到了解决。

# c# - 如何在单元测试中验证 Python/C# 中的序列化 JSON 是否正确？

> ID：10036971
> 
> 赞同：3
> 
> 时间：2012-04-05T22:36:12.470
> 
> 标签：c#, python, json, serialization, servicestack

我正在编写一些代码，将 C# 对象序列化为 JSON，通过网络发送并将 JSON 反序列化为 Python 对象。

反向操作也将完成，即将 Python 对象序列化为 JSON，通过网络发送并将 JSON 反序列化为 C# 对象。

在 C# 方面，我使用 ServiceStack JSON 库。在 Python 中，我使用的是内置的 json 库。如有必要，可以轻松更改 C# 库，而 Python 则要少得多。

```
// C＃
var serializer = new JsonSerializer();
var json = serializer.SerializeToString(request);

// Python
// JsonCodec 继承自 JSONEncoder 并挂钩到 'default' 并且只是
// 返回 obj.__dict__ 其中 obj 是要序列化的对象
actualSerializedResponse = JsonCodec().encode(response)

```

我用 C# 编写了一个单元测试来验证 ServiceStack 序列化的 JSON 是否符合 Python 端的预期。在测试中，创建了一个 Foo 实例，填充了一些硬编码值，然后序列化。为了确保有效性，我将序列化的 JSON 与保存在文件中的一些 JSON 进行比较，其中文件的内容代表 Python 端的期望。

同样，在 Python 中有一个单元测试来验证内置 json 库的序列化 JSON 是否符合 C# 端的预期。同样，为了确保有效性，我将实际的序列化 JSON 与保存在文件中的一些 JSON 进行比较。

在这两种情况下，我将序列化的 JSON 与保存在文件中的一些 JSON 进行比较这一事实意味着，每次运行测试时，将属性序列化为 JSON 的顺序必须保持一致。

我的问题：

*   在 C# 单元测试中，JSON 中属性的顺序似乎与在其实例被序列化的 C# 类中定义属性的顺序相匹配。这可以依靠吗？

*   在 Python 单元测试中，属性的顺序是一致的，但是是任意的。这是有道理的，因为它依赖于**dict**并且 Python 字典是无序的。但这可以每次/哪里都可靠吗？

*   有没有更好的方法来完成这一切？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:54:19.583

关于 Python 方面：您可以向 JSON 解码器传递一个选项以使用“有序字典”（但需要 python 2.7）：

来自[http://docs.python.org/library/json.html#json.load](http://docs.python.org/library/json.html#json.load)：

> object_pairs_hook 是一个可选函数，将调用使用有序对列表解码的任何对象文字的结果。将使用 object_pairs_hook 的返回值而不是 dict。此功能可用于实现依赖于键值对解码顺序的自定义解码器（例如，collections.OrderedDict() 将记住插入顺序）。如果还定义了 object_hook，则 object_pairs_hook 优先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:54:42.210

你的前两个问题很容易解决。只要可以避免，就不应依赖未记录的、特定于实现的行为。我认为你可以避免在这里这样做。为了进一步充实这个答案，我将花一些时间来解决您的最后一个问题。

> 有没有更好的方法来完成这一切？

第一步是认识到您当前编写的[不是单元测试](http://www.artima.com/weblogs/viewpost.jsp?thread=126923)。

具体来说：

> 如果满足以下条件，则测试不是单元测试：
> 
> *   它通过网络进行通信
> *   它涉及文件系统

你的测试正在做这两个。这并不是说您的测试没有任何价值，但重要的是要注意它们不是单元测试。这些测试工作的级别是[集成测试](http://en.wikipedia.org/wiki/Integration_testing)。集成测试是：

> 软件测试的阶段，其中将各个软件模块组合在一起并作为一个组进行测试。它发生在单元测试之后和验证测试之前

我认为你的问题是你试图混合集成和单元测试的任务。

在编写单元测试时，您希望每个测试尽可能少地依赖组件，并尽可能具体地解决案例。在您的情况下，这意味着 C# 和 Python 中的测试，它们都不依赖于另一个的输出。在这两个程序中，让您的序列化代码在您需要它工作的最简单的情况下工作，并验证您是否获得了所需的 JSON 加载/转储。这可能意味着在您的单元测试代码中将 JSON 作为字符串手动编写（您希望您的测试足够小以至于这不会很痛苦）。

对于您的集成测试，您只想检查当您的不同部分相互交谈时没有发生任何故障。在这里，您不必担心序列化和读取是否正确，因为您已经在单元测试中涵盖了这一点。如果他们说得很好，那就太好了！

Then, if you run in to bugs, fix them and document them with an appropriate test case. In the end you should have *lots* of *little* unit tests and a *few* slightly bigger integration tests.

# ruby-on-rails - 属于_to Post 和belong_to User 的评论

> ID：10036972
> 
> 赞同：1
> 
> 时间：2012-04-05T22:36:18.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试向 Post 模型添加评论

```
class Comment < ActiveRecord::Base
    belongs_to :post
    belongs_to :user #should this be has_one :user instead?
.... 
```

如何设置我的新评论和创建操作以获取 current_user 和当前帖子？

guides.rubyonrails.org 建议

**控制器：**

```
def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])
    redirect_to post_path(@post)
end 
```

**看法**

```
<%= form_for([@post, @post.comments.build]) do |f| %>
... 
```

然而，这似乎只是为了与帖子相关联，而不是与用户相关联。如何设置两个关联？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T22:47:50.107

我假设您`current_user()`的控制器中某处有一个方法。

所以应该这样做：

```
def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.build(params[:comment])
    @comment.user = current_user
    @comment.save
    redirect_to post_path(@post)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T21:06:12.430

Deradon 很好地回答了这个问题，但我更喜欢在新的评论表单本身中包含这种逻辑。例如，您可以不调用这些变量：

应用程序/views/comments/_form.html.erb：

```
<%= f.hidden_field :user_id, value: current_user.id %>
<%= f.hidden_field :post_id, value: @post.id %> 
```

这当然假设您的新评论表单嵌入在“发布展示”页面中，因此@post 可用：

应用程序/views/posts/show.html.erb：

```
<body>
  <%= render @post %>
  <%= render 'comments/_form' %>
</body> 
```

这会将 post_id 和 user_id 直接添加到数据库中以获取新评论。另外，不要忘记为这些外键创建索引，以便数据库可以更快地访问。如果你不知道怎么做，谷歌它！

# python - python中的正则表达式捕获多种格式错误的地址

> ID：10036973
> 
> 赞同：0
> 
> 时间：2012-04-05T22:36:23.010
> 
> 标签：python, regex

几天来，我一直在调整一个正则表达式，试图用一个定义来捕获数据库地址字段中格式不一致的几种情况。

我是 Python 和正则表达式的新手，在这里得到了很好的反馈是 stackoverflow，并且根据我的新知识，我构建了一个接近最终结果的 RegEx，但仍然无法发现问题。

```
import re

r1 = r"([\w\s+]+),?\s*\(?([\w\s+\\/]+)\)?\s*\(?([\w\s+\\/]+)\)?"

match1 = re.match(r1, 'caracas, venezuela')
match2 = re.match(r1, 'caracas (venezuela)')
match3 = re.match(r1, 'caracas, (venezuela) (df)')

group1 = match1.groups()
group2 = match2.groups()
group3 = match3.groups()

print group1
print group2
print group3 
```

这件事应该为第 1 组和第 2 组返回 'caracas, venezuela'，为第 3 组返回 'caracas, venezuela, df'，相反，它返回：

```
('caracas', 'venezuel' 'a') 
('caracas ', 'venezuel' 'a')
('caracas', 'venezuela', 'df') 
```

唯一完美的匹配是第 3 组。另外 2 个在末尾隔离 'a'，第 2 个在 'caracas' 末尾有一个额外的空间。提前感谢您的任何见解。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:19:32.090

正则表达式可能有点矫枉过正......你的问题陈述到底是什么？你需要捕捉什么？

我捕捉到的一些东西（按您的正则表达式中出现的顺序；有时它有助于读出它，从左到右，英文风格）：

```
([\w\s+]+) 
```

这就是说，“捕获一个或多个（字母或一个或多个空格）”

您真的要捕获城市名称末尾的空格吗？此外，您不需要（实际上不应该有）`+`括号内的 1 个或多个符号`[ ]`，因为您的正则表达式已经根据外部匹配其中一个或多个符号`+`。我会这样重写这部分：

```
([\w\s]*\w) 
```

它将热切匹配到最后一个字母数字字符（“零个或多个（字母或空格）后跟一个字母”）。这确实假设您至少有一个字符，但比您假设单个空格也可以工作要好。

接下来你有：

```
,?\s*\(? 
```

这对我来说看起来不错，只是它不能保证你会再看到逗号或左括号。关于什么：

```
(?:,\s*\(|,\s*|\s*\() 
```

它说，“非捕获匹配（可能有一些空格的逗号，然后是一个开放的括号）或（可能有一些空格的逗号）或（可能是一些空格，然后是一个开放的括号）”。这强制您必须有逗号或括号或两者都有。

接下来是捕获表达式，与第一个非常相似：

```
([\w\s+\\/]+) 
```

同样，您不希望城市名称末尾的空格（或在这种情况下为斜杠），并且您不希望`+`在`[ ]`:

```
([\w\s\\/]*\w) 
```

下一个表达式可能是您遇到`venezuel` `a`问题的地方；让我们来看看：

```
\)?\s*\(?([\w\s+\\/]+)\)? 
```

这是一个相当长的问题，所以让我们分解一下：

```
\)?\s*\(? 
```

说“可能匹配一个封闭的括号，然后可能是一些空格，然后可能是一个开放的括号”。我猜这没关系，让我们继续讨论真正的问题：

```
([\w\s+\\/]+) 
```

此捕获组必须匹配至少一个字符。如果匹配器在您的地址末尾看到“venezuela”，它将**急切地**匹配字符`venezuel`，然后需要用它剩下的内容来满足这个最终表达式，`a`. 请尝试：

```
\)?\s* 
```

然后使您的整个最终表达式可选，并且外部表达式不捕获：

```
(?:\(?([\w\s+\\/]+)\)?)? 
```

最后的表达式是：

```
([\w\s]*\w)(?:,\s*\(|,\s*|\s*\()([\w\s\\/]*\w)\)?\s*(?:\(?([\w\s+\\/]+)\)?)? 
```

**编辑：**修复了导致最终组捕获两次的问题，一次有括号，一次没有。现在它应该只捕获括号内的文本。

在您的示例上对其进行测试：

```
>>> re.match(r, 'caracas, venezuela').groups()
('caracas', 'venezuela', None)
>>> re.match(r, 'caracas (venezuela)').groups()
('caracas', 'venezuela', None)
>>> re.match(r, 'caracas, (venezuela) (df)').groups()
('caracas', 'venezuela', 'df') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:45:16.117

你能不能只找到文本中的所有单词？

例如：

```
>>> import re
>>> samples = ['caracas, venezuela','caracas (venezuela)','caracas, (venezuela) (df)']
>>>
>>> def find_words(text):
...   return re.findall('\w+',text)
...
>>> for sample in samples:
...   print find_words(sample)
...
['caracas', 'venezuela']
['caracas', 'venezuela']
['caracas', 'venezuela', 'df'] 
```

# vim - 从 Vim 打印颜色太亮

> ID：10036975
> 
> 赞同：4
> 
> 时间：2012-04-05T22:36:38.757
> 
> 标签：vim, printing

`vim`当我从using打印时`:ha`，一切都很好，除了黄色非常亮。用 打印时如何判断`vim`使黄色变暗`:ha`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:24:40.067

我在 freenode.net 上从 IRC 的某个好人那里得到了答案。（**如果**有人认识他，那就好了 :)

无论如何，**这个解决方案对我来说非常有效。**通过按`F12`，它会打开我在浏览器中的 vim 中编辑的文件（在下面的 chrome 中），我所要做的就是右键单击 > 打印。

无论如何，这是您应该添加到`~/.vimrc`文件中的代码：

```
:map <f12> :TOhtml<cr>:%s/#ffff00/#aaaa00/g<cr>:w<cr>:!chromium-browser --print file://`pwd`/%<cr>:!rm %<cr>:q<cr> 
```

请注意，您可以指定要更改的颜色的阴影（在本例中为黄色）并对其进行修改。它甚至摆脱了 :w 命令创建的重复文件。此外，此代码针对 Ubuntu 进行了修改，对于其他操作系统，可能需要进行一些修改。

**只有一个错误**>`!chromium-browser --print`应该自动打印它，但它没有。我需要从浏览器手动打印。细微差别，但如果有人能解决这个问题，我将不胜感激:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T23:00:57.403

如果您正在寻找一种仅打印可读代码的方法，您可能只是

```
:set printoptions-=syntax:y
:set printoptions+=syntax:n 
```

在你做之前

```
:hardcopy 
```

否则，您可能会在打印之前选择没有黄色（ish）颜色的配色方案

# html - 包含 CSS 的最佳方式？为什么使用@import？

> ID：10036977
> 
> 赞同：312
> 
> 时间：2012-04-05T22:37:01.830
> 
> 标签：html, css

基本上我想知道使用`@import`将样式表导入现有样式表而不是添加另一个样式表的优势/目的是什么...

```
<link rel="stylesheet" type="text/css" href="" /> 
```

到文件的头部？

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2012-04-05T22:47:12.090

从页面速度的角度来看，`@import`几乎不应该使用 CSS 文件，因为它可以防止样式表被同时下载。例如，如果样式表 A 包含以下文本：

```
@import url("stylesheetB.css"); 
```

那么在下载第一个样式表之前，可能不会开始下载第二个样式表。另一方面，如果`<link>`在主 HTML 页面的元素中引用了两个样式表，则可以同时下载这两个样式表。如果两个样式表总是一起加载，那么将它们简单地组合到一个文件中也会很有帮助。

偶尔会有`@import`适当的情况，但它们通常是例外，而不是规则。

* * *

## 回答 #2

> 赞同：206
> 
> 时间：2014-04-19T21:28:22.347

*（2022 更新：我应该注意到，许多专业开发人员现在使用 SASS 之类的系统或与 React 兼容的框架来管理他们的 CSS，其中任何一个都可以在内部处理这些优化。）*

我要扮演魔鬼的拥护者，因为我讨厌人们同意太多。

### 1\. 如果您需要一个依赖于另一个样式表的样式表，请使用@import。在单独的步骤中进行优化。

在任何给定时间，您都在优化两个变量——代码的*性能和开发人员*的性能。在很多情况下，如果不是大多数情况下，更重要的是*让开发人员更有效率，然后才能让代码更高效*。

如果您有一个样式表*依赖*于另一个样式表，最合乎逻辑的做法是将它们放在两个单独的文件中并使用@import。*对于下一个查看代码的人来说，这将是最合乎逻辑的。*

> （这种依赖什么时候会发生？在我看来，这非常罕见
> 
> *   通常一个样式表就足够了。但是，有一些合乎逻辑的地方可以将东西放在不同的 CSS 文件中：）
>     
>     
> *   主题：如果同一页面有不同的配色方案或主题，它们可能会共享一些组件，但不是所有组件。
>     
>     
> *   子组件：一个人为的示例 - 假设您有一个包含菜单的餐厅页面。如果菜单与页面的其余部分有很大不同，则将其保存在自己的文件中会更容易维护。

通常样式表是独立的，所以使用`<link href>`. 但是，如果它们是依赖层次结构，您应该做最符合逻辑的事情。

**Python 使用导入；C用途包括；JavaScript 有要求。CSS 有导入；当你需要它时，使用它！**

### 2\. 一旦你到达网站需要扩展的地步，连接所有的 CSS。

**任何**类型的多个 CSS 请求——无论是通过链接还是通过@imports——对于高性能网站来说[都是不好的做法。](https://developers.google.com/speed/docs/best-practices/rtt#CombineExternalCSS)一旦你到了优化很重要的地步，你所有的 CSS 都应该通过一个缩小器。[Cssmin](https://github.com/gruntjs/grunt-contrib-cssmin/pull/25)结合了 import 语句；正如@Brandon 指出的那样，grunt 也有多种选择。（[另见这个问题](https://stackoverflow.com/questions/787789/any-recommendations-for-a-css-minifier)）。

正如人们所指出的那样，一旦您处于缩小阶段，`<link>`速度会更快，因此最多链接到几个样式表，并且尽可能不要@import。

**不过，在网站达到生产规模之前，更重要的是代码的组织性和逻辑性，而不是速度稍微快一点。**

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-05T22:50:50.967

出于速度原因，最好不要`@import`在页面中包含 CSS。请参阅这篇出色的文章以了解为什么不这样做：http: [//www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)

此外，缩小和合并通过 @import 标签提供的 css 文件通常更困难，因为缩小脚本无法从其他 css 文件中“剥离”@import 行。当您将它们包含为 <link 标记时，您可以使用现有的 minify php/dotnet/java 模块进行缩小。

所以：使用`<link />`而不是`@import`.

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-05T22:51:11.367

使用链接方法，样式表被并行加载（更快更好），几乎所有浏览器都支持链接

import 一个接一个地加载任何额外的 css 文件（速度较慢），并且可以为您提供 Flash Of Unstyled Content

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-10-31T14:12:42.643

@Nebo Iznad Mišo Grgur

以下都是使用@import的正确方法

```
@import url("fineprint.css") print;
@import url("bluish.css") projection, tv;
@import 'custom.css';
@import url("chrome://communicator/skin/");
@import "common.css" screen, projection;
@import url('landscape.css') screen and (orientation:landscape); 
```

来源：[https ://developer.mozilla.org/en-US/docs/Web/CSS/@import](https://developer.mozilla.org/en-US/docs/Web/CSS/@import)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-07-18T00:07:20.103

**`@import`作为使用 CSS 的现代解决方案，效果很好。**我强烈推荐它！许多年轻、缺乏经验的开发人员的假设存在错误`@import`，使得反对它的“阻塞”论点完全错误。

首先，多个`@imports`组合在一个嵌入`<style>`元素或一个`<link>`标签内的多个都*相互并行*下载。（即使对于旧的 IE 浏览器也是如此）。在标签和父 CSS 表中有多个`@import`规则的情况下`<link>`，这些也都并行下载并使用与父样式表相同的连接。他们只是不与父表和它可能包含的任何 CSS 并行下载。

因此，下面这个链接表中的@import 表都相互并行下载。所以如果我们有这个父表：

```
<link media="screen" rel="stylesheet" type="text/css" href="parent.css" /> 
```

...然后在上面的**parent.css**表中，我们有以下`@import`子级，它们都应该在大多数浏览器中并行下载并共享相同的 TCP 连接：

```
@import url('child1.css');
@import url('child2.css');
@import url('child3.css');
@import url('child4.css'); 
```

`@import`在下面的第二个示例中，嵌入在 HTML标记中的这些声明`<style>`也应该彼此并行下载，只是随机的。同样，这在许多较旧的浏览器和较新的浏览器中都以这种方式工作。根据我的阅读，他们可能会遇到这样的顺序问题`@import`，但是在这种类型的设计中，您的 CSS 应该很少依赖于级联顺序。

```
<style>
  @import url('child1.css');
  @import url('child2.css');
  @import url('child3.css');
  @import url('child4.css');
</style> 
```

**唯一`@import`有问题的是以下有限的场景：**

1.  您主要使用的是 IE 版本 4-9，它在历史上具有有限的连接（例如，IE6 与服务器的连接只有 2 个）。使用这些浏览器`@import`，各种链接的 CSS 组合无法并行下载。这也会影响`<link>`CSS 下载，所以这并不是反对`@import`.
2.  在上面的第一种情况下，`<link>`父样式表包含导入的表单，因为父表单必须首先连接并解析其 CSS 文件，所以它向服务器添加了一个额外的连接。这是合乎逻辑的，应该是可以预料的。如果您的工作表只有导入而没有 CSS（我建议），没有用于解析 @import 的 CSS 会立即开始，并且应该使用与父级相同的连接来下载文件。
3.  在上面的第一种情况下，`<link>`父样式表包含多个导入的表，如果父表在 @imports 声明之后还有额外的 CSS，那么是的，会有一个真正的“阻塞”CSS 连接。在那种情况下，必须先下载父 CSS 文件，首先完成其 CSS 解析和下载，发现 @imports，然后下载 @import 样式并将它们放在文件中的 CSS 之前，然后文件完成。这在逻辑上是有道理的，为什么你不应该**在任何 CSS 样式表中将****CSS 与样式规则结合起来`@import`**。我从来没有这样做。如果您删除父文件中的 CSS，导入将立即通过父文件连接调用其文件，而不会延迟。
4.  如果您将`<link>`没有导入规则的样式表与带有`@import`或嵌入的链接样式表组合`<style>`在一起`@import`，**则仅在 Internet Explorer 中，它们通常不会并行下载**。其他浏览器管理得很好。如前所述，这可能与 IE 的有限浏览器连接有关。

因此，根据这些规则，在大多数情况下，**@import 可以正常工作**。主要问题是在将 @import 添加到具有大量纯 CSS 的工作表中时。这种类型的事情是有道理的，并且会导致很长的延迟，因为父级解析自己的 CSS 然后发现额外的`@imports`.

请记住，现代浏览器大约有 6 个可用连接，因此`@import`不会成为瓶颈，文件过多或 LARGE 文件过多加上非异步 JavaScript 会阻碍网页中的解析和呈现。顺便说一句，您现在典型的 JavaScript API 下载是 1.5 兆字节！

**更新**

还有很多使用@import 的好理由！

使用@import 的一个重要原因是进行跨浏览器设计。通常，导入的工作表对许多较旧的浏览器是隐藏的，这使您可以为非常旧的浏览器应用特定格式，例如 Netscape 4 或更早系列、Mac 的 Internet Explorer 5.2、Opera 6 和更早的版本以及 PC 的 IE 3 和 4。 ...然后使用`@import`添加这些浏览器看不到的现代样式表，因为许多旧浏览器无法识别某些版本的`@import`.

例如，添加一个所有新旧浏览器都可以看到的普通样式表：

```
<link media="screen" rel="stylesheet" type="text/css" href="styles.css" /> 
```

......里面有这个CSS......

```
body {
  font-size:13px;
} 
```

现在，在您导入的自定义工作表 (newerbrowsers.css) 中，只需应用较新的样式来覆盖上述样式，仅适用于较新的浏览器。较新的浏览器使用“em”单位，较旧的浏览器使用“px”。很多旧浏览器都看不到下面的这个版本`@import`，包括 IE 1-7、MAC IE 5、Netscape 4 和许多其他浏览器：

```
<link media="screen" rel="stylesheet" type="text/css" href="newerbrowsers.css" /> 
```

...只有较新的浏览器才能看到这个@import。将此@import 格式与“全部”一起使用，它将在 IE1-7 浏览器中隐藏，等等！

```
@import 'imported.css' all; 
```

...在 @import 中使用这个 CSS ...

```
html body {
  font-size:1em;
} 
```

使用“em”单位优于“px”单位，因为它允许字体和设计根据用户设置进行拉伸，而旧版浏览器使用基于像素的效果更好（这是刚性的，无法在浏览器用户设置中更改） . 大多数旧浏览器看不到导入的工作表。

你可以这样，谁在乎！尝试去一些更大的过时的政府或公司系统，你仍然会看到那些旧的浏览器被使用。但它真的只是很好的设计，因为你今天喜欢的浏览器有一天也会过时和过时。并且以有限的方式使用 CSS 意味着您现在拥有一个更大且不断增长的用户代理组，这些用户代理不能与您的网站很好地配合使用。

使用`@import`，您的跨浏览器网站兼容性现在将达到 99.9% 饱和度，这仅仅是因为许多旧浏览器不会读取导入的表格。它保证您为他们的 html 应用基本的简单字体集，但较新的代理使用更高级的 CSS。这允许较旧的代理访问内容，而不会影响较新的桌面浏览器所需的丰富视觉显示。请记住，现代浏览器在第一次调用网站后会非常好地缓存 HTML 结构和 CSS。对服务器的多次调用不再是曾经的瓶颈。

上传到智能设备的数兆字节和数兆字节的 Javascript API 和 JSON 以及设计不佳且页面之间不一致的 HTML 标记是当今呈现缓慢的主要驱动力。您的平均 Google 新闻页面超过 6 兆字节的 ECMAScript 只是为了呈现一点点文本！LOL 几千字节的缓存 CSS 和一致的干净 HTML 以及较小的 javascript 足迹将在用户代理中以闪电般的速度呈现，这仅仅是因为浏览器缓存了一致的 DOM 标记和 CSS，除非您选择通过 javascript 马戏团技巧来操作和更改它。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-04-05T22:45:34.973

在头部添加 CSS 样式表与使用导入功能并没有太大区别。Using`@import`通常用于链接样式表，以便可以轻松扩展。它可以用于轻松交换不同的颜色布局，例如与一些通用的 css 定义结合使用。我想说主要的优势/目的是可扩展性。

我也同意 xbonez 的评论，因为可移植性和可维护性是额外的好处。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-05T22:54:07.843

它们非常相似。有些人可能会争辩说@import 更易于维护。但是，每个 @import 都会以与使用“链接”方法相同的方式花费您一个新的 HTTP 请求。因此，在速度方面，它并不快。正如“duskwuff”所说，它不会同时加载，这是一个失败。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-10-31T14:09:45.927

我使用@import 的一个地方是当我在做一个页面的两个版本时，英语和法语。我将使用 main.css 用英语构建我的页面。当我构建法语版本时，我将链接到法语样式表 (main_fr.css)。在法语样式表的顶部，我将导入 main.css，然后为法语版本中我需要的不同部分重新定义特定规则。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-04-19T22:05:34.400

引自[http://webdesign.about.com/od/beginningcss/f/css_import_link.htm](http://webdesign.about.com/od/beginningcss/f/css_import_link.htm)

> @import 方法的主要目的是在一个页面上使用多个样式表，但在你的 <head> 中只有一个链接。例如，一家公司可能对网站上的每个页面都有一个全局样式表，其中的子部分具有仅适用于该子部分的附加样式。通过链接到子部分样式表并在该样式表顶部导入全局样式，您不必维护包含站点和每个子部分的所有样式的巨大样式表。唯一的要求是任何 @import 规则都必须位于您的其他样式规则之前。请记住，继承仍然是一个问题。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-08-04T22:55:39.293

有时您必须使用 @import 而不是 inline 。如果您正在处理具有 32 个或更多 css 文件的复杂应用程序，并且您必须支持 IE9，则别无选择。IE9 忽略前 31 个之后的任何 css 文件，这包括和内联 css。但是，每个工作表可以导入 31 个其他工作表。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-04-05T22:47:03.370

我认为这其中的关键是您实际上要编写多个 CSS 样式表的两个原因。

1.  您编写多张工作表是因为您网站的不同页面需要不同的 CSS 定义。或者至少不是所有这些都需要其他页面需要的所有 CSS 定义。因此，您拆分 CSS 文件以优化在不同页面上加载的工作表并避免加载过多的 CSS 定义。
2.  想到的第二个原因是您的 CSS 变得如此庞大以至于处理起来变得笨拙，为了更容易维护大型 CSS 文件，您将它们拆分为多个 CSS 文件。

对于第一个原因，附加`<link>`标签将适用，因为这允许您为不同的页面加载不同的 CSS 文件集。

由于第二个原因，该`@import`语句看起来最方便，因为您获得了多个 CSS 文件，但加载的文件总是相同的。

从加载时间的角度来看没有什么不同。浏览器必须检查和下载分离的 CSS 文件，无论它们是如何实现的。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-12-17T17:34:15.043

如果您使用 CSS RESET，请在您的 CSS 中使用 @import，例如 Eric Meyer 的 Reset CSS v2.0，因此它在应用您的 CSS 之前就完成了它的工作，从而防止了冲突。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-09-27T17:27:59.073

我认为@import 在为多个设备编写代码时最有用。包含一个条件语句以仅包含相关设备的样式，然后仅加载一张工作表。您仍然可以使用链接标签添加任何常见的样式元素。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-09-10T22:46:47.970

我经历了您可以添加的链接样式表的“高峰”。虽然添加任意数量的链接 Javascript 对我的免费主机提供商来说不是问题，但在将外部样式表数量增加一倍后，我遇到了崩溃/减速。正确的代码示例是：

```
@import 'stylesheetB.css'; 
```

因此，正如 Nitram 所提到的，我发现它对于拥有良好的思维导图很有用，同时仍在对设计进行硬编码。神速。我原谅英语语法错误，如果有的话。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-05T08:52:18.680

现代浏览器可以使用 css 文件来定义全局变量。该文件可以导入到其他可以使用变量的 css 文件中。

例如，要在整个站点中使用一致的颜色：

1.  颜色.css

    ```
    :root {
       --bg-dark: #ffffff;
    } 
    ```

2.  主页.css

    ```
    @import "colors.css";

    body: var(--bg-dark) 
    ```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2014-11-12T15:37:46.400

几乎没有理由使用@import，因为它会单独加载每个导入的 CSS 文件，并且会显着降低您的网站速度。如果您对处理 CSS 的最佳方式（涉及页面速度）感兴趣，那么您应该使用以下方式处理**所有**CSS 代码：

*   **打开所有 CSS 文件并复制每个文件的代码**
*   **将所有代码粘贴在页面 HTML 标头中的单个 STYLE 标记之间**
*   **除非您有大量代码或有特殊需要，否则切勿使用 CSS @import 或单独的 CSS 文件来交付 CSS。**

更多详细信息：http: [//www.giftofspeed.com/optimize-css-delivery/](http://www.giftofspeed.com/optimize-css-delivery/)

上面的效果最好的原因是因为它为浏览器创建了更少的请求来处理，它可以立即开始渲染 CSS 而不是下载单独的文件。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-03-29T22:18:58.737

这可能会帮助 PHP 开发人员。下面的函数将删除所有 CSS 文件的空白、删除注释和连接。然后在页面加载之前将其插入`<style>`头部的标签中。

下面的函数将删除注释并缩小传入的 css。它与下一个功能一起配对。

```
<?php
function minifyCSS($string)
{
    // Minify CSS and strip comments

    # Strips Comments
    $string = preg_replace('!/\*.*?\*/!s','', $string);
    $string = preg_replace('/\n\s*\n/',"\n", $string);

    # Minifies
    $string = preg_replace('/[\n\r \t]/',' ', $string);
    $string = preg_replace('/ +/',' ', $string);
    $string = preg_replace('/ ?([,:;{}]) ?/','$1',$string);

    # Remove semicolon
    $string = preg_replace('/;}/','}',$string);

    # Return Minified CSS
    return $string;
}
?> 
```

您将在文档的头部调用此函数。

```
<?php
function concatenateCSS($cssFiles)
{
    // Load all relevant css files

    # concatenate all relevant css files
    $css = '';
    foreach ($cssFiles as $cssFile)
    {
        $css = $css . file_get_contents("$cssFile.css");
    }

    # minify all css
    $css = minifyCSS($css);
    echo "<style>$css</style>";
}
?> 
```

`concatenateCSS()`在您的文档头中包含该功能。传入一个数组，其中包含样式表的名称及其路径 IE: `css/styles.css`。您不需要添加扩展名`.css`，因为它是在上面的函数中自动添加的。

```
<head>
    <title></title>
    <?php
    $stylesheets = array(
        "bootstrap/css/bootstrap.min", 
        "css/owl-carousel.min", 
        "css/style"
        );
    concatenateCSS( $stylesheets );
    ?>
</head> 
```

# python - Python rpyc 无法远程运行 psutil 命令

> ID：10036981
> 
> 赞同：4
> 
> 时间：2012-04-05T22:37:34.827
> 
> 标签：python, rpyc

我正在尝试`psutil`远程运行命令：

```
import os, sys, time
import rpyc
import psutil

command = """def rpcexecute():
       import psutil
       cpu = psutil.cpu_percent(interval=1)
       return cpu"""

conn = rpyc.classic.connect('192.168.0.100')
conn.execute(command)
remote_exec = conn.namespace['rpcexecute']
result = remote_exec() 
```

我有一个错误：`"ImportError: No module named psutil"`，但我已经安装`psutil`在两者（远程和本地主机）中。

`import os`例如，当我测试使用时，它工作正常。

一些小费？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:30:48.733

解决了！

我已经在服务器上重新启动了 rpyc 经典服务，然后再试一次。现在它工作正常。

BR,

朱尼克斯

# jsp - 无法使用 JSTL 访问 Map 内的 Map

> ID：10036982
> 
> 赞同：0
> 
> 时间：2012-04-05T22:37:35.123
> 
> 标签：jsp, tomcat, jstl

我`Map`在 Java 中有一个包含另一个`Map`的 ，如下所示：

```
Map<String, Map<String, Object>> myMap = ... 
```

我知道这不是传递数据的理想方式，但对于测试而言，它比充实仅用于将数据推送到 JSTL 的类更容易。

话虽如此，我们无法在二级中获取值`Map`：

```
${ myMap[someString1][someString2] != null } 
```

加载页面时会导致编译错误：

```
org.apache.jasper.JasperException: /mypage.jsp (line: 142, column: 9) "${ myMap[someString1][someString2] != null }" contains invalid expression(s): javax.el.ELException: Failed to parse the expression [${ myMap[someString1][someString2] != null }]
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42) 
```

**奇怪的是**，它在运行 Tomcat 6.0.29 的机器上运行良好，而在运行 7.0.26 的机器上却失败了。

**编辑：**在这两种情况下，webapp 都使用 JSTL-1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T00:55:39.390

原来是一个facepalm的答案。我更改了变量名称以混淆代码的用途，认为这会使事情更容易理解，而实际上它掩盖了问题。

原代码：

```
<c:forEach items="${someobject.items}" var="interface">
    ...
    ${ myMap[interface][someString2] != null }
    ...
</c:forEach> 
```

`forEach`注意循环的变量名——`interface`当然是保留的 Java 关键字，但是堆栈跟踪并没有很好地引起人们的注意。

将变量名称更改为`interfaze`或其他任何内容都可以解决问题。

# eclipse - 查找丢失的 Maven 工件

> ID：10036984
> 
> 赞同：10
> 
> 时间：2012-04-05T22:37:57.330
> 
> 标签：eclipse, maven, dependencies

我是 Maven 新手，正在努力添加依赖项。我正在尝试将现有项目转换为 Maven，并在我引用的库中添加所有 jar 的依赖项后，我收到有关缺少工件的错误消息：

```
Missing artifact stax:stax:jar:1.0    
Missing artifact clover:clover:jar:1.3-rc4
Missing artifact log4j:log4j:bundle:1.2.16
Missing artifact stax:stax-ri:jar:1.0 
```

通过阅读这篇文章：[如何处理 Maven 缺少工件错误？](https://stackoverflow.com/questions/5390732/how-to-handle-maven-missing-artifact-errors)，听起来我需要手动下载这些jar并将它们添加到我的本地maven存储库中。我的问题是如何找到这些罐子？我试着用谷歌搜索它们，我可以找到名称相似的罐子，但不完全像这些，所以我不确定它们是否是正确的罐子。

处理此问题的任何提示？log4j jar 是我原始项目的引用库中唯一明确列出的，所以我猜其他的是我拥有的其他 jar 所需要的，我不知道在哪里可以找到它们或它们的确切名称应该。

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T17:15:18.253

感谢大家的回复。问题的实际原因是，对于这 3 个缺失的工件中的每一个，由于某种原因，当 Maven 将它们下载到我的本地存储库中时，.lastUpdated 被附加到 jar 的末尾。例如，stax-1.0.jar.lastUpdated。这就是 Maven 找不到 stax-1.0.jar 的原因。

因此，为了解决这个问题，我不得不手动下载 stax-1.0.jar，然后将其安装到本地 maven 存储库中与混乱文件完全相同的位置，以便 Maven 可以找到它。（例如，使用以下命令：

```
mvn install:install-file -Dfile=<path-to-file>/stax-1.0.jar         
-DgroupId=stax -DartifactId=stax -Dversion=1.0 -Dpackaging=jar 
```

使用与现有的不正确文件相同的 groupId 和 artifactId 对于 maven 找到它至关重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:29:24.603

您可以在 maven.apache.org 下找到依赖项搜索站点。转到左侧导航菜单条目常见问题解答（官方）和图恩到页面末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T09:51:16.723

使用[maven 搜索](http://search.maven.org/#advancedsearch%7Cgav)或[mvnrepository.com](http://mvnrepository.com/)。如果在其他公共存储库中找不到使用 google 查找 jar，例如 stax：

[maven stax-ri pom](http://www.google.com/search?q=maven%20stax-ri%20pom)

我的第一个结果是：

[http://maven.nuxeo.org/nexus/content/groups/public/stax/stax-ri/1.0/](http://maven.nuxeo.org/nexus/content/groups/public/stax/stax-ri/1.0/)

其他公共存储库：

[http://download.java.net/maven/2](http://download.java.net/maven/2)

[http://download.java.net/maven/1](http://download.java.net/maven/1)

[http://repository.codehaus.org](http://repository.codehaus.org)

[http://repository.jboss.org/nexus/content/groups/public-jboss](http://repository.jboss.org/nexus/content/groups/public-jboss)

[http://maven.springframework.org/release](http://maven.springframework.org/release)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-15T10:14:55.823

您可以尝试将新的存储库添加到您的 pom.xml

```
<repositories>
     <repository>
    <id>java.net</id>
    <url>http://download.java.net/maven/2/</url>
    </repository>
      <repository>
        <id>jboss</id>
        <url>http://repository.jboss.com/maven2</url>
 </repository>
</repositories> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T22:53:47.673

您的 POM 定义更有可能对 log4j 不正确。与 log4j 相关的所有内容都应该在 maven 中很容易获得。

此外，如果您知道捆绑包的名称（例如 log4j），您几乎总是可以在前几次点击中进行快速 google 搜索***“[捆绑包名称] maven pom”*** ，您应该获取包含有关如何使用的快速片段的 maven 存储库包括它，或捆绑的 jar 的实际网站和 maven 说明。

**例如 log4j：**

```
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
</dependencies> 
```

有时您只需要指定存储库即可在其中找到项目（如果它未托管在更大的 maven 存储库中）

您可以像这样指定一个新的存储库

```
<repositories>
    <repository>
        <id>Java.Net</id>
        <url>http://download.java.net/maven/2/</url>
    </repository>
</repositories> 
```

最后，当您绝对找不到已经为您准备好的工件时（这通常适用于您无法包含在项目中的专有 jar 和/或驱动程序），您可以让用户通过命令行手动安装该项目

> mvn install:install-file -DgroupId=[group-id] -DartifactId=[artifact-id] -Dversion=[version] -Dfile=/path/to/the/file -Dpackaging=[type]

然后，您可以使用上述信息在您的 Maven 文件中引用它

**例如**，我有一个 salesforce.com 项目的自定义参考

> mvn install:install-file -DgroupId=com.salesforce -DartifactId=wsc -Dversion=22 -Dfile=\tsclient\H\development\java\wsc-22.jar -Dpackaging=jar

要在 Maven 中访问它：

```
<dependency>
    <groupId>com.salesforce</groupId>
    <artifactId>wsc</artifactId>
    <version>22</version>
</dependency> 
```

最后，您可以在各自的网站上找到 jars（或他们的 maven 信息）（请注意，我只是将这些链接基于 jar 名称，这些可能不是实际的网站，没有我知道是正确的 log4j )

[斯塔克斯](http://stax.codehaus.org/Download)

[三叶草](http://www.atlassian.com/software/clover/download-archives)

[日志4j](http://logging.apache.org/log4j/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-04T14:35:45.730

几天后，这个愚蠢的错误困扰了我，我找到了以下[文章](http://www.mograblog.com/2013/01/troubleshooting-missing-artifact-in-eclipse-maven-repository.html)

作者描述有一个工作空间存储库，它可能已经过时了。就我而言，它有助于再次导入正确的插件。工作区存储库已更新，一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T12:18:06.817

您的问题可能与[MNG-4142](http://jira.codehaus.org/browse/MNG-4142)有关。这个错误意味着如果在 artifact`localCopy`中设置为maven 将不会下载新的快照。`true``maven-metadata-local.xml`

请注意，这个错误的标题有点误导，所以它是阅读评论的工作。

您可能认为使用`-U`带有 maven 的标志可以解决此问题，但显然情况并非如此。

当前的解决方法似乎是搜索 to 的所有实例`maven-metadata-local.xml`并将其值更改`localCopy`为`false`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-10T18:45:19.453

我通过将`log4j`版本从 1.2.15 更改为 1.2.16 解决了这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-28T03:08:28.403

这也可能是由 dom4j 引起的。当我使用以下设置时发生了同样的错误。

```
<dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>20040902.021138</version>
</dependency> 
```

改成以下后，错误消失了。

```
<dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>1.6.1</version>
</dependency> 
```

# linq - linq 列表字符串，如

> ID：10036991
> 
> 赞同：2
> 
> 时间：2012-04-05T22:38:40.347
> 
> 标签：linq

我有一个清单：

```
List(Of String) 
```

我想用 LINQ 过滤它。

我使用这样的东西：

```
newList = (From l In myList Where l Like String.Format("%{0}%", value)).ToList 
```

值类似于`a`or`no`等​​。

我想要类似`LIKE`SQL 的东西：

```
like "%a%" 
```

所以我会得到一个字符串列表，其中`a`每个字符串都有一个。

我该怎么做？

```
dim list1 as list(of string)
list1.Add("aaa")
list1.Add("bbb")
list1.Add("ccc")
list1.Add("abc")
list1 = from l in list1 where ???? 'like "a" return list1 with 2 item : "aaa" and "abc" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T22:42:14.483

列表 a = new List();

a = a.Where(item => item.contains("a")).ToList();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:57:59.477

在 C# 中：

```
var newList = originalList.Where(item => item.Contains("a")).ToList(); 
```

在 VB.Net 中：

```
dim newList = originalList.Where(Function(item) item.Contains("a")).ToList 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T22:41:30.400

```
 (From I in Mylist
   Where I.smth Contains(String)
   Select I); 
```

对于字符串列表，您可以这样做：

```
 (From I in Mylist
   Where I.smth Contains(String(0)) Or I.smth Contains(String(1))...
   Select I); 
```

如果您不知道会得到多少字符串，您可能还需要动态查询。这比较困难，我无法解释

# xml - xpath 计数函数

> ID：10036994
> 
> 赞同：1
> 
> 时间：2012-04-05T22:38:53.727
> 
> 标签：xml, xpath, count

我正在尝试使用 XPath 计数函数来确定以下查询返回了多少元素

```
doc("courses.xml")
count(//Course[contains(Description,"Cross-listed")]) 
```

以下代码返回 2 个课程元素

```
 doc("courses.xml")
//Course[contains(Description,"Cross-listed")] 
```

但是当我尝试使用上面的计数函数返回“2”时，我收到以下错误。

tmpDfWgJ7.xq 的第 2 行第 1 列出错：XPST0003 XQuery 语法错误在 #doc("courses.xml") count(//#: Unexpected token "(" beyond end of query 查询中的静态错误

我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:48:20.150

count(doc("courses.xml") //Course[contains(Description,"Cross-listed")])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:59:07.260

**使用任一**：

```
count(doc("courses.xml") //Course[contains(Description,"Cross-listed")]) 
```

**或者什么可能更具可读性**：

```
doc("courses.xml")/count(.//Course[contains(Description,"Cross-listed")]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T14:07:51.177

这也将起作用。您只需要在计数之前添加 / ：

```
doc("courses.xml")
/count(//Course[contains(Description,"Cross-listed")]) 
```

# rspec - Michael Hartl Rails 教程 (3.2) - 第 5 章 Rspec 问题

> ID：10036996
> 
> 赞同：1
> 
> 时间：2012-04-05T22:39:08.477
> 
> 标签：rspec, ruby-on-rails-3.2, spork, railstutorial.org

我已经完成了第 5 章和所有练习。作为最后练习的一部分，MH 让您为 ApplicationHelper 方法编写测试。

完成后，*单个*测试将通过：

*   `shift-command-T`在 ST2 中（使用 sublime-text-2-ruby-tests 包）
*   `rspec spec/requests/user_pages_spec.rb`在终端
*   `rspec spec/requests/static_pages_spec.rb`在终端

但是，如果我在终端中运行*所有*测试，我会收到此错误：`rspec spec/`

```
/Users/anonymouscoward/rails/railstut/sample_app/spec/helpers/
application_helper_spec.rb:1:in `<top (required)>': uninitialized
constant ApplicationHelper (NameError) 
```

如果我运行 spork 并重试`rspec spec/`，所有测试都会通过。

我不确定我是否理解为什么会这样工作，或者当我想运行我的所有测试时，我是否总是需要在未来运行 spork。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T22:51:59.267

我不确定，但也许你忘了要求 spec_helper。如果是这样，只需将其插入 application_helper_spec.rb 的第一行

```
require 'spec_helper' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:33:04.293

我遇到了同样的问题。感谢您的修复！

我在另一个论坛上找到了这个回复，这似乎有助于思考 Spork 与 Rspec 的关系。

> RSpec 不会“运行”spec_helper。默认情况下，rspec 加载以“_spec.rb”结尾的文件，这些文件是否需要 spec_helper.rb。 [http://www.ruby-forum.com/topic/167768](http://www.ruby-forum.com/topic/167768)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T13:23:02.760

```
describe "ApplicationHelper" do 
```

ApplicationHelper 应该是一个字符串，而不是常量

# javascript - 如何在 checkboxlist 控件的列表中获取值并使用它来验证

> ID：10036998
> 
> 赞同：1
> 
> 时间：2012-04-05T22:39:39.897
> 
> 标签：javascript, asp.net, validation

我在 asp.net 3.5 中有一个表单，它有一个母版页和一个子页（内容页）。表单有几个问题，我使用 asp.net 复选框列表来回答问题，因为可以选择多个选项，如果用户在其中一个选项上选择“其他”，那么他们必须在文本框字段中输入数据。

我制作了以下客户端javascript来验证这一点，但是代码似乎没有检查是否选择了其他选项值，我相信它与html在页面上呈现的方式有关，，，

你能建议如何做到这一点吗？

提前致谢。

渲染的 Javascript

```
//Here I am trying to get the text property of the label rendered for the texbox
// and set my validation arguments
<script language='javascript' type='text/javascript'>

    function checkOther2(oSrc, args) {
        {
            var elementRef =
document.getElementById('ctl00_Content_CheckBoxList1');
            var checkBoxArray = elementRef.getElementsByTagName('input');
            var checkedValues = '';

            for (var i = 0; i < checkBoxArray.length; i++) {
                var checkBoxRef = checkBoxArray[i];

                if (checkBoxRef.checked == true) {

                    // You can only get the Text property, which
    will be in an HTML label element.

                    var labelArray =
checkBoxRef.parentNode.getElementsByTagName('label');

                    if (labelArray.length > 0) {
                        if (checkedValues.length > 0)
                            checkedValues += ',';

                        checkedValues += labelArray[0].innerHTML.text;

                        if (checkedValues == 'Other') {
                            args.IsValid = !(args.Value == "")
                            // test 
                            alert("Hello");
                        }
                    }
                    else {
                        args.IsValid = true;
                    }

                }
            }
        }
    }

// HTML Rendered

           <tr>
               <td style="height: 20px">
                   &nbsp;</td>
           </tr>
           <tr>
               <td style="font-weight: 700">
                   2.- What did you like most about working here?<strong>
                   Check all that apply
                   <span id="ctl00_Content_CheckBoxListValidator1"
style="color:Red;display:none;"></span>
                   </strong><br /> </td>
           </tr>
           <tr>
               <td>

                   <table id="ctl00_Content_CheckBoxList1"
class="myradioButton" border="0">
            <tr>
                    <td><input id="ctl00_Content_CheckBoxList1_0" type="checkbox"
name="ctl00$Content$CheckBoxList1$0" /><label
for="ctl00_Content_CheckBoxList1_0">Staff</label></td>
            </tr><tr>
                    <td><input id="ctl00_Content_CheckBoxList1_1" type="checkbox"
name="ctl00$Content$CheckBoxList1$1" /><label
for="ctl00_Content_CheckBoxList1_1">Facility</label></td>
            </tr><tr>
                    <td><input id="ctl00_Content_CheckBoxList1_2" type="checkbox"
name="ctl00$Content$CheckBoxList1$2" /><label
for="ctl00_Content_CheckBoxList1_2">Pay</label></td>
            </tr><tr>
                    <td><input id="ctl00_Content_CheckBoxList1_3" type="checkbox"
name="ctl00$Content$CheckBoxList1$3" /><label
for="ctl00_Content_CheckBoxList1_3">Other</label></td>
            </tr>
    </table>
               </td>
           </tr>
           <tr>
               <td>
                   If other, please elaborate:<br />
                   <input name="ctl00$Content$txt2other"
type="text" id="ctl00_Content_txt2other" class="txtOther" />
                   &nbsp;<span id="ctl00_Content_CustomValidator3"
style="color:Red;font-weight:700;visibility:hidden;">Please enter a
comment in question #2.</span>
               </td>
           </tr>
           <tr>
               <td>
                   &nbsp;</td>
           </tr>

<tr>
               <td style="font-weight: 700">
                   2.- What did you like most about working here?<strong>
                   Check all that apply
                   <cc1:CheckBoxListValidator
ID="CheckBoxListValidator1" runat="server"
                       ControlToValidate="CheckBoxList1" Display="None"
                       ErrorMessage="Question 2 is
Required"></cc1:CheckBoxListValidator>
                   </strong><br /> </td>
           </tr>
           <tr>
               <td>

   ----------- Actual Markup on asp.net form

                   <asp:CheckBoxList ID="CheckBoxList1"
runat="server" CssClass="myradioButton">
                       <asp:ListItem Text="Staff"
Value="Staff">Staff</asp:ListItem>
                       <asp:ListItem Text="Facility"
Value="Facility">Facility</asp:ListItem>
                       <asp:ListItem Text="Pay"
Value="Pay">Pay</asp:ListItem>
                       <asp:ListItem Text="Other"
Value="Other">Other</asp:ListItem>
                   </asp:CheckBoxList>
               </td>
           </tr>
           <tr>
               <td>
                   If other, please elaborate:<br />
                   <asp:TextBox ID="txt2other" runat="server"
CssClass="txtOther"></asp:TextBox>
                   &nbsp;<asp:CustomValidator
ID="CustomValidator3" runat="server"
                       ClientValidationFunction="checkOther2"
ControlToValidate="txt2other"
                       ErrorMessage="Please enter a comment in
question #2." style="font-weight: 700"
                       ValidateEmptyText="True"></asp:CustomValidator>
               </td>
           </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:01:34.073

你的 JS 看起来相当复杂。尝试更简单的方法...

```
function isValid(f)
{
    var cb = document.getElementById('<%=CheckBoxList1_3.ClientID%>');
    if(cb && cb.checked)
    {
        var tb = document.ElementById('<%=txt2other.ClientID%>');
        if(tb && tb.value.length > 0)
        {
            f.submit();
        }
        else
        {
            alert('Please enter a comment in question #2.');
        }
    }
} 
```

如果您有很多这些，请尝试在复选框上设置一个属性，`value=other`这样当您遍历您的复选框时，您可以使用`if(cb.checked && cb.value == 'other')`