# StackOverflow 问答 11774000-11774999

# html - HTML 填充空白

> ID：11774000
> 
> 赞同：-3
> 
> 时间：2012-08-02T08:47:55.130
> 
> 标签：html

如果有人可以帮助我，我需要第二双眼睛。

我已将我的索引页面上传到此站点[http://preview.tinyurl.com/ct9whug](http://preview.tinyurl.com/ct9whug)

如果您可以查看我的源代码/css 并查看问题所在，因为我的网页顶部有一个空白区域（大约 35px 高），我似乎找不到问题所在是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:03:01.573

实际上，浏览器已将 8px 边距应用于 body 标签，以实现最小格式。要摆脱这种情况，您需要覆盖 body 标签 css 样式。

```
body {
    margin: 0;
} 
```

我发现问题出在 H1 标签上，应用以下规则将解决

```
#header H1 {
   margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:49:53.787

具有`<body>`（默认，非零）边距（或在某些浏览器中填充）。

放：

```
html, body {
    padding: 0;
    margin: 0;
} 
```

......删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:50:03.743

您需要在 CSS 文档的顶部应用此规则。

```
body{margin:0;padding:0} 
```

# vba - 我尝试过 TimeValue() 并尝试使用 excels 分数来指示时间，我尝试了 Hours Minutes 函数和这些函数的组合

> ID：11774001
> 
> 赞同：0
> 
> 时间：2012-08-02T08:47:56.307
> 
> 标签：vba

我无法获取 VBA 代码来比较以下日期和时间：

```
2012/05/01 00:00:00
2012/05/01 00:03:00
2012/05/01 00:06:00
2012/05/01 00:15:00
2012/05/01 00:18:00 
```

在下面给我答案

```
2012/05/01 00:00:00
2012/05/01 00:03:00
2012/05/01 00:06:00
2012/05/01 00:09:00
2012/05/01 00:12:00
2012/05/01 00:15:00
2012/05/01 00:18:00 
```

问题是，如果我将当前日期和时间值与下一个日期和时间值进行比较，excel 有时会认为数据和时间不一样，即使在 VBA 中观察值是相同的。我必须在每个时间戳之间间隔 3 分钟的整个月进行此检查。这些时间戳旁边有数据条目。我只能创建从 2012/05/01 00:00:00 开始到月底结束的时间戳，但我需要它来填写数据集中缺失的条目。下面的代码有效，但仅在上面提到的某些时候有效。我尝试了一些不同的东西，但似乎没有任何效果。

感谢您的任何帮助

```
 Sub Insert_missing_3min() 
```

'在缺少的日期和时间戳所在的日期和时间插入一行，在添加的日期旁边插入一个零。

```
Dim min3 As Date
Dim CurTime As Date
Dim CurCell As Date
Dim NextCell As Date

min3 = 3 / 24 / 60

If (Hour(ActiveCell) <> 0 Or Minute(ActiveCell) <> 0 Or Day(ActiveCell) <> 1) Then      'makes the start date the fisrt of the month at 00:00
  ActiveCell.EntireRow.Insert
  ActiveCell.Value = Year(ActiveCell.Offset(1, 0)) & "/" & Month(ActiveCell.Offset(1, 0)) & "/" & "1"

End If

Maand = Month(ActiveCell)

Do While IsDate(ActiveCell) And Month(ActiveCell) = Maand

        NextCell = DateAdd("n", TimeValue(ActiveCell.Offset(1, 0)), ActiveCell.Offset(1, 0))

        If (NextCell <> DateAdd("n", 3, ActiveCell) And NextCell > DateAdd("n", 3, ActiveCell)) Then
            ActiveCell.Offset(1).EntireRow.Insert
            ActiveCell.Offset(1, 0).Activate
            ActiveCell.Value = DateAdd("n", 3, ActiveCell.Offset(-1, 0))   '3 min time value in excell
            ActiveCell.Offset(0, 1).Value = 0                     ' Value in colum next to date 0
            With Selection.Interior                                 ' Highlight
                .Pattern = xlSolid
                .PatternColorIndex = xlAutomatic
                .Color = 65535
                .TintAndShade = 0
                .PatternTintAndShade = 0
            End With
        Else
            ActiveCell.Offset(1, 0).Activate
        End If
Loop 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:46:59.417

您应该使用该`dateadd`函数来操作日期。

因此，无论您将`date + min3`其更改为`DateAdd("n", 3, date)`

# java - DOM 与 SAX Java

> ID：11774002
> 
> 赞同：2
> 
> 时间：2012-08-02T08:47:56.410
> 
> 标签：java, android, parsing, dom, xml-parsing

我有一个可以从 Internet 下载的大 xml 文件。为了解析它，我尝试使用 DOM 解析器，但是它不允许我跳过某些标签，因为它给了我一个错误。有没有解决的办法？如果我理解正确，SAX 解析器允许您跳过标签，而 DOM 不允许。有人可以澄清这个事实吗，好像是这样，我无法理解 DOM 解析器的优势是什么。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T08:51:33.733

DOM 被设计为一个独立于语言的对象模型来保存任何 XML 数据，因此它是一个庞大而复杂的系统。它非常适合首先加载 XML 文档，然后对其执行各种操作的两阶段方法。另一方面，SAX 被设计为使用单相方法的相当轻量级的系统。使用 SAX，在加载文档时执行用户指定的操作。一些应用程序使用 SAX 生成更小的对象模型，过滤掉不感兴趣的信息，然后像 DOM 一样处理这些信息。请注意，尽管 DOM 和 SAX 是众所周知的“标准”XML API，但还有很多其他可用的 API，有时特定应用程序使用非标准 API 可能会更好。对于 XML，重要的始终是数据。代码可以重写。

一些快速要点：

1.  SAX 比 DOM 快。
2.  SAX 适用于大型文档，因为它占用的内存比 Dom 少。
3.  SAX 花费更少的时间来读取文档，而 Dom 花费更多的时间。
4.  使用 SAX，我们可以访问数据，但不能修改数据。使用 Dom，我们可以修改数据。
5.  我们可以随时随地停止 SAX 解析。
6.  SAX 是顺序解析，但使用 DOM，我们也可以向后移动。
7.  解析机器生成的代码 SAX 更好。解析人类可读的文档 DOM 很有用。

# regex - 正则表达式比较

> ID：11774007
> 
> 赞同：4
> 
> 时间：2012-08-02T08:48:16.573
> 
> 标签：regex, comparison

有没有可以比较两个正则表达式的解决方案，部分重叠，不相交，即我想知道如何比较两个正则表达式。其次，如果正则表达式 1 被正则表达式 2 包含，我可以组合两个正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:58:55.430

假设您有两个表达式 A 和 B，并想查看 A 是否匹配 B 所做的子集。

您需要计算 B 的最小化 DFA，然后将两个表达式组合以将 A 和 B 合并，然后计算该新表达式的最小化 DFA。如果这两个 DFA 相等，则 A 匹配 B 的子集。

本质上，如果不经历构建最小化自动机的过程，您将无法正确检查这一点。但是，它将为该问题提供可验证的真实答案。

组合这两个表达式可以通过创建一个新的表达式来完成，`(A)|(B)`如果你的引擎支持的话，也许用括号代替非捕获变量。

如果您决定全程执行算法，我已经写了一系列关于该过程的文章：

[http://binarysculpting.com/2012/02/11/regular-expressions-how-do-they-really-work-automata-theory-for-programmers-part-1/](http://binarysculpting.com/2012/02/11/regular-expressions-how-do-they-really-work-automata-theory-for-programmers-part-1/)

[http://binarysculpting.com/2012/02/15/converting-dfa-to-nfa-by-subset-construction-regular-expressions-part-2/](http://binarysculpting.com/2012/02/15/converting-dfa-to-nfa-by-subset-construction-regular-expressions-part-2/)

[http://binarysculpting.com/2012/03/21/dfa-state-minimization/](http://binarysculpting.com/2012/03/21/dfa-state-minimization/)

要比较两个自动机，您只需检查状态和转换是否相同。它们应该完全相等。

# c# - XMPP 客户账户注册

> ID：11774011
> 
> 赞同：1
> 
> 时间：2012-08-02T08:48:42.617
> 
> 标签：c#, wpf, visual-studio-2010, xmpp, xmppframework

我正在使用 C# 和 WPF 创建一个客户端聊天应用程序。我已经下载了用 C# 编写的 Xmpp 应用程序。它的功能运作良好。我想使用这个库创建新帐户，但我不知道如何编写或在哪里找到它。

谁能帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:50:02.157

您下载的客户端是基于 jabber-net 的。常见问题解答中是您问题的答案：
[http ://code.google.com/p/jabber-net/wiki/FAQ_Register](http://code.google.com/p/jabber-net/wiki/FAQ_Register)

# git - Git如何从克隆副本重建丢失的中央存储库

> ID：11774013
> 
> 赞同：3
> 
> 时间：2012-08-02T08:48:58.507
> 
> 标签：git, repository, rebuild

我们在单独的服务器上有一个中央 Git 存储库。所有团队成员都已将其克隆到他们的本地计算机并拉/推到该中央存储库。

不幸的是，带有中央仓库的机器已经崩溃并且无法恢复。

现在，我们如何使用开发人员机器上的克隆副本再次重建中央存储库，以及如何将不同克隆存储库的本地更改同步到这个重建的中央存储库？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T09:06:24.263

中央回购没有什么特别的，所以这实际上很容易：

只需初始化一个新的空中央仓库。如果它与旧的 URL 相同，您的开发人员甚至不必添加新的遥控器。

然后让一个开发人员做一个`git push`. 这将导致在该开发人员的机器上启用了远程跟踪的所有分支都在中央服务器上恢复。

然后其他人可以像往常一样再次拉和推。其他开发人员尚未在中央的远程跟踪分支将在此过程中恢复。

如果有人有一个没有远程跟踪的分支，但仍应在中央恢复，则该开发人员需要`git checkout`该分支，然后`git push origin HEAD`（假设起源是中央）。

# python - 自定义模板标签的受限属性仅在生产中

> ID：11774014
> 
> 赞同：2
> 
> 时间：2012-08-02T08:49:02.920
> 
> 标签：python, django, web-applications, beautifulsoup, webfaction

我正在使用这个模板标签：

```
@register.filter
def php_striptags(text, allowed=""):
    soup = BeautifulSoup(text)

    # list all tags
    allowed_tags = allowed.split()

    for tag in soup.find_all(True):
        if tag.name not in allowed_tags:
            tag.unwrap()

    return soup.encode_contents().decode('utf8') 
```

它在开发机器上工作得很好，但我在生产中得到这个错误：

```
Exception Type:     RuntimeError
Exception Value:    restricted attribute
Exception Location:     /usr/local/lib/python2.7/inspect.py in getargspec, line 813 
```

我在 webfaction 上托管我的网站，使用 apache 和 mod_wsgi 运行。有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-19T18:22:08.387

Finally found the real issue, which actually was documented in BeautifulSoup doc: [http://www.crummy.com/software/BeautifulSoup/bs4/doc/#other-parser-problems](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#other-parser-problems)

> If your script works on one computer but not another, it’s probably because the two computers have different parser libraries available. For example, you may have developed the script on a computer that has lxml installed, and then tried to run it on a computer that only has html5lib installed. See Differences between parsers for why this matters, and fix the problem by mentioning a specific parser library in the BeautifulSoup constructor.

So to make your soup, try something like:

```
soup = BeautifulSoup(text, "html.parser") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T20:47:40.363

我相信您没有将 BeautifulSoup 安装到您的系统 Python 库中，而是您已经下载了 BeautifulSoup，并将其放入您的自定义`PYTHONPATH`. 这使您的 BeautifulSoup 副本被视为外部 Python 代码，Python 以受限模式运行它（请参阅[Restricted Execution](http://docs.python.org/2/library/restricted.html)）

`pip`只需通过/安装 BeautifulSoup `easy_install`，或为其安装操作系统包，此错误就会消失。

# java - 从 yyyy-mm-dd 获取当前月份

> ID：11774020
> 
> 赞同：0
> 
> 时间：2012-08-02T08:49:20.193
> 
> 标签：java, mysql

这是从数据库获取当前日期信息的代码。它正在成功运行。

```
public class RetailerWs {
  public int data(){
    int count=0;

    //count++;

    try{
      Class.forName("com.mysql.jdbc.Driver");
      Connection con = DriverManager
         .getConnection("jdbc:mysql://localhost:3306/pro","root","");

      PreparedStatement statement =  con
         .prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
      ResultSet result = statement.executeQuery();

      while(result.next()) {
        // Do something with the row returned.
        count++; //if the first col is a count.
      }     
    }
    catch (Exception exc) {
      System.out.println(exc.getMessage());
    }

    return count;
  }
} 
```

我的疑问是**如何从数据库中获取当前月份的详细信息。**..怎么做...请帮助我。

dis 是我的数据库：

![在此处输入图像描述](../Images/6056ffcaee13a4e579348b82d3bc3a08.png)

在这里我希望输出是如果我运行上述应用程序意味着它显示计数值。如果我希望输出是当前月份的详细信息。例如：我获取当前日期信息意味着检查查询并显示计数值为 2 ..它工作成功。在这里我写的查询是

```
select * from orders where status='Q' AND date=CURDATE()". 
```

它成功地工作了。同样的事情是如何为当前月份的 status=Q 编写查询...所以现在我希望显示输出为 2.但我无法执行 dis.所以请帮助我。怎么样to do.how 我怎样才能改变我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:54:36.553

尝试这个：

```
select month(CURDATE()) 
```

或者

```
select date_format(now(),'%M')as Month_name 
```

获取月份数

```
select date_format('2012-07-26','%m')as Month_number 
```

**回答您更新的问题：**

```
select count(*) from orders where status='Q' AND date=CURDATE()" 
```

只需在查询中添加 count(*) 即可得到结果 '2'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T08:55:51.047

[在这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)尝试`MONTH()`mysql的 功能

# iphone - Monotouch 不再自动启动应用程序

> ID：11774024
> 
> 赞同：1
> 
> 时间：2012-08-02T08:49:33.623
> 
> 标签：iphone, xamarin.ios, monodevelop

以前，当我在 monodevelop 中选择“调试 iPhone”时，它会在我开始调试时在 iPhone 上部署和启动应用程序。

它仍在部署，但不再在 iphone 上启动应用程序，我需要手动执行此操作，否则 Monodevelop 一直说“等待调试器连接”

附加信息：我正在使用 iPhone 电缆进行调试。我升级到山狮 / Xcode 4.4 后它停止工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:40:52.247

它应该工作。OTOH 每种可能情况的矩阵都非常大（Mountain Lion 和 Xcode 4.4 都是最新的）。

最好的办法是[填写错误报告](http://bugzilla.xamarin.com)，除了 OSX 和 Xcode 版本，还包括：

*   设备上使用的 iOS 版本；
*   MonoTouch 版本；
*   MonoDevelop 版本。

对于最后两个（以及 OSX 和 Xcode 的精确构建），您可以通过**About MonoDevelop**轻松地从 MonoDevelop 内部获取它们，选择**版本信息**选项卡并在错误报告中复制/粘贴此数据。

# ruby-on-rails - 无法使 https 工作并使用 SSL 证书

> ID：11774029
> 
> 赞同：1
> 
> 时间：2012-08-02T08:49:52.870
> 
> 标签：ruby-on-rails, ssl, https, ssl-certificate

我将告诉你我的任务：我需要向我的用户付费，但我想通过 SSL 确保它的安全。[我使用这篇](http://www.tc.umn.edu/~brams006/selfsign.html)文章创建了自签名证书。

我遵循了 1A 指令。

此外，安装了这些宝石：

```
 gem 'rack-ssl'
     gem 'bartt-ssl_requirement', '~>1.4.0', :require => 'ssl_requirement' 
```

我只有一个支付页面，所以我在控制器中添加了：

```
 ssl_required :admin_page 
```

在此页面上，管理员查看未付款项并支付给用户。

我阅读了这篇文章[http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/) 并遵循了有关如何使用 https 协议的说明。我试图将它添加到我的 application.rb 和 development.rb 中。

我的 application.rb 中有这一行

```
 config.force_ssl = false 
```

我应该删除它吗？

开发日志中的错误：

```
 Filter chain halted as :ensure_proper_protocol rendered or redirected 
```

我该如何解决这个问题以及我应该如何使用 SSL 证书？

# c# - c# 将 1 个列表切成 3 个？

> ID：11774032
> 
> 赞同：0
> 
> 时间：2012-08-02T08:50:04.770
> 
> 标签：c#, list

我有一个大小为 85160 的动态列表（但它可以改变）。我想把它分成 3 个大小相等的列表。

我正在考虑获取列表的大小。所以那就是：

```
int count = rawData.count; 
```

然后我可以将它除以 3；但我不确定如何将第一组粘贴到一个列表中，然后是下一个等等。

最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:56:43.027

这应该有效。

```
var items = rawData.Count / 3;
var first = rawData.Take(items).ToList();
var second = rawData.Skip(items).Take(items).ToList();
var third = rawDate.Skip(2 * items).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:11:52.687

如果您不关心集合中项目的排序，请尝试此代码。

```
static IEnumerable<IEnumerable<int>> Split(IList<int> source, int count)
    {
        return source
            .Select((value, index) => new { Index = index % count, Value = value })
            .GroupBy(pair => pair.Index)
            .Select(grp => grp.Select(g => g.Value));
    } 
```

使用示例

```
static void Main()
{
   var arrays = Split(new[]{1,2,3,4,5,6,7,8,9,0}, 3);

   foreach(var array in arrays)
   {
        foreach(var item in array)
            Console.WriteLine(item);
        Console.WriteLine("---------------");
   }
} 
```

会给你

1 4 7 0

* * *

2 5 8

* * *

3 6 9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:54:59.160

可能会，`List.GetRange(int index, int count)`会有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:58:54.010

```
var lists = new List<List<YourObject>>();
int chunkCount = 3;
int chunk = rawData / chunkCount;
for (int i = 0; i < chunkCount; i++)
{
    var data = rawData.Skip(i * chunk);

    if (i < chunkCount - 1)
        data = data.Take(chunk);

    lists.Add(data.ToList());
} 
```

什么时候`i == chunkCount - 1`（最后一次迭代）我没有`Take`用来确保我把所有东西都带到最后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:12:05.587

好吧，您通常可以`IEnumerables`使用这样的扩展名来为所有人做这件事。

```
public static IEnumerable<IEnumerable<T>> Chop<T>(
    this IEnumerable<T> source,
    int chopCount)
{
    var chops = new IList<T>[chopCount];

    for (i = 0; i < chops.Length; i++)
    {
        chops[i] = new List<T>();
    }

    var nextChop = 0;
    foreach (T item in source)
    {
        chop[nextChop].Add(item);
        nextChop = nextChop == chopCount - 1 ? 0 : nextChop + 1;
    }

    for (i = 0; i < chops.Length; i++)
    {
        yield return chops[i];
    }   
} 
```

你可以这样使用

```
var chops = rawData.Chop(3); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T10:27:12.477

这是一个使用 IEnumerable 扩展的解决方案，它将序列划分为多个子序列：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            int count = 85160;
            var someNumbers = Enumerable.Range(0, count).ToList();
            var lists = PartitionToEqualSizedLists(someNumbers, 3);

            foreach (var list in lists)
            {
                Console.WriteLine("List length = " + list.Count);
            }

            Console.WriteLine("\nDone.");
            Console.ReadLine();
        }

        public static List<List<T>> PartitionToEqualSizedLists<T>(List<T> input, int numPartitions)
        {
            int blockSize = (input.Count + numPartitions - 1)/numPartitions;
            return input.Partition(blockSize).Select(partition => partition.ToList()).ToList();
        }
    }

    public static class EnumerableExt
    {
        public static IEnumerable<IEnumerable<T>> Partition<T>(this IEnumerable<T> input, int blockSize)
        {
            var enumerator = input.GetEnumerator();

            while (enumerator.MoveNext())
            {
                yield return nextPartition(enumerator, blockSize);
            }
        }

        private static IEnumerable<T> nextPartition<T>(IEnumerator<T> enumerator, int blockSize)
        {
            do
            {
                yield return enumerator.Current;
            }
            while (--blockSize > 0 && enumerator.MoveNext());
        }
    }
} 
```

# android - Amazon Android 应用内购买 SDK 的 minSdkVersion 是什么？

> ID：11774033
> 
> 赞同：1
> 
> 时间：2012-08-02T08:50:08.237
> 
> 标签：android, sdk, version, in-app-purchase, amazon

一些亚马逊文档暗示它是 10，但示例以 8 运行。那么正确/安全/实用的答案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T23:31:52.930

根据维基百科[http://en.wikipedia.org/wiki/Kindle_Fire](http://en.wikipedia.org/wiki/Kindle_Fire)，第一个 Kindle Fire 基于 Android 2.3.4，它基于 Android SDK 版本 10。因此使用低于 10 的 minSdkVersion 没有任何好处。

如果您使用低于 10 的 minSdkVersion，您的应用程序将在所有 Kindle Fire 上运行，因为新的 Android 版本可以运行为旧 Android 版本编写的应用程序。

但是，如果您指定最低 SDK 版本 10，您可以使用 SDK 版本 10 中可用但 Android SDK 版本 8 中不可用的所有 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:54:30.767

这是应用程序的最低 SDK 要求，应用程序开发人员将此变量设置为不安装此应用程序的设备版本低于最低 SDK 版本，这只是一个安全检查，不要在不兼容的设备上安装应用程序

# c++ - 如何渲染一个顶点尽可能少的圆？

> ID：11774038
> 
> 赞同：13
> 
> 时间：2012-08-02T08:50:19.817
> 
> 标签：c++, math, geometry

我试图弄清楚如何决定我需要多少个顶点才能使我的圆看起来尽可能平滑。

这是两个圆的示例，两个圆都有 24 个顶点： ![在此处输入图像描述](../Images/292f70e75257a5dd717ea4a346bb296d.png)

如您所见，圆圈越大，隐藏直线所需的顶点就越多。

起初我认为边缘上的一条线的最小长度应该是 6px，但是当我增加圆的大小时，这种方法失败了：我得到了太多的顶点。我也考虑过计算角度，但我很快意识到角度在不同大小的圆上没有区别。我也检查了[这个](https://stackoverflow.com/questions/2243668/when-drawing-an-ellipse-or-circle-with-opengl-how-many-vertices-should-we-use)答案，但我不知道如何将其转换为代码（还有一些奇怪的东西：`th`使用自身来计算自身），我认为它甚至不起作用，因为作者使用的是从一个切片到圆中间的角度，如果圆变大，这个角度不会改变。

然后我意识到，也许解决方案是检查边缘两个顶点之间的角度，以这种方式：

![在此处输入图像描述](../Images/31dd96d0ad3a93ba5cb88e9c98b48eae.png)

如您所见，顶点越少，这些三角形的长度就越大。所以这必须是答案，我只是不知道如何使用这些信息计算顶点数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T09:18:59.867

您链接到的答案实际上完全实现了您在问题末尾提出的想法。

您需要从该答案中获得的决定性公式是这个：

```
th = arccos(2 * (1 - e / r)^2 - 1) 
```

这告诉您两个顶点之间的角度，其中`r`是圆的半径，`e`是您愿意容忍的最大误差，即多边形与圆的最大偏差 - 这是图表中标记的错误。例如，您可以选择设置`e`为 0.5 个像素。

因为`th`是以弧度为单位测量的，而 360 度（一个完整的圆）等于以`2*pi`弧度为单位，所以您需要的顶点数是

```
num_vertices = ceil(2*pi/th) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-02T19:17:24.800

如果您想从圆心绘制多边形三角形，所需边数的公式为：

`sides = PI / arccos(1 - error / radius)`

其中`error`是多边形与圆的最大偏差，以像素`radius`为单位，也以像素表示。

错误`0.33`似乎产生的结果与理想的圆没有区别。错误绘制的圆圈`0.5`，在仔细检查时仍然显示出一些微妙可见的边之间的角度，特别是在小圆圈中可见。

当半径远小于误差时，此函数显然会失效，并且可能会产生`NaN`值。在这种情况下，您可能需要使用特殊情况（例如绘制 3 条边）。

下图显示了从函数获得的边数，错误设置为`0.33`：

[![](../Images/7e5d3149fb83cd32e8f7da2b335b9450.png)](https://i.stack.imgur.com/gULxu.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:58:49.530

首先，如果您使用的是 OpenGL 或 DirectX，则可以通过使用[三角形扇形](http://en.wikipedia.org/wiki/Triangle_fan)结构来显着减少顶点数量。

至于顶点数量的问题，我会想象一个平滑的圆与圆周缩放所需的顶点数量。这与 r 成比例，所以我建议找到一个好的因素`A`，例如：

`#vertices = A * r`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:01:38.867

在 24 个顶点的两种情况下，角度相同。

但圈越大，人眼就能更好地看到个别的直线。

所以你需要一些启发式来考虑

*   曲线中两个连续线段之间的角度，以及

*   大小，可能还有

*   显示的缩放比例。

第三点很困难，因为人们通常不知道某些图形将显示的大小。例如，可以以任何尺寸显示 SVG 格式的图片。我认为最通用的解决方案是在渲染器中直接支持各种图形（贝塞尔线、圆等），然后用几个参数定义图形而不是点序列。或者，根据渲染器支持的某个图形来定义它，例如作为连接的贝塞尔曲线序列。这样，渲染器可以添加必要数量的点，使其看起来平滑美观。

但是，我猜您并没有创建渲染器，所以也许只有上面的前两点是相关的。

# oracle - “来自客户端的 Sql*net 消息”中的会话，但处于活动状态

> ID：11774040
> 
> 赞同：0
> 
> 时间：2012-08-02T08:50:31.447
> 
> 标签：oracle, jdbc

我用谷歌搜索了一下，我的印象是

> 来自客户端的 Sql*net 消息

表明 Oracle DBMS 正在等待客户端向 DBMS 发送新命令，因此在此事件中花费的任何时间都应该是客户端时间，而不是消耗 DB 服务器 CPU。换句话说，通常情况下，如果一个会话在这个事件中，它应该是“不活跃的”而不是“活跃的”。

令我们困惑的是，从本周开始（在我们开始使用连接池 [我们使用 dbcp] 之后），我们偶尔会在

> 来自客户端的 Sql*net 消息

事件并在较长时间内同时显示“活动”。在这段时间内，数据库上的 CPU 使用率很高。

任何人都可以阐明这意味着什么？如果数据库会话正在等待客户端发送消息，它可以是“活动”并消耗 CPU 周期的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:24:57.820

如果您在 V$SESSION 视图中看到此事件，您还需要检查 STATE 列的值以确定会话是空闲还是实际上正在工作。

这基于以下 Oracle Magazine[文章：](http://www.oracle.com/technetwork/issue-archive/2012/12-jul/o42dba-1566567.html)

> 您不能单独查看 EVENT 列来找出会话正在等待什么。您必须首先查看 STATE 列以确定会话是在等待还是在工作，然后检查 EVENT 列。

# x509certificate2 - 即使授予 MMC 权限，STS 密钥集也不存在

> ID：11774046
> 
> 赞同：1
> 
> 时间：2012-08-02T08:50:59.007
> 
> 标签：x509certificate2, sts-securitytokenservice, applicationpoolidentity

我的应用程序即时创建虚拟目录以及在这些虚拟目录中运行的启用 STS 的 Web 应用程序的应用程序池。应用程序池在 ApplicationPoolIdentity 帐户 (IIS APPPOOL\MyAppPool) 下运行。而且我一直在尝试找出以编程方式授予对已安装证书的访问权限的方法。

我的第一种方法是使用批处理文件执行 WinHttpCertCfg。但是，此方法仅适用于已“激活”的应用程序池帐户。通过“激活”，我的意思是我至少浏览过一次新应用程序。直到发生这种情况 - WinHttpCertCfg 总是返回消息“句柄无效”。

我尝试的下一个方法是基于[从这里获得的解决方案](http://www.codeproject.com/script/Forums/View.aspx?fid=1649&msg=2062983)。此解决方案的工作原理是，当我在 MMC 中浏览证书并选择“管理证书密钥”时，会列出应用程序池帐户。即使我运行 WinHttpCertCfg 来列出具有访问权限的帐户 - 也会列出新的应用程序池。

但毕竟......当我浏览 Web 应用程序时，我仍然得到“keyset 不存在”。

我现在的重点是修复第二种方法。这是我对原始代码的修改

```
public class CertificateHandler
{
    private const string CommonApplicationKeys = @"Microsoft\Crypto\RSA\MachineKeys";
    private const string PersonalKeys = @"Microsoft\Crypto\RSA\";
    private static X509Certificate2 _personalCertificate = null;
    private static X509Certificate2 _trustedCertificate = null;

    public CertificateHandler(string thumbPrint)
    {
        X509Store personalStore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
        X509Store trustedStore = new X509Store(StoreName.TrustedPeople, StoreLocation.LocalMachine);

        //open the stores to locate the certificates and cache for future use
        if (_personalCertificate == null)
        {
            _personalCertificate = LoadCertificateFromStore(thumbPrint, personalStore);
        }

        if (_trustedCertificate == null)
        {
            _trustedCertificate = LoadCertificateFromStore(thumbPrint, trustedStore);
        }
    }

    /// <summary>
    /// Grants access to the specified certificate.
    /// </summary>
    /// <param name="thumbPrint">The thumb print of the certificate.</param>
    /// <param name="user">The domain qualified user.</param>
    public void GrantAccessToCertificate(string user)
    {
        //open the store to locate the certificate
        GrantAccessToCertificate(user, _personalCertificate);
        GrantAccessToCertificate(user, _trustedCertificate);
    }

    /// <summary>
    /// Grants access to the specified certificate.
    /// </summary>
    /// <param name="user">The domain qualified user.</param>
    /// <param name="certificate">The certificate to which access is granted</param>
    private void GrantAccessToCertificate(string user, X509Certificate2 certificate)
    {
        RSACryptoServiceProvider crypto = certificate.PrivateKey as RSACryptoServiceProvider;

        if (crypto != null)
        {
            //determine the location of the key
            string keyfilepath = FindKeyLocation(crypto.CspKeyContainerInfo.UniqueKeyContainerName);

            //obtain a file handle on the certificate
            FileInfo file = new FileInfo(Path.Combine(keyfilepath, crypto.CspKeyContainerInfo.UniqueKeyContainerName));

            //Add the user to the access control list for the certificate
            FileSecurity fileControl = file.GetAccessControl();
            NTAccount account = new NTAccount(user);
            fileControl.AddAccessRule(new FileSystemAccessRule(account, FileSystemRights.FullControl, AccessControlType.Allow));
            file.SetAccessControl(fileControl);
        }
    }

    /// <summary>
    /// Loads the certificate mathing the thumbprint from the specified store.
    /// </summary>
    /// <param name="thumbPrint">The thumb print of the certificate.</param>
    /// <param name="store">The store.</param>
    private X509Certificate2 LoadCertificateFromStore(string thumbPrint, X509Store store)
    {
        X509Certificate2 cert = null;

        try
        {
            //fetch the certificates in the store
            store.Open(OpenFlags.MaxAllowed);

            //locate by the specified thumbprint
            var results = store.Certificates.Find(X509FindType.FindByThumbprint, thumbPrint, true);

            if (results.Count > 0)
            {
                cert = results[0];
            }
            else
            {
                throw new FileNotFoundException("No certificate was found matching the specified thumbprint");
            }
        }
        finally
        {
            store.Close();
        }

        return cert;
    }

    /// <summary>
    /// Finds the key location.
    /// </summary>
    /// <param name="keyFileName">Name of the key file.</param>
    /// <returns></returns>
    private string FindKeyLocation(string keyFileName)
    {
        string location = string.Empty;

        //start the search from the common application folder
        string root = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
        string commonLocation = Path.Combine(root, CommonApplicationKeys);

        //filter for the key name
        var keys = Directory.GetFiles(commonLocation, keyFileName);

        if (keys.Length > 0)
        {
            location = commonLocation;
        }
        else
        {
            //now try the personal application folder
            root = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
            string privateLocation = Path.Combine(root, PersonalKeys);

            var subFolders = Directory.GetDirectories(privateLocation);

            if (subFolders.Length > 0)
            {
                foreach (string folder in subFolders)
                {
                    //filter for the key
                    keys = Directory.GetFiles(folder, keyFileName);

                    if (keys.Length != 0)
                    {
                        location = folder;
                    }
                }
            }
            else
            {
                throw new InvalidOperationException("Private key exists but is not accessible");
            }
        }

        return location;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:19:45.587

我现在可以确认上面的代码确实有效。它似乎不起作用的原因是我没有授予另一个应用程序池帐户访问证书的权限。一旦完成，从那里开始一切都是美好的。

# c++ - 如何以标准方式从未对齐的内存中获取值？

> ID：11774048
> 
> 赞同：1
> 
> 时间：2012-08-02T08:51:02.610
> 
> 标签：c++

我知道 C++11 有一些标准工具可以从未对齐的内存中获取整数值。这样的东西怎么能用更标准的方式来写呢？

```
template <class R>
inline R get_unaligned_le(const unsigned char p[], const std::size_t s) {
    R r = 0;
    for (std::size_t i = 0; i < s; i++)
        r |= (*p++ & 0xff) << (i * 8); // take the first 8-bits of the char
    return r;
} 
```

要获取以小端顺序存储的值，您可以编写：

```
uint_least16_t value1 = get_unaligned_le<uint_least16_t > (&buffer[0], 2);
uint_least32_t value2 = get_unaligned_le<uint_least32_t > (&buffer[2], 4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:03:19.000

与往常一样，创建所需的变量并按字节填充它：

```
#include <algorithm>
#include <type_traits>

template <typename R>
R get(unsigned char * p, std::size_t len = sizeof(R))
{
    assert(len >= sizeof(R) && std::is_trivially_copyable<R>::value);

    R result;
    std::copy(p, p + sizeof(R), static_cast<unsigned char *>(&result));
    return result;
} 
```

这仅适用于普通可复制类型，但如果您有其他地方的额外保证，您可能可以将其用于普通类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:25:35.517

积分值是如何进入未对齐内存的？如果它们被`memcpy`编入，那么您可以使用`memcpy`它们来取出它们。如果它们是从文件或网络中读取的，您必须知道它们的格式：它们是如何编写的。如果它们是 4 字节 big-endian 2s 补码（通常的网络格式），则类似于：

```
//      Supposes native int is at least 32 bytes...
unsigned
getNetworkInt( unsigned char const* buffer )
{
    return buffer[0] << 24
        |  buffer[1] << 16
        |  buffer[2] <<  8
        |  buffer[3];
} 
```

这适用于任何无符号类型，只要您的目标类型至少与您输入的类型一样大。对于签名，这取决于您想要的便携性。如果您所有的潜在目标机器都是 2 的补码，并且将具有与您的输入类型大小相同的整数类型，那么您可以使用与上面完全相同的代码。如果您的本机机器是 1 的补码 36 位机器（例如 Unisys 大型机），并且您正在读取带符号的网络格式整数（32 位 2 的补码），您将需要一些额外的逻辑。

# java - 如何以编程方式通过 Mylyn 获取更改事件？

> ID：11774054
> 
> 赞同：0
> 
> 时间：2012-08-02T08:51:28.797
> 
> 标签：java, eclipse, mylyn

对于我的项目，我想从尽可能多的错误和工作项存储库中访问数据（用于 Eclipse 中的开发）。因此我使用 Mylyn 插件，因为它已经提供了一个有效使用多个来源的框架。

如果我发现正确，任务将保存在`.metadata\.mylyn\tasks.xml.zip\tasklist.xml`和下`.metadata\.mylyn\tasks\<folder>\<id>.zip\data.xml`。但我不知道如何访问数据并获取更改...

*   如果任务更改（例如，如果工作项状态从 CONFIRMED 更改为 SOLVED），是否有可能收到通知？
*   是否有可能订阅 Mylyn 事件，如果发生变化，该事件会显示一点通知？还是有类似事件记录器或资源更改侦听器的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:08:40.937

Mylyn 可以通过各种 API 访问所有这些数据。您可以使用 ITaskDataManager API（可通过 TasksUi.getTaskDataManager() 访问）来获取给定任务的完整任务数据。您可以使用 ITaskDataManagerListener 侦听任务数据更新时的更改（例如，任务发生更改）并将您的侦听器附加到 TaskDataManager，然后您可以查看任务数据以获取哪些字段的值你感兴趣的是。要查看通知弹出窗口如何使用它，您可以查看 TaskListNotifier。

如果您有更多问题，请随时发送电子邮件至 mylyn-integrators@eclipse.org。

# c++ - 生成子序列

> ID：11774059
> 
> 赞同：3
> 
> 时间：2012-08-02T08:51:40.590
> 
> 标签：c++, c, algorithm, permutation

我有一个像“0189”这样的字符串，我需要为它生成所有子序列，但是必须保持各个字符的顺序，即这里的 9 不应该在 0、1 或 8 之前。例如：0、018、01 , 09, 0189, 18, 19, 019 等

另一个例子是“10292”，其子序列是：1、10、02、02、09、29、92 等。您可能已经注意到“02”两次，因为“2”在给定字符串中出现了两次。但同样的事情：21、01、91 是无效的，因为要维持秩序。

任何可以用 C/C++ 实现的算法或伪代码将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T09:04:45.620

尝试递归方法：

*   子序列集可以分为包含第一个字符的子序列和不包含它的子序列
*   包含第一个字符的那些是通过将该字符附加到不包含它的子序列来构建的（+ 只包含第一个字符本身的子序列）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T09:02:26.893

我建议使用序列的[*幂集*](http://en.wikipedia.org/wiki/Power_set)`0`和从到的二进制数集之间的自然对应关系`2^n - 1`，其中`n`是序列的长度。

在你的情况下，`n`是 4，所以考虑 0 = `0000`.. 15 = `1111`; 其中`1`二进制表达式中有一个包含序列中的相应项。要实现这一点，您需要移位和二进制操作：

```
for (int i = 0; i < (1 << n); ++i) {
    std::string item;
    for (j = 0; j < n; ++j) {
        if (i & (1 << j)) {
            item += sequence[j];
        }
    }
    result.push_back(item);
} 
```

还要考虑如何处理比 an 覆盖范围更长的序列`int`（提示：考虑溢出和算术进位）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T08:24:06.700

在 Python 中：

```
In [29]: def subseq(s): return ' '.join((' '.join(''.join(x) for x in combs(s,n)) for n in range(1, len(s)+1)))

In [30]: subseq("0189")
Out[30]: '0 1 8 9 01 08 09 18 19 89 018 019 089 189 0189'

In [31]: subseq("10292")
Out[31]: '1 0 2 9 2 10 12 19 12 02 09 02 29 22 92 102 109 102 129 122 192 029 022 092 292 1029 1022 1092 1292 0292 10292'

In [32]: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:42:31.400

```
__author__ = 'Robert'
from itertools import combinations

g = combinations(range(4), r=2)
print(list(g)) #[(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3)]

def solve(string_):
    n = len(string_)
    for repeat in range(1, len(string_) + 1):
        combos = combinations(range(len(string_)), r=repeat)
        for combo in combos:
            sub_string = "".join(string_[i] for i in combo)
            yield sub_string

print(list(solve('0189'))) #['0', '1', '8', '9', '01', '08', '09', '18', '19', '89', '018', '019', '089', '189']

#using recursion

def solve2(string_, i):
    if i >= len(string_):
        return [""] #no sub_strings beyond length of string_
    character_i = string_[i]
    all_sub_strings = solve2(string_, i + 1)
    all_sub_strings += [character_i + sub_string for sub_string in all_sub_strings]
    return all_sub_strings

print(solve2('0189', 0)) #['', '9', '8', '89', '1', '19', '18', '189', '0', '09', '08', '089', '01', '019', '018', '0189'] 
```

# javascript - 访问 observableArray 中的非对象

> ID：11774063
> 
> 赞同：0
> 
> 时间：2012-08-02T08:52:04.380
> 
> 标签：javascript, html, knockout.js

参考这个[例子](http://jsfiddle.net/SimonYong/NasR6/)。我有一个名为 Header 的数组（存储表头的名称）和另一个名为 Type 的数组（存储每列的类名）。我想知道如何使用 Header 索引访问 Type 数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:30:58.050

看来，在这样的绑定表达式中，您需要使用括号调用 $index，即：

```
$root.Type()[$index()] 
```

更新小提琴：http: [//jsfiddle.net/KuzGf/1/](http://jsfiddle.net/KuzGf/1/)

# asp.net - select2 AJAX 控件扰乱了选项卡排序

> ID：11774064
> 
> 赞同：1
> 
> 时间：2012-08-02T08:52:05.957
> 
> 标签：asp.net, jquery-select2

我在asp.net上使用[select2 。](http://ivaynberg.github.com/select2/)`dropdownlist`代码如下：

```
<script type="text/javascript" src="js/select2.min.js"></script>
<link type="text/css" rel="Stylesheet" href="css/select2.css" />

var v = /* get the select control */
v.select2(); 
```

问题是，一旦`select2()`调用函数，制表符排序就会停止工作。因此，当按下下拉列表中的 tab 键时，焦点不会移动到具有下一个最高 tabindex 的控件，而是看似随机地移动到其他一些控件。

注释调用函数的行解决了这个问题，但我需要过滤。[我已经尝试过这里](https://stackoverflow.com/questions/706906/jquery-filter-dropdown-list-as-you-type)讨论的其他一些过滤技术，但它们太复杂了。Select2 非常简单实用，因为您所要做的就是包含 JS 和 CSS 文件并调用该函数。

我该如何解决这个订购问题？或者，是否有另一个像 select2 一样易于使用的过滤选项可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:55:35.493

经过几个小时的努力，我已经解决了这个问题。事实证明，如果选项卡在获得焦点后即被按下，即没有在其中键入任何内容时，select2 AJAX 控件确实会破坏选项卡顺序。但是，如果键入了某些文本，它不会破坏制表符顺序。

select2 自动生成的 HTML 内部结构如下：

```
<div class="select2-container">
  <a class="select2-choice">
    <span</span>
    <abbr class="select2-search-choice-close" />
    <div> <b></b> </div>
  </a>

  <div class="select2-drop select2-offscreen">
    <div class="select2-search">
      <input class="select2-input select2-focused" tabIndex=<somevalue> />
    </div>

    <ul class="select2-results></ul>
  </div>
</div> 
```

如果在 HTML 选择控件中键入了一些文本，则制表符顺序正常工作，如果没有输入文本，则制表符顺序被破坏。在这两种情况下，我都`document.activeElement`在 firebug 中使用过集中控制。在没有文本的情况下，锚元素具有焦点，而在输入文本的情况下，HTML 输入元素具有焦点。

如上所示，虽然`select2.js`正确设置了 HTML 输入元素的 tabIndex 属性，但它没有设置锚元素。

### 解决方案

只需在下面进一步指定的位置添加以下行`select2.js`：

```
this.container.find("a.select2-choice").attr("tabIndex", this.opts.element.attr("tabIndex")); 
```

在后面添加一行：

```
this.opts.element.data("select2", this).hide().after(this.container);
this.container.data("select2", this);

this.dropdown = this.container.find(".select2-drop");
this.dropdown.css(evaluate(opts.dropdownCss));
this.dropdown.addClass(evaluate(opts.dropdownCssClass));
this.dropdown.data("select2", this);

this.results = results = this.container.find(resultsSelector);
this.search = search = this.container.find("input.select2-input"); 
```

之前：

```
search.attr("tabIndex", this.opts.element.attr("tabIndex"));

this.resultsPage = 0;
this.context = null;

// initialize the container
this.initContainer();
this.initContainerWidth();

installFilteredMouseMove(this.results);
this.dropdown.delegate(resultsSelector, "mousemove-filtered",  this.bind(this.highlightUnderEvent));

installDebouncedScroll(80, this.results);
this.dropdown.delegate(resultsSelector, "scroll-debounced", this.bind(this.loadMoreIfNeeded)); 
```

所以它变成：

```
this.results = results = this.container.find(resultsSelector);
this.search = search = this.container.find("input.select2-input");

this.container.find("a.select2-choice").attr("tabIndex",   this.opts.element.attr("tabIndex")); /* atif */

search.attr("tabIndex", this.opts.element.attr("tabIndex"));

this.resultsPage = 0;
this.context = null; 
```

在 中进行此更改`select2.js`。显然，你需要使用完整的js版本，而不是min版本。

您所要做的就是添加一行，如上所述。如果正确完成，这将成为 VS2008 中的第 #504 行。

# c# - 列表视图中心文本

> ID：11774069
> 
> 赞同：1
> 
> 时间：2012-08-02T08:52:16.680
> 
> 标签：c#, wpf, xaml, listview

> **可能重复：**
> [如何在 WPF ListView 的特定列中居中文本？](https://stackoverflow.com/questions/5098668/how-to-center-text-in-a-specific-column-in-wpf-listview)

嗨，我们如何在 Wpf 的列表视图项目中将所有文本居中？

```
<ListView x:Name="FoldersListView" Margin="57,150,161,139" Style="{DynamicResource ListViewStyle1}" Background="#FFEDDEDE" IsSynchronizedWithCurrentItem="True">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Folder" Width="300" DisplayMemberBinding ="{Binding Path = FolderPath}" />

                <GridViewColumn Header="Status" Width="100" DisplayMemberBinding="{Binding Path = FolderStatus}"/>

            </GridView>
        </ListView.View>            
    </ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:00:50.867

因为每列没有区别：

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
    </Style>
</ListView.ItemContainerStyle> 
```

# c# - 如何获取发生异常的线程的名称？

> ID：11774072
> 
> 赞同：4
> 
> 时间：2012-08-02T08:52:26.633
> 
> 标签：c#, winforms, thread-exceptions

我正在处理线程异常，但我想获取发生异常的线程的名称。似乎当线程异常触发时，事件仍保留在主线程上，尽管我认为异常可能发生在不同的线程上。

```
static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
{
    ShowFaultDialog(e.Exception, "(Application) Thread Exception [" + System.Threading.Thread.CurrentThread.Name + "]");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:01:38.160

在静态 void Main() 中：

```
Thread.CurrentThread.Name = "Main Thread"; 
```

VS 2010 显示主线程具有“主线程”的“名称”，但实际上线程名称为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:07:09.747

如果您的意思是处理`Application.ThreadException`事件：它仅在从 WinForms 线程抛出的异常时触发。通常，应用程序中有一个 WinForms 线程：主线程。

**更新。**

这是演示`Application.ThreadException`和 AppDomain.UnhandledException 行为差异的示例：

1）`Program`类：

```
static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.ThreadException += new ThreadExceptionEventHandler(Application_ThreadException);
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
        Application.Run(new Form1());
    }

    static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Debug.WriteLine(Thread.CurrentThread.Name);
    }

    static void Application_ThreadException(object sender, ThreadExceptionEventArgs e)
    {
        Debug.WriteLine(Thread.CurrentThread.Name);
    }
} 
```

2）主窗体（一个有两个按钮的窗体）代码隐藏：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        throw new InvalidOperationException();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        new Thread(() => { throw new InvalidOperationException(); })
        {
            Name = "Worker Thread"
        }.Start();
    }
} 
```

当您单击 button1 时，您会从 WinForms 线程中抛出异常。`Application_ThreadException`因此，默认情况下将处理此异常。

当您单击 button2 时，您会从不是 WinForms 线程的工作线程抛出异常。`Application.ThreadException`在这种情况下不会触发，而是`AppDomain.UnhandledException`触发事件（并被`CurrentDomain_UnhandledException`调用，在输出窗口中产生“工作线程”行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:04:01.927

使用递增的数值变量（例如字节）为每个线程赋予它自己的名称，例如

```
string threadname = "Thread" + threadnumber 
```

然后使用 catch 语句通知您，如下所示：

```
ShowFaultDialog(e.exception, threadname) 
```

这样，理论上您就可以分辨出它是哪个线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:07:11.650

正如我从 MSDN 中了解到的那样，[Application_ThreadException事件允许 Windows 窗体应用程序处理](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)**Windows 窗体线程**中发生的未处理异常，并且当您到达此事件时，您就处于主 UI 线程中。所以它会打印总是一样的。

你检查过[Exception.TargetSite](http://msdn.microsoft.com/en-us/library/system.exception.targetsite.aspx)属性吗？此属性为您返回发生异常的方法名称和签名。

# zend-framework - Zend_Form_Radio 不显示消息错误

> ID：11774076
> 
> 赞同：0
> 
> 时间：2012-08-02T08:52:54.740
> 
> 标签：zend-framework, radio-button, zend-form, zend-form-element

我设置了这个 zend 表单元素单选：

```
 //nationality
    $this->addElement('radio', 'nationality', array('label' => 'F_NATIONALITY', 'separator' => ' ', 'label_class' => 'l_radio', 'required' => true));
    $this->nationality->addMultiOption('italian', 'F_NATIONALITY_IT');
    $this->nationality->addMultiOption('foreign', 'F_NATIONALITY_FO');
    $this->nationality->addValidator('NotEmpty'); 
```

这是输出：

![在此处输入图像描述](../Images/7a6ec369e33fb158b2256c546a65ee27.png)

你不明白的是为什么即使我设置了属性'required'验证器和'NotEmpty'我也不能显示错误消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:57:38.077

```
$nationality= new Zend_Form_Element_Radio('nationality');
        $nationality->setLabel('Nationality:')
           ->setRequired(true)
               ->addMultiOptions(array(
                            'italian' => 'Italian',
                            'foreign' => 'Foreign' 
                                ))
                   ->setSeparator('  ');
           //->setDecorators(array('ViewHelper','Label', 'Errors', array('HtmlTag', array('tag' => 'p')))); 
```

上面的代码将创建具有意大利和外国两个选项的国籍单选按钮。

# .htaccess - mod rewrite 删除分页重复内容

> ID：11774079
> 
> 赞同：0
> 
> 时间：2012-08-02T08:53:00.500
> 
> 标签：.htaccess, mod-rewrite, seo, pagination, duplicate-content

我有重复内容的问题...

我的链接是这样的：

*   **原文**：www.example.ro/men-shoes/
*   重复：www.example.ro/men-shoes/pagina-1/
*   **原创**www.example.ro/women-shoes/
*   重复：www.example.ro/women-shoes/pagina-1/

和其他以 /pagina-1/ 结尾的类似页面

我不擅长 mod rewrite.. 但我尝试了这段代码

```
RewriteCond %{QUERY_STRING} ^pagina-1/$
RewriteRule ^(.*) $1 [L,R=301] 
```

它不起作用......我很乐意解决这个问题！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:01:54.783

尝试：

```
RewriteRule ^(.*)/pagina-1/$ /$1/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:23:30.010

无需为此使用 mod_rewrite 。您要使用的是 rel=canonical 标签。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

所有主要搜索引擎都支持此标签。

因此，对于上述两个示例，以下内容将出现在**两个**页面的头部（即在 www.example.ro/men-shoes/ 和 www.example.ro/men-shoes/pagina-1/ 中）

```
<link rel="canonical" href="www.example.ro/men-shoes/" /> 
```

本质上，这意味着“将指向副本的任何链接值分配给原始值”。

这个：

*   都停止出现在 SERP 中
*   将副本中的任何链接值分配给原始值
*   不会强加任何进一步的 mod_rewrite 模式匹配开销。

如果 /pagina-1 页面是产品列表中的第一个分页页面（我猜是），您可能还想尝试使用 rel 和 prev 标签。

[http://googlewebmastercentral.blogspot.co.uk/2011/09/pagination-with-relnext-and-relprev.html](http://googlewebmastercentral.blogspot.co.uk/2011/09/pagination-with-relnext-and-relprev.html)

# objective-c - Objective C. 奇怪的语法

> ID：11774082
> 
> 赞同：9
> 
> 时间：2012-08-02T08:53:07.343
> 
> 标签：objective-c

我发现在Objective C中声明方法的方式很奇怪。

.h 文件中的方法声明：

```
-(void)methodName:(NSString *)str, int i; 
```

.m 文件中的方法实现：

```
-(void)methodName:(NSString *)str, int i
{
     NSLog(@"str = %@, int = %d", str, i);
} 
```

我可以这样调用这个方法：

```
[self methodName:@"stringExample", 99]; 
```

它会工作得很好。

我的问题是什么时候应该使用这种语法。它和通常的声明有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:07:43.630

[如此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW6)所述，这些参数是*可选*的：

> 采用可变数量参数的方法也是可能的，尽管它们很少见。额外的参数在方法名称的末尾用逗号分隔。（与冒号不同，逗号不被视为名称的一部分。）在以下示例中，虚构的 makeGroup: 方法传递了一个必需参数（组）和三个可选参数：
> 
> `[receiver makeGroup:group, memberOne, memberTwo, memberThree];`

所以是的，声明与通常的声明不同。除了使用可变参数方法（可选参数声明为`...`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:00:01.857

声明方法的目的`-(void)methodName:(NSString *)str yourInt:( int) i{...}`是为了使它更具可读性。在[llvm 4.0](https://developer.apple.com/technologies/tools/whats-new.html)之后声明字符串、数组、字典 .. 可以像其他 C 语言一样处理。例如，以下两个声明都是正确的：

```
//old style
array = [nsarray arraywithobjects:a, b, c, nil];
dict = [nsdictionary dictionarywithobjects:@[o1, o2, o3]
forkeys:@[k1, k2, k3]];
number = [nsnumber numberwithchar:'x'];
number = [nsnumber numberwithint:12345];
//new style
array = @[ a, b, c ];
dict = @{ k1 : o1, k2 : o2, k3 : o3 };
number = @'x';
number = @12345; 
```

来自土耳其论坛的资源在[这里](http://www.eksisozluk.com/show.asp?t=objective-c)

# codeigniter - MY_Controller 扩展无法显示数据（Codeigniter）

> ID：11774084
> 
> 赞同：0
> 
> 时间：2012-08-02T08:53:13.350
> 
> 标签：codeigniter

我已经更改了我的应用程序核心/MY_Controller.php 可扩展。之前我可以从 mysql 获取数据，但现在我得到消息：未定义的变量：记录。我怎样才能再次获取数据？MY_Controller.php：

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }

  function render_page($view) {
    //do this to don't repeat in all controllers...
    $this->load->view('templates/header', $this->data);
    //menu_data must contain the structure of the menu...
    //you can populate it from database or helper

    $this->load->view($view, $this->data);
    $this->load->view('templates/footer', $this->data);
  } 
```

我的家庭控制器：

```
class Home extends MY_Controller {
         function __construct() {
    parent::__construct();
  }
public function view($page = 'home')
    {
     $this->load->helper('text');
        $this->data['records']= $this->services_model->getAll();
        if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter

        $this->render_page('pages/'.$page,$this->data);

    } 
```

服务模型：

```
class Services_model extends CI_Model {

    function getAll() {
        $q = $this->db->get('services');
        if($q->num_rows() > 0){
        foreach ($q->result() as $row)
        {
            $data[] = $row;

            }
        return $data;
    }
    } 
```

这是我在 home.php 视图中遇到错误的地方：

```
<ul class="blog-medium">
<?php foreach($records->result() as $row): ?>
    <li><h1><a href="./post.html"><?php echo $row->title; ?></a></h1></li>
<?php endforeach ?> 
```

错误消息显示：消息：未定义变量：记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:00:19.703

在您的控制器中，您似乎正在设置`$data['records']`您应该设置的时间`$this->data['records']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:07:23.543

我找到了解决方案。在我的 Home 控制器中，我将视图用作：

```
$this->render_page('pages/'.$page,$this->data); 
```

但我必须在这里使用它：

```
class Home extends MY_Controller {
         function __construct() {
    parent::__construct();
  }

        public function view($page = 'home')
        {
         $this->load->helper('text');
            $this->data['records']= $this->services_model->getAll();
            if ( ! file_exists('application/views/pages/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

            $this->render_page('pages/'.$page,$data);

        } 
```

我不知道为什么，但我以前试过这个。它没有成功，但它现在正在工作。

# php - 在 MySQL 中链接和提取记录

> ID：11774087
> 
> 赞同：0
> 
> 时间：2012-08-02T08:53:35.457
> 
> 标签：php, mysql

我的 MySQL 数据库中有一个表，其中包含活动记录。看起来像：

```
Action_______________Date_________________User________________Location___________Ref Number  
Action 1........1/1/2012.........J Jones.......Home.............00123  
Action 2........2/1/2012.........K Smith.......Work.............00234  
Action 2........2/1/2012.........J Jones.......Home.............00123  
Action 1........4/1/2012.........B Smith.......Home.............00345  
Action 3........5/1/2012.........J Jones.......Mobile...........00123  
ETC 
```

我正在寻找的是一个查询，它将遍历表，找到第一次出现的动作 1，然后去为相同的参考编号和动作 3 等找到动作 2。

它将对表中每次出现的 Ref Number 执行此操作。

这些需要在 PHP 中显示为单个数据行，即：

```
Ref No._____________Act1date_____________Act1User_____________Act1location_____________Act2date_____________Act2User__etc  
00123..........1/1/2012..........J Jones............Home....................2/1/2012..........J Jones
00234..........1/1/2012..........J Jones............Work....................2/1/2012..........J Jones  00345..........1/1/2012..........J Jones............Home....................2/1/2012..........B Smith 
```

还将进行一些计算，即 Action1_date 和 Action2_date 之间的时间差等。

我想不出如何编写查询来做到这一点——有人可以帮忙吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:58:03.183

只需使用 order by 语句对结果进行排序。

```
select
    action,
    Date,
    User,
    Location,
    refNumber
from
    yourTable
order by
    refNumber,
    action 
```

# eclipse - 带有 Maven 的 Eclipse 中的 JSF 项目为 FacesServlet 提供 ClassNotFoundException

> ID：11774097
> 
> 赞同：2
> 
> 时间：2012-08-02T08:54:22.467
> 
> 标签：eclipse, jsf, tomcat, maven

我在 Eclipse 中创建了一个 Maven 项目。从“project facets”菜单中，我选择了 Dynamic Web Module、Java 和 Java Server Faces。从 pom.xml 中成功添加了一些依赖项，例如 jsf-api 和 servlet-api。然后我编写了一个简单的 Java bean 和一个使用该 bean 的 xhtml 页面。

当我使用“maven clean install”构建war文件并将其手动部署到Tomcat时，它按预期工作。但是当我从 Eclipse 中选择“在服务器上运行”时，会出现以下错误：

```
SEVERE: Servlet /testjsf1 threw load() exception
java.lang.ClassNotFoundException: javax.faces.webapp.FacesServlet
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
        at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
        at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

从 Eclipse 运行时，似乎 jsf 库没有按预期链接。您对这种行为的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T08:57:57.987

在“Project Properties”->“Deployment Assembly”中，添加“Java Build Path Entries -> Maven Dependencies”即可解决问题！

# java - Java 标识符中的“连接字符”是什么？

> ID：11774099
> 
> 赞同：210
> 
> 时间：2012-08-02T08:54:26.813
> 
> 标签：java, unicode, identifier, scjp

我正在为 SCJP 阅读，我对此行有疑问：

> 标识符必须以字母、货币字符 ($) 或下划线 (_) 等连接字符开头。标识符不能以数字开头！

它指出有效的标识符名称可以**以**下划线之类的连接字符开头。我认为下划线是唯一有效的选择？还有哪些其他*连接字符*？

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-08-02T08:59:03.307

这是连接字符的列表。这些是用于连接单词的字符。

[http://www.fileformat.info/info/unicode/category/Pc/list.htm](http://www.fileformat.info/info/unicode/category/Pc/list.htm)

```
U+005F _ LOW LINE
U+203F ‿ UNDERTIE
U+2040 ⁀ CHARACTER TIE
U+2054 ⁔ INVERTED UNDERTIE
U+FE33 ︳ PRESENTATION FORM FOR VERTICAL LOW LINE
U+FE34 ︴ PRESENTATION FORM FOR VERTICAL WAVY LOW LINE
U+FE4D ﹍ DASHED LOW LINE
U+FE4E ﹎ CENTRELINE LOW LINE
U+FE4F ﹏ WAVY LOW LINE
U+FF3F ＿ FULLWIDTH LOW LINE 
```

这在 Java 7 上编译。

```
int _, ‿, ⁀, ⁔, ︳, ︴, ﹍, ﹎, ﹏, ＿; 
```

* * *

一个例子。在这种情况下`tp`是列的名称和给定行的值。

```
Column<Double> ︴tp︴ = table.getColumn("tp", double.class);

double tp = row.getDouble(︴tp︴); 
```

* * *

以下

```
for (int i = Character.MIN_CODE_POINT; i <= Character.MAX_CODE_POINT; i++)
    if (Character.isJavaIdentifierStart(i) && !Character.isAlphabetic(i))
        System.out.print((char) i + " ");
} 
```

印刷

$ _¢£€$؋৲৻૱៛‿⁀₡₡₢₣₣₤₥₥₦₨₩₪₪€€₫₫₫₫₮₯₰₰₱₲₳₳₵₵₵₵₵₵₶₶ ﹩＄＿￠￡￥￦</p>

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-02T08:57:36.420

遍历整个 65k 字符并询问`Character.isJavaIdentifierStart(c)`。答案是：“undertie”十进制 8255

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-02T08:59:54.937

合法 Java 标识符的最终规范可以在[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)中找到。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-02T08:59:37.713

[这是](http://www.fileformat.info/info/unicode/category/Pc/list.htm)Unicode 中的连接符列表。您不会在键盘上找到它们。

U+005F LOW LINE _
U+203F UNDERTIE ‿<br> U+2040 CHARACTER TIE ⁀
U+2054 INVERTED UNDERTIE ⁔<br> U+FE33 垂直低线演示表格 ︳<br> U+FE34 垂直波浪演示表格LOW LINE ︴<br> U+FE4D DASHED LOW LINE ﹍<br> U+FE4E CENTRELINE LOW LINE ﹎<br> U+FE4F WAVY LOW LINE ﹏<br> U+FF3F FULLWIDTH LOW LINE ＿

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-18T07:10:02.827

连接字符用于连接两个字符。

在 Java 中，连接字符是[Character.getType(int codePoint)](https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28int%29) / [Character.getType(char ch)](https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28char%29)返回的值等于[Character.CONNECTOR_PUNCTUATION](https://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#CONNECTOR_PUNCTUATION)的字符。

请注意，在 Java 中，字符信息基于 Unicode 标准，该标准通过为连接字符分配通用类别 Pc 来识别连接字符，这是[Connector_Punctuation](http://unicode.org/reports/tr44/#General_Category_Values)的别名。

下面的代码片段，

```
for (int i = Character.MIN_CODE_POINT; i <= Character.MAX_CODE_POINT; i++) {
    if (Character.getType(i) == Character.CONNECTOR_PUNCTUATION
            && Character.isJavaIdentifierStart(i)) {
        System.out.println("character: " + String.valueOf(Character.toChars(i))
                + ", codepoint: " + i + ", hexcode: " + Integer.toHexString(i));
    }
} 
```

打印可用于在 jdk1.6.0_45 上启动标识符的连接字符

```
character: _, codepoint: 95, hexcode: 5f
character: ‿, codepoint: 8255, hexcode: 203f
character: ⁀, codepoint: 8256, hexcode: 2040
character: ⁔, codepoint: 8276, hexcode: 2054
character: ・, codepoint: 12539, hexcode: 30fb
character: ︳, codepoint: 65075, hexcode: fe33
character: ︴, codepoint: 65076, hexcode: fe34
character: ﹍, codepoint: 65101, hexcode: fe4d
character: ﹎, codepoint: 65102, hexcode: fe4e
character: ﹏, codepoint: 65103, hexcode: fe4f
character: ＿, codepoint: 65343, hexcode: ff3f
character: ･, codepoint: 65381, hexcode: ff65 
```

以下在jdk1.6.0_45上编译，

```
int _, ‿, ⁀, ⁔, ・, ︳, ︴, ﹍, ﹎, ﹏, ＿, ･ = 0; 
```

显然，对于以下两个连接字符，上述声明无法在 jdk1.7.0_80 和 jdk1.8.0_51 上编译（向后兼容......哎呀！！！），

```
character: ・, codepoint: 12539, hexcode: 30fb
character: ･, codepoint: 65381, hexcode: ff65 
```

无论如何，抛开细节不谈，***考试只关注基本拉丁字符集***。

*此外，对于 Java 中的合法标识符，[此处](https://docs.oracle.com/javase/specs/jls/se6/html/lexical.html#3.8)提供了规范。使用 Character 类 API 获取更多详细信息。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-09T08:37:35.473

Java 标识符中允许的最有趣的字符之一（但不是在开头）是名为“零宽度非连接器”的 unicode 字符（‌，U+200C，[https ://en.wikipedia.org /wiki/Zero-width_non-joiner](https://en.wikipedia.org/wiki/Zero-width_non-joiner)）。

我曾经在一个属性值中的一段 XML 中有这个，该属性值持有对该 XML 另一段的引用。由于 ZWNJ 是“零宽度”，因此无法看到（除了与光标一起行走时，它会显示在之前的字符上）。在日志文件和/或控制台输出中也看不到它。但它一直都在那里：复制并粘贴到搜索字段中得到它，因此没有找到引用的位置。在搜索字段中键入（可见部分）字符串，但找到了引用的位置。我花了一段时间才弄清楚这一点。

在使用欧洲键盘布局时，键入零宽度非连接器实际上非常容易（太容易），至少在其德语变体中，例如“Europatastatur 2.02” - 可以通过 AltGr + “.”，两个键不幸的是，它们在大多数键盘上直接相邻，很容易意外地撞在一起。

回到Java：我想得很好，你可以写一些这样的代码：

```
void foo() {
    int i = 1;
    int i‌ = 2;
} 
```

第二个我附加了一个零宽度非连接器（在上面的stackoverflow编辑器中的代码中无法做到这一点），但这不起作用。IntelliJ (16.3.3) 没有抱怨，但 JavaC (Java 8) 确实抱怨了一个已经定义的标识符 - 似乎 JavaC 实际上允许 ZWNJ 字符作为标识符的一部分，但是当使用反射来查看它的作用时，ZWNJ字符被从标识符中剥离 - 像 ‿ 这样的字符不是。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-02T19:45:48.610

您可以**在**标识符中使用的字符列表（而不仅仅是在开头）*更*有趣：

```
for (int i = Character.MIN_CODE_POINT; i <= Character.MAX_CODE_POINT; i++)
    if (Character.isJavaIdentifierPart(i) && !Character.isAlphabetic(i))
        System.out.print((char) i + " "); 
```

名单是：

```
I wanted to post the output, but it's forbidden by the SO spam filter. That's how fun it is! 
```

它包括大多数控制字符！我的意思是铃铛和狗屎！你可以让你的源代码敲响fn的钟声！或者使用仅有时会显示的字符，例如软连字符。

# jquery - PhoneGap/Cordova 上的 jQuery Mobile 将所有内容缩小到顶部的小空间中，仅在设备上

> ID：11774118
> 
> 赞同：0
> 
> 时间：2012-08-02T08:56:04.570
> 
> 标签：jquery, jquery-mobile, cordova, ibm-mobilefirst

我正在尝试使用 jQuery Mobile 在[IBM Worklight](http://www.ibm.com/developerworks/mobile/)平台上构建一个 PhoneGap/Cordova 应用程序，并且在生成的输出中有一些非常奇怪的行为。

我的应用程序的预览在 Eclipse 和桌面 Web 浏览器中显示正常，但是当我部署到设备时，似乎`header`和`content`div 被挤压到屏幕顶部的一个非常小的空间中，如下所示

![在此处输入图像描述](../Images/677267cd81542b9dddd57e27dcd17e8b.png)

我真的不知道为什么会这样，我在[Worklight 论坛上](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=450133&tstart=15)问过，但那里的回答都没有帮助，我想知道它是否是 jQuery Mobile 特有的问题？

重现步骤：

1.  创建一个新项目
2.  复制下面粘贴的代码`enter.html`
3.  复制下面粘贴的代码`home.html`
4.  调整 css/js 文件的位置
5.  构建和部署应用程序
6.  观察屏幕截图中显示的相同行为

我正在运行这些版本：

*   IBM Worklight 5.0.1-299-开发者版
*   jQuery 1.7.2 分钟
*   jQuery 移动 1.1.1
*   日食 3.7.2
*   设备：iPhone 4S、三星 Galaxy S2 和 Galaxy Ace，均运行 2.3.3

尝试使用“内容”的 id 的 body 元素和 jQuery div 元素之间是否存在冲突？

**输入.html**

```
<!DOCTYPE html>     
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
        <title>Enter</title>
        <link rel="shortcut icon" href="images/favicon.png" />
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />

        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    </head>
    <body onload="WL.Client.init({})" id="content" style="display: none">

        <div data-role="page" id="enterPage">

            <div data-role="header">
                <h1>AppHeaderHere</h1>
            </div><!-- /header -->

            <div data-role="content">
                <h4 id="eventId">body here</h4>
                <p>

                <a href="home.html" data-role="button">Enter</a>

                Some filler text here, this would be the actual body content
                </p>
            </div><!-- /content -->

            <div data-role="footer" data-position="fixed">
                <h4>Footer here</h4>
            </div>

        </div><!-- /page -->

        <script src="js/MyApp.js"></script>
        <script src="js/messages.js"></script>
        <script src="js/auth.js"></script>
        <script src="js/jquery/jquery-1.7.2.min.js"></script>
        <script src="js/jquery/jquery.mobile-1.1.1.js"></script>
    </body>
</html> 
```

**主页.html**

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Home</title> 
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />    
    </head> 
    <body onload="WL.Client.init({})"  id="content" style="display: none"> 

        <div data-role="page" id="homePage">

            <div data-role="header">
                <h1>Home</h1>
            </div><!-- /header -->

            <div data-role="content">
                <h4 id="eventId">Some header</h4>
                <p>
                Body content goes here
                </p>
            </div><!-- /content -->

            <div data-role="footer" data-id="foo1" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="home.html" class="ui-btn-active">Home</a></li>
                        <li><a href="page1.html">page1</a></li>
                        <li><a href="page2.html">page2</a></li>
                        <li><a href="page3.html">page3</a></li>
                        <li><a href="page4.html">page4</a></li>
                    </ul>
                </div>
            </div>

        </div><!-- /page -->

        <script src="js/MyApp.js"></script>
        <script src="js/messages.js"></script>
        <script src="js/auth.js"></script>
        <script src="js/jquery/jquery-1.7.2.min.js"></script>
        <script src="js/jquery/jquery.mobile-1.1.1.js"></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:46:25.867

您正在使用的预览正在动态更改 HTML 正文的 CSS。那里有一个错误。

如果你使用 Firebug 或任何类似的工具，你会看到它为 body 提供了一个自动高度，它推翻了 jQuery Mobile CSS。只需注释掉内联 CSS 即可。

# android - 制作我们自己的移动网络分析

> ID：11774120
> 
> 赞同：1
> 
> 时间：2012-08-02T08:56:19.587
> 
> 标签：android, mobile, ios5, web-analytics

移动分析如何工作？这为开发人员提供了哪些信息？我可以为 iOS 和 Android 制作自己的移动分析吗？如果是这样，我需要制作什么信息或东西？我见过这么多提供移动分析的工具，但我怎样才能进行自己的分析呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T09:31:52.490

您可以选择**Cobub Razor**，它是一个开源的移动分析系统，支持 Android，IOS，Windows Phone。详情可以去他们的官网[Cobub 开发者中心](http://dev.cobub.com)

# select - Sublime text 2 - 列选择直到行尾

> ID：11774122
> 
> 赞同：21
> 
> 时间：2012-08-02T08:56:26.800
> 
> 标签：select, shortcuts, sublimetext2

有没有办法用键盘快捷键选择列并将选择扩展到每行的末尾？

目前，当光标到达行尾时，它会跳到下一行的开头。

如何在不使用鼠标的情况下避免这种行为？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T09:05:20.637

如果我正确理解了您的问题，您可以使用以下键（以 OS X 键绑定为例）：

1.  Ctrl + Shift + Up 或 Ctrl + Shift + Down 在多行中选择一列。
2.  Cmd + Shift + Right（其他操作系统上的 Shift + End）将选择范围扩展到每行的末尾。

所有操作系统的相关键绑定：http: [//www.sublimetext.com/docs/2/column_selection.html](http://www.sublimetext.com/docs/2/column_selection.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-25T17:15:11.313

我来到这个答案是因为我正在搜索如何**将光标放在所有行中**，直到 EOF（文件结尾）而不使用`ctrl`+ `alt`+`▲</kbd>/`▼</kbd> (not pratical for more than a few dozens of lines), so I could trim or select a specific part of those lines.``

所以我最终在我发现的[崇高文本文档中结束了：](https://www.sublimetext.com/docs/selection)

*   `ctrl`++这会将光标放置在所有选定的行中并在它们的末尾（EOL） `shift`：`L`
    *   `ctrl`用+选择那些行`L`（或`ctrl`+ `shift`+`End`选择直到 EOF）；
    *   按`ctrl`+ `shift`+`L`在 EOL 处添加光标；
    *   `ctrl`现在您可以通过+的单词同时移动所有光标`◄</kbd>/`►</kbd> or to the BOLs/EOLs with `Home`/`End`), if you also press `shift` you will select while moving them;``
*   但最有用的功能绝对是**鼠标中键+拖动**，它选择线条并同时将光标放在这些选择的末尾：
    *   奖励：如果您只想将光标放在 EOL 上（不选择），请单击背景（在 EOL 之后）并拖动！（如果线条太长，您可以使用小地图将您的视图屏幕定位在最长的线条处）；
    *   `ctrl`现在您可以通过+的单词同时移动所有光标`◄</kbd>/`►</kbd> or to the BOLs with `Home`), if you also press `shift` you will select while moving them.``

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T01:27:41.853

您还可以通过以下步骤获得相同的结果：

1.  通过 Shift + Up/Down 选择行
2.  将选择分割成行（选择）：Cmd + Shift + L

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T08:44:17.217

```
import sublime, sublime_plugin

class SelectToEndoflineCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        caretPos = self.view.sel()[0].begin()
        self.view.sel().add(sublime.Region(caretPos, self.view.line(caretPos).end()))

class SelectToBegoflineCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        caretPos = self.view.sel()[0].begin()
        self.view.sel().add(sublime.Region(caretPos, self.view.line(caretPos).begin())) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-26T10:29:03.120

robertcollier4 的回答为我解决了这个问题。由于某种原因，在 Sublime Text 3 中覆盖了 super+shift+right 默认 OSX 键绑定，并且无法在用户键绑定中正确解除绑定。

要将 robert 的代码添加为插件，请`Tools > New Plugin`粘贴代码，保存并在您的键盘映射中添加对它的引用：

```
[
    { "keys": ["super+shift+right"], "command": "SelectToEndoflineCommand" }
] 
```

我对它所做的唯一改变就是改变

```
caretPos = self.view.sel()[0].begin() 
```

到

```
caretPos = self.view.sel()[0].end() 
```

对于 EOL 功能，否则将无法正常用于多行选择。

# android - 如何在android中检索选中复选框的ID

> ID：11774129
> 
> 赞同：0
> 
> 时间：2012-08-02T08:56:57.347
> 
> 标签：android, checkbox

```
 String s;
   CheckBox cb[]= new CheckBox[n];
   for(int i=0;i<n;i++) {   
      // CheckBox
      String label = a[i];
      cb[i]=new CheckBox(this);
      cb[i].setText(label);
      cb[i].setTextColor(Color.parseColor("#006400"));
      cb[i].setId(i);
   }

  if(cb[i].isChecked()) {
      s+=i+",";
  } 
```

尝试在循环本身中使用它，但 s 的值没有变化无法实现侦听器而不使 sa 最终变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:13:22.920

您可以使用列表并在 onCreate 方法之外声明字符串：

```
private String s;

public void onCreate... {
    final List<Integer> map = new ArrayList<Integer>();
    CheckBox[] ch = ...;
    for(int i=0;i<ch.length;i++) {
    ch[i].setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(isChecked) {
                map.add(buttonView.getId());
            } else {
                map.remove(buttonView.getId());
            }
            s = "";
            for (Integer i : map) {
                s += i+",";
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:05:49.630

尝试使用类似下面的东西。

```
StringBuilder s = new StringBuilder();
     ---
      ----
     ----

if(cb[i].isChecked())
  {
       s.append(i+",");
    } 
```

稍后您可以将其转换为 String 字节`S.toString()`方法；

# php - 通过互联网从 php Web 应用程序连接到本地 mysql 数据库

> ID：11774131
> 
> 赞同：2
> 
> 时间：2012-08-02T08:57:09.853
> 
> 标签：php, mysql

如何通过 Internet 从 PHP Web 应用程序连接到 LAN 中托管的 mysql 数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:02:20.763

确保数据库位于 PC 上，并且路由器正在将外部请求路由到该 PC。然后确保数据库设置了正确的用户权限，以将数据返回到不是源自的请求，`@'localhost'`您应该很友好。您可能还需要一个静态 IP，以便更轻松地从外部连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:08:57.723

如果您使用的是静态 IP 地址，则可以直接连接到数据库服务器：

```
$conn = mysqli_connect('XXX.XXX.XXX.XXX', 'username', 'password', 'database'); 
```

如果您没有静态 IP 地址，您可能无法依赖它。

在拨号 (!) 连接上，您可能每次都有不同的 IP 地址。如果你有宽带，这取决于。我的 IP 地址几个月来一直保持不变。

如果您有一个“动态”IP 地址，那么您不能完全相信它总是相同的。如果您为静态的支付额外费用，您可以确定它不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:08:09.627

还要确保你的 mysql 安装是最新的。如果您无法获得静态 IP，dyndns 等服务可以帮助您。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T09:09:33.947

我的建议是找一个网络主机来托管数据库。它便宜得多，麻烦少得多，几乎不需要配置。然后，您可以上传您的数据库。虽然这是一个选择。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T09:03:44.857

您将需要一个虚拟主机将其托管到互联网。

# jsrender - 是否有 JsRender 渲染完成事件

> ID：11774136
> 
> 赞同：2
> 
> 时间：2012-08-02T08:57:35.110
> 
> 标签：jsrender

是否有 JsRender 事件或回调来确定渲染方法何时完成？我想处理一些模板并确保它们在我获取结果文档元素之前都已完成。所有渲染方法是否同步运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:16:56.570

jsRender 同步渲染模板，没有回调函数，`.render()`函数只是返回渲染的数据。

当您确实有多个异步进程（例如返回数据的 ajax 调用，然后您使用 jsRender 渲染），并且您需要在执行某些操作之前完成所有这些进程，您可以使用 jQuery 的 Deferred 对象。查看[.when()](http://api.jquery.com/jQuery.when/)以了解如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T23:05:14.677

有一种方法可以确定模板引擎何时呈现最后一行。a) 创建一个辅助函数。在这种情况下称为：jsRenderDone 然后在底部的模板中使用条件逻辑，该逻辑仅在呈现最后一行后触发辅助函数。

```
{{if #index+1 >= #get("array").data.length}}
{{:~jsRenderDone()}} {{/if}} 
```

# eclipse-rcp - 从 Eclipse RCP 应用程序中删除“文件、编辑等”菜单

> ID：11774138
> 
> 赞同：3
> 
> 时间：2012-08-02T08:57:38.907
> 
> 标签：eclipse-rcp

我想从我的 RCP 应用程序中删除文件、编辑、源代码、重构等菜单 我可以使用`hideActionSet()`吗？或者我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:30:06.333

这是正确的; 在您的**ApplicationWorkbenchWindowAdvisor**中，覆盖**postWindowOpen()**。

棘手的一点通常是找出要删除的操作集的名称，但您可以使用旧的备用 ALT-SHIFT-F2（“插件菜单间谍”的默认键绑定）并单击其中一个菜单要删除的项目。

*请注意，如果菜单项被禁用，间谍不会给你任何关于它的信息。*

```
public void postWindowOpen() {
    runApplicationWorkbenchDelegate();

    // remove unwanted UI contributions that eclipse makes by default
    IWorkbenchWindow[] windows = PlatformUI.getWorkbench().getWorkbenchWindows();

    for (int i = 0; i < windows.length; ++i) {
        IWorkbenchPage page = windows[i].getActivePage();
        if (page != null) {
            // hide generic 'File' commands
            page.hideActionSet("org.eclipse.ui.actionSet.openFiles");

            // hide 'Convert Line Delimiters To...'
            page.hideActionSet("org.eclipse.ui.edit.text.actionSet.convertLineDelimitersTo");

            // hide 'Search' commands
            page.hideActionSet("org.eclipse.search.searchActionSet");

            // hide 'Annotation' commands
            page.hideActionSet("org.eclipse.ui.edit.text.actionSet.annotationNavigation");

            // hide 'Forward/Back' type navigation commands
            page.hideActionSet("org.eclipse.ui.edit.text.actionSet.navigation");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T15:20:34.060

虽然问题很老：

[Lars Vogel 关于 Eclipse 活动的教程](http://blog.vogella.com/2009/07/13/eclipse-activities/)展示了如何在 RCP 应用程序中隐藏整个菜单，而不是删除单个菜单条目。

编辑：或者，您可以使用附加到工作台窗口的 MenuManager 来显示或隐藏菜单/贡献。尝试以下代码隐藏所有菜单：

```
WorkbenchWindow workbenchWin = (WorkbenchWindow)PlatformUI.getWorkbench().getActiveWorkbenchWindow();
MenuManager menuManager = workbenchWin.getMenuManager();
IContributionItem[] items = menuManager.getItems();

for(IContributionItem item : items) {
  item.setVisible(false);
} 
```

# jquery - Jquery调整表以将tds添加到一行中？

> ID：11774146
> 
> 赞同：0
> 
> 时间：2012-08-02T08:58:10.650
> 
> 标签：jquery, html-table, rows

我有一个如下所示的表...

```
<table width="100%" >   
  <tr class="odd">
    <td><img src="icn_pdf.gif"></td>
    <td><strong>Application Form</strong></td>
    <td><a href="/Form.pdf" class="smd"></a></td>
  </tr>
 <tr>
    <td><img src="icn_pdf.gif"></td>
    <td><strong>Application Form</strong></td>
    <td><a href="/Form.pdf" class="smd"></a></td>
  </tr> 
  <tr class="odd">
    <td><img src="icn_pdf.gif"></td>
    <td><strong>Application Form</strong></td>
    <td><a href="/Form.pdf" class="smd"></a></td>
  </tr> 
 <tr>
    <td><img src="icn_pdf.gif"></td>
    <td><strong>Application Form</strong></td>
    <td><a href="/Form.pdf" class="smd"></a></td>
  </tr>
</tbody></table> 
```

目前，您可以在每一行上看到每个“文档”。我想通过jQuery做的是循环并有两行有两个文档。所以每行有6个tds？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:06:02.250

请检查这个小提琴链接。[http://jsfiddle.net/MgSsy/](http://jsfiddle.net/MgSsy/)

```
$(function() {
    $('table tr:odd').each(function() {
        $this = $(this);
        $this.prev().append(($this.html()));
        $this.remove();
    });
});​ 
```

我想这就是你想要的。

根据我对您的代码的理解，我这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T11:20:25.100

```
<script>
$(function() {

   $('#btn').on('click', fuction(){
     //adding to the first row
     $('#table tbody').prepend('<tr><td>...</td>...</tr>');

     //adding to the end
     $('#table tbody').append('<tr><td>...</td>...</tr>');

   }

}); 
```

# r - R刻度数据：聚合有关日历的数据

> ID：11774150
> 
> 赞同：0
> 
> 时间：2012-08-02T08:58:48.637
> 
> 标签：r, time-series, finance, xts

我又遇到了关于聚合刻度数据的问题（[R：当刻度数据丢失时，刻度数据增加值](https://stackoverflow.com/questions/11669945/r-tick-data-adding-value-when-tick-data-is-missing)）

我已经听从了您的所有建议，并且效果很好。但是我的日历有问题： mu xts 对象使用不遵守 SX5E 索引的打开和关闭时间的 dateTime 对象进行索引。

例如：SX5E指数23:00收盘，22:00后仍有价格！

```
2010-02-08 22:58:59     2624
2010-02-08 22:59:59     2624
2010-02-08 23:00:59     2624
2010-02-08 23:01:59     2624
2010-02-08 23:02:59     2624
2010-02-08 23:03:59     2624
2010-02-08 23:04:59     2624
2010-02-08 23:05:59     2624
2010-02-08 23:06:59     2624
2010-02-08 23:07:59     2624 
```

我想我可以通过修改 Joshua Ulrich 代码的第二行来解决这个问题:( [R : Tick data added value when tick data is missing](https://stackoverflow.com/questions/11669945/r-tick-data-adding-value-when-tick-data-is-missing) )

```
price_1m <-to.period(price,period="minutes",k=1,OHLC=FALSE)
onemin <- seq(start(price_1m),end(price_1m),by="1 min") 
Price_1m <- na.locf(merge(price_1m, xts(,onemin)))[onemin] 
```

但我不知道如何生成从 08:00:00 到 23:00:00 的 1 分钟等距序列。（Maybye 使用 seq.POSIXt？）有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:26:53.990

我相信您在这里需要做的就是使用 xts 样式的时间子集。如果您的`xts`对象被称为“Price_1m”，那么

```
Price_1m["T08:00:00/T23:00:00"] 
```

将在所有日子里删除不在这些时间之间的所有数据。

如果你想要更通用的东西，我会把你指向[我的 qmao 包](https://r-forge.r-project.org/R/?group_id=1113)来看看`?TimeOfDaySubset`

如果您不想要，您不必使用我的包，但至少查看代码（您可以在网络上浏览）不会对您造成伤害。如果你使用`qmao::MakeStrictlyRegular`你可以在那里做子集。

# html - 高度：自动；不能正常工作

> ID：11774152
> 
> 赞同：1
> 
> 时间：2012-08-02T08:58:50.773
> 
> 标签：html, css

所以我拥有的是我的主要区域/身体的容器。在那个容器下面是我的页脚容器。我想要的是身体区域根据其中的内容调整它的高度。已指定宽度。我可以以像素为单位指定高度，它可以工作。但是当我将其设置为自动时，页脚会将其置于我的身体容器上方。有人可以告诉我我做错了什么吗？

html:

```
<div id="inventory"> <!-- BEGIN INVENTORY -->

<ul class= "inventory">
<li>About #  </li>
<li>### </li>
<li>==</li>

</ul>

</div> <!-- END INVENTORY -->

<div id="text"> <!-- BEGIN CONTENT TEXT -->

<h2> About </h2> <br/>

 This is content

</div> <!-- END CONTEXT TEXT -->

<div id="inventory_right"> <!-- BEGIN INVENTORY RIGHT -->

<p class= "inventory_right"> If you have any questions, please do not hesitate to    <br/> <a href= "#"> contact us </a> </p>

</div> <!-- END INVENTORY RIGHT -->

</div> <!-- END CONTENT -->

<div id="footer"> <!-- BEGIN FOOTER -->
<p class="copyright"> Copyright © 2012 | Philip </p>
</div> <!-- END FOOTER -->

</div> <!--END CONTAINER-->
</body>

</html> 
```

CSS：

```
 #container {
        width: 1200px;
        margin: auto;
    }

    #content_other {

        width: 1200px;
        height: auto;

        }

    #inventory {

        background-image: url(../website/images/inventory.png);
        width: 154px; 
        height: 146px;
        margin-top: 80px;
        margin-left: 140px;
        float:left;
        display: block;

        }

   #inventory_right {

        background-image: url(../website/images/inventory.png);
        width: 154px; 
        height: 146px;
        margin-top: 80px;
        margin-right: 50px;
        float:right;
        display: block;

        }

    #text {

        float: left;
        border-style: solid;
        border-width: 0px;
        width: 600px;
        height: auto;
        margin-top: 80px;
        margin-left: 50px;
        }

    #footer {

        background-image: url(../website/images/footer.png);
        width: 1200px;
        height: 100px;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:01:30.973

在页脚添加新的 CSS 规则：clear:both；它应该有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:07:31.650

因为你使用`float`，给`overflow`你的父 div 属性，或者使用`clear:both`

到你的页脚

```
 #footer
{
background-image: url(../website/images/footer.png);
width: 1200px;
height: 100px;
clear:both;
} 
```

**或者**

```
#container {
width: 1200px;
margin: auto;
overflow:hidden;
} 
```

# c# - 取消执行数据库调用的 BackgroundWorker

> ID：11774158
> 
> 赞同：1
> 
> 时间：2012-08-02T08:58:59.280
> 
> 标签：c#, .net, wpf, multithreading, backgroundworker

我有一个带有子窗口的 WPF 应用程序。在该应用程序中，我正在单击按钮（在后台工作人员中）进行数据库连接检查。该过程需要一些时间才能完成，在此期间，如果用户通过单击关闭按钮关闭子窗口，窗口会关闭，但后台工作人员会继续运行并在一段时间后显示消息。

这是示例代码：

```
BackgroundWorker worker;
private void Button_Click(object sender, RoutedEventArgs e)
            {
                worker = new BackgroundWorker();
                worker.WorkerSupportsCancellation = true;
                worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
                worker.DoWork += new DoWorkEventHandler(worker_DoWork);

                bsyInd.IsBusy = true;
                worker.RunWorkerAsync();
            }
     void worker_DoWork(object sender, DoWorkEventArgs e)
            {
                try
                {
                    if (worker.CancellationPending)
                    {
                        e.Cancel = true;
                        return;
                    }

                    // checking database connectivity
                    string connstring=myconnstring;
                    SqlConnection con=new SqlConnection(connstring);
                    con.Open();
                    if(con.State==ConnectionState.Open)
                       e.Result=true;
                }
                catch (Exception)
                {
                 e.Result=false;
                }

            }

            void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
            {
                bool canConnect=(bool)e.Result;
                if(canConnect)
                    MessageBox.Show("Connected");
                else
                    MessageBox.Show("Failed");

                bsyInd.IsBusy = false;
            }

    //close child window
    private void ChildWindow_CloseButton_Click(object sender, RoutedEventArgs e)
    {
        //cancel the running process
        worker.CancelAsync();
    } 
```

我在网上找到的所有解决方案都显示了在 Do_Work 内的循环中持续监视/轮询后台工作程序的 CancellationPending 属性的示例。由于我打算执行的过程不需要任何循环，因此如何监视子窗口关闭按钮单击事件的 CancellationPending 状态并取消后台进程？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:44:33.217

如果有方法可以中止对 的阻塞调用`SqlConnection.Open`，您可以简单地将`SqlConnection`对象声明为类中的成员变量并在关闭按钮处理程序中执行中止调用。

```
private SqlConnection con;

private void ChildWindow_CloseButton_Click(object sender, RoutedEventArgs e) 
{ 
    if (con != null)
    {
        con.Dispose(); // or whatever would abort Open()
        con = null;
    }
} 
```

在工作线程`Open`中可能会抛出一种 Aborted 异常，您可以捕获然后设置`e.Cancel = true;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:32:04.440

丹尼斯，您可以使用 AutoResetEvent 的方法，请参阅[AutoResetEvent 类](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)

您向发生 sql 连接的线程发出信号，表明可以释放资源。

您仍在使用单独的线程，因此不应阻塞任何内容，但现在可以在线程之间进行通信并特别通知其中一个线程释放资源。抱歉，如果这不是预期的格式。

该链接有一个如何使用 AutoResetEvent 的示例。

# database - 使用rabbitmq将数据库作为服务

> ID：11774160
> 
> 赞同：1
> 
> 时间：2012-08-02T08:59:01.980
> 
> 标签：database, rabbitmq

在我们的架构中，每个模块都使用 rabbitmq 相互通信。所以在我们的情况下，如果一个模块想要访问数据库，首先，它会使用rabbitmq调用一个rpc请求，一个连接数据库的模块将返回一个类似json的字符串。

我的问题是，数据库访问是个好主意吗？还是有什么好主意可以使数据库成为一种服务？

# objective-c - Objective-C 中的类属性列表

> ID：11774162
> 
> 赞同：30
> 
> 时间：2012-08-02T08:59:03.493
> 
> 标签：objective-c, ios, class, object

有没有办法获得某种类属性的数组？例如，如果我有这样的界面

```
@interface MyClass : NSObject
    @property (strong,nonatomic) UILabel *firstLabel;
    @property (strong,nonatomic) UILabel *secondLabel;        
@end 
```

我可以在不知道它们的名字的情况下获得对这些标签的引用吗？

```
@implementation MyClass
    -(NSArray*)getListOfAllLabels
    {
            ?????
    }        
@end 
```

我知道我可以很容易地做到这一点`[NSArray arrayWithObjects:firstLabel,secondLabel,nil]`，但我想用某种类枚举来做到这一点`for (UILabel* oneLabel in ???[self objects]???)`

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-02T09:05:21.777

所以更准确地说，如果我理解正确的话，你想要*动态的、运行时的属性观察。*做这样的事情（在 self 上实现这个方法，你想要内省的类）：

```
#import <objc/runtime.h>

- (NSArray *)allPropertyNames
{
    unsigned count;
    objc_property_t *properties = class_copyPropertyList([self class], &count);

    NSMutableArray *rv = [NSMutableArray array];

    unsigned i;
    for (i = 0; i < count; i++)
    {
        objc_property_t property = properties[i];
        NSString *name = [NSString stringWithUTF8String:property_getName(property)];
        [rv addObject:name];
    }

    free(properties);

    return rv;
}

- (void *)pointerOfIvarForPropertyNamed:(NSString *)name
{
    objc_property_t property = class_getProperty([self class], [name UTF8String]);

    const char *attr = property_getAttributes(property);
    const char *ivarName = strchr(attr, 'V') + 1;

    Ivar ivar = object_getInstanceVariable(self, ivarName, NULL);

    return (char *)self + ivar_getOffset(ivar);
} 
```

像这样使用它：

```
SomeType myProperty;
NSArray *properties = [self allPropertyNames];
NSString *firstPropertyName = [properties objectAtIndex:0];
void *propertyIvarAddress = [self getPointerOfIvarForPropertyNamed:firstPropertyName];
myProperty = *(SomeType *)propertyIvarAddress;

// Simpler alternative using KVC:
myProperty = [self valueForKey:firstPropertyName]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-02T10:08:56.653

使用NSObject 的[attributeKeys](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-CJBEFJFE)方法。

```
 for (NSString *key in [self attributeKeys]) {

        id attribute = [self valueForKey:key];

        if([attribute isKindOfClass:[UILabel  class]])
        {
         //put attribute to your array
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-02T09:03:52.503

看看这个[链接](https://github.com/mikeash/MAObjCRuntime)。它是目标 C 运行时的目标 c 包装器。

您可以使用如下代码

```
uint count;
objc_property_t* properties = class_copyPropertyList(self.class, &count);
    NSMutableArray* propertyArray = [NSMutableArray arrayWithCapacity:count];
    for (int i = 0; i < count ; i++)
    {
        const char* propertyName = property_getName(properties[i]);
        [propertyArray addObject:[NSString  stringWithCString:propertyName encoding:NSUTF8StringEncoding]];
    }
    free(properties); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-02T09:20:46.603

您必须包含运行时标头

```
 #import<objc/runtime.h>
uint propertiesCount;
objc_property_t *classPropertiesArray = class_copyPropertyList([self class], &propertiesCount);
free(classPropertiesArray); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-20T18:54:33.397

@user529758 的答案不适用于 ARC，也不会列出任何祖先类的属性。

要解决此问题，您需要向上遍历类层次结构，并使用 ARC 兼容`[NSObject valueForKey:]`来获取属性值。

人.h：

```
#import <Foundation/Foundation.h>

extern NSMutableArray *propertyNamesOfClass(Class klass);

@interface Person : NSObject

@property (nonatomic) NSString *name;

@end 
```

人.m：

```
#import "Person.h"
#import <objc/runtime.h>

NSMutableArray *propertyNamesOfClass(Class klass) {
    unsigned int count;
    objc_property_t *properties = class_copyPropertyList(klass, &count);

    NSMutableArray *rv = [NSMutableArray array];

    for (unsigned int i = 0; i < count; i++)
    {
        objc_property_t property = properties[i];
        NSString *name = [NSString stringWithUTF8String:property_getName(property)];
        [rv addObject:name];
    }

    free(properties);

    return rv;
}

@implementation Person

- (NSMutableArray *)allPropertyNames {
    NSMutableArray *classes = [NSMutableArray array];
    Class currentClass = [self class];
    while (currentClass != nil && currentClass != [NSObject class]) {
        [classes addObject:currentClass];
        currentClass = class_getSuperclass(currentClass);
    }

    NSMutableArray *names = [NSMutableArray array];
    [classes enumerateObjectsWithOptions:NSEnumerationReverse usingBlock:^(Class currentClass, NSUInteger idx, BOOL *stop) {
        [names addObjectsFromArray:propertyNamesOfClass(currentClass)];
    }];

    return names;
}

- (NSString*)description {
    NSMutableArray *keys = [self allPropertyNames];
    NSMutableDictionary *properties = [NSMutableDictionary dictionaryWithCapacity:keys.count];
    [keys enumerateObjectsUsingBlock:^(NSString *key, NSUInteger idx, BOOL *stop) {
        properties[key] = [self valueForKey:key];
    }];

    NSString *className = NSStringFromClass([self class]);
    return [NSString stringWithFormat:@"%@ : %@", className, properties];
} 
```

学生.h：

```
#import "Person.h"

@interface Student : Person

@property (nonatomic) NSString *studentID;

@end 
```

学生.m:

```
#import "Student.h"

@implementation Student

@end 
```

主.m：

```
#import <Foundation/Foundation.h>
#import "Student.h"

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        // insert code here...
        Student *student = [[Student alloc] init];
        student.name = @"John Doe";
        student.studentID = @"123456789";
        NSLog(@"student - %@", student);
    }
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-07-02T10:10:57.530

serhats 的解决方案非常棒，不幸的是它不适用于 iOS（正如你所提到的）（并且这个问题被标记为 iOS）。一种解决方法是获取对象的 NSDictionary 表示，然后将其作为键值对正常访问。我会为 NSObject 推荐一个类别：

头文件：

```
@interface NSObject (NSDictionaryRepresentation)

/**
 Returns an NSDictionary containing the properties of an object that are not nil.
 */
- (NSDictionary *)dictionaryRepresentation;

@end 
```

实施文件：

```
#import "NSObject+NSDictionaryRepresentation.h"
#import <objc/runtime.h>

@implementation NSObject (NSDictionaryRepresentation)

- (NSDictionary *)dictionaryRepresentation {
    unsigned int count = 0;
    // Get a list of all properties in the class.
    objc_property_t *properties = class_copyPropertyList([self class], &count);

    NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] initWithCapacity:count];

    for (int i = 0; i < count; i++) {
        NSString *key = [NSString stringWithUTF8String:property_getName(properties[i])];
        NSString *value = [self valueForKey:key];

        // Only add to the NSDictionary if it's not nil.
        if (value)
            [dictionary setObject:value forKey:key];
    }

    free(properties);

    return dictionary;
}

@end 
```

*借用这篇文章：[http ://hesh.am/2013/01/transform-properties-of-an-nsobject-into-an-nsdictionary/](http://hesh.am/2013/01/transform-properties-of-an-nsobject-into-an-nsdictionary/)*

这样你就可以做一些类似于 serhats 提到的事情：

```
for (NSString *key in objectDic.allKeys) {
   if([objectDic[key] isKindOfClass:[UILabel  class]])
   {
       //put attribute to your array
   }
} 
```

# python - Python 使用子进程与其他应用程序对话

> ID：11774163
> 
> 赞同：0
> 
> 时间：2012-08-02T08:59:05.303
> 
> 标签：python, subprocess

这就是想法。我将拥有将启动（使用子进程）app1 和 app2 的“主”python 脚本。'main' 脚本会将输入发送到 app1 并将结果输出到 app2，反之亦然（主脚本需要记住发送的内容，因此我无法将管道从 app1 发送到 app2）。

这是主脚本。

```
import subprocess
import time

def main():
    prvi = subprocess.Popen(['python', 'random1.py'], stdin = subprocess.PIPE , stdout = subprocess.PIPE, stderr = subprocess.STDOUT)

    while 1:
        prvi.stdin.write('131231\n')
        time.sleep(1) # maybe it needs to wait
        print "procitano", prvi.stdout.read()

if __name__ == '__main__':
    main() 
```

这是“random1.py”文件。

```
import random

def main():
    while 1:
        inp = raw_input()
        print inp, random.random()
if __name__ == '__main__':
    main() 
```

首先，我只尝试了一个子进程，看看它是否有效。事实并非如此。它只输出 'procitano' 并在那里等待。如何读取“prvi”的输出（没有通信（）。当我使用它时，它会退出我的应用程序，这是我不想要的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:15:45.490

`prvi.stdin.flush()`之后添加`prvi.stdin.write(...)`。

说明：为了优化进程之间的通信，操作系统会在将整个缓冲区发送到另一个进程之前缓冲 4KB 的数据。如果您发送的数据较少，则需要告诉操作系统“就是这样。*现在*发送”->`flush()`

**[编辑]**下一个问题是`prvi.stdout.read()`永远不会回来，因为孩子没有退出。

您将需要在进程之间开发一个协议，以便每个进程都知道在获取某些内容时要读取多少字节的数据。一个简单的解决方案是使用基于行的协议（每个“消息”都由一个新行终止）。为此，请替换`read()`为`readline()`并且不要忘记附加`\n`到您发送的所有内容 +`flush()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:17:19.230

**主文件**

```
import subprocess
import time

def main():
    prvi = subprocess.Popen(['python', 'random1.py'], stdin = subprocess.PIPE , stdout = subprocess.PIPE, stderr = subprocess.STDOUT)

    prvi.stdin.write('131231\n')
    time.sleep(1) # maybe it needs to wait
    print "procitano", prvi.stdout.read()

if __name__ == '__main__':
    main() 
```

**随机1.py**

```
import random

def main():

    inp = raw_input()
    print inp, random.random()
    inp = raw_input()

if __name__ == '__main__':
    main() 
```

我已经使用上述代码进行了测试，然后我遇到了与您的代码相同的问题。我认为问题在于时机。这是我的猜测，当 main.py 尝试下面的代码时

```
prvi.stdout.read()  # i think this code may use the random1.py process 
```

下面的代码抓取 random1.py 进程

```
inp = raw_input() 
```

为了解决这个问题，我认为，正如 Aaron Digulla 所说，你需要开发协议来实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T10:56:37.783

*   使用`-u`标志使 random1.py 输出无缓冲
*   使用 p.stdout.readline() 而不是 .read()

由于 .read 块，time.sleep 是不必要的。

# java - 如何用java搭建代理服务器

> ID：11774165
> 
> 赞同：0
> 
> 时间：2012-08-02T08:59:10.803
> 
> 标签：java, sockets

Out Company 有一个新项目。

我们将建立代理服务器。

我使用 Java'ssocket 从 url 获取 html 文本。

然后我必须解析 html 文本。喜欢这些标签：a,frame,iframe,img,script,link...

我已经解决了这些问题。但是现在 JavaScript 已经在表单中做了一些动作。它将改变表单的动作。

如何解决这些问题。

对我来说这是一项艰巨的工作

我的英语不怎么好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:41:04.150

运行 javascript 后添加：

```
document.formName.action = "/actionLink"; 
```

# php - php exec 建议/替代方案

> ID：11774166
> 
> 赞同：1
> 
> 时间：2012-08-02T08:59:13.667
> 
> 标签：php, exec, popen, proc-open

谁能给我一些关于 PHP 命令执行和最佳实践的建议？

我目前正在尝试解析一些 netbackup 数据，但我遇到了与系统调用返回的大量数据相关的问题。为了减少我正在检索的数据量，我正在做这样的事情：

```
$awk_command = "awk -F, '{print $1\",\"$2\",\"$3\",\"$4\",\"$5\",\"$6\",\"$7\",\"$9\",\"$11\",\"$26\",\"$32\",\"$33\",\"$34\",\"$35\",\"$36\",\"$37\",\"$38\",\"$39\",\"$40}'";
exec("sudo /usr/openv/netbackup/bin/admincmd/bpdbjobs -report -M $master_name -all_columns | $awk_command", $get_backups, $null);
foreach ($get_backups as $backup_detail)
    {
    process_the_data();
    write_data_to_db();
    } 
```

我使用 awk 来限制接收的数据量。没有它，我最终会收到近 150mb 的数据，有了它，我会得到更易于管理的约 800k 数据。

你不需要告诉我 awk 狗屎很讨厌 - 我已经知道了......但是为了改善我自己（和我的代码）的利益，任何人都可以提出替代方案吗？

我在想类似的东西，`proc_open`但真的不确定这是否会带来任何好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:03:20.240

使用 exec 将数据写入文件，而不是将其全部读入脚本。

```
exec("sudo /usr/openv/netbackup/bin/admincmd/bpdbjobs -report -M $master_name -all_columns | $awk_command > /tmp/output.data"); 
```

然后使用任何内存有效的方法来部分读取文件。

看看这里： [在 PHP 中读取文件的内存占用最少的方法](https://stackoverflow.com/questions/3171155/least-memory-intensive-way-to-read-a-file-in-php)

# python - Python numpy recarray：可以使用指针算法获得不同字段的视图吗？

> ID：11774168
> 
> 赞同：2
> 
> 时间：2012-08-02T08:59:41.630
> 
> 标签：python, numpy, recarray

我有以下形式的 numpy 结构化数组：

```
x = np.array([(1,2,3)]*2, [('t', np.int16), ('x', np.int8), ('y', np.int8)]) 
```

我现在想在这个数组中生成`'t'`与`'x'`or 或`'y'`. 通常的语法会创建一个副本：

```
v_copy = x[['t', 'y']]
v_copy
#array([(1, 3), (1, 3)], 
#     dtype=[('t', '<i2'), ('y', '|i1')])

v_copy.base is None
#True 
```

这并不意外，因为选择两个字段是“花式索引”，此时 numpy 放弃并制作副本。由于我的实际记录很大，我想不惜一切代价避免复制。

在 numpy 的跨步内存模型中无法访问所需的元素是完全不正确的。查看内存中的各个字节：

```
x.view(np.int8)
#array([1, 0, 2, 3, 1, 0, 2, 3], dtype=int8) 
```

可以找出必要的步幅：

```
v = np.recarray((2,2), [('b', np.int8)], buf=x, strides=(4,3))
v
#rec.array([[(1,), (3,)],
#    [(1,), (3,)]], 
#    dtype=[('b', '|i1')])
v.base is x
#True 
```

显然，`v`在没有创建副本的情况下指向内存中的正确位置。不幸的是，numpy 不允许我将这些内存位置重新解释为原始数据类型：

```
v_view = v.view([('t', np.int16), ('y', np.int8)])
#ValueError: new type not compatible with array. 
```

有没有办法欺骗 numpy 进行这种转换，以便创建一个`v_view`等效于的数组`v_copy`，但没有制作副本？也许直接工作`v.__array_interface__`，就像在做的那样`np.lib.stride_tricks.as_strided()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:26:47.167

您可以像这样构建合适的 dtype

```
dt2 = np.dtype(dict(names=('t', 'x'), formats=(np.int16, np.int8), offsets=(0, 2))) 
```

然后做

```
y = np.recarray(x.shape, buf=x, strides=x.strides, dtype=dt2) 
```

在未来的 Numpy 版本（> 1.6）中，你也可以这样做

```
dt2 = np.dtype(dict(names=('t', 'x'), formats=(np.int16, np.int8), offsets=(0, 2), itemsize=4))
y = x.view(dt2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:00:21.013

这适用于 numpy 1.6.x 并避免创建`recarray`：

```
dt2 = {'t': (np.int16, 0), 'y': (np.int8, 3)}
v_view = np.ndarray(x.shape, dtype=dt2, buffer=x, strides=x.strides)
v_view
#array([(1, 3), (1, 3)], 
#    dtype=[('t', '<i2'), ('', '|V1'), ('y', '|i1')])
v_view.base is x
#True 
```

可以将其包装在类重载中`np.ndarray`：

```
class arrayview(np.ndarray):
    def __new__(subtype, x, fields):
        dtype = {f: x.dtype.fields[f] for f in fields}
        return np.ndarray.__new__(subtype, x.shape, dtype,
                                  buffer=x, strides=x.strides)

v_view = arrayview(x, ('t', 'y'))
v_view
#arrayview([(1, 3), (1, 3)], 
#    dtype=[('t', '<i2'), ('', '|V1'), ('y', '|i1')])
v_view.base is x
#True 
```

# visual-studio-2010 - Visual Studio 代码分析 (fxCop) 仅在第一次构建后运行

> ID：11774173
> 
> 赞同：2
> 
> 时间：2012-08-02T09:00:01.707
> 
> 标签：visual-studio-2010, msbuild, code-analysis, fxcop

我按照 [本教程创建了一个自定义 fxCop 规则并将它们集成到 Visual Studio 2010 中](http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010.aspx)

除了 fxCop 规则仅在我对源代码进行任何更改（甚至只是添加一个空格）后的第一次构建时运行之外，一切似乎都运行良好。其他构建（无需对源代码进行任何更改）不会产生任何 FxCop 警告。

我猜它与这个事实有关，如果源文件时间戳与最后编译的程序集时间戳相同，c#MSbuild“Build”目标并没有真正重新编译

如何使 FxCop 代码分析运行每个构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T06:11:49.417

A couple of things come to mind:

1.  Because as you say, MSBuild may decide the build target is up to date, you could try [running FxCop as a post-build step](http://blogs.msdn.com/b/codeanalysis/archive/2007/02/24/faq-how-do-i-run-fxcop-during-a-post-build-event.aspx).
2.  Code Analysis creates a .CodeAnalysisLog.xml and .lastcodeanalysiscucceeded file fore each analysed file. Maybe deleting these files before building would also help.

# javascript - 在回发期间保持多个 div 的切换状态

> ID：11774182
> 
> 赞同：2
> 
> 时间：2012-08-02T09:00:38.783
> 
> 标签：javascript, html, slidetoggle

我有 jscript 来切换 div 以上下滑动。我想在回发期间保持这些 div 的状态。我在其他帖子上阅读过我可以使用 cookie 和隐藏字段，但是当我的 jscript 使用多个 div 时，我不知道如何使用它。

脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".toggle").slideUp(0);
        $(".trigger").click(function () {
            $(this).next(".toggle").slideToggle("slow");
        });
    });
</script> 
```

HTML：

```
<h3 class = "trigger">Section 1</h3>
<div class = "toggle">
    <p> Item 1 </p>
</div>

<h3 class = "trigger">Section 2</h3>
<div class = "toggle">
    <p> Item 1 </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:57:26.370

感谢用户：noth1ng 找到了解决方案。 [https://forum.jquery.com/topic/slidetoggle-on-multiple-divs-to-maintain-state-during-postbacks](https://forum.jquery.com/topic/slidetoggle-on-multiple-divs-to-maintain-state-during-postbacks)

# c# - 如何将复杂模型从客户端传递到服务器？

> ID：11774189
> 
> 赞同：8
> 
> 时间：2012-08-02T09:00:51.520
> 
> 标签：c#, javascript, jquery, ajax, asp.net-web-api

我有一些数据“Foo”，我想从浏览器传递到服务器，并根据 foo 中包含的信息检索预测的统计信息。

```
$.ajax({
      type: 'GET',
      url: "/api/predictedStats/",
      data: "foo=" + ko.toJSON(foo, fooProperties),
      contentType: 'application/json; charset=utf-8',
      dataType: 'json',
      success: function(data) {
        return _this.viewModel.setPredictedStats(data);
      },
      error: function(jqXHR, statusText, errorText) {
        return _this.viewModel.setErrorValues(jqXHR, errorText);
      }
    }); 
```

我创建了一个预测的统计控制器，并获取了一个以 Foo 为参数的方法。

```
public class PredictedStatsController : ApiController
{
    public PredictedStats Get(Foo foo)
    {
        return statsService.GetPredictedStats(foo);
    }
} 
```

在 Get 方法上设置断点，我看到 Foo 对象始终为空。仅以下几行的 webapi 跟踪记录没有引发错误。

```
WEBAPI: opr[FormatterParameterBinding] opn[ExecuteBindingAsync] msg[Binding parameter 'foo'] status[0]  
WEBAPI: opr[JsonMediaTypeFormatter] opn[ReadFromStreamAsync] msg[Type='foo', content-type='application/json; charset=utf-8'] status[0]  
WEBAPI: opr[JsonMediaTypeFormatter] opn[ReadFromStreamAsync] msg[Value read='null'] status[0] 
```

我可以通过帖子将数据发送到 Foo 控制器以在服务器上创建 Foo 对象，所以我可以说创建的 json 客户端没有任何问题。

在 fiddler 中查看生成的 Get 如下所示，其中 jsondata 是对象 foo。

```
GET /api/predictedStats?foo={jsondata} HTTP/1.1 
```

这甚至可能吗，还是我做错了？

谢谢尼尔

* * *

编辑：我觉得我几乎可以使用以下内容

```
public PredictedStats Get([FromUri]Foo foo)
{
    return statsService.GetPredictedStats(foo);
} 
```

对象 foo 恢复正常，但没有正确填充 Foo 的属性。

* * *

同时，我使用了具有几乎相同数据的 POST，只是删除了“foo =”，这工作得很好。

我不确定在这种情况下是否应该使用 POST 或 GET 但这会很有趣。

* * *

我还发现了这个[http://bugs.jquery.com/ticket/8961](http://bugs.jquery.com/ticket/8961)这似乎表明您不能使用 jquery 将正文附加到 GET 请求，因此 POST 可能是唯一明智的选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:49:01.527

你几乎到了那里:)

当您使用时`[FromUri]`（您必须将其用于“复杂”对象，因为默认情况下 Web API 不会“绑定”复杂对象，它总是希望从正文中反序列化它们）您不需要传入`param=`Uri - 您只需将值的成员作为查询字符串参数传递。那就是`'member1=value&member2=value'`- where`member1`和`member2`are 的成员`Foo`。

请注意，jQuery 中没有“错误”——虽然 HTTP 规范不禁止请求正文，但浏览器很可能会这样做（如果是这种情况，jQuery 无法发送它），而且很有可能是无论如何，服务器永远不会读取它。这只是不被接受的做法。它还可能存在缓存的有趣问题，因为浏览器不会缓存 POST、PUT、DELETE 等，但如果响应标头不禁止它会缓存 GET - 这可能会产生严重的副作用客户端应用程序。我建议你看一下这个 SO：[HTTP GET with request body](https://stackoverflow.com/questions/978061/http-get-with-request-body)以获得更多信息和一些关于这个主题的有用链接。

同样，在使用 jQuery 时 - 您也不需要将对象转换为 JSON - 只需在`data`选项成员中传递 javascript 对象，然后 jQuery 就会将其转换为正确的格式。

或者应该是这样，Web API 理解 jQuery 传递它的格式。

# core-data - Core Data 无法保存任何东西

> ID：11774194
> 
> 赞同：0
> 
> 时间：2012-08-02T09:01:00.733
> 
> 标签：core-data, save, entity

我已经开始学习 Core Data 编程，但我遇到了一个问题。帮助我学习的书是为 XCode3 编写的，我正在使用 XCode4。我在网上冲浪并找到[了这篇](http://www.swampfoetus.net/chapter-7-fail/#_comments)文章。我已经完成了一切，就像它写在那里一样，并创建了我的实体，就像它写在书中一样。为了启用保存操作，我被告知要按住 CTRL+将 Save 菜单项拖动到我的笔尖中的 AppDelegate。我这样做了，但是当我在程序中进行更改然后在我重新打开它时保存它时，似乎什么都没有保存。我怎么能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:08:13.963

您需要将保存按钮与操作处理程序连接起来。它必须具有以下结构：

`.h file`

```
@interface YourClass : UITableViewController 
//... ivars, properties    
-(IBAction)saveButtonPressed:(id)sender;
@end 
```

`.m file`

```
-(void)saveButtonPressed:(id)sender {
   [self.managedObjectContext save:nil];
} 
```

现在 ctrl-dragging 应该可以工作了。从按钮拖动到控制器。在生成的黑色弹出窗口中，您应该能够选择`saveButtonPressed`.

* * *

**编辑**

一个更好的方法是这样做：打开拆分视图控制器。左边是带有按钮的故事板/IB，右边是视图控制器类的 .h 文件。现在控制从按钮拖动到`@end`.h 文件中的上方空间。在弹出窗口中，选择“Action”（不是“Outlet”），将其命名为`saveButtonPressed`. 按 OK，Xcode 将自动生成以上所有内容。现在只需在新按钮处理程序中填写保存指令。

# ruby - 复制一个js提示框的内容——watir-webdriver

> ID：11774195
> 
> 赞同：0
> 
> 时间：2012-08-02T09:01:02.263
> 
> 标签：ruby, watir, watir-webdriver

我在单击链接时测试的网站提供了一个 JavaScript 提示框，其中包含文本输入字段中的 url。

无论如何，是否只复制存储在文本字段中的链接并将其存储在变量中？

JavaScript 提示示例：

```
window.prompt("here is the link", "www.google.com"); 
```

我试过的：

```
browser.alert.text 
```

返回 - “这里是链接”的结果

编辑：

活动图片

![在此处输入图像描述](../Images/1ae7cc27090324013766cf2976e52524.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:02:49.943

是的，只是做

```
var ret = window.prompt("here is the link", "www.google.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:06:12.717

据我所见，警报类仅返回文本：[http ://rubydoc.info/gems/watir-webdriver/Watir/Alert](http://rubydoc.info/gems/watir-webdriver/Watir/Alert)

# javascript - 向一个 jQuery/DOM 元素添加一个函数

> ID：11774204
> 
> 赞同：0
> 
> 时间：2012-08-02T09:01:34.513
> 
> 标签：javascript, jquery

我正在创作一个实例化地图的插件。然后，该地图将提供移动到地球上另一个地方的功能。

该脚本使地图很好。但是，我不能“附加”元素上的函数，以供回调中的另一个插件使用。

这是我尝试过的方法；在插件中：

```
(function($){
  $.fn.mapDo(options){
    map = new BlahMap(this.get(0));

    this.moveTheMap = function(place){
      map.moveItToThat(place);
    }; // nope.
  }
})(jQuery); 
```

那么，鉴于：

```
$(map).mapDo();

$(otherElement).otherControl({
  callback: function(place){
    $(map).moveTheMap(place); // moveTheMap is not there on $(map)!
  }
}; 
```

### 问题

如果可能，如何向地图 jQuery 或 DOM 元素添加函数？如果没有，我该如何提供这种功能？

更重要的是，通过这种方式分离事物，我是否走在正确的道路上？我对 Javascript 有点陌生，这些任务通常是如何在保持组件分开的同时完成的？

虽然这是我的尝试，但更一般地说，我在从 jQuery 插件输出内容的同时保持可链接性的概念上苦苦挣扎。在这种情况下，我想做的是从插件中**输出**一个回调，该回调将在稍后的执行中作用于被调用的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:10:07.490

您可以存储`map`with`.data`方法。

```
(function($){
  $.fn.mapDo = funciont(options) {
    this.data('map', new BlahMap(this.get(0)));
    return this;
  };
  $.fn.moveTheMap = function(place) {
      var map = this.data('map');
      if (map) {
         map.moveItToThat(place);
      }
      return this;
  };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:10:20.067

插件通常只向 jQuery 原型添加一个方法，并且对插件实例的方法调用是用字符串完成的。

```
(function($) {
    $.fn.mapDo = function(options) {
        var args = [].slice.call(arguments, 1); //Get all the arguments starting from 2nd argument as an array
        return this.each(function() {
            var $this = $(this),
                instance = $this.data("map-instance");
            if (!instance) {
                $this.data("map-instance", (instance = new BlahMap(this, options)));
            }
            if (typeof options == "string") {
                instance[options].apply(instance, args);
            }
        });
    };
})(jQuery);

$(elem).mapDo( "moveTheMap", place ); //This would also instantiate the plugin if it wasn't instantiated 
```

这是 jsfiddle 展示它的实际效果：

[http://jsfiddle.net/X8YA8/1/](http://jsfiddle.net/X8YA8/1/)

# listview - 禁用列表视图的横向幻灯片选择

> ID：11774209
> 
> 赞同：5
> 
> 时间：2012-08-02T09:01:49.033
> 
> 标签：listview, windows-8, windows-runtime, winrt-xaml, gesture

我正在设计一个应用程序，该应用程序在中心有一个垂直平移的一维列表，并且由于翻转视图，用户能够在列表之间水平翻转。

![垂直平移的一维列表](../Images/62248027fe0a78006267a49f1e56edc1.png)

当用户在列表视图中水平拖动时，由于[cross-slide](http://msdn.microsoft.com/en-us/library/windows/apps/hh465299.aspx) ，它会选择该行。这不是我想要的行为。最好我希望翻转视图开始左右平移。我认为这与[rails](http://msdn.microsoft.com/en-us/library/windows/apps/hh465310.aspx#Rails)有关，因为当用户对角平移时，他们可以平移翻转视图。

当 selectionmode 设置为`None`

如何禁用横向滑动，或者如何确保当用户左右平移时翻转视图平移而不是列表视图项目？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T09:13:58.970

ListView 上的 IsSwipeEnabled="False" 可能会起作用。您还可以编辑 ListView.ItemContainerStyle/ListViewItem 模板以禁用某些视觉状态反馈转换。

# c# - 使用 ITextSharp 从内存流中附加 PDF 文件时遇到问题

> ID：11774211
> 
> 赞同：2
> 
> 时间：2012-08-02T09:01:52.690
> 
> 标签：c#, asp.net, itextsharp, memorystream

我在附加内存中创建的 PDF 文件并将其附加到电子邮件模板时遇到问题。

电子邮件没有任何问题..但没有附件。我不明白为什么会这样。

这是该过程的完整代码。

```
ExtendedEmailTemplate emailTemp = new ExtendedEmailTemplate();
emailTemp.FromAddress = "ABC Ltd <info@abcTechnology.com>";
emailTemp.ToAddress = custEmail;
emailTemp.Body = "This is an Test Email"
emailTemp.IsHTML = true;

// getting the memorystream of cretaed PDF file in memory
MemoryStream pdfStream = MWProductGuaranteedHelper.CreateProductGuaranteeCertificatePDF(custName, guranteeCode, productName);

// getting the MailMessage by passing the memorystream and attach the PDF
MailMessage emailMessage = ExtendedEmailTemplate.GenerateMailMessage(emailTemp, pdfStream);

// sending an email with by passing the (MailMessage)
emailTemp.SendGuaranteeCertificateAttachmentEmail(emailMessage); 
```

* * *

## 在内存中创建 PDF

```
public static MemoryStream CreateProductGuaranteeCertificatePDF(string custName, string guaranteeCode, string productName)
  {
      MemoryStream memoryStream = new MemoryStream();
      string guaranteedUntil = DateTime.Now.AddYears(3).ToString("dd-MM-yyyy");

      string fromFile = Server.MapPath(guaranteeCertificateFilePath);
       PdfReader reader = new PdfReader(fromFile);
       PdfStamper stamper = new PdfStamper(reader, memoryStream);
       AcroFields fields = stamper.AcroFields;

       // AcroFields setting CODE EMITTED 

      stamper.Writer.CloseStream = false;  // making sure that stream stays open after closing the stamper
      stamper.FormFlattening = false;
      stamper.Close();
      reader.Close();

      memoryStream.Position = 0;  // reset the position of the stream, so that attachment works right
      return memoryStream;
  } 
```

* * *

## 生成邮件消息

```
public static MailMessage GenerateMailMessage(ExtendedEmailTemplate template, MemoryStream _ms)
    {
        MailMessage mailMessage = new MailMessage();
        mailMessage.From = new MailAddress(template.FromAddress);
        mailMessage.To.Add(template.ToAddress);
        mailMessage.Subject = template.Subject;
        mailMessage.Body = template.Body;
        mailMessage.Attachments.Add(new Attachment(_ms, "ABC-Certificate.Pdf", "application/pdf"));
        mailMessage.IsBodyHtml = template.IsHTML;

        return mailMessage;
    } 
```

* * *

## 发送电子邮件

```
public void SendGuaranteeCertificateAttachmentEmail(MailMessage _message)
    {
        EmailClient.Send(_message);
    }

 public static void Send(MailMessage mailMessage) // SMTP Settings CODE Emitted. 
        {
                //SEND THE MAIL MESSAGE
                smtpClient.Send(mailMessage);
        } 
```

我不知道这段代码出了什么问题...电子邮件没有任何附件。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:08:20.510

我看不出您做错了什么，但我正在做类似的事情，尽管通过解析网页来创建我的 pdf。这就是我所做的：

```
 public static Attachment GetPDfAttachmentFromUrl(string url)
        {
            string download = new WebClient().DownloadString(url);

            MemoryStream ms = new MemoryStream();
            Document document = new Document(PageSize.A4, 80, 50, 30, 65);
            PdfWriter writer = PdfWriter.GetInstance(document, ms);
            try
            {
                StringReader stringReader = new StringReader(download);
                List<IElement> parsedList = HTMLWorker.ParseToList(stringReader, null);
                document.Open();
                foreach (object item in parsedList)
                {
                    document.Add((IElement)item);
                }
                document.Close();
                stringReader.Close();

                MemoryStream pdfstream = new MemoryStream(ms.ToArray());
//create attachment
                Attachment attachment = new Attachment(pdfstream, "transaction.pdf");

                return attachment;
            }
            catch (Exception exc)
            {
                Console.Error.WriteLine(exc.Message);
            }
            return null;
        } 
```

然后在一个单独的地方我像这样发送它：

```
 MailMessage mm = new MailMessage(from, to);
        mm.Body = body;
        mm.Subject = subject;
        mm.IsBodyHtml = true;
        mm.Attachments.Add(attachment);
        SmtpClient smtp = new SmtpClient();
        smtp.Send(mm); 
```

这有帮助吗？

# javascript - HTML5 画布中的可拖动和可调整大小元素

> ID：11774212
> 
> 赞同：2
> 
> 时间：2012-08-02T09:01:54.307
> 
> 标签：javascript, drag-and-drop, html5-canvas

是否可以使 HTML5 Canvas 元素中的元素可拖动和调整大小。有什么方法可以使以下代码中的动态图像可移动：

```
var ctx, imgArray;

function initAll() {
    ctx = document.getElementById("canvas").getContext("2d");
    imgArray = ["http://i46.tinypic.com/nqe1dt.jpg", 
                    "http://i50.tinypic.com/i21phi.jpg", 
                    "http://i49.tinypic.com/1zmfcrq.jpg", 
                    "http://i50.tinypic.com/v8g6mo.jpg", 
                    "http://i49.tinypic.com/21kh7ah.jpg"];
    drawCanvas();
    document.getElementById("checkgroup").onchange = drawCanvas;
}

function drawCanvas() {
   ctx.clearRect(0, 0, 600, 400);
   for(var i=0; i < imgArray.length; ++i) {
      var img = new Image();
      img.posX = (i < 3) ? i*200 : (i-2.5)*200;
      img.posY = (i < 3) ? 0 : 200;
      img.src = imgArray[i];
      img.onload = function() {
        ctx.drawImage(this, this.posX, this.posY, 150, 150);
      } 
   }
}
window.onload = initAll; 
```

该项目位于 JSBin：http: [//jsbin.com/welcome/7209/edit](http://jsbin.com/welcome/7209/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:17:30.067

使用为画布提供形状对象支持的 KineticJS。

KineticJS 将为其形状提供鼠标事件，因此您可以更轻松地实现类似拖动的功能：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/)

# grails - 国际化 Grails 应用程序中的模型

> ID：11774213
> 
> 赞同：2
> 
> 时间：2012-08-02T09:01:54.370
> 
> 标签：grails, internationalization

我有一个需要国际化的 Grails 应用程序。Grails 使使用该文件翻译固定字符串变得容易`messages.properties`，但我找不到如何翻译模型字段。

> 有没有办法管理国际化模型，以便可以在某个管理区域输入多种语言的模型，并在视图中选择正确的模型？

我可以建立自己的系统，但也许这种类型的东西已经存在，而且它比我写的更具特色和经过实战考验。这在 Django 中发生在我身上：我使用了一个自定义系统 - 我将在下面描述 - 进行国际化，结果发现各种 Django 应用程序已经解决了这个问题。

**如何解决此问题的示例**

如果不清楚我想要实现什么，这里我描述了我在 Django 上使用的实现。

我有两个基本的抽象模型，`I18NModel`和`TranslationModel`. 应用程序中使用的实际模型继承自前者，而它们的翻译来自后者。在继承过程中，他们需要为其未翻译的模型定义一个外键，并使用相关语言定义一个字段。

反过来，原始模型继承了一个方法`translate`，该方法采用一种语言并返回一个代理模型。该代理对原始的未翻译模型和与正确项目和语言关联的已翻译模型都有参考。

每当您在代理上请求一个字段时，它会尝试查找它是否在已翻译模型上定义。如果是，它将返回它，否则它将默认提供未翻译模型上的字段。

将其与查找当前语言的方法挂钩，结果我得到了可以在模板中使用的东西：

```
<h1>{{ article.translate.title }}</h1> 
```

同时允许编辑在管理区域插入翻译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:51:54.550

看起来[i18n-fields 插件](http://grails.org/plugin/i18n-fields)可以做到这一点。

# c# - 检查用户名可用性

> ID：11774215
> 
> 赞同：1
> 
> 时间：2012-08-02T09:01:56.627
> 
> 标签：c#, javascript, asp.net-ajax

我在 createuserwizard 中创建了一个检查用户名可用性。我在检查过程中添加了一个进度指示器，并会显示一个微调器图像（gif 格式），它是通过使用 java 脚本完成的。

如果系统正在检查数据库中的用户名，它将显示微调器图像，同时显示文本“检查可用性...”

问题不是在检查时没有出现微调器图像..

这是代码：

```
<script language="javascript" type="text/javascript">
      // Hook the InitializeRequest event.
      Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(InitializeRequest);

      function InitializeRequest(sender, args) {
          // Change div's CSS class and text content.
          $get('UserAvailability').className = 'progress';
          $get('UserAvailability').innerHTML = 'Checking availability...';

      }
  </script>

  <asp:UpdatePanel runat="server" ID="up1">
                            <ContentTemplate>
                        <tr> 
                            <td class="style4">Username:</td>
                            <td> 

                                <asp:TextBox runat="server" ID="UserName" AutoPostBack="True" 
                                    ontextchanged="Username_Changed" Width="190" />

                                     <div runat="server" id="UserAvailability" style="background-position: left; background-repeat: no-repeat; margin-left: -250px; padding-left: 22px; float:right;"></div>
                          </td> 

                        </tr> 

                        </ContentTemplate>
                      </asp:UpdatePanel> 
```

这是后面的代码：

```
 protected void Username_Changed(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(2000);

        TextBox UserNameTextBox = (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("UserName");

        if (Membership.GetUser(UserName.Text) != null)
        {
          UserAvailability.InnerText = "Username taken, sorry.";
          UserAvailability.Attributes.Add("class", "taken");

        }
        else
        {
         UserAvailability.InnerText = "Username available!";
         UserAvailability.Attributes.Add("class", "available");

        }
    } 
```

我使用了母版页，我曾尝试将 JS 文件放在母版页中，但图像仍然没有出现。

**编辑**

```
 <style type="text/css">
       #UserAvailability 
{
  padding-left: 22px;
  margin-left: 30px;
  float: left;
  background-position: left;
  background-repeat: no-repeat;
}

.progress
{
  background-image: url(Images/spinner.gif);
}

.taken
{
  background-image: url(Images/taken.gif);
}

.available
{
  background-image: url(Images/available.gif);
}

        </style> 
```

# google-apps-script - 如何找到文档中的页码/页数？

> ID：11774217
> 
> 赞同：5
> 
> 时间：2012-08-02T09:02:04.647
> 
> 标签：google-apps-script

我想基于模板创建一个新文档，并且需要知道我的插入或追加何时会在最终打印输出中产生新页面是否有任何属性/属性，例如可用于此的页数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:14:22.767

我过去搜索了很多，我认为没有任何属性或任何其他方式可以了解页面信息。

我使用的解决方案是在我的模板上或通过脚本插入分页符，使用我自己对模板如何工作的了解，即我迭代时需要多少空间等。然后我通过计算知道我在哪个页面分页符。

[无论如何，您可以在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提出增强请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T13:03:32.393

获取总页数的一种方法：

```
function countPages() {
   var blob = DocumentApp.getActiveDocument().getAs("application/pdf");
   var data = blob.getDataAsString();

   var re = /Pages\/Count (\d+)/g;
   var match;

   var pages = 0;

   while(match = re.exec(data)) {
      Logger.log("MATCH = " + match[1]);

      var value = parseInt(match[1]);

      if (value > pages) {
         pages = value;
      }
   }

   Logger.log("pages = " + pages);

   return pages; 
} 
```

# java - log4j 属性文件 - 如何设置套接字附加程序的阈值？

> ID：11774220
> 
> 赞同：1
> 
> 时间：2012-08-02T09:02:12.387
> 
> 标签：java, log4j, appender

`Threshold`我在属性文件中设置有一些问题。

我创建了两个文件：

`log4j-server.properties`

```
log4j.rootLogger=ERROR, CA, FA

#
log4j.appender.CA=org.apache.log4j.ConsoleAppender
log4j.appender.CA.layout=org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern=[%d] [%t] [%m]%n
log4j.appender.CA.Threshold=DEBUG

#
log4j.appender.FA=org.apache.log4j.FileAppender
log4j.appender.FA.File=result.log
log4j.appender.FA.layout=org.apache.log4j.PatternLayout
log4j.appender.FA.layout.ConversionPattern=[%d] [%t] [%m]%n
log4j.appender.FA.Threshold=DEBUG 
```

和`log4j.properties`

```
log4j.rootLogger=DEBUG, server

log4j.appender.server=org.apache.log4j.net.SocketAppender
log4j.appender.server.Port=4712
log4j.appender.server.RemoteHost=localhost
log4j.appender.server.ReconnectionDelay=10000 
```

我得到日志：

```
INFO [2012-08-02 11:14:27,490] [main] [Listening on port 4712]
INFO [2012-08-02 11:14:27,490] [main] [Waiting to accept a new client.]
INFO [2012-08-02 11:14:37,669] [main] [Connected to client at /127.0.0.1]
INFO [2012-08-02 11:14:37,669] [main] [Starting new socket node.]
INFO [2012-08-02 11:14:37,669] [main] [Waiting to accept a new client.]
INFO [2012-08-02 11:14:41,385] [main] [Connected to client at /127.0.0.1]
INFO [2012-08-02 11:14:41,385] [main] [Starting new socket node.]
INFO [2012-08-02 11:14:41,401] [main] [Waiting to accept a new client.]
INFO [2012-08-02 11:14:41,385] [request1343898881385] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:41,510] [request1343898881385] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:41,510] [request1343898881385] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:41,510] [request1343898881385] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:41,526] [SimpleSocketServer-4712] [Caught java.net.SocketException closing conneciton.]
INFO [2012-08-02 11:14:42,228] [main] [Connected to client at /127.0.0.1]
INFO [2012-08-02 11:14:42,228] [main] [Starting new socket node.]
INFO [2012-08-02 11:14:42,228] [main] [Waiting to accept a new client.]
INFO [2012-08-02 11:14:42,228] [request1343898882228] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:42,353] [request1343898882228] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:42,353] [request1343898882228] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:42,353] [request1343898882228] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:42,353] [SimpleSocketServer-4712] [Caught java.net.SocketException closing conneciton.] 
```

虽然我只需要我的程序生成的日志，而不是套接字服务器本身生成的消息

```
INFO [2012-08-02 11:14:41,385] [request1343898881385] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:41,510] [request1343898881385] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:41,510] [request1343898881385] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:41,510] [request1343898881385] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:42,228] [request1343898882228] [public static void hello.RMIClient.main(java.lang.String[])]
INFO [2012-08-02 11:14:42,353] [request1343898882228] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:42,353] [request1343898882228] [public java.lang.String hello.Hello.greeting(java.lang.String)]
INFO [2012-08-02 11:14:42,353] [request1343898882228] [public static void hello.RMIClient.main(java.lang.String[])] 
```

我几乎尝试了所有配置，但我找不到解决方案。

**编辑：** 我添加了`-Dlog4j.debug=true`行

我得到了

```
log4j: Trying to find [log4j.xml] using context classloader sun.misc.Launcher$AppClassLoader@35ce36.
log4j: Trying to find [log4j.xml] using sun.misc.Launcher$AppClassLoader@35ce36 class loader.
log4j: Trying to find [log4j.xml] using ClassLoader.getSystemResource().
log4j: Trying to find [log4j.properties] using context classloader sun.misc.Launcher$AppClassLoader@35ce36.
log4j: Trying to find [log4j.properties] using sun.misc.Launcher$AppClassLoader@35ce36 class loader.
log4j: Trying to find [log4j.properties] using ClassLoader.getSystemResource().
log4j: Could not find resource: [null].
log4j: Parsing for [root] with value=[DEBUG, CA, FA].
log4j: Level token is [DEBUG].
log4j: Category root set to DEBUG
log4j: Parsing appender named "CA".
log4j: Parsing layout options for "CA".
log4j: Setting property [conversionPattern] to [%p [%d] [%t] [%m]%n].
log4j: End of parsing for "CA".
log4j: Setting property [threshold] to [DEBUG].
log4j: Parsed "CA" options.
log4j: Parsing appender named "FA".
log4j: Parsing layout options for "FA".
log4j: Setting property [conversionPattern] to [[%d] [%t] [%m]%n].
log4j: End of parsing for "FA".
log4j: Setting property [threshold] to [DEBUG].
log4j: Setting property [file] to [result.log].
log4j: setFile called: result.log, true
log4j: setFile ended
log4j: Parsed "FA" options.
log4j: Finished configuring. 
```

**编辑：**更改转换模式后|我得到了

```
INFO  [2012-08-02 12:13:11,278] [main] org.apache.log4j.net.SimpleSocketServer Listening on port 4712
INFO  [2012-08-02 12:13:11,278] [main] org.apache.log4j.net.SimpleSocketServer Waiting to accept a new client.
INFO  [2012-08-02 12:13:22,125] [main] org.apache.log4j.net.SimpleSocketServer Connected to client at /127.0.0.1
INFO  [2012-08-02 12:13:22,125] [main] org.apache.log4j.net.SimpleSocketServer Starting new socket node.
INFO  [2012-08-02 12:13:22,125] [main] org.apache.log4j.net.SimpleSocketServer Waiting to accept a new client.
INFO  [2012-08-02 12:13:25,664] [main] org.apache.log4j.net.SimpleSocketServer Connected to client at /127.0.0.1
INFO  [2012-08-02 12:13:25,664] [main] org.apache.log4j.net.SimpleSocketServer Starting new socket node.
INFO  [2012-08-02 12:13:25,664] [main] org.apache.log4j.net.SimpleSocketServer Waiting to accept a new client.
INFO  [2012-08-02 12:13:25,664] [request1343902405664] aspects.ReportingAspect public static void hello.RMIClient.main(java.lang.String[])
INFO  [2012-08-02 12:13:25,789] [request1343902405664] aspects.ReportingAspect public java.lang.String hello.Hello.greeting(java.lang.String)
INFO  [2012-08-02 12:13:25,789] [request1343902405664] aspects.ReportingAspect public java.lang.String hello.Hello.greeting(java.lang.String)
INFO  [2012-08-02 12:13:25,789] [request1343902405664] aspects.ReportingAspect public static void hello.RMIClient.main(java.lang.String[])
INFO  [2012-08-02 12:13:25,789] [SimpleSocketServer-4712] org.apache.log4j.net.SocketNode Caught java.net.SocketException closing conneciton. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:28:53.473

您需要了解 log4j 如何应用阈值：

首先应用记录器的阈值。如果记录器没有，则应用父记录器的阈值。如果消息不能通过其中任何一个，则任何附加程序都不会看到它。

在下一步中，所有附加程序都将看到该消息，并且他们将再次使用其阈值对其进行过滤。

因此，如果任何 logger 的阈值高于 appender 的阈值，则 appender 将永远不会看到该消息。

你怎么能解决这个问题？您可以使用“更接近”消息源的记录器。如果你想从下面的类中`com.something.x.y.z`记录，你可以定义一个记录器`com`并给它一个阈值+一个附加器。

它将在根记录器之前看到消息，因此您可以使用它来重定向部分消息。

还要记住，使用包/类名只是为了方便。记录器名称可以是任何名称。因此，您可以定义一个名为`RMI`or的记录器`network`并使用它。由于它不是通常的记录器层次结构的一部分，因此只有特定的消息会到达那里。

只是不要忘记根据需要设置`additive`为`false`以确保消息只处理一次。

**[编辑]**我的猜测是读取了错误的配置。添加`-Dlog4j.debug=true`到命令行以查看 log4j 读取哪些配置文件以及它如何配置自身。

**[EDIT2]**使用日志模式`%-5p [%d] [%t] %c %m%n`查看哪个记录器创建了哪个消息。然后，您可以提高不想要的阈值。

# unix - Unix（Cygwin）whatis：将所有命令返回为“不合适”

> ID：11774230
> 
> 赞同：14
> 
> 时间：2012-08-02T09:02:50.263
> 
> 标签：unix, command, cygwin

出于某种奇怪的原因，我的 Unix shell (cygwin) 中的“whatis”命令不起作用。它不断返回“ls：不合适”或“cd：不合适”。我想知道是否有一些错误的设置。有没有人有任何光亮？谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-09-10T20:10:05.507

[我在使用 64 位Red Hat Cygwin 安装](http://www.redhat.com/services/custom/cygwin/)时遇到了类似的问题。

在我的情况下，`/usr/sbin/makewhatis`不存在。运行`man`并且命令有效，但除了“不合适”之外，既没有`apropos`也没有返回任何东西。`whatis`

在搜索了一个丢失的包并拼凑了一堆之后，我阅读了友好手册页面`man`并找到了关于`mandb`.

跑步`mandb`解决了我的问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-02T16:58:49.460

来自[Cygwin 常见问题解答](http://cygwin.com/faq-nochunks.html#faq.using.man)：

> 为什么 man -k （或 apropos ）不起作用？
> 
> 在您可以使用 man -k 或 apropos 之前，您必须创建 whatis 数据库。只需运行命令
> 
> ```
> mandb 
> ```
> 
> （可能需要一分钟才能完成）。

（注意：它过去常说`/usr/sbin/makewhatis`，而不是`mandb`旧版本的常见问题解答。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-28T07:56:17.200

运行`sudo mandb`一次

不确定这是否有帮助，但是当我跑步时`mandb`，我得到了这个（经过多次尝试）。

```
mandb    
0 man subdirectories contained newer manual pages.
0 manual pages were added.
0 stray cats were added.
0 old database entries were purged. 
```

然而，

```
sudo mandb
75 man subdirectories contained newer manual pages.
7235 manual pages were added.
0 stray cats were added.
0 old database entries were purged. 
```

为真实工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T06:24:58.300

我遇到了同样的问题。
我通过`#mandb`命令修复了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-30T13:21:20.910

我的问题通过运行#mandb 命令得到解决

```
[root@localhost log]# whatis last
last (1)             - show a listing of last logged in users
[root@localhost log]# 
```

# android - Android 分辨率和模拟器没有选择正确的图像

> ID：11774232
> 
> 赞同：2
> 
> 时间：2012-08-02T09:02:57.033
> 
> 标签：android, android-layout

我有一个关于 Android 分辨率及其在模拟器上的表示方式的快速问题。我已经建立了一个测试项目来测试许多不同的分辨率以及它们在每个方向上的外观。所以我创建了drawable-land-ldpi、mdpi、hdpi-xhpdi，并对drawable-port做了同样的事情。我也有所有的布局文件夹，即 small med large x large、small-land、med-land、large-land、x-land

我创建了 8 个测试图像，只是说小端口、陆地、中端口、陆地等，只是为了检查 Android 是否选择了正确的图像。我还为每个布局文件夹创建了一个布局文件，在布局文件中我有一个仅指定文件夹名称的文本字段，因此我知道正在使用哪个布局文件夹。

我有两个问题，首先是我是否为每个文件夹创建了正确的图像大小。我创建的图像尺寸如下

可绘制土地 ldpi - 320 * 240 可绘制端口 ldpi - 240 * 320

可绘制土地 mdpi - 480 * 320 可绘制端口 mdpi - 320 * 480

可绘制土地-hdpi - 800 * 480 可绘制端口-hdpi - 480 * 800

可绘制土地 xhdpi - 1080 * 720 可绘制端口 xhdpi - 720 * 1080

我的第二个问题是为什么这些在模拟器上似乎不能正确表示？例如，我创建了一个带有一个屏幕的 Android 应用程序，图像位于相应的文件夹中。我创建了两个模拟器，一个是 2.3.3，一个是 3.0 平板电脑。

如果我在我的设备上运行该设备，它将使用中等分辨率文件夹中的图像并使用中等布局文件夹。因此，如果是端口，它将使用默认布局文件夹中的布局和 drawable-port-mdpi 中的图像，如果是横向，它将使用默认土地文件夹中的布局和 drawable-land-mdpi 中的图像。

但是，如果我在模拟器上运行它，在 2.3.3 设备上，它使用来自中等布局文件夹的布局文件夹，但来自 drawable-hdpi-port 的图像，如果它的横向使用中等横向布局文件夹，但是来自drawable-hdpi-land的图像。如果我在 3.0 平板电脑模拟器上运行它，它使用来自 xLarge 端口和 xLarge 土地的正确布局，但它使用来自 drawable-mdpi 文件夹的图像。

我已在清单中设置以支持所有分辨率和布局。模拟器这样做有什么原因吗？我目前没有 Android 平板电脑来测试这个，因为朋友忘了带它，所以我无法测试这在平板电脑上是否正常工作。

我希望能够使用模拟器尝试一系列设备进行测试，但如果它没有选择正确的图像，那么我不能依赖它。其他人有这样的问题吗？还是我做错了什么？

任何信息将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:56:15.640

像素密度很重要。例如，您的 hdpi 图像可能大小合适，但像素密度不正确，它们仍会在这些文件夹中缩放。例如，您的 hdpi 图像应具有 ~240dpi 的像素密度。查看开发人员指南以支持多种屏幕尺寸：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

另一个问题是屏幕可能有多种尺寸以及不同的像素密度，例如，平板电脑可能是 10 英寸（X-Large），但仍具有中等像素密度（1280x800）。同时，如果分辨率为 2560x1600 之类的，您可以拥有另一台同样为 10 英寸且带有 xhdpi 的平板电脑。

根据像素密度指定实际布局文件夹可能会更好。即，您可以制作文件夹：

```
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

你仍然可以向他们申请港口和土地。阅读有关支持多种屏幕尺寸的页面，它可能真的有助于回答您的很多问题。

# asp.net - 从 C# 代码绑定 sqldatasource 时为空记录

> ID：11774233
> 
> 赞同：0
> 
> 时间：2012-08-02T09:02:57.783
> 
> 标签：asp.net, gridview, sqldatasource

我试图通过从另一个页面传递变量来绑定代码中的 sqldatasource，但是当我运行报告时，我得到 0 条记录，

，我的代码为流

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server"
    ConnectionString="<%$ ConnectionStrings:WorkflowConnStr %>"
    SelectCommand="SELECT * FROM tbl_ServiceTracking WHERE (ActorUID = @strUserId) AND (RequestedDate &gt;= @DateFrom) AND (RequestedDate  &lt;= @DateTo)">
    <SelectParameters>
        <asp:Parameter Name="strUserId" />
        <asp:Parameter Name="DateFrom" />
        <asp:Parameter Name="DateTo" />
    </SelectParameters>
</asp:SqlDataSource>

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" /> 
```

c# 代码

```
string strUserId = Request.QueryString["userid"];
string DateFrom = Request.QueryString["dtfrom"];
string DateTo = Request.QueryString["dtto"];

SqlDataSource1.SelectParameters.Add("strUserId", strUserId);
SqlDataSource1.SelectParameters.Add("DateFrom", DateFrom);
SqlDataSource1.SelectParameters.Add("DateTo", DateTo);
SqlDataSource1.DataSourceMode = SqlDataSourceMode.DataReader;
GridView1.DataSource = SqlDataSource1;
GridView1.DataBind(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:13:10.117

我通过更改代码解决了这个问题

```
SqlDataSource1.SelectParameters["strUserId"].DefaultValue = strUserId;
SqlDataSource1.SelectParameters["DateFrom"].DefaultValue = DateFrom;
SqlDataSource1.SelectParameters["DateTo"].DefaultValue = DateTo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:34:20.113

您还可以在设计模式下设置选择参数：

```
<SelectParameters>
  <asp:QueryStringParameter Name="UserID" QueryStringField="userid" 
    Type="String" DefaultValue="userid" />
  <asp:QueryStringParameter DefaultValue="dtfrom" Name="dtfrom" 
    QueryStringField="dtfrom" Type="String" />
  <asp:QueryStringParameter DefaultValue="dtto" Name="dtto" 
    QueryStringField="dtto" Type="String" />
</SelectParameters> 
```

# html - html字段对齐

> ID：11774236
> 
> 赞同：0
> 
> 时间：2012-08-02T09:03:04.213
> 
> 标签：html

下午好，

我是 html 新手。我已将 html 表单字段添加到我的应用程序中。文本字段未对齐，它们看起来非常不整洁。这是因为我有像“第一个标签”和“第二个标签”这样的字段名称，它们旁边有一个文本字段。与第一个标签相比，第二个标签的文本字段更靠左。有没有办法在不使用表格的情况下对齐它们？如果我使用桌子，我可以知道我应该怎么做吗？很抱歉，我是新用户，无法上传任何照片。

下面是我的html代码。

感谢您的任何帮助！

干杯，郑红

```
<div class="rightsettings">
        <form name="addsubject" action="html_form_action.asp" method="get">
        <br>Subject: <input type="text" name="user" /></br>
        <br>Number of tags<select name="addnoofsubject" id = "addnoofsubject" onchange="checktags()">
            <option value=1>1</option>
            <option value=2>2</option>
            <option value=3>3</option>
            <option value=4>4</option>
            <option value=5>5</option>
        </select></br>
        <div id="addfirsttag">
        <br>First Tag: <input type="text" name="tag1"/></br>
        <div id = "addsecondtag" style="visibility:hidden">
        <br>Second Tag: <input type="text" name="tag2"/></br>
        </div>
        <div id = "addthirdtag" style="visibility:hidden">
        <br>Third Tag: <input type="text" name="tag3"/></br>
        </div>
        <div id = "addfourthtag" style="visibility:hidden">
        <br>Fourth Tag: <input type="text" name="tag4"/></br>
        </div>
        <div id = "addfifthtag" style="visibility:hidden">
        <br>Fifth Tag: <input type="text" name="tag5"/></br>
        </div>
        <br><input type="submit" value="Submit" /></br>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:10:34.497

我建议您将表格插入表格。

```
<div class="rightsettings">
    <form name="addsubject" action="html_form_action.asp" method="get">
        <table cellpadding="1" cellspacing="1" border="0">
            <tr><td>Subject:</td><td><input type="text" name="user" /></td></tr>
            <tr><td>Number of tags::</td><td><select name="addnoofsubject" id = "addnoofsubject" onchange="checktags()"> 
                <option value=1>1</option> 
                <option value=2>2</option> 
                <option value=3>3</option> 
                <option value=4>4</option> 
                <option value=5>5</option> 
            </select></td></tr>

            <tr><td>First Tag:</td><td><div id="addfirsttag"><input type="text" name="tag1"/></div></td></tr>
             <!-- all your tags like the one above -->
            <tr><td colspan="2" align="center"><input type="submit" value="Submit" /></td></tr>
        </table>
    </form> 
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:10:47.427

试试这个

```
 <table>
    <tr style="visibility:hidden"><td>First tag :><td><input type="text" name="tag1"/></td></tr>
    <tr style="visibility:hidden"><td>Second tag :><td><input type="text" name="tag2"/></td></tr>
    <tr style="visibility:hidden"><td>Third tag :><td><input type="text" name="tag3"/> </td></tr>
   <tr><td colspan="2" align="center"><input type="submit"></td></tr>
    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:10:05.650

**有一张桌子**

```
<table>
<tr><td>First Tag</td><td><input ... /></td></tr>
<tr><td>Second Tage</td><td><input ... /></td></tr>
...
</table> 
```

**用CSS**

CSS部分：

```
label
{
    display: block;
    width: 150px;
    float: left;
} 
```

html部分：

```
<label for="tag1">First Tag:</label><input ... /><br />
<label for="tag2">Second Tag:</label><input ... /><br /> 
```

# c# - 当我们单击silverlight中的按钮时如何更改图像按钮图像？

> ID：11774237
> 
> 赞同：0
> 
> 时间：2012-08-02T09:03:11.420
> 
> 标签：c#, silverlight, xaml, silverlight-5.0

我在 Silverlight 中有一个图像按钮，在初始加载时它会显示`demo1`图像，每当我单击该按钮时，我都应该将图像更改为`demo2`.

```
<Button x:Name="demo"
        IsEnabled="False"
        Click="demo_Click"
        ToolTipService.ToolTip="demo"
        Width="25"
        Height="25"
        VerticalAlignment="Bottom"
        HorizontalAlignment="Left" 
        Margin="0,0,0,25">

    <Image x:Name="demo-image" Source="/demo.content;component/demo1.png"/>

</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:44:14.560

首先，`IsEnabled="False"`从`Button`XAML 中删除。然后只需`demo_Click`在您的代码隐藏中实现事件处理程序，如下所示：

```
private void demo_Click(object sender, RoutedEventArgs e)
{
    demo_image.Source = new BitmapImage(
        new Uri("/demo.content;component/demo2.png", UriKind.Relative));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:12:54.523

您可以改用[ToggleButton](http://msdn.microsoft.com/en-us/library/cc296245%28v=vs.95%29.aspx)

# javascript - 窗口中的可滚动标签面板

> ID：11774241
> 
> 赞同：3
> 
> 时间：2012-08-02T09:03:19.783
> 
> 标签：javascript, extjs, extjs3

我有一个网格：

```
 var koord_tab = new Ext.grid.EditorGridPanel({
                                title:"Координаты",
                                store: datastore,
                                region: 'center',
                                cm: cm_koord,
                                //height: 300,
                                autoScroll: true,
                                //bbar:[saveButton,cancelButton,editButton]
                            }) 
```

我有一个带有标签面板的窗口：

```
 var x = new Ext.Window({
                                title:'Аттрибуты',
                                //height:390,
                                //autoWidth:true,
                                //autoHeight:true,
                                //autoScroll:true,
                                width:400,
                                listeners:{
                                    'beforeclose':function(){
                                            //app.mapPanel.map.removeLayer(myVecLayer); 

                                            for(var i=0;i<ppp.length;i++){
                                                ppp[i].deactivate();
                                            }
                                        counter=0;

                                    }
                                },items:[{
                                    xtype:'tabpanel',
                                    activeItem:0,
                                    //autoScroll: true,
                                    enableTabScroll : true,
                                    //autoHeight:true,
                                    height:340,
                                    //collapseMode: "mini",
                                    bbar:[saveButton,cancelButton,editButton],
                                    items:[ed_tab,koord_tab]  
                                }]  
                            })
                            x.show(); 
```

问题：如何使tabpanel可滚动？当我打开窗口时，我看到了这个： ![在此处输入图像描述](../Images/fba458cad53110286873193061fc72fc.png)

但是当我调整窗口大小时，我看到了这个：

![在此处输入图像描述](../Images/d56ae349ee1a8561b2db797ed39bc861.png)

你可以看到工具栏没有出现。即使调整了窗口大小，如何使该工具栏始终显示？

**更新**

我看到将 bbar 从选项卡面板放到窗口的唯一方法。但是还有另外一个问题：如何让tabpanel 和window 不可滚动到只有一个grid 的滚动条？

![在此处输入图像描述](../Images/8984549db85add4cc741f8a0cee228a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:43:49.767

您将工具栏添加到选项卡面板是正确的。

对于另一个问题：摆脱`height: 340`标签面板上的配置并给它一个`layout: 'fit'`配置。

然后在您的网格面板上添加另一个`layout: 'fit'`配置。

那应该处理它。

[**这**](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.layout.FitLayout)是`fit`ExtJS3 文档中的布局。

# c# - NumericUpDown 控件应仅在滚动完成时触发 ValueChanged 事件

> ID：11774243
> 
> 赞同：3
> 
> 时间：2012-08-02T09:03:21.203
> 
> 标签：c#, winforms, events, numericupdown

我有一个 numericUpDown 控件（Windows 窗体）。

![在此处输入图像描述](../Images/2bcbf7047b125c22a4babe6d947e6a46.png)

我想听听这个[`ValueChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.valuechanged.aspx)事件。

我在属性中设置它并且它有效。

**但：**

我希望我可以向上或向下“滚动”。（如果我让它更长，它会更快）

当我完成“滚动”时，我希望现在触发事件 xyz 而不是在滚动期间触发。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:14:20.187

尝试使用 mouseup 事件。当您将手指从鼠标左键上移开时它会触发，因此理论上它应该可以解决您的问题。

[由 James 编辑] 在您的表单上尝试此控件。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Example.CustomControl
{
    /// <summary>
    /// Provides an extra event for the numericUpDown control that fires after the value stops scrolling.
    /// </summary>
    public class NumericDelayedChange : NumericUpDown
    {
        /// <summary>
        /// Flag that the value has actually changed.
        /// </summary>
        /// <devdoc>
        /// Just in case the control was clicked somewhere other than the up/down buttons.
        /// </devdoc>
        private bool valueHasChanged = false;

        /// <summary>
        /// Fires when the value has stopped being scrolled.
        /// </summary>
        public event EventHandler OnAfterScollValueChanged;

        /// <summary>
        /// Captures that value as having changed.
        /// </summary>
        /// <param name="e"></param>
        protected override void OnValueChanged(EventArgs e)
        {
            valueHasChanged = true;
            base.OnValueChanged(e);
        }

        /// <summary>
        /// Captures the mouse up event to identify scrolling stopped when used in combination with the value changed flag.
        /// </summary>
        /// <param name="mevent"></param>
        protected override void OnMouseUp(MouseEventArgs mevent)
        {
            base.OnMouseUp(mevent);
            if (mevent.Button == System.Windows.Forms.MouseButtons.Left)
            {
                PerformOnAfterScollValueChanged();
            }
        }

        /// <summary>
        /// Captures the key up/down events to identify scrolling stopped when used in combination with the value changed flag.
        /// </summary>
        /// <param name="mevent"></param>
        protected override void OnKeyUp(KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Up || e.KeyCode == Keys.Down)
            {
                PerformOnAfterScollValueChanged();
            }
            base.OnKeyUp(e);
        }

        /// <summary>
        /// Checks the value changed flag and fires the OnAfterScollValueChanged event.
        /// </summary>
        private void PerformOnAfterScollValueChanged()
        {
            if (valueHasChanged)
            {
                valueHasChanged = false;
                if (OnAfterScollValueChanged != null) { OnAfterScollValueChanged(this, new EventArgs()); }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:18:13.110

您需要定义什么是`I'm done with the scroll`. 这可能是从滚动按钮上移开鼠标，或者自上次单击后经过了一段时间。无论如何，我认为您不能导致事件不运行，但您可以在事件处理程序中进行一些检查。例如：

```
private DateTime? lastClickTime;
public void MyUpDown_ValueChanged(object sender, EventArgs e)
{
    if (lastClickTime != null && DateTime.Now.Subtract(lastClickTime.Value).Seconds > someInterval)
    {
        // Do the work
    }

    lastClickTime = DateTime.Now
} 
```

但是，正如我所说，您首先需要定义什么是`I'm done`. 这段代码并不完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T23:44:55.593

这是解决问题的直接方法：只需检查是否正在按下鼠标按钮`Control.MouseButtons`，如下所示：

```
private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        //don't update until done scrolling
        if (Control.MouseButtons == MouseButtons.None)
        {
            // Do the work
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T18:38:52.287

这是我解决这个问题的方法：

任务检查“valueIsChanging”标志。此标志由 ValueChanged 事件设置。在该标志停止由 ValueChanged 事件设置为 True 后，while 循环完成并执行您的代码。

```
Task waitForValueSettleTask;
volatile bool valueIsChanging; // marked volaltile since it is access by multiple threads (the GUI thread, and the task)

private void numericUpDown_ValueChanged(object sender, EventArgs e)
{
    valueIsChanging = true;

    if (waitForValueSettleTask == null || waitForValueSettleTask != null &&
    (waitForValueSettleTask.IsCanceled || waitForValueSettleTask.IsCompleted || waitForValueSettleTask.IsFaulted))
    {
        waitForValueSettleTask = Task.Run(() =>
        {
            while (valueIsChanging)
            {
                valueIsChanging = false;
                Thread.Sleep(1000); // Set this to whatever settling time you'd like
            }

            // Your code goes here
        });
    }
} 
```

# windows - AppFabric 缓存和 Windows 7

> ID：11774244
> 
> 赞同：0
> 
> 时间：2012-08-02T09:03:25.977
> 
> 标签：windows, windows-7, appfabric, appfabric-cache

对于在 Windows 7 专业机器上运行 AppFabric 缓存集群有什么建议吗？我计划有 3 个节点，并设置高可用性。请建议。下面提到的将是我的客户端配置：

```
<dataCacheClient requestTimeout="60000" channelOpenTimeout="15000" maxConnectionsToServer="2">
    <localCache isEnabled="true" sync="NotificationBased" ttlValue="300000" objectCount="100000" />
    <clientNotification pollInterval="10" maxQueueLength="100000" />
    <hosts>
      <host name="********" cachePort="********" />      
    </hosts>
    <securityProperties mode="Transport" protectionLevel="EncryptAndSign" />
    <transportProperties connectionBufferSize="131072" maxBufferPoolSize="268435456" maxBufferSize="8388608" maxOutputDelay="2" channelInitializationTimeout="60000" receiveTimeout="600000" />
  </dataCacheClient> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:12:33.470

高可用性*仅*在 Windows Server 2008 Enterprise Edition 上可用 - Windows 7 主机将*不*支持它。

我会非常仔细地考虑这个设置——Windows 7 并非设计为“服务器级”操作系统，您会遇到应用程序崩溃或 Windows 更新意外重启等问题，这可能意味着并非所有缓存主机都将始终存在可用的。我也非常怀疑微软是否会支持生产系统的这种配置，或者至少强烈反对它。

一定要尝试它，*广泛地*测试它，但要做好失败的准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T20:14:45.993

如果您可以使用 SqlServer 作为缓存配置提供程序，那么即使只有一个缓存节点，您的缓存集群也将保持运行，因为在这种情况下，sql server 充当您的集群管理器。欲了解更多信息，请访问[此处](http://msdn.microsoft.com/en-us/library/ee790910%28v=azure.10%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/ee790895%28v=azure.10%29.aspx)

在纯 HA 环境中，您的数据在机器之间复制，因此如果您丢失其中一台机器，那么您仍然可以使用缓存集群。建议使用三台机器，并且任何时候至少需要两台，否则如果您只使用一台机器，您的缓存集群将会崩溃。

我的 sql server 方法的唯一问题是，如果您丢失任何机器，那么您必须尝试从源中获取数据。如果您对此感到满意，那么与三台 Windows 企业服务器的许可证相比，您拥有的 HA 的成本只是其中的一小部分。

PS - 我已经测试过，在两台 Windows 标准服务器上使用了这个设置。正如其他用户也提到不推荐使用 Windows 7，但您可以使用它。

# java - 为什么 Desktop.Open() 在安装 MagicISO 时不起作用

> ID：11774247
> 
> 赞同：5
> 
> 时间：2012-08-02T09:03:41.827
> 
> 标签：java, awt, desktop, shellexecute

这是我的代码

```
if (Desktop.isDesktopSupported()) {
  Desktop desktop = Desktop.getDesktop();

  if (desktop.isSupported(Desktop.Action.OPEN)) {
    try {
      desktop.open(file.getCanonicalFile());
    } catch (Exception ex) {
      ex.printStackTrace();
    }
  } else {
    System.out.println("Desktop open action is not supported");
  }
} else {
  System.out.println("Desktop is not supported");
} 
```

我知道安装 MagicISO（从[这个 Java bug](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6546085)得到它）会使这段代码不起作用。但为什么？MagicISO 专门做什么？我可以防止它发生或解决它吗？

更糟糕的是，这段代码没有抛出任何异常。它只是在那里保持沉默。这真的让我很抓狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:55:34.020

Well if I had to take a guess, MagicISO modifies the registry or something in some way which prevents Java from knowing what program to launch the file with. If you're looking for an alternative solution, see Adel Boutros's answer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:15:00.963

不幸的是，我以前没有听说过这个问题，但是您总是可以在代码的开头添加手动检查，以查看是否已安装 MagicISO，如果已安装，请留下有用的消息“此程序无法运行，因为……”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:39:05.823

引用[来自 Java 的 Launch 文件](https://stackoverflow.com/questions/847838/launch-file-from-java)的第二个答案：

您可以通过`Runtime`类启动应用程序：

在 Mac 上，

```
Runtime.getRuntime().exec(new String[] {"open", pathToFile}); 
```

在 Windows 上，

```
Runtime.getRuntime().exec(new String[] {"cmd.exe", "/C", pathToFile}); 
```

# javascript - 使整个页面滚动到顶部的某个高度以下，没有任何滚动条

> ID：11774250
> 
> 赞同：0
> 
> 时间：2012-08-02T09:04:00.077
> 
> 标签：javascript, jquery, html, css

html:

```
<div class="div_fixed"></div>

<div class="other_content">

content goes here
</div> 
```

CSS：

```
.div_fixed{
position:fixed;
height:40px;

}

.other_content{

height:200px;

} 
```

将`div_fixed`保持固定在页面的顶部位置。

但是随着页面向上滚动， div 的内容将在 div`other_content`的下边缘消失`div_fixed`。

在向下滚动的情况下，不可见的内容`other_content`将开始从下边缘可见`div_fixed`

如何做到这一点？

**编辑：**任何 div 都不应出现滚动条

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:11:23.037

用于`overflow: hidden`摆脱滚动条

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:18:01.737

我已经采用了您的 HTML/CSS 并在[jsFiddle](http://jsfiddle.net/E3cta/2/)上添加了一些内容- 我认为为了实现您正在寻找的效果，您只需使您的内容实际上足够高以便可以滚动。在 200px 高和一行文本的情况下，什么都不会滚动。

所以我让你的`other_content`div 更高，然后添加 a`top: 0`到你的`.div_fixed`选择器，让它保持在屏幕顶部，并`margin-top: 40px`添加到`.other_content`div 以便让它从浮动 div 下方开始。

如果你希望它是一个导航栏类型的东西，你当然可以`width: 100%`在`.div_fixed`.

如果您愿意，所有这些都应该相当容易地转移到容器 div（带有`position: relative`）中，尽管您可能必须重新定位固定的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:55:06.347

这是你要找的吗？[http://jsfiddle.net/BCRPa/](http://jsfiddle.net/BCRPa/)

# asp.net - 在 asp.net 图表中使用回归进行预测

> ID：11774254
> 
> 赞同：0
> 
> 时间：2012-08-02T09:04:06.207
> 
> 标签：asp.net, asp.net-charts

我指的是asp.net官方教程[http://msdn.microsoft.com/en-us/library/dd456655.aspx](http://msdn.microsoft.com/en-us/library/dd456655.aspx) 。我所做的是，，，在一个新的 asp.net 网站中，我从工具箱中添加了一个图表控件，并将它从我的数据库中拖到一个表格中。当我添加一个按钮并将预测代码放在按钮单击事件中时，问题就开始了。代码是：

```
Chart1.DataManipulator.FinancialFormula (FinancialFormula.Forecasting, "2,40,true,true", "Series1:Y", "Series2:Y,Series3:Y,Series3:Y2"); 
```

我得到的错误信息是

> 预测误差——这种回归类型的数据点太少。至少需要 2 个数据点。

在图表中，我选择“日期”作为 x 轴，选择“某个数字”作为 Y 轴……而这最少需要 2 个数据点……谁能帮我解决这个错误…… ……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:42:14.820

这个问题有点老了，但我今天遇到了同样的情况，想发布我的解决方案。

当在图表绑定之前添加趋势线时，会出现此“数据点太少”的问题。只需将财务公式代码移动到绑定数据的位置下方即可解决问题。（当然，如果绑定中的数据点少于 2 个，这将无济于事）。

基本上，在绑定图表之前，“输入系列”实际上并没有图表的 DataManipulator 使用的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T11:06:30.793

为了预测未来的值，至少需要两个过去的值，所以如果结果只包含一个值，则会抛出错误，因为无法比较这些值。图表中的系列应该至少有 2 个值

# c# - 在 Visual Studio 2010 上安装 MVC3 时出错

> ID：11774255
> 
> 赞同：0
> 
> 时间：2012-08-02T09:04:06.240
> 
> 标签：c#, asp.net, asp.net-mvc-3, visual-studio-2010

我尝试按照此链接在 Visual Studio 2010 上安装 MVC3，但出现错误，如图所示。

![在此处输入图像描述](../Images/571bd3890dd5dce0d3efaeda5ffca50a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:08:25.510

将您的 Web 平台安装程序升级到 4.0，可在此处找到：http: [//www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)

如果失败，您可以随时在此处手动安装 MVC 3：http: [//www.microsoft.com/en-us/download/details.aspx?id=1491](http://www.microsoft.com/en-us/download/details.aspx?id=1491)

# javascript - 是否有一种快捷方式可以使用 javascript 或 jQuery 设置对象的字段？

> ID：11774258
> 
> 赞同：1
> 
> 时间：2012-08-02T09:04:14.417
> 
> 标签：javascript, jquery, object, object-literal

我有以下代码：

```
obj = new Object();
obj.close = close;
obj.$form = $form;
obj.action = $form.attr('data-action')
obj.entity = $form.attr('data-entity')
obj.href = $form.attr('data-href');
obj.rownum = $link.attr('data-row');
obj.$row = $('#row_' + obj.rownum);
obj.$submitBt = $('.block-footer button:contains("Submit")'); 
```

有什么方法可以将它与 jQuery 组合成一个作业吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:06:25.853

这与 jQuery 无关。它是关于 JavaScript 的。如果敷衍的话：在 JavaScript 中对象是一个关联数组。

```
obj = {
  close: close,
  $form: $form,
  action: $form.attr('data-action'),
  entity: $form.attr('data-entity'),
  href: $form.attr('data-href'),
  rownum: $link.attr('data-row'),
  $row: $('#row_' + obj.rownum),
  $submitBt: $('.block-footer button:contains("Submit")')
}; 
```

# xml - Eclipse 建模框架 - 无法加载 plugin.xml

> ID：11774260
> 
> 赞同：0
> 
> 时间：2012-08-02T09:04:17.370
> 
> 标签：xml, plugins, emf, eclipse-jet

我一直在关注本教程：

[http://www.vogella.com/articles/EclipseEMF/article.html](http://www.vogella.com/articles/EclipseEMF/article.html)

我无法处理 Step

> 5.2\. 运行你的插件

我正在尝试打开 plugin.xml 文件，但它给了我一个错误：

> 编辑器中不支持的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:26:11.893

Android SDK 认为它是它的文件之一，然后当它试图打开它时，它会崩溃，因为它不包含预期的内容。右键单击文件 plugin.xml 并选择“打开方式”，然后选择“插件清单编辑器”。

# java - 使用方面时如何运行 Spring 集成测试？

> ID：11774261
> 
> 赞同：0
> 
> 时间：2012-08-02T09:04:19.850
> 
> 标签：java, spring-mvc, spring-aop, spring-test

我正在开发一个 Spring MVC Web 应用程序（目前是 Java 6 和 Spring 3.0.6）。我开始使用扩展 AbstractTransactionalJUnit4SpringContextTests 的 Junit4 编写一些 Spring 集成测试。我通过我们的 Maven 构建或在 EclipseIDE (3.7) 中调用这些。这些测试调用控制器方法（即，在使用@Controller 注释的类中使用@RequestHandler 注释的方法）。

一切都很顺利，直到我将基于方面的日志记录添加到控制器中：

```
 // public controller methods
@Pointcut("execution(public * com.axiope.webapp.controller.*.*(..))")
private void publicControllerMethod() {
}
@Pointcut("@annotation(org.springframework.web.bind.annotation.RequestMapping)")
private void requestHandler(){}

@Pointcut("publicControllerMethod() && requestHandler() ")
private void controllerHandler(){}

// logs contoller exceptions
@AfterThrowing(
        pointcut="controllerHandler()",
        throwing="ex")
      public void logControllerExceptions(Throwable ex) {
    logger = LogFactory.getLog(ex.getClass());
    logger.error("Controller exception !" + ex.getMessage());   
    } 
```

现在，当我通过 Maven 运行测试时，出现如下错误：

```
No unique bean of type [com.axiope.webapp.controller.StructuredDocumentController]
is defined: expected single bean but found 0: 
```

在测试中，我在 setUp 方法中从 applicationContext 加载控制器：

```
structuredDocumentController = applicationContext.getBean(
    StructuredDocumentController.class); 
```

如果我注释掉方面，则不会发生此错误。我怀疑它与 Spring 代理控制器有关，然后控制器类无法通过其类名来识别。我尝试在 applicationContext.xml 中将控制器声明为 bean，但这无济于事。在 Eclipse 中运行测试时也会出现这个问题，所以这不是我的 Maven 配置的问题。

我的问题是：如何在测试中检测到控制器 bean？

非常感谢任何帮助 - 在控制器类中向方法添加方面是否错误？我应该在测试时以某种方式禁用方面吗？（虽然理想情况下我希望在集成测试中看到日志记录工作正常）。

非常感谢

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:16:07.887

方面不是可能的问题，您应该能够在控制器中使用它们也没有任何问题。

我的猜测是您没有为测试加载正确的上下文-您如何指定用于此测试的应用程序上下文-`@ContextConfiguration`您的测试类中是否有位置，是根上下文的位置（通过 ContextLoaderListener 指定的位置) 或 Web 应用程序上下文（通过 DispatcherServlet 指定）。

# r - 如何从 ggplot 对象中提取填充颜色？

> ID：11774262
> 
> 赞同：62
> 
> 时间：2012-08-02T09:04:23.820
> 
> 标签：r, ggplot2

我正在尝试为一系列生成`ggplot`图形的函数编写一些自动化单元测试。

例如，我想为绘图设置特定的色阶。现在我需要一种方法来确定是否实际应用了正确的色标。

## 的背景：

下面是一些示例代码，将`fill`颜色设置为使用 ColourBrewer 调色板`Dark2`：

```
p <- ggplot(mtcars, aes(x=factor(cyl), y=mpg, fill=factor(gear))) + 
  geom_bar(stat="identity") + 
  facet_grid(~gear) +
  scale_fill_brewer(palette="Dark2")

print(p) 
```

![在此处输入图像描述](../Images/21790eb417bc88f489d70bd4dd678bee.png)

好的，所以目视检查告诉我代码有效。

## 我试过的：

现在我想通过检查对象来确认这一点：

```
str(p, max.level=1)
List of 8
 $ data       :'data.frame':    32 obs. of  11 variables:
 $ layers     :List of 1
 $ scales     :Reference class 'Scales' [package "ggplot2"] with 1 fields
  ..and 20 methods, of which 9 are possibly relevant
 $ mapping    :List of 3
 $ options    :List of 1
 $ coordinates:List of 1
  ..- attr(*, "class")= chr [1:2] "cartesian" "coord"
 $ facet      :List of 9
  ..- attr(*, "class")= chr [1:2] "grid" "facet"
 $ plot_env   :<environment: R_GlobalEnv> 
 - attr(*, "class")= chr "ggplot" 
```

很好，这个`$scales`对象看起来很有趣。让我们更详细地看一下：

```
str(p$scales)
Reference class 'Scales' [package "ggplot2"] with 1 fields
 $ scales:List of 1
  ..$ :List of 14
  .. ..$ call      : language discrete_scale(aesthetics = "fill", scale_name = "brewer", palette = brewer_pal(type, palette))
  .. ..$ aesthetics: chr "fill"
  .. ..$ scale_name: chr "brewer"
  .. ..$ palette   :function (n)  
  .. ..$ range     :Reference class 'DiscreteRange' [package "scales"] with 1 fields
  .. .. ..$ range: NULL
  .. .. ..and 14 methods, of which 3 are possibly relevant:
  .. .. ..  initialize, reset, train
  .. ..$ limits    : NULL
  .. ..$ na.value  : logi NA
  .. ..$ expand    : list()
  .. .. ..- attr(*, "class")= chr "waiver"
  .. ..$ name      : NULL
  .. ..$ breaks    : list()
  .. .. ..- attr(*, "class")= chr "waiver"
  .. ..$ labels    : list()
  .. .. ..- attr(*, "class")= chr "waiver"
  .. ..$ legend    : NULL
  .. ..$ drop      : logi TRUE
  .. ..$ guide     : chr "legend"
  .. ..- attr(*, "class")= chr [1:3] "brewer" "discrete" "scale"
 and 20 methods, of which 9 are possibly relevant:
   add, clone, find, get_scales, has_scale, initialize, input, n, non_position_scales 
```

但在这里我画了一个空白。里面没有任何东西`p$scales`看起来像我的输入`palette`，或者实际上像颜色。

## 我期望找到的：

我期望的颜色是：

```
library(RColorBrewer)
brewer.pal(3, name="Dark2")
[1] "#1B9E77" "#D95F02" "#7570B3" 
```

## 问题：

**如何询问`ggplot`对象以使用特定的填充颜色？**

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-02T09:19:50.697

尝试构建情节，

```
g <- ggplot_build(p)
unique(g$data[[1]]["fill"])

      fill
1  #1B9E77
16 #D95F02
28 #7570B3 
```

# iphone - 我应该如何使用 APNS 处理多帐户应用程序？

> ID：11774264
> 
> 赞同：5
> 
> 时间：2012-08-02T09:04:39.157
> 
> 标签：iphone, xcode, apple-push-notifications, account

我目前正在研究一个支持在线离线的应用程序并弄清楚APNS的用法，当我的应用程序只处理单个用户时很容易理解。（就像短信一样）

我的理解是，安装到特定设备的每个应用程序都会有自己的设备令牌（即使在取消注册到 APNS 并重新注册后也不会更改）。因此，当用户从不同的设备登录时，APNS 进而服务器可以识别。

但是，当我尝试实现多帐户应用程序（就像 Facebook，不同的人可以使用同一部手机登录）时，出现了一些问题。

当用户 A 登录并且应用程序处于后台状态时，是的，它确实收到了通知。

但是当用户A退出时（当手机没有互联网连接时，这意味着无法立即更新服务器以删除帐户），然后用户B登录，同时服务器试图向用户推送通知到手机A，电话已经收到通知（但这是用户 A 的通知），用户 B 会收到通知（这在实际场景中永远不会发生）。

似乎 APNS 无法检查应用程序帐户身份验证。

所以，我的问题是，

1.  有什么方法可以检查和删除手机上的通知（我已经阅读了 Apple Doc。并注意到有一个 QoS 存储了最后一个通知）？

2.  在使用 APNS 时处理此类身份验证问题的良好做法是什么？

如果我确实有任何概念上的误解，请纠正我。并希望我的问题听起来不愚蠢和笨拙，并且没有任何问题重复......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:29:03.457

如果您具有从您的应用程序“注销”的功能（无需登录新用户），我找不到任何方法来停止发送推送通知，除非让服务器知道用户已注销。

如果没有互联网连接，则无法正确注销。如果您需要此功能，您应该验证与服务器的注销。可以通知用户注销失败，因为无法访问服务器。

这是一个例子：

*   用户 A 登录具有设备令牌 TX 的设备 X。

    *-> 服务器将令牌 TX 关联到属于用户 A。*

*   用户 A 在设备 Y 上登录，该设备具有设备令牌 TY。

    *-> 服务器将令牌 TX 和 TY 关联到属于用户 A。*

*   推送给用户 A 的消息

    *-> 服务器向 TX 和 TY 发送推送消息。*

*   用户 A 从设备 X 上注销，用户 B 在设备 X 上登录。

    *-> 服务器删除令牌 TX 与用户 A 的关联*

    *-> 服务器将令牌 TX 关联到用户 B。*

*   推送给用户 A 的消息

    *-> 服务器向 TY 发送推送消息。*

*   推送给用户 B 的消息

    *-> 服务器向 TX 发送推送消息。*

*   用户 B 退出，但没有互联网连接

    *-> 登录失败，用户 B 仍然登录，收到对话框“无法注销”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:51:48.370

所以，一开始：

用户 A 如何在没有互联网的情况下注销并登录 Facebook？

当用户 B 登录时，因此互联网已连接，然后您可以发送到您的服务器：现在用户 B 在此设备令牌上。

例如：*用户 B 登录，同时服务器尝试将通知推送到用户 A 的手机*

如果应用程序已运行，则您将收到 APNS 通知

```
application: (UIApplication*)app didRegisterForRemoteNotificationsWithDeviceToken: (NSData*)deviceToken 
```

不在设备通知中心消息窗口中。

你可以这样做：

1）如果用户A已经登录，则发送本地通知以显示通知

2）如果log中的其他用户或用户被注销，那么什么都不做

希望它有所帮助。也许我错了，如果你的意思是另一个。

# python - 你如何访问 Flask 路由中的查询字符串？

> ID：11774265
> 
> 赞同：558
> 
> 时间：2012-08-02T09:04:40.847
> 
> 标签：python, flask, query-string

如何访问 Flask 路由中的查询参数或查询字符串？这从 Flask 文档中并不明显。

下面的示例路由`/data`说明了我想要访问该数据的上下文。如果有人请求类似的东西`example.com/data?abc=123`，我想访问字符串`?abc=123`或能够检索类似的参数值`abc`。

```
@app.route("/data")
def data():
    # query_string = ???
    return render_template("data.html") 
```

* * *

## 回答 #1

> 赞同：1041
> 
> 时间：2012-08-02T09:14:53.163

```
from flask import request

@app.route('/data')
def data():
    # here we want to get the value of user (i.e. ?user=some-value)
    user = request.args.get('user') 
```

* * *

## 回答 #2

> 赞同：306
> 
> 时间：2012-08-02T16:29:15.310

完整的 URL 可用作`request.url`，查询字符串可用作`request.query_string.decode()`。

这是一个例子：

```
from flask import request

@app.route('/adhoc_test/')
def adhoc_test():

    return request.query_string 
```

要访问在查询字符串中传递的单个已知参数，您可以使用`request.args.get('param')`. 据我所知，这是“正确”的做法。

ETA：在你更进一步之前，你应该问自己为什么需要查询字符串。我从来不用提取原始字符串——Flask 有以抽象方式访问它的机制。你应该使用这些，除非你有令人信服的理由不这样做。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-03-20T00:46:57.033

我来这里是为了寻找查询字符串，而不是如何从查询字符串中获取值。

`request.query_string`将 URL 参数作为原始字节字符串返回（参考 1）。

使用示例`request.query_string`：

```
from flask import Flask, request

app = Flask(__name__)

@app.route('/data', methods=['GET'])
def get_query_string():
    return request.query_string

if __name__ == '__main__':
    app.run(debug=True) 
```

输出：

[![Flask 路由中的查询参数](../Images/97ed196642ce8081e587059208483f38.png)](https://i.stack.imgur.com/Pgup1.png)

**参考：**

1.  [query_string 上的官方 API 文档](http://flask.pocoo.org/docs/1.0/api/#flask.Request.query_string)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-05-29T05:26:53.710

我们可以通过使用 request.query_string 来做到这一点。

例子：

让我们考虑 view.py

```
from my_script import get_url_params

@app.route('/web_url/', methods=('get', 'post'))
def get_url_params_index():
    return Response(get_url_params()) 
```

您还可以使用 Flask 蓝图使其更加模块化 - [https://flask.palletsprojects.com/en/1.1.x/blueprints/](https://flask.palletsprojects.com/en/1.1.x/blueprints/)

让我们考虑名字作为查询字符串的一部分传递 /web_url/?first_name=john

```
## here is my_script.py

## import required flask packages
from flask import request
def get_url_params():
    ## you might further need to format the URL params through escape.    
    firstName = request.args.get('first_name') 
    return firstName 
```

如您所见，这只是一个小示例 - 您可以获取多个值 + 格式化这些值并使用它或将其传递给模板文件。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-08-03T09:08:44.213

Werkzeug/Flask 已经为您解析了所有内容。无需使用 urlparse 再次执行相同的工作：

```
from flask import request

@app.route('/')
@app.route('/data')
def data():
    query_string = request.query_string  ## There is it
    return render_template("data.html") 
```

请求和响应对象的完整文档位于 Werkzeug：[http ://werkzeug.pocoo.org/docs/wrappers/](http://werkzeug.pocoo.org/docs/wrappers/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-04-25T11:35:58.037

**像这样尝试查询字符串：**

```
from flask import Flask, request

app = Flask(__name__)

@app.route('/parameters', methods=['GET'])
def query_strings():

    args1 = request.args['args1']
    args2 = request.args['args2']
    args3 = request.args['args3']

    return '''<h1>The Query String are...{}:{}:{}</h1>''' .format(args1,args2,args3)

if __name__ == '__main__':

    app.run(debug=True) 
```

**输出：** [![在此处输入图像描述](../Images/0e921442f307856331fc59c28bcf95c5.png)](https://i.stack.imgur.com/qjzUn.png)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-04-25T03:49:08.560

*如[O'Reilly Flask Web Devleopment](http://shop.oreilly.com/product/0636920031116.do)中所述，可从烧瓶请求对象中检索的每种形式的查询字符串：*

从[O'Reilly Flask Web Development](http://shop.oreilly.com/product/0636920031116.do)开始，正如 Manan Gouhari 之前所说，首先您需要导入请求：

```
from flask import request 
```

`request`是一个由 Flask 作为上下文变量公开的对象（你猜对了）`request`。顾名思义，它包含了客户端在 HTTP 请求中包含的*所有信息。*该对象有许多属性和方法，您可以分别检索和调用它们。

您有很多`request`包含可供选择的查询字符串的属性。在这里，我将列出以任何方式包含查询字符串的每个属性，以及 O'Reilly 书中对该属性的描述。

首先`args`是“在 URL 的查询字符串中传递所有参数的字典”。因此，如果您希望将查询字符串解析为字典，您可以执行以下操作：

```
from flask import request

@app.route('/'):
    queryStringDict = request.args 
```

*（正如其他人所指出的，您还可以使用`.get('<arg_name>')`从字典中获取特定值）*

然后，有一个`form`属性，它不*包含*查询字符串，但它包含在另一个包含查询字符串的属性的一部分中*，*我将立即列出。不过，首先`form`是“包含随请求提交的所有表单字段的字典”。我这么说是这样说的：烧瓶请求对象中还有另一个可用的字典属性，称为`values`. 是“将和`values`中的值组合在一起的字典。” 检索看起来像这样：`form``args`

```
from flask import request

@app.route('/'):
    formFieldsAndQueryStringDict = request.values 
```

*（同样，用于`.get('<arg_name>')`从字典中获取特定项目）*

另一个选项是`query_string`“URL 的查询字符串部分，作为原始二进制值”。例子：

```
from flask import request

@app.route('/'):
    queryStringRaw = request.query_string 
```

然后作为额外的好处`full_path`是“URL 的路径和查询字符串部分”。给ejemlo：

```
from flask import request

@app.route('/'):
    pathWithQueryString = request.full_path 
```

最后，`url`“客户端请求的完整 URL”（包括查询字符串）：

```
from flask import request

@app.route('/'):
    pathWithQueryString = request.url 
```

快乐的黑客:)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-09-23T20:55:52.967

我更喜欢

```
user = request.args['user'] if 'user' in request.args else 'guest' 
```

超过

```
user = request.args.get('user') 
```

这样，您可以先检查 url 中是否包含查询字符串

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-04-14T19:19:49.963

下面的实现对我有用。

```
from flask import request
def getVerificationStatus():
try:
    requestId=int(request.args.get('requestId'))
    print(requestId)
    status= verificationStepRepository.getVerificationStatus(requestId)
    return tb.responsify(200, "success", status)
except Exception as e:
    return errorHandler.dispatchInternalServerError(str(e)) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-17T02:22:24.643

通常我们只想将整个查询字符串映射到适当的 python 数据结构中并从那里获取它。适当的结构是多字典，因为关键字可以重复，例如我们需要处理`A=123&A=456&B=789`. 多字典是 2 元组的列表，其中每个 2 元组包含作为其第一项的键和作为其第二项的值列表，所以上面转到`[('A',['123','456']),('B',['789'])]`. 这一切都是通过

```
qstr = request.args.lists() # A generator for the multi-dict
qstr = list(qstr) # To get the actual multi-dict 
```

如果你想要的只是一个字典，其中第一次出现重复的关键字，你可以去

```
qstr = request.args.to_dict() 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-15T18:35:45.767

如果请求是 GET 并且我们传递了一些查询参数，那么，

```
fro`enter code here`m flask import request
@app.route('/')
@app.route('/data')
def data():
   if request.method == 'GET':
      # Get the parameters by key
      arg1 = request.args.get('arg1')
      arg2 = request.args.get('arg2')
      # Generate the query string
      query_string="?arg1={0}&arg2={1}".format(arg1, arg2)
      return render_template("data.html", query_string=query_string) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-10T08:43:19.453

这可以使用`request.args.get()`. 例如，如果您的查询字符串有一个字段`date`，则可以使用

```
date = request.args.get('date') 
```

不要忘记将“ `request`”添加到来自烧瓶的进口列表中，即

```
from flask import request 
```

# sockets - chrome.socket 会支持多播套接字吗？

> ID：11774266
> 
> 赞同：1
> 
> 时间：2012-08-02T09:04:43.497
> 
> 标签：sockets, google-chrome

chrome.socket 是一个实验性 API，它使 chrome 扩展能够访问 UDP 和 TCP 套接字，请参阅：

```
http://code.google.com/chrome/extensions/trunk/socket.html 
```

它会支持多播套接字吗？

我希望答案是肯定的，因为这将使扩展能够在局域网上实现发现，例如电视等 UPnP 设备。它还将为同一局域网上的人们启用点对点游戏应用程序，其中多播套接字用于邀请加入现有游戏会话，并在玩家之间有效地传输游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:01:07.987

根据我的经验，IP 多播在 chrome.experimental.socket 中运行良好 :)

UPnP M-Search 示例代码： [https ://github.com/KensakuKOMATSU/chrome-upnp/blob/master/extension/javascripts/upnp.js](https://github.com/KensakuKOMATSU/chrome-upnp/blob/master/extension/javascripts/upnp.js)

请注意，目前上述代码仅适用于 chromium 的特定修订版（请参阅上述存储库中 readme.md 的详细信息）

# android - 内容提供程序无法在 Nexus 系列设备上运行

> ID：11774268
> 
> 赞同：11
> 
> 时间：2012-08-02T09:04:47.223
> 
> 标签：android, android-contentprovider, google-nexus

我正在开发一个带有 ContentProvider 的应用程序来提供一些内部文件（二进制文件）。当我在三星 Galaxy S、SII 或任何其他设备上部署它时，它运行良好，当我在 Galaxy Nexus 或 Nexus S 上试用时购买，它不起作用！

设想：

可以使用两个 URI 访问我的 ContentProvider。根据此 URI，提供者创建 DataCursor（扩展 CrossProcessCursor）或 ModelCursor（也扩展 CrossProcessCursos）。事实是，在 Nexus 系列中，我访问第一个游标 (DataCursor) 以检索标识符，并且它工作正常，但是在访问第二个游标时，它总是在尝试时抛出“OutOfBoundsException”

> 获取Blob()

方法。

**提供者**

```
@Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
        Cursor cursor = null;

        // If the third app requieres DATA (phrase id, phrase string and phrase name)
        if(uri.toString().equalsIgnoreCase(ProviderConstants.DATA_URI.toString())) {
            // Build the DataHelper and the customized cursor
            DataHelper dataHelper = new DataHelper(getContext());
            cursor = new DataCursor(dataHelper);
        } else if(uri.toString().equalsIgnoreCase(ProviderConstants.MODEL_URI.toString())) {            
            // Let's take the model id from the selectionArgs...
            if (selectionArgs != null && selectionArgs.length > 0) {
                String modelId = selectionArgs[0];

                // Get an instance to the persistent storage service...
                File file = FileManager.getDirectory(getContext(), modelId);
                FileSystemPersistentStorageService clientPersistentStorageService = new FileSystemPersistentStorageService(file);

                cursor = new ModelCursor(clientPersistentStorageService);
            } else {
                Log.e("ContentProvider", "Query without model id on selectionArgs");
            }
        }

        return cursor;
    } 
```

如果您需要一些代码或任何东西，请索取！

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:11:53.067

最后我得到了答案。这不是由于设备，而是由于 Android 操作系统版本。

4.0.3 的早期版本有 AbstarctCursor 的方法[fillWindow()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.6_r1/android/database/AbstractCursor.java#AbstractCursor.fillWindow%28int,android.database.CursorWindow%29)以一种方式实现，不是强制将第一项的光标位置设置为 0。在 4.0.3 之后（[如此处所示](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/database/AbstractCursor.java#AbstractCursor.fillWindow%28int,android.database.CursorWindow%29)），修改了此方法，导致未将光标位置设置为 0。

抛出的异常是：

```
07-31 11:35:09.938: W/System.err(2760): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
07-31 11:35:09.985: W/System.err(2760):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:418)
07-31 11:35:09.989: W/System.err(2760):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
07-31 11:35:09.989: W/System.err(2760):     at android.database.AbstractWindowedCursor.getBlob(AbstractWindowedCursor.java:44)
07-31 11:35:09.993: W/System.err(2760):     at android.database.CursorWrapper.getBlob(CursorWrapper.java:122)
07-31 11:35:09.993: W/System.err(2760):     at es.agnitio.kivox.mobile.internal.ModelImporterAndroidImpl.importModelPackage(ModelImporterAndroidImpl.java:44)
07-31 11:35:09.993: W/System.err(2760):     at es.agnitio.kivox.mobile.internal.KivoxMobileBasicCode.importModel(KivoxMobileBasicCode.java:159)
07-31 11:35:09.997: W/System.err(2760):     at es.agnitio.kivox.mobile.internal.KivoxMobileBasicImpl.importModel(KivoxMobileBasicImpl.java:47)
07-31 11:35:09.997: W/System.err(2760):     at es.agnitio.kivoxmobile.testing.KivoxMobileBasicTrial.onCreate(KivoxMobileBasicTrial.java:63)
07-31 11:35:09.997: W/System.err(2760):     at android.app.Activity.performCreate(Activity.java:5008)
07-31 11:35:10.001: W/System.err(2760):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-31 11:35:10.001: W/System.err(2760):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-31 11:35:10.001: W/System.err(2760):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-31 11:35:10.004: W/System.err(2760):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-31 11:35:10.004: W/System.err(2760):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-31 11:35:10.004: W/System.err(2760):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-31 11:35:10.008: W/System.err(2760):     at android.os.Looper.loop(Looper.java:137)
07-31 11:35:10.008: W/System.err(2760):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-31 11:35:10.008: W/System.err(2760):     at java.lang.reflect.Method.invokeNative(Native Method)
07-31 11:35:10.012: W/System.err(2760):     at java.lang.reflect.Method.invoke(Method.java:511)
07-31 11:35:10.012: W/System.err(2760):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-31 11:35:10.012: W/System.err(2760):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-31 11:35:10.016: W/System.err(2760):     at dalvik.system.NativeStart.main(Native Method) 
```

这表明（经过深入研究），光标索引未设置在`fillWindow()`.

**解决方案**

要解决这个“碎片化”问题，只需在自定义光标之类的方法中添加[moveToPosition(0)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.6_r1/android/database/AbstractCursor.java#AbstractCursor.moveToPosition%28int%29)`moveToFirst()`或`move()`（使用一些应用程序逻辑）。这将使游标索引设置为 0，避免“-1”索引请求异常。

希望它可以帮助任何人=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:03:26.810

我有点需要一个水晶球来做这个，但是......你可以尝试两件事：

*   [按照SteveR](https://stackoverflow.com/users/1291368/stever)的建议，将光标移动到第一个条目。

*   其次，我在使用 Dell Streak 7" 平板电脑时遇到了类似的问题。据说它是设备列表的一部分，但在访问其内部存储方面有一个特殊的例外。很难找到，但用 if 排序声明。它可能是类似的东西，尽管我对此表示怀疑，特别是因为 Nexus 应该是开发者的设备。

也许您应该尝试运行最简单的 ContentProvider 测试应用程序，看看它在这些设备上的表现如何。

# java - 使用接口跨多个类定义公共变量

> ID：11774270
> 
> 赞同：0
> 
> 时间：2012-08-02T09:04:56.737
> 
> 标签：java, interface

我有一个示例界面

```
 public interface SampleVariables {
int var1=0;
int var2=0;
} 
```

我想在多个类中使用 var1 和 var2 我正在尝试使用

```
public class InterfaceImplementor  extends Message  implements SampleVariables{

private int var3;

public int getVar1(){
    return var1;
}

public void setVar1(int var1){
    SampleVariables.var1=var1; // ** error here in eclipse which says " remove final modifier of 'var1' " Though I have not defined it as final
}

public int getVar3() {
    return var3;
}

public void setVar3(int var3) {
    this.var3 = var3;
}

} 
```

其中 Message 类是我尝试使用的预定义类，我无法在 Message 类中定义 var1、var2。

有一个更好的方法吗？还是我错过了一些非常简单的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:08:36.297

在`interface`默认**变量**中，`static final`您不能更改那里的值，即。你不能做`SampleVariables.var1=var1;`

你能做的是

```
public class InterfaceImplementor  extends Message { // do not implement interface here

private int var3;
private int var1;

public void setVar1(int var1){
    this.var1=var1; // will work
} 
```

并访问变量`interface` `SampleVariables.var1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:10:34.710

由于 Interface 的成员变量是 by，`default static, final`因此一旦初始化，您就不能`reassign`再次使用该值。

`Every field declaration in the body of an interface is implicitly public, static, and final. It is permitted to redundantly specify any or all of these modifiers for such fields.`

请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:07:58.940

接口中的所有字段都是*隐式*静态和最终的，因此您在上面发出警告。有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/1513520/java-why-all-fields-in-an-interface-are-implicitly-static-and-final)。

在我看来，您想要一个具有这些变量的基类，但正如您所指出的，您不能这样做，因为您是从第 3 方类派生的。

我不会从那个 3rd-party 类派生，因为你不控制它的实现。我宁愿创建一个*包装*它并提供附加功能的类。如果/当该第 3 方类发生更改，您可以限制随后必须进行的更改的范围，这让您感到一定程度的舒适。

不幸的是，Java 不支持[mixins](http://en.wikipedia.org/wiki/Mixin)，这是您在这里想要实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:15:11.057

您应该为此使用抽象类。

例子：

```
public abstract class AbstractClass {
    protected int var1;
}
class SubClass1 extends AbstractClass {

}
class SubClass2 extends AbstractClass {

} 
```

这样 SubClass1 和 SubClass2 将有一个 var1。请注意，您可以对 getter 和 setter 执行相同的操作，但为了说明这一点，这更短。

# node.js - Mongoose + Express - 将用户保存在文档中的正确方法是什么（审计信息）

> ID：11774273
> 
> 赞同：1
> 
> 时间：2012-08-02T09:05:13.247
> 
> 标签：node.js, express, mongoose

我正在编写一个使用 Mongoose ODM 的 Express.js 应用程序。创建/更新文档时，我希望它自动填充一些字段：

*   由...制作
*   创建于

在我看来，实现该功能的正确位置是在 Mongoose 插件中，该插件使用这些属性扩充文档并提供默认值和/或 mongoose 中间件来填充字段。

但是，我完全不知道如何从插件中的会话中获取用户名。有什么建议吗？

```
/**
 * A mongoose plugin to add mandatory 'createdBy' and 'createdOn' fields.
 */
 module.exports = exports = function auditablePlugin (schema, options) {
   schema.add({
     createdBy: { type: String, required: true, 'default': user }
   , createdOn: { type: Date, required: true, 'default': now }
   });
 };

 var user = function(){
   return 'user'; // HOW to get the user from the session ???
 };

 var now = function(){
   return new Date;
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:39:37.580

您不能这样做，`user`因为添加了函数作为此模式的原型方法。特别是它是独立于请求/响应的。然而，有一个黑客。如果你有`obj`类型的对象`schema`，那么你可以做

```
obj.session = req.session; 
```

在请求处理程序中。然后您可以从该功能访问会话。但是，这可能会导致其他问题（例如在此集合上运行 cron 作业），这对我来说似乎是一种**非常糟糕的**做法。

当当前用户创建此模式对象时，您可以手动执行此操作，不是吗？或者创建静态方法：

```
MySchema.statics.createObject = function ( user ) {
    // create your object
    var new_object = MySchema( ... );
    // set necessary fields
    new_object.createdBy = user.username;
} 
```

# c++ - Lambda 和 std::function

> ID：11774277
> 
> 赞同：4
> 
> 时间：2012-08-02T09:05:22.063
> 
> 标签：c++, templates, lambda, c++11

我正在努力赶上 C++11 和所有很棒的新特性。我有点卡在 lambdas 上。

这是我能够开始工作的代码：

```
#include <iostream>
#include <cstdlib>
#include <vector>
#include <string>
#include <functional>

using namespace std;

template<typename BaseT, typename Func>
vector<BaseT> findMatches(vector<BaseT> search, Func func)
{
    vector<BaseT> tmp;

    for(auto item : search)
    {
        if( func(item) )
        {
            tmp.push_back(item);
        }
    }

    return tmp;
}

void Lambdas()
{
    vector<int> testv = { 1, 2, 3, 4, 5, 6, 7 };

    auto result = findMatches(testv, [] (const int &x) { return x % 2 == 0; });

    for(auto i : result)
    {
        cout << i << endl;
    }
}

int main(int argc, char* argv[])
{

    Lambdas();

    return EXIT_SUCCESS;
} 
```

我想要的是这样的：

```
template<typename BaseT>
vector<BaseT> findMatches(vector<BaseT> search, function <bool (const BaseT &)> func)
{
    vector<BaseT> tmp;

    for(auto item : search)
    {
        if( func(item) )
        {
            tmp.push_back(item);
        }
    }

    return tmp;
} 
```

基本上我想将可能的 lambda 缩小到一个合理的函数子集。我错过了什么？这甚至可能吗？我正在使用 GCC/G++ 4.6。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T09:22:01.050

[Stephan T. Lavavej 在此视频](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-2-of-n)中解释了为什么这不起作用。基本上，问题在于编译器试图`BaseT`从the*和*参数中`std::vector` *进行推断。*`std::function`C++ 中的 lambda*不是*type `std::function`，它是一个未命名的、唯一的非联合类型，如果它没有捕获列表（空`[]`），它可以转换为函数指针。另一方面，`std::function`可以从任何可能类型的可调用实体（函数指针、成员函数指针、函数对象）创建对象。

请注意，我个人不明白为什么要将传入的仿函数限制为该特定签名（此外，通过多态函数包装器的间接调用，如`std::function`，远比直接调用仿函数效率低得多（甚至可能是内联的）），但这是一个工作版本。基本上，它禁用了`std::function`部分的参数推导，并且只`BaseT`从`std::vector`参数中推导：

```
template<class T>
struct Identity{
  typedef T type;
};

template<typename BaseT>
vector<BaseT> findMatches(vector<BaseT> search, 
    typename Identity<function<bool (const BaseT &)>>::type func)
{
    vector<BaseT> tmp;

    for(auto item : search)
    {
        if( func(item) )
        {
            tmp.push_back(item);
        }
    }

    return tmp;
} 
```

[Ideone 上的实时示例。](http://ideone.com/cDaLF)

另一种可能的方法是不直接限制函子类型，而是通过 SFINAE 间接限制：

```
template<class T, class F>
auto f(std::vector<T> v, F fun)
    -> decltype(bool(fun(v[0])), void())
{
  // ...
} 
```

[Ideone 上的实时示例。](http://ideone.com/dhyxN)

如果`fun`不接受类型参数`T&`或返回类型不可转换为`bool`. `, void()`make的`f`返回类型`void`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-02T03:33:25.157

正如其他海报所揭示的，这是 std::function 的模板参数推导。

使第二个代码片段工作的一种直观方法是在调用模板函数时添加基本类型：`findMatches<int>`.

Xeo 未提及的另一种方法是使用 std::is_convertible：

```
template<typename BaseT, typename FUNC>
vector<BaseT> findMatches(vector<BaseT> search, function <bool (const BaseT &)> func)
{
    static_assert(std::is_convertible<FUNC, function<bool (const BaseT &)> >::value, "func must be convertible to ...");

    vector<BaseT> tmp;

    for(auto item : search)
    {
        if( func(item) )
        {
            tmp.push_back(item);
        }
    }

    return tmp;
} 
```

它避免将 lamda 包装到 std::function 中，并提供更清晰的错误消息。

# java - Eclipse“加载描述符”需要很长时间

> ID：11774278
> 
> 赞同：28
> 
> 时间：2012-08-02T09:05:24.187
> 
> 标签：java, eclipse, spring-mvc, descriptor

我们有一个基于 Java Spring MVC 的项目，使用 Eclipse（Juno - 最新版本），使用最新的 JVM 1.7 和 Tomcat 7。Eclipse 非常快，并且一切都设置为默认设置。一旦全部加载完毕，它就快如闪电了，这是一个令人愉快的变化。

然而，唯一的抱怨是，如果我打开一个项目，它会开始“加载描述符”，据我所知，这是我们的 185 行 web.xml 文件。有时这可能需要 5 分钟才能加载，有时可能根本无法加载。这可以防止进行任何更改，因为系统会在其他任何事情发生之前等待描述符加载。按下停止按钮让系统“等待”取消通过，唯一的出路似乎是杀死java进程是任务管理器。如果它偶然加载，那么系统运行良好（除非您打开另一个项目以供参考，那么乐趣又开始了）。

是否有一些配置会跳过描述符（例如，它是否与可以跳过的验证有关）或者是否有某些原因导致描述符可能无法正确加载？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-07T10:05:08.903

当您的 Project Explorer 打开时会发生这种情况。在 Project Explorer 的“自定义视图”对话框中取消选中不必要的选项。在项目资源管理器面板的右上角有一个名为“自定义视图”的菜单，转到名为“内容”的第二个选项卡并取消选中不需要的选项...

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-11T04:12:17.603

出现该问题是因为“项目资源管理器”执行环境描述符的加载。所以加载eclipse后，选择`"Windows" -> "Open Perspective" -> "Java"`. 它将打开“包资源管理器”而不是“项目资源管理器”。

您需要在 eclipse 加载描述符之前快速完成它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T10:21:09.493

正如您所提到的，您可以尝试禁用所有基于“xml”的验证，如下所示：

1.  首先在 Windows -> Preferences -> Validation 中禁用所有基于 XML / XSL 的验证：

    ![Eclipse 一般验证](../Images/f8ad08bacded4925293f3b46288de2e4.png)

2.  在 Eclipse 首选项中键入“验证”并禁用任何与 XML 相关的验证，如下所示：

    ![Eclipse XML 特定验证](../Images/e97d4179039723549f87da41173f68c8.png)和，

    ![在此处输入图像描述](../Images/4e790fdfad30dac3345ea6c971fca952.png)

可能值得尝试以下内容：

1.  检查您的代理设置。如果需要，您的 Eclipse 是否能够连接到互联网？我问的原因是，Eclipse 尝试使用 XML 文件下载相关的模式文件。
2.  此外，检查 Eclipse 的错误日志视图以查看它挂起时是否正在尝试执行某些特定操作。
3.  你在 Eclipse 中有一个源代码控制插件，它链接到包含 web.xml 文件的项目吗？如果是这样，如果您断开网络连接有帮助吗？事实上，我建议断开网络连接并尝试打开有问题的项目。
4.  如果这是以前版本 Eclipse 的旧工作区，请尝试将此项目导入新工作区？

希望以上有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-25T13:39:48.857

是的，问题出在“项目资源管理器”中。如果您喜欢使用“Java EE”透视图（默认情况下会打开“Project Explorer”视图），请关闭“Project Explorer”视图并打开“Package Explorer”视图。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-27T06:43:53.507

将 Explorer 更改为 Package Explorer Window->Show View->Other->Java->Package Explorer 现在可以使用了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-02T22:30:30.977

就我而言，将 web.xml 重命名为 web-fail.xml 会停止挂起。

至少，我用 3.1 替换了我的 2.4 模式定义

```
`<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
     http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
     version="3.1">
` 
```

一切都恢复正常了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-15T09:49:13.290

我成功的方法是从 Eclipse 中删除项目。并删除“.classpath”、“.settings”和“.project”文件（“.settings”是一个目录）。之后将项目作为现有的 Maven 项目导入 Eclipse。

# php - Symfony 2 & Doctrine 2 - 创建自定义 findBy() 方法

> ID：11774280
> 
> 赞同：2
> 
> 时间：2012-08-02T09:05:27.370
> 
> 标签：php, symfony, doctrine-orm

我想创建自己的方法`findBy()`。我有两个实体：`Film`和`Genre`. 此自定义`findBy()`方法的目的是：

*   将`Film`实体与`Genre`实体连接，以检索我的所有电影和相关类型，
*   保留基本方法的参数：`$criteria`、 `$orderBy`和。`$limit``$offset`

事实上，我使用这些参数来进行分页。

以前我使用两个实体之间的连接创建了一个自定义 findAll 方法：

```
<?php
public function myFindAll()
{
    $films = $this->createQueryBuilder('f')
        // leftJoin because I need all the genre
        ->leftJoin('f.genres', 'g')
        ->addSelect('g.label')
        ->groupBy('f.id')
        ->getQuery()
        ->getArrayResult();

    // $genres contains all the genres and the associated movies
    return ($films);
} 
```

我不知道如何包含其余参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:58:36.207

切片（）怎么样？

```
$genders = $em->getRepository('models\Gender')->findAll()->slice($offset, $lenght); 
```

此外，您可以使用您的功能，如：

```
public function myFindAll($criteria, $orderBy, $limit, $offset)
{
    $films = $this->createQueryBuilder('f')
        // leftJoin because I need all the genre
        ->leftJoin('f.genres', 'g')
        ->addSelect('g.label')
        ->groupBy('f.id')
        ->add('orderBy', "f.{$orderBy} ASC")
        ->getQuery()
        ->getArrayResult()
        ->slice($offset, $limit);

    // $films contains all the genres and the associated movies
    return ($films);
} 
```

**编辑：**

该`slice()`函数充当分页函数：

```
$page1 = $films->slice(0, 15); // retrieve films from 0 to 15 position
$page2 = $films->slice(10, 7); // retrieve films from 10 to 17 position 
```

现在，如果你想使用一些标准值，你可以做这样的事情：

```
public function myFindAll($criteria, $orderBy, $limit, $offset)
{
    $films = $this->createQueryBuilder('f');

    foreach($criteria as $column => $value)
        $films->where($column, $value);

    $films
        ->leftJoin('f.genres', 'g')
        ->addSelect('g.label')
        ->groupBy('f.id')
        ->add('orderBy', "{$orderBy[0]} {$orderBy[1]}");
        ->getQuery()
        ->getArrayResult()
        ->slice($offset, $limit);

    // $genres contains all the genres and the associated movies
    return ($films);
} 
```

我不确定`where`函数是否会覆盖以前的条件，但至少它可以引导您找到正确的查询

## setFirstResult() 和 setMaxResult()

此外，您还可以使用另一个选项：

```
public function myFindAll($criteria, $orderBy, $limit, $offset)
{
    $films = $this->createQueryBuilder('f');

    foreach($criteria as $column => $value)
        $films->where($column, $value);

    $films
        ->leftJoin('f.genres', 'g')
        ->addSelect('g.label')
        ->groupBy('f.id')
        ->add('orderBy', "f.{$orderBy[0]} {$orderBy[1]}")
    ->setFirstResult($offset)
    ->setMaxResults($limit)
        ->getQuery()
        ->getArrayResult();

    // $genres contains all the genres and the associated movies
    return ($films);
} 
```

# google-bigquery - 作业执行期间遇到的错误。意外。请再试一次

> ID：11774284
> 
> 赞同：0
> 
> 时间：2012-08-02T09:05:41.250
> 
> 标签：google-bigquery

我正在运行一个简单的查询，它从一个包含五百万行的五列表中读取数据，并将其复制到一个新表中，并添加一个额外的常量列。

此查询继续失败并显示以下消息：

```
u'status': {u'errorResult': {u'message': u'Unexpected. Please try again.',
u'reason': u'internalError'},
u'errors': [{u'message': u'Unexpected. Please try again.',
u'reason': u'internalError'}],
u'state': u'DONE'}} 
```

检查[BigQuery](http://en.wikipedia.org/wiki/BigQuery)中的作业我得到：

> 作业执行期间遇到的错误。意外。请再试一次。

以下 jobIds 有这个问题：

job_6eae11c7792446a1b600fe5554071d32 query FAILURE 02 Aug 09:46:04 0:01:00
job_92ff013841574399a459e8c4296d7c73 query FAILURE 02 Aug 09:45:10 0:00:49
job_a1a11ee7bbec4c08b5e58b91b27aafad query FAILURE 02 Aug 09:43:40 0:00:55
job_496f8af99da94d8292f90580f73af64e query FAILURE 02 Aug 09:42:46 0:00:51

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:31:33.767

这是一个具有大型结果集的已知错误……我们已经修复并将在今天发布。

# c# - 将内连接 sql 查询转换为 linq

> ID：11774285
> 
> 赞同：1
> 
> 时间：2012-08-02T09:05:42.393
> 
> 标签：c#, sql-server

我有一个要转换为 Linq 的 sql 查询

```
Select b.title
from TableA as a
inner join TableB as b
on a.Email=b.Email
where a.Title<>b.Title 
```

我试过的查询是

```
var query =from s in TableA
          join r in TableB
          on r.Email equals s.Email 
```

但无法复制可能包含许多列的 where 子句

我的要求是我需要比较主键列上的 2 个表，然后获取其他不匹配的列值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:07:28.860

您需要在查询末尾进行“选择”，并且需要以正确的顺序获取输入：

```
var query = from s in TableA
            join r in TableB on s.Email equals r.Email
            where s.Title != r.Title
            select s.Title; 
```

对于多个列，使用匿名类型：

```
var query = from s in TableA
            join r in TableB 
              on new { s.Email, s.Foo } equals new { r.Email, r.Foo }
            where s.Title != r.Title
            select s.Title; 
```

# php - 脸书图片上传

> ID：11774290
> 
> 赞同：1
> 
> 时间：2012-08-02T09:05:57.977
> 
> 标签：php, facebook, image-uploading

我想在 facebook 上上传图片，但出现了问题。我面临以下错误。

```
Fatal error: Uncaught CurlException: 26: 
```

[我在这里](https://stackoverflow.com/questions/7116359/upload-a-remote-photo-to-an-upload)找到了确切的问题

解决方案是给，他说改变路径

```
# The URL for the Image to Transfer
$imageURL = 'http://server.com/the_image.jpg'; 
```

我不明白`http://server.com`facebook.com 或 localhost 是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:13:50.480

`$imageURL`表示您要上传的图片的网址。

您要上传托管在某个网站上的图像的示例。图片的网址是`$imageURL`.

如果您发布了一些代码，它将更容易解释。

我认为您应该在另一个问题本身中发表您的疑问。

# java - Java / Android 在运行新方法之前等待线程完成

> ID：11774294
> 
> 赞同：4
> 
> 时间：2012-08-02T09:06:01.297
> 
> 标签：java, android, multithreading

我有一个 android 应用程序（用 java 编写），它有两个按钮（**连接**和**请求数据**）。

单击每个按钮时，将执行一项任务并出现一个**进度对话框**以显示任务已完成的程度。

为了显示进度对话框，当单击每个按钮时，任务在线程上运行。

**连接**按钮只有一项任务——在线程上运行。但是，**请求数据**按钮执行两个任务 - 线程上的第一个任务类似于连接按钮，但还有第二个任务**refreshInfo()**，它必须在线程上的第一个任务**progThread**完成之后运行。

```
private Button connectButton;
private Button requestDataButton;

private ProgressDialog connectionDialog;
private ProgressDialog requestDataDialog;

private ProgressThread progThread;

private int currentDialog;

public void connectClick(View view)      //When the connect button is clicked
{
    performAction(1);   //Run the thread to perform the action
}

public void requestDownloadClick(View view)   //When the request data button is clicked
{
    performAction(2);    //Run the thread to perform the action

    refreshInfo();    //Do something else
}

private void performAction(int type)
{
    currentDialog = type;

    showDialog(type);

    try 
    {
        progThread.join();
    } 
    catch (InterruptedException e) 
    {
        e.printStackTrace();
    }
} 
```

这里的关键方法是**performAction(int type)**。**在progThread**完成运行之前，我基本上不希望此方法完成。

如您所见，我已尝试**progThread.join()**以防止该方法继续运行，直到**progThread**完成运行，但是由于**progThread**涉及显示**Progress Dialog**，运行**progThread.join()**似乎阻止了**Progress Dialog**显示，目前，当您单击按钮时，第一个任务正在执行，但对话框仅在最后闪烁。

谁能想到一种运行线程的方法，正常显示**进度对话框**，然后运行第二种方法（如果有的话）。

我在下面包含了线程代码，以防需要。

```
private class ProgressThread extends Thread 
{   
    final static int DONE = 0;
    final static int RUNNING = 1;   // Class constants defining state of the thread

    private Handler progressHandler;
    int mState;
    int total;

    ProgressThread(Handler _handler)    // Constructor with an argument that specifies Handler on main thread to which messages will be sent by this thread.
    {
        progressHandler = _handler;
    }

    public void run()    // Invoked automatically when the Thread starts.  
    {
        mState = RUNNING;   

        updateProgressBar();

        connectButton = (Button) findViewById(R.id.btnConnect);
        requestDataButton = (Button) findViewById(R.id.btnRequestDownload);

        while (mState == RUNNING) 
        {
            if (currentDialog == 1)
            {
                try
                { 
                    doSomething();

                    if (something)
                    {
                        setState(DONE);

                        total = 100;

                        updateProgressBar();

                        removeDialog(1);

                        connectButton.setEnabled(false);
                    }
                    else
                    {
                        total = total + 20;

                        if (something has reached a limit)
                        {
                            setState(DONE);

                            total = 0;

                            updateProgressBar();

                            removeDialog(1); 
                        }
                    }

                    updateProgressBar();
                }
                catch (Exception e)
                {

                }
            }

            if (currentDialog == 2)
            {
                try
                {
                    doSomething();

                    total = 10;

                    updateProgressBar();

                    doSomething();

                    total = 70;

                    updateProgressBar();

                    if (something)  //If the download info has not been got
                    {
                        setState(DONE);

                        total = 0;

                        updateProgressBar();

                        removeDialog(2);

                        runOnUiThread(new Runnable()
                        {
                            public void run() 
                            {
                                connectButton.setEnabled(true);

                                requestDataButton.setEnabled(true);
                            }                               
                        });  
                    } 
                    else
                    {
                        total = 100;

                        updateProgressBar();

                        setState(DONE);

                        removeDialog(2);

                        runOnUiThread(new Runnable()
                        {
                            public void run() 
                            {
                                requestDataButton.setEnabled(false);
                            }                               
                         }); 
                     }
                }
                catch (Exception e)
                {
                    removeDialog(2);

                    setState(DONE);

                    runOnUiThread(new Runnable()
                    {
                        public void run() 
                        {
                            connectButton.setEnabled(true);

                            requestDataButton.setEnabled(true);
                        }                               
                    });  
                }
            }
        }
    }

    // Set current state of thread (use state=ProgressThread.DONE to stop thread)
    public void setState(int state) 
    {
        mState = state;
    }

    public void updateProgressBar()
    {
        Message msg = progressHandler.obtainMessage();   // Send message (with current value of  total as data) to Handler on UI thread so that it can update the progress bar

        Bundle b = new Bundle();

        b.putInt("total", total);

        msg.setData(b);

        progressHandler.sendMessage(msg);
    }
}

final Handler handler = new Handler()     // Handler on the main (UI) thread that will receive messages from the second thread and update the progress.
{
    public void handleMessage(Message msg) 
    {
        int total = msg.getData().getInt("total");             // Get the current value of the variable total from the message data and update the progress bar

        switch (currentDialog)
        {
        case 1 : 
            connectionDialog.setProgress(total);
            break;

        case 2 : 
            requestDataDialog.setProgress(total);
            break;
        }
    }
};

protected Dialog onCreateDialog(int id) 
{   
    switch (currentDialog)
    {
    case 1 :
        connectionDialog = new ProgressDialog(this);

        connectionDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        connectionDialog.setMax(100);

        connectionDialog.setProgress(0);

        connectionDialog.setMessage("Connecting To The Device");

        progThread = new ProgressThread(handler);

        progThread.start();

        return connectionDialog;

    case 2 :
        requestDataDialog = new ProgressDialog(this);

        requestDataDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        requestDataDialog.setMax(100);

        requestDataDialog.setProgress(0);

        requestDataDialog.setMessage("Requesting Download Data");

        progThread = new ProgressThread(handler);

        progThread.start();

        return requestDataDialog;

    default : 
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:28:06.990

Android API 提供了一个[`AsyncTask`类](http://developer.android.com/reference/android/os/AsyncTask.html)，它有两个方法`doInBackground`和`onPostExecute`. 你必须覆盖它们，做任何你必须做的事情`doInBackground`，当工作完成时，`onPostExecute`回调将被运行。还有一个`onProgressUpdate`回调正是您所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:24:40.907

查看 AsyncTask 类。它应该能够做你想做的事。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:51:05.083

听起来您需要使用大小为 1的[CountdownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:35:29.760

似乎您已经涵盖了其他答案。AsyncTask 是要走的路。

但是，如果您想推进您的 Thread 实现，只需`start()`在第一个线程的 run 方法末尾的下一个线程即可。

# jquery - 通过 HTML 设置下拉列表的值

> ID：11774295
> 
> 赞同：2
> 
> 时间：2012-08-02T09:06:04.993
> 
> 标签：jquery, html, drop-down-menu

我想通过其 HTML 选择下拉列表的值。例如，我有以下选择......

```
<select id="dropdown">
    <option value=""></option>
    <option value="1">Choice 1</option>
    <option value="2">Choice 2</option>
</select> 
```

现在我可以检索文本**Choice 1**。我知道我可以使用 选择相应的值`$('#dropdown').val('1');`。但是，我实际上无权访问 1，我想仅使用**Choice 1**来选择相同的选项。

这可以通过 jQuery 实现，还是有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:07:58.903

```
$('#dropdown option').each(function() {
  if($(this).text()=='yourvalue') $('#dropdown').val($(this).val());
}); 
```

遍历选项并检查相应的值

[**JSFIDDLE**](http://jsfiddle.net/L7Zwx/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:13:47.100

试试这个工作 jsfiddle 链接。[http://jsfiddle.net/Fh3WC/](http://jsfiddle.net/Fh3WC/)

用您的变量值替换硬编码的选择 1。

```
$(function() {
    $("select option:contains('Choice 1')").attr('selected','selected');
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:08:57.693

```
/* get value */
document.getElementById("dropdown").options[0].value

/* get text */
document.getElementById("dropdown").options[3].text 
```

# javascript - 在 JavaScript/NodeJS 中压缩十六进制字符串

> ID：11774296
> 
> 赞同：5
> 
> 时间：2012-08-02T09:06:07.593
> 
> 标签：javascript, node.js, compression, hex

我的应用程序生成链接，其中包含十六进制字符串，如：`37c1fbcabbc31f2f8d2ad31ceb91cd8d0d189ca5963dc6d353188d3d5e75b8b3e401d4e74e9b3e02efbff0792cda5c4620cb3b1f84aeb47b8d2225cd40e761a5`。我真的想让它们更短，就像 Ruby 在[Compressing a hex string in Ruby/Rails](https://stackoverflow.com/questions/1993147/compressing-a-hex-string-in-ruby-rails)中提到的解决方案一样。

有没有办法在 JavaScript/NodeJS 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:15:55.623

您可以使用[toString](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toString)和[parseInt](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)方法，它们基本上与您在链接中提到的方法做同样的事情：

```
var hexString = "4b3fc1400";
var b36 = parseInt(hexString, 16).toString(36); // "9a29mgw" 
```

要将其转换回来，您只需执行相反的操作：

```
hexString = parseInt(b36, 36).toString(16); // "4b3fc1400" 
```

您的字符串的唯一问题是，它太大了，无法像 JavaScript 中的数字那样构成威胁。你应该把它们分成大块。JavaScript 的数字精确到 2^53（加号），因此您可以处理的最大正数是 0x20000000000000（十六进制，即 9007199254740992 十进制）；您可以使用准确性来处理块：

```
var hexString = "37c1fbcabbc31f2f8d2ad31ceb91cd8d0d189ca5963dc6d353188d3d5e75b8b3e401d4e74e9b3e02efbff0792cda5c4620cb3b1f84aeb47b8d2225cd40e761a5"

var b36 = "", b16 = "";

var chunk, intChunk;

// 14 is the length of 0x20000000000000 (2^53 in base 16)

for (var i = 0, max = 14; i < hexString.length; i += max) {
    chunk = hexString.substr(i, max);
    intChunk = parseInt(chunk, 16);

    if (intChunk.toString(16) !== chunk) {
        intChunk = parseInt(hexString.substr(i, max - 1), 16);
        i -= 1;
    }

    b36 += intChunk.toString(36)
}

// 11 is the length of 2gosa7pa2gv (2^53 in base 36)

for (var i = 0, max = 11; i < b36.length; i += max ) {
    chunk = b36.substr(i, max);
    intChunk = parseInt(chunk, 36);

    if (intChunk.toString(36) !== chunk) {
        intChunk = parseInt(b36.substr(i, max - 1), 36);
        i -= 1;
    }

    b16 += intChunk.toString(16)
}

console.log(hexString);
console.log(b36);
console.log(b16); 
```

**更新：**您也可以使用 base 62 而不是 36 来压缩更多，但请注意 JS 最多支持 base 36，因此您需要手动实现该[个人符号](http://en.wikipedia.org/wiki/Positional_notation)（我相信已经有一些实现）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T01:32:03.263

node [int-encoder](https://github.com/alanclarke/int-encoder)使用已经提到的策略来执行此操作。

它还支持大数

```
npm install int-encoder

var en = require('int-encoder');

//simple integer conversion
en.encode(12345678); // "ZXP0"
en.decode('ZXP0'); // 12345678

//convert big hex number using optional base argument
en.encode('e6c6b53d3c8160b22dad35a0f705ec09', 16); // 'hbDcW9aE89tzLYjDgyzajJ'
en.decode('hbDcW9aE89tzLYjDgyzajJ', 16); // 'e6c6b53d3c8160b22dad35a0f705ec09' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T23:25:59.703

最简单、最快的做法是定义一组 64 个安全字符以供在 URL 中使用，例如 AZ、az、0-9、_ 和 $。然后将每三个十六进制数字（每个 4 位）编码为两个安全字符（每个 6 位）。这不需要乘法和除法，它可以用于任意长的字符串。

您需要在字符串末尾选择第 65 个字符以指示是否使用了最后一个四位片段。否则，对于偶数个字符的字符串，您将产生歧义。我们称之为*2n*。然后有*3n-1*或*3n 个*十六进制数字在其中编码，但无法分辨是哪个。您可以按照顺序使用特殊字符来指示其中一种情况。例如“。” （时期）。

注意：此处为集合选择的最后几个字符与 Base64 编码不同，因为 URL 有自己的安全标点字符定义。请参阅[RFC 1738](http://www.ietf.org/rfc/rfc1738.txt)。

# html - 为什么这个 div id 中有斜线？

> ID：11774298
> 
> 赞同：8
> 
> 时间：2012-08-02T09:06:20.423
> 
> 标签：html, css

我正在浏览一个网站，发现这行代码：

```
<div class="section slideshow" id="/featured/"> 
```

我以前从未在 id 标签中看到过斜线，这是糟糕的编码，是数据库写出的问题，还是其他什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:19:32.063

属性中的斜线`id`不是有效字符：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:13:19.190

也许直接在 url 和/或 javascript 中使用它......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T09:24:54.247

也许他使用这种方法 **插入数据库**（在字符串中插入 id）或**转到 url**。

Slashe 在**html 4.01**中不是 ID 的有效字符，但在**html5**中有效。

**对于 html 4.01**

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

**参考：** [HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

[http://www.w3.org/TR/html5/global-attributes.html#the-id-attribute](http://www.w3.org/TR/html5/global-attributes.html#the-id-attribute)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T09:22:00.460

这样的过程有很多原因，即使事实证明这并不常见，开发人员也可以选择指定这个类和 id 名称：

也许他用这种方法来区分相同的Id名称不带斜线，

也许他使用这种方法将这个 id 插入到一个字符串中

*   插入数据库。
*   去一个网址。
*   其他编码证明...

也许只是一个 CMS 或框架的命名法......

同样的解决方案是联系网站创建者提出这个问题......

但是，如果您想了解更多详细信息，请访问[W3C 命名命名法](http://www.w3.org/TR/html401/types.html)网站...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T15:48:40.253

我给网站发了电子邮件，所有者回复了。

该站点是 HTML4/ASPX 并在被 Javascript 调用时使用该斜杠变量来显示幻灯片。

他似乎并不关心它是否有效，但它在所有浏览器中都可以正常工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-02T09:18:56.840

检查下面的程序，id只是引用那个特定的标签，它不一定是特定的格式，

```
<html>
<head>
<script type="text/javascript">
function displayResult()
{
document.getElementById("/myHeader/").innerHTML="Have a nice day!";
}
</script>
</head>

<body>
<h1 id="/myHeader/">Hello World!</h1>
<button onclick="displayResult()">Change text</button>
</body>

</html> 
```

上面的程序会让你更好的理解

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-02T09:27:01.623

**HTML5 几乎允许 id 属性的任何值 - 明智地使用**

HTML 4.01 对 id 属性允许的值非常严格：ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后面可以跟任意数量的字母、数字 ([0-9]) 、连字符 (“-”)、下划线 (“_”)、冒号 (“:”) 和句点 (“.”)。

[http://www.456bereastreet.com/archive/201011/html5_allows_almost_any_value_for_the_id_attribute_use_wisely/](http://www.456bereastreet.com/archive/201011/html5_allows_almost_any_value_for_the_id_attribute_use_wisely/)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-02T09:38:04.003

元素的属性在元素的开始标记内表示。属性具有名称和值。

同一个开始标记上决不能有两个或多个属性的名称彼此不区分大小写匹配。

以下列表描述了 HTML 语法中文档中属性的语法规则。XML 语法中文档中属性的语法规则。在 XML 规范 [XML] 中定义。

属性名称必须包含除空格字符、U+0000 NULL、"""、"'"、">"、"/"、"="、控制字符以及任何非空格字符以外的一个或多个字符由 Unicode 定义。与 XML 兼容的属性名称是那些与 XML 规范 [XML] 中定义的名称产生匹配且不包含“:”字符且其前三个字符不是不区分大小写匹配字符串“xml”的属性名称”。属性值可以包含文本和字符引用，附加限制取决于它们是不带引号的属性值、单引号的属性值还是双引号的属性值。此外，本参考的 HTML 元素部分描述了对特定属性的允许值，并且属性必须具有符合这些限制的值。

有关更多信息，请参阅[http://dev.w3.org/html5/markup/syntax.html#syntax-attributes](http://dev.w3.org/html5/markup/syntax.html#syntax-attributes)

# php - PHP 错误警告：Wordpress 3.4.1 上的 require_once

> ID：11774299
> 
> 赞同：0
> 
> 时间：2012-08-02T09:06:22.717
> 
> 标签：php, windows, wordpress, shared-hosting, plesk

我在 Plesk 10 上使用 Reseller Club 多域 Windows 共享主机。出现以下错误，我觉得这是服务器配置问题，请您提出一些解决方案

> 警告：require_once(D:\INETPUB\VHOSTS\fitnessorganiser.com\ladybirdwebhost.com/wp-load.php) [function.require-once]：无法打开流：D:\INETPUB\VHOSTS 中没有这样的文件或目录\fitnessorganiser.com\ladybirdwebhost.com\wp-blog-header.php 在第 12 行
> 
> 致命错误：require_once() [function.require]：无法打开所需的“D:\INETPUB\VHOSTS\fitnessorganiser.com\ladybirdwebhost.com/wp-load.php”（include_path='.;C:\Program Files (x86 )\Parallels\Plesk\Additional\PleskPHP5\pear;./includes;./pear') 在 D:\INETPUB\VHOSTS\fitnessorganiser.com\ladybirdwebhost.com\wp-blog-header.php 第 12 行

即使我尝试在 wordpress 中发布/添加图片，我也会遇到类似的错误

> 警告：file_exists() [function.file-exists]：open_basedir 限制生效。文件（C:\Windows\Temp\php7DD1.tmp）不在允许的路径中：（D:\INETPUB\VHOSTS\fitnessorganiser.com\httpdocs）在 D:\INETPUB\VHOSTS\fitnessorganiser.com\httpdocs \wp-includes\functions.php 在第 2505 79 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:43:18.030

看到这个知识库：http: [//kb.parallels.com/en/432](http://kb.parallels.com/en/432)

# jsp - HTTP 状态 500 - org.apache.jasper.JasperException：java.lang.ClassNotFoundException：org.apache.jsp.register_jsp

> ID：11774302
> 
> 赞同：0
> 
> 时间：2012-08-02T09:06:36.680
> 
> 标签：jsp, spring-mvc, tomcat

我在显示来自 Tomcat 服务器的 register.jsp 网页时遇到问题。register.jsp 位于 WEB-INF/jsp 和 webapps/register 文件夹，RegisterController.class 位于 WEB-INF/classes。我在两个地方都有 register.jsp，因为我试图让 register.jsp 工作，但最终 register.jsp 将驻留在 WEB-INF/jsp 中。问题似乎出在 web.xml 或 register-servlet.xml 中。我正在使用 Tomcat 7.0.21，Spring MVC 3.0。

web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 

         xsi:schemaLocation="
         http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
         id="WebApp_ID" version="2.5">      

  <display-name>Snap Fires</display-name>
  <servlet>
        <servlet-name>register</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet-mapping>
        <servlet-name>register</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

</web-app> 
```

register-servlet.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"

    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">

        <property name="prefix">
           <value> /WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
          <value>.jsp</value>
        </property>
    </bean>

    <bean name="/register.jsp" class="snapFires.controller.RegisterController"/>

</beans> 
```

错误代码：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.register_jsp
    org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:178)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:370)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.ClassNotFoundException: org.apache.jsp.register_jsp
    java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    java.security.AccessController.doPrivileged(Native Method)
    java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:132)
    org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:63)
    org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:172)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:370)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.21 logs.
Apache Tomcat/7.0.21 
```

register.jsp 文件

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Registration Page</title>
</head>
<body>

<h1>Create New Person</h1>

<form:form action="/jsp/registerOut.html" commandName="register">
 <table>
  <tr>
   <td><form:label path="firstName">First Name:</form:label></td>
   <td><form:input path="firstName"/></td>
  </tr>

  <tr>
   <td><form:label path="lastName">Last Name</form:label></td>
   <td><form:input path="lastName"/></td>
  </tr>
 </table>

 <input type="submit" value="Save" />
</form:form>

</body>
</html> 
```

RegisterController.java 类

```
package snapFires.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
//import javax.annotation.Resource;

import org.apache.log4j.Logger;
//import org.springframework.ui.ModelMap;
import org.springframework.ui.Model;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ModelAttribute;
//import org.springframework.web.bind.annotation.RequestMapping;
//import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;
//import org.springframework.web.servlet.mvc.SimpleFormController;
import java.io.IOException;
//import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

import snapFires.domain.Name;
import snapFires.service.RegisterImpl;

@Controller
@RequestMapping("/register")
public class RegisterController extends MultiActionController {

    public ModelAndView handleRequest (HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        return new ModelAndView("register.jsp");
    }
    //@Resource(name="register")
    //private RegisterImpl registerImpl;
    protected static Logger logger = Logger.getLogger("controller");

    @RequestMapping(value="/jsp/register.html", method=RequestMethod.GET)
    public void simpleForm(Model model){
        model.addAttribute(new RegisterImpl());
    }

    @RequestMapping(value="/jsp/registerOut.html", method=RequestMethod.POST)
    public void simple(@ModelAttribute RegisterImpl registerImpl, Model model){
        model.addAttribute("register", registerImpl);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:41:17.133

在 RegisterController 类中返回 ModelAndView 时只返回寄存器。由于您使用的是带后缀和前缀的内部视图解析器，因此它将添加 WEB-INF/jsp 和 .jsp 来注册并获取路径。

另请参阅[https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)以获取带有 pdf 的 spring mvc3 展示。请阅读[http://duckranger.com/2011/07/spring-mvc-3-0-with-sts-tutorial-part-i/](http://duckranger.com/2011/07/spring-mvc-3-0-with-sts-tutorial-part-i/)

# regex - 转义字符串作为正则表达式传递

> ID：11774306
> 
> 赞同：25
> 
> 时间：2012-08-02T09:06:52.997
> 
> 标签：regex, scala

我想创建一个函数来创建与输入中给出的任意字符串匹配的正则表达式。例如，当我用它喂它时，`123$`它应该按字面意思匹配`"123$"`，而不是`123` *在字符串的末尾*。

```
def convert( xs: String ) = (xs map ( x => "\\"+x)).mkString                 

val text = """ 123 \d+ 567 """                                                
val x = """\d+"""                                                            
val p1 = x.r                                                                 
val p2 = convert(x).r                                                        

println( p1.toString )                                                       
  \d+ // regex to match number                                               

println( ( p1 findAllIn text ).toList )                                      
  List(123, 567) // ok, numbers are matched                                  

println( p2.toString )                                                       
  \\\d\+ // regex to match "backshash d plus"                                

println( ( p2 findAllIn text ).toList )                                      
  List() // nothing matched :( 
```

所以最后一个`findAllIn`应该`\d+`在文本中找到，但它没有。这里有什么问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-02T09:27:47.200

您可以使用 Java 的 Pattern 类将字符串转义为正则表达式。请参阅[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)

例如：

```
scala> Pattern.quote("123$").r.findFirstIn("123$")
res3: Option[String] = Some(123$) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-28T17:33:35.483

只是为了更多地关注 Harold L 上面的评论，如果你想使用 Scala 库来做到这一点，你可以使用：

```
import scala.util.matching.Regex
Regex.quote("123$").r.findFirstIn("123$") 
```

# php - 访问 PHP 中 stdClass 对象中的变量

> ID：11774309
> 
> 赞同：1
> 
> 时间：2012-08-02T09:07:17.347
> 
> 标签：php, stdclass

我使用我的 CRM 的 API 来接收联系人。现在，我想访问联系人的电子邮件地址：

```
$result = $api->findContacts($params);
print_r($result[0]->email); 
```

返回...

```
stdClass Object ( 
  [0] => ckauwan_t@tsp-t.com 
  [--primary] => ckauwan_t@tsp-t.com 
) 
```

如何通过 PHP 访问存储在 [--primary] 中的电子邮件地址？我尝试了 $result[0]->email->--primary 等，但不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:16:17.807

尝试这个 ：

```
$primary = '--primary';

echo $result[0]->email->{$primary}; 
```

# mysql - 比较 MySQL JOIN 子句中的 varchar 和 integer

> ID：11774311
> 
> 赞同：1
> 
> 时间：2012-08-02T09:07:20.237
> 
> 标签：mysql, join, casting

我有一个查询如下：

```
select q.question, e.filename
from question q
join actions a on a.FK_QId = q.PK_Id
join action_params ap on ap.FK_AId = a.PK_Id
join envfile e on e.FK_Qid = ap.value
where e.EnvType = 0 
```

问题是where is varchar and is integer的`JOIN ON`子句。我知道我必须做点什么，但我尝试过的失败：`e.FK_Qid = ap.value``value``FK_QId``CAST``CONVERT`

```
select q.`question`, e.filename
from question q
join actions a on a.FK_QId = q.PK_Id
join action_params ap on ap.FK_AId = a.PK_Id
join envfile e on CAST(e.FK_Qid as nvarchar(3)) = ap.value
where e.EnvType = 0 
```

基本上，该`value`字段将包含“1”、“2”等字符串。因此，如果我可以进行字符串到字符串的比较或 int 到 int 的转换，那就没问题了。底线是`"1" = 1`等等`"2" = 2`。

**编辑：`CAST(e.FK_Qid as char3) = ap.value`工作得很好..**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:14:15.360

如果`ap`. `value`只有像“1”、“2”……这样的值，那么你可以使用你的第一个查询，服务器会自己做任何事情。所有值都将转换为数字，并且您的 ON 条件将起作用。

# bean-validation - 为什么 JSR303 自定义注解的约束组必须默认为空数组？

> ID：11774313
> 
> 赞同：5
> 
> 时间：2012-08-02T09:07:25.870
> 
> 标签：bean-validation, custom-validators

我正在为特定的约束组（不是默认）编写自定义验证器，但运行时给了我以下错误。

我只是好奇为什么他们需要默认值为空。感谢您是否可以分享您的意见。谢谢 ：）

xxx.model.validation.CustomValidation 包含 Constraint 注解，但 groups 参数默认值不是空数组。

StackTrace：org.hibernate.validator.metadata.ConstraintHelper.assertGroupsParameterExists(ConstraintHelper.java:335) org.hibernate.validator.metadata.ConstraintHelper.isConstraintAnnotation(ConstraintHelper.java:282)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:56:51.887

我不知道在哪种情况下将约束绑定到特定组会很有用。

组用于部分验证（和序列验证）。如果你在一个类中有 10 个字段，你可以用**A标记其中的 8 个，用****B**标记2 个。然后，您可以决定仅验证**A**组或**B**组中的字段。相反，您希望它`@MyConstraint`属于名为**C**的特定组。这没有道理。组或多或少是一个名称，用于将同一类中的某些字段与其他字段区分开来。它没有绝对的意义。组在验证中而不是在约束定义中很有用，它们与字段相关而不是约束。

此外，如果您在约束定义中隐藏组名，您可能会遇到错误，因为您可以认为这些字段都经过了验证。

```
@Email
private String mail;

@Password
private String pass;

@VAT
private String vatCode; 
```

你能看到是否有部分验证吗？

**编辑**

关于第二条评论：假设您有一个包含 5 个字段且完全没有约束的类。其中三个是整数。如果您想验证这三个字段的总和，您必须按照您的建议创建一个类级别的约束。这样，您的自定义注释将应用于类而不是字段，那么如何在字段上定义组？

相反，您可以使用以下内容：

```
@Sum(min = 250, fields = {"length", "width", "height"})
public class MyClass {
    private String type;
    private String code;
    private int length;
    private int width;
    private int height;
        ...
} 
```

# linux - oracle linux上的依赖项检查失败

> ID：11774317
> 
> 赞同：0
> 
> 时间：2012-08-02T09:07:34.997
> 
> 标签：linux, dependencies, packet, installation

我是 linux 新手。我正在使用 oracle linux ... el5。我正在尝试安装 oracle 11g。我必须为预安装任务安装一些数据包。例如：compat-libstdc++-33-3.2.3 我下载了 rpm 文件并尝试安装，但依赖项检查失败。我有一个更高版本的 glibc，如下所示。我应该怎么办？即使我有更高版本，我是否会安装所有依赖项？

```
[root@localhost ferhat]# rpm -iv compat-libstdc++-33-3.2.3-61.x86_64.rpm
warning: compat-libstdc++-33-3.2.3-61.x86_64.rpm: Header V3 DSA signature: NOKEY, key ID e8562897
error: Failed dependencies:
        libc.so.6()(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
        libc.so.6(GLIBC_2.2.5)(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
        libc.so.6(GLIBC_2.3)(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
        libgcc_s.so.1()(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
        libgcc_s.so.1(GCC_3.0)(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
        libgcc_s.so.1(GCC_3.3)(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
        libm.so.6()(64bit) is needed by compat-libstdc++-33-3.2.3-61.x86_64
[root@localhost ferhat]# 
[root@localhost ferhat]# 
[root@localhost ferhat]# rpm -q glibc
glibc-2.5-49
[root@localhost ferhat]# rpm -q gcc
gcc-4.1.2-48.el5 
```

问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:15:47.467

使用您的包管理器而不是纯 RPM 进行安装。你的发行版中有什么，嗯？

# php - jQuery Tablesorter 不适用于使用 php 生成的表

> ID：11774318
> 
> 赞同：0
> 
> 时间：2012-08-02T09:07:38.023
> 
> 标签：php, jquery, mysql, tablesorter

这是一个类似的问题：[Mysql PHP generated table: doesn't work with Tablesorter](https://stackoverflow.com/questions/2441057/mysql-php-generated-table-doesnt-work-with-tablesorter)

但是，有一个细微的区别：我直接在同一个文件中生成表，而不是外部文件，因此`.load`不是一种选择。

我的代码：

```
<html>
 <head>
  <title>Tablesorter testing page</title>

  <link rel="stylesheet" href="style.css" type="text/css"/>

  <script src="jquery.js" type="text/javascript"></script>
  <script src="jquery.tablesorter.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function() { 
        $("#races").tablesorter();
    }); 
  </script>
 </head>
<body>
 <?php
    $db = new mysqli("localhost", "user", "password", "database");

    $query = "SELECT name, date FROM races";

    $result = $db->query($query, MYSQLI_STORE_RESULT);

    $o = '<table id="races"><thead><tr><th>Name</th><th>Date</th></tr></thead><tbody>';

    while(list($name, $date) = $result->fetch_row()) {
        $o .= '<tr><td>'.$name.'</td><td>'.$date.'</td></tr>';
    }

    $o .= '</tbody></table>';

    echo $o;
?>
</body>
</html> 
```

问题是表格没有格式化，好像在空表上调用了Tablesorter？如果我对 html 表进行硬编码，Tablesorter 就可以正常工作。

那么，我该如何让它工作呢？

编辑：下面是生成的 .html 代码

```
<html>
     <head>
      <title>Tablesorter testing page</title>

      <link rel="stylesheet" href="style.css" type="text/css"/>

      <script src="jquery.js" type="text/javascript"></script>
      <script src="jquery.tablesorter.js" type="text/javascript"></script>
      <script>
        $(document).ready(function() { 
            $("#races").tablesorter();
        }); 
      </script>
     </head>
    <body>
     <table id="races">
<thead><tr><th>Name</th><th>Date</th></tr></thead>
<tbody><tr><td>Race 1</td><td>2012-01-01</td></tr><tr><td>Race 2</td><td>2012-01-01</td></tr></tbody></table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:54:28.853

替换这一行：

```
<table id="races"> 
```

和：

```
<table id="races" class="tablesorter"> 
```

我也在使用这个 jquery 插件，并且在我将这个 CSS 类添加到我的表之前遇到了这个问题。您必须确保您的 CSS 文件包含 tablesorter CSS 类的 CSS 代码。

# html - 我可以在圆形元素周围环绕文本吗？

> ID：11774321
> 
> 赞同：3
> 
> 时间：2012-08-02T09:07:52.173
> 
> 标签：html, css

我需要在 iPhone 应用程序的 web 视图中使用 HTML 块。它需要动态分层，以便本地化文本提供相同的布局。

为了说明我想要实现的目标，我有这个：

```
___________________________
|                         |
|                         |
|                         |
|  text here              |
|  and here               |
|                         |
|  but there is a         |
|  circle right           |
|  here that              |
|  can't                  |
|  have                   |
|  text                   |
___________________________ 
```

想象一下右下角的一个圆圈，我对 ASCII 艺术很糟糕。基本上，该应用程序支持多种语言，其中一些语言比其他语言更多。

有没有办法创建某种蒙版，以便文本环绕右下角的圆形，无论有多少文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:16:18.640

即使您的元素显示为圆形，它仍然基本上是块（框）形元素。这意味着您不能将文本环绕在曲线上。

您可以通过使用单个文本位定位跨度来作弊，但这将是一场噩梦。

这是实现您想要的非常讨厌的方法：

[http://www.webbedenvironments.com/dhtml_css_advanced/code/05_Layout/CurvedTextWrapping/index.html](http://www.webbedenvironments.com/dhtml_css_advanced/code/05_Layout/CurvedTextWrapping/index.html)

# java - Can the methods in an Enum type change the state of the instances of an Enum?

> ID：11774327
> 
> 赞同：3
> 
> 时间：2012-08-02T09:08:04.917
> 
> 标签：java, enums

If Enums are an answer for getting rid of compile time constants , why did the language designers provide facility to let arbitrary methods and fields and implement arbitrary interfaces on Enums ? Those methods can never change the state of the Enum instances or can they ? If they are allowed to change the state , then the invariant of an Enum type ie some type that exports a few constants will break IMHO.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:17:03.553

Java enums are really just classes with some special treatment by the compiler and runtime. So yes, method calls on an enum instance can certainly change its state. I'm not sure what you mean with "then the invariant of an Enum type ie some type that exports a few constants will break".

Who says enums can only be a bunch of constants? The essence of an enum type is that you have a predefined fixed number of instances which you can refer to by name - and Java enums implement that. But why would a language not be allowed to have enums that are more powerful than that?

If you don't want the extra power, nobody forces you to use it. You can have Java enums without fields or methods, and they'll behave pretty much exactly like C enums.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:56:33.943

Enums are compile-time constants, but their members aren't. It's usually not a good idea to change enum members at runtime, but it is possible. For this reason, you can't use an enum's members where compile-time constants are called for (e.g. in annotation parameters).

Hardly anything in Java is really a constant when you go try hard to mess things up. E.g. a String constant contains a char array. Arrays are not immutable. Here's an example of the mess you can make using inlined String constants:

```
public static void main(final String[] args) throws Exception {
    final Field valueField = String.class.getDeclaredField("value");
    valueField.setAccessible(true);
    System.arraycopy("frog".toCharArray(), 0,
        (char[]) valueField.get(Boolean.TRUE.toString()), 0, 4);
    System.out.println(Boolean.parseBoolean("frog")); // true
    System.out.println(Boolean.parseBoolean("true")); // false
} 
```

So, Java constants in most cases are just constants as long as your application is well-behaved.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:17:13.033

> why did the language designers provide facility to let arbitrary methods and fields and implement arbitrary interfaces on Enums

Reasons are to allow replacing switch-statements with polymorphism and generally make programs more Object Oriented by allowing to define methods on the data.

Search for "type-safe enum pattern". Java Enums are an implementation of this design pattern on language level.

# sql-server - SQL Server 表复制

> ID：11774329
> 
> 赞同：0
> 
> 时间：2012-08-02T09:08:12.913
> 
> 标签：sql-server, sql-server-2008, cluster-computing

是否可以在表级别复制 2 个 SQL Server？（我只想复制几个表，而不是所有数据库）。两个 SQL Server 都在不同的物理服务器上工作，并且应该同步一些表。

如果可能，如何避免冲突？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:06:19.633

是的，您可以使用 MERGE 复制，前提是源表名和目标表名应该相同。我猜如果表名不同，事务复制可能会支持。

# magento - Fishpig Wordpress Magento 发布问题

> ID：11774330
> 
> 赞同：0
> 
> 时间：2012-08-02T09:08:18.093
> 
> 标签：magento, magento-1.7, fishpig

如何在fishpig wordpress magento集成中根据其对应类别检索最近的帖子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T09:32:58.033

```
$numPostsToShow = 2;
$categoryId = 1; //Replace with your category id
$recentPostCollection = Mage::getModel('wordpress/post')->getCollection()
    ->addIsPublishedFilter()
    ->addCategoryIdFilter($categoryId)
    ->setOrder('post_date', 'desc')
    ->setPageSize($numPostsToShow)
; 
```

**编辑**

Fishpig Wordpress 模块将当前的 wordpress 类别注册为 'wordpress_category'

因此，要回答评论中关于如何动态获取当前 wordpress 类别的问题：

```
Mage::registry('wordpress_category'); 
```

上面的完整示例将变为：

```
$numPostsToShow = 2;
$categoryId = Mage::registry('wordpress_category')->getId();
$recentPostCollection = Mage::getModel('wordpress/post')->getCollection()
    ->addIsPublishedFilter()
    ->addCategoryIdFilter($categoryId)
    ->setOrder('post_date', 'desc')
    ->setPageSize($numPostsToShow)
; 
```

但是您可能应该使用 Fishpig_Wordpress_Block_Category_View 块，它可以让您`$this->_getPostCollection()`从模板中访问基本上完成上述所有操作的内容 - 为什么在使用 fishpig 模块时要自己编写代码？

# wpf - 如何将放置在 Viewmodel 中的属性绑定到 Wpf DataGrid 的每一行？

> ID：11774337
> 
> 赞同：0
> 
> 时间：2012-08-02T09:08:39.020
> 
> 标签：wpf, mvvm, wpfdatagrid

对于DataGridTemplateColumn，我需要EllementStyle和EdititngElementStyle之类的东西，因为我想将一个属性绑定到数据网格的每一行，并且这个属性在ViewModel中，我在viewmodel中有这个属性的一个实例，但需要将它的不同实例绑定到每一行!（此属性不在 DataGrid.ItemSource 中）

我使用 EllementStyle 和 EdititngElementStyle 为 DataGridTextColumn 做了类似的事情，但似乎 DataGridTemplateColumn 没有这个属性？任何想法？

编辑：

```
<DataGridTemplateColumn >
      <DataGridTemplateColumn.CellTemplate>
         <DataTemplate>
            <TextBox Text="{Binding DataContext.MYProperty, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}"/>    
          </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

我之前为 DataGridComboBoxColumn 做过类似的事情，它可以工作。

```
 <DataGridComboBoxColumn 
          DisplayMemberPath="Name" SelectedValuePath="ID" 
          SelectedValueBinding="{Binding DocKindID}">
        <DataGridComboBoxColumn.ElementStyle>
           <Style TargetType="{x:Type ComboBox}">
              <Setter Property="ItemsSource" Value="{Binding Path=DataContext.DocKindList, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
             </Style>
         </DataGridComboBoxColumn.ElementStyle>
         <DataGridComboBoxColumn.EditingElementStyle>
             <Style TargetType="{x:Type ComboBox}">
                <Setter Property="ItemsSource" Value="{Binding Path=DataContext.DocKindList, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
             </Style>
         </DataGridComboBoxColumn.EditingElementStyle>
     </DataGridComboBoxColumn> 
```

# scala - 无法验证 specs2 中传递给模拟方法的参数子集

> ID：11774345
> 
> 赞同：1
> 
> 时间：2012-08-02T09:09:18.973
> 
> 标签：scala, mocking, specs2, argument-matcher

这是一个重现该问题的简单规范：

```
package ro.igstan.learning

import org.specs2.matcher.ThrownExpectations
import org.specs2.mock.Mockito
import org.specs2.mutable.Specification
import org.specs2.specification.Scope

class LearningSpecs2 extends Specification {

  trait Logger {
    def error(a: String, b: String)
  }

  trait mocks extends Mockito with Scope with ThrownExpectations {
    val mockedLogger = mock[Logger]
  }

  "mocking" should {
    // passes
    "be able to verify arguments passed to mocks" in new mocks {
      mockedLogger.error("message", "foo")

      got {
        one(mockedLogger).error("message", "foo")
      }
    }

    // fails
    "be able to *partially* verify arguments passed to mocks" in new mocks {
      mockedLogger.error("message", "foo")

      got {
        one(mockedLogger).error(any, ===("foo"))
      }
    }
  }
} 
```

这是输出：

```
[info] mocking should
[info] + be able to verify arguments passed to mocks
[error] ! Fragment evaluation error
[error]     ThrowableException: org/hamcrest/TypeSafeMatcher (FutureTask.java:303)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.argThat(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply$mcV$sp(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.got(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.<init>(LearningSpecs2.scala:30)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.argThat(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply$mcV$sp(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.got(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.<init>(LearningSpecs2.scala:30)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] org/hamcrest/TypeSafeMatcher
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.argThat(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply$mcV$sp(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.got(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.<init>(LearningSpecs2.scala:30)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] org.hamcrest.TypeSafeMatcher
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.argThat(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply$mcV$sp(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2$$anonfun$2.apply(LearningSpecs2.scala:31)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.got(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3$$anon$2.<init>(LearningSpecs2.scala:30)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27)
[error] ro.igstan.learning.LearningSpecs2$$anonfun$3$$anonfun$apply$3.apply(LearningSpecs2.scala:27) 
```

以下是 SBT 依赖图插件报告的库版本：

```
[info] default:learning_2.9.1:1.0.0
[info]   +-junit:junit:4.7
[info]   +-org.mockito:mockito-all:1.9.0
[info]   +-org.scala-lang:scala-library:2.9.1
[info]   +-org.specs2:specs2_2.9.1:1.11
[info]     +-org.specs2:specs2-scalaz-core_2.9.1:6.0.1
[info]       +-org.scala-lang:scala-library:2.9.1 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:16:31.683

固定的。我必须明确指定 Hamcrest 版本：

```
libraryDependencies ++= Seq(
  "org.specs2"  %% "specs2"       % "1.11" ,
  "org.mockito"  % "mockito-all"  % "1.9.0",
  "org.hamcrest" % "hamcrest-all" % "1.3", // <- this was missing
  "junit"        % "junit"        % "4.7"
) 
```

# jsf-2 - Primefaces 中对 SelectOneMenu 的 OptionGroup 支持

> ID：11774348
> 
> 赞同：1
> 
> 时间：2012-08-02T09:09:35.767
> 
> 标签：jsf-2, primefaces

我已经覆盖了 SelectOneMenuRenderer 来为这个组件添加 OptionGroup-Support。现在显示选项组。伟大的！

但是当我有一个带有选项组的选择并单击此菜单中的一个项目时：
- 选择了下面的 SelectItem（在第一个选项组之后）
- 选择了下面的 SelectItem 两个（在第二个选项组之后）
- ...

一些 javascript 在这里把事情搞砸了，但我无法弄清楚究竟是哪个以及在哪里。

代码：

```
package org.primefaces.component.selectonemenu;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import javax.faces.component.UIComponent;
import javax.faces.component.UISelectOne;
import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.faces.model.SelectItem;
import javax.faces.model.SelectItemGroup;

import org.primefaces.component.column.Column;
import org.primefaces.renderkit.SelectOneRenderer;
import org.primefaces.util.ComponentUtils;

public class SelectOneMenuRenderer extends SelectOneRenderer {

  @Override
  public void decode(final FacesContext context, final UIComponent component) {
    if (!shouldDecode(component)) {
      return;
    }

    SelectOneMenu menu = (SelectOneMenu)component;
    if (menu.isEditable()) {
      Map<String, String> params = context.getExternalContext().getRequestParameterMap();

      decodeBehaviors(context, menu);

      menu.setSubmittedValue(params.get(menu.getClientId(context) + "_editableInput"));
    }
    else {
      super.decode(context, component);
    }
  }

  @Override
  public Object getConvertedValue(final FacesContext context, final UIComponent component,
      final Object submittedValue) throws ConverterException
  {
    return context.getRenderKit().getRenderer("javax.faces.SelectOne", "javax.faces.Menu")
        .getConvertedValue(context, component, submittedValue);
  }

  @Override
  public void encodeEnd(final FacesContext context, final UIComponent component) throws IOException {
    SelectOneMenu menu = (SelectOneMenu)component;

    encodeMarkup(context, menu);
    encodeScript(context, menu);
  }

  protected void encodeMarkup(final FacesContext context, final SelectOneMenu menu) throws IOException {

    boolean isOptionGroup = false;

    ResponseWriter writer = context.getResponseWriter();
    List<SelectItem> selectItems = getSelectItems(context, menu);
    String clientId = menu.getClientId(context);
    Converter converter = menu.getConverter();
    Object values = getValues(menu);
    Object submittedValues = getSubmittedValues(menu);
    boolean valid = menu.isValid();

    String style = menu.getStyle();
    String styleClass = menu.getStyleClass();
    styleClass = styleClass == null ? SelectOneMenu.STYLE_CLASS : SelectOneMenu.STYLE_CLASS + " "
        + styleClass;
    styleClass = !valid ? styleClass + " ui-state-error" : styleClass;
    styleClass = menu.isDisabled() ? styleClass + " ui-state-disabled" : styleClass;

    writer.startElement("div", menu);
    writer.writeAttribute("id", clientId, "id");
    writer.writeAttribute("class", styleClass, "styleclass");
    if (style != null) {
      writer.writeAttribute("style", style, "style");
    }

    // filter selectItems // values
    List<SelectItem> selectGroupedItems = new ArrayList<SelectItem>();
    for (Object item : selectItems) {
      if (item instanceof SelectItemGroup) {
        isOptionGroup = true; // Flag, um den (Render-)Modus auf "Optiongroup" umzuschalten
        ((SelectItemGroup)item).setNoSelectionOption(true);
        ((SelectItemGroup)item).setDisabled(true);
        selectGroupedItems.add((SelectItem)item); // Nicht: SelectItemGroup

        SelectItem[] innerItems = ((SelectItemGroup)item).getSelectItems();
        for (SelectItem innerItem : innerItems) {
          selectGroupedItems.add(innerItem);
        }
        continue;
      }
      selectGroupedItems.add((SelectItem)item);
    }

    // Encode tags
    encodeInput(context, menu, clientId, selectGroupedItems, values, submittedValues, converter);
    encodeLabel(context, menu, selectGroupedItems);
    encodeMenuIcon(context, menu, valid);
    encodePanel(context, menu, selectGroupedItems, isOptionGroup);

    writer.endElement("div");
  }

  protected void encodeInput(final FacesContext context, final SelectOneMenu menu, final String clientId,
      final List<SelectItem> selectItems, final Object values, final Object submittedValues,
      final Converter converter) throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    String inputId = clientId + "_input";

    writer.startElement("div", menu);
    writer.writeAttribute("class", "ui-helper-hidden-accessible", null);

    writer.startElement("select", menu);
    writer.writeAttribute("id", inputId, "id");
    writer.writeAttribute("name", inputId, null);
    if (menu.isDisabled()) {
      writer.writeAttribute("disabled", "disabled", null);
    }
    if (menu.getTabindex() != null) {
      writer.writeAttribute("tabindex", menu.getTabindex(), null);
    }
    if (menu.getOnkeydown() != null) {
      writer.writeAttribute("onkeydown", menu.getOnkeydown(), null);
    }
    if (menu.getOnkeyup() != null) {
      writer.writeAttribute("onkeyup", menu.getOnkeyup(), null);
    }

    encodeSelectItems(context, menu, selectItems, values, submittedValues, converter);

    writer.endElement("select");

    writer.endElement("div");
  }

  protected void encodeLabel(final FacesContext context, final SelectOneMenu menu,
      final List<SelectItem> selectItems) throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    String valueToRender = ComponentUtils.getValueToRender(context, menu);

    if (menu.isEditable()) {
      writer.startElement("input", null);
      writer.writeAttribute("type", "text", null);
      writer.writeAttribute("name", menu.getClientId() + "_editableInput", null);
      writer.writeAttribute("class", SelectOneMenu.LABEL_CLASS, null);
      writer.writeAttribute("tabindex", -1, null);
      writer.writeAttribute("autocomplete", "off", null);
      if (menu.isDisabled()) {
        writer.writeAttribute("disabled", "disabled", null);
      }

      if (valueToRender != null) {
        writer.writeAttribute("value", valueToRender, null);
      }

      writer.endElement("input");
    }
    else {
      writer.startElement("label", null);
      writer.writeAttribute("id", menu.getClientId() + "_label", null);
      writer.writeAttribute("class", SelectOneMenu.LABEL_CLASS, null);
      writer.write("&nbsp;");
      writer.endElement("label");
    }
  }

  protected void encodeMenuIcon(final FacesContext context, final SelectOneMenu menu, final boolean valid)
    throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    String iconClass = valid ? SelectOneMenu.TRIGGER_CLASS : SelectOneMenu.TRIGGER_CLASS + " ui-state-error";

    writer.startElement("div", menu);
    writer.writeAttribute("class", iconClass, null);

    writer.startElement("span", menu);
    writer.writeAttribute("class", "ui-icon ui-icon-triangle-1-s", null);
    writer.endElement("span");

    writer.endElement("div");
  }

  protected void encodePanel(final FacesContext context, final SelectOneMenu menu,
      final List<SelectItem> selectItems, final boolean isOptionGroup) throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    boolean customContent = menu.getVar() != null;
    int height = calculatePanelHeight(menu, selectItems.size());
    String panelStyle = menu.getPanelStyle() != null ? menu.getPanelStyle() : "";
    String panelStyleClass = menu.getPanelStyleClass();
    panelStyleClass = panelStyleClass == null ? SelectOneMenu.PANEL_CLASS : SelectOneMenu.PANEL_CLASS + " "
        + panelStyleClass;

    if (height != -1) {
      panelStyle += ";height:" + height + "px";
    }

    writer.startElement("div", null);
    writer.writeAttribute("id", menu.getClientId(context) + "_panel", null);
    writer.writeAttribute("class", panelStyleClass, null);

    if (!isValueEmpty(panelStyle)) {
      writer.writeAttribute("style", panelStyle, null);
    }

    if (customContent) {
      writer.startElement("table", menu);
      writer.writeAttribute("class", SelectOneMenu.TABLE_CLASS, null);
      writer.startElement("tbody", menu);
      encodeOptionsAsTable(context, menu, selectItems, isOptionGroup);
      writer.endElement("tbody");
      writer.endElement("table");
    }
    else {
      writer.startElement("ul", menu);
      writer.writeAttribute("class", SelectOneMenu.LIST_CLASS, null);
      encodeOptionsAsList(context, menu, selectItems, isOptionGroup);
      writer.endElement("ul");
    }

    writer.endElement("div");
  }

  protected void encodeOptionsAsTable(final FacesContext context, final SelectOneMenu menu,
      final List<SelectItem> selectItems, final boolean isOptionGroup) throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    String var = menu.getVar();
    List<Column> columns = menu.getColums();
    Object value = menu.getValue();

    for (SelectItem selectItem : selectItems) {
      Object itemValue = selectItem.getValue();

      context.getExternalContext().getRequestMap().put(var, selectItem.getValue());

      writer.startElement("tr", null);
      writer.writeAttribute("class", SelectOneMenu.ROW_CLASS, null);
      if (selectItem.getDescription() != null) {
        writer.writeAttribute("title", selectItem.getDescription(), null);
      }

      if (itemValue instanceof String) {
        writer.startElement("td", null);
        writer.writeAttribute("colspan", columns.size(), null);

        if (isOptionGroup) {
          if (selectItem instanceof SelectItemGroup) {
            writer.writeAttribute("class", "ui-selectonemenu-optiongroup-header", null);
          }
          else {
            writer.writeAttribute("class", SelectOneMenu.ITEM_CLASS + " ui-selectonemenu-optiongroup-items",
                null);
          }
        }

        writer.writeText(selectItem.getLabel(), null);
        writer.endElement("td");
      }
      else {
        for (Column column : columns) {
          writer.startElement("td", null);
          column.encodeAll(context);
          writer.endElement("td");
        }
      }

      writer.endElement("tr");
    }

    context.getExternalContext().getRequestMap().put(var, null);
  }

  protected void encodeOptionsAsList(final FacesContext context, final SelectOneMenu menu,
      final List<SelectItem> selectItems, final boolean isOptionGroup) throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    Object value = menu.getValue();

    for (int i = 0; i < selectItems.size(); i++) {
      SelectItem selectItem = selectItems.get(i);
      String itemLabel = selectItem.getLabel();
      itemLabel = isValueBlank(itemLabel) ? "&nbsp;" : itemLabel;

      writer.startElement("li", null);
      if (selectItem instanceof SelectItemGroup) {
        writer.writeAttribute("class", " ui-selectonemenu-optiongroup-header", null);
      }
      else {
        if (isOptionGroup) {
          writer.writeAttribute("class", SelectOneMenu.ITEM_CLASS + " ui-selectonemenu-optiongroup-items",
              null);
        }
        else {
          writer.writeAttribute("class", SelectOneMenu.ITEM_CLASS, null);
        }
      }
      if (selectItem.getDescription() != null) {
        writer.writeAttribute("title", selectItem.getDescription(), null);
      }

      if (itemLabel.equals("&nbsp;")) {
        writer.write(itemLabel);
      }
      else {
        if (selectItem.isEscape()) {
          writer.writeText(itemLabel, "value");
        }
        else {
          writer.write(itemLabel);
        }
      }
      writer.endElement("li");

    }
  }

  protected void encodeScript(final FacesContext context, final SelectOneMenu menu) throws IOException {
    ResponseWriter writer = context.getResponseWriter();
    String clientId = menu.getClientId(context);

    startScript(writer, clientId);

    writer.write("$(function(){");
    writer.write("PrimeFaces.cw('SelectOneMenu','" + menu.resolveWidgetVar() + "',{");
    writer.write("id:'" + clientId + "'");
    writer.write(",effect:'" + menu.getEffect() + "'");

    if (menu.getEffectDuration() != 400) {
      writer.write(",effectDuration:" + menu.getEffectDuration());
    }
    if (menu.isEditable()) {
      writer.write(",editable:true");
    }
    if (menu.getOnchange() != null) {
      writer.write(",onchange:function() {" + menu.getOnchange() + "}");
    }

    encodeClientBehaviors(context, menu);

    writer.write("});});");

    endScript(writer);
  }

  protected void encodeSelectItems(final FacesContext context, final SelectOneMenu menu,
      final List<SelectItem> selectItems, final Object values, final Object submittedValues,
      final Converter converter) throws IOException
  {
    for (SelectItem selectItem : selectItems) {
      encodeOption(context, menu, selectItem, values, submittedValues, converter);
    }
  }

  protected void encodeOption(final FacesContext context, final SelectOneMenu menu, final SelectItem option,
      final Object values, final Object submittedValues, final Converter converter) throws IOException
  {
    ResponseWriter writer = context.getResponseWriter();
    String itemValueAsString = getOptionAsString(context, menu, converter, option.getValue());
    boolean disabled = option.isDisabled();

    Object valuesArray;
    Object itemValue;
    if (submittedValues != null) {
      valuesArray = submittedValues;
      itemValue = itemValueAsString;
    }
    else {
      valuesArray = values;
      itemValue = option.getValue();
    }

    boolean selected = isSelected(context, menu, itemValue, valuesArray, converter);
    if (option.isNoSelectionOption() && values != null && !selected) {
      return;
    }

    String elem = "option";
    if (option instanceof SelectItemGroup) {
      selected = false;
    }

    writer.startElement(elem, null);

    writer.writeAttribute("value", itemValueAsString, null);
    if (disabled) {
      writer.writeAttribute("disabled", "disabled", null);
    }
    if (selected) {
      writer.writeAttribute("selected", "selected", null);
    }

    if (option.isEscape()) {
      writer.writeText(option.getLabel(), "value");
    }
    else {
      writer.write(option.getLabel());
    }

    writer.endElement(elem);
  }

  protected int calculatePanelHeight(final SelectOneMenu menu, final int itemSize) {
    int height = menu.getHeight();

    if (height != Integer.MAX_VALUE) {
      return height;
    }
    else if (itemSize > 10) {
      return 200;
    }

    return -1;
  }

  @Override
  public void encodeChildren(final FacesContext facesContext, final UIComponent component) throws IOException
  {
    // Rendering happens on encodeEnd
  }

  @Override
  public boolean getRendersChildren() {
    return true;
  }

  @Override
  protected String getSubmitParam(final FacesContext context, final UISelectOne selectOne) {
    return selectOne.getClientId(context) + "_input";
  }
} 
```

任何提示是什么原因造成的？

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:27:55.723

使用素面 3.5。该版本于上周发布。

# java - 将文件文件夹附加到 jar 中

> ID：11774353
> 
> 赞同：0
> 
> 时间：2012-08-02T09:10:03.223
> 
> 标签：java, jar, netbeans-7

我正在使用 netbeans 7.1.2 开发一个摇摆应用程序。在此，我使用了一些图像文件。图像目录当前位于 dist 文件夹中。我想将这些文件与 jar 文件一起附加，以便我可以将它作为单个（jar）文件携带到任何地方。谁能帮我解决一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:15:23.637

假设您的项目是基于 Maven 的，我会将图像放在`src/main/resources`文件夹中。Maven 会自动将该文件夹中的文件包含到您的 JAR 文件中。

否则，[这篇博文](http://capturevision.wordpress.com/2008/06/28/how-to-embed-resource-files-using-netbeans/)将为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T03:00:11.057

爱伴侣

首先在 Source Packages 下创建一个包（比如图片）

将所有图像复制到此包中（当您创建包时，将在您的项目 src 文件夹中创建一个以您的包名称命名的文件夹，因此将图像复制到其中）

您可以从程序中访问您的图像

```
 URL imageurl = getClass().getResource("/images/imagename");//assuming your package name is images 
        Image myPicture = Toolkit.getDefaultToolkit().getImage(imageurl);
        JLabel piclabel = new JLabel(new ImageIcon( myPicture ));
        piclabel.setBounds(0,0,myPicture.getWidth(null),myPicture.getHeight(null)); 
```

现在使用这个 JLabel piclabel

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T09:20:20.100

简单的方法：您可以将图像文件夹设置为类路径并通过eclipse导出jar文件。

# javascript - jquery延迟执行脚本

> ID：11774357
> 
> 赞同：2
> 
> 时间：2012-08-02T09:10:16.617
> 
> 标签：javascript, jquery

具有以下内容：

```
$('#navMain .nav1').hover(function () {
    $(this).addClass('hover');
    if ($.browser.msie && $.browser.version < 7) 
        $('select').css('visibility', 'hidden');
}, function () {
    $(this).removeClass('hover');
    if ($.browser.msie && $.browser.version < 7) 
        $('select').css('visibility', 'visible');
}); 
```

`addClass('hover')`将鼠标悬停在`$('#navMain .nav1')`元素上后，我需要延迟执行。

我已经尝试过了，但它不起作用：

```
$(this).delay().addClass('hover');
if ($.browser.msie && $.browser.version < 7) 
    $('select').delay().css('visibility', 'hidden'); 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T09:12:17.310

```
setTimeout( function(){

  // your stuff here

}, 500); // delay 500 ms 
```

使用您的代码：

```
$('#navMain .nav1').hover(

  function () {
    setTimeout( function(){
        $(this).addClass('hover');
        if ($.browser.msie && $.browser.version < 7) $('select').css('visibility', 'hidden');
    }, 500); // delay 500 ms
  }, 

  function () {
    $(this).removeClass('hover');
    if ($.browser.msie && $.browser.version < 7) $('select').css('visibility', 'visible');
  }

); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:17:41.383

如果一个简单的 javascript 延迟可以帮助您，您可以执行以下操作：

```
setTimeout(function() {
  // your code here
}, 3000); 
```

具有以下签名： setTimout(functionToExecute, delayInMs);

和文档： [http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

跳跃我帮助你。

# javascript - javascript - 字符串数字 - 从 123,456 转换为 123456

> ID：11774362
> 
> 赞同：1
> 
> 时间：2012-08-02T09:10:27.443
> 
> 标签：javascript

我有一个字符串数字数组，如下所示：“123,556”，“552,255,242”，“2,601”，“242”，“2”，“4”，我想将它们转换为 int 数字，但数字带有“ , 我想先从“123,556”转换为“123556”。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:13:53.183

```
var numbersArray = ["153,32","32,453,23","45,21"];
for (var i = 0; i < numbersArray.length; i++) {
    numbersArray[i] = parseInt(numbersArray[i].replace(',',''));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:14:34.567

```
var str = "552,255,242";
var numbr = parseInt(str.replace(/\,/g,''), 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:13:09.640

只需使用[`split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split), [`join`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)(或[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)) 删除`,`and[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)之后：

```
var number = "123,456";
number = number.split(',').join('');
number = parseInt(number, 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:13:28.627

你可以使用`.replace`方法。

```
"123,556".replace(/,/g, ''); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:14:08.520

试试这个：`string.replace(',', '');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T09:15:43.973

就像是

```
var parseMe(myarray) {
  var out = new Array(myarray.length);
  for (i=0;i<myarray.length;i++){
      var tokens[] = myarray[i].split(",");
      var s = tokens[0] + tokens[1];
      out.push(parseInt(s));
  }
  return out;
} 
```

# javascript - HTML5 运动检测、抓取和滚动

> ID：11774363
> 
> 赞同：2
> 
> 时间：2012-08-02T09:10:32.640
> 
> 标签：javascript, jquery, html

我遵循了几个教程（[http://www.adobe.com/devnet/html5/articles/javascript-motion-detection.html，http://www.html5rocks.com/en/tutorials/canvas/notearsgame/](http://www.html5rocks.com/en/tutorials/canvas/notearsgame/)）并将两者拼接在一起创建了一个游戏（https://github.com/gazzwi86/HTML5-Motion-Detection）。虽然我有一些事情需要通过混合来提高检测质量，但我想知道如何检测抓取和滑动手势，比如浏览网页。

您能否指出一些示例的方向或概述原则，以便我自己尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:30:43.070

我不会去的。需要在客户端进行大量处理才能进行很好的检测。

您可以使用某个阈值简单地跟踪移动对象（如手）（您可以简单地模糊以消除噪音）。用户的背景大多会保持不变，所以你也可以忽略它。然后将图像转换为黑白并尝试将您的移动对象作为一个多边形。

之后我要做的实验——建立一个小神经网络并通过移动我的手自己训练它。

好吧，这只是我如何尝试实施它的 2 美分。以后能听到你的消息真是太好了，你是怎么做到的，结果是什么:)

# javascript - Javascript 性能：为什么遍历数组并检查每个值比 indexOf、搜索和匹配更快？

> ID：11774366
> 
> 赞同：18
> 
> 时间：2012-08-02T09:10:34.177
> 
> 标签：javascript, regex, performance, performance-testing, indexof

这对我来说是一个巨大的惊喜，我想了解这个结果。我[在 jsperf](http://jsperf.com/finding-components-of-a-url)中做了一个测试，它基本上应该接受一个字符串（这是我要检查的 URL 的一部分）并检查是否存在 4 个项目（实际上，这些项目存在于字符串中）。

它以 5 种方式检查：

1.  普通索引；
2.  拆分字符串，然后 indexOf;
3.  正则表达式搜索；
4.  正则表达式匹配；
5.  拆分字符串，循环遍历项目数组，然后检查其中是否有任何匹配它应该匹配的东西

令我惊讶的是，**5 号是 Chrome 21 中最快的**。这是我无法解释的。

在 Firefox 14 中，普通的 indexOf 是最快的，我可以相信。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T10:30:50.120

我也很惊讶，但 Chrome 使用了 v8，这是一个高度优化的 JavaScript 引擎，它可以使用各种技巧。谷歌的人可能拥有最大的 JavaScript 集来测试他们的实现性能。所以我的猜测是会发生这种情况：

1.  编译器注意到该数组是一个字符串数组（类型可以在编译时确定，不需要运行时检查）。
2.  在循环中，由于您使用`===`，因此可以使用内置的 CPU 操作码来比较字符串 ( `repe cmpsb`)。所以没有函数被调用（与任何其他测试用例不同）
3.  在第一个循环之后，所有重要的东西（数组、要比较的字符串）都在 CPU 缓存中。地方统治他们所有。

所有其他方法都需要调用函数，并且局部性可能是正则表达式版本的一个问题，因为它们构建了一个解析树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:59:40.697

我又添加了两个测试：http: [//jsperf.com/finding-components-of-a-url/2](http://jsperf.com/finding-components-of-a-url/2)

单个 regExp 现在最快（在 Chrome 上）。regExp 文字也比转换为 RegExp 的字符串文字快。

# networking - 如何保护密码免受欺骗服务器的侵害

> ID：11774367
> 
> 赞同：0
> 
> 时间：2012-08-02T09:10:34.713
> 
> 标签：networking, cryptography, password-protection

我有一个客户端-服务器-应用程序，它允许用户通过网络在服务器上运行任何代码。我想保护用户不连接到其他服务器，它的行为就像真实的东西，但是窃取了密码，我该怎么做？不能期望服务器和客户端都可以访问互联网，证书颁发机构是不可能的。有没有其他方法可以验证我正在与之交谈的代码，即使有人获得了源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:56:29.727

您的攻击者是否可能获得对您真实服务器的 root 访问权限？如果没有，那么您可以建立一个自签名证书（如 CodesInChaos 建议的那样）并依靠操作系统权限来防止未经授权的用户读取私钥文件。然后，您可以确信您的客户端仅连接到您的真实服务器（通过 SSL）。

如果攻击者可以获得对您真实服务器的 root 访问权限，那么您将面临许多问题。首先，攻击者可以随意读取进程内存，因此暴露在服务器内存中的任何敏感资料（例如您提到的密码）都可以访问。此外，攻击者可以窃取您的私钥并建立他们自己的服务器（尽管他们为什么会这样做，因为他们可以简单地窥探您的真实服务器内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:13:44.903

最简单的解决方案是使用带有自签名证书的 SSL。然后将服务器的证书硬编码到客户端。大多数 SSL 库都提供了一些方法来滚动您自己的证书验证逻辑，或更改有效 CA 的集合。

这假设您可以将服务器的证书保密。

* * *

原则上， [SRP](http://en.wikipedia.org/wiki/Secure_Remote_Password_protocol)可以作为替代方案。但是你不应该自己实现它，因为很容易犯一些看似有效的细微错误，但却使系统不安全。一些 SSL 库，例如 GnuTLS 支持 SRP。

# symfony - 跨项目实体的 OneToMany 关系 (Symfony2/Doctrine)

> ID：11774370
> 
> 赞同：1
> 
> 时间：2012-08-02T09:10:44.387
> 
> 标签：symfony, doctrine

任何人都知道如何`OneToMany`在 2 个项目中建立关系（假设跨数据库，两者都有自己的项目结构、命名空间和数据库）。

假设我在项目 A 中有一个实体：

**Movie.php（实体项目 A）**

```
class Movie {

    // ... some other properties

    /**
     * @ORM\OneToMany(targetEntity="Moviechild/Project B", mappedBy="movie")
     */
    protected $moviechilds;

    // ... 
```

和项目 B 中的另一个实体：

**Moviechild.php（实体项目 B）**

```
class Moviechild {

    // ...

    /**
     * @ORM\ManyToOne(targetEntity="Movie/Project A", inversedBy="moviechilds")
     * @ORM\JoinColumn(name="movie_id", referencedColumnName="id")
     */
    protected $movie;

    // ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:25:44.843

您必须`ProjectBBundle`在项目 A中实例化`AppKernel`，反之亦然。

然后在属性注释中**使用正确的命名空间：**`targetEntity`

**Movie.php（实体项目 A）**

```
namespace ProjectABundle\Entity;

class Movie {
    /**
     * @ORM\OneToMany(targetEntity="ProjectBBundle\Entity\Moviechild", mappedBy="movie")
     */
    protected $moviechilds;

    // ... 
```

**Moviechild.php（实体项目 B）**

```
namespace ProjectBBundle\Entity;

class Moviechild {
    /**
     * @ORM\ManyToOne(targetEntity="ProjectABundle\Entity\Movie", inversedBy="moviechilds")
     * @ORM\JoinColumn(name="movie_id", referencedColumnName="id")
     */
    protected $movie;

    // ... 
```

# powershell - 使用 powershell 扫描错误日志以查找过去 24 小时内的错误

> ID：11774371
> 
> 赞同：1
> 
> 时间：2012-08-02T09:10:45.143
> 
> 标签：powershell, scripting

我正在使用一个 powershell 脚本，该脚本将扫描某个目录中的大量日志文件，然后将所有有错误的行输出到单独的文本文件甚至更好的 html 文件中。有什么想法我能做到这一点吗？

提前致谢！

干杯

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-18T22:14:47.127

```
$files = Get-ChildItem "D:\TEMP\*.log"
foreach ($file in $files) 
{
    $count=Get-Content $file.fullName | Select-String "Fail|error|warning" 
    if(@($count).count -gt 0) 
    {
        $msg = new-object Net.Mail.MailMessage
        $msg.From = "ZZZ@YYY.com"
        $msg.To.Add("ME@YYY.com,YOU@YYY.com")
        $msg.Subject = "ERROR: FTP"
        $msg.Body = "The attached SFTP Log has errors. Please look ASAP and Fix."
        $smtpServer = "smtp.office365.com" 
        $smtp = New-Object Net.Mail.SmtpClient($SmtpServer, 587) 
        $smtp.EnableSsl = $true 
        $smtp.Credentials = New-Object System.Net.NetworkCredential("ADMIN@YYY.com", "XXXXXXXXX"); 
        $att = new-object Net.Mail.Attachment($file.fullName)
        $msg.Attachments.Add($att)
        $smtp.Send($msg)
        $att.Dispose()
        write-host $file.fullName
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:21:27.060

这将获取所有包含“错误”一词的行并将这些行导出到文本文件：

```
Get-ChildItem <path> -Filter *.log | 
Select-String -Pattern error -AllMatches -SimpleMatch | 
Foreach-Object {$_.Line} | 
Out-File .\errors.log 
```

# xcode4 - 使用 UILocalNotification 同时在应用程序图标上设置 appIconBadgeNumber

> ID：11774372
> 
> 赞同：0
> 
> 时间：2012-08-02T09:10:45.830
> 
> 标签：xcode4

我正在尝试将 appIconBadgeNumber 与本地通知一起设置为 [localNotif setApplicationIconBadgeNumber:count]; 但是一旦应用程序进入后台，当通知在其预定时间触发时，徽章就会出现。

请帮助我是 iPhone 开发的初学者。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:18:28.150

您必须在通知触发时设置徽章。在您的应用程序委托中，实现此方法：

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {
    notif.applicationIconBadgeNumber = 1;
} 
```

当您的应用程序在后台时触发通知时，还要为这种情况做好准备：

```
- (BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)opt {

    // ... 

    UILocalNotification *notif = [opt objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    notif.applicationIconBadgeNumber = 1;

    // ...

    return YES;
} 
```

# javascript - 用于传输的 Json 压缩

> ID：11774375
> 
> 赞同：3
> 
> 时间：2012-08-02T09:10:52.730
> 
> 标签：javascript, json, compression, transfer

我想知道基于 javascript 的 json 压缩的当前状态是什么。当前是否有任何可用的库允许通过用单个字符替换长名称或其他方法来压缩 json？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:27:17.890

有人[在 Javascript 中实现了 HPack](https://github.com/WebReflection/json.hpack/blob/master/src/javascript/json.hpack.js)，假设您的数据集是同质的，它可以真正提高 JSON 数据集的大小。

由于您的重点是传输而不是存储，因此不要忘记使用类似的东西`gzip`并最小化您的 JSON。这些应该是增加更多压缩开销之前的第一步。

# forms - cakephp 将变量传递给另一个控制器

> ID：11774379
> 
> 赞同：-2
> 
> 时间：2012-08-02T09:11:01.653
> 
> 标签：forms, session, cakephp

我希望能指出正确的方向。我想将变量从一个控制器传递到另一个控制器。

我想做的是让一个人注册一个企业，然后他们被带到一个表格来注册一个用户。业务对于用户来说是不同的控制器/表，但是用户需要业务的 id/主键作为用户表中的外键。我将如何更改控制器并携带外键？

业务表的主键是数据库中的自动生成/自动增量 int 我不确定如何处理这个问题，但感觉它与会话数据有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:29:38.153

为什么不在 url 中传递 id？我会这样做：

*   显示`/business/add`。这是用于创建“业务”的形式。
*   在您的控制器中保存业务后，重定向到`/business/add_user/123`（其中“123”是您的业务的 id）。此页面显示并保存用户。由于您已在 url 中传递了 business_id，因此您必须`$this->request->data`在保存用户之前将其作为外键手动添加到 中。

当然，在`/business/add_user/123`您的控制器内部应该验证几件事：检查是否在 url 中将 business_id 作为参数传递，检查业务是否存在，也许检查连接的用户是创建业务的用户，等等

希望这可以帮助

# wpf - DataGrid 中的附加属性

> ID：11774380
> 
> 赞同：1
> 
> 时间：2012-08-02T09:11:07.050
> 
> 标签：wpf, datagrid, attached-properties

我正在使用附加属性将文本框和文本块的输入限制为数字或字母。现在我想将此附加属性应用于 datagridtextcolumn。我尝试了以下方法：

```
<DataGridTextColumn Header="Max" Width="50"
                                  Binding="{Binding Path=Max, Mode=TwoWay"
                                  Helper:InputService.NumericOnly="True"> 
```

和这样的：

```
 <DataGridTextColumn.ElementStyle>
                      <Style>
                        <Setter Property="Helper:InputService.NumericOnly" Value="True"/>
                      </Style>
                </DataGridTextColumn.ElementStyle> 
```

但它不起作用。我该怎么做？

我的 InputService 包含 NumericOnly 属性：

```
 public static readonly DependencyProperty NumericOnlyProperty =          DependencyProperty.RegisterAttached(
     "NumericOnly",
     typeof(bool),
     typeof(InputService),
     new UIPropertyMetadata(false, OnNumericOnlyChanged));

public static bool GetNumericOnly(DependencyObject d)
{
  return (bool)d.GetValue(NumericOnlyProperty);
}

public static void SetNumericOnly(DependencyObject d, bool value)
{
  d.SetValue(NumericOnlyProperty, value);
}

private static void OnNumericOnlyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
  bool isNumericOnly = (bool)e.NewValue;

  if (d is TextBox)
  {
    var textBox = (TextBox)d;

    if (isNumericOnly)
    {
      textBox.PreviewTextInput += BlockNonDigitCharacters;
      textBox.PreviewKeyDown += ReviewKeyDown;
    }
    else
    {
      textBox.PreviewTextInput -= BlockNonDigitCharacters;
      textBox.PreviewKeyDown -= ReviewKeyDown;
    }
  }
  else if (d is TextBlock)
  {
    var textBlock = (TextBlock)d;

    if (isNumericOnly)
    {
      textBlock.PreviewTextInput += BlockNonDigitCharacters;
      textBlock.PreviewKeyDown += ReviewKeyDown;
    }
    else
    {
      textBlock.PreviewTextInput -= BlockNonDigitCharacters;
      textBlock.PreviewKeyDown -= ReviewKeyDown;
    }
  }
}

private static void BlockNonDigitCharacters(object sender, TextCompositionEventArgs e)
{
  foreach (char ch in e.Text)
  {
    if (Char.IsDigit(ch))
    {
      e.Handled = true;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:07:50.293

好的，这对我有用：

```
 <DataGridTextColumn.EditingElementStyle>
            <Style TargetType="TextBox">
              <Setter Property="Helper:InputService.NumericOnly" Value="True"/>
            </Style>
          </DataGridTextColumn.EditingElementStyle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:36:57.670

您的属性实现只需要在 a`TextBox`或上设置`TextBlock`。我建议您在代码中放置一个断点并检查它实际设置的控件类型 - 我怀疑您会发现它是您的单元格的父容器，而不是文本控件本身。

编辑：根据您的评论，您可能希望在绑定中包含以下内容：

```
Binding="{Binding Path=Max, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
```

这将导致绑定在每次属性更改时刷新，其中大多数输入控件的默认设置是在控件失去焦点时触发。

# java - 如何从 XML 文件中动态读取数据

> ID：11774381
> 
> 赞同：0
> 
> 时间：2012-08-02T09:11:11.343
> 
> 标签：java, xml-parsing

我需要动态地从 xml 文件中读取数据。我有 70 个标签名称以行的形式读取和存储数据。通过查看上面的代码，我可以根据需要读取数据，但是如何使用 getTagValue( *,* ) 手动编写所有标记名，如何将数据动态检索到 getTagValue( *,* ) 中。我在上面的链接中发布了一些我尝试过的代码

```
public class ParseXML {

    public static void main(String argv[]) {

      try {

        File fXmlFile = new File("data/Hotel.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println(doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("staff");
        System.out.println("-----------------------");

        for (int i = 0; i < nList.getLength(); i++) {

           Node nNode = nList.item(i);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) nNode;

              String firstname=getTagValue("firstname", eElement);
              String lastName=getTagValue("lastname", eElement);
             String nickname=getTagValue("nickname", eElement);
             String salary=getTagValue("salary", eElement);
             System.out.println(firstname+" ," + lastName+" ," + nickname+" ," + salary);
           }
        }
      } catch (Exception e) {
        e.printStackTrace();
      }
  }

  private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
  }

} 
```

[如何在 Dom 解析器中修改 XML 数据](https://stackoverflow.com/questions/11666140/how-to-modify-xml-data-in-dom-parser)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:06:43.583

有没有办法将标签名称动态生成到私有静态字符串`getTagValue(String sTag, Element eElement)` `"stag"`中，而不是手动声明`"firstName","lastName","nickName","Salary"`到

```
String firstname=getTagValue("firstname", eElement);           
String lastName=getTagValue("lastname", eElement);             
String nickname=getTagValue("nickname", eElement);              
String salary=getTagValue("salary", eElement); 
```

听说我声明了 4 个标记名称，如果我有 150 个标记名称，它真的很难手动编写 150 个标记名称。有没有办法动态生成“stag”

# castle-windsor - 在 NServiceBus 下管理 Windsor 中的 RavenDb 会话

> ID：11774386
> 
> 赞同：5
> 
> 时间：2012-08-02T09:11:44.367
> 
> 标签：castle-windsor, nservicebus, ravendb

我在 MVC 4 项目中使用 NServiceBus (3.2.2)、RavenDB (1.2.2017-Unstable) 和 Windsor (3.0.0.4001)。

我有一个处理 3 个不同消息的 IHandleMessages 类，它需要一个 IDocumentSession，因此定义了一个属性，例如：

```
public IDocumentSession DocumentSession { get; set; } 
```

我已经从 NServiceBus 的[网站复制了 RavenDbUnitOfWork 实现](http://nservicebus.com/UnitOfWorkImplementationForRavenDB.aspx)

我在 Windsor 容器中注册了 IDocumentStore、IDocumentSession 和 IManageUnitsOfWork，如下所示：

```
container.Register(
            Component
                .For<IManageUnitsOfWork>()
                .ImplementedBy<RavenUnitOfWork>()
                .LifestyleTransient()
            );
container.Register(
            Component
                .For<IDocumentStore>()
                .UsingFactoryMethod(k => DocumentStoreHolder.DocumentStore)
                .LifestyleSingleton(),
            Component
                .For<IDocumentSession>()
                .UsingFactoryMethod(k => k.Resolve<IDocumentStore>().OpenSession())
                .LifestyleTransient()
            ); 
```

NServiceBus 配置为使用我的容器：

```
Configure.With()
         .CastleWindsorBuilder(container); 
```

我遇到了 UnitOfWork 和消息处理程序接收 DocumentSession 的不同实例的问题。这意味着存储在消息处理程序中的会话中的对象不会被保存，因为 SaveChanges() 是在不同的 DocumentSession 上调用的。

删除 Transient 生活方式会导致不同类型的问题，这会导致在从 RavenDb 更新对象时出现并发/冲突，因为（可能）消息处理程序不断获取 DocumentSession 的相同实例，该实例包含更新对象的缓存版本。

**更新：**

正如建议的那样，我尝试将 Windsor 中 IDocumentSession 的注册更改为 Scope 生活方式，如下所示：

```
Component
    .For<IDocumentSession>()
    .UsingFactoryMethod(k => k.Resolve<IDocumentStore>().OpenSession())
    .LifestyleScope() 
```

当容器尝试解析 MVC 控制器时，这会导致异常，说找不到范围，并询问我是否忘记调用 BeginScope()。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T18:44:56.237

您需要有每个消息的范围，而不是瞬态或单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:36:49.957

问题是在同一容器中共享 IDocumentSession 时，在 asp.net mvc 网站中使用 nservicebus 时，您需要不同的生活方式。

对于 ASP.NET MVC，您需要 PerWebRequest 生活方式，对于 NServiceBus，您需要 Scoped 生活方式。

为此，我在城堡 contrib 项目中使用了混合生活方式代码： [https ://github.com/castleprojectcontrib/Castle.Windsor.Lifestyles/tree/master/Castle.Windsor.Lifestyles](https://github.com/castleprojectcontrib/Castle.Windsor.Lifestyles/tree/master/Castle.Windsor.Lifestyles)

从 ASP.NET 上下文调用时，它使用 WebRequestScopeAccessor。对于 NServicebus，您需要 LifetimeScopeAccessor。这不在 contrib 项目中，但很容易添加：

```
public class HybridPerWebRequestLifetimeScopeScopeAccessor : HybridPerWebRequestScopeAccessor
{
    public HybridPerWebRequestLifetimeScopeScopeAccessor()
        : base(new LifetimeScopeAccessor())
    {
    }
} 
```

在您的注册码中，您需要以下内容：

```
container.Register(Component.For<IDocumentSession>().LifestyleScoped<HybridPerWebRequestLifetimeScopeScopeAccessor>().UsingFactoryMethod(() => RavenDbManager.DocumentStore.OpenSession())); 
```

这是我在切换到 nservicebus 之前使用的 Rhino Service Bus 的实现：

[https://gist.github.com/4655544](https://gist.github.com/4655544)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:15:27.903

我假设您的 mvc 控制器直接依赖于 IDocumentStore。您需要在来自网络的每个请求之前调用 container.BeginScope()。您可以将其作为操作过滤器属性[http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx)或作为控制器本身的 AOP 方面[http://cangencer。 wordpress.com/2011/06/02/asp-net-mvc-3-aspect-oriented-programming-with-castle-interceptors/](http://cangencer.wordpress.com/2011/06/02/asp-net-mvc-3-aspect-oriented-programming-with-castle-interceptors/)。

# java - java 字符串值应该在 double.valueof(..) 中使用

> ID：11774388
> 
> 赞同：0
> 
> 时间：2012-08-02T09:11:48.593
> 
> 标签：java, string, double

我正在创建 .jsp 页面并收到有关它的错误；

```
 String energyv="";

        int number= Integer.parseInt(request.getParameter("number"));
        energyv="_"+number;
    *
    *
    *
        if (tokenNumber == 2 && found && value1.equals("")) {
        value1= nextToken;
        if (value1.equals(""))
        found = false;

        }

        if (tokenNumber == 3 && found && value2.equals("")) {
        value2= nextToken;

        }

*
*
*
        Double activeTotalLong = Double.valueOf( "value" + energyv );

*
*
* 
```

当尝试这样做时，我收到了 tomcat 错误；

> 2012 年 8 月 2 日 11:17:30,097 错误 http-8080-4 org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/PlantVisorPRO].[jsp] - Servlet.service() for servlet jsp throw异常 java.lang.NumberFormatException：对于输入字符串：“value2”在 sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1224) 在 java.lang.Double.valueOf(Double.java:475)

Java 可以创建我的值（如 value2 或 value1），但我该如何解决字符串问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:13:27.490

```
Double activeTotalLong = Double.valueOf( "value" + energyv ); 
```

此方法采用字符串中表示的有效数字。

“value2”不是有效的数字格式。

Double.valueOf() 的示例用法：

```
Double d;
d = Double.valueOf("23.72");
d = Double.valueOf("-1.247002");
d = Double.valueOf("1e9"); // e  =    *10^() 
```

* * *

因此，您要做的是获取`value2`or的值`value1`。你实际上写的是

```
 "value" + 2
=  "value2"    // This is a string! not a variable! 
```

所以，要解决这个问题，有两种选择：

*   使用数组
*   使用 if-else

* * *

使用数组：

```
String values[] = new String[2];
values[0] = value1;
values[1] = value2;
Double.valueOf(values[energyv - 1]); 
```

使用 if-else：

```
Double activeTotalLong;
if (energyv == 1)
{
    activeTotalLong = Double.valueOf(value1);
} else if (energyv == 2)
{
    activeTotalLong = Double.valueOf(value2);
} 
```

# android - Android :: 两个选项卡中的一项活动？

> ID：11774390
> 
> 赞同：0
> 
> 时间：2012-08-02T09:12:02.243
> 
> 标签：android, android-tabhost

> 我正在处理选项卡活动。我有一项活动作为一个选项卡的选项卡内容。我还需要在另一个选项卡中使用相同的内容。所以我将单个活动设置为两个选项卡内容。但是当我运行我的代码时。如果我在之后选择 TAB1，我将选择 TAB2。我再次回到 TAB1。无论像在edittext中输入名称这样的事件都反映在TAB2中而不是TAB1中。我不知道它为什么会发生。

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:37:21.267

你还没有提到你正在做什么**onTabChanged**即。无论您是否再次开始该活动。

我认为每次当你选择一个选项卡时，你都在盯着一个活动。

```
 startActivity(intent); 
```

**因此，无论您在Tab2**下对该活动所做的任何更改，都不会在您再次开始该活动时反映在**Tab1下的该活动。**

如果您每次都在**ontabchanged**开始该活动，那么您必须保存您在任何选项卡下所做的更改。

由于您没有清楚地提到您在做什么，所以如果您在做其他事情，请告诉我。

# debugging - Sicstus Prolog：在调试期间显示当前绑定

> ID：11774394
> 
> 赞同：1
> 
> 时间：2012-08-02T09:12:42.930
> 
> 标签：debugging, prolog, sicstus-prolog

我对 Prolog 很陌生，一直在使用 Sicstus 来帮助调试我的代码。在使用 单步执行查询时，有没有办法查看所有绑定`trace/0`？或者在这些步骤中是否有其他方法可以打印出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:27:53.300

如果您使用[SPIDER IDE](http://www.sics.se/sicstus/spider/) ，这将自动完成。您还可以在[Emacs 模式下](http://www.sics.se/sicstus/docs/latest4/html/sicstus.html/Emacs-Interface.html)运行 SICStus 时显示绑定，最后，调试器可以使用[“v”调试器命令](http://www.sics.se/sicstus/docs/latest4/html/sicstus.html/Debug-Commands.html)打印绑定。

并非所有变量都可用，因为某些变量可能会因编译器优化而消失。如果这是一个问题，您可以使用 Consult/1 来运行解释的代码。这速度较慢，但​​有时会在调试器中提供更多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T13:51:16.557

如果将 Sicstus 与 Emacs 一起使用，那么`C-c C-g`将打开一个缓冲区，当您使用跟踪单步执行时，该缓冲区将显示 prolog 绑定

# php - 这是使用 .post 的好方法吗？

> ID：11774395
> 
> 赞同：1
> 
> 时间：2012-08-02T09:12:46.437
> 
> 标签：php, jquery, mysql, .post

我做了一些代码。我正在使用 noty little [framework](http://needim.github.com/noty/)。

```
 <script type="text/javascript">
function generateNormal(type, text, layout)
{
    if (typeof(layout)==='undefined') layout = 'topRight';
    var n = noty(
    {
        text: text,
        type: type,
        dismissQueue: true,
        theme: 'default',
        layout: layout
   }
   );    
}
function generateButtonDelete(id)
{
    if (typeof(layout)==='undefined') layout = 'topRight';
    var n = noty(
    {
        text: 'Are you sure you want to delete the record?',
        type: 'alert',
        dismissQueue: true,
        theme: 'default',
        layout: 'center' ,
        buttons: [
                  {addClass: 'btn btn-primary', text: 'Ok', onClick: function($noty) {
                    $noty.close();
                    $.post("delete.php", {id: id },
                            function(data) {
                                if (data)
                                {
                                    generateNormal('success', 'The record is deleted with succes!')       
                                }
                                else
                                {
                                    generateNormal('error', 'There is a problem with the database, please try again.')
                                }
                            });                    
                  }
                  }
    ]
   }
   );    
}

</script> 
```

上面的代码将被 PHP 生成的表格使用：

```
<table>
<tr>
    <th>
        Delete
    </th>
    <th>
        ID
    </th>
    <th>
        Description 
    </th>
</tr>
<!--  This section will be created by PHP -->
<tr>
    <td>
        <a href="#" onclick="generateButtonDelete(1)">Delete</a>
    </td>
    <td>
        1
    </td>
    <td>
        Description row 1 
    </td>
</tr>
    <tr>
    <td>
        <a href="#" onclick="generateButtonDelete(2)">Delete</a>
    </td>
    <td>
        2
    </td>
    <td>
        Description row 2 
    </td>
</tr>
<!--  End of section that will be create by PHP --> 
```

在 delete.php 文件中，删除记录的查询将使用 PHP 执行。如果查询执行好与否，则回显真或假。

该代码在控制台中运行完美，没有任何错误。但我不确定这是否安全，这只是一个概念证明。html 和 PHP 页面将使用登录脚本进行保护。

我希望有人能告诉我这是否安全？

对不起，我的英语不好。

编辑：我做了一些 PHP 代码。但这只是概念证明，所以我不测试代码，但 Eclipse 不会给出任何错误。

```
 <?php 
if (isset($_POST['id']))
{
    if (is_int($_POST['id']))
    {
        if ($_POST['id'] > 0)
        {
            $con = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');
            $sql = "DELETE FROM table_name WHERE id=?";
            $q = $con->prepare($sql);
            $execution = $q->execute(array($_POST['id']));

            if ($execution) echo true;
            else echo false;
        }   
        else echo false;
    }
    else echo false;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:36:10.373

就 SQL 注入而言，您的代码是安全的，您可以像这样整理那些 if else 语句：

```
if (isset($_POST['id']) && (int) $_POST['id'] > 0) { 
```

我看到的唯一问题是没有检查是否*允许*用户删除记录，我猜你那里也有一些会话逻辑，也许检查当前用户的查询是所有者/管理员您要删除的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:18:07.447

$.post() 用法对我来说似乎没问题，您遵循它的主要（推荐）用法 - 将数据发布到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:26:31.523

您使用`$.post()`.

在`delete.php`您必须确保`$_POST['id']`在使用它之前以某种方式对您的设备进行消毒，例如在 MySQL 查询中。

# git - Git推送错误：无法取消链接旧（权限被拒绝）

> ID：11774397
> 
> 赞同：247
> 
> 时间：2012-08-02T09:12:51.153
> 
> 标签：git, git-push, git-checkout

在远程服务器中，我设置了一个接收后挂钩，以便对我的存储库进行 git checkout：

```
#!/bin/sh
GIT_WORK_TREE=/var/www/<website> git checkout -f 
```

但是当我从本地机器推送到服务器中的 git 存储库时，我收到以下错误消息：

```
remote: error: unable to unlink old '<file>' (Permission denied) 
```

这出现了很多次，几乎每个文件都有一条错误消息。

但是我有一个可以使用 git 更改的 README.txt 文件，以下是它的权限：

```
-rw-r--r--  1 <serverusername>  <serverusername>  2939 Aug  2 10:58 README.txt 
```

但是具有完全相同所有者和相同权限的其他文件给了我这个错误。

在另一个网站的另一个本地存储库中，我以我的本地计算机用户名作为所有者的文件，当我推送到远程服务器时，它尊重文件的远程服务器所有者并且像魅力一样工作。

显然这似乎是一个与权限相关的错误，但我找不到修复它的方法，有什么建议吗？

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2012-08-02T09:14:46.243

当您必须取消链接文件时，您必须对目录具有权限'w'，文件在哪个文件中，而不是文件...

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2016-01-04T09:32:35.003

```
sudo chmod -R ug+w .; 
```

此命令将解决此问题。它授予文件夹的写权限。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2015-10-16T21:44:18.840

如果您使用的是任何 IDE，则问题很可能是某个进程使用了​​该文件。就像您的 tomcat 可能正在使用该文件一样。尝试识别该特定进程并关闭它。那应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2017-10-29T17:56:06.500

我认为问题可能出在文件夹的所有权上，因此将其设置为当前用户所有权

```
sudo chown -R your_login_name /path/to/folder 
```

您可以在 [此处][1] 找到解决方案

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2020-04-09T02:46:32.807

```
sudo chown -R $USER:$USER . 
```

为我完成了这项工作。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-01-16T15:42:37.603

我遇到了同样的问题，上面的解决方案都不适合我。我删除了有问题的文件夹。然后：

```
git reset --hard 
```

删除任何挥之不去的文件以清理 git 状态，然后执行以下操作：

```
git pull 
```

它终于奏效了。

注意：例如，如果该文件夹是包含构建文件的公用文件夹，请记住重新构建文件

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-11-15T21:35:59.223

FWIW - 我有一个类似的问题，我不确定这是否缓解了它（超出了权限模式）：关闭正在使用这个问题的分支的 Eclipse。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-05-11T15:49:37.137

这是一个老问题，但这可能对 Mac 用户有所帮助。

如果您手动从 Time Machine 复制文件，而不是通过 Time Machine 恢复它们，它会将[ACL](http://www.techrepublic.com/blog/apple-in-the-enterprise/introduction-to-os-x-access-control-lists-acls/)添加到所有内容，这可能会弄乱您的权限。

例如，[这篇文章](http://dreamlight.com/how-to-fix-mac-os-x-file-permissions/)中的“如何修复 Mac OS X 文件权限”部分显示“每个人”都有自定义权限，这一切都搞砸了：

[![错误的权限，来自 http://dreamlight.com/how-to-fix-mac-os-x-file-permissions](../Images/082dc51e0c0f863b5152f06cfb72b081.png)](https://i.stack.imgur.com/tL9Es.png)

您需要从这些目录/文件中删除 ACL。[这个超级用户的回答](https://superuser.com/a/299912)进入了它，但这里是命令：

`sudo chmod -RN .`

然后，您可以确保您的目录和文件具有适当的权限。我`750`用于目录和`644`文件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-10-24T19:40:57.900

```
git reset --hard 
```

为我工作

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-07-28T12:58:10.900

当我运行服务器（在 Intellij 中）时，我收到此错误和其他奇怪的 git 错误。停止服务器并重新尝试 git 命令经常为我修复它。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-03-09T04:47:33.463

有些文件是写保护的，即使 git 也无法覆盖它。更改文件夹权限以允许写入，例如 sudo chmod 775 foldername

然后执行

```
git pull 
```

再次

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-09-06T07:03:45.373

检查文件夹的权限后，744 没问题。我的 WordPress 网站上安装的**插件有问题。**该插件已经迷上了我怀疑的玉米工作。

用一个简单的`sudo it can fix the issue`

```
sudo git pull origin master 
```

你让它工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-05-13T19:15:41.707

拉动可能会产生局部变化。

添加未跟踪的文件：

> 混帐添加。

存储更改。

> 混帐藏匿

删除本地更改。

> git 存储下降

使用 sudo 权限拉取

> sudo git pull 远程分支

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-08-08T14:41:27.930

还要记得检查根目录本身的权限！

你可能会发现：

```
drwxr-xr-x  9 not-you www-data  4096 Aug  8 16:36 ./
-rw-r--r--  1     you www-data  3012 Aug  8 16:36 README.txt
-rw-r--r--  1     you www-data  3012 Aug  8 16:36 UPDATE.txt 
```

并且会弹出“权限被拒绝”错误。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-10T21:57:44.873

我带着礼物来了

```
sudo chown -R $USER:$USER 
```

# java - Java正则表达式进入无限循环

> ID：11774398
> 
> 赞同：0
> 
> 时间：2012-08-02T09:12:50.877
> 
> 标签：java, regex

我有一段我正在尝试应用正则表达式。不幸的是，它进入了一个无限循环。你能告诉我这个正则表达式有什么问题吗？

正则表达式，

```
(([A-Z]\w*[\s\.\u0026]*){1,}\s(\d{4})|(\d{4})\s([A-Z]\w*[\s\.\u0026]*){1,})\s(\(\d+\))\s(\d+) 
```

段落，

> 鉴于 LS Meena 博士，科学家 C Gr。IV(2) 根据 BOYSCAT 奖学金在美国逗留期间根据第 815.04(4)(A) 节侵犯知识产权罪被定罪，并被判处在奥兰治县监狱服刑 24 天美国佛罗里达州奥兰治县第九司法巡回法院巡回法院自 2005 年 3 月 22 日起送达 24 天。

你能告诉我有没有什么工具可以告诉我写的正则表达式是否有漏洞？

谢谢，哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:59:38.440

这看起来像一个“病态”正则表达式，即由于重复重复，它会遭受灾难性的回溯，例如`([A-Z]\w*[\s\.\u0026]*){1,}`.

此处解释了灾难性回溯：[http ://www.regular-expressions.info/catastrophic.html](http://www.regular-expressions.info/catastrophic.html)

# java - Java 中的 OutOfMemoryError 行为

> ID：11774399
> 
> 赞同：0
> 
> 时间：2012-08-02T09:12:53.367
> 
> 标签：java

我一直认为`OutOfMemoryError`重启JVM。
但是我看到了一种行为，这种行为`OutOfMemoryError`没有从代码中捕获（实际上我什至不知道这是否可能）
并且`JVM`继续（尽管产生了核心转储）。
谁能帮我理解这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:17:45.373

`OutOfMemoryError`和其他任何情况一样是一个例外。它当然不会重新启动 JVM。它可能会导致它发生的线程结束，但只有当它没有被任何地方捕获时才会发生这种情况。您可能看到的不是核心转储，而只是捕获的异常的堆栈跟踪及其使用`e.printStackTrace()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:59:46.413

OutOfMemoryError 向一个线程报告其内存分配失败。

```
int count = 0;
long start = System.currentTimeMillis();
for (int i = 0; i < 10000000; i++) {
    try {
        long[] longs = new long[Integer.MAX_VALUE];
    } catch (OutOfMemoryError e) {
        count++;
    }
}
long time = System.currentTimeMillis() - start;
System.out.printf("Got %,d OutOfMemoryErrors in %.1f seconds%n", count, time/1e3); 
```

印刷

```
Got 10,000,000 OutOfMemoryErrors in 3.9 seconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:25:16.260

OutOfMemoryError 或任何异常都不会重新启动 JVM。

> 我看到发生 OutOfMemoryError 的行为，这不是从代码中捕获的

----> [OutOfMemoryError](http://docs.oracle.com/javase/6/docs/api/java/lang/OutOfMemoryError.html)继承`java.lang.Error`. 错误描述了可能很少见或难以恢复的环境问题，例如计算机内存不足。您不应该处理 Error 类对象，但您应该使用`Throwable`. 这些应该被视为环境缺陷。

看看[Exception Hierarchy](http://www.sentex.net/~pkomisar/J2/3_Exceptions.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T09:18:02.507

OutOfMemory 只是由于缺少可用内存而无法实例化对象时引发的错误。这不会停止 JVM，就像没有其他异常或错误一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T09:18:30.613

没有 Throwable 会重新启动 JVM。OutOfMemoryError 就像所有其他运行时异常或错误一样：它传播调用堆栈直到它被捕获。如果不是，则线程的 UncaughtExceptionHandler 处理此异常，通常通过终止线程并打印异常的堆栈跟踪。

# unit-testing - Xcode4.4 unittest 没有完成

> ID：11774400
> 
> 赞同：3
> 
> 时间：2012-08-02T09:13:05.353
> 
> 标签：unit-testing, warnings, xcode4.4

> **可能重复：**
> [我的一些单元测试没有在 XCode 4.4 中完成](https://stackoverflow.com/questions/12308297/some-of-my-unit-tests-tests-are-not-finishing-in-xcode-4-4)

我刚刚升级到 XCode 4.4。我创建了一个新项目并包含单元测试。运行测试时，我收到警告“所有测试都没有完成”。

干净安装 xcode 4.4 的同事也有同样的问题。他们没有输入一个代码字母，只创建了一个包含单元测试的新项目。

我们做错了什么，我们该如何解决问题？

![在此处输入图像描述](../Images/f2e341146cf9bc153a6262417c25e68a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:57:07.277

见过这个。它是由代码中的错误（“无法识别的选择器发送到实例”）引起的，导致测试挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:46:56.463

我遇到了同样的问题。我注意到由 Xcode 插入的原始测试类（MyAppTests）没有测试。所以在我的测试输出中

```
Test Suite 'MyAppTests' started at 2012-08-18 14:30:27 +0000
Test Suite 'MyAppTests' finished at 2012-08-18 14:30:27 +0000.
Executed 0 tests, with 0 failures (0 unexpected) in 0.000 (0.000) seconds 
```

然后我插入

```
- (void)testNothing {
} 
```

进入 MyAppTests.m 并且警告消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:23:42.407

请参阅我对这个（重复）问题的回答以获得可能的解决方法：[我的一些单元测试测试没有在 XCode 4.4 中完成](https://stackoverflow.com/questions/12308297/some-of-my-unit-tests-tests-are-not-finishing-in-xcode-4-4/12386018#12386018)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T00:39:45.843

我看到了类似的问题。

场景：使用单元测试创​​建一个新的 iOS 单视图应用程序。Xcode 使用 testExample 方法生成一个 Tests 类。testExample 有一个无条件的 STFail()，所以测试应该总是失败。通过 Command+U 运行测试，Xcode 10 次中有 9 次显示“测试成功”。大约 50% 的时间 10 工具栏还显示“没有问题”，另外 50% 显示错误，同时仍然显示“测试成功”。

查看日志，总是有“所有测试未完成”的警告。

这看起来像是一个时间问题：如果我在 testExample 中添加一个 [NSThread sleepForTimeInterval:3]，测试目标始终如预期的那样失败。

# xaml - Metro App，背景图片导致内存占用过高

> ID：11774402
> 
> 赞同：0
> 
> 时间：2012-08-02T09:13:13.380
> 
> 标签：xaml, microsoft-metro, windows-runtime, winrt-xaml

我有三个嵌套网格，其中前两个具有大小为 291 KB 和 185 KB 的背景图像。当我运行应用程序时，我看到我的应用程序正在使用大约 130 MB 的 RAM。我调试了这个应用程序，看看是什么导致了如此巨大的内存消耗，并意识到当我删除背景图像时，它会减少到大约 25 mb。

难道我做错了什么？您可以在下面找到标记。

```
<Grid Style="{StaticResource LayoutRootStyle}">
    <Grid.Background>
        <ImageBrush ImageSource="Assets/Images/bubbleless_background.png" />
    </Grid.Background>        
        <Grid>
            <Grid.Background>                    
                <ImageBrush ImageSource="Assets/Images/bubble_background_new.png" Stretch="None" AlignmentX="Left" AlignmentY="Top"/>
            </Grid.Background>
        </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:19:12.020

磁盘上图像的大小不是内存大小的度量。

在内存中的大小是`its width * its height in pixels * 4 bytes per pixel`

您正在添加两个图像；根据它们的大小（以像素为单位！），这可能会占用大量内存。

# javascript - 在点击和选择时设置cookie

> ID：11774406
> 
> 赞同：0
> 
> 时间：2012-08-02T09:13:27.050
> 
> 标签：javascript, jquery, cookies

当我网站的访问者单击链接并选中“记住我的选择”复选框时，我想编写一个 cookie。我是 cookie 的新手；最简单的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T09:30:28.293

我会非常有利于使用 jquery。Jquery cookie 插件链接如下：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

代码在这里：

```
$.cookie('the_cookie', 'the_value'); 
```

适用于您的案例的示例应用程序。

[http://jsfiddle.net/B3u7y/](http://jsfiddle.net/B3u7y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:15:39.720

您应该使用 javascript 来执行此操作。看看这个[链接](http://www.quirksmode.org/js/cookies.html)。

或者使用jQuery（我认为更好），有一个[插件](https://github.com/carhartl/jquery-cookie/)！

使用这个插件的 jQuery 方法的一个例子是：

```
$.cookie('the_cookie', 'the_value', { expires: 7 }); 
```

# c - 理解 C 中的递归

> ID：11774409
> 
> 赞同：0
> 
> 时间：2012-08-02T09:13:32.317
> 
> 标签：c, function, recursion

这是一个递归程序。但我不明白在这个节目中发生的事件顺序

```
#include<stdio.h>
count(int);
main() 
{
    int x=5;
    count(x);
}
count(int y)
{
    if(y>0)
    {
        count(--y);
        printf("%d ",y);
    }
} 
```

输出是：

```
4 3 2 1 0 ... 
```

但是我不明白第一次`count(5)`被调用和 count(4) 被调用时会发生什么。控件是否立即转到函数的开头？还是首先打印 的值，`y`然后再转到函数的开头`count()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:27:34.650

它就像一堆盘子。

```
 1       2         3         4          5
                                      count(0)
                            count(1)  count(1)
                  count(2)  count(2)  count(2)
        count(3)  count(3)  count(3)  count(3)
main    main      main      main      main

count(0) prints nothing 
```

转到第 4 步

```
count(1) prints 1 
```

转到第 3 步

```
count(2) prints 2 ... 
```

因此，要获得输出，`4 3 2 1`您需要交换`count(--y)`和`printf("%d",y)`行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:44:51.993

您可以轻松地单步执行代码以查看那里发生了什么，使用稍微编辑的代码：

```
#include<stdio.h>

void count(int);

int main() 
{
    int x=5;
    count(x);
}
void count(int y)
{
    if(y>0)
    {
        count(--y);
        printf("%d ",y);
    }
} 
```

现在看看执行期间会发生什么。查看 gdb 会话：

```
(gdb) b count
Breakpoint 2 at 0x4004ea: file rc.c, line 10.
(gdb) c
Continuing.

Breakpoint 2, count (y=5) at rc.c:10
(gdb) c
Continuing.

Breakpoint 2, count (y=4) at rc.c:10
(gdb) c
Continuing.

Breakpoint 2, count (y=3) at rc.c:10
(gdb) c
Continuing.

Breakpoint 2, count (y=2) at rc.c:10
(gdb) c
Continuing.

Breakpoint 2, count (y=1) at rc.c:10
(gdb) c
Continuing.

Breakpoint 2, count (y=0) at rc.c:10
(gdb) bt
#0  count (y=0) at rc.c:10
#1  0x00000000004004fe in count (y=0) at rc.c:12
#2  0x00000000004004fe in count (y=1) at rc.c:12
#3  0x00000000004004fe in count (y=2) at rc.c:12
#4  0x00000000004004fe in count (y=3) at rc.c:12
#5  0x00000000004004fe in count (y=4) at rc.c:12
#6  0x00000000004004dd in main () at rc.c:6
(gdb) 
```

后面的痕迹讲述了整个历史。看到每个对 count 的调用都是“堆叠的”。但没有人回来。还没有打印任何东西。

现在看看他们是如何一一返回的：

```
(gdb) n
count (y=0) at rc.c:13 /* count(y = 0) returned first , it will not cause any printing*/
(gdb) n
(gdb) n
count (y=1) at rc.c:13 /* count(y = 1) returned second, this will cause printing 0 */
(gdb) n
(gdb) n
count (y=2) at rc.c:13 /* subsequent returns will cause printing of 1,2,3 etc */
(gdb) n
(gdb) n
count (y=3) at rc.c:13
(gdb) n
(gdb) n
count (y=4) at rc.c:13
(gdb) c
Continuing.
0 1 2 3 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:31:33.143

可以通过用它们的等价物替换事物来转换程序：用它们的值替换变量，用函数代码替换函数调用，用选定代码替换常量的条件。例如，

```
main() 
{
    int x=5;
    count(x);
} 
```

-->

```
main() 
{
    count(5);
} 
```

-->

```
main() 
{
    if(5>0)
    {
        count(4);
        printf("%d ",4);
    }
} 
```

-->

```
main() 
{
    count(4);
    printf("%d ",4);
} 
```

-->

```
main() 
{
    if(4>0)
    {
        count(3);
        printf("%d ",3);
    }
    printf("%d ",4);
} 
```

-->

```
main() 
{
    count(3);
    printf("%d ",3);
    printf("%d ",4);
} 
```

--> ... -->

```
main() 
{
    count(0);
    printf("%d ",0);
    printf("%d ",1);
    printf("%d ",2);
    printf("%d ",3);
    printf("%d ",4);
} 
```

-->

```
main() 
{
    if(0>0)
    {
        count(-1);
        printf("%d ",-1);
    }
    printf("%d ",0);
    printf("%d ",1);
    printf("%d ",2);
    printf("%d ",3);
    printf("%d ",4);
} 
```

-->

```
main() 
{
    printf("%d ",0);
    printf("%d ",1);
    printf("%d ",2);
    printf("%d ",3);
    printf("%d ",4);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:23:16.097

嗯，这就像一个算术级数。从**N > 0 开始，每次减一直到达到 0**。更多关于递归的信息（使用阶乘示例，你就会明白）： [http ://en.wikipedia.org/wiki/Recursion](http://en.wikipedia.org/wiki/Recursion)

希望这有帮助。

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:37:45.060

```
void count(int y)
{
    if(y>0)
    {
        printf("%d ",--y);
        count(y);
    }
} 
```

打印 y-1, y-2, ... 0。

如果`y <= 0`，则无事可做。如果`y > 0`，它递减`y`打印递减的值，`y`然后`count`用递减的值调用`y`以打印剩余的值。

另一个例子，这个：

```
void count(int y)
{
    if(y>0)
    {
        printf("%d ",--y);
        count(y);
        printf("amol");
    }
} 
```

打印 y-1, y-2, ... 0 amol...amol (y 次)。

它通过打印 y-1 来实现，然后递归调用`count(y-1)`打印 y-2、..0、amol（y-1 次），然后打印剩余的“amol”。

# javascript - 隐藏字段未从 ASP.net javascript 更新

> ID：11774410
> 
> 赞同：0
> 
> 时间：2012-08-02T09:13:33.713
> 
> 标签：javascript, asp.net

试图通过从后面的 asp.net 代码运行 javascript 来更新隐藏字段值。下面的代码在 asyncfileuploader 上传完成中。

```
If (Not ClientScript.IsStartupScriptRegistered("lowResTrue")) Then
   Page.ClientScript.RegisterStartupScript _
   (Me.GetType(), "lowResTrue", "lowResTrue();", True)
End If 
```

Javascript

```
function lowResTrue() { 
  document.getElementById('lowResHidden').value = 1;
  alert('currval true: ' + document.getElementById('lowResHidden').value);
} 
```

上面的警报应显示“1”。但是当我运行另一个 javascript 时，它并没有将值更改为“1”。好像 ASP.net 的 javascript 触发器没有更新页面。有任何想法吗？

# foreach - 获取 foreach 中的第一个日期 | 聪明的

> ID：11774411
> 
> 赞同：0
> 
> 时间：2012-08-02T09:13:39.077
> 
> 标签：foreach, smarty, feed

目标是制作显示用户活动的活动墙。

```
{foreach from=$activity item=a}

{$a.title}<br/>
{$a.date}<br/>

{/foreach} 
```

我想获得第一个日期以完成此任务：

**今天**

```
Some activity..
Date

Some activity..
Date

Some activity..
Date 
```

**昨天**

```
Some activity..
Date

Some activity..
Date 
```

我会将活动日期与当前日期进行比较，但我不知道如何仅获取一次日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:32:35.033

在 Smarty3 中`{$firstKey = array_shift(array_keys($activity))}`将为您提供数组的第一个键（索引）。然后，您可以通过 访问第一个元素`{$activitiy.$firstKey.date}`。

# biztalk - TPE 的 BAM 延续问题

> ID：11774416
> 
> 赞同：1
> 
> 时间：2012-08-02T09:13:48.513
> 
> 标签：biztalk, biztalk-2010, biztalk-bam

我的解决方案中有 2 个处于父/子关系的编排。父母直接打电话给孩子。子编排调用 WCF 服务，响应将返回给子编排，然后返回给父编排。

我已使用 TPE 在父管弦和子管弦之间使用 Continuation 创建跟踪配置文件。只要不发生错误，这种方法就可以很好地工作，但是在服务中测试错误场景时，行会留在活动表中，因为延续永远不会正确结束。

如果我使用 BAM API，我将能够专门结束子编排的错误处理程序中的延续，但 TPE 似乎没有任何方法可以做到这一点。

任何人都可以建议这种错误处理方案是否可以通过 TPE 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T08:44:18.833

我只是将编排错误处理程序中的第一个形状用作在 TPE 中使用的里程碑。这就像一个魅力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T13:42:06.977

我们在使用延续的编排中使用终止形状时遇到了同样的问题。对于寻找答案的其他人，我们只能在 BAM API 的帮助下解决它。

`Microsoft.BizTalk.Bam.EventObservation.OrchestrationEventStream.EndActivity("act_Name", "interchangeId");`

# c# - 如何在 WinRT 类中装饰事件？

> ID：11774425
> 
> 赞同：1
> 
> 时间：2012-08-02T09:14:08.220
> 
> 标签：c#, events, windows-runtime

在经典类库中，我可以这样做：

```
public event EventHandler Changed
{
  add { decorated.Changed += value; }
  remove { decorated.Changed -= value; }
} 
```

现在，如果我使用 winRT 类，编译器会抱怨这样的代码。我设法修补“添加”，但坚持删除：

```
public event EventHandler Changed
{
  add { return decorated.Changed += value; }
  remove { decorated.Changed -= value; }
} 
```

我应该如何实施删除部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:24:45.350

> [`System.Runtime.InteropServices.WindowsRuntime.EventRegistrationTokenTable<T>`](http://msdn.microsoft.com/en-us/library/hh138412(v=vs.110).aspx)
> 
> 存储委托和事件令牌之间的映射，以支持在托管代码中实现 Windows 运行时事件。
> 
> 当您需要手动管理事件的添加和删除时使用此类型。
> 
> 此表的一个实例存储代表已添加到事件的事件处理程序的委托。要引发事件，请调用`InvocationList`属性返回的委托（如果不是）`null`。每个事件都需要此表的一个实例。

例如，

```
private EventRegistrationTokenTable<EventHandler<Object>> _changed
     = new EventRegistrationTokenTable<EventHandler<Object>>();

public event EventHandler<Object> Changed
{
    add    { return _changed.AddEventHandler(value); }
    remove { _changed.RemoveEventHandler(value);     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T19:44:34.113

一种解决方案是创建一个虚假的支持事件和查找字典，用于存储转发事件所需的信息。例如：

```
public event EventHandler<Object> Changed
{
  add
  {
    // get fake token so that we can return something and/or unsubscribe
    EventRegistrationToken token = _changed.AddEventHandler(value);
    // subscribe and store the token-handler pair
    _otherClass.Event += value;
    _dictionary[token] = value;
    return token;
  }
  remove
  {
    // recall value and remove from dictionary
    _otherClass.Event -= _dictionary[value];
    _dictionary.Remove(value);
    // remove it from the "fake" event
    _changed.RemoveEventHandler(value);
  }
}

private EventRegistrationTokenTable<EventHandler<Object>> _changed;
private Dictionary<EventRegistrationToken, EventHandler<Object>> _dictionary; 
```

或者，从 WinRT 类订阅 CLR 事件可能更容易，只需将 CLR 事件转发给 WinRT 订阅者；或多或少地扭转了您所要求的流程：

```
public WinRtObject()
{
  _otherClass.Event += (sender, o) => OnChanged(o);
}

public event EventHandler<Object> Changed;

private void OnChanged(object e)
{
  EventHandler<object> handler = Changed;
  if (handler != null)
    handler(this, e);
} 
```

# javascript - 如何在 jquery 对话框表单上使用 jquery 验证

> ID：11774433
> 
> 赞同：1
> 
> 时间：2012-08-02T09:14:48.170
> 
> 标签：javascript, jquery, jquery-ui

我在 SO 和其他博客中尝试了很多解决方案，但我似乎无法完成这项工作。

我在这里使用 jQuery Validation 插件和 jQuery ui Dialog。

这是我的对话框：

```
$('#dialog_update').dialog({
        autoOpen: false,
        modal: true,
        width: 600,
        height: 540,
        resizable: false,
        draggable: false,
        buttons: {
            Cancel: function() {
                $( this ).dialog( "close" );
            },
            "Save": function() {
                    $("#dialog_update").submit();
                    $.ajax({
                        url: site_url + "/consultation/update/" + $("#r_id").attr("data"),
                        type: "POST",
                        data: {
                            'date'           : $("#date").val(),
                            'service_type'   : $("#service_type").val(),
                            'new_revisit'    : $("#new_revisit").val(),
                            'admission'      : $("#admission").val(),
                            'emergency'      : $("#emergency").val(),
                            'indigent'       : $("#indigent").val(),
                            'philhealth'     : $("#philhealth").val(),
                            'height'         : $("#height").val(),
                            'height_type'    : $("#height_type").val(),
                            'weight'         : $("#weight").val(),
                            'weight_type'    : $("#weight_type").val(),
                            'bp'             : $("#bp").val(),
                            'chief_complaint': $("#chief_complaint").val(),
                            'diagnosis'      : $("#diagnosis").val(),
                            'medication'     : $("#medication").val(),
                            'remarks'        : $("#remarks").val(),
                            'pid'            : id
                        },
                        dataType: "html",
                        success: function(data) {
                            obj = JSON && JSON.parse(data) || $.parseJSON(data);
                            window.location = obj.url + "/" + obj.id;                            
                        }
                    });                    
            }
        }
    }); 
```

我的验证器：

```
 $("#dialog_update").validate({
        errorContainer: "#errorblock-div1, #errorblock-div2",
        errorLabelContainer: "#errorblock-div2 ul",
        wrapper: "li",
        rules: {
            date: "required"    
        },
        messages: {
            date: "Please enter a date."
        },
        submitHandler: function(form) {
        jQuery(form).ajaxSubmit({
            target: '#client-script-return-data',
            success: function() {
            $('#my-modal-form').dialog('close');
            successEvents('#client-script-return-msg');
            }
        });
        }
    }); 
```

打开对话框的那个：

```
$(".update").click(function() {
        var r_id = $(this).attr('data');
        $("#dialog_update")
            .load(site_url + '/consultation/update_form/' + r_id, createDatepicker)
            .dialog('open');
    }); 
```

我无法进行验证。在某些时候，它会抛出一个错误，比如“设置”上的未捕获类型错误。此外，该对话框有一个日期选择器。

编辑更多信息：使用的插件：[bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) 错误：`Uncaught TypeError: Cannot read property 'settings' of undefined`

`Save`此外，单击按钮时会发生该错误。当该错误显示时，日期选择器将不再关闭。请注意，我只添加了一条规则，`date`因为我仍在测试它。

# c# - 将xml文件转换为pdf c#

> ID：11774435
> 
> 赞同：-1
> 
> 时间：2012-08-02T09:14:56.177
> 
> 标签：c#, xml, pdf

我想在 C# 中将 xml 文件转换为 pdf 文件。

这是我的代码。

```
private void printAllDataReceiveToolStripMenuItem_Click(object sender, EventArgs e)
    {            
        // Load the FO style sheet.
        XslCompiledTransform xslt = new XslCompiledTransform();
        xslt.Load("bookFo.xsl");

        // Execute the transform and output the results to a file.
        xslt.Transform("books.xml", "books.fo");
    }
    private void GeneratePDF(string foFile, string pdfFile)
    {
        FileInputStream streamFO = new FileInputStream(foFile);
        InputSource src = new InputSource(streamFO);
        FileOutputStream streamOut = new FileOutputStream(pdfFile);
        Driver driver = new Driver(src, streamOut);
        driver.setRenderer(1);
        driver.run();
        streamOut.close();
    } 
```

但是，FileInputStream、InputSource 和 FileOutputStream 显示错误

> 找不到类型或命名空间名称“FileInputStream”、InputSource、FIleOutputStream（您是否缺少 using 指令或程序集引用？）

这就是我导入东西的方式（我不知道它的正确术语）

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Timers;
using System.Net.Sockets;
using System.Threading;
using System.Net;

//add data to xml
using System.Xml;
using System.Xml.Linq;
//convert to pdf
using System.Xml.Xsl;
using System.Xml.XPath;

using System.IO; 
```

我一直在互联网上搜索，它说我应该添加这个。

```
using org.apache.fop;
using org.apache.fop.apps;
using org.apache.fop.tools;
using org.xml.sax;
using java.io; 
```

即使我正在使用它，它也会说使用指令或程序集引用缺少相同的错误。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:22:22.063

您可能还需要 dll；我发现这篇文章的答案标记为正确。它解释了如何生成 dll：[在 .NET 应用程序中使用 ApacheFOP v1.0](https://stackoverflow.com/questions/3961476/using-apachefop-v1-0-in-net-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:31:33.053

`FileInputStream`是一个java类。 `java.io`是一个 java 命名空间。您不能在 .NET 中明智地使用这些。您似乎在混合平台，这就是您遇到问题的原因。

`FileInputStream`.NET 中的近似等价物可能是`StreamReader`; 供`FileOutputStream`使用`StreamWriter`。我不确定`InputSource`在做什么，所以我无法在那里提供解决方案。

如果您需要更多帮助，您可能应该包括您正在使用的第 3 方库（因为`Driver`不是标准类）以及您引用的网站的详细信息，因为添加`java.io`.NET 应用程序不太可能在大多数情况下工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:03:40.777

vjslib.dll 不适用于 .NET Framework 4.0。以下是详细信息：[msdn 详细信息](http://social.msdn.microsoft.com/Forums/en-US/visualjsharpgeneral/thread/79d26927-ddcb-4306-afff-47152232d76c/ "这里")

如果您希望您的应用程序正常工作，请将目标框架更改为 .Net Framework 3.0 或 2.0

# mysql - 无法理解在mysql查询中使用聚合函数的结果

> ID：11774437
> 
> 赞同：1
> 
> 时间：2012-08-02T09:15:07.713
> 
> 标签：mysql, sql, database

我的数据库中有一个名为ities 的表，其中包含 id、name、country_id、lat(latitude) 和 lng(longitude)。在我的应用程序中，我获取了用户的位置，然后尝试找出离用户位置最近的城市，所以起初我做了这样的事情：

```
select * , ( sqrt( pow(lat - 31.205 , 2) + pow(lng - 29.907 , 2) ) ) as min_dis from cities 
```

返回的结果如下：

```
+----+------------------+------------+---------------+---------------+----------------------+
| id | name             | country_id | lat           | lng           | min_dis              |
+----+------------------+------------+---------------+---------------+----------------------+
|  1 | Cairo            |         61 | 30.0444196000 | 31.2357116000 |   1.7642055948326205 |
|  2 | Alexandria       |         61 | 31.2000924000 | 29.9187387000 | 0.012723270627083274 |
|  3 | Tanta            |         61 | 30.7865086000 | 31.0003757000 |   1.1707286078440424 |
|  7 | North Coast      |         61 | 28.0488161000 | 34.4371483000 |    5.521208240105792 |
|  8 | Marsa Matruh     |         61 | 31.3543445000 | 27.2373159000 |    2.673858069059212 |
|  9 | Hurghada         |         61 | 27.2578957000 | 33.8116067000 |    5.552079415567052 |
| 10 | Ismailia         |         61 | 30.5964923000 | 32.2714587000 |   2.4415049795085366 |
| 11 | Ain ElSokhna     |         61 | 29.5927778000 | 32.3416667000 |    2.920079170546876 |
| 12 | El Mansoura      |         61 | 31.0409483000 | 31.3784704000 |    1.480587078948432 |
+----+------------------+------------+---------------+---------------+----------------------+ 
```

正如您在结果“亚历山大”中看到的那样，ID=2 的城市是最接近用户位置的城市。

当我尝试这样的事情时：

```
select MIN( sqrt( pow(lat - 31.205 , 2) + pow(lng - 29.907 , 2) ) ) as min_dis from cities; 
```

我明白了：

```
+----------------------+
| min_dis              |
+----------------------+
| 0.012723270627083274 |
+----------------------+ 
```

这对我来说很有意义......但是当我尝试这个时：

```
select * , MIN( sqrt( pow(lat - 31.205 , 2) + pow(lng - 29.907 , 2) ) ) as min_dis from cities; 
```

我明白了：

```
+----+-------+------------+---------------+---------------+----------------------+
| id | name  | country_id | lat           | lng           | min_dis              |
+----+-------+------------+---------------+---------------+----------------------+
|  1 | Cairo |         61 | 30.0444196000 | 31.2357116000 | 0.012723270627083274 |
+----+-------+------------+---------------+---------------+----------------------+ 
```

返回的 min_dis 是正确的，但城市数据不正确！我认为它应该返回“亚历山大”的记录，但它没有..有谁知道为什么？

**编辑：** 这个查询对我有用：

```
SELECT `cities`.* FROM `cities` WHERE ((sqrt(pow(lat - 31.205 , 2) + pow(lng - 29.907 , 2)))= (SELECT MIN((sqrt(pow(lat - 31.205 , 2) + pow(lng - 29.907 , 2)))) AS min_id FROM `cities` )) 
```

并返回：

```
+----+------------+------------+---------------+---------------+
| id | name       | country_id | lat           | lng           |
+----+------------+------------+---------------+---------------+
|  2 | Alexandria |         61 | 31.2000924000 | 29.9187387000 |
+----+------------+------------+---------------+---------------+ 
```

我只想了解为什么这个查询不起作用？

```
select * , MIN( sqrt( pow(lat - 31.205 , 2) + pow(lng - 29.907 , 2) ) ) as min_dis from cities; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:21:09.477

试试这个：

```
select * , ( sqrt( pow(lat - 30.4990 , 2) + pow(lng - 29.4435 , 2) ) ) 
                                                    as min_dis 
from cities 
order by sqrt( pow(lat - 30.4990 , 2) + pow(lng - 29.4435 , 2) ) 
limit 1 
```

您只需在第一个查询中进行 order by 即可获得结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:06:35.037

当您使用聚合函数时，必须使用语句正确指定任何非聚合字段`GROUP BY`，否则您将得到未指定的结果，这通常是聚合排序规则中使用的第一条或最后一条记录。

`MIN(...)`并不意味着从表中返回最小值，它意味着当前组的最小值，由前导字段和`GROUP BY`语句指定。如果您想要整个表的最小值以及其他记录，您确实需要使用 an`ORDER BY`来获取最低记录，就像上面**Joe G Joseph**所做的那样，或者像您所做的那样做并告诉它匹配一个子查询由于`MIN(...)`没有分组字段，整个表的 。

# nginx - 阻止国家/地区的最佳解决方案？

> ID：11774440
> 
> 赞同：-3
> 
> 时间：2012-08-02T09:15:12.397
> 
> 标签：nginx, ip

我有一个网络应用程序，我想在其上屏蔽中国、罗马尼亚等国家/地区。我还想屏蔽大量 VPN，如热点盾、hidemyass、cyberghost 等。我有一个大约 5500 个 CIDR 格式 IP 地址的大列表，总共大约 3.4 亿个 IP 地址。我意识到这是一个巨大的数字，可能效率不高。我的网站每月获得大约 2000 万次页面浏览量。

无论如何，我现在在做什么：我有 nginx，并且只是在服务器指令中包含一个大约 80kb 的大文本文件。它实际上正在工作，并没有真正注意到性能下降。我仍然想知道是否有更有效的方法来做到这一点。

我不想要的：只接受某些国家的访问。数百个国家访问我的网站，所以这是不可行的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:28:36.943

从您的问题中不清楚您使用的是什么 Nginx 配置指令。无论如何，AFAIK 在 Nginx 中做这些事情的最有效方法是[`geo`模块](http://nginx.org/en/docs/http/ngx_http_geo_module.html)——你必须将`include`一个带有 IP 块/范围的大文本文件放入`geo`，但 Nginx 在内部通过这个表进行非常快速的查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:28:48.530

如果列表已经过优化（在适用的情况下进行了排序和范围合并）并且您正在使用最有效的 nginx 方法（例如另一个答案中的 geo 模块），那么您唯一可以做的就是加快速度是创建防火墙条目（iptable 等...），它将计算是否应该在更低级别建立连接，通常是内核并在它们使用资源链上的资源之前停止事物。换句话说，nginx 甚至不需要处理连接并使用它的资源来检查它是否来自正确的国家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T05:51:18.553

如果我是你，我会使用 Peer block-100 的列表来提供帮助。不断更新。此外，如果站点被阻止，但您需要临时访问权限，也允许这样做。

# php - Backbone Sync 返回一个空的 $_POST 数组

> ID：11774448
> 
> 赞同：5
> 
> 时间：2012-08-02T09:15:42.707
> 
> 标签：php, javascript, rest, backbone.js, yii

我正在尝试使用 Backbone 和 Yii 框架做我的第一个 RESTful 应用程序。我对 GET 方法没有任何问题，但我现在坚持使用 POST 方法来创建一个新元素。

我在 Backbone 中有一个 Comment 模型：

```
var commentModel = Backbone.Model.extend({

    urlRoot: "index.php/api/comments",
    idAttribute: 'id',

    defaults: {
        content: "Empty comment",
        status: 1
    }
}); 
```

在我看来，我添加了一个函数来创建一个新的评论，传递来自相关表单的值：

```
on_submit: function(e) {
            var new_comment = new Comment({author_id: this.$('#author_text').val(), content: this.$('#content_text').val(), post_id: this.$("#post_text").val(), status: this.$("#status_text").val()});

         new_comment.save();
        }, 
```

用 Firebug 查看请求似乎没问题，在 POST 选项卡中我可以看到所有值：

```
JSON            
author_id "7"   
content "Epic fail"
post_id "7" 
status "2"

Source 
{"content":"Epic fail","status":"2","author_id":"7","post_id":"7"} 
```

但是在我的 php Api 中 $_POST 变量是空的！

```
foreach($_POST as $var=>$value) {

     if($model->hasAttribute($var))
        $model->$var = $value;
     else
        $this->_sendResponse(500);
} 
```

有人有一些想法吗？阅读 Backbone.Sync 的文档，我知道它应该使用 POST 来创建请求。

我找到了一种从以下位置获取值的解决方法：

```
file_get_contents('php://input') 
```

但是我觉得id不合适...

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T10:25:53.967

从[Backbone.sync 文档](http://backbonejs.org/#Sync)中，

> 使用默认实现，当 Backbone.sync 发送一个保存模型的请求时，它的属性将被传递，序列化为 JSON，并在 HTTP 正文中以内容类型 application/json 发送。

这意味着您不会像在常规形式的帖子中那样接收参数中的数据，而是在 HTTP 响应的正文中接收数据。

你有三个选项来处理这种行为：

1.  修改您的服务器代码以了解 REST 请求，例如，请参阅将[Backbone.js 模型插入 MySQL 数据库](https://stackoverflow.com/questions/10930789/insert-backbone-js-model-into-mysql-database/10931092#10931092)
2.  看看[Backbone.emulateJSON](http://backbonejs.org/#Sync-emulateJSON)是否可以满足您的需求
3.  覆盖[Backbone.sync](http://backbonejs.org/#Sync)并发送数据以更好地适应您的服务器

# android - 更改配置时列表视图项目未正确刷新（旋转手机）

> ID：11774454
> 
> 赞同：1
> 
> 时间：2012-08-02T09:16:08.860
> 
> 标签：android, listview

我有一个列表视图，它的数据源来自网络（相当大的列表）。我正在做的是为列表视图项目提供 2 种不同的布局（只需在该列表上移动一些标签以利用横向模式下的视图宽度）。我不想在旋转手机时重新加载我的活动，所以我在清单文件中设置

```
android:configChanges="orientation" 
```

接下来，我还在我的 Activity 中实现了覆盖方法 onConfigurationChanged() 以帮助我使用新的列表视图项（用于横向模式）更新我的 ListAdapter，如果它在横向（通过检查 newConfiguration.orientation）。我制作了这个 listadapter，调用 notifyDataSetChanged() 并调用 listview.invalidate() 来重新绘制整个 listview。我得到的是一个很大的惊喜：一些项目被更改为新的列表视图项目（在横向模式下），而其他一些列表视图项目没有改变。

我为此花了很多时间，但对此一无所知，请帮助！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:32:07.020

您可以尝试通过处理程序在 onConfigurationChanged() 中执行您正在执行的任何操作吗？

就像是：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    handler.sendEmptyMessageDelayed(1,500);
}   

Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {            
        if(msg.what == 1) {
            // do your onConfigurationChanged Stuff
        }
    }
  }; 
```

在这里，我猜您可能需要在 onConfigurationChanged 之后等待一段时间才能更新您的 ListView

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:54:46.303

`android:configChanges="orientation"`很多时候不是要走的路，正如我所见，你的情况也是如此。

当我遇到类似问题时，我所做的一个非常简单的修复是返回您的列表视图的数据`onRetainNonConfigurationInstance()`并通过调用`getLastNonConfigurationInstance()`在 onCreate 中重新填充您的列表来使用它。你可以做一个空检查（和一个额外的 instanceOf 是安全的）来在从某个地方加载数据之间分叉你的逻辑，或者只是将 getLastNonConfigurationInstance() 转换为你的列表视图的数据变量。

来自我的 onCreate 的示例代码：

```
if (getLastNonConfigurationInstance() == null) {
  catalogUpdater.start(); // start background task of populating your list's contents variable, in my case tempItems
} else {
  tempItems = (ArrayList<WatchListItem>) getLastNonConfigurationInstance();
  watchListAdapter = new WatchListItemBaseAdapter(MyActivity.this, tempItems);
... 
```

# javascript - 每 3 次单击使按钮更改输出

> ID：11774456
> 
> 赞同：0
> 
> 时间：2012-08-02T09:16:15.267
> 
> 标签：javascript, jquery

在我的脚本中单击“按钮”时，它会返回一个图像文件（“#mypic”）、一个声音文件（“#mysoundclip”）和一个设置单词拼写样式的类（“#picknext”）。

问题是，我希望按钮在继续下一个图像、声音和样式之前重复其动作 3 次。我该怎么做？

```
$('#pickNext').click(function() {
// remove the class from all td's
$('td').removeClass('spellword');
// pick a random word
var r = rndWord;
while (r == rndWord) {
    rndWord = Math.floor(Math.random() * (listOfWords.length));
}
// apply class to all cells containing a letter from that word
$('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');

});

var audio = $("#mysoundclip")[0];
var i  = 0;
$(".minibutton").click(function() {
var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist && i >= 3) {
    $('#pickNext').click();
    i = 0;
} else {

    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
    audio.play();
    pic = $("#mypic").attr('src', listOfWords[rndWord].pic);
    pic.show();
    $i++;
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:22:55.280

添加计数器：

```
var i = 0; 
```

然后：

```
i++; 
```

不要忘记检查它:)

```
if(i == 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:26:59.277

```
var audio = $("#mysoundclip")[0];
var i  = 0;
$("button").click(function() {
var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist && i >= 2) {
    $('#pickNext').click();
    i = 0;
} else {

    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
    audio.play();
    pic = $("#mypic").attr('src', listOfWords[rndWord].pic);
    pic.show();
    $i++;
}
});

$('#pickNext').click(function() {
// remove the class from all td's
$('td').removeClass('spellword');
// pick a random word
var r = rndWord;
while (r == rndWord) {
    rndWord = Math.floor(Math.random() * (listOfWords.length));
}
// apply class to all cells containing a letter from that word
$('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:28:20.540

[使用 jQuery 的.data() 函数](http://api.jquery.com/data/)跟踪按钮被按下的次数。您将设置一个计数器，然后递增，当它达到 3 时执行操作。基本大纲：

```
timesClicked = $(this).data('timesClicked');
if(!timesClicked) { timesClicked = 0 } //Allow for the first time
if(timesClicked < 3) {
  //Increment the counter
  $(this).data('timesClicked',timesClicked+1);
} else {
  $(this).data('timesClicked',0);
  //Do your action
} 
```

如果我理解你的代码，它看起来像这样：

```
if (noExist) {
    $(this).data('timesClicked', 0);
    $(this).click();
} else {
    timesClicked = $(this).data('timesClicked');
    if(timesClicked < 3) {
        //Increment the counter
        $(this).data('timesClicked',timesClicked+1);
    } else {
        //Reset the counter and pick new things
        $(this).data('timesClicked',0);
        $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
        pic = $("#mypic").attr('src', listOfWords[rndWord].pic);
    }
    //Either way, play the sounds       
    audio.play();
    pic.show();
} 
```

如果您愿意，这将允许您添加更多按钮，并且无论如何都是良好的编码习惯。明智的做法是添加一个设置为“3”的“maxClicks”数据属性以进行检查，这样您就可以改变它需要的点击次数。

查看您放置 jsFiddle 的代码，有几件事需要修复。值得注意的是，您似乎将输入的“类型”属性与 id 混淆了。每个 id 只能使用一次，您使用 pickNext 两次。那会破坏各种事情。您还使用了一种无效的“button2”类型。您的 $('button') 和 $('button2') 点击事件不会像您预期的那样工作，因为它们正在寻找带有 and 标记的元素。因此，任何时候按下任何按钮都会触发第一个事件，而第二个永远不会。$('#pickNext') 点击事件，因为您使用了两次pickNext，可能只会触发第二个按钮。你可能应该给他们“pickNext”和“reset”的ID，

Long story short: get the rest of your code working, and then worry about getting things to happen three times.

# ajax - Jquery Ajax 如何从 ResponseBody 获取数据？

> ID：11774460
> 
> 赞同：2
> 
> 时间：2012-08-02T09:16:47.260
> 
> 标签：ajax, jquery

我使用 jQuery Ajax。我的成功功能：

```
...
success: function(data, status, xhr) {
     alert(data);
     r = resultResponse(data);
}
... 
```

如何从响应正文中获取数据（使用 xhr 或除数据变量外的任何其他方式，因为数据变量未定义与响应正文中的数据相反）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:32:14.377

我需要为此查看您的完整 ajax 代码，但我有一个怀疑。

如果您在 ajax 调用中设置了预期的返回格式，它将期望响应正文采用该格式，并且如果响应格式被破坏，则数据将返回空。

例如，如果您的 ajax 需要 JSON 回复，但在 JSON 字符串之前或之后存在语法错误（例如松散字符），则数据将返回空，但不会显示错误。

您能向我们展示您的完整 ajax + 粘贴响应正文吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:47:51.780

`xhr.responseText`返回数据，我的字符集有问题，所以这就是我无法做到的原因。

# vba - 使用宏将工作表复制到另一个工作簿

> ID：11774467
> 
> 赞同：1
> 
> 时间：2012-08-02T09:17:13.063
> 
> 标签：vba, excel

```
With Application.FileDialog(msoFileDialogOpen)
    .Filters.Clear
    .Filters.Add "Excel 2002-03", "*.xls", 1
    .Filters.Add "Excel 2007", "*.xlsx; *.xlsm; *.xlsa", 2
    .AllowMultiSelect = False
    .Show

    If .SelectedItems.Count > 0 Then
        Workbooks.Open .SelectedItems(1)
        Set wkbSourceBook = ActiveWorkbook
        Set rngSourceRange = Application.InputBox(prompt:="Select source range", Title:="Source Range", Default:="A1", Type:=8)
        wkbCrntWorkBook.Activate
        Set rngDestination = Application.InputBox(prompt:="Select destination cell", Title:="Select Destination", Default:="A1", Type:=8)
        rngSourceRange.Copy rngDestination
        rngDestination.CurrentRegion.EntireColumn.AutoFit
        wkbSourceBook.Close False
    End If

End With 
```

我正在创建一个对话框以将文件名作为输入，然后需要将完整的工作表复制到另一个工作簿，而不是选择范围和内容。怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:59:35.880

您可以使用对象的`Copy`方法`Worksheet`。

```
wkbSourceBook.Sheets(1).Copy After:=wkbCrntWorkBook.Worksheets(1) 
```

您可以按名称选择您想要的任何表格。它将使用现有名称进行复制，如果已存在将变为“名称（2）”。然后，您可以从那里重命名它。

# c# - C#.net 中日期时间的转换

> ID：11774470
> 
> 赞同：0
> 
> 时间：2012-08-02T09:17:18.430
> 
> 标签：c#, asp.net, sql-server-2008

我在将日期时间的会话值转换为正确格式时遇到了一些问题。

当我使用时`DateTime lastlogged = Convert.ToDateTime(Session["LastLogin"]);`，我得到值 {1/1/0001 12:00:00 AM} （在调试时得到值）但实际值为 `Session["LastLogin"]`2011-08-02 16:35:52.987 ，这是从 SQLServer 2008 中查询出来的数据字段日期时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:26:06.790

您的结果是`DateTime.MinValue`（01/01/0001 午夜）。

如果 Session 中的值为`null`- 这是最可能的解释，您将得到此结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:35:47.640

正如其他人已经建议的那样，您可以使用 DateTime.Parse 方法。但也许使用 DateTime.TryParseExact 会更好。这样您就可以定义 DateTime 的格式

```
DateTime lastLogin;
if (Session["LastLogin"] != null && DateTime.TryParseExact(Session["LastLogin"].ToString(), "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.AssumeLocal, out lastLogin))
{
    // TODO: Code that uses the parsed date.
} 
```

我对 ASP.net 中的 Session 不是很熟悉，但是否也可以在其中存储整个对象？这样，也应该可以按原样存储 DateTime，从而生成如下所示的代码：

```
DateTime result = (DateTime) Session["LastLogin"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:20:41.120

```
DateTime lastlogged = DateTime.Parse(Session["LastLogin"].ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:21:57.897

如果您在 Session 中正确存储该值，则可以通过将其转换为 DateTime 来检索它。

```
DateTime lastlogged = Convert.ToDateTime(Session["LastLogin"].ToString()); 
```

# android - 带有 viewpager 的 ActionBarsherlock 选项卡导航

> ID：11774471
> 
> 赞同：0
> 
> 时间：2012-08-02T09:17:22.113
> 
> 标签：android, android-viewpager, actionbarsherlock

我正在尝试在 Actionbar Sherlock 中使用选项卡导航，并且我想在哪个选项卡中使用 Viewpager。这可能吗？如果是，从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:30:11.397

您可以使用[ViewPagerIndicator](http://viewpagerindicator.com/)，这是 ActionBarSherlock 的同一作者的项目。该页面中有代码示例。

# git - git：我如何列出新文件以添加它们？

> ID：11774475
> 
> 赞同：0
> 
> 时间：2012-08-02T09:17:42.930
> 
> 标签：git

我刚刚在本地计算机上克隆了一个存储库。然后我在文件夹中创建了一个新文件。当我运行“git st”时，新文件不会出现，甚至不会作为未跟踪的文件出现。

如何列出我在项目中创建的新文件，然后添加它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:22:57.343

可能是它在 .gitignore 中吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:24:44.103

通常，您应该看到该文件，除非

*   保存该文件的文件夹尚未添加到存储库中（在这种情况下，您在键入时只会看到该文件夹`git status`​​）
*   该文件包含在`.gitignore`保存该文件的文件夹中的一个礼物中
*   该文件包含在`.gitignore`
*   该文件包含在`.git/info/exclude`
*   该文件包含在您的全局`.gitignore`文件中（检查
    `git config --global core.excludesfile`）

要检查您的文件是否被其中一个文件忽略`ignore`，请键入

```
git status --ignored 
```

这也将显示被忽略的文件。

五种情况的解决方案：

*   当文件夹尚未版本化时，使用`git add folder_name`. 这会将文件夹及其所有文件（除非它们被忽略）添加到索引中。
*   当文件被 a 过滤时`.gitignore`，修改该文件，以便在键入时显示要添加的文件`git status`。

# java - 如何从 utf-8 字符中去除不可见字符

> ID：11774478
> 
> 赞同：3
> 
> 时间：2012-08-02T09:17:48.013
> 
> 标签：java, utf-8

我写了一个程序来生成一个随机的 utf-8 字符串，但是有一些乱七八糟的字符。我不知道我的代码是错误的还是某些字符不可见，如何去除这些乱七八糟的字符（但我想保留中文、韩文、日文、符号等）？

有代码：

```
private byte randomByteInRange(int min, int max) {
    return (byte) (min + rand.nextInt(max - min));
}

private String randomUtf8String(int length) throws UnsupportedEncodingException {
    int j = 0;
    byte[] bytes = new byte[6 * length];
    for (int i = 0; i < length; ++i) {
        int mod = i % 3;
        if (0 == mod) { // 0xxxxxxx, visible char: 0x20 ~ 0x80
            bytes[j++] = randomByteInRange(0x20, 0x80);
        }
        if (1 == mod) { // 110xxxxx 10xxxxxx
            bytes[j++] = randomByteInRange(0xc0, 0xdf);
            bytes[j++] = randomByteInRange(0x80, 0xbf);
        }
        if (2 == mod) { // 1110xxxx 10xxxxxx 10xxxxxx
            bytes[j++] = randomByteInRange(0xe0, 0xef);
            bytes[j++] = randomByteInRange(0x80, 0xbf);
            bytes[j++] = randomByteInRange(0x80, 0xbf);
        }
    }

    return new String(bytes, 0, j, "UTF-8").replaceAll("\\p{C}+", "");
} 
```

有我的输出：

```
kѷ㱾U׽拌w��Ꙙ@ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:55:08.213

我可以想到以这种方式生成随机字符串的几个问题：

*   未分配范围、保留范围和私人使用区域
*   控制字符
*   仅在某些其他代码点之后才有意义的组合标记（例如[变音符号）](http://www.unicode.org/charts/PDF/U0300.pdf)
*   字体支持（例如，您的设备会显示[Ogham 脚本](http://www.unicode.org/charts/PDF/U1680.pdf)吗？）

为了实现有意义的随机字符串生成器，您的代码将需要应用一些过滤器和自然语言启发式。

*请参阅[图表](http://www.unicode.org/charts/)以供参考。*

* * *

假设这是用于本地化烟雾测试...

作为一种替代方法，考虑使用来自目标语言的常用短语、日期等，或者使用从目标语言文本源生成的某种马尔可夫链。自动翻译软件还可以为您提供目标字符串的合理表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:50:47.707

在 Eclipse 中，编写：

```
Character c;
c.i 
```

并将驼鹿光标放在`c.i`
然后输入`CTRL+SPACE`并搜索以 . 开头的单词之后`is`。

`is`用你想要的一切来测试你的输入。

# javascript - 我该如何选择用 jQuery 填充标题标签？我有这些选择： $('#AccountID, #PageID, #TopicID') .focus(function () { $('option[value="99"]', this).remove(); store.setItem($ (this).attr('id'), $(this).val()); }) .change(function () { store.setItem($(this).attr('id'), $(this) .va

> ID：11774483
> 
> 赞同：0
> 
> 时间：2012-08-02T09:18:08.837
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:27:31.133

我不确定你到底要什么，但我猜你的意思是像[我做的这个例子？](http://jsfiddle.net/tBa6b/)

html:

```
<p id="title">1</p>
<select id="dd">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select> 
```

js：

```
$('#dd').change(function() {
  $('#title').text($(this).val());
}); 
```

# android - 以编程方式获取 Android ICS 数据使用、软硬限制

> ID：11774484
> 
> 赞同：2
> 
> 时间：2012-08-02T09:18:10.180
> 
> 标签：android, android-widget

从 Android ICS 开始，您可以设置移动数据使用限制。您可以设置软数据和硬数据使用限制。这位于设置 -> 数据使用情况下。此屏幕还显示本月使用的数据量。

我想在小部件中显示此数据，但我无法找到如何获取：

*   本月使用的数据
*   移动数据软限制
*   移动数据硬限制

我找到[了这个](http://developer.android.com/training/basics/network-ops/managing.html)，但这看起来不像正确的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:32:27.577

[http://developer.android.com/reference/android/net/TrafficStats.html](http://developer.android.com/reference/android/net/TrafficStats.html)

那应该可以解决您的问题

# jquery - jQueryUI 类别传递类别信息

> ID：11774486
> 
> 赞同：0
> 
> 时间：2012-08-02T09:18:22.883
> 
> 标签：jquery, jquery-ui, autocomplete, categories

**总结：**添加的所有项目的类别需要与项目名称一起保存。然后，这允许在提交时传输此类别信息，以便使用正确的查询（与正确的表相关）。想法？

我需要做的是，当用户选择他们正在搜索的内容（从自动完成下拉菜单中）时，类别信息（也就是它的类别名称）也会记录在某处。

这个想法是，当用户按下搜索时，他们正在寻找的短语以及类别名称也会被发送。推理：您有 3 张表格，一张包含有关汽车的信息，一张有关动物的信息，一张有关外星人的信息。如果已经确定了与它相关的表（从类别信息中），则不需要查询所有 3 个。

搜索所有 3 个的问题是您可能有一个名叫海绵鲍勃的外星人，以及一个动物等。

这是我们正在处理的代码（来自 jQueryUI 网站）：

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var self = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            self._renderItem( ul, item );
        });
    }
}); 
```

我的想法是在类别完成功能中，在选择事件下：

```
$(function() {
        $( "#search" ).catcomplete({
            delay:0,
            source: "query/encode-json.php?term="+ $("#search").val(),
            select: function(event, ui){

            }
        });     
    }); 
```

与所选项目关联的类别可以发送/存储在某处。我遇到的问题是我可以在小部件功能（item.category）中获取此信息，但此信息在选择事件中（直接）不可用。这是有道理的，因为小部件只填充列表，它不处理选择事件（我在想），但不知何故我需要能够访问这些信息。我的想法是找到索引并从那里向后工作，但这似乎不起作用。另一个选项（更基本的）是每次循环小部件时，都会将类别名称添加到 li 元素的标题字段中。

我已经尝试了几个小时，但无论哪种解决方案都没有取得任何进展。

感谢您提供的任何光亮：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:25:30.310

想出了一个办法。这是我最终得到的代码：

```
$(".ui-menu-item").live('click', function(e) {
        cat = $(this).prevAll(".ui-autocomplete-category:first").text();
    }); 
```

起初我对它的点击面有疑问，因为我没有意识到我需要它的实时面等。所以正在尝试这个：

```
$(".ui-menu-item").click(function () {

    }); 
```

因此，它所做的就是选择其中一个搜索结果（点击）时，上面的类别的文本被拍摄并分配给CAT变量。这个变量我已经设置为传输到重新搜索的搜索页面：

```
 function test(){
                        var i = document.createElement('input');
                        i.type = 'hidden';
                        i.name = 'cat';
                        i.value = cat;
                        document.getElementById("searchForm").appendChild(i);
                    } 
```

资料来源：[jquery 找到与类最近的上一个兄弟](https://stackoverflow.com/questions/2310270/jquery-find-closest-previous-sibling-with-class)

# jquery - 使用 $.Post 或 $.Ajax 传递 HttpPostedFileBase 类型

> ID：11774489
> 
> 赞同：3
> 
> 时间：2012-08-02T09:18:33.520
> 
> 标签：jquery, asp.net-mvc, razor

我的控制器中有这个动作。

```
 public ActionResult Upload(HttpPostedFileBase fileData)
    {
        //code for uploading goes here.
        return View();
    } 
```

有没有办法使用 $.post 或 $.Ajax 访问此操作？在我***看来***，我有这些代码。

```
<input type="file" name="fileData" id="fileData" multiple/>
<button>Upload</button> 
```

首先，我尝试使用此代码

```
$("button").on("click",function(){
   $.post('@Url.Action' + $(".filedata").val(),function(data){
      console.log(data);
   });
}); 
```

但是当我尝试在我的“**上传**”操作上打断点时，“ **filedata** ”变量的***值为空***。

我不知道有什么问题。希望你们能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T18:03:57.553

您需要有一个 IFRAME，用于使用该文件发布帖子。

像这样：

```
<iframe id="targetUpload" name="targetUpload"></iframe> 
```

在表单中，您将目标设置为 iframe。

```
<form target="targetUpload" name="file" runat="server" method="post" id="file" enctype="multipart/form-data" action="@Url.Content("~/Controller/Action")"> 
```

还有一个提交按钮

```
<input type="Submit" value="Upload"> 
```

# asp.net-mvc-3 - 将 WCF 与 SQL 结合到 MVC

> ID：11774494
> 
> 赞同：1
> 
> 时间：2012-08-02T09:19:02.207
> 
> 标签：asp.net-mvc-3, wcf, sqldatareader

我在运行时收到此错误：

> System.InvalidOperationException：ExecuteReader：连接属性尚未初始化。

这是指向这条线：

```
SqlDataReader openBuyers = b.ExecuteReader(); 
```

我正在使用我的 WCF 中的方法。

这在 svc 上：

```
public string ConnectionString()
    {
        string connectToDB = ConfigurationManager.ConnectionStrings["connection"].ToString();
        return connectToDB;
    }

    public SqlConnection OpenConnection()
    {
        try
        {
            SqlConnection linkToDB = new SqlConnection(ConnectionString());
            linkToDB.Open();
            return linkToDB;
        }
        catch (Exception)
        {
            return null;
        }
    } 
```

将此添加到我在 WCF 中的 web.config 中：

```
<connectionStrings>
     <add name="connection" connectionString="Data 
     Source=localhost\SQLEXPRESS;Integrated Security=true;Initial
     Catalog=ProductDB"/>
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:36:25.097

```
 SqlConnection myConnection = new SqlConnection(myConnectionString);
   SqlCommand myCommand = new SqlCommand(mySelectQuery, myConnection);
   myConnection.Open();
   SqlDataReader myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection); 
```

您缺少前 3 行 - 未创建或打​​开您的连接

来源： http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader(v=vs.71).aspx)

# c# - 取消后如何启动任务

> ID：11774495
> 
> 赞同：2
> 
> 时间：2012-08-02T09:19:07.283
> 
> 标签：c#, winforms, multithreading, taskfactory

我有一个带有三个按钮的 Windows 窗体。一个按钮将条目添加到 BlockingCollection。一个开始处理列表，一个停止处理列表。

我可以将条目添加到我的 BlockingCollection 中，当我单击 Start 时，列表会按照我的预期使用。我仍然可以添加新项目，并且它们会继续被消耗。但是，当我单击停止按钮时，虽然任务确实停止了，但我无法使用开始按钮再次启动它们。

我在取消任务时做错了什么，他们不会重新开始？我已经阅读了无数关于取消任务的项目，但仍然没有“明白”。

任何帮助都会很棒。这是代码...

```
 // Blocking list for thread safe queuing
    private BlockingCollection<QueueItem> ItemList = new BlockingCollection<QueueItem>();
    private CancellationTokenSource CancelTokenSource = new CancellationTokenSource();
    private int MaxConsumers = 3;

    // Form initialisation
    public MainForm()
    {
        InitializeComponent();
    }

    // Create an async consumer and add to managed list
    private void CreateConsumer(int iIdentifier)
    {
        Task consumer = Task.Factory.StartNew(() =>
        {
            foreach (QueueItem item in ItemList.GetConsumingEnumerable())
            {
                Console.WriteLine("Consumer " + iIdentifier.ToString() + ": PROCESSED " + item.DataName);
                Thread.Sleep(894);

                if (CancelTokenSource.IsCancellationRequested)
                    break; // Cancel request
            }
        }, CancelTokenSource.Token);
    }

    // Add a new item to the queue
    private void buttonAdd_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 10; i++)
        {
            Task.Factory.StartNew(() =>
            {
                // Add an item
                QueueItem newItem = new QueueItem(RandomString(12));

                // Add to blocking queue
                ItemList.Add(newItem);
            });
        }
    }

    // Start button clicked
    private void buttonStart_Click(object sender, EventArgs e)
    {
        buttonStart.Enabled = false;
        buttonStop.Enabled = true;

        // Create consumers
        for (int i = 0; i < MaxConsumers; i++)
        {
            CreateConsumer(i);
        }
    }

    // Stop button clicked
    private void buttonStop_Click(object sender, EventArgs e)
    {
        CancelTokenSource.Cancel();

        buttonStop.Enabled = false;
        buttonStart.Enabled = true;
    }

    // Generate random number
    private static Random random = new Random((int)DateTime.Now.Ticks);
    private string RandomString(int size)
    {
        StringBuilder builder = new StringBuilder();
        char ch;
        for (int i = 0; i < size; i++)
        {
            ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
            builder.Append(ch);
        }

        return builder.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:22:44.577

您重复使用仍配置为取消的相同取消令牌。

因此，在开始新任务时创建一个新令牌。

# jquery - JQuery 事件在加载时触发一次，而不是再次触发

> ID：11774496
> 
> 赞同：0
> 
> 时间：2012-08-02T09:19:10.693
> 
> 标签：jquery

我想要实现的是在更改输入字段时执行一些代码。

一些上下文...表单的页面使用 iframe 在灯箱（颜色框）中加载。

我遇到了两个问题：

1.  表单加载时会触发 change 事件。它不应该——它应该只在字段改变时触发。如果我使用其他事件（例如焦点或单击），也会发生同样的事情。如果我使用 go、live 或 bind 也会发生这种情况。
2.  当事件实际发生时，更改事件（或焦点、单击等）不会触发。

文档就绪和加载事件都会出现这两个问题。

出于故障排除的目的，我插入了一行将值放入表单字段中。那工作得很好。

这是代码示例：

```
$(document).ready(function(){
  $("#inputfield").change(alert("field changed"));
} 
```

原则上这应该可行，所以我假设页面上还有其他影响它的东西，但我已经没有地方可以查看了。事件委托是一种解决方案吗？我不知道它在这里如何应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:20:53.150

在您的代码中，您`change`使用函数`alert`返回的函数调用函数。所以它调用`alert`函数，它返回`undefined`并且你调用`change(undefined)`. 这样，您根本不会绑定事件。您应该将函数设置为参数：

```
$(document).ready(function(){
  $("#inputfield").change(function () { 
    alert("field changed"); 
  });
} 
```

# java - 有没有一种方法可以让我在执行部分循环后循环该程序以重新开始

> ID：11774501
> 
> 赞同：2
> 
> 时间：2012-08-02T09:19:53.957
> 
> 标签：java

好的，我是 Java 新手，但遇到了问题。当 switch 语句的某个部分完成执行时，我试图让程序从 main 重新开始。这是我的代码：

```
import java.util.Scanner;
public class Test{
public static void main(String[] args){
    Scanner input = new Scanner(System.in);
    int ans;
    System.out.println("Choose an option");
    System.out.print("1: To see members\n2: To add member\n3: To delete a member\n Option: ");
    ans = input.nextInt();

    switch(ans){
        case 1:
        //code to see members
        break;
        case 2:
        //code to add members
        break;
        case 3:
        //code to delete members
        break;
        default:
        System.out.println("Invalid option");
        }
     }
 } 
```

案例一完成执行后，程序退出。如何将控制权交还给 main，以便它可以重新开始，直到用户故意退出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T09:21:49.373

将 main 中的代码提取到一个新函数中，然后调用该函数以传递控制权并重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:22:51.907

```
boolean exitLoop = false;
while (!exitLoop) { 
    // insert code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:25:04.690

引入一个变量：

```
boolean run = true; 
```

将您的代码放在一个循环中：

```
while(run){
    //your code
} 
```

如果用户选择退出，只需将运行设置为`false`，程序就会退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:22:48.207

试试这个....

```
import java.util.Scanner;
public class Test{
public static void main(String[] args){
boolean run = true;
while(run){
    Scanner input = new Scanner(System.in);
    int ans;
    System.out.println("Choose an option");
    System.out.print("1: To see members\n2: To add member\n3: To delete a member\n4: To end the program\n Option: ");
    ans = input.nextInt();

    switch(ans){
        case 1:
        //code to see members
        break;
        case 2:
        //code to add members
        break;
        case 3:
        //code to delete members
        break;
        case 4:
        //it will end the program
        run=false;
        break;
        default:
        System.out.println("Invalid option");
        }
       }
     }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:45:07.430

您可以递归地调用 main （不推荐），或者更好地遵循@ipavlic 给出的答案并将其放入循环中，就像@Dahaka 等其他人所说的那样。

# networking - 无法在virtualbox中连接无线（windows主机，mac guest）

> ID：11774502
> 
> 赞同：0
> 
> 时间：2012-08-02T09:19:56.317
> 
> 标签：networking, virtualbox

我是虚拟盒子的新手.. 我在虚拟盒子中使用 mac os snow lep 作为来宾操作系统和 windows XP 作为我的主机，我可以通过以太网连接我的互联网，但我无法通过无线连接。它给出了错误，我在 mac os snow lep 中看不到无线配置文件，这在 windows XP 中是可见的。谁能告诉我要在虚拟框中完成的设置；）

任何人都可以指导我解决这个问题。

期待您的好评，

问候， 迪利普·阿南德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T01:26:07.033

仅在适配器 1 中，仅取消选择所有其他适配器 1。然后选择附加到 NAT，打开高级设置，您的适配器类型应该是第一个或第二个。它对我有用。这仅适用于 MAC，以及有关 virtualbox 问题的 windows XP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T19:36:12.227

对我有用的是网络适配器设置，在适配器 1 中，取消选择然后选择“已连接电缆”。出于某种原因，这使得 Windows 7 中的 Internet 突然连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T15:06:26.337

Oracle 或 Apple 的 VirtualBox 不支持 OS X。虽然它的某些方面可以工作，但我还没有看到对无线适配器的任何支持。

最好的办法是配置 VirtualBox 来宾设置以在虚拟网络适配器上使用 NAT 网络并让它管理连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-24T17:09:35.863

此问题本质上是由于将相同的 IP 地址分配给主机 WiFi 适配器（通过 wifi 路由器的 DHCP 服务器）和访客接口（通过 Nat 网络下的 VirtualBox DHCP 服务器）。

从有关集成 DHCP 服务器[微调 VirtualBox NAT 引擎](https://www.virtualbox.org/manual/ch09.html#changenat "微调 VirtualBox NAT 引擎")的 VirtualBox 文档中：

```
In NAT mode, the guest network interface is assigned to the IPv4 range 10.0.x.0/24
by default where x corresponds to the instance of the NAT interface +2\. So x is 2
when there is only one NAT instance active. In that case the guest is assigned to the 
address 10.0.2.15, the gateway is set to 10.0.2.2 and the name server can be found at
10.0.2.3. 
```

查看主机的 WiFi 适配器的 IP 地址，您会发现分配给它的地址也来自`10.0.2.0/24`网络范围。

这就是问题的原因，因为现在 VirtualBox 的 Nat 驱动程序被主机和来宾地址来自同一个子网这一事实混淆了。

要解决此问题，您可以使用 VBoxManage 命令更改由 VirtualBox DHCP 服务器提供的子网（在 VM 关闭时）：

```
Vboxmanage modifyvm VMName --natnet1 "192.168/16" 
```

你可以走了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-21T12:51:21.227

我的 Mac 遇到了同样的问题，我所做的是将 Windows 无线设置更改为手动，因此我使用“正确”设置设置了我的 IP、网关和 DNS。

希望它对你有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-17T09:30:39.793

Katrina A 说了什么，但我检查了“电缆已连接”。在升级到版本 4.3.6 之前从未出现过问题

升级了 USB 支持，但效果不太好。我发现如果我在 Mac 上弹出我的闪存驱动器，然后转到 VB 设置 > 端口 > USB 并取消选中加载到 VM 中的闪存驱动器列表（或任何其他设备）上的闪存驱动器。

整个检查和取消检查的事情似乎很好！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-11T12:53:18.820

除了此处发布的解决方案之外，我还要补充一点，它解决了我使用热点而不是公司网络连接到手机的问题。

似乎某些 Internet 服务提供商可能会限制与虚拟机的连接。

# jquery - 如何计算xml标签中的元素

> ID：11774503
> 
> 赞同：0
> 
> 时间：2012-08-02T09:19:58.937
> 
> 标签：jquery, xml, parsing

我的脚本有一个小问题，我被卡住了......我需要计算我的 xml 主标签中的元素，而与它们的名称无关。你能告诉我怎么做吗？

```
$.ajax({
    type:"GET",
    url:"../amica_programator/data/content_data.xml",
    dataType:"xml",
    success: function(xml) {
            var class_main_content = $('.main_content ul').attr('class');
            var xml_element_name = $(xml).find(class_main_content)[0].nodeName.toLowerCase();
            if ((class_main_content) == xml_element_name){
                var n_elements = $(xml).find(xml_element_name).find("element").size();
                alert(n_elements);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:37:41.207

如果您的 XML 数据不是`XMLDocument`第一个，您应该使用[`$.parseXML()`](http://api.jquery.com/jQuery.parseXML/). 之后，您可以使用简单的选择器来查找元素的数量。这是一个[例子](http://jsfiddle.net/AHzAr/1/)；

```
var xml = '<root><tag_01><element></element><element></element><element></element></tag_01><tag_02><element></element><element></element></tag_02></root>',
    xmlDoc = $.parseXML(xml)
    $xml = $(xmlDoc),
    tagName01 = 'tag01',
    tagName02 = 'tag02';
alert('total <element> count: ' + $xml.find('element').size());
alert('total <tag_01 > element> count: ' + $xml.find(tagName01 + ' > element').size());
alert('total <tag_02 > element> count: ' + $xml.find(tagName02 + ' > element').size()); 
```

ps：我必须添加`<root>`以使 XML 有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:26:17.560

```
$('*') 
      .filter(function() { 
          return this.nodeName.toLowerCase().match(/tag_*/); 
      }).each(function(){
          alert($(this).find('element').size());
      }); 
```

试试这个[JsFiddle](http://jsfiddle.net/rnzuK/)

# performance - 优化 SOLR 荧光笔

> ID：11774508
> 
> 赞同：3
> 
> 时间：2012-08-02T09:20:27.183
> 
> 标签：performance, optimization, solr, highlight, highlighting

我正在尝试优化 SOLR 实例中的突出显示，因为这似乎会使查询速度降低 2 个数量级。我有一个标记化的字段索引并使用以下定义存储：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\+" replacement="%2B"/>
    <tokenizer class="solr.UAX29URLEmailTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords_en.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\+" replacement="%2B"/>
    <tokenizer class="solr.UAX29URLEmailTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords_en.txt" enablePositionIncrements="true" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

还生成术语向量等：

```
<field name="Events" type="text_general" multiValued="true" stored="true" indexed="true" termVectors="true" termPositions="true"  termOffsets="true"/> 
```

对于高亮组件，我使用默认的 SOLR 配置。我尝试的查询使用 FastVectorHighlighter，但仍然需要 ~1500 毫秒，这对于 ~1000 个文档来说非常长，每个文档的字段中存储了 10-20 个值。这是查询：

```
q=Events:http\://mydomain.com/resource/term/906&fq=(Document_Code:[*+TO+*])&hl.requireFieldMatch=true&facet=true&hl.simple.pre=<b>&hl.fl=*&hl=true&rows=10&version=2&fl=uri,Document_Type,Document_Title,Modification_Date,Study&hl.snippets=1&hl.useFastVectorHighlighter=true 
```

我觉得奇怪的是，在 solr 管理统计中，单个查询会生成 9146 个对 HtmlFormatter 和 GapFragmenter 的请求。关于为什么会发生这种情况以及如何提高荧光笔性能的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:02:15.700

问题似乎是由“hl.fl = *”引起的，这导致 DefaultSolrHighlighter 为找到的每个文档（在我的情况下最多 10 个）迭代相对大量的字段（在我的索引中）。这会导致额外的 O(n^2) 时间。这是相关的代码片段：

```
for (int i = 0; i < docs.size(); i++) {
  int docId = iterator.nextDoc();
  Document doc = searcher.doc(docId, fset);
  NamedList docSummaries = new SimpleOrderedMap();
  for (String fieldName : fieldNames) {
    fieldName = fieldName.trim();
    if( useFastVectorHighlighter( params, schema, fieldName ) )
      doHighlightingByFastVectorHighlighter( fvh, fieldQuery, req, docSummaries, docId, doc, fieldName );
    else
      doHighlightingByHighlighter( query, req, docSummaries, docId, doc, fieldName );
  }
  String printId = schema.printableUniqueKey(doc);
  fragments.add(printId == null ? null : printId, docSummaries);
} 
```

减少字段的数量应该会大大改善行为。但是，在我的情况下，我无法将其减少到 20 个字段以下，因此我将检查为所有字段启用 FastVectorHighlighter 是否会提高整体性能。

我还想知道我们是否可以通过使用匹配文档中的一些信息（此时已经可用）来进一步减少这个列表。

**更新**

对所有字段使用 FastVectorHighlighter（将所有标记化字段的*termVectors*、*termPositions*和*termOffsets*设置为*true*）确实将突出显示速度提高了一个数量级，因此现在所有查询都运行 < 1s。索引的大小增加了原来的3倍（从500M增加到2G）。多值字段的分片如何生成也有问题，但是性能的提升已经足够高了。

# android - 在 Android 中为 BLE 接近配置文件读取蓝牙 RSSI

> ID：11774510
> 
> 赞同：4
> 
> 时间：2012-08-02T09:20:42.650
> 
> 标签：android, bluetooth, rssi, bluetooth-lowenergy

我目前正在为 Android 开发低功耗蓝牙接近配置文件，我偶然发现了一个关于 RSSI 的问题。

为了使接近配置文件工作，我必须每隔很短的时间使用已连接的设备接收 RSSI 数据。

当我做了一些研究时，我知道在设备发现期间可以获得蓝牙 RSSI。这对我不起作用，因为从设备在连接后不会做广告。

另一种方式是深入挖掘 HCI 级别并使用 BlueZ。似乎水平很低。有没有人有这方面的经验？

有人看过在 Android 上开发的接近配置文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T05:49:05.360

您可以在设备扫描回调中获取数据和 RSSI。请参阅[BluetoothLeGatt 示例](http://developer.android.com/samples/BluetoothLeGatt/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-23T17:33:09.543

您可以在连接后一段时间后重复使用 readRemoteRssi() 方法。但它不会很好地工作。因为挂起标志错误。另一种方法是您可以启动和停止 blescan 并获取扫描设备的 rssi 值，这将是更好的方法，因为在 nexus 7 2013 设备中，一些三星设备不是过滤 ble 设备，它将返回 ble 设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T10:56:49.547

```
final Runnable runnable = new Runnable() {  
    @Override
    public void run() {
        // TODO Auto-generated method stub
        mBluetoothLeService.readRemoteRssi();
        mHandler.postDelayed(this, 1000);
    }
};

and add mHandler.postDelayed(runnable, 1000); Should work. 
```

# asp.net - 使文本 SEO 友好

> ID：11774515
> 
> 赞同：0
> 
> 时间：2012-08-02T09:21:06.747
> 
> 标签：asp.net, seo

我在 aspx 页面（asp.net）中有以下弹出 html 结构，我使用 jquery 在链接单击时隐藏和显示，但这不是 SEO 友好的。如何在不使用元标记的情况下使其对 SEO 友好？

```
<div class="popupbackground" id="divDescription" style="display: block;">
            <div style="display: block;" class="width" id="divDescriptionPopup">
            <div style="margin-top: -200px;" class="popup">
                <div class="close float-right">
                    <a style="float: right;
                        display: inline" onclick="return CloseDescription_Close();"   href="" id="CloseDescription">
                        <img title="Close" alt="Close" src="../Images/close.png">
                    </a>
                </div>
                <h3 class="float-left heading">
                    Description</h3>
                <div class="clear">
                </div>
                <div class="popup_inner_description">
                    <div class="pop_scroll">
                        <span id="ContentPlaceHolder1_lblLongDescription"><font size="3"><span style="font-weight: bold;">content here.... <span style="font-weight: bold;">SavingON.co.uk</span> content here....<br><br> content here....<br><br>content here <br><br>content here...</span></font></span>
                    </div>
                </div>                    
                <div class="clear">
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:02:09.607

除了 Kevin 指出的已弃用的 FONT 标签，以及可能有太多的内联 CSS 之外，这并没有什么问题可以阻止您的页面被轻松抓取。

即使设置为`display:none;`，虽然内容对人类访问者不可见，但对机器人可见。

即使有问题，我也不确定您希望从元标记中获得什么帮助......

也许如果你能解释一下你认为问题是什么以及你是如何得出这个结论的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T06:57:51.673

他们是使您的网站对 seo 友好的一些步骤：- 将社交媒体集成到您网站的设计中 也使用 seo 图片 确保您的网址是用户友好的 将您的关键字放在许多不同的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T05:51:24.517

seo friendly 的主要意图是“用户友好”。

您应该为用户显示所有数据，如内容、图像、链接等，这对用户有利，因此谷歌认为您的网站对用户或 seo 友好，而不仅仅是机器人。

谷歌的主要意图是你的网站必须为用户提供信息，所以谷歌给用户最好的信息，这是从谷歌找到的。

# sitecore - 为什么 AuthenticationManager.Login 会抛出“对象未设置”异常？

> ID：11774516
> 
> 赞同：1
> 
> 时间：2012-08-02T09:21:07.233
> 
> 标签：sitecore, sitecore6

我在 WCF 服务后面有以下代码：

```
if (Sitecore.Security.Authentication.AuthenticationManager.Login("sitecore\\" + username, password, false)) 
{ 
  // do something 
} 
```

但我得到一个“对象未设置”异常，具有以下堆栈跟踪：

```
at System.Web.Profile.SqlProfileProvider.GetPropertyValuesFromDatabase(String userName, SettingsPropertyValueCollection svc) 
at System.Web.Profile.SqlProfileProvider.GetPropertyValues(SettingsContext sc, SettingsPropertyCollection properties)
at System.Configuration.SettingsBase.GetPropertiesFromProvider(SettingsProvider provider) 
at System.Configuration.SettingsBase.SetPropertyValueByName(String propertyName, Object propertyValue) 
at System.Configuration.SettingsBase.set_Item(String propertyName, Object value) 
at System.Web.Profile.ProfileBase.SetInternal(String propertyName, Object value) 
at System.Web.Profile.ProfileBase.set_Item(String propertyName, Object value) 
at System.Web.Profile.ProfileBase.SetPropertyValue(String propertyName, Object propertyValue) 
at Sitecore.Security.UserProfile.SetPropertyValueCore(String propertyName, Object value) 
at Sitecore.Security.UserProfile.set_SerializedData(Object value) 
at Sitecore.Security.UserProfile.get_CustomProperties() 
at Sitecore.Security.UserProfile.GetCustomProperty(String propertyName) 
at Sitecore.Security.SecurityUtil.GetUserDigestCredentials(User user, Boolean withoutDomain) 
at Sitecore.Security.SecurityUtil.UpdateDigestCredentials(String username, String password) 
at Sitecore.Security.SitecoreMembershipProvider.ValidateUser(String username, String password) 
at System.Web.Security.Membership.ValidateUser(String username, String password) 
at Sitecore.Security.Authentication.AuthenticationHelper.ValidateUser(String userName, String password) 
at Sitecore.Security.Authentication.MembershipAuthenticationProvider.Login(String userName, String password, Boolean persistent) 
at Sitecore.Security.Authentication.AuthenticationManager.Login(String userName, String password, Boolean persistent) 
at BaillieGifford.Code.services.DR.LoginToSiteCore(String username, String password) in c:\Dev\Development-Websites\Mainwebsite2012-DR\Code\services\DR.svc.cs:line 26 
at SyncInvokeLoginToSiteCore(Object , Object[] , Object[] ) 
at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs) 
at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 
```

堆栈跟踪似乎表明用户的属性存在问题（某处），但并没有准确说明什么...

有什么想法吗？

更新：

来自 web.config 的配置文件位：

```
<profile defaultProvider="sql" enabled="true" inherits="Sitecore.Security.UserProfile, Sitecore.Kernel">
<providers>
<clear/>
<add name="sql" type="System.Web.Profile.SqlProfileProvider" connectionStringName="core" applicationName="sitecore"/>
<add name="switcher" type="Sitecore.Security.SwitchingProfileProvider, Sitecore.Kernel" applicationName="sitecore" mappings="switchingProviders/profile"/>
</providers>
<properties>
<clear/>
<add type="System.String" name="SC_UserData"/>
</properties>
</profile> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:11:33.267

当您使用自定义配置文件提供程序并且未将其设置为默认提供程序时，可能会发生此异常。检查是否在 web.config 中设置了 defaultProvider：

```
<profile defaultProvider="CustomizedProfileProvider"> <-- CHECK IF DEFAULT PROVIDER IS SET

  <providers>

    <clear/>

    <add name="CustomizedProfileProvider" type="System.Web.Profile.SqlProfileProvider"

         connectionStringName="database"

         applicationName="/app"/>

  </providers>

</profile> 
```

此外，该方法`System.Web.Profile.SqlProfileProvider.GetPropertyValuesFromDatabase`需要`HttpContext.Current`设置或`Ewt.Trace`禁用（参见下面的代码），但`HttpContext`WCF 中没有。

```
private void GetPropertyValuesFromDatabase(string userName, SettingsPropertyValueCollection svc)
{
    if (HostingEnvironment.IsHosted && EtwTrace.IsTraceEnabled(4, 8))
    {
        EtwTrace.Trace(EtwTraceType.ETW_TYPE_PROFILE_BEGIN, HttpContext.Current.WorkerRequest);
    }
   ...
   ...
} 
```

尝试禁用跟踪，也许它会有所帮助。

# php - 错误：“您的请求超时。请重试请求。” 使用 Android 和 PHP 程序

> ID：11774517
> 
> 赞同：2
> 
> 时间：2012-08-02T09:21:07.527
> 
> 标签：php, android, hosting

我有一个与托管服务提供商上的服务器通信的 Android 应用程序。此应用程序发送一个 http 请求 php 脚本检索请求并在数据库中执行操作。我更改了数据库并调整了程序，现在我在服务器上收到错误：“您的请求超时。请重试请求。”

当我在 firefox 或 chrome 等浏览器中执行命令 http 时，命令会正确执行，但在执行代码时会发生错误。

这不是脚本或 http 请求，因此我根本看不到它可能会出现在哪里。你能帮助我吗？非常感谢你。

那里有Android代码：

```
public class ConnexionSQL extends AsyncTask<Object,Void, ArrayList<String[]> > {

private static ArrayList<String[]> lesMessagesEtDate;
private String mydataFromHMI;
private String myFichierPHPbase;
private ProgressDialog pd;
private String[] splitData;
private boolean isProblemConnexion;

public ConnexionSQL(Activity activity) {

    pd = new ProgressDialog(activity);
    lesMessagesEtDate = new ArrayList<String[]>();
    mydataFromHMI = "";
    myFichierPHPbase="";
    isProblemConnexion = false;
}

protected ArrayList<String[]> doInBackground(Object... parametres) {
    Object[] tabArg = parametres;
    ArrayList<String[]>  messagesDateEtLocalisation = new ArrayList<String[]>();
    pd.show();

     if (((String)tabArg[3]).equalsIgnoreCase("insert")){

         insertIntoBD((String)tabArg[0], (Context)tabArg[1], (String)tabArg[2]);

     }else if(((String)tabArg[3]).equalsIgnoreCase("connect")){

         messagesDateEtLocalisation = ConnexionBD((String)tabArg[0], (Context)tabArg[1], (String)tabArg[2]);
     }
    return messagesDateEtLocalisation;
}

protected void onPreExecute() {
    pd.setMessage("Chargement en cours");
    pd.show();
}

protected void onProgressUpdate(){
    pd.setMessage("Chargement en cours");
    pd.show();
}

protected void onPostExecute(ArrayList<String[]> array)
{
    pd.setMessage("Le chargement se termine");
    pd.dismiss();     

}

public void insertIntoBD(String dataFromHMI, Context context, String FichierPHPbase){

    mydataFromHMI = dataFromHMI;
    myFichierPHPbase = FichierPHPbase;

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    try{
        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
        HttpProtocolParams.setUseExpectContinue(params, false);  
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 10000);
        ConnManagerParams.setMaxTotalConnections(params, 1000);
        ConnManagerParams.setTimeout(params, 30000);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http",PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https",PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager manager = new ThreadSafeClientConnManager(params, registry);
        HttpClient httpclient = new DefaultHttpClient(manager, params);

        HttpPost httppost = new HttpPost("http://routeslibre.fr/"+ myFichierPHPbase + "?variable=" + mydataFromHMI);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        httpclient.execute(httppost);

    }
    catch(Exception e){
        Log.i("taghttppost",""+e.toString());
        isProblemConnexion = true;
    }

}

public ArrayList<String[]> ConnexionBD(String dataFromHMI, Context context,String FichierPHPbase) {

    mydataFromHMI = dataFromHMI;
    myFichierPHPbase = FichierPHPbase;

    String result = null;
    InputStream is = null;
    JSONObject json_data=null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    try{
        //commandes httpClient

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
        HttpProtocolParams.setUseExpectContinue(params, false);  
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 10000);
        ConnManagerParams.setMaxTotalConnections(params, 1000);
        ConnManagerParams.setTimeout(params, 30000);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http",PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https",PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager manager = new ThreadSafeClientConnManager(params, registry);

        HttpClient httpclient = new DefaultHttpClient(manager, params);             

        GestionStrings gestionString = new GestionStrings();
        splitData = mydataFromHMI.split(";;;");
        mydataFromHMI = gestionString.blancTraitement(splitData[0]) 
                + ";;;" 
                + gestionString.blancTraitement(splitData[1]) 
                + ";;;";

        HttpPost httppost = new HttpPost("http://routeslibre.fr/"+ myFichierPHPbase + "?variable=" + mydataFromHMI);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }
    catch(Exception e){
        Log.i("taghttppost",""+e.toString());
        isProblemConnexion = true;
    }

    //conversion de la réponse en chaine de caractère
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));

        StringBuilder sb  = new StringBuilder();

        String line = null;

        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
        }

        is.close();

        result = sb.toString();
        if (result.startsWith("<html>"))
        {
            isProblemConnexion = true;
        }
    }
    catch(Exception e)
    {
        Log.i("tagconvertstr",""+e.toString());
        isProblemConnexion = true;
    }
    //recuperation des donnees json
    try{
        JSONArray jArray = new JSONArray(result);

        for(int i=0;i<jArray.length();i++)
        {

            json_data = jArray.getJSONObject(i);
            String[] messageEtDate = new String[2];
            messageEtDate[0] = json_data.getString("message");
            messageEtDate[1] = json_data.getString("date");
            lesMessagesEtDate.add(messageEtDate);

        }
        //setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, lesMessages));
    }
    catch(JSONException e){
        Log.i("tagjsonexp",""+e.toString());
        isProblemConnexion = true;
    } catch (ParseException e) {
        Log.i("tagjsonpars",""+e.toString());
        isProblemConnexion = true;
    }
    if (isProblemConnexion){

        lesMessagesEtDate = new ArrayList<String[]>();
        lesMessagesEtDate.add(new String[]{"connexion_error_1234"});
        isProblemConnexion = false;
    }
    return lesMessagesEtDate;
} 
```

}

有php脚本代码：

```
$base = mysql_connect ('sql31.free-h.org:3306', '*****', '******'); 
mysql_select_db ('routeslibre', $base) ;  
$variable = $_GET['variable'];
$first_token  = strtok($variable, ";;;");
$second_token = strtok(";;;");
$req =mysql_query("SELECT message, date from routeslibre.routeslibre where departement='$first_token' AND      voie='$second_token' ORDER BY date");
$output=array();
while ($row=mysql_fetch_array($req)) {    
$output[]=$row;    
} 
//on encode en JSON 
print(json_encode($output));
mysql_free_result ($req); 
```

当我在“is.close();”行停止调试器时 值“db”等于“ `<html> Your request timed out. Please retry the request`”

如果你不介意，你能给我一个技巧，一个找到错误的方法吗？

我将这一行放在代码中： `int test = response.getStatusLine().getStatusCode();` 并且测试值为 408，因此（如网站所述）这意味着我的托管服务提供商有错误。但是为什么当我提出 http 请求时，从代码中检索：值`http://routeslibre.fr/"+ myFichierPHPbase + "?variable=" + mydataFromHMI`以及当我将它作为 chrome 或 firefox 放入 Web 客户端时，我的 php 脚本工作起来很发现......我不明白...... ???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:23:51.883

使用此代码，它不能完美地工作：有时它的工作有时不是。在执行操作上设置调试器时，会抛出异常，其值仅为“null”。你可以帮帮我吗 ？

这是不起作用的代码 find ：

```
HttpGet httpGet = new HttpGet(url);
HttpParams httpParameters = new BasicHttpParams();
// Set the timeout in milliseconds until a connection is established.
// The default value is zero, that means the timeout is not used. 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpClient.execute(httpGet); 
```

我找到了一个解决方案，我循环执行代码，直到我有请求（从服务器检索的状态等于 200），或者，如果请求没有提供任何结果，则会启动错误。这是我的解决方案：

```
 String httpRequest = new String("http://routeslibre.fr/"+ myFichierPHPbase + "?variable=" + mydataFromHMI);
        HttpPost request = new HttpPost(httpRequest); 
        HttpParams httpParameters = new BasicHttpParams();
        HttpProtocolParams.setVersion(httpParameters, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(httpParameters, HTTP.UTF_8);

        DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);

        HttpResponse response = null;
        for(int i= 0; i < 30; i++){
            response = httpclient.execute(request);
            if (response.getStatusLine().getStatusCode() == 200){
                break;
            }else if (i == 29){

                //ERROR CODE
            }
        } 
```

# php - 将日期与特定日期和 DateTime 与 Twig 中的字符串进行比较

> ID：11774520
> 
> 赞同：18
> 
> 时间：2012-08-02T09:21:14.647
> 
> 标签：php, twig

1.  当第一个来自 dababase 而第二个是明确的 - 2012-12-31 时，如何比较 Twig 中的两个日期？我试过了

    ```
    {% if  dom.dueDate|date('Y-m-d') > 2012-12-31 %} 
    ```

    但我没有得到我想要的结果。:(

2.  我有一个 DateTime 字段，但我在 Twig 中找不到 DateTime 的过滤器，当我使用`|date('Y-m-d')`它时只打印没有小时的日期:(

如果有人帮助我解决问题，我将非常高兴和感激！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-02T13:50:57.210

尝试时间戳进行比较：

```
{% if dom.dueDate|date('U') > '2012-12-31'|date('U') %} 
```

这增加了小时、分钟和秒

```
{{ dom.dueDate|date('Y-m-d H:i:s') }} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-14T07:48:49.757

从 twig 1.6+ 开始，[根据官方文档](http://twig.sensiolabs.org/doc/functions/date.html)比较日期的正确方法是使用以下`date`函数：

```
{% if dom.dueDate > date('2012-12-31') %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-21T20:56:38.153

```
{% if date(dom.dueDate) > date(2012-12-31) %} 
```

# css - 显示：块不堆叠导航元素

> ID：11774522
> 
> 赞同：0
> 
> 时间：2012-08-02T09:21:26.940
> 
> 标签：css, nav

我在让 nav 元素真正表现得像块元素时遇到了一些麻烦。我尝试使用 nav 和标签而不是通常的 ul 和 li 标签制作菜单。这并没有按计划进行。我的菜单一个接一个地显示，就好像 display:block css 没有效果一样。我想让菜单堆叠起来，而不是一个接一个地出现。

的HTML：

```
<nav id="mainmenu">
    <a href="#">Item1</a>
    <a href="#">Item2</a>
    <a href="#">Item3</a>
<nav>
<nav id="submenu">
    <a href="#">Item1</a>
    <a href="#">Item2</a>
    <a href="#">Item3</a>
<nav> 
```

CSS：

```
nav{
    display: block;
} 
```

编辑：

这就是我希望它的设置方式，但我更喜欢浮动 a 元素，这样我就不会遇到内联块的间距问题。

[http://jsfiddle.net/Kpv5H/2/](http://jsfiddle.net/Kpv5H/2/)

我仍然不明白为什么当 nav 元素被阻止时，浮动 a 标签会使所有 a 标签都显示为内联？

[http://jsfiddle.net/Kpv5H/4/](http://jsfiddle.net/Kpv5H/4/)

如果我取消浮动 a 标签，它们对齐正确，但我会丢失 a 标签顶部和底部的填充。如果我添加 display:block 来纠正所有标签堆叠在彼此之上。如果尝试使用浮动来纠正它：将显示留在内联。

a 标签上的内联块似乎可以修复它，但后来我得到了间距问题。

有没有办法堆叠 nav 元素并浮动 a 元素并仍然保留 a 元素的填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:25:58.400

**已编辑：** * *（在 OP 添加更多详细信息后）* *

**通过使用`INLINE-BLOCK`技术：**

通过使用`inline-block`如果您设置`font-size:0px;`（`nav`具有元素的主容器`inline-block`），那么您将不会获得由以下原因引起的额外间距`inline-block`

[**看演示**](http://jsfiddle.net/akhurshid/zmXNn/)

如果不添加`font-size:0px;`，`nav`它将如下所示：

[**看演示**](http://jsfiddle.net/akhurshid/zmXNn/1/)

**通过使用`FLOAT`技术：**

您需要添加`overflow:hidden`和 a`width`以防止您的`nav`元素浮动。

请参阅下面的 CSS 中的更改：

```
nav {
    display: block;
    overflow:hidden; /* Added */
    width: 100%; /* Added */
}

nav a {
    float: left;
    padding: 2em;
}​ 
```

[**看演示**](http://jsfiddle.net/akhurshid/wHKtL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-07T02:43:56.800

这是我为实现这一目标所做的

```
nav a{
    display: block;
} 
```

# asp.net - 多视图中的 ASP.NET Gridview

> ID：11774523
> 
> 赞同：0
> 
> 时间：2012-08-02T09:21:38.133
> 
> 标签：asp.net, gridview, datasource, multiview

我有一个用户必须逐步填写的页面。为此，我有这 4 个视图的多视图，每个视图都包含网格和上一个/下一个按钮。每个网格都有不同的数据源，这些数据源是 CslaDatasourse。问题是在上一个按钮单击网格的内容变空。我无法控制它。这是cs文件的结构：

```
protected void Page_Load(object sender, EventArgs e)
{

}
protected void CslaDataSource1_SelectObject(object sender, Csla.Web.SelectObjectArgs e)
{
   PersonList list = PersonList.GetList();
   e.BusinessObject = list ;
}
protected void PrevBtn1_Click(object sender, EventArgs e)
{
   MultiView1.ActiveViewIndex = 0;
} 
```

搜索了很多解决方案，但找不到有效的解决方案。如果您建议我为这种类型的结构化页面提供另一种方式，我将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:29:00.057

点击 Prev_button 时，您将得到空列表。请通过页面生命周期。

对于每个事件，您将加载页面。

我认为..这足以理解 bcos 我不知道你的应用程序..我面临同样的问题，bt 我解决了。

# svn - 将更改从 subversion 存储库推送到实时服务器

> ID：11774524
> 
> 赞同：0
> 
> 时间：2012-08-02T09:21:39.757
> 
> 标签：svn

我正在实现一个系统，将更改提交到颠覆存储库。希望这些更改立即推送到远程服务器（最好没有 .svn 垃圾）。

我正在提交后挂钩中查看 svn export 命令，但这是否只推送更改？它如何与远程服务器进行身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:46:44.320

您确定要将 Subversion 的每个修订版自动推送到服务器吗？我认为您想进行一些测试，然后挑选您想要部署的修订版。

即使您可以使用提交后挂钩，这也不是一个好主意。用户在继续使用 Subversion 之前将被卡住，等待钩子完成。基本上，看起来 Subversion 每次提交都需要 10 到 20 秒（也就是说，如果您可以在 10 到 20 秒内部署整个存储库！）

处理这个问题的最好方法是使用 Jenkins。安装 Jenkins 并使其启动和运行大约需要 30 分钟。（这是一项*网络服务*，因此您可以通过浏览器访问它）。您还需要 30 分钟才能使部署正常工作。

是的，我要求您安装一个全新的网络服务器，但您不应该花费超过一两个小时的时间来让一切按照您想要的方式运行。这将比测试和让提交后挂钩工作快得多。

Jenkins 将监视您的 Subversion 存储库。当它检测到更改时，它可以运行部署脚本。例如，对服务器执行 rsync。甚至可能在实施更改之前关闭服务器。

这也有很多优点：

*   Jenkins 将保留所有部署的完整记录。
*   Jenkins 可以让您知道部署是否成功或现在。
*   您可以轻松访问更改历史记录。

而且，您可以扩展此功能。例如，我提到在每次更改后进行部署可能不是一个好主意。也许您可以设置一个测试服务器，并让 Jenkins 部署到该服务器并运行测试。Jenkins 可以直接在 Jenkins 内部报告测试结果。如果所有测试都通过，则让 Jenkins 部署到生产服务器。

或者，也许您正在谈论部署到测试服务器而不是生产。好的，让 Jenkins 部署到测试服务器并运行测试。然后，您可以检查测试，然后在 Jenkins 内部一键部署到生产服务器。

也许您只想在服务器不那么忙的特定时间进行部署。您可以在 Jenkins 中设置第二个作业，当您的系统上没有那么多用户时，该作业仅在凌晨 2:00 运行。

* * *

也不，您不必使用 Jenkins。还有很多其他的持续构建系统。一些开源的，但一些相当不错的专有（即花钱）系统

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:28:26.580

*   svn export 不仅会发送更改。但是您可以导出到本地目录，并使用 rsync（它只会发送更改）。
*   身份验证将由 rsync 处理。您可以使用不带密码的密钥为您自动执行此操作，但建议使用权限尽可能少的用户。

# msmq - NServiceBus 无法启动 - MessageForwardinginCaseofFaultConfig 丢失

> ID：11774526
> 
> 赞同：4
> 
> 时间：2012-08-02T09:21:47.783
> 
> 标签：msmq, nservicebus

嗨，我正在尝试开始使用 NServiceBus 进行开发，但是第一步我失败了。

我已经从命令行运行*RunMeFirst.bat /i*并且所有依赖项都是正确的。

```
c:\Users\xxxxx\Desktop\NServiceBus.3.0.0>.\binaries\NServiceBus.Host.exe /installInfrastructure
Running infrastructure installers and exiting (ignoring other command line parameters if exist).
Starting installation of PerformanceCounters
Category NServiceBus already exist, going to delete first
Installation of PerformanceCounters successful.
Checking if MSMQ is installed.
MSMQ is installed.
Checking that only needed components are active.
Installation is good.
Checking that DTC is configured correctly.
DTC is configured correctly.
DTC is good. 
```

但是，当我尝试创建一个简单的程序并从中调用 NServiceBus.exe 时，它​​会失败并出现以下错误

```
2012-08-02 10:19:48,922 [1] WARN  MessageForwardingInCaseOfFault [(null)] <(null)> - Could not find configuration sectio
n 'MessageForwardingInCaseOfFaultConfig'. Going to try to find the error queue defined in 'MsmqTransportConfig'.
2012-08-02 10:19:48,951 [1] FATAL NServiceBus.Hosting.GenericHost [(null)] <(null)> - System.Configuration.Configuration
ErrorsException: 'MessageForwardingInCaseOfFaultConfig' configuration section is missing and could not find backup confi
guration section 'MsmqTransportConfig' in order to locate the error queue.
   at NServiceBus.ConfigureFaultsForwarder.MessageForwardingInCaseOfFault(Configure config) in d:\BuildAgent-03\work\nsb
.masterbuild0\src\impl\faults\NServiceBus.Faults.Forwarder.Config\ConfigureFaultsForwarder.cs:line 44
   at NServiceBus.Hosting.Windows.Profiles.Handlers.ProductionProfileHandler.NServiceBus.Hosting.Profiles.IHandleProfile
.ProfileActivated() in d:\BuildAgent-03\work\nsb.masterbuild0\src\hosting\NServiceBus.Hosting.Windows\Profiles\Handlers\
ProductionProfileHandler.cs:line 19 
```

任何解决此问题的帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T17:51:57.260

当消息失败时，NSB 将重试该消息，然后将其转发到另一个队列，以便它可以继续处理。您需要将以下内容添加到您的配置文件中：

```
<section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />

<MessageForwardingInCaseOfFaultConfig ErrorQueue="nservicebus_error" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-01T13:30:25.753

只是为了给亚当的答案添加一些细节，配置文件是 web.config ，父标签如下：

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
    <configSections>
      <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
      ...
    </configSections>
    <MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />
    ...
</configuration> 
```

# java - Java 正则表达式不起作用

> ID：11774527
> 
> 赞同：0
> 
> 时间：2012-08-02T09:21:47.477
> 
> 标签：java, regex

有一个轻微的正则表达式问题。我写了以下代码来检查一个单词是否包含在字符串中。

```
boolean matches = Pattern.matches("\\b" + Pattern.quote(item.name) + "\\b", nap.code); 
```

item.name 将类似于 "half" nap.code 将类似于 "int halfOfFour() { return half(4); }"

然而，我的模式匹配返回错误......我在这里做错了什么？

另外...如果单词包含在字符串中，是否无论如何都会使此返回错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:24:12.897

我认为模式匹配将匹配*整个*字符串而不仅仅是它的一部分。所以前缀 .* 和后缀 .* 或其他东西。

分别使用模式和匹配，然后在匹配器中使用“find()”来查找子匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:24:08.837

该`Java.lang.String.contains()`方法不会做你想要的吗？

```
boolean contains = nap.code.contains(item.name); 
```

编辑：仅当单词存在时才返回 true，使用 \W 模式（非单词字符）应该可以帮助您：

```
\W*(YOUR_WORD)\W* 
```

# java - 简历内容的正则表达式

> ID：11774536
> 
> 赞同：0
> 
> 时间：2012-08-02T09:22:22.190
> 
> 标签：java, regex, owasp, esapi

我需要接受简历内容作为文本并处理内容。在处理之前，我想使用`ESAPI.validator().isValidInput`来验证简历内容以确认它不包含恶意代码。的参数之一`isValidInput`是要针对输入进行验证的正则表达式。请帮我为简历内容写一个正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:14:44.323

您可以尝试要求上传为特定文件格式，例如`.txt`.

一个正则表达式可能是：`\w:\\(.+\\)*?(.+\.txt)`

我说`.txt`纯文本文件应该不太可能嵌入恶意代码。搜索文件的实际文本并不是您真正的问题，攻击更有可能来自同时上传。

# mysql - SQL 查询连接 2 个表并仅显示具有匹配数据的行

> ID：11774540
> 
> 赞同：1
> 
> 时间：2012-08-02T09:22:40.213
> 
> 标签：mysql, sql, zenoss

更新：

好的，所以您的回复中的查询效果很好！现在，我遇到了一些不太理想的输出。在日志表中出现有时同一个evid下有多个日志。这会导致查询返回具有相同事件信息的多行。有没有办法将所有 log.text 与匹配的 log.evid 连接起来，这样输出仅限于所需的信息？

我正在尝试制定一个 mysql 查询，该查询将从表中选择某些列，并将它们与同一数据库上不同表中的某些列进行比较。我只想显示具有匹配事件 ID 的行（evid）。这两个表被命名`status`并且`log`我需要的`events.log`表中唯一的列被命名`evid`和`text`

我提出的查询显示了 Zenoss 控制台中的所有活动警报：

```
SELECT device, component, summary, count, ownerid, evid
  FROM events.status
 WHERE severity >2; 
```

基本上我需要弄清楚如何加入`events.status`并且`events.log`只显示匹配的行`evid`

我只有对该数据库的读取权限，但如果需要写入权限，我可能会甜言蜜语让合适的人获得访问权限。

非常感谢您的帮助，因为我是一个 DB 菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:27:11.567

```
SELECT device, component, summary, count, ownerid, l.evid,l.text  
FROM events.status s inner join events.log l on s.evid=l.evid 
WHERE severity >2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:27:15.517

使用内连接

```
 select l.text, s.device, s.component, s.summary, s.count, s.ownerid, s.evid 
 from  events.status s inner join events.logs l on s.evid=l.evid 
 where s.severity>2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:27:23.280

尝试

```
SELECT S.device, S.component, S.summary, S.count, S.ownerid, L.evid,L.text 
FROM events.status S
join events.log L
on S.evid=L.evid
WHERE S.severity >2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:28:33.270

```
SELECT device, component, summary, count, ownerid, st.evid, lg.text
  FROM events.status st
 INNER JOIN events.log lg ON st.evid = lg.evid
 WHERE st.severity >2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:29:10.483

```
SELECT device, component, summary, count, ownerid, events.status.evid, events.log.* 
FROM events.status, events.log 
WHERE events.status.evid = events.log.evid
AND severity >2; 
```

# java - DOM 解析器在 servlet 中失败

> ID：11774542
> 
> 赞同：0
> 
> 时间：2012-08-02T09:22:47.197
> 
> 标签：java, servlets

我被 servlet 中的 DOM 解析器困住了。这是代码：

```
 import java.awt.List;
    import java.io.File;
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.util.ArrayList;
    import java.util.Collections;
    import java.util.Enumeration;
    import java.util.HashSet;

    import javax.lang.model.element.Element;
    import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    import javax.swing.text.Document;
    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;

    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;

    import javax.xml.parsers.DocumentBuilderFactory;
    import javax.xml.parsers.DocumentBuilder;

    import org.w3c.dom.NodeList;
    import org.w3c.dom.Node;

    import java.io.File;
    import java.util.ArrayList;

    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.util.ArrayList;
    import java.util.Collections;
    import java.util.Enumeration;
    import java.util.HashSet;

    //import com.sun.xml.internal.bind.v2.schemagen.xmlschema.List;

    public class RoutingParser extends HttpServlet {

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

     response.setContentType("text/html");
     PrintWriter writer = response.getWriter();

     System.out.println("Routing Parser is accessible");

     System.out.println("i reached servlet");
          try {

              ArrayList inputlist1= new ArrayList();
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("D");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("N");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("US")
                inputlist1.add("%");
                inputlist1.add("%");
                inputlist1.add("%");

                ArrayList list1=new ArrayList();

                System.out.println("i reached servlet");
                  try {

                    File fXmlFile = new File("c:\\eclipse\\RoutingTable.xml");
                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    org.w3c.dom.Document doc = dBuilder.parse(fXmlFile);
                    doc.getDocumentElement().normalize();

                    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
                    NodeList nList = doc.getElementsByTagName("Entry");
                    System.out.println("-----------------------");

                    for (int temp = 0; temp < nList.getLength(); temp++)
                    {

                       Node nNode = nList.item(temp);
                       System.out.println("temp value is: " + temp);
                       if (nNode.getNodeType() == Node.ELEMENT_NODE) 
                       {

                          Element eElement = (Element) nNode;

                          //some piece of code related to arraylist

                          System.out.println("checking the node number::::::::::: " + temp);

                          int match_count=0;
                          //loop around the internal elements and check for equality.
                          for (int temp1=0; temp1< 25; temp1++)
                          {
                              //some piece of code to validate data
                          }

                          //if the count is 25, it means it has not broken due to inequality in between and thus return the authorizer in that particular node.
                          if (match_count == 25){
                             //some piece of code for more validation
                          }
                          else{
                              System.out.println("This combination is not supported");
                          }

                       }

                    }
                  } catch (Exception e) {
                    e.printStackTrace();
                  }

                  System.out.println("array list in end is: " + list1);
          } finally {
              System.out.println("in final block");
          }
              }

              private static String getTagValue(String sTag, Element eElement) {
                NodeList nlList = ((org.w3c.dom.Document) eElement).getElementsByTagName(sTag).item(0).getChildNodes();

                    Node nValue = (Node) nlList.item(0);

                return nValue.getNodeValue();
              }

} 
```

当我将它作为普通的 java 代码运行时，此代码工作正常。但是，如果我将相同的 java 代码放在 servlet 中，则这行代码会出现以下错误： Element eElement = (Element) nNode;

```
 INFO: Server startup in 744 ms
    Routing Parser is accessible
    i reached servlet
    i reached servlet
    Root element :Data
    -----------------------
    temp value is: 0
    java.lang.ClassCastException:         com.sun.org.apache.xerces.internal.dom.DeferredElementImpl cannot be cast to javax.lang.model.element.Element
at RoutingParser.doGet(RoutingParser.java:116)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:403)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:301)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:162)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:140)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
    array list in end is: []
    in final block 
```

* * *

有人可以帮我解决这个问题吗？我被困住了，无法继续。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:32:16.780

演员失败，因为你正在使用

```
import javax.lang.model.element.Element; 
```

代替

```
import org.w3c.dom.Element; 
```

更正（并清理）您的导入语句。javax.lang.model.element.Element 与 DOM 元素无关，删除它。

# localization - NSIS MessageBox 中的特殊字符（带波浪号）

> ID：11774549
> 
> 赞同：1
> 
> 时间：2012-08-02T09:23:15.640
> 
> 标签：localization, special-characters, nsis

我在使用以下消息框和西班牙语字符时遇到了一些问题：

```
MessageBox MB_OK "Se ha producido un error durante la instalación del Framework .NET." 
```

这实际上表明：

```
Se ha producido un error durante la instalaci?n del Framework .NET. 
```

没有 'ó' 字符。

我认为语言已正确加载，文件开头有以下几行：

```
;Loads the Nsis language file, necessary for unistall messages.
LoadLanguageFile "${NSISDIR}\Contrib\Language files\Spanish.nlf" 
```

我见过一些解决方案，但他们使用了非常不同的代码，我敢打赌有一种非常简单的方法可以做到这一点。非常感谢！

PD：我正在使用 NSIS 2.46。我知道我应该升级到 2.50，但现在不可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:59:27.857

您使用哪个版本的 NSIS？您确定西班牙语文件（经典 GUI 的 .nlf 和 MUI2 的 .nsh）是正确的吗？

如果他们没问题，那么尝试使用 NSIS 的 UNICODE 版本构建您的安装程序 - 从[http://www.scratchpaper.com/下载](http://www.scratchpaper.com/)

它完全支持 UNICODE - 带有所有特殊字符（如斯洛伐克语（ľščťžýáíéäňú）或中文、日文、...

# javascript - 根据 url 自动展开 JQuery 嵌套菜单

> ID：11774554
> 
> 赞同：1
> 
> 时间：2012-08-02T09:23:40.460
> 
> 标签：javascript, jquery, html

我正在使用它在我的网站中获取可扩展菜单

```
 $(document).ready(function () {                
            $('li.category').addClass('plusimageapply');
            $('li.category').children().addClass('selectedimage');
            $('li.category').children(":not(a)").hide();
            $('li.category').each(
            function (column) {
                $(this).click(function (event) {
                    if (this == event.target) {
                        if ($(this).is('.plusimageapply')) {
                            $(this).children().show(200);
                            $(this).removeClass('plusimageapply');
                            $(this).addClass('minusimageapply');
                        }
                        else {
                            $(this).children(":not(a)").hide(200);
                            $(this).removeClass('minusimageapply');
                            $(this).addClass('plusimageapply');
                        }
                    }
                });
            }
            );
        }); 
```

如何让它自动扩展到当前菜单？我的链接格式为

```
/Article/Category1/Category3 
```

如果我在此 URL，我希望扩展 Category1 下的 Category3。菜单项的格式

```
<li class="category">
    <a href"/Article/Category1/Category3/">Category3</a>
    <ul> ... [more sub-categories] ... </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:25:39.583

用于`window.location.pathname`将其与您的菜单链接相匹配。

请参阅此问题以了解如何使用 jQuery 执行此操作：

[使用 jQuery 将当前 URL 匹配到 UL 中的 herf 并在匹配时添加类](https://stackoverflow.com/questions/3223005/use-jquery-to-match-current-url-to-herf-in-a-ul-and-add-class-if-matched)

# asp.net-mvc-3 - MVC 路由无法按预期工作/如何调试

> ID：11774558
> 
> 赞同：0
> 
> 时间：2012-08-02T09:23:48.863
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我正在尝试调试路由错误，该错误没有拾取我的两个整数

我的两个问题是：

1.  为什么请求的链接没有正确匹配？
2.  如何调试此类问题？我已经尝试过 Phil Haacks routedebugger 和 Glimpse，但是这些仅在请求的输出没有错误时才有效。理想情况下，我想看看哪个路由与这个错误请求匹配。

**我的控制器看起来像：** ![控制器文本](../Images/703d2a67bd627171f026299c4b9a10d3.png)

**我的 Global.asax 路线** ![路由](../Images/d0838204fd3dfda8ca10edeea34f7dd6.png)

**我收到** 的错误第一个 int 是 -1 但是当它是正数时它仍然会出错。 ![实际错误](../Images/d63aa64ac93f667f620a47f13903ec66.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:09:07.503

因为我完全饿了，我要把我的正确评论放在这里.. :D

UrlParameter.Optional 将修复它，但是，这可能是由于某处的路由冲突，因为我在本地测试中不需要这样做。

此外，对于其他想知道的人来说，对于约束中的负数，您需要有一个像这样的正则表达式：`-{0,1}\d+`

# regex - 在 Mac OS X 上批量重命名屏幕截图

> ID：11774560
> 
> 赞同：0
> 
> 时间：2012-08-02T09:23:52.867
> 
> 标签：regex, bash, grep

自定义批量重命名文件

您好，Mac OS X 以很长的文件名格式截屏。我想重命名位于路径 /Users/me/desktop 中的任何一个。

以下是文件名的一些示例：

```
Screen Shot 2012-08-02 at 1.15.29 AM.png
Screen Shot 2012-08-02 at 1.22.12 AM.png
Screen Shot 2012-08-02 at 1.22.14 PM.png
Screen Shot 2012-08-02 at 1.22.16 PM.png 
```

曾经有人告诉我，不要针对 an 执行 for 循环，`ls`所以这次我尝试使用 globbing。到目前为止，这就是我所能想到的，但我知道如何包装表达式，然后以我想要的格式将其重命名为文件：

```
 for i in *; do
      screen_name=$(echo $i | grep --only-matching --extended-regexp '(Screen\ Shot)\ [0-9]+-[0-9]+-[0-9]+\ at\ [0-9]+\.[0-9]+.[0-9]+.[AP]M\.png');
      echo $screen_name;
 done 
```

我不确定时间的时间，在所有时间段上假设可能的 2 位数字可能是最安全的，所以 1.14.29 和 01.15.29

```
ss.08-02-12-01.15.29-AM.png
ss.08-02-12-01.22.12-AM.png
ss.08-02-12-01.22.14-PM.png
ss.08-02-12-01.22.16-PM.png 
```

最终目标是一个 bash 脚本，它在运行时会将上述路径中的所有文件重命名为列出的新格式。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:13:24.123

```
for i in "Screen Shot"*.png; do
    new=`echo $i |awk '
        {
            split($3,a,"-")
            split($5,b,".")
            printf("ss.%s-%s-%s-%02d.%02d.%02d-%s",a[2],a[3],a[1],b[1],b[2],b[3],$6)
        }
    '`
    mv "$i" $new
done 
```

**前：**

```
Screen Shot 2012-08-02 at 1.22.16 PM.png
Screen Shot 2012-09-02 at 13.42.06 PM.png 
```

**后：**

```
ss.08-02-2012-01.22.16-PM.png
ss.09-02-2012-13.42.06-PM.png 
```

**编辑：** 正如[史蒂夫建议的那样](https://stackoverflow.com/users/751863/steve)

```
printf("ss.%s-%s-%s-%02d.%02d.%02d-%s",a[2],a[3],substr(a[1]3,2),b[1],b[2],b[3],$6) 
```

产生

```
ss.08-02-12-01.22.16-PM.png
ss.09-02-12-13.42.06-PM.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:44:34.237

您可以使用流编辑器**sed**使用正则表达式进行匹配和替换。你会做这样的事情

```
echo $i | sed "s/PATTERN/REPLACE/" 
```

从 $i 中生成文件名。**sed**将从标准输入中读取，搜索（**s**命令）模式并将其替换为 REPLACE。

**在您的 REGEXP 模式中，您可以通过用括号()**将它们括起来来标记单独的组，在大多数情况下，您必须用**()**转义它们并使用**#**访问替换模式中的这些部分，其中 # 是子组开始的编号从 1\. 下面是一个简单的例子：

```
echo "ScreenShotXYZ.png" | sed "s/ScreenShot\(.*\)\.png/\1.png/" 
```

在这里，XYZ 由括号中的表达式匹配，并且可以使用替换字符串中的 \1 访问。整个图案因此被 XYZ.png 取代。

因此，使用您的正则表达式进行匹配，在相关块周围放置括号并执行类似的操作

```
ss.\1.\2.(and so on) 
```

为您的替换模式。仍然有一些方法可以优化该过程，首先使用 sed 将破折号替换为点，然后将整个时间块分组为一个模式，但首先这样编码更容易。

# ruby-on-rails - 在Ruby中用给定数字加密给定字符串的方法

> ID：11774571
> 
> 赞同：0
> 
> 时间：2012-08-02T09:24:56.510
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

任何人都可以帮我编写一个带有 2 个参数（一个字符串和一个数字）的方法。该方法应返回用给定数字加密的字符串。

例如：

我的字符串：ABCDE 我的号码：3 输出应该是：DEFGH

注意：字符串和数字不是常数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:28:12.973

```
s = "ABCDE"
n = 3
s.chars.map{|ch| (ch.ord + n).chr}.join
# => "DEFGH" 
```

# php - 我可以通过在子目录中写入 .htaccess 文件来捕获根目录的请求吗？？？

> ID：11774575
> 
> 赞同：0
> 
> 时间：2012-08-02T09:25:04.537
> 
> 标签：php, jquery, apache, .htaccess

所有我有一个名为“/home/pradeep/xxx/yyy”的目录我已经将我的php页面放在“yyy”目录我的文档根目录是“/home/pradeep/”我已经在“yyy”目录中编写了一个.htaccess文件。我的ajax url 是 www.domain.com/api。我想在“yyy”目录中的 php 文件中获取该响应。所以我想捕获根 url 请求，或者我必须在 ajax 之前在 javascript 中捕获 url 请求被调用。（*我无法从调用 ajax 调用的位置修改我的 javascript 文件，我无法将 .htaccess 放在根目录“/home/pradeep”中）

问：？如何在我的子目录中捕获 www.domain.com/api 请求和响应并在 .htaccess 的帮助下对其进行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:29:24.760

不幸的是，如果您想捕获对像 www.domain.com/api 这样的 url 的请求，您将需要在 /home/pradeep/ 或 /home/pradeep/api/ 中放置一个 htaccess。（假设 www.domain.com 指向 /home/pradeep/）

# c# - 图表的依赖属性

> ID：11774577
> 
> 赞同：0
> 
> 时间：2012-08-02T09:25:15.133
> 
> 标签：c#, wpf, xaml, dependency-properties

我有一个依赖属性，我想在图表上显示。

```
namespace ViewModels
{
  public partial class MyVM: DependencyObject
  {
    public Double TotalPowerSoFar
        {
            get { return (Double)GetValue(TotalPowerSoFarProperty); }
            set { SetValue(TotalPowerSoFarProperty, value); }
        }

        // Using a DependencyProperty as the backing store for GroupReadingsBy.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty TotalPowerSoFarProperty =
            DependencyProperty.Register("TotalPowerSoFar", typeof(Double), typeof(EstimateVM), new UIPropertyMetadata(0.0));

    TotalPowerSoFar=5.0;
   }
} 
```

我想我会做这样的事情：

```
<UserControl x:Class="Workspace"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:DV="clr-namespace:System.Windows.Controls.DataVisualization;assembly=System.Windows.Controls.DataVisualization.Toolkit"
             xmlns:DVC="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300">
<Grid>
<DVC:Chart Name="mcChart"   Foreground="DarkBlue" Title="Area Chart" LegendTitle="Month Rating" >
                    <DVC:Chart.Series>
                        <DVC:ColumnSeries DependentValueBinding ="{Binding EstimatedTotalPower}"/>
                    </DVC:Chart.Series>
                </DVC:Chart>
</Grid> 
```

但据我了解，绑定是错误的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:34:33.523

首先，依赖属性只对`DependencyObject`后代有意义，并且您的视图模型不是`DependencyObject`.

第二，如果您想扩展现有依赖对象的功能（`Chart`在您的情况下），您应该使用[**附加**](http://msdn.microsoft.com/en-us/library/ms749011.aspx)属性 - 它们可以*附加*到 DO 并将数据绑定到您的视图模型。

# android - 三星 Galaxy Tab 10.1 中的 HTML SWF 文件

> ID：11774580
> 
> 赞同：0
> 
> 时间：2012-08-02T09:25:24.357
> 
> 标签：android, flash-cs5, galaxy-tab

我在三星 Galaxy Tab 10.1 上打开一个 URL 以查看包含 Flash 站点的 HTML 文件。swf 尺寸为 1280 像素 x 800 像素和 24 FPS。

html 文件可以在 PC/Mac 浏览器中正确播放。

但是在三星 Galaxy Tab 10.1 (Android 3.1) 浏览器中，swf 文件的播放速度很慢。

我应该以较低的 FPS 速率重新发布电影吗？任何其他解决方案/想法请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:53:59.913

我安装了智能 SWF 播放器[https://play.google.com/store/apps/details?id=com.andy.flash&hl=en](https://play.google.com/store/apps/details?id=com.andy.flash&hl=en)。

打开文件 .swf

它会播放！

# sharepoint - 过滤共享点视图

> ID：11774581
> 
> 赞同：0
> 
> 时间：2012-08-02T09:25:25.307
> 
> 标签：sharepoint, sharepoint-2010

按年龄过滤最少人的最不痛苦的方法是什么

例如，仅根据生日显示 60 岁以上的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:49:37.787

使用内容查询 Web 部件。

假设一个名为 DOB 的日期字段，将内容查询 Web 部件添加到页面并编辑该 Web 部件。展开查询部分并将您的列表添加到`Show items from the following list`.

然后在`Additional Filters`>`Show items when:`选择`DOB`字段下并`is less than or equal to`输入`Custom Value or Query`-21915 然后单击确定，Web 部件应显示 60 岁以上的人。

# macos - Mac automator：在 shell 和咆哮通知中使用变量

> ID：11774582
> 
> 赞同：2
> 
> 时间：2012-08-02T09:25:32.750
> 
> 标签：macos, terminal, applescript, automator, growl

我正在使用应用程序自动文件接收设置为变量的文件`file`，然后使用 Ask For Text 设置一个名为`name`.

我需要在两个地方使用它：

1.  一个shell脚本
2.  在咆哮通知中

我尝试了很多组合，但我无法让变量在其中任何一个中起作用。什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:37:07.010

尝试将其添加到您的自动化工作流程中：

```
on run {input, parameters}
    -- Get name from automator
    tell application "Finder" to set theName to name of file input

    -- pass name into shell script and get variable back
    set xxx to do shell script "echo " & theName

    display dialog xxx
end run 
```

![在此处输入图像描述](../Images/96311988769985157845818f89c0b5fc.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T17:04:30.167

您不需要键入任何脚本。如果您转到 Growl 应用程序，请右键单击，显示内容，Contents--->Library-> Automator

双击该文件，Automator 将添加咆哮动作。享受 ;）

# java - 试图在java中将xslt应用于xml

> ID：11774587
> 
> 赞同：0
> 
> 时间：2012-08-02T09:25:45.437
> 
> 标签：java, xml, xslt

我一直在开发一个将表格内容打印为 XML 的 Web 服务——我使用了 WebRowSet 来执行此操作。

```
response.setContentType("text/xml");
WebRowSet webRowSet = new WebRowSetImpl();
webRowSet.writeXml(resultSet, response.getWriter()); 
```

（HttpServletResponse 响应）

虽然这一切都很好，但我根本不知道如何将样式表应用于 XML。我尝试使用变压器来做到这一点。

```
webRowSet.writeXml(resultSet, OutputStream);
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer(new StreamSource("file.xsl"));
transformer.transform(new StreamSource(InputStream), 
                      new StreamResult(response.getWriter())); 
```

我不明白 writeXml 中的 OutputStream 和 StreamSource 中的 InputStream 是什么。（我不想将数据保存在文件中）

[我发现了一个可能相关的问题？](https://stackoverflow.com/questions/5778658/java-converting-from-outputstream-to-inputstream)

非常感谢我如何解决这个问题的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:39:05.557

看起来您真正想要做的是从结果集中获取一些/所有字段并将其写入已知的输出格式。

根据您要输出的数据的复杂性，除了使用 XSL，您还可以做的是将数据从结果集中获取到 Java 的 Collection 对象中，并将该数据传递给 Velocity 或 FreeMarker 等模板引擎。

您的 Velocity/Freemarker 模板将（或多或少）采用您预期输出的格式，因此更易于维护。

不利的一面是，如果您的结果集中的数据相当丰富，您的数据结构会变得复杂，并且您需要在将数据传递到模板引擎之前创建 JavaBean 来表示数据。这将是更多的工作，但您需要平衡它与编写和维护 XSL 的工作量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:38:20.583

您可以`webRowSet`将其 XML 写入 a [`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)（最好包装在 a[`BufferedOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedOutputStream.html)中以用于缓冲目的）。

接下来，您可以指示您`Transformer`从 a 中读取[`ByteArrayInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html)，并使用`byte[]`您从`ByteArrayOutputStream`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:39:18.303

您有以下步骤：
`WebRowSet`将数据作为 xml 写入输出流 --> 以某种方式将其转换为输入流 --> 将输入流传递给转换器并将结果写入响应

第二步很棘手。实现方法之一是如您所述写入文件。您还可以使用以下命令将其写入内存`ByteArrayOutputStream`：

```
ByteArrayOutputStream tempStream = new ByteArrayOutputStream();
webRowSet.writeXml(resulSet, tempStream);
...
transformer.transform(new StreamSource(new ByteArrayInputStream(tempStream.toByteArray())),
                      new StreamResult(response.getWriter())); 
```

除非您有无法放入内存的大型 xml，否则它应该可以工作。通过这种方式，您可以写入文件或寻找不写入内存的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:40:46.633

快速说明您有关流的问题：Web 服务器也使用流来写入数据，正如您在代码的最后一行中看到的那样。

转换对象写入的输出流是响应流。

# windows-runtime - 我可以将 winRT 项目引用添加到经典类库项目吗？

> ID：11774589
> 
> 赞同：0
> 
> 时间：2012-08-02T09:25:48.913
> 
> 标签：windows-runtime

当我尝试这样做时，VS 给了我错误。然而，它显示了可供参考的项目。是否可以以某种方式将 winRT 项目引用添加到经典类库项目？

如果没有，如何连接两个世界，让通用逻辑可以存储在一个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:28:18.973

简短的回答是肯定的。长答案是它不受支持，并且带有一些您需要了解的警告。

在此处查看我的答案： [在非 Metro 应用程序中使用自定义 Windows 运行时组件](https://stackoverflow.com/questions/12136585/using-custom-windows-runtime-components-in-non-metro-applications/12136586#12136586)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:34:04.717

VS2012 添加了“可移植类库”项目类型，允许您选择多个目标，包括从一个程序集中定位 WinRT 和完整 .Net 4.5 的能力。

请参阅[http://msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)。

# google-app-engine - 即使在编辑 SPF 记录后，从 GAE 发送的邮件也会进入 hotmail 的垃圾邮件文件夹

> ID：11774590
> 
> 赞同：4
> 
> 时间：2012-08-02T09:25:49.740
> 
> 标签：google-app-engine

只是想知道其他人是否找到了以下解决方案：

--> 我有一个在 GAE 上运行的应用程序发送电子邮件

--> 这些邮件发送到 gmail 帐户没有问题，但到达 hotmail 的垃圾邮件文件夹

--> 我已将名称服务器中的 SPF 记录调整为“v=spf1 include:_spf.google.com ~all”，但这并没有帮助

过去有一些关于这个主题的讨论，但不清楚除了要求人们在联系人列表中添加应用程序电子邮件之外是否还有其他解决方案。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:41:11.843

既然[AppEngine 最终支持它](http://code.google.com/p/googleappengine/issues/detail?id=3161)，您还应该添加[DKIM](http://support.google.com/a/bin/answer.py?hl=en&answer=174124)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:08:50.183

For anyone who is having the same issue.

**Problem description**

Mail sent from Google App Engine are delivered correctly to gmail.com but arrive in the spam folder of hotmail.com and are even automatically deleted from other

**Solution**

Two steps to follow:

1.  In the SPF record in the nameserver, include "v=spf1 include:_spf.google.com ~all"
2.  If you email accounts are managed by Google Apps, [follow the DKIM procedure](http://support.google.com/a/bin/answer.py?hl=en&answer=174124). This involves adding TXT records in your nameserver. Some companies offer to update this on-line, I add to exchange emails with the support of my registrar.

# osgi - 未找到 felix org.hsqldb.jdbcDriver 中的 HSQLDB 包

> ID：11774595
> 
> 赞同：0
> 
> 时间：2012-08-02T09:26:04.993
> 
> 标签：osgi, bundle, hsqldb, apache-felix

我有一些代码，加载了什么：1）HSQLDB v. 2.2.8 捆绑包 2）与服务捆绑：

```
 package ihtika2.i_internalfunctions.service;

import com.google.code.ihtika.Vars.Ini;
import java.awt.Desktop;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.sql.DriverManager;

/**
 *
 * @author Arthur
 */
public class InternalFunctions implements InternalFunctionsInterface {

    // launch browser
    public void launchBrowser(String uriStr) {
        Desktop desktop;
        if (Desktop.isDesktopSupported()) {
            desktop = Desktop.getDesktop();
            if (desktop.isSupported(Desktop.Action.BROWSE)) {
                // launch browser
                URI uri;
                try {
                    uri = new URI("http://" + uriStr);
                    desktop.browse(uri);
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                } catch (URISyntaxException use) {
                    use.printStackTrace();
                }
            }
        }
    }

    public void initDB() {
        try {
            Class.forName("org.hsqldb.jdbcDriver");
            Ini.conn = DriverManager.getConnection("jdbc:hsqldb:file:Db/pages");
            Ini.stmt = Ini.conn.createStatement();
            Ini.rs = null;

            Ini.rs = Ini.stmt.executeQuery("select count(1) as qwe from "
                    + " information_schema.system_tables "
                    + "where table_schem = 'PUBLIC'"
                    + "and table_name = 'PAGES';");
            Ini.rs.next();
            if (Ini.rs.getInt("qwe") == 0) {
                Ini.stmt.executeUpdate("CREATE SEQUENCE SEQU");
                Ini.stmt.executeUpdate("CREATE CACHED TABLE PAGES (id bigint "
                        + "GENERATED BY DEFAULT AS SEQUENCE SEQU PRIMARY KEY, "
                        + "url varchar(7777), lastUpdateDate varchar(7777)) ");
                Ini.stmt.executeUpdate("CREATE CACHED TABLE LINKDATA (id int, "
                        + "nazvanie varchar(777), linkURL varchar(777), razmer varchar(777)) ");
                Ini.stmt.executeUpdate("CREATE INDEX linkDataID ON LINKDATA (id)");
                Ini.stmt.executeUpdate("CREATE INDEX pagesURL ON PAGES (url)");
            }
        } catch (Exception ex) {
            Ini.logger.fatal("Error on DB init", ex);
        }
    }
} 
```

3) 一些捆绑包，称为捆绑包 2。

```
 try {
        ServiceReference[] refs = context.getServiceReferences(
                InternalFunctionsInterface.class.getName(), "(Funct=IFuncts)");
        if (refs == null) {
            System.out.println("Not Found IFuncts on init");
        } else {
            InternalFunctions = (InternalFunctionsInterface) context.getService(refs[0]);
        }
    } catch (Exception ex) {
        Ini.logger.fatal("Error on IFuncts init", ex);
    }

    InternalFunctions.initDB(); 
```

在执行时，我在日志中收到错误：

```
 [FATAL] 2012-08-02 20:18 root (InternalFunctions.java:initDB:61)
Error on DB init
java.lang.ClassNotFoundException: org.hsqldb.jdbcDriver not found by ihtika2.I_InternalFunctions [7]
    at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1460)
    at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
    at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at ihtika2.i_internalfunctions.service.InternalFunctions.initDB(InternalFunctions.java:40)
    at ihtika2.mainform.IC_MainForm.<init>(IC_MainForm.java:66)
    at ihtika2.mainform.IC_MainForm$4.run(IC_MainForm.java:225)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

请建议 - 如何在其他包中使用 HSQLDB 包？

**我回答：解决方案是使用**

```
DriverManager.registerDriver(new JDBCDriver());
Ini.conn = DriverManager.getConnection("jdbc:hsqldb:file:Db/pages"); 
```

决定使用

```
Class.forName("org.hsqldb.jdbcDriver");
Ini.conn = DriverManager.getConnection("jdbc:hsqldb:file:Db/pages"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T09:25:09.500

不幸的是，这是一个对 OSGi 非常不友好的解决方案。你可能想看看H2。H2 实现了 OSGi 规范，它提供了 org.osgi.service.jdbc.DataSourceFactory 服务。您可能还想在 hsqldb 项目中提出一个错误并请求 OSGi 支持，为他们实现是微不足道的。

# html - 双向文本和数字

> ID：11774597
> 
> 赞同：4
> 
> 时间：2012-08-02T09:26:10.167
> 
> 标签：html, css, bidi

我有一个以两种语言显示的网站——英语和波斯语。列表项的标题**可以同时使用两种语言**。一切都好，直到这里，只要你有文本，它就会`direction:rtl`在 css 中使用。

但问题是**我也可以在标题内部或末尾有一个数字**（波斯语的书写和阅读与英语相同 - 从左到右）。这最终会产生一个问题，因为无论我把那个数字放在哪里，它都会弄乱标题中的单词顺序（数字是标题末尾的广告 ID）。

为了解决这个问题，我使用`&rlm`了`&lrm`id 前面的 - 但问题是我必须根据选择的语言来切换这两个。

![有数字问题的双向文本](../Images/49096a1d4a40d4bebd0fa2bd4f1e24d5.png)

我正确的 html 是这样的（`&rlm;`修复了波斯语中的 id 号问题）：

```
<h3>
   The name of my خدمات باشد is long
   <span style="color:#999;">&rlm;#89798798</span>
</h3> 
```

JS 小提琴：http: [//jsfiddle.net/WzF2D/](http://jsfiddle.net/WzF2D/)

我尝试设置`direction:ltr`环绕 ID 的跨度，但它仍然无法正常工作。我也试过用上但也没用`unicode-bidi:embed`。`h3`

**我怎样才能通过只使用 css 而不必依赖来解决这个问题`&rlm;`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:08:04.780

我将假设所需的渲染使用整体从右到左的书写方式，即使文本（至少在示例中）主要是英文，句子中有一些阿拉伯字母单词。此外，我假设像“#89798798”这样的表达式将被视为单独的片段，因此当它出现在英文单词之后时，它不会被视为英文文本的一部分，而是设置在它的左侧，在 RTL 布局中。

在这些（相当惊人的）前提下，CSS 解决方案是使这样的片段成为双向隔离：

```
<span style="color:#999; unicode-bidi: embed">#89798798</span> 
```

# .net - .NET XmlSerializer：基于属性值的多态映射

> ID：11774601
> 
> 赞同：1
> 
> 时间：2012-08-02T09:26:20.620
> 
> 标签：.net, mapping, polymorphism, xmlserializer

是否有一种本地方式来映射以下 xml...

```
<Tag type="1" />
<Tag type="2" /> 
```

...基于“type”属性的值，具体类“Type1Tag”和“Type2Tag”（均派生自抽象类Tag）？

（类似于 NHibernate 的鉴别器： DiscriminateSubClassesOnColumn(...)/DiscriminatorValue(...) ）

我不是在寻找类似[XmlSerializer + Polymorphism](https://stackoverflow.com/questions/4260338/xmlserializer-polymorphism)中报告的映射，它通过标记名称而不是属性值来区分类型（我无法更改 xml 结构）:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:15:55.853

我可能在您的实施中为时已晚，无法提供任何帮助，但这是我本周末想出的，并认为我会分享给其他人，因为它似乎满足了我的需求。

请注意这里没有错误处理，您可以根据需要创建自己的子对象类型初始化。

我有许多不同的类，它们都是相同类型的元素，但可以根据属性的值保存不同的内容。

我使用了`IXmlSerializable`-interface并实现了读取每个类型标签的方法...

Xml 输入：

```
<Parent>
  <Tag type="1"/>
  <Tag type="2"/>
</Parent> 
```

父类是什么实现`IXmlSerializable`：

```
public class Parent : IXmlSerializable
{
    [XmlElement("Tag")]
    public List<TagBase> Tags { get; set; }

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
       // this line causes the root Parent node to be ignored, and gets to the children Tag elements
       reader.Read();

       while (reader.ReadToNextSibling("Tag"))
       {
           string attributeType = reader.GetAttribute("type");

           Type type = null;

           switch(attributeType)
           {
              case "1":
                  type = typeof(Type1Tag);
                  break;
              case "2":
                  type = typeof(Type2Tag);
                  break;
              default:
                  continue;
           }

           XmlSerializer serializer = new XmlSerializer(type);

           // this line is the key to rejoining the automatic xml deserialization of all
           // the child stuff
           TagBase tagBase = (TagBase)serializer.Deserialize(reader.ReadSubtree());

           this.Tags.Add(tagBase);
        }
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        throw new NotImplementedException();
    }

    #endregion IXmlSerializable Members
} 
```

我创建了一个抽象`TagBase`类，每个标签类型都会继承：

```
[XmlRoot("Tag")]
public abstract class TagBase
{
   [XmlAttribute("type")]
   public string Type { get; set; }
} 
```

然后，可以使用您的自定义属性等正常实现每个其他类...

```
[XmlRoot("Tag")]
public class Type1Tag : TagBase
{
    // your implementation
}

[XmlRoot("Tag")]
public class Type2Tag : TagBase
{
    // your implementation
} 
```

请注意，我`XmlRootAttribute`在这里使用并包含它们，因为我有一堆命名空间在尝试反序列化子标签时导致异常，但是 YMMV. 我还没有达到添加 - 方法的地步`WriteXml`，但在这里应该很简单......

# io - __bread() 是否总是返回 PAGE_SIZE 字节数？

> ID：11774602
> 
> 赞同：0
> 
> 时间：2012-08-02T09:26:23.063
> 
> 标签：io, linux-kernel

Linux 内核 API 有一个 __bread 方法：

```
__bread(struct block_device *bdev, sector_t block, unsigned size) 
```

它返回一个 buffer_head 指针，其数据字段包含**size**值的数据。但是，我注意到读取超出**size**字节仍然给我提供了高达 PAGE_SIZE 个字节的有效数据。这让我想知道我是否可以假定 *__bread* 返回的 buffer_head 始终包含价值 PAGE_SIZE 字节的有效数据，即使传递给它的**size**参数较小。

或许这只是一个巧合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:45:39.700

__bread 从给定的块接口执行读取 IO，但根据后备存储，您会得到不同的结果。

对于硬盘驱动器，块设备将获取扇区大小的数据。通常这是 512 字节或 4K。如果是 512 字节，而您要求 256 字节，您将能够访问该扇区的最后部分。因此，您最多可以获取扇区大小。然而，这并不总是正确的。使用内存支持的设备，您只能访问 256 字节，因为它不是由块层提供的，而是由 VSL 提供的。

简而言之，没有。您不应依赖此功能，因为它取决于支持存储的块设备，并且还可能随着块层实现而改变。

# php - PHP表单不更新mysql数据库

> ID：11774603
> 
> 赞同：0
> 
> 时间：2012-08-02T09:26:27.327
> 
> 标签：php, mysql, forms

我几乎没有编程经验并尝试了第一个项目，我有点卡在如何更新数据库上，所以我点击编辑，正确的记录被加载到编辑屏幕 update.php

当我点击更新时，我从updated.php收到消息说数据库已更新，但数据库没有更新，当我显示记录时它们与更新前相同，在此先感谢您的帮助.

以下代码：

```
update.php
$objConnect = mysql_connect("localhost","username","password") or die(mysql_error());
$objDB = mysql_select_db("teldirdb");
$id = $_GET['id'];
$strSQL = "SELECT * FROM teldir where id = '$id' ";
$objQuery = mysql_query($strSQL) or die ("Error Query [".$strSQL."]");
$objResult = mysql_fetch_array($objQuery)
?>

<form id="FormName" action="updated.php" method="post" name="FormName">
<table width="448" border="0" cellspacing="2" cellpadding="0">

<tr>
<td width="150" align="right"><label for="fname">fname</label></td>
<td><input name="fname" maxlength="30" type="text" value="<?=$objResult["fname"];?>">    </td>
</tr>

<tr>
<td width="150" align="right"><label for="lname">lname</label></td>
<td><input name="lname" maxlength="30" type="text" value="   <?=$objResult["lname"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="tel">tel</label></td>
<td><input name="tel" maxlength="15" type="text" value="<?=$objResult["tel"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="adress1">adress1</label></td>
<td><input name="adress1" maxlength="30" type="text" value="<?=$objResult["adress1"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="adress2">adress2</label></td>
<td><input name="adress2" maxlength="30" type="text" value="<?=$objResult["adress2"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="pcode">pcode</label></td>
<td><input name="pcode" maxlength="8" type="text" value="<?=$objResult["pcode"];?>">  </td>
</tr>

<tr>
<td width="150" align="right"><label for="email">email</label></td>
<td><input name="email" maxlength="30" type="text" value="<?=$objResult["email"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="lastcontactdate">lastcontactdate</label></td>
<td><input name="lastcontactdate" maxlength="30" type="text" value="<?=$objResult["lastcontactdate"];?>"></td>
</tr>

<tr>
<td colspan="2" align="center"><input name="" type="submit" value="Update"></td>
</tr>

</table>
</form>

updated.php
<?php
header('Refresh: 5; URL=view11.php');
$objConnect = mysql_connect("localhost","root","2fudge") or die(mysql_error());
$objDB = mysql_select_db("teldirdb");

$id = $_REQUEST['id'];
$fname = trim(mysql_real_escape_string($_POST["fname"]));
$lname = trim(mysql_real_escape_string($_POST["lname"]));
$tel = trim(mysql_real_escape_string($_POST["tel"]));
$adress1 = trim(mysql_real_escape_string($_POST["adress1"]));
$adress2 = trim(mysql_real_escape_string($_POST["adress2"]));
$pcode = trim(mysql_real_escape_string($_POST["pcode"]));
$email = trim(mysql_real_escape_string($_POST["email"]));
$lastcontactdate = trim(mysql_real_escape_string($_POST["lastcontactdate"]));

$rsUpdate = mysql_query("UPDATE teldir
SET  fname = '$fname',  lname = '$lname',  tel = '$tel',  adress1 = '$adress1',  adress2 = '$adress2',  pcode = '$pcode',  email = '$email',  lastcontactdate = '$lastcontactdate'
WHERE id = '$id' ");

if($rsUpdate) { echo "Successfully updated"; } else { die('Invalid query: '.mysql_error()); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T18:24:33.950

```
<?php
$objConnect = mysql_connect("localhost","username","password") or die(mysql_error());
$objDB = mysql_select_db("teldirdb");
$id = $_GET['id'];
$strSQL = "SELECT * FROM teldir where id = ".$id." ";
$objQuery = mysql_query($strSQL) or die ("Error Query [".$strSQL."]");
?>
<form id="FormName" action="updated.php" method="post" name="FormName">
<table width="448" border="0" cellspacing="2" cellpadding="0">

<?php
while($objResult = mysql_fetch_array($objQuery)) {
?>
<tr><td><input type="hidden" name="id" value="<?=$objResult['id'];?>"></td></tr>
<tr>
<td width="150" align="right"><label for="fname">fname</label></td>
<td><input name="fname" maxlength="30" type="text" value="<?=$objResult["fname"];?>">    </td>
</tr>

<tr>
<td width="150" align="right"><label for="lname">lname</label></td>
<td><input name="lname" maxlength="30" type="text" value="<?=$objResult["lname"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="tel">tel</label></td>
<td><input name="tel" maxlength="15" type="text" value="<?=$objResult["tel"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="adress1">adress1</label></td>
<td><input name="adress1" maxlength="30" type="text" value="<?=$objResult["adress1"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="adress2">adress2</label></td>
<td><input name="adress2" maxlength="30" type="text" value="<?=$objResult["adress2"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="pcode">pcode</label></td>
<td><input name="pcode" maxlength="8" type="text" value="<?=$objResult["pcode"];?>">  </td>
</tr>

<tr>
<td width="150" align="right"><label for="email">email</label></td>
<td><input name="email" maxlength="30" type="text" value="<?=$objResult["email"];?>"></td>
</tr>

<tr>
<td width="150" align="right"><label for="lastcontactdate">lastcontactdate</label></td>
<td><input name="lastcontactdate" maxlength="30" type="text" value="<?=$objResult["lastcontactdate"];?>"></td>
</tr>
<?php } ?>
<tr>
<td colspan="2" align="center"><input name="" type="submit" value="Update"></td>
</tr>

</table>
</form> 
```

**更新.PHP**

```
<?php
header('Refresh: 5; URL=view11.php');
$objConnect = mysql_connect("localhost","root","2fudge") or die(mysql_error());
$objDB = mysql_select_db("teldirdb");

$id = $_REQUEST['id'];
$fname = trim(mysql_real_escape_string($_POST["fname"]));
$lname = trim(mysql_real_escape_string($_POST["lname"]));
$tel = trim(mysql_real_escape_string($_POST["tel"]));
$adress1 = trim(mysql_real_escape_string($_POST["adress1"]));
$adress2 = trim(mysql_real_escape_string($_POST["adress2"]));
$pcode = trim(mysql_real_escape_string($_POST["pcode"]));
$email = trim(mysql_real_escape_string($_POST["email"]));
$lastcontactdate = trim(mysql_real_escape_string($_POST["lastcontactdate"]));

$rsUpdate = mysql_query("UPDATE teldir SET  fname = '".$fname."',  
                                            lname = '".$lname."',  
                                            tel = ".$tel.",  
                                            adress1 = '".$adress1."',  
                                            adress2 = '".$adress2."',  
                                            pcode = ".$pcode.",  
                                            email = '".$email."',  
                                            lastcontactdate = '".$lastcontactdate."' WHERE id = ".$id." ");

if($rsUpdate) { 
    echo "Successfully updated"; 
} else { 
    die('Invalid query: '.mysql_error()); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:34:11.710

您的问题是，您的表单中没有字段`id`，因此没有`$_REQUEST['id']`in `updated.php`，导致查询

```
UPDATE teldir ... WHERE id = '' 
```

在表单中添加一个带有 id 的隐藏字段：

```
<input name="id" type="hidden" value="<?=$objResult["id"];?> 
```

然后等待被黑... ;-)

说真的，检查昆汀的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:47:54.750

*   首先确保您的查询确实有效，或者在 phpmyadmin 或您正在使用的任何数据库管理器上测试查询。
*   其次，不要直接`$_GET['id']`在查询中使用。您可以为此使用准备好的语句，这可用于 mysqli 和 PDO。不要在折旧过程中使用mysql API [http://www.php.net/manual/en/intro.mysql.php](http://www.php.net/manual/en/intro.mysql.php)
*   第三，阅读[phptherightway](http://www.phptherightway.com/)以确保您走在正确的学习道路上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:32:49.117

您的表单不发送 id 参数。尝试在表单中添加以下行：

```
<input type="hidden" name="id" value="<?= $id ?>" /> 
```

或者，改变

```
<form id="FormName" action="updated.php" ... 
```

至

```
<form id="FormName" action="updated.php?id=<?= $id ?>" ... 
```

截至目前，您的查询评估为

```
(...) WHERE id='' 
```

这是一个有效的 SQL 查询（因此不会出现错误）但什么也没做（更具体地说，更改没有设置 id 的行中的数据）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:37:08.587

你确定你得到了 $id 的价值吗？对于 $id，您使用的是 $_REQUEST['id']，但我没有看到您在任何地方保存/传递 id 值，例如，您可以添加一个隐藏字段来保存查询的 id，然后获取该值与 $_POST。

# wolfram-mathematica - Mathematica - 动态 - ListPlot - 基线

> ID：11774605
> 
> 赞同：0
> 
> 时间：2012-08-02T09:26:40.183
> 
> 标签：wolfram-mathematica

我正在对两态平衡过程的原始数据集进行基线拟合。该过程包括将 sigmoidal 曲线拟合到上下线性基线，然后减去，以便在 x 值范围内获得从 y=(0)（状态 1）到 y=(1)（状态 2）的曲线取而代之的是 y=（实验可观察值）。

我想通过交互式动态方法加快基线选择过程，而不是手动输入每条曲线的 lhs/rhs x 值。但是，我注意到动态图背后的动态值需要在屏幕上才能更新。意思是，如果我正在动态列表绘制 4 个点，并且这些动态值（输出）中只有三个在屏幕上，那么只有三个显示。我必须在笔记本中向上或向下滚动以“更新”各种值，然后绘图自行纠正。

在选择基线后，我在下游有许多计算，我希望所有这些后续计算都打印在滑块附近的一个整洁的小网格中，而无需滚动。

我是 Dynamic 的新手，并且在 Dynamic 函数下组合多个绘图（类似于 Show）时也遇到了麻烦。我想在一个图形中动态绘制我的 rawData 的 ListPlot、四个基线点，然后通过基线区域中选定的 rawData 拟合线性函数。在此旁边，我将绘制两态平衡图（y=0 到 1），然后绘制一个表示 50/50 state1/state2 (y=0.5) 过渡点的单点。所有这些下游过程都高度依赖于基线选择，所以我希望有滑块和最终图，以便立即查看基线各种选择的结果。

总之，有两个问题：1）需要从动态值输出屏幕刷新以更新不在同一输入部分中的动态图 2）单个图形中的多个绘图类型，动态

最好的问候， 库尔蒂斯

```
ramp1FCelsiusXRFUSmooth[
   1] = {{5.2, 171.5576923076923}, {5.4, 171.4583916083916}, {5.6, 
    171.36804195804197}, {5.8, 171.31552447552448}, {6, 
    171.31125874125877}, {6.2, 171.35321678321677}, {6.4, 
    171.41783216783216}, {6.6, 171.5072027972028}, {6.8, 
    171.61223776223778}, {7, 171.74020979020978}, {7.2, 
    171.8802097902098}, {7.4, 172.01412587412588}, {7.6, 
    172.1367832167832}, {7.8, 172.25818181818184}, {8, 
    172.37916083916082}, {8.2, 172.52223776223775}, {8.4, 
    172.65797202797202}, {8.6, 172.81475524475525}, {8.8, 
    172.97706293706293}, {9, 173.16314685314686}, {9.2, 
    173.35531468531468}, {9.4, 173.56958041958043}, {9.6, 
    173.7951048951049}, {9.8, 174.03153846153847}, {10, 
    174.2748951048951}, {10.2, 174.51762237762236}, {10.4, 
    174.7634265734266}, {10.6, 174.9851048951049}, {10.8, 
    175.1865034965035}, {11, 175.3864335664336}, {11.2, 
    175.59503496503498}, {11.4, 175.81916083916082}, {11.6, 
    176.02797202797203}, {11.8, 176.2442657342657}, {12, 
    176.45391608391608}, {12.2, 176.6886013986014}, {12.4, 
    176.9281118881119}, {12.6, 177.19}, {12.8, 177.47}, {13, 
    177.7390909090909}, {13.2, 178.01503496503494}, {13.4, 
    178.2923076923077}, {13.6, 178.60461538461539}, {13.8, 
    178.92685314685315}, {14, 179.24713286713288}, {14.2, 
    179.5781818181818}, {14.4, 179.93076923076922}, {14.6, 
    180.32083916083917}, {14.8, 180.71741258741258}, {15, 
    181.124965034965}, {15.2, 181.55125874125875}, {15.4, 
    181.97825174825175}, {15.6, 182.41020979020982}, {15.8, 
    182.8441258741259}, {16, 183.3011188811189}, {16.2, 
    183.77636363636367}, {16.4, 184.26951048951048}, {16.6, 
    184.80447552447555}, {16.8, 185.37951048951047}, {17, 
    185.97846153846154}, {17.2, 186.58356643356643}, {17.4, 
    187.19545454545454}, {17.6, 187.81587412587407}, {17.8, 
    188.44538461538463}, {18, 189.08426573426573}, {18.2, 
    189.73111888111887}, {18.4, 190.38111888111888}, {18.6, 
    191.04258741258744}, {18.8, 191.7199300699301}, {19, 
    192.43076923076922}, {19.2, 193.16111888111888}, {19.4, 
    193.91048951048953}, {19.6, 194.68713286713282}, {19.8, 
    195.4913286713287}, {20, 196.32006993006993}, {20.2, 
    197.17510489510488}, {20.4, 198.05881118881118}, {20.6, 
    198.95755244755247}, {20.8, 199.8584615384615}, {21, 
    200.76384615384615}, {21.2, 201.68461538461537}, {21.4, 
    202.62685314685316}, {21.6, 203.66496503496504}, {21.8, 
    204.81300699300698}, {22, 205.96062937062936}, {22.2, 
    206.8897902097902}, {22.4, 207.50202797202797}, {22.6, 
    207.81699300699304}, {22.8, 207.95888111888112}, {23, 
    208.02839160839162}, {23.2, 208.14692307692306}, {23.4, 
    208.4265734265734}, {23.6, 208.94608391608392}, {23.8, 
    209.81937062937064}, {24, 211.1255244755245}, {24.2, 
    212.82013986013985}, {24.4, 214.7145454545455}, {24.6, 
    216.61958041958042}, {24.8, 218.50860139860137}, {25, 
    220.42069930069928}, {25.2, 222.4111888111888}, {25.4, 
    224.48314685314682}, {25.6, 226.616013986014}, {25.8, 
    228.8025874125874}, {26, 231.0102097902098}, {26.2, 
    233.26111888111888}, {26.4, 235.54636363636362}, {26.6, 
    237.8906293706294}, {26.8, 240.30881118881118}, {27, 
    242.80363636363634}, {27.2, 245.37720279720278}, {27.4, 
    248.0467132867133}, {27.6, 250.82118881118885}, {27.8, 
    253.69622377622377}, {28, 256.65937062937064}, {28.2, 
    259.7168531468531}, {28.4, 262.8809090909091}, {28.6, 
    266.136083916084}, {28.8, 269.48853146853145}, {29, 
    272.9494405594406}, {29.2, 276.5634265734266}, {29.4, 
    280.31496503496504}, {29.6, 284.1983916083916}, {29.8, 
    288.2063636363637}, {30, 292.3523076923077}, {30.2, 
    296.6392307692308}, {30.4, 301.0708391608391}, {30.6, 
    305.62391608391613}, {30.8, 310.3113286713287}, {31, 
    315.11034965034963}, {31.2, 320.04965034965034}, {31.4, 
    325.1569230769231}, {31.6, 330.4420979020979}, {31.8, 
    335.90902097902097}, {32, 341.55034965034963}, {32.2, 
    347.37482517482516}, {32.4, 353.38538461538457}, {32.6, 
    359.5694405594406}, {32.8, 365.93888111888117}, {33, 
    372.4761538461538}, {33.2, 379.2182517482518}, {33.4, 
    386.1609790209791}, {33.6, 393.32629370629365}, {33.8, 
    400.7041958041958}, {34, 408.26265734265735}, {34.2, 
    416.02657342657346}, {34.4, 423.96489510489516}, {34.6, 
    432.1181818181819}, {34.8, 440.4820979020979}, {35, 
    448.6806293706294}, {35.2, 456.86342657342664}, {35.4, 
    465.53755244755246}, {35.6, 475.66034965034964}, {35.8, 
    487.5865734265734}, {36, 501.1653146853147}, {36.2, 
    516.0813286713288}, {36.4, 531.9086013986014}, {36.6, 
    548.2587412587412}, {36.8, 564.6713986013987}, {37, 
    580.6118881118881}, {37.2, 595.7270629370629}, {37.4, 
    609.4006293706293}, {37.6, 622.2286013986014}, {37.8, 
    634.5355944055943}, {38, 647.2777622377623}, {38.2, 
    660.156153846154}, {38.4, 673.3221678321679}, {38.6, 
    686.4862237762237}, {38.8, 699.9664335664336}, {39, 
    713.5155244755244}, {39.2, 727.4389510489511}, {39.4, 
    741.0336363636363}, {39.6, 755.0702097902098}, {39.8, 
    769.5217482517482}, {40, 785.5246153846156}, {40.2, 
    802.3835664335664}, {40.4, 820.4558741258742}, {40.6, 
    838.8953146853147}, {40.8, 858.1897202797202}, {41, 
    877.5658741258741}, {41.2, 897.573986013986}, {41.4, 
    917.3868531468532}, {41.6, 937.4052447552448}, {41.8, 
    956.7482517482517}, {42, 976.6904895104893}, {42.2, 
    997.0346153846153}, {42.4, 1018.8477622377623}, {42.6, 
    1041.1142657342657}, {42.8, 1064.3213286713287}, {43, 
    1088.1560139860142}, {43.2, 1112.473986013986}, {43.4, 
    1137.4900699300697}, {43.6, 1164.0341958041959}, {43.8, 
    1192.6026573426573}, {44, 1223.4609090909091}, {44.2, 
    1255.9941258741258}, {44.4, 1290.8709790209791}, {44.6, 
    1327.0130769230768}, {44.8, 1364.6239860139858}, {45, 
    1402.7880419580417}, {45.2, 1442.381118881119}, {45.4, 
    1482.7290909090907}, {45.6, 1523.66013986014}, {45.8, 
    1565.570979020979}, {46, 1609.5718881118883}, {46.2, 
    1656.1732867132866}, {46.4, 1705.5791608391607}, {46.6, 
    1757.082797202797}, {46.8, 1811.405664335664}, {47, 
    1867.7601398601398}, {47.2, 1927.0214685314686}, {47.4, 
    1988.903566433566}, {47.6, 2053.9727272727273}, {47.8, 
    2121.3558741258735}, {48, 2191.253076923077}, {48.2, 
    2263.4567132867137}, {48.4, 2338.992097902097}, {48.6, 
    2417.6206293706296}, {48.8, 2499.507062937063}, {49, 
    2584.0679020979014}, {49.2, 2672.40048951049}, {49.4, 
    2764.2509090909093}, {49.6, 2860.08972027972}, {49.8, 
    2958.8880419580414}, {50, 3061.5296503496506}, {50.2, 
    3167.954475524476}, {50.4, 3279.3267132867136}, {50.6, 
    3394.996363636363}, {50.8, 3514.5386013986017}, {51, 
    3637.8941958041955}, {51.2, 3767.8172727272727}, {51.4, 
    3907.369160839161}, {51.6, 4057.940839160839}, {51.8, 
    4218.387692307691}, {52, 4387.486363636363}, {52.2, 
    4559.219090909091}, {52.4, 4737.994405594407}, {52.6, 
    4926.850629370629}, {52.8, 5133.069790209789}, {53, 
    5351.979300699301}, {53.2, 5580.233216783217}, {53.4, 
    5815.771258741259}, {53.6, 6059.474335664335}, {53.8, 
    6310.2300699300695}, {54, 6566.168951048951}, {54.2, 
    6824.079510489511}, {54.4, 7080.809090909091}, {54.6, 
    7333.146293706293}, {54.8, 7587.8459440559445}, {55, 
    7850.626853146852}, {55.2, 8125.57027972028}, {55.4, 
    8409.073496503495}, {55.6, 8698.83132867133}, {55.8, 
    8996.236433566435}, {56, 9300.716293706295}, {56.2, 
    9614.424195804197}, {56.4, 9936.465874125875}, {56.6, 
    10267.16895104895}, {56.8, 10604.112797202795}, {57, 
    10948.749580419582}, {57.2, 11300.41020979021}, {57.4, 
    11659.683006993006}, {57.6, 12023.626783216785}, {57.8, 
    12392.80202797203}, {58, 12766.768741258744}, {58.2, 
    13147.152517482516}, {58.4, 13533.405594405594}, {58.6, 
    13929.522447552448}, {58.8, 14331.496503496504}, {59, 
    14735.11027972028}, {59.2, 15134.907552447552}, {59.4, 
    15531.639090909091}, {59.6, 15926.898251748251}, {59.8, 
    16319.009370629366}, {60, 16708.945804195802}, {60.2, 
    17100.06636363636}, {60.4, 17496.746923076924}, {60.6, 
    17899.96601398601}, {60.8, 18310.962377622378}, {61, 
    18733.114335664337}, {61.2, 19158.742027972025}, {61.4, 
    19578.491538461538}, {61.6, 19983.563636363637}, {61.8, 
    20383.41286713287}, {62, 20771.78615384616}, {62.2, 
    21143.815874125874}, {62.4, 21493.19979020979}, {62.6, 
    21831.533146853144}, {62.8, 22165.208671328666}, {63, 
    22497.004265734264}, {63.2, 22829.18895104895}, {63.4, 
    23165.61839160839}, {63.6, 23505.106223776227}, {63.8, 
    23845.65895104895}, {64, 24185.918321678324}, {64.2, 
    24530.909580419582}, {64.4, 24870.472797202798}, {64.6, 
    25198.522797202797}, {64.8, 25507.47804195804}, {65, 
    25802.223846153847}, {65.2, 26082.483426573428}, {65.4, 
    26348.033426573424}, {65.6, 26600.166853146857}, {65.8, 
    26840.285384615385}, {66, 27072.183286713287}, {66.2, 
    27294.89937062937}, {66.4, 27510.708951048953}, {66.6, 
    27720.160139860138}, {66.8, 27922.566853146855}, {67, 
    28118.26083916084}, {67.2, 28307.706083916084}, {67.4, 
    28494.77258741259}, {67.6, 28679.58657342657}, {67.8, 
    28860.11972027972}, {68, 29039.42153846154}, {68.2, 
    29210.7306993007}, {68.4, 29366.41545454545}, {68.6, 
    29502.546223776226}, {68.8, 29629.67433566434}, {69, 
    29744.836363636365}, {69.2, 29836.08020979021}, {69.4, 
    29898.33790209791}, {69.6, 29933.56769230769}, {69.8, 
    29959.04762237762}, {70, 29975.020909090912}, {70.2, 
    29991.388531468532}, {70.4, 30006.784055944052}, {70.6, 
    30018.964685314684}, {70.8, 30026.687132867133}, {71, 
    30047.393426573428}, {71.2, 30084.82174825175}, {71.4, 
    30135.9965034965}, {71.6, 30182.328111888113}, {71.8, 
    30225.142167832168}, {72, 30268.663566433566}, {72.2, 
    30319.640629370628}, {72.4, 30372.744545454545}, {72.6, 
    30427.39160839161}, {72.8, 30477.89188811188}, {73, 
    30521.84727272727}, {73.2, 30553.777762237765}, {73.4, 
    30573.294825174824}, {73.6, 30571.749790209793}, {73.8, 
    30562.458741258743}, {74, 30552.884825174824}, {74.2, 
    30553.355174825174}, {74.4, 30564.295454545452}, {74.6, 
    30576.382587412594}, {74.8, 30594.90377622378}, {75, 
    30610.827692307692}, {75.2, 30633.06699300699}, {75.4, 
    30653.350000000002}, {75.6, 30666.33594405594}, {75.8, 
    30668.923426573427}, {76, 30668.75461538462}, {76.2, 
    30670.575314685306}, {76.4, 30670.93328671329}, {76.6, 
    30667.266083916085}, {76.8, 30663.819300699302}, {77, 
    30647.977062937065}, {77.2, 30618.72202797203}, {77.4, 
    30565.47013986014}, {77.6, 30508.620349650355}, {77.8, 
    30455.27230769231}, {78, 30410.724055944054}, {78.2, 
    30383.247272727276}, {78.4, 30363.072377622375}, {78.6, 
    30355.305034965033}, {78.8, 30342.20923076923}, {79, 
    30340.65146853147}, {79.2, 30337.188811188807}, {79.4, 
    30331.158181818184}, {79.6, 30315.162097902103}, {79.8, 
    30295.13181818182}, {80, 30271.48195804196}, {80.2, 
    30250.13118881119}, {80.4, 30224.207062937065}, {80.6, 
    30201.98300699301}, {80.8, 30170.62013986014}, {81, 
    30157.62923076923}, {81.2, 30143.96188811189}, {81.4, 
    30141.00909090909}, {81.6, 30117.328741258738}, {81.8, 
    30092.859790209794}, {82, 30056.212097902095}, {82.2, 
    30011.19230769231}, {82.4, 29951.637552447555}, {82.6, 
    29881.86965034965}, {82.8, 29809.408811188812}, {83, 
    29743.92013986014}, {83.2, 29687.225244755246}, {83.4, 
    29650.274545454547}, {83.6, 29609.51027972028}, {83.8, 
    29570.36111888112}, {84, 29528.284685314688}, {84.2, 
    29495.74104895105}, {84.4, 29464.83104895105}, {84.6, 
    29432.034545454546}, {84.8, 29397.90867132867}, {85, 
    29359.92979020979}, {85.2, 29328.5486013986}, {85.4, 
    29309.78937062937}, {85.6, 29295.625034965036}, {85.8, 
    29279.513916083917}, {86, 29255.218671328672}, {86.2, 
    29234.38566433567}, {86.4, 29227.73384615385}, {86.6, 
    29216.327202797198}, {86.8, 29201.22685314685}, {87, 
    29162.052937062937}, {87.2, 29113.863776223774}, {87.4, 
    29051.34391608391}, {87.6, 28988.94237762238}, {87.8, 
    28926.36160839161}, {88, 28856.33132867133}, {88.2, 
    28782.890699300704}, {88.4, 28712.760769230772}, {88.6, 
    28660.5920979021}, {88.8, 28620.868461538463}, {89, 
    28583.4386013986}, {89.2, 28546.60818181818}, {89.4, 
    28502.005384615386}, {89.6, 28462.87916083916}, {89.8, 
    28422.843076923076}, {90, 28389.142517482516}, {90.2, 
    28339.938461538462}, {90.4, 28275.94958041958}, {90.6, 
    28203.151538461538}, {90.8, 28132.62300699301}, {91, 
    28069.04839160839}, {91.2, 27992.026083916087}, {91.4, 
    27914.222797202798}, {91.6, 27834.239160839163}, {91.8, 
    27766.07118881119}, {92, 27716.52062937063}, {92.2, 
    27679.7613986014}, {92.4, 27652.8013986014}, {92.6, 
    27618.464055944052}, {92.8, 27588.78923076923}, {93, 
    27574.388531468536}, {93.2, 27566.27888111888}, {93.4, 
    27547.25811188811}, {93.6, 27502.117692307693}, {93.8, 
    27444.676573426572}};

ramp1FSmoothFunc[1] = Interpolation[ramp1FCelsiusXRFUSmooth[1]]

ClearAll[helixMidPoint, helixLineLength, helixLowPoint, \
helixLowPointRFU, helixHighPoint, helixHighPointRFU]
ClearAll[coilMidPoint, coilLineLength, coilLowPoint, coilLowPointRFU, \
coilHighPoint, coilHighPointRFU]
ramp1FCelsiusXRFUSmooth[1];
helixLowBarrier = 10;
helixHighBarrier = 40;
coilLowBarrier = 60;
coilHighBarrier = 90;

{Slider[Dynamic[helixMidPoint], {helixLowBarrier, helixHighBarrier}], 
 Dynamic[helixMidPoint], 
 Dynamic[helixMidPointRFU = ramp1FSmoothFunc[1][helixMidPoint]], 
 Slider[Dynamic[helixLineLength], {5, 25}], Dynamic[helixLineLength]}

{Slider[Dynamic[coilMidPoint], {coilLowBarrier, coilHighBarrier}], 
 Dynamic[coilMidPoint], 
 Dynamic[coilMidPointRFU = ramp1FSmoothFunc[1][coilMidPoint]], 
 Slider[Dynamic[coilLineLength], {5, 25}], Dynamic[coilLineLength]}

Dynamic[{ListPlot[{ramp1FCelsiusXRFUSmooth[
     1], {{helixLowPoint, helixLowPointRFU}}, {{helixHighPoint, 
      helixHighPointRFU}}, {{coilLowPoint, 
      coilLowPointRFU}}, {{coilHighPoint, coilHighPointRFU}}}, 
   ImageSize -> Medium, 
   PlotStyle -> {PointSize[Small], PointSize[Large], PointSize[Large],
      PointSize[Large], PointSize[Large]}],

  Grid[{{, "temperature (C)", "Interpolated RFU"}, {"helix low point",
      Dynamic[helixLowPoint = helixMidPoint - helixLineLength/2], 
     Dynamic[helixLowPointRFU = 
       ramp1FSmoothFunc[1][helixLowPoint]]}, {"helix high point", 
     Dynamic[helixHighPoint = helixMidPoint + helixLineLength/2], 
     Dynamic[helixHighPointRFU = 
       ramp1FSmoothFunc[1][
        helixHighPoint]]}, {, ,}, {"coil low point", 
     Dynamic[coilLowPoint = coilMidPoint - coilLineLength/2], 
     Dynamic[coilLowPointRFU = 
       ramp1FSmoothFunc[1][coilLowPoint]]}, {"coil high point", 
     Dynamic[coilHighPoint = coilMidPoint + coilLineLength/2], 
     Dynamic[coilHighPointRFU = ramp1FSmoothFunc[1][coilHighPoint]]}},
    Frame -> All]}]

Dynamic[ramp1FBaseLinesTEST = 
  Plot[{ramp1FHelixLinFitEqTEST[temp], 
    ramp1FCoilLinFitEqTEST[temp]}, {temp, 1, 100}]]

Dynamic[ramp1FHelixTEST = 
  Select[ramp1FCelsiusXRFUSmooth[1], 
   helixLowPoint <= #[[1]] <= helixHighPoint &]]

Dynamic[ramp1FHCoilTEST = 
  Select[ramp1FCelsiusXRFUSmooth[1], 
   coilLowPoint <= #[[1]] <= coilHighPoint &]]

Dynamic[ramp1FHelixLinFitTEST = 
  Fit[ramp1FHelixTEST, {1, temp}, temp]]
Dynamic[ramp1FHelixLinFitEqTEST[temp_] = ramp1FHelixLinFitTEST]
Dynamic[ramp1FCoilLinFitTEST = Fit[ramp1FHCoilTEST, {1, temp}, temp]]
Dynamic[ramp1FCoilLinFitEqTEST[temp_] = ramp1FCoilLinFitTEST] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:53:39.973

看看[Manipulate](http://reference.wolfram.com/mathematica/ref/Manipulate.html?q=Manipulate&lang=en)，它应该自动化你试图用 Dynamic 做的事情。例如，`Manipulate[Show[<plots>], {param, min, max}]`应该工作。

# java - 无法加载来自其他 Maven 模块的应用程序上下文

> ID：11774606
> 
> 赞同：3
> 
> 时间：2012-08-02T09:26:54.230
> 
> 标签：java, spring, maven, spring-mvc

我有多模块 maven 项目，其中每个 maven 模块在`src/main/resources`. 这些多模块项目之一是 Web 应用程序，应用程序的应用程序上下文正在导入其他 maven 模块的应用程序上下文。我正在使用与[此](https://stackoverflow.com/questions/3880305/changes-in-dependent-modules-cannot-be-seen-in-other-module-in-maven-eclipse)链接中提到的类似的 pom 配置。

我的问题是，Web 应用程序的应用程序上下文无法加载其他 maven 模块、jar 的应用程序上下文。我认为这应该是有可能的，但我无法弄清楚。我重新考虑了使用或不使用正则表达式的应用程序导入命令，但没有成功。

如果您根据示例解释上述问题，我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:44:20.797

正如您所描述的那样，我一直在多模块 Maven 项目中这样做。只要有例如

```
<import resource="classpath*:/META-INF/spring/*.xml" /> 
```

`/META-INF/spring`在您的 webapps 应用程序上下文中，这将在其所有依赖模块中导入所有 Spring 配置。如果不是，也许相关模块没有被声明为 webapp 的依赖项？

# javascript - 从 Android 向 JavaScript 传递数据时出现“未定义”

> ID：11774608
> 
> 赞同：2
> 
> 时间：2012-08-02T09:26:58.683
> 
> 标签：javascript, android, android-webview

我正在使用此代码，但值表示“未定义”有人能指出我的问题吗？

这是我的java类代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(com.frux.web.R.layout.activity_main);
    String value = "Isiah";
    WebView web = (WebView) findViewById(R.id.web1);
    web.getSettings().setJavaScriptEnabled(true);
    web.loadUrl("file:///android_asset/www/index.html");
    web.loadUrl("javascript:setValue(\""+ value +"\")");

} 
```

这是我的网页代码

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

Whats your Name?
<input id="name" value="" />
<button onclick = "setValue()">Submit</button>

<script type="text/javascript"> 
function setValue(value){
var myValue = value;
document.getElementById("name").value = myValue;

}
</script>
</body>
</html> 
```

我也试试这个

```
web.loadUrl("javascript:setValue('"+ value +"')"); 
```

任何想法将不胜感激

我使用了这个 HTML 代码中的代码，它的显示与我发布的上面的其他代码没有什么不同。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript">  

function setValue(amount1)
{
    myValue = amount1;
    document.getElementById("amount").value = myValue;
  }

function rand ( n )
{
    document.getElementById("orderRefId").value =  ( Math.floor ( Math.random ( ) * n + 1 ) );
}

</script>
</head>
<body onLoad="rand(200000);setValue();">
        <!-- 
            Note: https://www.pesopay.com/b2c2/eng/payment/payForm.jsp for live payment URL
                  https://test.pesopay.com/b2cDemo/eng/payment/payForm.jsp for test payment URL
        -->
        <form method="POST" name="frmPayment" action="https://test.pesopay.com/b2cDemo/eng/payment/payForm.jsp">
        <table>
        <tbody>
        <tr>
            <td>Order Reference No. (your reference number for every transaction that has transpired):</td> 
            <td><input type="text" id="orderRefId" name="orderRef" value="Test-001"/></td>
        </tr>   
        <tr>
            <td>Amount:</td>
            <td><input type="text" name="amount" id="amount" value=""/></td>

        </tr>
        <tr>
            <td>Currency Code - "608" for Philippine Peso, "840" for US Dollar:</td>
            <td><input type="text" name="currCode" value="608"/></td>
        </tr>   
        <tr>
            <td>Language:</td>
            <td><input type="text" name="lang" value="E"/></td>
        </tr>   
        <tr>
            <td>Merchant ID (the merchant identification number that was issued to you - merchant IDs between test account and live account are not the same):</td> 
            <td><input type="text" name="merchantId" value="18056869"/></td>
        </tr>
        <tr>    
            <td>Redirect to a URL upon failed transaction:</td>
            <td><input type="text" name="failUrl" value="http://www.yahoo.com?flag=failed"/></td>
        </tr>   
        <tr>
            <td>Redirect to a URL upon successful transaction:</td>
            <td><input type="text" name="successUrl" value="http://www.google.com?flag=success"/></td>
        </tr>
        <tr>
            <td>Redirect to a URL upon canceled transaction:</td>
            <td><input type="text" name="cancelUrl" value="http://www.altavista.com?flag=cancel"/></td>
        </tr>
        <tr>
            <td>Type of payment (normal sales or authorized i.e. hold payment):</td> 
            <td><input type="text" name="payType" value="N"/></td>
        </tr>
        <tr>    
            <td>Payment Method - Change to "ALL" for all the activated payment methods in the account, Change to "BancNet" for BancNet debit card payments only, Change to "GCASH" for GCash mobile payments only, Change to "CC" for credit card payments only:</td>
            <td><input type="text" name="payMethod" value="ALL"/></td>
        </tr>
        <tr>    
            <td>Remark:</td>
            <td><input type="text" name="remark" value="Asiapay Test"/></td>
        </tr>
        <!--<tr>    
            <td>Redirect:</td>
            <td><input type="text" name="redirect" value="1"/></td>
        </tr>-->
        <tr>
            <td></td>
        </tr>   

        <input type="submit" value="Submit">

        </tbody>
        </table>    

        </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:45:13.083

将传递的值用双引号括起来：

```
web.loadUrl("javascript:setValue(\""+value+"\")"); 
```

我懂了！当您`loadUrl`第二次调用时，页面尚未加载。解决方案是将您的`setValue`呼叫附加到`window.onload`事件：

```
super.loadUrl("javascript:window.onload = function(){setValue(\"haha\");};"); 
```

此代码将“哈哈”正确加载到输入中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:40:03.950

尝试将您的价值用单引号括起来，像这样

```
 web.loadUrl("javascript:setValue('"+ value +"')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T11:08:14.953

我在准备好之前尝试访问 DOM 时遇到了这个问题。devmilles.com 的解决方案有效，但我花了更多时间进行试验。

两者的

```
webView.loadUrl("javascript:window.addEventListener('DOMContentLoaded',
    function(){setValue('haha');}, false);");

webView.loadUrl("javascript:window.addEventListener('load',
    function(){setValue('haha');}, false);"); 
```

为我工作，但将事件附加到`document`而不是`window`没有。[`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded)，在支持的情况下，响应速度略快于[`load`](https://developer.mozilla.org/en-US/docs/Web/Events/load)。

此外，事实证明`WebViewClient`总是有一个[`onPageFinished()`](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished%28android.webkit.WebView,%20java.lang.String%29)事件，它似乎像`load`事件一样工作

```
webView.setWebViewClient(new WebViewClient() {
    public void onPageFinished(WebView view, String url) {
        view.loadUrl("javascript:setValue('haha');");
    }
}); 
```

最后，我可以模仿这种行为

```
webView.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress) {
        if (progress == 100) {
            view.loadUrl("javascript:setValue('haha');");
        }
    }
}); 
```

但我认为没有理由在这种`WebViewClient`方法上使用它（它们可能等效也可能不等效）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T05:47:00.263

我也面临同样的问题。但是使用以下方式解决了问题。

```
 String testValue="abcdedfg";
    String value = "\'"+testValue+"\'";
    web.loadUrl("javascript:setValue(\""+value+"\")"); 
```

# c# - 创建用于编辑办公文档的存根

> ID：11774609
> 
> 赞同：0
> 
> 时间：2012-08-02T09:26:59.497
> 
> 标签：c#, com, ms-word

我正在寻找为文档存储服务创建同步机制。

基本思想是用户下载一个存根文件，比如 somefile.stub，其中包含指向服务器上文件的链接。

当在用户机器上的应用程序（与 .stub 关联）上单击存根文件时，会在文件中打开查找并在后台从服务器下载文档。

一旦我在本地获得了文件，我想让窗口在适当的编辑器中打开文件，例如 word.txt 文件。**我真的不想保存文件，然后通过 Process 和命令行打开 word 或其他任何内容。**

另外，我希望能够在保存文档时抓取文档并将其发送回服务器以保持所有内容同步。

如果可能的话，我更喜欢用 C# 编写客户端应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:37:01.663

您必须创建一个在客户端机器上连续运行的服务，该服务应该协调存根文件传输和它们的打开。可以通过使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx) with来使用正确的程序打开`StartInfo.UseShellExecute = true;`。您还可以使用[FileSystemWhatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)在外部应用程序修改文件时收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T14:02:44.967

这是一种解决方案：

1.  创建 2 类 WebDAV 服务器并通过它发布您的 MS Office 文档。
2.  如果您的目标是 MS Office 2013，您可以使用以下链接直接从您的 WebDAV 服务器打开文档进行编辑：

    ms-word:ofe|u| [http://mywebdavserver.com/path/document.docx](http://mywebdavserver.com/path/document.docx)

这将消除下载/上传步骤，并将以类似 SharePoint 的方式工作。在这种情况下，您也不需要部署任何客户端应用程序。

# html - 如何在 Dart 中向 TableElement 添加行？

> ID：11774611
> 
> 赞同：6
> 
> 时间：2012-08-02T09:27:00.430
> 
> 标签：html, dart

我正在玩 Dart，我正在尝试创建一个新的 TableElement，其中包含标题和 tbody 中的一行。

```
 TableElement table = new TableElement();

  Element head = table.createTHead();
  TableRowElement headerRow =  table.tHead.insertRow(-1);
  headerRow.insertCell(0).text = "9";
  headerRow.insertCell(1).text = "aaa";
  headerRow.insertCell(2).text = "bbb";
  headerRow.insertCell(3).text = "ccc";

  var tBody = table.createTBody();
  TableRowElement newLine = table.insertRow(-1); // add at the end
  newLine.insertCell(0).text = "9";
  newLine.insertCell(1).text = "aaa";
  newLine.insertCell(2).text = "bbb";
  newLine.insertCell(3).text = "ccc"; 
```

不幸的是，这两行最终都在标题部分。最重要的是，如果我离开

```
 TableElement table = new TableElement();

  var tBody = table.createTBody();
  TableRowElement newLine = table.insertRow(-1); // add at the end
  newLine.insertCell(0).text = "9";
  newLine.insertCell(1).text = "aaa";
  newLine.insertCell(2).text = "bbb";
  newLine.insertCell(3).text = "ccc"; 
```

正如预期的那样，该行到达 tbody 部分。有任何想法吗？飞镖 SDK 9474。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:59:40.570

在您的示例中，您将第一行直接添加到您创建的表头中。但是第二行，您试图直接添加到您的表中（而不是添加到您的 TBody 中）

尝试以下操作：

```
TableElement table = new TableElement();

// ... See below ...

var tBody = table.createTBody();
TableElement newLine = tBody.insertRow(-1);
newLine.insertCell(0).text = "9";
newLine.insertCell(1).text = "aaa";
newLine.insertCell(2).text = "bbb";
newLine.insertCell(3).text = "ccc"; 
```

正如评论中提到的，目前 dart:html 库不支持表头元素。因此，需要做一些工作。您可以使用以下创建表头：

```
Element head = table.createTHead();
TableRowElement headerRow =  table.tHead.insertRow(-1);
var cell = new Element.tag('th');
cell.text = '9';
headerRow.insertAdjacentElement('beforeend', cell);
cell = new Element.tag('th');
cell.text = 'aaa';
headerRow.insertAdjacentElement('beforeend', cell);
cell = new Element.tag('th');
cell.text = 'bbb';
headerRow.insertAdjacentElement('beforeend', cell);
cell = new Element.tag('th');
cell.text = 'ccc';
headerRow.insertAdjacentElement('beforeend', cell);

// ... See above ... 
```

但是请注意，insertAdjacentElement 不适用于 firefox（因为他们选择不实现该 JavaScript 方法）。替代方法是使用：

```
headerRow.nodes.add(cell); 
```

请注意，这是一种变通方法，不允许以与 insertCell 相同的方式进行索引，并且涉及更多工作来单独创建单元格。这提供了一种解决方法，解决了注释中列出的两个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T22:22:15.240

下面的代码对我来说很好用：

```
 TableElement table2 = new TableElement();
 table2.style.width='100%';
 var tBody2 = table2.createTBody(); 

 table2.tHead.insertRow(-1)..insertCell(0).nodes.add(new Element.tag('th')..text = '1')
                       ..insertCell(1).nodes.add(new Element.tag('th')..text = '2')
                       ..insertCell(2).nodes.add( new Element.tag('th')..text = '3')
                       ..insertCell(3).nodes.add( new Element.tag('th')..text = '4');

 tBody2.insertRow(0)..insertCell(0).text = "9"
                ..insertCell(1).text = "aaa"
                ..insertCell(2).text = "bbb"
                ..insertCell(3).text = "ccc";

 tBody2.insertRow(1)..insertCell(0).text = "9"
                ..insertCell(1).text = "aaa"
                ..insertCell(2).text = "bbb"
                ..insertCell(3).text = "ccc";

 tBody2.insertRow(2)..insertCell(0).text = "9"
                ..insertCell(1).text = "aaa"
                ..insertCell(2).text = "bbb"
                ..insertCell(3).text = "ccc"; 
```

# python - python请求无法发送https请求

> ID：11774612
> 
> 赞同：1
> 
> 时间：2012-08-02T09:27:08.460
> 
> 标签：python, https, python-requests

我安装了[请求](http://docs.python-requests.org/en/latest/index.html)。

但我无法发送 https 请求，即使如此简单：

```
requests.get('https://www.google.com') 
```

错误信息是：

```
_ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol 
```

更新：我可以使用其他方法发送 https 请求，urllib2，httplib 可以成功发送 https 请求

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:39:30.977

`requests`这对. 甚至 Python来说都不是问题。

您很可能使用了未正确配置为处理 SSL 连接的代理服务器。确切的问题在很大程度上取决于代理服务器。对`140770FC`错误的 Google 搜索将为您提供许多关于如何诊断此问题的点击和讨论。

请注意，即使您没有在本地计算机上配置代理，企业防火墙仍可能会强制 HTTPS 连接通过网络边界处的代理。

# css - 在 Google Chrome 上首次加载时未显示 DIV 背景图像

> ID：11774619
> 
> 赞同：0
> 
> 时间：2012-08-02T09:27:26.350
> 
> 标签：css, image, google-chrome, background-image, chromium

某些 DIV 背景图像在本网站的 Google Chrome 上首次加载时未显示： [https ://ae.grupocastilla.es/epsilonnet/default.aspx](https://ae.grupocastilla.es/epsilonnet/default.aspx)

我已经检查了相关问题，但没有人对此案给出有效的答案。

这是没有加载背景图像的控件之一：

> <div id="SignIn1_ImgLogin" class="ImgLogin">

对应于该CSS：

> .ImgLogin {
> 
> > ```
> >  background-image: url(/epsilonnet/images/newlook/Login.png);
> >    background-repeat: no-repeat;
> >    background-position: center top; 
> > ```
> > 
> > }

*   它适用于FF，IE。
*   它在您刷新页面时起作用。
*   如果您放置一个 Image 元素，而不是作为背景，它会起作用。

提前感谢您的帮助。

# javascript - 揭示模块模式、KnockoutJS 和 CoffeeScript

> ID：11774623
> 
> 赞同：1
> 
> 时间：2012-08-02T09:27:41.313
> 
> 标签：javascript, knockout.js

这可能是非常初学者的问题，或者我一次使用了太多东西。我正在尝试将 KnockoutJS 与[Revealing Module Pattern](http://weblogs.asp.net/dwahlin/techniques-strategies-and-patterns-for-structuring-javascript-code-revealing-module-pattern)一起使用并尝试编写 CoffeeScript。我已将我的模型放在一个单独的函数中。这是代码：

```
myapp =(->
    person =->
        firstname = ko.observable "k"
        lastname = ko.observable "d"

        firstname:firstname,
        lastname:lastname

    person : person
)()

$(->
    ko.applyBindings(new myapp.person())
    @
) 
```

现在这是在 Visual Studio 中使用工作台创建 JavaScript，如下所示：

```
(function() {
  var myapp;

  myapp = (function() {
    var person;
    person = function() {
      var firstname, lastname;
      firstname = ko.observable("k");
      lastname = ko.observable("d");
      return {
        firstname: firstname,
        lastname: lastname
      };
    };
    return {
      person: person
    };
  })();

  $(function() {
    ko.applyBindings(new myapp.person());
    return this;
  });

}).call(this); 
```

现在这给出了错误，它现在可以找到要绑定的元素。这是简单的 HTML 文本：

```
<p>
    Firstname<span data-bind="text: myapp.person().firstname"></span>
    Lastname<span data-bind="text: myapp.person().lastname">
    </span>
</p> 
```

如果我创建没有自调用函数的普通 JavaScript，它工作正常。这是功能：

```
myapp = (function () {
    var person;
    person = function () {
        var firstname, lastname;
        firstname = ko.observable("k");
        lastname = ko.observable("j");

        return {
        firstname : firstname,
        lastname : lastname
        }
    }

    return {
        person: person
    }
})();

$(function () {
    ko.applyBindings(new myapp.person());
}) 
```

谁能解释这里出了什么问题？还是有另一种方法来编写 CoffeeScript 来使用 KnockoutJS？

如果需要更多详细信息，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:15:52.657

这是工作示例：http: [//jsfiddle.net/gurkavcu/Kqa2k/](http://jsfiddle.net/gurkavcu/Kqa2k/)

```
myapp = (->
    person =->
        firstname = ko.observable "jack"
        lastname = ko.observable "sparrow"

        firstname:firstname,
        lastname:lastname

    person : person
)()

$(->
    ko.applyBindings(new myapp.person())
    @
) 
```

​您需要更改绑定语法：

```
<p>
    Firstname: <span data-bind="text:firstname"></span>
    Lastname: <span data-bind="text:lastname">
    </span>
</p>​ 
```

因为当您调用 ko.applyBindings(new myapp.person()) 时，您仅为一个人对象而不是所有 myapp 对象设置视图。

如果要为整个 myapp 设置视图，则需要像这样更改代码：

[JSfiddle 链接](http://jsfiddle.net/gurkavcu/6etHW/)

```
myapp = (->
    person = (fname,lname)->
        firstname = ko.observable fname
        lastname = ko.observable lname

        firstname:firstname,
        lastname:lastname

    person : new person("Jack" , "Sparrow")    

)()

$(->
    ko.applyBindings(myapp)    
    @
)

<p>
    Firstname: <span data-bind="text:person.firstname"></span>
    Lastname: <span data-bind="text:person.lastname">
    </span>
</p>​ 
```

# mysql - SQL 引擎优化到那么远了吗？（见示例）

> ID：11774627
> 
> 赞同：1
> 
> 时间：2012-08-02T09:27:55.563
> 
> 标签：mysql, sql, sql-optimization

假设我按如下方式查询数据库：

```
SELECT
   T3.ID
   T1.factor1 * T2.factor2  * T3.VAL,
   T1.factor1 * T2.factor2  * T3.VAL,
   T1.factor1 * T2.factor2  * T3.VAL,
   T1.factor1 * T2.factor2  * T3.VAL,
               (...)
   T1.factor1 * T2.factor2  * T3.VAL
FROM
   Table3 AS T3
   LEFT JOIN Table2 AS T2 ON T3.ID = T2.Table3ID
   LEFT JOIN Table1 AS T1 ON T3.ID = T1.Table3ID 
```

我的问题是：

`T1.factor1 * T2.factor2`引擎会执行*一次*还是*N 次*？

（请给出与您选择的数据库引擎相关的答案！）

您还可以给出更一般的答案（假设会有*P*因子，而不仅仅是 2。

编辑：您可以用`T1.factor1 * T2.factor2`您选择的任何计算密集型函数替换，该函数对于每个输出行都有不同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:35:12.053

```
SELECT 
   T1.factor1 * T2.factor2 * T3.FIELD1, 
   T1.factor1 * T2.factor2 * T3.FIELD2, 
   T1.factor1 * T2.factor2 * T3.FIELD3, 
   T1.factor1 * T2.factor2 * T3.FIELD4, 
               (...) 
   T1.factor1 * T2.factor2 * T3.FIELDN 
FROM 
   Table3 AS T3 
   LEFT JOIN Table2 AS T2 
   LEFT JOIN Table1 AS T1 
```

不知道这里的问题是什么 - 你问这个是因为加入吗？由于您的所有选择表达式都不同，我猜您的查询与连接有关

我的问题是 - 为什么数据库引擎会多次评估表达式？在什么情况下，您期望这应该不止一次发生？

您要求从每个表中获取一个值......是什么让您相信 SQL 需要做的不仅仅是一件事情才能从这些表中的每一个中获取一个值？

编辑：鉴于对问题的调整 - 这是一个很好的问题。我认为 SQL 不会知道要对此进行大量优化，因为您最初每次创建不同的标量操作时都是将每个字段乘以不同的字段。

我尝试执行相同的计算 300 次，而另一个查询执行了一次 - SQL 没有报告查询成本的任何差异。当然还有很多东西要看 - 但我想要么差异太小，要么 SQL 正在优化它

![查询 * 300 与查询 * 1](../Images/3411e25243baac1e14bfd256811d8bc7.png)

这是在 MSSQL 2005 上。

我会在你自己的数据库上尝试这个计算昂贵的东西并比较查询计划。可能值得检查统计数据和其他性能指标

# javascript - 当我运行我的代码时，我得到以下结果 []object object] [object object] 但应该给我一个有序数组

> ID：11774628
> 
> 赞同：0
> 
> 时间：2012-08-02T09:27:55.563
> 
> 标签：javascript

```
 var rangeArray= new Array();
       rangeArray.push(parseRangeString(1, "< -4 & < 10"));
       rangeArray.push(parseRangeString(2, "< 15 & < 19"));
       rangeArray.push(parseRangeString(3, "<= 50 & <= 123"));
       rangeArray.push(parseRangeString(4, "< -99 & < -23"));
       rangeArray.push(parseRangeString(5, "< 7 & < 55"));
       alert(rangeArray)
       var orderedArray = orderRanges(rangeArray);
       alert (orderedArray) 
```

它与上面的代码有关，但看不到它，你能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:33:27.340

`parseRangeString(1, "< -4 & < 10")`返回一些对象（或类似的散列`{}`），它的视图为字符串`[Object object]`。当您提醒您的数组时，程序将其转换为字符串，将其播放为数组，然后在其字符串视图中播放数组的所有元素。

# image - 使用 JSP 导航到另一个 jsp 页面的图像 onclick 操作

> ID：11774629
> 
> 赞同：0
> 
> 时间：2012-08-02T09:27:55.797
> 
> 标签：image, jsp

这是我编写的用于在单击图像时导航到另一个 jsp 页面的代码。但是，我没有得到输出。请帮帮我。

```
<td align="center"  >
       <img src="image.jsp?imgid=<%=rs.getInt(1)%>" width="100" height="100" **onclick="ModelList.jsp"** > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:39:59.620

Onclick 是一个事件，它需要一个事件处理程序（例如一个 javascript 函数）来处理偶数。所以你可以做这样的事情

```
onclick="window.href.location = ModelList.jsp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:32:29.603

以下更改将起作用..

```
 <a href="ModelList.jsp"> <img src="image.jsp?imgid=<%=rs.getInt(1)%>" width="100" height="100"  ></a> 
```

# sql-server-2008 - Microsoft SQL Server 2008 - 错误 1206 - Microsoft 分布式事务协调器 (MS DTC) 已取消分布式事务

> ID：11774635
> 
> 赞同：0
> 
> 时间：2012-08-02T09:28:30.517
> 
> 标签：sql-server-2008, vb6, adodb, pivotal-crm

我正在运行一个 Pivotal 应用程序（5.9）并且有一个总是崩溃的服务器进程（MS SQL 错误 1206）。

1.  我有一个带有更新按钮的 Pivotal “活动表单”，单击该按钮时会调用服务器进程（VB 6 自定义 DLL）
2.  这个自定义 DLL：
    1.  通过使用 Pivotal API 检索可以使用 Pivotal 应用程序的所有用户的列表（“用户”标准表），然后使用连接字符串创建自己到另一个数据库的连接）
    2.  对于每个用户，它构造并运行一个查询：
    3.  strSql = select SUM(stoResourceSize) totalResourceSize from " & dbName & ".dbo.Resource where StorageID = 3 and XptDestinationAddress like " strSql = strSql & "'%" & userName & "%'"

用于运行查询的连接字符串如下：

```
strConnect = "Driver={SQL Server};" & _
    "Server=" & SatteliteName & ";" & _
    "UID=" & SyncStreamDBName & ";" & _
    "Trusted_Connection=Yes" 
```

它工作正常，但查询在处理大约 80 个用户后崩溃，错误 1206 和 SQLState = 37000

我每次都能重现这个问题。在给定时间，此查询将崩溃。

我添加了很多跟踪，如果我“手动”在服务器上运行最后一个查询，它就可以正常工作。它不会每次都在同一个用户上崩溃，它看起来像是随机的。此外，在应用程序中存在另一个服务器程序，它可以运行相同的查询，但只针对一个用户。那一个会运行良好，永远不会崩溃。我也尝试启用 ODBC 跟踪，但它不会给我任何有用的信息。

我很确定这是连接或配置问题，但我不知道是什么问题。这个问题在开发和测试环境中都是可重现的。

编辑：实际上似乎我的服务器进程可能会在各个点崩溃，不一定是在执行该请求时。当我打开 ADODB 记录集时，它似乎崩溃了（当然，在接触任何记录集之前，我验证 EOF 和 BOF 都是错误的，并且它们是）。

# android - Jquery Mobile - 取手机的字体

> ID：11774639
> 
> 赞同：0
> 
> 时间：2012-08-02T09:28:40.010
> 
> 标签：android, jquery, jsp

我使用 Mobile Jquery 创建了几个 JSP。

我在所有 JSP 中都使用了“Verdena”作为我的字体。如果我在手机中访问 jsp，它会采用手机的字体样式而不是我的默认字体。

这个怎么处理？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:29:57.970

Jquery Mobile 重新格式化您的内容，添加内部 div 等等，并应用自己的样式。您必须使用 firebug 或 web 检查器深入研究 CSS，以查看您想要覆盖它的位置以及如何覆盖它。

JQM CSS 的样式规则非常具体，因此您必须编辑 JQM 样式表或使您的规则更加具体（或者即使它们列在最前面，JQM 也将具有优先权）。您还可以添加 !important 作为可能的解决方法。

This other answer列出了您可以尝试的更具体的CSS：

[使用 jquery mobile 更改字体系列](https://stackoverflow.com/questions/9807441/changing-font-family-with-jquery-mobile)

# javascript - Facebook 邀请好友请求 javascript

> ID：11774640
> 
> 赞同：0
> 
> 时间：2012-08-02T09:28:45.273
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我在 facebook 应用程序上通过 javascript 发出邀请好友请求时遇到问题。我的代码是：

```
<div id="fb-root"></div>
    <script>
                $(function() {
        FB.init({
            appId      : '<?php echo APP_ID;?>', // App ID
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true,  // parse XFBML
            frictionlessRequests : true,
        });
        FB.Canvas.setAutoGrow();
                    function sendRequestViaMultiFriendSelector(){
                        FB.ui({method: 'apprequests',
                            message: 'My Great Request DONALD'
                        });
                    }
                });
    </script> 
```

自然，我通过以下方式导入了 js sdk：

```
<script src="http://connect.facebook.net/en_US/all.js"></script> 
```

我绑定了邀请朋友的按钮：

```
$('.step2').children('.tasto').click(function(){
    //sendRequestViaMultiFriendSelector();
    console.log("Gooby pls");
}); 
```

在我的页面中，控制台出现此错误：

```
Unsafe JavaScript attempt to access frame with URL http://apps.facebook.com/termapp/ from frame with URL https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=9#channel=f25e11b77&origin=http%3A%2F%2Fwww.termapp.test&channel_path=%2F%3Ffb_xd_fragment%23xd_sig%3Df3245a897%26\. Domains, protocols and ports must match. 
```

自然按钮不起作用。

我在 Chrome 上，我的网站是用 Zend 用 php 制作的。我无法向您展示该应用程序，因为我在虚拟主机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:02:14.583

您没有按照 FB 推荐的方式加载 all.js 文件。看看这里的文档：

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

该页面建议异步加载 API：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

有关通道文件等的详细信息，请参阅文档。

# arrays - AS3：动态引用不同的数组？

> ID：11774641
> 
> 赞同：0
> 
> 时间：2012-08-02T09:28:47.303
> 
> 标签：arrays, actionscript-3

这可能是一个简单的，如果是我相信我会觉得很愚蠢。

基本上，我有数组 a1、a2 和 a3。

使用 for 语句..

```
for (var i 0; i < 4; i++) {
//stuff
} 
```

如何使用 i 将 for 语句中的数据推送到这些数组之一？也就是说，每次将数据添加到下一个组中。a[0] -> a[1] 等。我试过 getDefinitionByName 但似乎只适用于库对象！

对不起，如果它很简单！

提前喝彩。

编辑：

我需要它工作的完整代码。这就是我尝试使用给出的第一个答案的方法。

```
var fullList:Vector.<Array> = new Vector.<Array>();

for (var i1 = 0; i1 < 3; i1++)
{
    fullList.push(new Array());
}

var levelLoader:URLLoader = new URLLoader();
levelLoader.addEventListener(Event.COMPLETE, levelLoaded);
function levelLoaded(e:Event):void
{
    var indexcount = 0;
    txttileArray = e.target.data.split("a");
    txtDebug.text = txttileArray.toString();
    for (var i = 1; i < 4; i++)
    {
        temparray1 = txttileArray[indexcount].split("");
        for (var row = 0; row < temparray1.length; row ++)
        {
            var a = getDefinitionByName(temparray1[row] + "Tile") as Class;
            //trace(a);
            var b = new a  ;
            b.x = 17 + 17 * row;
            b.y = 17 + 17 * indexcount;
            addChild(b);
            fullList[indexcount].push(b);
        }
        indexcount++;
    }
} 
```

对不起，混乱的变量名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:02:25.667

成立。

您需要在数组中使用数组。

```
private var fullList:Vector.<Array>;
private var total:uint = 4;

function a():void
{
    // first creating array list
    fullList = new Vector.<Array>();

    for (var i:uint = 0; i < total; i++)
    {
        fullList.push(new Array());
    }
}

function b():void
{
    // doing the stuff

    for (var i:uint = 0; i < total; i++)
    {
        switch (i)
        {
            case 0:

                fullList[i].push('zero-array-push');
                break;

            case 1:

                fullList[i].push('one-array-push');
                break;

            case 2:

                fullList[i].push('two-array-push');
                break;

            case 3:

                fullList[i].push('three-array-push');
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:13:23.657

> 我有三个数组，a1、a2 和 a3。我希望能够根据变量“i”的值访问这些数组。例如，如果“i”为 1，我想将数据值推送到 a1。等等——hazdog

如果您将数组 a1、a2 和 a3 作为本地（在函数中定义）变量，则这是不可能的。如果它们是在类中定义的，那么您可以这样做：

```
private var a1:Array=[];
private var a2:Array=[];
private var a3:Array=[];

private function pushValue(identifier:String, value:Object):int {
    var name:String="a" + identifier;
    var target:Array=this[name] as Array;
    if(target == null) {
        throw new Error("No such array " + name);
    } else {
        return target.push(value);
    }
}

//And then call it like this:
pushValue("1", "This value goes in array a1");
pushValue("1", "This is another value that goes in array a1");

pushValue("2", "This value goes in array a1");
pushValue("2", "This is another value that goes in array a2");

pushValue("3", "This value goes in array a3");
pushValue("3", "This is another value that goes in array a3"); 
```

否则，您可以定义一个数组数组（或数组向量），例如`holderArray`将目标数组放入其中，然后将值推送到`holderArray[identifier]`

**编辑**而 不是定义`a1`,在对象中，像这样定义它：`a2``a3``this`

```
private var arrayHolder:Object={};

private function init():void {
    for(var i:int=1; i<=3; i++) {
        arrayHolder["a" + i]=new Array();
    }
}

init(); 
```

然后，您的数组将存储为`arrayHolder.a1`,`arrayHolder.a2`等并 修改`arrayHolder.a3`pushValue 如下：

```
var target:Array=this[name] as Array; 
```

到

```
var target:Array=arrayHolder[name] as Array; 
```

# regex - Google App Engine Python WebApp 序列

> ID：11774642
> 
> 赞同：0
> 
> 时间：2012-08-02T09:28:47.043
> 
> 标签：regex, google-app-engine, python-2.7, wsgi

```
import webapp2
from views import MainPageNote, CreateNote, DeleteNote, EditNote, \
                    MainPage, CreateOwner, DeleteOwner, EditOwner

app = webapp2.WSGIApplication([
        ('/', MainPage), 
        ('/createowner', CreateOwner), 
        ('/editowner', EditOwner),
        ('/deleteowner', DeleteOwner)
        ('/note', MainPageNote), 
        ('/create', CreateNote), 
        ('/edit/([\d]+)', EditNote),
        ('/delete/([\d]+)', DeleteNote)
        ],
        debug=True) 
```

我不知道如何更有效地提出这个问题，因为我不知道术语。我在哪里可以了解 Web 应用程序列表中行顺序的重要性以及实际设计列表的重要性？大多数 '/...owner' 类型的项目将包括“?ID=...”预告片，所以我什至不确定这个系统是否能正常工作。对于上下文，我正在开发[此处描述的演示应用程序](https://stackoverflow.com/questions/11657352/does-a-two-layer-crud-python-appengine-demo-exist)

我假设列表中的所有左侧项目都是“正则表达式”，但我没有排序序列的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:35:27.930

我认为您正在寻找[webapp2 URL 路由](http://webapp-improved.appspot.com/guide/routing.html)

# php - 在php中模仿s3cmd列表文件夹

> ID：11774645
> 
> 赞同：0
> 
> 时间：2012-08-02T09:28:52.687
> 
> 标签：php, amazon-s3, s3cmd

aws phpsdk 中的什么功能/技术等于 s3cmd ls s3://

我将文件上传到s3，其结构：

```
folder_a/file_a.ext
folder_a/file_aa.ext
folder_b/file_b.ext
folder_b/file_bb.ext 
```

我需要首先列出没有可以在 s3cmd 中完成的所有文件名的文件夹，但我想在 php 中完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:38:17.283

有[get_bucket_list()](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_bucket_list)列出了 S3 中的存储桶，还有[get_object_list](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_list) () 列出了存储桶中的对象列表。

如需进一步使用，请参阅[此处的 API 文档。](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#i=AmazonS3)

希望这是您正在寻找的。

**编辑：**

如果您只想要文件名，那么您可以遍历获得的结果并使用[PHP basename() 函数](http://php.net/manual/en/function.basename.php)。

# django - 使用 staff_member_required 装饰器，但没有被重定向到管理界面？

> ID：11774647
> 
> 赞同：22
> 
> 时间：2012-08-02T09:28:54.703
> 
> 标签：django, authentication, decorator

当我尝试使用 staff_view 时，我在管理员身份验证界面中被重定向。

```
 from django.contrib.admin.views.decorators import staff_member_required

    @staff_member_required
    def staff_view(request..):
        ... 
```

如何进行自定义登录，而不是在默认的管理员登录界面中重定向？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-02T09:37:38.340

你可以使用 Django 的[user_passes_test](https://docs.djangoproject.com/en/1.8/topics/auth/default/#django.contrib.auth.decorators.user_passes_test)装饰器：

```
from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda u:u.is_staff, login_url=reverse_lazy('foo'))
def staff_view(request..):
    ... 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-02-04T09:44:54.097

值得指出的是，它`staff_member_required`是一个包装器`user_passes_test`（参见[源代码](https://github.com/django/django/blob/stable/1.9.x/django/contrib/admin/views/decorators.py)），它还接受一个`login_url`参数，所以你可以这样做：

```
@staff_member_required(login_url=example_url)
def staff_view(request..):
    ... 
```

# firefox - JUnit 测试不启动 Selenium WebDriver

> ID：11774649
> 
> 赞同：1
> 
> 时间：2012-08-02T09:28:58.433
> 
> 标签：firefox, junit, webdriver, selenium-webdriver

我有一个 JUnit 测试，其中我的 WebDriver 不会突然启动。我有 Firefox 版本 14.0.1，我正在使用 Selenium 2.25.0

```
@Before
public void setUp() throws Exception {
    driver = new FirefoxDriver();
    wait = new WebDriverWait(driver, 10);
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
}

@Test
    public void test() throws Exception {
//Test running here 
```

调试无法克服创建 firefox 驱动程序实例。我不知道为什么它不再起作用了，因为我能够在一周前开始相同的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:11:15.750

由于您的调试器没有创建驱动程序，听起来您的 setUp() 方法甚至没有执行。因此，如果我没看错，首先要解决的问题是让您的驱动程序创建代码执行，而不是找出代码有什么问题（乍一看还可以）。

尝试在可以确认单个 JUnit 测试的执行正常工作的环境中与其他测试隔离运行此测试。

# php - php连接mssql db显示汉字

> ID：11774651
> 
> 赞同：0
> 
> 时间：2012-08-02T09:29:09.153
> 
> 标签：php, sql-server

我正在建立一个连接到 mssql 数据库的 php 网站。在visual studio中，我可以阅读正常的汉字；但是在php页面调用数据时，无法显示汉字，导致乱码。

另一方面，当我在 php 页面中输入中文字符时，我可以阅读它们。因此，我相信它在连接到 mssql db 时与 charset 有关。以下是我在 db connect 文件中的代码：-

```
<?php
$myServer = "localhost";
$myUser = "XX";
$myPass = "123";
$myDB = "my_db"; 

$s = mssql_connect($myServer, $myUser, $myPass)
or die("Couldn't connect to SQL Server on $myServer");

mssql_select_db($myDB, $s);

$set_charset = 'UTF-8';
mssql_query($set_charset, $s);
?> 
```

我的代码有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:35:24.937

一种可能的解决方案是使用[SQLSRV](http://msdn.microsoft.com/en-us/library/hh995063%28v=sql.10%29)驱动程序而不是 mssql。甚至更好的 PDO_SQLSRV 扩展；[它使用 utf-8 作为默认编码](http://msdn.microsoft.com/en-us/library/cc296183%28v=sql.105%29.aspx)：

> PDO::SQLSRV_ENCODING_UTF8
> 数据采用 UTF-8 编码。这是默认编码。

# sql - 如何使 Postgres Copy 忽略大 txt 文件的第一行

> ID：11774654
> 
> 赞同：39
> 
> 时间：2012-08-02T09:29:22.357
> 
> 标签：sql, postgresql, copy

我有一个相当大的 .txt 文件 ~9gb，我想将此 txt 文件加载到 postgres 中。第一行是标题，后面是所有数据。如果我 postgres 直接复制数据，标题将导致数据类型与我的 postgres 表不匹配的错误，所以我需要以某种方式将其删除。

示例数据：ProjectId,MailId,MailCodeId,prospectid,listid,datemailed,amount,donated,zip,zip4,VectorMajor,VectorMinor,packageid,phase,databaseid,amount2

```
15,53568419,89734,219906,15,2011-05-11 00:00:00,0,0,90720,2915,NonProfit,POLICY,230,3,1,0

16,84141863,87936,164657,243,2011-03-10 00:00:00,0,0,48362,2523,NonProfit,POLICY,1507,5,1,0

16,81442028,86632,15181625,243,2011-01-19 00:00:00,0,0,11501,2115,NonProfit,POLICY,1508,2,1,0 
```

虽然 postgres 的 COPY 函数具有可以忽略第一行的“header”设置，但它仅适用于 csv 文件：

```
copy training from 'C:/testCSV.csv' DELIMITER ',' csv header; 
```

当我尝试在我的 txt 文件上运行上面的代码时，出现错误：

```
copy training from 'C:/testTXTFile.txt' DELIMITER ',' csv header
ERROR:  unquoted newline found in data
HINT:  Use quoted CSV field to represent newline. 
```

我尝试添加“quote”和“escape”属性，但该命令似乎不适用于 txt 文件：

```
copy training from 'C:/testTXTFile.txt' DELIMITER ',' csv header quote as E'"'  escape as E'\\N';
ERROR:  COPY escape must be a single one-byte character 
```

或者，我考虑过运行 java 或创建一个单独的临时表来删除第一行……但这些解决方案既费时又费时。我需要加载 9gb 的数据才能删除第一行标题......是否有其他解决方案可以轻松删除 txt 文件的第一行，以便我可以将数据加载到我的 postgres 数据库中？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-03T02:23:50.953

将 HEADER 选项与 CSV 选项一起使用：

```
\copy <table_name>  from '/source_file.csv' delimiter ',' CSV HEADER ; 
```

> HEADER 指定文件包含一个标题行，其中包含文件中每一列的名称。输出时，第一行包含表中的列名，输入时，第一行被忽略。仅当使用 CSV 格式时才允许使用此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-14T16:59:51.727

我在[https://www.postgresql.org/docs/10/sql-copy.html](https://www.postgresql.org/docs/10/sql-copy.html)
上查找了 有关 HEADER 的文档，这不仅适用于 CSV，而且适用于 TSV！

我的解决方案是在 psql

```
\COPY mytable FROM 'mydata.tsv' DELIMITER E'\t' CSV HEADER; 
```

(in addition mydata.tsv contaned header row which I excluded from copying to database table)

# php - 支持使用 Ajax 调用在 Jquery mobile 中进行页面重定向

> ID：11774656
> 
> 赞同：7
> 
> 时间：2012-08-02T09:29:24.673
> 
> 标签：php, redirect, jquery-mobile

我正在构建一个基于 MVC 框架的 JQuery Mobile 应用程序。

我的问题是我无法向浏览器发送“重定向”指令（HTTP、Javascript、META-refresh）。

它导致浏览器显示一行：“**未定义**”。

这是服务器端重定向的代码：

```
<html><head>
      <script>location.href='$url'</script>
</head></html> 
```

我知道我可以通过使用来解决问题`data-ajax=false`，但我不希望这样，因为：

*   我想要漂亮的 Jquery 移动过渡
*   这在 Ajax 中要快得多
*   每当框架可能发送重定向时，我不想怀疑每个链接

有没有办法让 JQuery Mobile 正确处理一种重定向？HTTP、HTML META 还是 Javascript？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T09:27:58.020

在[JQuery 移动社区](http://forum.jquery.com/topic/support-for-page-redirection-in-jquery-mobile-using-ajax-calls)的帮助下，我提出了一个可以处理标准 HTML 重定向 ( `data-ajax="false"`) 和 JQM 页面转换的优雅解决方案。

诀窍在于，在进行 JQM 转换时，JQM 使用 javascript 加载结果 HTML；搜索页面 `data-role='page' 并在 DOM 中替换它：它忽略 HTML 标头。

因此，我们必须在标头中放置一个标准的 Javascript 重定向，并在一个虚拟页面中加载一个 JQM 页面。

这是我的 MVC 模板中重定向方法的代码：

```
<html>
    <head>
        <!-- HTML reload (for data-ajax=false) -->
        <script>
            location.href='<?= $url ?>'
        </script>
    </head>
    <body>
        <!-- Change page : JQueryMobile redirect -->
        <div data-role="page" id="redirect">
            <script>
                $.mobile.changePage('<?= $url ?>');
            </script>
        </div>
    </body>
</html> 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T20:12:15.137

看起来这将是一个更好的解决方案 - 来自 jQuery Mobile 演示。

基本上，您在重定向中设置了一个 http 标头并在`pagecontainerload`. 这应该避免浏览器历史记录的怪异。

这是一个`a href`进入页面

```
<a href="redirect.php?to=redirect-target.html" 
   data-role="button" data-inline="true">Redirect</a> 
```

在 PHP 中，你这样做

```
<?php
// ************************************************************************
// The two-second sleep simulates network delays, hopefully causing a
// loading indicator message to appear on the client side.
// ************************************************************************
sleep(2);

$dst = ( isset( $_GET[ "to" ] )
    ? $_GET[ "to" ]
    : ( isset( $_POST[ "to" ] )
        ? $_POST[ "to" ]
        : false ) );
if ( $dst ) {
    // **********************************************************************
    // The crucial line: Issue a custom header with the location to which the
    // redirect should happen. For simplicity, we simply redirect to whatever
    // location was specified in the request's "to" parameter, but real-world
    // scripts can compute the destination based on server-side state.
    //
    // NB: This is not a HTTP redirect. As far as HTTP is concerned, this is
    // a normal request/response cycle with a status code of 200.
    // **********************************************************************
    header( "X-Redirect: " . $dst );
}
?> 
```

然后在您的 javascript 中执行此操作以拦截 URL 并重置它。

```
$( document ).bind( "pagecontainerload", function( e, triggerData ) {

        // We can use this event to recognize that this is a redirect. The event is
        // triggered when jQuery Mobile has finished loading a page and inserting
        // it into the DOM, but before it has altered the browser history. In this
        // example the server helpfully returns a custom header. However, if you
        // don't have access to the server side, you can still examine
        // triggerData.page, which contains the page that was loaded, but which
        // has not yet been displayed or even recorded in the browser history. You
        // can also examine triggerData.xhr which contains the full XMLHTTPRequest.
        // If there is a way to recognize that this is not the expected page, you
        // can discard it and issue a second load() call for the page that really
        // needs to be displayed to the user, reusing the options from the overall
        // page change process.

        var redirect = triggerData.xhr.getResponseHeader( "X-Redirect" );
        if ( redirect ) {

            // We have identified that this page is really a redirect. Thus, we load
            // the real page instead, reusing the options passed in. It is important
            // to reuse the options, because they contain the deferred governing this
            // page change process. We must also prevent the default on this event so
            // that the page change process continues with the desired page.
            $( e.target ).pagecontainer( "load", redirect, triggerData.options );
            e.preventDefault();
        }
    }); 
```

注意：在撰写本文时，此演示的 jquery 演示页面上有一个损坏的链接，所以我不得不在 github 上找到它

[https://github.com/jquery/jquery-mobile/blob/master/demos/navigation-php-redirect/index.php](https://github.com/jquery/jquery-mobile/blob/master/demos/navigation-php-redirect/index.php) [https://github.com/jquery/jquery-mobile/blob/master/demos/navigation -php-重定向/redirect.php](https://github.com/jquery/jquery-mobile/blob/master/demos/navigation-php-redirect/redirect.php)

1.3 的演示仍在工作 [http://demos.jquerymobile.com/1.3.0/docs/examples/redirect/](http://demos.jquerymobile.com/1.3.0/docs/examples/redirect/)

# html - 让文本随浏览器问题移动

> ID：11774662
> 
> 赞同：0
> 
> 时间：2012-08-02T09:29:45.057
> 
> 标签：html, css

图片下方的文字有问题。

出于某种原因，它离图片太远了，我希望它始终与图片底部保持 30px 的距离。但是，当我缩小浏览器时，它只会将文本向下推。

我已经将我的 CSS 放在了这个[JSFiddle 中。](http://jsfiddle.net/MichaelT/Wrj4Z/)

希望你们中的一个人可以指出我的noobiness错误。

谢谢

迈克尔

![浏览器宽度缩小](../Images/2c0a020c83d74a5dfee12263d558dec9.png)

更新：

解决了以下问题：

```
<script type="text/javascript">
        // The social div 
    var $socialDiv;

    $(document).ready(function() {
        $socialDiv = $('.social');
    });

    $(window).scroll(function() { 
        //Get scroll position of window 
        var windowScroll = $(this).scrollTop(); 

        $socialDiv.css({
            'opacity' : 1 - windowScroll / 400,
            'background-position-y' : -windowScroll / 10
        });
    });
</script> 
```

然后在 div 中添加一个边距底部。

```
<div class="social" style="background-image: url(http://payload51.cargocollective.com/1/7/237315/3336908/HomeImage_o.jpg); background-attachment: fixed; height: 560px; width: 100%; opacity: 1; background-repeat: no-repeat no-repeat; overlow: hidden">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:03:56.440

*注意：OP最终解释说他想实现这个[http://fearthegrizzly.com/](http://fearthegrizzly.com/)效果。*

## 为什么差距这么大？

有多种原因（`<br>`在 .project_content div 上方的边距上添加了标签），但其中之一是 .social div 中的背景随浏览器调整大小，而 div 的高度保持不变。这会在背景下方留下一个巨大的空白，即 div 的其余部分。这是由 css 规则`background-size: 100% auto`（在社交 div 上的 javascript 中定义）引起的。

让我们重写一点 CSS 看看我们是否无法解决这个问题，对吧？

## 应该发生什么？

div 的背景应该保持相同的高度。为了避免形成间隙，明智的做法是让 div 也保持在相同的高度，即背景图像的高度：320px。背景应位于 div 的水平中心，但也应位于顶部。然后，需要修复它以确保您的滚动淡入淡出功能继续工作。

您还提到了想要在 .social div 下方留出 30 像素的间距。为此，您只需要一个`margin-bottom: 30px`. .project_content div 的空白规则和顶部填充是不必要的。

## 执行

所以我们得到了这段CSS：

```
div.social {
  width: 100%;
  height: 320px;
  margin-bottom: 30px;
  background: white url('image.jpg') repeat-x center top fixed;
  } 
```

在[你的 jsFiddle 的一个分支中](http://jsfiddle.net/vydpT/)，你可以看到这一点。请注意，我无法删除 .project_content 顶部的任何间距。

我希望一切都清楚。如果您有任何后续行动，请不要犹豫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:35:45.083

## 为什么div高度不调整大小

在一段描述社交 div 的 Javascript 中，您定义`socialDivHeight = 560`. 这会导致图像所在的 div 具有实心大小，因此当浏览器宽度变小时它不会缩小。

有问题的Javascript是这个（截断）：

```
<script type="text/javascript">
  // The social div 
  var $socialDiv,
  // The social div's height 
  socialDivHeight = 560,
  currentSocialDivHeight = socialDivHeight;

  (..)

  // Then, later, you define a css rule from the set height of 560.
  'height' : socialDivHeight + 'px'
</script> 
```

如果您没有定义该高度，则 div 应自动根据浏览器宽度调整大小。

## 我们如何解决这个问题？

这里的问题是图像被设置为#social div的背景。它只会在 div 为内容决定的任何大小处被切断。您确实指定了一个高度，以确保至少显示整个背景图像，但这也意味着 div 永远不会随着浏览器宽度调整大小。

你需要`<img>`在你的 div 中有一个实际的。

```
<div class="social">
   <img src="image.jpg">
</div> 
```

确保 div 和图片的宽度都是 100%（浏览器的全宽），图片会随着浏览器调整大小，并且 div 的高度会适应图片的高度，因此，push div下面的其他内容向下。`margin-bottom: 30px;`如果您希望发生 30 像素的间距，而不是两个`<br>`15 像素高度的标签，您也可以在 div 上使用。

```
div.social {
  width: 100%;
  margin-bottom: 30px;
}

img {
  width: 100%;
} 
```

我创建了一个非常简化的小提琴，希望能解释所有这些在 HTML 和 CSS 中的含义：http: [//jsfiddle.net/kMnQ2/](http://jsfiddle.net/kMnQ2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:32:52.993

您的 HTML 中有一个包含图像的样式：

```
<div class="social" style="background-image: url(http://a3.sphotos.ak.fbcdn.net/hphotos-ak-prn1/563655_324264884301748_471368753_n.jpg); background-attachment: fixed; background-size: 100%; height: 560px; width: 100%; background-repeat: no-repeat no-repeat; "></div> 
```

它已`height`设置为 560 像素，因此无论图像实际上有多大（或小），您的图像都会占用如此多的垂直空间。

这是格式化图片的Javascript：

```
var $socialDiv,
        // The social div's height 
        socialDivHeight = 560,
        currentSocialDivHeight = socialDivHeight;
        var socalDivWidth = 100;
    $(document).ready(function() {
        $socialDiv = $('.social');
        $socialDiv.css({
            'background-image': 'url(http://a3.sphotos.ak.fbcdn.net/hphotos-ak-prn1/563655_324264884301748_471368753_n.jpg)',
            'background-repeat': 'no-repeat',
            'background-attachment': 'fixed',
            'background-size' : '100% auto',
            'height' : socialDivHeight + 'px',
            'width' : socalDivWidth + '%'
            }); 
```

您应该更改您的`socialDivHeight`值或更改将图像高度设置为的逻辑`socialDivHeight + 'px'`

# php - jQuery动态ui元素创建

> ID：11774668
> 
> 赞同：0
> 
> 时间：2012-08-02T09:30:12.243
> 
> 标签：php, jquery, dynamic, user-interface

这是我第一次使用 jQuery（我对 Java 很熟悉），并且我按照一些在线教程来了解 Draggables/droppables 和事件等。

上下文是一个简单的交互式游戏，用户将多个项目拖入类别中。我想知道的是，是否可以动态创建多个可以拖动的对象，其中的数量在主页加载之前由 php 脚本确定？就像 Java 术语中的构造函数？

任何帮助或方向将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:32:30.617

是的，使用 jQuery 创建元素非常容易。例如，下面的代码将创建一个新`div`元素：

```
var $div = $("<div></div>").appendTo("body"); 
```

要使这个元素可拖动，您需要在页面中包含[jQueryUI](http://jqueryui.com/)，然后调用[`draggable()`](http://jqueryui.com/demos/draggable/)它：

```
$div.draggable(); 
```

[**工作示例**](http://jsfiddle.net/c6Pz6/)

# tabs - Sugar Pro 6.3.0 中是否有任何选项卡优先级设置

> ID：11774669
> 
> 赞同：0
> 
> 时间：2012-08-02T09:30:15.240
> 
> 标签：tabs, sugarcrm

我使用的是sugar pro 6.3.0，但是当我使用管理选项卡中可用的显示模块选项卡和子面板选项重新编辑我的选项卡时，即使帐户选项卡显示在其他选项卡下方，帐户之类的选项卡也会自动显示在其他选项卡之前管理»显示模块选项卡和子面板，如下所示：

![在此处输入图像描述](../Images/b5425a3b0c6d846c235e758dd047216b.png)

知道在哪里更改该优先级以按照上图中“显示的选项卡”列中所示的确切顺序查看选项卡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:08:35.110

单击顶部“注销”旁边的用户名。
然后单击选项卡“高级”。
在“布局选项”面板中，您应该能够为特定用户安排选项卡的顺序。单击同一页面上的“重置用户首选项”按钮也应该修复它。

# mysql - 如何避免在 MySQL 中使用子查询多次运行大表？

> ID：11774672
> 
> 赞同：1
> 
> 时间：2012-08-02T09:30:23.980
> 
> 标签：mysql, select, group-by, subquery

`MySQL 5..0.88/Coldfusion8`我在继承的网站上有一个产品表。

我需要多次查询表格以在搜索表单中填写默认值并进行实际搜索。

我所有的查询基本上都是一样的，吃了很多时间。唯一改变的是被查询的参数，实际的查询设置没有改变，所以我希望这可以以某种方式捆绑在一个查询中以避免运行查询 x 来获取值 A，然后运行查询 x 到获得价值 B 等等....

我的转储查询如下所示：

```
 // 1/6 queries - get all company names based on active products
 SELECT art.firma
      FROM artikelstammdaten AS art USE INDEX (i_firma)
      // join pricelists to exclude seller if pricelists applicable but user not authorized 
      LEFT JOIN preislisten p ON 
           p.iln = art.iln
           AND p.ean = art.ean 
           // dynamic list of seller IDs and pricelist name
           AND ( (  p.preisliste = "name1" AND p.iln= "12345" ) OR (  p.preisliste = "name2" AND p.iln= "98765" ) OR (1=0) )

            WHERE art.aktiv = "ja" 
            // if pricelists apply, only take products with a pice not zero
            AND ( IF( art.iln IN ( 12345,98765), p.preisliste IS NOT NULL,1 ) )
            // exclude demo
            AND art.iln != "111" AND art.iln != "222" AND art.iln != "777"
            // sellers free to order or authorization ok
            AND (art.modus = "OPEN" OR art.iln IN ( 12345,98765) )
            // inventory
            AND ( art.bestand != "0" ) AND art.vororder = "0"
            // order mode
            AND ( art.vororder = 'nein' OR art.vororder = 'no' )
            GROUP BY art.firma 
```

运行后，我必须再次运行它才能获得：

```
 art.marke= brandnames
 art.preis_aktuell = minimum buying price
 art.preis_vk = maximum buying price
 ... 4 more 
```

我一直在尝试使用这样的子查询来做到这一点：

```
 SELECT DISTINCT
      ( SELECT art.firma  ) AS firma
     ,( SELECT art.marke  ) AS marke
     ,( SELECT MIN(art.preis_aktuell) ) AS ak_min
     ,( SELECT MAX(art.preis_aktuell) ) AS ak_max
     ,( SELECT MIN(art.preis_vk) ) AS vk_min
     ,( SELECT MAX(art.preis_vk) ) AS vk_max
     ,( SELECT ROUND(MIN( 100*( ( art.preis_ek - art.preis_aktuell ) / art.preis_ek ) ))) AS reb_min
     ,( SELECT ROUND(MAX( 100*( ( art.preis_ek - art.preis_aktuell ) / art.preis_ek ) ))) AS reb_max
 FROM artikelstammdaten AS art USE INDEX (i_iln,)
    ....
    GROUP BY art.marke
    ORDER BY COUNT(art.marke) DESC; 
```

但我无法让它工作，因为我只得到一条记录（对于最小值/最大值来说还可以，但对于 x-sellers、y-brands 和 20 种尺寸来说不行。我认为这是因为我不知道如何对子查询进行分组，所以：

**问题：**
是否可以`bundle`使用子查询/其他方式将上述查询合并为单个查询？我怎么能`GROUP BY`这样我就不会得到一个结果记录？

感谢您的帮助！

**编辑：** 也许有。改为`SELECT DISTINCT`和`GROUPB BY`（见上文）。现在的问题是如何对特定列进行排序以及结果是否有效（现在检查）

**EDIT2：**
这是表`"Articles"`和`"Pricelists"`. 文章包括基本产品，包括基本价格，价格表包含替代价格，可以分配给用户。

**文章创建（字段为德语，我将上述查询转换回德语）**

```
CREATE TABLE `articles` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `iln` VARCHAR(13) NULL DEFAULT NULL,
    `ean` VARCHAR(35) NULL DEFAULT NULL,
    `artikelnummer` VARCHAR(35) NULL DEFAULT NULL,
    `artikelbezeichnung` VARCHAR(70) NULL DEFAULT NULL,
    `artikelbezeichnung_lang` VARCHAR(255) NULL DEFAULT NULL,
    `groesse` VARCHAR(10) NULL DEFAULT NULL,
    `farbe` VARCHAR(35) NULL DEFAULT NULL,
    `farbnummer` VARCHAR(10) NULL DEFAULT NULL,
    `material` VARCHAR(70) NULL DEFAULT NULL,
    `preis_ek` DECIMAL(12,2) NULL DEFAULT NULL,
    `preis_vk` DECIMAL(12,2) NULL DEFAULT NULL,
    `preis_aktuell` DECIMAL(12,2) NULL DEFAULT NULL,
    `einheit` VARCHAR(3) NULL DEFAULT NULL,
    `firma` VARCHAR(35) NULL DEFAULT NULL,
    `marke` VARCHAR(35) NULL DEFAULT NULL,
    `warengruppe1` VARCHAR(35) NULL DEFAULT NULL,
    `warengruppe2` VARCHAR(35) NULL DEFAULT NULL,
    `warengruppe3` VARCHAR(35) NULL DEFAULT NULL,
    `groessenlauf` VARCHAR(35) NULL DEFAULT NULL,
    `bildpfad` VARCHAR(255) NULL DEFAULT NULL,
    `bilddateiname` VARCHAR(255) NULL DEFAULT NULL,
    `nos` VARCHAR(4) NULL DEFAULT NULL,
    `nos_anzeige` VARCHAR(4) NULL DEFAULT NULL,
    `aktiv` VARCHAR(4) NULL DEFAULT NULL,
    `vororder` VARCHAR(4) NULL DEFAULT 'Nein',
    `highlight` VARCHAR(4) NULL DEFAULT NULL,
    `modus` VARCHAR(4) NULL DEFAULT NULL,
    `bestand` DECIMAL(10,0) NULL DEFAULT '0',
    `last_import` DATETIME NULL DEFAULT NULL,
    `last_update` DATETIME NULL DEFAULT NULL,
    PRIMARY KEY (`id`),
    INDEX `i_iln` (`iln`),
    INDEX `i_iln_id` (`id`, `iln`),
    INDEX `i_aktiv` (`aktiv`),
    INDEX `i_bestand` (`bestand`),
    INDEX `i_artikelnummer` (`artikelnummer`),
    INDEX `i_artikelbezeichnung` (`artikelbezeichnung`),
    INDEX `i_artikelbezeichnung_lang` (`artikelbezeichnung_lang`),
    INDEX `i_farbe` (`farbe`),
    INDEX `i_groesse` (`groesse`),
    INDEX `i_preis_aktuell` (`preis_aktuell`),
    INDEX `i_preis_vk` (`preis_vk`),
    INDEX `i_warengruppe1` (`warengruppe1`),
    INDEX `i_warengruppe2` (`warengruppe2`),
    INDEX `i_nos` (`nos`),
    INDEX `i_modus` (`modus`),
    INDEX `i_firma` (`firma`),
    INDEX `i_marke` (`marke`),
    INDEX `i_highlight` (`highlight`),
    INDEX `i_preis_ek` (`preis_ek`),
    INDEX `i_warengruppe3` (`warengruppe3`),
    INDEX `i_farbnummer` (`farbnummer`),
    INDEX `i_ean` (`ean`),
    INDEX `i_vororder` (`vororder`)        
    )
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=1; 
```

**价目表 CREATE**

```
CREATE TABLE `preislisten` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `iln` VARCHAR(13) NULL DEFAULT NULL,
    `preisliste` VARCHAR(35) NULL DEFAULT NULL,
    `bezeichnung` VARCHAR(35) NULL DEFAULT NULL,
    `EAN` VARCHAR(14) NULL DEFAULT NULL,
    `waehrung` VARCHAR(3) NULL DEFAULT NULL,
    `ek` DECIMAL(18,3) NULL DEFAULT NULL,
    `vk` DECIMAL(18,3) NULL DEFAULT NULL,
    `onlinepreis` DECIMAL(18,3) NULL DEFAULT NULL,
    PRIMARY KEY (`id`),
    INDEX `i_iln` (`iln`),
    INDEX `ind_onlinepreis` (`onlinepreis`)
    )
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=1; 
```

**选择**

```
SELECT DISTINCT
     ( SELECT art.firma  ) AS comp
    ,( SELECT art.marke  ) AS marke
    ,( SELECT MIN(art.preis_aktuell) ) AS ak_min
    ,( SELECT MAX(art.preis_aktuell) ) AS ak_max
    ,( SELECT MIN(art.preis_vk) ) AS vk_min
    ,( SELECT MAX(art.preis_vk) ) AS vk_max
    ,( SELECT ROUND(MIN( 100*( ( art.preis_ek - art.preis_aktuell ) / art.preis_ek ) ))) AS reb_min
    ,( SELECT ROUND(MAX( 100*( ( art.preis_ek - art.preis_aktuell ) / art.preis_ek ) ))) AS reb_max     

    FROM artikelstammdaten AS art USE INDEX (i_
    LEFT JOIN preislisten p ON 
                p.iln = art.iln 
            AND p.ean = art.ean 
            AND ( (  p.preisliste = "-Standard-" AND p.iln = "9900000003005" ) OR (  p.preisliste = "-Standard-" AND p.iln = "2222222222222" ) OR (1=0) )

            WHERE art.aktiv = "ja" 
            AND ( IF( art.iln IN ( 9900000003005,2222222222222 ), p.onlinepreis IS NOT NULL,1 ) )
            AND art.iln != "1111111111111" AND art.iln != "2222222222222" AND art.iln != "7777777777777"
            AND (art.modus = "OPEN" 
                    OR art.iln IN ( 9900000003005,2222222222222 ) 
            )
            AND ( art.bestand != "0" OR ( ( art.nos = "JA" OR art.nos = "YES" ) AND art.nos_anzeige = "JA" ) )  AND art.vororder = "nein"
            AND ( art.vororder = 'nein' OR art.vororder = 'no' ) 
```

**解释选择**

```
"id "select_type"   "table" "type"  "possible_keys" "key"   "key_len"   "ref"   "rows"  "Extra"
"1" "SIMPLE"    "art"   "ref"   "i_iln,i_aktiv,i_bestand,i_nos,i_modus,i_vororder"  "i_aktiv"   "7" "const" "16844" "Using where; Using temporary; Using filesort"
"1" "SIMPLE"    "p" "ref"   "i_iln" "i_iln" "16"    "db.art.iln"    "1075"  "Using where" 
```

行。大量数据...如果您有任何问题，请告诉我。上的indeces`articles`似乎有点多。时间杀手是带有价目表的 LEFT JOIN。没有这个，查询会很快，但这种情况很少见。

谢谢参观！如果有人可以就如何加快速度给我一个很好的答案，我会赏金！

**编辑 3**：
我添加了`Unique index`. 现在重新运行查询`EXPLAIN`是：

```
"id" "select_type"  "table" "type"  "possible_keys" "key"   "key_len"   "ref"   "rows"  "Extra"
"1"  "SIMPLE"        "art"  "ref"   "i_iln,i_aktiv,i_bestand,i_nos,i_modus,i_vororder"  "i_aktiv"   "7" "const" "15409" "Using where; Using temporary; Using filesort"
"1"  "SIMPLE"        "p"    "ref"   "i_iln_ean,i_iln"   "i_iln_ean" "33"    "db.art.iln,db.art.ean" "1" "Using where" 
```

好像快了一点。执行时间降至 0，所以我想这是一个好兆头:-)。问题：我是否也应该将此索引添加到文章表中。那里也将是独一无二的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:49:09.453

当你这样做时，`GROUP BY art.comp`我假设你真正想做的是`SELECT DISTINCT`？

无论如何，如果您考虑一下，您将获得的各个列都返回不同数量的行，因为您不知道每个列将具有多少不同的值。

这会自动告诉您不能一次将它们全部作为列返回：您将获得多少行？

如果查询速度很慢，那么您应该对此进行处理-我看不到任何应该使查询变慢的地方。您可能需要为您的表添加一些复合索引，以便 MySQL 可以更好地过滤事物。

# string - 如何简化这个较少的 css 代码？

> ID：11774676
> 
> 赞同：1
> 
> 时间：2012-08-02T09:30:33.870
> 
> 标签：string, variables, less, interpolation

我目前有这个代码：

```
input[type=text] {
    background:transparent top center no-repeat;
    height:30px;
    font-size:13px;
    color:@greyBlue;
    padding:0 10px;
    border:none;
    &.long {
        background-image:url("/img/input_long.png");
        width:214px;
    }
    &.medium {
        background-image:url("/img/input_medium.png");
        width:96px;
    }
    &.short {
        background-image:url("/img/input_short.png");
        width:55px;
    }
} 
```

你知道我是否可以通过使用变量更改文件名部分来简化它？像这样的东西：

```
input[type=text] {
    @input = "";
    background-image:url("/img/input_@{input}.png");

    &.long {
        @input = "long";
    }
} 
```

如果当然这不起作用，但如果您对功能方式有任何想法......非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:52:04.750

创建一个混合

```
.bgImg(@input) {
     background-image:url("/img/input_@{input}.png");
} 
```

并相应地调用它：

```
&.long {
    .bgImg("long");
} 
```

# android - 将参数从 android 传递到 AIR

> ID：11774681
> 
> 赞同：0
> 
> 时间：2012-08-02T09:30:59.183
> 
> 标签：android, apache-flex, air

我想将参数从 Android 传递到 AIR。我已经阅读了很多教程。但是在其中一个教程中，他们建议在这种情况下使用意图不是传递参数的好选择。

他们建议使用`this.dispatchStatusEventAsync("parameterName", Integer.toString(value));`.

我使用 FlashRuntimeExtensions.jar 作为库，并在必要时使用适当的 FREExtension、FREFunction 和 FREContext。但是在主要活动中，当我调用扩展 FREContext 的类 ExtensionContext 时，我收到 NoClassDefFoundError 错误。我也在尝试其他示例，但遇到相同的错误。

你能建议我怎么做或修复那个错误吗？有没有其他方法可以将参数从 Android 传递到 AIR。

提前致谢！

# directx - 在 DirectX 10 和 11 中是否始终保证后像素着色器混合？

> ID：11774682
> 
> 赞同：0
> 
> 时间：2012-08-02T09:31:05.773
> 
> 标签：directx, directx-11

在 DirectX 9 下，仍然需要在每个纹理的基础上查询设备的“后像素着色器混合”功能位。

此功能现在不再存在，但 DirectX 11 具有全新的 Output-Merger_State OM，它基本上可以实现 PPSB 在锡上所说的功能。

我找不到任何地方说 DX10 和 DX11 保证它们提供此功能，所以我可以一直依赖它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:57:57.263

AFAIK 是的，它始终可用。

# javascript - C语言中的Javascript编译器？

> ID：11774686
> 
> 赞同：2
> 
> 时间：2012-08-02T09:31:11.793
> 
> 标签：javascript, c

我正在寻找一个简单的（最好是基于 C 的）Javascript 编译器，我可以使用它来确定一段 Javascript 是否包含任何语法错误，以及这些错误的位置（行号）。有没有人知道我可以用来做这样的事情的小图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:33:31.680

[V8](http://code.google.com/p/v8/)对你来说不够好？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:37:19.153

你也可以试试Mozilla 的[SpiderMonkey](https://developer.mozilla.org/en/SpiderMonkey)

# c# - 拆分多语言字符串

> ID：11774689
> 
> 赞同：2
> 
> 时间：2012-08-02T09:31:32.747
> 
> 标签：c#, java, .net

我有一个 AS/400 回复文本，它带有如下所示的多语言字符串，长度为 28872 个字符。

2012021920120219000000000300000D000000010146208D22ﻑﻳﺭﺎﺻﻣ

我必须将文本拆分为每个块 240 个字符，但由于在我的逻辑之间有阿拉伯字符，因此无法提取确切的 240 个字符长度。

我的问题是如何在不丢失原始格式的情况下拆分多语言文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:37:16.573

您应该这样编写代码，根据文本编码，它可以准确提取 240 个字符。一个字符可以占用几个字节，具体取决于编码。常见的编码是`UTF-8`. 查看 Wikipedia，了解 UTF-8 的工作原理。这将允许您编写正确的工作代码。[UTF-8 说明](http://en.wikipedia.org/wiki/UTF-8#Description)

因此，您应该找出当前字符占用了多少字节。

当然，在开始之前，请确保您知道输入文本的编码。

* * *

知道 Java 使用 UTF-16 来存储字符。因此，这意味着一个阿拉伯字符可以由多个 组成`char`，因为代码点超过 2^16。为了正确使用它，我会将整个字符串转换为字节缓冲区：

```
String longStringToSplit = ...;
byte[] stringUTF8 = longStringToSplit.getBytes("UTF-8");
// now, split it manually and correct, using the utf-8 specifications you
// can find in the link I gave you to wiki. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:08:27.487

这是一个简单的代码可以做到这一点：

```
List<string> SplitString(String input, int length)
{
    var splitedList = new List<string>();

    string block = "";
    var arabicBlock = "";

    foreach (char c in input)
    {
        if (block.Length + arabicBlock.Length > length - 1)
        {
            splitedList.Add(block);
            block = "";
        }

        var b = (int) c;
        // check here if charachter is arabic
        // this is a sample, or you can use 'IsArabicChar'
        //if (b > 6000)
        if(IsArabicChar(c))
        {
            arabicBlock += c.ToString();
        }
        else
        {
            block += arabicBlock + c;
            arabicBlock = "";
        }
    }
    return splitedList;
} 
```

`IsArabicChar`方法可能很有用：

```
internal static bool IsArabicChar(Char character)
{
    if (character >= 0x600 && character <= 0x6ff)
        return true;

    if (character >= 0x750 && character <= 0x77f)
        return true;

    if (character >= 0xfb50 && character <= 0xfc3f)
        return true;

    if (character >= 0xfe70 && character <= 0xfefc)
        return true;

    return false;
} 
```

# javascript - 将整数数组从插件传递到 JavaScript

> ID：11774692
> 
> 赞同：0
> 
> 时间：2012-08-02T09:31:34.087
> 
> 标签：javascript, arrays, plugins, npapi

我正在尝试将数组从插件传递给 Javascript。但我无法做到。我参考了其他类似的帖子，其中给出的解决方案是首先获取 Dom 窗口对象，然后使用 NPN_Invoke 和 NPN_GetStringIdentifier("array") 调用该函数，然后推送数组元素。但是当我尝试它时，它在 NPN_Invoke 上崩溃了。我无法找出原因，是因为 Dom 的 NPObject 没有任何与“数组”相关的方法还是其他原因？

这是我的插件代码...（我的数组数据是 0,1,2,...9 循环中 i 的值）

```
 bool ScriptableObject::method_process_getarray_intval(const NPVariant* args, uint32_t argCount, NPVariant* result)
    {
            printf("\n DATATYPE method_process_getarray_intval");
            NPObject  DomWin;
            NPVariant Array;
            NPError   l_RetErr;
            bool      l_RetBool;
            NPIdentifier l_NPId;

            //Get the Window Object        
            l_RetErr = NPN_GetValue(m_npp,NPNVWindowNPObject,&DomWin);
            if(l_RetErr == NPERR_NO_ERROR)
                    printf("\n \t Got the Dom Window Object");
            else
                    printf("\n \t Error occured while getting the Dom Window Object");

            //Get the Array by invoking DomWin using ARRAY method of browser

            //Get string Identifier for Array
            l_NPId = NPN_GetStringIdentifier("Array");

            l_RetBool = NPN_Invoke(m_npp,&DomWin,l_NPId,NULL,0,&Array);
            if(l_RetBool)
                    printf("\n \t Invoked for Array");
            else
                    printf("\n \t Error while Invoking for Array");

            //Fill the array elements using PUSH method of Array NPVariant
            l_NPId = NPN_GetStringIdentifier("push");
            for(int i = 0;i < 10; i++)
            {
                    NPVariant *arg =(NPVariant *) g_browser->memalloc(sizeof(NPVariant));
                    INT32_TO_NPVARIANT(i,*arg);
                    NPVariant result;
                    l_RetBool= NPN_Invoke(m_npp,Array.value.objectValue,l_NPId,arg,1,&result);
                    if(l_RetBool)
                            printf("\n \t Invoked for Array i : %d",i);
                    else
                            printf("\n \t Error while Invoking for Array i :%d",i);
            }
            return true;

    } 
```

我的html页面看起来像这样。我不知道这是否正确。请让我知道是否有任何更正...

```
 <html>
    <script type="text/javascript">
    var inarray ;

    function handleEvent(e) {
            ...
            if (e.keyCode == 55)
            {
                            document.getElementById('arrayint_ele_get').innerHTML = inarray;
                            process_getintarray(inarray);
            }
    }

    </script>
    <script type="text/javascript">
    function  process_getintarray(inarray)
    {
            if(obj)
            {
                    obj.process_getarray_intval(inarray);
            }
    }
    </script>

    <body onload="init()" onkeydown="handleEvent(event)">

    <div id="sq" style="width:50px;height:50px;position:relative;left:0px;border:1px solid #333333;background-color:#FF0000"></div>
    ......
    <div style="position:absolute;left:100px;top:10px"> PLUGIN-SCRIPTS </div>
    <div id ="arrayint_ele_get" style="position:absolute;left:100px;top:300px"> ARRAY_GETINT VAL </div>
    .....
    </body>

    </html> 
```

欢迎提出任何建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:14:18.407

从你给我们的信息中我能收集到的信息很少，我猜你的 NPNFuncs 函数指针设置不正确（因此你调用了一个错误的函数）或者你的 m_npp 以某种方式损坏了。当然，如果是其中任何一种情况，我认为请求 DOM Window 对象也会死掉。

我可能需要更多的代码来推测。您可能要考虑使用[FireBreath](http://www.firebreath.org)或 nixysa，而不是自己做所有事情；它会让你专注于你的实际插件，而不是处理 NPAPI。只是一个想法。

下一个想法，是 NPN_Invoke 调用 g_browser->invoke 吗？因为你提到你正在检查 hasmethod 但是你转身并调用 NPN_HasMethod; 如果这不是全部正确连接，那肯定会导致这样的问题。

归根结底，在某个地方，您的一个指针已关闭；可能性是：

*   NPN_Invoke 和 NPN_HasMethod 没有在 g_browser 上调用正确的方法
*   g_browser（您的 NPNFuncs 结构）没有有效的函数指针
*   您的 npp 无效（未正确保存等）

我看不出它怎么可能是其他任何东西。

# php - 按子数组排序数组

> ID：11774698
> 
> 赞同：3
> 
> 时间：2012-08-02T09:32:01.013
> 
> 标签：php, arrays

我有数组：

```
$array = array(array('2012-12-12', 'vvv'), array('2012-12-14', 'df'),array('2012-12-10', 'vvv'),array('2012-12-11', 'vvv'));

Array
(
    [0] => Array
        (
            [0] => 2012-12-12
            [1] => vvv
        )

    [1] => Array
        (
            [0] => 2012-12-14
            [1] => df
        )

    [2] => Array
        (
            [0] => 2012-12-10
            [1] => vvv
        )

    [3] => Array
        (
            [0] => 2012-12-11
            [1] => vvv
        )

) 
```

[http://codepad.org/gxw2yKMU](http://codepad.org/gxw2yKMU)

可以用日期 DESC 对它进行排序吗？对于这个例子应该是：

```
$array[1] //2012-12-14
$array[0] //2012-12-12
$array[3] //2012-12-11
$array[2] //2012-12-10 
```

对我来说，最好的方法是使用 PHP 的嵌入式函数，但是如何？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:40:22.330

您应该可以使用[usort](http://cn2.php.net/manual/en/function.usort.php)

```
usort( $array, 'sortFunction' );

function sortFunction( $a, $b ) {
    if( $a[0] == $b[0] )
        return 0;
    return ( $a[0] > $b[0] ? return -1 : 1 );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:38:47.030

您可以使用`usort`自定义函数。如果您使用的是 PHP < 5.3，您将需要一个命名函数，而不是像我一样的匿名函数。

```
$array = array(
    array('2012-12-12', 'vvv'),
    array('2013-12-14', 'df'),
    array('2012-12-14', 'df'),
    array('2012-12-10', 'vvv'),
    array('2012-12-11', 'vvv')
);

usort($array, function($a, $b) {
    if ($a[0] == $b[0]) return 0;
    return ($a > $b) ? -1 : 1;
});
print_r($array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T09:38:58.217

您可以使用`array_multisort()`：

```
foreach ($array as $key => $row) {
    $dates[$key] = $row[0]; 
}
array_multisort($dates, SORT_DESC, $array); 
```

首先，您将所有日期放在一个新数组中。然后，`array_multisort()`将按照与第一个数组 ( `$array`) 相同的顺序对第二个数组 ( ) 进行`$dates`排序

# r - 将文本添加到 grid.table 图中

> ID：11774703
> 
> 赞同：32
> 
> 时间：2012-08-02T09:32:25.423
> 
> 标签：r

我最近开始使用包中的`grid.table`功能`gridExtra`将表格数据转换为 png 图像文件以在网络上使用。到目前为止，我一直对它感到满意，因为它默认产生非常漂亮的输出，有点像`ggplot2`表格的。[就像提出](https://stackoverflow.com/questions/11432836/conditionally-formatting-tables-using-gridextra-in-r)这个问题的人一样，我很想看到能够为各个列指定理由，但这将是对已经更漂亮的蛋糕的锦上添花。

我的问题是是否可以在 a 周围添加文本，`grid.table`以便为绘制的表格提供标题和脚注。在我看来这应该是可行的，但我对网格图形的了解还不够，无法弄清楚如何将 grobs 添加到 table grob 中。例如，这段代码：

```
require(gridExtra)

mydf <- data.frame(Item = c('Item 1','Item 2','Item 3'), 
　　　　　　　　　　　　　　　　　　　　Value = c(10,15,20), check.names = FALSE)
grid.table(mydf,
           gpar.coretext=gpar(fontsize = 16),
           gpar.coltext = gpar(fontsize = 16),
           gpar.rowtext = gpar(fontsize = 16),
           gpar.corefill = gpar(fill = "blue", alpha = 0.5, col = NA),
           h.even.alpha = 0.5,
           equal.width = FALSE,
           show.rownames = FALSE,
           show.vlines = TRUE,
           padding.h = unit(15, "mm"),
           padding.v = unit(8, "mm")
           ) 
```

生成此图：

![在此处输入图像描述](../Images/878679c2b5abd43a7ddbcedf627a07fd.png)

当我真的希望能够在代码中执行以下操作而不是使用另一个应用程序编辑图像时：

![在此处输入图像描述](../Images/11702c4c6229b24343fb97e78fe1c7c8.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-02T10:03:42.500

要将文本放置在靠近表格的位置，您需要先评估表格大小，

```
library(gridExtra)
d <- head(iris)
table <- tableGrob(d)

grid.newpage()
h <- grobHeight(table)
w <- grobWidth(table)
title <- textGrob("Title", y=unit(0.5,"npc") + 0.5*h, 
                  vjust=0, gp=gpar(fontsize=20))
footnote <- textGrob("footnote", 
                     x=unit(0.5,"npc") - 0.5*w,
                     y=unit(0.5,"npc") - 0.5*h, 
                  vjust=1, hjust=0,gp=gpar( fontface="italic"))
gt <- gTree(children=gList(table, title, footnote))
grid.draw(gt) 
```

**编辑（17/07/2015）**使用 gridExtra >=2.0.0，这种方法不再适用。tableGrob 现在返回一个 gtable，可以更轻松地自定义。

```
library(gridExtra)
d <- head(iris)
table <- tableGrob(d)

library(grid)
library(gtable)

title <- textGrob("Title",gp=gpar(fontsize=50))
footnote <- textGrob("footnote", x=0, hjust=0,
                     gp=gpar( fontface="italic"))

padding <- unit(0.5,"line")
table <- gtable_add_rows(table, 
                         heights = grobHeight(title) + padding,
                         pos = 0)
table <- gtable_add_rows(table, 
                         heights = grobHeight(footnote)+ padding)
table <- gtable_add_grob(table, list(title, footnote),
                         t=c(1, nrow(table)), l=c(1,2), 
                         r=ncol(table))
grid.newpage()
grid.draw(table) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-16T15:16:52.467

如果您*只*想要标题（没有脚注），这里是@baptiste 示例的简化版本：

```
title <- textGrob("Title", gp = gpar(fontsize = 50))
padding <- unit(0.5,"line")
table <- gtable_add_rows(
  table, heights = grobHeight(title) + padding, pos = 0
)
table <- gtable_add_grob(
  table, list(title),
  t = 1, l = 1, r = ncol(table)
)
grid.newpage()
grid.draw(table) 
```

# java - 用于查找两点之间路径的 SQL 查询

> ID：11774707
> 
> 赞同：2
> 
> 时间：2012-08-02T09:32:29.310
> 
> 标签：java, android, database, sqlite

在过去的一年里，我一直在开发一个基于 Android 的 Transit 应用程序，该应用程序运行一个用 PHP 编写的基于 Restful XML 的 Web 服务。

从我的 MySQL 数据库中正确查询 GTFS 数据时遇到了一些问题。我已将提要文件完全导入数据库，因为它们是 .cvs 格式（包括字段名称）。

有没有人有适当的 SQL 查询来查找两点之间的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:00:51.230

如果这可以在 SQL（非程序）中完成，那将非常有趣。我想它会通过语法或递归 CTE 使用连接。但是由于 MySQL 或 SQLite 不支持这些（不确定您要问的是哪一个），所以我会进行简单的查询并在 Java 中进行处理。

# ruby - 是 JSON 数组吗？

> ID：11774711
> 
> 赞同：1
> 
> 时间：2012-08-02T09:32:46.160
> 
> 标签：ruby, json, parsing, arrays

```
json_arr = "{"name" : "John","class":"09"},{"name":"Miley","class":"10"}" 
```

这是一个有效的 JSON 数组吗？它是 JSON 中的数组数组吗？我对此很陌生，有点困惑。如果是正确的，我该如何遍历这个数组并解析每个 json 数组？谢谢！

我写了这个：

```
require 'json'
json_arr.each do |x|
pa = JSON(x)
end 
```

当我打印 pa 时，它没有被解析。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:35:13.167

它不是一个有效的数组，JSON 数组被 [] 包围。此外，您在双引号内使用了未转义的双引号。

接近有效数组的东西看起来像这样：

`[{"name":"john", "class":"09"},{"name":"Miley","class":"10"}]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:43:04.603

您必须用以下内容包围您的数组`[]`：

```
json_arr = '[{"name" : "John","class":"09"},{"name":"Miley","class":"10"}]' 
```

为了遍历数组，您必须*解析*JSON 字符串：

```
arr = JSON.parse(json_arr)
# => [{"name"=>"John", "class"=>"09"}, {"name"=>"Miley", "class"=>"10"}]
arr.each do |x|
  # do something with x
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:37:56.217

[在此站点http://jsonlint.com/](http://jsonlint.com/)检查您的 json 数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:35:29.870

json 中的数组遵循此语法`[item1, item2, item3]`，因此您缺少`[]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:39:07.570

简而言之：不，它无效。这就是你要找的：

```
[
        {
                "name" : "John",
                "class" : "09"
        },
        {
                "name" : "Miley",
                "class" : "10"
        }
] 
```

将来要对此进行测试，请[尝试使用此工具](http://jsonviewer.stack.hu/)。

# android - 应用程序进入后台 1 分钟时的 keydispatchingtimedout

> ID：11774715
> 
> 赞同：0
> 
> 时间：2012-08-02T09:32:59.407
> 
> 标签：android

在我的代码中，我调用了一些本机 c++ 方法。一切正常。但是当我在 HTC Evo 3d 上测试我的应用程序时，我遇到了问题。当我将我的应用程序置于后台超过 1 分钟并返回时，应用程序卡在本机函数调用中。它没有被执行并且我得到“应用程序没有响应对话框”（ANR keydispatchingtimedout）。此问题仅在 HTC Evo 3D 上出现。在其他手机上它工作正常。它的原因是什么？

# iphone - 我可以将图像转换为点网格吗？

> ID：11774720
> 
> 赞同：1
> 
> 时间：2012-08-02T09:33:29.297
> 
> 标签：iphone, ios, image, image-processing

只是一个快速的问题。

可以这样：

![圆点图像](../Images/63f0d7032210d9d4c7eb0f63ee53296e.png)

在 iOS 设备上完成图像处理？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:11:11.030

是的，尽管 Core Graphics 可能不是对图像进行此类过滤的最佳方式。我的建议是使用 OpenGL ES 2.0 片段着色器。事实上，我只是写了一个来做到这一点：

![圆点图像转换](../Images/eb2d12fc63c6eb249467445a5811a096.png)

这是我刚刚添加到我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中的 GPUImagePolkaDotFilter。使用它的最简单方法是获取框架并将过滤器应用于您想要的任何内容（它足够快以在视频上实时运行）。

如果您只想使用片段着色器，以下是我的代码：

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;

 uniform highp float fractionalWidthOfPixel;
 uniform highp float aspectRatio;
 uniform highp float dotScaling;

 void main()
 {
     highp vec2 sampleDivisor = vec2(fractionalWidthOfPixel, fractionalWidthOfPixel / aspectRatio);

     highp vec2 samplePos = textureCoordinate - mod(textureCoordinate, sampleDivisor) + 0.5 * sampleDivisor;
     highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio));
     highp vec2 adjustedSamplePos = vec2(samplePos.x, (samplePos.y * aspectRatio + 0.5 - 0.5 * aspectRatio));
     highp float distanceFromSamplePoint = distance(adjustedSamplePos, textureCoordinateToUse);
     lowp float checkForPresenceWithinDot = step(distanceFromSamplePoint, (fractionalWidthOfPixel * 0.5) * dotScaling);

     gl_FragColor = vec4(texture2D(inputImageTexture, samplePos ).rgb * checkForPresenceWithinDot, 1.0);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:41:55.730

您应该能够通过循环和绘制黑白圆圈来做到这一点，然后使用该图像作为图像的蒙版。

这是我在 Google 上找到的关于 CoreGraphics 掩码的第一个链接，您可以根据自己的需要进行调整： http: [//cocoawithlove.com/2009/09/creating-alpha-masks-from-text-on.html](http://cocoawithlove.com/2009/09/creating-alpha-masks-from-text-on.html)

我想画很多圆圈是你可以通过自己的谷歌搜索来弄清楚的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:37:18.933

简短的回答是：是的，但目前我不确定具体使用哪个框架。注意：你刚刚问过是否可能，我给出了你的问题的答案，而不是如何去

# jakarta-ee - 当容器管理的 tx EJB 提交时，如何捕获和包装 JTA 抛出的异常？

> ID：11774722
> 
> 赞同：23
> 
> 时间：2012-08-02T09:33:41.857
> 
> 标签：jakarta-ee, jpa, ejb, eclipselink, jboss7.x

我正在努力解决管理非平凡数据模型的 EJB3 类的问题。当我的容器管理的事务方法提交时，我抛出了约束验证异常。我想防止它们被包裹起来`EJBException`，而是抛出一个调用者可以处理的理智的应用程序异常。

要将其包装在合适的应用程序异常中，我必须能够捕获它。大多数时候，一个简单的 try/catch 就可以完成这项工作，因为验证异常是从`EntityManager`我所做的调用中引发的。

不幸的是，一些约束只在提交时检查。例如，`@Size(min=1)`仅当容器管理的事务提交时，一旦它在我的事务方法结束时离开我的控制权，才会捕获对映射集合的违反。我无法捕获验证失败时抛出的异常并将其包装，因此容器将其包装在 a 中`javax.transaction.RollbackException`并将其包装*在*cursed`EJBException`中。调用者必须捕获所有`EJBException`s 并深入到原因链中以试图找出它是否是一个验证问题，这*真的*不是很好。

我正在使用容器管理的事务，所以我的 EJB 如下所示：

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER
class TheEJB {

    @Inject private EntityManager em;

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public methodOfInterest() throws AppValidationException {
       try {
           // For demonstration's sake create a situation that'll cause validation to
           // fail at commit-time here, like
           someEntity.getCollectionWithMinSize1().removeAll();
           em.merge(someEntity);
       } catch (ValidationException ex) {
           // Won't catch violations of @Size on collections or other
           // commit-time only validation exceptions
           throw new AppValidationException(ex);
       }
    }

} 
```

...`AppValidationException`已检查异常或未检查异常在哪里进行了注释`@ApplicationException`，因此它不会被 EJB3 包装。

有时我可以用 an 触发早期的约束违规`EntityManager.flush()`并抓住它，但并非总是如此。即使这样，我也*真的*希望能够在提交时捕获由延迟约束检查引发的数据库级约束违规，并且这些只会在*JTA*提交时出现。

帮助？

* * *

**已经尝试过：**

**Bean 托管事务**将通过允许我在我控制的代码中触发提交来解决我的问题。不幸的是，它们不是一个选项，因为 bean 管理的事务不提供任何等价物`TransactionAttributeType.REQUIRES_NEW`- 无法使用 BMT 暂停事务。JTA 令人讨厌的疏忽之一。

看：

*   [为什么我们需要 JTA 2.0](http://blog.bitronix.be/2011/02/why-we-need-jta-2-0/)
*   [J2EE 中的 Bean 管理的事务暂停](http://onjava.com/pub/a/onjava/2005/07/20/transactions.html)（不要这样做！）

...但请参阅注意事项和详细信息的答案。

`javax.validation.ValidationException`是 JDK 异常；我无法修改它以添加**注释`@ApplicationException`以**防止包装。我不能子类化它来添加注释；它是由 EclpiseLink 抛出的，而不是我的代码。我不确定标记它`@ApplicationException`是否会阻止 Arjuna（AS7 的 JTA impl）将它包装在 a 中`RollbackException`。

我尝试使用这样的**EJB3 拦截器**：

```
@AroundInvoke
protected Object exceptionFilter(InvocationContext ctx) throws Exception {
    try {
        return ctx.proceed();
    } catch (ValidationException ex) {
        throw new SomeAppException(ex);
    }
} 
```

...但似乎拦截器在 JTA*内部*触发（这是明智的并且通常是可取的）所以我想要捕获的异常还没有被抛出。

我想我想要的是能够定义一个在JTA 完成它的事情**之后应用的异常过滤器。**有任何想法吗？

* * *

我正在使用 JBoss AS 7.1.1.Final 和 EclipseLink 2.4.0。[EclipseLink 按照这些说明](https://community.jboss.org/wiki/HowToUseEclipseLinkWithAS7)作为 JBoss 模块安装，但这对于手头的问题并不重要。

* * *

**更新：**在对这个问题进行了更多思考之后，我意识到除了 JSR330 验证异常之外，我还真的需要能够 从数据库中捕获[SQLIntegrityConstraintViolationException](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLIntegrityConstraintViolationException.html)[以及分别使用 SQLSTATE 40P01 和 40001 进行死锁或序列化失败回滚](http://www.postgresql.org/docs/9.1/static/errcodes-appendix.html)。这就是为什么试图确保提交永远不会抛出的方法不会很好地工作的原因。已检查的应用程序异常不能通过 JTA 提交抛出，因为 JTA 接口自然不会声明它们，但未经检查的带`@ApplicationException`注释的异常应该可以。

似乎在任何我可以有效地捕获应用程序异常的地方，我也可以 - 尽管不那么漂亮 - 捕获 EJBException 并深入研究 JTA 异常和底层验证或 JDBC 异常，然后基于此做出决策。如果没有 JTA 中的异常过滤器功能，我可能不得不这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T04:26:30.190

`REQUIRES_NEW`我在原始问题中所说的和 BMT 有一个警告。

*请参阅容器职责*中的 EJB 3.1 规范，第*13.6.1 节 Bean-Managed Transaction Demarcation*。上面写着：

 *> 容器必须使用 bean 管理的事务划分来管理对企业 bean 实例的客户端调用，如下所示。当客户端通过企业 bean 的客户端视图之一调用业务方法时，*容器会挂起任何可能与客户端请求相关联的事务*。*如果有一个与该实例关联的事务*（如果有状态会话 bean 实例在某个先前的业务方法中启动该事务，则会发生这种情况），*则容器将方法执行与该事务相关联*。如果有与 bean 实例关联的拦截器方法，则在调用拦截器方法之前执行这些操作。

（斜体我的）。这很重要，因为这意味着 BMT EJB 不会继承具有关联容器管理 tx 的调用者的 JTA tx。任何当前的 tx 都被*挂起*，因此如果 BMT EJB 创建一个 tx，它就是一个*新*事务，并且当它提交时，它只提交它的事务。

这意味着您可以使用 BMT EJB 方法开始并提交事务，就好像它是有效的`REQUIRES_NEW`一样，并执行以下操作：

```
@Stateless
@TransactionManagement(TransactionManagementType.BEAN)
class TheEJB {

    @Inject private EntityManager em;

    @Resource private UserTransaction tx; 

    // Note: Any current container managed tx gets suspended at the entry
    // point to this method; it's effectively `REQUIRES_NEW`.
    // 
    public methodOfInterest() throws AppValidationException, SomeOtherAppException {
       try {
           tx.begin();
           // For demonstration's sake create a situation that'll cause validation to
           // fail at commit-time here, like
           someEntity.getCollectionWithMinSize1().removeAll();
           em.merge(someEntity);
           tx.commit();
       } catch (ValidationException ex) {
           throw new AppValidationException(ex);
       } catch (PersistenceException ex) {
           // Go grubbing in the exception for useful nested exceptions
           if (isConstraintViolation(ex)) {
               throw new AppValidationException(ex);
           } else {
               throw new SomeOtherAppException(ex);
           }
       }
    }

} 
```

这将提交置于我的控制之下。我不需要事务来跨越多个不同 EJB 的多个调用，这允许我在我的代码中处理所有错误，包括提交时的错误。

关于 bean 管理事务的[Java EE 6 教程页面](http://docs.oracle.com/javaee/6/tutorial/doc/bnciy.html)没有提及这一点，也没有提及如何调用 BMT。

我链接到的博客中关于 BMT 无法模拟`REQUIRES_NEW`的讨论是有效的，只是不清楚。如果您有一个 bean 管理的事务性 EJB，那么您不能暂停*您开始*的事务以开始另一个事务。调用单独的帮助程序 EJB 可能会暂停您的 tx 并为您提供等价物，`REQUIRES_NEW`但我还没有测试过。

* * *

问题的另一半——在我需要容器管理事务的情况下，因为我必须跨多个不同的 EJB 和 EJB 方法完成工作——通过防御性编码来解决。

实体管理器的早期急切刷新允许我捕获我的 JSR330 验证规则可以找到的任何验证错误，所以我只需要确保它们是完整和全面的，这样我就不会从数据库中收到任何检查约束或完整性违规错误提交时间。我不能干净地处理它们，所以我需要真正防御性地避开它们。

防御性编码的一部分是：

*   在实体字段上大量使用`javax.validation`注释，并`@AssertTrue`在这还不够的情况下使用验证方法。
*   支持集合的验证约束，我很高兴看到。例如，我有一个`A`包含`B`. `A`必须*至少有一个* `B`，所以我在其中定义`@Size(min=1)`的集合中添加了一个约束。`B``A`
*   自定义 JSR330 验证器。我为澳大利亚商业号码 (ABN) 之类的东西添加了几个自定义验证器，以确保我永远不会尝试将无效的验证器发送到数据库并触发数据库级验证错误。
*   用`EntityManager.flush()`. 这会强制验证在您的代码控制下进行，而不是在 JTA 提交事务时进行。
*   我的 EJB 外观中的特定于实体的防御代码和逻辑，以确保不会出现 JSR330 验证无法检测到的情况并导致提交失败。
*   在可行的情况下，使用`REQUIRES_NEW`方法强制提前提交并允许我处理 EJB 中的故障、适当地重试等。这有时需要帮助 EJB 来解决自调用业务方法的问题。

我仍然不能像直接将 JDBC 与 Swing 一起使用时那样优雅地处理和重试序列化失败或死锁，因此容器的所有这些“帮助”使我在某些方面倒退了几步。不过，它在其他地方节省了*大量*繁琐的代码和逻辑。

在这些错误发生的地方，我添加了一个 UI 框架级别的异常过滤器。它看到`EJBException`包装 JTA`RollbackException`包装`PersistenceException`包装 EclipseLink 特定异常的包装`PSQLException`，检查 SQLState，并根据它做出决定。这是荒谬的迂回，但它有效

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T01:01:27.410

我没试过这个。但我猜这应该可行。

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
class TheEJB {

    @Inject
    private TheEJB self;

    @Inject private EntityManager em;

    public methodOfInterest() throws AppValidationException {
       try {
           self.methodOfInterestImpl();
       } catch (ValidationException ex) {
           throw new AppValidationException(ex);
       }
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public methodOfInterestImpl() throws AppValidationException {
        someEntity.getCollectionWithMinSize1().removeAll();
        em.merge(someEntity);
    }    
} 
```

容器预计将在 中启动新事务并提交**，**因此`methodOfInterest`您应该能够在包装器方法中捕获异常。

Ps：答案是根据@LairdNelson提供的优雅想法更新的...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T04:51:32.110

将[`eclipselink.exception-handler`](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/config/PersistenceUnitProperties.html#EXCEPTION_HANDLER_CLASS)属性设置为指向[`ExceptionHandler`](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/exceptions/ExceptionHandler.html)看起来很有希望的实现，但没有成功。

JavaDoc for `ExceptionHandler`is ... bad ... 所以您需要查看[测试实现](https://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/tags/2.4.0/foundation/eclipselink.core.test/src/org/eclipse/persistence/testing/tests/feature/Handler.java)和使用它的测试（[1](https://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/tags/2.4.0/foundation/eclipselink.core.test/src/org/eclipse/persistence/testing/tests/feature/ExceptionHandlerTest1.java)、[2](https://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/tags/2.4.0/foundation/eclipselink.core.test/src/org/eclipse/persistence/testing/tests/feature/ExceptionHandlerTest2.java)）。[这里](http://wiki.eclipse.org/Introduction_to_EclipseLink_Sessions_%28ELUG%29#Exception_Handlers)有一些更有用的文档。

似乎很难使用异常过滤器来处理一些特定情况，同时不影响其他所有情况。我想捕获`PSQLException`，检查 SQLSTATE 23514（`CHECK`违反约束），为此抛出一个有用的异常，否则不会改变任何东西。这看起来不实用。

最后，我放弃了这个想法，尽可能地使用 bean 管理事务（现在我正确理解了它们的工作原理）和一种防御方法，以防止在使用 JTA 容器管理事务时出现不需要的异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-24T14:25:42.893

> javax.validation.ValidationException 是 JDK 异常；我无法修改它以添加 @ApplicationException 注释以防止包装

除了您的答案：您可以使用 XML 描述符将 3rd 方类注释为 ApplicationException。*

# websphere - 从基本版本升级到 Websphere Network Deployment

> ID：11774725
> 
> 赞同：0
> 
> 时间：2012-08-02T09:34:04.570
> 
> 标签：websphere, upgrade

我有一个 websphere 应用服务器安装，versioninfo.sh 命令显示这个

* * *

## IBM WebSphere Application Server 产品安装状态报告

报告日期和时间为 2012 年 8 月 2 日下午 2:53:08 GMT+07:00

## 安装

产品目录 /opt/IBM/WebSphere/AppServer 版本目录 /opt/IBM/WebSphere/AppServer/properties/version DTD 目录 /opt/IBM/WebSphere/AppServer/properties/version/dtd 日志目录 /opt/IBM/WebSphere/AppServer /logs 备份目录 /opt/IBM/WebSphere/AppServer/properties/version/nif/backup TMP 目录 /tmp

## 产品列表

底座安装

## 已安装产品

名称 IBM WebSphere Application Server 版本 7.0.0.17 ID BASE Build Level cf171115.15 Build Date 4/16/11 Architecture AMD（64 位）

* * *

## 结束安装状态报告

我可以将此安装直接升级到 Websphere Network Deployment 版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T23:57:26.367

你当然可以这样做。这涉及安装和创建部署管理器的配置文件并将此服务器联合到该 Dmgr 的单元。

# jquery - 在jQuery中获取具有相同src和rel的img标签

> ID：11774730
> 
> 赞同：0
> 
> 时间：2012-08-02T09:34:17.000
> 
> 标签：jquery, jquery-selectors

如何获取`<img>`在其`src`和`rel`属性中具有相同值的所有标签？

我试过类似的东西：

```
jQuery('img[rel=src]') 
```

但它似乎没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:36:12.413

你必须使用[`.filter` *^([docs])*](http://api.jquery.com/filter/)：

```
$('img').filter(function() {
    return this.src === $(this).attr('rel');
}); 
```

请注意，这`rel`不是`img`元素的有效属性。因此，您可能希望使用[`data-*`属性](http://ejohn.org/blog/html-5-data-attributes/)来存储附加信息。

**附加说明**：即使属性包含相对 URL ，`this.src`也会返回*绝对URL。*`src`如果要获取属性的实际值，则必须使用`$(this).attr('src')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:44:24.767

这是一种方法：

```
<img src="../images/images/map_ico.png" rel="../images/images/map_ico.png" alt="logo" />   
<img src="../images/images/map_ico.png" alt="logo" />
<img src="../images/images/map_ico.png" rel="../images/images/map_ico.png" alt="logo" /> 
```

```
var imgs=[];
$('img').each(function(){
    if($(this).attr('src')==$(this).attr('rel')){
        imgs.push($(this))
    }
})
//would return 2
alert(imgs.length); 
```

imgs 数组现在将保存所有具有相同 src 和 alt 属性的图像标签。

# html - css 类说明符之前或之后，没有一致？

> ID：11774731
> 
> 赞同：0
> 
> 时间：2012-08-02T09:34:25.393
> 
> 标签：html, css, class

我不明白是否应该在它修改的标签之前或之后指定类。

我的样式表中的以下内容适当地修改了 div：

```
div.idea {
  margin: 0.1cm;
  } 
```

以下没有：

```
.idea div {
      margin: 0.1cm;
} 
```

但是，以下内容不会*修改*我的锚点：

```
a.idea {
      color: Orange;
} 
```

以下是：

```
.idea a {
      color: Orange;
} 
```

解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:40:34.363

`div.idea`意味着`div`一个类`idea`

`.idea div`表示`div`在具有类的元素内`idea`

他们针对不同的元素。如果没有看到您的 HTML，就无法解释为什么您会看到您认为不寻常的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:39:07.030

一个空间非常重要。一个空格的意思是“孩子”的。没有空格意味着“和”。

所以：

`div.idea`: 一个带有类的 div`idea`

```
<DIV class="idea"></DIV> 
```

`div .idea`：具有“idea”类的子级，其父级是 div（在其上方的任何位置）

```
<DIV>
  <DIV class="idea"></DIV>
</DIV> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T09:38:57.110

CSS 选择器：

```
div.idea { ...  // a div that has a class="idea"
.idea div { ... // any div, that has a parent (or ancestor) that has a class="idea"
a.idea { ...    // an <a> element which has a class="idea" ( <a class="idea">text</a> )
.idea a { ..    // an <a> element which has a parent (or ancestor) of any element type (not only div) which has a class="idea" 
```

参考[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)，尤其是[类选择器](http://www.w3.org/TR/CSS2/selector.html#class-html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T09:39:12.703

在使用类选择器之前你*不需要指定任何元素——它只是增加了一层特殊性。*

你的第一个例子：

```
div.idea {
  margin: 0.1cm;
} 
```

这首先选择所有 div 元素，然后将它们限制为具有 class 的元素`idea`。

你的第二个例子：

```
.idea div {
      margin: 0.1cm;
} 
```

选择所有具有 class 的元素`idea`，然后选择这些元素的所有子元素。

这两个表达式等同于不同的事物：

`div.idea`选择具有类想法的 div
`.idea div`选择作为 div 的元素的子`idea`元素

实际上，空间使您选择孩子

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T09:39:25.047

你的 CSS 选择器假设如下

> div.idea {边距：0.1cm;}

```
<div class="idea" id="iGetStyled">... 
```

> .idea div {边距：0.1cm;}

```
<div class="idea"><div id="iGetStyled">... 
```

> a.idea {颜色：橙色；}

```
<a class="idea" id="iGetStyled">... 
```

> .idea {颜色：橙色;}

```
<div class="idea"><a id="iGetStyled">... 
```

`id="iGetStyled"`向您显示哪些项目将被样式化

# android - 从 AppWidgetProvider 启动文本到语音

> ID：11774732
> 
> 赞同：0
> 
> 时间：2012-08-02T09:34:26.000
> 
> 标签：android, android-widget, text-to-speech

简而言之，我想创建一个 android 小部件，在单击它时读出存储在小部件中的地址。

在查看了我在下面发布的这个将语音转换为文本的[链接](https://stackoverflow.com/questions/4530472/widget-that-calls-speech-recognition-app)的答案之后，我想知道是否可以以类似的方式将文本转换为语音。

```
// this intent points to activity that should handle results
Intent activityIntent = new Intent(context, ResultsActivity.class);
// this intent wraps results activity intent
PendingIntent resultsPendingIntent = PendingIntent.getActivity(context, 0, activityIntent, 0);

// this intent calls the speech recognition
Intent voiceIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
voiceIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
voiceIntent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech recognition demo");
voiceIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
voiceIntent.putExtra(RecognizerIntent.EXTRA_RESULTS_PENDINGINTENT, resultsPendingIntent);

// this intent wraps voice recognition intent
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, voiceIntent, 0);
rv.setOnClickPendingIntent(R.id.btn, pendingIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:46:56.413

文本到语音和语音识别以不同的方式工作。语音识别是一个单独的 Activity（因此必须通过 Intent 使用），但无需离开您的 Activity 即可完成文本到语音的转换。

所以你可以用同样的方式做文本到语音，通过创建一个你自己的活动，它只用于朗读文本，然后使用你发布的代码的修改版本来访问它，但我不确定你我想。你有什么理由想去另一个活动做 TTS 吗？留在同一个活动中更简单。

# c# - 从 createuserwizard 获取用户名以添加到角色

> ID：11774736
> 
> 赞同：0
> 
> 时间：2012-08-02T09:34:39.260
> 
> 标签：c#, asp.net-membership, createuserwizard

我正在尝试为标准的 ASP.NET 会员系统构建一些简单的用户控件。我有一个 CreateUserWizard 控件，在提交时需要将用户添加到特定角色。

ascx 文件如下所示：

```
<asp:CreateUserWizard ID="CreateUserWizard2" runat="server" oncreateduser="CreateUserWizard2_CreatedUser">
<WizardSteps>
    <asp:CreateUserWizardStep ID="CreateUserWizard2Step1" runat="server">
        <ContentTemplate>
            <div class="form-error">
                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
            </div>
            <fieldset class="member-control">
                <legend>Registration details</legend>
                <div class="standard">
                    <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Username&#42;:</asp:Label>
                    <asp:TextBox ID="UserName" runat="server" CssClass="text-input"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" ErrorMessage="Username is required." ToolTip="Username is required." ValidationGroup="CreateUserWizard1">Username is required.</asp:RequiredFieldValidator>
                </div> ...etc 
```

C# 代码隐藏如下所示：

```
namespace DocumentMembership
{
public partial class ClientRegister : System.Web.UI.UserControl
{
    protected void CreateUserWizard2_CreatedUser(object sender, EventArgs e)
    {
        // add member to role
        Roles.AddUserToRole(this.CreateUserWizard2.UserName, "Client"); 
```

但是，我收到一个构建错误消息：

```
'DocumentMembership.ClientRegister' does not contain a definition for 'CreateUserWizard2' and no extension method 'CreateUserWizard2' accepting a first argument of type 'DocumentMembership.ClientRegister' could be found (are you missing a using directive or an assembly reference?) 
```

当我开始输入 Roles.AddUserToRole(this.intellisense 似乎没有提供任何有用的信息来从表单中获取用户名。

我在.NET 方面真的不是很熟练，所以很明显我做错了，但我似乎无法找到解决办法。

任何人都可以建议如何让这个工作或可能是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:38:07.653

您可以尝试使用此代码

```
CreateUserWizard2.CreateUserStep.ContentTemplateContainer.FindControl("UserName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T00:18:12.900

如果是关于角色分配试试这个：

```
Roles.AddUserToRole((sender as CreateUserWizard).UserName, "LC"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:12:11.163

知道了。这确实是一件愚蠢的事情。ascx 文件继承自错误的代码隐藏，因此它无法识别任何从表单中检索用户名的方法。

# javascript - Backbone - 为什么 collection.reset 不触发模型事件？

> ID：11774738
> 
> 赞同：8
> 
> 时间：2012-08-02T09:34:44.160
> 
> 标签：javascript, model-view-controller, backbone.js, backbone-events

我很想知道为什么重置骨干集合不会触发模型事件。但是，当模型从集合中被物理删除时，触发模型事件似乎是合乎逻辑的。

这是故意的还是我错过了什么？如果骨干不做这种事情，那么委派这样的事件是一个好习惯。

为什么当其集合重置时主干不会触发模型事件？

```
var TicketModel = Backbone.Model.extend({
    defaults: {
        name: 'crafty',
        email: 'dwq@dwqcqw.com'
    },
    initialize: function(){
        this.on("all", function(event){
            console.log(event)
        });
    }

});

var TicketCollection = Backbone.Collection.extend({
    model: TicketModel,

    });

var tickets = new TicketCollection([
    {
        name: 'halldwq'
    },
    {
        name: 'dascwq'
    },
    {
        name: 'dsacwqe'
    }

]);

tickets.reset(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T09:59:35.610

这是主干重置功能：

```
reset: function(models, options) {
  models  || (models = []);
  options || (options = {});
  for (var i = 0, l = this.models.length; i < l; i++) {
    this._removeReference(this.models[i]);
  }
  this._reset();
  this.add(models, _.extend({silent: true}, options));
  if (!options.silent) this.trigger('reset', this, options);
  return this;
}, 
```

我们可以忽略最后 3 行，因为您没有为 reset-function 提供任何模型。也让我们忽略前两行。所以首先我们遍历这个集合中的模型并调用集合的`_removeReference(model)`方法，它看起来像这样：

```
_removeReference: function(model) {
  if (this == model.collection) {
    delete model.collection;
  }
  model.off('all', this._onModelEvent, this);
}, 
```

这里发生的情况是，我们从模型对象中完全删除了集合属性，并且还删除了与该模型事件的绑定。接下来我们调用集合的`_reset()`-function，如下所示：

```
_reset: function(options) {
  this.length = 0;
  this.models = [];
  this._byId  = {};
  this._byCid = {};
}, 
```

它只是彻底删除了对该系列曾经拥有的任何模型的任何引用。

我们能从中得到什么？好吧，Backbone 中的 collection`reset`功能基本上只是绕过了所有删除模型的官方渠道，并且完全保密，除了`reset`被解雇之外没有其他事件。所以你想`remove`在重置期间为从集合中删除的每个模型触发模型事件？简单的！只需像这样覆盖 Backbone.Collection 的重置功能：

```
var Collection = Backbone.Collection.extend({
  reset: function(models, options) {
    models  || (models = []);
    options || (options = {});

    for (var i = 0, l = this.models.length; i < l; i++) {
      this._removeReference(this.models[i]);
      // trigger the remove event for the model manually
      this.models[i].trigger('remove', this.models[i], this);
    }

    this._reset();
    this.add(models, _.extend({silent: true}, options));
    if (!options.silent) this.trigger('reset', this, options);
    return this;
  }
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-08T17:19:28.137

更新到另一个版本时，覆盖 Backbone 方法可能会导致痛苦。

Backbone 将重置前的模型数组存储在 options.previousModels 中，因此只需监听重置事件并在这些先前的模型上触发“删除”事件：

```
collection.on('reset', function(col, opts){
   _.each(opts.previousModels, function(model){
        model.trigger('remove');
    });
}); 
```

这样就行了。

# asp.net-mvc-3 - 根据 MVC3 中的下拉选择加载部分视图

> ID：11774741
> 
> 赞同：16
> 
> 时间：2012-08-02T09:34:56.313
> 
> 标签：asp.net-mvc-3, razor, asp.net-ajax

我正在尝试使用 asp.net mvc3 创建一个。

我有一个带有一些选项的下拉列表。我想要的是注入页面的不同部分视图，具体取决于下拉列表中的选择。

但。我不希望这依赖于提交操作。它应该起作用，以便在您从选择列表中选择后立即加载局部视图。

我有这个代码：

```
@using (Ajax.BeginForm("Create_AddEntity", new AjaxOptions { 
    UpdateTargetId = "entity_attributes", 
    InsertionMode = InsertionMode.Replace
    }
))
{
        <div class="editor-label">
            @Html.Label("Type")
        </div>
        <div class="editor-field">
            @Html.DropDownList("EntityTypeList", (SelectList)ViewData["Types"])
        </div>

        <div id="entity_attributes"></div>
        <p>
            <input type="submit" value="Create" />
        </p>
} 
```

但是我不知道当下拉列表选择发生变化时如何触发这个部分视图加载。

这一点是不同“实体类型”的形式不同。因此将加载不同的局部视图，具体取决于下拉选择。

有人有任何指示吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-02T09:45:51.433

假设以下是您要插入部分视图的视图。

```
<html>
    <head><head>
    <body>
        <!-- Some stuff here. Dropdown and so on-->
        ....

        <!-- Place where you will insert your partial -->
        <div id="partialPlaceHolder" style="display:none;"> </div>
    </body>

</html> 
```

在下拉列表的更改事件中，通过 jquery ajax 调用获取部分内容并将其加载到占位符。

```
/* This is change event for your dropdownlist */
$('#myDropDown').change( function() {

     /* Get the selected value of dropdownlist */
     var selectedID = $(this).val();

     /* Request the partial view with .get request. */
     $.get('/Controller/MyAction/' + selectedID , function(data) {

         /* data is the pure html returned from action method, load it to your page */
         $('#partialPlaceHolder').html(data);
         /* little fade in effect */
         $('#partialPlaceHolder').fadeIn('fast');
     });

}); 
```

在 jquery 上方 /Controller/MyActionin 的控制器操作中，返回您的部分视图。

```
//
// GET: /Controller/MyAction/{id}

public ActionResult MyAction(int id)
{
   var partialViewModel = new PartialViewModel();
   // TODO: Populate the model (viewmodel) here using the id

   return PartialView("_MyPartial", partialViewModel );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T18:11:26.650

将以下代码添加到项目（布局）的标题中。将“组合框”添加到要触发围绕它的表单的任何组合框（选择框）。

```
$(document).ready(function () {
    $('.formcombo').change(function () {
        /* submit the parent form */
        $(this).parents("form").submit();
    });
}); 
```

# android - 如何在 Android 上正确关闭 HttpURLConnection

> ID：11774744
> 
> 赞同：3
> 
> 时间：2012-08-02T09:35:04.317
> 
> 标签：android

我正在使用 HttpURLConnection 来查询后端服务器。请求是 POST。我的代码如下所示：

```
InputStream is = null;
HttpURLConnection connection = null;
try {
    connection = (HttpURLConnection)new URL(uri).openConnection();
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded; charset=" + ENCODING);
    connection.setDoOutput(true);
    byte[] content = buildFormUrlEncoded(params);
    connection.setRequestProperty("Content-Length", String.valueOf(content.length));

    connection.connect();

    OutputStream os = null;
    try {
        os = connection.getOutputStream();
        os.write(content);
    } finally {
        if (os != null) { os.close(); }
    }

    is = connection.getInputStream();
    handle(is);
} finally {
    if (is != null) { is.close(); }
    if (connection != null) { connection.disconnect(); }
} 
```

但是我收到了这个 StrictMode 错误：

```
A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
java.lang.Throwable: Explicit termination method 'close' not called
    at dalvik.system.CloseGuard.open(CloseGuard.java:184)
    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:300)
    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)
    at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
    at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164) 
```

当我调试代码时，`os.close()`,`is.close()`和`connection.disconnect()`被调用。

StrictMode 会因为连接在池中保持活动而发生吗？

**编辑**

*   如果`connection.setRequestProperty("connection", "close");`添加 StrictMode 错误消失。
*   如果使用 http URL 而不是 https URL，则 StrictMode 错误消失。
*   如果`BufferedReader`使用 StrictMode 错误发生的频率较低。

为了安全起见，我想保留 https 并保持活动状态以减少握手开销。

**编辑 2**

看起来这只发生在 android 3.X 和 4.0.X 的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:50:35.737

我的代码如下所示：

```
@Override
    protected Boolean doInBackground(Void... params) {
        JSONObject holder = new JSONObject();
        try {
            Resources res = getResources();

            holder.put(res.getString(R.string.str),"");

            URL url = new URL(res.getString(R.string.url));
            String charset = res.getString(R.string.utf);
            HttpURLConnection http = null;

                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();

                http = https;
                http.setRequestMethod(res.getString(R.string.post));
                http.setDoInput(true);
                http.setDoOutput(true);
                http.setRequestProperty(res.getString(R.string.charset), charset);
                http.setRequestProperty(res.getString(R.string.content_type), "application/x-www-form-urlencoded;charset=" + charset);

                String query = String.format("query1=%s&query2=%s&query3=%s&query4=%s", 
                     URLEncoder.encode(res.getString(R.string.qu1), charset), 
                     URLEncoder.encode(res.getString(R.string.qu2), charset),
                     URLEncoder.encode(res.getString(R.string.qu3), charset),
                     URLEncoder.encode(holder.toString(), charset));

                OutputStream output = null;
                try {
                     output = http.getOutputStream();
                     output.write(query.getBytes(charset));
                } finally {
                     if (output != null) try { output.close(); } catch (IOException logOrIgnore) {}
                }
                //InputStream response = http.getInputStream();

                BufferedReader in = new BufferedReader(new InputStreamReader(http.getInputStream()),4800); 
                StringBuffer responseBuffer = new StringBuffer();
                String line;

                while ((line = in.readLine()) != null) { 
                    responseBuffer.append(line);
                }

                in.close();
                answer = new Gson().fromJson(responseBuffer.toString(), Answer.class);
                //s = responseBuffer.toString();
        } catch (Exception e) {
            e.printStackTrace();
            getData();
        }
        return true;
    } 
```

相信你会在那里找到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:47:26.093

尝试以下，

关闭流和连接后，然后为空。

```
is=null;os=null;connection=null; 
```

# javascript - Vim Javascript自动完成+建议？

> ID：11774750
> 
> 赞同：6
> 
> 时间：2012-08-02T09:35:18.513
> 
> 标签：javascript, vim, jsctags

我正在 OpenLayers.js 之上进行开发。我的项目文件夹结构如下：

```
project /
    |-- OpenLayers.js
    |-- map.html
    |-- map.js
    \-- etc 
```

正如你所言，当我开始一个新的地图项目时，我会听取 Vim 关于如何完成代码的建议，从项目文件夹中的所有库中读取 JS 类（在这种情况下，只是`OpenLayers.js`）。

例如：

```
map = new OpenLayers. --> <C-x><C-o>
map = new OpenLayers.Bounds
                    .Control
                    .Map 
```

选择一个建议的类，我应该会得到一种自动完成功能，就像在 Aptana 中一样。我已经安装了**AutoComplPop**，我得到了一个不错的自动菜单来选择建议，但所有这些都取自当前的 JS 文件。

无论如何，我已经正确设置了**Tagbar** + **node.js** + **jsctags**并且我已经`tags`为我的项目生成了文件，并添加`set tags=./tags,./../tags,./*/tags`到我的`.vimrc`.

在这种情况下，Tagbar 也会映射当前文件的 JS 结构，但不提供来自其他文件的类的任何映射。

我的另一个可能相关的行`.vimrc`：

```
autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS 
```

我正在努力获得类和子类的建议，现在我对所有可用的插件/软件有点困惑。

有什么提示吗？谢谢你们 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-01T20:28:42.603

查看[YouCompleteMe](https://github.com/Valloric/YouCompleteMe)和[tern_for_vim](https://github.com/marijnh/tern_for_vim)。

这是[一篇](http://tilvim.com/2013/08/21/js-autocomplete.html)关于一起使用它们的文章。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-02T11:50:59.177

你的期望有点太高了。Vim 不像 Aptana 那样是 IDE，用于提供补全的机制很粗糙。

你检查你的`tags`文件有`OpenLayers.Bounds`，`OpenLayers.Control`还是`OpenLayer.Map`？我找不到`OpenLayer.Map`，并且通过`OpenLayer.debug.js`我也找不到此功能。

TagBar 仅适用于当前缓冲区。如果要显示其他窗口/缓冲区的标签，则需要另一个较旧的插件：TagList。

AutoComplPop 不支持开箱即用的 JS。你是怎么设置的？[这是我的做法](https://stackoverflow.com/a/4779916/546861)，但它仍然在使用`<C-x><C-o>`完成时`tags`使用`<C-x><C-]>`.

# python - Python列表与出现次数的差异

> ID：11774751
> 
> 赞同：3
> 
> 时间：2012-08-02T09:35:22.837
> 
> 标签：python, list, comparison

是否有使用 python 内置的列表减法/列表差异函数？我知道如何编写这样的函数，所以无需解释。但是由于这是一种常见的事情，我想知道是否已经内置了这样的功能。

我有两个排序列表，每个可能包含相同元素的多个副本。

我想知道列表之间有什么区别，考虑到出现的次数（设置差异是不够的）

例如：

```
l1 = [1,1,2,3,5,6]
l2 = [1,2,8,9]

diff (l1, l2) 
[1,3,5,6]

diff (l2,l1)
[8,9] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T09:39:28.667

也许你可以只使用[Counter](http://docs.python.org/library/collections.html#counter-objects)类。

* * *

**例子：**

```
l1 = [1,1,2,3,5,6]
l2 = [1,2,8,9]
from collections import Counter

print Counter(l1) - Counter(l2)
print Counter(l2) - Counter(l1) 
```

**结果：**

> 计数器({1:1, 3:1, 5:1, 6:1})
> 计数器({8:1, 9:1})

* * *

**编辑：**

要从`Counter`对象中获取列表，您可以使用以下代码：

```
from itertools import chain
r = Counter(l2) - Counter(l1)
list(chain(*[p*[k] for k,p in r.items()])) 
```

我只是从类字典中创建一个列表列表`Counter`，然后使用`list(chain(* ... ))`将其展平为一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:52:12.210

我认为解决方案`BigYellowCactus`是完美的。我只是想添加一个如何扩展`Counter`为列表的方法：

```
>>> from itertools import chain
>>> from collections import Counter
>>> a=[1,1,1,1,1,2,3,4,2,2]
>>> b=[1,1,1,2,3]
>>> list(chain(*[[k]*v for (k,v) in (Counter(a)-Counter(b)).items()]))
[1, 1, 2, 2, 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:43:05.953

使用集

```
l1 = [1,1,2,3,5,6]
l2 = [1,2,8,9]

def  diff (list1, list2) :
    return list(set(list1).difference(set(list2)))

print diff(l1,l2)

>>> 
[3, 5, 6] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T09:41:33.127

我目前正在使用这个：

```
def listdiff (l1, l2):
    for x in l1:
        if x in l2:
            l1.remove(x)
            l2.remove(x)
    return l1 
```

# java - 如何创建具有多态委托的动态代理？

> ID：11774756
> 
> 赞同：4
> 
> 时间：2012-08-02T09:35:33.413
> 
> 标签：java, proxy-classes

我想创建一个动态代理，它可以将其方法委托给不同的实现（每个方法调用选择一个可能不同的对象）。而且我想实现多态的效果，比如当某个代理方法调用另一个代理方法时，对象选择机制确实再次适用。

好的，足够的混乱，这是一个例子：

```
interface IService {
  void a();
  void b();
}

class HappyService implements IService {
  public void a() {
    System.out.println("Happy a");
    b();
  }

  public void b() {
    System.out.println("Happy b");
  }
}

class SadService implements IService {
  public void a() {
    System.out.println("Sad a");
    b();
  }

  public void b() {
    System.out.println("Sad b");
  }
} 
```

现在，我想创建一个代理，`IService`它总是选择`HappyService`方法调用和`a()`方法`SadService`调用`b()`。这是我首先想到的：

```
InvocationHandler h = new InvocationHandler() {
  @Override
  public Object invoke( final Object proxy, final Method method, final Object[] args ) throws Throwable {
    Object impl;
    if (method.getName().equals("a")) {
      impl = new HappyService();
    } else if (method.getName().equals("b")) {
      impl = new SadService();
    } else {
      throw new IllegalArgumentException("Unsupported method: " + method.getName());
    }
    return method.invoke(impl, args);
  }
};
IService service = (IService)Proxy.newProxyInstance( IService.class.getClassLoader(), new Class[]{ IService.class }, h );
service.a(); 
```

这打印：

```
Happy a
Happy b 
```

是的，那是因为调用`b()`inside of`a()`对动态代理一无所知。

那么，我怎样才能最好地实现我的目标呢？我想要的输出是：

```
Happy a
Sad b 
```

我可能会用`new HappyService()`另一个代理替换调用处理程序内部的我，它只将方法传递`a()`给`HappyService`，并将所有其他方法重定向回原始代理。但也许有更好/更简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:01:37.763

当调用者引用代理而不是“真实”实现时，代理只能用于拦截对象间调用。在这里，你的`a()`call实现都是`b()`直接的，所以他们当然会调用它 on `this`。你想做的事情不能通过代理来实现。

但是，您可以使用 AOP 来实现，例如使用[AspectJ](http://www.eclipse.org/aspectj/docs.php)和[编译时编织](http://www.eclipse.org/aspectj/doc/released/devguide/ajc-ref.html)（也可用于 aspectj-maven-plugin）或[加载时编织](http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html)。[粗略地说，您在实现中](http://www.eclipse.org/aspectj/doc/released/progguide/starting-aspectj.html)的和方法的[调用站点](http://www.eclipse.org/aspectj/doc/released/progguide/language-joinPoints.html#call-vs-execution)上创建一个切入点，并建议执行，这可能是将原始调用替换为另一个。未经测试的代码，但它看起来像这样：`a()``b()``IService`

```
public aspect IServiceAspect {
    private IService happy = new HappyService(); // Assuming these are stateless services
    private IService sad = new SadService();     // that can be shared.

    // The pointcut is inside an IService implementation, and is a call to the a() method
    pointcut aCall(): within(IService+) && call(* IService.a());

    pointcut bCall(): within(IService+) && call(* IService.b());

    around(): aCall() && !within(HappyService) { // To avoid infinite recursion
        return happy.a();
    }

    around(): bCall() && !within(SadService) {
        return sad.b();
    }
} 
```

然后，您可以直接提供一个`HappyService`或`SadService`实现作为一个`IService`，两者都已修改。您还可以创建与 的所有方法匹配的单个切入点`IService`，并根据方法名称（`thisJoinPoint`在建议中使用）动态地进行路由，就像在您的示例中一样。

方面也可以使用[注释](http://www.eclipse.org/aspectj/doc/released/adk15notebook/annotations.html)来声明。

# c++ - 包含指向对象的指针的多重集的自定义比较器

> ID：11774761
> 
> 赞同：2
> 
> 时间：2012-08-02T09:35:50.443
> 
> 标签：c++, operator-overloading

抱歉标题不清楚，实际上我想不出一个简洁地描述我的问题的标题。

但这个问题说起来很简单。我有一个节点类。我想通过它的 id_ 字段来维护它的对象之间的顺序。我知道如果我在 Node 类中重载 < 运算符或在 multiset 中提供 Comparator 对象，则制作 multiset<Node> 将正确维护容器中的顺序。但我想声明一个 multiset<Node*> 容器并希望实现相同的行为。

这是我的节点类定义：

```
class Node {
        int id_;
        ...
        public:
        Node() {
                ...
        }
        int getId() {
                return id_;
        }
        void setId(int id) {
                id_ = id;
        }
        ...
        bool operator<(const Node &input) {
                return (this->id_ < input.id_);
        }
}; 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:42:09.637

我认为你的意思和你需要的是：

```
template <typename T, typename Pred = std::less<T>>
struct ptr_compare : Pred
{
    ptr_compare(Pred const & p = Pred()) : Pred(p) { }

    bool operator()(T const * p1, T const * p2) const
    {
        return Pred::operator()(*p1, *p2);
    }
};

typedef std::multiset<Node*, ptr_compare<Node>> node_ptr_set; 
```

您可以将`ptr_compare`模板用于需要二元谓词并且希望间接应用谓词的任何容器。

# wpf - 工具提示中的图像未输入转换器

> ID：11774766
> 
> 赞同：0
> 
> 时间：2012-08-02T09:36:31.617
> 
> 标签：wpf, image, xaml, tooltip, dimensions

我有一个`DataTemplate`用于 a 中项目的 a `ListBox`（一个网格，第一列显示一个图标，具体取决于文件扩展名，第二列包含文件名）：

```
<DataTemplate x:Key="ListItemTemplate">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="16"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>
    <Image Source="{Binding Icon}" Grid.Column="0" Grid.Row="0" Width="16" Height="16">
        <Image.ToolTip>
            <ToolTip Width="{Binding Path=ActualWidth, ElementName=ToolTipImage, Converter={StaticResource toolTipImageConverter}}" Height="{Binding Path=ActualHeight, ElementName=ToolTipImage, Converter={StaticResource toolTipImageConverter}}">
                <Image Source="{Binding FileNameForThumbnailDisplay}" Name="ToolTipImage">
                    <Image.RenderTransform >
                        <TransformGroup>
                            <ScaleTransform ScaleX="0.5" ScaleY="0.5"></ScaleTransform>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>
            </ToolTip>
        </Image.ToolTip>
    </Image>
    <Label Content="{Binding FileNameWithExtension, Mode=OneWay}" Grid.Column="1" Grid.Row="0" BorderBrush="Transparent" Height="Auto"></Label>
</Grid> 
```

将鼠标悬停在第一列中的图标上时，我想显示一个`ToolTip`包含按比例缩小的图标。`Image`这是可行的，但我想实现的是`ToolTip`根据缩小图像的尺寸减少图像的显示，例如：

列表框中的图像 abc：

```
+--ToolTip-------+
|+-Scaled-Image-+|
||              ||
||              ||
|+--------------+|
+----------------+ 
```

列表框中的图像 xyz：

```
+--ToolTip-----------------+
|+-Scaled-Image-----------+|
||                        ||
||                        ||
|+------------------------+|
+--------------------------+ 
```

我写了一个`Converter`返回`ActualWidth`（渲染`Image`元素的）来设置尺寸，但从未输入转换器。

我需要我可以提供用于 的代码`Converter`，但是，我不认为它是相关的，因为它没有被输入（调试时的断点永远不会命中）。

如何实现`ToolTip`控件的尺寸动态调整到内部的图像？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:54:06.117

只需更改`RenderTranform`为`LayoutTransform`并且不绑定`Width`or `Height`。工具提示窗口将自动适应大小。

```
<Image.ToolTip>
    <ToolTip>  
        <Image Source="{Binding FileNameForThumbnailDisplay}" Margin="4">
            <Image.LayoutTransform> 
                <ScaleTransform ScaleX="0.5" ScaleY="0.5"/> 
            </Image.LayoutTransform> 
        </Image>
    </ToolTip>
</Image.ToolTip> 
```

# c - 如何在c中声明字符串数组

> ID：11774769
> 
> 赞同：7
> 
> 时间：2012-08-02T09:36:41.103
> 
> 标签：c, arrays, string

```
#include<stdio.h>

int main()
{
int i;
string A[]={"Ahmet", "Mehmet", "Bulent", "Fuat"};

for(i=0;i<=3;i++){
printf("%s",A[i]);
}
return 0;
} 
```

我怎样才能看到我的数组元素作为输出？

编译器说“'string' undeclared”。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-02T09:37:11.130

这边走：

```
 char *A[] = {"Ahmet", "Mehmet", "Bülent", "Fuat"}; 
```

`A`是指向 的指针数组`char`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-14T04:20:19.383

```
const char *A[] = {"Ahmet", "Mehmet", "Bülent", "Fuat"}; 
```

如果你不包含`const`，它会起作用，但编译器会给你恼人的警告，除非你用“-w”禁止它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:50:19.450

在 C 中，字符串只能表示为字符数组。因此，要表示字符串数组，您必须制作数组（字符数组）。在 C++ 中，我们有一个名为 string 的 STL，您可以创建一个字符串数组并以您编写的方式使用它（当然，在您的代码中修改 C 特定的东西）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-04T22:41:25.750

您可以使用 [cs50](https://github.com/cs50/libcs50)库来处理字符串，也可以使用指针。

**CS50**

```
string names[] = {"Mohammed", "Mhammed", "Ali", "Lora"}; 
```

**指针**

```
char *names[] = {"Mohammed", "Mhammed", "Ali", "Lora"}; 
```

# android - InputDispatcher：由于输入调度被禁用而丢弃的事件

> ID：11774771
> 
> 赞同：3
> 
> 时间：2012-08-02T09:36:52.680
> 
> 标签：android, ui-automation, dispatch

我正在为android开发ui自动化平台。

出于某种原因，有时（非常罕见的）点击事件可能会被丢弃

当它发生时，我在日志中看到

```
I/InputDispatcher( 2707): Dropped event because input dispatch is disabled. 
```

请告知可以做些什么来启用输入调度。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:17:09.820

在某些情况下 Input Dispatcher 会丢弃输入事件：

1.  DROP_REASON_BLOCKED ：如果当前应用程序没有响应并且用户正在点击设备，则输入事件将被丢弃
2.  DROP_REASON_STALE：丢弃事件，因为它是陈旧的
3.  DROP_REASON_APP_SWITCH：由于未决的过期应用切换而丢弃的事件
4.  DROP_REASON_DISABLED：由于输入调度被禁用而丢弃的事件

等等

在您的情况下，它的执行情况 4。意味着有些事情变得可疑或您的第一个输入尚未执行。因此输入调度程序被禁用。

检查[中间件类InputDispatcher.cpp的方法[dropInboundEventLocked](http://source-android.frandroid.com/frameworks/base/services/input/InputDispatcher.cpp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:06:17.653

仅在屏幕关闭时发生。单击事件正在打开屏幕，但它比打开屏幕更快。

现在，我正在检查屏幕是否关闭并将其打开

```
//Acquire wake lock in case screen is off
if (PermissionsUtil.checkSelfPermission(getContext(), Manifest.permission.WAKE_LOCK))
{
    PowerManager pm = (PowerManager)getContext().getSystemService(Context.POWER_SERVICE);
    if (pm.isScreenOn() == false)
    {
        wakeLock = pm.newWakeLock((PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), TAG);
        // 
        wakeLock.acquire();
        Log.d(TAG,"Acquiring wake lock");
     }
}

//Do my stuff

//Release wake lock in case it was acquire
if (wakeLock != null && wakeLock.isHeld())
{
    wakeLock.release();
    wakeLock = null;
    Log.d(TAG,"Releasing wake lock");
} 
```

# sdl - 在 Vala 中使用 SDLImage 加载 PNG

> ID：11774775
> 
> 赞同：0
> 
> 时间：2012-08-02T09:37:02.510
> 
> 标签：sdl, vala, sdl-image

```
RWops enemy_rwops = new RWops.from_file("img/enemy.png", "rb");
enemy = SDLImage.load_png(enemy_rwops); 
```

我有那个代码来加载一个.png（敌人是一个 SDL_Surface）。但是，我收到此错误：

```
/tmp/ccGDtjkw.o: In function `':
main.vala.c:(.text+0x59): undefined reference to `IMG_LoadPNG_RW'
collect2: error: ld returned 1 exit status
error: cc exited with status 256
Compilation failed: 1 error(s), 0 warning(s) 
```

这两行在我的构造函数中，我确实是“使用 SDLImage”并将其添加到“--pkg”编译行中：

```
valac --pkg sdl --pkg sdl-gfx --pkg sdl-image -X -lSDL_gfx -o mission- main.vala 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:28:30.663

```
valac --pkg sdl --pkg sdl-gfx --pkg sdl-image -X -lSDL_gfx -X -lSDL_image  --Xcc=-I/usr/include/SDL -o game main.vala 
```

明白了，只需使用该编译行。

# grails - Grails 在 jar 中找不到类

> ID：11774780
> 
> 赞同：1
> 
> 时间：2012-08-02T09:37:14.273
> 
> 标签：grails, jar

我在 Grails 中有一个应用程序，它使用 .java 来管理 paypal MassPay 功能。像许多 .java 一样，它需要一些包含 jar 使用的类的 jar。好的，我导入了 jars 并且 .java 中的错误消失了。但是现在，当我尝试运行该应用程序时，我收到了 25 条这样的消息：

```
myapproute/grails-app/controllers/com/mycompany/widget/MassPay.java:3: package com.paypal.sdk.profiles does not exist
import com.paypal.sdk.profiles.APIProfile; 
```

MassPay.java 中的该文件不会引发任何错误，因为我导入了包含该类的 jar。但它不允许我运行该项目。

有什么帮助吗？谢谢。

我使用的是 Eclipse，而不是 NetBeans（我读过 Netbeans 中有一个错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T10:01:36.163

将 JAR 添加到 Eclipse 项目构建路径不足以使它们对 Grails 可见。您需要将它们放在应用程序的`lib`目录中并运行`grails compile --refresh-dependencies`，或者（更好）如果 JAR 在与 Maven 兼容的存储库中可用，只需在其中[声明您的依赖`BuildConfig.groovy`](http://grails.org/doc/latest/guide/conf.html#ivy)项并让 Grails 自己下载 JAR。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T18:43:23.140

运行这个 - 它会工作

```
grails clean 
```

# javascript - 引用 javascript 嵌入资源但智能感知不显示任何内容

> ID：11774782
> 
> 赞同：3
> 
> 时间：2012-08-02T09:37:16.433
> 
> 标签：javascript, visual-studio-2010, intellisense, embedded-resource

**我被卡住了......**我正在尝试引用一个嵌入在第三方程序集中的 javascript 文件，但它似乎不起作用：

我做了什么：

1.  我有一个文件夹*RefAssemblies*，这个带有嵌入式 javascript 文件的库 DLL 所在的位置
2.  我添加了一个项目引用并指向这个库程序集
3.  我在我的 javascript 文件中添加了一行我希望引用工作的地方，即。

    ```
    /// <reference name="ScriptName.js" assembly="AssemblyName" /> 
    ```

    我尝试只用名称命名我的程序集，还使用完整的程序集名称，包括名称、版本、文化和公钥令牌。没有不同。

4.  将我的库程序集添加到我的项目`web.config`内部`system.web\assemblies`（AFAIK 是您必须添加程序集并使其在您的应用程序中*广为人知的*部分），因此我应该能够在不引用程序集的情况下访问它，而只需资源名称。没有不同。

**是**的，我在完成任何更改后按下了`Ctrl`++ ，因此 Visual Studio 刷新了 Javascript 智能感知缓存。我什*至*在更改*web*项目的. 只是为了让 Visual Studio 读取文件并重新加载所有内容。`Shift``J`**`web.config`**

 **但仍然不走运...而且我在*常规*输出窗口中也没有收到任何 Javascript Intellisense 错误...

**我肯定错过了什么...**

> ***附加说明**：
> 知道我在**Visual Studio 10.0.40219.1中运行****ReSharper 6.1.1000.82 可能会有所帮助***

 **## 之后我做的其他事情

1.  从我的机器上卸载 ReSharper
2.  通过使用从命令提示符运行它来重置 Visual Studio

    ```
    devenv /ResetSettings 
    ```

    也没有运气。

**你有什么我可以做的其他建议吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:08:00.207

我对嵌入式资源也有奇怪的问题。通过使用完全限定的资源名称，我设法让它工作。你可以用 ilspy 打开程序集，然后选择 Resources 文件夹，然后会显示所有资源的全名。

正如我所说，我已经让它在一个解决方案中工作，但在其他解决方案中它不起作用，我不知道为什么..非工作解决方案具有不同的结构，不同的程序集位于不同的文件夹中，但我没有能够将其隔离为原因..

-编辑-

经过多次试验和错误，使嵌入式 javascript 引用工作的关键似乎是为**项目设置输出文件夹，其中包含对`bin`和不引用的`bin\debug`.**

据我所知，没有影响嵌入式资源的其他设置或程序集引用，只有具有引用的项目的输出文件夹。我猜测 javascript 语言服务无法找到具有嵌入式资源的程序集，除非它们位于私有路径或 gac 中，但我还没有确切了解此 binpath 的设置位置。

我已经尝试在项目本身以及我认为是实际的语言服务 exe 上设置它，但无济于事。

我在这里提出了一个连接问题： [https ://connect.microsoft.com/VisualStudio/feedback/details/770185/js-references-to-embedded-files-require-the-referencing-project-to-have-outputpath-bin](https://connect.microsoft.com/VisualStudio/feedback/details/770185/js-references-to-embedded-files-require-the-referencing-project-to-have-outputpath-bin)****

# codeigniter - 在codeigniter中检查mysql数据库中的预先存在记录

> ID：11774786
> 
> 赞同：-1
> 
> 时间：2012-08-02T09:37:29.450
> 
> 标签：codeigniter

我正在检查我的数据库中已经存在的国家/地区名称我使用了回调，但它没有发出任何错误

```
$this->form_validation->set_rules('country_name', 'Country Name', 
       'trim|required|xss_clean|callback_check_exist'); 
```

这是我的控制器功能

```
function check_exist($country_name)
    {
         $this->countrymodel->country_exists($country_name);

    } 
```

这是我的模型

```
function country_exists($key)
        {
            $this->db->where('country_name',$key);
            $this->db->from($this->dbname);
            $query = $this->db->get();
            if ($query->num_rows()> 0){
                return true;
            }
            else{
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:40:30.943

回调函数应该返回一个值并设置一条消息：

```
function check_exist($country_name)
{
     if (!$this->countrymodel->country_exists($country_name)) {
         $this->form_validation->set_message('check_exist', 'an error message');
         return FALSE;
     }
     else {
         return TRUE;
     }
} 
```

# c# - 通过在 xslt 中调用 C# 函数来更新 xml 文件

> ID：11774789
> 
> 赞同：0
> 
> 时间：2012-08-02T09:37:33.227
> 
> 标签：c#, asp.net, xml, xslt

我的网站项目中有一个 xml 文件和一个 xslt 文件。

xml文件：

```
<root>
  <employee>
    <firstname>Kaushal</firstname>
    <lastname>Parik</lastname>
  </employee>
  <employee>
    <firstname>Abhishek</firstname>
    <lastname>Swarnkar</lastname>
  </employee>
</root> 
```

xslt：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:Concat="urn:XslSample">
  <xsl:output method="html" indent="yes"/>
  <xsl:template match="root">
      <xsl:for-each select="employee">
        <![CDATA[Concatenated name is ]]>
            <xsl:value-of select="Concat:GetFullName(firstname,lastname)"/>
            <xsl:value-of select="age"/>
        <br />
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

aspx.cs：

```
using System;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Xml.XPath;
using System.Xml.Xsl;
using System.Xml;
using System.IO;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            MemoryStream objStream = new MemoryStream();
            StreamWriter objWriter = new StreamWriter(objStream, System.Text.Encoding.UTF8);

            XPathDocument doc = new XPathDocument(Server.MapPath("XMLFile.xml"));
            XslCompiledTransform trans = new XslCompiledTransform();
            trans.Load(Server.MapPath("XSLTFile.xslt"));

            //create the XslArgumentList and new BookUtils object
            XsltArgumentList argList = new XsltArgumentList();

            Concat objUtil = new Concat();

            //this tells the argumentlist about BookUtils
            argList.AddExtensionObject("urn:XslSample", objUtil);

            //new XPathNavigator
            XPathNavigator nav = doc.CreateNavigator();

            //do the transform
            trans.Transform(nav, argList, objWriter);
            //objWriter.Flush();
            objStream.Position = 0;
            StreamReader oReader = new StreamReader(objStream);
            string strResult = oReader.ReadToEnd();
            //objWriter.Close();
            //oReader.Close();
            Response.Write(strResult);
        }
        catch (Exception Ex)
        { Response.Write(Ex.Message); }
    }
}

public class Concat
{
    public Concat()
    { }

    public string GetFullName(string firstname, string lastname)
    { return "Mr." + firstname; }
} 
```

当我运行该站点时，我需要从 xslt 调用 ac# 函数并更改 xml 文件中的值......我通过 ac# 代码在每个名字前面添加一个文本（比如“先生”）...... . 添加后将输出写为响应，但原xml没有修改。我希望将其反映在 xml 文件中....

需要xml输出：

```
<root>
  <employee>
    <firstname>Mr.Kaushal</firstname>
    <lastname>Parik</lastname>
  </employee>
  <employee>
    <firstname>Mr.Abhishek</firstname>
    <lastname>Swarnkar</lastname>
  </employee>
</root> 
```

此外，作为下一步，我需要通过另一个 c# 函数在 xml 文件中添加另一个节点（比如年龄）......请注意，应该从我的 xslt 文件中调用 c# 函数......谁能帮助我有一个简单的代码？？？？

最终需要的 xml：

```
<root>
  <employee>
    <firstname>Mr.Kaushal</firstname>
    <lastname>Parik</lastname>
    <age>34</age>
  </employee>
  <employee>
    <firstname>Mr.Abhishek</firstname>
    <lastname>Swarnkar</lastname>
    <age>30</age>
  </employee>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:46:10.187

您可以考虑在这里使用 XmlDocument 类；

例如，您实际上在 XslTransform 的流输出中拥有所需的 XML：

```
XmlDocument resultDocument = new XmlDocument();
resultDocument.Load(objStream);
resultDocument.Save(Server.MapPath("XMLFile.xml")); 
```

编辑。您还需要更改 XSLT 才能使其正常工作。就像是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:Concat="urn:XslSample">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
        <root>
            <xsl:apply-templates select="/root/employee" />
        </root>

  </xsl:template>

    <xsl:template match="employee">
        <employee>
            <firstname>Mr. <xsl:value-of select="./firstname"/></firstname>
            <lastname><xsl:value-of select="./lastname"/></lastname>
            <age>24</age>
        </employee>
    </xsl:template>

</xsl:stylesheet> 
```

应该管用。但是，这可能不是最好的方法，因为您需要提供每个人的年龄，而且您似乎没有从任何地方采购。我会推荐 DOM 方法。

不过，您在这里也必须小心；可以想象，如果文件正在被另一个进程读取，则该文件可能存在读锁。如果这是一次性练习，我会考虑在部署您的网站之前这样做。

另一种选择是不使用 XSLT。在这种情况下，您还可以考虑简单的 DOM 处理：

```
XmlDocument doc = new XmlDocument();
doc.Load(Server.MapPath("XMLFile.xml"));

XmlNodeList employeeNodes = doc.SelectNodes("//employee");

foreach(XmlNode employeeNode in employeeNodes)
{
    employeeNode.SelectSingleNode("./firstname").InnerText = String.Format("Mr. {0}", employeeNode.SelectSingleNode("./firstname").InnerText);
    XmlNode ageNode = doc.CreateElement("age");
    ageNode.InnerText = "3 Billion Years";
    employeeNode.ChildNodes.Add(ageNode0;
}

doc.Save(); 
```

我还没有编译检查过这段代码，但希望意图很清楚。请注意，如果您愿意，也可以使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:52:53.250

请参阅[此问题](https://stackoverflow.com/questions/11772063/alter-xml-file-by-calling-a-c-sharp-function-in-xslt)的答案以获取问题的第一步。

对于**下一步**的回答，请使用以下 xsl：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
            xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
            xmlns:myUtils="pda:MyUtils">
<xsl:output method="xml" indent="yes"/>
<xsl:variable name="vQ">Mr. </xsl:variable>
<xsl:template match="@*|node()">
<xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>
<xsl:template match="employee/firstname">
<xsl:element name="firstname">
  <xsl:value-of select="myUtils:FormatName(.)" />
</xsl:element>
<xsl:element name="Age">
  <xsl:value-of select="myUtils:AddAge()" />
</xsl:element>
</xsl:template>

<xsl:template match="employee/firstname">
<xsl:element name="firstname">
  <xsl:value-of select="myUtils:FormatName(.)" />
</xsl:element>
</xsl:template>

<xsl:template match="employee">
<xsl:element  name="employee">
  <xsl:apply-templates select="@* | *"/>
  <xsl:element name="Age">
    <xsl:value-of select="myUtils:AddAge()" />
  </xsl:element>
</xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

并在 MyXslExtension 类中添加以下函数：

```
public string AddAge()
    {
        return "25";
    } 
```

你会得到这样的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
<employee>
<firstname>Mr. Kaushal</firstname>
<lastname>Parik</lastname>
<Age>25</Age>
</employee>
<employee>
<firstname>Mr. bhishek</firstname>
<lastname>Swarnkar</lastname>
<Age>25</Age>
</employee>
</root> 
```

希望对你有帮助....

# python - 最佳实践 - 访问对象变量

> ID：11774795
> 
> 赞同：2
> 
> 时间：2012-08-02T09:37:53.257
> 
> 标签：python, class, variables, methods

我最近做了很多 Python 类，我通常只访问这样的实例变量：

```
object.variable_name 
```

但我经常看到来自其他模块的对象会使用包装器方法来访问如下变量：

```
object.getVariable() 
```

这些不同方法的优点/缺点是什么？是否有普遍接受的最佳实践（即使有例外）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T09:45:50.063

在 Python 中永远不需要使用方法调用来获取属性。写这篇文章的人可能是前 Java 程序员，这是惯用的。

在 Python 中，直接访问属性被认为是合适的。如果您在访问属性时需要运行一些代码，例如动态计算它，您应该使用`@property`装饰器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:46:41.260

在我看来，“getter”（`getVariable`表单）的主要优点是在不更改签名的情况下添加功能或改进对象要容易得多。

例如，假设我的对象从实现某些功能变为封装另一个对象并通过代理模式（组合）提供相同的功能。如果我使用 getter 来访问属性，那么从哪里获取该属性并不重要，并且使用您的代码的“客户”看不到任何变化。

我使用 getter 和此类方法，尤其是当我的代码被其他人重用（例如作为库）时。当我的代码是独立的时，我就不那么挑剔了。

在 Java 中，这几乎是一项要求，您永远不应该直接访问您的对象字段。在 Python 中这样做是完全合法的，但您可能会考虑到我提到的封装可能带来的好处。仍然请记住，相反，直接访问在 Python中**并不被认为是不好的形式。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:46:09.190

制作 getVariable() 和 setVariable() 方法称为封装。这种做法有很多优点，它是面向对象编程中的首选风格。

通过通过方法访问变量，您可以添加另一层“错误检查/处理”，确保您尝试设置/获取的值是正确的。

setter 方法还用于其他任务，例如通知侦听器变量已更改。

至少在 java/c#/c++ 等中。

# java - 带有最终方法的 Java 类的装饰器

> ID：11774800
> 
> 赞同：4
> 
> 时间：2012-08-02T09:38:11.923
> 
> 标签：java, decorator, final

我有一个（Java）类 WindowItem，它有一个问题：其中一种方法不是线程安全的。我无法修复 WindowItem，因为它是外部框架的一部分。所以我想我为它实现了一个装饰器，它在有问题的方法上有一个“同步”关键字。

装饰器扩展了 WindowItem 并且还将包含 WindowItem。按照装饰器模式，我在装饰器中创建调用它包含的 WindowItem 的方法。

但是，WindowItem 有一些最终方法，我无法在装饰器中覆盖这些方法。这破坏了装饰器的透明度。让我们明确一点：

```
public class WindowItem {
   private List<WindowItem> windows;

   public Properties getMethodWithProblem() {
      ...
   }

   public final int getwindowCount() {
      return windows.size();
  }
}

public class WindowItemDecorator extends WindowItem {
   private WindowItem item;

   public WindowItemDecorator(WindowItem item) {
      this.item = item;
   }

   # Here I solve the problem by adding the synchronized keyword:
   public synchronized Properties getgetMethodWithProblem() {
      return super.getMethodWithProblem();
   }

   # Here I should override getWindowCount() but I can't because it's final
} 
```

在我自己的代码中，每当我必须在某个地方传递一个 WindowItem 时，我首先将它包装在一个装饰器中：new WindowItemDecorator(item)——线程安全问题就消失了。但是，如果我的代码在 WindowItemDecorator 上调用 getwindowCount()，它将始终为零：它在超类而不是“item”成员上执行 getWindowCount()。

所以我想说 WindowItem 的设计（事实上它有公共的 final 方法）使得为这个类创建一个装饰器是不可能的。

这是正确的，还是我错过了什么？

在这种情况下，我可以在装饰器中保留窗口列表的副本，并使其保持同步，然后 getWindowCount() 的结果将是正确的。但在那种情况下，我更喜欢分叉和修补框架......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:00:13.750

不这样想问题怎么办？为什么不只处理代码中的线程问题，而不假设`WindowItem`.

```
// I personally prefer ReadWriteLocks, but this sounds like it will do...
synchronized (windowItem) {
    windowItem.getMethodWithProblem();
} 
```

然后向包维护者提交 RFE，以更好地支持线程安全。

事实上，如果该类的设计不是线程安全的，那么几个`synchronized`关键字就不太可能真正解决问题。某人所说的“线程安全”总是相对的；-)

（顺便说一句，`WindowItem`绝对*不是*线程安全的，因为它正在使用`List`而不是显式使用“线程就绪”变体[在java中同步ArrayList的正确方法](https://stackoverflow.com/questions/1431681)- 也不能保证`List`以线程安全的方式访问）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:53:43.843

也许您可以使用[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern#Java_examples)`WindowItem`，如果该类实现了一个定义您关心的所有方法的接口，它会很好地工作。或者，如果引用这个委托类而不是`WindowItem`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:44:26.763

你的问题的答案是肯定的，你不能覆盖 final 方法，这意味着不可能为这个类创建一个装饰器。

如果您可以覆盖有问题的方法，并通过同步该方法来解决问题，则可以将其保留。也就是说，只使用您的子类，而不使用装饰器模式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T09:55:02.353

一位同事提出了一个我认为可以解决问题的想法。通过查看修改列表窗口的所有方法，我可以使超类的状态和“项目”成员的状态保持同步。有几个：addWindow、removeWindow。我不仅在装饰器中调用“item.addWindow(...)”，而是在超类上调用 addWindow：

普通装饰器：

```
public void addWindow(WindowItem newItem) {
   item.addWindow(newItem);
} 
```

在这种情况下，我这样做：

```
public void addWindow(WindowItem newItem) {
   super.addWindow(newItem);
   item.addWindow(newItem);
} 
```

这使状态保持同步并且最终方法的返回值正确。

这是一个可以工作或不工作的解决方案，具体取决于被装饰的类的内部结构。

# iphone - 导航控制器的一般疑问 - IOS

> ID：11774804
> 
> 赞同：-3
> 
> 时间：2012-08-02T09:38:34.987
> 
> 标签：iphone, objective-c, ios, xcode

我有一些关于导航控制器的一般性问题。我已经用导航控制器推送了一个表格视图。（现在显示表格视图）如果我单击导航控制器的后退按钮，它会将我带回到主视图，现在分配给表格视图的内存将自动释放。我们需要做额外的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:44:44.527

一般来说，只要您不维护对对象的引用，您就可以放心地假设 Cocoa Touch 会做正确的事情。当没有在屏幕上绘制内容时，API 通常不会无缘无故地保持它们，所以如果你不坚持它们，你也可以。

在这种情况下，如果您使用 ARC，则“保留”意味着“保留对”的引用，如果您不使用，则表示“不使用`release`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:42:39.530

在 ARC 之前：当您将 UIViewController 添加到导航控制器的堆栈时，您需要在将视图控制器推送到堆栈后释放它。

如果您的项目启用了 ARC，则无需执行此操作。阅读更多关于 ARC 的内容。

# c# - 编写 CAML 查询以查询具有托管元数据列的 SPList

> ID：11774807
> 
> 赞同：1
> 
> 时间：2012-08-02T09:38:48.587
> 
> 标签：c#, sharepoint-2010, caml

我有一个带有托管元数据列的 SPList，这是我的 caml 查询。

```
/// This caml query doesn't work
SPQuery oQuery = new SPQuery();
string strQuery = @"<Query><Where><In><FieldRef LookupId=""TRUE"" Name=""TaxonomyColumn"" /><Values><Value Type=""Text"">7392ec1d-3f35-4c5b-b6ad-f80ff15ed718</Value></Values></In></Where></Query>";
oQuery.Query = strQuery;

/// This linq query works exactly fine
var itms = (from SPListItem itm in oList.Items
        where itm["TaxonomyColumn"].ToString().Contains("7392ec1d-3f35-4c5b-b6ad-f80ff15ed718")
        select itm).ToList(); 
```

我的问题是出于某种原因我需要使用 CAML 查询，我不能只是想出一种方法来编写我的 CAML 查询来查询该列是托管元数据列的列表。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:04:30.620

SPQuery 添加 Query 标记本身：

```
 SPQuery oQuery = new SPQuery();
string strQuery = @"<Query><Where><Contains><FieldRef Name='TaxonomyColumn' /><Value Type='Text'>7392ec1d-3f35-4c5b-b6ad-f80ff15ed718</Value></Contains></Where></Query>";
oQuery.Query = strQuery; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:28:08.433

您不使用 GUID，您需要使用查找 id。您可以使用 TaxonomyField.GetWssIdsOfKeywordTerm() 找到此 id，并像这样编写 CAML：

```
<Query>
  <Where>
    <In>
      <FieldRef LookupId="TRUE" Name="ItemType" />
      <Values>
        <Value Type="Integer">14</Value>
        <Value Type="Integer">15</Value>
      </Values>
    </In>
  </Where>
</Query> 
```

当有多个值而不是多个 Eq/Or 语句时，“In”很方便。

在这里详细解释：http: [//msdn.microsoft.com/en-us/library/ff625182.aspx](http://msdn.microsoft.com/en-us/library/ff625182.aspx)

# mysql - 如何创建 MYSQL 准备语句并在 1 个存储过程中重置它们

> ID：11774815
> 
> 赞同：0
> 
> 时间：2012-08-02T09:39:02.390
> 
> 标签：mysql

我目前正在循环浏览数据库中的用户名列表。像这样 ：

```
DECLARE
    cur1 CURSOR FOR
        select user_name
           from users
          where user_type = 'SP'
          and active = 'Y';

OPEN cur1;

read_loop : LOOP
FETCH cur1 INTO userName; 
```

现在对于每个用户名，我正在创建包含数据的表。显然，在上述循环中，我有多个 PREPARE 语句，例如：

```
 set l_table_name = concat("tmp_rec_",userName);

   set l_select_cnt = concat("SELECT count(1) into @l_cnt
                               from information_schema.tables
                              where table_schema = 'greptlat_db'
                              and table_name = '", l_table_name, "'");
   PREPARE stmt2 FROM @l_select_cnt;
   EXECUTE stmt2;
   DEALLOCATE PREPARE stmt2;

   if l_cnt > 0 then
       set droptable = concat("drop table ", l_table_name);

       PREPARE stmt1 FROM @droptable;
       EXECUTE stmt1;
       DEALLOCATE PREPARE stmt1;
   END IF; 
```

我有更多的 PREPARE 语句来构建我想要的数据并将其插入到我为每个用户创建的表中。

现在因为这是在一个循环中，对于每个用户，我已经读到 PREPARE 语句是全局的。这意味着，上面的代码“PREPARE stmt1 FROM @droptable”，stmt1 永远不会改变，即使它为每个用户都通过了循环。即使我 DEALLOCATE 它，它仍然保留用于该存储过程。

每次循环重新启动时，我如何重置这个 stmt1、stmt2、stmt3 ...等？

基本上每次循环通过时 l_table_name 都会改变，但 stmt1 不会改变.. 我需要改变 stmt1 以便它每次都使用新的 l_table_name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:09:31.050

通常在准备新语句之前隐式释放准备语句。那么如果你删除`DEALLOCATE PREPARE stmt1;`. 您是否检查了每个循环中的“@droptable”值？

# matplotlib - 带误差线的 Matplotlib 直方图

> ID：11774822
> 
> 赞同：16
> 
> 时间：2012-08-02T09:39:21.720
> 
> 标签：matplotlib, histogram

我`matplotlib`使用该`pyplot.hist()`函数创建了一个直方图。我想将 bin 高度 ( `sqrt(binheight)`) 的中毒误差平方根添加到条形图中。我怎样才能做到这一点？

`.hist()`包含的返回元组`return[2]`-> 1 个 Patch 对象的列表。我只能发现可以将错误添加到通过`pyplot.bar()`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-02T10:37:43.230

确实你需要使用 bar。您可以使用输出`hist`并将其绘制为条形图：

```
import numpy as np
import pylab as plt

data       = np.array(np.random.rand(1000))
y,binEdges = np.histogram(data,bins=10)
bincenters = 0.5*(binEdges[1:]+binEdges[:-1])
menStd     = np.sqrt(y)
width      = 0.05
plt.bar(bincenters, y, width=width, color='r', yerr=menStd)
plt.show() 
```

![在此处输入图像描述](../Images/7df311ba7133d43bc7d67bb9f6376ae4.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-04T02:05:49.873

### 替代解决方案

您还可以使用`pyplot.errorbar()`和`drawstyle`关键字参数的组合。下面的代码使用阶梯线图创建直方图。每个 bin 的中心都有一个标记，每个 bin 都有必要的泊松误差条。

```
import numpy
import pyplot

x = numpy.random.rand(1000)
y, bin_edges = numpy.histogram(x, bins=10)
bin_centers = 0.5*(bin_edges[1:] + bin_edges[:-1])

pyplot.errorbar(
    bin_centers,
    y,
    yerr = y**0.5,
    marker = '.',
    drawstyle = 'steps-mid-'
)
pyplot.show() 
```

### 我的个人意见

在同一张图上绘制多个直方图的结果时，线图更容易区分。此外，使用`yscale='log'`.

# c# - 异步写入文件

> ID：11774827
> 
> 赞同：29
> 
> 时间：2012-08-02T09:39:50.777
> 
> 标签：c#, asp.net, asynchronous

有什么方法可以编写一个异步函数，将数据重复写入文件。

编写异步函数时出现以下错误

该进程无法访问文件“c:\Temp\Data.txt”，因为它正被另一个进程使用

```
public void GoButton_Click(object sender, System.EventArgs e)
{
    IAsyncResult ar = DoSomethingAsync(strURL, strInput);
    Session["result"] = ar;
    Response.Redirect("wait1.aspx");
}

private IAsyncResult DoSomethingAsync(string strURL, string strInput)
{
    DoSomethingDelegate doSomethingDelegate = new DoSomethingDelegate(DoSomething);
    IAsyncResult ar = doSomethingDelegate.BeginInvoke(strURL, strInput, new AsyncCallback(MyCallback), null);
    return ar;
}

private delegate void DoSomethingDelegate(string strURL, string strInput);

private void MyCallback(IAsyncResult ar)
{
    AsyncResult aResult = (AsyncResult)ar;
    DoSomethingDelegate doSomethingDelegate = (DoSomethingDelegate)aResult.AsyncDelegate;
    doSomethingDelegate.EndInvoke(ar);
}

private void DoSomething(string strURL, string strInput)
{
    int i = 0;
    for (i = 0; i < 1000; i++)
    {
        m_streamWriter.BaseStream.Seek(0, SeekOrigin.End); 
        m_streamWriter.WriteLine("{0} ", MethodCall(strURL, strInput));
        m_streamWriter.Flush();
        m_streamWriter.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-03-24T18:36:11.910

那么我有同样的问题。现在解决了。这是一种迟到的建议，但可能对其他人有所帮助。

在下面的控制台示例中包含以下 using 语句。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Threading.Tasks;
Use of the FileStream Class 
```

下面的示例使用 FileStream 类，它有一个选项可以导致异步 I/O 在操作系统级别发生。在许多情况下，这将避免阻塞 ThreadPool 线程。要启用此选项，您必须在构造函数调用中指定 useAsync=true 或 options=FileOptions.Asynchronous 参数。

StreamReader 和 StreamWriter 如果通过指定文件路径直接打开，则没有此选项。如果您向 StreamReader/Writer 提供由 FileStream 类打开的 Stream，则它们确实具有此选项。请注意，即使线程池线程被阻塞，异步在 UI 应用程序中也能提供响应优势，因为在等待期间 UI 线程不会被阻塞。

书写文字

以下示例将文本写入文件。在每个 await 语句处，该方法立即退出。当文件 I/O 完成时，该方法在 await 语句之后的语句处继续。请注意， async 修饰符位于使用 await 语句的方法的定义中。

```
static void Main(string[] args)
{
    ProcessWrite().Wait();
    Console.Write("Done ");
    Console.ReadKey();
}

static Task ProcessWrite()
{
    string filePath = @"c:\temp2\temp2.txt";
    string text = "Hello World\r\n";

    return WriteTextAsync(filePath, text);
}

static async Task WriteTextAsync(string filePath, string text)
{
    byte[] encodedText = Encoding.Unicode.GetBytes(text);

    using (FileStream sourceStream = new FileStream(filePath,
        FileMode.Append, FileAccess.Write, FileShare.None,
        bufferSize: 4096, useAsync: true))
    {
        await sourceStream.WriteAsync(encodedText, 0, encodedText.Length);
    };
} 
```

阅读文本

以下示例从文件中读取文本。文本被缓冲，在这种情况下，被放置到 StringBuilder 中。与前面的示例不同，await 的评估产生一个值。ReadAsync 方法返回一个 Task，因此 await 的评估产生一个 Int32 值 (numRead)，该值在操作完成后返回。

```
static void Main(string[] args)
{
    ProcessRead().Wait();
    Console.Write("Done ");
    Console.ReadKey();
}

static async Task ProcessRead()
{
    string filePath = @"c:\temp2\temp2.txt";

    if (File.Exists(filePath) == false)
    {
        Console.WriteLine("file not found: " + filePath);
    }
    else {
        try {
            string text = await ReadTextAsync(filePath);
            Console.WriteLine(text);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
}

static async Task<string> ReadTextAsync(string filePath)
{
    using (FileStream sourceStream = new FileStream(filePath,
        FileMode.Open, FileAccess.Read, FileShare.Read,
        bufferSize: 4096, useAsync: true))
    {
        StringBuilder sb = new StringBuilder();

        byte[] buffer = new byte[0x1000];
        int numRead;
        while ((numRead = await sourceStream.ReadAsync(buffer, 0, buffer.Length)) != 0)
        {
            string text = Encoding.Unicode.GetString(buffer, 0, numRead);
            sb.Append(text);
        }

        return sb.ToString();
    }
} 
```

原始来源在[这里，](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/23/using-async-for-file-access-alan-berman.aspx)但不幸的是链接现在似乎已经死了。

希望有帮助...

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-05-22T16:11:01.823

处理异步写入文件的辅助方法示例。

```
public async Task FileWriteAsync(string filePath, string messaage, bool append = true)
    {
        using (FileStream stream = new FileStream(filePath, append ? FileMode.Append : FileMode.Create, FileAccess.Write, FileShare.None, 4096, true))
        using (StreamWriter sw = new StreamWriter(stream))
        {
            await sw.WriteLineAsync(messaage);
        }
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-02T09:41:26.390

异步写入文件不会解决这个问题。您需要等待文件可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-11T07:24:22.877

如果你使用一个简单的 StreamWriter，你可以用一个简单的类来替换它。不需要异步/等待。这是一个编写文本文件的示例。

```
using System;
using System.Collections.Concurrent;
using System.IO;
using System.Threading.Tasks;

class LogWriter : IDisposable
{
    private BlockingCollection<string> blockingCollection = new BlockingCollection<string>();
    private StreamWriter log = null;
    bool run = true;
    Task task = null;

    public LogWriter(string logFilePath)
    {
        log = new StreamWriter(logFilePath);
        task = Task.Run(() =>
        {
            while (run)
            {
                log.WriteLine(blockingCollection.Take());
            }
           });
    }

    public void WriteLine(string value)
    {
        blockingCollection.Add(value);
    }

    public void Dispose()
    {
        run = false;
        task.Dispose();
        log.Close();
        log.Dispose();
    }
} 
```

要使用它，就像使用 StreamWriter 一样：

```
using (var log = new LogWriter(logFileName))
{
    log.WriteLine("Hello world");
    // Code here that should not be blocked by writing to the file
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-26T19:57:07.167

接受的答案具有常见的异步陷阱 - 缓冲区不会异步刷新。看看这个：[https ://github.com/davidfowl/AspNetCoreDiagnosticScenarios/blob/master/AsyncGuidance.md#always-call-flushasync-on-streamwriters-or-streams-before-calling-dispose](https://github.com/davidfowl/AspNetCoreDiagnosticScenarios/blob/master/AsyncGuidance.md#always-call-flushasync-on-streamwriters-or-streams-before-calling-dispose)

在处理之前使用新的`await using`或手动刷新缓冲区

```
await using (var file = new StreamWriter(path)) //mind the "await using"
{
    await file.WriteAsync(content);
} 
```

或者

```
using (var streamWriter = new StreamWriter(context.Response.Body))
{
    await streamWriter.WriteAsync("Hello World");
    await streamWriter.FlushAsync();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T09:51:20.857

最终，这取决于你为什么要这样做。

如果您不打算向文件写入太多数据，则可以不断打开和关闭它。

或者，如果您知道文件何时打开以及何时关闭，您可以在需要时打开它，然后保持打开状态以进行写入，直到您知道不再需要它为止。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-21T12:14:15.277

简单直接的解决方案：

```
using var file = new StreamWriter(path);
await file.WriteAsync(content); 
```

# .htaccess - 删除 .htaccess 中的字符串

> ID：11774830
> 
> 赞同：0
> 
> 时间：2012-08-02T09:40:14.863
> 
> 标签：.htaccess

我的 .htaccess 文件中有以下条目：

```
RewriteRule  ^blogs$ ?name=data&case=gview&group_id=31%1 [L] 
```

我所做的是，我*重定向* `blogs`到`?name=data&case=gview&group_id=31`

现在发生的事情是，我所有的网址现在都是`blogs?id=1`等等，但我需要它们保持不变`?id=1`

如何`blogs`从其余网址中删除？

这是我想出的，但它不起作用：

```
RewriteRule ^blogs?(.*)$ /$1 [L] 
```

*编辑*我可能解释错了。我需要更改链接的实际 url 显示。这真的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:44:06.047

不确定......但那是你要找的吗？

```
RewriteRule  ^/?$ /blogs [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:10:17.990

`R`仅在原始规则中添加 a 有什么问题？

```
RewriteRule  ^blogs$ ?name=data&case=gview&group_id=31%1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:40:05.490

好吧，答案差不多：*做不到*。我刚刚检查了我的代码，`/`在主 URL 之前添加，一切都按预期工作。

谢谢两位的建议。

# wpf - XBAP 从应用程序中清除缓存

> ID：11774838
> 
> 赞同：0
> 
> 时间：2012-08-02T09:40:37.110
> 
> 标签：wpf, caching, xbap, mage

有没有办法从 Xbap 应用程序中清除缓存，而不是从命令提示符运行 mage 或 rundll32？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-15T06:20:56.507

以编程方式，您可以使用它：

```
new System.Deployment.Application.DeploymentServiceCom().CleanOnlineAppCache(); 
```

[原来的](http://newyear2006.wordpress.com/2006/08/10/clickonce-applicationcache-oder-xbap-cache-loschen/)

不要忘记您的应用权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:12:42.690

据我所知，唯一可用的工具是“mage -cc”。

[http://www.vistax64.com/avalon/11917-xbap-applciation-issues.html](http://www.vistax64.com/avalon/11917-xbap-applciation-issues.html)

# python - 如何在 PyParsing 中构造与 FollowedBy 子类等效的“领先”

> ID：11774840
> 
> 赞同：1
> 
> 时间：2012-08-02T09:40:48.437
> 
> 标签：python, pyparsing

我正在尝试通过使用 PyParsing 删除前导或尾随空格字符来清除一些代码。删除前导空格非常容易，因为我可以使用`FollowedBy`匹配字符串但不包含它的子类。现在，我的标识字符串后面的内容也需要相同的内容。

这里有一个小例子：

```
from pyparsing import *

insource = """
annotation (Documentation(info="  
  <html>  
<b>FOO</b>
</html>  
 "));
"""
# Working replacement:
HTMLStartref = OneOrMore(White(' \t\n')) + (FollowedBy(CaselessLiteral('<html>')))

## Not working because of non-existing "LeadBy" 
# HTMLEndref = LeadBy(CaselessLiteral('</html>')) + OneOrMore(White(' \t\n')) + FollowedBy('"')

out = Suppress(HTMLStartref).transformString(insource)
out2 = Suppress(HTMLEndref).transformString(out) 
```

作为输出之一：

```
>>> print out
annotation (Documentation(info="<html>
<b>FOO</b>
</html>
 ")); 
```

**应该**得到：

```
>>> print out2
annotation (Documentation(info="<html>
<b>FOO</b>
</html>")); 
```

我查看了[文档](http://pyparsing.svn.sourceforge.net/viewvc/pyparsing/src/HowToUsePyparsing.html)，但找不到与“ `LeadBy`”等效`FollowedBy`的方法或实现该方法的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:41:19.403

您要求的是“lookbehind”之类的东西，也就是说，只有在某些东西前面有特定模式时才匹配。我目前还没有明确的课程，但是对于您想要做的事情，您仍然可以从左到右转换，并且只留在前导部分，而不是压制它，只是压制空格.

以下是解决您的问题的几种方法：

```
# define expressions to match leading and trailing
# html tags, and just suppress the leading or trailing whitespace
opener = White().suppress() + Literal("<html>")
closer = Literal("</html>") + White().suppress()

# define a single expression to match either opener
# or closer - have to add leaveWhitespace() call so that
# we catch the leading whitespace in opener
either = opener|closer
either.leaveWhitespace()

print either.transformString(insource) 

# alternative, if you know what the tag will look like:
# match 'info=<some double quoted string>', and use a parse
# action to extract the contents within the quoted string,
# call strip() to remove leading and trailing whitespace,
# and then restore the original '"' characters (which are
# auto-stripped by the QuotedString class by default)
infovalue = QuotedString('"', multiline=True)
infovalue.setParseAction(lambda t: '"' + t[0].strip() + '"')
infoattr = "info=" + infovalue

print infoattr.transformString(insource) 
```

# performance - 如何衡量 Seam 应用程序的性能？

> ID：11774841
> 
> 赞同：2
> 
> 时间：2012-08-02T09:40:48.897
> 
> 标签：performance, jsf, jboss, richfaces, seam

我有一个使用 Seam 的 Jboss 应用程序。该应用程序是一个面向用户的 Web 应用程序。一页包含一个大的`rich:dataTable`（800 行，11 列）。此页面加载速度非常慢，需要 14 秒，其中只有很少一部分用于下载页面。我宁愿继续在一页上显示表格，而不是分页。

我想测量 JSF 生命周期的不同阶段使用的时间。为页面获取数据的数据库查询已进行了相当优化，我怀疑响应呈现需要大量时间，但希望通过测量来确认这一点。

该应用程序在带有 Seam 2.1.0.GA 和 RichFaces 3.3.3 的 Jboss 4.2.3 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:50:15.117

我会推荐 JProfiler 或您认为好的任何其他分析器。

我还在 Firefox 中使用 firebug 来确定服务器端与客户端相比需要多长时间。

并阅读 Dan Allen 的这篇文章 [http://www.jsfcentral.com/articles/speed_up_your_jsf_app_1.html](http://www.jsfcentral.com/articles/speed_up_your_jsf_app_1.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:55:57.387

我使用了不久前有人创建的拦截器。它不测量阶段，但它确实测量每个拦截的方法运行多少次以及运行它需要多长时间。您可以使用调试开关打开或关闭它。可在此处获得： [http ://seamframework.org/Community/SeamPerformanceProblemRewardingWorkaround](http://seamframework.org/Community/SeamPerformanceProblemRewardingWorkaround)

# drupal - Drupal 7 - 使用 managed_file 类型上传文件后自动提交表单

> ID：11774842
> 
> 赞同：5
> 
> 时间：2012-08-02T09:40:50.667
> 
> 标签：drupal, file-upload, drupal-7

我得到了一个只有一个字段的表格。该字段属于“managed_field”类型。当您单击“上传”按钮时，进度条将显示文件上传的进度。之后，您将需要提交表单以保存文件。

因为当您选择一个文件然后单击表单提交按钮而不是“上传”按钮时，进度条不会显示。我想在上传（通过“上传”按钮）完成后触发表单提交。

我现在的表格是这样的：

```
$form['#attributes'] = array('enctype' => "multipart/form-data");

$form['pdf_upload'] = array(
    '#title' => t('Upload PDF'),
    '#type' => 'managed_file',
    '#required' => TRUE,
    '#progress_message' => t('Please wait...'),
    '#progress_indicator' => 'bar',
    '#upload_validators' => array(
        'file_validate_extensions' => array('pdf'),
    )

);

$form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Save'),
); 
```

文件模块通过对 file/ajax/* uri 的 ajax 回调来处理文件。回调返回 ajax 命令。

基本上我想添加一个额外的 ajax 命令，在文件上传完成后触发表单提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:37:51.380

@Clive 这不是我的选择，因为我希望用户自己开始上传。您的回答虽然给了我一些想法，但我想出了以下解决方案。

```
Drupal.behaviors.fileUpload = {
    attach: function(context, settings) {
        jQuery("body").ajaxComplete(function(event,request, settings){
            // Only do something when on the orders page of a user
            // This is where I use the upload functionality
            if(window.location.pathname.match(/user\/\d+\/orders/)) {
                // Check if the AjaxComplete was triggered by the managed file upload
                // pdf_upload_XXX is my form name
                // Get the form-build-id from the URL
                if (form_build_id = settings.url.match(/file\/ajax\/pdf_upload_\d*\/(.*)$/)) {
                    // Check if the upload has completed by checking if there is a Delete button in the form that has the form-build-id
                    if(jQuery('[value="'+form_build_id[1]+'"]').closest('form').find('[id$=remove-button]').length) {
                        // Click the submit button
                        jQuery('[value="'+form_build_id[1]+'"]').closest('form').find('[id^=edit-submit]').click();
                    }
                }
            }   
        });

    }
} 
```

希望这对其他用户也有用。

Thnx Clive 让我走上了正确的道路。

# git - Github：在提交历史中显示标签

> ID：11774844
> 
> 赞同：7
> 
> 时间：2012-08-02T09:40:55.607
> 
> 标签：git, github, tags, commit, bitbucket

我在 github 上有一个存储库，另一个在 bitbucket 上。两者都有一些标签。

问题是，bitbucket 在提交他们相关的标签旁边显示，而 github 没有。有没有办法在提交历史旁边显示标签？:)

干杯。

* * *

## 回答 #1

> 赞同：-7
> 
> 时间：2013-01-30T15:18:43.667

要显示包含提交的标签（即在提交之前添加标签）：

```
git tag --contains <commit> 
```

# c# - 是否可以在使用不同端点或类似想法控制的多个应用程序（Windows 服务）上托管相同的 WCF？

> ID：11774848
> 
> 赞同：1
> 
> 时间：2012-08-02T09:41:13.887
> 
> 标签：c#, wcf, endpoint

是否可以在使用不同端点或类似想法控制的多个应用程序（或 Windows 服务）上托管相同的 WCF？

基本上，我们需要最多 4 个版本的相同 Windows 服务运行（例如，Service1...Service4），使用和托管相同的 WCF dll，但从客户端接收到特定服务的请求？

例如：我需要客户要求“一个”服务的能力吗？主机执行计算例程 - 可能有多个端点？..

```
 Consume.ServiceRef.WCFServiceClient obj = new Consume.ServiceRef.WCFServiceClient("Service1");

        bool res = obj.ProcessCalc(out response, out error, request); 
```

另一个客户端可能会从不同的主机请求...

```
Consume.ServiceRef.WCFServiceClient obj = new Consume.ServiceRef.WCFServiceClient("Service3"); 
```

所有主机都执行相同的功能，但由于第三方软件和业务需求的一些复杂性，我需要多个主机。

我之前（20 年前）自己在 DEC VMS 服务器上使用套接字（和自我处理的多线程）完成了这项工作，但我想使用 WCF 以使其易于使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:59:38.120

是的，可以通过简单的配置更改来实现，这是 WCF 的主要优势之一。

见[http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/configuring-multiple-end-points-for-wcf-service/](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/configuring-multiple-end-points-for-wcf-service/)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:49:08.533

对的，这是可能的。

您可以在配置中设置端点并让服务选择要使用的绑定。您可以使用命令行参数或服务参数来选择要用于实例的端点。

# php - 单击图像时如何从数据库中获取数据

> ID：11774851
> 
> 赞同：0
> 
> 时间：2012-08-02T09:41:27.117
> 
> 标签：php, mysql

当单击缩略图并显示放大图像并相应地显示该特定图像的描述时，我不知道如何从数据库中获取数据

所以请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:44:18.063

您可以在缩略图上设置指向包含信息的详细信息页面的链接，或者您可以使用 ajax 调用从另一个 php 脚本获取信息，然后将其显示在叠加层或任何您想要的位置

# php - INSERT INTO 后出错

> ID：11774854
> 
> 赞同：1
> 
> 时间：2012-08-02T09:41:35.707
> 
> 标签：php, mysql

我有以下代码：

```
$salt=uniqid(mt_rand(), false);
#Add data to tables
mysql_query("INSERT INTO accounts VALUES('$user', '".hash('sha512',$pass+$salt)."', '$salt', '$cookie_value')");
mysql_query("INSERT INTO passwordreset VALUES('$user', NULL, NULL)");
#cookie creation
#.....
#cookie update
mysql_query("UPDATE accounts SET cookie='$cookie_value' WHERE user='$user'"); 
```

我使用这些功能从表单中清理数据：

```
$var = htmlentities($var, ENT_QUOTES, "UTF-8");
return mysql_real_escape_string($var); 
```

今天我登录 phpMyAdmin，我看到所有用户的密码**和盐都**是相同的。不要提醒我已弃用的​​ mysql_* 我知道，这只是草稿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:43:45.337

PHP 中的字符串连接使用`.`not `+`。因此：

`hash('sha512',$pass+$salt)`

应该

```
hash('sha512',$pass.$salt) // or
hash('sha512',"${pass}${salt}") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:44:13.340

这是PHP，`$pass+$salt`应该是`$pass . $salt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:03:39.893

我要对您当前的代码发表一些评论：

1.  在两个字符串上使用`+`运算符（而不是`.`）会导致两个值的总和转换为整数（如果字符串不是数字，则转换为`int(0)`）；当它被传递给`hash()`它时，它会再次转换为字符串，因此您的密码通常都是`sha512("0")`. 我不确定为什么你的盐都具有相同的值，除非列数据类型`INT`在你的数据库中。

2.  您可以使用它`uniqid(mt_rand(), true)`来收集更多的熵，从而获得更好的盐。

3.  您应该使用专用的密码散列来散列密码，例如[`crypt()`](http://www.php.net/crypt)（确保您的列宽足够大）中的 BlowFish 选项；通过这种方式，您可以摆脱盐列，并且可以选择以向后兼容的方式验证哈希所需的工作量。

4.  cookie 列用于我假设的自动登录功能？最好为此创建一个单独的表，其中包含一个随机字符串作为主键和用户表的外键。这样您就可以支持从多个浏览器自动登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:45:22.833

这里的错误

```
$pass+$salt 
```

应该

```
$pass.$salt 
```

. 用于 php 中的字符串连接

# java - 通过远程删除存储过程

> ID：11774856
> 
> 赞同：2
> 
> 时间：2012-08-02T09:41:50.837
> 
> 标签：java, tsql, stored-procedures, sql-server-2000, junit4

我正在使用 JUnit 通过远程创建和测试存储过程，我的用户名是 test，这是我的代码，

```
String sql = "create procedure test.firstProc3 AS select GETDATE()";
cursor.execute(sql);
cursor.executeQuery("firstProc3"); 
```

并放弃该程序：

```
String dropSQL = "DROP PROCEDURE test.firstProc3";
cursor.execute(dropSQL); 
```

由于 Drop Procedure 不起作用，我无法第二次运行相同的 SP（新会话）我的错误是：

数据库中已经有一个名为“firstProc3”的对象。

当我在服务器端提供**sp_help**时，表中的行具有值

**firstProc3 测试存储过程**

但是，当我在查询分析器中给出 DROP PROCEDURE test.firstProc3 时，该行将从表中删除。

尝试通过 Junit 执行相同操作可能会出现什么问题？

有需要设置的权限吗？

PS - 用户测试启用了 db_ddladmin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:12:36.907

我设法通过使用以下方法最终解决了这个问题：

```
declare @object_id int
select @object_id = object_id('test.firstProc5')
EXEC sp_MSdrop_object @object_id
GO 
```

这也从表中删除了数据。我能够多次成功运行测试用例！

谢谢你的帮助 ：）

我提到的链接在这里，希望它可以帮助某人：

[http://www.mssqlcity.com/Articles/Undoc/SQL2000UndocSP.htm](http://www.mssqlcity.com/Articles/Undoc/SQL2000UndocSP.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:12:59.540

根据错误消息，我怀疑这是权限问题。当您尝试删除时，您的光标对象似乎正在再次运行创建，或者在再次运行单元测试之前您从未真正删除 proc，或者测试以某种方式运行不符合逻辑顺序。您可以实例化一个新的游标对象并尝试使用它进行删除，或者使用[分析器](http://msdn.microsoft.com/en-us/library/aa173918%28v=sql.80%29.aspx)或一些调试输出验证正在针对数据库运行的 SQL？

除此之外，我很想知道更改您的 SQL 命令以检查 proc 是否存在会使错误消失（并不是说这是正确的答案）：

```
if object_id('test.firstProc3') is null begin
    -- Dynamic SQL because create must be first in a batch
    exec ('create procedure test.firstProc3 as select getdate()') 
end

if object_id('test.firstProc3') is not null begin
    drop procedure test.firstProc3
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:07:03.487

也许是一些小事，也许甚至不是这样，但是您是否尝试过在您的 drop 语句中使用转义？

就像是

```
drop procedure [test].[firstProc3] 
```

我记得当我从 c# 代码中调用 drop table 时，我遇到了这个问题......

# mysql - Mysql距离函数

> ID：11774862
> 
> 赞同：0
> 
> 时间：2012-08-02T09:42:05.330
> 
> 标签：mysql, distance

我的函数存在问题，需要计算给定坐标之间的距离。正如我所看到的，问题出在负值上，我已经没有办法解决这个问题了，所以如果有人可以帮助我，我将非常感激！

```
DELIMITER $$

CREATE DEFINER=`sfff_user`@`%` FUNCTION `GetUserDistance`(lat VARCHAR (20), lon VARCHAR (20), userLat VARCHAR (20), userLon VARCHAR (20)) RETURNS int(11)
BEGIN
    DECLARE distance INT (11);

    IF ISNULL(lat) OR ISNULL(lon) OR lat = '' OR lon = '' THEN
        RETURN 0;
    ELSE
        SELECT
            3956 * 2 * ASIN(SQRT(POWER(SIN((lat - ABS(userLat)) * PI() / 180 / 2), 2) + COS(lat * PI() / 180) * COS(ABS(userLat) * PI() / 180) * POWER(SIN((lon - userLon) * PI() / 180 / 2), 2)))
        INTO
            distance;

        RETURN distance;
    END IF;

END 
```

例如此调用的结果：

`select GetUserDistance(44, 21, 44, 21) as distance;`是**0**没关系

但是看看这个：

```
select GetUserDistance('-15.4167', '28.2833', '-15.4167', '28.2833') as distance; 
```

是**2129**，这太疯狂了！

因此，如果您可以看一下，拥有正确的功能会非常好，因为我很想解决这个问题:(

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:57:03.757

根据[这个链接](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFEQFjAA&url=http://assets.en.oreilly.com/1/event/2/Geo%2520Distance%2520Search%2520with%2520MySQL%2520Presentation.ppt&ei=SU0aUNTaO4Oo9gSFwYCoCw&usg=AFQjCNF-JRRwbrOhQPim3d1wRDc2dI8HsQ&sig2=J1Zj0oIenjauLCNeJGRkqw)，公式应该没有`ABS`：

```
3956 * 2 * ASIN(SQRT(POWER(SIN((lat - userLat) * PI() / 180 / 2), 2) + COS(lat * PI() / 180) * COS(ABS(userLat) * PI() / 180) * POWER(SIN((lon - userLon) * PI() / 180 / 2), 2))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:00:13.490

为了安全起见，您应该 CAST`VARCHAR`到`DECIMAL`@Scharron 说不需要`ABS`尝试：

```
CREATE FUNCTION `GetUserDistance`(arg_lat VARCHAR (20), arg_lon VARCHAR (20), arg_userLat VARCHAR (20), arg_userLon VARCHAR (20)) RETURNS int(11) NO SQL
BEGIN
    DECLARE distance INT (11);
    DECLARE lat, lon, userLat, userLon DECIMAL(14,4);

    SET lat = CAST(arg_lat AS DECIMAL(14,4));
    SET lon = CAST(arg_lon AS DECIMAL(14,4));
    SET userLat = CAST(arg_userLat AS DECIMAL(14,4));
    SET userLon = CAST(arg_userLon AS DECIMAL(14,4));

    IF ISNULL(lat) OR ISNULL(lon) OR lat = '' OR lon = '' THEN
        RETURN 0;
    ELSE
        SELECT
            3956 * 2 * ASIN(SQRT(POWER(SIN((lat - userLat) * PI() / 180 / 2), 2) + COS(lat * PI() / 180) * COS(ABS(userLat) * PI() / 180) * POWER(SIN((lon - userLon) * PI() / 180 / 2), 2)))
        INTO
            distance;

        RETURN distance;
    END IF;
END 
```

# matlab - Simulink 外部模式和 Arduino Mega 2560

> ID：11774864
> 
> 赞同：1
> 
> 时间：2012-08-02T09:42:28.353
> 
> 标签：matlab, real-time, arduino, target, simulink

我在 MATLAB 2012a 中坚持使用 Simulink Arduino Target。Simulink 可以编译我的模型并将其下载到硬件中。它似乎可以工作，但是当我在模拟中确实有一个范围时，激活外部模式（用于调整我的模型和跟踪值）会导致 Simulink 崩溃（“Segmentation Violation”，但大多数时候它只是挂起而没有任何错误）。如果我在外部模式下断开 USB 电缆，它会以同样的方式崩溃。

我在 Win 7 64 位和 Win XP 上使用 Arduino Mega 2560 R3 硬件、Matlab 2012b。

欢迎任何帮助，matlab 论坛没有给出任何有用的答案（至少到目前为止）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T15:44:13.083

在模拟输入模块中使用与模拟设置窗格中的采样时间不同的采样时间时，我可以重现您在帖子中描述的相同错误。**换句话说，很可能其中一个 Arduino 模块的采样时间与全局采样时间不同**——这是 Arduino 支持包的问题。

通常（在 xPC Target 中）如果采样时间没有意义（非全局倍数或更快），您只会收到一条错误消息，但较慢的倍数不是问题。在这里，我发现输入块需要与全局模型相同的采样才能工作。

（Matlab 2012b，Win 7 x64，Arduino Mega 2560 R3，外部模式）

格格利

# c# - 如何从 Excel 工作簿中打开多张工作表？

> ID：11774866
> 
> 赞同：0
> 
> 时间：2012-08-02T09:42:45.923
> 
> 标签：c#, excel, interop

我正在编写一个程序来用数据填充 Excel 工作簿，但目前我只能访问第一张工作表。

通过这个测试，我无法让 sheet2 和 Sheet3 接收任何数据？

请有人指出我错过了什么？

```
 Excel.Application xlApp;
 Excel.Workbook xlWorkBook;
 Excel.Worksheet[] xlWorkSheet = new Excel.Worksheet[3];
 object misValue = System.Reflection.Missing.Value;

private void Form1_Load(object sender, EventArgs e)
        {

     if (File.Exists("C:/Users/Shaun/Documents/Template.xls"))
                {
                    //Load Templete SpreadSheet
                    xlApp = new Excel.ApplicationClass();
                    xlWorkBook = xlApp.Workbooks.Open("Template.xls", 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
                    xlWorkSheet[0] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
                    xlWorkSheet[1] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
                    xlWorkSheet[2] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
                }
                else
                {
                    MessageBox.Show("Could not find file Template.xls");
                }
            }

 private void button1_Click(object sender, EventArgs e)
        {
          xlWorkSheet[0].Cells[1, 1] = "Sheet1";
          xlWorkSheet[1].Cells[1, 1] = "Sheet2";
          xlWorkSheet[2].Cells[1, 1] = "Sheet3";  

        String Saveas;
        Saveas = Microsoft.VisualBasic.Interaction.InputBox("Save As", "Save As", "");
        xlWorkBook.SaveAs(Saveas + ".xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();
        for (int p = 0; p < 3; p++)
        {
            releaseObject(xlWorkSheet[p]);
        }
        releaseObject(xlWorkBook);
        releaseObject(xlApp);
        MessageBox.Show("File Saved!");    
        }

 private void releaseObject(object obj)
    {
        try
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
            obj = null;
        }
        catch (Exception ex)
        {
            obj = null;
            MessageBox.Show("Unable to release the Object " + ex.ToString());
        }
        finally
        {
            GC.Collect();
        }
    } 
```

* * *

编辑

即使有了这个改变，仍然没有任何事情发生，除了第一张，我不能拿起任何床单。

```
 xlWorkSheet[0] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
 xlWorkSheet[1] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(2);
 xlWorkSheet[2] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(3); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:49:51.147

也许错误在这里：

```
xlWorkSheet[0] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
xlWorkSheet[1] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
xlWorkSheet[2] = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1); 
```

应该是`get_Item(2)`，`get_Item(3)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:10:18.260

希望以下内容有所帮助，因为这是我过去所做的。

```
private Excel.Application _xlApp = new Excel.Application();
private Excel.Workbooks _xlWorkBooks;
private Excel.Workbook _xlWorkBook;
private Excel.Worksheet _xlWorkSheet;

_xlWorkBooks = _xlApp.Workbooks;
_xlWorkBook = _xlWorkBooks.Add(1);

//get a worksheet
_xlWorkSheet = (Excel.Worksheet)_xlWorkBook.Sheets[_xlWorkBook.Worksheets.Count];

//get a range
rng = _xlWorkSheet.get_Range(_xlWorkSheet.Cells[8, 5], _xlWorkSheet.Cells[9, 5]);

//e.g. bold the range
rng.Cells.Font.Bold = true;

//merge the range cells
rng.MergeCells = true;

//set cell data
_xlWorkSheet.Cells[8, 3] = "Text Here"; 
```

# svn - SVN结帐不恢复

> ID：11774868
> 
> 赞同：4
> 
> 时间：2012-08-02T09:42:56.017
> 
> 标签：svn, conflict, resolve, svn-checkout

我们有一些公司中间件，有时很难找到我正在寻找的正确版本，所以我经常不得不更新到不同的版本来测试它们。

我通常结帐：

```
svn co svn+ssh://(username)@(ip)/srv/svn/intranet/trunk/PYTHON/<application> <local-application> 
```

然后我可能会更新到不同的版本

```
svn update (path) -r (rev) 
```

大多数情况下，经过几次尝试，这将导致错误**节点仍然存在冲突**

如果我删除该文件夹并尝试重新结帐，它只会恢复我所拥有的。我想做的只是检查一个修订版，我没有做任何更改，它仍然认为存在冲突。

我试图解决它们，但似乎没有任何效果：

svn更新-r 1586

```
Skipped 'inm/inm' -- Node remains in conflict
D    inm/fabfile.py
D    inm/test.db.bak
D    inm/tests
D    inm/test.db
D    inm/doc
D    inm/test.ini
D    inm/test.sql
U    inm/setup.py
A    inm/inm.egg-info
A    inm/inm.egg-info/SOURCES.txt
A    inm/inm.egg-info/top_level.txt
A    inm/inm.egg-info/PKG-INFO
A    inm/inm.egg-info/entry_points.txt
A    inm/inm.egg-info/dependency_links.txt
A    inm/inm.egg-info/not-zip-safe
A    inm/inm.egg-info/paster_plugins.txt
A    inm/inm.egg-info/requires.txt
U    inm/setup.cfg
Updated to revision 1586.
Killed by signal 15.
Summary of conflicts:
  Skipped paths: 1

svn resolved inm/inm
Resolved conflicted state of 'inm/inm'
(venv)

svn update inm/inm -r 1586
Updating 'inm/inm':
Password: 
Skipped 'inm/inm/templates' -- Node remains in conflict
At revision 1586.
Killed by signal 15.
Summary of conflicts:
  Skipped paths: 1 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T10:24:22.393

我想我在这里寻找的答案是

```
svn revert --depth=infinity inm 
```

我不关心保留本地更改，只更新到新版本。我现在已经用过这个命令几次了，它似乎可以解决问题

**编辑**

再次查看我的错误后，我可以看到很多文件可能已被测试或构建更改。我应该将它们添加到忽略文件中，这样 svn 就不会检测到它们的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:02:22.340

所以：

*   您是仅从 签出和更新`trunk`，还是有时也从分支签出？
*   您在测试时是否运行任何程序？
*   如果你`svn status`在运行更新之前做了 a 怎么办？你有结帐的原始副本吗？

发生冲突的原因有很多。

想象一下，您修改了 Subversion 存储库中的文件，然后更新到早期版本或更高版本。根据您的操作方式，Subversion 可能会尝试合并您所做的和正在检查的内容之间的更改。有时，如果您不从修订的开头进行更新，Subversion 就不会。在这种情况下，Subversion 会报告文件有冲突。

另一个原因是您在工作目录中创建的文件不在您的 Subversion 版本中。当您使用该文件更新 Subversion 的修订版时，Subversion 将报告冲突。

那么，也许你的系统出了点问题。我们现在根本没有足够的信息。

下次执行此操作时，`svn status`请先在工作目录上执行`svn update`. 事实上，这总是一个好主意。这将在您进行更新时警告您与 Subversion 可能发生的任何冲突。

我在 Subversion 中错过了 CVS 拥有的一件事（我也不太想念 CVS）是一个假装执行您的命令的选项。这将允许您在进行实际更新之前假装进行更新并警告您冲突。唉，Subversion 目前没有这样的选项（尽管它已被大量请求）。

# sql-server-2008 - 如何使用脚本找出 sql server 2008 中的碎片整理索引页？

> ID：11774870
> 
> 赞同：0
> 
> 时间：2012-08-02T09:43:02.420
> 
> 标签：sql-server-2008, sql-server-2008-r2

嗨，我正在使用 SQL SERVER 2008 R2，我想知道如何获取特定对象的碎片整理索引页大小，使用脚本在 sql server 2008 r2 中进行索引。有人可以帮我弄到这个吗？谢谢！在高级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:06:54.353

使用此查询：

```
SELECT object_id, index_id, avg_fragmentation_in_percent, page_count
FROM sys.dm_db_index_physical_stats(DB_ID('AdventureWorks'),  OBJECT_ID('HumanResources.Employee'), NULL, NULL, NULL) 
```

# php - 如何编辑xml节点值

> ID：11774872
> 
> 赞同：2
> 
> 时间：2012-08-02T09:43:03.517
> 
> 标签：php, xml, simplexml

我正在使用 Jw player adtonomy 插件编写一个自定义插件以在我的网站中使用，该插件从 XML 文件加载广告。但是我不知道如何更新文件中的节点。我尝试过使用简单的 xml，但我不知道如何更新。任何实施都受到高度重视。谢谢。这是xml文件。

```
<xml>
<plugins>adtimage</plugins>
<adtimage.graphic>http://mysite/default.png</adtimage.graphic>
<adtimage.link>http://targetsite.com</adtimage.link>
<adtimage.positions>pre,post</adtimage.positions>
<adtimage.onpause>true</adtimage.onpause>
<adtimage.txt>Advertisement</adtimage.txt>
<adtimage.btntxt>Click to continue with video</adtimage.btntxt>
</xml> 
```

我的代码在这里。

```
<?php
$xml = simplexml_load_file("test.xml");
echo $xml->getName() . "<br />";
foreach($xml->children() as $child)
{
 echo $child->getName() . ": " . $child . "<br />";

 /*
   TO DO
   change the node value of 
   <adtimage.graphic>http://mysite/default.png</adtimage.graphic>
   to
   <adtimage.graphic>http://stackoverflow.com</adtimage.graphic>
 */
 }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:50:51.840

你可以用这个

```
//Load XML
$xml = simplexml_load_file("test.xml");

// Modify a node
$xml->{"adtimage.graphic"} = 'http://stackoverflow.com/adtimage.graphic';

// Saving the whole modified XML to a new filename
$xml->asXml('updated.xml'); 
```

示例输出**“updated.xml”**

```
<?xml version="1.0"?>
<xml>
<plugins>adtimage</plugins>
<adtimage.graphic>http://stackoverflow.com/adtimage.graphic</adtimage.graphic>
<adtimage.link>http://targetsite.com</adtimage.link>
<adtimage.positions>pre,post</adtimage.positions>
<adtimage.onpause>true</adtimage.onpause>
<adtimage.txt>Advertisement</adtimage.txt>
<adtimage.btntxt>Click to continue with video</adtimage.btntxt>
</xml> 
```

# javascript - 如何使用 CSS 和 Javascript 或 DOJO 制作自定义单选按钮？

> ID：11774875
> 
> 赞同：0
> 
> 时间：2012-08-02T09:43:12.703
> 
> 标签：javascript, css, html, dojo

我的作业目标图像位于：

链接：http: [//i46.tinypic.com/w1uqza.png](http://i46.tinypic.com/w1uqza.png)

我需要添加一个背景渐变一个内圈onclick。我是这方面的初学者，因此任何形式的帮助或指导都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:07:57.123

您可以添加带有背景的新元素，然后单击以更改实际输入的值。

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style type="text/css">
        .refRadio
        {
            height:30px;
            width:35px;
            background-image:url(http://i46.tinypic.com/w1uqza.png);
            background-position:-8px center;
            display:inline-block;
            vertical-align:middle;
        }
        .refRadio.checked
        {
            background-position:76px center;
        }
        input.refRadio
        {
            display:none;
        }
    </style>
</head>
<body>
    <div style=" line-height:40px; " >
        <input type="radio" class="refRadio" name="name" value="Yes" /> Yes 
        <input type="radio" class="refRadio" name="name" value="No" /> No
        <input type="radio" class="refRadio" name="name" value="No" /> No
    </div>
    <script type="text/javascript">
        function setupRadios() {
            var inputs = document.getElementsByTagName("input");
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].className != "refRadio")
                    continue;
                var input = inputs[i];
                var parent = input.parentNode;
                var newInput = document.createElement("span");
                newInput.setAttribute("class", "refRadio");
                newInput.setAttribute("data-value", input.value);
                newInput.input = input;
                input.newInput = newInput;
                input.changed = function () {
                    if(!this.newInput)
                        return;
                    if (this.checked)
                        this.newInput.className = "refRadio checked";
                    else
                        this.newInput.className = "refRadio";
                }
                parent.insertBefore(newInput, input);
                function click() {
                    this.input.checked = true;
                    this.className = "refRadio checked";

                    for (var i = 0; i < inputs.length; i++) {
                        var input = inputs[i];
                        input.changed.apply(input);
                    }
                }
                newInput.onclick = click;
            }
        }
        setupRadios();
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:31:28.747

使用 dijit.form.RadioButton 的收音机 dojo explorer 的开箱即用示例：
[实时示例](http://dojocampus.org/explorer/#Dijit_Form%20Controls_RadioButton_Basic)

```
<p>
  <span>Radio group #1:</span>
  <input dojoType="dijit.form.RadioButton" type="radio" name="g1" id="g1rb1" value="news">
  <label for="g1rb1">news</label>
  <input dojoType="dijit.form.RadioButton" type="radio" name="g1" id="g1rb2" value="talk"
       checked="checked"/>
  <label for="g1rb2">talk</label>
  <input dojoType="dijit.form.RadioButton" type="radio" name="g1" id="g1rb3" value="weather"
       disabled="disabled"/>
  <label for="g1rb3">weather</label>
</p> 
```

收音机的 Nihilo sprites (imagegry) 在[这里](http://dojocampus.org/dojotoolkit/dijit/themes/nihilo/images/spriteRadio.gif)
它正在使用这些选择器进行样式设置：

```
/* standard */
.nihilo .dijitRadio, .nihilo .dijitToggleButton .dijitRadioIcon {
background-position: -16px;
}
/* if checked */
.nihilo .dijitRadioChecked, .nihilo .dijitToggleButtonChecked .dijitRadioIcon {
background-position: 0px;
}
/* if disabled */
.nihilo .dijitRadioDisabled {
background-position: -32px;
}
.nihilo .dijitRadio, .nihilo .dijitRadioIcon {
background-image: url(images/spriteRadio.gif);
background-repeat: no-repeat;
width: 16px;
height: 16px;
margin: 0;
padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T11:22:47.110

你可以使用 jqtransform jquery 来实现它。

[http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/](http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/)

# javascript - 默认情况下，节点 console.log 会截断输出。我怎样才能看到完整的输出？

> ID：11774876
> 
> 赞同：37
> 
> 时间：2012-08-02T09:43:14.910
> 
> 标签：javascript, node.js, logging

默认情况下，Node 的 console.log 似乎会截断输出，例如，查看 API 的输出：

```
{ '@': { xmlns: 'http://ec2.amazonaws.com/doc/2012-03-01/' },
   requestId: '123456',
   reservationSet: 
   { item: 
      { reservationId: 'r-123456',
       ownerId: '123456',
       groupSet: [Object],
       instancesSet: [Object],
       requesterId: '123456' } } } 
```

如您所见，`[object]`没有展开。我想这是一种方便的措施——很多人不希望节点默认喷出数千行。有没有办法告诉它扩展记录项目的内容？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-02T09:58:33.717

没有更改选项`console.log`，但是您可以使用捆绑的 util 库中的函数，[`util.inspect`](http://nodejs.org/docs/v0.4.9/api/util.html#util.inspect)该函数接受深度参数。例如：

```
 console.log(require('util').inspect(obj, true, 10)); // 10 levels deep 
```

# java - 为什么 Java 和 C++ 中的数据类型大小不同？

> ID：11774877
> 
> 赞同：-1
> 
> 时间：2012-08-02T09:43:22.460
> 
> 标签：java, c++, types, primitive-types

例如，Java 中的实数占用 8 个字节，而 C++ 中只占用 4 个字节。同样，对于字符，Java 占用 2 个字节，而 C++ 只占用 1 个字节。为什么它们的大小不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T09:45:33.257

你说的不是真的。C 和 C++ 没有任何固定大小的类型（除了 中指定的类型`stdint.h`）。

如果您没有从该声明中得到答案，这里有一个明确的：

“这是有区别的，因为 Java 包含固定大小的数据类型，而 C 和 C++ 中的所有基本数据类型都取决于程序编译的实际平台（机器架构 + 操作系统）。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T09:53:38.047

首先，虽然 C++ 中类型的实际大小取决于实现（并且有`char`9 位的实现），但在大多数支持这两种语言的平台上，`float`并且`double`在 C++ 和 Java 中具有完全相同的大小。

至于`char`，Java类型`char`或多或少对应 `wchar_t`于C++；从逻辑上讲，在大多数平台上应该是 4 字节，但由于各种历史原因，在 Windows、AIX 和 Java 运行时环境中只有 2 字节。

Java 没有真正等同于 C++`char`类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:47:08.673

c++ 依赖于平台。例如 - int 将是字的大小 - 32 位或 64 位，取决于您的计算机有多新。

java 更通用 - 它在定义大小的 JVM 上运行。与 C# 相同的情况。两者都不取决于您拥有的操作系​​统和 CPU。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T09:47:58.613

C++ 类型的大小*并不是*一成不变的。该标准说（3.9.1 基本类型）：

> 声明为字符 (char) 的对象应足够大以存储实现的基本字符集的任何成员。

在那之后：

> 有五种标准有符号整数类型：“signed char”、“short int”、“int”、“long int”和“long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。
> 
> <...>
> 
> 有三种浮点类型：float、double 和 long double。double 类型提供的精度至少与 float 一样，long double 类型提供的精度至少与 double 一样。

如您所见，没有提到确切的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T09:49:43.377

C 和 C++ 没有为许多类型定义大小，但通常`float`是 4 字节，就像在 Java 中一样，并且`double`是 8 字节，就像在 Java 中一样。C 没有标准的字节类型。

`char`在 C 中是一个字节，但不保证是有符号或无符号的。在 Java 中，它是 2 个字节并保证被签名以支持从 0 到 65535 的字符。

这里的不同之处在于 C 被设计为只需要支持 7 位 ASCII。Java 是在 16 位字符似乎足够时设计的。具有讽刺意味的是，Unicode 不超过 65535，所以 Java 现在也支持代码点以及使用多个`char`s

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T09:52:20.613

> 对于字符，Java 需要 2 个字节，但 C++ 只需要 1 个字节。

因为标准是这么说的。

对于[Java：](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html)

> Java 2 平台在 char 数组以及 String 和 StringBuffer 类中使用 UTF-16 表示。

对于[C++：](http://www.kuzbass.ru:8086/docs/isocpp/expr.html#expr.sizeof)

> sizeof(char)、sizeof(signed char) 和 sizeof(unsigned char) 为 1；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T09:46:35.037

只是设计的语言选择使用不同的默认表示。没有比这更复杂的了。

例如，Java 中的大小`char`是出于使用 16 位 unicode 字符（需要 2 个字节）的愿望。这是一个平衡了许多权衡的设计决策：

*   他们本可以使用 8 位字符（如在 C/C++ 中），但随后大量有用的 unicode 字符不适合单个字符。
*   他们本可以使用 32 位字符在未来允许更多字符（预期[UTF32](http://en.wikipedia.org/wiki/UTF-32)）。但是大部分时间都会浪费很多这些位

请注意，您可以在 Java 中使用 4 字节浮点数 - 它被称为`float`而不是`double`（即 8 字节）

# iphone - MapView 中的 UIView 消失

> ID：11774878
> 
> 赞同：1
> 
> 时间：2012-08-02T09:43:23.813
> 
> 标签：iphone, objective-c, ios, mapkit

我在 ios 中遇到了谷歌地图的问题。我有一个带有 MapView 的屏幕，我正在绘制一些注释（街道上显示区域的多边形）。如果有人点击该区域，则会显示一个按钮，用户可以按下它来开始交易。他必须按住按钮 2 秒，此时会显示一个带有进度条的小视图，以指示用户必须按住它直到结束。这工作正常。但是有时在播放后会出现以下问题：

带有进度条的视图会显示，但在到达结尾之前消失。如果下次尝试一切顺利。这是重要的代码，我认为：

```
- (IBAction)starButtonTouched:(id)sender {
    self.progressLabel.text = [NSLocalizedString(@"Please hold", nil) uppercaseString];
    if (!self.currentVehicle) return;
    self.progressBar.hidden = NO;
    self.progressBarBackground.hidden = NO;
    self.progressBar.progress = 0;
    [self performSelector:@selector(_updateProgress) withObject:nil afterDelay:kVTMainButtonPressDuration/kVTMainProgressSteps];
}

- (IBAction)startButtonReleased:(id)sender {
    NSLog(@"StartButton released - progress bar will be hidden");
    self.progressBar.hidden = YES;
    self.progressBarBackground.hidden = YES;
}

- (void) _updateProgress {

    if (self.progressBar.hidden) return;

   /*
    * update progress bar
    */
   float actual = [self.progressBar progress];
   if (actual < 1) {

       self.progressBar.progress += 1.0/kVTMainProgressSteps;
       [NSTimer scheduledTimerWithTimeInterval:kVTMainButtonPressDuration/kVTMainProgressSteps target:self 
                                   selector:@selector(_updateProgress) userInfo:nil repeats:NO];

   /*
    * if it has ended start the transaction
    */
   } else {

       ASLogInfo(@"Starting");
       if (!self.currentVehicle) return;

       [self.service startParking:self.currentVehicle zone:self.selectedZone callback:^(VTTransaction *transaction) {
        [self loadCurrentTransaction];
       }];

   }

} 
```

有谁知道是什么以及为什么导致视图消失？非常感谢。

再见，菲利普

# php - PHP JSON 响应规范化

> ID：11774879
> 
> 赞同：0
> 
> 时间：2012-08-02T09:43:29.957
> 
> 标签：php, json

我有 JSON 响应。几乎所有内容都是正确的，但有些值需要“添加斜杠”才能解码而不会出错。

**http://jsonformatter.curiousconcept.com/** servise 表示以下内容无效：

"admiAmn":"DEEE\trtrtrtrtr"，我同意 jsonformatter。

如果我使用addslashes，斜线将被添加到任何地方，我只需要替换以下内容：

[NOT_SLASH]\[NOT_SLASH]

和：

[NOT_SLASH]\\[NOT_SLASH]

我既不能 str_replace 也不能添加斜杠，我必须确保被替换的 '\' 前后没有任何 '\'。

谢谢。我想听听你的想法和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:01:21.563

您可以使用`preg_replace`这样的技巧：

```
$in = '"admiAmn":"DEEE\trtrtrtrtr\\alma"';
$slash = preg_quote('\\');
echo preg_replace("#(?<!{$slash}){$slash}(?!{$slash})#", $slash.$slash, $in), "\n"; 
```

我已将转义符移至`\`变量以使其更具可读性。该模式使用负面的[后向](http://www.regular-expressions.info/lookaround.html#lookbehind)和[前瞻](http://www.regular-expressions.info/lookaround.html#lookahead)功能来完成这项工作。

但是，如果可以，您应该尝试修复源而不是修补输出（至少提交某种错误报告），修补输出可能非常脆弱。

# asp.net - 在 IIS URL 重写 2 中重新处理重写的 url 时出错

> ID：11774880
> 
> 赞同：4
> 
> 时间：2012-08-02T09:43:36.757
> 
> 标签：asp.net, asp.net-mvc-3, iis-7, url-rewriting

我正在尝试创建一个系统来使用 MVC3 和 IIS URL Rewrite 2 从 GridFS 提供图像及其调整大小的版本。经过测试，我意识到直接从文件系统提供图像比使用 GridFS 文件流提供图像快 10 倍。然后我决定将原始文件保留在 GridFS 中，并使用 Url Rewrite 2 和 Asp.Net 处理程序的组合在服务器本地文件系统上创建原始文件的副本和调整大小的版本。

以下是我用于提供原始版本和调整大小版本的重写规则：

```
<rule name="Serve Resized Image" stopProcessing="true">
  <match url="images/([a-z]+)/[a-f0-9]+/[a-f0-9]+/[a-f0-9]+/([a-f0-9]+)-([a-f0-9]+)-([a-f0-9]+)-([0-9]+)\.(.+)" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
  <action type="Rewrite" url="/Handlers/ImageResizer.ashx?Uri={REQUEST_URI}&amp;Type={R:1}&amp;Id={R:2}&amp;Width={R:3}&amp;Height={R:4}&amp;ResizeType={R:5}&amp;Extension={R:6}" appendQueryString="false" logRewrittenUrl="true" />
</rule>
<rule name="Serve Original Image" stopProcessing="true">
  <match url="images/([a-z]+)/[a-f0-9]+/[a-f0-9]+/[a-f0-9]+/([a-f0-9]+)\.(.+)" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
  <action type="Rewrite" url="/Handlers/Images.ashx?Uri={REQUEST_URI}&amp;Type={R:1}&amp;Id={R:2}&amp;Extension={R:3}" appendQueryString="false" logRewrittenUrl="true" />
</rule> 
```

如您所见，重写引擎检查文件是否存在于文件系统上，如果不存在。重写 url 并将请求发送到处理程序。处理程序为流提供服务并将文件写入文件系统。在下一个请求中，文件直接从文件系统提供。我通过拆分文件的 24 个字符 ID（MongoDB 对象 ID 作为字符串）将文件分隔到文件夹中，以避免同一文件夹中出现数十万张图像。

这是一个示例原始图像请求：

`http://localhost/images/test/50115c53/1f37e409/4c7ab27d/50115c531f37e4094c7ab27d.jpg`

这个和调整大小的版本没有任何问题。

由于这个 URL 太长并且有重复，我决定再次使用重写引擎来缩短 URL 以自动生成文件夹名称。这是我放在顶部的规则：

```
<rule name="Short Path for Images">
  <match url="images/([a-z]+)/([a-f0-9]{8})([a-f0-9]{8})([a-f0-9]{8})(.+)" />
  <action type="Rewrite" url="images/{R:1}/{R:2}/{R:3}/{R:4}/{R:2}{R:3}{R:4}{R:5}" appendQueryString="false" logRewrittenUrl="true"></action>
</rule> 
```

当我使用此规则请求图像时，例如使用以下 URL：

`http://localhost/images/test/50115c531f37e4094c7ab27d.jpg`

如果图像已经在文件系统上，它只会提供图像，否则我会收到以下错误：

> HTTP 错误 500.50 - URL 重写模块错误。由于发生内部服务器错误，无法显示该页面。

我已经检查了请求的 IIS 日志文件条目。它不显示任何细节，除了：

`2012-08-02 14:44:51 127.0.0.1 GET /images/test/50115c531f37e4094c7ab27d.jpg - 80 - 127.0.0.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.1+(KHTML,+like+Gecko)+Chrome/21.0.1180.60+Safari/537.1 500 50 161 37`

另一方面，成功的请求会记录重写的 URL，如下所示：

`GET /Handlers/ImageResizer.ashx Uri=/images/test/50115c53/1f37e409/4c7ab27d/50115c531f37e4094c7ab27d-1f4-1f4-2.jpg&Type=test&Id=50115c531f37e4094c7ab27d&Width=1f4&Height=1f4&ResizeType=2&Extension=jpg`

Elmah 和 EventLog 也没有显示任何内容。在我的控制器方法的顶部添加了一个文件系统记录器，它不会记录这些特别有问题的请求。

任何人都可以建议一种解决方法来让它工作吗？

编辑：在[RuslanY](https://stackoverflow.com/users/186762/ruslany)关于[Failed Request Tracing](http://learn.iis.net/page.aspx/467/using-failed-request-tracing-to-trace-rewrite-rules/)的建议之后，我设法确定了错误：

```
ModuleName: RewriteModule 
Notification: 1 
HttpStatus: 500 
HttpReason: URL Rewrite Module Error. 
HttpSubStatus: 50 
ErrorCode: 2147942561 
ConfigExceptionInfo: 
Notification: BEGIN_REQUEST
ErrorCode: The specified path is invalid. (0x800700a1) 
```

可以在[此处](http://www.kurbaga.com/fr000002.xml)查看整个跟踪结果（仅限 IE）

不幸的是，这仍然没有让我找到解决方案，因为当文件系统上存在文件时，第二条规则（因此缩短规则）正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:00:47.103

作为使用 UrlRewrite 执行此检查的替代方法，为什么不使用基于磁盘的缓存的应用程序请求路由。将生成动态图像，ARR 的缓存基础设施会将生成的图像保存到磁盘。更少的混乱，我在生产场景中使用 ARR 取得了巨大的成功。磁盘缓存在 IIS 重新启动之间持续存在，并且可以按照您的说法存在（默认是使用响应中的缓存信息，但您可以将其覆盖更长）。

[应用请求路由](http://www.iis.net/download/ApplicationRequestRouting)

# javascript - 更改 iphone/ipad 保存缩放功能的字体大小

> ID：11774881
> 
> 赞同：0
> 
> 时间：2012-08-02T09:43:44.013
> 
> 标签：javascript, ios, uiwebview

我有加载 html 页面的 UIWebView 对象。Html-page 通过 js 具有缩放功能。

```
function setViewPortWidth(width) {
var metatags = document.getElementsByTagName('meta');
for(cnt = 0; cnt < metatags.length; cnt++) { 
var element = metatags[cnt];
if(element.getAttribute('name') == 'viewport') {
element.setAttribute('content','width = '+width+'; minimum-scale = 0.1; 
maximum-scale = 1.7%; user-scalable = yes');
document.body.style['max-width'] = '10px'+width;
  }
 }
} 
```

如果我的应用在 iPhone 上运行，我需要减小字体大小。如何通过保存缩放功能做到这一点？如果我通过 css @media 查询做到这一点

```
@media screen and (min-width : 480px) {
    body { font-size: 25pt; }
} 
```

字体看起来很棒，但是当我放大和缩小时，它会比需要的 25pt 大。

* * *

**通过使用标准缩放功能而不是 js 缩放**解决了问题。****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:46:36.450

1 px ≠ 1 像素 CSS 像素不是设备像素

去看看这个教程它对你有帮助

[http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_602__delivering_web_content_on_high_resolution_displays.pdf](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_602__delivering_web_content_on_high_resolution_displays.pdf)**

# android - Android 如何拨打拨号盘中包含“#”或“p”的电话？

> ID：11774884
> 
> 赞同：14
> 
> 时间：2012-08-02T09:43:46.640
> 
> 标签：android

我需要在拨号盘中包含“#”或“p”的 Android 应用程序中拨打电话。

如果我使用下一个代码：

```
Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:629941945#22412"));
    startActivity(intent); 
```

它在**没有 # 和 22412 的情况下拨打号码 629941945**。

如果我使用下一个代码：

```
Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:629941945p22412"));
    startActivity(intent); 
```

它在没有**“p”的情况下拨打电话：62994194522412。**

有一个表格可以解决吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T08:40:34.800

```
Intent shortcutIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+Uri.encode("*111*2#")));
startActivity(shortcutIntent); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T04:33:15.197

尝试`tel:629941945%2322412`代替`tel:629941945#22412`

`%23`将被替换为`#`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T10:04:02.223

尝试使用其他符号暂停。查看[http://androidforums.com/android-applications/6733-how-do-i-dial-extension.html](http://androidforums.com/android-applications/6733-how-do-i-dial-extension.html)或[http://code.google.com/p/android/issues/detail?id=7514](http://code.google.com/p/android/issues/detail?id=7514) 但是！正如我所见，这不是一种解决方案，这取决于手机型号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T10:21:17.980

> 有些手机没有“p”字符，而是“,”（逗号），某处是“T”，如果您的手机没有这些花哨的字符，请尝试“*”或“#”。希望其中一个角色可以工作。请注意，在某些手机上，字母区分大小写，因此 P 无法使用。
> 
> *   [http://rekrowten.wordpress.com/2011/08/29/special-characters-in-telephone-number/](http://rekrowten.wordpress.com/2011/08/29/special-characters-in-telephone-number/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T19:37:11.040

tel URI 规范不支持暂停。

[http://www.ietf.org/rfc/rfc3966.txt](http://www.ietf.org/rfc/rfc3966.txt)

如另一个答案所述，`%23`可用于替代`#`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T10:08:04.000

您不能使用 URI 解析此类特殊数字，因为它们不符合 tel: 标准。（http://www.ietf.org/rfc/rfc3966.txt 第 6 页）您可能想要使用[ACTION_DIAL](http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL)并让用户可以自己输入号码。也许电话会将此解释为暂停信号 p 的目的。要发送此类暂停信号，请查看 Alex Klimashevsky 的回答。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T10:10:07.650

尝试使用“，”（逗号）而不是 p。不知道“#”虽然，对不起。

# python - Python编写带有行和列转置的.csv文件

> ID：11774886
> 
> 赞同：1
> 
> 时间：2012-08-02T09:43:52.843
> 
> 标签：python, python-2.7

我所拥有的是一长串代码，其中涉及读取不同的文件并最终将所有内容放入不同的 .csv

这是我所有的代码

```
import csv
import os.path
#open files + readlines
with open("C:/Users/Ivan Wong/Desktop/Placement/Lists of targets/Mouse/UCSC to Ensembl.csv", "r") as f:
    reader = csv.reader(f, delimiter = ',')
    #find files with the name in 1st row
    for row in reader:
        graph_filename = os.path.join("C:/Python27/Scripts/My scripts/Selenoprotein/NMD targets",row[0]+"_nt_counts.txt.png")
        if os.path.exists(graph_filename):
            y = row[0]+'_nt_counts.txt'  
            r = open('C:/Users/Ivan Wong/Desktop/Placement/fp_mesc_nochx/'+y, 'r')
            k = r.readlines()
            r.close
            del k[:1]
            k = map(lambda s: s.strip(), k)
            interger = map(int, k)   
            import itertools
            #adding the numbers for every 3 rows
            def grouper(n, iterable, fillvalue=None):
                "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
                args = [iter(iterable)] * n
                return itertools.izip_longest(*args, fillvalue=fillvalue)
            result = map(sum, grouper(3, interger, 0))       
            e = row[1]
            cDNA = open('C:/Users/Ivan Wong/Desktop/Placement/Downloaded seq/Mouse/cDNA.txt', 'r')
            seq = cDNA.readlines()
            # get all lines that have a gene name
            lineNum = 0;
            lineGenes = []
            for line in seq:
                lineNum = lineNum +1
                if '>' in line:
                    lineGenes.append(str(lineNum))
                if '>'+e in line:
                    lineBegin = lineNum

            cDNA.close

            # which gene is this
            index1 = lineGenes.index(str(lineBegin))
            lineEnd = lineGenes[index1+1]           
# linebegin and lineEnd now give you, where to look for your sequence, all that 
# you have to do is to read the lines between lineBegin and lineEnd in the file
# and make it into a single string.            
            lineEnd = lineGenes[index1+1]
            Lastline = int(lineEnd) -1

# in your code you have already made a list with all the lines (q), first delete
# \n and other symbols, then combine all lines into a big string of nucleotides (like this)     
            qq = seq[lineBegin:Lastline]
            qq = map(lambda s: s.strip(), qq)
            string  = ''
            for i in range(len(qq)):
                string = string + qq[i]
# now you want to get a list of triplets, again you can use the for loop:
# first get the length of the string
            lenString = len(string);
# this is your list codons
            listCodon = []
            for i in range(0,lenString/3): 
                listCodon.append(string[0+i*3:3+i*3])
            with open(e+'.csv','wb') as outfile:
                outfile.writelines(str(result)+'\n'+str(listCodon)) 
```

我的问题是生成的文件如下所示：

```
 0      0      0        
'GCA'  'CTT'   'GGT' 
```

我想让它像这样：

```
0  GCA    
0  CTT    
0  GGT 
```

我可以在我的代码中做些什么来实现这一点？

打印结果：

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 1, 2, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 3, 3, 0, 3, 1, 2, 1, 2, 1, 0, 1, 0, 1, 2, 1, 0, 5, 0, 0, 0, 0, 6, 0, 1, 0, 0, 2, 0, 1, 0, 0, 1, 1, 0, 1, 6, 34, 35, 32, 1, 1, 0, 4, 1, 0, 1, 0, 0, 0, 0, 1, 6, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

打印列表密码子：

```
['gtt', 'gaa', 'aca', 'gag', 'aca', 'tgt', 'tct', 'gga', 'gat', 'gag', 'ctg', 'tgg', 'gca', 'gaa', 'gga', 'cag', 'gcc', 'taa', 'gca', 'cag', 'gca', 'gca', 'gag', 'ctt', 'tga', 'tct', 'ctt', 'ggt', 'gat', 'cgg', 'tgg', 'ggg', 'atc', 'cgg', 'tgg', 'cct', 'agc', 'ttg', 'tgc', 'caa', 'gga', 'agc', 'tgc', 'tca', 'gct', 'ggg', 'aaa', 'gaa', 'ggt', 'ggc', 'tgt', 'ggc', 'tga', 'cta', 'tgt', 'gga', 'acc', 'ttc', 'tcc', 'ccg', 'agg', 'cac', 'caa', 'gtg', 'ggg', 'cct', 'tgg', 'tgg', 'cac', 'ctg', 'tgt', 'caa', 'cgt', 'ggg', 'ttg', 'cat', 'acc', 'caa', 'gaa', 'gct', 'gat', 'gca', 'tca', 'ggc', 'tgc', 'act', 'gct', 'ggg', 'ggg', 'cat', 'gat', 'cag', 'aga', 'tgc', 'tca', 'cca', 'cta', 'tgg', 'ctg', 'gga', 'ggt', 'ggc', 'cca', 'gcc', 'tgt', 'cca', 'aca', 'caa', 'ctg', 'gtg', 'aga', 'gag', 'aag', 'ccc', 'ttg', 'ccc', 'tct', 'gca', 'ggt', 'ccc', 'att', 'gaa', 'agg', 'aga', 'ggt', 'ttg', 'ctc', 'tct', 'gcc', 'act', 'cat', 'ctg', 'taa', 'ccg', 'tga', 'gct', 'ttt', 'cca', 'ccc', 'ggc', 'ctc', 'ctc', 'ttt', 'gat', 'ccc', 'aga', 'ata', 'atg', 'act', 'ctg', 'aga', 'ctt', 'ctt', 'atg', 'tat', 'gaa', 'taa', 'atg', 'cct', 'ggg', 'cca', 'aaa', 'acc'] 
```

![这就是 Marek 的代码帮助我实现的](../Images/a1bea41596322c27b428156110ef6676.png) ![这是我所希望的](../Images/2297b12f94be490e2dc71c77145996dc.png)

左边的图片是 Marek 的代码帮助我实现的，我想做出改进，所以它像右边的图片一样排列

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:34:24.177

您可以使用`zip()`将两个迭代器压缩在一起。所以如果你有

```
result = [0, 0, 0, 0, 0]
listCodons = ['gtt', 'gaa', 'aca', 'gag', 'aca'] 
```

那么你可以做

```
>>> list(zip(result, listCodons))
[(0, 'gtt'), (0, 'gaa'), (0, 'aca'), (0, 'gag'), (0, 'aca')] 
```

或者，对于您的示例：

```
with open(e+'.csv','w') as outfile:
    out = csv.writer(outfile)
    out.writerows(zip(result, listCodons)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:59:37.490

试试这个：

```
proper_result = '\n'.join([ '%s %s' % (nr, codon)  for nr, codon  in zip(result, listCodon) ] ) 
```

**编辑（密码子分成不同的列）：**

```
proper_result = '\n'.join(' '.join([str(nr),] + list(codon))  for nr, codon  in zip(nrs, cdns)) 
```

**编辑（逗号分隔值）：**

```
proper_result = '\n'.join('%s, %s' % (nr, codon) for nr, codon in zip(result, listCodon)) 
```

# mongodb - 如何在一个命令中停止 mongo DB

> ID：11774887
> 
> 赞同：177
> 
> 时间：2012-08-02T09:43:55.203
> 
> 标签：mongodb

我需要能够在 cli 上启动/停止 MongoDB。开始很简单：

> ./mongod

但是要停止 mongo DB，我需要先运行 open mongo shell，然后键入两个命令：

> $ ./mongo
> 
> 使用管理员
> 
> db.shutdownServer()

所以我不知道如何在一行中停止 mongo DB。有什么帮助吗？

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-08-02T11:45:32.277

[MongoDB 手册中介绍了启动和停止 MongoDB](http://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/)。它解释了通过 shell、cli、驱动程序等停止 MongoDB 的各种选项。它还详细说明了错误停止 MongoDB 的风险（例如数据损坏）并讨论了不同的终止信号。

[此外，如果您使用Ubuntu](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)或[Debian](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/)的包管理器安装了 MongoDB，那么您可以停止 mongodb（当前是 ubuntu 中的 mongod），如下所示：

*   暴发户：`sudo service mongod stop`

*   系统：`sudo /etc/init.d/mongod stop`

或者在[Mac OS X上](https://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)

*   使用查找 mongod 进程的 PID`$ top`

*   `$ kill <PID>`通过（[Mongo 文档对此有更多信息](https://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/#use-kill)）终止进程

或者在基于[Red Hat](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/)的系统上：

*   `service mongod stop`

或者在[Windows](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#mongodb-as-a-windows-service)上，如果您已安装为名为的服务`MongoDB`：

*   `net stop MongoDB`

如果没有作为服务安装（从 Windows 7+ 开始），您可以运行：

*   `taskkill /f /im mongod.exe`

要了解有关非正常关机问题的更多信息、如何最好地避免这种情况以及在非正常关机的情况下如何处理，请参阅：[意外关机后恢复数据](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/)。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-08-02T12:10:25.477

如果您确实想要与原始问题中的命令等效的一行，则可以使用别名：

`mongo --eval "db.getSiblingDB('admin').shutdownServer()"`

Mark 关于通过服务启动和停止 MongoDB 的回答是更典型（也是推荐的）管理方法。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2014-03-16T13:56:11.737

`mongod --dbpath /path/to/your/db --shutdown`

更多官方信息： http: [//docs.mongodb.org/manual/tutorial/manage-mongodb-processes/](http://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/)

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2014-02-20T13:26:14.353

如果服务器在终端中作为前台进程运行，可以通过按

```
Ctrl-C 
```

另一种彻底关闭正在运行的服务器的方法是使用 shutdown 命令，

```
> use admin
> db.shutdownServer(); 
```

否则，可以使用 kill 之类的命令来发送信号。如果 mongod 的 PID 为 10014，则命令为

```
kill -2 10014 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2017-11-21T19:13:23.673

我遵循了官方[MongoDB 文档](https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/#stop-mongod-processes)来停止使用信号。可以使用以下命令之一（PID 表示`Process ID`进程的`mongod`）：

```
kill PID 
```

发送信号 15 (SIGTERM)，或

```
kill -2 PID 
```

它发送信号 2 (SIGINT)。

> **[来自MongoDB 文档](https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/#stop-mongod-processes)的警告：
> 永远不要使用`kill -9`（即 SIGKILL）来终止`mongod`实例。**

如果您有多个实例正在运行或者您不关心 PID，则可以使用`pkill`将信号发送到所有正在运行的`mongod`进程：

```
pkill mongod 
```

或者

```
pkill -2 mongod 
```

或者，更安全的是，只对属于您的进程：

```
pkill -U $USER mongod 
```

或者

```
pkill -2 -U $USER mongod 
```

注意：如果数据库以其他用户身份运行，但您具有管理权限，则您已使用 , 调用上述命令`sudo`以运行它们。例如：

```
sudo pkill mongod
sudo pkill -2 mongod 
```

PS
注意：我使用了这个选项，因为`mongod --shutdown`虽然在当前的[MongoDB 文档](https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/#stop-mongod-processes)中提到了，但奇怪的是在我的机器上不起作用（macOS，mongodb v3.4.10，安装了`homebrew`）：
`Error parsing command line: unrecognised option '--shutdown'`

PPS
（特定于 macOS）在任何人怀疑之前：不，我无法使用命令停止它，
`brew services stop mongodb`
因为我没有使用
`brew services start mongodb`.
我从`mongod`自定义命令行开始:-)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-08-03T08:26:58.560

采用`mongod --shutdown`

根据官方文档：[manage-mongodb-processes/](https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/)

:D

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-11-17T16:15:32.880

创建一个名为 mongostop.bat 的文件

将以下代码保存在其中

```
 mongo admin --eval "db.shutdownServer()" 
```

运行文件 mongostop.bat ，你成功地停止了 mongo

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2019-03-06T08:00:17.187

我的特殊情况是：

以前通过以下方式启动 mongod：

```
sudo -u mongod mongod -f /etc/mongod.conf 
```

现在，想停下来`mongod`。

并参考官方文档[Stop mongod Processes](https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/#stop-mongod-processes)，尝试过：

(1)`shutdownServer`但失败了：

```
> use admin
switched to db admin
> db.shutdownServer()
2019-03-06T14:13:15.334+0800 E QUERY    [thread1] Error: shutdownServer failed: {
        "ok" : 0,
        "errmsg" : "shutdown must run from localhost when running db without auth",
        "code" : 13
} :
_getErrorWithCode@src/mongo/shell/utils.js:25:13
DB.prototype.shutdownServer@src/mongo/shell/db.js:302:1
@(shell):1:1 
```

(2)`--shutdown`仍然失败：

```
# mongod --shutdown
There doesn't seem to be a server running with dbpath: /data/db 
```

(3) 之前的启动命令添加--shutdown：

```
sudo -u mongod mongod -f /etc/mongod.conf --shutdown
killing process with pid: 30213
failed to kill process: errno:1 Operation not permitted 
```

(4) 使用`service`停止：

```
service mongod stop 
```

和

```
service mongod status 
```

显示预期`Active: inactive (dead)`但`mongod`实际上**仍在**运行，因为可以从 ps 中看到进程：

```
# ps -edaf | grep mongo | grep -v grep
root     30213     1  0 Feb04 ?        03:33:22 mongod --port PORT --dbpath=/var/lib/mongo 
```

最后，真正停止**mongod**：

```
# sudo mongod -f /etc/mongod.conf --shutdown
killing process with pid: 30213 
```

直到现在，根本原因：仍然未知......

希望以上解决方案对您有用。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-04-16T13:55:48.877

一个使用命令行启动或停止 mongodb 服务的衬垫；

1.  要启动服务使用：`NET START MONGODB`
2.  要停止服务使用：`NET STOP MONGODB`

我自己用这个，它确实有效。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-01-09T22:13:03.433

基于 stennie 的回答：

```
mongo --eval "db.getSiblingDB('admin').shutdownServer();quit()" 
```

我发现 mongo 在服务器关闭后试图重新连接到数据库，这会导致延迟和错误消息。在关机后添加 quit() 可以加快速度并减少消息，但仍然存在。

我还想添加上下文 - 我正在启动和停止 mongod 作为其他代码测试用例的一部分，因此注册为服务不适合用例。我希望最终得到可以在所有平台上运行的东西（现在在 Windows 中进行了测试）。我正在使用 mongod 3.6.9

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-09-14T19:45:33.803

根据给定的命令，我认为您使用的是 Linux。

**启动 MongoDB：**

```
$ sudo service mongod start
mongod start/running, process XXXXX 
```

**检查状态：**

```
$ sudo service mongod status
mongod start/running, process XXXXX 
```

**停止 MongoDB：**

```
$ sudo service mongod stop
mongod stop/waiting 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-05-31T15:38:07.937

使用自制软件（推荐方式）：

开始：

**`brew services start mongodb-community`**

停止：

**`brew services stop mongodb-community`**

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-12-25T18:42:04.470

我只是做了：

`quit();`

请注意我使用的是 mongo 3.0。

[蒙哥](https://docs.mongodb.org/v3.0/reference/method/quit/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-03-23T13:55:09.393

在 Mac 的终端窗口中，按 control+c

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-08-02T09:51:12.350

我在 Ubuntu 上使用这个启动脚本。

```
#!/bin/sh

### BEGIN INIT INFO
# Provides:     mongodb
# Required-Sart:
# Required-Stop:
# Default-Start:        2 3 4 5
# Default-Stop:         0 1 6
# Short-Description: mongodb
# Description: mongo db server
### END INIT INFO

. /lib/lsb/init-functions

PROGRAM=/opt/mongo/bin/mongod
MONGOPID=`ps -ef | grep 'mongod' | grep -v grep | awk '{print $2}'`

test -x $PROGRAM || exit 0

case "$1" in
  start)
     log_begin_msg "Starting MongoDB server"
         ulimit -v unlimited.
         ulimit -n 100000
     /opt/mongo/bin/mongod --fork --quiet --dbpath /data/db --bind_ip 127.0.0.1 --rest   --config /etc/mongod.conf.
     log_end_msg 0
     ;;
  stop)
     log_begin_msg "Stopping MongoDB server"
     if [ ! -z "$MONGOPID" ]; then
kill -15 $MONGOPID
     fi
     log_end_msg 0
     ;;
  status)
     ;;
  *)
     log_success_msg "Usage: /etc/init.d/mongodb {start|stop|status}"
     exit 1
esac

exit 0 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-10-20T13:57:15.230

### 视窗

在 PowerShell 中，它是：`Stop-Service MongoDB`

然后重新开始：`Start-Service MongoDB`

要验证它是否已启动，请运行：`net start | findstr MongoDB`。

^(注意：以上假设[MongoDB 已注册为服务](https://stackoverflow.com/q/2438055/55075)。)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-16T15:14:18.530

请利用您的操作系统提供的**任务管理器**来获得快速简便的解决方案。下面是 Windows 10 的屏幕截图。右键单击突出显示的进程并选择*stop*。如果已经停止，请选择*start 。*

[![在此处输入图像描述](../Images/5ee7870ce29e092d479863b9e5066a3e.png)](https://i.stack.imgur.com/RWS8A.png)

请注意：*在内部，命令执行的操作与您必须使用 Windows/您的操作系统提供的 GUI（任务管理器）手动执行的操作相同。不过，这种方法可用于学习/练习目的，您不会因此而被阻止。*

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-06T13:04:44.267

启动 **sudo /etc/init.d/mongodb start**

停止 **sudo /etc/init.d/mongodb stop**

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2018-02-14T15:46:23.603

CTRL + C

在 Windows 命令行上

# sql - Linq to sql 如何从列表中选择元素

> ID：11774890
> 
> 赞同：0
> 
> 时间：2012-08-02T09:44:06.803
> 
> 标签：sql, linq-to-sql

我有两节课：

```
public class Artikel
{
   int id{get;set;};
   string name{get;set;};
}    

public class NewArtikel
{
    int id{get;set;};
    List<Artikel> artikels{get;set;};
} 
```

现在，我有一个二等舱的名单

```
List<NewArtikel> myList = new List<NewArtikel>() 
```

LINQ to SQL 中是否有任何可能性从 myList 中选择所需的 Artikel.name 的所有元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:52:58.313

是的

```
var allRequiredArtikels = myList.SelectMany(n => n.artikels)
    .Where(a => a.name == "requiredName"); 
```

将所有元素中的[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)所有`Artikel`s展平，然后通过过滤它们。`NewArtikel`[`Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)`name`

* * *

好的，如果您想要具有所需名称的`NewArtikel`s ，您可以这样做。`Artikel`

```
var newArtikels = myList.Where(n => n.artikels
    .Any(a => a.name == "requiredName")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T10:29:26.093

```
List<NewArtikel> myFinalList = (from artikel in myList.artikels where artikel.name =   "requiredName"
select new NewArtikel(){
Id= artikel.Id

}).ToList(); 
```

# android - 操作栏和更改图标

> ID：11774897
> 
> 赞同：1
> 
> 时间：2012-08-02T09:44:19.163
> 
> 标签：android, android-layout

我在我的应用程序中使用 sdk 目标 3.0 的操作栏。这可以从左侧更改图标吗？这是默认图标。我想在代码中的每个活动中更改此图标。在 android 4.0 我们有 getActionBar().setIcon。但是我如何在 3.0 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:41:14.240

试试这个代码

```
 ActionBar actionbar = getActionBar();
    actionbar.setLogo(Drawable logo); 
```

# linux - vim 脚本，如果 vim 版本 < 7.3

> ID：11774904
> 
> 赞同：33
> 
> 时间：2012-08-02T09:44:27.607
> 
> 标签：linux, vim, vim-plugin

我在周围找了好一阵子。

我想在 vim 插件文件中添加一行，如果在不受支持的 vim 版本上运行，它将禁用它。

我记得在某个地方它是这样的：

```
if version > 730
    "plugin code goes here
endif 
```

但那失败了。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-02T09:54:52.490

版本控制方案不同；Vim 7.3 是`703`，不是`730`。

另外，为了清楚起见，我建议使用`v:version`（这是一个特殊的 Vim 变量）。

通常，检查功能的可用性（例如`exists('+relativenumber')`）比测试引入该功能的 Vim 版本更好，因为 Vim 可以使用不同的功能进行自定义编译。

最后，插件通常以相反的方式进行保护：

```
if v:version < 703
    finish
endif
" Plugin goes here. 
```

将它与包含保护结合起来是一个很好的做法。这允许个人用户禁用（系统范围）安装的插件：

```
" Avoid installing twice or when in unsupported Vim version.
if exists('g:loaded_pluginname') || (v:version < 700)
    finish
endif
let g:loaded_pluginname = 1 
```

# html - Joomla 主要内容不显示

> ID：11774912
> 
> 赞同：1
> 
> 时间：2012-08-02T09:44:48.860
> 
> 标签：html, joomla2.5, joomla-template

在过去的几天里，我使用 joomla 建立了一个网站。ATM 我正在​​链接菜单、文章和模块。在模板中，内容位置使用以下标记：

```
<jdoc:include type="component" /> 
```

这是应该呈现文章的地方。单击菜单项类型：单篇文章时，在主站点的组件区域中没有呈现任何内容。在“组件”位置显示文章的唯一可能性是使用菜单类型：特色文章。
如何在不使用特色文章的情况下获取组件位置显示的内容？

有人知道这个问题吗？

编辑：这是 index.php 的内容：这是 index.php 的全部内容：

```
<!--<?php
    defined("_JEXEC") or die("Restricted Access");
    JHTML::_("behavior.framework", true);
    $app = JFactory::getApplication();
    $pathtotemplate = $this->baseurl."/templates/".$this->template;
?>-->
<!DOCTYPE html>
<html>
    <head>
        <jdoc:include type="head" />
        <meta http-equiv='content-type' content='text/html; charset=UTF-8'>
        <meta charset='utf-8'>
        <link rel="icon" href="<?php echo $pathtotemplate ?>/favicon.ico" type="image/x-icon">
        <!-- own Javascripts -->
        <script type="text/javascript" src="<?php echo $pathtotemplate ?>/js/custom.js"></script>
        <!-- Google Analytics -->
        <script type="text/javascript" src="<?php echo $pathtotemplate ?>/js/google.js"></script>
        <!-- system CSS Files -->
        <link rel='stylesheet' href="<?php echo $this->baseurl ?>/templates/system/css/system.css" type="text/css" />
        <link rel='stylesheet' href="<?php echo $this->baseurl ?>/templates/system/css/general.css" type="text/css" />
        <!-- own CSS Files -->
        <link rel='stylesheet' href="<?php echo $pathtotemplate ?>/css/template.css" type="text/css" />

        <!-- delete this file after developement -->
        <link rel='stylesheet' type='text/css' href='css/template.css' />
    </head>
    <body>
        <div id="site">
            <header>
                <div id='placeholder'>&nbsp;</div>
                <div id='logo'>
                    <a href="<?php echo $this->baseurl ?>/" accesskey="h" tabindex="1">
                        <img src="<?php echo $pathtotemplate ?>/images/logo.png" width="178" height="260" name="Logo" alt="Logo von sattler energie consulting" />
                    </a>
                </div>
                <div id='headmenu'>
                    <div id='checken'>
                        <div class="headmenu">
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_blank.png" />
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_01.png" />
                            <div><jdoc:include type="modules" name="checken" /></div>
                        </div>
                    </div>
                    <div id='optimieren'>
                        <div class="headmenu">
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_blank.png" />
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_02.png" />
                            <div><jdoc:include type="modules" name="optimieren" /></div>
                        </div>
                    </div>
                    <div id='erhalten'>
                        <div class="headmenu">
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_blank.png" />
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_03.png" />
                            <div><jdoc:include type="modules" name="erhalten" /></div>
                        </div>
                    </div>
                    <div id='leben'>
                        <div class="headmenu">
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_blank.png" />
                            <img src="<?php echo $pathtotemplate ?>/images/headmenu/rund/headmenu_rund_04.png" />
                            <div><jdoc:include type="modules" name="leben" /></div>
                        </div>
                    </div>
                </div>
                <div id='subhead' class="border-radius"><h1><jdoc:include type="modules" name="subhead" /></h1></div>
            </header>
            <div id='content'>
                <div id='leftmenu'><jdoc:include type="modules" name="leftmenu" /></div>
                <div id='main'>
                    <jdoc:include type="module" name="breadcrumbs" />
                    <jdoc:include type="message" />
                    <jdoc:include type="component" />
                </div>
            </div>
            <footer>
                <div id='inner_footer' class="border-radius"><jdoc:include type="modules" name="footer" /></div>
            </footer>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:48:25.633

我刚试了你提供的模板代码，解决方法很简单：

删除组件的名称。

从：

```
<jdoc:include type="component" name="component" /> 
```

改成：

```
<jdoc:include type="component" /> 
```

# node.js - node.js 的问题 require.paths.unshift()

> ID：11774915
> 
> 赞同：1
> 
> 时间：2012-08-02T09:45:02.703
> 
> 标签：node.js

我是 node.js 世界的新手，我正在使用 node.js v0.8.4。我用谷歌搜索了这个问题。是的，我得到了解决方案，但作为初学者仍然无法理解。所以请帮助我......

我正在阅读 node.js 教程。在那个教程中使用了 node.js v0.1.103，他写道

```
require.paths.unshift(__dirname+'/vendor');

var http = require('http'),
sys = require('sys'),
nodeStatic = require('node-static/lib/node-static');

var server = http.createServer(function(request, response) {
var file = new nodeStatic.Server('./public', function() {
    cache: false
    });
request.addListener('end', function() {
    file.server(request, response);
    });
}).listen(8000); 
```

上面的脚本对他有用。当我编写示例脚本并运行时，我收到此错误。

```
C:\Documents and Settings\local>node C:\xampp\htdocs\rt\node\livestats\
server.js

Error: require.paths is removed. Use node_modules folders, or the NODE_PATH envi
ronment variable instead.
at Function.Module._compile.Object.defineProperty.get (module.js:386:11)
at Object.<anonymous> (C:\xampp\htdocs\rt\node\livestats\server.js:2:8)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

如何使节点从客户目录加载文件以及如何解决此问题？我的操作系统是windows

谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:30:37.277

`require.paths`很久以前就被弃用了。node v0.1 的教程现在几乎没用了，因为从那时起几乎所有东西都发生了变化。

如果您使用 安装`node-static`，`npm install`您可以直接使用`require("node-static")`而不指定整个路径（当然，也可以不使用`require.paths`）。

# netty - Netty HttpChunckAggregator 有状态 --> 竞争条件？

> ID：11774916
> 
> 赞同：1
> 
> 时间：2012-08-02T09:45:11.797
> 
> 标签：netty, http-chunked

也许这是一个明显的问题，但我对 netty 太陌生了。

看看 HttpChunckAggregator 类，我发现它是有状态的。这让我怀疑......给定一个具有以下管道的特定频道：

```
private MyServerHandler handler;

public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = pipeline();                   
    pipeline.addLast("decoder",new HttpRequestDecoder());       
    pipeline.addLast("chunkAggregator",new HttpChunkAggregator(4194304));       
    pipeline.addLast("encoder",new HttpResponseEncoder());              
    pipeline.addLast("chunkSeparator",new HttpChunkSeparator(4194304));         
    pipeline.addLast("handler", handler); //Singleton       
    return pipeline;
} 
```

和 NIO Netty 服务器，在分块消息和多线程的情况下，我可以获得竞争条件吗？

我看到每个新频道都会创建一个新的块聚合器，但是......所有的块消息都将在同一个频道中接收？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:11:52.077

它是安全的，因为它不被不同的频道共享。在 netty 中，只有一个线程正在执行上游事件，因此只要不从下游事件访问/修改这些状态​​，就可以安全地将状态存储在字段中而无需任何同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:45:16.333

每个传入消息都会调用 getPipeline。因此，对于每个 HttpRequest，您将创建一个新的 HttpChunkSeparator。

但是，如果您做了这样的事情，那将是完全不安全的线程。

```
private MyServerHandler handler;

// THIS IS WRONG AS getPipeline() will keep giving the same instance to multiple threads.
private HttpChunkAggregator httpChunkAggregator;

public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = pipeline();                   
    pipeline.addLast("decoder",new HttpRequestDecoder()); 

    // This is WRONG. DO NO DO THIS. INSTEAD DO new HttpChunkAggregator().      
    pipeline.addLast("chunkAggregator",httpChunkAggregator);      

    pipeline.addLast("encoder",new HttpResponseEncoder());              
    pipeline.addLast("chunkSeparator",new HttpChunkSeparator(4194304));         
    pipeline.addLast("handler", handler); //Singleton       
    return pipeline;
} 
```

阿伦

# asp.net - 将链接添加到 webgrid

> ID：11774918
> 
> 赞同：0
> 
> 时间：2012-08-02T09:45:12.647
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, webgrid

我正在开发一个 mvc .net Web 应用程序。我使用 webgrid 来显示我的数据库中的数据。

```
@{
    var grid = new WebGrid(Model, canPage:true , rowsPerPage :6);
    grid.Pager(WebGridPagerModes.NextPrevious);
      @grid.GetHtml(tableStyle: "webGrid", htmlAttributes: 
      new {id="datatable" },headerStyle: "Header", alternatingRowStyle : "alt",
      columns: grid.Columns(grid.Column("Nom"), grid.Column("Prenom"),     
      grid.Column("Email")));
} 
```

我只想为每一行添加 3 个操作链接。怎么做。这是我的操作链接（我使用图像而不是文本）

```
<a href="@Url.Action( "Details", new { id = item.id_client })">
    <img src="~/Images/details.png" alt =""/></a>
<a href="@Url.Action( "Edit", new { id = item.id_client })">
    <img src="~/Images/modifier.png" alt =""/></a>
<a href="@Url.Action( "Delete", new { id = item.id_client })">
    <img src="~/Images/supprimer.png" alt =""/></a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:12:37.103

SO的多个答案

**[方法一](https://stackoverflow.com/a/4898715/1182982)**

```
<a href="@Url.Action("Edit", new { id=MyId })"><img src="@Url.Content("~/Content/Images/Image.bmp")", alt="Edit" /></a> 
```

**[方法二](https://stackoverflow.com/a/9341104/1182982)**

```
grid.Column(header: "Details",
            format: @<text><img src="@Url.Content("~/Content/Images/view-fullscreen.png")"
             style="cursor: pointer" onclick="openPopup('@item.EncryUserId')"                                                                        
             alt="View Detail" title="View Detail"/></text>) 
```

**[方法三](https://stackoverflow.com/a/6496135/1182982)**

```
@Html.ActionLink("Update", "Update", @item.Price, new { @class = "imgLink"})

.imgLink
{
  background: url(YourImage.png) no-repeat;
} 
```

做出明智的选择 ;）

**[更新](http://yassershaikh.com/introduction-to-webgrid-in-mvc-3-razor-with-code-samples/)**：

```
@Html.ActionLink("Update", "Update", new{@postID =@item.PostID}, new { @class = "imgLink"}) 
```

# ios - 文本到语音：逐字突出显示 iphone

> ID：11774919
> 
> 赞同：5
> 
> 时间：2012-08-02T09:45:17.327
> 
> 标签：ios, uitextview, text-to-speech, flite

我正在`UITextView`使用 flite-1.4-iphone 在 a 上进行文本转语音。在阅读文本时，我想逐字自动突出显示文本。

1.  如何在阅读时将语音与文本突出显示同步？
2.  如何突出显示文本视图上的文本？

这是我当前的代码：

```
-(IBAction)btnClick:(id)sender
{
    [indicator startAnimating]; 
    textToSpeech = [[TextToSpeech alloc] init]; 
    [textToSpeech setVoice:@"cmu_us_awb"];
    [textToSpeech speakText:txtview.text];
    if ([txtview.text isEqualToString:@""]) 
    {
        [textToSpeech stopTalking];
        [self animate];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:56:06.830

Flite 没有办法了解何时说出了什么单词。它所做的是使用文本生成音频文件并播放它。您可以创建一个自定义类来处理传递给 TextToSpeech 的信息。该类会将字符串分成单独的单词，然后将它们传递给 flite。

如果你查看 fliteTTS.m，在 speakText: 方法中，你可以看到它创建了一个 wav 文件，然后让 AVPlayer 播放 wav 文件。您可以做的是更改该方法，而不是播放文件，而是将指向 wav 文件的 URL 返回到您的自定义类（可以将它们保存在数组中）。

然后让自定义类按顺序播放声音，每次播放下一个剪辑时，突出显示新的文本部分。

所以代替speakText：

```
-(NSString *)urlForSpeech:(NSString *)text
 {
    NSMutableString *cleanString;
    cleanString = [NSMutableString stringWithString:@""];
    if([text length] > 1)
    {
            int x = 0;
            while (x < [text length])
            {
                    unichar ch = [text characterAtIndex:x];
                    [cleanString appendFormat:@"%c", ch];
                    x++;
            }
    }
    if(cleanString == nil)
    {       // string is empty
            cleanString = [NSMutableString stringWithString:@""];
    }
    sound = flite_text_to_wave([cleanString UTF8String], voice);

    NSArray *filePaths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *recordingDirectory = [filePaths objectAtIndex: 0];
    // Pick a file name
    NSString *tempFilePath = [NSString stringWithFormat: @"%@/%s", recordingDirectory, "temp.wav"];
    // save wave to disk
    char *path;     
    path = (char*)[tempFilePath UTF8String];
    cst_wave_save_riff(sound, path);

    return tempFilePath;      
} 
```

要突出显示文本，当 AVPlayer 播放文件时，请使用：

```
[textView select:self];
textView.selectedRange = aSelectedRange; 
```

其中 aSelectedRange 是要突出显示的字符串的范围。

我对 AVPlayer 不熟悉，所以我真的不能帮你设置它，但苹果的开发者网站上有一些非常好的示例。这是您应该查看的内容：[链接](https://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html)

完成后不要忘记删除音频文件。

# python - 如何使用 cron 作业运行 python 文件

> ID：11774925
> 
> 赞同：51
> 
> 时间：2012-08-02T09:45:24.673
> 
> 标签：python, shell, cron

嗨，我创建了一个 python 文件，例如`file_example.py`

该文件将输出 sensex 值

假设文件在linux系统上的路径是`/Desktop/downloads/file_example.py`

我通常会像这样运行文件`python file_example.py`

但我想设置一个 cron 作业以每 2 分钟运行一次位于上述路径的 python 文件

谁能让我知道如何做到这一点

**编辑代码**：

我已经编辑了代码并创建了一个名为 test.sh 的 bash 脚本，如下所示

```
#!/bin/bash 
cd /Desktop/downloads/file_example.py
python file_example.py 2>log.txt 
```

当我运行上述文件时，显示以下错误：

```
sh-4.2$ python test.sh
  File "test.sh", line 3
    python test.py 2>log.txt 
              ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-02T09:57:49.603

假设您使用的是 unix 操作系统，您将执行以下操作。

使用命令编辑 crontab 文件

```
crontab -e 
```

添加类似于下面的行

```
*/2 * * * * /Desktop/downloads/file_example.py 
```

这可用于运行其他脚本只需使用所需脚本的路径，即

```
*/2 * * * * /path/to/script/to/run.sh 
```

下面是时间的解释（在数字前添加一个星号和斜线以每 n 个时间步运行一次，在这种情况下每 2 分钟一次）

```
* * * * * command to be executed
- - - - -
| | | | |
| | | | ----- Day of week (0 - 7) (Sunday=0 or 7)
| | | ------- Month (1 - 12)
| | --------- Day of month (1 - 31)
| ----------- Hour (0 - 23)
------------- Minute (0 - 59) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-11-12T21:59:46.687

您可以使用 python-crontab 模块。

[https://pypi.python.org/pypi/python-crontab](https://pypi.python.org/pypi/python-crontab)

创建一个新的 cron 作业很简单，如下所示：

```
from crontab import CronTab
#init cron
cron   = CronTab()

#add new cron job
job  = cron.new(command='/usr/bin/echo')

#job settings
job.hour.every(4) 
```

# c# - json序列化格式

> ID：11774926
> 
> 赞同：3
> 
> 时间：2012-08-02T09:45:26.123
> 
> 标签：c#, json, serialization, json.net

我正在尝试使用 json.net 序列化一组对象

该对象如下所示：

```
public class TaxBand
{   
    public TaxBand(string county, decimal taxPercentage)
    {
        County = county;
        Tax = taxPercentage;
    }

    public string County { get; private set; }
    public decimal Tax { get; private set; }
} 
```

它们包含在这样的结构中：

```
var data = new Dictionary<string, List<TaxBand>>();
data = PopulateDataset();
string json = JsonConvert.SerializeObject(data, Formatting.Indented); 
```

这会产生如下所示的 json：

```
{
  "North": [
    {
      "County": "Merseyside",
      "Tax": 5.0
    },
    {
      "County": "Greater Manchester",
      "Tax": 6.0
    }
  ],
  "South": [
    {
      "County": "Greater London",
      "Tax": 5.5
    },
    {
      "County": "Surry",
      "Tax": 6.2
    }
  ]
} 
```

是否可以生成如下所示的 json：

```
{
  "North": 
    {
      "Merseyside": 5.0,
      "Greater Manchester" : 6.0
    },
  "South": 
    {
      "Greater London": 5.5,
      "Surry": 6.2
    }
} 
```

很高兴考虑更改任何对象的形状，或者确实使用不同的序列化库

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T10:10:42.540

在一些 Linq 的帮助下

```
var data = new Dictionary<string, List<TaxBand>>();
data = PopulateDataset();

var data2 = data.ToDictionary(kv => kv.Key, 
                              kv => kv.Value.ToDictionary(t=>t.County,t=>t.Tax) );

var s = JsonConvert.SerializeObject(data2,Newtonsoft.Json.Formatting.Indented); 
```

输出：

```
{
  "North": {
    "Merseyside": 5.0,
    "Greater Manchester": 6.0
  },
  "South": {
    "Greater London": 5.5,
    "Surry": 6.2
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:55:12.440

这个：

```
"Merseyside": 5.0 
```

在我看来，这类似于 a 中的单个条目，`Dictionary`您可能会从以这种方式进行实验获得一些里程。

然而，示例 JSON 看起来完全合理。鉴于您有客户使用它，我可能不会担心序列化，并且肯定会担心损害您的对象模型以反映所需的序列化（特别是考虑到它看起来合法且易于解析）。请注意，如果您更改序列化，您的客户端必须能够成功解析它。

如果您要修改 JSON 输出，而不是损害您的对象模型，我会隔离该更改 - 将您的`TaxBand`对象复制到一个`TaxBandJson`对象或类似对象中。

# android - 为什么我在 Android 上使用 Guice 2.0 时会出现 ClassNotFoundException？

> ID：11774928
> 
> 赞同：2
> 
> 时间：2012-08-02T09:45:41.050
> 
> 标签：android, guice

我创建了一个新的Android项目，使用Guice注入一个类；但是当我运行它时，我得到一个`ClassNotFoundException`.

我在Eclipse中将Android插件更新到最新版本后出现异常，</p>

版本：jdk-6u33-windows-x64

guice-2.0-no_aop

安卓2.1

* * *

代码：

```
public class TextApplication{>....
        public void onCreate() {
        super.onCreate();
        singleton = this;

        this.in = Guice.createInjector(new BaseModule()); //Exception happens
        ........
        }

public class BaseModule implements Module {

    @Override
    public void configure(Binder binder) {
        binder.bind(ServiceRequest.class).in(Scopes.SINGLETON);     
        binder.bind(TService.class).in(Scopes.SINGLETON);
        .......
    }

} 
```

* * *

日志：

```
08-02 16:28:26.646: E/dalvikvm(18212): Could not find class
 '[Lcom.google.inject.Module;', referenced from method
 com.shuyou.shop.TextApplication.onCreate 08-02 16:28:26.656:
 W/dalvikvm(18212): VFY: unable to resolve new-array 588
 ([Lcom/google/inject/Module;) in Lcom/shuyou/shop/TextApplication;
 08-02 16:28:26.656: W/dalvikvm(18212): threadid=1: thread exiting with
 uncaught exception (group=0x2aacc8a0) 08-02 16:28:26.666:
 E/AndroidRuntime(18212): FATAL EXCEPTION: main 08-02 16:28:26.666:
 E/AndroidRuntime(18212): java.lang.NoClassDefFoundError:
 [Lcom.google.inject.Module; 08-02 16:28:26.666:
 E/AndroidRuntime(18212):   at
 com.shuyou.shop.TextApplication.onCreate(TextApplication.java:27)
 08-02 16:28:26.666: E/AndroidRuntime(18212):   at
 android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
 08-02 16:28:26.666: E/AndroidRuntime(18212):   at
 android.app.ActivityThread.handleBindApplication(ActivityThread.java:4286)
 08-02 16:28:26.666: E/AndroidRuntime(18212):   at
 android.app.ActivityThread.access$3000(ActivityThread.java:132) 08-02
 16:28:26.666: E/AndroidRuntime(18212):     at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2109)
 08-02 16:28:26.666: E/AndroidRuntime(18212):   at
 android.os.Handler.dispatchMessage(Handler.java:99) 08-02
 16:28:26.666: E/AndroidRuntime(18212):     at
 android.os.Looper.loop(Looper.java:123) 08-02 16:28:26.666:
  E/AndroidRuntime(18212):  at
 android.app.ActivityThread.main(ActivityThread.java:4669) 08-02
 16:28:26.666: E/AndroidRuntime(18212):     at
 java.lang.reflect.Method.invokeNative(Native Method) 08-02
 16:28:26.666: E/AndroidRuntime(18212):     at
 java.lang.reflect.Method.invoke(Method.java:521) 08-02 16:28:26.666:
 E/AndroidRuntime(18212):   at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
 08-02 16:28:26.666: E/AndroidRuntime(18212):   at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634) 08-02
 16:28:26.666: E/AndroidRuntime(18212):     at
 dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:32:52.157

`BaseModule``extend AbstractModule`不应该`implement Module`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:57:19.163

看到这个答案：

[Guice 2.0 的 ClassNotFoundException](https://stackoverflow.com/questions/1266587/classnotfoundexception-with-guice-2-0)

您的项目中似乎缺少一个 JAR。

[下载：](http://sourceforge.net/projects/aopalliance/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:05:19.087

我建议您检查是否已将所需的 jar 正确添加到构建路径中。

# jquery - 如何使用jQuery删除变量中的选项标签？

> ID：11774935
> 
> 赞同：2
> 
> 时间：2012-08-02T09:45:58.830
> 
> 标签：jquery, variables, jquery-selectors

删除 DOM 中的选项标签对我来说不是问题，但现在我必须删除变量中的选项标签。这就是我所拥有的：

```
var txt = "<select name='example'><option value='1'>Test</option></select>";
$(txt).find("select option[value='" + $(this).attr("id") + "']").remove(); 
```

选择器似乎是正确的，我已经用 text() 对其进行了调试，它给了我正确的值。但是变量 txt 没有改变 - 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:54:49.950

You shouldn't use `select` in your selector. And you have to use `$()` to make it a jQuery object first. After that you can manipulate it.

```
var txt = "<select name='example'><option value='1'>Test</option></select>",
    $txt = $(txt);
$txt.find("option[value='" + $(this).attr("id") + "']").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:53:54.503

如果您期望 的值`txt`不会改变它 - jQuery 不会改变它（它不能；它是按值传递的，而不是引用传递），它只会从中创建一个伪 DOM 并删除该选项。不过，没有什么永久性的事情发生。

如果要检索受影响的结果，则需要将整个内容放在容器中并读回其 HTML：

```
var txt = "<p>this is a HTML <span>string</span></p>";
txt = $('<div />').append(txt).find('span').remove().end().html(); 
```

`txt`现在已`span`删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:54:35.037

首先创建一个 jQuery 选择器，这样您就不必不断地将其重新转换为一个。

在您的查找中，您也不需要在选择`select`时再次指定`.find()`。

为简单起见，我将结果缓存`.find()`到另一个选择器变量中，然后再将其删除。

下面的工作正常。好吧，如果我使用`1`而不是它工作正常，`$(this).attr("id")`因为我不知道你指的是什么`$(this)`。

```
var $txt = $("<select name='example'><option value='1'>Test</option></select>");
//var $option = $txt.find("option[value='" + $(this).attr("id") + "']");
var $option = $txt.find("option[value='" + 1 + "']"); // selects option with value of 1
$option.remove(); // Removes option 
```

工作[**演示**](http://jsfiddle.net/Cn3vQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:51:51.757

什么都没有，`txt`仍然只是一个`String`. 我猜你想要一个变量中的 DOM 片段，这将是：

```
var txt = "<select name='example'><option value='1'>Test</option></select>";
var $domSnippet=$(txt);
domSnippet.find("select option[value='" + $(this).attr("id") + "']").remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T09:56:55.523

You're starting with a string containing some HTML, stored in your `txt` variable. When you call `$(txt)` you're creating a jQuery object containing the elements defined in that HTML string, which is completely separate from your `txt` variable. You can then manipulate (in this case attempt to remove) elements, but since it's completely separate from `txt` the changes aren't going to be reflected in it.

If you want to change the value of `txt` to be something else, you'll need to assign that value back to it, possibly like so (you mentioned that calling `.text()` gave you what you expected/wanted to see):

```
txt = $(txt).find("select option[value='" + $(this).attr("id") + "']").remove().text(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T10:02:14.063

remove() 方法删除元素 - 所以它们必须在 DOM 中，因为 txt 是一个变量，它没有在 DOM 中表示，所以值只是一个 string 。你应该使用像replace()这样的东西。

```
var txt = "<select name='example'><option value='1'>Test</option></select>";
        txt=txt.replace("<select name='example'><option value='1'>Test</option></select>","replacedText"); 
```

# java - 'java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag' 错误

> ID：11774940
> 
> 赞同：1
> 
> 时间：2012-08-02T09:46:13.070
> 
> 标签：java, struts-1

'java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag' 当我在带有 WebLogic 1o.2 网络服务器的 MyEclipse IDE 中运行我的 struts 应用程序时发生错误。

```
<Error> <Deployer> <BEA-149265> <Failure occurred in the execution of deployment request with ID '1343897268179' for task '0'. Error is: 'java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag'
java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:296)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:269)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    Truncated. see log file for complete stacktrace

Caused By: java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:296)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:269)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    Truncated. see log file for complete stacktrace
> 
<Aug 2, 2012 2:17:49 PM IST> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application '_appsdir_RulesApp_dir'.> 
<Aug 2, 2012 2:17:49 PM IST> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:296)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:269)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    Truncated. see log file for complete stacktrace

Caused By: java.lang.ClassNotFoundException: javax.faces.webapp.UIComponentTag
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:296)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:269)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        Truncated. 
```

虽然我在 lib 文件夹中添加了这个 jsf-api.jar 文件，但我没有使用任何 JSF 库函数，但这个问题得到了解决，但在浏览器窗口应用程序仍然没有运行。它显示像..

**错误 404——未从 RFC 2068 超文本传输​​协议中找到——HTTP/1.1：10.4.5 404 未找到**

服务器未找到任何与请求 URI 匹配的内容。没有说明这种情况是暂时的还是永久性的。

如果服务器不希望向客户端提供此信息，则可以使用状态代码 403（禁止）来代替。如果服务器通过一些内部可配置的机制知道旧资源永久不可用并且没有转发地址，则应该使用 410 (Gone) 状态代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-09T09:19:48.880

面临类似的问题，同样的错误，我的项目中也没有任何与*Faces*相关的代码。原来有一个 jar -> **struts-faces.jar**，如果存在于您的类路径中，它将使 weblogic 搜索*面部*jar。只需从您的库中删除 struts-faces.jar，错误就会消失。 [更多细节](https://amitsmittal.blogspot.com/2014/10/lets-face-it.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:50:15.820

确保 myfaces-api 和 myfaces-impl jar 文件包含在类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:56:20.120

确保在类路径中有 JSF 库（在服务器类路径中或嵌入在 WAR 文件中）。

实际的 jar 文件应该是什么取决于您使用的 JSF 实现。[以下](http://findjar.com/class/javax/faces/webapp/UIComponentTag.html)是一些可能的选择。

# vaadin - Vaadin 农田选择置顶

> ID：11774941
> 
> 赞同：1
> 
> 时间：2012-08-02T09:46:14.570
> 
> 标签：vaadin, cropfield

在 vaadin 应用程序中，我使用 CropField 插件来裁剪用户的头像。问题是每当我尝试测试它时，选择区域总是粘在农田的顶部。在一页上一切都很好，但是当我将那段代码准确地复制到另一页时，问题就出现了。你有什么想法为什么？

```
 NativeButton nb = new NativeButton("Click on me");
            layout.addComponent(nb);
            nb.addListener(new ClickListener() {

                @Override
                public void buttonClick(ClickEvent event) {
                    final Window window = new Window();
                    window.setModal(true);
                    DivLayout cropContent = new DivLayout();
                    window.setContent(cropContent);

                    final CropField cropField = new CropField(new ExternalResource("http://upload.wikimedia.org/wikipedia/commons/1/1e/Stonehenge.jpg"));
                    cropField.setSelectionAspectRatio(1);
                    cropContent.addComponent(cropField);
                    //cropField.setImmediate(true);

                    NativeButton btClose = new NativeButton("Close");
                    btClose.addListener(new ClickListener() {

                        @Override
                        public void buttonClick(ClickEvent event) {
                            getMyApplication().getMainWindow().removeWindow(window);
                        }
                    });
                    cropContent.addComponent(btClose);
                    getMyApplication().getMainWindow().addWindow(window);
                }
            }); 
```

# asp.net-mvc - EF + SQL Server：代码优先或数据库优先

> ID：11774945
> 
> 赞同：0
> 
> 时间：2012-08-02T09:46:47.363
> 
> 标签：asp.net-mvc, asp.net-mvc-3, sql-server-2008, entity-framework, entity-framework-5

我有一个用 ASP.Net 2.0 Web 窗体编写的系统。与 MySQL 服务器对话的框架非常酷。它读取服务器表单标签或面板内的所有控件，并对目标表执行 CRUD 操作。

当我创建 CRUD 页面时，我只需要在数据库 user{id,name,password,createdate} 中创建表，我只需要使用 id 作为表中的确切列名。控件可以是页面上的输入/选择/选项/检查框/文本区域甚至是FCK编辑器或CK编辑器。框架循环访问面板内的所有控件并保存/编辑/删除。如果我想添加一些新的字段，电子邮件和移动，我只需要在页面上添加两个控件并在表格中再添加两列。就是这样。我不必更改 page.aspx.cs 文件、实体层、业务层或数据访问层中的任何内容。它非常易于实施和维护。

我们想升级系统以使用 ASP.Net 4 MVC3 和 Entity Framework CT5。我们将从头开始重建整个系统。我希望这里的一些专家能给我一些指示。我找到了以下两个选项来重建系统。

**1\. Code First** 我们的新系统将执行与上述框架完全相同的操作。它将遍历所有 Request.Forms 数据并将它们与数据库中的关联表映射并保存/更新/删除所有数据。为此，视图将发布表单数据，控制器将接受带有实体类的值并通过 EF 将它们保存到数据库中。我仍然需要创建 ViewModel 类来在 View 上显示数据。如果有任何更改，例如向用户页面添加电子邮件和移动字段，我仍然需要更改三个位置视图，实体（域类）和 ViewModel。我不必更改数据库中的任何内容，因为 EF 会自动运行 ALTER TABLE 来添加两个新字段。我仍然无法弄清楚如何最小化实体和视图模型类的需求。

**2\. Database First** 我真的不喜欢这种方式，但如果这个解决方案提供更灵活的操作，我会喜欢。我将在数据库中创建列，系统将动态创建 ViewModel（我仍在研究如何做到这一点）读取表中的所有列，并在页面上显示数据。当视图发布数据时，它需要动态创建实体类并将更改保存到数据库中。

编辑：升级当前系统的原因。

*   我们想利用 .Net 4、Linq、Entity Framework、不显眼的 javascript 库、更容易处理 JSON 数据、远程验证（我们可以在当前系统中使用 RequireFieldValidator、RegExValidator 但它们是有限的，例如：验证输入复选框和选项），使用 var 和接口进行鸭式输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:22:55.913

> 我们的新系统将执行与上述框架完全相同的操作。它将遍历所有 Request.Forms 数据并将它们与数据库中的关联表映射并保存/更新/删除所有数据。为此，视图将发布表单数据，控制器将接受带有实体类的值并通过 EF 将它们保存到数据库中。

Someone please slap me if I'm missing something here, but these statements seem contradictory to me. If you want a system that will automatically parse the Request.Forms data and map them directly to a database table, then why would you need to use Entity Framework (or any other kind of middleware) at all? The point of EF, or any ORM, is to create a meaningful collection of conceptual data objects that represent your system's nouns. You then operate on those nouns, affecting their properties or accessing their behaviors, and let the ORM figure out how to map them to the tables + columns.

To answer your question, it sounds like you want the easiest solution, meaning the one where you have to write the least amount of code. If that is a correct assumption, then you might want to go with Database first. You can have EF generate your entity classes, but like you said, you will still have to either manually create viewmodel classes or come up with some kind of AOP (using T4 maybe) to generate these for you. But anytime you give a tool the power to generate something for you, you lose control over it.

I prefer code first / *conceptual* model first, but I also like to have complete control over everything in the application (aside from infrastructure concerns which can be delegated to tools and frameworks like AutoMapper, EF, T4MVC, etc). Yes, it is more work, because I have to create the entity classes, the viewmodel classes, and the views, (and controllers, and action filters, and html helpers, and rrrvrything else). If your domain is one where you can just map text boxes straight to database tables & columns, then maybe this would be overkill for you.

# tomcat - 从应用程序创建一个新目录

> ID：11774946
> 
> 赞同：1
> 
> 时间：2012-08-02T09:46:53.260
> 
> 标签：tomcat, directory, webdav

使用 tomcat webdav，目前我能够将文件/文档上传到特定的 webdav 位置。到这个程度，还好。

但是现在我有一个要求，我必须在 webdav 位置创建一个新目录（基于条件）并将文件或文档上传到新创建的目录中。

这我必须通过Java来实现。我尝试使用 file.mkdir() 创建一个目录。但它对我来说是错误的。

谁能告诉我我该如何克服这种情况？

亲切的问候

副部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:44:51.023

与您的 WebDAV 服务建立 HTTP 连接并发出 MKCOL 请求（MKCOL 就像 GET、POST 等）。像这样的东西：

```
MKCOL /the/directory/you/want/to/create HTTP/1.1 
```

您应该期待 201 响应。如果你得到别的东西，这意味着目录创建失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:13:24.297

谢谢克里斯托弗！！

我想说明使用示例应用程序创建 webdav 文件夹的代码。

```
public class CreateWebdavFolderUsingHttpClient {

    private static String url = "http://localhost:8081/webdav/subbu/MyWebdavFolder";

    public static void main(String[] args) {
        String response = null;
        /* Create an instance of HttpClient.*/
        HttpClient client = new HttpClient();
        client.getState().setCredentials(
                new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
                new UsernamePasswordCredentials("tomcat", "tomcat"));

        DavMethod method = new MkColMethod(url);
        try {
            client.executeMethod(method);
            response = method.getStatusCode() + " - " + method.getStatusText();
            client.executeMethod(new MkColMethod(url + "/10300"));
            response = method.getStatusCode() + " - " + method.getStatusText();
        } catch (IOException ex) {
            // Catch error
        } finally {
            method.releaseConnection();
        }
        System.out.println(response);
    }
} 
```

# ruby-on-rails - Ruby on Rails - 运行服务器时出错

> ID：11774947
> 
> 赞同：1
> 
> 时间：2012-08-02T09:46:53.940
> 
> 标签：ruby-on-rails, rake, table-structure

我目前正在做一个 Rails 项目。当我尝试启动 rails 服务器时，它会抛出以下错误：

```
=> Booting WEBrick
=> Rails 3.1.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/var/lib/gems/1.9.1/gems/activerecord-3.1.3/lib/active_record/connection_adapters      
/sqlite_adapter.rb:439:in `table_structure': Could not find table 'dbrick'   
(ActiveRecord::StatementInvalid) 
```

我的表名是“砖”。我还尝试 rake db:drop 和 rake db:mirgrate。迁移时抛出以下错误：

```
rake aborted!
Could not find table 'dbrick'

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

这是我的迁移文件：

```
class CreateDbricks < ActiveRecord::Migration
def self.up
  create_table :dbricks do |t|
    t.text :description
    t.string :video
    t.string :video_html
    t.string :image_id
    t.string :option_id
    t.boolean :choice
    t.string :reach
    t.integer :category_id
    t.string :user_id
    t.datetime :deleted_at

    t.timestamps
  end
end

 def self.down
   drop_table :dbricks
 end
end 
```

如果有人帮助我解决这个问题，那将是非常有帮助的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:27:24.577

我会尝试 ：

```
rake db:schema:load 
```

加载您的架构（我相信它会针对您的数据库找到错误）。

如果失败，我将手动找到创建您的 dbrick 的迁移，找到文件名并复制并粘贴文件名中的数字以生成此：

```
rake db:migrate:down VERSION=123412341234 # <-- where the number is the number you pasted 
```

寻找错误。有时一件事已经存在，或者不存在并且阻止迁移一直运行，因此这将是您错误的根源。如果成功，则将其重新耙起：

```
rake db:migrate:up VERSION=123412341234 # <-- where the number is the number you pasted 
```

如果它没有成功，那么你将不得不戴上你的矿工头盔，并用以下方式弄脏你的手：

```
rails dbconsole 
```

这将带您进入您的数据库，您必须手动删除阻止迁移发生的任何表/列。一旦修复，退出并`rake db:migrate:up`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:44:31.350

你迁移数据库了吗？`rake db:migrate`

如果有，请删除数据库（这会删除所有数据，所以要小心 - 如果您不关心丢失数据库中的数据，请执行此操作）

```
rake db:drop 
```

这将清除您的数据库和架构。然后

```
rake db:migrate 
```

这将重新迁移您的架构。

# android - 如何在android 4.0+中修改Actionbar的默认选择颜色？

> ID：11774948
> 
> 赞同：1
> 
> 时间：2012-08-02T09:46:55.603
> 
> 标签：android, android-actionbar

如何在 android 4.0 + 中修改 Actionbar 项的默认选择颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:19:53.203

我找到了一个很酷的工具 ActionBar 生成器[http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

# jquery - 自定义 Fancy box 插件

> ID：11774950
> 
> 赞同：0
> 
> 时间：2012-08-02T09:47:09.500
> 
> 标签：jquery, jsp, fancybox

我是从“http://fancyapps.com/fancybox/”很好下载的fancybox的新手，我有图像缩略图，我的要求是，在单击缩略图后显示的弹出窗口中，我希望将附加信息显示为图像的右侧，如我们所见在某些社交网站中，信息可以包含评论，或者从用户的角度来看，用户也可以对该照片发表评论。主要问题是如何添加包含信息的自定义 div。我正在使用带有spring MVC的jsp。

任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:02:17.693

你可以考虑我的（定制的）fancybox “a la” facebook 然后：

[http://picssel.com/playground/jquery/fancyboxALAfacebook_26Mar12.html](http://picssel.com/playground/jquery/fancyboxALAfacebook_26Mar12.html)

# mysql - MySQL 更新语句错误 - 截断不正确的 DOUBLE 值

> ID：11774953
> 
> 赞同：0
> 
> 时间：2012-08-02T09:47:37.387
> 
> 标签：mysql, sql

我有一个名为的表`People`，当`describe People`我得到以下输出时

```
| Name | varchar(50)   | YES  |     | NULL    | 
```

我的 sql 更新语句：

```
update Person set Name='xxx'  AND Age= '33' ; 
```

错误 ：

```
ERROR 1292 (22007): Truncated incorrect DOUBLE value: 'xxx' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:50:10.000

取决于你想做什么。设置`age`并`name`为你的桌子上的所有人做

```
update Person set Name='xxx', Age= '33' 
```

或使用do`name`为所有人设置`age=33`

```
update Person set Name='xxx' WHERE Age= '33' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:52:05.833

使用以下查询

`update People set Name='xxx' , Age= '33' where condition`;

# android - 如何在open gl es android中绘制开放式圆圈

> ID：11774954
> 
> 赞同：-1
> 
> 时间：2012-08-02T09:47:38.067
> 
> 标签：android, opengl-es

我需要画一个开放式圆圈，如下图所示 [http://i49.tinypic.com/254y5bs.png](http://i49.tinypic.com/254y5bs.png) 在图像中 M 的长度应该大于 N，线 M 和 N 的起点是圆的中心。如何从 N 到 M 的端点绘制一条弧线，使弧线看起来呈线性。我正在使用以下代码绘制圆圈

```
 for (int nR = N_IN_DEGREE; nR < M_IN_DEGREE && nCount < 360; nR++) 
    { 
    float fX = (float) Math.sin((float) nR * (Math.PI / 180)) + nR * 0.0008f; 
    float fY = (float) Math.cos((float) nR * (Math.PI / 180)); 
    stVertexArray[nCount * 2] = fX; 
    stVertexArray[nCount * 2 + 1] = fY; 
    nCount++;
    } 
```

我从角度 N_IN_DEGREE 到 M_IN_DEGREE 得到开放端圆。但是当我将 fX 的值增加 nR * 0.0008f 的系数时，完整的圆仅以 350 度绘制，但我想要 360 ..请运行代码，看看..我的要求是我需要从一个点绘制2条线n（长度0.8）和线m（长度=1），并从n的端点到m的端点绘制一条弧并填充弧线也有颜色。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:03:00.283

我无法让您的代码运行，因为没有足够的信息，而且我无法按照您的代码运行。

但这是基本思想，用python实现。

```
import math

def genc(r1, r2, t1, t2, n):
    dr = (r2 - r1)/n
    dt = (t2 - t1)/n
    x = []
    y = []
    for k in range(n):
        r = r1 + k*dr
        t = t1 + k*dt
        x.append(r*math.cos(t))
        y.append(r*math.sin(t))
    return [x, y] 
```

这是输出（使用 matplotlib 绘制）

```
In [43]: a = circ.genc(1.0, 0.8, math.pi/2, 2*math.pi, 60)

In [44]: plot(a[0], a[1],'ro')
Out[44]: [<matplotlib.lines.Line2D at 0xb9285d0>] 
```

![在此处输入图像描述](../Images/7d5b2cc34c96881bfe715b1b95154f81.png)

# ios - AVPlayer与客户端透明原点切换

> ID：11774956
> 
> 赞同：0
> 
> 时间：2012-08-02T09:47:50.903
> 
> 标签：ios, avplayer, http-live-streaming

我正在开发使用 HLS 的 iOS 应用程序。在我们的视频平台中，我们使用 Nginx proxy_pass 模块在其中一个源不可用时从一个源重定向到另一个源（我们有两个源）。源之间的切换对客户端是透明的，它由平衡器维护，因为客户端播放列表 URI 保持不变。

我们遇到了 AVPlayer 的问题，这种切换工作流程也出现在 QuickTime 中。根据网络日志，接下来发生的事情：

在切换时 AVPlayer 再次请求实时播放列表，当它播放完切换之前加载的块时，它开始播放的不是播放列表中的下一个块，而是第一个块！并且 AVPlayer currentTime 属性没有变化，它继续变化，就像没有打开第一个块一样（在播放列表开头的正常搜索 currentTime 将为 0），没有播放器项目状态发生变化，没有抛出通知，什么都没有特别是访问日志，错误日志是空的。所以我们不能更新用户界面（即搜索栏）并改变用户，他被重定向到另一个直播时间。在我们不应该向用户显示超出特定广播范围的实时流的情况下，问题更加严重。

任何建议如何解决这个问题？还是它的核心 AVPlayer 错误（这个问题也出现在 Quicktime 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:12:47.177

解决方案是：1）为不同来源的播放列表使用不同的名称，2）在尝试从禁用的来源更新播放列表时发送回客户端 404 或另一个错误，3）在播放列表中使用后备 - 添加第二个来自第二来源的替代播放列表在多位播放列表中。它在 HLS 文档中有所说明。当 AVPlayer 在更新播放列表时收到错误时，它会尝试从备用播放列表 4) 更新以提供手动质量选择，我们还必须将播放列表包装为具有主播放列表和备用播放列表的中间变体播放列表中的特定质量。我们用于从直播中生成播放列表的 FMS 无法做到这一点，因此我们需要在 Nginx 一侧生成变体播放列表

结果是容错视频平台，在主从（第二）源之间进行透明切换，可与自动和手动质量选择一起使用。

# php - 无法使用 SSL 连接到 test.salesforce.com

> ID：11774961
> 
> 赞同：1
> 
> 时间：2012-08-02T09:48:31.217
> 
> 标签：php, soap, ssl, openssl, macports

我在连接到[https://test.salesforce.com](https://test.salesforce.com)的 SOAP 服务时遇到了一些问题。我使用基于 PHP 原生 SoapClient 的 Toolkit-for-PHP v20.0 (https://github.com/developerforce/Force.com-Toolkit-for-PHP)。

软件：

*   macOS 10.8
*   麦克波特 2.1.2
*   PHP 5.3.15
*   OpenSSL 1.0.1_c

我在 30 秒后收到的唯一错误消息（超时？）是：

```
[SoapFault]                
Could not connect to host 
```

奇怪的是，连接到[http://test.salesforce.com](http://test.salesforce.com)（没有 SSL）或连接到[https://login.salesforce.com](https://login.salesforce.com)（使用 SSL）按预期工作。

我什至设法使用soapUI登录到[https://test.salesforce.com 。](https://test.salesforce.com)

所以我的猜测是肯定有一些认证/握手问题，但我不知道如何获得更详细的错误消息或如何更改有关工具包设置的任何内容。我搜索了 google、stackoverflow 和 SalesForce 讨论板，但似乎没有人遇到这个特定的沙箱+SSL 问题。

有谁知道如何调试这个问题？

* * *

好的，我认为这是 macports 的 openssl 二进制文件的问题。显然，握手失败是因为我的客户端正在尝试服务器不理解的 SSLv2/SSLv3 握手。

```
openssl s_client -connect test.salesforce.com:443 -state
CONNECTED(00000003)
SSL_connect:before/connect initialization
SSL_connect:SSLv2/v3 write client hello A

[...end...] 
```

与强制 SSLv3 相同的命令：

```
openssl s_client -ssl3 -connect test.salesforce.com:443 -state
CONNECTED(00000003)
SSL_connect:before/connect initialization
SSL_connect:SSLv3 write client hello A
SSL_connect:SSLv3 read server hello A
depth=1 O = VeriSign Trust Network, OU = "VeriSign, Inc.", OU = VeriSign International Server CA - Class 3, OU = www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97 VeriSign
verify error:num=20:unable to get local issuer certificate
verify return:0
SSL_connect:SSLv3 read server certificate A
SSL_connect:SSLv3 read server done A
SSL_connect:SSLv3 write client key exchange A
SSL_connect:SSLv3 write change cipher spec A
SSL_connect:SSLv3 write finished A
SSL_connect:SSLv3 flush data
SSL_connect:SSLv3 read finished A

[...and so forth...] 
```

不太确定该怎么做... SalesForce toolkit-for-php 使用 PHP 的本机 SoapClient，我不知道如何强制它使用 SSLv3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:43:58.787

这是 macports 最新版本的 openssl 1.0.1 端口的已知错误：

[http://trac.macports.org/ticket/33715](http://trac.macports.org/ticket/33715)

可能的解决方案：安装较旧的 openssl 版本，在本例中为 openssl 1.0.0h：

```
cd /opt/local/src
sudo svn checkout -r 90715 http://svn.macports.org/repository/macports/trunk/dports/devel/openssl
cd openssl
sudo port install 
```

取自：

*   [https://trac.macports.org/wiki/howto/InstallingOlderPort](https://trac.macports.org/wiki/howto/InstallingOlderPort)
*   [http://trac.macports.org/ticket/33715#comment:30](http://trac.macports.org/ticket/33715#comment:30)

# r - R：高频数据统计分析

> ID：11774962
> 
> 赞同：2
> 
> 时间：2012-08-02T09:48:35.253
> 
> 标签：r, statistics, time-series, finance, xts

我正在处理分时数据，并希望了解有关分时价格变化分布的一些基本信息。我的数据库由 10 个开放日期间的刻度数据组成。我采用了价格的第一个差异：

```
 Tick spread
2010-02-02 08:00:04   -1
2010-02-02 08:00:04    1
2010-02-02 08:00:04    0
2010-02-02 08:00:04    0
2010-02-02 08:00:04    0
2010-02-02 08:00:04   -1
2010-02-02 08:00:05    1
2010-02-02 08:00:05    1 
```

我创建了一个数组，它为我提供了每天的第一个和最后一个刻度：

```
 Open  Close
[1,]      1  59115
[2,]  59116 119303
[3,] 119304 207300
[4,] 207301 351379
[5,] 351380 426553
[6,] 426554 516742
[7,] 516743 594182
[8,] 594183 683840
[9,] 683841 754962
[10,] 754963 780725 
```

我每天都想知道我的分时价差的经验分布。我知道我可以使用 R 函数 table() 但问题是它给了我一个长度随天数变化的表对象。第二个问题是，有一天我的点差可以达到 3 点，而之后的几天我的点差只有不到 3 点。

第一天表（）输出：

```
 -3    -2    -1     0     1     2     3 
  1    19  6262 46494  6321    16     2 
```

第二天 table() 输出：

```
-2    -1     0     1     2     3     5 
27  5636 48902  5588    33     1     1 
```

我想要的是为我的整个刻度样本创建一个包含所有 table() 输出的数据框。任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:48:29.260

只需使用二维表，`as.Date(index(x))`用作行：

```
# create some example data
set.seed(21)
p <- sort(runif(6))*(1:6)^2
p <- c(p,rev(p)[-1])
p <- p/sum(p)
P <- sample(-5:5, 1e5, TRUE, p)
x <- .xts(P, (1:1e5)*5)
# create table
table(as.Date(index(x)), x)
#             x
#                -5   -4   -3   -2   -1    0    1    2    3    4    5
#   1970-01-01   22  141  527 1623 2968 6647 2953 1700  538  139   21
#   1970-01-02   31  142  548 1596 2937 6757 2874 1677  529  167   22
#   1970-01-03   26  172  547 1599 2858 6814 2896 1681  504  163   20
#   1970-01-04   23  178  537 1645 2855 6805 2891 1626  537  165   18
#   1970-01-05   23  139  490 1597 3028 6740 2848 1724  505  158   28
#   1970-01-06   21  134  400 1304 2266 5496 2232 1213  397  112   26 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:45:33.070

如果您想要整个 10 天期间的频率分布，只需连接数据并执行相同操作。那是你想做的吗？

# android - 使用 SQlite for Android 应用程序创建 FIFO 表

> ID：11774965
> 
> 赞同：2
> 
> 时间：2012-08-02T09:48:42.707
> 
> 标签：android, sqlite

我想创建一个 FIFO 表，以便通过在新信息到达时删除最旧的元素来仅保存最近的 50 个信息。我可以通过在表中操作 ID 来做到这一点，但我认为这不是最好的解决方案。有没有做好它的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:01:33.277

您可以假设表中的第一行是最后插入的，而不是检查日期时间、对项目进行排序等等。

在您的 Content Provider 中`insert(Uri uri, ContentValues cv)`，在`db.insert`拨打电话之前，您可以先使用 getCount() 查询该表上的项目数，如果 count>50 则删除第一行。然后继续您的插入调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:52:33.177

您不需要使用 ID 来创建 FIFO 逻辑。最好的办法是`DATETIME`在您的表中添加另一列，它会自动插入当前时间戳，这将帮助您按此列的升序选择记录。你的新专栏应该是这样的：

```
DateAdded DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

确保每次插入新记录时，都必须`COUNT`检查此表中的总记录，并在必要时删除与**DateAdded**相关的最旧记录。此外，在删除最旧的记录时，您可以使用`LIMIT`和/或在您的选择查询中。`MAX`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:51:54.797

如果表中尚不包含 datetime 类型列，则将其添加到表中，并在每次插入时将其设置为“现在”。然后在每次插入时选择所有限制设置为 50 按日期排序。选择最后一项并运行删除查询以删除比最后一项更早的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:54:35.047

必须使用sqlite吗？你可以使用文件处理吗？您可以使用简单的[Queue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)对象并将其保存到文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T14:22:01.163

这是我为交易列表所做的，它工作正常。插入新条目时，我检查计数是否高于 50，如果是，我只删除最后一个条目：

```
 // Adding new transaction
    public void addTransaction(Transaction transaction) {
        SQLiteDatabase db = this.getWritableDatabase();

        if(getTransactionsCount() > 50){
            List<Transaction> allTransactions = getAllTransactions();
            Transaction oldestTransaction = allTransactions.get(allTransactions.size()-1);
            deleteTransaction(oldestTransaction);
        }

         ContentValues values = new ContentValues();
         values.put(KEY_TRANSACTION_UID, transaction.getUID());
         values.put(KEY_TRANSACTION_AMOUNT, transaction.getAmount());
         values.put(KEY_TRANSACTION_IS_ADD, transaction.getIsAdd());
         // Inserting Row
         db.insert(TABLE_TRANSACTIONS, null, values);

        db.close(); // Closing database connection
    } 
```

getAllTransactions() 以降序返回列表（基于 id 主键）：

```
// Getting All Transactions
    public List<Transaction> getAllTransactions() {
        List<Transaction> transactionList = new ArrayList<Transaction>();
        // Select All Query
        String selectQuery = "SELECT * FROM " + TABLE_TRANSACTIONS + " ORDER BY " + KEY_TRANSACTION_ID + " DESC";

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Transaction transaction = new Transaction();
                transaction.setID(Integer.parseInt(cursor.getString(0)));
                transaction.setUID(cursor.getString(1));
                transaction.setAmount(cursor.getString(2));
                transaction.setIsAdd(cursor.getString(3));
                // Adding contact to list
                transactionList.add(transaction);
            } while (cursor.moveToNext());
        }
        // return contact list
        return transactionList;
    } 
```

# gwt-celltable - 如何使用带有自定义表构建器的 clickhandler GWT 呈现 GWT 小部件？

> ID：11774969
> 
> 赞同：1
> 
> 时间：2012-08-02T09:49:01.030
> 
> 标签：gwt-celltable, gwt-2.5

我正在尝试使用 GWT 2.5rc1 自定义表格构建器为我的数据网格中的每一行呈现一个子表。我遵循了 2.5 rc1 展示中的示例（网址：[http](http://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid) ://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid ）。我能够看到新添加的子行，但是当我想向子行锚元素添加点击处理程序时问题就来了。点击处理程序从未被调用，这对我来说似乎也很清楚，因为我不是在任何地方“注册”事件处理程序。

这里是我现在使用的代码，“相关部分”：

```
private void buildRegRow(Registrazione rowValue,final int absRowIndex, boolean isCommentRow) {
        // Calculate the row styles.
        SelectionModel<? super Registrazione> selectionModel = cellTable.getSelectionModel();
        boolean isSelected =
                (selectionModel == null || rowValue == null) ? false : selectionModel
                        .isSelected(rowValue);
        boolean isEven = absRowIndex % 2 == 0;
        StringBuilder trClasses = new StringBuilder(rowStyle);
        if (isSelected) {
            trClasses.append(selectedRowStyle);
        }

        // Calculate the cell styles.
        String cellStyles = cellStyle;
        if (isSelected) {
            cellStyles += selectedCellStyle;
        }

        if(isCommentRow)
            cellStyles += childCell;

        TableRowBuilder row = startRow();
        row.className(trClasses.toString());

        /*
         * Checkbox column.
         * 
         * This table will uses a checkbox column for selection. Alternatively,
         * you can call dataGrid.setSelectionEnabled(true) to enable mouse
         * selection.
         */
        TableCellBuilder td = row.startTD();
        td.className(cellStyles);
        td.style().outlineStyle(OutlineStyle.NONE).endStyle();
        if (!isCommentRow) {
            renderCell(td, createContext(0), cellTable.getColumn(0), rowValue);
        }
        td.endTD();

        /*
         * View children column.
         * 
         * Displays a link to "show children". When clicked, the list of friends is
         * displayed below the contact.
         */
        td = row.startTD();
        td.className(cellStyles);
        if(!isCommentRow) {
            td.style().outlineStyle(OutlineStyle.NONE).endStyle();
            if(rowValue.hasComments())
                //td.className(CellTableResource.INSTANCE.dataGridStyle().showChildren());
                renderCell(td, createContext(1), cellTable.getColumn(1), rowValue);
        } else {
            td.colSpan(getColumns().size() - 1);

//              // Draw sub-table header
            TableBuilder subTable = td.startTable();
            TableSectionBuilder subTableSection = subTable.startTHead();
            TableRowBuilder tr2 = subTableSection.startTR();
            TableCellBuilder td2 = tr2.startTH();
            td2.text(msgs.date());
            tr2.endTH();
            td2 = tr2.startTH();
            td2.text(msgs.username());
            tr2.endTH();
            td2 = tr2.startTH();
            td2.text(msgs.comment());
            tr2.endTH();
            td2 = tr2.startTH();
            td2.text(msgs.actions());
            tr2.endTH();

            subTableSection.endTR();
            subTable.endTHead();
            subTableSection = subTable.startTBody();
            for(final EntityComment ec : rowValue.getCommentList()) {
                tr2 = subTableSection.startTR();

                // Date
                td2 = tr2.startTD();
                td2.text(DateUtil.getDefaultDateTimeFormat().format(ec.getCreationDate()));
                tr2.endTD();

                // Username
                td2 = tr2.startTD();
                td2.text(ec.getUsername());
                tr2.endTD();

                // Text
                td2 = tr2.startTD();
                td2.text(ec.getText());
                tr2.endTD();

                // Actions
                td2 = tr2.startTD();

                    // Remove
                Anchor removeAnchor = new Anchor("remove");
                removeAnchor.addClickHandler(new ClickHandler() {

                    @Override
                    public void onClick(ClickEvent event) {
                        Window.alert("clicked");
                    }
                });
                td2.html(new SafeHtmlBuilder().appendHtmlConstant(removeAnchor.toString()).toSafeHtml());
                tr2.endTD();

                subTableSection.endTR();
            }
            subTable.endTBody();
            td.endTable();
        }
        td.endTD();

        for(int i = 2; i <= 6; i++) {
            // Recorded, list name, callcenter, msisdn
            td = row.startTD();
            td.className(cellStyles);
            td.style().outlineStyle(OutlineStyle.NONE).endStyle();
            if(!isCommentRow) {
                renderCell(td, createContext(i), cellTable.getColumn(i), rowValue);
            }
            td.endTD();
        }

        row.endTR();
    } 
```

子表出现了，锚点在正确的位置，但点击处理程序从未被调用。我不知道如何将处理程序代码写入页面，就像我为渲染锚所做的那样。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:44:32.697

我已经尝试过自定义表格生成器并创建了一个网格。您可以使用适当的结构添加任何元素。确保为您创建的每个元素设置唯一 ID。然后通过代码通过以下代码访问元素，

```
Element e = DOM.getElementById( id ); 
```

将元素转换为适当的小部件，即，如果您使用的是文本输入元素，则始终可以将其转换为文本框。要投射元素，还有一个步骤，您可以用谷歌搜索。然后添加 clickhandler 或您想要的任何处理程序。

# python - 将 hexbin 图加在一起

> ID：11774970
> 
> 赞同：3
> 
> 时间：2012-08-02T09:49:07.237
> 
> 标签：python, matplotlib

我有四个已标准化的 hexbin 图。我如何将它们加在一起以形成一个大分布？ ![在此处输入图像描述](../Images/122b4dba4113979586daf7979299e0d0.png) 我已经尝试连接输入向量，然后创建 hexbin 图，但这会引发各个分布的归一化： ![在此处输入图像描述](../Images/aa48b935774f58d41c20e99dbfae5111.png) 那么如何添加各个 hexbin 分布，同时仍然保持个体归一化？

我的代码的相关部分是：

```
def hex_plot(x,y,max_v):
  bounds = [0,max_v*m.exp(-(3**2)/2),max_v*m.exp(-2),max_v*m.exp(-0.5),max_v]   # The sigma bounds
  norm = mpl.colors.BoundaryNorm(bounds, ncolors=4)
  hex_ = plt.hexbin(x, y, C=None, gridsize=gridsize,reduce_C_function=np.mean,cmap=cmap,mincnt=1,norm=norm)
  print "Hex plot max: ",hex_.norm.vmax
  return hex_

gridsize=50
cmap = mpl.colors.ListedColormap(['grey','#6A92D4','#1049A9','#052C6E'])

hex_plot(x_tot,y_tot,34840) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:20:07.527

我写了一些代码来做你所追求的。从您问题中的片段来看，您似乎已经知道`max_v`给定分箱方案的分布的高度（ ），所以我在这个假设下工作。根据您应用的数据，实际情况可能并非如此，在这种情况下，以下操作将失败（这与您对分布高度的猜测/知识一样好）。出于示例数据的目的，我只是对`max_v1`和的值进行了合理的猜测（基于快速绘图） `max_v2`。切换`c1`和`c2`我为注释版本定义的应该会重现您的原始问题。

```
import scipy
import matplotlib.pyplot as pyplot
import matplotlib.colors
import math

#need to know the height of the distributions a priori
max_v1 = 850 #approximate height of distribution 1 (defined below) with binning defined below
max_v2 = 400 #approximate height of distribution 2 (defined below) with binning defined below
max_v = max(max_v1,max_v2)

#make 2 differently sized datasets (so will require different normalizations)
#all normal distributions with assorted means/variances
x1 = scipy.randn(50000)/6.0+0.5
y1 = scipy.randn(50000)/3.0+0.5
x2 = scipy.randn(100000)/2.0-0.5
y2 = scipy.randn(100000)/2.0-0.5
#c1 = scipy.ones(len(x1)) #I don't assign meaningful weights here
#c2 = scipy.ones(len(x2)) #I don't assign meaningful weights here
c1 = scipy.ones(len(x1))*(max_v/max_v1) #highest distribution: no net change in normalization here
c2 = scipy.ones(len(x2))*(max_v/max_v2) #renormalized to same height as highest distribution

#define plot boundaries
xmin=-2.0
xmax=2.0
ymin=-2.0
ymax=2.0

#custom colormap
cmap = matplotlib.colors.ListedColormap(['grey','#6A92D4','#1049A9','#052C6E'])

#the bounds of 1sigma, 2sigma, etc. regions
bounds = [0,max_v*math.exp(-(3**2)/2),max_v*math.exp(-2),max_v*math.exp(-0.5),max_v]
norm = matplotlib.colors.BoundaryNorm(bounds, ncolors=4)

#make the hexbin plot
normalized = pyplot
hexplot = normalized.subplot(111)
normalized.hexbin(scipy.concatenate((x1,x2)), scipy.concatenate((y1,y2)), C=scipy.concatenate((c1,c2)), cmap=cmap, mincnt=1, extent=(xmin,xmax,ymin,ymax),gridsize=50, reduce_C_function=scipy.sum, norm=norm) #combine distributions and weights
hexplot.axis([xmin,xmax,ymin,ymax])
cax = pyplot.axes([0.86, 0.1, 0.03, 0.85])
clims = cax.axis()
cb = normalized.colorbar(cax=cax)
cax.set_yticklabels([' ','3','2','1',' '])
normalized.subplots_adjust(wspace=0, hspace=0, bottom=0.1, right=0.78, top=0.95, left=0.12)

normalized.show() 
```

这是没有修复的结果（评论`c1`和`c2`使用），

![结果](../Images/be1be697e5b079bdbab50db22af79065.png)

以及修复后的结果（代码原样）；

![结果](../Images/abfd7e597c6934a47aeca7a410e7dce5.png)

希望有帮助。

# java - 防止 m2e 在项目更新时取消导出 Maven 依赖项

> ID：11774972
> 
> 赞同：1
> 
> 时间：2012-08-02T09:49:08.580
> 
> 标签：java, eclipse, maven, m2e

我正在考虑在 Eclipse 4.2 中使用 Maven 项目，以允许我的工作区中的非 Maven Java 项目以更少的维护工作使用外部库。为了达到这个效果，我启用了选项卡`Maven Dependencies`下的复选框`Java Build Path -> Order and Export`。

但是，我注意到更新 Maven 项目会改变这种设置。更具体地说，在`.classpath`这个：

```
<classpathentry exported="true" kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"> 
```

变成这样：

```
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"> 
```

有没有办法防止这种情况发生？在我的案例中，拥有 Maven 项目的全部意义在于它们的依赖项将被导出。

除了将所有其他项目转换为 Maven 之外，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:14:05.733

简短的回答是 m2e 插件不支持此功能。

由于您只导出 Maven 依赖项，因此没有什么能真正阻止您手动将这些依赖项作为本地 Maven 存储库的外部 jar 添加到您的其他项目中。

尽管 mavenize 您的项目仍然会更简单。

# html - 使用 CSS 将页面内容居中

> ID：11774978
> 
> 赞同：6
> 
> 时间：2012-08-02T09:49:29.577
> 
> 标签：html, css, vertical-alignment

我正在尝试创建一个潜在客户生成页面。当在任何浏览器尺寸上显示时，我想将页面上的所有内容居中。

我尝试使用垂直对齐中心。但这似乎不起作用。

这样做的最佳做法是什么？

[http://play.mink7.com/h/mspre/](http://play.mink7.com/h/mspre/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T09:53:31.307

如果您只是指在左右边缘之间居中，则创建一个具有固定宽度的元素，并`margin: auto;`在其上声明。

如果要将元素水平和垂直居中，请将其水平和垂直放置在页面的中间，然后将其拉回元素宽度和高度的一半。

例如：

```
.someElement {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 200px;
  height: 200px;
  margin: -100px 0 0 -100px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:02:30.170

对我来说，最好的方法是制作一个设置宽度的容器 div。我通常选择大约 900 像素，因为现在几乎所有的显示器都比这宽。然后我使用边距自动使 div 居中。

```
#container { width: 900px; 
margin: 0px auto 0px auto; 
} 
```

这将使 div 居中。鲍勃是你的叔叔。
如果你愿意，我可以发布这样的例子。

麦克风

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T09:53:38.730

干得好：

[http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

# java - Slick-2D：改回默认操作系统光标

> ID：11774979
> 
> 赞同：1
> 
> 时间：2012-08-02T09:49:31.867
> 
> 标签：java, slick2d

我修改了我的光标

```
cotainer.setMouseCursor(Image image, int hotSpotX, int hotSpotY) 
```

设置后如何将其更改回系统默认值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:56:30.613

尝试`container.setMouseCursor(org.lwjgl.input.Cursor.CURSOR_8_BIT_ALPHA, int hotSpotX, int hotSpotY);`检查它是否有效，或者它是否不是您想要的..

编辑：这里`container.setDefaultMouseCursor()` [参考](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/GameContainer.html#setDefaultMouseCursor%28%29)

# html - 如何为背景图像提供 alt 和标题？

> ID：11774984
> 
> 赞同：10
> 
> 时间：2012-08-02T09:49:57.777
> 
> 标签：html, css, background

如何为背景图像提供 alt 和标题？是否可以？

```
<div id="cont"></div>

  #cont
  {
     background:#FFF url(../images/post.png) no-repeat;
  } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T09:52:18.907

您不能为 CSS 背景指定 alt 和标题，但可以为 div 指定标题。

```
<div id="cont" title="Title!"></div> 
```

标题将在 div 元素上的鼠标空闲时弹出。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T09:51:58.337

不，因为背景图像只是一个装饰元素，*不应该有任何语义含义*。HTML 用于*语义*和*意义*，CSS 仅用于视觉外观。如果图像非常重要以至于它应该有一个后备`alt`文本，那么就让它成为一个 HTML`<img>`元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-20T15:17:10.880

给 div 本身添加一个标题标签很简单。

关于 alt，如果你迫切需要它，主要的方法是在高度 =“100%”和宽度 =“100%”的 div 中放置一个 img，或者，如果这妨碍了你，添加一个div中的1px img，带有alt，但不会被看到。如果 img 妨碍您并遮挡其他元素，zindex 也可能会有所帮助。

祝你好运，亚历克斯

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-02-26T23:20:21.420

是的，这在 PHP 中是可能的。

```
if($moon==0)
  {$icon_moon="background: url(mp0.png); background-repeat: no-repeat; 
   background-size: 15px 15px; background-position: right top";
   $title_mph = "Moon phase new";} 
```

在这种情况下，变量`($icon_moon)`被插入到表中以便像这样定位

也可以通过这种方式添加 Alt 文本。

# android - TextView 高度不匹配_parent / fill_parent

> ID：11774988
> 
> 赞同：3
> 
> 时间：2012-08-02T09:50:07.403
> 
> 标签：android, android-layout, layout, textview, fill-parent

我有一个带有单行的简单 TextView。我想将高度设置为 match_parent/fill_parent，但 Android 的行为只是 wrap_content。

有没有办法强制 TextView 占据所有高度？

Tkx

编辑 ：

这就是我得到的：

![在此处输入图像描述](../Images/a77a311ccf6e6f41372097f82eda1c5e.png) 和我的布局：

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

<TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center"
        android:paddingLeft="13dp"
        android:paddingRight="3dp"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

        [...]

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:15:33.157

您可以将**TextView**高度设置为**match_parent/fill_parent**。并根据您的要求更改该TextView**的****重力**和**所有其他属性。**

 **如果这对你来说还不够，那么让我知道你到底想做什么。

**编辑：**

根据您新编辑的代码，我处理了您的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="match_parent" 
android:layout_width="match_parent">
<TextView android:id="@+id/date" 
    android:layout_width="wrap_content"
    android:layout_height="match_parent" 
    android:gravity="center"
    android:paddingLeft="13dp" 
    android:paddingRight="3dp"
    android:textStyle="bold" 
    android:textColor="#ffffff" 
    android:text="dateText"/>
</RelativeLayout> 
```

现在它在整个屏幕的**central_vertical位置显示****TextView 。**

 **试试这个代码。它的工作。像我对这些所做的那样更改您的**RelativeLayout**和**TextView 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:14:42.083

对于该`TextView`父宽度，您可以使用`wrap_content`.****

# java - Java Timer 在特定时间停止进程

> ID：11774991
> 
> 赞同：0
> 
> 时间：2012-08-02T09:50:14.600
> 
> 标签：java, timer, scheduled-tasks, quartz-scheduler

如何在特定时间停止java中的计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:21:15.920

```
Timer particularTimer = new Timer();
    final Timer certainTimer = new Timer();//u can declare a final timer for certain process
    particularTimer.schedule(new TimerTask() {
        public void run(){
            System.out.println("run particularTimer");
            certainTimer.schedule(new TimerTask() {
                public void run() {
                    System.out.println("run certainTimer");
                }
            }, 5000);// it's my start time in milliseconds

        }
    }, 5000);

    //eg
    Thread.sleep(6000);
    particularTimer.cancel();//when u cancel the particularTimer,and u can cancel the certainTimer too.
    certainTimer.cancel(); 
```

# service - 我可以控制在运行 Azure 实例的 VM 上启动哪些 Windows 服务吗？

> ID：11774995
> 
> 赞同：0
> 
> 时间：2012-08-02T09:50:21.697
> 
> 标签：service, azure, azure-web-roles

最近，我尝试枚举运行我的 Azure Web 角色实例的 VM 上的 Windows 服务`ServiceController.GetServices()`- 其中有很多，包括`Telephony`我`CloudDrive`不需要的，因此启动它们是一种资源浪费。

是否可以不启动它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:07:12.963

是的，但您需要[启动任务](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)来执行此操作。以下是停止和禁用电话服务的方法：

```
sc.exe stop TapiSrv
sc.exe config TapiSrv start= disabled 
```

如您所见，我没有使用显示名称（电话），但我使用的是服务名称（TapiSrv）。如果您想获取系统的服务名称列表，您可以简单地执行此命令（在 Azure 中，您可以通过 RDP 执行此操作）：

```
sc.exe query 
```

执行此命令还将为您提供服务的状态（正在运行，...）。

**注意：**调用 sc.exe config 时，需要在等号后加一个空格。

**注意：**停止服务可能需要一些时间，因此我建议您使用[后台任务](http://msdn.microsoft.com/en-us/library/windowsazure/hh124132.aspx)来停止/禁用服务，以将您的实例的启动时间保持在最低限度。

# spring - Spring + 负载均衡/集群

> ID：11774998
> 
> 赞同：6
> 
> 时间：2012-08-02T09:50:27.533
> 
> 标签：spring, cluster-computing, load-balancing

我正在开发一个 webapp 项目，我们正在考虑将它部署在多台服务器上。

您建议使用 Spring 进行集群/负载平衡的解决方案是什么？

有哪些问题需要考虑？

例如：**单例在机器集群中的行为如何**？会话复制呢？还有其他需要考虑的问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T09:57:10.980

以下是可能的问题列表（不一定与 Spring 相关）：

*   **有状态的 bean** - 如果你的 bean 有状态，比如收集某些东西或计数器的集合，你需要考虑是否应该复制这个状态。例如，这个计数器应该是一个 JVM 的本地计数器还是整个​​集群中的全局计数器？在后一种情况下，请考虑[赤土陶器](/questions/tagged/terracotta "显示标记为“兵马俑”的问题")和[榛树](/questions/tagged/hazelcast "显示标记为“hazelcast”的问题")

*   **文件系统**- 只要所有实例使用相同的数据库，一切都很好。但是如果一个节点写入磁盘，其他实例就无法读取它。解决方案？将数据库用于所有存储或分布式文件系统

*   **HTTP 会话**- 使用粘性会话或复制会话。如果您进行复制，请尽可能减少会话。

*   **异步作业**- 如果您有一个每小时运行的作业，它应该在每台机器上运行，还是只在专用机器上运行（或者可能是随机的）？