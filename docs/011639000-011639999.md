# StackOverflow 问答 11639000-11639999

# java - 如何在授权 Java 程序写入 Web 服务器文件夹时保护它

> ID：11639002
> 
> 赞同：0
> 
> 时间：2012-07-24T20:43:45.077
> 
> 标签：java, php, linux, apache, file-permissions

我的一个网站页面（用 PHP 编写）在后台启动 .jar 存档之前操作 MySQL 数据库，使用以下命令：

```
nohup java -jar myJar.jar > /dev/null & 
```

此 jar 在文件夹（当前文件夹或子文件夹）中创建一个文本文件。为了让我的 Java 程序写入文件，我必须在文件夹（或其子文件夹之一）上为（所有用户）设置`w`（写入）权限。`a``www`

根据我阅读的内容，解决方案之一是仅将写入权限授予 www-data，即 Apache。但是我看不出它比 777 chmod 更安全，因为黑客总是有权通过他的浏览器进行写入。

你知道一个解决方案：

*   让我的服务器尽可能安全。
*   允许我的 Java 程序（由 PHP 启动）在服务器上创建和修改文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:00:43.480

将您的 java 程序作为守护程序运行，并使用其自己的用户来编辑该特定文件夹。

将其设置为监视文件或数据库以查看它是否需要运行并执行其操作。然后，当您的 php 脚本需要它时，只需修改文件/数据库。

# javascript - 如何将新数组传递给函数？

> ID：11639003
> 
> 赞同：4
> 
> 时间：2012-07-24T20:43:46.450
> 
> 标签：javascript, arrays, function, parameters

这是不好的做法，我知道。这只是为了测试，但我似乎无法让它工作。我可以将一个新的初始化数组传递给 JavaScript 函数吗？

我正在寻找与此 C# 方法等效的 JavaScript：

```
public void MyFunction(new string[]{"1","2","3"})
{    
} 
```

我试过这个，但无济于事：

```
function MyFunction(new array ('1','2','3')) {    
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T20:45:05.983

比这更容易：

```
 function myFunction( arr ) { ... } 
```

然后：

```
 myFunction([1, 2, 3, "hello"]); 
```

在函数**声明**中没有必要（或可能）的类型信息。只需列出参数名称即可。然后，当您调用该函数时，您可以使用数组字面量表示法（就像您可以在任何表达式中实例化一个数组一样）。

# c++ - 修改自身的正在运行的可执行文件

> ID：11639004
> 
> 赞同：4
> 
> 时间：2012-07-24T20:43:53.550
> 
> 标签：c++, windows-ce

我有一个适用于 Windows CE 5 的 Visual Studio 2008 C++ 项目，我希望当前运行的可执行文件能够自行修改。

具体来说，我希望能够读取/写入存储在 exe 文件本身中的一些数据。我不需要（或希望）修改可执行代码。

在常规窗口中，我可以使用字符串资源和[UpdateResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648049%28v=vs.85%29.aspx)函数，但这在 WinCE 中不存在。

[不幸的是， CreateFile](http://msdn.microsoft.com/en-us/library/ms923949.aspx)失败，因为该文件已在使用中。

有人有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:55:57.337

首先，为什么需要这样做？您应该可以使用其他方法来执行此操作。

我对 Windows-CE 不是特别熟悉，但如果需要，您可以复制文件，编辑副本，删除第一个，然后运行另一个。这是一种低效的方法，但如果您只需要在程序范围内执行一次或两次并且速度不是问题，我想您可以这样做：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main(int argc, char * argv[]) {
    // Check if this IS the copy:
    if (argv[0].find(argv[1]) != string::npos) {
        system("taskkill -IM myOLDfile.exe"); // Stop the old one running,
        system("del myOLDfile.exe"); // Then delete it.
    }

    ifstream myself(argv[0]); // argv[0] is the program itself
    string fullcode;
    string line;
    if (file.is_open()) {
        while (file.good()) {
            getline(myself, line);
            line.append("\n");
            fullcode.append(line);
        }
    }
    myself.close();
    // Do whatever you need to do to the code here.
    ofstream newcode("myNEWfile.exe");
    newcode.write(fullcode);
    newcode.close();
    system("myNEWfile.exe myNEWfile.exe"); // Starts new file. Also, not a typo.
} 
```

祝你的项目好运！

# actionscript-3 - Flex 4 以编程方式将项目添加到

> ID：11639005
> 
> 赞同：0
> 
> 时间：2012-07-24T20:43:57.363
> 
> 标签：actionscript-3, flash, apache-flex, list, actionscript

如何将项目添加到`<s:List>`具有项目渲染器的 Flex 4 组件？这是我想将数据附加到的列表的代码示例：

```
<s:List contentBackgroundAlpha="0" borderVisible="false" id="reviews"
            itemRenderer="renderers.ReviewRenderer" dataProvider="{data}"
            top="10" minHeight="1">
  <s:layout>
    <s:VerticalLayout useVirtualLayout="false" requestedMinRowCount="1" gap="35"/>
  </s:layout>
</s:List> 
```

绑定到的`data`变量`<s:List>`将具有与我想附加到列表中的对象完全相同的属性。

如果我可以提供更多详细信息，请告诉我。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:17:32.880

> 如何将项目添加到具有项目渲染器的 Flex 4 组件？

你不会的。您将向列表的 dataProvider 添加一个项目。然后列表根据布局和itemRenderer等其他因素决定如何在dataProvider中显示元素。出于视觉目的，查看列表的一种方法是作为 itemRenderer 的集合。列表中每个显示的项目都有一个 itemRenderer。

在大多数情况下，列表中显示的项目将少于 dataProvider 中的项目。itemRenderer 在列表滚动时被重新使用，并且 itemRenderer 实例上的 data 属性被修改。

因此，如果您想知道如何将项目添加到 List 的 dataProvider，这取决于 dataProvider 类型。假设一个 ArrayCollection，你应该这样做：

```
this.data.addItem(myNewItem); 
```

# visual-studio-2005 - 我怎么能打电话给我的visual studio 2005图表添加一个大标题

> ID：11639008
> 
> 赞同：0
> 
> 时间：2012-07-24T17:05:28.983
> 
> 标签：visual-studio-2005

请原谅这个简单的问题，但我是 Visual Studio 的新手，我已经有一个带有“图表标题”的条形图，但是除了已经存在的标题之外，我还需要在我的项目顶部添加一个更大更粗的标题。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:54:53.363

在图表属性中有一个名为 Titles 的字段。您可以根据需要添加任意数量：

![在此处输入图像描述](../Images/60bc47de4e8aa9a5b17649bd36515926.png)

# vim - 在 Ex 模式下指定命令的位置

> ID：11639015
> 
> 赞同：2
> 
> 时间：2012-07-24T20:44:19.537
> 
> 标签：vim

我想从以下几行中删除百分比标记：

```
oh_test_() ->
    [
        %{"fold", ?_test(fold(ns()))},
        %{"fold nested", ?_test(fold_nested(ns()))},
        %{"push arg empty table", ?_test(push_arg_empty_table(ns()))},
        %{"push arg table 1", ?_test(push_arg_table1(ns()))},
        %{"push arg nested table", ?_test(push_arg_nested_table(ns()))},
        %{"multicall 0", ?_test(multicall_0(ns()))},
        %{"multicall 1", ?_test(multicall_1(ns()))},
        %{"multicall 2", ?_test(multicall_2(ns()))}
    ]. 
```

光标与 first 一致`%`。

```
:,/%/s/%// 
```

或者：

```
:,/%/normal ^x 
```

预期：删除所有百分比标记。结果：仅删除前两个百分比标记。

1.  为什么？
2.  我该怎么做
    *   不使用可视模式，并且
    *   不计算行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T23:42:23.903

问题一：

你的 range:`,/%/`从当前行开始大致翻译。范围的结尾将是`/%/`当前光标行之后匹配的下一行。这将产生 2 行。有关`:h :,`更多信息，请参阅。

问题2：

有很多方法可以做到这一点。您已经提出了一个`normal`和一个`s///`方法。修复命令的一种方法是调整范围。以下其中一项将起作用：

*   `,/\]\./-1`匹配结尾`].`然后减去一行
*   `,/^\s*%\(.*\n\s*%\)\@!/`使用否定前瞻来搜索不以 .​​ 开头的行`%`。

你可以一起使用：

```
:,/\]\./-1s/%//
:,/^\s*%\(.*\n\s*%\)\@!/s/%//
:,/\]\./-1norm ^x
:,/^\s*%\(.*\n\s*%\)\@!/norm ^x 
```

使用宏的替代方法。在这种情况下使用宏的好处是当发生错误时它会停止。基本上你记录一个宏来搜索`%`然后删除它然后移动到下一行。多次执行此宏。当`%`找不到 a 时，宏将停止。

```
qq0f%xjq999@q 
```

在这种情况下，宏是我的首选方法，因为我不需要做任何疯狂的模式或去寻找块的结尾。

如果您允许使用可视模式，我会建议`vi]k:norm ^x`

有关更多信息，请参阅：

```
:h range
:h :,
:h /\@!
:h q
:h @q
:h i] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:55:09.800

您的第一个示例基本上是在说...从我当前的位置直到下一个 % 发出命令 s/%//...

你可能想做的是

```
:,$ s/%// 
```

也就是说，对于从我当前位置到文件结尾 ($) 的每一行，发出命令 s/%//

如果您不想在文件末尾执行此操作，那么您可以

```
:set number 
```

这将显示您的行号，然后执行类似的操作

```
:2,8 s/%// 
```

它只是为 2-8 的所有行发出命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:00:12.627

您似乎正在以应该使用`:,/%/`的方式使用`:g/%/`. 您可以这样使用您的命令：`:g/%/s/%//`或`:g/%/norm f%x`

有关“全局”命令的更多信息，请参阅`:help :g`。这基本上在与模式匹配的行上执行命令模式命令。您的版本，`:,/%/`从当前行开始运行，直到匹配“%”。这会删除前两个，因为当前行有一个，而您正在搜索有一个的行（下一行）。您可以在 中阅读有关此内容的更多信息`:help :range`。使用此选项的更好方法是使用仅位于最后一行的搜索项。例如，`:,/]/s/%//`或`:,/]/norm f%x`。

# c# - .Net wsFederationHttpBinding 和 SAML2.0

> ID：11639018
> 
> 赞同：0
> 
> 时间：2012-07-24T20:44:28.930
> 
> 标签：c#, .net, wcf, wcf-security, wsfederationhttpbinding

好的，我已经使用 wsFederationHttpBinding 创建了一个 SAML 实现，但我不想加密 soap:Body。

如此处指定[http://msdn.microsoft.com/en-us/library/system.servicemodel.wsfederationhttpsecuritymode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.wsfederationhttpsecuritymode.aspx)

它说“消息安全模式”将，

> 默认情况下，正文是加密和签名的。

如何关闭 Body 的加密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:39:48.840

实际上我找到了比创建自定义绑定更简单的方法

```
[System.ServiceModel.ServiceContractAttribute(ConfigurationName="Service.IService",
ProtectionLevel= System.Net.Security.ProtectionLevel.Sign)] 
```

服务的保护级别可以告诉 wsFederatedHttpBinding 天气或不签署和加密或只是签署消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:53:33.227

You need to create a custom Binding.

[http://msdn.microsoft.com/en-us/library/ms731827](http://msdn.microsoft.com/en-us/library/ms731827)

# google-chrome - 阻止 Chrome 存储背景图像

> ID：11639019
> 
> 赞同：0
> 
> 时间：2012-07-24T20:44:36.973
> 
> 标签：google-chrome

如何阻止 chrome 存储我的背景图像。我知道 chrome 这样做是为了加快浏览速度，但是在 web 开发时，这很烦人。我也不只是想禁用所有缓存，只是不刷新背景图像的部分。现在每次更改图像时，我都必须转到设置并删除所有缓存。任何帮助将非常感激。

谢谢伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:41:58.640

规范的答案是在文件名的末尾附加一个随机数参数。服务器忽略它，但浏览器认为它不是同一个文件。所以，如果你有

```
<img src="pic.png" /> 
```

将其更改为

```
<img src="pic.png?a=123" /> 
```

其中 123 是每次页面加载时生成的随机数。

您甚至可以使用文件的 MD5 校验和，以便仅在文件实际更改时才绕过缓存。这有一个额外的好处，如果您在部署站点之前忘记删除缓存破坏器，用户将不会受到它的影响。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T20:54:03.780

右上角扳手 -> 工具 -> 开发者工具 -> 右下角齿轮 -> 勾选“禁用缓存”

# javascript - 根据 jQuery 1.7 中的文本检查是否存在选择选项

> ID：11639023
> 
> 赞同：6
> 
> 时间：2012-07-24T20:44:58.090
> 
> 标签：javascript, jquery, html, jquery-selectors

所以我有以下 HTML：

```
<select id="sel">
<option value="0">Option1</option>
<option value="1">Option2</option>
<option value="2">Option3</option>
<option value="3">Option4</option>
</select> 
```

如何检查#sel 是否有基于文本值的选项？（“选项1”）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T20:51:29.460

尝试以下操作：

```
var opt = 'Option1';
if ($('#sel option:contains('+ opt +')').length) {
   alert('This option exists')
} 
```

[演示](http://jsfiddle.net/FPDCu/)

编辑：上面的代码片段使用 jQuery`contains`选择器来过滤其 textContent*包含*指定值的元素。对于完全匹配，您可以使用 christian-mann's answer 中建议的代码片段。

> 如何使用 Javascript（不是 jquery）来做到这一点 – Jerry

```
var optionExists = [].some.call(document.getElementById('sel').options, function(option) {
   return option.textContent === 'value';
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T20:52:46.103

jQuery 过滤器函数接受一个函数作为其参数：

```
$('#sel option').filter(function() { 
    return $(this).text() === "Option1"; 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-31T14:22:19.013

```
var length = $('#sel option').filter(function() { 
    return $(this).text() === "Option1"; 
}).length;

if(length == 0)
    console.log('This option text doesn't exist.');
else
    console.log('This option text exists ' + length + ' times.'); 
```

如果长度为0，则不存在。我通常不喜欢使用包含，因为它不是完全匹配的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:51:28.087

```
var hasOption1=$("option:contains('Option1')", "#sel").length==1; //true or false 
```

# php - MySQL 需要 18 个查询，或者我可以只使用一个吗？

> ID：11639027
> 
> 赞同：0
> 
> 时间：2012-07-24T20:45:13.920
> 
> 标签：php, mysql

我正在为一些朋友创建一个高尔夫比分跟踪数据库，并且在从结果中检索特定值的最佳方法方面遇到了麻烦。

我有桌子：

```
Players - stores player info
Hole - stores basic info about a hole (CourseID, HoleNum, Par...)
Score - stores each hole they played (HoleID, NumStrokes...) 
```

我的目标是输出一个表格，显示每个洞（1-18）的结果。以下查询为我提供了他们打过的所有洞的列表以及他们完成该洞所用的击球数。

```
SELECT Hole.HoleID, NumStrokes
FROM Players
INNER JOIN Score ON Score.PlayerID = Players.PlayerID
INNER JOIN Hole ON Score.HoleID = Hole.HoleID
WHERE Players.PlayerID = '$PlayerID' 
```

结果如下：

```
HoleID      NumStrokes
1           4
1           6
1           3
2           5
7           3 
```

我是否必须运行 18 个不同的查询，每个我输出的孔一个，通过添加：

```
AND Hole.HoleID = '$HoleID' 
```

到我的查询，还是有更好的 SQL 查询可以使用？Hole 表也作为一个圆形标识符，所以不用担心确定我需要哪个 HoleID 的 NumStrokes。顺便说一句，我正在使用 PHP。希望我的问题足够清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:40:07.040

```
$conn = new mysqli('host','user','pass','db_name');

$PlayerID = (int) $_GET['PlayerID'];

$rs = $conn->query("
    SELECT Hole.HoleID, NumStrokes
    FROM Players
    INNER JOIN Score ON Score.PlayerID = Players.PlayerID
    INNER JOIN Hole ON Score.HoleID = Hole.HoleID
    WHERE Players.PlayerID = $PlayerID
") or die($conn->error);
while($row = $rs->fetch_object()) {
    echo $row->HoleID.' - '.$row->NumStrokes.'<br/>';
} 
```

这将为玩家输出结果。您可以对 mysql_* 函数执行相同的操作，但由于它们已被弃用，因此最好使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)

# c# - LINQ to XML 如何更新值

> ID：11639028
> 
> 赞同：-6
> 
> 时间：2012-07-24T20:45:13.827
> 
> 标签：c#, xml, linq

> **可能重复：**
> [LINQ TO XML，如何用新值替换值 c#](https://stackoverflow.com/questions/11637263/linq-to-xml-how-to-replace-values-with-new-values-c-sharp)

```
<BasicImport xmlns="http://www.uk.nds.com/SSR/XTI/Traffic/0010" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.uk.nds.com/SSR/XTI/Traffic/0010 0010.xsd" utcOffset="+05:30" frameRate="25">
  <SiEventSchedule deleteStart="2012/01/21 00:00:00" deleteEnd="2012/01/21 23:59:59">
    <siService>Saman</siService>
    <playoutSource>Saman</playoutSource>
    <activationSourceId>0</activationSourceId>
    <CaSchedule deleteStart="2012/01/21 00:00:00" deleteEnd="2012/01/21 23:59:59" />
    <SiEvent>
      <displayDateTime>2012/01/21 00:00:00</displayDateTime>
      <activationDateTime>2012/01/21 00:00:00</activationDateTime>
      <displayDuration>00:30:00</displayDuration>
      <siTrafficKey> 056049263</siTrafficKey>
      <detailKey>056049263 2012-07-12</detailKey>
     </SiEvent>
   </SiEventSchedule>
<BasicImport> 
```

我只想替换`<displayDateTime>`节点的日期值。请注意，我不想更改此节点的时间值...请在 C# 代码中提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:57:57.697

```
var node = XElement.Load("LoadFrom");
                var TheNodeToChange = trayNode.Descendants("displayDateTime").First();
                var oldDateTime = DateTime.Parse(TheNodeToChange.Value);
                var newDateTime = oldDateTime;//.DoSomething();
                TheNodeToChange.Value = newDateTime.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:52:10.240

DateTime 构造函数之一采用 Year、Month、Day、Hour、Minute、Second。因此，给定 OldDate，您可以使用

`new DateTime( newYear, newMonth, newDay, OldHour, OldMinute, OldSecond)`

# compact-framework - 为紧凑框架预编译 protobuf-net 类型模型

> ID：11639029
> 
> 赞同：2
> 
> 时间：2012-07-24T20:45:14.860
> 
> 标签：compact-framework, deserialization, protocol-buffers, protobuf-net

我正在反序列化紧凑框架（3.5）上的数千个对象，而且速度很慢。用设备 20 多秒完成。我发现它是通过反射完成的，而不是像非紧凑型对应物那样编译和运行。所以我想，我可以先预编译并生成一个类型模型dll吗？

所以我做了以下事情：

1.  将所有 Contract 类提取到智能设备 dll（它引用 Protobuf-net CF3.5 Dll）
2.  创建一个桌面 3.5 控制台应用程序，引用 Protobuf-net "Desktop" Dll 和上面创建的 Contract Dll。

    ```
    class Program
    {
      static void Main(string[] args)
      {
        var bb = TypeModel.Create();

        foreach (var t in Assembly.GetAssembly(typeof(My.ContractX)).GetTypes())
        {
            var contract = t.GetCustomAttributes(typeof (ProtoBuf.ProtoContractAttribute), false);
            if (contract.Length > 0)
            {
                bb.Add(t, true);
            }
        }
        bb.Compile("My.TypeModel", "My.Serialization.dll");
      }
    } 
    ```

3.  回到设备项目，引用Contract DLL、生成的My.Serialization.dll、Protobuf-net CF3.5 Dll。
4.  不使用默认模型，而是将其修改为使用“new TypeModel()”构造的模型进行反序列化

它实际上编译正确。我在Reflector中查看了生成的dll，和预期的一样。

除了在运行时，它会抛出 MissingMethodException。然而，由于紧凑的框架没有报告这一点，所以缺少的正是缺失的内容。

我敢打赌，因为生成的 My.Serialization.dll 实际上是指“桌面”dll，但缺少某些方法。

那么回到我的问题，我怎样才能实现类型模型预生成以在紧凑框架中使用？或者我可以通过做其他事情来提高性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:13:43.757

好消息，我怀疑。我在交叉编译问题上花费了相当多的时间（好吧，我主要是受人们询问 WP7 和 WinRT 的影响），最终开发了一个[全新的跨平台预编译器](http://marcgravell.blogspot.co.uk/2012/07/introducing-protobuf-net-precompiler.html)。

这已经完成了您的代码所做的工作，即它`[ProtoContract]`在输入程序集/程序集中查找所有类型。老实说，我还没有为 CF 尝试过，但我很有希望。我**真的很想**听听你过得怎么样。我没有针对 CF 对其进行测试的唯一原因是我的 VS2008 VM 的外部驱动器死机了。

用法：

```
precompile {some path}\YourCFDto.dll –o:MySerializer.dll –t:MySerializer 
```

注意：目前您需要从源代码构建“预编译”，但如果这是一个问题，我可以发布它。

如果您有任何问题，请告诉我。

# c# - 停止 WCF MessageInspector 自动将消息编码为 Base64String

> ID：11639033
> 
> 赞同：0
> 
> 时间：2012-07-24T20:45:28.510
> 
> 标签：c#, .net, wcf, bytearray, base64

我有一个实现[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)的类 MessageInspector ，并且在它的 BeforeSendReply 方法中，我拦截了所有 WCF 回复，因此我可以在发送消息之前压缩数据。数据是一个字节数组。

问题是当我使用压缩的 ByteArray 重新构造消息时，WCF 将消息编码为 Base64String 然后将其发送出去，有没有办法禁用这种自动编码？

代码：

```
public void BeforeSendReply(ref Message reply, object correlationState)
{
    if (!reply.IsFault && !reply.IsEmpty)
    {
        //read json
        XmlDictionaryReader bodyReader = reply.GetReaderAtBodyContents();
        MemoryStream ms = new MemoryStream();
        XmlDictionaryWriter jsonWriter = JsonReaderWriterFactory.CreateJsonWriter(ms);
        jsonWriter.WriteNode(bodyReader, true);
        jsonWriter.Flush();

        //compress data
        byte[] ba = ms.ToArray();
        byte[] data = ZLibCompressor.Compress(ba);

        //rebuild and send reply
        Message newReply = Message.CreateMessage(MessageVersion.None, null, data);
        reply = newReply;
    }
} 
```

在浏览器中回复：

![WCF 在 Firefox 中获取回复](../Images/3218c93dfbea5dec5bd535a49cdfc79c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:58:14.533

答案可能在这里：

[使用 WCF 绕过 base64 编码](https://stackoverflow.com/questions/4063595/getting-around-base64-encoding-with-wcf)

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/c32a34c3-dfda-4c54-ab13-fd595fb883ab](http://social.msdn.microsoft.com/Forums/en/wcf/thread/c32a34c3-dfda-4c54-ab13-fd595fb883ab)

看看这个……你也许可以使用 CreateBinaryWriter 将消息写成二进制。

[将自定义 WCF 消息发送到服务](https://stackoverflow.com/questions/8809084/sending-custom-wcf-message-to-a-service)

[http://www.techbubbles.com/webservices/wcf-service-using-mtom-in-net-fw-4/](http://www.techbubbles.com/webservices/wcf-service-using-mtom-in-net-fw-4/)

# mingw - 使用 Mingw 在 Windows 中应用补丁文件

> ID：11639036
> 
> 赞同：2
> 
> 时间：2012-07-24T20:45:31.760
> 
> 标签：mingw, patch

如何使用 Mingw 为 Windows 中的源目录应用补丁文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:52:06.373

使用 mingw-get 获取 msys-patch

```
mingw-get install msys-patch 
```

然后只需使用像 unix [http://en.wikipedia.org/wiki/Patch_(Unix](http://en.wikipedia.org/wiki/Patch_(Unix) )这样的补丁

# ios - iOS：NSString 一直为空

> ID：11639038
> 
> 赞同：1
> 
> 时间：2012-07-24T20:45:40.067
> 
> 标签：ios, nsstring, null, tableview

这是一个我似乎无法解决的奇怪问题。

在我的应用程序中，我将 tableviewcontroller 用于自定义对象数组（带有字符串标题），在 showDetailsForIndexPath 方法中，我将对象的字符串值分配给我称为 selectedString 的类变量。这是合成的（仅使用非原子），并且在上述方法中成功设置了值。当涉及到同一个类中名为 PrepareForSegue 的另一个方法时， selectedString 现在为空。我在这里想念什么？

这就是我在头文件中声明它的方式（只是提取，这不是头文件的样子）

```
 NSString *chosenString;

@property (nonatomic) NSString *chosenString; 
```

我假设 * 表示它正在启动，所以不需要在源文件中这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:25:43.163

Cocoa/UIKIt 对象需要在属性中使用“strong”：

```
@property (nonatomic, strong) NSString *chosenString; 
```

# java - Java：创建目录失败

> ID：11639039
> 
> 赞同：1
> 
> 时间：2012-07-24T20:45:43.797
> 
> 标签：java, file-io

我在测试中有以下代码

```
public class TestMe {
  private static final String BACKUP_DIR_PATH = "~/backup";

  @Test
  public static void createBackupDir() throws IOException {
    File path = new File(BACKUP_DIR_PATH + "/" + getFolderName()).getCanonicalFile();
    System.out.println(path.mkdirs());
  }

  // returns 2012-07-23
  private static String getFolderName() {
    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date = new Date();
    return dateFormat.format(date).toString();
  }
} 
```

当我运行此测试时，它会返回`false`

`backup`和`2012-07-23`文件夹都不**存在**

这里有什么不正确的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T20:47:25.980

可能是因为Java不知道是什么`~`意思。

这`~`是一个 shell 扩展，不是一个有效的路径名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T20:52:25.327

尝试这个：

```
 private static final File HOME_DIR = new File(System.getProperty("user.home"));
 private static final File BACKUP_DIR = new File(HOME_DIR, "backup"); 
```

然后从那里去。通常，最好避免像您正在做的那样通过附加字符串来构建路径。请改用这些`File`方法来构建您的路径。

请注意，检索用户的主目录属性需要任何已安装的安全管理器的批准，因此您的代码应该准备好处理`SecurityException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:50:37.323

你是在windows系统上运行吗？如果是这样考虑使用 File.separator 而不是“/”，所以代码是平台独立的。

还使用 System.getProperty("user.home")) 而不是 "~" 使其与平台无关。

# sql-server - 选择查询以获取 SQL Server 中的总记录数

> ID：11639040
> 
> 赞同：0
> 
> 时间：2012-07-24T20:45:50.800
> 
> 标签：sql-server

嗨，我有一个带有状态列的表。如何使用 SQL 获取记录总数、通过状态的记录总数和失败状态的记录总数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:47:08.717

像这样的东西怎么样：

```
SELECT Status, COUNT(*)
FROM dbo.YourTable
GROUP BY Status WITH ROLLUP 
```

如果这两种状态（通过，失败）是唯一的状态（否则您将需要`WHERE Status IN ('fail', 'pass')`另外一个条件），这将起作用 - 并且`WITH ROLLUP`还将为您提供所有状态的总行数（`Status = NULL`在输出中带有 a）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:51:08.930

我会写一个类似于

```
select 
Count(*) as TotalRecords, 
Sum(case where status = 'Pass' then 1 else 0 end) as PassRecords,
Sum(case where status = 'Fail' then 1 else 0 end) as FaileRecords
from Table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:00:06.793

A couple of other alternatives (SQL Server 2008+):

```
DECLARE @foo TABLE([status] CHAR(4));

INSERT @foo SELECT 'pass'
UNION ALL SELECT 'pass'
UNION ALL SELECT 'fail';

-- option #1:

SELECT [status], c = COUNT(*)
FROM @foo
GROUP BY GROUPING SETS(([status]), ());

-- option #2:

SELECT [status], c = COUNT(*)
FROM @foo
GROUP BY [status]
UNION ALL 
SELECT NULL, COUNT(*) OVER() FROM @foo; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:50:33.280

您可以使用 case 语句和聚合来做到这一点：

```
select count(*), sum(case when status = 'pass' then 1 else 0 end) as pass,
       sum(case when status = 'fail' then 1 else 0 end) as fail
from t 
```

# gwt - 菜单栏中的选定项

> ID：11639042
> 
> 赞同：-2
> 
> 时间：2012-07-24T20:45:54.730
> 
> 标签：gwt, google-apps-script, menubar

我有两个问题：

1.  如何在参考 1 中描述的子菜单上获取 selectedItem（另请参见参考 2），可在 Google 应用程序脚本中使用
2.  参考文献3与这个问题有关吗？如果是，请star，以便引起注意！

=====

1.  [堆栈溢出问题](https://stackoverflow.com/questions/11549869/add-handlers-dynamically-to-dynamically-created-menu)
2.  [参考 Vaadin (GWT)](https://vaadin.com/book/-/page/components.menubar.html)
3.  [第 1413 期](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1413)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:09:39.030

您应该为每个项目创建不同的服务器处理程序，每个项目都指向不同的回调函数。

# crystal-reports - 具有 NULL 值的 Crystal Reports 公式

> ID：11639044
> 
> 赞同：2
> 
> 时间：2012-07-24T20:46:00.237
> 
> 标签：crystal-reports

我正在使用水晶报表 2008。

我在使公式的语法正确时遇到问题。

该报告按客户分组。我有 2 个命令。第一个总是有价值的，但第二个对一些客户有价值，但不是全部。

我需要做的是编写一个公式，如果第二个命令没有该客户的值，它将只使用第一个命令的值。如果第二个命令确实有一个值，那么它应该取命令一和二的总和。

我试过这样：

```
IF ISNULL({Command_2.fin_bal_60}) THEN

  {Command_1.inv_bal_60}

ELSE

  {Command_1.inv_bal_60} + {Command_2.fin_bal_60} 
```

这不起作用，因为当我将它放入报告时，它只显示在 command_2 中有值的记录。

我试图弄清楚如何写这个，所以即使command_2没有返回一个值，它也只是使用command_1。

对此的任何帮助都会很棒。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:19:38.400

这个公式似乎是正确的，所以你不必看那里。

我认为问题在于您链接表“Command_2”（菜单[数据库，数据库专家]）的方式。假设它是一个外部表，当您将链接类型从“INNER JOIN”更改为“LEFT OUTER JOIN”（双击链接行以更改设置）时，您可能会有很好的机会解决这个问题。

如果您不使用表中的字段，则 Crystal Reports 会忽略该表，并且不会在基础 SQL 查询中使用它。因此，在这种情况下，不会出现此问题。这就解释了为什么它仅在您将公式字段放入报告中时才会发生，然后您使用“Command_2”表。

# windows - 在为 Windows 8 安装 VS 2012 之前，是否需要卸载所有以前的 VS 痕迹？

> ID：11639046
> 
> 赞同：1
> 
> 时间：2012-07-24T20:46:05.167
> 
> 标签：windows, visual-studio, windows-7, installation, visual-studio-express

在适当的 msdn 论坛（Visual Studio 开发人员中心 > Visual Studio vNext 论坛 > Visual Studio 设置和安装）上四个小时，而不是一口，所以我会在这里尝试：

我正在尝试在我的笔记本电脑上安装 Visual Studio for Windows 8，我刚刚安装了 Windows 8 OS RC。

我已经安装了 Visual Studio 2012 Pro RC（适用于 Windows 7）。

我尝试为 w8 安装 VS，但在安装 10-12 小时后（它似乎停留在“混合”周期），我取消并决定卸载 VS 2012 的两个版本（W8 之前的 Pro 和 W8 的 Express ) 在继续安装适用于 Windows 8 的 VS Express 2012 之前。

控制面板在我的已安装应用程序列表中显示了两个版本的 VS 2012，尽管 W8 版本尚未完成安装（我确实尝试运行它，看看它是否会 - 它不会）。

无论如何，我为 W8 卸载了 VS 2012，并且正在卸载 VS 2012 Pro；这是意料之中的吗（在安装新版本之前需要先卸载以前的版本）？

注意：控制面板显示两个版本的 VS 2012 已于 7 月 23 日（昨天）安装，而我真的在一个月前安装了 VS 2012 Pro……这是因为它的某些组件更新了，还是。 ..???

顺便说一句，我还安装了 VS C# Express - 在为 W8 安装 VS Express 2012 之前，我是否也需要卸载它？

另外，我下载了 W8 操作系统，将其刻录到 DVD，创建了一个（100 GB）分区，这样我就可以同时拥有 W7 和 W8，但是我的笔记本电脑没有从 BIOS 设置屏幕提供“从光学启动”选项，所以而不是将 W8 安装到我的新分区，我必须从 DVD 安装 W8（没有选择安装它的分区），从而覆盖 Windows 7 以安装 Windows 8 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:10:04.270

显然答案是先卸载以前版本的 Visual Studio 2012；虽然我没有卸载 C# Express 2010。这次它安装得很好，所以这是我最好的猜测。

要么是那个，要么是“只是其中之一”。

# json - Json / gson（反）序列化嵌套对象

> ID：11639049
> 
> 赞同：1
> 
> 时间：2012-07-24T20:46:23.377
> 
> 标签：json, nested, deserialization, gson

关于如何用 gson 处理这种 json 结构的任何想法？或者如果更适应的话，其他库

```
[{
    "name": "john",
    "link": []
}, {
    "name": "mike",
    "link": [{
        "name": "kate",
        "link": []
    }, {
        "name": "john",
        "link": []
    }]
}, {
    "name": "jane",
    "link": [{
        "name": "tyler",
        "link": [{
            "name": "evan",
            "link": []
        }]
    }]
}] 
```

对象列表（名称，链接），链接这些对象的相同类型列表，
因此深度可变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:57:40.140

JSON 结构非常适合多维数组或多维列表。使用 Gson 反序列化它相对简单。

```
import java.io.FileReader;
import java.util.List;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.reflect.TypeToken;

public class GsonFoo
{
  public static void main(String[] args) throws Exception
  {
    Gson gson = new GsonBuilder().create();

    // Deserialized as a multidimensional array:
    BarsArray[] barsArray = gson.fromJson(new FileReader("input.json"), BarsArray[].class);
    System.out.println(gson.toJson(barsArray));

    // Deserialized as a multidimensional list of lists:
    List<BarsList> barsList = gson.fromJson(new FileReader("input.json"), new TypeToken<List<BarsList>>(){}.getType());
    System.out.println(gson.toJson(barsList));
  }
}

class BarsArray
{
  String name;
  BarsArray[] link;
}

class BarsList
{
  String name;
  List<BarsList> link;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:40:04.410

嗯。明显的对象定义有什么问题：

```
public class Node {
    public String name;
    public Node[] link; // or List<Node>
} 
```

然后绑定`Node[]`或`List<Node>`使用 GSON，或其他数据绑定库（如 Jackson）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:38:07.110

您可以使用 GSON 原始集合 api 手动解析 json。这应该很简单，因为您的结构非常规则。请参阅[此处](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/extras/examples/rawcollections/RawCollectionsExample.java)的示例：

# multithreading - 跟踪并发任务

> ID：11639050
> 
> 赞同：0
> 
> 时间：2012-07-24T20:46:34.007
> 
> 标签：multithreading, c#-4.0, collections

我正在编写一个针对 SQL Server 的轮询系统。检索任务时，它们会使用`Task.Factory.StartNew()`. 整个事情都在一个无限循环中，我只想允许 N 个并发任务。

```
while(true)
{
    // create connection

    while(_concurrentTasks < _allowedTasks)
    { 
        // get job info

        if(!reader.HasRows) break; // no work to do.

        while(reader.Read())
        {
            // fill JobInfo entity from reader

            _taskCollection.Add(Task.Factory.StartNew(() => ProcessJob(jobInfo)));

            _concurrentTasks++;
        }
    }

    // could break for 1 of 2 reasons, threshold met or nothing to do
    if((_concurrentTasks < _allowedTasks)
    {
        // sleep for a predetermined period of time
        Thread.Sleep(60000);
    }
    else
    {
        // wait for one thread to complete and then get more jobs
        Task.WaitAny(_taskCollection.ToArray);   
    }
} 
```

我不确定在这种情况下哪个集合最适合使用，或者如何清理已完成的任务。

如果我将清理代码放在任务本身中，我可以`List<Task>`与`Task.CurrentId`属性一起使用来识别集合中的项目，但我不相信我可以在任务本身中处理集合中的 Task 对象；另请注意，该集合必须是线程安全的。

如果我将某种清理代码放在任务之外（在主线程中），我不需要线程安全集合，但我不知道任务何时在主线程中完成。

那么，我应该使用哪个集合来维护并发任务的列表/数组以便我可以使用`WaitAny()`以及如何在完成时清理列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:56:34.097

我决定在必要时使用一个数组并循环遍历它：

```
Task[] tasks = new Task[_allowedTasks];

while(true)  
{  
    // create connection  

    while(_concurrentTasks < _allowedTasks)  
    {   
        // get job info  

        if(!reader.HasRows) break; // no work to do.  

        while(reader.Read())  
        {  

            for (int i = 0; i < tasks.Length; i++)
            {
                if (tasks[i] == null || tasks[i].IsCompleted)
                {
                    // Dispose of Task at position i

                    nextSlot = i;
                    break;
                }
            }

            // fill JobInfo entity from reader  

            tasks[nextSlot] = Task.Factory.StartNew(() => ProcessJob(jobInfo));  

            _concurrentTasks++;  
        }  
    }  

    // could break for 1 of 2 reasons, threshold met or nothing to do  
    if((_concurrentTasks < _allowedTasks)  
    {  
        // sleep for a predetermined period of time  
        Thread.Sleep(60000);  
    }  
    else  
    {  
        // wait for one thread to complete and then get more jobs  
        Task.WaitAny(_taskCollection.ToArray);     
    }  
} 
```

# visual-studio-2008 - c# 2008 中的 Arraylist 错误

> ID：11639061
> 
> 赞同：0
> 
> 时间：2012-07-24T20:47:25.683
> 
> 标签：visual-studio-2008, arraylist, c#-3.0

我有一个数组列表

```
private ArrayList rps = new ArrayList(); 
```

现在下面的代码在 2005 年可以正常工作，但在 Visual Studio 2008 中却不行

```
int min = Convert.ToInt32(rps.Item(0));
int max = Convert.ToInt32(rps.Item(rps.Count - 1)); 
```

> **错误：** System.Collections.ArrayList 不包含“Item”的定义，并且找不到接受“System.Collections.ArrayList”类型的第一个参数的扩展方法“Item”（您是否缺少 using 指令或程序集引用?`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:49:27.010

使用[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx%28v=vs.90%29.aspx)。

```
int min = Convert.ToInt32(rps[0]); 
```

还可以考虑使用`List<T>`而不是`ArrayList`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:50:08.510

该代码在 VS 2005 中也不起作用。类似的东西可能适用于 VB，但不适用于 C#。C# 代码将是：

```
int min = Convert.ToInt32(rps[0]);
int max = Convert.ToInt32(rps.Item[rps.Count - 1]); 
```

但是，我建议您开始使用通用集合，例如`List<T>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T20:49:54.327

你有一个语法错误：

```
rps.Item(0) 
```

应该：

```
rps[0] 
```

注意 - 你真的不应该使用`ArrayList`- 它早于你*应该*使用的泛型。

# c++ - AutotunedIndexParams 的 OpenCV Flann 问题

> ID：11639062
> 
> 赞同：0
> 
> 时间：2012-07-24T20:47:28.513
> 
> 标签：c++, opencv, feature-detection, feature-extraction

我在使用 AutotunedIndexParams 进行 openCV 2.4.2 flann 索引时遇到问题。如果我使用多个图像来创建索引，程序将退出并输出：

```
trees : 1
terminate called throwing an exception 
```

那是我在 JavaCV 中得到的相同代码的类似错误，其中错误如下：

```
trees : 1
Exception in thread "main" java.lang.RuntimeException: Missing parameter 'algorithm' in the parameters given
    at com.googlecode.javacv.cpp.opencv_flann$Index.allocate(Native Method)
    at com.googlecode.javacv.cpp.opencv_flann$Index.<init>(opencv_flann.java:229) 
```

在 openCVs miniflann.cpp 中，我发现`p["algorithm"]`设置了多行，这可能与问题有关吗？

为了在这里测试我的 C++ 代码，如果需要，我也会发布 java 代码；-)

```
#include <iostream>

#include <opencv2/core/core.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/nonfree/nonfree.hpp>
#include <opencv2/objdetect/objdetect.hpp>
#include <opencv2/flann/flann.hpp>

using namespace cv;
using namespace std;
using namespace flann;

int main( int argc, char** argv ) {
    string pathToImages = "/Users/anubis/Desktop/KeypointTest/";

    string img_1 = "book_001_canon.jpg";
    string img_2 = "book_002_canon.jpg";
    string img_3 = "book_003_canon.jpg";
    string img_4 = "book_004_canon.jpg";

    Mat db_image_1 = imread(pathToImages + img_1, CV_LOAD_IMAGE_COLOR);
    Mat db_image_2 = imread(pathToImages + img_2, CV_LOAD_IMAGE_COLOR);
    Mat db_image_3 = imread(pathToImages + img_3, CV_LOAD_IMAGE_COLOR);
    Mat db_image_4 = imread(pathToImages + img_4, CV_LOAD_IMAGE_COLOR);

    vector<KeyPoint> db_keypoints_1;
    vector<KeyPoint> db_keypoints_2;
    vector<KeyPoint> db_keypoints_3;
    vector<KeyPoint> db_keypoints_4;

    Mat db_descriptors_1;
    Mat db_descriptors_2;
    Mat db_descriptors_3;
    Mat db_descriptors_4;

    Mat db_descriptor;

    SurfFeatureDetector detector(400, 4, 2, true, true);
    SurfDescriptorExtractor extractor;

    detector.detect(db_image_1, db_keypoints_1);
    detector.detect(db_image_2, db_keypoints_2);
    detector.detect(db_image_3, db_keypoints_3);
    detector.detect(db_image_4, db_keypoints_4);

    extractor.compute(db_image_1, db_keypoints_1, db_descriptors_1);
    extractor.compute(db_image_2, db_keypoints_2, db_descriptors_2);
    extractor.compute(db_image_3, db_keypoints_3, db_descriptors_3);
    extractor.compute(db_image_4, db_keypoints_4, db_descriptors_4);

    db_descriptor.push_back(db_descriptors_1);
    db_descriptor.push_back(db_descriptors_2);
    db_descriptor.push_back(db_descriptors_3);
    db_descriptor.push_back(db_descriptors_4);

    IndexParams indexParams = *new AutotunedIndexParams();

    Index flannIndex = *new Index(db_descriptor, indexParams);

    return 0;
} 
```

图片可以在这里找到：[图片](http://imgur.com/a/l3lfg#Ga99D)

# powershell - Powershell - 变量中的刷新日期

> ID：11639063
> 
> 赞同：1
> 
> 时间：2012-07-24T10:35:03.587
> 
> 标签：powershell

我的问题是，如何将日期存储在变量中，然后将新日期推送到那里。我将解释我的代码：-获取今天的日期并从文件的上次写入时间中减去它-获取小时数-当上次写入时间大于或等于 1 小时时通知编辑文件-获取最近的上次写入时间-然后休眠10 秒

问题是即使我编辑文件，循环仍然显示以前的日期。我怎样才能让它工作？

```
$file = get-childitem $input_users
   $time = (get-date)-$file.lastwritetime
   $hours = $time.hours

   while (($time.hours) -ge (1)){
         write-host -BackgroundColor DarkRed -ForegroundColor White  "$input was written to $hours hours ago, please edit it first"
         write-host -BackgroundColor DarkRed -ForegroundColor White  "Next check in 10 seconds."
         $time = (get-date)-$file.lastwritetime
                                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:16:02.353

您需要获取一个新的文件对象并重新计算循环内的小时数：

```
$file = get-childitem $input_users
$time = (get-date)-$file.lastwritetime
$hours = $time.hours

while (($time.hours) -ge (1)){
    write-host -BackgroundColor DarkRed -ForegroundColor White  "$input was written to $hours hours ago, please edit it first"
    write-host -BackgroundColor DarkRed -ForegroundColor White  "Next check in 10 seconds."
    $file = Get-ChildItem $input_users
    $time = (Get-Date) - $file.LastWriteTime

} 
```

# java - java有没有控制台应用程序框架？

> ID：11639071
> 
> 赞同：4
> 
> 时间：2012-07-24T20:48:10.890
> 
> 标签：java, frameworks, console, command

我将开始设计一个控制台应用程序。这意味着类似于 MySQL 客户端，它提示用户输入命令然后执行它们（基本上是打开和监听 TCP 端口，管理一些基本的数据库操作和服务器管理的东西）。该应用程序基本上接受连接并将数据返回给客户端。

我希望这个应用程序根据应用程序的启动方式在 GUI 和控制台模式下运行（这里没问题）

GUI不是问题，而是控制台。我需要的是一种定义一组命令的方法，它们可能有也可能没有任何数量的参数。此命令可能会提示确认、密码或返回一组数据。我想让事情保持优雅、可维护，并避免构建可能失控的“有限状态机”。

我想实现类似：

```
[ready]> server:start;
Server started.
[running]> connections:list;
Conn     IP             Port
Name1    192.168.2.2    60000
Name2    192.168.2.4    60002
[running]> connections:close Name1;
1 connection closed.
[running]> server:stop;
password? ******
Server stopped.
[ready]> 
```

是否有任何框架、工具或技术可以在 Java 上实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T20:59:07.917

There's the recently (very recently) released [Spring Shell](http://github.com/spring-projects/spring-shell). It's what Spring used to power their Roo shell minus the Roo parts. You can plug your own commands into it and make use of its ability to record scripts, play back scripts, take parameters, change the prompt, etc.

I looked at the example that came with it and it had four different classes that added or changed various things and it seemed pretty straightforward.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:52:44.413

我过去使用过[clamshell-cli](http://code.google.com/p/clamshell-cli/)，并没有做任何太复杂的事情，但它似乎有很多功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-15T10:41:04.833

有一个命令行解析器[Picocli](https://github.com/remkop/picocli)。它于 2017 年 9 月推出，已被 Groovy、Micronaut 和 JUnit 用作命令行。

它具有以下特点：

*   自动完成
*   ansi 颜色和样式
*   很好的用户帮助
*   支持子命令

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:59:25.263

One way to implement this would be via reflection. you would define fields `server` and `connections` and give them the methods you need (`start() stop() close()`). Then when input is parsed, use the reflection mechanism to execute methods you need.

# ios - 用动画替换 cocos2d 中的 Sprite

> ID：11639072
> 
> 赞同：0
> 
> 时间：2012-07-24T20:48:17.337
> 
> 标签：ios, cocos2d-iphone

我在 cocos2d 中为 iPhone 创建了两个边界框，当它们与来自 selSprite 的图像相交时，如果它们的标签匹配，则替换 targetSprite 中的图像。当边界框碰撞时，我想给出一个漂亮的动画。以下代码成功替换了精灵，但 FadeOut 动画在图像替换**后运行。**当图像被替换时，动画应该运行。我究竟做错了什么？任何帮助，将不胜感激。谢谢！

```
if (CGRectIntersectsRect(getSpriteRect, selSpriteRect)) {

        if ([selSprite tag] == ([targetSprite tag]-7)) {
            //NSLog(@"%d", [targetSprite tag]);
            //NSLog(@"%@", [selectedSpritesToBeUsedLater objectAtIndex:[selSprite tag]]);

            CCSprite *replacedImage = (CCSprite *)[self getChildByTag:[targetSprite tag]];

            CCSprite *spriteToBeUsedInTex = [selectedSpritesToBeUsedLater objectAtIndex:[selSprite tag]];

            id removeSpriteAction = [CCFadeOut actionWithDuration:2.0f];

            id removeSelSprite = [CCCallFunc actionWithTarget:self selector:@selector(removeSelSpriteByTag)];

            CCSequence *sequence = [CCSequence actions:removeSpriteAction, removeSelSprite, nil];

            [selSprite runAction:sequence]; 

            CCTexture2D *tex = [[CCTextureCache sharedTextureCache] addImage:[NSString stringWithFormat:@"color-0%d.png", [spriteToBeUsedInTex tag]+1]];

            [replacedImage setTexture:tex];

        }
    }
} }

-(void)removeSelSpriteByTag {
[self removeChildByTag:[selSprite tag] cleanup:YES]; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:40:17.193

你应该使用`CCSpawn`而不是`CCSequence`then。

# jquery - 为什么我的点击处理程序在 2 次点击后失败？

> ID：11639084
> 
> 赞同：0
> 
> 时间：2012-07-24T20:49:25.170
> 
> 标签：jquery

我的目标是在两个图像之间上下切换。

这就是我所拥有的，它部分工作。

如果这没问题，那么我错过了什么？
当我点击两次它停止工作....

这是我的代码：

```
 $(document).ready(function () {
       $(".collapse").click(function () {
           $("#box").hide();
           $(".collapse").replaceWith('<span class="open"></span>');
           $(".open").click(function () {
               $("#box").show();
               $(".open").replaceWith('<span class="collapse"></span>');
           });
       });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:51:20.863

好的......而不是你`replaceWith`只是这样做：

```
$(".open").removeClass("open").addClass("collapse");
//and
$(".collapse").removeClass("collapse").addClass("open"); 
```

并将其更改`.click`为（使用`on(...)`）：

```
$(document).on("click", ".collapse", function () {
    ....
}); 
```

* * *

把所有这些放在一起：

```
$(document).ready(function () {
   $(document).on("click", ".collapse, .open", function () {
       $("#box").toggle();
       $(this).toggleClass("open", "collapse"); //toggles btw the two classes
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:57:52.543

May I suggest you to use **Css** instead.

**jQuery:**

```
$(".collapse").toggleClass('closed') 
```

**Css:**

```
.collapse { 
    background: url(image/arrow-up.jpg); 
}
.collapse.closed {
    background: url(image/arrow-down.jpg); 
}
.collapse > #box {
    display: block;
}
.collapse.closed > #box {
    display: none;
} 
```

Hope this help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:53:25.597

你正在附上两个点击事件。把它分开。试试下面的代码

```
 $(document).ready(function() {
            $(".collapse").click(function() {
                $("#box").hide();
                $(this).removeClass('collapse');
                        $(this).addClass('open');
            });
            $(".open").click(function() {
                $("#box").show();
                $(this).removeClass('open');
                        $(this).addClass('collapse');
            });
        }); 
```

# matlab - 更改线条的不透明度

> ID：11639093
> 
> 赞同：6
> 
> 时间：2012-07-24T20:50:02.027
> 
> 标签：matlab, plot, opacity, alpha

我想改变我在 MATLAB 中绘制的线条的不透明度。我在某处读到了有关 alpha 和 facealpha 命令的信息，但不知道如何使用它们。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:03:26.160

来自 MathWorks 支持团队关于[如何在 MATLAB 7.14 (R2012a) 中设置 LINE 对象的透明度？](http://www.mathworks.com/support/solutions/en/data/1-2STXLP/index.html?product=ML&solution=1-2STXLP)（[镜子](https://web.archive.org/web/20170130230713/http://www.mathworks.com/matlabcentral/answers/103074-how-can-i-set-the-transparency-of-line-objects-in-matlab-7-14-r2012a)）：

> 线系列对象不支持透明度 (alpha) 值。可以使用以下解决方法来克服此限制：
> 
> 1.  请参考以下 MATLAB Central 链接： http: [//www.mathworks.com/matlabcentral/fileexchange/36953-patchline/content/patchline.m](http://www.mathworks.com/matlabcentral/fileexchange/36953-patchline/content/patchline.m)
>     
>     
> 2.  上述函数可用于在 LINE 对象中引入透明度，如下所示：
>     
>     
> 
> 示例 1：
> 
> ```
> n = 10;
> xs = rand(n,1);
> ys = rand(n,1);
> zs = rand(n,1)*3;
> plot3(xs,ys,zs,'r.')
> xlabel('x');ylabel('y');zlabel('z');
> p  = patchline(xs,ys,zs,'linestyle','--','edgecolor','g','linewidth',3,'edgealpha',0.2); 
> ```
> 
> 示例 2：
> 
> ```
> t = 0:pi/64:4*pi;
> p(1) = patchline(t,sin(t),'edgecolor','b','linewidth',2,'edgealpha',0.5);
> p(2) = patchline(t,cos(t),'edgecolor','r','linewidth',2,'edgealpha',0.5);
> l = legend('sine(t)','cosine(t)');
> tmp = sort(findobj(l,'type','patch'));
> for ii = 1:numel(tmp)
>     set(tmp(ii),'facecolor',get(p(ii),'edgecolor'),'facealpha',get(p(ii),'edgealpha'),'edgecolor','none')
> end 
> ```

[`patchline.m`](http://www.mathworks.com/matlabcentral/fileexchange/36953-patchline/content/patchline.m)（Brett Shoelson，2012 年 6 月 20 日（2016 年 9 月 1 日更新））：

```
function p = patchline(xs,ys,varargin)
% Plot lines as patches (efficiently)
%
% SYNTAX:
%     patchline(xs,ys)
%     patchline(xs,ys,zs,...)
%     patchline(xs,ys,zs,'PropertyName',propertyvalue,...)
%     p = patchline(...)
%
% PROPERTIES: 
%     Accepts all parameter-values accepted by PATCH.
% 
% DESCRIPTION:
%     p = patchline(xs,ys,zs,'PropertyName',propertyvalue,...)
%         Takes a vector of x-values (xs) and a same-sized
%         vector of y-values (ys). z-values (zs) are
%         supported, but optional; if specified, zs must
%         occupy the third input position. Takes all P-V
%         pairs supported by PATCH. Returns in p the handle
%         to the resulting patch object.
%         
% NOTES:
%     Note that we are drawing 0-thickness patches here,
%     represented only by their edges. FACE PROPERTIES WILL
%     NOT NOTICEABLY AFFECT THESE OBJECTS! (Modify the
%     properties of the edges instead.)
%
%     LINUX (UNIX) USERS: One test-user found that this code
%     worked well on his Windows machine, but crashed his
%     Linux box. We traced the problem to an openGL issue;
%     the problem can be fixed by calling 'opengl software'
%     in your <http://www.mathworks.com/help/techdoc/ref/startup.html startup.m>.
%     (That command is valid at startup, but not at runtime,
%     on a unix machine.)
%
% EXAMPLES:
%%% Example 1:
%
% n = 10;
% xs = rand(n,1);
% ys = rand(n,1);
% zs = rand(n,1)*3;
% plot3(xs,ys,zs,'r.')
% xlabel('x');ylabel('y');zlabel('z');
% p  = patchline(xs,ys,zs,'linestyle','--','edgecolor','g',...
%     'linewidth',3,'edgealpha',0.2);
%
%%% Example 2: (Note "hold on" not necessary here!)
%
% t = 0:pi/64:4*pi;
% p(1) = patchline(t,sin(t),'edgecolor','b','linewidth',2,'edgealpha',0.5);
% p(2) = patchline(t,cos(t),'edgecolor','r','linewidth',2,'edgealpha',0.5);
% l = legend('sine(t)','cosine(t)');
% tmp = sort(findobj(l,'type','patch'));
% for ii = 1:numel(tmp)
%     set(tmp(ii),'facecolor',get(p(ii),'edgecolor'),'facealpha',get(p(ii),'edgealpha'),'edgecolor','none')
% end
%
%%% Example 3 (requires Image Processing Toolbox):
%%%   (NOTE that this is NOT the same as showing a transparent image on 
%%%         of the existing image. (That functionality is
%%%         available using showMaskAsOverlay or imoverlay).
%%%         Instead, patchline plots transparent lines over
%%%         the image.)
%
% img = imread('rice.png');
% imshow(img)
% img = imtophat(img,strel('disk',15));
% grains = im2bw(img,graythresh(img));
% grains = bwareaopen(grains,10);
% edges = edge(grains,'canny');
% boundaries = bwboundaries(edges,'noholes');
% cmap = jet(numel(boundaries));
% ind = randperm(numel(boundaries));
% for ii = 1:numel(boundaries)
% patchline(boundaries{ii}(:,2),boundaries{ii}(:,1),...
%     'edgealpha',0.2,'edgecolor',cmap(ind(ii),:),'linewidth',3);
% end
%
% Written by Brett Shoelson, PhD
% brett.shoelson@mathworks.com
% 5/31/2012
% 
% Revisions:
% 6/26 Improved rice.png example, modified FEX image.
%
% Copyright 2012 MathWorks, Inc.
%
% See also: patch, line, plot

[zs,PVs] = parseInputs(varargin{:});
if rem(numel(PVs),2) ~= 0
    % Odd number of inputs!
    error('patchline: Parameter-Values must be entered in valid pairs')
end

% Facecolor = 'k' is (essentially) ignored here, but syntactically necessary
if isempty(zs)
    p = patch([xs(:);NaN],[ys(:);NaN],'k');
else
    p = patch([xs(:);NaN],[ys(:);NaN],[zs(:);NaN],'k');
end

% Apply PV pairs
for ii = 1:2:numel(PVs)
    set(p,PVs{ii},PVs{ii+1})
end
if nargout == 0
    clear p
end

function [zs,PVs] = parseInputs(varargin)
if isnumeric(varargin{1})
    zs = varargin{1};
    PVs = varargin(2:end);
else
    PVs = varargin;
    zs = [];
end 
```

执照：

```
Copyright (c) 2016, The MathWorks, Inc.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in
      the documentation and/or other materials provided with the distribution.
    * In all cases, the software is, and all modifications and derivatives
      of the software shall be, licensed to you solely for use in conjunction
      with MathWorks products and service offerings.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE. 
```

# javascript - 通过过滤器工具栏应用过滤器后，JQGrid 分页非常慢

> ID：11639096
> 
> 赞同：0
> 
> 时间：2012-07-24T20:50:08.227
> 
> 标签：javascript, jquery, html, performance, jqgrid

我将 jqGrid 与 LOAD ONCE 一起使用，然后在客户端进行分页。当我在过滤器工具栏中添加时，应用任何类型的过滤器后分页都会变得非常慢。

```
$(gridElement).jqGrid({
        postData: post,
        loadComplete: function (data) {
            onLoadComplete(data); 
        },
        gridComplete: function () {
            onGridComplete(); 
        },
        datatype: function (pdata) {
            dataSource(pdata);
        },
        colNames: columnNames,
        colModel: columnModel,
        rowNum: 10, 
        rowList: [10, 20, 30],
        viewrecords: true,
        pagination: true,
        pager: pagerElement,
        loadonce: true,
        sortorder: "desc",
        sortname: 'id',
        cellEdit: false,
        search: true,
        gridview: true,
        //rownumbers: true
    });

    $("#jqGrid").jqGrid('filterToolbar',{ 
        stringResult : true, 
        searchOnEnter : false }); 
```

知道为什么会这样吗？在触发任何常见事件（如 onPaging、onGridComplete 等）之前，单击分页按钮会有延迟。

请注意，一旦网格完成，数据类型属性将设置为“本地”。

我的猜测是，它会在您每次页面时尝试过滤（或者它一次只过滤一页？不确定）。但是可以禁用吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:24:30.840

您可能想考虑使用 DataTables (http://www.datatables.net) 作为替代品。排序是，我相信整个数据集（这会使处理这个脚本变得非常慢——然后绑定事件）。我最近研究了表格排序和网格布局的选项——由于性能问题，我使用 DataTables over jqGrid。

此外，看看获得最新版本是否有助于加快速度...... [http://www.trirand.com/blog/（6](http://www.trirand.com/blog/)月新版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T12:28:49.157

如果您对替代网格库持开放态度，我建议您看看[SlickGrid](https://github.com/mleibman/SlickGrid/)。

我已经使用了一段时间了。似乎是同类 JavaScript 网格库中最好的。一旦你掌握了它，它很容易定制并且已经有相当多的插件。

# javascript - 有没有办法在 GeoLocation 提示消息上更改域名？

> ID：11639099
> 
> 赞同：1
> 
> 时间：2012-07-24T20:50:11.317
> 
> 标签：javascript, jquery, html, geolocation

有没有办法在 GeoLocation 提示消息上更改域名？所以我有一个托管在我的一台服务器上的 Web 小部件插件。它附加了一个地理位置，我正在使用 html5 `navigator.geolocation.getCurrentPosition`。我在我的一个客户网站上安装了我的小部件。当我打开它时，它会提示允许完美运行的地理位置。但是提示指向我的域，例如“您想与 [mydomain.com] 共享您的位置”。我想要它，以便提示消息的域名将出现在我的客户网站上。我该怎么做？这甚至可能吗？

此致，

# php - IN 查询的意外结果

> ID：11639100
> 
> 赞同：0
> 
> 时间：2012-07-24T20:50:30.863
> 
> 标签：php, mysql

users_groups 表

```
userid  groupid
10  4
10  2
6   4
11  4
12  2
13  2

  $query="SELECT count(*) FROM `users_groups` 
           WHERE `userid`='$fromuserid' 
             AND  `groupid` in (
               SELECT `groupid` 
                 FROM `users_groups` 
                WHERE `userid`=`$touserid
          );"; 
```

$fromuserid=10

$touserid=11

找出用户标识 10 和用户标识 11 的公共组标识为 4 的查询。但我的查询返回空值。查询有错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:54:03.190

您的查询中有语法错误。子选择中有一个额外的反引号。

```
SELECT count(*)
FROM `users_groups`
WHERE `userid`='$fromuserid'
AND `groupid` in (SELECT `groupid` FROM `users_groups` WHERE `userid`=`$touserid)
--                                                                    ^
--                                                                   here 
```

应该是这样的：

```
SELECT `groupid` FROM `users_groups` WHERE `userid`=$touserid 
```

# python - Python，Tkinter，tkFont：标签调整大小

> ID：11639103
> 
> 赞同：1
> 
> 时间：2012-07-24T20:50:35.043
> 
> 标签：python, binding, fonts, tkinter, label

我试图让标签只有在鼠标悬停时才加下划线。我大部分都遇到了麻烦。我认为有一种更简单的方法可以做到这一点，但我从来没有玩过 tkFont。当鼠标离开标签时，标签也会调整大小。

```
from Tkinter import *
import tkFont

def move1(event):
    f = tkFont.Font(lbl1, lbl1.cget("font"))
    f.configure(underline = True)
    lbl1.configure(font=f)

def _move1(event):
    f.configure(underline = False)
    lbl1.configure(font=f)

def move2(event):   
    f = tkFont.Font(lbl2, lbl2.cget("font"))
    f.configure(underline = True)
    lbl2.configure(font=f)

def _move2(event):
    f.configure(underline = False)
    lbl2.configure(font=f)

def move3(event):   
    f = tkFont.Font(lbl3, lbl3.cget("font"))
    f.configure(underline = True)
    lbl3.configure(font=f)

def _move3(event):
    f.configure(underline = False)
    lbl3.configure(font=f)

root=Tk()
root.geometry('100x100+100+100')

f = tkFont.Font()
lbl1 = Label(root, text='Label 1')
lbl1.bind('<Enter>', move1)
lbl1.bind('<Leave>', _move1)
lbl1.pack()
lbl2 = Label(root, text='Label 2')
lbl2.bind('<Enter>', move2)
lbl2.bind('<Leave>', _move2)
lbl2.pack()
lbl3 = Label(root, text='Label 3')
lbl3.bind('<Enter>', move3)
lbl3.bind('<Leave>', _move3)
lbl3.pack()

mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:20:02.037

在我看来，最好的解决方案是只使用两种不同的字体，而不是为每个事件重新创建字体。Tkinter 具有“命名字体”的概念，这使得在配置小部件时可以轻松地通过名称引用字体。（命名字体比这更强大，但这不是重点）。

这是在程序开始时创建两种字体的示例：

```
from Tkinter import *
import tkFont

def on_enter(event):
    event.widget.configure(font="underlined_font")

def on_leave(event):
    event.widget.configure(font="normal_font")

root=Tk()
root.geometry('100x100+100+100')

normal= tkFont.Font(name="normal_font")
underlined = tkFont.Font(name="underlined_font", underline=True)

lbl1 = Label(root, text='Label 1', font="normal_font")
lbl1.bind('<Enter>', on_enter)
lbl1.bind('<Leave>', on_leave)
lbl1.pack()
lbl2 = Label(root, text='Label 2', font="normal_font")
lbl2.bind('<Enter>', on_enter)
lbl2.bind('<Leave>', on_leave)
lbl2.pack()
lbl3 = Label(root, text='Label 3', font="normal_font")
lbl3.bind('<Enter>', on_enter)
lbl3.bind('<Leave>', on_leave)
lbl3.pack()

mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:42:58.977

我不确定为什么标签改变字体大小的确切问题是什么，但我有一个问题的解决方案。

首先，传入的事件参数，它包含对发生事件的小部件的引用，因此您不再需要为每个标签提供两个函数。

其次，`f = tkFont.Font(event.widget, event.widget.cget("font"))`在`<Leave>`活动期间添加解决了尺寸变化的问题。

见下文：

```
from Tkinter import *
import tkFont

def move1(event):
    f = tkFont.Font(event.widget, event.widget.cget("font"))
    f.configure(underline = True)
    event.widget.configure(font=f)

def _move1(event):
    f = tkFont.Font(event.widget, event.widget.cget("font"))
    f.configure(underline = False)
    event.widget.configure(font=f)

root=Tk()
root.geometry('100x100+100+100')

f = tkFont.Font()
lbl1 = Label(root, text='Label 1')
lbl1.bind('<Enter>', move1)
lbl1.bind('<Leave>', _move1)
lbl1.pack()
lbl2 = Label(root, text='Label 2')
lbl2.bind('<Enter>', move1)
lbl2.bind('<Leave>', _move1)
lbl2.pack()
lbl3 = Label(root, text='Label 3')
lbl3.bind('<Enter>', move1)
lbl3.bind('<Leave>', _move1)
lbl3.pack()

mainloop() 
```

# javascript - 如何从视频标签错误事件中获取字符串/消息或代码？

> ID：11639106
> 
> 赞同：0
> 
> 时间：2012-07-24T20:50:36.743
> 
> 标签：javascript, video, html5-video

所以这感觉像是一个愚蠢的问题。希望我只是忽略了一些明显的事情，但我正在监听视频元素上的错误。错误字符串实际上显示在控制台中，并且错误事件正确触发，但是当我查看错误对象时，我似乎无法在任何地方找到该字符串。我的目标是简单地记录此错误以用于记录目的。另一种选择是获取错误代码——任何真正可以记录的内容，以便为我们的调试器提供关于实际问题的线索。知道如何从视频标签错误对象中获取错误字符串或代码吗？

代码：

```
$(this.video)
    .on( 'error', this.proxy(this.onVideoError));

onVideoError : function(e) {
  console.log(e, " the e");
  console.log(e.toString());//prints [object Object]
  console.log(e.code, " the code");// prints undefined
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:18:51.003

在我的错误处理程序中，我正在使用`err.name`and`err.message`成员。由于错误实际上没有 PHP 或其他语言中的代码，因此您可能需要解析消息和名称以创建自己的代码。

```
var errorHandler = function(err) {

  // prints the name of the error
  console.log(err.name);

  // prints the description that is also shown in the error console
  console.log(err.message);

  // this works only in some browsers
  // line and stack are not supported by all vendors
  console.log(err.line, err.stack);
} 
```

# eclipse - Eclipse Juno + WTP +EGit 非常慢

> ID：11639108
> 
> 赞同：17
> 
> 时间：2012-07-24T20:50:44.367
> 
> 标签：eclipse, performance, eclipse-wtp

我正在尝试在我的 4GB RAM MacBook Pro 上使用 Eclipse Juno（版本：4.2.0 Build id：I20120608-1400）和 WTP 在 MacOSX Lion 上进行 JavaScript/Node.js 开发。有时它会变得非常缓慢，并且无法使用。我尝试通过首选项（禁用所有验证器）和初始化变量进行调整，并按照建议升级到 1.7 VM。这是我的 eclipse.ini 文件的内容：

```
-startup
../../../plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.200.v20120522-1813
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/bin/java
-vmargs
-Xms64m
-Xmx256m
-Xdock:icon=../Resources/Eclipse.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-XX:+UseParallelGC
-XX:+UseCompressedOops
-XX:MaxPermSize=256m
-server 
```

有人可以建议我可以做些什么来提高 WTP 性能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T09:22:16.607

不幸的是，我可以支持。与靛蓝相比，朱诺无法使用。每次点击我都必须等待几秒钟才能得到 gui 的反应。我也可以排除原因可能在我的硬件方面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T18:03:57.837

请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272)上的评论。

我们知道这里存在问题，但尚不确定原因是什么。我们正在分析各种场景，试图弄清为什么有些人看到如此严重的退化，而大多数人似乎至少可以接受。

请在上面发布有关您在那里使用的功能的缺陷信息，也许它会帮助追查罪魁祸首......没有笑脸，这很严重。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-25T07:44:30.657

我遇到了同样的问题，似乎可以通过选中“使用虚拟内存映射”复选框来解决，你可以看到选项， **Preference-->Team-->Git-->Window Cache**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T10:22:15.323

Juno SR1有一个[官方性能补丁](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation#Resolution)。否则，您可以切换到 Juno SR2 或[Kepler](http://www.eclipse.org/downloads/index-developer.php)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T06:16:42.943

发现了[一个错误报告 (id : 385272)](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272)，因为 Juno 响应时间很慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T15:09:27.363

尝试使用不同的透视图（例如 Resource 透视图）并重新启动 Eclipse。

它有帮助吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T20:58:14.780

对我来说，这个问题只发生在 PHP 的角度。以不同的视角启动 Eclipse Juno，然后切换到 PHP 视角使得选项卡切换变得合理。

存在一个不那么繁琐和永久的解决方案，它非常简单。安装 Web 开发工具可解决此问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-11T15:21:05.727

您应该禁用对 Node.js 和其他 JavaScript 库的验证，因为它们应该由它们的提供者进行验证。试试这个：[https ://stackoverflow.com/a/19909401/1040124](https://stackoverflow.com/a/19909401/1040124)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-20T10:05:03.573

我发现了一个非官方的补丁，它可以让编辑器之间的切换变得更快。看到这个评论： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=391868#c28](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391868#c28)

您只需添加引用页面[http://www.objectteams.org/EclipsePatch422beta/](http://www.objectteams.org/EclipsePatch422beta/)，它似乎要快很多。非官方补丁，所以之前备份你的Eclipse。

# jquery - 不在视图中时的jQuery粘性页脚

> ID：11639112
> 
> 赞同：0
> 
> 时间：2012-07-24T20:51:09.473
> 
> 标签：jquery, css, sticky-footer

恐怕另一个粘性页脚问题。似乎无法找到合适的方法来实现我想要实现的目标。

我有一个页脚，它当前位于动态高度中间容器底部的相对位置。

当窗口变得小于页脚底部时，我需要将页脚绝对定位到窗口底部并稍微透明。

我目前有这个，但似乎无法让它工作：

```
var footer = $('footer');
var start = $(footer).offset().top;

$.event.add(window, "scroll", function() {
    var pos = $(window).height();
    $(footer).css('position',((pos)<start) ? 'relative' : 'absolute');
    $(footer).css('bottom',((pos)<start) ? '0px' : '');
}); 
```

请帮忙。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:07:28.737

可能应该将其添加为答案：

设法让它按我想要的方式工作：jsfiddle.net/tc7p3/4 如果有办法改进它，请提出更好的方法。谢谢

# php - 使用简单的 HTML Dom 检索关键字元标记内容？

> ID：11639123
> 
> 赞同：3
> 
> 时间：2012-07-24T20:52:05.747
> 
> 标签：php, screen-scraping, simple-html-dom

我正在使用 Simple HTML Dom 从远程网页上抓取关键字，但我不知道如何实现这一点。

我目前正在使用以下代码。

```
$html = str_get_html($remote_html);
echo $html->find("meta[keywords]")->content; 
```

并收到以下错误：

```
Trying to get property of non-object 
```

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T13:56:16.193

find() 返回的不是一个对象，而是一个包含（在这种情况下）1 个对象的数组。“关键字”也不是属性，但“名称”是。利用：

```
$oHTML = str_get_html( $remote_html );
$arElements = $oHTML->find( "meta[name=keywords]" );
echo $arElements[0]->content; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T02:04:25.827

```
$headers = array();
$headers["title"] = $html-> find("title",0)-> plaintext;
$headers["keywords"] = $html-> find("meta[name=keywords]",0) ->getAttribute('content');  
$headers["description"] = $html-> find("meta[name=description]",0) ->getAttribute('content'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T21:14:17.357

Give this a shot:

```
$html->find('meta[description]'); 
```

EDIT:

This might work better for your situation [http://php.net/manual/en/function.get-meta-tags.php](http://php.net/manual/en/function.get-meta-tags.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-15T08:02:12.713

尝试这个

```
$Inner_anchor = file_get_html("Your-Url");
$Inner_anchor->find("head meta[name='description']", 0)->content; 
```

# matlab - MATLAB：？？？“double”类型的输入参数的未定义函数或方法

> ID：11639125
> 
> 赞同：1
> 
> 时间：2012-07-24T20:52:21.283
> 
> 标签：matlab

有人可以解释为什么我的代码中出现以下错误吗？它涉及将双打传递给 Z，但我看不到参数 a 和 b 是如何双打的。

```
clear all;
im = imread('smallblob.png');
im = im(:,:,1);
w = size(im,1);
h = size(im,2);
[dx,dy] = gradient(double(im));
lambda = 1;
Ox = -1.^lambda.*(-dx);
Oy = -1.^lambda.*(dy);
magO = sqrt(Ox.^2 + Oy.^2);

Ix = dx;
Iy = dy;
magI = sqrt(Ix.^2 + Iy.^2);

N=w+1;
yp(1:N)=-0.5*w:1:0.5*w;
xp(1:N)=-0.5*h:1:0.5*h;
Y(1:w,1:h)=0;
X(1:w,1:h)=0;
for i=1:w
    Y(i,:)=yp(i);
end
for i=1:h
    X(:,i)=xp(i);
end

for a=1:h
    for b=1:w
        for i=1:N-1
            Rx(i)=-0.5*(Ix(i)+Ix(i+1));
            Ry(i)=-0.5*(Iy(i)+Iy(i+1));
            Rz(i)=Z(a,b);                   %HERE IS THE ERROR
            dlx(i)=Ix(i+1)-Ix(i);
            dly(i)=Iy(i+1)-Iy(i);
        end
        Rx(N)=-0.5*(Ix(N)+Ix(1));
        Ry(N)=-0.5*(Iy(N)+Iy(1));
        Rz(N)=Z(a,b);
        dlx(N)=-Ix(N)+Ix(1);
        dly(N)=-Ix(N)+Ix(1);

        for i=1:N
            Xcross(i)=dly(i).*Rz(i);
            Ycross(i)=-dlx(i).*Rz(i);
            Zcross(i)=(dlx(i).*Ry(i))-(dly(i).*Rx(i));
            R(i)=sqrt(Rx(i).^2+Ry(i).^2+Rz(i).^2);
        end

        Bx1=(magI*magO./((R.^3))).*Xcross;
        By1=(magI*magO./((R.^3))).*Ycross;
        Bz1=(magI*magO./((R.^3))).*Zcross;

        BX(a,b)=0;
        BY(a,b)=0;
        BZ(a,b)=0;

        for i=1:N
            BX(a,b)=BX(a,b)+Bx1(i);
            BY(a,b)=BY(a,b)+By1(i);
            BZ(a,b)=BZ(a,b)+Bz1(i);
        end
    end
end

??? Undefined function or method 'Z' for input arguments of type 'double'.

Error in ==> MAC4 at 34
Rz(i)=Z(a,b); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:00:02.823

您尝试在`Z`定义之前访问该变量。您需要`Z`在访问其内容之前为其分配一个值。

# c# - 将字符串与充满正则表达式的列匹配

> ID：11639129
> 
> 赞同：5
> 
> 时间：2012-07-24T20:52:27.477
> 
> 标签：c#, sql, sql-server, regex

我在一个充满正则表达式的表中有一个列。

我的代码中有一个字符串，我想找出该列中的哪些正则表达式与该字符串匹配并返回这些行。

除了拉取每一行并匹配正则表达式（这很昂贵，检查单个页面加载的潜在数千条记录）之外，有没有一种方法可以在 SQL 中执行此操作，而不是使用一个（或几个）查询？

示例输入：W12ABC

示例列数据

```
1   ^[W11][\w]+$  
2   ^[W12][\w]+$  
3   ^[W13][\w]+$ 
4   ^[W1][\w]+[A][\w]+$  
5   ^[W1][\w]+[B][\w]+$  
6   ^[W1][\w]+[C][\w]+$ 
```

应该返回第 2 行和第 4 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:00:16.680

T-SQL 不提供此功能，但您可以通过使用 .NET 正则表达式类编写 CLR 函数在 SQL Server 中启用它。这里有[一篇很好的文章](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)解释了如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:05:51.407

如果您对通配符持开放态度，则可以存储适用于 LIKE 语法的模式：“W12%”或“W%ABC”。您的查询将如下所示：

SELECT * FROM Table Where 'W12ABC' LIKE 列

# sharepoint - 使用资源管理器时隐藏文件夹

> ID：11639130
> 
> 赞同：0
> 
> 时间：2012-07-24T20:52:33.810
> 
> 标签：sharepoint, sharepoint-2010

我们目前在 SP2010 上定义了一个文档库，其中包含 3 个文件夹（_f1、_f2 和 _f3）和几个文件。当通过资源管理器访问这个库时，一些文件夹被隐藏（_f1、_f2 和表单）。其余内容正常显示。

由于文件夹上没有“隐藏”属性，我想知道为什么有些文件夹被标记为隐藏而不是其他文件夹。

我了解表单文件夹是系统文件夹，应该隐藏。但是为什么其他 3 人的行为不同呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:38:05.803

这是由文件夹名称开头的下划线字符引起的。

# java - 如何为自定义标签创建自定义 URI (taglib)

> ID：11639136
> 
> 赞同：0
> 
> 时间：2012-07-24T20:52:53.967
> 
> 标签：java, spring, jsp, taglib, custom-tag

我有一个项目“lib”，其中包含其他项目共有的类。在项目“留言簿”中，我想使用 lib.jar 中定义的标签，我认为为此我需要为我的自定义标签创建一个 URI，因为 spring 是：

```
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%> 
```

所以我做了，在我的任何网站上都有一个链接（注意：404 返回，以及在春天）

```
<%@ taglib uri="http://mysite.com/tags" prefix="myTag"%> 
```

留言簿说找不到那个标签。但就像他对春天所做的那样？我需要做一些映射吗？

编辑：

```
lib.jar/META-INF/filtro.tld:
<?xml version="1.0" encoding="ISO-8859-1" ?>
<taglib xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1">

    <tlibversion>1.0</tlibversion>
    <jspversion>1.1</jspversion>
    <shortname>filtro</shortname>
    <uri>http://desenvolvimento.rokko.com.br/tags</uri>
    <description>Tags para Filtro Avançado</description>
    <info>Tags para Filtro Avançado</info>

    <tag>
        <name>filtro</name>
        <tagclass>br.com.rokko.lib.helper.FiltroTag</tagclass>
        <bodycontent>JSP</bodycontent>
        <info>Filtro</info>
    </tag>
</taglib> 
```

来自留言簿的一些jsp：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://desenvolvimento.rokko.com.br/tags" prefix="filtro"%> <!--error-->
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:33:27.077

这是正确的！

这似乎是IDE（SpringSource Tool Suite）中的一个错误。它显示一条红线，作为错误。但它编译并运行正确。

# html - 从模板编译 HTML 的程序

> ID：11639139
> 
> 赞同：8
> 
> 时间：2012-07-24T20:53:13.250
> 
> 标签：html, compilation

我正在开发一个只使用 HTML、CSS 和 JS（不需要后端）的网站。这是一个简单的网站，其主要目的是提供信息。我为所有页面（页眉、内容区域、页脚）提供了一个标准模板。现在，我必须将其复制并粘贴到每个页面中，并逐页手动更新对它的任何更改。

有没有什么好的程序可以让我：

*   设置模板
*   分别为每个页面编写内容代码
*   通过将内容插入模板（在指定点）来编译每个页面
*   将编译输出到第三个文件

类似于 SASS 的东西的奖励积分，我可以让程序监视目录的更改并将文件自动编译到另一个目录中。

允许我在多个部分添加内容的东西的奖励积分。

我想重申一下——我不想使用会即时将页面拼接在一起的后端语言（例如 PHP 或 Django）。我正在处理的站点不需要它，它会对性能和可维护性产生负面影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:57:27.317

查看谷歌关闭模板[https://developers.google.com/closure/templates/docs/helloworld_java](https://developers.google.com/closure/templates/docs/helloworld_java)

它将大豆文件（模板）作为输入，然后您可以传入您想要的任何数据，它将模板与数据合并，生成 HTML。

您还可以从命令行使用 PHP 生成 HTML [http://php.net/manual/en/features.commandline.php](http://php.net/manual/en/features.commandline.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:40:15.993

如果您想坚持使用 javascript，您可以使用 Jade ( [http://jade-lang.com](http://jade-lang.com) ) 或其他带有 Node.js 的模板引擎。虽然是服务端代码，但它仍然是 js 而不是第三个 lang。

# ruby - 将整数放入 ruby 中的字符串中

> ID：11639141
> 
> 赞同：0
> 
> 时间：2012-07-24T20:53:24.093
> 
> 标签：ruby

我想在套接字上发送一个文件，并且需要在前四个字节中传递它的长度。

这是我想在 C 中做的事情：

```
struct
{
  int lenght; //four bytes
  char msg[40];
}dataBuf;

write(fd, &databuf, sizeof(dataBuf)) 
```

如何将整数推送到套接字上，以便它在另一端将其作为整数而不是 ASCII 值接收？

我不想像“ `\x04\X03`”一样硬编码它，我试着用`pack(L*)`. 这只适用于数组，我没有办法将我的四字节整数分解为四字节数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T20:58:56.757

Try putting the integer into an array and then using [`pack`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack). For example:

```
socket.write( [0xffff].pack("L") ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:18:45.157

查看[BinData](http://bindata.rubyforge.org/) gem。

您的示例可能如下所示：

```
class DataBuf < BinData::Record
  uint32 :length
  array :msg, :initial_length => 40 do
    uint8
  end
end

io = File.open(...)
r = DataBuf.read(io)
puts "Data buffer is #{r.length} length and it has '#{r.msg}' message" 
```

我不确定消息，您应该查看 BinData 文档的字符串部分。

# php - HTML 电子邮件以明文形式发送，主题为标题

> ID：11639143
> 
> 赞同：1
> 
> 时间：2012-07-24T20:53:38.523
> 
> 标签：php, html-email

我正在尝试使用下面的 PHP 代码发送 HTML 电子邮件。我认为标题引起了问题，但我不知道如何解决它们，并且谷歌搜索没有产生任何有用的结果。谢谢！

```
$emailBody = 'Hello, Thank you for signing up for our website. Please confirm your email. <a href = "'.CONFIRM_PAGE.'&code='.$currentEmailProperties[1].'&addr='.urlencode($currentEmailProperties[0]).'&">Confirm email address</a>';
$emailBody = wordwrap($emailBody,70);
$headers = 'From: '.FROM_ADDRESS.' \r\n ';
$headers .= 'Content-type: text/html \r\n';
$headers .= "MIME-Version: 1.0\r\n";
mail($currentEmailProperties[0],'Welcome to Our Website',$emailBody,$headers) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:56:25.027

在单引号中使用时不评估转义序列。将它们放在双引号中，例如：

```
$headers = 'From: ' . FROM_ADDRESS . "\r\n"; 
```

从手册：

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

[参考](http://php.net/manual/en/language.types.string.php)

# r - R CMD BATCH 问题：意外输入错误

> ID：11639155
> 
> 赞同：0
> 
> 时间：2012-07-24T20:54:27.087
> 
> 标签：r

我正在尝试使用以下内容运行 R 脚本，

```
c:\Progra~1\R\R-2.13.1\bin\R CMD BATCH "test.R" 
```

文件 test.R 包含

```
print ("Hello World") 
```

但是，我不断收到以下错误。上面的例子很简单，只有 1 行，使调试更容易。

```
R version 2.13.1 (2011-07-08)
Copyright (C) 2011 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: i386-pc-mingw32/i386 (32-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> pError: unexpected input in "print ("Hello World")
"
Execution halted 
```

如果我添加一个，它会起作用；在 print ("Hello World") 后签名，但如果 test.R 中有其他行，则这些行永远不会被执行。

您能否提一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:56:23.217

我正在使用 Textpad 编辑 test.R。但由于某种原因，我想它引入了一些不可打印的字符。

一旦我在 Unix 中创建 test.R 并复制到 Windows，它就可以正常工作。

# php - 刷新从 MySQL DB 填充的数据表的内容

> ID：11639159
> 
> 赞同：0
> 
> 时间：2012-07-24T20:55:06.340
> 
> 标签：php, mysql

我想刷新从 MySQL DB 填充的数据表的内容。所以，由于数据库可能会实时更新，我想在数据表的顶部添加刷新按钮。我的代码如下：

```
<div id="refresh">
    <button id="refresh-table">Refresh</button>
    <br>
</div>

<script type="text/javascript" charset="utf-8">
         $(document).ready(function(){
              $('#tabbb').dataTable({
              "sPaginationType":"full_numbers",
              "aaSorting":[[5, "asc"]],
              "bJQueryUI":true
              });
              $(".refresh_table").click(function() {
                  table=$("#tabbb").dataTable();
                  table.fnPageChange("first",1);                  
              });             
     });
</script> 
```

问题是当我点击刷新按钮时，什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:15:43.190

用这个：

```
$("#refresh-table").click(function() {
  var mytable = $('#tabbb').dataTable();
  mytable.fnDraw();
}); 
```

**更新**

刚刚注意到您有一个按钮的`class`选择器，但在按钮本身上您有一个`id`. 所以你需要改变选择器来绑定`click`.

# java - 我希望我的数组值在 java 中捕获异常

> ID：11639168
> 
> 赞同：-1
> 
> 时间：2012-07-24T20:56:03.330
> 
> 标签：java, arrays

我需要一些关于数组的帮助。我的问题是我创建了一个包含 100 个元素的整数数组。如果用户输入的值大于 100，java 会抛出异常。我希望允许用户在数组中输入超过 100 个，并向用户抛出 ArrayOutOfBoundsException。我这里有代码：

*编辑*我忘了问我是否得到了正确的子数组。顺便说一句，我希望在普通数组而不是 ArrayList 中完成此操作。

```
public class Lab6
{
    public static void main(String[] args)throws IOException, NullPointerException, ArrayIndexOutOfBoundsException
    {       
        //the memory with 100 elements
        int[] vMem = new int[100];
        //the memory with 1000 elements
        int[][] vTopMem = new int[1000][];
        vTopMem[0] = vMem; 
        System.out.println("Enter an integer: ");
        File vMemory = new File("file name and location");
        RandomAccessFile storeMem = new RandomAccessFile(vMemory, "rw");
        Scanner input = new Scanner(System.in);
        while(true)
        {
                for(int i = 0; i < vMem.length; i++)
            {
                    vMem[i] = input.nextInt();
                    storeMem.write(i);
                    if(i > vMem.length)
                    {
                     System.out.println("out of bounds!");  
                    }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:01:51.003

如果您正在寻找超越 Java 原始数组的数据结构，您可能会喜欢这个`ArrayList`类。它可以让你存储数据而不用担心`ArrayOutOfBoundsException`。每当我需要一个可变大小的数组时，我都会使用它。：

*   [教程](http://www.java-samples.com/showtutorial.php?tutorialid=234)
*   [文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:22:51.803

```
if(i>vMem.length)
{
    throw new ArrayIndexOutOfBoundsException();
} 
```

这是你要找的吗？

编辑：

```
for(int i = 0; i < vMem.length; i++)
{
     vMem[i] = input.nextInt();
     storeMem.write(i);
     if(i > vMem.length)
     {
          System.out.println("out of bounds!");  
     }
 } 
```

'i' 永远不会大于 vMem.length，因为你的 for 循环有 'i' 总是小于 vMem.length。如果您正在检查 nextInt 以查看您尝试将数据放入哪个索引，那么您的代码应该看起来更像这样：

```
while(true)
{
     int i = input.nextInt();
     if(i > vMem.length)
        throw new ArrayindexOutofBoundsException();

     vMem[i] = data;
} 
```

只要您提供有效输入，它也将永远运行，因此您的 while 循环应该使用某种布尔值来查看您何时想要退出。

# c# - 带有温莎城堡的 ASP.NET MVC 4 RC

> ID：11639169
> 
> 赞同：2
> 
> 时间：2012-07-24T20:56:04.777
> 
> 标签：c#, castle-windsor, asp.net-mvc-4

我正在查看 ASP.NET MVC 4 RC，但找不到 DefaultHttpControllerFactory 甚至 IHttpControllerFactory 以允许我选择的 IoC 容器（Castle Windsor）挂接到 Web Api 控制器的框架中。我最终使用了 IDependencyResolver，这使得发布组件有点棘手，但最终得到了以下结果。在 IDependencyResolver 具有 Release 方法之前，它会起作用/不会发生内存泄漏吗？Global.asax 最终为：

```
public class WebApiApplication : System.Web.HttpApplication
{
    private IWindsorContainer container;

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        Windsor();
    }

    protected void Application_End()
    {
        container.Dispose();
    }

    private void Windsor()
    {
        container = new WindsorContainer().Install(FromAssembly.This());

        // mvc:
        var mvcControllerFactory = new WindsorControllerFactory(container.Kernel);
        ControllerBuilder.Current.SetControllerFactory(mvcControllerFactory);

        // web api:
        var httpDependencyResolver = new WindsorHttpDependencyResolver(container.Kernel);
        GlobalConfiguration.Configuration.DependencyResolver = httpDependencyResolver;
    }
} 
```

WindsorControllerFactory 是 Mvc 控制器的 DefaultControllerFactory 的扩展，并且有一个 Windsor 安装程序。WindsorHttpDependencyResolver 最终结果为：

```
public class WindsorHttpDependencyResolver : System.Web.Http.Dependencies.IDependencyResolver
{
    private readonly IKernel kernel;

    public WindsorHttpDependencyResolver(IKernel kernel)
    {
        this.kernel = kernel;
    }

    public IDependencyScope BeginScope()
    {
        return kernel.Resolve<IDependencyScope>(); // instances released suitably (at end of web request)
    }

    public object GetService(Type serviceType)
    {
        // for ModelMetadataProvider and other MVC related types that may have been added to the container
        // check the lifecycle of these registrations
        return kernel.HasComponent(serviceType) ? kernel.Resolve(serviceType) : null;
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return kernel.HasComponent(serviceType) ? kernel.ResolveAll(serviceType) as IEnumerable<object> : Enumerable.Empty<object>();
    }

    public void Dispose()
    {
       // Nothing created so nothing to dispose - kernel will take care of its own
    }
} 
```

从理论上讲，这意味着 Windsor 现在将在安装 Api 控制器后提供它们：

```
public class ApiControllersInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.AddFacility<TypedFactoryFacility>();
        container.Register(Component.For<ITypedFactoryComponentSelector>().ImplementedBy<WebApiTypedFactoryComponentSelector>());
        container.Register(Component.For<IDependencyScope>().AsFactory(tfc => tfc.SelectedWith<WebApiTypedFactoryComponentSelector>()).LifestylePerWebRequest());

        container.Register(Classes.FromAssemblyContaining<ValuesController>().BasedOn<IHttpController>().LifestyleTransient());
    }
} 
```

我正在使用类型化工厂工具为我实现 IDependencyScope，这意味着当框架在请求结束时处理它时，它将隐式释放控制器及其依赖项。通过使用 Per Web Request 生命周期，Windsor 也将释放工厂本身。这只是留下了自定义类型化工厂组件选择器，因为 GetService(s) 不会在容器中找到任何东西：

```
public class WebApiTypedFactoryComponentSelector : DefaultTypedFactoryComponentSelector
{
    protected override string GetComponentName(System.Reflection.MethodInfo method, object[] arguments)
    {
        if (method.Name == "GetService" || method.Name == "GetServices")
        {
            return (arguments[0] as Type).FullName;
        }
        return base.GetComponentName(method, arguments);
    }

    protected override Type GetComponentType(System.Reflection.MethodInfo method, object[] arguments)
    {
        if (method.Name == "GetService" || method.Name == "GetServices")
        {
            return arguments[0] as Type;
        }
        return base.GetComponentType(method, arguments);
    }
} 
```

希望这是有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:52:57.997

我最终使用了[这篇博客文章中的代码（由 Mark Seemann 的](http://nikosbaxevanis.com/2012/06/04/using-the-web-api-dependency-resolver-with-castle-windsor-part-2/)[另](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)一篇文章进一步增强），它为每个请求创建一个范围并负责释放创建的对象。这与您采用的方法略有不同。

# php - json_encode boolean 返回错误值

> ID：11639173
> 
> 赞同：3
> 
> 时间：2012-07-24T20:56:26.930
> 
> 标签：php, jquery, json, login

我正在写一个 jquery 登录。如果 php 登录脚本 (checklogin.php) 回显“true”，那么我的 jquery 页面应该会发出警报。当我运行 login.php（不使用 jquery）时，它会将请求发送到 checklogin.php，它会回显“true”但是如果我使用我的 jquery 登录脚本将登录信息发送到 checklogin.php，我跟踪的警报后面说“假”。

```
$('#login').click(function(e){
      $.getJSON("http://www.hedonsoft.com/game/login.php",{username: $("#username").val(), password: $("#password").val()},function(data){
         if(data==true){
            alert(data.boolean);
            //$('#logindiv').slideUp();
            //$('#gamediv').show(); 
            //$('#registerdiv').hide();
            //$('#gameheader').html(data['username']);
         }else{
            alert("false");
         }
      });
});

<?php
header('Access-Control-Allow-Origin: *');
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="hedonsof_conflict"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
$json = array('boolean' => 'true', 'jsonUser' => $myusername);
echo "true";
}
else {
echo "Wrong Username or Password";
}
?> 
```

长话短说，当我尝试从常规 php 页面登录时，我跟踪的值为 true，当我尝试从 jquery 页面登录时，我跟踪的值为 false；

编辑：

```
<?php
...
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
$json = array('boolean' => true, 'jsonUser' => $myusername);
echo true;
}
else {
echo "Wrong Username or Password";
}
?> 
```

还有我的 jQuery...

```
$('#login').click(function(e){
      $.getJSON("http://www.hedonsoft.com/game/login.php",{username: $("#username").val(), password: $("#password").val()},function(data){
         if(data){
            alert("true");
            //$('#logindiv').slideUp();
            //$('#gamediv').show(); 
            //$('#registerdiv').hide();
            //$('#gameheader').html(data['username']);
         }else{
            alert(data); // shows null
         }
      });
}); 
```

使用`json_encode`, 返回布尔值`null`

```
$('#login').click(function(e){
       $.getJSON("http://www.hedonsoft.com/game/login.php",{username: $("#username").val(), password: $("#password").val()},function(data){
          if(data.boolean == "true"){
             alert("true");
             //$('#logindiv').slideUp();
             //$('#gamediv').show(); 
             //$('#registerdiv').hide();
             //$('#gameheader').html(data['username']);
          }else{            alert(data);
          }
       }); }); 
```

```
<?php
...
// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
$json = array('boolean' => true, 'jsonUser' => $myusername);
echo json_encode($json);
}
...
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T20:57:28.100

使用`true`，不使用`'true'`。`'true'`是一个字符串，你想要一个布尔值：

```
$json = array('boolean' => true, 'jsonUser' => $myusername); 
```

另外，*永远不要*写`== true`.

```
if(data~~==true~~) {
```

* * *

好的，现在问题是：

```
$json = array('boolean' => true, 'jsonUser' => $myusername);
echo true; 
```

不要`echo true`，`echo json_encode($json)`。

# objective-c - Objective-C - 类方法中的 NSTimeInterval 返回 0

> ID：11639176
> 
> 赞同：0
> 
> 时间：2012-07-24T20:56:44.013
> 
> 标签：objective-c, return-value, nstimeinterval

我有一个看起来像这样的类方法：

```
+ (NSTimeInterval)calculateTimeDifferenceBetweenEventDate:(NSDate *)eventTime andEventTime:(NSDate *)eventDate {

    NSTimeInterval timeDifference = [eventTime timeIntervalSinceDate:eventDate];

    // If eventTime is earlier than eventDate, a negative number is returned
    // If eventTime is later than eventDate, a positive number is returned

    return timeDifference;
} 
```

我使用这样的方法：

`NSTimeInterval timeDifference = [Utilities calculateTimeDifferenceBetweenEventDate:reminder.date andEventTime:savedEventDate];`

但是由于某种原因，每次我使用这个类方法时，返回的值都是 0。当我在里面调试方法时，我看到它`timeDifference`实际上包含一个合法的数字。但是由于某种原因它不会正确返回？

# javascript - javascript regex test() 函数始终为真

> ID：11639179
> 
> 赞同：1
> 
> 时间：2012-07-24T20:57:10.027
> 
> 标签：javascript, jquery

在 javascript 中，我使用以下正则表达式来检查输入字符串是否为 6 个字符长，并且它应该只包含字母和数字，

```
var name = "a";
if(/[0-9a-zA-Z]{6,}/.test(name))
{  } 
```

但这总是真实的。有什么问题 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:01:10.593

{6,} 表示至少 6 个字符长。如果你想要6。前往{6}。

# c++ - 用我们自己的 C++ 路径替换 windows 默认的 DirectX SDK 路径

> ID：11639180
> 
> 赞同：0
> 
> 时间：2012-07-24T20:57:14.497
> 
> 标签：c++, windows, directx

很抱歉提出愚蠢的问题，但我坚持下去。我已经安装了 2010 年 6 月的 DirectX SDK，现在当我在 VC++ 中创建一个新项目时，它将使用 VC++ 目录中的继承设置，并且在这些继承路径中，Windows 中的默认 DirectX SDK 已设置！我添加了我的路径，但它仍在使用 Windows 的 SDK。我怎样才能改变这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:32:29.067

我找到了这些更改路径的说明 [http://compsci.ca/v3/viewtopic.php?t=15817](http://compsci.ca/v3/viewtopic.php?t=15817)

# javascript - PageSpeed Insights：延迟解析 Javascript (LabJS) 的问题

> ID：11639181
> 
> 赞同：0
> 
> 时间：2012-07-24T20:57:21.800
> 
> 标签：javascript, asp.net, labjs

我一直在进行一些网站优化，但遇到了一些令人困惑的问题。PageSpeed Insights 对我们最大的抱怨几乎一直是“延迟解析 Javascript”。为了解决这个问题，我们开始使用 LabJS 来管理大部分 javascript。一切看起来都很棒，我们的 Pagespeed 分数移到了 90 年代中期，其中大部分变化都是我们无法控制的。

然而，最近，当移动标志设置为真以进行测试时，移动报告突然开始给出更差的分数。当我查看“延迟解析 Javascript”反馈时，它显示为移动设备解析的 javascript 比普通报告多得多。什么会导致这个？这是 LabJS 的问题还是我们使用它的方式？

以下是两份报告的链接。

*   正常：[https ://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwww.postrandomonium.com&mobile=false](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwww.postrandomonium.com&mobile=false)
*   移动：[https ://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwww.postrandomonium.com&mobile=true](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwww.postrandomonium.com&mobile=true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:12:55.337

我对正在发生的事情没有明确的答案，但是当您查看报告所抱怨的内容列表时，您会看到来自 google 和 facebook 的数十个脚本（所有这些脚本似乎都像社交图标等）。我的猜测是您的移动页面正在以阻塞方式加载所有这些（不使用 LABjs）。该资源列表中的任何内容都不像您使用 LABjs 加载的典型内容，所以我认为这可能是一个红鲱鱼。

我建议看一下您如何加载这些第三方资源（很可能是它们自己加载）。也许它们最近发生了变化，并且不再擅长异步加载。

# telerik - RadGrid 在排序时忽略负数

> ID：11639185
> 
> 赞同：0
> 
> 时间：2012-07-24T20:57:33.847
> 
> 标签：telerik, telerik-grid, radgrid

我有一个包含以下列的 Telerik RadGrid：

`Item Name, Price, Price Change, % of Change`

所有三个尾随列都包含十进制数据。价格列包含所有正小数，而其他两个包含负数和正数。

排序`Price`和`Price Change`工作正常，但是当我尝试按`% of Change`列排序时，RadGrid 似乎忽略了否定。该列的输出类似于：

```
 0.00
 0.21
-0.39
-0.55
 0.63 
```

请注意，该`Price Change`列包含相似的数据，但在排序时，它不会将负数视为正数。

任何想法为什么会发生这种情况或如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:52:06.613

原来是我的数据源将`% of Change`计算后转换为字符串类型。我`FORMAT(myformula, 2)`用来将百分比转换为带两位小数的固定格式。使用`CONVERT(myformula, DECIMAL(11,2)`列排序后似乎工作正常。

# asp.net - ASP.NET 网页缓存过期问题

> ID：11639186
> 
> 赞同：1
> 
> 时间：2012-07-24T20:57:35.437
> 
> 标签：asp.net, caching, cache-control

我似乎有一个问题，我找不到解决方案....我有一个 ASP.NET 搜索表单，当用户单击结果然后单击浏览器的后退按钮时，用户将被定向到一个页面，该页面显示'网页已过期'

我知道这是缓存问题，这就是我尝试过的...

```
protected void Page_Init(object sender, EventArgs e)
{
    Response.AppendHeader("Cache-Control", "no-cache"); 
} 
```

和

```
protected void Page_Init(object sender, EventArgs e)
{
    Response.AppendHeader("Cache-Control", "no-cache, no-store, must-revalidate");
    Response.AppendHeader("Pragma", "no-cache");
    Response.AppendHeader("Expires", "0");
} 
```

这些解决方案似乎都不起作用，有人知道为什么吗？

我也试过这个...

```
Response.Cache.SetExpires(DateTime.Now.AddMinutes(-1)); 
```

但它没有用。

我做了更多的挖掘，我使用 Fiddler 检查了我的标题，它说`Cache-Control: private, no-store, must-revalidate`我没有在任何地方将我的 Cache-Control 设置为私有......我所拥有的只是导入，是否有可能我的一个导入有一个 Cache-Control在他们中？

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

using CMS.UIControls;
using CMS.GlobalHelper;
using CMS.CMSHelper;
using CMS.Controls; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T04:21:14.797

## 问题

此问题与缓存控制标头无关。对于带有和不带有缓存标题的搜索结果页面，您会看到类似的错误。

这里的问题是您的搜索表单是通过 Http POST 提交的。这意味着搜索字段作为 POST 正文的一部分提交给服务器。浏览器将其视为表单提交（视为联系页面提交）。浏览器内置了防止重复发布相同表单的机制，因为没有经验的用户可能会在不知情的情况下无意中这样做。

例如，假设您有一个向您发送公司电子邮件的联系表。用户可能会通过 POST 表单向您发送消息，然后单击“后退”、“前进”、“后退”、“前进”、“后退”、“前进”，而您不希望收到 3 或 4 个副本相同的消息。因此，当您导航回作为 POST 表单结果的页面时，浏览器会向您发出警告（某些浏览器将允许您单击“再次提交”，但这是不可取的）。

## 解决方案

好的，答案是什么？您需要通过 Http GET 方法提交您的搜索查询。这通常会导致搜索字符串出现在搜索结果页面的查询字符串中。例如，在大多数情况下，Google 在查询字符串变量 'q' 中编码他们的搜索字符串。您可能有一个看起来像“SearchResults.aspx?q=Test%20Phrase”的页面。请注意，搜索短语是在查询字符串中提供的（作为页面 URL 的一部分）而不是在 POST 正文中？

有关如何在 ASP.net 以帖子为中心的处理方式中完成此操作的更多信息，请查看[此 stackoverflow 帖子](https://stackoverflow.com/a/2624176/1002041 "我该怎么做 <form method="get">  在 ASP.Net 中的搜索表单？")。@Solburn 提供的示例是本文中最好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:39:58.330

BenSwayne 已经完美地回答了这个问题。在此之上。这是使用 .Net 的 ImageButton 控件时的常见问题，例如

```
<asp:ImageButton ID="ibnDisplayImage" runat="server" ImageUrl="test.jpg" 
PostBackUrl="~/home.aspx" /> 
```

所以要避免这个问题。使用下面的代码。

```
<a href="~/home.aspx"><img src="test.jpg" /> </a> 
```

或者

```
<asp:HyperLink ID="lnkDisplayImage" runat="server" NavigateUrl="~/home.aspx" > <asp:Image ID="imgDisplayImage" runat="server" ImageUrl="test.jpg" /> </asp:HyperLink> 
```

# java - java中的性别字段

> ID：11639187
> 
> 赞同：6
> 
> 时间：2012-07-24T20:57:37.350
> 
> 标签：java

我正在创建一个包含三个字段的 Employee 类：姓名、年龄和性别。我需要创建一个性别字段，但用户只能选择男性或女性。我想我必须以布尔形式执行此操作，但我不知道该怎么做。谁能帮我吗？

到目前为止，我有：

```
public class Employee {

private String name;
private int age;
private boolean gender;
private boolean male;
private boolean female;

public Employee(String name, int age, boolean gender) 
{
    this.name = name;
    this.age = age;

    boolean f = female;
    boolean m = male;

    if (gender = f)
    {
        System.out.print("female");
    }

    else if (gender = m)
    {
        System.out.print("male");
    }
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public int getAge() {
    return age;
}

public void setAge(int age) {
    this.age = age;
}

public boolean isGender() {
    return gender;
}

public void setGender(boolean gender) 
{
    if (gender = f)
    {
        System.out.print("female");
    }

    else if (gender = m)
    {
        System.out.print("male");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T20:59:59.813

Better to use an enum for Gender:

```
public enum Gender {
    MALE, FEMALE
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-03T19:16:01.570

将性别指定为`enum`有其局限性：在单个 java 类中只能设置 65535 个属性（和方法），这在当今多样化的世界中是不可接受的。

我建议使用 BigInteger，它的最大值高达`(2 ^ 32) ^ 2147483647`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T21:02:58.527

您可以使用 a`boolean`或者您可以创建一个`Gender`枚举：

在 Gender.java 中：

```
public enum Gender {
    MALE,
    FEMALE
} 
```

在 Employee.java 中：

```
public class Employee {

    private String name;
    private int age;
    private Gender gender;

    public Employee(String name, int age, Gender gender) 
    {
        this.name = name;
        this.age = age;
        this.gender = gender;
        printGender();
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public Gender getGender() {
        return gender;
    }

    public void setGender(Gender gender) 
    {
        this.gender = gender;
    }

    public final void printGender() {
        System.out.println(gender.name().toLower());
    }    
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T01:12:49.257

布尔值是不合适的，默认值也不合适，除非它是 UNKNOWN。您至少需要三个值，也许是四个。请参阅[此答案](https://stackoverflow.com/questions/4175878/storing-sex-gender-in-database/4175901#4175901)以进行完整讨论。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-24T21:00:58.900

如果要使用布尔值，则应将其称为`isMale`or `isFemale`，而不是`isGender`。请注意，无论您选择哪个，都可能有人会抱怨他们的性别被视为`false`. 这就是为什么枚举可能是更好的选择的原因。

布尔值可能不合适的另一个原因是，在某些国家/地区，在某些情况下要求人们披露其性别是非法的。出于这个原因，您可能希望提供具有三个选项的枚举：第三个是存储未披露性别的情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-10T14:38:56.763

从 Java 1.5 开始，该语言支持枚举类型 ( `enum`)，非常适合此类问题。

简单的性别枚举：

```
public enum Gender {
    M, F, UNKNOWN
} 
```

复杂的性别枚举：

```
/**
 * Enumeration for reflecting user's gender.
 * @author naXa!
 */
public enum Gender {
    /** Male. */
    M("Male"),
    /** Female. */
    F("Female"),
    /** Gender is not known, or not specified. */
    UNKNOWN("Unknown");

    private final String name;

    private Gender(String name) {
        this.name = name;
    }

    /**
     * @return The string representation of this element in the enumeration.
     */
    public String getName() {
        return this.name;
    }
} 
```

使用示例：

```
Employee employee = new Employee("John Doe", 23, Gender.M); 
```

另请注意，an 的实例`enum`是常量，应遵循常量的命名约定。即，您应该将每个字母大写，并用下划线分隔后续单词。按照惯例，下划线字符从不在其他地方使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T21:00:08.740

If you're using Java 1.5 or later, you can (and should) use [enum types](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html), which provide strong typing, convenient/implementation-independent naming, and extensibility.

Example:

```
public enum Gender {
    MALE,
    FEMALE,
}

// usage example
myEmployee.setGender(Gender.FEMALE); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-24T21:00:38.523

这里有几件事是错误的。首先，在您的 if 语句中，您使用单个运算符将值`f`和性别分配给性别。你需要做 if (gender == true) 或 if (gender == false)。另外，我建议让 true 代表男性或女性，而 false 代表另一个性别。`m``=`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-26T00:11:29.610

**由于多种原因之一，**布尔方法是无用的：****

 **> 性别和性别之间的区别将性别（个体生殖系统的解剖结构和第二性特征）与性别（基于人的性别的社会角色，通常是从文化上学到的）或基于个体对自己性别的个人识别区分开来。内部意识（性别认同。在某些情况下，个人的指定性别和性别不一致，结果有时是变性人。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-24T21:00:12.137

Two ideas:

1) Make a boolean like `isMale` or `isFemale`

2) Make a `Gender` Enum that only has `Gender.MALE` and `Gender.FEMALE`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-12T12:37:27.763

问题中的代码有一些问题。

**第一的。**

构造函数应该设置 Employee 类的变量的值。男性和女性布尔变量必须在使用前分配。

```
public class Employee {

    // other vars
    private boolean male;
    private boolean female;

    public Employee(/*other vars*/, boolean gender) 
    {
        /*THIS IS WRONG. male and female values not set
          so you cant assign anything to f or m. it will be an error.
        */
        boolean f = female;
        boolean m = male; 
```

**第二。**

= 和 == 有不同的含义。= 将右侧的内容分配给左侧的变量。== 检查是否相等。

```
//will assign the value of f to gender
if (gender = f){

// will check for equality
if(gender == f){ 
```

**第三。**

setGender(boolean gender) 方法甚至没有设置性别。

```
//as it should be if you choose to use boolean.
public void setGender(boolean gender) 
{
    this.gender = gender;
} 
```

**第四。**

使用多个布尔变量来检查同一件事会为将错误引入代码中创造更多机会。例如，每次将男性设置为真时，女性必须设置为假，反之亦然。

**回答问题。**

您可以使用一个布尔值而不是问题代码中使用的 3 个布尔值。要么 isMale 要么 isFemale 选择一个你不需要两者。如果 isMale 为 false，则员工为女性。

我会使用枚举。你可以在这里阅读[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html) 或 Ted Hopp 的回答**

# python - Tastypie - 通过 ForeignKey 字段访问字段数据

> ID：11639188
> 
> 赞同：0
> 
> 时间：2012-07-24T20:57:39.963
> 
> 标签：python, django, api, tastypie

我有一个 Tastypie 资源 (TaskImagesResource)，当向 API 发出请求时，它需要覆盖 obj_get_list 函数以返回正确的数据。我需要访问另一个资源（TaskResource，它与 TaskImagesResource 具有 OneToOne 关系）的属性才能执行此操作。我可以使用 get_related_resource() 获取 Task 资源的实例，但我不知道如何从对象中获取数据。这是我现在的代码：

```
class TaskResource(ModelResource):
    target = fields.OneToOneField(TargetResource, 'target', full=True)
    activity = fields.ForeignKey(ActivityResource, 'activity')
    time = fields.OneToOneField(TaskEventTimeResource, 'time', full=True)

    class Meta:
        queryset = Task.objects.all()
        filtering = {
            'id' : ALL,
            'activity' : ALL_WITH_RELATIONS,
     }

class TaskImagesResource(Resource):
    task = fields.ForeignKey(TaskResource, 'task', full=True)
    camera = fields.CharField()

    def obj_get_list(self, request, **kwargs):
        task_resource = self.task.get_related_resource(self)
        task = Task.objects.get(id=task_resource.id)
        image_list = task.sorted_imageinstances(self.camera) 
```

但我收到错误“int() 参数必须是字符串或数字，而不是 'CharField'”，因为 task_resource.id 是 CharField 对象而不是数据本身。如何访问实际的现场数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:02:37.687

尝试：

```
task = Task.objects.get(id=int(task_resource.id)) 
```

# javascript - Maximise, minimise and close buttons for each section in web page

> ID：11639190
> 
> 赞同：0
> 
> 时间：2012-07-24T20:57:52.143
> 
> 标签：javascript, jquery, html

I am pretty new to front end. i am exploring it and really loving it.

Here is some problem I encountered. It might be pretty simple.

I have 3 sections on right side of my web page. I want to add a feature to maximise, minimise and close to each of these sections. I am successfull in implementing it using jquery SlideUp() and slideDown() methods.

I am having the buttons like this:

```
<h2 id = "Heading" style="background-color: grey ;">Movie Names      
<button  id = "minimise" > - </button>
<button id = "maximise" >  + </button>
<button id = "close" > x </button>
</h2> 
```

In my webpage i see a gap between these buttons. I am not sure how to get rid of this space. I want to see something like how windows maximise, minimise and close buttons look.

One more question is how can I add space between Movie Names and these buttons because i want to adjust the positon of these buttons.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:02:51.273

这可能是由于换行引起的空白。 `button`元素是内联的，因此出现在它们旁边的空格也会出现内联。

看看这是否有所作为：

```
<h2 id="Heading" style="background-color:grey;">Movie Names
  <button  id="minimise">-</button
  ><button id="maximise">+</button
  ><button id="close">x</button
></h2> 
```

**编辑：**在这里你可以看到 JSfiddle 的不同之处。 [你的代码](http://jsfiddle.net/uJYxn/)与[我的代码](http://jsfiddle.net/uJYxn/1/)。在第二个示例中，按钮元素之间没有空格。但是，由于边距、轮廓等原因，它们可能看起来有空白，您可以通过 CSS 进行控制。

# wolfram-mathematica - 获取结果的十进制值

> ID：11639192
> 
> 赞同：3
> 
> 时间：2012-07-24T20:57:53.153
> 
> 标签：wolfram-mathematica, logarithm

如何获得任何结果的十进制值？我看过[Output Format for Numbers](http://reference.wolfram.com/mathematica/tutorial/OutputFormatsForNumbers.html)，并认为 N 函数应该可以解决问题，但我无法解决。例如：

```
In[1]:=  N[Ln[2], 4]
Out[2]:= Ln[2.000] 
```

显然我希望 Ln[2] 的评估为小数，即 0.6931....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:20:43.267

Mathematica 中没有`Ln[]`。`Log[]`默认情况下，是*自然*对数。

一起去：

```
N[Log[2], 4] 
```

或（更清洁，恕我直言）：

```
Log[2] // N 
```

# c# - DataTable not Found error

> ID：11639195
> 
> 赞同：1
> 
> 时间：2012-07-24T20:57:58.803
> 
> 标签：c#, textbox, dataset

After doing more reading and research into managing data, I have redone the code based off the MSDN site for a dataset; however, I am running into a snag. I believe I have declared the dataset within a class-level; however, whenever I attempt to pull that dataset with

```
DataRow[] drRow = tblEmployee.Select("EmployeeKey = " + TextBox12.Text) 
```

I am getting the errors:

> 1.  The name 'tblEmployees' does not exist in the current context
> 2.  The name 'TextBox12' does not exist in the current context

I want to be able to declare it at the class level so I can call it from anywhere within the form.

I have already read through the MSDN site on class levels, and honestly I think that has just confused me to a greater degree.

Basically is what I want to happen is dataset provides a list of employees in alphabitical order by first name, then when a user selects the the employee from drop down box, it should select the employee ID and display it in textBox12, then perform a search of the tblEmplpoyees for the remaining data to display for the employee such as fields defined in //comments in the code.

Can someone assist me with this, here is what I have for code atm:

```
namespace Tempus.Menus
{
public partial class Employees : Form
{
    public class myData
    {
        DataSet[]drRow = tblEmployees.Select("EmployeeKey = " + TextBox12.Text);;
    }
    public Employees()
    {
        InitializeComponent();
        //Connect to database for Employees Table Headers
        SqlConnection myConnection = new SqlConnection(@"Server=server\CHCTEMPUS;Integrated Security=true;" +
            "user id=userID;password=password;" +
            "Trusted_Connection=yes;" +
            "Database=Database;" +
            "connection timeout=30");

        SqlDataAdapter daEmployees
            = new SqlDataAdapter("Select *, Lname +', '+ Fname as LastFirst, Fname +' '+ Lname as FirstLast FROM Employees WHERE Lname IS NOT NULL AND Fname IS NOT NULL", myConnection);

        DataSet dsEmployees = new DataSet("Employees");
        daEmployees.FillSchema(dsEmployees, SchemaType.Source, "Employees");
        daEmployees.Fill(dsEmployees, "Employees");

        DataTable tblEmployees;
        tblEmployees = dsEmployees.Tables["Employees"];

        comboBox1.DisplayMember = "FirstLast";
        comboBox1.ValueMember = "employeeNumber";
        comboBox1.DataSource = tblEmployees;

        try
        { }

        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }
        finally
        {
            if (myConnection != null)
            {
                myConnection.Dispose();
            }

        }
        comboBox1.SelectedIndexChanged += comboBox1_SelectedIndexChanged;

        comboBox2.SelectedIndexChanged += comboBox2_SelectedIndexChanged;

    }

  private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedIndex != -1)
        {
            textBox1.Text = string.Empty;
        }
        {
            textBox12.Text = comboBox1.SelectedValue.ToString();

        }
    }

    private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {

        if (comboBox2.SelectedIndex == -1)
        {
            textBox1.Text = string.Empty;
        }
        else
        {

            textBox1.Text = comboBox2.SelectedItem.ToString();
        }
    }

    private void Employees_Load(object sender, EventArgs e)
    {

    }
    private void label1_Click(object sender, EventArgs e)
    {

    }
    private void textBox1_TextChanged_1(object sender, EventArgs e)
    {
    //Last Name

    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {
    //First Name
    }

    private void textBox3_TextChanged(object sender, EventArgs e)
    {
    //Middle Name
    }

    private void textBox4_TextChanged(object sender, EventArgs e)
    {
    //Hire Date
    }

    private void textBox5_TextChanged(object sender, EventArgs e)
    {
    //Term Date
    }

    private void textBox6_TextChanged(object sender, EventArgs e)
    {
    //Company
    }

    private void textBox7_TextChanged(object sender, EventArgs e)
    {
    //Notes
    }

    private void textBox8_TextChanged(object sender, EventArgs e)
    {
    //PTO
    }

    private void textBox9_TextChanged(object sender, EventArgs e)
    {
    //SNP
    }

    private void textBox10_TextChanged(object sender, EventArgs e)
    {
    //Credentials
    }

    private void textBox11_TextChanged(object sender, EventArgs e)
    {
    //Employee Full Name (First Last)

    }

    private void textBox12_TextChanged(object sender, EventArgs e)
    {
    //Employee ID
    }

    private void textBox13_TextChanged(object sender, EventArgs e)
    {
    //Branch

    }
    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (checkBox1.Checked)

                {

            // logic here for if the box has now been checked

                }

            else

                {

                // what to do if the box has been unchecked

                }

    }
    private void button1_Click(object sender, EventArgs e)
    {
        Main myNewForm = new Main();

        myNewForm.Show();

        this.Close();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Reports myNewForm = new Reports();

        myNewForm.Show();

        this.Close();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:26:35.077

您不能以这种方式初始化 myClass 的 drRow 成员。首先， tblEmployees 变量是一个局部变量，当Employees 构造函数完成时它就不再存在了。所以，没了。但即使它是一个类成员（在类级别范围内定义），您仍然无法像现在这样使用它。

考虑摆脱您的 myData 类，并将声明放在与您的员工类相同的范围级别。

```
public partial class Employees : Form 
{ 
    DataSet[]drRow;
    public Employees() 
    { 
// etc, etc. 
```

顺便说一句，这也应该解决 TextBox12 上下文问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:19:08.370

您正在以下构造函数中创建一个局部变量`Employees`：

```
DataTable tblEmployees;
tblEmployees = dsEmployees.Tables["Employees"]; 
```

现在您正尝试从另一个类中访问该局部变量：

```
public class myData
{
    DataSet[]drRow = tblEmployees.Select("EmployeeKey = " + TextBox12.Text);;
} 
```

当然，这是行不通的。出于同样的原因，您无权访问`TextBox12`表单中的实例。

我假设您实际上想`DataTable`通过输入的文本过滤 。您应该处理一个事件，例如（过滤器）按钮单击事件。

然后，您可以使用更具可读性和可维护性的 LNQ-To-DataSet 来过滤行。例如，您可以将表声明为表单中的成员变量并在[form_load](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)中对其进行初始化：

```
private DataTable tblEmployees;

private void buttonFilter_Click(object sender, System.EventArgs e)
{
   if(tblEmployees != null)
   {
       DataTable filtered = tblEmployees.AsEnumerable()
                            .Where(r => r.Fields<String>("EmployeeKey") == TextBox12.Text)
                            .CopyToDataTable();
       // do something with it ...
   }
} 
```

# java - 日历卷是否会围绕给定的年份、月份等进行？

> ID：11639196
> 
> 赞同：-3
> 
> 时间：2012-07-24T20:58:00.097
> 
> 标签：java, calendar, utility

所以假设我有这个代码：

```
//someParameterizedDate = New Years Eve 2011
Calendar cal = new GregorianCalendar();
cal.setTime(someParameterizedDate);
cal.roll(Calendar.DAY_OF_YEAR, 1); 
```

现在日历是否等于 2012 年 1 月 1 日？我发现所有的 JavaDocs 有点混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:01:30.100

[java.util.日历](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)

> roll(f, delta) 将 delta 添加到字段 f 而不更改更大的字段。这相当于调用 add(f, delta) 并进行以下调整：
> 
> 滚动规则。调用后较大的字段保持不变。较大的字段表示较大的时间单位。DAY_OF_MONTH 是比 HOUR 更大的字段。

你滚动`DAY_OF_YEAR`哪个意味着它不会影响`MONTH`或者`YEAR`哪个是更大的单位

所以基本上，你应该让你到 2011 年 12 月 1 日

`add`如果您希望到 2012 年 1 月 1 日，您可以使用

# python - How do I plot contours on top of a hexbin plot?

> ID：11639202
> 
> 赞同：5
> 
> 时间：2012-07-24T20:58:52.333
> 
> 标签：python, numpy, matplotlib

I have two arrays, `x` and `y`, both with values within a well defined range. I am able to create a hexbin plot ([see image](http://goo.gl/NBUQA)), however, I would now like to normalize these distributions and draw contour plots around them. I am not so interested in the counts within each hexbin. Instead I am interested in showing the contours corresponding to 1, 2 and 3 standard deviations (σ). I hope to have an output showing the contours similar to [this](http://matplotlib.sourceforge.net/examples/pylab_examples/tricontour_vs_griddata.html) example. The distribution is Gaussian. I would greatly appreciate any input on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-23T22:54:56.827

根据 hexbin 文档[https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.hexbin.html](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.hexbin.html)，您应该能够访问箱的 (x,y) 位置和返回的值多变的。例如：

```
h = hexbin(...)
xy = h.get_offsets()
v = h.get_array() 
```

您可以使用这些来绘制轮廓。

请注意，文档不正确并说`get_offset()`应该调用，但该函数不存在，它是`get_offsets()`.

此外，当`hexbin`用`xscale='log'`and调用时`yscale='log'`，`get_offsets()`则只返回`array([[0., 0.]])`。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-25T07:54:07.353

我已经回答了其他人，如何创建等高线图。[请检查已回答问题](https://stackoverflow.com/questions/9452945/matplotlib-contour-plot-with-intersecting-contour-lines/9491981#9491981)的以下链接。如果您有任何其他问题或想法，请随时在评论中提问。我会尽快回复。

# android - Android：我应该给AdapterView的参数什么类型？

> ID：11639206
> 
> 赞同：1
> 
> 时间：2012-07-24T20:59:05.150
> 
> 标签：android

我的 ListView 有一个 OnItemClickListener，如下所示：

```
OnItemClickListener myClickHandler = new OnItemClickListener(){
                public void onItemClick(AdapterView parent, View v, int position, long id){
                ...
                }
} 
```

但是 Eclipse 给了我以下警告：

“AdapterView 是原始类型。应参数化对泛型类型 AdapterView 的引用。”

不过，我找不到正确的类型来输入参数。

除了禁用泛型警告之外的任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:20:34.923

只需使用问号`?`，这意味着引用任何类型的对象。

```
OnItemClickListener myClickHandler = new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        ...
    }
} 
```

# jsf-2 - facesContext.validationFailed is coming back null

> ID：11639208
> 
> 赞同：0
> 
> 时间：2012-07-24T20:59:11.313
> 
> 标签：jsf-2

For what reason facesContext.validationFailed could be null? (in a postBack where there are errors..) I had to resort to an ugly `if (#{fn:containsIgnoreCase(facesContext.maximumSeverity,'ERROR')}) showSecurePopup('confirm');` because facesContext.validationFailed is coming back null..

the test code is:

```
<h:form>
   <h:messages />
   <br></br>

   <h:outputText value="Validation failed: #{facesContext.validationFailed}" />
   <br></br>

   <h:outputLabel for="field1" value="Test Field" />
   <br></br>

   <h:inputText required="true" />

   <h:commandButton action="#{contactBacking.submitComment}" value="Submit"
      <f:ajax render="@form" execute="@form" />
   </h:commandButton>
</h:form> 
```

EDIT: Edited as per @BalusC's answer.. and took screenshot of result:

[![image](../Images/0dcfc45adf354ae559bc26df0a4c0f70.png)](https://i.stack.imgur.com/x889r.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:38:08.467

[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)返回 a `boolean`which is **never** 。`null`只需摆脱那个无意义的空检查。

```
<h:outputText value="Validation failed: #{facesContext.validationFailed}" /> 
```

# java - 爪哇。在 JPanel 上调整大小问题

> ID：11639210
> 
> 赞同：1
> 
> 时间：2012-07-24T20:59:41.153
> 
> 标签：java, swing, layout

下面的代码片段允许我使用 BorderLayout Manager 在 JPanel 上放置一个 JTextfield 和 2 个 JButton。

```
 JPanel strPanel = new ButtonPanel();
        strPanel.setLayout(new BorderLayout());
        setBorder( new EmptyBorder( 3, 3, 3, 3 ) );

        strfield = new JTextField("",70);
        strPanel.add("West", strfield);
        strPanel.add("Center", btnCopy);
        strPanel.add("East", btnPaste);
        add("North", strPanel); 
```

这是一个截图

![在此处输入图像描述](../Images/697d11b96b2f8a9d27bfc772b0b863c1.png)

但是，更重要的是，当我调整 JFrame 的大小时，“复制”按钮被放大，但我希望 JTextField 被放大，而复制和粘贴按钮的大小保持不变。这是更新的屏幕截图：

![在此处输入图像描述](../Images/fff83fd62f1a34a6296a64fd080bec33.png)

为了尝试修复它，我下载了 NetBeans 等并与 GUI 设计器一起玩，但我无法解决它，即使使用不同的布局管理器。

有人可以阐明一下吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:03:03.937

`BorderLayout`不适合此任务，因为它为`CENTER`组件提供了所有剩余空间。如果您可以将布局更改为，`GridBagLayout`则很容易将最左侧的组件全部剩余空间。

## 例子：

```
public static void main(String[] args) {

    JFrame frame = new JFrame("Test");
    frame.setLayout(new GridBagLayout());

    GridBagConstraints gbc = new GridBagConstraints();
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;

    frame.add(new JTextArea("Hello World!"), gbc);

    gbc.weightx = 0;
    frame.add(new JButton("Copy"), gbc);
    frame.add(new JButton("Paste"), gbc);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

如果你真的想使用`BorderLayout`，你可以将按钮组合在一起并将它们添加到东部，将文本字段添加到中心，执行以下操作：

```
public static void main(String[] args) {

    JFrame frame = new JFrame("Test");

    frame.add(new JTextArea("Hello World!"), BorderLayout.CENTER);
    frame.add(new JPanel(new GridLayout(1, 0)) {{
        add(new JButton("Copy"));
        add(new JButton("Paste"));
    }}, BorderLayout.EAST);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);

} 
```

# canvas - Need to speed up my SVG. Could I convert to WebGL or canvas?

> ID：11639211
> 
> 赞同：13
> 
> 时间：2012-07-24T20:59:45.103
> 
> 标签：canvas, svg, html5-canvas, webgl

I have an SVG drawing with 10138 parts, so it runs slowly.
I want to make it run more like [http://workshop.chromeexperiments.com/globe](http://workshop.chromeexperiments.com/globe)

Here are the solutions/questions I'm considering

*   Is there any way to have the SVG parts render in a less processor-intensive way?
*   Can I convert the SVG to WebGL or canvas?
*   Can I have it run as SVG but render thru WebGL or canvas?

I just want to make it faster .. thoughts?

Here is a screenshot

[![](../Images/b3b55c4969fb362f7d960179df5b0078.png)](https://i.stack.imgur.com/D3InB.png) [![](../Images/8e8a73ac11b87ad95e2ca568cad4a0d2.png)](https://i.stack.imgur.com/LmWPq.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T15:30:06.030

作为一个简化的经验法则：

*   SVG 与要绘制的对象数量成反比
*   画布与分辨率相互缩放。

所以我用 SVG 将 10138 个对象保存在内存中会减慢速度（尽管我不能说硬限制是什么）。如果你进入这个范围的对象，我相信画布和 WebGL 可能会提供更好的性能。大多数现代浏览器已经支持硬件加速画布渲染。
然而，与 SVG 相比，Canvas 更多地涉及用户交互。

您也可以尝试混合它们（有关详细信息，请参见[此处）。](http://blogs.msdn.com/b/ie/archive/2011/04/22/thoughts-on-when-to-use-canvas-and-svg.aspx)
以下是一些有用的资源：

*   [SVG swarm](http://bl.ocks.org/2647924) vs [Canvas swarm](http://bl.ocks.org/2647922)（使用 D3.js）
*   [具有有用信息的Stackoverflow](https://stackoverflow.com/questions/5882716/html5-canvas-vs-svg-vs-div)线程

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-24T22:46:03.253

具有大量片段的 SVG 的减速来自 SVG 的非保留模式。如果没有更多关于 SVG 外观和行为方式的详细信息，很难提出具体建议。所以总的来说：

*   如果您的图形通常是静态的（您不需要跟踪每个图形对象的鼠标事件），您可以使用 HTML5 画布（其中绘图命令将像素blit 到图像，然后您基本上有一个静态图像）。

*   如果你的图形有很多重复的部分，使用带有`<use>`元素的 SVG 可以减少内存占用并提高性能。

# html - 如何使用自动完成插件刷新 div？

> ID：11639212
> 
> 赞同：0
> 
> 时间：2012-07-24T20:59:47.273
> 
> 标签：html, ajax, jquery-ui, jquery

当用户在位于 DIV 上方的字段中键入字母时，我怀疑这涉及 DIV 中的自动（其中包含其他用户的姓名及其图像和年龄）。

作为 Facebook 好友的自动搜索。

搜索时，我找到了一个 jQuery 插件，它是“自动完成”，但我想修改为与 facebook 朋友查找器具有相同的行为。

有没有人有任何例子可以做到这一点？还是另一种方式？

注意：我在 PHP 中有一个函数，可以按字母返回所有名称。¿我可以一直用ajax调用这个函数来更新DIV吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:05:52.437

jQuery UI 有一些很好的内置功能

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

您可以在检索建议时使用 javascript 方式，也可以进行 ajax 调用 - 这主要取决于您拥有多少可能匹配的条目。

如果你有太多，将所有元素存储在 js 中可能不是最好的方法。

# android - ContentProvider、Loader 和 ProgressBar

> ID：11639213
> 
> 赞同：2
> 
> 时间：2012-07-24T20:59:49.040
> 
> 标签：android, android-contentprovider, android-progressbar, android-loader

我有一个`ContentProvider`从 sqlite 数据库中获取数据并通过`Loader`. 它由`Service`运行 an`AsyncTask`从服务器下载数据并在`ContentProvider`. 我希望这很清楚，但可以肯定的是：

*   `ListFragment``ContentProvider`从via获取数据`Loader`，

*   `ContentProvider`更新为`Service`.

现在，当我第一次启动应用程序时我的本地 sqlite 数据库为空时，它显示它没有事件，即使它们当前正在通过`Service`. 我宁愿`ProgressBar`在这一刻展示（无限旋转的轮子，而不是酒吧）。但是，如果我`ProgressBar`在没有来自数据库的结果时显示，即使在这种特定情况下从服务器获取数据之后，当外部数据库中没有记录时它也会存在（在我的情况下它经常发生）。所以：

*   当我第一次下载数据时，`Service` **我想显示一个 ProgressBar**，直到`ContentProvider`给出非空结果**或**完成它的`Service`工作。

*   当`ContentProvider`什么都不返回**并** `Service`完成它的工作（并获取空结果）**时，我希望应用程序显示“未找到结果”。**

**我的问题可能是：**如何通知`ListFragment`它`Service`仍在运行或它完成了 ts 工作。我的意思是 - 我不应该`Fragment`在`Service`. 这违背了 的想法`ContentProviders`，不是吗？又怎样？

注意：我真的不知道哪个代码片段在这里会有所帮助，所以如果您觉得需要查看一些特定的片段，请在评论中告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:51:25.033

有多种技术可以在`Fragment`/`Activity`和 a之间进行通信`Service`。

其中之一是使用[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)并将其额外发送到[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。`Intent`

您创建自定义接收器`ServiceResultReceiver`扩展`ResultReceiver`.

```
public class ServiceResultReceiver extends ResultReceiver {

    private Receiver mReceiver;

    public ServiceResultReceiver(Handler handler) {
        super(handler);
    }

    public void setReceiver(Receiver receiver) {
        mReceiver = receiver;
    }

    public interface Receiver {
        public void onReceiveResult(int resultCode, Bundle resultData);
    }

    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        if (mReceiver != null) {
            mReceiver.onReceiveResult(resultCode, resultData);
        }
    }
} 
```

制作你的`Fragment`实现`ServiceResultReceiver.Receiver`接口。创建接收器并将其初始化为您的`Fragment`. 您比将接收器传递给服务，并且在服务中只需从意图中获取接收器并调用`receiver.send()`以将任何内容发送回接收器。

```
public class MyFragment extends ListFragment implements ServiceResultReceiver.Receiver {
    private ServiceResultReceiver mReceiver;
    ....

    @Override
    public void onCreate(Bundle savedInstanceState) {
        ...
        mReceiver = new ServiceResultReceiver(new Handler());
        mReceiver.setReceiver(this);
    }

    public void startMyService() {
        final Intent intent = new Intent(getActivity(), MyService.class);
        intent.putExtra("receiver", mReceiver);
        getActivity().startService(intent);
    }

    @Override
    public void onReceiveResult(int resultCode, Bundle resultData) {
        // service finished
    }
}

public class MyService extends IntentService {
    ...
    @Override
    protected void onHandleIntent(Intent intent) {
        // download data and update database
        ....
        final ResultReceiver receiver = intent.getParcelableExtra("receiver");
        if (receiver != null) {
            receiver.send(0, null);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T22:11:44.197

由于您对将实际进度发布回 UI 不太感兴趣，因此实现这一点的最简单方法是使用一对自定义广播，也可能使用静态布尔值来显示运行状态。

基本上，您的服务可以在开始下载和完成下载时通知您感兴趣的应用程序的任何组件。因此，您可以定义两个自定义操作字符串：

```
public static final String ACTION_DOWNLOADSTART = "com.mypackage.intent.ACTION_DOWNLOADSTART";
public static final String ACTION_DOWNLOADCOMPLETE = "com.mypackage.intent.ACTION_DOWNLOADCOMPLETE"; 
```

然后让您的服务在代码中的适当位置广播它们：

```
Intent start = new Intent(ACTION_DOWNLOADSTART);
sendBroadcast(start);

//...Service does its work

Intent finish = new Intent(ACTION_DOWNLOADCOMPLETE);
sendBroadcast(finish); 
```

您可以在应用程序中的任何位置使用 a 注册这些回调`BroadcastReceiver`并采取相应措施（即检查状态`ContentProvider`并在必要时显示/隐藏进度）。

另一种常见的做法是，如果您希望能够检查 a`Service`是否在任何给定点运行，只需包含一个`private static boolean`您可以在 a 处于活动状态时切换的成员`Service`（可能在`onCreate()`/之间，`onDestroy()`但可能在其他地方）和访问器方法（如`isRunning()`. `Service`然后，您的应用程序还可以通过调用该方法随时检查是否正在运行。

# android - ProgressDialog doesn't show the real progress of fetching information from a web server

> ID：11639220
> 
> 赞同：0
> 
> 时间：2012-07-24T21:00:06.553
> 
> 标签：android, progressdialog

I transferred my code of fetching some information into an Async class, it is to minimize the buffering and avoid the possibility of 'not responding', or worse crashing of my application.

Now, I want to show a ProgressDialog, and it should be set to 'not cancelable' to avoid users of interrupting the connection.

But I am a little confused if my ProgressDialog really show the progress of what actually happens in my application (during the fetching of information from an online server). Because on my emulator, my application pauses (for about 2 seconds), and then shows the ProgressDialog, and then immediately shows the result of the 'fetching'.

Any help will be much appreciated.

Thanks. Here's my code.

```
public void onClick(View v) 
{
    new retrieveOnline().execute();
}

private class retrieveOnline extends AsyncTask <Void, Void, Void>
{
    protected void onPreExecute ()
    {
        pDialog = new ProgressDialog (FirstScreen.this);
        pDialog.setMessage("Please wait...");
        pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }
    @Override
    protected Void doInBackground(Void... unused)
    {
        runOnUiThread (new Runnable()
        {
            public void run()
            {
                httpclient = new DefaultHttpClient();
                httppost = new HttpPost("http://mysite.com/database/login.php");
                stringEmail = etEmail.getText().toString();
                stringPassword = etPassword.getText().toString();

                try 
                {
                    nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("stringEmail", stringEmail));
                    nameValuePairs.add(new BasicNameValuePair("stringPassword", stringPassword));

                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    response = httpclient.execute(httppost);
                    if(response.getStatusLine().getStatusCode()== 200)
                    {
                        entity = response.getEntity();
                        if(entity != null)
                        {   
                            InputStream instream = entity.getContent();
                            JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                            String errorEmail = jsonResponse.getString("errorEmail");
                            if (errorEmail != "")
                            {
                                tvEmailError.setText(errorEmail);
                            }else{}

                            String errorPassword = jsonResponse.getString("errorPassword");
                            if (errorPassword != "")
                            {
                                tvPasswordError.setText(errorPassword);
                            }else{}

                            String inactiveAccount = jsonResponse.getString("inactiveAccount");
                            if (inactiveAccount.length() != 0)
                            {                       
                                AlertDialog alert = new AlertDialog.Builder(FirstScreen.this).create();
                                alert.setCancelable(false);
                                alert.setMessage("Your account is currently inactive and unusable." + "\nDo you want to send an account activation message to your email now?");
                                alert.setButton("Yes", new DialogInterface.OnClickListener()
                                {   
                                    public void onClick(DialogInterface arg0, int arg1)
                                    {
                                        httpclient = new DefaultHttpClient();
                                        httppost = new HttpPost("http://mysite.com/database/activate2.php");
                                        stringEmail = etEmail.getText().toString();
                                        stringPassword = etPassword.getText().toString();

                                        try
                                        {
                                            nameValuePairs = new ArrayList<NameValuePair>();
                                            nameValuePairs.add(new BasicNameValuePair("stringEmail", stringEmail));
                                            nameValuePairs.add(new BasicNameValuePair("stringPassword", stringPassword));

                                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                                            response = httpclient.execute(httppost);
                                            if(response.getStatusLine().getStatusCode()== 200)
                                            {
                                                entity = response.getEntity();
                                                if(entity != null)
                                                {
                                                    InputStream instream = entity.getContent();
                                                    JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                                                    String successActivation = jsonResponse.getString("successActivation");
                                                    if (successActivation.length() != 0)
                                                    {
                                                        //Progress Dialog here.
                                                        Toast.makeText(getBaseContext(), "We successfully sent an activation message to your email account. Try to log in again after activating your account.", Toast.LENGTH_LONG).show();
                                                    }
                                                    else
                                                    {
                                                        Toast.makeText(getBaseContext(), "Sorry, we are unable to reach your email account.",Toast.LENGTH_SHORT).show();
                                                    }
                                                }
                                            }   
                                        }
                                        catch (Exception e)
                                        {
                                            e.printStackTrace();
                                            Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
                                        }
                                    }
                                });
                                alert.setButton2("Not now", new DialogInterface.OnClickListener()
                                {   
                                    public void onClick(DialogInterface arg0, int arg1)
                                    {
                                        AlertDialog alert2 = new AlertDialog.Builder(FirstScreen.this).create();
                                        alert2.setCancelable(false);
                                        alert2.setMessage("Exit FindDroid?");
                                        alert2.setButton("Yes", new DialogInterface.OnClickListener()
                                        {   
                                            public void onClick(DialogInterface arg0, int arg1)
                                            {
                                                finish();
                                            }
                                        });
                                        alert2.setButton2("No", new DialogInterface.OnClickListener()
                                        {   
                                            public void onClick(DialogInterface arg0, int arg1)
                                            {
                                                //Do nothing
                                            }
                                        });
                                        alert2.show();
                                    }
                                });
                                alert.show();
                            }else{}

                            if ((errorEmail.length()==0) && (errorPassword.length()==0)&& (inactiveAccount.length()==0))
                            {                       
                                String dbEmail = jsonResponse.getString("dbEmail");
                                String dbPassword = jsonResponse.getString("dbPassword");
                                //---Store dbEmail and dbPassword to SharedPreferences---//
                                //-------------------------------------------------------//
                                Intent i = new Intent(getApplicationContext(), Construction.class);
                                startActivity(i);
                                finish();
                            }

                        }//if (entity!=null)..      
                    }//if response()...
                }//try..
                catch(Exception e)
                {
                    e.printStackTrace();
                    Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
                }   

            }
        });

        return (null);
    }

    protected void onPostExecute (Void unused)
    {
        pDialog.dismiss();
    }
} 
```

I am making a log in activity, and it's getting the registered users information from an online server..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:05:46.643

Ok, so what you have here is an AsyncTask that immediately creates a runnable that runs on the UI thread, completely defeating the purpose of the AsyncTask. Get rid of the runOnUIThread, do all the processing in the background call and use the OnProgressUpdate and OnPostExecute to update the UI. Also ready the API documentation here:

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

The ProgressDialog doesn't automatically update, you need to update it in the OnProgressUpdate call from your AsyncTask.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:40:00.403

Yes, call publishProgress from `doInBackground` with an integer to pass to `pDialog.setProgress(int)` Alter the `AsyncTask` signature to pass the integer `<Void, Integer, Void>` You'll want to normalize that progress integer between 0-10000 before passing to `onProgressUpdate` This can be done when loading an image or a large amount of data from the web by loop through bytes or lines, reading in chunks, and passing progress update as you go.

Another thing you need to modify, is you CANNOT access/modify/touch-in-any-way objects in the UI during `doInBackground` You'll need to move things like `alert.show()` Toast and I beleive the Activity methods also (ie. `finish()`) to the `postExecute` method.

# icons - Google Icons - how to get them?

> ID：11639226
> 
> 赞同：0
> 
> 时间：2012-07-24T21:00:17.100
> 
> 标签：icons

I'm searching for google icons for my website, but google doesn't provide somewhere their icons to be used. Does anyone know how to get them? btw, something I already found is this: [http://www.google.com/images/icons/product/search-128.png](http://www.google.com/images/icons/product/search-128.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:04:37.747

[http://deployment.googleapps.com/Home/user-resources/google-icons-and-logos](http://deployment.googleapps.com/Home/user-resources/google-icons-and-logos)

或者，直接下载，[http://deployment.googleapps.com/Home/user-resources/google-icons-and-logos/google_apps_icons.zip?attredirects=0](http://deployment.googleapps.com/Home/user-resources/google-icons-and-logos/google_apps_icons.zip?attredirects=0)

因为它是一个下载，我留下了链接，所以你可以看到它来自哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T11:27:12.420

关于 google 图标，这里有一个巨大的新存储库，其中包含 Material Design 的东西：[https ://www.google.com/design/icons](https://www.google.com/design/icons)

# regex - 带有 Select-String 的 PowerShell RegEx 不返回任何行

> ID：11639227
> 
> 赞同：1
> 
> 时间：2012-07-24T21:00:18.557
> 
> 标签：regex, powershell

使用这个正则表达式测试器：http: [//myregextester.com/index.php](http://myregextester.com/index.php) 表示我的正则表达式应该可以工作：正则表达式：

```
{name:"(\w*?)", rank:([\d]+)}, 
```

要捕获的样本数据：

```
{name:"AARON", rank:77},
{name:"ABBEY", rank:1583}, 
```

这是我尝试运行的 powershell 脚本，用于将类似 json 的数据解析到 powershell 网格中。

```
$regex = '{name:"(\w*?)", rank:([\d]+)},'

(Select-String -Path EmailDomains.as -Pattern $regex -AllMatches).matches |foreach {

$obj = New-Object psobject

$obj |Add-Member -MemberType NoteProperty -Name Rank -Value $_.groups[1].value

$obj |Add-Member -MemberType NoteProperty -Name Name -Value $_.groups[0].value

$obj

} |Out-GridView -Title "Test" 
```

reg-ex 似乎从不返回值（我猜它是 MS 正则表达式与 Perl 正则表达式混合，但我无法识别），所以我不确定问题可能是什么。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:28:09.583

问号在不同的环境中往往有不同的功能（在这个中，我认为它的意思是“匹配前面的字符0或1次”）。我怀疑它与 Perl 的相同。代替

```
"(\w*?)" 
```

尝试：

```
"([^"]*)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:31:03.310

你的表情：

```
(Select-String -Path EmailDomains.as -Pattern $regex -AllMatches) 
```

返回 MatchInfo 对象的数组。数组本身没有 Matches 属性。

您需要做的是使用 Slect-Object 命令行开关扩展 Matches 属性，然后将其传递到您的管道中：

```
Select-String -Path EmailDomains.as -Pattern $regex -AllMatches | select-object -expand Matches | foreach { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:30:46.193

我不认为你的正则表达式是问题。Matches 是 Select-Object 返回的每个对象的属性，而不是返回的对象集合的属性。

```
$regex = '{name:"(\w*?)", rank:([\d]+)},'
$matches = (Select-String -Path .\a.txt -Pattern $regex)

$matches | Select -ExpandProperty Matches | Select @{n="Name";e={$_.Groups[1].Value}}, @{n="Rank";e={$_.Groups[2].Value}} 
```

# c - 宏是否有任何默认或推荐的样式？

> ID：11639230
> 
> 赞同：3
> 
> 时间：2012-07-24T21:00:35.000
> 
> 标签：c, coding-style, macros

我发现了几个不同风格的宏。
对于像这样的头文件：

```
#define __HEADER_H__
#define _HEADER_H_
#define _header_h 
```

简单的宏：

```
#define SOMEMACRO something
#define somemacro something
#define SOME_MACRO something 
```

带参数的宏：

```
#define func_macro() something() // arguments not used?
#define FUNC_MACRO something()
#define func_macro something() 
```

* * *

所以我的问题是：其中一些风格是好还是坏？宏名称是否有“默认”样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:12:13.450

使用所有大写字母绝对是常量的方法。但是，我建议永远不要使用函数宏。我建议编写内联函数。在某些情况下使用的函数宏可能会导致逻辑错误。例如：

```
#define FUNC(x) x + x

int main() {
    int a = 1;
    b = FUNC(a++);
} 
```

结果是未定义的，很可能不是预期的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:17:03.293

根据[印第安希尔 C 风格指南，在 UofT、UW 和其他地方进行了修订](http://www.maultech.com/chrislott/resources/cstyle/indhill-cstyle.pdf)：

**11\. 命名约定**（第 13 页）：

> #define 常量应该全部大写。

...

> 许多宏“函数”都使用大写字母。一些宏（例如 getchar 和 putchar ）是小写的，因为它们也可能作为函数存在。仅当宏的行为类似于函数调用时，小写宏名称才可接受，也就是说，它们只对参数进行一次评估，并且不对命名参数赋值。有时，即使参数只计算一次，也无法编写行为类似于函数的宏。

另请阅读 pdf 文档第 14 页的第 12 章（常量）和第 13 章（宏）。

* * *

恕我直言，他们的命名约定非常合理。

# php - 增量计数器mysql

> ID：11639234
> 
> 赞同：1
> 
> 时间：2012-07-24T21:00:46.443
> 
> 标签：php, mysql, myisam

我的问题很简单，但答案可能很棘手。

我在 PHP 中，我想手动管理我的对象的唯一 ID。棘手的是管理原子性。我不希望 2 个元素获得相同的 ID。

“元素”在“组”中分组。在每个组中，我希望元素 ID 从 1 开始，并为该组中的每个插入增量增长。

我的第一个解决方案是在“组”表中有一个“lastID”列：

```
CREATE TABLE groups ( id INT AUTO_INCREMENT, lastId INT )
CREATE TABLE elements ( myId INT, multiple values ...) 
```

**为了避免许多元素具有相同的 ID，我必须更新 lastId 并在原子 SQL 查询中选择它。**

之后，检索到一个，我有一个无法再次选择的唯一 ID，我可以插入我的元素。

我的问题是如何解决粗体部分？我的数据库是带有 MyISAM 引擎的 MySQL，所以没有事务支持。

```
UPDATE groups 
SET lastId = lastId + 1 
WHERE id = 42

SELECT lastId 
FROM groups
WHERE id = 42 
```

有没有比这两个请求更原子的东西？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:03:05.750

```
UPDATE groups SET lastId = last_insert_id(lastId + 1) 
```

然后你可以得到你的新身份证

```
SELECT last_insert_id() 
```

与参数一起使用`last_insert_id`将存储该值并在您稍后调用它时返回它。
这种生成自动编号的方法最适用于只有几行的 MyISAM 表（MyISAM 总是锁定整个表）。它还具有在事务期间不锁定表的好处（如果它是 InnoDB 表，则会发生这种情况）。

这是来自[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/information-functions.html)：

> 如果 expr 作为 LAST_INSERT_ID() 的参数给出，则参数的值由函数返回，并作为 LAST_INSERT_ID() 返回的下一个值被记住。这可以用来模拟序列：
> 
> 创建一个表来保存序列计数器并对其进行初始化：

```
CREATE TABLE sequence (id INT NOT NULL); 
INSERT INTO sequence VALUES (0); 
```

> 使用该表生成序列号，如下所示：

```
UPDATE sequence SET id=LAST_INSERT_ID(id+1);
SELECT LAST_INSERT_ID(); 
```

> UPDATE 语句递增序列计数器并导致对 LAST_INSERT_ID() 的下一次调用返回更新的值。SELECT 语句检索该值。mysql_insert_id() C API 函数也可用于获取值。请参阅第 21.8.3.37 节，“mysql_insert_id()”。
> 
> 您可以在不调用 LAST_INSERT_ID() 的情况下生成序列，但是以这种方式使用该函数的效用是 ID 值在服务器中作为最后自动生成的值进行维护。它是多用户安全的，因为多个客户端可以发出 UPDATE 语句并使用 SELECT 语句（或 mysql_insert_id()）获取自己的序列值，而不会影响生成自己的序列值的其他客户端或受其影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T21:09:13.447

一种选择是让您使用漂亮的 MyISAM 功能，让每个组的 auto_increment 值递增。

CREATE UNIQUE INDEX elements_ix1 ON 元素（groupId，myID）

myID INT NOT NULL AUTO_INCREMENT

这比涉及更新单独表的任何事情都更加“原子”。请注意，这仅适用于 MyISAM，不适用于 InnoDB。

* * *

摘自[http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html)

MyISAM 笔记

对于 MyISAM 表，您可以在多列索引中的辅助列上指定 AUTO_INCREMENT。在这种情况下，AUTO_INCREMENT 列的生成值计算为 MAX(auto_increment_column) + 1 WHERE prefix=given-prefix。当您要将数据放入有序组时，这很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:03:07.627

我假设您的 MySQL 安装也具有支持事务的 InnoDB 引擎。您只需要更改表的引擎类型。

# python - 运行 apache 时 python locale.setlocale 失败

> ID：11639235
> 
> 赞同：0
> 
> 时间：2012-07-24T21:00:48.330
> 
> 标签：python, django-templates, apache2, django-views, locale

我设置了一个简单的 Ubuntu/django/apache 服务器，但在格式化一些我想在 Django 模板中显示的数字时遇到了问题。当我使用 Django 测试服务器在本地（即在我的工作机器上）运行代码时，所有格式都没有问题。

同样，当我在服务器上打开 IDLE 时，我可以这样做：`

> > > >>> 导入语言环境
> > > 
> > > >>> locale.setlocale(locale.LC_ALL,'')
> > > 
> > > 'en_US.UTF-8'
> > > 
> > > >>> '{0:n}'.format(42424242)
> > > 
> > > '42,424,242'`

但是，每当我尝试运行 apache 服务器并实时测试代码时，它都会失败，我会得到如下输出：

> > > '42424242'

我在

> > > locale.setlocale(locale.LC_ALL,'')

调用在我的 view.py 文件中，我在 apache 错误日志中找到的所有内容是

> > > [2012 年 7 月 24 日星期二 15:26:56] [错误] C

可能是 apache 进程没有访问本机语言环境设置的权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:28:56.020

我设法通过显式调用来解决问题

> > > locale.setlocale(locale.LC_ALL,'en_US.UTF-8')

我不确定为什么没有 en_US.UTF-8 参数就无法工作，因为本地设置是“en_US.UTF-8”。如果有人知道为什么我需要在 apache 进程运行代码时使用显式调用，而不是在我在其他任何地方测试它时，我仍然会对答案感兴趣，但我会将其标记为已解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-22T09:16:34.840

这是错误，因为默认语言环境不提供位置信息。你可以在这里阅读更多：

```
https://code.djangoproject.com/ticket/5846 
```

# django - 如何在模板上显示选择字段选择小部件？

> ID：11639238
> 
> 赞同：0
> 
> 时间：2012-07-24T21:00:59.570
> 
> 标签：django, forms, drop-down-menu, choicefield

这是我的看法：

```
CHOICES = (('10','10'), ('20','20'),('30','30'), ('50','50'))

class Droplist (forms.Form):
    number = forms.ChoiceField(choices = CHOICES)    

    def page_objects(request):
        if request.method == 'POST': # If the form has been submitted...
            form = Droplist(request.POST) # A form bound to the POST data
            if form.is_valid(): # All validation rules pass
                pass #pages = form.cleaned_data['value']
                #return AutoPaginateNode(paginate_by=pages) # Redirect after POST
        else:
            form = Droplist() # An unbound form

        return render_to_response('pagination.html', {'form': form }) 
```

这是我的模板：

```
<form action="/submit/" method="post">{% csrf_token %}
   {{ form }}
   <input type="submit" value="Select">
</form> 
```

我如何呈现我的表单，因为我需要有一个带有模板选项的下拉框？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:13:37.150

您需要使用`{{ form.as_p }}`：

```
<form action="/submit/" method="post">{% csrf_token %}
   {{ form.as_p }}
   <input type="submit" value="Select">
</form> 
```

您也可以`{{ form.as_table }}`用于输出表格行，但您需要提供自己的`<table>`并`form.as_ul`输出列表项：

```
<form action="/submit/" method="post">{% csrf_token %}
   <table>
       {{ form.as_table }}
   </table>
   <input type="submit" value="Select">
</form> 
```

您可以在 Django 的文档中找到有关[使用模板显示表单的更多信息](https://docs.djangoproject.com/en/dev/topics/forms/#displaying-a-form-using-a-template)

# php - Symfony2 没有正确保存会话

> ID：11639240
> 
> 赞同：3
> 
> 时间：2012-07-24T21:01:06.633
> 
> 标签：php, session, symfony

Symfony 在每次页面加载时创建一个新会话，而不是跨请求携带数据时遇到问题。config.yml 中 session 部分的 auto_start 设置为 false，并且常规 php 会话可以正常工作。只有在 symfony 中运行时我才会遇到问题。

例如，我创建了测试操作：

```
public function sessionTestAction()
{

    $s_Response = '<html><head></head><body><p>Foo</p></body></html>'; //Initialize response and headers
    $a_Headers = array();
    $i_StatusCode = 200;

    $oSession = $this->get('session');
    var_dump($oSession->all());

    if(!$oSession->has('Test'))
    {
        $oSession->set('Test', 'Bar');
    }

    $oSession->save();
    return new Response($s_Response, $i_StatusCode, $a_Headers);
} 
```

预期的操作是，在第一个页面加载时，var_dump 将不会产生任何结果，并且在任何后续执行中，它将包含 Test=>Bar。但是，它永远不会跨请求获取该数据。

此外，它为每个请求创建一个新的会话 ID。

我正在使用 Symfony v2.0.15 和 PHP v5.4

有人有想法么？

编辑：

我想，我取得了一些进展。我对测试操作进行了以下更改：

```
public function sessionTestAction()
{

     //Initialize response and headers
    $oRequest = $this->get('request');
    $a_Headers = array();
    if (isset($oRequest->headers->all()['cookie']))
    {
        $a_Headers['Set-Cookie'] = $oRequest->headers->all()['cookie'];
    }
    $i_StatusCode = 200;

    $oSession = $oRequest->getSession();
    $oSession->start();
    $s_Response = print_r($oSession->all(), true);
    if(!$oSession->has('Test'))
    {
        $oSession->set('Test', 'Bar');
    }

    $oSession->save();
    $oResponse = new Response($s_Response, $i_StatusCode, $a_Headers);
    return $this->render('Bundle:Default:index.html.twig', array('response' => $s_Response), $oResponse);
} 
```

那个树枝文件只有 {{response|raw}}。它现在为 3 个请求中的 2 个保留会话。但是，在第三次请求中，它被清除了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:21:33.320

原来问题是，每当 app.php 运行时，有人添加了一行来设置会话 cookie，我猜不知道 symfony 自己处理会话。问题解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-10T19:00:54.317

我遇到过几次这个问题，非常烦人。所以，让我描述一下可能的解决方案。

打开开发环境 - yourdomain.com/app_dev.php/ 尝试刷新页面几次。如果您每次都看到会话 ID 更改 - 这意味着会话已中断。

![会话 ID](../Images/cd63a636d3f6fd0ea750a96cdd920bb0.png)

如果您使用的是 chrome（如果不是 - 您应该这样做，它对开发人员来说是最好的；）） - 您可以打开开发人员工具（单击 F12）。接下来，检查网络选项卡，刷新页面并找到您的主要请求。检查您的请求的标头 - 如果应该看到“Cookie:PHPSESSID”。 ![在此处输入图像描述](../Images/a62a4be3874dda5b839f0f16b4cf7311.png)

如果您没有看到 - cookie 有问题。就我而言，它是

```
framework:
    session:         
        cookie_domain: mydomain.com 
```

# android - Android - 在计时器内重复运行线程

> ID：11639251
> 
> 赞同：14
> 
> 时间：2012-07-24T21:01:42.627
> 
> 标签：android, multithreading, timer, repeat

首先，我什至无法选择要使用的方法，我现在阅读了几个小时，有人说使用“处理程序”，有人说使用“计时器”。这是我试图实现的目标：

在首选项中，有一个设置（复选框）可以启用/禁用重复作业。当该复选框被选中时，计时器应该开始工作并且线程应该每 x 秒执行一次。由于未选中复选框，计时器应该停止。

这是我的代码：

检查是否选中了复选框，如果选中'refreshAllServers' void 将被执行，它使用计时器完成工作。

```
boolean CheckboxPreference = prefs.getBoolean("checkboxPref", true);
                if(CheckboxPreference == true) {
                    Main main = new Main();
                    main.refreshAllServers("start");
                } else {
                    Main main = new Main();
                    main.refreshAllServers("stop");
                } 
```

执行计时器工作的 refreshAllServers void：

```
public void refreshAllServers(String start) {

    if(start == "start") {

        // Start the timer which will repeatingly execute the thread

    } else {

        // stop the timer

            } 
```

这是我执行线程的方式：（没有计时器也能很好地工作）

```
Thread myThread = new MyThread(-5);
                myThread.start(); 
```

我试过什么？

我尝试了任何我可以从谷歌（处理程序、计时器）看到的例子，但它们都不起作用，我设法启动了一次计时器，但停止它不起作用。我在研究中看到的最简单易懂的代码是这样的：

```
new java.util.Timer().schedule( 
        new java.util.TimerTask() {
            @Override
            public void run() {
                // your code here
            }
        }, 
        5000 
); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-24T22:10:25.270

只需简单地使用下面的代码片段

```
private final Handler handler = new Handler();
private Runnable runnable = new Runnable() {
    public void run() {
         //
         // Do the stuff
         //

         handler.postDelayed(this, 1000);
    }
};
runnable.run(); 
```

要停止它使用

```
handler.removeCallbacks(runnable); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T21:34:48.597

使用倒数计时器。它的工作方式是它会在计时器的每个滴答声上调用一个方法，并在计时器结束时调用另一个方法。此时您可以根据需要重新启动。另外我认为您可能应该启动 AsyncTask 而不是线程。请不要尝试在 Android 中管理自己的线程。尝试如下。它像时钟一样运行。

```
 CountDownTimer myCountdownTimer =    new CountDownTimer(30000, 1000) {

 public void onTick(long millisUntilFinished) {
     mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     // Kick off your AsyncTask here.
 }

 public void onFinish() {
     mTextField.setText("done!");
     // the 30 seconds is up now so do make any checks you need here.
 }
 }.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:31:58.363

我想使用 AlarmManager [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

如果复选框在调用方法中

```
AlarmManager alarmManager = (AlarmManager)SecureDocApplication.getContext()
    .getSystemService(Context.ALARM_SERVICE);
PendingIntent myService = PendingIntent.getService(context, 0, 
                new Intent(context, MyService.class), 0);

long triggerAtTime = 1000;
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, triggerAtTime, 5000 /* 5 sec*/, 
                myService); 
```

如果复选框关闭取消警报管理器

```
alarmManager.cancel(myService); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T17:51:06.473

感谢大家，我通过使用 Timer 解决了这个问题。

```
timer = new Timer();
timer.scheduleAtFixedRate(
    new java.util.TimerTask() {
        @Override
        public void run() {
            for (int i = 0; i < server_amount; i++) {

                servers[i] = "Updating...";
                handler.sendEmptyMessage(0);
                new MyThread(i).start();
            }
        }
    },
2000, 5000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-19T00:09:31.070

“当需要多个工作线程或需要 ThreadPoolExecutor（此类扩展）的额外灵活性或功能时，[ScheduledThreadPoolExecutor] 类比 Timer 更可取。”

每...

[https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)

它不只是处理程序，但可以选择每隔一段时间运行一次（每次计算完成后会有延迟）。

```
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

...

final int THREAD_POOL_SIZE = 10;
final int START_DELAY = 0;
final int TIME_PERIOD = 5;
final TimeUnit TIME_UNIT = TimeUnit.SECONDS;

ScheduledThreadPoolExecutor pool;

Runnable myPeriodicThread = new Runnable() {
    @Override
    public void run() {
        refreshAllServers();
    }
};

public void startTimer(){

    pool.scheduleAtFixedRate(myPeriodicThread,
            START_DELAY,
            TIME_PERIOD,
            TIME_UNIT);

}

public void stopTimer(){

    pool.shutdownNow();

} 
```

# java - 如何在 Swing 中创建单独的屏幕？

> ID：11639253
> 
> 赞同：0
> 
> 时间：2012-07-24T21:01:52.910
> 
> 标签：java, swing

我不断地发现自己在构建有多个屏幕的程序。例如，考虑一个程序，其中初始布局提供两个按钮：创建文件或编辑文件。单击一个后，它会将用户带到一个支持他们按下的任何按钮的新屏幕。然后他们单击后退按钮，然后将他们带回程序的主屏幕。我想知道如何最好地做这样的单独菜单。最好只创建单独的方法来设置每个屏幕，然后在单击按钮（如“后退”按钮）时调用适当的方法？这就是我想做的事情，但鉴于有很多方法可以做到这一点，我想就改变显示屏幕的可能更好的方法获得意见。谢谢， AJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:32:46.107

根据您对原始问题的第二条评论，我认为最好看看使用面板。

查看为您想要的每个活动使用多个面板：

```
JPanel firstPanel = new JPanel();
JPanel secondPanel = new JPanel();
JPanel thirdPanel = new JPanel(); 
```

确保在初始化时隐藏所有面板，然后在按钮单击事件时简单地将面板交换为另一个面板，使用：

```
firstPanel.hide();
secondPanel.show(); 
```

根据您使用的布局，还有其他技术。例如，如果您使用 BorderLayout，您可以简单地用另一个面板“替换”一个 BorderLayout 区域，然后重新验证，而不是删除和添加（或显示和隐藏多个面板）：

```
container.add(BorderLayout.CENTER, thirdPanel);
container.validate(); 
```

另请注意，不同的操作系统（Windows、Mac 等）将有不同的风格，他们喜欢坚持。例如，您提到了一个典型的 Windows 安装程序；人们开始期望安装程序以某种方式看起来和工作，但在不同的操作系统上，会有完全不同的期望和外观。

进一步阅读：

[使用面板的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

[Java SE 7（JPanel API）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPanel.html)

* * *

**编辑**：

> 我想知道如何最好地做这样的单独菜单。最好只创建单独的方法来设置每个屏幕，然后在单击按钮（如“后退”按钮）时调用适当的方法？

这取决于个人喜好。您是否想在启动时初始化所有内容并在面板之间进行更快的切换（或者您称它们为“屏幕”），或者您是否想要更快的初始启动并在需要时对每个组件进行“延迟加载” .

就我个人而言，我在初始化期间选择了所有内容（除非在您的应用程序启动期间有很多事情要做或加载）。这真的归结为个人喜好。

* * *

另一个**编辑**：说到布局，也许不同的布局风格也会帮助你，像这样：

[卡片布局教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:05:33.373

看看[Actions 框架](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，它是开发通用级别操作以供重用的好方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:33:04.517

如果屏幕状态取决于前一个屏幕的状态（例如在向导中），您可以按照[本文中描述的步骤进行操作](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)

# java - SQLite 是最适合用于嵌入式数据库的东西吗？

> ID：11639256
> 
> 赞同：3
> 
> 时间：2012-07-24T21:02:16.723
> 
> 标签：java, sqlite, h2

我需要构建一个将安装在 Linux 服务器上的 Java 应用程序。

当人们安装时，他们只需要安装这个应用程序，启动它，仅此而已。但是我们有一些数据要保存。

*   我对 MySQL 说不，因为它需要一个服务器。
*   我对 XML 说不，因为真的会有很多数据需要保存和操作。

所以我正在寻找我认为最好的 SQLite。确实（如果我错了，请阻止我），SQLite 不需要任何服务器？（只需安装最终的应用程序，SQLite 在我的应用程序中就可以正常工作了吗？）

然后我在[http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers](http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers)进行了检查，我真的有点困惑。

*   Wrapper 和 Driver 有什么区别？
*   另外，我看到存在“纯 java 实现”：SQLJet 或多或少优化了吗？
*   最后你会在我的情况下使用什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T21:41:55.813

另一个要考虑的数据库是[H2](http://www.h2database.com/html/main.html)。*它是一个完全用 Java 编写的嵌入式数据库引擎，因此您可以享受 Sqlite 所没有*的完整 unicode（16 位）字符支持。其他嵌入式数据库是[HSQLDB](http://hsqldb.org/)和[Derby](http://db.apache.org/derby/)。

> sqlite 不需要对服务器有任何要求吗？

正确的。它不是。H2也不行。

> 只需安装最终应用程序，sqlite 在我的应用程序中工作正常吗？

正确的。只要您在 WAR 中包含 Sqlite 或 H2（或将其解压到您的 jar 中），它就可以正常工作。

> Wrapper 和 Driver 和有什么不一样？

取决于使用情况。我认为 Sqlite 是在谈论这样一个事实，即当您为 Sqlite 使用 JDBC 驱动程序时，它实际上是在驱动程序内部包装了 Sqlite C 本机库。通常，JDBC 驱动程序与远程数据库通信。

H2 也是这种方式，“驱动程序”实际上执行数据库操作，只是它是用 Java 编写的，所以你不需要 C 包装器。

> 另外，我看到存在“纯 java 实现”：SQLJet 或多或少优化了吗？

这是我第一次听说 Sqljet，所以我不确定。Xerial [Sqlite 驱动程序](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)是我使用过的，它的性能似乎不错。

> 最后你会在我的情况下使用什么？

我自己会使用 H2 来实现本机 Java 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:15:43.753

1.  是的 SQLite 不需要服务器。

2.  一个非常简单的开发解决方案是通过将 SQLLite 嵌入到源代码中来使用它，并带有一些存根数据。然后，您可以将数据库作为单个文件提交到您的版本控制系统（即我使用 github，它非常容易做到这一点）。显然，这不是一个好的生产方法，但它是创建单个开发版本的好方法。

3.  Wrapper 是一个程序，它允许您通过不同的接口访问另一个程序的功能。例如，eclipse 为我们在一个方便的 GUI 中“包装”了我们在日常开发中使用的许多 java 程序。而驱动程序是启动现有应用程序所需的程序。例如，在 java 应用程序中，我们可能有一个主类，可以将其视为应用程序入口点的驱动程序。

# iphone - 如何覆盖 UISearchDisplayController 的 searchResultTableView 中的“无结果”文本？

> ID：11639257
> 
> 赞同：5
> 
> 时间：2012-07-24T21:02:26.147
> 
> 标签：iphone, cocoa-touch, uisearchdisplaycontroller

我不想在我的服务器处理搜索查询时显示“无结果”文本。

![在此处输入图像描述](../Images/f517cb37ee398c7516fd766cff880a7c.png)

我找出了包含标签的表格单元格的确切坐标并试图覆盖它。

```
self.noResultsCoverView = [[[UIView alloc] initWithFrame:CGRectMake(
    0.0, 
    44.0, 
    320.0, 
    43.0
)] autorelease];
self.noResultsCoverView.backgroundColor = [UIColor whiteColor];
[self.searchDisplayController.searchResultsTableView addSubview:self.noResultsCoverView]; 
```

令我懊恼的是，我的封面在表格视图上方，但在标签下方。我需要封面在标签上方。`searchResultsTableView::bringSubviewToFront`没用，这让我相信这个标签根本不是 the 的孩子`searchResultsTableView`。

顺便说一句，这个[Stack Overflow 答案](https://stackoverflow.com/a/1507281/1390119)对我来说不太适用。它适用于第一次搜索，但在随后的搜索中会闪烁一个奇怪的黑色封面。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T08:39:10.093

这应该可以正常工作。返回至少一个单元格的代码：

```
BOOL ivarNoResults; // put this somewhere in @interface or at top of @implementation
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        if (filteredList.count == 0) {
            ivarNoResults = YES;
            return 1;
        } else {
            ivarNoResults = NO;
            return [filteredList count];
        }
    }
    // {…}
    // return the unfiltered array count
} 
```

并“显示”干净的单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (tableView == self.searchDisplayController.searchResultsTableView && ivarNoResults) {
        static NSString *cleanCellIdent = @"cleanCell";
        UITableViewCell *ccell = [tableView dequeueReusableCellWithIdentifier:cleanCellIdent];
        if (ccell == nil) {
            ccell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cleanCellIdent] autorelease];
            ccell.userInteractionEnabled = NO;
        }
        return ccell;
    }

    // {…}
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T18:52:05.740

解决此问题的最简单方法是在查询进行时在 numberOfRowsInSection 中返回 1，并将虚拟单元格留空或将其隐藏属性设置为 YES，使其不可见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T05:29:27.587

试试这个它对我有用

在 UISearchDisplayController 委托中这样做：=

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 0.001);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        for (UIView* v in self.searchDisplayController.searchResultsTableView.subviews) {
            if ([v isKindOfClass: [UILabel class]] && 
                [[(UILabel*)v text] isEqualToString:@"No Results"]) {
                [(UILabel*)v setText:@""];
                break;
            }
        }
    });
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T19:53:29.340

您需要意识到，当您拥有`UISearchDisplayController`并且搜索栏处于活动状态时，`UITableView`传递给您的`UITableView`数据源和委托方法的参数实际上不是您的 tableView 对象，而是由 管理的 tableView `UISearchDisplayController`，旨在显示“实时”搜索结果（例如，可能是从您的主数据源过滤的结果）。

您可以在代码中轻松检测到这一点，然后根据请求的 tableView 对象从委托/数据源方法返回适当的结果。

例如：

```
- (NSInteger)tableView:(UITableView *)tv numberOfRowsInSection:(NSInteger)section
{
    if (tv == self.searchDisplayController.searchResultsTableView) {
        // 返回可见搜索结果部分中的行数。
        // 返回一个非零值以抑制“无结果”
    } 别的 {
        // 返回主数据源的节中的行数
    }
}

```

关键是您的数据源和委托方法为**两个**表提供服务，您可以（并且应该）检查哪个表正在请求数据或委托。

顺便说一句，“没有结果”是（我相信）由`UISearchDisplayController`代表说没有行时显示的背景图像提供......你没有看到一个 2 行表，第一个空白和第二个文本“没有结果”。至少，这就是我认为那里正在发生的事情。

# asp.net - 在 asp.net 中使用 $.ajax

> ID：11639259
> 
> 赞同：1
> 
> 时间：2012-07-24T21:02:28.360
> 
> 标签：asp.net, jquery, asp.net-ajax

我将在没有任何更新面板的情况下将 ajax 用于我的 Web 表单应用程序。所以我注意到我可以为此目的使用jquery ajax。所以有一个带有下拉框的表单，里面有一些ID。当我从下拉列表中选择 ID 时，我想暂时显示我的 ajax 加载程序，然后我想显示结果。结果将显示在一些标签控件中。所以这是我的 Default.aspx 页面：

```
<div style="text-align: center; width: 500px; margin: 0 auto 0 auto;">
    <asp:DropDownList ID="idDropDownBox" runat="server" >
    </asp:DropDownList>
    <span>Pick ID </span>
    <br />
    <img alt="" id="loader" src="ajax-loader.gif" />
    <table>
        <tr>
            <td>
                <asp:Label ID="lblName"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
            </td>
            <td  style="font: 11px tahoma;">
                 Name
            </td>
        </tr>
        <tr>
            <td>
                <asp:Label ID="lblFamily"   ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
            </td>
            <td style="font: 11px tahoma;">
                Family
            </td>
        </tr>
        <tr>
            <td>
                <asp:Label ID="lblPhone"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
            </td>
            <td style="font: 11px tahoma;">
               Phone
            </td>
        </tr>
        <tr>
            <td>
                <asp:Label ID="lblEmail"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
            </td>
            <td style="font: 11px tahoma;">
                Email
            </td>
        </tr>
        <tr>
            <td>
                <asp:Label ID="lblAddress"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
            </td>
            <td style="font: 11px tahoma;">
                Address
            </td>
        </tr>
    </table>
</div> 
```

所以我决定创建另一个页面“GetCustomer.aspx”，它通过查询字符串获取 ID，然后从数据库中选择所有信息并将它们保存在会话中。这是 GetCustomer.aspx 背后的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        AppDomain.CurrentDomain.SetData("SQLServerCompactEditionUnderWebHosting", true);
        if (Request.QueryString.Keys.Count > 0)
        {
            string id = Request.QueryString[0];
            CustomersDBEntities db = new CustomersDBEntities();
            IQueryable<tblCustomer> allInfo = (from x in db.tblCustomers
                                               where x.ID == int.Parse(id)
                                               select x);
            Session["Name"] = allInfo.ElementAt(1).ToString();
            Session["Family"] = allInfo.ElementAt(2).ToString();
            Session["Phone"] = allInfo.ElementAt(3).ToString();
            Session["Email"] = allInfo.ElementAt(4).ToString();
            Session["Address"] = allInfo.ElementAt(5).ToString();
        }

    } 
```

最后我开始写一个像下面这样的javascript脚本，但是成功了！我该怎么办？

```
$(document).ready(function(){
    $('idDropDownBox').change(function(){
        $.ajax({
            type:"POST",
            contentType:"application/json; charset=UTF-8",
            data:"{CID:'"+ $('idDropDownBox').val() + "'}",
            url:'Default.aspx/GetCustomer",
            dataType:"json",
            success:function(data){
                //what should i do here
            }
        });
    });
}); 
```

感谢您的回复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:56:10.920

如果我的理解是正确的，您想使用 ASP.Net 页面的输出作为 AJAX 调用的源。

虽然这不是使用 ASP.Net 的传统方式，但您仍然可以做到

这是一个简单的例子：

## 输出

![在此处输入图像描述](../Images/f1ecbee30f1f101d36c3ba596262bb5e.png) ![在此处输入图像描述](../Images/7edccffb61b2fdb77f6187acdd4e6361.png)

## ASPX - 目标（空，删除所有 html 标记）

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Empty.aspx.cs" Inherits="WebApplication1.Empty" %> 
```

## ASPX - 背后的目标代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.Response.ContentType = "application/json";

        var id = this.Request.QueryString["id"];
        // simulate your query using the id property
        var q = Enumerable.Range(1, 10);

        // set the following values using your real objects
        var f = new
        {
            Name = "your name " + id,
            Fam = "your family " + id,
            Phone = "your phone " + id,
            Email = "your email " + id,
            Address = "your address" + id
        };

        this.Response.Write(JsonConvert.SerializeObject(f));
    } 
```

## ASPX - 来电者

**请注意**，此示例中显示的表格正是您的代码，我只是复制了

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    function getData(id) {
        $.ajax({
            type: "GET",
            url: '<%: this.ResolveClientUrl("~/Empty.aspx") %>',
            dataType: "json",
            data: 'id=' + id,
            contentType: "application/json; charset=utf-8;",
            success: function (msg) {
                $("#<%: this.lblName.ClientID %>").text(msg.Name);
                $("#<%: this.lblFamily.ClientID %>").text(msg.Fam);
                $("#<%: this.lblPhone.ClientID %>").text(msg.Phone);
                $("#<%: this.lblEmail.ClientID %>").text(msg.Email);
                $("#<%: this.lblAddress.ClientID %>").text(msg.Address);
            }
        });
    }
    $(function () {
        $("#<%: this.ddl.ClientID %>").change(function () {
            getData($(this).val());
        });
    });
</script>

    <asp:DropDownList runat="server" ID="ddl">
        <asp:ListItem Text="1" Value="1" />
        <asp:ListItem Text="2" Value="2" />
    </asp:DropDownList>
<table>
    <tr>
        <td>
            <asp:Label ID="lblName"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
        </td>
        <td  style="font: 11px tahoma;">
             Name
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblFamily"   ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
        </td>
        <td style="font: 11px tahoma;">
            Family
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblPhone"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
        </td>
        <td style="font: 11px tahoma;">
           Phone
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblEmail"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
        </td>
        <td style="font: 11px tahoma;">
            Email
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblAddress"  ClientIDMode="Static" runat="server" Font-Names="Tahoma" Text=""></asp:Label>
        </td>
        <td style="font: 11px tahoma;">
            Address
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:13:34.207

让您的 GetCustomer 返回您需要显示并成功的 html 部分： $.ajax 的处理程序添加将该 html 附加到所需容器的代码，例如 $('#someContainer').append(data);

# android - android 应用程序无法在三星 gt -s5830 上运行

> ID：11639267
> 
> 赞同：0
> 
> 时间：2012-07-24T21:03:01.683
> 
> 标签：android, samsung-mobile

我的应用程序的构建目标是 Google API 2.2，它确实在 eclipse 模拟器上完美运行，但是当我从设备运行它时（带有 android 2.3.5 的三星 gt s5830），当应用程序发出 http 请求时，我得到“强制关闭”（ apache-mysql-php)，返回的 json 数组为空。E/Buffer 错误（1677）：转换结果时出错 java.lang.NullPointerException E/JSON Parser（1677）：解析数据时出错 org.json.JSONException：E/AndroidRuntime（1677）的字符 0 处输入结束：致命异常：主要的

如果您有任何想法，请帮助..（与任何设备设置有关吗？我有“Usb调试”，“gps”，“数据同步”，“互联网连接”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:14:00.020

它强制关闭，因为您只是假设您返回的 json 是好的，而事实并非如此。这就是为什么它给你一个解析器异常。您需要添加更好的错误处理，因为您不能指望移动设备与网络保持一致的连接。

也就是说，我们需要更多信息来帮助您找出您的 json 无效的原因。您要从哪个网址提取数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:15:04.330

Beyond any other causal problem resulting in a null response from your php output, you have failed to reliably test the output before pushing it through the JSONParser.

Make sure that you validate your return data before trying to pass it.

This could be as simple as:

```
if(myJsonData!=null)
{
   //parse the json
}
else
{
   //do something useful here
} 
```

You should be catching any exceptions in your download code that provide you more information.

You can do this using try/catch blocks.

Also learn about how to use logcat with your device to debug the code and find out what the cause is. Any other method is guesswork.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:07:09.840

您是否在清单中为 Android.Hardware.Wifi设置了[使用功能？](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

# ipad - 如何在 iPad 上调试或检查 Phonegap 应用程序的控制台？

> ID：11639268
> 
> 赞同：0
> 
> 时间：2012-07-24T21:03:01.887
> 
> 标签：ipad, cordova

我有一个奇怪的问题。我开发了一个Phonegap 应用程序。我可以在 Mac 上的 iOS 模拟器上很好地运行它。如果我使用 Xcode 的“在 iOS 设备上运行”模式在 iPad 上运行它，它运行良好。但是，当我生成一个用于部署的 .ipa 文件并将其安装在 iPad 上时，它出现了一些问题。它运行，但看起来它在某处遇到错误。

所以我的问题是；有什么办法可以尝试查看控制台消息，以便我可以看到问题出在哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:54:15.870

在您的设备的管理器中打开控制台以查找任何记录的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T14:58:47.913

我总是使用 Safari 控制台调试我的 Phonegap iOS 应用程序[（示例）](http://phonegap-tips.com/articles/debugging-ios-phonegap-apps-with-safaris-web-inspector.html)

使用 Safari 检查器，您可以编辑 CSS、调试 Javascript 并查看日志。

# c# - 为什么 Task.Factory.FromAsync 阻塞 UI 线程？

> ID：11639270
> 
> 赞同：1
> 
> 时间：2012-07-24T21:03:03.823
> 
> 标签：c#, c#-4.0, task-parallel-library

我有一个带有 WCF 代理的示例 WinForms 应用程序。我正在使用 FromAsync 返回一个 Task 并在返回结果之前等待任务完成：

```
private bool Foo() {   
  var proxy = new MyProxy();   
  var request = new ProxyRequest();

  var task = Task<ReturnType>.Factory.FromAsync<ProxyRequest>(client.BeginCall, client.EndCall, request, null);   
  task.Wait();   
  return true; 
} 
```

从按钮调用此方法时，单击表单，UI 线程被阻塞。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:04:34.303

因为在调用`task.Wait()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:05:02.460

因为你在打电话`task.Wait()`。它在调用线程上同步等待任务完成。

# cakephp - CakePHP 可包含的订单条件不起作用

> ID：11639279
> 
> 赞同：2
> 
> 时间：2012-07-24T21:03:29.620
> 
> 标签：cakephp, containable

我遇到了一个非常简单的订购查询的问题。我有一个`Post`模型和一个`Tag`具有 HABTM 关系的模型，并且正在尝试返回所有帖子的列表，这些帖子具有分配给它们的特定标签，按帖子创建日期排序。

```
$this->set('data', $this->Post->Tag->find('all', array(
    'conditions' => array('Tag.id' => 1),
    'contain' => array('Post' => array(
        'order' => 'Post.created_date desc'
    ))
))); 
```

虽然这会返回帖子列表，但它不是按日期排序的。

启用调试后，似乎正在使用以下查询：

```
SELECT `Post`.`id`, `Post`.`title`, `Post`.`created_date`, `PostsTag`.`post_id`, `PostsTag`.`tag_id`
FROM `database`.`posts` AS `Post`
JOIN `database`.`posts_tags` AS `PostsTag` ON (`PotsTag`.`tag_id` = 1 AND `PostsTag`.`post_id` = `Post`.`id`) 
```

帖子模型的代码：

```
class Post extends AppModel {
    public $name = 'Post';
    public $hasAndBelongsToMany = array('Tag');
} 
```

标签模型的代码：

```
class Tag extends AppModel {
    public $name = 'Tag';
    public $hasAndBelongsToMany = array('Post');
} 
```

对此问题的任何帮助将不胜感激 - 我使用的是 CakePHP 2.1。如果它有什么不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:19:00.473

在标签模型中定义 order 属性怎么样？
像例如

```
var $hasAndBelongsToMany = array(
    'Post' => array(
        'order' => 'Post.created_date'
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:09:39.373

我认为“订单”不应该在“包含”之内。尝试：

```
$this->set('data', $this->Post->Tag->find('all', array(
    'conditions' => array('Tag.id' => 1),
    'contain' => array('Post'),
    'order' => 'Post.created_date desc'
))); 
```

要不就：

```
 $this->set('data', $this->Post->Tag->find('all', array(
        'conditions' => array('Tag.id' => 1),
        'order' => 'Post.created_date desc'
 ))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:59:40.943

读这个：-

[http://www.jamesfairhurst.co.uk/posts/view/adding_tags_to_a_cakephp_app_hasAndBelongsToMany/](http://www.jamesfairhurst.co.uk/posts/view/adding_tags_to_a_cakephp_app_hasAndBelongsToMany/)

[http://edivad.wordpress.com/2007/04/19/cakephp-hasandbelongstomany-habtm/](http://edivad.wordpress.com/2007/04/19/cakephp-hasandbelongstomany-habtm/)

//尝试这个

```
CREATE TABLE `tags` (
  `id` int(11) NOT NULL auto_increment,
  `tag` varchar(100) NOT NULL,
  `created` datetime NOT NULL,
  `modified` datetime NOT NULL,
  PRIMARY KEY  (`id`)
);

CREATE TABLE `posts_tags` (
  `post_id` int(11) NOT NULL,
  `tag_id` int(11) NOT NULL
);

//Creating the Models and Relationships

class Tag extends AppModel {
    var $name = 'Tag';
    var $hasAndBelongsToMany = array('Post'=>array('className'=>'Post'));
}

class Post extends AppModel {
    var $name = 'Post';
    var $hasMany = array('Comment'=>array('className'=>'Comment'));
    var $hasAndBelongsToMany = array('Tag'=>array('className'=>'Tag'));
} 
```

# ruby - 为什么使用 LibXML Ruby 时会有空白节点/属性？

> ID：11639281
> 
> 赞同：0
> 
> 时间：2012-07-24T21:03:40.530
> 
> 标签：ruby, libxml2

使用 Gem libxml-ruby，当我们像这样解析 XML 时：

```
document = LibXML::XML::Parser.string( xmlData ).parse
for n in document.root.children
  # Do something
end 
```

我们实际得到的是这样的：

```
root
-node empty
-node with data
-node empty 
```

与属性相同，在我们真正关心的属性之间有一个空白填充。我们最终需要使用的是`:options => LibXML::XML::Parser::Options::NOBLANKS`

为什么？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:03:05.267

（不一定是答案，但需要格式化。）

XML 是什么样的？

这个 XML：

```
<baz>
  <plugh>ohai</plugh>
</baz> 
```

可能包含 CR/LF 的空白文本节点`<baz>`和`<plugh>`开始标签之间的缩进，以及结束标签之间的缩进。根据 XML 的性质，这可能是也可能不是重要的空白。在结构上，它不同于：

```
<baz><plugh>ohai</plugh></baz> 
```

# javascript - HTML/JS - 提交按钮/图像必须像普通链接一样打开

> ID：11639283
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:04:18.813
> 
> 标签：javascript, html, forms, submit

您的鼠标上有 3 个主要按钮。LMB、MMB 和人民币。如果您在任何网站的图像/超链接上单击鼠标中键，它将在后台打开新窗口。

我希望同样的事情能够工作，但在提交表单上。我明白了 - 这些价值观在我的网站正文中。

那么如何在新的后台选项卡中打开 ACTION 网站呢？

我尝试将提交更改为输入类型 =“图像”，但它是相同的。也许一些JS会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:12:45.097

将此添加到您的提交按钮：`onmousedown="mouseButton(event);"`

```
 function mouseButton(e)
    {
       if(e.button == 1 || e.button == 4)
       {
          var formName = document.getElementById('formID');
          formName.onsubmit = function() {
          window.open("http://localhost/go.php?mode=1")  

          };
       }
    }

echo '<form id="formId" action="http://localhost/go.php?mode=1" method="post">';
echo '<input type="hidden" name="val1" value="dr">';
echo '<input type="hidden" name="val2" value="'.$kordyarray[0].'">';
echo '<input type="hidden" name="val3" value="'.$kordy2.'">';
echo '<input type="submit" name="submit" value="'.$kordyarray[0].':'.$kordyarray[1].'" onmousedown="mouseButton(event)" >';
echo '</form>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:26:36.387

[在此处](https://developer.mozilla.org/En/DOM/Event.button)查看用于确定按下哪个鼠标按钮的 JavaScript。在提交按钮的 html 中，您将拥有类似`onmousedown="whichButton(event)"`.

# javascript - 使用 jquery/js 循环时检测跨度？

> ID：11639284
> 
> 赞同：1
> 
> 时间：2012-07-24T21:04:26.260
> 
> 标签：javascript, jquery

我想在循环遍历 div 元素时检测 span 元素，即

```
<div class="example">
    These are some <span id ="special" class="anime">special</span> words 
   that should be faded in one after the other.
</div> 
```

使用javascript我拆分单词并将它们一一淡入即

JS：

```
 function doSomething(spanID) {
     alert(spanID);
     }

 var $el = $(".example:first"), text = $.trim($el.text()),
        words = text.split(" "), html = "";

    for (var i = 0; i < words.length; i++) {
        html += "<span>" + words[i] + ((i+1) === words.length ? "" : " ") + "</span>";
    };
    $el.html(html).children().hide().each(function(i){
      // if special span is detected
      // get the span id pass it to doSomething function 
      $(this).delay(i*200).fadeIn(700);
    });
    $el.find("span").promise().done(function(){
        $el.text(function(i, text){
           return $.trim(text);
        });            
    }); 
```

> 工作示例在这里：http: [//jsfiddle.net/6czap/5/](http://jsfiddle.net/6czap/5/)

一切正常，只是我需要检测任何特殊的跨度，以便我可以对它们做一些事情，然后 for 循环应该继续做它 deos 的事情。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:37:54.367

尝试以下操作：

```
var orig = $(".example:first").html()
$el.html(html).children().hide().each(function(i){
  $(this).delay(i*200).fadeIn(700);
}).promise().done(function(){
   $('.example:first').html(orig);
}); 
```

[演示！](http://jsfiddle.net/6czap/6/)

# php - imagettftext 中的欧元 (€)

> ID：11639286
> 
> 赞同：2
> 
> 时间：2012-07-24T21:04:31.357
> 
> 标签：php, imagettftext

我怎样才能创建一个€标志`imagettftext()`？我正在使用包含欧元符号的字体“Lucida Grande”。 `&euro;`也不行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:07:23.280

请参阅[文档](http://php.net/manual/en/function.imagettftext.php)（强调我的）：

> UTF-8 编码的文本字符串。
> 
> **可能包括十进制数字字符引用（形式：） `&#8364;`以访问位置 127 以外的字体中的字符**。支持十六进制格式（如`&#xA9;`）。UTF-8 编码的字符串可以直接传递。
> 
> **`&copy;`不支持命名实体，例如**。考虑使用 html_entity_decode() 将这些命名实体解码为 UTF-8 字符串（html_entity_decode() 自 PHP 5.0.0 起支持此功能）。
> 
> 如果字符串中使用了字体不支持的字符，则空心矩形将替换该字符。

您可以尝试使用实际的 € 字符，或对其进行解码，或使用十进制字符引用。请参阅此处以获取 FileFormat.Info Unicode Lookup 中的条目，其中包含所有代码格式：[http](http://www.fileformat.info/info/unicode/char/20ac/index.htm) ://www.fileformat.info/info/unicode/char/20ac/index.htm 。在这种情况下，它会是`&#8364;`。

# php - 我可以将 HTML 标记中包含的文本显示为常规页面内容吗？

> ID：11639287
> 
> 赞同：0
> 
> 时间：2012-07-24T21:04:32.343
> 
> 标签：php, html

我有一个用于构建电子邮件的 PHP 应用程序。发送电子邮件时，它是一个包含 HTML 部分和纯文本部分的多部分表单。

为了创建纯文本部分，我对 HTML 版本的内容使用 PHP strip_tags 函数，并显示结果。工作得很好。

我现在有一种情况，我想在 HTML 部分说一些我不想在纯文本部分说的话。（这是与 QR 码的嵌入图像相关的说明 - 并且 QR 码不会显示在电子邮件的纯文本版本中。）

我当时的想法是——如果我能以某种方式将指令嵌入到 HTML 标记中，那么 strip_tags 函数会将其删除。

但是，除了 INPUT 或 SUBMIT 标记中的 VALUE 字符串之外，我找不到任何包含显示文本的 HTML 标记，而且我认为创建输入字段不会起作用 - 不止一行文本.

我意识到，根据定义，HTML 应该是一种“标记语言”，因此独立于页面上的内容。所以我要求做一些它确实不是为了做的事情，但我想我会把它放在那里看看是否有人碰巧有办法做到这一点，或者知道它绝对不能做到。

谢谢............！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:08:26.513

为什么不构建您的 HTML 内容，然后从中生成纯文本版本，然后在完成之后将 HTML 特定内容添加到 HTML 内容字符串中？

另一种选择是在纯 HTML 内容周围放置一些 HTML 注释，您可以在转换为纯文本之前轻松地使用这些注释去除该部分。

# javascript - 如何模糊 div 后面的内容？

> ID：11639290
> 
> 赞同：1
> 
> 时间：2012-07-24T21:04:41.230
> 
> 标签：javascript, jquery, html, css, svg

> **可能重复：**
> [使用 CSS 模糊 HTML 中的 Img 和 Div](https://stackoverflow.com/questions/8514954/blur-imgs-divs-in-html-using-css)

所以基本上我想要做的是模糊内容女巫在一个`div`元素后面，即`div`不透明度为 0 - 0.5。

这是一个[jsFiddle](http://jsfiddle.net/8KqB8/9/)

**编辑[1]：**我真正想要的是 a`div`越过图像并且下面的区域`div`是模糊的。 **编辑[2]：** `div` with`position: absolute`遍历其他元素并模糊它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:36:13.993

[跟进@Keith Nicholas 在评论中引用的Purmou](https://stackoverflow.com/a/8515050/1494505)的回答，您可以执行以下操作：

```
topblur{
    position: absolute;
    top:2px;
    left:2px;
    width: 100%;
    height: 150px;
    background-image:url(http://www.stefanides.com/home/yard/back%20yard.jpg);
    opacity: 40;
    filter:alpha(opacity=40); 
    border: thin solid black;
} 
```

不是一个很好的解决方案，但它确实把图像弄乱了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:41:30.177

您应该在上传时模糊图像。然后在上传时裁剪其他图像（或使用 jQuery/css 裁剪）。然后结合你必须达到这个效果的东西。

使用 css 来完成这项任务是不可能的。使用 javascript 来完成这项任务是个坏主意（非常慢）。

唯一的选择是在背景图像上使用[这种](http://tympanus.net/Tutorials/ItemBlur/)技术，然后在其上放置另一个（用 js/upload 裁剪）。

# python - pyqt 和 qt 设计器的最小示例 qtreeview

> ID：11639293
> 
> 赞同：3
> 
> 时间：2012-07-24T21:05:16.210
> 
> 标签：python, pyqt, designer, qtreeview

我正在尝试为由 qt 设计师设计的应用程序提供一个最小示例，该应用程序使用 pyqt 涉及 QTreeView 工作

1）我可以通过这种方式启动应用程序，但是如果我按下按钮，TreeView 小部件中不会显示任何条目，我没有收到任何错误消息，并且布局看起来很好，是否有某种更新方法？

如果您回答，请具体说明，因为我仍然是 qt 的初学者，并且大部分文档都是用 c++ 示例编写的，而且我只有一些基本的 c 和 python 经验

```
from PyQt4 import uic, QtGui, QtCore

(Ui_MainWindow, QMainWindow) = uic.loadUiType('main_window.ui')

class MainWindow(QtGui.QMainWindow):

    def __init__(self, parent=None):
        super().__init__(parent)
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)
        self.model = QtGui.QStandardItemModel()
        self.connect(self.ui.pushButton_NeuesMoebel, QtCore.SIGNAL('clicked()'), self.add_item)

    def add_item(self):
        t = self.ui.lineEdit_Moebel.text()
        if len(t) > 0: 
            item = QtGui.QStandardItem(t)
            self.model.appendRow(item)
            self.ui.lineEdit_Moebel.clear()
        else:
            self.ui.statusBar.showMessage('error: no text in Moebel')

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    w = MainWindow()
    w.show()
    sys.exit(app.exec_()) 
```

2）另外，有没有比这更直接使用 *.ui 文件的方法，直接将该文件的 MainWindow 子类化？ui的东西看起来有点乱

3) 例如，在由 *.ui 文件创建的窗口的子类中使用 add_item 方法会更好，我们是否应该使用将 *.ui 文件转换为 *.py 文件的中间步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:44:56.627

您只是忘记在 QTreeView 上设置模型。现在树视图没有模型，所以它永远不会看到数据更新：

```
def __init__(self, parent=None):
    ....
    self.ui.treeView.setModel(self.model) 
```

另外作为一个建议，节省一些输入并使用更pythonic的新型信号/插槽连接，并且不会让您输入签名：

```
self.ui.pushButton_NeuesMoebel.clicked.connect(self.add_item) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T00:57:15.870

我刚刚遇到了这个问题，我很高兴我做到了。这让我开始考虑使用我一直忽略的 uic 模块。在我使用 pyqt 的这些年里，我总是从设计器 .ui 文件生成一个 .py 文件，然后将生成的文件作为模块导入。

使用 uic 来直接加载 .ui 文件可以节省一个步骤并大大简化事情。这很容易做到。

所以是的，在回答问题 #2 时，有一种比调用 ui 更简单的方法：

```
from PyQt4 import uic, QtGui, QtCore

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self,parent)
        uic.loadUi('main_window.ui',self)
.... 
```

# c++ - Qt：窗口大小的执行方法？

> ID：11639296
> 
> 赞同：0
> 
> 时间：2012-07-24T21:05:27.890
> 
> 标签：c++, qt, user-interface, qtgui

尝试设置固定窗口大小时，为什么以下代码不起作用：

```
window->setSizeIncrement(1024,600);
window->setSizePolicy(QSizePolicy::Fixed,QSizePolicy::Fixed); 
```

但是这段代码确实：

```
window->setMaximumHeight(600);
window->setMinimumHeight(600);
window->setMaximumWidth(1024);
window->setMinimumWidth(1024); 
```

我实现了我想要的，一个固定宽度和高度的窗口。没有我想象的那么有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:08:10.010

您可以简单地使用[`setFixedSize(const QSize & s)`](http://qt-project.org/doc/qt-4.8/qwidget.html#setFixedSize)来实现相同的目的。

至于, 如[文档](http://qt-project.org/doc/qt-4.8/qwidget.html#sizeIncrement-prop)`setsizeIncrement()`中所讨论的，它仅设置窗口大小的增量步长。此外，根据您的平台，以下内容可能很重要：

> 警告：大小增量在 Windows 下无效，X11 上的窗口管理器可能会忽略。

# html - 在 {% include %} 标签 Django 中将变量分配给子模板

> ID：11639306
> 
> 赞同：98
> 
> 时间：2012-07-24T21:06:13.450
> 
> 标签：html, django, variables, include, django-templates

我有这个代码（它没有给我预期的结果）

```
#subject_content.html
{% block main-menu %}
    {% include "subject_base.html" %}
{% endblock %}

#subject_base.html
....
....
    <div id="homework" class="tab-section">
        <h2>Homework</h2>
            {% include "subject_file_upload.html" %}
    </div> 
```

子模板：

```
#subject_file_upload.html
    <form action="." method="post" enctype="multipart/form-data">{% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="submit">
    </form> 
```

和我的看法

```
#views.py
@login_required
def subject(request,username, subject):
    if request.method == "POST":
        form = CarsForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("/")
    form = CarsForm()
    return render_to_response('subject_content.html', {'form':form}, context_instance=RequestContext(request)) 
```

上面的代码以我想要的方式创建 HTML，但是表单不会更新数据库。

但，

如果我跳过中间模板并直接进入上传表单，它可以正常工作：

```
#subject_content.html
{% block main-menu %}
    {% include "subject_file_upload.html" %}
{% endblock %} 
```

请帮助我使其与中间模板一起使用。我想这样做，因为我不想多次输入相同的代码。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-07-24T21:36:13.557

就像@Besnik 建议的那样，这很简单：

```
{% include "subject_file_upload.html" with form=form foo=bar %} 
```

的[文档`include`](https://docs.djangoproject.com/en/stable/ref/templates/builtins/#include)提到了这一点。它还提到您可以使用`only`仅使用给定变量呈现模板，而无需继承任何其他变量。

谢谢@Besnik

# facebook - 将应用程序添加到 Facebook 粉丝页面错误

> ID：11639307
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:06:15.273
> 
> 标签：facebook

我正在尝试将应用程序添加到我的 facebook 粉丝页面帐户以进行 oAuth 登录。

我不想要一个标签，所以我认为可能有效的方法是，`method: 'apprequests'`
但我一直收到一个错误：
`An error occurred with Prayerfish Login. Please try again later.`

关于如何将应用程序转移到我的粉丝页面的任何建议？

**注意****这个html页面来自[facebooks教程](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:fb="https://www.facebook.com/2008/fbml">
    <head>
        <title>My Add to Page Dialog Page</title>
    </head>
    <body>
        <div id='fb-root'></div>
        <script src='http://connect.facebook.net/en_US/all.js'></script>
        <p><a onclick='addToPage(); return false;'>Add to Page</a></p>
        <p id='msg'></p>

        <script> 
            FB.init({appId: "****************", status: true, cookie: true});

            function addToPage() {

                // calling the API ...
                var obj = {
                    //method: 'pagetab',
                    method: 'apprequests',
                    redirect_uri: 'https://www.myDomain.com',
                };

                FB.ui(obj);
            }

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:42:13.827

在 Facebook 页面上拥有应用程序的唯一方法是将其添加为“标签”。自从切换到时间轴后，标签就有点用词不当了，因为它只是页面顶部的书签更正确（例如，在[Spotify 的页面](https://www.facebook.com/Spotify?ref=ts)上，“获取 Spotify”、“粉丝播放列表”和“夏季页面顶部的声音缩略图在技术上是“页面标签”）。

如果您仍想将应用程序作为“选项卡”添加到您的页面，那么您上面包含的代码实际上比您需要的更复杂。例如，如果您想允许*其他*Facebook 页面的管理员安装您的应用程序，那么您将在您的网站上包含该代码。因为您拥有页面和应用程序，所以您只需修改此链接以包含您的应用程序 ID 和 URL，然后单击它：

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&display=popup&next=YOUR_APP_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&display=popup&next=YOUR_APP_URL)

当您这样做时，您会看到一个对话框，要求您选择要将应用程序添加到哪个页面，选择它就完成了。

如果您已经知道 Page Tab 是什么并且不想要它，我的问题是 - 您希望应用程序如何显示？

# android - 从网络异步加载数百个小图像的最佳技术

> ID：11639315
> 
> 赞同：3
> 
> 时间：2012-07-24T21:06:45.443
> 
> 标签：android, multithreading

目前我有一个使用线程的工作解决方案（一个新线程被实例化并为每个图像运行），但我到处都读到线程很昂贵并且更好地使用 Android 中的其他解决方案。但不太确定什么更适合这种情况（AsynchTask、线程池或......？）。网格是可滚动的，如果我快速滚动，我将同时实例化数百个线程......

有帮助的一件事是缓存图像，因此线程只是第一次创建并运行。但无论如何，我想优化这个第一次加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:18:08.993

那里有很多开源项目，但是做所有这些事情：异步加载图像并缓存它们等。一些这样的项目是：[https](https://github.com/thest1/LazyList) ://github.com/thest1/LazyList和[https://github.com /nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:19:09.000

我认为一个额外的线程应该就足够了..我可能错了，但是您将拥有处理 UI 渲染等的 UI 线程，然后是用于加载图像（或线程）的 AsyncTask。在那里，您可以实例化尽可能多的并行下载，并且在每个加载后，您可以向 UI 线程发送一条消息更新 GridList..

实际上，当您将使用其他一些库进行 HTTP 连接时，它会为每个下载实例化额外的线程（或异步任务）。

我一直在使用[这个](http://loopj.com/android-async-http/)，它完美无缺。

# c# - Console.WriteLine 和内存泄漏

> ID：11639316
> 
> 赞同：4
> 
> 时间：2012-07-24T21:06:47.593
> 
> 标签：c#, memory-leaks, console, console.writeline

我正在尝试减少我拥有的控制台应用程序的内存使用量。它应该连续运行几个小时，但似乎内存使用量每秒都在逐渐增加。它确实使用了多个线程，并且做了很多事情，但我在某处读到，对 Console.WriteLine 进行大量调用也会导致内存峰值。

因为应用程序一直在向控制台写入数据，所以我认为内存使用量可能是因为这个。不幸的是，我无法轻松清除控制台，因为我将输出重定向到监视窗口。我暂时关闭了它，但内存仍在增加，这告诉我还有其他事情需要解决。

在我开始寻找内存泄漏之前，我想知道是否有人可以确认/验证拥有数千个 Console.WriteLine 是否会导致内存泄漏，或者重定向输出缓冲区是否已经正确处理了这种情况。我试图进行搜索，但没有找到太多关于此的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:50:15.757

有数千次调用`Console.WriteLine`不会导致内存泄漏。我有一个长时间运行的程序（现在已经运行了 6 个月），它每分钟向控制台写入几百行，并且它的内存使用量保持不变。

一次不频繁地写入数千行*可能*会由于临时字符串而导致内存峰值，但这些将在下次运行 GC 时收集。但是稳定的负载`Console.WriteLine`只会导致未收集的字符串的稳定内存负载。它不会一直增加。

# c# - .aspx 文件中的可选参数

> ID：11639317
> 
> 赞同：1
> 
> 时间：2012-07-24T21:06:52.697
> 
> 标签：c#, asp.net, optional-parameters

我有一个静态方法（在命名空间 Common 中的 CommonHelper 类中），我想使用它来包含具有如下定义的静态资源：

```
public static string GetUrlForStaticResource(
String fileName, String folder="scripts", bool preventCaching=false) 
```

您可以看到“folder”和“preventCaching”参数是可选的，因为它们具有默认值。当我从 .cs 文件调用该方法时，它工作正常，但在我的 .aspx 中，我尝试了以下操作并收到错误**CS1501: No overload for method 'GetUrlForStaticResource' requires '1' arguments**：

```
<div>Example: <%= Common.CommonHelper.GetUrlForStaticResource("test.js") %></div> 
```

如果我提供所有参数，它可以正常工作：

```
<div>Example: <%= Common.CommonHelper.GetUrlForStaticResource("test.js", "scripts", false) %>
</div> 
```

我究竟做错了什么？.aspx 中没有可选参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:19:11.983

我对此进行了测试，对我来说效果很好。我使用 .NET 4.0 和 CommonHelper 作为静态类（没有显式构造函数）。

然后我将 Web 项目更改为 .NET 2.0。项目构建，然后我得到您在运行时报告的相同错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T23:46:35.137

当然，您也可以为 GetUrlForStaticResource 创建一个只接受一个参数的重载，然后使用默认值从那里调用主要方法。

# javascript - 在函数中创建后未定义 Javascript 对象

> ID：11639319
> 
> 赞同：0
> 
> 时间：2012-07-24T21:07:13.243
> 
> 标签：javascript, function, object

我似乎无法从函数返回对象，函数内部的 console.log 可以很好地打印出属性值，但是一旦在函数之外我得到“未捕获的 ReferenceError：firstOn 未定义”

任何帮助将不胜感激，谢谢！

```
myElement = document.getElementById("testButton");

function Server(name,tables,startTime) {
    this.name = name;
    this.tables = tables;
    this.startTime = startTime;
}

document.forms.server1.button.onclick = function() {
    var name = document.forms.server1.servername.value;
    var tables = document.forms.server1.servertables.value;
    var startTime = document.forms.server1.servertime.value;

    var firstOn = new Server(name,tables,startTime);

    document.forms.server1.button.innerHTML = "Saved!";

    console.log(firstOn.name);
    console.log(firstOn.tables);
    console.log(firstOn.startTime);

    return firstOn;

};

myElement.onclick = function() {
    console.log(firstOn.name);
    console.log(firstOn.tables);
    console.log(firstOn.startTime);

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:10:15.047

该 firstOn 对象是在本地函数范围内创建的。它不会在第二个函数中全局可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:14:38.997

I think this is the appropriate solution to my problem.

```
myElement = document.getElementById("testButton");

function Server(name,tables,startTime) {
    this.name = name;
    this.tables = tables;
    this.startTime = startTime;
}

var firstOn = new Server();

document.forms.server1.button.onclick = function() {
    firstOn.name = document.forms.server1.servername.value;
    firstOn.tables = document.forms.server1.servertables.value;
    firstOn.startTime = document.forms.server1.servertime.value;

    document.forms.server1.button.innerHTML = "Saved!";

    console.log(firstOn.name);
    console.log(firstOn.tables);
    console.log(firstOn.startTime);

    return firstOn;

};

myElement.onclick = function() {
   console.log(firstOn.name);
   console.log(firstOn.tables);
   console.log(firstOn.startTime);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:15:02.507

`firstOn` is an object that was created and returned from the `document.forms.server1.button.onclick` event handler. The return value from that event handler went into the system (that's where event handlers return to) and was never stored anywhere so it was cleaned up by the system with garbage collection.

Meanwhile, your `myElement.onclick` event handler does NOT have access to the `firstOn` object because it wasn't saved anywhere that `myElement.onclick` can reach.

If you want `firstOn` to be usable after the `document.forms.server1.button.onclick` event handler, you have to save it somewhere that the second click handler can each. That could be in a global variable or it could be a property of some other object that is globally accessible. As your code is written right now, the `firstOn` object is created, but never stored anywhere so it is happily cleaned up by the garbage collector and is not reachable by other code.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:30:33.513

```
var firstOn = new winMain.Server(name,tables,startTime); 
```

# c# - Asp.Net 应用程序数据库连接问题

> ID：11639320
> 
> 赞同：3
> 
> 时间：2012-07-24T21:07:14.507
> 
> 标签：c#, asp.net, sql-server-2008, ado.net

当我尝试在 C# 中编写与我的应用程序到我的数据库的连接时，我在 Visual Studio 2005 中成功构建了应用程序，但是当我在调试器中运行该站点时出现错误：

```
Exception Details: System.ArgumentException: Format of the initialization string does not conform to specification starting at index 118. 
```

这是给出错误的连接代码：

```
SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Server"].ConnectionString); 
```

我在我的 web.config 文件中正确写入了连接字符串，所以我对这远程意味着什么一无所知。我不确定我是否遗漏了什么。任何帮助表示赞赏。这是我可能有帮助的部分的完整代码：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Configuration;
using System.Data.SqlClient;

public partial class RateAnalyzerPage: System.Web.UI.Page
{
    protected void Search_Click(object sender, EventArgs e)
    {
        string IDnumber = mechantNumber.Text;
        string selectSQL = "SELECT FROM Authors Where MID='"+ IDnumber +"'";
   // SqlConnection con = new SqlConnection(@"Server="); 
    //SqlConnection con = new SqlConnection();
    SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Server"].ConnectionString);
    SqlDataReader reader;
    try
    {
        con.Open();
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            QualVol.Text = reader["TotalVolume"].ToString();
        }
        reader.Close();
    }
    catch (Exception err)
    {

    }
    finally
    {
        con.Close();
    }
}
} 
```

如果我错过了一些有用的数据，请告诉我。

这是连接字符串：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:28:15.233

我已经分离出来，XML 解码了连接字符串值：

```
数据源=服务器；初始目录=Odata；集成安全=True；MultipleActiveResultSets=False；数据包大小=4096；应用程序名称=“Microsoft SQL Server Management Studio”用户ID=名称；密码=PW
```

如您所见，您缺少一个`;`between`Application Name`和`User ID`。我不确定这是否是*问题*，但这是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:32:25.867

我认为雅各布是对的。在旁注中，不要这样做：

```
string selectSQL = "SELECT FROM Authors Where MID='"+ IDnumber +"'"; 
```

这将导致 sql 注入攻击，就像上周用来获取 yahoo 用户帐户的攻击一样。

改为这样做：

```
 string selectSQL = "SELECT * FROM Authors Where MID=@ID"; 
 cmd.Parameters.AddWithValue("@ID", IDnumber ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T21:22:14.577

您的连接字符串使用`Integrated Security=True`，但正确的语法是 `Integrated Security=SSPI;`左右`Trusted_Connection=True`更改它并删除 UserId 和 Password。
（或删除 Integrated Security=True 并保留用户 ID 和密码）

尝试更改代码中的某些内容。

```
protected void Search_Click(object sender, EventArgs e) 
{ 
    string IDnumber = mechantNumber.Text; 
    string selectSQL = "SELECT * FROM Authors Where MID=@num"; 
    using(SqlConnection con = new SqlConnection
                      (System.Configuration.ConfigurationManager.ConnectionStrings
                       ["Server"].ConnectionString))
    {
         SqlDataReader reader; 
         con.Open(); 
         SqlCommand cmd = new SqlCommand(selectSQL, con); 
         cmd.Parameters.AddWithValue("@num", IDNumber);
         reader = cmd.ExecuteReader(); 
         while (reader.Read()) 
         { 
              QualVol.Text = reader["TotalVolume"].ToString(); 
         } 
         reader.Close(); 
    } 
} 
```

尝试使用`using`statemend，这可以保证您的连接的处理
尝试使用参数化查询，这可以避免Sql Injection攻击和引用问题
另外SELECT需要一个字段列表或`*`

# flash - 如何使用循环来控制movieClip ???!!!

> ID：11639321
> 
> 赞同：0
> 
> 时间：2012-07-24T21:07:15.853
> 
> 标签：flash, actionscript, actionscript-2

我正在使用 AS2.0 并试图制作一部 .swf 电影，该电影在一段时间内停止 movieClip 并在另一个限制内播放。这就是我到目前为止所得到的，它可以在没有循环和 if 条件的情况下工作，但我需要有一个循环，这样它才能按我的意愿工作。请帮助我，谢谢。

```
myDate = new Date();
hrs = myDate.getHours();

while ( hrs >6 && hrs <21)  // time range i want the movieclip to stop
{
stop();     // to stop the timeline
Night.stop();   // " Night " is the instance name of the movieclip
hrs = myDate.getHours();    // to update the time 
}

stop();     // to stop the timeline
Night.play();   // it's out of the time limit so the movieclip should play 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:12:11.003

我不是 AS2.0 程序员，但也许在 while 循环中添加延迟可能会有所帮助，试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:16:36.357

This tutorial should help you out, it gives a great breakdown of how it works as well [http://www.quip.net/blog/2006/flash/how-to-loop-three-times](http://www.quip.net/blog/2006/flash/how-to-loop-three-times)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:20:01.223

您可以利用不会挂起电影的 onEnterFrame 事件

```
this.onEnterFrame = function() {
    var myDate = new Date();
    var hrs = myDate.getHours();

    while ( hrs >6 && hrs <21)  // time range i want the movieclip to stop
    {
    stop();     // to stop the timeline
    Night.stop();   // " Night " is the instance name of the movieclip
    hrs = myDate.getHours();    // to update the time 
    }

    stop();     // to stop the timeline
    Night.play();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:24:26.853

在 flash + actionscript 中，您可能希望利用时间线、间隔或输入帧处理程序而不是循环来发挥自己的优势。该循环旨在执行重复（或类似）代码，直到条件为真。

当在时间轴或符号上的一帧内使用循环时，它不允许下一帧绘制和刷新 - 这实际上会使播放器超时（您是否在 Flash 中收到 15 秒超时错误？）并且一切都“冻结” 。”

“进入框架”的方式是（这不是我的想法）：

```
onEnterFrame = function(){ // execute the following on every frame
    hrs = (new Date()).getHours(); // get the current hour 
    if ( hrs >6 && hrs <21) { // time range i want the movieclip to stop
        Night.gotoAndStop(1); // stop and reset Night
        Night.alpha = 0; // hide Night
    } else {
        /*
            if Night's frame is "1" then we can assume that Night is not playing,
            however, in the event it is playing already, it will just keep playing
            without missing a beat
        */
        if ( Night.currentFrame == 1 ) {
            Night.alpha = 1; // show Night
            Night.gotoAndPlay(2); // advance to the next frame
        }
    }
}

stop(); // stop the main timeline
Night.play(); // play Night by default 
```

# sql - 生产中缓慢的 PostgreSQL 查询 - 帮助我理解这个解释分析输出

> ID：11639323
> 
> 赞同：5
> 
> 时间：2012-07-24T21:07:44.977
> 
> 标签：hibernate, sql, hibernate, postgresql, indexing, postgresql-9.0

我有一个查询需要 9 分钟才能在 x86_64-unknown-linux-gnu 上的 PostgreSQL 9.0.0 上运行，由 GCC gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46) 编译，64 位

这个查询是由[hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题")为我的应用程序自动生成的。它试图找到一所学校的所有“教师成员”。成员资格是在组中具有角色的用户。有几种类型的团体，但这里最重要的是学校和服务。如果有人是服务中的教师成员和这所学校的成员 (15499)，那么他们就是我们正在寻找的人。

此查询过去在生产中运行良好，在开发中仍然运行良好，但在生产中现在需要几分钟才能运行。你能帮我理解为什么吗？

这是查询：

```
select distinct user1_.ID as ID14_, user1_.FIRST_NAME as FIRST2_14_, user1_.LAST_NAME as LAST3_14_, user1_.STREET_1 as STREET4_14_, user1_.STREET_2 as STREET5_14_, user1_.CITY as CITY14_, user1_.us_state_id as us7_14_, user1_.REGION as REGION14_, user1_.country_id as country9_14_, user1_.postal_code as postal10_14_, user1_.USER_NAME as USER11_14_, user1_.PASSWORD as PASSWORD14_, user1_.PROFESSION as PROFESSION14_, user1_.PHONE as PHONE14_, user1_.URL as URL14_, user1_.bio as bio14_, user1_.LAST_LOGIN as LAST17_14_, user1_.STATUS as STATUS14_, user1_.birthdate as birthdate14_, user1_.ageInYears as ageInYears14_, user1_.deleted as deleted14_, user1_.CREATEDATE as CREATEDATE14_, user1_.audit as audit14_, user1_.migrated2008 as migrated24_14_, user1_.creator as creator14_ 
from DIR_MEMBERSHIPS membership0_ 
inner join DIR_USERS user1_ on membership0_.USER_ID=user1_.ID, DIR_ROLES role2_, DIR_GROUPS group4_ 
where membership0_.role=role2_.ID 
and membership0_.GROUP_ID=group4_.id 
and membership0_.GROUP_ID=15499 
and case when membership0_.expires is null 
    then 1 
    else case when (membership0_.expires > CURRENT_TIMESTAMP and (membership0_.startDate is null or membership0_.startDate < CURRENT_TIMESTAMP)) 
        then 1 
        else 0 end 
    end =1 
and membership0_.deleted=false 
and role2_.deleted=false 
and role2_.NAME='ROLE_MEMBER' 
and group4_.deleted=false 
and user1_.STATUS='active' 
and user1_.deleted=false 
and (membership0_.USER_ID in (
    select membership7_.USER_ID 
    from DIR_MEMBERSHIPS membership7_, DIR_USERS user8_, DIR_ROLES role9_ 
    where membership7_.USER_ID=user8_.ID 
    and membership7_.role=role9_.ID 
    and case when membership7_.expires is null 
        then 1 
        else case when (membership7_.expires > CURRENT_TIMESTAMP 
                        and (membership7_.startDate is null or membership7_.startDate < CURRENT_TIMESTAMP)) 
            then 1 
            else 0 end 
        end =1 
    and membership7_.deleted=false 
    and role9_.NAME='ROLE_TEACHER_MEMBER')); 
```

解释分析输出：

```
 HashAggregate  (cost=61755.63..61755.64 rows=1 width=3334) (actual time=652504.302..652504.307 rows=4 loops=1)
   ->  Nested Loop  (cost=4355.35..61755.56 rows=1 width=3334) (actual time=304.450..652504.217 rows=6 loops=1)
     ->  Nested Loop  (cost=4355.35..61747.28 rows=1 width=3342) (actual time=304.419..652504.060 rows=6 loops=1)
           ->  Nested Loop Semi Join  (cost=4355.35..61738.97 rows=1 width=32) (actual time=304.385..652503.961 rows=6 loops=1)
                 Join Filter: (user_id = user_id)
                 ->  Nested Loop  (cost=0.00..32.75 rows=1 width=16) (actual time=0.190..26.703 rows=758 loops=1)
                       ->  Seq Scan on dir_roles role2_  (cost=0.00..1.25 rows=1 width=8) (actual time=0.032..0.038 rows=1 loops=1)
                             Filter: ((NOT deleted) AND ((name)::text = 'ROLE_MEMBER'::text))
                       ->  Index Scan using dir_memberships_role_group_id_index on dir_memberships membership0_  (cost=0.00..31.49 rows=1 width=24) (actual time=0.151..25.626 rows=758 loops=1)
                             Index Cond: ((role = role2_.id) AND (group_id = 15499))
                             Filter: ((NOT deleted) AND (CASE WHEN (expires IS NULL) THEN 1 ELSE CASE WHEN ((expires > now()) AND ((startdate IS NULL) OR (startdate < now()))) THEN 1 ELSE 0 END END = 1))
                 ->  Nested Loop  (cost=4355.35..61692.86 rows=1069 width=16) (actual time=91.088..843.967 rows=79986 loops=758)
                       ->  Nested Loop  (cost=4355.35..54185.33 rows=1069 width=8) (actual time=91.065..555.830 rows=79986 loops=758)
                             ->  Seq Scan on dir_roles role9_  (cost=0.00..1.25 rows=1 width=8) (actual time=0.006..0.013 rows=1 loops=758)
                                   Filter: ((name)::text = 'ROLE_TEACHER_MEMBER'::text)
                             ->  Bitmap Heap Scan on dir_memberships membership7_  (cost=4355.35..53983.63 rows=16036 width=16) (actual time=91.047..534.236 rows=79986 loops=758)
                                   Recheck Cond: (role = role9_.id)
                                   Filter: ((NOT deleted) AND (CASE WHEN (expires IS NULL) THEN 1 ELSE CASE WHEN ((expires > now()) AND ((startdate IS NULL) OR (startdate < now()))) THEN 1 ELSE 0 END END = 1))
                                   ->  Bitmap Index Scan on dir_memberships_role_index  (cost=0.00..4355.09 rows=214190 width=0) (actual time=87.050..87.050 rows=375858 loops=758)
                                         Index Cond: (role = role9_.id)
                       ->  Index Scan using dir_users_pkey on dir_users user8_  (cost=0.00..7.01 rows=1 width=8) (actual time=0.003..0.003 rows=1 loops=60629638)
                             Index Cond: (id = user_id)
           ->  Index Scan using dir_users_pkey on dir_users user1_  (cost=0.00..8.29 rows=1 width=3334) (actual time=0.011..0.011 rows=1 loops=6)
                 Index Cond: (id = user_id)
                 Filter: ((NOT deleted) AND ((status)::text = 'active'::text))
     ->  Index Scan using dir_groups_pkey on dir_groups group4_  (cost=0.00..8.28 rows=1 width=8) (actual time=0.023..0.023 rows=1 loops=6)
           Index Cond: (group4_.id = 15499)
           Filter: (NOT group4_.deleted)
Total runtime: 652504.827 ms
(29 rows) 
```

我正在阅读和阅读论坛帖子和用户手册，但我不知道什么会使它运行得更快，除非可以为使用该`now()`函数的选择创建索引。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T00:24:12.797

我重写了您的查询并假设这会更快：

```
SELECT u.id AS id14_, u.first_name AS first2_14_, u.last_name AS last3_14_, u.street_1 AS street4_14_, u.street_2 AS street5_14_, u.city AS city14_, u.us_state_id AS us7_14_, u.region AS region14_, u.country_id AS country9_14_, u.postal_code AS postal10_14_, u.user_name AS user11_14_, u.password AS password14_, u.profession AS profession14_, u.phone AS phone14_, u.url AS url14_, u.bio AS bio14_, u.last_login AS last17_14_, u.status AS status14_, u.birthdate AS birthdate14_, u.ageinyears AS ageinyears14_, u.deleted AS deleted14_, u.createdate AS createdate14_, u.audit AS audit14_, u.migrated2008 AS migrated24_14_, u.creator AS creator14_
FROM   dir_users u 
WHERE  u.status = 'active'
AND    u.deleted = FALSE
AND    EXISTS (
   SELECT 1
   FROM   dir_memberships m
   JOIN   dir_roles       r ON r.id = m.role
   JOIN   dir_groups      g ON g.id = m.group_id
   WHERE  m.group_id = 15499
   AND    m.user_id = u.id
   AND   (m.expires IS NULL
       OR m.expires > now() AND (m.startdate IS NULL OR m.startdate < now()))
   AND    m.deleted = FALSE
   AND    r.deleted = FALSE
   AND    r.name = 'ROLE_MEMBER'
   AND    g.deleted = FALSE
   )
AND    EXISTS (
    SELECT 1
    FROM   dir_memberships m
    JOIN   dir_roles       r ON r.id = m.role
    WHERE (m.expires IS NULL
        OR m.expires > now() AND (m.startDate IS NULL OR m.startDate < now()))
    AND    m.deleted = FALSE
    AND    m.user_id = u.id
    AND    r.name = 'ROLE_TEACHER_MEMBER'
    ) 
```

### 重写`EXISTS`

*   用简单的表达式替换了奇怪`case ... end = 1`的表达式
*   使用显式连接语法重写了所有 JOIN，使其更易于阅读。
*   将 big`JOIN`构造和`IN`表达式转换为两个`EXISTS`半连接，这样就不需要`DISTINCT`. 这应该会快一些。
*   许多小的编辑使查询更简单，但它们并没有改变实质。
    尤其是使用更简单的别名——你所拥有的是嘈杂和混乱的。

### 索引

如果这还不够快，并且您的写入性能可以处理更多索引，请添加此[部分多列索引](http://www.postgresql.org/docs/current/interactive/indexes.html)：

```
CREATE INDEX dir_memberships_g_id_u_id_idx ON dir_memberships (group_id, user_id)
WHERE  deleted = FALSE; 
```

`WHERE`条件必须与您的查询相匹配才能使索引有用！

我假设您已经有相关外键的主键和索引。

更远：

```
CREATE INDEX dir_memberships_u_id_role_idx ON dir_memberships (user_id, role)
WHERE  deleted = FALSE; 
```

为什么`user_id`要第二次？。看：

*   [PostgreSQL中索引的工作](https://dba.stackexchange.com/a/7484/3684)
*   [复合索引是否也适用于第一个字段的查询？](https://dba.stackexchange.com/a/27493/3684)

此外，由于`user_id`已在另一个索引中使用，因此您不会阻止[HOT 更新](https://dba.stackexchange.com/a/21507/3684)（它只能用于未涉及任何索引的列。

为什么`role`？
我假设两列都是类型`integer`（4 个字节）。我在您的详细问题中看到，您运行 64 位操作系统，其中[`MAXALIGN`](https://stackoverflow.com/a/7431468/939860)8 个字节，因此另一个整数根本不会使索引增长。我投入`role`其中可能对第二个`EXISTS`半连接有用。

如果您有许多“死”用户，这也可能会有所帮助：

```
CREATE INDEX dir_users_id_idx ON dir_users (id)
WHERE status = 'active' AND deleted = FALSE; 
```

与往常一样，检查`EXPLAIN`索引是否真正被使用。您不希望无用的索引消耗资源。

我们快了吗？

* * *

当然，所有通常的[性能优化](http://wiki.postgresql.org/wiki/Performance_Optimization)建议也适用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T05:09:25.430

查询，减去最后 4 个条件，即

```
and group4_.deleted=false 
and user1_.STATUS='active' 
and user1_.deleted=false 
and (membership0_.USER_ID in (...)) 
```

返回 758 行。**然后，这 758 行中的每一**行都将通过`select membership7_.USER_ID ...`子查询，运行时间为 843.967 毫秒。

843.967 * 758 = 639726.986，还有 10 分钟。

至于调优查询，我认为您不需要`DIR_USERS user8_`在子查询中。您可以从删除它开始，并将子查询更改为使用`EXISTS`而不是`IN`.

顺便问一下，数据库是否被清空了？即使没有任何调整，它看起来也不那么复杂的查询或需要 10 分钟的数据量。

# model-view-controller - Zend Framework 编码标准

> ID：11639325
> 
> 赞同：0
> 
> 时间：2012-07-24T21:08:02.397
> 
> 标签：model-view-controller, zend-framework, model

如果您对我的聊天应用程序不厌烦...应用程序的主要部分，完成所有后端工作的部分位于“模型”目录中。该类被称为 AEDC_Model_Chat（AEDC 是命名空间），但这个特定的类实际上并不是一个“对象”。它永远不会被实例化，它只公开静态方法。

所以，我认为这实际上不是一个模型，也不属于“模型”。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:13:28.170

IMO，我认为基于静态的类驻留在 /models 目录中很好。在使用 Propel 和 Doctrine 时，它​​们（分别）具有 Peer 和 Table 类，它们永远不会被实例化，而是用于在与其关联的对象上实现业务逻辑。示例目录列表：

```
// Propel
/lib/model/mydb
    Vehicle.php // Instantiable
    VehiclePeer.php // Works with vehicle object(s)

// Doctrine
/lib/model/mydb
    Vehicle.php // Instantiable
    VehicleTable.php // Works with vehicle object(s) 
```

**- 更新 -**

需要进行更正（不改变答案），关于原则，“*Table”类可以被实例化，但它们的行为仍然与我上面描述的相同，因为包含的方法旨在使用关联对象。您对“静态”类的使用更接近 Propel 的工作方式，正如我之前提到的，可以驻留在 /model 目录中。

# version-control - 让 Mercurial 忽略我本地机器中的设置文件

> ID：11639329
> 
> 赞同：0
> 
> 时间：2012-07-24T21:08:09.557
> 
> 标签：version-control, mercurial

我的项目有一个远程存储库。我已经将它克隆到我的本地机器上。我必须更改两个设置文件才能使这个项目在我的本地机器上运行。我怎样才能让我的本地机器忽略这两个文件的更改，以便当我将更改推送到远程服务器时，在线版本中的设置文件不会被本地设置文件更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:10:24.937

Mercurial（没有人提供）不提供此类设施。

您需要完全排除这些文件并将模板或`file.config.sample`文件存储在存储库中，以便每个开发人员手动设置自己的个人配置文件或使用一些构建脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:05:38.103

除了工作目录中的 .hgignore 之外，您还可以拥有其他忽略文件。将此添加到您的 hgrc：

```
[ui]
ignore = /path/to/repo/.hg/hgignore 
```

在 .hg 文件夹中创建 hgignore 文件，并使用要忽略的文件对其进行编辑。它就像 .hgignore 的扩展，但仅适用于您的本地副本。

# html - 使图像链接在新选项卡中可打开

> ID：11639335
> 
> 赞同：2
> 
> 时间：2012-07-24T21:08:42.357
> 
> 标签：html, css

我有以下 HTML 模板：

```
<div class='item'>
    <img href='...' attributes='...' \>
    <div class='popup' attributes='...'>
    </div>
</div> 
```

我使用 Jquery 将鼠标悬停在 div（以及图像）上，并显示弹出窗口。问题是，我似乎无法控制+单击以在 chrome 或 firefox 的新选项卡中打开；我也不能右键单击图像并在新选项卡中打开链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T21:12:35.380

添加`target="_blank"`到链接。它应该看起来像这样：

```
<div class='item'>
    <a href='...' target="_blank"><img src='....' attributes='...' \></a>
        <div class='popup' attributes='...'>
    </div>
</div> 
```

您希望图像打开的链接进入，图像`a href='LINK'`的文件路径进入`img src='PATH'`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T21:18:32.060

**[检查这个例子](http://jsfiddle.net/jQGmE/)**

这是带有图像示例的代码标记（ctrl+单击它，它将带您到 google.com）：

```
<div class="item">
    <a href="http://www.google.com">
        <img src="https://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" attributes="#"\>
    </a>
    <div class="popup" attributes="#">
    </div>
</div> 
```

你只需`<img>`要用标签包装你的`<a>`标签。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:12:23.467

所有你需要的是

```
<div class='item' >
    <a href='...' attributes='...' target="_parent">
    <img src="yoursource.jpg"/></a>
    <div class='popup' attributes='...'>
    </div>
</div> 
```

添加 target="_parent" 或者您可以在您的 href 中使用 _blank（并暂时删除 img），然后使用 > 关闭 href 并生成新的 img 字段。用现在应该可以工作的方式包装你的 href 和 img

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T21:12:25.753

用标签包围您的图像`<a>`并链接到包含该图像的新页面。

# html - iPad firebug lite 或类似产品

> ID：11639346
> 
> 赞同：2
> 
> 时间：2012-07-24T21:09:41.713
> 
> 标签：html, ipad, firebug

我已经阅读了很多关于如何让 firebug lite 在 iPad 上工作的博客，并且据我所知，它在某些时候可以工作，但已经有一段时间没有工作了。我自己无法让它工作。

**所以我的问题是最近有没有人得到 firebug lite 或类似的东西在 iPad 上工作**。随着 iPad 如此受欢迎，我发现还没有一个好的可靠的开发工具来支持它，这让我感到很惊讶。特别是因为根据我的经验，它不会像预期的那样经常呈现网页并且需要特定的调整。

只是为了停止一些快速回复，我已经知道它是一个 webkit 浏览器，我发现的问题只出现在 iphone 和 ipad 上，而不是在 chrome 或桌面 safari 中。所以我真的很喜欢 ipad 本身自带的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T00:36:25.160

下面的建议在运行 IOS6 的 iPad3 上对我有用。

这项技术来自[http://www.jamesmacfie.com/2012/03/debug-your-html-css-on-the-ipadiphone/](http://www.jamesmacfie.com/2012/03/debug-your-html-css-on-the-ipadiphone/)

在 iPad 上为任何网站添加书签，然后编辑地址。粘贴以下代码：

```
 javascript:(function(F,i,r,e,b,u,g,L,I,T,E.{if(F.getElementById(b))return;E=F[i+'NS']&&F.documentElement.namespaceURI;E=E?F[i+'NS'](E,'script'):F[i]('script');E[r]('id',b);E[r]('src',I+g+T);E[r](b,u);(F[e]('head')[0]||F[e]('body')[0]).appendChild(E);E=new%20Image;E[r]('src',I+L);})(document,'createElement','setAttribute','getElementsByTagName','FirebugLite','4','firebug-lite.js','releases/lite/latest/skin/xp/sprite.png','https://getfirebug.com/','#startOpened'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:16:01.593

Try Remote Debugging with Chrome browser. However iOS 6 comes with built-in support for remote debugging - [link](http://www.screenr.com/GYZ8).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:01:40.953

我已经安装了很多次（过去一个月在新 iPad 上）并且它已经成功了。

[http://martinkool.com/post/13629963755/firebug-on-ipad-and-iphone](http://martinkool.com/post/13629963755/firebug-on-ipad-and-iphone)

仅供参考：方向可能有点过时，所以不要放弃。您将要做的是创建一个书签。然后使用 Martin 网站上的脚本编辑书签中的链接。这也意味着 Firebug Lite 可以在 Internet Explorer 上使用……尽管在启动并运行后我无法编辑任何元素。

祝你好运！

# scala - Play Framework 2 (Scala) 模板：查看用户是否登录

> ID：11639347
> 
> 赞同：4
> 
> 时间：2012-07-24T21:09:42.047
> 
> 标签：scala, playframework, playframework-2.0

莫因，

我在游戏框架的帮助下编写了一个应用程序。现在我有一个主模板，应该用于每个请求。在这个模板中，我有链接路由到登录表单和注销方法。当然，只有注销的用户才能看到登录表单等。有人知道如何在不编写每个动作两次的情况下实现它吗？

来自德国北部的感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T21:19:09.020

我提出了有关保护行动的[要点](https://gist.github.com/3160915)，这可能对您有用。

扩展 SecureableController 特征的控制器具有：

```
implicit def user(implicit request : RequestHeader) : Option[User] = {  
  // substitute in your own user lookup mechanism here
  session.get("email").flatMap(User.findOne(_))
} 
```

它允许您通过指定从该控制器路由到的视图中的隐式参数获取用户：

```
@ ... other parameters ... (implicit user: Option[User] = None) 
```

关于你的每一个观点。（还没有办法绕过那个特定的样板。）

然后我的菜单中有这样的东西：

```
 @user match {
      case Some(u) => {
        @defining(u.givenName + " " + u.familyName) { profileName =>
      <li class="dropdown"><a href="#user" class="dropdown-toggle" data-toggle="dropdown">@profileName<b class="caret"></b></a>
        }
        <ul class="dropdown-menu">
          @defining("/profile/"+u.email) { profileUrl =>
          <li><a href="@profileUrl">Profile</a></li>                
          <li><a href="@routes.Users.logout">Logout</a></li>                
          }
        </ul>      
      </li>      
      }
      case None => {
      <li>            
        <a href="@routes.Users.login">Login</a>
      </li>
      }
    } 
```

它提供了一个引导下拉菜单链接到个人资料页面和登录用户的注销，如果没有登录用户，则提供一个登录链接。

# python - Python：输入一个微时间浮点数，结果一个格式化的日期时间

> ID：11639348
> 
> 赞同：3
> 
> 时间：2012-07-24T21:09:59.360
> 
> 标签：python, datetime, time, floating-point

我对 Python 时间和日期时间方法感到很困惑。有人可以帮助我吗？

我只想实现从微时间浮点到这种格式的格式化字符串的转换：

```
mt = 1342993416.0
start_time_format = '%Y-%m-%d %H:%M:%S'

// Some time or datetime magic here..

OUTPUT >> The file's date is: 2012-07-23 19:00:00 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T21:12:10.613

使用 [`.fromtimestamp()`类方法](http://docs.python.org/library/datetime.html#datetime.datetime.fromtimestamp)：

```
>>> import datetime
>>> mt = 1342993416.0
>>> datetime.datetime.fromtimestamp(mt)
datetime.datetime(2012, 7, 22, 23, 43, 36) 
```

然后使用该[`strftime`方法](http://docs.python.org/library/datetime.html#datetime.datetime.strftime)格式化输出：

```
>>> start_time_format = '%Y-%m-%d %H:%M:%S'
>>> datetime.datetime.fromtimestamp(mt).strftime(start_time_format)
'2012-07-22 23:43:36' 
```

您还*可以*使用以下[`time.strftime`功能](http://docs.python.org/library/time.html#time.strftime)：

```
>>> import time
>>> time.strftime(start_time_format, time.localtime(mt))
'2012-07-22 23:43:36' 
```

# javascript - 将 window.scrollTo 添加到简单的 jQuery 手风琴

> ID：11639349
> 
> 赞同：0
> 
> 时间：2012-07-24T21:10:06.733
> 
> 标签：javascript, jquery, javascript-events

无法弄清楚如何让它工作。我尝试了一些变化。我希望窗口根据它的偏移量滚动到 .accordion > dt 的顶部。目前此代码只是打开面板并开始重新加载页面。

```
(function($) {

    var $j = jQuery.noConflict();
    var allPanels = $j('.accordion > dd').hide();

    $('.accordion > a > dt').click(function() {
        $this = $j(this);
        $target = $this.parent().next();

        if (!$target.hasClass('active')) {
            allPanels.removeClass('active').slideUp();
            $target.addClass('active').slideDown();
            window.scrollTo($(".accordion").offset().top);
        }

        return false;
    });

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:34:53.440

看起来好像您的`DT`元素与锚标签一起存在。通过返回 false，您将停止元素上的默认点击行为`DT`，但是，您仍然需要阻止事件传播到链接。

```
$('.accordion > a > dt').click(function(e) {

    $this = $j(this);
    $target = $this.parent().next();

    if (!$target.hasClass('active')) {
        allPanels.removeClass('active').slideUp();
        $target.addClass('active').slideDown();
        window.scrollTo($(".accordion").offset().top);
    }

    e.stopPropagation();
    return false;

}); 
```

# php - 在 html/php 页面中使用框架集很好吗？

> ID：11639353
> 
> 赞同：2
> 
> 时间：2012-07-24T21:10:23.273
> 
> 标签：php, html, frame

我是 php 和 html 脚本的新手，所以我想知道是否有人可以就如何设置我的页面结构给我一个建议。

我需要创建一个带有页眉和页脚的页面、一个左页菜单和一个显示网站内容的主要部分。

我想到了这样的框架集：

```
<!DOCTYPE HTML PUBLIC “-//W3C//DTD HTML 4.01 Frameset//IT” “http://www.w3.org/TR/html4/frameset.dtd”&gt;

<html>
<head>
<meta http-equiv=”Content-Type” content=”text/html; charset=iso-8859-1?>
<title>Framesets</title>
</head>

<frameset rows=”20%,70%,10%”&gt;
<frame src=header.php>
     <frameset cols=”20%,80%”&gt;
     <frame src=menu.php>
     <frame src=main.php>
    </frameset>
 <frame src=footer.php>
</frameset>
<noframes></noframes>
</html> 
```

当有人单击 menu.php 部分上显示的链接时，只有 main.php 部分会被调用不同的选项（或者我可以调用不同的 php 页面，每种选择一个），但我不确定这是最好的解决方案，谁能给我一些建议？

（对不起我的英语不好！）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:12:50.993

不，这不好。

HTML 框架集的使用已被弃用，并且在最新版本的 HTML 中不再有效。

如果您需要这种功能，您仍然可以使用`<iframe>`，但总的来说，您尝试做的是一种非常*非常*过时的网页编写方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:23:13.193

你真的不需要框架，也许宁愿尝试这样的页面布局：

[http://jsfiddle.net/YAxQM/](http://jsfiddle.net/YAxQM/)

**HTML**

```
<header>
  <?php include('header.php') ?>
</header>
<div class="main">
  <nav>
   <?php include('menu.php') ?>
  </nav>
  <div class="content">
    <?php include('main.php') ?>
  </div>
</div>
<footer>
  <?php include('footer.php') ?>
</footer>​ 
```

**CSS**

```
html, body{
  height: 100%;  
}
header{
   height: 20%;
}
.main{
   height: 70%;
}
footer{
   height: 10%;
}
nav{
  width: 20%;
  height: 100%;
  float: left;
} 
```

# sql-server - Viewing contents of table variable when debugging in sql server 2012

> ID：11639355
> 
> 赞同：4
> 
> 时间：2012-07-24T21:10:29.170
> 
> 标签：sql-server, debugging, sql-server-2012, table-variable, watch-window

In the watch window whilst debugging in Sql Server 2012, we get to see the values of regular variables, we can look at xml in a special window and same with sql strings, but for a table variable it just says (table).

I'd really like to know if there is any way to peek inside that table variable at that moment and check on the contents.

**EDIT:**

I have discovered that Visual Studio (for a long time now), has had a "Table" visualizer alongside Xml, Html, and Text. This does not help me here, but it underscores the point I made originally that it is a very doable feature. I'm very disappointed in general with the Sql Server SSMS team vs the Visual Studio team. I think Visual Studio developers in Redmond ought to be forced every 5 years to do a "tour of duty" for 2 or 3 sprints on the SSMS team. They could help it sooo much if they did that.

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T22:48:56.280

不，我很遗憾地报告这在 SQL Server 2012 中仍然不可能。该功能已被请求，收到了很多赞成票，但经过***四年***的审议后被丢弃：

[http://connect.microsoft.com/SQL/feedback/details/363054](http://connect.microsoft.com/SQL/feedback/details/363054)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T05:14:22.150

你可以试试这个：`select * from @temp_table`

# eclipse - How can I use Eclipse Memory Analyzer Tool to dump the heap from a running process?

> ID：11639361
> 
> 赞同：3
> 
> 时间：2012-07-24T21:11:00.070
> 
> 标签：eclipse, console-application, eclipse-memory-analyzer

I created a simple console application that I run from Eclipse (right clicking on the file and selecting run as Java application.) I stuck a sleep in there so I can ensure that the process is still running when I start the Aquire Heap Dump Dialog. I start the dialog, hit refresh, and there are no local processes listed.

I checked Eclipse's error log and it only reports that it had problems listing the IBM VM processes (the HPROF one is configured and working fine.)

What am I doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:04:08.087

为什么不从您的程序代码创建堆转储？

[https://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java](https://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java)

或者当从这里遇到安全问题时： [从应用程序内创建堆转储，没有 HotSpotDiagnosticMXBean](https://stackoverflow.com/questions/12295824/create-heap-dump-from-within-application-without-hotspotdiagnosticmxbean)

我用它在我的 JUnit 测试中进行固定次数的迭代后进行堆转储，剩下要做的就是在 Eclipse MAT 中打开转储并找到内存泄漏的原因:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T20:56:22.797

I faced same issue and after googled I found this solution.

Specify jdk path in "Acquire Head Dump" -> "Configure..." -> Select "HPROF jmap dump provider" -> "-jdkhome" -> speficy jdk path by default it should be "C:\Program Files\Java\jdk1.8.0_102" or your jdk location.

I hope it works for you.

# php - 如何使用链接在 foreach 循环中传递变量

> ID：11639362
> 
> 赞同：1
> 
> 时间：2012-07-24T21:11:06.050
> 
> 标签：php, xml, foreach

我正在尝试制作一个将加载某个 menu.xml 文档的网站，该文档是使用 foreach 循环发送给它的。foreach 循环使用 glob 获取目录中的所有 XML 文档，然后将“名称”属性打印到 html 链接中。

这一直有效，直到我需要传递用于链接到另一个使用它的 php 文档的特定 XML var。

我首先尝试使用 $_SESSION 但不能，因为循环会在每次迭代时覆盖 $_SESSION。我也尝试了 $_GET 和 $_POST，但我遇到了同样的表单问题。

这是我的代码（请忽略任何草率，我是 PHP 游戏的新手）：

```
foreach(glob("../menus/*xml") as $dom) //grabs each .xml doc in menus/
{
    $menu = simplexml_load_file($dom); //loads the file into $menu
    print "<li>";
    print "<a href = menu.php>{$menu["name"]}</a>"; //links to page menu.php
    print "</li>";
} 
```

我现在需要做的是在单击链接时传递单独加载的 XML 变量。

我怎么能这样做呢？

编辑：

menu.xml 是显示 menu.xml 内容的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:19:54.477

像这样的东西？

```
<?php
foreach(glob("../menus/*xml") as $dom) //grabs each .xml doc in menus/
{
  $menu = simplexml_load_file($dom); //loads the file into $menu
?>
<li>
    <a href="menu.php?name=<?php echo $menu["name"] ?>><?php echo $menu["name"] ?></a>
</li>
<?php
}
?> 
```

该变量将`$_GET['name']`在页面加载时设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:30:15.260

您可以将 DOM 存储在关联数组中：

```
$xml = simplexml_load_file($dom);
$arr_item = array($xml["name"] => $xml);
$menu[] = $arr_item; 
```

创建表单行：

```
print "<a href = menu.php id='{$xml["name"]}' name='{$xml["name"]}' >{$xml["name"]}</a>"; 
```

然后当你想调用它时，你可以使用它的名字来获取`$dom`：

```
$dom_obj = $menu["name"]; 
```

# c# - Const correctness in C# with rich types

> ID：11639365
> 
> 赞同：8
> 
> 时间：2012-07-24T21:11:15.550
> 
> 标签：c#, .net, constants, const-correctness, readonly

Coming from a C++ background and trying to learn C#, one of the most frustrating language omissions that I've come across is an equivalent to the `const` keyword.

So, I have been attempting to settle on a pattern that I can use to achieve const correctness in C#.

[This answer](https://stackoverflow.com/a/114809/546561) has an interesting suggestion: create a read only interface for all of your types. But as Matt Cruikshank pointed out in the comments, this becomes problematic if your class has collections or other rich types. Particularly if you do not have control over the type, and can't make it implement a read-only interface.

Do any patterns or solutions exist that can handle rich types and collections, or are we forced in C# to simply make copies? Is it better to just give up on const correctness in C# altogether?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:28:50.717

你能在 C# 中获得不变性吗？当然，如果你为它设计。你可以用接口做一些创造性的事情，等等，只公开`get`属性而不公开可变方法。

也就是说，请记住，没有什么可以阻止狡猾的用户将其转换回实际类型（当然，C++ 也可以这样说，你可以放弃 const-ness）。

```
ISomeReadOnlyInterface readOnly = new SomeFullObject();

// hah, take that read-only interface!
((SomeFullObject)readOnly).SomeMutatingMethod(); 
```

与集合相同。即使您返回 ReadOnlyCollection（它可以防止集合本身发生变异行为），集合中的数据仍然是可变的（当然，只要类型允许）。

所以恐怕这里真的没有简单的答案。没有“flip-a-switch” const 可以为您提供 C++ 的功能。

这完全取决于您，您可以：

*   将您的类型设计为不可变并返回迭代器（或其他只读序列）而不是可变集合。
*   每次都返回新副本，这样如果他们改变它们就没什么大不了的。
*   只需返回实际数据并将篡改行为保留为“未定义”。
*   ETC...

后者是集合喜欢`Dictionary<TKey, TValue>`做的事情。没有什么说您不能将密钥类型设为可变类型（但如果您这样做会很糟糕），而且 MSDN 很清楚，如果您更改密钥以使其哈希码发生变化，那么它就在您自己的脖子上...

对于我自己的工作，我倾向于保持简单，除非真的很担心我的课程可能会以一种会导致副作用的方式改变。例如，如果我将 Web 服务结果存储在缓存中，我将返回缓存项的副本，这样如果用户修改结果，他们就不会无意中修改缓存值。

因此，总而言之，我不会担心您返回的*每种*类型的 const 正确性，这太过分了。我只担心您返回的东西，如果更改，可能会对其他用户产生副作用。

# javascript - Using IE, Jsonp and OpenID how can I get the data sending server to see the client as authenticated?

> ID：11639366
> 
> 赞同：1
> 
> 时间：2012-07-24T21:11:26.097
> 
> 标签：javascript, jquery, internet-explorer, openid, jsonp

I am constructing an app that collects data from different domains via JSONP. These sites are secured via OpenId. Once I have previously logged in to those sites and my client has the OpenId cookie, both Firefox and Chrome will see me as authenticated and send me my data.

IE 9, however does not see me as authenticated and sends the login page back instead of the data.

Is there anything I can do, any special mode of IE I can use, to allow IE to pass back that token with the JSONP request?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:08:38.857

IE 不允许 3rd 方 cookie，除非服务器在标头中设置了隐私策略。

我已经将 KitGUI 构建为第 3 方可注射 CMS，我必须克服这个问题。我在服务器标头中使用命名项目 P3P，其值为 CP="CURa ADMa DEVa OUR DSP OTI COR"。

问题是，如果您不控制正在使用的服务器，那么您就是**SOL**。

# javascript - 如何制作几个div，互相替换？

> ID：11639367
> 
> 赞同：0
> 
> 时间：2012-07-24T21:11:29.810
> 
> 标签：javascript, html, css, pagination

用示意图更容易解释

![在此处输入图像描述](../Images/962a17fb0cd1779cabb336284e119c38.png)

我有主 div，其中包含另一个（灰色）div，以及几个用于视频拇指的 div（可点击用于全尺寸视频）。我想要的是制作一个按钮（方案上的白色箭头），将带有拇指的div（它们用框架标记）更改为下一个“页面” - 另一个带有另一组拇指的div，允许访问者浏览多个页面超过 8 个拇指。

顶部的大图是特色视频，它不应该改变（所以如果我认为我可以把它放在一切之上，而不是在灰色 div 内，因为当你点击按钮时，它应该被另一个具有不同拇指设置的 div 替换)

我不是编码员，只是在 html/css 和一些 java 中迈出了第一步，因此将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:15:31.603

The easiest would be to create a second page which has the second set of video thumbs, and make your white arrow image a link to that page. If you don't want that, I would use jQuery to replace the old video thumbs with new ones, upon click of the white arrow of course.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:49:32.110

我昨天用 twitter 提要做了类似的事情来实现这一点：

![在此处输入图像描述](../Images/bd72063e15f6e4e525e69ce6c66f265c.png)

HTML：

```
<div class="twitterMask">
   <div class="twitterNav" data-id="+"></div>
   <div class="twitterNav twitterNavNext" data-id="-"></div>
   <div id="jsTwitter">
      <div class="tweet">single slide (in your example, this should contain 8 images)</div>
      <div class="tweet">single slide (in your example, this should contain the next 8 images)</div>
      <div class="tweet">single slide (in your example, this should contain another 8 images)</div>
      <div class="tweet">etc etc</div>
   </div>
</div> 
```

CSS：

```
.twitterMask{width:185px; height:122px; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; background: #fff; padding: 10px; position: relative; overflow:hidden}
.twitterArrow{position: relative; background: url(../images/twitterBirdArrow.png); width:93px; height:69px; left: 109px;}

#jsTwitter{width: 780px; height: 150px; overflow: hidden; position: relative; }
#jsTwitter .tweet{overflow: hidden; position: relative; float: left; font-size: 14px; width:185px; height:122px; margin-right: 10px; color: #000; text-align: right; font-style: italic; font-family: Times;}
#jsTwitter .tweet .time{position: absolute; height: 18px; bottom:0; right: 13px; font-size: 12px;}

.twitterMask .twitterNav{position: absolute; background: url(../images/twitterArrows.png); width:10px; height:19px; display: block; z-index: 9; bottom: 8px; left: 10px; cursor: pointer}
.twitterMask .twitterNavNext{background:url(../images/twitterArrows.png) -172px 0px; right: 10px !important; left:auto}
.twitterMask .twitterNav[data-id='+']{display: none} 
```

jQuery

```
$('.twitterNav').click(function(){
    var maxLeft = 0-parseInt($('#jsTwitter').width() - $('.tweet').width() - parseInt($('.tweet').css('margin-right').replace("px","")));
    $('#jsTwitter').animate({
        left: $(this).attr('data-id')+'='+($('.tweet').width()+parseInt($('.tweet').css('margin-right').replace("px",""))),
      }, 100, function() {
        var currentLeft = $('#jsTwitter').css('left');
        currentLeft = parseInt(currentLeft.replace("px",""));
        if (currentLeft <= maxLeft){
            $(".twitterNav[data-id='-']:visible").hide();
        } else {
            $(".twitterNav[data-id='-']:hidden").show();
        }
        if (currentLeft >= 0){
            $(".twitterNav[data-id='+']:visible").hide();
        } else {
            $(".twitterNav[data-id='+']:hidden").show();
        }
      });
}) 
```

显然，您必须定制 CSS 以适合您的模板。不过应该很直截了当。

# asp.net-mvc-3 - 搜索引擎友好的 URL 路由

> ID：11639372
> 
> 赞同：0
> 
> 时间：2012-07-24T21:12:14.967
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我的 mvc3 应用程序具有以下 URL：`http://mysite.com/controller/details?id=56`

我想让它像搜索引擎一样友好

```
http://mysite.com/controller/title-of-the-entity-56 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:22:56.217

您需要设置一条新路线，但我强烈建议您重新考虑自己解析实体的 ID。我的意思是：

使用此 URL，可以将 id 作为数字数据类型（例如 int）传递给操作：[http://mysite.com/controller/details ?id=56](http://mysite.com/controller/details?id=56)

使用此 URL，ID 只能作为字符串的一部分传递：http: [//mysite.com/controller/title-of-the-entity-56](http://mysite.com/controller/title-of-the-entity-56)

..这意味着您必须解析字符串，提取数字并进行转换。

最好针对这种格式：[http://mysite.com/controller/details/id/title-of-entity](http://mysite.com/controller/details/id/title-of-entity)，有点像 StackOverflow 的做法。

尝试在 Global.asax.cs 中在默认路由上方添加此路由：

```
routes.MapRoute(
            "DetailsRoute",
            "details/{id}/{entityTitle}",
            new { controller = "details", action = "Index", id = UrlParameter.Optional }
        ); 
```

然后，您可以在详细信息控制器中将此作为您的索引操作：

```
public ActionResult Index(int id, string entityTitle) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:37:51.770

感谢 Simon Whitehead，这正是我想要的。

下面的帖子详细描述

[http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx)

# javascript - getusermedia 视频未在 three.js 平面上绘制

> ID：11639380
> 
> 赞同：1
> 
> 时间：2012-07-24T21:12:50.480
> 
> 标签：javascript, html5-video, three.js

我尝试将 getusermedia 中的视频绘制到 three.js 中的平面中。但是视频没有画出来。当我拒绝网络摄像头访问时，会加载并绘制图片而不是视频。加载和绘制图片没有问题。谁能告诉我我做错了什么？

```
// ----------------------------------------------
// global variables

var PI=3.1415;

var WIDTH=window.innerWidth,
    HEIGHT=480;

var FOV=45,
    ASPECT=WIDTH/HEIGHT,
    NEAR=1,
    FAR=10000;

var camera,
    scene,
    renderer,
    video,
    backgroundTexture;

// ----------------------------------------------
// 

// function for onload
function load() {
    init();
}

// ----------------------------------------------
// functions

function init() {   
    if(navigator.webkitGetUserMedia) {
        video = document.createElement('video');
        document.body.appendChild(video);
        navigator.webkitGetUserMedia({video:true},function(stream) {
                video.src=window.webkitURL.createObjectURL(stream);
                //video.src=webkitURL.createObjectURL(stream);

                video.autoplay=true;

                // create texture of the video stream
                backgroundTexture = new THREE.Texture(video);

                setupScene();
            },
            function(error){
                console.log("Faild to get a stream due to", error)
                loadAlternativlyBackground();
                setupScene();
        });

    }
    else {
        loadAlternativlyBackground();
        setupScene();
    }
}

function setupScene() {
    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera( FOV, ASPECT, NEAR, FAR );
    camera.position.z = 500;

    //scene.add(new THREE.AmbientLight(0x555555));

    scene.add(camera);

    var material = new THREE.MeshBasicMaterial({map:backgroundTexture});

    var plane = new THREE.Mesh(new THREE.PlaneGeometry(WIDTH,HEIGHT),material);

    plane.rotation.x=PI/2;

    plane.material.depthTest = false;
    plane.material.depthWrite = false;

    scene.add(plane);

    renderer = new THREE.CanvasRenderer();
    renderer.setSize( WIDTH, HEIGHT );
    renderer.autoClear = false;
    document.body.appendChild( renderer.domElement );

    animate();
}

function animate() {
    requestAnimationFrame( animate );
    render();
}

function render() {
        if ( video.readyState === video.HAVE_ENOUGH_DATA ) {
            if ( backgroundTexture ) backgroundTexture.needsUpdate = true;
        }
    renderer.clear();
    renderer.render( scene, camera );
}

function loadAlternativlyBackground() {
    // load alternativly background
    backgroundTexture = THREE.ImageUtils.loadTexture('p/background.png');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:19:03.707

您需要将此添加到渲染循环：

```
if ( video.readyState === video.HAVE_ENOUGH_DATA ) {

    if ( backgroundTexture ) backgroundTexture.needsUpdate = true;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:34:49.510

我最近尝试了类似的事情并遇到了这个错误，这与视频大小不是 2 的幂有关。（我认为 Chrome 的控制台中对我有警告。）[http://code.google.com/p/chromium/issues/detail?id=100525](http://code.google.com/p/chromium/issues/detail?id=100525)

也许您遇到了同样的错误？

为了解决这个问题，我将视频渲染到画布上，然后使用画布作为纹理：

```
//part of init function
    canvas = $("canvas#videoCanvas")[0];
    canvasContext = canvas.getContext("2d");
//part of render
    canvasContext.clearRect(0, 0, canvas.width, canvas.height);
    canvasContext.drawImage(video, 0, 0,video.videoWidth, video.videoHeight);
//and finally replace this
    backgroundTexture = new THREE.Texture(video);
//with this
    backgroundTexture = new THREE.Texture(canvas); 
```

# iphone - 从 NSDictionary 中检索值

> ID：11639383
> 
> 赞同：0
> 
> 时间：2012-07-24T21:13:05.283
> 
> 标签：iphone, ios, nsdictionary

我正在尝试从我的 NSDictionary 中检索值但是我遇到了错误，我想知道是否有人可以帮助我解决我的问题。

我有 18 个值，并不是所有的值都显示在这里我正在检查，当达到正确的键时，我想获取 NSDictionary 中的值并将其传递给我的 NSString 变量之一。

下面是我正在尝试做的一个例子，但是就像我说我有几个问题一样

```
for (id key in searchData) {
    if ([[searchData objectForKey:key] isEqualToString:@"Code"]) {
        codeSeries = [searchData objectForKey:key];
    }
    else if ([[searchData objectForKey:key] isEqualToString:@"ID"]) {
        IDSeries = [searchData objectForKey:key];
    }

    // ... 
```

但是，当我尝试注销任何值时，它们都会返回`Null`. 我事先已经检查了字典，并且这些值都在那里，所以我认为我上面的代码有问题。

任何帮助将不胜感激。

# 更新

这就是我创建 NSDictionary 的方式

```
//start of mymethod...

NSDictionary *sendSeriesDictionary = [[NSDictionary alloc] init];

    // Keys for sendSeriesDictionary
    NSArray *keys = [NSArray arrayWithObjects:@"Code", @"ID", nil];

    // Objects for keys that are for sendSeriesDictionary
    NSArray *objects = [NSArray arrayWithObjects: [NSNull null], IdString, nil];

    // Add keys and objects to NSDictionary
    sendSeriesDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

[engineRequests SeriesSearch:sendSeriesDictionary]; // this is where I send the NSDictionary over to where I want to read it.

//end of mymethod 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:19:14.477

你在混合键和值吗？

也许你只是想要`codeSeries = [searchData objectForKey:@"Code"];`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T23:32:27.710

你有几个问题。首先，你混合了键和值（就像汤姆说的那样）。其次，您在创建字典的地方可能存在内存泄漏，或者至少是不必要的实例化。

试试这个来创建字典：

```
// Keys for sendSeriesDictionary
NSArray *keys = [NSArray arrayWithObjects:@"Code", @"ID", nil];

// Objects for keys that are for sendSeriesDictionary
NSArray *objects = [NSArray arrayWithObjects: [NSNull null], IdString, nil];

// Add keys and objects to NSDictionary
NSDictionary *sendSeriesDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

检索值可以这样完成：

```
codeSeries = [searchData objectForKey:@"Code"];
IDSeries = [searchData objectForKey:@"ID"]; 
```

在您的第一个循环中，您遍历所有键，获取它们的值，然后再次将它们与键进行比较。这没有任何意义。

# c# - 线程安全数据库访问策略

> ID：11639384
> 
> 赞同：2
> 
> 时间：2012-07-24T21:13:06.220
> 
> 标签：c#, asp.net-mvc, multithreading, dynamics-crm, dynamics-crm-4

假设我有以下代码将用户插入 MVC 应用程序中的 MS Dynamics：

```
public bool CreateContact(string email)
{
    if (crm.contacts.Count(x => x.Email == email) > 0)
         return false; //Email already exist in the Crm. Skip

    var contact = new contact {Email = email};
    crm.AddTocontacts(contact);
    crm.SaveChanges();

    return true;
} 
```

它非常适合阻止用户使用相同的电子邮件地址注册，直到最近我们遇到了 Dynamics 的主要性能问题。

显然，用户得到了巨大的延迟，并且经常三次点击触发这段代码的按钮。

问题是，在 .SaveChanges() 在第一个请求中完成之前，.Count() 在不同的 Http 请求中同时触发。结果，我们看到了具有相同电子邮件地址的联系人。

虽然我已经从客户端添加了一个修复程序，但我想看看这是否也可以在服务器端完成。

什么是使这个线程安全的好策略？

* * *

# 编辑：

虽然在 CRM 上添加约束是这里许多人建议的最佳解决方案，但我目前无法实施该解决方案，因为早在发现此问题之前，CRM 中就已经存在重复项。显然，与 CRM 对话的应用程序不止一个。

由于对锁定和线程的经验很少，我最终做了以下事情：

```
internal static class ContactLock
{
    internal static readonly object Locker = new object();
}

public bool CreateContact(string email)
{
    lock(ContactLock.Locker)
    {
        if (crm.contacts.Any(x => x.Email == email))
            return false; //Email already exist in the Crm. Skip

        var contact = new contact {Email = email};
        crm.AddTocontacts(contact);
        crm.SaveChanges();

        return true;
    }
} 
```

它通过了我的单元测试，似乎没有任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:17:19.050

这种验证通常应该由底层数据存储中的唯一约束支持。如果可以在 CRM 数据库中创建约束，那就应该进行修复。

您的代码片段显示了需要某种锁定的典型位置。支票（带`Count()`）和`SaveChanges()`应由锁保护。我建议您从锁定一个静态对象开始——这意味着它将是一个防止同时注册的全局锁。如果这被证明是一个问题，您可以修改锁定策略。

关于花费大量时间的通话 - 这是您应该解决的问题。向电子邮件列添加唯一约束将强制对其进行索引，这可能会大大提高性能。如果可能（同样，我不知道 CRM），您应该使用 linq 的`Any()`运算符而不是`Count()`检查是否存在。前者可以在第一次命中时中断，而后者则必须继续扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:57:25.117

实体上的预创建插件`systemuser`可以在将每笔交易传递到平台之前检查您的约束（即电子邮件地址是唯一的），并且是推荐/支持的方式来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:51:42.910

您可以在开头添加以下行以在数据库中获取写锁：

```
crm.ExecuteCommand("select ID from contacts with (updlock, holdlock) where EMail = {0}", EMail); 
```

并且您需要围绕该方法包装一个事务。这实现了唯一性并且没有死锁。

# javascript - 如何在两种情况下显示相同的上下文菜单项

> ID：11639387
> 
> 赞同：0
> 
> 时间：2012-07-24T21:13:11.953
> 
> 标签：javascript, firefox-addon, contextmenu, firefox-addon-sdk

**如果用户右键单击选择或**右键单击图像，我想在上下文菜单中显示菜单项。

目前我正在使用此代码，但不幸的是，如果我右键单击作为用户选择的一部分的图像，它会显示菜单项**两次。**

```
contextMenu.Item({
    label: contextMenuItemLabel,
    contentScriptFile: contextMenuItemContentScriptFiles,
    context: contextMenu.SelectionContext(),                
        onMessage: function (posted) { someFunction(posted) }               
});

contextMenu.Item({
    label: contextMenuItemLabel,
    contentScriptFile: contextMenuItemContentScriptFiles,
    context: contextMenu.SelectorContext("img"),
        onMessage: function (posted) { someFunction(posted) }
}); 
```

如果你知道的话，你能告诉我目前的方法是什么吗？我花了很多时间在这上面。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:14:51.427

我不确定是否有更简单的方法，但您可以使用 contentScript 来确定您是否在图像元素/节点上和/或用户是否选择了文本。

```
var cm = require("context-menu");
cm.Item({
  label: "dfhdfg",
  contentScript: 'self.on("context", function (node) {' +
                 '  if(node.nodeName==="IMG"){'+
                 '      //do something to web page or post a message back to addon  '+
                 '  } '+
                 '  else if(window.getSelection().toString()!===""){'+
                 '      //do something to web page or post a message back to addon  '+
                 '  } '+                 
                 '});'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:09:07.433

我去了这个：

```
self.on("context", function (node, data) {
        return ((node.nodeName == "IMG") || 
                (getSelection().length) );
}); 
```

where`getSelection()`是返回当前选择的函数。

谢谢你的帮助。

# html - 如何将 HTML 图片/文本放在 div 的同一行？

> ID：11639388
> 
> 赞同：0
> 
> 时间：2012-07-24T21:13:16.750
> 
> 标签：html, css, templates, layout

我已经使用 HTML/CSS 大约 2 周了。

我无法将我[网站](http://i.imgur.com/aSFtB.png)上的文本放在小狗缩略图旁边，而不是在它下面。

如果我同时浮动文字和图片，它们是并排的，但文字是第一位的，而不是图片。为什么会这样？文本出现在 HTML 中的图片之后。

这是JSFiddle。我以前从未使用过 JSF，所以我希望我做得正确。我不知道为什么 JSF 中的图片不起作用（外部链接的图片（小狗））。

[http://jsfiddle.net/nhv54/](http://jsfiddle.net/nhv54/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:16:56.570

When lining up images and text, I like to use inline or inline-block elements rather than put them inside a block element. [Here is an example](http://jsfiddle.net/BumbleB2na/N8WXm/1/) that should work for your case in particular.

**Html**

```
<p>
    Vertically centered text
    <img src="http://www.suffolkdogday.com/wp-content/themes/sdd/images/dog.png" style="vertical-align:middle">
</p>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:17:19.367

看看这个 [http://jsfiddle.net/nhv54/3/](http://jsfiddle.net/nhv54/3/)

CSS 中的注意事项

```
.pull-left * {
         float: left;    
} 
```

你希望内容在一行上的每个 div 都应该有类“pull-left”

```
<div class = "ProjectsModules pull-left" id = "example1">
  <img src = "http://royalk9.ca/uploads/images/_thumbs/beagle-puppy               .jpg"/>
  <div id = "ProjectsModulesText">
    <h1> Jim </h1>
    <p>
      stuff
    </p>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:26:02.390

你可以使用内联块

我更新了你的 JSFIDDLE

[http://jsfiddle.net/nhv54/16/](http://jsfiddle.net/nhv54/16/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:18:57.003

您还可以`vertical-align: middle;`在文本所在的任何标签上设置，大概是`p`.

# django - 使用 ForeignKey 保存 Django ModelForm

> ID：11639391
> 
> 赞同：11
> 
> 时间：2012-07-24T21:13:34.677
> 
> 标签：django, django-forms, django-views

这可能是一个相当简单的问题，但我似乎无法从 Django Docs 中弄清楚。我正在尝试一次保存两个 ModelForm，其中一个是另一个的 ForeignKey。我不确定如何在视图中编写逻辑以确保它们正确地结合在一起。

**模型.py**

```
class Address(models.Model):
    address = models.CharField(max_length=100)
    city = models.CharField(max_length=50)
    zipcode = models.PositiveIntegerField()

class Store(models.Model):
    name = models.CharField(max_length=100)
    description = models.CharField(max_length=140, blank=True)
    address = models.ForeignKey(Address, null=True) 
```

**表格.py**

```
class CreateStore1Form(forms.ModelForm):
    class Meta:
        model = Store
        exclude = ('address',)

class CreateStore2Form(forms.ModelForm):
    class Meta:
        model = Address 
```

**视图.py**

```
@login_required
def create(request):
    if request.method == "POST":
        form1 = CreateStore1Form(request.POST)
        form2 = CreateStore2Form(request.POST)
        if form1.is_valid() and form2.is_valid():
            store = form1.save(address)
            new_address = form2.save(commit=False)
            new_address.store = store
            mew_address.save()
    else:
        form1 = CreateStore1Form()
        form2 = CreateStore2Form()
    return render(request, 'create.html', locals()) 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T21:42:30.103

Django为这个用例提供了[内联表单集：](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets)

> 内联表单集是模型表单集之上的一个小型抽象层。这些简化了通过外键处理相关对象的情况。

表格.py

```
class AddressForm(forms.ModelForm):
    class Meta:
        model = Address

class StoreForm(forms.ModelForm):
    class Meta:
        model = Store
        exclude = ('address',) 
```

视图.py

```
from django.forms.models import inlineformset_factory

@login_required
def create(request):    
    AddressInlineFormSet = inlineformset_factory(Address, Store, form=AddressForm)

     if request.method == 'POST':
         storeForm = StoreForm(request.POST)

         if storeForm.is_valid():
             new_store = storeForm.save()
             addressInlineFormSet = AddressInlineFormSet(request.POST, request.FILES, instance=new_store)

             if addressInlineFormSet.is_valid():
                addressInlineFormSet.save()
                return HttpResponseRedirect(reverse('some_happy_customer_url'))

             else:
                classificationformset = ClassificationInlineFormSet(request.POST, request.FILES, instance=new_store)
     else:
          addressInlineFormSet = AddressInlineFormSet()
          storeForm = StoreForm()
     return render(request, 'create.html', locals()) 
```

另请参阅此[问题](https://stackoverflow.com/questions/1267810/django-formset-without-instance)以获取更多详细信息。

# android - 在 Android 谷歌地图中绘制 kml 坐标

> ID：11639397
> 
> 赞同：1
> 
> 时间：2012-07-24T21:13:48.040
> 
> 标签：android, google-maps, kml, android-maps

我正在创建一个 Android 应用程序来绘制我们当地的山地自行车道的地图。坐标来自 KML 文件。到目前为止，我已经为 11 个 GeoPoints 绘制并创建了一条路径。但是，我有数百个坐标要映射。这是我到目前为止所做的代码。这行得通，但它非常乏味，我还有数百个工作要做。有没有更好的方法来做到这一点？有没有办法让我的覆盖类从我的 kml 文件中读取坐标？任何其他想法或想法表示赞赏。

```
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
     super.draw(canvas, mapView, shadow);
     Paint paint;
     paint = new Paint();
     paint.setDither(true);
     paint.setColor(Color.RED);
     paint.setStyle(Paint.Style.FILL_AND_STROKE);
     paint.setStrokeJoin(Paint.Join.ROUND);
     paint.setStrokeWidth(2);

     GeoPoint gp1 = new GeoPoint(43311836,-91777756);
     GeoPoint gp2 = new GeoPoint(43311718,-91777699);
     GeoPoint gp3 = new GeoPoint(43311718,-91777699);
     GeoPoint gp4 = new GeoPoint(43311666,-91777627);
     GeoPoint gp5 = new GeoPoint(43311624,-91777541);
     GeoPoint gp6 = new GeoPoint(43311582,-91777455);
     GeoPoint gp7 = new GeoPoint(43311533,-91777369);
     GeoPoint gp8 = new GeoPoint(43311489,-91777249);
     GeoPoint gp9 = new GeoPoint(43311445,-91777136);
     GeoPoint gp10 = new GeoPoint(43311404,-91776996);
     GeoPoint gp11 = new GeoPoint(43311410,-91776891);
     Point pt1 = new Point();
     Point pt2 = new Point();
     Point pt3 = new Point();
     Point pt4 = new Point();
     Point pt5 = new Point();
     Point pt6 = new Point();
     Point pt7 = new Point();
     Point pt8 = new Point();
     Point pt9 = new Point();
     Point pt10 = new Point();
     Point pt11 = new Point();

     Path path1 = new Path();
     Path path2 = new Path();
     Path path3 = new Path();
     Path path4 = new Path();
     Path path5 = new Path();
     Path path6 = new Path();
     Path path7 = new Path();
     Path path8 = new Path();
     Path path9 = new Path();

     projection.toPixels(gp1,pt1);
     projection.toPixels(gp2, pt2);
     projection.toPixels(gp3, pt3);
     projection.toPixels(gp4, pt4);
     projection.toPixels(gp5, pt5);
     projection.toPixels(gp6, pt6);
     projection.toPixels(gp7, pt7);
     projection.toPixels(gp8, pt8);
     projection.toPixels(gp9, pt9);
     projection.toPixels(gp10, pt10);
     projection.toPixels(gp11, pt11);

     path1.moveTo(pt1.x, pt1.y);
     path1.lineTo(pt2.x, pt2.y);

     path2.moveTo(pt3.x,pt3.y);
     path2.lineTo(pt4.x, pt4.y);

     path3.moveTo(pt4.x,pt4.y);
     path3.lineTo(pt5.x,pt5.y);

     path4.moveTo(pt5.x, pt5.y);
     path4.lineTo(pt6.x, pt6.y);

     path5.moveTo(pt6.x, pt6.y);
     path5.lineTo(pt7.x, pt7.y);

     path6.moveTo(pt7.x, pt7.y);
     path6.lineTo(pt8.x, pt8.y);

     path7.moveTo(pt8.x, pt8.y);
     path7.lineTo(pt9.x, pt9.y);

     path8.moveTo(pt9.x,pt9.y);
     path8.lineTo(pt10.x, pt10.y);

     path9.moveTo(pt10.x, pt10.y);
     path9.lineTo(pt11.x, pt11.y);

     canvas.drawPath(path1, paint);
     canvas.drawPath(path2, paint);
     canvas.drawPath(path3, paint);
     canvas.drawPath(path4, paint);
     canvas.drawPath(path5, paint);
     canvas.drawPath(path6, paint);
     canvas.drawPath(path7, paint);
     canvas.drawPath(path8, paint);
     canvas.drawPath(path9, paint);

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:16:03.967

Can't you just read in the KML file and loop through the points?

# uiscrollview - 滚动结束时重置嵌套的 uiscrollview 缩放

> ID：11639399
> 
> 赞同：0
> 
> 时间：2012-07-24T21:13:59.567
> 
> 标签：uiscrollview, nested, zooming, reset

较大 uiscroll 中的嵌套 uiscroll 需要在缩放时在它们离开屏幕时重置缩放级别。当滚动结束但没有运气时，我正在尝试重置所有这些。有任何想法吗？

```
myScrollview = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height)];
myScrollview.pagingEnabled = YES;
myScrollview.scrollEnabled =YES;
myScrollview.clipsToBounds = NO;
myScrollview.indicatorStyle = UIScrollViewIndicatorStyleWhite;
myScrollview.showsHorizontalScrollIndicator = YES;
myScrollview.backgroundColor = [UIColor blackColor];
myScrollview.delegate = self;

NSInteger viewcount=4;
NSArray *images = [NSArray arrayWithObjects:[UIImage imageNamed:@"01.png"],[UIImage imageNamed:@"02.png"],[UIImage imageNamed:@"03.png"],[UIImage imageNamed:@"04.png"],nil];

for (int i = 0; i <viewcount; i++)
{
    CGFloat x = i * self.view.frame.size.width;

    subView = [[UIScrollView alloc]initWithFrame:CGRectMake(x, 0, self.view.frame.size.width, self.view.frame.size.height)];

    [subView setBackgroundColor:[UIColor blackColor]];
    [subView setCanCancelContentTouches:NO];
    subView.clipsToBounds = NO;    // default is NO, we want to restrict drawing within our scrollview
    subView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    aImageView = [[UIImageView alloc ] initWithImage:[images objectAtIndex:i]];
    [self.aImageView setTag:viewcount];
    [subView addSubview:aImageView];
    [subView setContentSize:CGSizeMake(aImageView.frame.size.width, subView.frame.size.height)];
    subView.minimumZoomScale = 1;
    subView.maximumZoomScale = 3;
    subView.delegate = self;
    [subView setScrollEnabled:YES];
    subView.contentSize = aImageView.frame.size;
    [myScrollview addSubview:subView];
}

myScrollview.contentSize = CGSizeMake(self.view.frame.size.width*viewcount,self.view.frame.size.height);

[self.view addSubview:myScrollview]; 
```

}

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
NSLog (@"test");
UIView * view = nil;
view = [subView viewWithTag:0];
//return view;
return [scrollView.subviews objectAtIndex:0]; 
```

}

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
NSLog(@"Did scroll");
[self resetImageZoom]; 
```

}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView { = NSLog(@"Did end decal");

```
[self resetImageZoom]; 
```

}

-(void)resetImageZoom { NSLog(@"重置任何图像缩放");

```
for(UIView *view in [myScrollview subviews]) {
    //if([view isKindOfClass:[UIScrollView class]]) {
    //[(UIScrollView*)view setZoomScale:1.0 animated:NO];
    //}
    view.transform = CGAffineTransformIdentity;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:24:26.070

做到了...

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
NSLog(@"Did end dece");
for (UIView *view in scrollView.subviews) {
    if([view isKindOfClass:[UIScrollView class]]) {
        [(UIScrollView*)view setZoomScale:1.0 animated:NO];
    }
} 
```

}

# linux - 重复键盘输入到另一个终端

> ID：11639403
> 
> 赞同：1
> 
> 时间：2012-07-24T21:14:12.040
> 
> 标签：linux, terminal

我在家里有笔记本电脑桌面设置，并且我已经成功地将我的 Archlinux 安装从一个克隆到另一个。但是，我想避免必须{安装所有新软件，编辑设置，更新}两次，所以我想知道是否可以通过 ssh 从笔记本电脑登录到台式机，在终端中执行某些操作并让 linux 复制所有内容我在 ssh 登录的情况下输入第二个终端？

感谢您的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:35:02.560

您可以在一个终端中输入命令，然后编辑 ~/.bash_history 并将命令保存到脚本中。将脚本复制到具有第二个终端的机器上并执行它。这样做的好处是现在您有一个脚本来保存您的设置，因此您可以在需要时重复使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T23:24:09.040

您可以使用 clusterssh，它会在多个系统中复制您输入的输入。它专为需要在多个系统上以完全相同的方式执行完全相同的任务（例如软件安装或配置命令）的情况而设计。请参阅[http://sourceforge.net/projects/clusterssh/](http://sourceforge.net/projects/clusterssh/)。此外，KDE Konsole 终端也有类似的功能。

# jquery - Jquery keyup or keydown event not working

> ID：11639405
> 
> 赞同：0
> 
> 时间：2012-07-24T21:14:36.603
> 
> 标签：jquery, asp.net-mvc-3, events, autocomplete

I have an autocomplete textbox that cannot fire the key down event.

Here is the code for the auto complete box

```
<script type="text/javascript">
$(document).ready(function () {
    $("#TransFinishedPartNumber").autocomplete({
        source: function (request, response) {
            // define a function to call your Action 
            $.ajax({
                url: '@Url.Action("partLookUp", "Transaction")',

                // term will be the param used by your action method
                data: { term: request.term },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item.pt_part + " " + item.pt_desc1, value: item.pt_part };
                    }))
                    $("#TransFinishedPartNumber").removeClass('acLoading');
                },
                error: function () {
                    $("#TransFinishedPartNumber").removeClass('acLoading');
                }
            })
        },
        minLength: 1, // require at least one character from the user
        search: function () { $(this).addClass('acLoading'); },
    });

}); 
```

Now here is the event javascript it will never fire... not live or bind or anything for that matter... but the crazy thing is the autocomplete box works...

```
<script type="text/javascript">
//Transaction Event handlers and ajax calls
$(document).ready(function () {
    $("#TransFinishedPartNumber").bind("keydown",function (e) {
        $("#TransFinishedPartNumber").addClass("ui-state-default");

    });
    $("#TransFinishedPartNumber").bind("keydown",function (e) {
        $("#TransFinishedPartNumber").removeClass("ui-state-default");

    });
}); 
```

I tried this way also

```
<script type="text/javascript">
//Transaction Event handlers and ajax calls
$(document).ready(function () {
    $("#TransFinishedPartNumber").keydown(function (e) {
        $("#TransFinishedPartNumber").addClass("ui-state-default");

    });
    $("#TransFinishedPartNumber").keydown(function (e) {
        $("#TransFinishedPartNumber").removeClass("ui-state-default");

    });
}); 
```

I changed to this script to be absolutely sure

```
<script type="text/javascript">
//Transaction Event handlers and ajax calls
$(document).ready(function () {
    $("#TransFinishedPartNumber").keydown(function (e) {
        alert(e.which);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:26:19.727

按住键时会不断触发 Keydown 事件。您可能想尝试使用 keyup。

例如，如果您执行以下操作并按住某些东西，它会一直持续下去。实际上每秒很多次：

```
$("body").bind("keydown",function(){
   $("body").append("pizza<br>");
}); 
```

但是keyup只发生一次！

```
$("body").bind("keyup",function(){
   $("body").append("pizza<br>");
}); 
```

因此，由于您的代码有两次 keydown 事件。它每秒多次添加和删除类。

# php - Kohana 3.2 'advance' ORM joins

> ID：11639407
> 
> 赞同：5
> 
> 时间：2012-07-24T21:14:45.953
> 
> 标签：php, orm, kohana, kohana-3

![](../Images/5ddd3c28c82e3120e8098420fc50666f.png)

This is Database ERD that I use in application. I'm using Kohana 3.2\. What I want to achieve is to generate menu for currently logged user. Each user can have many roles, so based on that user should get menu populated with modules (that are in relation with menu and user).

I have achieve this through several foreach loops. Is it possible to do this using ORM ?

*Table 'Modules' represents menu items.

Edit: this is my current code.

```
 $conf_modules = Kohana::$config->load('modules');
        $user_roles = $user->roles->find_all();

        $result     = array();
        $array  = array();

        foreach($user_roles as $user_role)
        {
            $menus   = $user_role->menus->find_all();
            $modules = $user_role->modules->find_all();
        }

        foreach($menus as $menu)
        {
            $m = $menu->modules->find_all();

            $result[]['name'] = $menu->name;

            foreach ($m as $a) 
            {
                foreach ($modules as $module) 
                {
                    if($a->name == $module->name)
                    {
                        foreach ($conf_modules as $key => $value) 
                        {
                            if($module->name == $key)
                            {
                                $array = array(
                                    'module_name' => $module->name,
                                    'text'        => $module->display_desc,
                                    'url'         => $value['url'],
                                );
                            }

                        }

                    }

                }
                array_push($result, $array);
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T23:29:04.810

我认为这应该是一个很好的解决方案。

```
 $user = Auth::instance()->get_user();

        $user_roles = $user->roles->find_all();

        $conf_modules = Kohana::$config->load('modules');

        $role_modules = ORM::factory('module')
            ->join('roles_modules')
            ->on('roles_modules.module_id','=','module.id')
            ->where('role_id','IN',$user_roles->as_array(NULL,'id'))
            ->find_all();

        $role_menus = ORM::factory('menu')
            ->join('roles_menus')
            ->on('roles_menus.menu_id','=','menu.id')
            ->where('role_id','IN',$user_roles->as_array(NULL,'id'))
            ->find_all();

        $result = array();

        foreach ($role_menus as $role_menu) 
        {
            $menu_modules = $role_menu->modules->find_all();

            if ( ! isset($result[$role_menu->name]))
                $result[$role_menu->name] = array('name' => $role_menu->name);

            foreach ($menu_modules as $menu_module) 
            {
                foreach ($role_modules as $role_module) 
                {
                    if($menu_module->name == $role_module->name)
                    {
                        foreach ($conf_modules as $key => $value) 
                        {
                            if ($key == $role_module->name)
                            {
                                $result[$role_menu->name]['modules'][]['data'] = array('name' => $role_module->display_desc, 'url' => $value['url']);
                            }

                        }

                    }
                }   
            }   
        }

        return array_values($result); 
```

# rest - 设计REST API时的分页请求策略

> ID：11639409
> 
> 赞同：1
> 
> 时间：2012-07-24T21:14:57.210
> 
> 标签：rest, pagination

我必须决定从列表中返回结果的分页策略。特别是，我正在考虑两种方法：

列出从 50 到 75 的结果的示例：

## 使用查询参数：`GET /items?start=50&limit=25`

### 优点

*   被广泛使用的
*   可收藏

### 缺点

*   您可能需要对 URL（“&”字符）进行编码以将其放置在 XML 响应中（符合 HATEOAS），在这种情况下，URL 将不是很人性化。

## 嵌入在 URL 上（页面作为子资源）：`GET /items/from-page-50-limited-to-25`

### 优点

*   根据需要人类可读（不是必需的，但似乎是一件好事）
*   无需编码

### 缺点

*   构建 URL 客户端有点困难
*   页面并不是真正的item的子资源，而是listing items策略的子产品

在您看来，哪种是最佳的 REST 实践方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:33:29.393

我相信你通过研究指出了最佳实践，并说你们中的第一个选项被广泛使用。这也是我认为最符合查询组件的使用方式的选项。在[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)中，它指出

> 查询组件包含非分层数据，这些数据与路径组件（第 3.3 节）中的数据一起用于标识资源

（来自[REST 资源 url 中的查询字符串](https://stackoverflow.com/questions/3821663/querystring-in-rest-resource-url)）。

另一种看待它的方式是，您的第二个选项是说 that `/items/from-page-50-limited-to-25`is an unity resource/entity 以及 is `/items/from-page-1-limited-to-25`. 对我来说，更自然地认为这`/items`是我可以选择收藏的独特资源。

# c# - Adding Key, Value XML Element using C#

> ID：11639412
> 
> 赞同：1
> 
> 时间：2012-07-24T21:15:13.477
> 
> 标签：c#, xml, winforms, linq

I have a problem with adding an element to an XML file using C#. I have my `App.config` files somewhere in my diff directory. So I am using LINQ to retrieve the values I want and to set the value from TextBoxes.

```
<appSettings>
    <add key="Something" value="false" />
    <add key="UserName" value="user0001" />
    <add key="Password" value="123456" />
    <add key="Environment" value="" />
    <add key="DBUserName" value="DBname23" />
    <add key="DBPassword" value="12345678" />
</appSettings> 
```

The above is my XML file. I am able to retrieve the values of `UserName` and `Password` and set it with the encrypted ones. The way I am doing is shown below:

```
var doc1 = XDocument.Load(appConfigFile1);

var list1 = from appNode in doc1.Descendants("appSettings").Elements()
            where appNode.Attribute("key").Value == "UserName"
            select appNode;
var list2 = from appNode in doc1.Descendants("appSettings").Elements()
            where appNode.Attribute("key").Value == "Password"
            select appNode;
var list3 = from appNode in doc1.Descendants("appSettings").Elements()
            where appNode.Attribute("key").Value == "DBUserName"
            select appNode;
var list4 = from appNode in doc1.Descendants("appSettings").Elements()
            where appNode.Attribute("key").Value == "DBPassword"
            select appNode;
var element1 = list1.FirstOrDefault();
var element2 = list2.FirstOrDefault();
var element3 = list3.FirstOrDefault();
var element4 = list4.FirstOrDefault();
element1.Attribute("value").SetValue(txtbox1);
element2.Attribute("value").SetValue(txtbox2);
element3.Attribute("value").SetValue(txtbox3);
element4.Attribute("value").SetValue(txtbox4);
doc1.Save(appConfigFile1); 
```

The requirements are such that if one of the elements from the XML file is deleted, I should be able to create a same element with key and value.

Example: Please compare the above xml with the below:

```
<appSettings>
    <add key="HasUI" value="false" />
    <add key="Password" value="123456" />
    <add key="Environment" value="" />
    <add key="DBUserName" value="DBname23" />
    <add key="DBPassword" value="12345678" />
</appSettings> 
```

Above the element Username is missing. So how can I create an XML element like `<add key="UserName" value="" />` and set that to that same place in XML file?

The error I am getting when I load the XML file in C# is NullReferenceException.

Please help me.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:45:59.243

看在上帝的份上，任何你不止一次做的事情都应该是一个函数！

```
function UpdateOrCreateAppSetting(XMLDocument doc, string key, string value)
{
    var list = from appNode in doc.Descendants("appSettings").Elements()
            where appNode.Attribute("key").Value == key
            select appNode;
    var e = list.FirstOrDefault();

    // If the element doesn't exist, create it
    if (e == null) {
        e = doc.CreateElement("add")
        e.Attributes.Append("key", key);
        e.Attributes.Append("value", value);
        doc.Descendants("appSettings").AppendChild(e);

    // If the element exists, just change its value
    } else {
        e.Attribute("value").SetValue(value);
    }
} 
```

现在调用该函数四次，你就很好了。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:22:22.920

如果您只想在 app.config 不符合您的预期时设置默认值，您可以执行以下操作：

```
var doc1 = XDocument.Load(appConfigFile1);

                var list1 = from appNode in doc1.Descendants("appSettings").Elements()
                            where appNode.Attribute("key").Value == "UserName"
                            select appNode;
                var list2 = from appNode in doc1.Descendants("appSettings").Elements()
                            where appNode.Attribute("key").Value == "Password"
                            select appNode;
                var list3 = from appNode in doc1.Descendants("appSettings").Elements()
                            where appNode.Attribute("key").Value == "DBUserName"
                            select appNode;
                var list4 = from appNode in doc1.Descendants("appSettings").Elements()
                            where appNode.Attribute("key").Value == "DBPassword"
                            select appNode;
                // the values of missing elements are null so you can use the "??" operator                                               //hat put something else when you have null
                var element1 = list1.FirstOrDefault() ?? "your default value";
                var element2 = list2.FirstOrDefault() ?? "your default value";
                var element3 = list3.FirstOrDefault() ?? "your default value";
                var element4 = list4.FirstOrDefault() ?? "your default value";
                element1.Attribute("value").SetValue(txtbox1);
                element2.Attribute("value").SetValue(txtbox2);
                element3.Attribute("value").SetValue(txtbox3);
                element4.Attribute("value").SetValue(txtbox4);
                doc1.Save(appConfigFile1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:22:56.450

NullReference 即将到来

`element1.Attribute("value").SetValue(txtbox1);`

声明，不是吗？上面的 FirstOrDefault 使 element1 为空。我认为您想在访问 Attribute 属性之前测试 null ；未能通过该测试，然后您可以提供您的默认值。

# mysql - 需要数据库设计建议

> ID：11639424
> 
> 赞同：1
> 
> 时间：2012-07-24T21:16:07.147
> 
> 标签：mysql, sql, database, data-modeling

我有一张`Questions`看起来像这样的桌子

![在此处输入图像描述](../Images/b0febe8d1d43d34536c013bf9a1805b2.png)

如您所见，有 2 个 id 行几乎相同：`id`, `question_id`. `id`- 是自动递增的，每个问题的唯一 ID，并且`question_id`- 例如，课程 1 第 1 课有 5 个问题，例如：问题 1、2、3、4、5。课程 1 第 2 课有 3 个问题：1、2、 3等。换句话说，它就像每个唯一组合的自动增量`course_id`字段`lesson_id`。我决定手动添加`question_id`基于`course_id`，`lesson_id`以保持数据库结构的可读性并且不弄乱数据库，并在`course-lesson-question unique id`值之间添加一堆关联表。

# 第一个问题是

您如何看待，这是一个好的解决方案吗？你会如何设计这个数据库？

* * *

问题是，当我想用​​ given 插入新问题时`course_id`，`lesson_id`该`id`字段将自动递增，但我得到了

# 第二个问题

如何获得`question_id`基于唯一组合`course_id`的最后一列值。`lesson_id`例如，如果第 1 课第 2 课有 3 个问题：1、2、3，并且我想添加第 4 个问题（正如我所说，在当前的数据库设计中我`question_id`手动插入值），我怎么知道，最后一个问题当然第 1 课第 2 课是第 3 课，并插入新问题 (last_number=3)++=4?

# 更新

情况有点复杂，但我会尝试解释：

它是在线教程网站。有不同的课程，每门课程都有很多课程。现在我正在设计问答部分，教师发布问题，用户得到专门的问题。

[全尺寸图片在这里](http://screencast.com/t/0DxyNNZL)

![在此处输入图像描述](../Images/9495308d55ffe8790da3da11e189b7aa.png)

现在，该表`questions`专用于课程>基于课程的问题。

`question_from_to_assoc`- 用于在问题作者和接收者用户之间创建关联。例如 admin (id=.) 向某个 id=5 的用户发送问题。

`qa_assoc`- 问答关联表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:13:34.093

首先，这不是最佳的数据库设计。您的架构是非规范化的，这不是很好。

回答你的第一个问题。我会将课程、课程、问题和作者拆分为**单独的表格**。*然后我会在Course*、*Lesson*和*Question*的主键旁边添加一个数字字段。PK 只会保证一行的唯一性，但是 number 字段会是你的课程号、题号等。比如用 PK 来表示一个题号在我看来不是一个好主意，因为它应该保持不变. 例如，如果您的问题被更改为字母而不是数字，则您的 PK 将不得不更改，这可能会破坏参照完整性。

之后，我会在问题编号和 FK 上添加一个唯一约束，例如 [question_no, course_id] 以确保同一课不能有两个问题 1。*教训*也是一样。*Course*将对 course_no 有唯一的约束。

最后，要根据课程自动增加问题编号，我会使用一个触发器，它会执行以下操作：

```
CREATE TRIGGER tr_question_number BEFORE INSERT ON questions
FOR EACH ROW BEGIN
   SET NEW.question_no = (SELECT MAX(question_no)+1 FROM questions WHERE lesson_id = NEW.lesson_id FOR UPDATE)
END; 
```

这个触发器会将问题编号字段设置为最新值+1。*FOR UPDATE*子句非常重要，因为它会锁定行以避免并发插入得到相同的编号。

触发器只是一个草稿，但这只是我会做的事情的大致概念。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:25:56.103

**问题 1：**不。我只会使用该问题表中的 ID 列作为您的唯一标识符并删除该 question_id 字段。我的设计：

```
 create table author (
   id int(11) NOT NULL auto_increment,
   name varchar(256)
 ) engine=innodb;

 create table course (
   id int(11) not null auto_increment,
   primary key(id),
   name varchar(256)
 ) engine=innodb;

create table lesson (
  id int(11) not null auto_increment,
  primary key(id),
  name varchar(256),
  course_id int(11) NOT NULL,
  FOREIGN KEY(course_id) references course(id)
) engine=innodb;

create table question(
   id int(11) not null auto_increment,
   primary key(id),
   question_text text,
   correct_answer text,
   lesson_id int(11) NOT NULL,
   foreign key(lesson_id) references lesson(id),
   author_id int(11) not null,
   FOREIGN KEY(author_id) REFERENCES author(id)
) engine=innodb; 
```

**问题2：**不要那样做。如果我有 course_id 1、第 2 课和第 11 题怎么办？该 ID 列与 course_id 1，第 21 课，问题 1 相同。

顺便说一句，我真的希望你使用外键。由于它说您使用的是 mysql，因此请务必将 Innodb 存储引擎与这些表一起使用，以便您可以使用外键来强制引用完整性。

高效查询此数据库、避免所谓的唯一值冲突、避免将来出现严重的性能问题以及数据重复的关键是以规范化的方式设计数据库。我上面的示例已标准化并避免了数据重复，以及不会导致您在上面定义的唯一键的复合键方案。最好使用 MySQL 内置的功能，而不是尝试重新发明轮子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T21:26:49.283

我个人会设置不同的：

```
Question table:
id int, -- PK auto-increment
content varchar(50),
answer varchar(50),
authorid int

Course table:
id int, -- PK auto-increment
name varchar(50)

Lesson Table: 
id int, -- PK auto-increment
name varchar(50)

Question_Course_Lesson join table: 
questionid int, -- PK
courseid int,  -- PK
lessonid int   -- PK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:26:17.643

1.您应该尝试摆脱`question_id`并仅将自动增量保留`id`为主键。否则插入会很乱。

> 问题是，现在当我想插入具有给定 course_id 的新问题时，lesson_id id 字段将自动递增。

我不明白这个问题 - auto_increment 字段通常会这样做:)。

2.你可以使用

```
SELECT MAX(question_id) WHERE course_id = <something> AND lesson_id = <some_other_thing> 
```

获取给定 course_id 和 course_id 的当前最大 id。但是您必须锁定表（如果表是 InnoDB，则使用 FOR UPDATE 和事务）并在插入新记录后解锁它以确保它保持一致。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T21:37:48.143

**第一个问题。** 实际上，我可以理解为什么您可能需要“冗余” ID。例如，它可能在向考生提出问题的过程中发挥作用。但是，它肯定不需要绑定到行中其他列的值，自动生成的 id 无论如何都能保证唯一性。

**第二个问题。** 使用 onInsert 触发器。这是防止碰撞的最佳方法。

# c# - 如何在后台加载所有选项卡

> ID：11639425
> 
> 赞同：2
> 
> 时间：2012-07-24T21:16:10.307
> 
> 标签：c#, wpf

我是 WPF（以及一般计算机科学）的新手，我的老板给了我一个小项目，其中有 5 个选项卡，每个选项卡都转到不同的站点。登录后，用户被定向到第一个选项卡的网站。在后台，其他 4 个选项卡应该在后台加载。

每个都有以下名称：“tabItem1”、“tabItem2”、“tabItem3”、“tabItem4”到“tabItem5” 每个内部都有一个最多“webBrowser5”。

我认为我必须使用线程在后台加载页面，但我不确定如何实现它。我尝试在 MainWindow 中创建 4 个不同的线程，例如：

```
public MainWindow()
{
     InitializeComponent();

     Thread thread1 = new Thread(Update1);
     thread1.SetApartmentState(ApartmentState.STA);
     thread1.Start();

     Thread thread2 = new Thread(Update2);
     thread2.SetApartmentState(ApartmentState.STA);
     thread2.Start();

     Thread thread3 = new Thread(Update3);
     thread3.SetApartmentState(ApartmentState.STA);
     thread3.Start();

     Thread thread4 = new Thread(Update4);
     thread4.SetApartmentState(ApartmentState.STA);
     thread4.Start();
}

private void Update1()
    {
      this.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
          (ThreadStart)delegate()
              {
                tabItem2.Focus();
              }
          );
    }

private void Update2()
    {
      this.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
          (ThreadStart)delegate()
              {
                tabItem3.Focus();
              }
          );
    }

//...Goes up to Update4 
```

这似乎只关注最后一个线程，也没有在后台进行。我感谢任何指导和帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:21:00.233

这就是调度程序正在做的事情，在主线程上运行。您告诉主线程设置焦点，因为对象在主线程上。

**问题：**

答案在于为什么你必须这样做。**除了创建它的线程之外，您不能在任何其他线程中对 Windows 控件进行操作。**您也不能在一个线程中创建控件，并将其设置为另一个线程中控件的子项。

这对你意味着什么……是你老板要求你做的事情不能做。你唯一能在后台做的就是计算算法。充其量，您将能够加载*数据*、对*数据*进行操作和解释*数据*，但如果您想将该数据显示在或转换为 Windows 控件，则必须在主线程上执行此操作。

**唯一的解决方案：**

但是，您可以有多个 UIThreads。这意味着您可以创建多个`Window`s. 因此，必须做的替代方法是为每个选项卡内容在单独的线程上创建窗口，然后在每个选项卡上托管线程窗口。

[线程窗口](http://msdn.microsoft.com/en-us/library/ms741870.aspx)

[主机进程窗口](http://www.equals-forty-two.com/2010/11/19/host-a-process-window-in-wpf/)

[跨线程托管](http://blogs.msdn.com/b/changov/archive/2009/10/26/hosting-wpf-ui-cross-thread-and-cross-process.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T22:00:15.060

我不同意 Xaade，我认为您可以只使用以下代码来做您需要的事情：

```
Dispatcher.BeginInvoke((Action)(() =>
{
        //  load the pages
}), DispatcherPriority.Background, null); 
```

该代码将在后台执行，因此您可以在那里加载所需的每个 webBrowser。

您只需要将 DispatcherPriority 指定为`Background`.

# django - 按对象 ID 过滤 ForeignKey

> ID：11639426
> 
> 赞同：1
> 
> 时间：2012-07-24T21:16:13.117
> 
> 标签：django, django-admin, foreign-keys, limit-choices-to

我有一个 CarType，在我的 models.py 中有一个 ForeignKey BodyMaterial：

```
class BodyMaterial(models.Model):
    location                = models.ForeignKey('CarType')
    name                    = models.CharField(max_length=255)

class CarType(models.Model):
    name                    = models.CharField(max_length=255)
    default_body_material   = models.ForeignKey(BodyMaterial, null = True, blank = True, default = "", limit_choices_to={'location__exact': 1}) 
```

BodyMaterial 是我的 admin.py 中 CarType 中的内联：

```
class BodyMaterial_Inline(admin.StackedInline):
    model = BodyMaterial
    extra = 1

class CarType_Admin(admin.ModelAdmin):
    inlines = [BodyMaterial_Inline]

admin.site.register(CarType, CarType_Admin) 
```

我想过滤 default_body_material 的 ForeignKey 以仅显示相关的 BodyMaterials（出现/添加在同一管理页面上的那些）。例如，我创建了一个 2 座 CarType，并在同一页面中添加了一些 BodyMaterials。然后我创建了一个 SVU CarType 和一些其他的 BodyMaterials。当我回到 2 座 CarType 时，我只想在 default_body_material 的下拉菜单中看到相关的 BodyMaterials。

我尝试在 id 上使用 limit_choices_to 进行过滤。所以我使用 post_init 这样做是因为对象的 id 在运行时确定：

```
def setID(**kwargs):
    instance = kwargs.get('instance')
    default_body_material = instance._meta.get_field_by_name('default_body_material')[0]
    default_body_material.limit_choices_to = {'location__exact': instance.id}

post_init.connect(setID, CarType) 
```

不幸的是，这无济于事。我错过了什么？是否有更好的理由为我的目的过滤 ForeignKey（这可能是非常基本的）？

请注意，此问题仅适用于管理界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:05:42.950

只需使用自定义`ModelForm`：

```
class CarTypeAdminForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(CarTypeAdminForm, self).__init__(*args, **kwargs)
        # Can't limit it until instance has been saved at least once
        if self.instance.pk:
            self.fields['default_body_material'].queryset = \
                self.fields['default_body_material'].queryset \
                    .filter(location=self.instance)

class CarTypeAdmin(admin.ModelAdmin):
    form = CarTypeAdminForm
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T23:47:52.557

您想查看为您的内联覆盖查询集函数。

# firefox - open websocket connection firefox addon

> ID：11639427
> 
> 赞同：5
> 
> 时间：2012-07-24T21:16:26.803
> 
> 标签：firefox, firefox-addon, websocket

Is it possible for a firefox addon to establish a websocket connections?

When I try:

```
var wsUri = "ws://echo.websocket.org/";
var ws = gBrowser.contentWindow.window.WebSocket ||
         gBrowser.contentWindow.window.MozWebSocket;    
var websocket = new ws(wsUri); 
```

In the Error Console the message says

> Error: Firefox can't establish a connection to the server at ws://echo.websocket.org/.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T00:43:31.450

目前，似乎唯一的选择是通过`PageWorker`. 在这个网站上有一个如何做到这一点的例子：

[http://austinhartzheim.me/blog/4/websockets-firefox-sdk-addons/](http://austinhartzheim.me/blog/4/websockets-firefox-sdk-addons/)

# codeigniter - 编辑助手中的变量集时间接修改codeigniter模型中的重载属性

> ID：11639435
> 
> 赞同：2
> 
> 时间：2012-07-24T21:17:00.367
> 
> 标签：codeigniter, error-handling, models, helper

我在我的 codeigniter 设置中设置了一个登录助手。

我得到了 codeigniter 实例，调用了一个模型，并设置了一些变量。

```
$CI =& get_instance(); 
```

然后我使用`$CI->load->vars($data);`使变量在我的所有模型和视图中可用。

其中一个变量如下`$data->errors=array();`

这个想法是，如果我的模型中有错误，我可以设置一个错误，例如`if($query->num_rows()!='1'){$this->error[]="This message does not exist !";}`

然后在我的控制器中，我可以检查此变量是否已填充以及是否显示错误。

然而，这抛出了错误

> 消息：间接修改重载属性 Mail_model::$error 无效

这个错误超出了我的想象。我已经对该错误进行了一些研究，但无法找到任何适用解决方案的雷曼术语解释。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:24:40.113

您已将 $CI 变量加载为对其自身的引用 - 使用 =&

然后您通过引用加载了变量 - 因为您使用了 $CI->load->vars()

无需将 $data 加载到 $CI 引用中。

如果您想在模型和控制器之间传递消息（例如错误消息） - 那么尝试使用全局变量可能不是最好的方法。

CodeIgniter 的最佳选择是[Flashdata——](http://codeigniter.com/user_guide/libraries/sessions.html)这正是 flashdata 存在的确切场景。您可以在 CI 用户指南中阅读所有相关[信息](http://codeigniter.com/user_guide/)。

# ruby - 我怎样才能用只需要的库来构建一个 Ruby 解释器？

> ID：11639436
> 
> 赞同：0
> 
> 时间：2012-07-24T21:17:06.350
> 
> 标签：ruby

如何构建一个只有 Core API（不包括 Process 类）而没有标准库的 Ruby 解释器？

它不应包括 irb 或其他任何内容。具有必要组件的纯解释器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:34:59.133

我不知道如何构建它，但 matz（ruby 的创建者）发布了一个项目，提供了一个名为 mruby 的最小版本的 ruby​​：[https ://github.com/mruby/mruby/](https://github.com/mruby/mruby/)

# azure - Azure ServiceBus 主题订阅上的 SqlFilter 未过滤

> ID：11639437
> 
> 赞同：1
> 
> 时间：2012-07-24T21:17:10.283
> 
> 标签：azure, servicebus

我有一个 WinRT 应用程序，我正在使用适用于 Windows 8 的 Windows Azure 工具包。我有一个设置，我希望订阅的客户忽略发布到 ServiceBus 主题的消息，如果他们是发起者，或者如果消息比他们的订阅开始时更旧。

在我的 BrokeredMessage 的属性中，我添加了 2 项来涵盖这些场景：

```
message.Properties["Timestamp"] = DateTime.UtcNow.ToFileTime();
message.Properties["OriginatorId"] = clientId.ToString(); 
```

clientId 是一个 Guid。

订阅方如下所示：

```
// ti is a class that contains a Topic, Subscription and a bool as a cancel flag.

string FilterName = "NotMineNewOnly";

// Find or create the topic.
if (await Topic.ExistsAsync(DocumentId.ToString(), TokenProvider))
{
    ti.Topic = await Topic.GetAsync(DocumentId.ToString(), TokenProvider);
}
else
{
    ti.Topic = await Topic.CreateAsync(DocumentId.ToString(), TokenProvider);
}

// Find or create this client's subscription to the board.
if (await ti.Topic.Subscriptions.ExistsAsync(ClientSettings.Id.ToString()))
{
    ti.Subscription = await ti.Topic.Subscriptions.GetAsync(ClientSettings.Id.ToString());
}
else
{
    ti.Subscription = await ti.Topic.Subscriptions.AddAsync(ClientSettings.Id.ToString());
}

// Find or create the subscription filter.
if (!await ti.Subscription.Rules.ExistsAsync(FilterName))
{
    // Want to ignore messages generated by this client and ignore any that are older than Timestamp.
    await ti.Subscription.Rules.AddAsync(FilterName, sqlFilterExpression: string.Format("(OriginatorId != '{0}') AND (Timestamp > {1})", ClientSettings.Id, DateTime.UtcNow.ToFileTime()));
}

ti.CancelFlag = false;

Topics[boardId] = ti;

while (!ti.CancelFlag)
{
    BrokeredMessage message = await ti.Subscription.ReceiveAndDeleteAsync(TimeSpan.FromSeconds(30));

    if (!ti.CancelFlag && message != null)
    {
        // Everything gets here!  :(
    } 
```

我找回了一切——所以我不确定我做错了什么。解决订阅过滤器问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T22:09:03.393

当您创建订阅时，默认情况下您会获得“MatchAll”过滤器。在上面的代码中，您只是添加了过滤器，因此除了“MatchAll”过滤器之外还应用了它，因此所有消息都会被接收。创建订阅后，只需删除 $Default 过滤器即可解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:21:32.327

排除故障的最佳方法是使用来自 Paolo Salvatori [http://code.msdn.microsoft.com/windowsazure/Service-Bus-Explorer-f2abca5a的 Service Bus Explorer](http://code.msdn.microsoft.com/windowsazure/Service-Bus-Explorer-f2abca5a)

他已经写了一些关于它的博客文章，例如[http://windowsazurecat.com/2011/07/exploring-topics-and-queues-by-building-a-service-bus-explorer-toolpart-1/](http://windowsazurecat.com/2011/07/exploring-topics-and-queues-by-building-a-service-bus-explorer-toolpart-1/)

Windows Azure SDK 1.7 确实具有内置功能，但 Service Bus Explorer Standalone 版本仍然更好，请参阅此处的比较。

[http://soa-thoughts.blogspot.com.au/2012/06/visual-studio-service-bus-explorer.html](http://soa-thoughts.blogspot.com.au/2012/06/visual-studio-service-bus-explorer.html)

HTH您的调试...

# visual-studio - “构建部署包”不见了！Azure SDK 的错？

> ID：11639441
> 
> 赞同：3
> 
> 时间：2012-07-24T21:17:24.137
> 
> 标签：visual-studio, azure-sdk-.net

位于 Web 项目的 Visual Studio 上下文菜单（我使用 2010）中的“清理”和“发布”之间的“构建部署包”选项已消失。

我怀疑 Azure SDK 或这背后相关的东西，因为它改变了发布对话框，而我办公室中另一台没有安装它的机器仍然可以选择。

有人知道如何取回它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:34:20.057

我设法通过从控制面板卸载“Microsoft Web Publish”来取回“Build Deployment Package”。

# ios - 如何计算二进制校验和？

> ID：11639442
> 
> 赞同：1
> 
> 时间：2012-07-24T21:17:25.453
> 
> 标签：ios, checksum

我正在开发一个硬件通信应用程序，我从外部硬件发送或需要数据。我已经完成了所需的数据部分。

我刚刚发现我可以使用一些帮助来计算校验和。

一个包被创建为 NSMutableData，然后在发送之前将其转换为字节数组。一个包看起来像这样：

0x1E 0x2D 0x2F 数据校验和

我在想我可以将十六进制转换为二进制来一一计算。但我不知道这是否是个好主意。如果这是唯一的方法，或者有一些我不知道的内置函数，请告诉我。任何建议将不胜感激。

顺便说一句，我刚刚从其他人的帖子中找到了 C# 的代码，我会尝试让它在我的应用程序中工作。如果可以的话，我会和你分享。仍然有任何建议将不胜感激。

```
package org.example.checksum;

public class InternetChecksum {

  /**
   * Calculate the Internet Checksum of a buffer (RFC 1071 -     http://www.faqs.org/rfcs/rfc1071.html)
   * Algorithm is
   * 1) apply a 16-bit 1's complement sum over all octets (adjacent 8-bit pairs [A,B], final odd length is [A,0])
   * 2) apply 1's complement to this final sum
   *
   * Notes:
   * 1's complement is bitwise NOT of positive value.
   * Ensure that any carry bits are added back to avoid off-by-one errors
   *
   *
   * @param buf The message
   * @return The checksum
   */
  public long calculateChecksum(byte[] buf) {
int length = buf.length;
int i = 0;

long sum = 0;
long data;

// Handle all pairs
while (length > 1) {
  // Corrected to include @Andy's edits and various comments on Stack Overflow
  data = (((buf[i] << 8) & 0xFF00) | ((buf[i + 1]) & 0xFF));
  sum += data;
  // 1's complement carry bit correction in 16-bits (detecting sign extension)
  if ((sum & 0xFFFF0000) > 0) {
    sum = sum & 0xFFFF;
    sum += 1;
  }

  i += 2;
  length -= 2;
}

// Handle remaining byte in odd length buffers
if (length > 0) {
  // Corrected to include @Andy's edits and various comments on Stack Overflow
  sum += (buf[i] << 8 & 0xFF00);
  // 1's complement carry bit correction in 16-bits (detecting sign extension)
  if ((sum & 0xFFFF0000) > 0) {
    sum = sum & 0xFFFF;
    sum += 1;
  }
}

// Final 1's complement value correction to 16-bits
sum = ~sum;
sum = sum & 0xFFFF;
return sum;

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T22:02:50.073

When I post this question a year ago, I was still quite new to Objective-C. It turned out to be something very easy to do.

The way you calculate checksum is based on how checksum is defined in your communication protocol. In my case, checksum is just the sum of all the previous bytes sent or the data you want to send.

So if I have a NSMutableData *cmd that has five bytes:

0x10 0x14 0xE1 0xA4 0x32

checksum is the last byte of 0x10+0x14+0xE1+0xA4+0x32

So the sum is 01DB, checksum is 0xDB.

Code:

```
//i is the length of cmd
- (Byte)CalcCheckSum:(Byte)i data:(NSMutableData *)cmd
{   Byte * cmdByte = (Byte *)malloc(i);
    memcpy(cmdByte, [cmd bytes], i);
    Byte local_cs = 0;
    int j = 0;
    while (i>0) {
        local_cs += cmdByte[j];
        i--;
        j++;
    };
    local_cs = local_cs&0xff;
    return local_cs;
} 
```

To use it:

```
Byte checkSum = [self CalcCheckSum:[command length] data:command]; 
```

Hope it helps.

# php - 我应该使用 symofny2.0.15 为 Doctrine 2.1.7 指定哪个版本的 gedmo？

> ID：11639444
> 
> 赞同：1
> 
> 时间：2012-07-24T21:17:46.653
> 
> 标签：php, symfony, doctrine, doctrine-orm

我的 Bash 拒绝处理数据库更新，因为我已经为 S2 安装了 gedmo。我想知道是不是因为我安装了错误的 Gedmo 版本。

我有 Doctrine 2.1.7，我需要安装 gedmo-doctrine-extensions 的 2.1.x 版本，如何将其指定到我的 deps 文件？

现在我有

> [gedmo-doctrine-extensions] git=http://github.com/l3pp4rd/DoctrineExtensions.git

但是当尝试输入教义：架构：更新 --force 命令时，我在（我的路径）\vendor\gedmo-doctrine-extension\lib 中找不到“类 'Doctrine\Common\Persistence\Mapping\Driver\DefaultFileLocator' \Gedmo\Mapping\ExtensionMetadataFactory.php 第 170 行"

所以我假设这是由于我使用的 gedmo 版本，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:29:30.017

我基于 Symfony 2.0.15 和 Doctrine 2.1.7 为我的项目使用 2.3.0 版本

```
[gedmo-doctrine-extensions]
    git=http://github.com/l3pp4rd/DoctrineExtensions.git
    version=v2.3.0 
```

无论如何，您可以查看[http://github.com/l3pp4rd/DoctrineExtensions.git](http://github.com/l3pp4rd/DoctrineExtensions.git)以查看您想要/需要的版本并将其添加到您的 deps 文件中的版本选项下。

PS 我想你已经知道了，但是当你将版本信息添加到你的 deps 文件中时，你需要运行供应商脚本，或者如果你正在使用 composer 使用它来更新依赖项。

# image - 在matlab中改变图像的颜色

> ID：11639445
> 
> 赞同：0
> 
> 时间：2012-07-24T21:17:47.203
> 
> 标签：image, matlab

在 matlab 中，我将图像的某些像素的颜色更改为黑色，但颜色变为蓝色。我无法理解这个问题。我的代码如下。任何人都可以帮助我吗？

```
img = imread('test.png');
for i = 1 : 200
  for j = 1: 640
    img(i,j) = 0;
  end 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:27:05.733

也许你有一个 RGB 图像，所以你必须写：

```
img(i,j,:) = 0 
```

您还应该检查以下输出：`class(img)`和`size(img)`

# hash - 前 6 个字符相同的 4 个以上文件的 Dos 8.3 文件名哈希是多少？

> ID：11639446
> 
> 赞同：2
> 
> 时间：2012-07-24T21:17:58.473
> 
> 标签：hash, dos

例如：AB5C8A~1

据我了解，前两个字符来自常规文件名。有人可以指导我了解 DOS 如何确定第三到第六个字符的数学原理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:23:09.110

从[wiki](https://en.wikipedia.org/wiki/8.3_filename)来看，没有强制算法从长文件名创建 8.3 名称，但他们确实*尝试*遵循约定。使用您示例中的文件名，它似乎使用选项 4，其中使用文件名的哈希来生成 4 个十六进制数字

我找到了一些代码，但我不知道它是否与微软使用的相同......

从[这个网站](http://www.rtems.com/)获得许可

所有*（一些？）*源可用于他们的系统[在这里](http://fidelio.qi-hardware.com/~xiangfu/milkymist-firmware/milkymist/rtems/cpukit/libfs/src/)

```
/* msdos_short_hex_number --
 *     Routine to set the hex number in the SFN.
 *
 * PARAMETERS:
 *     name      - name to change
 *     num       - number to set
 *
 * RETURNS:
 *     nothing
 *
 */
static void
msdos_short_name_hex(char* sfn, int num)
{
    static const char* hex = "0123456789ABCDEF";
    char* c = MSDOS_DIR_NAME(sfn);
    int   i;
    for (i = 0; i < 2; i++, c++)
      if ((*c == ' ') || (*c == '.'))
        *c = '_';
    for (i = 0; i < 4; i++, c++)
      *c = hex[(num >> ((3 - i) * 4)) & 0xf];
    *c++ = '~';
    *c++ = '1';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:26:09.970

Sean Cheshire 在他的回答中提供了很好的参考。但这些规则只是部分记录在案。

即使记录了完整的算法，我也不知道如何在不知道包含文件夹的完整历史记录的情况下可靠地预测给定文件的 8.3 名称。分配的名称可能会有所不同，具体取决于创建之前同一文件夹中存在多少类似名称的文件。

获取 8.3 名称的唯一可靠方法是查询目录。

最简单的方法是使用`/x`DIR 命令的选项，但是那个输出不方便解析。

将 8.3 名称放入变量的最简单方法是将`~s`修饰符与 FOR 变量或 CALL 参数一起使用。

```
for %%F in ("long file name.ext") do set "shortName=%~sF" 
```

或者

```
call :getShort "long file name.ext"
exit /b

:getShort
set "shortName=%~s1"
exit /b 
```

注意 - 使用 FOR 而不是 CALL 更快

8.3 名称也可通过 WMIC DATAFILE 别名获得。

# android - Android条件运算符问题

> ID：11639449
> 
> 赞同：0
> 
> 时间：2012-07-24T21:18:16.483
> 
> 标签：android, if-statement

我正在制作一个应用程序，该应用程序输出 1 到 9000 之间的数字，用户选择这个数字然后存储为用户可以稍后调用的变量。

```
 public void onClick(View v) {
    // TODO Auto-generated method stub
    String number = urNum.getText().toString();
    if (number >= " " && <= 9000) {

        numOut.setText("Your number is set to: " + number);
    }
} 
```

此代码： (number >= " " && <= 9000)
中有错误指出： 运算符 >= 未定义参数类型 String, int
-我该如何解决这些错误？

在这件事上的帮助会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:20:46.077

首先，这不是有效的 Java 语法。您必须每次都指定变量。其次，您不能将数字与空字符串进行比较，您必须先将其转换为整数，然后将其与另一个整数进行比较。

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    String numberString = urNum.getText().toString().trim();
    int number = Integer.valueOf(numberString);
    if (number >= 1 && number <= 9000) {
        numOut.setText("Your number is set to: " + number);
    }
} 
```

如果输入的值有可能不是数字，您也需要处理：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    String numberString = urNum.getText().toString();
    int number;
    try {
        number = Integer.valueOf(numberString);
    } catch (NumberFormatException nfe) {
        number = 0;
    }
    if (number >= 1 && number <= 9000) {
        numOut.setText("Your number is set to: " + number);
    }
} 
```

**注意**：您可能希望了解有关[`try/catch`块](http://www.javamex.com/tutorials/exceptions/exceptions_try_catch_block.shtml)、[Android`EditText`数字限制](https://stackoverflow.com/questions/6919360/how-do-i-restrict-my-edittext-input-to-numerical-possibly-decimal-and-signed-i)以及最后带有[多个条件的](https://stackoverflow.com/questions/253030/best-way-to-format-if-statement-with-multiple-conditions)[`if`语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:23:58.907

问题是您的号码当前是一个字符串，将其转换为 int，然后您可以执行以下操作：

```
int number = Integer.valueOf(urNum.getText().toString());
if (number >= 0 && number <= 9000) 
```

# authentication - Powershell DeElevate 用户令牌

> ID：11639453
> 
> 赞同：2
> 
> 时间：2012-07-24T21:18:34.057
> 
> 标签：authentication, powershell, uac

我有一种情况，我认为在企业环境中不一定很奇怪......

我们正在迁移到 Windows 7，由于 UAC 的整个拆分令牌疯狂，我们的 vbscript 网络驱动器脚本已损坏。[在http://pcloadletter.co.uk/2010/05/15/missing-network-drives/](http://pcloadletter.co.uk/2010/05/15/missing-network-drives/)有一个不错的解释，其中有一个 vbscript 解决方案，每次有人登录时都会创建一个计划任务，以便在其中运行驱动器映射脚本非提升的上下文。

这对我来说似乎很笨拙。我宁愿做的是解除登录脚本，以便它在标准用户令牌下运行，而不是在提升的令牌下运行。问题是，我不知道该怎么做，希望这里有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:50:27.737

不是直接的答案（没有为您提供降低令牌的方法），但这可能是您需要显示驱动器的解决方案：

[http://social.technet.microsoft.com/Forums/en/ITCG/thread/92db05ba-ff0d-4e73-b40a-78522bfab6aa](http://social.technet.microsoft.com/Forums/en/ITCG/thread/92db05ba-ff0d-4e73-b40a-78522bfab6aa)

要配置 EnableLinkedConnections 注册表值，请执行以下步骤：

1.  单击“开始”，在“开始搜索”框中键入 regedit，然后按 Enter。

2.  找到并右键单击以下注册表子项：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System

3.  指向新建，然后单击 DWORD 值。

4.  键入 EnableLinkedConnections，然后按 Enter。

5.  右键单击 EnableLinkedConnections，然后单击修改。

6.  在数值数据框中，键入 1，然后单击确定。

7.  退出注册表编辑器，然后重新启动计算机。

# android - Android：通过监听器更新 sharedPreferences 摘要

> ID：11639456
> 
> 赞同：1
> 
> 时间：2012-07-24T21:18:53.087
> 
> 标签：android, sharedpreferences, summary

随着首选项的更改，我在更新 SharedPreferences 中的摘要行时遇到了一些问题。我在 onResume() 中有一个注册的 OnSharePreferenceChangeListener，在 onPause() 中有一个相同的注销。

侦听器正在运行，我可以使用 onSharedPreferenceChanges() 方法。我遇到的问题是能够在那里检索首选项，以便我可以调用 setSummary()。我在 Ice Cream Sandwich，看起来好像 findPreference(key) 方法已被弃用。所以：

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
Preference pref = findPreference(key);} 
```

不起作用，实际上为 pref 返回 null。从我看到的示例中，您需要优先调用 setSummary() ，以及想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:33:48.363

您不应该`onSharedPreferenceChangedListener`为此使用 an 。

相反，使用与此类似的东西。

```
ListPreference myPreference = (ListPreference) findPreference("preference_key");
myPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        if (((String)newValue).equals("some_value")) {
            preference.setSummary("my summary");
        }
    }
}); 
```

`findPreference`没有被弃用，而是你不应该使用 a `PreferenceActivity`（已弃用）。如果您只需要支持Android 3.0+，那么您应该切换到`PreferenceFragment`新方法's。如果您需要支持 Android 2.1+，那很好，您可以忽略警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:12:42.340

我一直在尝试`PreferenceFragment`在我的代码中使用，我也看到了`findPreference(key)`return `null`。[设置文档页面上](http://developer.android.com/guide/topics/ui/settings.html)用于使用的示例代码`OnSharedPreferenceChangeListener`尚未完全更新，如果您逐字使用它`PreferenceFragment`，您将崩溃。`NullPointerException`

我终于想通了：你必须找到`Preference`via the，`PreferenceFragment`因为当然这就是现在的偏好。事后看来很明显。像这样的东西：

```
public class SettingsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener
{   
    protected SettingsFragment settingsFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        settingsFragment = new SettingsFragment();
        getFragmentManager().beginTransaction().replace(android.R.id.content, settingsFragment).commit();
    }

    // ...

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        if (key.equals("your_key")) {
            String newValue = sharedPreferences.getString(key, "");
            settingsFragment.findPreference(key).setSummary(newValue);
        }
    }
} 
```

# c++ - 类中的 Boost::Mutex 不是线程安全的

> ID：11639457
> 
> 赞同：3
> 
> 时间：2012-07-24T21:18:55.610
> 
> 标签：c++, oop, boost-mutex

我正在学习并发编程，我想做的是有一个类，它负责运行自己的 Boost:Thread 的每个对象。我对这段代码有点不知所措，因为它使用了很多我不太熟悉的功能（动态分配的内存、函数指针、并发等）。就像每一行代码我都必须检查一些参考资料才能让它正确。

（是的，所有分配的内存都包含在实际代码中！）

我在使用互斥锁时遇到了问题。我将它声明为静态，并且它似乎为所有实例获得了相同的值（应该如此）。该代码仍然不是线程安全的。

互斥锁应该阻止线程（对吗？）继续前进，以防其他人锁定它。因为互斥锁是有范围的（一种简洁的功能），并且它在 if 语句中应该查看其他线程，不是吗？我仍然得到控制台输出，这清楚地表明它不是线程安全的。

另外我不确定我是否使用了静态变量。我尝试了不同的引用方式（Seller::ticketSaleMutex），但唯一有效的是“this->ticketSaleMutex”，它看起来很阴暗，似乎违背了它是静态的目的。

卖家.h：

```
class Seller
{
public:     
    //Some vaiables
private:
    //Other variables
    static boost::mutex ticketSaleMutex;      //Mutex definition
}; 
```

卖家.cpp：

```
boost::mutex Seller::ticketSaleMutex;         //Mutex declaration

void Seller::StartTicketSale()
{
    ticketSale = new boost::thread(boost::bind(&Seller::SellTickets, this));

}
void Seller::SellTickets()
{
    while (*totalSoldTickets < totalNumTickets)
    {
        if ([Some time tick])
        {
            boost::mutex::scoped_lock(this->ticketSaleMutex);
            (*totalSoldTickets)++;
            std::cout << "Seller " << ID << " sold ticket " << *totalSoldTickets << std::endl;
        }

    }
} 
```

主.cpp：

```
int main(int argc, char**argv)
{
    std::vector<Seller*> seller;
    const int numSellers = 10;
    int numTickets = 40;
    int *soldTickets = new int;
    *soldTickets = 0;
    for (int i = 0; i < numSellers; i++)
    {
        seller.push_back(new Seller(i, numTickets, soldTickets));
        seller[i]->StartTicketSale();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T21:24:37.047

这将创建一个立即销毁的临时文件：

```
boost::mutex::scoped_lock(this->ticketSaleMutex); 
```

导致没有同步。您需要声明一个变量：

```
boost::mutex::scoped_lock local_lock(this->ticketSaleMutex); 
```

# objective-c - NSTask 在 Xcode 4.3.3 之外不接收标准输出

> ID：11639465
> 
> 赞同：3
> 
> 时间：2012-07-24T21:19:14.890
> 
> 标签：objective-c, xcode, stdout, nstask, nspipe

这是我的第一篇文章，所以让我非常感谢外面的所有发帖人（我被动地广泛使用 - 太棒了！）

我正在使用旧的 Quicktime API 为 Mac OS X 开发视频导出工具。

简介：我从多个输入电影中剪切帧并将它们排列（缩放）到一个新的输出电影（一种媒体亭）。

由于许多需要的 QT 功能（例如编写时间码...）需要嵌套在 32 位应用程序中，我决定使用 32 位命令行工具离线执行此操作。该工具逐帧渲染（离线）并以 0.0 和 1.0 之间的值打印当前进度

它由主应用程序（Cocoa、GUI、现代的东西）通过 NSTask 调用。黑啤酒被 NSPipe 捕获。

我查看了一些示例，并将快速概述我的代码：

```
NSTask *task;
NSPipe *pipe;
float progress;

// prepare the offline process
// 
//
-(void) prepareOfflineExport {

    task = [[NSTask alloc] init];        
    pipe = [[NSPipe alloc] init];

    [task setLaunchPath:pathToRenderer];
    [task setStandardOutput:pipe];
}

// arguments are passed outside
// invoke the process
//
-(void) startOfflineExport {

    progress = 0.0f;        

    NSArray *argv = [NSArray arrayWithObjects: /* command line args */, nil];
    [task setArguments:argv];

    NSFileHandle *fh = [pipe fileHandleForReading];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dataReady:) name:NSFileHandleReadCompletionNotification object:fh];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(taskTerminated:) name:NSTaskDidTerminateNotification object:task];

    [task launch];

    [fh readInBackgroundAndNotify];
}

// called when data ready
// 
//
-(void) dataReady:(NSNotification*)n {

    NSData *d = [[n userInfo] valueForKey:NSFileHandleNotificationData];

    if([d length]) {

        NSString *s = [[NSString alloc] initWithData:d encoding:NSUTF8StringEncoding];
        progress = [s floatValue];
    }
}

// called when process exits
// 
//
-(void) taskTerminated:(NSNotification*)n {

    task = nil;
    progress = 1.0f;
} 
```

现在的问题：

在 Xcode 中启动应用程序时（通过“运行”），一切正常。调用正确完成，该过程在活动监视器中可见，并且 NSLevelIndicator（在创新应用程序的人上）根据（浮动）进度变量进行得很好。

但是：如果我“归档”应用程序并在 Xcode 之外执行它，我的命令行工具的标准输出似乎永远不会到达应用程序。我试着写一个调试文件

```
-(void) dataReady:(NSNotification*)n 
```

没有机会，它永远不会被调用！我在几台Mac上测试了这个问题，同样的问题......

我是否犯了明显的错误，或者是否有一些偏好配置（沙盒已关闭），可能是我忽略的已知问题？

谢谢你的帮助

问候垫

# php - 命令行通过php exec组合pdf

> ID：11639466
> 
> 赞同：0
> 
> 时间：2012-07-24T21:19:20.617
> 
> 标签：php, pdf

我只是设置 wkhtmltopdf 来获取 html 文档并将它们转换为 pdf，但现在我需要一种组合多个 pdf 的方法。

有什么建议么？

如果它可以做一些事情，我们确实有 pdflib 许可证，但它似乎主要是用于自定义构建 pdf 的 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:37:07.473

如果你有`wkhtmltopdf`我想你正在使用*Linux*并且你有一个 root shell 访问权限。

您可以通过或使用[Pdftk Toolkit](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/ "PDFk 工具包")。`system()``exec()`

首先安装它。**它是Debian/Ubuntu**中的一个包，例如：

```
sudo apt-get install pdftk 
```

然后确保它在您的 bin 搜索路径中可见。

还有一个简单的 PHP 片段：

```
// In / Out filenames
$input_files = array( 'file_one.pdf', 'file_two.pdf' );
$file_out = 'merged.pdf';

// Escape names and create argument
$line_parts = '';
foreach( $input_files as $file ) {
     $line_parts .= escapeshellarg( $file ) . ' ';
}

// Run pdftk
$cmd = 'pdftk ' . $line_parts . ' cat output ' . escapeshellarg( $file_out );
system( $cmd, $retval );
if( $retval ) { print 'There was an error!'; } 
```

# jquery - jQuery 同步非阻塞 ajax 调用

> ID：11639467
> 
> 赞同：5
> 
> 时间：2012-07-24T21:19:26.513
> 
> 标签：jquery, ajax, asynchronous, nonblocking

在我的 Web 应用程序中，我有一系列快速触发的 ajax 调用。在服务器上，这些需要按照从客户端发送的顺序进行处理。

我一直在使用`async: false`jQuery 中的配置来执行此操作。但是，这会导致 GUI 在阻止调用完成时变得非常缓慢。GUI 是响应式的，`async: true`但请求并不总是按顺序处理。

是否有另一种*非阻塞*方式来排队 ajax 请求，所以只有在前一个请求完成后才发送下一个请求？

注意：我没有要处理的请求的“列表”。请求是动态生成的，因此我需要能够在它们生成时将它们填充到某种 FIFO 队列中，然后使用某个进程消耗队列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:22:40.107

可以使用[jQuery Promise](http://api.jquery.com/category/deferred-object/)轻松完成：

```
function firstAjax() {
    return $.ajax({...});
}

function secondAjax() {
    return $.ajax({...});
}

firstAjax().pipe(secondAjax).pipe(...).done(function() {
    alert('all requests have successfully finished');
}); 
```

或者

```
$.when(firstAjax()).pipe(secondAjax).pipe(...).done(function() {
    alert('all requests have successfully finished');
}); 
```

[http://jsfiddle.net/zerkms/WQcVD/1/](http://jsfiddle.net/zerkms/WQcVD/1/)

# asp.net - 将第二个标题行添加到 GridView BELOW 已经存在的标题行

> ID：11639475
> 
> 赞同：1
> 
> 时间：2012-07-24T21:19:54.647
> 
> 标签：asp.net, .net, gridview, code-behind

我正在尝试在 GridView 的 OnRowCreated 事件中动态插入第二个标题行。但是，除了gridview 的行索引中的第一个位置之外，我似乎无法将该行插入到任何位置。下面的代码在最后一行失败，其中标题实际添加到网格中。索引越界异常。如何在现有标题行*下方添加此标题行？*非常感谢您的帮助，谢谢！

```
protected void gvwProd_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        GridView gvw = (GridView)sender;

        GridViewRow HeaderRow = new GridViewRow(1, 1, DataControlRowType.Header, DataControlRowState.Insert);

        TableCell HeaderCell = new TableCell();
        HeaderCell.Text = "Prod Comments - TS/LID";
        HeaderCell.Style["font-weight"] = "bold";
        HeaderCell.ColumnSpan = 4;
        HeaderCell.Wrap = false;
        HeaderRow.Cells.Add(HeaderCell);

        HeaderCell = new TableCell();
        HeaderCell.Text = "Materials Comments - TS/LD";
        HeaderCell.Style["font-weight"] = "bold";
        HeaderCell.ColumnSpan = 8;
        HeaderCell.Wrap = false;
        HeaderRow.Cells.Add(HeaderCell);

        HeaderCell = new TableCell();
        HeaderCell.Text = "Plant Comments - TS/LID";
        HeaderCell.Style["font-weight"] = "bold";
        HeaderCell.ColumnSpan = 11;
        HeaderCell.Wrap = false;
        HeaderRow.Cells.Add(HeaderCell);

        gvw.Controls[0].Controls.AddAt(1, HeaderRow);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-17T14:09:40.310

有类似的问题。您可以尝试将 GridView 转换为 Table 并访问 .Rows 方法：

```
((Table)gvw.Controls[0]).Rows.AddAt(1, HeaderRow); 
```

[资源](https://stackoverflow.com/a/4206372/1460225)

# jquery - MVC jquery get 不适用于非硬编码 get

> ID：11639478
> 
> 赞同：1
> 
> 时间：2012-07-24T21:20:17.980
> 
> 标签：jquery, asp.net-mvc

我有一个 MVC 应用程序，它有一个带有 GetResult 方法的主控制器：

```
public int GetResult()
        {
            return 3;
        } 
```

我使用以下方法在 javascript 文件中调用它：

```
$.post('/Home/GetResult', null, function (data) {

        alert(data);

    }); 
```

它工作正常。

但是我尝试使用非硬编码方式来调用它

```
$.get('@Url.Action("GetResult", "Home")', null, function (data) {

        alert(data);

    }); 
```

它不工作我得到一个 500 错误。

它正在尝试访问 URL：

```
http://localhost:xx/Home/@Url.Action(%22GetResult%22,%20%%22Home%22) 
```

那么这显然是不对的。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:23:24.200

您不能在 JavaScript 文件中使用 Razor 语法。Razor 是一种服务器端脚本构造，需要由 ASP.Net 解析才能运行。

你有两个选择：

**选项一：**

将脚本移动到`.cshtml`视图文件中。

**选项二：**

创建一个接受 url 作为参数的 JavaScript 函数并从视图中调用它：

```
function foo(posturl){
    $.post(url, null, function (data) {
        alert(data);
    });
}

/* View */
foo('@Url.Action("GetResult", "Home")'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:25:05.603

它仅适用于 Razor 视图。如果您想在外部 javascript 文件上访问它，您可以在 razor 视图中使用 HTML Helper 方法获取路径名称，并将其保存在全局 java 脚本变量中并在外部 javascript 中访问它文件

在你看来，

```
<script type="text/javascript>
  var globalGetResultPath='@Url.ACtion("GetResult","Home)';
</script> 
```

现在在外部脚本中你可以调用

```
$.get(globalGetResultPath, function (data) {
    alert(data);
}); 
```

# objective-c - 更改 AFNetworking baseURL

> ID：11639480
> 
> 赞同：16
> 
> 时间：2012-07-24T21:20:27.597
> 
> 标签：objective-c, afnetworking

我将 AFNetworking 与[他们示例](https://github.com/AFNetworking/AFNetworking/blob/master/Example/Classes/AFTwitterAPIClient.m)中建议的单例模型一起使用。

```
+ (SGStockRoomHTTPClient *)sharedClient
{
    static SGStockRoomHTTPClient *_sharedClient = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        NSString *baseUrlString = [[NSUserDefaults standardUserDefaults] stringForKey:@"server_root_url_preference"];
        _sharedClient = [[self alloc] initWithBaseURL:[NSURL URLWithString:baseUrlString]];
    });

    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }
    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"text/html"];
return self;
} 
```

使用取自用户默认值的 baseURL 完成初始化。

我的问题是 baseURL 属性是只读的。如果用户转到设置并更改 baseURL 用户默认值，我如何在我的客户端中更改它？

我需要更改 baseURL 的另一个类似情况是一个 API，它需要多次调用和逻辑来确定正确的 baseURL。并且在应用程序运行时，基本 url 仍然可以更改（例如，用户更改网络环境需要通过外部代理服务器从本地连接更改为 3G 连接。）。

我明白为什么 baseURL 属性是只读的：诸如 networkReachabilityStatus 之类的东西在后台运行并与该设置相关联。这就是说，似乎很容易有一个 setBaseURL 方法停止监视，更改值，然后再次开始监视......

我想我的设计不对，在这种情况下我是否应该放弃单例并在每次 baseURL 发生变化时重新创建客户端？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T12:08:08.207

该类`AFHTTPClient`旨在使用单个基本 URL。这就是为什么它是只读的。

如果您有多个基本 URL，以下是一些解决方案：

*   在您的`AFHTTPClient`子类中覆盖属性限定符。将其放在@interface 中：`@property (readwrite, nonatomic, retain) NSURL *baseURL;`

*   `AFHTTPClient`完全不要使用

*   创建多个实例`AFHTTPClient`

*   创建 HTTP 操作时，您可以覆盖 baseURL。只需在路径中设置完整的 URL 而不是相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-31T02:46:33.497

希望这可以帮助你。

```
@interface EFApiClient : AFHTTPSessionManager
@property (nonatomic,assign)BOOL isTestEnvironment ;
+ (instancetype)sharedMClient;
@end

@implementation EFApiClient
+ (instancetype)sharedMClient
{
    if ([EFApiClient sharedClient].isTestEnvironment) {
        return [EFApiClient sharedTestClient] ;
    }
    else{
        return [EFApiClient sharedClient];
    }
}   

+ (instancetype)sharedClient
{
    static EFApiClient *_sharedMClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedMClient = [[EFApiClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://xxx.xxx.com"]];
        [EFApiClient clientConfigWithManager:_sharedMClient];
    });
    return _sharedMClient;
}
+ (instancetype)sharedTestClient
{
    static EFApiClient *_sharedMClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedMClient = [[EFApiClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://test.xxx.xxx.com"]];
        [EFApiClient clientConfigWithManager:_sharedMClient];
    });
    return _sharedMClient;
}

+ (void)clientConfigWithManager:(EFApiClient *)client
{
    AFSecurityPolicy* policy = [[AFSecurityPolicy alloc] init];
    [policy setAllowInvalidCertificates:YES];
    [policy setValidatesDomainName:NO];
    [client setSecurityPolicy:policy];
    client.requestSerializer = [AFHTTPRequestSerializer serializer];
    client.responseSerializer = [AFHTTPResponseSerializer serializer];
    //client.requestSerializer.HTTPMethodsEncodingParametersInURI = [NSSet setWithArray:@[@"POST", @"GET", @"HEAD"]];
    client.responseSerializer = [AFJSONResponseSerializer serializer];
    client.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@"application/x-javascript",@"application/json", @"text/json", @"text/html", nil];
}
@end 
```

# perl - Perl 优化建议

> ID：11639490
> 
> 赞同：1
> 
> 时间：2012-07-24T21:21:22.750
> 
> 标签：perl, optimization

我正在寻找有关如何优化此 perl 脚本的建议。

我有这个脚本可以对文件进行一些小的重新格式化。该脚本执行以下操作：

1.  读一个“|” 来自 STDIN 的分隔文件
2.  删除尾随空格，
3.  删除“NULL”文本字符串
4.  将带有日期的列从“YYYY-MM-DD hh:mm”日期格式转换为“YYYYMMDD”格式。
5.  打印到 STDOUT 并执行 kluge 以防止在最后一列数据为 NULL 时丢失。每行的列数必须相同。

**样本输入：**

```
.091590.S           |CHF|SWX|2011-05-23 00:00|                   77.25|                    NULL|                    NULL|      78.620000000000005|                NULL
.091590.S           |CHF|SWX|2011-05-24 00:00|      77.599999999999994|                    NULL|                    NULL|                   77.25|                NULL
.091590.S           |CHF|SWX|2011-05-25 00:00|      77.760000000000005|                    NULL|                    NULL|      77.599999999999994|                NULL
.091590.S           |CHF|SWX|2011-05-26 00:00|      77.430000000000007|                    NULL|                    NULL|      77.760000000000005|                NULL
.091590.S           |CHF|SWX|2011-05-27 00:00|      77.909999999999997|                    NULL|                    NULL|      77.430000000000007|                NULL
.091590.S           |CHF|SWX|2011-05-30 00:00|      78.060000000000002|                    NULL|                    NULL|      77.909999999999997|                3506 
```

**FormattingScript.pl [col]**

其中 [col] 可以是单个数字或以逗号分隔的数字列表。此输入确定哪些列或哪些列需要日期转换。

```
@updcol = split(',',@ARGV[0]);

while (<STDIN>)
{
      s/.$/|DATAEND/g; ## USING THIS TO KEEP FROM TRUNCATING NULL LAST COLUMN
      s/^\s*//g;
      s/\s*$//g;
      s/\s*\|/\|/g;
      s/\|\s*/\|/g;
      s/\|NULL\|/\|\|/g;
      s/\|NULL\s*$/\|/g;
      s/\|NULL\s*/\|/g;
      s/\|NULL$/\|/g;
      @dataline = split('\|',$_);
if (@updcol[0] != 999) { ## REFORMAT DATES IF PARAM IS NOT 999
        foreach my $col (@updcol) {
        $dataline[$col]=substr($dataline[$col],0,4).substr($dataline[$col],5,2).substr($dataline[$col],8,2);
        }}
      $dataline[-1]="";
      $line=join('|',@dataline);
      print substr($line,0,-1)."\n";
}

exit 0; 
```

**样本输出：**

```
.091590.S|CHF|SWX|2011-05-23 00:00|77.25|||78.620000000000005|
.091590.S|CHF|SWX|2011-05-24 00:00|77.599999999999994|||77.25|
.091590.S|CHF|SWX|2011-05-25 00:00|77.760000000000005|||77.599999999999994|
.091590.S|CHF|SWX|2011-05-26 00:00|77.430000000000007|||77.760000000000005|
.091590.S|CHF|SWX|2011-05-27 00:00|77.909999999999997|||77.430000000000007|
.091590.S|CHF|SWX|2011-05-30 00:00|78.060000000000002|||77.909999999999997|3506 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T21:37:29.627

任何优化都将是微观的，这意味着您需要拿出 Benchmark 并开始测试做同样事情的不同方法。

与优化代码相比，清理代码对您的好处更多。

```
my @date_cols = split(/,/, shift(@ARGV));

while (<>) {
   #chomp;  # Redundant.
   my @fields = split(/\|/, $_, -1);

   for (@fields) {
      s/^\s+//;
      s/\s+\z//;
      s/^NULL\z//;
   }

   for (@fields[@date_cols]) {
      s/^(....)-(..)-(..).*/$1$2$3/s;
   }

   print(join('|', @fields), "\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:47:32.147

您可以使用[Regexp::Assemble](http://search.cpan.org/~dland/Regexp-Assemble-0.35/Assemble.pm)优化您的正则表达式。这将使您能够将所有正则表达式组合成一个正则表达式，该正则表达式的执行速度可能比运行多个正则表达式更快。

# javascript - Backbone.js 和 underscore.js 将 this 绑定到 this.collection.add

> ID：11639491
> 
> 赞同：0
> 
> 时间：2012-07-24T21:21:28.090
> 
> 标签：javascript, backbone.js, underscore.js

我在使用教程时遇到问题

```
this.collection.bind('add',appendItem) 
```

和

```
this.collection.bind('add',appendSet) 
```

appendItem 是一个在backbone.js 视图中为视图集合定义的函数。appendSet 也一样问题是我想通过嵌套模型来扩展教程，但是当我添加一个项目时，如果我使用上面的行，我已经将 appendItem 和 appendSet 绑定到 add 函数，所以 add 函数赢了不知道这应该是什么。

（快速提醒一下 bind 的作用：[http](http://underscorejs.org/#bind) ://underscorejs.org/#bind ）

那我还怎么用

```
this.collection.add(thisItem) 
```

并且仍然避免绑定问题。**简而言之**：有没有办法调用 this.collection.add(thisItem) 并告诉 add 函数关键字 'this' 应该引用 appendItem 而不使用绑定函数？

如果需要，我可以包含我的代码，但我认为它有点长且笨拙，而且可能无论如何都没有用。

编辑：

我的代码的逻辑是这样的。项目是具有多个属性的模型以及与其相关联的集合的集合。我只是在学习一个教程，他让这些对象呈现的方式是他使用 this.collection.bind('add',appendItem) 以便当您调用 this.collection.add 时，会调用 appendItem。这是 appendItem 的代码：

```
appendItem: function(item){
       alert("append exercise called in allExerciseview");
       var itemView=new ItemView({
         model: Item
       });
       $('ul',this.el).append(itemView.renderItem().el);
      } 
```

我找不到 this.collection.add 的源代码，但我假设在该函数中有 this 是指 appendItem 调用 appendItem 函数。**简而言之：**原因是这段代码：

```
this.collection.bind('add',appendItem) 
```

这样当你打电话时

```
this.collection.add(thisItem) 
```

它也运行

```
thisItem.appendItem() 
```

解除绑定并仅运行 this.collection.add(thisItem) 然后单独运行 thisItem.appendItem() 对我不起作用。

我的示例代码：

```
(function($){
    Backbone.sync = function(method, model, success, error) {
        success();
    };

    var Set = Backbone.Model.extend({
        defaults: {
            SetName:"Set "
            //more properties...
        },
        initialize: function(){
            alert("you've created a new set");
            this.bind("error",function(model,error){
                alert(error);
            });
        }
    });

    var SetCollection = Backbone.Collection.extend({
        model:Set
    });

    var SetView = Backbone.View.extend({
        events: {
            'click button.deleteSet': 'removeSet'
        },
        initialize: function(){
            alert('initialize called in setview');
            _.bindAll(this,'renderSet', 'unrenderSet', 'removeSet');
        /*this.model.bind('change',this.renderSet);
         this.model.bind('remove',this.unrender); Not sure if I should do this*/
            return this; //apparently for chainable calls    
        },
        renderSet: function(){
            alert('renderset called in setview');
            $(this.el).html('a set template'); //add button after so you can test delete
            return this;
        },
        unrenderSet: function(){
            alert('unrenderset called in setview');
            $(this.el).remove();
        },
        removeSet: function(){
            alert('removeset called in setview');
            this.model.destroy();
        }
    });

    var AllSetView = Backbone.View.extend({
        el: $('body'), //el attaches to existing element <-- what does this mean?
        events: {
            'click button#addSetButton': 'addSet'
        },
        initialize: function(){
            alert('initialize called in allsetview');
            _.bindAll(this,'renderAllSet', 'addSet', 'appendSet');
            this.collection = new SetCollection();
            this.collection.bind('add', this.appendSet); // Problem here...
            this.counter = 0;
            this.renderAllSet(); 
        },
        renderAllSet: function(){
            alert('renderallset called in allsetview');
            var self = this; 
            $(this.el).append('<button id="addSetButton"> Add Set </button>');
            $(this.el).append('<ul></ul>');
            _(this.collection.models).each(function(set){ //in case collection is not empty
                self.appendSet(set);
            },this); 
        },
        addSet: function(){
            alert('addSet called in allsetview');
            this.counter++;
            var thisSet = new Set();
            thisSet.set({SetName:thisSet.get('SetName')+this.counter});
            this.collection.add(thisSet); //add is a function defined for the collection
        },
        appendSet: function(item){
            alert("append set called in allsetview");
            var setView = new SetView({
                model: Set //DO NOT CAPITALIZE!!!... or do capitalize?... ack
            });
            $('ul',this.el).append(setView.renderSet().el);
        }
    });

    var allsetview = new AllSetView(); //for testing

    var Item = Backbone.Model.extend({
        defaults: {
            ItemName: 'Enter an Item'
            //more properties
        },
        initialize: function(){
            alert('youve created a new item');
            var set1 = new Set();
            var setCollection = new SetCollection([set1]);
            this.set({sets:setCollection});
            this.bind("error",function(model,error){
                alert(error);
            });
        }
    });

    var ItemCollection = Backbone.Collection.extend({
        model:Item
    });

    var ItemView = Backbone.View.extend({
        events: {
            'click button.deleteItem': 'removeItem'
        },
        initialize: function(){
            alert('initialize called in itemview');
            _.bindAll(this,'renderItem', 'unrenderItem', 'removeItem');
            //this.model.bind('change',this.renderItem);
            //this.model.bind('remove',this.unrender); Not sure if I should do this
            return this; //apparently for chainable calls    
        },
        renderItem: function(){
            alert('renderitem called in Itemview');
            $(this.el).html('an item template'); //add button after so you can test delete
            return this;
        },
        unrenderItem: function(){
            alert('unrenderitem called in itemview');
            $(this.el).remove();
        },
        removeItem: function(){
            alert('removeItem called in itemview');
            this.model.destroy();
        }
    });

    alert ("before itemview creation");
    var itemview = new ItemView();
    alert ("now after");

    var AllItemView = Backbone.View.extend({
        el: $('body'), //el attaches to existing element <-- what does this mean?
        events: {
            'click button#addItemButton': 'addItem'
        },
        initialize: function(){
            alert('initialize called in allitemview');
            _.bindAll(this,'renderAllItem', 'addItem', 'appendItem');
            this.collection = new ItemCollection();
            this.collection.bind('add', this.appendItem); //Problem here
            this.counter = 0;
            this.renderAllItem(); 
        },
        renderAllItem: function(){
            alert('renderallitem called in allitemview');
            var self = this; //why
            $(this.el).append('<button id="addItemButton"> Add Item </button>');
            $(this.el).append('<ul></ul>');
            _(this.collection.models).each(function(item){ //in case collection is not empty
                self.appendItem(item);
            },this); //what is this function
        },
        addItem: function(){
            alert('addItem called in allitemview');
            this.counter++;
            var thisItem = new Item();
            thisItem.item({ItemName:thisItem.get('ItemName')+this.counter
            });
            this.collection.add(thisItem); //add is a function defined for the collection
            this.appendItem(thisItem);
        },
        appendItem: function(item){
            alert("append item called in allItemview");
            var itemView = new ItemView({
                model: Item //DO NOT CAPITALIZE!!!... or do capitalize?... 
            });
            $('ul',this.el).append(itemView.renderItem().el);
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:14:11.540

我认为您的目标是呈现某种层次结构。

首先：在 appendItem 函数中， itemView 的模型不应该`model:item`是`model:Item`. 我没有在任何地方看到 Item 定义。

接下来，你为什么不使用？： http: [//backbonejs.org/#Collection-add](http://backbonejs.org/#Collection-add)

appendItem 似乎是多余的。一旦您的收藏发生变化，您似乎也想添加一个新视图。那么在这种情况下，您可能希望为您的 Collection 提供一个 View 或为将事件绑定到更改的 App 拥有一个路由器。这个问题可能有帮助？：[Backbone.Collection.Create not triggering "add" in view](https://stackoverflow.com/questions/9627598/backbone-collection-create-not-triggering-add-in-view)

希望有帮助！

# ios - MonoTouch 自定义 UITableViewCell AccessoryView 为 Null

> ID：11639496
> 
> 赞同：1
> 
> 时间：2012-07-24T21:22:03.560
> 
> 标签：ios, uitableview, xamarin.ios, accessoryview

我在正在构建的 MonoTouch 应用程序中创建了一个自定义 UITableViewCell。在我成功设置的单元格内：

```
Accessory = UITableViewCellAccessory.DisclosureIndicator; 
```

但是，当我尝试更改 AccessoryView 的背景颜色时，我的应用程序崩溃了，因为 AccessoryView 为空：

```
AccessoryView.BackgroundColor = UIColor.White; 
```

事实上，单元格内唯一不为空的视图是 ContentView。

任何人都知道为什么 AccessoryView 为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:22:22.393

`Accessory`和`AccessoryView`属性是相关的，但不会相互改变。

当您在其中设置自己的**自定义**视图时，`AccessoryView`的值`Accessory`将被忽略`UITableViewCell`。

> 任何人都知道为什么 AccessoryView 为空？

同样，如果您设置 an那么您将`Accessory`无法*访问**股票*视图（通过`AccessoryView`属性）和支持的事件，例如触摸事件`DisclosureButton`，将是单元格（因为您无法访问视图）。

如果您想要一个自定义外观的附件视图，那么您可以自己创建一个并将其分配给`AccessoryView`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:12:24.933

我最初的问题是我正在向单元格添加一个附件，但该附件的背景与单元格其余部分的背景不同。它正在获取底层表视图的背景，这不是我想要的。当我尝试将 AccessoryView.Background 颜色设置为我想要的（认为这是罪魁祸首）时，AccessoryView 为空。

我最终为解决我的问题所做的是创建一个具有我想要的背景颜色的新 UIView 并将其设置为我的单元格 BackgroundView （因为它最初也是 null ）。这解决了我的问题，我的单元格到处都有正确的颜色。

# c# - 远程注册ocx文件

> ID：11639506
> 
> 赞同：0
> 
> 时间：2012-07-24T21:22:44.777
> 
> 标签：c#, vb6, ocx

我有一些想要注册的 VB6 .ocx 文件。这些 .ocx 文件将位于远程计算机上。

以编程方式注册这些 .ocx 文件的最佳方法是什么？

```
string arg_fileinfo = "/s" + " " + "\"" + "\\<remotemachine>\\<directory>\\<ocx>" + "\"";
Process reg = new Process();
//This file registers .dll files as command components in the registry.
reg.StartInfo.FileName = "regsvr32.exe";
reg.StartInfo.Arguments = arg_fileinfo;
reg.StartInfo.UseShellExecute = false;
reg.StartInfo.CreateNoWindow = true;
reg.StartInfo.RedirectStandardOutput = true;
reg.Start();
reg.WaitForExit();
reg.Close(); 
```

我没有收到任何错误，但它也没有注册 .ocx。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:15:13.697

如果要注册远程文件以在本地计算机上使用，在 UNC 路径上注册文件没有什么特殊要求，但您需要确保 UNC 路径或映射的驱动器仍然可供所有用户使用，尤其是正在运行的用户`regsvr32`。据推测，这将是本地管理员（默认情况下在 Windows Vista+ 上）将需要提升，这可能会断开网络连接。

另请注意，您的示例缺少`\`UNC 路径开头的额外内容。您的代码将导致`arg_fileinfo`包含`/s "\<remotemachine>\<directory>\<ocx>"`.
您可以添加额外的`\`，或使用`@`装饰器，这样在输入 Windows 路径时会更清晰：

```
string arg_fileinfo = "/s \"" + @"\\<remotemachine>\<directory>\<ocx>" + "\""; 
```

或者只是将它用于整个字符串和替代引号转义方法：

```
string arg_fileinfo = @"/s ""\\<remotemachine>\<directory>\<ocx>"""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:47:06.717

几年前我不得不这样做。据我所知，UNC 名称不起作用，需要映射驱动器号。无论是严格意义上的 regsvr32 问题，还是由其他原因（例如 Windows 95）引起的，都在时间的迷雾中消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:54:57.337

将此作为您可以忽略的警告（因为我知道您无论如何都会这样做）：

这样做不是一个好习惯。刚开始“从网络运行”PE 文件（EXE、DLL、OCX）需要为它专门链接，否则您可能会因间歇性网络中断而面临高网络活动和崩溃的风险。并且*注册*任何不在引导驱动器或至少本地硬盘驱动器上的东西无论如何都是不明智的。做任何这些在“不良做法”列表中排名靠前，尽管它似乎在大多数情况下都有效。

为什么不按照公认的做法进行正常部署？

我的猜测是，您正在进行大量的[Mort](http://www.codinghorror.com/blog/2007/11/mort-elvis-einstein-and-you.html)开发，将某个程序的一个又一个版本拼凑在一起，希望其中一个最终会“坚持下去”。因此，您想将其中的一部分或全部转储到网络共享上，想着“*安装？安装？我们不需要繁琐的安装*。我只需将新文件放在那里，一切都可以毫不费力地神奇地工作。”

我假设您没有可用于通过组策略推送更新的托管网络，并且您没有创建必要的 MSI 安装程序包来处理其中的产品和升级代码。

一种替代方法是使用无注册 COM，它将为您解决很多小问题。

现在，您可以这样做而仍然忽略从网络共享运行的 PE 文件的危害，或者您可以使用小型启动程序绕过它。该启动器可以检查网络共享是否有新版本，如果找到，则在启动实际应用程序和终止之前将较新的文件复制到本地 PC。这基本上是一种自动更新的 XCopy 部署技术。

您可以根据需要变得花哨。例如，如果您的应用程序接受命令行参数，它可能会自行检查新版本，如果找到则启动小型更新程序（将命令行参数传递给它），然后终止。更新程序应用程序可以重新启动并将这些参数传递给新版本。

但是，是的，作为 Mort（甚至是正式的在职开发人员）的生活可能会很痛苦。即使您在托管的公司 LAN 环境中工作，也很难引起[友好的邻里接线员](https://en.wikipedia.org/wiki/Bastard_Operator_From_Hell)的注意以正确地做事。如果您的应用程序不是某些经过[高度设计](http://www2.computer.org/cms/Computer.org/ComputingNow/homepage/2009/0709/rW_SO_Viewpoints.pdf)的认可重大项目的一部分，那将是双倍的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:27:54.633

如果要注册文件以在远程机器上使用，则需要在该远程机器上运行代码。
您可以通过实际坐在计算机前、使用远程控制软件或远程管理工具（如[psexec.exe ）来执行此操作](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)。

# ruby-on-rails-3 - 使用 capybara 调试 rspec 集成测试的最佳方法？

> ID：11639509
> 
> 赞同：0
> 
> 时间：2012-07-24T21:23:01.557
> 
> 标签：ruby-on-rails-3, rspec-rails

我有一个 rspec 测试失败，但在开发中，当我自己执行操作时，页面会正确呈现。

这是片段：

```
describe "sign up process" do

let (:admin1) { FactoryGirl.create(:admin) }

describe "with valid information"

  before do 
    visit new_admin_registration_path
    fill_in "Email", with: admin1.email
    fill_in "Password", with: admin1.password
    fill_in "Password confirmation", with: admin1.password_confirmation
    click_button "Sign up"
  end

  it { should have_selector('div.alert') }
end 
```

它根本没有找到那个选择器，但我在使用开发环境查看源代码时确认它存在。

我想做的是检查正在呈现的页面以查看我缺少的内容。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:27:29.970

Capybara 有一个方法[`save_and_open_page`](http://rubydoc.info/gems/capybara/Capybara#save_and_open_page-class_method)可以打开一个带有当前页面状态的新浏览器窗口（它需要`launchy`gem）。

例如：

```
 before do 
    ...
    click_button "Sign up"
    save_and_open_page
  end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:28:59.060

这就像在你的规范中使用调试器或其他不同的东西一样简单。

我个人更喜欢 pry，因为每次我用 ruby​​ 1.9 尝试安装调试器时都会有点麻烦......

with pry you would just add a `require "pry"` in your spec_helper.rb and then write a `binding.pry` the line before the problem occurs. you then have an irb session attached to your test.

# php - 未在特定字段中输入 X 秒后发送表单

> ID：11639510
> 
> 赞同：5
> 
> 时间：2012-07-24T21:23:02.150
> 
> 标签：php, javascript, jquery, html

我正在使用 Speech-to-Text 软件输入一个字段，因为没有屏幕或鼠标或键盘，我需要在此字段中没有输入（实际上是说话）3 秒后发送此表单，但该字段应该'不要为空

我正在使用 PHP，但我想解决方案是 JavaScript 或 jQuery，我对这两个不太了解，所以如果您也能解释如何使用它，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:30:17.720

从根本上说，您需要捕获按键事件并启动计时器。如果计时器在按下另一个键之前用完，请提交表单

[使用 jQuery 检测按键](http://api.jquery.com/keypress/)是这样完成的：

```
$('#ElementId').keypress(function() {
    /* Your code */
}); 
```

您可以使用该`setTimeout()`方法计时 3 秒（[请参阅此处](http://www.w3schools.com/jsref/met_win_settimeout.asp)）

最后，使用[此处](http://api.jquery.com/submit/)`submit()`所示的 jQuery提交表单

您可能还想[在`focus()`](http://api.jquery.com/focus/)页面加载后将焦点移至文本输入，以便 SR 在正确的位置“键入”，

此外，[这篇文章](http://www.w3schools.com/js/js_timing.asp)很好地介绍了 JS 中的计时事件，包括如何取消它们

简而言之，你想要这样的东西（[经过测试](http://jsfiddle.net/Basic/qvHuX/5/)）：

```
$(document).ready(function(){

    var Timeout; //For reference to timeout
    var DelayInMs=3000;
    $("#SRInput").focus(); //Give focus to input on document ready

    //When input is received, (re)set the timer
    $("#SRInput").keypress(function() {
        if(Timeout) {clearTimeout(Timeout);} //Clear existing timeout, if any
        Timeout = setTimeout(function(){$("#SRForm").submit();}, DelayInMs);
    });

});

<form id="SRForm" method = ... >
    <input type="text" name="SRInput" id="SRInput"/>
</form> 
```

[（由于闭包](http://www.javascriptkit.com/javatutors/closures.shtml)，这些`Timeout`/ `DelayInMs`vars 仍然在事件的范围内）顺便说一句，这有一个额外的好处，即在第一次按键之后才开始计时器 - 所以你可以花多长时间来开始说话）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:35:20.530

```
$(function() {
    var time = 0;
    $("textarea").keyup(function() {
        time = 0;
    });

    var int = self.setInterval(function() {
        var s = $("textarea").val();
        if (time++ == 3) {
            if (s != "") alert(s);
            time = 0;
        }
    }, 1000);
});​ 
```

[演示](http://jsfiddle.net/T3XRR/3/)

更新：

[正如@Tim Down 所说](https://stackoverflow.com/a/3914033/603127)，

```
The keypress event is designed for handling the a character typed by the user 
rather than detecting keyboard activity and the delete and backspace keys 
do not generate characters. Some browsers blur this line somewhat but 
the general principle is that the keyup and keydown events are there to detect 
any key being pressed and telling you about which key it is while keypress is 
for detecting an actual character being typed. 
```

因此，如果您使用 keyup 而不是 keypress 会更好，那么您的计时器清除适用于任何键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:30:54.120

我想你可以使用[http://narf.pl/jquery-typing/jquery.typing-0.2.0.min.js](http://narf.pl/jquery-typing/jquery.typing-0.2.0.min.js)

看看[http://narf.pl/jquery-typing/](http://narf.pl/jquery-typing/)

```
$(':text').typing({
    start: function (event, $elem) {
       // do nothing
    },
    stop: function (event, $elem) {
       // send your form
    },
    delay: 3000
}); 
```

希望这可以帮助

# javascript - 附加的跨度标签没有分配文本

> ID：11639511
> 
> 赞同：2
> 
> 时间：2012-07-24T21:23:08.243
> 
> 标签：javascript, jquery

我正在尝试遍历一组选中的复选框并将每个复选框的文本作为跨度附加到 div 中。我已经尝试使用选项标签进行选择，并且效果很好，但是使用跨度标签进行操作时，文本似乎没有显示。

```
$.each(elms, function(index, value) {
    var textVal;
    textVal = $.trim($(value).parent().text());
    return $('#narrowSic').append($('<span class=label>', {
        text: textVal
    }));
});​ 
```

这是它正在使用的 HTML：

```
 <div id="filteredSicDiv">
        <a href="javascript: void(0)">Clear</a>
        <div id="narrowSic" class="labelParent">
                  Sic:</div>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:40:32.850

我相信对于棘手的部分，您真正想要的代码类似于*我附加到正文以进行调试的注释*：

```
$(document.body).append($('<span />', {
    "text": textVal,
    "class": 'label'
}));​ 
```

[请参阅http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)上的 jQuery 文档并注意以下警告：

> *在传递复杂的 HTML 时，某些浏览器可能无法生成完全复制所提供的 HTML 源的 DOM。*

所以你更新的片段是：

```
$.each(elms, function(index, value) {
    var textVal = $.trim($(value).parent().text());
    return $('#narrowSic').append($('<span />', {
        "text": textVal,
        "class": 'label'
    }));
}); 
```

这假定在所有情况下，您的价值`textVal`都按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:31:01.017

```
$.each(elms, function(index, value) { 
    var textVal; 
    textVal = $.trim($(value).parent().text()); 
    $('#narrowSic').append($('<span class=label>' + textVal + '</span>')); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:31:02.933

您可以使用以下功能设置文本`.text()`：

```
$.each(elms, function(index, value) {
     var textVal;
     textVal = $.trim($(value).parent().text());
     return $('#narrowSic').append($('<span class="label">').text(textVal));
}); 
```

# c# - 在 wpf 中使用 datepicker 的日期差异

> ID：11639516
> 
> 赞同：3
> 
> 时间：2012-07-24T21:23:28.040
> 
> 标签：c#, wpf, datetime

我试图计算两个日期之间有多少天并将结果显示在文本块中，我正在使用 wpf。但是我得到一个可为空的对象必须在第一行有一个值：S

```
 private void button20_Click(object sender, RoutedEventArgs e)
    {
        DateTime start = datePicker1.DisplayDateStart.Value.Date;
        DateTime finish = datePicker2.DisplayDateStart.Value.Date;
        TimeSpan difference = start.Subtract(finish);
        textBlock10.Text = Convert.ToString(difference);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:29:36.747

正如错误消息所暗示的那样，`DisplayDateStart`是一个可为空的属性，这意味着它可以（并且默认情况下*确实*）没有值。您必须处理这种情况才能产生合理的结果。

也就是说，该`DisplayDateStart`属性指的是 DatePicker 日历中显示的最早日期，而不是用户选择的日期：为此，您需要该`SelectedDate`属性，该属性也可以为空。

有多种方法可以处理 NULL 值：在 TextBlock 中不显示任何内容、显示“N/A”或其他默认值等。这是一个示例：

```
private void button20_Click(object sender, RoutedEventArgs e)
{
    // This block sets the TextBlock to a sensible default if dates haven't been picked
    if(!datePicker1.SelectedDate.HasValue || !datePicker2.SelectedDate.HasValue)
    {
        textBlock10.Text = "Select dates";
        return;
    }

    // Because the nullable SelectedDate properties must have a value to reach this point, 
    // we can safely reference them - otherwise, these statements throw, as you've discovered.
    DateTime start = datePicker1.SelectedDate.Value.Date;
    DateTime finish = datePicker2.SelectedDate.Value.Date;
    TimeSpan difference = finish.Subtract(start);
    textBlock10.Text = difference.TotalDays.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:27:35.517

如果您想获取选定的日期，则说明您使用了错误的属性。`DisplayDateStart`并`DisplayDateEnd`限制可能的选择。它们可以为空，因为应该可以不受任何限制地创建日期选择器。更改您的开始和结束分配以使用该`DisplayDate`属性：

```
DateTime start = datePicker1.DisplayDate.Date;
DateTime finish = datePicker2.DisplayDate.Date; 
```

您还应该考虑重命名日期选择器。有控件命名`datePicker1`并且`datePicker2`通常很难记住。`datePickerStart`和怎么样`datePickerEnd`？

（免责声明：我知道 WPF 控件通常没有名称，因为它们是数据绑定的，因此名称无关紧要，但在这种情况下，它们被显式访问并且应该具有正确的名称）。

# javascript - 访问 jQuery 中类的第二个成员？

> ID：11639517
> 
> 赞同：1
> 
> 时间：2012-07-24T21:23:32.767
> 
> 标签：javascript, jquery

我有一堆属于特定类的 div，比如标签。语义结构看起来像这样：

```
<div class = "tabs" >_______</div>
<div class = "tabs" >_______</div>
<div class = "tabs" >_____</div> 
```

访问 div 的第一个和最后一个元素很容易，例如

```
$('.tabs:first') or
$('.tabs:last') 
```

但是到第二个（并假设里面有多个其他 div，那么除了第一个或最后一个之外的所有 div）似乎对我产生了语法错误，例如：

`$('.tabs:second') or $('.tabs:third')`不按预期工作。

谁能指出这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:25:34.637

尝试使用[`eq()`](http://api.jquery.com/eq-selector/)选择器，注意索引是从零开始的：

```
$(".tabs:eq(1)"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T21:25:55.917

有两种方法可以做到这一点，使用`.eq()`方法或`:eq()`选择器。

**.eq() 方法：**

jQuery 文档建议您这样做的方式是使用该[`.eq()`](http://api.jquery.com/eq/)方法。

```
// eq() is zero-based, so this would get the second element
$('.tabs').eq(1) 
```

一个方便的功能是它`.eq()`也可以采用负数，这会导致函数从末尾开始。

```
// This would take the second element from the end
$('.tabs').eq(-2); 
```

**:eq() 选择器**

jQuery 还提供了一个[`:eq()`](http://api.jquery.com/eq-selector/)选择器，它的工作方式基本上与该`.eq()`方法的工作方式相同。所以你也可以这样做：

```
$('.tabs:eq(1)') 
```

请注意，即使这样工作，最好使用`.eq()`方法而不是选择器。该方法在现代浏览器中具有更好的性能，并且`:eq()`选择器不支持负数，因此受到了一些限制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T21:31:47.467

查看 jQuery`:first`选择器文档： [http ://api.jquery.com/first-selector/](http://api.jquery.com/first-selector/)

您会注意到这是一个 jQuery 扩展，而不是 CSS 规范的一部分。这`:first`也相当于`:eq(0)`，这意味着如果你想获得第二个元素，你可以用`:eq(1)`.

如果您不需要 CSS 选择器中的过滤器，您可以简单地使用[.eq 方法](http://api.jquery.com/eq/)获取元素，如下所示：

```
$('.tabs').eq(0) // get the first element
$('.tabs').eq(1) // get the second element
$('.tabs').eq(2) // get the third element
$('.tabs').eq(-2) // get the second to last element
$('.tabs').eq(-1) // get the last element 
```

# php - 在 PHP 中使用 strtotime 函数显示日期的文本表示

> ID：11639518
> 
> 赞同：1
> 
> 时间：2012-07-24T21:23:42.923
> 
> 标签：php

如何将星期天星期一的文本表示显示到所需的日期......我正在使用 strtotime 函数来显示日期，但是如何将文本日方添加到下面的日期。

```
$r=27 July 2012;
echo $r;
$cmg = strtotime("$r");
$now = time(); //25 July 2012
$timeleft = $cmg-$now;
$daysleft = round((($timeleft/24)/60)/60); //probably...
echo "&nbsp;&nbsp;There are $daysleft days left!"; 
```

这会输出一个日期

```
27 July 2012
There are 2days left ! 
```

所需的输出是

```
27 July 2012 Friday
There are 2days left!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:26:55.133

以这种格式输入日期，`YYYY-MM-DD`然后使用`Date()`函数：

```
$myDate = '2012-07-25';

echo date('l', strtotime($myDate));

//Friday 
```

文档：[http ://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

# html - 创建 HTML 选项卡，每个选项卡都是浏览器宽度的一部分

> ID：11639519
> 
> 赞同：0
> 
> 时间：2012-07-24T21:23:49.507
> 
> 标签：html, css, mobile, tabs, width

我是 stackoverflow 和 HTML/CSS/Javascript 的新手。我有四个选项卡，我希望它们都能够是浏览器宽度的 1/4。这主要用于移动使用，因此浏览器宽度的 1/4 应该没问题。

同样，我对 HTML/CSS/Javascript 还是很陌生，但我有使用 Java 的经验。因此，我了解编程基础知识，但我并不真正了解 HTML、CSS 和 Javascript 是如何相互作用的。

谢谢！

编辑：所以在看到一些评论之后，我想我需要更清楚一点。所以我想我会清理一些东西。首先，是的，我设计了一些看起来像标签的东西。我只是用谷歌搜索它，我找到了一种方法。我不知道这是否是最好的方法。我将在下面包含一些代码。

```
<ol id="toc">
<li><a href="Password.html">
    <span class="title">Password</span></a></li>
<li><a href="SSID.html">
    <span class="title">SSID</span></a></li>
<li class="current"><a href="Info.html">
    <span class="title">Info</span></a></li>
<li><a href="Logout.html">
    <span class="title">Logout</span></a></li></ol> 
```

还有我的 CSS

```
ol#toc {
height: 1em;
list-style: none;
margin: 0;
padding: 0;
}

ol#toc a {
background: #bdf url(tabs.png);
color: #ddd;
display: block;
float: left;
height: 2em;
padding-left: 20px;
text-decoration: none;
}

ol#toc a:hover {
background-color: #3af;
background-position: 0 -120px;
}

ol#toc a:hover span {
background-position: 100% -120px;
}

ol#toc span.title {
font-size:0.6em;
vertical-align:bottom;
font-family: 'Droid Serif', Georgia, Times, serif;
}

ol#toc li {
float: left;

}

ol#toc li.current a {
background-color: #48f;
background-position: 0 -60px;
color: #fff;
}

ol#toc li.current span {
background-position: 100% -60px;
}

ol#toc span {
background: url(tabs.png) 100% 0;
display: block;
line-height: 3.1em;
padding-right: 20px;
} 
```

但我也看到了一些使用 JQuery 的好东西。我只是也不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:28:28.037

好吧，我假设您的`<li>`标签已经看起来像标签了？如果是这种情况，CSS 就很简单了：

```
/* Note that my choice of selector here is HEAVILY dependent on the styling you already have*/
li span.title
{
    width: 25%;
} 
```

理解交互是 CSS/Javascript/HTML 很容易学。如果这个答案没有意义，我鼓励你先阅读一本关于该主题的好书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T23:27:35.777

根据您对 Stargazer712 的评论，您可能想查看`{less}`哪个是允许变量的动态样式表语言：http: [//lesscss.org/](http://lesscss.org/)

因为您想“将变量从 JavaScript 传递到 CSS”，这可能仍然不是答案，但值得研究。

# tomcat6 - 在 Alfresco 中重写 URL

> ID：11639520
> 
> 赞同：0
> 
> 时间：2012-07-24T21:23:54.777
> 
> 标签：tomcat6, alfresco

我正在做类似于这里问的事情：

[Tomcat URL 重写过滤器不转发](https://stackoverflow.com/questions/11438669/tomcat-url-rewrite-filter-isnt-forwarding)

虽然我无所谓我使用什么机制。但是，假设有人使用此 URL 访问我的 Alfresco 实例：

网站/共享/doc.php?id=123

我希望将该 URL 重写为有效的内容。我有一个 webscript 将接收 URL，处理 ID，并将其转换为有效的 Alfreso Share URL，但我似乎无法让任何重写机制工作。Alfresco Share 使用 UrlRewriteFilter (tukey.org)，我在 share 的 web.xml 中添加了以下内容：

```
<filter-mapping>
   <filter-name>UrlRewriteFilter</filter-name>
   <url-pattern>*.php</url-pattern>
</filter-mapping> 
```

然后到 urlrewrite.xml：（现在只是做一个概念证明）

```
<rule>
   <from>/doc.php?id=(.*)</form>
   <to>/page/repository</to>
</rule> 
```

但是，我无法获取要重写的 URL。我还测试了 urlrewrite.xml 文件中指定的其他一些 URL 重写，它看起来不像 Alfresco 正在重写，即使它们有规则（例如：/feedservice/ 似乎没有被重写到 /page/feed/ 当我单击存储库页面上的 RSS Feed 按钮时）。

我缺少一些简单的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:09:00.627

这种重写是使用 RequestDispatcher 的 forward 方法实现的，用于传入链接，而不是重定向。因此，客户端不会出现重写的 URL。您应该能够通过验证重写 URL 的 servlet 映射来判断它是否正常工作。我认为您还可以设置 tukey 的日志级别，以便您了解它的作用。

# ruby-on-rails - 将字符串转换为日期

> ID：11639523
> 
> 赞同：1
> 
> 时间：2012-07-24T21:24:08.103
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个名为“events”的数据库表，其中包含一个名为“date”的列。格式为“2012 年 8 月 5 日星期日”的条目。我使用 events.date 来展示它。我如何将该字符串转换为带有整数的日期（如 8/5/12），并以这种方式显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:57:43.843

实际上，对于确切的结果，即“8/5/12”，你应该试试这个：

```
Date.parse("Sunday, August 05, 2012").strftime("%1m/%1d/%y") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:32:37.437

您将为此使用 rails i18n 功能：http: [//guides.rubyonrails.org/i18n.html#adding-date-time-formats](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:37:24.463

试试这个

```
Date.parse("Sunday, August 05, 2012").strftime("%m/%d/%y") 
```

# makefile - 使 -j 内存限制

> ID：11639524
> 
> 赞同：23
> 
> 时间：2012-07-24T21:24:08.093
> 
> 标签：makefile

有什么方法可以强制`make -j`不要过度消耗我的 RAM？我在一个开发团队工作，我们有不同的硬件集，所以`-j8`可能并不适合每个人。但是，`make -j`对我来说使用了太多的 RAM，并且溢出到交换中，这可能会导致我的整个系统崩溃。我怎样才能避免这种情况？

理想情况下，我希望观察系统负载并停止产生新线程，等待一些完成，然后继续。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-28T09:06:14.873

make -j 的作用是否可能存在一些混淆？（至少我错了很长时间......）。我假设没有选项的 -j 会适应 CPU 的数量，但事实并非如此——它根本没有应用任何限制。这意味着对于大型项目，它将创建大量进程（只需运行“top”即可查看...），并且可能会耗尽所有 RAM。当我的项目的“make -j”使用了我所有的 16Gb RAM 并失败时，我偶然发现了这一点，而“make -j 8”在 2.5 Gb RAM 使用量（在 8 个内核上，负载接近 100%两种情况）。

在效率方面，我认为使用等于或大于您期望的最大 CPU 数量的限制比没有限制更有效，因为数千个进程的调度有一些开销。创建的进程总数应该是恒定的，但是当“-j”一次创建很多进程时，内存分配可能会成为问题。即使将限制设置为 CPU 数量的两倍，也应该比根本不设置限制更加保守。

PS：经过更多挖掘后，我想出了一个巧妙的解决方案 - 只需读出处理器的数量并将其用作 -j 选项：

```
make -j `nproc` 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T21:36:21.203

稍微简单的解决方案是让每个工作站都有一个适合硬件可以处理的环境变量。让 makefile 读取此环境变量并将其传递给 -j 选项。[如何让 gnu make 读取环境变量。](http://www.cmcrossroads.com/ask-mr-make/7657-the-basics-getting-environment-variables-into-gnu-make)

此外，如果构建过程有很多步骤并且需要很长时间`make`重新读取环境变量，以便在构建期间可以减少/增加资源使用量。

此外，也许有一个服务/应用程序在工作站上运行，它监视资源使用情况并修改环境变量，而不是尝试这样`make`做......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-23T11:59:35.777

可以使用`ulimit`. 但是当超出限制时，可能会导致进程失败。`gcc`喜欢在单线程中链接时超出任何限制。所以`ulimit`解决方案并不流行。

另一种解决方案是提供`gcc`每个线程的 RAM 使用估计，并维护很少使用的交换。`load-average`当负载太高时，您可以添加以停止生成新线程/作业。

我正在使用以下脚本`/etc/profile.d/makeopts.sh`（gentoo）：

```
#!/bin/bash

# We need up to 1000 MB (less than 1GB) per thread.
MAX_THREADS=$(($(getconf _PHYS_PAGES) * $(getconf PAGE_SIZE) / (1000 ** 3)))
EFFECTIVE_THREADS=$(getconf _NPROCESSORS_ONLN)
THREADS=$((MAX_THREADS < EFFECTIVE_THREADS ? MAX_THREADS : EFFECTIVE_THREADS))

MAX_JOBS=$((MAX_THREADS / THREADS))
JOBS=$((MAX_JOBS < EFFECTIVE_THREADS ? MAX_JOBS : EFFECTIVE_THREADS))

MAX_LOAD=$((EFFECTIVE_THREADS * 9 / 10))

export MAKEOPTS="--jobs=$THREADS --load-average=$MAX_LOAD"
export EMERGE_DEFAULT_OPTS="--jobs=$JOBS --load-average=$MAX_LOAD" 
```

具有 4 个线程和 16 GB RAM 的机器：

```
MAKEOPTS="--jobs=4 --load-average=3"
EMERGE_DEFAULT_OPTS="--jobs=4 --load-average=3" 
```

具有 16 个线程和 32 GB RAM 的机器：

```
MAKEOPTS="--jobs=16 --load-average=14"
EMERGE_DEFAULT_OPTS="--jobs=2 --load-average=14" 
```

请注意，此配置是为`CFLAGS="-O2 -pipe -march=native"`. 如果您想添加/删除轻/重选项，请重新估计它。

# java - 赋值给变量没有效果？

> ID：11639525
> 
> 赞同：8
> 
> 时间：2012-07-24T21:24:12.620
> 
> 标签：java, compiler-warnings, post-increment, pre-increment

当我这样做时：count = ++count; 为什么我会收到警告 - 分配给变量 count 无效？这意味着计数增加，然后分配给它自己或其他东西？它和 ++count 一样吗？count = count++ 会发生什么；? 为什么我没有收到警告？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T21:25:53.183

`count++`并且`++count`都是`count=count+1`. 分配是内置的，因此没有必要再次分配它。`count++`（也称为*postfix*）和`++count`（也称为*prefix*）之间的区别在于，`++count`它将发生在该行的其余部分之前，并将发生在该行`count++`的其余部分之后。

如果你要拆开`count=count++`，你会得到这样的结果：

```
 count = count;
    count = count+1; 
```

现在您可以看到为什么 postfix 不会给您警告：最后实际上正在更改某些内容。

如果你拆开`count=++count`，你会得到这个：

```
 count = count+1;
    count = count; 
```

如您所见，第二行代码没有用，这就是编译器警告您的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T21:27:21.703

打破你基本上是在写的陈述：

```
++count;
count = count; 
```

如您所见， count=count 什么都不做，因此发出警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T21:34:11.933

稍微扩展一下，count++ 是后缀。它发生在其他操作之后，所以如果你做了类似的事情

```
int a = 0, b = 0;
a = b++; 
```

a 为 0，b 为 1。但是，如果你这样做了，++count 是前缀

```
int a = 0, b = 0;
a = ++b; 
```

那么 a 和 b 都将是 1。如果你只是这样做

```
count++; 
```

或者

```
++count; 
```

那么没关系，但如果你将它与其他东西结合起来，它会

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T21:27:50.560

++ 运算符是以下的快捷方式`count = count + 1`。如果我们打破你的线路`count = ++count`，它会回应`count = count+1 = count`

# sql - 如何从字符串中获取部分字符串

> ID：11639526
> 
> 赞同：1
> 
> 时间：2012-07-24T21:24:12.947
> 
> 标签：sql, postgresql, substring

如何提取和之间的`/`数值`.html`？

```
http://www.site.com/prod/bunch-of-seo-text-of-different-length/12345687.html
http://www.site.com/prod/bunch-of-seo-text-of-different-length/12345688.html
http://www.site.com/prod/bunch-of-seo-text-of-different-length/12345688.html 
```

我试过这个，但我不知道语法

```
SUBSTRING(link FROM '%/%' FOR '%.html%') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:42:07.050

问题是：

> 如何提取 / 和 .html 之间的数值？

一个正确的答案是：

```
SELECT substring(link, '/(\d+)\.html') 
```

`\d``[[:digit:]]`..等价于 [0-9]的类简写
`+`.. 一个或多个前面的原子
`()`.. 括号捕获匹配
`\.`.. 必须转义点以释放其特殊含义

测试：

```
WITH x(link) AS (
    VALUES
     ('http://www.site.com/prod/bunch-of-text-of-different-length/12345687.html')
    ,('http://www.site.com/prod/bunch-of-text/12345688.html')
    ,('http://www.site2.com/prod/123/text-of-di456fferent-89-len/12345688.html')
    )
SELECT substring(link, '/(\d+)\.html') FROM x; 
```

[`regexp_matches()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)用于捕获多个匹配项，因此不是一个好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:29:42.390

我不是 postgresql 人，但它看起来有一些内置的正则表达式函数。请参阅[PostgreSQL 匹配函数](http://www.postgresql.org/docs/9.0/static/functions-matching.html)并找到它描述该`regexp_matches`函数的部分。`regexp_matches`返回一个数组 ({})。

```
SELECT regexp_matches(link, '([0-9]+)\.html$'); 
```

将此与`unnest`查看[PostgreSQL Arrays](http://www.postgresql.org/docs/9.0/static/arrays.html)结合起来：

```
SELECT unnest(SELECT regexp_matches(link, '([0-9]+)\.html$')) as matches; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T22:00:56.893

另一种选择是使用 substring 函数：

```
select substring(link from '[0-9]+')
from your_table; 
```

这假定 URL 中只有一个“数字”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:28:47.210

此代码段将为您提供任何 url 的文件名：

```
SELECT REVERSE(SUBSTRING(REVERSE(REPLACE('http://www.somewhere.com/folder/page.html', '\', '/')), 1, CHARINDEX('/', REVERSE(REPLACE('http://www.somewhere.com/folder/page.html', '\', '/'))) - 1)) as PageName 
```

**输出：**

> page.html

或者，如果您将 url 作为 nvarchar 变量传递：

```
SELECT REVERSE(SUBSTRING(REVERSE(REPLACE(@Url, '\', '/')), 1, CHARINDEX('/', REVERSE(REPLACE(@Url, '\', '/'))) - 1)) as PageName 
```

# css - 覆盖！媒体查询中的重要规则集？！不重要？

> ID：11639528
> 
> 赞同：1
> 
> 时间：2012-07-24T21:24:17.753
> 
> 标签：css, media-queries

想象一下……</p>

```
@media screen and (min-width: 55.5em) {
    aside[role="attend"] {
        margin:0 !important;
    }
}

@media screen and (min-width: 61.5em) {
    aside[role="attend"] {
        margin:0; /* still !important but shouldn't be */
    }
} 
```

有什么方法可以覆盖或“删除”`!important`声明，使其不再适用于更高的`min-width`值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:02:47.100

不; 级联的工作方式，无法撤消`!important`声明或使其“不重要”。

这与规则是否出现在不同的`@media`规则中或样式表中的任何其他位置无关。这意味着它与您一开始就没有媒体查询一样：

```
aside[role="attend"] {
    margin:0 !important;
}

aside[role="attend"] {
    margin:0;
} 
```

顺便说一句，如果同时满足了媒体查询`min-width: 55.5em`和`min-width: 61.5em`媒体查询，浏览器实际上会看到什么。

你最好找到一种方法来删除它并在你的第一条规则`!important`中使用更具体的选择器。`@media`

# spring-mvc - 警告：org.springframework.web.servlet.PageNotFound - 没有找到带有 URI 的 HTTP 请求的映射

> ID：11639531
> 
> 赞同：0
> 
> 时间：2012-07-24T21:24:30.183
> 
> 标签：spring-mvc

有人可以指出我在这里做错了什么，这是我收到的错误消息；

```
 WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/logicalideasJPA/contacts.html] in DispatcherServlet with name 'appServlet'

<context:property-placeholder location="classpath:hibernate.properties" />

<!-- DispatcherServlet Context: defines this servlet's request-processing 
    infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources 
    in the /WEB-INF/views directory -->
<beans:bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.logicalideasJPA.persistence" />
<context:component-scan base-package="com.logicalideasJPA.controller" />
<context:component-scan base-package="com.logicalideasJPA.dao" />

<!-- Enables the Spring MVC @Controller programming model -->
<tx:annotation-driven transaction-manager="transactionManager" />

<!-- Declare a JPA entityManagerFactory -->
<beans:bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <beans:property name="dataSource" ref="dataSource" />
    <beans:property name="packagesToScan" value="com.logicalideasJPA.persistence" />
    <beans:property name="loadTimeWeaver">
        <beans:bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </beans:property>
    <beans:property name="jpaVendorAdapter">
        <beans:bean
            class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <beans:property name="showSql" value="true" />
        </beans:bean>
    </beans:property>
</beans:bean>

<!-- Declare a transaction manager -->
<beans:bean id="transactionManager"
    class="org.springframework.orm.jpa.JpaTransactionManager">
    <beans:property name="entityManagerFactory" ref="entityManagerFactory" />
    <beans:property name="dataSource" ref="dataSource" />
</beans:bean>

<beans:bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <beans:property name="driverClassName" value="${database.driver}" />
    <beans:property name="url" value="${database.url}" />
    <beans:property name="username" value="${database.user}" />
    <beans:property name="password" value="${database.password}" />
</beans:bean> 
```

```
@Controller
public class ContactController {

@Autowired
private ContactsImp serviceInter;

@RequestMapping(method = RequestMethod.GET)
public String showContactForm(Map<String, Contacts> map){
    Contacts contacts = new Contacts();
    map.put("contacts", contacts);
    return "contacts";
}

<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets 
    and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

非常感谢一些帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:01:54.090

您似乎正在向“/logicalideasJPA/contacts.html”发送请求，但没有处理此请求的控制器。

```
@Controller
@RequestMapping("/contacts")
public class ContactController {

@Autowired
private ContactsImp serviceInter;

@RequestMapping(method = RequestMethod.GET)
public String showContactForm(Map<String, Contacts> map){
    Contacts contacts = new Contacts();
    map.put("contacts", contacts);
    return "contacts";
} 
```

通过上述更改，您的请求应在 /contacts uri 处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:30:11.807

我认为这与您从控制器返回联系人的事实有关。默认视图解析器正在寻找合适的 HTML 文件来显示结果。您是要返回响应正文实体还是直接访问某种视图页面？

# load - CouchDB 转储到文件并从文件加载

> ID：11639534
> 
> 赞同：26
> 
> 时间：2012-07-24T21:24:41.173
> 
> 标签：load, couchdb, backup, dump, database-backups

我无法在两台 couchdb 服务器之间复制，所以我想从一台服务器转储到文件并从文件加载到另一台服务器。

我用这个语句转储，它工作正常：

```
curl -X GET http://localhost:5984/<DATABASE_NAME>/_all_docs?include_docs=true > FILE.txt 
```

但是当我使用这个语句加载时：

```
curl -d @FILE.txt -H “Content-Type: application/json” -X POST http://localhost:5984/<DATABASE_NAME>/_bulk_docs 
```

它失败了：

```
curl: (6) Could not resolve host: application; Host not found {"error":"bad_content_type","reason":"Content-Type must be application/json"} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-13T12:54:57.710

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-18T08:34:43.577

You can use the following command line to convert the output of the curl command to the “docs” structure that the `_bulk_docs` requires:

```
curl -X GET 'http://localhost:5984/mydatabase/_all_docs?include_docs=true' | jq '{"docs": [.rows[].doc]}' | jq 'del(.docs[]._rev)' > db.json 
```

[jq](http://stedolan.github.io/jq/) is the name of an excellent command line processor very useful (i.e. in this situation).

Hope it helps.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-25T04:38:09.440

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T09:52:23.020

As alternative solution, you may use `couchdb-load` and `couchdb-dump` utilities from [couchdb-python](https://github.com/djc/couchdb-python) project.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-23T07:31:29.810

Nolan from the PouchDB team makes some great tools. These will work well to dump and load from CouchDB (including attachments):

**Dump/Backup:**

[https://github.com/nolanlawson/pouchdb-dump-cli](https://github.com/nolanlawson/pouchdb-dump-cli)

**Load/Restore:**

[https://github.com/nolanlawson/pouchdb-load](https://github.com/nolanlawson/pouchdb-load)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-06T13:11:08.690

There's also [github.com/danielebailo/couchdb-dump](https://github.com/danielebailo/couchdb-dump) , which might help to clean out old transients, the authors state:

> We've seen 15GB database files, containing only 2.1GB of raw JSON, reduced to 2.5GB on disk after import!

There are also hints on how update_seq works if you want do sync clusters.

# c# - 在 Linq vs foreach 循环中调用 HashSet.Add(item)

> ID：11639535
> 
> 赞同：3
> 
> 时间：2012-07-24T21:24:50.737
> 
> 标签：c#, linq

在以下代码段中需要帮助：

```
static void Main(string[] args)
{
    var customers = new HashSet<Customer>();
    var action = new Action(() =>
    {
        var innerCustomers = new Customer[] 
        { 
            new Customer { CustomerID = 1, CustomerName = "C 1" }, 
            new Customer { CustomerID = 2, CustomerName = "C 2" }, 
        };

        innerCustomers.Select(c => customers.Add(c)); //doesn't work

        foreach (var customer in innerCustomers) 
            customers.Add(customer); //works fine
    });

    action();
} 
```

`innerCustomers.Select(c => customers.Add(c));`在“客户”集合中插入记录方面似乎没有工作，但是，该行下方的“foreach”工作正常。有人知道为什么它不能在 linq 中工作吗？我知道我没有从 select 方法中选择任何东西

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T21:26:24.763

你`Select`它，但不要对结果做任何事情。由于 LINQ 的惰性求值（它通过 按需生成结果`IEnumerable`），它不会被执行。使用`foreach`循环，这是最干净的解决方案。

（另一种解决方案是改用 a`List<Customer>`并调用`ForEach`它......但除非你有充分的理由想要使用带有回调的方法，否则没有优势。）

**编辑：**实际上，如果您所做的只是向 中添加元素`HashSet`，那么最干净的解决方案是[`UnionWith`](http://msdn.microsoft.com/en-us/library/bb342097.aspx)：

```
customers.UnionWith(innerCustomers); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T21:27:31.877

不确定您要做什么，但是如果您必须使用 Select，那么您可以这样做：

```
innerCustomers.Select(c => { customers.Add(c); return c; }); 
```

# css - 没有值的 CSS 属性

> ID：11639536
> 
> 赞同：2
> 
> 时间：2012-07-24T21:24:54.840
> 
> 标签：css

我正在为用户设计一个 GUI 来创建 Web 按钮。我想知道不为 CSS 属性输入值是否可以？

如果用户没有选择一个属性，我已经研究过插入属性的默认值。但是我遇到了没有像“颜色”这样的默认值的属性的问题。我在以下位置找到了所有 CSS 属性的参考：[https ://developer.mozilla.org/en/CSS/CSS_Reference](https://developer.mozilla.org/en/CSS/CSS_Reference)

我已经在所有 5 个主要浏览器的最新版本中对其进行了测试，并且可以正常工作；但我不确定这在未来是否会一直如此。如果用户没有为它选择一个值，我已经考虑过使用 PHP 以编程方式删除整个属性。但是我想知道您对在使用 CSS 属性之前没有指定值的想法是什么？

CSS：

```
.btn {
    background-color: #000000;
    border-color: #666666;
    border-style:;
    border-width:2px;
    color:;
} 
```

**编辑**

这是我的解决方案：

我只是删除了用户未使用 PHP 定义的任何 CSS 属性。

```
$css = preg_replace('/[\n\r].+:;/i', '', $css); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T22:29:30.657

没有值的声明，例如`color:;`，违反了 CSS 语法，所以从书上看是不行的。另一方面，CSS 2.1 规范定义了强制[错误处理原则](http://www.w3.org/TR/CSS2/syndata.html#parsing-errors)，即用户代理应忽略此类规则（请注意，该规范明确提到了缺失的属性值作为“错误声明”的示例）。

这意味着该属性的值将由用户代理确定，就好像您的样式表的这一部分不存在一样。因此，该值将由可能应用的其他样式表定义（包括浏览器默认样式表，它为属性定义浏览器默认值），或者在其他样式表中没有相关设置的情况下，由属性的初始值定义为在 CSS 规范中指定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T21:32:02.423

虽然在某些情况下属性确实具有默认值（*），但它通常不会那样工作。规范所做的是提供*初始*值，这些初始值通常在规范中提到。`color`是少数例外之一，默认值是用户首选项的值（在 Firefox 中，编辑 -> 首选项 -> 内容 -> 颜色 -> 文本）。大多数其他人确实具有明确定义的初始值，例如`border-style`它的`none`.

这是官方的 W3C 文档，也就是标准： [http ://www.w3.org/TR/CSS21/](http://www.w3.org/TR/CSS21/)

绝对清楚，属性必须根据规则具有值。没有值的属性是错误的，将被忽略。

(*) 示例：在诸如 之类的简写中`border:green`，您不必指定`border-style`and `border-width`，然后将它们设置为其默认（初始）值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T12:21:59.077

您可以使用*初始*属性值，这将使属性使用它的初始值，或浏览器的默认值。我不确定对它的支持，但我很确定我已经使用它很长时间了，它至少在 IE8+ 中一直对我有用。

```
color: initial; 
```

# javascript - 有没有办法让 JavaScript 函数知道它是正常调用还是与“new”一起调用？

> ID：11639537
> 
> 赞同：2
> 
> 时间：2012-07-24T21:24:55.073
> 
> 标签：javascript

> **可能重复：**
> [如何检测函数是否被称为构造函数？](https://stackoverflow.com/questions/367768/how-to-detect-if-a-function-is-called-as-constructor)

我想在 JavaScript 中有一个函数，如果它被正常调用或被调用以创建一个新实例，它的行为会有所不同。可能有许多不同的用途，其中两个功能可以相关或不相关。`new`当函数总是用于创建新实例时，一种用途是使编码器不必键入：

```
function MyClass(arg1, arg2) {
  if(/* not called with "new" */) return new MyClass(arg1, arg2);

  // instance initialization stuff here...

} 
```

这样我就不必打字了`var x = new MyClass(arg1, arg2)`：打字就足够了`var x = MyClass(arg1, arg2)`（但前者也不会错）。

只是可能用途的一个例子。

这可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:30:08.927

没有办法绝对确定函数是如何被调用的，但你可以很确定 using `this instanceof MyClass`，如下所示：

```
if (this instanceof MyClass) {
    // Was called with `new`
} else {
    // Was called as regular function
} 
```

但是有一些边缘情况，例如我可以创建一个 MyClass 的新实例，然后这样做`MyClass.call(new MyClass)`——这会产生误报，因为外部`MyClass`没有被调用`new`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:29:46.507

我能想到的唯一选择是测试`this`. 你可以试试：

```
function MyClass(args) {
    var isInstance = this instanceof MyClass;
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:29:56.773

```
if(this instanceof MyClass) 
```

可能是您正在寻找的。它可以被`.call`and愚弄`.apply`，但是如果传递了一个实例，构造对象应该没有任何问题，无论如何。

# java - 类内集合的自定义吸气剂？

> ID：11639544
> 
> 赞同：0
> 
> 时间：2012-07-24T21:25:38.393
> 
> 标签：java

如果一个类具有集合数据结构，可能是 hashmap 等，是否可以在类中使用 .get(id) 来访问集合，还是应该编写一个调用 hashmap.get(id) 的方法？

我不确定吸气剂是否更适合来自外部请求的公共访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:28:06.787

翻转问题：为什么*不*直接使用哈希图？

最终，答案取决于你实际在做什么。*编写从类内部*获取哈希值的方法是零理由，除非您实际上需要做的不仅仅是简单地访问哈希值。您的班级是地图的所有者——随心所欲。

如果您*将*地图公开给您班级的用户，答案可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:30:30.890

根据您想要做什么，这两种方法都是可以接受的——我能想到的创建访问器的最佳理由是它可以用来维护不变量——无论是在类内部还是外部——但如果你不需要，只需直接使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T21:58:21.207

我会按照客户认为合适的方式返回整个 Collection 供客户使用。

```
package misc;

import java.util.ArrayList;
import java.util.List;

public class Misx {
    private List<String> list = new ArrayList<String>();

    public List<String> getList() {
        return list;
    }

    public void setList(List<String> list) {
        this.list = list;
    }
} 
```

# actionscript-3 - Loading a child SWF AS3-->AS3 - Child loops indefinitely

> ID：11639545
> 
> 赞同：1
> 
> 时间：2012-07-24T21:25:42.770
> 
> 标签：actionscript-3, flash, flash-cs5

I have an issue with a child SWF loaded into a parent. The loading is pretty basic, everything should be ok. The problem is when the child has more than one frame, the SWF just loops indefinitely. When completed the child will have multiple frames and forward/back buttons, but I've distilled it down to two frames with a different image on each and no code save for stop(); I have another parent which I didn't create (and you don't want to see) that will accept an AS2 SWF but loops on AS3, which is where this whole project originated... Any insight is greatly appreciated....

This is the code for the parent:

```
var _swfLoader:Loader;
var _swfContent:MovieClip;

loadSWF("test4.swf");

function loadSWF(path:String):void {
   var _req:URLRequest = new URLRequest();
   _req.url = path;

   _swfLoader = new Loader();
   setupListeners(_swfLoader.contentLoaderInfo);

   _swfLoader.load(_req);
}

function setupListeners(dispatcher:IEventDispatcher):void {
   dispatcher.addEventListener(Event.COMPLETE, addSWF);
   dispatcher.addEventListener(ProgressEvent.PROGRESS, preloadSWF);
}

function preloadSWF(event:ProgressEvent):void {
   var _perc:int = (event.bytesLoaded / event.bytesTotal) * 100;
   // swfPreloader.percentTF.text = _perc + "%";
}

function addSWF(event:Event):void {
   event.target.removeEventListener(Event.COMPLETE, addSWF);
   event.target.removeEventListener(ProgressEvent.PROGRESS, preloadSWF);

   _swfContent = event.target.content;
   _swfContent.addEventListener("close", unloadSWF);

   addChild(_swfContent);
}

function unloadSWF(event:Event):void {
   _swfLoader.unloadAndStop();

removeChild(_swfContent);
   _swfContent = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:35:27.840

Did DaveGaur answer your question here? [AS3 Stop external swf](https://stackoverflow.com/questions/2365695/as3-stop-external-swf?rq=1)

By default, when a MovieClip is added to stage, it will play. If the MovieClip only has one frame, this will not look different. Complete event is not called until all frames and children are loaded. Dave said the INIT event is called when first frame is ready to play. So, for your code, Dave might have suggested something like this near setupListeners:

```
dispatcher.addEventListener(Event.INIT, stopContent, false, 0, true);

function stopContent(event:Event) {
    event.target.removeEventListener(Event.INIT, stopContent);
    _swfContent = event.target.content as MovieClip;
    _swfContent.stop();
} 
```

# javascript - 使用 emberjs 测试视图控制器

> ID：11639547
> 
> 赞同：1
> 
> 时间：2012-07-24T21:25:53.947
> 
> 标签：javascript, ember.js, jasmine, jasmine-jquery

我有一个 BuildingBlocks 视图，其中包含这样的模板：

```
{{#each controller}}
  {{view App.BuildingBlockView contentBinding="this"}}
{{/each}} 
```

我正在尝试使用控制器测试此视图是否在每个帖子上循环。
我正在使用茉莉花。

我已经创建了这样的视图

```
App.buildingBlocksView = App.BuildingBlocksView.create()
Em.run ->
  App.buildingBlocksView.append() 
```

我想用 3 个 BuildingBlocks 填充这个视图的控制器，这样我就可以测试这个视图是否包含 3 个元素。

请问谁能告诉我该怎么做？

到目前为止，我正在这样做，但不起作用。

```
App.buildingBlocksController = App.BuildingBlocksController.create()
App.buildingBlocksView.set("controller", App.buildingBlocksController.content)
App.buildingBlocksView.controller.pushObject(App.BuildingBlock.createRecord(), App.BuildingBlock.createRecord(), App.BuildingBlock.createRecord())
expect(App.buildingBlocksView.$('.building-block').length).toEqual(3) 
```

但我收到错误无法调用未定义的方法'pushObject'

请帮助瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:27:08.223

看起来你在正确的轨道上 - 使用茉莉花的道具。

首先，我没有看到您问题中的定义，因此请仔细检查 App.BuildingBlocksController 是 Ember.ArrayController 的子类

假设是这种情况，您需要在创建实例时设置初始内容数组。然后将视图的控制器属性设置为控制器实例，并像以前一样推送对象。

```
App.buildingBlocksController = App.BuildingBlocksController.create({ content: [] })
App.buildingBlocksView.set("controller", App.buildingBlocksController)    
App.buildingBlocksView.controller.pushObject(App.BuildingBlock.createRecord(), App.BuildingBlock.createRecord(), App.BuildingBlock.createRecord()) 
```

那应该可以解决您在 pushObject 中遇到的问题。我怀疑你需要在 Ember.run() 循环中移动上面的内容，否则期望会失败，因为 Ember 不会更新 DOM。

# ios - 调用 setImage: 后 UIButton 不会更新它的图像

> ID：11639551
> 
> 赞同：4
> 
> 时间：2012-07-24T21:26:10.843
> 
> 标签：ios, uiview, uibutton

这是问题 - 我有一个类，它是 UIView 的子类（一张卡片）。它在自身上创建一个按钮，并在用户触摸它时调用 changeStateIndicator:。

然后在按下按钮后卡片必须翻转，并且按钮应该改变它的颜色（实际上是图像）。但它根本没有发生，所以翻转在按钮改变之前开始。这是我的代码：

```
//Adding a button to my view
UIButton *changeStateButton = [UIButton buttonWithType:UIButtonTypeCustom];
[changeStateButton setImage:[UIImage imageNamed:imageToInitWith] forState:UIControlStateNormal];
[changeStateButton setImage:[UIImage imageNamed:imageToInitWith] forState:UIControlStateHighlighted];
changeStateButton.frame = CGRectMake(0, 0, 30, 30);
changeStateButton.center = CGPointMake(self.bounds.size.width/2+([myWord length]*8)+17, 35);
changeStateButton.tag = 77;
[changeStateButton addTarget:self action:@selector(changeStateIndicator:) forControlEvents:UIControlEventTouchUpInside];
[self addSubview:changeStateButton];

//Method which is called when the button is touched
- (void)changeStateIndicator:(UIButton *)sender
{
    [sender setImage:[UIImage imageNamed:@"StateYellow"] forState:UIControlStateNormal];
    [sender setImage:[UIImage imageNamed:@"StateYellow"] forState:UIControlStateHighlighted];
    currentWord.done = [NSNumber numberWithInt:currentWord.done.intValue-10];
    [self prepareForTest];
}

//Method which flips the card
- (void)prepareForTest
{
    testSide = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"cal_small3"]];
    [UIView transitionFromView:self toView:testSide duration:0.5 options:UIViewAnimationOptionTransitionFlipFromRight completion:nil];
} 
```

我的猜测是发件人在方法 -changeStateIndicator 结束之前不会更改其图像，但我不太确定这是实际问题。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:21:16.257

试着推迟这个电话：

```
dispatch_async(dispatch_get_main_queue(), ^{ [self prepareForTest]; }); 
```

如果那种工作，但它仍然不是你想要的，那么使用 dispatch_after() 或

```
[self performSelector:@selector(prepareForTest) withObject:nil afterDelay:0.25f]; 
```

（如果需要，您可以使用时间为“0”的第二次呼叫而不是调度 - 同样的事情。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:16:58.517

您需要在运行循环中再执行一次，以便按钮在`drawRect:`调用其方法时重绘自身。该`setImage:`方法只是设置它在这样做时将使用的图像。相反，您在此之前启动动画。这就是为什么一个非常短的延迟可以解决问题的原因。

解决这个问题的另一种可能在美学上更具吸引力的方法是为按钮图像更改设置动画。当该动画完成时，启动另一个。

# java - × 274612 使用 Java 应用程序在 textarea 上检索和显示 Msql 数据库数据

> ID：11639558
> 
> 赞同：0
> 
> 时间：2012-07-24T21:26:31.613
> 
> 标签：java, swing

我创建了一个有 4 列的 MySQL 数据库。我想读取数据库的第二列并将其显示在文本区域中。我有当我点击一个按钮时调用的方法 display() 。该方法的代码是：

```
public void display(){
    db=new Database();
    try{
        int n=Integer.parseInt(field.getText());

        ResultSet rset=Database.conn.createStatement().executeQuery("select * from mymusic where trackNumber like'"+n+"'");
        while(rset.next()){
            area.setText(rset.getString("Songlocation"));
        }
        rset.close();

    }catch(SQLException e){
        JOptionPane.showMessageDialog(this,"Database error","Warning",JOptionPane.ERROR_MESSAGE);
    }
    catch(NumberFormatException numfom)
    {
        JOptionPane.showMessageDialog(this,"Invalid Entry","Warning",JOptionPane.ERROR_MESSAGE);
    }

} 
```

当我执行代码并且因为没有显示时，线程“AWT-EventQueue-0”java.Lang.NullPointerException 中的异常被抛出。数据库连接完美，因为我可以成功更新数据库。帮助我在文本区域打印数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:57:26.277

如果没有完整的堆栈跟踪，很难确定究竟是什么导致了`NullPointerException`.

查看源代码传递时`Integer.parseInt`不会抛出 a ，并且也可以处理值。`NullPointerException``null``JTextArea#setText``null`

剩下的候选者：`field`can be `null`，`rset`can be `null`（不太可能在代码中的其他位置触发 NPE），`area`can be `null`。应该非常直接地确定您何时拥有堆栈跟踪或使用调试器。

除此之外，还有其他一些建议：

*   您应该将您的`rset.close()`语句移动到一个`finally`块中以确保它被关闭，即使发生异常也是如此
*   您不应在事件调度线程上查询数据库。请改用工作线程。数据库访问是一项缓慢的操作，这将导致 UI 被阻塞，直到查询完成。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程

# codeigniter - publicHtml下的CodeIgniter系统文件夹

> ID：11639564
> 
> 赞同：0
> 
> 时间：2012-07-24T21:26:58.550
> 
> 标签：codeigniter

我想将 Codeigniter 的系统和应用程序文件夹移动到 public_html 文件夹下。

```
public_html
[folder_name] => application & systemfolder 
```

所以我更改了 index.php 中的路径，但没有任何效果。该站点仅输出系统文件夹的路径不正确。

我的路是这样的

```
/var/www/.... 
```

这是正确的。100 %

我认为问题出在这里：

我必须以 root 身份创建 [folder_name]，因为 ftp_user 没有创建文件夹的权限。所以我想这是一个权限问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:07:03.190

我会尽可能地这样做，但您需要将文件夹中应该存在的 index.php 文件更新`public_html`到新位置。

IE

```
$application_folder = '../folder_name/application';
$system_folder = '../folder_name/system'; 
```

这样，只有应用程序/系统文件夹存在于您的根文件夹中`index.php`。`public_html`

# android - eclipse android common xml editor 停止正确渲染文本（随机）

> ID：11639565
> 
> 赞同：9
> 
> 时间：2012-07-24T21:27:03.200
> 
> 标签：android, eclipse, windows-7-x64, android-xml

因此，在 Eclipse 中编辑 Android XML 时，我遇到了（并且曾经遇到过）这个问题。我尝试了不同版本的 eclipse 和不同的 Android SDK 以及整个重新下载等等，但仍然出现此错误。在 Eclipse 中编辑 XML 时，以某种不可预测的方式，文本会随机地明显地错位。文本本身仍然在同一个地方，但它被渲染到不同的地方。除非我完全重新启动 Eclipse，否则问题不会消失。

下面的三张图片都是完全相同的文件，没有任何修改。

这张图是我全选时的样子（ctrl+A）

![全选时的外观 (ctrl+A)](../Images/d0e759d844d7e8d50b5967a2e1e02ae6.png)

这张照片是我取消选择时的样子

![取消选择文本时的外观](../Images/2770024d4f9166332ac4c3f9003e605d.png)

最后一个是我重新启动eclipse时的样子。请注意，这是正确的外观，它应该一直都是这样。

![当我重新启动 Eclipse 时它的外观（这就是它的外观）](../Images/8760441dea38812dc0d66a2d59a92741.png)

我遇到这些问题已经很长时间了，这很烦人。我还多次重新安装了 Windows-7 x64，但问题从未消失。请帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:09:50.183

我解决了格式化文档的问题：右键单击编辑器窗口，从菜单中选择 Source -> format，或者简而言之：Ctrl+Shift+F

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T05:52:32.740

我也面临类似的问题，当您在 xml 源视图中选择一行时，这些行会不断上下跳跃，有时会更改为上一行。但是，如果您在某些非 android xml 编辑器中打开 xml，则它可以正常工作。无法使用 android 图形编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:51:36.137

关闭和打开标签对我不起作用。但是确实让它停止的是进入首选项，并在 XML/XML 文件/编辑器下选择清除空白行并应用。

我不知道它是否会继续发生。

# c# - 如何调用由一些不使用 DLL 包装器的 dll 包装的本机方法？

> ID：11639567
> 
> 赞同：0
> 
> 时间：2012-07-24T21:27:10.343
> 
> 标签：c#, .net, .net-4.0, native

所以我看着反射器，看到类似的东西

```
[MethodImpl(MethodImplOptions.InternalCall), WrapperlessIcall]
public static extern blablabla(); 
```

它存在于我正在查看的某个 DLL 中。我想知道如何从我的代码中调用它，该 dll 在我的但项目中没有直接使用该 DLL C# 函数包装器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:36:46.513

通常 MethodImplOptions.InternalCall 指的是 mscorlib，它包含我们不允许直接调用的内部方法（如果你尝试，你会得到一个异常）。

如果这不是 mscorlib 并且您询问如何 p/Invoke，请查看[Platform Invoke Tutorial](http://msdn.microsoft.com/en-us/library/aa288468.aspx)。

# javascript - 生成可编辑“标签”的 javascript 库/jquery 插件

> ID：11639573
> 
> 赞同：2
> 
> 时间：2012-07-24T21:27:41.787
> 
> 标签：javascript, jquery

我敢肯定这个问题的标题有点令人困惑。我正在寻找的一个示例位于[evite.com 的添加客人页面](http://new.evite.com/#create/guests%3aid=btn_add_guests)。请注意，它允许您在文本框中输入电子邮件地址。当您点击“空格”时，它会验证电子邮件地址（基于语法）并将其包装在一个元素中，并以适当的样式完成。它还允许您单击电子邮件地址旁边的“x”以删除地址或单击地址进行编辑。

我不关心电子邮件地址验证的细节。我对这个组件的通用行为更感兴趣。具体来说，在检测到某个热键后将用户输入的一些文本包装在一个元素中。

在我重新发明轮子之前，我想知道是否有某种 jquery 插件已经做了类似的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:32:36.570

看看这个问题：[https ://stackoverflow.com/questions/7462658/jquery-input-tag-plugins](https://stackoverflow.com/questions/7462658/jquery-input-tag-plugins)

它包含几个 jQuery 插件的链接，例如[TagManager](http://welldonethings.com/tags/manager)和[jQuery TagIt](http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/)。

还包含以下答案：

> Stack Overflow 标签系统受到这个插件的“极大启发” - [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)
> 来源 - [https://meta.stackexchange.com/questions/102510/can-i-use-标记文本框脚本](https://meta.stackexchange.com/questions/102510/can-i-use-the-tag-textbox-script)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:30:40.207

我在几个项目中使用它并且效果很好：http: [//jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/](http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/)

演示： [http ://webspirited.com/tagit/](http://webspirited.com/tagit/)

# python - ImportError：没有名为 oauth2 的模块

> ID：11639577
> 
> 赞同：2
> 
> 时间：2012-07-24T21:28:05.507
> 
> 标签：python, path, python-2.7, importerror, pythonpath

我通过下载 tar.gz 包并执行`python setup.py install`. 但是我收到了这个错误

```
bash-3.2$ python
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import oauth2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named oauth2
>>> 
```

oauth2 的路径在 PYTHONPATH 中（所以这不应该是问题），因为我将此行添加到 ~/.bashrc：

```
PYTHOHPATH=$PYTHONPATH:/Users/me/Downloads/oauth2-1.5.211/ 
```

但是，当我这样做时：

```
bash-3.2$ cd /System/Library/Frameworks/Python.framework/Versions/2.7/
bash-3.2$ ls
Extras      Headers     Mac     Python      Resources   _CodeSignature  bin     include     lib
bash-3.2$ Python
Python 2.7.1 (r271:86882M, Nov 30 2010, 09:39:13) 
[GCC 4.0.1 (Apple Inc. build 5494)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import oauth2
>>> 
```

它工作得很好。知道我应该如何安装 oauth2 以避免 ImportError from`python`吗？

P/S：这是`python`命令的simlink

```
python -> ../../System/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:19:45.627

我没有答案，但我有一些一般性建议：

使用您打算从中使用它的同一 python运行`python setup.py install`（在您的情况下，一个是大写的，另一个不是）。

我总是`export`我的 bashrc 变量以确保它们是全局的，但我不确定这是你的问题。

在 pwd 中运行脚本时，始终使用`./`. 在您的情况下，运行 python`./Python`以确信您正在运行您认为正在运行的可执行文件。

检查 PYTHONPATH 的拼写。如果您认为自己做对了，请 `import sys; print('\n'.join(sys.path))`从您的 python 会话中执行并确保存在适当的目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T23:02:47.280

看起来您安装了两个不同版本的 python，其中一个是您使用 Python 而不是 python 启动的。

由于您的第二个示例有效，看起来您已经使用 Python 安装了 oauth2。

# mysql - 如何从字符串中提取日期

> ID：11639582
> 
> 赞同：2
> 
> 时间：2012-07-24T21:28:16.083
> 
> 标签：mysql

我已将日期保存为字符串，例如：`Fri Apr 04 15:58:43 BST 2014` 年份总是在末尾，我想进行查询以获取年份小于特定年份的记录，例如 2012。这可能吗？如何？是否可以从 mysql 解决此问题？即，将日期从字符串转换为日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:37:20.123

您可以使用 MySQL[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数将这些值转换为 MySQL 日期：

```
mysql> select str_to_date('Fri Apr 04 15:58:43 BST 2014','%a %b %d %H:%i:%S BST %Y');
+------------------------------------------------------------------------+
| str_to_date('Fri Apr 04 15:58:43 BST 2014','%a %b %d %H:%i:%S BST %Y') |
+------------------------------------------------------------------------+
| 2014-04-04 15:58:43                                                    |
+------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

这是一个粗略的示例，使用您的示例字符串来说明一个查询以返回日期在 2012 年之前的所有行。它将需要全表扫描，因此速度不会很快，但它说明了您需要做什么的基本概念：

```
select *
from your_table
where str_to_date(your_column,'%a %b %d %H:%i:%S BST %Y') < '2012-01-01' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:32:27.443

这是一个基线查询

```
SELECT REVERSE(LEFT(REVERSE('Fri Apr 04 15:58:43 BST 2014'),4)); 
```

在这里执行

```
mysql> SELECT REVERSE(LEFT(REVERSE('Fri Apr 04 15:58:43 BST 2014'),4));
+----------------------------------------------------------+
| REVERSE(LEFT(REVERSE('Fri Apr 04 15:58:43 BST 2014'),4)) |
+----------------------------------------------------------+
| 2014                                                     |
+----------------------------------------------------------+
1 row in set (0.00 sec)

mysql> 
```

天哪，我在想什么？？？我实际上是在解码它

```
SET @datestring = 'Fri Apr 04 15:58:43 BST 2014';
SELECT CONCAT(YYYY,'-',MM,'-',DD,' ',HHMMSS) dt FROM
(SELECT REVERSE(LEFT(REVERSE(@datestring),4)) as YYYY,
SUBSTR(FLOOR((LOCATE(LEFT(SUBSTR(@datestring,5),3),'JanFebMarAprMayJunJulAugSepOctNovDec')+2)/3)+100,2) MM,
SUBSTR(@datestring,9,2) DD,
SUBSTR(@datestring,12,8) HHMMSS) A; 
```

我的解码工作

```
mysql> SET @datestring = 'Fri Apr 04 15:58:43 BST 2014';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT CONCAT(YYYY,'-',MM,'-',DD,' ',HHMMSS) dt FROM
    -> (SELECT REVERSE(LEFT(REVERSE(@datestring),4)) as YYYY,
    -> SUBSTR(FLOOR((LOCATE(LEFT(SUBSTR(@datestring,5),3),'JanFebMarAprMayJunJulAugSepOctNovDec')+2)/3)+100,2) MM,
    -> SUBSTR(@datestring,9,2) DD,
    -> SUBSTR(@datestring,12,8) HHMMSS) A
    -> ;
+---------------------+
| dt                  |
+---------------------+
| 2014-04-04 15:58:43 |
+---------------------+
1 row in set (0.00 sec)

mysql> 
```

# c# - Combobox.Visible 属性不起作用

> ID：11639583
> 
> 赞同：4
> 
> 时间：2012-07-24T21:28:25.467
> 
> 标签：c#, winforms, c#-4.0, combobox, textbox

晚上，我在一个静态类中有以下代码，它可以帮助我的 userInterface 部分类。每当我到达检查组合框/文本框是否可见的部分时：

```
if (cb.Visible == true) 
```

&

```
if (tb.Visible == true) 
```

即使控件在表单上可见，它也总是错误的。

有任何想法吗？

谢谢

```
public static bool VerifyTableLayoutControlsContainData(TableLayoutPanel tlp)
    {
        foreach (Control input in tlp.Controls)
        {
            ComboBox cb = input as ComboBox;
            if(cb != null)
            {
                if (cb.Visible == true)
                {
                    if (string.IsNullOrEmpty(cb.SelectedItem.ToString()))
                    {
                        return false;
                    }
                }
            }

            TextBox tb = input as TextBox;
            if (tb != null)
            {
                if (tb.Visible == true)
                {
                    if (string.IsNullOrEmpty(tb.Text))
                    {
                        return false;
                    }
                }
            }
        }
        return true;
    } 
```

![截屏](../Images/d1754a0c967e8fd13b5e5dbc6a7eaa40.png)

**编辑1：**

用户界面代码

```
 private void uiBtnDataVerification_Click(object sender, EventArgs e)
    {
        if (VerifyingData != true)
        {
            AllInputsContainDataCsvFileVerificationStage = true;
            //Check all inputs have something in them
            InputsContainDataCsvFileVerificationStage();

            if (AllInputsContainDataCsvFileVerificationStage == false)
            {
                UiHelper.UpdateLog("One or more inputs has not been specified.", uiTxtOperationLog);
                return;
            }

            ...
        }
        else
        {
            //Cancel permanent cancellation token.
        }
    }

    public void InputsContainDataCsvFileVerificationStage()
    {

        ....

        if (UiHelper.VerifyTableLayoutControlsContainData(uiTableLayoutPanelColumnDataTypes)) { }
        else
        {
            AllInputsContainDataCsvFileVerificationStage = false;
        }

        ....
    } 
```

原始代码在 UiHelper 类中

**Edit2：**根据汤姆斯的建议，我做了以下更改

```
public userInterface()
    {
        InitializeComponent();

        uiTableLayoutPanelColumnDataTypes.VisibleChanged += new EventHandler(notifyMe);
        uiCBColumn1DataType.VisibleChanged += new EventHandler(notifyMe1);

        SortedColumnNames = new List<TextBox>();
        SortedDataTypes = new List<ComboBox>();
        AllInputsContainDataCsvFileVerificationStage = true;
    }

    public void notifyMe1(object sender, EventArgs e)
    {
        bool temp = uiCBColumn1DataType.Visible;
        MessageBox.Show("its been changed");
    }

    public void notifyMe(object sender, EventArgs e)
    {
        bool temp = uiTableLayoutPanelColumnDataTypes.Visible;
        MessageBox.Show("its been changed");
    } 
```

在单击按钮之前，我检查了 cb1 可见性属性设置为什么，它是 True。当我尝试通过原始方法进行检查时，我仍然会出错。

我难住了！！

**编辑3：**

似乎当我单击第二个选项卡时，组合框的可见属性 = false。

有谁知道为什么会这样？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T23:15:18.987

从我的评论：

> 运行验证码时，TableLayoutPanel 控件必须在屏幕上可见。如果它位于非活动 TabPage 后面，则它不在屏幕上，并且控件将 Visible 属性报告为 false，无论该属性是否在设计器中设置为 true。

# android - sdk manager 中没有包或平台

> ID：11639592
> 
> 赞同：1
> 
> 时间：2012-07-24T21:28:52.900
> 
> 标签：android, eclipse, eclipse-adt

在 sdk 管理器中，我看不到任何要安装的软件包或任何平台。

我尝试以管理员身份运行 sdk 并禁用防病毒程序和防火墙。而且我已经尝试卸载并重新安装了几次，但都没有成功。

我有版本 18 installer_r18_windows.exe，ADT 也是 18。

提前致谢 问候 Tasneem

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T04:53:39.790

我相信我找到了答案。我在 Windows 7 上，遇到了同样的麻烦。我做了以下事情：

1.  安装 android sdk 和最新的 Java 7 JDK
2.  找到 sdk 批处理文件“android.bat”（对我来说它位于 C:\Program Files (x86)\Android\android-sdk\tools）
3.  编辑此文件并转到运行带有变量 %java_exe% 的最终 java 命令的末尾
4.  在 %java_exe% 之后添加**-Djava.net.preferIPv4Stack=true**

对我来说，这条线最后看起来像这样：

```
call %java_exe% -Djava.net.preferIPv4Stack=true %REMOTE_DEBUG% -Dcom.android.sdkmanager.toolsdir="%tools_dir%" -Dcom.android.sdkmanager.workdir=%work_dir% -classpath "%jar_path%;%swt_path%\swt.jar" com.android.sdkmanager.Main %* 
```

然后，当我从 Windows 开始菜单运行“SDK Manager”时，我看到所有包都正确显示。 **笔记！当我运行它时，我右键单击并选择“以管理员身份运行”，我认为这总是一个好主意，以便它有权添加文件等。**

我通过找到这篇文章找到了这个解决方案：

[http://maven.40175.n5.nabble.com/java-net-SocketException-caught-when-connecting-to-the-target-host-Invalid-argument-connect-td5715972.html](http://maven.40175.n5.nabble.com/java-net-SocketException-caught-when-connecting-to-the-target-host-Invalid-argument-connect-td5715972.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:31:06.163

在尝试了一些艰难的答案后，我发现它比我想的更容易：只需打开`SDK-manager`并单击`Tools`-`Options`并单击`Enable preview tools`选项。然后你会看到`SDK-manager`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T04:15:29.880

尝试首先在 Eclipse 中更新您的 ADT 选择帮助->如果仍然无法正常工作，请检查所有更新也许您应该在 windows->preferences->android 中检查您的 SDK 位置

# objective-c - UILabel 不显示所有文本

> ID：11639593
> 
> 赞同：1
> 
> 时间：2012-07-24T21:28:52.993
> 
> 标签：objective-c, ios, uilabel

我有一个从 NSDictionary 获取其文本属性的 UILabel。由于某种原因，文本似乎总是在内容接近尾声时被截断。我正在动态调整标签的高度并在我的滚动视图中设置正确的内容大小，但文本仍然被截断。换行符属性也设置为自动换行。我将包含执行所有这些操作的代码：

```
CGSize maximumLabelSize = CGSizeMake(320,CGFLOAT_MAX);
CGSize expectedLabelSize = [newsText sizeWithFont:labelBody.font constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeWordWrap]; 
//adjust the label the the new height.
CGRect newFrame = labelBody.frame;
newFrame.size.height = expectedLabelSize.height;
labelBody.frame = newFrame;
//the constants on the height are images and what not added to the scrollView 
[scrollView setContentSize:CGSizeMake(320, newFrame.size.height + 170+250+50+250)];
NSLog(@"The height of the label for this article is: %f\n", newFrame.size.height); 
```

我在这里做错了什么吗？当我打印 newsText 的描述时，我得到了所有的文本，但是当它在标签中时它会被截断。这是我从 JSON 对象获得的文本：

周一，美国农业部部长汤姆维尔萨克宣布在该部门的主要保护计划中提供新的灵活性和援助，以便为牲畜生产者提供急需的帮助，因为七年来最广泛的干旱在美国各地加剧。Vilsack 还宣布了鼓励农作物保险公司为未支付保险费的农民提供较短宽限期的计划，因为预计一些农户在农作物年度结束时将难以维持生计。

“我们认识到我们要求保险公司做一些他们不需要做的事情，”他说。“我们希望与他们合作，因此在公司授权并允许这一额外宽限期的情况下，美国农业部将不会要求在该宽限期内支付未收取的保费。换句话说，我们不会要求保险公司向我们支付任何费用“他们还没有收到。所以希望在我们的行动和他们的行动之间，我们可以为生产者提供一定程度的帮助和帮助。”

在概述这些措施的评论结束时，维尔萨克再次提醒国会，只有通过新的农业法案才能真正缓解压力。

“对美国农村来说，没有什么比对该法案采取行动更重要的了。众所周知，对该法案采取行动很可能会恢复去年 9 月 30 日到期的牲畜生产者灾难计划。这些计划以及 SURE 计划提供的援助40万支付近40亿美元的援助和过去的水灾、火灾和旱灾援助，现在这种援助的需要并不大。众议院没有任何借口或理由不能处理这件事。 "

Vilsack 说最重要的是通过新法案，而不是创造某种扩展。

“延长 2008 年农业法案不会恢复灾难计划。因为它们已经过期，所以需要采取平权行动来恢复它们，如果你愿意的话，实际上可以再次通过它们。”

至于维尔萨克概述的其他具体措施，周一生效，“美国农业部将在参与保护计划的土地上开辟干草和放牧的机会，同时提供额外的财政和技术援助，帮助土地所有者度过这场干旱。我们将为农民通过鼓励农作物保险公司与农民合作度过这个充满挑战的时期来应对日益严重的干旱。由于恶劣的天气和自然灾害继续威胁着我们成千上万农民家庭的生计，我们希望您和您的社区知道美国农业部支持你。”

宣布的援助利用农业部长的现有权力帮助在美国农业部的四个计划中创造和鼓励灵活性：自然保护区计划 (CRP)、环境质量激励计划 (EQIP)、湿地保护区计划 (WRP) 和联邦作物保险计划。

美国农业部发布的亮点：

保护储备计划 (CRP)

为了帮助受干旱影响的农民和牧场主，维尔萨克正在利用他的自由裁量权允许在紧急情况下根据 CRP 增加的土地用于干草或放牧。CRP 是一项自愿计划，向生产者提供其土地的年度租金，以换取在农田上种植资源保护作物，以帮助防止侵蚀、提供野生动物栖息地和改善环境。CRP 英亩已可用于自然灾害期间的紧急干草和放牧，为牲畜提供​​急需的饲料。鉴于这场干旱的广泛性，牲畜的草料已经大幅减少。

宣布的行动将允许尚未归类为“严重干旱”但“异常干燥”的土地用于干草和放牧。这将增加牲畜的可用草料。只有在大部分地区已经过去的当地主要筑巢季节之后才允许干草和放牧。湿地、河流缓冲区和稀有栖息地等特别敏感的土地将不符合条件。

环境质量激励计划 (EQIP)

为了帮助受干旱影响的农民和牧场主，维尔萨克正在利用他的酌处权向农民和牧场主提供帮助，允许他们修改当前的 EQIP 合同，以允许进行规定的放牧、牲畜浇水设施、节水和其他保护活动，以应对干旱条件. EQIP 是一项自愿计划，为农业生产者在其土地上提供财政和技术援助，以解决农业和林地的自然资源问题。美国农业部自然资源保护局 (NRCS) 将与生产商密切合作，修改现有的 EQIP 合同，以确保成功实施计划的保护措施。如果保护活动因干旱而失败，NRCS 将寻找与农民和牧场主合作的机会，以重新应用这些活动。短期内，资金将用于受灾最严重的干旱地区。

湿地保护区计划 (WRP)

为了帮助受干旱影响的农民和牧场主，Vilsack 正在利用他的自由裁量权授权在受干旱影响地区的 WRP 地役权区域进行干草和放牧，这样的干草和放牧符合野生动物栖息地和湿地的保护。WRP 是一项自愿保护地役权计划，为农业生产者提供技术和财政援助，以恢复和保护其财产上宝贵的湿地资源。对于目前在 WRP 中注册土地的生产者，NRCS 加快了其兼容使用授权 (CUA) 流程，以允许进行干草和放牧。

联邦作物保险计划

为帮助可能因自然灾害而出现现金流问题的生产者，美国农业部将鼓励农作物保险公司自愿放弃对春季作物未支付的农作物保险费收取额外 30 天的利息，至 2012 年 11 月 1 日。无法及时支付保费的保单持有人每月需支付 1.25% 的利息罚金，直至付款为止。为了帮助生产者度过这个困难时期，维尔萨克致信农作物保险公司，要求他们自愿将生产者未支付的春季作物保费的任何利息的应计推迟到 11 月。反过来，为了帮助农作物保险公司，美国农业部将不会要求农作物保险公司在一个月后支付未收取的生产者保费。

到 2012 年为止，美国农业部已将 29 个州的 1,297 个县指定为灾区，使灾区所有符合条件的农场经营者都有资格获得低息紧急贷款。从加利福尼亚到特拉华州，越来越炎热和干燥的天气已经损害或减缓了玉米和大豆等农作物以及牧场和牧场的成熟。Vilsack 已指示 USDA 子内阁领导人前往受灾地区，以增加州级 USDA 工作人员的持续援助，并就该部门现有的灾害资源提供指导。为了向最需要帮助的人提供援助，国务卿最近将紧急贷款利率从 3.75% 降至 2.25%，同时将用于紧急干草或放牧的 CRP 英亩的生产者的年度租金从 25% 降低到 10%。Vilsack 还简化了秘书灾害指定流程，并将指定受灾县的时间缩短了 40%。

美国农业部机构已经与州和地方官员以及个人、企业、**农民**和牧场主合作了数周，因为他们开始了帮助人们重新站起来的过程。美国农业部为受近期灾害影响的州和个人提供各种资源。有关美国农业部工作的更多信息和更新，请访问[http://www.usda.gov/drought](http://www.usda.gov/drought)。

***粗体***文本是它切断的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:12:32.487

通常做这种事情的方法是创建标签，设置numberOfLines=0，设置lineBreakMode= UILineBreakModeWordWrap，设置文本，然后：

```
CGRect frame = label.frame;
frame.size = [label sizeThatFits:CGSizeMake(320, 10000)];
label.frame = frame; 
```

# php - 贝宝支付与 PHP 集成

> ID：11639597
> 
> 赞同：0
> 
> 时间：2012-07-24T21:29:21.110
> 
> 标签：php, paypal

我一直在寻找 Paypal Payment 与 PHP 的集成代码。

关于 PayPal Payment API 的文档太多了，我很困惑我必须使用哪个。

我希望你能帮助我使用什么 PayPal 代码。

这是我的网站付款的要点。

*   PHP网站
*   用户将输入他们想要放在网站上的资金数额。
*   用户单击提交按钮，它将重定向到 Paypal 页面（用户可以使用他或她的 Paypal 帐户登录）
*   用户通过 Paypal 成功支付资金后，它会重定向回网站。

如果你知道一个网站或文章来弄清楚这个过程，请在地址上发表评论。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:31:16.573

您可能想使用他们的 Adaptive Payments APi。他们的网站包含您应该需要的所有文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:09:12.857

如果它是一个捐赠网站，您可以使用贝宝按钮工厂获取一个按钮并添加到您的网站并完成。否则，请访问此站点并选择数字商品选项。[https://www.paypal-labs.com/integrationwizard/](https://www.paypal-labs.com/integrationwizard/) 这为您提供现成的代码 :) 最好的部分是在您的网站上付款。没有重定向:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-19T01:52:28.447

只是为了扩展我之前的答案，解决方案是 1.index.php-支付表单，2.ipn.php-响应贝宝的引擎，发送电子邮件并写入数据库和 3.reconcile.php-后端允许接收方审查交易的工具

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-05-19T01:47:23.690

我一直在研究类似的提议。我创建了一个简单的 php/html 页面，其中包含金额、发票号码和一些付款人详细信息（姓名、电子邮件和电话）。这将传递给贝宝，处理付款，然后返回。电子邮件被发送给付款的发送者和接收者，收款人有一个所有收到的付款的“对账”列表。查看 ingram.org.au 并点击 PayMyTradie 的链接。该概念基于拥有网站的商人（电工、管道工等），但由于他们不销售产品，因此几乎被排除在“购物车”支付流程。他们不再被排除在外，这个概念正在起飞！！

# vba - 将不同工作簿中的列移动到不同工作表中的一个工作簿中

> ID：11639598
> 
> 赞同：0
> 
> 时间：2012-07-24T21:29:25.307
> 
> 标签：vba

我真的很陌生。在这里，我有 30 个不同的 Excel 工作簿，每个工作簿都有一个工作表。

每个工作表包含 30-50 列和 130 行数据。我想要做的是我想将每个工作表的 A 列数据复制并移动到新的 Excel 工作簿的工作表 1 和每个工作表的 B 列到工作表 2 和每个工作表的 C 列到工作表 3 等等. 我需要做什么才能做到这一点？我需要创建一个 Marco 还是什么？如果我需要使用 Marco，代码是什么？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:08:45.060

这会将“A”列从一个工作簿和工作表移动到另一个工作簿和工作表的“A”列：

```
Workbooks("Excel.xls").Sheets("Sheet1").Range("A1:A30")=Workbook("Excel1.xls").Sheets("Sheet1").Range("A1:A30") 
```

这会将“A”列从一个工作簿和工作表移动到另一个工作簿和工作表的“A”列：

```
Workbooks("Excel.xls").Sheets("Sheet2").Range("A1:A30")=Workbook("Excel1.xls").Sheets("Sheet1").Range("B1:B30") 
```

这会将“C”列从一个工作簿和工作表移动到另一个工作簿和工作表的“A”列：

```
Workbooks("Excel.xls").Sheets("Sheet3").Range("A1:A30")=Workbook("Excel1.xls").Sheets("Sheet1").Range("C1:C30") 
```

*** 这只有在两个工作簿都显示在同一个 Excel 应用程序中时才有效！*** ***确保所有工作簿和工作表都是复数！***

# objective-c - Apple 允许“假 iOS 框架”吗？

> ID：11639601
> 
> 赞同：3
> 
> 时间：2012-07-24T21:29:41.470
> 
> 标签：objective-c, ios, frameworks

我最近偶然发现[了 Karl Stenerud 的模板](https://github.com/kstenerud/iOS-Universal-Framework)，我觉得它们很棒。我想知道苹果是否允许他们，或者苹果是否反对他们。我只是想确定一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:31:49.053

我也在我的应用程序中使用它们。由于它们是静态框架，因此 Apple 不允许在应用商店中使用它们。它们几乎只是一个捆绑了媒体文件的静态库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:34:01.327

不确定“假”是否适合他们，也许“定制”更好。是的，允许使用自定义框架。只有访问 Apple 的私有 API 才会导致拒绝。

# mysql - Oracle 日期聚合

> ID：11639606
> 
> 赞同：1
> 
> 时间：2012-07-24T21:30:05.707
> 
> 标签：mysql, sql, oracle

我在 Oracle 中有一个表，其中包含每日的值总和。

我的目标是让这张表显示每月的价值总和，而不是每天。

我通过使用这个查询完成了这个：

```
select to_char(dateid, 'YYYY-MM') as thedate, count(*)
from picture_table
group by to_char(dateid, 'YYYY-MM')
order by 1, 2 
```

这里的问题是我必须将这个 oracle 表转移到 MySQL 中的一个表中。由于 MySQL 的 DATE 数据结构被迫采用 'YYYY-MM-DD' 格式，我想我必须将所有月份都附加为 'YYYY-MM-01' 以便“01”代表整个总和月。

是否可以进行 oracle 查询以将 -01 附加到我的所有日​​期，以便它们可以正确地通过管道传输到 MySQL 表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:52:22.857

`TRUNC`使用该函数将日期截断为每月的第一天通常更有意义（并且更有效） 。结果值将是类型`DATE`。

```
SELECT trunc(dateid, 'MM' ) thedate, count(*)
  FROM picture_table
 GROUP BY trunc(dateid, 'MM')
 ORDER BY 1, 2 
```

在您的问题中，“对 MySQL 的管道”是什么意思并不明显。我假设无论您使用什么将数据从 Oracle 移动到 MySQL，都能够正确处理将 Oracle 映射`DATE`到 MySQL`DATE`或`DATETIME`. 如果您必须将 Oracle 中的日期转换为特定格式的字符串，以便让 MySQL 将该字符串隐式转换回`DATE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:43:26.710

您可以在 MySQL 中格式化日期，只需要一个不同的函数：

```
select date_format(dateid, '%Y-%m') as thedate, count(*)
from picture_table
group by date_format(dateid, '%Y-%m')
order by 1, 2 
```

示例在这里：[http ://sqlfiddle.com/#!2/af6bd/2](http://sqlfiddle.com/#!2/af6bd/2)

date_format() 函数说明： http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:32:42.450

你可以用一个简单的 concat 来做到这一点：

```
select to_char(dateid, 'YYYY-MM')||'-01' as thedate, count(*)
from picture_table
group by to_char(dateid, 'YYYY-MM')
order by 1, 2 
```

但是，为什么mysql表使用日期字段？它可能只有一个 varchar() 列来接受“yyyy-mm”格式？

# c# - 将 Image 控件源设置为服务器中的图像

> ID：11639612
> 
> 赞同：3
> 
> 时间：2012-07-24T21:30:12.157
> 
> 标签：c#, asp.net

我试图在我的图像控件上显示图像，但它不起作用。我基本上将它用作屏幕截图预览。我将位图保存到服务器路径中的图像文件夹中，然后将控件的 ImageUrl 设置为该保存的图像位置。这是我的代码。此代码在单击按钮时执行：

```
img.Save(Server.MapPath("~/Images/") + "test.png", ImageFormat.Png);
Image1.ImageUrl = Server.MapPath("~/Images/") + "test.png";
Image1.DataBind(); 
```

未捕获任何异常，并且图像正确保存在路径中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:33:07.367

您不能将 Server.MapPath 用于 URL，更改为（假设 images 文件夹位于应用程序的根文件夹中）：

```
Image1.ImageUrl = "/images/test.png"; 
```

更新：

正如 Graymatter 建议的那样，我的评论应该是：

```
Image1.ImageUrl = "~/images/test.png"; 
```

我忽略了我们在谈论图像服务器控制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:41:05.100

链接以直接写入应用程序中的 Web 文件夹绝不是一个好主意。我宁愿走创建 ashx 处理程序并流回图像的路线。您可以创建一个看起来像这样的文件（例如 getmyimage.ashx.cs）：

```
using System;
using System.Web;

public class getmyimage : IHttpHandler 
{
  public void ProcessRequest(HttpContext context)
  {
        Response.ContentType = "image/png";
        Response.WriteFile("x:\myimages\test.png");
        Response.End();
  }

  public bool IsReusable 
  {
    get 
    {
      return false;
    }
  }
} 
```

getmyimage.ashx 将包含如下内容：

```
<% @ webhandler language="C#" class="getmyimage" %> 
```

在此代码中，“x:\myimages\test.png”将是您希望流回浏览器的图像。您可以将参数添加到 getmyimage.ashx url 以指定应加载的图像。您还可以修改代码以动态生成图像或类似的东西。

然后，您可以指向图像 URL 中的“getmyimage.ashx”。所以你的 imageurl 看起来像这样：

```
Image1.ImageUrl = "getmyimage.ashx" 
```

正如 Antonio 在评论中指出的那样，您需要查看所需的缓存选项类型并进行设置。默认行为是始终发回图像而不是缓存它。如果要缓存图像，则应查看以下帖子：

[缓存 ASHX 图像响应](https://stackoverflow.com/questions/7560180/caching-ashx-image-response)

要直接映射到问题中的图像，您可以使用以下命令：

```
Image1.ImageUrl = "~/images/test.png" 
```

# google-chrome - 强制chrome在超时时崩溃而不是提示等待/杀死？

> ID：11639616
> 
> 赞同：1
> 
> 时间：2012-07-24T21:30:20.073
> 
> 标签：google-chrome, google-chrome-extension

如果我在页面上有以下代码：

```
while(true); 
```

页面会挂起，但不会崩溃。30 秒后（我知道这是可以更改的），它会询问我是要等待还是杀死它。

有没有办法杀死它而不问？

我为 chrome（用于信息亭）编写了一个扩展程序，它将自动重新加载已终止的页面（带有 ah snap 标志），所以我宁愿不要让计算机上出现对话框，因为用户会感到困惑，而且看起来很糟糕. 我宁愿设置它，如果系统在 10 秒内没有响应，它只会杀死页面，因此它可以自动重新加载。

# java - 本地类型字段访问不能在评估表达式中使用

> ID：11639617
> 
> 赞同：0
> 
> 时间：2012-07-24T21:30:29.393
> 
> 标签：java, eclipse, debugging

当我使用 Eclipse 进行调试时，我正在尝试检查 Set ：

```
for (Object object: s)
                {
                 //Code
                } 
```

但是，它反而给了我以下信息：

“本地类型字段访问不能在评估表达式中使用”。

是什么原因？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:35:09.863

你有重复的局部变量's'。最好通过以下方式避免强制转换：

```
Set<MyType> mySet = new HashSet<MyType>();
// populate mySet

for (MyType myType: mySet) { 
    // do work with myType
} 
```

# c++ - 在 Boost 属性树 1.50 中使用 read_xml() 时使用多个标志

> ID：11639623
> 
> 赞同：2
> 
> 时间：2012-07-24T21:30:57.847
> 
> 标签：c++, boost, tree, flags, boost-propertytree

所以我发现这里引用的“漂亮打印”修剪空白标志：[boost::property_tree XML 漂亮打印](https://stackoverflow.com/questions/6572550/boostproperty-tree-xml-pretty-printing)

我找到了 Boost::Property_Tree 1.50 的 read_xml() 函数的文档：http: [//www.boost.org/doc/libs/1_50_0/doc/html/boost/property_tree/xml_parser/read_xml_id1073248.html](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/property_tree/xml_parser/read_xml_id1073248.html)

但是我一生都无法弄清楚如何在读取时同时启用忽略注释和修剪空白标志，然后编写 XML！任何帮助，将不胜感激。

我认为我的主要问题是函数原型。使用的标志如何转换为整数，就像函数原型似乎要求的那样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:05:26.713

您必须使用按位或（竖线字符`|`）将标志连接在一起。这是使用单个参数指定多个标志的一种相当常见的方法。例如：

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>

int main(int argc, char* argv[])
{
    ptree pt;
    using namespace boost::property_tree::xml_parser; // just to keep the flags nice and short

    read_xml("file.xml", pt, trim_whitespace | no_comments);
    return 0;
} 
```

至于你的第二个问题，标志被声明为整数。当您执行按位或时，表示 int 的位将组合在一起以生成具有唯一值的新 int。例如，数字 2 具有位（二进制）表示 00000010，数字 4 具有位表示 00000100（假设您使用 8 位来表示整数）。按位或运算比较每个位，如果其中一个为 1 或两者均为 1，则结果为 1。否则为 0。在我们的例子中：

```
 00000010
| 00000100
----------
  00000110 
```

这是位符号中的数字 6。

# web-crawler - 如何抓取我的网站以检测 404/500 错误？

> ID：11639630
> 
> 赞同：4
> 
> 时间：2012-07-24T21:31:24.010
> 
> 标签：web-crawler, crawler4j

是否有任何快速（可能是多线程）的方式来抓取我的网站（单击所有本地链接）以查找 404/500 错误（即确保 200 响应）？

我还希望能够将其设置为仅单击每种类型的链接中的 1 个。因此，如果我有 1000 个类别页面，它只会点击进入一个。

[http://code.google.com/p/crawler4j/](http://code.google.com/p/crawler4j/)是一个不错的选择吗？

我想要一些超级容易设置的东西，而且我更喜欢 PHP 而不是 Java（尽管如果 Java 快得多，那也可以）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:33:12.913

您可以使用旧的稳定的 Xenu 工具来抓取您的网站。

你可以配置他使用100个线程，并按状态码排序结果[500\404\200\403]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:35:14.603

您可以使用任意数量的开源 python 项目轻松实现这一点：

1.  机械化似乎很受欢迎
2.  美丽的汤和 urllib

您将使用其中一种方法抓取站点并检查服务器响应，这应该非常简单。

但是，如果您有一个站点地图（或包含所有 URL 的任何类型的列表），您可以尝试使用 cURL 或 urllib 打开每个站点，并且无需爬网即可获得响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:35:30.640

定义“快”？你的网站有多大？cURL 将是一个好的开始：[http ://curl.haxx.se/docs/manual.html](http://curl.haxx.se/docs/manual.html)

除非您拥有一个非常庞大的站点并且需要在几秒钟的时间范围内对其进行测试，否则只需将 URL 枚举到一个列表中并尝试每个。

# php - 论坛、加入、加入和大量加入的“最后发帖人”

> ID：11639631
> 
> 赞同：0
> 
> 时间：2012-07-24T21:31:29.517
> 
> 标签：php, mysql, join, aggregate-functions

[协同点火器；活动记录类](https://stackoverflow.com/questions/11619861/codeigniter-active-records-class)

从那个主题中，我问了一个关于 CodeIgniter 的问题，我想现在完全原始地做它。

这是我当前的查询。

```
 SELECT `forums`.*, 
        Count(topics.id) threads, 
        Count(replies.id) replies, 
        `users`.`url` user_url, 
        `users`.`name` user_name,
        `ranks`.`name` user_rank  
 FROM (`forums`)  
 LEFT JOIN `topics` ON `topics`.`f_id` = `forums`.`id`  
 LEFT JOIN `replies` ON `replies`.`t_id` = `topics`.`id`  
 LEFT JOIN `users` ON `users`.`id` = `topics`.`a_id`  
 LEFT JOIN `ranks` ON `users`.`status` = `ranks`.`id`  
 LEFT JOIN (  
 SELECT `topics`.`url` topic_url, `topics`.`name` topic_name  
 FROM `topics`  
 ORDER BY `created` DESC  
 LIMIT 1  
 ) last_post ON `topics`.`f_id` = `forums`.`id`  
 GROUP BY `forums`.`id` 
```

所以我想做的就是把所有东西都放在一个漂亮的行里。“最后发帖者”旁边的所有内容都正常工作，如果我删除了`LEFT JOIN`我添加的后一个，我会得到第一个，而不是最后一个帖子。

所以我的问题是；我现在做错了什么？

另外，一个额外的问题，我之前和一个朋友谈过，他在 PHP 和 MySQL 方面比我更了解，他告诉我把它全部存储在数据库中，last_post 以及线程数和回复。

提前致谢。

## 更新

这是论坛表

```
CREATE TABLE IF NOT EXISTS `forums` (  
  `id`    int(11) NOT NULL AUTO_INCREMENT,  
  `c_id`  int(11) NOT NULL,  
  `url`   varchar(255) NOT NULL,  
  `name`  varchar(255) NOT NULL,  
  `desc`  text NOT NULL,  
PRIMARY KEY (`id`),  
KEY `url` (`url`,`name`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=9 ; 
```

这是主题表

```
CREATE TABLE IF NOT EXISTS `topics` (  
  `id` int(11) NOT NULL AUTO_INCREMENT,  
  `f_id`    int(11) NOT NULL,  
  `url`     varchar(255) NOT NULL,  
  `name`    varchar(255) NOT NULL,  
  `desc`    varchar(255) NOT NULL,  
  `body`    text NOT NULL,  
  `a_id`    int(11) NOT NULL,  
  `created` int(11) NOT NULL,  
  `edited`  int(11) NOT NULL,  
PRIMARY KEY (`id`),  
KEY `head` (`name`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ; 
```

我还尝试使用降价编辑来更新它的显示方式，就像我第一次做的那样，我希望这更有吸引力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:03:59.550

这是一个解决方案。我认为这不是最有效的解决方案，但应该可以。请注意，我将`Topics`SELECT 移到了第一个 SELECT 行。

```
SELECT `forums`.*, 
        Count(topics.id) threads, 
        Count(replies.id) replies, 
        `users`.`url` user_url, 
        `users`.`name` user_name,
        `ranks`.`name` user_rank,
        (SELECT `topics`.`url` 
         FROM `topics` 
         WHERE `topics`.`f_id` = `forums`.`id` 
         ORDER BY `created` DESC LIMIT 1) topic_url,
        (SELECT  `topics`.`name`
         FROM `topics` 
         WHERE `topics`.`f_id` = `forums`.`id` 
         ORDER BY `created` DESC LIMIT 1) topic_name 
 FROM (`forums`) 
 LEFT JOIN `topics` ON `topics`.`f_id` = `forums`.`id`   
 LEFT JOIN `replies` ON `replies`.`t_id` = `topics`.`id`  
 LEFT JOIN `users` ON `users`.`id` = `topics`.`a_id`  
 LEFT JOIN `ranks` ON `users`.`status` = `ranks`.`id`  
 GROUP BY `forums`.`id` 
```

**可能更有效的方法**

我没有数据来测试这是否更快，但这是另一种方法（我基于[MySQL 中的 ROW_NUMBER()](https://stackoverflow.com/questions/1895110/row-number-in-mysql)。）这带有一个附加的字符串，那就是`topics`表不能有重复`f_id`，`created`组合：

```
SELECT `forums`.*, 
        Count(topics.id) threads, 
        Count(replies.id) replies, 
        `users`.`url` user_url, 
        `users`.`name` user_name,
        `ranks`.`name` user_rank,
        t.url topic_url,
        t.name topic_name
 FROM (`forums`)  
 LEFT JOIN (SELECT t0.id, t0.f_id, t0.url, t0.name, t0.a_id
            FROM topics AS t0
            LEFT JOIN topics AS t1 ON t0.f_id=t1.f_id AND t1.created>t0.created
            WHERE t1.id IS NULL) AS t
            ON t.f_id = forums.id
 LEFT JOIN `replies` ON `replies`.`t_id` = t.`id`  
 LEFT JOIN `users` ON `users`.`id` = t.`a_id`  
 LEFT JOIN `ranks` ON `users`.`status` = `ranks`.`id` 
 GROUP BY `forums`.`id` 
```

试试看，先看看能不能用，再看看是不是更快。我很想收到你的回音。

# c++ - 测量 Windows 中的当前网络流量

> ID：11639634
> 
> 赞同：1
> 
> 时间：2012-07-24T21:31:44.083
> 
> 标签：c++, winapi

我整个晚上都在寻找解决方案，但我找不到任何东西。我的问题是我正在编写一个从 Windows 服务器收集统计信息的程序。我唯一找不到的是如何获取系统上的当前网络使用情况。就像您可以在任务管理器中看到的用法一样。我在 MSDN 上找到了一些功能，但其中一些仅在至少具有 windows vista 和某些功能的 Windows 系统上可用，或者更好的是，这些功能的结构存在 10GBit 网络接口的问题。任何人都知道对此有任何可靠的解决方案吗？

提前致谢。

# c++ - 在不同进程的 hWnd 上使用的 PRINTDLG 结构

> ID：11639641
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:32:14.457
> 
> 标签：c++, c, windows, winapi

以下编译没有错误或警告，但不会阻碍 IEFrame 窗口，或者至少我知道它无法将该窗口的打印方向更改为横向：

```
PRINTDLGEX pd;
pd.lStructSize = (DWORD)sizeof(PRINTDLG);    
BOOL GetPrinterDeviceDefaults(struct tagPDA* pd);

BOOL bRet=AfxGetApp()->GetPrinterDeviceDefaults(&pd); 
pd.hwndOwner = FindWindow("IEFrame", NULL);
LPDEVMODE pDevMode = (LPDEVMODE)::GlobalLock(&pd.hDevMode);
pDevMode->dmOrientation = DMORIENT_LANDSCAPE;
::GlobalUnlock(&pd.hDevMode); 
```

我有证据表明代码可能已经获取了 IEFrame 窗口的 hWnd，因为结果`MessageBox(0,(LPCSTR)pd.hwndOwner,"[header]",MB_OK);`在 msg 中显示了一些文本 gobbledygook。而不是什么都没有。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:34:15.340

我完全不熟悉您尝试使用的 PRINTDLG API，但您的 MessageBox 代码全错了。

该[`MessageBox`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)采用两个指向以空字符结尾的 C 字符串（ANSI 字符串或 Unicode 字符串，取决于是否`UNICODE`由预处理器定义）的指针。相反，您传递的是一个窗口句柄，它不是任何类型的以 null 结尾的 C 字符串——它只是一个仅对内核有意义的不透明数据值。所以当`MessageBox`试图解释这个字符串时，它会得到一个指向谁知道在哪里的指针，它要么会因访问冲突而崩溃，要么会从内存中读取随机 gobbledygook，直到它遇到一个杂散的 NUL 字节。

通常编译器会在这里给你一个错误，但是通过插入演员表你告诉“没关系，我知道我在做什么，我保证这真的是一个`LPCTSTR`”，这掩盖了错误。

对此的正确解决方法是将句柄值打印到字符数组中。例如：

```
#define DIM(x) (sizeof(x)/sizeof((x)[0]))
wchar_t handleStr[64];
_snprintf_s(handleStr, DIM(handleStr), _TRUNCATE, "Handle value: %p", (void*)pd.hwndOwner);
MessageBoxW(NULL, handleStr, L"[header]", MB_OK); 
```

# javascript - 使用 Opera 在 JavaScript 中更新图像源

> ID：11639656
> 
> 赞同：2
> 
> 时间：2012-07-24T21:33:22.593
> 
> 标签：javascript, image, opera

我定期使用 Image 对象加载远程图像，以便稍后在画布上绘制。Image 对象仅在 JS 中创建，在 DOM 中不存在。

该代码在 Chrome 和 Firefox 上运行良好。在 Opera 中，问题在于，每当修改图像源时，浏览器似乎总是切换到“加载模式”，即光标变为“等待”并且 Opera 在地址栏中添加“元素：X/Y”。

这是测试代码：http: [//jsfiddle.net/nZntU/3/](http://jsfiddle.net/nZntU/3/)

有谁知道这种 Opera 行为的任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:06:23.777

我正在使用 Opera 并且知道您在描述什么（或试图实现）。我将进度条位置设置为“底部弹出”。当我激活该选项卡并且我正在键入此选项卡时（当您的示例在后台选项卡中处于活动状态时），您的示例每秒会在我的浏览器底部弹出一个弹出窗口，我的光标每秒切换到进度指示器图标.

Opera 默认行为是在地址栏中显示任何进度信息。即使我完全禁用进度条（设置为“关闭”），我也会注意到通过导航栏中不断变化的重新加载/停止按钮以及地址栏中的短暂闪烁（书签星消失）重新加载。在不同的设计/布局/配置中可能还有其他可见的东西。

老实说，您是在试图阻止用户故意看到他们可能想要看到的东西。我经常对这种出现的工具栏和等待光标感到有些恼火，但我 OTOH 通常很高兴注意到我的浏览器在后台执行操作。在使用 Chrome 等其他浏览器时，我什至经常感到困惑，我没有注意到我的浏览器在后台执行繁重的 AJAX 提升，而我只是在阅读一篇文章等，这有时会导致混乱的情况或奇怪的客户端状态。

我认为您不应该尝试更改浏览器行为，因为这完全超出了您的范围。有些人使用高度定制的浏览器、无铬窗口管理器等。当用户浏览器未按照您的喜好配置时，您也不会尝试启用或更改其他功能（想想 3rd 方 cookie、javascript、插件等） .)。用户以他喜欢的方式使用和配置他的用户代理（这意味着他可以禁用 CSS、使用繁重的用户样式表和 javascript、禁用 iframe、禁用窗口移动等）。

作为旁注，我记得在即将发布的 Opera 版本（关于 XHR）中阅读了有关此默认行为更改的内容，但我对此不再确定，因为我在开发快照中输入此内容并且仍然具有默认进度酒吧行为。我想，这就是生活。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:39:48.697

正如@graste 指出的那样，Opera 12.50 修复了这个错误。从他们的更改日志中：

> CORE-43199 Opera 不应显示不在 DOM 中的图像的加载指示

# ruby-on-rails - Rails：在 HABTM 连接模型中分配额外的列

> ID：11639660
> 
> 赞同：1
> 
> 时间：2012-07-24T21:33:41.430
> 
> 标签：ruby-on-rails, ruby

我不知道为什么我在看似非常基本的问题上找不到*任何东西。*说我有类似的东西

```
class Category < ActiveRecord::Base
  has_many :categorizations
  has_many :items, :through => :categorizations
end

class Item < ActiveRecord::Base
  has_many :categorizations
  has_many :categories, :through => :categorizations
end 

class Categorization < ActiveRecord::Base
  attr_accessible :some_field
  belongs_to :category
  belongs_to :item
end 
```

以及相关的迁移。然后可以做

```
item1=Item.new()
item2=Item.new()
foo=Category.new()
foo.items=[ item1, item2 ] 
```

， 对？那么，如何获得将 foo 链接到 item1 和 item2 的分类以设置 :some_field 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:41:21.483

如果你想添加额外的东西，你不能使用快速通道。我现在无法测试它，但是这样的东西应该可以工作：

```
item1 = Item.new
item2 = Item.new

foo = Category.new
foo.categorizations.build(:some_field=>'ABC', :item=>item1)
foo.categorizations.build(:some_field=>'XYZ', :item=>item2) 
```

**更新：**

另外：如果您需要显示`Categorization`无法使用的额外数据`@category.items`：

```
<h1><%= @category.name %></h1>

<% @category.categorizations.each do |categorization| %>
  <h2><%= categorization.item.name %></h2>

  <p>My extra information: <%= categorization.some_field %></p>
<% end %> 
```

# sql-server-2008 - SQL 根据特定条件更新一列

> ID：11639661
> 
> 赞同：0
> 
> 时间：2012-07-24T21:33:45.633
> 
> 标签：sql-server-2008, sql-update, criteria

我有一个`SQL`表，如果其他列中有数据，则在该表中需要设置一`BIT`列。`"IsComplete"`

`IsComplete`最初是由应用程序中的复选框处理的，我想将责任转移到`SQL DB`处理将这个“ `IsComplete`”列设置为 true 基于以下内容：

```
IsComplete = true if column1 = [something] and column2 = [something] and column3 = [something]
IsComplete = false if column1, column2 or column3 is null or = [nothing] 
```

我该如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:39:45.323

你可以做一个更新

```
Update tableBlah setComplete = 0

Update tableBlah setComplete = 1 where column1 = [something] and column2 = [something] and column3 = [something] 
```

并在该表上设置一个触发器以在插入时执行相同操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:42:00.543

我不确定你的问题，我想我错过了一些东西。无论如何，如果这是我的想法，您可以使用 Case 语句

```
update T set IsComplete = CASE WHEN column1 = something and column2 = something
and column2 = something THEN 1 
WHEN column1 != [Something] OR column2 != [Something] OR column3 != [Something] THEN 0 END
from yourTable T --Your where criteria goes Here, if you need it 
```

这个答案认为`yourTable`有 3 列和一个 column `Something`，您将`IsComplete`根据每行的值进行更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:47:15.083

您还可以为此设置一个计算列。

只需创建一个函数来接收 3 个参数，如果 3 个参数不为空则返回 True，否则返回 False。

然后创建列 IsCOmplete ，并在 Computed Column Specification 中设置它

在公式中使用 dbo.Yourfunction(column1,column2,column3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T22:20:09.080

```
update Table SET IsComplete = ISNULL(DATALENGTH(COALESCE(col1,col2,col3)) % 1) + 1,0); 
```

应该做的伎俩。

[什么是聚结](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

[什么是空](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

[什么是数据长度](http://msdn.microsoft.com/pl-pl/library/ms173486.aspx)

[什么是 ％](http://msdn.microsoft.com/en-us/library/ms190279.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-24T21:40:30.970

用例

```
SET IsComplete = CASE 
WHEN NULLIF(column1,'') IS NULL OR NULLIF(column2,'') is null 
or NULLIF(column3,'') is null THEN 0 
ELSE 1   
END 
```

在下面回答您对 INSERT 的评论：

```
INSERT INTO TABLE1 (IsComplete) 
SELECT CASE 
    WHEN NULLIF(@column1,'') IS NULL OR 
    NULLIF(@column2,'') is null or 
    NULLIF(@column3,'') is null THEN 0 
    ELSE 1     
    END 
```

# jquery - jQuery 这真的应该被认为是一个硬编码的值吗？

> ID：11639663
> 
> 赞同：8
> 
> 时间：2012-07-24T21:33:51.950
> 
> 标签：jquery, asp.net-mvc, razor

我正在查看以下 jQuery 调用：

```
$.get('/Home/GetResult', null, function (data) {

    alert(data);

}); 
```

与以下相比，我认为这被称为“硬编码”方式：

```
$.get('@Url.Action("GetResult", "Home")', function (data) { 

    alert(data);

}); 
```

我认为这被称为非硬编码方式。

有人可以向我解释一下这是怎么回事吗？在我看来，这两种方式都是同样硬编码的调用方式，因为你在两者中都有明确的控制器和方法名称。

有谁知道为什么一个被称为硬编码而另一个不是。一个更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:43:04.880

如果我们对 URL 进行硬编码，那么我们将失去以后更改路由方案的能力。所以**总是**使用 URL Helper 方法。如果您使用 URL 助手，Helper 方法将负责更改，您无需在 100 处进行更改。此外，当从主页和内页调用相同的方法时，您不必担心我必须添加多少 ../ 作为前缀

查看达林的这些答案

[https://stackoverflow.com/a/7492024/40521](https://stackoverflow.com/a/7492024/40521)

[https://stackoverflow.com/a/6454041/40521](https://stackoverflow.com/a/6454041/40521)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:43:36.953

“/Home/GetResult”被认为是“硬编码”，因为开发人员直接在代码中输入了配置值，以后更难更改。

专门硬编码 URL 值更糟糕，因为如果这个视图（和相关的控制器操作）被移动到应用程序中的另一个“区域”，“/Home/GetResult”将会中断。@Url.Action 方法更好，因为不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T21:45:35.863

我喜欢[彼得 J 的回答](https://stackoverflow.com/a/11639782/30433)。此外

您应该将 URL 作为 href 的一部分或作为 html 元素的属性。

```
E.g <a data-getresult="@Url.Action("GetResult", "Home")">click</a> 
```

进而

```
var clickAction = $(this).attr('data-getresult');
$.get(clickAction, null, function (data) {

    alert(data);

}); 
```

将上述内容包装在一个函数中，并通过属性名称将其链接到单击事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T03:42:55.713

为了简单地回答您的问题，是的，我考虑了您列出的“硬编码”两个示例。第二，**@Url.Action 没有硬编码**。它隐含的特异性较低。如果您更改了项目的根目录，第二个仍然可以工作，而第一个会像@Peter J 提到的那样中断。另外，我想如果您使用区域并更改了区域名称，第二个会工作，而第一个会打破。

不过，为了更有帮助，我使用了第三种方法。一个月前我正好有你的问题，感谢[没有静态控制器 URL（魔术字符串）的 ASP.NET MVC AJAX 调用，](https://stackoverflow.com/questions/11226413/asp-net-mvc-ajax-calls-without-static-controller-urls-magic-strings)我有一个非常适合我的过程。

**索引.cshtml**

```
<input data-action='@Url.Action(Mvc.AutoComplete.PostalCode())' type='text' name='postalCode' class='autoComplete'><input>
<input data-action='@Url.Action(Mvc.AutoComplete.ProductCategory())' type='text' name='productCategory' class='autoComplete'><input> 
```

**main.js**

```
$('input.autoComplete').each(function () {
    var el = $(this);
    el.autocomplete({source: el.data('action')});
}); 
```

瞧！通过 T4MVC 和 HTML5 数据属性进行编译时检查和明确的职责分离。控制器定义是从使用它的小部件中读取的。非常适合可能在页面上多次出现的部分视图。

我强烈推荐使用 T4MVC，即“Mvc”。您在示例视图中看到的语法。如果您试图避免“硬编码”，那将是尽可能动态的。我使用 T4MVC ( [http://t4mvc.codeplex.com/](http://t4mvc.codeplex.com/) )，所以我可以避免“魔术字符串”在我的视图中引用控制器和操作。T4MVC 并不完美，但它是一个很大的改进。在隐藏的 T4MVC 文件中，仍然有硬编码的值，但您永远不会看到它们，它们是从您的控制器自动生成的，并在编译时进行检查。

此外，正如@Valamas 在这里所建议的那样，然后我使用 HTML 元素上的数据属性将这些 URL 从我的视图传递到 javascript。

当我的页面上有 AJAX 调用时，我特别使用这种数据属性方法。一个页面可能很容易有 10 个 URL 依赖项，并且很难通过可能没有完全覆盖条件功能的用户测试来判断链接何时被破坏。但是，万岁！当链接不存在时，T4MVC 会引发编译时错误，并且如果您的代码是用 init 中的所有数据属性检查来组织的，那么当相应的数据属性丢失时，javascript 会引发加载时错误（而不是运行时错误）你会得到未定义的变量）。这提供了更早/更容易检测链接缺陷，即使您没有对 javascript 进行单元测试（我也没有）。

我通常在每个页面上都有一个标准标题，其中包含当前全局有用的信息（例如，UserId）作为 BODY 元素上的数据属性，或者在具有众所周知的 ID 的 display:none SPAN 上。

然后，我通常会在靠近我的 javascript 代码（或每个需要它的 javascript 文件）顶部的单个位置从属性加载所有数据。

这有什么好处？现在，您可以在一个地方查看以确保将所需的所有嵌入数据参数提供给您的 javascript。您的 javascript 不会引用未定义的变量，因此如果您使用 javascript IDE，您将不会收到错误错误。查看您的 javascript 的开发人员不会想尽办法在其他 javascript 文件中找到神秘变量的声明；当他们不是 ASP.NET MVC 开发人员时尤其麻烦。在这一点上，如果您有单独的语言团队，则实施职责会更加清晰（您的 javascript 开发人员在更改命名约定时不会来编辑您的视图，反之亦然）。此外，变量是在客户端页面生命周期中的一个众所周知的时间点定义的，这对于调试 javascript 是一个很大的好处。并且您的视图不包含遍布整个页面的 javascript，其中一个小的中间页面 HTML 缺陷可能会意外地导致完整的 javascript 失败。

此外，如示例中所示，这是获取可能在页面上多次出现的部分视图的唯一方法。您可以清楚地将嵌入数据与使用它的单个 HTML 小部件相关联。如果您将 javascript 直接插入到视图中，您将错误地重新定义变量。

好处的清单不胜枚举，但基本上归结为责任分离。其他一切都由此而来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T21:50:31.617

**大多数**时候，他们会实现同样的目标。

本质上，如果您有一个没有区域的简单 MVC 站点，并且您使用的是默认路由定义，您将不会注意到太大的变化。但是如果你在你的应用中自定义路由定义或者使用区域，你很可能会遇到问题。在可能的情况下，建议您使用软编码方法。如果您需要将 URL 嵌入到 JavaScript 文件中，就会出现问题。但是在这种情况下，它通常表明您的实现存在问题，并且您的 JS 文件中的代码应该接受它将用作参数的 URL，而不是将其嵌入到您的外部 JS 文件中。

# jquery - 在jQuery中使用循环检索所有表列值

> ID：11639665
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:33:58.130
> 
> 标签：jquery, asp.net, html, vb.net

我在页面上有几个表，我需要运行一个循环来获取所有列值并将它们保存在一个逗号分隔的字符串中（我会将这些字符串传递给 ASP.NET 页面的隐藏字段）。我如何编写一个循环，以便它可以从“Route1”表中读取列值。不幸的是，我不能仅仅因为用户可以使用 (jQuery) 将它们从一个表移动到另一个表，就依赖于 TR 和 TD 的#ID。

简单来说，我如何编写一个循环来读取下表的列值

```
<table ID = "Route1">
    <tr>
        <td>row 1 col1</td> <td> row1 col2 </td>
    </tr>
    <tr>
       <td>row 1 col1</td> <td> row1 col2 </td>
   </tr>
</table>

<table ID = "Route2">
    <tr>
        <td>row 1 col1</td> <td> row1 col2 </td>
    </tr>
    <tr>
        <td>row 1 col1</td> <td> row1 col2 </td>
    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:48:16.530

尝试这个：

```
var str = $("table:first").find("td").map(function(){
               return $(this).text()
          }).get().join(',') 
```

[演示](http://jsfiddle.net/feDgu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:48:26.803

```
var values = [];

$('#Route1 td').each(function () {
    values.push( $(this).text() );
});

var myString = values.join(','); 
```

演示：http: [//jsfiddle.net/2xpFZ/](http://jsfiddle.net/2xpFZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T22:12:32.057

这是一种用纯 JavaScript 执行此操作的方法：

```
function getTableCells(id) {
    var data = [];
    var cells = document.getElementById(id).getElementsByTagName("td");
    for (var i = 0; i < cells.length; i++) {
        data.push(cells[i].innerHTML);
    }
    return(data.join(","));
}

var str = getTableCells("Route1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:55:33.307

```
$('#Route1 td').map(function() {
  return $(this).text();
}).get().join(',') 
```

然而，一个普通的 JavaScript 循环会更加高效。

# javascript - 存储许多 id 的最佳技术是什么？

> ID：11639672
> 
> 赞同：2
> 
> 时间：2012-07-24T21:34:58.300
> 
> 标签：javascript, database, string, memory, numbers

我正在用 Javascript 构建一个实体系统。它基本上是一种由组件组成世界对象的技术，例如“位置”或“精灵”。这些组件只保存数据，它们只有次要的方法。

我在一种数据库中实现它，实体只是一个用于获取组件实例的 id。

“数据库”是一个字典，看起来像这样：

```
{
    "ComponentType": ComponentInstances
} 
```

一个 Component 实例是这样访问的：`db[componentType][entityId]`.

我担心对于 entityId 最有效的数据类型是：**字符串**还是**数字**？这些类型在 Javascript 中占用多少内存（我知道它会有所不同，但即使是估计也会有用）？

当然，如果是字符串，则数据库将像字典字典一样实现，如果是数字，则数组字典（没关系，因为两者都是对象）。

**编辑：**与参考相比，字符串和数字有多少内存？他们更有效率吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:40:22.497

虽然从概念上讲，数字和字符串在用作键时都被视为相同（在 Javascript 中键始终被视为字符串 - x[0] 和 x["0"] 返回相同的值），但最近的实现将特殊情况下的数字键并将它们存储在一个连续的数组中。

因此，如果我是你，我会选择连续的数字索引。

# objective-c - iOS：如何在幻灯片中添加“卡通”风格的动画（电影）？

> ID：11639678
> 
> 赞同：0
> 
> 时间：2012-07-24T21:35:19.813
> 
> 标签：objective-c, ios, animation

我想知道是否可以制作带有文本的幻灯片并为 iPad 应用程序添加一些动画。请参阅下面的屏幕截图以了解我需要什么。我想让那个人跳上跳下微笑。我确定我自己无法使用 Objective-C 原语绘制该图像，因此我正在研究以下选项：

1.  在第 3 方工具（Adobe？）中完成动画，然后将其作为单个独立文件添加到幻灯片上。但我不知道，iOS 支持哪些格式，什么是标准格式，以及最后如何在幻灯片上插入该文件。有人可以澄清一下吗？

2.  做完整的动画，然后将帧保存为图像，然后快速更改图像以产生电影的错觉。

我错过了什么吗？还有其他方法吗？什么是最好的选择？

如果我不够清楚，请告诉我 - 我会尽力提供更多信息。

谢谢你。

![在此处输入图像描述](../Images/8700d6dbdda6117e2d1264d4e50794d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:17:58.287

如果您想为动画使用电影文件，您可以在[iOS 技术概览](http://developer.apple.com/library/ios/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html#//apple_ref/doc/uid/TP40007898-CH9-SW6)中的“媒体层 > 视频技术”下找到支持的视频格式。您将需要使用[框架](http://developer.apple.com/library/ios/DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)`AVPlayerLayer`中的一个来显示视频。[`AVFoundation`](http://developer.apple.com/library/ios/DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)

如果要为每一帧使用单独的图像文件，可以使用其中一种`+[UIImage animatedImage...]`方法创建动画`UIImage`，并将其显示在`UIImageView`.

如果您想为动画使用单个动画 GIF，您可以使用此[公共域`UIImage+animatedGIF`类别](https://github.com/mayoff/uiimage-from-animated-gif)将 GIF 加载到动画`UIImage`中，并将其显示在`UIImageView`.

# java - swing mappanel 地图刷新

> ID：11639679
> 
> 赞同：1
> 
> 时间：2012-07-24T21:35:28.160
> 
> 标签：java, swing, jtree, openstreetmap

目前我正在开发一个摇摆应用程序，由一个带有拆分面板的框架组成。在左侧面板中，我有一个 jtree，列出了世界上所有的国家，在右侧面板中，我有一个 OpenStreetMap，在启动时显示了一张地图（有效）。jtree 的节点链接到 valueChanged(..) 事件处理程序：

```
/** Required by TreeSelectionListener interface. */
public void valueChanged(TreeSelectionEvent e) {
    DefaultMutableTreeNode node = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent();

    mapPanel = drawOpenStreetMap(45, 65, 12);
    mapPanel.repaint();
    repaint();
    splitPane.repaint();
    repaint();
    updateUI();
}

MapPanel drawOpenStreetMap(double lon, double lat, int zoom) {
    mapPanel = new MapPanel(); // just a JPanel extension, add to any swing/awt container
    mapPanel.setZoom(zoom); // set some zoom level (1-18 are valid)
    Point position = mapPanel.computePosition(new Point2D.Double(lon, lat));
    mapPanel.setCenterPosition(position); // sets to the computed position
    mapPanel.repaint(); // if already visible trigger a repaint here
    return mapPanel;
} 
```

valueChanged 方法在单击 jtree 节点时被调用，而 drawOpenStreetMap 确实被调用，我希望地图能够更新并显示新位置。但没有任何改变。启动时创建的地图保持可见不变。valueChange 方法的代码显示了许多 repaint() 调用等。我尝试过，但无济于事。

这是指向[MapPanel](http://code.google.com/p/osmand/source/browse/DataExtractionOSM/src/net/osmand/swing/MapPanel.java?name=HEAD)源代码的指针。

如果有人能告诉我如何更新地图，那就太好了。提前致谢！

后记：我指错了MapPanel；一定是[这个](http://mappanel.svn.sourceforge.net/viewvc/mappanel/com.roots.map/src/com/roots/map/MapPanel.java?revision=37&view=markup)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:49:21.997

似乎您没有像`SplitPanel`在`valueChanged()`方法中那样将创建的 MapPanel 实例添加到父容器中。

调用方法时`valueChanged()`，您调用`drawOpenStreetMap()`方法来创建`MapPanel`实例，但是，您没有将其添加到`SplitPanel`. 这就是为什么地图的新位置没有出现的原因。也许您需要插入如下代码：

```
public void valueChanged(TreeSelectionEvent e) {
    DefaultMutableTreeNode node = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent();

    mapPanel = drawOpenStreetMap(45, 65, 12);
    rightPanel.add(mapPanel); // rightPanel is the panel in the right side of split pane.
    ... 
```

# c# - 此 C 函数的正确 C# PInvoke 签名

> ID：11639680
> 
> 赞同：2
> 
> 时间：2012-07-24T21:35:28.723
> 
> 标签：c#, c++, windows-mobile, pinvoke

我已使用 PInvoke 互操作助手生成 C# PInvoke 签名。我想确认一下。我在调用 DLL 时收到“找不到 PInvoke DLL”消息。我正在导出函数。DLL 存在可执行文件。消息和密文是原始字节的输入/输出 blob，并且是相同的缓冲区。

```
extern "C" int __declspec(dllexport) EncryptDeviceName(uint8 *message, uint8 *ciphertext, uint64 msglength)
{
    ...

    return 0;
} 
```

它生成了以下 C# PInvoke 签名：

```
 /// Return Type: int
   ///message: UINT8*
   ///ciphertext: UINT8*
   ///msglength: UINT64->unsigned __int64
   [DllImport("HC128.dll", EntryPoint = "EncryptDeviceName")]
   public static extern int EncryptDeviceName(System.IntPtr message, System.IntPtr     ciphertext, ulong msglength); 
```

我将遵循以下[类似问题](https://stackoverflow.com/questions/319958/how-do-i-solve-the-net-cf-exception-cant-find-pinvoke-dll?rq=1)中的建议并提供更新。

**更新**

我的签名确实适用于带有 marshal alloc/dealloc 的 Windows CE 6。Tergiver 的签名也适用于 Windows CE 6，它不需要 marshal alloc/dealloc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:07:47.397

你不见了`CallingConvention.Cdecl`。或者`__stdcall`在C端使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:49:51.867

编写 ap/Invoke 声明的方法有很多种。可以使用给定的一个，但是它需要您为它执行 Marshaller 的工作（分配非托管内存、复制和执行字符编码转换）。

该本地声明没有提供足够的信息来猜测所需的编组，这可能就是它不存在的原因。

本机函数期望的字符编码是什么`message`？是`ciphertext`一团原始字节还是它也有字符编码（输入和输出）？

**更新**

如果两者`message`都是`cipherText`原始字节数组，我们可以将它们编组为

```
[DllImport("HC128.dll", CallingConvention = CallingConvention.Cdecl, EntryPoint = "EncryptDeviceName")]
 public static extern int EncryptDeviceName([In] byte[] message, [In, Out] byte[] ciphertext, ulong msglength); 
```

`In[Attribute]`并`Out[Attribute]`告诉编组器执行副本的方式。`[In, Out]`是默认值，我喜欢明确。

# javascript - FB.api 从“应用页面”发布到 FB 墙

> ID：11639683
> 
> 赞同：0
> 
> 时间：2012-07-24T21:35:33.277
> 
> 标签：javascript, facebook-graph-api

我在使用 facebook javascript api 时遇到了一点问题。我有这个应用程序的应用程序和页面。我已将此应用程序添加到页面中，并且我得到了“页面内的应用程序，顶部有 Like 按钮，你应该知道”。

像这儿 ![在此处输入图像描述](../Images/0ac4ebba3917e1e2e5af03648246461e.png)

然后，我尝试使用 FB.api 在此应用程序中单击按钮时将消息 + 徽标 + 描述 + 链接发布到墙上。我试图让它看起来像这样： ![在此处输入图像描述](../Images/9ead4d4c5deb785257e4fe7fb832b3ea.png)

但这就是我在我的应用程序中单击“发布到 fb”按钮后看到的 ![在此处输入图像描述](../Images/74737b662d113020b64d14a83a0b6c96.png)

从我设置的所有属性中，它只需要“消息”。图片取自“此应用的图标”，名称取自“应用页面名称”，其他属性被忽略。

代码：

```
FB.api('/me/feed', 'post',{
    message     :  'Some message',
    link        : 'http://link.com',
    picture     : 'http://link.com/image.jpg',
    name        : 'App name',
    description : 'App description.'
 },
function(response) {
    console.log(response)
}); 
```

我有有效的 access_token 和 'publish_stream' 权限，但同一段代码将各种帖子发布到 facebook。结果就像来自简单应用程序的第一张图像和来自页面应用程序的第二张图像。

有谁知道如何在应用程序内页的第一张图片上发布到 Facebook 墙上的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:21:14.410

发布 wieving 取决于 FB.api 方法中的“链接”属性，如果它引用简单的应用程序 - 发布将类似于第一张图像，如果链接将引用页面应用程序 - 发布将看起来像第二张图像。

所以我需要像第一张图片一样的结果 - 我们只是将简单应用程序的链接放在“链接”属性中，然后在应用程序中我们将检查：“我们是否在页面应用程序上，如果不是 - 重定向到应用程序页面”。

# java - JAVA的ACM包学习和使用合适吗？

> ID：11639684
> 
> 赞同：4
> 
> 时间：2012-07-24T21:35:38.173
> 
> 标签：java

现在我正在 youtube 上观看斯坦福的频道，确切地说，我正在观看 Mehran Sahami 教授的 Java 讲座。我已经具备一定程度的 Java 理论知识，但我发现这些讲座非常有趣，但有一件事情让我感到困惑，我想在继续之前澄清它。

在示例中，与我在阅读的书籍甚至 Sun 的原始文档中看到的内容有很多不同。在这些讲座中，主要的方法似乎是`public void run()`insted 的`public static void main(String[] args)`。对于控制台输出，他只使用了它`println()`，`System.out.println()`我建议更深入地研究 Java 语言，这将与我所说的“标准语法”有更多不同。

据我了解，这一切都来自使用 ACM 包，我真的不知道继续观看这是否会对我有所帮助，或者只会让我更加困惑。这个 ACM 包有一些实际用途吗？它是否使 Java 语法与平常有很大不同，所以我最终可能会得到一堆无用的命令？你认为暂时留下这些视频，等到我可以使用有用的信息并更加了解过时的东西或差异不大时再回来，会更好吗？

提前致谢

勒隆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:39:49.100

我认为这不会妨碍学习 Java。它提供了一个框架，您的代码将在其中运行，就像 Java 小程序、Swing、Android 或其他一些框架一样。它与 vanilla Java 不同，但[ACM 包](http://jtf.acm.org/)有[据可查](http://www-cs-faculty.stanford.edu/~eroberts//jtf/javadoc/student/index.html)。一旦掌握了基本概念，学习从 ACM 包中脱离所需要的额外内容将一点也不难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:41:32.913

只要您认识到 ACM 代码中提供的“快捷方式”与标准语法之间的区别，我认为遵循这些讲座不会有任何内在的危害。我听说过有关该系列的一些不错的事情，如果您的目标是学习该语言的基础知识（或填补现有知识的空白），那么我认为这是一个很好的资源。

另一方面，我从未见过在学术环境之外使用 ACM 库。就我个人而言，在我攻读本科学位时，我只在单个（非必需）课程的单个项目中使用过它们。如果您已经熟悉该语言并了解基本概念，我会寻找更多不使用深奥或专门代码库的标准教程。在大多数情况下，ACM 库似乎包含快捷方式和标准化框架，以帮助教授（和学习）核心概念，而不用担心语言中可能存在的确切语法或任何怪癖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-10T13:52:15.880

如果我想总结一下，我会说 ACM Java Libraries 的主要目标是**让您从语法中解放出来，帮助您专注于概念**。

ACM Java 库包是向新手介绍编程概念的绝佳工具。如您所见，讲座的标题是编程方法论而不是 Java 编程。

希望它澄清

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T20:50:28.713

我处于完全相同的情况。我没有学习 ACM（我不会在其他任何地方使用它），而是决定使用当前的 Java 技术来完成作业，例如在 JavaFX 中完成图形部分。当然，对于绝对初学者来说，这可能不是最好的方法，他们可能会发现坚持使用 ACM 是最简单的。

如果有帮助，我会将我的课程放在 GitHub 中：
[https ://github.com/bmaupin/coursework/tree/master/cs106a-stanford](https://github.com/bmaupin/coursework/tree/master/cs106a-stanford)

例如，这是目标作业： [https ://github.com/bmaupin/coursework/blob/master/cs106a-stanford/Assignment2/Target.java](https://github.com/bmaupin/coursework/blob/master/cs106a-stanford/Assignment2/Target.java)

# mysql - SELECT * 或 SELECT 特定列

> ID：11639686
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:35:53.463
> 
> 标签：mysql

> **可能重复：**
> [哪个更快/最好？SELECT * 或 SELECT column1、colum2、column3 等](https://stackoverflow.com/questions/65512/which-is-faster-best-select-or-select-column1-colum2-column3-etc)

`SELECT * FROM`做一个table_name 比做有很大的性能影响`SELECT specific_columns FROM table_name`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:40:23.827

是的，它会影响性能，尤其是当您选择多行时。仅选择您真正需要的字段。

* * *

让我们以一个简单的用户名存在性检查为例：
当您只能选择 ID 时，为什么要选择所有内容？两者都做这项工作，但只选择一个领域是更好的解决方案。

```
SELECT `id` FROM users WHERE `username` = 'Nikola K.' 
```

而不是：

```
SELECT * FROM users WHERE `username` = 'Nikola K.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:38:04.723

我建议使用 EXPLAIN 来找到适合您需求的最佳方法。我想这取决于你的表中有多少列。

以下是一些关于 MySQL Explain 的有用站点：

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

[http://dev.mysql.com/doc/refman/5.0/en/using-explain.html](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)

[http://weevilgenius.net/2010/09/mysql-explain-reference/](http://weevilgenius.net/2010/09/mysql-explain-reference/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:39:44.553

只选择你需要的！在开发时我使用`*`它，因为当我真的不知道我需要什么时它会更容易，但在最终版本中你真的应该具体。为什么不？

# .net - 任何 .Net 函数或 linq 查询以取消透视数据

> ID：11639687
> 
> 赞同：4
> 
> 时间：2012-07-24T21:36:10.437
> 
> 标签：.net, linq, unpivot

是否有任何 .net 库可用于 unpivot excel 数据？我目前正在使用 LinqToExcel 框架从电子表格中读取数据，因此不确定是否有动态 linq 查询可用于执行 unpivot。感谢您的任何建议。顺便说一句，我正在寻找可以处理多个列的解决方案。

示例原始表

```
Product Location  Customer1   Customer2   Customer3
  A        X          10         20         100 
```

目的地表

```
Product Location Customer    Demand
  A        X      Customer1    10
  A        X      Customer2    20
  A        X      Customer3    100 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T02:03:46.647

尝试这样的事情：

```
var customer1 =
    from c in excel.Worksheet()
    select new
    {
        Product = c["Product"],
        Location = c["Location"],
        Customer = "Customer1",
        Demand = c["Customer1"],
    };

var customer2 =
    from c in excel.Worksheet()
    select new
    {
        Product = c["Product"],
        Location = c["Location"],
        Customer = "Customer2",
        Demand = c["Customer2"],
    };

var customer3 =
    from c in excel.Worksheet()
    select new
    {
        Product = c["Product"],
        Location = c["Location"],
        Customer = "Customer3",
        Demand = c["Customer3"],
    };

var customers = customer1.Union(customer2).Union(customer3); 
```

* * *

根据您的评论，试试这个：

```
var columns = 4; /* how many columns to unpivot */
var customers =
    from n in Enumerable.Range(2, columns)
    from c in excel.Worksheet()
    select new
    {
        Product = c["Product"].Value,
        Location = c["Location"].Value,
        Column = n.ToString(),
        Demand = c[n].Value,
    }; 
```

# r - R：从路径中提取目录

> ID：11639698
> 
> 赞同：9
> 
> 时间：2012-07-24T21:36:52.013
> 
> 标签：r

> **可能重复：**
> [如何仅从路径中提取文件/文件夹名称？](https://stackoverflow.com/questions/9693877/how-do-i-extract-a-file-folder-name-only-from-a-path)

请问如何获得路径的最后一个子目录。例如我想获取子目录“7”，以下代码失败：

```
Path <- "123\\456\\7"
Split <- strsplit(Path, "\\") # Fails because of 'Trailing backslash'
LastElement <- c[[1]][length(Split[[1]])] 
```

先感谢您

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-24T22:15:50.013

您还可以使用内置函数`basename`：

```
basename(Path)
[1] "7" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T21:42:22.553

您必须添加第二对`\\`才能将 转义`\`到正则表达式：

```
> Path <- "123\\456\\7"
> Split <- strsplit(Path, "\\\\")
> Split[[1]][length(Split[[1]])]
[1] "7" 
```

# c# - 检索实体模型的通用方法

> ID：11639701
> 
> 赞同：2
> 
> 时间：2012-07-24T21:37:22.603
> 
> 标签：c#, entity-framework, generics

我正在尝试创建一个通用方法来检索实体模型。所以我正在尝试创建一个能够获取实体模型类型并返回该类型数据的方法。

这是我到目前为止所拥有的。

```
 public List<T> Generic<T>(List<T> users) where T : List<T>, new()
    {
        using (var entities = new TestDBEntities())
        {
            var enUsers = entities.Users; // How to replace this to make it generic?
            return enUsers.ToList();
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:48:31.010

您使用的是 4.1 版或更高版本（具有 DbContext）吗？

如果不是，或者实体是 ObjectContext，你可以通过反射找到 ObjectSet，如下所示：

```
var objectSet = entities.GetType( ).GetProperties( )
    .Where( p => p.PropertyType.IsGenericType 
         && p.PropertyType.GetGenericArguments( )[ 0 ].Name == typeof( T ).Name )
    .Select( p => p.GetValue( entities, null ) as ObjectSet<T> )
    .First( );
return objectSet.ToList( ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:41:35.497

您可以通过 Set<>() 方法从 DbContext 请求实体。所以，在这种情况下，我认为你可以得到；

```
entities.Set<T>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:59:32.330

如果您不喜欢使用反射，这是一种替代方法：

TestDBEntities 是一个分部类，因此您可以向其中添加如下内容：

```
private Dictionary<Type, ObjectQuery> m_ObjectSets;
private Dictionary<Type, ObjectQuery> ObjectSets
{
    get
    {
        if( m_ObjectSets == null )
        {
            m_ObjectSets = new Dictionary<Type, ObjectQuery>( );
            m_ObjectSets[ typeof( YourTypeA ) ] = YourObjectSetA;
            m_ObjectSets[ typeof( YourTypeB ) ] = YourObjectSetB;
            ...
        }
        return m_ObjectSets;
    }
} 
```

进而

```
 public ObjectSet<T> GetObjectSet<T>( ) where T : class
    {
        return ( ObjectSet<T> ) ObjectSets[ typeof( T ) ];
    } 
```

然后你的调用类可以有

```
return entities.GetObjectSet<T>( ); 
```

# git - git cherry-pick 并通过忽略 EOL 更改进行合并

> ID：11639704
> 
> 赞同：5
> 
> 时间：2012-07-24T21:37:26.473
> 
> 标签：git, merge, conflict, eol, cherry-pick

最近在我们所有的存储库中，我们向所有存储库添加了一个 git 属性文件。这个想法是强制在所有文件中使用 Unix EoL 字符。这在您结帐到新分支的第一天产生了巨大的问题，它开始显示整个文件中的更改。我们只是承诺了。

现在，问题是如果我们从一个分支合并到另一个分支（我们经常这样做）或cherry-pick（我们做更多），合并会再次在所有文件中显示冲突。

如果 git 可以通过首选项忽略行尾或空格更改，那将是理想的。有谁知道 git 是否包含类似的东西或者是否有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:42:55.213

看看[git 合并策略](https://www.kernel.org/pub/software/scm/git/docs/git-merge.html#_merge_strategies)。即您可以指定使用`ignore-space-at-eol`- 在这种情况下可能会对您有所帮助。或者，您可以尝试使用`ours`强制执行 EOL 更改。

# c# - 从 SQL 数据库中的表中检索复选框名称（值）到 ascx 文件中

> ID：11639708
> 
> 赞同：0
> 
> 时间：2012-07-24T21:37:34.603
> 
> 标签：c#, asp.net, ascx

我将选项卡名称存储在我的 SQL 数据库中名为“Importtabs”的表中。我不想对要导入的选项卡的名称进行硬编码，而是想从上述表中检索名称并将它们设置为我在 ascx 端的复选框列表的值。这是我之前使用的硬编码版本：

```
<div style="overflow: auto;"> 
<asp:CheckBoxList ID="CheckBoxList1" BorderStyle="None" runat="server" RepeatColumns="3">
<asp:ListItem>All Temporary Differences</asp:ListItem>
<asp:ListItem>All Permanent Differences</asp:ListItem>
<asp:ListItem>All BS Only Differences</asp:ListItem>
<asp:ListItem>RTA Temp</asp:ListItem>
<asp:ListItem>RTA Perm</asp:ListItem>
<asp:ListItem>RTA Temp Other</asp:ListItem>
<asp:ListItem>RTA Perm Other</asp:ListItem>
<asp:ListItem>RTA Other Expense</asp:ListItem>
</div> 
```

我怎样才能做类似的事情，但使用我数据库中“Importtabs”表中的名称（“所有临时差异”、“所有永久差异”等）。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:48:41.993

假设您已经知道如何从数据库中检索数据，则可以使用此代码将该数据放入 CheckBoxList

```
protected void Page_Load(object sender, EventArgs e)
{
    // do not rebind the list if this is a postback; user input would be lost 
    if (this.IsPostBack)
    {
        return;
    }
    CheckBoxList1.DataSource = GetValues();
    CheckBoxList1.DataBind();
}

private string[] GetValues()
{
    // get data from database, with 'select <columnName> from Importtabs'
    // populate array
    // return values as a string[]
} 
```

这将导致对您的数据库的大量命中，因此您可能希望运行一次 GetValues() 方法，然后缓存结果。

* * *

[缓存](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)和[SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)的链接

# java - 多线程文件处理和报告

> ID：11639716
> 
> 赞同：3
> 
> 时间：2012-07-24T21:38:06.273
> 
> 标签：java, multithreading, file, callable

我有一个应用程序，它处理存储在输入目录中的多个文件中的数据，然后根据该数据生成一些输出。

到目前为止，应用程序是按顺序工作的，即它启动一个“管理器”线程，

*   将输入目录的内容读入`File[]`数组
*   按顺序处理每个文件并存储结果
*   处理完所有文件后终止

我想将其转换为多线程应用程序，其中“管理器”线程

*   将输入目录的内容读入`File[]`数组
*   启动多个“处理器”线程，每个线程处理单个文件、存储结果并将该文件的摘要报告返回给“管理器”线程
*   处理完所有文件后终止

“处理器”线程的数量最多等于文件的数量，因为它们将通过[`ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/ThreadPoolExecutor.html).

任何避免使用`join()`or的解决方案`wait()/notify()`都是可取的。

基于以上场景：

1.  让那些“处理器”线程向“管理器”线程报告的最佳方式是什么？一个基于这里的实现[`Callable`](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/Callable.html)是否[`Future`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)有意义？
2.  “管理器”线程如何知道所有“处理器”线程何时完成，即所有文件何时处理完毕？
3.  有没有办法“定时”处理器线程并在它“太长”时终止它（即，尽管经过了预先配置的时间量，它还没有返回结果）？

任何指向（伪）源代码的指针或示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T23:18:59.167

你绝对可以在不使用`join()`or `wait()`/`notify()`你自己的情况下做到这一点。

您应该先看看[java.util.concurrent.ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)。

在我看来，您应该编写以下类：

*   `FileSummary`- 保存单个文件处理结果的简单值对象
*   `FileProcessor implements Callable<FileSummary>`- 将文件转换为 FileSummary 结果的策略
*   `File Manager`- 创建 FileProcessor 实例、将它们提交到工作队列然后聚合结果的高级管理器。

FileManager 然后看起来像这样：

```
class FileManager {
   private CompletionService<FileSummary> cs; // Initialize this in constructor

   public FinalResult processDir(File dir) {
      int fileCount = 0;
      for(File f : dir.listFiles()) {
         cs.submit(new FileProcessor(f));
         fileCount++;
      }

      for(int i = 0; i < fileCount; i++) {
         FileSummary summary = cs.take().get();
         // aggregate summary into final result;
      }
   } 
```

如果要实现超时，可以使用`poll()`CompletionService 上的方法而不是`take()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T22:47:44.380

`wait()/notify()`是非常低级的原语，你想要避免它们是正确的。

最简单的解决方案是使用线程安全的队列（或堆栈等 - 在这种情况下并不重要）。在启动工作线程之前，您的主线程可以将所有`File`s 添加到线程安全队列/堆栈中。然后启动工作线程，让它们全部拉取`File`并处理它们，直到没有剩余。

工作线程可以将结果添加到另一个线程安全队列/堆栈，主线程可以从中获取结果。主线程知道有多少`File`个 s，所以当它检索到相同数量的结果时，它就会知道作业完成了。

像 a这样的东西`java.util.concurrent.BlockingQueue`会起作用，并且还有其他线程安全的集合`java.util.concurrent`也可以。

您还询问了终止耗时太长的工作线程。我会提前告诉你：如果你能让在工作线程上运行的代码足够健壮，你可以放心地把这个特性排除在外，你会让事情变得简单得多。

如果您确实需要此功能，最简单且最可靠的解决方案是为每个线程设置一个“终止”标志，并让工作任务代码经常检查该标志并在设置时退出。为工人创建一个自定义类，并`volatile boolean`为此目的包含一个字段。还包括一个 setter 方法（因为`volatile`，它不需要是`synchronized`）。

如果工作人员发现其“终止”标志已设置，它可以将其`File`对象推*回工作队列/堆栈*，以便另一个线程可以处理它。当然，如果出现问题导致`File` *无法*成功处理，这将导致无限循环。

最好的办法是使工作代码非常简单和健壮，这样您就不必担心它“不会终止”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T23:07:42.467

1.  不需要他们回来报告。只需计算剩余要完成的作业数量，并在完成时减少线程计数。

2.  当计数达到零剩余作业时，所有“处理器”线程都已完成。

3.  当然，只需将该代码添加到线程中。当它开始工作时，检查时间并计算停止时间。定期（例如，当您从文件中读取更多内容时），检查它是否超过了停止时间，如果是，则停止。

# jquery - MVC 站点外部脚本在部署为虚拟目录时不起作用

> ID：11639717
> 
> 赞同：2
> 
> 时间：2012-07-24T21:38:06.160
> 
> 标签：jquery, asp.net-mvc, iis

我有一个 MVC 应用程序。这是我对 About.cshtml 进行以下更改的基本设置：

```
@{
    ViewBag.Title = "About Us";
}
<script src=@Url.Content("~/Scripts/test.js") type="text/javascript"></script>
<h2>About</h2>
<p>
     Put content here.
</p> 
```

所以我添加了对外部脚本的引用。

脚本本身包含以下内容：

```
$(document).ready(function () {

    $.post('/Home/GetResult', null, function (data) {

        alert(data);

    });

}); 
```

家庭控制器中调用的方法是：

```
public int GetResult()
        {
            return 3;
        } 
```

因此，这是一个基本设置，用户单击关于 GetResult 方法会被调用并弹出一个包含 3 的警报。

所以我在 IIS 中将它设置为网站，它按预期工作。单击“关于”时，会弹出消息，并且该网站有地址`http://localhost:xx/Home/About`

然后我尝试将其设置为虚拟目录。

单击关于时，不会弹出任何消息。它所在的 url 是：`http://localhost:xx/Practise/Home/About`其中 practice 是虚拟目录的名称。

那么为什么消息没有出现呢？

既然 url 包含虚拟目录名称，它就不能再找到文件了吗？

如果需要将其托管为虚拟目录，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:50:18.883

您不应该使用硬编码的 url。试试看

```
$(document).ready(function () {

    $.post('@Url.Action("GetResult", "Home")', null, function (data) {

        alert(data);

    });

}); 
```

始终使用 Url 辅助函数会为您处理实际的物理名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:31:02.000

通常我在这种情况下所做的是通过路由将 URL 写入页面，并让库在初始化时使用一个众所周知的变量或获取一个对象：

在您的页面中：

```
var getResultUrl = '@Url.Action(...)'; 
```

在您的脚本文件中：

```
$(document).ready(function () {
    $.post(getResultUrl, null, function (data) {

        alert(data);
    });
}); 
```

您必须注意对此类内容的操作顺序，其中页面脚本需要在包含脚本之前运行，或者您需要执行其他操作来调用它（将其包装在函数中）。

# python - Python 是否需要对继承链中的所有类有深入的了解？

> ID：11639722
> 
> 赞同：7
> 
> 时间：2012-07-24T21:38:41.110
> 
> 标签：python, subclass, private

Python 类没有公共/私有的概念，因此我们被告知不要触摸以下划线开头的内容，除非我们创建了它。但这不需要我们直接或间接继承的所有类的完整知识吗？见证：

```
class Base(object):
    def __init__(self):
        super(Base, self).__init__()
        self._foo = 0

    def foo(self):
        return self._foo + 1

class Sub(Base):
    def __init__(self):
        super(Sub, self).__init__()
        self._foo = None

Sub().foo() 
```

预计，在评估`TypeError`时会引发a。`None + 1`所以我必须知道它`_foo`存在于基类中。为了解决这个问题，`__foo`可以改用它，它通过修改名称来解决问题。这似乎是一个可以接受的解决方案，如果不是优雅的话。但是，如果`Base`从一个名为的类（在单独的包中）继承会发生什么`Sub`？现在`__foo`在我`Sub`覆盖`__foo`了祖父母`Sub`。

这意味着我必须知道整个继承链，包括每个使用的所有“私有”对象。Python 是动态类型的这一事实使这变得更加困难，因为没有要搜索的声明。然而，最糟糕的部分可能是现在`Base`可能继承自`object`，但在将来的某个版本中，它会切换到继承自`Sub`. 显然，如果我知道`Sub`是继承自的，我可以重命名我的类，但这很烦人。但我看不到未来。

这不是真正的私有数据类型可以防止问题的情况吗？在 Python 中，如果这些脚趾可能在未来某个时候出现，我如何确定我不会不小心踩到某人的脚趾？

*编辑*：我显然没有明确主要问题。我熟悉名称修饰以及单下划线和双下划线之间的区别。问题是：我如何处理我可能与*我现在不知道存在*的类发生冲突的事实？如果我的父类（在我没有编写的包中）恰好开始从与我的类同名的类继承，那么即使名称修改也无济于事。我认为这是一个真正的私人成员可以解决的（角落）案例，但 Python 遇到了麻烦，我错了吗？

*编辑*：根据要求，以下是完整示例：

文件`parent.py`：

```
class Sub(object):
    def __init__(self):
        self.__foo = 12
    def foo(self):
        return self.__foo + 1
class Base(Sub):
    pass 
```

文件`sub.py`：

```
import parent
class Sub(parent.Base):
    def __init__(self):
        super(Sub, self).__init__()
        self.__foo = None
Sub().foo() 
```

祖父母的`foo`被称为，但我`__foo`的被使用。

显然你不会自己编写这样的代码，但`parent`可以很容易地由第三方提供，其细节可能随时更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T21:41:04.497

使用[*私有*名称](http://docs.python.org/tutorial/classes.html#tut-private)（而不是*受保护*的名称），以双下划线开头：

```
class Sub(Base):
    def __init__(self):
        super(Sub, self).__init__()
        self.__foo = None
        #    ^^ 
```

不会与`_foo`或`__foo`in冲突`Base`。这是因为 Python 将双下划线替换为单下划线和类名；以下两行是等效的：

```
class Sub(Base):
    def x(self):
        self.__foo = None # .. is the same as ..
        self._Sub__foo = None 
```

（作为对编辑的回应：）类层次结构中的两个类不仅具有相同的名称，而且它们都使用相同的属性名称，并且都使用私有重整（`__`）形式的机会是如此微不足道，以至于它在实践中可以安全地忽略（到目前为止我还没有听说过一个案例）。

但是，从理论上讲，您是正确的，因为为了正式验证程序的正确性，人们最了解整个继承链。幸运的是，在任何情况下，形式验证通常都需要一组固定的库。

[这是Python](http://www.python.org/dev/peps/pep-0020/)之禅的精神，其中包括

> 实用胜过纯洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T21:41:58.520

1.  名称修饰包括该类，因此您的`Base.__foo`和`Sub.__foo`将具有不同的名称。这就是首先将名称修饰功能添加到 Python 的全部原因。一个将是`_Base__foo`，另一个`_Sub__foo`。

2.  由于某些原因，许多人更喜欢使用组合（has-a）而不是继承（is-a）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T22:16:55.787

> 这意味着我必须知道整个继承链。. .

是的，你应该知道整个继承链，或者你直接子类化的对象的文档应该告诉你你需要知道什么。

子类化是一项高级功能，应谨慎对待。

指定子类中应该覆盖什么的文档的一个很好的例子是[线程类](http://docs.python.org/library/threading.html#thread-objects)：

> 此类表示在单独的控制线程中运行的活动。有两种方法可以指定活动：通过将可调用对象传递给构造函数，或通过覆盖`run()`子类中的方法。不应在子类中覆盖任何其他方法（构造函数除外）。也就是说，只覆盖这个类的`__init__()`和`run()`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T02:57:25.243

您多久修改一次继承链中的基类，以从与更下游的子类同名的类中引入继承？？？

不那么轻率，是的，你必须知道你正在使用的代码。毕竟，您*当然必须知道所使用的公共名称。*Python 是 python，发现你的祖先类使用的公共名称与发现私有名称几乎相同。

在多年的 Python 编程中，我从来没有发现这在实践中是一个很大的问题。当您命名实例变量时，您应该非常清楚 (a) 一个名称是否足够通用，以至于它可能会在其他上下文中使用，以及 (b) 您正在编写的类是否可能涉及与其他未知类的继承层次结构。在这种情况下，您会更仔细地考虑您使用的名称；`self.value`对于属性名称来说不是一个好主意，也不是`Adaptor`一个好的类名称。

相比之下，我多次因过度使用双下划线名称而遇到困难。Python 是 Python，即使是“私有”名称也倾向于由类外部定义的代码访问。您可能认为让外部函数访问“私有”属性总是不好的做法，但是像`getattr`and之类的东西`hasattr`呢？*调用*_*它们中的一部分可以在类自己的代码中，因此类仍然控制对私有属性的所有访问，但是如果没有您手动进行名称修改，它们仍然无法工作。如果 Python 具有实际强制执行的私有变量，那么您根本无法使用它们上的那些函数。这些天来，当我编写一些非常通用的东西（如装饰器、元类或 mixin）时，我倾向于保留双下划线名称，这些东西需要向它所应用的（未知）类的实例添加“秘密属性”。*

 *当然还有标准的动态语言论点：现实情况是，您必须彻底测试您的代码才能有充分的理由宣称“我的软件有效”。这样的测试不太可能错过由意外冲突名称引起的错误。如果您不进行该测试，那么将通过其他方式引入更多未捕获的错误，而不是通过意外的名称冲突*。*

总而言之，在实践中，在惯用的 Python 代码中，缺少私有变量并不是什么大问题，而添加真正的私有变量会在其他方面导致更频繁的问题，恕我直言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T21:48:03.360

如前所述，您可以使用名称修饰。但是，如果您充分记录代码，则可以坚持使用单个下划线（或不使用下划线！） - 您不应该有太多私有变量，以至于这被证明是一个问题。只需说明一个方法是否依赖于私有变量，然后将变量或方法的名称添加到类文档字符串中以提醒用户。

此外，如果您创建单元测试，您应该创建检查成员不变量的测试，因此这些应该能够显示此类名称冲突。

如果您真的想拥有“私有”变量，并且无论出于何种原因名称修改不能满足您的需求，您可以将您的私有状态分解为另一个对象：

```
class Foo(object):

     class Stateholder(object): pass

     def __init__(self):
         self._state = Stateholder()
         self.state.private = 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T21:50:50.217

重整发生在双下划线中。单下划线更像是“请不要”。

您不需要知道所有父类的所有细节（请注意，通常最好避免深度继承），因为您仍然可以使用 dir() 和 help() 以及您可以提出的任何其他形式的内省。*

# ios - IOS阵列测试

> ID：11639726
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:39:31.767
> 
> 标签：ios, objective-c, arrays, cocoa-touch, webpage

这是我当前的代码：

```
int i = 1;

NSString * StockOneYahooFinance = [NSString stringWithFormat:@"http://finance.yahoo.com/q/hp?s=S+Historical+Prices"];
NSString * PulledStockOne = [NSString stringWithContentsOfURL:[NSURL URLWithString:StockOneYahooFinance] encoding:1 error:nil];

for (i=1;i=30;i++){

NSString *StartPulling = [[PulledStockOne componentsSeparatedByString:@"nowrap align="] objectAtIndex:i];

NSString *StartOpen = [[StartPulling componentsSeparatedByString:@">"] objectAtIndex:3];
NSString *Open = [[StartOpen componentsSeparatedByString:@"<"] objectAtIndex:0];

NSString *StartClose = [[StartPulling componentsSeparatedByString:@">"] objectAtIndex:9];
NSString *Close = [[StartClose componentsSeparatedByString:@"<"] objectAtIndex:0];

    year.text = Close;

i++;
} 
```

但到了这一点，我点击屏幕上唯一的按钮，它完全按照我想要的方式拉动了当天的股票开盘价和收盘价。但是我当前的问题是我希望它把所有这些都拉成一个数组，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:50:59.873

第一件事：

```
for (i=1;i=30;i++){ 
```

它应该是：

```
for (i=1;i<=30;i++){ 
```

第二个，不要在循环结束时增加'int i'值，因为'for'循环已经这样做了。对于 quick'n 肮脏的调试方式，请添加：

```
NSLog(@"Current iteration: %i", i); 
```

作为“for”循环中的第一个函数来查看那里发生了什么。

# javascript - 如何放置第三方网站或网站链接以在我网页的框架中打开？

> ID：11639728
> 
> 赞同：0
> 
> 时间：2012-07-24T21:39:38.380
> 
> 标签：javascript, html, frame

我正在建立一个网站，我想在我的网页的框架中打开第三方网站页面，我应该使用什么？javascript？如果是这样，我该怎么写？我很新，不知道我在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:42:45.363

如果您使用的是动态网址，则可以使用 javascript，否则您只需要[iframe](http://www.w3schools.com/tags/tag_iframe.asp)。

```
<iframe src="http://www.stackoverflow.com" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:48:12.043

如果您希望他们单击​​一个链接，然后在 iframe 中显示该网站，则如下所示：

```
<a href="http://site.com/" target="iframe">site.com</a>
<iframe name="iframe"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:48:24.160

如果您想让它在用户单击链接时，该链接在某个框架中打开，您应该为该框架/iframe 提供一个 ID。然后，您可以提供该 ID 作为锚点的目标属性。

假设你的框架看起来像这样

```
<frame src="somepage.html" id="myFrame"> 
```

现在您可以像这样在该框架中打开一个页面：

```
<a href="http://www.google.com" target="myFrame">Some link</a> 
```

无需使用纯 HTML 之外的任何内容来完成此操作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-24T21:47:31.820

我会使用[http://fancybox.net/](http://fancybox.net/)
这是一个轻量级的 jQuery 脚本，可以生成漂亮的 iFrame 覆盖。您也可以将其用于图片和任何其他叠加层。

包括 jQuery 和 Fancybox 和 FancyBox CSS：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" href="/fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" /> 
```

然后添加链接：

```
<a id="iframe" href="http://www.example.com/">This goes to iframe</a> 
```

并使用 jQuery 初始化 FancyBox：

```
$(document).ready(function() {
    /* This is basic - uses default settings */
    $("a#iframe").fancybox();
}); 
```

# javascript - Sencha touch 2 原生构建未加载

> ID：11639730
> 
> 赞同：8
> 
> 时间：2012-07-24T21:39:40.970
> 
> 标签：javascript, ios, json, sencha-touch-2

使用以下命令生成默认应用程序后：

```
sencha generate app Sencha ../Sencha 
```

我决定在 iOS 模拟器上测试应用程序

```
cd ../Sencha/
sencha app build native 
```

它加载应用程序但卡在加载图标上： ![Sencha iOS 应用程序卡在加载屏幕](../Images/59279ab88ce56fa37f2c9acc9fb46eca.png)

以下是主应用程序 (App.js) 的代码：

```
Ext.application({
    name: 'Sencha',

    requires: [
        'Ext.MessageBox'
    ],

    views: ['Main'],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

    startupImage: {
        '320x460': 'resources/startup/320x460.jpg',
        '640x920': 'resources/startup/640x920.png',
        '768x1004': 'resources/startup/768x1004.png',
        '748x1024': 'resources/startup/748x1024.png',
        '1536x2008': 'resources/startup/1536x2008.png',
        '1496x2048': 'resources/startup/1496x2048.png'
    },

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view
        Ext.Viewport.add(Ext.create('Sencha.view.Main'));
    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?",
            function(buttonId) {
                if (buttonId === 'yes') {
                    window.location.reload();
                }
            }
        );
    }
}); 
```

下面是主视图（Main.js）的代码：

```
Ext.define("Sencha.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: [
        'Ext.TitleBar',
        'Ext.Video'
    ],
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                title: 'Welcome',
                iconCls: 'home',

                styleHtmlContent: true,
                scrollable: true,

                items: {
                    docked: 'top',
                    xtype: 'titlebar',
                    title: 'Welcome to Sencha Touch 2'
                },

                html: [
                    "You've just generated a new Sencha Touch 2 project. What you're looking at right now is the ",
                    "contents of <a target='_blank' href=\"app/view/Main.js\">app/view/Main.js</a> - edit that file ",
                    "and refresh to change what's rendered here."
                ].join("")
            },
            {
                title: 'Get Started',
                iconCls: 'action',

                items: [
                    {
                        docked: 'top',
                        xtype: 'titlebar',
                        title: 'Getting Started'
                    },
                    {
                        xtype: 'video',
                        url: 'http://av.vimeo.com/64284/137/87347327.mp4?token=1330978144_f9b698fea38cd408d52a2393240c896c',
                        posterUrl: 'http://b.vimeocdn.com/ts/261/062/261062119_640.jpg'
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T05:39:48.580

将 更改`"logger": "no"`为`"logger": "false"`in `app.json`。完成后，它应该如下所示：

```
"buildOptions": {
    "product": "touch",
    "minVersion": 3,
    "debug": false,
    "logger": "false"
}, 
```

然后用 再次重建`sencha app build native`。您可以在浏览器中重现相同的错误，`sencha app build production`然后将您的浏览器指向`http://localhost/path/to/myapp/build/production`. 如果这样做，则必须先清除浏览器缓存，然后才能正常工作（在 chrome 上：扳手->工具-开发者工具->本地存储->主机名->X（用于删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:35:24.447

所以这真的很晚了，但看起来你还没有将你的问题标记为已回答，我只是花了几个小时试图弄清楚这一点，结果证明这一切都是因为Sencha Docs，用于下载的 Sencha SDK 工具，以及实际的 Sencha SDK。

希望这会对某人有所帮助-

如果您的 SDK 是 2.1.0 或更高版本，则需要使用 Sencha Command 3.0.0（而不是适用于 Sencha 2.0 的 SDK 工具）启动基本应用程序。如果您让 Sencha Command 位正常工作（安装它并没有将它放在 PATH 中，所以我不得不手动添加它）一切都像一个魅力。

[http://docs.sencha.com/touch/2-1/#!/guide/command](http://docs.sencha.com/touch/2-1/#!/guide/command)

希望能帮助一些掉队的人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:15:32.387

构建过程在构建过程中创建缩小版本。在浏览器中启动它并检查错误控制台的内容。

# java - 与 Android 中的 GLThread 同步

> ID：11639734
> 
> 赞同：1
> 
> 时间：2012-07-24T21:39:50.660
> 
> 标签：java, android, multithreading, opengl-es, synchronized

我正在使用opengl-es在android中制作游戏，使用多个线程：

```
class World{

    protected static final AtomicInteger entityLock = new AtomicInteger();

    private GameEntity entities[];

    public World(){
        // populate game world with entities
        // executed on main thread
        addEntity(new GameEntity("tank"));
        addEntity(new GameEntity("rifleman"));
        addEntity(new GameEntity("rifleman"));
    }

    void update(){
        synchronized(entityLock){
           for(int i = 0;i<entities.length;i++){
                // move entity to new position
                // executed on PhysThread
                entities[i].updatePosition();                    
            }
        }
        if(entity.isDead(){
            // remove entity. Enter sync block inside removeEntity() method
            removeEntity(entity);                  
        }                      
    }

    void draw(GL10 gl){
        synchronized(entityLock){
            for(int i = 0;i<entites.length;i++){
                // draw models
                // executed on GLThread
                Vector3 entityPosition = entities[i].getPosition();
                gl.glTranslatef(entityPosition.x, entityPosition.y, entityPosition.z);
                entities[i].draw();
            }
        }
    }

    public void addEntity(GameEntity entity){
        synchronized(entityLock){
            // arrays stuff
        }
    }

    public void removeEntity(GameEntity entity){
        synchronized(entityLock){
            // arrays stuff
        }
    }

} 

class MyRenderer implements GLSurfaceView.Renderer{

    World world;

    public MyRenderer(World world){
        this.world = world;
    }

    public void onDrawFrame(GL10 gl) {
        // executed on GLThread
        world.draw(gl);             
    }

}

class PhysThreadRunnable implements Runnable{

    private long tickRate = 30;

    private World world;

    private PhysThreadRunnable(World world){
        this.world = world;
    }

    protected void setTickRate(long tickRate){
        this.tickRate = tickRate;
    }

    public void run() {
        while(true){                
            try {
                // executed on PhysThread
                world.update();
                Thread.sleep(1000/tickRate);
            } catch (InterruptedException e) {
                return;
            }

        }
    }
}

MyActivity extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        World world = new World(); 
        // sets up the game world, populates it with entities

        // set up GLSurfaceView (simplified)
        setContentView(R.layout.main);
        GLSurfaceView mGLView = findViewById(R.id.myGLSurfaceView);
        mGLView.setRenderer(new MyRenderer(world));

        // start phys thread
        PhysThreadRunnable physThreadRunnable = new PhysThreadRunnable(world);
        Thread physThread = new Thread(physThreadRunnable);
        physThread.start();
    }
} 
```

我有一个问题，有时（但不是每次）当我开始游戏时，PhysThread 卡住等待释放锁（即当我去调试并暂停线程时，它只是坐在`synchronized(entityLock)`里面`update()`

真正奇怪的是，一段时间后（2 秒到 1 分钟之间），PhysThread 将被解除阻塞，游戏将继续进行，而任何一个线程都不会在线程循环的多次迭代中被锁定。（即游戏运行良好）

**编辑：**我在示例中添加了一些额外的东西，以防万一这是问题的原因。基本上，更新和绘制实体数组而不是单个实体

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:57:13.253

我认为这里的问题可能是“同步”块不能保证公平。

OpenGL 线程将始终连续渲染，因此它会在完成后立即尝试重新进入 onDraw。由于选择允许哪个线程进入同步块是任意的，因此 OpenGL 线程可能会在将锁释放给物理线程之前尝试重新获取锁，并且基于一些任意标准，它会被锁定并且在不允许物理线程进入的情况下结束。

这可以解释为什么它有时会发生而不是其他时候，因为这是一个任意决定。

您可以尝试实现公平锁而不是同步块，或者使 OpenGL 自上次物理更新后不会多次尝试重绘场景（让渲染线程休眠，直到发生更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:23:50.827

最后，我选择了作弊解决方案。我将同步块放在对实体数组的访问周围，并将 for 循环放在带有 ArrayIndexOutOfBounds 的 try/catch 中：

```
void update(){
    try{
        for(int i = 0;i<entities.length;i++){               
            GameEntity entity = entities[i];                
            synchrnonized(entity){
                entity.updatePosition();
            }               
        }
    }catch(ArrayIndexOutOfBoundsException aioob){
        if(tryAgain){
            update();
        } else {
            return;
        }
    }
} 
```

这个解决方案的问题是，如果从完全不相关的东西中`entity.updateposition()`抛出一个`ArrayIndexOutOfBoundsException`，那么我会抓住它并误解它。再加上整个事情有点混乱，每隔一段时间就会跳过一帧或更新

由于这似乎解决了问题，我怀疑最初的原因可能在于我的代码中更深层次的地方，在进入 for 循环和实际修改实体之间，我真的不认为在这里转储我的整个代码是公平的.

我会在几天内不回答这个问题，以防其他人有更好的解决方案

# php - 安全密码存储和恢复

> ID：11639735
> 
> 赞同：1
> 
> 时间：2012-07-24T21:39:57.533
> 
> 标签：php, ajax, encryption, hash, openssl

所以，

我有一个存储密码的 mysql 表，这些密码**不能**被散列，因为我需要稍后将其恢复为纯文本。

我有一个 javascript，它通过 ajax/php 从 mysql 数据库中获取这些密码，并将其发送到另一台服务器，该服务器将使用它进行身份验证，这就是为什么我在发送时需要以纯文本格式保存它们。

我知道有 base64 和其他加密算法，但这是不安全的。

我找到的最佳解决方案是 OpenSSL，但我不确定我是否走在正确的道路上。我是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:03:39.690

OpenSSL 是一个很好的起点。它支持大量可用于加密纯文本密码的安全加密算法。AES-256 或 Twofish 是很好的算法。3DES 也被认为足以满足当今的标准。

为了获得良好的安全性，您需要使用不同的密钥加密每个用户的密码；也就是说，每个用户都有一个唯一的加密密钥，并且您不会对所有密码使用 1 个密钥。这*可能*是他们在您的网站上使用的用户密码的哈希值，但通常用户密码不强，如果他们忘记了您的网站/服务的密码，那么他们也会丢失他们的加密密钥。

为了获得最大的安全性，您不应将加密密钥存储在任何地方。当用户使用他们的密码登录时，您可以根据他们的密码在内存中生成加密密钥。理想情况下，它不仅仅是密码的哈希值，而是通过某种转换算法应用的密码。

如果这不是一个选项，那么您应该将加密密钥存储在与存储加密用户密码的物理服务器不同的物理服务器上。存储加密密钥的服务器应该具有许多安全和访问控制功能，并具有非常受控的数据库访问，因此几乎只有您的应用程序可以访问密钥。

最重要的是，您必须在隐私政策中披露您可以存储加密形式的密码以用于 3rd 方服务。

希望有帮助。 [OWASP](https://www.owasp.org/index.php/Main_Page)可能有一些与您将要做的事情相关的其他有用信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T22:50:06.880

感谢所有答案，我将使用此处描述的 php 加密方法：[https ://stackoverflow.com/a/6639179/1415262](https://stackoverflow.com/a/6639179/1415262)

并尝试一些openssl。

对于所有其他答案，我对它们有一些问题，而且很短的时间来解释原因。

PS.：我还不能投票，但特别感谢@drew010 和@fabio :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:43:45.423

我强烈建议您不要以明文形式存储密码，并且可能会生成某种从一台服务器传递到另一台服务器的一次性使用密钥。

所以服务器一有一个链接到特定用户的唯一密钥，这个密钥也在服务器二上，这就是传递的密钥。

# html - 4 个 div 和一个菜单栏 (CSS)

> ID：11639736
> 
> 赞同：0
> 
> 时间：2012-07-24T21:39:59.583
> 
> 标签：html, css

我正在为网站拆分 4 个屏幕布局。我以为我只是设置 4 `divs`, `50%`of `height and width`, `float left and right`。

但我需要在这一切的中间添加一个菜单栏。我通过在前 2 个 div 之后添加一个 div 来做到这一点，并将菜单栏`div`“ `clear`”`css`标签设置为“ `both`”。

我快到了......问题是从现在开始出现这个滚动条，它是 50% + 菜单栏高度 + 另一个 50%......

我只需要找到一种方法使菜单栏适合此...当窗口较小时右侧没有滚动条。（我最初使用的是溢出：隐藏，但小屏幕的人不会看到菜单中的下拉项目）。

这是我的[小提琴](http://jsfiddle.net/ttCJG/)（这是显示我的问题的简单方法）

任何想法？谢谢！

**编辑 ：**

看看当你调整窗口大小时它会做什么，并滚动图像：http: [//jsfiddle.net/ttCJG/2/](http://jsfiddle.net/ttCJG/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:46:32.783

试试这个 - [http://jsfiddle.net/ttCJG/1/](http://jsfiddle.net/ttCJG/1/)

```
#menu-bar {
    height:30px;
    width:500px;
    background-color:black;
    left:0;
    right:0;
    margin: auto;
    clear:both;
    color:white;
    position: absolute;
    top: 50%;
    margin-top: -15px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:47:56.450

从顶部和底部移除菜单栏的`<div>`高度

**示例**:
Top Divs: 40%
Menu: 20%
Bottom Divs: 40%

他们可能需要调整，但简而言之就是这样。试试这样的 CSS：

```
html, body {
 width:100%;
 height:100%;
 padding:0;
 margin:0;   
}
#test1 {
 width:50%;
 height:47%;
 float:left;
 background-color:red;       
}
#test2 {
 width:50%;
 height:47%;
 float:right;
 background-color:blue;       
}
#test3 {
 width:50%;
 height:47%;
 float:left;
 background-color:green;       
}
#test4 {
 width:50%;
 height:47%;
 float:right;
 background-color:yellow;       
}
#menu-bar {
 height:6%;
 width:100%;
 background-color:black;
 margin:0;
 clear:both;
 color:white;
}​ 
```

# objective-c - XCode：在选项卡式应用程序中处理新视图的最佳方式

> ID：11639737
> 
> 赞同：0
> 
> 时间：2012-07-24T21:39:59.093
> 
> 标签：objective-c, ios, cocoa-touch

在我正在制作的 iOS 选项卡式应用程序中，我有用于加载不同视图控制器的选项卡，这是非常标准的。我想做的是让几个按钮（上面有图像）加载另一个视图，按钮图像最大化到屏幕上。但是，我不确定如何去做。我不想要一个新的选项卡，我只想要另一个视图来显示完整的图像，然后是一个返回选项卡视图的按钮。我已经尝试过制作一个子视图来执行此操作，并且我尝试将主视口更改为新视图，但没有成功。如果有人能指出我正确的方向，或许能给我一个坚实的概念作为起点，我将不胜感激。

澄清一下，我本身并不是在寻找“最好的方法”。我愿意接受一个快速而肮脏的修复。但是，如果您知道处理这种情况的方法不止一种，我将不胜感激您个人认为更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:03:52.493

我会通过创建一个 UINavigationController 用作主选项卡视图来做到这一点。当您想要显示全屏按钮时，您创建一个新的 UIViewController 子类（如下）并推送它。该类将为方法“hidesBottomBar”（类似的东西）返回YES。

这个新的视图控制器将是一个传统的控制器。您可以创建一个 UIImageView 来填充视图（或者您可以用 imageView 替换视图）。在 viewDidLoad 中，您将设置视图的 UIImage（或者您可以在 nib 中输入其名称）。

当有人单击该按钮时，您将弹出该视图并返回到您的选项卡式视图（显示选项卡栏的位置）。

我做了这样的事情（不是一个大按钮），所以我知道标签栏可以隐藏在推送中。您还可以隐藏导航栏，使其永远不会显示（同样，目前还不能 100% 确定如何操作，但有可能）。

# android - 如何在线性布局中垂直分配权重？

> ID：11639740
> 
> 赞同：1
> 
> 时间：2012-07-24T21:40:20.050
> 
> 标签：android, button, android-linearlayout, compatibility

我需要在行中显示 3 个按钮，在列中显示 3 个按钮意味着
屏幕上总共有 9 个按钮。我在水平线性布局中分配`android:layout_weight` `0.33`给每个。这与每个屏幕兼容，但我还需要垂直设置权重。

简而言之，我需要创建一个带有 9 个按钮的屏幕，它应该与每个屏幕兼容。我怎样才能做到这一点？如果可以，我们可以垂直设置权重，那么如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:42:02.930

创建 3 个单独的 LinearLayout，每行一个，并将它们封装在一个垂直的 LinearLayout 中。然后给 3 个 LinearLayouts 相同的权重。

伪：

```
<VerticalLinearLayout>

    <HorizontalLinearLayout>
        <Button 1 /> 
        <Button 2 />
        <Button 3 />
    </HorizontalLinearLayout>

    <HorizontalLinearLayout>
        <Button 4 />
        <Button 5 />
        <Button 6 />
    </HorizontalLinearLayout>

    <HorizontalLinearLayout>
        <Button 7 />
        <Button 8 />
        <Button 9 />
    </HorizontalLinearLayout>

</VerticalLinearLayout> 
```

将除 VerticalLinearLayout 之外的所有内容赋予 3 的权重。确保所有 layout_widths 和 layout_heights 都设置为 fill_parent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T10:34:51.123

**可行的来源**

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1">

        <Button
            android:id="@+id/btnSales"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Sales" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1">
        <Button
            android:id="@+id/btnProduction"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Production" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1">

        <Button
            android:id="@+id/btnStock"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Stock" />

    </LinearLayout>
</LinearLayout> 
```

# java - java试图分配较弱的访问权限错误

> ID：11639741
> 
> 赞同：23
> 
> 时间：2012-07-24T21:40:21.330
> 
> 标签：java, compiler-errors, selenium-rc

```
[javac] U:\dms-webui-testing\test-java\dmswebui\CR\TestLogin.java:16: until() in  cannot override until() in com.thoughtworks.selenium.Wait; attempting to assign weaker access privileges; was public 
```

对于一个相当简单的代码，我遇到了错误：

```
package dmswebui.CR;

import org.infineta.webui.selenium4j.MainTestCase;

public class TestLogin extends MainTestCase {

  @Override
  public void setUp() throws Exception {
    super.setUp();
    startSeleniumSession("ChromeDriver", "somesite");
  }

  public void testMethod() throws Exception {

        new Wait("") {boolean until() {return false;}};session().open("/");
        new Wait("") {boolean until() {return false;}};session().click("id=btnLogin-button");       session().waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) fail("timeout 'waitForTextPresent:Logoff' ");
            try { if (session().isTextPresent("Logoff")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }
        new Wait("") {boolean until() {return false;}};session().click("id=btnUserLogout-button");
        new Wait("") {boolean until() {return false;}};session().click("id=yui-gen0-button");       session().waitForPageToLoad("30000");
  }
  public void tearDown() throws Exception {
    super.tearDown();
    closeSeleniumSession();
  }

} 
```

[这](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/java/com/thoughtworks/selenium/Wait.html#Wait%28%29)是我使用 Wait 类的方法。请帮助我理解这个错误。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-24T21:44:48.313

有问题的行是下面的两条

```
new Wait("") {boolean until() {return false;}};session().open("/");
new Wait("") {boolean until() {return false;}};session().click("id=btnLogin-button"); 
```

您尝试通过仅包可见的方法覆盖在类`until`中具有`public`访问权限的方法。`com.thoughtworks.selenium.Wait``until`

您不能覆盖方法并降低可见性。您只能增加可见性（例如覆盖一个`protected`方法并制作它`public`）

所以解决方法是将`public`关键字添加到这些方法中

```
new Wait("") {public boolean until() {return false;}};session().open("/");
new Wait("") {public boolean until() {return false;}};session().click("id=btnLogin-button"); 
```

# java - 在使用双锁时使单例实例易失有什么意义？

> ID：11639746
> 
> 赞同：41
> 
> 时间：2012-07-24T21:40:31.500
> 
> 标签：java, singleton, volatile, thread-synchronization, double-checked-locking

```
private volatile static Singleton uniqueInstance 
```

在使用双锁方法进行同步的单例中，为什么将单个实例声明为 volatile ？我可以在不将其声明为 volatile 的情况下实现相同的功能吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-24T22:05:26.777

这`volatile`可以防止内存写入被重新排序，从而使其他线程无法通过单例的指针读取单例的未初始化字段。

考虑这种情况：线程 A 发现`uniqueInstance == null`，锁定，确认它仍然是`null`，并调用单例的构造函数。`XYZ`构造函数对Singleton 内部的成员进行写入，然后返回。线程 A 现在将对新创建的单例的引用写入`uniqueInstance`，并准备释放它的锁。

就在线程 A 准备释放它的锁时，线程 B 出现了，发现它`uniqueInstance`不是`null`. 线程`B`访问`uniqueInstance.XYZ`时以为自己已经初始化了，但是由于 CPU 对写入进行了重新排序，线程 A 写入的数据`XYZ`并没有对线程 B 可见。因此，线程 B 在 内部看到了不正确的值`XYZ`，这是错误的。

当您标记`uniqueInstance`volatile 时，会插入一个*内存屏障。*之前启动的所有写入`uniqueInstance`都将在`uniqueInstance`修改之前完成，从而防止上述重新排序情况。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-24T21:44:07.633

如果没有`volatile`代码，多线程将无法正常工作。

来自维基百科的[双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking#Usage_in_Java)：

> 从 J2SE 5.0 开始，此问题已得到修复。volatile 关键字现在可确保多个线程正确处理单例实例。[在“双重检查锁定被破坏”声明](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)中描述了这个新的成语：

```
// Works with acquire/release semantics for volatile
// Broken under Java 1.4 and earlier semantics for volatile
class Foo {
    private volatile Helper helper = null;
    public Helper getHelper() {
        Helper result = helper;
        if (result == null) {
            synchronized(this) {
                result = helper;
                if (result == null) {
                    helper = result = new Helper();
                }
            }
        }
        return result;
    }

    // other functions and members...
} 
```

一般来说，如果可能的话，你应该避免仔细检查锁定，因为它很难正确，如果你弄错了，也很难找到错误。试试这个更简单的方法：

> 如果辅助对象是静态的（每个类加载器一个），另一种方法是[按需初始化持有者习惯用法](http://en.wikipedia.org/wiki/Initialization_on_demand_holder_idiom)

```
// Correct lazy initialization in Java 
@ThreadSafe
class Foo {
    private static class HelperHolder {
       public static Helper helper = new Helper();
    }

    public static Helper getHelper() {
        return HelperHolder.helper;
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-25T07:16:14.823

为避免使用双重锁定或易失性，我使用以下

```
enum Singleton {
     INSTANCE;
} 
```

创建实例很简单，延迟加载和线程安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-08T07:26:37.383

**写入 volatile 字段将在任何读取操作之前发生。** 下面是一个示例代码，以便更好地理解：

```
private static volatile ResourceService resourceInstance;
//lazy Initialiaztion
public static ResourceService getInstance () {
    if (resourceInstance == null) { // first check
        synchronized(ResourceService.class) {
            if (resourceInstance == null) { // double check
                // creating instance of ResourceService for only one time
                resourceInstance = new ResourceService ();                    
            }
        }
    }
    return resourceInstance;
} 
```

此链接可以为您提供更好 的服务[http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html](http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-05-17T02:53:05.043

您可以使用以下代码：

```
private static Singleton uniqueInstance;

public static synchronized Singleton getInstance(){
    if(uniqueInstance == null){
        uniqueInstance = new Singleton();
    }
    return uniqueInstance
} 
```

# git - 当没有其他丢失的对象时，在 Git 中重建松散的丢失树

> ID：11639751
> 
> 赞同：1
> 
> 时间：2012-07-24T21:40:49.583
> 
> 标签：git, version-control, corruption, recovery

我的 Git 存储库声称存在损坏的对象：运行`git fsck --full`表示存储库中有损坏的松散对象。由于对象已损坏，我无法使用 解压缩它`git cat-file -t`，但删除文件会导致 fsck 仅报告：

```
broken link from tree 93e54230ef...
            to tree 5aec4ad...
missing tree 5aec4ad... 
```

我认为这个丢失的树是唯一丢失的文件，或者说没有悬空提交/blob，因为运行`git ls-tree 93e54230ef...`只显示一行：`040000 tree 5aec4ad... android`. 此外，损坏文件的最后修改日期是昨天，从那时起我没有进行任何更改。不幸的是，我检查了我拥有的这个存储库的克隆，但它们都没有打包或解包丢失的对象。

**如何在没有悬空提交或 blob 的情况下重建丢失的 git 树？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:58:02.427

当 Git 中缺少的只是一棵树时，解决方案就是**使用[write-tree](http://www.kernel.org/pub/software/scm/git/docs/git-write-tree.html)**：

```
git write-tree 
```

执行该命令后，Git 存储库应恢复到以前的状态。

# c++ - 如何使用 boost::joined_range 实现范围适配器

> ID：11639754
> 
> 赞同：1
> 
> 时间：2012-07-24T21:41:10.653
> 
> 标签：c++, boost, boost-range

以下是基于[实现带参数的范围适配器](http://www.boost.org/doc/libs/1_50_0/libs/range/doc/html/range/reference/extending/method_3/method_3_2.html)的范围适配器示例：

```
#include <boost/range/join.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/range/adaptors.hpp>
#include <boost/range/iterator_range.hpp>
#include <boost/iterator/permutation_iterator.hpp>
#include <vector>
#include <list>
#include <iterator>
#include <iostream>

template <typename Range, typename Index>
class permutation_range :
        public boost::iterator_range<
                boost::permutation_iterator<
                        typename boost::range_iterator<Range>::type,
                        typename boost::range_iterator<Index>::type>>
{
    using value_type = typename boost::range_value<Range>::type;
    using replaced_iterator = boost::permutation_iterator<
                            typename boost::range_iterator<Range>::type,
                            typename boost::range_iterator<Index>::type>;
    using base_t = boost::iterator_range<replaced_iterator>;
public:
    permutation_range(Range& r, Index& i)
            : base_t(replaced_iterator(boost::begin(r), boost::begin(i)),
                    replaced_iterator(boost::end(r), boost::end(i)))
    {}
};

template <typename Range, typename Index>
permutation_range<Range, Index>
permutation(Range& r, Index& i)
{
    return permutation_range<Range, Index>(r, i);
}

int main()
{
    std::vector<int> v1{99, 1, 99,  2, 99, 3};
    std::list<int> indexer{1, 3, 5};
    boost::copy(permutation(v1, indexer),
                std::ostream_iterator<int>(std::cout, " "));
} 
```

**输出**

> 1 2 3

我想调整以上内容以使用[boost::joined_range](http://www.boost.org/doc/libs/1_50_0/libs/range/doc/html/range/reference/utilities/join.html)。换句话说，取两个向量，然后将它们连接到 内的一个更长的范围内`permutation_range`。这个想法很简单：

**将输出的**示例**`2 4 6`：**

 **```
int main()
{
    std::vector<int> v1{1, 2, 3};
    std::vector<int> v2{4, 5, 6};
    std::list<int> indexer{1, 3, 5};
    boost::copy(permutation(v1, v2, indexer),
                std::ostream_iterator<int>(std::cout, " "));
} 
```

到目前为止，我所有的尝试都以大量编译器错误而告终，我没有展示这些尝试，因为我可能会走得很远。我不知道这是否可能，但是有人可以在这里帮助我吗？

**最终编辑**（在基类之前初始化范围的解决方案）

```
#include <boost/range/join.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/range/adaptors.hpp>
#include <boost/range/iterator_range.hpp>
#include <boost/iterator/permutation_iterator.hpp>
#include <vector>
#include <list>
#include <iterator>
#include <iostream>

template <typename R1, typename R2>
struct initialize_me_first
{
    initialize_me_first(typename boost::range::joined_range<const R1, const R2> j)
    : j_range(j)
    {}
    typename boost::range::joined_range<const R1, const R2> j_range;
};

template <typename Range1, typename Range2, typename Index>
class permutation_range :
        public initialize_me_first<Range1, Range2>,
        public boost::iterator_range<
                boost::permutation_iterator<
                        typename boost::range_iterator<
                            boost::range::joined_range<Range1, Range2>>::type,
                        typename boost::range_iterator<Index>::type>>
{
    using value_type = typename boost::range_value<Range1>::type;
    using replaced_iterator = boost::permutation_iterator<
                    typename boost::range_iterator<
                            boost::range::joined_range<Range1, Range2>>::type,
                            typename boost::range_iterator<Index>::type>;
    using base_t = boost::iterator_range<replaced_iterator>;
    using init = initialize_me_first<Range1, Range2>;
public:
    permutation_range(const Range1& r1, const Range2& r2, const Index& i)
            : init(boost::join(r1, r2)),
              base_t(replaced_iterator(boost::begin(init::j_range),
                                       boost::begin(i)),
                    replaced_iterator(boost::end(init::j_range),
                                       boost::end(i)))
    {}
};

template <typename Range1, typename Range2, typename Index>
permutation_range<const Range1, const Range2, const Index>
permutation(const Range1& r1, const Range2& r2, const Index& i)
{
    return permutation_range<const Range1,
                             const Range2,
                             const Index>(r1, r2, i);
}

int main()
{
    std::vector<int> v1{1, 2, 3};
    std::vector<int> v2{4, 5, 6};
    std::list<int> indexer{1, 3, 5};
    boost::copy(permutation(v1, v2, indexer),
                std::ostream_iterator<int>(std::cout, " "));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:01:44.253

要加入两个范围，请使用`boost::join`：

```
#include <boost/range/join.hpp>

boost::copy(permutation(boost::join(v1, v2), indexer), ... 
```

但是将您的`Range`参数更改为通过 const 引用而不是非常量引用传递。没有理由要求这些参数的可修改版本，因为您实际上并没有改变它们的内容。**

# drupal - 如何在 Drupal 中过滤当前用户（非作者）的视图

> ID：11639759
> 
> 赞同：0
> 
> 时间：2012-07-24T21:41:44.920
> 
> 标签：drupal, views

我在 Drupal 上相对菜鸟，我遇到了一个视图问题，我无法通过谷歌搜索和在这里阅读类似的问题来解决。

我在内容类型“书”中有十页。我想鼓励用户阅读全部十页。我的目的是创建一个视图，专门为每个用户列出他们打开了哪些页面。

我可以创建一个视图并生成一个页面列表。我可以过滤内容统计列表：总浏览量 (>= 1) 以生成已打开页面的列表。--- 到目前为止，这是可以预见的，并为三个角色生成相同的正确列表：管理员、匿名和登录用户。

我的困难是为当前用户设置过滤器。我知道在建立关系之前不会出现当前用户的过滤器。我无法找出正确的关系以使简单的登录用户出现在过滤器中而不附加到作者。

为了进一步说明，如果相关，则内容类型是默认书籍内容类型。

如果有人能引导我朝着正确的方向前进，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:48:51.327

我认为内容统计信息（总观看次数）不会对每个用户进行计数。

是否有统计数据，例如用户的“访问过的页面”。因为您可以将该 url 与当前 url 匹配。

# symfony - Symfony2 stof 学说扩展的问题

> ID：11639761
> 
> 赞同：0
> 
> 时间：2012-07-24T21:41:53.807
> 
> 标签：symfony

我对 stof 学说扩展有一些问题。事实上，我安装了这个扩展我有这个错误：

致命错误：第 170 行的 C:\wamp\www\Symfony\vendor\gedmo-doctrine-extensions\lib\Gedmo\Mapping\ExtensionMetadataFactory.php 中找不到类 'Doctrine\Common\Persistence\Mapping\Driver\DefaultFileLocator'

我使用 FosUserBundle。谢谢您的回答。

配置.yml

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }
framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        entity_managers:
            default:
                imports:
    - { resource: parameters.ini }
    - { resource: security.yml }
framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        entity_managers:
            default:
                auto_mapping: true
                mappings:  
                    gedmo_translatable:
                        type: annotation
                        prefix: Gedmo\Translatable\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo-doctrine-extensions/lib/Gedmo/Translatable/Entity"
                        alias: GedmoTranslatable # this one is optional and will default to the name set for the mapping
                        is_bundle: false
                    gedmo_translator:
                        type: annotation
                        prefix: Gedmo\Translator\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo-doctrine-extensions/lib/Gedmo/Translator/Entity"
                        alias: GedmoTranslator # this one is optional and will default to the name set for the mapping
                        is_bundle: false

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

stof_doctrine_extensions:
    default_locale: fr_FR
    translation_fallback: true
    orm:
        default:
            timestampable: true
            translatable: true  
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    # Permet de renseigner la nouvelle entity utilisateur
    user_class: Meet\MembreBundle\Entity\Membre
    registration:
        form:
            type: meet_user_registration
# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

stof_doctrine_extensions:
    default_locale: fr_FR
    translation_fallback: true
    orm:
        default:
            timestampable: true
            translatable: true  
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    # Permet de renseigner la nouvelle entity utilisateur
    user_class: Meet\MembreBundle\Entity\Membre
    registration:
        form:
            type: meet_user_registration 
```

# javascript - 初始加载速度方面，服务器端模板如何与单页应用程序的客户端模板进行比较

> ID：11639767
> 
> 赞同：0
> 
> 时间：2012-07-24T21:42:00.643
> 
> 标签：javascript, backbone.js, handlebars.js

对于单页应用程序，我认为您如何在服务器端进行模板化是您基本上在初始加载时将所有页面加载为隐藏，除了索引，并通过隐藏/取消隐藏或翻译或您采取的任何方法在页面之间切换。而如果您在客户端进行模板化，那么您会将所有页面加载为脚本文件，并在需要时将它们呈现为 html。基于这些技术，我的印象是客户端模板在初始加载时会更快，因为它只是下载脚本而不是解析它们，然后偏移解析以供以后使用。这是正确的吗？还有其他更好的方法可以缩短初始加载时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:46:12.817

这一切都归结为您认为更好的用户体验。如果您预先加载所有内容，那么更改“页面”时的转换通常会更加平滑。如果您使用 AJAX 加载额外的“页面”，那么显然在进行页面转换时可能会有些延迟，具体取决于内容的大小和服务器负载。

如果你的总内容真的很小，你最好预先加载它，而如果总内容相当大，根据需要加载它通常会更好。

# php - Codeigniter：用于添加和编辑帖子的一个视图

> ID：11639773
> 
> 赞同：10
> 
> 时间：2012-07-24T21:42:41.540
> 
> 标签：php, codeigniter

我正在使用 Codeigniter 开发 CMS，其中一个主要部分是用于创建和编辑帖子的表单。

由于所有元素都是共享的，因此我一直计划对两者使用相同的视图文件。唯一的区别是表单在创建时是空白的，而在编辑时是填充的。这是正确的方法吗？

我正在考虑为每个方法设置一个方法，因此发布/创建和发布/编辑（$id）。

在 post 控制器的 create 方法中，我有这样的所有表单数据（用于错误）：

```
 $this->data['item_title'] = array(
    'name' => 'item_title',
    'id' => 'item_title',
    'type' => 'text',
    'value' => $this->form_validation->set_value('item_title'),
  ); 
```

我正在考虑仅更改值以保存数据库值而不是 set_value()，因此类似于：

```
public function edit($id) {

$post_data = $this->post_model->get_post_data($id)

      $this->data['item_title'] = array(
        'name' => 'item_title',
        'id' => 'item_title',
        'type' => 'text',
        'value' => $post_data['post_title'],
      );
} 
```

我是在正确的轨道上还是有更好的方法来解决这个问题？我应该只使用 2 个视图吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T00:29:55.353

我使用`_form.php`由新的和编辑控制器操作共享的部分。在这两个动作上我都有相同的验证，所以我将它们移到控制器构造函数，然后对于每个输入，我只使用一个三元运算符，如果`$title`提供了现有值，然后`<input>`使用它填充值，否则使用 codeigniter`set_value()`助手填充验证值。

```
<input type="text" name="title" value="<?php echo isset($title) ? set_value("title", $title) : set_value("title"); ?>" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:48:29.507

我通常使用一个视图，其中包含一些变量。字段的值可以从服务器的数据中设置，也可以留空。根据是否提供数据，我会更改表单将使用的操作，因为它可能正在添加或编辑。

这应该是最有效的方法，因为它使用了可重用性的思想:)

一个简单的例子

```
<form action="<?php echo !$data ? "admin/add" : "admin/edit" ?> method="post">
    <input type="text name="test" value="<?php echo $data['test'] ? $data['test'] : "" ?>" />
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:49:26.220

我不是 CodeIgniter 的专家（在 CakePHP 方面要好得多），但 MVC 的核心是一个动作有一个视图。

你没有理由把它放在一个视图中。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:24:46.633

这当然是可能的，因为我一直这样做。

通常，我会：

**行动**

```
function edit($PageID = -1)
{
    $Page = new stdClass();
    if($PageID === -1)
    {
        $Page->Title = $Page->Description = $Page->Keywords = '';
        $Page->PageID = -1;
    }
    else
    {
        $this->load->model('page_model');
        $Page = $this->page_model->GetByPageID($PageID);
        if(empty($Page))
        {
            show_404();
            return;
        }
    }
    if($this->input->post('Save', true) !== false)
    {
        // perform validation
        if($PageID === -1)
        {
            // insert
        }
        else
        {
            // update
        }
    }
    $data = array
    (
        'Page' => $Page
    );
    $this->load->view('edit_page', $data);
} 
```

**看法**

```
<?= form_open(); ?>
    <fieldset>
        <label for="title">Title: </label>
        <input type="text" name="title" id="title" value="<?= Form::Get('title', $Page->Title); ?>" />
        <br />
        <label for="description">Description: </label>
        <input type="text" name="description" id="description" value="<?= Form::Get('description', $Page->Description); ?>" />
        <br />
        <label for="keywords">Keywords: </label>
        <input type="text" name="keywords" id="keywords" value="<?= Form::Get('keywords', $Page->Keywords); ?>" />
        <br />
        <input type="submit" name="Save" value="Save" />
    </fieldset>
</form> 
```

**编辑**

抱歉，我应该提到的，`Form::Get`不是 CodeIgniter 函数，而是我创建的。简单地说，它需要您需要读取的 Post 值的路径。如果它不存在，即您还没有发布，那么它将简单地显示来自第二个参数的值。

如果我可以为您挖掘代码，我会发布它。

# android - 从 SharedPreferences 中删除 ListView 选项

> ID：11639775
> 
> 赞同：0
> 
> 时间：2012-07-24T21:43:03.900
> 
> 标签：android, android-listview, sharedpreferences

我正在尝试以编程方式从 SharedPreferences 中删除列表视图中的一个选项。我在下面包含了简化的代码。

我已经阅读了大量类似的问题，但它似乎对我不起作用。我一定是误解了一个关键概念。请帮忙。

我尝试过使用 clear() 和 apply()。我也尝试过添加一行而不是全部删除但没有成功。

我想我可能误解了使用哪些键并尝试过替代键的概念，但似乎没有任何效果。

我的preferences.java

```
package il.preferences;

import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Preferences extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
        SharedPreferences preferences = getSharedPreferences(
                "myKey", MODE_PRIVATE);
        preferences.edit().remove("1").commit();
    }
} 
```

我的偏好.xml

```
 <?xml version="1.0" encoding="utf-8" standalone="no"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="Cat X" >
        <ListPreference
            android:defaultValue="1"
            android:entries="@array/myOptions"
            android:entryValues="@array/myValues"
            android:key="myKey"
            android:summary="Select an item"
            android:title="Choose" />
    </PreferenceCategory>

</PreferenceScreen> 
```

我的strings.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<resources>
    <string-array name="myOptions">
        <item>A</item>
        <item>B</item>
        <item>C</item>
    </string-array>
    <string-array name="myValues">
        <item>1</item>
        <item>2</item>
        <item>3</item>
    </string-array>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:30:48.427

我的问题是我错误地概念化了偏好框架。我将分享我的错误转弯以帮助任何其他迷路的新手。

我混淆了我在上面的preferences.xml中定义的PreferenceScreen和存储偏好的文件，可以在DDMS透视my.package.name_preferences.xml上看到-使用文件管理器-数据-数据-项目名称-shared_prefs查找并提取此文件

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<string name="myKey">1</string>
</map> 
```

然后我错误地继续尝试使用首选项编辑器来更改 PreferenceScreen

```
SharedPreferences preferences = getSharedPreferences("myKey", MODE_PRIVATE);
preferences.edit().remove("1").commit(); 
```

最终，我在 Google APIs com.example.android.apis.ApiDemos com/example/android/apis/preference 中找到了示例代码，其中包含我需要的所有排列，以便最终理解。

我最终的解决方案是结合使用 setPreferenceScreen(createPreferenceHierarchy()); addPreferencesFromResource(R.xml.preferences);

结合我的静态和动态偏好。我在下面添加了我的动态偏好的代码（感谢 Google）。我建议查看 google api 而不是尝试在线查找教程或使用书籍。

```
import java.util.List;
import android.os.Bundle;
import android.preference.ListPreference;
import android.preference.PreferenceActivity;
import android.preference.PreferenceCategory;
import android.preference.PreferenceScreen;

public class SetPreferenceActivityGB extends PreferenceActivity {
    private static final String LENGTH_DEFAULT = "4";
    private static final String LEVEL_DEFAULT = "level1";

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setPreferenceScreen(createPreferenceHierarchy());
        addPreferencesFromResource(R.xml.preferences);
    }

    private PreferenceScreen createPreferenceHierarchy() {
        PreferenceScreen root = getPreferenceManager().createPreferenceScreen(
                this);

        // Dialog based preferences
        PreferenceCategory dialogBasedPrefCat = new PreferenceCategory(this);
        root.addPreference(dialogBasedPrefCat);

        // List preference
        ListPreference listPref = new ListPreference(this);

// This is where I get my dynamic list of levels and use it as a character sequence to
// To make my list view dynamic.     
        List<String> myList ; 

        myList = Playsound.getAvailableLevels(); // Function which is Dynamic
        CharSequence[] cs = myList.toArray(new CharSequence[al.size()]);

        listPref.setEntries(cs);
        listPref.setEntryValues(cs);
        // listPref.setEntries(R.array.levels);
        // listPref.setEntryValues(R.array.levelsValues);
        listPref.setDialogTitle(R.string.level_title);
        listPref.setKey("level");
        listPref.setTitle(R.string.level_title);
        listPref.setValueIndex(0);
        listPref.setDefaultValue(LEVEL_DEFAULT);
        listPref.setSummary(R.string.level_summary);
        dialogBasedPrefCat.addPreference(listPref);

    }
} 
```

# javascript - qForms 通过输入 ID 而不是名称选择

> ID：11639785
> 
> 赞同：1
> 
> 时间：2012-07-24T21:43:50.057
> 
> 标签：javascript, validation

我有一个使用 qForm 表单验证的表单。qForm 默认查看输入的名称以进行验证，但我想改为按 ID 选择。

```
 objForm["CmeChanges"].required = true; 
```

有没有办法选择 ID 属性而不是名称？

[http://www.pengoworks.com/qforms/docs/examples/](http://www.pengoworks.com/qforms/docs/examples/)

# mysql - 无法使用 Sequel Pro 使外键字段可以为空

> ID：11639786
> 
> 赞同：0
> 
> 时间：2012-07-24T21:43:57.377
> 
> 标签：mysql, foreign-keys, sequelpro

我将我的用户表定义为外键，但不一定需要设置它们。即不得有相关记录。

在我的 MySQL 编辑器（Sequel Pro）中，我无法将 addressId 设为“允许 null”。它忽略输入。我正在使用最新版本。

当我在没有 addressId 的用户表中创建一个新条目时，它显示“无法添加或更新子行：外键约束失败......”。但我希望能够添加没有地址的用户！那可能吗？

或者我应该简单地删除外键？这样做的缺点是什么？

```
CREATE TABLE `User1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) DEFAULT NULL,
  `email` varchar(255) DEFAULT NULL,
  `password` char(32) DEFAULT NULL,
  `addressId` int(11) NULL DEFAULT '0',
  `created` datetime DEFAULT NULL,
  `activated` datetime DEFAULT NULL,
  `lastLogin` datetime DEFAULT NULL,
  PRIMARY KEY (`id`,`addressId`),
  KEY `FK_User_Locale` (`localeId`),
  KEY `FK_User_Address` (`addressId`),
  CONSTRAINT `FK_User_Address` FOREIGN KEY (`addressId`) REFERENCES `Address` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:46:12.567

为什么不通过设置 foreign_key_checks=0 来禁用[foreign_key_checks ？](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_foreign_key_checks)

否则`DROP`，如果它不符合您的要求，您可能会受到限制！

> 如果设置为 1（默认值），则检查 InnoDB 表的外键约束。如果设置为 0，它们将被忽略。禁用外键检查对于按照与父/子关系所需的顺序不同的顺序重新加载 InnoDB 表很有用。

# c++ - 通过指向基类函数的指针调用派生类函数

> ID：11639788
> 
> 赞同：0
> 
> 时间：2012-07-24T21:44:00.473
> 
> 标签：c++, pointers, virtual

我想使用它的接口在子类上调用一些方法，但我想使用指向接口方法的指针。

像这样的东西：

```
#include <iostream>

using namespace std;

class IA
{
    public:
    virtual void f() = 0;
};

class A : public IA
{
    public:

    virtual void f()
    {
        cout<<"A::f()"<<endl;
    }   
};

int main()
{   
    typedef void (IA::*Func)();

    Func func;
    func = &IA::f;

    IA *a = new A();

    a.*(func);

    delete a;

    return 0;
} 
```

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:45:55.703

调用应该是：

```
(a->*func)() 
```

（这将成员函数指针绑定到`a`然后调用成员函数。）

否则，您的代码是正确的。

# javascript - Javascript - 避免闭包（的影响）

> ID：11639792
> 
> 赞同：0
> 
> 时间：2012-07-24T21:44:22.090
> 
> 标签：javascript, closures

> **可能重复：**
> [Javascript：循环关闭？](https://stackoverflow.com/questions/5555464/javascript-closure-of-loop)

我遇到了一些无法解决的 javascript 闭包问题......我通常发现它们非常有用，但这次它们妨碍了我。

### 我的问题

我有一个包含一些信息的对象列表——我们称之为`infos`。中的每个对象`infos`都有一个字符串属性`text`和一个`control`引用控件对象的属性。控制对象具有（除其他外）一个函数属性`activate`。中的对象示例`infos`可能如下所示：

```
var info = { 
    text: 'Some string', 
    control: { 
        activate: function() { 
            alert('activated!'); 
        }
    }
} 
```

现在，我想根据`infos`对象中的信息循环并创建一些新对象（实际上是一个 DOM 元素，使用 jQuery）`info`。

我试过这样的事情：

```
for (var i in infos) {
    $('<a>')
        .attr('href', '#')
        .text(infos[i].text)
        .click(function() {
            infos[i].control.activate(); // This is where I get problems
        });
} 
```

现在，当执行点击处理程序时，某些东西（在上面的示例中通常是变量`i`）是`undefined`，这会导致异常。

我还尝试了以下变体：

```
for (var i in infos) {
    var ctrl = infos[i].control;
    $('<a>')
        .attr('href', '#')
        .text(infos[i].text)
        .click(function() {
            ctrl.activate(); // This is where I get problems
        });
} 
```

在这种情况下，我没有得到任何异常，但无论我单击哪个项目，它始终是最后一个被激活的控件。

### 到目前为止，我对此的理解

如果我正确理解了 javascript 闭包，这是因为当点击处理函数（在第二个代码片段中）是使用闭包创建时，该闭包具有指向在定义此函数时定义的变量的指针 -`infos`在`i`第一个示例中，除了`ctrl`在第二。

*如果我能够“避免关闭”* ，我想我可以解决这个问题；换句话说，我想引用变量及其值，因为它们在*声明*单击处理函数时，而不是在其*执行*时。

有什么办法可以做到这一点？或者，也许，对这个问题有更好的解决方案？

# java - Richfaces 4 - 无法解析绝对uri

> ID：11639795
> 
> 赞同：0
> 
> 时间：2012-07-24T21:44:32.070
> 
> 标签：java, jsf, richfaces

我正在尝试在我的项目中实现 Richfaces。我已经完成了我发现的所有事情，但我无法解决我当前的问题。至少我的Tomcat服务器启动了，但现在错误如下（当我加载我的网页时）（第一行是“找不到绝对uri”错误）：

```
org.apache.jasper.JasperException: La uri absoluta: http://richfaces.org/a4j no puede resolverse o en web.xml o el los archivos jar desplegados con esta aplicación
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:56)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:410)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:117)
    at org.apache.jasper.compiler.TagLibraryInfoImpl.generateTLDLocation(TagLibraryInfoImpl.java:311)
    at org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:152)
    at org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:410)
    at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:475)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1425)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:138)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:644)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:358)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:93)
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

Tomcat初始化时显示如下错误：

```
java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! com.sun.facelets.FaceletViewHandler
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

以及许多其他错误。

我的 web.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/faces/index.jsf</welcome-file>
    </welcome-file-list>

    <context-param>
        <param-name>org.richfaces.skin</param-name>
        <param-value>classic</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.enableControlSkinning</param-name>
        <param-value>true</param-value>
    </context-param>

</web-app> 
```

我的JSF网页如下：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@taglib uri="http://richfaces.org/a4j" prefix="a4j"%>
<%@taglib uri="http://richfaces.org/rich" prefix="rich"%>
<!DOCTYPE html>
<f:view>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>JSP Page</title>
        </head>
        <body>
            <h1>Hello World!</h1>
            <rich:calendar />
        </body>
    </html>
</f:view> 
```

我究竟做错了什么？

编辑：我的库有：

```
richfaces-components-api-4.2.2.Final.jar
richfaces-components-ui-4.2.2.Final.jar
richfaces-core-api-4.2.2.Final.jar
richfaces-core-impl-4.2.2.Final.jar
cssparser-0.9.5.jar
sac-1.3.jar
guava-r08.jar
beanutils, collections, digester and logging libraries from Apache Commons
All basic JSF and JSTL libraries 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:12:43.020

事实上，我的错误是 RichFaces 4 不支持类似 JSP 的语法。我尝试使用 Facelets 并且成功了。

# oracle11g - 我不能只是加入它，因为我需要先按 movie_id 对 DVD 进行分组？- 甲骨文

> ID：11639799
> 
> 赞同：0
> 
> 时间：2012-07-24T21:45:04.077
> 
> 标签：oracle11g

我有这个没有问题的查询：

```
SELECT m.movie_name, cd.times_requested
FROM movie m,
  (select *
  from(
    select movie_id, count(movie_id) as times_requested
    from movie_queue
    where status_id=0 or status_id=1
    group by movie_id
    ) ab
  where times_requested>1) cd
WHERE m.movie_id=cd.movie_id; 
```

它返回以下列表。

```
MOVIE_NAME                                            TIMES_REQUESTED
----------------------------------------------------------------------
E.T. the Extra-Terrestrial                                    2 
Indiana Jones and the Kingdom of the Crystal Skull            2 
War of the Worlds                                             3 
Unbreakable                                                   3 
```

**问题：**
如何添加另一列显示每部电影可用的 DVD 数量，我不能只是加入它，因为我需要先按 movie_id 对 DVD 进行分组？

上表没问题，但我想添加第三列，第三列将包含有关每部电影可用 DVD 数量的信息。问题是 dvd 的数量存储在另一个名为 DVDS 的表中。表格 DVD 的结构与此类似：

```
 DVD_ID   MOVIE_ID DVD_ENTRY_DATE
---------- ---------- --------------
         1          1 24-JUL-12      
         2          1 24-JUL-12      
         3          1 24-JUL-12      
         4          2 24-JUL-12      
         5          2 24-JUL-12 
```

**预期结果：**
决赛桌应类似于下图：

```
MOVIE_NAME                         TIMES_REQUESTED   DVDS_AVAILABLE
-------------------------------------------------------------------
E.T. the Extra-Terrestrial               2               3
Indiana Jones and the Kingdom            2               1
War of the Worlds                        3               3
Unbreakable                              3               1 
```

**我尝试了下面的代码，但没有得到我想要的结果我**
假设我需要先去 dvd 表并找到所有与我想要的 movie_id 匹配的 dvd，然后按 movie_id 对它们进行分组。我尝试了下面的代码，但不是返回 4 行，而是返回 72。

```
SELECT m.movie_name, pomid.times_requested, d.dvds_available
FROM movie m,
  (select *
  from(
    select movie_id, count(movie_id) as times_requested
    from movie_queue
    where status_id=0 or status_id=1
    group by movie_id
    ) mid
  where times_requested>1) pomid, 
  (select movie_id, count(movie_id) as dvds_available
   from dvd
   group by movie_id) d
WHERE m.movie_id=pomid.movie_id; 
```

感谢您提供有关如何解决此问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:31:50.263

缺少对 d.movi​​e_id 的连接，这就是为什么你得到太多行的原因。（快速检查：我有多少个表？我有多少个连接？）

而且我还会添加一个外部连接来获取所有电影，即使没有 dvd 或 movie_queue 条目也是如此。

```
SELECT m.movie_name
      ,NVL(pomid.times_requested,0) times_requested
      ,NVL(d.dvds_available,0) dvds_available
  FROM movie m
      ,(SELECT *
          FROM (SELECT   movie_id
                        ,COUNT (movie_id) AS times_requested
                    FROM movie_queue
                   WHERE status_id = 0
                      OR status_id = 1
                GROUP BY movie_id) mid
         WHERE times_requested > 1) pomid
      ,(SELECT   movie_id
                ,COUNT (movie_id) AS dvds_available
            FROM dvd
        GROUP BY movie_id) d
 WHERE m.movie_id    = pomid.movie_id(+)
   AND d.movie_id(+) = pomid.movie_id; 
```

[http://www.sqlfiddle.com/#!4/5437a/11](http://www.sqlfiddle.com/#!4/5437a/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:55:47.457

不确定我是否真的了解您的表结构，但这可能会让您入门：

```
select movie_id, 
       sum(case when status_id in (0,1) then 1 else 0 end) as times_requested,
       count(movie_id) as dvd_available,
from movie_queue
group by movie_id; 
```

# javascript - Javascript：使用 Jquery 的 bind() 出价事件是否比简单地执行 onclick='bla()' 更好，为什么？

> ID：11639800
> 
> 赞同：0
> 
> 时间：2012-07-24T21:45:10.137
> 
> 标签：javascript

使用 JQuery 的 bind() 绑定事件是否被认为比简单地执行 onclick='bla(this)' 更好，为什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:46:37.057

因为[Unobtrusive JavaScript (UJS)](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)是新常态。

对我来说，将标记与行为分离是最大的好处，尽管它还有其他一些方便的东西，每个人喜欢不同的方面。

@Esailija 正确地指出，就工作级别、浏览器兼容性、浏览器变通方法等而言，jQuery 使 UJS 变得更加容易*。*UJS 不*依赖*于 jQuery，但 JS 库使其在更广泛的功能中可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:19:00.837

使用 jQuery 事件，您可以获得价值 6 年的错误修复、事件对象的规范化、命名空间、对诸如 mouseenter、mouseleave、focusin 和 focusout 等事件的支持，这些事件最初是专有的 IE 事件和事件委托。

使用任何类型的 js（不仅仅是 jQuery）附加的事件，您将获得：

*   有用的对象上下文
*   有用的功能范围
*   能够为同一元素上的同一事件附加多个处理程序

如果您动态生成 html：

*   理智，因为您不必连接字符串来生成代码，您只需像任何其他代码一样编写事件处理程序代码，而不必担心您的字符串首先被解释为 javascript 字符串，然后被 html 解释为最终结果，并且然后作为javascript代码（是的，三个阶段。我什至在第一次修订时都没有得到以下权利）：

    ```
    var html = '<div onclick="alert(\''+someVar+'\'+\'hello\');"></div>' 
    ```

    写起来并不容易。相比于

    ```
     $("<div>", {
            click: function () {
                alert(someVar + "hello");
            }
        }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T22:56:40.243

根据我的经验，抽象是要付出代价的，应该权衡使用它们的好处。

就 jQuery 而言，我发现它为我节省的时间远远超过了任何缺点。举个例子，你将如何在标准 javascript 中编写以下示例。

```
$("ul").on("click", "li", function(){ }); 
```

这个 jQuery[方法](http://api.jquery.com/on/)将一个事件处理程序附加到所有当前和未来的 li 元素。

实现此功能并非易事，通过使用 jQuery，您正在使用高质量的代码库，该代码库试图抽象浏览器差异并帮助您专注于编程。

# eclipse - 为什么 Eclipse 不能“看到”一个类的结构？

> ID：11639803
> 
> 赞同：0
> 
> 时间：2012-07-24T21:45:43.480
> 
> 标签：eclipse, debugging, jar

我正在使用 apache mina 2.0.2 调试我的程序。具体的库无关紧要。

问题是 Eclipse 可以看到某些类的内部结构，而看不到其他类之一。对我来说没有明显的差异：两个类都有代码和源代码。

![截屏](../Images/5bf709c1c841eaa997a7ad98950ba4c4.png)

您可以看到 Eclipse 在`AbstractPollingConnector`class 附近绘制箭头，但并没有如此接近`AbstractPollingProcessor`。

当然 Eclipse 不能在“坏”类中设置行断点。

它的原因是什么，该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:29:28.670

我想，这取决于引用的类是在调试器选项打开还是关闭的情况下编译的。根据[较早的 Javac 手册](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)，-g 开关似乎相关：

> -g 生成所有调试信息，包括局部变量。默认只生成行号和>源文件信息。
> 
> -g:none 不生成任何调试信息。
> 
> -g:{keyword list} 仅生成某些类型的调试信息，由逗号分隔的 >keywords 列表指定。有效的关键字是：
> 
> source 源文件调试信息行 行号调试信息 vars 局部变量调试信息

# objective-c - 如何在 iPhone 上为不同的监控区域获取单独的警报？

> ID：11639804
> 
> 赞同：0
> 
> 时间：2012-07-24T21:45:43.520
> 
> 标签：objective-c, xcode, ios4, mkmapview, core-location

我正在尝试在输入 5 个不同区域时创建不同的警报。我目前正在设置这样的区域......

```
//Monitoring a Region
        CLLocationCoordinate2D layerCoords =
        CLLocationCoordinate2DMake(53.385909, -6.260067);
        CLRegion *layerRoom = [[CLRegion alloc]
                initCircularRegionWithCenter:layerCoords
                                      radius:100
                                identifier:@"layerRoom"];

        // Start monitoring for our CLRegion using best accuracy
        [locationManager startMonitoringForRegion:layerRoom
                    desiredAccuracy:kCLLocationAccuracyBest]; 
```

我可以轻松地再设置 5 个，但对于警报，我不太确定该怎么做。我目前正在使用这种方法...

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {

    UIAlertView *locationAlert = [[UIAlertView alloc]
                                    initWithTitle:@"Success!" message:@"You have arrived!"  delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    // Display the alert
    [locationAlert show];

} 
```

而且我不知道如何为每个地区定制它。对不起，如果这是一个愚蠢的问题，我是一个完整的初学者。有人可以帮忙吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:00:59.413

didEnterRegion 为您提供了一个区域参数。您可以使用它来检查它是 roomRegion 还是其他区域。将它们保存在数组或字典或其他任何东西中，以便您可以将它们与您输入的区域进行比较。

# android - 对话框中的文本被截断

> ID：11639805
> 
> 赞同：5
> 
> 时间：2012-07-24T21:45:51.803
> 
> 标签：android, android-layout, android-xml

最终编辑：好吧，完全破解，但目前我喜欢“meh”它有效。我为解决这个问题所做的只是添加`android:lines="10"`到 TextView 中，它显示了 2.2 和 ICS/JB 中的所有内容。完全破解，因为它根本不是抽象的，但无论如何：P..感谢所有帮助过的人！

我在使用 Gingerbread (API 10) 的自定义对话框中显示文本时遇到问题。[显示的唯一文本是此处](http://i.imgur.com/XFazA.png)所示的第一行。在 Froyo、ICS 和 JB 中，它会显示[每一行文本](http://i.imgur.com/5HdZl.png)。我相信这是一个 XML 的东西，但我不确定。我哪里错了？

编辑：我尝试过的：

-将RelativeLayout更改为LinearLayout

-在滚动视图中添加

-把我的绳子放在一条线上

- 使用 requestLayout() 和 forceLayout()

- 将对话功能放在一个单独的类中

- 取出按钮中的边距

- 使用 \n 而不是 HTML

-警报对话框

我的 TextView 上的 -inputType 和 singleLine XML 属性

-我想还有一两个我忘记了..

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:id="@+id/layout_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/dia_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="17dp"
        android:padding="5dp"/>

    <View 
        android:id="@+id/bar"
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="#CCCCD0"
        android:layout_below="@+id/dia_text"/>

    <Button
        android:id="@+id/dialogbuttongotit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/dialog_confirm"
        android:textSize="20dp"
        android:layout_marginTop="0dp"
        android:layout_marginRight="0dp"
        android:layout_below="@+id/bar"/> 
</RelativeLayout> 
```

这是代码：

```
final Context context = this;
public void addListenerOnRectHelpButton() {

    img = (ImageButton) findViewById(R.id.rect_img); 
    img.setOnClickListener(new View.OnClickListener() { 
        public void onClick(View v) {

               //create a new dialog
            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom_dialogs);
            dialog.setTitle("Rectangular Area");

            // set the custom dialog text
            TextView text = (TextView) dialog.findViewById(R.id.dia_text);
            String dialog_rect_txt = "<u>Area of a Rectangular Channel</u><br />" +
                    "Height x Width (H x W)<br />--Example:<br />" +
                    "Height: 3ft,  Width 5ft<br />" +
                    "H x W = 3ft x 5ft = 15ft<sup>2</sup><br />";
            text.setText(Html.fromHtml(dialog_rect_txt));

            Button dialogButton = (Button) dialog.findViewById(R.id.dialogbuttongotit);
            // if button is clicked, close the custom dialog
            dialogButton.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    dialog.dismiss();
                }
            });

            dialog.show();             

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:42:00.797

为什么不直接使用 AlertDialog 而不是自己构建呢？

```
Dialog dlg = new AlertDialog.Builder(this).setTitle(
    "Rectangular Area").setMessage(dialogRectText).setPositiveButton(
     "Got It", clickListener).create();
dlg.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:30:50.457

你试过在 TextView 上调用 requestLayout() 吗？

```
...
text.setText(Html.fromHtml(dialog_rect_txt));
text.requestLayout();
... 
```

# c - c中的图像侵蚀技术

> ID：11639807
> 
> 赞同：0
> 
> 时间：2012-07-24T21:46:00.457
> 
> 标签：c, mathematical-morphology

我对 c 程序有一些奇怪的问题。我正在在线学习 c 编程并练习一些练习。其中关于一种称为侵蚀的图像技术。想象一下，有一幅图像具有两种类型的像素，分别用“.”符号表示。或者 '＃'。当一个像素被 4 个 '#' 字符包围时，它会被保留，而在其他情况下，它会被一个 '.' 替换。特点。输入是 N 应用腐蚀的次数，H 和 L 是图像的高度和宽度，以及由“.”组成的字符矩形。和“#”字符。例如输入：

```
1  //N
4  //H
4  //L
....
.###
####
####

and the output is 
....
....
.##.
.... 
```

问题是在线编译器（测试一系列随机输入）拒绝我的代码，告诉我内存溢出

这是代码

```
#include <stdlib.h>
#include <stdio.h>

//test wether a pixel is surrounded by 4 '#' characters
char test(int i, int j,int H, int L, char c[H][L]){

    int k=0;
    int l=0;
    char result='-';
    if((i==0)||(i==H-1)||(j==0)||(j==L-1)){
        result='+';
    }
    else{

    for(k=0;k<2;k++){
        for(l=0;l<2;l++){
              if(c[i+(1-2*k)*l][j+(1-2*k)*(1-l)] =='.'){
                result='+';

                break;
            }

            else{

            }
        }
        if(result=='+'){break;}
        else{}
    }
    }

    return result;
}

//The erode function that replaces the image by one in which '#' characters are replaced by '.' characters when it is not surrounded by 4 '#' characters

char **erode(int H, int L, char c[H][L]){

    int i;
    int j;
    char ch='-';

    char **d = malloc (H * sizeof (int *));

    for (i = 0; i < H; i++) {
        d[i] = malloc (L * sizeof (int));
    }

    i=0;

    for (i=0;i<H;i++)
    {
        for (j=0;j<L;j++)
        {
            ch=test(i,j,H,L,c);

            if(ch=='+'){

                d[i][j]='.';

            }
            else{
                d[i][j]=c[i][j];
            }
            ch='-';
        }

    }

for (i= 0; i < H; i++) {
        free(d[i]);
       }
       free(d);

    return d;

}

//here are computed the inputs and outputs
int main()
{   

    int i=0;
    int j=0;

    int N;
    int H;
    int L;
    char o;

    scanf("%d",&N);
    scanf("%d",&H);
    scanf("%d",&L);
    scanf("%c",&o);

    char c[H][L];
    char d[H];
    char ero[H][L];

    while (i<H)
    {
        while (j<L)
        {
            scanf("%c",&c[i][j]);
            j++;
        }
        j=0;
        scanf("%c",&d[i]);
        i++;
    }

    int l;
    int m;
    int n;

    for(l=0;l<N;l++){
    for (i=0;i<H;i++)
    {
        for (j=0;j<L;j++)
        {
        ero[i][j]=erode(H,L,c)[i][j];

        }

    }
        for (m=0;m<H;m++)
        {
            for (n=0;n<L;n++){
                c[m][n]=ero[m][n];
            }

        }

    }

    for (i=0;i<H;i++)
     {
         for (j=0;j<L;j++){
             printf("%c",c[i][j]);
         }
         printf("\n");
     }

} 
```

（代码远不是最优的，因为我试图调试它并使某些东西真正分解）

有谁知道为什么我有这个消息错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:51:00.960

这可能是因为在您的`erode`函数中，您`malloc`多次使用但从未调用`free`. 您实际上是`erode`在 main 的三重循环内调用的。这表明它可能会被多次调用，但是由于分配的内存**永远不会**被释放，因此您的内存完全有可能已经耗尽，这解释了错误消息。`free`当您不再需要它时，请更加小心地释放内存。

# c++ - 我应该在 .cpp 和 .h 中重复包含吗？

> ID：11639809
> 
> 赞同：7
> 
> 时间：2012-07-24T21:46:20.647
> 
> 标签：c++, include, software-design

设想：

富.h：

```
#include <vector>

class foo {
  public:
  std::vector<int>* getVector();

  /* ... other methods declarations ... */

} 
```

foo.cpp：

```
#include "foo.h"
#include <vector>

/* ... other methods definitions using std::vector ... */

std::vector<int>* foo::getVector() {
  return new std::vector<int>();
} 
```

我希望 .cpp 独立于标题中任何可能的未来更改。如果由于某种原因类的接口发生变化并且`<vector>`可以消除依赖关系，我冒着 .cpp 中的其他方法也失去该包含的风险。

`<vector>`在 .cpp 和 .h 中重复包含是否正确？这种做法是否有意义，还是我应该只依赖标题中包含的内容？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T21:52:45.047

包括你需要的，仅此而已。

在多个 .h 文件和多个 .cpp 文件中包含相同的头文件本身不是问题。标头保护可有效缓解多次包含文件的问题。

如果您开始尝试避免多次包含同一个文件，它实际上可能是负面的，因为它通常会导致一个“大型包含文件”，其中包含您在整个项目中需要的所有内容*。*这很糟糕，因为对任何头文件的一次更改都会导致所有内容都重新编译。

如果您担心 .h/.cpp 文件都包含同一个文件，请遵循以下准则：

*   如果头文件中不需要包含，则只包含在CPP中
*   如果头文件中需要类声明（但未使用），请在 .h 文件中使用前向声明并将其包含在 CPP 文件中。
*   如果您实际在头文件中*使用包含*，请将其包含在头文件中而不是 CPP 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:52:37.947

不，你不应该。它没有任何目的。冗余线路是成本没有收益。

每个文件都应该包含它需要的内容，仅此而已。在您的标头及其实现的特定情况下， .cpp 中的冗余声明无济于事。如果标头更改得足以使函数不再需要返回向量，则无论如何您都需要重新访问 .cpp。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:53:13.470

在 .cpp 文件中，仅包含特定于实现的内容（实际上是 .cpp 文件）就足够了，而无需重复您已经包含在标题中的内容。这样，当有人查看您的代码时，他也可以更好、更清晰地理解您的代码。

了解哪些依赖项仅特定于实现可能非常有用，例如，当您将其升级/替换为另一个时（同时保留接口）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T21:55:39.037

在标头中包含尽可能少的文件，并且只将它们包含在需要它们的 .cpp 文件中。您的`foo.h`头文件可能包含在许多其他 .cpp 文件中，这些文件不需要来自其他头文件（在本例中为 vector.h）的声明，从长远来看，这会导致更长的编译时间和不太清晰的代码。

# python - 在python中调用函数时出现名称错误

> ID：11639810
> 
> 赞同：0
> 
> 时间：2012-07-24T21:46:20.793
> 
> 标签：python, nameerror

为什么我收到下面给出的错误：

```
lhs_production = self.lhs() 
```

> 名称错误：`global name 'self' is not defined`

下面是我写的代码：

```
class Grammar:
   def lhs(self):
      arrow_position = line.find('->')
      if arrow_position == -1:
         raise ValueError, 'No arrow position %s is found in %s' % (arrow_position, self.line)

      lhs_g = self.line[0:arrow_position].strip(' ')
      print "The Lhs for the line is: ", lhs_g

      check_space = re.search("\s", lhs, re.M)
      if check_space:
         raise ValueError, 'There is still some space in the lhs of the line'

      return self.lhs_g

def parse_line(line):
   if len(line) == 0:
      raise ValueError, 'No Line is found %s' % (line)
   lhs_production = self.lhs()
   rhs_predicates_production = rhs_predicates()
   pattern_list_production = pattern_list()
   return(lhs_production, rhs_predicates(), patterns()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:48:36.840

因为`self`未在该函数的范围内定义:)。您的缩进已关闭，您可能打算将其设为一个方法（因此所有行都缩进），然后`self`作为参数添加，在这种情况下，实例将采用 name `self`。

其他一些需要注意的事情，只是通过：

*   您应该使用`if "->" in line:`而不是`.find()`检查它是否为`-1`. 为此，您的第一个函数似乎有一个`NameError`, 因为`line`它的第一行没有定义，所以不确定您的意思。

*   你应该实例化异常，而不是让 raise 为你做它（所以，`raise ValueError("some stuff")`

*   您可以使用`if not line`它来检查它是否为空行。

*   `return`是一个语句，而不是一个函数，所以这样写有点混乱。`return lhs_production, bla, bla`如果您愿意，只要那里有空间，只需使用或放置括号即可。

干杯:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:48:52.080

self 不是全局变量。它被传递给类方法。parse_line 函数是全局范围函数，而不是类方法。因此，self 不存在于该函数的范围内。

任何使用 self 的方法都需要将 self 作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:48:55.747

在这种情况下没有自我，除非你的缩进是错误的。当超出对象的范围时，您需要引用对象的实例来调用方法。 `self`无论如何，它实际上只是一个标签；它只有约定俗成的特殊含义。你需要一个`grammar=Grammar()`在那里的某个地方。

# wordpress - Wordpress 编辑页面文本区域

> ID：11639812
> 
> 赞同：0
> 
> 时间：2012-07-24T21:46:29.480
> 
> 标签：wordpress, wordpress-theming

我的任务是将 CodeIgniter 站点迁移到 WordPress，以允许实习生编辑页面。一些页面具有极其复杂的 html 结构。我看到了一个视频，其中在 Edit Page 页面中添加了额外的 textarea，每个 textarea 对应于页面上的特定 div。如果我可以复制这一点，实习生可以一次编辑页面的一小部分，而不是因为粗心大意而破坏整个页面。他们已经这样做了两次，WordPress 网站已经上线了三天。

我试图用谷歌搜索，但由于我真的不知道它们叫什么，所以我没有成功。我希望在这里找到正确的方向——我可以进行研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:11:40.877

您可以使用自定义字段[http://codex.wordpress.org/Custom_Fields](http://codex.wordpress.org/Custom_Fields)

例如，advanced-custom-fields 插件为您提供了很多可能性，可以使用 textareas 和诸如此类的东西在帖子页面上添加自定义表单 [http://wordpress.org/extend/plugins/advanced-custom-fields](http://wordpress.org/extend/plugins/advanced-custom-fields)

# android - 从浏览器编辑安卓应用

> ID：11639816
> 
> 赞同：0
> 
> 时间：2012-07-24T21:46:41.870
> 
> 标签：android, database, textview

我是新手，我想知道是否有任何方法可以添加/编辑文本以显示在 Compuer 浏览器的文本视图上。

我想做的是每天写一篇文章给用户看。那可能吗？这是我的 XML。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:gravity="top"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:background="@android:color/black" >

        <Button
            android:id="@+id/button1"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="50dp"
            android:background="@drawable/cdiscount"
/>

        <Button
            android:id="@+id/button2"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentRight="true"
            android:layout_marginRight="50dp"
            android:background="@drawable/auchan"
 />

        <Button
            android:id="@+id/button3"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/button1"
            android:layout_marginLeft="50dp"
            android:background="@drawable/icon"
  />

        <Button
            android:id="@+id/button4"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignBaseline="@+id/button3"
            android:layout_alignBottom="@+id/button3"
            android:layout_alignParentRight="true"
            android:layout_marginRight="50dp"
            android:background="@drawable/gb" />

        <Button
            android:id="@+id/button5"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/button3"
            android:layout_marginLeft="50dp"
            android:background="@drawable/rdc" />

        <Button
            android:id="@+id/button6"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignBaseline="@+id/button5"
            android:layout_alignBottom="@+id/button5"
            android:layout_alignParentRight="true"
            android:layout_marginRight="50dp"
 />

        <Button
            android:id="@+id/button7"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/button5"
            android:layout_marginLeft="50dp"
 />

        <Button
            android:id="@+id/button8"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/button6"
            android:layout_marginRight="50dp"
 />
    </RelativeLayout>

</LinearLayout> 
```

我已经编辑了xml。所以我想做的是，当我单击一个按钮时，它会将我带到一个文本视图。我想要完全访问这个文本视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:25:06.273

不，这不对。浏览器不知道如何与设备通信（如何使用 adb）。您需要一个可以为您的应用程序提供数据（文章或其他内容）的 Web 服务。应用程序需要实现 GCM 以了解新的可用文章。Http通信，以及数据解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:22:21.170

您的应用程序每次启动时都会从服务器解析/读取数据，例如由 php.ini 生成的 json 文件。 [如何在android中读取json](http://www.vogella.com/articles/AndroidJSON/article.html)（在这种情况下：twitter-api）+[如何制作自己的json（-api）](http://www.youtube.com/watch?v=F5pXxS0y4bg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T22:24:11.083

我已经更新了我的答案。我认为这就是你所需要的。

EditText myChangesToArticle 的组合；文本查看我的文章；

在 myChangesToArticle 上将可见性设置为 GONE。

当用户点击按钮时。将可见性从 GONE 更改为 VISIBLE。

进行编辑或输入新文章。按保存按钮。

myArticle.setText(myChangesToArticle.getText()); myChangesToArticle.setVisibility(View.GONE);

为了让这个全局可见，你可以在 google docs 上更新一个远程电子表格，或者在你保存时更新任何东西。并使用 HttpClient 从那里检索。

# node.js - 多人游戏：基于网络

> ID：11639817
> 
> 赞同：0
> 
> 时间：2012-07-24T21:46:59.110
> 
> 标签：node.js, gwt, jquery, web-applications, multiplayer

需要对我的游戏框架 Web 应用程序提出一些建议。游戏交互将更类似于“黑手党战争（zynga）”中的交互，但交互的东西非常少......玩家只需点击触发事件并等待响应，并且然后继续下一个任务……

我需要实现的游戏主要用于人类行为研究......基于博弈论（“囚徒困境”/“鸡肉游戏”/基于行列的游戏）

要记住的关键事项如下。

*   在任何情况下都不超过 20 个用户。
*   无需繁重的图形/动画。
*   框架应该可以扩展以添加到新的类似游戏中
*   不应该有延迟问题，并且在任何情况下，服务器都不应该因为客户端请求而变得无响应。

我正在考虑的框架的替代方案是

*   jQuery (ajax + UI) + HTML + JAVA
*   HTML5 + 节点.js + JAVA
*   GWT（谷歌网络工具包）+ JAVA

请让我知道是否还有其他更好的选择...

目前我已经创建了一个基于 Jquery 的原型应用程序......我还在处理 n/w 和多人游戏配置......我主要关心的是如何有效地显示其他用户状态而没有延迟问题......是否存在现有框架我可以利用哪些？

--- 普拉纳夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:03:02.973

我会在服务器端使用带有[socket.io的](http://socket.io/)[node.js。](http://nodejs.org/)您可以为前端保留 HTML5 / jQuery 解决方案，只需添加套接字内容。

在多房间聊天应用程序上查看本教程。应该非常接近多人游戏所需的内容：http: [//psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/](http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:02:27.987

除了 nodejs 和 HTML/CSS 之外，您不需要 JAVA。nodejs 将处理比其他选项更多的请求，并且更适合客户端和/或服务器之间的实时双向通信。多人游戏的理想选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:06:13.477

您还可以查看 Google 的[playn](http://code.google.com/p/playn/)。它是一个跨平台的游戏抽象库，用于编写可编译为的游戏：

*   桌面 Java
*   HTML5 浏览器
*   安卓
*   iOS
*   闪光

Chrome Web Store 的 AFAIK Angry Birds 是使用此框架编写的。

# mysql - 这个 MySQL INSERT 查询有什么问题

> ID：11639818
> 
> 赞同：0
> 
> 时间：2012-07-24T21:47:00.387
> 
> 标签：mysql, insert

我正在尝试将下面的数据插入到现有表中，它给了我 sql 错误 1064，您的 sql 语法在第 3 行有错误。

```
INSERT INTO `static_contract` (`ID`, `contractID`, `name`, `mobbaseID`, `classID`, `dialogID`, `menuoptions`, `iconID`, `notes`, `vendorID`, `pTable`, `sTable`, `itemModTable`, `allowedBuildingTypeID`)
VALUES
(2026, 2026, 'Premium Vendor', 15312, 1906, 600, '1 2 15 18', 68, 'vendor', 0, '0', '0', '', 0), 
```

这是表架构：

```
CREATE TABLE `static_contract` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `contractID` int(10) unsigned NOT NULL,
  `name` varchar(100) NOT NULL DEFAULT '',
  `mobbaseID` int(10) unsigned NOT NULL,
  `classID` int(10) unsigned NOT NULL,
  `dialogID` int(10) unsigned NOT NULL,
  `menuoptions` varchar(20) NOT NULL DEFAULT '',
  `iconID` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `notes` varchar(50) NOT NULL DEFAULT '',
  `vendorID` int(10) NOT NULL DEFAULT '0',
  `pTable` varchar(50) NOT NULL DEFAULT '0',
  `sTable` varchar(50) NOT NULL DEFAULT '0',
  `itemModTable` varchar(50) NOT NULL DEFAULT '',
  `allowedBuildingTypeID` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `fk_contracts_mobbase` (`mobbaseID`)
) ENGINE=InnoDB AUTO_INCREMENT=302900 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:50:34.473

最后括号外的逗号是问题所在。请选择一个答案以将此问题标记为已完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:53:52.130

首先，我相信它是在抱怨您**在第 3 行的陈述末尾的逗号。**

其次，您将一个值放入自动递增的列**ID。**

第三，如果要在每一列中插入某些内容，为什么要指定要插入的每一列？做就是了：

```
INSERT INTO static_contract VALUES (...) 
```

# asp.net - 为什么无法在 asp.net 中打开下载的 docx 文件？

> ID：11639819
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:47:05.707
> 
> 标签：asp.net, download, content-type

我尝试从服务器端下载 docx 文件。我怎么了？

这是代码：

```
 FileInfo file = new FileInfo(filepath);
        Response.Clear();
        Response.ClearHeaders();
        Response.ClearContent();
        Response.AppendHeader("Content-Disposition", "attachment; filename = " + ((Button)sender).CommandName + ".docx");
        Response.AppendHeader("Content-Length", file.Length.ToString());
        Response.ContentType = "application/octet-stream";
        Response.WriteFile(file.FullName);
        Response.Flush();
        Response.Close();
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:04:49.410

我在另一个 PDF 问题中发布了类似的内容，但在这里。通过 ASHX 处理程序流回此类数据要容易得多。

类似于我在此问题中发布的内容，但带有 docx 文件。

[在 iframe 中显示 PDF](https://stackoverflow.com/questions/11603277/display-pdf-in-iframe/11603354#11603354)

看起来您正在使用普通的 ASP.NET 页面，并试图通过清除标题等来修改标准行为。您不必使用 ashx 处理程序来摆弄标题或类似的东西。

# winapi - AVI Decompressor 突然停止使用 DirectShow Graphedit 解码视频

> ID：11639822
> 
> 赞同：0
> 
> 时间：2012-07-24T21:47:18.167
> 
> 标签：winapi, video, directshow

我对使用 AVI Decompressor Filter 的应用程序之一有疑问。错误返回没有可以找到合适的解压缩器......但是在过去的几个月里它每天都在工作。我想过重新注册quartz.dll，但没有运气。

然后我打开 Graphedit 并发现我可以将过滤器加载到图中但不再连接。

有没有人遇到过这种情况？任何帮助将不胜感激。

干杯。

**编辑** 如果问题出在注册表中，那么简单的系统还原可以使注册表恢复原状。现在要弄清楚这个错误已经太晚了，因为它发生在客户端，我们决定恢复窗口以让它们恢复正常。但是可以进行冗余检查，例如在应用程序中构建自动还原点，以便在问题再次发生时纠正问题。有人认为这会奏效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:18:59.997

[`AVI Decompressor Filter`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318185%28v=vs.85%29.aspx)是一个适配器过滤器，它使 VFW/VCM 编解码器可用于 DirectShow。您可以手动将过滤器添加到图表中这一事实并不意味着它会有用。此过滤器通常不会以这种方式工作，并且在大多数情况下，它是由 fitler graph 添加为[Intelligent Connect](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390342%28v=vs.85%29.aspx)的一部分。

在您的情况下，重要的是您已转换`AVI Decompressor Filter`为更适合进一步处理或演示的媒体类型。那里的媒体类型可能不是您期望的那种，或者底层的 VCM 编解码器已经消失，VI Decompressor 无法再拾取它。

在 Windows 7 中，AVI Decompressor 内部使用`msyuv.dll`的是“Microsoft UYVY Video Decompressor”。您的系统中可能有问题。您可能需要检查其注册为 VFW 编解码器：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32]
VIDC.UYVY="msyuv.dll" 
```

对于 64 位操作系统，您可能需要查看另一个影响 64 位操作系统中 32 位应用程序的关键：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows NT\CurrentVersion\Drivers32]
VIDC.UYVY="msyuv.dll" 
```

# iphone - 是否可以仅对 webapp 使用 HTML 5 应用程序缓存？

> ID：11639826
> 
> 赞同：0
> 
> 时间：2012-07-24T21:47:36.547
> 
> 标签：iphone, web-applications

我正在开发一个 webapp，如果 iphone 离线，它甚至应该可以工作。我使用 HTML5 应用程序缓存来实现此功能。

但是：我可以强制 webapp 只使用缓存的元素吗？因为如果您的互联网连接不佳，加载应用程序会很痛苦，因为它会从互联网加载所有元素。如果我可以显示缓存文件（例如大图像），加载时间会快得多。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:53:07.463

Web 应用程序将使用缓存的元素，除非它检测到 cache.manifest 文件中的更改。因此，只要您不更新文件（它是一点一点的，所以即使是评论更改也会使它看起来更新）Web 应用程序将继续使用缓存的代码/图像/等。只要您在 CACHE 部分中明确列出它们，除非您将它们或目录放在 NETWORK 部分中。

# c++ - C++ 线程网络优先级

> ID：11639827
> 
> 赞同：0
> 
> 时间：2012-07-24T21:47:51.180
> 
> 标签：c++, multithreading, networking, c++11

有没有办法设置特定的 std::thread 的网络使用优先级？例如，我有多个线程下载信息，但并非所有线程都应具有相同的网络使用情况，因为我希望某些线程更快地下载特定信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:50:58.960

这不是线程问题，不应在线程级别处理。相反，您应该在启动每次下载时以某种方式指定它的优先级。如何做到这一点完全取决于您进行下载的方式以及您在网络中可用的服务质量（如果有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:35:22.067

您可以根据优先级设置相应的套接字接收缓冲区大小，确保只有最高优先级的套接字缓冲区 >= 带宽延迟乘积。

# asp.net-mvc - 使用 RenderAction 渲染用户控件

> ID：11639831
> 
> 赞同：1
> 
> 时间：2012-07-24T21:48:07.263
> 
> 标签：asp.net-mvc

在我的输入表单上，我让用户选择一个状态。状态列表存储在数据库中（因为我们还不支持每个状态）。此列表很少更改。

所以我想用它`RenderAction`来呈现控件，仅仅是因为我不想将每个 ViewModel 的状态列表传递给视图。此操作的结果是下拉菜单。

由于这是一个输入控件，它需要有一个名称。因此，从我的主要观点来看，我将 RenderAction 称为如下：

```
@Html.RenderAction("GetStates", "Data", new { controlName = "states" }); 
```

路过`controlName`感觉不对。我觉得我在滥用`RenderAction`创建用户控件，并且`@Html.Partial`会更合适，另一方面，我不想将状态列表传递给，`@Html.Partial`因为该信息与演示问题更相关。

**问题**我应该坚持使用 RenderAction 并如上所述传递 controlName 吗？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:55:57.213

将 controlname 作为参数传递并没有错。我会同意的。

此外，您从数据库中获得的状态列表。如果您在页面上多次显示此列表...将其存储在 TempData 中。如果存在于 tempdata 中，则检索并使用它来保存数据库命中。你甚至可以把它缓存得更高。

# websphere - 集群环境中的自定义存储库适配器

> ID：11639837
> 
> 赞同：0
> 
> 时间：2012-07-24T21:48:26.700
> 
> 标签：websphere, websphere-7, websphere-portal

我计划使用自定义存储库来管理 Websphere Portal V7 中的安全性。根据[这篇文章](http://www.ibm.com/developerworks/websphere/zones/portal/proddoc/dw-w-userrepository/index.html)，为了让它工作，我需要在服务器中编辑一些配置文件，运行一些命令并复制一些 JARS。

这篇文章提到了一个服务器，但我不确定如何在生产环境中进行，那里有一个由两个 Websphere Portal Server 组成的集群。我需要在每台服务器上复制所有步骤，还是只在部署管理器中复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:07:29.470

必须为每个集群成员将 jar 部署到 AppServer/lib，该目录不是由 dmgr 分发的。jar 需要放在每个集群成员上，以便它可以将它放在其类路径中。

只能在 dmgr 上对 VMM 进行配置更改，VMM 配置是单元范围的，由 dmgr 分发（配置存储在 /config/cells//wim

我没有为 Portal 设置这样的解决方案，但对于 WAS，它基本上是您需要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:30:16.257

有一个在集群环境中的 WebSphere Portal 中安装自定义用户注册表的详细过程。首先，您在主节点中遵循以下过程：[创建和配置独立存储库](http://infolib.lotus.com/resources/portal/7.0.0/doc/en_us/pt700abd001/html-wrapper-accessible.html#add_cur_snd)。

然后需要在您的辅助节点中执行此过程：[在集群创建后启用 LDAP 安全性](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM%20WebSphere%20Portal%207%20Product%20Documentation#action=openDocument&res_title=Enabling_LDAP_security_after_cluster_creation_wp7&content=pdcontent)。

所有链接均来自 IBM 文档，适用于 WPS V7。

# rest - PhoneGap 不刷新应用

> ID：11639846
> 
> 赞同：1
> 
> 时间：2012-07-24T21:49:07.637
> 
> 标签：rest, jquery-mobile, cordova, restful-authentication

我正在使用 PhoneGap 从另一个域调用服务器服务（RESTFuls），但是当我关闭一个会话并进入另一个会话时，我仍然可以看到第一个会话的值，因此服务器调用没有被执行，一旦我解决了这个问题清理设备上的 cookie，并且仅在 Android OS 3 和 2 上发生。有没有办法让 PhoneGap 让应用程序在每次加载页面时都进行服务器调用或刷新页面的方法？

# ruby - 奇怪的 Ruby 语法？

> ID：11639855
> 
> 赞同：2
> 
> 时间：2012-07-24T21:49:34.830
> 
> 标签：ruby, string, hash

我正在 ruby​​-lang.org 上做 Ruby 20 分钟教程，我发现这段代码弄乱了 irb：

```
irb(main):015:0> def h(name)
irb(main):016:1> puts "Hello #{name}!"
irb(main):017:1> end 
```

根据解释，这`#{name}`部分只是将变量添加到字符串中？我认为这是一种奇怪而冗长的写作方式，所以我只是想我会尝试`"Hello" + name`它的工作方式完全相同..

我四处搜索试图找到一个意义`#{}`，但我找不到任何谈论它的东西，所以我想我会问社区..有什么区别？有吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T21:52:30.007

有时使用`+`起来更容易，但在这种情况下，您省略了感叹号。考虑：

```
puts "Hello #{name}!" 
```

对比

```
puts "Hello " + name + "!" 
```

我发现第一个更具可读性，尤其是在字符串中多次使用时。

还要考虑在第二个版本中省略“Hello”之后的空格是多么容易：

```
puts "Hello" + name + "!" 
```

很容易写，但可能不是你的意思。

最后，当您插入的不是字符串时，它会产生更大的差异：

```
puts "The Winner was #{name} with a score of #{score}!" 
```

顺便说一句，搜索“字符串插值”可能比只搜索语法更容易找到东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T21:53:55.220

```
"Hello #{name}!"
"Hello " + name + "!" 
```

[字符串插值](http://en.wikipedia.org/wiki/String_interpolation)几乎总是*更*容易阅读，特别是在需要插入多个值的情况下。

如果插入的值很冗长，则可能会变得很困难*：*

```
"Attendees: #{names.collect(&:first_name).join(', ')}" 
```

在这种情况下，您可能想要连接，或者只使用临时变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T21:58:54.370

重要的是要注意它不仅仅是可读性。使用字符串插值将做正确的事情，例如调用`to_s`介于两者之间的任何内容`#{}`

```
1.9.3p194 :001 > "as" + 23
    TypeError: can't convert Fixnum into String
    from (irb):1:in `+'
    from (irb):1
    from /Users/paul/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

相对于

```
1.9.3p194 :002 > "as #{23}"
 => "as 23" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T22:06:24.670

最大的区别是易于阅读、符合惯用用法和速度。

使用`"Hello " + name + "!"`你时（嗯，Ruby 解释器）总共创建了 3 个额外的字符串，而不是`"Hello #{name}!"`只创建一个额外的字符串。

请记住，使用字符串插值 ( `"#{}"`) 会自动调用`#to_s`，这可能需要也可能不需要。

有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/10076579/string-concatenation-vs-interpolation-in-ruby)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T21:59:45.507

#{} 用于[字符串插值](http://en.wikipedia.org/wiki/String_interpolation)，它允许您轻松清晰地将数据放入字符串中。Ruby 计算花括号内的内容，然后调用它的`to_s`方法，每个 Ruby 对象都从 Object 继承。

这使您甚至可以在字符串中进行计算，例如

```
"5 + 7 = #{5 + 7}"
=> "5 + 7 = 12" 
```

# android - 从广播接收器启动的活动是否使用与应用程序相同的堆？

> ID：11639857
> 
> 赞同：2
> 
> 时间：2012-07-24T21:49:59.760
> 
> 标签：android, memory, process, broadcastreceiver

我在某处读到广播接收器在与应用程序不同的进程中运行，因此它有一个自己的堆。现在，如果在广播接收器中我从我的应用程序启动一个活动，它会在应用程序的进程中运行还是仍在广播接收器的进程中？

这个问题的答案是否也适用于本机堆（pre-honeycomb API）？

想知道，因为当我收到推送通知时，我必须启动一个内存昂贵的活动/屏幕，如果我处于其他一些内存昂贵的活动的中间，在应用程序中，它可能会导致内存不足错误。但是如果它是一个单独的堆（更具体地说 - 本机堆，因为内存消耗来自位图并且我正在为 API pre-honeycomb 开发）我不必担心它。

注意“读某处”是指：[为什么这么多内存？](https://stackoverflow.com/questions/4726129/why-so-much-memory) 尼古拉·乔尼 (Nikolay Chorniy) 的帖子

> “我曾经有一个棘手的解决方法来避免 OutOfMemoryError。我注册了一个接收器，以便它在不同的进程上运行......”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:57:48.010

> 我在某处读到广播接收器在与应用程序不同的进程中运行

默认情况下，所有组件都在同一进程中运行。

> 想知道，因为当我收到推送通知时，我必须启动一个内存昂贵的活动/屏幕

用户可能不一定喜欢您在不知名的地方显示“内存昂贵的活动/屏幕”。

# c++ - C++ 构建器中的线程

> ID：11639859
> 
> 赞同：6
> 
> 时间：2012-07-24T21:50:17.543
> 
> 标签：c++, c++builder

我是 c++ builder 的新手，不熟悉线程，我希望有人可以发布示例或指出正确的方向。

我有一个`formShow()`在 c++ builder 中加载函数的表单。它做了我想让我的程序做的事情，但只有在那之后它才会显示实际的表单。

为此，我需要线程化程序的表单和后台运行。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T23:09:30.990

将逻辑延迟到`OnShow`事件退出之后可能更简单，根本不使用线程。例如：

```
const UINT WM_DO_WORK = WM_USER + 1;

void __fastcall TForm1::FormShow(TObject *Sender)
{
    PostMessage(Handle, WM_DO_WORK, 0, 0);
}

void __fastcall TForm1::WndProc(TMessage &Message)
{
    if (Message.Msg == WM_DO_WORK)
    {
        // do work here ...
    }
    else
        TForm::WndProc(Message);
} 
```

如果你真的想线程化代码，你可以这样做：

```
class TMyThread : public TThread
{
protected:
    virtual void __fastcall Execute();
public:
    __fastcall TMyThread();
};

__fastcall TMyThread::TMyThread()
    : TThread(true)
{
    FreeOnTerminate = true;
    // setup other thread parameters as needed...
}

void __fastcall TMyThread::Execute()
{
    // do work here ...
    // if you need to access the UI controls,
    // use the TThread::Synchornize() method for that
}

void __fastcall TForm1::FormShow(TObject *Sender)
{
    TMyThread *thrd = new TMyThread();
    thrd->OnTerminate = &ThreadTerminated;
    thrd->Resume();
}

void __fastcall TForm1::ThreadTerminated(TObject *Sender)
{
    // thread is finished with its work ...
} 
```

# java - ObjectInputStream 给了我一个空对象（但读取的文件不是空的）

> ID：11639865
> 
> 赞同：4
> 
> 时间：2012-07-24T21:50:31.490
> 
> 标签：java, android, serialization, objectoutputstream, objectinputstream

我有这个可序列化的类，我用它在二进制文件中存储字符串的 ArrayList。

```
public class SaveState implements Serializable{
   public static ArrayList <String> favoriteBusStopNumbers = new ArrayList<String>();
   public static SaveState instance=new SaveState();
} 
```

一旦这个数组充满了我必须存储的数据，我就使用这种方法来存储带有字符串数组列表的实例：

```
public static void saveData(){
    ObjectOutput out;
    try {
        //primero comprobamos si existe el directorio, y si no, lo creamos.
        File folder = new File(Environment.getExternalStorageDirectory() + DIRECTORY_NAME);
        if(!folder.exists())
            folder.mkdirs();

        File outFile = new File(Environment.getExternalStorageDirectory(), DIRECTORY_NAME+"appSaveState.data");
        out = new ObjectOutputStream(new FileOutputStream(outFile)); 
        out.writeObject(SaveState.instance);
        out.close();
    } catch (Exception e) {e.printStackTrace();}
} 
```

最后，我在我的应用程序的初始化中使用此方法来加载文件并用以前存储的数据填充我的 SaveState.instance 变量：

```
public static void loadData(){
    ObjectInput in;
    try {
        File inFile = new File(Environment.getExternalStorageDirectory(), DIRECTORY_NAME+"appSaveState.data");
        in = new ObjectInputStream(new FileInputStream(inFile));        
        SaveState.instance=(SaveState) in.readObject();
        in.close();
    } catch (Exception e) {e.printStackTrace();}
} 
```

当我保存数据时，正在使用数据对象填充正确创建文件，我知道这是因为文件有超过 0KB 的磁盘空间。但是这里出了点问题，因为当我启动我的应用程序并加载数据时，我的 SaveState.instance 变量得到一个空的 ArrayList 字符串......然后¿代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:55:43.767

您的数组列表是静态的。静态变量与类相关联，而不与对象相关联。所以他们不会被序列化。

如果确实要序列化静态变量，则必须覆盖 readObject 和 writeObject。

这是一些附加信息——http: [//java.sun.com/developer/technicalArticles/Programming/serialization/](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

这里最好的解决方案是重新考虑您的数据结构，如果它保存对象的状态，则使数组列表成为非静态的。

编辑：或者，您可以只序列化数组列表（如下@Ted 建议的那样）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T22:00:48.917

问题是标记为静态的变量不会被序列化，除非你实现

```
private void readObject(ObjectInputStream ois){} 
```

和

```
private void writeObject(ObjectOutputStream oos){} 
```

ObjectOutputStream - JavaDoc：

> 对象的默认序列化机制写入对象的类、类签名以及所有非瞬态和非静态字段的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:59:51.740

由于保存的唯一数据`SaveState`是静态数组，因此只需序列化和反序列化数组即可获得更大的成功：

```
public static void saveData(){
    ObjectOutput out;
    try {
        //primero comprobamos si existe el directorio, y si no, lo creamos.
        File folder = new File(Environment.getExternalStorageDirectory() + DIRECTORY_NAME);
        if(!folder.exists())
            folder.mkdirs();

        File outFile = new File(Environment.getExternalStorageDirectory(), DIRECTORY_NAME+"appSaveState.data");
        out = new ObjectOutputStream(new FileOutputStream(outFile)); 
        out.writeObject(SaveState.favoriteBusStopNumbers);
        out.close();
    } catch (Exception e) {e.printStackTrace();}
}

@SuppressWarnings("unchecked")
public static void loadData(){
    ObjectInput in;
    try {
        File inFile = new File(Environment.getExternalStorageDirectory(), DIRECTORY_NAME+"appSaveState.data");
        in = new ObjectInputStream(new FileInputStream(inFile));
        SaveState.favoriteBusStopNumbers=(ArrayList<String>) in.readObject();
        in.close();
    } catch (Exception e) {e.printStackTrace();}
} 
```

（您需要取消有关强制转换为泛型类型的警告。）

你根本不需要这个`SaveState.instance`领域。

# sql-server - 暂时禁用所有外键约束

> ID：11639868
> 
> 赞同：60
> 
> 时间：2012-07-24T21:50:40.850
> 
> 标签：sql-server, sql-server-2008, ssis, constraints

我正在运行一个 SSIS 包，它将把 FlatFiles 中的几个表的数据替换为数据库中的现有表。

我的包将截断表，然后插入新数据。当我运行我的 SSIS 包时，由于外键而出现异常。

我可以禁用约束，运行我的导入，然后重新启用它们吗？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-07-24T22:01:43.007

要禁用外键约束：

```
DECLARE @sql nvarchar(max) = N'';

;WITH x AS 
(
  SELECT DISTINCT obj = 
      QUOTENAME(OBJECT_SCHEMA_NAME(parent_object_id)) + '.' 
    + QUOTENAME(OBJECT_NAME(parent_object_id)) 
  FROM sys.foreign_keys
)
SELECT @sql += N'ALTER TABLE ' + obj + N' NOCHECK CONSTRAINT ALL;
' FROM x;

EXEC sys.sp_executesql @sql; 
```

重新启用：

```
DECLARE @sql nvarchar(max) = N'';

;WITH x AS 
(
  SELECT DISTINCT obj = 
      QUOTENAME(OBJECT_SCHEMA_NAME(parent_object_id)) + '.' 
    + QUOTENAME(OBJECT_NAME(parent_object_id)) 
  FROM sys.foreign_keys
)
SELECT @sql += N'ALTER TABLE ' + obj + N' WITH CHECK CHECK CONSTRAINT ALL;
' FROM x;

EXEC sys.sp_executesql @sql; 
```

但是，您将无法*截断*表，您必须以正确的顺序从它们中删除。如果需要*截断*它们，则需要完全删除约束，然后重新创建它们。如果您的外键约束都是简单的单列约束，这很容易做到，但如果涉及多列，则肯定会更复杂。

这是您可以尝试的方法。为了使它成为 SSIS 包的一部分，您需要在 SSIS 包运行时存储 FK 定义的地方（您无法在一个脚本中完成所有这些操作）。所以在一些实用程序数据库中，创建一个表：

```
CREATE TABLE dbo.PostCommand(cmd nvarchar(max)); 
```

然后在您的数据库中，您可以有一个执行此操作的存储过程：

```
DELETE other_database.dbo.PostCommand;

DECLARE @sql nvarchar(max) = N'';

SELECT @sql += N'ALTER TABLE ' 
   + QUOTENAME(OBJECT_SCHEMA_NAME(fk.parent_object_id))
   + '.' + QUOTENAME(OBJECT_NAME(fk.parent_object_id)) 
   + ' ADD CONSTRAINT ' + fk.name + ' FOREIGN KEY (' 
   + STUFF((SELECT ',' + c.name
    FROM sys.columns AS c 
        INNER JOIN sys.foreign_key_columns AS fkc 
        ON fkc.parent_column_id = c.column_id
        AND fkc.parent_object_id = c.[object_id]
    WHERE fkc.constraint_object_id = fk.[object_id]
    ORDER BY fkc.constraint_column_id 
    FOR XML PATH(''), 
    TYPE).value(N'./text()[1]', 'nvarchar(max)'), 1, 1, N'')
+ ') REFERENCES ' + 
QUOTENAME(OBJECT_SCHEMA_NAME(fk.referenced_object_id))
+ '.' + QUOTENAME(OBJECT_NAME(fk.referenced_object_id))
+ '(' + 
STUFF((SELECT ',' + c.name
    FROM sys.columns AS c 
        INNER JOIN sys.foreign_key_columns AS fkc 
        ON fkc.referenced_column_id = c.column_id
        AND fkc.referenced_object_id = c.[object_id]
    WHERE fkc.constraint_object_id = fk.[object_id]
    ORDER BY fkc.constraint_column_id 
    FOR XML PATH(''), 
    TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'') + ');
' FROM sys.foreign_keys AS fk
WHERE OBJECTPROPERTY(parent_object_id, 'IsMsShipped') = 0;

INSERT other_database.dbo.PostCommand(cmd) SELECT @sql;

IF @@ROWCOUNT = 1
BEGIN
  SET @sql = N'';

  SELECT @sql += N'ALTER TABLE ' + QUOTENAME(OBJECT_SCHEMA_NAME(fk.parent_object_id))
    + '.' + QUOTENAME(OBJECT_NAME(fk.parent_object_id)) 
    + ' DROP CONSTRAINT ' + fk.name + ';
  ' FROM sys.foreign_keys AS fk;

  EXEC sys.sp_executesql @sql;
END 
```

现在，当您的 SSIS 包完成时，它应该调用一个不同的存储过程，它会：

```
DECLARE @sql nvarchar(max);

SELECT @sql = cmd FROM other_database.dbo.PostCommand;

EXEC sys.sp_executesql @sql; 
```

如果您只是为了能够截断而不是删除而执行所有这些操作，我建议您只需点击并运行删除即可。也许使用批量日志恢复模型来最小化日志的影响。一般来说，我看不出这个解决方案比仅以正确的顺序使用删除要快得多。

2014 年，我在这里发表了一篇更详细的文章：

*   [在 SQL Server 中删除并重新创建所有外键约束](http://www.mssqltips.com/sqlservertip/3347/drop-and-recreate-all-foreign-key-constraints-in-sql-server/?utm_source=AaronBertrand)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-12-17T10:57:24.327

使用内置的**sp_msforeachtable**存储过程。

要禁用所有约束：

```
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT ALL"; 
```

要启用所有约束：

```
EXEC sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT ALL"; 
```

要删除所有表：

```
EXEC sp_msforeachtable "DROP TABLE ?"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T03:48:15.117

在“禁用所有外键”部分下提供了一个很好的参考：http: [//msdn.microsoft.com/en-us/magazine/cc163442.aspx](http://msdn.microsoft.com/en-us/magazine/cc163442.aspx)

受此启发，可以通过创建一个临时表并在该表中插入约束，然后删除约束，然后从该临时表重新应用它们来制定一种方法。说得够多了，这就是我要说的

```
 SET NOCOUNT ON

    DECLARE @temptable TABLE(
       Id INT PRIMARY KEY IDENTITY(1, 1),
       FKConstraintName VARCHAR(255),
       FKConstraintTableSchema VARCHAR(255),
       FKConstraintTableName VARCHAR(255),
       FKConstraintColumnName VARCHAR(255),
       PKConstraintName VARCHAR(255),
       PKConstraintTableSchema VARCHAR(255),
       PKConstraintTableName VARCHAR(255),
       PKConstraintColumnName VARCHAR(255)    
    )

    INSERT INTO @temptable(FKConstraintName, FKConstraintTableSchema, FKConstraintTableName, FKConstraintColumnName)
    SELECT 
       KeyColumnUsage.CONSTRAINT_NAME, 
       KeyColumnUsage.TABLE_SCHEMA, 
       KeyColumnUsage.TABLE_NAME, 
       KeyColumnUsage.COLUMN_NAME 
    FROM 
       INFORMATION_SCHEMA.KEY_COLUMN_USAGE KeyColumnUsage
          INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS TableConstraints
             ON KeyColumnUsage.CONSTRAINT_NAME = TableConstraints.CONSTRAINT_NAME
    WHERE
       TableConstraints.CONSTRAINT_TYPE = 'FOREIGN KEY'

    UPDATE @temptable SET
       PKConstraintName = UNIQUE_CONSTRAINT_NAME
    FROM 
       @temptable tt
          INNER JOIN INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS ReferentialConstraint
             ON tt.FKConstraintName = ReferentialConstraint.CONSTRAINT_NAME

    UPDATE @temptable SET
       PKConstraintTableSchema  = TABLE_SCHEMA,
       PKConstraintTableName  = TABLE_NAME
    FROM @temptable tt
       INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS TableConstraints
          ON tt.PKConstraintName = TableConstraints.CONSTRAINT_NAME

    UPDATE @temptable SET
       PKConstraintColumnName = COLUMN_NAME
    FROM @temptable tt
       INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KeyColumnUsage
          ON tt.PKConstraintName = KeyColumnUsage.CONSTRAINT_NAME

    --Now to drop constraint:
    SELECT
       '
       ALTER TABLE [' + FKConstraintTableSchema + '].[' + FKConstraintTableName + '] 
       DROP CONSTRAINT ' + FKConstraintName + '

       GO'
    FROM
       @temptable

    --Finally to add constraint:
    SELECT
       '
       ALTER TABLE [' + FKConstraintTableSchema + '].[' + FKConstraintTableName + '] 
       ADD CONSTRAINT ' + FKConstraintName + ' FOREIGN KEY(' + FKConstraintColumnName + ') REFERENCES [' + PKConstraintTableSchema + '].[' + PKConstraintTableName + '](' + PKConstraintColumnName + ')

       GO'
    FROM
       @temptable

    GO 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-08-03T09:27:29.523

有一个简单的方法。

```
-- Disable all the constraint in database
EXEC sp_msforeachtable 'ALTER TABLE ? NOCHECK CONSTRAINT all'

-- Enable all the constraint in database
EXEC sp_msforeachtable 'ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all' 
```

参考[SQL SERVER – 禁用数据库中的所有外键约束 – 启用数据库中的所有外键约束](https://blog.sqlauthority.com/2013/04/29/sql-server-disable-all-the-foreign-key-constraint-in-database-enable-all-the-foreign-key-constraint-in-database/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-17T09:57:15.417

禁用所有表约束

```
ALTER TABLE TableName NOCHECK CONSTRAINT ConstraintName 
```

-- 启用所有表约束

```
ALTER TABLE TableName CHECK CONSTRAINT ConstraintName 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-12T13:39:20.743

如果您使用的数据库模式与“.dbo”不同，或者您的数据库包含由多个字段组成的 Pk，请不要使用 Carter Medlin 的解决方案，否则会损坏您的数据库！！！

当你使用不同的模式时，试试这个（不要忘记之前备份你的数据库！）：

```
DECLARE @sql AS NVARCHAR(max)=''
select @sql = @sql +
    'ALTER INDEX ALL ON ' + SCHEMA_NAME( t.schema_id) +'.'+ '['+ t.[name] + '] DISABLE;'+CHAR(13)
from  
    sys.tables t
where type='u'

select @sql = @sql +
    'ALTER INDEX ' + i.[name] + ' ON ' + SCHEMA_NAME( t.schema_id) +'.'+'[' + t.[name] + '] REBUILD;'+CHAR(13)
from  
    sys.key_constraints i
join
    sys.tables t on i.parent_object_id=t.object_id
where     i.type='PK'

exec dbo.sp_executesql @sql;
go 
```

做一些 Fk-free 动作后，你可以用

```
DECLARE @sql AS NVARCHAR(max)=''
select @sql = @sql +
    'ALTER INDEX ALL ON ' + SCHEMA_NAME( t.schema_id) +'.'+'[' +  t.[name] + '] REBUILD;'+CHAR(13)
from  
    sys.tables t
where type='u'
print @sql

exec dbo.sp_executesql @sql;
exec sp_msforeachtable "ALTER TABLE ? WITH NOCHECK CHECK CONSTRAINT ALL"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-29T06:39:33.157

即使您禁用外键，也无法截断表。因此您可以使用删除命令从表中删除所有记录，但请注意，如果您对包含数百万条记录的表使用删除命令，那么您的包会很慢，并且您的事务日志大小会增加，并且可能会填满您宝贵的磁盘空间。

如果你放弃约束，你可能会用不干净的数据填满你的表，当你尝试重新创建约束时，它可能不允许你这样做，因为它会给出错误。因此，请确保如果您放弃约束，您正在加载彼此正确相关并满足您要重新创建的约束关系的数据。

所以请仔细考虑每种方法的优缺点并根据您的要求使用它

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T08:41:36.923

不需要在 sql 上运行对 sidable FK 的查询。如果您有从表 A 到 B 的 FK，您应该：

*   从表 A 中删除数据
*   从表 B 中删除数据
*   在 B 上插入数据
*   在 A 上插入数据

你也可以告诉目的地不要检查约束

![在此处输入图像描述](../Images/bc32ae0efd3bf6fdc1eb700b32fca85f.png)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-01T19:24:41.630

禁用所有索引（包括 pk，这将禁用所有 fks），然后重新启用 pks。

```
DECLARE @sql AS NVARCHAR(max)=''
select @sql = @sql +
    'ALTER INDEX ALL ON [' + t.[name] + '] DISABLE;'+CHAR(13)
from  
    sys.tables t
where type='u'

select @sql = @sql +
    'ALTER INDEX ' + i.[name] + ' ON [' + t.[name] + '] REBUILD;'+CHAR(13)
from  
    sys.key_constraints i
join
    sys.tables t on i.parent_object_id=t.object_id
where
    i.type='PK'

exec dbo.sp_executesql @sql;
go 
```

[做你的数据加载]

然后让一切恢复生机……

```
DECLARE @sql AS NVARCHAR(max)=''
select @sql = @sql +
    'ALTER INDEX ALL ON [' + t.[name] + '] REBUILD;'+CHAR(13)
from  
    sys.tables t
where type='u'

exec dbo.sp_executesql @sql;
go 
```

# oauth-2.0 - OAuth 2 提供者：存储客户端凭据

> ID：11639873
> 
> 赞同：1
> 
> 时间：2012-07-24T21:50:59.987
> 
> 标签：oauth-2.0

实施 OAuth2 提供程序时存储客户端凭据的最佳做法是什么？

如果我决定每次客户端请求一个新的我发出一个新的，我可以将 access_token/refresh_token/auth_code 存储为盐渍哈希（就像密码一样）。但在 client_secret 的情况下，我需要能够在应用注册页面上的 client_id 上显示它，所以我不能只保留哈希。

谢谢！列夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:17:50.370

使用机器生成的客户端密码只是验证客户端应用程序[的众多方法之一。](http://self-issued.info/docs/rfc6749.html#client-authentication)我认为这是您想在服务中使用的内容。在这种情况下，您已经回答了您的问题，只要您希望能够随时将其传达给应用程序开发人员，就必须以纯文本形式存储该秘密。

如果这对您来说不可接受，请考虑选择不同的解决方案，例如让开发人员像使用密码一样设置秘密，并且永远不要存储明文；[或使用像MAC](https://datatracker.ietf.org/doc/html/draft-hammer-oauth-v2-mac-token-02)这样的私钥/公钥对认证方案。

# spring - 验证消息未从 Spring 中的消息属性文件中提取

> ID：11639876
> 
> 赞同：6
> 
> 时间：2012-07-24T21:51:11.903
> 
> 标签：spring, bundle, message, bean-validation

我昨天让它工作了，然后我做了一些事情，现在我已经尝试修复它好几个小时了，我就是无法让它工作了。

我有一个 Spring MVC 应用程序，其中包含`<form:form>`我想`<form:errors>`在用户输入错误信息时从 .properties 文件显示自定义错误消息 ( )。JSR-303 注释中定义了“错误”。

表格摘录：

```
<form:form method="post" action="adduserprofile" modelAttribute="bindableUserProfile">
<table>
    <tr>
        <td><form:label path="firstName">Voornaam</form:label></td>
        <td>
            <form:input path="firstName"/>
            <form:errors path="firstName" />
        </td>
    </tr>
    <tr>
        <td><form:label path="lastName">Achternaam</form:label></td>
        <td>
            <form:input path="lastName"/>
            <form:errors path="lastName" />
        </td>
    </tr> 
```

BindableUserProfile 的摘录：

```
 @NotNull
@Size(min = 3, max = 40, message="{errors.requiredfield}")
public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

@NotNull
@Size(min = 3, max = 40,  message="errors.requiredfield")
public String getLastName() {
    return lastName;
} 
```

控制器摘录：

```
 @RequestMapping(value = "/edit/{userProfileId}", method = RequestMethod.GET)
public String createOrUpdate(@PathVariable Long userProfileId, Model model) {
    if (model.containsAttribute("bindableUserProfile")) {
        model.addAttribute("userProfile", model.asMap().get("bindableUserProfile"));
    } else {
        UserProfile profile = userProfileService.findById(userProfileId);
        if (profile != null) {
            model.addAttribute(new BindableUserProfile(profile));
        } else {
            model.addAttribute(new BindableUserProfile());
        }
    }

    model.addAttribute("includeFile", "forms/userprofileform.jsp");
    return "main";
}

@RequestMapping(value = "/adduserprofile", method = RequestMethod.POST)
public String addUserProfile(@Valid BindableUserProfile userProfile, BindingResult result, Model model) {
    if (result.hasErrors()) {
        return createOrUpdate(null, model);
    }

    UserProfile profile = userProfile.asUserProfile();
    userProfileService.addUserProfile(profile);
    return "redirect:/userprofile";
} 
```

摘自 application-context.xml

```
 <bean name="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="messages/messages"/>
</bean>

<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationMessageSource">
        <ref bean="messageSource"/>
    </property>
</bean> 
```

在资源/消息中，我有两个文件，messages_en.properties 和 messages_nl.properties。两者都有相同的简单内容：

```
errors.requiredfield=This field is required!!! 
```

*   当我以空的名字提交表单时，我可以在控制器方法“addUserProfile()”中看到确实发现了错误。
*   当我以空的名字提交表单时，消息标识符显示在字段旁边，即在姓氏的情况下，文字文本“errors.requiredfield”或“{errors.requiredfield}”。
*   当我将消息属性值更改为“Foo”时，“Foo”显示为错误消息。所以错误机制本身似乎工作正常。
*   application-context.xml 中的 messageSource bean 必须正确，因为它说当我更改基本名称时它找不到属性文件。
*   NotNull 注释不会捕获空输入。Spring 将空输入视为空字符串，而不是 null。

因此，似乎找到了属性文件并且正确处理了验证注释，但是 Spring 不明白它必须用属性文件中的消息替换消息键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:05:01.103

Yaaaargh，我认为这从一开始就不应该起作用。

我认为可以将 JSR-303 注释的“消息”属性解释为键，以便从 message.properties 文件中获取相关的错误消息，但我认为我错了。

`@Size(min = 3, max = 40, message="errors.requiredfield")`

我的同事编写了一个层，为我们创建了这种行为，但默认情况下它不起作用。好像我让它工作过一次，因为我正在使用

`@Size(min = 3, max = 40, message="{errors.requiredfield}")`

花括号导致 Spring 启动使用 .properties 文件作为源的查找和替换过程。不过，第二个选项仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T03:56:17.627

从过去的 1.5 天开始，我一直在做同样的事情，最后我找到了解决方案。

可能听起来有点疯狂，但它是一个可行的解决方案。:)

```
@Size(min = 1, max = 50, message = "Email size should be between 1 and 50") 
```

现在`message = "Email size should be between 1 and 50"`从验证标签中删除。

完成此操作后，您的注释将是这样的。

```
@Size(min = 1, max = 50) 
```

现在在控制器端调试提交表单时调用的方法。以下是我在用户点击提交时接收请求的方法。

```
public static ModelAndView processCustomerLoginRequest(IUserService userService, LoginForm loginForm, 
        HttpServletRequest request, HttpSession session, BindingResult result, String viewType, Map<String, LoginForm> model) 
```

现在在方法的第一行放置一个调试点并调试参数“结果”。

```
BindingResult result 
```

在调试时，您会在代码数组中找到这样的字符串。

```
Size.loginForm.loginId 
```

现在在您的属性文件中定义此字符串并针对该字符串定义一条消息。编译并执行。只要未验证该注释，就会显示该消息。

```
Size.loginForm.loginId=email shouldn't be empty. 
```

基本上，spring 将自己的字符串作为其属性文件消息的键。在上面的键中：

*   `Size(@Size)`= 验证注解名称
*   `loginForm`=我的班级名称
*   `loginId`=`loginForm`类中的属性名称。

这种方法的美妙之处在于它在您将使用 Spring Internationalization 时也运行良好。它会随着语言的变化自动切换消息文件。

# javascript - IE 中的 Google Maps API v3 不显示地图或标记

> ID：11639877
> 
> 赞同：2
> 
> 时间：2012-07-24T21:51:14.890
> 
> 标签：javascript, internet-explorer, google-maps-api-3, google-maps-markers, stack-overflow

我们最近从 Google Maps v2 升级到 v3，现在标记和地图将不会显示在任何版本的 IE 中。它适用于所有其他浏览器。

控制台显示堆栈溢出错误，我们认为这与标记和/或标记的创建有关。我们禁用了 fitbounds 命令，地图显示但在 IE 中没有标记。然而，Firefox 和 Chrome 中的同一张地图有让我们困惑的标记。

几个小时以来，我一直试图找出解决这个问题的方法，在 IE 中进行调试并在 Google 上进行搜索，但还没有找到任何与我们的问题相似的东西。

我是 Google Map API 的新手，刚刚发现了 stackoverflow，所以我想也许这里有人可以发现我遗漏的东西？

示例地图：[http ://tinyurl.com/bt7tvj3](http://tinyurl.com/bt7tvj3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:07:50.013

安装IE9，先在普通模式下试试。

如果可行，请尝试兼容模式。

原因是：IE9 比以前的版本有更好的 JS 支持和更好的调试器。

此外，通过 jshint.com 或 jslint.org 运行您的代码 - 这总是有帮助的。

通常 IE 在数组和对象末尾缺少分号和 时会出现问题，例如

```
var arr = [1,2,3,];
var obj = {a:1, b:2,}; 
```

jslint 和 jshint 将为您处理额外的逗号。如果您的代码通过了 jshint，但在 IE7+ 中仍然无法正常工作，请回来，让我们看看还缺少什么。

# css - 背景图像的水平滚动

> ID：11639885
> 
> 赞同：0
> 
> 时间：2012-07-24T21:52:01.800
> 
> 标签：css

我有一个 div，里面有多个元素，跨度比父 div 的宽度更远。我将overflow-x设置为滚动，并将背景附件设置为滚动，但是当我左右滚动时，背景图像保持固定

这是页面的链接：http: [//okcomputerstl.com/K9_Athletic_Club/services.html](http://okcomputerstl.com/K9_Athletic_Club/services.html) 砖背景是我想滚动的

这是CSS

```
.framecontain {
    width: 979px;
    height: 490px;
    position: relative;
    overflow-x: scroll;
    background-image: url(../graphics/services/brickbg.png);
}

.services .textbox {
    position: absolute;
    top: 52px;
    width: 395px;
    height: 358px;
    z-index: 2;
    background-image: url(../graphics/services/frame.png);
}

.services .one {
    left: 64px;
}

.services .two {
    left: 508px;
}

.services .three {
    left: 953px;
}

.services .four {
    left: 1388px;
}

.services .five {
    left: 1826px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:28:12.420

我认为您必须将砖墙容器包装在另一个 div 中才能实现此目的。

```
<div id="container">  <!-- div having the scrollbar-->
  <div id="bricks"></div> <!-- div having the background-->
</div> 
```

# c++ - 如何读取包含多个根元素的 JSON 文件？

> ID：11639886
> 
> 赞同：10
> 
> 时间：2012-07-24T21:52:08.773
> 
> 标签：c++, jsoncpp

如果我有一个内容如下所示的文件：

```
{"one": 1}
{"two": 2} 
```

我可以简单地将每个单独的行解析为单独的 JSON 对象（使用[JsonCpp](http://jsoncpp.sourceforge.net/)）。但是如果文件的结构不太方便，像这样：

```
{
   "one":1
}

{
   "two":2
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-05-09T10:09:39.970

没有人提到数组：

```
[
  {"one": 1},
  {"two": 2}
] 
```

是有效的 JSON，可能会做 OP 想要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T21:57:17.067

您问题中的两个示例都不是有效的 JSON 对象；JSON 对象可能只有*一个*根。您必须将文件拆分为两个对象，然后解析它们。

您可以使用[http://jsonlint.com](http://jsonlint.com)查看给定字符串是否为有效 JSON。

因此，我建议要么更改将多个 JSON 对象转储到单个文件中的内容以在单独的文件中执行此操作，要么将每个对象作为一个值放在一个 JSON 根对象中。

如果您无法控制创建这些文件的任何内容，那么您将不得不自己解析文件以挑选出不同的根对象。

这是在 JSON 对象中编码这些数据的有效方法：

```
{
    "one": 1,
    "two": 2
} 
```

如果你真的需要单独的对象，你可以这样做：

```
{
    "one":
    {
        "number": 1
    },
    "two":
    {
        "number": 2
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T01:46:50.267

罗伯肯尼迪是对的。再次调用它会提取下一个对象，依此类推。大多数 json 库无法帮助您在一个根目录中完成所有操作。除非您在 QT 中使用更高端的框架。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-01T18:45:35.677

即使您有复杂的对象，您也可以使用此自定义函数来解析多个根元素。

```
 static getParsedJson(jsonString) {
      const parsedJsonArr = [];
      let tempStr = '';
      let isObjStartFound = false;
      for (let i = 0; i < jsonString.length; i += 1) {
          if (isObjStartFound) {
              tempStr += jsonString[i];
              if (jsonString[i] === '}') {
                  try {
                      const obj = JSON.parse(tempStr);
                      parsedJsonArr.push(obj);
                      tempStr = '';
                      isObjStartFound = false;
                  } catch (err) {
                      // console.log("not a valid JSON object");
                  }
              }
          }
          if (!isObjStartFound && jsonString[i] === '{') {
              tempStr += jsonString[i];
              isObjStartFound = true;
          }
       }
       return parsedJsonArr;
   } 
```

# google-app-engine - 将实体放入 Google App Engine 数据存储区时，布尔值始终为 false - Golang

> ID：11639894
> 
> 赞同：2
> 
> 时间：2012-07-24T21:52:49.227
> 
> 标签：google-app-engine, google-cloud-datastore, go

出于某种原因，当我尝试在 Google Apps 数据存储中存储布尔数据时，它总是存储为 false。

我的实体定义如下所示：

```
type Link struct {
  Name          string    //Coloquial label for link. Set by original User.
  ...
  isOpen        bool      //Tells us whether anyone can rewrite the link. Set by original User.
  isPerminant   bool      //Tells us whether link should be saved forever.
  isFlagged     bool      //Tells us whether the content has ever been flagged inappropriate.
} 
```

我创建一个对象并像这样分配值：

```
//Create Link from form data
l   := Link{
  Name:         r.FormValue("name"),
  ...
  isOpen:       r.FormValue("open")=="on",        
  isPerminant:  r.FormValue("perminant")=="on",
  isFlagged:    r.FormValue("flagged")=="on",
} 
```

我通过运行以下命令来验证数据：

```
//Put the Link in the datastore
lKey, err := datastore.Put(c, datastore.NewIncompleteKey(c, "Link", nil), &l)
if err != nil {
  http.Error(w, err.Error(), http.StatusInternalServerError)
  return
}

var newLink Link
if err = datastore.Get(c, lKey, &newLink); err != nil {
  http.Error(w, err.Error(), http.StatusInternalServerError)
  return
}

newLink output value: {[name] ... false false false} 
```

即使我为其中一个 is[...] 属性硬编码为真值，它们仍然是假的！哇哇哇哇哇？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T01:49:54.373

尝试大写**`I`**in `Is`：

```
type Link struct {
    Name        string //Coloquial label for link. Set by original User.
    IsOpen      bool   //Tells us whether anyone can rewrite the link. Set by original User.
    IsPerminant bool   //Tells us whether link should be saved forever.
    IsFlagged   bool   //Tells us whether the content has ever been flagged inappropriate.
} 
```

.

```
//Create Link from form data
l := Link{
    Name:        r.FormValue("name"),
    IsOpen:      r.FormValue("open") == "on",
    IsPerminant: r.FormValue("perminant") == "on",
    IsFlagged:   r.FormValue("flagged") == "on",
} 
```

对于要保存到数据存储的字段，必须将其导出。即以大写字母开头。[有关更多信息，请阅读Effective Go](http://golang.org/doc/effective_go.html#names)的名称部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:08:11.947

您是否在硬编码对象后使用 put 方法？为了安全起见，请确保您所做的任何更改都跟在 put 之后。

# playframework - 使用 play framework 1.+ 指定图像名称（使用 play.db.jpa.blob）

> ID：11639895
> 
> 赞同：0
> 
> 时间：2012-07-24T21:52:49.557
> 
> 标签：playframework, playframework-1.x

我正在使用 play framework 1.2+ - 我可以使用 play.db.jpa.blob 将图像保存到磁盘 - 我想知道是否可以使用它指定文件名 - 如果不能，我将最终使用常规文件。

```
 //File photo;
testImage.photoFileName = photo.getName();
testImage.photo = new Blob();

        testImage.photo.set(new FileInputStream(photo),  MimeTypes.getContentType(photo.getName())); 
```

欢迎任何有用的建议。操作系统上的文件名使用 UUID - File 上的 getName 返回为文件指定的实际名称 - 我需要指定文件的文件名，以便稍后从目录中读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:21:50.530

使用 javax.imageio.ImageIO.write 调用（传入 BufferedImage、文件类型（png/jpeg 等）和文件的目录位置（使用所需的文件名）。

# parameters - Yii 参数不起作用

> ID：11639897
> 
> 赞同：0
> 
> 时间：2012-07-24T21:52:55.983
> 
> 标签：parameters, params, yii

我是 Yii 的新手，我正在使用该`findAllBySql`功能获取一些记录。

```
$users = User::model()->findAllBySql("
  SELECT * 
  FROM users u 
  WHERE replace(lower(u.firstname),' ','') LIKE '%:s%' 
     OR replace(lower(u.lastname),' ','') LIKE '%:s%'",
  array(':s' => $search)
); 
```

如果我对 :s 的值进行硬编码，则该函数可以正常工作，因此 Yii 似乎没有更改参数`:s`。任何帮助是极大的赞赏！

问候， 泰斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T22:49:42.520

```
$users = User::model()->findAllBySql("
  SELECT * 
  FROM users u 
  WHERE replace(lower(u.firstname),' ','') LIKE :s 
     OR replace(lower(u.lastname),' ','') LIKE :s",
  array(':s' => '%' . $search . '%')
); 
```

# android - Android 运行服务无形且无敌。

> ID：11639902
> 
> 赞同：1
> 
> 时间：2012-07-24T21:53:45.043
> 
> 标签：android, service, task, daemon

我正在为一家试图在其手机上运行应用程序的公司工作。应用程序需要以不能被任务管理器杀死并在启动时启动的方式。有没有办法做到这一点？可能通过加载自定义ROM？

# c# - C# WebClient OpenRead

> ID：11639906
> 
> 赞同：-1
> 
> 时间：2012-07-24T21:53:52.907
> 
> 标签：c#, webclient

有人可以帮助解析网站。我已经解析了很多站点，但是这个很有趣，内部代码是使用 php 文件动态生成的。所以我尝试像这样使用 WebClient：

```
WebClient client = new WebClient();
string postData = "getProducts=1&category=340&brand=0";

byte[] byteArray = Encoding.UTF8.GetBytes(postData);

client.Headers.Add("POST", "/ajax.php HTTP/1.1");
client.Headers.Add("Host", site);
client.Headers.Add("Connection", "keep-alive");
client.Headers.Add("Origin", "http://massup.ru");
client.Headers.Add("X-Requested-With", "XMLHttpRequest");
client.Headers.Add("User-Agent", "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11");
client.Headers.Add("Accept", "*/*");
client.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
client.Headers.Add("Content-length", byteArray.Length.ToString());
client.Headers.Add("Referer", "http://massup.ru/category/proteini");
client.Headers.Add("Accept-Encoding", "gzip,deflate,sdch");
client.Headers.Add("Accept-Language", "ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4");
client.Headers.Add("Accept-Charset", "windows-1251,utf-8;q=0.7,*;q=0.3");
client.Headers.Add("Cookie", "cart=933a71dfee2baf8573dfc2094a937f0d; r_v=YToyOntpOjA7YTo3OntzOjU6Im1vZGVsIjtzOjI2OiIxMDAlIFdoZXkgUHJvdGVpbiA5MDgg0LPRgCI7czozOiJ1cmwiO3M6MzQ6Im11bHRpcG93ZXItMTAwLXdoZXktcHJvdGVpbi05MDgtZ3IiO3M6NToiYnJhbmQiO3M6MTA6Ik11bHRpcG93ZXIiO3M6ODoiY2F0ZWdvcnkiO3M6Mzk6ItCh0YvQstC%2B0YDQvtGC0L7Rh9C90YvQtSDQuNC30L7Qu9GP0YLRiyI7czo5OiJzY2F0ZWdvcnkiO3M6Mzc6ItCh0YvQstC%2B0YDQvtGC0L7Rh9C90YvQuSDQuNC30L7Qu9GP0YIiO3M6NToicHJpY2UiO3M6MToiMCI7czo0OiJpY29uIjtzOjM3OiJodHRwOi8vbWFzc3VwLnJ1L2ltYWdlcy9pY29uXzQ3NTIuanBnIjt9aToxO2E6Nzp7czo1OiJtb2RlbCI7czoxNzoiTWF0cml4IDIuMCA5ODQg0LMiO3M6MzoidXJsIjtzOjE2OiJtYXRyaXgtMi0wLTk4NC1nIjtzOjU6ImJyYW5kIjtzOjc6IlN5bnRyYXgiO3M6ODoiY2F0ZWdvcnkiO3M6Mzk6ItCh0YvQstC%2B0YDQvtGC0L7Rh9C90YvQtSDQuNC30L7Qu9GP0YLRiyI7czo5OiJzY2F0ZWdvcnkiO3M6Mzc6ItCh0YvQstC%2B0YDQvtGC0L7Rh9C90YvQuSDQuNC30L7Qu9GP0YIiO3M6NToicHJpY2UiO3M6NDoiMTE5MCI7czo0OiJpY29uIjtzOjM3OiJodHRwOi8vbWFzc3VwLnJ1L2ltYWdlcy9pY29uXzEwMDguanBnIjt9fQ%3D%3D; PHPSESSID=933a71dfee2baf8573dfc2094a937f0d");

Stream data = client.OpenRead("http://massup.ru/ajax.php");
StreamReader reader = new StreamReader(data);
string s = reader.ReadToEnd();
Console.WriteLine(s);
data.Close();
reader.Close(); 
```

但它给了我一个错误！

有人可以帮助我进行这种解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:45:21.617

See my answer to [C# https login and download file](https://stackoverflow.com/questions/9841344/c-sharp-https-login-and-download-file), which has working code that correctly handles HTTP POSTs, then clean up what you have based on it. After you've done that, if you still need help, post your updated code and a clearer description of what specific errors or exceptions you are seeing.

# java - Java MongoDB：一次更新多个文档

> ID：11639910
> 
> 赞同：0
> 
> 时间：2012-07-24T21:54:11.317
> 
> 标签：java, mongodb

我有以下架构

```
Id:
date_created:
vars: {
      NAME:
      VALUE:
      EDITABLE:
      .....

} 
```

*   根据定义`Id`是`unique`并且可能像`A, B, C, AA, AB, ....`
*   我有超过一百万个这样的文件，所有`unique`文件

*   假设我想更新其中`VALUE`的`vars`子集，将提供给我的`documents`内容限定为.`Id``list`

使用[api](http://api.mongodb.org/java/2.8.0/)，我不确定我可以使用哪个 api 来进行多个文档更新，以符合条件`{Id: {$in: [A, B, X, Y, ...]}}`

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:13:28.550

使用[此版本](http://api.mongodb.org/java/2.8.0/com/mongodb/DBCollection.html#update%28com.mongodb.DBObject,%20com.mongodb.DBObject,%20boolean,%20boolean%29)的`update`方法并将`multi`参数设置为 true。否则更新将仅应用于第一个匹配的文档。

# spotify - libspotify：注销时间

> ID：11639911
> 
> 赞同：0
> 
> 时间：2012-07-24T21:54:14.203
> 
> 标签：spotify

**调用sp_session_logout**和调用回调**函数 logged_out**之间通常需要多长时间？根据我的经验，有时它很快，但有时需要几秒钟。例如，有时搜索需要更长的时间，浏览就可以了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:47:44.207

`From my experience, sometimes it's fast, but sometimes it takes few seconds.`

这就是你的答案。这需要“一些时间”。注销会做很多事情，比如刷新磁盘缓存等等，以及断开用户与服务的连接。

# asp.net-mvc-3 - ActionResult HttpPost 需要访问值

> ID：11639913
> 
> 赞同：0
> 
> 时间：2012-07-24T21:54:50.780
> 
> 标签：asp.net-mvc-3

我正在使用 MVC C# 假设​​我有以下 ActionResult：

```
 public ActionResult Create(string location) 
    { 
      ... 
      View()  
    } 
```

我需要在 [httppost] 中使用主要位置

```
 [HttpPost]
    public ActionResult Create(Employee employee) 
    { 
      ...
     // I need to access the value of location here but I dont' have access to the View  
    } 
```

获得位置价值的最佳方法是什么。我可以创建一个视图模型并将该值传递给视图，然后在 [HttpPost] 中检索它，但我无权访问视图，因为它受到限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:11:24.117

在 mvc 中，有许多方法可以在控制器方法之间传递数据。其中之一是使用`TempData`. 您可以保存`location`在 GET 方法中

```
public ActionResult Create(string location) 
{ 
  TempData["location"] = location;
  ...
  View()  
} 
```

然后在您的 POST 方法中检索它

```
[HttpPost]
public ActionResult Create(Employee employee) 
{ 
  var location = TempData["location"];
  ...
} 
```

虽然，使用视图模型会更可取。

# php - 使用 JOIN 删除冗余 SQL 查询（在 PHP 中）

> ID：11639914
> 
> 赞同：1
> 
> 时间：2012-07-24T21:54:57.683
> 
> 标签：php, sql, join

我正在尝试清理我的 SQL 查询并在我曾经使用过两个查询的地方使用 JOIN。

这是以前的代码（在 PHP 中）：

```
$cat = "books";  // as a test 

$query = "SELECT category, cat_id FROM master_cat WHERE category = '{$cat}'";
$result = mysql_query($query);

while ($row = mysql_fetch_array($result)) {
    $cat_id = $row['cat_id'];
}

$sql = mysql_query("SELECT item, spam, cat_id FROM items WHERE cat_id = ' " . $cat_id . "' ORDER BY TRIM(LEADING 'The ' FROM item) ASC;");  

while ($row = mysql_fetch_assoc($sql))
    if ($row['spam'] < 2)
        $output[] = $row;

print(json_encode($output));  // added! 
```

我正在尝试仅删除顶部查询并使用 JOIN。更新后的 SQL 语句是这样的：

编辑：我在原始问题中犯了一个错误。基本上用户输入给了我们 $cat = "something"。master_cat 表中有一个带有 cat_id 的“东西”。该 cat_id 也在 items 表中。那是我需要连接表的地方——并且 WHERE 子句需要包含“$cat”

更新查询：

```
 $result = mysql_query("SELECT i.item, i.spam, mc.cat_id AS Category
FROM items as i
INNER JOIN master_cat as mc
ON i.cat_id = mc.cat_id
WHERE i.cat_id = '{$cat}'
ORDER BY TRIM(LEADING 'The ' FROM i.item) ASC;"); 
```

然后：

```
 while ($row = mysql_fetch_assoc($result))
    if ($row['spam'] < 2)
        $output[] = $row; 
```

我在浏览器中收到这个：null。

有人可以指导我如何正确使用 JOIN，我知道这将真正清理这里的内容并进行更有效的编码。我刚刚看了一个教程，但仍然不太明白。

*这是有效的最终代码*

```
$cat = $_POST['category']; // yes, yes, injection.  this is just the short version.

$result = mysql_query("SELECT i.item, i.cat_id, i.spam,  mc.cat_id, mc.category, TRIM(LEADING 'The ' FROM i.item) as CleanItem
FROM items as i
INNER JOIN master_cat as mc
ON i.cat_id = mc.cat_id
WHERE mc.category = '{$cat}'
ORDER BY CleanItem ASC;");

while ($row = mysql_fetch_assoc($result))
    if ($row['spam'] < 2)
        $output[] = $row; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:59:52.350

```
$sql = "SELECT i.item, i.spam, mc.cat_id AS Category
FROM items as i
INNER JOIN master_cat as mc
ON i.cat_id = mc.category
WHERE items.cat_id = '{$cat_id}'
ORDER BY TRIM(LEADING 'The ' FROM item) ASC"; 
```

由于您给它起了别名，因此您必须将其保留为别名：修复倒数第二行：

```
WHERE i.cat_id = '{$cat_id}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T22:00:23.537

`items`您已经在子句中通过其全名引用了该表`WHERE`，您应该使用您创建的别名 ( `i`)。

`item`您的`ORDER BY`子句中还有一个不明确的列引用。

尝试将最后两行更改为：

```
WHERE i.cat_id = '{$cat_id}'
ORDER BY TRIM(LEADING 'The ' FROM i.item) ASC 
```

您还应该检查`mysql_error()`以获取错误的字符串描述，这会直接指出问题所在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:59:50.410

试试这个：

```
$sql = "SELECT i.item, i.spam, mc.cat_id AS Category
FROM items as i
INNER JOIN master_cat as mc ON i.cat_id = mc.cat_id
WHERE i.cat_id = '{$cat_id}'
ORDER BY TRIM(LEADING 'The ' FROM item) ASC"; 
```

如果您别名`items`为`i`，则应`i`在其他任何地方使用。此外， mc.category 似乎不存在，所以我将其替换为`mc.cat_id`. mysql_error 说什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T22:00:26.313

您对初始查询的响应可能是错误的，而不是结果集

你应该加入 i.cat_id = mc.cat_id

您还应该在 select 语句中执行您的 i.item 清理（即删除 'The '）（如果您需要保持 i.item 完整，即使作为单独的字段），然后按该字段排序。

您应该参考 i.cat_id = '{$cat_id]}'，而不是 items.cat_id

# android - gson 解析没有返回正确的对象

> ID：11639918
> 
> 赞同：0
> 
> 时间：2012-07-24T21:55:23.323
> 
> 标签：android, json, gson

尝试在我的 android 应用程序中使用 gson 解析以下 json，但由于它的结构无法解决。

JSON

```
[
{
    "city": {
        "country": "Canada",
        "id": 1,
        "name": "Toronto",
        "province": "Ontario"
    }
},
{
    "city": {
        "country": "Canada",
        "id": 11,
        "name": "Ajax",
        "province": "Ontario"
    }
}
] 
```

JAVA

```
public class LocationCityList {

    private List<LocationCityContainer> cities;

    public List<LocationCityContainer> getTrends() {
        return cities;
    }
    public void setTrends(List<LocationCityContainer> cities) {
        this.cities = cities;
    }

} 
```

以下返回一个适当长度的数组，但之后我无法弄清楚如何自己获取城市对象。

```
Gson gson = new Gson();
Reader r = new InputStreamReader(getJSONData(url));       
LocationCityList[] objs = gson.fromJson(r, LocationCityList[].class); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:01:44.087

逗号太多。试试这个json（注意我在安大略之后删除了逗号）：

```
[
{
    "city": {
        "country": "Canada",
        "id": 1,
        "name": "Toronto",
        "province": "Ontario"
    }
},
{
    "city": {
        "country": "Canada",
        "id": 11,
        "name": "Ajax",
        "province": "Ontario"
    }
} 
```

]

我发现在遇到 json 问题时通过验证器运行我的 json 是有益的。[http://jsonlint.com/](http://jsonlint.com/)是一个很好的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:42:51.613

好的，想通了。Java代码需要如下。

```
public class LocationCityList {

LocationCity city;

public LocationCity getLocationCity(){
    return city;
} 
```

}

```
public class LocationCity {
private String name;
private String id;

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
} 
```

}

# python - 如何从 Pig 中的 Python UDF 打印？

> ID：11639920
> 
> 赞同：2
> 
> 时间：2012-07-24T21:55:32.043
> 
> 标签：python, apache-pig

我有一个用 Python 编写的用户定义函数，我从 Pig 脚本中调用它。出于调试目的，我想打印出我的一些变量，但我的打印语句似乎没有任何效果。如何从 Pig 中的 Python UDF 打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T12:23:02.800

一般来说，如果您只是按照下面的示例打印（这对我有用），它将转到执行 UDF 的任务日志。这里复杂的部分是找到通过作业跟踪器生成它的相关 map/reduce 任务（在猪 11 中，猪将每个阶段写入标准输出更简单）

```
@outputSchema("schema:chararray")
def convertBagToStr(acctBag):
    #print len(acctBag)
    #print acctBag
    return "_".join([str(i[0]) for i in sorted(acctBag)]) 
```

# asp.net-mvc-3 - 无法使用数据库优先实体框架将现有数据库中的表添加到 EDMX

> ID：11639923
> 
> 赞同：0
> 
> 时间：2012-07-24T21:55:46.260
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, ef-code-first, edmx

我正在使用 Database First EF 从现有数据库生成模型。当我第一次生成模型时，它只忽略了一个表，**实体没有添加到 EDMX，没有为表创建模型文件，也没有为实体创建上下文。**

当我尝试将表显式添加到 EDMX 时（生成模型时，首先选择特定表，然后使用数据库中的所有其他表更新模型），它抱怨以下错误。

**具有可能不同键的两个实体映射到同一行。确保这两个映射片段将 AssociationSet 的两端映射到相应的列。**

这个特定的表有两列是其他一些表的主键，**这两列都被指定为表的主键。**

我做错了什么还是应该以不同的方式处理这个表，因为它有两列定义为主键？任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:04:07.637

你没有做错任何事。您的表是多对多关系的连接表。您不需要模型中的该表，因为 EF（与数据库相比）可以直接处理多对多关系而无需任何中间。该表实际上映射在多对多关系的后面 - 您将在映射详细信息窗口中看到它。

顺便提一句。您没有先使用代码。代码优先 = 没有 EDMX。

# c#-4.0 - 如何继承存储过程调用的部分类

> ID：11639929
> 
> 赞同：0
> 
> 时间：2012-07-24T21:56:51.373
> 
> 标签：c#-4.0, inheritance

我有这个类作为父类：

```
public partial class GetStuffResult
{

    private int _Id;

    private string _Name;

    public GetStuffResult()
    {
    }

    [Column(Storage="_Id", DbType="INT NOT NULL")]
    public int Id
    {
        get
        {
            return this._Id;
        }
        set
        {
            if ((this._Id != value))
            {
                this._Id = value;
            }
        }
    }

    [Column(Storage="_Name", DbType="NVarChar(100)")]
    public string Name
    {
        get
        {
            return this._Name;
        }
        set
        {
            if ((this._Name != value))
            {
                this._Name = value;
            }
        }
    }
} 
```

这是一个基类，除了一个额外的方法外，它具有相同的方法：

```
public partial class GetStuffResult1
{
    private int _Score;

    private int _Id;

    private string _Name;

    public GetStuffResult1()
    {
    }

    [Column(Storage="_Score", DbType="INT NOT NULL")]
    public int Id
    {
        get
        {
            return this._Score;
        }
        set
        {
            if ((this._Score != value))
            {
                this._Score = value;
            }
        }
    }

    [Column(Storage="_Id", DbType="INT NOT NULL")]
    public int Id
    {
        get
        {
            return this._Id;
        }
        set
        {
            if ((this._Id != value))
            {
                this._Id = value;
            }
        }
    }

    [Column(Storage="_Name", DbType="NVarChar(100)")]
    public string Name
    {
        get
        {
            return this._Name;
        }
        set
        {
            if ((this._Name != value))
            {
                this._Name = value;
            }
        }
    }
} 
```

我以前做过继承，但我完全困惑在这种情况下它将如何工作？我如何继承 GetStuffResult 以便我可以使用它的 2 种方法而不必在 GetStuffResult1 中复制粘贴相同的代码两次。如果有人可以举出代码示例，我将不胜感激，因为我是 .net 3.5 的新手并且仍在尝试学习它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:52:35.597

我不确定我是否正确理解了你的问题。*（您当前的代码`GetStuffResult1`不应该编译，因为您已经定义了两次 Id 属性。）*如果您希望从中继承，`GetStuffResult`则可以这样做（请参阅[Inheritance](http://msdn.microsoft.com/en-us/library/ms173149.aspx)）：

```
public partial class GetStuffResult1 : GetStuffResult
    {
        private int _Score;  

        public GetStuffResult1()
        {
        }

        [Column(Storage = "_Score", DbType = "INT NOT NULL")]
        public int Id
        {
            get
            {
                return this._Score;
            }
            set
            {
                if ((this._Score != value))
                {
                    this._Score = value;
                }
            }
        }

    } 
```

请注意，我已从子类中删除`_Id`和。`_Name`然而，这会给你警告：

> GetStuffResult1.Id' 隐藏继承的成员 'ThreadConsoleApp.GetStuffResult.Id'。如果打算隐藏，请使用 new 关键字。

如果您对使用部分类感到困惑并且您可能需要多个源文件中的单个类，那么我正在考虑您的问题的第二件事。在这种情况下，您可以使用[partial](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)关键字。如果是这种情况并且您不需要继承，那么您需要为该类使用一个名称。例如`GetStuffResult`。在这种特殊情况下，您`GetStuffResult1`将成为：

```
public partial class GetStuffResult
    {
        private int _Score;  

        public GetStuffResult1()
        {
        }

        [Column(Storage = "_Score", DbType = "INT NOT NULL")]
        public int Id
        {
            get
            {
                return this._Score;
            }
            set
            {
                if ((this._Score != value))
                {
                    this._Score = value;
                }
            }
        }

    } 
```

这类似于拥有一个具有所有组合属性的类。

编辑：

要访问子类中的基类属性，您可以使用 base 关键字。

```
 base.Id = 0;
    base.Name = "SomeName"; 
```

要从 的对象访问基类属性`GetStuffResult1`，请参见以下示例。

```
 GetStuffResult1 gsr1 = new GetStuffResult1();
    gsr1.Id = 0;
    gsr1.Name = "SomeName"; 
```

这里`gsr1.Name`来自基类，您可以在基类`Id`或子类中使用不同的名称，以便更清晰。

# javascript - 如何将 Facebook/Google+/Twitter 分享按钮添加到移动应用程序 (PhoneGap)

> ID：11639933
> 
> 赞同：6
> 
> 时间：2012-07-24T21:57:18.593
> 
> 标签：javascript, asp.net-mvc, facebook, cordova, google-plus

我正在开发一个移动应用程序（通过`jQuery Mobile`And `PhoneGap`）。

如何将`Facebook`,`Twitter`和添加`Google+` `Sharing buttons`到我的应用程序中？有没有 API 或者这么简单的方法？（我的应用程序的服务器端使用`ASP.NET MVC 4`.）

有目的的方式是服务器端还是客户端并不重要。

（例如 Zite 应用有分享按钮）

**编辑：**如果您的目的方法需要打开弹出窗口，将`PhoneGap`处理此弹出窗口**并在共享后将其关闭，以便用户可以回到我的应用程序？**

**以及如何保存用户的凭据，以便用户不想每次都登录？**（凭证应该保存在客户端，通过 cookie 或其他东西......（我们可以允许从 和保存`PhoneGap`cookie吗？））`Facebook``Twitter``Google`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T22:16:51.963

您的要求（在您的编辑之后）非常复杂，但这里有一些提示。

对于 Facebook，您可以使用[PhoneGap Facebook Platform Plugin](https://github.com/davejohnson/phonegap-plugin-facebook-connect)或使用[Javascript SDK](https://developers.facebook.com/docs/reference/javascript/)。您需要向他们注册您的应用并获取应用 ID。由于 FB auth 有很多步骤，请研究他们的示例并寻找一个好的[教程](http://www.drewdahlman.com/meusLabs/?p=88)。

Twitter 提供了类似的身份验证 API，但它需要一些服务器端代码才能使其工作。我从未使用过谷歌的，但我认为他们也有一个相当简单的 API。所有这些 API 的凭据都保存在 PhoneGap`UIWebView`的 cookie 存储中，因此您实际上不必管理它。

对于 PhoneGap 中的弹出窗口，您可以使用[ChildBrowser 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)。

这是我用于按钮的内容。页面加载完成后在客户端调用。由于它们需要一段时间来加载和定位自己，因此使用 4 秒延迟给它们时间，然后它们会淡入。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/gfMp5/)]]]

### 脚本

```
function showSocialButtons() {

    var html =
              '<div id="social-buttons" class="fade">'
            + '<div class="fb-like" data-href="YOUR_URL" data-send="true" data-layout="box_count" data-width="50" data-show-faces="true" data-colorscheme="dark"></div>'
            + '<div class="g-plusone-frame"><div class="g-plusone" data-size="tall" data-href="YOUR_URL"></div></div>'
            + '<a href="https://twitter.com/share" class="twitter-share-button" data-url="YOUR_URL" data-text="YOUR_APP_DESCRIPTION" data-count="vertical">Tweet</a>'
            + '<div id="fb-root"></div>'
            + '</div>';
    document.getElementById( 'viewport' ).insertAdjacentHTML( 'beforeEnd', html );

    var script = document.createElement( 'script' );
    script.async = true;
    script.src = document.location.protocol + '//connect.facebook.net/en_US/all.js#xfbml=1&appId=YOUR_FB_APP_ID';
    document.getElementById( 'fb-root' ).appendChild( script );

    script = document.createElement( 'script' );
    script.async = true;
    script.src = document.location.protocol + '//platform.twitter.com/widgets.js';
    document.getElementById( 'social-buttons' ).appendChild( script );

    script = document.createElement( 'script' );
    script.async = true;
    script.src = document.location.protocol + '//apis.google.com/js/plusone.js';
    document.getElementById( 'social-buttons' ).appendChild( script );

    window.setTimeout( function () {

        document.getElementById( 'social-buttons' ).removeAttribute( 'class' );

    }, 4000 ); //4 second delay

}; 
```

### CSS

```
#social-buttons {
    height: 300px;
    transition:             opacity 1000ms ease;
        -moz-transition:    opacity 1000ms ease;
        -ms-transition:     opacity 1000ms ease;
        -o-transition:      opacity 1000ms ease;
        -webkit-transition: opacity 1000ms ease;
    width: 90px;
}

.fb-like,
.g-plusone-frame {
    margin: 10px 0 10px 3px;   
}

.g-plusone-frame {
    display: inline-block;
}

.twitter-share-button {
    margin: 10px 0;
}

.fade {
    opacity: 0 !important;
} 
```

### HTML

```
<div id="viewport"></div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T22:01:06.040

查看[ShareThis](http://sharethis.com/)。它允许您轻松地将这些按钮添加到您的应用程序中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-27T13:45:17.243

我目前正在使用[这个插件](https://github.com/EddyVerbruggen/SocialSharing-PhoneGap-Plugin)在 Cordova 2.5+ 中共享选项。

它适用于 Android 和 iOS

# c++ - Qt - 序列化树结构（很多指针）

> ID：11639935
> 
> 赞同：0
> 
> 时间：2012-07-24T21:57:36.223
> 
> 标签：c++, qt, serialization, qt4, tree

我有一个有很多指针的树结构，基本上树的一个节点是这样的

```
class Node
{
   Node *my_father;
   QVector<Node*> my_children;

  ... a lot of data
} 
```

我需要所有这些指针来使我在 RAM 内存中的工作更轻松。但现在我需要将所有树结构保存在磁盘上。我正在考虑使用 QDataStream 序列化（http://www.developer.nokia.com/Community/Wiki/Qt_Object_Serialization）。但我不认为这是将使用指针.. 对吗？

您建议将这个大结构保存在磁盘上并在指针工作的情况下将其重新读入 RAM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:26:32.247

为什么不使用 XML 格式？它的设计非常易于与所有结构化数据、嵌套对象（如您使用的树结构）一起使用。但是您不想在其中存储指针 - 只是实际数据。（存储在指针中的描述树结构的数据本身将成为 XML 结构，因此您不需要它们）。

然后，当您为某个节点分配新的子节点时，您需要在文件读取期间重新创建指针。

顺便说一句，很抱歉做出这个答案而不发表评论，但我还不能写问题评论；]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T22:20:00.373

显然，不能保证从磁盘读取的指针永远是有效的。但是您仍然可以将它们用作“整数 ID”，如下所示。要写入，请将指针与其余数据一起保存到磁盘。此外，对于每个类实例，将其自己的地址保存到磁盘。这将是该对象的“整数 ID”。读书，

1）使用保存的整数ID信息将每个对象与它的孩子和父亲相关联。最初，您可能必须将所有`Node`s 读入一个大列表。

2）然后一旦孩子，父亲在记忆中分别将他们的*实际*地址写入`my_father`和`my_children`。

对我来说感觉有点 hacky，但我想不出更直接的方法来解决这个问题。

# c# - 系统托盘是否有我可以捕获的事件？

> ID：11639942
> 
> 赞同：0
> 
> 时间：2012-07-24T21:58:03.827
> 
> 标签：c#, windows-phone-7

我有一个透明的 SystemTray

```
SystemTray.SetOpacity(this, 0.0); 
```

在具有小标题的页面上。

当我通过按住时钟区域打开 SystemTray 项目时，SystemTray 的项目与页面标题重叠。我需要捕捉显示/隐藏 SystemTray 的事件并将我的标题向下/向上移动。

问题：系统托盘是否有我可以捕获的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:00:49.497

不.. 根据 msdn，它没有任何 SystemTray 事件[http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.systemtray(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.systemtray(v=vs.92).aspx)

# paypal - 付款完成后，PayPal 不会自动重定向到我的网站

> ID：11639943
> 
> 赞同：3
> 
> 时间：2012-07-24T21:58:13.013
> 
> 标签：paypal

由于某种原因，确认付款后，PayPal 不会重定向到我的网站。

我已经设置了自动返回并设置了一个有效的 url。

我已经设置了一个隐藏参数返回到相同的 url。

它只是向我显示了一个付款完成页面，其中包含一个返回我的网站的链接（与上面相同的 URL）。如果我点击它，它会带我回到我的网站 - 因此我知道该网址是有效的。

我只是希望这自动发生，如果我设置这些选项应该会发生什么，不是吗？

为什么paypal这么麻烦？还是我错过了令人眼花缭乱的明显？

我正在使用带有企业帐户的贝宝标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T07:33:47.420

Go to profile [website preference page](https://www.paypal.com/cgi-bin/customerprofileweb?cmd=_profile-website-payments) and turn on the auto return option.

Edit: In addition to the answer posted above, to turn on the auto return option, follow the below links:

*   Click on Profile underneath the My Account Tab
*   Click on *My Selling Tools* on the left hand side Select the update option next to

> Website preferencesReturn customers to my website after they pay with PayPal.

*   Locate the option to turn on Auto Return and proceed accordingly.

*N.B. Over the past weeks trying to implement PayPal, I have come to understand that Paypal have a very confusing website and documentation and very often you may find contradicting things. So please note that the set of links above may change at a moment's notice. - DottoreM*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-12T13:20:21.227

“网站支付偏好”自动返回 URL 功能仅适用于通过“WPS（网站支付标准）”处理的支付，即 PayPal HTML 按钮集成支付。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-12T00:15:09.690

来自@AlexSchimp 上面的评论：

> 如果用户使用信用卡或借记卡付款，并且没有登录 PayPal，它将无法正常工作。它仅在用户登录其 PayPal 帐户时才有效。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-05T11:17:59.150

```
<input type="hidden" name="return" value="http://example.com/returnurl" /> 
```

**或者**

检查这个网址：

[https://www.paypal.com/in/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside](https://www.paypal.com/in/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside)。

我希望它对你有用。

谢谢

Poonam ( [http://www.web-technology-experts-notes.in](http://www.web-technology-experts-notes.in) )

# c - 是否通过 C99 中未指定的联合进行类型双关，并且它是否已在 C11 中指定？

> ID：11639947
> 
> 赞同：64
> 
> 时间：2012-07-24T21:58:25.743
> 
> 标签：c, c99, unions, c11, type-punning

Stack Overflow 问题[Getting the IEEE Single-precision bits for a float](https://stackoverflow.com/questions/11638091/getting-the-ieee-single-precision-bits-for-a-float)的一些答案建议使用`union`结构来进行类型双关（例如：将 a 的位`float`转换为 a `uint32_t`）：

```
union {
    float f;
    uint32_t u;
} un;
un.f = your_float;
uint32_t target = un.u; 
```

但是，`uint32_t`根据 C99 标准（至少草案 n1124），工会成员的价值似乎未指定，其中第 6.2.6.1.7 节规定：

> 当一个值存储在联合类型对象的成员中时，对象表示中不对应于该成员但对应于其他成员的字节采用未指定的值。

C11 n1570 草案的至少一个脚注似乎暗示情况不再如此（见 6.5.2.3 中的脚注 95）：

> 如果用于读取联合对象内容的成员与上次用于在对象中存储值的成员不同，则将值的对象表示的适当部分重新解释为新类型中的对象表示在 6.2.6 中描述（有时称为“类型双关语”的过程）。这可能是一个陷阱表示。

但是，C99 草案中的第 6.2.6.1.7 节的文本与 C11 草案中的文本相同。

这种行为在 C99 下实际上是未指定的吗？是否已在 C11 中指定？我意识到大多数编译器似乎都支持这一点，但很高兴知道它是在标准中指定的，还是只是一个非常常见的扩展。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-24T23:09:21.527

使用 union 的类型双关语的行为从 C89 更改为 C99。C99 中的行为与 C11 相同。

正如[Wug](https://stackoverflow.com/a/11639995/1119701)在他的回答中指出的那样，C99 / C11 中允许使用类型双关语。当联合成员的大小不同时，将读取可能是陷阱的未指定值。

[在 Clive DW Feather Defect Report #257](http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_257.htm)之后的 C99 中添加了脚注：

> **最后，从 C90 到 C99 的变化之一是取消了当最后一个商店指向不同的商店时访问联合的一个成员的任何限制。**基本原理是行为将取决于值的表示。由于这一点经常被误解，因此可能值得在标准中明确说明。
> 
> [...]
> 
> 为了解决关于“类型双关”的问题，在 6.5.2.3#3 中的“命名成员”一词上附加一个新的脚注 78a： 78a 如果用于访问联合对象内容的成员与最后一个成员不同用于在对象中存储值，该值的对象表示的适当部分被重新解释为新类型中的对象表示，如 6.2.6 所述（有时称为“类型双关语”的过程）。这可能是一个陷阱表示。

[C 委员会缺陷报告 #283](http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_283.htm)的回答中接受了 Clive DW Feather 的措辞作为技术勘误。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-24T22:46:16.420

最初的 C99 规范没有说明这一点。

C99 的一项技术勘误（我认为是 TR2）添加了脚注 82 以纠正这一疏忽：

> 如果用于访问联合对象内容的成员与最后用于在对象中存储值的成员不同，则该值的对象表示的适当部分将被重新解释为新类型中的对象表示在 6.2.6 中描述（有时称为“类型双关语”的过程）。这可能是一个陷阱表示。

该脚注保留在 C11 标准中（它是 C11 中的脚注 95）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-18T22:48:34.857

这一直是“不确定的”。正如其他人所指出的，通过技术更正向 C99 添加了脚注。内容如下：

> 如果用于访问联合对象内容的成员与上次用于在对象中存储值的成员不同，则该值的对象表示的适当部分被重新解释为新类型中的对象表示在 6.2.6 中描述（有时称为“类型双关语”的过程）。这可能是一个陷阱表示。

但是，前言中的脚注被指定为非规范性的：

> 附录 D 和 F 构成本标准的规范性部分；附件 A、B、C、E、G、H、I、J、参​​考书目和索引仅供参考。根据 ISO/IEC 指令的第 3 部分，**本前言、引言、注释、脚注和示例也仅供参考**。

也就是说，脚注不能禁止行为；他们只应澄清现有案文。这是一个不受欢迎的意见，但上面引用的脚注在这方面实际上是失败的——规范文本中没有禁止这种行为。确实有矛盾的部分，比如6.7.2.1：

> ... 最多一个成员的值可以随时存储在联合对象中

结合 6.5.2.3（关于使用“.”操作符访问联合成员）：

> 该值是命名成员的值

即如果只能存储一个成员的值，则另一个成员的值不存在。这强烈暗示*不*应该通过联合进行类型双关语；成员访问产生一个不存在的值。C11 文档中仍然存在相同的文本。

但是，很明显，添加脚注的目的是为了允许使用双关语；只是委员会似乎违反了不包含规范性文本的脚注规则。要接受脚注，你真的必须忽略脚注不是规范性的部分，或者试图弄清楚如何以支持脚注结论的方式解释规范性文本（我已经尝试过，并且失败，做）。

我们可以做的最好的批准脚注是对联合的定义做出一些假设，即从 6.2.5 开始的一组“重叠对象”：

> 联合类型描述了一组重叠的非空成员对象，每个成员对象都有一个可选的指定名称和可能的不同类型

不幸的是，没有详细说明“重叠”的含义。对象被定义为（3.14）“执行环境中的数据存储区域，其内容可以表示值”（*相同*的存储区域可以由两个或多个*不同的*对象标识，这由“重叠对象”暗示” 上面的定义，即对象具有与其存储区域分开的标识）。合理的假设似乎是（特定联合实例的）联合成员使用相同的存储区域。

即使我们忽略 6.7.2.1/6.5.2.3 并允许，如脚注所示，读取任何联合成员返回将由相应存储区域的内容表示的值——因此将允许类型双关——永远- 6.5 中的有问题的严格别名规则不允许（除了某些次要例外）访问不是按其类型的对象。由于“访问”是（3.1）“<执行时动作>读取或修改对象的值”，并且由于修改一组重叠对象中的一个必然会修改其他对象，因此严格混叠规则可以写给工会成员可能会违反（不管它是否被另一个人阅读）。

例如，根据标准的措辞，以下内容是非法的：

```
union {
   int a;
   float b;
} u;

u.a = 0; // modifies a float object by an lvalue of type int
int *pa = &u.a;
*pa = 1; // also modifies a float object, without union lvalue involved 
```

（具体来说，这两条注释行打破了严格的混叠规则）。

严格来说，脚注涉及一个单独的问题，即阅读不活跃的工会成员。然而，严格别名规则与上面提到的其他部分一起严重限制了它的适用性，特别是意味着它通常不允许类型双关语（但仅适用于特定的类型组合）。

令人沮丧的是，负责制定标准的委员会似乎打算通过一个联合来实现类型双关语，但似乎并不担心标准文本仍然不允许它。

还值得注意的是，（编译器供应商）的共识理解似乎是允许通过联合进行类型双关，但“必须通过联合类型访问”（例如上面示例中的第一条注释行，但不是第二条）。有点不清楚这是否应该适用于读取和写入访问，并且标准文本绝不支持（忽略脚注）。

总之：虽然通过联合的类型双关语在很大程度上被接受是合法的（大多数人认为只有当访问是“通过联合类型”完成时才允许，可以这么说），标准的措辞几乎禁止它琐碎的案例。

您引用的部分：

> 当一个值存储在联合类型对象的成员中时，对象表示中不对应于该成员但对应于其他成员的字节采用未指定的值。

......不过，必须仔细阅读。*“与该成员不对应*的对象表示的字节”是指超出成员大小的字节，这本身不是类型双关语的问题（除非您不能假设写入联合成员会离开任何较大成员的“额外”部分未触及）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T22:02:25.347

> 但是，这似乎违反了 C99 标准（至少是 n1124 草案），其中第 6.2.6.1.7 节规定了一些内容。这种行为在 C99 下实际上是未指定的吗？

不，你很好。

> 当一个值存储在联合类型对象的成员中时，对象表示中不对应于该成员但对应于其他成员的字节采用未指定的值。

这适用于不同大小的数据块。即，如果您有：

```
union u
{
    float f;
    double d;
}; 
```

如果你给 f 赋值，它会改变 d 的低 4 字节，但高 4 字节将处于不确定状态。

联合主要用于类型双关语。

# freebase - 关于freebase中位置的相关信息总是空的？

> ID：11639948
> 
> 赞同：1
> 
> 时间：2012-07-24T21:58:39.227
> 
> 标签：freebase

我正在尝试查询 freebase 以查找有关特定城市的信息。

我能够找到我正在寻找的城市，但我需要获取描述内容以及一些图片。

我目前的查询是

```
[{
  "name":   "san francisco",
  "id":     null,
  "type":   "/location/citytown",
  "/location/location/geolocation" : [
    {
      "latitude": null,
      "longitude": null,
      "latitude>" : 36,
      "latitude<" : 38 }]
  "/common/topic/article" : [{ "id" : null, "content": null }],
  "/common/topic/image" : [{
   "id" : null,
   "optional" : true,
   "limit" : 15
  "image_caption" : []
  }]
}] 
```

哪个返回

```
{
  "code":          "/api/status/ok",
  "result": [{
    "/common/topic/article": [{
      "content": null,
      "id":      "/m/0d6l_"
    }],
    "/common/topic/image": [
      {
        "id":            "/m/02929wx",
        "image_caption": []
      },
      {
        "id":            "/m/04j74y4",
        "image_caption": []
      },
      {
        "id":            "/m/04j74yh",
        "image_caption": []
      },
      {
        "id":            "/m/04j74yw",
        "image_caption": []
      },
      {
        "id":            "/m/04j74z6",
        "image_caption": []
      }
    ],
    "/location/location/geolocation": [{
      "latitude":  37.775,
      "longitude": -122.4183
    }],
    "id":   "/en/san_francisco",
    "name": "San Francisco",
    "type": "/location/citytown"
  }],
  "status":        "200 OK",
  "transaction_id": "cache;cache03.p01.sjc1:8101;2012-07-24T21:50:06Z;0029"
} 
```

我无法获取要设置的内容值和标题。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:18:52.133

您在哪里找到“image_caption”属性？如果将其切换为“名称”，您应该获得图像的名称（在某些 UI 上下文中用作标题）。

文本内容不可从 MQL 获得，但您可以使用为文章返回的 ID 从旧 API 中的 BLOB 服务或新 API 中的文本 API 获取它。例如[https://www.googleapis.com/freebase/v1/text/m/0d6l_](https://www.googleapis.com/freebase/v1/text/m/0d6l_)

ps 如果您只想要主图像，您可以考虑使用主题 API，它会在一次调用中返回图像、名称、文本简介和一堆其他信息。 [https://www.googleapis.com/freebase/v1/topic/wikipedia/en_id/49728](https://www.googleapis.com/freebase/v1/topic/wikipedia/en_id/49728)

使用 Search API 将为您提供更可靠的名称匹配，并为您提供一个分数，该分数将告诉您查询不明确的可能性有多大（如果您获得多个匹配的分数彼此接近）。 [https://www.googleapis.com/freebase/v1/search?query=%22san%20francisco%22&type=/location/citytown](https://www.googleapis.com/freebase/v1/search?query=%22san%20francisco%22&type=/location/citytown)

# asp.net-mvc - MVC 重定向操作结果

> ID：11639950
> 
> 赞同：1
> 
> 时间：2012-07-24T21:58:47.317
> 
> 标签：asp.net-mvc, actionresult

在 MVC 控制器上，我有以下内容：

```
public virtual ActionResult Test() {
  ActionResult result = MVC.Home.Index();
  return RedirectToAction(result);
  return View();
} 
```

这重定向到结果。视图永远不会返回。

现在我需要做如下事情：

```
public virtual ActionResult Test() {
  ActionResult result = MVC.Home.Index();
  MyClass.RedirectTo(result, this);
  return View();
} 
```

其中 MyClass.RedirectTo 方法如下：

```
public static void RedirectTo(ActionResult result, Controller controller) {
  controller.Response.Redirect(result.ToString());            
} 
```

但在这种情况下，重定向不会发生。

返回视图。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-18T06:43:43.020

嗨，您必须重定向到特定控制器上的特定操作

例如 return RedirectToAction("Index", "ControllerName");

# python - Django：多态外键关系

> ID：11639955
> 
> 赞同：2
> 
> 时间：2012-07-24T21:59:05.973
> 
> 标签：python, django, django-models

我正在 Django 中开发一种社交网络，但我看不到保持模型耦合的方法。

我有一个模型`User`，它可以通过模型评论其他用户、图片、页面（大写是因为它们是模型）`Comment`。为了安排所有评论，我创建了 Board 模型，它有一个所有者并接收所有针对该所有者的评论。问题是我不知道它的所有者如何，即它属于哪个型号。它可以是图片板，也可以是用户的板。所以我最终得到了这样的模型：

```
class Board(models.Model):
   category = models.IntegerField()
   owner_id = models.IntegerField() 
```

我存储所有者的 ID 和所有者的类别以便能够执行其他任务，但这个解决方案根本无法说服我。一位朋友建议我使用抽象类`Board`，然后创建一个继承自的`UserBoard`, `PicBoard`，但我认为这也没用。我想过，但我不确定这是否是实现我正在尝试的正确方法。任何建议都会被听取和考虑，感谢您的帮助:)`PageBoard``Board``GenericRelations`

**PS：**哦，对不起，如果标题不是很具有描述性，但我想不出更好的。这个问题很难解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:09:58.460

# 选项1

创建一个类`BoardOwner`。让所有具有板子的模型都继承自该板子，并让板子与`BoardOwner`. 然后，您需要扫描各种子链接以确定哪个是“真正的”子链接。这更加繁琐，但将所有复杂性本地化在一个类中。

# 选项 2

每个班级都有一个外键，每个班级都有一个董事会。如果您总是有板通过所有者上的方法进入您的系统（而不是查询`Board`或其他地方），您可以在所有者中拥有代码，让`Board`知道使用哪个外键反向关系。您可能希望将该代码分解到它自己的类中。

# 选项 3

使用`contenttypes`：[https ://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)

这结束了这种事情。

# sql - 如何从 CHANGETABLE 中删除一行？

> ID：11639956
> 
> 赞同：3
> 
> 时间：2012-07-24T21:59:16.883
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用更改跟踪功能，我可以通过以下方式查看更改历史记录：

```
select * from CHANGETABLE 
```

现在我想从中删除一行[`CHANGETABLE`](http://msdn.microsoft.com/en-us/library/bb934145.aspx)。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T22:13:51.307

设置[更改跟踪](http://msdn.microsoft.com/en-us/library/bb933875)时，您可以指定保留期和清理选项：

```
ALTER DATABASE AdventureWorks2012
SET CHANGE_TRACKING = ON
(CHANGE_RETENTION = 2 DAYS, AUTO_CLEANUP = ON); 
```

如果启用了自动清理，则保留期到期后，数据将从 CHANGETABLE 中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T01:48:41.683

由于更改跟踪表是系统表，我们不能像在普通表中那样从中删除行。所以唯一的方法是重置更改跟踪表。

# javascript - 在 Fancybox 中加载 Twitter 推文按钮对话框

> ID：11639962
> 
> 赞同：1
> 
> 时间：2012-07-24T21:59:55.823
> 
> 标签：javascript, jquery, twitter, fancybox, fancybox-2

[我正在尝试使用Twitter 推文按钮](https://dev.twitter.com/docs/tweet-button)的iframe 样式打开一个性感的花式对话框。

```
(function () {

    // Fancybox Options for IFrame
    var fancybox_params = {
        'padding': 0,
        'autoScale': false,
        'transitionIn': 'none',
        'transitionOut': 'none',
        'width': 680,
        'height': 400,
        'type': 'iframe'
    };

    // Twitter
    var twitter_params = fancybox_params;
    twitter_params.title = 'Twitter';
    twitter_params.href = 'twitter.com/share?' +
        'url=https%3A%2F%2Fdev.twitter.com%2Fpages%2Ftweet-button';
    $('#social_twitter').fancybox(twitter_params);

}); 
```

然后一点...

```
<a id="social_twitter" href="javascript:void(0)">Twa-twa-twa-tweet me homes</a> 
```

我只是得到一个加载动画。使用[fancybox 2.0.6](http://fancyapps.com/fancybox/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:26:19.580

您应该将“ `http://`”放在外部 URL 的开头。

但我认为实际的问题是，

```
"twitter doesn't allow itself to be embedded via iframe." 
```

[来自@andrew_ohlmann 的回答](http://support.cargocollective.com/discussion/10606/embed-twitter-site-with-iframe/p1)

所以这意味着你无法做到。

# ios - iOS 5 拆分视图控制器

> ID：11639963
> 
> 赞同：0
> 
> 时间：2012-07-24T22:00:11.137
> 
> 标签：ios, uitableview, ios5, uisplitviewcontroller

我熟悉 iPad 的拆分视图控制器，但我想知道是否有办法拥有两个级别。我想要的是一个标签栏，我可以在其中选择一个类别。然后在拆分视图的左侧显示的是一个子类别，然后当我选择它时，我想在适合这两个的表视图中显示项目。一旦用户选择了一个项目，则拆分视图的右侧将显示有关该项目的详细信息。

这可以做到吗？如果是这样，一个例子将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:09:11.217

您绝对可以深入查看拆分视图左侧的表视图控制器。主视图控制器通常由导航控制器包装，因此您可以简单地推送新的表视图，直到到达最低级别的类别，然后让它更新细节。

# php - SimpleXMLElement 数组检索问题

> ID：11639964
> 
> 赞同：0
> 
> 时间：2012-07-24T22:00:11.887
> 
> 标签：php, simplexml

如何从下面的对象获取数组内的 Cxyabc、Cxy123 和 Cxy234？

```
$xml_element = simplexml_load_string($xml,null, LIBXML_NOCDATA);
$childId = $xml_element->Parent->ChildID;

print_r(childId);

SimpleXMLElement Object (
    [@attributes] => Array (
        [entity] => result 
        [order-value] => 1
    )
    [0] => Cxyabc
    [1] => Cxy123
    [2] => Cxy234
) 
```

感谢您的回答，我尝试了以下一个并且工作正常。字符串转换是必要的。

```
$test = array();
foreach($childId as $value){
    $strValue = (string)$value;
array_push($test,$strValue);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:09:03.557

尝试：

```
$cxyabc = $obj->{0};
$cxy123 = $obj->{1}; 
```

的使用`{ }`是必要的，因为对象属性不能以数字开头，因此`$obj->0`无效。

您将使用数组表示法访问属性：

```
$entity = $obj['entity']; 
```

# ruby-on-rails-3 - Rails 3 Twitter Anywhere 的个人资料链接？

> ID：11639967
> 
> 赞同：0
> 
> 时间：2012-07-24T22:00:23.467
> 
> 标签：ruby-on-rails-3, twitter, twitter-anywhere

我使用 Twitter Widget 的时间最长，但我希望将其提升一个级别并添加额外的样式和过滤。最近我开始使用 Rails [Twitter Gem](http://twitter.rubyforge.org/)，到目前为止一切都很好，但我希望能够链接回任何`@username`出现的个人资料。

环顾四周，似乎[Twitter Anywhere](https://dev.twitter.com/docs/anywhere/welcome)是要走的路，但我想知道在 Rails 环境中是否有更好的实现？也许是加载所需 JS 文件并提供辅助方法的 gem？

另外我应该注意，我不一定需要任何地方 api 提供的所有功能，目前我的主要重点只是提供@username 链接（尽管有未来扩展的选项当然很好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:35:41.060

It turns out that Twitter Anywhere might have been a little overkill for what I was trying to do. All I really needed was the following helper method as mentioned [here](https://stackoverflow.com/questions/2034580/i-am-creating-a-twitter-clone-in-ruby-on-rails-how-do-i-code-it-so-that-the)

```
def linkup_mentions_and_hashtags(text)    
  text.gsub!(/@([\w]+)(\W)?/, '<a href="http://twitter.com/\1">@\1</a>\2')
  text.gsub!(/#([\w]+)(\W)?/, '<a href="http://twitter.com/search?q=%23\1">#\1</a>\2')
  text
end 
```

# javascript - 动态创建控件时如何使用 .data()？

> ID：11639969
> 
> 赞同：1
> 
> 时间：2012-07-24T22:00:27.383
> 
> 标签：javascript, jquery, asp.net, .net-3.5, dynamic-controls

我正在创建一个用户控件，它将动态创建一系列 html 元素。其中一些控件将是数据库驱动的级联下拉菜单。我已经看到在示例中建议并使用 JQuery [.data()](http://api.jquery.com/data/)方法来存储有关控件的附加数据，但我不知道如何在动态创建的元素上实现它。

我以这种方式添加元素：

```
new LiteralControl(@"<select onchange=""DoSomething()""></select>") 
```

那么，如何在这些新创建的元素上使用 .data() 以便在创建它们时存储附加数据？我想使用自定义属性，但我认为它没有得到广泛支持，并且在旧版浏览器中可能会出现问题。

我对网络东西很陌生，所以如果我没有很好地解释某些事情，一定要告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:03:23.623

如果您在创建元素时知道元素应该存储哪些数据，则可以使用`data-*`属性。

```
new LiteralControl(@"<select data-id="1" onchange=""DoSomething()""></select>") 
```

# java - 在活动组中使用 EditText

> ID：11639970
> 
> 赞同：0
> 
> 时间：2012-07-24T22:00:38.553
> 
> 标签：java, android, android-tabhost, activitygroup

在我的应用程序中，我使用的是 tabhost。为了控制不同的活动，我正在使用活动组。我有活动 A，我将从活动 B 开始。活动 B 包含编辑文本、微调器、按钮等。现在，当我滚动活动 B 并按下设备后退按钮时，它不会转到上一个活动。它退出应用程序。请提出答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:32:07.073

这就是 Activity 生命周期适用于 Activity Group 的方式。尝试在您的 tabhost 中使用片段而不是活动组来获取您的动作。此外，请编辑您的问题标题以更准确地反映实际问题。

# python - 绘制精灵时，openGL/Pyglet 纹理图形消失

> ID：11639977
> 
> 赞同：1
> 
> 时间：2012-07-24T22:01:09.610
> 
> 标签：python, opengl, pyglet

我的代码绘制了一个 3D 世界，上面有一组 2D 图形。3D 世界由带纹理的四边形组成，并且使用以下代码生成纹理：

```
textures = []

image = pyglet.image.load(os.path.join(img_dir, "magic.png"))

textures.append(image.get_texture())

glEnable(textures[-1].target)
glBindTexture(textures[-1].target, textures[-1].id)
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, image.width, image.height,
    0, GL_RGBA, GL_UNSIGNED_BYTE,
    image.get_image_data().get_data('RGBA',
    image.width * 4)) 
```

然后绘制四边形（其他两个只有不同的坐标）：

```
glBindTexture(texture.target, texture.id)
glBegin(GL_QUADS)
glTexCoord2f(0.0, 0.0); glVertex3f(4.0, -2.0, 100.0+self.clock)
glTexCoord2f(1.0, 0.0); glVertex3f(4.0, -2.0, -100.0+self.clock)
glTexCoord2f(1.0, 1.0); glVertex3f(-4.0,  -2.0, -100.0+self.clock)
glTexCoord2f(0.0, 1.0); glVertex3f(-4.0,  -2.0, 100.0+self.clock)
glEnd() 
```

我在绘制 3D 和 2D 图形时设置了正确的参数，当我在 3D 四边形（使用以下代码）顶部绘制 2D 三角形时，一切正常：

```
glBegin(GL_TRIANGLES)
glVertex3f(0.0, 10, 0.0)
glVertex3f(-10, -10, 0)
glVertex3f(10, -10, 0)
glEnd() 
```

![工作纹理](../Images/004ce2d91d6e3866fd99284c8e953181.png)

然而，然后我尝试绘制一个精灵，3D 四边形失去了它们的纹理并被绘制为白色。

```
self.spr=pyglet.sprite.Sprite(pyglet.image.load(os.path.join(img_dir, "largebullet.png")).get_texture())
...
self.spr.draw() 
```

![破碎的纹理](../Images/7d3717823d9faf2225cb0ec1292ecee0.png) 请注意，背景中有一些雾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:36:37.000

我找到了一个解决方案，方法是在绘制后对启用的纹理运行 glDisable(texture.target)。这并不理想，因为它们必须再次重新启用，但现在它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:01:43.957

我遇到了与此类似的问题，我发现 pyglet`Sprite`类倾向于禁用它设置的 OpenGL 状态中的所有内容。每次绘制任何精灵时，您都必须重置很多东西。

# android - SurfaceView（相机预览）在屏幕开/关后变黑

> ID：11639979
> 
> 赞同：0
> 
> 时间：2012-07-24T22:01:26.673
> 
> 标签：android

我试图理解有趣的事情。我用 SurfaceView 和 Button 做了简单的应用程序。SurfaceView 显示相机预览和按钮拍摄图片。一切都很顺利，除了一瞬间：

如果我按下主页按钮，我的应用程序进入后台，好的，然后我关闭/打开屏幕，然后我点击应用程序图标，我的应用程序移动到前台，一切正常，我再次看到预览相机。但是如果我关闭/打开屏幕而不将我的应用程序移动到背景，那么我会看到没有相机的黑色预览并且无法制作任何照片。

拜托，帮助，我打破了我的大脑:)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:33:23.117

是否有可能活动正在被破坏，但相机现在仍然“锁定”，所以甚至相机应用程序都无法显示它的预览？

无论如何，您应该在 onPause 时停止预览相机（并在 onDestroy 时释放它）并在需要时恢复它。

# ruby-on-rails-3 - 映射 ActiveRecord 对象以创建新对象

> ID：11639980
> 
> 赞同：0
> 
> 时间：2012-07-24T22:01:31.797
> 
> 标签：ruby-on-rails-3, oop

我正在寻找关于如何做我过去多次想做的事情的建议，这让我相信有一种设计模式（可能是一个宝石或例子）来告诉我如何做我想做的事情达到。

我目前在*Rails*中从事一个涉及多种订单类型的项目。例如，我有一个需要生成发货的基本订单。订单中的数据需要*“映射”*到新创建的货件。（非常简短的例子：）

> `Order`
> - 从：纽约
> - 到：洛杉矶
> - shipping_type：联邦快递
> 
> `Shipment`
> - 从：洛杉矶
> - 到：纽约
> - shipping_type：联邦快递

*Order*和*Shipment*将具有几乎相同的字段，细微差别之一是“ *from* ”和“ *to* ”字段切换。在现实世界中，这些对象中的每一个都有很多很多的领域。还有很多其他类型的订单需要有“*地图*”。

为了保持*DRY*的兴趣，有没有办法在这些订单之间创建映射，以便我可以最大限度地减少我必须编写`generate_order_from(order)`方法的次数？

**编辑：我正在尝试创建一个类似于[RestKit 的 Object Mapping](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)的方法。我只是在 Ruby 中找不到类似的东西。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:36:44.667

> 订单和装运将具有几乎相同的字段……在现实世界中，这些对象中的每一个都有很多很多的字段。

也许这是你的问题？如果您有这么多字段，并且其中大多数在订单和发货中相同，您应该将公共字段拉入一个由订单和发货共享的单独对象（在数据库中，这相当于规范化您的表）。然后您只需要映射实际更改的字段（例如切换`from`和`to`字段）。

# php - 在php中转义到bb代码

> ID：11639981
> 
> 赞同：0
> 
> 时间：2012-07-24T22:01:36.317
> 
> 标签：php, bbcode

我如何使用 bb 代码 url [url[/url] 并将其保存在 php 中的变量中？换句话说，我想将一些 bb 代码存储到 php 变量中，如何转义到其中？

像这样的东西

```
$myvariable = 'Please like us on Facebook [url=http://facebook/page]text[/url]' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:02:40.620

我会调查这个： http: [//nbbc.sourceforge.net/](http://nbbc.sourceforge.net/)

它是我在我的网站上使用的 BBCode 解析器 :)

如果不是，您可以将正则表达式与 preg_replace() 一起使用，但我会认真建议上述解决方案，这样您就不必担心安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:05:36.720

这应该可以，根据您的喜好对其进行更改，但是语法在这里。

```
$str = "Please like us on Facebook [url=http://facebook/page]text[/url]"

$pattern = "/\[url=(.*)\](.+)\[\/url\]/Usi";
$replace = "<a href='\\1' target='_blank'>\\2</a>");
$str = preg_replace($pattern,$replace,$str); 
```

# java - 尝试使用标准差java

> ID：11639987
> 
> 赞同：0
> 
> 时间：2012-07-24T22:01:59.333
> 
> 标签：java, math

嗨，我正在尝试使用 Apache Commons Math 的标准偏差库。我无法导入该库，因为下载 zip 后我找不到 jar 文件。我是否遗漏了一些太明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:13:49.110

打开[下载 Commons Math](http://commons.apache.org/math/download_math.cgi)页面并下载当前的二进制文件版本。目前这是 commons-math3-3.0-bin.zip。从您的评论中，很明显您下载了包含源的存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:04:43.197

1.  解压缩 zip 文件[7zip 非常适合解压缩东西](http://www.7-zip.org/)

2.  确保 jar 在编译器的构建路径中 [如何在 Eclipse 中将 Jars 添加到构建路径中](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

3.  利润？？？

你确定 jar 在类路径中吗？

[我在这里看到了罐子，从这里下载](http://archive.apache.org/dist/commons/math/binaries/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T22:15:55.410

获得一个构建+依赖管理工具，你就不会遇到这样的问题。我建议您使用 apache buildr ( [quick start](http://buildr.apache.org/quick_start.html#first-project) ) 和这样的 buildr 文件：

```
repositories.remote << 'http://www.ibiblio.org/maven2'

define 'killer-app' do
  project.version = '0.1.0'
  compile.with 'org.apache.commons:commons-math:jar:2.0'
  package :jar
end 
```

# android - Android：无法解析 Lcom/android/vending/expansion/downloader/R$string 中的静态字段 65 (state_unknown)；

> ID：11639988
> 
> 赞同：2
> 
> 时间：2012-07-24T22:02:06.547
> 
> 标签：android, noclassdeffounderror, dalvik, expansion

我收到上面提到的警告（除了其他类似的警告），然后是一个错误：

```
java.lang.NoClassDefFoundError: com.android.vending.expansion.downloader.R$string 
```

我在这里运行第二行后立即收到此错误：（我正在使用 Apk 扩展、下载器、zip 和许可库）

```
public void onServiceConnected(Messenger m) {
    Log.i("Main Activity - APK Downloader", "SERVICE CONNECTED!!!");
    mRemoteService = DownloaderServiceMarshaller.CreateProxy(m); // ERROR!
    mRemoteService.onClientUpdated(mDownloaderClientStub.getMessenger());
} 
```

从我的日志中提取：

```
07-20 11:31:16.371: I/dalvikvm(752): Could not find method android.os.Bundle.getString, referenced from method com.android.vending.expansion.zipfile.APEZProvider.initIfNecessary
07-20 11:31:16.371: W/dalvikvm(752): VFY: unable to resolve virtual method 340: Landroid/os/Bundle;.getString (Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
07-20 11:31:16.371: D/dalvikvm(752): VFY: replacing opcode 0x6e at 0x003e
07-20 11:31:16.381: D/dalvikvm(752): VFY: dead code 0x0041-005c in Lcom/android/vending/expansion/zipfile/APEZProvider;.initIfNecessary ()Z
07-20 11:31:16.381: D/dalvikvm(752): VFY: dead code 0x0070-0076 in Lcom/android/vending/expansion/zipfile/APEZProvider;.initIfNecessary ()Z
07-20 11:31:16.582: D/dalvikvm(752): GC_EXTERNAL_ALLOC freed 75K, 48% free 2819K/5379K, external 1625K/2137K, paused 50ms
07-20 11:31:16.931: D/szipinf(752): Initializing inflate state
07-20 11:31:17.421: D/dalvikvm(752): GC_EXTERNAL_ALLOC freed 9K, 48% free 2830K/5379K, external 7801K/7819K, paused 47ms
07-20 11:31:21.091: W/dalvikvm(752): VFY: unable to resolve static field 65 (state_unknown) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.091: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0003
07-20 11:31:21.101: W/dalvikvm(752): VFY: unable to resolve static field 57 (state_idle) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.101: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0006
07-20 11:31:21.111: W/dalvikvm(752): VFY: unable to resolve static field 56 (state_fetching_url) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.111: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0009
07-20 11:31:21.121: W/dalvikvm(752): VFY: unable to resolve static field 50 (state_connecting) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.121: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x000c
07-20 11:31:21.131: W/dalvikvm(752): VFY: unable to resolve static field 51 (state_downloading) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.131: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x000f
07-20 11:31:21.142: W/dalvikvm(752): VFY: unable to resolve static field 49 (state_completed) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.142: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0012
07-20 11:31:21.161: W/dalvikvm(752): VFY: unable to resolve static field 60 (state_paused_network_unavailable) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.161: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0015
07-20 11:31:21.161: W/dalvikvm(752): VFY: unable to resolve static field 58 (state_paused_by_request) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.161: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0018
07-20 11:31:21.171: W/dalvikvm(752): VFY: unable to resolve static field 63 (state_paused_wifi_disabled) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.171: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x001b
07-20 11:31:21.181: W/dalvikvm(752): VFY: unable to resolve static field 64 (state_paused_wifi_unavailable) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.181: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x001e
07-20 11:31:21.201: W/dalvikvm(752): VFY: unable to resolve static field 63 (state_paused_wifi_disabled) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.201: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0021
07-20 11:31:21.210: W/dalvikvm(752): VFY: unable to resolve static field 64 (state_paused_wifi_unavailable) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.210: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0024
07-20 11:31:21.210: W/dalvikvm(752): VFY: unable to resolve static field 61 (state_paused_roaming) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.210: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0027
07-20 11:31:21.221: W/dalvikvm(752): VFY: unable to resolve static field 59 (state_paused_network_setup_failure) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.221: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x002a
07-20 11:31:21.231: W/dalvikvm(752): VFY: unable to resolve static field 62 (state_paused_sdcard_unavailable) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.231: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x002d
07-20 11:31:21.251: W/dalvikvm(752): VFY: unable to resolve static field 55 (state_failed_unlicensed) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.251: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0030
07-20 11:31:21.262: W/dalvikvm(752): VFY: unable to resolve static field 53 (state_failed_fetching_url) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.262: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0033
07-20 11:31:21.281: W/dalvikvm(752): VFY: unable to resolve static field 54 (state_failed_sdcard_full) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.281: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0036
07-20 11:31:21.291: W/dalvikvm(752): VFY: unable to resolve static field 52 (state_failed_cancelled) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:21.291: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0039
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0005-0005 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0008-0008 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x000b-000b in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x000e-000e in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0011-0011 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0014-0014 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0017-0017 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x001a-001a in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x001d-001d in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0020-0020 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0023-0023 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0026-0026 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.291: D/dalvikvm(752): VFY: dead code 0x0029-0029 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.301: D/dalvikvm(752): VFY: dead code 0x002c-002c in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.301: D/dalvikvm(752): VFY: dead code 0x002f-002f in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.301: D/dalvikvm(752): VFY: dead code 0x0032-0032 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.301: D/dalvikvm(752): VFY: dead code 0x0035-0035 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.301: D/dalvikvm(752): VFY: dead code 0x0038-0038 in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:21.301: D/dalvikvm(752): VFY: dead code 0x003b-003b in Lcom/google/android/vending/expansion/downloader/Helpers;.getDownloaderStringResourceIDFromState (I)I
07-20 11:31:23.101: W/dalvikvm(752): VFY: unable to resolve static field 65 (state_unknown) in Lcom/android/vending/expansion/downloader/R$string;
07-20 11:31:23.101: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0079
07-20 11:31:23.121: D/dalvikvm(752): VFY: dead code 0x007b-007c in Lcom/google/android/vending/expansion/downloader/impl/DownloadNotification;.onDownloadStateChanged (I)V
07-20 11:31:23.141: W/dalvikvm(752): VFY: unable to resolve static field 48 (status_bar_ongoing_event_progress_bar) in Lcom/android/vending/expansion/downloader/R$layout;
07-20 11:31:23.141: D/dalvikvm(752): VFY: replacing opcode 0x60 at 0x0022
07-20 11:31:23.141: D/dalvikvm(752): VFY: dead code 0x0024-0091 in Lcom/google/android/vending/expansion/downloader/impl/V3CustomNotification;.updateNotification (Landroid/content/Context;)Landroid/app/Notification;
07-20 11:31:23.180: D/LVLDL(752): Service Bound
07-20 11:31:31.831: I/Main Activity - APK Downloader(752): SERVICE CONNECTED!!!
07-20 11:32:09.906: D/AndroidRuntime(752): Shutting down VM
07-20 11:32:09.906: W/dalvikvm(752): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-20 11:32:09.992: E/AndroidRuntime(752): FATAL EXCEPTION: main
07-20 11:32:09.992: E/AndroidRuntime(752): java.lang.NoClassDefFoundError: com.android.vending.expansion.downloader.R$string
07-20 11:32:09.992: E/AndroidRuntime(752):  at com.google.android.vending.expansion.downloader.Helpers.getDownloaderStringResourceIDFromState(Helpers.java:268)
07-20 11:32:09.992: E/AndroidRuntime(752):  at com.google.android.vending.expansion.downloader.impl.DownloadNotification.onDownloadStateChanged(DownloadNotification.java:106)
07-20 11:32:09.992: E/AndroidRuntime(752):  at com.google.android.vending.expansion.downloader.impl.DownloaderService$LVLRunnable.run(DownloaderService.java:752)
07-20 11:32:09.992: E/AndroidRuntime(752):  at android.os.Handler.handleCallback(Handler.java:587)
07-20 11:32:09.992: E/AndroidRuntime(752):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-20 11:32:09.992: E/AndroidRuntime(752):  at android.os.Looper.loop(Looper.java:130)
07-20 11:32:09.992: E/AndroidRuntime(752):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-20 11:32:09.992: E/AndroidRuntime(752):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 11:32:09.992: E/AndroidRuntime(752):  at java.lang.reflect.Method.invoke(Method.java:507)
07-20 11:32:09.992: E/AndroidRuntime(752):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-20 11:32:09.992: E/AndroidRuntime(752):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-20 11:32:09.992: E/AndroidRuntime(752):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:14:46.673

APEZProvider`initIfNecessary()`中的类使用`getString [getString (String key, String defaultValue)]`仅在 API 12 及更高版本中可用的版本。尝试在 API 12 或更高版本上运行您的应用程序，您可能不会收到此错误。我解决此错误以在较低 API 上使用的方法是用 getString (String key) 替换函数，如果找不到键，则返回 null 并检查 null 而不是 defaultValue。

# ms-access-2007 - 将 SQL Server 2012 数据库转换为 MS Access 2010

> ID：11639990
> 
> 赞同：0
> 
> 时间：2012-07-24T22:02:12.000
> 
> 标签：ms-access-2007, sql-server-2012

我做了各种尝试。不，我做错了什么。你能建议我如何将数据从 SQL Server 导入 Access 吗？

1.  我确实从 SQL Server 导出（右键单击和任务导出）

我收到如下错误：

> 错误 0xc02020c4：数据流任务 1：尝试向数据流任务缓冲区添加行失败，错误代码为 0xC0047020。（SQL Server 导入和导出向导）

1.  我确实从 Access 导入，并尝试通过 ODBC 连接，但它也失败了。

如果有人有确切的步骤或任何转换器软件链接，那就太好了。

# android - 新的 Google Now 和 Google+ 卡片界面

> ID：11639991
> 
> 赞同：60
> 
> 时间：2012-07-24T22:02:15.253
> 
> 标签：android, android-layout, google-plus, google-now

Google Now 和 Google+ (Android) 都使用类似卡片的界面。

![在此处输入图像描述](../Images/eef3d273a76d21d044f451aa1ff94370.png)

我想知道是否有人知道如何在 Android 上复制此界面。

他们都有非常有趣的动画来展示新卡片；任何想法都会很棒。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-07T10:20:34.870

[我在此处](http://shardulprabhu.blogspot.in/2012/09/google-now-cards-layout.html)发布了有关如何复制/创建 Google Cards 样式布局的教程。

关键步骤

1.  创建自定义布局
2.  添加观察者以绘制孩子
3.  动画交替卡片

这是一个代码片段

```
@Override
public void onGlobalLayout() {
    getViewTreeObserver().removeGlobalOnLayoutListener(this);

    final int heightPx = getContext().getResources().getDisplayMetrics().heightPixels;

    boolean inversed = false;
    final int childCount = getChildCount();

    for (int i = 0; i < childCount; i++) {
        View child = getChildAt(i);

        int[] location = new int[2];

        child.getLocationOnScreen(location);

        if (location[1] > heightPx) {
            break;
        }

        if (!inversed) {
            child.startAnimation(AnimationUtils.loadAnimation(getContext(),
                    R.anim.slide_up_left));
        } else {
            child.startAnimation(AnimationUtils.loadAnimation(getContext(),
                    R.anim.slide_up_right));
        }

        inversed = !inversed;
    }

} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-15T19:38:09.933

看看[http://ryanharter.com/blog/2013/01/31/how-to-make-an-android-card-list/](http://ryanharter.com/blog/2013/01/31/how-to-make-an-android-card-list/)

示例副本：

/res/drawable/bg_card.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle"
            android:dither="true">

            <corners android:radius="2dp"/>

            <solid android:color="#ccc" />

        </shape>
    </item>

    <item android:bottom="2dp">
        <shape android:shape="rectangle"
            android:dither="true">

            <corners android:radius="2dp" />

            <solid android:color="@android:color/white" />

            <padding android:bottom="8dp"
                android:left="8dp"
                android:right="8dp"
                android:top="8dp" />
        </shape>
    </item>
</layer-list> 
```

将其用作布局的背景：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="12dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:layout_marginLeft="6dp"
        android:layout_marginRight="6dp"
        android:layout_marginTop="4dp"
        android:layout_marginBottom="4dp"
        android:background="@drawable/bg_card">

        <!-- Card Contents go here -->

    </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-16T15:53:53.753

==== 开始更新 2014-09-29 ====

使用 Google 兼容性库中的 CardView（来自 Android 2.1+）：

```
<!-- A CardView that contains a TextView -->
<android.support.v7.widget.CardView
    xmlns:card_view="http://schemas.android.com/apk/res-auto"
    android:id="@+id/card_view"
    android:layout_gravity="center"
    android:layout_width="200dp"
    android:layout_height="200dp"
    card_view:cardCornerRadius="4dp">

    <TextView
        android:id="@+id/info_text"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</android.support.v7.widget.CardView> 
```

见[https://developer.android.com/preview/material/ui-widgets.html](https://developer.android.com/preview/material/ui-widgets.html)

====结束更新====

（至少）两个选项：

*   [https://github.com/gabrielemariotti/cardslib](https://github.com/gabrielemariotti/cardslib) ![在此处输入图像描述](../Images/9d472224a1a14e52e9135374db96aa39.png)

或者

*   [https://github.com/afollestad/Cards-UI](https://github.com/afollestad/Cards-UI)是一个用于展示卡片的 UI 库。

简单介绍见[https://github.com/afollestad/Cards-UI/wiki/2.-Intro-Tutorial](https://github.com/afollestad/Cards-UI/wiki/2.-Intro-Tutorial)。 ![在此处输入图像描述](../Images/c522f3254db0222249332b3b7a837f02.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-31T00:26:43.120

我制作了一个非常相似的布局，您可以在此处查看 [https://github.com/Nammari/GooglePlusLayout](https://github.com/Nammari/GooglePlusLayout) 并在此处查看视频演示[http://youtu.be/jvfDuJz4fw4](http://youtu.be/jvfDuJz4fw4) 用于适用于儿童的动画，有关更多详细信息，请查看在这里 [http://nammari.tumblr.com/post/41893669349/goolge-plus-layout](http://nammari.tumblr.com/post/41893669349/goolge-plus-layout) 的博客文章澄清了每一件事。

![在此处输入图像描述](../Images/eaa5408c7e2bcb5027db46adfee7217e.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-16T20:05:58.467

卡片的外观和感觉应该不难。您只需要一个没有分隔线的 ListView 并且您的列表视图项目应该有一个边距。

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_margin="16dp"
    android:layout_height="wrap_content"
    android:background="@android:color/background_light">

     <TextView
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:paddingTop="16dp"
             android:paddingRight="16dp"
             android:paddingLeft="16dp"
             android:text="Title"
             android:textSize="18dp"
             android:textColor="@android:color/primary_text_holo_light"
             />

     <TextView
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:paddingRight="16dp"
             android:paddingLeft="16dp"
             android:text="Subtitle"
             android:textSize="14dp"
             android:textColor="@android:color/primary_text_holo_light"
             />

     <ImageView android:layout_marginTop="16dp" 
              android:layout_marginBottom="16dp" 
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:background="@drawable/background"/> 
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-16T17:49:25.353

有同样的需求，已经开始调查了一下。我一直在查看能够从 com.google.android.googlequicksearchbox apk 获得的 apktool 输出。（没有来源只有 res xmls）

此布局 (at_place_card.xml) 用于显示位置。它在右侧有三个文本行和两个操作按钮（详细信息和签入），在左侧有一个图像。

不幸的是，我无法从 apk 中获取任何样式信息，因此字体大小、尺寸和颜色只是猜测。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:orientation="horizontal" android:background="@drawable/card_background" android:layout_width="fill_parent" android:layout_height="wrap_content"
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:thegoogle="http://schemas.android.com/apk/res/com.google.android.googlequicksearchbox">
    <LinearLayout android:orientation="vertical" android:layout_width="0.0dip" android:layout_height="fill_parent" android:baselineAligned="false" android:layout_weight="1.0">
        <FrameLayout android:layout_width="fill_parent" android:layout_height="wrap_content">
            <LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="wrap_content" style="@style/CardTextBlock">
                <TextView android:id="@id/entry_title" android:layout_width="wrap_content" android:layout_height="wrap_content" style="@style/CardTitle" />
                <TextView android:id="@id/open_hours" android:visibility="gone" android:layout_width="wrap_content" android:layout_height="wrap_content" style="@style/CardText" />
                <TextView android:textColor="@color/card_light_text" android:id="@id/known_for_terms" android:paddingBottom="4.0dip" android:visibility="gone" android:layout_width="wrap_content" android:layout_height="wrap_content" android:maxLines="4" style="@style/CardText" />
            </LinearLayout>
            <ImageButton android:layout_gravity="top|right|center" android:id="@id/card_menu_button" android:layout_width="@dimen/card_action_button_height" android:layout_height="@dimen/card_action_button_height" android:contentDescription="@string/accessibility_menu_button" style="@style/CardMenuButton" />
        </FrameLayout>
        <Space android:layout_width="fill_parent" android:layout_height="0.0dip" android:layout_weight="1.0" />
        <Button android:id="@id/details_button" android:visibility="gone" android:layout_width="fill_parent" android:layout_height="@dimen/card_action_button_height" android:text="@string/more_details" android:drawableLeft="@drawable/ic_action_pin" style="@style/CardActionButtonWithIcon" />
        <Button android:id="@id/checkin_button" android:layout_width="fill_parent" android:layout_height="@dimen/card_action_button_height" android:text="@string/check_in" android:drawableLeft="@drawable/ic_action_check_in" style="@style/CardActionButtonWithIcon" />
    </LinearLayout>
    <com.google.android.velvet.ui.CrossfadingWebImageView android:id="@id/place_photo" android:visibility="gone" android:layout_width="0.0dip" android:layout_height="fill_parent" android:scaleType="centerCrop" android:adjustViewBounds="true" android:baselineAligned="false" android:minHeight="@dimen/at_place_card_content_height" android:layout_weight="1.0" android:contentDescription="@string/at_place_card_image_desc" thegoogle:crossfadeDuration="@integer/image_crossfade_duration" />
</LinearLayout> 
```

更新：现在也可以获得一些样式信息。如果您对此感兴趣，这里是一个包含我目前拥有的信息的 zip 文件（现在来自 google 的一些资源文件）。 [https://dl.dropbox.com/u/4379928/android/googlenow2.zip](https://dl.dropbox.com/u/4379928/android/googlenow2.zip)

# hibernate - 如何在 Hibernate 4 中配置日志记录以使用 SLF4J

> ID：11639997
> 
> 赞同：118
> 
> 时间：2012-07-24T22:02:26.850
> 
> 标签：slf4j, jboss-logging, hibernate, logging, slf4j, hibernate-4.x, jboss-logging

Hibernate 3.x 使用[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题")进行日志记录。Hibernate 4.x 使用[jboss-logging](/questions/tagged/jboss-logging "显示标记为“jboss-logging”的问题")。我正在编写一个使用 Hibernate 4 和 SLF4J 进行日志记录的独立应用程序。

如何配置 Hibernate 以登录到 SLF4J？

如果那不可能，我该如何配置 Hibernate 的日志记录？

关于日志记录的 Hibernate 4.1 手册[部分](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-logging)以警告说它是...

> 完全过时了。Hibernate 从 4.0 开始使用 JBoss Logging。当我们将此内容迁移到开发人员指南时，这将被记录下来。

...继续谈论 SLF4J，所以没用。[入门指南](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/)和[开发者指南](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/)都没有谈论日志记录。[迁移指南](https://community.jboss.org/wiki/HibernateCoreMigrationGuide40)也没有。

我一直在寻找关于 jboss-logging 本身的文档，但我根本找不到任何文档。[GitHub 页面是静默](https://github.com/jboss-logging/jboss-logging)的，JBoss 的[社区项目页面](http://www.jboss.org/projects)甚至没有列出 jboss-logging。我想知道项目的[错误跟踪器](https://issues.jboss.org/secure/IssueNavigator.jspa?reset=true&jqlQuery=project%20=%20JBLOGGING%20AND%20resolution%20=%20Unresolved%20AND%20component%20is%20EMPTY%20ORDER%20BY%20priority%20DESC&mode=hide)是否有任何与提供文档相关的问题，但事实并非如此。

好消息是，当在应用服务器（例如 JBoss AS7）中使用 Hibernate 4 时，日志记录在很大程度上会为您处理好。但是如何在独立应用程序中配置它？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-10-21T07:31:02.367

查看[https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/LoggerProviders.java](https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/LoggerProviders.java)：

```
static final String LOGGING_PROVIDER_KEY = "org.jboss.logging.provider";

private static LoggerProvider findProvider() {
    // Since the impl classes refer to the back-end frameworks directly, if this classloader can't find the target
    // log classes, then it doesn't really matter if they're possibly available from the TCCL because we won't be
    // able to find it anyway
    final ClassLoader cl = LoggerProviders.class.getClassLoader();
    try {
        // Check the system property
        final String loggerProvider = AccessController.doPrivileged(new PrivilegedAction<String>() {
            public String run() {
                return System.getProperty(LOGGING_PROVIDER_KEY);
            }
        });
        if (loggerProvider != null) {
            if ("jboss".equalsIgnoreCase(loggerProvider)) {
                return tryJBossLogManager(cl);
            } else if ("jdk".equalsIgnoreCase(loggerProvider)) {
                return tryJDK();
            } else if ("log4j".equalsIgnoreCase(loggerProvider)) {
                return tryLog4j(cl);
            } else if ("slf4j".equalsIgnoreCase(loggerProvider)) {
                return trySlf4j();
            }
        }
    } catch (Throwable t) {
    }
    try {
        return tryJBossLogManager(cl);
    } catch (Throwable t) {
        // nope...
    }
    try {
        return tryLog4j(cl);
    } catch (Throwable t) {
        // nope...
    }
    try {
        // only use slf4j if Logback is in use
        Class.forName("ch.qos.logback.classic.Logger", false, cl);
        return trySlf4j();
    } catch (Throwable t) {
        // nope...
    }
    return tryJDK();
} 
```

所以可能的值为`org.jboss.logging.provider`：`jboss`, `jdk`, `log4j`, `slf4j`.

如果你不设置 `org.jboss.logging.provider`它会尝试 jboss，然后 log4j，然后 slf4j（仅当使用 logback 时）并回退到 jdk。

我`slf4j`使用`logback-classic`：

```
 <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.0.13</version>
        <scope>${logging.scope}</scope>
    </dependency> 
```

一切正常！

**更新**一些用户在非常主要的 App.java 中使用：

```
static { //runs when the main class is loaded.
    System.setProperty("org.jboss.logging.provider", "slf4j");
} 
```

但对于基于容器的解决方案，这是行不通的。

**更新 2**那些认为他们使用 SLF4J 管理 Log4j 的人`jboss-logging`并不完全如此。`jboss-logging`不用SLF4J直接用Log4j！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-10T06:26:56.073

要让 SLF4J 在不使用 Logback 作为后端的情况下与 JBoss Logging 一起工作，需要使用系统属性`org.jboss.logging.provider=slf4j`。`log4j-over-slf4j`在这种情况下，策略似乎不起作用，因为如果类路径中实际上不存在 Logback 和 log4j，则日志记录将回退到 JDK。

这有点麻烦，为了让自动检测正常工作，您看到类加载器至少包含`ch.qos.logback.classic.Logger`来自 logback-classic 或`org.apache.log4j.Hierarchy`来自 log4j 的内容，以欺骗 JBoss 日志不回退到 JDK 日志。

魔术被解释为`org.jboss.logging.LoggerProviders`

更新：已添加服务加载程序支持，因此可以通过声明`META-INF/services/org.jboss.logging.LoggerProvider`（`org.jboss.logging.Slf4jLoggerProvider`作为值）来避免自动检测问题。似乎也增加了对 log4j2 的支持。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-09T16:29:28.063

受[Leif 的 Hypoport 帖子的](http://blog-it.hypoport.de/2012/04/30/hibernate4-verwendet-jboss-logging-statt-slf4j-durch-die-log4j-bridge-leiten-wir-die-logs-zu-logback/)启发，这就是我将 Hibernate 4 “弯曲”回 slf4j 的方式：

假设您正在使用 Maven。

*   `org.slf4j:log4j-over-slf4j`作为依赖添加到您的`pom.xml`
*   使用命令`mvn dependency:tree`，确保您使用的工件**都不**`slf4j:slf4j`依赖于（准确地说，任何工件都不应具有*编译*范围依赖或*运行时*范围依赖`slf4j:slf4j`）

背景：Hibernate 4.x 依赖于 artifact `org.jboss.logging:jboss-logging`。传递地，这个工件对工件有一个*提供*的范围依赖`slf4j:slf4j`。

因为我们现在已经添加了`org.slf4j:log4j-over-slf4j`工件，`org.slf4j:log4j-over-slf4j`所以模仿了`slf4j:slf4j`工件。因此，`JBoss Logging`现在记录的所有内容实际上都将通过 slf4j 进行。

假设您使用*Logback*作为您的日志记录后端。这是一个示例`pom.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    ....
    <properties>
        ....
        <slf4j-api-version>1.7.2</slf4j-api-version>
        <log4j-over-slf4j-version>1.7.2</log4j-over-slf4j-version>
        <jcl-over-slf4j-version>1.7.2</jcl-over-slf4j-version> <!-- no problem to have yet another slf4j bridge -->
        <logback-core-version>1.0.7</logback-core-version>
        <logback-classic-version>1.0.7</logback-classic-version>
        <hibernate-entitymanager-version>4.1.7.Final</hibernate-entitymanager-version> <!-- our logging problem child -->
    </properties>

    <dependencies>
            <!-- begin: logging-related artifacts .... -->
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>${slf4j-api-version}</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>jcl-over-slf4j</artifactId>
                <version>${jcl-over-slf4j-version}</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>log4j-over-slf4j</artifactId>
                <version>${log4j-over-slf4j-version}</version>
            </dependency>   
            <dependency>
                <groupId>ch.qos.logback</groupId>
                <artifactId>logback-core</artifactId>
                <version>${logback-core-version}</version>
            </dependency>
            <dependency>
                <groupId>ch.qos.logback</groupId>
                <artifactId>logback-classic</artifactId>
                <version>${logback-classic-version}</version>
            </dependency>
            <!-- end: logging-related artifacts .... -->

            <!-- begin: some artifact with direct dependency on log4j:log4j ....  -->
            <dependency>
            <groupId>org.foo</groupId>
                <artifactId>some-artifact-with-compile-or-runtime-scope-dependency-on-log4j:log4j</artifactId>
                <version>${bla}</version>
                <exclusions>
                    <exclusion>
                        <groupId>log4j</groupId>
                        <artifactId>log4j</artifactId>
                    </exclusion>
                </exclusions>   
            </dependency>
            <!-- begin: some artifact with direct dependency on log4j:log4j ....  -->

            <!-- begin: a hibernate 4.x problem child........... -->
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-entitymanager</artifactId>
                <version>${hibernate-entitymanager-version}</version>
            </dependencies>
            <!-- end: a hibernate 4.x problem child........... -->
    ....
</project> 
```

在您的类路径上，有一个`logback.xml`，例如位于`src/main/java`：

```
<!-- begin: logback.xml -->
<configuration>
<appender name="console" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
</appender> 

<logger name="org.hibernate" level="debug"/>

<root level="info">
    <appender-ref ref="console"/>
</root>

</configuration>
<!-- end: logback.xml --> 
```

某些组件可能希望`logback.xml`在 JVM 启动时访问以进行正确的日志记录，例如 Jetty Maven 插件。在这种情况下，将 Java 系统添加`logback.configurationFile=./path/to/logback.xml`到您的命令中（例如`mvn -Dlogback.configurationFile=./target/classes/logback.xml jetty:run`）。

如果您仍然获得“原始”控制台标准输出 Hibernate 输出（如`Hibernate: select ...`），则堆栈溢出问题“[关闭休眠日志记录到控制台](https://stackoverflow.com/q/6012333/923560)”可能适用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-25T03:53:09.700

首先，您确实意识到 SLF4J 不是一个日志库，它是一个日志包装器。它本身不记录任何东西，它只是委托给“后端”。

要“配置”jboss-logging，您只需在类路径中添加您想要使用的任何日志框架（以及 jboss-logging），然后 jboss-logging 会计算出其余部分。

我创建了一个以 Hibernate 为中心的 JBoss Logging 配置指南： http: [//docs.jboss.org/hibernate/orm/4.3/topical/html/logging/Logging.html](http://docs.jboss.org/hibernate/orm/4.3/topical/html/logging/Logging.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T09:03:04.897

我在独立应用程序中使用 Hibernate Core 4.1.7.Final 和 Spring 3.1.2.RELEASE。我将 Log4j 1.2.17 添加到我的依赖项中，似乎 JBoss Logging 直接记录到 log4j（如果可用）并且 Spring 使用 Commons Logging，女巫也使用 Log4j（如果可用），所有 Logging 都可以通过 Log4J 配置。

这是我的相关依赖项列表：

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.7.Final</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-18T08:09:17.070

所以，刚刚让它在我的项目中工作。休眠 4，slf4j，logback。我的项目是 gradle，但对于 maven 应该是一样的。

基本上阿卜杜勒是对的。他不正确的地方是您不必从依赖项中删除 slf4j。

1.  包括编译范围：

    org.slf4j:slf4j-api

    org.slf4j:log4j-over-slf4j

    例如对于 logback (ch.qos.logback:logback-classic, ch.qos.logback:logback-core:1.0.12)

2.  从依赖项中完全排除 log4j 库

结果：通过 slf4j 休眠日志到 logback。当然，您应该能够使用与 logback 不同的日志实现

要确保不存在 log4j，请检查类路径或 web-inf/lib 上的库以获取战争文件。

当然，您已经在 logback.xml 中设置了记录器，例如：

`<logger name="org.hibernate.SQL" level="TRACE"/>`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-15T11:14:06.617

Hibernate 4.3 有[一些](http://docs.jboss.org/hibernate/orm/4.3/topical/html/logging/Logging.html)关于如何控制的文档`org.jboss.logging`：

*   它在类路径中搜索*日志记录提供程序*。它在搜索 log4j 之后搜索 slf4j。因此，理论上，确保您的类路径 (WAR) 不包含 log4j 并且包含 slf4j API，并且后端应该可以工作。

*   作为最后的手段，您可以将`org.jboss.logging.provider`系统属性设置为`slf4j`.

* * *

尽管文档声称`org.jboss.logging`，尽管 log4j 不存在且 SLF4J 存在，但仍坚持尝试使用 log4j，导致我的 Tomcat 日志文件 ( `/var/log/tomcat/catalina.out`) 中出现以下消息：

```
 log4j:WARN No appenders could be found for logger (org.jboss.logging).
 log4j:WARN Please initialize the log4j system properly.
 log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我必须遵循[dasAnderl ausMinga](https://stackoverflow.com/a/19444657/545127)的答案的建议并包括`log4j-over-slf4j`桥梁。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-17T20:02:45.247

我使用 maven 并添加了以下依赖项：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.6.6</version>
</dependency> 
```

然后，我在中创建了一个`log4j.properties`文件`/src/main/resources`：

```
# direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n
# set log levels
log4j.rootLogger=warn 
```

这会将它放在您的`.jar`. 它就像一个魅力......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-23T22:46:22.740

我在使 hibernate 4 日志记录与 weblogic 12c 和 log4j 一起工作时遇到问题。解决方案是将以下内容放在您的 weblogic-application.xml 中：

```
<prefer-application-packages>
    <package-name>org.apache.log4j.*</package-name>
    <package-name>org.jboss.logging.*</package-name>
</prefer-application-packages> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-08T13:19:31.243

对于任何可能面临同样问题的人。如果您尝试了这里解释的所有其他解决方案，但仍然没有看到休眠日志记录与您的 slf4j 一起工作，这可能是因为您使用的容器在他的文件夹库中包含 jboss-logging.jar。这意味着在您甚至可以设置任何配置来影响它之前就已预加载。为避免 weblogic 中出现此问题，您可以在 ear/META-INF 中的文件 weblogic-application.xml 中指定首选从应用程序加载的库。其他服务器容器应该有类似的机制。就我而言，我必须添加：

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.5/weblogic-application.xsd">
   <wls:prefer-application-packages>    
       <!-- logging -->
       <wls:package-name>org.slf4j.*</wls:package-name>
       <wls:package-name>org.jboss.logging.*</wls:package-name>             
   </wls:prefer-application-packages>
   <wls:prefer-application-resources>
        <wls:resource-name>org/slf4j/impl/StaticLoggerBinder.class</wls:resource-name>
    </wls:prefer-application-resources>     
</wls:weblogic-application> 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-07-24T22:21:08.000

你试过这个吗：

**- slf4j-log4j12.jar 在 Log4J 的情况下。有关更多详细信息，请参阅 SLF4J 文档。要使用 Log4j，您还需要在类路径中放置一个 log4j.properties 文件。一个示例属性文件与 Hibernate 一起分发在 src/ 目录中**

只需在类路径中添加这些 jar 和属性或 log4j xml