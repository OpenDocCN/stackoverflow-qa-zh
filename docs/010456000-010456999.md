# StackOverflow 问答 10456000-10456999

# ios - Mixare iOS 集成

> ID：10456002
> 
> 赞同：3
> 
> 时间：2012-05-04T20:53:29.590
> 
> 标签：ios, augmented-reality

再会，

有人知道我在哪里可以找到有关如何将 Mixare 增强现实引擎集成到我的 iOS 应用程序的指南吗？没有太多文档，它完全符合我的要求。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T19:22:46.350

如果您下载 iPhone 的源代码，您也会在那里找到一个不错的演示应用程序。它展示了如何做你需要的事情，它还为自定义 mixare 应用程序奠定了完美的基础。只需弹出您自己的数据、您的 UI 和您的应用程序就完成了。

[https://github.com/mixare/mixare-iphone](https://github.com/mixare/mixare-iphone)

# objective-c - Core Animation 隐式动画不会为新添加的子层触发

> ID：10456022
> 
> 赞同：1
> 
> 时间：2012-05-04T20:55:38.737
> 
> 标签：objective-c, ios, core-animation, calayer

不知道为什么这不起作用。我不能为新添加的子层做隐式动画，直到有些人甚至像按钮按下或被其他方法调用一样触发它。即使我认为我应该这样做，下面的这个也没有动画。它只显示图层的“之后”状态。

```
 CAGradientLayer *newBar = [CAGradientLayer layer];

    CGFloat barHeight = ((pair.amount.floatValue/self.model.maxModelValue.floatValue)*maxBarHeight);
    newBar.bounds=R(0,0,self.barWidth,0); 
    newBar.anchorPoint=P(0, 1);
    newBar.position=P((i*barSpacing), self.insideLayer.bounds.size.height);
    newBar.backgroundColor=self.lowerColor.CGColor;
    newBar.colors=[NSArray arrayWithObjects:(id)self.upperColor.CGColor, self.lowerColor.CGColor, nil];
    newBar.cornerRadius=self.cornerRadius;
    newBar.opacity=1.0;
    [self.insideLayer addSublayer:newBar];

    //animation line:
    newBar.opacity=0.5; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:01:28.793

如果层不是表示层层次结构的一部分，Core Animation 不会创建隐式动画。

试试这个：

```
...
[self.insideLayer addSublayer:newBar];

// Tell Core Animation to update the presentation layer hierarchy:
[CATransaction flush];

// animation line:
newBar.opacity = 0.5; 
```

# jquery - 使用 Jquery 进行 CSS3 3d 翻转

> ID：10456024
> 
> 赞同：1
> 
> 时间：2012-05-04T20:55:48.657
> 
> 标签：jquery, css

使用这个很棒的翻转教程[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)我将如何修改代码以使图像每 3 秒翻转一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:15:00.960

就个人而言，我会将悬停状态更改为类而不是 :hover 选择，然后使用 JavaScript 设置计时器并使用 jquery 切换类。

我在我的 iPad 上，但在 JS 中查找 setinterval 并在 jQuery 中查找 toggleClass。其他任何人，请随时编辑它以添加代码！

# c# - 使用 ASP.NET MVC3 保存多个实体

> ID：10456025
> 
> 赞同：1
> 
> 时间：2012-05-04T20:55:53.867
> 
> 标签：c#, asp.net-mvc-3

我有一个视图，它`IEnumerable<User>`为每个用户提供一个编辑器，在页面底部有一个保存按钮。我的 post 操作采用`IEnumerable<User>`但由于某种原因该值始终为空。

这是我的观点（缩短）

```
@model IEnumerable<User>
    @using (Html.BeginForm("ViewUsers", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        foreach (var item in Model) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Username)
                </td>
                <td>
                    @Html.EditorFor(modelItem => item.IsAdmin)
                </td>
                <td>
                    @Html.EditorFor(modelItem => item.GoldCoins)
                </td>
            </tr>
        }
        <tr><td><input type="submit" value="Save"/></td></tr>
    } 
```

我的行动：

```
 public ActionResult ViewUsers()
        {
            IEnumerable<User> users = userService.GetUsers();
            return View(users.ToList());
        }

        [HttpPost]
        public ActionResult ViewUsers(List<User> users)
        {
                foreach (User u in users)
                {
                    userService.Save(u);
                }
            return RedirectToAction("ViewUsers");
        } 
```

我知道 save 方法可以正常工作，因为它可以很好地处理单个实体。它会在循环中引发错误，因为“用户”为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:02:11.257

您将需要像以下示例一样使用编辑器 HTML 助手：

```
@model List<User>
@using (Html.BeginForm("ViewUsers", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @for (int i = 0; i < Model.Count; i++) {
       @Html.DisplayFor(m => m[i].Username)
       @:Is Admin: @Html.EditorFor(m => m[i].IsAdmin)
       @:Gold Coins: @Html.EditorFor(m => m[i].GoldCoins)
    }
    <input type="submit" value="Save"/>
} 
```

注意：我去掉了表格标签以使其更易于阅读。要点是绑定到集合需要将表单中提交的名称/值的名称部分返回给服务器以遵循一定的约定。EditorFor(m => m[i].IsAdmin) 代码使名称成为 MVC 模型绑定器期望的正确名称。

# fortran - Fortran 2008 是否向后兼容以前的 Fortran 版本？

> ID：10456026
> 
> 赞同：2
> 
> 时间：2012-05-04T20:56:02.980
> 
> 标签：fortran

是的，我知道..，这不是想象的......这是一个真正的 Fortran 问题。

以前的版本是指 Fortran 2003、95、90 甚至 77。

通过向后兼容，我的意思是可以轻松运行为 2008 年以前版本编写的代码（仅对语法进行一些小的更改）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T21:09:10.537

Fortran 90 中没有删除任何内容，但在 Fortran 95 及更高版本中删除了一些可怕的功能。更多已被标记为“过时”。参见例如[http://www.cisl.ucar.edu/zine/96/fall/articles/3.f90.obsolete.html](http://www.cisl.ucar.edu/zine/96/fall/articles/3.f90.obsolete.html)。实际上，编译器供应商仍然包含这些功能，因为那里有很多遗留代码。如果编译器不能编译旧的 FORTRAN 77 程序，就会引起客户的反抗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T08:01:44.943

当然。这就是 Fortran 的全部内容，即向后兼容。通常，人们期望 Fortran 标准在未来 50 年内得到支持（不是开玩笑）。您仍然可以使用支持 2008 标准大多数功能的英特尔编译器编译 Fortran 66 代码。

# java - 为什么我的递归没有返回但最终导致堆栈溢出？

> ID：10456028
> 
> 赞同：1
> 
> 时间：2012-05-04T20:56:09.577
> 
> 标签：java, recursion, stack-overflow, tic-tac-toe

首先，这是额外功课的一部分，所以请不要给我答案。请帮助我了解我可能对正在发生的事情有什么问题。它是一个井字游戏生成器，游戏在其中递归地根据玩家确定最佳移动。（教授用白色'W'和黑色'B'代替X和O）

我的主要递归方法根据 TTT 板上的输入位置返回状态分数；1 如果白方从该位置强制获胜，0 如果是平局，-1 如果黑方将强制从该位置获胜：

```
public int stateScore(boolean whiteMove, int[] BestMove) {
    return stateScore(whiteMove,BestMove,TTTBoard);
} 
```

它调用了我的底层私有递归方法：

```
private int stateScore(boolean whiteMove, int[] BestMove,char[][] TestBoard) {
    char [][] newTestBoard = new char [3][3];
    for(int rowVal = 0; rowVal < 3; rowVal++){
        for(int colVal = 0; colVal < 3; colVal++){
            newTestBoard[rowVal][colVal] = TestBoard[rowVal][colVal];
        }
    }

    int [] bestMove = new int [2];

    for(int rowVal = 0; rowVal < 3; rowVal++){
        for(int colVal = 0; colVal < 3; colVal++){
            if(isFull(newTestBoard) == true){
                return 0;
            }
            else if(newTestBoard[rowVal][colVal] == '-'){
                bestMove[0] = rowVal;
                bestMove[1] = colVal;

                //if boolean is white
                 if(whiteMove == true){
                    newTestBoard = testEntry(rowVal,colVal,'W',newTestBoard);
                    if(threeInRow(newTestBoard) == 1){
                        return 1;
                    }
                    else if(threeInRow(newTestBoard) == 0 && isFull(newTestBoard) == true){
                        return 0;
                    }
                    else if(threeInRow(newTestBoard) == -1 && isFull(newTestBoard) == true){
                        return -1;
                    }
                    else{
                        return stateScore(!whiteMove,bestMove,newTestBoard);
                    }
                }
                //if boolean is black
                else{
                    newTestBoard = testEntry(rowVal,colVal,'B',newTestBoard);
                    if(threeInRow(newTestBoard) == -1){
                        return -1;
                    }
                    else if(threeInRow(newTestBoard) == 0 && isFull(newTestBoard) == true){
                        return 0;
                    }
                    else if(threeInRow(newTestBoard) == 1 && isFull(newTestBoard) == true){
                        return 1;
                    }
                    else{
                        return stateScore(!whiteMove,bestMove);
                    }
                }
            }
        }
    }
    return 0;
} 
```

whiteMove 的布尔值如果是白方走，则为真，如果是黑方走，则为假。函数中的辅助方法包括threeInRow：

```
public int threeInRow(char[][] TTTBoard){
    boolean whiteIs = false;
    boolean blackIs = false;
        //Horizontal?
        char [] colChar = new char [3];
        for(int rowVal = 0; rowVal < 3; rowVal ++){
            for(int colVal = 0; colVal < 3; colVal++){
                colChar[colVal] = TTTBoard[rowVal][colVal];
            }
            if(colChar[0] == colChar[1] && colChar[1] == colChar[2]){
                if(colChar[0] == 'W'){
                    whiteIs = true;
                }
                if(colChar[0] == 'B'){
                    blackIs = true;
                }
            }
        }

        //Vertical?
        char [] rowChar = new char [3];
        for(int colVal = 0; colVal < 3; colVal ++){
            for(int rowVal = 0; rowVal < 3; rowVal++){
                rowChar[colVal] = TTTBoard[rowVal][colVal];
            }
            if(rowChar[0] == rowChar[1] && rowChar[1] == rowChar[2]){
                if(rowChar[0] == 'W'){
                    whiteIs = true;
                }
                else if(rowChar[0] == 'B'){
                    blackIs = true;
                }
            }
        }

        //Diagonal
            //topLeft to bottomRight
            if(TTTBoard[0][0] == TTTBoard[1][1] && TTTBoard[1][1] == TTTBoard[2][2]){
                if(TTTBoard[0][0] == 'W'){
                    whiteIs = true; 
                }
                else if(TTTBoard[0][0] == 'B'){
                    blackIs = true;
                }
            }

            //topRight to bottomLeft
            if(TTTBoard[0][2] == TTTBoard[1][1] && TTTBoard[1][1] == TTTBoard [2][0]){
                if(TTTBoard[1][1] == 'W'){
                    whiteIs = true;
                }
                else if(TTTBoard[1][1] == 'B'){
                    blackIs = true;
                }
            }

    //Return Vals
    if(whiteIs == true && blackIs == true){
        return 0;
    }
    else if(blackIs == true && whiteIs == false){
        return -1;
    }
    else if(blackIs == false && whiteIs == true){
        return 1;
    }
    else if(blackIs == false && whiteIs == false){
        return 0;
    }
    else{
        return 0;
    }

} 
```

和测试入口：

```
public char[][] testEntry(int row,int col,char newChar, char[][] TestBoard){

    char [][] returnBoard = new char[3][3];
    for(int rowVal = 0; rowVal < 3; rowVal++){
        for(int colVal = 0; colVal < 3; colVal++){
            returnBoard[rowVal][colVal] = TestBoard[rowVal][colVal];
        }
    }
    returnBoard[row][col] = newChar;
    return returnBoard;

} 
```

我不明白堆栈溢出是从哪里来的。似乎我的回报涵盖了所有情况，并且我的方法具有适当的回报。我从来没有使用过带有递归的for循环，我是不是搞砸了。另外，我说`type [] name = name`（相同类型）不起作用是正确的，对吗？这就是为什么我在这种情况下做了 for 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:25:21.313

在你的黑色分支中，你的回报是错误的。

你回来

```
return stateScore(!whiteMove,bestMove); 
```

重新开始递归。你想回来

```
return stateScore(!whiteMove,bestMove,newTestBoard); 
```

提示：

*   修复你的布尔值：

    ```
    if(whiteMove == true) -> if (whiteMove) 
    ```

*   对类使用大写，对变量使用小写。

*   如果你在 if 分支中返回，那么你不需要 else。

    代替：

    ```
    if (condition) {
      ...
      return ...;
    }
    else
    {
      ...
    } 
    ```

    最好写：

    ```
    if (condition) {
      ...
      return ...;
    }
    ... 
    ```

    保持较低的嵌套并使代码更易于遵循。

*   重构公共代码：两个分支返回相同的结果：

    ```
    return stateScore(!whiteMove,bestMove,newTestBoard); 
    ```

    为什么不把它移到 if (whiteMove) 之外

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:22:06.680

发布堆栈跟踪，但我敢打赌，当您`stateScore`递归调用时，您将获得无限递归。

# asp.net-mvc - MVCSiteMapProvider 动态节点始终返回面包屑中所有页面的第一个节点

> ID：10456029
> 
> 赞同：1
> 
> 时间：2012-05-04T20:56:10.963
> 
> 标签：asp.net-mvc, razor, mvcsitemapprovider, asp.net-mvc-sitemap

我正在为我的 ASP.NET MVC 3 项目使用 MVCSitemapProvider，我有一个用于新闻稿部分的动态节点。我面临的问题是一个部分有多个节点，当我查看站点地图时，它可以正常工作：

```
> Home
  > Static Node - Press Releases
    >Dynamic node - Press Release #1
    >Dynamic node - Press Release #2
    >Dynamic node - Press Release #3 
```

但是在面包屑中，如果我导航到新闻稿 #2 页面。面包屑将显示第一个节点。

```
Home > Press Releases > Press Release #1 
```

这是节点提供程序的代码

```
public class PressReleaseDynamicNodeProvider : DynamicNodeProviderBase {

    public PressReleasesRepository _repository = new PressReleasesRepository();
    public List<PressRelease> releases = new List<PressRelease>();

    public override IEnumerable<DynamicNode> GetDynamicNodeCollection() {
        releases = _repository.GetPressReleases();
        var returnValue = new List<DynamicNode>();

        foreach (var release in releases) {
            DynamicNode node = new DynamicNode();
            node.Title = release.Title;
            returnValue.Add(node);
        }
        return returnValue;
    }

} 
```

和 MVC 站点地图代码：

```
<mvcSiteMapNode controller="News" action="PressReleases" title="Press Releases" >
  <mvcSiteMapNode controller="News" action="PressRelease" title="" dynamicNodeProvider="MySite.NodeProvider.PressReleaseDynamicNodeProvider, MySite" />
</mvcSiteMapNode> 
```

当我重写这个问题时，我一直在玩代码，没有进行任何重大更改，现在......新闻稿＃1显示新闻稿＃1，新闻稿＃2显示新闻稿＃3和新闻发布 #3 显示新闻稿 #1。

我对此感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:26:23.977

原因是站点地图提供商无法区分您的路线。目前，所有新闻稿都通过相同的 URL /news/pressreleases/ 访问。为了使面包屑正确，您应该通过`node.RouteValues`.

例如，您的操作方法可能如下所示`PressReleases`：`NewsController`

```
public ActionResult PressReleases(int id) {
  ... implementation ...
} 
```

然后你将`id`参数传递给`RouteValues`这样的：

```
foreach (var release in releases) {
  DynamicNode node = new DynamicNode();
  node.Title = release.Title;
  node.RouteValues.Add("id", release.Id);
  returnValue.Add(node);
} 
```

这个小改动将使面包屑按预期工作。

# php - jquery 的 .serialize 发送的是 GET 而不是 POST

> ID：10456030
> 
> 赞同：0
> 
> 时间：2012-05-04T20:56:20.437
> 
> 标签：php, html, jquery

我在这里遇到了一个问题，当我使用 ajax 发送表单时它工作正常，但 URL 变成了这样：

![在此处输入图像描述](../Images/cad2889b5b38715754f0ca899c9f5c80.png)

这在使用时真的很常见吗：

```
$j.post("sendMail.php", $j("#formMail").serialize()); 
```

因为我希望页面的 URL 与 URL 中没有这些扩展名相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:03:51.107

```
$j("#formMail").on('submit', function(e) {
    e.preventDefault();
}); 
```

# html - 为什么我的图像显示不那么清晰

> ID：10456031
> 
> 赞同：1
> 
> 时间：2012-05-04T20:56:21.777
> 
> 标签：html, css, image, png

我的标题图像看起来被淡化了。我将不透明度设置为 60%，所以我怀疑这就是发生这种情况的原因，但由于某种原因，它没有发生在我试图用完全相同的设置复制的网站上。

我的网站：[http ://webdev.edulence.com/getchell/](http://webdev.edulence.com/getchell/)

他们的网站： http: [//getchellcompanies.com](http://getchellcompanies.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:02:52.583

不要使用不透明度，而是在元素上使用 RGBa - *alpha 通道*。

见：[http ://www.css3.info/introduction-opacity-rgba](http://www.css3.info/introduction-opacity-rgba/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:04:18.937

因为在您的图像中，图像是不透明度的子代：0.6 而在他们的图像中则不是：

![在此处输入图像描述](../Images/ed655682971e68aac478407f82ddd746.png)

那是他们的 HTML。蓝线是不透明的 div，红线是 div+图像。他们是兄弟姐妹。

在您的代码中，它们不是兄弟姐妹，而是红色是蓝色的孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:03:37.800

是的，这是因为您在 style.css 中的 #logo 上将不透明度设置为 0.6。参考站点 (http://getchellcompanies.com) 也在设置不透明度，但它不在 LOGO 上，而是在与带有#logo ID 的 div 一起放置的另一个 DIV 上。

我希望制作相同的结构会为您提供相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:05:22.050

我看到的区别是这样的。他们有

```
<div class="translucentColorBar xACC63F" style="height: 116px;"></div> 
```

之后的两个图像是相同的宽度和高度。

```
.translucentColorBar {
    opacity: 0.6;
}

.xACC63F {
    background-color: #ACC63F;
} 
```

# c++ - 错误 C3861：“cropImage”*：找不到标识符

> ID：10456037
> 
> 赞同：1
> 
> 时间：2012-05-04T20:56:34.193
> 
> 标签：c++, opencv

在开发用于面部认证的 C++ 应用程序时，我遇到了一个错误：

```
C3861: 'cropImage'*: identifier not found 
```

这是的签名`cropImage`：

```
IplImage* cropImage(IplImage *img,CvRect region); 
```

我尝试在以下函数中调用它：

```
IplImage *cropFace(IplImage * image, CvPoint eye_left, CvPoint eye_right, double offset_pct[2], CvSize dest_sz)
{//calculate offsets in original image
    ...
    //matrice de rotation
    cv::Mat affine_matrix;
    affine_matrix = cv::getRotationMatrix2D(eye_left, rotation, scale);
    //mtx est la conversion de image IplImage* en matrice mtx
    cv::Mat mtx = cv::Mat(image, true);
    cv::Mat mtx2;
    cv::warpAffine(mtx, mtx2, affine_matrix, mtx.size(), cv::INTER_LINEAR,       cv::BORDER_CONSTANT, cv::Scalar::all(255));
    //mtx est la conversion de matrice mtx2 en image IplImage*
    IplImage image1 = mtx2;
    //crop the rotated image
    double crop_x = eye_left.x - scale * offset_h;
    double crop_y = eye_left.y - scale * offset_v;
    double crop_size0 = dest_sz.width * scale;
    double crop_size1 = dest_sz.height * scale;
    CvRect region;
    region.x = cvFloor(crop_y);
    region.y = cvFloor(crop_y);
    region.width = cvFloor(crop_size0);
    region.height = cvFloor(crop_size1);
    //the problem in this ligne,it seems it has not known cropImage !! :(
    IplImage *image2 = cropImage(&image1, region);
    IplImage *image3 = resizeImage(image2, dest_sz.width, dest_sz.width);
    return image3;
} 
```

我认为 IplImage* 和 Mat 之间的转换导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:42:52.567

问题似乎是你指出来的。`&`即使`image`已经是指针类型，您也正在使用符号取消引用它，从而产生双指针。您应该简单地尝试：

```
IplImage *image2 = cropImage(image1, region); 
```

# vb.net - 如何显示已下的客户订单

> ID：10456039
> 
> 赞同：0
> 
> 时间：2012-05-04T20:56:45.533
> 
> 标签：vb.net

嗨，距离大学项目到期还有几个小时。
这是一个基本的 Access 数据库驱动的电子商务网站。我有一个主页、一个产品页面、一个订单页面、一个订单确认页面、一个购物车页面和一个查看当前订单页面。该站点使用具有三个表的 Access 数据库。包含所有客户详细信息的客户表（FirstName、LastName、EmailAdd、CardNo、CardEx、SortCode、DeliveryAdd、Postcode）
Products 表，包含所有产品信息（ProductID、ProductName、Price、ProductType、Images、ProductDescription）。还有一个包含 CustomerID 和 ProductID 的 Orders 表。我已经设法让订单页面正常工作，这会导致订单确认页面显示客户刚刚下达的详细信息。到目前为止，这是我在订单确认页面加载事件中的内容。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim strDatabaseNameAndLocation As String
    strDatabaseNameAndLocation = Server.MapPath("KingToots.mdb")
    Dim strSQLCommand As String
    strSQLCommand = "SELECT Customer.*, Products.ProductName FROM Customer" & _
        "INNER JOIN Products ON Customer.CustomerID = Orders.CustomerID ORDER BY Customer.CustomerID DESC;" 
    Dim objOleDbConnection As System.Data.OleDb.OleDbConnection
    objOleDbConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & strDatabaseNameAndLocation)
    objOleDbConnection .Open()
    Dim objOleDbCommand As System.Data.OleDb.OleDbCommand
    objOleDbCommand = New System.Data.OleDb.OleDbCommand(strSQLCommand, objOleDbConnection)
    Dim objOleDbDataReader As System.Data.OleDb.OleDbDataReader
    objOleDbDataReader = objOleDbCommand.ExecuteReader()
    Dim datDataTable As System.Data.DataTable
    datDataTable = New System.Data.DataTable()
    datDataTable.Load(objOleDbDataReader)
    gdvOrderdetails.DataSource = datDataTable
    gdvOrderdetails.DataBind()
    objOleDbConnection.Close()

End Sub 
```

这将返回此错误“FROM 子句中的语法错误”。我猜我的 SQL 代码是错误的。我注意到当我在订单页面下订单时，它在 Access 数据库中添加了一个条目，其中生成的 CustomerID 在客户表中为 12，在订单表中为 4。这些数字在生成时不应该相同吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:59:26.100

在此处添加空格：

```
... Customer**SPACE**" & _
        "INNER... 
```

*（尽量不要用力捂脸伤害自己）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:01:35.707

你有没有尝试过：

strSQLCommand = "SELECT Customer.*, Products.ProductName FROM Customer,Products" &_ "INNER JOIN Products ON Customer.CustomerID = Orders.CustomerID ORDER BY Customer.CustomerID DESC;"

# ccsprite - Cocos2d-X中如何交换CCSprite对象中的精灵

> ID：10456040
> 
> 赞同：10
> 
> 时间：2012-05-04T20:56:50.727
> 
> 标签：ccsprite, cocos2d-x

我有一个从 CCSprite 继承的对象。我想从这个对象内部改变图像。

在 Cocos2d-X 中如何在不创建新 CCSprite 对象的情况下更改图像（精灵）？

谢谢，阿德里安。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T09:45:11.090

```
mySprite->setTexture(CCTextureCache::sharedTextureCache()->addImage("newImage.png")); 
```

No need to alter your custom class.. Hope this helps.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T07:26:03.860

为我工作：

```
mySprite->setDisplayFrame(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("frame_name")); 
```

在需要将精灵加载到缓存中之前：

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("sprite_atlas.plist"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:24:45.830

我发现了，我把它留在这里，以防有人遇到同样的问题：

**在继承自 CCSprite 对象的对象内部，编写如下函数**

```
void MyObject::UpdateImage(Char * PngName)
{
   /* Create Image */
   CCImage *MyImage = new CCImage();
   MyImage->initWithImageFile( PngName ); /*the pngName is an image file in your resource folder */

   /* Create Texture from Image */
   CCTexture2D *MyTexture = new CCTexture2D();
   MyTexture->initWithImage(MyImage);

   /* Set the Texture */
   this->setTexture(MyTexture);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-21T03:12:12.607

由于现在已弃用“CCTextureCache::sharedTextureCache()”（v.3.13.1），您最好从 Director 获取纹理缓存：

```
auto texture = Director::getInstance()->getTextureCache()->addImage(filePath);

if (texture)
{
    yourSprite->setTexture(texture);
} 
```

来源： http: [//www.cocos2d-x.org/wiki/Texture_Cache](http://www.cocos2d-x.org/wiki/Texture_Cache)

# .net - 将 TFS 与 VS2003 一起使用

> ID：10456041
> 
> 赞同：1
> 
> 时间：2012-05-04T20:56:51.617
> 
> 标签：.net, visual-studio

根据 Microsoft Pattern & Practice 博客，建议使用 MSBee。

使用 Team Build 构建 .NET 1.1 应用程序

• 将您的.NET 1.1 解决方案升级到.NET 2.0。您可以通过在 Visual Studio 2005 中打开解决方案并运行转换向导来执行此操作，或者通过运行 devenv projectname /upgrade

• 确保在您的构建服务器上安装了 .NET 1.1 软件开发工具包 (SDK)。

[• 从http://www.codeplex.com/MSBee](http://www.codeplex.com/MSBee)下载并安装 MSBuild Extras

[• 从http://blogs.msdn.com/gautamg/attachment/578915.ashx](http://blogs.msdn.com/gautamg/attachment/578915.ashx)下载 BuildingFx11inTB.targets

• 从源代码管理中检查将构建您的.NET 1.1 项目的构建类型。

• 将BuildingFx11inTB.targets 复制到包含构建类型的目录，并将文件签入源代码控制。

• 编辑 TFSBuild.proj 文件：

• 导入 BuildingFx11inTB.targets 文件：

•添加定义CSharp 目标的属性：

CustomAfterMicrosoftCommonTargets=$(ProgramFiles)\MSBuild\MSBee\MSBuildExtras.Fx1_1.CSharp.targets •将 TFSBuild.proj 签入源代码管理。

这可以在不升级到 net 2.0 的情况下完成吗？我们必须继续使用 VS2003 并尝试使用 TFS。在 VS2003 中有一个巨大的应用程序（1000 页）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:58:25.277

当您需要基于 MsBuild 的项目文件时，将项目升级到 2.0。Visual Studio 2003 使用“旧式”项目文件，这些文件与 Team Build 和 MsBuild 不兼容。

升级您的项目是获取这些文件的最简单方法，因为升级过程将为您翻译它们。通过使用 MSBee 目标，您可以解释要使用 .NET 1.1 SDK 构建的 MsBuild。

如果您愿意，您可以自己创建这些项目文件，这需要大量工作。但是这样您就不需要升级到 Visual Studio 2005。但是对 2003 项目所做的任何更改也需要反映在项目的 MsBuild 版本中。一种解决方案是在调用 MsBuild 之前按需生成 MsBuild 项目。我还没有看到这样做，但是投资一个项目转换工具也可以解决你的问题。

您可以尝试的另一种解决方案是简单地保持您的解决方案和项目原样并创建一个 msbuild.proj 文件，该文件仅`devenv /build YourSolution.sln`使用[Community MsBuild Tasks](http://www.loresoft.com/projects/msbuildtasks/default.aspx)调用。这样您就不需要升级任何东西，但是您会失去 Team Build 的许多功能（无论如何，这些功能对 1.1 项目都不起作用）。您可以使用[Microsoft SCC Pprovider for TFS](http://visualstudiogallery.msdn.microsoft.com/bce06506-be38-47a1-9f29-d3937d3d88d6)将 Visual Studio 2003 直接连接到 TFS 以进行源代码控制，从而避免升级到 Visual Studio 2005 或更高版本。直接调用 devenv 存在一些问题。有时它会弹出一个对话框，导致您的构建挂起。

# c - 为什么 execvp 的 argv 参数不是 const？

> ID：10456043
> 
> 赞同：28
> 
> 时间：2012-05-04T20:57:02.307
> 
> 标签：c, libc, execvp

execvp 是这样定义的：

```
int execvp(const char *file, char *const argv[]); 
```

这排除了使用这样的代码：

```
const char* argv[] = {"/bin/my", "command", "here", NULL};
execvp(argv[0], argv); 
```

这是一个偶然的遗漏吗？围绕这个进行 const_cast 是否安全？还是一些 execvp 实现实际上在该内存上乱写？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T21:53:16.773

POSIX 规范说（[http://pubs.opengroup.org/onlinepubs/009604499/functions/exec.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/exec.html)）：

> `argv[]`指针数组和这些`envp[]`数组指向的字符串不应通过调用其中一个 exec 函数来修改，除非是替换过程映像的结果。

~~我认为失踪（或错位）`const`只是历史上的怪事。~~

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-06T15:19:55.793

我遇到了同样的情况。因为 execvp() 有 a`char *const`作为第二个参数，这意味着它接受一个指向 char 的常量指针。因此，如果您将指针 char 传递给它，它将能够将指针 char 转换为指向 char 的常量指针。所以，而不是声明它

```
const char* argv[] = {"/bin/my", "command", "here", NULL}; 
```

尝试

```
char* argv[] = {"/bin/my", "command", "here", NULL}; 
```

它会`argv[]`毫无问题地接受。

# unit-testing - 什么是用于单元测试的好的无效 IP 地址？

> ID：10456044
> 
> 赞同：59
> 
> 时间：2012-05-04T20:57:05.533
> 
> 标签：unit-testing, tcp, ip

我正在为客户端库编写单元测试。我想测试使用无效端口和无效 ip 的连接。什么是一个不会被路由到某个地方的好 IP 地址？我不想对运行单元测试的机器所在的网络做出任何假设。LOCALHOST 似乎是一个糟糕的选择，因为它是运行服务器组件的有效机器，我想单独测试一个无效端口。IPv4 规范中的某处是否保留了 INVALID-IP？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-04T20:59:52.337

根据[RFC 5737](https://www.rfc-editor.org/rfc/rfc5737)：

> 提供块 192.0.2.0/24 (TEST-NET-1)、198.51.100.0/24 (TEST-NET-2) 和 203.0.113.0/24 (TEST-NET-3) 以供在文档中使用。

这意味着您可以使用从这些范围中选择一个 IP 地址：

*   192.0.2.0 - 192.0.2.255
*   198.51.100.0 - 198.51.100.255
*   203.0.113.0 - 203.0.113.255

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T21:00:16.673

如果您正在寻找一个真正无效的 IP 地址（而不是无法路由的 IP 地址），您可以利用[A 类](http://www.comptechdoc.org/independent/networking/guide/netaddressing.html)地址的第一个字节不能是`0`.

例如：

```
0.42.42.42 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-03T17:25:14.870

乔纳森的回答（以及它的评论）对 IPv4 有好处

如果您的测试支持 IPv6，则它有一个明确的黑洞，您可以使用：如[RFC 6666](https://www.rfc-editor.org/rfc/rfc6666)`0100::/64`中所定义

使用 254.254.254.254 很诱人，因为它很容易记住，但在某些平台上，它会立即给出“传输失败。一般故障”，而不是可能是无效单元测试的实际超时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T21:00:23.620

您可以将 3 个私有 IP 块用于此类事情：

10/8 (10.0.0.0 -> 10.255.255.255) (一个老式的 A 类网络块)

172.16/12 (172.16.0.0 -> 172.131.255.255

196.168/16 (192.168.0.0 -> 192.168.255.255) （老式 B 类网络块）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T20:59:19.297

254.254.254.254

应该在保留以供将来使用的域中...

[RFC 1700](http://www.ietf.org/rfc/rfc1700.txt)

# optimization - 将 Oracle BLOBS 批量提取到文件中 - 需要建议/调整帮助

> ID：10456048
> 
> 赞同：2
> 
> 时间：2012-05-04T20:57:29.733
> 
> 标签：optimization, plsql, oracle10g, blob, utl-file

我正在开发一个需要将现有 Oracle blob 迁移到文件中的项目。要读取的环境是共享的 Oracle 10gR2 服务器。目前我有一个使用 UTL_FILE 的脚本。但是，这个过程非常缓慢。提取 25 GB 的样本数据大约需要 3 小时。要移动的实际数据大约为 1 TB。我需要帮助/建议来显着调整这一点。

这是我的过程：

1.  打开游标以获取 blob id 和名称列表
2.  开始循环遍历每个 blob
3.  使用自定义存储过程 BLOB2FILE 提取 blob（从网站上获取并稍作修改）

这是代码：

```
create or replace
PROCEDURE BLOB2File(
    lngBlobID IN NUMBER,
    sFileName IN VARCHAR2,
    sDir      IN VARCHAR2)
AS
  iFileLen INTEGER;
  iLineLen INTEGER := 32000; -- max line size for utl_file
  vStart   NUMBER  := 1;
  vBlob BLOB;
  l_output utl_file.file_type;
  my_vr RAW(32000);
  iTmp INTEGER;
BEGIN
  -- get blob details
  LOG_IT('Entered. Blob Id: ' || lngBlobID || ', File Name: ' || sFileName || ', Directory: ' || sDir);
  SELECT blobData,
    lengthb(blobData)
  INTO vBlob,
    iFileLen
  FROM blobTable
  WHERE id = lngBlobID;
  LOG_IT('Acquired the blob. Blob size: ' || TO_CHAR(iFileLen));
  l_output := utl_file.fopen(sDir, sFileName,'wb', iLineLen);
  vStart   := 1;
  iTmp     := iFileLen;
  -- if small enough for a single write
  IF iFileLen < iLineLen THEN
    utl_file.put_raw(l_output,vBlob);
    utl_file.fflush(l_output);
  ELSE -- write in pieces
    vStart      := 1;
    WHILE vStart < iFileLen AND iLineLen > 0
    LOOP
      dbms_lob.read(vBlob,iLineLen,vStart,my_vr);
      utl_file.put_raw(l_output,my_vr);
      utl_file.fflush(l_output);
      -- set the start position for the next cut
      vStart := vStart + iLineLen;
      -- set the end position if less than 32000 bytes
      iTmp       := iTmp - iLineLen;
      IF iTmp     < iLineLen THEN
        iLineLen := iTmp;
      END IF;
    END LOOP;
  END IF;
  utl_file.fclose(l_output);
  LOG_IT('Exited');

  EXCEPTION
  WHEN OTHERS THEN
  LOG_IT('**ERROR** ' || SQLERRM, SQLCODE, DBMS_UTILITY.FORMAT_ERROR_BACKTRACE);
END; 
```

LOG_IT 是记录到表的存储过程。那里不应该有任何重大打击。我尝试通过使用 BULK FETCH 而不是普通的 FETCH 来优化第 1 步。然而，它并没有产生任何显着的结果。

任何人都可以提出任何改进的想法，或者更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:22:53.977

假设您的硬件足以处理超过 8 GB/小时的持续写入`sDir`（并处理从类似数量的读取`blobTable`和处理系统需要的任何其他 I/O），最简单的选择可能是生成几个并行会话，每个会话都调用此过程。例如，如果您想并行运行三个作业，每个作业都提取一个 LOB，您可以执行类似的操作。

```
DECLARE
  l_jobno INTEGER;
BEGIN
  dbms_job.submit( l_jobno, 'begin BLOB2File( 1, ''1.lob'', ''DIRECTORY'' ); end;', sysdate + interval '5' second );
  dbms_job.submit( l_jobno, 'begin BLOB2File( 2, ''2.lob'', ''DIRECTORY'' ); end;', sysdate + interval '5' second );
  dbms_job.submit( l_jobno, 'begin BLOB2File( 3, ''3.lob'', ''DIRECTORY'' ); end;', sysdate + interval '5' second );
  commit;
END; 
```

实际上，您可能不希望为每个 BLOB 拥有一个单独的线程——您可能希望生成较少数量的作业并为每个作业分配一系列`lngBlobID`值以进行处理。Oracle 将在任何时候运行的作业数量受`JOB_QUEUE_PROCESSES`参数限制，因此您可以提交数千个作业，并让 Oracle 限制它同时运行的数量。

# epoll - epoll/非阻塞事件驱动IO

> ID：10456049
> 
> 赞同：0
> 
> 时间：2012-05-04T20:57:40.217
> 
> 标签：epoll, event-driven

我关于基于 epoll 的非阻塞事件驱动网络 IO 的问题是——客户端与 epoll 服务提供者的连接如何保持打开状态？当服务器端没有永久接收器时，为什么客户端的连接不会中断？

当服务器处理了请求并且应该继续前进时，客户端连接如何保持打开状态（POST 上的 Keep-Alive）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:19:13.060

您的假设是错误的：服务器端仍然有一个永久接收器。

使用`epoll`或`select`普通阻塞`read`/ `write`s 不会改变网络方面的任何事情。仍然有一个持久的 TCP 会话（在您所说的情况下）。服务器进程仍然在该连接上打开了一个文件描述符。
`epoll`是“只是”一个 API，它允许内核以一种有效的异步方式发出信号，表明该连接上有一些事情要做。

# xpages - 修复 IE 中“拉伸”的 XPage 扩展库对话框？

> ID：10456050
> 
> 赞同：1
> 
> 时间：2012-05-04T20:57:49.213
> 
> 标签：xpages

在 IE 中显示对话框时，它似乎向右拉伸。我知道可能有一个临时解决方案？任何人都可以提供该修复程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T13:40:43.300

我们遇到了同样的问题，通过指定对话框的宽度来解决。这可以防止它向右伸展。此外，不要忘记关闭您的 Firebug 控制台，如果您的对话框包含大量内容，它也会扭曲对话框。

要重现效果，您可以复制/粘贴下面的代码，向其中添加几段文本并从对话框中删除指定的宽度。

```
<xp:button value="Show Dialog" id="button1">
    <xp:eventHandler event="onclick" submit="false">
        <xp:this.script><![CDATA[XSP.openDialog("#{id:dialog1}");]]></xp:this.script>
    </xp:eventHandler>
</xp:button>

<xe:dialog id="dialog1" title="Dialog title" style="width:800px;">
    <xe:dialogContent>
        <p>Lorem ipsum ... </p>
    </xe:dialogContent>
    <xe:dialogButtonBar>
        <xp:button value="Ok" id="button1" styleClass="lotusFormButton">
            <xp:eventHandler event="onclick" submit="false">
                <xp:this.script><![CDATA[XSP.closeDialog('#{id:dialog1}')]]></xp:this.script>
            </xp:eventHandler>
        </xp:button>
        <xp:link id="link1" text="Cancel" styleClass="lotusAction">
            <xp:eventHandler event="onclick" submit="false">
                <xp:this.script><![CDATA[XSP.closeDialog('#{id:dialog1}')]]></xp:this.script>
            </xp:eventHandler>
        </xp:link>
    </xe:dialogButtonBar>
</xe:dialog> 
```

# php - Windows apachePHP exec zip 命令未完成

> ID：10456052
> 
> 赞同：0
> 
> 时间：2012-05-04T20:58:19.593
> 
> 标签：php, windows, apache, zip, wamp

我们在运行 WAMP（apache、mysql、php）的 Windows 服务器上遇到了一个有趣的问题。基本上，我们有一个将文件夹打包成用户可以下载的 zip 文件的应用程序。zip 文件的内容各不相同，必须根据用户的意愿动态准备。

我们使用此命令将文件压缩在一起。（我们也试过用winrar，但也有同样的问题） exec('c:\Windows\system32\7za a -mx0 -tzip "'.$zipPath.'" "'.$zipDirPath.'"', $output , $return_var);

问题是有时这个命令没有完成。它成功地创建了 zip 文件，但没有完成并且似乎它一直在运行。（如果通过命令行输入相同的命令，则不会发生）

如果有人对如何解决这个问题有任何想法，请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:54:26.813

我建议使用相同的 PHP [ZipArchive](http://www.php.net/manual/en/book.zip.php)类，在那里你会找到它的文档。

# c# - 处理来自数据库的队列时系统范围互斥锁的替代品？

> ID：10456053
> 
> 赞同：1
> 
> 时间：2012-05-04T20:58:23.493
> 
> 标签：c#, entity-framework-4, sql-server-ce, mutex

我有一些（实体框架 4）代码，如下所示：

```
class QueueItem{
    public bool Processed { get; set; }
    // ... other fields
}

class QueueContext: System.Data.Entity.DbContext
{
    public System.Data.Entity.DbSet<QueueItem> Queue { get; set; }

    public void ProcessItems()
    {
        do
        {
            var item = Queue.FirstOrDefault(q => !q.Processed);
            if(item == null) break;
            ProcessItem(item);
            item.Processed = true;
            SaveChanges();
        } while(true);
    }

    //...
} 
```

我想将其更改为 ProcessItems 方法外部的多线程。事实上，我希望多个进程/appDomains 同时运行此代码。如何防止多个进程从队列中选择相同的项目？我可以使用系统范围的（命名的）互斥体，但我看到那些非常慢。我正在寻找某种原子的“拉动并标记为进行中”。我使用 SqlServerCE4 作为数据存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:27:56.313

使用 MSMQ、Azure 队列甚至 Sql Server Service Broker 之类的实际消息队列可能会更好（当然，不适用于 CE）。像 Redis 这样的东西可能也更容易。如果这些都不是一个选项，您可能必须执行以下操作：

1.  将“InProgress”字段添加到您的表中
2.  确保您为表启用了乐观并发（例如通过 RowVersion）
3.  查询时，查询既不是 InProgress 也不是 Complete 的事物
4.  当您获得第一个实体时，更新 InProgress 字段以表明您已抓取它，然后 SaveChanges。
5.  如果发生并发异常，请处理它。这意味着其他人已经在您获取此项目的同时获取了此项目，但他们先保存了。在这种情况下，重新启动循环并寻找下一个循环。
6.  如果没有引发异常，则照常处理，但必须使用适当的错误处理以确保始终清除 InProgress，即使在将异常标记为 InProgress 后的某个时间点引发异常也是如此。

# memory - 虚拟地址空间碎片

> ID：10456054
> 
> 赞同：1
> 
> 时间：2012-05-04T20:58:26.343
> 
> 标签：memory, windbg, virtual-memory

我正在调查虚拟地址空间碎片。我遇到的问题是调用`VirtualAlloc`可以有很多来源（LOH，内存映射，...）

我可以从转储文件中识别函数的调用者吗？以某种方式找出我的问题的根源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:17:28.790

您必须为您的应用启用 gflags 用户堆栈跟踪，如果来自 WinDbg，您可以从命令行或在 WinDbg 中执行此操作：

```
!gflag +ust 
```

那么你需要做一个`!heap -s` 并且`!heap -stat -h XX`对于给定的堆块将转储更具体的统计信息，我建议在这里执行内存转储`.dump /ma c:\first.dmp`然后做导致碎片的事情，通过按下`ctrl+break`并`!heap -s`再次进入并重新执行另一个内存转储`.dump /ma c:\second.dmp`。

内存转储和堆摘要的原因是您可以分析哪些堆正在增加或返回，打开转储并对这些快照执行分析，将结果转储到文本文件中并对结果进行比较。

因此，如果您确定了一个正在增加的特定堆块，那么您可以转储该块的每个分配，`!heap -p -a xxxx`其中 xxxx 是您的堆块，我建议您设置 WinDbg 以将输出写入文件，因为这将非常大`.logfile c:\first.txt`在第二块内存上重复非常大转储并进行比较以查看正在发生的其他分配。

您还可以转储堆的统计信息，这将为您提供分配大小的细分，这也可能为您提供线索。无论如何，只要您拥有带有私有符号的 pdb，那么您就可以确定谁使用完整的调用堆栈进行了分配。

**编辑**

有一篇文章可以帮助你： [http ://bugslasher.net/2011/01/15/memory-exhaustion-even-if-a-large-enough-free-memory-segment-is-available/](http://bugslasher.net/2011/01/15/memory-exhaustion-even-if-a-large-enough-free-memory-segment-is-available/)

如果您可以获得虚拟地址，那么您可以使用转储附加信息`!pte address`，`pfn frameNum`您可以从结果中获得虚拟地址的页框号`!pte`。

`!vm 1`将显示一些有关您的虚拟内存使用情况的统计信息，但仅此而已，另一件事是您可以在调用上设置断点`virtualAlloc`并转储调用堆栈和局部变量，如果您使用`kf`，那么这将显示堆栈帧之间的字节距离可能表明分配较大，我会将此信息写入日志文件，并稍后在 2 个转储之间进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:04:41.347

首先，您必须为操作系统组件和程序设置 pdb 符号：在符号路径窗口中设置字符串，如下所示

srv*f:\symbols\websymbols*http://msdl.microsoft.com/download/symbols

并添加路径到您的程序私有符号。执行此操作后，您可以在命令 kb 上看到漂亮的堆栈跟踪。您的程序在堆栈中的第一次出现是调用者函数。

# jquery-ui - 第一次打开时出现 jQuery 对话框错误

> ID：10456055
> 
> 赞同：1
> 
> 时间：2012-05-04T20:58:26.940
> 
> 标签：jquery-ui, jquery, jquery-plugins

我有 jQuery 对话框弹出，将通过单击所选通知的链接来显示通知。数据从数据库加载到弹出窗口。所有这些都有效，但是当我在刷新通知页面后打开弹出窗口时出现了这个奇怪的错误。该错误发生在第一次打开弹出窗口时，位置全部错误并且“关闭”-按钮仍在使用应删除的对话框 UI css。第一次和第二次打开弹出窗口后一切正常，没有任何问题，按钮颜色和位置正确。

这是我使用的 jQuery 脚本：

```
$(function() {
  $( ".dialog" ).dialog({autoOpen: false}); 
  $(".load_data").on("click", function() {
    var url = this.href;  // get the url from the anchor
    var dialog = $(".dialog2").dialog({
      show: "fade",
      hide: "fade",
      width: "auto",
      height: "auto",
      title: "Notice",
      closeOnEscape: true,
      modal: true,
      position: "center",
      open: function() {
        $('button').removeClass('ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover');
        //removes jquery css from button
        $('.ui-dialog-buttonpane').find('button:contains("Close")').addClass('button_cancel');
        //add css to close button
      },    
      buttons: {
        "Close": function() {
          $( this ).dialog( "close" );
        }
      },
    }); // get DOM element
    // load remote content
    dialog.load(
      url, // to the url from the anchor href attribute
      {},
      function(responseText, textStatus, XMLHttpRequest) {
        // success callback
        dialog.dialog();  // show the dialog                        
      }                         
    );                  

    return false; // prevent the default action on the anchor
  });
  $(".open_notice" ).click(function() {
    $( ".dialog" ).dialog( "open" );
    return false;       
  });
}); 
```

# c# - 为一个控制器创建多个路由

> ID：10456057
> 
> 赞同：2
> 
> 时间：2012-05-04T20:58:39.277
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, routes

我在尝试为我的一个控制器创建两个自定义路由时遇到问题。我有这两种情况：

1.  如果有人导航到 /Register，它应该使用 Members 控制器和 Index 视图
2.  如果有人导航到 /Register/NY，它应该使用 Members 控制器和 Register 视图，并将状态代码作为参数传递

这是我的 global.asax 文件中的内容：

```
routes.MapRoute(
    "RegisterMap", // Route name
    "Register", // URL with parameters
    new { controller = "Members", action = "Index" } // Parameter defaults    
);

routes.MapRoute(
    "Register", // Route name
    "Register/{stateCode}", // URL with parameters
    new { controller = "Members", action = "Register" } // Parameter defaults       
);

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }    
); 
```

如果我导航到 /Register/NY，一切正常，但如果我只导航到 /Register，我会收到 404 错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:09:43.437

我检查了场景，它工作正常。请验证它。

1.  您的 MembersController 类存在于 /Controller/ 中，它扩展了 Controller。
2.  MembersController 包含一个没有参数或可空参数的方法 Index。
3.  索引操作方法没有 HTTPPOST 方法。[这可能导致 404 错误。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:08:03.693

你的路由是正确的。

我会验证您在成员控制器中有一个索引操作。

# php - 试图在 MAMP 中获取非对象的属性

> ID：10456060
> 
> 赞同：0
> 
> 时间：2012-05-04T20:59:12.290
> 
> 标签：php, ajax, mysqli

我对下面的代码有疑问。当我想选择一项（在本例中为街道）时，一切正常，在调试模式下没有错误。（我正在使用 AJAX 生成消息）

```
public function placeAvailable()
    {
        //open connectie naar database
        include("Connection.php"); 

        $sSql= "select Street from tblPlaces
                where Street = '".$this->m_sStreet."'";

        $vResult=$mysqli->query($sSql);
        if($vResult->num_rows>0)
        {
            return(false);  
        }
        else
        {
            return(true);
        }   
        $mysqli->close();   
    } 
```

当我想向我的选择查询添加一个额外的参数时，出现错误**（注意：尝试在第 86 行的 /Applications/MAMP/htdocs/foodsquare/assets/classes/places.class.php 中获取非对象的属性）**

```
$vResult=$mysqli->query($sSql);
        if($vResult->num_rows>0) 
```

我添加的额外参数如下。

```
$sSql= "select Street from tblPlaces
                where Street = '".$this->m_sStreet."' AND where HouseNumber = '".$this->m_sHouseNumber."'"; 
```

乔希在这里你可以看到整个代码

```
<?php

class Places {

    private $m_sName;
    private $m_sStreet;
    private $m_sHouseNumber;
    private $m_sCity;
    private $m_sCategory;

    public function __set($p_sProperty, $p_vValue) {
        switch($p_sProperty) {
            case "Name" :
                $this -> m_sName = $p_vValue;
                break;
            case "Street" :
                $this -> m_sStreet = $p_vValue;
                break;
            case "HouseNumber" :
                $this -> m_sHouseNumber= $p_vValue;
                break;
            case "City" :
                $this -> m_sCity = $p_vValue;
                break;
            case "Category" :
                $this -> m_sCategory = $p_vValue;
                break;
        }
    }

    public function __get($p_sProperty) {
        $vResult = null;
        switch($p_sProperty) {
            case "Name" :
                $vResult = $this -> m_sName;
                break;
            case "Street" :
                $vResult = $this -> m_sStreet;
                break;
            case "HouseNumber" :
                $vResult = $this -> m_sHouseNumber;
                break;
            case "City" :
                $vResult = $this -> m_sCity;
                break;
            case "Category" :
                $vResult = $this -> m_sCategory;
                break;
        }
        return $vResult;
    }

    public function addPlaces() 
    {
        include_once("connection.php");
            $sSql = "INSERT INTO tblPlaces
                (Name, 
                Street, 
                HouseNumber, 
                City, 
                Category) 
                VALUES 
                ('" . $mysqli -> real_escape_string($this -> m_sName) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sStreet) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sHouseNumber) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sCity) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sCategory) . "');";

        if (!$mysqli -> query($sSql))
        {
            throw new Exception("Er is iets mis gelopen bij het toevoegen van een plaats");
        }

    }

    public function placeAvailable()
    {
        //open connectie naar database
        include("Connection.php");
        global $mysqli;

        //sql query selecteert straat uit tblplaces waar de straat gelijk is aan het inputveld street uit het formulier
        $sSql= "select Street from tblPlaces
                where Street = '".$this->m_sStreet."' AND where HouseNumber = '".$this->m_sHouseNumber."'";

        $vResult=$mysqli->query($sSql);
        if($vResult->num_rows>0)
        {
            //Street (place) is al in gebruik
            return(false);  
        }
        else
        {
            //Hij is nog niet in gebruik
            return(true);
        }
        //database sluiten  
        $mysqli->close();   
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:00:45.863

您从不定义`$mysqli`，您需要创建连接。

如果它在 you 中`Connection.php`，则需要添加：

`global $mysqli;`

在您包含之后，但在您的查询之前。

该错误意味着它`$mysqli`不是一个对象，并且没有这样的属性，属性为`query($data)`.

# jsf-2 - JSF/Facelets ajax 视图渲染问题

> ID：10456066
> 
> 赞同：0
> 
> 时间：2012-05-04T21:00:00.867
> 
> 标签：jsf-2, richfaces, facelets

我有一个带有两个命令链接按钮和两个输出面板的 .xhtml。一切都在同一个表格中。当我单击命令链接时，为什么我需要明确说明需要呈现哪些输出面板？如果没有指定，是否不应该根据 Spec 的以下描述重新构建整个视图（或）我是否在混合东西？

以及我们是否真的需要设置`action="navigation-rule"`何时要在同一视图中刷新组件？

```
Link controls are typically used to perform complete form submissions for data storing.
As a consequence, the <a4j:commandLink> component has the execute="@form" setting by default. 
```

非常感谢任何输入。

这是供参考的代码：

```
 <h:form>
        <div>
            <a4j:outputPanel layout="block">
                <!--Tab1 -->
                <a4j:commandLink
                    id="homeTabLinkId"
                    value="Tab1"
                    actionListener="somelistener" render="contentDIVId">
                    <h:outputText value=""/>
                </a4j:commandLink>
                <!--Hosts Tab -->
                <a4j:commandLink 
                    id="hostsTabLinkId"
                    value="Tab2"
                    actionListener="anotherlistener" render="contentDIVId">
                    <h:outputText value=""/>
                </a4j:commandLink>

            </a4j:outputPanel>
        </div>

        <a4j:outputPanel layout="block" id="contentDIVId">
            <!-- dynamically gets src based on tab click -->
            <ui:include id="tabBodyPanel" src="elexpression"/>
        </a4j:outputPanel>

        <a4j:outputPanel layout="block" id="anotherdiv">
            <h:outputText value="Inside second div"/>
        </a4j:outputPanel>

    </h:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:04:22.863

> *如果没有指定，是否不应该根据 Spec 的以下描述重新构建整个视图（或）我是否在混合东西？*

这仅适用于同步请求。替换`<a4j:commandLink>`为`<h:commandLink>`，您将获得所描述的行为。

* * *

> *当我们想在同一个视图中刷新组件时，我们真的需要设置 action="navigation-rule" 吗？*

不，action 方法只能返回`null`or `void`。否则，视图将被重新创建，如果您在视图上查看了作用域 bean，那么这不是您想要的。

# java - 在 Java 中一起添加 PDF

> ID：10456073
> 
> 赞同：1
> 
> 时间：2012-05-04T21:00:28.213
> 
> 标签：java, pdf, pdf-generation, bytearray

我正在使用[一个 API](http://help.sap.com/javadocs/boe/xir2/ws/en/index.html)，它允许我生成 PDF 格式的报告。从 api 我得到 PDF 格式的`byte[]`. 我通过电子邮件将报告发送给用户。有时用户会得到一份报告，但在许多情况下，他们会得到许多报告。

**我想知道**是否可以获取多个 pdf 的字节并以某种方式将它们与另一个（或许多）报告结合起来，所以我只向用户发送一个 pdf 而不是 3 个或 4 个。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:20:35.963

不，连接字节流将不起作用（阅读标准；-）。您需要使用[Apache PDFBox 之](http://pdfbox.apache.org/)类的东西来创建新的 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:57:21.693

我强烈推荐使用 IText 在 Java 中生成和操作 pdf。但即使您想使用原始包生成 pdf，您仍然可以使用 IText 将所有 pdf 合并为 1 个大 pdf，如下所述：[iText Merge PDF withcropbox](https://stackoverflow.com/questions/6646443/itext-merge-pdf-with-cropbox)

# javascript - 我可以就在 Magento 页面上寻找不需要的 JavaScript 获得建议吗？

> ID：10456074
> 
> 赞同：0
> 
> 时间：2012-05-04T21:00:33.097
> 
> 标签：javascript, magento

我在 Magento 1.7 安装上有一个产品页面，该页面具有分层定价的产品。它应该说买 4 并节省 13%，它会在 13% 的值被 100% 覆盖之前的瞬间完成（这是不正确的）。我只能假设页面上有一些错误的 JavaScript 导致了这种情况，但我不知道如何找到它。有人可以给我一些关于如何找到和修复这个错误的建议吗？

这是页面： http: [//makethemostof.co.uk/lace-print-cushions](http://makethemostof.co.uk/lace-print-cushions)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T21:08:20.317

在 Chrome Inspector 中查看了 HTML 元素：`class="benefit"`.

在 loupe.js 文件中的 Resources 选项卡中搜索“.benefit”，1 个匹配项。

转到脚本选项卡，loupe.js 文件，美化代码，搜索“.benefit”。

```
 $$('.benefit').each(function(el) {
            var parsePrice = function(html) {
                return parseFloat(/\d+\.?\d*/.exec(html));
            };
            var container = $(this.containers[3]) ? this.containers[3] : this.containers[0];
            var price = parsePrice($(container).innerHTML);
            var tierPrice = $$('.price.tier-' + i);
            tierPrice = tierPrice.length ? parseInt(tierPrice[0].innerHTML, 10) : 0;
            var $percent = Selector.findChildElements(el, ['.percent.tier-' + i]);
            $percent.each(function(el) {
                el.innerHTML = Math.ceil(100 - ((100 / price) * tierPrice));
            });
        }, this); 
```

多亏了 Chrome Inspector，不到一分钟就找到了脚本。

现在，这是罪魁祸首：

```
el.innerHTML = Math.ceil(100 - ((100 / price) * tierPrice)); 
```

这是一个简单的数学计算。我不知道是什么`tierPrice`，但我相信您可以找到适合您业务的正确计算方法（`Math.ceil`将数字四舍五入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:59:23.597

其实是

```
for (var i > 0; i < this.tierPrices.length; i++) { 
```

如果您将其替换为 1，它将仅计算第一层价格的正确节省百分比，而不是之后的其他价格，它们仍将设置为 100%。

虽然他需要为所有层级价格计算它，所以如果`i`大于 0，他需要计算正确的层级百分比，否则它与产品价格相同或等于 0 或 100%

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:29:02.543

对于那些对 Magento 1.7 中层级价格节省总是显示为 100% 的错误特别感兴趣的人，这是修复：

在 js/varien/product.js 中更改第 748 行的以下内容：

```
for (var i = 0; i < this.tierPrices.length; i++) { 
```

和

```
for (var i > 1; i < this.tierPrices.length; i++) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:09:45.793

虽然这是一篇关于试图找出问题根源的好帖子，但我发现页面上的解决方案只是阻止代码运行，它们实际上并没有解决问题。我在这里发布了这个问题的解决方案：

[https://stackoverflow.com/a/16022796/159341](https://stackoverflow.com/a/16022796/159341)

# google-maps - 路线折线未使用 DirectionsRenderer 显示谷歌地图 v3？

> ID：10456076
> 
> 赞同：0
> 
> 时间：2012-05-04T21:01:03.193
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图 api V3，有些事情出错了路线没有显示。这是代码

```
function addRoute(source,destination,color){
        deleteOverlays();
        var arr = [];
        var request = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
        var queryString = "?source=" + source+"&destination="+destination;
        request.open("GET","url to get the stops"+ queryString, true);
        request.send(null);
        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                if (request.status == 200) {
                    route = eval(request.responseText);
                    for(var i = 0; i < route.length; i++){
                        //alert("route::"+route[i].stopname);
                        var marker = addMarker(new google.maps.LatLng(route[i].lattitude,route[i].langitude),route[i].stopname);
                        markersArray.push(marker);
                        arr.push({ location: new google.maps.LatLng(route[i].lattitude,route[i].langitude), stopover: true });
                        map.setCenter(new google.maps.LatLng(route[i].lattitude,route[i].langitude));

                    }
                    drawPolyline(source,destination,arr,color);
                    showOverlays();
                }
            }
        };
} 
```

ajax 响应是这种格式

```
[{"stopname":"Bookstore,Hamilton,NY","lattitude":42.8040014451186,"langitude":-75.548035569867},{"stopname":"Townhouse,Hamilton,NY","lattitude":42.8094640653946,"langitude":-75.5441731888855},{"stopname":"Cutten Hall,Hamilton,NY","lattitude":42.8162955973712,"langitude":-75.5402678925598},{"stopname":"Whitnall Field,Hamilton,NY","lattitude":42.8177908781254,"langitude":-75.5412549454773},{"stopname":"Person Hall,Hamilton,NY","lattitude":42.8179325344271,"langitude":-75.5369204957092},{"stopname":"Frank Dining Hall,Hamilton,NY","lattitude":42.8159650567458,"langitude":-75.5374569375122},{"stopname":"Person Hall,Hamilton,NY","lattitude":42.8178066177305,"langitude":-75.536877580365},{"stopname":"Whitnall Field,Hamilton,NY","lattitude":42.817633481854,"langitude":-75.5412334878052},{"stopname":"University Ct./Burch,Hamilton,NY","lattitude":42.8183102829785,"langitude":-75.5432934243286},{"stopname":"Parker Apartments,Hamilton,NY","lattitude":42.8182945435016,"langitude":-75.5456108529175},{"stopname":"Newell Apartments ,Hamilton,NY","lattitude":42.8179167948541,"langitude":-75.5466837365235}]

    function drawPolyline(source,destination,waypoints,color){
         var polylineOptionsActual = { strokeColor: color };
         var directionsDisplay = new google.maps.DirectionsRenderer({
                suppressMarkers: true,
                suppressInfoWindows: true,
                polylineOptions: polylineOptionsActual
           }); 
         var directionsService = new google.maps.DirectionsService();
         directionsDisplay.setMap(map);
         //var mode = google.maps.DirectionsTravelMode.DRIVING;
         var request = {
                    origin: source,
                    destination: destination,
                    travelMode: google.maps.TravelMode.DRIVING,
                    waypoints:waypoints
                };
                directionsService.route(request, function(response, status) {
                  if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                    directionsArray.push(directionsDisplay);
                  }
                });
    }

every value is going fine. 
```

但路线没有显示，谷歌地图api V3有什么改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:54:34.483

假设您没有营业执照：

有最大值的限制。8 个航路点，但您目前有 11 个。

检查 的`status`回调`directionsService.route()`，您应该收到**“MAX_WAYPOINTS_EXCEEDED** ”-警告

# java - FragmentManager 中的 NullPointerException

> ID：10456077
> 
> 赞同：28
> 
> 时间：2012-05-04T21:01:04.947
> 
> 标签：java, android, android-fragments, android-support-library

我正在使用 Android 兼容性库，偶尔会感到奇怪`NullPointerException`：

```
java.lang.NullPointerException
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:960)
    at android.support.v4.app.FragmentManagerImpl.performPendingDeferredStart(FragmentManager.java:768)
    at android.support.v4.app.FragmentManagerImpl.startPendingDeferredFragments(FragmentManager.java:1104)
    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:410)
    at android.support.v4.content.Loader.deliverResult(Loader.java:103)
    at android.support.v4.content.CursorLoader.deliverResult(CursorLoader.java:81)
    at android.support.v4.content.CursorLoader.onStartLoading(CursorLoader.java:126)
    at android.support.v4.content.Loader.startLoading(Loader.java:197)
    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.start(LoaderManager.java:262)
    at android.support.v4.app.LoaderManagerImpl.doStart(LoaderManager.java:710)
    at android.support.v4.app.Fragment.onStart(Fragment.java:981)
    at android.support.v4.app.Fragment.performStart(Fragment.java:1332)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:906)
    at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1240)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:612)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:139)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:804)
    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:433)
    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:405)
    at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:386)
    ... 
```

显然，我做错**了什么**，以允许`FragmentManager`它进入这样的状态，它可能会像这样崩溃，但我不知道是什么。中的[相关代码](https://github.com/grantland/android-support-v4/blob/master/src/java/android/support/v4/app/FragmentManager.java#L960)`FragmentManagerImpl`没有为我提供任何线索。我猜`mActivity`是`null`在代码中的那个点？但这似乎是不可能的，因为活动已经在屏幕上，而且我没有向它添加任何片段 - 只是在`ViewPager`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-12T09:37:19.373

好的，伙计们，在我的头撞到砖墙上一段时间后，我发现这与我的片段声明直接相关`setRetainInstance(true)`。删除它后，问题就消失了。这似乎是一个兼容性库错误......

我将在适当的 Google 项目下提出一些建议。祝你好运，如果你正在读这篇慢慢啜泣着的自己！我希望这能让你解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T21:33:28.987

几天前我收到了这个错误并且很困惑，但我发现这是因为 a`FragmentTransaction`似乎没有得到任何待处理的交易，所以当调用`executePendingTransactions();`A时`NPE`，就像这个一样被抛出。
我通过确保每个事务实际上都改变了一些东西来解决它（即添加片段 1 -> 删除片段 1 -> 提交/执行不起作用）。
还要确保寻呼机中的任何片段都没有变成`null`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-04T15:18:21.607

我遇到了同样的错误，因为我在视图寻呼机适配器中引用了片段的实例，而不是片段本身。

每次调用片段时创建片段的新实例可解决此错误。显然这是正确的编程，但以防万一其他菜鸟犯了这个错误......

```
@Override
public Fragment getItem(int position) {
    if(position == 0)
        return new Walkthrough_Fragment_1();
    if(position == 1)
        return new Walkthrough_Fragment_4();
    if(position == 2)
        return new Walkthrough_Fragment_2();
    else{
        return new  Walkthrough_Fragment_3();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-06T08:52:48.933

在`FragmentPagerAdapter`使用`setRetainInstance(true)`.

如果你想维护`setRetainInstance(true)`你可以使用[这个问题](https://stackoverflow.com/a/19099987/4344807)的@Marc答案：

```
@Override
public void restoreState(Parcelable arg0, ClassLoader arg1) {
    //do nothing here! no call to super.restoreState(arg0, arg1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T21:15:42.843

在某些时候，您正在使用未初始化的 FragmentManager 类的实例。找到该点并正确初始化对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T18:22:31.353

我刚刚读到您不能对在编译时添加的片段执行某些事务。例如，如果您的 Fragment 是在 XML 中定义的，而您尝试替换它，那就太好了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-13T03:53:47.177

我通过将**FragmentManager 作为静态全局变量解决了我的问题，然后在您的 onCreate 方法中对其进行了初始化**。我发现在代码中的任何地方使用 getSupportFragmentManager() 都会导致此异常，因为 getSupportFragmentManager() 可能指向您较旧的片段管理器值并且可能不会被引用。

这是一个例子：

```
 public class yourClass{

      private static FragmentManager myFragmentManagerSupport; 
      ...

        @Override
        public void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);
          myFragmentManagerSupport = this.getSupportFragmentManager();

              ....

          }

         /*Then reuse myFragmentManagerSupport  everywhere you needed instead of  
         *                     getSupportFragmentManager()
         */

    } 
```

希望它有所帮助。

# json - 在 MVC 3 项目中显示 JsonResult 返回的 ModelState 错误？

> ID：10456084
> 
> 赞同：5
> 
> 时间：2012-05-04T21:01:59.250
> 
> 标签：json, asp.net-mvc-3, error-handling, asp.net-mvc-validation

我有一个使用 JsonResult 操作而不是 ActionResult的*创建页面。*在 ActionResult 操作中，错误显示在违规字段旁边的视图中。现在 JsonResult 只返回一个显示在警告框中的字符串。

我可以在视图上显示 ModelState 错误吗？

**控制器**

```
[HttpPost]
public JsonResult Create(Tload tload)
    {
        if (ModelState.IsValid)
        {                
          ...save changes
            return Json(new { Success = 1, TransloadID = transload.TransloadID, ex = "" });
        }
        else
        {
        string totalError = "";
        foreach (var obj in ModelState.Values)
        {
            foreach (var error in obj.Errors)
            {
                if (!string.IsNullOrEmpty(error.ErrorMessage))
                {
                    totalError = totalError + error.ErrorMessage + Environment.NewLine;
                }
            }
        } 

        return Json(new { Success = 0, ex = new Exception(totalError).Message.ToString()});
    } 
```

**jquery/javascript 代码在视图中**

```
function Save() {
        // Step 1: Read View Data and Create JSON Object
...do stuff here
        // Set 2: Ajax Post
        // Here i have used ajax post for saving/updating information
        $.ajax({
            url: '/Expedite/Create',
            data: JSON.stringify(salesmain),
            type: 'POST',
            contentType: 'application/json;',
            dataType: 'json',
            success: function (result) {

                if (result.Success == "1") {
                    window.location.href = "/Expedite/index";
                }
                else {
                    alert(result.ex);
                }
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:35:55.973

有一个错误的占位符并最初隐藏它

```
<div id="err"></div> 
```

以及出现错误时

```
else {
       $("#err").html(result.ex);
       $("#err").show();
       //or you can use .slideDown() etc            
} 
```

# sql - SQL - 存储过程 - 字符串或二进制数据将被截断

> ID：10456085
> 
> 赞同：2
> 
> 时间：2012-05-04T21:02:07.200
> 
> 标签：sql, tsql

我有一个存储过程，其中一个参数我输入 1+FEU0+1663 作为 varchar(50) 我收到以下消息：

```
 String or binary data would be truncated. 
```

如果我输入不同的值，它工作正常。有没有办法让我输入 1+FEU0+1663 这样它就不会造成问题。我相信问题可能是由于 + 符号，SQL 正试图将其变为更大的数字。

这就是我用来执行的

```
 exec usp_Insert_Lst   'E3441-NI0dd4-12', 
                              null, -- fname
                              null, -- lanme
                              null,  -- mi
                              null,  -- email
                              '1+FEU0+1663' -- PHID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:29:56.547

我无法仅使用您在问题中提供的详细信息来重现您的案例。

```
CREATE PROC usp_Insert_Lst(
    @p1 varchar(50)
    ,@p2 varchar(50)
    ,@p3 varchar(50)
    ,@p4 varchar(50)
    ,@p5 varchar(50)
    ,@p6 varchar(50)
)
AS
SELECT @p1, @p2, @p3, @p4, @p5, @p6
GO

exec usp_Insert_Lst   'E3441-NI0dd4-12', 
    null, -- fname
    null, -- lanme
    null,  -- mi
    null,  -- email
    '1+FEU0+1663' -- PHID
GO

--Result
--------------- ---- ---- ---- ---- ------------
E3441-NI0dd4-12 NULL NULL NULL NULL 1+FEU0+1663 
```

假设您的程序中有这样的内容（usp_Insert_Lst）：

```
INSERT your_table (param1, fname, lanme, mi, email, PHID)
SELECT @p1, @p2, @p3, @p4, @p5, @p6 
```

如果此插入返回：“字符串或二进制数据将被截断。”

那么它只能表示 your_table.fname 或 your_table.PHID 的大小分别小于 LEN('E3441-NI0dd4-12') 和/或 LEN(1+FEU0+1663) 。

* * *

根据您的评论：我的字段为 varchar(50)

如果存储过程有@param1 varchar(50) 和your_table.field1 varchar(50)，那么给出字符串或二进制消息的错误可能是在过程开始和插入到your_table 之间。

```
CREATE PROC usp_Insert_Lst(
    @p1 varchar(50)
...
)
AS
...
...  <-- error to be found here
...
INSERT your_table (param1,...)
SELECT @p1,... 
```

# python - matplotlib，可以绘图但不能分散

> ID：10456088
> 
> 赞同：8
> 
> 时间：2012-05-04T21:02:24.397
> 
> 标签：python, matplotlib

我有 matplotlib.pyplot 的奇怪行为。我有两个数组 x 和 y。我想分散这些点。所以我使用分散功能：

```
ax.scatter(x, y, 'r')
plt.xlabel('average revsion size')
plt.ylabel('time (seconds)')
plt.savefig('time.png', format='png') 
```

这段代码给了我错误 `otImplementedError: Not implemented for this type` 但是如果我用 plt.plot 替换 plt.scatter ，那么它会绘制它。可能是什么问题。

此外，如果我使用 plt.show() 它会打开 25 个窗口（25 是 x 的长度）。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T21:27:38.490

问题是，`scatter`不要`plot`以相同的顺序接受论点。尝试`scatter(x, y, c='r')`改用（假设它是您要设置的颜色）。也请查看[文档`scatter`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)。

```
from matplotlib import pyplot as plt

x = [1,2,3,4,5,6]
y = [2,4,6,3,1,5]

plt.scatter(x, y, c='r')
plt.show() 
```

# linux - Linux下的可视化内存调试应用？

> ID：10456092
> 
> 赞同：0
> 
> 时间：2012-05-04T21:02:49.343
> 
> 标签：linux, debugging, cuda, gdb, cuda-gdb

是否存在类似于[Visual Profiler for CUDA](http://developer.nvidia.com/nvidia-visual-profiler)的调试应用程序？它根据执行时间在功能级别显示有关应用程序的信息。是否有针对常规 C/C++ 应用程序的功能，以便我可以查看哪些函数占用的时间和内存最多？

我正在尝试调试一个读取大量数据文件并使用自定义类来读取文件并在内部将其表示为向量向量的应用程序。我有另一个类，它表示对数据文件中的数据执行的操作。当我在循环中读取越来越多的文件并对其进行操作时，内存使用量只会增加，直到操作系统杀死应用程序。我一直很擅长清理使用动态内存。一些可视化的东西可以帮助我浏览所有文件和功能，看看哪些使用时间和内存最多，这将是非常有益的！

我可以在我的应用程序中使用 libproc 来确认循环的每次迭代，内存使用量从大约 500 兆兆增加到高达 19 GB。这不应该是因为数据的范围在循环内，所以在循环的下一次迭代中，使用数据的 C++ 对象应该已经被清除并返回给操作系统，但这并没有发生。

我希望这不会太模糊，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:50:24.907

Search for "c++ memory leak" on SO. See for instance: [Memory leak tool for C++ under Windows](https://stackoverflow.com/questions/1502799/memory-leak-tool-for-c-under-windows)

I'm guessing folks will close this as a duplicate.

# svn - 公开 SVN 存储库

> ID：10456094
> 
> 赞同：1
> 
> 时间：2012-05-04T21:02:53.340
> 
> 标签：svn

我有一个本地 SVN 存储库。我想把它公开，所以其他人可以通过 svn checkout 命令下载它。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:59:48.023

SVN 最常与 Apache 等 http 服务器一起使用。在windows上请查看VisualSVN服务器，它很容易使用： http: [//www.visualsvn.com/](http://www.visualsvn.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T21:05:42.003

谷歌代码是一个很好的起点。您可以创建一个项目并使用 Subversion 作为源代码控制，然后将您的文件移过来。

[http://code.google.com](http://code.google.com)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T21:11:01.897

有很多不同的网站可以做到这一点。我认为关于网站的决定应该更多地基于补充选项，如问题管理、邮件列表......

[http://code.google.com](http://code.google.com)

[http://sourceforge.net](http://sourceforge.net)

[http://www.berlios.de/](http://www.berlios.de/)

......

# javascript - 图像 Javascript 弹出窗口

> ID：10456098
> 
> 赞同：-2
> 
> 时间：2012-05-04T21:03:18.863
> 
> 标签：javascript, html, css

我正在寻找图像弹出的解决方案。

鼠标单击时要放大的通常图像。这个想法应该类似于 Highslide 弹出窗口。我想使用 CSS 分配事件。例如，如果 img 标签具有特定的类，则应放大图像。

也许有人有一个很好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:08:49.833

试试[花式盒子](http://fancybox.net/)。他们在网站上有演示和代码示例，因此您应该能够弄清楚如何仅在具有特定类的元素上触发它。

```
$('img.someClass').fancybox({/* ..whatever options you want.. */ }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:55:24.180

试试这个jsfiddle：http: [//jsfiddle.net/3Z8RZ/37/](http://jsfiddle.net/3Z8RZ/37/)

HTML：

```
<button>bigger</button>
<img class="smaller" src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/YellowLabradorLooking_new.jpg/260px-YellowLabradorLooking_new.jpg"> 
```

JS：

```
 $(document.body).on('click', 'button', function() {         
        $('img').toggleClass('bigger');       
    });​ 
```

CSS：

```
.smaller{
width:50px;
height:50px;
}
.bigger{
    width:250px;
    height:250px;
}​ 
```

# java - Java XPath 查询没有在节点中获取文本？

> ID：10456101
> 
> 赞同：3
> 
> 时间：2012-05-04T21:03:28.550
> 
> 标签：java, xml, xpath

当我运行以下代码时，我得到输出`Left:`而不是`Left: 16`.

```
 // Retrieve DOM from XML file
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db;
    Document dom = null;
    try {
        db = dbf.newDocumentBuilder();
        dom = db.parse("config");
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    XPathFactory xPathFactory = XPathFactory.newInstance();
    XPath xPath = xPathFactory.newXPath();

    try {
        String left = (String) xPath.evaluate(
                "/settings/boundaries[0]/left[0]", dom,
                XPathConstants.STRING);
        System.out.println("Left: " + left);
    } catch (XPathExpressionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这是XML文件

```
<settings>
    <boundaries>
        <left>16</left>
        <right>301</right>
        <bottom>370</bottom>
        <top>171</top>
    </boundaries>
</settings> 
```

**编辑：**根据答案，这应该有效，但它没有：

```
// Retrieve DOM from XML file
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db;
    Document dom = null;
    try {
        db = dbf.newDocumentBuilder();
        dom = db.parse("config");
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    XPathFactory xPathFactory = XPathFactory.newInstance();
    XPath xPath = xPathFactory.newXPath();

    try {
        String left = (String) xPath.evaluate(
                "/settings/boundaries[0]/left[0]/text()", dom,
                XPathConstants.STRING);
        System.out.println("Left: " + left);
    } catch (XPathExpressionException e) {
        e.printStackTrace();
    } 
```

另请注意，此代码，

```
Element el = (Element) dom.getDocumentElement()
            .getElementsByTagName("boundaries").item(0);

System.out.println(el.getElementsByTagName("left").item(0)); 
```

印刷`[left: null]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:14:15.830

节点从 1 开始索引。尝试`/settings/boundaries[1]/left[1]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T21:06:03.093

您正在使用节点的 toString() 定义。这没有记录在案，特别是做任何事情。如果您希望节点名称使用 XPathConstants.NODE 并使用节点 API，或者如果您希望在评估调用中将值附加 .text() 到您的 xpath 字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T22:39:36.487

正如我所使用的那样，您必须在末尾添加 /text() 以检索该节点上的数据

> /settings/boundaries[0]/left[0]/text()

# jquery - jquery动画悬停

> ID：10456103
> 
> 赞同：0
> 
> 时间：2012-05-04T21:03:49.513
> 
> 标签：jquery

我按照这里的例子

[http://www.incg.nl/blog/2008/hover-block-jquery/](http://www.incg.nl/blog/2008/hover-block-jquery/)

这奏效了。我所做的也是让它变大并添加背景图像。调整 CSS 以将悬停动画移动到背景图像中的特定位置。这一切也都有效，但当您将鼠标悬停在背景图像上的任何位置时，它就会产生动画。我希望它仅在您将鼠标悬停在动画图像上时悬停，或者我可以设置像边距吗？

JS：

```
$(function () {
    $('ul.hover_block li').hover(function () {
        $(this).find('img').animate({
            top: '374px'
        }, {
            queue: false,
            duration: 500
        });
    }, function () {
        $(this).find('img').animate({
            top: '0px'
        }, {
            queue: false,
            duration: 500
        });
    });
    $('ul.hover_block2 li').hover(function () {
        $(this).find('img').animate({
            left: '178px'
        }, {
            queue: false,
            duration: 500
        });
    }, function () {
        $(this).find('img').animate({
            left: '0px'
        }, {
            queue: false,
            duration: 500
        });
    });
}); 
```

CSS：

```
body {
    background: #666
}

ul.hover_block {
    display: block;
    overflow: hidden;
    height: 1%;
    padding-bottom: 15px;
}

ul.hover_block li, ul.hover_block2 li {
    list-style: none;
    float: left;
    background: #fff;
    padding: 10px;
    padding-left: 315px;
    padding-top: 78px;
    width: 500px;
    position: relative;
    margin-right: 20px;
    background-image: url('images/2.png');
    background-repeat: no-repeat;
}

ul.hover_block li a, ul.hover_block2 li a {
    display: block;
    position: relative;
    overflow: hidden;
    height: 400px;
    width: 500px;
    padding: 16px;
    color: #000;
    font: 1.6em/1.3 Helvetica, Arial, sans-serif;
}

ul.hover_block li a, ul.hover_block2 li a {
    text-decoration: none
}

ul.hover_block li img, ul.hover_block2 li img {
    position: absolute;
    top: 0;
    left: 0;
    border: 0;
} 
```

HTML：

```
<body>
    <ul class="hover_block">
        <li>
            <a href=""><img src="images/3.png" alt="" /> </a>
        </li>
    </ul>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:34:12.447

我认为您使用“ul.hover_block li”的选择器是指悬停在列表元素上，而不是图像。如果您将选择器更改为引用 img 而不是 li 它应该可以工作，

看看这个：jsfiddle.net/edddotcom/eYp99/

# sql - 仅聚合满足概率条件的行

> ID：10456105
> 
> 赞同：1
> 
> 时间：2012-05-04T21:03:51.273
> 
> 标签：sql, tsql

我有一个以字符串形式获取 sql 查询的过程。例子：

```
SELECT SUM(Refuse) FROM FOOD_DES WHERE Refuse > 1 
```

但我只需要对满足条件的行求和。条件如下：

```
CONVERT(INT,RAND() * 100 ) <= @probability 
```

但这不起作用（它总结了所有元素）：

```
SELECT SUM(Refuse) FROM FOOD_DES WHERE Refuse > 1 AND
CONVERT(INT,RAND() * 100 ) <= @probability 
```

所以接下来尝试：

```
SELECT SUM(Refuse) FROM FOOD_DES  AS T CROSS APPLY fn_probability() AS F

CREATE FUNCTION fn_probability ( )
RETURNS @probabilityInfo TABLE ( Result INT )
AS 
    BEGIN 
        DECLARE @rand INT
        SET @rand = ( SELECT TOP 1
                                RandValue
                      FROM      RandView
                    )
        IF @rand <= 80 
            INSERT  INTO @probabilityInfo
                    ( Result )
            VALUES  ( 1 )
        RETURN  
    END 
```

> ```
> CREATE VIEW RandView
> AS 
> SELECT CONVERT(INT, RAND() * 100) AS RandValue 
> ```

但它也不起作用。任何的想法？：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:08:21.930

像这样怎么样：

```
WITH data(Refuse, RandomNumber) AS
(
    SELECT 
        Refuse
        ,CONVERT(INT, RAND(CHECKSUM(NEWID())) * 100) 
    FROM 
        FOOD_DES
    WHERE 
        Refuse > 1
)
SELECT
    SUM(Refuse) 
FROM
    data
WHERE
    RandomNumber <= @probability 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T03:22:44.663

`rand()`本身不起作用，因为它只在语句期间执行一次。

当我需要一组随机的行时，我通常会选择一个伪随机数：

```
select sum(refuse)
from 
(
   SELECT Refuse,
      row_number()  over (partition by null order by (select '')) as rownum
   FROM FOOD_DES
   WHERE Refuse > 1
) t
where mod(rownum*101-67, 100) < @probability 
```

# html - 在 html 中为 Chrome、Explorer 和 word 创建分页符

> ID：10456106
> 
> 赞同：9
> 
> 时间：2012-05-04T21:03:55.060
> 
> 标签：html, css, printing, ms-word

我似乎找不到一种一致的方法来创建一个可以跨 word、internet explorer 和 chrome 工作的分页符。

以下示例（来自[Google Chrome Printing Page Breaks](https://stackoverflow.com/questions/1630819/google-chrome-printing-page-breaks)）将为 Chrome 和 Internet Explorer 正确创建分页符，但在 word 中没有分页符。

```
 <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Paginated HTML</title>
    <style type="text/css" media="print">
      div.page
      {
        page-break-after: always;
        page-break-inside: avoid;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <h1>This is Page 1</h1>
    </div>
    <div class="page">
      <h1>This is Page 2</h1>
    </div>
    <div class="page">
      <h1>This is Page 3</h1>
    </div>
  </body> 
```

在弄乱了单词之后，我发现您可以使用以下内容添加分页符：

```
<br style="ms-special-character:line-break;page-break-before:always" /> 
```

这里的问题是 Internet Explorer 也将其视为分页符，因此如果您将这些方法结合起来，Chrome 和 Word 会正确分页符，但 Internet Explorer 会插入两个分页符。如果您只使用一个，那么 chrome 和 explorer 中的任何一个都是正确的，而 word 则不是等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:30:42.807

试试这个：

```
<!--[if IE]>
<br>
<![endif]-->
<!--[if !IE]>
<br style="ms-special-character:line-break;page-break-before:always" />
<br>
<![endif]--> 
```

这符合您的需求吗？（注意，这些在普通的旧 html 中工作。我在 Chrome 和 MS Word（以及 IE）中进行了测试，它们运行良好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:11:03.557

这是 IE8 和 IE9 之间的区别（前提是 IE9 处于标准模式），因此您需要以某种方式区分这些浏览器 - 使用条件注释或 CSS hack，例如：

```
div.page:not(.dummy)
{
    page-break-after: always;
    page-break-inside: avoid;
} 
```

（在 Chrome、Firefox、OpenOffice Writer [希望能充分替代 Word] 和 IE 7、8、9 中测试）

为了防止浏览器在 br 上应用分页符并理解：not，您可以添加这个，尽管我不知道有任何浏览器需要它：

```
br:not(.dummy)
{
    page-break-before: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:02:52.523

将相关的 CSS 放在 !IE 条件注释中。其他一切都可以保持原样。

```
<style type="text/css" media="print">
<!--[if !IE]>
      div.page
      {
        page-break-after: always;
        page-break-inside: avoid;
      }
<![endif]-->
   </style> 
```

Explorer 将`<!--[if !IE]>`和`<![endif]-->`标记之间的所有内容视为注释，Word 不会对其作出反应。所有其他浏览器将继续像以前一样显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:38:03.427

我知道这样的帖子会让我付出代价，但是，说真的，退后一步，重新考虑你想要完成的事情。

可以使用 Word 查看和打印报告的用户也可以使用 IE，并且很可能可以轻松访问 Chrome。所以我的猜测是 Word 不只是用于查看和打印，尤其是用于编辑。

我遵循了您的示例，并且我的（在各个方面都未修改）IE9 不会打印使用 Word 2010 插入的分页符，并且生成的 HTML 文档与初始文档几乎没有任何相似之处，尤其是 DIV 消失了，因此假设文档仍然打印同样在 Word 有发言权之后几乎是漫不经心的乐观。

这整个想法似乎被打破了：

*   考虑到 Word 的处理方式，以您的方式编写 HTML 似乎毫无意义
*   即使是最近的 IE 也无法处理使用 Word 插入分页符的简单示例
*   保存 Word 时，创建了一个语言设置特定目录和三个新文件，这为任何产品产生了大量可笑的必要测试
*   即使在静态的 Microsoft 生态系统中，也需要大量用户知识（生成目录、如何正确保存、如何正确复制整个文档）才能使这项工作
*   看来用户定义的设置很容易破坏任何使用 HTML 的解决方案

我建议最初将您的报告编写为 Word 文档。即使经过压缩，Word 文档仍然像 HTML 一样是标记，因此如果您已经可以生成 HTML，则可以轻松生成 Word。因为您可以为几乎所有基于 x86 或 ARM 的设备获得 Word 查看器，这似乎比在即使简单示例都失败的方向上探索更合理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T20:30:52.433

另一个可能对处理此类问题的某些人有所帮助的补充：该更改仅适用于块元素。在我们的旧测试中，有人使用“span”编写了一个块。我进行了多次测试，但无法让 Vreality 的解决方案发挥作用。然后我想可能是因为 span 不是块元素，所以默认添加 'display:block' 到不是块元素的元素。

另一件事：我正在使用最新的 Chrome (v.25)，“page-break-inside：避免；” 修复似乎不再需要。

# c# - Metro风格的数据输入表单应用

> ID：10456110
> 
> 赞同：4
> 
> 时间：2012-05-04T21:04:20.960
> 
> 标签：c#, user-interface, windows-8, microsoft-metro, windows-runtime

![http://elysium.codeplex.com/](../Images/72aa8fc4e30035911b3816d66c5ced0a.png)

[与](https://stackoverflow.com/questions/9379107/metro-guidelines-on-editor-applications)询问相对轻量级数据输入/编辑器应用程序开发的问题类似，这将遵循 Metro 设计指南。

*问题是您是否知道**我可以查看的整个应用程序的任何示例，**以了解（多页）表单应用程序的外观？即Windows 8 风格的[文本框](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700391.aspx)、复选框、组合框...*

*   也许[你知道在这里找一个](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples/view/SamplePack#content)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:46:02.670

我知道展示一些数据输入的最好的应用程序是日历。尝试创建一个新约会。我想有更多的应用程序有输入，但我只是不知道有什么在我脑海中。

# php - 在 PHP 中检查上传表单中的文件扩展名

> ID：10456113
> 
> 赞同：60
> 
> 时间：2012-05-04T21:04:36.230
> 
> 标签：php, file-upload

我检查上传或未上传的文件扩展名。我的示例方法有效，但现在我需要了解我的方法（使用`pathinfo`）是否正确。还有其他更好更快的方法吗？

```
$filename = $_FILES['video_file']['name'];
$ext = pathinfo($filename, PATHINFO_EXTENSION);
if ($ext !== 'gif' || $ext !== 'png' || $ext !== 'jpg') {
    echo 'error';
} 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-05-04T21:09:03.687

使用`if( $ext !== 'gif'`) 可能效率不高。如果你允许 20 种不同的扩展怎么办？

尝试：

```
$allowed = array('gif', 'png', 'jpg');
$filename = $_FILES['video_file']['name'];
$ext = pathinfo($filename, PATHINFO_EXTENSION);
if (!in_array($ext, $allowed)) {
    echo 'error';
} 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-05-04T21:08:07.793

检查文件扩展名不是最佳实践。完成此任务的首选方法是检查文件的[MIME 类型](http://www.iana.org/assignments/media-types/media-types.xhtml)。

来自 PHP：

```
<?php
    $finfo = finfo_open(FILEINFO_MIME_TYPE); // Return MIME type
    foreach (glob("*") as $filename) {
        echo finfo_file($finfo, $filename) . "\n";
    }
    finfo_close($finfo);
?> 
```

上面的示例将输出类似于您应该检查的内容。

```
text/html
image/gif
application/vnd.ms-excel 
```

尽管 MIME 类型也可以被欺骗（编辑文件的前几个字节并修改幻数），但它比编辑文件名更难。因此，您永远无法 100% 确定该文件类型实际上是什么，并且应注意处理用户上传/通过电子邮件发送的文件。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-04T21:08:52.533

就个人而言，我更喜欢使用[preg_match()](http://php.net/preg_match)函数：

```
if(preg_match("/\.(gif|png|jpg)$/", $filename)) 
```

或[in_array()](http://php.net/in_array)

```
$exts = array('gif', 'png', 'jpg'); 
if(in_array(end(explode('.', $filename)), $exts) 
```

如果您有很多扩展来验证和执行问题， With`in_array()`会很有用。验证文件图像的另一种方法：您可以使用`@imagecreatefrom*()`，如果函数失败，则表示图像无效。

例如：

```
function testimage($path)
{
   if(!preg_match("/\.(png|jpg|gif)$/",$path,$ext)) return 0;
   $ret = null;
   switch($ext)
   {
       case 'png': $ret = @imagecreatefrompng($path); break;
       case 'jpeg': $ret = @imagecreatefromjpeg($path); break;
       // ...
       default: $ret = 0;
   }

   return $ret;
} 
```

然后：

```
$valid = testimage('foo.png'); 
```

假设这`foo.png`是一个带有`.png`扩展名的 PHP 脚本文件，上述函数将失败。它可以避免像 shell update 和[LFI](http://en.wikipedia.org/wiki/Local_File_Inclusion)这样的攻击。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-04T21:09:51.050

pathinfo 很酷，但您的代码可以改进：

```
$filename = $_FILES['video_file']['name'];
$ext = pathinfo($filename, PATHINFO_EXTENSION);
$allowed = array('jpg','png','gif');
if( ! in_array( $ext, $allowed ) ) {echo 'error';} 
```

当然，简单地检查文件名的扩展名并不能保证文件类型是有效的图像。您可以考虑使用类似`getimagesize`验证上传的图像文件的功能。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-09T09:53:41.033

也可以通过其他方式检查文件类型。我相信这是检查上传文件类型的最简单方法。如果您正在处理图像文件，请使用以下代码。如果您正在处理视频文件，则将图像检查替换为 if 块中的视频检查......玩得开心

```
     $img_up = $_FILES['video_file']['type'];
$img_up_type = explode("/", $img_up);
$img_up_type_firstpart = $img_up_type[0];if($img_up_type_firstpart == "image") { // image 是图片文件类型，如果需要查看视频文件类型可以处理视频

/* 做你的逻辑代码 */
}
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-22T08:20:26.410

要正确实现这一点，最好检查 mime 类型。

```
function get_mime($file) {
  if (function_exists("finfo_file")) {
    $finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension
    $mime = finfo_file($finfo, $file);
    finfo_close($finfo);
    return $mime;
  } else if (function_exists("mime_content_type")) {
    return mime_content_type($file);
  } else if (!stristr(ini_get("disable_functions"), "shell_exec")) {
    // http://stackoverflow.com/a/134930/1593459
    $file = escapeshellarg($file);
    $mime = shell_exec("file -bi " . $file);
    return $mime;
  } else {
    return false;
  }
}
//pass the file name as
echo(get_mime($_FILES['file_name']['tmp_name'])); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-04T21:10:35.930

不确定这是否会有更快的计算时间，但另一种选择......

```
$acceptedFormats = array('gif', 'png', 'jpg');

if(!in_array(pathinfo($filename, PATHINFO_EXTENSION), $acceptedFormats))) {
    echo 'error';
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-10T21:56:03.997

我认为这可能对你有用

```
//<?php
    //checks file extension for images only
    $allowed =  array('gif','png' ,'jpg');
    $file = $_FILES['file']['name'];
    $ext = pathinfo($file, PATHINFO_EXTENSION);
        if(!in_array($ext,$allowed) ) 
            { 
//?>
<script>
       alert('file extension not allowed');
       window.location.href='some_link.php?file_type_not_allowed_error';
</script>

//<?php
exit(0);
    }
//?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-29T16:00:32.507

如何在上传之前验证表单上的文件扩展名（仅限 jpg/jpeg）。此处发布的另一个已发布答案的变体带有包含的数据过滤器，这在评估其他已发布的表单值时可能很有用。注意：如果为空，则错误将留空，因为这是我的用户的选项，而不是要求。

```
<?php
if(isset($_POST['save'])) {

//Validate image
if (empty($_POST["image"])) {
$imageError = "";
} else {
$image = test_input($_POST["image"]);
$allowed =  array('jpeg','jpg');
$ext = pathinfo($image, PATHINFO_EXTENSION);
if(!in_array($ext,$allowed) ) {
$imageError = "jpeg only";
}
}

}

// Validate data
function test_input($data) {
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
return $data;
}
<? 
```

你的 html 看起来像这样；

```
<html>
<head>
</head>

<body>
<!-- Validate -->
<?php include_once ('validate.php'); ?>

<!-- Form -->
<form method="post" action="">

<!-- Image -->
<p>Image <?php echo $imageError; ?></p>
<input type="file" name="image" value="<?php echo $image; ?>" />

<p><input type="submit" name="save" value="SAVE" /></p>
</form>

</body>
</html> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-12-02T17:33:39.233

使用这个功能

```
 function check_image_extension($image){

        $images_extentions = array("jpg","JPG","jpeg","JPEG","png","PNG");

        $image_parts = explode(".",$image);

        $image_end_part = end($image_parts);

        if(in_array($image_end_part,$images_extentions ) == true){

            return time() . "." . $image_end_part;

        }else{

            return false;
        }

    } 
```

# struts2 - 2 个不同的 struts 应用程序的相同 ValueStack

> ID：10456115
> 
> 赞同：3
> 
> 时间：2012-05-04T21:04:57.493
> 
> 标签：struts2, jboss5.x, libs, valuestack

我在 jboss AS (5.1.0-GA) 中运行我的 sruts 2 (2.1.8.1) 应用程序。我将 a.war 和 b.war 放在同一个 /server/default/deploy 路径中，并将 struts 2 库放在 /server/default/lib 路径中。

应用程序或服务器中没有错误消息，但是当我出于某种原因输入[http://localhost:8080/b/](http://localhost:8080/b/)时，我进入了 b.jsp 页面，应用程序的消息资源中的消息。

所以，我的问题是：将 struts jar 放在服务器的 /lib 中只会创建所有应用程序必须使用相同的值堆栈的一个实例？如果是这样，我该怎么做才能为每个应用程序提供不同的实例，但将罐子保留在服务器路径中？

我应该把支柱罐子带回战争吗？

谢谢

我使用struts标签来获取系统标题

```
<s:property value="%{getText('system.title')}"/> 
```

**这是我对 a.war 的配置：**

/WEB-INF/classes/a-message-resources.properties

```
system.title=Namefor system A 
```

在 struts.xml 我有

```
<constant name="struts.custom.i18n.resources" value="a-message-resources" /> 
```

**这是 b.war 的配置**

/WEB-INF/classes/b-message-resources.properties

```
system.title=Namefor system B 
```

在 struts.xml 我有

```
<constant name="struts.custom.i18n.resources" value="b-message-resources" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T04:00:18.457

我想我可能知道这里发生了什么。

该`struts.custom.i18n.resources`值被标记化，每个标记都添加到`LocalizedTextUtil.DEFAULT_RESOURCE_BUNDLES`. 这是一个静态的最终字符串列表。在将项目添加到列表（例如 system.title）之前，`list.remove()`在相同的令牌上调用，删除 system.title 的任何先前条目。

因为这个字段是静态的，并且因为它只允许每条消息输入一个条目，所以首先加载的 system.title 属性中的任何一个都会被下一个覆盖。

同样，您的 JBoss 实例似乎正在以导致共享静态变量的方式加载此类。您可以配置您的 JBoss 为每个应用程序单独加载此类。 [这可能是一个好的开始](https://community.jboss.org/wiki/ClassLoadingConfiguration)。

# spring - Spring bean 没有注入到 CXF Web 服务中，为什么？

> ID：10456119
> 
> 赞同：9
> 
> 时间：2012-05-04T21:05:26.187
> 
> 标签：spring, cxf, jboss6.x

我正在编写一个 RESTful 服务（在 JBoss 上使用 CXF），其中我使用 Spring（Autowired）注入了另一个类。但是该类没有被注入并且为空。

**Web 服务接口和类（需要进行注入的地方）**

```
package com.company.project.web;

@Path("/myws")
public interface IMyWebService {    
   @POST
   @Path("/doSomething")    
   @Consumes("application/json")
   @Produces("application/json")
    MyResponse doSomething(MyRequest myRequest)
}

@Service("myWebService")
public class MyWebService implements IMyWebService {    
    @Autowired
    private IMyCore myCore;

    public MyResponse doSomething(MyRequest myRequest) {
      ....
    }
} 
```

**必须注入的东西**

```
package com.company.project.biz;

public interface IMyCore {
   MyResponse doSomething(MyRequest myRequest);
}

@Component("myCore")
public class MyCore implements IMyCore {
    public MyResponse doSomething(MyRequest myRequest) {
            .....
    }
} 
```

豆类.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd    
    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-http.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />

    <context:annotation-config />
    <context:component-scan base-package="com.company.project"/>    

    <jaxrs:server id="myWebService" address="/">
        <jaxrs:serviceBeans>
            <bean class="com.company.project.web.MyWebService" />
        </jaxrs:serviceBeans>
        <jaxrs:extensionMappings>
            <entry key="json" value="application/json" />
        </jaxrs:extensionMappings>
    </jaxrs:server>
</beans> 
```

我的服务处于活动状态（[http://localhost:8080/{warname}/myws/doSomething](http://localhost:8080/%7Bwarname%7D/myws/doSomething)）但 MyCore 实例没有被注入 MyWebService （在 myCore 字段中）。它始终为空，我的服务无法按预期工作，而是抛出 NullPointerException

尝试了通过谷歌收集的所有输入。没运气！非常感谢您的帮助。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T10:52:11.643

尝试将以下方法添加到您的 Web 服务：

```
@PostConstruct
public void init() {
    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);
} 
```

当前的 Web 应用程序上下文（通常是由 ContextLoaderListener 加载的）将用于自动装配，因此 IMyCore bean 必须在上下文侦听器配置文件中定义，而不是在 Web 服务中定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-20T14:07:38.053

如果要在 CXF Web Service 类中使用 Spring Beans，则在 CXF 的 XML 配置文件中声明 WebService 如下（例如 spring-cxf.xml）

```
<bean id="hello" class="demo.spring.service.HelloWorldImpl" />
<jaxws:endpoint id="helloWorld" implementor="#hello" address="/HelloWorld" /> 
```

为 WebService 类声明分离的 bean，然后将其放入带有 ID 的端点中。像这样，您将拥有 spring 托管 bean，您也可以在其中使用 AutoWired 注释。

如果您将 Web 服务声明如下，您的 bean 将永远不会被自动注入。

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws" xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
<import resource="classpath:META-INF/cxf/cxf.xml"/>
<import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>
<jaxws:endpoint id="helloWorld" implementor="demo.spring.service.HelloWorldImpl" address="/HelloWorld"/> 
```

在这种情况下，您将需要：

*   手动注入spring bean

    `SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);`

*   或者从spring上下文中一一检索bean

    `ApplicationContext context = ...; // your Spring ApplicationContext HelloBean helloBean = (HelloBean) context.getBean("bean");`

    我还没有为 JAX-RS 尝试过这个，但我认为方法应该是相同的。

    [来自 CXF 官方文档。](http://cxf.apache.org/docs/writing-a-service-with-spring.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T00:50:44.420

尝试在 Beans.xml 中添加以下 bean 配置

```
<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor"/> 
```

就我而言，它有效..

# perl - 带有行和列的 Perl 制表符分隔文件

> ID：10456121
> 
> 赞同：2
> 
> 时间：2012-05-04T21:05:30.677
> 
> 标签：perl

我是 Perl 新手，需要一个 12 行 8 列的制表符分隔文件，对数据执行一些计算，然后将其导出到具有相同行和列格式的新文件。我假设我需要将文件导入数组，但导入有什么特别之处吗？我不确定是否需要将所有数据导入到多个数组或多维数组或只是一个普通数组。那么导出数据以使其格式相同有什么特别之处吗？我迷路了！希望这是有道理的！这是我到目前为止所做的：

```
#Pseudocode:
#Ask user for the path to the input file
#Ask user for the dilution factor
#Ask user for the path to the output file
#Read in the file with columns and rows
#Put all data into 1 array

#For each index of above array:
#Multiply given OD readings by 50ug/ul 
#Multiply all readings by dilution factor from user 
#Print converted values into the tab-delimited output folder with 12 columns * 8 rows

#Add header to output file to describe what was done
##################################################

#This program converts absorbance data from a file into DNA concentration based on a     standard     conversion
#factor of 50ug/ul and a dilution factor given by a user.
#It then prints the converted values into an output folder of the same dimensions of the             original and adds a header.

#!/usr/bin/perl -w

print "Please enter the pathway to the file containing the UV spec data: \n";
$input_file = <STDIN>;

chomp $input_file;

    unless (open(INPUTFILE, $input_file))
{
    print "Cannot open file \"$input_file\"\n\n";
    exit;
}
@input_data = <INPUTFILE>;

close INPUTFILE;

$input_data = join('', @input_data);    #puts data into a single string for easier     processing???

$input_data =~ s/\s//g;         #remove any whitespace

print "Please enter the dilution factor for these samples: \n";
$dilution_factor = <STDIN>;
chomp $dilution_factor;

foreach my $calc_data (@input_data)
{
    my $new_conc = $input_data * 50 * $dilution_factor;
    return $new_conc;
}

print "Please enter the pathway for the file you you want to save the converted data in:     \n";
$output_file = <STDIN>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:50:54.363

I've changed the interface of the program slightly in order to simplify it. Assuming this is in a file called `dilute.pl`, you call it like this (with a dilution factor of 0.1):

```
 $ ./dilute.pl 0.1 < input.dat > output.dat 
```

The code looks like this:

```
 #!/usr/bin/perl

  use strict;
  use warnings;

  # Get the dilution factor from the command line
  my $dilute = shift;

  # Get the input (all at once)
  my $input = do { local $/; <> };

  # Change the values.
  # This assumes that your input is all floating point numbers.
  # You might need to tweak the regex if that's not the case.

  $input =~ s/(\d+\.\d+)/$1 * 50 * $dilute/eg;

  # Write the output
  print $input; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:09:39.037

```
#!/usr/bin/perl -w

$header = 'This file gives the concentration of the DNA based on OD value, dilution, and     concentration.';

print "Please enter the pathway to the file containing the UV spec data: \n";
$input_file = <STDIN>;

chomp $input_file;

unless (open(INPUTFILE, $input_file))
{
    print "Cannot open file \"$input_file\"\n\n";
    exit;
}
close INPUTFILE;

# Get the dilution factor from the command line
my $dilute = shift;

# Get the input (all at once)
my $input_data = do { local $/; <> };

# Change the values.

$input_data =~ s/(\d+\.\d+)/$1 * 50 * $dilute/eg;

# Write the output to the output file

$output_file = "calc_values";
unless (open(CALCVALUES, ">$output_file"))
{
    print "Cannot open file \"$output_file\"\n\n";
    exit;
}

format CALCVALUES =
@<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<  <<<<<<<<<<<<<<<<<<<<<<<<...
$header

^<<<<<<<<<<<~~
$output_file
.

write;
exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:04:00.537

您可以尝试使用[Text::CSV_XS](http://search.cpan.org/~hmbrand/Text-CSV_XS-0.88/CSV_XS.pm "文本::CSV_XS")模块。该文档有非常好的示例。使用它的好处是你不会对包含选项卡的值有问题，而如果你使用`split`你需要检查一个选项卡是否在双引号之间，例如 `"foo\tbar"`.

# ios - UIView UIScrollview - 框架、边界、中心混乱

> ID：10456124
> 
> 赞同：1
> 
> 时间：2012-05-04T21:05:45.950
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uiscrollview

我将 UIImageView 放在 UIScrollView 中，并尝试控制图像，使其在缩放后以滚动视图为中心。而且我不确定最好的方法。

苹果文档告诉我们不要使用框架属性：“警告如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。” 所以我尝试在 UIViewController 子类中使用以下内容，该子类的 xib 包含一个 scrollView 并包含 imageView：

```
scrollView.bounds =
    CGRectMake 
    (scrollView.contentSize.width/2 - scrollView.center.x,
     scrollView.contentSize.height/2 - scrollView.center.y,
     scrollView.bounds.size.width,
     scrollView.bounds.size.height);

containedView.center =    
    CGPointMake 
    (containedView.bounds.size.width*scrollView.zoomScale/2,
     containedView.bounds.size.height*scrollView.zoomScale/2); 
```

这可以在 containsView 的宽度和高度大于 scrollView 的情况下准确地工作，并设置视图以便后续滚动将您准确地带到 containsView 的边缘。但是，当图像的任一尺寸小于 scrollView 的宽度和高度时，图像会被磁性吸引到屏幕的左上角。在 iPad 模拟器中（仅），当图像缩小到 minimumZoom 的大小时，它会锁定到屏幕的中心。磁吸引力非常平滑，就像在图像居中后 UI 中的某些内容覆盖了我的代码一样。它看起来有点像 CALayer contentsGravity ( kCAGravityTopLeft ) 的东西，也许吧？

Apple 在他们的代码示例 photoScroller（在 UIScrollView 的子类中）中反驳了他们自己的建议：

```
// center the image as it becomes smaller than the size of the screen

CGSize boundsSize = self.bounds.size;
CGRect frameToCenter = imageView.frame;

// center horizontally
if (frameToCenter.size.width < boundsSize.width)
    frameToCenter.origin.x = (boundsSize.width - frameToCenter.size.width) / 2;
else
    frameToCenter.origin.x = 0;

// center vertically
if (frameToCenter.size.height < boundsSize.height)
    frameToCenter.origin.y = (boundsSize.height - frameToCenter.size.height) / 2;
else
    frameToCenter.origin.y = 0;

imageView.frame = frameToCenter; 
```

当图像较小时，此方法可以更好地居中，但是当我在我的项目中尝试此方法时，它会引入某种不一致。例如，在 scrollView.bounces = NO 的情况下，高度小于 scrollView 高度但宽度更大（因此可以从左到右滚动）的水平图像将比它应该向左滚动更远（当向右滚动它会在图像的边缘正确停止，尽管如果 scrollView.bounces = YES 它会从边缘反弹，因此图像总是在左侧裁剪）当图像在两个维度上都大于其包含的滚动视图时这个问题更加突出，整个结果让人感觉很糟糕，考虑到苹果的书面建议，这并不奇怪。

我已经搜索了论坛，但找不到太多关于此的评论。我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:09:08.693

您似乎没有使用[transform](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW4)属性，因此您可以忽略有关在使用 transform 属性时不使用 frame 属性的警告。继续使用 frame 属性，就像 Apple（和我们其他人）一样。

# javascript - window.onbeforeunload 和图像的困境

> ID：10456128
> 
> 赞同：0
> 
> 时间：2012-05-04T21:05:58.770
> 
> 标签：javascript, jquery

以下是我的主要 JS 文件：

```
window.onbeforeunload = function () { 
   showME();
}

var ShowMe = function(){
    $('<img src="http://cdn.sstatic.net/stackoverflow/img/sprites.png" style="position:fixed;left:0;top:0" />').appendTo('body');
} 
```

当 window.onbeforeunload 被调用时（即用户离开页面） ShowMe() 被执行但我没有在页面上看到图像。

但是，如果您在控制台中运行 showMe()，图像将显示。

这发生在所有非 FireFox 浏览器中。Firefox 似乎工作正常。

# linux - 将 cvs diff 的内容复制到文件中

> ID：10456131
> 
> 赞同：1
> 
> 时间：2012-05-04T21:06:13.223
> 
> 标签：linux, unix, cvs

我可以在文件中复制 cvs diff 的结果吗，例如我想做类似的事情

```
cp cvs diff /test/diff.txt 
```

我不知道我是否可以做这样的事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:08:31.523

您可以使用[重定向](http://en.wikipedia.org/wiki/Redirection_%28computing%29)将任何命令的输出保存到文件中。试试这个：

```
cvs diff > /test/diff.txt 
```

# android - 在 android 中像 Marquee 一样滚动 TextView

> ID：10456133
> 
> 赞同：1
> 
> 时间：2012-05-04T21:06:32.023
> 
> 标签：android, scroll, textview, marquee

我有一个 TextView 并希望自动水平滚动。我知道可以使用文本视图的 ellipsize 属性来完成。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:24:08.783

使用 textView 的 ellipsize 属性如下

```
 <TextView
    android:id="@+id/mywidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:lines="1"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:textColor="#ff4500"
    android:text="Simple application that shows how to use marquee, with a long text"/> 
```

# javascript - 数据抓取页面只是用 PHP 编写的

> ID：10456134
> 
> 赞同：0
> 
> 时间：2012-05-04T21:06:33.613
> 
> 标签：javascript, php

我有一个用 PHP 编写的页面，在 PHP 编写之后，我希望能够搜索 HTML 源代码以找到某些标签。这是不可能/不明智的吗？

当技术上所有内容都已写入 HTML 时，我尝试在脚本末尾使用 file_get_contents，我想我可能暂时以这种方式破坏了我的页面（在我的主机上达到资源限制）

我的主要目标是试图弄清楚如何使用 Javascript 来一一更改页面的元素。如果我能找到我想要更改的 html 标签，我认为我可以做到这一点...... PHP 写的......在同一页面中。

您看到的 Javascript 非常新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:12:50.697

你可以很容易地做到这一点，客户端，使用 jquery。

如果您绝对需要使用 php 在服务器端处理它并且在生成代码时绝对不能这样做，您可以使用 ob_start() 来捕获输出，然后在执行 ob_end_clean() 之前使用 ob_get_contents() 将其放入字符串中将其刷新到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:17:14.530

如果我没有理解错，页面加载后你想改变你自己的 html 输出，所以，

```
<?php
 echo "<div id='mydiv'></div>";
?>
<script type="text/javascript">

      window.onload = function() {  
        document.getElementById("mydiv").innerHTML = "updated html";  
      }  

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:19:01.487

除非您在生成页面时捕获输出，例如

```
<?php

ob_start();
.... page building here ...
$page = ob_get_clean();
echo $page;
?> 
```

你将没有什么可做的。但是，如果您按照上述方式进行捕获，那么您可以简单地将 $page 输入[DOM](http://php.net/dom)并在那里进行操作。

但这引出了一个问题……如果您需要在页面构建后更改页面，为什么不首先更改它的构建方式？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:13:16.430

您可以在大多数浏览器中右键单击呈现的网页，然后选择“查看源代码”的一些变体。或者，您可以[卷曲](http://curl.haxx.se/)页面内容，并将其作为文本文件查看。

此外，`file_get_contents();`发出新请求以获取页面/文件的内容。因此，如果您加载一个页面，并且在底部，它会尝试获取页面内容，它将永远加载一个新页面，然后是另一个页面。您正在创建一个无限循环，并耗尽您分配的资源，这取决于您的托管服务提供商。

# html - css绝对位置和溢出：隐藏不太好

> ID：10456135
> 
> 赞同：1
> 
> 时间：2012-05-04T21:06:36.127
> 
> 标签：html, css

这是我的代码[http://jsfiddle.net/noppanit/8D7QN/](http://jsfiddle.net/noppanit/8D7QN/)

正如您已经看到文本溢出容器一样，我尝试将 overflow:hidden 放入文本中，但它不起作用。我理解因为它是绝对位置，所以从技术上讲它不在容器中。但我不确定如何解决这个问题。文本必须位于图像顶部，这就是我将其设为绝对位置的原因。

如果你们能给我一些启发，那就太棒了。我是 CSS 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:09:13.113

您需要在 (example) 上设置一个高度，`.text_content`或者[最好](http://jsfiddle.net/8D7QN/1/)在**(**`overflow:hidden;` example `.text_image`)[上](http://jsfiddle.net/8D7QN/2/)设置一个高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:11:43.840

您假设它从容器中溢出。它不是。容器具有不重复的背景，并且比容器小。容器没有`height`css，因此内容的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:15:32.500

我会做这样的事情：

[http://jsfiddle.net/8D7QN/7/](http://jsfiddle.net/8D7QN/7/)

# javascript - 如何使用 JQuery 拍照并在画布中显示？

> ID：10456140
> 
> 赞同：0
> 
> 时间：2012-05-04T21:06:57.587
> 
> 标签：javascript, jquery, canvas

我正在使用 JQuery [http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

我想拍照并使用画布显示，而不上传照片。

```
var pos = 0, ctx = null, saveCB, image = [];
var canvas = document.createElement('canvas');
canvas.setAttribute('width', 320);
canvas.setAttribute('height', 240);
ctx = canvas.getContext('2d');
image = ctx.getImageData(0, 0, 320, 240);

var saveCB = function (data) {
    var col = data.split(';');
    var img = image;
    for (var i = 0; i < 320; i++) {
        var tmp = parseInt(col[i]);
        img.data[pos + 0] = (tmp >> 16) & 0xff;
        img.data[pos + 1] = (tmp >> 8) & 0xff;
        img.data[pos + 2] = tmp & 0xff;
        img.data[pos + 3] = 0xff;
        pos += 4;
    }

    if (pos >= 4 * 320 * 240) {
        ctx.putImageData(img, 0, 0);
        foto = canvas.toDataURL("image/png");
        //document.getElementById('foto').value = foto;
        pos = 0;
    }
};

$("#camera").webcam({
    width: 320,
    height: 240,
    mode: "callback",
    swffile: '@Url.Content("~/Content/js/jscam_canvas_only.swf")',
    onSave: saveCB,
    onCapture: function () {
        webcam.save();
    }
});

$('#upload').click(function () {
    webcam.capture();
    return false;
}); 
```

要在画布中显示，我需要创建一个新的标签，像这样？

```
 <canvas id="canvas" width="320" height="240"></canvas> 
```

拍照按钮

```
 <input  id="upload" class="submit submit-blue" type="button" value="Tirar foto"> 
```

**解决方案**

我忘记了加载事件，以获取画布元素。

```
window.addEventListener("load", function() {
var canvas = document.getElementById("canvas");

if (canvas.getContext) {
    ctx = document.getElementById("canvas").getContext("2d");
    ctx.clearRect(0, 0, 320, 240);

    image = ctx.getImageData(0, 0, 320, 240);
} 
```

}， 错误的）;

# asp.net - ListView 第一次没有项目

> ID：10456142
> 
> 赞同：0
> 
> 时间：2012-05-04T21:07:23.657
> 
> 标签：asp.net, linq

我正在构建一个 ASP.NET 应用程序。我正在使用 ListView 来显示一些实体，但是我的 listview 在第一遍中没有项目。我的意思是，它们显示在页面上，但此代码仅在我刷新页面时才有效：

```
protected void Page_Load(object sender, EventArgs e)
{
    fillFeatures();
}

private void fillFeatures()
{
    using (Entities myEntities = new Entities())
    {
        System.Diagnostics.Debug.Write("Filling features.. \n");
        foreach (ListViewItem item in ListView1.Items)
        {
            System.Diagnostics.Debug.Write("FOR \n");
            CheckBox checkbox = (CheckBox)item.FindControl("Checkbox");
            TextBox description = (TextBox)item.FindControl("descriptionTextbox");

            //Try to get an existing relation
            int featureId = Int32.Parse(((Label)item.FindControl("idLabel")).Text);

            PlaceHasFeature phf = (from p in myEntities.PlaceHasFeature
                                   where p.place_id == placeId && p.feature_id == featureId
                                   select p).SingleOrDefault();

            if (phf != null)
            {
                System.Diagnostics.Debug.Write("Checking " + phf.Feature.name + "\n");
                //Relation exists
                checkbox.Checked = true;
                description.Text = phf.description;
            }
            else
            {
                System.Diagnostics.Debug.Write("Didn't find relation for " + featureId + "\n");
            }
        }
    }
} 
```

控制台输出：

当我打开链接时：填充功能...

刷新后：填充特征... FOR FOR FOR (...)

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:40:55.347

我怀疑问题是由于[ASP.NET Page Life Cycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx)造成的，其中页面加载事件发生在各个控件加载事件之前：

> Page 对象调用 Page 对象的 OnLoad 方法，然后递归地对每个子控件执行相同的操作，直到加载页面和所有控件。单个控件的 Load 事件发生在页面的 Load 事件之后。

我相信你有几个选择。将该`fillFeatures`方法移至[Page.LoadComplete 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcomplete.aspx)：

> LoadComplete 事件发生在所有回发数据和视图状态数据都加载到页面中并且为页面上的所有控件调用 OnLoad 方法之后。

或者将该`fillFeatures`方法移至 ListBox 的[DataBound Event](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.databound.aspx)。虽然我怀疑 Page.LoadComplete 事件确实是两个选项中更好的一个。

# 3d - 使用 Scipy/Numpy 在云点的 2D 插值中仅获取“有效”点

> ID：10456143
> 
> 赞同：6
> 
> 时间：2012-05-04T21:07:24.887
> 
> 标签：3d, numpy, scipy, smoothing

我有一个从人的背部通过摄影测量获得的浊点。`scipy.interpolate`我正在尝试对其进行插值以获得常规网格，并且到目前为止我使用的效果很好。问题是：我使用的函数`scipy.interpolate.griddata`（

下图显示了左侧的原始云点（显示为水平线的实际上是密集的线形点云），`griddata`中间给我的结果，右侧是我想要得到的结果 - - x,y 平面上浊点的一种“阴影”，其中原始表面中不存在的点将是零或 Nans。

![在此处输入图像描述](../Images/50c75a0e2cfd4755b26aabc8c441592a.png)

我知道我可以删除 cloudpoint 上的 Z 坐标并检查每个网格位置是否接近，但这太暴力了，我相信这应该是点云应用程序的常见问题。另一种可能性可能是在点云上执行一些 numpy 操作，找到一个 numpy 掩码或布尔 2D 数组来“应用”来自 的结果`griddata`，但我没有找到任何（这些操作有点超出我的 Numpy/ Scipy知识）。

有什么建议吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:10:14.653

可以使用 快速构建合适的掩码`KDTree`。griddata 使用的插值算法没有“有效”点的概念，因此您需要在插值之前或之后调整数据。

前：

```
import numpy as np
from scipy.spatial import cKDTree as KDTree
from scipy.interpolate import griddata
import matplotlib.pyplot as plt

# Some input data
t = 1.2*np.pi*np.random.rand(3000)
r = 1 + np.random.rand(t.size)
x = r*np.cos(t)
y = r*np.sin(t)
z = x**2 - y**2

# -- Way 1: seed input with nan

def excluding_mesh(x, y, nx=30, ny=30):
    """
    Construct a grid of points, that are some distance away from points (x, 
    """

    dx = x.ptp() / nx
    dy = y.ptp() / ny

    xp, yp = np.mgrid[x.min()-2*dx:x.max()+2*dx:(nx+2)*1j,
                      y.min()-2*dy:y.max()+2*dy:(ny+2)*1j]
    xp = xp.ravel()
    yp = yp.ravel()

    # Use KDTree to answer the question: "which point of set (x,y) is the
    # nearest neighbors of those in (xp, yp)"
    tree = KDTree(np.c_[x, y])
    dist, j = tree.query(np.c_[xp, yp], k=1)

    # Select points sufficiently far away
    m = (dist > np.hypot(dx, dy))
    return xp[m], yp[m]

# Prepare fake data points
xp, yp = excluding_mesh(x, y, nx=35, ny=35)
zp = np.nan + np.zeros_like(xp)

# Grid the data plus fake data points
xi, yi = np.ogrid[-3:3:350j, -3:3:350j]
zi = griddata((np.r_[x,xp], np.r_[y,yp]), np.r_[z, zp], (xi, yi),
              method='linear')
plt.imshow(zi)
plt.show() 
```

`nan`这个想法是用包含值的假数据点“播种”输入数据。使用线性插值时，这些将遮盖图像中附近没有实际数据点的区域。

您还可以在插值后删除无效数据：

```
# -- Way 2: blot out afterward

xi, yi = np.mgrid[-3:3:350j, -3:3:350j]
zi = griddata((x, y), z, (xi, yi))

tree = KDTree(np.c_[x, y])
dist, _ = tree.query(np.c_[xi.ravel(), yi.ravel()], k=1)
dist = dist.reshape(xi.shape)
zi[dist > 0.1] = np.nan

plt.imshow(zi)
plt.show() 
```

# c - 为什么我可以修改 C 中的 const 指针？

> ID：10456144
> 
> 赞同：4
> 
> 时间：2012-05-04T21:07:27.693
> 
> 标签：c, memory, pointers

今天我尝试使用 const 标识符，但我发现 const 变量仍然可以修改，这让我感到困惑..

以下是代码，在 compare(const void *a, const void *b) 函数中，我尝试修改*a*指向的值：

```
#include <stdio.h>
#include <stdlib.h>

int values[] = {40, 10, 100, 90, 20, 25};

int compare (const void *a, const void*b)
{
    *(int*)a=2;
/* Then the value that a points to will be changed! */
    return ( *(int*)a - *(int*)b);
}

int main ()
{
    int n;
    qsort(values, 6, sizeof(int), compare);
    for (n = 0; n < 6; n++)
        printf("%d ", values[n]);
    return 0;
} 
```

然后我也尝试改变*a*本身的值：

```
#include <stdio.h>
#include <stdlib.h>

int values[] = {40, 10, 100, 90, 20, 25};

int compare (const void *a, const void*b)
{
    a=b;
    return ( *(int*)a - *(int*)b);
}

int main ()
{
    int n;
    qsort(values, 6, sizeof(int), compare);
    for (n = 0; n < 6; n++)
        printf("%d ", values[n]);
    return 0;
} 
```

但是，我发现它们都有效.. 谁能向我解释为什么我需要在比较的参数列表中使用 const 如果它们仍然可以更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T21:09:04.937

它仅在这种情况下有效，因为您正在处理的指针最初不是恒定的。抛弃常量然后修改一个值是未定义的行为。UB的意思是app可以做任何事情，从成功到崩溃到让紫龙飞出你的鼻孔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T21:11:46.617

它保护你免受愚蠢的错误，而不是当你努力犯错误时。
`(int *)a`when `a`is`const something *`是一种不好的做法，请`(const int *)a`改用。
`a = b`什么时候`a`可以`const void *`，因为只有指向的值是常量。如果您想要两者都`*a = x`不允许`a = x`，请声明`a`为`const void * const`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T21:13:07.950

案例 1：您正在使用静态强制转换来抛弃 constness。您违反了为该方法定义的合同。

情况 2：您没有更改 a 的内容（即 const），而是分配包含 const void 指针的变量 a。

对于实际影响：对于案例 1.)，如果 a 没有真正指向变量，您可能会朝自己的脚开枪。

建议：只有在您知道自己在做什么的情况下，才可以抛弃 constness。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T21:13:32.437

实际上。

```
int compare (const void *a, const void*b); 
```

这里有两件事你需要考虑，指针和指针指向的内存位置。指针不是常量，但内存位置是。

如果您将签名更改为：

```
int compare (const void *const a, const void *const void); 
```

那么一切都会是常量。在您的情况下，您可以更改指针但不能更改值。这样你的指针就可以指向不同的内存位置。

# iphone - 异步更新节中的行数

> ID：10456154
> 
> 赞同：0
> 
> 时间：2012-05-04T21:08:25.790
> 
> 标签：iphone, uitableview

我遇到了一个表格视图不一致异常，想知道一种解决方法。点击表格视图单元格附件视图，我在表格视图中显示了一个额外的单元格，想想你正在查看的行下方弹出一个控制面板。同时，对 API 的 HTTP 请求正在获取第二页数据。如果在我为控制面板设置动画时数据进入，我会崩溃。

`'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\. The number of rows contained in an existing section after the update (31) must be equal to the number of rows contained in that section before the update (32), plus or minus the number of rows inserted or deleted from that section (1 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:27:31.917

解决了！原来问题不直接出现在内容更新中。我在 numberOfRowsInSection 中添加一行，如下所示：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {   
    NSInteger count = [self.sharedItems count];
    if (_contentPagesTotal > _contentPagesLoaded) {
        // Add a row for the loading label
        count++;
    }
    return count;
} 
```

现在是

```
if (self.showLoadingRow) {
    count ++
} 
```

并在内容 http 回调中： self.showLoadingRow = _contentPagesTotal > _contentPagesLoaded

所以称重传感器在它不应该存在的时候仍然存在。

# java - 使用继承和泛型组织 Jersey 资源的正确方法是什么？

> ID：10456157
> 
> 赞同：6
> 
> 时间：2012-05-04T21:08:43.513
> 
> 标签：java, google-app-engine, jersey, guice

我正在用 Jersey 开发一个应用程序，我有很多资源。尽管这些资源的主要功能各不相同，但它们共享许多常用方法（如列表、读取、更新等）。该应用程序在 Google App Engine 上运行，并使用 Guice 进行依赖注入。

我的第一种方法是拥有一个包含所有常见逻辑的通用 AbstactResource，它分别由添加所需自定义方法的所有其他资源扩展。

```
public class AbstractResource<T> {

@GET
public ListPage<T> list(@QueryParam("limit") Integer limit,
    @QueryParam("start") Integer start) {
    // ... implementation
}

@GET
@Path("/{id}")
public T get(@PathParam("id") Long id) {
    // ... implementation
} 
```

示例资源如下所示：

```
public class TenantResource extends AbstractResource<Tenant> {
    // custom resource related methods here
} 
```

在这种情况下一切正常。当我添加一个抽象级别时，问题就出现了。假设我只想为我的一些资源存储历史记录和变更日志。我创建了一个扩展 AbstractResource 的抽象类，称为 AudiatableResource，它添加了所需的功能。

```
public abstract class AuditableResource<T extends AuditableModel> 
    extends AbstractResource {
        // here I override update and create methods to save changelogs
} 
```

如您所见，本例中的类型参数已更改（现在它扩展了 AuditableModel）。

新的具体资源将如下所示：

```
public class PropertyResource extends AuditableResource<Tenant> {
    // custom resource related methods here
} 
```

在这种情况下，一切仍然有效，但这次我在启动时收到很多警告消息：

```
WARNING: Return type T of method public T com.pkg.AbstractResource.get(java.lang.Long) is not resolvable to a concrete type
WARNING: Return type T of method public T com.pkg.AbstractResource.getNew() is not resolvable to a concrete type
WARNING: Return type com.pkg.data.ListPage<T> of method public com.pkg.ListPage<T> com.pkg.AbstractResource.list(java.lang.Integer,java.lang.Integer) is not resolvable to a concrete type 
```

我真的想知道这种方法使用 Jersey 是否正确，我是否可以忽略这些消息。如果资源数量众多，那么了解资源的组织方式会很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:18:25.133

一种方法是将资源的定义与实现分开。

*   拥有非常简单的资源类，定义您想要提供的不同服务。这样，您通过 rest 公开的 API 很容易定位和审计。不同的方法可能是实现类的委托
*   在实现中实现资源的业务逻辑，您可能希望在其中使用继承来考虑常见行为。

您在运行时收到这些消息的原因是 jersey 使用有关资源中类型的运行时信息。泛型类型信息在编译时被擦除，它无法获取泛型类方法的实际返回类型。如果你为你的实现提供了一个 REST“门面”，你可以明确这一点。

```
public class Facade {
  private final PropertyResource propertyResource;
  public Facade() {
    propertyResource = new PropertyResource();
  }
  @GET
  @Path("somepath")
  public Tenant something() {
    return propertyResource.something();
  }
} 
```

# coldfusion - cfwheels - 使用复合键表更新嵌套属性

> ID：10456158
> 
> 赞同：3
> 
> 时间：2012-05-04T21:08:46.527
> 
> 标签：coldfusion, composite-key, cfwheels

我正在尝试获得更好的设置来更新具有嵌套属性的模型。

现在在我的编辑视图中，我手动定义 textFieldTag 以通过将名称设置为来创建 params 结构`"myModel[myNestedProperty][#modelID#,#key2id#][name]"`

在更新行动中...

如果我只是使用`myModel.update(params.myModel)`，如果有任何需要删除的元素，我将无法使更新工作

所以我销毁了与 myModel 具有相同 id 的嵌套属性的所有模型，在这种情况下它可以工作。

缺点是如果更新失败，嵌套的属性就全部消失了。

在删除它们并对其进行 ing 之前，我尝试先获取所有模型`.save`，但由于某种原因，这不起作用。

看起来 cfwheel 是为这种与复选框的关系设置的，但我需要它来处理文本字段并在我的表单中选择项目。

* * *

**更新**

我意识到我还有另一个问题。本质上，我想对此进行扩展，以便能够在多个嵌套属性和关系中使用它。

问题在于我设置名称的方式，特别是对于选择下拉菜单：

`name="myModel[myNestedProperty][#modelID#, ][nestedID]"`

问题是无法声明第二个 id，因为它将被分配为 id 而不是使用我选择的值。

老实说，这是我一直在努力解决的一个问题。我通过在控制器中重新生成模型来处理它，我只是忘记了我还没有解决这个问题。

有没有办法让这些值根本不被使用，并让它们从结构中动态填充？

假设我有（截断）一个名称`tcat[34,0][catID]`或`tcat[34,][catID]`,（其中 catID 应该是第二个 ID）。

生成的参数的 tcat 结构是

```
[34,0]{catID = 12,14,18} 
```

或者

```
[34,]{catID = 12,14,18} 
```

我希望参数的 tcat 结构具有多个结构，例如：

```
[34,12]{tID = 34; catID = 12}
[34,14]{tID = 34; catID = 14}
[34,18]{tID = 34; catID = 18} 
```

有没有解决的办法？

我正在使用许多复合键嵌套属性，如果我可以让这部分单独工作，它会更容易。我知道一种方法是使用 javascript 更新名称，但我认为这将是（非常非常）最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:04:02.797

你能试试这个吗？

在父模型中设置回调，检查是否为空白，如果`name`为空白则标记为删除。

```
<cffunction name="init">
    ...

    <!--- This could also be `beforeValidation` if you want to make `name` required for the child model --->
    <cfset beforeSave("$provisionMyNestedProperty")>
</cffunction>

<cffunction name="$provisionMyNestedProperty">
    <cfscript>
        if (StructKeyExists(this, "myNestedProperty") && IsArray(this.myNestedProperty))
        {
            for (local.i = 1; local.i <= ArrayLen(this.myNestedProperty); local.i++)
            {
                if (!StructKeyExists(this.myNestedProperty[local.i], "name") || !Len(Trim(this.myNestedProperty[local.i].name)))
                    this.myNestedProperty[local.i]._delete = true;
            }
        }
    </cfscript>
</cffunction> 
```

在我们找到解决方案之前，我将继续编辑我的答案。希望这能给你一个好的开始。

# c# - System.Linq.Expressions.Expression 中的 TKey 是什么 >?

> ID：10456159
> 
> 赞同：1
> 
> 时间：2012-05-04T21:08:49.643
> 
> 标签：c#, linq, expression

我正在尝试将 Linq`OrderBy`子句所需的表达式存储在数据结构中，所以我可以去`query = query.OrderBy(MySortExpression);`

`OrderBy``System.Linq.Expressions.Expression<Func<TSource,TKey>>`作为参数 。`TSource`是您要排序的实体类型，但`TKey`应该是什么类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:11:54.857

`TKey`是一个泛型类型参数，表示您排序的表达式的类型。例如，如果您按长度对字符串进行排序，`TSource`则 will be`string`和`TKey`will be `int`，如下面的代码所示：

```
string [] myStrings = new[] {"quick", "brown", "fox", "jumps"};
var ordered = myStrings.OrderBy(s => s.Length); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T21:11:24.043

TKey 是表达式的返回类型的类型。例如：

```
users.OrderBy(user => user.Name); 
```

由于 Name 是字符串，因此类型将是`System.Linq.Expressions.Expression<Func<User,string>>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T21:11:37.727

`TKey`不绑定到特定类型。通常它是将属性投影到原始类型以启用排序。

假设`Person`具有`BirthYear`您将选择的属性

```
 persons.OrderBy(p => p.BirthYear); 
```

# c# - 日期时间操作

> ID：10456169
> 
> 赞同：2
> 
> 时间：2012-05-04T21:09:32.300
> 
> 标签：c#, datetime

这是我的代码：

```
DateTime startDate = Convert.ToDateTime( orderDate ).AddMonths(-1);
DateTime endDate = Convert.ToDateTime( orderDate ); 
```

orderDate 是我传入的有效日期。

我如何始终保证 startDate 是 orderDate 上个月的第一天？我如何始终保证 endDate 是 orderDate 每月的最后一天？

例子：

```
orderDate = 5/4/2012

I want startDate to be 4/1/2012 (or 04/1/2012 whichever is default)
I want endDate to be 4/30/2012 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:14:25.297

```
DateTime startDate = Convert.ToDateTime( orderDate ).AddMonths(-1);
// set to first of month
startDate = startDate.AddDays(1-startDate.Day);

// Set end date to last of month, which is one day before first of next month
DateTime endDate = startDate.AddMonths(1).AddDays(-1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:11:43.827

```
origDate = startDate.AddMonths(-1);
DateTime myDate = new DateTime(origDate.Year, origDate.Month, 1); 
```

[http://msdn.microsoft.com/en-us/library/xcfzdy4x.aspx](http://msdn.microsoft.com/en-us/library/xcfzdy4x.aspx)

像这样的东西......我们经常这样做，以至于我们刚刚创建了一个扩展方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:11:52.560

```
DateTime startDate = new DateTime( orderDate.Month == 1 ? orderDate.Year - 1 : orderDate.Year, orderDate.Month - 1, 1);
DateTime endDate = new DateTime(orderDate.Year, orderDate.Month, DateTime.DaysInMonth(orderDate.Year, OrderDate.Month)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:23:44.093

```
var orderDate = DateTime.Now.Date;
var endDate = orderDate.AddDays(-orderDate.Day);
var startDate  = endDate.AddDays(-(endDate.Day - 1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T21:12:28.990

使用 DateTime 构造函数，该构造函数为每一年、每月、每一天……获取单独的值，并相应地调整它们（即每月的第一天意味着天 = 1）。

# oauth - OAuth：如何使用本地 URL 进行测试？

> ID：10456174
> 
> 赞同：207
> 
> 时间：2012-05-04T21:10:16.370
> 
> 标签：oauth, localhost

我正在尝试测试[OAuth](https://en.wikipedia.org/wiki/OAuth)按钮，但它们（Facebook、Twitter、LinkedIn）都返回错误，似乎表明我无法从*本地*URL 测试或使用它们。

*如果人们似乎都需要非开发*和*非本地*连接环境，那么人们通常如何使用 OAuth 进行开发？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-05-05T07:56:47.880

**2016 年 10 月更新**：现在最简单：使用总是指向 的[lvh.me](http://lvh.me)`127.0.0.1`，但请确保每次需要调用它时验证这仍然是正确的（因为域可能会过期或被接管，并且 DNS 中毒始终是一个问题)

**上一个答案**：

由于回调请求是由浏览器发出的，因此作为 HTTP 重定向响应，您可以设置您的 .hosts 文件或等效文件以指向不`localhost`指向 127.0.0.1 的域。

例如，您在 Twitter 上注册了以下回调：`http://www.publicdomain.com/callback/`. 确保`www.publicdomain.com`在您的 hosts 文件中指向 127.0.0.1，并且 twitter 可以在[www.publicdomain.com](http://www.publicdomain.com)上进行成功的 DNS 查找，即域需要存在，并且如果请求，特定的回调应该可能返回 200 状态消息。

**编辑**：

我刚刚阅读了以下文章：[http ://www.tonyamoyal.com/2009/08/17/how-to-quickly-set-up-a-test-for-twitter-oauth-authentication-from-your-local -machine](https://web.archive.org/web/20171219093121/www.tonyamoyal.com/2009/08/17/how-to-quickly-set-up-a-test-for-twitter-oauth-authentication-from-your-local-machine/)，从这个问题链接到：[Twitter oAuth callbackUrl - localhost development](https://stackoverflow.com/questions/800827/twitter-oauth-callbackurl-localhost-development)。

引用文章：

> 您可以使用 URL 缩短服务 bit.ly。只需缩短 [localhost URL 例如 http//localhost:8080/twitter_callback] 并将缩短的 URL 注册为 Twitter 应用程序中的回调。

这应该比在 .hosts 文件中摆弄更容易。

请注意，现在（2014 年 8 月）bit.ly 不允许将链接转发到本地主机；但是谷歌链接缩短器有效。

PS 编辑：（18 年 11 月）：Google 链接缩短器停止支持 localhost 或 127.0.0.1。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-11-28T08:27:55.257

或者您可以使用[https://tolocalhost.com/](https://tolocalhost.com/)并配置它应该如何将回调重定向到您的本地站点。您可以指定主机名（如果与 localhost 不同，即 yourapp.local 和端口号）。**仅用于开发目的。**

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-09-22T20:42:21.093

您也可以使用 ngrok：[https](https://ngrok.com/) ://ngrok.com/ 。我一直使用它在我的本地主机上运行公共服务器。希望这可以帮助。

甚至免费提供您自己的自定义域的另一个选项是 serveo.net 和[https://localtunnel.github.io/www/](https://localtunnel.github.io/www/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-01-23T22:04:07.480

对于 Mac 用户，编辑该`/etc/hosts`文件。`sudo vi /etc/hosts`如果它是只读的，则必须使用。授权后，oauth 服务器会发送回调 URL，由于回调 URL 是在您的本地浏览器上呈现的，因此本地 DNS 设置将起作用：

```
127.0.0.1       mylocal.com 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-01-02T22:10:15.720

Set your local domain to `mywebsite.example.com` (and redirect it to localhost) -- even though the usual is to use `mywebsite.dev`. This will allow robust automatic testing.

Although authorizing `.test` and `.dev` is not allowed, authorizing `example.com` **is** allowed in google oauth2.

(You can redirect any domain to localhost in your hosts file (unix/linux: `/etc/hosts`))

**Why `mywebsite.example.com`?**
Because `example.com` is a reserved domain name. So

1.  there would be no naming conflicts on your machine.
2.  no data-risk if your test system exposes data to `not-redirected-by-mistake.example.com`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-04-21T13:22:48.737

您可以在 windows 或 linux 上编辑 hosts 文件 Windows : C:\Windows\System32\Drivers\etc\hosts Linux : /etc/hosts

> # localhost 名称解析在 DNS 本身内处理。
> 
> 127.0.0.1 mywebsite.com

完成测试后，您只需评论添加的行以禁用它

> # 127.0.0.1 mywebsite.com

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-18T07:12:28.050

Google 不允许在 localhost 上使用`http://webporject.dev`or`.loc`和 .etc 以及 google 短链接测试 auth api，这也缩短了您的本地 url( `http://webporject.dev`) `bit.ly`:)。Google 只接受以`http://localhost/`...

如果您想测试 google auth api，您应该按照以下步骤操作...

[![设置新别名](../Images/fce9a4dbfcf4fc7ff2ce32f76082d511.png)](https://i.stack.imgur.com/gGIOb.png)

如果您使用`openserver`转到设置面板并单击`aliases tab`并单击下拉菜单，然后找到`localhost`并选择它。

现在您应该通过单击第一个下拉列表旁边的下一个下拉列表来选择您的本地 Web 项目根文件夹。

然后单击一个名为`add`并重新启动 opensever 的按钮。

现在您的本地项目在此链接上可用，`http://localhost/` 您也可以将此本地 url 粘贴到 google auth api 到`redirect url`字段...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-16T18:47:51.513

我遇到了其他答案中提到的工具的一些问题，例如[http://tolocalhost.com](http://tolocalhost.com)不转发查询参数（更不用说您必须先访问该页面并对其进行配置，与[https://thomasmcdonald.github的情况相同.io/Localhost-uri-Redirector/](https://thomasmcdonald.github.io/Localhost-uri-Redirector/) ) 和[http://lvh.me](http://lvh.me)对我没有用，因为我在本地计算机上运行代理，并且需要公共 URL 指向像[http://mywebsite 这样的私有 URL。开发](http://mywebsite.dev)者

所以我制作了自己的工具来满足我的需求，并且可能会满足你的需求：

[https://redirectmeto.com](https://redirectmeto.com)

例子：

[https://redirectmeto.com/https://www.google.com/search?q=puppies](https://redirectmeto.com/https://www.google.com/search?q=puppies)

[http://redirectmeto.com/http://localhost:4000/oauth/authorize](http://redirectmeto.com/http://localhost:4000/oauth/authorize)

[http://redirectmeto.com/http://client.dev/page](http://redirectmeto.com/http://client.dev/page)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-08T11:23:02.233

我发现[xip.io](http://xip.io/)会自动将固定 url 转换为嵌入式 localhost 域。

例如，假设您的 localhost 服务器正在运行，`127.0.0.1:8000` 您可以`http://www.127.0.0.1.xip.io:5555/`访问该服务器。然后，您可以将此地址添加到 Facebook 或 Google 的 Oauth 配置中。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-01T22:24:07.057

**此答案仅适用于 Google OAuth**

它实际上非常简单，我很惊讶它对我有用（我仍然怀疑我的眼睛所看到的）。

显然，您可以`localhost`在 Google Developer Console 上添加为受信任域，因为 localhost 是大多数规则的例外，如您[在此处](https://developers.google.com/youtube/v3/guides/auth/client-side-web-apps#origin-validation)看到的。

这可以[在此页面上](https://console.cloud.google.com/apis/credentials)的 OAuth 2.0 客户端 ID 下完成。单击编辑，然后添加`http://localhost:8000`或类似端口，然后单击保存。

在输入框中包含`http`或输入是至关重要的。`https`

**HTTP 还是 HTTPS？**

我再次对 Google 允许使用 http 感到惊讶，但请注意，如果您的应用程序已发布到生产环境，则会存在轻微的安全风险。

如果您想格外谨慎，可以选择坚持使用https。这将要求您在 localhost 服务器上设置 SSL 证书。

这比您想象的要容易，因为 SSL 证书不需要是有效的。许多 http 服务器应该给你这个选项。无论如何，您都必须在浏览器中单击“继续”按钮才能绕过大红色警告。

这比 http 更安全，因为 a) 如果黑客正在尝试钓鱼，用户将看到一个大红色警告，或者 b) 他们唯一不会看到此警告的情况是用户故意设置了自托管 SSL 证书，在这种情况下，他们可能知道自己在做什么（我想病毒在技术上也可以做到这一点，但在那个阶段，他们已经获得了对用户系统的足够控制权，可以做任何他们想做的事情）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-24T10:52:27.247

另一个有价值的选择是[https://github.com/ThomasMcDonald/Localhost-uri-Redirector](https://github.com/ThomasMcDonald/Localhost-uri-Redirector)。这是一个非常简单的 html 页面，可以重定向到您在 UI 中配置的任何主机和端口。

该页面托管在 Github [https://thomasmcdonald.github.io/Localhost-uri-Redirector](https://thomasmcdonald.github.io/Localhost-uri-Redirector)上，因此您可以将其用作您的 OAuth2 重定向 url 并在 UI 中配置您的目标主机和端口，它只会重定向到您的应用程序

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-04-16T07:07:45.843

以 Google OAuth 为参考

*   在您的**OAuth 客户端**选项卡中

    1.  将您的*App URI 示例`(http://localhost:3000)`*添加到**Authorized JavaScript origins** URIs
*   在您的**OAuth 同意屏幕中**

    1.  添加`mywebsite.com`到**授权域**
*   在 windows 或 linux 上编辑 hosts 文件`Windows C:\Windows\System32\Drivers\etc\hosts` `Linux : /etc/hosts`以添加`127.0.0.1 mywebsite.com` （注意如果有任何其他 127.0.0.1，请注释掉任何内容）

# python - 加载一个编码为 Json 的大型 Python 字典而不杀死内存使用？

> ID：10456177
> 
> 赞同：7
> 
> 时间：2012-05-04T21:10:28.897
> 
> 标签：python, json

我见过很多与此类似的问题，但没有一个真正匹配的问题。大多数其他问题似乎与速度有关。我遇到的是一个 json 字典，它位于我本地机器上的一个 1.1gig 文件中，当我尝试使用以下任何内容加载它时，它占用了我所有的 16 GB 内存：

```
f = open(some_file, "rb")
new_dictionary = json.load(f) 
```

无论我使用什么 json 库（我尝试过 ujson、json、yajl），无论我是否将内容作为字节流读取，都会发生这种情况。这对我来说完全没有意义。疯狂的内存使用是怎么回事，我该如何解决？

如果有帮助，字典只是一堆嵌套字典，它们都具有指向其他整数的整数。示例如下所示：

```
{"0":{"3":82,"4":503,"15":456},"956":{"56":823,"678":50673,"35":1232}...} 
```

**更新：**当我使用 simplejson 运行它时，它实际上只占用了 8 个演出。不知道为什么那个比其他所有占用的要少得多。

**更新2：**所以我做了更多调查。我用 simplejson 加载了我的字典，并尝试将所有键转换为整数（根据 Liori 的建议，字符串可能会占用更多空间）。空间在 8 场演出时保持不变。然后我尝试了 Winston Ewert 关于运行 gc.collect() 的建议。空间仍然保持在 8 场演出。最后，又恼又好奇，我腌制了我的新数据结构，退出了 Python，然后重新加载。瞧，它仍然需要 8 个演出。我猜 Python 只是想要这么大的空间来存放一个大的 2d 字典。当然令人沮丧，但至少现在我知道这不是 JSON 问题，只要我使用 simplejson 加载它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:49:30.517

You could try with a streaming API:

[http://lloyd.github.com/yajl/](http://lloyd.github.com/yajl/)

of which there are a couple of python wrappers.

[https://github.com/rtyler/py-yajl/](https://github.com/rtyler/py-yajl/)

[https://github.com/pykler/yajl-py](https://github.com/pykler/yajl-py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T00:55:10.230

我的一个小实验表明，`gc.collect()`在解析 json 对象后调用会将内存使用量降低到最初构造对象时的位置。

这是我在较小范围内获得的内存使用结果：

```
Build. No GC
762912
Build. GC
763000
Standard Json. Unicode Keys. No GC
885216
Standard Json. Unicode Keys. GC
744552
Standard Json. Int Keys. No GC
885216
Standard Json. Int Keys. GC
744724
Simple Json. Unicode Keys. No GC
894352
Simple Json. Unicode Keys. GC
745520
Simple Json. Int Keys. No GC
894352
Simple Json. Int Keys. GC
744884 
```

基本上，运行 gc.collect() 似乎可以清除 JSON 解析过程中产生的某种垃圾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:01:58.363

我不敢相信我要说这个，但 json 实际上是一种非常简单的格式，构建自己的解析器不会太难。

也就是说，只有在以下情况下才有意义：

*   最后您不需要完整的字典（即，您可以在阅读时使用数据）
*   您很清楚数据的结构类型（任意深度的字典会使这变得更加困难）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:25:03.970

Gabe 确实在评论中发现了这一点，但由于已经几个月了，他还没有将其发布为答案，我想我应该回答我自己的问题，所以后人看到有答案。

无论如何，答案是 2d 字典在 Python 中只占用了这么多空间。这些字典中的每一个最终都会有一些空间开销，并且由于它们很多，它会从 1.1 gig 激增到 8 gig，除了尝试使用不同的数据结构或获得更多数据之外，您无能为力内存。

# android - android我如何构建一个动态生成单选按钮的列表视图

> ID：10456178
> 
> 赞同：0
> 
> 时间：2012-05-04T21:10:30.893
> 
> 标签：android, listview, radio-button

我的主要目标是构建一个 ListView 放置三个单选按钮组。在屏幕底部。我有一个名为 Next 的按钮。当我单击下一步时，我希望保存所有单击的单选按钮。谁能告诉我最好的方法来解决这个问题。

例如

*   问题
*   答案是分组的。

*   回答

*   答案2

*   安瑟 3

然后这是重复。我在游标中有数据，并希望我可以输出特定的记录。但我不确定如何动态生成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:40:21.533

我在这方面并不完美。但是，您可以尝试使用 HashMap，其中每个问题都有一个键，每个键都有一个单选按钮列表。然后从这里您可以将单击并存储的值附加到一个新列表中。

# python - 将抽象类用于事件处理程序回调是惯用的 Python 吗？

> ID：10456193
> 
> 赞同：5
> 
> 时间：2012-05-04T21:11:45.077
> 
> 标签：python, events, callback

我正在构建一个事件调度程序框架，用于解码消息并回调到用户代码中。我的 C++ 背景建议我写：

```
class Handler:
    def onFoo(self):
        pass
    def onBar(self):
        pass

class Dispatcher:
    def __init__(self):
        self.handler = Handler()

    def run():
        while True:
            msg = decode_message() # magic
            if msg == 'foo':
                handler.onFoo()
            if msg == 'bar':
                handler.onBar() 
```

然后框架用户将编写如下内容：

```
class MyHandler(Handler):
    def onFoo(self):
        do_something()

dispatcher = Dispatcher()
myHandler = MyHandler()
dispatcher.handler = myHandler
dispatcher.run() 
```

但我也可以想象将`onFoo()`and`onBar()`作为方法`Dispatcher`并让用户用其他方法替换它们。然后用户的代码将如下所示：

```
def onFoo():
    do_something()

dispatcher = Dispatcher()
dispatcher.onFoo = onFoo 
```

我还可以`Dispatcher.onFoo`列出可调用对象，这样用户就可以像在 C# 中那样附加多个处理程序。

最Pythonic的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:35:42.557

我不会说第一种方式有什么特别的*错误*，特别是如果你想允许`Dispatcher`在运行时以有组织的方式自定义对象（即通过将不同类型的`Handler`对象传递给它们），如果你`Handler`需要与复杂状态交互并保持。

`Handler`但是以这种方式定义基类并没有真正获得任何好处。一个类仍然可以在`Handler`不覆盖任何方法的情况下进行子类化，因为这不是抽象基类——它只是一个常规基类。因此，如果有一些合理的默认行为，我建议将它们构建到`Handler`. 否则，您的用户将一无所获`Handler`——他们还不如定义自己的`Handler`类。虽然如果您只想提供一个无操作占位符，那么这个设置就可以了。

无论如何，我个人更喜欢第一种方法而不是您建议的第二种方法；我不确定哪一个更“pythonic”，但第一个对我来说似乎是一种更干净的方法，因为它保持`Handler`和`Dispatcher`逻辑分开。（它避免了像你看到的那种`threading.Thread`你只能安全地覆盖*某些*方法的情况——我总是觉得这有点不和谐。）

不过，我觉得我应该指出，如果你真的想要一个真正的抽象基类，你应该写一个！从 2.6 开始，Python 提供了对灵活[抽象基类](http://docs.python.org/library/abc.html)的支持，并提供了许多不错的功能。例如，您可以使用`abstractmethod`装饰器定义一个抽象方法，以确保它*必须*被子类覆盖；但您也可以定义不必重写的常规方法。如果您正在寻找 c++ 习语的 Pythonic 版本，这可能是最好的方法——当然，这不是一回事，但它比您现在拥有的更接近。

# computer-architecture - 在 FSM 中，一个状态是否持续一个时钟周期或更多？

> ID：10456200
> 
> 赞同：1
> 
> 时间：2012-05-04T21:12:28.787
> 
> 标签：computer-architecture, state-machine, fsm

需要为学校设计一个简单的。更具体地说，是摩尔 FSM。我不确定状态转换是如何发生的，是每个时钟的下一个状态吗？我需要知道，因为我想知道我是否可以移动一个寄存器并向它添加一个值，所有这些都处于相同的状态......可以使用波边吗？

**编辑**：

我必须设计带有寄存器的**ALU**部分作为门级的示意图，所以没有目标**CPU**。

我制作了算法图，然后根据**Moore FSM**规则将状态放入功能块。每个操作块都有一个状态。

例如在状态***S1***，我有以下操作：***y0 = shift Reg1 left; y1 = Reg1 = Reg1 + Reg2***。**所以Moore FSM**的控制部分输出的微指令为***0000011 (yn...y1,y0)。***这个微命令应该是我需要设计的 ALU 部分的输入。现在我意识到**y1,y0**会相互冲突，因为两者都使用**Reg1。**

它有问题，因为我实际上没有控制部分，我必须想象核心 FSM 并只设计带有寄存器的 ALU。这就是为什么我想知道我是否得到了多个时钟周期，所以我可以对**y0,y1**进行排序，还是我必须在一个时钟内完成整个操作？

我打算做并行进并行出非移位寄存器，显然我不能同时做微命令的两个操作。那我该怎么办：

```
1\. make extra states? which i really dont want to do
2.use edges of a single clock? (might cause problems?)
3.Assume i get a preset amount of ticks from the clock to complete the microcommand ?
This would make the most sense, but i dont know if its the case.
The control unit does "know" the algorithm and thus how many operations need to be performed 
```

我必须再次注意，控制部分是完全抽象的，我不知道在实践中是如何处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:22:03.620

[FSM](http://en.wikipedia.org/wiki/Finite-state_machine)本身没有固有的时间概念（尽管可以定义）。[摩尔机器](http://en.wikipedia.org/wiki/Moore_machine)是简化模型，甚至无法正式表示一个不断前进的“时间”（当然，没有完全用状态来实现计数）；请记住，只有一组*有限*的状态。

在任何情况下，都可以在特定 FSM 的*实现*细节中引入时间，并且在特定状态之间变化所需的时间量可能不是恒定的。（一个特定的 FSM 也可能以不同的方式映射到不同的*实现*。）在[时钟系统](http://en.wikipedia.org/wiki/Clocked_sequential_system)的情况下，它需要研究每个“时钟”在*实现*中是如何定义的；它可能是前沿，后沿，两者，或完全不同的东西。

与其在此处查看 FSM 以获得指导（它只是状态的逻辑进展），不如查看 FSM 所代表的操作码（或任何实现方式），以及所讨论的 CPU（或任何实现方式）如何”执行”他们。

（书上怎么说？;-)

# c# - Automapper 映射具有 HAS-A 关系的对象

> ID：10456203
> 
> 赞同：0
> 
> 时间：2012-05-04T21:12:36.070
> 
> 标签：c#, mapping, automapper

霍拉，

我有一个数据访问对象如下：

```
class Foo : IStorable
{
  string name;
  int age;
  .. many more
} 
```

我有另一个像这样的对象：

```
class FooViewModel
{ 
  Foo data;
  Bar moreData;
  Car evenMore
} 
```

所以我从数据库中读取 Foo 对象，我必须构造一个 ViewModel。ViewModel 有一个 Foo 对象和一些其他对象。我想将 Foo 映射到 ViewModel 的 Foo。

我如何使用 AutoMapper 进行映射？

```
Mapper.CreateMap<Foo, FooViewModel>(); 
```

这行得通吗？我将如何访问它？

本质上我有很多属性的类，我想避免打字（懒惰）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:24:41.770

FooViewModel 应该具有您想要映射的 Foo 的所有属性，而不是“Foo”属性。

然后，您将能够使用 AutoMapper 将 Foo 映射到 FooViewModel 并且 Foo 具有的任何关系依赖项都不会最终出现在 FooViewModel 中。

# php - 在 Zend Framework PHP 中的页面之间持久化数据时使用会话变量与请求参数

> ID：10456204
> 
> 赞同：-1
> 
> 时间：2012-05-04T21:12:36.477
> 
> 标签：php, zend-framework, session-state

我试图更好地理解在这种情况下（使用 Zend 框架）在请求之间保存数据的最佳方法是什么：

假设我有一个事件控制器，默认（索引）视图显示任何现有的公告（如果有的话），以及添加新公告的链接（事件和公告都是任意对象）。我正在尝试检索 eventId，以便在将新公告保存到数据库时将其与它相关联。从组成上讲，一个事件由 0 到多个公告组成。根据我对 Zend 框架的有限理解，我看到了两个主要选项。

选项一：使 URL 类似于“/event/addAnnouncement/eventId/5”，这样可以通过路由/路径参数轻松检索 eventId。

方案二：在控制器的 indexAction 中，将 eventId 保存到会话变量中，然后可以在 Event 控制器的 addAnnouncementAction 中检索。这样，Add Announcement 链接将只是“/event/addAnnouncement/”。

谁能阐明这两种方式中哪一种更好，或者是否还有另一种我不知道的方式？

与往常一样，非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:22:07.960

*要问自己的问题是，您需要将数据保留多长时间？*
如果您只需要保存数据以将其传递给可以使用**POST**或**GET**的下一个操作，则**GET**将通过 url 而**POST**不会（*通常*）。

您提供的示例表明您需要将数据保留足够长的时间以验证、过滤和处理数据。因此，您可能会非常满意将少量数据作为参数（**POST**或**GET**）传递。这将提供您需要的临时持久性，并提供额外的好处，即一旦发出未传递变量的请求，数据就会过期。

一个简单的示例（假设您的表单使用**POST**方法传递数据）：

```
 if ($this->getRequest()->isPost()) {
        if ($form->isValid($this->getRequest()->getPost()){
            $data = $form->getValues();//filtered values from form
            $model = new Appliction_Model_DbTable_MyTable();
            $model->save($data);
            //but you need to pass the users name from the form to another action
            //there are many tools in ZF to do this with, this is just one example
            return $this->getHelper('Redirector')->gotoSimple(
                                                   'action' => 'newaction', 
                                                    array('name' => $data['name'])//passed data
                                                   ); 
        }

} 
```

如果您需要将数据保存更长时间，那么**$_SESSION**可能会派上用场。在 ZF 中，您通常会使用它`Zend_Session_Namespace()`来操作会话数据。
它很容易使用`Zend_Session_Namespace`，这里是我经常使用它的一个例子。

```
class IndexController extends Zend_Controller_Action {
protected $_session;

public function init() {
    //assign the session to the property and give the namespace a name.
    $this->_session = new Zend_Session_Namespace('User');
}
public function indexAction() {
    //using the previous example
    $form = new Application_Form_MyForm();

     if ($this->getRequest()->isPost()) {
        if ($form->isValid($this->getRequest()->getPost()){
            $data = $form->getValues();//filtered values from form
            //this time we'll add the data to the session
            $this->_session->userName = $data['user'];//assign a string to the session
            //we can also assign all of the form data to one session variable as an array or object
            $this->_session->formData = $data;
            return $this->getHelper('Redirector')->gotoSimple('action'=>'next');
        }
    }
    $this->view->form = $form;
}
public function nextAction() {
   //retrieve session variables and assign them to the view for demonstration
   $this->view->userData = $this->_session->formData;//an array of values from previous actions form
   $this->view->userName = $this->_session->userName;//a string value
    }
  }
} 
```

您需要保留在应用程序中的任何数据都可以发送到任何操作、控制器或模块。请记住，如果您重新提交该表单，保存到这些特定会话变量的信息将被覆盖。

ZF 中还有一个选项，介于传递参数和在会话中存储数据之间，`Zend_Registry`. 它的用途非常类似于`Zend_Session_Namespace`并且经常用于在引导程序中保存配置数据（但几乎可以存储您需要存储的任何内容），并且还被许多 Zend 内部类使用，其中最著名的是[flashmessenger 动作助手](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.flashmessenger)。

```
 //Bootstrap.php
 protected function _initRegistry() {

        //make application.ini configuration available in registry
        $config = new Zend_Config($this->getOptions());
        //set data in registry
        Zend_Registry::set('config', $config);
    }
 protected function _initView() {
        //Initialize view
        $view = new Zend_View();
        //get data from registry
        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);
        //...truncated...
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

我希望这有帮助。如果您有更多问题，请查看这些链接：

[ZF 请求对象](http://framework.zend.com/manual/en/zend.controller.request.html)
[Zend_Session_Namespace](http://framework.zend.com/manual/en/zend.session.basic_usage.html)
[Zend_Registry](http://framework.zend.com/manual/en/zend.registry.using.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:25:30.230

选项 1 更好，尽管在您的示例中这不是 POST（但可以通过 POST 完成）。

选项 2 的问题是：

*   如果用户同时打开多个与不同事件相关的窗口或选项卡，您将如何跟踪应该使用哪个事件 ID？
*   如果用户将添加事件页面添加为书签并稍后返回，则可能未设置会话变量

选项 2 实现起来也稍微复杂一些，并且增加了对会话的依赖。

# memcached - 用单独的缓存产品替换 HBase 缓存

> ID：10456209
> 
> 赞同：0
> 
> 时间：2012-05-04T21:12:53.700
> 
> 标签：memcached, hbase, distributed-caching, in-memory-database, gridgain

HBase 中使用的缓存机制是否可以替换为不同的缓存产品，例如 Memcache、Gemfire、GridGain 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:33:52.297

HBase 与 GridGain 之类的东西非常不同。列式小型数据库（无事务等）与完全事务性内存数据平台。不同的目标，不同的方法。

如果您有适当的用例，替换可能是正确的方法。

# javascript - 谷歌地图 API v3 未显示在浏览器中

> ID：10456210
> 
> 赞同：0
> 
> 时间：2012-05-04T21:12:59.813
> 
> 标签：javascript, html, google-maps

我的 Google 地图应用程序有点问题。

所以我按照 API 上给出的代码来创建基本地图。我有这个：

```
 <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map { height: 75% }
 </style> 
```

我还有以下 javascript 来初始化地图：

```
function showmap(coordinates)
{
    var lat = coordinates.latitude;
    var lon = coordinates.longitude;

    var myOptions = {
        position: new google.maps.LatLng(lat, lon),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"), myOptions);
} 
```

但我在浏览器中得到的只是一个灰色的大盒子。我在几种浏览器（chrome、firefox 等）中尝试过，但看起来都一样。我很确定我已经正确设置了......有人知道发生了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:09:28.467

我不知道位置参数有什么用（没有像这样的地图选项），但我猜你混淆了`position`（`center`是`center`必需的）

# asp.net - 如何从 ASP.net 调用 Windows 窗体应用程序

> ID：10456215
> 
> 赞同：2
> 
> 时间：2012-05-04T21:13:29.243
> 
> 标签：asp.net, .net, winforms, com, activex

我正在尝试使用 activeX 从我的 ASP.net 网站启动用 C# 编写的 Windows 窗体应用程序。当我单击一个按钮时，我希望打开一个新页面，并且该页面上的 activeX 将调用我的 Windows 应用程序。

我正在使用 Visual Studio 2010。我遵循了本教程：[http ://dotnetslackers.com/articles/csharp/WritingAnActiveXControlInCSharp.aspx](http://dotnetslackers.com/articles/csharp/WritingAnActiveXControlInCSharp.aspx)

但是，该教程仅适用于您通过控制台编译的 1 个 C# 文件。

我的问题如下：

1.如何编译整个 windows 窗体项目以使用 /t:library 和 regasm？

2.我已经按照这个问题的答案来修改我的 Windows 窗体应用程序：[如何在 C# 中创建 ActiveX 控件 (COM)？](https://stackoverflow.com/questions/3360160/how-do-i-create-an-activex-com-in-c). 但是，就像在这两个示例中一样，它们没有 Main 方法。当我尝试修改 Windows 窗体应用程序的代码时，如果我将其取出并用 Launch() 方法替换它，我会收到错误消息，指出程序没有用于进入的 Main 方法。我确定我错过了什么？

3.我是否只需要在新的.aspx 页面上编写java 脚本来访问应用程序？

PS我正在尝试打开这个开源Windows窗体应用程序：http: [//www.codeproject.com/Articles/239849/Multiple-face-detection-and-recognition-in-real-ti](http://www.codeproject.com/Articles/239849/Multiple-face-detection-and-recognition-in-real-ti)

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:18:06.713

你不能这样做。允许网站在某些沙盒环境（例如 JavaScript）之外的本地机器上执行任意代码将是巨大的安全风险。

AFAIK 最接近您想要的是[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)，它是一个安装程序，并使用它在客户端计算机上安装您的 WinForms 应用程序。项目安装很简单，在VS中右键发布即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:47:42.010

您可以使用一种称为 ClickOnce 的解决方案。

[http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx)

我创建了企业应用程序，将其部署到可访问 Internet 的位置，并将我的用户链接到允许他们单击、安装和运行应用程序的“发布”网站。

请记住，除了运行应用程序之外，这还会安装应用程序，因此如果您的部分要求是不安装它，那么 ClickOnce 将不适用于您的方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:41:16.400

我建议您可以创建 ActiveX 控件而不是 Windows 窗体。您可以使用旧版 VB (VB 6.0) 创建它。你可以参考类似的东西

*   [http://www.visualbasicbooks.com/activeXtutorial.html](http://www.visualbasicbooks.com/activeXtutorial.html)
*   [http://blogs.msdn.com/b/ajma/archive/2004/08/12/213868.aspx](http://blogs.msdn.com/b/ajma/archive/2004/08/12/213868.aspx)

# javascript - javaScript从单个值数组中返回一个新的成对值数组

> ID：10456218
> 
> 赞同：8
> 
> 时间：2012-05-04T21:13:49.100
> 
> 标签：javascript, jquery, arrays, multidimensional-array

> **可能重复：**
> [将数组拆分为块](https://stackoverflow.com/questions/8495687/split-array-into-chunks)

我正在尝试将一个值数组转换为一个新的配对值数组。

例如我需要转换：

```
var arr = [1,2,3,4,5,6,7,8]; 
```

进入：

```
arr = [[1,2], [3,4], [5,6], [7,8]]; 
```

我尝试像这样使用 jQuery 的 .map() 方法，但这对我不起作用：

```
arr= $.map(arr, function(n, i){
return [n + ',' + n[ i + 1 ]];
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T21:25:08.380

如果你坚持使用**map**，你可以这样做：

```
arr= $.map(arr, function(n, i){
    if (i%2 === 0) return [[n, arr[ i + 1 ]]];
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T21:27:39.593

如果您不想在图钉上使用锤子：

```
var arr = [1,2,3,4,5,6,7,8];

var newarr = new Array();

for (var i=0; i<arr.length; i=i+2) {
    newarr.push(arr.slice(i,i+2));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T21:27:44.350

你不想要`map`，你想要[`reduce`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)。

这是应该起作用的东西：

```
var endArr = [],
    arr = [ 1, 2, 3, 4, 5, 6, 7, 8 ],
    i = 0;

arr.reduce( function( prev, curr, index ) {
    if ( index % 2 === 0 ) {
        endArr[ i ] = [ prev, curr ];
    }
    i++;
} ); 
```

只是我想到的其他事情：

```
var endArr = [],
    arr = [ 1, 2, 3, 4, 5, 6, 7, 8 ];

while ( arr.length ) {
    endArr.push( arr.splice( 0, 2 ) );
} 
```

[编辑：Arf，它与Chris Gutierrez](https://stackoverflow.com/a/10456462/851498)的解决方案相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T21:27:51.557

不要对每个问题都使用 jquery：

```
var arr = [1, 2, 3, 4, 5, 6, 7, 8];
var narr = [];
for (i = 0; i < arr.length; i = i + 2) {
    narr[i / 2] = [arr[i], arr[i + 1]];
} 
```

但这仅在您有偶数的情况下才有效`arr`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-04T21:37:35.847

另一个例子...

```
var arr = [1 , 2, 3, 4, 5, 6, 7, 8]
var final = []
while(arr.length) {
    final.push(arr.splice(0, 2))
} 
```

# php - 路由器配置 CakePHP 删除 URL 中的页面

> ID：10456227
> 
> 赞同：3
> 
> 时间：2012-05-04T21:14:33.923
> 
> 标签：php, cakephp, router, cakephp-2.1, clean-urls

我目前正在寻找一种解决方案来从 URL 中删除“页面”，但不会让添加控制器变得困难。

我环顾四周并在谷歌上搜索解决方案，但他们能给出的最佳解决方案是：

```
Router::Connect('/*', array('controller' => 'pages', 'action' => 'display')); 
```

[示例链接](http://bakery.cakephp.org/articles/joelstein/2007/05/02/taking-advantage-of-the-pages-controller)

但是这个解决方案的问题是，每次我想添加一个控制器时，我都需要在我的*config/routers.php*文件中添加以下行

```
Router::Connect('/Users/:action/, array('controller' => 'Users');
Router::Connect('/users/:action/, array('controller' => 'Users'); 
```

我之所以添加这两行是因为我不希望 URL 区分大小写。

我也知道，一旦网站“完成”，控制器被更改的情况并不经常发生。

所以我的解决方案如下：

```
/*
 * Get URL
 * Seperate in array
 * Remove empty elements
 */
$url = array_filter(explode("/", Router::url()));

/*
 * Get Controllers list
 */
$Controllers = App::objects('controller');
$CleanControllers = array();

/*
 * Remove string 'Controller' from element
 * lower string
 */
foreach($Controllers as $Controller) {
    $CleanControllers[] = strtolower(str_replace('Controller', '', $Controller));
}

/*
 * Check if first element, from URL, is NOT a controllers array
 */
if(!in_array(strtolower(reset($url)), $CleanControllers)) {
    /*
     * Forward to "Pages" controller 
     */
    Router::connect('/', array('controller' => 'Pages', 'action' => 'display', 'home'));
    Router::connect('/*', array('controller' => 'Pages', 'action' => 'display'));
}

/*
 * Check if first element, from URL, is NOT a controllers array
 */

CakePlugin::routes();

require CAKE . 'Config' . DS . 'routes.php'; 
```

所以我的问题是这个解决方案是性能杀手吗？如果是这样，有人知道更好的解决方案吗？

因为当我从 CakePHP 看高级路由时，在我看来我需要一个 SUPER Advanced 路由......或者我根本不明白。

CAKEPHP 2.1 版

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:30:06.953

您的方法基本上是正确的，没有可以解决此问题的魔术开关。不久前我写了[一篇关于这种路由](http://lecterror.com/articles/view/advanced-routing-with-cakephp-one-example)的文章，它适用于早期的蛋糕版本，但仍然与微小的变化相关（我希望）。

# bash - Bash PS1 窗口标题？

> ID：10456228
> 
> 赞同：4
> 
> 时间：2012-05-04T21:14:34.197
> 
> 标签：bash, ps1

说我有这个作为我的 PS1

```
PS1='\[\e]0;TITLE\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]\n\$ ' 
```

它会给我这个提示

```
Steven@Steven-PC ~
$ 
```

窗口标题为`TITLE`

我明白这部分

```
\e]0;TITLE\a 
```

创建标题，但我不明白为什么。这似乎是一些胡言乱语。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T21:41:34.067

终端驱动程序查找包含该特定代码 ( `\e]0;`) 的输出，并将直到 的所有内容`\a`用作终端窗口标题。

# python - 在转换期间保持一个 numpy ndarray 子类作为返回值。设置 __array_priority__ 安全吗？

> ID：10456229
> 
> 赞同：6
> 
> 时间：2012-05-04T21:14:39.470
> 
> 标签：python, arrays, numpy, subclass

我正在尝试子类化`numpy`的`ndarray`类，并且有一些运气。我想要的行为与文档中给出的[示例](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html#slightly-more-realistic-example-attribute-added-to-existing-array)几乎完全相同。我想向`name`数组添加一个参数（我用它来跟踪数据最初来自哪里）。

```
class Template(np.ndarray):
    """A subclass of numpy's n dimensional array that allows for a
    reference back to the name of the template it came from.
    """
    def __new__(cls, input_array, name=None):
        obj = np.asarray(input_array).view(cls)
        obj.name = name
        return obj

    def __array_finalize__(self, obj):
        if obj is None: return
        self.name = getattr(obj, 'name', None) 
```

这可行，除了像[这个问题](https://stackoverflow.com/questions/6190859/some-numpy-functions-return-ndarray-instead-of-my-subclass)一样，**我希望涉及我的子类的任何转换都返回我的子类的另一个实例**。

有时 numpy 函数会返回一个实例`Template`：

```
>>> a = Template(np.array([[1,2,3], [2,4,6]], name='from here')
>>> np.dot(a, np.array([[1,0,0],[0,1,0],[0,0,1]]))
Template([[1, 2, 3],
       [2, 4, 6]]) 
```

但是，有时他们不会：

```
>>> np.dot(np.array([[1,0],[0,1]]), a)
array([[1, 2, 3],
       [2, 4, 6]]) 
```

在我上面链接的问题中，建议 OP 应该覆盖`__wrap_array__`子类的方法。但是，我认为这没有任何理由。在某些情况下，我会使用默认的`__array_wrap__`. [文档](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html#array-wrap-for-ufuncs)似乎表明我遇到了一种情况，`__array_wrap__`即由于更高的`__array_priority__`值而调用了另一个参数的方法：

> 注意ufunc( `np.add`)调用了输入值`__array_wrap__`最高的方法`__array_priority__`

所以我的问题有几个相关的部分。第一：**我可以设置`__array_priority__`我的子类的属性，使其`__array_wrap__`始终被调用吗？**第二：**这是实现我想要的行为的最好/最简单的方法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T11:17:59.380

当两个对象具有相同的 __array_priority__ 时：

```
>>> np.array([[1,0],[0,1]]).__array_priority__
0.0
>>> a.__array_priority__
0.0 
```

并且只能使用一个对象的方法，通过使用第一个数组/对象的方法来解决平局。（在你的情况下__array_wrap__）

从这个问题看来，您的类的方法似乎应该始终是首选，因为它们是相同的（通过继承）或被覆盖。

所以我会启动 __array_priority__。

```
class Template(np.ndarray):
    __array_priority__ = 1.0 (Or whichever value is high enough)
    ... 
```

执行此操作后，无论模板对象在计算中的什么位置。它的方法将优于标准数组的方法。

# wordpress - Wordpress - 添加对超过 2 个菜单的支持

> ID：10456233
> 
> 赞同：0
> 
> 时间：2012-05-04T21:15:12.030
> 
> 标签：wordpress

我正在尝试向我的网站添加更多菜单，

无论我在“register_nav_menus（数组”中添加了多少项）登录时，我仍然无法在 wordpress GUI 中显示超过 2 个菜单。

有谁知道如何添加更多？

编辑：

我为将来需要它的任何人找到了答案：在您的 function.php 文件中，像这样设置您的 register_nav_menus

```
add_action( 'init', 'register_my_menus' );
function register_my_menus() {
register_nav_menus(
array(
'menu-1' => __( 'Menu 1' ),
'menu-2' => __( 'Menu 2' )
)
);
} 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:39:03.160

add_action('init', 'register_my_menus'); function register_my_menus() { register_nav_menus(array('menu-1' => _ *('Menu 1'), 'menu-2' => _* ('Menu 2'))); }

# jquery - 拖动时调整 JQuery Draggable 元素的包含父级的大小

> ID：10456234
> 
> 赞同：2
> 
> 时间：2012-05-04T21:15:27.820
> 
> 标签：jquery, triggers, draggable

我在另一个 div 'box' 父容器中有一个 div 'slide' 元素，并已将 JQuery Draggable 应用于子容器。在拖动项目时，我正在调整父容器的大小，有时会缩小，有时会放大它。

问题是 JQuery 不响应这种调整大小，并且仍然在父级的原始尺寸内包含拖动的元素，而不是在其当前尺寸内，直到 mouseup - 下一个拖动会话将使用新尺寸（直到它再次更改）。

为了尝试解决这个问题，我希望触发 mouseup 事件，然后触发 mousedown 事件，以便 JQuery 使用新的容器大小：

```
$('.slide').draggable({ axis: "x", containment: 'parent',
                    drag: function (e, ui) {
                        resizeContainer();

                        if (outsideContainer()){

                        // Try to stop and restart dragging
                            $(this).trigger('mouseup');
                            $(this).trigger('mousedown');
                        }
                    } 
```

但是，这会引发异常...

```
Unable to get value of the property '0': object is null or undefined 
```

...在这行 JQuery 代码中：

```
this.helper[0].style.left=this.position.left+"px"; 
```

任何人都知道我怎么能a）让 Draggable 实时响应父尺寸的变化或b）触发一个dragstop，然后无缝地拖动？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:28:36.847

@Fijjit，如果我理解正确的话，你想要的是一个自定义的“包含”函数，它`resizeContainer`在将边界应用于拖动的元素之前实现你的算法。

在下面的代码中，

*   标准`draggable containment`选项被省略
*   `resizeContainer``draggable drag`作为事件处理程序附加
*   `resizeContainer`是双重目的；(a) 它执行您的调整大小算法和 (b) 应用自定义包含算法

javascript:

```
$(function(){
    var $container = $("#myContainer");

    function resizeContainer(e, ui) {
        //implement container resize algorithm here
        var w1 = ui.helper.outerWidth(),
            w2 = $container.width();
        ui.position.left = Math.max(Math.min(ui.position.left, w2 - w1), 0);
    }

    $("#draggable").draggable({
        axis: "x",
        drag: resizeContainer
    });
}); 
```

见[小提琴演示](http://jsfiddle.net/XLrNF/)

# javascript - HTML 文本区域选项卡支持

> ID：10456236
> 
> 赞同：7
> 
> 时间：2012-05-04T21:15:36.290
> 
> 标签：javascript, html

我正在制作一个基于 Web 的代码编辑器，并且正在使用 textarea 进行文本编辑。我想向 textarea 添加选项卡支持，以便按下选项卡不会使元素失去焦点。我有这样定义的textarea：

`<textarea id="codeEdit_txt" rows="50" cols="80" onkeydown="return codeEdit_keyDown(event);">`

并且函数 codeEdit_keyDown 定义为：

```
function codeEdit_keyDown(e) {
    if (e.keyCode == 9) {
        return false;
    }
} 
```

这可以防止制表键按下使文本区域失焦，尽管它不会留下制表符。当我最初试图让它工作时，我注意到如果我定义如下函数，它会在光标位置放置一个制表符。

```
function codeEdit_keyDown(e) {
    if (e.keyCode == 9) {
        alert("");
        return false;
    }
} 
```

我的两个问题是：

1.  为什么添加警报会导致添加选项卡？
2.  有没有办法在光标处添加选项卡，而不必找到光标位置，在 texarea 中拆分文本并手动添加制表符（并且不必每次用户按下制表符时都发出警报）？

谢谢

编辑：这似乎只适用于 Chrome，不适用于 IE、Safari 或 Firefox

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:17:35.160

看到这个问题：

[https://stackoverflow.com/a/13130/420001](https://stackoverflow.com/a/13130/420001)

您正在寻找`.preventDefault();`

**编辑**：[小提琴](http://jsfiddle.net/n6aRj/)。

**编辑2：**更好的[小提琴](http://jsfiddle.net/rainecc/n6aRj/1/)，多亏了[rainecc](https://stackoverflow.com/users/1276735/rainecc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-07T17:02:21.637

另一个答案很好，但它在最后结束了标签。我查找了如何在光标位置添加选项卡，并将其添加到解决方案中。

你可以在这里找到工作代码：http: [//jsfiddle.net/felixc/o2ptfd5z/9/](http://jsfiddle.net/felixc/o2ptfd5z/9/)

内联代码作为保障：

```
 function insertAtCursor(myField, myValue) {
			//IE support
			if (document.selection) {
				myField.focus();
				sel = document.selection.createRange();
				sel.text = myValue;
			}
			//MOZILLA and others
			else if (myField.selectionStart || myField.selectionStart == '0') {
				var startPos = myField.selectionStart;
				var endPos = myField.selectionEnd;
				myField.value = myField.value.substring(0, startPos)
					+ myValue
					+ myField.value.substring(endPos, myField.value.length);
				myField.selectionStart = startPos + myValue.length;
				myField.selectionEnd = startPos + myValue.length;
			} else {
				myField.value += myValue;
			}
		}	

		function addTabSupport(elementID, tabString) {
			// Get textarea element
			var myInput = document.getElementById(elementID);

			// At keydown: Add tab character at cursor location
			function keyHandler(e) {
				var TABKEY = 9;
				if(e.keyCode == TABKEY) {
					insertAtCursor(myInput, tabString);
					if(e.preventDefault) {
						e.preventDefault();
					}
					return false;
				}
			}			

			// Add keydown listener
			if(myInput.addEventListener ) {
				myInput.addEventListener('keydown',keyHandler,false);
			} else if(myInput.attachEvent ) {
				myInput.attachEvent('onkeydown',this.keyHandler); /* damn IE hack */
			}
		}

    // easily add tab support to any textarea you like
    addTabSupport("input", "\t");
```

```
<h1>Click in the text and hit tab</h1>

<textarea id="input" rows=10 cols=50>function custom(data){
	return data;
}</textarea>
```

# jquery - 上传 onUploadSuccess 不起作用

> ID：10456239
> 
> 赞同：1
> 
> 时间：2012-05-04T21:15:49.960
> 
> 标签：jquery

文件正在很好地上传，但上传完成后 onUploadSuccess 没有运行有什么问题

```
 jQuery(function() {
        jQuery('#app-icon').uploadify({
            'uploader':'../wp-content/themes/canvas/admin/uploadify/uploadify.swf',
            'script':'../wp-content/themes/canvas/admin/uploadify/uploadify.php',
            'cancelImg':'../wp-content/themes/canvas/admin/uploadify/cancel.png',
            'folder':'../wp-content/themes/canvas/admin/uploadify/uploads',
            'auto':true,
            'fileExt':'*.jpg;*.gif;*.png',
            'fileDesc':'Web Image Files (.JPG, .GIF, .PNG)',
            'queueSizeLimit':3,
            'simUploadLimit':3,
            'method':'POST',
            'sizeLimit':10240000,
            'removeCompleted':false,
            'onUploadSuccess' : function(file, data, response) {
                alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
                jQuery("#file-name").val(file.name);
            }
        });
    }); 
```

# jquery - jquery ajax调用返回JSON解析错误

> ID：10456240
> 
> 赞同：28
> 
> 时间：2012-05-04T21:16:01.467
> 
> 标签：jquery, ajax, json, wcf, parsing

我正在使用 jquery 调用一个 ajax wcf 方法，该方法将对象列表作为 JSON 字符串返回。在 fiddler2（在 TextView 中）检查 JSON 字符串时，它看起来像这样：

```
{"d":"[{\"ID\":\"6b2b8c62-31ce-4df2-982b-054ff5f6be72\",\"Name\":\"Carol\",\"Surname\":\"IrishWife\"},{\"ID\":\"d254740a-0a0f-4a1e-9e4f-0812227dd5af\",\"Name\":\"Willie\",\"Surname\":\"Le Roux\"},{\"ID\":\"660bf0dd-436a-4588-a9c0-19fd6fdcee23\",\"Name\":\"Emmas\",\"Surname\":\"Mum\"},{\"ID\":\"6b9403c5-b728-4e96-bcb1-203e7472eec3\",\"Name\":\"Owen\",\"Surname\":\"Lima\"},{\"ID\":\"d52c08fb-4418-4600-960f-243ff4443ee6\",\"Name\":\"Tim\",\"Surname\":\"Lee\"},{\"ID\":\"e2aacf5b-8855-44ce-9338-3d39f8ab3349\",\"Name\":\"Marcello\",\"Surname\":\"MT\"},{\"ID\":\"578be087-8385-46d6-89de-3db31d352cbc\",\"Name\":\"Carlyn\",\"Surname\":\"Homegroup\"},{\"ID\":\"4c805825-2bee-447a-8b75-41ead17db33e\",\"Name\":\"George\",\"Surname\":\"Homegroup\"},{\"ID\":\"ae48804f-5e78-42c8-9ba0-4214c98a5a89\",\"Name\":\"Isla\",\"Surname\":\"Le Roux\"},{\"ID\":\"f8be2f4f-fedb-4863-8a84-44fddea84ea9\",\"Name\":\"Peter\",\"Surname\":\"Anderson\"},{\"ID\":\"15e7644d-ec43-44ff-a959-47e00112da6b\",\"Name\":\"Kitty\",\"Surname\":\"Corbett\"},{\"ID\":\"8fd7fccc-335c-4d5c-93b5-4b00f96a9950\",\"Name\":\"Natalie\",\"Surname\":\"Archibald\"},{\"ID\":\"09b5aad2-2cf1-488a-962b-4d692b05ddea\",\"Name\":\"Miku\",\"Surname\":\"Heally\"},{\"ID\":\"affa369e-5af3-4537-a0f4-71422956da41\",\"Name\":\"Steven\",\"Surname\":\"Corbett\"},{\"ID\":\"65f57da3-4f88-4798-9590-83b4ccecfc44\",\"Name\":\"Tim\",\"Surname\":\"Archibald\"},{\"ID\":\"53bfb451-f66f-4b6e-b430-8d13c95b30d8\",\"Name\":\"Philip\",\"Surname\":\"MT\"},{\"ID\":\"c7f22b9b-4030-4f82-9f75-bbb726cabb73\",\"Name\":\"Vincent\",\"Surname\":\"Van Der Walt\"},{\"ID\":\"232577be-3165-4316-a20d-c2f2a09c5382\",\"Name\":\"Scott\",\"Surname\":\"Lynn\"},{\"ID\":\"913508a1-5dca-4504-8caf-c8e3dc386fc0\",\"Name\":\"Dan\",\"Surname\":\"MT\"},{\"ID\":\"36054a07-b14d-4c1c-b35f-e00875dde7e5\",\"Name\":\"Sarah\",\"Surname\":\"MT\"},{\"ID\":\"f14e7d98-e040-4ba9-928f-f2ff48116b0b\",\"Name\":\"Josh\",\"Surname\":\"IrishDude\"}]"} 
```

当我在提琴手的 JSON 视图中检查结果时，它显示以下 JSON：

```
d=[{"ID":"6b2b8c62-31ce-4df2-982b-054ff5f6be72","Name":"Carol","Surname":"IrishWife"},{"ID":"d254740a-0a0f-4a1e-9e4f-0812227dd5af","Name":"Willie","Surname":"Le Roux"},{"ID":"660bf0dd-436a-4588-a9c0-19fd6fdcee23","Name":"Emmas","Surname":"Mum"},{"ID":"6b9403c5-b728-4e96-bcb1-203e7472eec3","Name":"Owen","Surname":"Lima"},{"ID":"d52c08fb-4418-4600-960f-243ff4443ee6","Name":"Tim","Surname":"Lee"},{"ID":"e2aacf5b-8855-44ce-9338-3d39f8ab3349","Name":"Marcello","Surname":"MT"},{"ID":"578be087-8385-46d6-89de-3db31d352cbc","Name":"Carlyn","Surname":"Homegroup"},{"ID":"4c805825-2bee-447a-8b75-41ead17db33e","Name":"George","Surname":"Homegroup"},{"ID":"ae48804f-5e78-42c8-9ba0-4214c98a5a89","Name":"Isla","Surname":"Le Roux"},{"ID":"f8be2f4f-fedb-4863-8a84-44fddea84ea9","Name":"Peter","Surname":"Anderson"},{"ID":"15e7644d-ec43-44ff-a959-47e00112da6b","Name":"Kitty","Surname":"Corbett"},{"ID":"8fd7fccc-335c-4d5c-93b5-4b00f96a9950","Name":"Natalie","Surname":"Archibald"},{"ID":"09b5aad2-2cf1-488a-962b-4d692b05ddea","Name":"Miku","Surname":"Heally"},{"ID":"affa369e-5af3-4537-a0f4-71422956da41","Name":"Steven","Surname":"Corbett"},{"ID":"65f57da3-4f88-4798-9590-83b4ccecfc44","Name":"Tim","Surname":"Archibald"},{"ID":"53bfb451-f66f-4b6e-b430-8d13c95b30d8","Name":"Philip","Surname":"MT"},{"ID":"c7f22b9b-4030-4f82-9f75-bbb726cabb73","Name":"Vincent","Surname":"Van Der Walt"},{"ID":"232577be-3165-4316-a20d-c2f2a09c5382","Name":"Scott","Surname":"Lynn"},{"ID":"913508a1-5dca-4504-8caf-c8e3dc386fc0","Name":"Dan","Surname":"MT"},{"ID":"36054a07-b14d-4c1c-b35f-e00875dde7e5","Name":"Sarah","Surname":"MT"},{"ID":"f14e7d98-e040-4ba9-928f-f2ff48116b0b","Name":"Josh","Surname":"IrishDude"}] 
```

所以fiddler可以解析成功，但是在客户端，jquery ajax错误回调函数显示如下错误：

```
Error: No conversion from text to application/json 
```

wcf方法定义如下：

```
 [OperationContract]
    [WebGet(ResponseFormat=WebMessageFormat.Json)]
    public string GetPeople(Guid groupId)
    {
        using (SchedulerContext context = new SchedulerContext())
        {
            JavaScriptSerializer ser = new JavaScriptSerializer();

            var query = from p in context.People
                        where p.Group_ID == groupId
                        select new
                        {
                            p.ID,
                            p.Name,
                            p.Surname
                        };

            return ser.Serialize(query.ToArray());
        }   
    } 
```

最后，调用 jquery 是：

```
$.ajax(
        {
            type: "GET",
            dataType: "application/json",
            contentType: "json",
            data: { groupId: 'ae09a080-5d7c-4e92-9a87-591574b7c4b8' },
            url: "WebAPI.svc/GetPeople",
            error: function (jqXHR, textStatus, errorThrown) {
                alert("error");
            },
            success: function (msg) {
                alert(msg.d[0].Name);
            }
        }
); 
```

提前致谢！

**更新：** 感谢@user1370958，离解决方案更近了一步。

将错误回调函数更改为以下时，它成功返回结果...

```
error: function (jqXHR, textStatus, errorThrown) {
    var test = $.parseJSON(jqXHR.responseText);
    var test2 = $.parseJSON(test.d);
    alert(test2[0].Name);
}, 
```

不知道为什么，但我必须解析结果，然后解析其中的嵌套对象。我假设如果我返回的任何类型包含复杂对象，它也需要另一个解析......

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-16T05:57:41.517

此处，不是该属性`"application/json"`的有效值。`dataType`我在我的项目中将其更改为`"json"`，同样的问题得到了解决。

请在此处查看详细信息（评论 #7）：[http ://bugs.jquery.com/ticket/8216](http://bugs.jquery.com/ticket/8216)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T21:18:51.423

尝试在服务器端代码中添加 MIME 类型：

```
Response.ContentType = "application/json"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:38:13.317

使用[WCF 4.0](http://msdn.microsoft.com/en-us/library/ee476510.aspx)，您可以添加一个名为的属性，该属性`automaticFormatSelectionEnabled`允许服务查看`Accept`HTTP 请求中的标头以确定返回的格式。只要您返回的内容是可序列化的，WCF 就会为您处理正确的序列化。在您的 jQuery ajax 调用中，Accept 标头通过 include 添加`accepts: {json: "application/json"}`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:35:48.213

我假设您想将 的值返回`ser.Serialize(query.ToArray())`给客户端（一个数组）。但是您将它作为字符串返回，因此 WCF 会将 JSON 转义为字符串，您最终得到的不是数组，而是字符串。

由于您使用的是 WCF 本身不支持的匿名类型，因此您需要使用`JavaScriptSerializer`. 因此，为了防止 JSON 的双重编码（到字符串中），您应该将数据作为 a`Stream`来返回，这样 WCF 就不会接触您的数据（请参见下面的示例代码）。

还有一件事：我看到您的响应有一个`{"d":...}`包装器，这表明您在定义服务/端点时使用了// `<enableWebScript/>`。由于您没有使用 ASP.NET AJAX 库，因此不需要该包装，因此您可以使用“更简单” //来代替，并且您的响应不会被包装在该“d”对象中。`WebScriptEnablingBehavior``WebScriptServiceHostFactory``<webHttp/>``WebHttpBehavior``WebServiceHostFactory`

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
public System.IO.Stream GetPeople(Guid groupId)
{
    using (SchedulerContext context = new SchedulerContext())
    {
        JavaScriptSerializer ser = new JavaScriptSerializer();

        var query = from p in context.People
                    where p.Group_ID == groupId
                    select new
                    {
                        p.ID,
                        p.Name,
                        p.Surname
                    };

        string json = ser.Serialize(query.ToArray());
        using (MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json)))
        {
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/json; charset=utf-8";
            return ms;
        }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T00:36:20.950

我找到了一种解决方法：

第一个问题是实体模型上的循环引用异常。为了克服这个问题，我使用以下代码从上下文中分离我的实体，然后将它们序列化为字符串。然后我使用下面的代码在客户端上对它们进行序列化。

**服务**

```
 [WebGet(ResponseFormat = WebMessageFormat.Json)]
    [OperationContract]
    public string[] GetPeople(Guid groupId)
    {
        using (SchedulerContext context = new SchedulerContext())
        {

            var people = (from p in context.People
                          where p.Group_ID == groupId
                          select p).ToList();

            JavaScriptSerializer ser = new JavaScriptSerializer();
            string[] result = new string[people.Count];
            for (int i = 0; i<people.Count; i++)
            {
                context.Detach(people[i]);
                string json = ser.Serialize(people[i]);
                result[i] = json;
            }
            return result;
        }   
    } 
```

**客户**

```
 $.ajax(
                {
                    type: "GET",
                    //dataType: "application/json",
                    //dataType: "text/plain",
                    contentType: "json",
                    data: { groupId: 'ae09a080-5d7c-4e92-9a87-591574b7c4b8' },
                    //data: { groupId: 'test' },
                    //data: { groupId: '739526F1-7C58-4E3B-97D8-4870948BFE32' },
                    url: "WebAPI.svc/GetPeople",
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert(jqXHR.resultText);
                    },
                    success: function (people) {
                        //the returned param "people" is of type string[], so each string needs parsed 
                        $(people).each(function (index, value) {
                            var person = $.parseJSON(value);
                            //now I can use the Person object
                        });

                    }
                }

        ); 
```

# artificial-intelligence - 具有整数甚至浮点域的逻辑编程

> ID：10456241
> 
> 赞同：1
> 
> 时间：2012-05-04T21:16:05.887
> 
> 标签：artificial-intelligence, logic, ontology, business-rules, reasoning

我正在阅读很多关于逻辑编程的内容——ASP（答案集编程）就是一个例子。它们（逻辑程序）通常采用以下形式：

【程序1】规则1：a <- a1, a2, ..., not am, am+1; 规则2：...

这组规则称为逻辑程序，sc 模型是这种计算的结果——将真/假值分配给 a1、a2、...某种程序（规则）可以与（语义网）本体集成以构建包含规则和本体（某种约束/行为和数据）的知识库；有很多关于 ASP 本身的研究——比如并行扩展、概率逻辑扩展、时间逻辑等等。

**我的问题是 - 是否有某种研究或者一些概念验证项目，其中这种分析从布尔变量扩展到具有整数甚至浮点域的变量？**目前我还没有发现任何可以解决以下程序的研究：

【程序2】Rule1 a1:=5 <- a2=5, a3=7, a4<8, ... Rule2 ... ... [最后给a1、a2等赋值，就是解本节目]

目前 - 据我了解 - 如果有人想对 Program-2 执行某种分析（例如，找出这个程序在某种意义上是否正确 - 例如它是否满足某些属性，如果它终止，哪些域被允许不违反某种性质等等），那么他或她必须根据 Program-1 重述 Program-2，然后以似乎完全未开发的方式进行 - 据我所知（我不相信就是这样）未经探索，简单地说-我不知道某些来源或趋势）。约束逻辑编程允许在 Program-1 中使用具有不等式的语句，但它也过于关注布尔变量。实际上 - Programm-2 是一种在业务规则系统中相当常见的类型，这就是我对逻辑编程感兴趣的原因。

所以-我的问题有一些历史-我的实践经验使我欣赏业务规则系统/引擎，尤其是-JBoss项目Drools，我打算对sc生产规则系统的基础理论进行某种研究（我曾经和我我打算就他们做我的论文——如果我能发现这里可以做些什么），但我可以说没什么可做的——在阅读了文献之后（例如[http://www.computer.org/csdl/ trans/tk/2010/11/index.html](http://www.computer.org/csdl/trans/tk/2010/11/index.html)是优秀的 IEEE TKDE 特刊，有一些关于它们的文章，其中一篇是 Drools 领导者撰写的）可以看到几十年前的 Rete 算法有某种技术改进，但没有 Drools 或其他生产规则系统的理论这可能有助于对它们进行一些正式的分析。那么 - 另一个问题是 -**是否存在生产规则系统理论（对于 Drools、Jess、CLIPS 等规则引擎），是否有实际需要这种理论以及使用 Drools 和其他系统的实际问题是什么？由生产规则系统理论来解决**。

ps 我知道 - 所有这些问题都应该提交给论文顾问，但我目前的立场是（据我所知）我所在的部门没有适合回答这些问题的人，所以 - 我是阅读期刊和会议论文集（有很好的计算机科学系列讲座系列 - RuleML 和 RR）...

感谢您提前提供任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:26:03.057

从某种意义上说，布尔系统已经按照您的建议进行了操作。

为了确保 A=5 是您解决方案的一部分，请考虑规则（我忘记了我的 ASP 语法，所以请耐心等待）

```
integer 1..100 //integers 1 to 100 exist
1{A(X) : integer(X)}1 //there is one A(X) that is true, where X is an integer
A(5) //A(5) is true 
```

我认为您的条款将要求：

```
integer 1..100 //integers 1 to 100 exist
1{A(X) : integer(X)}1  //A1 can take only one value and must take a value
1{B(X) : integer(X)}1  //A2 ``
1{C(X) : integer(X)}1  //A3 ``
1{D(X) : integer(X)}1  //A4 ``
A(5) :- B(5), C(7), D(8) //A2=5, A3=7, A4=8 ==> A1=5 
```

我希望我已经正确理解了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:12:10.540

[Clojure core.logic](https://github.com/clojure/core.logic)的最新版本（自 0.8 起）正好包含这种支持，基于[cKanren](http://www.schemeworkshop.org/2011/papers/Alvis2011.pdf)

在此处查看示例：[https ://gist.github.com/4229449](https://gist.github.com/4229449)

# actionscript-3 - 游戏会话声音播放/录音

> ID：10456242
> 
> 赞同：1
> 
> 时间：2012-05-04T21:16:18.097
> 
> 标签：actionscript-3, audio, bytearray, flash-cs5, audio-recording

所以我正在制作一个简单的Flash游戏。基本上，我有一个转盘，可以播放 30 秒，其中包含几首样本音乐，这些样本音乐在多层声音中叠加在一起，形成一首最终歌曲。

现在我希望能够在游戏结束时录制和播放声音。

我创建了一个 SoundFx 类，它接收 mp3 音频并将其转换为 byteArrays，希望将音频混合到同一个声道中。

现在我已经达到了一定的僵局，因为我无法正确混合字节数组。我开始认为在将通道添加到混合中时不可能对字节数组进行编码。

我很想被引导到正确的方向。我不确定从这里开始是否是最好的方法，即使只是播放也会很好。创建一个按钮日志可能会修复播放并在第二次运行中混合音频以直接进入文件。但这似乎是实现这一目标的漫长道路。

非常感谢并为我蹩脚的英语提前道歉

大卫·R。

关于此事的一些代码：

```
 private var srcSound:Sound; 
    private var sound1:Sound;
    private var sound2:Sound;
    private var soundChannel:SoundChannel;  
    private var bytes:ByteArray;
    private var incbytes:ByteArray;
    private var mixedBytes:ByteArray;

    public var pitchShiftFactor:Number;     
    public var position:Number;
    public var AddSound:Boolean = false;
    public var incremental:Number;
    public var left1:Number;
    public var left2:Number;
    public var right1:Number;
    public var right2:Number;
    public var mixedBytes1:Number;
    public var mixedBytes2:Number;

    public function SoundFx() {         

    }

    public function playFx(srcSound:Sound):void{

    this.srcSound = srcSound;
        position = 0;

    var morphedSound:Sound = new Sound();
        morphedSound.addEventListener(SampleDataEvent.SAMPLE_DATA, sampleDataHandler);

        soundChannel = morphedSound.play();

    }

    public function addSound(sound1:Sound , sound2:Sound):void{

    this.sound1 = sound1;
    this.sound2 = sound2;

        sound1.addEventListener(SampleDataEvent.SAMPLE_DATA, addSampleData);
        position = 0;

        soundChannel = sound1.play();
        soundChannel = sound2.play();

        AddSound = true;

        }

    private function addSampleData(event:SampleDataEvent):void{

        position = 0;

    var incbytes:ByteArray = new ByteArray();
        position += sound1.extract(incbytes, 4096, position);

    var bytes:ByteArray = new ByteArray();
        position += sound2.extract(bytes, 4096, position);

        event.data.writeBytes(mixBytes(bytes, incbytes));

    }

    private function sampleDataHandler(event:SampleDataEvent):void
    {           

    var bytes:ByteArray = new ByteArray();
        position += srcSound.extract(bytes, 4096, position);

        event.data.writeBytes(editBytes(bytes));

    }

    private function mixBytes(bytes1:ByteArray , bytes2:ByteArray ):ByteArray{

        bytes.position = 0;
        incbytes.position = 0;

        var returnBytes:ByteArray = new ByteArray();

        while(bytes1.bytesAvailable > 0)
        {

        left1 = bytes1.readFloat();
        left2 = bytes2.readFloat();

        right1 =  bytes1.readFloat(); 
        right2 =  bytes2.readFloat(); 

        mixedBytes1 = left1 + left2;
        mixedBytes2 = right1 + right1;

        mixedBytes.writeFloat(mixedBytes1);
        mixedBytes.writeFloat(mixedBytes2);

        }

        return mixedBytes;

        }

    private function editBytes(bytes:ByteArray):ByteArray{

        //var skipCount:Number = 0;
        var returnBytes:ByteArray = new ByteArray();
        bytes.position = 0;

        while(bytes.bytesAvailable > 0)
        {
            //skipCount++;

                returnBytes.writeFloat(bytes.readFloat());
                returnBytes.writeFloat(bytes.readFloat());

            }

        return returnBytes;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:07:47.097

我想我明白你的想法，希望我做到了。

您应该尝试将所有 SoundChannel 类（正在添加的声音层）传递给 SoundMixer 类（在 adobe 站点中有大量​​关于此的信息），例如漏斗，然后将 SAMPLEDATA 事件侦听器添加到该混音器，并捕获该混音器的字节数组，就像获取最终混音的字节数组......然后将这些字节编码为`wav or mp3`. 对不起，我不能为你写下那个代码，我对代码还不是很好，但我擅长混合声音。

这是 adobe 网站本身的示例表单：

```
 function loaded(event:Event):void
{
    outputSnd.addEventListener(SampleDataEvent.SAMPLE_DATA, processSound);
    outputSnd.play();
} 
```

有用的链接： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html)

混音器类链接： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:17:40.317

试验我在服务器端使用的 Stratus (cirrus) 网络收音机[`SoundMixer.computeSpectrum()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html#computeSpectrum%28%29)，并将该数据传递给客户端`NetStream.send()`用于绘图和播放。
它可以工作，但是在一台计算机上使用客户端和服务器时非常需要内存（并且加载了几首歌曲并转换为原始音频数据:)

所以，试试`computeSpectrum()`吧，它似乎非常适合创建“音频日志”

# c# - c# xml特殊字符编码

> ID：10456244
> 
> 赞同：0
> 
> 时间：2012-05-04T21:16:30.780
> 
> 标签：c#, asp.net, character-encoding

我想加载 xml 文档，但是有特殊符号，例如：`ąčęėįšųū`并且我收到错误`Invalid character in the given encoding.`问题是如何在加载 xml 之前对这些字符进行编码？

```
// load xml result from Google weather
XDocument xd = XDocument.Load("http://www.google.com/ig/api?weather=vilnius&hl=ru"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:26:12.447

我会试试这个

```
WebClient cln = new WebClient();
var str = cln.DownloadString("http://www.google.com/ig/api?weather=vilnius&hl=ru");
XDocument xDoc = XDocument.Load(new StringReader(str)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:20:04.897

```
using (StreamReader sr = new StreamReader("http://www.google.com/ig/api?weather=vilnius&hl=ru", true))
{
    XDocument xdoc = XDocument.Load(sr);
} 
```

问题在于编码。如果您使用 StreamReader，它应该检测响应的编码，然后允许您调用 XDocument.Load。

# c++ - 使用带有汇编的 C++ 在运行时分配和创建新函数

> ID：10456245
> 
> 赞同：7
> 
> 时间：2012-05-04T21:16:30.983
> 
> 标签：c++, gcc, inline-assembly, att, dynamic-function

我一直在研究一个（C++）项目，它*需要*完全动态分配的函数，这意味着 malloc/new 和 mprotect 然后手动修改缓冲区以汇编代码。因此，我确切地想知道，我的这个“缓冲区”需要什么，才能*复制*任何其他 _cdecl 函数。例如：

```
int ImAcDeclFunc(int a, int b)
{
     return a + b;
} 
```

如果我想从字面上创建这个函数的副本，但完全是动态的，那需要什么（记住它是带有*内联*汇编的 C++）？对于初学者，我想我必须做这样的事情（或类似的解决方案）：

```
// My main....
byte * ImAcDeclFunc = new byte[memory];
mprotect(Align(ImAcDeclFunc), pageSize, PROT_EXEC | PROT_READ | PROT_WRITE); 
```

在此之后，我将不得不找出`ImAcDeclFunc(int a, int b);`. 现在我在汇编方面仍然很糟糕，那么这个函数在 AT&T 语法中的表现如何呢？这是我的大胆尝试：

```
push %ebp
movl %%ebp, %%esp
movl 8(%ebp), %%eax
movl 12(%ebp), %%edx
addl edx, eax
pop ebp
ret 
```

现在如果这个代码是正确的（我非常怀疑，请纠正我）我只需要找到这个代码的十六进制值（例如，'jmp' 是 0xE9 和 'inc' 是 0xFE），并直接使用这些值C++？如果我继续我以前的 C++ 代码：

```
*ImAcDeclFunc = 'hex value for push'; // This is 'push' from the first line
*(uint)(ImAcDeclFunc + 1) = 'address to push'; // This is %ebp from the first line
*(ImAcDeclFunc + 5) = 'hex value for movl' // This is movl from the second line
// and so on... 
```

在我为整个代码/缓冲区完成此操作后，对于完全动态的 _cdecl 函数是否足够（即我可以将它转换为函数指针并执行`int result = ((int (*)(int, int))ImAcDeclFunc)(firstArg, secondArg)`？）。而且我对使用 boost::function 或类似的东西不感兴趣，我*需要*该函数是完全动态的，因此我感兴趣:)

[注意：这个问题是我上一个](https://stackoverflow.com/questions/10451635/c-and-fully-dynamic-functions/10451918)问题的延续，但有更多细节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T21:57:20.853

如果你拿这个`lala.c`：

```
int ImAcDeclFunc(int a, int b)
{
    return a + b;
}

int main(void)
{
    return 0;
} 
```

你可以用`gcc -Wall lala.c -o lala`. 然后，您可以使用`objdump -Dslx lala >> lala.txt`. 你会发现`ImAcDeclFunc`被组装成：

```
00000000004004c4 <ImAcDeclFunc>:
ImAcDeclFunc():
  4004c4:   55                      push   %rbp
  4004c5:   48 89 e5                mov    %rsp,%rbp
  4004c8:   89 7d fc                mov    %edi,-0x4(%rbp)
  4004cb:   89 75 f8                mov    %esi,-0x8(%rbp)
  4004ce:   8b 45 f8                mov    -0x8(%rbp),%eax
  4004d1:   8b 55 fc                mov    -0x4(%rbp),%edx
  4004d4:   8d 04 02                lea    (%rdx,%rax,1),%eax
  4004d7:   c9                      leaveq 
  4004d8:   c3                      retq 
```

其实这个功能比较容易复制到别处。在这种情况下，您完全正确地说可以复制字节并且它会起作用。

当您开始使用将相对偏移量作为操作码一部分的指令时，就会出现问题。例如，相对跳跃或相对呼叫。在这些情况下，您需要正确地**重新定位**指令，除非您碰巧能够将其复制到与原始地址相同的地址。

简而言之，要重新定位，您需要找到它最初的基础，并计算与您将要建立的基础的差异，并根据该偏移量重新定位每个相关指令。这本身是可行的。您真正的困难是处理对其他函数的调用，尤其是对库的函数调用。在这种情况下，您需要保证库已链接，然后以您所针对的可执行格式定义的方式调用它。这是非常重要的。如果您仍然感兴趣，我可以指出您应该阅读的方向。

* * *

在上面的简单情况下，您可以这样做：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <malloc.h>
#include <sys/mman.h>
#include <unistd.h>

int main(void)
{
    char func[] = {0x55, 0x48, 0x89, 0xe5, 0x89, 0x7d, 0xfc,
    0x89, 0x75, 0xf8, 0x8b, 0x45, 0xf8,
    0x8b, 0x55, 0xfc, 0x8d, 0x04, 0x02,
    0xc9, 0xc3};

    int (* func_copy)(int,int) = mmap(NULL, sizeof(func),
        PROT_WRITE | PROT_READ | PROT_EXEC,
        MAP_PRIVATE | MAP_ANONYMOUS, 0, 0);

    memcpy(func_copy, func, sizeof(func));
    printf("1 + 2 = %d\n", func_copy(1,2));

    munmap(func_copy, sizeof(func));
    return EXIT_SUCCESS;
} 
```

这在 x86-64 上运行良好。它打印：

```
1 + 2 = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:03:29.847

我认为将一些脚本语言嵌入到您的项目中而不是编写自修改程序会更好。这将花费更少的时间，您将获得更大的灵活性。

> 如果我想从字面上创建这个函数的副本，但完全是动态的，那需要什么（记住它是带有内联汇编的 C++）？

它需要带有反汇编程序的人。从技术上讲，函数应该从一个地址开始并在 return 语句结束。但是，尚不清楚编译器在优化阶段对该函数做了什么。如果函数入口点位于某种奇怪的位置（例如在函数末尾，在 return 语句之后），或者如果函数被拆分为与其他函数共享的多个部分，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:45:35.790

您可能想查看 GNU 闪电：[http](http://www.gnu.org/software/lightning/) ://www.gnu.org/software/lightning/ 。它可能会帮助您完成您正在尝试做的事情。

# html - CSS边距问题

> ID：10456249
> 
> 赞同：4
> 
> 时间：2012-05-04T21:16:49.140
> 
> 标签：html, css

对不起这个简单的问题..

有谁知道为什么我在此页面按钮部分的图像没有正确对齐。最右边的图像似乎被推下。有没有人知道是什么导致了这个问题？

[链接到问题](http://www.iamnatesmithen.com/ExpressionEngine2/index.php/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:21:13.027

你有一堆`&nbsp`不在标签中的 's。看起来这似乎是通过 Firebug 删除它们后的问题。删除它们，它应该排成一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:21:50.007

删除后有很多空白：![在此处输入图像描述](../Images/bba67a32b37939b1ee4689f3d308517c.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:23:03.943

当我检查页面时，我看到文档中插入了额外的 html 元素

```
</li><!-- ITEM ENDS HERE -->
 &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp;<li class="item2"> 
```

额外的“nbsp”正在取消对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T23:11:42.567

您需要删除`</li>`and之间的任何空格或换行符`<li>`，因此在 CMS 的 HTML 模式下，它应该按字面意思阅读`</li><li>`，而不是类似：

```
</li>

        <li> 
```

如果这在某种程度上不可能，请联系您的 CMS 的开发人员/论坛并寻求帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T21:25:17.117

这不是有效的 html。你需要先解决这个问题。通过验证器运行您的页面并更正“在此上下文中不允许元素 div 作为元素 ul 的子元素”错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T21:29:34.890

每个上面都有很多空格`<li>`。删除它们，它应该可以正常工作。使用 Chrome 开发者工具或 Firebug 来检查它们。

# c++ - 在 xvi32 中扫描 .o 文件

> ID：10456258
> 
> 赞同：0
> 
> 时间：2012-05-04T21:18:08.367
> 
> 标签：c++, hex, bit

有人可以解释[xvi32 中 .o 文件的这个十六进制视图](http://s3762.chomikuj.pl/ChomikImage.aspx?k=1367397&t=634717640201407836&id=822200870&vid=1635116473&loc=PL)如何 对应于 .cpp 中的数据吗？即像'/18'/65'/139和“.rdata”这样的数字是什么意思？例如，当我打开相应的 exe 时，我看到文件非常相似，但略有不同，至少在这个开头。但特别是：为什么在 exe 中这个“.rdata”变成了“.data”？这是创建此 .o 的 .cpp ：

```
 // exercise_for.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#include <vector>
#include <list>
#include <map>

#include <iterator>
#include <algorithm>
#include <fstream>

#include <limits>

struct myStruct{
    int a;
    double b;
    virtual void func()=0;
    void f(){};
};
struct sB{virtual void g()=0;};
struct myStruct2:sB{
    void f(){};
    void g(){std::cout<<"\nmyStruct2";}
};
struct myStruct3:sB{
    void f(int const &in){a=in;};
    void g(){std::cout<<"\nmyStruct3";};
    myStruct3():a(0){};
    int show(){return a;};
private:
    int a;
};

class myC : public myStruct{
    int i;
    void func(){};
};

std::map<std::string,int> histogram;
void record(const std::string& in ){
    histogram[in]++;
}
void print(const std::pair<const std::string,int>& in ){
    std::cout<<(in.first)<<" "<<in.second<<"\n";
}

int _tmain(int argc, _TCHAR* argv[])
{
    std::cout<<"largest float:"<<std::numeric_limits<float>::max()<<
        "\nchar is signed:"<<std::numeric_limits<char>::is_signed<<
        "\nlargest int:"<<std::numeric_limits<int>::max()<<
        "\nlargest double:"<<std::numeric_limits<double>::max()<<
        "\nlargest short int:"<<std::numeric_limits<short int>::max()<<
        "\nlargest long int:"<<std::numeric_limits<long int>::max()<<"\n\n";

    for(int i=0;i<10;++i){
        std::cout<<++i;
    }

    myC mC;
    myStruct2 m;
    myStruct3 n;
    std::cout<<"n: "<<n.show();
    m.f();
    n.f(4);
    std::cout<<"\nn: "<<n.show();

    std::cout<<"\nmem_fun";
    std::list<sB*> myList;
    myList.push_back(&m);
    myList.push_back(&n);
    std::for_each(myList.begin(),myList.end(),std::mem_fun(&sB::g));
    std::list<sB*>::iterator it=myList.begin(); 

    std::istream_iterator<std::string> ii(std::cin);
    std::istream_iterator<std::string> eos;
    std::for_each(ii,eos,record);
    int i=0xffff;
    std::string z;
    std::cout<<"\n\nprinting: sizeof(int)="<<sizeof(int)<<"  i:"<<i<<"\n";
    int* i_ptr;
    std::cout<<"sizeof(int*)="<<sizeof(i_ptr)<<"\n";
    std::cout<<"sizeof(double)="<<sizeof(double)<<"\n";
    std::cout<<"sizeof(double*)="<<sizeof(double*)<<"\n";
    std::cout<<"sizeof(string)="<<sizeof(z)<<"\n";
    float fl=1000+1.6+1.6+1.6+1.6;
    std::cout<<"\nf:"<<fl;
    std::for_each(histogram.begin(),histogram.end(),print);

    std::vector<std::string> sL;
    std::string s("spadaj");
    sL.push_back(s);
    std::copy(sL.begin(),sL.end(),std::ostream_iterator<std::string>(std::cout, " "));
    std::ofstream f("myFile.txt"); 
    std::copy(sL.begin(),sL.end(),std::ostream_iterator<std::string>(f, " "));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:31:31.100

这有点像看着一个汉堡包，然后问“这来自牛的哪个部位？” 一个给定的汉堡可能包含来自三到四头不同奶牛的六个不同部位的肉。

要获得任何地方的大部分内容，您可能希望从比目标文件（或可执行文件）的普通十六进制转储更智能的东西开始。您可能希望使用反汇编程序，至少可以让您或多或少地直接查看作为汇编语言源代码的输出。没有这些，您需要对目标文件格式有一些相当深入的了解，才能知道要真正查看哪些部分，哪些部分是重定位记录之类的东西，或者甚至可能只是部分之间的填充（即完全没有意义）。显然可以这样做，但除非你别无选择，否则这很少是一种令人愉悦的消磨时间的方式。

它不是最好的反汇编程序（无论如何），但 Microsoft Windows SDK 包含一个名为的工具，可以使用标志`dumpbin`反汇编可执行文件中的代码。`/disasm`如果您环顾四周，还可以使用各种其他反汇编程序。如果你愿意花一些钱，我会推荐[IDA Pro](http://www.hex-rays.com/)作为我用过的最好的。它绝对*不是*免费的，甚至不是特别便宜，但如果你要做这么多，每一分钱都值得。

# java - Android SDK 中的 dx.jar 是什么？

> ID：10456265
> 
> 赞同：8
> 
> 时间：2012-05-04T21:18:48.327
> 
> 标签：java, android, intellij-idea

我在使用 Android SDK 管理器安装的一些 Android SDK 版本中看到的 dx.jar 文件的用途是什么？该文件出现在 tools/lib/dx.jar 下我没有在 android-8 及更高版本中看到该文件。但是，当我尝试使用 android-8 及更高版本构建项目时，Intellij IDEA 会出错，说 dx.jar 不存在。是什么赋予了？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-22T05:24:28.077

目前，`dx.jar`已搬迁至

```
adt-bundle-*\sdk\build-tools\17.0.0\lib 
```

[你可以在这里](https://github.com/android/platform_dalvik/tree/master/dx)找到 dx 的源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T01:30:29.793

CommonsWare 评论的补充。

dx.jar 原来位于`android-sdk/platforms/android-X/tools/lib/`之前（尤其是在 android-3 和 android-4 中），并移至`android-sdk/platform-tools/lib/`较晚。不幸的是，这从未在任何官方来源中记录，可能是因为它是谷歌不希望消费者开发者被打扰的内部工具的一部分。查看[此博客](http://grokbase.com/p/gg/android-developers/11ac4v8zdm/maven-dx-cant-find-dx-jar)以查看问题。

只要您遵循[Android 安装指南](http://developer.android.com/sdk/installing.html#sdkContents)并将 android-sdk/tools/ 和 android-sdk/platform-tools/ 添加到您的 PATH 环境变量中，您应该可以访问 dx.jar，除非您使用的是非常旧的 Android SDK 版本（我不信）。

最后，作为快速参考，这是 SDK 通常如何使用 dx.jar 将您的 java 字节码与外部 jar 库 dex 的命令：

> [信息] C:\Program Files\Java\jdk1.6.0_21\jre\bin\java [-Xmx1024M, -jar, C:\Program Files\Android\android-sdk\platform-tools\lib\dx.jar, --dex, --output=C:\workspace\myproject\target\classes.dex, C:\workspace\myproject\target\classes, C:\workspace\myprojec\libs\common-lib.jar, ... ...]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:16:57.950

出于某种原因，我确实在各种 android sdk 版本子目录中看到了 dx 和 dx.jar 的多个版本（不同大小的文件）。我一直在通过 Eclipse 管理 SDK，几个月前在这方面发生了变化（现在有了一个单独的 SDK 管理器窗口）——所以在这个过渡过程中，事情可能以某种方式搞砸了......

# javascript - 我的网站代码有什么问题？

> ID：10456269
> 
> 赞同：-1
> 
> 时间：2012-05-04T21:19:10.437
> 
> 标签：javascript, jquery

我可能有点筋疲力尽，但是我将代码放在我的网站上的位置有问题吗？

住在我的网站上，根本不工作 [http://japaneselanguagefriend.com/apptest.html](http://japaneselanguagefriend.com/apptest.html)

在这里，它在 JSfiddle 上工作得很好。 [http://jsfiddle.net/adeneo/PT523/3/](http://jsfiddle.net/adeneo/PT523/3/)

感谢 Adeneo 帮助编写此代码！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T21:21:19.093

您没有在测试页面中包含 jQuery。控制台说

> 未捕获的 ReferenceError：$ 未定义

而且您没有在代码中包含来自 CDN 或本地的 jquery.js。

包括

```
http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

在您的页面中，或在本地托管您自己的副本。建议使用 CDN，因为客户端上可能已经有缓存副本，这会加快页面加载时间。

**在测试和调试 JavaScript 时，始终**打开浏览器的错误控制台。打开它，您将捕获并修复大多数（如果不是全部）语法或技术错误。

# android - 如何将我的自定义视图添加到 XML 布局？

> ID：10456273
> 
> 赞同：0
> 
> 时间：2012-05-04T21:19:47.230
> 
> 标签：android, xml, android-layout, custom-controls

我写了以下视图：

```
public class EllipseView extends View {

private final Paint paint = new Paint();

public EllipseView(Context context) {
    super(context);

    paint.setColor(Color.RED);

}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawOval(new RectF(0, 0, getWidth(), getHeight()), paint);
}
} 
```

如何将其添加到 XML 中的布局？以下不起作用（调试器无法连接）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<View class="com.incubation.EllipseView"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_marginLeft="200dp"
    android:layout_marginTop="200dp"
    />

</RelativeLayout> 
```

**添加在**

与 Eclipse 和 Device 通信也存在问题，需要重新启动才能修复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:25:01.697

你有没有尝试过：

```
<com.incubation.EllipseView
    android...
    /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:37:55.313

尝试

```
<com.incubation.EllipseView
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_marginLeft="200dp"
    android:layout_marginTop="200dp"
/> 
```

# python - Python setuptools：如何包含用于分发的配置文件 /ETC

> ID：10456279
> 
> 赞同：43
> 
> 时间：2012-05-04T21:20:39.510
> 
> 标签：python, setuptools

我怎么能这样写`setup.py`：

1.  二进制 egg 发行版 ( `bdist_egg`) 包括一个示例配置文件和
2.  安装后将其放入`{prefix}/etc`目录中吗？

示例项目源目录如下所示：

```
bin/
   myapp
etc/
   myapp.cfg
myapp/
    __init__.py
    [...]
setup.py 
```

setup.py 看起来像这样：

```
from distutils.command.install_data import install_data

packages = ['myapp', ]
scripts = ['bin/myapp',]
cmdclasses = {'install_data': install_data}
data_files = [('etc', ['etc/myapp.cfg'])]

setup_args = {
    'name': 'MyApp',
    'version': '0.1',
    'packages': packages,
    'cmdclass': cmdclasses,
    'data_files': data_files,
    'scripts': scripts,
#    'include_package_data': True,
    'test_suite': 'nose.collector'
}

try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

setup(**setup_args) 
```

setuptools 安装在构建环境和安装环境中。

`'include_package_data'`注释掉与否都无济于事。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T15:33:28.270

我正在对这个问题进行一些研究，我认为答案在 setuptools 文档中：http: [//peak.telecommunity.com/DevCenter/setuptools#non-package-data-files](http://peak.telecommunity.com/DevCenter/setuptools#non-package-data-files)

接下来，我引用我认为有答案的摘录：

> 非包数据文件
> 
> distutils 通常将通用“数据文件”安装到特定于平台的位置（例如 /usr/share）。此功能旨在用于文档、**示例配置文件**等。但是，setuptools 不会将这些数据文件安装在单独的位置。它们与 Python 模块和包一起捆绑在 egg 文件或目录中。也可以使用资源管理 API [...] 访问数据文件。
> 
> 顺便提一下，数据文件的这种封装意味着**您实际上不能将数据文件安装到用户机器上的任意位置**；这是一个功能，而不是一个错误。您始终可以在您的发行版中包含一个脚本，由他们自行决定将您的文档或数据文件提取并复制到用户指定的位置。如果您将相关的数据文件放在一个目录中，您可以使用带有目录名的 resource_filename() 来获取一个文件系统目录，然后可以使用 shutil 模块复制该目录。[...]

# java - draw9patch 在模拟器中显示边框

> ID：10456280
> 
> 赞同：1
> 
> 时间：2012-05-04T21:20:44.603
> 
> 标签：java, android, chat

![在此处输入图像描述](../Images/2f4bb30867697b7ed0950117b392fd5b.png)

谁能告诉我为什么模拟器中出现黑色边框，以及如何删除它们？

![在此处输入图像描述](../Images/aedfbe75678b0532296c82acaa5a2069.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:37:15.113

沿上边缘和左边缘添加黑线，如果您在任何一侧缺少黑色，则可能是设备不接受它作为有效的九补丁。

这可能与在黑线中有“间隙”的九个补丁似乎在编辑器中工作，但在设备上不起作用。

编辑：正如@ByteMe 在评论中所说，确保`.9.png`文件名末尾有 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:40:23.677

当我遇到这个问题时，是因为我忘记重命名图像！如果您使用 Google 提供的工具制作 draw9，这应该不是问题……但值得仔细检查！

图像应命名为*** .9.png

# objective-c - NSMutableArray 类别的方法应该如何从自身中删除几个项目？

> ID：10456282
> 
> 赞同：1
> 
> 时间：2012-05-04T21:20:51.263
> 
> 标签：objective-c, ios

我有一个 NSMutableArray 类别，它有一个删除方法：

```
@interface NSMutableArray(MyCategory)
- (void) deleteItemsMatchingCriteria: (SomeCriteria) theCriteria;
@end 
```

这应该如何实施？

要遍历数组，我通常使用 enumerateObjectsUsingBlock: 但在迭代过程中当然不能从数组中删除一项。

一般而言，是否有一种规范的方法可以对数组执行此操作，如果执行删除的方法是数组的一个类别，是否会有所不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:29:16.710

显然，在下面的代码中，我检查了 Criteria，您将有更多的逻辑来确定是否应该删除该对象。

```
 -(void)deleteItemsMatchingCriteria:(BOOL)theCriteria{
    NSMutableIndexSet *remove = [[NSMutableIndexSet alloc] init];

    [self enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        if(theCriteria){
            [remove addIndex:idx];
        }
    }];

    [self removeObjectsAtIndexes:remove];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T21:33:09.853

最简单的方法是使用`indexesOfObjectsPassingTest:`方法：

```
[self removeObjectsAtIndexes:[self indexesOfObjectsPassingTest:
    ^BOOL (id element, NSUInteger i, BOOL *stop) {
        return /* YES if the object needs to be removed */;
    }]
]; 
```

# javascript - 通过 POST 调用 HTMLs Javascript 函数

> ID：10456283
> 
> 赞同：0
> 
> 时间：2012-05-04T21:20:51.357
> 
> 标签：javascript, html, linux, function, post

由于我想将我的专有路由器与我的 linux 服务器同步以保证服务的持续正常运行时间，我需要重新启动路由器或以某种方式断开连接并重新连接。隐藏在框架中的javascript有一个断开和重新连接路由器的功能。我如何从 linux 服务器调用这个 javascript 函数？是否可以以某种方式 POST 调用该函数？任何解决方法？我用谷歌搜索了一下，但找不到任何有价值的东西。也许我尝试了错误的关键字？！请指出我正确的方向谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:04:10.860

您的路由器可能是某种 linux 机器，您无法仅使用 javascript 重新启动它。javascript 很可能会在后端调用其他一些 CGI 脚本来进行`system('/usr/sbin/reboot -r now')`调用。因此，您只需要使用正确的参数和正确的凭据调用该后端脚本。祝你好运

# mongodb - MongoDB 排序数组

> ID：10456285
> 
> 赞同：2
> 
> 时间：2012-05-04T21:21:00.503
> 
> 标签：mongodb, mongodb-php, mongodb-query

是否可以按评论的日期对我的 MongoDB 评论数组进行排序？我是否必须在我的服务器端脚本中执行此操作，而不是使用查询运算符？如果是这样，我会怎么做？

```
{
  "review": [
    {
      "date": "2012-05-04 21:06:58",
      "review": "The Review",
      "name": "The Persons Name",
    },
    {
      "date": "2012-09-04 21:06:58",
      "review": "The Review",
      "name": "The Persons Name",
    },
    {
      "date": "2012-02-04 21:06:58",
      "review": "The Review",
      "name": "The Persons Name",
    }
  ],
  "category": "Category 1",
  "country": "USA",
  "date": "2012-05-04 21:06:58"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:43:31.193

由于您将[php](/questions/tagged/php "显示标记为“php”的问题")放入标签中，因此我假设您正在使用 PHP。您可以为此创建自己的排序函数，并由 PHP[`usort()`](http://php.net/manual/en/function.usort.php)函数调用它。

```
function sort_date($a, $b)
{
    return (strtotime($a['date']) - strtotime($b['date']));
}

usort($reviews_array, 'sort_date'); 
```

上面的代码将按日期升序对评论进行排序。

# iphone - viewWithTag 在搜索中不返回对象

> ID：10456286
> 
> 赞同：1
> 
> 时间：2012-05-04T21:21:08.720
> 
> 标签：iphone, xcode, ios5

我有`tableview`一个自定义单元格和一个搜索栏。我已经在单元格上标记了标签，因为我`imageView`在那个单元格上也有一个标签。

该表显示良好的标签和图像，但在搜索中，方法 viewWithTag 似乎没有找到标记的标签。一旦我在搜索栏中输入一个字符，视图就会清除，就好像没有找到带有标签 100 的单元格一样。这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";    
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView) {

        iKl_Stretch *stretchpb  = [self.filteredStretchList objectAtIndex:indexPath.row];     
        UILabel *nameLabel = (UILabel *)[cell viewWithTag:100];
        nameLabel.text = stretchpb.name;
        return cell;

    } else {

        iKl_Stretch *stretchpb  = [self.categoryStretchList objectAtIndex:indexPath.row];
        UILabel *nameLabel = (UILabel *)[cell viewWithTag:100];
        nameLabel.text = stretchpb.name;
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T12:18:54.880

我发现了问题所在：searchDisplayController 返回了它自己的表格视图，因此我标记的单元格在此视图中不存在。为了使用自定义单元格，必须替换以下行：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

和：

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T21:25:14.587

也许标签是单元格的子视图`contentView`。尝试

```
UILabel *nameLabel = (UILabel *)[cell.contentView viewWithTag:100]; 
```

另外，请检查您`searchDisplayController.searchResultsTableView`的设置是否正确。听起来你没有恢复任何细胞。

# xml - ClassNotFoundException：org.apache.xml.serializer.TreeWalker

> ID：10456287
> 
> 赞同：6
> 
> 时间：2012-05-04T21:21:10.947
> 
> 标签：xml, tomcat, tree, xmlspy

我用 xml 数据库和 appache tomcat 编写了一个简单的应用程序。我工作得很好，直到我尝试在工作区打开时对其进行压缩。之后，每当我尝试立即创建 tomcat 服务器时，都会收到此错误：

> `ClassNotFoundException: org.apache.xml.serializer.TreeWalker`

所以我离开了这个。现在我正在研究 xmlspy，试图使用 tomcat FO 引擎生成一个 pdf 文件。我安装了新的 tomcat 并在 xmlspy 中指出了这一点。现在，当我尝试在 xmlspy 中运行 fo 时，出现以下错误。

注意：`serializer.jar`& xalan jar 文件已经在 lib 文件夹中。

> ```
> log4j:WARN No appenders could be found for logger (org.apache.fop.util.ContentHandlerFactoryRegistry).
> log4j:WARN Please initialize the log4j system properly.
> log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
> Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xml/serializer/TreeWalker
>   at org.apache.xalan.processor.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:823)
>   at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:278)
>   at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:130)
>   at org.apache.fop.cli.Main.startFOP(Main.java:174)
>   at org.apache.fop.cli.Main.main(Main.java:205)
> Caused by: java.lang.ClassNotFoundException: org.apache.xml.serializer.TreeWalker
>   at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
>   at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
>   at java.security.AccessController.doPrivileged(Native Method)
>   at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
>   at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
>   at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
>   ... 5 more 
> ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-04-23T19:47:39.507

以下帮助了我：

```
System.setProperty("javax.xml.transform.TransformerFactory", "com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:33:33.383

好的，我解决了这个问题。JRE 中的 xiling 包（如果我没记错的话）存在问题。安装了新的 JRE，现在可以正常工作了。谢谢。

# javascript - 来自kml文件中多边形的LatLngBounds？

> ID：10456290
> 
> 赞同：2
> 
> 时间：2012-05-04T21:21:25.290
> 
> 标签：javascript, google-maps-api-3, gis, kml, polygon

我是谷歌地图和 API 的新手，试图通过点击将地图平移到某个区域。我没有很高兴在 API 参考中找到我需要的东西，而且完全不确定如何去做，所以我没有太多，但这是我到目前为止所拥有的。

我想让它点击任何区域都会平移并放大以显示该区域的大部分内容，我相信这就是[panToBounds](https://developers.google.com/maps/documentation/javascript/reference#Map)的目的。

大多数功能将来自单击文本名称并让地图加载显示正确的位置，而不是单击地图本身

```
function initialize_neighbourhoodmap(neighbourhood_name) {
    var latlng = new google.maps.LatLng(42.949442,-81.228125);

    var zoom = 11;
    var neighbourhood_center = get_neighbourhood_center();

    var myOptions = {
      zoom: zoom,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("neighbourhood_map"),
        myOptions);

    var neighbourhoods = new google.maps.KmlLayer('http://maps.google.com/maps/ms?authuser=0&ie=UTF8&hl=en&oe=UTF8&vps=3&msa=0&output=kml&msid=217366496682144933685.0004bf3be50d3cd7ad1c2', {suppressInfoWindows: true, preserveViewport:true});
    neighbourhoods.setMap(map);

    google.maps.event.addListener(neighbourhoods, 'click', function(KmlFeatureData) {
        var neighbourhood_name = KmlFeatureData.featureData.name;
    load_neighbourhood(neighbourhood_name, neighbourhoods);
    window.location = "#neighbourhood-neighbourhood "+neighbourhood_name;
    });

    if(typeof neighbourhood_name !== 'undefined'){
        load_neighbourhood(neighbourhood_name, neighbourhood_center);
    }
}

function load_neighbourhood (neighbourhood_name, neighbourhoods) {
    var neighbourhoodbounds = nonexistentgetboundsfunction(neighbourhood_name);
    map.panToBounds(neighbourhood_center[neighbourhood_name][0]);
    $('#neighbourhood h2').html('neighbourhood '+neighbourhood_name);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:29:31.157

你肯定想要其他功能吗？在我看来，用户界面变得很尴尬。好吧，这里是：http: [//jsfiddle.net/g343k/3/](http://jsfiddle.net/g343k/3/)

我遇到了一个奇怪的“错误”，或者有些人可能称之为“功能”，它与 KML 多边形相关联。单击某个区域时，地图会平移到该区域的中心；然而，当点击外部的planning_district 区域时，地图会平移到框的中心，而不是点击的位置（Sean Mickey 在 FireFox 12 中进行了测试，它会平移到点击的位置）。除了将规划区细分为几十个小盒子之外，我想不出办法解决这个问题:(现在我已经编写了代码来忽略对规划区的点击。

```
google.maps.event.addListener(neighbourhoods, 'click', function(KmlFeatureData) {
        var neighbourhood_name = KmlFeatureData.featureData.name;
    load_neighbourhood(neighbourhood_name, neighbourhoods);
    window.location = "#neighbourhood-neighbourhood "+neighbourhood_name;
    // ADDED
    // Consider what to do when this outer area is clicked
    if(KmlFeatureData.featureData.name!="planning_districts_2008") {
      map.panTo(KmlFeatureData.latLng);
    }

    });

    // LEFT OUT
    //if(typeof neighbourhood_name !== 'undefined'){
    //    load_neighbourhood(neighbourhood_name, neighbourhood_center);
    //}

    // ADDED
    google.maps.event.addListener(map, 'click', function(event) {
      map.panTo(event.latLng);
    }); 
```

# django - django modelform BooleanField 复选框

> ID：10456291
> 
> 赞同：1
> 
> 时间：2012-05-04T21:21:28.927
> 
> 标签：django, checkbox, boolean, modelform

我有一个带有 BooleanField 的模型

模型.py

```
class Entry(models.Model):
    test = models.BooleanField()

class TestForm(ModelForm):
    class Meta:
        model = Entry 
```

视图.py

```
def registreren(request):
    context = {'form': TestForm()}
    if request.method == "POST":
        form = TestForm(request)
        if form.is_valid():
            form.save()

    context.update(csrf(request))
    return render_to_response("test.html", context) 
```

测试.html

```
<body>
        <form action="/registreren/" method="post">
                {% csrf_token %}
                {{form}}
                <input type="submit" value="Hit it!" />

        </form>
</body> 
```

当我保存表单时，即使单击表单中的复选框，我也只会得到错误的值。因此，无论是否在表单中单击了复选框，所有 Entry.test 实例都是 False。

我不知道出了什么问题。所有其他值都正确发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:38:12.500

您将请求对象传递给表单，而不是包含您的 POST 数据的 request.POST 类字典对象。

```
if request.method == "POST":
    form = TestForm(request.POST)
    if form.is_valid():
        form.save() 
```

我以为你说其他领域正在出现？他们不应该！

# c++ - 什么是线程中的关键部分

> ID：10456292
> 
> 赞同：8
> 
> 时间：2012-05-04T21:21:37.730
> 
> 标签：c++, multithreading, thread-safety, critical-section

我正在阅读有关互斥锁、信号量和关键部分的信息。我知道互斥锁会同步资源，以便一次只有一个线程访问它，信号量允许特定数量的线程访问资源，但关键部分做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T21:43:03.577

在正常使用中，临界区是必须串行执行的一段代码——即在任何给定时间只有一个线程可以执行该代码。您通常通过使用互斥信号量保护代码来实现这一点。

在 Windows 的用语中，临界区是一种数据结构（以及一些相关的函数），它在特定于进程的互斥信号量（即，仅用于在单个进程中的线程之间锁定，而不是在单独的进程之间）实现。

信号量有两种。互斥信号量一次只允许一个线程执行。计数信号量允许您指定可以同时执行的最大线程数。互斥信号量是更常见的品种，但计数信号量肯定也有用途。

# python - 在循环内打印时输出中的额外行

> ID：10456293
> 
> 赞同：13
> 
> 时间：2012-05-04T21:21:40.787
> 
> 标签：python

我不明白为什么代码#1 返回一个额外的空行，而代码#2 没有。有人可以解释一下吗？不同之处在于代码 #2 末尾的额外逗号。

```
# Code #1
file = open('tasks.txt')

for i, text in enumerate(filer, start=1):
    if i >= 2 and i <= 4:
        print "(%d) %s" % (i, text)

# Code #2
file = open('tasks.txt')

for i, text in enumerate(filer, start=1):
    if i >= 2 and i <= 4:
        print "(%d) %s" % (i, text), 
```

这是我的 tasks.txt 文件的内容：

```
line 1
line 2
line 3
line 4
line 5 
```

代码 #1 的结果：

```
(2) line 2

(3) line 3

(4) line 4 
```

代码 #2 的结果（期望的结果）：

```
(2) line 2
(3) line 3
(4) line 4 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-04T21:24:51.603

打印语句中的尾随`,`将取消换行。你的第一个打印语句没有，你的第二个有。

您阅读的输入仍然包含`\n`导致额外换行的内容。补偿它的一种方法是通过使用尾随逗号来防止打印发出自己的换行符。或者，可以说是一种更好的方法，您可以在阅读时去掉输入中的换行符（例如，通过使用`rstrip()`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T21:51:24.587

对此问题的最佳**一般**答案是在您阅读后立即删除尾随换行符（如果有的话！）：

```
f = open('tasks.txt')
for i, text in enumerate(f, start=1):
    text = text.rstrip('\n')
    if i >= 2 and i <= 4:
        print "(%d) %s" % (i, text) 
```

这样，您就可以将输出与输入分离……您的输出代码可能在 20 行之外，或者在不同的函数/方法中，甚至在不同的模块中。通过在 print 语句末尾使用逗号来补偿输入中的换行符并不是一个可靠的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T21:30:44.737

为了没有空行，您需要`,`在打印语句的末尾

例子：

```
for i in range(10):
    print i,

>>>0 1 2 3 4 5 6 7 8 9

for i in range(10):
    print i

>>>
0
1
2
3
4
5
6
7
8
9 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-16T09:35:10.413

有一个非常简单的解决方法。

假设我有一个 .txt 文件（称为 numbers.txt），我正在读取其中的值：

```
234234
777776
768768 
```

然后，使用以下代码：

```
filename = numbers.txt

with open(filename) as file_object:
    for line in file_object:
        print(line) 
```

当您遇到问题时，会给您额外的空白行。但只要稍作改动，您就可以使用 rstrip() 方法去除多余的空白行。所以代码变成了：

```
filename = numbers.txt

with open(filename) as file_object:
    for line in file_object:
        print(line.rstrip()) 
```

现在你会得到你的结果，它们之间没有那些烦人的空白行！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T21:25:47.953

遍历文件会保留文件中的换行符。所以你的打印中有一个换行符，字符串中有一个换行符。

测试文件语义的一个好方法是使用`StringIO`. 看一看：

```
>>> from StringIO import StringIO
>>> x = StringIO("abc\ncde\n")
>>> for line in x: print repr(line)
... 
'abc\n'
'cde\n' 
```

正如 Levon 所说，逗号抑制了打印中的换行符，因此字符串中只有换行符。

我使用`s.rstrip('\n')`. 它消除了任何现代格式（Unix、Windows 或旧 Mac OS）的任何尾随换行符。所以你可以这样做`print "(%d) %s" % (i, text.rstrip('\n'))`。

# android - 第一个“ImageView”，第二个“RelativeLayout” - 工作，但第一个“RelativeLayout”，第二个“ImageView” - 不

> ID：10456294
> 
> 赞同：1
> 
> 时间：2012-05-04T21:21:42.593
> 
> 标签：android, android-layout

我需要使用显示第一个按钮，而不是图片。但是我的应用程序无法启动。

这是作品：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
    <ImageView
    android:id="@+id/imageview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />

    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1">
        <Button
        android:id="@+id/make_photo_again"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/make_photo_again_label"
        android:layout_alignParentLeft="true"
        />
        <Button
        android:id="@+id/edit_photo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/edit_photo_label"
        android:layout_alignParentRight="true"
        />
    </RelativeLayout>

</LinearLayout> 
```

..但是如果我将“图像”放在“RelativeLayout”下，该应用程序将无法工作。

真的不知道该怎么办。。

你能告诉我，为什么？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:21:40.870

您的 XML 看起来没有错。你得到什么错误。请描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:07:59.973

如果您将 imageview 放在按钮上方的相对布局的开头，那么它应该可以工作，那么 imageview 将位于背面，而按钮将位于 imageview 上。

如果您将 imageview 放在相对布局的末尾，就在两个按钮下方，那么 imageview 将位于前面，它将隐藏您的按钮.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:11:29.760

**在 xml 中尝试此代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:weightSum="2">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.3" >

        <Button
            android:id="@+id/make_photo_again"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Save"
           />

        <Button
            android:id="@+id/edit_photo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Cancel"
             />
    </RelativeLayout>

    <ImageView
        android:id="@+id/imageview"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1.7"
        android:background="@drawable/edit_box_mytime" />

</LinearLayout> 
```

# matlab - 如何在 MATLAB 中删除临时文件

> ID：10456297
> 
> 赞同：0
> 
> 时间：2012-05-04T21:21:50.123
> 
> 标签：matlab, delete-file

我有一个 MATLAB 脚本，需要将临时文件写入磁盘，然后在我完成后删除这些文件。重要的是我自己删除了这些文件（而不是让它们累积在临时目录中），因为有问题的代码处于执行多次的循环中。如果文件没有被及时删除，脚本将很快占用大量磁盘空间。

我认为下面的代码片段会起作用，当我自己运行它时它会起作用。但是，由于某种原因，当我将其包含在较大的脚本中时，该片段会失败。临时文件不会被删除并且会弄乱临时目录。

```
 % create temporary file
    myTmpFile = [tempname '.wav'];
    fs = 32000;
    wavwrite(zeros(fs,1),fs,myTmpFile);

    % use the file here

    % delete the file when we're done
    prevState = recycle('off'); % turn recycle off to permanently delete files
    delete(myTmpFile)
    recycle(prevState);         % restore the state of recycle 
```

有谁知道我做错了什么？我在 OS X 10.7.3 上运行 MATLAB 7.10.0。

*   编辑 *

我想到了。请看下面我的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:36:50.890

您应该查看作为 MATLAB 的一部分提供的`tempdir`和函数。`tmpname`它们旨在为您*保证*具有写访问权限的目录中的文件名提供*绝对路径。*[请参阅MathWorks 网站上](http://www.mathworks.com/help/techdoc/import_export/f5-5983.html)这两个函数的文档。

 *根据您看到的问题，我怀疑（和 nrz 一样）您正在将临时文件写入 MATLAB 的当前目录。这不仅会导致您在以后丢失文件以进行删除，而且有一天您会进入只读目录并且*完全*不走运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:05:08.977

您使用的是相对文件名还是绝对文件名？如果您`cd`在循环内更改当前文件夹，或者如果您的代码调用的任何函数调用`cd`后没有返回到原始文件夹，则相对文件名将不起作用。您可以使用 . 检查当前文件夹`pwd`。

可能的解决方案： 1\. 避免`cd`。2\. 使用绝对文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:39:37.760

我想到了。事实证明问题不在上面的片段中；它在我的代码的完全不同的部分。我在别处写临时文件，忘记删除它们。

底线：上面的代码段绝对没有错。`tempname`，`recycle`并且`delete`是创建和销毁临时文件的绝佳功能。*

# restlet - 如何在 RESTlet 中有一个持久数组以供多个请求访问

> ID：10456298
> 
> 赞同：0
> 
> 时间：2012-05-04T21:21:55.200
> 
> 标签：restlet, persistent

我将 Restlets 用于 REST 架构。REST 类访问数据库并以 JSON 形式返回结果。

我有一个实例，我只想访问数据库一次并将结果存储在数组列表中，以便每个后续 REST 请求都可以访问其数据。

下面是初始化进程的代码：

```
 if(myArray == null){
            System.out.println("retrieving my array");
        passports = getMyArray();
        }else{
            System.out.println("in memory");
        } 
```

如果这是理想的运行，“检索我的数组”将从第一个 REST 请求中调用，来自用户的下一个请求将导致“内存中”打印。

这不会发生，并且每个请求都会达到“检索我的数组”条件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:12:18.733

REST 根据定义是无状态的，但您始终可以将数组存储在第一次需要时初始化的**静态变量中。**

# javascript - 使用所有特殊字符验证字母数字值

> ID：10456315
> 
> 赞同：5
> 
> 时间：2012-05-04T21:22:57.690
> 
> 标签：javascript, regex, validation, special-characters, alphanumeric

我想用以下验证我的文本字段：
1\. 字母数字
2\. 所有我不擅长正则表达式的特殊字符
，谁能帮我为上述内容创建一个正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T21:29:45.943

字母数字字符串匹配如下：

```
^[a-zA-Z0-9]+$ 
```

它匹配任何仅包含列出的字符且长度至少为一个字符的字符串。

使用特殊字符，它的工作方式相同。

但是你认为什么是特殊的字符？

对于 !@#$%^&*()+=-[]\';,./{}|":<>? – 作为特殊字符集，正则表达式如下所示：

```
^[@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\? ]+$ 
```

同样，列出了所有允许的字符。在正则表达式中用作命令或量词的那些必须用`\`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T21:46:10.753

这将做你想要的。

```
function validate()
{
        var val = <my string>;

        if (val == '')
            alert('String is empty!');

        else if (!val.match(/[_\W]/))
            alert('String contains only A-Z a-z 0-9 characters!');

        else if (!val.match(/^\w[@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\?]/))
            alert('String contains your predefined characters only!');
} 
```

请注意，两个正则表达式都适用于双重否定，在非法字符的第一个匹配中返回 false 以获得最佳性能。首先是`\W`字符集的否定，它是`\w`. 其次是对预定义字符（+预定义字符）`!`的否定。如果您需要任何解释或修改，请回复。`^``\w`

**编辑** 如果字符串至少有一个特殊字符和字母数字字符，这是一个匹配的正则表达式。

```
if (val.match(/[^_\W]/) && val.match(/[@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\? ]/))
    alert('String contains both alpha-numeric and your pre-defined special characters!'); 
```

可以吗，还是您需要在单个正则表达式模式中使用它？

**编辑** 这将在一个正则表达式中完成：

```
if (val.match(/(?=.*[@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\? ]+?).*[^_\W]+?.*/)
    alert('String contains both alpha-numeric and your pre-defined special characters!'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-18T11:21:29.890

您可以对所有特殊字符尝试此操作

```
 /^[0-9a-zA-Z\s\r\n@!#\$\^%&*()+=\-\[\]\\\';,\.\/\{\}\|\":<>\?]+$/; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-27T11:11:51.020

对于字母数字和所有特殊字符验证

您可以在一个正则表达式中使用

如果您至少有 8 个字符，至少 1 个大写字母、1 个小写字母、1 个数字和 1 个特殊字符，这将返回 true

```
NSString *alphaNumberandSpecialRegex =@"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$";
        NSPredicate *alphaNumberTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", alphaNumberandSpecialRegex];

        return [alphaNumberTest evaluateWithObject:@"yourString"]; 
```

最少 8 个字符，至少 1 个字母和 1 个数字：

```
NSString *alphaNumberandSpecialRegex =@""^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"";
            NSPredicate *alphaNumberTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", alphaNumberandSpecialRegex];

            return [alphaNumberTest evaluateWithObject:@"yourString"]; 
```

最少 8 个字符，至少 1 个字母、1 个数字和 1 个特殊字符：

```
NSString *alphaNumberandSpecialRegex =@"^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$";
                NSPredicate *alphaNumberTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", alphaNumberandSpecialRegex];

                return [alphaNumberTest evaluateWithObject:@"yourString"]; 
```

最少 8 个字符，至少 1 个大写字母、1 个小写字母和 1 个数字：

```
 NSString *alphaNumberandSpecialRegex =@"^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$";
                    NSPredicate *alphaNumberTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", alphaNumberandSpecialRegex];

                    return [alphaNumberTest evaluateWithObject:@"yourString"]; 
```

最少 8 个和最多 10 个字符，至少 1 个大写字母、1 个小写字母、1 个数字和 1 个特殊字符：

```
NSString *alphaNumberandSpecialRegex =@"^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,10}";
                        NSPredicate *alphaNumberTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", alphaNumberandSpecialRegex];

                        return [alphaNumberTest evaluateWithObject:@"yourString"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T07:17:45.077

如果要允许带有字母数字的特定特殊字符，则以下正则表达式将起作用。您可以根据您的要求自定义允许的特殊字符范围。如果是转义字符，您需要放在 \ 之间。在下面的示例中 \-\ 允许使用“-”。

```
/^[a-zA-Z0-9?=.*!@#$%^&*_\-\s]+$/ 
```

希望对你有帮助 ：）。

# android - 关于 Dalvik 字节码中的 *-bearing 寄存器

> ID：10456318
> 
> 赞同：1
> 
> 时间：2012-05-04T21:23:05.787
> 
> 标签：android, bytecode, dalvik

我对 Dalvik 字节码的格式有点陌生，我想知道这些 *-bearing 寄存器是什么意思，例如对象承载、异常承载等。

同时，生成的字节码是使用类型，而不是寄存器？例如，

`throws Landroid/database/SQLException`是生成的，但是`Landroid/database/SQLException`是一个类型，那么为什么[指令摘要](http://source.android.com/tech/dalvik/dalvik-bytecode.html)说异常承载寄存器`throw vAA`在哪里？`vAA`我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:06:31.003

这只是指指令保存的数据类型。vm 必须能够静态地确定该寄存器在该点包含该类型的数据。换句话说，对于所有传入的代码路径，该寄存器已设置为该类型的数据。

如果您想更详细地研究寄存器类型信息是如何传播的，您可以使用 -r 选项使用 baksmali 反编译您的应用程序，该选项将在每条指令之前/之后输出注释，其中包含与寄存器相关的寄存器类型信息那条指令。此信息应与 vm 在字节码验证器中内部构建的寄存器类型信息相匹配。

例如，假设您有一个仅包含以下内容的方法：

```
const-string v0, "Hello World!"
throw v0 
```

这是不允许的，因为在 throw 指令处，p0 寄存器不包含对从 Throwable 扩展的对象的引用（即它不是“带有异常的寄存器”）。

如果你在 baksmali 中使用 -r，你会看到：

```
#v0=(Uninit);
const-string v0, "Hello World!"
#v0=(Reference,Ljava/lang/String;);

#v0=(Reference,Ljava/lang/String;);
throw v0 
```

这清楚地表明 v0 在 throw 指令处不包含异常。

此外，不允许这样的事情：

```
#v0=(Uninit);
new-instance v0, Ljava/lang/Exception;
#v0=(UninitRef,Ljava/lang/Exception;);

#v0=(UninitRef,Ljava/lang/Exception;);
invoke-direct {v0}, Ljava/lang/Exception;-><init>()V
#v0=(Reference,Ljava/lang/Exception;);

#p0=(Integer);
if-eqz p0, :cond_9

#v0=(Reference,Ljava/lang/Exception;);
const-string v0, "Hello World!"
#v0=(Reference,Ljava/lang/String;);

:cond_9
#v0=(Reference,Ljava/lang/Object;);
throw v0 
```

因为在抛出点，v0 可能包含异常或字符串。在这种情况下，它将 v0 的“类型”报告为`Ljava/lang/Object;`，因为这是两种类型的公共父类。

# c# - 转换为 Web 应用程序后出现无法识别的元素异常

> ID：10456321
> 
> 赞同：1
> 
> 时间：2012-05-04T21:23:33.303
> 
> 标签：c#, asp.net, user-controls, web-site-project, web-application-project

将 my 转换`Web Site Project`为 a后`Web Application Project`，我的一些自定义控件丢失，并且我不断收到*无法识别的元素*异常。

我不知道发生了什么事。我已经尝试`web.config`在 page 指令中复制并注册控件，但它仍然无法正常工作。我是否需要`web.config`手动调整，还是有可能我仍然在某处缺少参考？

我将不胜感激有关如何解决此问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:19:12.740

它很可能与转换有关，我怀疑是应用程序命名空间。我不知道转换过程有多彻底，但您可能需要更新用户控制指令和代码隐藏文件。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyUserControl.ascx.cs" Inherits="MyNamespace.MyApplication.Controls.MyUserControl" %> 
```

代码隐藏：

```
namespace MyNamespace.MyApplication.Controls
{
    public partial class MyUserControl : UserControl
    {
        ...
    }
} 
```

此外，请确保用户控件在以下位置正确映射`web.config`：

```
<pages>
    <controls>
        <add tagPrefix="Custom" src="~/controls/myusercontrol.ascx" tagName="MyUserControl" />
        ...
    </controls>
</pages> 
```

# json - mongoDB：使用点表示法更新对象（多级对象）

> ID：10456325
> 
> 赞同：2
> 
> 时间：2012-05-04T21:23:47.173
> 
> 标签：json, mongodb, syntax, mongodb-query, mongodb-update

我有一个具有以下形式的对象：

```
{
    "_id": ObjectId("4fa43f4d1cf26a6a8952adf1"),
    "userId": "1",
    "facebookId": "1234",
    "groups": [{
        "groupName": "testGroup",
        "members": [{
            "memberFirstName": "userFirstName",
            "memberLastName": "userLastName",
            "memberDetails": {
                "userId": "1",
                "faceBookId": "1234"
            }
        }]
    }]
} 
```

这是一个为每个用户保存的集合 - 它的组，每个组都包含组成员......所以“组”键是一个数组（或列表），“成员”键也是如此。（每个用户可以有多个组，每个组有多个组成员）。

我很难用新的组成员更新对象，我想做的是：

```
db.collection.update({
    userId: "1"
}, {
    $push: {
        "groups.members": {
            membersDetails: {
                userId: "2",
                faceBookId: "54321"
            },
            memberFirstName: "UserB",
            memberLastName: "UserBLastName"
        }
    }
}); 
```

但这似乎不起作用。

收到以下错误：

```
can't append to array using string field name [members] 
```

我也在尝试使用 Java 驱动程序，但这似乎也不起作用。

```
DBObject query = new BasicDBObject("userId", "1");

DBObject newMemberDetailsObj = new BasicDBObject();
newMemberDetailsObj.put("userId", "2");
newMemberDetailsObj.put("faceBookId", "54321");

DBObject newMemberObj = new BasicDBObject();
newMemberObj.put("memberFirstName", "userB");
newMemberObj.put("memberLastName", "UserBLastName");
newMemberObj.put("memberDetails", newMemberDetailsObj );

DBObject update = new BasicDBObject("$push", new BasicDBObject("members", newMemberObj));
update.put("groupName", "testGroup");       

DBObject maintain = new BasicDBObject("$push", new BasicDBObject("groups", update));

WriteResult newWr = coll.update(query, maintain); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:09:31.493

这是行不通的，因为`groups`它是一个数组，但是您在其中引用一个属性，就好像它是一个对象一样。您可以访问`groups.0.members`或`groups.1.members`因为它们引用数组中的特定项目，但`groups`对象本身没有`members`要附加的属性。

我不完全确定您的更新究竟需要做什么，但是您可以在`groups.groupName`查询中添加一个过滤器，然后`$push`只`groups.$.members`将一个成员附加到匹配的组中。

[http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T22:11:04.170

这是因为您的用户模型可以有多个组，因此您需要在过滤器中匹配一个组并`$`在更新中使用位置运算符。所以你的更新会是这样的（未经测试）：

```
db.collection.update({
    userId: "1",
    "groups.groupName": "testGroup" // match against the group here
}, {
    $push: {
        "groups.$.members": { // notice the use of the $ here
            membersDetails: {
                userId: "2",
                faceBookId: "54321"
            },
            memberFirstName: "UserB",
            memberLastName: "UserBLastName"
        }
    }
}); 
```

当你有一个值数组时，位置运算符基本上说“在数组中匹配值的位置”。

*但是*，您只能将这一级别的数组进行深度处理，例如，您将无法匹配特定组中的特定成员 - 因此您可能希望将文档分解为多个更简单的集合，如果您'将需要做这种事情。

# mysql - 获取子查询返回的行作为原始列

> ID：10456326
> 
> 赞同：2
> 
> 时间：2012-05-04T21:23:48.877
> 
> 标签：mysql, sql

我正在创建一个数据库，学生可以在其中注册研讨会，并且我有一个保存 StudentID 和 WorkshopID 的表 WorkshopRegistration。我的目标是返回一个包含 StudentName、SchoolName、Workshop1、Workshop2 列的表。学生将永远不会参加超过 2 个研讨会。我已经到了将 1 个研讨会作为专栏的地步，但我在获得第二个研讨会时遇到了麻烦。

```
SELECT Students.StudentID, Students.name, Schools.name, 
      (SELECT Workshops.title
       FROM Workshops
       WHERE Workshops.WorkshopID IN
              (SELECT WorkshopID
               FROM WorkshopRegistration
               WHERE WorkshopRegistration.StudentID=Students.StudentID)) as Workshop1,
      (SELECT Workshops.title
       FROM Workshops
       WHERE Workshops.WorkshopID IN
              (SELECT WorkshopID
               FROM WorkshopRegistration
               WHERE WorkshopRegistration.StudentID=Students.StudentID)) as Workshop2
FROM Students, Schools
WHERE Students.SchoolID=Schools.SchoolID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:15:45.403

当学生只参加一个研讨会时，之前的解决方案将重复研讨会名称。我建议改为：

```
SELECT students.studentid, 
       students.name, 
       schools.name, 
       mintitle AS Workshop1, 
       ( CASE 
           WHEN mintitle = maxtitle THEN NULL 
           ELSE maxtitle 
         END )  AS Workshop2 
FROM   students 
       JOIN school 
         ON students.schoolid = schools.schoolid 
       JOIN (SELECT studentid, 
                    Min(title) AS minTitle, 
                    Max(title) AS maxTitle 
             FROM   workshop w 
                    JOIN workshopregistration wr 
                      ON w.workshopid = wr.workshopid 
             GROUP  BY studentid) w 
         ON w.studentid = stuents.studentid 
```

案例陈述处理只有一个车间的情况。请注意，通过将第二个联接更改为“LEFT OUTER JOIN”，即使没有研讨会，相同的查询也可以工作。处理两个以上的车间。. . 好吧，那需要另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:47:26.447

我会稍微更改您的查询，只要学生只能同时注册两个研讨会，这将起作用：

使用有效的演示查看此[SQL Fiddle](http://sqlfiddle.com/#!2/69f45/1)

```
SELECT t.StudentID
    , t.name as StudentName
    , s.name as SchoolName
    , ws1.Title as Workshop1
    , ws2.Title as Workshop2
FROM Students t
LEFT JOIN Schools s
    on t.SchoolID = s.SchoolID
LEFT JOIN 
(
    SELECT max(WorkshopID) as WorkshopID, StudentId
    FROM WorkshopRegistration 
    GROUP BY studentid
) w1
    ON t.StudentID = w1.StudentID
LEFT JOIN 
(
    SELECT min(WorkshopID) as WorkshopID, StudentId 
    FROM WorkshopRegistration 
    GROUP BY studentid
) w2
    ON t.StudentID = w2.StudentID
LEFT JOIN workshops ws1
    ON w1.workshopid = ws1.workshopid
LEFT JOIN workshops ws2
    ON w2.workshopid = ws2.workshopid
ORDER BY t.StudentID 
```

结果：

![在此处输入图像描述](../Images/39dad6cc4da84d9e98ad901522abeb3c.png)

# multithreading - 在 Windows（本机）中控制工作线程的最佳实践？

> ID：10456327
> 
> 赞同：1
> 
> 时间：2012-05-04T21:24:07.897
> 
> 标签：multithreading, winapi, synchronization, worker

仅使用 win32 API 控制执行同一线程 proc 的多个工作线程的最佳实践是什么？

我尝试了很多替代方案，但我无法做到正确。我当前的代码如下所示：

```
// thread proc
DWORD WINAPI thread_proc(LPVOID param) {
    while(1) {
        WaitForSingleObject(start_event, INFINITE);

        // Do some work HERE
        // Work finished, go back to waiting for new work
    }
}

// main proc
int main(void) {
    // create enough worker threads
    CreateThread(... thread_proc...);
    CreateThread(... thread_proc...);
    ...

    // Wait for work here

    // start work by raising event
    SetEvent(start_event);
    ResetEvent(start_event); 
```

基本上我正在使用事件来启动多个工作线程，但这当然不能按预期工作。如果主线程在 SetEvent() 和 ResetEvent() 之间被中断，工作线程只会在 while 循环中旋转。另一方面，使用自动重置事件对象只会释放一个等待线程。

另外，我需要主线程等待所有线程完成。我厌倦了几种不同的方法，但我无法让它发挥作用。我想我才刚刚开始意识到多线程编程有多难。

编辑：语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:43:01.100

工作线程可以设置为低（er）优先级（GUI（主）线程具有正常优先级）。它并没有真正减慢速度（只要您不在主线程中执行任何操作，使其保持忙碌），并且您的应用程序将对用户输入做出更快的响应。此外，在thread_proc() 中，如果“没有找到工作”，工作线程可能会以某种方式让步，例如等待（睡眠）一秒钟左右。

另一种方法是使用 APC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:39:54.563

这是一个非常糟糕的主意：

1) 正如您所发现的，微管理线程非常困难且容易出错。绕过它的方法是不这样做。

2) 在 GUI 线程中等待工作线程完成（或者实际上，等待任何事情），这很糟糕。当工作线程完成时向 GUI 线程发出信号，例如。通过 PostMessage()ing，很好。

好的，您有多个执行相同线程过程的工作线程。它们运行相同的代码，因此很明显，它们对不同的数据进行操作。您能否提供更多有关线程操作的数据的详细信息？我怀疑您最终会将任务对象/结构排队到线程池中，但我们需要更多详细信息。

多线程编程并不是那么困难——它只是不同:) 最重要的细节——它与代码无关，（或者，理想情况下，任何线程实例），它都是关于你如何管理数据的——它是如何分区的以及它是如何移动的大约。可悲的是，这也是为了避免网络上比比皆是的如何不做线程的非常糟糕的例子:(

# c - 具有 CUDA 内核的动态数据的 C 结构？

> ID：10456330
> 
> 赞同：0
> 
> 时间：2012-05-04T21:24:09.690
> 
> 标签：c, cuda, structure, dynamic-memory-allocation

假设我有一个数据结构：

```
struct MyBigData {
    float * dataArray;
    float * targetArray;
    float * nodes;
    float * dataDataData;
} 
```

我希望能够在一些不同的 CUDA 内核周围传递这个结构。我不想将多个数组作为参数传递，所以我可以只传递结构并完成它吗？我知道内核支持 C 结构，但是 C 结构中的动态内存呢？

看来我只是为了在 CUDA 卡上制作结构：

```
MyBigData * mbd = (MyBigData *) cudaMalloc( sizeof(MyBigData) ); 
```

但是结构中数组的动态内存呢？下面的这一行编译但有一个运行时错误：

```
mbd->dataArray = (float *) cudaMalloc( 10 * sizeof(float) ); 
```

这是因为 cudaMalloc() 在 CPU 上运行，它无法读取 mdb->dataArray 来设置指针等于新的内存地址。所以存在运行时错误。但是，这可以编译并运行，但似乎不是我想要的：

```
MyBigData * mbd = (MyBigData *) malloc( sizeof(myBigData) );
mbd->dataArray = (float *) cudaMalloc( 10 * sizeof(float) ); 
```

因为现在，虽然这是有效的，但现在 mbd 驻留在主系统内存上，并且浮点指针指向在 CUDA 设备上分配的内存。所以我不能只传递一个指向 MyBigData 结构的指针，我必须将结构中的每个变量单独传递给内核。不干净。我想要的是：

```
someKernel<<<1,1>>>(mbd); 
```

不是：

```
someKernel<<<1,1>>>(mbd->dataArray, mbd->targetArray, mbd->nodes, mbd->dataDataData); 
```

所以我在想，cudaMemcpy() 怎么样？我在想这个：

```
MyBigData *d_mbd = cudaMemcpy( (void*) &d_mbd, (void*) mbd, SOMESIZE, CudaHostToDevice); 
```

但是那我应该为 SOMESIZE 放什么呢？我不能使用 sizeof(MyBigData)，因为这将包括浮点指针的大小，而不是数组的实际大小。其次，cudaMemcpy() 是否足够聪明，可以深入挖掘复杂数据结构的子对象？我想不是。

那么，CUDA卡上不可能有包含动态内存的结构吗？或者我错过了什么。简单的方法是让 CUDA 内核分配一些内存，但不能从 CUDA 内核调用 cudaMalloc()。

想法？

**5 月 7 日更新**：我编写了这段代码，它可以编译，但它告诉我所有值都为零。我认为我正在正确地创建对象并使用 CUDA 内核正确填充值。这些值只是线程 ID。我怀疑我没有正确打印这些值。想法？谢谢！

```
MyBigData* generateData(const int size) {
    MyBigData *mbd_host, *mbd_cuda;
    mbd_host = (MyBigData *) malloc( sizeof(MyBigData) );
    cudaMalloc( (void**) &mbd_host->dataArray, size * sizeof(float) );
    cudaMalloc( (void**) &mbd_host->targetArray, size * sizeof(float) );
    cudaMalloc( (void**) &mbd_host->nodes, size * sizeof(float) );
    cudaMalloc( (void**) &mbd_host->dataDataData, size * sizeof(float) );
    cudaMalloc( (void**) &mbd_cuda, sizeof(MyBigData) );
    cudaMemcpy( mbd_cuda, mbd_host, sizeof(mbd_host), cudaMemcpyHostToDevice );
    free(mbd_host);
    return mbd_cuda;
}

void printCudaData(MyBigData* mbd_cuda, const int size) {
    MyBigData *mbd;
    cudaMemcpy( mbd, mbd_cuda, sizeof(mbd_cuda), cudaMemcpyDeviceToHost);
    MyBigData *mbd_host = (MyBigData *) malloc( sizeof(MyBigData));
    mbd_host->dataArray = (float*) malloc(size * sizeof(float));
    mbd_host->targetArray = (float*) malloc(size * sizeof(float));
    mbd_host->nodes = (float*) malloc(size * sizeof(float));
    mbd_host->dataDataData = (float*) malloc(size * sizeof(float));

    cudaMemcpy( mbd_host->dataArray, mbd->dataArray, size * sizeof(float), cudaMemcpyDeviceToHost);
    cudaMemcpy( mbd_host->targetArray, mbd->targetArray, size * sizeof(float), cudaMemcpyDeviceToHost);
    cudaMemcpy( mbd_host->nodes, mbd->nodes, size * sizeof(float), cudaMemcpyDeviceToHost);
    cudaMemcpy( mbd_host->dataDataData, mbd->dataDataData, size * sizeof(float), cudaMemcpyDeviceToHost);

    for(int i = 0; i < size; i++) {
        printf("data[%i] = %f\n", i, mbd_host->dataArray[i]);
        printf("target[%i] = %f\n", i, mbd_host->targetArray[i]);
        printf("nodes[%i] = %f\n", i, mbd_host->nodes[i]);
        printf("data2[%i] = %f\n", i, mbd_host->dataDataData[i]);
    }

    free(mbd_host->dataArray);
    free(mbd_host->targetArray);
    free(mbd_host->nodes);
    free(mbd_host->dataDataData);
    free(mbd_host);
} 
```

这是我的内核和调用它的函数：

```
__global__ void cudaInitData(MyBigData* mbd) {
    const int threadID = threadIdx.x;
    mbd->dataArray[threadID] = threadID;
    mbd->targetArray[threadID] = threadID;
    mbd->nodes[threadID] = threadID;
    mbd->dataDataData[threadID] = threadID;
}

void initData(MyBigData* mbd, const int size) {
    if (mbd == NULL)
        mbd = generateData(size);

    cudaInitData<<<size,1>>>(mbd);
} 
```

我的`main()`电话：

```
MyBigData* mbd = NULL;
initData(mbd, 10);
printCudaData(mbd, 10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:21:34.980

> 其次，cudaMemcpy() 是否足够聪明，可以深入挖掘复杂数据结构的子对象？我想不是。

你说得对，`cudaMemcpy()`不做递归复制。要实现您想要的，您应该执行以下操作：

```
// Create mbd on host
MyBigData *mbd_host, *mbd;
mbd_host = (MyBigData *) malloc( sizeof(myBigData) );
// Fill it with pointers to device arrays
cudaMalloc( &mbd_host->dataArray, 10 * sizeof(float) );
// etc for other structure fields
// Create mbd on device
cudaMalloc( &mbd, sizeof(MyBigData) );
// Copy structure, filled with device addresses, to device memory
cudaMemcpy( mbd, mbd_host, sizeof(mbd), cudaMemcpyHostToDevice );
// Voila! 
```

顺便说一句，将 MyBigData 结构存储在设备内存中`__global__`而不是`__constant__`存储在设备内存中可能是一个好主意（您必须声明一个常量，而不是使用分配`mbd`和`cudaMalloc`使用`cudaMemcpyToSymbol`而不是 last `cudaMemcpy`）

# c# - Double Elimination Tournament Algorithm for byes %4

> ID：10456335
> 
> 赞同：3
> 
> 时间：2012-05-04T21:24:30.333
> 
> 标签：c#, algorithm, math, tournament

I'm trying to code a Double Elimination tournament where the brackets are based on mod 4\. The first round should handle all of the byes so that after round 2 there will be no more byes. I'm having a hard time trying to figure out the actual math behind determining the amount of byes I need. If anyone can help me with the math behind this it would be greatly appreciated.

There are 4 possible answers for anything mod 4 (0,1,2,3) I need to handle byes for 1,2,3.

An example of what I mean is 13 players so (13%4=1) so the round 1 bracket should look like 1vs2 2vs3 3vs4 4vs5 5vs6

and round 2 is 7vs winner 8vs winner 9vs winner winner vs winner and then you have the losers bracket

Basically if your familiar with the website Challenge, I want to generate my brackets similar to them, but I can't figure out the math behind their determining of the byes.

If anybody has done something similar to this I would greatly appreciate his help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:45:57.587

Where `N` is the number of competitors, the number of rounds will be:

```
nRounds = Math.Ceiling( Math.Log( N, 2 ) ); 
```

The number of slots in the first round will be:

```
firstRoundSlots = Math.Pow( 2, nRounds ); 
```

The top competitors get byes, so in your example, there are 13 competitors in the round of 16, so the top 3 competitors get byes. In other words, the number of byes are `firstRoundSlots - N`.

The order of the bouts is a little more complicated. Basically the idea is that the finals bout is the best competitor vs. the second-best competitor. In the semifinal, the best competitor squares off against the third best competitor, and the second best competitor squares off against the 4th best competitor. And so on and so forth. So it's easiest to work backwards from the finals to generate the order.

However, if you want to know an algorithm for generating the bout orders in reverse (i.e., starting with round 1 and working your way towards the finals), I wrote a blog post about that here:

[http://blogs.popart.com/2012/02/things-only-mathematicians-can-get-excited-about/](http://blogs.popart.com/2012/02/things-only-mathematicians-can-get-excited-about/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:46:42.563

I'll work you through how I solved this.
You want a number of players in round 2 that is a power of 2.

The number of players in round 2 is: `(matches in round 1)/2 + byes)`
Let P be the number of players.

```
2^n = (P-byes)/2 + byes
2^(n+1) = P-byes + 2*byes
2^(u) = P + byes 
```

So find the smallest `u` s.t. `2^u >= P`, there are then `2^u-P` byes.

example cases: 7 -> 2^u=8 -> (8-7) -> 1 bye
1 bye, 3 matches -> 4 players in round 2

It's not mod 4, compare 9 players to 13: 9 -> 2^u=16 -> (16-9) -> 7 byes 13 -> 2^u=16 -> (16-13) -> 3 byes

A more interesting question would be how to arrange for the minimum number of byes, allowing for some in other rounds than the first.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:24:04.160

Simplest algorithm I can think of:

1.  Seed the players (either using actual information or some random thing)
2.  Rank of a player depends on current points, and if that is a tie, then on seed
3.  At every stage of the tournament, starting from top ranked player to the least ranked, pair each player with the next highest ranked player they have not played with
4.  The least ranked player usually gets the bye
5.  Whenever one person loses a total of two games (or two loss equivalents in case where draw is prevalent), then that person is out of the tournament
6.  Repeat this until there is a single player left in the tournament

# java - 在java的每个地方设置CookieManager？

> ID：10456336
> 
> 赞同：0
> 
> 时间：2012-05-04T21:24:41.613
> 
> 标签：java, cookies

我应该设置

```
CookieManager cm = new CookieManager();
CookieHandler.setDefault(cm); 
```

在它连接到 Internet 并使用 cookie 的每个类文件中，还是只设置一个位置就足够了？

我计划在从其他线程和类建立的任何其他新连接中使用登录期间收到的 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:35:43.163

从[javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/CookieHandler.html#setDefault%28java.net.CookieHandler%29)中阅读它。这是系统范围的。

# ruby-on-rails-3 - 无法摆脱 AbstractController::DoubleRenderError

> ID：10456340
> 
> 赞同：2
> 
> 时间：2012-05-04T21:24:48.103
> 
> 标签：ruby-on-rails-3, model, controller

我在模型的更新方法中遇到了双重渲染错误，我无法摆脱它。

这是控制器的代码

```
class Admin::CmsHappeningNowFeatureController < ApplicationController

    def index
        # Various model data retrieval...

        render 'admin/cms/hn_features/index', layout: 'admin_cms'
    end

    # Works fine
    def edit
        @feature = CmsHappeningNowFeature.find_by_id(params[:id])
        render 'admin/cms/hn_features/feature', layout: 'admin_cms'
    end

    # Throws a AbstractController::DoubleRenderError upon submission
    def update
        @feature = CmsHappeningNowFeature.find_by_id(params[:id])
        @feature.attributes = params[:cms_happening_now_feature]
        if @feature.save
            redirect_to(:action => index, :notice => "Successfully updated feature.") and return
        end 
        render 'admin/cms/hn_features/feature', layout: 'admin_cms'
    end

    # ... rest of the class
end 
```

重定向到另一个控制器时，问题消失了。似乎重定向到同一个控制器使 rails 执行该方法而无需实际发送重定向。通过查看日志，在提交更新表单时，`update`被调用，然后`index`被调用，`render`执行 from index**然后**发出重定向并失败。

我错过了什么？解决方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:13:09.370

好吧，真正的原因是

```
redirect_to(:action => index, :notice => "Successfully updated feature.") and return
#                      ^^^^^ This calls the index method 
```

您调用`index`将首先呈现的方法。然后`redirect_to`调用将返回该函数的结果（这将是`render`调用`index`返回的任何结果）。并第二次渲染

你真正想写的是：

```
redirect_to(:action => :index, :notice => "Successfully updated feature.") and return 
```

您设置`:action`为符号的位置，即表示操作但不直接调用它的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:03:55.240

你有

```
if @feature.save
   redirect_to(:action => index, :notice => "Successfully updated feature.") and return
end 
```

哪个重定向到 index 然后再次从 index 重定向，这会引发错误

试试这个，让我知道它是否有效：

```
if @feature.save
   index
   flash[:notice] = "Successfully updated feature." 
   return
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T15:32:10.213

我也遇到了这个问题，但是它不涉及到控制器中的任何重定向或多个渲染。我们有一个直接触发电子邮件的操作，没有后端队列可以放置它。这使用 ActionMailer gem，我相信它会在 .haml 或其他模板上进行渲染以生成电子邮件的 html。然后我们在发送电子邮件后在最后使用渲染更新调用

这会导致这个错误吗？Rails 认为 ActionMailer 的电子邮件模板渲染是常规渲染？它只是一个猜测，不知道它可能是什么.....我也不能 100% 重现它，但看起来不像是并发的东西，因为在日志中我只看到一个对控制器的调用。

欢迎任何想法，谢谢。

# node.js - 使用 node.js 和 Kue，有没有办法让我的代码无论类型如何都能抓取下一个任务？

> ID：10456350
> 
> 赞同：2
> 
> 时间：2012-05-04T21:25:27.827
> 
> 标签：node.js

我理解 Kue 的工作方式，我需要指定我将获得的工作类型：

```
jobs.process('email', function(job, done){
    var pending = 5
      , total = pending;

    setInterval(function(){
      job.log('sending!');
      job.progress(total - pending, total);
      --pending || done();
    }, 1000);
  }); 
```

其中“电子邮件”是工作类型。我正在尝试做的是在队列中获得下一个工作，无论类型如何。那可行吗？

作为参考，我的对象具有与工作命名相同的方法，因此无论我拉出什么样的工作，我总是可以与我的工作人员一起处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:55:31.893

我最终做的是制作几类广泛的任务，并将工人的名字作为工作的一部分插入到所有人中。代码最终看起来像这样：

```
jobs.process('social_post', function(job, done){
    var this_worker = factory(job.data.worker);
    this_worker(job,done);
  }); 
```

工厂很简单：

```
var worker_factory = function(worker_name) {
    switch(worker_name){
        case 'facebook':
            return FacebookWorker;
        case 'social_response':
            return SocialResponder;

    };
}; 
```

我正在使用响应者队列作为 Kue 已经功能齐全的任务管理的过度杀伤力。

希望这可以帮助。

# heroku - Heroku 和应用程序主页

> ID：10456353
> 
> 赞同：0
> 
> 时间：2012-05-04T21:25:39.903
> 
> 标签：heroku, state

我用过：

*heroku 创建*

创建一个 Heroku 应用程序，并成功地将其推送/拉入/输出一个单独的 github 存储库。

但我想知道：

heroku 在哪里存储我的应用程序的名称？在空目录中，不会产生任何新文件。

因此，heroku 是否 100% 完全依赖 git 来管理应用程序的整个状态？或者是否有一些存储在本地机器上的安全/等本地信息。

**如果是这种情况，heroku create 命令的“目的”是什么 - 它是否只是创建一个新的 url 并将其注册到 heroku 云？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:39:01.190

是的，当你运行`heroku create`它时，它会在 Heroku 上创建应用程序，然后在你的 git repo 中添加 heroku git remote。`git remote -v`本地将显示这一点。

然后，当您使用 heroku CLI 时，它会从为您添加的`heroku`遥控器中提取应用程序的名称。`heroku create`

如果您选择不用`heroku`作远程名称，我自己更喜欢`production`，`staging`然后您需要使用`--app`heroku 命令的参数来识别您希望与之交互的应用程序。

更新：如果您从[https://github.com/heroku/heroku/blob/master/lib/heroku/command/base.rb](https://github.com/heroku/heroku/blob/master/lib/heroku/command/base.rb)的第 21 行查看，您可以看到它是如何工作的。

# c++ - 拆分 C++ 类声明

> ID：10456362
> 
> 赞同：6
> 
> 时间：2012-05-04T21:26:22.250
> 
> 标签：c++

我想知道是否可以拆分 C++ 类声明

原班

```
 class P
    {
        private: 
           int id;
           //some really secret method
           int secretMethod();
       protected:
           int x;
       public:
           P();
           int getX();
    }; 
```

我想在 .h 中只显示公共和受保护的方法和属性，并在其他地方声明私有的，类的用户看不到它。

通缉类声明：

```
 class P
    {
       protected:
           int x;
       public:
           P();
           int getX();
    }; 
```

编辑：我想要那个：

1.  我可以更改类的实现并且对于类的用户是透明的
2.  用户更容易看到更少的信息而不是更多的信息
3.  如果我更改类的实现，更改私有属性和方法我不想更改类用户的 .h

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:36:46.560

是的，这是可能的，但不是直接的方式。这是你要做的：

我的对象.h：

```
struct my_object {
  void fun();

  my_object();
  my_object(my_object const&);
  ~my_object();

  my_object& operator = (my_object);

protected:
  void pfun();

private:
  struct impl;
  std::unique_ptr<impl> pimpl;
}; 
```

my_object.cpp：

```
struct my_object::impl {
  void fun() { do stuff...}

  void pfun() { do other stuff... }

  int private_member;
};

my_object::my_object() : pimpl(new impl) {}
my_object::my_object(my_object const& o) : pimpl(new impl(*o.pimpl) {}
my_object::~my_object() {}

my_object& my_object::operator = (my_object o) { swap(pimpl, o.pimpl); return *this; }

void my_object::fun() { pimpl->fun(); }
void my_object::pfun() { pimpl->pfun(); } 
```

如您所见，这需要大量工作并且需要堆。一切都在平衡......在你需要的时候使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:20:08.957

如果您的目的是简单地减少标题中的混乱，您可以在类中间包含一个文件：

```
class P
{
#include "P.private_parts"

   protected:
       int x;
   public:
       P();
       int getX();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:37:40.163

像这样的东西？

```
class P
{
private:
    class Impl
    {
    public:
       int id;
       //some really secret method
       int secretMethod();
    };

private:
    Impl* _pimpl;

protected:
    int x;

public:
    P() : _pimpl(new P::Impl()) {}
    ~P() { delete _pimpl; } 
    int getX();

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:44:44.257

不可能真正拆分 C++ 类定义。你所能做的就是实现一个运行时抽象，它将通过使用像 PIMPL 这样令人作呕的黑客来保护源代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-23T15:52:58.100

您可以像这样继承第二部分：

//类P_Hetitage定义

```
class P_Heritage {
      protected:
                int id;
                //some really secret method
                int secretMethod();
} 
```

//P类定义

```
class P : private P_Heritage {
      protected:
                int x;
      public:
             P();
             int getX();
}; 
```

> 下面简单解释继承是如何工作的：
> 
> 继承类 P_Heritage 为：
> 
> **上市**
> 
> 1.  **公共**元素对类 P是**公共的**
> 2.  **受保护**的元素是P 类**私有的**
> 
> **私人的**
> 
> 1.  **公共**元素是P 类**私有的**
> 2.  **受保护**的元素是P 类**私有的**
> 
> P_Heritage 的**私有**元素**不能**被类 P 看到

# php - 从mysql加载数组数组

> ID：10456367
> 
> 赞同：1
> 
> 时间：2012-05-04T21:27:12.140
> 
> 标签：php, mysql, multidimensional-array

基本上我想拿 16 列中的 4 列；id、用户名、国家、标志更新；在我的桌子上，并用它们制作一个数组。

[mysql表](http://www.ip-programs.webatu.com/images/Untitled.png)

我对这个*概念*有一个基本的掌握，抓住一行并放在一个数组中，然后是下一个，依此类推。然后将数组放入数组中。

**只有一个问题。我完全不知道该怎么做。** 我刚开始学习php和mysql，所以请耐心等待。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:32:29.877

它应该为您自动执行此操作：

```
$query = mysql_query("SELECT `id`,etc");
while( $row = mysql_fetch_assoc( $query ) )
{
  echo $row['id'];
  echo $row['etc'];
} 
```

这将为您提供“关联数组”的每一行。或者，您可以制作一个大的关联数组：

```
$bigArray = array();
$query = mysql_query("SELECT `id`,etc");
while( $row = mysql_fetch_assoc( $query ) )
{
  $bigArray[] = $row;
}

print_r($bigArray); 
```

# c# - 基于站点/URL 的 ASP.NET MVC 角色授权

> ID：10456368
> 
> 赞同：1
> 
> 时间：2012-05-04T21:27:19.793
> 
> 标签：c#, asp.net, .net, asp.net-mvc, iis

我正在创建一个将部署到不同站点（例如 red.domain.com、blue.domain.com 等）的 Web 应用程序。我希望不同的角色可以访问不同的站点（例如，“red”角色可以访问 red.domain.com）。

目前我正在使用控制器范围的身份验证（例如，[Authorize(Roles = "red")]）。当我将应用程序部署到站点时，我必须更改每个控制器上的角色（例如从“红色”到“蓝色”），这看起来很荒谬。

有人对我如何简化这个有任何想法吗？也许我可以在 IIS 站点本身上创建一个自动应用正确角色的设置？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:44:33.780

可能是依赖注入的好地方。像[StructureMap](http://docs.structuremap.net/)这样的库允许您在 web.config 中定义类型映射（我假设每个站点都有一个 web.config）

所以，如果你有`RedController`和`BlueController`，它们都实现了一个通用接口`IColourfulController`，它看起来像这样：

```
<!-- red web.config-->
 <DefaultInstance
      PluginType="IColourfulController, [assembly name]"
      PluggedType="RedController,  [assembly name]" />

<!-- blue web.config-->
 <DefaultInstance
      PluginType="IColourfulController, [assembly name]"
      PluggedType="BlueController,  [assembly name]" />

// when you need the controller
IColourfulController controller = 
    ObjectFactory.GetInstance<IColourfulController>(); 
```

两个站点都可以使用相同的代码来获取控制器，但 web.config 说明它是蓝色还是红色。

# ios - iOS：将图像与图像进行比较

> ID：10456378
> 
> 赞同：1
> 
> 时间：2012-05-04T21:28:05.940
> 
> 标签：ios, image-processing, image-segmentation, image-comparison

我正在寻找一些有趣的东西，但不确定它在 iOS 中是否可行。理想情况下，我想用 iPhone 为任何一棵树拍照，并想认出它是什么树！这超出了范围，但如果有人建议我这样做，我会很乐意进行研究。接下来，我确定了拍摄叶子照片并将该叶子与 iPhone 上存储的 1000 片叶子进行比较的问题。仍然不确定是否有准确的方法来进行这种比较。如果我们得到 70% 左右的匹配，我很好！任何帮助，将不胜感激。谢谢。

# tomcat6 - 在 apache 2.2 中设置虚拟主机

> ID：10456379
> 
> 赞同：0
> 
> 时间：2012-05-04T21:28:14.930
> 
> 标签：tomcat6, apache2.2

我有 apache 2.2 和 mod_jk 坐在两台 tomcat 6 服务器前面。（都在同一个盒子上，一个 IP 地址） 我正在尝试将 aaa.test.com 的请求定向到一个 tomcat 服务器，并将 bbb.test.com 的请求定向到另一个。我在 htpd.conf 文件中定义了两个虚拟主机。我遇到的问题是所有请求，无论 URL 是什么，都会转到 htpd.conf 文件中首先定义的虚拟主机。如果我只定义了一个，任何一个都可以正常工作。

htpd.conf 中的设置：

```
LoadModule jk_module modules/mod_jk.so
JkWorkersFile       "C:/Apache/Apache2.2/conf/workers.properties"
JkLogFile           "C:/logs/jkmount/mod_jk.log"
JkLogLevel          info

<VirtualHost *>
    ServerName    aaa.test.com
    JkMountFile   "C:/Apache/Apache2.2/conf/uriworkermap-aaa.properties"
</VirtualHost>

<VirtualHost *>
    ServerName    bbb.test.com
    JkMountFile   "C:/Apache/Apache2.2/conf/uriworkermap-bbb.properties"
</VirtualHost> 
```

工人属性：

```
worker.list=aaa,bbb

worker.aaa.type=ajp13
worker.aaa.host=srv1.domain.int
worker.aaa.port=8109

worker.bbb.type=ajp13
worker.bbb.host=srv1.domain.int
worker.bbb.port=8109 
```

如果 A 是第一个，我会在 mod_jk.log 中看到：

```
[Fri May 04 15:35:03 2012] aaa aaa.test.com 0.003906 
```

如果我更改顺序：

```
[Fri May 04 15:53:43 2012] bbb bbb.test.com 0.011718 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:32:15.063

您可能想使用 NameBasedVirtual Hosting：

因此，您的 Apache 配置应如下所示：

```
NameVirtualHost *:80
<VirtualHost *:80>
ServerName    aaa.test.com
JkMountFile   "C:/Apache/Apache2.2/conf/uriworkermap-aaa.properties"
</VirtualHost>

<VirtualHost *:80>
ServerName    bbb.test.com
JkMountFile   "C:/Apache/Apache2.2/conf/uriworkermap-bbb.properties"
</VirtualHost> 
```

# django - 如何使用 Cherokee 在主服务器的相同 IP 但不同端口上运行虚拟服务器？

> ID：10456381
> 
> 赞同：0
> 
> 时间：2012-05-04T21:28:20.580
> 
> 标签：django, cherokee, virtual-server

当我安装了 Cherokee 服务器并且我只有一个 IP 地址时，我需要知道如何创建一个可以访问的虚拟服务器，例如：

```
MY_SAME_IP_CHEROKEE:7000 
```

我只想更改端口，并且希望能够使用 Cherokee 使用相同的 IP 但使用不同的**端口**创建任何虚拟服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:52:35.037

您可以使用 中的“常规”配置设置来配置 Cherokee 服务器将侦听的端口`cherokee-admin`。开始`cherokee-admin`单击`General`屏幕顶部的图标后，单击`Ports to listen`选项卡并添加其他端口。完成此操作后，您就可以通过`vServers`屏幕顶部的图标相应地配置或添加虚拟服务器，并将它们与您正在使用的给定 IP 地址或主机名相关联。

默认情况下，所有虚拟服务器都可能用于您配置 Cherokee 侦听的端口。因此，您可能需要为您的虚拟服务器行为配置规则，以相应地检查传入的 IP 地址或端口。

# oracle - Oracle：限制“其他用户”可见

> ID：10456383
> 
> 赞同：3
> 
> 时间：2012-05-04T21:28:36.243
> 
> 标签：oracle, security, permissions

我是管理新手，并试图提高 Oracle 数据库的安全性。

目前，非特权用户可以通过在数据库导航树中展开“其他用户”图标来查看 SQL Developer 中所有其他用户的列表。

一个人如何限制权限，以便用户只能看到那些授予他们对某个对象的权限的（其他）用户（而不是所有用户，无论是否授予了权限）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:38:03.253

你可能不能（至少不合理）。SQL Developer 之类的工具将查询`ALL_USERS`以获取用户列表，并将数据库中的所有用户显示给任何能够登录的用户。A 知道用户 B 存在是否真的存在安全风险如果 A 看不到关于 B 的任何其他信息？

虽然我强烈建议不要这样做，但您可以通过`ALL_USERS`在非特权用户的架构中创建一个视图（或为不同架构中的视图创建私有同义词）来解决该问题，该视图具有相同的结构`ALL_USERS`但数据较少. 由于大多数工具不限定数据字典表的名称`SYS.ALL_USERS`而不仅仅是`ALL_USERS`，所以这个技巧通常有效。不过也有很大的风险。当一些安装脚本期望数据字典是“正常的”时，不可避免地会出现意想不到的缺点，最终有人会使用完全限定数据字典表名的工具等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:38:53.423

可能是 SQL Developer 查询表（或我不记得的视图）`all_users`。因此，您将需要撤销此授权（作为 sysdba）：

```
revoke select on ALL_USERS from PUBLIC; 
```

并将其授予您要允许选择的用户。

编辑：

我同意@Justin Cave 的回答。这有风险，而且，他提出了一个很好的问题：

> 如果 A 看不到关于 B 的任何其他信息，那么 A 知道用户 B 的存在真的会带来安全风险吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T19:04:23.440

根据您的问题：如果 A 看不到有关 B 的任何其他信息，那么 A 知道用户 B 的存在是否真的存在安全风险？

我认为是的，如果用户 A（非特权）知道 B 的存在，它可能会尝试连接（蛮力）并且：选项 a：A 成功，B 是特权用户选项 b：A 失败，因为 B 有一个强密码并且对用户 B 有一些配置文件限制，在 A 多次尝试以 B 身份连接后，用户 B 被锁定，这可能是拒绝服务的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-11T09:44:11.480

没有系统权限的用户，角色为“AUTHENTICATEDUSER”和“CONNECT”，可以正常登录并访问自己的对象，但不能选择其他用户，也不能在SQL Developer中展开“Other Users”。

# css - 在 td 中选择 div

> ID：10456387
> 
> 赞同：2
> 
> 时间：2012-05-04T21:28:52.797
> 
> 标签：css

如果我在 a 中有几个`<div>`s `<td>`，我可以选择每个吗？

例如，我想让第一个向左浮动，第二个向右浮动。是否可以仅使用 CSS？

```
.divE:first-child { float:left; }
.divE:last-child  { float:right; } 
```

HTML

```
<table id="myTbl" cellpadding="0" cellspacing="0">
    <tr>
        <td>
        <div class="red">asdasd</div>
        <div class="divE"></div>
        <div class="divE"></div>
        content
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:34:54.970

你可以试试这个：

`:nth-child(2)`

但是您使用的是 CSS3，因此请务必根据需要使用您网站的用户来检查您的浏览器兼容性：

[http://caniuse.com/#search=nth](http://caniuse.com/#search=nth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:06:08.950

是的 ：）

您可以将 .divE 类默认设置为向左浮动，然后您可以通过使用相邻兄弟选择器定义，当 divE 类的 div 紧跟 divE 类的另一个 div 时，它应该像这样向右浮动：

```
.divE {
    float:left;
}

.divE + .divE {
    float: right !important;
} 
```

但是给每个 div 一个 id，然后为每个设置浮动不是更容易吗？或者只是将 .floatRight 或 .floatLeft 类应用于 div，然后更改这些类的浮点数？通过这种方式，您可以重用这些类。

如果您将 HTML 更改为：

```
<table id="myTbl" cellpadding="0" cellspacing="0">
<tr>
    <td colspan="3" width="25%">
    <div class="red">asdasd</div>
    <div class="divE floatLeft"></div>
    <div class="divE floatRight"></div>
    content
    </td>
</tr> 
```

并像这样添加 CSS：

```
.floatLeft {
float: left;
}

.floatRight {
float:right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:34:58.407

`:nth-child`很神奇。

```
td div.divE {
    float: left;
}

td div.divE:nth-child(2n) { /* all even divs */
    float: right;
}

/* or just use "even" */
td div.divE:nth-child(even) {
    float: right;
} 
```

适用于所有真正的浏览器。意思是，没有IE8及以下。

更多信息：[http ://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:35:23.253

在这种情况下`:first-child`，必须是该选择器下的第一个元素`<td>`才能起作用（相反`<div class="red">`，它`.red:first-child`会起作用）

你可以改为使用[`:nth-child`](http://www.w3.org/TR/selectors/#nth-child-pseudo)

```
.divE:nth-child(2) { float:left; }
.divE:nth-child(3) { float:right; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T21:43:14.137

我在 html 中添加了一个 div 元素，它可以工作。

css

```
.divE:last-child  { color:red; }
.divE:first-child { color:blue; } 
```

html

```
<td>
<div class="red">asdasd</div>
<div><div class="divE">blue</div></div>
<div class="divE">red</div>
content
</td> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T21:54:54.650

使用`:first-child`选择器的组合并`sibling selector`允许您像这样定位第二个`div`：

```
.red{
    float: left;
}
.divE{
    float: left; //this is for the second .divE
}
.red + .divE{
    float: right; //this is for the first .divE
} 
```

这样的解决方案从 IE7 开始有效。

# javascript - jQuery Google API 后备：为什么 document.createElement() 不起作用而 document.write() 工作正常？

> ID：10456390
> 
> 赞同：1
> 
> 时间：2012-05-04T21:29:13.590
> 
> 标签：javascript, jquery, cdn, fallback

我想从 Google CDN 使用 jQuery，并且我还想实施一个后备策略，以防 jQuery 无法从 Google 加载。当然，我知道一个很好的解决方案，它总是对我有用并且仍然有效：

```
<html>

<head>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js" type="text/javascript"></script>

  <!-- fallback: load local jq -->
  <script type="text/javascript">
    if (typeof jQuery == 'undefined'){
      document.write(unescape("%3Cscript src='/js/jquery/jquery-1.7.2.js' type='text/javascript'%3E%3C/script%3E"));
    }
  </script>

  <script type="text/javascript">
    alert(jQuery); // something != undefined => works as expected
  </script>

</head>

<body></body>

</html> 
```

现在我想知道为什么这在这里不起作用：

```
<html>

<head>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js" type="text/javascript"></script>

  <!-- fallback: load local jq -->
  <script type="text/javascript">

    if (typeof jQuery == 'undefined'){ 

      var script  = document.createElement('script');
      script.type = 'text/javascript';
      script.src  = '/js/jquery/jquery-1.7.2.js';        

      //this seems not to work :-(
      document.getElementsByTagName('head')[0].appendChild(script);
    }
  </script>

  <script type="text/javascript">
    alert(jQuery); // undefined => but why????????
  </script>

</head>

<body></body>

</html> 
```

我知道问题在于，如果我使用 document.createElement('script') 然后将刚刚创建的脚本元素添加到通过 DOM 操作（没有 document.write() ），新元素确实添加到了 DOM，但此时它还没有加载和执行。相反，它会在稍后的某个时间执行。但我真的希望头部中的任何脚本标签都被同步加载和执行。这似乎不适用于我上面描述的情况。

但另一方面，第一个例子工作得很好——所以 document.write() 似乎符合我的预期——但为什么呢？

# javascript - Greasemonkey 脚本仅在页面重新加载时运行

> ID：10456392
> 
> 赞同：7
> 
> 时间：2012-05-04T21:29:29.440
> 
> 标签：javascript, greasemonkey, rally

我正在编写一个 Greasemonkey 脚本，以将一些文本转换[为 Rally](http://www.rallydev.com)页面上的链接。该脚本*仅*在我重新加载页面时才能正常工作。如果我以任何方式（链接、浏览器前进/后退）导航到页面，脚本不会运行，尽管 Greasemonkey 菜单在底部显示了我的脚本，并带有复选标记。

这是一个示例网址：

```
https://rally1.rallydev.com/#/4745909548/detail/userstory/6138899084/changesets 
```

我的匹配规则：

```
/^https://.*\.rallydev\.com/.*/changesets$/ 
```

我不知道哈希是否导致问题，但是当我重新加载时一切都很好。

不知道从这里去哪里。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T04:31:42.927

不可能确定发生了什么，因为目标页面位于付费墙后面，并且他们所谓的“免费试用”机制会破坏大块。

以下是当前行为的一些可能原因：

1.  初始请求是不安全的 (http)，但会重定向到安全页面 (https)。
2.  第一个页面加载会重定向到实际页面。
3.  目标内容位于`<iframe>`不会立即加载的内容中。
4.  目标内容是 AJAXed-in。
5.  我们需要查看实际页面才能弄清楚的异国情调。
6.  初始 URL 并没有真正以`changesets`.

另外，养成在正则表达式*中间*转义`/`s的习惯。它并不总是需要，但如果你不这样做，它最终会在 [审查] 中咬你。所以脚本应该使用：

 *```
// @include  /^https:\/\/.*\.rallydev\.com\/.*\/changesets$/ 
```

开始，但见下文。

解决步骤：

1.  更改您`@include`的帐户以考虑 http 和 URL 中尾随空格或斜杠的可能性。采用：

    ```
    // @include  /^https?:\/\/.*\.rallydev\.com\/.*\/changesets(?:\s|\/)*$/ 
    ```

2.  [使用Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)检查页面。内容是 AJAX 处理的吗？它在一个`<iframe>`？如果是这样，iframe URL 是什么（如果有）？
3.  要同时检测 AJAX 和/或重定向，请使用[Firebug 的 Net 面板](http://getfirebug.com/wiki/index.php/Net_Panel)和/或[Wireshark](http://www.wireshark.org/)。
4.  如果可能，请向我们提供登录凭据，以便我们看到有问题的页面。
5.  对有问题的页面进行快照（通过 Firefox 保存）并链接到[Pastebin.com](http://pastebin.com/)中的 HTML 和 JS 。
6.  考虑使用如下代码：

    ```
    if (window.top != window.self) {
        //--- Don't run on/in frames or iframes.
        return;
    } 
    ```

    让脚本仅在（或不在）iframe 中运行（如果适用）。

如果问题是由 AJAX 延迟（或加载新内容）引起的，请使用[“Fire Greasemonkey script on AJAX request”](https://stackoverflow.com/q/8281441/331508)中所示[的`waitForKeyElements()`实用程序](https://gist.github.com/2625891)来解决此问题。*

# iphone - 为什么 iAd 事件永远不会被触发

> ID：10456393
> 
> 赞同：0
> 
> 时间：2012-05-04T21:29:29.543
> 
> 标签：iphone, objective-c, iad

所以我遵循了一些关于如何集成 iAds 的教程，最后设法让它工作，但只是视觉上的。我的意思是我在我的 iPhone 应用程序上看到了广告，我可以点击它并查看测试信息，但没有一个事件被触发。下面是我的事件处理程序代码，有什么我应该检查的吗？

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    NSLog(@"--- bannerViewDidLoadAd ---");
    NSLog(@"self.isBannerVisible: %@", self.isBannerVisible);

    if(!self.isBannerVisible)
    {
        [UIView beginAnimations:@"animatedAdBannerOn" context:NULL];

        self.banner.frame = CGRectOffset(self.banner.frame, 0.0, self.bannerVisibleY);
        self.header.frame = CGRectOffset(self.header.frame, 0.0, self.headerWithBannerY);

        [UIView commitAnimations];
        self.isBannerVisible = YES;
    }
}

- (void)bannerView:(ADBannerView *)banner 
    didFailToReceiveAdWithError:(NSError *)error
{
    NSLog(@"--- bannerView ---");
    NSLog(@"error: %@", error);
    NSLog(@"self.isBannerVisible: %@", self.isBannerVisible);

    if(self.isBannerVisible)
    {
        [UIView beginAnimations:@"animatedAdBannerOff" context:NULL];

        self.banner.frame = CGRectOffset(self.banner.frame, 0.0, self.bannerHiddenY);
        self.header.frame = CGRectOffset(self.header.frame, 0.0, self.headerNoBannerY);

        [UIView commitAnimations];
        self.isBannerVisible = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:44:04.023

放入 header 仅声明此 ViewController 符合 ADBannerViewDelegate 协议。您仍然需要实际设置 ADBannerView 的委托属性。如果您使用的是 .nib，请控制从横幅拖动到文件所有者并选择委托。

通常，如果您的委托回调没有被调用，这就是问题所在。

# python - 在 python 中使用 google protobuffers 反射

> ID：10456399
> 
> 赞同：5
> 
> 时间：2012-05-04T21:30:14.727
> 
> 标签：python, protocol-buffers

如何以编程方式通过名称为 python 中的 google protobuffer 对象设置字段值。我已经检查了文档和 API，但对我来说并不清楚，而且我找不到任何示例。

我想做类似的事情：

```
protoBufObj.set_field('foo', 42) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:13:42.257

如果您有任何可以工作的 Python 对象`x.foo = 42`，`setattr(x, 'foo', 42)`则应该具有完全相同的效果。这是一个内置的 Python 函数，与 protobuffers 无关。

# mysql - 子新手的 SQL 脚本

> ID：10456400
> 
> 赞同：0
> 
> 时间：2012-05-04T21:30:27.750
> 
> 标签：mysql, sql

今天对我来说是重要的一天：我在我的服务器上安装了 MySQL，创建了我的第一个数据库，我的第一个表，运行我的第一个查询，将我的第一个 .txt 作为表导入。现在我被困住了。

好的，所以我学会了使用 LOAD DATA INFILE ......

我在一个文件夹中有数千个文件，我想在上面运行相同的命令。我该怎么做呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T21:41:17.453

我需要更多信息才能提供帮助。

1.  您使用的术语“SQL Server”通常指的是 Microsoft 的 SQL Server，但您的问题被标记为 mysql。你用的是哪两个？

2.  你的文件格式不一样吗？他们都会加载到同一张桌子上吗？

3.  您使用的是什么操作系统（舒适）？

如果您在 Linux 上使用 MySQL，那么只需使用 cat 将所有文件合并为一个大文件并加载该文件。

# android - MonoTouch + MonoDroid：项目文件可以放在同一个文件夹中吗？

> ID：10456403
> 
> 赞同：0
> 
> 时间：2012-05-04T21:30:39.873
> 
> 标签：android, ios, xamarin.ios, monodevelop, xamarin.android

我`common C# code base`要与 MonoTouch (iOS) 和 MonoDroid (Android) 分享

我可以/应该将`common.android.csproj`和`common.iOS.csproj`放在同一个文件夹中吗？两者都想制作 bin 文件夹等，可能有问题？

像这样？：

![带有 2 个 csproj 的文件夹](../Images/0038f0d7db0188ded586bcf535dba422.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:35:18.053

是的。你绝对可以。

此外，我认为共享代码是一个很好的实践，其中每个文件都在两个项目文件之间共享——这就是我在以下情况下所做的：

[https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference/Cirrious.Conference.Core](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference/Cirrious.Conference.Core)

* * *

对于项目内容略有不同的情况 - 例如，一个项目包含一些特定于 android 的文件，那么我更喜欢使用单独的文件夹并链接文件的方法。这是我在许多 Windows 项目中看到的一种方法 - 例如，查看 mvvmlight 的源代码树[-](http://mvvmlight.codeplex.com/SourceControl/changeset/view/a9071d84ec65)其中 GalaSoft.MvvmLight (NET35) 是主文件夹，其他文件夹都链接到其内容并添加自己的特定文件。

![mvvmlight 结构](../Images/17244f17e8a233e5e15d4e804d05ac3b.png)

* * *

在接下来的几周内，也有希望为 monodevelop 中的共享代码提供一些可移植库支持。

当这种情况发生时，我打算转向使用 Touch 和 Droid 的可移植库——此时我根本不需要共享项目文件。

# objective-c - didSelectRowAtIndexPath 有几个部分

> ID：10456405
> 
> 赞同：0
> 
> 时间：2012-05-04T21:30:44.223
> 
> 标签：objective-c, xcode, uitableview, ios5

我的表格视图中有 4 个部分，当按下一行时，我希望在该行中添加一个复选标记。使用下面的代码，如果我选择一行，其他一些行也会被选中，这是不希望的。我猜它与几个部分有关，但我不知道如何检查或修复它。我的 _allTagsList 是一个带有 4 个字典的 NSMutableArray。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
     NSDictionary *dictionary = [_allTagsList objectAtIndex:indexPath.section];
     NSArray *array = [dictionary objectForKey:@"Tags"];
     NSString *selectedTag = [array objectAtIndex:indexPath.row];

     if([tableView cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark)
     {
         [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryNone;
     }
     else
     {
         [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryCheckmark;
     }

     [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:36:58.157

您需要存储选择了哪些 indexPaths，然后在您的 cellForRowAtIndexPath 函数中，您还需要根据这些保存的 indexPaths 设置附件类型。如果您更改单元格上的附件类型然后滚动，因为该单元格被回收，附件类型仍将保持选中状态。

# javascript - jQuery .load 从另一个页面加载 div 的一些内容

> ID：10456407
> 
> 赞同：0
> 
> 时间：2012-05-04T21:30:55.640
> 
> 标签：javascript, jquery, ajax

我想创建一个基于用户交互的模块，将使用该`jquery.load`方法显示产品类别中的产品。

我可以让目标 div 从产品页面加载产品列表的全部内容，但是有没有办法将远程（可以这么说）div 的子元素数量限制为 8 个？

简单地说：

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery(".cat1").click(function() {
alert('click');
jQuery(".loadhere").load("cat1.php #product_list", function() { alert('loaded') }
);
})
});
</script> 
```

我希望它只加载在#product_list 中找到的前 8 个 div——这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:45:35.113

我建议更改要使用的代码`ajax`，然后在回调中自己处理响应。像这样的东西：

```
$(data).find("#product_list .product").slice(0,9).appendTo(".loadhere"); 
```

# javascript - 使用 getJSON 时未设置 JavaScript 中的全局变量？

> ID：10456410
> 
> 赞同：0
> 
> 时间：2012-05-04T21:31:08.280
> 
> 标签：javascript, jquery, ajax

这是我的代码。如果我通过“谷歌检查员”检查“恶作剧”变量，一切正常。但是最后一行的“警报”显示了一个 0 大小的数组！我在处理局部/全局变量？

```
<script type="text/javascript">
(function() { 

 pranks = [];

function getAllPranks(){

    $.getJSON('list.json', function(data) {

      $.each(data['pranks'], function(key, val) {
        pranks.push(val);
      });

    });

}

 $(document).ready(function(){

    getAllPranks();

    alert(pranks.length);

 });

 }());
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:34:22.213

将其更改为：

```
$.getJSON('list.json', function(data) {
  $.each(data['pranks'], function(key, val) {
    pranks.push(val);
  });
  alert(pranks.length); /* pranks has data now */
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:49:36.273

获取您的代码：

```
<script type="text/javascript">
(function() { 
    function getAllPranks( callback ) {
        $.getJSON('list.json', function(data) {
            $.each(data['pranks'], function(key, val) {
                pranks.push(val);
            });
            callback( pranks );
        });
    }

    $(document).ready(function(){
        getAllPranks( function( pranks ) {
            alert(pranks.length);
        } );
    });
}());
</script> 
```

`$.getJSON`是异步的。这意味着`function(data)`一旦结果返回，就会执行回调函数 ( )。当您执行`alert(pranks.length)`时，该函数尚未执行，因为此时响应尚未返回。

# ruby - 刀独奏开始配置厨师独奏不起作用

> ID：10456411
> 
> 赞同：-1
> 
> 时间：2012-05-04T21:31:29.267
> 
> 标签：ruby, rubygems, ubuntu-11.04, chef-infra

[Knife solo](https://github.com/matschaffer/knife-solo)是 mat 的刀插件，我在[这里](http://www.youtube.com/watch?v=1G6bd4b91RU)看到了一个很好的截屏视频 在安装了 ruby​​、gem 和其他依赖项后，我做了：

```
sudo gem install knife-solo

Successfully installed knife-solo-0.0.8
1 gem installed
Installing ri documentation for knife-solo-0.0.8...
Installing RDoc documentation for knife-solo-0.0.8... 
```

然后我得到以下信息：

```
sudo knife configure -r . --defaults
/usr/lib/ruby/1.8/optparse.rb:1450:in `complete': invalid option: --defaults (OptionParser::InvalidOption)
    from /usr/lib/ruby/1.8/optparse.rb:1448:in `catch'
    from /usr/lib/ruby/1.8/optparse.rb:1448:in `complete'
    from /usr/lib/ruby/1.8/optparse.rb:1261:in `parse_in_order'
    from /usr/lib/ruby/1.8/optparse.rb:1254:in `catch'
    from /usr/lib/ruby/1.8/optparse.rb:1254:in `parse_in_order'
    from /usr/lib/ruby/1.8/optparse.rb:1248:in `order!'
    from /usr/lib/ruby/1.8/optparse.rb:1339:in `permute!'
    from /usr/lib/ruby/1.8/optparse.rb:1360:in `parse!'
    from /usr/lib/ruby/1.8/mixlib/cli.rb:162:in `parse_options'
    from /usr/lib/ruby/1.8/chef/knife.rb:91:in `find_command'
    from /usr/lib/ruby/1.8/chef/application/knife.rb:115:in `run'
    from /usr/bin/knife:24 
```

我忽略了上述内容并尝试了：

```
 knife kitchen mychefrepo
[Sat, 05 May 2012 02:55:21 +0530] FATAL: Cannot find sub command for: kitchen mychefrepo
Sub-Command: client bulk delete REGEX (options)

Sub-Command: client create CLIENT (options)
    -a, --admin                      Create the client as an admin
    -f, --file FILE                  Write the key to a file
..... and the list contnues to show all other options. 
```

我在 ubuntu 11.04 上。请让我知道什么是错的，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:43:38.600

Chef 0.10 中添加了刀插件。升级`sudo gem install chef`。0.8 已经过时了。

# java - java 和 .NET webservice 互操作性：在 SOAP 中输出只有 2 位的小数

> ID：10456414
> 
> 赞同：0
> 
> 时间：2012-05-04T21:31:45.333
> 
> 标签：java, .net, serialization, soap

我正在从 .NET 客户端向 java webservice 进行 webservice 调用。Web 服务请求消息中的字段之一是小数。

它是使用代理请求对象设置的：

```
decimal value = 3.0
request.DecimalValue = value ;
javaService.Process(request); 
```

当消息被序列化为soap 时，DecimalValue 设置为3.000000。然而，java web 服务出错了，因为它只需要小数点后 3 位数字。关于如何解决这个问题的任何想法？我无法控制 java web 服务。

添加：

java webservice 的模式将 DecimalValue 定义为

```
<xs:simpleType name="DecimalValue">
 <xs:restriction base="xs:decimal">
  <xs:totalDigits value="9" />
  <xs:fractionDigits value="3" />
  <xs:pattern value="\d{1,5}\.\d{3}" />
 </xs:restriction> 
```

通过添加对端点的引用来生成 Web 服务代理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:41:37.580

鉴于此示例，它是使用您提供的简单 xsd 创建的：

```
 [System.Runtime.Serialization.DataMemberAttribute(Order=0)]
    public decimal DecimalValue; 
```

我会将其更改为以下内容：

```
 [System.Runtime.Serialization.DataMemberAttribute(Order=0, Name="DecimalValue")]
    private string DecimalValueFormatted;
    private decimal decimal_value_int;

    public decimal DecimalValue {
        get { return decimal_value_int; }
        set 
        { 
            decimal_value_int = value; 
            DecimalValueFormatted = String.format("{0:N2}", value);
        }
    } 
```

注意：这有点像 hack，如果你必须为很多类型做这件事，你会想要创建你自己的格式属性，你可以把它放在数据成员上，并为检查你的属性的小数添加自定义类型绑定。我实际上还没有完成属性方法，所以这可能比听起来更困难。

# ruby-on-rails-3 - 破译 Rails 3 代码？

> ID：10456419
> 
> 赞同：1
> 
> 时间：2012-05-04T21:32:12.590
> 
> 标签：ruby-on-rails-3

我雇了一个 oDesk 伙计为我写一些代码，但后来他消失了。我一直在试图破译它，因为它不起作用，而且我只是一个 Rails 爱好者，所以嵌套属性现在有点超出我的范围。

我有一个 sla，每个会计年度有 12 个周期的 period_state（红色、黄色、绿色）。用户需要在每个周期结束时设置他的 sla 的 period_state。我的创建/更新表单引发错误。

如果你能帮我破译发生了什么，我会很感激你朝着正确的方向前进！我特别不知道更新方法中p“ ****** ”的东西是什么......？如果您能提供帮助，请提前致谢 - 很抱歉这篇长文。

```
class Sla < ActiveRecord::Base
  has_many :period_states, :dependent => :destroy
  accepts_nested_attributes_for :period_states, :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }

class PeriodState < ActiveRecord::Base
  belongs_to :sla

class PeriodStatesController < ApplicationController
  def index
    @sla = Sla.find(params[:sla_id])
    @period_states = @sla.period_states
    #@periods = Period.where("fiscal_year = ?", @sla.fiscal_year)
    respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @period_states }
    end
  end

  def new
    @sla = Sla.find(params[:id])
    @period_states = @sla.period_states
    @period_state = PeriodState.where("sla_id = ?", @sla.id)
    @periods = Period.where("fiscal_year = ?", @sla.fiscal_year)
    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @period_state }
    end
  end

  def create
    @sla = Sla.find(params[:sla_id])
    @period_states = @sla.period_states
    if @period_states.size > 0
      params[:sla][:period_states_attributes].each{|ps|
        @period_state = PeriodState.find(ps[1][:id])
        @period_state.period_state = ps[1][:period_state]
        @period_state.save
      }
      respond_to do |format|
        format.html { redirect_to(sla_period_states_path(@sla), :notice => 'Period state was successfully created.') }
      end
    else
      respond_to do |format|
        if @sla.update_attributes(params[:sla])
          format.html { redirect_to(sla_period_states_path(@sla), :notice => 'Period state was successfully created.') }
          format.xml  { render :xml => @period_state, :status => :created, :location => @period_state }
        else
          format.html { render :action => "new" }
          format.xml  { render :xml => @period_state.errors, :status => :unprocessable_entity }
        end
      end
    end
  end

  def update
    p "****************************"
    p params[:sla][:period_states_attributes].reject_if { |attrs| attrs["state_id"].blank? }
    p"**********************"
    @sla = Sla.find(params[:sla_id])
    params[:sla][:period_states_attributes]
    respond_to do |format|
      if @sla.update_attributes(params[:sla])
        format.html { redirect_to(sla_reports_path(@sla), :notice => 'Period state was successfully updated.') }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @sla.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

period_state/new.html

```
<% if @period_state.size > 0 %>

  <%= render 'edit' %>
  <% else %>
  <%= render 'form' %>
  <% end %> 
```

period_state/_edit.html

```
<table>
      <tr>
        <th>Period</th>
        <th>State</th>
      </tr>
      <% @periods.each_with_index do |p, i| %>
        <%#= p.id %>
      <% @period_state = PeriodState.find_by_sla_id_and_period_id(@sla.id, p.id) %>
        <%#= p.inspect %>
        <%= fields_for "sla[period_states_attributes][#{i.to_i}]", @period_state do |ps| %>
          <tr>
            <td><%= p.pe_number %> <%= ps.hidden_field :period_id, :value => p.id %> </td>
            <td><%= ps.collection_select(:state_id, State.all, :id, :state, :order => "state" , :include_blank => true ) %></td>
          </tr>
        <% end %>
      <% end %>
    </table>
  </div>
  <p>
  <div class="actions">
    <%= f.submit "Enter/Edit Period States" %>
  </div> 
```

period_state/_form.html

```
<table>
      <tr>
        <th>Period</th>
        <th>State</th>
      </tr>
      <% @periods.each_with_index do |p, i| %>
        <%= fields_for "sla[period_states_attributes][#{i.to_i}]", PeriodState.new do |ps| %>
          <tr>
            <td><%= p.pe_number %> <%= ps.hidden_field :period_id, :value => p.id %> </td>
            <td><%= collection_select(:period_state, :state_id, State.all, :id, :state, :order => "state" , :include_blank => true ) %></td>
          </tr>
        <% end %>
      <% end %>
    </table>
  </div>
  <p>
  <div class="actions">
    <%= f.submit "Enter/Edit Period States" %>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:27:39.840

我建议查看嵌套属性的 RailsCasts：

[嵌套属性上的 RailsCasts](http://railscasts.com/episodes?search=nested+attributes)

`p`是在内核模块中定义的打印方法。

参见：[http ://ruby-doc.org/core-1.9.2/Kernel.html](http://ruby-doc.org/core-1.9.2/Kernel.html)

# mercurial - 如何自动化 hg bisect --extend 以跟随共同祖先？

> ID：10456420
> 
> 赞同：4
> 
> 时间：2012-05-04T21:32:19.400
> 
> 标签：mercurial

通常，在`hg bisect -c "my command"`我收到一张纸条的结尾，说我应该跑到`hg bisect --extend <ancestor_cset>`更深的地方继续我的二分法。

我正在使用 mercurial 2.1.2。在 mercurial 2.1 之前，我的信息是使用 hg update 而不是 hg bisect --extend

它变得非常烦人，罪魁祸首 cset 就像 10 级深，所以我必须手动执行此命令 10 次`hg bisect --extend <ancestor_cset> && hg bisect -c "my command"`。

有没有办法让 --extend 部分自动化并用二等分进行，直到找到罪魁祸首 cset？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T02:47:53.550

Bisect 不会超出变更集的初始范围。因此，如果您最初将变更集 10 设置为好，而将变更集 20 设置为坏，并且经过几次迭代后发现 cs 12 不好但与 cs 5 合并，则 bisect 将停止。 `--extend`然后用于将范围扩大到最初的 10-20 之外。如果您想搜索整个范围，请将 cs 0 设置为 good 并将 tip 设置为 bad，并且您永远不需要使用 extend。

考虑以下历史。变更集 4 引入了一个“错误”。

```
@  12:8ae1fff407c8:bad6
|
o  11:27edd4ba0a78:bad5
|
o    10:312ba3d6eb29:bad4
|\
| o  9:68ae20ea0c02:good33
| |
| o  8:916e977fa594:good32
| |
| o  7:b9d00094223f:good31
| |
o |  6:a7cab1800465:bad3
| |
o |  5:a84e45045a29:bad2
| |
o |  4:d0a381a67072:bad1
| |
o |  3:54349a6276cc:good4
|/
o  2:4588e394e325:good3
|
o  1:de79725cb39a:good2
|
o  0:2641cc78ce7a:good1 
```

现在，如果我将变更集 7 标记为好，提示为坏，则发现 10 作为第一个坏变更集，但它是一个合并，并建议将搜索扩展到变更集 2（共同祖先）：

```
C:\data>hg bisect -r
C:\data>hg bisect -g 7
C:\data>hg bisect -b tip
Testing changeset 9:68ae20ea0c02 (5 changesets remaining, ~2 tests)
2 files updated, 0 files merged, 0 files removed, 0 files unresolved

C:\data>hg bisect -c check.bat
Changeset 9:68ae20ea0c02: good
Changeset 10:312ba3d6eb29: bad
The first bad revision is:
changeset:   10:312ba3d6eb29
parent:      9:68ae20ea0c02
parent:      6:a7cab1800465
summary:     bad4

Not all ancestors of this changeset have been checked.
Use bisect --extend to continue the bisection from
the common ancestor, 4588e394e325. 
```

但是，如果我将变更集 0 设置为好而提示为坏，它会找到正确的变更集而无需扩展：

```
C:\data>hg bisect -g 0
C:\data>hg bisect -b tip
Testing changeset 6:a7cab1800465 (12 changesets remaining, ~3 tests)
0 files updated, 0 files merged, 0 files removed, 0 files unresolved

C:\data>hg bisect -c check.bat
Changeset 6:a7cab1800465: bad
Changeset 3:54349a6276cc: good
Changeset 4:d0a381a67072: bad
The first bad revision is:
changeset:   4:d0a381a67072
summary:     bad1 
```

# php - 使用 PHP 进行表单评估

> ID：10456423
> 
> 赞同：0
> 
> 时间：2012-05-04T21:32:58.577
> 
> 标签：php, html, forms

我正在使用表单并通过 PHP 对其进行评估。这是我的表单代码：

```
<form id="LU" method="post" action="">
<select name="Login_Select" id="LT">
<option value="Please Select LType" selected="selected">Please Select Login Type</option>
<option value="Std">Student</option>
<option value="Fac">Faculity</option>
</select>
<div style="padding-top:1.5%" id="Login">
<p id="LID">Group ID: &nbsp;<input id="LL" name="Log" type="text"/></p>
<p id="LP">Password:&nbsp; <input id="LTP" name="Password" type="password" /></p>
<p id="Err">Invalid ID Or Password!</p>
<input type="submit" value="Login" />
</form> 
```

在 body 标记中，我有一个这样的 PHP 评估器代码：

```
<?php
if(isset($_POST))
{
    print_r($_POST);
?> 
```

但是一旦页面启动，它就会显示当时为空的 $_POST 数组。

我希望在用户提交表单时显示该数组，以便该数组在文本框中插入值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:35:56.253

要检查是否已发出发布请求，您应该使用：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') 
```

（而不是`if(isset($_POST))`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T21:37:06.313

`$_POST`，作为一个超全局的，总是被设置的。您可能想要检查是否设置了某个键 ( `if(isset($_POST['foo']))`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:39:16.840

您可能只想检查是否发送了提交按钮值。您还缺少`Login`div 的结束标记，但这无关紧要。

形式：

```
<form id="LU" method="post" action="">
    <select name="Login_Select" id="LT">
        <option value="Please Select LType" selected="selected">Please Select Login Type</option>
        <option value="Std">Student</option>
        <option value="Fac">Faculity</option>
    </select>
    <div style="padding-top:1.5%" id="Login">
    <p id="LID">Group ID: &nbsp;<input id="LL" name="Log" type="text"/></p>
    <p id="LP">Password:&nbsp; <input id="LTP" name="Password" type="password" /></p>
    <p id="Err">Invalid ID Or Password!</p>
    <input id="submit_btn" name="submit_btn" type="submit" value="Login" />
</form> 
```

PHP：

```
if(isset($_POST['submit_btn'])){
    var_dump($_POST);
} 
```

# javascript - 从单独的窗口访问 JavaScript 对象

> ID：10456428
> 
> 赞同：1
> 
> 时间：2012-05-04T21:33:26.903
> 
> 标签：javascript, html

我目前正在使用[fullCalendar.js](http://arshaw.com/fullcalendar/docs/usage/)作为我的 Web 应用程序的一部分。

单击日历日期时，会弹出一个窗口，允许用户输入有关日历事件的详细信息并保存它们。

我希望能够从打开的窗口中触发日历对象中的函数。

Javascript 是否有能力从不同的窗口处理对象？

我尝试了许多从不同窗口访问 fullCalendar() 对象的方法，但没有一种方法有效。

像 `$(window.opener.document.body).find('#calendar').fullCalendar('refetchEvents');`

具体来说，我的目标是[`refetchEvents`](http://arshaw.com/fullcalendar/docs/event_data/refetchEvents/)钩子。

到目前为止，没有任何类似的方法，或者它的任何变体......有很多方法可以解决该对象，但没有一种方法可以在单独的文档中引用“实例”。

这里发生了什么？

是否无法从单独的窗口引用我的日历对象？

真的很感谢指点。

编辑 - - - - - - - - -

我刚刚尝试过：

`console.log(window.opener.calendar.fullCalendar())`

这产生了一个有希望的结果，它找到了函数，不幸的是现在它的所有内部引用都搞砸了。

```
Uncaught TypeError: Cannot read property 'eventSources' of undefined
m.fn.fullCalendar:8888/js/fullcalendar/fullcalendar.min.js:110
$.ajax.successhlc.js:892
f.Callbacks.ojquery-1.7.2.min.js:2
f.Callbacks.p.fireWithjquery-1.7.2.min.js:2
wjquery-1.7.2.min.js:4
f.support.ajax.f.ajaxTransport.send.d 
```

除此之外，目前没有任何变化。现在实现一个新功能。

仍在与全球打交道`var calendar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:28:28.100

只看了一眼完整的日历代码......但一般来说尝试一下如何：

在打开的窗口 ( `window.opener`) 中定义一个函数

```
function doRefetchEvents() {
  alert("ok");
  $("#calendar").fullCalender("refetchEvents");
} 
```

然后从打开的窗口中：

```
window.opener.doRefetchEvents(); 
```

另见[MDN 上的 window.opener](https://developer.mozilla.org/en/DOM/window.opener)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:35:03.940

您可以尝试通过字符串化（http://www.json.org/js.html -> JSON）将日历对象存储在 localStorage（https://developer.mozilla.org/en/DOM/Storage#localStorage）中.stringify），然后在另一个窗口中通过使用 JSON.parse 解析来访问对象。

# c# - 从 .net 程序发送电子邮件时遇到问题

> ID：10456430
> 
> 赞同：2
> 
> 时间：2012-05-04T21:33:35.710
> 
> 标签：c#, smtp, smtpclient, system.net.mail, mailmessage

我有一个用 C# 和 Framework 2.0 编写的简单 .net Web 应用程序。

它唯一做的就是调用这个函数：

```
 static void SendMail(string strSubject, string strBody, string strFrom, string strTo, string strHost)
    {
        MailMessage msg = new MailMessage();
        msg.From = new MailAddress(strFrom);
        msg.To.Add(new MailAddress(strTo));

        msg.Subject = strSubject;
        msg.Body = strBody;
        msg.Priority = MailPriority.Normal;

        SmtpClient smtpClient = new SmtpClient();
        smtpClient.Host = strHost;
        smtpClient.Send(msg);
    } 
```

它编译并运行没有错误，但无论我将其发送给谁，我都没有收到电子邮件。

然而，奇怪的是，在我经理的计算机上编译和运行的同一个程序运行良好，并发送了一封电子邮件。

我们都在 Visual Studio 2008 上运行它。

他的电脑和我的唯一区别是他使用的是 Windows XP，而我使用的是 Windows 7。

任何信息都有帮助。我正在寻找我可以检查的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:41:43.643

听起来可能是防火墙问题。您机器上的防火墙或网络上的防火墙。另外，检查您的垃圾文件夹。我知道这些听起来很简单，但它为你的经理工作的事实使它看起来像是一个非代码问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:45:19.113

XP 机器是否可以访问 SMTP 服务器？

您需要向 SMTP 服务器提供 4 个参数才能成功使用 SmtpClient、MailMessage 等。

*   主机="SMTPServerHostName"
*   port="portNumber"（通常使用端口 25）
*   用户名="用户名"
*   密码="密码"

也许 XP PC 无法访问 SMTPServerHostName，或者，如果您使用的是 localhost，也许 XP 工作站没有安装 SMTP。

另一种可能性是，正如 Josh 所说，host:port 被阻塞了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:54:56.400

使用 SmtpClient，您尚未设置凭据或帐户信息，因此当它尝试发送电子邮件时，它无法在没有帐户信息的情况下发送。替换这个：

```
SmtpClient smtpClient = new SmtpClient();
smtpClient.Host = strHost;
smtpClient.Send(msg); 
```

和：

```
SmtpClient smtpClient = new SmtpClient();
smtpclient.Credentials = new NetworkCredentials(email, password);
smtpClient.Host = strHost;
smtpClient.Send(msg); 
```

用您自己的电子邮件和密码替换。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T22:24:12.437

较旧的 XP 机器可能具有 SMTP 功能。我已经看到了这个确切的东西。Windows 7 没有本机 SMTP 功能。我知道我的旧 XP 机器有一个带有 IIS 的 SMTP 服务器，而我现有的发送邮件的程序在 Windows 7 上失败了。我厌倦了在开发环境中与它抗争，只好忍受它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T23:19:13.033

找到了解决方案！

在我的本地 IIS（版本 7）中，有一个名为“SMTP 电子邮件”的图标。打开这个，我发现它设置为“将电子邮件存储在拾取目录中”。这一定是以前使用我电脑的程序员设置的。我将其重置为“将电子邮件发送到 SMTP 服务器”，现在一切正常。

注意：IIS 甚至不需要运行。

# java - 如何处理多个应用程序连接到同一个数据库的 Hibernate create-drop 模式？

> ID：10456431
> 
> 赞同：0
> 
> 时间：2012-05-04T21:33:43.773
> 
> 标签：java, hibernate, jboss7.x

我们设置了开发环境，这样 Hibernate 将在每次应用启动时创建一个新的空数据库：

```
<property name="hibernate.hbm2ddl.auto" value="create-drop"/> 
```

这适用于部署在服务器上的单个应用程序，但在我们的开发环境中，我们通常部署连接到同一数据库的多个应用程序。它们都使用来自应用服务器的相同数据源。

问题是当它们在 JBoss AS7 中启动时，它们是并行部署的，因此两个应用服务器都试图同时创建表。我们得到这样的东西（带有匿名的表和列名）：

```
16:07:25,307 错误 [org.hibernate.tool.hbm2ddl.SchemaExport]（MSC 服务线程 1-13）不成功：创建表 PUBLIC.SOME_TABLE（SOME_COLUMN varchar（32）不为空，SOME_OTHER_COLUMN 字符不为空，主键（SOME_COLUMN ))
16:07:25,346 错误 [org.hibernate.tool.hbm2ddl.SchemaExport]（MSC 服务线程 1-13）表“SOME_TABLE”已存在；SQL 语句：
创建表 PUBLIC.SOME_TABLE (SOME_COLUMN varchar(32) not null, SOME_OTHER_COLUMN char not null, 主键 (SOME_COLUMN)) [42101-161]

```

这些错误被忽略，服务器最终启动，但我们想知道是否有一些方法可以避免这个问题。我们已经讨论过创建一个应用程序，该应用程序的部署只是为了执行 create-drop 并强制其他应用程序等待，但我们不确定将 JBoss 的部署扫描程序更改为串行部署应用程序而不是并行部署应用程序会有多困难。我们也对其他想法持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:16:52.397

在开发环境中，每个部署的应用程序都应该有自己的数据库架构。这不仅可以解决问题，还可以解决以下问题：

*   两个开发人员正在执行一些测试，其中一个失败，因为另一个修改了第一个使用的数据
*   一位开发人员正在开发需要更改架构的演进，而另一位开发人员修复了当前架构上的错误

而且我敢肯定还有很多其他情况会导致问题。让每个开发人员都有自己的架构，一切都会容易得多。

# php - 将 Content-type 添加到 Pear Mail

> ID：10456432
> 
> 赞同：4
> 
> 时间：2012-05-04T21:34:04.663
> 
> 标签：php

我假设将文本/html 格式收入电子邮件的内容类型设置为客户端/用户机器的默认字体样式和大小。用户 Pear Mail 我将如何添加内容类型。我发送的所有示例仅显示使用 mime 附件添加内容类型。

另外，如果有另一种方法可以使传入的电子邮件默认为用户邮件客户端的字体样式和大小，我想知道。

想补充

```
$headers  = "MIME-Version: 1.0\r\n"; 
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
```

当前邮件代码

```
$from = "sys@test.com";
$to = $SendTo;
$subject = "Contact : " . $uxGlobalLocation;
$body = $Bodycopy;
$host = "mail.set.co";
$username = "donotreply@set.co";
$password = "empty00";
$headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject);
$smtp = Mail::factory('smtp',
array ('host' => $host,
'auth' => true,
'username' => $username,
'password' => $password));
$mail = $smtp->send($to, $headers, $body);
if (PEAR::isError($mail)) {
echo("<p>" . $mail->getMessage() . "</p>");
} else {
header ('Location: /');
exit();
} 
```

**编辑可能的答案**

```
$headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject,
'Content-Type' => 'text/html; charset=iso-8859-1',
'MIME-Version' => '1.0'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T21:57:27.333

这行得通。我花了很长时间才弄清楚 $headers 数组中的最后一项必须有 \r\n\r\n

```
<?php
require_once "Mail.php";
$from = "Web Master <master@example.com>";
$replyto = "Education Dept. <education@example.com>";
$to = "<mytest@example.com>";
$subject = "Test email using PHP SMTP";
$body = "<p>Test HTML</p><p>This is a test email message</p>";

$host = "smtp.example.com";
$username = "master@example.com";
$password = "****************";

$headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject,
  'Reply-To' => $replyto,
  'MIME-Version' => "1.0",
  'Content-type' => "text/html; charset=iso-8859-1\r\n\r\n");

$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
} else {
  echo("<p>Message successfully sent!</p>");
}
?> 
```

# visual-studio-2010 - Visual C++ 2010 中的自定义构建步骤

> ID：10456443
> 
> 赞同：1
> 
> 时间：2012-05-04T21:35:23.693
> 
> 标签：visual-studio-2010, build, auto-generate, custom-build-step

我有一个带有外部构建工具的大项目来构建 glsl 文件，它将其转换为 c++ 头文件（生成此头文件的 python 脚本）现在每次我修改任何 glsl 文件时，我希望构建系统运行这个外部工具，然后编译我的项目，但不知何故我无法通过自定义构建步骤执行此操作，我尝试将这些依赖项“$(ProjectDir)Core\shaders\GLSL\Shaders*.glsl”添加为附加依赖项的一部分，但是不知何故，它不起作用，我必须重建整个项目，因为相同的脚本是我的预构建事件的一部分。

简单来说，在我构建或运行项目之前，我希望每次修改我的任何 glsl 文件（它们都在一个目录中）时运行这个外部工具！

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:41:27.743

我不记得了，我们能否仅在特定文件更改时运行自定义脚本，但我通过在项目设置中添加 Pre-Build Event 来解决类似问题。您可以在此处阅读有关此内容 -> [http://msdn.microsoft.com/en-us/library/42x5kfw4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/42x5kfw4(v=vs.80).aspx)

# jquery - CSS/JQuery：悬停图像上的动画效果？

> ID：10456445
> 
> 赞同：0
> 
> 时间：2012-05-04T21:35:33.237
> 
> 标签：jquery, css

我网站的菜单中每个按钮都有文本图像，而不是纯文本。当按钮悬停时，图像将替换为另一个看起来相同但具有发光效果的图像。

我希望新图像在悬停时以淡入淡出的动画显示。如何使用 CSS 或 JQuery 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:42:49.550

这是一个看起来像可靠教程的源代码，可以实现您正在寻找的效果：

示例：http: [//jqueryfordesigners.com/demo/fade-method2.html](http://jqueryfordesigners.com/demo/fade-method2.html)

教程：http: [//jqueryfordesigners.com/image-cross-fade-transition/](http://jqueryfordesigners.com/image-cross-fade-transition/)

# asp.net - 为什么我不能做一个 TH runat="server"

> ID：10456447
> 
> 赞同：0
> 
> 时间：2012-05-04T21:35:40.367
> 
> 标签：asp.net

对于 ASP.Net，我知道我可以制作许多不同的 HTML 元素 runat="server"，因此我可以从服务器对其执行特定的操作，但我无法获得 runat="server" 的 TH。

为什么不？

例子：

```
<table>
<tr>
<td id="tdMyCell" runat="server"></td>
<th id="thMyCell" runat="server"></th>
</tr>
</table> 
```

但从服务器端，我只能访问 TD。我尝试了下面的两行，第一行不会编译，第二行总是返回一个空对象。

```
thMyCell.Visible = false;
(this.FindControl("thMyCell") as System.Web.UI.HtmlControls.HtmlTableCell).Visible = false; 
```

更新：

我的错，我复制了一些东西，但在发布之前我没有更改它......它已在代码中修复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:39:02.220

这可能是一个额头拍打，但是：

因为你的 th 被称为“thMyCell”，而不是“thLastColumn”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:32:05.227

如果您的实现与您的示例一样简单，那么您应该对此有疑问。它没有给我任何问题，并且编译没有任何错误。

```
<table>
    <tr>
        <th id="test" runat="server"></th>
    </tr>
</table> 
```

在代码隐藏 intellisense 中将其拾取为`HtmlTableCell`，但这不应该是一个问题：

```
test.ColSpan = 2; 
```

如果这对您不起作用，我会尝试将其隔离 - 创建一个新的 Web 表单并粘贴我上面的标记，然后尝试在代码隐藏中访问它。Intellisense 应该可以毫无问题地获取它，并且表单应该编译得很好。

# java - 此行有多个标记

> ID：10456451
> 
> 赞同：0
> 
> 时间：2012-05-04T21:35:51.350
> 
> 标签：java, android, eclipse

我在该行中收到以下错误`this.viewcam.setOnClickListerner(new view.OnClickListerner())`。
我在eclipse中得到这个错误。

此行有多个标记

*   `setOnClickListener(View.OnClickListener)`类型中的方法`View`不适用于参数 ( `new OnClickListener(){}`)
*   视图无法解析为类型

```
 public class Main extends Activity
    implements View.OnClickListener
    {
    Button viewcam;
    EditText editTextIp;
    EditText login;
    EditText passwd;
    public void onCreate(Bundle paramBundle)
    {
      super.onCreate(paramBundle);
      setContentView(R.layout.main);
      this.viewcam = ((Button)findViewById(R.id.viewcam));
      this.viewcam.setOnClickListener(new view.OnClickListener() {
  public void onClick(View v) {
  // TODO Auto-generated method stub
    if (v == this.viewcam)
      {
        Log.i("login", this.login.getText().toString());
        Log.i("Passwd", this.passwd.getText().toString());
        Intent localIntent1 = new Intent(v.getContext(), MjpegSample.class);
        Log.i("My ip", this.editTextIp.getText().toString());
        localIntent1.putExtra("ip", "http://" +                 this.editTextIp.getText().toString() + "/");
        localIntent1.putExtra("user", this.login.getText().toString());
        localIntent1.putExtra("passwd", this.passwd.getText().toString());
        startActivityForResult(localIntent1, 1000);
      }     }
               });
 this.editTextIp = ((EditText)findViewById(R.id.ip));
 this.login = ((EditText)findViewById(R.id.username));
 this.passwd = ((EditText)findViewById(R.id.password));

}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:37:44.140

改变

```
 this.viewcam.setOnClickListener(new view.OnClickListener() { 
```

到

```
 this.viewcam.setOnClickListener(new OnClickListener() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:43:50.027

您需要大写 View in

```
this.viewcam.setOnClickListener(new view.OnClickListener() { 
```

所以应该是

```
this.viewcam.setOnClickListener(new View.OnClickListener() { 
```

# c# - WP7：Windows Phone 7：EventHandle 似乎在循环

> ID：10456455
> 
> 赞同：0
> 
> 时间：2012-05-04T21:35:58.917
> 
> 标签：c#, windows-phone-7, windows-phone-7.1.1

我想`EventHandle`参加一个`MouseLeftButtonDown`活动。当被调用/触发时，a 的最后一个字符`string`应该被删除。我的代码如下所示：

```
 public string MyString;

 private void OnMouseDownDelete(object sender, MouseButtonEventArgs e)
 {
     int MyStringLength = MyString.Length;
     MyStringLength = MyStringLength - 1;
     MyString = MyString.Substring(0, MyStringLength);
 } 
```

但是当我运行这段代码时，一个`MouseLeftButtonDown`事件将开始一个循环，直到`string`变为空。

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:03:24.013

由于您使用的是 Mango (7.1)，因此您可以使用[Tap 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.tap%28v=vs.95%29.aspx)而不是 MouseLeftButtonDown 事件。

但是，我怀疑该事件多次触发，导致字符串被删除。

一个好的做法是使用该`Handled`属性，这样其他控件就不会尝试处理相同的事件：

```
private void OnMouseDownDelete(object sender, MouseButtonEventArgs e)
{
     int MyStringLength = MyString.Length;
     MyStringLength = MyStringLength - 1;
     MyString = MyString.Substring(0, MyStringLength);

     e.Handled = true;
} 
```

您可能需要发布所有显示如何添加 MouseLeftButtonDown 事件的代码。

# reflection - MEF 与反射

> ID：10456457
> 
> 赞同：3
> 
> 时间：2012-05-04T21:36:55.187
> 
> 标签：reflection, .net-4.0, mef

我终于开始玩弄 MEF，却发现解决我的旗舰问题并不那么简单。

**问题：** 我有一个 WCF 服务，它依赖于一些自定义算法，每个算法都存在于自己的程序集中。当一个方法被调用时，请求的数据契约的一部分将确定需要哪些算法。例如类 1 和类 2 各自实现 NameFile() 方法，而类 A 和 B 各自实现 EncryptFile()。

对服务的 WriteFile() 的一次调用可能需要调用 Two.NameFile 和 A.EncryptFile，而另一次调用可能需要 One.NameFile 和 B.EncryptFile。

**尝试：** MEF（我是新手）似乎是加载程序集的好方法，但到目前为止我发现似乎我需要通过许多步骤来确定在运行时哪些可用的合同会议组件符合需要。当仅在通话期间知道特定需求时，Plain Old Reflection 似乎是一种更直接的决定和加载方式。

**问题** MEF 确实更适合其他动态加载场景，还是只是我的 MEF 新手？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:43:16.323

> MEF 确实更适合其他动态加载场景，还是只是我的 MEF 菜鸟？

好吧，主要问题是在运行时确定哪些选项可以满足您希望使用的合同。

无论您选择什么 - 无论是 MEF、其他一些注入机制，还是使用反射滚动您自己的版本，都必须做出这种决定。

然而，MEF 仍然应该比滚动您自己的版本更简单，因为它很容易用于从所有可用程序集中`[ImportMany]`导入所有（或其他）实现。`IFileEncryptor`此时，从可用列表中确定正确的应该相当简单。

而使用反射，您可以从特定程序集中获取特定类型 - 这确实违背了动态执行此操作的目的。MEF 可以轻松扩展此服务，而无需重新编译或更改代码，因为您可以将新程序集放在适当的位置并使其自动被发现。

# eclipse - 在 Eclipse 中运行/调试 OSGi 应用程序

> ID：10456468
> 
> 赞同：6
> 
> 时间：2012-05-04T21:38:40.240
> 
> 标签：eclipse, osgi

我们的应用程序已迁移到 OSGi，但我无法在 Eclipse 中启动/调试它。流程是什么：OSGi 应用程序开发人员是否需要设置 Equinox 环境，安装数百个包（jar=bundle？），然后从控制台启动？换句话说，启动“热插拔天才”应用程序与“模块化挑战”应用程序不同吗？

次要的，更具体的问题。有一个引导程序包应该可以处理所有事情，但是在加载了一堆类之后它会变慢并且几乎挂在：

```
...
...
...
Flat profile of 0.22 secs (16 total ticks): main

  Interpreted + native   Method                        
 16.7%     1  +     0    java.awt.Toolkit.addAWTEventLi[Loaded java.awt.SentEvent from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
stener
 16.7%     1  +     0    jav[Loaded java.awt.DefaultKeyboardFocusManager$DefaultKeyboardFocusManagerSentEvent from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
a.util.regex.Pattern.compile
 16.7%     1  +     0    sun.util.logging.PlatformLogger.<init>
 50.0%     3  +     0    Total interpreted

  Thread-local ticks:
 62.5%    10             Blocked (of total)
 50.0%     3             Class loader

...
...
...
[Loaded sun.reflect.Label$PatchInfo from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
[Loaded sun.reflect.MethodAccessorGenerator$1 from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
[Loaded sun.reflect.ClassDefiner from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
[Loaded sun.reflect.ClassDefiner$1 from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
[Loaded sun.reflect.GeneratedMethodAccessor1 from __JVM_DefineClass__]
[Dynamic-linking native method sun.java2d.DefaultDisposerRecord.invokeNativeDispose ... JNI]
[Dynamic-linking native method java.lang.ref.Finalizer.invokeFinalizeMethod ... JNI] 
```

编辑：自问题发布以来取得了一些进展

```
[Loaded sun.reflect.GeneratedMethodAccessor1 from __JVM_DefineClass__]
[Dynamic-linking native method sun.java2d.DefaultDisposerRecord.invokeNativeDispose ... JNI]
[Dynamic-linking native method java.lang.ref.Finalizer.invokeFinalizeMethod ... JNI]
--- new stuff --- 
[Loaded sun.awt.windows.WComponentPeer$2 from C:\Program Files\Java\jdk1.7.0_04\jre\lib\rt.jar]
[Dynamic-linking native method sun.awt.windows.WInputMethod.disableNativeIME ... JNI] 
```

因此，这不是一个僵局，是什么让它如此缓慢地令人难以忍受？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T00:35:07.317

在 Eclipse 中启动和调试应该相当简单。诀窍（在我看来）是要意识到您需要的所有 Eclipse 支持都被标记为“插件”而不是“OSGi”。使用您需要的所有外部捆绑包设置目标平台 - 您可以将它们转储到一个目录中，然后将目标平台配置器指向该文件夹。目标平台配置在 Preferences->Plug-in Development->Target Platform 下。您可以将目标平台作为`.target`文件共享。拥有一个好的目标平台有助于运行和编译。

要运行您的包，请右键单击并选择 Run as -> OSGi Framework（或 debug as）。您可以调整运行时配置中包含哪些包，以及使用哪些参数。例如，您可能想要添加`-console`. 您还可以创建一个导出应用程序，它会为您提供一个`config.ini`文件。一旦你有了`config.ini`，你的捆绑包将在 Equinox 启动时预安装。

# php - 将 cakephp 模型关联到非 cakephp 数据库表

> ID：10456471
> 
> 赞同：0
> 
> 时间：2012-05-04T21:38:58.200
> 
> 标签：php, cakephp, cakephp-1.3

是否可以在 CakePHP 应用程序中创建模型并将该模型与根本不与 cakePHP 应用程序关联的数据库表相关联？

例如，该数据库表属于另一个应用程序，我们想在 CakePHP 中创建一个使用该表的模型（因此该表根本不符合 CakePHP 的约定）。我该怎么做呢？我需要在我的模型中放入什么才能使该关联在不更改我的表的情况下工作（我需要能够在该表上执行基本的 CRUD 操作）

请问有什么想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:58:11.737

是的，你可以这么做。例如，如果您有一个带有 idCandidat 主键的 cand 表，您可以创建一个模型并使用 $useTable 和 $primaryKey 属性：

```
class Candidat extends AppModel{
var $name = 'Candidats';
var $useTable = 'cand';
var $primaryKey  = 'idCandidat';
//etc.
} 
```

然后您继续在控制器中使用您的模型，就像您使用普通模型一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:29:12.243

您可以在查找功能中设置字段（列） - [http://book.cakephp.org/1.3/en/view/1018/find](http://book.cakephp.org/1.3/en/view/1018/find) 或者如果您想将字段设置为关联，您可以这样做：

```
var $belongsTo = array(
  'User' => array(
    'className' => 'User',
    'foreignKey' => 'user_id',
    'fields' => array('name','phone')
   )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:22:15.123

您甚至可以使用位于完全不同的数据库或不同服务器上的表。为此，您可以使用（我将扩展 @chroonoss 的示例，因为它是正确的）：

```
class Candidat extends AppModel{
var $name = 'Candidats';
var $useTable = 'cand';
var $primaryKey  = 'idCandidat';

var $usedbConfig = 'external';
} 
```

这将允许您使用不同的 DataSource 连接。这些定义在： `app/config/database.php`. 你必须有一个名为“external”的属性，这个例子才能工作：

```
public $external = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => '101.180.10.17',
        'login' => 'username',
        'password' => 'yourTopSecretPassword',
        'database' => 'database_name',
        'prefix' => '',
        'encoding' => 'utf8',
    ); 
```

当然，您可以随意命名您的 DataSource。

# c++ - 将 char[] 转换为 uint16 (unsigned short) 会给出错误的数字

> ID：10456473
> 
> 赞同：2
> 
> 时间：2012-05-04T21:39:01.807
> 
> 标签：c++

我在将 char 数组转换为 unsigned short (UInt16) 时遇到问题。我的转换技术似乎是错误的......这是代码：

```
#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int _tmain(int argc, _TCHAR* argv[])
{
    // Symbols 0x1210 :
    char test[2];
    test[0] = 0x12;
    test[1] = 0x10;

    unsigned short n;
    memcpy(&n, test, sizeof(unsigned short));

    int i=0, arrToInt=0;
    for(i=1;i>=0;i--)
        arrToInt =(arrToInt<<8) | test[i];

    /*
    Now are:

    n = 4114
    arrToInt = 4114

    But! -> 0x1210 == 4624
    */

    return 0;
} 
```

有没有办法（不）反转 char 数组？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:49:19.780

```
for(i=0;i<=1;i++)
    arrToInt =(arrToInt<<8) | test[i]; 
```

# c# - 如何避免显示选择网络摄像头的对话框

> ID：10456475
> 
> 赞同：3
> 
> 时间：2012-05-04T21:39:03.380
> 
> 标签：c#, wpf, webcam

如何避免显示选择网络摄像头的对话框。

大约 18 小时后，我在 WPF 中的应用程序中运行了我的网络摄像头（我确信更多的摄像头可以工作）。

没有 DirectShowNet，没有 WPFMediaKit，没有 WIA

我用 avicap32 调整了一个实现的代码。它“完美”地工作，但总是显示所选设备的对话框，如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:30:18.843

我认为这种行为是设计使然，因此用户总是知道应用程序何时尝试访问它。没有人想要在未经您许可的情况下为您拍照的应用程序。在 Win8 中，用户可以覆盖每个应用程序的此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:53:21.930

我只发现这可能会对你有所帮助。

```
SendMessage(_windowHandle, WM_CAP_CONNECT, _videoSourceIndex, 0) 
```

也许你应该问这个人： [C# web cam WM_CAP_CONNECT: Want to force a capture source when multiple capture sources are present](https://stackoverflow.com/questions/2847659/c-sharp-web-cam-wm-cap-connect-want-to-force-a-capture-source-when-multiple-cap)

# gwt - 从单独的 GWT 客户端访问 GWT Servlet

> ID：10456477
> 
> 赞同：0
> 
> 时间：2012-05-04T21:39:22.757
> 
> 标签：gwt, netbeans

我将 NetBeans 用于我的 IDE，将 GlassFish 3.1.2 用于我的服务器。

我编写了一个简单的 GWT 项目 (GWTServer)，它提供了一个名为 GWTService 的 GWT RPC 服务（该服务所做的只是将一个字符串连接到传入的内容并返回它）。我编写了一个单独的客户端项目 (GWTClient)，我想访问服务器 GWT RPC 服务。NetBeans 在 GWTServer 中生成了一些客户端代码，可用于访问 RPC 服务。

我的服务器 GWT 项目部署在 glassfish 上，可通过“localhost:8080/GWTServer”访问。

我在做一些我需要做的事情时遇到问题：

首先，GWTServer 有几个我需要在 GWTClient 中使用的生成类。这些类是 GWTService 和 GWTServiceAsync。我需要（最好）让 IDE 将它们编译成我可以包含在 GWTClient 中的 jar 文件。我尝试创建一个 java 库项目，将这两个 java 文件复制到库中，并将该库包含在 GWTClient 中，但这给了我一个错误：“没有源代码可用于类型 org.gwtserver.client.GWTServiceAsync；你忘了继承一个必需的模块吗？”</p>

其次，在客户端项目的某个地方，我需要指定 servlet 的 url（类似于[http://localhost:8080/GWTServer/](http://localhost:8080/GWTServer/) gwtservice）。基本上，需要设置环境，以便当我调用 GWT.create(GWTService.class) 时它可以工作。

想必我可以在客户端项目的 .xml 配置文件中设置这个连接。但我不知道该怎么做。而且我不知道是否需要在服务器端对 servlet 定义进行更改。

指定 servlet 的服务器端 web.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>GWTService</servlet-name>
        <servlet-class>org.gwtserver.server.GWTServiceImpl</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GWTService</servlet-name>
        <url-pattern>/org.gwtserver.Server/gwtservice</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>welcomeGWT.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

我需要了解在客户端 gwt 应用程序中需要做什么才能与现有的 servlet 进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:26:18.087

为了让 GWT 客户端与 GWT 服务成功交互，它们**必须**同时编译在一起，并且出于安全原因必须托管在同一主机上。您不能构建自己的 GWT 客户端来访问在不同时间编译的现有 GWT 服务。

Your issue is actually separate from this, though. You cannot access a `jar` from the GWT client, since it requires that source code be in your source folders. Hence your `No source code is available` error. Once you solve that, though, you will see this: `Module needs to be (re)compiled`, which you will not be able to fix because of the reasons I mentioned in my first paragraph.

# sql - XPATH - 具有不同级别条件的节点的路径

> ID：10456484
> 
> 赞同：0
> 
> 时间：2012-05-04T21:40:27.250
> 
> 标签：sql, xml, xpath

我有以下 XML 结构，需要获取值

```
<VALUE><![CDATA[PRUEBAS BPM]]></VALUE> 
```

我需要检查两个条件：

1.  到达节点 FIELD[NAME="dependency"]
2.  前往FIELD[NAME="name"]

我的XPATH其实是这样写的

```
/TRAIL/ENTITY/FIELD[NAME="dependency"]/ENTITY/FIELD[NAME="name"]/PRIMITIVE/VALUE/text() 
```

但是，它不会带来任何数据。我的 XPATH 是否以某种方式写错了？如何在我的 xml 中整理出对该信息的访问权限？

任何帮助将不胜感激。

这是我的 XML 结构

```
<TRAIL>
  <ENTITY>
    <FIELD>
      <NAME>dependency</NAME>
      <ENTITY>
        <FIELD>
          <NAME>codigo</NAME>
          <PRIMITIVE>
            <VALUE><![CDATA[906]]></VALUE>
          </PRIMITIVE>
        </FIELD>
        <FIELD>
          <NAME>name</NAME>
          <PRIMITIVE>
            <VALUE><![CDATA[PRUEBAS BPM]]></VALUE>
          </PRIMITIVE>
        </FIELD>
      </ENTITY>
    </FIELD>
  </ENTITY>
</TRAIL> 
```

在此先感谢您的帮助！

* * *

另外，我必须补充一点，我正在使用此 XPATH 直接从数据库中检索信息。这是我的 SQL 语句（delta 是包含 XML 的表的列）

```
SELECT XPATH('(/TRAIL/ENTITY/FIELD[NAME="dependency"]/ENTITY/FIELD[NAME="name"])/PRIMITIVE/VALUE/text()', CAST( SUBSTRING( delta FROM position('<TRAIL>' IN delta) FOR char_length(delta)) AS ml ) ) FROM aud_huella_expediente 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:53:57.977

您的 XPath 是正确`text()`的（从表达式末尾删除并[在线](http://www.mizar.dk/XPath/Default.aspx)测试）。您的问题很可能来自 CDATA 部分，请参阅[如何通过 XPath 在 CDATA 标记中检索元素文本？](https://stackoverflow.com/questions/568315/how-do-i-retrieve-element-text-inside-cdata-markup-via-xpath).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:54:19.360

看起来你只需要删除正确的括号：

```
/TRAIL/ENTITY/FIELD[NAME="dependency"]/ENTITY/FIELD[NAME="name"]/PRIMITIVE/VALUE/text() 
```

# java - PDFBox 支持专色和分色吗？

> ID：10456486
> 
> 赞同：11
> 
> 时间：2012-05-04T21:40:40.523
> 
> 标签：java, pdf, pdfbox, color-space

我有兴趣将 PDFBox 用于需要能够在 PDF 输出中指定专色和分色以转到专业打印机的项目，并且很好奇它是否支持这一点。如果是这样（我认为是这样），我也在寻找一些示例代码。

我在他们的邮件列表（[此处](http://pdfbox.markmail.org/message/rdasgh4k6ivei3v3?q=color%20separation)）上发现了一篇 2009 年的旧帖子，这让我相信 PDFBox 可以支持分色，但没有成功找到任何示例代码。我查看了他们的[JavaDoc](http://pdfbox.apache.org/apidocs/)并发现了这些`org.apache.pdfbox.pdmodel.graphics.color`类，但不知道如何利用它们，也没有在他们的网站或源代码中看到任何[食谱示例。](http://pdfbox.apache.org/userguide/cookbook.html)

我特别感谢任何有助于说明 DeviceN 颜色空间的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-21T06:38:59.720

请看下图

[![在此处输入图像描述](../Images/7a7c4453834203c425654639cd15b841.png)](https://i.stack.imgur.com/iRwpN.jpg)

1.  从 PDF 文件（spotColor.pdf）中获取 PDColor，并确保您使用的专色在此 PDF 文件中。（我由 Adob​​e Illustrator 制作文件）

    ```
     public static Map<String, PDColor> getSpotColor() {
            Map<String, PDColor> colors = new HashMap<String, PDColor>();
            PDDocument spotColorFile = null;
            try {
                spotColorFile = PDDocument.load(new FileInputStream(new File(
                        "d:\\spotColor.pdf")));
                for (PDPage page : spotColorFile.getPages()) {
                    for (COSName name : page.getResources().getColorSpaceNames()) {
                        PDColor color = page.getResources().getColorSpace(name)
                                .getInitialColor();
                        PDSeparation cs = (PDSeparation) color.getColorSpace();
                        colors.put(cs.getColorantName(), color);
                    }
                }
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if (spotColorFile != null)
                    try {
                        spotColorFile.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } finally {
                        spotColorFile = null;
                    }
            }
            return colors;
        } 
    ```

2.  使用您的 PDColor

    ```
    public static void main(String[] args) {
        PDDocument doc = null;
        PDPage page = null;
        try {
            Map<String, PDColor> colors = getSpotColor();
            doc = new PDDocument();
            page = new PDPage(new PDRectangle(100, 100));
            doc.addPage(page);
            PDPageContentStream content = new PDPageContentStream(doc, page);

            content.beginText();
            content.setNonStrokingColor(colors.get("PANTONE 2607 C"));
            content.setFont(PDType1Font.HELVETICA_BOLD, 20);
            content.showText("abcdef");
            content.endText();

            content.setNonStrokingColor(colors.get("PANTONE 108 U"));
            content.addRect(50, 50, 50, 50);
            content.fill();
            content.close();

            doc.save("d:\\spotColorTest.pdf");
        } catch (Exception e) {
            System.out.println(e);
        } finally {
            if (doc != null)
                try {
                    doc.close();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    doc = null;
                }
        }
    } 
    ```

3 如果您有更聪明的想法，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:42:16.113

为什么你不能使用`PDSeparation` [类](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/graphics/color/PDSeparation.html)

# asp.net - 如果工作进程回收，ViewState 变量会中断

> ID：10456489
> 
> 赞同：4
> 
> 时间：2012-05-04T21:40:46.963
> 
> 标签：asp.net, viewstate

我有以下属性可以在 ViewState 中保存某些页面级别信息：

```
protected ViewStateModel Model
    {
        get
        {
            if (_pageModel == null)
            {
                _pageModel = (ViewStateModel) ViewState[_pageModelKey];
                if (_pageModel == null)
                {
                    _pageModel = new ViewStateModel();
                    ViewState[_pageModelKey] = _pageModel;
                }
            }

            return _pageModel;
        }
        set
        {
            ViewState[_pageModelKey] = _pageModel = value;
        }
    } 
```

这很好用，直到 IIS 工作进程被回收。我得到一个

> 无法将“ViewStateModel”类型的对象转换为“ViewStateModel”类型

现在，如果我调试，我看到 ViewState 仍然包含 ViewStateModel 类型的对象及其所有值，但是如果当我将其类型与我定义的 Model 类进行比较时，它返回 false

```
// this always returns false if the worker process has been recycled
  ViewState[_pageModelKey] is ViewStateModel 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:43:58.700

IIS 工作进程回收不应影响 ViewState。循环可以影响`Session`和`Application`状态，但`ViewState`它只是页面上的一个加密隐藏字段。如果要影响 ViewState，您很可能会遇到以下异常：

> ViewState 对此页面无效并且可能已损坏。

查看此支持[文章](http://support.microsoft.com/kb/829743)，看看是否有任何建议有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T16:31:04.600

问题不在于 ViewState。问题是，在没有正确理解后果的情况下，我在使用它的同一个 aspx 页面中定义了 ViewStateModel 类。由于 aspx 文件夹被编译为具有随机名称的 dll，如果 ViewState 中的序列化类可能会变得无效文件夹被重新编译，甚至在网络场中的服务器之间重新编译。根据[二进制序列化](http://msdn.microsoft.com/en-us/library/72hyey7b%28v=vs.71%29.aspx)

> 对象的公共和私有字段以及类的名称，包括包含该类的程序集，都被转换为字节流

所以由于dll的名字不一样，反序列化就失败了。正确的做法是将所有模型定义在 App_Code 或完全不同的类项目中的单独类文件中

# javascript - 在 Chrome 18 中检测 SwiftShader WebGL 渲染器

> ID：10456491
> 
> 赞同：6
> 
> 时间：2012-05-04T21:40:56.387
> 
> 标签：javascript, performance, google-chrome, webgl

我有一个 2D HTML5 游戏引擎 ( [www.scirra.com](http://www.scirra.com) ) 并且真的想检测 WebGL 是否要使用 Chrome 18 的“Swiftshader”软件渲染器进行渲染。如果是这样，我们*更*愿意回退到普通的画布 2D 上下文，就像在其他浏览器中发生的那样。那里的大多数人都拥有 CPU 较弱的低端机器，在软件渲染时会将游戏变成幻灯片，我认为在许多情况下 2D 画布会被硬件加速。但是，Chrome 中的 WebGL 上下文创建永远不会失败，并且没有明显的方法来检测 SwiftShader。

我尝试过的事情：

```
// Always returns "WebKit WebGL" regardless of SwiftShader
gl.getParameter(gl.RENDERER)

// Always returns "WebKit" regardless of SwiftShader
gl.getParameter(gl.VENDOR) 
```

我可以尝试考虑最大纹理大小或其他 MAX_* 属性等因素，但我怎么知道即使使用 SwiftShader，它们在机器之间也不会变化？而且由于我猜 SwiftShader 旨在模仿常见的硬件，使用这种方法可能仍然会得到很多误报。

我不想写启动性能测试，因为：

*   我们只是制作一个引擎，而不是任何特定的游戏，所以我不知道我们如何编写一个公平的测试，该测试在一般情况下适用于任何具有高度准确性的任何性能配置文件的游戏
*   一个好的测试可能需要一两秒钟才能完成运行，这可能会中断用户体验或让他们不得不观看一些方块被移动或其他什么
*   它可能会产生新的复杂性，例如如果我们缓存结果，如果用户更新他们的驱动程序并修复问题怎么办？

我不想在 Chrome 上完全禁用 WebGL，因为使用硬件加速的 WebGL 性能可以比画布 2D 快两倍！如果我们这样做了，*每个人*都会输。

我不想添加游戏内开关或用户设置，因为有多少用户关心这个？如果游戏速度很慢，他们就会退出并且很可能不会寻找解决方案。“这游戏糟透了，我去别的地方。” 我认为只有少数用户会费心阅读诸如“顺便说一下，如果这个游戏很慢，请尝试将此设置更改为‘canvas 2D’……”之类的说明。

我目前最好的猜测是使用`gl.getSupportedExtensions()`. 我发现 SwiftShader 报告了以下扩展：

```
OES_texture_float,OES_standard_derivatives,WEBKIT_WEBGL_lose_context 
```

...但是真正的硬件加速上下文报告：

```
OES_texture_float,OES_standard_derivatives,WEBKIT_WEBGL_lose_context,WEBKIT_WEBGL_compressed_textures 
```

注意添加`WEBKIT_WEBGL_compressed_textures`。一些快速研究表明，这可能会或可能不会得到广泛支持。请参阅[此支持表](http://zp.amsnet.pl/cdragan/query.php?dxversion=0&feature=extensions&featuregroup=selected&adaptergroup=groups&adapterselected%5B%5D=ATi&adapterselected%5B%5D=Intel&adapterselected%5B%5D=NVidia&featureselected%5B%5D=GL_ARB_texture_compression&featureselected%5B%5D=GL_ARB_texture_compression_rgtc&featureselected%5B%5D=GL_ATI_texture_compression_3dc&featureselected%5B%5D=GL_EXT_texture_compression_latc&featureselected%5B%5D=GL_EXT_texture_compression_rgtc&featureselected%5B%5D=GL_EXT_texture_compression_s3tc&orientation=horizontal)- 两者都`GL_EXT_texture_compression_s3tc`在`GL_ARB_texture_compression`桌面卡上得到广泛支持。此外，该表似乎只列出了相当旧的型号，所以我可以猜测所有现代桌面显卡都会支持`WEBKIT_WEBGL_compressed_textures`......因此我对 SwiftShader 的检测标准是：

*   视窗操作系统
*   谷歌浏览器
*   WebGL 上下文**不**支持`WEBKIT_WEBGL_compressed_textures`
*   结果：退回到 Canvas 2D

当然，如果 SwiftShader 将来添加压缩纹理支持，这将再次中断。但是我看不到使用软件渲染器压缩纹理的优势！此外，如果那里有许多不支持的真正工作的视频卡，它仍然会得到很多误报`WEBKIT_WEBGL_compressed_textures`！

没有更好的方法来检测 SwiftShader 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:34:51.887

转到[http://code.google.com/p/angleproject/wiki/ExtensionSupport](http://code.google.com/p/angleproject/wiki/ExtensionSupport)查看 EGL 扩展 EGL_ANGLE_software_display，如果可用，那是因为有 SwiftShader 后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:15:32.607

您说您不想编写“启动性能测试”——也就是说，**使用 2D 和 WebGL 渲染几帧并测量哪个更快，然后使用那个**——但我仍然认为这是最好的选择。

优点：

*   **选择在当前硬件上实际上更快**的渲染器，无论其明显属性如何。

缺点/注意事项：

*   您必须为两个渲染器加载资源，这可能会增加加载时间（但您可以记住选择，以便它只发生一次）。
*   如果系统一开始很慢（例如由于寻呼），则测量可能是错误的。
*   没有主动冷却的硬件（例如手机）可能会在以后过热并降低性能。你不能直接测量这两种方法的热量输出。（如果你有很好的机会重新测量和重新选择渲染方法，例如加载新关卡时的静态屏幕，你可以这样做。）

解决您的具体问题：

*   由于您正在编写游戏引擎，因此您必须为游戏开发人员提供一种方法来指定要在测试中使用的示例内容。
*   一两秒并不是很多额外的加载时间，特别是如果（我怀疑）没有*可靠的*方法来区分渲染器。在测试期间，无需让用户看到您正在使用的画布元素；你可以呈现一个完全不相关的加载动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T02:09:11.183

SwiftShader 实际上比一些集成显卡更快。因此，检测 GPU 或 CPU 渲染无法保证实际性能。此外，SwiftShader 是最快的软件渲染器，在简单游戏方面应该做得非常好。您确定您的应用程序已正确优化吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T23:40:04.493

您真正想知道的是，用 Canvas2D 而非 WebGL 来展示您的游戏是否会更好。这与它是否在 Swiftshader 之上运行不是同一个问题。

老实说，我不知道为什么询问用户是不可接受的。

许多有史以来最畅销的游戏都有这些选项，包括

*   使命召唤现代战争3
*   战地3
*   愤怒的小鸟 (http://chrome.angrybirds.com/)

# .htaccess - .htaccess OnRewriteRule 保持扩展相同

> ID：10456493
> 
> 赞同：0
> 
> 时间：2012-05-04T21:41:04.660
> 
> 标签：.htaccess

有没有办法更改用 php 显示的文件但保持相同的扩展名？说，我想通过使用具有动态 php 的等效文件来动态更改非 php/html 文件（如文本文件）。在我的 .htaccess 文件中，我有这个：

```
RewriteEngine On
RewriteRule ^robots.txt http://domain.com/directory/robots.php [R=301,L] 
```

上面的代码将*robots.txt*请求重定向到*robots.php*。我怎样才能让它保持相同的扩展名但加载不同的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:21:49.487

```
RewriteRule ^robots.txt /directory/robots.php [L] 
```

# jsf-2 - 在 DataTable 组件中使用 convertDateTime 标记，并且每个 ajax 请求重新创建托管 Bean

> ID：10456500
> 
> 赞同：1
> 
> 时间：2012-05-04T21:41:39.027
> 
> 标签：jsf-2, managed-bean, date-conversion, ajax-request

我在 DataTable 组件中使用 convertDateTime 标记。将托管 bean 属性连接到时区属性。在这种情况下，每个 ajax 都会请求重新创建托管 Bean。

托管 Bean 范围是 View Scoped。

```
<h:column>
    <f:facet name="header">
       <h:outputLabel value="Date"/>
    </f:facet>
    <h:outputText value="#{item.date}">
         <f:convertDateTime timeZone="#{myBean.timezone}" locale="tr" pattern="dd.MM.yyyy"/>
    </h:outputText>
</h:column>

@ManagedBean(name="myBean")
@ViewScoped
public class MyBean {

   @PostConstruct
   public void initBeanMethod(){
      System.out.println("PostConstruct method is called...");
   }

   private TimeZone timezone = TimeZone.getDefault();

   public TimeZone getTimezone() {
      return timezone;
   }

   public void setTimezone(TimeZone timezone) {
      this.timezone = timezone;
   } 
```

在每个 ajax 请求之后显示以下输出：**“调用 PostConstruct 方法...”**

你对每个请求都重新创建 bean 有什么想法吗？

注意：我为我糟糕的英语道歉:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:06:48.503

当您将标记处理程序的属性绑定到视图范围的 bean 时，这确实会发生。这与 JSF[问题 1492](http://java.net/jira/browse/JAVASERVERFACES-1492)有关，该问题已针对即将发布的 JSF 2.2 进行了修复。简而言之，视图范围的 bean 存储在视图状态中。因此，当要恢复视图时，视图范围的 bean 尚不可用。但是标记处理程序（以及`id`JSF`binding`组件的属性）在构建视图期间运行，因此它将隐式创建一个全新的视图范围 bean 实例。然而，在恢复视图之后，那些新的视图范围的 bean 实例将被视图状态中的那些替换。另请参阅 [`@ViewScoped`标签处理程序中的失败](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)。

有几种方法可以解决这个特定问题，所有这些都在这个答案中列出：[如何为数据表的每一行设置转换器属性？](https://stackoverflow.com/questions/7530560/how-to-set-converter-properties-for-each-row-of-a-datatable/7531284#7531284)但在*您的特定情况下*，可能有一个更简单的解决方案：您似乎希望在所有日期时间转换器中使用系统的默认时区。您也可以通过在中设置以下上下文参数来实现此目的`web.xml`：

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

# list - Prolog 使用 =../2 构建列表

> ID：10456502
> 
> 赞同：1
> 
> 时间：2012-05-04T21:41:44.470
> 
> 标签：list, prolog

我想从这样的列表构造：像这样`[name1(value1), name2(value2),...]`的列表：`[value1, value2,...]`，我有以下代码：

```
 construct_listv([],_).
    construct_listv([A0|T], Values) :-
        A0 =.. [_, Value],
        append([Value], [], Values),
        construct_listv(T, Values). 
```

如果我举个例子`construct_listv([su(2), se(5)], ResultList)`。

谁能告诉我为什么第二次调用 append 失败以及正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:00:29.330

您正在使用`Values`需要两个结果的地方，因此有交叉用途。

请注意，**construct_listv/2**的递归情况需要同时处理第一个参数的 Head 和 Tail。每个都将有助于第二个参数的构造，但是您让**append/3**确定该输出，这与对**construct_listv/2**的递归调用想要确定它的方式相冲突。

也许你的意思是：

```
construct_listv([],[]).
construct_listv([A0|T], [V|Values]) :-
    A0 =.. [_, V],
    construct_listv(T, Values). 
```

现在您不再需要调用**append/3**了。递归负责为您构建输出参数！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:04:03.757

为什么不

```
construct_list(L1, L2) :-
    maplist(construct_one, L1, L2).

construct_one(X, V) :-
    X =.. [_, V]. 
```

# imagemagick - ImageMagick：如何转换和添加订单#到 PDF

> ID：10456503
> 
> 赞同：0
> 
> 时间：2012-05-04T21:41:51.037
> 
> 标签：imagemagick

我需要转换一个 SVG --> PDF，并在 pdf 的底部（图像区域之外）添加一个 Order#

*   pdf/image 也应该是 sRGB。

谢谢！

-艺术

# php - simplexml_load 中的 PHP 属性）文件错误节点不再存在

> ID：10456504
> 
> 赞同：0
> 
> 时间：2012-05-04T21:42:11.847
> 
> 标签：php, mysql, simplexml

我现在已经尝试解决这个问题大约 4 个小时，并且承认我是 php 的新手。

下面的代码是我最后一次尝试。我也尝试过使用 xpath，但没有运气。我做错了什么请告诉我。

```
$url  = "http://www.boardgamegeek.com/xmlapi2/collection?username=wizball&own=1";

$xml = simplexml_load_file($url);
$i = 0; 
    foreach($xml->item as $item)
    {
             echo '<div>' . $item->name . '</div>';
             $id=$xml->item[$i]->objectid->attributes();
            $i++

$insert_bgg = sprintf("INSERT INTO trans (objectid, name, yearpublished, image, privatecomment) VALUES ('".$id."','".$item->name."','".$item->yearpublished."','".$item->image."','".$item->privateinfo->privatecomment."')");

echo $insert_bgg; 
```

非常感谢提前彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:51:22.213

我猜您试图从页面中获取数据并将其拆分？

首先链接url没有得到数据，看看： http: [//www.howtogeek.com/howto/programming/php-get-the-contents-of-a-web-page-rss-feed-or -xml-file-into-a-string-variable/](http://www.howtogeek.com/howto/programming/php-get-the-contents-of-a-web-page-rss-feed-or-xml-file-into-a-string-variable/)

然后您可以使用简单的 xml 将其传递到您的数组中。

如果您需要更多帮助，请告诉我。

# java - 将来自servlet的请求转发到jsp，在firefox中给出空白页

> ID：10456506
> 
> 赞同：0
> 
> 时间：2012-05-04T21:42:26.440
> 
> 标签：java, jsp, firefox, google-chrome, servlets

我有一个登录 servlet，它从我的登录页面上的表单（通过 POST）获取用户名、密码。一旦通过身份验证，我将尝试导航到欢迎页面。但问题是，我的代码在 IE8 上运行良好，但在 Firefox 和 Chrome 上它只显示一个空白页面。如果我单击查看源代码，所有正确的 HTML 都在那里，但实际上没有显示任何内容。如果我直接从地址栏中请求欢迎页面，它将在 FF 和 chrome 中正确显示。

在下面发布我的代码，请根据需要提供任何更改/最佳实践......这对我来说是全新的。

**登录小服务程序**

```
 public class Login extends HttpServlet {
      public static String jsessionid = null;

      public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        System.out.println("GET CALLED");
        doPost(req, resp);
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException, ServletException {
        System.out.println("POST CALLED");
        String username = req.getParameter("username");
        String password = req.getParameter("password");

        String jsessionid_full;
        String endpoint = "https://sample-url";
        try {
            // Authentication Code...
                    // Authentication Code...

            // resp.sendRedirect(resp.encodeRedirectURL("welcome.jsp"));

            String nextJSP = "welcome.jsp";
            RequestDispatcher dispatcher = getServletContext()
                    .getRequestDispatcher(nextJSP);
            dispatcher.forward(req, resp);

        } catch (Exception e) {
            System.out.println(e);
        }

    }
} 
```

**welcome.jsp**页面目前只是一些静态文本

我的**web.xml**是...

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>mobile CRM</display-name>
  <servlet>
    <servlet-name>Login</servlet-name>
    <servlet-class>crmApp.Login</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Login</servlet-name>
    <url-pattern>/Login</url-pattern>
  </servlet-mapping>
    <servlet>
    <servlet-name>AccountQuery</servlet-name>
    <servlet-class>crmApp.AccountQuery</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>AccountQuery</servlet-name>
    <url-pattern>/AccountQuery</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>login.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

我的身份验证程序运行良好......它只是显示在 FF 和 chrome 中有问题的欢迎页面。

同样在执行之后，地址栏中的 URL 是登录 servlet 即***/Login***

任何回应将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:25:45.117

看看返回的 http 标头。有一些很好的 ff 插件可以显示这些，例如 Live http headers

比较从您的登录转发请求返回的标头与您的直接欢迎页面请求的标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:56:51.967

抱歉...问题显然出在我在这里使用 jQuery 和 jQuerymobile 的样式表中...浏览器问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:13:02.680

我不知道为什么您会在不同的浏览器中看到带有转发的不同行为，因为它是 web 应用程序内部的，但请尝试重定向用户而不是转发；这也会导致地址栏中的 URL 发生变化。

这里有一些关于这个主题的[好信息。](http://www.coderanch.com/how-to/java/RedirectForward)

# c++ - 如何构建记事本++

> ID：10456510
> 
> 赞同：2
> 
> 时间：2012-05-04T21:42:46.200
> 
> 标签：c++, boost, notepad++

当我跑

```
BuildBoost.bat --toolset msvc-9.0 your\boost\install\folder 
```

它给出消息“boostpath.mak”未找到

我正在按照这些说明[How To Compile Notepad++ From Source](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Compiling_Notepad%2b%2b#Build_Notepad.2B.2B_v5.8.7_.28win32.2C_Debug.29%3a)进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:49:00.830

提升的路径必须是绝对的。

虽然它不应该是必需的，但我还建议从 Notepad++ 树中的 scintilla\boostregex 目录运行 BuildBoost.bat - 它仅在这种情况下进行了测试 - 即。不要为 BuildBoost.bat 提供路径。

像这样的东西：

```
D:\code\notepad-plus\scintilla\boostregex> BuildBoost.bat --toolset msvc-9.0 d:\code\boost 
```

如果您完成了所有这些操作，但仍然出现错误，则值得`@ECHO OFF`从批处理文件的第一行中删除 ，并发布完整的输出。

*免责声明：我是 buildboost.bat 批处理文件的作者*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:01:57.023

我确实有同样的问题，并得到以下错误：

```
getboostver.mak(15) : fatal error U1052: file 'boostpath.mak' not found
Stop.
******************************
** ERROR building getboostver.exe 
```

notepad++ 项目文件夹 ( ) 的路径名中的空格似乎`...\Visual Studio 2008\....`导致了错误。

`Buildboost.bat`从内部运行`scintilla\boostregex`并没有解决问题。

将boost文件夹和notepad++项目文件夹移动到没有空格的位置后，boost编译完美。

# asp.net - 层次查询、子查询 Linq to Entities

> ID：10456513
> 
> 赞同：0
> 
> 时间：2012-05-04T21:42:53.597
> 
> 标签：asp.net, linq, entity-framework

我对 LINQ 和实体框架还不太熟悉。

我必须从数据库中获取站点地图并将其写入 XML。

主要问题是，在以下代码中，子查询根本没有显示任何内容：

```
var pages = (from p in ctx.CMSPages2
                 where p.MenuID == num && p.ParentID == 0
                 select new
                 {
                     URLLevel1 = p.KeywordUrl + "/" + p.FriendlyUrl,
                     TitleLevel1 = p.LinkTitle,
                     Level2 = from q in ctx.CMSPages2
                              where q.ParentID == p.SitemapExternID
                              select new
                              {
                                  URLLevel2 = q.KeywordUrl + "/" + q.FriendlyUrl,
                                  TitleLevel2 = q.LinkTitle,
                              }

                 }).ToArray(); 
```

有任何想法吗？

更新：

使用导航属性（CMSPages2_1）就可以了：

```
 var pages = (from p in ctx.CMSPages2
                 where p.MenuID == num && p.ParentID == 0
                 select new
                 {
                     URLLevel1 = p.KeywordUrl + "/" + p.FriendlyUrl,
                     TitleLevel1 = p.LinkTitle,
                     Level2 = (from o in p.CMSPages2_1
                               where o.ParentID == p.SitemapExternID
                               select new
                               {
                                   URLLevel2 = o.KeywordUrl + "/" + o.FriendlyUrl,
                                   TitleLevel2 = o.LinkTitle,
                               })

                 }).ToArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:59:39.753

您对 Level2 的子查询将返回一个集合，而您似乎正在尝试填充单个对象属性。

尝试使用 FirstOrDefault：

```
var pages = (from p in ctx.CMSPages2
         where p.MenuID == num && p.ParentID == 0
         select new
         {
            URLLevel1 = p.KeywordUrl + "/" + p.FriendlyUrl,
            TitleLevel1 = p.LinkTitle,
            Level2 = ctx.CMSPages2
                .FirstOrDefault(q => q.ParentID == p.SitemapExternID) 
                .Select(x => new
                    {
                        URLLevel2 = x.KeywordUrl + "/" + x.FriendlyUrl,
                        TitleLevel2 = x.LinkTitle,
                    });

        }).ToArray(); 
```

**更新**：我没有注意到这是一棵树。

也许尝试将 CMSPages2 上的导航属性设置为 istelf（比如“SubPages”），然后执行类似的操作

```
var pages = (from p in ctx.CMSPages2
         where p.MenuID == num && p.ParentID == 0
         select new
         {
            URLLevel1 = p.KeywordUrl + "/" + p.FriendlyUrl,
            TitleLevel1 = p.LinkTitle,
            Level2 = p.SubPages
                .Select(q => new
                    {
                        URLLevel2 = q.KeywordUrl + "/" + q.FriendlyUrl,
                        TitleLevel2 = q.LinkTitle,
                    });

        }).ToArray(); 
```

# c++ - PrintWindow - 捕获子窗口？

> ID：10456515
> 
> 赞同：4
> 
> 时间：2012-05-04T21:43:04.530
> 
> 标签：c++, windows, winapi, gdi+, gdi

我想知道如何 PrintWindow 子窗口？为什么 ？因为在文件夹视图之类的某些窗口上，它只捕获文件夹的框架而不捕获 SysListView32 项目，所以我认为我必须单独捕获它，或者以某种方式强制它自己绘制，我尝试使用 WM_PAINT 和 WM_SYSCOLORCHANGE 发送消息但没有成功。

提前致谢。

编辑：这是同样的问题，但没有答案.... [http://www.vbforums.com/showthread.php?t=555250](http://www.vbforums.com/showthread.php?t=555250)

# symfony - 错误：类 ...\Entity\.. 没有名为的关联

> ID：10456517
> 
> 赞同：4
> 
> 时间：2012-05-04T21:43:12.913
> 
> 标签：symfony, doctrine-orm, yaml, one-to-many

这个问题与我的另一个问题有关：[Doctrine2 只给了我相关对象的第一个实例](https://stackoverflow.com/questions/10450707/doctrine2-gives-me-only-first-instance-of-related-objects)

我想出了双向关联来尝试解决我的旧问题，但现在我遇到了另一个问题。

架构**[编辑]**：

```
 XYZ\Bundle\CitiesBundle\Entity\Cities:
  type: entity
  table: cities
  fields:
    id:
      id: true
      type: integer
      unsigned: false
      nullable: false
      generator:
        strategy: IDENTITY
    name:
      type: string
      length: 50
      fixed: false
      nullable: false
    landarea:
      type: decimal
      nullable: false
    density:
      type: integer
      unsigned: false
      nullable: false
    population:
      type: integer
      unsigned: false
      nullable: false
  manyToOne:
    state:
      targetEntity: States
      cascade: {  }
      inversedBy: cities
      joinColumn:
        state_id:
          referencedColumnName: id
  lifecycleCallbacks: {  } 
```

实体：

```
class Cities
{
    //other vars

    /**
     * @var XYZ\Bundle\CitiesBundle\Entity\States
     */
    private $state;

    //other get/set    

    /**
     * Set state
     *
     * @param XYZ\Bundle\CitiesBundle\Entity\States $state
     */
    public function setState(\XYZ\Bundle\CitiesBundle\Entity\States $state)
    {
        $this->state = $state;
    }

    /**
     * Get state
     *
     * @return XYZ\Bundle\CitiesBundle\Entity\States 
     */
    public function getState()
    {
        return $this->state;
    }
}

class States
{
    //other vars and get/set

    private $cities;

    public function __construct()
    {
        $this->cities = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add cities
     *
     * @param XYZ\Bundle\CitiesBundle\Entity\Cities $cities
     */
    public function addCities(\XYZ\Bundle\CitiesBundle\Entity\Cities $cities)
    {
        $this->cities[] = $cities;
    }

    /**
     * Get cities
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getCities()
    {
        return $this->cities;
    }
} 
```

查询生成器用法：

```
 $query = $em->createQueryBuilder()
                ->select('c','s')
                ->from('CitiesBundle:Cities', 'c')
                ->innerJoin('c.state', 's')
                ->orderBy('c.population', 'DESC')
                ->setMaxResults(10)
                ->getQuery(); 
```

错误是：

> [语义错误] line 0, col 58 near 's ORDER BY c.population': Error: Class XYZ\Bundle\CitiesBundle\Entity\Cities 没有名为 state 的关联

生成的 DQL：

> SELECT c, s FROM CitiesBundle:Cities c INNER JOIN c.state s ORDER BY c.population DESC

耻辱:(

有人可以帮我解决我的问题吗？

[编辑]

我编辑了城市架构，现在错误是：

> 注意：未定义的索引：/home/marek/devel/sf2/cities/vendor/doctrine/lib/Doctrine/ORM/Mapping/Driver/YamlDriver.php 第 473 行中的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:50:28.240

我确定`joinColumns:`（注意复数）仅用于`Many-To-Many`关系。在其他关系中，您应该使用`joinColumn`.

在 Cities XML 中，尝试输入：

```
joinColumn:
    name: state_id
    referencedColumnName: id 
```

除此之外，请尝试在您的 XML 中将“ManyToOne”重命名为“manyToOne”，但我怀疑这种情况是否是这里的问题......

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-02T21:12:03.743

请注意，当使用 Symfony 时，它会首先查看映射 YAML 文件并忽略您的实体注释。在加载 YAML 映射文件的过程中，我花了很长时间更改我的注释。

# hibernate - 无法初始化集合

> ID：10456522
> 
> 赞同：1
> 
> 时间：2012-05-04T21:43:38.820
> 
> 标签：hibernate

我有recs模型映射到postgresql中的recs表，一些字段被声明为设置，当我运行代码时，它抛出错误为：

```
org.hibernate.exception.SQLGrammarException: could not initialize a collection: Recs._recsDetailName
caused by: org.postgresql.util.PSQLException: ERROR: relation "recs__recsdetailname" does not exist 
```

我的RECS模型：

```
@Entity
@Table(name = "RECS", uniqueConstraints = @UniqueConstraint(columnNames = "id"))
public class Recs implements Serializable, Cloneable {

    /**
     * Serialized version unique identifier.
     */
    private static final long serialVersionUID = -7316874431882307750L;

    @Id
    @Column(name = "id")
    private int _id;

    @Basic
    @Column(name = "recs_num")
    private int _recsNum;

    @Basic
    @Column(name = "details")
    private String _details;

    @Column(name = "d_stamp")
    private Date _timeStamp;

    @ElementCollection(fetch = FetchType.EAGER) 
    @Column(name = "recs_detail_name")
    private Set<String> _recsDetailName;

    .. 
```

我的桌子：

```
 Column         |            Type             |  Modifiers                           
-----------------------+-----------------------------+-------------------------------
 id                    | integer                     | not null default 
 recs                  | xml                         | 
 recs_num              | integer                     | 
 details               | character varying(300)      | 
 d_stamp               | timestamp without time zone | default now()
 recs_detail_name      | text[] 
```

|

数据库中的示例 recs_detail_name 如下所示：

```
{"TeleNav GPS Navigator","Photobucket for BlackBerry","Cellfire Mobile Coupons"} 
```

有谁知道可能出了什么问题？？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:11:47.050

ElementCollection 未映射到将序列化集合的单个列。它使用一个附加表进行映射，该表包含一个字符串列 (recs_detail_name) 和一个引用所属表主键的外键列。这当然在[hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-ofvalues)中有所描述。

如果要将 Set 映射到单个列，则必须使用自定义用户类型。

# oracle - 在数据库中实现“两者，非此即彼，但非空”的要求

> ID：10456525
> 
> 赞同：2
> 
> 时间：2012-05-04T21:43:53.653
> 
> 标签：oracle, database-design

我需要一个网络应用程序，该应用程序规定用户应该能够上传说明文档（.pdf、.doc、.txt）或提供说明文本。用户可以上传文档并提供文本，或者他们可以做一个或另一个，但他们必须做一些事情（不可为空）。这将如何在数据库中设计？这会被认为是一个完整的子类型（见下文）吗？

![在此处输入图像描述](../Images/c251c46036bd715227cadf4bf34f388b.png) 这是更大模式的一小部分，所以我只是发布了我认为对于这个特定问题有必要的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:55:32.653

[Ypercube 的回答](https://stackoverflow.com/a/10456998/533120)很好，但事实上，这可以纯粹通过声明完整性来完成，同时保留单独的表格。诀窍是将延迟循环外键与一些创造性的非规范化结合起来：

![在此处输入图像描述](../Images/d1056856cdec447a96b82c01c3c533b9.png)

```
CREATE TABLE Instruction (
    InstructionId INT PRIMARY KEY,
    TextId INT UNIQUE,
    DocumentId INT UNIQUE,
    CHECK (
        (TextId IS NOT NULL AND InstructionId = TextId)
        OR (DocumentId IS NOT NULL AND InstructionId = DocumentId)
    )
);

CREATE TABLE Text (
    InstructionId INT PRIMARY KEY,
    FOREIGN KEY (InstructionId) REFERENCES Instruction (TextId) ON DELETE CASCADE
);

CREATE TABLE Document (
    InstructionId INT PRIMARY KEY,
    FOREIGN KEY (InstructionId) REFERENCES Instruction (DocumentId) ON DELETE CASCADE
);

ALTER TABLE Instruction ADD FOREIGN KEY (TextId) REFERENCES Text DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE Instruction ADD FOREIGN KEY (DocumentId) REFERENCES Document DEFERRABLE INITIALLY DEFERRED; 
```

插入文本是这样完成的：

```
INSERT INTO Instruction (InstructionId, TextId) VALUES (1, 1);
INSERT INTO Text (InstructionId) VALUES (1);
COMMIT; 
```

像这样插入文档：

```
INSERT INTO Instruction (InstructionId, DocumentId) VALUES (2, 2);
INSERT INTO Document (InstructionId) VALUES (2);
COMMIT; 
```

并像这样插入文本和文档：

```
INSERT INTO Instruction (InstructionId, TextId, DocumentId) VALUES (3, 3, 3);
INSERT INTO Text (InstructionId) VALUES (3);
INSERT INTO Document (InstructionId) VALUES (3);
COMMIT; 
```

但是，尝试单独插入指令在提交时**失败：**

```
INSERT INTO Instruction (InstructionId, TextId) VALUES (4, 4);
COMMIT; -- Error (FOREIGN KEY violation). 
```

尝试插入“不匹配的类型”在提交时也会**失败：**

```
INSERT INTO Document (InstructionId) VALUES (1);
COMMIT; -- Error (FOREIGN KEY violation). 
```

当然，尝试将错误值插入指令会**失败**（这次是在提交之前）：

```
INSERT INTO Instruction (InstructionId, TextId) VALUES (5, 6); -- Error (CHECK violation).
INSERT INTO Instruction (InstructionId) VALUES (7); -- Error (CHECK violation). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T22:36:17.137

I think that this cannot be done with Declarative Referential Integrity alone - not if your design has these 3 separate tables.

You'll have to ensure that all Insert/Delete/Update operations are done within transactions (stored procedures) that enforce such a requirement - so no row is ever inserted or left in table `Instruction` without a relative row in either one of the 2 other tables.

* * *

If you don't mind having nullable fields, you could merge the 3 tables into one and use a `CHECK` constraint:

```
CREATE TABLE Instruction
( InstructionID INT          NOT NULL
, Text          VARCHAR(255) NULL
, Filepath      VARCHAR(255) NULL
, PRIMARY KEY (InstructionID)
, CONSTRAINT Instruction_has_either_text_or_document 
    CHECK (Text IS NOT NULL OR FilePath IS NOT NULL)
) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T21:52:15.273

如果用户提交了文本，您的应用程序可以将其保存为 .txt 文件吗？这样，您只需要担心处理文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:13:18.773

这里感觉有点不对劲

1.  此架构中没有`UserID`，因此应将其添加到 `Instruction`表中。

2.  如果用户没有上传任何内容，则（应该）在表中没有该用户的条目`Instruction`。

3.  所以问题——如前所述——不在于对这三个表施加约束。

4.  加载此结构时，请使用存储过程和/或事务——以确保至少填充一个子记录。但是，这与用户必须上传内容的业务需求无关。

# python - 将数据库连接传递给另一个类

> ID：10456535
> 
> 赞同：1
> 
> 时间：2012-05-04T21:45:21.167
> 
> 标签：python

我有两个类，一个使用 selenium 浏览互联网，另一个将数据插入 mysql 数据库。

```
class DBConnection:
    def __init__(self, db_host=DB_HOST, db_port=DB_PORT, db_user=DB_USER, db_password=DB_PASSWORD, db_name=DB_NAME):
        self.host = DB_HOST
        self.port = DB_PORT
        self.name = DB_NAME
        self.user = DB_USER
        self.password = DB_PASSWORD
        self.conn = None
        self.cursor = None

class WebDriver:
    def __init__(self, download_folder=DOWNLOAD_FOLDER):
        self.driver = False

    def start_webdriver(self):
        """
        Initiate a Firefox profile for Selenium WebDriver.
        """
        fp = webdriver.FirefoxProfile()
        self.driver = webdriver.Firefox(firefox_profile=fp) 
```

从 WebDriver 类获取数据库连接的最佳方法是什么？像这样的东西会起作用吗？

```
class WebDriver:
    def __init__(self, download_folder=DOWNLOAD_FOLDER):
        self.driver = False
        self.download_folder = download_folder
        self.last_payment = None
        self.DBConnection = DBConnection()
        self.DBConnection.get_conn()
        self.DBConnection.get_cursor() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:56:12.543

首先，您正在初始化 DBConnection 错误！应该

```
class DBConnection(object):
    def __init__(self, db_host=DB_HOST, db_port=DB_PORT, db_user=DB_USER, db_password=DB_PASSWORD, db_name=DB_NAME):
        self.host = db_host    # lower case!
        self.port = db_port
        self.name = db_name
        self.user = db_user
        self.password = db_password 
```

那么您可以允许用户指定如下设置：

```
class WebDriver(object):
    def __init__(self, download_folder=DOWNLOAD_FOLDER, **kwargs):
        self.driver = False
        self.download_folder = download_folder
        self.last_payment = None
        self.DBConnection = DBConnection(**kwargs)
        self.DBConnection.get_conn()
        self.DBConnection.get_cursor() 
```

# php - 上传某些文件PHP的问题

> ID：10456547
> 
> 赞同：0
> 
> 时间：2012-05-04T21:47:06.447
> 
> 标签：php, debugging, file-upload

我刚得到一个专用服务器，我无法上传 MP4、MPEG 或 FLV 文件。

我正在调试，现在甚至没有上传。我只是在发布表单/上传脚本时这样做：

```
 if(!empty($_REQUEST['add_lesson_info'])) {

            echo $video_name = $_FILES['add_lesson_video']['name'];
            echo '<br />';
            echo $video_type = $_FILES['add_lesson_video']['type'];
            echo '<br />';
            echo $video_size = $_FILES['add_lesson_video']['size'];
            echo '<br />';
            echo $video_tmp_name = $_FILES['add_lesson_video']['tmp_name'];
            echo '<br />';
    ........ 
```

当我上传任何 jpg、jpeg、png 或 gif 时，如果输出数据。但是，如果我尝试 MP4、MPEG 或 FLV，它不会输出任何数据。有什么理由吗？谢谢你。

**注意：**这不是共享服务器上的问题。所以，这可能是我不知道的一些根设置。

**这是 php.ini**

```
register_globals = off
allow_url_fopen = off

expose_php = Off
max_input_time = 10080
max_execution_time = 10080

;extension_dir = ./
upload_tmp_dir = ./tmp

;precision = 12

session.cache_expire = 10080
session.cookie_lifetime = 200000
session.gc_maxlifetime = 10080

memory_limit = 100M
post_max_size = 100M
file_uploads = On
upload_max_filesize = 192M 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:02:23.740

在您对上传的文件进行任何进一步操作之前，您需要确保上传期间没有错误。这就是您必须检查`$_FILES['field_name']['error']`在哪里可以找到指示可能出错的相应代码的部分。

[这是返回的](http://www.php.net/manual/en/features.file-upload.errors.php)值`$_FILES['field_name']['error']`。`0`除或以外的任何内容`UPLOAD_ERR_OK`都表示上传过程中出现问题。

# android-layout - 布局占屏幕尺寸的百分比

> ID：10456552
> 
> 赞同：0
> 
> 时间：2012-05-04T21:47:31.047
> 
> 标签：android-layout

我的活动布局有 3 个主要部分：标题、图片和文章。我试图强制标题占屏幕的 15%，图片占屏幕的 35%，文章文本占 50%。出于某种原因，文章有时会占用更多的空间，而其他时候，则是图片。有没有办法强制尺寸？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
android:id="@+id/ll"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
xmlns:android="http://schemas.android.com/apk/res/android">

<TextView
    android:id="@+id/headline"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Headline" />

<ImageView
    android:id="@+id/picture"
    android:layout_width="fill_parent"
    android:layout_height ="wrap_content"
    android:layout_weight = "35"/>
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight = "50">
    <TextView
    android:id="@+id/storydata"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Story Data" />
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:04:57.043

我和你的情况几乎一样，最后放弃了尝试使用资源文件中的 xml 布局。不知道我花了多少时间摆弄 xml，试图让百分比正确排列，取得了一些成功，但不是我真正想要的。

所以我最终决定在主要活动中以编程方式自己创建布局，结果非常好......

我的布局是 3 个部分。我在顶部有一个公司徽标/图像，我想占据屏幕的 20%。

在中间部分，我有一个滚动区域，里面有文件名。文件列表可以上下滚动，也可以从左到右滚动。我希望这个区域占屏幕的 75%。

第三部分只是一个单独的提交按钮，它会异步调用刷新中间部分的文件列表，它应该是屏幕的 5%。

所以，这里的代码...

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    Resources res = this.getResources();  //  Load the resources

    //  Get available screen size
    Display display = getWindowManager().getDefaultDisplay();
    int screenWidth = display.getWidth();
    int screenHeight = display.getHeight();

    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);
    layout.setId(topLayout);
    layout.setBackgroundColor(0xff000000);
    LinearLayout.LayoutParams lp = new         LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
    layout.setLayoutParams(lp);

    double logoHeight = screenHeight * .20;
    logoHeight = Math.round(logoHeight);

    Bitmap logoImg =  BitmapFactory.decodeResource(res, R.drawable.standardlogo);
    logoImg = Bitmap.createScaledBitmap(logoImg, screenWidth, (int)logoHeight, true);

    ImageView imageView = new ImageView(this);
    imageView.setImageBitmap(logoImg);
    imageView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,         LayoutParams.WRAP_CONTENT));
    layout.addView(imageView);

    double bottomHeight = screenHeight * .05;
    bottomHeight = Math.round(bottomHeight);

    int scrollAreaHeight = screenHeight - (int)logoHeight - (int)bottomHeight - topHeight;

    ScrollView scroll = new ScrollView(this);
    scroll.setBackgroundColor(0xffd8d8d8);
    LinearLayout.LayoutParams slp = new LinearLayout.LayoutParams(screenWidth,         scrollAreaHeight);
    scroll.setLayoutParams(slp);
    layout.addView(scroll);

    HorizontalScrollView hScroll = new HorizontalScrollView(this);
    hScroll.setBackgroundColor(0xffd8d8d8);
    LinearLayout.LayoutParams hlp = new LinearLayout.LayoutParams        (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    hScroll.setLayoutParams(hlp);
    scroll.addView(hScroll);

    TextView tv = new TextView(this);
    tv.setId(textArea);
    LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT,         LayoutParams.WRAP_CONTENT);
    tv.setLayoutParams(lparams);
    tv.setTypeface(Typeface.MONOSPACE);         
    tv.setText("");
    hScroll.addView(tv);

    Button btn = new Button(this);
    btn.setId(sendButton);
    btn.setOnClickListener(sendBtnListener);
    ViewGroup.LayoutParams blp = new ViewGroup.LayoutParams(screenWidth,         LayoutParams.WRAP_CONTENT);
    btn.setLayoutParams(blp);
    btn.setText("List Import Directory");
    layout.addView(btn);

    setContentView(layout);    
} 
```

这是相当多的代码，但它完全符合我的要求，它适用于我测试过的所有屏幕尺寸。我只有一个应用程序的公司徽标 png 图像，这是一个适用于 10 英寸平板电脑的大图像。

注意：topHeight 的值被硬编码为 100，它适用于我测试过的所有设备。它是屏幕顶部的操作或状态栏的高度，并且因设备而异，因此我将其设置为 100 以处理最多两个 48 像素的栏。如果只有一个，它会在屏幕底部留下一些未使用的空间酒吧，但它是最小的。

# javascript - 它只在第二行显示删除消息

> ID：10456555
> 
> 赞同：0
> 
> 时间：2012-05-04T21:47:47.443
> 
> 标签：javascript, jquery

下面是显示删除消息“ `$(".imagemsg" + counter).html(data);`”的代码。但是它只在第二行删除文件后显示删除消息，这是不正确的，它应该只显示在删除文件的行中。

例如，如果文件从第 3 行删除，则应在第 3 行显示该消息，如果从第 6 行删除文件，则应在第 6 行显示删除消息等。但此时无论是哪一行文件被删除，只有第二行显示删除消息。

```
 var counter = 0;

function stopImageUpload(success, imagefilename){

      var result = '';
      counter++;

      if (success == 1){
         result = '<span class="imagemsg'+counter+'">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

         var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $(".imagemsg" + counter).html(data);
       });

       $(this).parent().remove();

    });

      return true;   
} 
```

结果变量在 imageupload.php 中被调用：

打回来：

```
 <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:51:27.567

这种方法总体上并不理想。更好的方法可能是给它们所有相同的类，然后使用,`parent`等来找到合适的元素。 `find``children`

但是，如果不大规模检修您的代码，我认为这应该可以解决它：

```
var _counter = counter;

$('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
        .done(function(data) {

        $(".imagemsg" + _counter).html(data);
    });

    $(this).parent().remove();
}); 
```

基本上，单击处理程序仅附加到适当的按钮并使用适当的`counter`值。

# java - 使用phantm扫描PHP项目时出现Java错误

> ID：10456556
> 
> 赞同：1
> 
> 时间：2012-05-04T21:47:57.610
> 
> 标签：java, php, scala

我正在尝试使用[Phantm](http://lara.epfl.ch/web2010/phantm)扫描我的 PHP 项目。我下载了 release.jar 并正在运行：

```
 java -jar /path/to/my/phantm-1.0.6.jar 
```

我得到以下异常：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: scala/ScalaObject
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at phantm.Main.main(Main.scala)
Caused by: java.lang.ClassNotFoundException: scala.ScalaObject
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 13 more 
```

我在网上看过这可能是因为没有安装scala。我下载并解压缩了 scala 并将其路径添加到 .bash_profile

```
scala -version
Scala code runner version 2.9.2 -- Copyright 2002-2011, LAMP/EPFL 
```

我一定错过了其他东西......我正在运行 OS X Lion。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:11:14.450

尝试以下操作：

```
scala /path/to/my/phantm-1.0.6.jar 
```

使用 Scala 2.9.2 为我工作。Phantm 文档一定没有随着迁移（？）到 Scala 而更新，因为 Scala 类肯定不在那个 jar 中。

或者，您可以明确指定 Scala 运行时的路径（当然，您可能需要更改 jar 的路径）：

```
java -cp /usr/share/scala/lib/scala-library.jar:phantm-1.0.6.jar phantm.Main 
```

但是，如果您已经安装了 Scala，我认为没有任何理由更喜欢这种方法。

# java - 访问抽象数组

> ID：10456559
> 
> 赞同：0
> 
> 时间：2012-05-04T21:48:11.827
> 
> 标签：java, arrays, abstract

为了使解释更容易，我将快速概述该程序。我应该创建一个“在线书店”。我有抽象类项目和 2 个子类，服装和教科书。一般来说，用户将首先用教科书或服装“填充”商店，然后“出售”物品，因为它们有存货。

主要是我创建了一个 Item （抽象）数组，它将包含 Textbook 和 Apparel 类型的对象，就像“商店”一样。尝试访问数组时出现了我的问题。

例如，当“销售”一个项目时，用户输入他们想要购买的书的标题。我必须验证这个标题是否“有货”（即在 Item 数组中）

这是我购买这本书的方法（我是商店中的物品数量，商店是抽象数组，你可以看到它不完整。我被困在 if 语句上）

```
public static void buyBook(Item[] store, int i)
{
    TextBook book = new TextBook();

    String title;
    title = JOptionPane.showInputDialog("Book title: ");

    for(int j = 0; j < i; j++)
    {
        if(store[j] instanceof TextBook)
        {
            if()
        }
} 
```

我的想法是将标题（用户的输入）与商店中的教科书类型（抽象数组）进行比较，我知道它是错误的，但类似于：

```
store[j].getTitle().compareTo(title) 
```

但是当然 store[j] 不能访问 getTitle （因为它在 TextBook 的子类中）

现在我完全被困住了。一些指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:54:02.610

沮丧是你的朋友。`((TextBook)store[j]).getTitle().compareTo(title)`另外，为什么不使用 for-each？`for (Item item : store) if (item instanceof TextBook) ...`

# c - 解开 C++ DLL 函数名称

> ID：10456560
> 
> 赞同：0
> 
> 时间：2012-05-04T21:48:13.167
> 
> 标签：c

我有一个导出 3 个函数的 dll：

### .h 文件

```
extern "C"
{
__declspec(dllexport) BOOLEAN __stdcall InitializeChangeNotify(void);
__declspec(dllexport) BOOLEAN __stdcall PasswordFilter(LPCWSTR AccountName,LPCWSTR FullName,LPCWSTR Password,BOOLEAN SetOperation);
__declspec(dllexport) NTSTATUS __stdcall PasswordChangeNotify(LPCWSTR UserName,ULONG RelativeId,LPCWSTR NewPassword);
} 
```

### .c 文件

```
extern "C"
{
    __declspec(dllexport) BOOLEAN __stdcall InitializeChangeNotify(void)
{
    writeToLog("InitializeChangeNotify()");
    return TRUE;
}

__declspec(dllexport) BOOLEAN __stdcall PasswordFilter(LPCWSTR AccountName,LPCWSTR FullName,LPCWSTR Password,BOOLEAN SetOperation)
{
    writeToLog("PasswordFilter()");
    return TRUE;
}

__declspec(dllexport) NTSTATUS __stdcall PasswordChangeNotify(LPCWSTR UserName,ULONG RelativeId,LPCWSTR NewPassword)
{
    writeToLog("PasswordChangeNotify()");
    return 0;
}
} 
```

我在 VS 2010 中编译。

我看到函数名称取决于：`_InitializeChangeNotify@0, _PasswordChangeNotify@12`. 如何解开这些功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:39:12.317

Looks like [`undname.exe`](http://msdn.microsoft.com/en-us/library/5x49w699.aspx) on windows is the '[`c++filt`](http://linux.die.net/man/1/c++filt)' equivalent.

I've it under `"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\undname.exe"` in my PC.

From the page,

You can use the undname.exe to convert a decorated name to its undecorated form. For example,

```
C:\>undname ?func1@a@@AAEXH@Z
Microsoft (R) C++ Name Undecorator
Copyright (C) Microsoft Corporation 1981-2000\. All rights reserved.Undecoration
of :- "?func1@a@@AAEXH@Z"
is :- "private: void __thiscall a::func1(int)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:53:10.310

_xxx@x 表示这是 __stdcall 调用约定。@ 之后的数字表示参数的摘要大小（以字节为单位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T15:55:18.727

我也遇到了这个，通过指定def文件来解决。例如：

## a.定义：

出口

## 初始化更改通知

在项目设置中，将 Link>> Input>>Module 定义文件设置为 a.def 并重新生成。高温高压

# java - 覆盖受保护的方法，并尝试从超类调用它

> ID：10456561
> 
> 赞同：2
> 
> 时间：2012-05-04T21:48:15.973
> 
> 标签：java, overriding, extends

我的问题来自一个项目。所以让我抽象出一些无关的细节。

我有一个 JAVA 公共类 A，它有两个受保护的静态方法，foo() 和 bar()。方法 foo() 在其主体中调用 bar()。

```
public class A{
  protected static foo(){
     ...
     bar()
     ...
  }
  protected static bar(){print("A.bar()");}

} 
```

现在我还有一个扩展 A 的 B 类。在 B 中，我覆盖 bar()

```
class B extends A{
  @Overrides
  static protected bar(){ print("A.bar() extended");

} 
```

最后，我从 B 中的一个类调用 foo()

```
class B extends A{
  ...
  public static main(){foo()} 
} 
```

我无法理解两点 1\. 编译器 (Eclipse) 要求我删除 @Override 注释。为什么？2.最后main()输出“A.bar()”，表示解析后的bar()目标属于A类，但我打算重写bar()，用A的foo()调用修改后的bar( ）。我怎样才能做到这一点？

你有什么意见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T21:52:31.620

1.  您不能覆盖静态方法。
2.  由于每个方法都是静态的，因此它静态地引用它们。你先打电话`A.foo()`，然后再打电话`A.bar()`。由于您没有实例，因此覆盖方法不起作用。

您需要`static`从您的代码中删除所有内容并`new B().foo()`在您的 main.xml 中使用。

考虑阅读本[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T21:50:58.813

您不能覆盖静态方法，只能覆盖非静态实例方法。您正在尝试在静态环境中使用继承，但这是行不通的。如果你真的需要继承（通常当你认为你需要继承时，实际上你不需要），然后将方法设置为非静态的。

# java - 将数字四舍五入到特定倍数

> ID：10456564
> 
> 赞同：8
> 
> 时间：2012-05-04T21:49:00.267
> 
> 标签：java, function, math, rounding

如何在 Java 中舍入到特定的倍数？在 excel 中，有一个`mround`函数可以轻松舍入到指定的倍数，如下所示：

```
 mRound(variable,multiple) 
```

所以`mRound(x,3)`会返回`9`if`x = 7.9`和`6`if `x = 7.2`。

到目前为止，我发现的所有舍入函数总是四舍五入到最接近的整数或指定的小数位数，但我希望能够更改每个变量的倍数。有谁知道什么功能最适合这种情况？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T21:50:44.403

只需除以数字，四舍五入，然后乘以数字。

```
double mRound(double value, double factor) {
    return Math.round(value / factor) * factor;
} 
```

# javascript - XML 无法在 FF 或 IE 中加载，在 Chrome 中有效

> ID：10456570
> 
> 赞同：0
> 
> 时间：2012-05-04T21:49:30.860
> 
> 标签：javascript, xml, load, xmlhttprequest, soundcloud

请查看以下链接： [http ://www.nba.com/warriors/audiotrack_test_000005.html?mark-jackson-on-the-dan](http://www.nba.com/warriors/audiotrack_test_000005.html?mark-jackson-on-the-dan)

这在 Chrome 中正常工作（意味着它将音轨附加到页面上），但在 Internet Explorer 和 Firefox 中的不同点失败。

在 IE 中它失败了：

```
xmlDoc=loadXMLDoc("http://api.soundcloud.com/users/goldenstatewarriors/tracks?client_id=02db8e29aa2fb5bf590f478b73137c67"); 
```

在 FF 中，它在下面的行中失败：

```
x=xmlDoc.getElementsByTagName("track"); 
```

我以前从未遇到过这样的跨浏览器 XML 加载问题，但这是我第一次从我自己的服务器以外的服务器加载 XML。

有什么可用的解决方案吗？SoundCloud 也提供 JSON，但我没有使用那么多...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:15:49.167

我在 Firefox 中查看过它，firebug 显示来自 api.soundcloud 的响应返回为

```
content-type: text/html. 
```

loadXMLDoc 中的 XMLHttpRequest 在 responseText 属性中获取响应，而不是在 responseXML 中。

查看 soundcloud 网站（我自己从未使用过），您可以通过将调用更改为来指定所需的格式

```
xmlDoc=loadXMLDoc("http://api.soundcloud.com/users/goldenstatewarriors/tracks?client_id=02db8e29aa2fb5bf590f478b73137c67&format=xml"); 
```

添加

```
&format=xml 
```

这个电话至少在 Firefox 中对我有用。

# php - 如何在 CodeIgniter URL 中允许 URI 编码字符？

> ID：10456574
> 
> 赞同：5
> 
> 时间：2012-05-04T21:50:26.613
> 
> 标签：php, codeigniter, url

我正在使用[CodeIgniter 1.7.1](http://www.codeigniter.com)。我允许的 URI 字符设置如下：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_()@&\-'; 
```

[当我输入http://website.com/index.php/controller/method/test%21](http://website.com/index.php/controller/method/test%21)之类的地址时，页面不会加载并给我错误：

> 代码点火器：遇到错误您提交的 URI 包含不允许的字符。

我不明白。`%20`（空格）是允许的，但`%21`（感叹号）是不允许的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T10:52:40.853

`%21``!`在codeigniter中解析。所以codeigniter不支持这个请！进入允许的 uri 配置文件：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_()@&\-!'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-19T03:55:14.610

尝试用这个来逃避它，那应该可以

```
\\+ 
```

# c - C - 从文件中读取（非常简单）

> ID：10456579
> 
> 赞同：0
> 
> 时间：2012-05-04T21:50:50.950
> 
> 标签：c, stdio

我有这段代码，我想从文本文件中读取每一行，然后将其打印到标准输出。无缘无故只将文件的最后一行保存在该字符数组中。任何提示为什么（一些解释是）？

```
 9 int main(){
 10     FILE * f;
 11     char buffer[255];
 12     char * arr[255];
 13     int i=0,n;
 14 
 15     f = fopen("input.txt", "r");
 16     while(1){
 17         if(fgets(buffer,255,f) != NULL ){
 18             arr[i++] = buffer;
 19         }else break;
 20     }
 21     n=i;
 22     for(i=0;i<n;i++){
 23         printf("%s",arr[i]);
 24     }
 25 
 26     fclose(f);
 27     return 0;
 28 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:55:23.653

您的程序只有一个缓冲区，该缓冲区会被文件的每一行覆盖

编辑：

```
char* buf;
while(1){
   buf = malloc(255);
   if(fgets(buf,255,f) != NULL ){
        arr[i++] = buf;
    }
    else break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:01:31.560

`char * arr[255]`是一个指向 255 个字符的数组的指针。当您分配时，`arr[i] = buffer`您正在使指针指向`buffer`（未分配）数组的每个元素。因此，每个元素都将指向相同`char buffer[255]`的 ，当您开始打印时，其中只有最后一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:14:27.337

这里：

```
#include <cstdlib>
#include <string.h>

int main(){
  FILE * f;
  char buffer[255];
  char * arr[255];
  int i=0,n;

  f = fopen("c:\\temp\\input.txt", "r");
  while(1){
     if(fgets(buffer,255,f) != NULL ){
         arr[i] = (char *) malloc(255 * sizeof(char));
         strcpy(arr[i++], buffer);
     }else break;
 }
 n=i;
 for(i=0;i<n;i++){
     printf("%s",arr[i]);
 }

 fclose(f);
 for (int j=0; j<i; j++)
     free(arr[j]);
 return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T21:58:03.277

你永远不会增加 i。在您的阅读循环中，您先保存为 0，然后保存为 i++。但它不会将新的 i 值保存到 i 中。所以你的 i 对于你的下一次迭代是 0。您需要在“arr[i++] = buffer;”之后添加“i = i + 1”

# c - C选择性#define

> ID：10456580
> 
> 赞同：-1
> 
> 时间：2012-05-04T21:50:55.960
> 
> 标签：c, c-preprocessor

我想知道**C**是否允许设置选择性`#define`. 这就是我所说的选择性：如果我定义了一个结构：

```
typedef struct mystruct{  
int (*pointer_function)(struct mystruct* ,struct mystruct);
...
} mystruct;

// and I have:
int main () {
mystruct s1, s2;
// when I do:
s1 = s2;
// I want my #define to recognize that on the left side
// I have mystruct type and use s1.pointer_function(&s1,s2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:56:20.653

#define 执行简单的字符串替换。它不依赖于上下文。你不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:58:11.850

我什至不确定您要定义哪个符号，`s1`或者`s2`. 这并不重要，在任何一种情况下，您都需要替换其中一个您需要的名称，这样它就不起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:05:18.047

`_Generic`您可以使用语法在 C11 中执行此操作。

```
#define MY_MACRO(x, y) _Generic((x), \
    mystruct: (x).pointer_function(&(x), (y)), \
    ) 
```

您不能在 C99 或 C89 中执行此操作。我还不知道任何具有良好 C11 支持的编译器，所以这段代码还不会编译一两年。来自 GCC 文档（[来源](http://gcc.gnu.org/onlinedocs/gcc/Standards.html)）：

> GCC 对该标准的某些部分提供了有限的不完全支持，通过 -std=c11 或 -std=iso9899:2011 启用。

# linux - 即使 nm 指示此符号存在于共享库中，对符号的未定义引用

> ID：10456581
> 
> 赞同：31
> 
> 时间：2012-05-04T21:50:58.143
> 
> 标签：linux, gcc, linker, shared-libraries

这里有什么问题？我有以下简单的课程：

```
#include  "libmnl/libmnl.h"

int main() {
    struct mnl_socket *a = mnl_socket_open(12);
} 
```

运行一个简单的`gcc`compile ( `gcc -lmnl main.c`) 后，我得到以下错误：

```
/tmp/cch3GjuS.o: In function `main':
main.c:(.text+0xe): undefined reference to `mnl_socket_open'
collect2: ld returned 1 exit status 
```

在共享库上运行 nm 表明它确实找到了：

```
aatteka@aatteka-Dell1:/tmp$ nm -D /usr/lib/libmnl.so | grep mnl_socket_open
0000000000001810 T mnl_socket_open 
```

这发生在 Ubuntu 12.04 上。libmnl *-dev*和*libmnl0*软件包已安装。的`strace`输出`gcc`表明`ld`正在使用该 *.so 文件：

```
[pid 10988] stat("/usr/lib/gcc/x86_64-linux-gnu/4.6/libmnl.so", 0x7fff2a39b470) = -1 ENOENT (No such file or directory)
[pid 10988] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/libmnl.so", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10988] stat("/usr/lib/gcc/x86_64-linux-gnu/4.6/libmnl.a", 0x7fff2a39b4d0) = -1 ENOENT (No such file or directory)
[pid 10988] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/libmnl.a", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10988] stat("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libmnl.so", 0x7fff2a39b470) = -1 ENOENT (No such file or directory)
[pid 10988] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libmnl.so", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10988] stat("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libmnl.a", 0x7fff2a39b4d0) = -1 ENOENT (No such file or directory)
[pid 10988] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libmnl.a", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10988] stat("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmnl.so", {st_mode=S_IFREG|0644, st_size=18608, ...}) = 0
[pid 10988] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmnl.so", O_RDONLY) = 7 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-04T21:55:53.497

库必须列在使用它们的对象之后（更准确地说，只有当库包含满足遇到时已知的未定义引用的符号时，才会使用库）。将 移动`-lmnl`到命令的末尾。

# php - 从字符串中删除 HEX 颜色代码 (PHP)

> ID：10456588
> 
> 赞同：1
> 
> 时间：2012-05-04T21:51:34.587
> 
> 标签：php

几天前我开始使用 PHP。

我对我的 MySQL 数据库进行了一些查询，并将结果放在一个表中。一切都很好。

我想显示的一些字符串有颜色代码（十六进制颜色），所以它们看起来像这样：

```
vMafia|#FF00FFKarevan
#Jho#FF0000ny 
```

等等，我想让它们看起来像这样：

```
vMafia|Karevan
#Jhony 
```

我尝试使用`preg_replace`，但我真的不知道要确切替换什么。希望我以一种可以理解的方式解释了我的问题，如果我在语法上犯了错误，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:55:01.233

只需使用下面的代码 preg_replace，它正在搜索以数字符号开头的六字符十六进制代码并将其替换为空白 :)

```
<?
$string = 'Jho#FF0000ny';

echo preg_replace("/#[a-f0-9]{6}/i", "", $string); // Outputs Jhony 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:56:32.477

尝试

`preg_replace('/#[a-f0-9]{6}/i', '', $your_string)`

# regex - 单次匹配单词

> ID：10456589
> 
> 赞同：0
> 
> 时间：2012-05-04T21:51:38.550
> 
> 标签：regex

我有这样的字符串：

> 狗 狗 疯狗

我也有以下正则表达式：

```
[dog]* 
```

现在，这匹配 dog dog ddog。我想摆脱额外的 d，并希望保持 1xdog dog dog 而不是 3xdog。

我是否遗漏了什么，或者这看起来有点棘手？

编辑：为了更好地解释，我不确定这是否只是困难或遗漏了什么。(dog)* 将产生 2 个命中：dog dog，第二个命中是 dog（从最后一个字符串开始）。我只想要一只打狗狗。例如，正则表达式突出显示正则表达式所击中的内容。

编辑2：基本上我问的是你是否必须使用 [dog]* （注意必须），你如何摆脱额外的 d ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:59:43.697

使用方括号，您正在创建一个字符类。这意味着`[dog]`将匹配括号内的任何字符。`*`使其匹配这些字符之一的 0 次或多次。因此，它确实匹配“ddog”。它也会匹配“good”或“ggddo”。

# dart - 带有 Dart 的 CORS，我如何让它工作？

> ID：10456591
> 
> 赞同：16
> 
> 时间：2012-05-04T21:51:58.283
> 
> 标签：dart, dart-html

刚开始修补 Dart，我决定编写一个简单的 Http Server 和一个客户端。我的服务器代码：

```
#import("dart:io");

final HOST = "127.0.0.1";
final PORT = 8080;
final LOG_REQUESTS = true;

void main() {
  HttpServer server = new HttpServer();
  server.addRequestHandler((HttpRequest request) => true, requestReceivedHandler);
  server.listen(HOST, PORT);
  print("Server is running on ${PORT}."); 
}

void requestReceivedHandler(HttpRequest request, HttpResponse response) {
  var pathname = request.uri;
  var apiresponse="";
  if (LOG_REQUESTS) {
    print("Request: ${request.method} ${pathname}");
  }
  if(pathname == '/api'){
    response.headers.set(HttpHeaders.CONTENT_TYPE, "text/plain; charset=UTF-8");
    response.headers.add("Access-Control-Allow-Methods", "POST, OPTIONS, GET");
    response.headers.add("Access-Control-Allow-Origin", "*");
    response.headers.add('Access-Control-Allow-Headers', '*');
    print('welcome to the good life');
    response.outputStream.writeString("API Call");
    response.outputStream.close();
  }
} 
```

我的客户代码：

```
#import('dart:html');
#import('dart:json');

class dartjson {

  dartjson() {
  }

  void run() {
    write("Hello World!");
  }

  void fetchFeed(){
    XMLHttpRequest xhr = new XMLHttpRequest();
    var url = "http://127.0.0.1:8080/api";
    xhr.open("GET", url, true);
    xhr.setRequestHeader('Content-Type', 'text/plain');
    //xhr.setRequestHeader('Access-Control-Request-Headers', 'http://127.0.0.1:3030');
    xhr.send();
    print(xhr.responseText);
    document.query('#status').innerHTML = xhr.responseText;

  }

void main() {
  new dartjson().fetchFeed();
} 
```

我不断收到错误：

```
XMLHttpRequest cannot load http://127.0.0.1:8080/api. Origin
http://127.0.0.1:3030 is not allowed by Access-Control-Allow-Origin. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-18T09:51:29.200

面临同样的问题。下面是我的服务器代码。它只是打印查询参数。添加了访问控制标头以解决此问题。

```
 HttpServer.bind('127.0.0.1', 8080).then((server){
    server.listen((HttpRequest request){     
      request.uri.queryParameters.forEach((param,val){
        print(param + '-' + val);
      });

      request.response.headers.add("Access-Control-Allow-Origin", "*");
      request.response.headers.add("Access-Control-Allow-Methods", "POST,GET,DELETE,PUT,OPTIONS");

      request.response.statusCode = HttpStatus.OK;
      request.response.write("Success!");
      request.response.close();
    });
  }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T06:25:11.883

您可以简化您的生活并从同一主机：端口地址运行两个服务器/客户端脚本。[在http://www.dartlang.org/articles/io/#web-servers](http://www.dartlang.org/articles/io/#web-servers)有一个小型网络服务器示例，它也提供静态文件。添加您的“/api”处理程序并确保您的客户端文件位于同一目录中。示例服务器比运行在端口 3030 上的 Dart Editor 内置服务器慢很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-29T14:08:55.423

这是我的解决方案：

```
request.response.headers.add("Access-Control-Allow-Origin", "*");
request.response.headers.add("Access-Control-Allow-Headers", "*");
request.response.headers.add("Access-Control-Allow-Methods", "POST,GET,DELETE,PUT,OPTIONS"); 
```

# c# - 计算数组的频率分布？

> ID：10456592
> 
> 赞同：3
> 
> 时间：2012-05-04T21:51:59.127
> 
> 标签：c#, arrays

我需要编写一个程序，将数据读入 int 类型的数组。有效值从 0 到 10。您的程序应确定输入了多少值。***输出不同条目的列表以及该条目出现的次数***。”

我在粗体部分遇到问题，这就是我目前所拥有的......

```
static void Main(string[] args)
{
    Console.WriteLine("How many scores will you enter?");

    int total = 0;
    string inValue;
    string Size = Console.ReadLine();
    int arraySize = Convert.ToInt32(Size);
    int [] ScoreArray = new int [arraySize];

    for (int i = 0; i < ScoreArray.Length; i++)
    {

        Console.Write("Enter a Number between 0 and 10, #{0}: ", i + 1);
        inValue = Console.ReadLine();
        ScoreArray[i] = Convert.ToInt32(inValue);

        total += ScoreArray[i];
    }

    Console.WriteLine("Number of scores entered: " + arraySize);
    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:33:27.127

确保添加

```
using System.Collections.Generic;
using System.Linq; 
```

然后

```
Console.WriteLine("Distinct values entered & No. of times values entered:");

int[] distinctvalues = ScoreArray.Distinct().OrderBy(x => x).ToArray(); 
//Finds distinct values and orders them in ascending order.

int[] distinctcount = ScoreArray.FindAllIndexof(distinctvalues).ToArray();
//Finds how many times distinct values are entered.

for (int i = 0; i < distinctvalues.Length; i++)
   Console.WriteLine(distinctvalues[i].ToString() + " --------- Entered " + 
   distinctcount[i].ToString() + " times");

Console.Read(); 
```

对于函数，在你的类之外`FindAllIndexof`创建一个`Extension Method``static class``Program`

```
public static class EM
{
    public static int[] FindAllIndexof<T>(this IEnumerable<T> values, T[] val)
    {
        List<int> index = new List<int>();
        for (int j = 0; j < val.Length; j++)
            index.Add(values.Count(x => object.Equals(x, val[j])));
        return index.ToArray();
    }
} 
```

输出

![在此处输入图像描述](../Images/8d88df04b2876aee6eb3ee3988a12919.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:58:36.983

我认为这里的关键是**有效值在 0-10 之间**。我会使用数组索引来存储每个值本身。例如，如果您处理值 5，则递增`values[5]`。

所以首先你要初始化一个数组，如：

```
int[] values = new int[11]; //Values 0-10 
```

然后，循环直到用户刚刚输入*空白*：

```
while(true)
{
   string inValue = Console.ReadLine();
   if(String.IsNullOrEmpty(inValue)) break;

   values[Convert.ToInt32(inValue)]++; //Bounds checking would be nice here
} 
```

然后，您可以通过遍历数组一次并打印出任何值大于 0 的索引来显示排序的不同列表：

```
for(int i = 0; i < values.length; i++)
{
   if(values[i] > 0)
   {
      Console.WriteLine("Value {0} was entered {1} time(s)..", i, values[i]);
   }
} 
```

这很可能是您的教授正在寻找的。我没有测试上面的代码，那是你的工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:13:42.337

此代码使您需要的一切：

```
 static void Main(string[] args)
        { 
            //input data
            int[] inputArray = new int[5];
            int enteredCount = 0;
            string enteredLine = string.Empty;

            Console.WriteLine("Enter numbers from 0 to 10\. If you want to end please enter nothing");
            //while user input something not blank
            while ((enteredLine = Console.ReadLine()) != string.Empty)
            {
                //inputArray has no more elements, resize it
                if (enteredCount == inputArray.Length)
                {
                    Array.Resize<int>(ref inputArray, inputArray.Length + 5);
                }

                //new entered value to array
                inputArray[enteredCount] = int.Parse(enteredLine);
                enteredCount++;
            }

            //now we need count all uniq elements
            //special array. Index is a number from 0 to 10\. Value is a count of that value
            int[] counts = new int[11];
            for (int i = 0; i < enteredCount; i++)
            {
                int enteredNumber = inputArray[i];
                counts[enteredNumber]++;
            }

            Console.WriteLine("Totally were entered {0} numbers", enteredCount);

            //now we now count of each number from 0 to 11\. Let' print them
            for (int i = 0; i < 11; i++)
            {
                //Print only numbers, that we entered at least once
                if (counts[i] != 0)
                    Console.WriteLine("Number {0} were entered {1} times", i, counts[i]);
            }

            Console.ReadLine();
        } 
```

# c# - 通过 webbrowser 从 silverlight 到 winforms 的通信

> ID：10456593
> 
> 赞同：3
> 
> 时间：2012-05-04T21:52:00.623
> 
> 标签：c#, winforms, silverlight, webbrowser-control

我正在尝试通过 Winforms 应用程序将 JSON 字符串发送到我的 Silverlight 应用程序。

我已经尝试过几次通过暴露我的silverlight方法来完成它

```
HtmlPage.RegisterScriptableObject("Page", this);
.....
[ScriptableMember]
public void CallMeInSilverlight(string message)
{
    HtmlPage.Window.Alert("The form said: " + message);
} 
```

在javascript中

```
function CallMe(message) {
    var control = document.getElementById('silverlightControl');
    control.Content.Page.CallMeInSilverlight(message);
} 
```

但由于某种原因，我无法使用 javascript 进行这项工作。它只是没有被调用。

在 Winforms

```
webBrowser1.Document.InvokeScript("CallMe", new object[] { "testing 1 2 3" }); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:11:28.240

我注意到，当我构建我的项目时，由 Silverlight 创建的文本页面会被写入。

由于这是我的 webbrowser 发布它的 javascript 命令的 html 页面，因此这些命令从未到达 silverlight 控件。

在使用 javascript 命令创建一个单独的页面后，它运行良好。

# jquery - Jquery 平移滑块 - 基于屏幕分辨率的图像宽度

> ID：10456594
> 
> 赞同：0
> 
> 时间：2012-05-04T21:52:03.510
> 
> 标签：jquery, css, jquery-plugins, slider, fullscreen

我正在尝试将流行的平移滑块[Jquery Panning Slider](http://s3.amazonaws.com/buildinternet/live-tutorials/panning-slideshow/panning-slideshow.htm) 用于网站。

此处解释了标记结构、css 和 jquery：-[滑块详细信息](http://buildinternet.com/2010/02/animate-panning-slideshow-with-jquery/)

当前滑块的工作方式是，它只接受滑块容器 div 和 ul 宽度的预定义数字输入（所有图像都是从中调用的）。这使得在图像可以占据整个浏览器视口而不是预定义的宽度和高度的情况下很难使用。我想让滑块占据整个视口，屏幕分辨率高达 1600 像素。

我想在滑块中使用的图像宽度为 1600 像素，高度为 804 像素，我想根据不同屏幕上的纵横比和浏览器屏幕尺寸进行缩放。

在我用谷歌搜索并浏览了一些网页之后，我所理解的只是

$(window).width()

需要在页面的某个地方使用。除此之外，我被困住了。有人可以帮我..提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:40:30.087

也许您应该尝试使用响应式滑块。有很多 jquery 免费插件可以完成这项工作..

# javascript - Javascript：DIV 层的条件动画

> ID：10456595
> 
> 赞同：2
> 
> 时间：2012-05-04T21:52:11.513
> 
> 标签：javascript, jquery, animation, jquery-animate, jstween

我想在单击另一个 div 时启用 DIV 层的动画。同时，我需要有一个条件语句，仅当我计划制作动画的 DIV 层还没有动画时才启用动画。

我正在考虑检查高度值，因为我为 div 的高度设置了动画。我想知道如何正确检查 div 层的高度以允许动画，例如高度 400px。

我还打开了一种更好的方法来控制我的示例中的动画。我正在使用[JSTween](http://www.jstween.org/)库。下面是代码。任何建议都非常感谢！谢谢你。

```
<script type="text/javascript">
        window.onload = function() {
            $("#plus").click(function() {
                $("#chromebottom").tween({
                            height:{
                              start: 0,
                              stop: 400,
                              time: 0,
                              units: 'px',
                              duration: 1,
                              effect:'quartOut'
                           }
                        });
                        $.play();
            });
        };
    </script> 
```

款式：

```
#chromebottom {
background-color: rgb(230, 230, 230);
border: 1px solid rgb(230, 230, 230);
height: 35px;
left: 0px;
width: 100%;
position: absolute;
bottom: 0px;
z-index:1;
background:#cccccc;
}
#plus
{
position: absolute;
left: 20px;
bottom: 50px;
width: 25px;
height: 25px;
background-color:#F00;
color: #FFF;
margin:2px;
padding:2px;
display:block;
z-index: 3;
}
enter code here
#plus:hover{
background-color:#600;
cursor: pointer;
} 
```

身体：

```
<body>
         <div id="plus">+</div> 
         <div id="chromebottom"></div>
    <body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:15:03.857

只需在动画 div 上放一个标志。我为此使用了 HTML5`data-*`属性，但您也可以使用 jQuery 的[data()](http://api.jquery.com/jQuery.data/)函数。

只需将您的 javascript 代码和 html 更改为以下并查看我的**[DEMO](http://jsfiddle.net/neysor/8guQJ/1/)**：

### JavaScript

```
$("#plus").click(function() {
    cb = $("#chromebottom");
    if (cb.attr("data-animation") == "false") {
        cb.attr("data-animation", "true");
        $("#chromebottom").tween({
            height: {
                start: 0,
                stop: 400,
                time: 0,
                units: 'px',
                duration: 1,
                effect: 'quartOut',
                onStop: function() {
                    cb.attr("data-animation", "false");
                }
            }

        });
        $.play();
    }

});​ 
```

### HTML

```
<body>
         <div id="plus">+</div> 
         <div id="chromebottom" data-animation="false"></div>
<body>​ 
```

这会奏效！

**更新**

你想要像[Update 1](http://jsfiddle.net/neysor/8guQJ/7/)或[UPDATE 2](http://jsfiddle.net/neysor/8guQJ/8/)或[UPDATE 3](http://jsfiddle.net/neysor/8guQJ/9/)这样的东西吗？或者我只是没有得到你想要的。然后请尝试更好地描述它:)

# deployment - 当我将 LightSwitch 应用程序发布到 Azure 暂存时，生产部署停止

> ID：10456597
> 
> 赞同：0
> 
> 时间：2012-05-04T21:52:24.233
> 
> 标签：deployment, azure, production, staging

每次我将我的应用程序发布到暂存（从 Visual Studio 2010 中的 LightSwitch 发布向导）时，我的生产部署都会停止。然后我可以重新开始生产部署，但这显然不是我想要的。

暂存部署和生产部署共享相同的存储和 SQL Azure 数据库。

任何想法都会受到赞赏。

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:59:59.673

这不是正常行为。我建议您联系 Azure 支持。通常，Azure 部署是相互隔离的。

潜在的想法：当你说生产部署停止时，你的意思是实例实际上进入了“停止”状态还是根本不工作？如果是后者，也许您正在使用 AppFabric 缓存并且在第二次部署上线时连接不足？

# ruby - 有没有办法在 RSpec 中获取当前范围级别？

> ID：10456605
> 
> 赞同：4
> 
> 时间：2012-05-04T21:53:58.177
> 
> 标签：ruby, rspec, scope, indentation

这完全是愚蠢和不重要的，但我只是好奇：使用[RSpec](http://rspec.info/)，我能以某种方式访问​​我所在的范围的“深度”吗？那是...

```
describe SomeClass do
  describe "#some_method" do
    context "within some context" do
      it "is possible, what I'm asking" do
        # Actually, I'm not entirely sure what I'd expect this
        # value to be... basically, whatever the RSpec designers
        # felt made sense.
        mysterious_method_to_get_depth.should == 3
      end
    end
  end
end 
```

我实际上是在问，因为我想输出一些有用的信息，但是测试输出仍然具有最大的可读性（即，具有适当的缩进）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T06:48:27.990

在您的示例中，您可以使用`example.metadata`，这是一个提供大量信息的哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T16:41:35.467

按照@Myron Marston 的建议，我实现了这样的东西：

```
def mysterious_method_to_get_depth(meta)
    if !meta.has_key?(:example_group)
        0
    else
        1 + mysterious_method_to_get_depth(meta[:example_group])
    end
end 
```

你应该这样称呼它：`mysterious_method_to_get_depth(example.metadata)`

另一种解决方案是自定义 DocumentationFormatter：[https ://stackoverflow.com/a/23446897/659788](https://stackoverflow.com/a/23446897/659788)

# assembly - 在高级汇编 HLA 中添加语句

> ID：10456608
> 
> 赞同：0
> 
> 时间：2012-05-04T21:54:11.170
> 
> 标签：assembly, x86, hla

嗨，我只想添加到变量中，但我不知道该怎么做。

```
static
input: uns8;
i:real32;
noOfItems: uns8; 
```

我想`noOfItems=numberOfItems + i;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:32:55.073

在进一步进行编码之前，您可能需要阅读[HLA 文档。](http://homepage.mac.com/randyhyde/webster.cs.ucr.edu/HighLevelAsm/HLADoc/index.html)

要将变量加 1，可以使用以下`INC`命令：

```
inc( noOfItems ) 
```

否则，请改用该`ADD`命令：

```
add( i, noOfItems ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:39:42.770

我已经通过首先将值保存在寄存器中然后添加它来解决它

```
mov( unitPrice, edx);
add(edx , totalunitPrice ); 
```

# asp.net-mvc - ASP.NET MVC 3.0 模型与基类和派生类绑定？

> ID：10456614
> 
> 赞同：6
> 
> 时间：2012-05-04T21:54:43.073
> 
> 标签：asp.net-mvc, class, binding, derived

大家好，我有一个名为 Vehicle 的基类，其中包含所有车辆共有的所有属性，并且我有多个名为 Car、Jeep 的派生类，它们派生自 Vehicle 并添加更多属性

前任：

```
 public class Vehicle
{
    public int Color { get; set; }
    public double Cost { get; set; }
}

public class Car : Vehicle
{
    public SelectListItem Option { get; set; }
} 
```

我有一个 Page 类，其中有一个像这样的车辆列表

```
public class Page
{
    public List<Vehicle> vehicles { get; set; }
} 
```

我的视图是 Page 类的强类型，所以在我看来，我正在循环所有车辆以显示在这样的页面上，此代码在 @using(Html.BeginForm()) 内部，因此我们回发用户选择

```
 for(int i=0;i<Model.Vehicles.Count;i++)
{
    <div id="Question">
        @{
            @Html.EditorFor(m => m.Vehicle[i], VehicleConstants.GetTemplateName(Model.Questions[i]));
         }
    <br />
    </div>
 } 
```

我为每种类型的车辆使用一个编辑器模板，因此调用 VehicleConstants.GetTemplateName 的函数仅根据车辆类型返回要使用的模板名称

这个模板只是简单的在car类或者Jeep类上写属性（Derived class + Base class）

我遇到的问题是，当表单被发回时，我只能访问控制器中基类车辆的属性，我无法获得子类汽车或吉普车的属性值。

```
 [HttpPost]
    public string ReadPost(Page page)
    {
    } 
```

回发表单时自动绑定这些值的最佳方法是什么？

创建自定义活页夹类是我唯一的选择吗？有人可以为我提供一些示例代码来说明如何执行此操作吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T06:26:12.303

为此，您将不得不使用自定义模型绑定器。默认模型绑定器不知道要实例化哪种具体类型。您可以在每一行中包含一个隐藏字段，指示您的自定义模型绑定器将创建的具体类型。我有[`shown this in action here`](https://stackoverflow.com/a/6485552/29407)。顺便注意，通过使用标准模板命名约定，您可以摆脱`for`正在使用的循环以及`VehicleConstants.GetTemplateName`方法。

# jira - 可以更改 Jira 中字段的顺序吗？

> ID：10456615
> 
> 赞同：4
> 
> 时间：2012-05-04T21:54:52.760
> 
> 标签：jira

是否可以更改出现在 Jira 中的字段顺序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T02:43:41.893

使用 Jira 5，您可以定义**[屏幕](http://confluence.atlassian.com/display/JIRA/Defining+a+Screen)**中字段的顺序：

![吉拉屏幕](../Images/52fdeed46a00a7f620b7df5a80161875.png)

> *   在**`Add Field`**“配置屏幕”页面末尾的表单中，从“要添加的字段”列表中选择要添加到屏幕的字段。
> *   （信息）如果您愿意，请指定表示字段相对于其他字段应添加到的位置的数字。
> *   （打勾）使用表格位置列中指示的数字作为指导。通过在“位置”选项中输入位置编号，将放置该字段的位置。
> *   （信息）如果您选择了多个字段并指定了一个位置，则选择的最上面的字段将被放置在相应的位置，而其他字段则位于其正下方。
> *   单击添加按钮。

因此，如果您可以访问 Jira 的管理部分，您可以在其中定义/更新与给定表单关联的屏幕，那么可以，您可以定义这些字段的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:02:57.877

似乎这在 JIRA OnDemand 中不可用，仅在 JIRA 下载版本中可用...

# c# - 设置颜色选择 DataGrid 的整行，以及更改背景颜色后的 MouseOver 行为

> ID：10456617
> 
> 赞同：0
> 
> 时间：2012-05-04T21:54:55.163
> 
> 标签：c#, wpf, datagrid, mouseover, selecteditem

我的问题是关于页面表单中的 DataGrid，使用 C#.NET 4.0 编程。该应用程序适用于桌面，而不是 Web 或 Silverlight。

我已经对我们页面的 DataGrid 进行了更改，而不是更改背景。不幸的是，当我选择一行时，它只会变为蓝色（选择标识的颜色）只会影响该行的列。在其中一些数据网格中，我还有一些空间。我需要做的是完全选择该行，包括那个空白区域。

另一件发生变化的事情是当鼠标悬停在任何记录上时的鼠标行为。在此更改之后，现在此行为不再发生。

任何线索我需要做什么？

**编辑：**添加代码：

我的转换器：

```
public class RetornaCorFundoGrid : DependencyObject, IValueConverter
{
    public static DependencyProperty CorFundoGridParameterProperty =
        DependencyProperty.Register("CorFundoGridParameter", typeof(IEnumerable<Object>), typeof(RetornaCorFundoGrid));

    public IEnumerable<Object> CorFundoGridParameter
    {
        get { return ((IEnumerable<Object>)GetValue(CorFundoGridParameterProperty)); }
        set { SetValue(CorFundoGridParameterProperty, value); }
    }

    public object Convert(Object value, Type targetType, object parameter, CultureInfo culture)
    {
        try
        {
            if (System.Convert.ToInt16(value) < 5)
                return Brushes.BlueViolet;
            if (System.Convert.ToInt16(value) < 15)
                return Brushes.CadetBlue;
            else
                return Brushes.Coral;
        }
        catch (Exception)
        {
            return Brushes.Black;
        }

    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我的绑定反射器：

```
<ut:BindingReflector Target="{Binding Mode=OneWayToSource, Source = {StaticResource RetornaCorFundoGrid}, Path=CorFundoGridParameter}" 
                         Source="{Binding Parameters, Mode=OneWay}" /> 
```

我的行样式：

```
<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="Background" Value="{Binding Path=Id, Converter={StaticResource RetornaCorFundoGrid}}"/>
    </Style>
</DataGrid.RowStyle> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:11:54.570

要为 DataGrid 的整行着色，您需要为`DataGrid.RowStyle`定义行的背景颜色设置样式。您可能需要将单元格的背景设置为透明（以免隐藏行颜色）或更改它们以匹配行颜色。此外，您将需要设置选择颜色和处理鼠标悬停事件的 EventTrigger。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:09:43.870

我在理解您的要求时遇到了一些麻烦，但这也许会有所帮助。要制作仅按整行选择的表格，可以将 SelectionMode 设置为 FullRowSelect。然后，无论何时您单击表格上的任意位置，您都会获得所单击单元格的整行。

至于为单元格着色，您可以遍历当前行中的列，并将 BackColor 和 SelectionBackColor 设置为您想要的任何颜色，如下所示：

```
foreach (DataGridCell cell in myRow.Cells)
{
    cell.Style.BackColor = myColor;
    cell.Style.SelectionBackColor = myColor;
} 
```

不确定鼠标悬停行为是怎么回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:44:52.597

我发现了我的问题...我们使用 ResourceDictionary.xaml。在其中，我们有一个 DataGridRow 的行为定义。当我在这个组件中定义它时，我会覆盖它。

所以，为了解决这个问题，我添加了一个 BasedOn：

```
<DataGrid.RowStyle>
            <Style TargetType="DataGridRow" BasedOn="{StaticResource {x:Type DataGridRow}}">
                <Setter Property="Background" Value="{Binding Path=Id, Converter={StaticResource RetornaCorFundoGrid}}"/>
            </Style>
        </DataGrid.RowStyle > 
```

简单但烦人..

谢谢你的帮助！

# dojo - Dojo dnd 目标和页面加载

> ID：10456619
> 
> 赞同：3
> 
> 时间：2012-05-04T21:54:56.773
> 
> 标签：dojo, shopping-cart, target, drag-and-drop

我的问题与发布在[http://www.sitepen.com/blog/2011/12/05/dojo-drag-n-drop-redux/](http://www.sitepen.com/blog/2011/12/05/dojo-drag-n-drop-redux/)的 dnd 示例（第 4 步：监听事件）有关。

就我而言，我有多个跨多个页面的 dnd 源。如何在购物车（目标）中记录数据，以便加载不同页面后其中的商品不会消失，并且用户可以继续丢弃更多商品？

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:17:57.123

参见[dojotoolkit.org](https://www.google.com/search?q=site:dojotoolkit.org%20dojo%20dnd%20source)

然而，似乎文档不是 1.7 列表的上游；

订阅一组主题，您将知道何时/什么被覆盖

[dojo.topic.subsribe](http://livedocs.dojotoolkit.org/dojo/dnd#summary-of-topics)

*   /dnd/ **start**：当 DnD 开始时。当前源、节点和复制标志（有关详细信息，请参阅管理器的 startDrag()）作为此事件的参数传递。
*   ./dnd/ **source/over**：当鼠标移到源上时。有问题的源作为参数传递。当鼠标离开源时会引发相同的事件。在这种情况下，null 作为参数传递。
*   /dnd/ **drop/before**：在下降之前引发。它可用于捕获丢弃参数。参数与 /dnd/drop 相同。
*   /dnd/ **drop**：引发以执行下降。前三个参数与 /dnd/start 相同。第四个参数是目标对象。请注意，在处理此事件的过程中，节点可能已经被移动，或被重用。如果您需要原始节点，请使用 /dnd/drop/before 捕获它们，或使用源/目标对象的本地事件。
*   /dnd/ **cancel**：当 DnD 被用户取消（通过按 Esc 键）或通过将项目放置在非法位置时。该主题没有参数。

主题订阅示例：

```
dojo.subscribe("dnd/start", function(source, nodes, copy) {
  // see dojo.dnd.startDrag documentation for details
  // this event will process when user picks up a dnditem
  console.log("Arguments:", arguments);

};
dojo.subscribe("dnd/drop", function(source, nodes, copy, target) {
  // see dojo.dnd.startDrag documentation for details
  // this event will process when user releases dnditem on a valid target
  // note the extra parameter, target - in 99% cases a DOM node
  console.log("Arguments:", arguments);
}); 
```

发生的情况是，用户拿起项目 - dndmanager 调用 dojo.publish("dnd/start", this.source, this.selection, this.bCopy)。订阅主题时，您将收到通知。

dojo.topic 就像您订阅了一个邮件列表一样，一旦有消息，您就会收到邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:30:05.333

您希望使用用户选择购买的商品来初始化您的购物车，每一滴都应该

```
<script>
    function dropped(source, nodes, copy, target) {
      if(target.id == "myCardId") {
        var list = dojo.cookie("mycart");
        // split or initialize list (delimiter : comma)
        list = list = "" ? [] : list.split(",");
        if(dojo.indexOf(nodes[0].id), list) != -1)
           // allready there, return
           return;
        else {
           // combine list with every dropped node
           dojo.forEach(nodes, function(dropItem) { list.push(dropItem.id); });
           // set cookie with new variable
           dojo.cookie("mycart", list.join(",");
        }
      }
    }

    ....
   dojo.subscribe("dnd/drop", dropped);
</script> 
```

可以像这样在 PHP 中实现，但我不会详细说明如何获取项目视图，为了示例 - 你在 db_data 中有它们；

```
<?php

if(isset($_COOKIE) && !empty($_COOKIE['mycart'])) {
   $cartContents = "<ul class=\"dndContainer\">";
   foreach(explode(",", $_COOKIE['mycart']) as $id)
      $cartContents .= "<li class=\"dndItem\">".$db_data[$id]->title."</li>";
   $cartContent .= "</ul>";
}
?>
<div id="dragSource"><? print generateView(); ?></div>
<div id="myCartId"><? print $cartContents; ?></div> 
```

或者，对于大型购物车，cookie 是多余的，并且会使标题混乱 上面的脚本可以发送带有 id 和服务器的 XHR 然后将其附加到会话，使用与 javascript 相同的逻辑 - 在这种情况下，只需将 $_COOKIE 替换为 $_SESSION

# javascript - 令人困惑的 Javascript 问题验证表单。输入字段值有效，但输入字段的保存对象无效

> ID：10456621
> 
> 赞同：0
> 
> 时间：2012-05-04T21:55:01.733
> 
> 标签：javascript, object, input, field

为笨拙的标题道歉，这是一个很难用语言表达的问题。这段代码会更好地解释它。

```
alert(formob.Nam.value); //i work correctly
alert(formob.Num.value); //and me  

name=formob.Nam; 
console.log(name); //[object HTMLInputElement]
console.log("name set "+name.value); //i return 'name set undefined'

num=formob.Num;
console.log(num); //<input type="text" name="Num">
console.log("num set "+num.value); //i return 'num set [value entered]' correctly 
```

简化的 HTML：

```
<form method="post" class="well" name="FooterCall">
<input type="text" name="Nam">
<input type="text" name="Num">
<button... onmousedown="subajax(this.form...)"..> 
```

摘要：在一个表单中设置了两个基本相同的字段，但是当该字段设置为 Javascript 对象时，一个设置不正确。

非常感谢您提供的任何帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:06:46.207

如果您使用以下 HTML

```
<form method="post" name="formob">
<input type="text" name="Nam">
<input type="text" name="Num">
</form>
​ 
```

并检查这个你不用`name`作变量名的 JavaScript，它应该可以工作。formob 当然需要是对表单的引用：

```
console.log(formob.Nam.value); //i work correctly
console.log(formob.Num.value); //and me  

xname = formob.Nam;
console.log(xname); //[object HTMLInputElement]
console.log("name set " + xname.value); //i return 'name set undefined'

num = formob.Num;
console.log(num); //<input type="text" name="Num">
console.log("num set " + num.value); //i return 'num set [value entered]' correctly​ 
```

这应该工作

# linux - 构建一个没有源代码的linux模块

> ID：10456628
> 
> 赞同：1
> 
> 时间：2012-05-04T21:55:43.060
> 
> 标签：linux, module, kernel, system, opensuse

我只是想知道，是否可以在没有源代码的情况下构建/插入模块。假设我已经下载了一个openSuse操作系统，并且没有附带内核源代码。如何在不重新编译内核的情况下编译模块并插入模块？

对于没有内核源代码的 openSuse，很难找到完全相同版本的源代码。即使内核的配置不同，您也不能在当前的 openSuse 中插入模块。

但这不可能发生在行业中，不是吗？我们不能编写驱动程序并让用户下载最新版本的源代码并找出正确的配置。

这个问题在业界是如何解决的？我好奇。我对此比较陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:59:53.383

要构建一个模块，您需要内核头文件而不是整个源代码。NVidia 以这种方式重建其内核模块，因此这将是业界解决问题的一种方式。Linux 对纯二进制模块不是很友好，事实上，内核开发人员过去经常更改 ABI 和结构以破坏纯二进制模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:49:48.163

如果您是硬件制造商，理想情况下您会在官方 linux 开发树中获取您的驱动程序，因此所有发行版最终都会继承它。毫无疑问，您会在您的原始提交中获得一些相当坦率的反馈，并且要让其被包含在内将需要对维护者坚持的任何编码风格/质量、界面选择等进行更改。

如果您是一个小批量集成商，购买的主板上已经只有二进制发行版，请意识到除了技术挑战之外，您可能会从知道他们应该能够的最终客户那里得到一些悲伤（或更糟）。请求获取它的来源。

如果您只是为了内部使用而这样做，那么您将面临技术挑战。很可能对于*未经修改的上游支持的*体系结构，您可以从 Suse 甚至上游树中获得足够接近的一组内核头文件，只要您弄清楚您需要什么。但是，如果您的主板具有不受官方支持的硬件（缺少公共数据表）并且依赖于未发布的内核补丁和/或未发布的 gcc 补丁，那么您将处于困境 - 使用基于系统的系统可能没有完全光明的路径在这样的芯片上，除非您可以对足够的硬件独特性进行逆向工程，以便能够使用可以从源代码构建的编译器来构建您自己的内核形式源代码。现在有很多灰色市场的安卓平板电脑陷入了这种困境。

最终，如果您的项目依赖于无法从源代码重新创建的软件库（例如 linux 或 gcc）的二进制文件，那么您将处于危险的境地。如果该项目的目的不仅仅是偶然的内部使用，您可能应该考虑切换到发布必要支持代码（或至少是重新实现它所需的数据表详细信息）的平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:05:31.870

不清楚你说的是什么行业。他们为什么使用linux？在哪里 - 在服务器上，在客户端上？作为桌面系统？

如果他们知道他们可能需要构建模块 - 为什么他们没有内核源代码？

我不知道专门针对 OpenSuse，但对于 Ubuntu，您可以下载内核当前补丁级别的内核头文件。然后就可以编译模块了。在软件存储库管理程序 synaptic 中不难找到它们。

# seo - 谷歌分析显示错误的页面扩展

> ID：10456629
> 
> 赞同：1
> 
> 时间：2012-05-04T21:55:52.077
> 
> 标签：seo, google-analytics

我们最近重新设计了我们的站点，并从静态站点转移到了自定义 CMS，而不是将内容存储在数据库中，而是存储整个页面并生成以您创建的页面命名的文件夹，其中包含 index.php 文件它和我已经完成了从旧 .html 页面到新 .php 页面的所有 301 重定向，但是在谷歌分析内容 - > 概述 - > 网站内容中，我看到主页的页面视图，但它读取 /index.html这是不再存在的旧 index.html 文件，所以当我尝试打开页面时（通过页面旁边的箭头图标）我收到 404 错误，但它似乎正在跟踪它，所以我不是确定为什么会这样。

甚至我知道的新页面也显示为 /services/index.html 而不是 /services/index.php

重新设计和重新发布已经两个月了，这会影响我的 seo 吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:50:21.537

我认为您在这里没有 SEO 问题。登录到您的 Google Analytics 帐户，深入了解您的个人资料，然后单击“管理员”->“个人资料设置”。

在该屏幕上，您是否已`index.html`设置为默认页面？如果是这样，您要么想要删除它，要么将其更改为`index.php`. 谷歌说得最好：

> 尽管 www.example.com/ 可能与 www.example.com/index.html 是同一页面，但它们在您的报告中显示为两个单独的条目。您可以通过为您的个人资料定义默认页面来配置 Google Analytics 以将它们视为同一页面

[https://support.google.com/analytics/bin/answer.py?hl=en&utm_id=ad&answer=1009675](https://support.google.com/analytics/bin/answer.py?hl=en&utm_id=ad&answer=1009675)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:32:53.980

如果您收到 404，则您的重定向不起作用。可能您的 404 页面处理程序还包含 ga 代码，因此您将看到 404 页面作为页面命中。

# language-agnostic - 在 OAuth2.0 中使用 Facebook 访问令牌作为资源所有者凭据

> ID：10456633
> 
> 赞同：5
> 
> 时间：2012-05-04T21:56:13.480
> 
> 标签：language-agnostic, oauth-2.0, oauth-provider

OAuth 2.0 规范定义了[Resource Owner Password Credentials Grant Type](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.3)，它允许将资源所有者密码凭据（即用户名和密码）直接用作授权授予来获取访问令牌。

我想允许用户在客户端上“通过 Facebook 登录”，而不是直接提供凭据。然后，客户端可以将用户的 Facebook 访问令牌交换为授权服务器的访问令牌。这个方案是否适合 OAuth2 的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:57:32.723

> 然后，客户端可以将用户的 Facebook 访问令牌交换为授权服务器的访问令牌。

这是否意味着您有 2 个授权服务器（一个是 Facebook，另一个是您的私人服务器）？如果是 - 您正在滥用 OAuth，应该改用授权代码授予方案。

在 OAuth 2.0 规范 (v25) 的图 5 中，您可以找到工作流定义：

> 1.  资源所有者向客户端提供其用户名和密码。
>     
>     
> 2.  客户端通过包含从资源所有者收到的凭据，从授权服务器的令牌端点请求访问令牌。发出请求时，客户端向授权服务器进行身份验证。
>     
>     
> 3.  授权服务器对客户端进行身份验证并验证资源所有者凭据，如果有效则颁发访问令牌。

这是来自 Facebook [http://developers.facebook.com/docs/guides/web/](http://developers.facebook.com/docs/guides/web/)的引用：

> 为了让用户登录到您的站点，需要做三件事。首先，Facebook 需要对用户进行身份验证。这确保了用户是他们所说的那个人。其次，Facebook 需要对您的网站进行身份验证。这可以确保用户将他们的信息提供给您的网站，而不是其他人。最后，用户必须明确授权您的网站访问他们的信息。这可确保用户确切地知道他们向您的网站披露了哪些数据。

在这两个地方，您都有一个且只有一个授权服务器 - 在您的情况下 - Facebook。

# javascript - ipad：event.touches 是随机未定义的？

> ID：10456640
> 
> 赞同：1
> 
> 时间：2012-05-04T21:56:55.820
> 
> 标签：javascript, jquery, ipad

我有一些简单的代码可以控制 iPad 上的滑块控件。我遇到了一个问题，即控件疯狂地跳来跳去，我将其追溯到`ev.originalEvent.touches`有时`undefined`......

想知道是否有人知道这里可能发生了什么。jQuery 1.7.2, iOS5.1, iPad 3 如果重要的话

```
$( document.body )
    .on( 'mousemove touchmove', function( ev ){
        // logs undefined about 10% of the time???
        console.log( ev.originalEvent.touches );
    } ); 
```

当然，我不能在一个简单的精简案例中重新生成它，尽管这是正在运行的*确切*代码：http: [//jsfiddle.net/vYKhh/4/](http://jsfiddle.net/vYKhh/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T15:07:20.483

似乎当您使用“touchmove”或“mousemove”事件时，touches 数组是“ev.touches”，所以试试这个：

```
$( document.body )
.on( 'mousemove touchmove', function( ev ){
    // logs undefined about 10% of the time???
    console.log( ev.touches );
} ); 
```

但对于“mousedown”和“touchstart”，它仍然是 ev.originalEvent.touches。

# php - 模板类型作为 SWIG 中的结构数据成员

> ID：10456641
> 
> 赞同：6
> 
> 时间：2012-05-04T21:57:00.407
> 
> 标签：php, c++, templates, swig, language-binding

我正在使用 SWIG 为 C++ 库编写 PHP 包装器，但在使用具有模板类型实例作为数据成员的结构时遇到问题。

假设我有以下头文件：

```
template <typename>
struct myvector
{
};

struct S
{
    myvector<int> v;
};

myvector<int> foo();
S bar(); 
```

和接口文件：

```
%module test
%{
#include "test.hpp"
%}

%include "test.hpp"
%template(IntVec) myvector<int>; 
```

当我尝试使用直接返回的函数时`myvector`，它工作正常：

```
$v1 = test::foo(); 
```

但是，当我尝试使用返回`S`对象的函数并尝试访问其类型为的数据成员时`myvector`：

```
$s = test::bar();
$v2 = $s->v; 
```

我在运行时收到以下错误：

```
PHP Fatal error:  Class 'myvectorT_int_t' not found in test.php on line 145 
```

我可能从我的接口文件中遗漏了一些东西，但我不知道是什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T20:54:34.633

据我所知，这是一个 SWIG 错误。其实已经有人[举报了。](http://sourceforge.net/tracker/?func=detail&atid=101645&aid=3428833&group_id=1645)幸运的是，通过 PHP 有一个简单、可靠的解决方法[`class_alias`](http://php.net/manual/en/function.class-alias.php)：

```
%module test
%{
#include "test.h"
%}

%pragma(php) code="
# This code is inserted as a workaround for template bugs with SWIG
class_alias('IntVec', 'myvectorT_int_t');
"

%include "test.h"
%template(IntVec) myvector<int>; 
```

此处的 pragma 插入代码以在生成的 PHP 文件的开头设置别名。

（还有另一种可能的解决方法——而不是使用通过 getter/setter 函数访问的公共成员变量按预期工作）

[错误报告](http://sourceforge.net/tracker/?func=detail&atid=101645&aid=3428833&group_id=1645)还提到了另一种可能的解决方法，尽管我并不热衷于此，因为它需要为模板类型使用一个相当难看的名称。

* * *

## 错误假设的理由

的代码`__get`包括：

```
$c=substr(get_resource_type($r), (strpos(get_resource_type($r), '__') ? strpos(get_resource_type($r), '__') + 2 : 3));
                        return new $c($r); 
```

当您到达此处时，将`$c`设置为`myvectorT_int_t`正确的，除了`%template`指令。

当我们在生成的代码中添加一个`myvector<int> get()`函数时，结果是：`S`

```
 $c=substr(get_resource_type($r), (strpos(get_resource_type($r), '__') ? strpos(get_resource_type($r), '__') + 2 : 3));
 if (!class_exists($c)) {
     return new IntVec($r);
 }
 return new $c($r); 
```

`%template` **其中关键包括没有和**作为特殊检查以查看它是否实际上是正确的通用代码`IntVec`。

里面也有评论`Source/Modules/php.cxx`：

```
// FIXME: Currently we always use call_user_func for __get, so we can
// check and wrap the result.  This is needless if all the properties
// are primitive types.  Also this doesn't handle all the cases which
// a method returning an object does. 
```

最后，同一个Java接口文件生成的代码是正确的。

# android - Android DatePicker 中的上下文

> ID：10456643
> 
> 赞同：1
> 
> 时间：2012-05-04T21:57:03.277
> 
> 标签：android, datepicker, this, android-context

我是 android 新手，我承认我不完全理解适用于 Android 的上下文是什么。我明白一点，但不完全。我正在尝试修改 Android Datepicker，以便只有日期和月份在 DatePickerDialog 中。我问了stackoverflow，并以三个代码块的形式给出了一个答案。代码如下。我的问题是我在 `mDialog = new CustomDPDialog(getContext()`, `this`,... 处遇到一个错误，错误在`getContext()`. 它说这`getContext()`是未定义的`onClickListener`。那么，看看下面的代码，解决方法是`getContext()`什么？创建一个`getContext()`方法实际上会更糟地破坏代码。并使用上下文， null 代替`getContext(), this,`擦除错误，但它不应该是 null，它应该是`this`.

```
static final int ID_DATEPICKER = 0;
private int myYear, myMonth, myDay;
TextView dateDisplay;
Dialog mDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    dateDisplay = (TextView)findViewById(R.id.dateDisplay);

    Button datePickerButton = (Button)findViewById(R.id.datepickerbutton);
    datePickerButton.setOnClickListener(datePickerButtonOnClickListener);
    }
private Button.OnClickListener datePickerButtonOnClickListener
= new Button.OnClickListener(){

    @Override
    public void onClick(View v) {
        final Calendar c = Calendar.getInstance(); 
        mDialog = new CustomDPDialog(getContext(), this, 
        c.get(Calendar.YEAR), c.get(Calendar.MONTH), 
        c.get(Calendar.DAY_OF_MONTH)); 
        mDialog.show(); 
        DatePicker dp = findDatePicker((ViewGroup) mDialog.getWindow().getDecorView()); 
        if (dp != null) { 
        ((ViewGroup) dp.getChildAt(0)).getChildAt(0).setVisibility(View.GONE);
        }
    }

    class CustomDPDialog extends DatePickerDialog {
        public CustomDPDialog(Context context, 
                OnDateSetListener callBack, int myYear, int myMonth, 
                int myDay) {
                super(context, callBack, myYear, myMonth, myDay);
                }
        @Override 
        public void onDateChanged(DatePicker view, int year, int month, int day) {
            super.onDateChanged(view, year, month, day);
            mDialog.setTitle((month + 1) + "-" + day + "-");
        }

    }

    private DatePicker findDatePicker(ViewGroup group) {
        if (group != null) {
            for (int i = 0, j = group.getChildCount(); i < j; i++) {
                View child = group.getChildAt(i);
                if (child instanceof DatePicker) {
                    return (DatePicker) child;
                } else if (child instanceof ViewGroup) {
                    DatePicker result = findDatePicker((ViewGroup) child);
                    if (result != null)
                        return result;
                }
            }
        }
        return null;
    }
};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:58:51.547

尝试

```
v.getContext() 
```

或者

```
getApplicationContext() 
```

我推荐第一个，因为 getApplicationContext() 有时会导致问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:16:56.810

`ActivityName.this`应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:13:13.380

`getActivity()`应该为您解决问题。

# vb.net - 使用 LINQ to Entities 更新对象的外键值

> ID：10456646
> 
> 赞同：0
> 
> 时间：2012-05-04T21:57:18.363
> 
> 标签：vb.net, linq-to-entities

我有两张桌子：

```
Product
 - ProdID       INT PK
 - ProdName     NVARCHAR(30)

Service
 - ServiceID      INT PK
 - ProdServiceID  INT FK: Product
 - ServiceName    NVARCHAR(30) 
```

如何使用 LINQ to 实体更新数据库中的 ProdServiceID？我正在使用 VB

谢谢！

BB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:16:59.233

为什么不能在代码中为 ProdServiceID 属性分配一个新值并调用 context.SaveChanges()？如果您的模型定义正确，这应该会导致相应地更新数据库。

# python - 适用于 iOS 的 Python（如 RubyMotion）

> ID：10456648
> 
> 赞同：23
> 
> 时间：2012-05-04T21:57:40.250
> 
> 标签：python, rubymotion

[RubyMotion](http://www.rubymotion.com/)已经发布，我想知道是否有类似的解决方案可用，或者 Python 即将推出？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-08T21:08:08.747

RubyMotion 不是一个新的跨平台框架（如 Kivy、Papaya、Rhodes 等），而是在原生 iOS 语言 Objective-C 之上的 Ruby 编程语言的实现。因此，RubyMotion 对象*是*Obj-C 对象，但您可以使用动态 Ruby 语法和习惯用法来处理它，而不是使用面向静态的 Objective-C 方法。

您仍然必须学习 Apple SDK，您只需使用“免费”的 Ruby 代码与它交谈。例如，使用 Titatnium，您可以了解该平台的 API 可在多个操作系统上运行，尽管代价是 UI 不匹配和性能损失。

MacRuby 是 RubyMotion 的桌面祖先，它的 Python 类似物是 PyObjC。PyObjC的[Sourceforge 站点](http://pyobjc.sourceforge.net/)在我看来处于休眠状态（最后一次更新是在 2009 年底），所以必须先恢复它，然后进行类似的修改（用某种形式的自动引用计数和二进制编译替换垃圾收集样式的内存管理）为了为 iOS 构建一个类似的 Python 解决方案。

我不认为它会很快从天而降，但总是欢迎惊喜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T20:32:17.333

取决于你追求什么以及为了什么。木瓜做他们所谓的社交引擎（真的是游戏）。但是您可以为此使用 Python 编写代码。[http://papayamobile.com/](http://papayamobile.com/)

# c - 用嵌套循环在C中打印星形（'*'）菱形？

> ID：10456654
> 
> 赞同：0
> 
> 时间：2012-05-04T21:58:26.453
> 
> 标签：c, loops, for-loop, nested

当用户为钻石输入 5 时，我希望能够打印这样的钻石。但也适用于任何奇数且大于 0 的值。

![在此处输入图像描述](../Images/3f53881d8b85a39b4cc6af27b43c0752.png)

我有一个代码可以为用户输入 5 制作菱形，但不适用于所有奇数输入。

```
 half = (size/2)+1;

 for (a=1; a <=  half ; a++) /*top to mid row of diamond*/
   {
     for (b=a; b<half;b++)
       {
     printf(" ");
       }
     for (c= size -2* a; c <=  half; c++)
       {
     printf("*");
       } 
      printf("\n");
   }
 for (a = 1; a < half;a++)
   {
     for (b = a; b>0;b--)
       {
     printf(" ");
       }
     for (c = size-2*a; c >0 ;c--)
       {
     printf("*");
       }
     printf("\n");
   }

  return 0;
} 
```

任何帮助将不胜感激。谢谢。

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:11:53.177

这里发生了两件事：

1.  缩进变化（-1 到“中”，+1“后”）

2.  星数变化（+2 到“中”，-2“之后”）

现在，这可以通过两个循环来完成（一个用于顶部到“中间”，一个用于“之后”），但也可以通过一些数学来确定这些值。让我们探索*一下*:-)

以下是数字：

```
        s(空格) x(星号) n(行号)
__X 2 1 0
_XXX 1 3 1
XXXXXX 0 5 2
_XXX 1 3 3
__X 2 1 4
```

首先注意它`s`关于“中间”对称：

*   s = abs(2 - n)

然后这`x`与`s`（如上面的增量中所述的 2）有关：

*   x = 5 - (s * 2) = 5 - (abs(2 - n) * 2)

希望能提供一些见解！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:04:27.430

几乎可以肯定是作业，所以这里有一个线索。

计算一行前的空格数和该行中的星数。您正在寻找的是行号与这两个值之间的关系。

然后你可以使用两个连续`for`的循环，一个增加星数，另一个减少它。

*在*这些循环中的每一个中，都会有两个*连续*的循环，以打印出所需数量的空格，然后是所需数量的星号，然后是换行符。

* * *

如果您在阅读上述内容后仍然遇到问题，请考虑这一点。对于 (奇数，正如您在评论中声明的那样) 的输入`n`，空间计数从 开始，`(n - 1) / 2`星数从 开始`1`。对于随后的每一行，空格数减少 1，`1`星数增加 0 `2`。

这一直有效，直到空间计数达到`0`，然后你转身走另一条路，确保你不打印中间线两次。

一旦星数达到`0`，你就完成了。

现在您只需将该规范转换为代码 :-)

* * *

现在，由于您在评论中表示您有兴趣制作自己的解决方案，而不仅仅是交给代码，所以我很乐意为您提供一些您可以检查自己的解决方案的东西。这是我将使用的伪代码：

```
# Input data, check and init counters.

input n
make sure n is odd and greater than 2
set numspaces to (n-1) / 2
set numstars to 1

# Gradually get wider until just before middle line.

while numspaces > 0:
    for i = 1 to numspaces: output " "
    for i = 1 to numstars:  output "*"
    output newline
    subtract 1 from numspaces
    add 2 to numstars

# Gradually get thinner until end.

while numstars > 0:
    for i = 1 to numspaces: output " "
    for i = 1 to numstars:  output "*"
    output newline
    add 1 to numspaces
    subtract 2 from numstars 
```

而且，作为最后的练习，您可以重构：

```
 for i = 1 to numspaces: output " "
    for i = 1 to numstars:  output "*"
    output newline 
```

到一个单独的函数中，因为它在两个循环之间是通用的。

* * *

现在，既然你已经有了自己的代码，下面是我用于概念证明的 Python 代码，为了完整性而包含在内：

```
def lineout (sp, st):
    s = ""
    for i in range (sp): s = "%s "%(s)
    for i in range (st): s = "%s*"%(s)
    print s

n = 21
numspaces = (n-1) / 2
numstars = 1

while numspaces > 0:
    lineout (numspaces, numstars)
    numspaces -= 1
    numstars += 2

while numstars > 0:
    lineout (numspaces, numstars)
    numspaces += 1
    numstars -= 2 
```

如果您使用更现代的功能，您可能可以用 Python 更简洁地编写它，但这会破坏快速理解和易于翻译的目的。只需更改`n`为您想要的任何数字（奇数且大于 2，前提是生成的钻石适合您的终端）并享受输出:-)

```
 *
         ***
        *****
       *******
      *********
     ***********
    *************
   ***************
  *****************
 *******************
*********************
 *******************
  *****************
   ***************
    *************
     ***********
      *********
       *******
        *****
         ***
          * 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T18:54:33.363

您现在可能正在学习 C 入门课程，和其他所有人一样，我不鼓励您复制，但这里有一个答案供参考：

为了简单起见，您只需要知道要打印多少个空格和星号。

顺序如下：**[打印空格] [打印星号] [打印空格] [打印 '\n']**。
观察中间行，我们需要：**(0) 个空格，*(numStars) 个*星，(0) 个空格**。
在上面和下面的行中，我们需要：**(1) space, *(numStars - 2)* stars, (1) space**。
一个等等...

这应该让您感觉要计算空格数，您需要计算与中间行的距离。另请注意，每行远离中间，星数减少 2。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv) {

    int num, middle, spaceCount, starCount;

    printf("Enter a num:");
    scanf("%d",&num);   

    middle = (num-1)/2;

    for (int i = 0; i < num; i++){

        spaceCount = abs(middle - i);
        starCount = num - 2*abs(middle - i);

        for(int c = 0; c < spaceCount; c++)
            printf(" ");

        for(int c = 0; c < starCount; c++)
            printf("*");

        for(int c = 0; c < spaceCount; c++)
            printf(" ");

        printf("\n");
    }

    return 0;
} 
```

由于我们正在计算当前行与中间行之间的距离，因此我们需要知道绝对值。***abs***函数是执行此操作的标准 C 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T05:47:13.320

我有点挣扎。也很抱歉，我的最终代码是 C++，而不是严格的 C，因为我已经有 10 年没有使用过 C 了。对于那些试图了解如何为自己解决这个问题的人来说，这里有一个更冗长的解释。在我开始之前，您可以做的一件事来帮助自己，那就是从如下声明开始：

int numStars = 1，numSpaces = 10；

numSpaces 并不重要，只要它足够小以适合您的屏幕......您可以插入任何数字并稍后进行测试。然后，制定你的算法，然后你可以处理输入。

此外，星星之后的空格数与此问题无关。

然后，解决如何输出钻石顶部的问题。我使用计数器循环打印空格，直到我打印第一行的空格数，然后第二个循环（非嵌套）打印该行所需的星数。我们知道在第 1 行中，我们需要打印 10 次空格和 1 次星号。

一旦该行具有所需的空格数和星号，您将转到换行符（“\n”或 endl）。但是下一行你需要多打印 2 个星和少 1 个空格。所以你必须适当地增加/减少。

当你到达中间那排之前的那一排时，你会停下来。换句话说，当 numSpaces 大于 0 时，top 循环需要继续。在循环的最后一次 pass 结束时，numSpaces 减为 0，但它不会打印有 0 个空格和 n 个星（2 个星）的行对于您开始使用的每个空间）。这发生在你的下一个循环中......

然后，您可以运行第二个循环，在最后反转您的增量/减量，但其他方面几乎相同。只有这一次，它应该打印 0 个空格和 10n 个星。然后换行，最后将 numStars 减少 2 并将 numSpaces 增加 1。

如果您还没有使用功能或不允许在实现中使用，那就是它。但是，您可以轻松地调用一个函数，将其传递给每个循环 numSpaces/numStars，以消除重复代码。

这是我在 C++ 中的代码：

```
#include <iostream>

using namespace std;

int main()
{
    int     numStars = 1,
            numSpaces = 10;

    while (numSpaces > 0)
    {
        for (int i = 0; i < numSpaces; i++)
        {
            cout << " ";
        }
        for (int i = 0; i < numStars; i++)
        {
            cout << "*";
        }
        cout << "\n";

        numStars += 2;
        numSpaces--;
    }
    while (numStars > 0)
    {
        for (int i = 0; i < numSpaces; i++)
        {
            cout << " ";
        }
        for (int i = 0; i < numStars; i++)
        {
            cout << "*";
        }
        cout << "\n";
        numStars -= 2;
        numSpaces++;
    }

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T22:03:51.133

我不想给你代码，你应该学习。

输入数字将是菱形的宽度，因此请确保在空格和星号之间建立不超过此数字的关系。

主要思想是从 1 个星号开始，每次递增 2，直到达到输入数字。

此外，如果用户输入偶数，请采取措施防止出错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-12T08:45:43.163

这里是matlab的代码

```
clear all, clc
n=input('Input an Odd Number ');
for i=1:(n+1)/2
    for m=1:(n+1)/2-i
        fprintf(' ');
    end
    for j=1:(2*i)-1
        fprintf('*');
    end
    fprintf('\n');
end
for k=i-1:-1:1
    for m=1:(n+1)/2-k
        fprintf(' ');
    end
    for j=1:(2*k)-1
        fprintf('*');
    end
    fprintf('\n');
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-12T06:54:46.780

```
 static void Main(string[] args)
        {    //check this out more optimized code hope it will be help full.    
    for (int row=-2;row<=2;row++)
        {
        for (int col=-2;col<=2;col++)
        {
        if (Math.Abs(row)+Math.Abs(col)<=2)
        {
        Console.Write("*");
        }
        else
        {
        Console.Write(" ");
        }
        }
        Console.WriteLine();
        }
            Console.ReadKey();
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-31T13:11:07.380

```
#include<stdio.h>
main()
{
int i,j,k,n;
scanf("%d",&n);
n=(n+1)/2;
    for(i=1;i<=n;i++)
    {
        for(j=n;j>=i;j--)
            printf(" ");
        for(k=1;k<=(2*i-1);k++)
            printf("*");
        printf("\n");
    }
    for(i=1;i<=(n-1);i++)
    {
        for(j=0;j<=i;j++)
            printf(" ");
        for(k=(2*n-3);k>=(2*i-1);k--)
            printf("*");
        printf("\n");
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-15T03:04:45.050

嗨，我在更少的行数中找到了解决这个问题的最佳方法

```
int b=0;
for(int a=0;b<=50;a=(b<=25) ? a+2 : a-2 ){
    b+=2;
    for(int b=25-a;b>0;b-=2){
        printf(" ");
    }
    for(int c=0;c<=a;c++){
        printf("*");
    }
    printf("\n");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-26T06:57:58.130

[通过星号输出 C 中的菱形](https://i.stack.imgur.com/j95ne.png)

```
#include<stdio.h>
main()
{
int n, i, j;

printf("Enter a number: ");
scanf("%d",&n);

/* Create up arrow. */
for(i=1; i<=n; i++)
{   /* Left side. */
    for(j=i; j<=n+1; j++)
    {
        printf(" ");

    }
    for(j=1; j<=1; j++)
    {
        printf("*");
    }
    /* Middle. */
    for(j=1; j<i-1; j++)
    {
        printf(" ");

    }

    /* Right side. */
    for(j=1; j<i; j++)
    {
        printf(" ");

    }
    for(j=1; j<=1; j++)
    {
        if(i!=n-(n-1))
            printf("*");
    }
    printf("\n");
}
/* Create down arrow. */
for(i=1; i<=n; i++)
{   /* Left side. */
    for(j=1; j<=i+2; j++)
    {
        printf(" ");

    }
    for(j=1; j<=1; j++)
    {
        if(i!=n)
        printf("*");
    }
    /* Middle. */
    for(j=i; j<n-2; j++)
    {
        printf(" ");

    }
    /* Right side. */
    for(j=i; j<n-1; j++)
    {
        printf(" ");

    }
    for(j=1; j<=1; j++)
    {
        if(i<n-1)
        printf("*");
    }
    printf("\n");
}
} 
```

# android - 为什么在android通知意图中没有发送额外的数据（整数）？

> ID：10456655
> 
> 赞同：2
> 
> 时间：2012-05-04T21:58:30.750
> 
> 标签：android, android-intent, android-pendingintent

以下代码显示一个通知并发送 int 数据，但在其他活动中`getExtras()`返回`null`。为什么？

```
int notificationID = 1;
NotificationManager nm = (NotificationManager) getSystemService(getApplicationContext().NOTIFICATION_SERVICE);

Intent i = new Intent(getApplicationContext(), DownlodResult.class);
i.putExtra("notificationID", 1);

PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, i, 0);

CharSequence tickerText = "There are updates !";
long when = System.currentTimeMillis();
int icon = R.drawable.ic_launcher;
Notification notification = new Notification(icon,tickerText,when);
CharSequence contentTitle = "There are updates";
CharSequence contentText = "Please click here to view it";
notification.setLatestEventInfo(getApplicationContext(), contentTitle, contentText, contentIntent);

notification.vibrate = new long[] { 100, 250, 100, 500}; // Needs vibrate permissions
nm.notify(notificationID, notification); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T18:12:40.783

可能 PendingIntent 已经存在并且没有被创建，而是被重用。尝试使用`PendingIntent.FLAG_UPDATE_CURRENT`标志创建它：

```
PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, i, PendingIntent.FLAG_UPDATE_CURRENT); 
```

请参阅[https://stackoverflow.com/a/9330144/530804](https://stackoverflow.com/a/9330144/530804)和关于该问题的其他答案。

# javascript - 可以从内存中删除匿名创建的对象（Backbone.js 示例）

> ID：10456656
> 
> 赞同：1
> 
> 时间：2012-05-04T21:58:32.123
> 
> 标签：javascript

假设我在集合中有一些模型和绑定了事件的视图。将它附加到 DOM 的一种简单方法是使用“单线”。

```
$('body').html(new MyView({ collection: new MyCollection() }).el); 
```

请注意，模型有事件监听器（CRUD），集合有一些，视图有一些。

现在我们完成了这个视图，我们想要改变视图。我们可以做这样的事情。

```
$('body').html(new MyNextView({ collection: new MyNextCollection() }).el); 
```

现在页面上有所有新元素，但所有旧元素仍然存在。我们需要一种方法来解除所有对象与所有事件的绑定。

有没有办法做到这一点。

--

我知道如果您保留一个存储所有对象的数组，这将是可能的。这样，您可以循环遍历数组并取消绑定所有对象的所有事件。我只是想知道匿名创建的对象是否可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:12:23.943

如果您可以引用视图的元素（例如，因为您知道 id），那么调用`$(el).remove()`将从 DOM 中删除该视图，并应删除任何基于 DOM 的事件绑定（只要该视图不监听其之外的 DOM 元素`el`） .

但这并不一定意味着它会从内存中删除——您可能仍需要注意并处理对视图和集合的其他引用。

# windows - 如何在我的 Webkit Qt 应用程序中显示 jpeg 图像？

> ID：10456662
> 
> 赞同：1
> 
> 时间：2012-05-04T21:59:23.230
> 
> 标签：windows, qt, jpeg, qtwebkit

我创建了一个 Qt 应用程序，它使用 QtWebkit 和一堆资源（HTML、JS、CSS 和 JPEG 图像）作为将“网络应用程序”部署为跨平台（Win/Mac）的概念验证具有“本机”文件加载和保存功能的桌面应用程序。

该应用程序首次在 Mac 上编译并且运行良好。我最终还设法使用 MSVC2010 在 Windows 上对其进行了编译，并且它在我的虚拟开发机（Parallels Windows Xp SP3）和 Windows 7 虚拟机上运行良好 - 显示 jpeg。

但是，它绝对不会在我尝试运行它的任何其他 WinXP 机器上显示 JPEG 文件。

我已经在网上搜索了一个解决方案，并将所有相关的 dll 包含在正确的位置（/imageformats/qjpeg4.dll），但它就是行不通。

源代码可在[https://github.com/theteep/Qt-Webkit-Wrapper获得](https://github.com/theteep/Qt-Webkit-Wrapper)

我正在使用 Qt 4.8.1。

我不知道链接到预编译软件的礼仪，但如果有人想看到它，我很乐意将我的 Windows 部署放到 github 上。

任何帮助将不胜感激，我真的需要让这个为客户项目工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:48:20.550

更新：这真的很奇怪，当我回来并重新启动我的 Windows 实例，然后重新运行可执行文件时，图像正确显示。我知道我最初的问题不是一个非常令人满意的答案，但至少它似乎有效。

# java - 有什么方法可以以编程方式从网站 URL 中获取徽标图标？

> ID：10456663
> 
> 赞同：12
> 
> 时间：2012-05-04T21:59:29.860
> 
> 标签：java, android, xml, layout, webview

我正在创建一个活动，我将在其中显示访问过的网站列表及其徽标和用户选择的别名。

例如

*   *最近访问的网站*

    logo1 网站1/别名

    logo2 网站2/别名

    .

    . 所以不行

问题是，（参考附图）如何让网站徽标显示在 http:// 的左侧？

![如下所示，我只想抓取图标并将其保存在本地](../Images/8f22445db794ad9c2025e812b14237dc.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-06-23T15:58:52.420

使用本网站：

`https://besticon-demo.herokuapp.com/allicons.json?url=www.stackoverflow.com`

它将找到一个网站的多种尺寸的所有徽标，并返回一个带有元数据的漂亮 json 字符串，包括图标的 url。您只需替换`www.stackoverflow.com`为您的域。

如果您愿意，该网站还有一个用于手动输入网站的 gui：

```
https://besticon-demo.herokuapp.com/ 
```

以下是查询堆栈溢出网站返回的示例字符串：

```
{
   "url":"www.stackoverflow.com",
   "icons":[
      {
         "url":"http://stackoverflow.com/apple-touch-icon.png",
         "width":158,
         "height":158,
         "format":"png",
         "bytes":3445,
         "error":null,
         "sha1sum":"c78bd457575a3221c6b3d0d17ffb00ffc63d7cd0"
      },
      {
         "url":"http://cdn.sstatic.net/Sites/stackoverflow/img/favicon.ico?v=4f32ecc8f43d",
         "width":32,
         "height":32,
         "format":"ico",
         "bytes":5430,
         "error":null,
         "sha1sum":"4f32ecc8f43d0986b9c6ce9f37999e86c0b829ef"
      },
      {
         "url":"http://stackoverflow.com/favicon.ico",
         "width":32,
         "height":32,
         "format":"ico",
         "bytes":5430,
         "error":null,
         "sha1sum":"4f32ecc8f43d0986b9c6ce9f37999e86c0b829ef"
      }
   ]
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-04T22:05:42.710

它被称为网站图标，您所要做的就是：

1.  如果 有一个图标`/favicon.ico`，请使用它。
2.  否则，获取页面内容，并从中提取位置。您将需要使用 HTML 解析器并使用a或.`<link rel="shortcut icon" href="*URL goes here*" />``<link>``rel``icon``shortcut icon`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-07-31T14:31:43.377

我知道我迟到了，但这个 API 会帮助其他人

Android 不支持网站图标文件。您可以获取 favicon，但不能显示/使用它。

但是 Google 提供了免费的 API 来获取图像格式的 favicon。

[https://www.google.com/s2/favicons?sz=64&domain_url=microsoft.com](https://www.google.com/s2/favicons?sz=64&domain_url=microsoft.com)

使用 Picasso 在 imageview 中显示图标。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-06T13:34:50.907

使用这个[logo.clearbit.com/stackoverflow.com](http://logo.clearbit.com/stackoverflow.com)

您甚至可以自定义以获得特定尺寸和 grascaled 版本

[logo.clearbit.com/stackoverflow.com?size=80&greyscale=true](http://logo.clearbit.com/stackoverflow.com?size=80&greyscale=true)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-23T08:04:55.220

**此方法可用于获取 Favicon Icon 位图**

```
 private Bitmap fetchFavicon(Uri uri) {
        final Uri iconUri = uri.buildUpon().path("favicon.ico").build();
        Log.i(TAG, "Fetching favicon from: " + iconUri);

        InputStream is = null;
        BufferedInputStream bis = null;
        try
        {
            URLConnection conn = new URL(iconUri.toString()).openConnection();
            conn.connect();
            is = conn.getInputStream();
            bis = new BufferedInputStream(is, 8192);
            return BitmapFactory.decodeStream(bis);
        } catch (IOException e) {
            Log.w(TAG, "Failed to fetch favicon from " + iconUri, e);
            return null;
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-09T02:05:31.290

尝试使用此代码：

```
imageview1.setImageBitmap(webview1.getFavicon()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-12T07:06:32.827

这是一个尝试从 URL 推断徽标图像的 python 库：

[https://github.com/dcollien/urlimage](https://github.com/dcollien/urlimage)

它解析 url 处的 HTML，并尝试了很多事情，包括：

*   带有 itemprop="image" 或 property="image" 的元标记
*   带有 property="og:image:secure_url" 或 property="og:image" 的元标记
*   名称 =“twitter:image”的元标记
*   Microsoft 磁贴的元标记，具有：name="msapplication-wide310x150logo"、name="msapplication-square310x310logo"、name="msapplication-square150x150logo"、name="msapplication-square70x70logo"
*   带有 rel="apple-touch-icon" 的链接标签
*   带有 rel="icon" 的链接标签
*   尝试“{scheme}://{domain}/favicon.ico”看看它是否存在
*   否则拉出第一个 img 标签（在 h1 旁边）

# java - 无法解决或不是 Eclipse 中的 android 中的字段错误

> ID：10456668
> 
> 赞同：1
> 
> 时间：2012-05-04T21:59:56.050
> 
> 标签：java, android

我收到错误登录无法解决或不是字段错误，密码和 ip 相同。我在做 android 程序时在 eclipse 中得到这个错误。

```
 public void onClick(View v) {
    if (v == this.viewcam)
      {
        Log.i("login", this.login.getText().toString());
        Log.i("Passwd", this.passwd.getText().toString());
        Intent localIntent1 = new Intent(v.getContext(), MjpegSample.class);
        Log.i("My ip", this.editTextIp.getText().toString());
        localIntent1.putExtra("ip", "http://" + this.editTextIp.getText().toString() + "/");
        localIntent1.putExtra("user", this.login.getText().toString());
        localIntent1.putExtra("passwd", this.passwd.getText().toString());
        startActivityForResult(localIntent1, 1000);
      }
    }
}); 
```

下面是上面对应的main.xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="IP CAM VIEWER"
        android:textAppearance="?android:attr/textAppearanceLarge"
        />
</LinearLayout>
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Username : "
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <EditText
            android:id="@+id/username"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" >
            <requestFocus />
        </EditText>
    </TableRow>
    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Password : "
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <EditText
            android:id="@+id/password"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="textPassword" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="IP : "
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <EditText
            android:id="@+id/ip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" />
</TableLayout>
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.62" >
    <Button
        android:id="@+id/viewcam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="96dp"
        android:layout_marginTop="16dp"
        android:text="View cam" />
</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:02:10.890

我假设这段代码在 OnClickListener 中，在这种情况下，删除`this`关键字，因为它指的是 OnClickListener 实例，而不是 Activity 实例：

```
 public void onClick(View v) {
    if (v == viewcam)
      {
        Log.i("login", login.getText().toString());
        Log.i("Passwd", passwd.getText().toString());
        Intent localIntent1 = new Intent(v.getContext(), MjpegSample.class);
        Log.i("My ip", editTextIp.getText().toString());
        localIntent1.putExtra("ip", "http://" + editTextIp.getText().toString() + "/");
        localIntent1.putExtra("user", login.getText().toString());
        localIntent1.putExtra("passwd", passwd.getText().toString());
        startActivityForResult(localIntent1, 1000);
      }
    } 
```

另一种选择是“完全合格” `this`，例如：

```
Log.i("login", TheActivity.this.login.getText().toString()); 
```

# cakephp - 如何从另一个模型中获取价值并保存在当前记录中

> ID：10456670
> 
> 赞同：1
> 
> 时间：2012-05-04T22:00:03.833
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

我正在使用 cakephp 2.1 和 Wamp，一切都很好。我需要从一个模型（项目）中获取一个值（不是 id 字段）并将其分配给正在保存的记录（设置），例如：

SetupsController.php

```
$this->request->data['Setup']['client_id'] = $this->Setup->$projects['Project']['client_id']; 
```

模型设置.php

```
var $belongsTo = array('Client', 'User', 
        'Project' => array(
                'className' => 'Project',
                'foreignKey' => 'pr_number'
                )
        ); 
```

在我的 SetupsController 中，我得到了项目：

```
$projects = $this->Setup->Project->find('list', array(
        'order' => 'name',
        'foreignKey' => 'pr_number',
        'fields' => array('Project.pr_number', 'Project.name'),
        'conditions' => array('pr_status' => 2)
            )); 
```

因此，在添加设置时，我从 $projects 获得了 pr_number，一切都很好：

添加.ctp

```
echo $this->Form->input('pr_number', array('label' => 'ASC Project:', 'options' => $projects)); 
```

现在，我需要的是项目记录中的另一个值（client_id），并将其分配给正在保存的设置模型上的列。就像我在保存之前分配当前 user_id 所做的那样：

SetupsController.php（添加函数）

```
$this->request->data['Setup']['user_id'] = $this->Auth->user('id'); // this works fine

// Next line needs fixing, returns NULL, Don't know how to access client_id from projects model!
$this->request->data['Setup']['client_id'] = $this->Setup->$projects['Project']['client_id'];

        if ($this->Setup->save($this->request->data)) { // then save 
```

尝试了 loadModule 和其他建议，但没有运气。

我不认为这很罕见吗？

任何人都可以帮忙吗？

非常感谢。

来自墨西哥蒂华纳的卡洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:21:35.367

自`Setup belongsTo Project`：

```
$selectedProjectId = $this->request->data['Setup']['pr_number'];

$client_id = $this->Setup->Project->find
    (
        'first',
        array
        (
            'recursive' => -1,
            'fields' => array('Project.client_id'),
            'conditions' => array('Project.pr_number' => $selectedProjectId)
        )
    );

// something like this should work
$this->request->data['Setup']['client_id'] = $client_id['Project']['client_id']; 
```

但是，我在没有测试的情况下输入了这个代码，所以它可能在第一次尝试时不起作用。如果不是，请执行此操作以查看您得到了什么：

```
debug($client_id); // it should be here 
```

另一方面，像这样复制数据库中的字段可能表明您的数据库设计存在问题。

# image - Matlab转换为具有上下阈值的二进制

> ID：10456672
> 
> 赞同：0
> 
> 时间：2012-05-04T22:00:08.310
> 
> 标签：image, matlab, image-processing, matrix

我对 Matlab 比较陌生，正在尝试将灰度图像转换为二进制。内置函数`im2bwI(I,level)`只有一个阈值，它将使所有强度值低于黑色级别和所有高于白色的强度值，但我怎样才能让它只有在一定范围内的值变成黑色？例如，我如何设置它以使强度值为 89 的像素变为黑色，但值 70 和 102 变为白色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:12:32.907

您可以为此使用逻辑寻址。我假设 0 是黑色，255 是白色，你的灰度图像在`ImageMatrix`. 请注意，白色和黑色的值取决于图像的颜色深度（6 位、8 位等）。

这是代码：

% 将 89 的所有值替换为 0（黑色）。

```
ImageMatrix(ImageMatrix == 89) = 0; 
```

% 将 70 或 102 的所有值替换为 255（白色）。

```
ImageMatrix(ImageMatrix == 70 | Imagematrix == 102) = 255; 
```

`MinValue`用于替换从到`MaxValue`的一系列值`NewValue`：

% 设置一些示例值（将值 192 ... 255 替换为 63）：

```
MinValue = 192;
MaxValue = 255;
NewValue = 63;

ImageMatrix(ImageMatrix >= MinValue & ImageMatrix <= MaxValue) = NewValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:01:43.680

答：（让我成为要处理的图像）

```
I(I == 89) = 0
I(I == 70 | I == 102) = 255 
```

真正的 MATLAB 测试（R2012a）：

```
K>> I = ceil(rand( 12 ) * 34 + 69)

I =

    98    94   101    74   102    80    78    86    78   100   101    74
   100   103   102   100    72   101    99    98    88    96   101    87
    74    74    83    88    94    94    84   100    87   100    86    88
    96    90    85    91    99    84    94    96    70    81    77    85
    73    95    91    71    78    84    72    99    98    89    93   103
    88    71    83    97    90    71    76    93   100    81    99    89
   101    81    86    75    88    88    72    90    87    80    94    89
    99    73    86    99    86    74   101   102    81    70    75    77
    95   100    78    92    92    70    81    91    90    89    85    74
    93    86    95    88    70    92    86    83   100    77    82    71
    79    84    87    95    83    97    89    87    82    98    82    85
    80    93    92    84   100    89    85    85    97    87    79    99

K>> I == 89

ans =

     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     1     0     0
     0     0     0     0     0     0     0     0     0     0     0     1
     0     0     0     0     0     0     0     0     0     0     0     1
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     1     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     1     0     0     0     0     0
     0     0     0     0     0     1     0     0     0     0     0     0

K>> I == 70

ans =

     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     1     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     1     0     0
     0     0     0     0     0     1     0     0     0     0     0     0
     0     0     0     0     1     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0

K>> I == 102

ans =

     0     0     0     0     1     0     0     0     0     0     0     0
     0     0     1     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     1     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0

K>> I(I == 89) = 0

I =

    98    94   101    74   102    80    78    86    78   100   101    74
   100   103   102   100    72   101    99    98    88    96   101    87
    74    74    83    88    94    94    84   100    87   100    86    88
    96    90    85    91    99    84    94    96    70    81    77    85
    73    95    91    71    78    84    72    99    98     0    93   103
    88    71    83    97    90    71    76    93   100    81    99     0
   101    81    86    75    88    88    72    90    87    80    94     0
    99    73    86    99    86    74   101   102    81    70    75    77
    95   100    78    92    92    70    81    91    90     0    85    74
    93    86    95    88    70    92    86    83   100    77    82    71
    79    84    87    95    83    97     0    87    82    98    82    85
    80    93    92    84   100     0    85    85    97    87    79    99

K>> I(I == 70 | I == 102) = 255

I =

    98    94   101    74   255    80    78    86    78   100   101    74
   100   103   255   100    72   101    99    98    88    96   101    87
    74    74    83    88    94    94    84   100    87   100    86    88
    96    90    85    91    99    84    94    96   255    81    77    85
    73    95    91    71    78    84    72    99    98     0    93   103
    88    71    83    97    90    71    76    93   100    81    99     0
   101    81    86    75    88    88    72    90    87    80    94     0
    99    73    86    99    86    74   101   255    81   255    75    77
    95   100    78    92    92   255    81    91    90     0    85    74
    93    86    95    88   255    92    86    83   100    77    82    71
    79    84    87    95    83    97     0    87    82    98    82    85
    80    93    92    84   100     0    85    85    97    87    79    99 
```

# python - 使用 multiprocessing.Queue() 时的日志记录传播

> ID：10456675
> 
> 赞同：1
> 
> 时间：2012-05-04T22:00:36.327
> 
> 标签：python, logging, multiprocessing

**我不确定我是否做错了什么，或者我只是误解了日志记录的工作方式。**

**我正在尝试在运行`multiprocessing.Queue()`. 我在块内的模块中设置了一个`root_logger`实例，`if __name__ == "__main__":`如下所示：**

```
if __name__ == "__main__":
    root_logger = logging.getLogger()
    hndlr = logging.FileHandler(filename='root_logger.log', mode='w')
    root_logger.addHandler(hndlr)
    root_logger.setLevel(logging.DEBUG) 
```

**并通过 获取对多处理记录器的引用`multiprocessing.get_logger()`。**

**然后，在我的工作进程中，我设置了另一个记录器，如下所示：**

```
from somemodule import somefunction

class Worker(object):
    def __init__(self, filename):
        self.filename = filename
    def _log_setup(self):
        '''Done outside of init to avoid trying to pickle the logging instance.'''
        #Create a unique logger
        self.logger = logging.getLogger('Worker_'+self.filename[0:13])
        self.logger.setLevel(logging.DEBUG)
        #Create a unique log file
        hndlr = logging.FileHandler(filename='./' + os.path.basename(self.filename) + '.log', mode='w')
        self.logger.addHandler(hndlr)
    def __call__(self):
        self._log_setup()
        self.logger.info('Logged from worker')
        somefunction(self.filename) 
```

**`somemodule.somefunction()`看起来像这样：**

```
def somefunction(filename):
    log.info('Doing something to %s' % filename) 
```

### 我想看到的：

*   `root_logger`(root_logger.log) 中的日志文件应该包含在`if __name__ == "__main__":`块中执行的任何内容的输出。
*   来自的日志文件`root_logger`还应该包含来自多处理包的任何输出。
*   唯一的工作日志文件 (Worker_YYYYJJJHHMMSS.log) 应包含调用的所有日志记录输出`Worker.logger`以及任何调用的输出（在这种情况下，`somefunction()`）
*   日志文件最好`root_logger`只包含调用到`Worker.logger.warning()`或更高版本的输出，但这不是必须的。

### 我目前看到的：

*   来自的日志文件`root_logger` **正确**包含`if __name__ == "__main__":`块中执行的所有内容的输出。
*   来自的日志文件`root_logger` **正确**包含由`multiprocessing.get_logger()`.
*   来自的日志文件`root_logger` **错误地**包含来自`somemodule.somefunction()`.
*   唯一的工作程序日志文件 (Worker_YYYYJJJHHMMSS.log)**正确**包含对`Worker.logger`.
*   工作文件日志**错误地**不包含调用记录器实例的输出`somemodule.somefunction()`。

**是否可以以某种方式修改`logging`传播流程以实现我在这里寻找的内容？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:55:27.067

看起来一切正常，除了日志记录`somemodule.somefunction()`将数据发送到错误的地方。

你说`somemodule.somefunction()`看起来像

```
def somefunction(filename):
    log.info('Doing something to %s' % filename) 
```

由于`log`未在您的函数中定义，我希望它是在模块级别定义的。这意味着无论模块级别的记录器都是发送数据的地方。如果您的代码与我的代码相似，则该模块级记录器设置为将数据发送到根记录器。您可能需要传入特定的日志记录实例（即`Worker.logger`）并改用它。

# android - 什么是android中的pendingIntent？

> ID：10456677
> 
> 赞同：3
> 
> 时间：2012-05-04T22:00:44.680
> 
> 标签：android, android-pendingintent

什么是`pendingIntent`安卓？我们什么时候应该使用它？，我试图在android文档中阅读它，但不幸的是我没有得到答案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T22:11:57.250

A`PendingIntent`是`Intent`您想要执行的操作，但要稍后执行。把它想象成`Intent`冰上。需要它的原因是因为`Intent`必须从`Context`应用程序中的有效值创建和启动，但在某些情况下，由于您在技术上超出应用程序的上下文（两种常见的示例`Activity`从 a`Notification`或 a启动`BroadcastReceiver`。

通过创建一个`PendingIntent`你想用来启动的对象，比如说，`Activity`当你有`Context`这样做的时候（从另一个`Activity`或内部`Service`）你可以将该对象传递给外部的东西，以便它代表你启动你的应用程序的一部分。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:11:57.633

一种不是立即调用的意图，而是在一段时间后对某些动作做出反应。以其他方式，您可以将您的权限授予其他应用程序。

例如，它用于小部件。当您单击按钮时，它会执行未决意图定义。

在此处继续： [什么是 Android PendingIntent？](https://stackoverflow.com/questions/2808796/what-is-pending-intent)

# jquery - 将颜色框的标题移动到框的顶部？

> ID：10456680
> 
> 赞同：2
> 
> 时间：2012-05-04T22:00:54.750
> 
> 标签：jquery, css, colorbox

我正在使用 colorbox 在我的项目中打开模式窗口。

有 5 种样式可以使用颜色框。我在这个网址上使用示例 5：[http ://www.jacklmoore.com/colorbox/example5/](http://www.jacklmoore.com/colorbox/example5/)

我正在尝试将 colorbox.js 的标题行（标题属性文本、背景和关闭图标）移动到框的顶部 - 它默认位于底部。我该怎么做？

# **这是示例 5 中 Colorbox 窗口的正常视图：**

![这是示例 5 中 Colorbox 窗口的正常视图](../Images/735730e40cd105db148655d771819420.png)

# **这就是我真正想要的：**

![这是我真正想要的](../Images/6f7aaf4389c366f0e08dfafb9f2526fe.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T06:22:40.057

***你必须做两件事：*** 第一件事很容易；您必须编辑 CSS 文件 (colorbox.css) 并更改以下元素的位置规则：

```
#cboxTitle, #cboxCurrent, #cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow 
```

这样它们的绝对定位是基于“顶部”属性而不是“底部”属性。这是一个示例，在编辑之前和之后（之前的版本被注释掉了）：

```
/*#cboxCurrent{position:absolute; bottom:-25px; left:58px; font-weight:bold; color:#7C7C7C;} */
  #cboxCurrent{position:absolute; top: 0; left:58px; font-weight:bold; color:#7C7C7C;} 
```

您必须尝试获得“top”属性的正确值。

要做的第二件事可能更困难。**该插件使用名为controls.png**的图像“精灵”（许多图像的组合）。看着它，它没有做你想做的事所必需的图像。

如果您有能力使用图像编辑器，则可以修改此图像并添加必要的图像，然后根据 CSS 中的典型精灵使用确定使用新图像内容所需的 XY 坐标。不知道你是否适合这个。

啊，但你认为这是一个简单的改变，嗯？祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-15T00:11:21.623

只需将下面提到的代码复制到 colorbox.css 的底部即可

`#colorbox #cboxClose { top: 0; right: 0; } #cboxLoadedContent{ margin-top:28px; margin-bottom:0; }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-06T11:44:56.047

编辑 colorbox.css 进行以下更改

```
 1\. Replace 
#cboxLoadedContent{margin-bottom:28px;}
with 
#cboxLoadedContent{margin-top:28px;}

2\. Replace
#cboxClose{position:absolute; bottom:0;
with
#cboxClose{position:absolute; top:0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T16:24:32.843

找到了一种更简单的方法来更改图像的关闭，将单词“关闭”更改为 jquery.colorbox.js 中的图像

current: "image {current} of {total}", previous: "previous", next: "next", close: "", //was "close" xhrError: "This content failed to load.", imgError: "此图片加载失败。",

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-13T08:01:54.073

替换这个

```
 $content = $tag(div, "Content").append(
            $title = $tag(div, "Title"),
            $current = $tag(div, "Current"),
            $prev = $('<button type="button"/>').attr({id:prefix+'Previous'}),
            $next = $('<button type="button"/>').attr({id:prefix+'Next'}),
            $slideshow = $('<button type="button"/>').attr({id:prefix+'Slideshow'}),
            $loadingOverlay
        );

        $close = $('<button type="button"/>').attr({id:prefix+'Close'}); 
```

和

```
$content = $tag(div, "Content").append(
        //$title = $tag(div, "Title"),   // comment this line
        $current = $tag(div, "Current"),
        $prev = $('<button type="button"/>').attr({id:prefix+'Previous'}),
        $next = $('<button type="button"/>').attr({id:prefix+'Next'}),
        $slideshow = $('<button type="button"/>').attr({id:prefix+'Slideshow'}),
        $loadingOverlay
    );

    $close = $('<button type="button"/>').attr({id:prefix+'Close'});
    // add this new code
    $wrap  = $tag(div, "Wrapper").append(
            $title = $tag(div, "Title")
    ); 
```

# java - java - 当类构造函数有参数时如何在java中初始化数组？

> ID：10456681
> 
> 赞同：14
> 
> 时间：2012-05-04T22:01:17.717
> 
> 标签：java, arrays, initialization

我有这个类构造函数：

```
public Category(int max){
...
} 
```

问题是，我想做一个这个类的数组，我该如何初始化它？

```
private Category categories = new Category(max)[4]; 
```

不工作。

***更新***

我需要做这样的事情吗？

```
private Category[] categories = new Category[4]; 
```

然后初始化每个对象？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-04T22:04:08.573

当您制作一个数组时，您正在创建一个类别数组。那是数组的一个实例。

当您使用 Category 对象填充数组时，您可以使用带有 Const 的 Category。

```
Category [] categories = new Category[4];
categories[0] = new Category(10); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-02T14:11:10.747

您也可以在线执行此操作 - 制作数组并使用其构造函数一次启动的值填充它。假设您有一个名为 Field 的类，它有一个带有两个参数的构造函数，并且您想要构造一个包含这些参数的数组......

```
Field[] fields = new Field[]{
    new Field(1, "Record_Type"),
    new Field(3, "Record_SubType"),
    new Field(6, "Row_Number"),
    ...
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-04T22:04:52.307

```
private Category[] categories = new Category[4]; 
```

将用 4 个空类别实例化，您必须稍后自己填充内容。
或者您可以尝试：

```
private Category[] categories = {new Category(max), new Category(max), new Category(max), new Category(max)}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T22:03:44.260

先将其初始化为数组

```
Category[] categories = new Categories[4];
categories[0] = new Category(max); 
```

然后初始化每个单独的元素。

# android - Android & sqlite - 我必须在访问数据库之前创建和替换数据库吗？或者我可以打开数据库并查询吗？

> ID：10456686
> 
> 赞同：-1
> 
> 时间：2012-05-04T22:02:14.887
> 
> 标签：android, sql, sqlite, opendatabase

我开始学习使用带有 SQLite 的 Eclipse SDK 的 android 开发。

如果我有一个现有的数据库，我在另一个应用程序等中手动创建了它。似乎所有示例，即使是那些引入现有数据库的示例，都被强制调用先创建一个空白数据库，然后用现有的数据库替换它D b。

为什么我不能简单地连接到它，并从现有数据中查询？

例如，使用“openDataBase”或类似的？有没有人有一个非常简单的例子......带有代码的示例项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:05:47.963

你应该能够做到这一点。确保数据库路径指向正确的数据库。然后，您可以打开并查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:10:44.053

如果您打算将数据库与您的应用程序打包，那么这是唯一的方法。如果您将其与应用程序（网络、USB 等）分开加载，那么可以，您可以直接访问它 AFAIK。

# c# - 测试客户端无法连接到 winforms 应用程序中自托管的 WCF 服务

> ID：10456687
> 
> 赞同：1
> 
> 时间：2012-05-04T22:02:20.547
> 
> 标签：c#, .net, wcf, exception-handling

我有一个在 winforms 应用程序中自托管的 WCF 服务。我使用了以下链接：

*   [如何：在托管应用程序中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms731758.aspx)
*   [如何：使用代码发布服务的元数据](http://msdn.microsoft.com/en-us/library/aa738489.aspx)

当我使用 WCF 测试客户端并尝试添加服务时，我收到以下错误：添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。

错误详情：

> 错误：无法从[http://localhost:8001/HelloWorld](http://localhost:8001/HelloWorld)获取元数据如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。
> 
> 有关启用元数据发布的帮助，请参阅位于[http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: [http://localhost:8001/HelloWorld的 MSDN 文档](http://localhost:8001/HelloWorld)
> 
> 元数据包含无法解析的引用：“http://localhost:8001/HelloWorld”。
> 
> 在[http://localhost:8001/HelloWorld](http://localhost:8001/HelloWorld)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。
> 
> 无法连接到远程服务器 由于目标机器主动拒绝，无法建立连接 127.0.0.1:8001HTTP GET 错误 URI: [http://localhost:8001/HelloWorld](http://localhost:8001/HelloWorld)
> 
> 下载“http://localhost:8001/HelloWorld”时出错。
> 
> 无法连接到远程服务器
> 
> 无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8001

这是我的代码：

```
public Server()
{
    InitializeComponent();

    using (host = new ServiceHost(typeof(HelloWorldService), new Uri("http://localhost:8001/HelloWorld")))
    {
        // Check to see if the service host already has a ServiceMetadataBehavior
        ServiceMetadataBehavior smb = host.Description.Behaviors.Find<ServiceMetadataBehavior>();
        // If not, add one
        if (smb == null)
            smb = new ServiceMetadataBehavior();
        smb.HttpGetEnabled = true;
        smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
        host.Description.Behaviors.Add(smb);

        //You need to add a metadata exchange (mex) endpoint to your service to get metadata.
        host.AddServiceEndpoint(ServiceMetadataBehavior.MexContractName, MetadataExchangeBindings.CreateMexHttpBinding(), "mex");

        //http
        host.AddServiceEndpoint(typeof(IHelloWorldService), new WSHttpBinding(), "");

        host.Open();
    }
}

[ServiceContract]
public interface IHelloWorldService
{
    [OperationContract]
    string SayHello(string name);
}

public class HelloWorldService : IHelloWorldService
{
    public string SayHello(string name)
    {
        return string.Format("Hello, {0}", name);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:26:09.710

我不知道为什么，但是将 using(){} 切换到 try{}..catch{} 可以让这段代码正常运行。WCF 测试客户端可以成功添加服务，我可以通过以下方式浏览到正在运行的服务：[http://localhost:8001/HelloWorld](http://localhost:8001/HelloWorld)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:25:15.943

似乎根本原因在底部：

> 无法连接到远程服务器 由于目标机器主动拒绝，无法建立连接 127.0.0.1:8001

我会检查您的事件日志以查看 host.Open() 调用是否失败（可能是由于防火墙或其他原因），或者使用调试器遍历它，然后使用 telnet 来查看它是否真的在监听 8001。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:51:12.657

这是它的解决方案试试这个它会工作

```
Uri baseAddress = new Uri("http://localhost:8001/HelloWorld");

    // Create the ServiceHost.
    using (serviceHost = new ServiceHost(typeof(HelloWorldService), baseAddress))
    {
        // Enable metadata publishing.
        ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
        smb.HttpGetEnabled = true;
        smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
        serviceHost.Description.Behaviors.Add(smb);

        // Open the ServiceHost to start listening for messages. Since
        // no endpoints are explicitly configured, the runtime will create
        // one endpoint per base address for each service contract implemented
        // by the service.
        serviceHost.AddServiceEndpoint(typeof(IHelloWorldService), new WSHttpBinding(), "");
        serviceHost.Open();

    } 
```

# javascript - 将多个 URL 视为 fb like 按钮的单个“喜欢”对象

> ID：10456690
> 
> 赞同：1
> 
> 时间：2012-05-04T22:02:27.223
> 
> 标签：javascript, facebook-like

我正在一个带有自定义 CMS 的网站上工作，该 CMS 根据文章标题生成 URL。网站贡献者面临的问题是，当他们更新文章的标题时，它会为文章生成一个新的 URL，因此文章之前的所有“喜欢”都与旧 URL 相关联（文章的副本是仍然可见）和新的没有任何喜欢。有什么方法可以实现 Facebook 点赞，以便两个不同的 URL 共享相同的点赞池 - 因此，旧 URL 的点赞将转移到新 URL，如果在任一 URL 上按下点赞按钮，它就会贡献给他们的点赞共同的喜欢池？解决此限制的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:11:48.140

为什么不使用串联的 URL？像

```
/url-generated-from-title-id 
```

在哪里`id`保存数据库中文章的静态 ID？你总是可以用简单的 JavaScript 去掉最后一部分

```
var pathParts  = location.pathname.split("/"),
    identifier = pathParts[pathParts.length-1].split("-"),
    articleId  = identifier[identifier.length-1]; // holds "id" 
```

标题仍然可以更改，但 id 不会

# backbone.js - 如何通过 Backbone.js 同步在本地时区使用 Date 对象？

> ID：10456693
> 
> 赞同：1
> 
> 时间：2012-05-04T22:02:47.250
> 
> 标签：backbone.js, timezone

我正在使用 Backbone.js 同步将我的模型存储到数据库中。

问题是 Backbone.js 同步将日期从我的本地时区格式转换为 UTC 日期。我已经将其追溯到`JSON.stringify`Backbone.js 同步中的使用：

```
params.data = JSON.stringify(model.toJSON()); 
```

作为一个例子，这里发生了什么：

```
>>> var a = {myDate: new Date();}
>>> JSON.stringify(a);
>>> a
"{"myDate":"2012-05-04T21:58:34.734Z"}" 
```

因此，当我再次使用 Backbone.js 同步来检索相同的资源时，我的时区将转换为 UTC。相反，我希望保留原始的本地时区。

对我来说，可以将数据作为 UTC 存储到数据库中，只要我设法将其转换回本地时区。

所有的帮助都是值得的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T01:37:24.650

与服务器的所有通信都应该在 UTC 中完成，所以按照`JSON.stringify`您的意愿进行。您缺少的部分似乎是将您从服务器获得的 UTC 时间戳转换为浏览器的本地时区。

通过在模型中提供实现，您可以在服务器的 JSON 进入模型之前拦截它[`parse`](http://backbonejs.org/#Model-parse)：

> **解析** `model.parse(response)`
> 
> **每当服务器返回模型的数据时，在*fetch*和*save中都会调用***parse**。该函数传递原始`response`对象，并应返回要在模型上*设置的属性哈希。*默认实现是无操作的，只是通过 JSON 响应。如果您需要使用预先存在的 API 或更好的响应命名空间，请覆盖此选项。**

 **这将为您提供一个对象`{myDate: '2012-05-04T21:58:34.734Z'}`，`response`因此您只需将其转换为您的本地时区。[`Date.parse`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse)和的快速组合[`new Date`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)将为您提供浏览器时区中的 Date 对象：

```
var d = new Date(Date.parse(response.myDate));
// Fri May 04 2012 14:58:34 GMT-0700 (PDT) 
```

如果您希望模型中有 Date 对象，那么您只需要返回包装在对象中的 Date ：

```
return { myDate: d }; 
```

或者，如果`response`有更多的东西，你可以：

```
response.myDate = d;
return response;
// or if you don't want to modify response
return _({}).extend(response, { myDate: d }); 
```

如果您出于某种原因想要在浏览器的时区中使用 ISO-8601 字符串，那么您可以使用标准 Date 方法轻松构建一个；我认为你最好保留 Date 对象，这比字符串有用得多。**

# asp.net - 如何使用 ASP.NET 向 Web 表单字段添加数据验证？

> ID：10456694
> 
> 赞同：0
> 
> 时间：2012-05-04T22:02:53.220
> 
> 标签：asp.net, html, vb.net

这似乎只需要一两行代码？

这是我需要做的：

*   将数据验证添加到“联系我们”表单上的新电话字段。我们只接受以下格式的电话：995-999-9999
*   填写联系我们表格，以便您可以将其作为电子邮件提交。将所有测试电子邮件发送至 blah@boo.net。您可以使用您必须发送电子邮件的任何电子邮件帐户。

这需要编程 API，例如：

*   System.Net.Mail
    *   邮件消息
    *   客户端
    *   网络凭证

这似乎很容易，但我对它非常迷茫。当我运行它时，此页面也不会显示。这是页面代码：我希望我做对了，如果不正确，请见谅。我在尝试！

```
 <%@ Page Title="Contact Us" Language="vb" AutoEventWireup="false" MasterPageFile="~/Main.Master" CodeBehind="ContactUs.aspx.vb" Inherits="Week10.ContactUs" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<h1>Contact Us</h1>
<hr />

<table border="1">
    <tr>
        <td>From</td>
        <td>
            <asp:TextBox ID="txtFrom" runat="server" Width="400px"></asp:TextBox>
        </td>
        <td>
            <asp:RequiredFieldValidator ID="rfvFrom" CssClass="ErrMSG"  runat="server" ControlToValidate="txtFrom" ErrorMessage="*" ToolTip="From field is required"></asp:RequiredFieldValidator></td>
    </tr>
    <tr>
        <td>Subject</td>
        <td>
            <asp:TextBox ID="txtSubject" runat="server" Width="400px"></asp:TextBox>
        </td>
        <td><asp:RequiredFieldValidator ID="rfvSubject" CssClass="ErrMSG" runat="server" ControlToValidate="txtSubject" ErrorMessage="*" ToolTip="Subject field is required"></asp:RequiredFieldValidator></td>
    </tr>
    <tr>
        <td>Phone</td>
        <td>
            <asp:TextBox ID="txtPhone" runat="server" Width="100px"></asp:TextBox>
        </td>
         <td><asp:RequiredFieldValidator ID="rfvPhone" CssClass="ErrMSG"  runat="server" ControlToValidate="txtPhone" ErrorMessage="*" ToolTip="Phone field is required"></asp:RequiredFieldValidator>
            </td>
    </tr>
    <tr valign="top">
        <td>Comments</td>
        <td>
            <asp:TextBox ID="txtComments" runat="server" Rows="10" TextMode="MultiLine" 
                Width="400px"></asp:TextBox>
        </td>
        <td><asp:RequiredFieldValidator ID="rfvComments" CssClass="ErrMSG" runat="server" ControlToValidate="txtComments" ErrorMessage="*" ToolTip="Comments field is required"></asp:RequiredFieldValidator></td>
    </tr>
    <tr>
        <td colspan="3" align="center">
            <asp:Button ID="btnSubmit" runat="server" Text="Submit" /></td>
    </tr>
    <tr>
        <td colspan="3" align="center">
            <asp:Label ID="lblMSG" runat="server" Text=""></asp:Label>
        </td>
    </tr>
</table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:45:10.647

看一下正则表达式验证器。
[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)。

您可以使用它为所需的电话号码模式指定表达式模式。

有关正则表达式的更多信息，请查看本教程：[http ://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

在构建表达式时，更容易使用验证器来确保您的模式确实按照您的预期进行验证。你可以在网上到处找到这些。这是一个：[http ://tools.netshiftmedia.com/regexlibrary/#](http://tools.netshiftmedia.com/regexlibrary/#)

最后，这是一个验证数字 995-999-9999 的非常简单的表达式。但是，我不认为这是一个准确的验证（电话号码不能以一个开头）。

^\d{2}[1-5]-\d{3}-\d{4}$

编辑：

在电话的必填字段验证器之后添加：

```
<asp:RegularExpressionValidator ID="rgexPhone" CssClass="ErrMSG"  runat="server"     ControlToValidate="txtPhone" ErrorMessage="*" ToolTip="Phone field is invalid" ValidationExpression="^\d{2}[1-5]-\d{3}-\d{4}$" /> 
```

但是在盲目地将其他人的代码添加到您的项目之前，您确实应该知道这是做什么的。

也许这篇文章会解释得更好一点：http: [//msdn.microsoft.com/en-us/library/ff650303.aspx](http://msdn.microsoft.com/en-us/library/ff650303.aspx)

# file - 如何在写入数百个数兆字节的文件时避免文件碎片？

> ID：10456698
> 
> 赞同：4
> 
> 时间：2012-05-04T22:03:29.143
> 
> 标签：file, winapi, fragmentation, defragmentation

我的问题类似于[如何避免硬盘碎片？](https://stackoverflow.com/questions/4107950/how-to-avoid-hard-disc-fragmentation)，但我每天将生成数百个文件，大小从 2 MB 到 100+ MB 不等（提问者暗示他的文件较小，因为他更担心磁盘混乱，我的问题是读取这些文件的性能）。这些文件一次写入一点点（记录数据），这是创建碎片的最佳方式。（数据库不是一个选项。）我有代码在它们完全编写后进行碎片整理，但是在同一天读回文件时性能会受到影响。

似乎[如何在使用 .NET 时限制文件碎片？](https://stackoverflow.com/questions/917309/how-can-i-limit-file-fragmentation-while-working-with-net); 尽管他们缺乏细节（而且我在 C++ 中）。我会使用 SetFilePointerEx() 和 SetEndOfFile() 将文件大小设置为 2MB，然后当文件达到分配的大小时，我将根据观察到的增长率调整大小。然后在写入完成后，调整为实际数据大小。

我看到的一个陷阱（实际上是[http://www.cplusplus.com/forum/windows/22114/](http://www.cplusplus.com/forum/windows/22114/)指出的）是如果~~我的应用程序崩溃或~~计算机关闭会发生什么。现在我的文件中有未确定的数据，无法通过 Windows 检测到它。这建议我创建一个文件来跟踪每个文件或单个文件写入了多少数据。有更好的策略吗？也许在每次写入后写入足够的零以便以后检测（然后备份以准备下一次写入）？

你看到我错过的任何其他陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:12:51.140

我们使用预分配方法以 500MB 的块增加文件大小。由于它是视频数据，我们还存储了一个单独的索引文件，我们可以读取和验证以查找最后一个（被认为有效的）数据的时间。

如果您的数据是文本的，这可能会有点痛苦，但是您可以在最后写入忽略空数据，也许向前跳到 2MB 边界？

# google-chrome-extension - 无法让 websocket 连接在 Chrome 19 中工作

> ID：10456706
> 
> 赞同：6
> 
> 时间：2012-05-04T22:04:17.593
> 
> 标签：google-chrome-extension, websocket, phpwebsocket

我有一个与 Firefox 和 Chrome 18 完美配合的 websocket 客户端/服务器。它不适用于 Chrome 19 beta。我怀疑这是由于这个浏览器现在使用了我的服务器不支持的 deflate-frame 扩展。

Chrome 19 beta 在其握手中发送：“Sec-WebSocket-Extensions: x-webkit-deflate-frame”

我让我的服务器发回：“Sec-WebSocket-Extensions：”

但要么这不是拒绝扩展的正确方法，要么我没有发现其他错误。这是握手中唯一与我从工作浏览器中看到的不同的东西。

编辑：这是一些附加信息。这些是 Wireshark 捕获的握手。

* * *

使用 Firefox 12 的握手：

GET /chatserver HTTP/1.1
主机：（本文省略）
用户代理：Mozilla/5.0（Windows NT 6.1；WOW64；rv:12.0） Gecko/20100101 Firefox/12.0
接受：text/html,application/xhtml+xml, application/xml;q=0.9, */* ;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive, Upgrade
Sec-WebSocket-Version: 13
来源：（本文省略）
Sec-WebSocket-Key：2TKm4ozUQdNP17Lobt7IBg==
Pragma：no-cache
Cache-Control：no-cache
升级：websocket

HTTP/1.1 101 切换协议
升级：websocket
连接：升级
Sec-WebSocket-Accept：pSUB3BT9YUUd9n3mOeWY/1uVqJE=

* * *

使用 Chrome 18 的握手：

GET /chatserver HTTP/1.1
升级：websocket
连接：升级
主机：（本文省略）
来源：（本文省略）
Sec-WebSocket-Key：zuHLEC8pGvAMadarhCLXFA==
Sec-WebSocket-Version：13

HTTP/1.1 101 切换协议
升级：websocket
连接：升级
Sec-WebSocket-Accept：LMBSq6Bk9Kiv+zAbQlAL899pfzc=

* * *

使用 Chrome 19 的握手：

GET /chatserver HTTP/1.1
升级：websocket
连接：升级
主机：（本文省略）
来源：（本文省略）
Sec-WebSocket-Key：TbwnVcuUiqGgZn7hxvxzvQ==
Sec-WebSocket-Version：13
Sec-WebSocket-Extensions： x-webkit-deflate-frame

HTTP/1.1 101 切换协议
升级：websocket
连接：升级
Sec-WebSocket-Accept：D45BJ+Vfydy1Upcs3Hze/nuiaS8=
Sec-WebSocket-Extensions：

* * *

所有服务器响应都有 \r\n 行结尾，并在消息末尾包含一个额外的 \r\n。

FF12 和 Chrome18 工作 - **Chrome19 不工作**。在 Chrome19 中，服务器握手响应之后的下一个数据包是 FIN/ACK。连接已关闭。

注意。我也尝试使用连字符作为 Sec-WebSocket-Extensions 值，但这也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T06:07:45.763

发现了问题。

首先，服务器响应中的空白 Sec-WebSocket-Extensions 条目产生了“ `Invalid UTF-8 sequence in header value`”错误。删除该条目后，剩余的错误是“ `A server must not mask any frames that it sends to the client.`”

事实上，我的服务器实现（PHPWebSocket 的高度修改版本）默认屏蔽它发送的帧。更改此默认行为解决了问题，并且 websocket 连接现在可以在 Chrome 19 中使用。

将 PHPWebSocket 标记添加到此问题，因为这是该项目的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T11:15:20.657

对于 Chrome，“Sec-WebSocket-Protocol”标头必须对服务器端和客户端都具有价值。对我来说就是这种情况。

# ajax - 如果jquery post开始花费太长时间，如何打开进度条

> ID：10456707
> 
> 赞同：1
> 
> 时间：2012-05-04T22:04:24.947
> 
> 标签：ajax, jquery

是否有可能只在 jquery ajax 帖子开始花费太长时间后才显示某种进展，但如果相当瞬时就不必费心显示它？我有以下代码使用 setTimeout 来延迟显示我的进度指示器（它基本上是我启用的 twitter 引导模式，其中有一个进度指示器 gif），但是当我调试并放一个 brek 时它似乎不起作用指向我的服务器端代码，然后在我的客户端 setTimeout 中，它应该关闭，但是在我的服务器返回响应之前永远不会调用 setTimeout（所以如果花费太长时间，我永远不会得到进度条）。当我不使用 setTimeout 来延迟它时它工作正常（基本上根本不延迟），或者如果我做了这么短的延迟以至于进度指示器几乎立即显示出来，但没有 1.5 秒的延迟。

这是我的javascript：

```
var progressModalRunning = false;
var needModalProgress = true;

// document.ready events/functions to call
$(function () {
    $("form").on("submit", function (event) {
        event.preventDefault();

        var form = $(this);

        // We check if jQuery.validator exists on the form
        if (!form.valid || form.valid()) {
            toggleModalProgressAndButtons(form, true);

            $.post(form.attr('action'), form.serializeArray())
                .done(function (json) {
                    json = json || {};

                    // In case of success, we redirect to the provided URL or the same page.
                    if (json.success) {
                        location = json.redirect || location.href;
                    } else if (json.errors) {
                        displayErrors(form, json.errors);
                        toggleModalProgressAndButtons(form, false);
                    }
                })
                .error(function () {
                    displayErrors(form, ['An unknown error happened.']);
                    toggleModalProgressAndButtons(form, false);
                });
        }
    });
});

// show/hide modal progress indicator and disable/enable modal buttons
var toggleModalProgressAndButtons = function (form, toggle) {
        if (toggle) {
            showProgress();
        } else {
            hideProgress();
        }
}

// display validation errors
var displayErrors = function (form, errors) {
    needModalProgress = false;

    var errorSummary = getValidationSummaryErrors(form)
        .removeClass('validation-summary-valid')
        .addClass('validation-summary-errors');

    var items = $.map(errors, function (error) {
        return '<li>' + error + '</li>';
    }).join('');

    var ul = errorSummary
        .find('ul')
        .empty()
        .append(items);
};

// Show a progress indicator in it's own modal
var showProgress = function () {
    // we will delay it by 1.5 seconds - don't want to bother showing if the response is that     fast,
    // because it makes the screen to appear to flicker since backdrop for modal is darker
    setTimeout(function () {
        if (needModalProgress) {
            progressModalRunning = true;

            $('#progress').modal({ keyboard: false, backdrop: 'static' });
    }
    }, 1500);
}

// hide the progress indicator
var hideProgress = function () {
    if (progressModalRunning) {
        progressModalRunning = false;
        needModalProgress = true;

        $('#progress').modal('hide');
    }
} 
```

# c - glibc 的 system() 调用安全吗？

> ID：10456708
> 
> 赞同：2
> 
> 时间：2012-05-04T22:04:26.080
> 
> 标签：c, linux, bash, unix, glibc

我听到有人说`system()`打来的电话`libc`不安全。

我能想到的一个原因是它启动了 shell 实用程序，例如`/bin/bash`，如果`system("rm -rf $input")`已启动并且 $input 是未经处理的用户输入，那么如果 $input="/" 则它可能会造成严重破坏。其他原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:16:11.817

您甚至不必调用 rm 进行恶意输入来擦除硬盘驱动器。如果您执行`system("harmless_command $input")`and `$input`is `; rm -rf /`，那将执行`harmless_command`后跟`rm -rf /`. 因此，如果您想在命令中插入用户输入并且恶意输入将是一个问题¹，那么使用 system 将是一个坏主意。

除了安全问题，使用系统也可能导致错误。例如，如果您这样做`system("some_command $filename")`并且 $filename 包含空格（或其他 shell 元字符），则该命令将爆炸，除非您先正确转义文件名。

如果您使用 exec* 系列函数（它采用包含命令参数的数组或可变参数列表，而不是通过 shell 的单个字符串），则不存在这些问题。

* * *

¹ 如果代码在用户许可的情况下在用户计算机上运行，​​人们可能会争辩说恶意输入不会成为问题。如果用户输入恶意输入导致他的硬盘被擦除，那真的是用户自己的错。但是，如果代码在远程服务器上运行或在本地以增强的权限运行，那就另当别论了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T22:10:25.393

一般来说，“安全”是与`exec`系统调用系列（`execve()`是最低级别的标准）相比；涉及 shell 不仅意味着未清理数据的问题，而且还意味着`$PATH`（你*知道*自己在执行什么吗？）和`$IFS`（这是一个有趣的问题：如果有人可以改变`$IFS`你，shell 不会按照你期望的方式解析事物）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T22:13:39.240

这是输入完整性检查的一般情况。您使用的任何字符串都应该有一个通用解析器来过滤掉转义序列等。例如，所有体面的 PHP 应用程序在调用 SQL 数据库之前都会这样做。

您提到的第一种情况很明显：有人可以破坏您的系统。另一个是如果你可以得到一组二进制代码，覆盖你的代码中的指令/功能，并让你的程序做一些完全不同的事情（即：这就是越狱/根攻击的工作方式）。有关此特定威胁的更多信息，您应该阅读缓冲区溢出和代码注入漏洞： [http ://en.wikipedia.org/wiki/Code_injection](http://en.wikipedia.org/wiki/Code_injection)

另外，这里有一个代码注入的例子： [Understanding and doing Code Injection in C](https://stackoverflow.com/questions/1739349/understanding-and-doing-code-injection-in-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T22:09:55.320

不可能知道“某人”在想什么，但可能是因为 system() 通过 shell 运行命令，这可能导致最终的命令执行与您计划的不同。例如，您不知道 PATH 环境变量将被设置为什么，以及许多其他可更改的东西。

坚持使用 exec 的变体，但即便如此，也要非常小心传递给他们的内容。

# php - 翻译大量文本

> ID：10456714
> 
> 赞同：0
> 
> 时间：2012-05-04T22:05:14.533
> 
> 标签：php

> **可能重复：**
> [翻译大量文本数据的最佳方法是什么？](https://stackoverflow.com/questions/2448097/what-is-the-best-way-to-translate-a-big-amount-of-text-data)

我想使用 Microsoft Translate API 翻译大约 50,000 个小句子。

我尝试了他们的 API，但它一次只能处理一定数量的字符，这意味着我必须一次又一次地手动复制/粘贴它。

是否有脚本或其他方式自动对文档进行分区，然后在每个分区上运行翻译器，然后将其全部收集到一个文件/页面中？

我已将 php 设置为标签，但不确定是否有更好的选择？

# extjs - ExtJS 4 如何使用单元格编辑和存储来自远程源的数据取消网格中的所有待处理编辑？

> ID：10456716
> 
> 赞同：0
> 
> 时间：2012-05-04T22:05:26.007
> 
> 标签：extjs, grid, edit

我曾尝试在网格和商店中寻找取消或拒绝更改，但我似乎可以找到任何东西。论坛里也找不到。

我现在最好的解决方案是（重新）加载存储中的数据，这会导致服务器请求数据。

即我的重置按钮有一个事件处理程序，如：

```
onResetButtonClick: function(button, e, options) {
    var store = Ext.getStore('MyStore');
    store.load();
} 
```

这行得通...但是还有其他更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:50:48.077

Ext.data.Store.rejectChanges 是你想要的。由于某种原因，它存在于 4.1.x 而不是 4.0.x 上。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-rejectChanges](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-rejectChanges)

# php - 将 GROUP BY 结果作为分隔变量返回

> ID：10456717
> 
> 赞同：2
> 
> 时间：2012-05-04T22:05:37.237
> 
> 标签：php, mysql

我是 mysql/php 的新手，我正在尝试使用

```
$query = "SELECT expo_location,  SUM(total_sale) FROM _sales_db WHERE day IN('Friday') GROUP BY expo_location"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result)){
  echo "<span style='font-weight:normal;color:#cfcfcf;'>"."Total ". $row['expo_location']. " = $". number_format((float)$row['SUM(total_sale)'], 2, '.', '')."</span>";
  echo "<br />";
} 
```

哪个返回：

```
//
Total Canton = $295.94
Total Malone = $980.24
Total Massena = $1187.10
// 
```

我希望将“expo_location”名称作为使用 GROUP BY 的变量返回。

```
Example
$Canton = 
$Malone = 
$Massena = 
```

总而言之，将所有条目放在一列中并将它们组合在一起并将它们作为变量返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:10:39.367

下面的代码将为您创建一个关联数组，以便您可以执行类似 $expo_locations['Canton'] 的操作，其中包含 295.94

```
 $query = "SELECT expo_location,  SUM(total_sale) FROM _sales_db WHERE day IN('Friday') GROUP BY expo_location"; 

    $result = mysql_query($query) or die(mysql_error());

    $expo_locations = array();

    // Print out result
    while($row = mysql_fetch_array($result)){
        $expo_locations[$row['expo_location']] = number_format((float)$row['SUM(total_sale)'], 2, '.', '');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:13:09.460

您可以在执行记录循环时将提取的位置数据存储在一个数组中，然后简单地将所有收集的数据内爆到一个字符串中。

```
$query = "SELECT expo_location,  SUM(total_sale) FROM _sales_db WHERE day IN('Friday') GROUP BY expo_location"; 

$result = mysql_query($query) or die(mysql_error());

$locations = array();

// Print out result
while($row = mysql_fetch_array($result)){
    $locations[] = $row['expo_location'];
}

$locations_string = implode(', ', $locations); // String version
var_dump($locations); // Displays array content. 
```

# java - 动态可扩展的 JVM 堆栈

> ID：10456720
> 
> 赞同：3
> 
> 时间：2012-05-04T22:05:59.520
> 
> 标签：java, jvm, jvm-arguments

[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2)表明 JVM 堆栈可以是固定大小的，也可以是动态可扩展的。

-Xss JVM 选项允许设置固定大小，如果我没有设置此选项是设置默认值（大约 512-2048k），但如何告诉 JVM 在需要时动态分配其堆栈？

如果我不能设置动态大小选项，设置一个大的 -Xss 值（比如说 20M）实际上会为我的 JVM 中的每个线程分配 20MB 的内存，还是动态分配的内存限制为 20MB？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T22:11:04.967

最大堆栈大小是分配给堆栈的*虚拟地址空间量。*内存仅根据需要提交给堆栈。

请注意，在 32 位系统上，虚拟地址空间是一种相对稀缺的资源。每个进程获得的内存少于（有时*远*少于）4GB。考虑到这一点，20MB 的堆栈会将线程数限制在 75 到 175 之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:38:42.467

关于动态扩展，即使规范可能支持它，实现也可能不支持。

那么，如何告诉 JVM 在需要时动态分配它的堆栈呢？

你不。您将所有设置保留为默认设置，如果线程中的计算需要比允许的更大的堆栈，Java 虚拟机将引发 StackOverflowError。

这是您使用 -Xss 显式增加新线程的内存分配的提示。

这不会影响 JVM 堆。[参见 -Xmx -Xms 设置堆大小]

另外我必须说，每个线程 20Mb 似乎有点过多。

这一切都取决于你的堆大小和你想要支持的并发线程数。

# ruby - ruby - rspec，如何处理引发 TypeError？

> ID：10456723
> 
> 赞同：0
> 
> 时间：2012-05-04T22:06:12.247
> 
> 标签：ruby, exception, rspec, raise

我有一种方法可以进行温度转换。
该方法旨在在某些情况下引发 TypeError 。
我如何在 rspec 中检查它？现在下面的代码给了我：

```
Failures:

  1) It should raise TypeError for unknown conversion type 'blob_to_blob' should raise a TypeError when what_to_what param has the value 'blob_to_blob'
     Failure/Error: raise TypeError
     TypeError:
       TypeError
     # ./converter_spec.rb:7:in `converter'
     # ./converter_spec.rb:25

Finished in 0.00134 seconds
3 examples, 1 failure 
```

代码：

```
def converter(temperature,what_to_what)
  if what_to_what == 'farenheit_to_centigrade' 
    (temperature-32)/2
  elsif what_to_what == 'centigrade_to_farenheit'
    (temperature*2)+ 32
  else
     raise TypeError
  end 
end

describe "It should be able to convert farenheit to centigrade" do
        it "should convert 50 to 9" do
          converter(50, 'farenheit_to_centigrade').should == 9
        end 
end

describe "It should be able to convert centigrade to farenheit" do
        it "should convert 9 to 50" do
          converter(9, 'centigrade_to_farenheit').should == 50
        end 
end

describe "It should raise TypeError for unknown conversion type 'blob_to_blob'" do
        it "should raise a TypeError when what_to_what param has the value 'blob_to_blob'" do
          converter(9, 'blob_to_blob').should raise TypeError
        end 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:07:33.363

期望 { raise TypeError }.to raise TypeError

# python - Python OpenCV 2.4 编写半完整的 PNG 视频帧

> ID：10456727
> 
> 赞同：3
> 
> 时间：2012-05-04T22:06:48.043
> 
> 标签：python, video, opencv, video-processing

我刚刚在 Ubuntu 12.04 上从源代码安装了 OpenCV 2.4。我正在尝试使用 Python 脚本将视频的第一帧写入 PNG 图像，但我得到了一些奇怪的结果。这是代码：

```
import numpy as np
import cv
import cv2
import sys

video = cv.CaptureFromFile(sys.argv[1])
frame = cv.QueryFrame(video)
proxy = cv.CreateImage(cv.GetSize(frame), 8, 1)
cv.CvtColor(frame, proxy, cv.CV_BGR2GRAY)
a = np.asarray(cv.GetMat(proxy))
cv2.imwrite('image.png', a) 
```

问题是，图像看起来像这样：

![半完成某事或其他](../Images/8d84c0bb12a0fc9cf5a383b9b24cb648.png)

这些是 AVI 文件，否则似乎很好。有任何想法吗？

**编辑#1：**抱歉，这里是 ffmpeg 版本信息：

```
ffmpeg version 0.10.2-4:0.10.2-0ubuntu0jon1
built on Mar 18 2012 09:59:38 with gcc 4.6.3
configuration: --extra-version='4:0.10.2-0ubuntu0jon1' --arch=amd64 --prefix=/usr --libdir=/usr/lib/x86_64-linux-gnu --disable-stripping --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-libfreetype --enable-vaapi --enable-frei0r --enable-gpl --enable-postproc --enable-x11grab --enable-librtmp --enable-libvo-aacenc --enable-version3 --enable-libvo-amrwbenc --enable-version3 --enable-libdc1394 --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
libavutil      51\. 35.100 / 51\. 35.100
libavcodec     53\. 61.100 / 53\. 61.100
libavformat    53\. 32.100 / 53\. 32.100
libavdevice    53\.  4.100 / 53\.  4.100
libavfilter     2\. 61.100 /  2\. 61.100
libswscale      2\.  1.100 /  2\.  1.100
libswresample   0\.  6.100 /  0\.  6.100
libpostproc    52\.  0.100 / 52\.  0.100 
```

**编辑 #2：**在我自己的故障排除中，我将 ffmpeg 从默认的 12.04 ubuntu 版本升级到您在上面的编辑 #1 中看到的版本。这似乎改变了一些事情：在这个问题中生成帧的视频现在似乎工作正常，但较大的视频仍然存在损坏的下半部分（或底部三分之一或四分之四）。更大的视频实际上完全是段错误。我真的不知道该怎么做，除了 - 再一次 - 错误或丢失的编解码器。它在`QueryFrame`步骤上出现段错误。

**编辑#3：**我更改了代码以专门使用 cv2 接口（根据以下评论之一中的链接）。现在，`video.retrieve()`总是返回`False`并且没有写入图像。

**编辑#4：**在使用新的 cv2 接口读取视频帧之前，我在视频上运行了以下命令：

```
ffmpeg -sameq -i normal.avi p_normal.avi 
```

该命令的输出看起来没问题，除了 ffmpeg 初始化及其对输入的描述之后的这一行：

> 编解码器“mpeg4”的像素格式“pal8”不兼容，自动选择格式“yuv420p”

这是命令的完整输出：

```
Input #0, avi, from 'normal.avi':
  Duration: 00:01:37.60, start: 0.000000, bitrate: 1312 kb/s
    Stream #0:0: Video: rawvideo, pal8, 128x256, 5 tbr, 5 tbn, 5 tbc
Incompatible pixel format 'pal8' for codec 'mpeg4', auto-selecting format 'yuv420p'
[buffer @ 0x11a0f80] w:128 h:256 pixfmt:pal8 tb:1/1000000 sar:0/1 sws_param:
[buffersink @ 0x11a1380] auto-inserting filter 'auto-inserted scale 0' between the filter 'src' and the filter 'out'
[scale @ 0x1197da0] w:128 h:256 fmt:pal8 -> w:128 h:256 fmt:yuv420p flags:0x4
Output #0, avi, to 'p_normal.avi':
  Metadata:
    ISFT            : Lavf53.32.100
    Stream #0:0: Video: mpeg4 (FMP4 / 0x34504D46), yuv420p, 128x256, q=2-31, 200 kb/s, 5 tbn, 5 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (rawvideo -> mpeg4)
Press [q] to stop, [?] for help
frame=  488 fps=  0 q=0.0 Lsize=    1497kB time=00:01:37.60 bitrate= 125.6kbits/s    
video:1480kB audio:0kB global headers:0kB muxing overhead 1.165352% 
```

最重要的是，读取帧的 Python OpenCV 代码（使用 cv2 接口）仍然返回 False（与之前的行为相同）。

**编辑#5：**到目前为止，我已经按照[此处找到](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)的说明从源代码安装 ffmpeg 及其依赖项，并且进展顺利。如果不从源代码重新安装 OpenCV，我仍然遇到与之前`video.retrieve()`返回 False 相同的问题。在尝试从源代码重新编译 OpenCV 2.4 时，我在编译期间收到以下错误：

```
Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/bin/ld: /usr/local/lib/libavcodec.a(avpacket.o): relocation R_X86_64_32S against `av_destruct_packet' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: could not read symbols: Bad value 
```

如果我使用该标志重新编译 x264、libvpx 和 ffmpeg `--enable-pic`，OpenCV 编译仍然失败，这次在上面的代码段中分别使用 ( `kdbwin.o`, `.rodata`) 而不是 ( `avpacket.o`, `av_destruct_packet`)。

**编辑#6：**`--enable-shared`通过添加libvpx 和 ffmpeg 的配置选项来修复上述错误。OpenCV 重新编译并成功构建，ffmpeg 工作得很好。可悲的是，在运行上一个命令 ( `ffmpeg -sameq -i normal.avi p_normal.avi`) 之后，我的脚本*仍然*无法检索任何帧；返回的标志仍然是 False。还有什么想法吗？

**编辑#7：**这是我正在使用的最新脚本。

```
import numpy as np
import cv2
import sys

video = cv2.VideoCapture(sys.argv[1])
flag, frame = video.retrieve()
if not flag:
  print 'Error'
  quit()
proxy = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
cv2.imwrite('image.png', proxy) 
```

**编辑#8：**明白了！代码应该是这样的：

```
import numpy as np
import cv2
import sys

video = cv2.VideoCapture(sys.argv[1])
if video.grab():
  flag, frame = video.retrieve()
  if not flag:
    print 'Error'
    quit()
  proxy = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
  cv2.imwrite('image.png', proxy) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:12:27.820

Most likely the problem is with ffmpeg and the used video codec. Could you share one of these videos? then we can check the codec and see what's wrong. Also we don't know what ffmpeg version you've got on your system.

Just side note, why are you mixing the cv and cv2 interfaces? the code would look better by using just the cv2 interface.

**Edit:** I forgot to mention, I tested the code, so certainly the problem isn't in the code.

**Edit 2:** It's likely the problem is with ffmpeg not being able to handle your videos. Without testing the videos in question it's hard to say. You can give the cv2 interface a try, [cv2.VideoCapture](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?h#videocapture-videocapture) is what you should use to grab frames from a video file.

**Edit 3:** I had a look at the video, it seems the way OpenCV uses ffmpeg has a problem with your video. A quick workaround is to process your videos with ffmpeg before opening by OpenCV. `ffmpeg -sameq -i normal.avi p_norma.avi` gives you a video, `p_norma.avi`, that you can process by OpenCV without problem. For `normal.avi`:

```
Selected video codec: [rawbgr8flip] vfm: raw (RAW BGR8) 
```

and for the generated video `p_norma.avi`:

```
Selected video codec: [ffodivx] vfm: ffmpeg (FFmpeg MPEG-4) 
```

Hence, the generated video is about 10 times smaller. Would that be a possible solution for you?

# cuda - 在 CUDA 内核中是否有与 memcpy() 等效的方法？

> ID：10456728
> 
> 赞同：22
> 
> 时间：2012-05-04T22:07:05.933
> 
> 标签：cuda

我正在尝试使用 CUDA 内核异步分解和重塑数组的结构。`memcpy()`在内核中不起作用，`cudaMemcpy()`*;也不起作用 我不知所措。

谁能告诉我从 CUDA 内核中复制内存的首选方法？

**值得注意的是，`cudaMemcpy(void *to, void *from, size, cudaMemcpyDeviceToDevice)`它不适用于我正在尝试做的事情，因为它只能从内核外部调用并且不会异步执行。**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-06T06:42:07.687

是的，`memcpy`在 cuda 内核中有一个等价物。它被称为 `memcpy`。举个例子：

```
__global__ void kernel(int **in, int **out, int len, int N)
{
    int idx = threadIdx.x + blockIdx.x*blockDim.x;

    for(; idx<N; idx+=gridDim.x*blockDim.x)
        memcpy(out[idx], in[idx], sizeof(int)*len);

} 
```

像这样编译没有错误：

```
$ nvcc -Xptxas="-v" -arch=sm_20 -c memcpy.cu 
ptxas info    : Compiling entry function '_Z6kernelPPiS0_ii' for 'sm_20'
ptxas info    : Function properties for _Z6kernelPPiS0_ii
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 11 registers, 48 bytes cmem[0] 
```

并发出 PTX：

```
.version 3.0
.target sm_20
.address_size 32

    .file   1 "/tmp/tmpxft_00000407_00000000-9_memcpy.cpp3.i"
    .file   2 "memcpy.cu"
    .file   3 "/usr/local/cuda/nvvm/ci_include.h"

.entry _Z6kernelPPiS0_ii(
    .param .u32 _Z6kernelPPiS0_ii_param_0,
    .param .u32 _Z6kernelPPiS0_ii_param_1,
    .param .u32 _Z6kernelPPiS0_ii_param_2,
    .param .u32 _Z6kernelPPiS0_ii_param_3
)
{
    .reg .pred  %p<4>;
    .reg .s32   %r<32>;
    .reg .s16   %rc<2>;

    ld.param.u32    %r15, [_Z6kernelPPiS0_ii_param_0];
    ld.param.u32    %r16, [_Z6kernelPPiS0_ii_param_1];
    ld.param.u32    %r2, [_Z6kernelPPiS0_ii_param_3];
    cvta.to.global.u32  %r3, %r15;
    cvta.to.global.u32  %r4, %r16;
    .loc 2 4 1
    mov.u32     %r5, %ntid.x;
    mov.u32     %r17, %ctaid.x;
    mov.u32     %r18, %tid.x;
    mad.lo.s32  %r30, %r5, %r17, %r18;
    .loc 2 6 1
    setp.ge.s32     %p1, %r30, %r2;
    @%p1 bra    BB0_5;

    ld.param.u32    %r26, [_Z6kernelPPiS0_ii_param_2];
    shl.b32     %r7, %r26, 2;
    .loc 2 6 54
    mov.u32     %r19, %nctaid.x;
    .loc 2 4 1
    mov.u32     %r29, %ntid.x;
    .loc 2 6 54
    mul.lo.s32  %r8, %r29, %r19;

BB0_2:
    .loc 2 7 1
    shl.b32     %r21, %r30, 2;
    add.s32     %r22, %r4, %r21;
    ld.global.u32   %r11, [%r22];
    add.s32     %r23, %r3, %r21;
    ld.global.u32   %r10, [%r23];
    mov.u32     %r31, 0;

BB0_3:
    add.s32     %r24, %r10, %r31;
    ld.u8   %rc1, [%r24];
    add.s32     %r25, %r11, %r31;
    st.u8   [%r25], %rc1;
    add.s32     %r31, %r31, 1;
    setp.lt.u32     %p2, %r31, %r7;
    @%p2 bra    BB0_3;

    .loc 2 6 54
    add.s32     %r30, %r8, %r30;
    ld.param.u32    %r27, [_Z6kernelPPiS0_ii_param_3];
    .loc 2 6 1
    setp.lt.s32     %p3, %r30, %r27;
    @%p3 bra    BB0_2;

BB0_5:
    .loc 2 9 2
    ret;
} 
```

at 的代码块是编译器自动发出`BB0_3`的字节大小的循环。`memcpy`从性能的角度来看，使用它可能不是一个好主意，但它得到了完全支持（并且在所有架构上已经存在很长时间了）。

* * *

四年后编辑添加，由于设备端运行时 API 是作为 CUDA 6 发布周期的一部分发布的，因此也可以直接调用类似

```
cudaMemcpyAsync(void *to, void *from, size, cudaMemcpyDeviceToDevice) 
```

在所有支持它的架构的设备代码中（Compute Capability 3.5 和使用单独编译和设备链接的更新硬件）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-28T19:26:46.883

在我的测试中，最好的答案是编写自己的循环复制例程。就我而言：

```
__device__
void devCpyCplx(const thrust::complex<float> *in, thrust::complex<float> *out, int len){
  // Casting for improved loads and stores
  for (int i=0; i<len/2; ++i) {
    ((float4*) out)[i] = ((float4*) out)[i];
  }
  if (len%2) {
    ((float2*) out)[len-1] = ((float2*) in)[len-1];
  } 
} 
```

`memcpy`在内核中工作，但它可能会慢得多。`cudaMemcpyAsync`从主机是一个有效的选项。

我需要通过 1,600 次复制调用在不同的缓冲区中将 800 个长度为 33,000 的连续向量分区为 16,500 长度。使用 nvvp 计时：

*   内核中的 memcpy：140 毫秒
*   主机上的 cudaMemcpy DtoD：34 毫秒
*   内核中的循环复制：8.6 ms

@talonmies 报告说`memcpy`逐字节复制，这在加载和存储方面效率低下。我的目标仍然是计算 3.0，所以我无法在设备上测试 cudaMemcpy。

**编辑：**在较新的设备上测试。设备运行时间`cudaMemcpyAsync(out, in, bytes, cudaMemcpyDeviceToDevice, 0)`相当于一个好的复制循环，比一个坏的复制循环更好。注意使用设备运行时 api 可能需要编译更改（sm>=3.5，单独编译）。请参阅[编程指南](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#toolkit-support-for-dynamic-parallelism)和[nvcc](https://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#using-separate-compilation-in-cuda)文档进行编译。

设备`memcpy`坏。楼主`cudaMemcpyAsync`好。设备`cudaMemcpyAsync`好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:36:15.163

`cudaMemcpy()` does indeed run asynchronously but you're right, it can't be executed from within a kernel.

Is the new shape of the array determined based on some calculation? Then, you would typically run the same number of threads as there are entries in your array. Each thread would run a calculation to determine the source and destination of a single entry in the array and then copy it there with a single assignment. (`dst[i] = src[j]`). If the new shape of the array is not based on calculations, it might be more efficient to run a series of `cudaMemcpy()` with `cudaMemCpyDeviceToDevice` from the host.

# xamarin.ios - 未调用 Monotouch Dialog Custom Element 和 GetHeight

> ID：10456732
> 
> 赞同：1
> 
> 时间：2012-05-04T22:08:01.940
> 
> 标签：xamarin.ios, monotouch.dialog

使用 Monotouch 5.2.11 iOS

我遵循了本教程（[http://tirania.org/monomac/archive/2011/Jan-18.html](http://tirania.org/monomac/archive/2011/Jan-18.html)），创建了一个带有图像的自定义单元格，还添加了 IElementSizing 接口。永远不会调用 GetHeight。

已经提出了类似的问题，并且普遍接受的解决方案是确保并首先创建 RootElements，在将它们添加到控制器之前设置 UnEvenRows=true。这没有用。我已经尝试过这一点以及将部分添加到根元素的所有其他组合，但从未见过 GetHeight 被触发。

MyDataElement 是一个 320x200 的图像，它显示得很好，但它后面的字符串元素没有显示（假设它在它后面）。因此，如果我将自定义单元格拖到顶部上方，它会消失、重新出现，并且第二个字符串元素会显示在其顶部。

这是我尝试过的代码：

```
public class MyDataElement : Element, IElementSizing {
 static NSString key = new NSString ("myDataElement");
 public MyData MyData;

 public MyDataElement (MyData myData) : base (null)
 {
      MyData = myData;
 }

public  float GetHeight (UITableView tableView, NSIndexPath indexPath){
    return  200f;   // break point here is never hit ever   
 }

public override UITableViewCell GetCell (UITableView tv)
 {
      var cell = tv.DequeueReusableCell (key) as MyDataCell;
      if (cell == null)
           cell = new MyDataCell (MyData, key);
      else
           cell.UpdateCell (MyData);

      return cell;
 }

public partial class TableTester : DialogViewController
{

    public TableTester () : base (UITableViewStyle.Grouped, null)
    {

    var re = new RootElement("Sample") { 
            new Section("Testy") {
                new MyDataElement(new MyData() { stuff="hello"}),
                new StringElement("Sample")
            }
        };
        re.UnevenRows = true;

        this.Root = re;

        //this.Root = root;
    }

} 
```

除此之外，我什至做了这个也没有用：

```
public class TestNavigator : UINavigationController {

    public TestNavigator() {

        TabBarItem = new UITabBarItem("Test", null, 1);

        var re = new RootElement("Sample") { 
            new Section("Sammy") {

                new StringElement("Sample"),
                new MyDataElement(new MyData() { stuff="sam"}),
                new StringElement("Sample 2")
            }
        };
        re.UnevenRows = true;
        var dv = new DialogViewController(re);
        re.UnevenRows = true;

        PushViewController(dv, true);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:17:32.473

经过大量的试验和错误，我必须确保并删除我从 github 下载的对 Monotouch.Dialog 的引用，并使用内置的引用。似乎 getheight 可能在 github 中损坏了。

# mysql - 开始交易或开始工作

> ID：10456735
> 
> 赞同：11
> 
> 时间：2012-05-04T22:08:05.393
> 
> 标签：mysql, percona

我不知道使用 Start Transaction OR Begin Work 哪个更好，有什么区别。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T22:18:00.940

从[MySQL 手册](http://dev.mysql.com/doc/en/commit.html)：

> [`BEGIN`](http://dev.mysql.com/doc/en/commit.html)并且[`BEGIN WORK`](http://dev.mysql.com/doc/en/commit.html)被支持作为[`START TRANSACTION`](http://dev.mysql.com/doc/en/commit.html)启动事务的别名。[`START TRANSACTION`](http://dev.mysql.com/doc/en/commit.html)是标准 SQL 语法，是启动临时事务的推荐方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T21:38:59.220

这是[MySQL 8.0 手册](https://dev.mysql.com/doc/refman/8.0/en/begin-end.html)的更新答案：

> BEGIN ... END 语法用于编写复合语句，这些语句可以出现在存储程序（存储过程和函数、触发器和事件）中。

这意味着 BEGIN ... END 语法仅用于构建代码并启用嵌套（此块可以嵌套）。稍后在手册中：

> 在所有存储的程序中，解析器将 BEGIN [WORK] 视为 BEGIN ... END 块的开始。要在此上下文中开始事务，请改用 START TRANSACTION。

这意味着 BEGIN/BEGIN WORK 是 BEGIN ... END 语法中 BEGIN 的别名，它们不是 START TRANSACTION 的别名。在存储过程、函数、触发器和事件中，您应该始终使用 START TRANSACTION 来启动事务。

# java - 套接字通信未到达服务器

> ID：10456736
> 
> 赞同：2
> 
> 时间：2012-05-04T22:08:32.553
> 
> 标签：java, sockets

我有以下代码（尝试）写入服务器：

```
 String serverName = "w.x.y.z"; 
    int port = 3010;

    InetAddress inetAddress = InetAddress.getByName(serverName);

    Socket socket = new Socket(inetAddress, port);

    BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
    bufferedWriter.write(transactionString);
    bufferedWriter.write(headerString);
    bufferedWriter.write(loginString);
    bufferedWriter.flush();

    String result = null;
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    StringBuilder sb = new StringBuilder();
    String str;
    while ((str = bufferedReader.readLine()) != null)
    {
        sb.append(str + "\n");
    }
    result = new String(sb);
    debug("done with reads");

    textArea.setText(new String(result));
}
catch (UnknownHostException e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch (IOException e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我在远程机器上的服务器代码中有一个断点，并且我有一个通过同一个套接字进行通信的 Visual Basic 程序。我已经运行了 Visual Basic 代码并（反复）验证了服务器在那里，正在侦听这个套接字，并且我可以通过运行该程序来达到我的断点。

当我运行这个程序时，我没有遇到断点。我尝试了各种有关设置套接字的方法，例如仅使用“new Socket()”实例化套接字，然后使用 setter 方法设置 inetAddress 和端口号。我使用的是 OutputStreamWriter 而不是 BufferedWriter。我已经尝试过将 KeepAlive 设置为 false 并将超时设置为 15 秒。它都不会导致服务器达到其断点。

我得到以下输出。

```
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(Unknown Source)
    at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
    at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
    at sun.nio.cs.StreamDecoder.read(Unknown Source)
    at java.io.InputStreamReader.read(Unknown Source)
    at java.io.BufferedReader.fill(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source) 
```

当然还有更多的 stackTrace 行。

这不是数据格式问题；一旦服务器听到该端口上的消息，断点就应该被击中，然后才有机会确定它是否有效。这不是服务器工作的问题，因为它在这个端口和来自其他程序的套接字上工作。我已经三重检查了两者之间的地址和端口号；我认为那里不会有任何问题。

这不是任何形式的阅读问题。正如我所说，大型机上的断点没有被命中。

我在调用 getByName() 后设置了一个断点，在调试器中打开 inetAddress，找到代表 IP 地址的 4 字节 int，并翻译每个十六进制字节——从域名翻译后，具有相同的 IP 地址我从运行所有这些的机器上对服务器进行 ping 操作。

有人可以建议我在哪里看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:20:56.970

原来服务器需要一个 SSL 套接字。感谢那些做出回应的人。

# php - Windows 7 上 Git 与 phpDesigner 的集成

> ID：10456737
> 
> 赞同：0
> 
> 时间：2012-05-04T22:08:43.180
> 
> 标签：php, git, windows-7, phpdesigner

如何配置 phpDesigner 以将我的代码与我的 Git 存储库同步。PS：我的操作系统是Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:13:29.133

phpDesigner 本身不支持 GIT 内置，但它兼容 windows shell 和文件管理，因此可以与[msysgit / git for windows](http://msysgit.github.com/)一起使用。

# javascript - JavascriptResult 将 javascript 作为字符串放入页面？

> ID：10456739
> 
> 赞同：2
> 
> 时间：2012-05-04T22:08:48.653
> 
> 标签：javascript, asp.net-mvc, razor

我是 .NET MVC 的新手。我试图运行所有返回类型的 MVC，但我无法工作 javascriptResult。以下在我的控制器中：

```
 public ActionResult DoSomething() {
        string s = "alert('Hello world!');";
        return JavaScript(s);
    } 
```

这在我看来

```
@Ajax.ActionLink("click", "DoSomething", new AjaxOptions()) 
```

当我点击链接时，它会显示“alert('Hello world!');” 作为字符串，因此不会触发警报。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:21:16.587

似乎文档是“错误的”，并且[`Controller.JavaScript`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.javascript%28v=vs.100%29.aspx)操作结果很可能只考虑返回 JavaScript 包含文件（[另请参见此线程](http://forums.asp.net/t/1716356.aspx/1)）：

**控制器**

```
public ActionResult JavaScript()
{
    string s = "alert('Hello world!');";
    return JavaScript(s);
} 
```

**看法**

```
<script type="text/javascript" src="~/Controller/JavaScript"></script> 
```

如果你想返回内联 JavaScript，你可以[`Controller.Content`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.content%28v=vs.100%29.aspx)结合使用作为你的操作结果[`Html.RenderAction`](http://msdn.microsoft.com/en-us/library/ee703541%28v=vs.100%29.aspx)：

**控制器**

```
public ActionResult JavaScript()
{
    string s = "alert('Hello world!');";
    return Content(s);
} 
```

**看法**

```
<script type="text/javascript">
    @{ Html.RenderAction("JavaScript", "Controller"); }
</script> 
```

# jakarta-ee - 如何在单个安装程序中为 Java EE Web 应用程序创建安装程序？

> ID：10456741
> 
> 赞同：1
> 
> 时间：2012-05-04T22:09:02.873
> 
> 标签：jakarta-ee, tomcat, web-applications, java

有没有办法创建一个包含整个 Java EE Web 应用程序的安装程序，而最终用户只需执行一个安装程序，而无需安装整个生产环境？

我正在尝试做的是为他们保存JDK + Tomcat的安装，如果您有更好的解决方案，请提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:28:16.330

对于 Windows 环境，您可以按如下方式创建安装程序，您可以通过为 linux 环境创建 shell 脚本来进行准备。

1、打包s/w的二进制发行版（例如postgresql、jetty、jre等...）

2、把你的war文件放到jetty webapps

3、在postgres里面创建data文件夹

4、设置各种环境变量并使用批处理文件进行初始化。就我而言，我创建了以下“install.bat”文件。

```
REM set jdk environment
PATH=%~dp0Java\jre6\bin;%~dp0Java\jre6\lib;%~dp0pgsql\bin;%PATH%
setx PATH "%PATH%"

REM set postgres environment
SETX PGDATA "%~dp0pgsql\data"
SETX PGDATABASE postgres
SETX PGUSER postgres
SETX PGPORT 5432
SETX PGLOCALEDIR "%~dp0pgsql\share\locale"

REM initdb initialize the postgresql initialization properties
"%~dp0pgsql\bin\initdb" -D "%~dp0pgsql\data" -U postgres -A trust

REM put the temp.vbs script into startup
cscript //NoLogo //B "%~dp0start_startup_shortcut.vbs"
cscript //NoLogo //B "%~dp0start_desktop_shortcut.vbs"
cscript //NoLogo //B "%~dp0app_shortcut.vbs"
REM start the database service
"%~dp0pgsql\bin\pg_ctl" -D "%~dp0pgsql\data" start

timeout /T 10

"%~dp0pgsql\bin\createdb.exe" -U postgres dbName
"%~dp0pgsql\bin\psql.exe" -U postgres -d dbName -f "%~dp0backup.sql"

REM java -DSTART="%~dp0jetty8\start.ini" -jar "%~dp0jetty8\start.jar"

REM start the jetty server
java -Djetty.home="%~dp0jetty8" -jar "%~dp0jetty8\start.jar" > pb_log.txt

pause 
```

5、创建批处理文件启动服务。例如“start.bat”

```
REM start the database service

"%~dp0pgsql\bin\pg_ctl" -D "%~dp0pgsql\data" start

java -Djetty.home="%~dp0jetty8" -jar "%~dp0jetty8\start.jar" 
```

6、您可以按如下方式创建应用程序快捷方式。例如“app_shortcut.vbs”

```
Dim FileName
FileName = "projectName"

Set wsShell= CreateObject("WScript.Shell")

Set wshSysEnv = wsShell.Environment("PROCESS")

sMyHomePath = wshSysEnv("HOMEPATH")

Set shortcut =
wsShell.CreateShortcut(CreateObject("WScript.Shell").SpecialFolders("Desktop")& + "\" + 
FileName + ".lnk")

shortcut.Description = "Start projectName"

currentDirectory = left(WScript.ScriptFullName,
(Len(WScript.ScriptFullName))-(len(WScript.ScriptName)))

shortcut.TargetPath = currentDirectory + "projectName.bat"

shortcut.Arguments = "/Arguments:Shortcut"

shortcut.Save 
```

7、启动服务桌面快捷方式如下：

```
Dim FileName
FileName = "Start projectName Server"

Set wsShell= CreateObject("WScript.Shell")

Set wshSysEnv = wsShell.Environment("PROCESS")

sMyHomePath = wshSysEnv("HOMEPATH")

Set shortcut = 
wsShell.CreateShortcut(CreateObject("WScript.Shell").SpecialFolders("Desktop")& + "\" + 
FileName + ".lnk")

shortcut.Description = "Start projectName"

currentDirectory = left(WScript.ScriptFullName,
(Len(WScript.ScriptFullName))-(len(WScript.ScriptName)))

shortcut.TargetPath = currentDirectory + "start.bat"

shortcut.Arguments = "/Arguments:Shortcut"

shortcut.Save 
```

8、运行应用程序批处理文件

```
@echo off
netstat -o -n -a | findstr 0.0:9095
if %ERRORLEVEL% equ 0 (start http://localhost:9095) ELSE (echo "Please Start the Server"
pause) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:57:14.663

更简单的方法是使用您需要的所有文件（Tomcat 和 JDK）创建一个压缩文件。解压缩文件后，这可以运行命令来启动 Tomcat 或您需要的东西。有必要考虑到 Tomcat 和 JDK的**路径与原始环境中***的相同*。

我看到[Winrar](http://www.rarlab.com/)可以生成可执行文件，并且可以在提取结束时运行命令。（您在安装新程序时看到过这种情况吗？首先解压缩，然后安装。）至少在 Windows 中是这样。其他库或程序可能会生成类似 Winrar 的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:08:13.020

虽然单个安装程序可能看起来很方便，但在许多用例中可能会开始出现问题：

*   当必须升级 Tomcat、JDK 或其他一些组件以解决安全问题时。最终用户使用单独的安装程序更容易做到这一点，您不必使用更新的位创建新的安装程序
*   某些用户可能希望在与您捆绑的应用服务器不同的应用服务器上运行您的应用程序
*   如果每个应用程序都这样做，用户最终会为每个应用程序安装一个 JDK + 一个容器安装

由于 JVM 安装和 Tomcat 安装都很简单，我建议您在发布您的应用时附上一些漂亮、清晰的安装说明，而不是作为一个单独的包。YMMV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T22:19:09.430

如果您的 Web 应用程序只是一个 WAR 文件并且您可以使用任何 servlet 2.4 容器，那么请考虑将其嵌入 Winstone 容器中：

[http://winstone.sourceforge.net/#embedding](http://winstone.sourceforge.net/#embedding)

您现在已将问题简化为一个可执行的 JAR，其中存在大量安装程序。选择哪一种要视实际情况而定。

# javascript - Javascript Array 'Literal' - 这只是描述它是如何创建的，因为它可以动态更改吗？

> ID：10456743
> 
> 赞同：0
> 
> 时间：2012-05-04T22:09:11.657
> 
> 标签：javascript, literals

我不明白为什么 Mozilla 在使用 VARIABLE 关键字定义它时将其称为数组“文字”，并且可以完全更改...

`var coffees = ["French Roast", "Colombian", "Kona"];`

谁能给我解释一下？

[https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Object_literals](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Object_literals)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:11:37.467

您混淆了文字和常量。

常量不会改变，但文字只是意味着您将数组值作为一个整体显式设置。

换句话说，您正在定义您*真正*想要的数组值。文字本身（右侧）是常量，但您将其分配给变量。以同样的方式，您可以将常量的值分配给变量。

几乎每种数据类型都有文字。

```
var myNumber = 42;                         // Number literal
var myString = "Thanks for all the fish";  // String literal
var myObject = { dolphins: 1, humans: 2 }; // Object literal 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T22:12:53.300

这是一个文字，因为您使用方括号`var arr = [];`来初始化数组，而不是使用`var arr = new Array();`

这与`{}`对象的文字方式相同

文字是构造函数的对立面，只是一种方便的语言构造。

如果你在谷歌上搜索“literals vs constructors”，你会发现很多关于这个主题的页面：）

您还可以在此处阅读有关 js 文字的更多信息：[https ://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Literals](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Literals)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:11:23.313

术语“文字”只是意味着“这里是数组，就在这里，整个事情”。创建相同数组的非文字方式可能是：

```
var coffees = new Array();
coffees.push("French Roast");
coffees.push("Colombian");
coffees.push("Kona"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T22:14:16.967

写入的[文字值](http://en.wikipedia.org/wiki/Literal_%28computer_programming%29) `["French Roast", "Colombian", "Kona"]`实际上*无法*更改——它是一个包含这三个字符串的数组，仅此而已。一旦文字存储在变量中，变量的值就可以改变，因此该变量是非文字的。

您甚至可以即时更改由字面量表示的结构的值，例如 ，`[1,2,3].push(4)`但即便如此，*写入的值*也是`[1,2,3]`一个字面量，它引用具有这三个元素的数组。

这很像使用数字文字，例如，在`a = 1 + 2`表达式中`1`和`2`是不可更改的文字，但它们可以组合起来产生新的结果（显然 的值`a`可以改变）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T23:25:37.007

*术语数组字面*量出现的主要原因是使用`[]`字面量或`Array()`构造函数创建数组并不能*保证*始终产生相同的结果。这是因为`Array()`构造函数可以被脚本改变甚至替换。考虑这个例子：

```
Array = function() {
    var n = 0;

    for (var i=0, l=arguments.length; i<l; i++) {
        n += arguments[i];
    }

    return n;
}

var myArray = Array(1,2,3); // myArray type is number, value 6, probably not what you'd want 
```

相对

```
var myArray = [1,2,3]; // myArray type is object, value [1,2,3], probably what you'd want 
```

所以除了字面语法更简洁之外，它也是 100% 可预测的。

# html - CSS webkit 动画“堆叠”多个元素

> ID：10456748
> 
> 赞同：1
> 
> 时间：2012-05-04T22:09:41.113
> 
> 标签：html, css, webkit

我一直在尝试使用 webkit 为一些评论制作循环滚动动画，但是每当我应用动画时，效果似乎会“堆叠”起来，并且评论类的每个元素都会比之前的动画稍微快一点。这是我的代码：

CSS

```
.comment {
content:'';
-webkit-animation: movecomments 18s linear infinite;
-moz-animation: movecomments 18s linear infinite;
-o-animation: movecomments 18s linear infinite;
}
@-webkit-keyframes movecomments {
    0% {margin-top: 500px;}
    100% {margin-top: 0px;}
}
@-moz-keyframes movecomments {
    0% {margin-top: 500px;}
    100% {margin-top: 0px;}
}
@-o-keyframes movecomments {
    0% {margin-top: 500px;}
    100% {margin-top: 0px;} 
```

HTML（大致是这样的，实际的注释与 PHP 相呼应）

```
<div class="comment">1</div>
<div class="comment">2</div>
<div class="comment">3</div>
<div class="comment">4</div> 
```

[您可以在我的网站上](http://woopville.uphero.com)查看它的示例，在评论部分的页面底部。

# java - mysql命令应该做什么流程，Java应该怎么做？

> ID：10456750
> 
> 赞同：1
> 
> 时间：2012-05-04T22:09:58.827
> 
> 标签：java, mysql, sql, database, excel

这是我第一次编程，我正在努力理解应该用 mysql 命令做什么以及应该用 Java 做什么（我正在用 Java 对数据库进行编程，因为它不需要在网络上使用）。

假设我有以下管道：

1.  从用户那里获取excel文件。此 excel 文件可在 ID 号下识别。
2.  从excel文件中提取信息。
3.  将提取的信息保存到数据库中。此信息需要通过上述 ID 号保持可识别性。
4.  找到相关的 ID 号并获取保存的提取信息
5.  创建一个包含信息的文本文档。

我需要帮助的是第 2 部分。我应该将信息保存在 java 类的实例下吗？还是我应该立即将数据库中的所有信息保存在一个表中？

现在，我什至看不到使用数据库的意义，因为我已经习惯于在课堂上看到所有内容。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:11:56.877

> 现在，我什至看不到使用数据库的意义，因为我已经习惯于在课堂上看到所有内容。

数据库有助于[持久性](http://en.wikipedia.org/wiki/Persistence_%28computer_science%29)。如果您需要在程序的 2 次运行之间存储信息，或者您需要处理的数据多于一次可以放入内存（包括虚拟内存），那么您需要持久化数据。如果你不这样做，那么你就不需要数据库。

MySQL 尤其是一个[关系](http://en.wikipedia.org/wiki/Relational_model)数据库，因此您通常可以轻松地检索和操作基于关系的数据部分——例如所有具有 5 个以上牙齿的小部件。

如果您习惯于类，那么您就会习惯于与其他类具有 1 对 1、1 对多和多对多关系的类。数据库可以有相同的。在 1:1 关系中，列在同一个表中。在 1:many 和 many:many 关系中，可以连接表之间的关系。

有关数据库上下文中关系的介绍，请参见[http://www.databasejournal.com/sqletc/article.php/1469521/Introduction-to-Relational-Databases.htm](http://www.databasejournal.com/sqletc/article.php/1469521/Introduction-to-Relational-Databases.htm)。

# c# - .NET 中并行任务的线程安全

> ID：10456758
> 
> 赞同：3
> 
> 时间：2012-05-04T22:10:54.017
> 
> 标签：c#, .net, multithreading, thread-safety, task-parallel-library

任务并行库线程的委托的内部是否安全 - 即在该委托中声明的变量的值是否与该线程隔离？

例子：

```
Parallel.ForEach(collection, item => {
    var something = new Something(item.Property);
}); 
```

保证始终是`something`线程唯一的，防止被同一`Parallel`操作创建的另一个线程覆盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:14:16.843

因为这是一个委托`something`，所以它是一个局部变量，如果它是一个*值类型*，肯定是线程安全的- 当然，如果变量持有对共享引用对象的引用（例如，对委托的变量的引用），它仍然可以*被*覆盖用作闭包）

# ruby-on-rails - Rails 迁移更改顺序或顺序

> ID：10456761
> 
> 赞同：17
> 
> 时间：2012-05-04T22:11:08.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

我为我的 Rails 3 应用程序编写了一些迁移，但我想更改迁移的顺序。如何更改迁移顺序或顺序？是否像使用时间戳重命名迁移文件一样简单？

我知道这是一个奇怪的问题，但基本上，我弄乱了我的迁移并删除了一些旧的迁移，现在我需要在创建新表之前删除一个表。我也知道我可以在 create-the-new-table 迁移中包含 drop 语句，但我很想知道如何重新排序迁移。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T22:31:15.083

是的，它会按照前缀的顺序运行尚未运行的迁移。在早期版本的 Rails 中，可能是`2.1`或`2.2`，它们曾经从 开始编号`01`，但它们切换到了时间戳。

有一个表可以跟踪哪些迁移已经运行。目的是，多个开发人员添加了迁移，并稍后在版本控制中检查它们。因此，可能存在尚未运行的迁移，但在已运行的最高编号迁移之前编号。

如果您更改了迁移顺序，（我有）最好在您重新排序的所有迁移之前先下载版本。使用`VERSION`带有 的选项`db:migrate`。如果您想要保留（而不是向下运行）的最高编号迁移是`20120318143249`，请以这种方式调用它。

```
rake db:migrate VERSION=20120318143249 
```

我经常在迁移中运行下来，然后重新运行它，直到我对迁移的细节感到满意为止。有时我会重新订购它们，当我想处理其中一个时，我希望它是最后一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T22:17:44.657

是的，文件名的前缀决定了执行的顺序。但是，请记住，如果您擦除数据库/重新开始，这只会改变您当前的系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-21T21:46:01.673

我遇到了类似的问题，因为迁移的顺序不正确。在阅读 Mitch 的回答后，我决定**重命名迁移**以按照我需要的方式对日期进行排序。在这个修复之后，我跑了`rails db:migrate`，它工作了。不是最优雅的解决方案，但它有效，所以我想我会分享它。

# php - 在相应文章下显示评论的问题

> ID：10456766
> 
> 赞同：0
> 
> 时间：2012-05-04T22:11:46.860
> 
> 标签：php, mysql

我的脚本需要您的帮助，我正在尝试将特定文章的所有评论拉到各自的页面上。

评论显示异常，因为它显示了评论表中对所有文章的所有评论，甚至是我没有发表评论的文章。

**主页**

```
 $query = mysql_query(" SELECT
     c.username , c.comment_body,
     c.comment_date 
     FROM comment AS c  
     INNER JOIN home AS h ON
     c.article_id = h.home_id")
     or die (mysql_error()); 
```

**关于页面**

```
 $query6 = mysql_query(" SELECT
     c.username , c.comment_body,
     c.comment_date 
     FROM comment AS c  
    INNER JOIN about AS as ON
    c.article_id = as.about_id")
    or die (mysql_error()); 
```

**评论表**

```
 CREATE TABLE IF NOT EXISTS`comment`(
     `comment_id` int(255),
     `article_id` int(255),
     `username` varchar(255) ,
     `comment_body` varchar(300),
     `comment_date` datetime,
     PRIMARY KEY (`comment_id`) 
```

**关于表**

```
 CREATE TABLE IF NOT EXISTS `about` (
  `about_id` int(255),
  `about_head` varchar(255)
  `about_content` varchar(4000),
  `about_tags` varchar(255) ,
  `about_created` datetime,

     **Homepage Table**

  CREATE TABLE IF NOT EXISTS `home` (
  `home_id` int(255),
  `home_head` varchar(255)
  `home_content` varchar(4000),
  `home_tags` varchar(255) ,
  `home_created` datetime, 
```

有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:29:11.760

您没有告诉 SQL 您当前正在阅读哪篇文章，因此它会全部获取它们。您需要`WHERE`在查询末尾添加一个子句，如下所示（例如“about”）：

```
SELECT
    c.username, 
    c.comment_body,
    c.comment_date 
FROM comment AS c  
    INNER JOIN about AS a ON
    c.article_id = a.about_id
WHERE a.about_id = ? 
```

将问号替换为当前页面的实际 ID。如果您使用的是[PDO](http://php.net/manual/en/book.pdo.php)[`execute`](http://www.php.net/manual/en/pdostatement.execute.php) ，请在您调用该语句时让它代替您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:29:28.500

你的“关于页面”没有指定一个`WHERE`子句来过滤你想要的结果。将其更改为：

```
SELECT
c.username , c.comment_body,
c.comment_date 
FROM comment AS c  
INNER JOIN about AS as ON
c.article_id = as.about_id
WHERE c.article_id = 123; 
```

# solr - Solr 配置

> ID：10456774
> 
> 赞同：0
> 
> 时间：2012-05-04T22:12:03.413
> 
> 标签：solr

我对 Solr 很陌生，

我真的很想一步一步地让我的 Solr 搜索结果像谷歌一样。

给您一个想法，当您在[http://wiki.apache.org/solr/FindPage](http://wiki.apache.org/solr/FindPage)中搜索“PHP”时，“php”一词会以粗体显示。这与我想要的结果相同。

即使 pdf 非常大，也只显示解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:07:26.527

您可以使用突出显示在结果中显示匹配的片段。

[http://wiki.apache.org/solr/HighlightingParameters](http://wiki.apache.org/solr/HighlightingParameters)

默认情况下，它将用`<em>`标签包装匹配的单词，但您可以通过设置`hl.simple.pre/hl.simple.post`参数来更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:53:29.947

您可能正在查看返回数据的错误部分。尝试查看返回的数据结构的“突出显示”组件（即不要查看响应文档）。这应该给你你想要的片段。

# jquery - jquery中的顺序动画

> ID：10456776
> 
> 赞同：1
> 
> 时间：2012-05-04T22:12:20.900
> 
> 标签：jquery, fade, sequential, jquery-callback

[小提琴](http://jsfiddle.net/xXbbX/2/)

当我单击屏幕顶部的彩色框时，我想淡出这些框和水印，然后将它们淡入，但我不希望动画重叠。

我遇到的问题是水印（大的灰色文本）有时会淡入淡出几次，并且动画以错误的顺序发生。我发现了一些关于类似问题的其他帖子，但它们都假设要动画的元素称为#item1、#item2 等，并使用循环。

编辑：我最终做的是

```
function transition(text,title)
{
    $('.boxes').animate({opacity:0},400,"linear",function() {
        $('.watermark').animate({opacity:0},400,"linear",function(){
            $('.watermark').html(text);
            $('.watermark').animate({opacity:1},400,"linear",function(){
                $('.' + title).animate({opacity:1},400,"linear");
            });
        });
    });
} 
```

我不确定为什么当淡入淡出 * 没有这些回调时这些回调起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:18:48.073

我不确定我是否完全理解您在寻找什么。我已经更新了您的示例以使用该`jQuery.when()`方法 - [http://jsfiddle.net/jaredhoyt/xXbbX/8/](http://jsfiddle.net/jaredhoyt/xXbbX/8/)

如果这不是预期的效果，请告诉我。

作为旁注，我强烈建议在 JavaScript 中使用[1TBS](http://en.wikipedia.org/wiki/Indent_style#Variant%3a_1TBS)缩进样式而不是[Allman](http://en.wikipedia.org/wiki/Indent_style#Allman_style)样式。尽管在大多数语言中这是一个偏好问题，但它实际上在 JavaScript 中具有危险的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:21:00.693

淡入淡出的效果，是因为之前的动画一直没有停过。我只是在您的每个动画前面添加了停止，以确保它们已经停止，然后再处理自己的动画。

```
function transition(text,title)
{
    $('.boxes').stop().fadeOut(400,function()
    {
        $('.watermark').stop().fadeOut(400,function()
        {
            $('.watermark').html(text);
            $('.watermark').stop().fadeIn(400,function()
            {
                $('.'+title).stop().fadeIn(400);
            });
        });
    });
}

$(document).ready(function()
{

    $('li span').click(function()
    {
        var text = $(this).html();
        var title = $(this).attr('title');
        if(text == 'Show All')
        {
            text = "watermark";
        }

        transition(text,title);
    });
});
​ 
```

# pci - PCIe 64 位不可预取空间

> ID：10456779
> 
> 赞同：7
> 
> 时间：2012-05-04T22:12:26.433
> 
> 标签：pci, pci-e

我一直在阅读 PCIe 规范的恐怖，但仍然无法解决以下问题对。

1.  PCIe 是否允许将巨大的（比如 16GB）64 位不可预取内存空间映射到 4GB 边界以上？还是它们仍然绑定到 32 位时代的 1GB，并且没有办法调用大量不可预取的空间？

2.  假设规范允许它（并且我的阅读确实如此），那么广泛可用的 BIOS 是否支持它？还是理论上允许但实践中不允许？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-26T00:54:30.023

### TL;DR / 简答

不可以。对不可预取内存的 BAR 请求仅限于使用低 32 位地址空间。

[http://www.pcisig.com/reflector/msg03550.html](http://www.pcisig.com/reflector/msg03550.html)

### 长答案

答案是否定的原因与 PCI 内部有关。描述 PCI 总线包含的内存范围的数据结构仅保留足够的空间来存储 32 位基址和限制地址，用于不可预取的内存和 I/O 内存范围。但是，它确实保留了足够的空间来存储 64 位基址和可预取内存的限制。

### 更长的答案

具体来说，请查看[http://wiki.osdev.org/PCI#PCI_Device_Structure](http://wiki.osdev.org/PCI#PCI_Device_Structure)，图 3（PCI-to-PCI 桥）。这显示了 PCI 配置空间报头类型 0x01（PCI 到 PCI 桥的报头格式）。请注意，从该表中的寄存器 1C 开始，有：

*   1C：8（中间）位用于 I/O 基地址。只有前 4 位可用。
*   1D：8（中间）位用于 I/O 限制地址。只有前 4 位可用。
*   *忽略 1E-1F。*
*   20：16 位用于不可预取的内存基地址。只有前 12 位可用。
*   22：16 位用于不可预取的内存限制地址。只有前 12 位可用。
*   24：16（中间）位用于可预取内存基地址
*   26：可预取内存限制地址的 16 位（中间）
*   28：扩展可预取内存基地址的高 32 位
*   2C：扩展可预取内存限制地址的高 32 位
*   30：扩展 I/O 基地址的高 16 位
*   32：扩展 I/O 限制地址的高 16 位

实际地址是通过将这些寄存器的（部分）与 0（用于基地址）或 1（用于限制地址）连接在一起来创建的。I/O 和不可预取的基地址和限制地址是 32 位的，形成如下：

```
Bit#                      31            20 19   16 15                       0

I/O Base:               [      16 upper bits      : 4 middle bits : 12 zeros ]
I/O Limit:              [      16 upper bits      : 4 middle bits : 12 ones  ]
Non-prefetchable Base:  [      12 bits     :              20 zeros           ]
Non-prefetchable Limit: [      12 bits     :              20 ones            ] 
```

可预取的基地址和限制地址是 64 位的，形成如下：

```
Prefetchable Base:
Bit#                      63                                                32

                        [                   32 upper bits                     ]
                        [  12 middle bits  :              20 zeros            ]

Bit#                      31                    16 15                        0

Prefetchable Limit:     
Bit#                      63                                               32

                        [                   32 upper bits                     ]
                        [  12 middle bits  :              20 ones             ]

Bit#                      31                    16 15                       0 
```

如您所见，只有可预取的内存基址和限制寄存器被赋予足够的位来表达 64 位地址。所有其他的仅限于 32 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:59:57.840

PCIe 可以定义 64b 内存寻址。BAR（基地址寄存器）的定义和使用在**PCI 3.0**规范（第 6.2.5.1 章“地址映射”）中定义，而不是在**PCIe**规范中。

# linux - cd/bash 在符号链接上的行为

> ID：10456784
> 
> 赞同：28
> 
> 时间：2012-05-04T22:12:55.513
> 
> 标签：linux, bash, filesystems, symlink

假设我的主文件夹中有文件夹 ~/a/b，并且文件夹 b 包含一个名为 'symlink' 的符号链接到 '..'。然后我在 bash 中执行以下操作：

```
hm@mach:~$ cd a/b/symlink
hm@mach:~/a/b/symlink$ pwd -P
/home/hm/a
hm@mach:~/a/b/symlink$ cd ..
hm@mach:~/a/b$ pwd -P
/home/hm/a/b 
```

pwd -P 打印当前工作目录，取消引用所有符号链接。为什么最后是工作目录/home/hm/a/b，而不是/home/hm？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-04T22:22:15.930

据`help cd`，

```
 Options:
      -L        force symbolic links to be followed: resolve symbolic
                links in DIR after processing instances of `..'
      -P        use the physical directory structure without following
                symbolic links: resolve symbolic links in DIR before
                processing instances of `..' 
```

换句话说，`-L`意味着使用**逻辑**结构，而`-P`使用实际的**物理**目录结构。

逻辑结构是这样的，

```
$ tree a
a
└── b
    └── symlink -> .. 
```

当你去的时候，实际的物理结构`a/b/symlink`是，

```
a 
```

如果你想使用*真实的* `..`，那么你还必须使用`cd -P`：

```
 The -P option says to use the physical directory
          structure instead of following symbolic links (see
          also the -P option to the set builtin command);
          the -L option forces symbolic links to be followed. 
```

一个例子，

```
$ cd
$ cd a/b/symlink   # physical location is at a/
$ cd ..            # now is at a/b
$ cd symlink       # goes back to a/b/symlink
$ cd -P ..         # follow physical path (resolve all symlinks)
$ pwd -P           # -P is optional here to show effect of cd ..
/home/sarnold
$ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T22:20:50.320

`bash`跟踪逻辑当前目录路径，如提示中所示，并`cd ..`据此解释类似的内容。`cd`如果您仅在(or )中使用此类路径，这会使事情更加一致，但如果您希望在命令参数（或内部命令）中的路径发生同样的事情；并且有自己的可配置规则`pushd`，则以发生意外事情为代价用于符号链接处理，但大多数命令依赖内核来处理它）。`emacs``vim`

# android - Eclipse - Android GUI 设计器令人难以置信的滞后和内存密集型

> ID：10456789
> 
> 赞同：4
> 
> 时间：2012-05-04T22:13:20.410
> 
> 标签：android, eclipse, memory, lag

我在使用 Android GUI 设计器时遇到了严重问题。

我曾经能够很好地编辑视图，但我在更新方面远远落后。更新后，GUI 编辑器开始滞后。

只要我在视图上编辑属性，这张图片中的图像按钮就会持续闪烁。

![控件闪烁](../Images/5823a25a853a239ab1c783cc34573c56.png)

并且内存使用量猛增。任务管理器显示我的 RAM 在 8 个演出时已完全用完。（javaw.exe ~6.5 gigs 的内存使用）

一旦我从 GUI 编辑器切换（切换到代码编辑器），它就会停止滞后，但内存使用量保持不变。

这是我的 eclipse.ini 配置

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
1024m
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
1024m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx1024m
-XX:MaxPermSize=512m 
```

它正在成为一种负担。

我正在运行 Windows 7 64 位，Eclipse 和 Java 64 位。

# sql - 锚定建模的优缺点是什么？

> ID：10456790
> 
> 赞同：18
> 
> 时间：2012-05-04T22:13:24.170
> 
> 标签：sql, database-design, database-normalization, temporal-database, anchor-modeling

我目前正在尝试创建一个数据库，其中很大一部分数据是临时的。在阅读了许多这样做的技术（大多数涉及 6nf 标准化）后，我遇到了[Anchor Modeling](http://www.anchormodeling.com/)。

我正在开发的模式与锚建模模型非常相似，特别是因为用例（时间数据 + 已知未知数）非常相似，以至于我很想完全接受它。

我遇到的两个最大问题是，我找不到任何详细说明这种方法的负面影响的东西，而且我找不到任何关于在生产中使用它来制作我需要注意的战争故事和陷阱的组织的参考资料。

我想知道这里是否有人足够熟悉来简要阐述一些负面因素（因为积极因素在研究论文及其网站中得到了很好的宣传），以及在生产环境中使用它的任何经验。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T15:39:12.943

参考[**anchormodeling.com**](http://www.anchormodeling.com/modeler/latest/?page_id=112)

以下是我知道的几点

1.  DB 对象的数量太大而无法手动维护，因此请确保您一直使用设计器来改进模式。

2.  目前，设计器完全支持 MS SQL Server，因此如果您必须一直移植代码，您可能需要等到完全支持您的目标数据库。我知道它在下拉框中有 Oracle，但是......

3.  不要期望（也不要求）您的开发人员理解它，他们必须通过 5NF 视图访问模型——这很好。问题是表是通过（而不是）视图上的触发器加载的，这可能（或可能不是）性能问题。

4.  预计您可能需要编写一些额外的维护程序（针对每个时间属性），这些程序尚未自动生成。例如，我经常需要一个时间属性的修剪过程——删除两个连续时间事件中相同 ID 的相同值记录。

5.  生成的视图和对视图的查询可以很好地解决，将来您编写的任何内容都可能如此。但是，“其他人”将在 view-over-views-over-views 上编写查询——这并不总是能很好地解决。因此，预计您可能需要比平时更多地对查询进行监管。

遗憾的是，我最近使用这种方法重构了我仓库的一部分，它就像一个魅力。诚然，仓库没有这里列出的大部分问题。

我建议必须创建一个演示系统并测试、测试、测试……，尤其是第 3 点——通过触发器加载。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-21T09:40:41.980

关于上面的第 4 点。重述控制几乎完成，这样您将能够防止随着时间的推移出现两个连续的相同值。

和一般评论，加入不一定是坏事。阅读：[为什么加入是一件好事](http://anchor-modeling.1047469.n5.nabble.com/Why-joins-are-a-good-thing-td5664808.html)。

6NF 在 Anchor Modeling 中的一大好处是无损模式演化。换句话说，数据库模型的每个先前版本都可以作为当前模型的子集使用。此外，由于更改由模式中的扩展（新表）表示，升级数据库几乎是即时的，并且可以安全地在线完成（即使在生产环境中）。这种好处在 5NF 中会丢失。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T22:59:23.327

我没有读过任何关于它的论文，但由于它是基于 6NF 的，我预计它会遭受 6NF 之后的任何问题。

6NF 要求每个表由一个候选键和不超过一个非键列组成。因此，在最坏的情况下，您将需要九个连接来生成一个 10 列的结果集。但是您也可以设计一个使用 200 个 5NF 表、30 个 BCNF 表和 5 个 6NF 表的数据库。（我认为这将不再是 Anchor Modeling 本身，它似乎将所有表都放在 6NF 中，但我可能错了。）

*神话中的人月*在这里仍然很重要。

> 因此，管理问题不在于是否建立试点系统并将其丢弃。你会这样做的。唯一的问题是是否提前计划构建一次性产品，或者承诺将一次性产品交付给客户。

Fred Brooks, Jr.，在*The Mythical Man-Month*中，第 116 页。

您能以多低的成本构建原型来测试您预期的最坏情况？

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2018-08-24T18:24:27.407

在这篇文章中，我将介绍属于数据库的大部分实际业务。数据库在这个大业务领域的解决方案，根本无法用“锚建模”来解决。在现实的商业世界中，这种情况每天都在发生。那就是数据录入者输入错误数据的情况。

在现实世界的业务中，错误经常发生在数据输入级别。数据输入经常会产生大量错误数据。所以这是一个真正的大问题。“锚定建模”不能解决这个问题。

任何使用“Anchor Modeling”数据库的人都可能输入错误的数据。这是可能的，因为“锚建模”的作者已经写到可以删除错误的数据。

让我用下面的例子来解释这个问题：一位数学教授给了成绩最差的学生最好的成绩。在这所高中，教授在相应的数据库中输入成绩。这名学生为这项刑事服务给了教授钱。这名学生利用这个假成绩成功进入了大学。一个暑假过后，数学教授回到了学校。从数据库中删除错误的成绩后，教授在数据库中输入了正确的成绩。在这所学校，他们使用“锚建模”数据库。因此，数学教授删除了“锚建模”作者严格建议的虚假数据。现在，这位犯下这种罪行的数学教授是干净的，这要归功于“锚建模”软件。

这个例子说，使用“锚建模”，你可以通过应用“锚建模技术”来利用数据进行犯罪。

* * *

在第 5.4 节中，“锚建模”的作者写道：“删除语句仅在应用于删除错误数据时才被允许。”。您可以在“锚建模”的作者撰写的论文“使用第六范式用于结构演化数据的敏捷建模技术”中看到此文本。

请注意，“Anchor modeling”在第 28 届国际概念建模会议上发表并获得最佳论文奖？！

* * *

“Anchor Modeling”的作者声称他们的数据模型可以保持历史！然而这款“Anchor 造型”的样鞋根本无法维持历史。

* * *

由于“锚定建模”允许删除数据，那么“锚定建模”具有对数据的所有操作，即：添加新数据、删除数据和更新数据。更新可以通过两个操作来获得：首先删除数据，然后添加新数据。

这进一步意味着 Anchor 建模没有历史记录，因为它有数据删除和数据更新。

* * *

我想指出，在“锚建模”中，每个错误数据“必须”被删除。在“锚定建模”中，不可能保留错误数据和更正数据。

“锚定建模”不能维护错误数据的历史。

在这篇文章的第一部分，我展示了通过使用“锚建模”，任何人都可以利用数据进行犯罪。这意味着“锚模型”运行公司的业务，直接陷入灾难。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2018-08-25T09:30:15.787

我将举一个例子，以便专业人士可以看到真实而重要的例子，“锚定建模”有多糟糕。

示例 从事数据库业务的专业人士都知道，有成千上万的国际标准已在数据库中成功用作关键。

国际标准：所有专业人士都知道什么是汽车的“VIN”、书籍的“ISBN”以及数以千计的其他国际标准。

国家标准：各国对护照、个人证件、银行卡、条形码等都有自己的标准

当地标准：许多公司都有自己的标准。例如，当您付款时，您有一张带有标准密钥的发票，并且该密钥也写入数据库中。

本示例中所有上述类型的密钥都可以通过各种机构、警察、海关、银行信用卡、邮局等进行检查。您可以在互联网上或使用电话检查其中的许多“密钥” .

我相信这些数据库中的百分比超过了 95%，这些数据库具有标准键的实体，并且我在这个示例中已经展示过。

对于上述所有情况，“锚代理键”是无稽之谈。“Anchor建模”独家使用“anchor-surrogate key”

在我的解决方案中，我使用了所有在全局或本地级别上都是标准的并且很简单的键。

弗拉基米尔·奥德尔金

# asp.net-mvc-3 - mvc webgrid ajax 分页

> ID：10456795
> 
> 赞同：0
> 
> 时间：2012-05-04T22:13:55.517
> 
> 标签：asp.net-mvc-3, webgrid

```
@{ 
    var gridUser = new WebGrid(canPage: true, defaultSort: "CreatedOn", rowsPerPage: 5, 
                            ajaxUpdateContainerId: "Divxyz"); 
    gridUser.Bind(Model.abc, rowCount: Model.User.Count(), autoSortAndPage: true); 
    gridUser.Pager(WebGridPagerModes.All); 

} 
<div id="Divxyz" style="display: none"> 
```

我正在使用带有 ajax 分页的 mvc3 webgrid ...我想出了我的解决方案来执行上述 ajax 分页。

但是.....我的网格位于页面底部，当我单击页码时（它显示 # 作为其链接页面），它会将我带到页面顶部，每次单击页码时再次将网格移动到页面底部. 请帮助我。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:06:31.323

我想出了这个问题的解决方案。我在下面添加了脚本，当我点击页码时页面不滚动

```
<script type="text/javascript">
    $(function () {
        $('th a, tfoot a').live('click', function () {
            $(this).attr('href', '#DivGridUser-anchor');
        });

    });
</script> 
```

# php - PHP从子目录中删除文件？

> ID：10456796
> 
> 赞同：1
> 
> 时间：2012-05-04T22:14:14.143
> 
> 标签：php, file, directory, delete-file, subdirectory

我有一个删除文件的 PHP 脚本。它可以从我的根目录中删除文件，但是当我尝试从子目录中删除时，它会显示“权限被拒绝”。我知道该文件存在并且 PHP 可以访问它，因为我可以读取和写入该文件，但我不能删除它。为什么？

编辑：如果这是相关的，我正在使用 Zymic 托管。但我在 Zymic 上有另一个站点，删除工作正常。我不明白...

编辑：我使用 ajax 访问带有要删除的代码的 PHP 文件，并且 ajax 发送要删除的文件名。我知道它发送的文件名是正确的，因为警告消息会为我打印它。PHP 代码很简单：

```
$file=$_POST['file'];
echo unlink($file); 
```

编辑：我修好了！我不知道为什么会这样，但我 FTP 将目录从 755 更改为 775 谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:18:29.237

要删除您需要对包含它的文件夹具有写入权限的文件，请先检查该文件。

CHMOD xxx -> 所有者组 其他

第一种情况：755 - Owner（读取、写入、执行）、Group（读取、执行）、Other（读取、执行）

第二种情况：775 - Owner（读取、写入、执行）、Group（读取、写入、执行）、Other（读取、执行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:39:35.140

尝试在您正在运行的脚本的开头添加它：

```
error_reporting(E_ALL | E_STRICT); 
```

那应该能够准确指出发生了什么，可能是您没有写入**文件夹的权限**

特别是如果您在 Linux 环境中工作。在 Linux 中，一切都是文件，甚至是文件夹。在删除文件时，您需要能够写入代表文件夹的文件，这就是为什么有权写入您要删除的文件与删除它没有任何关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T04:45:32.917

在使用 unlink($myfile) 之前，您必须先 fclose($myfile)，因为如果它在服务器上被任何人打开，它不会删除它。还要将此脚本与您要删除的文件放在同一目录中，否则您可能会不小心删除整个 DIR。

# android - 阿斯马克。创建新用户并添加到特定组

> ID：10456799
> 
> 赞同：3
> 
> 时间：2012-05-04T22:14:17.703
> 
> 标签：android, xmpp, openfire, asmack

我想通过android客户端注册为xmpp服务器（Openfire）的新用户，并且必须与所有新用户进行通信。我创建了用户，但我不确定如何将这些添加到名册条目中以开始交谈。我不知道创建一个组并添加所有联系人是否更好，但我也不知道该怎么做。

```
 try {
        con.connect();

        AccountManager am = con.getAccountManager();

        am.createAccount(USERNAME, PASSWORD);

        Log.i(TAG,"Creation complete");
    }
    catch (XMPPException e) {
        Log.e(TAG,"Error at user creation "+e);
        return false;

    } 
```

任何人都可以请建议我如何实现这一点...任何帮助将不胜感激...！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:35:04.703

您可以通过发送存在数据包将联系人添加到您的名册中。请参阅[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/roster.html](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/roster.html)上的“**向名册添加条目”部分**

然后您可以将它们添加到名册组：[http ://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/RosterGroup.html](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/RosterGroup.html)

# shell - 相当于 CURRENTDIR="$PWD" 的批处理文件？

> ID：10456801
> 
> 赞同：34
> 
> 时间：2012-05-04T22:14:31.613
> 
> 标签：shell, batch-file

我正在尝试将一个*非常简单*的（Unix）shell 脚本翻译成一个“批处理文件”。我把大部分都放下了，除了这条线

```
CURRENTDIR="$PWD" 
```

我怎样才能把它翻译成“batchese”？

谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-04T22:24:23.213

最简单的形式：

```
SET CURRENTDIR="%cd%" 
```

# css - 如果先前的 TD 带有 CSS，则选择元素

> ID：10456807
> 
> 赞同：1
> 
> 时间：2012-05-04T22:15:15.097
> 
> 标签：css

如果有以下 HTML（可能有更多 TD），我可以在id="current" 之前的所有s 中选择所有**divE**`<div>`样式的 ALL 吗？**`TD`**

 **我想我可以用 jQuery 做到这一点，但这可以用纯 CSS 完成吗？

HTML

```
<table id="myTbl" cellpadding="0" cellspacing="0">
    <tr>
        <td>
          <div class="red">asdasd</div>
          <div class="divE"></div>
          <div class="divE"></div>
          content
        </td>
        <td id="current">
          <div class="red">asdasd</div>
          <div class="divE"></div>
          <div class="divE"></div>
          content
        </td>
        <td>
          <div class="red">asdasd</div>
          <div class="divE"></div>
          <div class="divE"></div>
          content
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:20:29.180

没有*before*选择器，但是您可以做的是选择所有`td`s（不是 s `#current`），然后“重置”（或“撤消”）所有`td`s after的样式`#current`。

```
td:not(#current) div.divE{
    /* Styles for <td>s before "#current" */
}
td#current ~ td div.divE{ /* This means all "td div.divE" after "td#current" */
    /* Reset/undo styles for all other <td>s */
} 
```

演示：http: [//jsfiddle.net/MYhPP/2/](http://jsfiddle.net/MYhPP/2/)**

# mysql - hbm.xml 不会生成，即使 存在

> ID：10456808
> 
> 赞同：0
> 
> 时间：2012-05-04T22:15:16.403
> 
> 标签：mysql, hibernate, jakarta-ee

我的数据库中有 3 个表

*   人
*   地址
*   个人地址

这是脚本 sql

```
CREATE TABLE IF NOT EXISTS `address` (
  `address_id` int(11) NOT NULL AUTO_INCREMENT,
  `address` varchar(30) NOT NULL,
  PRIMARY KEY (`address_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

CREATE TABLE IF NOT EXISTS `person` (
  `person_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(30) NOT NULL,
  PRIMARY KEY (`person_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

CREATE TABLE IF NOT EXISTS `person_address` (
  `person_id` int(11) NOT NULL,
  `address_id` int(11) NOT NULL,
  PRIMARY KEY (`person_id`,`address_id`),
  KEY `address_id` (`address_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

ALTER TABLE `person_address`
  ADD CONSTRAINT `person_address_ibfk_2` FOREIGN KEY (`address_id`) REFERENCES `address` (`address_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `person_address_ibfk_1` FOREIGN KEY (`person_id`) REFERENCES `person` (`person_id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

这是 hibernate.reveng.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE hibernate-reverse-engineering PUBLIC "-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd">
<hibernate-reverse-engineering>
  <schema-selection match-catalog="manyToManyTest"/>
  <table-filter match-name="person_address"/>
  <table-filter match-name="address"/>
  <table-filter match-name="person"/>
</hibernate-reverse-engineering> 
```

问题是在生成pojos和hbm文件时，没有生成personAddress pojo（hibernate.cfg.xml中没有条目`<mapping resource="pojos/PersonAddress.hbm.xml"/>`），为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:46:57.647

不应生成 PersonAddress 类和 PersonAddress.hbm.xml。原因是默认情况下您的数据库映射到两个实体：Person 和 Address 以及它们之间的多对多关系。

检查 Person.hbm.xml（和 Address.hbm.xml 中的逆）是否包含以下内容：

```
<set ...>
      ...
   <many-to-many class="Address">
</set> 
```

如果是，那么一切都很好。

# biztalk - BizTalk 使用 HL7 适配器 设置接收位置和端口

> ID：10456809
> 
> 赞同：1
> 
> 时间：2012-05-04T22:15:18.463
> 
> 标签：biztalk, biztalk-2010, hl7, btahl7

刚刚安装了 BizTalk 2010 和 HL7 适配器​​，尝试通过管理控制台设置概念验证应用程序：

1）创建一个新的“演示应用程序”
2）创建一个请求/响应接收端口
3）创建一个与接收端口关联的请求/响应接收位置
  3.a）将类型设置为 MLLP
  3.b）我看到的唯一选项接收管道是：
    PassThrueReceive
    XMLRecieve
  3.b) 我看到的发送管道的唯一选项是：
    PassThruTransmit
    XmlTransmit

如何让 BTAHL7X 和 BTAHL7XML 接收/发送管道组件作为选项出现？

我尝试添加对 BTAHL2XMLPipeline.dll 和 BTAHL72XPipeline.dll 的引用，但出现错误：

> 无法将资源添加到应用程序。
> 
> 如需帮助，请单击： http: [//go.microsoft.com/fwlink/ ?LinkId=47400&ProdName=Microsoft+BizTalk+Server+2010&ProdVer=3.9.469.0&EvtSrc=Microsoft.BizTalk.Administration.SnapIn.Properties.Errors&EvtID=AddFilesForm_AddFailed&EvtChain=Microsoft .BizTalk.ApplicationDeployment+%2cApplyMultipleResourcesAddError%3bMicrosoft.BizTalk.ApplicationDeployment+%2cSatEntryExists](http://go.microsoft.com/fwlink/?LinkId=47400&ProdName=Microsoft+BizTalk+Server+2010&ProdVer=3.9.469.0&EvtSrc=Microsoft.BizTalk.Administration.SnapIn.Properties.Errors&EvtID=AddFilesForm_AddFailed&EvtChain=Microsoft.BizTalk.ApplicationDeployment+%2cApplyMultipleResourcesAddError%3bMicrosoft.BizTalk.ApplicationDeployment+%2cSatEntryExists)
> 
> - - - - - - - - - - - - - - - 附加信息：
> 
> 添加资源失败。(mscorlib)
> 
> 如需帮助，请单击： http: [//go.microsoft.com/fwlink/ ?LinkId=47400&ProdName=Microsoft+BizTalk+Server+2010&ProdVer=3.9.469.0&EvtSrc=Microsoft.BizTalk.ApplicationDeployment&EvtID=ApplyMultipleResourcesAddError&EvtChain=Microsoft.BizTalk.ApplicationDeployment+%2cSatEntryExists](http://go.microsoft.com/fwlink/?LinkId=47400&ProdName=Microsoft+BizTalk+Server+2010&ProdVer=3.9.469.0&EvtSrc=Microsoft.BizTalk.ApplicationDeployment&EvtID=ApplyMultipleResourcesAddError&EvtChain=Microsoft.BizTalk.ApplicationDeployment+%2cSatEntryExists)
> 
> * * *
> 
> 资源（-Type="System.BizTalk:BizTalkAssembly" -Luid="BTAHL72XPipelines，Version=1.3.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35"）已存储。1) 使用 BTSTask 的覆盖标志或 2) 在 BizTalk 项目中将重新部署标志设置为 true 或 3) 如果资源存在于指定的目标应用程序“DemoApplication1”中，则单击 Admin MMC 中的覆盖所有复选框以更新。如果资源与另一个应用程序相关联，覆盖标志将被忽略。(Microsoft.BizTalk.ApplicationDeployment.Engine)
> 
> 如需帮助，请单击： http: [//go.microsoft.com/fwlink/ ?LinkId=47400&ProdName=Microsoft+BizTalk+Server+2010&ProdVer=3.9.469.0&EvtSrc=Microsoft.BizTalk.ApplicationDeployment&EvtID=SatEntryExists](http://go.microsoft.com/fwlink/?LinkId=47400&ProdName=Microsoft+BizTalk+Server+2010&ProdVer=3.9.469.0&EvtSrc=Microsoft.BizTalk.ApplicationDeployment&EvtID=SatEntryExists)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:41:38.283

在您的新应用程序中，您是否引用了默认应用程序？

在 BizTalk 管理控制台中，**右键单击**应用程序并选择**属性**...。在“属性”屏幕中，选择“**引用**” 。您需要在此处添加对默认应用程序的引用。

如果您确实有对默认应用程序的引用，那么适配器是否已注册？

在 BizTalk 管理控制台中，**展开平台设置**，然后**右键**单击**适配器**。选择**New > Adapter...**选项，然后在下拉列表中查找**MLLP**。选择**MLLP**并将其命名为**MLLP**，然后选择**OK**。此时，您应该可以使用 MLLP 适配器。

# asp.net-mvc-3 - 带有“$”的金额无法通过 jQuery 不显眼的验证

> ID：10456810
> 
> 赞同：2
> 
> 时间：2012-05-04T22:15:23.443
> 
> 标签：asp.net-mvc-3, jquery-validate

我正在为 MVC3 使用 jQuery 不显眼的验证版本 2.0。我也有最新的 jquery.validate (v 1.9)。我有一个带有此代码的弹出表单：

```
$(document).ready(function () {
    $('#createForm').submit(function () {
        $.validator.unobtrusive.parse($('#createForm'));  
(more) 
```

（第三行是必需的，以便验证由 javascript 添加的表单字段。）

验证工作正常，除了输入到绑定到视图模型中的小数属性的输入标记中的**$1,000.00**值*无效*，而**1,000.00***有效*。显然，“$”在验证器眼中将值转换为字符串。

我已经研究了很多小时，但我只发现了另一个类似的问题（也在 SO 上，但没有得到答复）。我不敢相信每个在模式对话框中处理货币值的 MVC3 开发人员都遇到过这种情况，否则我们现在肯定会有一些解决方案，对吧？

我通过创建 DecimalBinder解决了*服务器端的问题。*现在我需要一个客户端验证的解决方案。我一直在努力研究 jquery.validate.unobtrusive 的 API，但似乎找不到钩子。我不想修改任何标准的 javascript 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:22:56.843

自定义验证方法如何在验证之前首先删除任何 $ 字符？

```
 var currentVal = (control's actual value);
  currentVal = currentVal.replace('$',''); 
```

然后继续验证。明显的缺点是需要自定义验证器。

# iphone - 检测两个物体的碰撞，每个物体都有不同的形状

> ID：10456816
> 
> 赞同：0
> 
> 时间：2012-05-04T22:15:54.230
> 
> 标签：iphone, ios, cocos2d-iphone, box2d-iphone

我想检测两个物体之间的碰撞，一个物体是圆形，另一个是凸体（通过使用顶点和顶点数），我使用接触侦听器类来检测物体之间的碰撞。我尝试检测两个圆形之间的碰撞并且它成功了，但是当我尝试检测***两个物体之间的碰撞（一个具有凸形，另一个具有圆形）***时，它失败了！甚至我使用标签来识别这些尸体。

如何检测具有两种不同形状（圆形和凸面）的两个物体？

**ContactListener.h 代码：**

```
#import "Box2D.h"

class ContactListener : public b2ContactListener 
{
private: 
    void BeginContact(b2Contact* contact);
    void EndContact(b2Contact* contact);
}; 
```

**ContactListener.mm 代码：**

```
#import "ContactListener.h"
#import "SimpleAudioEngine.h"
#import "cocos2d.h"

void ContactListener::BeginContact(b2Contact* contact) {

    b2Body* bodyA = contact->GetFixtureA()->GetBody();
    b2Body* bodyB = contact->GetFixtureB()->GetBody();

    CCSprite* spriteA = (CCSprite*)bodyA->GetUserData();
    CCSprite* spriteB = (CCSprite*)bodyB->GetUserData();

    if (spriteA != NULL && spriteB != NULL) {
        if (spriteA.tag == 1 && spriteB.tag == 50) { // this is work (two shapes are circles

            [[SimpleAudioEngine sharedEngine] playEffect:@"Pin.wav"];
            NSLog(@"Contact With Pin is Beginning");
        }

        if (spriteA.tag == 1 && spriteB.tag == 51) { // this is not work (one is circle shape and another one is convex shape)

            [[SimpleAudioEngine sharedEngine] playEffect:@"Jump.wav"];
            NSLog(@"Contact With Barrier is Beginning");
        }
    }
}

void ContactListener::EndContact(b2Contact* contact) {

    b2Body* bodyA = contact->GetFixtureA()->GetBody(); 
    b2Body* bodyB = contact->GetFixtureB()->GetBody(); 

    CCSprite* spriteA = (CCSprite*)bodyA->GetUserData();
    CCSprite* spriteB = (CCSprite*)bodyB->GetUserData();

    if (spriteA != NULL && spriteB != NULL) {

    }
} 
```

上面代码的标签：

*   球的标签（游戏的主要精灵）形状为 1
*   圆形的标签是 50
*   凸形标签为 51

**编辑：**

这是对象主体创建的代码：

```
#define pinSpriteTag 50
#define barrierSpriteTag 51
#define ballSpriteTag 1

// Creating ball of game (has b2CircleShape)
-(void) createBallOfGameWithPositionX:(int)x yPosition:(int)y radius:(float)radius {

        // Put ball on screen
        ballOfGameSprite = [CCSprite spriteWithFile:@"GameBall-1-ipad.png"];
        ballOfGameSprite.position = ccp(x, y);
        [self addChild:ballOfGameSprite z:1 tag: ballSpriteTag];

        // Create body of ball
        b2BodyDef ballOfGameBodyDef;
        ballOfGameBodyDef.type = b2_staticBody;
        ballOfGameBodyDef.position.Set(ballOfGameSprite.position.x/PTM_RATIO, ballOfGameSprite.position.y/PTM_RATIO);
        ballOfGameBodyDef.userData = ballOfGameSprite;
        ballOfGameBody = world->CreateBody(&ballOfGameBodyDef);

        // Create Physics properties of ball
        b2CircleShape ballOfGameShape;
        ballOfGameShape.m_radius = radius/PTM_RATIO;

        // Create fixture of ball
        b2FixtureDef ballOfGameFixtureDef;
        ballOfGameFixtureDef.shape = &ballOfGameShape;
        ballOfGameFixtureDef.density = 0.9f;
        ballOfGameFixtureDef.friction = 1.0f;
        ballOfGameFixtureDef.restitution = 0.9f;
        ballOfGameBody->CreateFixture(&ballOfGameFixtureDef);

}

// Creating pin of game (has b2CircleShape)
-(void) createNormalPinOnScreenWithPositionX:(int)x yPosition:(int)y radius:(float)radius {

        // Put ball on screen
        CCSprite *pin = [CCSprite spriteWithFile:@"GamePinNormal-ipad.png"];
        pin.position = ccp(x, y);
        [self addChild:pin z:2 tag:pinSpriteTag];

        // Create body of ball
        b2BodyDef pinBodyDef;
        pinBodyDef.type = b2_staticBody;
        pinBodyDef.position.Set(pin.position.x/PTM_RATIO, pin.position.y/PTM_RATIO);
        pinBodyDef.userData = pin;
        b2Body *pinBody = world->CreateBody(&pinBodyDef);

        // Create Physics properties of ball
        b2CircleShape pinShape;
        pinShape.m_radius = radius/PTM_RATIO;

        // Create fixture of ball
        b2FixtureDef pinFixtureDef;
        pinFixtureDef.shape = &pinShape;
        pinFixtureDef.density = 0.9f;
        pinFixtureDef.friction = 1.0f;
        pinFixtureDef.restitution = 0.85f;
        pinBody->CreateFixture(&pinFixtureDef);
}

// Creating Barrier of game (has b2PolygonShape)
-(void) createBarrierOnScreenPositionX:(int)x yPosition:(int)y imageName:(NSString *)imageName verts:(b2Vec2*)verts verNum:(int)verNum {

    CCSprite *BarrierOfGameSprite = [CCSprite spriteWithFile:imageName];
    BarrierOfGameSprite.position = ccp(x, y);
    [self addChild:BarrierOfGameSprite z:1 tag:barrierSpriteTag];

    b2BodyDef BarrierOfGameBodyDef;
    BarrierOfGameBodyDef.type = b2_staticBody;
    BarrierOfGameBodyDef.position.Set(BarrierOfGameSprite.position.x/PTM_RATIO, BarrierOfGameSprite.position.y/PTM_RATIO);
    BarrierOfGameBodyDef.userData = BarrierOfGameSprite;

    b2Body *BarrierOfGameBody = world->CreateBody(&BarrierOfGameBodyDef);

    b2PolygonShape BarrierOfGameShape;
    BarrierOfGameShape.Set(verts, verNum);

    b2FixtureDef BarrierOfGameFixtureDef;
    BarrierOfGameFixtureDef.shape = &BarrierOfGameShape;    
    BarrierOfGameFixtureDef.density = 0.9f;
    BarrierOfGameFixtureDef.friction = 1.0f;
    BarrierOfGameFixtureDef.restitution = 0.0f;
    BarrierOfGameBody->CreateFixture(&BarrierOfGameFixtureDef); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:14:42.877

不检测两个形状之间的碰撞。最好的方法是将对象设置为body的userData。

```
@implemention RigidBody
-(id)init{
    ...
    self.body->userData = self;
} 
```

然后比较类和地址

```
void beginContact(b2contact contact){
    RigidBody *A = (RigidBody*)contact->GetFixtureA()->GetBody()->GetUserData();
    if([A isKindOfClass:[RigidBody class]]){

    }
    //  Or
    if(self == A){

    } 
```

我希望它对你有帮助。

# asp.net-mvc - VB MVC 为多个模型重用局部视图

> ID：10456817
> 
> 赞同：0
> 
> 时间：2012-05-04T22:16:05.093
> 
> 标签：asp.net-mvc, vb.net, partial-views

我有一堆包含审计信息的模型（CreatedBy、CreateDate、UpdatedBy、UpdateDate）。我想创建一个部分视图来显示此信息，然后将其用于 20 个左右的表。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:18:48.417

使用这些属性创建一个接口或基类，然后将部分视图声明为采用该公共类型。

# objective-c - 左侧标注图像未显示在 MKMapView 注释视图中

> ID：10456819
> 
> 赞同：2
> 
> 时间：2012-05-04T22:16:11.393
> 
> 标签：objective-c, ios, mapkit

我不知道我做错了什么，但它就是行不通。

我的`mapView: viewForAnnotation:`样子是这样的：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKAnnotationView *aView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"ImageMapView"];
    if (!aView)
    {
        aView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"ImageMapView"];
        aView.canShowCallout = YES;
        aView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        aView.leftCalloutAccessoryView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
    }
    [(UIImageView *)aView.leftCalloutAccessoryView setImage:nil];
    aView.annotation = annotation;
    return aView;
} 
```

因此，每个新注释都以左侧标注中的空白图像视图开始。

现在，当触摸标注时，将执行下一个代码：

```
- (void)mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view
{
    //loading an image
    [(UIImageView *)view.leftCalloutAccessoryView setImage:image];
} 
```

在日志记录的帮助下，我知道图像的 url 和数据都可以，*图像*本身不是零，但左侧标注中没有显示任何内容。

谁能建议我如何追查这个问题的根源？

## 编辑

我添加了一些日志，所以我可以看到发生了什么：

```
- (void)mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view
{
    UIImage *image = [self.delegate imagesMapViewController:self thumbnailForAnnotation:view.annotation];
    NSLog(@"Image was: %@", [(UIImageView *)view.leftCalloutAccessoryView image]);
    NSLog(@"Image received: %@", image);
    [(UIImageView *)view.leftCalloutAccessoryView setImage:image];
    NSLog(@"Image became: %@", [(UIImageView *)view.leftCalloutAccessoryView image]);
} 
```

我最终得到下一个输出：

```
Image was: (null)
Image received: <UIImage: 0x7933470>
Image became: <UIImage: 0x7933470> 
```

所以图像正在设置，但没有出现，我不知道为什么。此外，第一个日志记录信息仅在录制第二个注释视图后才出现，因此第一个注释视图没有调用是很不寻常的`mapView: didDeselectAnnotationView:`

当我把

```
[(UIImageView *)aView.leftCalloutAccessoryView setImage:[self.delegate imagesMapViewController:self thumbnailForAnnotation:aView.annotation]]; 
```

代替

```
[(UIImageView *)aView.leftCalloutAccessoryView setImage:nil]; 
```

在`mapView: viewForAnnotation:`所有左侧标注配件中都有应有的图像，但*我*想根据需要下载图像

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:08:13.603

问题是，你使用

```
- (void)mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view 
```

什么时候应该使用

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 
```

欢呼）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T06:27:46.887

如果您从变量加载图像，我认为您的 didSelectAnnotationView 方法将不起作用。如果是这样，您需要参考原始注释：

```
-(void) mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    MyAnnotation *pin = (MyAnnotation *) [view annotation];
    view.leftCalloutAccessoryView =  [[UIImageView alloc] initWithImage:[UIImage imageNamed:pin.flag]];

} 
```

希望这可以增强原始答案... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T23:42:51.947

在我的，我有一个从 MapViewController 到 UIImageView 的推送 segue，其中 Identifier 设置为 Push segue。

我在 .h 的 MapViewController 中有这个协议：

```
 @protocol MapViewControllerDelegate <NSObject>
    -(void)mapViewController:(MapViewController *)sender imageForAnnotation:(MKAnnotationView *)annotation;
    -(void)mapViewController:(MapViewController *)sender annotationSegue:(id <MKAnnotation>)annotation;
    @end 
```

然后我在 MapViewController.h @interface 中定义委托：

```
 @property (nonatomic, weak) id <MapViewControllerDelegate> delegate; 
```

您可能不需要上述所需的协议方法。我不确定。

我看到您的 viewforAnnotation 和我的区别在于我翻转了两行：

```
 aView.annotation = annotation;
    [(UIImageView *)aView.leftCalloutAccessoryView setImage:nil]; 
```

使用此方法后，您会看到地图并选择图钉。然后它转到 didSelectAnnotioatnView，正如我在上面与代表一起展示的那样。

我也有一个具有此方法的 PhotoListTableViewController：

```
 -(void)mapViewController:(MapViewController *)sender imageForAnnotation:(MKAnnoatioatnView *)annotation
    {
        dispatch_queue_t downloadQueue = dispatch_queue_create ("flickrUrls", NULL);
        dispatch_asynch(downloadQueue, ^{
            FlickrPhotoAnnotation *fpa = (FlickrPhotoAnnotation *) annotation.annotation;
            NSURL *url = [FlickrFetcher urlForPhoto:fpa.phot format:FlickrPhotoFormatSquare];
            NSData *data = [NSData dataWithContentsOfURL:url];
            dispatch_async(dispatch_get_main_queue(), ^{
                UIImage *image = [UIImage imageWithData:data];
                [(UIImageView *)annotation.leftCalloutAccessoryView setImage:image];
            });
        });
        dispatch_release(downloadQueue);
    } 
```

所以我相信这显示了根本原因（上图）。所以你可以看到，上面设置了图像。您使用的方法将其初始化为 nil 以开始。另外，我的 PhotoListTableViewController 在您看到的@interface 的 .m 部分中实现了上述方法

```
 @interface PhotoListTableViewController()<MapViewControllerDelegate> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T03:50:16.300

我只是这样做了：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {

    if([view.annotation isKindOfClass:[MyLocation class]]) {

        __weak MKAnnotationView *weakView = view;

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            NSData *data = [NSData dataWithContentsOfURL:((MyLocation*)weakView.annotation).thumbnailUrl];
            UIImage *image = [UIImage imageWithData:data];

            dispatch_async(dispatch_get_main_queue(), ^ {

                UIImageView *imgView = [[UIImageView alloc] initWithImage:image];
                weakView.leftCalloutAccessoryView = imgView;
            });
        });
    }
} 
```

这意味着它只是在您下载它时开始下载它，当它完成时，它会为视图设置动画以为图像腾出空间。

# silverlight - 数据网格中组合框的选定值未设置 - silverlight mvvm 模型

> ID：10456821
> 
> 赞同：0
> 
> 时间：2012-05-04T22:16:42.223
> 
> 标签：silverlight

下面是我在数据网格中的组合框的 XAML 片段。

```
<data:DataGridTemplateColumn  Header="Entry Mode">
                    <data:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding Path=EntryModeCombo,Mode=TwoWay}"    DisplayMemberPath="Name" SelectedValuePath="Id" SelectedValue="{Binding Path=selectedEntryMode,Mode=TwoWay}" ></ComboBox>
                        </DataTemplate>
                    </data:DataGridTemplateColumn.CellTemplate>
                </data:DataGridTemplateColumn> 
```

Entrymode 是系统中的一个实体，该实体的 Id 和 Name 属性用于设置组合的 DisplayMemberPath 和 SelectedValuePath。

```
public class A
{
 private ObservableCollection<EntryMode> _EntryModeCombo;
        public ObservableCollection<EntryMode> EntryModeCombo
        {
            get { return _EntryModeCombo; }
            set
            {
                _EntryModeCombo = value;
                RaisePropertyChanged("EntryModeCombo");
            }
        }

 private string _selectedEntryMode;
        public string selectedEntryMode
        {
            get { return _selectedEntryMode; }
           set
            {
                _selectedEntryMode = value;
                RaisePropertyChanged("selectedEntryMode");
           }
        }
} 
```

在我的 viewModel 中，我正在制作 A 类的可观察集合，并使用它来绑定网格。在添加模式下一切正常，但在编辑模式下，当我尝试在网格中设置组合框的选定值时，它不起作用。组合框的填充发生了，但它仍然未被选中。不确定为什么设置了 selectedEntryMode 属性，但不影响网格中的组合选择。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:05:01.633

*SelectedValue*只能用于获取价值。不设置。使用*SelectedItem* insted

# android - 重复 AlertDialog 中的 ListView

> ID：10456830
> 
> 赞同：2
> 
> 时间：2012-05-04T22:17:47.963
> 
> 标签：android, android-listview, android-alertdialog

我的`AlertDialog`包含一个`ListView`. 当`AlertDialog`被解雇时，它又回来了`ListView`被呈现两次。我不知道为什么会这样。这是我的代码：

```
protected Dialog onCreateDialog(int id) {
        AlertDialog.Builder builder = new AlertDialog.Builder(LegendTest.this);
        final LayoutInflater inflater = (LayoutInflater) Legend`enter code here`Test.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.selectfeaturetype, null);
        ListView listView =  (ListView) view.findViewById(R.id.listView1);
        Dialog dialog;

        switch (id) {
        case LEGEND_DIALOG:

            builder.setTitle("Set legend");
            builder.setView(view);

            listView.setAdapter(new BaseAdapter() {

                @Override
                public View getView(int position, View convertView,
                        ViewGroup parent) {

                    if(convertView == null)
                    {
                        convertView = inflater.inflate(R.layout.itemwithimage, null);
                    }
                    MyLegend legendItem = data.get(position);
                    if(legendItem != null)
                    {
                        ImageView img = (ImageView) convertView.findViewById(R.id.listimageView);
                        img.setImageBitmap(legendItem.legendImage);
                        TextView txt = (TextView) convertView.findViewById(R.id.listtextView);
                        txt.setText(legendItem.legendname);
                    }

                    return convertView;
                }

                @Override
                public long getItemId(int position) {

                    return position;
                }

                @Override
                public Object getItem(int position) {
                    return data.get(position);
                }

                @Override
                public int getCount() {

                    if (data == null)
                        return 0;

                    return data.size();
                }
            });

            dialog = builder.create();
            break;

        default:

            dialog = null;
            break;
        }
        return dialog. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:20:04.823

**试试下面的代码**

```
package at.bartinger.list;

import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class PracticeClas extends Activity {

    ArrayList<String> data = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        data.add("Hello");
        data.add("Hello One");
        data.add("Hello Two");
        data.add("Hello Three");
        data.add("Hello Four");
        data.add("Hello Five");
        data.add("Hello Six");

        showDialog(0);
    }

    protected Dialog onCreateDialog(int id) {           
        final LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.main, null);
        ListView listView = (ListView) view.findViewById(R.id.LsOne);
        Dialog dialog = null;

        dialog = new Dialog(PracticeClas.this);
        dialog.setContentView(view);
        dialog.setTitle("Material & Labor:");

        // dialog.create();
        switch (id) {
        case 0:
            listView.setAdapter(new BaseAdapter() {
                @Override
                public View getView(int position, View convertView,
                        ViewGroup parent) {

                    if (convertView == null) {
                        convertView = inflater.inflate(
                                R.layout.list_item_section, null);
                    }

                    TextView txt = (TextView) convertView
                            .findViewById(R.id.list_item_section_text);
                    txt.setText(data.get(position));
                    return convertView;
                }

                @Override
                public long getItemId(int position) {

                    return position;
                }

                @Override
                public Object getItem(int position) {
                    return data.get(position);
                }

                @Override
                public int getCount() {

                    if (data == null)
                        return 0;

                    return data.size();
                }
            });

            dialog.show();
            break;

        default:
            dialog = null;
            break;
        }
        return dialog;
    }

} 
```

# firefox - CSS3 旋转 - Firefox 和 Safari 中的渲染问题

> ID：10456840
> 
> 赞同：11
> 
> 时间：2012-05-04T22:18:50.973
> 
> 标签：firefox, css, transform, rotation

我正在尝试使用 CSS3 属性 »rotate« 将简单的文本行旋转几度，精确度为 1.5 度。

```
 -webkit-transform: rotate(1.5deg);
  -moz-transform: rotate(1.5deg);
  -ms-transform: rotate(1.5deg);
  -o-transform: rotate(1.5deg);
  transform: rotate(1.5deg); 
```

Chrome (v18) 中的结果看起来不错，在 Firefox (v10) 和 Safari (5.1.5) 中，但是我得到了丑陋的结果。

我正在使用用@font-face 实现的字体，但是使用 Arial 我仍然遇到问题（至少在 Firefox 中）。请参阅下面的示例。

真正奇怪的是，在 Safari 中切换到系统字体（Arial）可以解决问题，而在 Firefox 中问题仍然存在。

任何帮助、解决方法或黑客将不胜感激。

**1) Chrome 18 / font-family: Calibri / 对齐OK**

![](../Images/c5a7423a354b500547a9214bf35b7ea2.png)

**2) Firefox 10 / font-family: Calibri / 对齐丑陋**

![](../Images/a9f02ff2a0f033f272f1561d0f8015f6.png)

**3) Firefox 10 / font-family：Arial / 对齐仍然难看**

![](../Images/adb3e9e392d3eae2d40c5fdbd3bc1afc.png)

**4) Safari 5.1.5 / font-family: Calibri / 对齐丑陋**

![](../Images/37ca88f0a95d012bbe8fc810a24d443d.png)

**5) Safari 5.1.5 / font-family: Arial / 对齐OK**

![](../Images/b9565629b77499a1edd1b00951962391.png)

到目前为止，我找到了以下线程，但没有一个给出如何解决问题的解释：

[https://bugzilla.mozilla.org/show_bug.cgi?id=403447](https://bugzilla.mozilla.org/show_bug.cgi?id=403447)

[CSS3 错误 - 使用 transform:rotate 规则时的问题 (Safari + Firefox)](https://stackoverflow.com/questions/7487351/css3-bugs-issues-when-using-transformrotate-rules-safari-firefox)

[CSS变换旋转字母对齐](https://stackoverflow.com/questions/3498480/css-transform-rotate-letter-alignment)

我还尝试设置 DirectWrite 变量（以更改字体渲染），如本教程中所述：[http ://www.askvg.com/how-to-enable-direct2d-directwrite-hardware-acceleration-in-mozilla-firefox /](http://www.askvg.com/how-to-enable-direct2d-directwrite-hardware-acceleration-in-mozilla-firefox/)，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:01:31.237

这不是您可以解决的问题，从错误报告和其他位来看，浏览器制造商似乎意识到了这些问题......但我暂时不会坚持永久修复。

也许尝试将文本放在它自己的 div 容器中并直接旋转它而不是文本？

但是恕我直言，如果您需要在生产站点上使用它，请将文本替换为图像。用户使用的浏览器不支持新的 CSS3 东西，所以如果它很重要，要么不要使用它，要么确保它很好地降级（在所有平台上都可以使用，但可能会失去一些时髦），即禁用浏览器上的文本旋转看起来很丑。

# android - 如何将自定义 jar 添加到我的 android 项目中？（我将 core.jar 添加到我的 android 项目中，但仍然找不到异常。）

> ID：10456841
> 
> 赞同：0
> 
> 时间：2012-05-04T22:18:52.627
> 
> 标签：android, eclipse, adt, zxing

我已经下载了适用于 android 的 Zxing Barcode Scanner 代码。
我将 core.jar 添加到我的 android 项目构建中它可以编译但是当它在刺激器上运行时仍然缺少类错误
java.lang.ClassNotFoundException: com.google.zxing.ResultMetadataType 当我将代码的所有源代码添加到我的项目 src没有更多的错误

如果我想添加我在android项目中定义的jar包怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:35:44.880

试试这个：

在 Properties -> Java Build Path -> "Order and Export" 中勾选此 jar 的框（之前已列出，但未选中）

在这里回答： [NoClassDefFoundError - Eclipse and Android](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android/10140763#10140763)

# eclipse - Eclipse 插件开发 - 拖放 UI 组件

> ID：10456843
> 
> 赞同：2
> 
> 时间：2012-05-04T22:18:56.730
> 
> 标签：eclipse, drag-and-drop, eclipse-plugin

1.  我们可以在 Netbeans 中拖放 UI 组件，并自动生成 Swing 代码。
2.  我们可以在Eclipse中拖放UI组件进行Android开发，xml是自动生成的。
3.  我们可以在 Dreamwaver 中拖放 UI 组件，并自动生成 html。
4.  我们可以在 Eclipse BIRT 插件中拖放 UI 组件，并自动生成 xml。

如果我想创建一个像上面这样的 IDE 工具来拖放一些组件并自动生成一些 xml 代码。有什么我可以利用的框架吗？我正在考虑eclipse插件开发。我想知道是否有任何现有的代码/框架，这样我就不必编写太多代码来制作 DND UI、属性设置等，而只需将我的 xml 生成业务逻辑放入插件中。

我最后的工作应该是：一个可以安装到eclipse中的eclipse插件。我可以拖放 UI 组件并根据我在插件中编码的业务逻辑自动生成 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T16:08:45.597

看看[图形编辑框架 - GEF](https://eclipse.org/gef/)

# java - 在 Java 中，为什么我的多线程不起作用？

> ID：10456844
> 
> 赞同：0
> 
> 时间：2012-05-04T22:19:03.107
> 
> 标签：java, multithreading, asynchronous, applet, graphics2d

起初我是这样做的：

```
public SpaceCanvas(){
    new Thread(new Runnable () {//this is the thread that triggers updates, no kidding
        int fcount = 0;

        @Override
        public void run() {
                System.out.println("Update thread started!");
                while(!Thread.interrupted()){
                    fcount++;
                    while(players.iterator().hasNext()){
                        players.iterator().next().update(fcount);
                    }
                    while(entities.iterator().hasNext()){
                        entities.iterator().next().update(fcount);
                    }
                    System.out.println("About to paint");
                    repaint();
                    System.out.println("Done with paints");
                    try {
                        Thread.sleep(500);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
        }
    }).start();
    players.add(new LocalPlayer(0, 9001, 0, 0, 0, 0, this, null));
} 
```

在我称之为 SpaceCanvas 的东西的初始化程序中。但是，这不允许创建画布，因此也不允许创建它所在的小程序，因为线程*实际上*并没有异步运行。然后，我用“.run()”替换了“.start()”，线程只运行了一次，但 SpaceCanvas 完美初始化。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:20:05.913

我不确定这种代码是否按您期望的方式工作：

```
while(players.iterator().hasNext()){
    players.iterator().next().update(fcount); 
```

`players.iterator()`获取`players`集合的新迭代器。如果集合中有 0 个项目，那么它将是`false`，但如果有任何项目，您将处于无限循环中，每次都会创建一个新的迭代器。内部的`iterator()`调用`players`也会生成另一个新的迭代器对象。

我认为你应该这样做：

```
Iterator iterator = players.iterator();
while (iterator.hasNext()) {
    iterator.next().update(fcount);
} 
```

这与您的`entities`循环相同。更好的模式（从 Java 5 开始）是使用`for`循环：

```
for (Player player : players) {
    player.update(fcount);
} 
```

此外，如果多个线程正在访问这些集合，它们必须以某种方式`synchronized`。您可以使用并发集合，也可以确保*每次*访问（读取和写入）都在一个`synchronized`块内。

```
synchronized (players) {
    for (Player player : players) {
        player.update(fcount);
    }
}
...
// down in the outer thread
synchronized (players) {
    players.add(new LocalPlayer(0, 9001, 0, 0, 0, 0, this, null));
} 
```

显然，`entities`遗嘱需要以`synchronized`相同的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:35:58.500

1.  在这个千禧年，使用 Swing ( `JApplet/JPanel`) 而不是 AWT ( `Applet/Canvas`)
2.  使用 Swing 时，建立一个每 500 毫秒`Timer`调用一次的 Swing。`repaint()`
3.  （使用 Swing/ 时`Timer`）不要调用`Thread.sleep(n)`EDT（事件调度线程）。

* * *

> ..你能在 JPanel 上画画吗？

肯定的事。为此，请覆盖该`paintComponent(Graphics)`方法。你也可以扩展 a`JComponent`并做同样的事情，但是处理 a 时有一些怪癖，`JComponent`这使得`JPanel`扩展成为更好的选择。

另一方面，完全有另一种方法。

*   创建`BufferedImage`所需的任何自定义图形所需的大小。
*   将图像添加到`ImageIcon`.
*   将图标添加到`JLabel`.
*   将标签添加到 GUI。
*   在每一个`Timer`动作上。
    *   调用`image.getGraphics()`以获取绘图表面。
    *   复制你可能做过的事情`paint()`或`paintComponent()`
        1.  （如果需要）擦除所有以前的绘图。
        2.  绘制当前的自定义渲染。
    *   `dispose()`图像的`Graphics`实例。
    *   称呼`label.repaint()`

# android - 对 ArrayList 进行排序 > 按日期范围

> ID：10456847
> 
> 赞同：1
> 
> 时间：2012-05-04T22:19:12.440
> 
> 标签：android, json, listactivity, sorting

我正在开发一个事件应用程序，需要能够按事件发生的月份整理我的事件。我计划使用“菜单”按钮调出可供选择的月份列表。我尝试使用 Collections.sort，但 Eclipse 不允许使用 HashMap String、String。我将如何让这门课只显示 7 月的活动？

公共课程计划扩展 ListActivity {

```
protected EditText searchText;
protected SQLiteDatabase db;
protected Cursor cursor;
protected TextView textView;
protected ImageView imageView;
protected ArrayList<HashMap<String, String>> myList;
protected ImageLoader imageLoader;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.schedule);

    View layout = findViewById(R.id.gradiant);

    GradientDrawable gd = new GradientDrawable(
            GradientDrawable.Orientation.TOP_BOTTOM, new int[] {
                    0xFF95B9C7, 0xFF06357A });
    gd.setCornerRadius(2f);

    layout.setBackgroundDrawable(gd);

    new GetEventsTask().execute("word");

}

public void featured(View view) {
    startActivity(new Intent(getApplicationContext(), Featured.class));
}

public void schedule(View view) {

}

public void venue(View view) {
    startActivity(new Intent(getApplicationContext(), Venues.class));
}

public void share(View view) {
    startActivity(new Intent(getApplicationContext(), Friends.class));
}

public void myravinia(View view) {
    startActivity(new Intent(getApplicationContext(), Account.class));
}

protected class GetEventsTask extends
        AsyncTask<String, Integer, ArrayList<HashMap<String, String>>> {

    protected ArrayList<HashMap<String, String>> threadList;

    private final ProgressDialog dialog = new ProgressDialog(Schedule.this);

    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.setCancelable(false);
        this.dialog.show();
    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {

        Log.v("Yup", "The thread is running");
        threadList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions
                .getJSONfromURL("my.jason.feed.url");

        try {

            JSONArray current = json.getJSONArray("d");

            for (int i = 0; i < current.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = current.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("showid", "" + Html.fromHtml(e.getString("ShowID")));
                map.put("name", "" + Html.fromHtml(e.getString("Title")));
                map.put("showvenue", "" + e.getString("ShowVenue"));
                map.put("subtitle",
                        "" + Html.fromHtml(e.getString("SubTitle")));
                map.put("venueid", "" + e.getString("VenueID"));

                String showDate = e.getString("ShowDate");
                long epoch = Long.parseLong(showDate);
                Date showDatePresent = new Date(epoch * 1000);
                SimpleDateFormat sdf = new SimpleDateFormat("E, MMMM d");
                String dateOfShow = sdf.format(showDatePresent);
                map.put("showdate", "" + dateOfShow);

                String showStart = e.getString("ShowStart");
                long epoch2 = Long.parseLong(showStart);
                Date showTimePresent = new Date(epoch2 * 1000);
                SimpleDateFormat sdf2 = new SimpleDateFormat("h:mm a");
                String timeOfShow = sdf2.format(showTimePresent);
                map.put("showstart", "" + timeOfShow);

                String showEnd = e.getString("ShowEnd");
                long epoch3 = Long.parseLong(showEnd);
                Date showEndPresent = new Date(epoch3 * 1000);
                SimpleDateFormat sdf3 = new SimpleDateFormat("h:mm a");
                String endOfShow = sdf3.format(showEndPresent);
                map.put("showend", "" + endOfShow);

                String gatesOpen = e.getString("GatesOpen");
                long epoch4 = Long.parseLong(gatesOpen);
                Date gatesOpenPresent = new Date(epoch4 * 1000);
                SimpleDateFormat sdf4 = new SimpleDateFormat(
                        "'Gates open: 'h:mm a");
                String gatesAreOpen = sdf4.format(gatesOpenPresent);
                map.put("gatesopen", "" + gatesAreOpen);

                map.put("aboutartist", "" + e.getString("AboutArtist"));
                map.put("program",
                        "" + Html.fromHtml(e.getString("Program")));
                map.put("programnotes",
                        "" + Html.fromHtml(e.getString("ProgramNotes")));
                map.put("pricing",
                        "" + Html.fromHtml(e.getString("Pricing")));
                map.put("featuring", "" + e.getString("Featuring"));
                map.put("parkdetails", "" + e.getString("ParkDetails"));
                map.put("starred", "" + e.getString("Starred"));

                map.put("image500", "" + e.getString("Image500"));

                map.put("image250", "" + e.getString("Image250"));

                map.put("aboutartist",
                        "" + Html.fromHtml(e.getString("AboutArtist")));
                threadList.add(map);
            }

        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());

        }

        return threadList;          
    }

    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

        myList = new ArrayList<HashMap<String, String>>();
        myList = result;

        LazyAdapter adapter = new LazyAdapter(Schedule.this, myList);
        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                HashMap<String, String> hashMap = myList.get(position);
                // hashMap.put("map", hashMap);
                Intent intent = new Intent(getApplicationContext(),
                        ArtistDetails.class);
                intent.putExtra("map", hashMap);

                startActivity(intent);                  
            }

        });

        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
        }
    }

} 
```

}

我知道我将我的代码留在那里，用于对这项任务不重要的功能，但为了详细说明......
如果我可以提供任何其他细节来帮助解决这个问题，请告诉我。干杯!

我的 2 个适配器：

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());

}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.line_item, null);

    TextView name = (TextView)vi.findViewById(R.id.title); // title
    TextView showdate = (TextView)vi.findViewById(R.id.showdate); // showdate
    TextView showstart = (TextView)vi.findViewById(R.id.showstart); // showstart
    TextView showvenue = (TextView)vi.findViewById(R.id.showvenue); // showstart
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    // Setting all values in listview
    name.setText(data.get(position).get("name"));
    showdate.setText(data.get(position).get("showdate"));
    showstart.setText(data.get(position).get("showstart"));
    showvenue.setText(data.get(position).get("showvenue"));
    imageLoader.DisplayImage(data.get(position).get("image250"), thumb_image);
    return vi;
} 
```

}

和

```
public class JSONfunctions {

public static JSONObject getJSONfromURL(String url){
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

  //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }

    try{

        jArray = new JSONObject(result);            
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }

    return jArray;
} 
```

}

# magento - Magento xml中布局标签的嵌套

> ID：10456851
> 
> 赞同：1
> 
> 时间：2012-05-04T22:19:20.507
> 
> 标签：magento

我不确定将我的布局 xml 保存在自定义模块中的哪个位置。它是放在模块的 config.xml 中还是需要单独的 layout.xml。Magento 如何获取布局 xml？

现在我正在这样使用它，这是行不通的。这里有点无知，有什么指点吗？代码示例对我很有用:)

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Ashfame_Adminoverrider>
            <version>1.0.0</version>
        </Ashfame_Adminoverrider>
    </modules>
    <global>
        <layout>
            <adminhtml_sales_order_create_index>
                <reference name="root">
                    <reference name="form">
                        <reference name="data">
                            <block type="ashfame_adminoverrider/sales_order_create_shipping_address" as="shipping_address" template="ashfame/adminoverrider/sales/order/create/form/address.phtml" />
                        </reference>
                    </reference>
                </reference>
            </adminhtml_sales_order_create_index>
        </layout>
    </global>
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:18:56.877

配置 XML 和布局 XML 是两个不同的东西。

这些`config.xml`文件可用于告诉 Magento 加载新的布局 xml 文件。`catalog.xml`在中搜索

```
app/code/core/Mage/Catalog/etc/config.xml 
```

将节点放在您自己的 XML 文件中的正确位置。你正在寻找这样的东西

```
 <catalog>
                <file>catalog.xml</file>
            </catalog>
            <map>
                <file>catalog_msrp.xml</file>
            </map> 
```

你在那里，将全局唯一命名的 xml 文件放在基本设计包的布局文件夹和/或主题的布局文件夹中。

这应该足以让你在谷歌上搜索。祝你好运。

# amazon-ec2 - 是否可以让 TeamCity 停止并重新启动构建代理的 Amazon EC2 实例？

> ID：10456853
> 
> 赞同：5
> 
> 时间：2012-05-04T22:19:45.727
> 
> 标签：amazon-ec2, amazon-web-services, teamcity, teamcity-7.0, ec2-api-tools

我有 TeamCity (7.0.2) 从自定义 AMI 成功启动 EC2 VM，运行我们的构建，然后发回构建工件。

然而，即使我曾经使用较旧的 TeamCity 版本执行此操作，我总是对它只是在完成后终止实例，然后在下次需要构建代理时使用配置的 AMI 创建新实例的想法感到不满意。

我可以让 TeamCity 发出“停止”命令，然后发出“开始”命令吗？这有很多优点 - 更快的启动时间，允许在代理统计中命名实例，以及将 Mercurial 克隆保存到 EBS 以供下一次构建只有三个。

*ps 我想我可以使用链式构建直接调用 EC2 API，而不是使用内置的云支持，但这听起来工作量很大，而且感觉很不稳定*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:29:50.423

我们计划在 TeamCity 7.1 中提供对 EBS 实例启动停止的支持 请投票给[TW-16419](http://youtrack.jetbrains.com/issue/TW-16419)

TeamCity 7.0 可能会泄漏 EBS 卷[TW-12517](http://youtrack.jetbrains.com/issue/TW-12517)

# java - 将字符串转换为整数

> ID：10456854
> 
> 赞同：2
> 
> 时间：2012-05-04T22:19:49.883
> 
> 标签：java, string, integer, int

我正在尝试将字符串转换为整数。我有以下代码：

```
List<String> strings = populateSomeStrings();
List<Integer> ints = new ArrayList<Integer>();

for (int i = 0; i < strings.size(); i++) {
    ints.add(Integer.valueOf(strings.get(i)));
} 
```

当我运行它时，我得到一个异常说：

```
java.lang.NumberFormatException: Invalid int: "1000" 
```

任何想法为什么会发生这种情况？我也试过 Integer.parseInt 但它做同样的事情。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:25:27.123

你的字符串中显然有一些不是数字的东西。

捕获异常并打印出每个字符的字符串长度和代码点，`codePointAt`例如使用。

那应该告诉你出了什么问题。

# linq - 如何通过加入 LINQ 获得热门类别？

> ID：10456858
> 
> 赞同：2
> 
> 时间：2012-05-04T22:20:13.893
> 
> 标签：linq, entity-framework

我正在从事分类广告项目我面临的问题是获得大多数广告发布的顶级类别，每个类别也有子类别。

我进行了查询，但它适用于我想要的子类别广告，如果任何类别没有子类别，则应该计算父类别广告。

```
var result = (from c in db.Category 
              join a in db.Ad on c.CategoryId equals a.CategoryId 
              where c.ParentId != null 
              group c by c.ParentId into g 
              select new { cat = g.Key, a = g.Count() })
                .OrderBy(c => c.cat)
                .OrderByDescending(a => a.a); 
```

我的类别表是这样的

CategoryId ----- ParentId -----名称

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:46:01.800

我想这可以通过单独的查询来完成：

获取未设置任何 parentId 的类别列表：

```
var resultsWithoutSubs = from c in db.Category
             where c.ParentId == null 
               && !result.Any(r => cat == c.CategoryId)
             select c; 
```

根据上面的列表，重复原来的查询：

```
var counts =  from c in resultsWithoutSubs
          join a in dbAd on c.CategoryId equals a.CategoryId
          group c by c.CategoryId into g
          select new {cat = g. Key, a = g.Count}; 
```

然后你应该能够联合这些第一个和最后一个列表并对结果进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:50:25.787

尝试这个：

```
var results = db.Category
    .Join(db.Ad, cat => cat.CategoryId, 
          ad => ad.CategoryId, (cat, ad) => new { cat, ad } )
    .Where (c => !dbCategory
      .Any (d => c.cat.CategoryId == d.ParentId) && c.cat.ParentId == null)
     .GroupBy (c => c.cat.CategoryId) 
     .Select (g => new  
        { cat = g.Key, a = g.Count () } 
); 
```

# ruby - Jruby - 创建 jar，没有要加载的文件

> ID：10456859
> 
> 赞同：0
> 
> 时间：2012-05-04T22:20:20.877
> 
> 标签：ruby, jar, jruby

我正在尝试为我的 jruby 项目创建一个 jar（实际上当时只有 ruby​​ 代码），但是，usgin [rawr](http://rawr.rubyforge.org/)我成功创建了一个 jar，但是当我运行它时：

线程“主”org.jruby.exceptions.RaiseException 中的异常：(LoadError) 没有要加载的文件——org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) 处的 ../lib/person Kernel.require(file:/Users/edipofederle/Projeto/socialAPI/package/jar/lib/java/jruby-complete.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require. rb:36) 在 (Anonymous).(root)(./bin/main.rb:2) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) 在 (Anonymous).(root) (./bin/main.rb:1)

我的文件夹结构基本上是一个带有 main.rb 文件的 bin 文件夹和一个带有 person.rb 文件的 lib 文件夹。

我可以进一步澄清。

有人可以帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:59:49.140

我的错误，我将 ruby​​ src 文件放入了错误的文件夹中。现在工作。

谢谢

# php - PHP数组排序不同的方式

> ID：10456861
> 
> 赞同：1
> 
> 时间：2012-05-04T22:20:28.650
> 
> 标签：php

我从 MYSQL db 中导出了放入数组中的不同信息：

```
$info=array(
(ID,CALORIES,PROTEIN,CARBOS,FIBER),
...
);
ex: (1,270,24,12,5),(2,280,2,42,10),... 
```

然后，在脚本的下方，我需要获取 3 个卡路里最高的产品的 ID，以及 2xPROTEIN+3xCARBOS 等结果最高的 6 个产品的 ID，以获取 5 个图表。

如何对数组进行这种排序以填充不同的表？

函数 sort() 似乎只适用于单维数组（如果它适用于我的情况，我不知道语法是什么）。它似乎也不适用于我更高级的排序（2 * x + 3 * y）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:25:43.473

即使这不是您要问的，我强烈建议您在 mysql 中准备表格（使用所有公式进行排序等）。Mysql的主要工作是做各种选择和排序，我会把工作留给它。此外，mysql 中的高级排序比考虑 php 中的算法或函数要容易得多:)

```
SELECT * FROM `products`
ORDER BY (2*PROTEIN+3*CARBOS) DESC 
```

就这么简单，没有头疼。最后应用 LIMIT 3 以获得前 3 名。 更新

```
SELECT * FROM `products` 
```

到您更高级的查询。如果在代码中遇到困难，您可以尝试将其包装为子查询，如下所示：

```
SELECT * FROM (SELECT * FROM `products` WHERE `type`='fruit' LIMIT 6) a
ORDER BY (2*PROTEIN+3*CARBOS) DESC LIMIT 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:21:31.423

您可以使用`array_multisort()`对多维数组进行排序。语法允许相当多的灵活性，请参阅[参考](http://php.net/manual/en/function.array-multisort.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:27:35.790

您可以使用`usort`功能：

```
function cmp( $a, $b )
{ 
  if(  $a["calories"] *3+ $a["protein"]*2 ==   $b["calories"] *3+ $b["protein"]*2){ //do another comparison etc.. ; } 
  return ($a["calories"] *3+ $a["protein"]*2<   $b["calories"] *3+ $b["protein"]*2)) ? -1 : 1;
} 
usort($myarray,'cmp'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T22:28:01.543

`usort`是你的朋友吗？

```
function sort2Protein3Carbo($a, $b)
{
    // Assuming protein is the 2nd value in your array and carbo the 3rd.
    $resA = 2 * $a[2] + 3 * $a[3];
    $resB = 2 * $b[2] + 3 * $b[3];

    if ($resA == $resB)
        return 0;

    return ($resA < $resB) ? -1 : 1;
}

usort($info, "sort2Protein3Carbo"); 
```

# html - div 绝对位置上的鼠标事件不会在 Chrome 或 Firefox 中触发，但在 IE 中会触发

> ID：10456863
> 
> 赞同：0
> 
> 时间：2012-05-04T22:20:30.690
> 
> 标签：html, css-position

我正在使用 position:absolute 来构建一些自定义按钮，这些按钮在 IE(9) 中可以正常工作，但在 Chrome(19) 或 Firefox (12) 中却不能使用以下简单的代码：

```
<div  id="FileDetailsDisptBoxToolTip" title="^ToolTip" 
style="position: fixed; left: 15px; top: 310px;  width:60px; height: 20px;">
    <img src="newButtonImages/infoTrack.png"  width=60 height=20
         onmouseover="dispFileDetails()" onmouseout="hideFileDetails()"/>
</div> 
```

在 IE 中，鼠标事件触发并且标题显示为工具提示。在 Chrome 和 FF 中，没有鼠标事件和工具提示。我已经尝试了很多排列 - 只有当我删除 position: fixed; 它是否有效，但随后我失去了基本定位。我会很高兴有一个解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:01:46.623

破解它！
似乎 Chrome、FF 和 Safari 对元素在 html 中的位置顺序很挑剔。
如果它们不按顺序排列，如我的演示中所示：

`<div title="ToolTip" style="position: fixed; left: 15px; top: 310px; width:60px; height: 20px;"> <img src="newButtonImages/infoTrack.png" width=60 height=20 onmouseover="dispFileDetails()" onmouseout="hideFileDetails()">
</div> <div style="position: absolute; top:158px; left:10px; width: 160px; height: 180px;">
<span id="infoDisplay" ></span> </div> <div style="position: fixed; top:375px; left:8px; width: 165px; height: 240px; background-image: url(newButtonImages/mapImage.png); background-repeat: no-repeat" title="map_canvas tip"/> ..... </div>`
我用 top: 310px 声明第一个 div，然后在 top:158px 和最后一个在 165px，除了 IE 之外，它都失败了。如果我按 158px、165px 和 310px 的顺序声明它们，问题就会消失。请参阅[http://www.gpsanimator.com/demo/x.html](http://www.gpsanimator.com/demo/x.html) - 它适用于各种浏览器！
现在这个烦人的小功能怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:46:38.947

根据我之前的评论，问题出在 IE 上。如果没有正确的文档类型，您将处于怪癖模式，您将永远无法让 IE 尝试像其他更现代的浏览器那样执行。将此添加到您的第一行，然后看看我们的立场`<!DOCTYPE html>`

在您添加之前，无法判断 IE 与此相关的其他问题。

# java - WebView 不断爆炸

> ID：10456864
> 
> 赞同：0
> 
> 时间：2012-05-04T22:20:36.617
> 
> 标签：java, android, webview

我在使用 WebView 时遇到问题。它的目的是显示youtube视频的帧，然后当你触摸它时，我自己处理触摸事件并播放本地视频。问题是，当它时不时地显示 WebView 时，它会立即启动设备的浏览器并将用户带到 Youtube 视频。感觉就像 WebView 正在从框架中爆炸并接管应用程序。

我不知道为什么会这样！任何帮助表示赞赏。

```
mWebView.setVisibility(View.VISIBLE);
mWebView.setOnTouchListener(this);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginsEnabled(true);
mWebView.getSettings().setSupportZoom(false);
mWebView.loadUrl("http://www.youtube.com/v/" + lesson.getYoutubeID()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:43:04.353

> 问题是，当它时不时地显示 WebView 时，它会立即启动设备的浏览器并将用户带到 Youtube 视频。

如果出现以下情况，就会发生这种情况：

*   `http://www.youtube.com/v/" + lesson.getYoutubeID()`导致 HTTP 重定向，并且

*   您不通过`WebViewClient`和处理该重定向`shouldOverrideUrlLoading()`

# javascript - 在 Grunt 任务中运行命令

> ID：10456865
> 
> 赞同：94
> 
> 时间：2012-05-04T22:20:37.870
> 
> 标签：javascript, templates, gruntjs, continuous-integration, google-closure-compiler

我在我的项目中使用[Grunt](https://github.com/cowboy/grunt)（用于 JavaScript 项目的基于任务的命令行构建工具）。我创建了一个自定义标签，我想知道是否可以在其中运行命令。

为了澄清，我正在尝试使用闭包模板，“任务”应该调用 jar 文件将 Soy 文件预编译为 javascript 文件。

我正在从命令行运行这个 jar，但我想将它设置为一个任务。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-11-01T23:07:38.100

或者，您可以加载 grunt 插件来帮助解决这个问题：

[咕噜壳](https://github.com/sindresorhus/grunt-shell)示例：

```
shell: {
  make_directory: {
    command: 'mkdir test'
  }
} 
```

或[grunt-exec](https://github.com/jharding/grunt-exec)示例：

```
exec: {
  remove_logs: {
    command: 'rm -f *.log'
  },
  list_files: {
    command: 'ls -l **',
    stdout: true
  },
  echo_grunt_version: {
    command: function(grunt) { return 'echo ' + grunt.version; },
    stdout: true
  }
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-13T21:23:46.350

签出`grunt.util.spawn`：

```
grunt.util.spawn({
  cmd: 'rm',
  args: ['-rf', '/tmp'],
}, function done() {
  grunt.log.ok('/tmp deleted');
}); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-07T19:25:16.197

我找到了解决方案，所以我想与您分享。

我在节点下使用 grunt，所以要调用终端命令，您需要 require 'child_process' 模块。

例如，

```
var myTerminal = require("child_process").exec,
    commandToBeExecuted = "sh myCommand.sh";

myTerminal(commandToBeExecuted, function(error, stdout, stderr) {
    if (!error) {
         //do something
    }
}); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-02-03T20:00:41.030

如果您使用的是最新的 grunt 版本（撰写本文时为 0.4.0rc7），grunt-exec 和 grunt-shell 都会失败（它们似乎没有更新以处理最新的 grunt）。另一方面，child_process的exec是异步的，比较麻烦。

我最终使用了[Jake Trent 的解决方案](http://jaketrent.com/post/impressions-of-grunt/)，并将[shelljs](http://documentup.com/arturadib/shelljs)作为开发依赖项添加到我的项目中，这样我就可以轻松同步地运行测试：

```
var shell = require('shelljs');

...

grunt.registerTask('jquery', "download jquery bundle", function() {
  shell.exec('wget http://jqueryui.com/download/jquery-ui-1.7.3.custom.zip');
}); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-04-22T14:18:17.357

伙计们指向 child_process，但尝试使用[execSync](https://nodejs.org/api/child_process.html#child_process_child_process_execsync_command_options)来查看输出..

```
grunt.registerTask('test', '', function () {
        var exec = require('child_process').execSync;
        var result = exec("phpunit -c phpunit.xml", { encoding: 'utf8' });
        grunt.log.writeln(result);
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-10T23:10:48.173

对于使用 Grunt 0.4.x 的异步 shell 命令，请使用[https://github.com/rma4ok/grunt-bg-shell](https://github.com/rma4ok/grunt-bg-shell)。

# emacs - 用于 mnesia 集群测试的 emacs 中的 mnesia dir 设置

> ID：10456867
> 
> 赞同：2
> 
> 时间：2012-05-04T22:20:52.470
> 
> 标签：emacs, erlang

在一台 pc 上测试集群 mnesia 时，我必须为一个“Mac lion”用户创建许多 erlang 节点。因为它们`".erlang"`为同一个用户共享相同的内容，所以我无法通过`".erlang"`文件传递 mnesia。对于emacs erlang shell，我想通过`.emacs`文件传递mnesia目录配置，所以要修改distel的相关escript代码。

```
(add-hook 'erlang-mode-hook
      (lambda ()
        ;; when starting an Erlang shell in Emacs, default in the node name
        ; (setq inferior-erlang-machine-options '("-name" "emacs"))
        (setq inferior-erlang-machine-options '("-name" "emacs""-mnesia dir" "/Users/yuchen/Documents/Project/mnesia_db") )
             ;;added by chenyu 2012/04/08 
             (set (make-local-variable 'compile-command) (format "make -f %s" (get-closest-pathname)))
        ;; add Erlang functions to an imenu menu
        (imenu-add-to-menubar "imenu"))) 
```

在上面的代码中，`name=emacs`是可以的，但`mnesia dir`不是有效的。

(setq lower-erlang-machine-options '("-name" "emacs""-mnesia dir" "/Users/yuchen/Documents/Project/mnesia_db") )

节点启动后，我检查了mnesia路径配置。

```
(emacs@yus-iMac.local)12> mnesia:system_info(directory).
"/Users/yuchen/Mnesia.emacs@yus-iMac.local" 
```

它与我的 .emacs 配置数据不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:51:47.297

我猜您需要在参数列表中放入`-mnesia`单独`dir`的字符串，并且还需要将目录用双引号括起来，当然您必须在 Emacs Lisp 中转义：

```
(setq inferior-erlang-machine-options '("-name" "emacs" "-mnesia" "dir" "\"/Users/yuchen/Documents/Project/mnesia_db\"") ) 
```

# matlab - Matlab中有什么样的矩阵：“W = one(1:numEntries);”？

> ID：10456871
> 
> 赞同：2
> 
> 时间：2012-05-04T22:21:10.503
> 
> 标签：matlab, matrix

一个简单的问题..

假设在 Matlab 中我们有一个变量：numEntries = 8

我知道“ones”用于创建“1 的矩阵”，但以下结果是什么？

```
W = ones(1:numEntries); 
```

而且，如果可能的话，我在哪里可以找到关于 Matlab 中矩阵的良好参考？我查看了官方文档，但对我来说不是很清楚。

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:35:56.550

`ones`创建一个矩阵。`ones`适用于任意数量的维度，但是如果您只指定一个参数，您将得到一个具有该大小的方阵。否则，您将得到一个 1`N`维矩阵，`N`即您提供给 的参数的数量`ones`。

如果`numEntries`是 8，则`1:numEntries`创建一个 1x8 向量`1 2 3 4 5 6 7 8`。这个向量作为 的输入`ones`，你会得到一个 8 维矩阵，其中第 1 维（垂直）的大小为 1，第 2 维（水平）的大小为 2，第 3 维的大小为3，依此类推，直到第 8 维，其大小为 8。

```
numEntries = 8;

W = ones(1:numEntries); 
```

% 检查每个维度的大小`W`：

```
size(W)

ans =
1     2     3     4     5     6     7     8 
```

% 计算 中的元素总数`W`：

```
prod(size(W))

ans =
    40320 
```

%**编辑：**要获得 中的元素数量`W`，`numel(W)`比`prod(size(W))`：

```
numel(W)

ans =
    40320 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:33:09.450

这是一个 ND（`N`维）数组，其中`N = numEntries`.

更具体地说，它是一个大小`1 x 2 x ... x N`为全 1 的 ND 数组。

# java - Android - 如何制作一个改变两个值的微调器

> ID：10456877
> 
> 赞同：0
> 
> 时间：2012-05-04T22:21:55.120
> 
> 标签：java, android, download, spinner

我将如何制作一个在选择时更改异步下载任务中的两个值的微调器？（网址和文件名）我只能弄清楚如何在微调器中更改一个值，是否可以在选择时更改同一个下拉列表中的两个？我需要一个提交按钮还是可以让它在选择时开始下载过程？我认为这是可能的，但我从未与微调器合作过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:49:47.527

如果您创建一个函数来处理更改值，然后简单地让微调器的 onSelect 侦听器调用该函数怎么办？

我自己也没有太多使用旋转器的经验，但这是我尝试做的第一种方式......

# c - 限制 malloc() 的虚拟内存空间

> ID：10456879
> 
> 赞同：0
> 
> 时间：2012-05-04T22:22:25.023
> 
> 标签：c, malloc, virtual, memory-address

我编写了自己的 my_malloc() 函数来管理自己的物理内存。在我的应用程序中，我希望能够同时使用 libc malloc() 以及我自己的 my_malloc() 函数。所以我需要对虚拟地址空间进行分区，只有当它来自其专用池时，malloc 才应始终分配一个虚拟地址，与 my_malloc() 相同。我不能限制堆大小，我只需要保证 malloc() 和 my_malloc() 永远不会返回相同/重叠的虚拟地址。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:27:10.630

一个答案是让你的`my_malloc`使用内存分配给`malloc`. 使用足够大的块将主要实现这一点；然后在每个块中，您的版本将维护自己的结构并将其部分分配给调用者。

它变得棘手，因为您不能依赖扩展版本的整个可用空间，就像您从`sbrk`或类似的地方获取内存时一样。所以你的版本必须维护几个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:28:36.547

一种可能性是在启动时`my_malloc()`调用`malloc()`以预先分配一个大的内存池，然后将该内存分配给它的调用者并相应地管理它。但是，完整的实现需要处理垃圾收集和碎片整理。

另一种可能性是在每次需要分配内存时`my_malloc()`调用并简单地处理您感兴趣的任何“簿记”方面，例如分配的块数、释放的块数、最大未完成块、总分配内存*等*。这是迄今为止更安全、更有效的机制，因为您将所有“硬”操作传递给.`malloc()`*`malloc()`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:36:23.007

保留一大块虚拟地址空间，并将其作为`my_malloc()`分配的池。一旦您从操作系统保留了一个大的连续内存区域，随后的调用就`malloc()`必须来自其他地方。

例如，[在 Windows 上](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366916%28v=vs.85%29.aspx)，您可以使用[VirtualAlloc()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx)来保留 256mb 的空间块。在您通过后续调用“提交”它之前，实际上不会分配内存，但它会保留后续`malloc()`不会使用的地址范围（例如 0x4000000-0x5000000）。然后，您`my_malloc()`可以根据要求提交此保留范围之外的块，并按您编写的任何分配方案细分它们。

我被告知[等效的 Linux 调用是 mmap()](https://stackoverflow.com/questions/2782628/any-way-to-reserve-but-not-commit-memory-in-linux)。（**编辑：**我之前说过“kmalloc 或[vmalloc](http://www.makelinux.net/ldd3/chp-8-sect-4)，这取决于您是否需要内存在*物理*上是连续的”，但这些是内核级函数。）

我们在我们的应用程序中使用这种机制将特定大小的所有分配重定向到我们自己的自定义池块分配器中，以提高速度和效率。除其他外，它允许我们保留[某些特定大小](http://en.wikipedia.org/wiki/Translation_lookaside_buffer)的虚拟页面，以便[CPU 更有效地处理](http://www.ibm.com/developerworks/wikis/display/hpccentral/A+Performance+Evaluation+of+64KB+Pages+on+Linux+for+Power+Systems)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T22:28:50.280

如果您`mmap(2)`在程序开始附近添加一个调用，您可以立即使用所需的任何地址分配所需的内存（请参阅*提示*，通常留给`NULL`操作系统确定）；这将阻止`malloc(3)`或任何其他内存分配例程获取这些特定页面。

不用担心内存使用；由于现代系统非常乐意过度使用，因此您只需使用几百 KB 的内核空间来处理页表。还不错。*

# mysql - mysql - 在sql中的值之前的：是什么意思？

> ID：10456880
> 
> 赞同：0
> 
> 时间：2012-05-04T22:22:32.017
> 
> 标签：mysql, sql, prepared-statement

我是 sql 的菜鸟，并试图通过 zencart 找到自己的方式。代码中有一点准备 SELECT 语句，其中有以下行：

```
AND   cd.language_id = :languagesID 
```

我无法弄清楚它的`:`作用。我想也许它指的是像 $languagesID 这样的 $variable 但我也无法在任何地方找到该变量。

做什么的`:`？谷歌没有让我更聪明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:23:41.047

它用于准备好的 SQL 语句。稍后将其替换为实际值。谷歌“准备好的 SQL”

# cakephp - CakePHP 分页数()

> ID：10456881
> 
> 赞同：2
> 
> 时间：2012-05-04T22:22:36.863
> 
> 标签：cakephp, pagination, helper

CakePHP Pagination Helper 具有用于生成页面链接的函数 numbers()。

我想生成带有“numbers”类的数字（默认为 8），另外还可以生成第一个数字和最后一个数字（“number-first”和“number-last”）。我的问题是如何将课程添加到第一个和最后一个数字？

或者

如何生成从 2 到 7 的数字。当我生成这个数字时，我使用 first() 和 last()。

对不起，但我的英语很简单:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T22:45:42.423

为了向所有数字链接添加一个类，已经有一个选项[：](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#creating-page-number-links)

```
echo $this->Paginator->numbers(array('class' => 'numbers')); 
```

如果我明白你想要完成什么，你应该做这样的事情：

```
echo $this->Paginator->first(__('<< First'), array('class' => 'number-first'));
echo $this->Paginator->numbers(array('class' => 'numbers', 'first' => false, 'last' => false));
echo $this->Paginator->last(__('>> Last'), array('class' => 'number-last')); 
```

如果这不是您想要的，您将不得不制作自己的分页助手并扩展现有的分页助手以覆盖该`numbers()`方法。

# couchdb - 如何更改 CouchDB 中复制的传入文档

> ID：10456882
> 
> 赞同：2
> 
> 时间：2012-05-04T22:23:34.127
> 
> 标签：couchdb, replication, pouchdb

**我需要将[CouchDB 中的](http://google.com/search?q=couchdb%20replication)**数据从一个数据库复制到另一个数据库，**但在此过程中我想更改正在复制的文档**，

1.  主要剥离特定领域（但评论中提到的其他应用程序）。
2.  复制总是 100% 单向（但评论中提到的其他应用程序可以使用双向和同步）
3.  我希望这个过程不增加他们的修订 ID，但这可能要求太多。

但我没有看到任何设计文档功能可以做我想做的事情。

似乎没有这样做，有什么计划来添加这个？同时，有什么解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:58:14.657

不，没有*开箱即用的*解决方案，因为这将违背多主机 MVCC 逻辑的整个目的和逻辑。

我在这里看到的唯一选择是创建自己的解决方案，但我不会将其称为*复制*，而是称为 ETL（提取、转换、加载）。对于 ETL，有一些可用的工具可以让你做到这一点，比如（在这里混合开源和商业）：

*   [Scriptella](http://scriptella.javaforge.com/)
*   [三叶草ETL](http://www.cloveretl.com/products)
*   [Pentaho 数据集成](http://www.pentaho.com/explore/pentaho-data-integration/)，或者更具体的[Kettle](http://kettle.pentaho.com/)
*   [Jespersoft ETL](http://www.jaspersoft.com/jasperetl)
*   [Talend](http://www.talend.com/index.php)也有一些工具

市场上有更多的 ETL 工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:57:23.040

我相信这里最好的方法是将要过滤的字段分解为单独的文档，然后在复制期间过滤掉该文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-08T23:27:55.893

当然，最好的方法是为此[提供内置支持](https://stackoverflow.com/questions/10456882/how-can-i-alter-the-incoming-documents-on-replication-in-couchdb#comment-38196955)，但**我想到的一种解决方法是，而不是在这里使用[内置复制](http://wiki.apache.org/couchdb/Replication)，来编码和使用自定义复制，这将执行额外的所需更改/转换**，仍然使用而不是使用其他内置插件，并且编码良好，在许多情况下（特别是如果每​​个主服务器都可以推送到它的从服务器），感觉这可能几乎同样有效。

1.  这需要在每个源/主服务器上放置有效的触发器来检测任何更改，我相信 CouchDB 确实提供了（或者至少[PouchDB 似乎提供了](http://pouchdb.com/api.html#changes)），然后将更改复制到另一个位置，同时进行完整的更改。
2.  如果更改的源无法将更改推送到最终目的地，则此固定存储可能位于目的地可以从中提取的本地位置 - 这可能会变得非常昂贵，尤其是在多主机中，因为每个位置都必须不仅存储和维护自己的数据，还存储它发送给每个人的数据（正在发送）。
3.  此复制还将每个源文档的修订 ID 放置在文档的副本中...
    1.  ...理想情况下，如果要{更新，又名主人}副本也是必不可少的。
    2.  ...形式为：
        1.  理想情况下是正常的“_rev”属性。事实上，这看起来很可能（“保留他们的修订 ID”）已经通过使用内置“批量文档 API”[的正常复制算法](http://docs.couchdb.org/en/latest/replication/protocol.html#algorithm)完成，看起来我们的变体也会使用
        2.  否则有一个新的副本对象（带有自己的_rev）加上另一个字段作为“_rev_original”，说明原始版本。但是，那行得通吗？
        3.  显然，可以创建这样的副本没有问题。
        4.  如果目的地只是读取数据，可能没什么大不了的。
        5.  如果目的地也在写入数据，这似乎很麻烦。因为我们现在必须与这些非标准版本合并。但可行。
    3.  与此相关（***编码自定义/改进的复制（执行此明显缺失的功能）理想情况下不改变 Pouch 尤其是 Couch 源代码***），作为**入门/基础材料（标准方法）**，这[是正常的 Couch 复制算法](http://docs.couchdb.org/en/latest/replication/protocol.html#algorithm)，不幸的是没有明确说它只使用内置操作，但它看起来像它，以及它[的官方概述](http://docs.couchdb.org/en/latest/replication/intro.html#replication-procedure)；我怀疑 Pouch 实现了这一点，可能在[Pouch 的 replicate.js (最新版本截至 2014.07)](https://github.com/pouchdb/pouchdb/blob/2.2.3/lib/replicate.js)中。

进一步的实施细节？- 知道的人，请放在这里。

这是一个“社区维基”答案，所以请扩展它。

也请评论任何人/系统的链接和详细信息已经或试图这样做或类似的。

# javascript - JavaScript/DOM - 给新创建的元素一个 ID

> ID：10456886
> 
> 赞同：0
> 
> 时间：2012-05-04T22:23:44.577
> 
> 标签：javascript, dom

如何通过 JavaScript DOM 将元素 ID 应用于新创建的元素？

我编写的代码创建了一个从按钮触发的表。

我需要为这个表格应用一个唯一的 ID，这样它就可以与我网站上出现的其他表格的样式不同。

这是我的代码示例：

```
var tab = document.createElement("ViewShoppingCart");
document.getElementById("shopping_list").appendChild(tab);

var tbdy = document.createElement("tbody");
tab.id = "new_cart";
tab.appendChild(tbdy);
new_cart = true;

var total = 0;

for (var a = 0; a <= nameArray.length-1; a++) {

var tr = document.createElement("tr");
tbdy.appendChild(tr);

var td = document.createElement("td");
    td.appendChild(document.createTextNode("x " + quantityArray[a]));
    tr.appendChild(td); 

var td2 = document.createElement("td");
    td2.appendChild(document.createTextNode(nameArray[a]));
    tr.appendChild(td2);

var td3 = document.createElement("td");
    td3.appendChild(document.createTextNode(sumArray[a]));
    tr.appendChild(td3);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:25:29.610

尝试

```
var tbdy = document.createElement("tbody");
tbdy.id = "newtbodyid";
tab.id = "new_cart";
tab.appendChild(tbdy);
new_cart = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:29:51.900

要应用样式，请考虑使用类选择器，您可能根本不需要 ID。

请注意，如果您想创建有效的 HTML，则不能有重复的 ID，这会显着降低 CSS 样式的价值，尤其是对于表格数据。

# winapi - 当我包含 ddk/winddk.h 时，mingw32 给出错误

> ID：10456887
> 
> 赞同：0
> 
> 时间：2012-05-04T22:23:58.533
> 
> 标签：winapi, kernel, mingw32, wdk

我是 Win 环境的新手，尝试编写使用 win 内核 API 但在 Ubuntu 10.04 上的代码……使用 mingw32（更具体地说，i586-mingw32msvc）

我的代码：

```
#include<ddk/winddk.h>
int main()
{
        return 0;
} 
```

但是我在使用 ddk/winddk.h 标头时遇到了很多错误：编译为：i586-mingw32msvc-gcc WaitForSingleObj_2.c

所有错误都是这样的：

```
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/include/ddk/winddk.h:9208: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'NTSTATUS' 
```

我为此错过了什么吗？当我尝试使用头文件 iostream 和 windows.h 进行编译时，效果很好。

编辑：

```
#include<ntdef.h>
#include<ddk/ntddk.h>
#include<ddk/winddk.h>
#include<ddk/ntddndis.h>

int main()
{
        KTIMER *timer;
        KeInitializeTimer(timer);
        return 0;
} 
```

直到 KTIMER 很好，现在是新错误：/tmp/cc0epAQA.o:WaitForSingleObj_2.c:(.text+0x1d): undefined reference to `_ *imp* _KeInitializeTimer@4' collect2: ld returned 1 exit status

谁能告诉我，现在要包含哪个头文件？

编辑：[正如其他人已经评论过的，我经历过（！）请尽量避免使用其他平台进行 Windonws 内核开发]

我切换到 Visual C++ Express，下载了 WDK，从 Project Property->c/c++ .. ->Additional Include directory (C:\WinDDK\7600.16385.1\inc\ddk;C:\WinDDK\7600.16385\. 1\inc\api;)

但是（我讨厌这个但是！）我遇到了很多编译错误，比如

```
 1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\crtdefs.h(543): error C2143: syntax error : missing ')' before 'const'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\crtdefs.h(543): error C2143: syntax error : missing '{' before 'const'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\crtdefs.h(543): error C2059: syntax error : ','
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\crtdefs.h(543): error C2059: syntax error : ')'
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\crtdefs.h(550): error C2143: syntax error : missing ')' before 'const' 
```

我的代码：

```
#include <wdm.h>
int mian()
{
    /*
     * PKTIMER Timer;
     */
} 
```

如果有人有想法请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:34:52.727

您确定将`ntdef.h`其包含在内，无论是明确的还是通过`#define`设置的某些值？那是定义的标题，`NTSTATUS`并且该错误消息`gcc`通常是在尚未定义符号/类型时吐出的消息。

无论如何，使用非 MS 编译器开发 Windows 设备驱动程序几乎肯定会比使用 Microsoft 自己的工具链遇到更多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:37:50.520

Dhara Darji，你还没有完全理解我之前在写什么。重要的不仅仅是工具链。正如我指出的那样，您将无法获得驱动程序认证（尽管您可能会获得它 - 或`.cat`交叉签名）。我支持我评论中的每一个字：

> 好吧，你应该知道你的工具。在 Windows（与许多其他平台一样）上为 KM 开发不是儿戏。如果您的 UM 应用程序崩溃，该应用程序就会死掉。如果您的驱动程序崩溃，系统就会死机。请重新考虑使用不受支持的工具来创建 Windows KM 驱动程序。更不用说上面的代码片段似乎不存在您对驱动程序的想法。它与UM完全不同，不应掉以轻心。

即使现在在您的最后一次尝试中，除了拼写错误的`main`(as `mian`)，您似乎也不知道驱动程序需要一个调用的入口点`DriverEntry`，并且它使用的参数与经典的`main`.

正如我之前指出的，您正在混合用户模式 ​​(UM) 和内核模式 (KM) 的概念。这根本行不通。没有如果和但是。几年前，人们甚至认为 C++ 不是编写 KM 代码的正确语言。主要是因为语义`new`以及分页和非分页池的含义。如今，C++ 因其类型检查而被接受。我们有下一个东西“池”，那是什么？你必须至少学习 Windows 内部的基础知识，而且我恐怕至少我在那些日子里读到的“Windows ???? Internals”版本并没有完全削减它。你会想要一本关于驱动程序的合适的书，例如 Oney 的“Programming the Microsoft Windows Driver Model”或一些来自 OSR 的书——包括旧书名。即使是来自 NT4 时代的非常古老的书籍仍然包含许多有价值的信息，即使您可能至少需要 Windows 2000 的东西，因为 Windows 2000 中的 PnP 系统和更多内容的大修。

OSR 也是一个很好的在线资源，但我必须提醒你：他们正在销售课程，而且这些课程非常好。自然，他们不会提供在线可用资源中的所有细节。我以为我对驱动程序编程有所了解，直到我在 2005 年参加了他们的两门课程。他们还托管了三个邮件列表

除了分页池和非分页池之间的区别之外，您还必须学习诸如 IRQL 之类的概念以及在哪个 IRQL 上可以做什么。此外，大多数人将驱动程序视为“程序”，这是另一个谬误。人们可以将它们与 DLL 进行比较，尽管这种比较也有其缺点。驱动程序很难维护全局状态，因为来自 UM 和 KM 中不同进程的许多线程可能会通过请求来敲击它。所有这一切仍然必须以合理的速度运行。您可能还想学习诸如 WinDbg 之类的工具，即使使用新的 VS 11 WDK 集成，您可能不再需要这些工具（VisualKD 是解决相同问题的较旧选项）。

如果您认为您可以在 KM 中使用 Windows UM 编程技能，请再想一想！我能想象的最好的情况是，你的驱动程序写得不好，并且只能工作，因为你使用了 WDF 中最新的驱动程序模型之一，它简化了许多原本需要深入了解的事情。但是，它会可靠运行吗？您*必须*考虑到崩溃的程序只会使程序崩溃，但是您的崩溃驱动程序将不可避免地使操作系统崩溃，其影响可能要到稍后才会变得清楚。尤其是考虑到 PC 也用于医院或核电站时。

最后一点：正如我之前指出的，**您根本不需要 Visual Studio**。无论是 Express 版本还是其他版本。原因是据说 WDK 是用于构建操作系统（即 Windows）本身的环境的子集。这意味着您可以使用 Vim 或任何您喜欢的编辑器并仍然构建您的驱动程序。**毕竟，WDK 的构建环境是`nmake`基于**`build`-based 的，在顶部命名的应用程序和`sources`您文件夹中的文件是您制作过程中的中心文件。看看 WDK 中的任何一个样本，都有很多。但最重要的是 RTFM（阅读友好手册）。WDK 文档非常好，特别是如果您有 Windows NT4、2000 甚至 XP 时代的比较。

# c++ - 提升 C++ 线程

> ID：10456892
> 
> 赞同：0
> 
> 时间：2012-05-04T22:24:49.907
> 
> 标签：c++, http, boost

我从以下位置构建了 server3 示例：

[http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html)

我做的唯一一件事——修改了`request_handler.cpp`for：

```
// Decode url to path.
std::string request_path;
if (!url_decode(req.uri, request_path))
{
    rep = reply::stock_reply(reply::bad_request);
    return;
}

// Request path must be absolute and not contain "..".
if (request_path.empty() || request_path[0] != '/'
  || request_path.find("..") != std::string::npos)
{
    rep = reply::stock_reply(reply::bad_request);
    return;
}

// Fill out the reply to be sent to the client.
rep.status = reply::ok;

std::string filename = "/tmp/test.mp4";
std::ifstream file (filename.c_str(), std::ios::in|std::ios::binary);

char buf[1024000]; // 1MB Buffer read
while (file.read(buf, sizeof(buf)).gcount() > 0)
       rep.content.append(buf, file.gcount());

rep.headers.resize(9);
rep.headers[0].name = "Content-Length";
rep.headers[0].value = boost::lexical_cast<std::string>(rep.content.size());
rep.headers[1].name = "Content-Type";
rep.headers[1].value = "video/mp4"; 
```

当我打开chrome并点击服务器时，我可以得到视频，没问题。同时，我打开另一个选项卡并点击服务器，没有任何反应。看起来它等到第一个选项卡完成。

目标是拥有一个处理多个连接并发送多个文件的服务器..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:02:57.267

您的服务器的响应能力将基于以下几点：

*   您使用阻塞磁盘 IO 调用，因此这将在读取数据时挂起线程。为了获得最佳性能，您希望尽可能使用非阻塞。
*   运行 io_service::run() 的线程数。

最简单的方法是运行更多运行 io_service::run() 的线程。我的猜测是您只运行一个线程，这就是为什么在第一个选项卡完成之前您在第二个选项卡中没有得到任何响应的原因。

更好的解决方案是考虑使用非阻塞磁盘 io。

# database - 如何在 Liferay 中使用默认数据填充数据模型？

> ID：10456894
> 
> 赞同：3
> 
> 时间：2012-05-04T22:24:58.363
> 
> 标签：database, liferay

我正在开发一个部署为 WAR 的 portlet。数据库模型由服务构建器创建。安装 WAR 后如何将初始数据模型插入​​数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:30:23.180

您可以作为 StartupAction 执行此操作，在插件启动时执行（阅读：在部署期间和后续服务器启动期间）或作为 UpgradeAction。

一个很好的例子是 Liferay CE 附带的 Sevencogs-hook，其中包含源代码。这是作为 UpgradeAction 实现的 - 例如，在第一次启动时，您的数据库内容将被“升级”以包含 Sevencogs 示例数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:34:44.260

`portal.properties`将具有以下属性的文件添加到项目中：

```
application.startup.events=com.my.project.MyStartupAction 
```

并将启动导入作为 SimpleAction 的扩展：

```
package com.my.project;

import com.liferay.portal.kernel.events.ActionException;
import com.liferay.portal.kernel.events.SimpleAction;

public class MyStartupAction  extends SimpleAction {

    @Override
    public void run(String[] arg0) throws ActionException {
        if(startupDataNotExist()) {
            createStartupData();
        }
    }
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T16:00:00.960

您也可以使用升级过程来做到这一点。[以下](http://www.liferay.com/web/ryan.park/blog/-/blogs/implementing-upgradingprocess-for-your-liferay-portlets!)是分步说明

# opencv - 编译 HaarTraining、OpenCV、MacOS

> ID：10456899
> 
> 赞同：0
> 
> 时间：2012-05-04T22:25:30.703
> 
> 标签：opencv

谁能帮我编译 Haartraining？我需要使用 createsamples 实用程序。我正在运行 OSX Lion 和 OpenCV 2.4。我尝试使用这个makefile，但它给了我一些链接器错误[http://code.google.com/p/tutorial-haartraining/source/browse/trunk/HaarTraining/src/Makefile?r=76](http://code.google.com/p/tutorial-haartraining/source/browse/trunk/HaarTraining/src/Makefile?r=76)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:22:19.637

使用 cmake 2.8.10 和 xcode 4.6.1 在 mac os x lion 10.7.5 上编译和运行 c++ opencv 2.4.4 的步骤

**拥有合适的工具**

1.  [从http://sourceforge.net/projects/opencvlibrary/files/](http://sourceforge.net/projects/opencvlibrary/files/)下载 opencv-unix并在任何地方解压
2.  [从http://www.cmake.org/cmake/resources/software.html](http://www.cmake.org/cmake/resources/software.html)下载 cmake .dmg并安装
3.  我假设您在 os x lion 上安装了 xcode 4.6，其中包括 ios sdk 6.1
4.  转到 xcode 首选项以下载并安装命令行工具，以便您拥有 g++ 等。

**使用cmake编译opencv**

1.  转到提取的opencv文件夹
2.  创建构建目录

    ```
    mkdir build
    cd build
    cmake -D WITH_TBB=OFF -D BUILD_NEW_PYTHON_SUPPORT=OFF -D BUILD_FAT_JAVA_LIB=OFF -D BUILD_TBB=OFF -D BUILD_EXAMPLES=ON -D CMAKE_CXX_COMPILER=g++ CMAKE_CC_COMPILER=gcc -D CMAKE_OSX_ARCHITECTURES=x86_64 -D BUILD_opencv_java=OFF -G "Unix Makefiles" ..
    make -j8
    sudo make install 
    ```

3.  从构建文件夹中，转到 bin/ 并运行其中一项测试

    ```
    ./opencv_test_stitching 
    ```

**创建自己的 c++ opencv xcode 项目**

1.  启动 xcode 并创建一个新的 xcode 项目
2.  os x下项目类型选择Command Line Tool
3.  打开项目的构建设置
4.  在架构下，将架构设置为 64 位英特尔。还将有效架构设置为 x86_64
5.  在 Build Options 下，将 Compiler for C/C++ 设置为 Default Compiler
6.  在 Search Paths 下，将 Header Search Paths 设置为 /usr/local/include
7.  同样在搜索路径下，将库搜索路径设置为 /usr/local/lib
8.  在 Apple LLVM compiler 4.2 - Language set C++ Standard Library to libstd++

**将编译好的 opencv 库添加到你的项目中**

1.  转到您所在的“构建设置”选项卡旁边的“构建阶段”选项卡
2.  在 Link Binary With Libraries 中，单击 + 号并选择 Add Other
3.  点击键盘上的前斜杠 / 并输入 /usr/local/lib
4.  点击回车并选择要在项目中使用的库
5.  确保您始终选择 libopencv_core.2.4.4.dylib
6.  点击回车，您将在项目下看到选定的 dylib

**写一些代码**

1.  首先让我们组织文件，右键单击您的项目蓝图图标并选择新建组
2.  将新组命名为 opencv 或其他
3.  将 dylib 拖放到该组中
4.  打开 main.cpp
5.  从 opencv 附带的任何示例测试中复制代码并将其粘贴到此处
6.  确保添加了所有必需的dylib，例如，如果您将opencv_test_stitching.cpp代码复制到main.cpp中，则需要在前面的步骤中添加以下库

    *   libopencv_core.2.4.4.dylib
    *   libopencv_highgui.2.4.4.dylib
    *   libopencv_stitching.2.4.4.dylib

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:13:42.450

在 Lion 下编译非常简单。

1.  [从这里](http://sourceforge.net/projects/opencvlibrary/files/)下载源压缩包
2.  解压下载的包
3.  在某个地方创建构建目录，例如在您有未压缩源的同一文件夹中
4.  从这个新创建的文件夹问题`cmake -i ../uncompressed_opencv_folder_name`
5.  根据您的需要配置 OpenCV，不要忘记将 OpenCV 库设为静态（至少它对我不起作用）

    `Variable Name: BUILD_SHARED_LIBS Description: Build shared libraries (.dll/.so) instead of static ones (.lib/.a) Current Value: OFF`

6.  运行 make -j4

7.  安装编译的二进制文件`make install`
8.  在 OpenCV 安装目录中，您将在**bin**子文件夹中找到所需的文件

# android - SharedPreferences.Editor.commit()

> ID：10456900
> 
> 赞同：4
> 
> 时间：2012-05-04T22:25:33.123
> 
> 标签：android

我有一个 Editor 实例，但是对于我的少数用户，它始终无法 commit()：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
Editor editor = prefs.edit();
editor.putString(..., ...);
if (!editor.commit()) {
    ...
} 
```

我不确定为什么这对他们来说会失败（我所有的成千上万的其他用户都可以运行这些行）。有什么方法可以在这里获取更多信息吗？我只是记录了 commit() 返回值为 false 的事实，所以至少我知道发生了什么，但不知道如何解决，

谢谢

# android - .draw() 在 chartengine 中有什么作用？

> ID：10456904
> 
> 赞同：0
> 
> 时间：2012-05-04T22:26:04.040
> 
> 标签：android, achartengine

我正在使用 achartengine，我正在尝试在其中绘制矩形、圆圈，我已经看到了 ChartView.draw(Canvas) 方法，但我不知道它是否以这种方式工作：

```
mChartView = ChartFactory.getLineChartView(this, dataset, mRenderer);
setContentView(mChartView);

Canvas a = new Canvas();
Paint p = new Paint();
p.setColor(Color.GREEN);
a.drawCircle(70, 80, 40, p);
mChartView.draw(a);
mChartView.repaint(); 
```

该代码是否假设在图表上绘制一个绿色圆圈？因为正在绘制系列的图表而不是圆圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:30:16.430

请记住，Android`Canvas`使用画家算法，因此**顺序很重要**。您可能看不到圆圈，因为图表是在之后绘制的，因此位于圆圈的顶部。如果您反转呼叫（即`mChartView.draw()`在`a.drawCircle()`您应该看到图表顶部的圆圈之前执行此操作。

高温高压

# gwt - GWT：“Admin”和“Normal-mode”应用程序的示例

> ID：10456906
> 
> 赞同：1
> 
> 时间：2012-05-04T22:26:39.063
> 
> 标签：gwt, module, admin

我正在使用 GWT（和 GWT-Plateform）和 GAE，我希望我的应用程序有一个管理员和一个正常模式。我读了这篇文章[https://turbomanage.wordpress.com/2009/11/19/tips-on-organizing-gwt-modules/#comment-5064](https://turbomanage.wordpress.com/2009/11/19/tips-on-organizing-gwt-modules/#comment-5064)，我想看看一个使用管理员的应用程序的完整项目结构和一个正常模式的应用程序。你知道这个案例的任何示例代码（如果可能的话，使用 GWT 和 GAE ......并且使用 GWTP 将是完美的）？

在链接中，M. Chandler 说我可以有 3 个模块（admin、app、common）和只有 2 个入口点（admin 和 app）。管理员和应用程序继承公用。但我不知道更多的东西，例如： - 我正在使用“客户端捆绑”，所以可以将我的资源文件夹放在“公共模块”内。它会起作用吗？2 个模块（管理员和普通模式）是否只需要一个 CSS？- 我的整个域模型是否需要在公共模块中？

欢迎任何有关如何使用 GWT 使用管理模块构建代码的建议。 **我目前的问题**是我不知道如何使用 Eclipse 执行此操作（我应该复制粘贴“app”包的“client”、“server”、“share”文件夹并将它们添加到名为“admin”的新包中吗？ “然后删除和修改一些文件？看起来很复杂......或者只是一些最小的文件和配置要做？）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:29:15.770

这很容易...

检查此链接：[https ://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)

您需要两个入口点。

*   首先用于正常模式
*   管理模式第二

管理模式的所有内容都在路径 /admin/...

现在在 web.xml 中配置 web.xml 中的安全约束：

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

对于用户注册和登录控制，您可以使用 Google 的 USERS-Api： [https ://developers.google.com/appengine/docs/java/users/overview](https://developers.google.com/appengine/docs/java/users/overview)

# php - PDO DBLIB 范围标识不起作用

> ID：10456907
> 
> 赞同：0
> 
> 时间：2012-05-04T22:26:42.573
> 
> 标签：php, pdo

我正在使用 DBLIB 驱动程序从 Linux 工作站连接到 MS SQL Server 2008 数据库。

由于 DBLIB 不支持 PDO::lastInsertId() 方法，我使用 SELECT SCOPE_IDENTITY() 来获取最后插入的 id，但我的代码不起作用。

让我们看一下我的代码：

```
 function setDataByQuery($query, $values){
    $sth = $this->dbLink->prepare($query);
    $this->bindParams($sth, $values);
    $sth->execute();
    var_dump($sth->fetchAll(PDO::FETCH_ASSOC));
    //$this->lastId = $this->dbLink->lastInsertId();
    return true;
    }
private function bindParams(&$sth, $values){
    $type = array('i'=>PDO::PARAM_INT, 's'=>PDO::PARAM_STR);
    foreach($values as $key=>$value)
        $sth->bindParam($key, $value['data'], $type[$value['type']]);
    } 
```

我的方法 setDataByQuery 插入没有问题，但是当我尝试获取最后插入的 id 时，我得到一个空数组。

我的插入查询如下所示：

```
"INSERT INTO personas (nombres, apellido_paterno, apellido_materno, fecha_nacimiento, sexo, estado_civil, direccion, codigo_postal, id_delegacion, id_empresa)
                VALUES (:n,:aP,:aM,'1900-1-1','H','Unión Libre','Dirección','0000',1,1);SELECT SCOPE_IDENTITY() AS theID;"; 
```

根据[this](https://stackoverflow.com/questions/6140529/how-can-i-get-the-id-of-the-last-inserted-row-using-pdo-with-sql-server) question应该没有问题，但不同之处在于我使用的是准备好的查询，这可能会导致问题。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:54:08.473

由于某种原因，当两个语句都在同一个查询中时，这不起作用，所以我创建了另一个完成这项工作的函数。

```
function setDataByQuery($query, $values){
    $sth = $this->dbLink->prepare($query);
    $this->bindParams($sth, $values);
    if(!$sth->execute())
            return false;
    $this->lastId = $this->lastInsertId();
    //$this->lastId = $this->dbLink->lastInsertId();
    return true;
    }
 private function lastInsertId($seqname = null){
    $sth = $this->dbLink->prepare('SELECT SCOPE_IDENTITY() AS id');
    $sth->execute();
    $result = $sth->fetch();
    return $result['id'];
    } 
```

# json - 帖子总是出现 http 错误 500：ASP.NET MVC3

> ID：10456908
> 
> 赞同：0
> 
> 时间：2012-05-04T22:26:45.103
> 
> 标签：json, asp.net-mvc-3, jquery

```
 [HttpPost]
    public ActionResult accountchange(int id, int accountid, bool activate)
    {
        // Operations
        return Json(new { Model = model, Result = true, Message = "Changed Successfully });
    }

    $('#accountchange-button').click(function () {
        alert("");
        $.post("url/accountchange/", {id:1, accountid:1, activate:1},
            function (data) { $('.result').html(data); }, "json");

    }); 
```

总是得到：

```
POST http://localhost/account/accountchange/ 500 (Internal Server Error)
                f.support.ajax.f.ajaxTransport.sendjquery.min.js:4
                f.extend.ajaxjquery.min.js:4
                f.each.f.(anonymous function)jquery.min.js:4
                (anonymous function)demo:105
                f.event.dispatchjquery.min.js:3
                f.event.add.h.handle.i 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:31:57.220

在您的代码中，我没有看到模型被定义。这是我对为什么您的应用程序返回 500 应用程序错误的最佳猜测。正如前面在评论中提到的，您可以使用检查元素实用程序来确定服务器实际在抱怨什么。

```
[HttpPost]
public ActionResult accountchange(int id, int accountid, bool activate)
{
    // Model = model is most likely undefined
    return Json(new { Model = model, Result = true, Message = "Changed Successfully });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:30:08.670

您是否在 Global.asax 中设置了路由以接受您传递的 3 个参数？

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}/{accountId}/{activate}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional, accountId = UrlParameter.Optional, activate = UrlParameter.Optional } 
        ); 
```

# php - 我应该将存储的 Markdown 转换为 HTML，还是应该只存储 HTML？

> ID：10456910
> 
> 赞同：16
> 
> 时间：2012-05-04T22:27:15.053
> 
> 标签：php, markdown

[Markdown](http://daringfireball.net/projects/markdown/)似乎比 HTML 更容易编写和编辑。我见过的所有 HTML 编辑器都会输出大量不必要的垃圾。Markdown 看起来更干净。

这是我正在考虑做的事情：将 markdown 存储在数据库中，使用[PHP Markdown](http://michelf.com/projects/php-markdown/)将其转换为 HTML ，然后将其输出到 Web 浏览器。

*一个问题是每次*请求页面时都必须这样做。这似乎有点贵。

这是一个好主意吗？还是有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-04T22:29:11.353

作为一个实际示例，Stack Overflow 支持 Markdown（如您所知），但将Markdown 和呈现的 HTML*都存储在数据库中。*这使得提供页面的速度更快，因为呈现的 HTML 总是相同的。帖子的创建频率远低于向用户显示的频率。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T22:30:55.987

远离你的网站，问问自己它到底有多“贵”。您每天为超过 1,000 个唯一身份提供服务吗？实际上，它会膨胀吗？对于所有这些类型的问题，答案并不明确。例如，当我为一家国际银行构建网站时，一个非最小化的 CSS 文档每天可以增加 1 GB 的带宽。但是，当我构建我的投资组合网站时，我预计会获得一小部分流量。

我当然不是在提倡构建低效的代码……请记住，“成本”实际上应该以流程时间执行来衡量，而不仅仅是流程。

如果您真的很担心，请记录 PHP Markdown 过程执行前后的时间。然后，以 A/B 方式跟踪一段时间的服务器负载。数字不会说谎。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T22:43:30.367

我最近完成了一个与您所要求的非常相似的项目。我没有将完整的 HTML 存储在数据库中，而是选择使用专有 API 将标记的 html 存储在文件系统上，就像 MongoDB 一样。降价存储与全面存储的美妙之处在于文件系统上的足迹要小得多，如果您需要查看原始降价，它更容易阅读。当用户编辑 html 时，我会渲染完整的内容，以便他们可以看到它的样子。

还有其他存储两者的建议，我不太同意。如果您希望通过不必为每个请求标记降级版本来提高性能，那么我会考虑在每次编辑时缓存完整版本。同时存储降价和全面存储违背了降价的目的，因为您要付出磁盘空间和/或数据库操作的代价。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T22:30:44.800

你可以存储两者。如果必须多次编辑存储的 Markdown，或者如果开发了另一个或更好的 Markdown 到 HTML 翻译，则存储的 Markdown 很有用。正如您所说，存储的 HTML 很有用，可以避免一次又一次地重新生成它。

# javascript - 为什么 obj.getAttribute 中的 json 字符串不想解析？

> ID：10456911
> 
> 赞同：0
> 
> 时间：2012-05-04T22:27:19.407
> 
> 标签：javascript, json

```
var jsn=getAttr(ref,"json-data").toString();
console.log(jsn); //{test: true,stringtest:"hallo"}. it's OK.
JSON.parse(jsn); //Uncaught SyntaxError: Unexpected token s, line: line with JSON.parse; 
```

我认为`JSON.parse`这些数据有问题。我试图删除`stringtest:"hallo"`- 没有结果... PS：我也认为我做错了什么然后我问了这个问题

我第一次尝试`JSON.parse("{"+jsn+"}");`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:33:36.360

您的 JSON 格式不正确，因为您的对象键必须用引号引起来。以下将起作用：

```
var jsn = '{"test": true, "stringtest": "hallo"}';
JSON.parse(jsn); 
```

编辑：指定 JSON 格式的 RFC4627 指出：

> 2.2\. 对象
> 
> 对象结构表示为一对围绕零个或多个**名称/值对**（或成员） 的花括号。**名称是一个
> 字符串**。每个名称后面都有一个冒号，将名称
> 与值分开。单个逗号将值与后面的
> 名称分开。对象中的名称应该是唯一的。
> 
> ```
>  object = begin-object [ member *( value-separator member ) ]
>   end-object
> 
>   member = string name-separator value 
> ```

如您所见，JSON 对象由名称/值对组成，其中名称是字符串。同样，RFC 说：

> 字符串的表示类似于 C 系列编程语言中使用的约定。 **字符串以
> 引号**开头和结尾。
> 除了必须转义的字符外，所有 Unicode 字符都可以放在引号内：
> 引号、反斜线和控制字符（U+0000
> 到 U+001F）。
> 
> string = 引号 *char 引号
> 
> **引号 = %x22 ; "**

因此，根据 RFC，键必须用双引号括起来，而不是单引号。尽管如此，我猜一些解析器可能更宽容并接受它们，但我会坚持标准。

# haskell - 这个函数的结果类型应该是什么？

> ID：10456915
> 
> 赞同：5
> 
> 时间：2012-05-04T22:27:43.017
> 
> 标签：haskell, types, functional-programming

我想编写一个函数`saveStuff`，在通过某些测试后将某些内容保存到文件中。如果测试失败，我需要提出一个错误。这个函数的结果类型应该是什么？我想到了`IO (Either String ())`and `IO (Maybe String)`，但由于某种原因，他们俩都*觉得不对劲。*我从标准库中查找了类似的函数，但它们似乎只是返回`IO ()`. 他们在失败时抛出异常。我找不到自己喜欢这种方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T01:38:10.537

您可以考虑编写一些返回`ErrorT String IO ()`. `ErrorT`monad 转换器的文档[在 Hackage 上](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-Error.html#t:ErrorT)。在Eric Kidd的优秀[报告错误的八种方法](http://www.randomhacks.net/articles/2007/03/10/haskell-8-ways-to-report-errors/)和几年后 Edward Yang的[后续行动](http://blog.ezyang.com/2011/08/8-ways-to-report-errors-in-haskell-revisited/)中，有更多的建议。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T00:49:42.390

如果只有一种方法`saveStuff`可以成功，那么同构的类型`Maybe ErrorMessage`就是正确的类型。`Maybe ErrorMessage`它本身有一个缺点，通常`Nothing`在使用时表示失败`Maybe`，因此在这里会与预期背道而驰。就这一点而言，`Either ErrorMessage ()`更好，但案例的`()`参数`Right`不携带任何信息，因此该选项也缺乏优雅。

如果您不想接受这些缺点，请定义自己的结果类型

```
data Result = Success | Failure ErrorMessage
-- with type ErrorMessage = String, for example 
```

# perl - perlipc 文档中的错误？

> ID：10456916
> 
> 赞同：6
> 
> 时间：2012-05-04T22:27:45.037
> 
> 标签：perl, ipc

我试图通过我在[perlipc](http://perldoc.perl.org/perlipc.html)文档中看到的东西来解惑。

> 如果您正在写入管道，您还应该捕获 SIGPIPE。否则，想想当你启动一个不存在的命令的管道时会发生什么：open() 很可能会成功（它只反映 fork() 的成功），但是你的输出会失败—— -壮观。Perl 无法知道该命令是否有效，因为您的命令实际上是在一个单独的进程中运行，该进程的 exec() 可能已失败。因此，虽然虚假命令的读者只返回文件的快速结束，但虚假命令的作者将触发他们最好准备处理的信号。考虑：

```
 open(FH, "|bogus")  or die "can't fork: $!";
   print FH "bang\n"   or die "can't write: $!";
   close FH            or die "can't close: $!"; 
```

> 直到收盘才会爆发，它会随着 SIGPIPE 爆发。要抓住它，你可以使用这个：

```
 $SIG{PIPE} = 'IGNORE';
   open(FH, "|bogus")  or die "can't fork: $!";
   print FH "bang\n"   or die "can't write: $!";
   close FH            or die "can't close: status=$?"; 
```

如果我没看错的话，它说第一个版本可能要等到最后关闭才会死掉。

但是，这在我的 OS X 机器上没有发生（Perl 版本 5.8.9 到 5.15.9）。`open`无论我在那里是否有 $SIG{PIPE} 行，它都会以“无法分叉：没有这样的文件或目录”而爆炸。

我有什么误解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:56:25.793

这是在 5.6 的开发过程中实现的更改，以便 system() 可以检测到它何时无法分叉/执行子

[https://github.com/mirrors/perl/commit/d5a9bfb0fc8643b1208bad4f15e3c88ef46b4160](https://github.com/mirrors/perl/commit/d5a9bfb0fc8643b1208bad4f15e3c88ef46b4160)

它也记录在[http://search.cpan.org/dist/perl/pod/perlpentut.pod#Pipe_Opens](http://search.cpan.org/dist/perl/pod/perlopentut.pod#Pipe_Opens)

它本身指向 perlipc，但 perlipc 似乎确实缺少这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:33:57.687

我的 Perl `v5.14.2`、Ubuntu 12.04 上的输出相同：

```
$ perl
   open(FH, "|bogus")  or die "can't fork: $!";
   print FH "bang\n"   or die "can't write: $!";
   close FH            or die "can't close: $!";
can't fork: No such file or directory at - line 1. 
```

这个错误很*奇怪*，因为它与分叉无关——他们一定添加了一些前瞻猜测，看看它是否可以执行`bogus`。（这充其量是一种*竞争条件，但在常见情况下可能会提供明显更好的错误处理；并且只会在竞争失败时与旧行为一样不方便。）*

# php - 删除 iframe 会阻止文件上传吗？

> ID：10456917
> 
> 赞同：0
> 
> 时间：2012-05-04T22:27:57.673
> 
> 标签：php, javascript, jquery

我一直在试图弄清楚当用户单击“取消”按钮时如何取消文件上传到服务器。似乎实现这一点的最常见方法可能是在用户单击“取消”按钮时删除 iframe。

我只想知道当用户单击“取消”按钮时，这是否是尝试停止将文件上传到服务器的好方法？如果用户确实单击了“取消”按钮，那么我仍然希望用户能够稍后上传另一个文件，如果他们愿意的话，所以我希望在删除 iframe 时它不会是永久性的。

如果这是最好的方法，那么有没有人知道在单击“取消”按钮时如何删除 iframe？

下面是开始上传的代码和存储取消按钮功能的代码。

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

              $(".imageCancel").click(function() {
              $('.upload_target').get(0).contentwindow
          return stopImageUpload();
    });

      return true;
} 
```

以下是文件停止上传时的代码：

```
function stopImageUpload(success, imagefilename){

      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label>');
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');

      return true;   
} 
```

表单代码也如下：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return startImageUpload(this);' class='imageuploadform' >" + 
//Above is form tag
        "<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='imagef1_upload_form' align='center'><br/><label>" + 
//Above is where it displays loading bar while file is uploading
        "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
//Above is File Input
        "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
//Above is Upload Button
        "</p><p class='imagef1_cancel' align='center'><label>" + 
        "<input type='button' name='imageCancel' class='imageCancel' value='Cancel' /></label>" + 
//Above is Cancel Button
        "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
//Above is the iframe which does the transporting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:42:41.977

如果你有一个按钮

HTML

```
<button id="cancel">Cancel</button> 
```

和一个 JavaScript

```
$("#cancel").click(function() {
    $("iframe[name='upload_target']").attr("src", "javascript:'<html></html>'");
    $("iframe[name='upload_target']").remove(); // not needed I think, but anyway it is good to keep the DOM clean
}); 
```

并且用户单击该按钮，`src`iframe 的属性被重置为不会创建混合内容警告的变体

# scala - 用于计算大斐波那契数的 Scala 矩阵库

> ID：10456918
> 
> 赞同：2
> 
> 时间：2012-05-04T22:28:00.330
> 
> 标签：scala, matrix

将此类扩展为具有将返回矩阵的 n 次幂的幂方法的最佳方法是什么。

[https://github.com/eobrain/scalaclass/blob/master/matrix/src/main/scala/org/eamonn/published_matrix/PublishedMatrix.scala](https://github.com/eobrain/scalaclass/blob/master/matrix/src/main/scala/org/eamonn/published_matrix/PublishedMatrix.scala)

我想做的是使用矩阵计算大斐波那契数。

![来自维基百科](../Images/04d55b38f631955353834614052abc3e.png)

这些是我迄今为止对原始代码所做的更改。我收到 StackOverflow 异常。

文件行.scala

```
/*
* Copyright (c) 2010 Eamonn O'Brien-Strain, eob@well.com
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* which is available at http://www.eclipse.org/legal/epl-v10.html
*/

package org.eamonn.published_matrix

import Row._

/** Methods that are added to List[BigInt] by an implicit conversion */
case class RichRow(v:Row){

  /** dot product */
  def *(that:RichRow) = dotProd( this.v, that.v )

  /** vector addition */
  def add(that:RichRow) = vPlusV( this.v, that.v )

  /** convert to column vector */
  def T = v.map{ List(_) }

  /** As row matrix */
  def asMatrix = List( v )
}

object Row{

  /** A convenient alias */
  type Row = List[BigInt]

  def dotProd(v1:Row,v2:Row) = 
              v1.zip( v2 ).map{ t:(BigInt,BigInt) => t._1 * t._2 }.reduceLeft(_ + _)

  def vPlusV(v1:Row,v2:Row) = 
             v1.zip( v2 ).map{ t:(BigInt,BigInt) => t._1 + t._2 }

  /** effectively add RichRow methods to List[Double] */
  implicit def pimp(v:Row) = new RichRow(v)
} 
```

文件 Matrix.scala

```
/*
* Copyright (c) 2010 Eamonn O'Brien-Strain, eob@well.com
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* which is available at http://www.eclipse.org/legal/epl-v10.html
*/

package org.eamonn.published_matrix

import Matrix._
import Row._
import Seq.Projection

/** Methods that are added to List[List[BigInt]] by an implicit conversion */
case class RichMatrix(m:Matrix){

  def T = transpose(m)

  def *(that:RichMatrix) = mXm( this.m, that.m )

  def power (exp:Int) = recPower(this.m, exp)

  def recPower(m:Matrix, exp:BigInt) : Matrix = 
         if (exp == 1) m else mXm(m, recPower(m, exp - 1))

  def apply(i:Int,j:Int) = m(i)(j)

  def rowCount = m.length
  def colCount = m.head.length

  def toStr = "\n" + m.map { _.map{"\t" + _}.reduceLeft(_ + _) + "\n" }.reduceLeft(_ + _)
}

object Matrix{

  /** A convenient alias */
  type Matrix = List[Row]

  def apply( rowCount:Int, colCount:Int )( f:(Int,Int) => BigInt ) = (
     for(i <- 1 to rowCount) yield
        ( for( j <- 1 to colCount) yield f(i,j) ).toList
     ).toList

  def transpose(m:Matrix):Matrix =
      if(m.head.isEmpty) Nil else m.map(_.head) :: transpose(m.map(_.tail))

  def mXv(m:Matrix, v:Row) = m.map{ dotProd(_,v) } reduceLeft ( _ + _ )

  def mXm( m1:Matrix, m2:Matrix ) =
     for( m1row <- m1 ) yield
        for( m2col <- transpose(m2) ) yield
           dotProd( m1row, m2col )

  def rowCount(m:Matrix) = m.length
  def colCount(m:Matrix) = m.head.length

  /** effectively add RichMatrix methods to List[List[BigInt]] */
  implicit def pimp1(m:Matrix) = new RichMatrix(m)
  implicit def pimp2(m:List[Projection[BigInt]]) = new RichMatrix(m.map{_.toList})
  implicit def pimp1(m:Projection[List[BigInt]]) = new RichMatrix(m.toList)
  implicit def pimp2(m:Projection[Projection[BigInt]]) = new RichMatrix(m.map{_.toList}.toList)

  // Suggested by Travis Brown - Not working
  //  implicit def toRichMatrixWithPower(m: Matrix) = new {
  //    val matrix = new RichMatrix(m)
  //    def power(n: Int) = {
  //      require(matrix.rowCount == matrix.colCount)
  //      Iterator.iterate(matrix)(_ * matrix).drop(n - 1).next
  //    }
  //  }

  def main(args: Array[String]): Unit =
  {
    val m = List(List[BigInt](1, 1), List[BigInt](1, 0))

    println((m power 9999)(0)(1)) //java.lang.StackOverflowError
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:27:59.917

像这里一样扩展案例类`RichMatrix`是一个坏主意，并且在最近的 Scala 版本中已被弃用。但是，您可以遵循作者的模式并使用[pimp-my-library](http://www.artima.com/weblogs/viewpost.jsp?thread=179766)方法：

```
import org.eamonn.published_matrix._
import org.eamonn.published_matrix.Matrix._

implicit def toRichMatrixWithPower(m: Matrix) = new {
  val matrix = new RichMatrix(m)
  def power(n: Int) = {
    require(matrix.rowCount == matrix.colCount)
    Iterator.iterate(matrix)(_ * matrix).drop(n - 1).next
  }
} 
```

现在`List(List(2.0, 0.0), List(0.0, 2.0)).power(3)`例如应该给出以下内容：

```
RichMatrix(List(List(8.0, 0.0), List(0.0, 8.0))) 
```

不过，您最好使用严肃的[Scala](https://github.com/scalala/Scalala)或[Java](http://acs.lbl.gov/software/colt/api/cern/colt/matrix/package-summary.html)矩阵库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:53:21.497

这是最终的工作代码。谢谢@travis-brown

文件 Matrix.scala

```
/*
* Copyright (c) 2010 Eamonn O'Brien-Strain, eob@well.com
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* which is available at http://www.eclipse.org/legal/epl-v10.html
*/

package org.eamonn.published_matrix

import Matrix._
import Row._

/** Methods that are added to List[List[Double]] by an implicit conversion */
case class RichMatrix(m:Matrix){

  def T = transpose(m)

  def *(that:RichMatrix) = mXm( this.m, that.m )

  def apply(i:Int,j:Int) = m(i)(j)

  def rowCount = m.length
  def colCount = m.head.length

  def toStr = "\n" + m.map { _.map{"\t" + _}.reduceLeft(_ + _) + "\n" }.reduceLeft(_ + _)
}

object Row{

  /** A convenient alias */
  type Row = List[BigInt]

  def dotProd(v1:Row,v2:Row) = v1.zip( v2 ).map{ t:(BigInt,BigInt) => t._1 * t._2 }.reduceLeft(_ + _)
}

object Matrix{

  /** A convenient alias */
  type Matrix = List[Row]

  def transpose(m:Matrix):Matrix =
    if(m.head.isEmpty) Nil else m.map(_.head) :: transpose(m.map(_.tail))

  def mXm( m1:Matrix, m2:Matrix ) =
    for( m1row <- m1 ) yield
      for( m2col <- transpose(m2) ) yield
        dotProd( m1row, m2col )

  def rowCount(m:Matrix) = m.length
  def colCount(m:Matrix) = m.head.length

  /** effectively add RichMatrix methods to List[List[Double]] */
  implicit def pimp1(m:Matrix) = new RichMatrix(m)

  implicit def matrixPower(m: Matrix) = new {
    //val matrix = new RichMatrix(m)
    def power(n: Int) = {
      require(m.rowCount == m.colCount)
      Iterator.iterate(m)(_ * m).drop(n - 1).next
    }
  }

  def main(args: Array[String]): Unit =
  {
    val m = List(List[BigInt](1, 1), List[BigInt](1, 0))

    println(m.power(9)(1)(0))
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T09:07:49.820

以下是我对这个问题的看法：

```
def fibonacci(n: Int): Int = {
  def loop(a: Int, b: Int, c: Int, d: Int, n: Int, 
           e: Int, f: Int, g: Int, h: Int): Int =
    if (n == 0) f
    else if (n % 2 != 0)
      loop(a * a + b * c, a * b + b * d, c * a + d * c, c * b + d * d, n / 2, 
           e * a + g * b, f * a + h * b, e * c + g * d, f * c + h * d)
    else 
      loop(a * a + b * c, a * b + b * d, c * a + d * c, c * b + d * d, n / 2, 
           e, f, g, h)

  loop(1, 1, 1, 0, n + 1, 1, 0, 0, 1)
} 
```

它是一个*纯函数式解决方案*，没有*可变数组*和使用*尾递归**的副作用*。在我的收藏中查看更多此类代码的[示例](https://github.com/vkostyukov/scalacaster)。

# c# - .NET 和 Direct2D 快速绘制崩溃

> ID：10456924
> 
> 赞同：2
> 
> 时间：2012-05-04T22:28:37.653
> 
> 标签：c#, pinvoke, direct2d

### 一般用途

我正在开发一个可用于使用 Direct2D 进行多用途图形渲染的 .NET 用户控件。此控件基于`ID2D1HwndRenderTarget`带有`ID2D1BitmapRenderTarget`后备缓冲区/双缓冲区的接口。

### 背景

我已经使用 C++/CLI 编写了一个包装器，它为 Direct2D 公开了一组托管包装器对象，并且我为 Direct2D 位图设计了一个单例资源管理器，代码可以将二进制数据发送到该位图，并从中获取资源密钥，然后哪些代码可以将消息传递给用户控件以呈现位图。

### 到目前为止的使用情况

我已经能够毫无问题地加载位图、JPEG、自定义图像格式等并将它们发送到 Direct2D 渲染控件。我编写了一个自定义视频解码器，它可以从 15-fps 视频中加载帧（在后台线程中解码）并从 Win32 多媒体计时器引发的事件中渲染它们，没问题。

### 问题

我的问题是，当我尝试从单一多媒体格式扩展到更灵活的格式（特别是连接到 LibAV/ffmpeg）时，Direct2D 渲染控件开始使显示驱动程序崩溃。当帧按顺序渲染时（使用按钮来渲染下一帧，而不是计时器），这***不会发生。***它也不会立即发生。当我在 Win32 计时器回调内部阻塞时也不会发生这种情况，但是当我使用互斥锁引发一个线程时，它将释放计时器回调并让临时线程指示控件呈现。

### 症状

如果我启动一个计时器并将其附加到将导致下一次渲染的已用事件方法，它通常会正常播放大约 2-20 秒。使用较小的视频，我可以在问题开始之前获得更长的播放时间。如果我播放 1080p 视频，我通常可以在 5 秒内获得崩溃而无需竞争。播放将开始正常，在赶上之前可能会在这里或那里打嗝。

*   最终，我会开始看到闪烁，好像背景颜色已渲染但框架未渲染。其他帧可能会或可能不会稍后渲染，但这是非常短暂的。
*   闪烁后，如果我足够快地停止计时器，就不会发生崩溃。
*   如果我不及时停止：
    *   如果我很幸运（可能有 10% 的时间），帧将停止渲染，停留在一帧上，直到我调整控件的大小，此时整个控件只绘制黑色。（我读到这可能表明 DirectX 渲染的设备上下文丢失，但还没有看到更多。）
    *   如果我不走运，显示驱动程序会崩溃，Windows 会恢复并重新启动驱动程序，之后 EndDraw 将*最终*告诉我发生错误并返回 D2DERR_RECREATE_TARGET。
    *   如果我真的不走运，显示器将开始看起来像万花筒，我将不得不关闭我的机器，我只是浪费了 5 分钟的时间来启动、登录、加载 Visual Studio 和我的解决方案、加载视频并丢失了所有我的调试数据。

我想认为我缺少某种竞争条件，但是每次我运行渲染代码时，它似乎都应该被正确锁定。

### 渲染控件的代码

```
using System;
using System.Drawing;
using System.Windows.Forms;

using Direct2D = Bardez.Projects.DirectX.Direct2D;
using ExternalPixelEnums = Bardez.Projects.FileFormats.MediaBase.Video.Pixels.Enums;
using Bardez.Projects.DirectX.Direct2D;
using Bardez.Projects.FileFormats.MediaBase.Video;
using Bardez.Projects.FileFormats.MediaBase.Video.Enums;
using Bardez.Projects.Win32;

namespace Bardez.Projects.Output.Visual
{
    /// <summary>Represents a rendering target for Direct2D.</summary>
    /// <remarks>
    ///     To use this control, an external component will need to supply bitmap data. This does not need to be a GDI+ Bitmap class.
    ///     However, the container for this control will need to push data into this control.
    ///     So, in the case of a movie player, we'd see the following model:
    ///         * decompress a frame.
    ///         * push frame to control
    ///         * invoke Invalidate
    ///             * control will render the bitmap
    ///         * sleep just a little bit
    ///         * go back to first step
    /// </remarks>
    public class Direct2dRenderControl : VisualRenderControl
    {
        /*
        *   Locking orientation:
        *       There are two rendering targets: a GDI display and a bitmap back buffer.
        *       There are 5 'real' locking operations:
        *           Rendering to the GDI display (OnPaint)
        *           Rendering to the back buffer (DrawBitmapToBuffer, DiscardCurrentBuffer)
        *           Setting the current displayed frame (SetRenderFrame)
        *           Resource Freeing (FreeFrameResource)
        *           Resizing (OnResize)
        *
        *       Briefly, the overarching effects of these five are:
        *           Rendering
        *               Utilizes the buffer and the display
        *           Back Buffer
        *               Utilizes the buffer and if mid-render could affect this display
        *           Set Frame
        *               Sets the buffer's displayed image
        *           Resource Freeing
        *               Affects the buffer if a resource is refernced
        *           Resizing
        *               Resizes the render control and the bitmap, uses the frame set by set
        *
        *       Locking plan:
        *           Resize should block set, free and back buffer
        *           Render should block back buffer, control
        *           Set frame should block resize and back buffer
        *           Free should block back buffer,
        *           Back buffer should block rendering, setting, resizing, freeing
        *
        *       Basically, lock everything at the process level, and not at the access level.
        */

        #region Fields
        /// <summary>Represents a Win32 HWND render target for Direct2D</summary>
        private ControlRenderTarget ctrlRenderTarget;

        /// <summary>Represents a drawing buffer</summary>
        private BitmapRenderTarget bmpRenderTarget;

        /// <summary>Represents a drawing buffer, used solely to create bitmaps</summary>
        private BitmapRenderTarget resourceBmpRenderTarget;

        /// <summary>Represents a buffer drawing command lock</summary>
        private Object controlBufferLock;

        /// <summary>Represents a paint/render drawing command lock</summary>
        private Object controlPaintRenderLock;

        /// <summary>Locking object reference for resource management (memory bitmaps, etc.)</summary>
        private Object resourceLock;

        /// <summary>Represents the key to accessing the currently set key</summary>
        protected Int32 currentFrameKey;
        #endregion

        #region Properties
        /// <summary>Indicates whether there is a frame set for this control</summary>
        protected Boolean HasFrameSet
        {
            get { return currentFrameKey > -1; }
        }

        /// <summary>Exposes a wrapper for the bitmap render target</summary>
        protected BitmapRenderTarget BmpRenderTarget
        {
            get { return this.bmpRenderTarget; }
            set
            {
                lock (this.controlBufferLock)
                {
                    if (this.bmpRenderTarget != null)
                        this.bmpRenderTarget.Dispose();

                    this.bmpRenderTarget = value;
                }
            }
        }

        /// <summary>Exposes a wrapper for the bitmap render target</summary>
        protected BitmapRenderTarget ResourceBmpRenderTarget
        {
            get { return this.resourceBmpRenderTarget; }
            set
            {
                lock (this.resourceLock)
                {
                    if (this.resourceBmpRenderTarget != null)
                        this.resourceBmpRenderTarget.Dispose();

                    this.resourceBmpRenderTarget = value;
                }
            }
        }

        /// <summary>Represents a Win32 HWND render target for Direct2D</summary>
        protected ControlRenderTarget CtrlRenderTarget
        {
            get { return this.ctrlRenderTarget; }
            set
            {
                lock (this.controlPaintRenderLock)
                {
                    if (this.ctrlRenderTarget != null)
                        this.ctrlRenderTarget.Dispose();

                    this.ctrlRenderTarget = value;
                }
            }
        }
        #endregion

        #region Construction
        /// <summary>Default constructor</summary>
        public Direct2dRenderControl() : base()
        {
            this.controlBufferLock = new Object();
            this.controlPaintRenderLock = new Object();
            this.resourceLock = new Object();

            this.currentFrameKey = -1;
            this.InitializeControlDirect2D();
        }

        /// <summary>Initializes the Direct2D</summary>
        protected void InitializeControlDirect2D()
        {
            //disable Windows background draw
            this.SetStyle(ControlStyles.UserPaint | ControlStyles.AllPaintingInWmPaint, true);

            // Build options on the Control render target
            PixelFormat format = new PixelFormat(DXGI_ChannelFormat.FORMAT_B8G8R8A8_UNORM, AlphaMode.Unknown);  //32-bit color, pure alpha
            DpiResolution res = Direct2dResourceManager.Instance.Factory.GetDesktopDpi();
            RenderTargetProperties rtProp = new RenderTargetProperties(RenderTargetType.Default, format, res, RenderTargetUsage.GdiCompatible, DirectXVersion.DirectX9);

            //Build out control render target properties
            HwndRenderTargetProperties hwndProp = new HwndRenderTargetProperties(this.Handle, new SizeU(this.Size), PresentationOptions.RetainContents);

            lock (this.controlPaintRenderLock)
            {
                // populate the Control rendering target
                ResultCode result = Direct2dResourceManager.Instance.Factory.CreateHwndRenderTarget(rtProp, hwndProp, out this.ctrlRenderTarget);

                lock (this.controlBufferLock)
                {
                    // create a bitmap rendering targets
                    this.CtrlRenderTarget.CreateCompatibleRenderTarget(out this.bmpRenderTarget);

                    lock (this.resourceLock)
                        this.CtrlRenderTarget.CreateCompatibleRenderTarget(out this.resourceBmpRenderTarget);
                }
            }
        }
        #endregion

        #region Destruction
        /// <summary>Disposal code; releases unmanaged resources</summary>
        /// <param name="disposing">True indicates to dispose managed resources</param>
        protected override void Dispose(Boolean disposing)
        {
            this.ResourceBmpRenderTarget = null;    //property disposes
            this.BmpRenderTarget = null;            //property disposes
            this.CtrlRenderTarget = null;           //property disposes
            base.Dispose(disposing);
        }

        /// <summary>Disposal</summary>
        ~Direct2dRenderControl()
        {
            this.Dispose();
        }
        #endregion

        #region Event Raising
        /// <summary>Draws the output, then raises the paint event</summary>
        /// <param name="e">Painting Event arguments</param>
        protected override void OnPaint(PaintEventArgs e)
        {
            lock (this.controlPaintRenderLock)
            {
                lock (this.controlBufferLock)
                {
                    this.SuspendLayout();

                    this.OnPaintBackground(e);

                    Direct2D.Bitmap bmp;
                    ResultCode result;

                    result = this.BmpRenderTarget.GetBitmap(out bmp);

                    Direct2D.RectangleF rect = new Direct2D.RectangleF(e.ClipRectangle);

                    this.CtrlRenderTarget.BeginDraw();

                    this.CtrlRenderTarget.DrawBitmap(bmp, rect, 1.0F, BitmapInterpolationMode.Linear, rect);

                    result = this.CtrlRenderTarget.EndDraw();

                    bmp.Dispose();

                    if (result != ResultCode.Success_OK)
                        throw new ApplicationException(String.Format("Error encountered during draw: '{0}'", result.ToString()));

                    base.OnPaint(e);

                    this.ResumeLayout();
                }
            }
        }

        /// <summary>Overides the resize method</summary>
        /// <param name="e">Parameters for the resize event</param>
        protected override void OnResize(EventArgs e)
        {
            lock (this.controlPaintRenderLock)
            {
                lock (this.controlBufferLock)
                {
                    //Null check since resize fires before it is constructed, with the size event during parent's InitializeComponent
                    if (this.CtrlRenderTarget != null)
                    {
                        this.SuspendLayout();

                        //resize the existing control rendering target
                        this.CtrlRenderTarget.Resize(new SizeU(this.Size));

                        //I also need to resize the buffer, but can't. Instead, create a new one, then copy the existing one. Kind of lame.
                        this.ResizeBitmapRenderTarget();

                        base.OnResize(e);

                        //cause another draw
                        this.Invalidate(new Rectangle(new Point(0, 0), this.Size));

                        this.ResumeLayout();
                    }
                }
            }
        }

        /// <summary>Overridden Paint background method</summary>
        /// <param name="e">Paint event arguments</param>
        /// <remarks>
        ///     Made empty to avoid GDI and Direct2D writing to the same control; when moving the control around
        ///     or rendering at high speeds, the dreaded WinForms flicker was introduced.
        ///     The background painting can be found in the <see cref="FillBufferRenderTarget"/> method,
        ///     which fills the bitmap back buffer with the control's background color.
        /// </remarks>
        protected override void OnPaintBackground(PaintEventArgs e) {  }
        #endregion

        #region Drawing
        /// <summary>Resizes the bitmap rendering target buffer</summary>
        /// <remarks>Does not lock the GDI render target. The OnResize or other callers lock instead.</remarks>
        protected void ResizeBitmapRenderTarget()
        {
            lock (this.controlPaintRenderLock)
            {
                lock (this.controlBufferLock)
                {
                    using (BitmapRenderTarget bmpCurr = this.BmpRenderTarget)
                    {
                        BitmapRenderTarget bmpNew;

                        ResultCode result = this.CtrlRenderTarget.CreateCompatibleRenderTarget(out bmpNew);

                        this.DuplicateDoubleBufferContents(bmpNew);

                        //Property disposes and locks
                        this.BmpRenderTarget = bmpNew;
                    }
                }
            }
        }

        /// <summary>Draws a Bitmap to the render buffer</summary>
        /// <param name="bmp">Direct2D bitmap to draw to the buffer.</param>
        protected void DrawBitmapToBuffer(Direct2D.Bitmap bmp, Point2dF origin)
        {
            lock (this.controlBufferLock)
            {
                lock (this.resourceLock)
                {
                    Direct2D.SizeF bmpSize = bmp.GetSize();

                    Single width = bmpSize.Width > this.BmpRenderTarget.Size.Width ? this.BmpRenderTarget.Size.Width : bmpSize.Width;
                    Single height = bmpSize.Height > this.BmpRenderTarget.Size.Height ? this.BmpRenderTarget.Size.Height : bmpSize.Height;

                    Direct2D.RectangleF destRect = new Direct2D.RectangleF(origin.X, origin.X + width, origin.Y, origin.Y + height);
                    Direct2D.RectangleF srcRect = new Direct2D.RectangleF(0.0F, width, 0.0F, height);

                    this.BmpRenderTarget.BeginDraw();

                    this.FillBufferRenderTarget(this.BmpRenderTarget);

                    // do the actual draw
                    this.BmpRenderTarget.DrawBitmap(bmp, destRect, 1.0F, BitmapInterpolationMode.Linear, srcRect);

                    //tell Direct2D that a paint operation is ending
                    ResultCode result = this.BmpRenderTarget.EndDraw();
                }
            }
        }

        /// <summary>Draws a Bitmap to the render buffer</summary>
        /// <param name="bmp">Direct2D bitmap to draw to the buffer.</param>
        protected void DrawBitmapToBuffer(Direct2D.Bitmap bmp)
        {
            this.DrawBitmapToBuffer(bmp, new Point2dF(0.0F, 0.0F));
        }

        /// <summary>Duplicates the bitmap behind the existing rendering target, and drawing it to a new one, discarding the current and setting the new.</summary>
        /// <remarks>Does not lock any references, as the outside method locks</remarks>
        protected void DuplicateDoubleBufferContents(BitmapRenderTarget bmpNew)
        {
            Direct2D.Bitmap bmp = null;
            ResultCode result = ResultCode.Success_OK;

            if (this.HasFrameSet)
                bmp = Direct2dResourceManager.Instance.GetBitmapResource(this.currentFrameKey);
            else
                result = this.BmpRenderTarget.GetBitmap(out bmp);

            bmpNew.BeginDraw();

            this.FillBufferRenderTarget(bmpNew);

            //calculate the size to copy
            Direct2D.SizeF bmpSize = bmp.GetSize();

            Single width = bmpSize.Width > this.CtrlRenderTarget.Size.Width ? this.CtrlRenderTarget.Size.Width : bmpSize.Width;
            Single height = bmpSize.Height > this.CtrlRenderTarget.Size.Height ? this.CtrlRenderTarget.Size.Height : bmpSize.Height;

            //Determine the copy rectangle
            Direct2D.RectangleF rect = new Direct2D.RectangleF(0, width, 0, height);

            //Copy
            bmpNew.DrawBitmap(bmp, rect, 1.0F, BitmapInterpolationMode.Linear, rect);

            //conditionally disose the bitmap, don't if it is in the manager
            if (!this.HasFrameSet)
                bmp.Dispose();

            result = bmpNew.EndDraw();
        }

        /// <summary>Discards the current buffer and replaces it with a blank one.</summary>
        protected void DiscardCurrentBuffer()
        {
            lock (this.controlBufferLock)
            {
                BitmapRenderTarget bmpNew;

                // create a bitmap rendering target
                ResultCode result = this.CtrlRenderTarget.CreateCompatibleRenderTarget(out bmpNew);

                bmpNew.BeginDraw();
                this.FillBufferRenderTarget(bmpNew);
                result = bmpNew.EndDraw();

                //property locks, so no lock here
                this.BmpRenderTarget = bmpNew;  //replace the old buffer
            }
        }

        /// <summary>Fills the buffer render target with the background color</summary>
        /// <param name="renderTarget">Bitmap render target to fill</param>
        protected void FillBufferRenderTarget(BitmapRenderTarget renderTarget)
        {
            SolidColorBrush brush = null;

            ResultCode result = renderTarget.CreateSolidColorBrush(new ColorF(this.BackColor), out brush);

            renderTarget.FillRectangle(new Direct2D.RectangleF(new Rectangle(new Point(0, 0), this.Size)), brush);
            brush.Dispose();
        }
        #endregion

        #region Frame Resources
        /// <summary>Posts a Frame resource to the resource manager and returns a unique key to access it.</summary>
        /// <param name="resource">Frame to be posted.</param>
        /// <returns>A unique Int32 key</returns>
        public override Int32 AddFrameResource(Frame resource)
        {
            lock (this.resourceLock)
            {
                //create the bitmap
                BitmapProperties properties = new BitmapProperties(new PixelFormat(DXGI_ChannelFormat.FORMAT_B8G8R8A8_UNORM, AlphaMode.PreMultiplied), Direct2dResourceManager.Instance.Factory.GetDesktopDpi());
                SizeU dimensions = new SizeU(Convert.ToUInt32(resource.Pixels.Metadata.Width), Convert.ToUInt32(resource.Pixels.Metadata.Height));

                Direct2D.Bitmap bmp = null;
                ResultCode result = this.ResourceBmpRenderTarget.CreateBitmap(dimensions, properties, out bmp);

                Byte[] data = resource.Pixels.GetPixelData(ExternalPixelEnums.PixelFormat.RGBA_B8G8R8A8, ScanLineOrder.TopDown, 0, 0);
                result = bmp.CopyFromMemory(new RectangleU(dimensions), data, Convert.ToUInt32(resource.Pixels.Metadata.Width * 4));

                return Direct2dResourceManager.Instance.AddFrameResource(bmp);
            }
        }

        /// <summary>Frees a Bitmap resource in the resource manager and Disposes of it.</summary>
        /// <param name="frameKey">Direct2D Bitmap key to be Disposed.</param>
        public override void FreeFrameResource(Int32 frameKey)
        {
            lock (this.resourceLock)
            {
                if (frameKey > -1)
                    Direct2dResourceManager.Instance.FreeFrameResource(frameKey);
            }
        }
        #endregion

        #region Frame Setting
        /// <summary>Sets the frame to be rendered to the User Control</summary>
        /// <param name="key">Frame key to set as current image</param>
        public override void SetRenderFrame(Int32 key)
        {
            this.SetRenderFrame(key, 0, 0);
        }

        /// <summary>Sets the frame to be rendered to the User Control</summary>
        /// <param name="key">Frame key to set as current image</param>
        /// <param name="originX">X coordinate to start drawing from</param>
        /// <param name="originY">Y coordinate to start drawing from</param>
        public override void SetRenderFrame(Int32 key, Int64 originX, Int64 originY)
        {
            lock (this.controlBufferLock)
            {
                if (key > -1)
                    this.DrawBitmapToBuffer(Direct2dResourceManager.Instance.GetBitmapResource(key), new Point2dF(Convert.ToSingle(originX), Convert.ToSingle(originY)));
                else
                    this.DiscardCurrentBuffer();

                this.currentFrameKey = key;
            }
        }

        /// <summary>This method invokes the rendering. For use by the appliation to tell the control to change images on demand.</summary>
        public void Render()
        {
            this.Invalidate();
        }

        /// <summary>Sets the frame to be rendered to the User Control and then renders it</summary>
        /// <param name="key">Frame key to set as current image</param>
        public virtual void SetRenderFrameAndRender(Int32 key)
        {
            this.SetRenderFrameAndRender(key, false);
        }

        /// <summary>Sets the frame to be rendered to the User Control and then renders it</summary>
        /// <param name="key">Frame key to set as current image</param>
        /// <param name="freePreviousFrame">
        ///     Flag indicating whether to dispose of the previous image set
        ///     (in the case of transient images, such as composite images for a game or high-frame video playback)
        /// </param>
        public virtual void SetRenderFrameAndRender(Int32 key, Boolean freePreviousFrame)
        {
            this.SetRenderFrameAndRender(key, 0, 0, freePreviousFrame);
        }

        /// <summary>Sets the frame to be rendered to the User Control and then renders it</summary>
        /// <param name="key">Frame key to set as current image</param>
        /// <param name="originX">X coordinate to start drawing from</param>
        /// <param name="originY">Y coordinate to start drawing from</param>
        public virtual void SetRenderFrameAndRender(Int32 key, Int64 originX, Int64 originY)
        {
            this.SetRenderFrameAndRender(key, originX, originY, false);
        }

        /// <summary>Sets the frame to be rendered to the User Control and then renders it</summary>
        /// <param name="key">Frame key to set as current image</param>
        /// <param name="originX">X coordinate to start drawing from</param>
        /// <param name="originY">Y coordinate to start drawing from</param>
        /// <param name="freePreviousFrame">
        ///     Flag indicating whether to dispose of the previous image set
        /// </param>
        public virtual void SetRenderFrameAndRender(Int32 key, Int64 originX, Int64 originY, Boolean freePreviousFrame)
        {
            lock (this.controlBufferLock)
            {
                Int32 previousFrameKey = this.currentFrameKey;

                this.SetRenderFrame(key, originX, originY);
                this.Render();

                if (freePreviousFrame)
                    this.FreeFrameResource(previousFrameKey);
            }
        }
        #endregion
    }
} 
```

### Win32多媒体定时器回调代码

排除大小，但这里是相关代码，链接到“winmm.dll”，EntryPoint = “timeSetEvent”

```
 /// <summary>Callback method for WIn32 API</summary>
        protected virtual void Win32Callback(UInt32 timerId, UInt32 message, IntPtr user, IntPtr param1, IntPtr param2)
        {
            TimeSpan raise;
            lock (this.timerLock)
            {
                //get system time for start time
                UInt32 uptime = Win32MultimediaTimeFunctions.GetEnvironmentUptime();
                Int32 upTimeSec = (Int32)(uptime / 1000);
                Int32 upTimeMilliSec = (Int32)(uptime % 1000);
                TimeSpan WinUpTime = new TimeSpan(0, 0, 0, upTimeSec, upTimeMilliSec);
                raise = WinUpTime - this.StartTime;
                //this.elapsed(raise);
                this.RaiseTimer(raise);
            }

            //Note: outside the lock, this.elapse(raise) kills the display driver
            //inside, without threading, it is fine.
            //inside, with threading, the display driver will crash after a bit of playback
        }

        protected void RaiseTimer(TimeSpan elapsedTime)
        {
            Thread timerEvent = new Thread(() => { this.RunThread(elapsedTime); });
            timerEvent.IsBackground = true;
            timerEvent.Name = "Timer callback";
            timerEvent.Start();
        }

        /// <summary>Raises the timer on a separate thread</summary>
        protected void RunThread(TimeSpan elapsedTime)
        {
            if (this.threadLock.WaitOne(0))
            {
                this.elapsed(elapsedTime);
                this.threadLock.ReleaseMutex();
            }
        } 
```

### 结论

3 周后，我并不羞于说我对这种行为感到困惑，并寻找任何类型的输入来识别竞争条件，从架构上讲，我可能会遗漏关于 Direc2D 或我只是在哪里显示我的无知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:35:14.333

代码中的所有 locks 语句似乎都是一个过于复杂的解决方案。此外，从构造函数创建 COM 对象（如 Direct2D1）并从线程 UI 方法中使用它们通常不是一个好习惯。

我将通过在同一个线程上执行所有设备/对象的创建和渲染来简化您的应用程序，同时将您的渲染代码保留在表单之外。理想情况下，这应该是完全独立的，因为您可以通过 HWND 或 DXGI 表面或 Windows 8 Metro 表面渲染到任何类型的窗口/控件。

此外，正如 Aren 建议的那样，您应该依赖现有的强大包装器（如[SharpDX](http://code.google.com/p/sharpdx/) ），而不是使用您自己的 Direct2D1 包装器。它将节省您维护昂贵的层并帮助您专注于您的特定应用程序。

# iphone - 支持带有文本字段的 uialertview

> ID：10456925
> 
> 赞同：1
> 
> 时间：2012-05-04T22:28:46.707
> 
> 标签：iphone, objective-c, ios, xcode, uialertview

如果我想显示带有文本字段的弹出 UIAlertView，有谁知道前 iOS5 的解决方案是什么？苹果可以接受的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:55:24.730

当然，我在 App Store 中有一个 iOS5 之前的应用程序，其中包含这样的文本字段。

只需将文本视图作为 a 添加`subview`到警报视图中，并通过在其中插入适量的来计算间距，`\n`以便`message`为该字段腾出空间。

# c++ - Arduino清除缓冲区

> ID：10456931
> 
> 赞同：-1
> 
> 时间：2012-05-04T22:29:20.857
> 
> 标签：c++, c, arduino, microprocessors

```
#include <stdio.h>

#define LED 13

void setup() {
  pinMode(LED, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  if (Serial.available() == 4) {
    char command[5];

    for (int i = 0; i < 4; i++) command[i] = Serial.read();
    command[4] = '\0';

    Serial.println(command);

    if (strcmp(command, "AAAA") == 0) {
      digitalWrite(LED, HIGH);
      Serial.println("LED13 is ON");
    } else if (strcmp(command, "BBBB") == 0) {
      digitalWrite(LED, LOW);
      Serial.println("LED13 is OFF");
    }
  }
} 
```

我有那个代码，它读取 4 个字符的长字符串。但是，我需要它忽略任何不是 4 个字符长的字符串。

所以，想象一下这个输入：

```
AAAA
BBBB
BBB
AAAA 
```

现在，它显示为 {"AAAA", "BBBB", "BBBA"}。

我需要它来阅读{“AAAA”、“BBBB”、“AAAA”}。

任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:09:12.353

您可以检查字符间延迟的持续时间。设置超时时间，例如 100 毫秒。当在指定的超时后没有接收到更多数据时，这意味着整个字符串被完全传输。然后您可以检查字符串的长度并执行您的应用程序逻辑。

# algorithm - 图 - 如何找到最小有向循环（最小总重量）？

> ID：10456935
> 
> 赞同：10
> 
> 时间：2012-05-04T22:29:43.697
> 
> 标签：algorithm, data-structures, graph, shortest-path

这是一个消费税：

> 令 G 为具有 n 个顶点和 m 个边的加权有向图，其中所有边的权重为正。有向环是在同一顶点开始和结束并包含至少一条边的有向路径。给出一个 O(n^3) 算法，在 G 中找到一个总权重最小的有向循环。O((n^2)*m) 算法将获得部分学分。

* * *

这是我的算法。

我做一个`DFS`。每次当我找到 a 时`back edge`，我都知道我有一个有向循环。

然后我将暂时沿着 倒退`parent array`（直到我穿过循环中的所有顶点）并计算`total weights`.

然后我将`total weight`这个循环的 与进行比较`min`。`min`总是取最小的总权重。在 DFS 完成后，我们的最小有向循环也找到了。

* * *

好的，然后关于时间复杂度。

老实说，我不知道我的算法的时间复杂度。

对于 DFS，遍历需要 O(m+n)（如果 m 是边数，n 是顶点数）。对于每个顶点，它可能指向其祖先之一，从而形成一个循环。当找到一个循环时，需要 O(n) 来总结总权重。

所以我认为总时间是O(m+n*n)。但显然这是错误的，如消费税中所述，最佳时间为 O(n^3)，正常时间为 O(m*n^2)。

* * *

谁能帮我：

1.  我的算法正确吗？
2.  如果我的算法正确，时间复杂度是多少？
3.  有没有更好的算法来解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-05T06:52:52.620

您可以在此处使用[Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)算法。

**Floyd-Warshall 算法找到所有**顶点对之间的最短路径。

该算法非常简单，遍历所有对`(u,v)`，并**找到最小化的对`dist(u,v)+dist(v,u)`**，因为这对表示在从`u`到`u`和 weight的循环上`dist(u,v)+dist(v,u)`。如果图形还允许自环（一条边`(u,u)`），您还需要单独检查它们，因为算法没有检查这些环（并且只有它们）。

**伪代码：**

```
run Floyd Warshall on the graph
min <- infinity
vertex <- None
for each pair of vertices u,v
    if (dist(u,v) + dist(v,u) < min):
           min <- dist(u,v) + dist(v,u)
           pair <- (u,v)
return path(u,v) + path(v,u) 
```

`path(u,v) + path(v,u)`实际上就是找到从u到v再从v到u的路径，就是一个循环。

算法运行时间是`O(n^3)`，因为 floyd-warshall 是瓶颈，因为循环需要`O(n^2)`时间。

我认为这里的正确性是微不足道的，但是如果您不同意我的观点，请告诉我，我会尝试更好地解释它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T10:27:09.587

> 我的算法正确吗？

不，让我举一个反例。想象一下，您从 开始 DFS `u`，有两条路径from to`p1`和1 条路径from back to ，比.`p2``u``v``p3``v``u``p1``p2`

假设您从`p2`路径开始`v`，然后走回`u`路径`p3`。发现了一个周期，但显然不是最少的。然后你继续`u`走`p1`路径探索，但由于`v`完全探索，DFS结束时没有找到最小循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T04:13:07.930

“对于每个顶点，它可能指向它的一个祖先，从而形成一个循环”

我认为它可能指向它的任何祖先，这意味着 N

另外，当你从它的dfs出来时，你将如何标记顶点，你可能会从其他顶点再次来到那里，这将是另一个循环。所以这不再是 (n+m) dfs。

1.  所以你的算法是不完整的
2.  同样在这里

3.在一个dfs中，我认为顶点应该是看不见的，或者是检查的，并且对于检查，你可以存储到起始顶点的路径的最小权重。因此，如果在其他阶段您找到了该顶点的边，您就不必再搜索这条路径了。此 dfs 将找到包含第一个顶点的最小有向循环。它是 O(n^2) (O(n+m) 如果你将图形存储为列表)

因此，如果从任何其他顶点执行此操作，它将是 O(n^3) (O(n*(n+m))

对不起，我的英语，我不擅长术语

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-26T09:12:19.450

我做了类似的事情，但我没有为 dfs 使用任何访问过的数组（这是我的算法正常工作所必需的），因此我意识到我的算法具有指数复杂性。

由于您要找到所有周期，因此不可能在小于指数的时间内找到所有周期，因为可能有 2^(e-v+1) 个周期。

# java - 用字符串调用类

> ID：10456936
> 
> 赞同：-2
> 
> 时间：2012-05-04T22:29:47.983
> 
> 标签：java

我可能被误解了，我想创建对象并使用字符串指定对象是哪个类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:32:45.127

是的，您可以为此使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

要上课，请使用

```
// if your class is in package com.foo and is named Bar
Class<?> klass = Class.forName("com.foo.Bar"); 
```

阅读教程以获取更多详细信息。

# actionscript-3 - 在 Flash Builder 4.6 移动项目中使用数字输入字段显示总计

> ID：10456938
> 
> 赞同：0
> 
> 时间：2012-05-04T22:29:54.677
> 
> 标签：actionscript-3, flash, apache-flex, builder, flex4.6

我是 Flash Builder 的新手，但到目前为止一切都很好。我想要完成的是使用 5 个数字输入字段来计算总数。首先这是我正在尝试开发的一个移动项目，我已经创建了 UI，我只需要使用这些数字字段并在其下方计算总数的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:18:33.243

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955"
               minHeight="600">
    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <fx:Script>
        <![CDATA[
            import spark.events.TextOperationEvent;

            [Bindable]
            protected var total:Number = 0;

            protected function inputChangeHandler(event:TextOperationEvent):void
            {
                var n:Number;
                total = 0;

                n = Number(input1.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input2.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input3.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input4.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input5.text);
                if (!isNaN(n))
                    total += n;
            }
        ]]>
    </fx:Script>

    <s:TextInput id="input1"
                 change="inputChangeHandler(event)" />
    <s:TextInput id="input2"
                 change="inputChangeHandler(event)" />
    <s:TextInput id="input3"
                 change="inputChangeHandler(event)" />
    <s:TextInput id="input4"
                 change="inputChangeHandler(event)" />
    <s:TextInput id="input5"
                 change="inputChangeHandler(event)" />

    <s:Label text="{total}" />

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:04:23.350

```
 <?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Transaction" xmlns:components="components.*"
        viewDeactivate="callout.close()"
        xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>
        <s:RadioButtonGroup id="PaymentMethod"/>
        <components:MyCalloutComp id="callout" height="200" close="location.text=event.data" verticalPosition="after"/>
    </fx:Declarations>
    <s:Label x="17" y="15" color="#1294E7" fontSize="18" fontWeight="bold" text="Method of Payment"/>
    <s:RadioButton x="291" y="46" label="CREDIT CARD" groupName="PaymentMethod"/>
    <s:RadioButton x="11" y="46" label="CASH" groupName="PaymentMethod"/>
    <s:RadioButton x="144" y="47" label="CHECK" groupName="PaymentMethod"/>
    <s:Label x="26" y="90" text="Card Type"/>
    <s:Button x="686" y="413" width="82" label="Print"/>
    <s:Button x="800" y="413" width="96" label="Process"/>
    <s:TextArea x="25" y="175" height="38" maxChars="7"/>
    <s:Label x="25" y="159" text="Drivers License #"/>
    <s:TextInput softKeyboardType="number" x="616" y="34" width="175"/>
    <s:TextInput softKeyboardType="number" x="847" y="33" width="154"/>
    <s:TextInput softKeyboardType="number" x="616" y="106" width="175"/>
    <s:TextInput softKeyboardType="number" x="847" y="103" width="154"/>
    <s:TextInput softKeyboardType="number" x="616" y="180" width="175"/>
    <s:Label x="638" y="17" text="Towing Charge"/>
    <s:Label x="870" y="16" text="Mileage Charge"/>
    <s:Label x="656" y="88" text="Labor Charge"/>
    <s:Label x="849" y="86" text="Extra Person Charge"/>
    <s:Label x="636" y="162" text="Special Equipment"/>
    <s:TextInput softKeyboardType="number" x="847" y="178" width="154"/>
    <s:Label x="867" y="160" text="Storage Charge"/>
    <s:Label x="800" y="264" text="Subtotal"/>
    <s:Label x="815" y="311" fontSize="19" fontWeight="bold" text="Total"/>
    <s:TextInput softKeyboardType="number" x="262" y="106" width="320"/>
    <s:Label x="265" y="89" text="Credit Card Number"/>
    <s:Label x="422" y="159" text="Expiry Date"/>
    <s:TextArea x="622" y="321" width="139" height="38"/>
    <s:DateSpinner x="295" y="274"/>
    <s:TextInput id="location" x="22" y="107" width="205" editable="false" enabled="true"
                 focusIn="callout.open(this.location,true)" text="Select..."/>
</s:View> 
```

# php - 学说本机sql查询更新

> ID：10456945
> 
> 赞同：0
> 
> 时间：2012-05-04T22:30:23.397
> 
> 标签：php, mysql, doctrine, doctrine-1.2

我需要帮助。我需要使用学说 1.2 获取更新 sql 查询的结果

我用谷歌搜索，找到了一种使用学说进行本机 sql 查询的方法

```
$preparequerystring = "UPDATE mdw_reportes_operacion SET mmaplicado = 2.742495126705653 WHERE id = 5294;";
         $con = Doctrine_Manager::getInstance()->connection();
         $st = $con->executeUpdate($preparequerystring,array(false));
         print_r($st); 
```

我想知道如何检索有关我正在执行的查询的一些信息。我试过了

```
$result = $st->fetch(); 
```

但它返回 500 内部服务器错误。

在执行 UPDATE 查询时检索有关查询的信息的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:35:57.593

为什么不使用[来自学说的默认更新](http://readthedocs.org/docs/doctrine/en/latest/en/manual/dql-doctrine-query-language.html#update-queries)而不是行 sql ？

```
$q = Doctrine_Query::create()
        ->update('MdwReportesOperacion')
        ->set('mmaplicado', '2.742495126705653')
        ->where('id = ?', array(5294));

$rows = $q->execute();

echo $rows; 
```

**编辑：**

我不知道如何从原始教义查询中检索结果，但您仍然可以使用 pdo 查询：

```
// update the way you want to retrieve database information
$database = sfYaml::load(dirname(__FILE__).'/../config/databases.yml');
$param = $database['all']['doctrine']['param'];
$conn = new PDO($param['dsn'], $param['username'], $param['password']);

// and then perform the query and retrieve the result
$rows = $conn->exec("UPDATE mdw_reportes_operacion SET mmaplicado = 2.742495126705653 WHERE id = 5294;");
echo $rows; 
```

# html - 用什么作为字符串分隔符？

> ID：10456947
> 
> 赞同：0
> 
> 时间：2012-05-04T22:30:41.387
> 
> 标签：html, regex, drop-down-menu

我将放置某种分隔符来定义字段标签、字段数据和*下拉选项文本中的*单独字段之间的边界。这将用于解析文本以获取侧面视觉效果。用户将能够看到分隔符。

## 我应该使用什么作为用户不会注意到但在正则表达式中仍然很容易区分的分隔符？

我正在考虑使用方括号（数据中不会有括号，也可以筛选其他分隔符）。

```
[ --select some option-- ]
 | [name] Travis [number] 9801 [root] 99 | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:42:01.747

如果这只是将数据与元素相关联以便在客户端处理，更好的方法可能是将此信息存储在数据属性中。例如：

```
<select>
    <option value="1" data-name="Travis" data-number="9801" data-root="99">Travis</option>
</select> 
```

然后 JavaScript 可以使用数据属性（使用 jQuery it's `yourOption.data('root')`，而使用纯 JavaScript，您可以像使用普通属性一样使用它），除非他查看您的源，否则用户甚至不会知道它的存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T22:34:21.820

考虑将数据放入 OPTION 元素的值中......您甚至可以在那里使用 JSON，例如：

```
<option value="{name:Travis, number:9801, root:99}">Travis 9801</option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:35:21.967

我不知道方括号是否是分隔符的好选择，主要是因为您只会使用左括号或右括号，并且文本看起来不完整（例如`Value1 ] Value2 ] Value 3`）。

就个人而言，我更喜欢使用竖线 ( `|`) 作为分隔符，因为它不是常用字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T23:08:23.260

不要将数据存储在 GUI 字符串中。如果你的老板要求你停止在下拉选项中显示“根”，告诉他你必须重写你的数据模型是愚蠢的。数据不喜欢存在于字符串中——它们是不透明的、缓慢的、不可能使类型安全的，并且容易受到注入攻击。

您的程序需要了解一个名叫 Travis 的人，编号为 9801，root 为 99，因此以编程方式保留该数据并从中生成您的选项字符串（格式化为您喜欢的任何格式）。

# ruby - 如何在 ruby 中使用各种语言对输入进行子串化？

> ID：10456949
> 
> 赞同：0
> 
> 时间：2012-05-04T22:30:45.007
> 
> 标签：ruby, unicode

给定一个字符串，它可能包含英语或日语（宽字符）或其他语言

我怎样才能得到这个字符串的第一个字符/子字符串？

例如：“给予”=>“G”“日本”=>“日”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:08:08.337

只要您在字符串上设置了正确的编码，它就内置在 ruby​​ 中：

```
$ ruby -ve 'p "日本".encoding, "日本"[0]'
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]
#<Encoding:UTF-8>
"日" 
```

无需使用 mb_chars 或 ActiveRecord。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:40:28.717

You can use ActiveSupport's [`Chars` class](http://api.rubyonrails.org/classes/ActiveSupport/Multibyte/Chars.html)

```
string = "日本"
string.mb_chars[0]
=> "日" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:47:07.260

如果您有“ActiveRecord”，则可以使用 mb_chars。

或者您可以使用标准库：

```
str = '日本'
str.codepoints.take(1)
#日 
```

'codepoint' 通过字符串的实际编码给出一个枚举器，而 'take' 将采用你想要的任意数量的字符。或者你可以使用

```
str.codepoints.to_a[0] 
```

它将字符串的编码转换为数组。它适用于短字符串，但不适用于大字符串。

# jquery - 获取多个选择元素的最后一个选择值

> ID：10456954
> 
> 赞同：10
> 
> 时间：2012-05-04T22:31:18.687
> 
> 标签：jquery, select

我有许多选择框已设置为接受多个值。无论如何，我可以使用 jQuery 来获取最后选择的值吗？我尝试过使用以下内容：

```
var latest_value = $("option:selected",this).val(); 
```

它什么也没返回。我只想要最后一个选择的值而不是值数组。

先感谢您

按照这里的要求，我已经将列表剪掉了，因为它太长了：

```
<select id="style-list" name="style-list[]" class="attrs" multiple="multiple">
    <option value="7">2 Pack</option>
    <option value="10">3 Pack</option>
    <option value="12">4 Pack</option>
</select> 
```

然后在页面顶部我有以下内容（我有 8 个，但我展示了一些，以便您可以看到我正在使用多选小部件的多个实例：

```
$(document).ready(function(){

    $("#product-list").multiselect({
       selectedList: 4,
       noneSelectedText: "Product",
       minWidth: 190  
    }).multiselectfilter();

    $("#style-list").multiselect({
       selectedList: 4,
       noneSelectedText: "Style",
       minWidth: 190  
    }).multiselectfilter();

    $("#feature-list").multiselect({
       selectedList: 4,
       noneSelectedText: "Features",
       minWidth: 190  
    }).multiselectfilter();

}); 
```

然后我在一个单独的 js 文件中有这个：

```
$(function(){

    $(".attrs").on("multiselectclick", function(event, ui){

    var latest_value = $('option', this).filter(':selected:last').val(); 
    alert (latest_value);

    var view = $("#currentview").val();
    var page = 1;

    run_ajax(view,page);

    });

}) 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T22:36:33.213

Use the [`:last`](http://api.jquery.com/last-selector/) selector:

```
var latest_value = $("option:selected:last",this).val(); 
```

* * *

It *may* be that `this` in the context of the callback function doesn't refer to the `<select>` element itself, but instead to an element within it, so try the following:

```
var latest_value = 
$(this).closest('select').find('option').filter(':selected:last').val(); 
```

It may also be worth calling `console.log(this);` inside the callback function, just so you know what element you're actually working with.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-14T10:10:15.193

使用最后一个函数：像这样

```
$("#style-list option:selected").last().val() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-19T14:09:20.057

这是使用 Jquery 从多个选择列表中获取最新选择的选项的代码：

```
var selected;
$(document).ready(function() {
$('#SELECT_ID').on('click', function() {
var latestSelected;
if (selected) {
    var currentOptionsValue = $(this).val();
    latestSelected = currentOptionsValue.filter(function(element) {
    return selected.indexOf(element) < 0;
  });
}
selected = $(this).val();
console.log( "latest selected option : " + latestSelected);
});
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-19T11:16:45.493

是的，正如@KannanK 所说，上面的答案没有给出正确的值，因为它是根据下拉显示顺序存储值，所以如果从下到上选择，则会给出错误的值。

我有一个更好的逻辑来实现这一点。下拉列表的每次更改都会存储到一个全局变量中，这样我们就可以在**differOpt**变量中获得最后选择的值。

```
var lastSelectedValues = [];
$('#yourID').change(function(e) {
    debugger;
    var currentSelVals = $('#yourID').val();
    var differOpt =arr_diff(currentSelVals,lastSelectedValues);
    lastSelectedValues = currentSelVals;
});
function arr_diff (a1, a2) {
    var a = [], diff = [];
    for (var i = 0; i < a1.length; i++) {
        a[a1[i]] = true;
    }
    for (var i = 0; i < a2.length; i++) {
        if (a[a2[i]]) {
            delete a[a2[i]];
        } else {
            a[a2[i]] = true;
        }
    }
    for (var k in a) {
        diff.push(k);
    }
    return diff;
} 
```

**更新一个更好的解决方案** ，我们可以使用 onChange 选项它提供正确的值或者选择/取消选择

```
$(function () { $('#datadownAutpState').multiselect(
    onChange: function(option, checked) {
        alert(option.val + ' option ' + (checked ? 'selected' : 'deselected'));
    }
});}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-11T16:37:49.090

据我了解，您只需要稍微更新您的 JS 文件

```
$(function(){

    $(".attrs").on("multiselectclick", function(event, ui){

        var latest_value = ui.value; 
        alert (latest_value);

        var view = $("#currentview").val();
        var page = 1;

        run_ajax(view,page);

    });

}) 
```

第二个参数`ui`具有以下值：

```
{
    value: 'some value',
    text: 'option label',
    checked: true //whether option is selected or deselected
} 
```

# asp.net-mvc-3 - MVC3 razor 创建 HtmlButtonExtension 时出错

> ID：10456956
> 
> 赞同：2
> 
> 时间：2012-05-04T22:31:25.347
> 
> 标签：asp.net-mvc-3, razor

我正在尝试使用[这个在我的页面上创建一个自定义 html 按钮](https://stackoverflow.com/questions/5955571/theres-no-html-button)

```
public static class HtmlButtonExtension 
{
  public static MvcHtmlString Button(this HtmlHelper helper, string text,
                                     IDictionary<string, object> htmlAttributes)
  {
      var builder = new TagBuilder("button");
      builder.InnerHtml = text;
      builder.MergeAttributes(htmlAttributes);
      return MvcHtmlString.Create(builder.ToString());
  }
} 
```

当我单击此按钮时，我想将 recordID 传递给我的操作

下面给出的是我添加到剃刀视图中的内容

@Html.Button("删除", new {name="CustomButton", recordID ="1" })

但我无法显示这个按钮，而且它正在抛出错误

```
'System.Web.Mvc.HtmlHelper<wmyWebRole.ViewModels.MyViewModel>' does not contain a definition for 'Button' and the best extension method overload 'JSONServiceRole.Utilities.HtmlButtonExtension.Button(System.Web.Mvc.HtmlHelper, string, System.Collections.Generic.IDictionary<string,object>)' has some invalid arguments 
```

有人可以帮我找出实际的错误吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:38:19.620

You're passing an anonymous object, not an `IDictionary<string, object>` for `htmlAttributes`.

You can add an additional overload with `object htmlAttributes`. This is how they do it in the built-in ASP.NET MVC Html Helpers:

```
public static class HtmlButtonExtension 
{    
  public static MvcHtmlString Button(this HtmlHelper helper, string text,
                                     object htmlAttributes)
  {
      return Button(helper, text, HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));
  }

  public static MvcHtmlString Button(this HtmlHelper helper, string text,
                                     IDictionary<string, object> htmlAttributes)
  {
      var builder = new TagBuilder("button");
      builder.InnerHtml = text;
      builder.MergeAttributes(htmlAttributes);
      return MvcHtmlString.Create(builder.ToString());
  }

} 
```

# java - 客户看不到新记录

> ID：10456957
> 
> 赞同：0
> 
> 时间：2012-05-04T22:31:27.253
> 
> 标签：java, mysql, percona

我在网络上运行我的 java 应用程序的两个客户端时遇到问题，第一个客户端插入记录第二个客户端可以在刷新结果集时看到它，现在当第二个客户端插入新记录时，第一个客户端即使在之后也看不到该记录刷新，当第一个客户端关闭应用程序并重新运行它时，从第二个客户端正常记录！！！！！！！所以发生了什么事 ？我如何监控他们两个来追踪我的问题？注意：在 COMMIT 之后将 AutoCommit 设置为 true 时，一切正常。我需要在 my.cnf 上进行任何额外配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:33:26.100

第一个客户端从不提交其事务，即使它只读取（选择）它保持连接和事务打开，因此刷新时它将处于“旧事务状态”。确保客户端获得一个新的结果集（不要只是刷新它）或更简单 - 只需将 AutoCommit 设置为 true 即可。

编辑：拿走了我现在认为错误的第一个答案。（我说第二个客户没有提交，我有点误读了这个问题。）

# javascript - 为什么 url 中的“#”会阻止 jquery 脚本执行？

> ID：10456958
> 
> 赞同：0
> 
> 时间：2012-05-04T22:31:28.440
> 
> 标签：javascript, jquery, html

我正在使用“DynamicPage”jQuery 插件来使我的页面在导航时不会重新加载。在索引页面上是一个名为“Coin-Slider”的图像滑块插件。动态页面工作正常，除非我单击返回图像滑块所在的索引页面。出于某种原因（据我所知），投币滑块就绪功能在返回索引时未激活。可能与 URL 有关，因为 host.com/index.php 有效，但 host.com/#index.php 无效。有什么理由这样做吗？我尝试在 js 文件的 DynamicPage 函数中包含 ready 函数，以便在页面更改时执行，但它没有帮助。页面包含在下面。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="css.css" rel="stylesheet" type="text/css" />
        <title>Liberty Design, Scarborough</title>
        <script type="text/javascript" src="jquery-1.7.2.js"></script>
        <script type='text/javascript' src='js/jquery.ba-hashchange.min.js'></script>
        <script type='text/javascript' src='js/dynamicpage.js'></script>
        <script type="text/javascript" src="coin-slider/coin-slider.min.js"></script>
    </head>
    <body>
        <div id="nav-back"></div>
        <div id="wraps">
            <div id="left-wrap"></div>
            <div id="right-wrap"></div>
        </div>
        <div style="background:url(images/layout/shadow-bottom.png) no-repeat bottom center; width:900px; margin:0 auto; padding-bottom: 26px;">
            <div id="page-wrap">
                <div id="header">
                    <div id="banner">
                        <div id="social"><a href="https://www.facebook.com/pages/Liberty-Retreat/195182670529660"><img src="images/layout/facebook.png" alt="Like us on Facebook!" /></a></div>
                    </div>
                </div>
                <navbar>
                    <div id="nav">
                        <div style="background:url(images/layout/gradient-up.png) repeat-x;height:20px;position:relative;top:-20px; z-index:999;"></div>
                        <ul id="navbar">
                            <li><a href="index.php">Home</a></li>
                            <li><a href="test.php">Facilities</a></li>
                            <li><a href="#">Staff</a></li>
                            <li><a href="#">Where are we?</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>
                </navbar>
                <section id="main-content">
                    <div id="guts">           
                        <!-- Content Start -->
                        <div style="background:url(images/layout/sides.png) center center no-repeat; height:373px;">
                            <div id="gamesHolder">
                                <div id="games">
                                    <img src="images/banner_img/1335800583.png" alt="Welcome" />
                                    <span>
                                        <b>Welcome</b><br/>
                                        Welcome to Liberty
                                    </span>
                                    <img src="images/banner_img/1335800633.png" alt="shop front" />
                                    <span>
                                        <b>shop front</b><br/>
                                        this is the front of the shop
                                    </span>
                                    <img src="images/banner_img/" alt="staff #3" />
                                    <span>
                                        <b>staff #3</b>
                                        <br/>this is the description for staff #3
                                    </span>
                                    <img src="images/banner_img/" alt="staff #1" />
                                    <span>
                                        <b>staff #1</b><br/>
                                        this is staff #1
                                    </span>
                                    <img src="images/banner_img/" alt="asdas" />
                                    <span>
                                        <b>asdas</b><br/>
                                        sdasdas
                                    </span>       
                                </div>
                            </div>
                        </div>
                       <script>
                            $(document).ready(function() {
                                $('#games').coinslider({ navigation: true, height:325, width: 595, hoverPause: true, delay: 5000,});
                            });
                        </script>
                    </div>
                </section>
                <div id="footer">
                    <!-- Cosmetics for the footer -->
                    <div id="footer-back"></div>
                    <div id="footer-wraps">
                        <div id="footer-left-wrap"></div>
                        <div id="footer-right-wrap"></div>
                    </div>
                    <div style="background:url(images/layout/gradient-up.png) repeat-x;height:20px;position:relative;top:-20px;"></div>
                    <center style="position:relative; top:-8px; color:#999;">Liberty Design, Scarborough - Website by Chain.</center>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:39:09.540

Ok, mydomain.com and mydomain.com/#anything are the same, they point to your default file which can be index.php, index.html or whatever. The browser doesn't refresh while it navigates to the same file but diffrent hash tags like: from file#hashA to file#hashB or from file to file#hashRandom or from file#index.php to file. Since the page doesn't refresh (gets loaaded) the document ready doesn't gets fired either (it already got fired the first time the page got loaded).

First fix to your problem: instead of linking to mydomain.com/#index.php link to mydomain.com or mydomain.com/index.php

Second fix is:

```
<script>
$(document).ready(function() {
  var sliderInit = false;

  $('#games').coinslider({ navigation: true, height:325, width: 595, hoverPause: true, delay: 5000,});
  // Adding fix
  $('#idOfLinkThatGetsClicked').click(function () {

    if (!sliderInit) {
      $('#games').coinslider({ navigation: true, height:325, width: 595, hoverPause: true, delay: 5000,});
      sliderInit = true;
    }
  });
});
</script> 
```

# c# - 在文件被删除之前访问文件

> ID：10456961
> 
> 赞同：7
> 
> 时间：2012-05-04T22:31:49.980
> 
> 标签：c#, windows, .net-4.0, filesystemwatcher

使用事件时是否可以在文件被删除之前访问文件`FileSystemWatcher.OnDeleted`？

我将有关文档本身的一些数据存储在其元数据中，并且在删除之前我需要该信息。

如果可能的话，任何想法如何在有或没有`FileSystemWatcher`的情况下完成此任务？

**更新 ：//**

我意识到将数据存储在文件中是不好的，因为当文件被删除时我无法访问它。

**解决方案**：重写我的应用程序以将数据存储在本地数据库（sqlite/xml 或类似的东西）中，因为我在创建/重命名/更新/删除文件时获得完整路径和名称，更新数据库会更容易文件的记录。

感谢大家的想法和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:42:56.550

> 使用 FileSystemWatcher.OnDeleted 事件时，是否可以在文件被删除之前访问文件？

该事件在文件删除之后而不是之前触发，因此引发此事件时您将无法访问该文件。

> 如果可能的话，任何想法如何做到这一点？

我会改用该`OnChanged`事件，每次文件更改时都会触发该事件。基本上，每次文件更改时，您都会读取文件元数据。如果文件经常更新，这可能会有点麻烦，但应该允许您在删除文件之前拥有最新的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T07:22:04.060

```
FileSystemWatcher1 = Your Main Watcher.
FileSystemWatcher2 = RecycleBin Watcher

If the FileSystemWatcher1 Deleted file == the FileSystemWatcher2 Created File
{
    //Do what you want with the FileSystemWatcher2.FullPath
} 
```

# objective-c - 实现 UIWebView 以加载本地 html 时出错

> ID：10456963
> 
> 赞同：0
> 
> 时间：2012-05-04T22:32:03.647
> 
> 标签：objective-c, ios, xcode

我正在尝试将 UIWebView 添加到我当前的 UIScrollView。UIWebView 应该访问本地 html 文件“index.html”。我在运行时遇到错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter' 
```

这是我的代码：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:scrollViewFrame];
    NSString *indexPath = [NSBundle pathForResource:@"index" ofType:@"html" inDirectory:@"Addition"];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:indexPath]]]; 
```

我确实有“添加”文件夹（不是组；从我的项目中的“添加”导入）。

提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:14:37.547

你检查`indexPath`断点还是`NSLog`？看起来您的文件不存在（可能是错字？）-

编辑

好的，我刚刚测试成功。尝试这个：

1.  从您的项目中删除所有 Web 文件。
2.  将 web 目录复制到项目文件夹中的正确位置。
3.  从Finder拖到Xcode，不要复制，创建文件夹引用

还有一个警告：模拟器和设备之间的**大写资源名称**可能存在差异。尝试始终使用小写字母。

此外，您也许应该更正从捆绑包中提取资源的命令。代替

```
[NSBundle pathForResource... 
```

它应该是

```
[[NSBundle mainBundle] pathForResource... 
```

# facebook - Facebook publish_actions 权限不起作用

> ID：10456965
> 
> 赞同：1
> 
> 时间：2012-05-04T22:32:33.943
> 
> 标签：facebook, facebook-graph-api

在我从用户那里获得身份验证后，我向他的活动添加了从我的网站阅读文章的操作，我收到了这个错误:(

```
"(#100) The Action Type lincinewsapp:Read is not approved, so app 223239061119552 can only publish to administrators, developers, and testers of the app.  User 100003803199829 is not one of those roles." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:32:52.097

抱歉，这是我的错误，在添加操作后，Facebook 需要您提交操作以供其他用户使用，否则它将仅供应用程序的管理员、开发人员和测试人员使用。

# php - Paypal IPN - 在数据库中存储数据、更新和删除

> ID：10456969
> 
> 赞同：0
> 
> 时间：2012-05-04T22:32:58.390
> 
> 标签：php, mysql, database, paypal, paypal-ipn

我正在使用[此示例](http://www.evoluted.net/thinktank/web-development/paypal-php-integration)将来自 PayPal 的信息存储在数据库中，我的问题是数据库为同一笔销售创建了两条记录，一条状态为“待定”，一条状态为“已完成”，两者都是同样的销售。

如何更改这部分代码，所以如果有相同的“txn_id”销售，我只需更新“payment_status”行或在使用新信息更新之前删除整个内容。请注意，有两行会有所不同，“payment_status”和“createdtime”。

```
function updatePayments($data){ 
    global $link;
    if(is_array($data)){                
        $sql = mysql_query("INSERT INTO `payments` (txnid, payment_amount, payment_status, item_name, receiver_email, payer_email, custom, itemid, createdtime) VALUES (
                '".$data['txn_id']."' ,
                '".$data['payment_amount']."' ,
                '".$data['payment_status']."' ,
                '".$data['item_name']."' ,
                '".$data['receiver_email']."' ,
                '".$data['payer_email']."' ,
                '".$data['custom']."' ,
                '".$data['itemid']."' ,
                '".date("Y-m-d H:i:s")."' 
                )", $link);
    return mysql_insert_id($link);
    }
} 
```

数据库结构

```
CREATE TABLE IF NOT EXISTS `payments` (
  `id` int(6) NOT NULL AUTO_INCREMENT,
  `txnid` varchar(20) NOT NULL,
  `payment_amount` decimal(7,2) NOT NULL,
  `payment_status` varchar(25) NOT NULL,
  `item_name` varchar(50) NOT NULL,
  `receiver_email` varchar(50) NOT NULL,
  `payer_email` varchar(50) NOT NULL,
  `custom` varchar(25) NOT NULL,
  `itemid` varchar(25) NOT NULL,
  `createdtime` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:38:02.320

创建一个`UNIQUE INDEX`on `txn_id`（如果尚不存在），然后使用其中一个[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)或[`REPLACE`](http://dev.mysql.com/doc/en/replace.html)代替您现有的[`INSERT`](http://dev.mysql.com/doc/en/insert.html).

* * *

**更新**

在您的情况下，添加唯一索引：

```
ALTER TABLE payments ADD UNIQUE INDEX (txnid); 
```

然后，附加到`INSERT`语句的末尾：

```
ON DUPLICATE KEY UPDATE payment_status = '".$data['payment_status']"' 
```

如果要删除现有记录并将其替换为新记录，只需将单词更改`INSERT`为`REPLACE`。

# iphone - 几小时前的unix时间戳

> ID：10456974
> 
> 赞同：0
> 
> 时间：2012-05-04T22:33:31.743
> 
> 标签：iphone, objective-c, ios, ipad, nsdate

我有以下代码：

```
 NSDate *commentPostedDate = [[NSDate alloc] initWithTimeIntervalSince1970:[self.newsFeedStream_.timestamp_ intValue]];
    NSLog(@"TIMESTAMP IS %@", self.newsFeedStream_.timestamp_);

    int interval = (int) [[NSDate date] timeIntervalSinceDate:commentPostedDate] / 60;
    [commentPostedDate release];

    NSString *timePosted = [NSString stringWithFormat:@"%d hours ago", interval]; 
```

然而，这似乎并没有在几个小时前返回正确的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:40:47.267

UNIX timestamps are usually in seconds, so why are you dividing by 60 if you want hours?

There are 3600 seconds in an hour, not 60.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:41:17.833

`NSTimeInterval`是一个`double`包含秒数的值。特别是，您应该除以一小时内的秒数，即`60*60`：

```
int interval = (int) ([[NSDate date] timeIntervalSinceDate:commentPostedDate] / 3600); 
```

# java - 我的分隔符有问题

> ID：10456976
> 
> 赞同：-4
> 
> 时间：2012-05-04T22:33:47.423
> 
> 标签：java, java.util.scanner, runtime-error

```
 import java.util.*;
    import java.io.*;
    import java.*;          

    public class b {

   static void lireBddParcs(String nomFichier) throws IOException
    {
        LinkedHashMap parcMap = new LinkedHashMap<Parc,Collection<Manege>> ();
        boolean existeFichier = true;        
        FileReader fr = null;

        try
        {
            fr = new FileReader (nomFichier);
        }        
        catch(java.io.FileNotFoundException erreur)
        {
            System.out.println("Probleme rencontree a l'ouverture du fichier" + nomFichier);
            existeFichier = false;
        }        
        if (existeFichier)
        {
            Scanner scan = new Scanner(nomFichier).useDelimiter("\t");        
            while (scan.hasNextLine())
            {        
                   String nom = scan.next();
                   String ville = scan.next();
                   String etat = scan.next();
                   Parc p = new Parc(nom, ville, etat);
                   parcMap.put(p, null);        
            }
            scan.close();        
        }
    }

        public static void main(String[] args)  throws IOException
        {
          lireBddParcs("parcs.txt");        
        }
    } 
```

parc.txt 包含：

```
Great America   Chicago Illinois
Magic mountain  Los Ageles  Californie
Six Flags over Georgia  Atlanta Georgie
Darien Lake Buffalo New York
La Ronde    Montreal    Quebec
The Great Escape    Lake Georges    New York
Six Flags New Orleans   New Orleans Louisiane
Elitch Gardens  Denver  Colorado
Six Flags over Texas    Arlington   Texas
Six Flags New England   Springfield Massachusetts
Six Flags America   Washington  D.C.
Great Adventure Jackson New Jersey 
```

我明白了：

```
--------------------Configuration: <Default>--------------------
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:907)
    at java.util.Scanner.next(Scanner.java:1416)
    at b.lireBddParcs(b.java:54)
    at b.main(b.java:94) 
```

我一直在尝试修复程序 3 个小时。天哪，我是哑巴。不知道程序有什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:46:13.480

您传递的是文件名 String 而不是 File 对象本身，因此您的 Scanner 正在“扫描”。通过首先从文件字符串创建一个文件，然后将其传递给扫描仪来解决这个问题。

所以不是，

```
Scanner scan = new Scanner(nomFichier) 
```

反而

```
Scanner scan = new Scanner(new File(nomFichier)) 
```

下次，请根据我们的要求对您的问题进行修改。我们是志愿者，您有责任不让理解和回答您的问题变得不必要地困难。

# c# - 无法加载视图状态。正在加载视图状态的控制树必须与用于保存视图状态的控制树匹配

> ID：10456984
> 
> 赞同：1
> 
> 时间：2012-05-04T22:35:14.913
> 
> 标签：c#, asp.net, gridview, dynamic

我有一个gridview，它在其中创建一个带有新gridview的新行，创建第二个gridview的方法是：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "PopExtendedGrid")
    {

    GridView _gridView = (GridView)sender;
int _rowIndex2 = int.Parse(e.CommandArgument.ToString());
GridView _ChildGrid = new GridView();
Control x = _gridView.Rows[_rowIndex2 + 1].Cells[1].Controls[1];
int Oid = int.Parse(((Label)x).Text);
_ChildGrid.DataSource = hs.GetExtendedGrid(Oid);
_ChildGrid.ID = "ChildGrid";
_ChildGrid.AutoGenerateColumns = false;
_ChildGrid.CssClass = "ChildGridS";
_ChildGrid.HeaderStyle.CssClass = "CreateHead";
BoundField one = new BoundField();
one.DataField = "ItemID";
one.HeaderText = "קוד מוצר";
_ChildGrid.Columns.Add(one);

BoundField two = new BoundField();
two.DataField = "ItemName";
two.HeaderText = "שם מוצר";
_ChildGrid.Columns.Add(two);

BoundField three = new BoundField();
three.DataField = "ItemSize";
three.HeaderText = "גודל מוצר";
_ChildGrid.Columns.Add(three);

GridViewRow tr = new GridViewRow(_rowIndex2 + 2 +10*this.GridView1.PageIndex,-1 , DataControlRowType.EmptyDataRow , DataControlRowState.Normal);
TableCell tc = new TableCell();
tc.ColumnSpan = _gridView.Columns.Count;
tc.Controls.Add(_ChildGrid);
tr.Cells.Add(tc);
if ((DataView)Session["dataSource"] != null)
 {
 DataView dv = (DataView)Session["dataSource"];
 this.GridView1.DataSource = dv;
 this.GridView1.DataBind();
 }
                else
                {
                    if (Session["lvl"].ToString() == "high")
                    {
                        PopulateGridViewAdmin();
                    }
                    else
                    {
                        PopulateGridViewUser();
                    }
                }
this.GridView1.Controls[0].Controls.AddAt(_rowIndex2 + 2, tr);
Session["ChildIndex"] = (_rowIndex2 + 2).ToString();
_ChildGrid.DataBind();
  }
} 
```

我认为当我需要执行另一个命令或与gridview相关的东西时，我会像这样删除行：

```
this.GridView1.Controls[0].Controls.RemoveAt(int.Parse(Session["ChildIndex"].ToString())); 
```

然后重新填充mastergridview，但在我有机会这样做之前，这个错误不断弹出：

```
Failed to load viewstate.  The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request.  For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request. 
```

我对此感到非常沮丧，我将非常感激地接受任何答案，提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:57:24.530

您可能不需要跟踪该控件的 ViewState，因为它是动态的，因此请尝试设置`EnableViewState`为 false 并查看是否有帮助。

# mysql - 带公式的 SQL 语句

> ID：10456994
> 
> 赞同：0
> 
> 时间：2012-05-04T22:36:04.130
> 
> 标签：mysql, sql

我正在尝试编写一个 SQL 语句来计算采购订单的总值。

示范时间！

```
SELECT PO_Number, LineItem, Quantity, Cost
FROM POs 
```

假设`PO_Number=484`有 2 个单位，每个单位`LineItem-1`2 美元。还有3个单位，`LineItem-2`每个5美元。有没有办法输出 19 美元？(2 + 2 + 3 + 3 + 3 = 19)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:41:56.950

```
SELECT SUM(Quantity*Cost) WHERE PO_Number = 484; 
```

* * *

**更新**

如果您想显示多个采购订单的总计，您需要按采购订单“分组”您的结果：

```
SELECT SUM(Quantity*Cost)
WHERE PO_Number IN (484,485,486) -- if you want specified ones only, omit for all
GROUP BY PO_Number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:23:40.813

或者...

SELECT PO_Number, SUM(数量*成本) GROUP BY PO_Number;

# javascript - 在javascript中以二进制级别计算

> ID：10456996
> 
> 赞同：-1
> 
> 时间：2012-05-04T22:36:07.583
> 
> 标签：javascript, algorithm, binary

在我的 2D 环境中，玩家可以沿对角线、水平和垂直方向移动。查看下面的网格时，您可以看到玩家（标记为`x`）可以从他（或她 xD）现在所在的位置移动到 8 个不同的位置。

```
 1 | 2 | 3
-----------
 4 | x | 5
-----------
 6 | 7 | 8 
```

而不是将其存储为（这是很多数据）：

```
Go1 = true;
Go2 = true;
Go3 = true;
Go4 = true;
Go5 = true;
Go6 = true;
Go7 = true;
Go8 = true; 
```

我认为最好先将其转换为：

```
11111111 
```

..代表8次真实。考虑到这一点，并且知道二进制数`11111111`（8 位）的十进制表示等于数字：`255`我宁愿转换它并将当前可能移动到的位置存储为`255`.

代码：

```
x = parseInt(11111111);
var bin = x.toInt(2);
document.write(bin);​ 
```

这意味着如果（例如）位置（1、4 和 6）= 玩家左侧有一堵墙，则玩家只能移动到：

```
01101011 
```

可以存储为：`107`.

假设玩家想要移动到 location `3`。这意味着我的脚本必须执行以下操作：

1.  将 3 位当前可能的位置移动到数字转换回二进制
2.  从该二进制代码中获取第三个数字
3.  检查该数字是 1 还是 0

**问题：** 是否可以在不使用 Javascript 来回转换为二进制的情况下进行计算？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:41:26.330

位移，使相关数字是最低有效位，然后测试该值的奇偶校验：

```
function getPositionInRow(rowval, pos) {
    return (rowval >> (8 - pos)) % 2;
} 
```

这将在指定位置返回值，从索引从 1 开始的左侧开始计数。