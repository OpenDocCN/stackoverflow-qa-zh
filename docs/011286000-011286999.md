# StackOverflow 问答 11286000-11286999

# c# - 使用 SMO 库从 C# 中的应用程序运行 .sql 文件

> ID：11286000
> 
> 赞同：5
> 
> 时间：2012-07-01T22:07:11.703
> 
> 标签：c#, .net, sql, sql-server-2008, smo

我正在 C# Visual Studio 2012 RC 中构建一个应用程序。

我必须在应用程序中运行脚本。为此我正在使用。这两个库。我的应用程序的目标 .net 框架是 4.5。

```
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common; 
```

在检查天气数据库是否存在后，我编写了运行脚本的代码。

当我运行代码时，会弹出一个意外的异常。我真的知道这是什么意思。你能帮我摆脱这个例外吗？

我还附上了我的代码和异常预览。

请帮助我...我已经用谷歌搜索了太多。

![在此处输入图像描述](../Images/cc009402aa5e090a9d91fcb1ee7c5a32.png)

```
**Here are the Exception Details.** 
```

System.IO.FileLoadException 未处理 HResult=-2146232799 消息=混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。Source=mscorlib StackTrace：在 System.Reflection.RuntimeAssembly.GetType(String name, Boolean throwOnError, Boolean ignoreCase) 在 System.Reflection.RuntimeAssembly.GetType(RuntimeAssembly 程序集，字符串名称，布尔 throwOnError，布尔忽略Case，ObjectHandleOnStack 类型)。 Microsoft.SqlServer.Management.Common.ServerConnection.GetStatements(String query, ExecutionTypes executionType, Int32& statementsToReverse) 在 Microsoft.SqlServer.Management.Common.ServerConnection 的 Reflection.Assembly.GetType(String name, Boolean throwOnError)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:29:47.870

看起来您正在尝试加载 Microsoft.SqlServer.xxxx.dll 的 .net 2 版本。更新您对 .net4 版本的引用（首选），或将以下咒语添加到`<configuration>`节点下的 app.config

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
  <requiredRuntime version="v4.0" />
</startup> 
```

允许加载 .net 2 程序集。详情请看[这里](http://connect.microsoft.com/SQLServer/feedback/details/643811/net-4-0-compatible-smo)。

# version-control - 自动将每个编译存储在 github 上？

> ID：11286002
> 
> 赞同：1
> 
> 时间：2012-07-01T22:07:32.167
> 
> 标签：version-control, github

我的代码每天由多人（多台机器）多次编译。每次有人完成编译时，我希望每个编译都自动上传到我们的 Github 帐户。基本上，这些编译后的 zip 通过闪存驱动器、电子邮件或保管箱（基于多种条件的任意数量的方式）发送到实际硬件。由于 zip 始终命名相同，因此有时旧版本会在设备上被删除，有时存储在 /old 目录中。我想停止丢失旧版本并保留按时间顺序存储的每个版本的中央存储库。Github 似乎是一个完美的地方。

我当然可以要求每个用户将他们创建的完成的 zip 上传到一个中心位置，但如果可能的话，我希望它是一个自动过程。那么——Github 是否提供这样的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:19:52.737

> Github 似乎是一个完美的地方。

并非如此，因为将大型二进制文件放入*分布式*存储库（即，*整个*克隆的存储库）[不是一个好主意](https://stackoverflow.com/a/3120006/6309)。

要获得特定版本的二进制文件，您必须先从 GitHub 克隆您的“工件”存储库，然后才能选择正确的进行部署。
随着多次交付，该回购将变得越来越大，从而使克隆更长。
但是，如果您只有一个地方可以部署，那么 git fetch 确实只会获得*新*的工件（增量更新）。

但：

*   GitHub 并没有提供无限的空间（同样，随着所有交付，该 repo 会迅速增长）
*   清理存储库（即删除您可能不需要的旧版本的二进制文件）很难。

因此，再次使用 GitHub 或任何其他 DVCS（分布式 VCS）进行交付似乎还不够。

如果您可以设置像[Nexus](http://www.sonatype.org/nexus/)这样的公共工件存储库，那么您将能够交付任意数量的二进制文件，并且您将能够轻松地清理它们（删除它们）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T22:22:25.433

Github 具有附加到存储库的文件的概念（但实际上不在存储库中 - 它们存储在 s3 上），并且有一个用于将文件上传到其中的[api](http://developer.github.com/v3/repos/downloads/)。

您可以将该 API 称为构建过程的一部分。

如果您有一个持续集成服务器在每次提交后构建您的代码，您应该能够将其存储在某个地方，但如果您希望将它们存储在 GitHub 上（而不是 CI服务器硬盘）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T18:13:35.217

虽然 github 非常适合在源代码上进行协作，但它不适用于管理构建及其工件。您最终可能会想看看像[Cloudbees](http://www.cloudbees.com/)这样的公司，它们提供托管构建和集成环境，它们的目标正是源代码管理之外的工作流部分。但这些主要针对 Java 开发，这可能符合您的需求，也可能不符合您的需求。

除此之外，如果您真的只想让很多人可以访问您的构建中的大量带有时间戳的 zip 文件，那么一个好的老式 FTP 服务器可能不足以满足您的需求吗？

# c# - SecurityException：必须将 ECall 方法打包到系统模块中

> ID：11286004
> 
> 赞同：38
> 
> 时间：2012-07-01T22:08:10.330
> 
> 标签：c#, clr, securityexception

我有一个类似于以下的（C#）函数。

```
private static bool SpecialCase = false;

public void Foo()
{
    if (SpecialCase)
    {
        InternalMethod();
        return;
    }

    Console.WriteLine();
}

[MethodImpl(MethodImplOptions.InternalCall)]
private static extern void InternalMethod(); 
```

当我在调试器中使用 .NET Framework 4 执行此操作时，该方法成功地将空白行打印到控制台并返回。当我在调试器之外执行它时，它会引发异常并显示以下消息：

```
System.Security.SecurityException: ECall methods must be packaged into a system module. 
```

当 JIT 编译器编译方法而不是`InternalMethod`调用 (if) 时，似乎会引发异常。有什么我可以做的（例如属性）告诉 CLI 要么不抛出`SecurityException`，要么延迟异常直到方法被实际调用？

用例的旁注：`SpecialCase`当使用 Microsoft .NET Framework 运行时，该字段实际上为 false，而在 CLI 的不同（特定）实现下运行时为 true。在 Microsoft .NET Framework 下运行时，调用`InternalMethod`实际上是无法访问的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-28T03:25:15.130

您可能希望检查[编译器指令作为一个可能的选项](https://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)。与使用运行时“if”不同，这将确定调用是否包含在编译后的代码中，而不是总是将其编译到代码中并尝试确定是否在运行时调用它（这为时已晚，根据您的分析）。

您的用例似乎是一个测试/验证场景，这意味着您不需要将其编译到代码中，除非实际进行内部调用。

请注意，如果您的用例涉及非 .NET 运行时，则应提供更多信息，因为这可能会极大地改变正确答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T00:59:21.973

将属性添加`[ComImport]`到您的类声明

# iphone - 关闭 CCSprite 上的抗锯齿 (Cocos2D iPhone)

> ID：11286006
> 
> 赞同：1
> 
> 时间：2012-07-01T22:08:25.020
> 
> 标签：iphone, objective-c, cocos2d-iphone, antialiasing

当我使用 16x16 图像的 CCSprite 放大时，会出现很多模糊。

该图像是像素艺术，因此意味着像素化，但不会模糊。

我已经尝试`setAntiAliasTexParameters`在精灵的纹理上运行该方法，但它并没有改变任何东西。

这是代码：（mainSprite 是 CCSprite，slide1 是 CCTexture2D）

```
slide1 = [[CCTexture2D alloc] initWithImage:[UIImage imageNamed:@"slide1.png"]];
[slide1 setAntiAliasTexParameters];

[mainSprite setTexture:slide1]; 
```

谢谢，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:13:40.347

使用`setAliasTexParameters`而不是`setAntiAliasTexParameters`. 这应该为您选择的精灵关闭抗锯齿。

# php - PHP WebSocket SSL

> ID：11286009
> 
> 赞同：3
> 
> 时间：2012-07-01T22:08:49.847
> 
> 标签：php, ssl, websocket, ssl-certificate, encryption

我正在尝试使用`wss://`客户端的 -protocol 将我的 PHP WebSocket 库升级到 SSL。但是，我发现自己在试图弄清楚 a）如何设置服务器套接字，以及 b）如何解码传入的消息时不知所措。这是我目前对前者的尝试：

```
$context = stream_context_create();

// local_cert must be in PEM format
stream_context_set_option($context, 'ssl', 'local_cert', $pemFilePath);
// Pass Phrase (password) of private key
stream_context_set_option($context, 'ssl', 'passphrase', $pemPassPhrase);
stream_context_set_option($context, 'ssl', 'allow_self_signed', true);
stream_context_set_option($context, 'ssl', 'verify_peer', false);

$serverSocket = stream_socket_server('ssl://'.$host.':'.$port, $errNo, $errStr, STREAM_SERVER_BIND|STREAM_SERVER_LISTEN, $context); 
```

但是，当使用 SSL 作为服务器协议时，客户端似乎没有发送任何消息，并且在使用 tcp 时，我得到了奇怪的加密数据，尽管我猜测由于我提供了选项，它会被神奇地解密到流上下文。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T17:33:49.877

我在我们的实现中遇到了同样的问题，并找到了一个很好的解决方法。将您的 websocket 服务器放在任何防火墙端口上，并从安全端口端口建立隧道连接。您可以使用具有如下配置的[stunnel ：](http://www.ubuntugeek.com/stunnel-universal-ssl-tunnel-for-network-daemons.html)

```
[websockets]
accept = 8443
connect = 8080 
```

这样，stunnel 完成所有安全性，而您的 websocket 服务器完成所有 websockets。赢！

# php - mySQL 计数内容和自动 +1

> ID：11286010
> 
> 赞同：1
> 
> 时间：2012-07-01T22:08:50.883
> 
> 标签：php, mysql, html

我正在尝试从此页面上对数据进行排序：[http ://www.excelwrestling.com/sortbymostwinsbyweight.php](http://www.excelwrestling.com/sortbymostwinsbyweight.php)

我希望表格按重量排序，然后按该重量获胜最多的名称。另外，我想再添加一列，显示该摔跤手的获胜次数。

这是我从查看教程中得到的，但它们的排序不正确：

```
$query="SELECT *,Winner, COUNT(*) as count FROM results GROUP BY Winner ORDER BY Weight ASC ";
$result=mysql_query($query); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:38:17.910

```
SELECT ww.*
FROM 
        ( SELECT Weight, Winner, COUNT(*) AS Wins 
          FROM results 
          GROUP BY Weight, Winner 
        ) AS ww
    JOIN
        ( SELECT DISTINCT Weight
          FROM results
        ) AS dw
            ON  ww.Weight = dw.Weight
            AND ww.Winner =
                ( SELECT r.Winner
                  FROM results AS r
                  WHERE r.Weight = dw.Weight
                  GROUP BY r.Winner 
                  ORDER BY COUNT(*) DESC
                  LIMIT 1
                ) ; 
```

上的索引`(Weight, Winner)`将有助于查询的效率。

* * *

你也可以通过这个查询得到正确的结果，但我不推荐它，因为它使用了 MySQL 的一些非标准特性和行为，因此将来可能会中断：

```
SELECT Weight, Winner, Wins
FROM 
        ( SELECT Weight, Winner, COUNT(*) AS Wins 
          FROM results 
          GROUP BY Weight, Winner 
          ORDER BY Weight, Wins DESC
        ) AS ww
GROUP BY Weight ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T22:20:06.537

`winner`当您说您的要求是“最胜”时，您只是按 订购。这意味着您应该拥有：

```
SELECT ...
FROM ...
GROUP BY Winner
ORDER BY Weight ASC, count DESC
         ^^^^^^^^^^^^^---- order by the aggregate results. 
```

请注意，我假设您希望权重按升序排列，并按降序排列。

# php - joomla 2.5！JPagination，不确定如何从 getLimitBox $option 中检索值

> ID：11286014
> 
> 赞同：2
> 
> 时间：2012-07-01T22:09:32.943
> 
> 标签：php, joomla, pagination, joomla2.5

因此，我一直在关注有关[JPagination](http://docs.joomla.org/Using_JPagination_in_your_component#orderUpIcon.28.29)的本教程以及有关**JDatabase**`$option`的部分，它在第 2 行有一个变量`"$option.limit"`。（页面上的其他任何地方都没有引用它，我不确定这个值在哪里被声明/初始化）。

```
$db =& JFactory::getDBO();
$lim    = $mainframe->getUserStateFromRequest("$option.limit", 'limit', 14, 'int'); //I guess getUserStateFromRequest is for session or different reasons
$lim0   = JRequest::getVar('limitstart', 0, '', 'int');
$db->setQuery('SELECT SQL_CALC_FOUND_ROWS x, y, z FROM jos_content WHERE x',$lim0, $lim);
$rL=&$db->loadAssocList();
if (empty($rL)) {$jAp->enqueueMessage($db->getErrorMsg(),'error'); return;} 
else {
////Here the beauty starts
$db->setQuery('SELECT FOUND_ROWS();');  //no reloading the query! Just asking for total without limit
jimport('joomla.html.pagination');
$pageNav = new JPagination( $db->loadResult(), $lim0, $lim );
foreach($rL as $r) {
//your display code here
}
echo $pageNav->getListFooter(  ); //Displays a nice footer 
```

我在诸如此类的页面上查看了 joomla 文档，以查看变量是否与 相关，因为[这](http://docs.joomla.org/API16:JPagination/getLimitBox)是设置要显示的内容的数量。但我没有多少运气。`$option``limitBox``limitbox` ![展示盒](../Images/dbdde05f9aee3e3f088fd3b3d40ca498.png)

因此，我想知道您打算如何从JPagination 中的变量`$option`和/或当前选择中获取信息。`LimitBox`

Pastebin 链接到我的[实现](http://pastebin.com/2pG0Zz2x)[24 小时后过期]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:41:09.297

这篇文章在某些方面已经过时了，它最初是为 J1.5 编写的，并且假设了很多关于内部工作的知识。我不会推荐它用于 J2.5。

如果您遵循 J2.5 MVC 并使用它的内置（大部分）部分用户状态机制，那么今天分页基本上是自动的。`JModelList`首先，在 J2.5 中，如果您要显示内容项列表，您的模型应该可以扩展。通过添加处理列表的有用功能进行`JModelList`扩展。`JModel`

这些功能之一是`populateState()`方法，在它的基本状态下，如果您使用`<select>`命名的`limit`. 它通过为您管理基本用户状态来做到这一点，我建议您通读`/administrator/com_contact`和`/libraries/joomla/application/component/modellist.php`（[Joomla API JModelList](http://api.joomla.org/Joomla-Platform/Application/JModelList.html)）。

`populateState()`用于帮助模型以半自动方式跟踪组件的基础知识。除了列表限制外，它还将跟踪搜索字段和排序列及其方向。如果您的扩展需要跟踪其他用户状态或覆盖设置，您可以`populateState()`在模型文件中创建一个 - 只需记住事先调用父级，这样您仍然可以获得内置的好处。例如

```
protected function populateState()
{
    parent::populateState();
    $app = JFactory::getApplication('site');

    /* Do some groovy stuff here
     * like adding our own form variables to the state to use later
     */
    $srid = $this->getUserStateFromRequest($this->context.'.project.srid','srid');
    $this->setState('project.srid', $srid);

} 
```

对于用户状态，您可以[在这篇文章中阅读更多内容（其中还简要介绍了分页）“如何使用用户状态变量”](http://docs.joomla.org/How_to_use_user_state_variables)

# sql - 如何更新查找具有最高值和次高值的日期的语句

> ID：11286016
> 
> 赞同：0
> 
> 时间：2012-07-01T22:09:58.410
> 
> 标签：sql

我需要更改是/否列，其中日列具有最高值和第二高值。

ID 菜单（INT NOT NULL PRIMARY KEY）；天（INT NULL）；是/否(BIT NUL)
100 ; 1; 1101
; 2; 0
102 ; 3；1103
; 4；0
104 ; 5; 0

我应该得到的结果是
Id menu(INT NOT NULL PRIMARY KEY) ; 天（INT NULL）；是/否(BIT NUL)
100 ; 1; 1101
; 2; 0
102 ; 3；1103
; 4；1104
; 5; 1

我可以使用 UPDATE Menu SET YES/NO = 1 WHERE DAY = 4 更改行

但由于日子将继续上升，这意味着我必须在撰写声明之前知道哪一天是最高的一天。如何更新查找具有最高值和第二高值的日期的语句我试过 UPDATE Menu SET YES/NO = 1 WHERE MAX(day)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:55:06.797

测试驱动的查询设计 (TDQD) 再次提供帮助。

### 查找最大天值

```
SELECT MAX(day) FROM Menu 
```

### 查找第二个最大日值

```
SELECT MAX(day)
  FROM Menu
 WHERE day != (SELECT MAX(day) FROM Menu) 
```

第二个最大日是不是最大日值的最大日值。

### 选择不包含第二个最大值或最大值的行

```
SELECT *
  FROM Menu
 WHERE Day < (SELECT MAX(day)
                FROM Menu
               WHERE day != (SELECT MAX(day) FROM Menu)
             ) 
```

这些是需要将是/否位设置为零的行。

### 选择包含第二个最大值或最大值天值的行

```
SELECT *
  FROM Menu
 WHERE Day >= (SELECT MAX(day)
                 FROM Menu
                WHERE day != (SELECT MAX(day) FROM Menu)
              ) 
```

这些是需要将是/否位设置为 1 的行。

### 更新两组行

显然，您可以`SELECT *`用`UPDATE Menu SET Yes_No = 0`（或`1`）替换两组数据。如果您的 DBMS 允许您从要更新的表中进行选择（并非所有 DBMS 都这样做），您可能可以将两者组合成一个操作：

```
UPDATE Menu
   SET Yes_No = (CASE WHEN day < (SELECT MAX(day) FROM Menu
                                   WHERE day != (SELECT MAX(day) FROM Menu))
                      THEN 0
                      ELSE 1 END) 
```

# c# - 转换后的 BitmapImage 不显示在页面上

> ID：11286018
> 
> 赞同：2
> 
> 时间：2012-07-01T22:10:23.210
> 
> 标签：c#, image, windows-phone-7, xaml, rest

我的 Windows Phone 应用程序有问题。当我从 Web 服务获取照片时，我想将其显示为页面上的图像。Web 服务返回一个 byte[] 作为图像数据。

```
Dispatcher.BeginInvoke(() =>
{
    tempImage = new BitmapImage();
    globalWrapper = (PhotoWrapper)JsonConvert.DeserializeObject(
                                      response.Content, typeof(PhotoWrapper));
    tempImage.SetSource(new MemoryStream(globalWrapper.PictureBinary, 0,
                                         globalWrapper.PictureBinary.Length));
    globalWrapper.ImageSource = tempImage;
    PictureList.Items.Add(globalWrapper);
}); 
```

PictureList 是一个 ListBox 定义为：

```
<ListBox Name="PictureList" ItemsSource="{Binding}" Margin="0,0,0,0">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <Button Click="details_Click">
                    <Button.Content>
                        <Image Source="{Binding ImageSource}"></Image>
                    </Button.Content>
                 </Button>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

现在，我的问题是，您如何从 web 服务接收一个 byte[] 作为 JSON 并将其显示在页面上？我觉得我在这里很近，但缺少一些相当基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:22:06.053

如果您确定 byte[] 数据有效，则可能与 BitmapUmage 的[CacheOption](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.cacheoption.aspx)属性有关。此属性控制何时将数据从流中实际加载到位图中。默认为 OnDemand，仅在显示图像时从流中加载数据。您可能想尝试使用 OnLoad 选项，它会立即加载它，从而允许您关闭流。

```
Dispatcher.BeginInvoke(() =>
{
    globalWrapper = (PhotoWrapper)JsonConvert.DeserializeObject(
                                      response.Content, typeof(PhotoWrapper));
    tempImage = new BitmapImage();
    tempImage.BeginInit();
    tempImage.CacheOption = BitmapCacheOption.OnLoad;
    tempImage.SetSource(new MemoryStream(globalWrapper.PictureBinary, 0,
                                         globalWrapper.PictureBinary.Length));
    tempImage.EndInit();
    globalWrapper.ImageSource = tempImage;
    PictureList.Items.Add(globalWrapper);
}); 
```

# iphone - webkit溢出滚动触摸与webkit转换冲突

> ID：11286019
> 
> 赞同：5
> 
> 时间：2012-07-01T22:10:26.970
> 
> 标签：iphone, css, mobile-safari, mobile-webkit

似乎`webkit-transform`在元素上应用属性或其父级`webkit-over-flowing-scrolling: touch`完全破坏了滚动，因为滚动根本不起作用。

有没有人遇到过这个错误并知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:24:32.243

我当前的（hacky）解决方案如下所示：

```
$container.one 'webkitAnimationEnd', ->
  $container.find('.contents').remove()
  $container.append('.contents') 
```

基本上我在动画结束后删除然后重新添加可滚动div的内容。希望有人对此有更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T02:21:03.330

我遇到了完全相同的问题，只有当我放弃`-webkit-transform`并切换到绝对定位时它才会消失。

这很好，除了绝对定位会导致 iOS 上糟糕的性能和断断续续的动画，这在 iOS 6+ 中无法通过以前流行`translateZ`和`translate3D`强制的硬件加速黑客来补救。

我想出了一个 hack，但它是如此可怕和丑陋，以至于你可能不想进一步阅读：

获取我们要应用的元素`-webkit-overflow-scrolling:touch`并将其与我们要应用的元素完全分开`-webkit-transform`。使用`z-index`操作使滚动元素出现在它原来的位置，同时保持`-webkit-transform`使原始容器（现在是一个空容器）自然地动画到位。但在我的情况下，这个 hack 不足，因为可滚动内容会突然出现在动画容器的顶部，而不是随之滑入。

# google-app-engine - Datanucleus 在 Google App Engine 1.7 中使用错误的增强器

> ID：11286020
> 
> 赞同：5
> 
> 时间：2012-07-01T22:10:27.413
> 
> 标签：google-app-engine, jpa-2.0, datanucleus

我很难让 Datanucleus 2 使用 Datanucleus 插件在 Eclipse 中增强 GAE 1.7.0 上的类正常工作。当我按照此处的手动步骤操作时，这在旧版本的 GAE 中运行良好：

[http://www.datanucleus.org/products/accessplatform/guides/eclipse/index.html](http://www.datanucleus.org/products/accessplatform/guides/eclipse/index.html)

但是自从升级以来，GAE 现在包含了这些库（看起来像是它们的较新版本），而且 GAE 有一个可以设置的新“增强器”标志。我无论如何都找不到在 Eclipse 中设置这个标志。当我想要 V2 库和 Datanucleus 根据此错误发生冲突时，GAE 似乎仍然包含 v1 库：

```
Jul 1, 2012 5:59:55 PM org.datanucleus.enhancer.DataNucleusEnhancer <init>
INFO: DataNucleus Enhancer : Using ClassEnhancer "ASM" for API "JPA"
Exception in thread "main" java.lang.NoSuchFieldError: NUCLEUS_CONTEXT_LOADER
    at org.datanucleus.NucleusContext.<clinit>(NucleusContext.java:73)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:171)
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1265) 
```

我尝试了很多不同的东西。我已经尝试使用所有默认值。我尝试将 v2 库添加到 Datanucleus 运行时类路径条目。我已经尝试在 src 和 libs 中删除 GAE 1.7.0 SDK 中的 v1 库。但不知何故，GAE 仍在停止（或试图停止 V1 库。我什至尝试过按照上面链接指定的手动设置配置的旧方法。这有点令人沮丧，因为我现在好像在我根本无法使用这些库的情况下。至少对于旧版本的 GAE，我可以手动将其设置为工作。现在似乎没有任何工作。有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T21:49:17.780

我遇到了同样的错误，并且能够通过以下方式在我的项目中解决它：

*   执行 DavidB 在评论中建议的操作，而不修改首选项中的 DataNucleus JPA 设置。
*   从 war/WEB-INF/lib 中删除所有“V1”jar

要澄清 DavidB 的建议，请打开包含您的项目的目录。将有一个名为“.settings”的文件夹，打开它并编辑 com.google.appengine.eclipse.core.prefs。只需将第三行从*gaeDatanucleusVersion=v1*更改为*gaeDatanucleusVersion=v2*

完成此操作后，从您的 war/WEB-INF/lib 目录中删除以下 jar：

*   datanucleus-appengine-1.0.10.final.jar
*   datanucleus-core-1.1.5.jar
*   数据核-jpa-1.1.5.jar
*   geronimo-jpa_3.0_spec-1.1.1.jar
*   geronimo-jta_1.1_spec-1.1.1.jar
*   jdo2-api-2.3-eb.jar

重新启动eclipse，你应该很高兴。

# jquery - 如果javascript中的条件不起作用

> ID：11286021
> 
> 赞同：3
> 
> 时间：2012-07-01T22:10:41.960
> 
> 标签：jquery

我在 JS 中有这段代码：

```
if($('.log input:checked')) 
    {
        alert('login checked');
        alert('do what you want');
    }
    else 
    {
    alert('login not checked');
        alert('you can not do what you want');
} 
```

但它不能正常工作。IF ELSE 条件是否错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:11:06.367

```
if( $('.log input').is(':checked') ) { // true/false 
```

您可以[.is()](http://api.jquery.com/is)以 jQuery 方式使用（它是描述性的），并将针对匹配的元素返回一个布尔值。但是你也可以使用 JS`.length`属性。

**一个更好的解决方案**（@macek 建议）

```
if( $('.log input').prop('checked') ) { // true/false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:20:08.437

虽然 using`:checked`是测试单选按钮是否被选中的首选方法，但您也可以简单地检查是否`$('.log input:checked')`有任何长度。

```
if($('.log input:checked').length) {
    alert('login checked');
} else {
    alert('login not checked');
} 
```

这与您的 if 条件完全不同，因为`length`将返回检查元素的数量（表示 TRUE）或 0（零）表示 FALSE。

在您的示例`if($('.log input:checked'))`中，将始终导致非 FALSE 结果，`login checked`无论是否选中单选按钮，都应显示消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T22:22:27.540

您实际上应该`.prop()`为此使用。它将返回一个`true|false`值。

```
if ( $('.log input').prop('checked') ) { ... 
```

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T22:47:54.860

试试这个小插件：

插入：

```
(function($) {

    $.fn.eachChequed = function(fnc, fnnc) {

        var
            ck = $(this).filter('[type="checkbox"], [type="radio"]'),
            isFnc = $.isFunction(fnc),
            isFnnc = $.isFunction(fnnc);

        function callFnc(el) {
            if (isFnc) {
                return fnc.call(el);
            }
            return true
        }

        function callFnnc(el) {
            if (isFnnc) {
                return fnnc.call(el);
            }
            return true;
        }

        ck.each(function(i, el) {
            try {
                var r = $(el).is(':checked') ? callFnc(el) : callFnnc(el);
                return r;
            } catch (e) {}
        });
    };

})(jQuery); 
```

跑：

```
$('input').eachChequed(function(){

    console.log('checked', $(this));

},function(){

    console.log('no checked', $(this));

}); 
```

测试：[链接](http://jsfiddle.net/adescalzo/ckaYB/)

# c++ - 替换 o/istream bool 移位运算符

> ID：11286023
> 
> 赞同：0
> 
> 时间：2012-07-01T22:10:59.963
> 
> 标签：c++, stream, boolean, operator-keyword, bit-shift

我想替换 i/ostream 的 bitshift bool 重载。当前的实现只接受“0”或“1”的输入字符串，只输出“0”或“1”。我想制作一个考虑其他序列的布尔重载，例如“t”、“true”、“f”、“false”等……有没有办法做到这一点，即使它仅限于有限的范围？这是我要使用的代码：

```
inline std::ostream& operator << (std::ostream& os, bool b)
{
    return os << ( (b) ? "true" : "false" );
}

inline std::istream& operator >> (std::istream& is, bool& b)
{
    string s;
    is >> s;
    s = Trim(s);

    const char*  true_table[5] = { "t", "T", "true" , "True ", "1" };
    const char* false_table[5] = { "f", "F", "false", "False", "0" };

    for (uint i = 0; i < 5; ++i)
    {
        if (s == true_table[i])
        {
            b = true;
            return is;
        }
    }

    for (uint i = 0; i < 5; ++i)
    {
        if (s == false_table[i])
        {
            b = false;
            return is;
        }
    }

    is.setstate(std::ios::failbit);
    return is;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:17:30.813

如果您愿意放弃`t`并且`f`作为可能性，您可以使用[`std::boolalpha`](http://en.cppreference.com/w/cpp/io/manip/boolalpha)和[`std::noboolalpha`](http://en.cppreference.com/w/cpp/io/manip/boolalpha)

来自[cppreference](http://en.cppreference.com/w/cpp/io/manip/boolalpha)：

```
// boolalpha output
std::cout << std::boolalpha 
          << "boolalpha true: " << true << '\n'
          << "boolalpha false: " << false << '\n';
std::cout << std::noboolalpha 
          << "noboolalpha true: " << true << '\n'
          << "noboolalpha false: " << false << '\n';
// booalpha parse
bool b1, b2;
std::istringstream is("true false");
is >> std::boolalpha >> b1 >> b2;
std::cout << '\"' << is.str() << "\" parsed as " << b1 << ' ' << b2 << '\n'; 
```

输出：

```
boolalpha true: true
boolalpha false: false
noboolalpha true: 1
noboolalpha false: 0
"true false" parsed as 1 0 
```

# c# - 扩展的 WPF 工具包 - 使用 FormatBar 设置 RichTextBox 的样式会导致异常

> ID：11286026
> 
> 赞同：0
> 
> 时间：2012-07-01T22:11:13.673
> 
> 标签：c#, wpf, styles, attached-properties

我正在尝试像这样设置扩展 WPF 工具包 RichTextBox 的样式：

```
<Style TargetType="{x:Type tk:RichTextBox}">
    <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="SpellCheck.IsEnabled" Value="True"/>   
    <Setter Property="tk:RichTextBoxFormatBarManager.FormatBar" Value="{x:Type tk:RichTextBoxFormatBar}"/>
</Style> 
```

但是在运行时，它会失败并显示 ArgumentNullException：“值不能为空。参数名称：属性”。

什么可能导致这种行为？

**编辑 1** 我也尝试了这种语法：

```
<Style TargetType="{x:Type tk:RichTextBox}">
    <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="SpellCheck.IsEnabled" Value="True"/>
    <Setter Property="tk:RichTextBoxFormatBarManager.FormatBar">
        <Setter.Value>
            <tk:RichTextBoxFormatBar />
        </Setter.Value>
    </Setter>
</Style> 
```

不幸的是，它给了我同样的例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:30:40.053

值需要一个实例而不是类型。请试试

```
<Style TargetType="{x:Type tk:RichTextBox}">
    <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
    <Setter Property="SpellCheck.IsEnabled" Value="True" />   
    <Setter Property="tk:RichTextBoxFormatBarManager.FormatBar">
        <Setter.Value>
            <tk:RichTextBoxFormatBar />
        </Setter.Value>
    </Setter>
</Style> 
```

# jquery - 导航不会显示在 DIV 中

> ID：11286027
> 
> 赞同：1
> 
> 时间：2012-07-01T22:11:18.270
> 
> 标签：jquery, css, navigation, html-lists

我敢肯定，这是一个过度使用的导航。老实说，我正在使用它来编辑我想要的内容，但我错过了主要目标；在我的页面中获取它。我已经尝试了好几个小时，但无法让它正确显示在我页面上的 div 中。希望有人会看到我错过了什么。

[JSFiddle](http://jsfiddle.net/xGjhD/)

请到我的测试页面看看它应该是什么样的：http: [//imengine.gofreeserve.com/fileshare/fileshare2/test/testlogin.html](http://imengine.gofreeserve.com/fileshare/fileshare2/test/testlogin.html)

它实际上在这里做什么（不知道如何将图像放入 jsfiddle）：因为我只能发布 2 个链接，所以它上面的链接除了 fileshare/fileshare2/index2.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:43:10.823

查看 fileshare2/index2.php 页面，我可以看到您的问题。Janko at Warp Speed 菜单栏区域的下拉菜单大小不正确。这源于 menu.css min-width 属性。要更正超出指示框的下拉菜单，请更改 menu.css 的 ul 属性：

```
ul {
cursor: pointer;
list-style-type: none;
margin: 0;
min-width: 200px; /* change this to 150px instead */
padding: 0;
} 
```

“登录”和“帮助”菜单周围多余的填充可以通过应用 to 的样式来`padding: 0;`移除`#menu li`。这应该使您正在使用的菜单看起来像您想要的那样，不包括无样式的“主页”、“项目”和“管理”菜单。希望它有所帮助，并且是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:20:22.517

我不断地在 Firebug 中查看这个问题，试图找出问题所在。

除了具有以下 CSS 的最外层 div 之外，一切都正确定位：

```
#loginbar {
    height: auto;
    left: 400px;
    margin: 0 auto;
    position: absolute;
    top: 150px;
    visibility: visible;
    width: auto;
    z-index: 3;
} 
```

左侧和顶部导致菜单显示在一个奇怪的位置，即不在页面顶部，这可能是您在这里尝试做的。

将这些值归零将停止菜单浮动在特定位置。

您也可以取出绝对位置以阻止它浮动。但是由于 fileshare/fileshare2/index2.php 上的元素是绝对浮动的，因此如果您希望这样做，我建议您大幅更改 CSS。

希望能帮助到你，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:44:55.023

我无法给出确切的答案，但至少导航菜单、它的 javascript 和 janko 菜单和它的 javascript 的某些东西（也许它们上面也有 css 的东西？）正在碰撞在一起并破坏它。我重做了页面的导航菜单，现在效果很好。我不知道，但似乎它可能是 javascript。

# javascript - 如果它在某个标签内，MathJax 可以只转换 LaTeX 吗？

> ID：11286029
> 
> 赞同：10
> 
> 时间：2012-07-01T22:11:33.597
> 
> 标签：javascript, latex, mathjax

我有一个文本编辑器，用户可以在其中编写 HTML 代码。我不希望他们在特定元素之外编写 LaTeX。它可能是这样的：

```
<x-latexmath>...</x-latexmath> 
```

我想要它，所以如果他们在该标签之外有 LaTeX 数学，它只是显示为普通文本。这怎么可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T23:51:19.917

MathJax 无法使用用户定义的标签来触发数学处理，但您可以使用 MathJax 的 tex2jax 预处理器`processClass`和`ignoreClass`参数来控制要处理的页面部分。有关详细信息，请参阅[text2jax 配置](http://www.mathjax.org/docs/2.0/options/tex2jax.html)，但想法是使用

```
<body class="tex2jax_ignore">
...
<span class="tex2jax_process">...</span>
...
</body> 
```

这样页面的主要部分就不会被处理，只有包含数学的 span（或 div，如果您愿意）将由 MathJax 处理。

# java - 存储唯一整数的好方法

> ID：11286030
> 
> 赞同：7
> 
> 时间：2012-07-01T22:11:56.870
> 
> 标签：java, collections, unique

**我的问题是：**确定数字是否包含在 a`Collection`中以知道是否将其添加到集合中并保持唯一性的快速方法是什么。如果我能提供帮助，我宁愿不遍历列表。

我有一个`List<Integer>`叫`numberList`. 我希望它存储唯一的整数，并且永远不允许添加重复项。我想做这样的事情：

```
private void add(int number) {
  if (!numberList.contains(number)) {
    numberList.add(number);
  }
} 
```

但显然这不会起作用，因为`numberList`它包含一个`Integer`对象列表，所以无论数量多少，每个对象都是唯一的对象。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-01T22:13:01.910

一种是将整数存储在 a 中`Set<Integer>`，例如 a `HashSet<Integer>`。集合不允许重复。

**编辑**
此外，集合的`contains(...)`方法使用对象的 equals(...) 方法来查看它是否由集合持有，因此如果您需要使用 List 作为集合，上述方法也将防止重复。自己测试一下，你会发现是这样的。

例如：

```
 List<Integer> numberList = new ArrayList<Integer>();
  int[] myInts = {1, 1, 2, 3, 3, 3, 3, 4};
  for (int i : myInts) {
     if (!numberList.contains(i)) {
        numberList.add(i);
      }
  }

  System.out.println(numberList); 
```

将返回：`[1, 2, 3, 4]`

此外，HashSet 的一个可能问题是它们没有排序，因此如果排序很重要，您将需要考虑使用其他种类的有序 Set 之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T22:22:46.620

最紧凑的形式不是 a`BitSet`吗？它在存储方面是有效的，因为它会无限扩展。它也不会不必要地使用存储。

您是否在多线程环境中工作？如果是这样，还有其他可能更好/更有效的结构。

# python - Boto Route53 或 Area53 - 如何将多个 ipaddress 添加到子域

> ID：11286032
> 
> 赞同：2
> 
> 时间：2012-07-01T22:11:58.760
> 
> 标签：python, dns, boto, amazon-route53

我正在尝试在路由 54 的子域下添加多个 IP 地址。在 UI 上就足够了，使用 area54 或在 boto 中添加一个 IP 地址很容易。

```
e.g. master.hui.com
10.130.149.247
10.130.149.248 
```

使用 area54

```
ipaddress = '10.130.149.247'
entry =  'master.hui.com'
zone = route53.get_zone('hui.com')
add_dns = zone.add_record('A',entry, [ipaddress], ttl='60') 
```

在博托：

```
conn = Route53Connection(aws_access_key_id, aws_secret_access_key)
changes = ResourceRecordSets(conn, zone_id)

change = changes.add_change("CREATE",sub_domain, "A", 60)
change.add_value(ip_address) 
```

那么...如何使用 area53 或 boto 在子域下添加两个或多个 IP 地址？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:06:25.270

您需要使用 WRR。从 boto CLI：

```
route53 add_record Z1J8BS4AFAKE12 foo.example.com. A 1.2.3.4 60 first 1
route53 add_record Z1J8BS4AFAKE12 foo.example.com. A 5.6.7.8 60 second 2 
```

或从 API：

```
change.add_change("CREATE", 'foo', 'A', ttl=60, weight=1, identifier='first')
change.add_change("CREATE", 'foo', 'A', ttl=60, weight=2, identifier='second') 
```

请参阅[http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/WeightedResourceRecordSets.html](http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/WeightedResourceRecordSets.html)

最后，您所说的“子域”是“资源记录”。“子域”意味着当您将此问题发送到 boto-users 邮件列表时让我感到困惑的区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-27T18:20:17.017

最初的问题和接受的答案非常好，但也许 boto 的界面已经改变，所以我在做同样的事情时遇到了一些问题或细节。

如果您想使用 boto 添加一个或多个加权 DNS，代码将是（请注意，我使用的是 CNAME 记录而不是 A 记录）：

```
conn = Route53Connection(aws_access_key_id, aws_secret_access_key)
rrs = ResourceRecordSets(conn, zone_id, comment='for posterity')

change = rrs.add_change('CREATE', fqdn, 'CNAME', ttl=60, identifier='unique', weight=1)
change.add_value(where_the_DNS_should_point_to)

try:
   status = rrs.commit()
except DNSServerError:
   # something went wrong, handle it as you please
   pass

# here you should wait until status is no longer PENDING 
```

为了完整起见，这是删除同一条记录的最简单方法：

```
conn = Route53Connection(aws_access_key_id, aws_secret_access_key)
zone = conn.get_zone(your_zone_name)

rr = zone.find_records(fqdn, 'CNAME', identifier=('unique', '1'))
# check here that rr is not None
status = zone.delete_record(rr, comment='for posterity')
# here you should wait until status is no longer PENDING 
```

# wt - 使用 ubuntu 11.10 在 wt 中编译刽子手示例时出错

> ID：11286033
> 
> 赞同：1
> 
> 时间：2012-07-01T22:12:28.260
> 
> 标签：wt

```
>g++ -o hangman hangman.C -lwthttp -lwt -lboost_signals
/tmp/cc5puOIR.o: In function `createApplication(Wt::WEnvironment const&)':
hangman.C:(.text+0x19b): undefined reference to `HangmanGame::HangmanGame(Wt::WContainerWidget*)'
/tmp/cc5puOIR.o: In function `main':
hangman.C:(.text+0x3dc): undefined reference to `Session::configureAuth()'
collect2: ld returned 1 exit status 
```

我也试过这个：

```
>g++ -o hangman hangman.C -I/usr/local/include -L/usr/local/lib -lwthttp -lwt -lboost_random -lboost_regex -lboost_signals -lboost_system -lboost_thread -lboost_filesystem -lboost_program_options -lboost_date_time
/usr/bin/ld: warning: libboost_program_options.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwthttp.so, may conflict with libboost_program_options.so.1.49.0
/usr/bin/ld: warning: libboost_system.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwthttp.so, may conflict with libboost_system.so.1.49.0
/usr/bin/ld: warning: libboost_thread.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwt.so, may conflict with libboost_thread.so.1.49.0
/usr/bin/ld: warning: libboost_regex.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwt.so, may conflict with libboost_regex.so.1.49.0
/usr/bin/ld: warning: libboost_signals.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwt.so, may conflict with libboost_signals.so.1.49.0
/usr/bin/ld: warning: libboost_date_time.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwt.so, may conflict with libboost_date_time.so.1.49.0
/usr/bin/ld: warning: libboost_filesystem.so.1.46.1, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libwt.so, may conflict with libboost_filesystem.so.1.49.0
/tmp/ccgojfHq.o: In function `createApplication(Wt::WEnvironment const&)':
hangman.C:(.text+0x19b): undefined reference to `HangmanGame::HangmanGame(Wt::WContainerWidget*)'
/tmp/ccgojfHq.o: In function `main':
hangman.C:(.text+0x3dc): undefined reference to `Session::configureAuth()'
collect2: ld returned 1 exit status 
```

没有工作。我在 ubuntu 11.10 下有一个更新的 boost 1_49_0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:45:22.043

hangman 不是单个文件示例；链接器抱怨在不同的源 (.C) 文件中定义的符号。我不熟悉 ubuntu 安装，但我猜它包含一个正确构建示例的 CMakeLists.txt 文件。如果这个假设是正确的，你必须使用 cmake 创建一个 Makefile，然后运行 ​​make。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-15T21:29:46.637

正如 user52875 所写，您需要从 Auth 模块编译 Session.cpp，或链接 Session.o，可能还有 Hangmangame.cpp。

# .net-4.0 - 如何在asp.net 4.0下运行DotNetNuke 6.2

> ID：11286038
> 
> 赞同：4
> 
> 时间：2012-07-01T22:13:14.643
> 
> 标签：.net-4.0, installation, dotnetnuke

我刚刚使用默认的应用程序池在 iis 7.5 下的 windows 7 上将 dnn 6.2 安装为 .net 3.5 应用程序。然后，我将默认应用程序池更改为 .net 4.0，加载我的站点，然后得到一个 iis 7.5 错误 - IIS 7.5 详细错误 - 500.21：

……

最可能的原因：

使用托管处理程序；但是，ASP.NET 未安装或未完全安装。

处理程序模块列表的配置中存在印刷错误。

你可以尝试的事情：

如果您使用托管处理程序，请安装 ASP.NET。

确保正确指定处理程序模块的名称。模块名称区分大小写并使用格式 modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule"。

我读到的所有内容都说只执行两个步骤：

1.  将应用程序池更改为在 .net 4.0 下运行（重新启动应用程序池）

2.  打开您的站点，dnn 将对 web.config 文件进行必要的更改

注意：默认应用程序池对我的网站文件夹和所有子文件夹/文件具有修改权限。

如何修复此错误并让 dnn 在 asp.net 4.0 下运行？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T23:48:27.710

在设置新机器时，这种情况发生在我身上。您需要使用 IIS 注册 ASP .NET 4.0

aspnet_regiis

[http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)

所以从你的命令行转到你的 .net 4 目录，路径将是这样的。cd C:\Windows\Microsoft.NET\Framework\v4.0.30319\ 然后在该目录中运行

aspnet_regiis.exe -ir

这将使用 IIS 重新注册 4.0，您应该已准备就绪。

# javascript - 在变量后添加扩展

> ID：11286041
> 
> 赞同：0
> 
> 时间：2012-07-01T22:13:55.777
> 
> 标签：javascript, customization, attr, file-extension

我有一些 javascript 用于我的网站上的一些音频：

```
<script type="text/javascript">
    $(function() {
        var a = audiojs.createAll({
            trackEnded: function() {
                var next = $("ul li.cow").next();
                if (!next.length) next = $("ul li").first();
                next.addClass("cow").siblings().removeClass("cow");
                audio.load($("a", next).attr("duck"));
                audio.play();
            }
        });
        var audio = a[0];
        first = $("ul a").attr("duck");
        $("ul li").first().addClass("cow");
        audio.load(first);
        $("ul li").click(function(e) {
            e.preventDefault();
            $(this).addClass("cow").siblings().removeClass("cow");
            audio.load($('a', this).attr('duck'));
            audio.play();
        });
    });
</script> 
```

我想做的是在属性“duck”之后添加“.mp3”......我该怎么做？*属性“duck”出现了三遍，我想在这三遍之后添加扩展名“.mp3”:)

谢谢，乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:17:36.950

要更改它们的属性：

```
$("ul a").each(function(){
    $(this).attr("duck", $(this).attr("duck") + ".mp3");
}); 
```

仅更改字符串：

```
first = $("ul a").attr("duck") + ".mp3"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:17:43.560

我猜你问的是简单的字符串加法？然后只需添加

```
+ ".mp3" 
```

在每个 attr('duck') 之后

# android - 日期比较

> ID：11286043
> 
> 赞同：1
> 
> 时间：2012-07-01T22:14:21.237
> 
> 标签：android, date

我从 Web 服务获取日期，dd/mm/yyyy hh:mi:ss。像这样：2011 年 10 月 10 日 12:00:00

而且，我正在尝试验证此日期是否早于实际日期，但是当我无法将其与“如果”进行比较时。

代码：

```
 private static Date formatDate(String data) throws Exception{
    if (data == null || data.equals("")){
        return null;
    }

    Date date = null;
    try {
        DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");
        date = (java.util.Date)formatter.parse(data);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return date;
  } 
```

我的比较方法：

```
 Date planeDate = null;
  try {
     planeDate = formatDate(date);
  } catch (Exception e) {
      e.printStackTrace();
  }

  Calendar currentcal = Calendar.getInstance();
  currentcal.set(currentcal.get(Calendar.DAY_OF_MONTH),
                 currentcal.get(Calendar.MONTH),
                 currentcal.get(Calendar.YEAR),
                 currentcal.get(Calendar.HOUR_OF_DAY),
                 currentcal.get(Calendar.MINUTE),
                 currentcal.get(Calendar.SECOND));

  Date current = currentcal.getTime();

      //Always return false
  if(planeDate != null){
      if(planeDate.before(current) || planeDate.equals(current)){
          return true;
      } else {
          return false;
      }
  }
  return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:22:11.257

您用于实例化日历对象的代码的参数顺序不正确。因此是错误的结果。

方法的正确签名`set`是这样的：
[***`public final void set(int year, int month, int date, int hourOfDay, int minute, int second)`***](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int,%20int%29)

您的 set 方法代码具有不同顺序的参数，如下所示：

```
currentcal.set(currentcal.get(Calendar.DAY_OF_MONTH),
                 currentcal.get(Calendar.MONTH),
                 currentcal.get(Calendar.YEAR),
                 currentcal.get(Calendar.HOUR_OF_DAY),
                 currentcal.get(Calendar.MINUTE),
                 currentcal.get(Calendar.SECOND)); 
```

因此，您的日历实例实际上返回一个日期对象，如下所示：

```
Mon Jan 02 18:50:36 GMT+05:30 8 
```

这实际上应该是附近的东西

```
Mon Jul 02 18:50:56 GMT+05:30 2012 
```

更改`set`方法输入如下，然后比较日期。然后它应该工作。

```
currentcal.set(
    currentcal.get( Calendar.YEAR ),
    currentcal.get( Calendar.MONTH ),
    currentcal.get( Calendar.DAY_OF_MONTH ),
    currentcal.get( Calendar.HOUR_OF_DAY ),
    currentcal.get( Calendar.MINUTE ),
    currentcal.get( Calendar.SECOND )
); 
```

# tumblr - jQuery Masonry 在 Tumblr 中不起作用

> ID：11286045
> 
> 赞同：0
> 
> 时间：2012-07-01T22:14:30.197
> 
> 标签：tumblr, jquery-masonry

我正在将我的 Tumblr 主题设计为网格（每篇文章宽度为 500 像素的两列网格），而 Masonry 似乎不起作用。网格不是“无缝的”。这就是它现在的样子：[图片](http://static.tumblr.com/ls5fqgx/45Xm6i5rh/untitled.png)

我真的不知道我做错了什么。我已经做了几个小时，并尝试了超过两打建议，比如添加“显示：块；” 等等。没有任何效果。除此之外，我不断得到的唯一变化是帖子会相互重叠，这比这更糟糕。

这是我完整的 Tumblr 检查：[[codes]](http://static.tumblr.com/ls5fqgx/9kqm6i5mv/tumblr.txt)。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:04:05.263

其实有两个问题：

1.  您需要`<div class="post"> </div>`在每个帖子元素内移动标签
2.  您需要关闭 window.load 上的函数调用

所以，#1 看起来像这样......

```
<div id="container">
{block:Posts}    

{block:Text}
<div class="post">
{block:Title}<span class="title">{Title}</span>{/block:Title}
{Body}
</div><!--post-->
{/block:Text}

{block:Photo}
<div class="post">
<center>{LinkOpenTag}<img src="{PhotoURL-500}" alt="{PhotoAlt}" />{LinkCloseTag}</center>
{block:Caption}{Caption}{/block:Caption}
</div><!--post-->
{/block:Photo}

{block:Photoset}
<div class="post">
<center>{Photoset-500}</center>
{block:Caption}{Caption}{/block:Caption}
</div><!--post-->
{/block:Photoset}

{block:Quote}
<div class="post">
<span class="quote">&ldquo;{Quote}&rdquo;</span>
{block:Source}{Source}{/block:Source}
</div><!--post-->
{/block:Quote}

{block:Link}
<div class="post">
<a title="" href="{URL}" class="postlink" {Target}>{Name}</a>
{block:Description}{Description}{/block:Description}
</div><!--post-->
{/block:Link}

{block:Audio}
<div class="post">
{AudioPlayerGrey}
{block:Caption}{Caption}{/block:Caption}
</div><!--post-->
{/block:Audio}

{block:Chat}
<div class="post">
{block:Title}<span class="title">{Title}</span>{/block:Title}
<ul class="chat">
    {block:Lines}
        <li>
            {block:Label}<span class="label">{Label}</span>{/block:Label}{Line}
        </li>
    {/block:Lines}            
</ul>
</div><!--post-->
{/block:Chat}

{block:Video}
<div class="post">
<center>{Video-500}</center>
{block:Caption}{Caption}{/block:Caption}
</div><!--post-->
{/block:Video}

{block:Answer}
<div class="post">
<b>{Asker} asked:</b> {Question}
<p>{Answer}
</div><!--post-->
{/block:Answer}   

{/block:Posts}

</div><!--container--> 
```

＃2看起来像这样......

```
 jQuery(window).load(function(){
  $('#container').masonry({
           itemSelector: '.post',
           columnWidth : 520
      });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:43:45.720

根据我在您拨打on时在您的[代码](https://static.tumblr.com/ls5fqgx/9kqm6i5mv/tumblr.txt)上看到的内容，您忘记关闭您的加载呼叫。`masonry``jQuery(window).load(function(){`

根据您提供的代码`<script type="text/javascript">`。

```
 jQuery(window).load(function(){
  $('#container').masonry({
  itemSelector: '.post',
  columnWidth : 520
  }); 
```

[![前](../Images/b75aa8e5e3097a8624ca123029157225.png)](https://i.stack.imgur.com/kQAHO.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/2t02emn1.z3f.png)）]

在我看到没有关闭语法之前看起来很好，`});`而且我不相信你曾经打电话`jQuery.noConflict()`（没关系，它也可以使用`jQuery`，但它应该看起来像..

```
 $(window).load(function(){
  $('#container').masonry({
  itemSelector: '.post',
  columnWidth : 520
  });
  }); 
```

你可以用`alert('hello this is a working test');`

```
 $(window).load(function(){
  alert('hello this is a working test');
  $('#container').masonry({
  itemSelector: '.post',
  columnWidth : 520
  });
  }); 
```

[![后](../Images/503f149e8789633d31d4f5882916f90a.png)](https://i.stack.imgur.com/ZxNXM.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/5i4xd5fe.xc4.png)）]

警告框消失后，您会注意到 jQuery 生效并且`{block:Posts}{/block:Posts}`会从视图中消失。

# ruby-on-rails - 销毁链接返回“未定义的方法”

> ID：11286047
> 
> 赞同：0
> 
> 时间：2012-07-01T22:15:35.033
> 
> 标签：ruby-on-rails, crud

我有**主题**控制器和`view/topics/index.html.erb`销毁项目的链接：

```
<%= link_to 'Destroy',topic, confirm: 'Are you sure?', method: :delete %> 
```

我也试过

```
<%= link_to 'Destroy', topic_path(topic), confirm: 'Are you sure?', method: :delete %> 
```

但两者都返回

> 类的未定义方法topic_path：0x00000105056a80>：0x00000105047328>

在**routes.rb**中如下：

```
 namespace :admin do
    ...
    resources :topics
  end 
```

问题可能出在哪里以及如何以简单的方式解决它？我正在通过 CRUD 检查其他生成的控制器/视图，并且设置始终相同，并且在所有其他控制器中它运行良好，就在这个我一遍又一遍地遇到这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:20:18.447

尝试这个：

```
<%= link_to 'Destroy', admin_topic_path(topic), 
                                    confirm: 'Are you sure?', method: :delete %> 
```

为了确保运行命令`rake routes`，您应该在结果中看到您的路线。

# php - 便携式 XAMPP 替代品

> ID：11286048
> 
> 赞同：4
> 
> 时间：2012-07-01T22:15:38.137
> 
> 标签：php, webserver, xampp

我很长一段时间都在使用 XAMPP 便携式（用于 USB 闪存驱动器）。创建者团队不再支持/更新该项目，该项目甚至与最新的 PHP 版本不兼容。

是否有其他具有最新更新的一体式便携式 Web 服务器（如 XAMPP）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:38:45.210

[Z-WAMP](http://zwamp.sourceforge.net/)是我发现的最好的便携式 WAMP。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T00:29:55.950

我过去曾通过便携式驱动器使用过[Uniform Server](http://www.uniformserver.com/)。当前版本（撰写本文时为[8.5.5](http://sourceforge.net/projects/miniserver/files/Uniform%20Server/8.5.5-Coral/)，于 2012 年 6 月 6 日发布）具有 Apache 2.4.2、MySQL 5.5.25-community 和 PHP 5.4.4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T02:53:10.130

Laragon ( [http://laragon.org/](http://laragon.org/) ) 怎么样。

Laragon 为您提供了一个强大但独立的开发环境。它便携且非常灵活。

安装 Laragon 不会影响您的 Windows。您可以将 Laragon 安装文件夹移动到另一个磁盘，Laragon 仍然可以工作。

Laragon 现在支持 Memcached 和 Redis（可选）。

当前版本：0.3（稳定）

阿帕奇 2.4.10

MySQL (MariaDB 10.0.15)

PHP 5.6.3

内存缓存 1.4.5

Redis 2.8.17

检查[拉拉贡](http://laragon.org)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T17:24:03.733

您还可以查看“维基百科上的 WAMP 比较”： [http ://en.wikipedia.org/wiki/Comparison_of_WAMPs](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)

此处列出的所有 WAMP 和更多内容都包括在内。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T20:57:40.563

XAMPP 重新开发！截至 2012 年 8 月，他们发布了一个新版本，其中包含所有最新的 Apache、PHP 等。[一探究竟！](http://www.apachefriends.org/en/xampp.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-22T09:57:49.323

如果你有一个活跃的互联网连接并且你的开发机器上安装了docker，你可以试试**[devilbox](https://github.com/cytopia/devilbox)**。

它是一个现代的基于 docker 的灯组，提供各种功能：

*   启动任何 php 版本（php 5.4 - php 7.1 甚至 hhvm）
*   启动和 sql 版本（mysql 5.5 - mysql 8 或所有 mariadb 版本）
*   自动创建虚拟主机
*   自动 DNS
*   电子邮件万能
*   和许多其他人
*   phpMyAdmin
*   管理员
*   OpcacheGUI

[https://github.com/cytopia/devilbox](https://github.com/cytopia/devilbox)

[![魔盒](../Images/24d3a94dca100aec3f5f8d158f0ababa.png)](https://github.com/cytopia/devilbox)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-19T11:02:37.627

[WTServer](http://wtserver.wtriple.com/) - 适用于 Windows 的 Nginx MariaDB Redis Php 开发堆栈

*   定期更新
*   安装程序会生成一个便携式文件夹。

当前包包含：

```
Nginx 1.11.7 web server
MariaDB 10.1.19 database server, mysql replacement (32/64bit)
Redis 3.2 Cache/NoSql, memcached alternative (64bit)
Php 5.6.29 & PHP 7.0.14 & PHP 7.1.0 scripting language (32/64bit)
XDebug, GeoIP, Gender PHP Extensions 
```

# html - 如何将 id 传递给控制器 ？

> ID：11286049
> 
> 赞同：0
> 
> 时间：2012-07-01T22:16:00.633
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, parameters, controller

我有一个像这样的文本框：`<input type="text" id="10" name="SalesData" />`

我想将 id 传递回控制器。我需要创建一个隐藏的文本框并将 id 存储在那里吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:21:32.137

对于这种情况，隐藏的文本框绝对是最好的

```
<input type="hidden" id="SalesData" name="SalesData" value="10" /> 
```

然后在您的帖子中（或其他地方，如视图模型）

```
[HttpPost]
public ActionResult postedData(int SalesData){
 //TODO: use SalesData
} 
```

使用视图模型：

```
public class SalesVM
{
 public int SalesData { get; set; }
} 
```

接着

```
[HttpPost]
public ActionResult ActionNameFromForm(SalesVM model){
 //TODO: use model.SalesData
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:25:02.297

你到底需要做什么？是否需要将文本框的 id 和 value 都返回给控制器？如果是这样，我认为隐藏的领域是要走的路。

# mysql - MySQL GROUP BY WITH ROLLUP - 想要汇总所有排列

> ID：11286050
> 
> 赞同：3
> 
> 时间：2012-07-01T22:16:01.643
> 
> 标签：mysql, sql

以这张表为例（我们称之为`BIN_TABLE`）：

```
+------+------+
| A    | B    |
+------+------+
|    0 |    0 |
|    0 |    1 |
|    1 |    1 |
|    1 |    0 |
+------+------+ 
```

我想把它卷起来，所以我这样做：

```
SELECT   A, B, COUNT(*)
FROM     BIN_TABLE
GROUP BY A, B WITH ROLLUP; 
```

我得到：

```
+------+------+----------+
| A    | B    | COUNT(*) |
+------+------+----------+
|    0 |    0 |        1 |
|    0 |    1 |        1 |
|    0 | NULL |        2 |
|    1 |    0 |        1 |
|    1 |    1 |        1 |
|    1 | NULL |        2 |
| NULL | NULL |        4 |
+------+------+----------+ 
```

这是一个如何`WITH ROLLUP`使用我放在`GROUP BY`子句中的字段顺序的示例。

我还想在结果中包含以下几行：

```
| NULL |    1 |        2 |
| NULL |    0 |        2 | 
```

这意味着我拥有所有的汇总排列。

这是否可以不诉诸于此：

```
SELECT   A, B, COUNT(*)
FROM     BIN_TABLE
GROUP BY A, B WITH ROLLUP
UNION
SELECT   NULL, B, COUNT(*)
FROM     BIN_TABLE
GROUP BY B 
```

（如果重要，我使用 MySQL 5.6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:31:25.913

不，我相信`UNION`这是唯一的方法。但是，您可以使用`UNION ALL`（而不是隐式`UNION DISTINCT`）来避免不必要地搜索重复项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T23:41:45.043

根据汇总修饰符的功能，您的结果中已经存在所有汇总排列。

请看看这些结果。

```
+------+------+----------+
| A    | B    | COUNT(*) |
+------+------+----------+
|    0 |    0 |        1 |
|    0 |    1 |        1 |
|    0 | NULL |        2 |
|    1 |    0 |        1 |
|    1 |    1 |        1 |
|    1 | NULL |        2 |
| NULL | NULL |        4 |
+------+------+----------+ 
```

这里，第 3 条记录和第 6 条记录是汇总排列。
所以我们可以通过下面的sql得到结果。

```
SELECT * from 
    (select a,b,count(*) from 
      bin_table group by a,b with rollup) total 
 order by total.b desc,a;

+------+------+----------+
| a    | b    | count(*) |
+------+------+----------+
|    0 |    1 |        1 |
|    1 |    1 |        1 |
|    0 |    0 |        1 |
|    1 |    0 |        1 |
| NULL | NULL |        4 |
|    0 | NULL |        2 |
|    1 | NULL |        2 |
+------+------+----------+
  7 rows in set (0.01 sec) 
```

这里，第 6 条记录和第 7 条记录是汇总排列。而且我认为它会使性能更好。

谢谢，

# wcf-data-services - 如何为所描述的场景定义 Kendo Grid Schema 模型？

> ID：11286063
> 
> 赞同：0
> 
> 时间：2012-07-01T22:18:11.967
> 
> 标签：wcf-data-services, wcf-binding, odata, kendo-ui

我被困在使用 Kendo Grid 使用我的数据服务 ODATA 响应的过程中。问题是，我无法得出适合响应的模式模型。

请找到我的服务的 JSON 响应。

```
{
  "d" : [{
    "__metadata": {
      "uri": "http://localhost/TestService/TestService.svc/Order('4345')", 
      "type": "DataModels.OrderDetail"
    }, 
    "ItemList": [{
      "__metadata": {
        "uri": "http://localhost/TestService/TestService.svc/Item('1')", 
        "type": "DataModels.Item"
      }, 
      "ItemId": "1", 
      "Name": "TestItem", 
      "Rate": "19.00", 
      "Quantity": "3"
    }]
  }]
} 
```

需要一些建议/帮助，让我在这项工作中继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:12:17.487

您可以尝试以下方法

```
schema: {
      data: "d.ItemList"
} 
```

# ruby-on-rails - 设计注册操作后如何测试扩展功能？

> ID：11286066
> 
> 赞同：1
> 
> 时间：2012-07-01T22:19:30.643
> 
> 标签：ruby-on-rails, rspec, devise

显然我有一个独特的情况，我在任何地方都找不到帮助。我正在尝试扩展我的注册流程以在我的数据库中创建额外的模型。这是我想做的基本流程：

*   用户使用电子邮件/密码（以及其他模型值）注册
*   系统创建一个“用户”模型
*   系统创建一个“配置文件”模型
*   系统创建“公司”模型
*   系统创建一个“帐户”模型

最大的挑战是我正在使用 Devise，但我似乎无法找到一种方法来使用 Rspec 测试此功能。这是我简单地尝试测试“注册”方法的快速视图（这*不起作用*：

```
describe "New Users" do
  describe "signing up" do
    it "should create a new user" do
      lambda do
        post :sign_up, :user => Factory.attributes_for(:user)
        response.should be_success
      end.should change(User, :count).by(1)
    end
  end
end 
```

我收到以下错误：

```
1) UsersController New Users signing up should create a new user
 Failure/Error: post :sign_up, :user => Factory.attributes_for(:user)
 ActionController::RoutingError:
   No route matches {:user=>{:email=>"test@user.com", :password=>"secret", :password_confirmation=>"secret"}, :controller=>"users", :action=>"sign_up"}
 # ./spec/controllers/users_controller_spec.rb:14:in `block (5 levels) in <top (required)>'
 # ./spec/controllers/users_controller_spec.rb:13:in `block (4 levels) in <top (required)>' 
```

设计路线配置我的用户注册路线如下：

```
new_user_registration GET    /users/sign_up(.:format)  {:action=>"new", :controller=>"devise/registrations"} 
```

我一直在用这个把头发拉出来，似乎在这方面找不到任何帮助。也许我的做法是错误的，但我想在初始注册表单上配置设置用户帐户的所有方面（即他们的公司默认值、个人资料设置等）。首先，我需要弄清楚如何测试注册过程。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:30:35.813

首先，您应该链接到的路线是，因为设计使用 POST 方法进行注册：

```
user_registration POST   /users(.:format)                   devise/registrations#create 
```

也许您可以尝试传递语法，例如：

```
it "should create a new user" do
expect {
  post :create, user: FactoryGirl.attributes_for(:user)
  response.should be_redirect
}.should change(User, :count).by(1)
end 
```

**编辑** 好吧，我可能想出了如何解决路由问题，我添加了一个新控制器：

```
UsersController < Devise::RegistrationsController 
```

并在那里添加了方法sign_up。然后在 routes.rb 我添加了这段代码：

```
devise_for :users
devise_scope :user do
 post "/sign_up", :to => "devise/registrations#create"
end 
```

最后将测试前的这一行放入测试中：

```
@request.env["devise.mapping"] = Devise.mappings[:user] 
```

但是我在验证方面存在问题，但我认为它适用于我的应用程序，因为我只是在现有系统的新分支中制作了它。希望它可以帮助你。尽管如此，我认为这种方法非常hack或不常见。我宁愿采用[推荐](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)的设计方法。[您始终可以使用 FactoryGirl 即此链接](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)创建用户依赖项。希望它会帮助你。

*顺便说一句，关于登录的废话帖子很抱歉：）我累了：）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:07:09.467

是不是

```
post :users 
```

`new_user_registration`路由重定向到包含表单（用户操作）的页面，`new`而不是`create`用户操作。你应该在你的路线中找到类似的东西：

```
user_registration POST /users {:action => "create", :controller => "devise/registrations"} 
```

检查你`rake routes`。

# javascript - 所见即所得使每个单词都可点击？

> ID：11286071
> 
> 赞同：1
> 
> 时间：2012-07-01T22:20:04.333
> 
> 标签：javascript, jquery, wysiwyg

行。我有一个可编辑的 div，我可以在其中输入一些文本。但是进入后我有 3 个按钮：黑色、黄色和绿色。

我想要做的是然后单击即按钮“黑色”，然后单击我在可编辑区域中键入的每个单词。单击一个单词后，该单击的单词应该有一个 div class='black' 围绕它吗？

此外，如果再次单击相同的单词，我需要删除包装的 div（如果我愿意的话，我可以改变单词的颜色？）。

此外，如果我删除任何用 div 包裹的单词，我希望删除 div。

任何帮助表示赞赏？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:42:02.293

你在使用 jQuery 吗？你需要这样的东西：

```
function prepareDivContainer()
{
  // remove extra spaces
  var str = $("#editableDiv").text().replace(/[\s]+/g, ' ');

  // split the string by space into words
  var words = str.split(' ');

  // clear the content of the editable div
  $("#editableDiv").text('');

  // insert each word wrapped with a div
  for (var i = 0; i < words.length; i++)
  {
    $("#editableDiv").append('<div id="word'+i+'">'+words[i]+'</div>');
  }
} 
```

在用户完成向 div 中插入文本后调用的此函数。它会将所有单词包装到div中。

因此，现在您可以通过绑定到点击事件来使这些 div（单词）可点击：

```
$(document).ready(function () {
  $("#editableDiv div").live("click", function(){
    // do something with the clicked word (div), e.g. add or remove css classes
    // look here: http://api.jquery.com/category/css/
  });
}); 
```

# php - 从父级访问子类道具

> ID：11286077
> 
> 赞同：-1
> 
> 时间：2012-07-01T22:20:22.153
> 
> 标签：php, oop

我的意思是这样的：

```
class parentClass {
    public function method() {
        echo $this->prop;
    }
}
class childClass extends parentClass {
    public $prop = 5;
} 
```

如何从父道具中获取子道具？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:29:55.560

要么我不完全理解你想要什么，要么解决方案就像下面的代码一样简单。

```
class parentClass {
    public function method() {
        echo $this->prop;
    }
}
class childClass extends parentClass {
    public $prop = 5;
}
$object = new childClass();
$object->method(); 
```

我的意思是子类正在扩展基类，这意味着它还将继承其父类的所有方法。这使得使用父类方法的整个过程就像从子类的实例中调用它一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:27:18.200

子类的所有受保护成员和公共成员在 PHP 的父类中都是可见的，因此您提供的示例代码应该可以正常工作。[引用 php 文档](http://www.php.net/manual/en/language.oop5.visibility.php)：

> 声明为受保护的成员只能在类本身内以及被继承类和父类访问。

但实际的问题是：你真的需要它吗？

正确的 OO 方法是定义一个自包含的父类来表达一些东西。它不应该*需要*访问子类的属性——这就是所谓的[代码异味](http://en.wikipedia.org/wiki/Code_smell)。如果你真的认为你有一个类似的构造是必要的情况，你可能正在寻找抽象方法，它保证*每个*子类都有这个属性：

```
abstract class Animal {
    public function makeNoise() {
        echo $this->getNoiseString();
    }
    protected abstract function getNoiseString();
}

class Cat extends Animal {
    protected function getNoiseString() {
        return 'meow';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T22:27:15.533

```
//parent
class parentClass {

    protected $prop = null;

    public function method() {
        echo $this->prop;
    }
}

//child
class childClass extends parentClass {
    protected $prop = 5;
} 
```

确保变量也在父类中定义。所以它可以被父母访问。

# java - Hibernate 一对一映射更新，而不是插入和抛出 StaleStateException

> ID：11286078
> 
> 赞同：1
> 
> 时间：2012-07-01T22:20:52.640
> 
> 标签：java, hibernate, one-to-one

我正在尝试使用休眠进行一对一映射以将一些信息插入数据库，但每次尝试时都会出现此错误。

```
Caused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1
at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:85)
at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:70)
at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:90)
at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:185)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1217)
at org.springframework.orm.hibernate3.SpringSessionSynchronization.beforeCommit(SpringSessionSynchronization.java:145)
... 12 more 
```

这是我的 client.hbm.xml 文件。

```
<hibernate-mapping>
<class name="register.Client" table="client" lazy="false">
    <id name="clientId" type="string" column="CLIENT_ID"
        length="255">
        <generator class="increment"></generator>
    </id>
    <property name="address" type="string" column="ADDRESS"
        length="255" />
    <property name="email" type="string" column="EMAIL"
        length="255" />
    <property name="username" type="string" column="USERNAME"
        unique="true">
    </property>

    <!-- Associations -->
    <!-- bi-directional one-to-one association to Login -->
    <one-to-one name="login" class="login.UsrPwd" lazy="false"
         outer-join="auto" />
</hibernate-mapping> 
```

这是我的 login.hbm.xml 文件

```
<hibernate-mapping>

<class name="login.UsrPwd" table="login">

    <id name="username" type="string" column="USER_NAME">   </id>   
    <property name="password" column="PASSWORD" type="string"/>
    <property name="type" column="TYPE_ID" type="int"></property>
    <one-to-one name="consultantInfo" class="register.ConsultantInfo"
        cascade="all" />

 <!--        bi-directional one-to-one association to Client -->
    <one-to-one name="client" class="register.Client"  cascade="all"/>
     </class>
 </hibernate-mapping> 
```

当我运行我的函数将信息添加到数据库时，这是我得到的 SQL。

```
 Hibernate: insert into login (PASSWORD, TYPE_ID, USER_NAME) values (?, ?, ?)
 Hibernate: update client set ADDRESS=?, EMAIL=?, USERNAME=? where CLIENT_ID=? 
```

我不认为第二个应该是更新的，因为该行还不存在，这就是它抛出我得到的异常的原因。我不知道它为什么这样做，任何帮助将不胜感激。

如果您需要更多信息，请告诉我，我可以提供

# jquery - 对 Neo4j 的 ajax 请求的 CORS 失败

> ID：11286080
> 
> 赞同：0
> 
> 时间：2012-07-01T22:21:46.307
> 
> 标签：jquery, ajax, neo4j, cors

我正在尝试使用 Backbone.js 模型来访问 Neo4j 内容。我不明白为什么以下通信未通过跨域检查：

首先是 OPTIONS 请求：

```
Request URL:http://localhost:7474/db/data/cypher
Request Method:OPTIONS
Status Code:204 No Content
Request Headers
  Accept:*/*
  Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
  Accept-Encoding:gzip,deflate,sdch
  Accept-Language:en-US,en;q=0.8
  Access-Control-Request-Headers:origin, content-type, accept
  Access-Control-Request-Method:POST
  Connection:keep-alive
  Host:localhost:7474
  Origin:http://localhost:3000
  Referer:http://localhost:3000/test/
  User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11
Response Headers
  Access-Control-Allow-Headers:origin, content-type, accept
  Access-Control-Allow-Methods:POST
  Access-Control-Allow-Origin:*
  Allow:OPTIONS,POST
  Server:Jetty(6.1.25) 
```

然后是 POST 请求：

```
Request URL:http://localhost:7474/db/data/cypher
Request Headers
  Accept:application/json, text/javascript, */*; q=0.01
  Content-Type:application/json
  Origin:http://localhost:3000
  Referer:http://localhost:3000/test/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11
Request Payload
  start n=node(0) match n-[:hasClass]->c where c.className=Collection return c 
```

我得到控制台错误：

```
OPTIONS http://localhost:7474/db/data/cypher 204 (No Content) jquery-1.7.2.min.js:4
XMLHttpRequest cannot load http://localhost:7474/db/data/cypher. Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

据我所知，该请求应该被允许，因为预检请求说 Access-Control-Allow-Origin: *. 有什么建议么？有什么我想念的吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T16:14:48.253

CORS 在现已弃用的旧版 Cypher HTTP 端点上失败。
[http://neo4j.com/docs/stable/rest-api-cypher.html](http://neo4j.com/docs/stable/rest-api-cypher.html)

新的 Transactional Cypher HTTP Endpoint 似乎没有出现该问题。
[http://neo4j.com/docs/stable/rest-api-transactional.html](http://neo4j.com/docs/stable/rest-api-transactional.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:29:20.780

自从我处理跨域请求以来已经有很长时间了，但可能是以某种方式缺少标头。不过不确定。请注意，不遵守请求是由您的浏览器产生的，可能值得检查一下您的浏览器对 x-origin 施加了哪些限制。例如，如果您使用的是 file:// url，许多浏览器都不允许这样做。

对跨源请求的支持不是 Neo4j 服务器的记录功能，它是出于遗留原因而存在的，并且很可能出于安全原因将其删除（因为没有额外的安全层，如果攻击者知道它的数据库可能会被劫持）网址）。

不过，可能值得将其作为默认设置关闭..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T00:28:46.190

看起来您正在使用 Chrome，我认为[这个错误](http://code.google.com/p/chromium/issues/detail?id=67743)可能与此有关。

```
Ticket #67743: Access-Control-Allow-Origin: * doesn't match localhost 
```

# java - 如何正确调整我在此代码中打印的数字？

> ID：11286083
> 
> 赞同：1
> 
> 时间：2012-07-01T22:22:01.730
> 
> 标签：java

如何正确调整我在此代码中打印的数字？由于代码中的数字是变量，我是否需要做一些不同于正常调整的事情？

```
 a = 4                                                                                                      ;
 b = 4                                                                                                      ;
 c = 1                                                                                                      ;
 x = 2                                                                                                      ;
 Root                      = (-1*b + Math.sqrt( Math.pow(b,2) - 4*a*c)/ 2*a                                );
 CoefficientOfXSquared     = (-(b*x+c)/(Math.pow(x,2))                                                     );
 CoefficientOfX            = (-(a*x+c)-c/x                                                                 );
 Constant                  = (-(a*Math.pow(x,2)+b*x)                                                       );
 System.out.println("\n\n\t    Given that: \n\t    CoefficientOfXSquared = " +a                            );
 System.out.println("\n\t    CoefficientOfX        = " +b                                                  );
 System.out.println("\n\t    Constant              = " +c                                                  );
 System.out.println("\n\t    Root                  = " +x                                                  );
 System.out.println("\n\n\t    x = " + Root                                                                );
 System.out.println("\n\t    a = " +  CoefficientOfXSquared                                                );
 System.out.println("\n\t    b = " +  CoefficientOfX                                                       );
 System.out.println("\n\t    c = " +  Constant                                                             );
 System.out.println("\n\n\n"                                                                               ); 
```

如果有人能解释如何正确调整它，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:29:30.627

我认为[文档](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)是最好的，展示了如何使用`printf()`这里格式化数字输出也是一个关于[在 java 中格式化数字的很好的教程](http://www.iro.umontreal.ca/~vaucher/Java/tutorials/Formatting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:39:36.300

您可以这样做来右对齐文本。

```
String.format("%50s", "Root = " + root); 
```

尝试字符串格式函数，[格式参数](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)提供了许多选项来自定义打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T22:54:58.897

尝试使用字符串格式方法来打印它们。像这样：

```
double x=1234.56;
double y=78.678;
System.out.printf("%n\t Root          =  %12.4f",  x);
System.out.printf("%n\t Constant      =  %12.4f%n",  y); 
```

这使：

```
Root          =     1234.5600
Constant      =       78.6780 
```

我假设这些是双打。查找 printf 以获取更多信息。悬崖

# iphone - iphone：获取视图的位置

> ID：11286084
> 
> 赞同：0
> 
> 时间：2012-07-01T22:22:03.880
> 
> 标签：iphone, ios5, keyboard, position

我有一个靠近屏幕底部的文本字段。当键盘出现时，它会覆盖文本字段。我通过使用[iPhone Keyboard Covers UITextField](https://stackoverflow.com/questions/1247113/iphone-keyboard-covers-text-field)中的代码解决了这个问题。

但是，该代码硬编码了应该向上或向下移动多少视图。有没有一种方法可以以编程方式获取文本字段的坐标，以便确定需要向上或向下移动多少？这将是有益的，因为如果我决定将此文本字段移动到不同的位置，我就不必更改代码。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:26:11.623

使用`frame`UITextField（或 UIView 的任何子类）上的属性。返回的`CGRect`将提供对`origin`具有 x 或 y 坐标作为 CGFloat 的访问。

```
CGFloat y = textField.frame.origin.y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:41:11.667

文本字段到屏幕底部的距离应该等于或大于键盘的高度。

```
float distanceFromBottom = txtField.window.frame.size.height - txtField.frame.origin.y - txtField.frame.size.height;
float deltaY = keyboardHeight - distanceFromBottom; 
```

您应该将文本字段向上移动`deltaY`.

# actionscript-3 - as3 在循环中删除子项

> ID：11286092
> 
> 赞同：1
> 
> 时间：2012-07-01T22:23:30.563
> 
> 标签：actionscript-3, flash, air

我正在使用 Adob​​e AIR 3.3 在 Flash CS6 中工作，并且在将影片剪辑添加到舞台后无法删除它们。这是我的代码：

```
for(var i = 0; i<starCount; i++)
{
    star = new newStar();
    choiceBoard.addChild(star);
    star.x = 195;
    if(i>=1)
    {
        star.x = 195 + 90*i;
    }
    star.y = 597
} 
```

这是我创建的动态添加星形影片剪辑的功能的一部分......它添加了一个影片剪辑，在它们之间添加空间，添加下一个影片剪辑等。如何在创建后删除所有明星影片剪辑?

我试过了：

```
for(var i = 0; i<starCount; i++)
{
    if(contains(star))
    {
        choiceBoard.removeChild(star);
        trace("removed star");
    }
} 
```

但这只会删除一颗星，无论“starCount”设置为什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:41:12.467

```
private var stars:Array=[];
for(var i = 0; i<starCount; i++)
{
    star = new newStar();
    stars.push(star);
    choiceBoard.addChild(star);
    star.x = 195 + 90*i;
    star.y = 597
} 
```

然后尝试

```
for(var i = 0; i<stars.length; i++)
{
    choiceBoard.removeChild(stars[i]);
    trace("removed star");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:03:20.760

如果您已将所有星星添加到一个容器中（看起来像您有`choiceBoard`），并且该容器中没有您想要保留的其他内容，那么您可以通过执行以下操作非常简单（并且快速）地删除它们：

```
while(choiceBoard.numChildren)
{
    choiceBoard.removeChildAt(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T22:42:33.677

明星们是他们唯一的选择板子吗？如果是这样，您可以像这样删除所有孩子：

```
choiceBoard.removeChildren(); 
```

或者，您可以将所有星星添加到数组中，然后遍历数组以删除它们：

```
var starArray:Array = [];

//...

for(var i = 0; i<starCount; i++)
{
    star = new newStar();
    //put the star into the array
    starArray.push(star);
    choiceBoard.addChild(star);
    star.x = 195;
    if(i>=1)
    {
        star.x = 195 + 90*i;
    }
    star.y = 597
} 
```

然后删除：

```
for(var i = 0; i<starArray.length; i++)
{        
    //remove the star from the display
    choiceBoard.removeChild(starArray[i]);      
    trace("removed star");
}
//clear the array
starArray = []; 
```

# c - 对非阻塞套接字使用 select() 连接总是返回 1

> ID：11286094
> 
> 赞同：5
> 
> 时间：2012-07-01T22:23:48.060
> 
> 标签：c, sockets, select, nonblocking

[这个问题与In a non-blocking socket connect, select() always return 1](https://stackoverflow.com/questions/5843810/in-a-non-blocking-socket-connect-select-always-returns-1)非常相似（或几乎相同）；但是，我似乎无法找到我的代码出现问题的地方。

我正在使用非阻塞套接字，并希望在将客户端连接到服务器时使用 select() 来检查超时/成功。问题是 select() 总是几乎立即返回 1，即使我什至没有运行服务器并且没有任何东西可以连接。提前感谢您的帮助，代码片段如下：

```
//Loop through the addrinfo structs and try to connect to the first one we can
for(p = serverinfo; p != NULL; p = p->ai_next) {
    if ((sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1) 
    {
        //We couldn't create the socket, try again
        perror("client: socket");
        continue;
    }

    //Set the socket to non-blocking
    int flags = fcntl(sockfd, F_GETFL, 0);
    fcntl(sockfd, F_SETFL, flags | O_NONBLOCK);

    if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
        //The error was something other than non-block/in progress, try next addrinfo
        if(errno != EINPROGRESS) 
        {
            close(sockfd);
            perror("client: connect");
            continue;
        }

        fd_set write_fds;
        FD_ZERO(&write_fds);            //Zero out the file descriptor set
        FD_SET(sockfd, &write_fds);     //Set the current socket file descriptor into the set

        //We are going to use select to wait for the socket to connect
        struct timeval tv;              //Time value struct declaration
        tv.tv_sec = 5;                  //The second portion of the struct
        tv.tv_usec = 0;                 //The microsecond portion of the struct

        //DEBUG: This is ALWAYS 1
        int select_ret = select(sockfd + 1, NULL, &write_fds, NULL, &tv);
        cout << select_ret << endl;

        //Check return, -1 is error, 0 is timeout
        if(select_ret == -1 || select_ret == 0)
        {
            //We had an error connecting
            cout << "Error Connecting\n";
            close(sockfd);
            continue;
        }
    }

    //We successfully connected, break out of loop
    break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:34:57.383

你*期望*select() 返回什么？考虑到 select() 通常用于等待多个文件描述符 - 如果您连接*两个*，您将如何仅根据 select 的返回值知道哪个成功/失败？你不会，很明显。

这就是为什么 select() 只是告诉您哪些文件描述符以某种方式发生了变化，并且您应该独立确定那是什么。在 connect() 的情况下，您应该调用 getsockopt() 来检索连接尝试的结果。请参阅[此答案](https://stackoverflow.com/questions/10187347/async-connect-and-disconnect-with-epoll-linux/10194883#10194883)，其中我解释了如何执行非阻塞连接（）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:29:46.730

当以非阻塞模式连接并且 select() 指示连接是可写的时，您应该再次调用 connect()。这样做将返回 -1 并带有 errno == ECONNRESET 或其他任何内容。

# css - CSS如何在不改变图像样式的情况下垂直居中图像和文本

> ID：11286095
> 
> 赞同：1
> 
> 时间：2012-07-01T22:24:00.473
> 
> 标签：css, image, text, alignment, vertical-alignment

我有一张图片和一些文字。我想将它们都垂直居中`<div`>。如何在**不**更改`<img>`标签中的任何内容的情况下做到这一点？

我知道很多人建议如下：

```
<div>
<img style="vertical-align:middle; height: 30px;" src ="image.png"/>
<span style="line-height: 30px;" > my text </span> 
</div> 
```

由于某些原因，我不想更改`<img>`标签中的任何内容。我可以通过仅在`<div>`or`<span>`或其他地方添加样式来将它们都居中吗？

顺便说一句，我也知道有些人说以下方法会起作用：

```
<div>
<img height=30px; src ="image.png"/>
<span style="line-height: 30px;" > my text </span>
</div> 
```

但这对我不起作用。那么有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:28:01.117

试试这个 - [http://jsfiddle.net/J4QJA/](http://jsfiddle.net/J4QJA/)

```
div {
    height: 300px;
    background: beige;
    line-height: 300px;
}

img {
    vertical-align: middle;
}
​ 
```

...

**更新**

如果您不能/不想将任何样式应用于`<img>`您可以使用包装器 - [http://jsfiddle.net/J4QJA/3/](http://jsfiddle.net/J4QJA/3/)

*HTML*

```
<div class="wrapper">
    <div class="image-wrapper">
        <img src="http://lorempixel.com/200/100" />
    </div>
    <div class="image-wrapper">
        Lorem ipsum doloe sit amet
    </div>
</div>​ 
```

*CSS*

```
div.wrapper {
    height: 300px;
    background: beige;
}

div.image-wrapper {
    display: block;
    position: relative;
    top: 50%;
    margin-top: -50px; /* half of your image height */
    line-height: 100px;
    width: 200px;
    float: left;
} 
```

# xpages - 专门的预输入

> ID：11286096
> 
> 赞同：1
> 
> 时间：2012-07-01T22:24:10.010
> 
> 标签：xpages

我正在尝试为工作编号字段提供预先输入功能。该字段的模式是 8 后跟尽可能多的零，以使他们键入的字符串总共有 10 位数字。换言之，8000001234 或 8001234567。在这些示例中，用户只想键入 1234 或 1234567，并让预输入返回相应的文档。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T06:05:53.843

这可以通过使用xp:typeAhead 中的参数*valueMarkup来完成。*在建议响应中，您将希望添加的值添加到*display:none*部分的字段中，类*非正式*的跨度是建议列表中显示的部分。您可以使用 HTML 代码修改/设计*非正式*部分（包括多行信息、添加图像等）

这是一个简单的例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

    <xp:inputText id="inputText1" value="#{requestScope.TypeAhead}">
        <xp:typeAhead mode="partial" minChars="1" 
            var="searchValue" valueMarkup="true">
                <xp:this.valueList>
                    <![CDATA[#{javascript:
                        var directoryTypeahead = function (searchValue:string) {

                        /*** generate your matches ***/
                        var matches = {};
                        for( var i=10;i<20;i++){
                            matches[i] = { display: "80000" + i };        
                        }

                        /*** return typeahead data ***/
                        var returnList = "<ul>";
                        for (var matchEntry in matches) {
                            var match = matches[matchEntry];
                            var matchDetails:string = [
                                "<li><div style=\"display:none;\">",
                                matchEntry,
                                "</div><span class=\"informal\"><strong>",
                                match.display,
                                "</span></li>"
                            ].join("");
                            returnList += matchDetails;
                        }
                        returnList += "</ul>";
                        return returnList;
                    }
                    directoryTypeahead(searchValue)
               }]]>
           </xp:this.valueList>
    </xp:typeAhead>
</xp:inputText> 
```

您必须更改*生成匹配*项之间的部分以满足您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:41:11.440

Roy - 另一个选择是滚动你自己的 typeAhead 而不使用开箱即用的版本

[http://xomino.com/2012/05/01/jquery-in-xpages-8-tokeninput-autocomplete/](http://xomino.com/2012/05/01/jquery-in-xpages-8-tokeninput-autocomplete/)

使用令牌自动完成，您可以控制搜索输入和显示输出 - 这样您可以显示整个 80000123 字符串，并且 123 将突出显示为用户输入的文本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T04:51:39.817

可能是部分答案 - 但不久前我偶然发现了 Rasmus Bauck 的一篇博客文章，该文章解释了一种使用您自己的代码处理预先输入调用的技术。

我没有去尝试它，但我看到了你的问题，它唤起了我的记忆。

[http://devxpages.blogspot.com.au/2010/04/extending-xpages-type-ahead.html](http://devxpages.blogspot.com.au/2010/04/extending-xpages-type-ahead.html)

希望能帮助到你，

布伦丹

# jquery - Jquery 自动完成 - JSON.Parse 错误

> ID：11286098
> 
> 赞同：1
> 
> 时间：2012-07-01T22:24:33.297
> 
> 标签：jquery, autocomplete

我正在尝试在标准 mvc 应用程序中实现这个 web api 自动完成。 [http://techbrij.com/987/jquery-ui-autocomplete-asp-net-web-api](http://techbrij.com/987/jquery-ui-autocomplete-asp-net-web-api)

这是来自 Firebug [http://sdrv.ms/N0WkHP的屏幕截图](http://sdrv.ms/N0WkHP)
![在此处输入图像描述](../Images/397804abc6e4ccb3192cafbd0c0c0c20.png)

我创建了一个控制器方法并添加了 jquery 脚本，但我不断收到“JSON.parse：意外字符”错误。我的数据中没有看到任何异常字符。

```
$(document).ready(function () {
$('#txtSearch3').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: '/home/Get',
            type: 'GET',
            cache: false,
            data: request,
            dataType: 'json',
            success: function (json) {
                // call autocomplete callback method with results
                response($.map(json, function (name, val) {
                    return {
                        label: name,
                        value: val
                    }
                }));
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //alert('error - ' + textStatus);
                console.log('error', textStatus, errorThrown);
            }
        });
    },
    minLength: 2,
    select: function (event, ui) {
        alert('you have selected ' + ui.item.label + ' ID: ' + ui.item.value);
        $('#txtSearch3').val(ui.item.label);
        return false;
    }
})
}); 
```

// 我的控制器代码

```
 public IDictionary<int, string> Get(string term)
    {
        using (myEntities context = new myEntities())

        {
            return context.Categories1.Where(x => x.CategoryName.Contains(term)).ToDictionary(x => x.CategoryId, x => x.CategoryName);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:44:47.723

尝试让您的控制器返回 JSON。

```
public JsonResult Get(string term)
{
    using (myEntities context = new myEntities())
    {
        return Json(context.Categories1.Where(x => x.CategoryName.Contains(term)).ToDictionary(x => x.CategoryId, x => x.CategoryName));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:46:01.513

好的，终于想通了，我的回报应该只是我的有效 json，不需要标签/值。

感谢您的帮助

```
$(document).ready(function () {
$('#txtSearch3').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: '/home/Get',
            type: 'GET',
            cache: false,
            contentType: "application/json; charset=utf-8",
            data: request,
            dataType: 'json',
            success: function (json) {

                response($.map(json, function () {
                    return json;

                }));

            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //alert('error - ' + textStatus);
                console.log('error', textStatus, errorThrown);
            }
        });
    },
    minLength: 2,
    select: function (event, ui) {
        alert('you have selected ' + ui.item.label + ' ID: ' + ui.item.value);
        $('#txtSearch3').val(ui.item.label);
        return false;
    }
}) 
```

});

# jquery - 启动并行加载图像并在完全加载时使用它

> ID：11286100
> 
> 赞同：0
> 
> 时间：2012-07-01T22:25:02.780
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 从远程 json 加载信息，然后将其放在每个带有缩略图的列表中。我喜欢在加载每个图像之前显示加载图像的问题。

我尝试使用每个图像中的 id 并替换它的 src。但这不是一种干净的方式。

```
// Add each json elemnt to list with image with id
$('#list_nearbys').append("<li><a href=''><img id=" + this.id + " src='" + image + "' width='115' height='115'></img></p><h3>" + this.title + "</h3><p>" + this.description + 
"</p></a></li>");

// refresh the list
$('#list_nearbys').listview('refresh');

// Here i modify the original image with a loading image
$("img[id$='" + this.id + "']").attr('src', "images/ajax-loader.gif");

// Here i should launch the load from image and when the image was loaded replace with this. 
```

任何的想法 ？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:34:05.030

使用 Jail Jquery 插件

[http://www.sebastianoarmelibattana.com/projects/jail](http://www.sebastianoarmelibattana.com/projects/jail)

# mysql - SQL CONCAT - 有趣的字符 - 但我没有笑

> ID：11286108
> 
> 赞同：18
> 
> 时间：2012-07-01T22:27:05.447
> 
> 标签：mysql, sql, collation, concat

我正在使用此查询来生成博客存档菜单，如下所示：

```
SELECT CONCAT( MONTHNAME(published) , ' ' , YEAR(published)) AS monthyear, 
COUNT(*) AS total
FROM blog_articles
WHERE status = 'Online' AND Year(published) = 2012
GROUP BY CONCAT( MONTHNAME(published) , ' ' , YEAR(published)) 
```

预期结果：

```
January 2012        103
February 2012       87
March 2012          23
April 2012          99 
```

实际结果：

![在此处输入图像描述](../Images/755ff08b76e76fc6a2868ca4c92148fd.png)

计数是正确的，但不是东方精神，它应该是：

```
May 2012       1 
```

我怎样才能摆脱有趣的角色而改用英语？

当我在 phpMyAdmin 中运行此查询时，字符很好。

**更新**

我刚刚尝试运行 conn.Execute("SET lc_time_names = 'en_US';") 并没有解决问题。为了检查，我使用了 conn.Execute("SELECT @@lc_time_names;") 它返回了“en_US”。

**另一个更新**

在 MySQL 论坛上搜索相关问题时，我发现另一个人抱怨同样的问题。MySQL 大师说：

> “这是著名的（臭名昭著的）服务器为数字和字符串的 CONCAT 返回错误的类型。必须使用（强制转换）形式才能工作，驱动程序无法分辨真正的类型是什么。”

我不确定演员表是什么或如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T01:58:53.537

愚蠢的服务器，数学是数字。

`CAST()` [CAST(enum_col AS CHAR) - 将值转换为特定类型](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

```
 SELECT CONCAT( CAST(MONTHNAME(published) as char) , ' ' , CAST(YEAR(published)) as char) AS monthyear, 
 COUNT(*) AS total
 FROM blog_articles
 WHERE status = 'Online' AND Year(published) = 2012
 GROUP BY CONCAT( MONTHNAME(published) , ' ' , YEAR(published)) 
```

`DATE_FORMAT()`您也可以尝试使用 DATE_FORMAT(YEAR(published), '%Y') 函数而不是 CAST。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T22:33:07.913

看起来你有一个 lc_time_names 设置“有趣”。

尝试：

SET lc_time_names = 'en_US';

在运行查询之前。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-01T22:33:04.447

然后将您的语言环境切换为英语。下面也是SQL。

```
SET lc_time_names = 'en_US'; 
```

[从这里](http://dev.mysql.com/doc/refman/5.0/en/locale-support.html)。

# android - 更改 Android Jelly Bean 中的振动设置

> ID：11286116
> 
> 赞同：2
> 
> 时间：2012-07-01T22:28:00.977
> 
> 标签：android, android-4.2-jelly-bean, vibration, android-audiomanager

我正在寻找我们如何更改 Jelly Bean 中的振动设置。我发现所有 pre-JB 振动设置都已被弃用，但在任何地方都看不到任何新的 AudioManager.[更改振动设置] 代码。有一个设置“振铃时振动”，我想知道如何玩。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T07:33:36.143

在android4.1你可以用它来控制“振动和振铃”

```
Settings.System.putInt(mContentResolver, Settings.System.VIBRATE_WHEN_RINGING, enable ? 1 : 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:46:14.743

从文档：

```
This method is deprecated.
Applications should maintain their own vibrate policy based on current ringer mode that can be queried via getRingerMode(). 
```

似乎谷歌希望每个应用程序在应用程序到应用程序的基础上自行处理振动设置，通过查询[getRingerMode()](http://developer.android.com/reference/android/media/AudioManager.html#getRingerMode%28%29)来调整它的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T10:46:55.980

`Settings.System.VIBRATE_WHEN_RINGING`使用@hide 注解声明，因此您可能无法在 Android Studio 中使用它。所以也许你必须`Settings.System.VIBRATE_WHEN_RINGING`用它的值替换：`"vibrate_when_ringing"`

使用 @hide 注释声明它很烦人，因为这意味着 Google 不希望外部开发人员使用它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T14:16:41.880

这个问题已经困扰了我几天了。终于让它工作了。确保您也拥有正确的权限。

使用权限 android:name="android.permission.WRITE_SETTINGS"/

```
protected void onCreate(Bundle savedInstanceState) {
    audioManager = (AudioManager) getApplicationContext().getSystemService(Context.AUDIO_SERVICE);

} 
```

然后在我的点击监听器中，我使用了以下内容：

```
 lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                    if (vibrate == 1) {
                        try {
                            Settings.System.putInt(getContentResolver(), "vibrate_when_ringing", 1);
                            audioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_ON); //Set it to never vibrate on ring:
                            audioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_NOTIFICATION, AudioManager.VIBRATE_SETTING_ON); //Set it to never vibrate on notify

                            boolean vibrateWhenRinging;
                            vibrateWhenRinging = (Settings.System.getInt(getContentResolver(), "vibrate_when_ringing") == 1);
                            Toast.makeText(MainActivity.this, Boolean.toString(vibrateWhenRinging), Toast.LENGTH_LONG).show();
                        } catch (Exception e) {
                            Toast.makeText(MainActivity.this, "System vibrate error", Toast.LENGTH_LONG).show();
                        }
                    } else {
                        try {
                            Settings.System.putInt(getContentResolver(), "vibrate_when_ringing", 0);
                            audioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_OFF); //Set it to never vibrate on ring:
                            audioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_NOTIFICATION, AudioManager.VIBRATE_SETTING_OFF); //Set it to never vibrate on notify

                            boolean vibrateWhenRinging;
                            vibrateWhenRinging = (Settings.System.getInt(getContentResolver(), "vibrate_when_ringing") == 1);
                            Toast.makeText(MainActivity.this, Boolean.toString(vibrateWhenRinging), Toast.LENGTH_LONG).show();
                        } catch (Exception e) {
                            Toast.makeText(MainActivity.this, "System vibrate error in else statement", Toast.LENGTH_LONG).show();
                        }
                    }
                } 
```

# xcode - 设置框架情节提要时禁用的属性

> ID：11286126
> 
> 赞同：0
> 
> 时间：2012-07-01T22:30:23.377
> 
> 标签：xcode, attributes

[XCode 属性](http://tinypic.com/r/v6m4hv/6)

为什么禁用 Xcode 4 设置框架的属性？

我看到很多关于此的帖子，并且我确实将视图控制器模拟指标设置为各种设置。但是，您可以在图像中看到 X 值为 320，Y 值为 250！

这会使视图控制器偏离中心。这个视图控制器在故事板中，所以这有什么不同吗？如果我看到模拟指标的“自由形式”，我可以改变宽度和高度，但 X 和 Y 值是顽固的。

为什么 X 和 Y 值很奇怪且不可更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:56:42.497

我正要删除这个问题，但要回答它，以便其他可怜的灵魂知道原因。

我完全错过了属性区域中的“原点”设置。它是坐标值左侧的框。由于某种原因，它改变了，我没有注意到。

我将它设置回左上角，以便可以正确解释坐标。

# linux - 用于 LINUX 的 MATLAB 编译器

> ID：11286130
> 
> 赞同：-4
> 
> 时间：2012-07-01T22:30:44.447
> 
> 标签：linux, matlab, gcc, matlab-deployment, matlab-compiler

我希望将一个`.m`文件（程序）从 MATLAB 编译到 Linux。我已经在 Windows 操作系统上使用

```
mcc -mv FILENAME.m 
```

我在[MATLAB 网站上](http://www.mathworks.co.uk/support/compilers/R2012a/glnxa64.html)看到我可以使用 GNU g++。

这是否以与 MATLAB 编译器类似的方式工作，只需在 MATLAB 中编写一行代码，还是我必须在 Linux 终端中运行它？

另外，这个编译器在获得所需输出方面是否存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:10:11.440

你想做的，叫做交叉编译。在这里，您希望从 Windows 计算机将 Matlab 程序交叉编译为本地 Linux 可执行文件。截至 2009 年，[这是不可能的](http://www.mathworks.com/matlabcentral/newsreader/view_thread/255455)，现在也很可能不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:39:48.037

也许您可以尝试使用 Octave for Linux。

[下载 GNU Octave](http://www.gnu.org/software/octave/download.html)

# java - 如何使用 Scanner 类计算文件中的单词？

> ID：11286135
> 
> 赞同：0
> 
> 时间：2012-07-01T22:32:51.907
> 
> 标签：java

我需要使用 Scanner 类来读取文件并计算单词重复的次数，但我需要知道单词在哪一行重复。比方说：

```
Jack goes to school
Jane goes to the gym 
```

我需要保持这样的记录

```
Jack 1
goes 1, 2 
to 1, 2
school 1
Jane 2
the 2
gym 2 
```

有任何想法吗？我不熟悉 Scanner 类，我知道我可以用它`scanner.next()`来阅读每个单词，但我不知道如何知道该单词是否在新行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:42:25.990

分两步思考问题。如果你一次读一行，然后开始解析行内的单词会怎样？这样你就知道你在哪一行 # 但不会失去使用 Scanner 解析的好处。

有几种方法可以完成第 1 部分。如果这是家庭作业，我将避免发布这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:42:30.417

Scanner 类经过精心设计，可以向您隐藏这一点。如果您想要行号，请参阅 LineNumberReader。

# jquery - 以类的单个实例为目标

> ID：11286136
> 
> 赞同：9
> 
> 时间：2012-07-01T22:32:52.437
> 
> 标签：jquery

我正在使用 css 来隐藏我想要在用户单击链接时显示的内容。页面上有多个实例。

我已经设置了一个示例，但当前单击任何链接都会显示所有内容。

[http://jsfiddle.net/paulyabsley/rHD43/](http://jsfiddle.net/paulyabsley/rHD43/)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T22:35:05.413

用于[`.siblings()`](http://api.jquery.com/siblings/)查找类`details`是链接父元素的兄弟的元素。

```
$('.item h3 a').click(function () {
    $(this).parent().siblings(".details").toggleClass("display");
});​ 
```

[**演示**](http://jsfiddle.net/rHD43/28/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:38:17.520

试试这个：

```
$('.item h3 a').click(function () {
    $(this).parent().next().toggleClass("display");
});​ 
```

演示[在这里](http://jsfiddle.net/WxPE4/)。

您当前的选择器正在做的是选择*所有*匹配的元素。上面的代码片段所做的是选择与被点击的元素相关的元素`$(this)`，在这种情况下，使用的是被点击的元素`<a>`。

因为`<a>`是在 内部`<h3>`，而是而*不是*的`<div>`兄弟，所以您需要使用选择，然后使用来获取 之后的下一个元素，即您要切换的 。`<h3>`*`<a>`[`$.parent()`](http://api.jquery.com/parent/)`<h3>`[`$.next()`](http://api.jquery.com/next/)`<h3>``<div>`*

 ** * *

这样做的更好方法是将您的点击处理程序绑定到`<h3>`。`<a>`这简化了选择器链接，并消除了标签可能存在的任何问题。这会更好，IMO：

```
$('.item h3').click(function () {
    $(this).next().toggleClass("display");
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T22:40:47.270

您可以转到根元素并搜索详细信息。

```
$(this).parent().parent().find('.details').toggleClass("display"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T22:37:55.507

一个稍微复杂一点的解决方案，但它提供了在您打开一个新描述时关闭其他描述的功能，我认为当前答案中缺少该描述。

```
$('.item h3 a').click(function () {
    // always try cache your selectors if you plan on using them repeatedly.
    var $details = $(this).parent().next("div.details");

    if ($details.hasClass('display')){
        // if the item we clicked on is already displayed - we want to hide it.
        $details.toggleClass("display");
    }else{
      // now we want to close all other open descriptions      
      $("div.details").removeClass("display");
      // and only display the one we clicked on.
      $details.toggleClass("display",true);    
    }
});​ 
```

### [工作示例](http://jsfiddle.net/rHD43/53/)

### [动画示例](http://jsfiddle.net/rHD43/56/)*

# css - 如何在具有动态高度的固定 div 标题后设置 div 内容的样式

> ID：11286141
> 
> 赞同：6
> 
> 时间：2012-07-01T22:34:18.197
> 
> 标签：css, html, position, fixed

以下情况：

```
<body>
 <div style="position:fixed; width:100%">[place holder for header]</div>
 <div style="position:relative;width:100%;margin-top:100px">[content]</div>
</body> 
```

我需要标题始终可见并位于顶部，所以这个应该是位置：固定。标题 - 高度自行调整后出现问题。如果标题高于 100 像素，则隐藏部分内容。

我如何（CSS）动态设置内容 div 关于标题结尾的起始位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T22:27:25.907

我仍在寻找仅使用 CSS 的解决方案，但目前这里有一个仅使用一行 JavaScript 的想法——使用 jQuery 时：

**JavaScript**

```
$(document).ready(function () {
    $('#content').css('marginTop', $('#header').outerHeight(true) );
}); 
```

**HTML**

```
<body>
    <div id="header" style="[…]">[place holder for header]</div>
    <div id="content" style="[…]">[content]</div>
</body> 
```

使用的好处`.outerHeight(true)`是，它可以处理您可能已应用于标题的边框和边距。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-17T21:55:13.170

唯一的 CSS 解决方案（虽然不是超级干净）可能是两次显示同一个块：第一个块“位置：固定”，第二个块“可见性：隐藏”。由于两者的高度相同，因此第二个块的作用是将页面内容下推到适当的水平。

# asp.net - 通过 asp.net 应用程序接收电子邮件

> ID：11286142
> 
> 赞同：3
> 
> 时间：2012-07-01T22:34:19.267
> 
> 标签：asp.net, .net, vb.net

我想通过我的 asp.net 应用程序向我的电子邮件地址接收电子邮件。就像通过表格发送查询的人一样。我为此使用了以下代码，似乎它什么也没做。我记得我做过我的一个网站，但不记得我是怎么做的。请在下面找到代码。

谢谢，

```
eMessage.To = "info@boilernetworkservices.co.uk"
        eMessage.From = txtEmail.Text
        eMessage.Subject = "Web Submission"
        eMessage.Body = "Web submission received from " & txtName.Text & ". Phone no: " & txtPhone.Text & "."
        eMessage.Priority = MailPriority.High
        SmtpMail.Send(eMessage) 
```

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T22:47:21.037

您的示例代码显示了如何使用[SMTP](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)发送电子邮件，但您将无法使用此协议从远程服务器检索电子邮件。

用于检索电子邮件的两种最常见的协议是[POP3](http://en.wikipedia.org/wiki/Post_Office_Protocol)和[IMAP4](http://en.wikipedia.org/wiki/Internet_Message_Access_Protocol)，不幸的是 .NET 框架没有像使用 SMTP 那样提供它们的实现。

电子邮件检索的一种选择是使用开源 POP3 客户端[OpenPop.NET](http://sourceforge.net/projects/hpop/)，这在这个 SO 问题中进行了讨论：[retrieve email using c#?](https://stackoverflow.com/questions/6474114/retrieve-email-using-c) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T15:13:03.923

我为我的企业设置了一个谷歌帐户，例如 myCompanyName@gmail.com。我用它作为中继。您必须将您的谷歌帐户设置为“允许不太安全的应用程序”。

这是我的代码，可让潜在客户填写联系我们并将信息发送给我（即使在我发布到 Azure 时也可以工作:)）：

```
private void SendEmailToMyCompany(ContactInfo contactInfo)
    {
        string message = contactInfo.Message.Replace("\n", "<br />");

        MailAddress from = new MailAddress(contactInfo.Email);
        MailAddress to = new MailAddress("myhotmailaccount@hotmail.com");
        MailMessage mailMessage = new MailMessage(from, to);

        StringBuilder body = new StringBuilder();
        body.AppendFormat($"<b>First Name:</b> {contactInfo.FirstName}");
        body.Append("<br />");
        body.AppendFormat($"<b>Last Name:</b> {contactInfo.LastName}");
        body.Append("<br />");
        body.AppendFormat($"<b>Phone:</b> {contactInfo.Phone}");
        body.Append("<br />");
        body.AppendFormat($"<b>Email:</b> {contactInfo.Email}");
        body.Append("<br />");
        body.AppendFormat($"<b>Message:</b><br /><br /> {message}");

        mailMessage.Body = body.ToString();
        mailMessage.Subject = "MyCompany Customer Contact";
        mailMessage.IsBodyHtml = true;

        string smtpHost = _config["EmailSettings:SmtpHost"];
        string port = _config["EmailSettings:Port"];
        string userName = _config["EmailSettings:UserName"];
        string password = _config["EmailSettings:Password"];

        SmtpClient client = new SmtpClient(smtpHost)
        {
            Port = int.Parse(port),
            Credentials = new NetworkCredential(userName, password),
            EnableSsl = true
        };

        client.Send(mailMessage);
    } 
```

然后这是我在 app.config 中的电子邮件设置：

```
"EmailSettings": {
"SmtpHost": "smtp.gmail.com",
"Port": 587,
"UserName": "myCompanyNameGmailAccount@gmail.com",
"Password": "**********" 
```

}

# sql-server-2008 - 从一个连接中的表中选择数据，其中记录在事务中的另一个连接中被删除/更新

> ID：11286145
> 
> 赞同：0
> 
> 时间：2012-07-01T22:35:02.793
> 
> 标签：sql-server-2008, transactions, transactionscope

我们有一个 ASP.NET Web 应用程序，它向 Windows 服务发送请求以删除/更新多个表中的记录。Windows 服务在存储过程中执行此操作，并且该调用位于 ADO.NET TransactionScope 中。

如果涉及的记录数很多，则需要 20-30 秒，在此期间如果用户尝试访问涉及这些表的 ASP.NET Web 应用程序的其他部分（将在不同的连接中），他会收到超时错误（因为交易仍在进行中）

我可以更改选择查询以包含`with(nolock)`提示或包含`SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED` 在选择存储过程中。但是，这意味着我需要更改目前不可行的所有选择存储过程。

另外，我不能使用`SNAPSHOT`事务隔离模型，因为我需要将数据库的隔离模型设置为`SNAPSHOT`此时不可能。

有什么选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:33:32.813

如果您不能将数据库更改为快照隔离，并且您不能触及所有的 SELECT 过程以允许脏读，您是否可以更改删除或更新数据的方式？你能改变你的存储过程来做小批量的删除和/或更新吗？

# android - Android设置按钮宽度为屏幕的一半

> ID：11286147
> 
> 赞同：4
> 
> 时间：2012-07-01T22:35:14.163
> 
> 标签：android, xml, layout

如何设置（在 XML 中）按钮的宽度为屏幕的一半。我发现只有包装内容、匹配父项（填满整个屏幕）和 dp 的确切数量，例如：50dp。如何设置它精确地按住屏幕？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
 android:weightSum="2"
>

 <Button
     android:id="@+id/buttonCollect"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:paddingLeft="8dp"
     android:paddingRight="8dp"
     android:text="przycisk" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Button" /> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-01T22:40:15.960

这可以通过在您的布局上使用两个小部件来完成：使用 LinearLayout 并`layout_width="fill_parent"`在两个小部件（按钮和另一个小部件）上设置，并将 layout_weight 也设置为相同的值。并且 LinearLayout 将平均分配两个小部件之间的宽度，并且您的按钮将占据屏幕的一半。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="horizontal">

 <Button
     android:id="@+id/buttonCollect"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:paddingLeft="8dp"
     android:paddingRight="8dp"
     android:text="przycisk" />

<Button
    android:id="@+id/button2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Button" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-01T22:42:57.520

这在 XML 中是不可能的。但是，您可以在 Java 中使用[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)获取显示的宽度，将其除以 2 并将其设置为按钮的宽度。像这样的东西：

```
Button button = (Button) findViewById(R.id.button);
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int width = displaymetrics.widthPixels;
int buttonWidth = width/2;
//Apply this to your button using the LayoutParams for whichever layout you have. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T23:08:23.457

使用文本视图。

```
<TextView
    android:id="@+id/textViewHelper"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" /> 
```

然后将两个按钮或其中一个按钮添加到它的左侧和/或右侧。

```
<Button
    android:id="@+id/saveList"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/deleteAllPlaylists"
    android:layout_toRightOf="@+id/textViewHelper"
    android:text="@string/save_temp_playlist" />

<Button
    android:id="@+id/deleteAllPlaylists"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/textViewHelper"    
    android:text="@string/delete_all_playlists" /> 
```

[在这里](http://sdroid.blogspot.gr/2011/01/relativelayout-alignment-trick.html)找到了答案

我在堆栈上的第一篇文章，希望对我有帮助 XD

# python - Blender中的Vim与BPY一起工作？

> ID：11286149
> 
> 赞同：4
> 
> 时间：2012-07-01T22:35:49.097
> 
> 标签：python, vim, blender

我正在尝试在 Blender 中编写 Python BPY 代码，并注意到一些编辑器模式（[source](http://en.wikibooks.org/wiki/Blender_3D%3a_Noob_to_Pro/Advanced_Tutorials/Python_Scripting/Export_scripts)），而不是重新发明轮子，我想在 Blender 文本编辑器中使用我的 Vim -syntax-highlighting-etc。那么如何在 Blender 中使用 Vim 呢？

> 您可以在外部文本编辑器或 Blender 的内置文本编辑器中编写脚本。移动到要更改为文本编辑器的面板，**单击编辑器选择按钮并选择“文本编辑器”（快捷键）SHIFT+F11。单击底部的 + 新建按钮。** 如果需要，您可以使用底部的按钮启用行号和语法着色。使用 File → New 创建一个新脚本，将下面的代码粘贴到其中，然后保存。或者，将下面的代码粘贴到文件中，然后使用 File → Open in Blender 打开该文件。作为名称，请选择扩展名为 .py 的内容，例如 wikibooks.py。将其放入 Blender 的用户脚本路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:16:11.797

从您提供的源代码来看，只要您将 python 脚本保存到该文档中提供的文件位置（例如 ~/.blender/scripts 和其他操作系统路径），您使用的文本编辑器并不重要。对搅拌机不太熟悉，因为我是通过 vim 标签回答的。看起来可能有一个插件可以使用外部编辑器：http: [//www.blendernation.com/2011/08/02/edit-blender-text-files-using-external-text-editor-plug-in/](http://www.blendernation.com/2011/08/02/edit-blender-text-files-using-external-text-editor-plug-in/)。此外，如果您使用的是 Mac，请查看 QuickCursor： http: [//www.hogbaysoftware.com/products/quickcursor/](http://www.hogbaysoftware.com/products/quickcursor/)。

# sql-server - NHibernate 错误地创建 ManyToMany 表 - 无法在可为空的列错误上定义 PRIMARY KEY 约束

> ID：11286151
> 
> 赞同：1
> 
> 时间：2012-07-01T22:36:07.177
> 
> 标签：sql-server, nhibernate, fluent-nhibernate

我刚刚开始在我的项目中实现`ISet`'s 而不是`IList`'s，因为这更好地反映了我拥有的集合。

这在创建一个表时引发了一个奇怪的错误。我得到的错误是。

> 无法对表“UserAddressAssignments”中的可为空列定义 PRIMARY KEY 约束。

我在用户和地址之间有多对多的关系。

```
public class User : BaseEntity
{
    public virtual System.Guid UserGuid { get; set; }
    public virtual string UserName { get; set; }
    public virtual Company Company { get; set; }
    public virtual Iesi.Collections.Generic.ISet<Address> UserAddressAssignments { get; set; }
} 
```

它为查找列生成的 SQL 导致了问题，如下所示。`UserId`导致问题的是可以为空 的列。

```
create table UserAddressAssignments (
    UserAddressAssignmentId INT not null,
   AddressId INT IDENTITY NOT NULL,
   UserId INT null,
   primary key (UserId, AddressId)
) 
```

奇怪的是，我在公司和地址之间有相同的关系，效果很好。

```
public class Company : BaseEntity
{
    public virtual System.Guid CompanyGuid { get; set; }
    public virtual string Name { get; set; }
    public virtual Iesi.Collections.Generic.ISet<Address> CompanyAddressAssignments { get; set; }
} 
```

这将为查找表创建正确的 SQL。

```
CREATE TABLE [dbo].[CompanyAddressAssignments](
    [CompanyId] [int] NOT NULL,
    [AddressId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
    [CompanyId] ASC,
    [AddressId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

使用具有正确非空属性的聚集键，并且没有与用户查找列一样的第三个“CompanyAddressAssignmentId”列。

公司和用户的映射覆盖也是相同的。

```
public class CompanyMappingOverride : IAutoMappingOverride<Company>
{
        public void Override(FluentNHibernate.Automapping.AutoMapping<Company> mapping)
        {
            mapping.Map(x => x.Name);
            mapping.HasManyToMany(x => x.CompanyAddressAssignments).Table("CompanyAddressAssignments").Cascade.All();
        }
}

public class UserMappingOverride : IAutoMappingOverride<User>
{
    public void Override(FluentNHibernate.Automapping.AutoMapping<User> mapping)
    {
        mapping.References(x => x.Company).Cascade.All();
        mapping.HasManyToMany(x => x.UserAddressAssignments).Table("UserAddressAssignments").Cascade.All();
    }
} 
```

有没有人对为什么这两个查找表看起来如此不同有什么建议吗？据我所知，类的结构和映射是相同的？

我现在求助于使用`IList`用户地址来解决这个问题。

这会发出这个创建 sql。

```
CREATE TABLE [dbo].[CompanyAddressAssignments](
    [CompanyId] [int] NOT NULL,
    [AddressId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
    [CompanyId] ASC,
    [AddressId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

关于可能导致这种差异的任何想法？

NHibernate 版本是 3.2.0.4000。

干杯

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:50:51.920

是的，我发现了问题所在。

我正在开发的网站已经添加了 NHibernate。为了使用代码优先/模式生成方法，我使用了一个自动化工具将现有模式转换为类，然后可以从这些类中神奇地创建模式。

我使用 NHhibernate 设计器自动生成类，然后清理实体以符合我们的标准。

[http://www.devart.com/entitydeveloper/nhibernate-designer.html](http://www.devart.com/entitydeveloper/nhibernate-designer.html)

当该工具为查找表生成一个类时，错误逐渐出现。所以 UserAddressAssignment 在系统中有自己的类。在创建多对多关系时，通常不需要这样做。在给定 ManyToMany 表的名称的情况下，在映射覆盖中指定了多对多的类和 ALSO，NHibernate 一定会感到困惑（不足为奇）。

我想指出，NHibernate Designer 必须使用的架构并没有完全清除任何未强制执行的关系，所以我不会责怪它在不需要时创建这个实体！

因此，当我删除下面给出的不必要的 UserAddressAssignment 类时，一切都按预期工作。

```
 public class UserAddressAssignment : BaseEntity
    {
        public virtual int AddressId { get; set; }
        public virtual User User { get; set; }
        public virtual Address Address { get; set; }
    } 
```

希望这对某人有所帮助！

干杯

史蒂夫

# javascript - jquery函数来搜索数组值

> ID：11286159
> 
> 赞同：-6
> 
> 时间：2012-07-01T22:38:06.970
> 
> 标签：javascript, jquery, arrays, search

我有这样的结构：

```
var var1 = { 
     array1 : ['value1','value2', ...],
     array2 : ['value3','value4', ...]
     ...
}; 
```

我需要一个 javascript 函数来搜索这个结构中的值，如果存在，这个函数将返回数组的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:44:01.273

```
function find(value, obj) {
    for (var x in obj) {
        if ($.inArray(value, obj[x]) >= 0) {
            return (x);
        }
    }
}

var var1 = {
    array1: ['value1', 'value2'],
    array2: ['value3', 'value4'],
    array3: ['value5', 'value6']
};

var value = 'value3';

alert(find(value, var1));​    ​ 
```

[**现场演示**](http://jsfiddle.net/ZnBCx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:53:43.580

```
var var1 = { 
     array1: ['value1', 'value2'],
     array2: ['value3', 'value4']
};

function search( obj, val ) {

    var arr,
        name;

    for ( var i in obj ) {

        if ( typeof obj[i] === "object" && obj[i] instanceof Array ) {

            arr = obj[i];

            arr.forEach(function( a ) {

                if ( a === val ) name = i;

            });

        }

    }

    return name;

}

search( var1, 'value4' ); // array2 
```

# php - 更新标签内的变量而不刷新

> ID：11286166
> 
> 赞同：1
> 
> 时间：2012-07-01T22:39:08.953
> 
> 标签：php, javascript, jquery, ajax

简单地说，我想在菜单内的标签中显示未读消息的数量，如下所示：

```
 <li><a id="2" style="background-image:url('menu icons/comments.png'); background-repeat: no-repeat; background-position: left; background-position-x: 5px;"
                       href= "viewMessages.php">Messages<label id="num_msg">(<?php echo $count; ?>)</a></li> 
```

我在哪里得到`$count`：

```
$num_messages = mysql_query("SELECT COUNT(m.message_id) as cnt FROM messages m INNER JOIN member_message_member mmm ON (m.message_id = mmm.message_id)
                    WHERE mmm.member_id2 = $id AND m.seen = 0") or die(mysql_error());
                    $Mcount = mysql_fetch_assoc($num_messages);
                    $count = $Mcount['cnt']; 
```

然后当用户点击消息时：

```
 $("#sub a").click(function(){
                    mesg_id = $(this).attr('msg_id');
                    page = $(this).attr('href')
                    id = $(this).attr('mID');
                    $.ajax ({
                            data: {message_id:mesg_id},
                            type: 'POST',
                            url:  'Seen_messages.php',
                            success: function(response) {
                                if (response == 1) {

                                } else {
                                    alert(response);
                                }
                            }
                        });
                }); 
```

Seen_messages.php：

```
@mysql_connect("localhost", "root", "") or die(mysql_error());
    mysql_select_db("mydb") or die(mysql_error());
    $message_id = $_POST['message_id'];
   mysql_query("UPDATE `messages` SET `messages`.`seen` = TRUE WHERE message_id={$message_id}") or die (mysql_error());
   echo "1"; 
```

**一切正常，除了我必须刷新页面才能更新`$count`，那么无论如何要更新标签内的变量而无需手动刷新？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:43:34.120

`Seen_messages.php`使用更新的未读计数进行响应，而不是 always ，`1`然后使用该响应更新用户界面：

```
// ...
success: function(response) {
   if (isNaN(response)) {
       alert('Error!');
   } else {
       $('#num_msg').text(response);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:51:43.610

如何编写一个函数来`setInterval()`不断检查服务器是否有新消息，并`<label>`使用 jQuery 更新计数。（顺便说一句，您的标签缺少结束标签！）。

```
function get_msg_count(){
    $.ajax ({
        data: {}, // not really needed
        type: 'POST',
        url:  'get_msg_count.php', // page to return your msg count
        success: function(response) {
            // update the label with the count
            // response would be the number returned from PHP
            $('#num_msg').html(response); 
            }
        }); // End $.ajax
} // End Function

// and on DOM ready
$(function(){
    // check for new messages every 3 seconds(3000ms)
    setInterval(get_msg_count(), 3000) 
}); 
```

然后您的服务器端脚本将返回消息计数，您只需更新保存计数的标签。

# networking - 为什么用 Netcat 监听端口不起作用

> ID：11286170
> 
> 赞同：7
> 
> 时间：2012-07-01T22:40:26.740
> 
> 标签：networking, netcat

我在 Ubuntu 上运行以下命令：

```
nc -l -p 5004 -v  >> /home/anders/Dropbox/netcatFiles/test 
```

其中包括一个让它在 5004 监听的命令。

我正在使用 VLC 向端口 5004 发送 RTP 流。当我在 Wireshark 中观察环回接口时，我注意到带有消息“无法到达目标”的 ICMP 数据包。

打开另一个 VLC 并告诉它在端口 5004 播放传入数据，一切正常，并且播放流。

我应该怎么做才能让 Netcat 监听端口 5004？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-01T22:47:28.043

我认为您需要添加“-u”参数以使其侦听 UDP。

默认情况下，netcat 工作在 TCP 模式，但 RTP 协议是基于 UDP 的。

> “传输控制协议 (TCP)，虽然为 RTP 使用标准化 [5]，但通常不用于 RTP 应用程序，因为 TCP 有利于可靠性而不是及时性。相反，大多数 RTP 实现都建立在用户数据报协议 (UDP) 之上”

[http://en.wikipedia.org/wiki/Real-time_Transport_Protocol](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T22:47:24.157

不要使用 -p ( [man nc (1)](http://manpages.ubuntu.com/manpages/gutsy/man1/nc.1.html) )

> -p source_port 指定 nc 应该使用的源端口，受权限限制和可用性限制。将此选项与 -l 选项结合使用是错误的。

所以只需指定

```
nc -l 5004 -v  >> /home/anders/Dropbox/netcatFiles/test 
```

# php - single.php 的 Wordpress 分页

> ID：11286174
> 
> 赞同：1
> 
> 时间：2012-07-01T22:40:44.693
> 
> 标签：php, wordpress, pagination

我在我的 Wordpress 主题中实现了基于类别的数字分页：

![分页](../Images/c66308e5a4eefd137d22fd8bacdc98c0.png)

到目前为止，我所做的是创建一个带有分页摘录列表的自定义页面模板。一旦用户单击摘录以查看完整文章，我还想对显示的返回文章列表进行分页。

据我了解，这是在主题的“single.php”中实现的，尽管我可能错了。

分页适用于我的自定义模板，但是当我尝试在 single.php 中实现自定义查询时，我认为分页试图在文章本身中找到下一页，这不是我想要实现的（因为它没有t 存在）。我想简单地对所有返回的文章进行分页，以便用户可以从该类别中的一篇文章导航到下一篇和上一篇文章到下一篇。

我已经阅读了一些关于下一个/上一个链接的内容，但我更愿意使用像[Boutros AbiChedid 的这篇博文之](http://bacsoftwareconsulting.com/blog/index.php/web-programming/add-custom-wordpress-pagination-without-plugin/)类的东西——我为我的自定义页面模板偷了这个想法，这太棒了！

我在主题的“template.php”中制作了这个类的派生类，作为我的自定义主题的分页，它工作得很好，但是在让这个通过返回的单个帖子工作时我错过了一些东西。

我是否应该放弃并使用另一个自定义页面模板，该模板每页显示 1 篇完整文章，我知道我的分页就像魅力一样？我可以这样做，但我想把它做好。这就是目标。

这是我目前在 single.php 中的内容：

```
get_header(); ?>

    <div id="primary">
        <div id="content" role="main">

      <?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; ?>
      <?php $wp_query = new WP_Query('category_name=news_and_updates&showposts=1&paged=' . $paged);
        while ($wp_query->have_posts()) : $wp_query->the_post();
        ?>

                <?php get_template_part( 'content', 'single' ); ?>

                <?php comments_template( '', true ); ?>

            <?php endwhile; ?>

    <?php if (function_exists("pagination")) {
      pagination($wp_query->max_num_pages);
    } ?>

        </div><!-- #content -->
    </div><!-- #primary --> 
```

我发现本[教程](http://wp.tutsplus.com/tutorials/wordpress-pagination-a-primer/)解释了如何通过用“paginate_links”对象替换下一个/上一个链接来调整分页。我似乎无法让它工作。

我知道我需要从 211 主题中添加类似此类的内容到自定义主题的“functions.php”中，然后将其自定义为使用数字分页并在 single.php 或 single-content.php 中调用它：

```
if ( ! function_exists( 'twentyeleven_content_nav' ) ) :
/**
 * Display navigation to next/previous pages when applicable
 */
function twentyeleven_content_nav( $nav_id ) {
    global $wp_query;

    if ( $wp_query->max_num_pages > 1 ) : ?>
        <nav id="<?php echo $nav_id; ?>">
            <h3 class="assistive-text"><?php _e( 'Post navigation', 'twentyeleven' ); ?></h3>
           <div class="nav-previous"><?php next_posts_link( __( '<span class="meta-nav">&larr;</span> Older posts', 'twentyeleven' ) ); ?></div>
            <div class="nav-next"><?php previous_posts_link( __( 'Newer posts <span class="meta-nav">&rarr;</span>', 'twentyeleven' ) ); ?></div>
        </nav><!-- #nav-above -->
    <?php endif;
}
endif; // twentyeleven_content_nav

/**
 * Return the URL for the first link found in the post content.
 *
 * @since Twenty Eleven 1.0
 * @return string|bool URL or false when no link is present.
 */
function twentyeleven_url_grabber() {
    if ( ! preg_match( '/<a\s[^>]*?href=[\'"](.+?)[\'"]/is', get_the_content(), $matches ) )
        return false;

    return esc_url_raw( $matches[1] );
} 
```

我将继续编辑这篇文章，直到我弄清楚这一点，除非有人在回答之前做过这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:42:02.387

我不确定我是否完全理解您想要实现的目标，所以如果这没有帮助，我深表歉意。

从外观上看，您希望在页面内嵌套自定义循环。如果您只想自定义一个常规的帖子列表，那么您应该查看archive.php，而不是single.php。[查看此层次结构](http://codex.wordpress.org/Template_Hierarchy)以了解不同模板类型的详细信息。在最简单的形式中，存档页面用于显示多个帖子 (archive.php)，而单个页面用于显示单个帖子/页面 (single.php)。

对于页面内的自定义循环，避免使用 $wp_query，因为它用于您正在查看的实际页面并将驱动

对于分页，我同意本教程并使用[paginate_links](http://codex.wordpress.org/Function_Reference/paginate_links)。使用一点 CSS，这应该会给您想要的效果。

所以总而言之，查询应该看起来像这样，几乎是最简单的形式。

```
$args=array(); // Set $args with whatever parameters for your query
$args['category_name']='news_and_updates';
$args['showposts']=1;
$args['paged']=(get_query_var('paged') ? get_query_var('paged') : 1); // Get the current page, or show page 1.
$search=new WP_Query($args) 
  if($search->have_posts()) :
      while($search->have_posts()) : $search->the_post();
        the_title(); // Whatever for displaying each post.
        the_excerpt();
      endwhile;
    /* Pagination - This assumes you have 'pretty permalinks'. */
    $ulpn=99999999; // Should be a bigger number than the number of pages you'll ever produce.
    $pagination=paginate_links(array(
      'base'=>str_replace($ulpn,'%#%',esc_url(get_pagenum_link($ulpn))),
      'format'=>'/page/%#%',
      'current'=>max(1,get_query_var('paged')),
      'total'=>$search->max_num_pages,
      'prev_text'=>'<',
      'next_text'=>'>',
      'type'=>'array')); // There are other parameters you can use to customise this - check the codex using the link above.
      if($pagination) { ?>
        <div class="pagination"><?php foreach($pagination as $page) { echo $page; } ?></div>
      <?php }
  else : ?>
    <h2>Sorry, no results found</h2>
    <p>Try searching, or using the menu to find what you're looking for.</p> // Handle no results with whatever message
  endif; 
```

# c# - 为什么这些辅助线程不结束它们的执行？

> ID：11286177
> 
> 赞同：0
> 
> 时间：2012-07-01T22:40:56.177
> 
> 标签：c#, .net, multithreading, thread-safety

我正在创建一个控制台应用程序，它应该从网络接收消息以便处理它们。首先我创建了一个单例类来确保所有类都可以访问同一个队列：这个类是`ProcessingQueue`.

```
public class ProcessingQueue
{
    public class ItemToProcess
    {
        public string SourceClientId { get; set; }
        public IMessage ReceivedMessage { get; set; }
    }

    private int m_MaxSize = 20;
    private Queue<ItemToProcess> m_InternalQueue;

    private static volatile ProcessingQueue m_Instance = null;
    private static readonly object syncRoot = new object();

    private ProcessingQueue()
    {
        m_InternalQueue = new Queue<ItemToProcess>();
    }

    public static ProcessingQueue Instance
    {
        get
        {
            if (m_Instance == null)
            {
                lock (syncRoot)
                {
                    if (m_Instance == null)
                    {
                        m_Instance = new ProcessingQueue();
                    }
                }
            }
            return m_Instance;
        }
    }

    public int MaxSize
    {
        get
        {
            lock (syncRoot)
            {
                return m_MaxSize;
            }
        }
        set
        {
            if (value > 0)
            {
                lock (syncRoot)
                {
                    m_MaxSize = value;
                }
            }
        }
    }

    public void Enqueue(String source, IMessage message)
    {
        lock (syncRoot)
        {
            while (m_InternalQueue.Count >= m_MaxSize)
            {
                Monitor.Wait(syncRoot);
            }
            m_InternalQueue.Enqueue(new ItemToProcess { SourceClientId = source, ReceivedMessage = message });
            if (m_InternalQueue.Count == 1)
            {
                Monitor.PulseAll(syncRoot);
            }
        }
    }

    public ItemToProcess Dequeue()
    {
        lock (syncRoot)
        {
            while (m_InternalQueue.Count == 0)
            {
                Monitor.Wait(syncRoot);
            }
            ItemToProcess item = m_InternalQueue.Dequeue();
            if (m_InternalQueue.Count == m_MaxSize - 1)
            {
                Monitor.PulseAll(syncRoot);
            }
            return item;
        }
    }

    public int Count
    {
        get
        {
            lock (syncRoot)
            {
                return m_InternalQueue.Count;
            }
        }
    }
} 
```

然后我实现了项目的主类如下。

1.  首先，共享队列被实例化。
2.  然后我设置了一个计时器来模拟保活消息（第一个生产者）的到达。
3.  然后我创建了消费者线程（`processing`对象）。
4.  然后我创建了另一个生产者线程（`generating`对象）。
5.  最后，我运行所有线程和计时器。

    类程序{静态处理队列队列=处理队列.实例；静态 System.Timers.Timer keep_alive_timer = new System.Timers.Timer(10000);

    ```
    private static volatile bool running = true;

    static void Main(string[] args)
    {
        queue.MaxSize = 30;
        keep_alive_timer.Elapsed += new ElapsedEventHandler(delegate(object sender, ElapsedEventArgs e)
        {
            KeepAliveMessage msg = new KeepAliveMessage(Guid.NewGuid());
            Console.WriteLine("Keep Alive: " + msg.MsgId);
            queue.Enqueue("", msg);
        });
        keep_alive_timer.Enabled = true;
        keep_alive_timer.AutoReset = true;

        Thread processing = new Thread(delegate()
        {
            while (running)
            {
                Console.WriteLine("Number of elements in queue: {0}", queue.Count);

                ProcessingQueue.ItemToProcess msg = queue.Dequeue();
                Console.WriteLine("Processed: msgid={0}, source={1};", msg.ReceivedMessage.MsgId, msg.SourceClientId);

                Thread.Sleep(1500);
            }
        });

        Thread generating = new Thread(MessagesFromNetwork);

        processing.Start();
        keep_alive_timer.Start();
        generating.Start();

        Console.WriteLine("RUNNING...\n");
        Console.ReadLine();

        running = false;
        keep_alive_timer.Stop();
        Console.WriteLine("CLOSING...\n");

        //processing.Abort();
        //generating.Abort();

        bool b1 = processing.Join(TimeSpan.FromSeconds(5));
        bool b2 = generating.Join(TimeSpan.FromSeconds(5));

        Console.WriteLine("b1 {0}", b1);
        Console.WriteLine("b2 {0}", b2);
        Console.WriteLine("END");
        Console.ReadLine();
    }

    static void MessagesFromNetwork()
    {
        string[] sourceClients = { "1", "2", "3", "4", "5" };
        while (running)
        {
            IMessage msg; // interface IMessage
            Random random = new Random();
            int type = random.Next(2);
            switch (type)
            {
                case 0:
                    msg = new KeepAliveMessage(Guid.NewGuid());   // implements IMessage
                    break;
                case 1:
                    msg = new TaskMessage(Guid.NewGuid(), ...);   // implements IMessage
                    break;
                default:
                    throw new Exception("Messaggio non valido!");
            }
            Console.WriteLine("New message received: " + msg.MsgId);
            queue.Enqueue(sourceClients[random.Next(sourceClients.Length)], msg);
            Console.WriteLine("... message enqueued: " + msg.MsgId);
            Thread.Sleep(500);
        }
    } 
    ```

    }

在执行过程中按*Enter*`running` ，变量变为 false，两个线程都应该终止。然而这并不总是发生，事实上这两种方法之一`Join`没有返回控制：出于这个原因，我在`Join`方法中指定了一个超时，但是在`Console.WriteLine("END");`控制台应用程序冻结之后（第二个`Join`返回`false`）。

也许第二个线程没有正确终止......为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:53:39.513

似乎 Dequeue 或 Enqueue 可以进入 a `Monitor.Wait()`，当运行停止时，没有人脉动。

您等待 5 秒，但请注意 MaxSize * 1500 > 5000

我无法直接找出定时器频率。

# c++ - C++ 文件 I/O - 程序挂起

> ID：11286180
> 
> 赞同：1
> 
> 时间：2012-07-01T22:41:35.317
> 
> 标签：c++, input

我一直在处理一个家庭作业问题；这是描述：

> 编写一个程序，读取一个包含 0-200 范围内学生考试成绩的文件。然后，它应该确定得分在以下每个范围内的学生人数：0-24、25-49、50-74、75-99、100-124、125-149、150-174 和 175-200。输出分数范围和学生人数。（使用以下输入数据运行程序：76、89、150、135、200、76、12、100、150、28、178、189、167、200、175、150、87、99、129、149、 176、200、87、35、157、189。）

以下是我制作的程序：

```
#include <iostream>
#include <fstream>
using namespace std;

int main() 
{
//declaring variables
ifstream myfile("data.txt");
double grades[26];
int i, studentNumber=0;
int score0_24=0, score25_49=0, score50_74=0,
    score75_99=0, score100_124=0, score125_149=0,
    score150_174=0, score175_200=0;

cout << score150_174 << endl;

//initializing grades array
for(i=0; i<26; i++)
{
    grades[i] = 0;
    cout << grades[i] << " ";
}

//getting data from text file
    for(i=0; i<26; i++)
        {
            myfile >> grades[i];
            cin.ignore(2);
            studentNumber++;
        }

    myfile.close();

//finding number of people for each score range
for(i=0; i<26; i++)
{
    if(grades[i] <= 24)
        score0_24++;
    if(grades[i] >= 25 && grades[i] <= 49)
        score25_49++;
    if(grades[i] >= 50 && grades[i] <= 74)
        score50_74++;
    if(grades[i] >= 75 && grades[i] <= 99)
        score75_99++;
    if(grades[i] >= 100 && grades[i] <= 124)
        score100_124++;
    if(grades[i] >= 125 && grades[i] <= 149)
        score125_149++;
    if(grades[i] >= 150 && grades[i] <= 174)
        score150_174++;
    if(grades[i] >= 175 && grades[i] <= 200)
        score175_200++;
}

//outputing results
cout << "Number of students: " << studentNumber << endl;
cout << "0-24: " << score0_24 << endl;
cout << "25-49: " << score25_49 << endl;
cout << "50-74: " << score50_74 << endl;
cout << "75-99: " << score75_99 << endl;
cout << "100-124: " << score100_124 << endl;
cout << "125-149: " << score125_149 << endl;
cout << "150-174: " << score150_174 << endl;
cout << "175-200: " << score175_200 << endl;

return 0;
} 
```

我拥有的文件与该项目位于同一文件夹中，称为：

> 数据.txt

并包含以下内容：

> 76, 89, 150, 135, 200, 76, 12, 100, 150, 28, 178, 189, 167, 200, 175, 150, 87, 99, 129, 149, 176, 200, 87, 35, 157, 189

当我运行程序时，它会在我从文件中读取数据的 for 循环中暂停。我已经尝试在之前和之后做一些 cout 语句，这似乎是问题所在。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:27:05.963

我有一些建议给你，虽然你没有问:)...

1）不要先收集成绩然后再处理它们，而是将你的循环组合成 1，这样一读到值就可以用它做一些事情。这消除了拥有`grades`数组和大约一半代码的需要。

2) 不要硬编码 26 个等级，而是从文件中读取直到最后：

```
for(int grade = 0; myFile >> grade; )
{
    if(myFile.peek() == ',')
         myFile.ignore(); // <--- this is why your version wasn't working (you were calling cin.ignore instead)

    // do something with grade here
} 
```

3) 不要为 0-24、25-49 等创建 8 个计数器，而是创建一个 8 的数组并使用整数数学计算要访问的索引。

通过这些更改，您应该能够将其缩减为 15-20 行清晰可读的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-29T03:17:32.833

```
**File to read in named test.txt located @ c:\\users\\desktop\\test.txt**

76 89 150 135 200 76 12 100 150 28 178 189 167 
200 175 150 87 99 129 149 176 
200 87 35 157 189
----------------------------------------------------------
#include <iostream>
#include <fstream>

using namespace std;
int main()
{
    ifstream infile;
    int scores[26] = { 0 };  
    int scoreCount[8] = { 0 };

   infile.open("c:\\users\\desktop\\test.txt");
   if (infile)
        for (int i= 0; i < 26; i++) {    //read file txt into scores array
            infile >> scores[i];
            if (!infile)
                break; }

   for (int i = 0; i <= scores[i]; i++) {  //index score count into scoreCount array
       int index = scores[i] / 25;
       if (index >= 0 && index < 8)
            scoreCount[index]++;
                else if (scores[i] == 200)
                    scoreCount[7]++; }

   int min = 0;
   int max = 24;

   for (int i = 0; i < 8; i++) {              //print ranges & score count
       cout << min << " - " << max << " ";
       cout << scoreCount[i];
       cout << endl;
       min += 25;
       max += 25;
       if (max == 199) max = 200; }

infile.close();

return 0;
} 
```

# sql - 从 PHP 到 Django ORM 的 Django 复杂 MySQL 查询，具有多个连接

> ID：11286186
> 
> 赞同：0
> 
> 时间：2012-07-01T22:42:47.810
> 
> 标签：sql, django, orm, kohana

我有来自 Kohana 的这段代码（它很容易理解），我想将它转换为 Django ORM 给定 ff. 楷模：

```
class Item(models.Model):
    glasses = models.ManyToManyField(Glass, through="ItemGlass")
    collection = models.ForeignKey(Collection)

class ItemGlass(models.Model):
    glass = models.ForeignKey(Glass)
    item = models.ForeignKey(Item)

class Collection(models.Model):
    name = models.CharField(max_length=100)

class Code(models.Model):
    code = models.CharField(max_length=30)
    description = models.TextField()

class Glass(models.Model):
    collection = models.ForeignKey(Collection)
    code = models.ForeignKey(Code) 
```

和 php 查询（使用 Kohana 的数据库库）

```
$this->select(
                array('cd.id', 'id'), 
                array('cd.description','description'),
                array('COUNT(DISTINCT("items.id"))', 'count')
            )
                    ->from('items')
            ->join(array('collections', 'c'))
            ->on('c.id', '=', 'items.collection_id')
            ->join(array('glasses', 'g'))
            ->on('g.collection_id', '=', 'c.id')
            ->join(array('code', 'cd'))
            ->on('cd.id', '=', 'g.code_id')
            ->where('items.discontinued', '=', FALSE)
            ->group_by('cd.id'); 
```

**注意：**您看到的“数组”子句被翻译为

```
"SELECT cd.id AS id, cd.description AS description, COUNT(DISTINCT(items.id) AS count" 
```

问题是我该怎么做？在这种情况下，我无法成功使用 select_related 来连接多个表，并且我找不到用于查询的好的“过滤技巧”。有任何想法吗？

**编辑：**我正在考虑用纯 SQL 来做，但如果可以完成 Django ORM 查询，我宁愿避免它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T23:56:33.597

经过一个小时的“撞头”后，我想出了这个：

```
glasses = Code.objects.filter(glass__collection__item__discontinued=False)\
        .values('id', 'description')\
        .annotate(count=Count('glass__collection__item__id', distinct=True)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:01:11.307

绝对不要使用 SQL，这是一个简单的查询，使用 ORM 应该没有问题。使用类似的东西：

```
Code.objects.filter(glass__item__discontinued=False) \
    .annotate(count=models.Count('glass__item__id')) 
```

`.values(...)`如果您只想检索特定列，则可以在其末尾添加 a ，如您的 php 示例中所示。

# parsing - 如何将带有 Unicode 转义等的 Java 字符串从 Scala JavaTokenParsers 解码为未转义的字符串？

> ID：11286191
> 
> 赞同：4
> 
> 时间：2012-07-01T22:43:23.507
> 
> 标签：parsing, scala, escaping, decode, unicode-escapes

`JavaTokenParsers`in Scala 提供了方便的正则表达式来匹配整数和浮点数，以及双引号字符串。但仅此而已。如何将这些字符串转换回底层转换对象？`toDouble`对于数字，使用or等​​很容易做到这一点`toInt`。但是你如何对字符串做等价的呢？例如，如果我输入字符串

```
"Unicode \u20ac is a Euro sign, which I would write \\u20ac in a string. \243 is a pound sign.\n\r And \f is a \"form feed\", with embedded quotes.\n\r" 
```

然后我运行它`JavaTokenParsers`，我将适当地得到一个正确解析嵌入引号的字符串，但它的第一个和最后一个字符有一个双引号字符，以及许多反斜杠序列。如何获得处理了转义序列的等效 Java 字符串？我不敢相信没有库函数可以做到这一点，但找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:18:07.667

似乎没有这样的函数——至少在 Scala 编译器中没有使用。不过，这不是一个决定性的答案，也许后来引入了一个库函数。

如果您想阅读（或复制粘贴）此代码，这是我找到的相关代码。Scala 编译器的标记化逻辑分布在不同的文件中。顶级方法似乎是[`fetchToken`](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/ast/parser/Scanners.scala#L338)in `src/compiler/scala/tools/nsc/ast/parser/Scanners.scala`，它又委托给逻辑 in `src/compiler/scala/tools/nsc/util/CharArrayReader.scala`（它的祖先之一），特别是[`nextChar`](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/util/CharArrayReader.scala#L38)and `potentialUnicode`。其他逃逸在 中处理[`getLitChar`](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/ast/parser/Scanners.scala#L775)，再次在中处理`Scanners.scala`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:38:45.230

好的，我环顾了一下。关于 stackoverflow 的另一个问题似乎解决了一个相关问题：

[如何在 Java 中取消转义 Java 字符串文字？](https://stackoverflow.com/questions/3537706/howto-unescape-a-java-string-literal-in-java)

Tom Christiansen 提供了一些源代码来执行此操作。

我还发现 Apache Commons 具有执行此操作的功能：

`org.apache.commons3.lang.StringEscapeUtils.unescapeJava()`

如果要处理八进制转义，则需要使用 Commons 3 版本。Christiansen 的上述版本具有更多功能，因为它可以处理在其他地方看到的常见转义序列（例如 Java 正则表达式、Perl 和 Python 转义、C 转义），这些在 Java 中不存在：

1.  `\a`对于铃 ( `\007`)，`\e`对于 ESC
2.  `\UXXXXXXXX`对于 UCS-4 完整的 Unicode 代码点（包括那些不在 BMP 中的代码点）
3.  `\xXX`用于十六进制转义
4.  `\cX`用于控制转义，例如`\cH`= `^H`= `\b`=`\010`
5.  `\0`对于 NULL ( `\000`)

# cookies - 谷歌机器人是否忽略负载平衡器粘性 cookie？

> ID：11286193
> 
> 赞同：1
> 
> 时间：2012-07-01T22:43:45.470
> 
> 标签：cookies, amazon-web-services, web-crawler, session-cookies

我已经在 AWS 上设置了一个负载均衡器，并且*“启用了应用程序生成的 Cookie 粘性”*（因为您可以登录到网站的某些部分。）

我需要知道 google bot 是否会忽略此 cookie，还是会卡在一台服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:42:12.117

从“[谷歌友好的网站](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=40349)”：

> 如果 JavaScript、cookie、会话 ID、框架、DHTML 或 Macromedia Flash 等功能使您无法在文本浏览器中查看整个站点，则蜘蛛可能难以抓取它。

网络上的共识是**GoogleBot 不处理 cookie**。

我也很难理解**为什么**这样的网络爬虫会想要处理 cookie。

# clojure - 访问 clojure webnoir 项目中的资源文件

> ID：11286208
> 
> 赞同：4
> 
> 时间：2012-07-01T22:47:38.840
> 
> 标签：clojure, leiningen, noir

我正在使用具有以下目录结构的 Leiningen 开发一个小型 Clojure 项目：

> *   项目
>     *   源代码
>     *   测试
>         *   xxx
>             *   登录.clj
>     *   资源
>         *   上市
>             *   css
>                 *   引导程序.css

在 test 目录中的 login.clj 文件中，我试图在 respuces/publi/css 目录中搜索 bootstrap.css 文件：

```
(def css-file "/css/bootstrap.css")
(def css-contents (slurp css-file)) 
```

返回文件未找到错误：

> 线程“主”java.io.FileNotFoundException 中的异常：/css/bootstrap.css（没有这样的文件或目录），正在编译：（login.clj:10）

所以问题很简单，我应该怎么做才能访问文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T08:41:27.343

您实际上需要使用“资源”-要么

1.  **(clojure.java.io/resource "relative/path")**，它返回文件的 URL，

2.  **(noir.io/get-resource"relative/path")**返回文件，或者

3.  **(noir.io/slurp-resource "relative/path")**返回文件的内容。

别担心——你不是第一个遇到这个问题的人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:42:45.540

Slurp will read a file off the filesystem, not the classpath. So what with what you're trying to do there, you're attempting to read a file at /css/bootstrap.css from the root of your filesystem, and it doesn't exist, just like the error message says.

If you're just reading it in for testing purposes, then you should be able to slurp it with a relative path like resources/public/css/bootstrap.css, assuming you're running the tests off the project directory.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T03:52:50.690

Check what your actual classpath is when running. Chances are the classspath references the ./resources directory, and not the ./resources/public directory.

Try using "/public/css/bootstrap.css" instead to solve this.

# javascript - 如何知道 window.onbeforeunload 中的用户响应

> ID：11286210
> 
> 赞同：2
> 
> 时间：2012-07-01T22:47:59.437
> 
> 标签：javascript, function

我写了一个函数，它在刷新之前警告用户（我出于某种原因需要它）。我还想实现的是，如果用户单击`Leave this page`. 如果用户点击`stay on this page`我什么都不做。

```
function warnuser()
{
    return "Don't refresh the page.";
}

window.onbeforeunload = warnuser;
//if returns true call another function! 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:01:04.833

如果用户决定离开你不能调用函数或其他任何东西的页面，你的控制就结束了......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-18T14:54:37.817

```
function callbackExit(){
    setTimeout(function(){
        //User warned yet he stay on the page.
        //Do your code here now.
    }, 1000);
}   
function warnuser()
{
    callbackExit();
    return "Don't refresh the page.";
}

window.onbeforeunload = warnuser; 
```

您可以像这样跟踪单击“留在页面上”，但如果用户单击“离开站点”按钮，您仍然无法执行任何操作。

# java - 在 AsyncTask 完成后执行操作

> ID：11286214
> 
> 赞同：1
> 
> 时间：2012-07-01T22:49:05.013
> 
> 标签：java, android, android-asynctask

我正在使用 AsyncTask 来执行登录任务。该任务连接到一个 PHP 脚本并返回一个 JSON 对象。如果身份验证正确，则 JSON 对象包含一个 user_id，如果登录成功，它还返回一个布尔值。

我希望 UI 线程在布尔返回 true 时运行一个活动，如果它返回 false，则运行一个不同的活动。

我可以`OnExecutePost()`用来做这个吗？有人可以指导我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:50:53.053

是的。[onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)非常适合这个。但是，请注意，如果您的任务被取消，则不会调用此方法，您可能希望处理这种情况，类似于在正常工作流程中返回 false 的布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:54:45.113

您可以使用 onPostExecute ，但要处理调用任务时的情况，请使用 onCancelled 来处理[这种](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)情况

# c# - 具有浮点值的 C# 字典？

> ID：11286215
> 
> 赞同：-1
> 
> 时间：2012-07-01T22:49:11.037
> 
> 标签：c#, asp.net, generics, dictionary

我有带有小数的值，我想将它们存储在字典中以便于访问。但是在 C# 中它只允许一个字符串和一个 int。还有其他方法可以达到类似的结果吗？

这是我的代码：

```
 littledictionary.Add("price", (float)0.0);
   littledictionary["price"] = (float)SQLreader["price"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T22:51:39.337

你什么意思？您可以使用基于浮点数的字典：

```
var littledictionary = new Dictionary<string,float>();
littledictionary.Add("price", (float)0.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:54:00.540

或者，您也可以使用列表：

```
List<Decimal> list1 = new List<decimal>(); 
```

您可以在此处查看如何使用列表：http: [//www.dotnetperls.com/list](http://www.dotnetperls.com/list)

希望这可以帮助。

# android - fillAfter 在 Android XML 中不起作用

> ID：11286219
> 
> 赞同：1
> 
> 时间：2012-07-01T22:50:11.057
> 
> 标签：android

我想淡出一个形状并隐藏它。我在我的 xml 文件中使用了 fillAfter="true"。但它不起作用。

这是我的代码：

```
<?xml version="1.0" encoding="utf-8" ?>

<set
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator" >
    <alpha
        android:toAlpha="0"
        android:fillAfter="true"
        android:duration="300" />
</set> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-18T12:28:47.657

在 - 的里面`<set tag, use ...`

代码

```
<?xml version="1.0" encoding="utf-8" ?>

<set
    xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/linear_interpolator"
   android:fillAfter="true" >
   <alpha
       android:toAlpha="0"
       android:duration="300" />
</set> 
```

或 setFillAfter 和 setFillEnable 是您需要的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T23:09:25.137

> 如果 fillAfter 为 true，则此动画执行的转换将在完成后持续存在。

然而，不直观的是，Android 上的动画实际上并没有为您应用动画的 View 本身设置动画，而是为 View 的位图表示设置动画。因此，在动画之后，视图会恢复到动画之前的状态 -`setFillAfter`无法帮助您，**因为在这种情况下，您应该将视图的属性设置为与动画表示相同。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:06:42.540

确保当您的新动画尝试“填充后”时，此视图上的任何其他动画或所有内部视图都不起作用

# php - PHP Imagick：直接将图像写入 Amazon S3？

> ID：11286222
> 
> 赞同：2
> 
> 时间：2012-07-01T22:51:16.293
> 
> 标签：php, amazon-s3, amazon-web-services, imagick

我是否可以使用 Imagick 中的 writeImage 函数将图像直接写入 S3 存储桶？如果是这样，怎么做？我对 Amazon S3 SDK 还很陌生，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T22:58:10.247

使用 writeImage，可能不是（它需要文件路径作为参数，从而将文件写入文件系统），但您可以`getImageBlob`将图像作为二进制字符串获取，然后您可以轻松地将其写入具有特定名称的 S3。使用 S3 PHP 库对您来说是最简单的，AWS PHP SDK 中有一个官方的，或者也有 3rd 方库，例如这个：

```
https://github.com/mackstann/amazon-s3-php-class
// Put an object from a string:
$s3->putObject($string, $bucketName, $uploadName, S3::ACL_PUBLIC_READ) 
```

# xcode - Xcode4：应用程序中的每个库都必须具有与应用程序本身相同的配置吗？

> ID：11286223
> 
> 赞同：1
> 
> 时间：2012-07-01T22:51:21.987
> 
> 标签：xcode, xcode4

假设我有一个依赖于库“BarLib”的应用程序“FooApp”。

“FooApp”有几种配置：Debug、Release、AdHoc、AppStore、Profile、Distribution等...

“LibBar”只有两个：Debug 和 Release。

有没有办法将 FooApp 的配置映射到 LibBar 中更有限的配置集？

还是我必须鼓励拥有 LibBar 的团队添加更多配置？（可行但很糟糕）

谢谢！

# javascript - 如何在 JS 中管理浏览器功能？

> ID：11286228
> 
> 赞同：0
> 
> 时间：2012-07-01T22:52:04.153
> 
> 标签：javascript, jquery, cross-browser

我建立了一个网站，它使用`$(window).scroll()`jQuery 事件以编程方式在某些元素中设置动画。由于 iOS 不以同样的方式支持此事件，因此在 iPad 上的体验很糟糕。

如何在 Javascript 中检测浏览器，以便我可以管理不同浏览器中的体验？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:05:53.897

你问错了问题约翰。浏览器检测和浏览器特定代码是邪恶的。它使您的项目变得复杂且难以在未来处理。阅读有关特征检测的更多信息。还有一些 jQ 插件可以帮助您制作像[这样的迷你 iOS 卷轴](https://github.com/cubiq/iscroll)

像这样很容易，您可以添加本机滚动：

```
 var scrollContent,
    scrollNav;

function loaded() {
    scrollContent = new iScroll('contentWrapper');
    scrollNav = new iScroll('navWrapper');
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

document.addEventListener('DOMContentLoaded', loaded, false); 
```

# c# - 同时按下多个按钮

> ID：11286229
> 
> 赞同：6
> 
> 时间：2012-07-01T22:52:38.150
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, multi-touch

在我的 WP 7.1 应用程序中，我有一个包含多个按钮的页面。
我注意到当任何一个按钮被按下时，其他按钮都不能被按下。

我该如何克服呢？我需要能够允许用户同时按下多个按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T00:31:14.140

不幸的是，您不能一次处理多个按钮单击。不过有办法解决它。您可以使用 Touch.FrameReported 事件来获取用户在屏幕上触摸的所有点的位置（我之前在 WP7 上的某处读过它限制为两个但我无法验证）。您还可以检查用户正在执行的操作（例如向下、移动和向上），这可能对您正在执行的操作很有用。

把它放在你的 Application_Startup

```
Touch.FrameReported += new TouchFrameEventHandler(Touch_FrameReported); 
```

把它放在你的 App 类中

```
void Touch_FrameReported(object sender, TouchFrameEventArgs e)
{
    TouchPoint primaryTouchPoint = args.GetPrimaryTouchPoint(null);

    TouchPointCollection touchPoints = args.GetTouchPoints(null);

    foreach (TouchPoint tp in touchPoints)
    {
        if(tp.Action == TouchAction.Down)
        {
        //Do stuff here
        }

    }
} 
```

在“Do stuff here”部分中，您将检查 TouchPoint tp 是否在按钮占用的区域内。

```
//This is the rectangle where your button is located, change values as needed.
Rectangle r1 = new Rectangle(0, 0, 100, 100); 
if (r1.Contains(tp.Position))
{
   //Do button click stuff here.
} 
```

那应该有希望为你做。

# android - API 级别 >11 的 SDK 平台未显示

> ID：11286233
> 
> 赞同：0
> 
> 时间：2012-07-01T22:53:28.770
> 
> 标签：android, eclipse, sdk

全部-我回到我的 SDK 管理器下载适用于 Android 2.2 和 2.3（API 级别 8 和 10）的 SDK 平台，但遇到了以下屏幕： ![在此处输入图像描述](../Images/98e3ffdc2914cc33375643ef1c45924b.png)

如您所见，API 10 和 8 下没有 SDK 平台下载，（更不用说根本没有其他 API 级别，没有 API 5、6、7），只有该平台的附加功能（例如 Dual屏幕 API）。有人有什么想法吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:01:23.313

某些 API 级别未显示，因为它们已被弃用。要显示这些，请选中`Obsolete`底部栏中的选项。此外，要查看 JellyBean 的 API，您必须将工具更新到 rev 20。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:00:40.613

为 Eclipse 更新 ADT 插件（帮助->检查更新）。重新启动 Eclipse。

# html - 无法更改 html 'select' 标签内 'option' 的背景颜色

> ID：11286238
> 
> 赞同：2
> 
> 时间：2012-07-01T22:54:03.797
> 
> 标签：html, css

我有一个`select`html 标签，我希望在行之间交替，下面是我的`background-color`尝试`option`

```
<select name="j_idt8:j_idt13" size="1">    
   <option value="value1" class="option1">label1</option>
   <option value="value2" class="option2">label2</option>
   <option value="value3" class="option1">label3</option>
   <option value="value4" class="option2">label4</option>
   <option value="value5" class="option1">label5</option>
</select>

option.option1 {
   background-color: #ccc;
}

option.option2 {
   background-color: #fcc;
} 
```

这仅适用于 FF，但不适用于 Chrome 和 safari，CSS 专家可以帮我解决这个问题吗？我也附上了 jsfiddle，这样你就可以在不同的浏览器之间打开它们。

[http://jsfiddle.net/cYEE2/](http://jsfiddle.net/cYEE2/)

**注意**：Chrome：20.0.1132.47
Safari：5.1.7
Firefox：13.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:57:00.790

并非所有浏览器都支持着色选择选项，即使在其中通常也存在填充等问题。

我的建议是在支持它的浏览器中简单地使用它（Firefox 完全，Chrome 部分但完全忽略填充和 Safari），而在那些不支持它的浏览器中忘记它。

其他浏览器根本不支持此选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:56:31.060

不幸的是，能够使用 CSS 更改 SELECT 元素中单个 OPTION 元素的格式是特定于浏览器的。您上面的 CSS 不适用于某些浏览器。

您可以使用 SELECT 元素的 CSS 友好替代方案，例如 jQuery 插件。

# ios5 - NSURLConnection 线程异步完成但仍然冻结 UI

> ID：11286246
> 
> 赞同：0
> 
> 时间：2012-07-01T22:55:56.563
> 
> 标签：ios5, nsurlconnection, nsurlrequest

我采用了一个 iOS 应用程序并且遇到了异步请求问题。

我们有一个具有以下代码的 WebService 类；

```
// create the request
NSURLRequest* request=[NSURLRequest requestWithURL:url
                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                       timeoutInterval:30.0];

self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (self.connection) {
  self.receivedData = [NSMutableData data];
} else { 
```

这在后台线程中看起来很普通 NSURLRequest 。但是，一旦调用结束，它就会冻结 UITableViewController。也许我误解了应该发生的事情，但它似乎应该能够滚动表格视图。上面的代码有什么问题吗？我正在调试的一种可能性是我正在使用 SDWebImage 来降低缩略图，并且冻结可能是由于下载了所述图像，但我认为这将发生在后台线程中。上面的 NSURLRequest 是否应该阻塞主线程，有什么方法可以验证我可以验证 SDWebImage 是这里的罪魁祸首吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:24:39.697

典型的模式是创建请求。将 self 设置为委托并处理委托方法中的响应，如下所示：

```
-(void)someMethod
{
     NSURLRequest* request=[NSURLRequest requestWithURL:url
         cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
     self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
     if(statusCode == 200) // or whatever makes sense in your situation.
         self.receivedData = [NSMutableData data];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [requestData appendData:data];
} 
```

Or some such.... but then Im not sure where your calling all this stuff from... and you appear to be doing BOTH in the same method, which may or may not be connection:didReceiveResponse.

# java - 如何在没有扩展的类之间共享变量

> ID：11286249
> 
> 赞同：1
> 
> 时间：2012-07-01T22:56:22.840
> 
> 标签：java, inheritance, subclass, superclass

在我正在开发的游戏中，一个班级负责绘制精灵，而另一个班级负责操纵坐标（即，如果精灵即将离开屏幕，请将其停在那里。是的，我知道这一点是矢量图形）。无论如何，我需要在两个类之间共享坐标。我曾尝试使用类扩展来执行此操作，但这会产生堆栈溢出，因为超类（绘制精灵的类）必须创建子类的实例（将要操作变量的类）。

```
// In the superclass Render
public AnimateMC mc = new AnimateMC( 2 ); // AnimateMC is the subclass of the 
                                             superclass, Render
//later in the program
//code for drawing all of the shapes in the sprite
mc.gravitizeY(); // this is why I need to make an instance of AnimateMC

// In the subclass AnimateMC
// animates sprite by changing the coordinates 
```

我如何能够在两个类之间共享整数变量坐标而不扩展一个类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T23:00:16.767

您已经了解到滥用继承不会解决这个问题。而是通过组合扩展：将精灵的引用从一个对象传递到另一个对象并使用该引用。

所以给需要访问sprite的类一个Sprite变量，sprite，然后通过setter方法传入Sprite引用，即

```
public void setSprite(Sprite sprite) {
   this.sprite = sprite;
} 
```

或通过类的构造函数设置它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T23:11:19.467

这是一个基本的[模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)问题，我猜你错过了它的“控制器”部分。您需要一个中心类，它的工作是管理游戏逻辑（模型）和显示逻辑（视图）并在它们之间共享数据。那里有很多资源，我链接到的维基百科文章是一个好的开始。

从您提出问题的方式来看，我怀疑您还没有很好地掌握对象继承-没关系，这并不完全简单-但是您几乎从不想扩展对象以在两个不同的类之间共享数据，这听起来像是您在这里尝试做的事情。

“我应该扩展这个对象吗？”的一般经验法则 是[Has-A 与 Is-A 的](http://en.wikipedia.org/wiki/Has-a)关系。基本上，如果一个对象是另一个对象，那么一个对象可能应该扩展另一个对象。如果不是，他们不应该。这么想`Car Is-A Vehicle`，`Car extends Vehicle`但`Car Has-A Sunroof`不`Sunroof`应该扩展`Car`。再次，阅读链接以获取更多信息。

# android - 在 android 中执行 SQLite 时出现语法错误

> ID：11286251
> 
> 赞同：0
> 
> 时间：2012-07-01T22:56:40.977
> 
> 标签：android, sqlite

我正在尝试使用 SQLite 数据库将电子邮件本地存储在 android 中。当我第一次调用`context.getWritableDatabase()`时，数据库还不存在并被创建。我在 create 语句中遇到语法错误...我的代码如下所示...

```
private static final String DATABASE_NAME = "views.db";
    private static final int DATABASE_VERSION = 1;

    public static final String TABLE_VIEWS = "views";

    private static final String KEY_ID = "id";
    private static final String KEY_INDEX = "index";
    private static final String KEY_FROM = "from";
    private static final String KEY_UNREAD = "unread";
    private static final String KEY_SUBJECT = "subject";
    private static final String KEY_BODY = "body";

    // Database creation sql statement
    private static final String CREATE_VIEWS_TABLE = "CREATE TABLE " + TABLE_VIEWS + " ("
            + KEY_ID + " INTEGER PRIMARY KEY," 
            + KEY_INDEX + " INTEGER NOT NULL,"
            + KEY_UNREAD + " TEXT NOT NULL," 
            + KEY_SUBJECT + " TEXT NOT NULL,"
            + KEY_FROM + " TEXT NOT NULL," 
            + KEY_BODY + " TEXT NOT NULL);"; 
```

我是 SQLite 语法的新手，我一直在寻找可能导致这种情况的原因，但无济于事。知道是什么原因造成的吗？数据库确实是在本地存储此类数据的最佳方式。

确切的错误如下..

```
07-01 17:54:42.827: E/AndroidRuntime(3036): Caused by: android.database.sqlite.SQLiteException: near "index": syntax error: CREATE TABLE views (id INTEGER PRIMARY KEY,index INTEGER NOT NULL,unread TEXT NOT NULL,subject TEXT NOT NULL,from TEXT NOT NULL,body TEXT NOT NULL); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T23:01:04.973

您不能使用关键字“索引”作为表列名，而是将其更改为 tbl_index 之类的其他名称。

# facebook - facebook：扩展令牌在注销时过期

> ID：11286254
> 
> 赞同：2
> 
> 时间：2012-07-01T22:57:10.310
> 
> 标签：facebook, token

我正在尝试扩展用户令牌，使用

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

正如 fb 文档中所建议的那样[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

虽然这确实会创建一个新令牌，但该令牌是短暂的，并且会在用户注销时过期。

所以我错过了什么？

我已更改为弃用旧的方法设置，如建议的那样

# java - 如何在谷歌地图上的标记上方添加文字？

> ID：11286258
> 
> 赞同：2
> 
> 时间：2012-07-01T22:58:16.660
> 
> 标签：java, android

```
 try
    {
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++)
            {
                    JSONObject json_data = jArray.getJSONObject(i);                       
                    //Retrieve data from db. lat & long = double / name = String
                    latMarker = json_data.getDouble("latitude");
                    lonMarker = json_data.getDouble("longitude");
                    nameMarker = json_data.getString("name");
                    List<Overlay> mapOverlays = mapView.getOverlays();
                    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
                    CustomItemizedOverlay itemizedOverlay = 
                         new CustomItemizedOverlay(drawable, this);

                    markers = new GeoPoint (
                            (int) (latMarker * 1E6),
                            (int) (lonMarker * 1E6));

                    //Happens when a marker is clicked
                    OverlayItem overlayitem = new OverlayItem(markers, "Tapped", "Name: " + nameMarker);
                    itemizedOverlay.addOverlay(overlayitem);
                    mapOverlays.add(itemizedOverlay);           
            }
    }
    catch(JSONException e)
    {
            Log.e("log_tag", "Error parsing data. " + e.toString());
    }        
} 
```

我制作了一个安卓应用程序并将谷歌地图集成到其中。我还在我所在城市周围的地方添加了标记。我的问题是，我不知道如何在这些标记上方添加文本。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T23:04:56.847

```
package com.labs;

import java.util.ArrayList;

import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.text.TextPaint;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

public class ResoucesOverlay extends ItemizedOverlay
{

    public ResoucesOverlay(Drawable defaultMarker)
    {
        /*Calling boundCenterBottom() on defaultMarker makes the marker image connect
          at its Bottom center to the latitude and longitude of this Overlay Item*/
        super(boundCenterBottom(defaultMarker));

        markerHeight = ((BitmapDrawable) defaultMarker).getBitmap().getHeight();

        /* This call to populate is important. Although this does not appear in the MapView tutorial
         * on Google's Android developer site, the mapview some times crashes without this call.
         */
        populate();
    }

    @Override
    protected OverlayItem createItem(int i)
    {
        return mOverlays.get(i);
    }

    @Override
    public int size()
    {
        return mOverlays.size();
    }

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView,
            boolean shadow)
    {
        super.draw(canvas, mapView, shadow);

        // go through all OverlayItems and draw title for each of them
        for (OverlayItem item:mOverlays)
        {
            /* Converts latitude & longitude of this overlay item to coordinates on screen.
             * As we have called boundCenterBottom() in constructor, so these coordinates
             * will be of the bottom center position of the displayed marker.
             */
            GeoPoint point = item.getPoint();
            Point markerBottomCenterCoords = new Point();
            mapView.getProjection().toPixels(point, markerBottomCenterCoords);

            /* Find the width and height of the title*/
            TextPaint paintText = new TextPaint();
            Paint paintRect = new Paint();

            Rect rect = new Rect();
            paintText.setTextSize(FONT_SIZE);
            paintText.getTextBounds(item.getTitle(), 0, item.getTitle().length(), rect);

            rect.inset(-TITLE_MARGIN, -TITLE_MARGIN);
            rect.offsetTo(markerBottomCenterCoords.x - rect.width()/2, markerBottomCenterCoords.y - markerHeight - rect.height());

            paintText.setTextAlign(Paint.Align.CENTER);
            paintText.setTextSize(FONT_SIZE);
            paintText.setARGB(255, 255, 255, 255);
            paintRect.setARGB(130, 0, 0, 0);

            canvas.drawRoundRect( new RectF(rect), 2, 2, paintRect);
            canvas.drawText(item.getTitle(), rect.left + rect.width() / 2,
                    rect.bottom - TITLE_MARGIN, paintText);
        }
    }

    public void addOverlay(int latitude, int longitude, String title,
            String snippet)
    {
        OverlayItem item;

        GeoPoint geopoint = new GeoPoint(latitude, longitude);
        item = new OverlayItem(geopoint, title, snippet);
        mOverlays.add(item);
        populate();

    }

    public void addOverlay(OverlayItem overlayItem)
    {
        mOverlays.add(overlayItem);
        populate();
    }

    private int markerHeight;
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    private static final int FONT_SIZE = 12;
    private static final int TITLE_MARGIN = 3;
} 
```

![在此处输入图像描述](../Images/a6ff693c717df314a421b2015087100b.png)

# javascript - 为什么将代码迁移到类结构会破坏代码？

> ID：11286261
> 
> 赞同：0
> 
> 时间：2012-07-01T22:59:19.363
> 
> 标签：javascript, jquery, plugins, google-visualization

这个[Google jQuery GeoChart 插件](https://developers.google.com/chart/interactive/docs/gallery/geochart)像这样工作得很好：

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});
     google.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        // code to draw map
      };

</script> 
```

但是将代码移动到类中会破坏一切。浏览器为空白，状态仍为“正在从 www.google.com 传输数据”。

```
(function( someClass, undefined ) {
    someClass.init= function() {
       console.log(google); //google object defined but next line breaks:
       google.load('visualization', '1', {'packages': ['geochart']}); 

       ...remainder of code
    };
}( window.Project.Pages.someClass = window.Project.Pages.someClass || {})); 
```

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:21:06.187

问题是由谷歌加载脚本的方式引起的。问题的简化版本出现在[此问题](https://stackoverflow.com/q/9748331/938089?mysterious-object-doesnt-support-this-methoderror-in-ie8-on-google-load)中：问题是由于 Google 脚本的加载延迟造成的。

我之前写了一个补丁来解决这个问题，请看[这个答案](https://stackoverflow.com/a/9890299/938089?chrome-extension-unable-to-load-external-javascript-from-google-using-content-sc)。只需在使用前评估补丁`google.load`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T01:23:06.133

我不知道你的意思，但这有效......

```
(function( someClass ) {
    someClass.init= function() {
       google.load('visualization', '1', {'packages': ['geochart']}); 
       google.setOnLoadCallback(function(){ alert('setOnLoadCallback'); });
    };
}( someClass = {}));
someClass.init(); 
```

[http://jsbin.com/inurif/edit#source](http://jsbin.com/inurif/edit#source)

# oauth - Shopify OAuth 身份验证不返回永久访问令牌

> ID：11286264
> 
> 赞同：3
> 
> 时间：2012-07-01T22:59:55.313
> 
> 标签：oauth, access-token, shopify

我正在使用 rails 开发一个 shopify 应用程序，并且我正在关注这两个链接以进行 OAuth2 身份验证：`http://api.shopify.com/authentication.html`& `https://github.com/Shopify/shopify_api`。

我陷入了我要求永久访问令牌的步骤。我已将 client_id、client_secret 和代码参数发布到`https://SHOP_NAME.myshopify.com/admin/oauth/access_token`身份验证文档中指定的位置，但是我没有收到访问令牌。我得到的响应是状态 200，正文和标题为空。

代码：

```
http = Net::HTTP.new("https://#{params[:shop].to_s.strip}")
request = Net::HTTP::Post.new("/admin/oauth/access_token")
request.set_form_data({
    "client_id" => ShopifyApp.configuration.api_key,
    "client_secret" => ShopifyApp.configuration.secret,
    "code" => params[:code].to_s.strip
})
response = http.request(request) 
```

回复：

```
@body=[],
@header={},
@status=200, 
```

更让我困惑的是（我在这里可能错了，但是）shopify_app 似乎没有执行此步骤。我还发现了类似的问题：[无法接收我的 Shopify 应用程序的永久访问令牌，](https://stackoverflow.com/questions/11273462/unable-to-receive-a-permanent-access-token-for-my-shopify-app)但尚未得到答复。

编辑：删除`.myshopify.com`，`http = Net::HTTP.new("https://#{params[:shop].to_s.strip}")`因为它是一个错字。

编辑 2：
我尝试从给我结果的 HTML 表单发布，但是我无法使用上面的示例或使用 rest-client gem 让它在我的代码中工作。
对于这里发生的事情仍然非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:57:56.037

请参阅[您链接到的问题](https://stackoverflow.com/questions/11273462/unable-to-receive-a-permanent-access-token-for-my-shopify-app)提供的答案。

如果这对您来说不是同一个问题，那么您可以发布正在发送/接收的原始请求和响应数据吗？您正在使用的 api 密钥也会有所帮助。

我建议在命令行上使用 curl 进行尝试，如果这不起作用，您可以为每个步骤发布每个 curl 字符串。

shopify_app 依赖于处理 oauth 身份验证的omniauth 和[omniauth-shopify-oauth2 。](https://github.com/Shopify/omniauth-shopify-oauth2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-25T18:22:21.197

Shopify 确实返回了永久访问令牌，但**ACCESS_MODE 必须为“离线”**才能使令牌成为永久的。

使用**ACCESS_MODE offline**，您的应用程序会收到永久访问令牌，以便在您需要时发出请求，而无需用户许可。

**文档：**

> [https://shopify.dev/tutorials/authenticate-with-oauth#step-2-ask-for-permission](https://shopify.dev/tutorials/authenticate-with-oauth#step-2-ask-for-permission) [https://shopify.dev/concepts/about-apis/authentication#api-access-modes](https://shopify.dev/concepts/about-apis/authentication#api-access-modes)

# java - 为 Presenter 类编写 Mockito 测试（Presenter First Pattern）

> ID：11286269
> 
> 赞同：4
> 
> 时间：2012-07-01T23:00:44.880
> 
> 标签：java, unit-testing, design-patterns, mockito, presenter-first

我正在尝试熟悉 TDD 和 Presenter First Pattern。现在我一直在为我的 Presenter.class 编写一个测试用例。我的目标是涵盖整个 Presenter.class，包括动作事件，但我不知道如何使用 Mockito 来完成。

Presenter.class：

```
public class Presenter {
IModel model;
IView view;

public Presenter(final IModel model, final IView view) {
    this.model = model;
    this.view = view;

    this.model.addModelChangesListener(new AbstractAction() {
        public void actionPerformed(ActionEvent arg0) {
            view.setText(model.getText());
        }
    });
}} 
```

IView.class：

```
public interface IView {
    public void setText(String text);
} 
```

模型类：

```
public interface IModel {
    public void setText();
    public String getText();
    public void whenModelChanges();
    public void addModelChangesListener(AbstractAction action);
} 
```

PresenterTest.class：

```
@RunWith(MockitoJUnitRunner.class)
public class PresenterTest {

    @Mock
    IView view;
    @Mock
    IModel model;

    @Before
    public void setup() {
        new Presenter(model, view);
    }

    @Test
    public void test1() {
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:39:20.670

首先...谢谢你们！

过了一会儿，我想出了这个解决方案并坚持下去，因为我不想在演示者类中实现任何接口，也不想在我的测试中创建存根类。

视图

```
public interface IView {
    public void setText(String text);
} 
```

模型

```
public interface IModel {
    public String getText();
    public void addModelChangeListener(Action a);
} 
```

主持人

```
public class Presenter {

    private IModel model;
    private IView view;

    public Presenter(final IModel model, final IView view) {
        this.model = model;
        this.view = view;

        model.addModelChangeListener(new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                view.setText(model.getText());
            }
        });
    }
} 
```

PresenterTest

```
@RunWith(MockitoJUnitRunner.class)
public class PresenterTest {

    @Mock
    IView view;

    @Mock
    IModel model;

    @Test
    public void when_model_changes_presenter_should_update_view() {
        ArgumentCaptor<Action> event = ArgumentCaptor.forClass(Action.class);

        when(model.getText()).thenReturn("test-string");
        new Presenter(model, view);
        verify(model).addModelChangeListener(event.capture());
        event.getValue().actionPerformed(null);
        verify(view).setText("test-string");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:07:19.840

在这种情况下，模型和演示者之间的连接足够松散（通过动作侦听器进行通信），您最好不要为模型使用模拟。

你可以使用一个真实的模型（如果真实的模型足够简单，我更喜欢这个），或者就像我在下面的代码片段中那样，在你的测试代码中创建一个存根。

```
@RunWith(MockitoJUnitRunner.class)
public class PresenterTest {

    @Mock
    IView view;

    IModel model;

    @Before
    public void setup() {
        model = new StubModel();
        new Presenter(model, view);
    }

    @Test
    public void presenterUpdatesViewWhenModelChanges() {
        model.setText("Test Text");
        verify(view).setText("Test Text");
    }

    private class StubModel implements IModel {
        private String text;
        private List<ActionListener> actionListeners;

        StubModel() {
            actionListeners = new ArrayList<ActionListener>();
        }

        @Override
        public void setText(String text) {
            this.text = text;
            whenModelChanges();
        }

        @Override
        public String getText() {
            return text;
        }

        @Override
        public void whenModelChanges() {
            for (ActionListener listener: actionListeners) {
                listener.actionPerformed(null);
            }
        }

        @Override
        public void addModelChangesListener(AbstractAction action) {
            actionListeners.add(action);
        }
    }
} 
```

您可以使用设置存根调用的模拟模型来设置此测试，但要明智地做到这一点，您可能还需要一个模拟操作，这会使事情复杂化，因为该操作是由演示者创建的。

这似乎需要大量测试代码来测试演示者类中的一行代码，但最大的块是存根模型，它可能会被真实模型替换或从该测试类中提取并与其他测试共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:54:02.267

在这种情况下，一点点重构就可以大有帮助。学会“倾听”测试并让它们驱动设计。`Model`只需要知道 an`ActionListener`需要通知，它不关心它是否是一个`AbstractAction`. 在你的类契约中尽可能使用最小的接口。以下是进行简单测试的重构（可能太简单以至于不值得进行单元测试，但你明白了）：

Presenter.class：

```
public class Presenter {
  public Presenter(final IModel model, final IView v) implements ActionListener {
    this.model = model;
    this.view = v;
    model.addModelChangesListener(this);
  }

  public void actionPerformed(ActionEvent arg0) {
    view.setText(model.getText());
  }
} 
```

模型类：

```
public interface IModel {
    public void addModelChangesListener(ActionListener action);
} 
```

PresenterTest.class：

```
@RunWith(MockitoJUnitRunner.class)
public class PresenterTest {
    @Mock IView view;
    @Mock IModel model;

    @Test
    public void when_model_changes_presenter_should_update_text() {
       when(model.getText()).thenReturn("Test Text");
       Presenter p = new Presenter(model, view);
       p.actionPerformed(null);
       verify(view).setText("Test Text");
    }
} 
```

# php - 让标签显示

> ID：11286277
> 
> 赞同：0
> 
> 时间：2012-07-01T23:01:49.713
> 
> 标签：php, mysql

我有 3 个 MySQL 表：

```
shelf
---------------
id
project_id
label

books
---------------
id
project_id
label

booksOnShelves
---------------
id
shelf_id
book_id
project_id
user_id 
```

我需要以表格格式显示书架上的书，例如：

```
History     Fiction
-------     --------
book 1      book 4
book 2      book 5 
book 3 
```

到目前为止，我只有这个：

```
 SELECT 
        shelf.label,
        books.label
    FROM booksOnShelves
    LEFT JOIN shelf ON (shelf.id = booksOnShelves.shelf_id)
    LEFT JOIN books ON (books.id = booksOnShelves.book_id) 
    WHERE booksOnShelves.project_id = ".$_POST['pid']."
    AND booksOnShelves.user_id = ".$_POST['uid']." 
```

几件事......由于某种奇怪的原因，货架标签没有出现，但如果我删除查询中的所有其他部分，比如书籍标签，它就可以工作。另外，我只能在一长列中显示（通过循环）。我如何将它分成单独的列，或者如果在一列中，我如何每组书籍只显示一次货架标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:46:06.397

SQL 只是一种（结构化）查询语言，而不是报告语言。当您使用 PHP 时，我假设您将输出 HTML，因此您可以通过例如浮点数或表格创建列。为了进行分组，最简单的方法是将查询结果读入一个嵌套数组，这样外部数组键可以是书架标签，内部数组键可以是书籍标签，然后将数组输出到嵌套循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T23:47:44.443

第一：转义输入变量

第二：删除连接中的左，如果你从跨表左连接开始是胡说八道（恕我直言）

第三：使用 GROUP_CONCAT 返回一组标题的字符串，逗号分隔，每个架子 1 行

```
$pid = mysql_real_escape_string( $_POST['pid'] );
$uid = mysql_real_escape_string( $_POST['uid'] );

$sql = "SELECT 
        shelf.label,
        GROUP_CONCAT( books.label separator ',') as titlelist
    FROM booksOnShelves
    JOIN shelf ON (shelf.id = booksOnShelves.shelf_id)
    JOIN books ON (books.id = booksOnShelves.book_id) 
    WHERE booksOnShelves.project_id = ".$pid."
    AND booksOnShelves.user_id = ".$uid."
group by booksOnShelves.shelf_id"; 
```

当然，您的 PHP 必须解析/管理标题列表以填充页面

添加

您可以根据需要更改分隔符（例如：|）然后

```
foreach($results as $row){

echo "<div class='float_left'><p class='bold'>".$row['label']."</p>\n";
// using '|' as separator less common then ',' in the titles
$array_of_titles = explode('|',$row['titlelist']);
foreach($array_of_titles as $title){
echo "<p>".$title."</p>\n";

}
echo "</div>\n";
} 
```

我假设 $results 是一个包含查询所有行的关联数组。

# scala - 为什么在强制转换后类型字段的上限会丢失（参见描述中的示例）？

> ID：11286279
> 
> 赞同：3
> 
> 时间：2012-07-01T23:01:53.173
> 
> 标签：scala, types

定义以下内容后：

```
abstract class A {
  type T
  def print(p: T) = println(p.toString)
}

trait B extends A {
  type T <: String
} 
```

正如预期的那样，我们**不能**创建一个对象`T = Int`：

```
scala> val a = new A with B {type T = Int}
<console>:9: error: overriding type T in trait B with bounds >: Nothing <: String;
 type T has incompatible type
       val a = new A with B {type T = Int}
                                  ^ 
```

正如预期的那样，我们**可以**创建一个对象`T = String`：

```
scala> val a = new A with B {type T = String}
a: A with B{type T = String} = $anon$1@692dec

scala> a.print("test")
test 
```

在将我们的值`a`转换为 type之后，我们在调用该方法`A with B`时得到一个错误。`print`似乎类型字段`T`丢失了有关类型（？）的信息。

```
scala> val b = a.asInstanceOf[A with B]
b: A with B = $anon$1@1927275

scala> b.print("test")
<console>:15: error: type mismatch;
 found   : java.lang.String("test")
 required: b.T
              b.print("test")
                      ^ 
```

**问题一：**为什么在`T`强制转换后类型字段的信息会丢失？

好的，所以我们再次尝试使用强制类型转换将类型字段显式设置为`T`类型`String`：

```
scala> val c = a.asInstanceOf[A with B {type T = String}]
c: A with B{type T = String} = $anon$1@1927275

scala> c.print("test")
test 
```

好的，这行得通 - 很好。

现在让我们尝试一些疯狂的事情：

```
scala> val d = a.asInstanceOf[A with B {type T = Int}]
d: A with T{type T = Int} = $anon$1@1927275

scala> d.print(3)
3 
```

**问题2：**嗯？Trait`B`将类型限制`T`为 String 的子类型，但现在该`print`方法适用于整数。为什么这行得通？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:54:41.397

**问题 1——** “在使用 B 将我们的值 a 转换为类型 A 后，调用 print 方法时出现错误。” `T`演员表之后有什么信息？这正是其中的内容`B`：

`type T <: String`

因此类型是*未知*的，只是它的上限。下面显示了为什么禁止`print`调用：`A with B`

```
trait X
trait Y extends X { def hallo() = () }

trait A {
  type T
  def test(t: T) = ()
}

trait B extends A {
  type T <: X
}

val y = new A with B { type T = Y; override def test(t: T): Unit = t.hallo() }
y.test(new X {})     // refused -- rightfully
y.test(new Y {})     // ok

val yc = y: A with B // note how we can cast type safe this way!
yc.test(new X {})    // refused -- rightfully (would try to call inexistent 'hallo') 
```

因此，出现在逆变（方法参数）位置的类型会发生什么问题是一个问题。如果您`B`通过缩小*下限*来定义，即，即使没有固定`type T >: X`也可以调用。`test``T`

* * *

**问题 2——**当然可以。您可以使编译器允许使用类型转换进行任何调用。转换为之后`A with B {type T = Int}`，您强制编译器接受它`T = Int`。现在`toString`您调用的方法是为 定义的`java.lang.Object`，并且由于 的​​通用结构`A`，您`Int`被装箱为 a `java.lang.Integer`，因此在调用时您不会看到任何运行时问题`toString`。

但是认为你在这里做正确的事情是错误的。例如：

```
abstract class A {
  type T
  def print(p: T) = println(p.toString)
}

trait B extends A {
  type T <: String
  override def print(p: T) = println(p.toUpperCase) // !
}

val a = new A with B { type T = String }
val b = a.asInstanceOf[A with B { type T = Int }]
b.print(33)  // bang -- runtime class cast exception 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T23:48:10.827

> 问题1：为什么类型字段T的信息在转换后丢失了？

因为你为什么要做演员？演员表的意思是：嘿编译器，我是万能的程序员。我想做一些你不明白的事情。做到这一点 - 没有矛盾！

这就是编译器所做的——它抹去了他所有的知识，因为这就是你告诉他的。

类型成员是一些编译时间信息，如果你用你的演员删除它，你也会删除编译器的知识。

> 问题 2：[...] 为什么这行得通？

因为你是无所不能的程序员，编译器服从。它没有机会证明你告诉他的是否正确。

好吧，最后一句话并不完全正确，因为我们的智能编译器知道程序员永远不可能是无所不能的——即使人们相信这一点。因此它并不总是信任程序员。它玩自己的游戏，遵循自己的规则，以保护程序员。但即使是我们的编译器也不是万能的。有时它必须相信程序员的指令——就像大多数演员一样。

# jquery - jQuery新添加的输入未提交

> ID：11286281
> 
> 赞同：3
> 
> 时间：2012-07-01T23:02:21.697
> 
> 标签：jquery

我有很多 PHP 生成的输入字段。一旦我使用 jQuery 添加新字段，如果它们为空，则不会提交它们。然而，即使它们是空的，也会发送静态的。

我应该如何解决这个问题？

**代码：**

```
<form id="sendform" action="pdf.php" method="post">
<input type="text" name="to1" />
<input type="text" name="to2" />
<input type="text" name="to3" />
<input type="submit" value="send" />
</form> 
```

现在jQuery部分是：

```
var clone = $('input[name="to2"]').clone();
$(clone).attr('name', 'to4');
$('#sendform').append(clone); 
```

**截图：** ![这是我通过 DOM 检查器看到的](../Images/94c00e40b9785d18d95de3e37c7c8d7c.png) ![这是我在提交时在标题中看到的](../Images/d55cb8df532c09a4ddbdffe4b1a6261b.png)

可以看到有Note1、Note2、Note3、Note4。我已经动态添加了 Note2。你可以从截图中看到它在 dom 中，但是它没有被发送（是的，有数据输入）。

**解决方案** 总之，问题出在**放置在 table( `<table><form>`) 内的元素。什么时候**成为 table( `<form><table>`) 的父级 - 一切正常。****

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-09T15:56:18.167

万一有人再次遇到同样的问题 - 原因可能很简单：格式错误的 DOM。这可能会导致正确的视觉呈现，但不会在提交时正确处理表单输入

如果你有 fe：

```
[form]
    [div]

    [div]
  [div] <!-- redundant closing div -->
[/form] 
```

可能不会发送新附加的表单字段。检查 Firefox 中的页面源 - 红色提示标签可能对您有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T23:25:12.503

按预期工作正常：

```
var clone = $('input[name="to2"]').clone();
$(clone).attr('name', 'to4');
$('#sendform').append(clone);

$('#sendform').submit(function() {
    $('div').text($(this).serialize());
    return false;
});​ 
```

[**现场演示**](http://jsfiddle.net/ugM2Y/)****

# multithreading - GThread 中的 g_timeout_add

> ID：11286284
> 
> 赞同：3
> 
> 时间：2012-07-01T23:03:16.430
> 
> 标签：multithreading, timeout, glib

我正在尝试添加特定于特定 GThread 的超时源。

在主线程中，我可以创建一个 GMainContext ( **g_main_context_new** ) 并添加一个超时 ( **g_timeout_add** )。但是，当我尝试在使用**g_thread_create**创建的线程中执行此操作时，它根本不起作用，GSourceFunc 永远不会被调用，我不知道为什么。

目前我只有这个文档：

> 回调需要一些注意。来自 GTK+（信号）的回调是在 GTK+ 锁内进行的。然而，来自 GLib 的回调（超时、IO 回调和空闲函数）是在 GTK+ 锁之外进行的。因此，在信号处理程序中您不需要调用 gdk_threads_enter()，但在其他类型的回调中，您可以这样做。

但是我的超时功能（出于测试目的）只在控制台打印，所以我不认为这是资源保护和互斥锁的问题。

线程结构为：

> 主线程 --> 没有显式创建 GLib 主上下文
> 
> *   捕获线程
>     
>     
> *   进程线程 --> 应该有一个 GLib 主上下文和一个超时源
>     
>     
> *   显示线程

我很感激任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:13:34.447

你用`g_timeout_add()`or`g_source_attach()`吗？

`g_timeout_add()`并且`g_timeout_add_full()`不允许您指定要添加的主要上下文。它总是使用默认的主上下文。如果你没有在你的主线程中使用默认的主上下文，那么在你的`process thread`. [您可以在描述](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#glib-The-Main-Event-Loop.description)中阅读它。

> GMainContext 只能在单个线程中运行

默认主上下文由许多函数隐式创建，包括`g_main_context_default()`. 所以请确保你没有在你的主线程中使用它。

`g_source_attach()`如果您决定这样做，您可以使用将超时源添加到您自己的主要上下文中。没有可用于指定主要上下文的超时函数。所以，只能自己做。

以下代码与以下代码基本相同：`g_timeout_add_full(G_PRIORITY_DEFAULT, 100, func, l, notify);`

```
#include <glib.h>

void notify(gpointer data)
{
        g_main_loop_quit((GMainLoop *)data);
}

gboolean func(gpointer data)
{
        static gint i = 0;
        g_message("%d", i++);
        return (i < 10) ? TRUE : FALSE;
}

gpointer thread(gpointer data)
{
        GMainContext *c;
        GMainContext *d;
        GMainLoop *l;
        GSource *s;

        c = g_main_context_new();
        d = g_main_context_default();

        g_message("local: %p", c);
        g_message("default: %p", d);

#if 1
        l = g_main_loop_new(c, FALSE);
        s = g_timeout_source_new(100);
        g_source_set_callback(s, func, l, notify);
        g_source_attach(s, c);
        g_source_unref(s);
#else
        l = g_main_loop_new(d, FALSE);
        g_timeout_add_full(G_PRIORITY_DEFAULT, 100, func, l, notify);
#endif

        g_main_loop_run(l);
        g_message("done");

        return NULL;
}

int main(int argc, char *argv[])
{
        GError *error = NULL;
        GThread *t;

        g_thread_init(NULL);
        t = g_thread_create(thread, NULL, TRUE, &error);
        g_thread_join(t);

        return 0;
} 
```

# java - 以无线方式部署 Android 应用程序

> ID：11286285
> 
> 赞同：0
> 
> 时间：2012-07-01T23:03:23.170
> 
> 标签：java, android, eclipse

我是一名安卓开发者。

通常，我通过 eclipse 和 USB 电缆在手机上开发应用程序。我想知道是否有可能让 eclipse 安装无需电缆的应用程序，例如通过互联网或 WLAN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:10:30.767

根据xda-developers 上的[这篇](http://forum.xda-developers.com/showthread.php?t=623828&page=3)文章，您可以使用命令从设备通过 WiFi 启用 ADB。唯一需要注意的是，您必须有一个 root 设备才能执行此操作。

```
setprop service.adb.tcp.port 5555
stop adbd
start adbd 
```

您可以禁用它并返回 ADB 以监听 USB

```
setprop service.adb.tcp.port -1
stop adbd
start adbd 
```

如果您已经有 USB 访问权限，则切换到使用 WiFi 会更容易。从通过 USB 连接设备的计算机上的命令行，发出命令

```
adb tcpip 5555
adb connect 192.168.0.101:5555 
```

告诉 ADB 守护程序返回到通过 USB 侦听

```
adb usb 
```

Android Market 上还有几个应用程序可以自动执行此过程。

# android - ListFragment 中的自定义 ArrayAdapter

> ID：11286287
> 
> 赞同：9
> 
> 时间：2012-07-01T23:03:23.673
> 
> 标签：android, android-viewpager, android-arrayadapter, android-listfragment

我正在尝试创建一个自定义`ArrayAdapter`以用于我的`ListFragment`. 现在`ListFragment`除了`TextView`说它是什么片段编号外，什么都没有显示。我在`getView()`我的适配器的方法中放置了一个断点，它没有被调用。我搜索了不会被调用的原因，有些人似乎认为我的 ListView 是隐藏的，所以我尝试将 更改`layout_height`为`wrap_content`，但这没有用。

另外，我一直在关注这个开发者页面的代码：http: [//developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

列表片段：

```
public class HomeFragment extends ListFragment implements FragmentTitle
{
private int mNum = 0;
private String mTitle = "Home";
private ListView mListView;
private MyArrayAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    InfoContainer temp = new InfoContainer("test1", "test2");
    mAdapter = new MyArrayAdapter(getActivity(), android.R.id.list, temp);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    View v1 = inflater.inflate(R.layout.fragment_pager_list, container, false);
    TextView tv = (TextView) v1.findViewById(R.id.text);
    tv.setText("Fragment #" + mNum);
    mListView = (ListView) v1.findViewById(android.R.id.list);
    return v1;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);
    mListView.setAdapter(mAdapter);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) 
{
    Log.i("HomeFragment", "Item clicked: " + id);
}

public CharSequence getTitle() 
{
    return mTitle;
}

} 
```

阵列适配器：

```
public class MyArrayAdapter extends ArrayAdapter<InfoContainer>
{
Context mContext;
InfoContainer data;

public MyArrayAdapter(Context context, int textViewResourceId, InfoContainer temp) 
{
    super(context, textViewResourceId);
    mContext = context;
    this.data = temp;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    ViewHolder holder = new ViewHolder();

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)mContext).getLayoutInflater();
        row = inflater.inflate(R.id.pager, parent, false);
        holder.v1 = (TextView) row.findViewById(R.id.listview_name);
        holder.v2 = (TextView) row.findViewById(R.id.listview_data);
        row.setTag(holder);
    }
    else
    {
        holder = (ViewHolder) row.getTag();
    }
    InfoContainer info = data;
    holder.v1.setText(info.name);
    holder.v2.setText(info.text);
    return row;
}

public static class ViewHolder
{
    TextView v1;
    TextView v2;
}

} 
```

fragment_pager_list.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="#000000" >

<TextView
    android:id="@+id/text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/hello_world"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#FFFFFF" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false"
        android:background="@drawable/listview_background"
        android:textColor="#FFFFFF" /> 
```

我之前已经制作了自定义 ArrayAdapters 没有问题，那么让它们与 ListFragment 一起工作我是否缺少一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T00:51:33.980

解决方案是`getCount()`为我的 ArrayAdapter 返回 0。所以我只是使用`mAdapter.add(temp)`然后`mAdapter.notifyDataSetChanged()`它起作用了。我还不得不将线路更改`row = inflater.inflate(R.id.pager, parent, false);`为`row = inflater.inflate(R.layout.listview_row, parent, false);`

# coq - Coq：错误：在当前环境中找不到引用_

> ID：11286291
> 
> 赞同：2
> 
> 时间：2012-07-01T23:03:41.327
> 
> 标签：coq

我是 Coq 的新手。我无法使用单位、产品和总和来定义列表、地图和树。我在标题中收到错误消息。评论上面的代码工作正常，下面的代码没有。

```
Inductive one : Type := nil : one.

Inductive sum (t0 t1 : Type) : Type :=
  | inject_left : t0 -> sum t0 t1
  | inject_right : t1 -> sum t0 t1.

Inductive product (t0 t1 : Type) : Type := pair : t0 -> t1 -> product t0 t1.

Definition list (t0 : Type) : Type := sum one (product t0 (list t0)).

Definition map (t0 t1 : Type) : Type := list (product t0 t1).

(* From here on nothing works. *)

Definition List (t0 : Type) : Type := sum one (product t0 (List t0)).

Definition map (t0 t1 : Type) : Type :=
  sum one (product (product t0 t1) (map t0 t1)).

Definition Map (t0 t1 : Type) : Type :=
  sum one (product (product t0 t1) (Map t0 t1)).

Definition tree (t0 : Type) : Type :=
  sum one (product t0 (product (tree t0) (tree t0))).

Definition Tree (t0 : Type) : Type :=
  sum one (product t0 (product (Tree t0) (Tree t0))). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:24:19.010

```
Definition List (t0 : Type) : Type := sum one (product t0 (List t0)). 
```

在 Coq 中，你不能通过 using 来编写递归函数`Definition`，你需要使用`Fixpoint`（或者更强大的东西）。见[http://coq.inria.fr/refman/Reference-Manual003.html#@command14](http://coq.inria.fr/refman/Reference-Manual003.html#@command14)

现在，这还不是全部，但递归定义必须是可证明终止的（以确保您使用的逻辑的一致性）。特别是，您不能编写如下内容：

```
Fixpoint List (t0 : Type) : Type := sum one (product t0 (List t0)). 
```

由于您正在对输入的同一参数进行递归调用。这显然无法终止。

* * *

无论如何，要定义这样的类型，您可能更应该使用`Inductive`(and `CoInductive`)，正如您已经发现的那样。

# facebook - Omniauth、Devise、Facebook 集成指南不起作用

> ID：11286292
> 
> 赞同：1
> 
> 时间：2012-07-01T23:03:41.583
> 
> 标签：facebook, ruby-on-rails-3, authentication, devise, omniauth

我启动了一个全新的 Rails 和 Facebook 应用程序，并严格按照本[指南](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)进行操作。

我可以看到正在创建一个用户，并且它甚至在身份验证后成为重定向的 current_user，但是，它不会持续存在。一旦我点击另一个控制器操作，它就会再次重定向并说我需要登录。

如果我认为其中任何一个有用，我会发布我的代码，但我的代码与您在此 wiki ( [https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview) ) 中看到的内容之间的唯一区别是过滤器和方法之前的 puts 语句。

我不是 100% 确定omniauthable 的设计是如何工作的，但我注意到在它的`self.find_for_facebook_oauth`方法中，它接受 current_user 作为第二个参数并且从不在方法中使用它。此外，与其他身份验证解决方案不同，我没有看到它在任何地方检查现有用户会话，尽管我相信设计应该为您处理这个问题。

# 编辑

我现在很确定`omniauthable`. 我刚刚将以下内容添加到我的`OmniauthCallbacksController`

```
def facebook
  sign_in_and_redirect :user, User.first
end 
```

本质上，这应该只登录第一个用户，而不管信息如何。它确实并将我重定向到欢迎控制器中的页面，但是，当我尝试点击该控制器中的其他操作时，我再次被告知我需要登录。我真的不知道 current_user 是如何迷路的.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:15:16.023

抱歉，我无法回答您的问题，但也许您应该查看[http://railscasts.com/](http://railscasts.com/)，关于 facebook 集成的视频教程很少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:19:08.183

关于如何使用 Devise 的omniauthable 模块的资源很少。您可能想看看[https://gist.github.com/993566](https://gist.github.com/993566)和[http://edmiston.id.au/post/9204306833/omniauthable-my-version](http://edmiston.id.au/post/9204306833/omniauthable-my-version)。wiki 缺少一些细节。

# php - tinymce 不能在 php 中工作？

> ID：11286294
> 
> 赞同：1
> 
> 时间：2012-07-01T23:03:48.817
> 
> 标签：php, javascript, tinymce

我是 tinymce 编辑器的新手。根据该网站，他们的安装非常简单，而且效果也很好。但是当在 php.ini 中接收时。它得到不完整的代码

这是html代码：

```
<script type="text/javascript" src="http://localhost/tiny_mce/jquery.tinymce.js"></script>

<script type="text/javascript">
$().ready(function() {
    $('textarea').tinymce({
        // Location of TinyMCE script
        script_url : 'http://localhost/tiny_mce/tiny_mce.js',

        // General options
        theme : "advanced",
        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
        content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
   });
</script> 
```

文本区域是

```
<textarea id="f_page_body" name="f_page_body" class="tinymice"></textarea> 
```

php代码是

```
$body = $_POST["f_page_body"];

        echo(stripslashes($body)); 
```

在编辑器中它看起来不错但是在 php 中显示时它只是得到完整的代码，如下所示

```
 <p><span  xx-large; font-family: impact,chicago; color: #99cc00;">I am testing it</span></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:08:01.480

显示 TinyMCE 编辑器的 span的**style="font-size:**部分在哪里？看起来它以某种方式被切断了。

您的 HTML：

```
<p><span  xx-large; font-family: impact,chicago; color: #99cc00;">I am testing it</span></p> 
```

应该是什么：

```
<p><span style="font-size: xx-large; font-family: impact,chicago; color: #99cc00;">I am testing it</span></p> 
```

# raphael - attr(stroke-linecap) 什么都不做

> ID：11286298
> 
> 赞同：1
> 
> 时间：2012-07-01T23:04:58.150
> 
> 标签：raphael

```
var view = Raphael(10, 50, 800, 600); 
var testLine = view.path("M343,56 L343,560 Z");  // A simple straight line.
testLine.attr({stroke:"gold"}); 
testLine.attr({"stroke-width":25.0});
testLine.attr({"stroke-linecap":"round"});  // No linecap! 
```

为什么 linecap 不设置为圆形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:52:50.937

通过删除“Z”路径终止符修复：

```
var testLine = view.path("M343,56 L343,560"); 
```

# storage - SCSI 查询命令

> ID：11286299
> 
> 赞同：0
> 
> 时间：2012-07-01T23:05:10.363
> 
> 标签：storage, scsi, linux-scst

我对 SCSI 和 SCST 非常陌生。我正在尝试在 SCSI 查询命令中引入新的页面代码，因此我最初使用页面代码 0x00 请求支持的页面列表。所以在 SCST 代码中，我提到了回复的长度和支持的页面代码。我保留了一个 printk 语句，并在通过 scst_vdisk.c 文件发送时检查了相同的内容，这很好。但是当我从 SCSI 端检查时，我的新值条目为零，而现有条目工作正常。我试图解码问题，但无法正确进行。

是否有任何过滤器阻止了适配器层或（通常存在这些检查的地方）的值，或者您能否告诉我如何解决问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:18:48.040

您是否为请求数据分配了足够的缓冲区空间？请检查您发送的查询命令的分配长度字段。

# objective-c - 我的 admob 横幅显示在顶部

> ID：11286301
> 
> 赞同：6
> 
> 时间：2012-07-01T23:05:51.957
> 
> 标签：objective-c, ios, admob

我的应用中有一个 admob 横幅，我已经使用 AdMob 提供的文档实现了它，唯一的问题是它没有显示在屏幕底部，而是显示在顶部。现在我已经找了很长时间但是我找不到如何改变它，我找不到任何人解决这个问题。

有人知道如何解决这个问题吗？

谢谢

编辑

```
// Create a view of the standard size at the bottom of the screen.
// Available AdSize constants are explained in GADAdSize.h.
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

// Specify the ad's "unit identifier." This is your AdMob Publisher ID.
bannerView_.adUnitID = @"MYID";    
// Let the runtime know which UIViewController to restore after taking
// the user wherever the ad goes and add it to the view hierarchy.
bannerView_.rootViewController = self;
[self.view addSubview:bannerView_];

// Initiate a generic request to load it with an ad.
[bannerView_ loadRequest:[GADRequest request]]; 
```

一直在寻找所有 admob 脚本上的数字，但找不到任何要编辑的..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T23:08:39.707

您是否尝试过更改视图的框架（我认为是 GADBannerView？）以将其定位在底部而不是顶部？

这是一个示例（您应该将占位符替换为正确的属性：bannerView.frame = CGRectMake(0.0, 460 - `bannerheight`, `bannerwidth`, `bannerheight`);

* * *

**编辑：**

*您需要做的就是替换这个：*

```
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner]; 
```

*有了这一切：*

```
// Initialize the banner at the bottom of the screen.
CGPoint origin = CGPointMake(0.0,
                               self.view.frame.size.height -
                               CGSizeFromGADAdSize(kGADAdSizeBanner).height);

// Use predefined GADAdSize constants to define the GADBannerView.
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                                  origin:origin]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T09:27:33.047

```
CGFloat height = [UIScreen mainScreen].bounds.size.height;

bannerView_=[[GADBannerView alloc] initWithAdSize:(kGADAdSizeBanner) origin:CGPointMake(0,height-kGADAdSizeBanner.size.height)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T11:32:03.103

```
CGPoint origin = CGPointMake(0.0,bannerHeight);
self.addBanner = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait
                                             origin:origin]; 
```

这适用于所有 iphone 和 iPad

# php - 显示来自模型验证规则的消息

> ID：11286306
> 
> 赞同：0
> 
> 时间：2012-07-01T23:07:45.683
> 
> 标签：php, yii

我在访问由我的模型中的某些自定义规则生成的消息时遇到问题..

在模型中：

```
public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('active_yn', 'numerical', 'integerOnly'=>true),
            array('user_name', 'length', 'max'=>20),
            array('password', 'length', 'max'=>100),
            array('full_name', 'length', 'max'=>150),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('user_id, user_name, full_name, active_yn', 'safe', 'on'=>'search'),
            array('user_name', 'unique', 'on'=>'api_save, insert', 'message'=>'User already in system'),
            array('user_name, full_name', 'required', 'on'=>'api_save', 'message'=>'Required field, {attribute}, is missing'),
        );
    } 
```

在我的控制器中。这是一个 REST 接口..

```
public function actioncreate(){
        $user = new User();
        $user->scenario = 'api_save';

        // Try to assign POST values to attributes
        if(isset($_POST)){
            foreach($_POST as $key=>$value) {
                // Does the model have this attribute? If not raise an error
                if($user->hasAttribute($key)){
                    $user->$key = $value;
                }else{
                    $var = array('status'=>500,'body'=>'Parameter <b>'.$key.'</b> is not allowed for model');
                    $send = new sendResponse($var);
                }
            }
        }else{
            $var = array('status'=>500,'body'=>'Parameters required for creation');
            $send = new sendResponse($var);
        }
        if(!$user->validate()){
            $str .= $user->message;
            $var = array('status'=>500,'body'=>$str);
            $send = new sendResponse($var);
        }
        $user->save();
        $var = array('status'=>200,'body'=>CJSON::encode($user));
        $send = new sendResponse($var);
    } 
```

如果模型未验证，我想显示来自我的模型的消息。我已经尝试过`getError`，`getErrors`但我收到一条错误消息，说 _error 未定义。

感谢您对可能是一个简单问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:59:40.053

经过一番搜索，我找到了答案：

```
 if($user->save() === false){
        $str = '';
        foreach ($user->errors as $value) {
            $str .= $value[0]."; ";
        }
        $var = array('status'=>500,'body'=>$str);
        $send = new sendResponse($var);
    }else{
        $var = array('status'=>200,'body'=>CJSON::encode($user));
        $send = new sendResponse($var);
    } 
```

我跳过了验证步骤，只是保存了模型。如果它返回，`false`我就可以将`$user->errors`其作为数组或错误消息提取

# emacs - org-mode emacs 不会导出

> ID：11286308
> 
> 赞同：2
> 
> 时间：2012-07-01T23:07:50.730
> 
> 标签：emacs, export, org-mode

我承认我是一个完全的 emacs 和 org-mode 新手。它对我很有用，但突然间我遇到了以下问题。

假设我用 emacs 打开一个文件 test.org

$ emacs test.org

该文件包含：

```
* one
* two
** a
** b 
```

当我尝试使用 Cx Ce 导出时，我收到以下错误消息：

```
Debugger entered--Lisp error: (void-variable b)
  eval(b nil)
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil) 
```

我刚刚发现了 org-mode 并立即对此欣喜若狂。几分钟之内，我就可以为 org-mode 重构我的纯文本笔记，包括数学公式，并将它们导出到 Latex 并从那里导出为 pdf。我使用了 Cx Ce o，如下所述：http: [//orgmode.org/manual/LaTeX_002fPDF-export-commands.html](http://orgmode.org/manual/LaTeX_002fPDF-export-commands.html)

这在我的 Mac OS X 终端上的 GNU Emacs 23.3.1 以及我作为独立 .app 安装的最新 Emacs 版本 24.1 上都非常有效

不幸的是，这并没有持续很长时间，我收到了上面描述的错误消息，即使对于最简单的 org 文件也是如此。令我震惊的是，两个 emacs 安装同时开始出现这个问题。我什至在主目录中删除了我稍作修改的 .emacs 文件，但这也无济于事。

似乎 emacs 总是无法评估最后一行。如果我删除它

```
* one
* two
** a 
```

错误信息是：

```
Debugger entered--Lisp error: (void-variable a)
  eval(a)
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil) 
```

很感谢任何形式的帮助！我非常喜欢 org-mode 并且很想学习 el。但是，目前我什至不知道如何编写超过两行的 LISP。谷歌搜索此错误消息会导致对似乎完全不相关的问题的描述。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:20:46.560

使用`C-c C-e h`（您表示您正在按`C-x C-e`）导出为 HTML 和`C-c C-e p`导出为 PDF。如果您使用的是菜单栏，请查看“Org”菜单下的“Export/Publish...(Cc Ce)”项

（`C-x C-e`评估一个 elisp 表达式...那些错误消息抱怨将 **a 和 **b 评估为 elisp 表达式...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:28:01.550

您还可以使用`M-x`与您想要的样式匹配的交互式函数名称来使用和调用缓冲区的输出方法，例如

```
M-x org-export-as-html
M-x org-export-as-pdf
M-x org-export-as-latex 
```

等。使用选项卡自动完成名称。您可能会发现这种方法更容易记住，同时仍在学习 org-mode。

# c# - C# 中的中继命令

> ID：11286311
> 
> 赞同：6
> 
> 时间：2012-07-01T23:08:16.777
> 
> 标签：c#, silverlight, mvvm, delegates, icommand

我正在学习用于 C# Silverlight 开发的 MVVM

[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

我对上下文中提到的 RelayCommand 类感到困惑。代码是：

```
public class RelayCommand : ICommand
{
#region Fields

readonly Action<object> _execute;
readonly Predicate<object> _canExecute;        

#endregion // Fields

#region Constructors

public RelayCommand(Action<object> execute)
: this(execute, null)
{
}

public RelayCommand(Action<object> execute, Predicate<object> canExecute)
{
    if (execute == null)
        throw new ArgumentNullException("execute");

    _execute = execute;
    _canExecute = canExecute;           
}
#endregion // Constructors

#region ICommand Members

[DebuggerStepThrough]
public bool CanExecute(object parameter)
{
    return _canExecute == null ? true : _canExecute(parameter);
}

public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
}

public void Execute(object parameter)
{
    _execute(parameter);
}

#endregion // ICommand Members
} 
```

为此，我真的不明白在这种情况下是如何工作的`_execute`。`_canExecute`（我是 C# 新手，甚至不确定什么是 Action 和 Predicate。我知道它们是代表，但它们之间有什么区别以及它们是如何工作的？）
而且，在程序中，我没有明白这一点

```
 add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; } 
```

谁能给我解释一下，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:21:44.767

A`RelayCommand`需要两条信息：

1.  执行命令时应该运行什么代码（`_execute`动作）
2.  应该运行什么代码来确定这个命令是否可以执行（`_canExecute`谓词）

An`Action`是一个委托，代表一个返回的方法`void`。在这种情况下，该`_execute`操作采用一个参数 (an `object`) 并返回`void`。

A`Predicate`是一个委托，它接受一个值并返回一个布尔结果。在这种情况下，`_canExecute`谓词接受一个`object`值并返回一个`bool`.

`_execute`和值都`_canExecute`提供给`RelayCommand`构造时，因为这些是每个单独命令所独有的命令部分。

关于`CanExecuteChanged`事件：

```
public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
} 
```

当订阅者订阅事件时，`add`被调用，当他们取消订阅时，`remove`被调用。上述`CanExecuteChanged`事件只是一个传递事件（即如果订阅者订阅了该`CanExecuteChanged`事件，他们将自动订阅该`CommandManager.RequerySuggested`事件）。据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.requerysuggested.aspx)称，该`CommandManager.RequerySuggested`事件...

> 当 CommandManager 检测到可能改变命令执行能力的条件时发生。

我相信订阅者很可能会`CanExecute`在触发此事件时调用该方法，`RelayCommand`以确定该命令是否仍然可以执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T23:41:52.400

添加/删除类似于属性获取/设置，但用于事件。添加代码将被调用时

```
RelayCommandInstance.CanExecuteChanged += MyChangedEventHandler 
```

被执行。执行 -= 时会调用删除代码。您很少看到这种语法，因为您很少需要覆盖从事件调用列表中添加/删除委托的默认行为。

在这种情况下，RelayCommand 只是将其 CanExecuteChanged 事件映射到 CommandManager.RequerySuggested 事件。

# jquery - Superfish 插件：$.fn.extend({...})——这段代码是如何工作的？

> ID：11286312
> 
> 赞同：2
> 
> 时间：2012-07-01T23:08:24.233
> 
> 标签：jquery, plugins, overriding

Superfish JS 来[了](http://users.tpg.com.au/j_birch/plugins/superfish/js/superfish.js)。

以下是相关代码：

```
$.fn.extend({
    hideSuperfishUl : function() {
        // ...code here...
        return this;
    },
    showSuperfishUl : function(){
        // ...code here...
        return this;
    }
}); 
```

问题：

是否`$.fn.extend({...});`允许用户覆盖`hideSuperfishUl`&`showSuperfishUl`功能？如果是这样，调用插件时更改这些方法的语法是什么样的：

```
<script> 

    $(document).ready(function() { 
        $('ul.sf-menu').superfish(); // How to override hideSuperfishUl &/or showSuperfishUl?
    }); 

</script> 
```

Superfish 是不久前写的......这仍然是允许用户覆盖插件~~功能~~功能/方法/其他的最佳方式吗？如果没有，是否有“最佳”方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:25:38.817

打算在这里回答我自己的问题...**如果我在下面写的任何内容有误，请纠正我！**;)

* * *

[这篇文章](http://fuelyourcoding.com/jquery-plugin-design-patterns-part-i/)是这样说的：

> ## 延长
> 
> 在我看来，这是创建 jQuery 插件最不习惯的方式。它使用`jQuery.fn.extend`方法而不是 `jQuery.fn.pluginName`：
> 
> ```
> (function($){
>   $.fn.extend({
>       myPlugin: function() {
>           return this.each(function(){
>               // do something
>           });
>       },
>       myOtherPlugin: function() {
>           return this.each(function() {
>               // do something
>           });
>       }
>   });
> })(jQuery); 
> ```
> 
> 如果您需要向 jQuery 添加大量插件方法，您会发现此结构很有用。但是，我认为，如果您的插件需要添加这么多方法，则可能有更好的方法来构建其实现。
> 
> 我觉得从其他 JS 库过渡的程序员更多地使用 extend 方法。我个人觉得这个简单的`$.fn.pluginName =`结构更容易阅读，更符合你通常在 jQuery 插件中看到的内容。

Superfish JS 使用与上述引用相同的代码；长话短说，`showSuperfishUl()`并且`hideSuperfishUl()`是jQuery 命名空间中的**附加**插件`$.fn`。

我能够像这样覆盖上述功能：

```
jQuery(function(){

    $.fn.showSuperfishUl = function() {
        console.log('OMG');
        return this;
    };

    $.fn.hideSuperfishUl = function() {
        console.log('BECKY');
        return this;
    };

    jQuery('ul.sf-menu').superfish();
}); 
```

接下来，[这篇文章](http://www.learningjquery.com/2007/10/a-plugin-development-pattern)说：

> ## 在适用的情况下提供对辅助功能的公共访问
> 
> ```
> // plugin definition
> $.fn.hilight = function(options) {
>   // iterate and reformat each matched element
>   return this.each(function() {
>       var $this = $(this);
>       // ...
>       var markup = $this.html();
>       // call our format function
>       markup = $.fn.hilight.format(markup);
>       $this.html(markup);
>   });
> };
> // define our format function
> $.fn.hilight.format = function(txt) {
>   return '<strong>' + txt + '</strong>';
> }; 
> ```
> 
> 我们可以很容易地支持选项对象上的另一个属性，该属性允许提供回调函数来覆盖默认格式。这是支持自定义插件的另一种绝佳方式。此处显示的技术通过实际公开格式函数以使其可以重新定义，从而更进一步。使用这种技术，其他人可以发布他们自己的插件自定义覆盖 נ换句话说，这意味着其他人可以为您的插件编写插件。

## 结论：

两者`$.fn.extend`和`$.fn.pluginName.function`相似，允许最终用户轻松覆盖功能；前者将新插件添加到 jQuery`$.fn`命名空间，而后者是包含在单个`$.fn.pluginName`命名空间中的函数。

[摘要和最佳实践](http://docs.jquery.com/Plugins/Authoring#Summary_and_Best_Practices)说：

> 不要让 jQuery.fn 对象与每个插件的多个命名空间混为一谈。

...因此，我选择的“最佳”技术是`$.fn.pluginName.function`.

# android - Tablet Genesis 的供应商 ID 是什么？

> ID：11286314
> 
> 赞同：1
> 
> 时间：2012-07-01T23:08:44.157
> 
> 标签：android, hardware

有谁知道 Linux 上用于 Genesis 平板电脑的 USB 调试的供应商 ID？我的平板电脑是 GT 7200。我需要通过 USB 使用这款平板电脑进行调试。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:31:22.200

我已经得到了答案，只需要在终端上运行 lusb 并识别我的供应商 ID 和产品 ID：

总线 001 设备 019：ID 18d1:0003 Google Inc.

其中供应商 ID 为：18d1，产品 ID 为：0003

# r - 在 R 中优化循环

> ID：11286316
> 
> 赞同：2
> 
> 时间：2012-07-01T23:08:59.967
> 
> 标签：r, loops, data.table

我想在 R 中优化以下代码。这个循环需要很长时间才能运行。我想知道是否有人可以帮助我优化这段代码，因为它需要很长时间才能运行？我谢谢大家！

`SIN_FM5`: 是一个大约有 300.000 行和 7 列的数据库。

```
# Make Combination  

SIN_FM5$Combination=(SIN_FM5$SINISTRE)
Count.Comb=data.frame(table(SIN_FM5$Combination))

# Calculate number of combinations 
Total.Comb=nrow(Count.Comb)

# Loop through all combinations and calculate statistics

Statistics=array(0,dim=c(Total.Comb,5))

for (i in 1:Total.Comb) {

  Subset=subset(SIN_FM5, SIN_FM5$Combination==Count.Comb[i,1])
  Statistics[(i),]=c(Count.Comb[i,1],mean(Subset$MONTANT_PAIEMENT), 
  median(Subset$MONTANT_PAIEMENT),min(Subset$MONTANT_PAIEMENT), 
  max(Subset$MONTANT_PAIEMENT))

}
resultatN=cbind(Count.Comb,Statistics)

dput(head(SIN_FM5)) 
```

控制台~/

```
 "TRSP-5194", "TRSP-5197", "TRSP-5201", "TRSP-5202", "TRSP-5204", 
"TRSP-5205", "TRSP-5207", "TRSP-5212", "TRSP-5214", "TRSP-5215", 
"TRSP-5218", "TRSP-5222", "TRSP-5230", "TRSP-5238", "TRSP-5243", 
"TRSP-5247", "TRSP-5248", "TRSP-5253", "TRSP-5254", "TRSP-5255", 
"TRSP-5257", "TRSP-5259", "TRSP-5262", "TRSP-5263", "TRSP-5266", 
"TRSP-5267", "TRSP-5268", "TRSP-5270", "TRSP-5271", "TRSP-5274", 
"TRSP-5277", "TRSP-5279", "TRSP-5281", "TRSP-5283", "TRSP-5288", 
"TRSP-5289", "TRSP-5293", "TRSP-5296", "TRSP-5299", "TRSP-5301", 
"TRSP-5303", "TRSP-5304", "TRSP-5306", "TRSP-5308", "TRSP-5310", 
"TRSP-5311", "TRSP-5312", "TRSP-5313", "TRSP-5335", "TRSP-5343", 
"TRSP-5348", "TRSP-5352", "TRSP-5357", "TRSP-5363", "TRSP-5366", 
"TRSP-5372", "TRSP-5373", "TRSP-5384", "TRSP-5386", "TRSP-5388", 
"TRSP-5391", "TRSP-5392", "TRSP-5428", "TRSP-5436", "VANBILSENYolanda", 
"VanLierop", "VirgaJesseZiekenhuis", "WanetGeorges", "WANETThierry", 
"WILLEMSMichel", "WUESTENBERGHSAlain", "X01", "X01CR", "X02CR", 
"X03CR", "X04CR", "X05CR", "X06CR", "X07CR", "Y01", "Y01CR", 
"Y02", "ZOPO-5344"), class = "factor"), Combination = c(73010009L, 
73010009L, 73010014L, 73010014L, 73010014L, 73010014L)), .Names = c("SINISTRE", 
"victimeid", "Nature.Injury", "LocationL", "DurationITT", "Code.Nace2008", 
"POLICE", "TYPE_DE_PAIEMENT", "MODE_DE_PAIEMENT", "CODE_NATURE_DE_PAIEMENT", 
"MONTANT_PAIEMENT", "BENEFICIARE", "Combination"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:48:38.083

```
SIN_FM5 <- data.frame(Combination = sample(1:10, 100, repl=TRUE), MONTANT_PAIEMENT=rnorm(100))
bySIN <- by(SIN_FM5, list(SIN_FM5[['Combination']]), FUN= function(subd) { 
           data.frame(counts = nrow(subd), 
                meanMont = mean(subd$MONTANT_PAIEMENT), 
                medMont =  median(subd$MONTANT_PAIEMENT),
                minMont = min(subd$MONTANT_PAIEMENT), 
                maxMont =  max(subd$MONTANT_PAIEMENT) )  } )
> sapply(bySIN, as.vector)
         1         2           3          4          5          6          7          8         
counts   11        7           14         9          11         16         10         8         
meanMont 0.3499753 -0.188964   0.1740817  -0.1505312 -0.6335896 -0.1434513 -0.2148642 -0.2978299
medMont  0.4381513 -0.06965143 0.05762425 -0.2247187 -0.7682626 -0.2288606 -0.1467318 -0.3315809
minMont  -1.122418 -0.9638749  -1.634259  -1.336908  -2.068224  -1.974108  -2.15415   -1.295045 
maxMont  1.50662   0.1653189   1.215114   1.243138   0.4643551  1.29805    1.154282   0.7097163 
         9          10       
counts   4          10       
meanMont 0.2575141  0.146613 
medMont  0.07692888 0.1047567
minMont  -0.534418  -1.006938
maxMont  1.410617   1.4973 
```

这是一个 data.table 解决方案。可能要快得多：

```
require(data.table)
dtb <- data.table(SIN_FM5)
setkey(dtb, "Combination")

dtb[ , list(counts=length(MONTANT_PAIEMENT),
               meanMont = mean(MONTANT_PAIEMENT), 
               medMont =  median(MONTANT_PAIEMENT),
               minMont = min(MONTANT_PAIEMENT), 
               maxMont =  max(MONTANT_PAIEMENT) ), by="Combination"]
#-----------------------------------------------
      Combination counts   meanMont     medMont    minMont   maxMont
 [1,]           1     11  0.3499753  0.43815133 -1.1224179 1.5066198
 [2,]           2      7 -0.1889640 -0.06965143 -0.9638749 0.1653189
 [3,]           3     14  0.1740817  0.05762425 -1.6342586 1.2151136
 [4,]           4      9 -0.1505312 -0.22471868 -1.3369085 1.2431378
 [5,]           5     11 -0.6335896 -0.76826264 -2.0682244 0.4643551
 [6,]           6     16 -0.1434513 -0.22886060 -1.9741083 1.2980502
 [7,]           7     10 -0.2148642 -0.14673175 -2.1541500 1.1542819
 [8,]           8      8 -0.2978299 -0.33158086 -1.2950452 0.7097163
 [9,]           9      4  0.2575141  0.07692888 -0.5344180 1.4106168
[10,]          10     10  0.1466130  0.10475674 -1.0069382 1.4972998 
```

# c++ - 无法取消引用

> ID：11286317
> 
> 赞同：0
> 
> 时间：2012-07-01T23:09:10.970
> 
> 标签：c++

在以下代码中，为什么无法执行此取消引用：`*arr = 'e'`. 输出不应该是字符`'e'`吗？

```
int main ()
{
    char *arr = "abt";
    arr++;
    * arr='e'; // This is where I guess the problem is occurring.
    cout << arr[0];

    system("pause");

} 
```

我收到以下错误：

> Arrays.exe 中 0x00a91da1 处的未处理异常：0xC0000005：访问冲突写入位置 0x00a97839。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:12:00.860

`"abt"`是所谓的字符串文字常量，任何修改它的尝试都会导致未定义的行为`*arr='e';`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T23:23:33.580

```
int main ()
{
    char *arr= "abt"; // This could be OK on some compilers ... and give an access violation on others
    arr++;
    *arr='e'; // This is where I guess the problem is occurring.
    cout<<arr[0];

    system("pause");

} 
```

相比之下：

```
int main ()
{
    char arr[80]= "abt"; // This will work
    char *p = arr;
    p++;    // Increments to 2nd element of "arr"
    *(++p)='c'; // now spells "abc"
    cout << "arr=" << arr << ",p=" << p << "\n"; // OUTPUT: arr=abc,p=c
return 0;    
} 
```

此链接和图表解释了“为什么”：

> [http://www.geeksforgeeks.org/archives/14268](http://www.geeksforgeeks.org/archives/14268)
> 
> *C 程序的内存布局*
> 
> C 程序的典型内存表示由以下部分组成。
> 
> 1.  文本段
> 2.  初始化数据段
> 3.  未初始化的数据段
> 4.  堆
> 5.  堆
> 
> 而像 const char* string = "hello world" 这样的 C 语句使字符串字面量“hello world”存储在初始化的只读区域中，并将字符指针变量字符串存储在初始化的读写区域中。

# google-maps - 如何调节 InfoWindow 的宽度？

> ID：11286320
> 
> 赞同：0
> 
> 时间：2012-07-01T23:09:38.407
> 
> 标签：google-maps, infowindow

我制作了一个谷歌地图，在其中我使用[InfoBox 库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)自定义了 InfoWindows 。然而，我正在努力使一些 InfoWindows 比其他的更宽。这可以在[演示地图](https://dl.dropbox.com/u/23278095/mapdemo.html)中看到。

```
var w = "530px";
if(!foto){
w= "200px";
}

var myOptions = {
maxWidth: 0
,boxStyle: { background: "url('tipbox.gif') no-repeat", width: w }
,closeBoxMargin: "10px 2px 2px 2px"
};
infoWindow = new InfoBox(myOptions); 
```

调试演示我看到 w 设置正确：

![在此处输入图像描述](../Images/d9420d06cb2425934b32181e5bccd28a.png) ![在此处输入图像描述](../Images/5dd7571a236def78311a7140b60191a1.png)

然而，两个 InfoWindows 具有相同的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:48:20.190

当标记单击侦听器运行时，您更改了 infoBox (setContent(boxText)) 的内容，但不更改大小。用 setOptions(myOptions) 替换 setContent 调用，这将改变一切，包括 boxText。

```
google.maps.event.addListener(marker, "click", function(){
  if(map.getZoom() < 6) map.setZoom(6);

  map.panTo(marker.getPosition());
  infoWindow.setOptions(myOptions);
  infoWindow.open(map, marker);
}); 
```

顺便说一句 - 以合理的方式缩进你的代码会更容易理解。

# c++ - 用于将静态字符串常量与类型相关联的类型特征模式

> ID：11286321
> 
> 赞同：1
> 
> 时间：2012-07-01T23:09:52.353
> 
> 标签：c++, templates, traits

我编写了一个简单的特征类，用于将字符串标识符与指定类型相关联，它的使用如下：

```
typedef someclass<double,44> someD;
template<> inline const char* 
    nametrait<someD>::name() {return "some_other_double";} 
```

然后我可以静态和类型安全地执行 std::cout << someD::name()<

我明白了`some_other_double`。这将用于包装带有整数键的旧的类似数据库的结构，以进行更类型安全的处理，其中每个字段都由它们自己的类型表示，并且 `some_other_double`表示数据库中的字段名称。

这很好用，而且当没有设置名称时我也会得到一个合理的编译错误（**在最后找到我的完整代码**）。但是，我想知道是否有更好的模式来实现相同的效果。我会定义很多这样的对象，而我真正追求的是更像

```
typedef someclass<double,44,"some_other_double"> someD; 
```

但是不允许像这样使用文字字符串常量（我认为甚至在 c++11 中也不行）。如果我一个人处理这段代码，我可能会使用宏，但我并不热衷于为它辩护

```
#define namedtype(ss,tt,id,nn,newname)\
typedef ss<tt,id> newname;  \
template<> inline const char* nametrait<newname>::name() {return nn;} 
```

我还尝试了指定静态名称常量，如下所示： `template<> const char * someclass<double,44>::name = "some_other_double";`

但我认为不可能确保它们被定义一次且仅一次而没有比上述更多的文本（我需要为某些 cpp 文件中声明的每个强制模板实例化）。我更喜欢在链接错误之前编译时错误。

这是我的代码：

```
// file: mytypes.h (I omit the include guard)

// this is the default which generates an error message on looking up
// MISSING_DEFINITION_OF_name
template <typename T>
class nametrait
{
public:
   static inline const char* name() {return T::MISSING_DEFINITION_OF_name();};
};

template <typename T,int identifier>
class someclass {
private:
   someclass(){};
public:
   static const char * name() {return nametrait<someclass>::name() ;};
};

typedef someclass<double,44> someD;
template<> inline const char* nametrait<someD>::name() {return "some other double";}

typedef someclass<int,55> someI;
template<> inline const char* nametrait<someI>::name() {return "some specific int";}

typedef someclass<char,22> someC;
template<> inline const char* nametrait<someC>::name() {return "some specific char";}

typedef someclass<char,5> someC;
template<> inline const char* nametrait<someC>::name() {return "some other char";} 
```

利用：

```
// file:: main.cpp
#include mytypes.h
int main(){
   std::cout << someI::name()<<std::endl;
   std::cout << someD::name()<<std::endl;   
   std::cout << someC::name()<<std::endl;
   std::cout << someC2::name()<<std::endl;
} 
```

问题：

1.  有没有人有更好的解决方案？
2.  我的理解是否正确，与静态字符串常量相比，内联模板方法返回字符串通常不会产生任何额外成本？（例如将 gcc 与 -g -O 一起使用，这实际上并不意味着 -fno-inline）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:30:51.320

我不确定它是否更好，但这稍微短一些：

```
template <typename T,int identifier>
class someclass {
private:
   someclass(){};
public:
   static inline const char * name();
};

typedef someclass<double,44> someD;

template <> inline const char * someD::name() {return "some other double"; } 
```

# ruby-on-rails - 在连接表上使用回形针：工作申请

> ID：11286331
> 
> 赞同：0
> 
> 时间：2012-07-01T23:12:15.457
> 
> 标签：ruby-on-rails, paperclip

编辑：我添加了文件字段，并在 jobenrollment 控制器中更改了 jobenrollment 的创建 EDIT2：以下代码应该可以工作

我有一个可以申请工作的应用程序。我有一个用户模型（id、name、email）和一个工作模型（id、title）。我希望我的用户能够申请工作。所以我创建了第三个模型，称为 Jobenrollment (id, user_id, job_id)，其中“user_id”在“User”中引用“id”，“job_id”在“Job”中引用“id”

我有一个登录系统（按照 Rails 教程手工制作）。因此，我有一个名为 current_user 的变量，用于当前登录的用户。到目前为止，我的 UI 如下： - 用户已登录 - 他们打开工作的显示页面，查看有关工作的所有信息，然后可以单击通过此表单的应用按钮（位于我渲染的作业视图文件夹的一部分中）：

```
<%= form_for(current_user.jobenrollments.build(job_id: @job.id), :html => { :multipart => true }) do |f| %>

  <%= f.hidden_field :job_id %>
      <%= f.file_field :resume %>
  <%= f.submit "Apply", :class => "btn btn-large btn-success" %>

<% end %> 
```

用户模型如下（user.rb）：

```
class User < ActiveRecord::Base

has_many :jobenrollments, dependent: :destroy
has_many :jobs, :through => :jobenrollments

def unapply!(job)
    jobenrollments.find_by_job_id(job.id).destroy
end 
```

工作.rb

```
has_many :jobenrollments, dependent: :destroy
has_many :users, :through => :jobenrollments 
```

jobenrollments_controller.rb

```
def create
   @job = Job.find(params[:jobenrollment][:job_id])
   current_user.jobenrollments.create!(params[:jobenrollment])
   redirect_to @job
end

def destroy
    @job = Jobenrollment.find(params[:id]).job
    current_user.unapply!(@job)
    redirect_to root_path
end 
```

到目前为止一切正常。现在我想对其进行扩充，并在使用 Paperclip 注册时添加文件上传。我在如何将文件字段合并到我的表单中时遇到问题..

我跑了：

```
rails generate paperclip jobenrollment resume 
```

将 Paperclip 添加到 jobenrollments 后，我的 jobenrollment 模型如下：

```
 class Jobenrollment < ActiveRecord::Base
    belongs_to :user
     belongs_to :job
    validates_uniqueness_of :user_id, :scope => :job_id

   #resume attachment using Paperclip, cf doc in Github readme
   has_attached_file :resume, url: "/resumes/:id/:basename.:extension",
                           path: ":rails_root/public/resumes/:id/:basename.:extension"

    #validates_attachment_presence :resume 
```

结尾

```
== Schema Information
# Table name: jobenrollments
    id                  :integer         not null, primary key
    user_id             :integer
    job_id              :integer
    created_at          :datetime        not null
    updated_at          :datetime        not null
    resume_file_name    :string(255)
    resume_content_type :string(255)
    resume_file_size    :integer
    resume_updated_at   :datetime 
```

如果任何对 Paperclip 感到满意的人可以帮助我弄清楚这个时髦的东西，那就太棒了。塔安克斯 :)

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:16:17.637

file_field 方法用于向表单添加文件上传输入。确保将表单设为多部分。

# django - 检查图像是否存在 - Django (1.3)

> ID：11286334
> 
> 赞同：3
> 
> 时间：2012-07-01T23:13:02.807
> 
> 标签：django, django-templates

我有一个模板来根据一些变量 {{var}}.jpg 显示图像如果某种方式对于 var 的特定值，没有相应的图像，我想显示一个后备图像以达到审美目的。

我如何实现这一目标？

我已经定义了一个静态路径，我正在使用

```
{% load static %}

<img src="{% get_static_prefix %}img/{{var}}.jpg"> 
```

显示我的图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T04:45:03.083

为此编写一个[自定义过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。

```
{% if var|image_exists %}
   <img src="{% get_static_prefix %}img/{{var}}.jpg"> 
{% else %}
   <img src="{% get_static_prefix %}img/fallback.jpg"> 
{% endif %} 
```

`image_exists`是自定义过滤器。有一条简单的线路将为您工作。

```
from django.core.files.storage import default_storage

default_storage.exists(your_image_path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:59:41.073

如果 {{var}} 中只有图片 url。然后你可以简单地这样做：

```
{% if var %}
   <img src="{% get_static_prefix %}img/{{var}}.jpg"> 
{% else %}
   <img src="{% get_static_prefix %}img/fallback.jpg"> 
{% endif %} 
```

或者如果有 {{var}} 的“图像”字段，那么：

```
{% if var.image %}
   <img src="{% get_static_prefix %}img/{{var}}.jpg"> 
{% else %}
   <img src="{% get_static_prefix %}img/fallback.jpg"> 
{% endif %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-01T15:01:29.387

如果变量不是具有关联图片的对象的实例（意味着`{{ var.image }}`不起作用），而是`{{ var }}`简单地指示静态图像的名称：

而不是使用

`<img src="{% get_static_prefix %}img/{{var}}.jpg">`

做

`<div id="my_image" style="background: url({% get_static_prefix %}img/{{var}}.jpg)"></div>`

然后`div`用备份图像添加一个包装，结果是：

```
<div id="my_backup_image" style="background: url({% get_static_prefix %}img/backup.jpg)">
	<div id="my_image" style="background: url({% get_static_prefix %}img/{{var}}.jpg)"></div>
</div>
```

这样，两个背景都处于活动状态，但是当内部失败时，只能看到外部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T00:03:09.317

一个想法是检查视图中是否存在 var_x.jpg（我假设您可以这样做）。如果 var_x.jpg 不存在，只需将其添加到字典中： {"var_x":"missing","var_y":"missing"} 等形式的 "missing_images" 并将字典传递给您的视图，然后在模板中您只需：

```
{% if missing_images.var_x %} display fallback
{% else %} display var_x.jpg
{% endif %} 
```

# javascript - JavaScript 设置超时循环返回值

> ID：11286340
> 
> 赞同：1
> 
> 时间：2012-07-01T23:13:57.973
> 
> 标签：javascript, settimeout

我有这个功能可以 ping 我的服务器以获取特定的数据更改：

```
function connected() {
  $.ajax({
    success : function(d) {
      if (d.success) {
        // return data
      } else {
        setTimeout(connected, 200);
      }
    }
  });
} 
```

（显然代码已被剥离到最低限度，以使我的意图更清晰）

我想要做的是在找到它时返回一个 bool true ，所以我可以去

```
if (connected()) {
  // process data
} 
```

（显然数据存储在全局变量中。）

有什么办法可以做到这一点？

编辑

我可以创建一个“暂停”功能：

```
function pauseScript(ms) {
  ms += new Date().getTime();
  while (new Date().getTime() < ms) {}
} 
```

然后更改我的代码以排除 setTimeout() （并包括其他一些东西）

```
function connected() {
  var value;
  $.ajax({
    async: false,
    success : function(d) {
      if (d.success) {
        // set data
          value = true;
      } else {
        pauseScript(200);
        value = connected();
      }
    }
  });
  return value;
} 
```

然而，这感觉有点hacky！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:26:27.400

为此，最好在异步模式下继续：

```
function connected(callback) {
  $.ajax({
    success : function(d) {
      if (d.success) {
        callback();
      } else {
        setTimeout(function() {
          connected(callback);
        }, 200);
      }
    }
  });
}

//Using :
connected(function(){
  //Here i finish my scan result
}); 
```

也许，在这种情况下我不太确定，你需要绑定这个（我的意思是绑定范围）： [http ://www.robertsosinski.com/2009/04/28/binding-scope-in​​-javascript/](http://www.robertsosinski.com/2009/04/28/binding-scope-in-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:15:15.390

如果您的目标浏览器支持 JavaScript 1.7 或更高版本（在撰写本文时，我认为只有 Gecko 浏览器支持），那么您可以利用生成器来执行此操作。让我们首先使您的`connect`函数异步（并且更易于测试）：

```
function connectAsync(callback) {
    // Pretend we always succeed after a second.
    // You could use some other asynchronous code instead.
    setTimeout(callback, 1000, true);
} 
```

现在将您的调用代码包装到一个函数中。（它必须在一个函数中。）

```
function main() {
    console.log("Connecting...");
    if(!(yield connect())) {
        console.log("Failed to connect.");
        yield; return;
    }
    console.log("Connected.");
    yield;
} 
```

请注意所有`yield`地方的所有 s。这是魔法的一部分。我们`yield`在调用时需要`connect`一个，`yield`在每个函数退出点之前都需要一个。

现在我们需要定义`connect`. 您可能有一堆想要同步的异步函数，所以让我们创建一个使函数同步的函数。

```
function synchronize(async) {
    return function synchronous() {
        return {func: async, args: arguments};
    };
} 
```

然后我们可以`connect`用`connectAsync`它创建：

```
var connect = synchronize(connectAsync); 
```

现在我们需要创建一个运行所有这些魔法的函数。这里是：

```
function run(sync) {
    var args = Array.prototype.slice.call(arguments);
    var runCallback = args.length ? args[args.length - 1] : null;
    if(args.length) {
        args.splice(args.length - 1, 1);
    }
    var generator = sync.apply(window, args);
    runInternal(generator.next());
    function runInternal(value) {
        if(typeof value === 'undefined') {
            if(runCallback) {
                return runCallback();
            }else{
                return;
            }
        }
        function callback(result) {
            return runInternal(generator.send(result));
        }
        var args = Array.prototype.slice.call(value.args);
        args.push(callback);
        value.func.apply(window, args);
    }
} 
```

现在你可以`main`用这个魔法运行你的函数：

```
run(main); 
```

我应该注意，它不再可能`main`返回一个值。`run`可以接受第二个参数：同步函数完成时要调用的回调。要将参数传递给`main`（例如`1`、`2`和`3`），您可以这样称呼它：

```
run(main, 1, 2, 3, callback); 
```

如果您不想要回调，请传递`null`或`undefined`。

* * *

要尝试这一点，您必须将`type`标签的`script`设置为`text/javascript; version=1.7`。JavaScript 1.7 添加了新的关键字（如`yield`），因此它是向后不兼容的，因此，必须有某种方式将自己与旧代码区分开来。

有关生成器的更多信息，请参阅[MDN 上的此页面](https://developer.mozilla.org/en/JavaScript/Guide/Iterators_and_Generators)。有关协程的更多信息，请参阅[Wikipedia 上的文章](https://en.wikipedia.org/wiki/Coroutine)。

**尽管如此，由于对 JavaScript 1.7 的支持有限**，这并不实用。**此外，这种代码并不常见，因此可能难以理解和维护。**我建议只使用异步风格**，如[Deisss 的回答所示](https://stackoverflow.com/a/11286397)。*但是，可以*做到这一点很巧妙。**

# java - Android 如何正确添加几个按钮监听器

> ID：11286343
> 
> 赞同：0
> 
> 时间：2012-07-01T23:14:42.913
> 
> 标签：java, android, actionlistener

想请教一下如何给android的几个按钮添加几个监听器。

1.  添加一个通用侦听器并检查哪个按钮调用了侦听器。
2.  添加多个匿名侦听器。
3.  添加一些将被调用的方法（在 XML onClick 属性中描述）

广告。1 如何检查哪个按钮调用了侦听器（例如 e.getSource() ，其中 e 是事件）。我得到了这种代码，将按钮保留为字段并不好。我应该如何纠正它？3.选项的缺点是什么？

```
package com.example.fiszki;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity implements OnClickListener {
Button b;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View arg0) {
    b.setText("kupa");      
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:18:44.320

1和2都是最常用的。我很少看到 3 实施。在 1 中，请区分您需要 if 语句的按钮，如下所示：

```
if(arg0.getId() == R.id.buttonId)
{
//Code for this button
}
else if(arg0.getId() == R.id.buttonId2)
{
//Code for second button
} 
```

等等。

就个人而言，我更喜欢第二个选项，因为您可以很容易地知道代码属于哪个按钮，尤其是当您在布局上有很多按钮时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:53:26.337

如果可能的话，我更喜欢#3，恕我直言，它更干净。例如

```
<Button android:id="@+id/button1" android:onClick="onButtonClicked" />
<Button android:id="@+id/button2" android:onClick="onButtonClicked" />
<Button android:id="@+id/button3" android:onClick="onButtonClicked" /> 
```

然后在你的活动中

```
public void onButtonClicked(View v) {
    switch (v.getId()) {
       case R.id.button1:
         break;
       case R.id.button2:
         break;
       case R.id.button3:
         break;
    }
} 
```

但是，这不适用于新的 Fragment 设计模式，如果您使用的是 Fragment，请坚持使用选项 #1 或 #2。

# actionscript-3 - 使用多个 ActionScript 3 类

> ID：11286344
> 
> 赞同：0
> 
> 时间：2012-07-01T23:14:48.453
> 
> 标签：actionscript-3, class, package, document

我在创建多个 AS3 类时遇到问题，我有我的文档类，但无法获得其他类。

下面是一个例子。

~Main.as

```
package {
    import uk.co.epickris.project.*;

    public class Main {
        public function Main() {
            trace('Main constructor.');
        }
    }
} 
```

~/uk/co/epickris/project/Example.as

```
package uk.co.epickris.project {
    public class Example {
        public function Example() {
            trace('Example constructor.');
        }
    }
} 
```

运行我的 Flash 项目后，我看到了主构造函数，但没有看到示例构造函数，我不确定自己做错了什么，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:17:01.273

您需要`Example`通过在文档类中创建它的实例来初始化您的类。

```
package
{
    import uk.co.epickris.project.*;

    public class Main
    {
        public function Main()
        {
            trace('Main constructor.');

            // We're creating an instance of the Example class here.
            var eg:Example = new Example();
        }
    }
} 
```

类在类的顶部导入时不会自动调用其构造函数 - 需要使用`new`关键字创建类的实例。

当`new`关键字用于创建实例时，构造函数（通过创建与类同名的函数来定义）也会被调用。

您的文档类是您的案例中唯一创建并自动调用其构造函数的类，因为这是文档类的本质。

* * *

请花一些时间阅读这篇关于 AS3 中面向对象编程的基础知识的文章： [OOP 简介](http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/)

# glsl - imageLoad 和 imageStore 貌似没有定义

> ID：11286345
> 
> 赞同：1
> 
> 时间：2012-07-01T23:15:15.350
> 
> 标签：glsl

我正在通过在 OpenGL 4.2 中使用原子纹理来实现单通道深度剥离算法。我编写了以下片段程序：

```
#version 420 core
layout(r32i) coherent uniform iimage2D img2D_0;
uniform iimage2D img2D_1;
in vec3 pos;
vec4 insert(vec4 data, float new_data) {
    if      (new_data<data.x) return vec4(      new_data,data.xyz);
    else if (new_data<data.y) return vec4(data.x,new_data,data.yz);
    else if (new_data<data.z) return vec4(data.xy,new_data,data.z);
    else if (new_data<data.w) return vec4(data.xyz,new_data      );
    else                      return data;
}
void main() {
    ivec2 coord = ivec2(gl_FragCoord.xy);
    while (imageAtomicCompSwap(img2D_0,coord,0,1)==1);
    vec4 depths = imageLoad(img2D_1,coord);
    depths = insert(depths,gl_FragCoord.z);
    imageStore(img2D_1,coord,depths);
    memoryBarrier();
    imageAtomicExchange(img2D_0,coord,0);
} 
```

但是，我收到以下错误：

```
Fragment info
-------------
0(15) : error C1115: unable to find compatible overloaded function "imageLoad(struct iimage2D, ivec2)"
0(17) : error C1115: unable to find compatible overloaded function "imageStore(struct iimage2D, ivec2, vec4) 
```

我注意到我在着色器中使用了#version 420，并且我检查了文档中的函数声明（[imageLoad](http://www.opengl.org/sdk/docs/manglsl/xhtml/imageLoad.xml)，[imageStore](http://www.opengl.org/sdk/docs/manglsl/xhtml/imageStore.xml)），它们似乎匹配。奇怪的是，似乎定义了 imageAtomicCompSwap、memoryBarrier 和 imageAtomicExchange。为什么会出现这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:57:04.613

```
uniform iimage2D img2D_1; 
```

这不是有效的图像定义。你*必须*用`layout()`它来定义它的图像格式，除非你已经声明了它`writeonly`。它应该在这一行出错，但它把它解释为某种结构定义。因此，当您尝试使用它时，它稍后会出错。

# iphone - Xcode 无法识别本地数据库。似乎无法连接到 sqlite3 数据库文件

> ID：11286351
> 
> 赞同：0
> 
> 时间：2012-07-01T23:16:03.887
> 
> 标签：iphone, database, xcode, login, sqlite

我正在尝试将我称为 Login.sql 的 sqlite3 数据库文件连接到我正在编写的 iphone 应用程序。Xcode 似乎没有重新识别该文件，即使我尝试将其放入多个位置，包括 Documents 文件夹、包含 xcode 项目的文件夹以及该项目的 Dervived Data。以下代码位于 didFinishLaunchingWithOptions 下的 AppDelegate 文件中（它曾经在 View Controller 中，但我认为它可以工作而移动它。

这是代码： NSString *docsDir;

```
NSArray *dirPaths;

// databaseName = [[NSBundle mainBundle] pathForResource:@"DBLogin.sql" ofType:@"db"];

databaseName= @"Login.sql";

// Get the documents directory

dirPaths = NSSearchPathForDirectoriesInDomains(

                                               NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDir = [documentPaths objectAtIndex:0];

databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

// Build the path to the database file

//databasePath = [[NSString alloc]                     initWithString: [docsDir stringByAppendingPathComponent:                                     @"DBLogin.sql"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: databasePath ] == NO)

{

    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK)

    {

        NSLog(@"DATABASE LOADED");

        char *errMsg;

        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS User (id varchar(20) PRIMARY KEY , password varchar(20))";

        if (sqlite3_exec(database, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)

        {

            status.text = @"Failed to create table";

        }

        status.text = @"Database Connected";

        sqlite3_close(database);

    } else {

        status.text = @"Failed to open/create database";

    }

}

else{

    NSLog(@"Connect!");

}

return YES; 
```

访问数据库文件的代码在这里：[Xcode login screen sqlite3 database authentication issue](https://stackoverflow.com/questions/11244543/xcode-login-screen-sqlite3-database-authentication-issue)我只是将它包括在内，以防此代码可能导致问题。

基本上每次我在这段代码中放置一个新数据库以查看这是否是问题时，我认为代码会创建一个新的临时 sql 数据库文件，其中包含在表中创建的表不存在函数。我不知道该怎么办，这让我发疯。如果有人对如何让此代码识别我的数据库有任何想法，我们将不胜感激。我已经将数据库链接到复制捆绑资源构建页面，但它仍然无法访问它。

如果您需要任何其他信息，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:07:52.617

我会给你我访问`sqlite3`数据库的步骤。

**1.**首先我创建一个带有所需表的空白sqlite数据库（使用firefox sqlite manager add-on或任何其他方便的方法）。并将其添加到我的项目中。

**2.**获取数据库文件的路径。

```
BOOL success;

NSArray*dirPath;
NSString*docDir;
NSString*databasePath;
NSString*databaseName=@"yourDB.sqlite";

//path for database
dirPath=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docDir=[dirPath objectAtIndex:0];
databasePath=[docDir stringByAppendingPathComponent:databaseName]; 
```

**3.**用于`NSFileManager`检查它是否已经存在于`DocumentDirectory`. 如果它不存在（在第一次运行中），请将其替换为保存在包中的数据库（从第一步开始）。

```
//check if present
NSFileManager*fm=[NSFileManager defaultManager];
success=[fm fileExistsAtPath:databasePath];

if(success)
{
   NSLog(@"Already present");
}
else
{

   //Copy from bundle to DocumentsDirectory on first run. Where DB won't be available in DocumentsDirectory.
      NSString*bundlePath=[[NSBundle mainBundle] pathForResource:@"yourDB" ofType:@"sqlite"];
NSError*error;
success=[fm copyItemAtPath:bundlePath toPath:databasePath error:&error];

 if(success)
 {
     NSLog(@"Created successfully");
 }

} // End of else when DB not present in documents directory. 
```

完成此操作后，您将在包中手动添加到文档目录中的空白数据库，并且所有更改都将在其上执行（而不是在包上）。在此之后，您可以继续执行其余的`sqlite3`数据库操作功能。

**编辑：**访问数据库的方法

这是我用来从数据库中检索值的方法，试试这个。

```
if(sqlite3_open([dbpath UTF8String], &database)==SQLITE_OK) //Check if it opens properly
{
    NSString*queryStmt=[NSString stringWithFormat:@"select * from sometable"];
    const char*querystmt=[queryStmt UTF8String];
    sqlite3_stmt *statement;

  if(sqlite3_prepare(database, querystmt, -1, &statement, NULL)==SQLITE_OK) // Check if prepare statment has no issues
    {
        while(sqlite3_step(statement)==SQLITE_ROW) // Consists of row.
        {
            NSString*thestring=[[NSString alloc] initWithUTF8String:(const char*)sqlite3_column_text(statement, 0)];// 0 will be first column
            NSLog(@"%@",thestring);
        }

        sqlite3_finalize(statement); //finalize statement
    }

    sqlite3_close(database); //Close database
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T04:07:52.623

问题可能是您的数据库扩展，创建一个名为`Login.sqlite`而不是`Login.sql`iPhone sqlite3 框架只识别`.sqlite`数据库的数据库。

然后，您编码的内容将起作用。

# objective-c - 将 UIImage 存储为 NSData 会返回不同的结果

> ID：11286356
> 
> 赞同：0
> 
> 时间：2012-07-01T23:17:16.080
> 
> 标签：objective-c, ios5, uiimageview, uiimage, nsdata

我正在构建一个允许用户查看网站图片的应用程序。我将图片加载到屏幕上，然后一旦用户点击其中一张，我就可以选择将其添加到他的收藏夹中。

为了让他离线查看图像，我将 UIImageJpegRepresentation 存储在 NSMutableDictionary 中，该字典随后进入 NSUserDefaults。

当用户在在线图像查看部分时，如果他遇到喜欢的图像，他可以将其从收藏夹中删除（我通过将 NSData 与我存储到 NSUserDefaults 中的内容进行比较来检查这是否是他的最爱之一）。

现在问题来了：当用户进入收藏夹部分并从 NSUserDefaults 加载图像时，NSUserDefaults 中的 NSData 与屏幕上图像视图中图像的 NSData 的比较失败。因此，当他在收藏夹部分点击图像时，没有检测到图像本身是 NSUserDefaults 中的收藏夹，我认为这两个 NSData 出于某种原因是不同的。

有人可以阐明为什么会发生这种情况并可能就如何解决它给出提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:58:41.227

图像可能被不同的压缩方式`UIImageJPEGRepresentation`——JPEG 是一种有损格式。

除此之外，这似乎不是实现您既定目标的最佳方式。如果用户正在查看很多图像并且有很多喜欢的图像，那么这将表现得很差。更好的解决方案是存储某种图像 ID，例如 URL。比较 URL 字符串可能比比较整个图像要快几个数量级。

# visual-studio-2010 - 如何在VB中正确声明？

> ID：11286358
> 
> 赞同：0
> 
> 时间：2012-07-01T23:17:38.593
> 
> 标签：visual-studio-2010, vba

我是 VB 的新手。我读了一本书并遵循它的代码

```
Public Class Form1

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim Wrap As String
    Wrap = Chr(13) & Chr(10)
    Dim i As Integer
    For i = 1 To 4
        PictureBox1.Image = System.Drawing.Image.FromFile("C:\face0" & i & ".ico")
        MsgBox("Click for next face")
    Next
End Sub
End Class 
```

有用。但是，我尝试调整代码以使 Wrap 成为整个 form1 可用的变量。我做了以下，但它不起作用。为什么？

```
Public Class Form1

    Dim Wrap As String
    Wrap = Chr(13) & Chr(10)

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Dim i As Integer
    For i = 1 To 4
        PictureBox1.Image = System.Drawing.Image.FromFile("C:\face0" & i & ".ico")
        MsgBox("Click for next face")
    Next
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:21:12.057

您不能在类级别拥有任意代码段。`Wrap = Chr(13) & Chr(10)`是一段任意代码。

如果要为变量赋值，请使用初始值设定项：

```
Dim Wrap As String = Chr(13) & Chr(10) 
```

更好的是，使用`ControlChars.CrLf`which 是相同的预定义常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T23:21:43.550

因为您将代码放在函数之外，所以这里只允许声明。

顺便说一句，Chr(13) & Chr(10) 可以用一个更好的版本代替： vbCrLf 它是一个常数，所以你不需要声明它，它做的完全一样......

# android - 安卓多屏设计

> ID：11286359
> 
> 赞同：4
> 
> 时间：2012-07-01T23:18:40.603
> 
> 标签：android, android-layout, android-assets, android-screen-support

我知道有很多关于在 Android 中设计多屏支持的文档。我已经阅读了[这里](http://developer.android.com/guide/practices/screens_support.html)的 Android 指南以及一些类似的问题，[例如](https://stackoverflow.com/questions/8428096/design-layout-for-multiple-screens)

但是，对于如何为我的应用程序实现它，我仍然有些困惑。我计划针对以下设备配置

![在此处输入图像描述](../Images/a588e3351cf1a97cfcdb418ae5be7e08.png)

我认为我需要按如下方式构建项目布局是否正确：

*   中等密度普通屏幕 HVGA 320x480 (160dpi)：

    ```
    res/layout-mdpi (320 x 480 )
    res/layout-land-mdpi (480 x 320 ) 
    ```

*   高密度普通屏幕 WVGA800 480x800 (x854) (240 dpi)

    ```
    res/layout-hdpi (480 x 800)
    res/layout-land-hdpi (800 x 480) 
    ```

但是中等密度的大屏幕设备呢？

我也计划使用高密度和中等密度的绘图集。在这个早期阶段，我主要关心的是为每个布局使用合适的背景图像。例如，为了同时支持**480x800 和 480x854 尺寸**，我打算简单地使用 ImageView 作为背景，例如：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/bg"
    android:scaleType="center"/> 
```

'bg' drawable 将始终为**480x854**并使用：

```
android:scaleType="center" 
```

我希望这会照顾这两种屏幕尺寸。从而图像保持其原始外观，但以 480x800 屏幕为中心。我会从图像中丢失一些像素，但只要图像没有缩放，就可以满足我的需要。

我计划为普通屏幕设置一组 320x480 资源。

我只是希望我在这里遵循正确的程序，所以我感谢你们提供的任何信息/提示。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:16:27.403

根据我的经验，只要您有不同密度的可绘制对象，您实际上并不需要为小/中/大/等屏幕自定义布局。正如文档所说，Android 将尝试在不同的屏幕尺寸上正确呈现您的布局。

> 默认情况下，Android 会调整应用程序布局的大小以适应当前设备屏幕。在大多数情况下，这可以正常工作。在其他情况下，您的 UI 可能看起来不太好，并且可能需要针对不同的屏幕尺寸进行调整。

“其他情况”仅适用于您真的想在更大的屏幕上更改布局。

使用`android:scaleType="center"`对我有用，但就像你说的那样，如果它也应该适合较小的屏幕，它会在大屏幕上的布局周围留下空白空间。如果您有一个完全自定义的视图，其中包含应该完全正确放置的“小部件”，并且您不想以编程方式确定缩放并将相同的缩放应用于您的小部件，那么这绝对是要走的路。

# android - 来自 Eclipse 的项目资源管理器出现未知错误

> ID：11286361
> 
> 赞同：2
> 
> 时间：2012-07-01T23:18:55.940
> 
> 标签：android, build, project

我使用 eclipse 作为开发环境。我有几个链接到一个库的应用程序。在我清理项目并重建它们之后。他们都编译得很好。运行应用程序后，它会显示一条消息：我的项目有错误，需要我修复它。项目资源管理器下的项目名称旁边有一个错误图标，但在其他任何地方都没有显示任何错误。

我想知道在哪里可以找到导致我出现奇怪行为的错误。

之所以奇怪，是因为我刚刚开始了我有一段时间没有碰过的项目。我最后一次工作时它起作用了。不知道为什么我在打开 Eclipse 后会出现奇怪的行为，然后清理并重建项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:38:23.797

`~/.android/debug.keystore`在 Linux 和 Mac OS X下删除您的调试证书；该目录类似于`%USERPROFILE%/.android`Windows。

当您下次尝试构建调试包时，Eclipse 插件应该会生成一个新证书。您可能需要清理然后构建以生成证书。清理项目运行`ant clean`或转到`Build -> Clean`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T20:12:26.890

我遇到了类似的情况，但出现了不同的错误，看起来我在从运行 Mac OS X Mavericks 10.9 的 VMware Workstation 10 中访问项目目录时遇到了问题，并且我得到了名为 ".AppleDouble" 的隐藏文件夹。请注意 ".AppleDouble" 的开头有一个点。只需删除文件夹！该项目将恢复原状并完美运行。

# git - 在不提交最新更改的情况下更改最后一条提交消息

> ID：11286362
> 
> 赞同：6
> 
> 时间：2012-07-01T23:19:38.233
> 
> 标签：git

我理想的工作流程将包括以下步骤

1.  编辑代码
2.  编译
3.  git commit -a -m "提交信息"
4.  开始运行新的二进制文件、测试等（可能需要 10 多分钟）
5.  开始新的更改，而二进制文件仍在运行
6.  当第 4 步完成后，编辑第 3 步的提交消息，**而不提交第 5 步中引入的更改**，例如添加“测试 FOO 失败”

我不能使用`git commit -a --amend -m "new commit message"`，因为这也会提交新的更改。我不确定我是否要为分期或分支而烦恼。我希望我可以只编辑提交消息而不提交任何新更改。可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T03:13:16.400

没有必要在这里藏匿或做任何其他事情。

`git commit --amend -m 'Your new message.'`

不会提交任何新的更改（注意缺少`-a`标志），前提是您没有明确地将它们添加到索引中（`git add`例如使用 ）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T23:35:05.770

只是：

```
$ git stash
$ git commit --amend -m "Your Modified Message"
$ git stash apply 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-05T17:34:04.640

您还可以使用：

```
git rebase -i HEAD^ 
```

这将打开您的文本编辑器，让您更改最后一次提交。您需要将`pick`行首的单词替换为`reword`，保存文件并退出。之后，将打开一个新的文本编辑器，让您更改提交消息。

这听起来比建议的`git commit --amend`方法多一点工作，但也适用于较旧的提交。因此，如果您发现要更改最近十次提交中的两条消息，您可以再次运行`git rebase -i HEAD~10`并将单词更改为并更改这两条消息。`pick``reword`

只是为了好奇：`-i`代表*交互式变基*。

# android - DrawableTop 不显示drawable

> ID：11286364
> 
> 赞同：1
> 
> 时间：2012-07-01T23:20:16.610
> 
> 标签：android, drawable, compound-drawables

我正在尝试使用 drawableTop 在按钮中的文本上方显示图片。

我的图片来自 sdcard，不是可绘制的。

此外，按钮的大小可能会根据显示的按钮数量而变化。更多的按钮，更小的按钮，然后是更小的图像。

这是我创建按钮的方式：

```
btn = (Button) LayoutInflater.from(
                            getBaseContext()).inflate(
                            R.layout.buttonstyle, l1, false); 
```

这是 XML 文件按钮样式：

```
<?xml version="1.0" encoding="UTF-8"?>
        <Button   xmlns:android="http://schemas.android.com/apk/res/android" 
            android:background="@drawable/roundcorners" 
            android:id="@+id/buttonTest" 
            android:scaleType="centerInside"
            android:cropToPadding="false"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingBottom="10dip"
            android:layout_height="fill_parent" 
            android:layout_width="wrap_content"
            android:text="Test text"
            android:textSize="40dip"
            android:textStyle="bold"
            android:textColor="#000000">
        </Button> 
```

这是我创建drawableTop的方法：

```
Drawable drawableTop = Drawable.createFromPath(endImagemVoltar); 
btn.setCompoundDrawables(null, drawableTop, null, null); 
```

文本显示在按钮中，但图像未出现。

错误在哪里？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:25:07.983

我想缺少的是让您的可绘制对象已经调用了[setBounds(Rect)](http://developer.android.com/reference/android/graphics/drawable/Drawable.html#setBounds%28android.graphics.Rect%29)还尝试将图片加载到位图中，然后将其放入可绘制对象中：

```
Bitmap bitmapImage = BitmapFactory.decodeFile(endImagemVoltar);
Drawable bgrImage = new BitmapDrawable(bitmapImage); 
```

要使用 SetBounds ：

```
 public void setBounds (int left, int top, int right, int bottom) 
```

例如，对于 50x50 尺寸，请使用：

drawable.setBounds(0, 0, 50, 50);

# objective-c - UITextField onText 已更改

> ID：11286370
> 
> 赞同：0
> 
> 时间：2012-07-01T23:21:39.323
> 
> 标签：objective-c, ios, uitextfield

每次更改时，我都需要调查 textField 的值。为了处理这个问题，我只是将该操作添加到 .h 文件并在 .m 文件中实现该方法。（也就是说，我“ctrl+click”了情节提要中的“Value Changed”事件并将其拖到我的 .h 文件中）。即使我只是尝试从该方法中使用 NSLog，它也不会记录任何内容，无论我的文本框的值是否已更改。

我的头文件包括以下内容：

```
(IBAction)changed:(UITextField *)sender; 
```

我的 .m 文件具有以下内容：

```
 (IBAction)changed:(UITextField *)sender {

NSLog(@"%@", @"Changed");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:24:41.753

使您的控制器之一成为文本字段的委托并实现[`textField:shouldChangeCharactersInRange:replacementString:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/doc/uid/TP40006991-CH3-SW9)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T23:31:09.160

只需尝试“编辑更改”而不是“值更改”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T23:28:43.357

您可以使用通知名称`UITextFieldTextDidChangeNotification`来侦听文本确实发生了更改事件：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                       selector:@selector(_yourTextFieldDidChangedMethod:)
                                           name:UITextFieldTextDidChangeNotification
                                         object:self.yourTextField]; 
```

和选择器：

```
- (void)_yourTextFieldDidChangedMethod:(NSNotification *)notification {
   // do your work here
} 
```

# ios - 我正在尝试将字符串添加到单例中的数组

> ID：11286374
> 
> 赞同：0
> 
> 时间：2012-07-01T23:22:40.040
> 
> 标签：ios, singleton, nsmutablearray

下面是我的单例中用于将字符串添加到数组的代码。第一个 NSLog 返回正确的字符串，但第二个 NSLog 没有返回 null。如果我需要添加任何相关代码，请告诉我。谢谢。

```
 +(void) addArray:(NSString *)string
{
    NSLog(@"%@",string);

    Singleton *shared = [Singleton sharedManager];
    [shared.array addObject:string];

    NSLog(@"array: %@", shared.array);
} 
```

我将此代码添加到我的 singleton.m

```
- (id)init
{
    self = [super init];

    if (self) {
        // Work your initialising magic here as you normally would
        array = [[NSMutableArray alloc]init];
    }

    return self;
} 
```

在我程序的另一部分中，我运行此代码并打印出正确的信息

```
+(void) setPoints:(int) points
{
    Singleton *shared = [Singleton sharedManager];
    shared.points = points;
    NSLog(@"%d",shared.points);
} 
```

这是我的单例方法

```
+ (Singleton *)sharedManager
{
    static Singleton *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[Singleton alloc] init];
        // Do any other initialisation stuff here
        array = [[NSMutableArray alloc]init];
    });
    return sharedInstance;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:33:23.663

您可能忘记在 Singleton init 中分配 alloc-init 数组。

# python - 如何从 sql 查询返回的 unicode 数据中获取字符串（python、sql、wxpython）

> ID：11286375
> 
> 赞同：0
> 
> 时间：2012-07-01T23:22:54.220
> 
> 标签：python, sqlite, wxpython

我想要做的是创建一个纯字符串列表

```
cur.fetchall() 
```

询问。

我在 Stack 上阅读了一些类似类型的答案，但它们不起作用。我知道它只是 unicode，如果你打印数据它就是打印 str 但我使用这个查询来填充 wx.choice

我已经使用列表推导将 str 附加到新列表中，但这也不起作用。我也试图从元组中取出字符串。

如何获得纯字符串列表

```
['one','two','three'] 
```

从返回的查询

```
[(u'one'),(u'one'),(u'three)] 
```

所以我可以使用 wx.choice 的方式，我确信它应该被使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:30:01.943

```
[str(u) for u in [(u'one'),(u'one'),(u'three')]] 
```

所以我们所做的是`str`在每个元素上使用该函数来获得所需的结果`['one','two','three']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:56:39.480

你用的是哪个版本的wx？( `wx.version()`)。`wx.choice`应该接受 unicode 输入。

问题可能是 sql 返回一个元组列表，而您可能正试图将元组传递给小部件。尝试使用索引访问里面的字符串`[0]`

```
[u[0] for u in [(u'one',),(u'one',),(u'three',)]` 
```

# asp.net - 为什么cshtml文件不呈现iis7.5 windows server 2008

> ID：11286380
> 
> 赞同：2
> 
> 时间：2012-07-01T23:23:36.407
> 
> 标签：asp.net, razor, iis-7.5, webmatrix, asp.net-webpages

因为我已经在.cshtml asp.net 网页的这个问题上浪费了 5 天时间，所以我想为什么不问问大师。

HTTP 错误 404.4 - 未找到 您要查找的资源没有与之关联的处理程序。详细错误信息 模块 IIS Web 核心通知 MapRequestHandler 处理程序 尚未确定 错误代码 0x80070002 请求的 URL xxxxxxxxx:80/bakery/default.cshtml 物理路径 xxxxxxxx\bakery\default.cshtml 登录方法 匿名 登录用户 匿名

```
<system.webServer>
  <security>
        <requestFiltering>
            <fileExtensions>
                <remove fileExtension=".cshtml" />
                <add fileExtension=".cshtml" allowed="true" />
            </fileExtensions>
        </requestFiltering>
   </security>
    <validation validateIntegratedModeConfiguration="true" />     
<modules runAllManagedModulesForAllRequests="true" />
<handlers accessPolicy="Read, Script, Write, Execute">
    <clear />
    <remove name="cshtml-Integrated-4.0" />
    <remove name="cshtm-Integrated-4.0" />
    <remove name="cshtml-ISAPI-4.0_32bit" />
    <remove name="cshtml-ISAPI-4.0_64bit" />        
    <add name="cshtml-ISAPI-4.0_32bit" path="*.cshtml" verb="GET,HEAD,POST,DEBUG" resourceType="Unspecified" requireAccess="Script" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
    <add name="cshtml-ISAPI-4.0_64bit" path="*.cshtml" verb="GET,HEAD,POST,DEBUG" resourceType="Unspecified" requireAccess="Script" scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />        
</handlers>
</system.webServer> 
```

  记录在案：是的 .NET 4.0 已安装，这是一个明显的要求，此应用程序的应用程序池设置为“允许 32 位应用程序”，并且应用程序池设置为在集成模式下运行。服务器：windows server 2008 r2，从上面可以看到 runAllManagedModulesForAllRequests="true" 设置为 true。所以请不要问我这些做过任何故障排除的人已经做过的愚蠢问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:28:06.103

我遇到了同样的问题，我使用的是虚拟主机服务器，我通过将所有 MVC3 和 Razor dll 复制到 bin 文件夹中解决了这个问题。

1.  如果您在“应用程序”中创建 Web：右键单击您的 Web 项目，选择“添加可部署的依赖项”，然后重新构建，然后尝试部署它。

2.  如果您创建“网站”，而不是应用程序：将这些手动复制到您的 bin 文件夹中：

    Microsoft.Web.Infrastructure.dll System.Web.Helpers.dll System.Web.Mvc.dll System.Web.Razor.dll System.Web.WebPages.Deployment.dll System.Web.WebPages.dll System.Web.WebPages。 Razor.dll

# php - 我认为与 LEFT JOIN 有关的 SQL 语法错误？

> ID：11286383
> 
> 赞同：1
> 
> 时间：2012-07-01T23:24:11.020
> 
> 标签：php, mysql, database

我收到这个 mysql 错误，我不知道为什么。我正在学习一个教程，并且我已经逐字复制了视频中的语法。任何人都可以发现有什么问题吗？

这是错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 11 行的 'LEFT JOIN ( SELECT `post_id`, COUNT( `comment_id`) AS `total_co'附近使用正确的语法

```
 $query = "SELECT 
        `posts`.`post_id`                 AS `id`,
        `posts`.`post_title`              AS `title`,
         LEFT(`posts`. `post_body`, 512)  AS `preview`,
        `posts`.`post_user`               AS `user`,
         DATE_FORMAT(`posts`.`post_date`, '%d/%m/%Y %H:%i:%s') AS `date`,
         `comments`.`total_comments`,
        DATE_FORMAT(`comments`.`last_comment`, '%d/%m/%Y %H:%i:%s') AS `last_comment`

         FROM `posts`, 
         LEFT JOIN (
            SELECT 
                `post_id`,
                COUNT(`comment_id`) AS `total_comments`,
                MAX(`comment_date`) AS `last_comment`
            FROM `comments`
            GROUP BY `post_id` 
         ) AS `comments`
         ON `posts`.`post_id` = `comments`.`post_id` 
         ORDER BY `posts`.`post_date` DESC"; 
```

非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T23:26:08.540

删除第 10 行的逗号`,`：

```
FROM `posts`
     LEFT JOIN 
```

正确的语法是：

```
FROM  
    <table a>
  LEFT JOIN  
    <table b>
      ON  <join condition> 
```

* * *

与问题无关：

*   对于效率的（小）改进，将其更改`COUNT(comment_id)`为：

    ```
     COUNT(*) AS total_comments, 
    ```

*   您还可以`(post_id, comment_date)`在表上添加索引`comments`

*   在主`SELECT`列表中，如果您更喜欢在没有评论的帖子中使用`0`s 而不是s，请更改为：`NULL``comments.total_comments,`

    ```
    COALESCE(comments.total_comments, 0) AS total_comments, 
    ```

# ruby-on-rails - SQLite3::BusyException 错误

> ID：11286386
> 
> 赞同：1
> 
> 时间：2012-07-01T23:24:28.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite

创建新用户帐户时出现此错误：

```
ActiveRecord::StatementInvalid in SessionsController#create

SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction 
```

我正在使用考拉和omniauth gem 来验证和获取用户朋友。为什么我不能启动两个事务，为什么会回滚好友迁移？

如何解决这个问题？

这是我的会话控制器：

```
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env['omniauth.auth'])
    session[:user_id] = user.id
    redirect_to root_url, notice: "Signed in!"
  end 
```

这是我的用户模型：

```
class User < ActiveRecord::Base
  has_many :friends

  def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"] unless auth["info"].blank?
      user.first_name = auth["info"]["first_name"] unless auth["info"].blank?
      user.last_name = auth["info"]["last_name"] unless auth["info"].blank?
      user.image = auth["info"]["image"] unless auth["info"].blank?
      user.email = auth["info"]["email"] unless auth["info"].blank?
      user.gender = auth["extra"]["raw_info"]["gender"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"].blank?)
      user.location = auth["extra"]["raw_info"]["location"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"].blank? && !auth["extra"]["raw_info"]["location"].blank?)          
      user.token = auth["credentials"]["token"] unless auth["credentials"].blank?

        # highschool data
        user.highschool_name = auth["extra"]["raw_info"]["education"][0]["school"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][0]["school"].blank?)
        user.highschool_year = auth["extra"]["raw_info"]["education"][0]["year"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][0]["year"].blank?)
        # graduate school data
        user.graduateschool_name = auth["extra"]["raw_info"]["education"][1]["school"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][1]["school"].blank?)
        user.graduateschool_year = auth["extra"]["raw_info"]["education"][1]["year"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][1]["year"].blank?)
      user.add_friends  
      user.save!
      user
    end 
  end

  def add_friends
    facebook.get_connections("me", "friends").each do |hash|
      self.friends.where(:name => hash['name'], :uid => hash['id']).first_or_create
    end
  end

  private 

  def facebook
    @facebook ||= Koala::Facebook::API.new(token)
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T11:30:17.150

```
bundle exec rake db:reset 
```

输入上面的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:41:18.310

问题是，当用户点击 created 方法时，方法 from_omniauth(auth) 正在检查用户是否存在，如果用户不存在，它开始创建用户并从 Facebook 提供的 auth 哈希中获取所有信息。但是在保存用户之前，它调用了add_friends方法，用户还没有存在，因此错误！

所以你必须先保存用户，然后调用 add_friends 方法

而Sqlite3 是不能嵌套事务的！

干杯！

# c++ - 带有模板的头文件中的“未在范围内声明”错误

> ID：11286387
> 
> 赞同：0
> 
> 时间：2012-07-01T23:24:33.740
> 
> 标签：c++, templates, namespaces, compiler-errors, boost-function

因此，我创建了一个包含以下内容的头文件：

```
namespace A
{

template<int a>
void foo(...)
{
    //This throws a "test was not declared in this scope" error:
    boost::function< bool (int, int)> t = test<a>; 
}

template<int a>
bool test(int c, int d)
{
    //Do stuff;
}
} 
```

但是，编译时会抛出错误，我不知道为什么。测试显然在范围内。

替换或仍然不起作用`test<a>`。`boost:ref(test<a>)``&test<a>`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:26:44.483

您至少需要*声明*一些东西才能使用它。编译器在此之前并不知道它实际上存在。

```
namespace A
{

template<int a>
bool test(int c, int d);

template<int a>
void foo(...)
{
    //This throws a "test was not declared in this scope" error:
    boost::function< bool (int, int)> t = test<a>; 
}

template<int a>
bool test(int c, int d)
{
    //Do stuff;
}
} 
```

# ruby-on-rails - rake aborted 在部署到 heroku 时找不到文件 twitter/bootstrap

> ID：11286390
> 
> 赞同：3
> 
> 时间：2012-07-01T23:24:50.340
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, twitter-bootstrap

我正在尝试部署一个在开发中运行良好的应用程序，但是当我使用 $git push heroku master 将其推送到 heroku 时，rake assets:precompile 失败，因为“找不到文件 twitter/bootstrap”。（由 application.js 引发的错误）

我已经用谷歌搜索了这个问题并找到了各种各样的答案，但这些都不适合我： [Heroku deploy 在通过 twitter-bootstrap-rails gem 升级到 bootstrap 2.0.1 后失败](https://stackoverflow.com/questions/9423067/heroku-deploy-fails-after-upgrading-to-bootstrap-2-0-1-via-twitter-bootstrap-rai)

[在生产中找不到文件“twitter/bootstrap”](https://stackoverflow.com/questions/9047478/rails-app-with-twitter-bootstrap-works-in-development-but-not-in-production)

[Rails3 找不到文件“引导程序”](https://stackoverflow.com/questions/9213599/rails3-couldnt-find-file-bootstrap)

-我尝试添加 config.assets.precompile = false

谁能帮我找出问题所在？我真的无法理解。谢谢你。

这是宝石文件

```
gem 'rails', '3.2.6'

group :development do
gem 'sqlite3'
gem 'annotate', '~> 2.4.1.beta'
end

group :production do
  gem 'pg'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails', :git => "git://github.com/seyhunak/twitter-bootstrap-rails.git", :branch => "static"
  gem 'bootstrap-sass', '~> 2.0.3'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'bcrypt-ruby', '3.0.1' 
```

应用程序.css：

```
 *= require_self
 *= require_tree . 
```

这是application.js

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:23:58.353

我通过使用以下步骤解决了这个问题：

1.  从 gemfile 中的 :assets 外部移动**twitter-bootstrap-rails gem。**
2.  更新**twitter-bootstrap-rails** gem 版本**2.2.6**或直接粘贴到您的 gemfile 中。 **gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'**

**（或者）**

如果 twitter-bootstrap-rails 2.2.6 不起作用，则使用**twitter-bootstrap-rails gem 最新版本**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:10:32.667

为什么要包含 2 次引导程序？

```
//= require twitter/bootstrap
//= require bootstrap 
```

U 应该仅以第二种方式 ( `//= require bootstrap`) 包含它，它应该可以正常工作。

**编辑**：我只是在使用，`gem 'bootstrap-sass', '~> 2.0.2'`因此我只需要`//= require bootstrap`..如果您还使用其他 gem，您只需要第一行，我可以想象的问题仍然存在。您是否尝试过不使用静态分支？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:42:39.110

阅读：[https ://github.com/seyhunak/twitter-bootstrap-rails/issues/123](https://github.com/seyhunak/twitter-bootstrap-rails/issues/123)

尝试：

1.  从 app/assets/javascript 和 app/assets/stylesheets 中删除引导文件
2.  导轨 g 引导程序：安装
3.  推送到heroku

另外，尝试将 gem 移出资产组

编辑：nvm，没有看到你的答案，你应该批准它；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:40:53.220

在我的情况下，删除 application.css.scss 解决了这个问题（当我试图部署到 heroku 时，我不再遇到错误）但是当我尝试访问我的应用程序时 heroku 说“我们很抱歉，但是发生了一些事情错误的”

最后运行 heroku rake db:migrate 对我来说很好，现在一切正常

# python - 基于 PyQt4 QTableView 模型

> ID：11286394
> 
> 赞同：1
> 
> 时间：2012-07-01T23:25:33.080
> 
> 标签：python, pyqt4, qtableview, qlistview

我正在尝试将 SQLite 数据库中的一些简单信息显示到 QTableView 中。我遵循[了 SO 的一个答案](https://stackoverflow.com/questions/8923562/getting-data-from-selected-item-in-qlistview)，就其本身而言，它正在工作。当我尝试在我的 GUI 中实现相同的代码（只是一个带有 QTableView 对象的简单主窗口）时，它什么也没显示。这是代码：

```
from PyQt4 import QtCore, QtGui
from gui import Ui_MainWindow
from dialog import Ui_Dialog
from PyQt4.QtSql import QSqlQueryModel,QSqlDatabase,QSqlQuery

import sys

class Glavni(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(Glavni, self).__init__()
        self.ui=Ui_MainWindow()
        self.ui.setupUi(self)
        self.show()

        #QtCore.QObject.connect(self.ui.actionRegistar, QtCore.SIGNAL("triggered()"), self.popup)
        db = QSqlDatabase.addDatabase("QSQLITE")
        db.setDatabaseName("baza.db")
        db.open()

        projectModel = QSqlQueryModel()
        projectModel.setQuery("select name from people",db)

        projectView = QtGui.QTableView()
        projectView.setModel(projectModel)
        projectView.show()

    def popup(self):
        dialog = QtGui.QDialog()
        dialog.show()

class Dialog(QtGui.QDialog):
    def __init__(self,parent=None):
        super(Dialog,self).__init__()
        self.ui = Ui_Dialog()
        self.ui.setupUi(self)
        self.show()

def main():
    app = QtGui.QApplication(sys.argv)
    prozor = Glavni()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

我究竟做错了什么？QT Designer 中 QListView 的名称是 lista，如果这是相关的话。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:09:04.383

```
projectView = QtGui.QTableView() #THIS part is wrong if the GUI is designed through Designer
projectView.setModel(projectModel)
projectView.show() 
```

正确的代码与此类似：

```
projectView = self.ui.myList #or some other name, which is the SAME AS that object name in   Designer
projectView.setModel(projectModel)
projectView.show() 
```

它有效；）

# c++ - .rc 文件中的 Windres 错误

> ID：11286404
> 
> 赞同：0
> 
> 时间：2012-07-01T23:27:42.487
> 
> 标签：c++, command-line, mingw

当我尝试使用 windres（MinGW 随附）使用[此处](https://stackoverflow.com/questions/708238/how-do-i-add-an-icon-to-a-mingw-gcc-compiled-executable)的教程编译我的 .rc 文件时，它给了我以下错误（我将“windres my.rc -O coff -o my.res”放入命令行） ：

```
cpp: Too many arguments
windres: my.rc:1: syntax error 
```

my.rc 如下：

```
1 ICON "C:\Users\Owner\Desktop\LonelyPlanet\LonelyPlanetIcon.ico"
2 VERSIONINFO
FILEVERSION     1,0,0,0
PRODUCTVERSION  1,0,0,0
BEGIN
  BLOCK "StringFileInfo"
  BEGIN
    BLOCK "040904E4"
    BEGIN
      VALUE "CompanyName", "Neil Flodin"
      VALUE "FileDescription", "A game I made at iD tech camp!"
      VALUE "FileVersion", "1.0"
      VALUE "InternalName", "Lonely_Planet"
      VALUE "LegalCopyright", "Copyright(c) Neil Flodin All Rights Reserved"
      VALUE "OriginalFilename", "Lonely Planet.exe"
      VALUE "ProductName", "Lonely Planet"
      VALUE "ProductVersion", "1.0"
    END
  END

  BLOCK "VarFileInfo"
  BEGIN
    VALUE "Translation", 0x409, 1252
  END
END 
```

我对我的 rc 文件/命令行输入做些什么奇怪的事情，如果是这样，我怎样才能让 windres 编译它？

-尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-13T13:46:11.753

```
#include <winresrc.h>
IDR_MAINFRAME           ICON                    "main.ico"
VERSIONINFO
...
END 
```

添加资源.h

```
#define IDR_MAINFRAME                   128 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T14:51:32.180

我已经为4 年前从今天起发布的类似问题（[Windres 语法错误）提供了可能的解决方案。](https://stackoverflow.com/questions/8497838/windres-syntax-error/36665553#36665553)

我希望它能有所帮助。关键是您可以尝试以`.rc`相同的方式编译文件，但使用**Cygwin**并获得一个`.o`文件而不是一个文件`.res`，您可以在链接过程中使用该文件。

# jquery - 根据用户输入生成列表项 x 次

> ID：11286407
> 
> 赞同：1
> 
> 时间：2012-07-01T23:28:37.417
> 
> 标签：jquery, forms, dynamic

我有一个基本的无序列表，下面有一个输入字段/表单。我希望用户能够输入他们想要查看的列表项的总数，然后单击，结果会显示出来。这是我的 HTML：

```
<div id="boxes">
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
</div>

<form id="four" action="#">
    <input type="text" placeholder="Type items per page"></input>
    <button>Submit</button>
</form> 
```

还有我的jQuery：

```
$("#four button").on('click', function(){
    var buttonValsss = $("#four input").val();
    var boxes = $("#boxes");
    var generate = "<div class='box1'></div>";

    boxes.html('');
    boxes.append(generate);
    boxes.children().html("<p>" + text + "</p>");
}); 
```

我正在存储来自用户输入的变量（项目数），清除 中的所有列表项`#boxes`，然后在单击时附加一个列表项，从前一个函数的全局变量中设置文本。单击时，我希望变量`generate`被附加*x*次，由变量定义`buttonValsss`

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:35:10.033

尝试使用`for`循环：

```
$("#4 button").on('click', function(){
    var buttonValsss = $("#4 input").val();
    var boxes = $("#boxes");
    boxes.empty(); // you can use empty() method    
    for (i = 0; i < buttonValsss; i++ ) {
        boxes.append('<div class="box1"></div>');
    }
}); 
```

[http://jsfiddle.net/z2Wc3/](http://jsfiddle.net/z2Wc3/)

# jquery - jQuery 幻灯片 - 包括当前/活动幻灯片两侧的上一张和下一张幻灯片的一小部分

> ID：11286408
> 
> 赞同：1
> 
> 时间：2012-07-01T23:28:41.393
> 
> 标签：jquery

我通常使用优秀的“jQuery Cycle Plugin”来满足我的幻灯片需求。

但是，在这种情况下，客户创建了一个设计，我们希望在其中显示上一张幻灯片的一小部分，以及下一张幻灯片的一小部分（在当前/活动幻灯片的两侧）。我已经包含了一个简化的图形来完成大部分的解释。

[我想要的幻灯片设置的简化图形 http://img696.imageshack.us/img696/9916/slidedemo.gif](http://img696.imageshack.us/img696/9916/slidedemo.gif)

我可以处理有关为上一张/下一张幻灯片降低不透明度的 CSS，但我不知道如何编辑 JS / jQuery 代码以启用类似的东西。

Cycle Plugin 有丰富的参数/选项——这里有一个页面展示了水平滑动：

[http://jquery.malsup.com/cycle/scrollhv.html](http://jquery.malsup.com/cycle/scrollhv.html)

但是，它不包括上一张/下一张幻灯片。

我知道完全找到一个不同的幻灯片脚本可能比尝试编辑这个特定的脚本更容易，但我已经通过谷歌搜索浏览了无数脚本，但没有一个是我正在寻找的.

非常感谢任何想法/建议/提示！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T07:49:34.897

这个可以满足您的需要：

[http://coolcarousels.frebsite.nl/c/2/](http://coolcarousels.frebsite.nl/c/2/)

但是，我不太确定它在 iPhone 和旧版 Explorer 中的效果如何。

# cocoa-touch - 数学难倒：根据 UIGestureRecognizer 平移调整 alpha

> ID：11286410
> 
> 赞同：1
> 
> 时间：2012-07-01T23:29:11.233
> 
> 标签：cocoa-touch, uiview, uikit, uigesturerecognizer

我相当肯定这里有一个明显的答案，也许我太累了，看不到它，但这里有：

我有一个`UIPanGestureRecognizer`. 它被连接起来以移动视图。

我在这个视图中有一个子视图，我想`alpha`在平移视图时调整它。

该视图只能水平平移，因此消除了一些数学运算。

`alpha`有问题的子视图以of开头`1.0`。在超视图平移时，我想调整子视图的 alpha 使其按比例越来越低，直到达到最小值`alpha`。`0.3`

我的代码在这一点上并不多，但实际上看起来像这样：

```
- (void) someMethodForRecognizer: (UIGestureRecognizer *) recognizer {
    // do stuff here

    if (recognizer.state == UIGestureRecognizerStateChanged) {
        // do fancy math here
    }

    // do more stuff here
} 
```

**我需要做什么样的花哨数学来计算`alpha`在任何给定时刻应用的正确值`UIGestureRecognizerStateChanged`？**

（假设相关状态相关的 ivars 已设置且可用，并且可以随意添加任何看起来不明显的内容。）

（我真的是个懒惰的白痴，不是吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T00:23:02.577

如果您不介意我提出稍微不同的方法，我会使用 NSTimer ( `+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats`)。

```
- (void) someMethodForRecognizer: (UIGestureRecognizer *) recognizer {
    switch (recognizer.state) {
        case UIGestureRecognizerStateBegan:
            self.panStartTime = CFAbsoluteTimeGetCurrent();
            self.panView = recognizer.view;
            self.timer = [NSTimer scheduledTimerWithTimeInterval:0.1
                                                          target:self
                                                        selector:@selector(panIntervalWithTimer:)
                                                        userInfo:nil
                                                         repeats:YES];
            break;

        case UIGestureRecognizerStateChanged:
            // Your current pan handler
            break;

        default:
            self.panView.alpha = 1.0;
            self.panView = nil;
            self.panStartTime = 0;

            [self.timer invalidate];
            self.timer = nil;
    }
}

- (void)panIntervalWithTimer:(NSTimer *)timer
{
    NSTimeInterval interval = CFAbsoluteTimeGetCurrent() - self.panStartTime;
    CGFloat alpha = 1 - interval; // or some better math
    if (alpha > 0.3) {
        self.panView.alpha = alpha;
    } else {
        self.panView.alpha = 0.3;

        [self.timer invalidate];
        self.timer = nil;
    }
} 
```

**更新了计时器内置的无效功能并修复了一些错误。**

* * *

**用新的想法更新了代码。**

如何在每次回调时将 alpha 降低一定数量。当用户暂停时，alpha 停止减少。如果速率设置为 0.025，则在达到 0.3 之前会进行 28 次更新。如果速率为 0.001，则提供 70 次更新。

```
- (void) someMethodForRecognizer: (UIGestureRecognizer *) recognizer {
    …

    if (recognizer.state == UIGestureRecognizerStateChanged) {
        CGFloat alpha = recognizer.view.alpha - kAlphaDecrementRate;
        recognizer.view.alpha = MAX(alpha, 0.3);
    } else {
        recognizer.view.alpha = 1.0;
    }

    …
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T06:07:51.503

使用该`translationInView:`属性找出您平移了多远。该点的 x 值是您的水平运动。取它的绝对值，并将其作为您想要给出最小 alpha 的任何距离的比例。将此比例乘以 (1 - minAlpha)，从 1.0 中减去它并将子视图的 alpha 设置为此值。

伪代码：

```
CGPoint translation = [gesture translationInView:self];
CGFloat x = fabsf(translation.x);
CGFloat proportion = x / MIN_ALPHA_DISTANCE;
CGFloat alphaDifference = proportion * (1 - MIN_ALPHA);
subview.alpha = 1 - alphaDifference; 
```

# google-apps-script - Google Apps 脚本中的 ScriptDb 配额

> ID：11286412
> 
> 赞同：4
> 
> 时间：2012-07-01T23:29:55.667
> 
> 标签：google-apps-script

关于新的 ScriptDb 服务；来自[常见问题](https://developers.google.com/apps-script/scriptdb#frequently_asked_questions)部分：

> 数据库的配额是多少？目前，50MB 用于消费者帐户，100MB 用于 Google Apps 帐户，200MB 用于 Google Apps for Business/Education/Government 帐户
> 
> 此限制是针对所有数据库中的每个用户的。

以消费者帐户为例，这是否意味着用户拥有的每个数据库都有 50MB 的配额，或者该配额适用于用户的所有数据库组合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:25:37.020

所有数据库合并。至少那是他们在会议结束后告诉我的。

# python - Python 字符串插入

> ID：11286415
> 
> 赞同：0
> 
> 时间：2012-07-01T23:30:36.143
> 
> 标签：python, insertion

我记得知道有一种简单的方法可以在 Python 中很容易地将字符串段插入其他字符串，但我不记得它是如何完成的。例如，假设我正在使用 Python 编辑 HTML，它看起来像这样：

```
<html>
  <b>Hello, World!</b>
  <b>%</b>
</html> 
```

因此，假设此 HTML 代码存储在一个名为 html 的变量中。现在，假设我要操作此代码并输入以下字符串“我的名字是 Bob”，而不是第二个 b 标记中的 %。

如果有人知道我在说什么，请回答，这是我想使用的一个非常酷的功能。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:40:45.480

您可以附加 % 和一组值：

```
name = "Bob"
html = "Hello, %s" % (name) 
```

或者命名占位符并使用字典：

```
html = "Hello, %(name)s" % { name: name } 
```

或使用[str.format()](http://docs.python.org/library/string.html#format-examples)

```
html = "Hello, {0}".format("name") 
```

所有三个结果都是一个字符串`Hello, Bob`。

您也可以像这样使字符串未绑定

```
html = "Hello, %s" 
```

然后在必要时绑定占位符

```
print html
>>> Hello, %s
for name in ["John", "Bob", "Alice"]:
    print html % name
>>> Hello, John
>>> Hello, Bob
>>> Hello, Alice 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T23:42:26.903

```
html='''<html>
  <b>Hello, World!</b>
  <b>%s</b>
</html>''' % "My name is Bob" 
```

这是简单的字符串格式。您还可以使用以下内容（您可以`{variable}`多次使用以将其插入多个位置）：

```
html='''<html>
  <b>Hello, World!</b>
  <b>{variable}</b>
</html>'''.format(variable="My name is Bob") 
```

*或者*，如果要替换其中的每个“％”，可以使用以下内容：

```
html='''<html>
  <b>Hello, World!</b>
  <b>%</b>
</html>'''.replace('%','Hello my name is Bob') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:24:14.700

有一种使用字符串模板的简单方法

有一个示例代码

```
import string

htmlTemplate = string.Template(
"""
<html>
<b>Hello, World!</b>
<b>$variable</b>
</html>
""")

print htmlTemplate.substitute(dict(variable="This is the string template")) 
```

您可以使用 $ 在模板字符串中定义变量

# java - 天气应用：J2me 构造函数

> ID：11286422
> 
> 赞同：1
> 
> 时间：2012-07-01T23:31:36.477
> 
> 标签：java, java-me, midp, lcdui

我正在开发的天气应用程序有问题。构造函数应该创建一个列表，但是当应用程序运行时，它只显示一个空白屏幕。

```
ERROR:
';' expected

no suitable constructor found for List(javax.microedition.lcdui.List)
    constructor javax.microedition.lcdui.List.List(java.lang.String,int,java.lang.String[],javax.microedition.lcdui.Image[]) is not applicable
      (actual and formal argument lists differ in length)
    constructor javax.microedition.lcdui.List.List(java.lang.String,int) is not applicable
      (actual and formal argument lists differ in length) 
```

* * *

//带有构造函数的类

```
public class WeatherMIDlet extends BaseMIDlet implements CommandListener {

private List list3;

private List getWeatherLocationView(List list3) {

        if (weatherConditionSearch == null) {
            weatherConditionSearch = new WeatherConditionSearch(this, list3);
        }
        return weatherConditionSearch; //list should dislay here!
    } 
```

//我想创建本地引用列表的类

```
public class WeatherConditionSearch extends List implements CommandListener {

    private Command okCmd, backCmd;
    private TextField locationTfld;
    private BaseMIDlet midlet;
        private List list;

    public WeatherConditionSearch(BaseMIDlet midlet, List list3) //super class is List
{
        super(list3);//error is at this line
        this.midlet = midlet;
        lists();
        addCommand(okCmd);
        addCommand(backCmd);
        setCommandListener(this);
    }

    private void lists() {
            okCmd = new Command("Get", Command.OK, 0);
            backCmd = new Command("Back", Command.BACK, 1);
                if (list == null) {                                 
            list = new List("Cities", Choice.IMPLICIT);                                    
            list.append("Kampala", null);
            list.append("Entebbe", null);
            list.append("Mubende", null);
            list.setCommandListener(this);
            list.setSelectedFlags(new boolean[]{false, false, false});                                  
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:16:54.990

WeatherConditionSearch 的超类是 List。

您在调用时尝试调用 List 构造函数`super(list3)`，但`javax.microedition.lcdui.List.List`没有接受 List 的构造函数，请参阅[API 文档](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/lcdui/List.html)。

根据您的描述，您宁愿调用`List(String title, int listType, String[] stringElements, Image[] imageElements)`构造函数，将城市名称列表传递给它。

[[JavaDocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/index.html)应该是您开发 Java 应用程序时的第一站，不，是您的*零站。*总是从那里开始。]

# html - CSS 属性旁边的星号是什么意思？

> ID：11286427
> 
> 赞同：6
> 
> 时间：2012-07-01T23:33:29.347
> 
> 标签：html, css

> **可能重复：**
> [星号在 CSS 属性名称中有何作用？](https://stackoverflow.com/questions/4563651/what-does-an-asterisk-do-in-a-css-property-name)

我试图弄清楚这个 CSS 文件中“vertical-align: middle”属性旁边的星号 (*) 是什么意思：

```
button, input, select, textarea { 
  font-family: sans-serif; 
  font-size: 100%; 
  margin: 0; 
  vertical-align: baseline; 
  *vertical-align: middle; 
} 
```

另外，为什么“垂直对齐”会重复两次，星号值与第一次不同？

我知道类名旁边的含义，但我从未在属性旁边看到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T23:36:14.483

这是一个CSS hack。只有 IE7 及以下版本才能识别它。

我不建议使用它。相反，根据所使用的 IE 版本，使用 IE 条件注释为 BODY 标签呈现不同的类名。

当我不得不处理旧版本的 IE 时，我会使用类似这样的方法：

[http://nicolasgallagher.com/better-conditional-classnames-for-hack-free-css/](http://nicolasgallagher.com/better-conditional-classnames-for-hack-free-css/)

# python - 使用 scipy.stats.hypergeom 从 SciPy 中的牌组中绘制卡片

> ID：11286430
> 
> 赞同：5
> 
> 时间：2012-07-01T23:34:29.417
> 
> 标签：python, scipy, probability

我无法理解SciPy函数[的文档。](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.hypergeom.html)`scipy.stats.hypergeom`在我的程序中，我考虑了各种牌组，并尝试找出各种平局的概率。该`hypergeom`课程似乎正好有这个，但它的文档假设了一堆我没有的术语知识。谷歌搜索将我带到 Wikipedia 和 Wolfram MathWorld，两者都假设如果你问这种事情，你已经阅读了从 dang *Principia Mathematica*向前的所有内容，只需要一点复习 - 所以它们实际上并没有帮助. 因为这个问题是“我如何将这个特定的代码块应用到我的问题上？” 我在问堆栈溢出。

我有一个形式的问题“如果你有一副*N*牌，其中*M是感兴趣的牌，那么在前**Q*牌中至少有 1 张感兴趣的牌的几率是多少？” 我也有一个形式的问题“如果你有一副*N*牌，其中*M*是感兴趣的牌，你必须从牌组中抽多少张牌才能有 90% 的机会其中一张是感兴趣的卡片？” 前一个问题与 SciPy 文档中给出的示例问题非常接近，但它不是一回事，而且方法列表对我来说都是行话——我实际上无法说出其中哪一个是我需要的。我也无法确定使用哪种方法来解决后一种问题。

的方法`scipy.stats.hypergeom`实际上做了什么，它们的论点是什么，我如何将它们应用于我的问题？假设我是一个中等聪明的高中生，而不是数学博士生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:57:44.507

```
scipy.stats.hypergeom.pmf(k, M, n, N) 
```

返回概率：从M张牌中，有n张被标记，如果你随机选择N张没有放回的牌，正好有k张牌被标记。

所以你可以得到你想要的答案（使用你的变量名）

```
def pick_Q(N, M, Q):
    """
    Given a deck of N cards, where M are marked,
    and Q cards are taken randomly without replacement,
    return the probability that at least one marked card is taken.
    """
    return sum(scipy.stats.hypergeom.pmf(k, N, M, Q) for k in xrange(1,Q+1)) 
```

（标记1张牌，标记2张牌，标记3张牌......标记N张牌的几率总和）。

幸运的是，有一种更快的方法 - 至少一张标记的牌被拿走的概率是没有标记的牌被挑选的概率的另一面。所以你可以做

```
def pick_Q(N, M, Q):
    """
    Given a deck of N cards, where M are marked,
    and Q cards are taken randomly without replacement,
    return the probability that at least one marked card is taken.
    """
    return 1\. - scipy.stats.hypergeom.pmf(0, N, M, Q) 
```

对于您的第二个问题，似乎没有任何功能可以满足您的需求；但是，您可以从

```
def how_many_to_pick(N, M, prob):
    """
    Given a deck of N cards, M of which are marked,
    how many do you have to pick randomly without replacement
    to have at least prob probability of picking at least one marked card?
    """
    for q in xrange(1, M+1):
        if pick_Q(N, M, q) >= prob:
            return q
    raise ValueError("Could not find a value for q") 
```

**编辑：**

```
scipy.stats.hypergeom.cdf(k, M, n, N) 
```

给定一副 M 牌，其中 n 被标记，随机挑选 N 张，不放回，找出选出*k 或更少*标记的牌的几率。（您可以将其视为 .pmf 的积分）

那么 .sf(k, M, n, N) 是 .cdf 的反面——*超过 k 个*标记的牌被选中的几率。

例如，

```
 k      pmf(k,52,13,4)   cdf(k,52,13,4)   sf(k,52,13,4)
     (exactly k picked)  ( <= k picked)   ( > k picked)
---  -----------------  ---------------  --------------
 0       0.303817527      0.303817527      0.696182473
 1       0.438847539      0.742665066      0.257334934
 2       0.213493397      0.956158463      0.043841537
 3       0.041200480      0.997358944      0.002641056
 4       0.002641056      1.000000000      0.000000000 
```

**编辑2：**

实际上，这提供了另一种编写 pick_Q 函数的方法——“挑选 1 张或更多标记的卡片”可以改写为“挑选超过 0 张标记的卡片”，所以

```
def pick_Q(N, M, Q):
    """
    Given a deck of N cards, where M are marked,
    and Q cards are taken randomly without replacement,
    return the probability that at least one marked card is taken.
    """
    return scipy.stats.hypergeom.sf(0, N, M, Q) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T02:55:34.310

值得注意的是，这不是一个不使用就很难解决的问题`scipy`。假设我们有 10 个项目的随机排列：

```
4, 7, 2, 3, 0, 9, 1, 5, 6, 8 
```

还有一组“赢家” `2, 4, 6`。由于我们只关心赢家和输家，我们可以稍微简化一下表示：

```
1, 0, 1, 0, 0, 0, 0, 0, 1, 0 
```

我们可以对任何一组 10 个可能的项目和 3 个获胜者做同样的事情；并且给定这 10 个项目的任何可能排列，我们可以执行相同的简化。所以真正发生的是每个排列“选择” 3 个获胜指数，而牌组中获胜者的可能排列数量是[10 选择 3](http://en.wikipedia.org/wiki/Combination)，或者`10! / (3! * 7!)`。

现在我们需要知道的是，有多少可能的获胜者安排在第一`Q`张牌中至少给了我们一个获胜者。由于更容易计算有多少安排在第一张牌中给了我们*零*`Q`赢家，所以我们将计算它。所以我们想要的，用最具体的术语来说，是看起来像这样的序列的数量（对于 Q = 4）：

```
0, 0, 0, 0 | 0, 1, 0, 1, 1, 0 
```

在这里，我们已经对序列进行了分区，分区之前的值应该始终为零。有多少这样的序列？嗯，这样的序列与包含 6 张牌中 3 位获胜者的序列一样多。所以这是 6 选择 3，即`6! / (3! * 3!)`。

因此，要获得在 10 个值的随机排列中，前三个不包含获胜者的几率，我们只需计算以下内容：

```
(6 choose 3) / (10 choose 3) 
```

为了获得相反的赔率（即前三个中至少一个包含获胜者的赔率），我们这样做：

```
1 - (6 choose 3) / (10 choose 3) 
```

`total`用= `N`、`winners`=`M`和`tries`=概括`Q`：

```
1 - ((N - Q) chose M) / (N chose M) 
```

在 python 中，它看起来像这样：

```
>>> def choose(n, x):
...     return reduce(mul, range(n, n - x, -1)) / math.factorial(x)
...
>>> def ntries_win_odds(total, winners, tries):
...     inv = (choose(total - tries, winners) / float(choose(total, winners)))
...     return 1 - inv 
```

反方向求解并不难——我们只需要一个“逆向选择”函数来求解`c = n choose x`给`n`定的`c`和`x`。我觉得这里有算法改进的空间，但这有效：

```
>>> def choose_x_pseudoinverse(target, x):
...     for n in itertools.count(start=x):
...         if choose(n, x) >= target:
...             return n 
```

现在，解决尝试：

```
odds = 1 - ((total - tries) chose winners) / (total chose winners)
(1 - odds) * (total choose winners) = ((total - tries) chose winners)
choose_x_inv((1 - odds) * (total choose winners), winners) = total - tries
tries = total - choose_x_inv((1 - odds) & (total choose winners), winners) 
```

在 Python 中，这是

```
def ntries_from_odds(odds, total, winners):
    inv_odds = 1 - odds
    tCw = choose(total, winners)
    return total - choose_x_pseudoinverse(inv_odds * tCw, winners) 
```

# c++ - C++ - 基类的面向对象数组

> ID：11286432
> 
> 赞同：0
> 
> 时间：2012-07-01T23:34:41.060
> 
> 标签：c++, arrays, oop, opengl

> **可能重复：**
> [学习 C++：多态性和切片](https://stackoverflow.com/questions/4403726/learning-c-polymorphism-and-slicing)
> [用子类对象初始化的多态基类对象数组](https://stackoverflow.com/questions/7203590/array-of-polymorphic-base-class-objects-initialized-with-child-class-objects)

我已将面向对象的类集成到我的 OpenGL 应用程序中。基类有一个调用的函数`Tick`，应该在每个刻度（很明显）调用一个表示增量时间的参数。这是它的样子（没有与这个问题无关的东西）。

标题：

```
class Object
{
public:
    virtual void Tick(float DeltaTime);
}
class Controller : public Object
{
public:
    virtual void Tick(float DeltaTime);
} 
```

然后我有一个名为的类`Engine`，其中包含主循环、初始化和处置（将其与窗口创建分开）。
在那个类中，我需要跟踪游戏中的所有对象，所以我创建了一个数组：
`Object* Objects = new Object[10]; // for now max 10 objects`

然后调用我遍历数组的刻度函数：

```
for (unsigned int c = 0; c < 10; c++)
    Objects[c].Tick(delta); 
```

在`delta`循环之前计算。

问题是，如果我将数组中的一个对象分配给`Controller`（例如）调用的 Tick 函数始终是实际存储的类中的对象，`Object`而不是实际存储的类中的对象。

我什至尝试过类型转换（每个类都有一个字符串来标识它的类型），但无济于事。

我很确定答案是显而易见的（就像我最后一个问题的答案），但我找不到答案。

感谢您的时间。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:39:18.970

您遇到了[切片问题](http://en.wikipedia.org/wiki/Object_slicing)。

解决方案是不要将多态对象按值存储在数组中；改用（智能）指针。

# django-admin - django-admin.py startapp myproject 不创建 settings.py

> ID：11286433
> 
> 赞同：0
> 
> 时间：2012-07-01T23:34:56.270
> 
> 标签：django-admin, python-2.7, django-1.3

我有 Python2.7 和 Django 1.3.1，在 windows 7 32bit 上运行

当我输入“python django-admin.py startapp myproject”时，创建的文件夹如下所示：

mysite/ **init** .py models.py tests.py views.py

代替

mysite/ **init** .py manage.py settings.py urls.py

现在我必须输入 'python django-admin.py startapp myproject' 而不仅仅是 'django-admin.py startapp myproject' 的原因是因为 .py 文件没有与 python 正确关联，所以在这个线程中提出了一个解决方案： [django-admin.py 无法正常工作](https://stackoverflow.com/questions/3123688/django-admin-py-is-not-working-properly)

我试过了，但由于某种原因我可以得到正确的关联。我还确保 django-admin.py 应该通过属性使用 python.exe 文件打开。最后，django-admin.py 和 python.exe 都被添加到计算机 -> 属性> 高级 -> 环境变量中配置的系统路径中。

所以这里有点想法...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T11:35:27.400

1`django-admin.py startproject myproject`
创建一个项目和像`init.py`, `manage.py`, `settings.py`,这样的文件`urls.py`
2`python manage.py startapp appname`
在我的项目中创建一个应用程序和像`init.py`, `models.py`, `tests.py`,这样的文件`views.py`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-01T23:48:49.377

你想要`startproject`而不是`startapp`.

[在https://docs.djangoproject.com/en/dev/ref/django-admin/#startproject-projectname-destination](https://docs.djangoproject.com/en/dev/ref/django-admin/#startproject-projectname-destination)查看文档

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-21T08:02:25.367

> django-admin.py 启动项目 myproject

创建一个项目和文件，如

*   **__init__.py** *使用文件作为全局模块*
*   **manage.py** *用于管理项目，如 Syncdb、migrate、startserver*
*   **settings.py** *包含项目设置*
*   **urls.py** *包含项目的 URL，可以包含应用的 url 文件*

> python manage.py startapp appname

在我的项目和文件中创建一个应用程序

*   **__init__.py** *使用文件作为全局模块*
*   **models.py** *你可以在这里写你的模型类*
*   **tests.py** *编写测试用例*
*   **views.py** *应用 URL*

# android - 看不到安卓 2.3.3

> ID：11286434
> 
> 赞同：2
> 
> 时间：2012-07-01T23:34:59.473
> 
> 标签：android, eclipse, google-api

我正在尝试启动一个与 Android 2.3.3 (API 10) 兼容的应用程序。出于某种原因，在 Eclipse 上，我看到的唯一选项是 2.1 (API 7)。我已经在 SDK 中安装了涉及 2.3.3 的每个包，除了 DroidRAZR，因为当我尝试下载时连接不断重置。

为什么我无法将 2.3.3 视为启动项目的选项？

# java - 连接到外部 SQLite 数据库

> ID：11286437
> 
> 赞同：1
> 
> 时间：2012-07-01T23:35:43.163
> 
> 标签：java, android, web-services, sqlite

所以我正在做这个项目，我必须将一个 IOS 应用程序翻译成一个 Android 应用程序。一切都很好，直到我来到这里。原始应用程序使用位于此处的数据库更新内部数据库：“http://somelocation/dbHandler.axd?SqliteDbVersion=0”，每次版本更改时，应用程序都必须下载新版本。我的问题是，无论如何我可以在 Java 上做到这一点。我对android有点陌生，而且我以前从未使用过网络服务（我做了一些调查，发现网络服务是这样做的方法，但我不知道从哪里开始）。

感谢您的建议！

# java - Java编程--->未来[输入。长度 ]

> ID：11286439
> 
> 赞同：1
> 
> 时间：2012-07-01T23:36:17.757
> 
> 标签：java, warnings, future

这是我的代码的一小部分。我在第 4 行收到警告，即这一行：

```
Future<String>[] results = new Future[inputs.length]; // Stores the results 
```

警告基本上是`[inputs.length]`由于我无法执行 for 循环的部分。警告是：

> 此行有多个标记 - 类型安全：类型的表达式`Future[]`需要未经检查的转换才能符合`Future<String>[]`- 类型安全：类型的表达式`Future[]`需要未经检查的转换才能符合`Future<String>[]`

您能否建议一种我不必更改 for 循环但可以从第 4 行删除警告的方法？

```
public StringBuilder fieldAggregator(String... inputs)
    throws InterruptedException, ExecutionException {
      StringBuilder sb = new StringBuilder();
      Future<String>[] results = new Future[inputs.length]; // Stores the results
      for (int i = 0; i < inputs.length; i++) { // Submits the tasks to thread pool
        results[i] = pool.submit(new ValidateInput<String>(inputs[i], pool));
      }
      for (int i = 0; i < inputs.length; i++) { // Aggregates the results
        sb.append(results[i].get());
      }
    return sb;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T00:01:44.637

不存在具有泛型类型参数的数组。请改用集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:43:50.140

数组是应该知道存储数据的**精确**类型以确保运行时类型安全的对象。存储的泛型类型`<SomeType>`在运行时被删除，因此 JVM 无法检查您是否真的试图放置`Future`存储的元素，`<SomeType>`或者`<SomeOtherType>`它可能被威胁为危险行为，这就是您收到警告的原因。

如果您绝对确定数组中的数据是正确的，请尝试使用`@SuppressWarnings("unchecked")`注释来抑制该警告，例如

```
@SuppressWarnings("unchecked")
Future<String>[] results = new Future[inputs.length]; 
```

但我建议使用一些集合，`ArrayList<Future<String>>`而不是带有泛型的数组。

# jquery - jqGrid如何支持文件上传？

> ID：11286441
> 
> 赞同：1
> 
> 时间：2012-07-01T23:36:33.240
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, file-upload, jqgrid

我的网络应用程序基于 ASP.net MVC3 并使用 jqGrid。我坚持支持 jqGrid 所需的文件上传功能。

Web 应用程序使用流程允许用户在他们的系统上选择一个文件，并将其从 jqGrid 添加/编辑表单上传到数据库记录。用于文件上传的 jqGrid colModel 的编辑类型设置为`edittype:'file'`. 在添加/编辑表单中，我可以查看“浏览...”按钮来选择图像。jqGrid 文档建议使用 Ajax 文件上传插件进行文件上传。我找到了两个同名的插件并尝试了两个。

1.  [来自PHPLetter](http://www.phpletter.com/Demo/AjaxFileUpload-Demo)的 Ajax 文件上传插件：此插件适用于 jqGrid，但仅适用于旧版本的 jQuery。由于在文件上传插件中使用了 HandleError 未记录的 API，该功能从 jQuery 1.5 开始被破坏。

2.  [来自Valums](http://valums.com/ajax-upload)的Ajax 文件上传插件。我已经能够从 jqGrid 外部成功使用这个插件。我用于文件上传的脚本（在我的网格之外）如下：

    ```
    var uploader = new qq.FileUploader({
           element: fileUploader,
           action: @Url.Action("UploadProductImage"), 
           allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], )}; 
    ```

但是，我还没有想出将这个插件集成到 jqgrid 添加/编辑表单中的方法。如何初始化我的上传脚本并调用它？

我不能使用基于 Flash/HTML5 的文件上传解决方案（例如 Uploadify），因为我的应用程序需要使用 IE 7 和 8。我感谢任何提示/建议。

谢谢，

罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:37:24.933

对我有用的解决方案是编写我自己的非常短的 HandleError 函数，并且仍然使用[jqgrid 中描述的 Ajax 文件上传插件 - 在添加/编辑对话框中上传文件](https://stackoverflow.com/questions/7550304/jqgrid-upload-a-file-in-add-edit-dialog)。所以我使用该解决方案，但我添加了以下功能：

```
jQuery.extend({
    handleError: function( s, xhr, status, e ) {
        // If a local callback was specified, fire it
        if ( s.error )
            s.error( xhr, status, e );
        // If we have some XML response text (e.g. from an AJAX call) then log it in the console
        else if(xhr.responseText)
            console.log(xhr.responseText);
    }    
}); 
```

我在这里找到了功能：http: [//www.johnmain.co.uk/blog/2012/06/14/jquery-handleerror-is-not-a-function-issues/](http://www.johnmain.co.uk/blog/2012/06/14/jquery-handleerror-is-not-a-function-issues/)

还要注意一件事：我不得不换行

```
dataType: 'json', 
```

至

```
dataType: 'JSON', 
```

为了从[jqgrid 获取代码 - 在 Firefox 中工作的添加/编辑对话框中上传文件](https://stackoverflow.com/questions/7550304/jqgrid-upload-a-file-in-add-edit-dialog)（在其他浏览器中这应该不是问题）。

# java - Android Java：SQLite 上的光标在模拟器和某些设备上运行缓慢

> ID：11286442
> 
> 赞同：0
> 
> 时间：2012-07-01T23:37:19.110
> 
> 标签：java, android, performance, cursor, emulation

几周前我发布了一个应用程序，我的许多用户都在抱怨应用程序的速度太慢。当我测试我的应用程序时，我使用的是平板电脑，它运行良好，没有任何问题。

现在我在 Android 2.2 上的模拟器上测试了该应用程序，发现该应用程序在从我的 SQLite 数据库加载一些数据时非常慢。我发现 Cursor.moveToFirst() 方法非常慢，并迫使模拟器冻结大约 1 分钟。这可能是我的用户在打开此活动时告诉我强制关闭或加载时应用程序很慢的原因：|

我最多加载 700 列，每列只有一个值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:48:16.687

默认情况下，查询在 UI 线程上执行。听起来您正在查询大量信息（价值 700 列），并且这会在很长一段时间内阻塞 UI 线程。您应该使用 a`CursorLoader`或 an异步执行查询，`AsyncTask`这样您就不会阻塞 UI 线程（就像 UI 线程被阻塞 4-5 秒一样，应用程序将强制关闭并出现“应用程序无响应”错误）。

# javascript - JS - 在 TextField 输入中检查 http://

> ID：11286443
> 
> 赞同：2
> 
> 时间：2012-07-01T23:37:25.690
> 
> 标签：javascript, regex, url, uitextfield, titanium

我正在使用 Appcelerator 的 Titanium IDE 用 Ja​​vaScript 编写我的应用程序。我一直在研究这个并试用 Regex 大约两个小时。无论如何，我的问题是：

我有一个网址栏。如果用户以“www.”开始输入。我希望它在它前面添加'http://'，如果它们以'http://'开头，它就不会添加它。而且，如果没有“www”。或者，它会添加完整的“http://www.”。

解决这个问题的一种实用方法可能是使用正则表达式（我以前从未使用过，没有任何经验）或查看前两个字母是“ht”还是“ww”，如果那不匹配，那么它只会添加“http://www”。

我刚刚在上面发布的是我认为一个人会做的事情，而且我很可能听起来完全疯了，因为这没有任何意义。我并不是真的要求写出整个代码。我可以添加各种东西，我只是在寻找一些可能对我能够插入和使用/修改有用的代码/输入。

谢谢！

编辑：很好的回应！我敢肯定，如果不是全部都有效，所以我尽了最大努力并投了赞成票:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:49:36.630

正则表达式对于这种字符串操作来说太复杂了。试试这个：

```
<input onchange="testUrl(this)">

<script>
function testUrl(el){
    if(el.value.indexOf('http://') == 0){
        if(!el.value.indexOf('http://www.')){
            el.value = 'http://' + el.value.substr(6);
        }
     } else {
        el.value = 'http://www.' + el.value.substr(6);
     }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T23:54:57.483

这是另一个解决方案：

```
var appendHttpToUrl = function(url){
    var httpwww = "http://www.";
    var rx = /(^http:\/\/|^www\.)/g;
    if(url.indexOf(httpwww) === -1){
      if(url.indexOf("http://") > -1 || url.indexOf("www.") > -1){
        url = url.replace(rx,httpwww);
      }else{
        url = httpwww+url;
      }
    }
    return url;
} 
```

这是一个演示[http://jsfiddle.net/TJn7A/5/](http://jsfiddle.net/TJn7A/5/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T23:50:56.610

```
if(url.match(/^http:\/\/$/)
  // do stuff for when they start with http://

if(url.match(/^www\./))
  // do stuff for when they start with www

if(!url.match(/(www?\.?|htt?p?:?\/?\/?)/))
  // do stuff for a matching ww or ht... 
```

打破它...

*   `^`是模式的开始
*   `$`是模式的结束
*   `(...|...)`是左边还是右边
*   `\/`并`\.`在必要时转义特殊字符`\`
*   `?`使前一个字符可选

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T00:00:24.170

我刚刚破解了这个。是的，它很丑，但它也可以处理 https :)

```
function fixURL(input){
    var r = input.match(/^(https?:\/\/)?(www\.)?(.*)$/);
    return ((r[1] ? r[1] : 'http://') + (r[2]?r[2]:'')  + r[3]);
}
var input="example.com/test";
alert(fixURL(input)); 
```

如果您发现此功能失败的情况。请修复它;-)

# ios - 按下按钮时如何插入sqlite？

> ID：11286445
> 
> 赞同：0
> 
> 时间：2012-07-01T23:38:04.213
> 
> 标签：ios, xcode, sqlite, insert

我正在尝试使用Objective-C（最新的xcode）将字符串插入sqlite数据库，但是由于某些奇怪的原因，我在stackoverflow或互联网上找到的每个示例通常似乎对我不起作用。

我没有使用任何 sdk，所以它是简单的目标 c。

有没有人有一个实际工作的示例代码并将数据插入可以检索的数据库中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:05:22.763

```
sqlite3 *database;    

if(sqlite3_open(___database file path__, &database) == SQLITE_OK)
{
    NSString  * str = [[NSString alloc] initWithFormat:@"INSERT INTO %@ VALUES %@",___table name___,___value___];
    const char * sqlStatement = [str UTF8String];
}
else 
{
    //ERROR
    return;
}

sqlite3_stmt *compiledStatement;

if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK)
{
    while(sqlite3_step(compiledStatement) == SQLITE_ROW)
    {
        for (int i = 0;; i++)
        {
            char * ch;
            if ((ch = (char *)sqlite3_column_text(compiledStatement, i)))
            {
                NSString * ret = [NSString stringWithCString:ch encoding:NSUTF8StringEncoding];
            }
            else 
            {
                break;
            }
        }
    }
}

sqlite3_finalize(compiledStatement);
sqlite3_close(database); 
```

这段代码像这样在表中插入值..

# javascript - 浏览器刷新不做垃圾回收

> ID：11286451
> 
> 赞同：11
> 
> 时间：2012-07-01T23:39:08.633
> 
> 标签：javascript, dom, memory-leaks, webgl, page-refresh

我在所有经过测试的浏览器上都发现了这一点——Windows 上的 IE、Firefox、Chrome 和 Safari，以及 Apple 上的 Safari。

据称，浏览器刷新、后退按钮或前进链接应该转储浏览器节点和 javascript 变量和对象等。这似乎不适用于 WebGL。我在开发需要大约 100MB 到 200MB 内存的复杂 WebGL 应用程序时首先注意到它。在开发过程中，我必须进行大量刷新，并且我的计算机会在 5-10 次刷新后开始变慢并死机。

经过一番研究，我意识到这不应该。内存泄漏的公认解决方案是刷新**应该**释放所有 javascript 对象和变量以及 dom 节点的页面。但是看看下面的图片：

那么这里有什么问题呢？在小型应用程序上没有注意到，但对于像我这样的大型 WebGL 应用程序 (orbitingeden.com)，这是一个真正的问题，我的用户会认为该软件比实际情况更需要资源。下图显示这些刷新吞噬了我所有的可用内存，因此垃圾收集不起作用和/或 JS 和 DOM 对象没有被释放：

[![在此处输入图像描述](../Images/f2f02e2365bbbd9c71ae70c2ec54bb4b.png)](https://i.stack.imgur.com/IB9KT.png)
[（来源：[orbitingeden.com](http://orbitingeden.com/images/big_memory_after.png)）]

有人知道强制浏览器进行真正的内存转储的技巧吗？为什么那里的所有文档都是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:56:42.457

垃圾收集的要点之一是对象未被使用时*不会*立即清理。垃圾收集器可以自己确定何时最方便进行收集。

只要有足够的内存可以使用，垃圾收集系统将一些未使用的对象留在堆中是正常的。计算机不会因为有大量未使用的内存而运行得更快。

# android - ListView 选择行

> ID：11286457
> 
> 赞同：1
> 
> 时间：2012-07-01T23:40:26.363
> 
> 标签：android, android-listview, android-arrayadapter

我有一个 ArrayAdapter：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)LayoutInflater.from(context);
            v = vi.inflate(R.layout.consumerlist_row, null);
        }

        SharedClass.GenericItem item = SharedClass.consumerList.get(position); 

        if (item != null) {

            final GenericItem fitem = item; 
            v.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    int id = ID = ((ExtEditText)v.findViewById(R.id.dayreadout_entry)).getIdentifyingNumber();
                    if(prevID!=ID){
                        if(!((ExtEditText)v.findViewById(R.id.dayreadout_entry)).isSelected()
                            &&!((ExtEditText)v.findViewById(R.id.nightreadout_entry)).isSelected()){

                            if(fitem.GetIdAddress()==ID){  
//Set unique identificator of 
                                ((ExtEditText)v.findViewById(R.id.dayreadout_entry)).setChosen(true);
                                TransitionDrawable drawable = (TransitionDrawable) v.getBackground();                                                                   
                                drawable.startTransition(animSpeed);
                            }

                            if(prevID!=-1){
                                CloseEditMode();                                    
                                LeaveRow(prevRow, prevID);                                      
                            }
                            prevRow = v;
                            prevID=ID;                              
                        }
                    }
                }
            });
 SetColorToRow( v, item);       
        return v;
} 
```

离开行：

```
private void LeaveRow(View row, int id){    
    int ids = ((ExtEditText)row.findViewById(R.id.dayreadout_entry)).getIdentifyingNumber();
    if(id==ids){
    SharedClass.GenericItem item = GetItemByID(id);
    ((ExtEditText)row.findViewById(R.id.dayreadout_entry)).setChosen(false);                

            TransitionDrawable tDrawable = (TransitionDrawable)row.getBackground();                             
            tDrawable.reverseTransition(animSpeed); 
}

} 
```

SetColorToRow：

```
private void SetColorToRow(View v, GenericItem item){

    boolean ids = ((ExtEditText)v.findViewById(R.id.dayreadout_entry)).isChosen();

    String day = String.valueOf(item.GetDay()); 
    String night = String.valueOf(item.GetNight());
    String skipped = String.valueOf(item.GetSkipped());

    if(day.equals("-9999999")&&night.equals("-9999999")&&!skipped.equals("0")){
        if(ids){
            TransitionDrawable td = (TransitionDrawable) v.getBackground();
            td.startTransition(animSpeed);
        }
        else
            v.setBackgroundResource(R.drawable.listviewitem_yellow_blue);           
    }
    else if(day.equals("-9999999")&&night.equals("-9999999")&&skipped.equals("0")){
        if(ids){
            TransitionDrawable td = (TransitionDrawable) v.getBackground();
            td.startTransition(animSpeed);
        }
        else
            v.setBackgroundResource(R.drawable.listviewitem_white_blue);                        
    }
    else {
        if(ids) {
            TransitionDrawable td = (TransitionDrawable) v.getBackground();
            td.startTransition(animSpeed);
        }
        else
            v.setBackgroundResource(R.drawable.listviewitem_green_blue);                        
    }

 } 
```

问题是当我选择一行（该行变为蓝色）并向下移动列表（当该行消失时）它选择其他行。似乎它复制了行的状态并将其放在下面的列表中。

```
 --------REAL SELECTED ROW--------

 ---------------------------------
 |                               |
 |                               |
 |                               |
 |          LIST VIEW            |
 |                               |
 |                               |
 |                               |
 |-----WRONG SELECTED ROW--------|
 |                               |
 --------------------------------- 
```

我究竟做错了什么？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:49:51.737

我发现向适配器添加了一个字段来解决这个问题：

```
 private int selectedIndex;
    public void setSelectedIndex(int index){
          this.selectedIndex = index;
    }
    //Your activity or controller can access this index at any time. 
    public int getSelectedIndex(){return selectedIndex;} 
```

在公共视图 getView(int position, View convertView, ViewGroup parent)

```
 if(selectedIndex == position){
          convertView.setBackground(R.id.some_resource_selectable);
    }else{
     //set background null
           convertView.setBackground(null);
    } 
```

然后在我的列表视图上的项目单击侦听器

```
 onItemClick (AdapterView<?> parent, View view, int position, long id){
            adapter.setSelectedIndex(position);
            adapter.notifyDataSetChanged();
      } 
```

希望这可以帮助

# iphone - NSXMLParser 启动后立即停止

> ID：11286461
> 
> 赞同：0
> 
> 时间：2012-07-01T23:41:50.863
> 
> 标签：iphone, objective-c, xcode, rest, nsxmlparser

我正在练习 RESTKit，所以我正在构建一个 Dribbble 客户端来掌握 REST，我成功获得了 XML 响应，但是当我使用 NSXMLParser 解析它时，它记录开始，然后立即停止，我该如何修复它，或者只是让 XML 更容易区分哪个项目是哪个项目，然后将其放入我的表中？

继承人的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    NSLog(@"I just found a start tag for %@",elementName);

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    NSLog(@"the parser just found this text in a tag:%@",string);
}

-(void)parserDidStartDocument:(NSXMLParser *)parser {
    NSLog(@"starting");
}

-(void)parserDidEndDocument:(NSXMLParser *)parser {
    NSLog(@"end");
}

-(IBAction)test {
    [[RKClient sharedClient] get:@"/shots/popular" delegate:self];
}

-(void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response {
    if ([request isGET]) {

        NSLog(@"Retrieved XML: %@", [response bodyAsString]);
        NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:[response body]];
        [xmlParser setDelegate:self];
        [xmlParser parse];
    }
    else if ([request isPOST]) {

        if ([response isJSON]) {

            NSLog(@"Got a JSON response back from our POST!");
        }

    }
    else if ([request isDELETE]) {

        if ([response isNotFound]) {
            NSLog(@"The resource path '%@' was not found.", [request resourcePath]);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:01:39.970

您从解析器得到的错误是[`NSXMLParserEmptyDocumentError`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSXMLParserEmptyDocumentError). 似乎您没有从服务器获得预期的响应；这不是解析器的问题。

您应该检查连接或响应是否发生错误，并且结果实际上是一个 XML 文档。

# android - SharedPreferences 不断擦除

> ID：11286462
> 
> 赞同：0
> 
> 时间：2012-07-01T23:41:51.003
> 
> 标签：android

我编写了一个应用程序，不断删除我的共同偏好。我一直认为，当您使用 SharedPreferences 时，它们会一直存在，直到您卸载应用程序或以编程方式清除首选项（我可能是错的）。发生的事情是我在一个文件中有一个 sharedpreference 的字符串值。然后在单独的文件中调用该值，该文件运行 if 语句并将图像视图设置为特定图形（如果已存储该变量）。它似乎运行良好，一切正常，直到我关闭应用程序并在手机设置中杀死它或使用“高级任务杀手”应用程序。我以相同的方式使用共享首选项对其他应用程序进行了编程（不使用 if 语句），我似乎没有这个问题，所以这让我觉得 if 语句有问题。从逻辑上讲，我无法弄清楚出了什么问题。任何帮助深表感谢。文件一代码：

```
public void onCreate(Bundle savedInstanceState)
      {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.guessaquaman);

final Button guessbutton = (Button) findViewById(R.id.guess_button);
            guessbutton.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {

                    guess=(EditText)findViewById(R.id.guess_edittext);

                    String myguess = guess.getText().toString();
                    String correctanswer = "aquaman";
                    if( myguess.equals( correctanswer ) ){
                        Toast.makeText(getApplicationContext(), "Correct", Toast.LENGTH_SHORT).show();

                        SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
                        SharedPreferences.Editor editor = sharedPreferences.edit();
                        editor.putString("aquamanticked", "on");
                        editor.commit();

                        Intent myintent1 = new Intent(AquamanGuess.this,PlayActivity.class);
                        startActivity(myintent1);
                        guessbutton.setEnabled(false);
                    }
                }
            }); 
```

第二个文件：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.play);

    SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    String aquamanticker = sharedPreferences.getString("aquamanticked", "");
    String aman= "on";

    ImageView aquaman = (ImageView) findViewById(R.id.aquaman);
    aquaman.setImageResource(R.drawable.aquaman_small_empty);

    if (aquamanticker == aman ){
    aquaman.setImageResource(R.drawable.aquaman_small_filled); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:53:40.963

第二个文件中的那一行看起来很糟糕！

```
if (aquamanticker == aman ){ 
```

试试这种方式：

```
if (aquamanticker.equalsIgnoreCase(aman) ){ 
```

原因：

您正在比较两个`String`被调用的对象`aquamanticker`，而`aman`不是比较`String`变量所包含的内容。

# javascript - 从 JSON 中获取元素属性名称

> ID：11286467
> 
> 赞同：0
> 
> 时间：2012-07-01T23:43:05.350
> 
> 标签：javascript, jquery, json

我正在尝试编写一个适用于包含任意属性的 JSON 数组的通用函数。鉴于以下情况：

```
var propMap = '{"ddColor": "Color","ddSize": "Size", "ddOther": "Other"}' 
```

如何在不指定任何一个的情况下遍历属性及其值？换句话说，我想在不指定“ddColor”、“ddSize”或“ddOther”的情况下迭代元素。然而，我想迭代名称和它的值。

我已经到处寻找解决方案，但找不到，也无法使其在 jsFiddle 上运行：

```
var propMap = '{"ddColor": "Color","ddSize": "Size"}'

for(var x in propMap) {
    // Key: x
    // Value: propMap[x]
    alert(x + ': ' + propMap[x]);
} 
```

当我运行上面的代码时，它似乎逐个字符地迭代。例子：

```
1: C
2: o
3: l
4: o
5: r 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:45:56.317

只需使用一个[`for in`循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)：

```
for (var x in propMap) {
    if (propMap.[hasOwnProperty](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)(x)) {
        // Key: x
        // Value: propMap[x]
    }
}
```

如果这实际上是一个字符串，那么您当然需要先解析 JSON：

```
propMap = jQuery.[parseJSON](https://api.jquery.com/jQuery.parseJSON/)(propMap);
```

[这也是一个 jsFiddle。](http://jsfiddle.net/minitech/Nkd4h/)

# android - Android - RecognizerIntent 搜索联系人

> ID：11286469
> 
> 赞同：1
> 
> 时间：2012-07-01T23:43:14.210
> 
> 标签：android, speech-recognition

我正在尝试构建可以帮助我拨打联系人的应用程序，就像 Google Voice 搜索一样，但是通过使用 Google Voice 通过 RecognizerIntent 使用捷克语。

什么问题，它似乎没有浏览我的联系人列表。

假设联系人姓名是“Rebro”[或任何不属于字典的内容“例如施瓦辛格等]

无论选择哪种语言，或者如果我使用英语发音或捷克语发音名称，调用 data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); 时它永远不会进入结果集中。

这甚至有可能吗？如果是，我该如何实现？非常感谢提前

编辑：添加代码...这是我在网上某处找到的代码

```
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView; 

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends Activity implements OnClickListener {

private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

private ListView mList;

/**
 * Called with the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button speakButton = (Button) findViewById(R.id.button1);
    mList = (ListView) findViewById(R.id.listView1);

    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    if (activities.size() != 0) {
        speakButton.setOnClickListener(this);
    } else {
        speakButton.setEnabled(false);
        speakButton.setText("Recognizer not present");
    }
}

/**
 * Handle the click on the start recognition button.
 */
public void onClick(View v) {
    if (v.getId() == R.id.button1) {
        startVoiceRecognitionActivity();
    }
}

/**
 * Fire an intent to start the speech recognition activity.
 */
private void startVoiceRecognitionActivity() {
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
   // intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech recognition demo");
    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);

}

/**
 * Handle the results from the recognition activity.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
        // Fill the list view with the strings the recognizer thought it could have heard
        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);

        mList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
                matches));
    }

    super.onActivityResult(requestCode, resultCode, data);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:15:55.710

我认为 Google Voice Search 不会（也不能）通过 公开其所有功能`RecognizerIntent`，即它只会执行一般语音转录，而不支持语音命令（`call ...`, `text ...`）或了解您的通讯录内容。遗憾的是，`RecognizerIntent`API 不允许您指定语法或允许的单词列表。

解决方案是忽略 Google 的语音识别器并实现您自己的。看看例如[Pocketsphinx](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)。您需要有捷克声学模型，除非您想以英语方式发音名称（您可以使用 CMU Sphinx 附带的英语声学模型）。

我已经为爱沙尼亚语实现了一个基于 Pocketsphinx 的开源联系人搜索应用程序，请参阅[Inimesed](http://kaljurand.github.com/Inimesed/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T11:13:34.463

SpeechRecongizer 是不可能的，因为它只允许大城市名称而不是任何名称。它由谷歌来相应地增强它。但你可以看到其他图书馆[的pocketphinx](http://cmusphinx.sourceforge.net/wiki/tutorialandroid)

# java - 在 Jetty LdapLoginModule 中指定 LDAP 组搜索属性

> ID：11286471
> 
> 赞同：0
> 
> 时间：2012-07-01T23:43:22.233
> 
> 标签：java, ldap, jetty, jaas

使用 JAAS 时，有没有办法指定角色（组）搜索查询返回的属性？

返回的组在属性中包含大约 100k 个条目，这些条目`uniqueMember`使应用服务器和 OpenLDAP 之间的链接饱和。由于查询只需要该`cn`属性，我想告诉容器仅在执行搜索时请求该属性。

目前，查询没有设置任何要返回的属性，它返回所有属性。

DEV（码头）`java.security.auth.login.config`看起来像这样

```
devldap {
   org.eclipse.jetty.plus.jaas.spi.LdapLoginModule required
   debug="true"
   contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
   hostname="ldap-dev.example.com"
   port="389"
   bindDn="cn=Manager,dc=example,dc=com"
   bindPassword="xxxx"
   authenticationMethod="simple"
   forceBindingLogin="true"
   userBaseDn="ou=users,dc=example,dc=com"
   userRdnAttribute="uid"
   userIdAttribute="uid"
   userPasswordAttribute="userPassword"
   userObjectClass="inetOrgPerson"
   roleBaseDn="ou=groups,dc=example,dc=com"
   roleNameAttribute="cn"
   roleMemberAttribute="uniqueMember"
   roleObjectClass="groupOfUniqueNames";
   }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T00:41:40.500

那里有严重错误。它根本不应该返回组条目属性，只返回 CN。

这看起来像是[org.eclipse.jetty.plus.jaas.spi.LdapLoginModule中的一个](http://www.jarvana.com/jarvana/view/org/eclipse/jetty/aggregate/jetty-all/7.1.0.RC0/jetty-all-7.1.0.RC0-sources.jar!/org/eclipse/jetty/plus/jaas/spi/LdapLoginModule.java?format=ok)*主要*错误。它应该将 的属性设置为in 。您需要报告它，和/或自己修补它。`returningAttributes``SearchControl``new String[]{_roleNameAttribute}``getUserRolesByDn()`

如果您使用的是 OpenLDAP，则可以考虑使用`memberOf`覆盖。这为用户自己提供了一个属性，列出了他所属的所有组。但是它不是回顾性的，并且由于您显然已经拥有一个大目录，因此您将有一项工作可以从现有组中填充它。覆盖将在安装后自动维护，但仅适用于安装后发生的组更新。

# rspec - 匹配字符串值的 Rspec 失败/错误

> ID：11286472
> 
> 赞同：1
> 
> 时间：2012-07-01T23:43:35.987
> 
> 标签：rspec

我试图弄清楚为什么我的 rspec 测试在匹配字符串值时失败。进行类似匹配的其他测试是成功的。

我得到以下失败的结果：

> 1）类#method应该得到字符串
> 
> > ```
> > Failure/Error: class.method.should == "LD 513"
> >  expected: "LD 513"
> >  got: "LD 513" (using ==) 
> > ```

如果我将结果输出到屏幕上，我会看到它显示了变量的值和变量类型，所以我的假设是一切都应该通过。

> 变量：“LD 513”——字符串

知道为什么这个测试失败了吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:51:39.677

I found the problem. It was a character encoding issue. Essentially a hidden character was in between the letters and numbers. Once I normalized the string, the test passed.

# asp.net-mvc - ASP.Net LINQ 批量向表中插入记录

> ID：11286477
> 
> 赞同：0
> 
> 时间：2012-07-01T23:44:17.030
> 
> 标签：asp.net-mvc, linq-to-sql

我有一个绑定到以下视图模型的 ASP.Net MVC 表单。该表格允许一个提交插入一个新的员工记录以及他的所有电话号码和约会类型。使用 LINQ to SQL 的控制器 [HttpPost] 操作可以对与 People(aka Staff) 表关联的表执行单条记录插入，**但 EContactInfo 和 AppointmentType 表除外**。_StaffSerivce.Add() 只是在数据存储库中执行该实体的 InsertOnSubmit()。添加完所有新记录后，将在执行数据存储库的 SubmitChanges() 的地方调用 _Service.Save()。那时我收到一条错误消息“**无法使用已在使用的密钥添加实体**“。错误是在插入第一个电话号码或约会类型时，在相应表中插入第一条记录后，这些表的主键没有更改。如何将多条记录批量插入一个表中？谢谢。

```
public class RequestForAppointmentViewModel
{
    public People Staff { get; set; }   /* Person to be appointed or employeed */
    public Appointment Appointment { get; set; }
    public ContactAddress PostAddress { get; set; }

    //public IList<EContactInfo> ContactMethods { get; set; }
    public string WorkPhone { get; set; }
    public string HomePhone { get; set; }
    public string CellPhone { get; set; }
    public string Pager { get; set; }
    public string EmailAddress { get; set; }

    //public IList<AppointmentType> AppointmentTypes { get; set; }
    public bool ChiefResident { get; set; }
    public bool CompPen { get; set; }
    public bool Consultant { get; set; }
    public bool ContractAppointmentType { get; set; }
    public bool FeeBasis { get; set; }
    public bool Locum { get; set; }
    public bool SpecialFellow { get; set; }
    public bool StaffAppointmentType { get; set; }
    public bool StaffFullTime { get; set; }
    public bool StaffIntermittent { get; set; }
    public bool StaffPartTime { get; set; }
    public bool StaffPermanent { get; set; }
    public bool StaffTemporary { get; set; }
    public bool WOC { get; set; }

    public Contract Contract { get; set; }
    public ContractingCompany ContractingCompany { get; set; } /* person is via contracting company */
} 
```

回发操作具有以下内容

```
 [HttpPost]
    public ActionResult CreateRequestForAppointment(RequestForAppointmentViewModel requestForm)
    {
        bool success = false;
        string alpha = string.Empty;

        if (!ModelState.IsValid)
            return View("RequestForAppointment", requestForm);
        else
        {
            try
            {
                People thisPerson = new People();
                if (TryUpdateModel<People>(thisPerson, "Staff")) //prefixed
                {
                    #region persist People
                    _staffService.Add(thisPerson);
                    alpha = thisPerson.LName.Substring(0, 1);
                    #endregion persist People

                    #region persist Appointment
                    Appointment thisAppointment = new Appointment();
                    if (TryUpdateModel<Appointment>(thisAppointment, "Appointment"))
                    {
                        thisAppointment.People = thisPerson;
                        _staffService.Add(thisAppointment);
                    }
                    #endregion persist Appointment

                    #region persist ContactAddress
                    ContactAddress thisAddress = new ContactAddress();
                    if (TryUpdateModel<ContactAddress>(thisAddress, "PostAddress"))
                    {
                        thisAddress.People = thisPerson;
                        thisAddress.Country = _staffService.ListCountries().SingleOrDefault(c => c.CountryName.Equals("USA"));
                        _staffService.Add(thisAddress);
                    }
                    #endregion persist ContactAddress

                    #region persist Contract Company
                    ContractingCompany thisCompany = new ContractingCompany();
                    if (TryUpdateModel<ContractingCompany>(thisCompany, "ContractingCompany"))
                    {
                        _staffService.Add(thisCompany);
                    }
                    #endregion persist Contract Company

                    #region persist Contract
                    Contract thisContract = new Contract();
                    if (TryUpdateModel<Contract>(thisContract, "Contract"))
                    {
                        thisContract.Appointment = thisAppointment;
                        thisContract.ContractingCompany = thisCompany;
                        _staffService.Add(thisContract);
                    }
                    #endregion Persist Contract

                    #region persist EContactInfo
                    if (!string.IsNullOrWhiteSpace(requestForm.WorkPhone))
                    {
                        EContactInfo WorkPhone = new EContactInfo();
                        WorkPhone.People = thisPerson;
                        WorkPhone.CodeReference = _staffService.ListMessagingMethods().SingleOrDefault(m => m.Description.Equals("Work Phone"));
                        WorkPhone.ContactDetail = requestForm.WorkPhone;
                        _staffService.Add(WorkPhone);
                    }

                    if (!string.IsNullOrWhiteSpace(requestForm.HomePhone))
                    {
                        EContactInfo HomePhone = new EContactInfo();
                        HomePhone.People = thisPerson;
                        HomePhone.CodeReference = _staffService.ListMessagingMethods().SingleOrDefault(m => m.Description.Equals("Home Phone"));
                        HomePhone.ContactDetail = requestForm.HomePhone;
                        _staffService.Add(HomePhone);
                    }

                    //others phones are omitted for abbreviation
                    #endregion persist EContactInfo

                    #region persist AppointmentType
                    if (requestForm.ChiefResident.Equals(true))
                    {
                        AppointmentType ChiefResident = new AppointmentType();
                        ChiefResident.Appointment = thisAppointment;
                        ChiefResident.CodeReference = _staffService.ListAppointmentTypes().SingleOrDefault(t => t.Description.Equals("Chief Resident (CRES)"));
                        _staffService.Add(ChiefResident);
                    }
                    if (requestForm.CompPen.Equals(true))
                    {
                        AppointmentType CompPen = new AppointmentType();
                        CompPen.Appointment = thisAppointment;
                        CompPen.CodeReference = _staffService.ListAppointmentTypes().SingleOrDefault(t => t.Description.Equals("Comp & Pen (C&P)"));
                        _staffService.Add(CompPen);
                    }
                   //Other types omitted for abbreviation
                    #endregion persist AppointmentType

                _staffService.Save();

                    success = true;
                }
            } 
```

存储库方法如下。

```
 public class ClinicalPrivilegeRepository : IClinicalPrivilegesRespository
{
    private DB db = new DB();

    #region EContactIfo

    public IQueryable<EContactInfo> GetEContactInfoByPersonId(int id)
    {
      var eContactInfos = (from e in db.EContactInfos
                          select e).Where(e => e.FK_People.Equals(id));
      return eContactInfos;
    }

    public EContactInfo GetEcontactInfoById(int id)
    {
      var eContactInfo = (from e in db.EContactInfos
                          select e).SingleOrDefault(e => e.PKey.Equals(id));
      return eContactInfo;
    }

    public void Add(EContactInfo newEContactInfo)
    {
      db.EContactInfos.InsertOnSubmit(newEContactInfo);
    }

    public void Delete(EContactInfo thisEContactInfo)
    {
      db.EContactInfos.DeleteOnSubmit(thisEContactInfo);
    }

    #endregion EContactIfo

#region StaffAppointmentType

    public IQueryable<AppointmentType> ListStaffAppointmentTypes(int appointmentId)
    {
        IQueryable<AppointmentType> appointmentTypes = (db.AppointmentTypes.Where(t => t.FK_Appointment.Equals(appointmentId)).Select(t => t));
        return appointmentTypes;
    }

    public AppointmentType GetStaffAppointmentType(int appointmentId, int appointmentTypeId)
    {
        var appointmentType = (from t in ListStaffAppointmentTypes(appointmentId)
                                   select t).SingleOrDefault(x=>x.FK_AppointmentType.Equals(appointmentTypeId));
        return appointmentType;
    }

    public void Add(AppointmentType newAppointmentType)
    {
        db.AppointmentTypes.InsertOnSubmit(newAppointmentType);
    }

    public void Delete(AppointmentType thisAppointmentType)
    {
        db.AppointmentTypes.DeleteOnSubmit(thisAppointmentType);
    }

    #endregion StaffAppointmentType

public void Save()
    {
        //throw new NotImplementedException();
        db.SubmitChanges();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:22:15.047

代码大部分是正确的。真正的问题出在 DBML 的 EContactInfo 和 AppointmentType 表中，我忘记将主键的标识设置为 true。

# mongodb - mongodb 文档属性

> ID：11286478
> 
> 赞同：0
> 
> 时间：2012-07-01T23:44:30.613
> 
> 标签：mongodb, select, findall

我正在使用 mongodb 2.0.5 版本。尝试从 c# 连接 mongodb。将数据插入到 monogdb 工作正常。

但我想从 mongodb 检索数据并显示给用户。问题是文档属性没有进入智能感知。下面是我的代码：

```
namespace mongoTest
{
    public class dbsDani
    {
        public ObjectId Id { get; set; }
        public string Emp_name { get; set; }
    }
    class Program
    {

        static void Main(string[] args)
        {

            #region connectionTried

            MongoServer server;
            String con = "mongodb://192.168.71.241/?safe=true";
            server = MongoServer.Create(con);
            server.Connect();
            if (server.State == MongoServerState.Connected)
            {
                //server.Connect();
                Console.WriteLine("Success");
                //MongoCredentials credentials = new MongoCredentials("danny", "levay");
                var dbseName = server.GetDatabase("danny");
                var collectionName = dbseName.GetCollection<dbsDani>("dani");
                var emp = new dbsDani { Emp_name = "Jack" };
                collectionName.Insert(emp);
                var id = emp.Id;

    var display = collectionName.FindAll().documents(); //FindAll().Documents is not coming
                foreach (var document in display)
                {
                    Console.WriteLine(document["Emp_name"]);
                    Console.ReadLine();
                }
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T00:08:12.373

我不确定您要做什么，但我将您的问题行更改为：

```
 var display = collectionName.FindAll(); 
```

我现在可以通过

```
 foreach (var document in display)
        {
            Console.WriteLine(document.Id);
            Console.WriteLine(document.Emp_name);
        } 
```

我回来了：

```
4ff0e528594bc07645d8bb6b
Jack 
```

# python - 推荐使用多个 AWS 账户管理凭证的方法？

> ID：11286479
> 
> 赞同：34
> 
> 时间：2012-07-01T23:44:47.600
> 
> 标签：python, amazon-web-services, boto

通过 管理多个 Amazon Web Services (AWS) 帐户的最佳方式是什么`boto`？

我熟悉我正在使用的[BotoConfig](http://docs.pythonboto.org/en/latest/boto_config_tut.html)文件。但是每个文件只描述一个帐户……而且我与不止一个组织合作。出于所有通常的法律、财务和安全原因，这些帐户不能混合。

目前我`boto`每个帐户使用一个配置文件。例如：

*   `~/.boto`默认账户
*   `~/.boto_clowncollege`对于“小丑学院”帐户
*   `~/.boto_razorassoc`对于“razorassoc”帐户
*   `~/.boto_xyz`对于“xyz”帐户

然后是这样的：

```
def boto_config_path(account=None):
    """
    Given an account name, return the path to the corresponding boto
    configuration file. If no account given, return the default config file.
    """
    path = '~/.boto' + ('_' + account if account else '')
    clean_path = os.path.abspath(os.path.expanduser(path))
    if os.path.isfile(clean_path):
        return clean_path
    else:
        errmsg = "cannot find boto config file {} for {}".format(clean_path, account)
        raise ValueError(errmsg)

def aws_credentials(account=None):
    """
    Return a tuple of AWS credentials (access key id and secret access key) for
    the given account.
    """
    try:
        cfg = INIConfig(open(boto_config_path(account)))
        return ( cfg.Credentials.aws_access_key_id, cfg.Credentials.aws_secret_access_key )
    except Exception:
        raise

conn = EC2Connection(*aws_credentials('razorassoc')) 
```

好，坏，还是冷漠？建议的改进？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-01-25T01:48:47.977

**更新于 2015 年 2 月 6 日，在 2015 年 3 月 19 日通过以下顶部部分**更正****

 **# boto 和 AWSCLI 凭证的新标准化共享 (boto>==2.29.0)

从 boto 2.29 开始，有一种新的简单方法可以共享 BOTO 和 AWS CLI 凭证，如 Mike Garnaat 在[A New and Standardized Way to Manage Credentials in the AWS SDKs 中所述](http://blogs.aws.amazon.com/security/post/Tx3D6U6WSFGOK2H/A-New-and-Standardized-Way-to-Manage-Credentials-in-the-AWS-SDKs)

目的是：

1.  允许通过 boto、AWSCLI 和可能的其他 SDK 共享凭证
2.  将所有配置保存在单个文件中，位于用户配置文件目录中
3.  允许使用命名配置文件
4.  尽可能简单（例如防止与其他方法发生冲突）

## 创建凭据文件

创建文件`~/.aws/credentials`(Mac/Linux) 或`%USERPROFILE%\.aws\credentials`(Windwos)，如下所示：

```
[default]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr
region = eu-west-1

[jekyl]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr
region = eu-west-1

[hyde]
aws_access_key_id = AxxxZ
aws_secret_access_key = CxxxZ
region = eu-west-1 
```

从现在开始，您可以使用如下代码：

### 使用默认配置文件

```
import boto
con = boto.connect_s3() 
```

### 使用`AWS_PROFILE`env 设置的显式配置文件。变量

（这是我最喜欢的选项，将配置文件名称保留在代码之外，并且仍然让我的应用程序的部署者有机会选择特定的配置文件）

```
$ export AWS_PROFILE=jekyl 
```

并使您的代码像以前一样简单：

```
import boto
con = boto.connect_s3() 
```

### 在代码中指定显式配置文件

```
import boto
con = boto.connect_s3(profile_name="jekyl") 
```

**这就是您通常需要做的所有事情**

[boto issue #2292](https://github.com/boto/boto/pull/2292)中描述了选择正确凭据的逻辑，如下所示：

> 加载顺序从高到低优先级：
> 
> 1.直接从代码传递
> 
> 2.  密钥/秘密的环境变量
>     
>     
> 3.  配置文件的环境变量
>     
>     
> 4.  共享凭证文件显式配置文件
>     
>     
> 5.  共享凭证文件默认配置文件
>     
>     
> 6.  配置文件显式配置文件
>     
>     
> 7.  配置文件凭据部分
>     
>     
> 
> 从代码传递的配置文件会覆盖环境变量中的任何集合。

为了使事情保持干净和简单，最好摆脱旧方法，因此删除任何旧样式文件（如`~/.aws/config`or `~/.boto`），取消设置环境变量（`BOTO_CONFIG`如果已设置），还可能还有此类变量指向的文件。

**这就是 boto >=2.29.0 的全部内容**

注意：不要试图通过 env.variable（如`AWS_CONFIG_FILE`）控制配置文件的位置，它不会按预期工作。

# 使用 boto 配置文件 (boto>=2.24.0)

**以下描述仅适用于无法升级到 boto 2.29.0 或更高版本的用户**

自 boto 2.24.0 以来，有一个名为`profile_name`

在您的`~/.boto`文件中，您已经有 [Credentials] 部分，这将作为后备选项，然后 [profile ] 部分用于不同的配置文件：

```
[Credentials]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr

[profile jekyl]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr

[profile hyde]
aws_access_key_id = AxxxZ
aws_secret_access_key = CxxxZ 
```

然后，在创建连接时，您使用这种方式：

```
import boto
con = boto.connect_s3(profile_name="jekyl") 
```

请注意，此功能自 boto 2.24.0 起可用。

教程在这里[http://docs.pythonboto.org/en/latest/boto_config_tut.html?highlight=profile](http://docs.pythonboto.org/en/latest/boto_config_tut.html?highlight=profile)

甚至还有一些关于使用钥匙圈的注意事项，但我会先习惯这个配置文件的东西，这是我几年前梦寐以求的。

## 与 AWSCLI 共享配置文件

AWSCLI 成为了非常棒的工具。由于配置文件的格式几乎相同，我使用它的方式如下：

1.  保留`~/.aws/config`由 AWSCLI 创建的文件（这是默认位置）
2.  复制部分`[default]`并将其重命名为`[Credentials]`（内部保留相同的值）。
3.  添加我使用的任何配置文件
4.  设置`BOTO_CONFIG`变量指向这个`~/.aws/config`文件。

然后`~/.boto`将变为具有以下内容的 `~/.aws/config：

```
[default]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr

[Credentials]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr

[profile jekyl]
aws_access_key_id = AxxxA
aws_secret_access_key = Zxxxr

[profile hyde]
aws_access_key_id = AxxxZ
aws_secret_access_key = CxxxZ 
```

通过这种方式，它可以为 AWSCLI 和 boto 共享，包括配置文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-02T13:02:35.563

将来，boto 将提供更好的工具来帮助您管理多个凭据，但目前，有几个环境变量可能会有所帮助。

首先，您可以将 BOTO_CONFIG 设置为指向您要使用的 boto 配置文件，它将覆盖在正常位置找到的任何配置文件。

其次，您可以将 BOTO_PATH 设置为以冒号分隔的位置列表以查找 boto 配置文件，它会在正常搜索位置之前先在那里搜索。

这些都没有给你你想要的东西，但它可以用更少的代码更容易地完成。

如果您对如何在 boto 中工作有任何想法，请告诉我！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-24T00:22:02.240

与其创建一堆单独的 boto 配置文件，不如考虑使用 ConfigParser 模块并在 .boto 文件中为您的每个帐户创建一个部分。

您的 .boto 文件可能看起来像这样

```
#Contents of ~/.boto
[clown-college]
aws_access_key_id = 123sesamestreet
aws_secret_access_key = 678idsaf567ujd
[razor-assoc]
aws_access_key_id = 437piedmont
aws_secret_access_key = 997567ujdfs 
```

在您的 python 代码中，使用 ConfigParser 为您希望使用的帐户加载适当的访问密钥。

```
import ConfigParser
from os.path import expanduser

########## BEGIN MAIN ##############

# get the path to the user's homedir
user_home = expanduser("~")

#load their .boto config file
config = ConfigParser.ConfigParser()
config.read([str(user_home + "/.boto")])

#get the keypair for ClownCollege
print config.get('clown-college', 'aws_access_key_id')
print config.get('clown-college', 'aws_secret_access_key')

print config.get('razor-assoc', 'aws_access_key_id')
print config.get('razor-assoc', 'aws_secret_access_key') 
```

这可以包装在一个函数中，以便在您的 boto 代码中使用，以轻松设置正确的帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T18:32:28.403

从 boto >= 2.38 开始，似乎所有以前的解决方案都会引起巨大的头痛和问题。

今天在多个基于 BSD 的平台上对此进行了广泛测试后，**现在**管理 AWSCLI 和 py-boto 的不同配置文件身份验证的最有效方法似乎是使用`aws configure`交互式脚本。在没有配置文件的情况下调用它，它将为 .aws/config 和 .aws/credentials 文件填写一个 [default] 块，此外，它还将配置使 boto 与您的 aws 工具集一起工作所需的任何其他魔法（虽然目前还不清楚它在你的本地主机上投射了什么十六进制）。使用任何配置文件名称再次调用它，它将创建一个适当的条目。

请注意，这仍然不适用于 boto < 2.3 的版本。

```
aws configure --profile somename
AWS Access Key ID [None]: XXXXXXXXXXXXXXXXXXXX
AWS Secret Access Key [None]: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Default region name [None]: us-east-1
Default output format [None]: json 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-26T22:11:20.333

请注意，根据[http://boto.cloudhackers.com/en/latest/boto_config_tut.html](http://boto.cloudhackers.com/en/latest/boto_config_tut.html) - 当使用**connect_cloudwatch()**用于 boto 版本 2.48.0 时，我实际上需要提供

**cloudwatch_region_endpoint**

**或者，当从 EC2 中的实例本身**推送数据时（当实例位于与其推送到的不同区域时），连接仍将使用与当前实例相同的区域。

```
cat .boto
[Boto]
cloudwatch_region_name = us-west-2
cloudwatch_region_endpoint = monitoring.us-west-2.amazonaws.com 
```

我尝试将其添加到 .aws/credentials 配置文件中，但它似乎不起作用。

```
cat .aws/credentials 
[cloudwatch_centralized_reporting]
region = us-west-2
aws_access_key_id = XXX
aws_secret_access_key = XXX 
```**

# ruby-on-rails - PGError：运算符不存在：字符变化= bigint

> ID：11286481
> 
> 赞同：0
> 
> 时间：2012-07-01T23:45:32.010
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku, twitter

我正在尝试与 Twitter API 交互以在我的网站上显示 user_timeline。

我跟随 railscasts.com 视频进行 Twitter 集成：[http ://railscasts.com/episodes/359-twitter-integration](http://railscasts.com/episodes/359-twitter-integration)

我可以很好地与 API 交互，将信息拉入我的应用程序，它正在显示并在开发中工作。

我的代码如下：

模型 - 时间线.rb

```
class Timeline < ActiveRecord::Base
  attr_accessible :content, :screen_name, :tweet_id

  def self.pull_tweets
   Twitter.user_timeline("{username_goes_here}", since_id: maximum(:tweet_id)).each do |tweet|
    unless exists?(tweet_id: tweet.id)
      create!(
        tweet_id: tweet.id,
        content: tweet.text,
        screen_name: tweet.user.screen_name,
      )
    end
  end
end
end 
```

这是迁移：

```
class CreateTimelines < ActiveRecord::Migration
  def change
    create_table :timelines do |t|
     t.string :tweet_id
     t.string :screen_name
     t.text :content

     t.timestamps
end 
```

结束结束

并显示推文：

```
<div id="timeline">
      <% Timeline.order("tweet_id desc").limit(3).each do |timeline| %>
         <h3><%= timeline.content %></h3>

        <p class="pull-right">
            ~ @<%= timeline.screen_name %>
        </p>
      <% end %>
    </div> 
```

这个想法是将推文存储在数据库中，这样即使 Twitter 关闭，也不会影响看到最新推文的用户。

无论如何，当我`Timeline.pull_tweets`在控制台中运行命令时，它工作正常。

当我推送到 heroku、迁移数据库并尝试运行相同的命令时。

然后我得到这个错误：

```
 PGError: ERROR:  operator does not exist: character varying = bigint
LINE 1: ...ne FROM "timelines"  WHERE "timelines"."tweet_id" = 21919081...
                                                         ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

有什么帮助吗？

我也尝试运行迁移，以便它`:tweet_id`是一个整数，但我在 heroku 上也遇到了另一个错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T00:25:26.180

您已创建`tweet_id`为字符串（`varchar(255)`PostgreSQL 中的又名）：

```
create_table :timelines do |t|
  t.string :tweet_id 
```

但是你的`tweet.id`：

```
unless exists?(tweet_id: tweet.id) 
```

实际上是一个数字。如果您想继续将您的存储`tweet_id`为字符串，那么您必须在`id`使用它的任何地方将其转换为字符串：

```
unless exists?(tweet_id: tweet.id.to_s)
  create!(
    tweet_id: tweet.id.to_s,
    ... 
```

如果您想修复您的生产表以使用整数`tweet_id`而不是当前字符串，您有几个选择：

1.  删除并使用正确的架构重新创建表。这可以正常工作，但您将丢失所有数据。
2.  手动发出[ALTER TABLE 以便您可以使用 USING](https://stackoverflow.com/a/11276990/479863)告诉 PostgreSQL 如何将您的字符串转换为整数。

一旦你弄清楚了，如果你打算部署到 Heroku，你应该在本地安装 PostgreSQL 并在 PostgreSQL 之上开发。

# php - PHP中的分层RBAC实现？

> ID：11286482
> 
> 赞同：1
> 
> 时间：2012-07-01T23:45:45.340
> 
> 标签：php, acl, rbac

你有什么建议？我检查了 NIST RBAC PHP API 0.65，但它似乎不支持层次结构。

本质上，我希望用户拥有子用户，而子用户将拥有角色并且只能访问其父级可以访问的内容。这似乎非常适合分层 RBAC 方案。

谢谢，

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:37:01.943

我知道这条路很冷，但是突然出现了一个新项目：

PHP-RBAC 是 PHP Hierarchical NIST Level 2 标准基于角色的访问控制，非常成熟。它也是一个 OWASP 项目。

我希望你喜欢它在[http://phprbac.net](http://phprbac.net)

在此之前没有分层的 RBAC 标准实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:18:45.587

您会考虑使用包含 RBAC 的框架吗？（具有层次结构）。首先，如果您没有，并且您还没有选择框架，那么我强烈建议您退后一步，研究并选择这样的框架。我认为从头开始开发基于 PHP 的应用程序没有什么意义。即使是非常小的和面向目标的应用程序也可以使用框架的某些部分。

我使用[Yii 框架](http://www.yiiframework.com/)。这是一个非常轻巧、功能强大且以性能为导向的框架，几乎适合您需要的任何工作，尤其是因为它非常轻巧（所有东西都是延迟加载的，所以如果只使用它的选定组件/功能，它的性能足迹是可能没有感觉）。Yii 有一个很好的内置 RBAC 实现，可以满足您的层次结构要求。我建议你看看它。[这是](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control)Yii 官方指南的相关部分，关于 RBAC 和访问控制。

# c++ - 提升程序选项选择

> ID：11286485
> 
> 赞同：5
> 
> 时间：2012-07-01T23:46:27.283
> 
> 标签：c++, boost-program-options, command-line-arguments

有没有一种简单的方法来检查选项的参数是否在一组预定义的选项中？这里的“简单”意味着不定义临时类。

假设我有一个`--myoption`必须具有价值的选项`"myvalue1"`或`"myvalue2"`

例如，在 python[中使用 optparse 中的选择选项非常容易](http://docs.python.org/library/optparse.html#optparse.Option.choices)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T17:08:06.607

正如我刚刚意识到的那样，您可以定义两个相互排斥的选项，只需定义一个小函数，如[real.cpp](http://www.boost.org/doc/libs/1_55_0/libs/program_options/example/real.cpp)中所述。例如，您可以指定两个冲突的选项来定义一个`conflicting_options()`函数：

```
void conflicting_options(const boost::program_options::variables_map & vm,
                         const std::string & opt1, const std::string & opt2)
{
    if (vm.count(opt1) && !vm[opt1].defaulted() &&
        vm.count(opt2) && !vm[opt2].defaulted())
    {
        throw std::logic_error(std::string("Conflicting options '") +
                               opt1 + "' and '" + opt2 + "'.");
    }
} 
```

然后打电话

```
conflicting_options (vm, "quiet", "verbose"); 
```

紧接着`boost::program_options::store()`

检查`--myoption`等于`myvalue1`或`myvalue2`然后只是一个函数调用的问题。

我仍然不明白是否可以定义两个互斥的位置选项，但这应该是另一个问题。

# java - Google Oauth2 - 调用令牌

> ID：11286490
> 
> 赞同：0
> 
> 时间：2012-07-01T23:47:47.110
> 
> 标签：java, google-app-engine, jsp, oauth-2.0

我正在阅读 Google API，它说：

“第一步是根据已知的用户 ID 调用 loadCredential(String) 来检查最终用户的凭据是否已知。如果不是，请调用 newAuthorizationUrl() 并将最终用户的浏览器定向到授权页面。网络然后浏览器将使用“code”查询参数重定向到重定向 URL，然后可以使用 newTokenRequest(String) 请求访问令牌。最后，使用 createAndStoreCredential(TokenResponse, String) 存储并获取访问受保护资源的凭据。”

所以我将这行代码放在我的代码中，即使使用正确的导入语句它也会失败。“类型不匹配：无法从 Credential 转换为 AuthorizationCodeRequestUrl”

```
AuthorizationCodeRequestUrl bob2 = AuthorizationCodeFlow.loadCredential("test"); or
GoogleAuthorizationCodeFlow bob2 = AuthorizationCodeFlow.loadCredential("test"); 
```

[http://javadoc.google-oauth-java-client.googlecode.com/hg/1.7.0-beta/com/google/api/client/auth/oauth2/AuthorizationCodeFlow.html?is-external=true#loadCredential% 28java.lang.String%29](http://javadoc.google-oauth-java-client.googlecode.com/hg/1.7.0-beta/com/google/api/client/auth/oauth2/AuthorizationCodeFlow.html?is-external=true#loadCredential%28java.lang.String%29)

此外，如果有人对 Google 的 Oauth2 实现有任何好的示例，请发布它们。我能找到的唯一一个我能理解的（见下面的链接）似乎已经贬值了，我想使用最新版本。 [https://developers.google.com/google-apps/tasks/oauth-authorization-callback-handler](https://developers.google.com/google-apps/tasks/oauth-authorization-callback-handler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:04:16.100

s这是我使用的代码。这不是一个完整的例子，但它应该给某人一个想法。

```
UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();
   // response.getWriter().println(" User " + user);
    if (user == null) {
        response.sendRedirect(userService.createLoginURL(getFullRequestUrl(request)));

        return;
      } 
```

然后无论如何我都会得到授权码。（错误的编码。）

```
response.sendRedirect(new GoogleAuthorizationRequestUrl(oauthProperties2.getClientId(), OAuthCodeCallbackHandlerServlet.getOAuthCodeCallbackHandlerUrl(request), oauthProperties2.getScopesAsString()).build()); 
```

# android - Android 自动完成

> ID：11286497
> 
> 赞同：4
> 
> 时间：2012-07-01T23:48:32.480
> 
> 标签：android, autocomplete

我仍然是 Android 的新手，我正在尝试解决自动完成文本框的问题。我正在使用 MultiAutoCompleteTextView 来填充文本框并提供来自字符串数组的提示。数组中的每个字符串都是具有 id 的对象的名称。所以，我的问题是双重的：

*   用户单击自动完成上的给定条目后，如何找到与用户选择的字符串对应的 id？

*   是否有可能围绕从自动完成列表中选择的项目创建一个“类似 Facebook 的框”，其工作方式类似于用户可以通过按 X 删除的原子单元？（类似于stackoverflow中标签框上的每个标签中发生的情况）

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:39:03.583

Android 有邮件应用程序中使用的“芯片”小部件的源代码。它们是代表作为消息接收者的用户的芯片。它们看起来就像您所指的 Facebook 小部件：带有“X”的名称以取消。我能够调整代码并使其可用于我自己的需要，但老实说，它真的很复杂，我花了很长时间才把头绕过去。

核心原则是您使用`Spannable`字符串并手动绘制背景位图和“X”。

这是android源代码： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/ex/chips/RecipientEditTextView.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/ex/chips/RecipientEditTextView.java)

核心方法是`createSelectedChip`, `constructChipSpan`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T13:48:30.953

[我在 github 上](https://github.com/splitwise/TokenAutoComplete)开源了一个TokenAutoComplete很好地解决了这个问题。那里似乎没有更简单的答案。这是您描述的基本实现：

```
public class ContactsCompletionView extends TokenCompleteTextView {
    public ContactsCompletionView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View getViewForObject(Object object) {
        Person p = (Person)object;

        LayoutInflater l = (LayoutInflater)getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        LinearLayout view = (LinearLayout)l.inflate(R.layout.contact_token, (ViewGroup)ContactsCompletionView.this.getParent(), false);
        ((TextView)view.findViewById(R.id.name)).setText(p.getName());

        return view;
    }

    @Override
    protected Object defaultObject(String completionText) {
        //Stupid simple example of guessing if we have an email or not
        int index = completionText.indexOf('@');
        if (index == -1) {
            return new Person(completionText, completionText.replace(" ", "") + "@example.com");
        } else {
            return new Person(completionText.substring(0, index), completionText);
        }
    }
} 
```

contact_token 的布局代码（您需要找到自己的 x drawable）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:background="@drawable/token_background">
    <TextView android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:textSize="14sp"
        android:text="Test Me"
        android:padding="2dp" />

    <ImageView
        android:layout_height="10dp"
        android:layout_width="10dp"
        android:src="@drawable/x"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="3dp"
        android:layout_marginRight="5dp" />
</LinearLayout> 
```

令牌背景可绘制

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="#ffafafaf" />
    <corners
        android:topLeftRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topRightRadius="5dp"
        android:bottomRightRadius="5dp" />
</shape> 
```

人物对象代码

```
public class Person implements Serializable {
    private String name;
    private String email;

    public Person(String n, String e) { name = n; email = e; }

    public String getName() { return name; }
    public String getEmail() { return email; }

    @Override
    public String toString() { return name; }
} 
```

示例活动

```
public class TokenActivity extends Activity {
    ContactsCompletionView completionView;
    Person[] people;
    ArrayAdapter<Person> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        people = new Person[]{
                new Person("Marshall Weir", "marshall@example.com"),
                new Person("Margaret Smith", "margaret@example.com"),
                new Person("Max Jordan", "max@example.com"),
                new Person("Meg Peterson", "meg@example.com"),
                new Person("Amanda Johnson", "amanda@example.com"),
                new Person("Terry Anderson", "terry@example.com")
        };

        adapter = new ArrayAdapter<Person>(this, android.R.layout.simple_list_item_1, people);

        completionView = (ContactsCompletionView)findViewById(R.id.searchView);
        completionView.setAdapter(adapter);
        completionView.setTokenClickStyle(TokenCompleteTextView.TokenClickStyle.Delete);
    }
} 
```

布局代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.tokenautocomplete.ContactsCompletionView
        android:id="@+id/searchView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

这是你得到的界面：

![工作 TokenAutoComplete 活动的图像](../Images/361017b66687c8806b1b398737fde6a2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T01:25:25.393

我不知道这些链接是否可以帮助您了解您想要的东西，但以防万一，看看它们。

[自动完成教程1](http://android-er.blogspot.com/2010/07/example-of-autocompletetextview.html)

[自动完成教程2](http://androidword.blogspot.com/2010/10/this-is-very-simple-tutorial-on-using.html)

希望他们有所帮助。

# python - 如何使用报告实验室将 png 添加到 PDF

> ID：11286502
> 
> 赞同：6
> 
> 时间：2012-07-01T23:49:17.600
> 
> 标签：python, reportlab

我正在与报告实验室合作，我无法使用鸭嘴兽添加 png 图像这是来自这里的一些示例代码[http://www.tylerlesmann.com/2009/jan/28/writing-pdfs-python- added-images/](http://www.tylerlesmann.com/2009/jan/28/writing-pdfs-python-adding-images/)，附加该 png 的错误

你能帮我让它工作吗？

```
#!/usr/bin/env python

import os
import urllib2
from reportlab.lib.pagesizes import letter
from reportlab.platypus import SimpleDocTemplate, Image

filename = './python-logo.png'

def get_python_image():
    """ Get a python logo image for this example """
    if not os.path.exists(filename):
        response = urllib2.urlopen(
            'http://www.python.org/community/logos/python-logo.png')
        f = open(filename, 'w')
        f.write(response.read())
        f.close()

get_python_image()

doc = SimpleDocTemplate("image.pdf", pagesize=letter)
parts = []
parts.append(Image(filename))
doc.build(parts)

---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/media/Felipe/B1wt/<ipython-input-21-1c3c466b9184> in <module>()
     22 parts = []
     23 parts.append(Image(filename))
---> 24 doc.build(parts)
     25 

/usr/lib/python2.7/site-packages/reportlab/platypus/doctemplate.pyc in build(self, flowables, onFirstPage, onLaterPages, canvasmaker)
   1115         if onLaterPages is _doNothing and hasattr(self,'onLaterPages'):
   1116             self.pageTemplates[1].beforeDrawPage = self.onLaterPages
-> 1117         BaseDocTemplate.build(self,flowables, canvasmaker=canvasmaker)
   1118 
   1119 def progressCB(typ, value):

/usr/lib/python2.7/site-packages/reportlab/platypus/doctemplate.pyc in build(self, flowables, filename, canvasmaker)
    878                 try:
    879                     first = flowables[0]
--> 880                     self.handle_flowable(flowables)
    881                     handled += 1
    882                 except:

/usr/lib/python2.7/site-packages/reportlab/platypus/doctemplate.pyc in handle_flowable(self, flowables)
    761             canv = self.canv
    762             #try to fit it then draw it

--> 763             if frame.add(f, canv, trySplit=self.allowSplitting):
    764                 if not isinstance(f,FrameActionFlowable):
    765                     self._curPageFlowableCount += 1

/usr/lib/python2.7/site-packages/reportlab/platypus/frames.pyc in _add(self, flowable, canv, trySplit)
    157             h = y - p - s
    158             if h>0:
--> 159                 w, h = flowable.wrap(aW, h)
    160             else:
    161                 return 0

/usr/lib/python2.7/site-packages/reportlab/platypus/flowables.pyc in wrap(self, availWidth, availHeight)
    406     def wrap(self, availWidth, availHeight):
    407         #the caller may decide it does not fit.

--> 408         return self.drawWidth, self.drawHeight
    409 
    410     def draw(self):

/usr/lib/python2.7/site-packages/reportlab/platypus/flowables.pyc in __getattr__(self, a)
    400             return self._img
    401         elif a in ('drawWidth','drawHeight','imageWidth','imageHeight'):
--> 402             self._setup_inner()
    403             return self.__dict__[a]
    404         raise AttributeError("<Image @ 0x%x>.%s" % (id(self),a))

/usr/lib/python2.7/site-packages/reportlab/platypus/flowables.pyc in _setup_inner(self)
    366         height = self._height
    367         kind = self._kind
--> 368         img = self._img
    369         if img: self.imageWidth, self.imageHeight = img.getSize()
    370         if self._lazy>=2: del self._img

/usr/lib/python2.7/site-packages/reportlab/platypus/flowables.pyc in __getattr__(self, a)
    396         if a=='_img':
    397             from reportlab.lib.utils import ImageReader  #this may raise an error
--> 398             self._img = ImageReader(self._file)
    399             del self._file
    400             return self._img

/usr/lib/python2.7/site-packages/reportlab/lib/utils.pyc in __init__(self, fileName, ident)
    539         self._transparent = None
    540         self._data = None
--> 541         if _isPILImage(fileName):
    542             self._image = fileName
    543             self.fp = getattr(fileName,'fp',None)

/usr/lib/python2.7/site-packages/reportlab/lib/utils.pyc in _isPILImage(im)
    519 def _isPILImage(im):
    520     try:
--> 521         return isinstance(im,Image.Image)
    522     except ImportError:
    523         return 0

AttributeError: 'NoneType' object has no attribute 'Image' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T00:57:28.257

您应该安装[PIL (Python Imaging Library)](http://pypi.python.org/pypi/PIL/)，例如

```
pip install PIL 
```

我猜在导入 PIL 失败时，它设置 Image = None。如果reportlab 源易于浏览，我会确认。

编辑：我们开始：

```
try:
    import Image
    if PIL_WARNINGS: warnOnce('Python Imaging Library not available as package; upgrade   your installation!')
except ImportError, errMsg:
    _checkImportError(errMsg)
    Image = None 
```

# javascript - 将 img src 存储在 javascript 变量中

> ID：11286503
> 
> 赞同：2
> 
> 时间：2012-07-01T23:49:23.787
> 
> 标签：javascript, onclick

当我单击图像时，我想将该特定图像存储`src`在 Javascript 变量中。我怎样才能做到这一点？请记住，`<a>`标签用于悬停效果。因此，当我单击时，`<a>`我想要其兄弟姐妹的图像源。

演示：http: [//jsfiddle.net/FVrTg/2](http://jsfiddle.net/FVrTg/2)

```
<div>
    <img src = "http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/YellowLabradorLooking_new.jpg/260px-YellowLabradorLooking_new.jpg"/>
    <a href = "#"></a>
</div>

<div>
    <img src = "http://whatiscat.com/wp-content/uploads/2011/07/cute_cat_2.whatiscat.com_.jpg"/>
    <a href = "#"></a>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:53:27.673

```
$("a").on("click", function() {
    alert ( $(this).siblings("img").attr("src") );
}); 
```

[演示](http://jsfiddle.net/FVrTg/3/)

...

**更新**

仅限 JS - [http://jsfiddle.net/FVrTg/7/](http://jsfiddle.net/FVrTg/7/)

```
var links = document.getElementsByTagName("a");
var size  = links.length;

for ( var i = 0; i < size; i++ ) {
    links[i].addEventListener("click", function() {
        alert( this.previousSibling.previousSibling.getAttribute("src") );
    }, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:15:30.043

这是一种将打印`img.src`输出`rel="img-id"`用于将 与 相关联的`a`方法`img`：

**HTML**

```
<div>
    <img id="img-1" src="http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/YellowLabradorLooking_new.jpg/260px-YellowLabradorLooking_new.jpg"/>
    <a href="#" class="img-hover" rel="img-1"></a>
</div> 
```

**Javascript**

```
window.onload = function(){
    var links = document.getElementsByTagName('a'),
        c_links = links.length,
        link;

    while (c_links--){
        link = links[c_links];

        if (link.className.indexOf('img-hover') > -1) {
            link.onclick = function(){
                var img = document.getElementById(this.rel);

                if (img) {
                    console.log(img.src);
                }
            };
        }
    }
}; 
```

[http://jsfiddle.net/userdude/ecXCX/](http://jsfiddle.net/userdude/ecXCX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T23:52:14.567

```
$('a').click(function(e){
   e.preventDefault();
   var src = $(this).siblings('img').prop('src');
}) 
```

[http://jsfiddle.net/FVrTg/5/](http://jsfiddle.net/FVrTg/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T00:10:26.863

使用委托事件`click`on `document`，以提高效率，并获取`parentNode`for `<a>`。然后抓住`<img>`并得到`src`。您可以安全地添加到`parentNode`您的设计中，而无需更改代码。

演示：http: [//jsfiddle.net/ThinkingStiff/NWD7f/](http://jsfiddle.net/ThinkingStiff/NWD7f/)

```
document.addEventListener( 'click', function( event ) {

    var a = event.target;

    if( a.tagName.toLowerCase() == 'a' ) {

        var src = a.parentNode.getElementsByTagName( 'img' )[0].src;
        console.log( src );

    };

}, false );​ 
```

# python - Python 类中的数据库查找 - 最佳实践

> ID：11286506
> 
> 赞同：0
> 
> 时间：2012-07-01T23:49:43.947
> 
> 标签：python, database, class

我正在使用`pymongo`并试图找到构建类的最佳方法。目前，我正在做这样的事情：

```
class AssetCollection:
    def __init__(self,db,**kwargs):
        self.__dict__.update(kwargs)
        self.Device = Device(db,**db.Devices.find_one({'_id':kwargs['DeviceID']}))

    def __repr__(self):
        return '<%s %s>' % (self.Name,self._id) 
```

这是非常灵活的，模仿了 MongoDB 的灵活性，但我不确定它是最好的方式。例如，可能出现的问题是如果`Device`查找返回，则对象无法实例化`None`。我应该能够通过确保在数据库中正确删除级联来避免这种情况，但是我是否也应该在类中处理它？还有什么陷阱吗？

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:57:24.313

mongokit 或 mongoengine 都不适合你吗？

如果assetcollection 需要非None 设备，那么是的，您需要检查它。如果 find_one 没有返回值，您可以轻松地引发错误。

什么是资产集合？它似乎没有assetcollection甚至是一个集合，而只是一个设备？

# ruby-on-rails - 无法使用 osx 的 ruby mine 数据源插件查看 sqlite 表

> ID：11286508
> 
> 赞同：0
> 
> 时间：2012-07-01T23:50:27.140
> 
> 标签：ruby-on-rails, macos, jdbc, sqlite, rubymine

我正在尝试使用 ruby​​mine 4.0.3 的数据源插件，但出现意外错误。

当我配置连接并对其进行测试时，它工作正常。但是，当我连接时，我被告知数据库中没有表，即使我可以通过网站本身验证表是否存在（构建测试表和添加/查看的记录）

我已经尝试了两个建议的 sqlite jdbc 驱动程序，但它们都得到了相同的结果。我在 Windows 7 ruby​​mine 安装上第一次尝试就可以正常工作。

任何方向都适用。

我没有收到错误消息，数据源只是看不到表格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:19:34.603

我设法通过在 ruby​​mine 驱动程序目录中安装 xerial 驱动程序来使其工作。不知何故，如果您手动选择驱动程序会在其他地方下载，并且似乎无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:19:13.977

在 Windows 7 中，将 JDBC 驱动程序放置在：

*   RubyMine 4.x：
    `%USERPROFILE%\.RubyMine40\config\jdbc-drivers`

*   RubyMine 5.x：
    `%USERPROFILE%\.RubyMine50\config\jdbc-drivers`

# r - 为ggplots中的特定条分配不同的颜色

> ID：11286511
> 
> 赞同：1
> 
> 时间：2012-07-01T23:51:04.633
> 
> 标签：r, ggplot2

我需要为 ggplot 条形图中的条形分配特定颜色。默认情况下，我得到下面的 ggplot 条形图。在这里，我想要为最高值条分配不同的颜色（比如红色）。那是为 下的`64 items`酒吧。并且下面的酒吧也是红色的。目前我正在使用下图所示的 R ggplot2 代码。请帮我得到这个。`type D``names X and Z``16 items``type C``name Y`

数据：

```
data <- structure(list(type = structure(c(1L, 2L, 3L, 4L, 2L, 3L, 4L, 
    3L, 4L, 4L, 1L, 2L, 3L, 4L, 2L, 3L, 4L, 3L, 4L, 4L, 1L, 2L, 3L, 
    4L, 2L, 3L, 4L, 3L, 4L, 4L), .Label = c("A", "B", "C", "D"), class = "factor"), 
    items = c(16L, 16L, 16L, 16L, 32L, 32L, 32L, 48L, 48L, 64L, 
    16L, 16L, 16L, 16L, 32L, 32L, 32L, 48L, 48L, 64L, 16L, 16L, 
    16L, 16L, 32L, 32L, 32L, 48L, 48L, 64L), name = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("X", 
    "Y", "Z"), class = "factor"), value = c(6.3, 7.2, 7.1, 7, 
    10, 10.9, 11, 11.6, 11.5, 12, 8.9, 10.6, 11.5, 7.9, 12.6, 
    13.5, 12.4, 13, 14, 15.4, 4.8, 7, 7.2, 6.1, 4.1, 4.4, 4.2, 
    3.2, 2.7, 1.6)), .Names = c("type", "items", "name", "value"
    ), class = "data.frame", row.names = c(NA, -30L)) 
```

![在此处输入图像描述](../Images/d38b7cf87f67f48bc2aa59489e1fa9f9.png)

```
data$name = factor(data$name, levels(data$name)[c(1,3,2)])
p1 = ggplot(data, aes(type, value, fill=type, group=items, facets=items)) + geom_bar(stat="identity") 
p1 = p1 +  scale_fill_manual(values = rep("grey60",4), labels = c("type-A", "type-B", "type-C", "type-D"))
p1 = p1 + facet_grid(name~items,scales="free", space="free") + opts(strip.text.y = theme_text(size=14, face="bold"))
p1 = p1 + opts(legend.position="top", legend.text=theme_text(size=15), legend.title=theme_text(size=0,colour="white"), legend.key = theme_rect(colour = NA)) 
```

**更新**

虽然 mnei 提供的代码几乎提供了我需要的东西，但我没有得到图中所示的图例。请让我知道我怎样才能得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T00:29:38.823

计算`type`每个组合的最大值

```
 library(plyr)
 data <- ddply(data, .( items, name), mutate, is_max = type == type[which.max(value)])

## the plot
ggplot(data, aes(x = type, y = value, fill = is_max, group = items)) + 
  facet_grid(name ~ items, scale = 'free', space = 'free') + 
  geom_bar(stat = 'identity') +  
  scale_fill_manual(values = c('black', 'red'), labels = c('other', 'maximum')) +
  opts(legend.position = "top", legend.text = theme_text(size = 15),  
       legend.title = theme_text(size = 0,colour = "white"), 
       legend.key = theme_rect(colour = NA)) 
```

或根据要求使用图例

```
 ggplot(data, aes(x=type, y= value, group = items, fill = type)) +  
  facet_grid(name~items, scale = 'free', space = 'free') + 
  geom_bar(stat= 'identity')  +
  geom_bar(data = data[data$is_max,],stat = 'identity', fill = 'red' ) +
  scale_fill_manual(values = rep("grey60",4), 
                    labels = c("type-A", "type-B", "type-C", "type-D")) + 
  opts(strip.text.y = theme_text(size=14, face="bold")) + 
  opts(legend.position="top", legend.text=theme_text(size=15), 
       legend.title=theme_text(size=0,colour="white"), 
       legend.key = theme_rect(colour = NA)) 
```

# c# - OLEDB 参数插入的奇怪异常

> ID：11286512
> 
> 赞同：1
> 
> 时间：2012-07-01T23:51:07.653
> 
> 标签：c#, ms-access-2007, oledb, jet, oledbcommand

尝试使用参数将数据插入 Access 数据库时出现奇怪的错误。我遇到问题的地方是：-

```
 thisCommand.CommandText = "INSERT INTO Events (Venue_ID, Date_Start, Date_End, Time_Start, Time_End, Name, Description, Event_Type, Buy_Tickets_URL) VALUES (@VenID, @DStart, @DEnd, @evTime, @evTime, @Name, @Des, @EvType, @SysUrl);";

                //Other Parameters already inserted here
                string desc = GetDesc(rec.EvName);
                thisCommand.Parameters.AddWithValue("@Des", desc);
                thisCommand.ExecuteNonQuery(); 
```

其他参数都不会导致问题，但是当尝试将数据插入描述字段时，我得到一个数据库异常，说该字段太小而无法接受数据量。问题是我的程序在抛出错误时只尝试插入 3 个字符，并且描述字段是一个备忘录，因此应该最多可以容纳 65000 多个字符。在 CommandText 中手动插入值时，一切正常，因此它必须与参数属性有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:12:08.650

也许您需要在描述上添加大括号。`[Description]`

并更改您的参数，例如：

```
 thisCommand.CommandText = "INSERT INTO Events (Venue_ID, Date_Start, Date_End, Time_Start, Time_End, Name, [Description], Event_Type, Buy_Tickets_URL) VALUES (@VenID, @DStart, @DEnd, @evTime, @evTime, @Name, @Des, @EvType, @SysUrl);

            //Other Parameters already inserted here
            string desc = GetDesc(rec.EvName);
           // thisCommand.Parameters.AddWithValue("@Des", desc);
            thisCommand.Parameters.Add("@Des", OleDbType.VarChar, 6000).Value = desc;
            thisCommand.ExecuteNonQuery(); 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:15:11.997

参数名称只是对你的一个指导，例如，这个运行，注意所有参数都具有相同的名称！另请注意，保留字 Name 由方括号转义。

```
 thisCommand.CommandText = "INSERT INTO Events (Venue_ID, Date_Start, " +
    "Date_End, [Name], Description, Event_Type, Buy_Tickets_URL) " +
    "VALUES (@VenID, @DStart, @DEnd, @Name, @Des, @EvType, @SysUrl);";

    thisCommand.Parameters.AddWithValue("@Des", 1);
    thisCommand.Parameters.AddWithValue("@Des", DateTime.Now.Date);
    thisCommand.Parameters.AddWithValue("@Des", DateTime.Now.Date);
    thisCommand.Parameters.AddWithValue("@Des", "abc");
    thisCommand.Parameters.AddWithValue("@Des", "abc");
    thisCommand.Parameters.AddWithValue("@Des", 1);
    thisCommand.Parameters.AddWithValue("@Des", "abc"); 
```

保留字

*   [喷射](http://support.microsoft.com/kb/248738)
*   [高手](http://msdn.microsoft.com/en-us/library/bb208875%28v=office.12%29.aspx)

# c - lseek EOVERFLOW 错误处理

> ID：11286515
> 
> 赞同：1
> 
> 时间：2012-07-01T23:52:10.280
> 
> 标签：c, linux, file, system-calls, errno

我注意到当我尝试寻找比 off_t 更多的字节时，我得到一个 EOVERFLOW 错误。我怎样才能在 off_t 中寻找比更大的数字更多的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T23:56:22.880

启用[大文件支持](http://www.suse.de/~aj/linux_lfs.html)。

> 简而言之，使用 LFS，您可以选择以下任一项：
> 
> *   用“”编译你的程序`gcc -D_FILE_OFFSET_BITS=64`。这会强制所有文件访问调用使用 64 位变体。几种类型也发生变化，例如`off_t`变为`off64_t`。因此，始终使用正确的类型并且不要使用 eg`int`代替`off_t`. 为了与其他平台的可移植性，您应该使用`getconf LFS_CFLAGS`它将`-D_FILE_OFFSET_BITS=64`在 Linux 平台上返回但可能在例如 Solaris 上返回其他东西。对于链接，您应该使用通过报告的链接标志`getconf LFS_LDFLAGS`。在 Linux 系统上，您不需要特殊的链接标志。
> *   定义`_LARGEFILE_SOURCE`和`_LARGEFILE64_SOURCE`。通过这些定义，您可以直接使用像 open64 这样的 LFS 函数。
> *   使用`O_LARGEFILE`标志 with`open`对大文件进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:03:22.070

请参阅[http://www.kernel.org/doc/man-pages/online/pages/man3/lseek64.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/lseek64.3.html)

# javascript - ExtJS 拖放 TabPanel

> ID：11286517
> 
> 赞同：0
> 
> 时间：2012-07-01T23:52:17.123
> 
> 标签：javascript, extjs

设置属性时，我试图拖放到`TabPanel`选项卡（实际选项卡，而不是容器）上。

我有一个`TabPanel`并且正在整个 TabPanel 条上设置一个拖放区，但不太确定`getTargetFromEvent`

**示例**

```
// My TabPanel Def
myTabPanel = new Ext.TabPanel({
    activeTab: 0,
    items: [{
        title:'Non-Drop Tab'
    },{
        title:'DROP ON THIS TAB',
        enableDrop: True
    }]
});

myTabPanel.dropZone = new Ext.dd.DropZone(myTabPanel.strip,{
    getTargetFromEvent: function(e) {

        // ####
        // Need to get the tab being dropped onto here
        // ####

        return the_tab;
    },
    ...rest of config...
}) 
```

我希望这是有道理的，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:47:23.100

为开发人员获取照明（firebug 插件），在您的函数覆盖中放置一个断点，检查“e”对象以查看您可以使用的内容。如果您的确切目标无法从 e 获得，则使用组件查询来查找您的对象。

# delphi - 在消息窗口中自动扩展“在文件中查找”的结果

> ID：11286525
> 
> 赞同：0
> 
> 时间：2012-07-01T23:53:30.683
> 
> 标签：delphi

简单的问题，（简单点！）

在 Delphi 2010（更新 4 和 5）中，“在文件中查找”显示每个文件的树关闭的结果。我必须单击加号才能打开每个文件的结果。

我知道有一种方法可以将 IDE 配置为在所有树打开的情况下自动显示结果，但由于某种原因（我感到疲劳？）尽管反复探索了工具，但我无法找到在哪里设置该选项, 选项屏幕。

我在 11 个月前问过这个问题：
[如何自动扩展“在文件中查找”结果](https://stackoverflow.com/questions/7142600/how-to-have-find-in-files-results-automatically-expanded)并得到一个答案，该答案提供了一个热键来打开树，但没有自动打开。

但是现在，不知何故，在我的一台机器上的 XE2 中，搜索结果现在正在扩展。所以我*知道*这是可能的。（而且，很可能，我去年就是这样配置的！）但我不知道如何在我的另一台开发机器上做到这一点。我正在使用的唯一 IDE 插件是 DDevExtensions，所以并不是一台机器正在使用 GEExperts 或其他东西来进行搜索。显然，XE2 中有一个内在选项可以做到这一点。它是什么？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:42:46.693

我猜您在“查找文件”对话框中未选中“按文件分组结果”。这会将所有结果放入输出窗口，完全没有层次结构。不是树是自动展开的，而是根本没有树！

# winforms - Windows 窗体 DataGridView 数据源

> ID：11286526
> 
> 赞同：0
> 
> 时间：2012-07-01T23:53:38.157
> 
> 标签：winforms, list, datagridview, datasource

如何在 Windows 窗体应用程序中获取数据网格视图以在将其分配给新列表或集合时刷新？我的代码包括初始化一个列表并将其分配给效果很好的datagridview数据源，单击按钮进行搜索后，我使用linq过滤列表并将其重新分配给数据源，但是没有任何变化，datagridview仍然存在显示初始结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:46:25.030

不要使用`List`. 使用`BindingList`. 那么当列表更新时，datagridview 会自动更新。您只需在 datagridview 上调用 .Refresh() 即可。

# google-app-engine - go 和 appengine 的测试用例

> ID：11286534
> 
> 赞同：12
> 
> 时间：2012-07-01T23:55:29.343
> 
> 标签：google-app-engine, testing, tdd, go

我正在使用 Go 和 appengine，现在我想做一些测试用例。

我尝试使用 gos 标准测试包 Files（都是“package hello”）：

```
hello/http.go
hello/http_test.go 
```

问题：我无法运行`go test hello`。我得到的最接近的是`go test hello/http_test.go`，如果我不拨打任何电话，它就会起作用`http.go`，这是毫无意义的。:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T02:51:56.600

# [github.com/mzimmerman/appenginetesting](https://github.com/mzimmerman/appenginetesting)

## 安装

1.  [安装围棋](http://golang.org/doc/install)

2.  设置 Go 环境变量*（您的路径可能会有所不同）*：

    ```
    export GOPATH=~/gopath
    export PATH=$PATH:$GOPATH/bin 
    ```

3.  下载[适用于 Go 的 Google App Engine SDK](https://developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go)

4.  设置 Google App Engine 环境变量*（您的路径可能会有所不同）*：

    ```
    export APPENGINE_SDK=$HOME/appengine
    export PATH=$PATH:$APPENGINE_SDK 
    ```

5.  符号链接`appengine`和`appengine_internal`目录：

    ```
    ln -s $APPENGINE_SDK/goroot/src/pkg/appengine $GOPATH/src/pkg/
    ln -s $APPENGINE_SDK/goroot/src/pkg/appengine_internal $GOPATH/src/pkg/ 
    ```

6.  安装[appengine 测试](https://github.com/mzimmerman/appenginetesting)

    ```
    go get github.com/mzimmerman/appenginetesting 
    ```

# 写作测试

**appengintesting**提供了一个假的`appengine.Context`. 在幕后 它启动了一个 Python 开发服务器并通过它运行请求，因此测试可能会有点慢**（秒而不是毫秒）**。要在测试中使用它，您可以编写类似

```
import "github.com/mzimmerman/appenginetesting"
...
c := appenginetesting.NewContext(nil) 
```

然后，您可以`c`像使用实际的`appengine.Context`. 这适用于测试文件，但不适用于您通过调用创建的上下文`appengine.NewContext(r)`

我在[gaego](https://github.com/gaego)中使用的策略是从自定义包中导入上下文，而不是`appengine`. 这允许我`appengine.Context`在构建适用于 App Engine 时使用，并`appenginetesting.Context`在构建适用于测试套件时使用。

通过设置以下构建标志：

*   context_appengine.go`// +build appengine`
*   context_testing.go`// +build !appengine`

编译器将决定要加载哪个文件。[例子](https://github.com/gaego/context)。这种技术取自[大猩猩](https://github.com/gorilla/context)

然后不是从我的包中导入，而是`appengine`从我的包中导入

```
import (
  github.com/gaego/context
)

..
c := context.NewContext(r)
.. 
```

最后需要提到的是，您必须显式关闭上下文，否则 python 进程将继续运行。您可以通过调用以下方法终止该过程：

```
defer c.Close() 
```

更多示例请查看：

[context_test.go](https://github.com/icub3d/appenginetesting/blob/master/context_test.go)

[recorder_test.go](https://github.com/icub3d/appenginetesting/blob/master/recorder_test.go)

**编辑：** Takuy​​a Ueda 创建了一个可与最新 SDK 配合使用的早午餐

**Edit2：** [Joshua Marsh](https://github.com/icub3d)维护了一个与最新 SDK 兼容的分支

**Edit3：** [Matt Zimmerman](https://github.com/mzimmerman)在标准 aetest 包（登录/注销和任务队列）上维护了一个具有附加功能的分支

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T07:02:22.027

一个有趣的发展：从 1.8.6 开始，使用服务存根进行测试已通过`"appengine/aetest"`包集成到 SDK 中。这通过“测试”上下文在很大程度上与上述类似。[更多信息](https://developers.google.com/appengine/docs/go/tools/localunittesting)

# matlab - 具有不同配色方案的 Matlab 冲浪

> ID：11286539
> 
> 赞同：5
> 
> 时间：2012-07-01T23:56:22.877
> 
> 标签：matlab, visualization

我有一张地形图，我想在其中表示一些数据。见下图：

![在此处输入图像描述](../Images/aaa2fbcd803d46d09e5e21cefda34485.png)

右边白色圈出的区域是绘图其余部分的单独冲浪函数。我想做的是改变配色方案。外部应该是灰度，内部应该是基于我与绘图分开的值的单一颜色。目前我已经尝试了 colormap(gray) 函数然后改变，但这改变了整个情节。

我愿意接受有关不同绘图风格的建议，即。plot3 而不是冲浪。所以我必须制作这两个冲浪的数据是两个 x、y、z 点列表。

如果可能的话，我还想显示一个表示圆圈区域颜色的颜色条（由我根据外部值设置）。

有谁知道这样做的好方法？

谢谢。

编辑：

我想做的是：

![在此处输入图像描述](../Images/0f82f111e779196b4c3fa4419554fe05.png)

图像不应该在土堆顶部有深蓝色。图像将不断更新更多的“蓝色”点，颜色应根据外部值更改，理想情况下，如果它们重叠，它将与先前的点合并颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T01:19:12.463

由于您只想将圆圈区域设置为单一颜色，您可以设置它的`FaceColor`属性。例如：

```
%# make some test data
[xx,yy]=ndgrid(-5:0.1:5,-5:0.1:5);
zz = exp(-xx.^2/2+-yy.^2/2);
zz1 = zz;
zz1(zz1>0.5)=NaN;
zz2 = zz;
zz2(zz2<0.5)=NaN;

%# plot first surface, set colormap
surf(zz1)
colormap('gray')

%# stretch colormap to [0 0.5]
caxis([0 0.5])

%# plot the second surface in red
hold on
surf(zz2,'faceColor','r') 
```

![在此处输入图像描述](../Images/4345f1a77daba10dad9c50c4b19ef2dd.png)

**编辑**

如果您想为您的部分表面设置不同的颜色图，您需要将`'CData'`表面的属性设置为颜色图中的索引。要仅在颜色栏中显示单个颜色图，您可以利用颜色栏只是另一个图的事实，这意味着您可以仅显示其中的一部分，并更改标签。

```
%# make some more test data
[xx,yy]=ndgrid(-5:0.1:5,-5:0.1:5);
zz = exp(-xx.^2/2+-yy.^2/2);
zz1 = zz(1:50,:);
zz2 = zz(52:end,:);
xx1 = xx(1:50,:);xx2=xx(52:end,:);
yy1 = yy(1:50,:);yy2=yy(52:end,:);

%# create multi-colormap, set it to figure
figure
cmap = [gray(128);copper(128)];
colormap(cmap)

%# plot surfaces, setting the cdata property to indices 1-128 and 129-256, 
%# respectively, in order to access the different halves of the colormap
surf(xx1,yy1,zz1,'cdata',round(127*(zz1-min(zz1(:))/(max(zz1(:))-min(zz1(:)))))+1,'cdatamapping','direct')
hold on
surf(xx2,yy2,zz2,'cdata',round(127*(zz2-min(zz2(:))/(max(zz2(:))-min(zz2(:)))))+129,'cdatamapping','direct')

%# find the handle to the colorbar
%# alteratively: cbarH = findall(gcf,'tag','Colorbar')
cbarH = colorbar;

%# set limits and ticks/labels
ylim(cbarH,[129 255])
set(cbarH,'ytick',[129 192 255],'yticklabel',[0 0.5 1]) 
```

![在此处输入图像描述](../Images/0a0d266b891eb019e99e541cea1489eb.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T01:09:52.710

您是否从 MATLAB 技术支持处看到了这一点？

[http://www.mathworks.com/support/solutions/en/data/1-GNRWEH/index.html](http://www.mathworks.com/support/solutions/en/data/1-GNRWEH/index.html)

您可以编辑`colorbar`属性。

```
g = colorbar;
get(g) 
```

例如，

```
% Define a colormap that uses the cool colormap and 
% the gray colormap and assign it as the Figure's colormap.
colormap([cool(64);gray(64)])

% Generate some surface data.
[X,Y,Z] = peaks(30);

% Produce the two surface plots.
h(1) = surf(X,Y,Z);
hold on
h(2) = pcolor(X,Y,Z);
hold off

% Move the pcolor to Z = -10.
% The 0*Z is in the statement below to insure that the size
% of the ZData does not change.
set(h(2),'ZData',-10 + 0*Z)
set(h(2),'FaceColor','interp','EdgeColor','interp')
view(3)

% Scale the CData (Color Data) of each plot so that the 
% plots have contiguous, nonoverlapping values. The range 
% of each CData should be equal. Here the CDatas are mapped 
% to integer values so that they are easier to manage; 
% however, this is not necessary.

% Initially, both CDatas are equal to Z.
m = 64; % 64-elements is each colormap

cmin = min(Z(:));
cmax = max(Z(:));
% CData for surface
C1 = min(m,round((m-1)*(Z-cmin)/(cmax-cmin))+1); 
% CData for pcolor
C2 = 64+C1;

% Update the CDatas for each object.
set(h(1),'CData',C1);
set(h(2),'CData',C2);

% Change the CLim property of axes so that it spans the 
% CDatas of both objects.
caxis([min(C1(:)) max(C2(:))])

% I added these two lines
g = colorbar
set(g,'YLim',[1 60]) 
```

最后两行是我的。其余部分来自 MATLAB 技术支持链接。它会给你一个只有一个颜色图的颜色条。如果您想要颜色图的灰色部分，那么您可以使用`set(g,'YLim',[64 128])`.

![在此处输入图像描述](../Images/6720e4a1d55d8bbfb00fcb629feb340c.png)

# git - 为什么有人应该在 Git 中标记？

> ID：11286541
> 
> 赞同：6
> 
> 时间：2012-07-01T23:56:39.137
> 
> 标签：git, version-control

我遇到了很多通过标记 gits 发誓的开发人员。就个人而言，我从未见过它的用途。

我知道您可以将版本信息放在标签中，但为什么不将该信息放在提交消息中呢？

**我只是对标签添加的提交消息不能添加的值感到困惑。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T00:00:21.177

标签允许您引用存储库中的特定提交。例如，使用*版本*标签，您可以轻松获得项目中对应于*版本 1.5*的提交。这比记住特定提交的哈希值或滚动/搜索日志信息以找出代表版本 1.5 的提交更可取。

出于多种原因，这可能很有用，但只考虑一个：您有两个客户端运行不同版本的软件，*客户端 A*使用version `1.5`，*客户端 B*使用 version `2.0`。客户端 A 报告了一个错误，您不能只升级他们的安装，而是需要解决版本`1.5`代码中的错误。标记版本`1.5`使您可以轻松地返回他们正在运行的代码并进行错误修复。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-02T00:00:40.800

在 Git 中，*标签*允许您为特定提交分配一个符号名称（易于记忆的名称）。*这允许您通过名称*而不是原始*提交 id*来引用该提交。

当我反复引用特定版本时，我有时会添加一个本地标签，例如在完成大量工作之前的某个时间点。我还使用带注释的标签来标记特定的发布版本号（带注释的标签可以很容易地推送，并且可以包含除了名称之外的其他描述）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T00:00:13.130

提交消息通常用于提供有关提交原因的更多信息，而不仅仅是“它是版本 X”。

使用标记，您可以返回到标记的版本，而无需滚动日志以找到正确的提交号；您直接查看标记的版本。更有限的标签名称空间在这里是一个好处，而不是一个障碍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T07:14:00.093

请注意，您可以[**签署**一个标签](http://learn.github.com/p/tagging.html#signed_tags)，这在您想要**推送**时很重要（即发布到另一个仓库）

请参阅“[为什么有些开源项目不接受拉取请求，而只通过电子邮件发送补丁文件](https://softwareengineering.stackexchange.com/questions/149199/why-do-some-open-source-projects-do-not-accept-pull-requests-but-emailing-patch/149202#149202)”。

那么为什么要在 Git（*分布式*版本控制系统）中添加标签？

您可以标记以引用具有符号名称的树（如其他答案中所述）。

但是您也可以通过保证内容的完整性来签署您的标签，以便为另一个 repo 做出贡献。
收件人只需[检查该标签签名](http://learn.github.com/p/tagging.html#verifying_tags)，以确认它来自受信任的来源。

# android - 带按钮的 EditTextPreference

> ID：11286544
> 
> 赞同：3
> 
> 时间：2012-07-01T23:56:58.883
> 
> 标签：android, android-edittext

我想在 android edittextpreference 上放一个按钮。我创建了一个自定义editextpreference：

```
public class EditTextPreferenceWithButton extends EditTextPreference {

    private Context context;

    public EditTextPreferenceWithButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.context=context;
      }

      public EditTextPreferenceWithButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context=context;
      }

      public EditTextPreferenceWithButton(Context context) {
        super(context);
        this.context=context;
      }

      @Override
        protected void onBindDialogView(View view) {
            super.onBindDialogView(view);

           view.setLayoutParams(new LayoutParams(android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT));

            final EditText editText = (EditText)view.findViewById(android.R.id.edit);
            ViewGroup vg = (ViewGroup)editText.getParent();

            Button button = new Button(context);

            vg.addView(button,ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);

        }
} 
```

这样，按钮显示在编辑文本下方，但我希望它是下一个编辑文本，如下所示：

|编辑文本| |按钮|

请帮我！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T00:23:06.350

我会创建一个`DialogPreference`.

```
class EditTextDialogPreference extends DialogPreference {

    //Layout Fields
    private final LinearLayout layout = new LinearLayout(this.getContext());
    private final EditText editText = new EditText(this.getContext());
    private final Button button = new Button(this.getContext());

    //Called when addPreferencesFromResource() is called. Initializes basic paramaters
    public EditTextDialogPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        setPersistent(true);
        button.setText("Button");
        layout.setOrientation(LinearLayout.HORIZONTAL);
    }

    //Create the Dialog view
    @Override
    protected View onCreateDialogView() {
        layout.addView(editText);
        layout.addView(button);
        return parentLayout;
    }

    //Attach persisted values to Dialog
    @Override
    protected void onBindDialogView(View view) {
        super.onBindDialogView(view);
        editText.setText(getPersistedString("EditText"), TextView.BufferType.NORMAL);
    }

    //persist values and disassemble views
    @Override
    protected void onDialogClosed(boolean positiveresult) {
        super.onDialogClosed(positiveresult);
        if (positiveresult && shouldPersist()) {
            persistString(editText.getText().toString());
        }

        ((ViewGroup) editText.getParent()).removeView(editText);
        ((ViewGroup) button.getParent()).removeView(button);
        ((ViewGroup) layout.getParent()).removeView(layout);

        notifyChanged();
    }
} 
```

我假设您将保留该值，`EditText`并且我将按钮的操作留给您。有关扩展的进出的更多信息，请参阅[这篇文章](https://stackoverflow.com/a/4805325/1210260)`DialogPreference`。

为了将密钥放入 中`SharedPreferences`，请将以下内容放入您的 XML 中：

```
<com.yourpackage.EditTextDialogPreference
    android:key="Your Key"
    android:persistent="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T12:37:40.807

这是一个基于@gobernador 答案但使用的更具体的类`RelativeLayout`：

```
class EditTextDialogPreference extends DialogPreference {

    //Layout Fields
    private final RelativeLayout layout = new RelativeLayout(this.getContext());
    private final EditText editText = new EditText(this.getContext());
    private final Button button = new Button(this.getContext());

    //Called when addPreferencesFromResource() is called. Initializes basic paramaters
    public EditTextDialogPreference(final Context context, AttributeSet attrs) {
        super(context, attrs);
        setPersistent(true);
        button.setText("Button");
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
             //button action
            }
        });
        editText.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
    }

    //Create the Dialog view
    @Override
    protected View onCreateDialogView() {
        layout.addView(editText);
        layout.addView(button);

        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) button.getLayoutParams();
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        return layout;
    }

    //Attach persisted values to Dialog
    @Override
    protected void onBindDialogView(View view) {
        super.onBindDialogView(view);
        editText.setText(getPersistedString("EditText"), TextView.BufferType.NORMAL);
    }

    //persist values and disassemble views
    @Override
    protected void onDialogClosed(boolean positiveresult) {
        super.onDialogClosed(positiveresult);
        if (positiveresult && shouldPersist()) {
            String value = editText.getText().toString();
            if (callChangeListener(value))
                persistString(value);
        }

        ((ViewGroup) editText.getParent()).removeView(editText);
        ((ViewGroup) button.getParent()).removeView(button);
        ((ViewGroup) layout.getParent()).removeView(layout);

        notifyChanged();
    }

    public void setValue(String value) {
        editText.setText(value);
    }
} 
```

# c# - 渲染视图中已经存在的图像字节数据

> ID：11286546
> 
> 赞同：0
> 
> 时间：2012-07-01T23:57:15.403
> 
> 标签：c#, asp.net-mvc, image-rendering

我是 MVC（来自面向对象的 C# exe 应用程序）和 Stackoverflow 的新手。我一直在努力尝试使用 MVC 有效地运行代码。我有从数据库返回的模型数据，以及该数据是一个字节字段，它是一个 jpeg 图像。在这个阶段，我已经对数据库进行了一次调用......

现在我坚持的是，一旦填充的模型数据在要渲染的视图中，我不能简单地循环它并在每个数据行中渲染图像。我发现使它工作的唯一方法是调用返回 FileContentResult 的 Action 方法，但这需要重新调用每个图像的数据库。

对于解决方案，我尝试了三种不同的方法来解决以下问题：

1.  我似乎无法通过 Action 方法将字节数组传递回控制器，以满足 MVC 希望在视图中接收 FileContentResult 的方式。Action 方法只想接受简单类型。
2.  我显然不想让控制器返回数据库以获取视图中已有的字节数据，尤其是当这将涉及模型数据中的每个条目的多次往返时。
3.  使用 Data Uri 是可行的，但还没有足够多的浏览器支持它。

有人可以告诉我处理此类问题的最佳方法是什么吗？我是否需要处理问题 1 或 2，或者我是否缺少其他方法？

这是我最初在问题 1 中尝试使用的代码，用于将字节数组传回控制器，以便渲染 FileContentResult：

```
<img src=" @{Html.RenderAction("RenderMemberImage", "Home", new { @pic = x.ThumbnailData });}" />

[HttpGet]
    public FileContentResult RenderMemberImage(byte[] pic)
    {
        return new FileContentResult(pic, "mime/jpeg");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:28:46.787

一种可能的解决方案是将字节转换为 Base64 表示并将其保留为子对象的属性

```
public class Child
{
  public string ImageURL { set;get;}
  //other properties & construct etc 
}
public class Master
{
  IEnumerable<Child> Children { set;get;}
} 
```

在您的 GET 操作中

```
public ActionResult SomeGetACtion()
{
  var master=new Master();

  foreach(itm in someCollection)
  {
    var child=new Child();

    byte[] imageData = GetImageByte(); //get your byte data;
    string imageBase64 = Convert.ToBase64String(imageData);
    child.ImageURL = string.Format("data:image/gif;base64,{0}", imageBase64);
    master.Children.Add(byte);
  }
} 
```

您可以像这样在视图中使用它

```
@foreach(child in Model.Children)
{
  <img src="child.ImageURL" alt="loding.." />

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:55:34.147

问题是您正在尝试将字节数组从浏览器发送到服务器。尝试这样的事情：

（我还没有编译这个，但它应该很接近）

```
<img src=" @{Html.Action("RenderMemberImage", "Home", new { @picId = x.Id });}" />

[HttpGet]
public FileContentResult RenderMemberImage(Guid picId)
{
    var pic = new Models.Picture(picId);//or however you get your data out of the DB
    return new FileContentResult(pic.ThumbnailData , "mime/jpeg");
} 
```

基本上，对于页面上的每个图像，浏览器都会向服务器发出请求以获取图像。

# java - 领域模型和设计模型有什么区别？

> ID：11286553
> 
> 赞同：2
> 
> 时间：2012-07-01T23:59:19.023
> 
> 标签：java, uml

我正在通过域模型创建设计模型。我不明白设计模型和域模型之间有什么区别。我们只需要向域模型添加属性和方法吗？如何通过领域模型创建设计模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:01:52.500

域“模型”只是整个设计的一部分，它与问题域有关，并尝试创建一个有用的工作模型，您将在其中创建解决方案（请注意，这不必为域）。它通常/理想情况下与“解决方案设计”隔离，这是您用来获得工作软件的技术框架、数据库、UI 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:31:35.793

领域模型是一种商业模型。它不依赖于软件系统。设计模型是软件系统的模型。

例子。域 - 簿记。领域模型元素——账户、信用等

设计 - 簿记系统。设计模型元素 - 数据库、GUI 等

没关系，如果域模型中的一些元素会出现在设计模型中，例如，帐户（来自域模型）可以成为数据库模式（设计模型）中的帐户表。

# python - C 到 Python 字谜

> ID：11286555
> 
> 赞同：0
> 
> 时间：2012-07-01T23:59:29.870
> 
> 标签：python, c, indexing

我正在努力学习 Python。考虑一下 C 中的这个简单的字谜检查器：

```
bool are_anagrams(const char* str1, const char* str2)
{
  int str1_count[NUM_CHARS] = {0};
  int str2_count[NUM_CHARS] = {0};

  for(int i = 0; i < strlen(str1); i++)
  {
    str1_count[str1[i] - 'a']++;
  } 
  for(int i = 0; i < strlen(str2); i++)
  {
    str2_count[str2[i] - 'a']++;
  }

  for(int i = 0; i < NUM_CHARS; i++)
  {
    if(str1_count[i] != str2_count[i])
      { return false; }
  }

  return true;
} 
```

具体来说，这行是如何`str1_count[str2[i] - 'a']++`在 Python 中完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T00:02:14.670

> 具体来说，这行是如何`str1_count[str2[i] - 'a']++`在 Python 中完成的？

它不是。Python`dict`可以处理这样的事情。

```
str1_count = {}
 ...
str1_count[char2] += 1 
```

虽然`collections.defaultdict`通常用于处理它是新密钥的情况。

```
str1_count = collections.defaultdict(int) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T00:18:35.933

考虑一下 Python 中的这个简单的字谜检查器

```
from collections import Counter
def are_anagrams(str1, str2):
    return Counter(str1) == Counter(str2) 
```

您如何将其转换为C？（这使用与您的 C 版本相同的算法）

要回答您的问题，您必须使用`ord()`

```
str1_count[ord(str2[i]) - ord('a')] 
```

看起来像 str1/str2 命名的错误

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T01:18:26.380

甚至更好，

```
def are_anagrams(s1, s2):
    return sorted(s1)==sorted(s2) 
```

.

**编辑：**回应@gnibbler：

这是一个快速的运行时比较，其中 x 轴给出字符串长度；蓝色是你的功能，绿色是我的。在我看来，两者都非常线性。

![图比较函数运行时间](../Images/c475577a1d33fe91270877fdd4ed069f.png)

# ruby-on-rails - 使用 Omniauth 为没有 STI 的多个模型设计

> ID：11286560
> 
> 赞同：9
> 
> 时间：2012-07-02T00:00:10.320
> 
> 标签：ruby-on-rails, devise, omniauth

有没有办法为没有 STI 的多个模型配置 Devise Omniauth？

我们有学生和教授模型，我们不想使用 STI，但现在我们意识到使用 Omniauth 进行设计并不能很好地处理多个模型。

```
.rvm/gems/ruby-1.9.3-p125/gems/devise-2.1.0/lib/devise/rails/routes.rb:384:in `devise_omniauth_callback': Wrong OmniAuth configuration. If you are getting this exception, it means that either: (RuntimeError)

1) You are manually setting OmniAuth.config.path_prefix and it doesn't match the Devise one
2) You are setting :omniauthable in more than one model
3) You changed your Devise routes/OmniAuth setting and haven't restarted your server 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-06T12:28:49.427

嗨，我来这里遇到了类似的问题，我遇到了这个解决方案，也许我会帮助下一个。在我的情况下，我有两个设计模型，我以不同的方式使用omniauth，我的第一个模型是可以通过普通设计注册或omniauth登录的用户，第二个是艺术家，他可以通过常规注册唱歌表格，但我仍然需要omniauth来验证来自twitter的值，验证字段（对twitters个人资料的小检查意味着如果一个著名的用户真的是那个人）。

所以当我来的时候，我不能有两个设计的omniauthable模型，我只是决定对两者都使用相同的omniauth。

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def all
    if artist_signed_in? and session["devise.authorize"] == current_artist.email
      session["devise.authorize"] = nil
      if current_artist.artist_profile.update_from_omniauth(request.env["omniauth.auth"])
        if current_artist.artist_profile.verified
          flash[:notice] = "You were verified"
        else
          flash[:alert] = "Twitter go well but you aren't verified there"
        end
        redirect_to edit_artist_profile_path(current_artist.artist_profile)
      else
        flash[:error] = "We can't connect with #{request.env["omniauth.auth"].provider.titleize.split(" ").first}"
        redirect_to edit_artist_profile_path(current_artist.artist_profile)
      end
    elsif !user_signed_in?
      user = User.from_omniauth(request.env["omniauth.auth"])
      if user.persisted?
        flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => user.provider.titleize.split(" ").first
        user.user_profile.from_omniauth(request.env["omniauth.auth"])
        sign_in_and_redirect user, :event => :authentication
      else
        session["count_errors"] = 0 if session["devise.user_attributes"] == nil
        session["devise.user_attributes"] = user.attributes
        redirect_to new_user_registration_url
      end
    else
      flash[:notice] = "You are already log in #{current_user.email}"
      redirect_to root_path
    end
  end

  def after_omniauth_failure_path_for(scope)
    if artist_signed_in? and session["devise.authorize"] == current_artist.email
      session["devise.authorize"] = nil
      edit_artist_profile_path(current_artist.artist_profile)
    else
      super
    end
  end

  alias_method :twitter, :all
end 
```

对于第一种情况，普通用户，我们有

```
elsif !user_signed_in? 
```

它将执行正常过程，一切都像每个指南一样，但是对于第二种情况（经过验证的字段和艺术家资料），我发送了一个带有一些随机值的小会话

```
session["devise.authorize"] 
```

我用我的艺术家资料控制器中的新路线调用链接

```
<%= link_to "Verify with Twitter", artist_profiles_integrate_twitter_path %> 
```

谁加载会话并重定向到用户omniauth 路由

```
class ArtistProfilesController < ApplicationController
   ...
   def integrate_twitter
      session["devise.authorize"] = current_artist.email
      redirect_to user_omniauth_authorize_path(:twitter)
   end
 end 
```

然后我在每个类中定义了几个使用omniauth的方法，第一个创建用户（基于railscast剧集“devise-omniauth-revised”），第二个只是更新我的艺术家档案模型上的字段，你应该覆盖after_omniauth_failure_path_for （范围），这只是返回登录失败的路径，使用与更改后错误路径相同的技术（例如，当与 twitter 连接失败时，它将重定向到用户注册路径，并且会话将围绕一段时间）我们可以有正常的行为并在所有情况下清理会话。

希望它有帮助，*问候！*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-20T18:19:12.617

目前，Devise 的 Omniauthable 模块不适用于多个模型。（[https://github.com/plataformatec/devise/wiki/OmniAuth-with-multiple-models](https://github.com/plataformatec/devise/wiki/OmniAuth-with-multiple-models)）简而言之，您需要停止依赖设计通过“omniauthable”来发挥其魔力，并手动完成。这并不复杂，一旦你让第一个模型在 middelware 上工作，那么很明显如何扩展多个模型，因为它归结为具有不同模型名称的完全相同的代码。

需要的步骤：

1.  从 devise.rb 和使用的模型中删除omniauthable 和设计omniauth 设置
2.  将 oauth 包含为中间件（这样您就可以在请求到达 Rails 之前捕获它）
3.  编写手动路线 - 简单易行
4.  处理响应 - 与您现在拥有的代码相同
5.  处理失败场景（在 oauth 提供者上被拒绝） - middelware 设置中的另一个块

我解决了类似的问题，我在这里有详细的解释： https: //blog.kodius.io/2016/12/20/devise-omniauth-multiple-models/ 中间件oauth设置的代码在这里：[https :](https://blog.kodius.io/2016/12/20/devise-omniauth-multiple-models/) [//github.com /kodius/oauth-example-multiple-models](https://github.com/kodius/oauth-example-multiple-models)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-28T13:10:50.623

目前，Devise 的 Omniauthable 模块不适用于多个模型。不过不用担心，因为 Omniauthable 模块只是 OmniAuth 的简单包装器。

[https://github.com/plataformatec/devise/wiki/OmniAuth-with-multiple-models](https://github.com/plataformatec/devise/wiki/OmniAuth-with-multiple-models)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T07:00:15.527

我认为而不是写信`:omniauthable`给个人`Student`& `Professor model`。您应该生成第三个模型`Omniuser`并为其添加`:omniauthable`设置。

```
class Student < ActiveRecord::Base
  has_one :omniuser
end

class Professor < ActiveRecord::Base
  has_one :omniuser
end 
```

# vpn - 为什么在使用远程桌面连接之前需要使用 VPN 客户端？

> ID：11286563
> 
> 赞同：-1
> 
> 时间：2012-07-02T00:00:19.493
> 
> 标签：vpn, mstsc

要访问远程数据库，我首先必须使用一个名为“Shrew Soft VPN Access Manager”的程序，然后我转到 MSTSC（远程桌面连接）。

但这是为什么呢？为什么我不能简单地登录远程桌面连接程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:32:48.670

我现在正在阅读[VPN](http://en.wikipedia.org/wiki/Virtual_private_network)。诚然，这个问题准备得不够充分，而且过于模糊。我会听迈克尔上面的建议。

至于 ShrewSoft——可能是出于安全原因。

# c# - 使用 CommandArgument 访问 GridView 的内部 DropDownList.SelectedValue

> ID：11286569
> 
> 赞同：0
> 
> 时间：2012-07-02T00:01:26.120
> 
> 标签：c#, asp.net, .net, gridview

当 DropDownList "eventnoteEditDrpDwnLst" 的值设置为 "Custom..." 时，我想在 GridView 中将 "Visible = true" 设置为 TextBox "eventnoteAddTextBox"

```
<asp:GridView ID="grid" runat="server"
...
    OnRowCommand="grid_RowCommand"
    ShowFooter="True">
<columns>
...
<asp:TemplateField HeaderText="Event">
<ItemTemplate>
    <asp:Label ID="eventnoteLbl" runat="server" Text='<%# Bind("eventnote") %>'></asp:Label>
</ItemTemplate>
<EditItemTemplate>
    <asp:DropDownList ID="eventnoteEditDrpDwnLst" runat="server" DataTextField="eventnote" DataValueField="eventnote"></asp:DropDownList>
</EditItemTemplate>
<FooterTemplate>
    <asp:DropDownList ID="eventnoteAddDrpDwnLst" runat="server" DataTextField="eventnote" DataValueField="eventnote" CommandName="AddCustomEventNote" CommandArgument="<%# ??? eventnoteAddDrpDwnLst.SelectedText ??? %>"></asp:DropDownList>
    <asp:UpdatePanel ID="eventnoteAddUpdatePanel" runat="server" RenderMode="Block">
    <ContentTemplate>
        <asp:TextBox ID="eventnoteAddTextBox" runat="server" DataTextField="eventnote" DataValueField="eventnote" Visible="False"></asp:TextBox>
    </ContentTemplate>
    </asp:UpdatePanel>
</FooterTemplate>
</asp:TemplateField>
...
</columns>
</asp:GridView> 
```

代码隐藏

```
protected void grid_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("AddCustomEventNote"))
    {
        DropDownList eventnoteAddDrpDwnLst = (DropDownList)e.CommandSource;
        if (eventnoteAddDrpDwnLst.SelectedValue == "Custom...")
            Response.Write("<script>alert('It works!');</script>");
            //grid.FooterRow.FindControl("eventnoteAddTextBox").Visible = true;
    }
} 
```

这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:57:14.687

这应该这样做

```
protected void grid_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("AddCustomEventNote"))
    {
        DropDownList eventnoteAddDrpDwnLst = (DropDownList)grid.FooterRow.FindControl("eventnoteAddDrpDwnLst");

        string value = eventnoteAddDrpDwnLst.SelectedValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:35:45.540

实际上应该有 AutoPostBack 和一个单独的调用函数`<asp:DropDownList>`。它可以被覆盖，`<asp:UpdatePanel RenderMode="Block">`也`<asp:ScriptManager EnablePartialRendering="true">`可以平滑。

```
<asp:DropDownList ID="eventnoteAddDrpDwnLst" runat="server" DataTextField="eventnote" DataValueField="eventnote" AutoPostBack="true" OnSelectedIndexChanged="eventnoteAddDrpDwnLst_SelectedIndexChanged" /> 
```

代码隐藏很简单：

```
protected void eventnoteAddDrpDwnLst_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList eventnoteAddDrpDwnLst = (DropDownList)grid.FooterRow.FindControl("eventnoteAddDrpDwnLst");
        if (eventnoteAddDrpDwnLst.SelectedValue == "Custom...")
            grid.FooterRow.FindControl("eventnoteAddTextBox").Visible = true;
        else
            grid.FooterRow.FindControl("eventnoteAddTextBox").Visible = false;
    } 
```

真的行！**DropDownList 没有 CommandArgument！**

# android - AVD - Android 不关心设置方向

> ID：11286575
> 
> 赞同：0
> 
> 时间：2012-07-02T00:02:39.490
> 
> 标签：android, landscape

您好，我将方向设置为横向（通过 Eclipse 图标翻转方向），但是当我运行应用程序时，方向仍然是标准的（在 Eclipse 中它正确显示为横向）。为什么会这样？

![在此处输入图像描述](../Images/d0bd7dc0fc8bb3a9399bb16035eef7ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:02:04.657

在您的清单文件中，在活动标签下，写入

```
android:screenOrientation="landscape" 
```

这应该将方向设置为横向。

# c - 可变参数函数未正确解析参数

> ID：11286576
> 
> 赞同：2
> 
> 时间：2012-07-02T00:03:03.207
> 
> 标签：c, variadic-functions

我正在尝试用 C 语言制作一个简单的加法计算器，以学习如何使用不定参数。以下编译正确，但输出总是不正确，我不知道如何调试它。任何指针都会很棒。

```
#include <stdio.h>
#include <stdarg.h>

int calculateTotal(int n, ...)
{

    //declartion of a datatype that would hold all arguments
    va_list arguments;

    //starts iteration of arguments
    va_start (arguments, n);

    //declarion of initialization for 'for loop'
    //declation of accumulator
    int i = 0;
    int localTotal = 0;

    for(i; i < n; i++)
    {
        //va_arg allows access to an individual argument
        int currentArgument = va_arg(arguments, int);
        localTotal += currentArgument;
    }

    //freeing the declaration of the datatype that holds the information
    va_end(arguments);

    return localTotal;
}

int main()
{
    int total = calculateTotal(56,7,8);
    printf("Total > %d\n",total);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T00:06:23.200

您将 56 作为第一个参数而不是 2 传递。然后该函数将 56 解释为参数的数量，并在初始化区域之后继续读取其“参数”。

当您修改调用传递 2 时，[函数返回的结果是 15](http://ideone.com/2pTT6)。

# c++ - 在 Win32 C++ 代码中的哪个位置放置 SetMenuItemInfo() 以根据焦点启用/禁用？

> ID：11286583
> 
> 赞同：1
> 
> 时间：2012-07-02T00:04:01.693
> 
> 标签：c++, winapi, menuitem, paste

我正在为 VS 2010 Pro 中的 Win32 编写 C++ 应用程序。该应用程序包含一个带有**粘贴项的****编辑**菜单，应用程序的主窗口包含一个文本框控件。所有常规的剪切/复制/粘贴命令都在该控件中运行良好——这恰好是应用程序唯一的用户可编辑字段。

 **我想在文本框控件中没有光标闪烁的情况下禁用**粘贴**菜单项——即文本框没有焦点时——因为当文本框不是“活动”控件时，没有剪切/复制/粘贴操作是可能的。

我可以使用以下代码启用/禁用菜单项（正如我通过在菜单创建后立即将此代码段放置在 WM_CREATE 中测试的那样——作为测试）。我不知道将代码放在我的程序中的哪个位置，以便在正常的用户事件（如鼠标单击）过程中调用它，这会将焦点从/返回到文本框。

```
MENUITEMINFO mii = { sizeof(MENUITEMINFO) };
mii.fMask = MIIM_STATE;
GetMenuItemInfo(hMenu, ID_EDIT_PASTE, FALSE, &mii);
mii.fState ^= MFS_DISABLED;
SetMenuItemInfo(hMenu, ID_EDIT_PASTE, FALSE, &mii); 
```

将代码放置在正确的位置后，我计划将其嵌入到**if**语句中，以便仅在应用程序的文本框没有焦点时运行（禁用菜单项）：

```
if(GetFocus() != hWndTextbox) 
```

也许在我的**CALLBACK switch(msg)**部分中有一个**case**语句，它应该全部驻留在哪里？我还在学习基本的 C++ Win32 程序结构。谢谢！

 **（PS 两个资源帮助我做到了这一点：[从初学者的角度检查菜单](http://www.codeproject.com/Articles/7503/An-examination-of-menus-from-a-beginner-s-point-of)，[如何判断窗口是否有焦点？（Win32 API）](https://stackoverflow.com/questions/466354/how-can-i-tell-if-a-window-has-focus-win32-api)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T02:26:26.363

我认为您正在寻找[WM_INITMENUPOPUP](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646347%28v=vs.85%29.aspx)。这是在菜单即将显示时发送的，因此您可以进行任何必要的检查并适当地启用/禁用菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:26:29.563

所以你想在编辑控件没有焦点/失去焦点时禁用菜单？

在您的 WndProc 中，Edit 控件以 WM_COMMAND 的形式发送通知，您会感兴趣的两个是： EN_KILLFOCUS - 当控件失去键盘焦点时 EN_SETFOCUS - 当控件获得键盘焦点时。****

# sql - Postgresql 在月份范围之间选择

> ID：11286592
> 
> 赞同：8
> 
> 时间：2012-07-02T00:05:35.197
> 
> 标签：sql, postgresql, date, select, date-range

我有一个表格，其中一列是“YYYY-MM-DD”格式的日期。我可以使用 select 获取每月范围内的所有数据吗？假设我想要从 2012-01-xx 到 2013-04-xx 的所有数据。所以我基本上是在寻找如下所示的 SQL 查询：

```
SELECT * FROM table WHERE date IN BETWEEN '2012-01' AND '2013-04' (INVALID QUERY) 
```

由于每个月都以“01”开头，因此我可以修改上述查询以调整开始条件。

```
SELECT * FROM table WHERE date IN BETWEEN '2012-01-01' AND '2013-04' (INVALID QUERY) 
```

现在问题与结束日期有关。我必须手动计算给定月份的最后日期，并考虑所有因素，如月份长度、闰年等，因为如果给定日期无效，查询将失败。所以目前我正在做这样的事情：

```
SELECT * FROM table WHERE date IN BETWEEN '2012-01-01' AND 'VALID_MONTH_END_DATE' (VALID Query) 
```

我想知道是否有任何方法可以避免这种有效的结束日期计算？

**澄清**

我已经想到了下个月的第一天，但​​即使那样我也必须应用一些逻辑，如果是 12 月，下个月将是明年的 1 月。我想知道是否可以使用仅 SQL 的解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T00:13:17.220

最好避免`BETWEEN`日期范围比较。更好地使用`>=`，`<`因为它同样适用于日期和日期时间列/值。

一种方法（如果您可以在外部构建日期）：

```
WHERE date >= DATE '2012-01-01' 
  AND date < DATE '2013-05-01'      --- first date of the next month 
```

您还可以使用日期算术：

```
WHERE date >= DATE '2012-01-01' 
  AND date < DATE ('2013-04-01' + INTERVAL '1 MONTH') 
```

或`OVERLAPS`运营商：

```
WHERE (date, date) OVERLAPS
      (DATE '2012-01-01', DATE '2013-05-01') 
```

您还应该阅读 Postgres 文档：[日期/时间函数和运算符](http://www.postgresql.org/docs/9.1/static/functions-datetime.html)

该[手册在这里解释了](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)为什么这样`OVERLAPS`工作：

> 每个时间段都被认为表示半开区间 start <= time < end，除非 start 和 end 相等，在这种情况下它表示单个时间瞬间。这意味着例如只有一个共同端点的两个时间段不重叠。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T00:20:59.817

这是报告环境中非常常见的需求。我创建了几个函数来适应这些日期操作

```
CREATE OR REPLACE FUNCTION public.fn_getlastofmonth (
  date
)
RETURNS date AS
$body$
begin
    return (to_char(($1 + interval '1 month'),'YYYY-MM') || '-01')::date - 1;
end;
$body$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER
COST 100; 
```

然后你可以使用...

```
WHERE date >= '2012-01-01' 
  AND date < fn_getlastofmonth('2013-04-01') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T00:15:01.843

没有尝试过但值得一试

```
SELECT * 
FROM some_table 
WHERE some_date 
BETWEEN '2012-01-01' AND date('2013-04-01') - integer '1' 
```

[http://www.postgresql.org/docs/9.1/static/functions-datetime.html](http://www.postgresql.org/docs/9.1/static/functions-datetime.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T00:52:28.870

上面的所有答案都提供了一个可行的解决方案，但以某种方式不完整。由于我一直在寻找仅 SQL 的解决方案（无功能），因此我结合了上述解决方案中的最佳技巧。

我的问题的理想解决方案是：

```
SELECT * FROM table
WHERE date >= '2012-01-01' AND date < date('2013-04-01') + interval '1 month' 
```

**编辑**

我在这里没有使用重叠函数，因为我将开始和结束的默认日期值作为“纪元”和“现在”传递。如果用户未指定任何时间范围，则查询变为：

```
SELECT * FROM table
WHERE date >= 'epoch' AND date < 'now' 
```

Overlap 函数无法处理 'epoch' 和 'now' 并给出 SQL 错误，而上面的代码在这两种情况下都能完美运行。

PS：我已经在某种程度上支持了所有正确的答案，并引导我找到了这个解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:56:00.687

```
SET search_path=tmp;

DROP TABLE zdates;
CREATE TABLE zdates
        ( zdate timestamp NOT NULL PRIMARY KEY
        , val INTEGER NOT NULL
        );
-- some data
INSERT INTO zdates(zdate,val)
SELECT s, 0
FROM generate_series('2012-01-01', '2012-12-31', '1 day'::interval ) s
        ;

UPDATE zdates
SET val = 1000 * random();

DELETE FROM zdates
WHERE random() < 0.1;

-- CTE to round the intervals down/up to the begin/end of the month
WITH zope AS (
        SELECT date_trunc('month', zdate)::date AS zbegin
        ,  date_trunc('month', zdate+interval '1 month')::date AS zend
        , val AS val
        FROM zdates
        )
SELECT z.zbegin
        , z.zend
        , COUNT(*) AS zcount
        , SUM(val) AS zval
FROM zope z
GROUP BY z.zbegin, z.zend
ORDER BY z.zbegin, z.zend
        ; 
```

结果：

```
CREATE TABLE
INSERT 0 366
UPDATE 366
DELETE 52
   zbegin   |    zend    | zcount | zval  
------------+------------+--------+-------
 2012-01-01 | 2012-02-01 |     28 | 13740
 2012-02-01 | 2012-03-01 |     28 | 14923
 2012-03-01 | 2012-04-01 |     26 | 13775
 2012-04-01 | 2012-05-01 |     25 | 11880
 2012-05-01 | 2012-06-01 |     25 | 12693
 2012-06-01 | 2012-07-01 |     25 | 11082
 2012-07-01 | 2012-08-01 |     26 | 13254
 2012-08-01 | 2012-09-01 |     28 | 13632
 2012-09-01 | 2012-10-01 |     28 | 16461
 2012-10-01 | 2012-11-01 |     23 | 12622
 2012-11-01 | 2012-12-01 |     24 | 12554
 2012-12-01 | 2013-01-01 |     28 | 14563
(12 rows) 
```

# python - subprocess.Popen() - p.stdout.read() 和 p.wait() 的顺序是否重要？

> ID：11286594
> 
> 赞同：2
> 
> 时间：2012-07-02T00:05:52.873
> 
> 标签：python, subprocess

关于 Python 的 subprocess.Popen() 对象的问题
（请假设为 stdout/stderr 生成的字节数没有填满 OS 管道缓冲区并创建死锁以等待 OS 管道缓冲区接受更多数据）

1) p.stdout.read() 和 p.wait() 的顺序是否重要？

2) stdout/stderr subprocess.PIPE 上的 read() 是否会阻塞，直到进程终止？

3) 即使在进程终止后，stdout/stderr subprocess.PIPE 文件对象和数据是否可用？

```
import subprocess
process = subprocess.Popen(args="ls", stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
stdout = process.stdout.read()
# Does the above read() block until the process has terminated?
stderr = process.stderr.read()
return_code = process.wait()

process = subprocess.Popen(args="ls", stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
return_code = process.wait() 
# Are stdout and stderr pipes available now, even after the process terminated?
stdout = process.stdout.read()
stderr = process.stderr.read() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T00:13:07.813

问：p.stdout.read() 和 p.wait() 的顺序有关系吗？
答：没有。

问：stdout/stderr subprocess.PIPE 上的 read() 是否会阻塞，直到进程终止？
A：如果没有指定要读取的字节数限制，那么它将阻塞直到流关闭（这很可能是在进程终止时）。

问：即使在进程终止后，stdout/stderr subprocess.PIPE 文件对象和数据是否可用？
答：是的。

您可能需要特别注意`subprocess`文档中的此警告：

> 警告：这将在使用`stdout=PIPE`和/或时发生死锁，`stderr=PIPE`并且子进程会向管道生成足够的输出，从而阻塞等待 OS 管道缓冲区接受更多数据。用来`communicate()`避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:17:57.603

您可能需要考虑使用类似的库[`sarge`](http://sarge.readthedocs.org/en/latest/tutorial.html#capturing-stdout-and-stderr-from-commandshttp://sarge.readthedocs.org/en/latest/tutorial.html#capturing-stdout-and-stderr-from-commands)，以便在对子进程进行 I/O 时提供灵活性。（披露：我是维护者。我写它部分是为了回应你遇到的那种困难。）

# jquery - 存储在片段中的元素内的目标元素

> ID：11286597
> 
> 赞同：0
> 
> 时间：2012-07-02T00:06:11.047
> 
> 标签：jquery

在这种情况下，我不确定如何定位我想要的元素：

```
 var $div = $(".row-container").filter(function() {
        return $(this).data("i") == product_id;
        // where value == product id to find
      }); 
```

现在，within`$div`是一个具有`'price-row'`我想要的类的元素。`$div.hasClass('price-row')`只返回真或假值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T00:07:55.290

[`.find`](http://api.jquery.com/find)如果它是子元素则使用：

```
var $div = $(".row-container").filter(function() {
    return $(this).data("i") == product_id; // where value == product id to find
})**.find('.price-row')**;
```

如果您的意思是匹配元素将在该集合中，请将其包含在开始的条件中：

```
var $div = $(".row-container**.price-row**").filter(function() {
    return $(this).data("i") == product_id; // where value == product id to find
});
```

# sql - 确定 SQL Server 中的一致性百分比

> ID：11286598
> 
> 赞同：3
> 
> 时间：2012-07-02T00:06:13.123
> 
> 标签：sql, sql-server

我试图弄清楚如何确定表中不同条目的值匹配的时间百分比。例如，使用以下简单表：

```
User     Question   Answer
-----------------------------------
Tony      1         Yes
Bill      1         No
Jeff      2         Cat
Tony      2         Dog
Bill      2         Dog
Tony      3         No 
```

我想写一个查询，告诉我托尼和比尔在他们都回答的两个问题上同意 50% 的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T01:02:38.953

`'Tony'`是 User1 参数，

`'Bill'`是 User2 参数：

* * *

```
SELECT
    COUNT(CASE WHEN a.user = 'Tony' THEN 1 ELSE NULL END) AS U1_Total_Questions,
    COUNT(CASE WHEN a.user = 'Bill' THEN 1 ELSE NULL END) AS U2_Total_Questions,
    COUNT(CASE WHEN b.user IS NOT NULL THEN 1 ELSE NULL END) AS Total_Same_Questions,
    COUNT(CASE WHEN a.answer = b.answer THEN 1 ELSE NULL END) AS Total_Matched_Answers,
    (COUNT(CASE WHEN a.answer = b.answer THEN 1 ELSE NULL END) / COUNT(CASE WHEN b.user IS NOT NULL THEN 1 ELSE NULL END)) * 100 AS Percentage_Agreement
FROM 
    answertbl a
LEFT JOIN
    answertbl b ON a.question = b.question AND a.user = 'Tony' AND b.user = 'Bill' 
```

## -

```
U1_Total_Questions  U2_Total_Questions  Total_Same_Questions    Total_Matched_Answers   Percentage_Agreement
------------------------------------------------------------------------------------------------------------
3                   2                   2                       1                       50.0000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:15:33.330

```
select
  count(case when t1.Answer = t2.Answer then 1 else null end) * 1.0 / count(*)
from
  t t1
  inner join t t2 on t1.Question = t2.Question
where
  t1.[User] = 'Tony'
  and t2.[User] = 'Bill' 
```

# php - 否则/如果比较问题

> ID：11286602
> 
> 赞同：0
> 
> 时间：2012-07-02T00:07:07.087
> 
> 标签：php

我有一个金发的时刻，这是我的问题：

分解：

我有一个 5 张图片的编辑页面，当你点击图片时，它会消失并出现一个上传新图片框。我现在正在为图像代码的更新撞墙。我需要一些帮助来检查图像是否已更改，或者图像是否已被选择删除并删除该图像。

所以它就像这样现有图像>单击以更改或复选框以删除，如果更改则更新新图像并发布回声说图像已更新，如果图像未更改则不执行任何操作或执行某些操作，如果未更改并且已检查删除。

下面的代码块将为每个图像复制：

```
$image_new  = "test_new_image"; // New file name
$image_hidden  = "test_db_image"; // This is the existing image name in a hidden input
$image_db = "test_db_image"; // Image name in the DB

if ($image_hidden == $image_db) {
    echo "leave image as is in the db<br>";
} elseif ($image_new != $image_db) {
    echo "change image in the db and delete existing image<br>";
} else {
    echo "New image!<br>";
} 
```

或者，如果有人有更好的代码来做我想做的事情会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:35:30.073

```
//check if variables are empty, else set them null
$image_new  = (!empty($image_new)) ? $image_new : null;
$image_db  = (!empty($image_db)) ? $image_db : null; 
```

如果此时你知道数据库中的image_name，隐藏字段的值会不会一样？在这种情况下，像这样比较 old_name 和 new_name 就足够了：

```
//image_new is the same as image_db
if( $image_new === $image_db){
  //leave image as is in the db
}
//there is a new image and it's not the same as image_db
elseif( $image_new !== null && $image_new !== $image_db ){
  //change image in the db and delete existing image (image_db)
}
//there is a new image, and there is nothing in db, yet
elseif( $image_new !== null && $image_db === null ){
  //new image
}
//anything else
else{
  //no image
} 
```

# ios - iOS avplayer 语音备忘录修剪样式洗涤器

> ID：11286606
> 
> 赞同：0
> 
> 时间：2012-07-02T00:07:45.263
> 
> 标签：ios, video, avplayer

我使用 AVPlayer 作为视频编辑应用程序的接口。

是否有与 Voice Memos Trim Memo 擦洗器风格相似的擦洗器（但用于视频）？

![音频修剪](../Images/944bee5481a2a35a5c25a0785a4ab625.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:22:41.587

[BJRangeSlider](http://cocoacontrols.com/platforms/ios/controls/bjrangesliderwithprogress)是一个实现相同目标的控件（尽管使用不同的 UI），但我认为子类化不会太难。

# javascript - 为什么 JavaScript 不能读取这个 C# 变量？

> ID：11286607
> 
> 赞同：0
> 
> 时间：2012-07-02T00:07:50.477
> 
> 标签：javascript, asp.net, .net

我正在尝试在 JavaScript 中读取 C# 属性（不使用 Ajax）。在 C# 中，我在页面加载时设置属性。我试着像这样阅读这个属性：

```
<script type="text/javascript">
    var ProductId =<%=this.ProductId %>>
    alert(ProductId);   // not successful alert showed undefiend

    function GetValueNow()
    {
        alert(<%=this.ProductId%>); // calling this function was showing value
    }
</script> 
```

我尝试在页面加载时（在页面的 JavaScript 中`.aspx`）访问此属性，但没有成功。后来，我尝试在 JavaScript 函数中执行此操作，并且成功了。

为什么我不能在正文之前读取变量`GetValueNow()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T00:10:14.437

你有一个额外的`>`标志：

从：

```
var ProductId =<%=this.ProductId %>> 
```

至：

```
var ProductId = <%=this.ProductId %>; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T00:10:23.413

看起来这只是一个错字。

```
 var ProductId =<%=this.ProductId %>> 
```

应该：

```
 var ProductId =<%=this.ProductId %>; 
```

# c++ - 函数返回类型名列表有什么问题 ::迭代器？

> ID：11286615
> 
> 赞同：-1
> 
> 时间：2012-07-02T00:09:04.493
> 
> 标签：c++, list, templates, stl, iterator

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我已经写了：

```
template<class T> 
typename list<T>::iterator partition(list<T> &, list<T>::iterator, list<T>::iterator); 
```

但我的编译器发现了一个错误：

> 错误：'std::list::iterator' 不是类型

这个功能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:13:40.477

尝试：

```
 template<class T> 
 typename list<T>::iterator partition(list<T> &, typename list<T>::iterator, typename list<T>::iterator);
                                                 ^^^^^^^^                    ^^^^^^^^ 
```

# mysql - MySql：如何通过my.cnf开启通用查询日志？

> ID：11286626
> 
> 赞同：4
> 
> 时间：2012-07-02T00:10:50.610
> 
> 标签：mysql, logging, xampp, directory-structure, mysqladministrator

我正在尝试使用一个名为 MySql Administrator 的程序，尽管我也愿意使用命令提示符（我在 Windows XP 上）。通常，我通过 XAMPP 控制面板启动 MySql，并且我想让 MySql 监视对我的至少两个数据库的更改。因为我没有做很多更改，所以始终保持打开日志不会成为问题。

理想情况下，对数据库所做的更改将通过一个日志文件可见，该日志文件在每次进行查询时都会更新。如果这是不可能的，能够通过 MySql Administrator 或通过 MySql 命令行进行检查就可以了。不过，我不确定如何将 MySql 配置为始终以登录开始。那可能吗？如果是这样，它是如何完成的？请告诉我需要编辑的文件的具体位置。我被告知要编辑 my.cnf，但 MySql 的子目录中有许多 my.cnf 类型的文件。所以，我需要知道具体要做什么，没有任何歧义......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T00:57:35.773

您可以通过 MySQL Administrator 在 settings->logging 选项卡中启用它，但我认为这实际上并没有启用日志记录。当我打开它，重新启动 MySQL，重新启动 MySQL Administrator，重新启动我的系统等时，日志文件从未出现过。我在 MySQL 基础目录中编辑了 my.ini 文件。我找到了该行`log=`并对其进行了更改，并在之后添加了几行：

```
log = "you_name_it_query.log"
general-log=1
general-log-file = "you_name_it_query.log" 
```

然后我可以通过 MySQL 管理员浏览一般查询日志。

我还使用了这里提到的一些程序：[https](https://superuser.com/questions/443499/detect-and-monitor-changes-to-mysql-database) ://superuser.com/questions/443499/detect-and-monitor-changes-to-mysql-database和这里​​：[比较两个 MySQL 数据库](https://stackoverflow.com/questions/225772/compare-two-mysql-databases)。提问者提到的一些程序中有一些日志记录选项。

# svn - mercurial 存储库是否必须完全克隆或者我可以获得子树？

> ID：11286628
> 
> 赞同：4
> 
> 时间：2012-07-02T00:11:19.100
> 
> 标签：svn, mercurial

我将一个颠覆存储库迁移到了 mercurial。svn 存储库包含几个项目，它们位于我本地系统的不同位置。我不知道我应该如何以这种方式工作。看起来，善变的人希望我总是想把整棵树都检查到一个地方。

是否可以只签出特定的子树？

如果没有，那么我需要以某种方式将我的单个 subversion 存储库的一部分导入到多个 mercurial 存储库中。我将如何去做（当然不会丢失颠覆的历史信息）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:18:27.123

Mercurial 不支持签出子树。[ConvertExtension](http://mercurial.selenic.com/wiki/ConvertExtension) （包含在Mercurial 中）用于转换存储库，也可用于执行过滤，其中可以重新映射或修剪用户、文件和目录。具体参见`--filemap`从源存储库中包含/排除特定分支的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T08:22:05.693

正如 Mark 所提到的，**转换**扩展可以完成[其 wiki 页面上](https://www.mercurial-scm.org/wiki/ConvertExtension#Converting_from_Mercurial)解释的工作，因此要将存储库“foo”的子目录“subfoo”转换为它自己的存储库，请执行以下操作：

```
echo include subfoo > filemap.txt
echo rename subfoo . >> filemap.txt
hg convert --filemap filemap.txt path/to/foo newsubfoo-repo 
```

另一个可以帮助您进行各种存储库转换的工具是**[reposurgeon](http://www.catb.org/esr/reposurgeon/)。**

还有一个全新的**[narrowng](https://bitbucket.org/Google/narrowhg)**扩展来做这件事，但目前还不清楚它是否准备好生产。

# oracle - oracle 表未锁定

> ID：11286630
> 
> 赞同：2
> 
> 时间：2012-07-02T00:11:40.337
> 
> 标签：oracle

我正在学习 Oracle 锁。

在一个会话中

```
lock table countries in ROW Exclusive mode nowait; 
```

在另一个会话中，我更新了counties 表。

```
SQL> update countries set country_name = 'ddd';
25 rows updated. 
```

我所期望的是会话将挂起。你知道为什么吗 ？

我检查了 EM，我确实看到了锁。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T00:21:36.620

排独家

实际上并没有完全锁定表。

`ROW EXCLUSIVE`并`ROW SHARE`允许并发访问，但防止其他人锁定整个表以进行独占访问。Exclusive 还禁止其他操作在 SHARE 模式下锁定表。

如果您想锁定表格，而不是读取；你需要省略 ROW 所以

```
LOCK TABLE countries 
    IN EXCLUSIVE MODE 
    NOWAIT; 
```

这里还有更多示例：http: [//docs.oracle.com/cd/B14117_01/server.101/b10759/statements_9015.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10759/statements_9015.htm)

# c# - 是否可以将音频文件与我的 c# 文件一起编译成单个 exe？

> ID：11286633
> 
> 赞同：1
> 
> 时间：2012-07-02T00:13:05.413
> 
> 标签：c#, audio, exe

所以我有一个脚本，它在运行时会播放我当前在同一文件夹中的音频文件。我想将这两个合并为一个.exe，但我不确定这是否可能。有谁知道这方面的具体情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:27:08.250

快速简便的方法是：

1.  打开 Visual Studio。
2.  启动一个新的 C# 项目。
3.  向项目中添加一个新的资源文件（如果没有自动在设计器中打开它）。
4.  单击窗口顶部的“添加资源”按钮，然后选择您的声音文件。
5.  编写代码来播放文件（我假设脚本可以移植到这里，如果您需要帮助，请告诉我们）。要访问文件，请使用`Namespace.ResourceFile.FileName`Namespace 是项目的命名空间，ResourceFile 是您添加的资源文件的名称（默认为“Resource1.resx”），FileName 是您添加的文件的名称。

如果在添加声音文件后检查窗口左上角的按钮，这将使事情变得更容易。尽管窗口经常打开到“字符串”，但它将是“文件”或“音频”。记下当前所说的内容，以便稍后切换回此视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:28:48.057

是的，您可以，只需将音频文件的 Build Action 属性设置为 Embedded Resource。我想您已经将音频文件添加到您的项目中以右键单击它>属性然后执行我上面所说的操作。（虽然我认为这不是一个好习惯）
希望它会有所帮助

# objective-c - NSUndoManager：重做不起作用

> ID：11286637
> 
> 赞同：6
> 
> 时间：2012-07-02T00:13:35.093
> 
> 标签：objective-c, cocoa, nsundomanager, nsslider

我正在制作一个使用 NSSlider 的简单应用程序，可以使用两个按钮将其设置为最大值或最小值。撤消管理器应跟踪所有更改并允许撤消/重做使用这两个按钮所做的所有更改。
这是界面：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>
{
@private
    NSUndoManager* undoManager;
}

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet NSSlider *slider;

- (IBAction)putToMax:(id)sender;
- (IBAction)putToMin:(id)sender;
- (void) setSliderValue: (float) value;

@end 
```

执行：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize slider = _slider;

- (NSUndoManager*) windowWillReturnUndoManager: (NSWindow*) window
{
    return undoManager;
}

- (IBAction)putToMax:(id)sender 
{
    float value= [_slider floatValue];
    [ [undoManager prepareWithInvocationTarget: self] setSliderValue: value];
    if(![undoManager isUndoing])
        [undoManager setActionName: @"Put to Max"];
    NSLog(@"%f value added to the stack",value);
    [_slider setFloatValue: 100.0];
}

- (IBAction)putToMin:(id)sender 
{
    float value= [_slider floatValue];
    [ [undoManager prepareWithInvocationTarget: self] setSliderValue: value];
    if(![undoManager isUndoing])
        [undoManager setActionName: @"Put to Min"];
    NSLog(@"%f value added to the stack",value);
    [_slider setFloatValue: 0.0];
}

- (void) setSliderValue: (float) value
{
    [_slider setFloatValue: value];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
}

- (id) init
{
    self=[super init];
    if(self)
    {
        undoManager=[[NSUndoManager alloc]init];
    }
    return self;
}

@end 
```

以及应用程序的屏幕截图：

![在此处输入图像描述](../Images/878097d8f98dc2e338ae2f6d279820ae.png)

撤消工作正常，但我在重做时遇到问题。

例如启动应用程序后：

*   我点击*put to max*按钮。
*   然后菜单*Edit* -> *Undo put to max*。

滑块回到原来的位置。

但是如果我去菜单*Edit -> Redo put to max*，滑块不会回到它的最大位置。我不明白为什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T00:28:44.813

当撤消系统执行撤消操作时，它希望您使用与撤消相同的代码注册重做操作（除了`NSUndoManager`知道它正在倒带 - 但您不应该关心）。

所以添加正确的 NSUndoManager 调用`-setSliderValue:`

# cuda - 跨 CUDA 内核的 L1 缓存持久性

> ID：11286638
> 
> 赞同：6
> 
> 时间：2012-07-02T00:13:36.183
> 
> 标签：cuda, gpu, cpu-cache

我了解 GPU 上的共享内存不会在不同的内核中持续存在。但是，L1 缓存是否会在不同的内核调用中持续存在？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T00:49:28.303

SM L1 缓存在同一流或空流上的所有操作之间失效，以保证一致性。但这并不重要，因为 GPU 上的 L1 缓存并不是真正旨在改善给定执行线程内的时间局部性。在大规模并行处理器上，重要的是并行空间局部性。这意味着您希望彼此附近执行的线程访问彼此附近的数据。

当执行缓存内存加载时，它是针对单个 warp 完成的，并且缓存存储由该 warp 中的线程访问的缓存行（理想情况下只有单个行）。如果下一个 warp 访问相同的缓存行，则缓存将命中并且延迟将减少。否则，缓存将使用不同的缓存行更新。如果内存访问非常分散，那么后面的 warp 可能会在重用之前从早期的 warp 中逐出缓存行。

到另一个内核运行时，缓存中的数据不太可能有效，因为该 SM 可能已经为前一个内核运行了许多 warp，因此它是否持续存在并不重要。

# jquery - 使用colorbox jquery插件加载部分（外部）html页面

> ID：11286641
> 
> 赞同：2
> 
> 时间：2012-07-02T00:14:37.793
> 
> 标签：jquery, colorbox

我如何让它在链接的 html 页面中仅使用包含 div。？加载完整的页面很好。但是我希望只加载加载页面的子 div。

html

```
<a href="/OrchardLocal/FactFindPreview?id=5" class="cboxElement">View Fact Submission</a> 
```

jquery（准备好文档）

```
$(".required-info a").colorbox({ iframe: true, width: "80%", height: "80%" }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:25:14.853

ColorBox 的 ajax 功能由 jQuery 的 load() 方法处理，因此它的工作方式相同。您传递给 colorbox 的 URL 必须以空格为后缀，然后是您要显示的内容的选择器。例如：`$.colorbox({href: "mypage.html #myselector"});`

您的用法如下所示：

```
$(".required-info a").colorbox({ href: function(){ return $(this).attr('href') + ' #mycontainer'; }, width: "80%", height: "80%" }); 
```

# amazon-ec2 - Amazon EC2 上的 Tomcat

> ID：11286660
> 
> 赞同：1
> 
> 时间：2012-07-02T00:19:23.193
> 
> 标签：amazon-ec2, tomcat7

我创建了一个在 Tomcat 7 中运行的 JSP / servlets 应用程序。它在我的开发机器上运行良好，并在安装 Tomcat 后将它作为 WAR 文件部署到我的 Windows Server Amazon EC2 实例。我可以在 EC2 实例上本地访问它（localhost:8080 等），但我根本无法从外部访问它。我做了以下事情：

*   为实例设置弹性 IP
*   在安全组中打开 8080 端口

我尝试直接访问根地址（即不是我的应用程序 url）并获得了一个默认的 IIS 页面。所以我禁用了 IIS，认为它可能会妨碍 Tomcat，但没有骰子。我已经搜索了很多，我发现的一切似乎都相当于我已经做过的事情。有什么建议么？

++++ 编辑 ++++ 没关系。这是Windows防火墙。我还不能结束这个问题，因为我太新了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:14:31.370

这是一个 Windows 防火墙问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:48:12.310

默认情况下，您需要在 webapps 中创建名为 ROOT 的折叠和一些默认页面，例如 default.html，并且您可以通过 8080 访问您的站点

# javascript - 使用 JavaScript 设置自定义属性

> ID：11286661
> 
> 赞同：131
> 
> 时间：2012-07-02T00:20:40.000
> 
> 标签：javascript, dom, dynatree

我正在使用 The DynaTree (https://code.google.com/p/dynatree) 但我遇到了一些问题，希望有人能提供帮助..

我在页面上显示树，如下所示：

```
<div id="tree">
        <ul>
            <li class="folder">Outputs
                <ul>
                    <li id="item1" data="icon: 'base.gif', url: 'page1.htm', target: 'AccessPage'">Item 1 Title
                    <li id="item2" data="icon: 'base.gif', url: 'page2.htm', target: 'AccessPage'">Item 2 Title
                    <li id="item3" data="icon: 'base.gif', url: 'page3.htm', target: 'AccessPage'">Item 3 Title
                    <li id="item4" data="icon: 'base.gif', url: 'page4.htm', target: 'AccessPage'">Item 4 Title
                </ul>
        </ul>
    </div> 
```

但是，我正在尝试更改项目上的图标，无论它是否被选中或不仅使用**JavaScript**。

我要使用的新图标是 base2.gif

我尝试使用以下方法，但似乎不起作用：

```
document.getElementById('item1').data = "icon: 'base2.gif', url: 'output.htm', target: 'AccessPage', output: '1'"; 
```

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-07-02T00:22:29.340

使用`setAttribute`方法：

```
document.getElementById('item1').setAttribute('data', "icon: 'base2.gif', url: 'output.htm', target: 'AccessPage', output: '1'"); 
```

但是您确实应该使用 data 后跟破折号及其属性，例如：

```
<li ... data-icon="base.gif" ...> 
```

并在 JS 中使用以下`dataset`属性：

```
document.getElementById('item1').dataset.icon = "base.gif"; 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-05-07T10:34:22.973

请使用数据集

```
var article = document.querySelector('#electriccars'),
    data = article.dataset;

// data.columns -> "3"
// data.indexnumber -> "12314"
// data.parent -> "cars" 
```

所以在你的情况下设置数据：

```
getElementById('item1').dataset.icon = "base2.gif"; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2020-01-21T05:17:17.680

对于来自 Google 的人来说，这个问题与数据属性无关——OP 向他们的 HTML 对象添加了一个非标准属性，并想知道如何设置它。

但是，您不应该向您的属性添加自定义属性 - 您*应该*使用[数据属性](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes)- 例如 OP 应该使用`data-icon`, `data-url`,`data-target`等。

无论如何，事实证明，通过 JavaScript 设置这些属性的方式对于这两种情况都是相同的。利用：

```
ele.setAttribute(attributeName, value); 
```

将给定属性更改`attributeName`为`value`DOM 元素`ele`。

例如：

```
document.getElementById("someElement").setAttribute("data-id", 2); 
```

请注意，您也可以使用`.dataset`设置数据属性的值，但正如@racemic 指出的那样，它[慢了 62%](https://jsperf.com/html5-dataset-vs-native-setattribute)（至少在撰写本文时 macOS 上的 Chrome 中）。因此，我建议改用该`setAttribute`方法。

# c# - 在 asp 图像控件中显示来自 Sql Server 的图像

> ID：11286665
> 
> 赞同：0
> 
> 时间：2012-07-02T00:21:43.093
> 
> 标签：c#, asp.net, sql, image, byte

这是我的代码：

页面.aspx：

```
<asp:Image ID="Image1" runat="server" /> 
```

后面的代码：

```
byte[] IMG = class.readImg(id);
Image1.ImageUrl = "~/page.aspx?ID=" + id.ToString();
Context.Response.ContentType = "image/jpg";
Context.Response.BinaryWrite(IMG); 
```

有了这段代码，page.aspx 中唯一显示的就是读取的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:09:36.423

无需使用 HttpHandler

只需使用以下代码将数据从 SQL Server 检索到 DataTable 中。

进入 .ASPX 页面

```
<img runat=server id="logoImg" alt="" src="" /> 
```

进入 C# 代码

```
byte[] imgArray =  (byte[])dTable.Rows[0][8];
logoImg.Src = "data:image/png;base64," + Convert.ToBase64String(imgArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:31:38.523

这是一个类似的最近问题的解决方案：

[使用 C# 在 ASP.net 中显示数据库中的图像](https://stackoverflow.com/questions/6987433/display-image-from-database-in-asp-net-with-c-sharp)

您需要使用 HttpHandler 类来检索和写入流。

# java - jps不工作

> ID：11286669
> 
> 赞同：25
> 
> 时间：2012-07-02T00:22:36.667
> 
> 标签：java, linux, redhat, openjdk

我已经安装了 java-1.6.0-openjdk-devel。

```
$java -version

java version "1.6.0_24"

OpenJDK Runtime Environment (IcedTea6 1.11.3) (rhel-1.48.1.11.3.el6_2-x86_64)

OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

在命令提示符中输入 jps 时

```
$jps

-bash: jps: command not found 
```

我不相信这是一个 openjdk 错误，因为我大约 6 个月前在同一个系统上使用过它，它运行良好。此外，它在我的笔记本电脑上运行良好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-11T15:53:10.247

你只需要`$JAVA_HOME/bin`输入你的`$PATH`变量。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-02-22T07:12:12.820

这是常见的问题。这个问题的原因是打开的jdk包在CentOs中只包含jre。因此，jps ise 没有预装。为了解决这个问题并开发java应用程序，必须安装open jdk devel包。

首先，列出开发者包并使用如下所示的命令安装合适的包。从列表中选择最相关的版本`1`以用于`2`.

1.  `yum list java*devel*`
2.  `sudo yum install java-<version>-openjdk-devel.x86_64`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-06-25T11:27:31.513

jps 不是 openjdk 的一部分。你必须使用命令安装它

对于 Java 7 -`sudo yum install java-1.7.0-openjdk-devel`

对于 Java 8 -`sudo yum install java-1.8.0-openjdk-devel`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-18T07:38:54.623

如果您使用的是基于 linux 的操作系统，请将 JAVA_HOME 添加到*bashrc*文件中的 PATH 变量中。

```
vim ~/.bashrc
export JAVA_HOME=/opt/jdk1.8.0_72/
export PATH=$JAVA_HOME/bin:$PATH
source ~/.bashrc 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-17T22:52:03.920

检查java的安装目录即$JAVA_HOME

然后做一个符号链接，即

ln -s $JAVA_HOME/bin/jps /usr/bin/jps

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-07T05:09:09.070

当我尝试 jps 我得到了

> jps：找不到命令...

因为我没有安装jps

我通过安装jdk解决了。

```
yum install jdk 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-22T06:57:42.037

这个命令也对我有用：

```
alias jps='<your JDK path>/bin/jps' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-29T06:41:06.663

这个命令对我有用......！sudo apt install openjdk-8-jdk-headless

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-29T08:21:16.853

首先，请确保 jps 安装在某处。它应该是运行命令`sudo update-alternatives --config jps --auto`将 jps 链接到`/usr/bin/jps`或者只是附加`$JAVA_HOME/bin`到你`$PATH`喜欢的第一个答案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-09T12:58:14.903

试试这个命令：export PATH=$PATH:/home/dav/jdk1.7.0_45/bin

它的java相对路径。在这种情况下，我的 java 位于 /home/dav/ 目录内。然后运行 ​​jps 它会工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-26T18:27:26.843

只需为此添加更多细节：“您只需`$JAVA_HOME/bin`输入 $PATH 变量。” **@Spudley 的**回答。

请注意，添加它的方法是使用`%JAVA_HOME%\bin`$PATH。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-12-04T17:25:58.743

两个小时后。就我而言，我在 Rhel 7.X 中使用了这个命令

```
sudo yum install java-1.8.0-openjdk -y 
```

但是 jps 没有安装，它没有出现在 /usr/bin/jps 中，然后安装了这个包并运行**jps**命令。

```
sudo yum -y install java-1.8.0-openjdk-devel 
```

# c - 尝试切换变量时出现意外的性能结果

> ID：11286671
> 
> 赞同：1
> 
> 时间：2012-07-02T00:22:46.957
> 
> 标签：c, optimization

我尝试了三种方法在 C 中的两个值之间切换变量，代码位于：

[http://pastebin.com/K481DsU3](http://pastebin.com/K481DsU3)

```
void with_xor(int *value)
{
    *value ^= VAL_ONE ^ VAL_TWO;
}

void with_conditional(int *value)
{
    *value = (*value == VAL_ONE)? VAL_TWO : VAL_ONE;
}

void with_if(int *value)
{
    if(VAL_ONE == *value)
    {      
        *value = VAL_TWO;
    }
    else
    {
        *value = VAL_ONE;
    }
} 
```

我期待“xor”方法比其他两种方法快得多，但似乎情况并非如此。这是为什么？

以下是测试结果：

```
xor           0.052300          
conditional   0.035738          
if            0.034924 
```

这是一个反汇编（编译时没有标志）：

```
_with_xor:
0000000100000bd0    pushq   %rbp
0000000100000bd1    movq    %rsp,%rbp
0000000100000bd4    movq    %rdi,0xf8(%rbp)
0000000100000bd8    movq    0xf8(%rbp),%rax
0000000100000bdc    movl    (%rax),%eax
0000000100000bde    xorl    $0x0f,%eax
0000000100000be1    movq    0xf8(%rbp),%rcx
0000000100000be5    movl    %eax,(%rcx)
0000000100000be7    popq    %rbp
0000000100000be8    ret
0000000100000be9    nopl    0x00000000(%rax)
_with_conditional:
0000000100000bf0    pushq   %rbp
0000000100000bf1    movq    %rsp,%rbp
0000000100000bf4    movq    %rdi,0xf8(%rbp)
0000000100000bf8    movq    0xf8(%rbp),%rax
0000000100000bfc    movl    (%rax),%eax
0000000100000bfe    cmpl    $0x0a,%eax
0000000100000c01    jne 0x100000c0c
0000000100000c03    movl    $0x00000005,0xf4(%rbp)
0000000100000c0a    jmp 0x100000c13
0000000100000c0c    movl    $0x0000000a,0xf4(%rbp)
0000000100000c13    movq    0xf8(%rbp),%rax
0000000100000c17    movl    0xf4(%rbp),%ecx
0000000100000c1a    movl    %ecx,(%rax)
0000000100000c1c    popq    %rbp
0000000100000c1d    ret
0000000100000c1e    nop
_with_if:
0000000100000c20    pushq   %rbp
0000000100000c21    movq    %rsp,%rbp
0000000100000c24    movq    %rdi,0xf8(%rbp)
0000000100000c28    movq    0xf8(%rbp),%rax
0000000100000c2c    movl    (%rax),%eax
0000000100000c2e    cmpl    $0x0a,%eax
0000000100000c31    jne 0x100000c3f
0000000100000c33    movq    0xf8(%rbp),%rax
0000000100000c37    movl    $0x00000005,(%rax)
0000000100000c3d    jmp 0x100000c49
0000000100000c3f    movq    0xf8(%rbp),%rax
0000000100000c43    movl    $0x0000000a,(%rax)
0000000100000c49    popq    %rbp
0000000100000c4a    ret
0000000100000c4b    nopl    0x00(%rax,%rax) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T00:49:34.710

首先：代码的“条件”和“如果”变体在功能上是相同的，实际上编译器为两者生成几乎相同的代码。

分支预测可能会显着影响您的结果 - 因为您总是在 5 和 10 之间切换值并直接返回，条件/if 变体中的分支可以以接近 100% 的准确度进行预测，将函数转换为可以与比较几乎同时运行的商店。另一方面，XOR 变体必须作为加载-异或-存储序列运行——这三个操作都不能在前一个操作完成之前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:44:15.273

您通常不能在 CPU 上流水线异或，但可以流水线移动指令。所以异或过程要慢得多。

本质上，在您的指令管道中，您希望执行尽可能多的指令。因为总的来说，分支预测非常好，CPU 将能够正确解析所有这些 mov 指令并决定并行结束所有内容。另一方面，在其前任被异或之前不可能对事物进行异或运算，因此 CPU 必须等待前一个异或指令解决，然后再执行下一个异或指令。慢得多。

# html - 水平的 - 类似 NSAttributedString 中的分隔符

> ID：11286674
> 
> 赞同：5
> 
> 时间：2012-07-02T00:23:00.767
> 
> 标签：html, cocoa, osx-lion, separator, nsattributedstring

如何制作一个基本上是水平分隔符的 NSAttributedString，比如 HTML 的`<hr>`标签？

我试过了：

```
NSAttributedString *hr = [[NSAttributedString alloc] initWithHTML:
  [NSData
    dataWithBytes:"<html><body><hr>hi</body></html>"
    length:strlen("<html><body><hr>hi</body></html>")]
  documentAttributes:NULL]; 
```

但是，`<hr>`标签不会出现。不过，将字符串添加到我的视图中是可行的，因为我可以看到`hi`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-10T13:30:09.553

这是一个相当古老的问题，但我认为值得更全面地回答。

获得水平标线的一种简单方法是在您想要的标线长度处设置一个带有制表位的段落，并将其对齐设置为居中。然后将文本设置为`U+00A0 U+0009 U+00A0`并在文本上设置删除线属性。规则的长度由制表位的位置设置。这具有开箱即用的复制和粘贴工作的显着优势 - 实际上与使用文本系统的其他程序一起使用。

如果您想要（例如）随文本扩展的水平规则，另一种可行的方法是`NSTextAttachment`与自定义单元格一起使用。单元格被传递一个线片段矩形，并且可以根据需要设置自己的框架。FWIW，您不必为`NSTextAttachment`;使用图像。您的单元格可以进行自定义绘图。但是，您将遇到的问题是复制和粘贴将根据附件内容设置单元格类型（这是有道理的，因为您的自定义单元格在其他应用程序中不可用）。您可以采用混合方法并将图像设置为附件，同时在应用程序中进行自己的自定义渲染；镀金版本可能会在 PNG 附件中使用自定义标签来指示它应该是自定义呈现的。

你也可以`NSTextTable`用来画一条规则——我没有尝试过这种方法，但我怀疑它可以很容易地工作。

最后，您可以选择按照 Kevin 的建议进行操作——使用`NSLayoutManager`自己计算适当的位置并进行渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:57:45.540

你将不得不自己画它。`<hr>`不是文本，也不是修改文本的属性。因此， NSAttributedString 无法表示它，而 Cocoa 文本系统或 CoreText 无法绘制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-01T14:46:11.873

我尝试遵循@alasair 指令的第一种方法，并在 Swift 中成功使用了它：

```
let hr = NSAttributedString(string: "\n\r\u{00A0} \u{0009} \u{00A0}\n\n", attributes: [.strikethroughStyle: NSUnderlineStyle.single.rawValue, .strikethroughColor: UIColor.gray]) 
```

这将呈现以下行，横跨整个屏幕宽度：

[![水平线](../Images/af897773a7a6ee4d4f5d4e2d56a388d3.png)](https://i.stack.imgur.com/DoiyK.png)

# c - 并行编程中的一个奇怪案例

> ID：11286676
> 
> 赞同：5
> 
> 时间：2012-07-02T00:23:06.150
> 
> 标签：c, parallel-processing, cilk, cilk-plus

我有一个并行程序，有时运行，有时只是给出分段错误。强制使用 3 个线程运行时，可执行文件运行良好（基本上它也使用串行的单线程运行），但是当强制使用任何其他线程值运行时，它会出现分段错误。这是场景：

从`main.c`主函数内部：

```
cilk_for ( line_count = 0; line_count != no_of_lines ; ++line_count )
{
     //some stuff here
     for ( j=line_count+1; j<no_of_lines; ++j )
     {
         //some stuff here
         final_result[line_count][j] = bf_dup_eleminate ( table_bloom[line_count], file_names[j], j );
         //some stuff here
     }
     //some stuff here
} 
```

`bf_dup_eleminate`文件中的函数`bloom-filter.c`：

```
int bf_dup_eleminate ( const bloom_filter *bf, const char *file_name, int j )
{
    int count=-1;
    FILE *fp = fopen (file_name, "rb" );
    if (fp)
    {
        count = bf_dup_eleminate_read ( bf, fp, j);
        fclose ( fp );
    }
    else
    {
        printf ( "Could not open file\n" );
    }
    return count;
} 
```

`bf_dup_eleminate_read`从`bloom-filter.c`文件：

```
int bf_dup_eleminate_read ( const bloom_filter *bf, FILE *fp, int j )
{
    //some stuff here
    printf ( "before while loop. j is %d ** workder id: **********%d***********\n", j, __cilkrts_get_worker_number());
    while (/*somecondition*/)
    {/*some stuff*/}
    //some stuff
} 
```

我报告的这个错误`intel inspector`是：

```
ID | Problem                         |  Sources       
P1 | Unhandled application exception | bloom-filter.c 
```

调用堆栈是：

```
exec!bf_dup_eleminate_read - bloom-filter.c:550
exec!bf_dup_eleminate - bloom-filter.c:653
exec!__cilk_for_001.10209 - main.c:341 
```

同样`gdb`也在同一个位置报错，就是：

现在`gdb`告诉我你有以下错误

`0x0000000000406fc4 in bf_dup_eleminate_read (bf=<error reading variable: Cannot access memory at address 0x7ffff7edba58>, fp=<error reading variable: Cannot access memory at address 0x7ffff7edba50>, j=<error reading variable: Cannot access memory at address 0x7ffff7edba4c>) at bloom-filter.c:536`

`Line 536`是`int bf_dup_eleminate_read ( const bloom_filter *bf, FILE *fp, int j )`

额外细节：

现在我的bloomfilter是一个定义为的结构

```
struct bloom_filter
{
    int64_t m;      //size of bloom filter.
    int32_t k;      //number of hash functions.
    uint8_t *array;
    int64_t no_of_elements_added;
    int64_t expected_no_of_elements;
}; 
```

它的内存分配如下：

```
 bloom_filter *bf = (bloom_filter *)malloc( sizeof(bloom_filter));
    if ( bf != NULL )
    {
        bf->m = filter_size*8;      /* Size of bloom filter */
        bf->k = num_hashes;
        bf->expected_no_of_elements = expected_no_of_elements;
        bf->no_of_elements_added = (int64_t)0;
        bf->array = (uint8_t *)malloc(filter_size);
        if ( bf->array == NULL )
        {
            free(bf);
            return NULL;
        }
    } 
```

只有一个副本，`bloom_filter`每个线程都应该访问相同的（因为我没有修改任何内容，只是阅读）。

谁能帮助我，因为我在过去的 4 天里被困在这里，我只是想不出办法。最糟糕的是它运行 3 个线程！！！

注意：cilk_for 只是在 cilk 中生成线程的关键字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T04:01:35.617

当调试器告诉您这样的错误时：

```
0x0000000000406fc4 in bf_dup_eleminate_read (
    bf=<error reading variable: Cannot access memory at address 0x7ffff7edba58>,
    fp=<error reading variable: Cannot access memory at address 0x7ffff7edba50>,
    j=<error reading variable: Cannot access memory at address 0x7ffff7edba4c>
) at bloom-filter.c:536

536: int bf_dup_eleminate_read ( const bloom_filter *bf, FILE *fp, int j ) 
```

它通常表示函数入口代码（称为函数“prologue”）正在崩溃。简而言之，您的堆栈已损坏，CPU 在计算三个局部变量的地址并在堆栈上为它们分配空间时崩溃。

我会检查或尝试修复此错误的事情（没有一个可以保证工作，其中一些您可能已经尝试过）：

1.  确保您没有超出您在程序的其他部分中声明的任何局部变量使用的任何空间。

2.  确保您没有写入已声明为局部变量然后从程序其他部分的函数返回的指针。

3.  确保每个线程都有足够的堆栈空间来处理您声明的所有局部变量。您是否声明了任何大型的基于堆栈的缓冲区？默认的每线程堆栈大小取决于编译器设置，或者在这种情况下是*cilk*库。尝试在编译时增加每个线程的堆栈大小，看看崩溃是否消失。

运气好的话，上述方法之一应该可以让您缩小问题的根源。

# facebook - 为什么当 Wordpress AutoSocial 插件发布到粉丝页面时没有分享选项？

> ID：11286678
> 
> 赞同：1
> 
> 时间：2012-07-02T00:23:07.060
> 
> 标签：facebook, wordpress, share, auto-update

当通过 WP-Autosocial 插件自动更新到我的 Facebook 粉丝页面时，为什么有“赞”和“评论”选项，但没有“分享”选项？手动发布到页面的任何内容都具有所有三个选项，但来自 WP-Autosocial 的自动更新缺少共享。

# ios - 重新加载非表格视图 (iOS)

> ID：11286681
> 
> 赞同：0
> 
> 时间：2012-07-02T00:23:54.503
> 
> 标签：ios, xcode, image, ipad, reload

我正在开发一个绘画应用程序，我希望用户能够通过保存为 PNG 的绘画切换到文档目录。我做了一个 IBAction 来做到这一点：

```
-(IBAction)switchPage:(id)sender{

if ([sender tag] ==1)
{

    currentImage=currentImage-1;

}
else
{

    currentImage++;

}
[[NSUserDefaults standardUserDefaults] setInteger:currentImage forKey:@"currentDoc"];

[self.view setNeedsDisplay];

} 
```

只是让你知道，我有 2 个按钮，一个后退和前进，它们连接到上面粘贴的同一个 IBAction。后退按钮的标签为 1，前进按钮没有标签。`currentImage`是一个用于设置图像名称的 int，因此如果`currentImage`=1，则它将图像设置为 image1。但这不是我遇到的问题，我在“重新加载”视图时遇到了麻烦。我正在使用 setNeedsDisplay，但它不起作用，而且我知道 reloadData 仅适用于 UITables，那么我还能使用什么？

我一直在寻找答案，但是关于此的现有问题没有一个没有明确的答案，或者处于不同的情况下。

感谢您的时间和/或处理一个愚蠢的问题，因为我是 Xcode 的新手。

-卡尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T00:26:46.113

我在您的帖子中没有看到任何查看代码。

假设您有一个 UIImageView 正在显示您将要执行的图像：

```
myImageView.image = whateverUIImage; 
```

# c# - 尝试在 C# 中打开/关闭 iis 网站

> ID：11286683
> 
> 赞同：1
> 
> 时间：2012-07-02T00:23:59.877
> 
> 标签：c#, iis, iis-7

我正在寻找停止/启动 IIS 网站的 ac# .Net 应用程序（Web 或桌面）。

我在互联网上搜索此内容，但找不到有效的示例或解释。

我找到了这个 dll [http://msdn.microsoft.com/en-us/library/microsoft.web.administration.servermanager%28v=VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.servermanager%28v=VS.90%29.aspx)

这是我正在尝试停止/启动 IIS 网站的示例：

“使用 Microsoft.Web.Administration”参考..

```
var server = new ServerManager();
var site = server.Sites.FirstOrDefault(s => s.Name == "SITENAME");  
if (site != null)
        {
            //stop the site...
            site.Stop();
            if (site.State == ObjectState.Stopped)
            {
                //do deployment tasks...
            }
            else
            {
                throw new InvalidOperationException("Could not stop website!");
            }
            //restart the site...
            site.Start();
        }
        else
        {
            throw new InvalidOperationException("Could not find website!");
        } 
```

site.Stop 抛出异常：

```
"Access denied. (Excepción de HRESULT: 0x80070005 (E_ACCESSDENIED))" 
```

异常类型“未授权访问异常”

我怎样才能做到这一点？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:23:32.683

扩展我的评论：错误似乎很明显，您的应用程序运行的安全上下文没有权限。如果您的程序本身在 IIS 下运行，请确保它使用的应用程序池具有特权用户帐户。

在 IIS 中，您的网站在应用程序池下运行。确保应用程序池正在使用具有足够权限的身份。默认 ApplicationPoolIdentity 帐户没有提升权限是有充分理由的。

出于测试目的，您可以使用自己的登录名，因为您表示它具有管理权限。

![在此处输入图像描述](../Images/b6405559b0b42e621c6e5293d0decf32.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:36:07.840

您将需要以管理员身份运行该程序。

# javascript - 什么是 CSS 媒体查询的 JavaScript 等价物？

> ID：11286684
> 
> 赞同：0
> 
> 时间：2012-07-02T00:24:10.063
> 
> 标签：javascript, cross-browser

我在使用媒体查询将 CSS 定位到特定浏览器大小/或上下文方面经验丰富，但现在我对使用 JS 执行此操作很感兴趣，基本上可以更好地控制我的脚本如何在不同功能的浏览器上运行。

我不是问如何在 JS 中复制媒体查询的功能，而是更多控制哪些代码在哪些浏览器上运行的方法？

有没有一种方法或系统可以在不检测浏览器的情况下给我这种控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:25:28.933

多个`if`语句：

```
if ($(window).width() > 900)) {
   // do something here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:01:59.503

这允许您为响应式设计定义断点，然后在浏览器进入和/或退出该断点时触发自定义事件。

[http://xoxco.com/projects/code/breakpoints/](http://xoxco.com/projects/code/breakpoints/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T00:38:54.797

不需要 4 层以上的间接层。

```
var width = typeof innerWidth === 'undefined' ? document.body.clientWidth : innerWidth;
if (width > 900) {
  // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T00:51:27.350

除非您做一些基础工作来检​​测您希望代码运行的情况并将事物包装在 if 块中，否则实际上没有任何东西可以控制代码的运行位置。您可以在 HTML、生成服务器代码中的 if 块或 js 本身中使用条件语句。

# joomla - Virtuemart 登录页面 - 缺少信息

> ID：11286685
> 
> 赞同：0
> 
> 时间：2012-07-02T00:24:31.420
> 
> 标签：joomla, joomla1.5, virtuemart

我正在运行 Virtuemart 1.1.9 和 Joomla 1.5.25。

当用户点击注册时，只会提示他们输入姓名、用户名、电子邮件、密码、验证密码。我必须更改什么才能获得类似的注册[页面](http://extensions.virtuemart.net/my-account)？？

我的网站是[ssgiorder.com](http://ssgiorder.com)。

AHIA，拉里R......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:29:06.313

从 VM 管理员，您可以配置自定义字段，以及它们是否出现，以及它们是否是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:08:19.777

问题是主菜单选项权限设置为已注册。一旦将其更改回公共，它就可以正常工作....

# python - 如何在带有鼻子测试的文件中指定单个测试？

> ID：11286688
> 
> 赞同：112
> 
> 时间：2012-07-02T00:26:29.163
> 
> 标签：python, testcase, nosetests

我有一个名为 test_web.py 的文件，其中包含一个类 TestWeb 和许多名为 test_something() 的方法。

我可以像这样运行班级中的每个测试：

```
$ nosetests test_web.py 
...
======================================================================
FAIL: checkout test
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/me/path/here/test_web.py", line 187, in test_checkout
... 
```

但我似乎无法运行单独的测试。当在同一个 PWD 中运行时，这些给我“没有这样的测试”错误：

```
$ nosetests test_web.py:test_checkout
$ nosetests TestWeb:test_checkout 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-07-02T00:58:19.370

您必须像这样指定它：`nosetests <file>:<Test_Case>.<test_method>`，或

```
nosetests test_web.py:TestWeb.test_checkout 
```

查看[文档](http://nose.readthedocs.org/en/latest/usage.html#selecting-tests)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-20T10:19:17.993

您还可以指定一个模块：

```
nosetests tests.test_integration:IntegrationTests.test_user_search_returns_users 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-08T15:09:09.333

像其他答案建议的那样在命令行上指定名称确实有效并且很有用。然而，当我在编写测试时，我经常发现我只想运行我正在处理的测试，而我必须在命令行上写的名字变得很长而且写起来很麻烦. 在这种情况下，我更喜欢使用自定义装饰器和标志。

我这样定义`wipd`（“正在进行的装饰器”）：

```
from nose.plugins.attrib import attr
def wipd(f):
    return attr('wip')(f) 
```

这定义了一个装饰器`@wipd`，它将为其装饰的对象设置`wip`属性。例如：

```
import unittest
class Test(unittest.TestCase):

    @wipd
    def test_something(self):
        pass 
```

然后`-a wip`可以在命令行中使用，将测试的执行范围缩小到标有`@wipd`.

### 注意名字...

我使用`@wipd`装饰器的名称而不是`@wip`避免此类问题：

```
import unittest
class Test(unittest.TestCase):

    from mymodule import wip    
    @wip
    def test_something(self):
        pass

    def test_something_else(self):
        pass 
```

`import`将使`wip`装饰器成为该类的成员*，*并且将选择该类中的**所有测试。**该`attrib`插件检查一个测试方法的父类，以查看选择的属性是否也存在那里，并且由其创建和测试的属性`attrib`不存在于隔离空间中。因此，如果您使用 测试`-a foo`并且您的类包含`foo = "platypus"`，则该类中的所有测试都将由插件选择。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-22T09:21:55.503

要运行多个特定测试，您只需将它们添加到命令行，用空格分隔即可。

```
nosetests test_web.py:TestWeb.test_checkout test_web.py:TestWeb.test_another_checkout 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-14T14:06:23.163

在我的测试中，**使用模块名称指定测试不起作用**

您必须指定以下的实际路径`.py`：

```
nosetests /path/to/test/file.py:test_function 
```

这与`nose==1.3.7`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-23T14:29:51.260

**我的要求是在另一个Windows**目录中的测试文件中运行单个测试- 这是从*anaconda 命令提示符*完成的，如下所示：

从以下位置进行*鼻子测试*：

```
(base) C:\Users\ABC\Documents\work\ 
```

但*test_MyTestFile.py*和*methodsFile.py*在：

```
 (base) C:\Users\ABC\Documents\work\daily\ 
```

通过包含带*引号的**路径*来运行单个测试，如下所示：

 *```
(base) C:\Users\ABC\Documents\work>nosetests "daily\\test_MyTestFile.py:MyTestClass.test_add_integers" 
```

*test_MyTestFile.py*看起来像这样：

```
import methodsFile
import unittest

class MyTestClass(unittest.TestCase):

    def test_add_integers(self):
        assert methodsFile.add(5, 3) == 8

    def test_add_integers_zero(self):
        assert methodsFile.add(3, 0) == 3 
```

*methodsFile.py*看起来像这样：

```
def add(num1, num2):
        return num1 + num2 
```*

# php - 用于输入验证的最佳通用类或包是什么？

> ID：11286692
> 
> 赞同：2
> 
> 时间：2012-07-02T00:27:11.637
> 
> 标签：php, validation

什么是最好的、最安全的和用户友好的易于使用的验证器类或插件，我们可以在 PHP 编码中使用它来验证常见的用户输入，如电子邮件地址、URL、整数等？

例如[http://code.google.com/p/owasp-esapi-php/](http://code.google.com/p/owasp-esapi-php/)。有没有更好的办法？

还是使用`filter_input`最好的方法？例如

```
$value = filter_input(INPUT_GET, "value", FILTER_VALIDATE_INT,
        array("options" => array("min_range" => 15, "max_range" => 20))); 
```

还是自定义编码？例如

```
if (isset($_GET["value"])) {
    $value = $_GET["value"];
}
else {
    $value = false;
}
if (is_numeric($value) && ($value >= 15 && $value <= 20)) {
    // run my code
}
else {
    // handle the issue
} 
```

对此有何专家意见？我更喜欢懒惰的风格，比如：

```
filer_input($POST); 
```

有没有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:37:43.470

如果您不熟悉此类库，它可能对用户（开发人员）不友好，但我认为您真的应该看看`Symfony2 Validator Component`. 它可以通过 Composer 轻松安装，可以独立使用，并且在此处有出色的文档：[http](http://symfony.com/doc/current/book/validation.html) ://symfony.com/doc/current/book/validation.html，GitHub 存储库可以在这里找到：[https ://github.com/ symfony/验证器](https://github.com/symfony/Validator)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:39:25.527

如果输入验证是万能的，那么 XSS 和 SQLi 攻击就会少很多:)

使用过滤器（优点是它附带 php）或类似的第三方库（过滤器确实有一些怪癖）来设置显式规则是一个很好的做法。当您在数组语法（如 filter_input_array 或 filter_var_array）中使用规则时，可以重用那些更经常使用的规则（自定义正则表达式等）

与自定义编码相比，使用过滤器库可以减少代码，从而减少潜在的错误。

# php - 不允许直接访问 PHP 文件

> ID：11286694
> 
> 赞同：0
> 
> 时间：2012-07-02T00:27:26.740
> 
> 标签：php, javascript, ajax

我有一个 html 表单，当它被提交时，它调用一个 JavaScript 函数，该函数通过使用 Ajax 从 PHP 文件中使用 post 获取信息并将其显示回页面。

问题是，是否可以使 PHP 文件仅在使用上述方法时才能访问，而不是用户通过 JS 方法并找到它的位置时可以直接访问它？

编辑：添加更多信息以帮助人们。Ajax 正在调用外部 php 文件，以便根据 php 文件返回的内容更新网站的内容。由于所有 Ajax 调用都是在 JavaScript 中进行的，因此有人可以轻松找出函数使用的位置和参数，并且基本上直接调用 php 文件，这是我试图避免的。

在这种情况下，使用 PHP 会话有点困难，因为我使用的是 Ajax，一旦外部 PHP 文件完成，我就无法销毁会话，因为如果我这样做，会话永远不会更新，因为我使用 Ajax 来更新该网站无需刷新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T01:50:54.147

我同意 limscoder。

这是我在提交表单时使用令牌的方式。

1）初始化它并保存在服务器上（当页面在客户端加载时）

```
$token = $_SESSION['token'] = md5(uniqid(mt_rand(),true)); 
```

2）将其添加到表单中

```
<input type="hidden" name="token" value="<?php echo $token;?>" /> 
```

3）提交时，我使用检查令牌

```
if(isset($_SESSION['token'], $_POST['token']) && $_SESSION['token'] == $_POST['token'])
{
//code goes here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T00:45:38.867

听起来您在描述一种[跨站点请求伪造](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)。防止这种情况的正常方法是将服务器生成的令牌作为表单值包含在内，然后在提交表单时根据存储在用户会话中的值对其进行验证。查看链接以获取有关如何正确生成和验证令牌的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T00:34:22.937

您可以通过检查 HTTP_REFERER (http://php.net/manual/en/reserved.variables.server.php) 来测试调用脚本的页面

但是......它可以被欺骗，所以只会阻止随意尝试获取您的数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T01:00:05.807

html页面是否安全？如果任何人都可以访问 html 页面来调用您的 ajax 页面，为什么还要花时间尝试保护它。:)

但是，如果您确实需要这样做，您可能需要将 html 页面转换为 php 页面，以便生成要放置在表单中的令牌。一个好的标记是附加年、月、日和小时的秘密字符串的 sha。发回令牌时，用同样的方法生成一个测试令牌，并比较两者。这使得令牌仅在 1 小时内有效。当然，在 ajax 中，您可能需要针对最后一小时的令牌进行测试，以防用户在一小时的最后一分钟收到表单并在该小时后提交。

编辑---如果您主要关心的是机器人，那么只需使用验证码测试。

# c# - 如何配置工厂生成对象？

> ID：11286699
> 
> 赞同：2
> 
> 时间：2012-07-02T00:29:23.850
> 
> 标签：c#, design-patterns, factory, factory-pattern

也许标题不是很清楚。让我澄清一下我要完成的工作。

我必须基类：

*   基本属性
*   基本问题

BaseProperties 包含有关生成数学问题的数据。例如，在上图中，BasicAdditionProperties 包含 Addend1 和 Addend2，这两个对象知道生成值的范围以表示 BasicAdditionProblem。

所以，这只是一个想法。我想我应该将抽象类传递给工厂，而这个应该会产生问题（在本例中为 BasicAdditionProblem）。

我已阅读，建议将这些值作为基类传递。我的主要疑问是，当我将对象 BaseProperties 传递给工厂时，我是否必须一直转换对象？

或者我可以实施什么想法来模拟这种情况？还是我必须有一个静态工厂来维护并用作到具体工厂的映射？提前致谢。

![在此处输入图像描述](../Images/ad96b6bf22aa3c0959a787d485aa1c94.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:24:33.787

`CreateProblem()`在`BaseProperties`类中定义一个抽象。此方法可用于一般性地允许每个具体的 Properties 子类提供其自己的 Factory 方法。

这类似于使用`WebRequest`子类的实例并调用`GetResponse()`它，然后它返回对应的子类`WebResponse`。

这种分布式抽象工厂方法允许您轻松地将属性/问题对添加到系统中，因为映射两者的代码仅包含在这两个类中。

* * *

您还可以使用完整的抽象工厂实现，其中`PropertyProblemFactory`定义了 a`CreateProperties()`和 a `CreateProblem()`。因此，在您的示例中，您将`AdditionFactory`知道如何创建匹配集。但这会迫使您为每个属性/问题对定义一个附加类。当你有一个使用 current/selected 的类时，它也最有效，用它`PropertyProblemFactory`创建一个`Properties`，然后立即使用同一个`PropertyProblemFactory`工厂来创建匹配的`Problem`。一旦你放弃对工厂的引用而只引用了`Properties`，就很难重新定位正确的工厂来创建`Problem`. （这可以通过另一个将对象类型映射到工厂的类来解决，但复杂性会增加。所以我建议的第一种方法在这种情况下更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:44:49.907

有多种解决方案。这仅取决于您要如何对其进行编程。

抽象类中的抽象方法必须在从抽象类继承的所有类中处理。这样您就可以轻松地在工厂中调用抽象方法而无需强制转换。

但是，当您需要使用来自一个特定类的大量数据时，为它创建抽象方法是不明智的，您应该简单地转换对象。

所以这一切都取决于有多少类继承自 BaseProperties 以及这些类中有多少数据是相同的。

# .net - 如何使用反射来获取具有值的基本属性和字段以建立类层次结构？

> ID：11286704
> 
> 赞同：0
> 
> 时间：2012-07-02T00:29:58.603
> 
> 标签：.net, reflection, base-class, locals

如何使用反射获取基类属性和字段，以便我可以一次将类层次结构向上一层？目标是构建一个树形显示，显示具有任何类实例的值的属性和字段，就像调试器 Locals 窗口一样。我需要延迟加载每个基本实例的能力，以便在展开“基本”树节点时，可以按需显示那些具有值的属性和字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:33:07.947

这是一个简单的示例，可以执行您指定的操作。我相信您可以根据您的特定需求进行修改，或者至少它会为您指明正确的方向。

您可以将此示例复制并粘贴到控制台应用程序中，并设置一些断点以查看其工作原理。

VB.Net 中的代码

```
Module Module1

    Private Class ClassOne
        Private _One As String
        Private _Two As Integer
        Private _three As Double

        Public Property One() As String
            Get
                Return _One
            End Get
            Set(ByVal value As String)
                _One = value
            End Set
        End Property

        Public Property Two() As Integer
            Get
                Return _Two
            End Get
            Set(ByVal value As Integer)
                _Two = value
            End Set
        End Property

        Public Property Three() As Double
            Get
                Return _three
            End Get
            Set(ByVal value As Double)
                _three = value
            End Set
        End Property
    End Class

    Private Class ClassAlpha
        Inherits ClassOne

        Private _Alpha As String
        Private _Beta As Long

        Public Property Alpha() As String
            Get
                Return _Alpha
            End Get
            Set(ByVal value As String)
                _Alpha = value
            End Set
        End Property

        Public Property Beta() As Long
            Get
                Return _Beta
            End Get
            Set(ByVal value As Long)
                _Beta = value
            End Set
        End Property
    End Class

    Private Class ClassColor
        Inherits ClassAlpha

        Private _Red As String
        Private _Blue As Long

        Public Property Red() As String
            Get
                Return _Red
            End Get
            Set(ByVal value As String)
                _Red = value
            End Set
        End Property

        Public Property Blue() As Long
            Get
                Return _Blue
            End Get
            Set(ByVal value As Long)
                _Blue = value
            End Set
        End Property
    End Class

    Sub Main()
        Dim o As New ClassColor()
        o.Red = "The Color Red"
        o.Blue = 14
        o.Alpha = "The First"
        o.Beta = 202
        o.One = "One"
        o.Two = 2
        o.Three = 3.1415927

        Dim helper As New ReflectionHelper(o)

        Dim list1 = helper.ReflectProperties(helper.BaseClasses(0), o)
        Dim list2 = helper.ReflectProperties(helper.BaseClasses(1), o)
        Dim list3 = helper.ReflectProperties(helper.BaseClasses(2), o)
    End Sub

End Module

Public Class ReflectionHelper
    Private _SourceClass As Object
    Private _BaseClasses As New List(Of Type)

    Public Sub New()
    End Sub

    Public Sub New(source As Object)
        _SourceClass = source

        Dim t As Type = _SourceClass.GetType()
        While (t IsNot Nothing)
            _BaseClasses.Add(t)
            t = t.BaseType
        End While
    End Sub

    Public ReadOnly Property BaseClasses As List(Of Type)
        Get
            Return _BaseClasses
        End Get
    End Property

    Public Function ReflectProperties(ByVal baseClass As Type,
                                      ByVal instance As Object) As List(Of ReflectionHelperProperties)
        Dim result As New List(Of ReflectionHelperProperties)
        For Each prop In baseClass.GetProperties(Reflection.BindingFlags.DeclaredOnly Or
                                                 Reflection.BindingFlags.GetProperty Or
                                                 Reflection.BindingFlags.Instance Or
                                                 Reflection.BindingFlags.Public)
            result.Add(New ReflectionHelperProperties() With {.Name = prop.Name, .InstanceValue = prop.GetValue(instance, Nothing)})
        Next
        Return result
    End Function
End Class

Public Class ReflectionHelperProperties
    Public Name As String
    Public InstanceValue As Object
End Class 
```

* * *

C# 中的相同代码

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication23
{
    class Program
    {
        static void Main(string[] args)
        {
            // create the highest level type
            ClassColor o = new ClassColor();
            o.Red = "The Color Red";
            o.Blue = 14;
            o.Alpha = "The First";
            o.Beta = 202;
            o.One = "One";
            o.Two = 2;
            o.Three = 3.1415927;

            ReflectionHelper helper = new ReflectionHelper(o);

            List<ReflectionHelperProperties> list1 = helper.ReflectProperties(helper.BaseClasses[0], o);
            List<ReflectionHelperProperties> list2 = helper.ReflectProperties(helper.BaseClasses[1], o);
            List<ReflectionHelperProperties> list3 = helper.ReflectProperties(helper.BaseClasses[2], o);
        }
    }
}

public class ClassOne
{
    private string _One;
    private int _Two;

    private double _three;
    public string One {
        get { return _One; }
        set { _One = value; }
    }

    public int Two {
        get { return _Two; }
        set { _Two = value; }
    }

    public double Three {
        get { return _three; }
        set { _three = value; }
    }
}

public class ClassAlpha : ClassOne
{    
    private string _Alpha;    
    private long _Beta;

    public string Alpha {
        get { return _Alpha; }
        set { _Alpha = value; }
    }

    public long Beta {
        get { return _Beta; }
        set { _Beta = value; }
    }
}

public class ClassColor : ClassAlpha
{    
    private string _Red;    
    private long _Blue;

    public string Red {
        get { return _Red; }
        set { _Red = value; }
    }

    public long Blue {
        get { return _Blue; }
        set { _Blue = value; }
    }
}

public class ReflectionHelper
{
    private List<Type> _BaseClasses = new List<Type>();
    public ReflectionHelper()
    {
    }

    public ReflectionHelper(object source)
    {
        // build base types list
        Type t = source.GetType();
        while ((t != null)) {
            _BaseClasses.Add(t);
            t = t.BaseType;
        }
    }

    public List<Type> BaseClasses {
        get { return _BaseClasses; }
    }

    public List<ReflectionHelperProperties> ReflectProperties(Type baseClass, object instance)
    {
        List<ReflectionHelperProperties> result = new List<ReflectionHelperProperties>();
        foreach (System.Reflection.PropertyInfo p in baseClass.GetProperties(System.Reflection.BindingFlags.DeclaredOnly | 
                                                                             System.Reflection.BindingFlags.GetProperty | 
                                                                             System.Reflection.BindingFlags.Instance | 
                                                                             System.Reflection.BindingFlags.Public)) {
            result.Add(new ReflectionHelperProperties {
                Name = p.Name,
                InstanceValue = p.GetValue(instance, null)
            });
        }
        return result;
    }
}

public class ReflectionHelperProperties
{
    public string Name;
    public object InstanceValue;
} 
```

# java - java.lang.NoClassDefFoundError: org/jboss/netty/channel/ChannelFactory

> ID：11286706
> 
> 赞同：1
> 
> 时间：2012-07-02T00:31:08.453
> 
> 标签：java, ant, netty, build.xml, channelfactory

我正在用 Netty 和 ant 制作一个应用程序。当我编译它时，没有错误。但是当我尝试运行 jar 文件时，它会收到以下消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jboss/netty/channel/ChannelFactory
Caused by: java.lang.ClassNotFoundException: org.jboss.netty.channel.ChannelFactory
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: org.darkquest.gs.Server. Program will exit. 
```

这是我的 build.xml 我的项目：

```
<project default="compile" basedir=".">

        <property name="src" location="src" />
        <property name="build" location="build" />
        <property name="doc" location="doc" />
        <property name="lib" location="lib" />
        <property name="jar" location="runescape.jar" />

        <target name="compile">
                <delete file="${jar}" />
                <delete dir="${build}" />
                <mkdir dir="${build}"/>
                <javac srcdir="${src}" destdir="${build}" debug="on">
                  <compilerarg value="-Xlint:unchecked"/>
                  <classpath>
                        <pathelement location="${lib}/mina.jar" />
                        <pathelement location="${lib}/netty.jar" />
                        <pathelement location="${lib}/xpp3.jar" />
                        <pathelement location="${lib}/slf4j.jar"/>
                        <pathelement location="${lib}/xstream.jar"/>
                        <pathelement location="${lib}/mysql-connector.jar" />
                        <pathelement location="${lib}/hex-string.jar" />
                        <pathelement path="${java.class.path}/"/>
                  </classpath>
                </javac>
                <jar basedir="${build}" destfile="${jar}" >
                        <manifest>
                                <attribute name="Main-Class" value="org.darkquest.gs.Server" />
                        </manifest>
                </jar>
        </target>

        <target name="doc" depends="compile">
                <javadoc sourcepath="${src}" destdir="${doc}" verbose="on" />
        </target>

        <target name="runls">
                <java classname="org.darkquest.ls.Server" fork="true">
                        <jvmarg value="-Xms128m" />
                        <jvmarg value="-Xmx512m" />
                        <arg value="ls.conf" />
                        <classpath>
                                <pathelement location="${lib}/mina.jar" />
                                <pathelement location="${lib}/netty.jar" />
                                <pathelement location="${lib}/xpp3.jar" />
                                <pathelement location="${lib}/slf4j.jar"/>
                                <pathelement location="${lib}/xstream.jar"/>
                                <pathelement location="${lib}/mysql-connector.jar" />
                                <pathelement location="${lib}/hex-string.jar" />
                                <pathelement path="${jar}/" />
                        </classpath>
                </java>
        </target>

        <target name="runserver">
                <java classname="org.darkquest.gs.Server" fork="true">
                        <jvmarg value="-Xms128m" />
                        <jvmarg value="-Xmx512m" />
                        <arg value="server.conf" />
                        <arg value="f2p" />
                        <arg value="no" />
                        <classpath>
                                <pathelement location="${lib}/mina.jar" />
                                <pathelement location="${lib}/xpp3.jar" />
                                <pathelement location="${lib}/netty.jar" />
                                <pathelement location="${lib}/slf4j.jar"/>
                                <pathelement location="${lib}/xstream.jar"/>
                                <pathelement location="${lib}/mysql-connector.jar" />
                                <pathelement location="${lib}/hex-string.jar" />
                                <pathelement path="${jar}/" />
                        </classpath>
                </java>
        </target>

</project> 
```

这些是 netty 库的罐子：

```
ls -la /usr/share/java/netty*
-rw-r--r-- 1 root root 1118026 2012-06-24 15:29 /usr/share/java/netty-3.5.1.Final.jar
lrwxrwxrwx 1 root root      37 2012-07-02 01:31 /usr/share/java/netty.jar -> /usr/share/java/netty-3.5.1.Final.jar
ls -la lib/
total 4904
drwxrwxrwx 1 user user    4096 2012-07-02 01:49 .
drwxr-xr-x 1 user user    4096 2012-07-02 02:21 ..
-rw-rw-rw- 1 user user  281694 2012-06-18 05:43 bsh.jar
-rw-r--r-- 1 user user    6148 2012-06-18 05:48 .DS_Store
-rw-rw-rw- 1 user user    1685 2012-06-18 05:43 hex-string.jar
-rw-rw-rw- 1 user user 2082557 2012-06-18 05:43 jmf.jar
-rw-rw-rw- 1 user user  112249 2012-06-18 05:43 junit.jar
-rw-r----- 1 user user  315582 2012-07-01 15:21 mina-core-1.1.7.jar
-rw-rw-rw- 1 user user  315582 2012-06-18 05:43 mina.jar
-rw-rw-rw- 1 user user  456729 2012-06-18 05:43 mysql-connector.jar
-rw-rw-rw- 1 user user 1118026 2012-07-02 01:49 netty.jar
-rw-rw-rw- 1 user user   13873 2012-06-18 05:43 slf4j.jar
-rw-rw-rw- 1 user user   24538 2012-06-18 05:43 xpp3.jar
-rw-rw-rw- 1 user user  261710 2012-06-18 05:43 xstream.jar 
```

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T00:47:14.757

该错误表示`org.jboss.netty.channel.ChannelFactory`在您的 jar 文件中找不到 netty 类。

`zipfileset`尝试使用以下任务在 jar 中包含 netty 类：

```
<jar basedir="${build}" destfile="${jar}" >
  <manifest>
    <attribute name="Main-Class" value="org.darkquest.gs.Server" />
  </manifest>
  <zipfileset includes="**/*.class" src="${lib}/netty.jar" />
</jar> 
```

# php - 将 ATK4 与 wordpress 开发集成

> ID：11286709
> 
> 赞同：2
> 
> 时间：2012-07-02T00:31:15.527
> 
> 标签：php, wordpress, atk4

我在 atk4 博客[http://agiletoolkit.org/blog/integrating-agile-toolkit-with-wordpress/](http://agiletoolkit.org/blog/integrating-agile-toolkit-with-wordpress/)上找到了一篇文章，我按照说明进行操作，但出现错误，它说找不到 ApiWeb 类。然后我查看了您下载的真实框架的 index.php，它初始化所有内容的方式与博客文章的初始化方式不同。我想知道是否可以集成 ATK4 或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:05:08.127

I'm also currently integrating a wordpress site with ATK4 at the moment.

The ApiWeb.php class is present in the atk4/lib directory in both 4.2 and 4.1.3 versions of atk4 so not sure why you are getting an error.

What is suggested on the blog page about integrating ATK4 with wordpress is that you would load the ATK4 libraries as php embedded in the pages so you would need to ensure you change the include line based on where you have placed the atk4 files.

```
 <?php
   include 'atk4/loader.php';
   $api=new ApiWeb('sample_project');
   $api->add('jUI');
    ..   ..   ..
   $api->execute();
 ?> 
```

I havent tried this but think you would need to verify the path to ATK4 is correct.

I've taken a different approach to integrating Wordpress and ATK4 - rather than embedding ATK4 into the pages as per the blog article you referenced, i'm going with installing wordpress in one installation and ATK4 in a separate one and using the same template in both.

The wordpress template i'm using is from [themeforest](http://themeforest.net/category/wordpress?ref=twjnorth) and it came with a WP folder containing the Wordpress files plus a HTML folder that contains example pages. I took one of the HTML pages and created a new templates/default/shared.html inserting the atk4 tags such as in the appropriate places.

I've created a menu in Wordpress Theme->xxx->Menu which are mostly static pages from Wordpress and one menu option which is a link to the start of the ATK4 root. Because i'm using the same template, it looks like a single site. In my case, i'm not using the login functionality of Wordpress - all the wordpress pages will be accessible without logging in but i am using a dynamic second level menu and options based on the logged in user which will be defined in Frontend.php

The ATK4 menu gave me a problem because it wasnt consistent with the site and after a while trying to style the menus with CSS and create a submenu using Menu_Basic and Menu_Lite, i went with using ATK4 Views and split the HTML from the wordpress theme, to create a menu.html, a submenu.html and a menuitem.html and have set this using code in Frontend.php

It's still a work in progress so i can't provide the link at the moment as it's not online yet but it seems to be working and may give you other ideas depending on what you want to achieve with integrating ATK4 and Wordpress.

If you want to have a common login for ATK4 and Wordpress (using ATK4 to control the access each user has), there is a plugin for Wordpress that might help with [external DB Auth](http://wordpress.org/extend/plugins/external-database-authentication/) so you could use this with the BasicAuth of ATK4 instead of using Wordpress Auth functionality.

# ui-automation - UI 自动化 Com 包装器未找到子控件

> ID：11286710
> 
> 赞同：2
> 
> 时间：2012-07-02T00:31:23.313
> 
> 标签：ui-automation

我有一个上下文菜单（来自 infragistics 的 PopupMenuControlTrusted 控件）

使用inspect.exe我可以轻松找到菜单和子菜单项使用UI自动化验证（http://uiautomationverify.codeplex.com/）我可以找到一些困难的菜单项我需要将鼠标悬停在控件上才能找到它，此时找到具有正确窗口句柄但没有子级的上下文菜单。然后我必须告诉程序再次找到上下文菜单，此时所有子菜单项都找到了。

当我通过代码执行此操作时，我永远找不到孩子，TreeWalker.RawWalker.GetFirstChild(menu) 总是返回 null 我正在引用 UIAComWrapper（与 UI 自动化验证工具中使用的相同）

我尝试使用 ControlWalker，在元素上发送 CacheRequest.Current，但我找不到任何子元素

以前有人遇到过这个问题吗，或者可以给我任何指导以帮助我做什么？

**编辑** 我实际上发现 AutomationElement.FromPoint 可以找到内部元素，从那里我可以使用 tree walker 找到父元素，父元素原来是我之前拥有的菜单，但我仍然无法从中找到子元素菜单，谁能解释一下？我在这里很困惑

# lucene.net - 无法删除 lucene 索引中的现有文档

> ID：11286712
> 
> 赞同：1
> 
> 时间：2012-07-02T00:32:08.383
> 
> 标签：lucene.net, lucene

我正在使用 Lucene.Net（版本 2.9.4.1）来实现一个简单的搜索模块。如果文档存在于索引中，我正在尝试使用以下代码删除该文档，

```
var analyzer = new StandardAnalyzer(Version.LUCENE_29);
var indexWriter = new IndexWriter(
    LuceneSearch._luceneDir,
    analyzer,
    IndexWriter.MaxFieldLength.UNLIMITED);            

var searchQuery = new TermQuery(new Term("ListID", listingDoc.Get("ListID")));

indexWriter.DeleteDocuments(searchQuery); 
```

where`listingDoc`的类型`Document`是我试图删除文档（如果存在），然后将其再次添加到索引中，添加部分工作正常，但删除部分不起作用，即如果文档存在，则不会删除该文档。因此，如果我搜索一个术语并且它匹配它会显示多次...请指出我在此处做错了什么

我正在使用 ASP.Net MVC3 和 Entity Framework4。每次更新记录时，我都打算更新索引，但它却被重复了。当我搜索它时，我会得到两次或三次结果，具体取决于我进行更新的次数。

我尝试使用`indexWriter.UpdateDocument(args);`无济于事...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T06:15:03.900

在调试删除时，有时使用与删除命令相同的参数执行搜索会很有用，以准确查看将要删除的内容。

如果你正在做`deleteDocuments(query)`你应该使用`IndexSearcher`这样的：

```
IndexSearcher is = new IndexSearcher(indexWriter.GetReader());
TopDocs topDocs = is.Search(query, 100); 
```

看看你在 topDocs 中得到了什么。我怀疑你会发现查询没有返回任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T06:35:34.623

你可以简单地做到这一点：

```
 Query query = queryParser.parse("My Query!");
    writer.deleteDocuments(query); 
```

# php - 每个循环的PHP？一定有更好的方法

> ID：11286713
> 
> 赞同：0
> 
> 时间：2012-07-02T00:32:31.463
> 
> 标签：php, for-loop, foreach

```
<?php
header("Content-type: text/plain");
$GLOBALS["db_name"] = "fggff_highscores";
$GLOBALS["table_name"] = "testing";
$GLOBALS["view_user"] = "fgfggg_players";
$GLOBALS["view_pass"] = "removed";

  $username = strip_tags($_GET["player"]);

$fileContents = @file_get_contents("http://hiscore.runescape.com/index_lite.ws?player="         . $username);
echo $fileContents;

if ($fileContents == FALSE) {
    die("PLAYER NOT FOUND");
}

//$content = array();
$data = explode("\n", $fileContents);

/*
foreach ($data as $word) {
$index = $skills[$index];
$new_data = explode (",", $word);
$content[$index]["rank"] = $new_data[0];
    $content[$index]["level"] = $new_data[1];
    $content[$index]["experience"] = $new_data[2];
    $index++;
}
*/

$stats0 = explode(",", $data[0]);

echo "\n";
echo "\n";

echo "Overall Rank: " .number_format($stats0[0]);
echo "\n";
    echo "Total Level: " .number_format($stats0[1]);
echo "\n";
echo "Overall Total XP: " .number_format($stats0[2]);

$stats1 = explode(",", $data[1]);

echo "\n";
echo "\n";

echo "Attack Rank: " .number_format($stats1[0]);
echo "\n";
echo "Attack Level: " .number_format($stats1[1]);
echo "\n";
echo "Attack XP: " .number_format($stats1[2]);

$stats2 = explode(",", $data[2]);

    echo "\n";
echo "\n";

echo "Defence Rank: " .number_format($stats2[0]);
echo "\n";
echo "Defence Level: " .number_format($stats2[1]);
echo "\n";
echo "Defence XP: " .number_format($stats2[2]);

?> 
```

上面的示例在运行时应该可以工作，您可以使用此播放器查看输出 -- .php?player=zezima

```
The output of each $data[0] is something like--------53,2496,1661657944

53-----------------------number_format($stats0[0])
2,496--------------------number_format($stats0[1])
1,661,657,944------------number_format($stats0[2]) 
```

--

然后我试图将每个 $data[] 索引分解为 3 部分，我上面的方式是可行的，但我希望能够为每个循环执行类似的操作来遍历每个 $data[] 索引并中断每个向上使用explode(",", $data[0]); 爆炸（“，”，$数据[1]）；爆炸（“，”，$数据[2]）；但它每次都会增加索引。我最终需要的是每个值都在我可以使用的变量中。例子：

```
$apple = number_format($stats0[0]);
echo $apple; 
```

这是我尝试过的：

```
$content = array();
foreach ($data as $word) {
$index = $skills[$index];
$new_data = explode (",", $word);
$content[$index]["rank"] = $new_data[0];
$content[$index]["level"] = $new_data[1];
$content[$index]["experience"] = $new_data[2];
$index++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:01:32.403

而不是一次又一次地重复自己，创建一个像这样的函数：

```
function print($data, $i){
 $stats0 = explode(",", $data[$i]);    
 echo "\n\nOverall Rank: " .number_format($stats0[0]) . "\n";
 echo "Total Level: " .number_format($stats0[1]) . "\n";
 echo "Overall Total XP: " .number_format($stats0[2]);
} 
```

并循环调用它。

# android - Android AlarmManager 警报被任务管理器杀死

> ID：11286721
> 
> 赞同：0
> 
> 时间：2012-07-02T00:34:17.057
> 
> 标签：android, android-service, android-alarms

所以我一直在编写一个应用程序，它使用警报每隔几个小时左右打开一项服务。我的 Galaxy S2 Skyrocket 有一个内置的任务管理器，允许我“退出”最近打开的应用程序。在我设置警报后，如果我进入任务管理器并“退出”我的应用程序，它会杀死我的警报。有没有办法防止这种情况？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:47:55.380

这是可以理解的，因为您正在强制系统摆脱任务管理器中的应用程序以及它正在运行的服务。

如果您在 Eclipse 中观察 DDMS，您会发现无论何时您的服务开始运行，您都会看到您的应用程序的名称出现在列表下方。因此，通过要求警报管理器在您强制关闭应用程序时继续运行，您正在想象一个类似病毒的应用程序，而用户不会想要这样。

如果您的应用程序被任务管理器终止的可能性很高，那么另一种选择可能是创建另一个备份应用程序来监控您的服务是否按时运行，如果没有则触发启动它的意图。不过，这会导致应用程序相互监控的无限循环，我不确定它有多实用。

# php - 锚标记中不包含的内容的正则表达式

> ID：11286723
> 
> 赞同：0
> 
> 时间：2012-07-02T00:34:40.877
> 
> 标签：php, regex, anchor

我想`preg_replace`在一个字符串上运行一个 PHP 函数，但我需要它来忽略锚标记内的任何内容。

例如。

```
string = 'alpha beta delta gamma <a href="somelink.html">alpha beta delta gamma</a>'
to match = 'beta delta' 
```

我怎样才能让它只接受第一个实例`beta delta`而不是第二个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:52:26.907

您可以否定前瞻结束标记：

```
preg_replace("/$to_match(?![^<]*<\/)/", 'foo', $string); 
```

此外，您不应该在 html 上使用正则表达式。

# jquery - Jquery将嵌套元素的高度设置为其包含元素的高度

> ID：11286728
> 
> 赞同：0
> 
> 时间：2012-07-02T00:36:54.387
> 
> 标签：jquery, html

我认为这是一个相当简单的问题，但我无法理解它，而且我对 jQuery 不太了解。我在 . 文章高度因内容而异（它是一篇博文，所以有些短，有些长）。我希望我的 div 与它嵌套的文章的高度相匹配。

HTML：

```
 <article class="PostHome">
    <div class="ColorBarLeft"></div>
        <header>
            <h3>@Html.DisplayFor(modelItem => item.Title)</h3>
            <small>@Html.DisplayFor(modelItem => item.DateCreated)</small>
        </header>

        <section id="PostContent">
            @Html.DisplayFor(modelItem => item.Content)
        </section>

        <section id ="PostTags">
            @Html.Label("Tags:")
            @Html.DisplayFor(modelItem => item.Tags)
        </section>

        @Html.ActionLink("View Full Post", "Post", new { blogTitle = item.Title.Replace(" ", "-"), id = item.Id}, null)
    </article> 
```

然后我尝试了一些像这样的jQuery：

```
$(document).ready(function () {
$(".ColorBarLeft").height(function () {
    var height = $(this).height()
    $('.PostHome').height(height);
})
}); 
```

我认为该代码是正确的，但它可能再次关闭，不太擅长 jQuery。

而且我不知道这是否重要，但页面上一次会有多个 posthomes 和 ColorBarlefts。

***编辑，将 id=PostHome 更改为 class=PostHome

![在此处输入图像描述](../Images/63d8f851a009d831aca047a3d971562b.png)

我想要红色波浪形盒子所在的酒吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:41:06.663

尝试这个：

```
 $(document).ready(function () {
   $('.ColorBarLeft').height( $(".PostHome").innerHeight() + 'px' );
 }); 
```

如果有多个`.PostHome`对象，并且您只想定位第一个对象，请执行以下操作：

```
 $(document).ready(function () {
   $('.ColorBarLeft').height( $(".PostHome:eq(0)").innerHeight() + 'px' );
 }); 
```

我正在使用`innerHeight()`而不是 Height，因为此方法返回元素的高度，包括顶部和底部填充，以像素为单位，而`Height()`不会返回带有填充的高度。

[http://api.jquery.com/innerHeight/](http://api.jquery.com/innerHeight/)

或者您可以简单地为此使用 CSS .. 在您的样式表中：

```
.ColorBarLeft { height:100%; } 
```

但这只有在包含对象具有明确的高度设置时才有效，以 px 或 em 等为单位，正如 Matt Coughlin 所说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:42:24.290

另一种方法是将颜色条作为 bg 图像添加到文章中，而不是添加 div。如果需要，给文章左填充等于颜色条的宽度。

另一种选择是让 div 充当文章内所有内容的包装器，并将颜色条（bg 图像和可选的左填充）添加到 div。

在这两种情况下，bg 图像都将应用于自然保证具有正确高度的元素，而无需 jQuery 的任何帮助。如果页面打开时内容的高度可能会发生变化，这尤其有用，因为它不需要使用 jQuery 更新高度。

**编辑：**

我认为唯一的纯 CSS 解决方案（不需要 jQuery/JavaScript）是如果文章位于与上下内容不同的容器中，所有 3 个容器分别水平居中在页面中。在这种情况下，文章的容器可以在左侧有一个背景图像，然后可以给文章一个固定的宽度并水平居中。这避免了对 jQuery 的需求，不需要绝对定位（这会将内容从布局流中取出），并且如果在页面打开时内容发生变化，则不需要更新高度。

否则，它会回到第一方，只是找到正确的 jQuery 代码来为颜色条 div 设置适当的高度。如果文章内容动态变化，请务必重新应用高度。

```
$('.ColorBarLeft').height($('.PostHome').height()); 
```

# flash - 以动画 GIF 结束 Flash 电影

> ID：11286730
> 
> 赞同：0
> 
> 时间：2012-07-02T00:37:08.710
> 
> 标签：flash

有没有办法用动画 GIF 来结束 Flash 电影，它会在 Flash 播放器的窗口中无限期地播放动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:41:42.857

已经创建了一个可以加载和播放大多数动画 GIF 的类。

> 有了这个新`GIFPlayer`类，一切都得到了处理，我添加了一些方法，就像您在传统`flash.display.MovieClip`
> 
> 来源中调用的那样：[http ://www.bytearray.org/?p=95](http://www.bytearray.org/?p=95)

# permissions - 身份验证对话框要求扩展权限，但我的应用不需要它们。如何防止身份验证对话框显示第二页？

> ID：11286732
> 
> 赞同：0
> 
> 时间：2012-07-02T00:37:16.713
> 
> 标签：permissions, facebook-authentication

我设置了一个应用程序，允许用户使用 Facebook 登录我的网站。当用户单击 FB 登录按钮时，会出现预期的身份验证对话框。我的身份验证对话框显示第二页，上面写着：“此应用程序可能会代表您发布，包括状态更新、照片等。”

但我的应用不需要任何扩展权限，也不会向 Facebook 发布任何内容。我不希望出现第二页，但我不知道如何让它消失。

在我的应用程序设置页面上，我没有指定任何扩展权限。还有其他地方我必须指定我不想要扩展权限吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:30:05.853

您可能在“使用 Facebook 登录”按钮中指定了一个范围，该范围会向用户请求这些权限。尤其是如果您只是从文档中复制并粘贴了一个示例，则可能会发生这种情况。

检查您的 HTML 是否有类似的内容：

```
<div class="fb-login-button" scope="publish_stream">
    Login with Facebook
</div> 
```

如果是这样，请确保摆脱该`scope`属性。

# php - mysql 在同一个查询上有和 where 子句

> ID：11286735
> 
> 赞同：7
> 
> 时间：2012-07-02T00:38:03.623
> 
> 标签：php, mysql, sql, select

这是我的代码：

```
$sqlz = "SELECT t1.user_id, t2.status, t2.email 
         FROM coverages t1 
         LEFT JOIN users t2 ON t1.user_id = t2.user_id 
         GROUP BY t1.user_id  
         HAVING COUNT(t1.user_id) =".$value; 
```

我想添加这个“ `WHERE users.email IS NOT NULL`”当我添加它时，它返回一个白页/没有结果。我知道事实上数据库上至少有 200 个结果包含电子邮件并且符合该标准。

这是我所做但不起作用的示例：

```
 $sqlz =    "SELECT t1.user_id, t2.status, t2.email 
             FROM coverages t1 
             LEFT JOIN users t2 ON t1.user_id = t2.user_id
             WHERE users.email IS NOT NULL 
             GROUP BY t1.user_id  
             HAVING COUNT(t1.user_id) =".$value; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-02T00:40:44.517

我认为您需要使用`t2`( *alias* ) 而不是`users`.

```
 $sqlz =    "SELECT t1.user_id, t2.status, t2.email 
             FROM coverages t1 
                     LEFT JOIN users t2 ON t1.user_id = t2.user_id
             WHERE t2.email IS NOT NULL 
             GROUP BY t1.user_id  
             HAVING COUNT(t1.user_id) = " .$value; 
```

# c - C - 使用多个线程时使用 lseek() 获得的 write() 位置不准确

> ID：11286736
> 
> 赞同：0
> 
> 时间：2012-07-02T00:38:06.277
> 
> 标签：c, file-io, pthreads

当使用多个线程同时写入同一文件的不同部分时，我在获取正确的文件位置时遇到问题。

我有一个文件的全局文件描述符。在我的写作功能中，我首先锁定一个互斥锁，然后`lseek(global_fd, 0, SEEK_CUR)`获取当前文件位置。接下来我使用 写入 31 个零字节（31 是我的条目大小）`write()`，实际上是为以后保留空间。然后我解锁互斥锁。

稍后在函数中，我`fd`为同一个文件声明了一个局部变量，然后打开它。我现在`lseek`对该本地进行一次操作，`fd`以到达我之前学到的位置，我的空间是保留的。最后，我`write()`在那里输入了 31 个数据字节，并关闭了本地`fd`.

问题似乎很少，条目没有写入预期的位置（它不是损坏的数据 - 似乎它与不同的条目交换，或者两个条目被写入相同的位置）。有多个线程在运行我描述的“写入功能”。

从那以后我了解到`pwrite()`可以用来写入特定的偏移量，这样效率更高，并且消除了`lseek()`. 但是，我首先要弄清楚：我原来的算法有什么问题？是否有任何类型的缓冲可能导致预期写入位置与数据实际最终存储在文件中的位置之间的差异？

相关代码片段如下。这是一个问题的原因是，在第二个数据文件中，我记录了我正在编写的条目将被存储的位置。如果根据`lseek()`写入之前的位置不准确，我的数据不正确匹配——这有时会发生（很难重现——它可能发生在 100k 写入中的 1 次）。谢谢！

```
db_entry_add(...)
{
   char dbrecord[DB_ENTRY_SIZE];
   int retval;

   pthread_mutex_lock(&db_mutex);

   /* determine the EOF index, at which we will add the log entry */
   off_t ndb_offset = lseek(cfg.curr_fd, 0, SEEK_CUR);
   if (ndb_offset == -1)
   {
      fprintf(stderr, "Unable to determine ndb offset: %s\n", strerror_s(errno, ebuf, sizeof(ebuf)));
      pthread_mutex_unlock(&db_mutex);
      return 0;
   }

   /* reserve entry-size bytes at the location, at which we will
      later add the log entry */
   memset(dbrecord, 0, sizeof(dbrecord));

   /* note: db_write() is a write() loop */ 
   if (db_write(cfg.curr_fd, (char *) &dbrecord, DB_ENTRY_SIZE) < 0)
   {
      fprintf(stderr, "db_entry_add2db - db_write failed!");
      close(curr_fd);
      pthread_mutex_unlock(&db_mutex);

      return 0;
   }

   pthread_mutex_unlock(&db_mutex);

   /* in another data file, we now record that the entry we're going to write 
      will be at the specified location. if it's not (which is the problem,
      on rare occasion), our data will be inconsistent */ 
   advertise_entry_location(ndb_offset);
   ...

   /* open the data file */
   int write_fd = open(path, O_CREAT|O_LARGEFILE|O_WRONLY, 0644);
   if (write_fd < 0)
   {
      fprintf(stderr, "%s: Unable to open file %s: %s\n", __func__, cfg.curr_silo_db_path, strerror_s(errno, ebuf, sizeof(ebuf)));
      return 0;
   }

   pthread_mutex_lock(&db_mutex);

   /* seek to our reserved write location */
   if (lseek(write_fd, ndb_offset, SEEK_SET) == -1)
   {
      fprintf(stderr, "%s: lseek failed: %s\n", __func__, strerror_s(errno, ebuf, sizeof(ebuf)));
      close(write_fd);
      return 0;
   }

   pthread_mutex_unlock(&db_mutex);

   /* write the entry */
   /* note: db_write_with_mutex is a write() loop wrapped with db_mutex lock and unlock */ 
   if (db_write_with_mutex(write_fd, (char *) &dbrecord, DB_ENTRY_SIZE) < 0)
   {
      fprintf(stderr, "db_entry_add2db - db_write failed!");         
      close(write_fd);

      return 0;
   }

   /* close the data file */
   close(write_fd);

   return 1; 
} 
```

为了完整起见，还要注意。我有一个类似但更简单的例程，也可能导致问题。这个使用缓冲输出`(FILE*, fopen, fwrite)`，但`fflush()`在每次写入结束时执行。它写入与先前例程*不同的文件*，但可能导致相同的症状。

```
pthread_mutex_lock(&data_mutex);

/* determine the offset at which the data will be written. this has to be accurate,    
otherwise it could be causing the problem */ 
offset = ftell(current_fp);

fwrite(data);
fflush(current_fp);

pthread_mutex_unlock(&data_mutex); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:37:41.543

似乎有几个地方可能会出错。我将进行以下更改：(1) 保持一致并按照 bdonlan 的建议使用相同的 I/O 库，(2) 使 lseek() 并写入由互斥锁保护的原子操作，以便只有一个线程一次可以执行添加到两个文件的操作。SEEK_CUR 根据文件偏移指针的当前位置进行搜索，所以您不希望 SEEK_END 搜索到文件末尾以便追加到那里吗？然后，如果您正在修改文件的特定部分，您将使用 SEEK_SET 重新定位到您要写入的位置。您可能希望在互斥锁保护部分中执行此操作，以便仅允许单个线程进行文件定位和文件更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T01:10:56.883

如果您同时使用“更简单的例程”，这确实可能是个问题。如果这些是单独的文件描述符，则无法确保它们始终都指向文件末尾（除非您使用附加模式，但是我不确定附加模式的 ftell 语义是什么）。如果它们是相同的 fd（即，您有一个原始 fd 和一个指向同一个地方的 fd），那么当您使用绕过它`FILE *`时，您可能会遇到标准库混淆您在文件中的位置的问题。`write()`

# c++ - 分析图结构的性能

> ID：11286739
> 
> 赞同：0
> 
> 时间：2012-07-02T00:39:44.590
> 
> 标签：c++, maya

我正在编写一个工具，用于在应用程序的依赖关系图中获取时间切片的性能数据（特别是 Maya 的依赖关系图：[http](http://accad.osu.edu/~sconroy/sched/syllabus/Dependency%20Graph.htm) ://accad.osu.edu/~sconroy/sched/syllabus/Dependency%20Graph.htm ）。我想做的是为用户提供一种分析方法（生成的数据量很大，所以一个简单的电子表格会让人不知所措）。

我想知道是否有既定的方法/算法来做这种事情。在那儿？

注意：我意识到这不是一个严格的编程问题，但我希望你能原谅它，因为这是一个有趣的话题:)

第二个注意：我已经有了数据，我只需要实现（或找到一个工作流）让非技术用户来分析它。

干杯，恩拉克

# android - 用最少的代码在冰淇淋三明治中制作安卓标签的正确方法

> ID：11286740
> 
> 赞同：1
> 
> 时间：2012-07-02T00:39:58.867
> 
> 标签：android

所以我一直在寻找一种简单的方法来制作冰淇淋三明治。似乎 Tab Activity 已被弃用，官方 android 网站上的 Fragment 示例似乎有点多。我现在正在阅读的 android 教程似乎使标签很重要，但扩展了 TabActivity。有人可以指出我正确的方向吗？一些示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:58:21.517

[ActionBarSherlock](http://actionbarsherlock.com/)支持选项卡。如果您在使用现有的 Android API 实现它时遇到问题，我会建议您这样做。

它带有源代码、应用示例（可从 Market/Play 下载）和源示例。这些示例非常小（代码大小）且简单但详细。真的不能好起来了。

# objective-c - 在 NSString 中隐藏字符

> ID：11286746
> 
> 赞同：0
> 
> 时间：2012-07-02T00:41:47.867
> 
> 标签：objective-c, xcode

在我的视图控制器的标题视图中，我有这个字符串：

```
@"the guy 1137937485" 
```

有没有办法隐藏数字，或者换句话说隐藏字符串的最后 10 个字符？隐藏我的意思不是删除。我仍然需要角色；我只是希望用户看不到它们。这些数字是随机的，但总是 10 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T00:43:18.347

只需创建一个`NSString`没有最后 10 个字符的新字符。

```
NSString *newstring = [yourstring substringToIndex:[yourstring length] - 10]; 
```

# xml - 使用 XSLT 将输入 XML 转换为其他 XML

> ID：11286748
> 
> 赞同：1
> 
> 时间：2012-07-02T00:42:18.457
> 
> 标签：xml, xslt, xml-parsing

我是初学者，想学习 XSLT。我遇到了使用 XSLT 将输入 XML 文件转换为另一个 XML 文件的问题。

我的输入 XML 文件：

```
<album>
<album_num>hi.hello</album_num>
<album_name>Cocktail</album_name>
</album>
<album>
<album_num>hey.hello</album_num>
<album_name>Mocktail</album_name>
</album>
<album>
<album_num>hey.mello</album_num>
<album_name>Monkeytail</album_name>
</album>
<album>
<album_num>hey.yellow</album_num>
<album_name>Donkeytail</album_name>
</album>
<album>
<album_num>swallow</album_num>
<album_name>abc</album_name>
</album> 
```

我想得到一个这样的输出 XML 文件：

```
<album>
<album_num>
<hi>
<hello>cocktail</hello>
</hi>
</album_num>
<album_num>
<hey>
<hello>MockTail</hello>
<mello>Monkeytail</mello>
<yellow>Donkeytail</yellow>
</hey>
</album_num>
<album_num>
<swallow>abc</swallow>
</album_num>
</album> 
```

我通过创建变量尝试了第一部分，但是在将相似元素合并到一个元素下时遇到了问题。任何代码都可以帮助我学习。

我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<album>
<xsl:variable name="fstval" select='substring-before(//album/album_num,".")'/>
<xsl:variable name="secval" select='substring-after(//album/album_num,".")'/>
<xsl:variable name="valtoappend" select='//album/album_name'/>
<album_num>
<xsl:element name="{$fstval}">
<xsl:element name="{$secval}">
<xsl:value-of select="$valtoappend"/>
</xsl:element>
</xsl:element>
</xsl:for-each>
</album_num>
</album>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:25:36.007

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kAlbumByChildName" match="album" use="name(album_num/*[1])"/>

 <xsl:template match="/">
  <xsl:variable name="vrtfPass1">
    <xsl:apply-templates/>
  </xsl:variable>

  <xsl:apply-templates mode="pass2" select=
  "ext:node-set($vrtfPass1)/*
           [generate-id()
           =
            generate-id(key('kAlbumByChildName', name(album_num/*[1]))[1])
           ]
  "/>
 </xsl:template>

 <xsl:template match="album">
  <album>
   <album_num>
       <xsl:element name="{substring-before(album_num, '.')}">
         <xsl:element name="{substring-after(album_num, '.')}">
           <xsl:value-of select="album_name"/>
         </xsl:element>
       </xsl:element>
   </album_num>
  </album>
 </xsl:template>

 <xsl:template match="album" mode="pass2">
  <album>
   <album_num>
        <xsl:apply-templates select="*/*[1]" mode="pass2"/>
    </album_num>
  </album>
 </xsl:template>

 <xsl:template match="album_num/*" mode="pass2">
  <xsl:copy>
   <xsl:copy-of select="key('kAlbumByChildName', name())/*/*/*"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下文档时**（提供的 XML 片段包装在单个顶部元素中以使其成为格式良好的 XML 文档）：

```
<t>
    <album>
        <album_num>hi.hello</album_num>
        <album_name>Cocktail</album_name>
    </album>
    <album>
        <album_num>hey.hello</album_num>
        <album_name>Mocktail</album_name>
    </album>
    <album>
        <album_num>hey.mello</album_num>
        <album_name>Monkeytail</album_name>
    </album>
    <album>
        <album_num>hey.yellow</album_num>
        <album_name>Donkeytail</album_name>
    </album>
</t> 
```

**产生想要的正确结果：**

```
<album>
   <album_num>
      <hi>
         <hello>Cocktail</hello>
      </hi>
   </album_num>
</album>
<album>
   <album_num>
      <hey>
         <hello>Mocktail</hello>
         <mello>Monkeytail</mello>
         <yellow>Donkeytail</yellow>
      </hey>
   </album_num>
</album> 
```

**说明**：

**这是一个两遍转换。第一遍的结果是**：

```
<album>
   <album_num>
      <hi>
         <hello>Cocktail</hello>
      </hi>
   </album_num>
</album>

<album>
   <album_num>
      <hey>
         <hello>Mocktail</hello>
      </hey>
   </album_num>
</album>

<album>
   <album_num>
      <hey>
         <mello>Monkeytail</mello>
      </hey>
   </album_num>
</album>

<album>
   <album_num>
      <hey>
         <yellow>Donkeytail</yellow>
      </hey>
   </album_num>
</album> 
```

**第二遍是标准的Muenchian分组。**

**更新**：

在提出这个问题并收到正确答案两天后，OP 更改了源 XML 文档并希望得到结果。

**这个稍作修改的转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:key name="kAlbumByChildName" match="album" use="name(album_num/*[1])"/>

     <xsl:template match="/">
      <xsl:variable name="vrtfPass1">
        <xsl:apply-templates/>
      </xsl:variable>

      <xsl:apply-templates mode="pass2" select=
      "ext:node-set($vrtfPass1)/*
               [generate-id()
               =
                generate-id(key('kAlbumByChildName', name(album_num/*[1]))[1])
               or
                not(album_num/*)
               ]
      "/>

     </xsl:template>

     <xsl:template match="album[contains(album_num, '.')]">
      <album>
       <album_num>
           <xsl:element name="{substring-before(album_num, '.')}">
             <xsl:element name="{substring-after(album_num, '.')}">
               <xsl:value-of select="album_name"/>
             </xsl:element>
           </xsl:element>
       </album_num>
      </album>
     </xsl:template>

     <xsl:template match="album">
      <album>
       <album_num>
             <xsl:element name="{album_num}">
               <xsl:value-of select="album_name"/>
             </xsl:element>
       </album_num>
      </album>
     </xsl:template>

     <xsl:template match="album" mode="pass2">
      <album>
       <album_num>
            <xsl:apply-templates select="*/*[1]" mode="pass2"/>
        </album_num>
      </album>
     </xsl:template>

     <xsl:template match="album_num/*" mode="pass2">
      <xsl:copy>
       <xsl:copy-of select="self::*[not(*)]/text()|key('kAlbumByChildName', name())/*/*/*"/>
      </xsl:copy>
     </xsl:template>
</xsl:stylesheet> 
```

**当应用于新版本的 XML 文档时**：

```
<t>
    <album>
        <album_num>hi.hello</album_num>
        <album_name>Cocktail</album_name>
    </album>
    <album>
        <album_num>hey.hello</album_num>
        <album_name>Mocktail</album_name>
    </album>
    <album>
        <album_num>hey.mello</album_num>
        <album_name>Monkeytail</album_name>
    </album>
    <album>
        <album_num>hey.yellow</album_num>
        <album_name>Donkeytail</album_name>
    </album>
    <album>
        <album_num>swallow</album_num>
        <album_name>abc</album_name>
    </album>
</t> 
```

**产生新的想要的结果**：

```
<album>
   <album_num>
      <hi>
         <hello>Cocktail</hello>
      </hi>
   </album_num>
</album>
<album>
   <album_num>
      <hey>
         <hello>Mocktail</hello>
         <mello>Monkeytail</mello>
         <yellow>Donkeytail</yellow>
      </hey>
   </album_num>
</album>
<album>
   <album_num>
      <swallow>abc</swallow>
   </album_num>
</album> 
```

# c++ - stl 对象指针的列表迭代器

> ID：11286752
> 
> 赞同：-1
> 
> 时间：2012-07-02T00:43:25.977
> 
> 标签：c++, stl, iterator

我读过一些关于这个主题的帖子，但我不知道，使用对象指针的 stl 列表，当我想通过迭代器访问元素函数时，应用程序让我得到空指针的错误运行时间。有人会帮我吗？我很感激任何帮助。提前致谢。这是代码的一部分：

```
 typedef std::list<Actor> listActors;
  listActors listactors = pMain->Actors();
  listActors::iterator iter = listactors.begin();

std::string nameactor;
nameactor = (*iter)->getName();//Here the app get a run time error of null pointer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:18:51.803

`(*iter)->getName();`是错的。你应该写要么`iter->getName();`要么`(*iter).getName();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:05:10.313

不要投票这不是答案。但是评论区太长了。
当问题得到适当更新时，我将删除。

这个：

```
typedef std::list<Actor> listActors; 
```

说您的列表中充满了 Actor 的对象，**而不是**指向 Actor 的指针。

因此，如果这样：

```
nameactor = (*iter)->getName(); 
```

编译，则 (*iter) 是一个 Actor 对象，您可以在其上使用 -> 的唯一方法是该类重载`operator->()`并返回一个为 NULL 的指针。

由于我们没有 Actor 的代码，我们无法告诉您出了什么问题，或者您**更有可能**在创建问题时犯了剪切粘贴错误。在这种情况下，我们也无能为力。

您需要编写我们可以编译和运行的代码来复制问题。他们将确切的代码粘贴到问题中。

# ruby-on-rails - 使用 activeadmin 使用回形针一次上传多个图像

> ID：11286756
> 
> 赞同：1
> 
> 时间：2012-07-02T00:44:24.370
> 
> 标签：ruby-on-rails, activeadmin

我试图让自己使用活动管理员为每个模型上传 5 张图片，但我似乎不知道该怎么做。到目前为止，这是我的 activeadmin 代码：

```
ActiveAdmin.register Piece do
  form :html => { :enctype => "multipart/form-data" } do |f|
    f.inputs "Details" do
      f.input :name
      f.input :description
      f.input :cost
      f.input :category
      f.input :photo, :as => :file, :hint => f.template.image_tag(f.object.photo.url(:medium))
    end
    f.buttons
  end

  index do
    column :id
    column :name
    column :cost
    column :category
    column :inventory_count
    column :available_count
    column :materials
    column :created_at
    default_actions
  end
end 
```

我如何一次允许 5 个而不是 1 个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T16:57:17.187

这是它的工作原理：

```
class Piece
  has_many :pictures
  accepts_nested_attributes_for :pictures
end

class Picture
  has_attached_file :photo
end 
```

然后在您的活动管理表单中，您将

```
f.has_many :pictures do |ff|
  ff.input :photo, as: :file, :hint => ff.template.image_tag(ff.object.photo.thumb.url)
  ff.input :_destroy, as: :boolean
end 
```

# javascript - 如何添加到 JavaScript 对象

> ID：11286757
> 
> 赞同：4
> 
> 时间：2012-07-02T00:44:37.707
> 
> 标签：javascript, object

> **可能重复：**
> [将成员添加到现有对象](https://stackoverflow.com/questions/4601008/adding-members-to-an-existing-object)

假设您有以下对象：

```
var object = {
    name: "Shawn"
}; 
```

我想知道是否有一个函数，所以我可以向这个对象添加一个新的“部分”。

像这样的例子：

`object.add('age',14);`

将上述对象变为：

```
var object = {
    name: "Shawn",
    age: 14
} 
```

如果你问，“我试过什么”。我的回答是：“没什么，我不会问我是否知道该怎么做”。我认为应该可以做到。但我只是不知道我会怎么做。

我查看了 w3schools，但不记得看到过为此的内置功能。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T00:46:48.517

您可以使用点运算符添加函数属性和方法`.`：

```
obj.age = 24; 
```

这也是等价的：

```
obj['age'] = 24; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T00:46:00.393

使用数组语法：

```
object['age'] = 14; 
```

或者如果属性名称不需要是动态的：

```
object.age = 14; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T00:46:33.913

```
var obj = {
    name: "Shawn"
};
obj.age=14;
alert(obj.age) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T00:46:28.507

它很简单：

```
var object = {
    name: "Shawn"
};
object.age = 14; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T00:46:29.240

```
var object = {
    name: "Shawn"
};
object.age = 14; 
```

# sql-server - (IGNORE_DUP_KEY = ON) 还是在执行 INSERT 时进行排他检查？

> ID：11286759
> 
> 赞同：0
> 
> 时间：2012-07-02T00:44:58.253
> 
> 标签：sql-server, sql-server-2008, optimization

[这里](https://stackoverflow.com/questions/1139050/how-to-ignore-duplicate-key-error-in-t-sql-sql-server)有一篇文章说这是一个坏主意，并且我必须始终`INSERT`只使用不在数据库中的数据，而不是使用唯一约束。现在我的表结构如下：

```
CREATE TABLE [dbo].[TEST](
    [ColA] [varchar](255) NULL,
    [ColB] [datetime] NULL,
    [ColC] [datetime] NULL,
    [ColD] [int] NOT NULL,
) ON [PRIMARY] 
```

只需要唯一的行，所以对我来说，将唯一约束设置为：

```
ALTER TABLE dbo.TEST
  ADD CONSTRAINT uniqueRows UNIQUE (ColA, ColB, ColC, ColD) WITH (IGNORE_DUP_KEY = ON) 
```

当使用新信息时，由于多种原因，可能会处理重复数据，因为我的代码不维护状态，因此至少对我来说忽略任何重复数据是有意义的。

但是，在[链接的帖子](https://stackoverflow.com/questions/1139050/how-to-ignore-duplicate-key-error-in-t-sql-sql-server)中，@PhilipKelley 在他的[回答](https://stackoverflow.com/a/1139268/184046)中说这是一个坏主意，应该按照以下方式进行检查：

```
INSERT INTO X 
VALUES(Y,Z)    
WHERE Y  NOT IN (SELECT Y FROM X) 
```

在我的情况下，这转化为：

```
INSERT INTO dbo.TEST 
VALUES(ValA,ValB,ValC,ValD) 
WHERE (Some complicated check) 
```

或者也许做一些花哨的主键。[这里](https://stackoverflow.com/questions/689929/ignore-dup-key-option-in-sql-server)的响应暗示，如果我知道这确实被用作一项功能，我可以继续使用该`IGNORE_DUP_KEY`选项，一切都会好起来的。就我而言，建议的路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:24:17.047

我个人认为你应该做三件事：

1.  绝对有唯一的约束来保护最基本的数据。
2.  在盲目插入行之前检查潜在的违规行为。
3.  将 TRY/CATCH 包裹在最终插入周围，以保护用户免受检查失败的异常。

对于单行插入，这可以很简单：

```
BEGIN TRY
  INSERT dbo.TEST(ValA, ValB, ValC, ValD)
    SELECT @ValA, @ValB, @ValC, @ValD
    WHERE NOT EXISTS
    (SELECT 1 FROM dbo.TEST
      WHERE ValA = @ValA AND ValB = @ValB AND ValC = @ValC AND ValD = @ValD);
END TRY
BEGIN CATCH
  PRINT 'Move along, nothing to see here...';
END CATCH 
```

如果这些列中的任何一个或所有可以为空，它就会变得更加复杂。

对于多行插入，您可以通过多种方式进行处理。如果存在非唯一值（单独在批处理中或与表冲突），您可以让整个批处理失败，或者您可以只允许成功的行进入表。情况一：

```
 IF EXISTS (SELECT 1 FROM @SourceOfMultipleRows AS r
    WHERE EXISTS (SELECT 1 FROM dbo.Test AS t WHERE t.ValA = r.ValA AND ...))
  OR EXISTS (SELECT 1 FROM @SourceOfMultipleRows
    GROUP BY ValA, ValB, ValC, ValD HAVING COUNT(*) > 1)
  BEGIN
    PRINT 'Not proceeding at all.';
  END
  ELSE
  BEGIN
    BEGIN TRY
      INSERT dbo.TEST(ValA, ValB, ValC, ValD)
        SELECT ValA, ValB, ValC, ValD
        FROM @SourceOfMultipleRows AS r
        WHERE NOT EXISTS (SELECT 1 FROM dbo.Test AS t
          WHERE t.ValA = r.ValA AND ...)
        GROUP BY ValA, ValB, ValC, ValD;
    END TRY
    BEGIN CATCH
      PRINT 'Move along, nothing to see here...';
    END CATCH
  END 
```

场景 B，您希望保留好的行并忽略重复项：

```
BEGIN TRY
  INSERT dbo.TEST(ValA, ValB, ValC, ValD)
    SELECT ValA, ValB, ValC, ValD
    FROM @SourceOfMultipleRows AS r
    WHERE NOT EXISTS (SELECT 1 FROM dbo.Test AS t
      WHERE t.ValA = r.ValA AND ...)
    GROUP BY ValA, ValB, ValC, ValD;
END TRY
BEGIN CATCH
  PRINT 'Move along...';
END CATCH 
```

# ios - 向列表相同的应用发送邀请

> ID：11286764
> 
> 赞同：-1
> 
> 时间：2012-07-02T00:45:46.613
> 
> 标签：ios, xcode, ios5, sdk

我对 iOS 5 很陌生，我正在考虑编写一个应用程序。

我会在应用程序中列出拥有它的人。然后我会邀请他们参加一个活动。我现在不需要任何代码，我只想知道这背后的概念。

首先，应用程序如何识别安装了我的应用程序，因此它可以显示人员列表。其次，在与一群人创建活动后，我如何向他们发送邀请。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:20:16.650

从一个非常普遍的角度来看，您需要一个后端服务器来与您的应用程序交互并存储用户/事件信息。您可以自己构建或尝试使用[Parse 之](http://www.parse.com)类的服务。

# java - "" 和 ' ' 和有什么不一样？

> ID：11286773
> 
> 赞同：0
> 
> 时间：2012-07-02T00:47:28.723
> 
> 标签：java, string, char

> **可能重复：**
> [Java 中的单引号和双引号有区别吗？](https://stackoverflow.com/questions/439485/is-there-a-difference-between-single-and-double-quotes-in-java)

我已经看到一些代码使用 ' ' 版本来相互减去我认为不可能的字符值，这让我思考他们到底推断出什么不同？

**"" 和 ' ' 和有什么不一样？**（他们如何改变代码如何看待撇号/引号等中的内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:48:56.360

区别在于类型。`" "`是字符串文字，Java String 仅包含空格字符，并且`' '`是字符文字或文字 Java `char`。String 可以包含 1、2、3`char`或更多，并且 Strings 由底层`char`值数组组成，例如`' '`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:49:06.457

单引号变量如`' '`被解释为 a `char`，而双引号变量如`" "`is a `String`。

# javascript - 如何在 CSS / DOM 中实现调整大小

> ID：11286774
> 
> 赞同：1
> 
> 时间：2012-07-02T00:47:31.620
> 
> 标签：javascript, css, dom

## 语境

在 OSX 上，我注意到，如果我将鼠标光标拖到边框（底部、左侧或右侧），光标会从常规指针变为调整光标大小 (<->)：

*   我在窗口内，但在边框的 4-5 像素内

*   我在窗外，但在边框的 4-5 像素范围内

## 问题

现在，我注意到在 CSS/DOM 中，我有“鼠标悬停”事件——我将如何在 CSS/DOM/JavaScript 中实现类似的东西？

正确的方法是：

*   创建某种类型的未显示的“不可见边框”，也不会影响窗口大小？

*   做一些复杂的手动鼠标跟踪来知道我什么时候靠近边界（因为当鼠标光标在边界之外时我也需要处理）

*   CSS 是否有某种类型的“鼠标靠近边框”而不是“鼠标悬停”事件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:07:37.813

这是我从 undefined（另一个用户）最初发布的方法中改进的一种方法，后来由于某种原因被删除。这绝不应该被解释为最终方法，但它展示了如何创建一个带有左/右/上/下手柄的边界框，所有这些都是由 CSS 添加的。

**HTML**

```
<div id='container' class='boundary top-bottom'>
  <div class='boundary left-right'>
    <div class='contents'></div>
  </div>
</div> 
```

**CSS**

```
#container {
    width: 300px;
    height: 300px;
    margin: 50px;
}
.contents {
    cursor: default;
    background: green;
    width: 100%;
    height: 100%;
}
.boundary {
    background: blue;
    padding: 10px;
}
.boundary.top-bottom {
    cursor: row-resize;
    padding-left: 0;
    padding-right: 0;
}
.boundary.left-right {
    cursor: col-resize;
    padding-bottom: 0;
    padding-top: 0;
    width: 280px;
    height: 300px;
} 
```

[http://jsfiddle.net/userdude/V5h5F/1/](http://jsfiddle.net/userdude/V5h5F/1/)

处理诸如需要边框和不可见重叠之类的事情需要进行一些改造，可能使用 Javascript 之类的东西，而内部`boundary`是边框；我认为在纯 CSS 中这样做的复杂性是有问题的（未定义的答案用`position`边界上的 ed 元素处理了这个问题）。

# c# - .NET 中的 lambda 表达式和谓词有什么区别？

> ID：11286775
> 
> 赞同：16
> 
> 时间：2012-07-02T00:47:49.890
> 
> 标签：c#, .net, lambda, predicate

.NET 中的 lambda 表达式和谓词有什么区别？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T00:50:38.607

谓词是返回布尔值的委托（函数对象）。[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)可用于定义任何匿名函数，包括谓词，例如以 Lambda 表达式的形式表达谓词：

```
Predicate<int> isEven2 = x => x % 2 == 0; 
```

这在功能上等同于：

```
Func<int,bool> isEven = x => x % 2 == 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T00:51:03.983

Predicate 定义了一组标准，而 lambda 表达式是一个匿名函数。您可以使用 lambda ex。作为谓词，但这并不意味着它们是同一回事。

[谓词](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)

[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

# html - 无法将图像与 Twitter Bootstrap 对齐

> ID：11286780
> 
> 赞同：1
> 
> 时间：2012-07-02T00:49:22.047
> 
> 标签：html, css, twitter-bootstrap

我正在做的页面上有一个元素，需要显示 3 个居中对齐的图像。（横向）

但是，我无法将它们正确地放在屏幕上。它们出现在左侧多于右侧，或者在跨度容器上看起来与左侧对齐。

谁能帮我？

这是HTML

```
 <div class="row">

                    <div class="span12 logo-container">
                        <div class="span9 logo-wrapper">
                        <div class="logo">                                
                            <img src="img/siemens_log.png" />                              
                        </div>

                             <div class="logo">
                                 <img src="img/merck_logo.png" />
                             </div>

                         <div class="logo archdaily"> 
                             <img src="img/archdaily_logo.png" />
                         </div>
                    </div> 
                </div>

         </div> 
```

和 CSS

```
.logo-wrapper
{
    float:none;
    margin:0 auto;

}
.logo-container 
{

    float:none;
    margin:0 auto;

}

.logo
{
    float:left;
    margin: 20px 20px 0 0;
    text-align: center;

}

.archdaily
{
    margin-top: 5px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:51:06.597

我猜你希望它们都居中并相互重叠（垂直）。我只会使用`text-align: center;`. 这适用于文本和图像（而不是 div）。

例子...

```
<div class="container">
  <div class="row">
    <div class="span12">

      <div style="text-align: center;">
        <img src="img/siemens_log.png" />
      </div>

      <div style="text-align: center;">
        <img src="img/merck_logo.png" />
      </div>

      <div style="text-align: center;">
        <img src="img/archdaily_logo.png" />
      </div>

    </div>
  </div>
</div> 
```

需要注意的一点...您可能已经知道这一点。我看到你在使用`margin: 0 auto;`. 如果您给该 div 一个宽度，那将使该 div 居中。如果你不给它一个宽度，那么它将默认为 100% 宽度。正如您所看到的，如果您将一个 100% 水平跨越的 div 居中，您将不会看到任何视觉差异。

如果我不理解您的问题，请告诉我，我会尽力提供帮助。

**更新**

```
<div class="container">
  <div class="row">

      <div class="span4" style="text-align: left;">
        <img src="img/siemens_log.png" />
      </div>

      <div class="span4" style="text-align: center;">
        <img src="img/merck_logo.png" />
      </div>

      <div class="span4" style="text-align: right;">
        <img src="img/archdaily_logo.png" />
      </div>

  </div>
</div> 
```

它们现在将显示为水平的。我将最右边的图像与 div 的右边缘对齐，这样行的跨度将占据 940px (span12) 的宽度。我不知道图像之间的图像大小差异有多大，但这会改变图像之间的差距。如果它们的大小相同，那么一切看起来都应该是均匀的。想什么呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T09:01:04.313

由于以下声明，它们出现在左侧多于右侧：

```
.logo {
    float:left;
    margin: 20px 20px 0 0;
    text-align: center;
} 
```

你给他们一个 20px 的右边距，这有效地将他们推到左边。摆脱那个边距，它们会显得更加居中。

# excel - 如何在 Excel 中对整个工作簿运行双击子过程

> ID：11286783
> 
> 赞同：0
> 
> 时间：2012-07-02T00:49:42.423
> 
> 标签：excel, vba

我希望能够双击第 1 列中的任何行并打开与该行对应的另一个电子表格。我让它在一张纸上工作，但我无法弄清楚如何让它在整个工作簿上工作。请帮忙

```
Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
    Dim fpath As String
    Dim fname As String
    Dim Tname As String
    Dim i As Integer

    Tname = ActiveSheet.Name

    If Target.Column = 1 Then
        If Target.Cells.Count > 1 Then Exit Sub
            i = Target.Column

            fpath = "Q:\Construction\Road\Patrols\" & Tname & "\"

            Select Case i
                Case 1: fname = ActiveCell.Value & ".xlsx"
            End Select

            If Dir(fpath & fname) = vbNullString Then
                MsgBox ("The file does not exist")
            Else
                ThisWorkbook.FollowHyperlink fpath & fname
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:24:44.447

您的代码位于特定工作表的 3 模块中。

要将其应用于整个工作簿，请将代码转移到`ThisWorkbook`模块，并使用`Workbook_SheetBeforeDoubleClick`事件

修改后的代码，进行了一些优化

```
Private Sub Workbook_SheetBeforeDoubleClick(ByVal Sh As Object, ByVal Target As Range, Cancel As Boolean)
    Dim fPath As String

    If Target.Column = 1 Then
        fPath = "Q:\Construction\Road\Patrols\" & Sh.Name & "\" & Target.Value & ".xlsx"
        If Dir(fPath) = vbNullString Then
            MsgBox ("The file does not exist")
        Else
            ThisWorkbook.FollowHyperlink fPath
        End If
    End If
End Sub 
```

# java - 修改从 Desktop.Browser 打开的窗口的位置和位置

> ID：11286788
> 
> 赞同：0
> 
> 时间：2012-07-02T00:51:33.270
> 
> 标签：java, browser, window, lwjgl

```
 if (Desktop.isDesktopSupported()) 
    {
        Desktop.getDesktop().browse(URI.create(URL));
    } 
```

我将如何编辑此处打开的窗口的位置和大小？它需要能够进行跨平台。如果没有跨平台的解决方案，那么 Desktop 可以使用的任何解决方案是什么？

（这是一个偏离问题的问题，但我也可以放大网页的一部分吗？）

（也是题外话，但如果有另一种打开窗口的方法，包括把手，怎么能做到这一点？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:05:54.693

这就是我在 Windows 平台设置中移动和调整 Windows 大小的方式。这是我的一些 User32 JNA Windows 库代码的一小部分：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;

import javax.swing.*;

import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.win32.StdCallLibrary;

@SuppressWarnings("serial")
public class TestMoveWindow extends JPanel {
   public static final String[] BOUNDS_NAMES = { "x", "y", "w", "h" };
   private JTextField windowNameField = new JTextField(15);
   private JTextField[] boundsFields = new JTextField[BOUNDS_NAMES.length];

   public TestMoveWindow() {
      JPanel winNamePanel = new JPanel();
      winNamePanel.add(new JLabel("Window Name:"));
      winNamePanel.add(windowNameField);

      JPanel boundsPanel = new JPanel(new GridLayout(1, 0, 5, 0));
      for (int i = 0; i < BOUNDS_NAMES.length; i++) {
         JPanel fieldPanel = new JPanel();
         fieldPanel.add(new JLabel(BOUNDS_NAMES[i] + ":"));
         boundsFields[i] = new JTextField(3);
         fieldPanel.add(boundsFields[i]);
         boundsPanel.add(fieldPanel);
      }

      JPanel btnPanel = new JPanel();

      Action doItAction = new AbstractAction("Do it!") {

         @Override
         public void actionPerformed(ActionEvent e) {
            String startOfWindowName = windowNameField.getText().trim();
            Pointer hWnd = JnaUtil.getWinHwnd(startOfWindowName);
            if (hWnd == null || startOfWindowName.isEmpty()) {
               String message = String.format(
                     "Window named \"%s\" was not found", startOfWindowName);
               JOptionPane.showMessageDialog(TestMoveWindow.this, message,
                     "Window Not Found", JOptionPane.ERROR_MESSAGE);
               return;
            }
            int x = 0;
            int y = 0;
            int w = 0;
            int h = 0;

            String xStr = boundsFields[0].getText();
            String yStr = boundsFields[1].getText();
            String wStr = boundsFields[2].getText();
            String hStr = boundsFields[3].getText();
            try {
               x = Integer.parseInt(xStr);
               y = Integer.parseInt(yStr);
               w = Integer.parseInt(wStr);
               h = Integer.parseInt(hStr);
            } catch (NumberFormatException e1) {
               String message = String
                     .format(
                           "Numbers cannot be parsed: \"%s\", \"%s\", \"%s\", \"%s\"",
                           xStr, yStr, wStr, hStr);
               JOptionPane.showMessageDialog(TestMoveWindow.this, message,
                     "Numbers Not Parseable", JOptionPane.ERROR_MESSAGE);
               return;
            }

            JnaUtil.moveWindow(hWnd, x, y, w, h);

         }
      };
      btnPanel.add(new JButton(doItAction));

      windowNameField.addActionListener(doItAction);
      for (JTextField boundField : boundsFields) {
         boundField.addActionListener(doItAction);
      }

      setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
      add(winNamePanel);
      add(boundsPanel);
      add(btnPanel);
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("Test Move Window");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new TestMoveWindow());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

}

class JnaUtil {
   private static final User32 user32 = User32.INSTANCE;
   private static Pointer callBackHwnd;

   public static Pointer getWinHwnd(final String startOfWindowName) {
      callBackHwnd = null;

      user32.EnumWindows(new User32.WNDENUMPROC() {
         @Override
         public boolean callback(Pointer hWnd, Pointer userData) {
            byte[] windowText = new byte[512];
            user32.GetWindowTextA(hWnd, windowText, 512);
            String wText = Native.toString(windowText).trim();

            if (!wText.isEmpty() && wText.startsWith(startOfWindowName)) {
               callBackHwnd = hWnd;
               return false;
            }
            return true;
         }
      }, null);
      return callBackHwnd;
   }

   public static boolean moveWindow(Pointer hWnd, int x, int y, int nWidth,
         int nHeight) {
      boolean bRepaint = true;
      return user32.MoveWindow(hWnd, x, y, nWidth, nHeight, bRepaint);
   }

}

interface User32 extends StdCallLibrary {
   User32 INSTANCE = (User32) Native.loadLibrary("user32", User32.class);

   interface WNDENUMPROC extends StdCallCallback {
      boolean callback(Pointer hWnd, Pointer arg);
   }

   boolean EnumWindows(WNDENUMPROC lpEnumFunc, Pointer userData);

   boolean MoveWindow(Pointer hWnd, int x, int y, int nWidth, int nHeight,
         boolean bRepaint);

   int GetWindowTextA(Pointer hWnd, byte[] lpString, int nMaxCount);

} 
```

这将要求您在类路径中拥有 JNA 库中的 jna.jar 和 platform.jar。同样，这仅适用于 Windows 平台。代码的第一部分，TestMoveWindow 只是一个测试 GUI，用于演示程序是如何工作的，它实际上只不过是`JnaUtil.moveWindow(hWnd, x, y, w, h);`对 . JNA 库使这样做变得*如此*简单，这太荒谬了。为了使我的代码正常工作，您还需要知道窗口文本的开头——通常是网页的标题——以便它可以获得指向窗口的指针。

老实说，我不知道是否存在任何跨平台解决方案。我想认为有，但我有点怀疑，因为我相信这总是需要系统调用，但我很想被证明是错误的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:24:39.920

根据我的经验，这`getDesktop().browse(URI.create(URL));`在 Mac 上不起作用，所以即使你能找到相当于 Mac 的 @Hovercraft Full of Eels 解决方案，也没关系。

我还没有在 Mac 上使用 Java 7.1 测试过 Desktop，但它不能与以前版本的 Java 一起使用。

如果你真的想要跨平台，我认为你需要使用 JavaFX 中的 WebView - JavaFX 现在可以在 Mac 上使用，它是一个功能齐全的浏览器。有很多关于将 JavaFX 与 Swing 混合的教程，我认为 [JavaFX 示例] 包括 webView。[1](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)

# php - 创建网络画廊的正确方法是什么？

> ID：11286790
> 
> 赞同：-3
> 
> 时间：2012-07-02T00:52:15.203
> 
> 标签：php, javascript, html, web, gallery

我是 Web 开发的新手，但就 Web 开发而言，我使用过 html 和 php，但我还没有建立一个完整的网站用于商业用途。我在学校做项目时只使用 html 和 php。

顺便说一句，我在读研究生，没有太多经验。

事情是这样的，我想创建一个网页来代表我的照片和设计，我遇到了以下问题：我想要一个带有文本链接的 html 页面或导航到下一个按钮和另一个按钮的按钮对于上一张照片。

当谈到更改图片时，我创建了一个 javascript 来切换到特定图片，但这不是我想要的，我希望它是动态的，意思是，有没有办法编写读取所有内容的代码我的网站将驻留的服务器中图片的名称，然后将它们放在一个数组或其他东西中，然后向前和向后循环它们。

我知道 javascript 是针对用户端的，而 php 是针对服务器端的，我也知道让 javascript 以我描述的方式访问目录不是一个好主意。

所以我只需要一些帮助或想法来以正确的方式完成这项任务。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:13:49.913

你的目标是什么？是学习网络开发还是创建一个可以炫耀一些图片的网站？

如果是后者，那么我建议只设置一个[wordpress](http://wordpress.org/)站点并安装一个照片库插件。

If you want to do everything yourself, then I would use some javascript library like [lightbox](http://lokeshdhakar.com/projects/lightbox2/) (there are many more that are similar) on your current site. Store the image info in a mySql database, pull the image paths through to the site using PHP, and then use the js library of your choice so you aren't re-inventing the wheel when it comes to the actual functionality of the gallery.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:01:50.210

您可以使用 MySQL 数据库来存储有关每个图像的信息，包括文件名。

在前端，查询数据库中的文件名并使用标准 HTML 使用存储在数据库中的文件名构建 src。意味着文件本身存储在某个目录中。

这样做可以让您在未来构建一个真正强大的系统，因为您将能够查询数据库以获取尽可能多、尽可能少或您想要的特定信息。从这个数据库查询中，您可以返回与查询匹配的所有文件名，然后遍历它们以显示在您的 javascript 前端。

# css - DIV 内容溢出到页脚，使页脚在页面上向上

> ID：11286793
> 
> 赞同：2
> 
> 时间：2012-07-02T00:52:40.993
> 
> 标签：css, html, overflow, footer

IM 试图让 div 内容不流过页脚，我希望内容 div 随着页面扩展而扩展，但是当文本越过页脚时，它会导致页脚在页面
html 上向上跳转，body { margin :0; /*上、右、下、左*/ padding:0; /*上、右、下、左*/ 高度：100%；}

```
container {
    position:fixed;
    top:0;
    left:0;
    width:100%;
    margin: 0 auto -100px;
    height: auto;
    min-height:100%;
}

content {
    position: relative; 
    padding-bottom:100px;
    overflow:auto;
    height:100%;
}

Header, #Footer {
    position: absolute;
    width:100%;
    background:url('bglines.png');
    background-size:15px 15px;
    color:white;
    padding:0 auto;
    text-align:center;
    color:#2FAACE;
}

Footer {
    margin-top: 100px;
    clear:both;
} 

menu {
    position:absolute;
    list-style-type:none;
    background: #808080;
    width:100%;
    padding: 85px 0px 0px 0px; /* Always on top */
}

ptop {
    text-transform:uppercase;
    font-family:impact;
    font-size:40pt;
    margin: 15px auto;
    color:#2FAACE;
}

pbottom {
    font-family:times;
    font-size:14pt;
    color:#2FAACE;
}

main {
position: absolute;
text-align:center;
left:50%;
width:90%;
margin-left: -45%;
top:150px;
color:white;
padding-bottom:100px;
}

p {
    font-size: 75px;
    color:white;
}

mainbg {
    background:#CCCCCC;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
    opacity:0.9;
    filter:alpha(opacity=90); /* For IE8 and earlier */
    left:50px;
    width:95%;
    top:150px;
    position: absolute;
}

li {
    line-height:40px;
    margin:0px 0px 0px 0px;
    padding:0px 5px 5px 0px;
    text-align:center;
    float:left;
}

a, a:hover {
display:block;
font-family:Georgia;
width: 75px;
text-decoration:none;
font-size:30px;
}

a { color:white; }

a:Hover {
    background:#2FAACE;
    border-radius:9px 9px 9px 9px;
    color:#FFFFFF; /*TL, TR, BR, BL*/
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T02:09:02.533

请在之前添加一个`div`with 。它实际上清除了所有将页脚固定在底部的浮动。`clear:both``footer`

```
<div style="clear:both;"></div> 
```

或者，如果您在您的风格中定义了类（清晰），那么

```
<div class="clear"></div> 
```

# assembly - LC-3 如何打印两位数

> ID：11286794
> 
> 赞同：0
> 
> 时间：2012-07-02T00:52:47.383
> 
> 标签：assembly, binary, lc3

我有一个带有计数器的 LC-3 程序。我可以使用 TRAP x21 将计数器打印到屏幕上。但是，如果计数器编号有两位数，我的程序将无法运行。

示例：9 将完美打印，但不是 19。

我猜想在打印包含计数器的寄存器之前，我需要一个循环，它将通过除以 2 来截断数字（与十进制除以 10 相同，但二进制为 2）。然后我想我会打印 digit1, digit0。我有一个问题，我如何划分 LC-3？右移？对于这个问题来说，这似乎太难了，超出了我的知识范围。

请帮忙。

```
 0010 000 000000011    ; R0 <= x30 which is for  
    0001 000 000 0 00 010 ; R0 <= R0 + R2 

    1111 0000 00100001    ; TRAP x21 
    1111 0000 00100101    ; TRAP x25 
    0000000000110000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:37:27.347

由于您的数字->数字例程，它仅适用于一位数字。您正在向字符“0”添加一个数字，显然没有字符“11”等。

您可以通过乘以十（通常通过重复加法）找到最大除数，直到除数超过该数字（然后退回到前一个值）。这将让您使用上面的 Gareth 方法。

# php - 更改 Zend 服务器文档根目录

> ID：11286798
> 
> 赞同：2
> 
> 时间：2012-07-02T00:53:08.817
> 
> 标签：php, apache2, zend-studio

我原以为这会很简单，但我正在尝试将我的文档根目录从默认值更改：

```
C:\Program Files (x86)\Zend\Apache2\htdocs 
```

到我通常将项目保存在文档中的位置，但到目前为止我没有运气，我看到的只是“Zend Server 测试页面”。

我修改了 \Apache2\conf\httpd.conf 中的位置，如下所示：

```
DocumentRoot "C:\Users\Me\My Sites\My Project"
<Directory "C:\Users\Me\My Sites\My Project"> 
```

我已经使用服务器 GUI 重新启动了 php，但无济于事。

我正在使用 Zend Server Community Edition 5.6.0。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:32:21.377

这最终以某种方式自行解决，尽管我最好的猜测是 Zend Server Web GUI 上的“重新启动 PHP”链接实际上不起作用，我认为我需要做的是使用系统托盘中的 apache 服务重新启动或重新启动我的电脑。

# c++ - 在嵌套名称说明符中命名的不完整类型

> ID：11286804
> 
> 赞同：7
> 
> 时间：2012-07-02T00:54:28.993
> 
> 标签：c++

我正在编译以下代码：

```
class B;

class A {
    A();
    friend A B::newAObject();
};

class B {
    friend A::A();
public:
    A newAObject();
}; 
```

这可能看起来很奇怪，但想法是有一个`A`只能由类型对象`B`（可能是单例）生成的类。

问题是我在这些对象之间创建了循环依赖。`A`必须在之前定义`B`，并且`B`必须在之前定义`A`。显然前向声明`B`还不够好，`B`实际上必须在之前完全定义`A`（反之亦然）。

我该如何解决这个问题？

编辑：实际错误是：嵌套名称说明符中命名的不完整类型“B”。

注意：这里还有另一篇与此类似的帖子：[错误：嵌套名称说明符中使用的类型不完整](https://stackoverflow.com/questions/4572483/error-incomplete-type-used-in-nested-name-specifier-g)，但它的模板化程度很高，这让我感到困惑，因此发表了这篇文章。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T01:11:17.433

C++2003 规定，当访问类的内容时，应该完全定义这个类。前向声明是不够的。这意味着根本不允许像您这样的循环依赖项。

ps 将整个班级声明为朋友应该可以，如果这就是您所需要的。

顺便说一句，朋友规范为类生成前向声明，看下面的代码：

```
void    F10(C1 &p1); 

class C2 
{ 
    friend class C1; 
}; 

void    F11(C1 **p1); 
```

`F10`由于 C1 未定义，编译器会给出语法错误，但`F11`由于友元规范，编译器会正常编译。这可能听起来很奇怪，但这是在标准中定义的，编译器遵循这一点。

# c#-4.0 - 如何删除文本框中不必要的小数位？C#.net

> ID：11286805
> 
> 赞同：0
> 
> 时间：2012-07-02T00:54:38.107
> 
> 标签：c#-4.0

我有一个绑定到特定数据库表列的文本框。此列被格式化为带有 4 位小数的数字。

我想要的是在没有小数位的文本框中显示整数，但显示带小数位的浮点数。

例如 1) 在文本框 (45) 中显示，数据库中的数据 (45.0000)

2) 在文本框中显示 (45.45)，数据库中的数据 (45.4500)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:45:17.677

您可以使用[自定义数字字符串格式](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。

IE

```
Single data1 = 45.0000f;
Single data2 = 45.4500f;
string sFormat = "#0.####";
textBox1.Text = data1.ToString(sFormat); // displays 45
textBox2.Text = data2.ToString(sFormat); // displays 45.45 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:00:52.040

马克的替代品。一个将打印 45，另一个将打印 45.45。

```
 float num = 45.4500f;
        float num2 = 45.0000f;

        string strnum = num.ToString().TrimEnd('0', '.');

        this.textBox1.Text = strnum; 
```

# javascript - 使用javascript创建多维数组

> ID：11286806
> 
> 赞同：0
> 
> 时间：2012-07-02T00:54:43.990
> 
> 标签：javascript, html, arrays

这对我来说其实很奇怪。我不知道如何动态创建多维数组。我想创建一个三级下拉列表，所以我想我需要一个三维数组来存储值。如何创建三维数组？

```
<script language=javascript>

var aCourse=new Array();
aCourse[0]=new Array();
aCourse[1]=new Array();
aCourse[2]=new Array();
aCourse[3]=new Array();

aCourse[0][0]="Select...";
aCourse[1][0]="Select...";
aCourse[1][1]="T Square";
aCourse[1][2]="V Square";
aCourse[1][3]="S Square";
aCourse[1][4]="B Square";
aCourse[1][5]="G Square";
aCourse[2][0]="Select...";
aCourse[2][1]="N Square";
aCourse[2][2]="W Square";
aCourse[3][0]="Select…";
aCourse[3][1]="J Square";
aCourse[3][2]="M Square";

function ChangeCourse()
{
var i,
iCategoryIndex;
iCategoryIndex=document.frm.optCategory.selectedIndex;
iCourseCount=0;
while (aCourse[iCategoryIndex][iCourseCount]!=null)
iCourseCount++;
document.frm.optCourse.length=iCourseCount;
for (i=0;i<=iCourseCount-1;i++)
document.frm.optCourse[i]=new Option(aCourse[iCategoryIndex][i]);
document.frm.optCourse.focus();
}

</script>
<body ONfocus=ChangeCourse()>
<h3>Choose category…&lt;/h3>
<form name="frm">
<p>Category:
<select name="optCategory" size="1" onChange=ChangeCourse()>
<option>Select…&lt;/option>
<option>Soccer</option>
<option>Cricket</option>
<option>Rugby</option>
</select>
</p>
<p>Fields
<select name="optCourse" size="1">
<option>Select…&lt;/option>
</select>
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:03:55.600

如果您唯一的问题是创建 3 维数组，这应该可行：

```
var aCourse = [];

for(var i = 0; i < dimensionOneSize; i++) {
  aCourse[i] = [];
  for(var k = 0; k < dimensionTwoSize; k++)
    aCourse[i][k] = [];
} 
```

值得注意的是，JavaScript 支持使用方括号的数组的简写定义`[]`，因此您可以使用它们来使动态定义更清晰。

## 可能更短

另外，我不确定这是否效果很好，但它可能：

```
var aCourse = [[[]]]; 
```

到目前为止，我的测试还没有证明可以使用它，但它确实可以作为正确的脚本进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:00:29.400

首先，使用方括号初始化数组总是好的，`[]`：

```
var aCourse = []; 
```

并且要在 JS 中模拟多维数组，这本质上是单个数组中的不确定数量的数组，请执行以下操作：

```
aCourse[0] = []; 
```

或者，您可以在创建数组时在方括号内创建数组：

```
var aCourse = [
    [], [], []
]; 
```

这相当于：

```
aCourse[0] = [];
aCourse[1] = [];
aCourse[2] = []; 
```

# d3.js - D3 力布局中心的宽度限制

> ID：11286807
> 
> 赞同：1
> 
> 时间：2012-07-02T00:54:58.020
> 
> 标签：d3.js, force-layout

我刚开始使用 D3，我目前有一个具有 5 个不同中心的力布局，并且我的节点基于数据属性围绕每个中心进行引力。理想情况下，五个组中的每一个都具有相同数量的节点，因此它们显示为大致均匀宽度的列 - 类似于此示例中的橙色组[http://bl.ocks.org/1021953](http://bl.ocks.org/1021953)（如果您让它运行尽管）。

然而，我的一些组有很多节点，而另一些则没有，这导致一些集群比其他集群宽得多。是否可以设置一个最大宽度，超过该宽度，任何节点都不会从其中心向左或向右漂移，同时仍然让节点在中心上方和下方更自由地漂移？

或者我可以通过在每个组之间放置一列不可见的节点来适当地排斥它们来伪造它吗？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:30:54.227

经过大量修改后，我发现通过将 alpha 乘以不同的数字，您可以独立控制左/右和上/下拉。

按照这个例子 (http://vallandingham.me/d3_without_svg.html) 将 setBubbleLocation 函数设置为类似这样

```
bubble.y = bubble.y + (center.y - bubble.y) * (0.115) * alpha*.5; //smaller alpha = looser
bubble.x = bubble.x + (center.x - bubble.x) * (0.115) * alpha*3; //bigger alpha = tighter 
```

# php - 在 Xpath (PHP) 中获取以大写字母开头的标签

> ID：11286808
> 
> 赞同：2
> 
> 时间：2012-07-02T00:55:54.763
> 
> 标签：php, html, xpath

我正在尝试使用 PHP 5.3 中的 DOMDocument 获取以大写开头的 html 标记。

我正在使用在 XPath 中注册的 php 函数对其进行测试，但该函数接收小写的第一个参数 tagNames。

xml：

```
 <test>
     <A>Match this</A>
     <b>Dont match this</b>
 </test> 
```

php函数：

[registerPhpFunctions - phpDoc](http://www.php.net/manual/en/domxpath.registerphpfunctions.php)

```
...
public function isUpper($name) {
    return (bool)preg_match('/^[A-Z]/', $name);
}
... 
```

蚂蚁这是 Xpath：

```
//*[php:function("\Cdr\Dom\DOMXPath::isUpper", name())] 
```

函数**isUpper**以小写形式接收 $name，因此它不起作用。

我的问题是：

1.  为什么不区分大小写？
2.  有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:06:35.940

将代码加载为 XML 而不是 HTML。HTML 不区分大小写。

```
$xmlDoc->loadXML('<html>'); 
```

代替：

```
$xmlDoc->loadHTML('<html>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:32:40.513

**使用这个单线**：

```
//*[contains('ABCDEFGHIJKLMNOPQRSTUVWXYZ', substring(name(),1,1))] 
```

这将选择 XML 文档中的任何元素，其名称的第一个字符包含在所有大写字母的字符串中。

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "//*[contains('ABCDEFGHIJKLMNOPQRSTUVWXYZ', substring(name(),1,1))]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<test>
    <A>Match this</A>
    <b>Dont match this</b>
</test> 
```

**计算 XPath 表达式并将选定的节点（在本例中只有一个）复制到输出**：

```
<A>Match this</A> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:33:25.637

一个完整的工作示例（test.php）：

```
$doc = new DOMDocument;
$doc->load('test.xml');

$xpath = new DOMXPath($doc);
$xpath->registerNamespace("php", "http://php.net/xpath");
$xpath->registerPHPFunctions("isUpper");

function isUpper($name) {
    return (bool)preg_match('/^[A-Z]/', $name);
}

$els = $xpath->query('//*[php:function("isUpper", name())]');

foreach ($els as $el) {
    echo $el->nodeValue . "\n";
} 
```

测试.xml：

```
<test>
    <A>Match this</A>
    <b>Dont match this</b>
</test> 
```

输出：

```
lwburk$ php test.php 
Match this 
```

# python - 发布链接时如何将 youtube 视频嵌入到您的网页中

> ID：11286809
> 
> 赞同：4
> 
> 时间：2012-07-02T00:56:09.937
> 
> 标签：python, google-app-engine, youtube, youtube-api, jinja2

我有一个网站，有很多指向 youtube 和类似网站的链接，我想知道是否有任何方法可以让链接自动显示为视频。就像您在 facebook 上发布视频链接时发生的情况一样。您可以直接在页面上播放。有没有办法在没有用户实际发布整个嵌入视频 HTML 代码的情况下做到这一点？

顺便说一句，我正在使用带有 python 和 jinja2 模板的谷歌应用引擎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T05:39:20.800

每个 youtube 视频都有一个唯一的 ID，该 ID 出现在 url 中。

这里的例子：

> [http://www.youtube.com/watch?v=DU0Q0U08gAc&feature=g-all-esi](http://www.youtube.com/watch?v=DU0Q0U08gAc&feature=g-all-esi)
> 
> [http://youtu.be/DU0Q0U08gAc](http://youtu.be/DU0Q0U08gAc)

在这种情况下，`DU0Q0U08gAc`是电影 ID。

这只是插入到 embed 标记中，如您在此处看到的：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/DU0Q0U08gAc" frameborder="0" allowfullscreen></iframe> 
```

因此，您需要解析 id 的 url 并将其插入到 embed 标记中。我*相信*在`youtu.be`样式链接的情况下，它只是'/'之后的任何内容，而在链接的情况下，使用[urlparse](http://docs.python.org/library/urlparse.html)库从 url 的查询字符串中获取 'v' 变量`youtube.com`可能是最佳实践。如果有一个我不知道的极端情况，希望有人会插话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T14:34:47.907

您的解决方案是 Micawber ......它在纯 Python 以及 Django 和 Flask 插件中可用。与 Jinja 配合得很好。像 Facebook 一样将视频和图片嵌入到您的应用中。您可以通过 pip 安装它。好的文档；易于遵循的示例。作者回答问题。效果很好，而且完全免费。一探究竟：

[http://readthedocs.org/projects/micawber/](http://readthedocs.org/projects/micawber/)

您还可以查看[http://oembed.com](http://oembed.com)和[http://embed.ly](http://embed.ly) ...虽然后者不是免费的，起价为 19 美元/月（截至 2012 年 7 月）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T11:09:52.170

从列表值获取嵌入链接时使用此代码。在 iframe 内的模板中使用以下代码

src="{{results[0].video_link}}"

“video_link”是字段名称。

# php - 有没有办法以片段/增量返回ajax POST结果？

> ID：11286810
> 
> 赞同：1
> 
> 时间：2012-07-02T00:56:20.873
> 
> 标签：php, mysql, ajax, jquery

有没有办法将 PHP 页面中生成的结果（由 ajax 发布请求调用）以位/间隔传递回文档？

这是一个例子......

我正在使用用户传递的关键字对 PHP 文档进行 ajax POST，该文档会扫描一些站点以确定它们是否具有用于搜索的资源。如果他们这样做，PHP 文件会返回一个指向该站点的链接，并继续到下一个，如果不是，我将继续到下一个..

使用 ajax（我使用 jQuery）我可以发出这个请求并等待页面加载，然后轻松地将所有链接一起显示，但我想知道是否可以在链接从 PHP 文件加载时一一显示，所以我不必等待检查每一页。

谢谢您的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:06:04.420

您可以通过让客户端发送对前 X 个（5 个或其他）结果的请求、显示这些结果，然后立即发送对下 X 个记录的请求来实现这一点。您的客户端将继续发出请求并显示记录，直到收到空响应，此时检索完成。

要完成这项工作，您需要在服务器上维护状态，以便您知道搜索中的“位置”以进行搜索，或者客户端需要在每个 AJAX 请求中包含足够的信息，以便服务器知道如何继续处理。

顺便说一句，这似乎更像是一个 GET 操作而不是一个 POST。

# c++ - C++ 中的字符串到字节或字符*

> ID：11286811
> 
> 赞同：0
> 
> 时间：2012-07-02T00:56:52.943
> 
> 标签：c++, memory, editing

好的，所以我正在使用 C++ 编写内存编辑器，我有一个偏移列表，如果我也预定义了要更改偏移的内容（0x68），那么它可以工作，但我想知道是否有办法转换字符串，如 cin >> string，它会将字符串拆分为字节或 char*s，以便可以在偏移量中使用它们？对不起，如果这没有多大意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T01:02:46.553

该类`std::string`有两种方法可以帮助您：

*   `c_str()`，返回一个以-`\0`结尾的`char*`字符串（又名“C”风格的字符串）；
*   `data()`，返回 a 中字符串的内容`char const*`，但没有`\0`终止；`length()`您必须使用or单独检索长度`size()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:58:52.183

您可以调用 c_str() 来获取将字符串数据表示为 ac 字符串的原始 char 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T01:12:23.620

您可以使用`data()`and`memcpy()`将所有字节复制到另一个地址，或者通过索引字符串对象来访问字符串中的字节...

```
std::string x;
if (std::cin >> x) // note: read one whitespace-separated token, use getline for lines
{
    memcpy(p_dest, x.data(), x.size());  // to copy everything...
    // ...or...
    p_dest[offset] = x[i]; // copy one character, 0 <= i < x.size()
} 
```

# java - 单元测试数据结构的内部状态

> ID：11286815
> 
> 赞同：9
> 
> 时间：2012-07-02T00:57:40.173
> 
> 标签：java, unit-testing, data-structures

我的任务是为大量度量数据结构（即[四叉树](http://en.wikipedia.org/wiki/Quadtree)和[kd 树](http://en.wikipedia.org/wiki/K-d_tree)变体）创建实现。我已经完成了其中的四个实现，但我目前正在测试的方式不是，因为我没有更好的词，好。

我需要一种干净的方法来测试从这些树/trie 结构中插入和删除数据的方式，以便我可以测试节点的内部结构（检查父级、子级、排序等）。这些实现遵循单独的正确性证明和运行时分析，因此我需要确保不仅正确插入节点（意思是稍后可以从树中检索），而且还要确保在树中非常“正确”的位置。

“单元测试”似乎是错误的方法，但是，如果我没记错的话，它的目的是测试结构或系统的外部 API。我见过很多与单元测试相关的问题，询问“如何在单元测试中访问私有字段”或“如何测试非公共方法的返回值”，答案通常是“不要” t" - 我同意这个答案。

所以我不会让任何人愿意帮助只是模糊的漫无边际，我的树实现的接口如下（基于 java 集合的 Map 接口）：

```
public interface SpatialMap<K, V> extends Iterable<SpatialMap.Entry<K, V>>
{
// Query Operations

/**
 * Returns the number of key-value mappings in this map. If the map contains more than
 * <tt>Integer.MAX_VALUE</tt> elements, returns <tt>Integer.MAX_VALUE</tt>.
 * 
 * @return The number of key-value mappings in this map.
 */
int size();

/**
 * Returns <tt>true</tt> if this map contains no key-value mappings.
 * 
 * @return <tt>true</tt> if this map contains no key-value mappings.
 */
boolean isEmpty();

/**
 * Returns <tt>true</tt> if this map contains a mapping for the specified key.
 * 
 * @param key
 *            The key whose presence in this map is to be tested.
 * @return <tt>true</tt> if this map contains a mapping for the specified key.
 */
boolean containsKey(K key);

/**
 * Returns the value to which the specified key is mapped, or {@code null} if this map contains
 * no mapping for the key.
 * 
 * <p>A return value of {@code null} does not <i>necessarily</i> indicate that the map contains
 * no mapping for the key; it's also possible that the map explicitly maps the key to
 * {@code null}. The {@link #containsKey containsKey} operation may be used to distinguish these
 * two cases.
 * 
 * @see #put(Comparable, Comparable, Object)
 * 
 * @param key
 *            The key whose associated value is to be returned.
 * @return The value to which the specified key is mapped, or {@code null} if this map contains
 *         no mapping for the key.
 */
V get(K key);

// Modification Operations

/**
 * Associates the specified value with the specified key in this map. If the map previously
 * contained a mapping for the key, the old value is replaced.
 * 
 * @param key
 *            The key with which the specified value is to be associated.
 * @param data
 *            The value to be associated with the specified key.
 * @return The previous value associated with the key, or <tt>null</tt> if there was no mapping
 *         for the key. (A <tt>null</tt> return can also indicate that the map previously
 *         associated <tt>null</tt> with <tt>key</tt>.)
 */
V put(K key, V data);

/**
 * Removes the mapping for the specified key from this map if present.
 * 
 * @param key
 *            The key whose mapping is to be removed from the map.
 * @return The previous value associated with the key, or <tt>null</tt> if there was no mapping
 *         for the key. (A <tt>null</tt> return can also indicate that the map previously
 *         associated <tt>null</tt> with <tt>key</tt>.)
 */
V remove(K key);

// Bulk Operations

/**
 * Removes all of the mappings from this map. The map will be empty after this call returns.
 */
void clear();
} 
```

这使得*仅*使用公共方法进行测试变得困难，因为我需要公共接口不提供的某些数据（子/父指针）。此外，在 trie 结构（PR Quadtree、PRKDTree、MX 变体等）中有与数据分离的节点，因此创建一个返回“节点”的公共方法也将被抽象得太远，无法获得正确的数据。

我在寻找哪种类型的测试方法（或我可以与 JUnit 一起使用并且不会觉得我正在破坏美丽的认知边界的技术）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:02:11.870

在某些情况下，有时您确实需要测试结构的内部状态。在这种情况下，我将使用反射访问内部变量。有一些 JUnit 插件 (PrivateAccessor [http://junit-addons.sourceforge.net/junitx/util/PrivateAccessor.html](http://junit-addons.sourceforge.net/junitx/util/PrivateAccessor.html) ) 使这更容易。

权衡是您的测试会更加脆弱，因为如果内部状态发生变化，那么您的测试可能会中断。但是，如果您想要确信您的内部状态是正确的，有时您需要这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T02:52:06.317

我在这种情况下使用的一种方法是保护这些内部字段，并创建一个子类进行测试。通过该子类，您可以公开白盒测试所需的任何状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T15:57:41.903

如果您将接口及其实现单独放在专用包中，并使该实现的内部状态方法**package-protected**，那么您的测试可以访问它们，并可能测试它们，而系统的其余部分可以吨。

这对单元测试“纯粹主义者”来说并不好，但这通常是我的做法，当我不想将我的课程的内容暴露给系统的其他部分但我仍然想对其内部行为做出断言时.

# java - 没有当前上下文的opengl es api

> ID：11286819
> 
> 赞同：3
> 
> 时间：2012-07-02T00:58:39.987
> 
> 标签：java, android, opengl-es

我浏览了解决方案，但还没有真正找到。我收到此错误是因为执行似乎发生在 gl 线程之外。但是我不确定如何解决这个问题。代码如下：

```
public shape()
{
    super();        

    vertexShader = Shader.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode); //<============
    fragmentShader = Shader.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);      

    ByteBuffer buffer = ByteBuffer.allocateDirect(getCoordinates().length * 4);
    buffer.order(ByteOrder.nativeOrder());
    vertexBuffer = buffer.asFloatBuffer();

    vertexBuffer.put(getCoordinates());
    vertexBuffer.position(0);

    ByteBuffer drawListBuffer = ByteBuffer.allocateDirect(getOrderOfDraw().length * 2);

    drawListBuffer.order(ByteOrder.nativeOrder());

    listBuffer = drawListBuffer.asShortBuffer();
    listBuffer.put(getOrderOfDraw());

    listBuffer.position(0);

     mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
     GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
     GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
     GLES20.glLinkProgram(mProgram); 

} 
```

调用渲染器是

```
 Square square = new Square(5, 5);

public void onDrawFrame(GL10 unused) 
{

    unused.glLoadIdentity();
    unused.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    square.Draw();
} 
```

正方形从形状延伸

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T01:03:58.810

如果这`new Square(5,5);`不是任何 opengl 回调的一部分（我假设您使用的是 glSurfaceView），那么我认为它不会在 OpenGL 线程上运行。它将在您的 glSurfaceView 创建时执行，我相信它在主 android 线程上。

试着在`new Square(5,5);`里面移动`onSurfaceCreated`。

# c++ - 在 Visual Studio C++ 中从一个项目访问变量到另一个项目

> ID：11286821
> 
> 赞同：3
> 
> 时间：2012-07-02T00:59:16.110
> 
> 标签：c++, visual-studio, share, solution, projects

我有一个解决方案，其中有两个项目。当我得到代码时，他们告诉一个项目处理视觉部分，另一个项目处理逻辑部分。现在我在窗口中添加了一个按钮。为此，我编辑了处理视觉部分的项目。我对此很陌生，但在 Visual Studio 2010 中创建和添加按钮相当简单。现在的问题是我想检测是否从另一个项目中按下了按钮。我确信这些项目正在共享一些数据，但我无法捕获它。现在我正在更改文件中的值并从另一个项目中读取相同的数据以检查按钮是否被按下。但我认为有更好的方法来做到这一点。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:42:28.217

我认为这两个项目不会自动共享。您必须定义两个项目通信的接口。例如，在您上面的解决方案中，“文件中的值”是您定义的“接口”。听起来您想要实现的是将控制器（逻辑部分）和视图（视觉部分）分开，这似乎表明您的项目正在使用 MVC 模型。

我建议定义一个抽象类（接口）来定义你想要的两个项目之间的交互。他们所要共享的只是一个头文件。

例如：

```
// Solution A (Controller - logic part)
// MyUIHandler.h
class IMyUIHandler //You can also use microsoft's interface keyword for something similar.
{
public:
    HRESULT onButtonPressed() = 0; // Note that you can also add parameters to onButtonPressed.
};

HRESULT getMyUIHandler(IMyUIHandler **ppHandler); 
```

然后实现这个接口：

```
// Solustion A (Controller - logic part)
// MyUIHandler.cpp
#include "MyUIHandler.h"
class CMyUIHandler : public IMyUIHandler
{
private:
   // Add your private parameter here for anything you need
public:
    HRESULT onButtonPressed();
}

HRESULT getMyUIHandler(IMyUIHandler **ppHandler)
{
    // There are many ways to handle it here:
    // 1\. Define a singleton object CMyUIHandler in your project A. Just return a pointer 
    //    to that object here. This way the client never releases the memory for this 
    //    object.
    // 2\. Create an instance of this object and have the client release it. The client 
    //    would be responsible for releasing the memory when it's done with the object. 
    // 3\. Create an instance of this object and have a class/method in Solution A release
    //    the memory. 
    // 4\. Reference count the object, for example, make IUnknown the parent class of 
    //    IMyUIHandler, and implement the IUnknown interace (which is boiler plate code).
    // Since I don't know your project it's hard for me to pick the most suitable one. 
    ...
    *ppHandler = myNewHandler;
    ...
    return S_OK;
} 
```

CMyUIHandler 可以只是您现有的已经处理一些逻辑的类。

在解决方案 B 中，您应该在一些初始化函数中调用 getMyUIHandler，例如 UI 类的控制器，将其保存为您的成员。然后是 VS 为您创建的“Button clicked”事件处理程序。

```
// Solution B (View - visual part)
// MyUIView.h
class MyUIView
{
protected:
    IMyUIHandler *m_pHandler;
}

// MyUIView.cpp
CMyUIView::CMyUIView(...) 
{
    ...
    hr = getMyUIHandler(&m_pHandler);
    // error handler, etc...   
    ...
}

// In the function that is created for you when button is clicked (I'm not sure if I get the signature right below.
void OnClick(EventArgs^ e) 
{
    ...
    hr = m_pHandler->onButtonPressed();
    ...
} 
```

然后，您可以在单击按钮后立即传递您为函数 onButtonPressed 定义的任何参数。

# r - R：样本到预定义大小的箱中（分区样本向量）

> ID：11286834
> 
> 赞同：1
> 
> 时间：2012-07-02T01:01:52.047
> 
> 标签：r, vector, sample, data-partitioning

我正在研究一个由 ~10^6 个值组成的数据集，这些值聚集到可变数量的 bin 中。在我的分析过程中，我试图随机化我的聚类，但保持 bin 大小不变。作为一个玩具示例（在伪代码中），这看起来像这样：

```
data <- list(c(1,5,6,3), c(2,4,7,8), c(9), c(10,11,15), c(12,13,14));
sizes <- lapply(data, length);
for (rand in 1:no.of.randomizations) {
    rand.data <- partition.sample(seq(1,15), partitions=sizes, replace=F)
} 
```

所以，我正在寻找一个像“partition.sample”这样的函数，它将采用一个向量（如 seq(1,15)）并从中随机采样，返回一个列表，其中的数据已分区为由“给出的正确 bin 大小”尺寸”。

我一直在尝试自己编写一个这样的函数，因为这项任务似乎并不难。但是，将向量划分为给定的 bin 大小看起来如果“在后台”完成会更快、更有效，这意味着可能不在本机 R 中。所以我想知道我是否只是错过了适当的名称功能，或者是否有人可以指点我周围的智能解决方案:-)

非常感谢您的帮助和时间！:-)

最好的，

莱蒙德

**更新**：

“no.of.randomizations”是指我运行整个“随机化循环”的实际次数。稍后，这显然会包括比实际采样更多的步骤。

*此外，我还对在不*替换的情况下进行上述采样的技巧感兴趣。

在此先感谢，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:54:24.667

修订：这应该是相当有效的。它的复杂性应该主要在排列步骤中：

```
# A single step:
x <- sample( unlist(data)) 
list( one=x[1:4], two=x[5:8], three=x[9], four=x[10:12], five=x[13:16]) 
```

如上所述，“no.of.randomizations”可能是此过程的重复应用次数，在这种情况下，您可能需要`replicate`环绕它：

```
replic <- replicate(n=4, { x <- sample(unlist(data))
   list( x[1:4], x[5:8], x[9], x[10:12], x[13:15]) }  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:55:27.950

经过一番思考和谷歌搜索，我想出了一个可行的解决方案。但是，我仍然不相信这是最快和最有效的方法。

原则上，我可以生成一个“数据”的唯一排列的长向量，然后通过提供给拆分的*因子*参数将其拆分为长度为“大小”的向量列表。为此，我需要为我的不同“数据”组提供一个额外的 ID 方案，我碰巧有这个方案。

当被视为代码时，它变得更加清晰：

```
data <- list(c(1,5,6,3), c(2,4,7,8), c(9), c(10,11,15), c(12,13,14));
sizes <- lapply(data, length); 
```

至此，一切如上

```
names <- c("set1", "set2", "set3", "set4", "set5"); 
```

就我而言，我很幸运已经从数据中提供了“名称”。否则，我将不得不将它们作为（例如）

```
names <- seq(1, length(data)); 
```

然后可以使用 rep 将这个“名称”向量扩展为“大小”：

```
cut.by <- rep(names, times = sizes);
[1] 1 1 1 1 2 2 2 2 3 4 4 4 5
[14] 5 5 
```

然后可以将这个新向量“cut.by”作为参数提供给 split()

```
rand.data <- split(sample(1:15, 15), cut.by)
$`1`
[1]  8  9 14  4
$`2`
[1] 10  2 15 13
$`3`
[1] 12
$`4`
[1] 11  3  5
$`5`
[1] 7 6 1 
```

这可以完成我一直在寻找的工作。它从背景“1:15”中采样，并通过向量“cut.by”将结果拆分为长度为“sizes”的向量。

但是，我仍然不乐意通过额外的（可能）长向量来指示拆分位置，例如上面代码中的“cut.by”。这绝对有效，但对于非常长的数据向量，我猜它可能会变得非常慢。

无论如何，感谢您提供的答案和指示！非常感激您的帮忙 ：-）

# c++ - 路径转弯时从路径反向计算 XY 位置

> ID：11286838
> 
> 赞同：0
> 
> 时间：2012-07-02T01:02:21.827
> 
> 标签：c++, math, coordinate-systems, polygons

**向下滚动到编辑以阅读第 2 部分**

所以我正在做一个项目，我需要使用给定的 X 和 Y 坐标创建一个多边形。以逻辑顺序给定坐标并创建路径。现在我需要计算一个 poligon 的所有位置，如果路径宽度为 [w]（例如 20 米）。我们都知道线条没有宽度。

这张图片解释了我想要做的事情：

![小路](../Images/e60877b3853aa06178bca870590cda7c.png)

黑点是路径的位置，它们的 X 和 Y 坐标是已知的。红线的宽度是已知的，它们都是[w]（例如20米，路径将它们从中间切开）。

我不知道如何获得所有紫色点的 X、Y 位置。我需要它们，这样我就可以创建绿色多边形形状。

如何在 C++ 中计算这些位置？有没有让它更容易的功能？

PS：如您所见，红线与两条蓝线夹角的一半成角度。

* * *

编辑：

我在 Visual Basic .NET 中创建了一个可视化应用程序，并获得了可以移植到 C++ 的公式。还有一个问题，请看这张图： ![在此处输入图像描述](../Images/c38f5ddd19872eb0f14a86f332919f84.png)

（应用下载链接： http: [//gpb.googlecode.com/files/DRAWER2.zip](http://gpb.googlecode.com/files/DRAWER2.zip)）

现在的问题是，当路径转弯时，它会反转创建多边形点的边。这会产生一个损坏的多边形（或者，它没有提供想要的效果）。

代码如下所示：

```
Dim MainImage As New DynamicBitmap

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim temp As New DynamicBitmap
    MainImage.CreateGrid(500, 500, 1, 1)
    temp.LoadBitmap("map.jpg")
    MainImage.DrawOnSurface(temp.Bitmap, temp.Rectangle, MainImage.Rectangle)
    MainImage.Surface.DrawLine(Pens.Black, 0, 250, 500, 250)
    MainImage.Surface.DrawLine(Pens.Black, 250, 0, 250, 500)
    PictureBox1.Image = MainImage.Bitmap
    PictureBox1.Refresh()
End Sub
Dim CPG(0) As Point
Dim CurrCount As Integer = 0
Dim Distance As Double = 30.0
Function CalculatePositions(ByVal PointStart As Point, ByVal PointMiddle As Point, ByVal PointEnd As Point) As Point()

    Dim DeltaX As Double
    Dim DeltaY As Double
    Dim AdderX As Double
    Dim AdderY As Double
    Dim Length As Double
    Dim CP(9) As Point
    CP(0) = PointMiddle
    CP(1) = PointStart
    CP(2) = PointEnd
    Dim RetP(1) As Point
    DeltaX = CP(1).X - CP(0).X
    DeltaY = CP(1).Y - CP(0).Y
    Length = Math.Sqrt(((DeltaX * DeltaX) + (DeltaY * DeltaY))) + 0.0000000001
    AdderX = (DeltaX / Length)
    AdderY = (DeltaY / Length)
    CP(3).X = (CP(0).X + (AdderX * Distance))
    CP(3).Y = (CP(0).Y + (AdderY * Distance))

    DeltaX = CP(2).X - CP(0).X
    DeltaY = CP(2).Y - CP(0).Y
    Length = Math.Sqrt(((DeltaX * DeltaX) + (DeltaY * DeltaY))) + 0.0000000001
    AdderX = (DeltaX / Length)
    AdderY = (DeltaY / Length)
    CP(4).X = (CP(0).X + (AdderX * Distance))
    CP(4).Y = (CP(0).Y + (AdderY * Distance))

    DeltaX = CP(3).X - CP(4).X
    DeltaY = CP(3).Y - CP(4).Y
    Length = Math.Sqrt(((DeltaX * DeltaX) + (DeltaY * DeltaY))) + 0.0000000001
    AdderX = (DeltaX / Length)
    AdderY = (DeltaY / Length)
    CP(8).X = (CP(4).X + (AdderX * Length / 2.0))
    CP(8).Y = (CP(4).Y + (AdderY * Length / 2.0))

    DeltaX = CP(8).X - CP(0).X
    DeltaY = CP(8).Y - CP(0).Y
    Length = Math.Sqrt(((DeltaX * DeltaX) + (DeltaY * DeltaY))) + 0.0000000001
    AdderX = (DeltaX / Length)
    AdderY = (DeltaY / Length)
    CP(7).X = (CP(0).X - (AdderX * Distance))
    CP(7).Y = (CP(0).Y - (AdderY * Distance))
    CP(9).X = (CP(0).X + (AdderX * Distance))
    CP(9).Y = (CP(0).Y + (AdderY * Distance))

    MainImage.Surface.DrawLine(Pens.Red, New Point(CP(7).X - 3, CP(7).Y - 3), New Point(CP(7).X + 3, CP(7).Y + 3))
    MainImage.Surface.DrawLine(Pens.Red, New Point(CP(7).X + 3, CP(7).Y - 3), New Point(CP(7).X - 3, CP(7).Y + 3))
    MainImage.Surface.DrawLine(Pens.Blue, New Point(CP(9).X - 3, CP(9).Y - 3), New Point(CP(9).X + 3, CP(9).Y + 3))
    MainImage.Surface.DrawLine(Pens.Blue, New Point(CP(9).X + 3, CP(9).Y - 3), New Point(CP(9).X - 3, CP(9).Y + 3))
    Return RetP
End Function

Private Sub PictureBox1_Click(sender As System.Object, e As System.EventArgs) Handles PictureBox1.Click
    'MsgBox(DirectCast(e, MouseEventArgs).X.ToString() + ":" + DirectCast(e, MouseEventArgs).Y.ToString())

    ReDim Preserve CPG(CurrCount)
    'i -= 1
    CPG(CurrCount) = New Point(DirectCast(e, MouseEventArgs).X, DirectCast(e, MouseEventArgs).Y)
    MainImage.Surface.DrawLine(Pens.Yellow, New Point(CPG(CurrCount).X - 3, CPG(CurrCount).Y - 3), New Point(CPG(CurrCount).X + 3, CPG(CurrCount).Y + 3))
    MainImage.Surface.DrawLine(Pens.Yellow, New Point(CPG(CurrCount).X + 3, CPG(CurrCount).Y - 3), New Point(CPG(CurrCount).X - 3, CPG(CurrCount).Y + 3))
    CurrCount += 1
    If CurrCount = 1 Then

    Else
        If CurrCount = 2 Then
            Dim DeltaX As Double
            Dim DeltaY As Double
            Dim AdderX As Double
            Dim AdderY As Double
            Dim Length As Double
            DeltaX = CPG(CurrCount - 2).X - CPG(CurrCount - 1).X
            DeltaY = CPG(CurrCount - 2).Y - CPG(CurrCount - 1).Y
            Length = Math.Sqrt(((DeltaX * DeltaX) + (DeltaY * DeltaY))) + 0.0000000001
            AdderX = (DeltaX / Length)
            AdderY = (DeltaY / Length)
            Dim Temp(1) As Point
            Dim Angle01 As Double = Math.Atan2(CPG(CurrCount - 1).X - CPG(CurrCount - 2).X, CPG(CurrCount - 1).Y - CPG(CurrCount - 2).Y) * 180.0 / Math.PI
            Dim SinMin As Double
            Dim CosMin As Double
            SinMin = Math.Sin(((-Angle01) + 0.0) / 180.0 * Math.PI)
            CosMin = Math.Cos(((-Angle01) + 0.0) / 180.0 * Math.PI)
            Temp(0).X = CPG(CurrCount - 2).X + (CosMin * Distance) + AdderX * Distance
            Temp(0).Y = CPG(CurrCount - 2).Y + (SinMin * Distance) + AdderY * Distance
            Temp(1).X = CPG(CurrCount - 2).X - (CosMin * Distance) + AdderX * Distance
            Temp(1).Y = CPG(CurrCount - 2).Y - (SinMin * Distance) + AdderY * Distance
            MainImage.Surface.DrawLine(Pens.Red, New Point(Temp(0).X - 3, Temp(0).Y - 3), New Point(Temp(0).X + 3, Temp(0).Y + 3))
            MainImage.Surface.DrawLine(Pens.Red, New Point(Temp(0).X + 3, Temp(0).Y - 3), New Point(Temp(0).X - 3, Temp(0).Y + 3))
            MainImage.Surface.DrawLine(Pens.Blue, New Point(Temp(1).X - 3, Temp(1).Y - 3), New Point(Temp(1).X + 3, Temp(1).Y + 3))
            MainImage.Surface.DrawLine(Pens.Blue, New Point(Temp(1).X + 3, Temp(1).Y - 3), New Point(Temp(1).X - 3, Temp(1).Y + 3))
        End If
        MainImage.Surface.DrawLine(Pens.Blue, CPG(CurrCount - 2), CPG(CurrCount - 1))
        If CurrCount > 2 Then
            CalculatePositions(CPG(CurrCount - 3), CPG(CurrCount - 2), CPG(CurrCount - 1))
        End If
    End If

    PictureBox1.Image = MainImage.Bitmap
    PictureBox1.Refresh()

    'MsgBox(CP(i).ToString())
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim DeltaX As Double
    Dim DeltaY As Double
    Dim AdderX As Double
    Dim AdderY As Double
    Dim Length As Double
    DeltaX = CPG(CurrCount - 2).X - CPG(CurrCount - 1).X
    DeltaY = CPG(CurrCount - 2).Y - CPG(CurrCount - 1).Y
    Length = Math.Sqrt(((DeltaX * DeltaX) + (DeltaY * DeltaY))) + 0.0000000001
    AdderX = (DeltaX / Length)
    AdderY = (DeltaY / Length)
    Dim Temp(1) As Point
    Dim Angle01 As Double = Math.Atan2(CPG(CurrCount - 1).X - CPG(CurrCount - 2).X, CPG(CurrCount - 1).Y - CPG(CurrCount - 2).Y) * 180.0 / Math.PI
    Dim SinMin As Double
    Dim CosMin As Double
    SinMin = Math.Sin(((-Angle01) + 0.0) / 180.0 * Math.PI)
    CosMin = Math.Cos(((-Angle01) + 0.0) / 180.0 * Math.PI)
    Temp(0).X = CPG(CurrCount - 1).X + (CosMin * Distance) - AdderX * Distance
    Temp(0).Y = CPG(CurrCount - 1).Y + (SinMin * Distance) - AdderY * Distance
    Temp(1).X = CPG(CurrCount - 1).X - (CosMin * Distance) - AdderX * Distance
    Temp(1).Y = CPG(CurrCount - 1).Y - (SinMin * Distance) - AdderY * Distance
    MainImage.Surface.DrawLine(Pens.Red, New Point(Temp(0).X - 3, Temp(0).Y - 3), New Point(Temp(0).X + 3, Temp(0).Y + 3))
    MainImage.Surface.DrawLine(Pens.Red, New Point(Temp(0).X + 3, Temp(0).Y - 3), New Point(Temp(0).X - 3, Temp(0).Y + 3))
    MainImage.Surface.DrawLine(Pens.Blue, New Point(Temp(1).X - 3, Temp(1).Y - 3), New Point(Temp(1).X + 3, Temp(1).Y + 3))
    MainImage.Surface.DrawLine(Pens.Blue, New Point(Temp(1).X + 3, Temp(1).Y - 3), New Point(Temp(1).X - 3, Temp(1).Y + 3))

    PictureBox1.Image = MainImage.Bitmap
    PictureBox1.Refresh()
End Sub 
```

我该如何解决这个问题？我想要一侧的红色 X-es 和另一侧的蓝色 X-es，并且我希望它不依赖于路径的转弯方式。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:10:05.780

您可以检测点位于直线的哪一侧。

```
position = Math.Sign( (Bx-Ax)*(Y-Ay) - (By-Ay)*(X-Ax) ) 
```

where`(Ax,Ay)`是起点，`(Bx,By)`是直线的终点。`(X,Y)`是您要检查的点。

如果`position`为正，则在左侧，在右侧（`0`在行上）为负。

有了这个，如果它们在路径的错误一侧，你可以交换粉红色的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:49:48.383

首先，获取第一个和最后一个段的紫色点的位置（这很简单）。

然后，对于每条蓝线，创建两条与其平行但适当间隔的绿线。对于最后一条和第一条蓝线，您必须在这些点处明确终止这些线。最简单的方法是创建一条适当长度的蓝线，例如 0,0，生成两条绿线，然后将它们转换为位置。它还可以让您更轻松地跟踪哪条线是哪条线。

然后，只需计算每一侧的绿线与下一段的绿线的交点。

这是我相当糟糕的绘画马拉松。![可怕，我知道。 是手绘的。 在油漆。](../Images/9b752d737acd777cf35fba97fcc1ea09.png)

如您所见，紫色点的位置很容易得出。

# javascript - jQuery 的 Buster.js 依赖错误：未定义窗口

> ID：11286839
> 
> 赞同：1
> 
> 时间：2012-07-02T01:02:36.240
> 
> 标签：javascript, jquery, unit-testing, buster.js

每当我尝试运行我的单元测试（使用 buster 和执行 user 编写`buster test`）并包含 jQuery（因为我的库依赖于它）。我收到以下错误：

`./test/deps/jquery-1.7.2.min.js: window is not defined`

这是我的 buster.js 配置文件： var config = module.exports;

```
config["GitJs Tests"] = {
    rootPath: "../",
    environment: "node",
    sources: [
        "src/Gitjs.js"
    ],
    deps: [
        "test/deps/*.js" // Jquery is in here
    ],
    tests: [
        "test/test_constructor.js"
    ]
}; 
```

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:55:03.663

进行了一些挖掘并发现您收到此错误，因为在 Node 中运行时，*没有 window*。jQuery 要求`window`对象正常工作。

简而言之：您不能在 NodeJs 中使用 jQuery（至少不能以其本机格式：D）。如果你想使用 jQuery 和 busterJs，你需要在“浏览器”模式下运行它。

# python - 数据仓库 ETL 缓慢 - 更改维度中的主键？

> ID：11286842
> 
> 赞同：4
> 
> 时间：2012-07-02T01:02:45.540
> 
> 标签：python, mysql, primary-key, data-warehouse, talend

我有一个按星型模式组织的工作 MySQL 数据仓库，我正在使用 Talend Open Studio for Data Integration 5.1 创建 ETL 流程。我希望这个过程每天运行一次。我估计其中一个维度表 (dimUser) 将有大约 200 万条记录和 23 列。

我在 Talend 中创建了一个可以运行的小型测试 ETL 流程，但考虑到每天可能需要更新的数据量，当前的性能不会降低它。ETL 过程需要四分钟来更新或插入 1,000 条记录到 dimUser。如果我假设记录数与 UPDATE 或 INSERT 的时间量之间存在线性关系，那么 ETL 不可能在 3-4 小时内完成（我的希望），更不用说一天了。

由于我不熟悉 Java，我将 ETL 编写为 Python 脚本并遇到了同样的问题。虽然，我确实发现如果我只做 INSERT，这个过程会快得多。我很确定瓶颈是由 UPDATE 语句引起的。

dimUser 中的主键是一个自增整数。我的朋友建议我废弃这个主键并将其替换为多字段主键（在我的情况下，2-3 个字段）。

在我将测试数据从仓库中取出并更改架构之前，任何人都可以提供与

1.  数据仓库的设计
2.  ETL过程
3.  每天有一个 ETL 过程 INSERT 或 UPDATE 几百万条记录是多么现实
4.  我朋友的建议会有很大帮助吗

如果您需要任何进一步的信息，请告诉我，我会发布。

更新 - 附加信息：

```
mysql> describe dimUser;
Field                        Type                Null Key Default            Extra
user_key                     int(10) unsigned    NO   PRI NULL               auto_increment
id_A                         int(10) unsigned    NO       NULL
id_B                         int(10) unsigned    NO       NULL
field_4                      tinyint(4) unsigned NO       0
field_5                      varchar(50)         YES      NULL
city                         varchar(50)         YES      NULL
state                        varchar(2)          YES      NULL
country                      varchar(50)         YES      NULL
zip_code                     varchar(10)         NO       99999
field_10                     tinyint(1)          NO       0
field_11                     tinyint(1)          NO       0
field_12                     tinyint(1)          NO       0
field_13                     tinyint(1)          NO       1
field_14                     tinyint(1)          NO       0
field_15                     tinyint(1)          NO       0
field_16                     tinyint(1)          NO       0
field_17                     tinyint(1)          NO       1
field_18                     tinyint(1)          NO       0
field_19                     tinyint(1)          NO       0
field_20                     tinyint(1)          NO       0
create_date                  datetime            NO       2012-01-01 00:00:00
last_update                  datetime            NO       2012-01-01 00:00:00
run_id                       int(10) unsigned    NO       999 
```

我使用代理键是因为我读过它是一种很好的做法。因为，从业务的角度来看，我想了解潜在的欺诈活动（比如 200 天用户与状态 X 相关联，然后第二天他们与状态 Y 相关联 - 他们可能已经移动或者他们的帐户可能已经妥协），这就是保留地理数据的原因。字段 id_B 可能有几个不同的 id_A 值与之关联，但我有兴趣了解不同的 (id_A, id_B) 元组。在此信息的上下文中，我的朋友建议将 (id_A, id_B, zip_code) 之类的东西作为主键。

对于大多数日常 ETL 流程 (>80%)，我只希望为现有记录更新以下字段：field_10 - field_14、last_update 和 run_id（此字段是我的 etlLog 表的外键，用于ETL 审计目的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:28:21.737

这是我对你的问题的看法。

1）仓库设计：

阅读 Ralph Kimball 的书：数据仓库工具包。

您的维度表有一堆名称无意义的列。应该为该列指定一个具有业务意义的名称，而不是 field_5。数据仓库是为了便于业务和报告人员查询。

我在这里看不到任何事实表。了解用户维度的用途在其设计中很重要。

2) ETL 过程

您是否确定了 ETL 流程的瓶颈在哪里？是从源读取数据、转换数据还是写入数据库？您可能以 40,000 行/秒的速度写入，但如果您只能从 XML 数据源读取 1,000 行/秒，那么您不会走得太远。

你有没有考虑过先把改变的记录加载到数据库中的一个暂存表中，不做任何转换，然后用 SQL 转换和更新数据？通常，您会发现数据库中的性能比将工作卸载到 ETL 工具要好。

3）每天更新几百万条记录是非常现实的，如果硬件可以处理的话。我认为重要的是要了解您是否只是要覆盖更改的类型 1 维度（在这种情况下，删除更改行，然后插入可能比更新/其他/插入更好的选择）。

如果您要保留类型 2 维度中的更改历史记录，您可能需要考虑在单独的小维度中对要跟踪更改的字段进行雪花化处理。当您拥有非常大的“客户”维度时，Kimball 会讨论此技术。然后，您将使用一个定期快照事实表，它允许您跟踪用户随时间的变化。

4) 你朋友建议从自然业务键中创建主键对于数据仓库环境来说不是一个好主意。我们创建一个整数代理键，以便我们可以将它包含在事实表中，以保持它们的精简，因为它们将比维度表大几个数量级。

# .net - 新项目，但包括旧站点文件

> ID：11286845
> 
> 赞同：3
> 
> 时间：2012-07-02T01:03:01.093
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-4

我曾使用 MVC 从头开始​​创建多个站点，但现在我的任务是迁移项目。

目前该站点有一个大型静态文件库 (*.html)。最终每个页面都将迁移到带有视图和控制器的 MVC。该网站非常适合转换，嵌套文件夹很少，每个文件夹都有几个页面。这应该是一个相当直接的工作。但是业务要求这必须逐个文件夹逐步完成，这没关系，因为每个文件夹都是相当独立的，很少有链接到其他文件夹。

我的问题是我是否可以将整个现有站点导入到`legacy_html`我的 VS 项目中命名的文件夹中，然后配置路由以基本上忽略此文件夹，为用户保留当前站点导航。

当我迁移每个文件夹时，该文件夹将从 legacy_html 中删除，并创建控制器和视图。

我问的原因是有很多根级文件夹，并且最终它们将全部迁移到控制器和视图，我不希望它们使项目混乱并妨碍我。我的目标是最终得到一个干净整洁的 MVC 文件夹结构，没有包袱。

类似于[带有 ASP.NET MVC MapPageRoute 的通配符以支持组织遗留代码](https://stackoverflow.com/questions/3348360/wildcards-with-asp-net-mvc-mappageroute-to-support-organizing-legacy-code)，但考虑到最近 MVC 的开发速度，我想知道答案是否有所改善。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:57:07.897

除非你真的想让 RouteHandler 处理你的“遗留”应用程序 url，否则最简单的`RegisterRoutes`方法是在 Global.asax 的方法中添加一个忽略路由：

```
 routes.IgnoreRoute("{*html}", new {html=@".*\.html(/.*)?"}); 
```

这将导致对 HTML 页面的请求“通过”路由处理并去寻找物理文件，这是他们传统上会做的事情。

[资料来源：Haacked](http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx)

# sql - 在嵌入字符上拆分字符串

> ID：11286847
> 
> 赞同：0
> 
> 时间：2012-07-02T01:03:21.317
> 
> 标签：sql, sql-server, tsql

我有一个主表，我正在从导入临时表中插入数据。数据不需要大量的按摩，但是一列是处理维度的。我记录的尺寸是长度、宽度和高度。它们是三个独立的列，每个列都有 varchar(10)。

导入表将这些组合成一列，由“x”分隔，因此为 LxWxH。

最终我将这个转换写成一个可执行的存储过程，但我被困在这个拆分上。有人可以帮我编写代码吗？

我插入的模板是：假设主表是ID（int），长度varchar（10），宽度varchar（10），高度varchar（10）假设导入表是ID（int），Dims varchar（50）

数据看起来像（来自导入）：

```
1   1.2x3.5x9.5
2   2.4x3.5x8.5
etc etc 
```

编码：

```
insert into [mastertable]
id, length, width, height
select
from [importtable] 
```

任何帮助表示赞赏！SQL Server 版本是 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:11:27.273

```
INSERT dbo.mastertable (id, length, width, height)
SELECT 
  ID, 
  L, 
  W = SUBSTRING(R, 1, CHARINDEX('x', r)-1),
  H = SUBSTRING(R, LEN(R)-CHARINDEX('x', REVERSE(r))+2, 255)
FROM
(
  SELECT ID, LWH, 
    L = SUBSTRING(LWH, 1, CHARINDEX('x', LWH)-1),
    r = SUBSTRING(LWH, CHARINDEX('x', LWH)+1, 255)
  FROM dbo.importtable
) AS x; 
```

# javascript - jQuery 链式选择选项覆盖加载时的默认选项

> ID：11286850
> 
> 赞同：1
> 
> 时间：2012-07-02T01:04:57.917
> 
> 标签：javascript, jquery, html

# 问题

当用户采取行动而不是加载时，如何让这个序列触发？

# 背景

我有三个`<select>`链接在一起的菜单：国家、地区、城市。在 region 中显示的选项取决于在 country 中选择的值，在 city 中显示的选项取决于在 region 中选择的值。例如，如果您从国家/地区中选择“美国”，则区域中的选项将是 50 个州，以此类推。Country 是唯一始终保持静态的菜单。区域和城市菜单选项根据用户从前面的菜单中选择的内容动态填充。When values from country or region are selected, the options for their chained sub-menus are fetched from the server. 这个过程在`$(selectID).change()`. 我正在使用[Chained Selects jQuery 插件](http://www.appelsiini.net/projects/chained)来完成此操作。具体来说，我正在使用“远程”）。

`<select>`菜单结构：

```
<select id="country">
  <option value="0">Select country...</option>
  <option value="1">Country 1</option>
  <option value="2">Country 2</option>
  ...
</select>

<select id="region">
  <option value="0">Select region...</option>
  <option value="1">region 1</option>
  <option value="2">region 2</option>
  ...
</select>

<select id="city">
  <option value="0">Select city...</option>
  <option value="1">city 1</option>
  <option value="2">city 2</option>
  ...
</select> 
```

通过链接 API，`<select>`菜单链接在一起，`$(document).ready()`如下所示：

```
$('#region').remoteChained('#country', 'server.php');
$('#city').remoteChained('#region', 'server.php'); 
```

# 问题

这些`<select>`菜单是搜索界面的一部分。此界面会记住用户最近的搜索。例如，假设用户最近的搜索是“美国 > 路易斯安那州 > 新奥尔良”，`<select>`那么页面上的项目最初应该呈现如下（此时链式 API 根本不应该发挥作用）：

```
<select id="country">
  ...
  <option value="113" selected>United States</option>
  ...
</select>

<select id="region">
  ...
  <option value="1390" selected>Louisiana</option>
  ...
</select>

<select id="city">
  ...
  <option value="17267" selected>New Orleans</option>
  ...
</select> 
```

但最终发生的是，当`$(selectID).remoteChained(...)`函数被调用时`$(document).ready()`，区域和城市选择选项被从服务器获取的值覆盖，并且“选定”选项丢失（`<option>`区域和城市的初始项目的整个列表都丢失了， 实际上）。使用上面保存的搜索示例，三个选择选项中的每一个的选项最初应预先选择为 1) 美国 2) 路易斯安那州 3) 新奥尔良，但改为 1) 美国 2) 选择地区... 3)选择城市... 换句话说，`<select>`菜单应该只在用户实际更改其中一个值时动态构建，而不是在页面加载时。

关于如何避免在页面加载时获取新的选择选项的任何建议，并且仅在用户物理更改选择选项时才这样做？我尝试过调用该`remoteChained()`函数，`$(selectID).change()`但遇到了使堆栈过载的递归问题，所以这不起作用。

提前感谢您可能有的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:15:28.160

我发现了问题。源代码下面的这一行强制`<select>`元素在加载时刷新。我刚刚删除了它。现在它只在用户进行更改时刷新。

```
/* Force updating the children. */
$(this).trigger("change"); 
```

# bash - 查找端口号和域名以连接到 Hive 表

> ID：11286851
> 
> 赞同：1
> 
> 时间：2012-07-02T01:05:28.337
> 
> 标签：bash, unix, hadoop, hive

我是 Hive、MapReduce 和 Hadoop 的新手。我正在使用 Putty 连接到 hive 表并访问表中的记录。所以我所做的是 - 我打开了 Putty 并在我输入的主机名中 -`vip.host.com`然后我单击`Open`。然后我输入了我的用户名和密码，然后输入了几个命令来访问 Hive sql。以下是我所做的清单

```
$ bash
bash-3.00$ hive
Hive history file=/tmp/unl/hive_job_log_unl_201207010451_1212680168.txt
hive> set mapred.job.queue.name=mdhi-technology;
hive> select * from table LIMIT 1; 
```

所以我的问题是——

我试图连接到`Hive Tables`使用`Squirrel SQL Client`，所以我的连接 URL 是- `jdbc:hive://vip.host.com:10000/default`。所以每当我尝试连接这些属性时，我总是得到`Hive: Could not establish connection to vip.host.com:10000/default: java.net.ConnectException: Connection timed out: connect`.

我可能正在使用`wrong port number or domain name here`. 有什么方法可以从命令提示符中找出这两件事，比如我应该使用什么域名和端口号（运行 Hive 服务器的位置）从 Squirrel SQL 客户端连接到 Hive 表。

**据我所知，主机和端口取决于配置单元服务器的运行位置**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-02T18:33:35.663

如果您能够登录到 hiveCLI，您只需执行以下属性。

```
hive> set hive.server2.thrift.port; 
```

它应该为您提供运行 hiveserver2 的端口号。它看起来像下面这样。

```
hive.server2.thrift.port=10014 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-01T13:40:37.023

过了好久才发这个。我没有得到 lsof 命令。所以使用了这个解决方法。

如果您有配置单元访问权限：

```
hive> set hive.metastore.uris;

hive.metastore.uris=thrift://sandbox.hortonworks.com:9083 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:06:09.823

如果您知道主机并且可以登录：尝试

```
/usr/sbin/lsof -i 
```

# jquery - 从缓存的 jquery 选择中删除元素

> ID：11286855
> 
> 赞同：4
> 
> 时间：2012-07-02T01:06:13.360
> 
> 标签：jquery, html, jquery-selectors

这不应该那么困难，但由于某种原因，我遇到了麻烦。

我想从缓存的 ul 中删除第一个 li：

```
var $selection = jQuery('.list').filter('.exclude'); 
```

.

```
<ul class="list">
  <li class="exclude" >Do not Include</li>
  <li>2</li>
  <li>3</li>
</ul> 
```

如何在没有第一个子 li 元素的情况下捕获**整个ul 对象？**

谢谢

编辑：我正在寻找的结果 jquery 对象是：

```
<ul class="list">
  <li>2</li>
  <li>3</li>
</ul> 
```

不是这个：

```
 <li>2</li>
  <li>3</li> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T01:20:27.863

## *[jsBin 演示](http://jsbin.com/onidus/edit#javascript,html,live)*

```
var $selection = jQuery('.list li').not('.exclude'); 
```

（你很接近：）使用`.not()`（或`:not`）选择器和`$('.list li')`元素集合（待过滤）

* * *

`$('.list li').remove('.exclude');`

**[演示](http://jsbin.com/onidus/2/edit)**

[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)
[http://api.jquery.com/not](http://api.jquery.com/not)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T04:13:17.050

[http://jsfiddle.net/9NtLF](http://jsfiddle.net/9NtLF) =)

```
var list = $("ul.list").clone();
list.find("li.exclude").remove(); 
```

# wix - WiX：安装 MS VC x64 可再发行组件作为 MSI 安装的一部分

> ID：11286858
> 
> 赞同：0
> 
> 时间：2012-07-02T01:07:20.207
> 
> 标签：wix, windows-installer, wix3.5

我正在使用 WIX 创建一个 MSI，它需要特定版本的 MS VC 2008 x64 Redistributable。MSI 也适用于基于 x64 的产品。

`vcredist_setup.exe`我有我需要的 64 位版本的可再发行组件的 Microsoft （我将其重命名`vc90redist_x64.exe`为我自己的参考）。

这是我用来定义二进制文件的 WiX XML：

```
<Binary Id='_VC_X64_REDIST_' SourceFile='redist\vc90redist_x64.exe' /> 
```

和[自定义操作](http://wix.sourceforge.net/manual-wix2/wix_xsd_customaction.htm)：

```
<CustomAction Id='_INSTALL_REDIST_'
              BinaryKey='_VC_X64_REDIST_'
              ExeCommand='/q /l c:\temp\vc.log'
              Execute='deferred'
              Return='asyncWait' /> 
```

注意：我添加了“/lc:\temp\vc.log”以查看 EXE 文件是否已达到尝试安装的程度。

注意：我已经尝试过`Return='check'`和`Execute='Immediate'`.

并调用自定义操作..

```
<InstallExecuteSequence>
    <Custom Action='_INSTALL_REDIST_' After='InstallFiles'>
        NOT Installed
    </Custom>
</InstallExecuteSequence> 
```

注意：我尝试了各种 After/Before 值，上面的一个似乎在日志文件中给了我最好的结果！但是还是没有安装。

当我运行安装 MSI 文件时，我的产品被安装，但可再发行组件没有（也就是说，`C:\temp\vc.txt`没有创建。如果我之后手动运行可再发行组件，它会提示我安装；“删除程序”中没有条目' 列表）。

使用上述设置运行时，我得到以下信息

```
'msiexec /i my.msi /l*v log.txt' 
```

这是日志的摘录（向右滚动以查看完整的行）：

```
Action ended 10:54:27: InstallFiles. Return value 1.
MSI (s) (64:E8) [10:54:27:655]: Doing action: _INSTALL_REDIST_
MSI (s) (64:E8) [10:54:27:655]: Note: 1: 2205 2:  3: ActionText
Action start 10:54:27: _INSTALL_REDIST_.
Action ended 10:54:27: _INSTALL_REDIST_. Return value 1.
...
MSI (s) (64:E8) [10:54:50:905]: Executing op: ActionStart(Name=_INSTALL_REDIST_,,)
MSI (s) (64:E8) [10:54:51:233]: Executing op: CustomActionSchedule(Action=_INSTALL_REDIST_,ActionType=1154,Source=BinaryData,Target=/q /l c:\temp\vc.log,)
...
MSI (s) (64:E8) [10:54:51:889]: Executing op: ActionStart(Name=PublishFeatures,Description=Publishing Product Features,Template=Feature: [1])
MSI (s) (64:E8) [10:54:51:889]: Executing op: FeaturePublish(Feature=Complete,,Absent=2,Component=<VERY LONG BINARY ASCII LOOKING THING>
   ...  1: _INSTALL_REDIST_ 2: 1631
... 
```

这是日志中最后一次提到_INSTALL_REDIST_。

我该如何解决这个问题？

（我搜索了 Stack Overflow 和大多数[WiX](http://en.wikipedia.org/wiki/WiX)参考资料和博客，但我没有设法做到这一点）

# objective-c - 在 UITabBarController 中为 Xcode Storyboard Segue 设置标识符，并获取指向其视图控制器的指针

> ID：11286859
> 
> 赞同：9
> 
> 时间：2012-07-02T01:07:51.087
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, storyboard

这是我第一个使用故事板/segues 的应用程序，我很确定这个问题的答案很简单，但我会尽可能彻底地描述我的问题。

我正在制作一个简单的应用程序，它有一个标签栏控制器场景和两个视图控制器。

![我的故事板的视图，其中一个](../Images/81f3cce12b8d3cef2fbe6e2922b54556.png)

我的应用程序通过从另一个应用程序发送 URL 来启动。应用程序委托中的`application:openURL:sourceApplication:annotation:`方法执行一些工作来确定

*   首先显示哪个选项卡，以及
*   在上面显示什么信息。

我的目标是使用*AppDelegate*`performSegueWithIdentifier`中的方法（尽管我对替代方案持开放态度）来选择选项卡，并找到一种方法将方法发送到情节提要创建的视图控制器的实例。

 ***问题 #1**是我无法设置标识符。当我选择“关系”选项卡时，属性检查器中没有可用的选项（它显示“不适用”）。如何为这个 segue 设置名称？我可以吗？或者是否有一些规则不能以编程方式触发*UITabBarController segues？*

**问题 #2**是我找不到指向视图控制器的指针的方法。Pre-Storyboard 我会`alloc`和`init`一个新的视图控制器然后设置它，但是如果我这样做，它不会在我的应用程序启动时显示（我认为这是因为 Storyboard 正在显示同一视图控制器的不同实例。 )

我知道这篇文章很长，但我觉得我错过了一些简单的东西。它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:35:52.867

听起来您需要让 AppDelegate[将入口点设置](https://stackoverflow.com/questions/8872215/multiple-entry-points-to-a-storyboard)为您的故事栏。*

# github - 从 GitHub 复制代码/文本不保留选项卡

> ID：11286861
> 
> 赞同：0
> 
> 时间：2012-07-02T01:08:49.210
> 
> 标签：github

如果我从我的 GitHub 存储库中的文件复制代码或文本，并将其复制到任何 Windows 应用程序（例如，为了参数，记事本），它不会保留选项卡。

有什么解决方法吗？原因是什么？

**编辑：我使用传统的****Ctrl-C**和**Ctrl-V**组合或相同操作的任何其他变体进行复制和粘贴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T01:40:20.863

如果您从文件的漂亮打印的 HTML 版本复制，这可能会稍微弄乱原始格式。

作为一种解决方法，切换到“原始”选项卡（或只下载文件）。

# c++ - 询问管理员权限 c++ windows

> ID：11286862
> 
> 赞同：0
> 
> 时间：2012-07-02T01:09:02.297
> 
> 标签：c++, permissions, admin

我在 C++ 中很新

我找到了这篇文章`http://msdn.microsoft.com/en-us/magazine/cc163486.aspx`并试图向管理员询问 Windows 的权限。

我创建了 .manifest 文件添加了这个

```
#define MANIFEST_RESOURCE_ID 1
MANIFEST_RESOURCE_ID RT_MANIFEST "MyAPP.exe.manifest" 
```

到#includes 下的我的main.cpp

视觉工作室 说：`expected a declaration.`

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:14:50.943

正如您提供的链接中所述：

> 如果保存为 AdminApp.exe.manifest ， **.rc 文件**中的以下行将嵌入上面的清单：

```
#define MANIFEST_RESOURCE_ID 1
MANIFEST_RESOURCE_ID RT_MANIFEST "AdminApp.exe.manifest" 
```

您的 C++ 项目需要一个资源文件，这些行属于 .rc 文件，而不是您的 main.cpp

不要忘记也创建清单文件。

# python - 有没有办法检查 NumPy 数组是否共享相同的数据？

> ID：11286864
> 
> 赞同：51
> 
> 时间：2012-07-02T01:09:32.653
> 
> 标签：python, numpy

我的印象是，在 NumPy 中，两个数组可以共享相同的内存。举个例子：

```
import numpy as np
a=np.arange(27)
b=a.reshape((3,3,3))
a[0]=5000
print (b[0,0,0]) #5000

#Some tests:
a.data is b.data #False
a.data == b.data #True

c=np.arange(27)
c[0]=5000
a.data == c.data #True ( Same data, not same memory storage ), False positive 
```

所以显然`b`没有复制`a`; 它只是创建了一些新的元数据并将其附加到`a`正在使用的同一个内存缓冲区。有没有办法检查两个数组是否引用相同的内存缓冲区？

我的第一印象是使用`a.data is b.data`，但返回 false。我可以这样做`a.data == b.data`返回True，但我不认为检查以确保`a`并`b`共享相同的内存缓冲区，只是所引用的内存块`a`和所引用的内存块`b`具有相同的字节。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-02T01:30:34.033

您可以使用[base](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.base.html)属性来检查一个数组是否与另一个数组共享内存：

```
>>> import numpy as np
>>> a = np.arange(27)
>>> b = a.reshape((3,3,3))
>>> b.base is a
True
>>> a.base is b
False 
```

不确定这是否能解决您的问题。`None`如果数组拥有自己的内存，则基本属性将是。请注意，一个数组的基数将是另一个数组，即使它是一个子集：

```
>>> c = a[2:]
>>> c.base is a
True 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T03:16:09.080

我认为 jterrace 的答案可能是最好的方法，但这是另一种可能性。

```
def byte_offset(a):
    """Returns a 1-d array of the byte offset of every element in `a`.
    Note that these will not in general be in order."""
    stride_offset = np.ix_(*map(range,a.shape))
    element_offset = sum(i*s for i, s in zip(stride_offset,a.strides))
    element_offset = np.asarray(element_offset).ravel()
    return np.concatenate([element_offset + x for x in range(a.itemsize)])

def share_memory(a, b):
    """Returns the number of shared bytes between arrays `a` and `b`."""
    a_low, a_high = np.byte_bounds(a)
    b_low, b_high = np.byte_bounds(b)

    beg, end = max(a_low,b_low), min(a_high,b_high)

    if end - beg > 0:
        # memory overlaps
        amem = a_low + byte_offset(a)
        bmem = b_low + byte_offset(b)

        return np.intersect1d(amem,bmem).size
    else:
        return 0 
```

例子：

```
>>> a = np.arange(10)
>>> b = a.reshape((5,2))
>>> c = a[::2]
>>> d = a[1::2]
>>> e = a[0:1]
>>> f = a[0:1]
>>> f = f.reshape(())
>>> share_memory(a,b)
80
>>> share_memory(a,c)
40
>>> share_memory(a,d)
40
>>> share_memory(c,d)
0
>>> share_memory(a,e)
8
>>> share_memory(a,f)
8 
```

这是一个图表，显示了每次调用的时间作为我计算机上`share_memory(a,a[::2])`元素数量的函数。`a`

![share_memory 函数](../Images/9a103ff86fe2db31d03448a0355a42e4.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-05-14T14:36:15.770

要准确解决问题，您可以使用

```
import numpy as np

a=np.arange(27)
b=a.reshape((3,3,3))

# Checks exactly by default
np.shares_memory(a, b)

# Checks bounds only
np.may_share_memory(a, b) 
```

两者都`np.may_share_memory`采用`np.shares_memory`可选`max_work`参数，让您决定投入多少精力来确保没有误报。这个问题是 NP 完全的，所以总是找到正确的答案在计算上是相当昂贵的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-10T14:58:39.660

做就是了：

```
a = np.arange(27)
a.__array_interface__['data'] 
```

第二行将返回一个元组，其中第一个条目是内存地址，第二个是数组是否为只读。结合形状和数据类型，您可以计算出数组所覆盖的内存地址的确切跨度，因此当一个数组是另一个数组的子集时，您也可以从中计算出来。

# macos - Access-Control-Allow-Origin 不允许原始文件：//127.0.0.1

> ID：11286866
> 
> 赞同：0
> 
> 时间：2012-07-02T01:10:23.090
> 
> 标签：macos, apache

我在 Mac 上的本地服务器上运行应用程序，该应用程序需要连接到服务器 domain.com/service.php，但是当我从本地页面调用服务（http://127.0.0.1/webpage.php）时在控制台出现如下错误

Access-Control-Allow-Origin 不允许原始文件：//127.0.0.1。

关于它的一些想法？，在 Windows 本地服务器上它工作完美

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:26:00.527

在您的`webpage.php`源代码中，您需要在最顶部添加以下代码：

```
<?php header('Access-Control-Allow-Origin: *'); ?> 
```

这是[CORS](https://developer.mozilla.org/en/http_access_control)（跨域资源共享）的一种解决方法。

# ios - ios 撤消管理器 - 重置为第一个撤消

> ID：11286870
> 
> 赞同：0
> 
> 时间：2012-07-02T01:10:48.630
> 
> 标签：ios, reset, nsundomanager

我正在开发一个 IOS 应用程序。我需要一个包括撤消和重置的功能。对最后一个操作执行撤消似乎很简单。但是，我找不到任何内置支持来支持第一个存储的撤消操作。

我的问题是，如何弹出第一个撤消操作并相应地重置我的视图？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:19:21.940

根据您正在执行的操作，实现可能会有所不同，但[可以在此处找到 NSUndoManager 的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html)。

如果您只想撤消最后一组操作，请调用`undoNestedGroup`.

如果您想撤消所有操作，您可以创建一个`while`已测试的循环，`canUndo`如果返回`YES`，则调用`undo`.

# d3.js - 如何在 d3.js 中制作小时和分钟的自定义轴格式化程序？

> ID：11286872
> 
> 赞同：17
> 
> 时间：2012-07-02T01:11:14.747
> 
> 标签：d3.js, label

我有一个用 d3.js 绘制的数据集。x 轴代表时间（以分钟为单位）。我想以某种`hh:mm`格式显示这个轴，但我找不到在 d3 中干净地执行此操作的方法。

我的轴代码如下所示：

```
svg.append('g')
   .attr('class', 'x axis')
   .attr('transform', 'translate(0,' + height + ')')
   .call(d3.svg.axis()
     .scale(x)
     .orient('bottom')); 
```

它会在几分钟内生成看起来像`[100, 115, 130, 140]`等的标签。

我目前的解决方案是`text`在生成元素后选择它们，并用一个函数覆盖它们：

```
 svg.selectAll('.x.axis text')
   .text(function(d) { 
       d = d.toFixed();
       var hours = Math.floor(d / 60);
       var minutes = pad((d % 60), 2);
       return hours + ":" + minutes;
   }); 
```

这会输出轴刻度`[1:40, 1:55, 2:10]`，例如 等。

但这感觉很笨拙并避免使用`d3.format`. 有没有更好的方法来制作这些标签？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-02T01:57:25.757

如果你有**绝对时间**，你可能想将你的*x*数据转换为 JavaScript [Date 对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)而不是简单的数字，然后你想使用[d3.time.scale](https://github.com/mbostock/d3/wiki/Time-Scales)和[d3.time.format](https://github.com/mbostock/d3/wiki/Time-Formatting)。轴的“hh:mm”格式示例如下：

```
d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(d3.time.format("%H:%M")); 
```

实际上，您可能根本不需要指定刻度格式；根据您的刻度域和刻度数，[默认时间刻度格式](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-tickFormat)可能足以满足您的需要。或者，如果您想要完全控制，您还可以指定刻度的刻度间隔。例如，对于每十五分钟的滴答声，您可能会说：

```
d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .ticks(d3.time.minutes, 15)
    .tickFormat(d3.time.format("%H:%M")); 
```

如果您有**相对时间**，*即*持续时间，（因此有代表分钟而不是绝对日期的数字），您可以通过选择任意纪元并即时转换将它们格式化为日期。这样您就可以将数据本身保留为数字。例如：

```
var formatTime = d3.time.format("%H:%M"),
    formatMinutes = function(d) { return formatTime(new Date(2012, 0, 1, 0, d)); }; 
```

由于只会显示分钟和小时，因此您选择的时代无关紧要。下面是一个使用这种技术来格式化持续时间分布的示例：

*   [http://bl.ocks.org/3048166](http://bl.ocks.org/3048166)

# ruby-on-rails-3 - Rails 在 AJAX 请求期间阻止布局

> ID：11286875
> 
> 赞同：13
> 
> 时间：2012-07-02T01:11:55.540
> 
> 标签：ruby-on-rails-3

我已经四处搜索，但无法找到这种类型的机械师的解决方案。我想在 Rails 中正常加载所有页面，但是每当我执行 ajax 请求时，我只想返回没有布局的页面。因此，每当我提出 ajax 请求时，我都可以`?page=true`在这些行中附加 a 或其他内容，并让 Rails 只返回没有布局的页面。

这可能吗？有没有更好的方法来做到这一点，我错过了？

谢谢你的帮助！

**最终解决方案工作代码：**

在控制器中，您需要做的就是`format.html`在`respond_to`块中添加一些逻辑。

以`show`方法为例

```
def show
    # code beforehand

    respond_to do |format|
        format.html { render :layout => !request.xhr? }
        # other formats
    end
end 
```

就是这样！在 AJAX 请求期间防止布局！

**注意：**感谢 smathy 对他的回答的评论，这进一步简化了。我最初有`format.html { render :layout => nil if request.xhr? }` 这个解决方案同样有效，但 smathy 的修改使它更简单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T01:40:04.500

您不需要添加该参数，`request.xhr?`当它是 Ajax 请求时，将在您的控制器中返回 true。只需使用它来决定是否渲染布局。

# ruby - 为什么从堆栈跟踪中删除当前方法时引发异常？

> ID：11286879
> 
> 赞同：3
> 
> 时间：2012-07-02T01:12:23.987
> 
> 标签：ruby, exception

当引发 Ruby 异常时，我知道我可以使用该`caller`方法生成删除当前方法调用的回溯：

```
raise SomeException, "error message", caller 
```

根据镐的书，这“在库模块中通常很有用”。

为什么要从堆栈跟踪中删除当前方法？似乎我可以获得的关于错误发生的确切位置的信息越多，就越容易追踪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:34:20.180

对我来说似乎有用的原因是堆栈跟踪可以最清楚地向库的用户指出问题的根源。我的*Programming Ruby*并没有提供比你更多的洞察力，但是*The Ruby Programming Language*证实了我的感受：

> 我们在这里提出的异常的目的是指出调用 ... 方法的问题，而不是方法内部的代码。...如果我们想直接指向问题代码，我们可以提供自定义堆栈跟踪作为`raise`with ...的第三个参数`caller`。

# android - 关于尾随字符的 Android 计费异常

> ID：11286880
> 
> 赞同：8
> 
> 时间：2012-07-02T01:12:25.383
> 
> 标签：android, exception, android-billing

我从我的崩溃报告中得到了这个异常：

```
java.lang.RuntimeException: Unable to start service com.problemio.BillingService@4132b868 with Intent { act=com.android.vending.billing.PURCHASE_STATE_CHANGED cmp=com.problemio/.BillingService (has extras) }: java.lang.IllegalArgumentException: utils.Base64DecoderException: single trailing character at offset 19
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2376)
at android.app.ActivityThread.access$1900(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalArgumentException: utils.Base64DecoderException: single trailing character at offset 19
at utils.Security.generatePublicKey(Security.java:199)
at utils.Security.verifyPurchase(Security.java:118)
at com.problemio.BillingService.purchaseStateChanged(BillingService.java:545)
at com.problemio.BillingService.handleCommand(BillingService.java:421)
at com.problemio.BillingService.onStart(BillingService.java:398)
at android.app.Service.onStartCommand(Service.java:438)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
... 10 more
Caused by: utils.Base64DecoderException: single trailing character at offset 19
at utils.Base64.decode(Base64.java:529)
at utils.Base64.decode(Base64.java:444)
at utils.Base64.decode(Base64.java:390)
at utils.Security.generatePublicKey(Security.java:189)
... 16 more
java.lang.IllegalArgumentException: utils.Base64DecoderException: single trailing character at offset 19
at utils.Security.generatePublicKey(Security.java:199)
at utils.Security.verifyPurchase(Security.java:118)
at com.problemio.BillingService.purchaseStateChanged(BillingService.java:545)
at com.problemio.BillingService.handleCommand(BillingService.java:421)
at com.problemio.BillingService.onStart(BillingService.java:398)
at android.app.Service.onStartCommand(Service.java:438)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
at android.app.ActivityThread.access$1900(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: utils.Base64DecoderException: single trailing character at offset 19
at utils.Base64.decode(Base64.java:529)
at utils.Base64.decode(Base64.java:444)
at utils.Base64.decode(Base64.java:390)
at utils.Security.generatePublicKey(Security.java:189)
... 16 more
utils.Base64DecoderException: single trailing character at offset 19
at utils.Base64.decode(Base64.java:529)
at utils.Base64.decode(Base64.java:444)
at utils.Base64.decode(Base64.java:390)
at utils.Security.generatePublicKey(Security.java:189)
at utils.Security.verifyPurchase(Security.java:118)
at com.problemio.BillingService.purchaseStateChanged(BillingService.java:545)
at com.problemio.BillingService.handleCommand(BillingService.java:421)
at com.problemio.BillingService.onStart(BillingService.java:398)
at android.app.Service.onStartCommand(Service.java:438)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
at android.app.ActivityThread.access$1900(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

但我不太明白问题出在哪里。有什么建议么？

它指向这个方法：

```
 /**
   * Decodes Base64 content using the supplied decodabet and returns
   * the decoded byte array.
   *
   * @param source the Base64 encoded data
   * @param off the offset of where to begin decoding
   * @param len the length of characters to decode
   * @param decodabet the decodabet for decoding Base64 content
   * @return decoded data
   */
  public static byte[] decode(byte[] source, int off, int len, byte[] decodabet)
      throws Base64DecoderException {
    int len34 = len * 3 / 4;
    byte[] outBuff = new byte[2 + len34]; // Upper limit on size of output
    int outBuffPosn = 0;

    byte[] b4 = new byte[4];
    int b4Posn = 0;
    int i = 0;
    byte sbiCrop = 0;
    byte sbiDecode = 0;
    for (i = 0; i < len; i++) {
      sbiCrop = (byte) (source[i + off] & 0x7f); // Only the low seven bits
      sbiDecode = decodabet[sbiCrop];

      if (sbiDecode >= WHITE_SPACE_ENC) { // White space Equals sign or better
        if (sbiDecode >= EQUALS_SIGN_ENC) {
          // An equals sign (for padding) must not occur at position 0 or 1
          // and must be the last byte[s] in the encoded value
          if (sbiCrop == EQUALS_SIGN) {
            int bytesLeft = len - i;
            byte lastByte = (byte) (source[len - 1 + off] & 0x7f);
            if (b4Posn == 0 || b4Posn == 1) {
              throw new Base64DecoderException(
                  "invalid padding byte '=' at byte offset " + i);
            } else if ((b4Posn == 3 && bytesLeft > 2)
                || (b4Posn == 4 && bytesLeft > 1)) {
              throw new Base64DecoderException(
                  "padding byte '=' falsely signals end of encoded value "
                      + "at offset " + i);
            } else if (lastByte != EQUALS_SIGN && lastByte != NEW_LINE) {
              throw new Base64DecoderException(
                  "encoded value has invalid trailing byte");
            }
            break;
          }

          b4[b4Posn++] = sbiCrop;
          if (b4Posn == 4) {
            outBuffPosn += decode4to3(b4, 0, outBuff, outBuffPosn, decodabet);
            b4Posn = 0;
          }
        }
      } else {
        throw new Base64DecoderException("Bad Base64 input character at " + i
            + ": " + source[i + off] + "(decimal)");
      }
    }

    // Because web safe encoding allows non padding base64 encodes, we
    // need to pad the rest of the b4 buffer with equal signs when
    // b4Posn != 0\.  There can be at most 2 equal signs at the end of
    // four characters, so the b4 buffer must have two or three
    // characters.  This also catches the case where the input is
    // padded with EQUALS_SIGN
    if (b4Posn != 0) {
      if (b4Posn == 1) {
        throw new Base64DecoderException("single trailing character at offset "
            + (len - 1));
      }
      b4[b4Posn++] = EQUALS_SIGN;
      outBuffPosn += decode4to3(b4, 0, outBuff, outBuffPosn, decodabet);
    }

    byte[] out = new byte[outBuffPosn];
    System.arraycopy(outBuff, 0, out, 0, outBuffPosn);
    return out;
  } 
```

错误似乎指向我的 BillingService.java 中的这些行

```
at com.problemio.BillingService.purchaseStateChanged(BillingService.java:585)
at com.problemio.BillingService.handleCommand(BillingService.java:461)
at com.problemio.BillingService.onStart(BillingService.java:438) 
```

585上的线是线

```
purchases = Security.verifyPurchase(signedData, signature); 
```

在这种方法中：

```
private void purchaseStateChanged(int startId, String signedData, String signature) {
    ArrayList<Security.VerifiedPurchase> purchases;
    purchases = Security.verifyPurchase(signedData, signature);
    if (purchases == null) {
        return;
    } 
```

第 461 行是这一行：

```
purchaseStateChanged(startId, signedData, signature); 
```

在这种方法中：

```
public void handleCommand(Intent intent, int startId) {
    String action = intent.getAction();
    if (Consts.DEBUG) {
        Log.i(TAG, "handleCommand() action: " + action);
    }
    if (Consts.ACTION_CONFIRM_NOTIFICATION.equals(action)) {
        String[] notifyIds = intent.getStringArrayExtra(Consts.NOTIFICATION_ID);
        confirmNotifications(startId, notifyIds);
    } else if (Consts.ACTION_GET_PURCHASE_INFORMATION.equals(action)) {
        String notifyId = intent.getStringExtra(Consts.NOTIFICATION_ID);
        getPurchaseInformation(startId, new String[] { notifyId });
    } else if (Consts.ACTION_PURCHASE_STATE_CHANGED.equals(action)) {
        String signedData = intent.getStringExtra(Consts.INAPP_SIGNED_DATA);
        String signature = intent.getStringExtra(Consts.INAPP_SIGNATURE);
        purchaseStateChanged(startId, signedData, signature);
    } else if (Consts.ACTION_RESPONSE_CODE.equals(action)) {
        long requestId = intent.getLongExtra(Consts.INAPP_REQUEST_ID, -1);
        int responseCodeIndex = intent.getIntExtra(Consts.INAPP_RESPONSE_CODE,
                ResponseCode.RESULT_ERROR.ordinal());
        ResponseCode responseCode = ResponseCode.valueOf(responseCodeIndex);
        checkResponseCode(requestId, responseCode);
    }
} 
```

第 438 行是这一行：

```
handleCommand(intent, startId); 
```

在这种方法中：

```
@Override
public void onStart(Intent intent, int startId) {
    handleCommand(intent, startId);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T02:22:39.697

这种情况是一直发生还是只发生一次/几次？您获得的签名`purchaseStateChanged(startId, signedData, signature)`也是 Base64 编码的，错误表示编码错误。如果它只发生一次或两次，则可能是 Google Play IAP 服务器出现故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-18T10:44:44.910

对我来说，这是因为我使用了错误的公钥！确保您使用的公钥是您从市场上获得的公钥。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-18T09:28:42.100

我在构造函数
IabHelper(Context ctx, String base64PublicKey)时看到了上面的错误

被赋予了不正确的密钥。
解决办法是：
去Google Play，开发者控制台网页。
选择应用程序，
然后在“服务和 API”下，您将看到“您的此应用程序的许可证密钥”
使用该字符串。

* * *

另一种解决方案是进入 Security.java 文件并进行一些更改。请参阅我有评论“// ADD_THIS_LINE”的行

```
 public static boolean verifyPurchase(String base64PublicKey, String signedData, String signature) {
    if (signedData == null) {
        Log.e(TAG, "data is null");
        return false;
    }

    boolean verified = false;
    if (!TextUtils.isEmpty(signature)) {
        PublicKey key = Security.generatePublicKey(base64PublicKey);

        if( key != null) // ADD_THIS_LINE
            verified = Security.verify(key, signedData, signature);

        if (!verified) {
            Log.w(TAG, "signature does not match data.");
            return false;
        }
    }
    return true;
}    
////////////////////////////////////////////////////////////////////////
//  :     :     
///////////////////////////////////////////////////////////////////////
 public static PublicKey generatePublicKey(String encodedPublicKey) {
    try {
        byte[] decodedKey = Base64.decode(encodedPublicKey);
        KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
        return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    } catch (InvalidKeySpecException e) {
        Log.e(TAG, "Invalid key specification.");
        throw new IllegalArgumentException(e);
    } catch (Base64DecoderException e) {
        Log.e(TAG, "Base64 decoding failed.");
        return null;  // ADD_THIS_LINE
        // COMMENT_OUT_THIS_LINE:   throw new IllegalArgumentException(e);
    }
}

////////////////////////////////////////////////////////////// 
```

# javascript - jquery 提交表单一次

> ID：11286881
> 
> 赞同：0
> 
> 时间：2012-07-02T01:13:08.603
> 
> 标签：javascript, jquery

我正在尝试编写一个自定义的 magento 模块，除了一个问题外，我已经完成了所有工作并且工作正常。

该模块是一个带有 4 个单选按钮的表单。它们在结帐页面上都是空白的，我进行了设置，以便当您单击一个时，它会提交表单并重新加载购物车页面，其中包含小计中的“额外费用”。

我的问题是我需要在页面加载时“自动提交”的第一个选项。但是我尝试了很多不同的东西，但无法想出一种方法来使用 jquery .submit() 函数只提交一次表单。因为它现在可以按照我想要的方式工作，除了它以无限循环加载页面。

有什么办法可以只说一次 submit() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:24:50.667

我会在服务器端设置默认单选按钮，而不是有一个额外的提交/刷新周期，但如果你坚持在客户端做...

我假设在后续刷新时将保留先前的选择（因为您的服务器端代码会回显先前选择的值？），所以您是否可以测试是否检查了任何无线电，如果没有，则假设这是第一次也是唯一一次自动提交？

```
$(document).ready(function() {    
    var $radios = $('#yourFormId input[name="yourRadioButtonGroupName"]');

    if (!$radios.is(":checked")) {
       // No radios currently checked, so check the first and submit
       $radios.eq(0).prop("checked",true);
       $("#yourFormId").submit();
    }
}); 
```

该[`.is()`方法](http://api.jquery.com/is/)将“根据选择器、元素或 jQuery 对象检查当前匹配的元素集，`true`如果这些元素中的至少一个与给定参数匹配，则返回。”

# javascript - Ruby / Rails / JavaScript / JSON - 解析和格式化日期

> ID：11286882
> 
> 赞同：0
> 
> 时间：2012-07-02T01:13:16.053
> 
> 标签：javascript, ruby-on-rails, ruby, json

我正在尝试绘制从 Ruby on Rails 中的 ActiveRecord 查询中提取的数据。JavaScript 图表库 (amcharts) 接受以下形式的数据：

```
 var chartData = [{
            date: new Date(2012, 0, 1),
            products: 227
        }, {
            date: new Date(2012, 0, 2),
            products: 371
        }] 
```

如何解析 YYYY-MM-DD 格式的日期字符串并从下面的查询中创建 JavaScript Date 对象？我已经看过本[教程](http://blog.amcharts.com/2011/03/amcharts-javascript-tutorials-part-3.html)，但我无法弄清楚如何编写一个函数来正确解析 json 输出。

```
 create_table :products do |t|
        t.date :date
  end

 <% a = Product.select("date(date) as date, count(id) as products").group("date(date)").to_a.to_json %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:53:31.023

这是对我有用的答案：

```
 function parseDate(dateString) {
     // split the string get each field
     var dateArray = dateString.split("-");
     // now lets create a new Date instance, using year, month and day as parameters
     // month count starts with 0, so we have to convert the month number
     var date = new Date(Number(dateArray[0]), Number(dateArray[1]) - 1, Number(dateArray[2]));
     return date;
 }

     var array = <%= a.to_json %>;

     var array2 = [];

     array.forEach(function(element){ 
       array2.push({date: parseDate(element.date), products: element.products});
     }); 
```

# java - 无法使用 EclipsePortable 为 Android 指定 targetSDKVersion

> ID：11286883
> 
> 赞同：0
> 
> 时间：2012-07-02T01:13:33.850
> 
> 标签：java, android

我正在尝试创建一个基本的 hello world android 应用程序。问题是，当我创建一个新的 android 项目并尝试指定 targetSDKVersion 时，选择按钮不可点击并且无法按下向下箭头。

链接的图像显示了一些关于 SDK 位置的信息以及我如何无法指定目标[http://imageshack.us/photo/my-images/196/newandroidproject.jpg/](http://imageshack.us/photo/my-images/196/newandroidproject.jpg/)

我在便携式闪存驱动器上安装了 Eclipse Portable，安装了 Java 和 Android 4.1，并且安装了 ADT 插件。

闪存驱动器是 K: In K: Inside 是 1.) Eclipse Portable 和 2.) Android Inside Eclipse Portable 。在 K:\EclipsePortable

```
6/11/2012  02:06 PM    <DIR>          .
6/11/2012  02:06 PM    <DIR>          ..
6/11/2012  02:06 PM    <DIR>          App
1/24/2011  07:09 PM            69,941 EclipsePortable.
1/24/2011  07:56 PM             4,745 help.html
6/11/2012  02:09 PM    <DIR>          Other
6/11/2012  02:09 PM    <DIR>          Data
6/11/2012  02:49 PM    <DIR>          JDK
6/11/2012  02:54 PM    <DIR>          JRE
6/11/2012  03:06 PM    <DIR>          javafx
6/21/2012  01:45 PM            21,910 hs_err_pid1848.l
6/22/2012  02:55 PM            22,769 hs_err_pid3476.l 
```

内部 K:\Android

```
06/27/2012  07:14 PM    <DIR>          .
06/27/2012  07:14 PM    <DIR>          ..
06/24/2012  01:53 PM           357,814 AVD Manager.exe
06/24/2012  01:53 PM           357,814 SDK Manager.exe
06/24/2012  01:53 PM             1,170 SDK Readme.txt
06/27/2012  07:14 PM    <DIR>          add-ons
06/27/2012  07:14 PM    <DIR>          platforms
06/27/2012  07:14 PM    <DIR>          tools
06/27/2012  07:15 PM            70,987 uninstall.exe
06/28/2012  02:35 PM    <DIR>          temp
06/28/2012  02:36 PM    <DIR>          platform-tools
06/30/2012  09:32 PM    <DIR>          docs
06/30/2012  11:13 PM    <DIR>          samples
06/30/2012  11:17 PM    <DIR>          sources
06/30/2012  11:52 PM    <DIR>          system-images
           4 File(s)        787,785 bytes
          11 Dir(s)   1,719,787,520 bytes free 
```

内部平台是 Android-16，内部是模板、皮肤和数据以及一个 android.jar 文件。

我是否应该遵循[另一个 SO 问题中提到的用户](https://stackoverflow.com/questions/10055614/is-it-possible-to-run-java-jdk-windows-eclipse-indigo-and-android-sdk-for)[Android Stack](https://stackoverflow.com/users/1278943/android-stack)的回答。问这个问题的人使用的是便携式 Java，但用户“Android Stack”说要从哪个需要复制常规 Java？`C:\Program Files\...`

PS有人告诉我，Android的这个目录设置很奇怪。是这样吗？如果是这样，我可能需要提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:26:05.400

您的 android SDK 设置仍然不完整，因此请从 windows->preference 添加 Android 正确的 sdk 位置。并选择 Android 或者您可以检查您的 android 插件。

# java - 将 JTextField 行添加到 JScrollPane

> ID：11286888
> 
> 赞同：2
> 
> 时间：2012-07-02T01:14:14.023
> 
> 标签：java, swing, jtable, jtextfield, layout-manager

为了实现以下目标，我需要一些关于选择哪些 Swing 组件的建议：

我有类似“表格”结构的东西，每次单击“添加”按钮时，都应该在“表格”上插入另一个“行”。每行由 2 组成`JTextField`。我在使用 GridLayout（下图中使用的布局）时遇到的问题是，如果我添加另一行，那么文本字段的高度将会缩短，我不希望这样（右图），我想要为每一行保留相同的高度。

我想要做的是让额外的行出现在最后一行的下方，这样我就可以使用`JScrollPane`and 滚动来查看它。

![在此处输入图像描述](../Images/c402520bd2f2b5def4a866c61ba8debc.png)

我应该使用其他布局而不是 GridLayout 吗？也许是 AbsoluteLayout 甚至使用 Table 组件？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T01:22:21.230

我会使用 JTable 并将行高设置为您想要的任何值。例如：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class TableEg {
   private static final int ROW_HEIGHT = 40;
   private static final String[] TABLE_COLUMNS = {"Foo", "Bar"};

   private static void createAndShowGui() {
      final DefaultTableModel tableModel = new DefaultTableModel(TABLE_COLUMNS, 2);
      JTable table = new JTable(tableModel );
      table.setRowHeight(ROW_HEIGHT);
      JScrollPane scrollpane = new JScrollPane(table);

      JButton addRowBtn = new JButton(new AbstractAction("Add Row") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            tableModel.addRow(new String[]{"", ""});
         }
      });
      JPanel btnPanel = new JPanel();
      btnPanel.add(addRowBtn);

      JFrame frame = new JFrame("TableEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(scrollpane, BorderLayout.CENTER);
      frame.getContentPane().add(btnPanel, BorderLayout.PAGE_END);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T21:08:08.557

假设您将 JTextField 添加到 Jpanel 中，并将 Jpanel 添加到 JScrollPane 中。现在您将为您的 JScrollPane 设置一个 preferredSize（因为您想要一个固定的可显示区域），但是您根据当时放置的 JTextField 的数量动态地修改 JPanel 的高度。

换句话说，如果您在 GridLayout 为 2 列的 Jpanel 集中有 2 个 JTextField；你的 JTextField 会占据整个 Jpanel 的高度；但如果你再添加 2 个，他们将不得不为这两个腾出空间，因此会缩短。

请注意，JPanel 中有 2 行设置为“100”高度，每行将使用“50”。如果您添加另一行但还将 JPanel 的高度修改为“150”，则每个 JTextField 仍将占用“50”像素。

我是新手，我可能不是 100% 正确；如果是这样的话“对不起”。我只是想要帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:46:35.223

试试这个....

```
JScrollPane scroll = new JScrollPane(Your_Table); 
```

这将使您的表格滚动....

# android - 是在旋转时调用 onCreate()

> ID：11286891
> 
> 赞同：2
> 
> 时间：2012-07-02T01:14:26.197
> 
> 标签：android

对于 2.1 之后的 Android 版本，是否会在轮换时调用 onCreate()？我在 onCreate() 中放置了一个日志打印，但对于 2.3.3 和 4.0.3 不打印。

这是代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Runtime runtime = Runtime.getRuntime();
    long free = runtime.freeMemory();
    long total = runtime.totalMemory();
    long occupied = total - free;

    Log.i("MEM", "heap: " + occupied);
} 
```

在 2.1 上，由于方向原因，日志消息会打印多次；在 2.3.3 上，它只打印一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T01:28:25.977

如果您声明了`android:configChanges="orientation"`标志，则活动将不会被销毁和重新创建（`onCreate()`不会被调用）并且回调

```
onConfigurationChanged() 
```

将被调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T02:14:46.517

如前所述，如果您想避免在轮换时重新创建活动，从而再次调用 onCreate()，则必须在清单中声明相应的 configChanges。

在这种情况下，您必须在 configChanges 中设置轮换标志。

```
android:configChanges="orientation" 
```

但是，从 Android 3.0 及更高版本开始，您还必须声明 screenSize 值。

从[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)：

> 注意：从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明 android:configChanges="orientation|screenSize"。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

因此，现在您的 configChanges 将如下所示：

```
android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T01:30:22.533

是的，它总是被调用（除了上面提到的 K_Anas）。它贯穿整个过程。请参阅此[链接](http://developer.android.com/reference/android/accounts/package-summary.html)，尤其是配置更改部分。

以及生命周期的图形。

![在此处输入图像描述](../Images/ce98650280512d09af9506063e26eb53.png)

# nhibernate - Fluent Nhibernate 复合键映射

> ID：11286892
> 
> 赞同：4
> 
> 时间：2012-07-02T01:14:36.880
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我试图弄清楚这个问题已经很长时间了。我有一个 hacky 方法让它工作。

我只想知道这在 Fluent NHibernate 映射中是否可行。

假设我有两个表，例如：

```
Table ComissionLevel
{
    Year,
    ComissionLevelID,

    ... other properties ....
}
primary key (Year,ComissionLevelID)

Table ClientCommission
{
    Year,
    ClientID,
    CommissionLevelID_1,
    CommissionLevelID_2,

    ... other properties ...
}
primary key (Year,ClientID)
foreign key CommissionLevel1 (Year,CommissionLevelID_1)
foreign key CommissionLevel2 (Year,CommissionLevelID_2) 
```

目前我的映射如下：

```
public ComissionLevelMap()
{
  Schema("XXXX");
  Table("ComissionLevel");
  LazyLoad();
  CompositeId()
    .KeyProperty(x => x.Year, set => {
        set.ColumnName("Year");
        set.Access.Property(); } )
    .KeyProperty(x => x.CommissionLevelID, set => {
        set.ColumnName("CommissionLevelID");
        set.Length(10);
        set.Access.Property(); } );

  HasMany<ClientCommission>(x => x.ClientCommissions)
    .Access.Property()
    .AsSet()
    .Cascade.AllDeleteOrphan()
    .LazyLoad()
    .Inverse()
    .Generic()
    .KeyColumns.Add("Year", mapping => mapping.Name("Year")
                                                         .SqlType("NUMBER")
                                                         .Nullable())
    .KeyColumns.Add("CommissionLevelID_1", mapping => mapping.Name("CommissionLevelID_1")
                                                         .SqlType("VARCHAR2")
                                                         .Nullable()
                                                         .Length(10));
  HasMany<ClientCommission>(x => x.ClientCommission2s)
    .Access.Property()
    .AsSet()
    .Cascade.AllDeleteOrphan()
    .LazyLoad()
    .Inverse()
    .Generic()
    .KeyColumns.Add("Year", mapping => mapping.Name("Year")
                                                         .SqlType("NUMBER")
                                                         .Nullable())
    .KeyColumns.Add("CommissionLevelID_2", mapping => mapping.Name("CommissionLevelID_2")
                                                         .SqlType("VARCHAR2")
                                                         .Nullable()
                                                         .Length(10));
}

public ClientCommissionMap()
{
  Schema("XXXXX");
  Table("ClientCommission");
  LazyLoad();
  CompositeId()
    .KeyProperty(x => x.ClientID, set => {
        set.ColumnName("ClientID");
        set.Length(10);
        set.Access.Property(); } )
    .KeyProperty(x => x.Year, set => {
        set.ColumnName("Year");
        set.Access.Property(); } );
  References(x => x.ComissionLevel1)
    .Class<ComissionLevel>()
    .Access.Property()
    .Cascade.None()
    .LazyLoad()
    .Insert()
    .Update()
    .Columns("Year", "CommissionLevelID_1");
  References(x => x.ComissionLevel2)
    .Class<ComissionLevel>()
    .Access.Property()
    .Cascade.None()
    .LazyLoad()
    .Insert()
    .Update()
    .Columns("Year", "CommissionLevelID_2");

} 
```

我现在的问题是，每当我创建一个 CommissionLevel 并将 ClientCommission 分配给它的集合时，如果我通过调用 session.save(CommissionLevel) 保存它们，它会抛出一个异常

```
<Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index>. 
```

我的问题是：

1.  NHibernate 会自动保存关系吗？像：

    ```
     ClientCommission commission = new ClientCommission{Year = 2012, ClientID =SomeGuid};
        CommissionLevel  newCommissionLevel = new CommissionLevel{Year = 2012, CommissionLevelID =NewCommissionLevelGuid};

        newCommissionLevel.ClientCommission1s.Add(commission);
        newCommissionLevel.ClientCommission2s.Add(commission);

        CommissionLevelRepo.Save(newCommissionLevel); 
    ```

    当我调用 CommissionLevelRepo.Save(newCommissionLevel) 时，NHibernate 是否也会更新 ClientCommission.ComissionLevel1 和 ClientCommission.ComissionLevel2

还是我必须说

```
ClientCommission.ComissionLevel1 = newCommissionLevel; 
ClientCommission.ComissionLevel2 = newCommissionLevel; 
```

1.  对于我得到的异常，这是因为 NHibernate 没有生成正确的列，它似乎会生成三个 Year 列。因为如果我手动创建两个名为 ComissionLevelID1 和 CommissionLevelID2 的属性，禁用 ClientCommission 上的 .Insert() 和 .Update() 它将正确保存它。

有人可以告诉我映射这两个类的正确方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T06:01:59.483

**简短回答：**您不能为多个参考共享列

**长答案：** NHibernate 将每个引用相互独立，但确实消除了插入语句中的重复列，因此引用尝试访问不再存在的列。这样做是因为如果对象模型中的 to 引用之间的共享列不同，它就无法确定哪一个是正确的。

如果您可以更改数据库架构并使 ID 唯一，则忽略 ID 和引用中的年份。

更新：

你可以简化一些映射

```
CompositeId()
    .KeyProperty(x => x.Year, set => {
        set.ColumnName("Year");
        set.Access.Property(); } )
    .KeyProperty(x => x.CommissionLevelID, set => {
        set.ColumnName("CommissionLevelID");
        set.Length(10);
        set.Access.Property(); } );

// to
CompositeId()
    .KeyProperty(x => x.Year)  // columnname is equal propertyname by default
    .KeyProperty(x => x.CommissionLevelID, set => set.Length(10).Access.Property());  // property is default access and can also be left out

.SqlType("VARCHAR2").Length(10)
// to
.Length(10) or .SqlType("VARCHAR2")
// because length is ignored when sqltype is specified 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T20:27:27.987

对于复合键，请查看[在 Fluent NHibernate 中映射复合键](https://stackoverflow.com/questions/445909/mapping-composite-keys-in-fluent-nhibernate)

为了简化映射，您可以将主键更改为只有一个键并创建一个唯一索引来表示它，但这不是最佳解决方案。

之前（复合键）：

```
CREATE TABLE XPTO ( COD_XPTO1 INT NOT NULL IDENTITY,
                    COD_XPTO2 INT NOT NULL,
                    TXT_XPTO VARCHAR(10) NOT NULL)
ALTER TABLE XPTO
  ADD CONSTRAINT PK_XPTO (COD_XPTO1, COD_XPTO2) 
```

之后（具有唯一索引的单键）：

```
CREATE TABLE XPTO ( COD_XPTO1 INT NOT NULL IDENTITY,
                    COD_XPTO2 INT NOT NULL,
                    TXT_XPTO VARCHAR(10) NOT NULL)

ALTER TABLE XPTO
  ADD CONSTRAINT PK_XPTO (COD_XPTO1)

CREATE UNIQUE INDEX UK_XPTO ON XPTO (COD_XPTO1, COD_XPTO2) 
```

# c# - Linq 查询计数和 GroupBy

> ID：11286896
> 
> 赞同：3
> 
> 时间：2012-07-02T01:15:36.323
> 
> 标签：c#, linq

谁能告诉我如何在 Linq 中执行此 SQL 查询？

```
SELECT [id], COUNT(*) FROM [data].[dbo].[MyTable] GROUP BY [id] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:19:03.590

您可以尝试这种方法：

```
 var res = ctx.MyTable  // Start with your table
    .GroupBy(r => r.id) / Group by the key of your choice
    .Select( g => new {Id = g.Key, Count = g.Count()}) // Create an anonymous type w/results
    .ToList(); // Convert the results to List 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T02:00:15.337

你可以试试这个

```
var res = from r in MyTable 
          group p by r.id into grouped
          select new {id = g.key, total = g.Count()}; 
```

然后，当你必须使用它时，只需`ToList()` 在`select new`. 我不必在`Visual Studio 2010`这里尝试，但我认为它会起作用

# html - CSS 特定表

> ID：11286897
> 
> 赞同：42
> 
> 时间：2012-07-02T01:15:48.053
> 
> 标签：html, css, css-tables

我有一个 HTML 文档，其中有两个不同的表格。一个是 Alpha 级，一个是 Beta 级。我只想将此 css 分配给 Beta 类...

```
td
{
border-style:solid;
border-top:thick double #ff0000;
} 
```

我不知道如何将其仅分配给 Beta。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-02T01:20:28.553

只需将`.beta`类选择器应用于整个表格并更改您的 CSS 代码以仅将规则应用于以下类型的`td`死者`.beta`：

```
<table class="beta">
    <tr>
        <td>...</td>
        <td>...</td>
    </tr>
</table> 
```

```
.beta td {
    border-style:solid;
    border-top:thick double #ff0000;
} 
```

如果您需要将规则应用于多个元素，`.beta`只需添加一个额外的选择器，如下所示：

```
.beta td, 
.beta th {
    border-style:solid;
    border-top:thick double #ff0000;
} 
```

卡普拉'！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-02T01:17:17.973

CSS 可让您具体了解要应用哪些元素规则。只需将此规则添加到 table.Beta td 单元格声明中即可。

```
table.Beta td 
{
    border-style:solid;
    border-top:thick double #ff0000;
} 
```

# c# - 我可以使用 Xcode 编写一个 excel 插件吗？

> ID：11286898
> 
> 赞同：2
> 
> 时间：2012-07-02T01:15:49.050
> 
> 标签：c#, c, xcode, excel

我已经使用 VBA 编写了几个非常有用的 excel 插件。我正在使用 Excel for Mac 2011 版本 14.2.2 (120421)。我想通过网站销售加载项。我可以在 Xcode 中编写插件还是必须使用 C#？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:25:48.643

来自[微软支持](http://social.msdn.microsoft.com/Forums/zh/sharepoint2010general/thread/4cf97374-47f4-4ba8-9446-1c91a205f8f9)：

> 在 Office 2011 for Mac 中，没有加载项的概念。所以使用 Excel 加载项是不可能的......

您需要使用 VBA 或 AppleScript 来模拟相同的行为。

# python - Python json 获取特定的故事和图像

> ID：11286899
> 
> 赞同：2
> 
> 时间：2012-07-02T01:16:07.457
> 
> 标签：python, python-2.7

我对 Python 很陌生，我有一个 json 新闻提要，我需要获得一个选定的“标题”和图像“src”。

我设法打印了所有的“标题”和“1024 风景”的图像“src”。例如，如何仅打印第二个标题？我该如何解决那个特定的问题？提要是： http: [//www.stuff.co.nz/_json/ipad-big-picture](http://www.stuff.co.nz/_json/ipad-big-picture)

```
for story in data.get('stories', []):

    print 'Title:', story['title']

    for img in story.get('images', []):

        for var in img.get('variants', []):
            if var.get('layout') == "1024 Landscape":
                print '    img:', (var.get('src')).split('/')[-1], ' layout:', var.get('layout') 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:21:48.923

首先获取您的故事对象（字典列表）：

```
stories = data.get('stories', []) 
```

获得此列表后，您可以按索引访问：

```
if len(stories) >= 2:
    print stories[1]['title'] 
```

或者先尝试捕获异常：

```
i = 1
try:
    print stories[i]['title']
except IndexError:
    print "Story does not exist at index %d" % i 
```

因此，当尝试获取特定故事的所有 1024 张风景图像时，它可能如下所示：

```
imgs = set()
for img in stories[1].get('images', []):
    for variant in img.get('variants', []):
        if variant.get('layout') == '1024 Landscape':
            imgs.add(variant['src'])
print imgs
set([u'http://static.stuff.co.nz/1341147692/827/7202827.jpg']) 
```

# c# - 日期类型的 LLBLGen 模板绑定测试

> ID：11286900
> 
> 赞同：1
> 
> 时间：2012-07-02T01:16:33.417
> 
> 标签：c#, llblgenpro, llblgen

在 LLBLGen 模板绑定查看器中，我想检查字段是否为日期类型，如果是，请执行操作

我有类似的，检查字符串类型：

```
<[Foreach EntityField]> 
<[If IsStringField]><[EntityFieldName]> = ""; <[EndIf]>
<[NextForeach]> 
```

我希望能够为日期类型做类似的事情，比如：

```
<[Foreach EntityField]> 
<[If IsDateField]><[EntityFieldName]> = DateTime.Today; <[EndIf]>
<[NextForeach]> 
```

但是，IsDateField 不能作为命令使用。

提前致谢。

# android - 自己如何读写Android 联系方式

> ID：11286904
> 
> 赞同：0
> 
> 时间：2012-07-02T01:17:09.863
> 
> 标签：android, contacts

我正在使用 Android 联系人，即 Android 4.0.3。在联系人应用程序中，我可以在其中创建、添加、编辑和查看自己的联系人。但是当我尝试使用 contentResolver 从我的应用程序中与自己联系时，它不起作用。我如何读写自己的联系人？提前致谢。

编辑：这是我获取联系人的代码

列表列表 = 新的 ArrayList();

```
 Uri uri = Contacts.CONTENT_URI;
    String[] projection = new String[] {
            Contacts._ID,
            Contacts.LOOKUP_KEY,
            Contacts.DISPLAY_NAME,
            Contacts.HAS_PHONE_NUMBER,
            Contacts.PHOTO_ID,
            Contacts.LAST_TIME_CONTACTED,
            Contacts.TIMES_CONTACTED
    };

    String sortOrder = Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";  
    if (sortColumn != null) {
        if (sortColumn.equals(Contacts.LAST_TIME_CONTACTED) || sortColumn.equals(Contacts.TIMES_CONTACTED))
            sortOrder = "" + sortColumn  + " COLLATE LOCALIZED DESC";
    }

    Cursor cursor = null;
    try {
        cursor = context.getContentResolver().query(uri, projection, null, null, sortOrder);

        while (cursor.moveToNext()){
            list.add(getRecord(context, cursor));
        }

        return list;
    } finally {
        if (cursor!=null) cursor.close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T04:32:12.547

在下面试试这个 Uri。

```
Uri uri = Uri.withAppendedPath(
ContactsContract.Profile.CONTENT_URI,
ContactsContract.Contacts.Data.CONTENT_DIRECTORY); 
```

这是“我自己”的道路。

# c++ - 如何使用 IStringStream 从文件中读取？

> ID：11286906
> 
> 赞同：0
> 
> 时间：2012-07-02T01:18:10.200
> 
> 标签：c++, stream, istringstream

我需要使用字符串流从文件中读取表达式并将表达式转换为另一种形式。但是我无法弄清楚如何使用 Istringstream 从文件中读取行。任何人都可以帮助我解决#includes 和语法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:27:03.350

```
#include <fstream>

std::ifstream file("filename.txt");

StuffType stuff;
while(file >> stuff)
{
    // If you are here you have successfully read stuff.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:23:10.177

作为上述 Dave 答案的补充：要从文件中读取一行，您可以使用以下代码：

```
char buf[256];
file.getline(buf,256); 
```

字符串 buf 然后包含文件中的文本行。

# javascript - Phonegap - 获取外部网站数据？

> ID：11286907
> 
> 赞同：3
> 
> 时间：2012-07-02T01:18:20.110
> 
> 标签：javascript, jquery, cordova, jsonp

我正在使用 Phonegap (Android) 和 Javascript/JQuery 创建一个应用程序。我有一个 Javascript 页面，我想从外部网页中读取文本。出于某种原因，我无法让它工作。

我的应用程序中的 Javascript 页面

```
$.mobile.allowCrossDomainPages = true;

$(document).ready(function () {

$.ajax({
        url: 'myexternalserver.com/test.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){

            alert("connected");

        },
        error: function(){

            alert("jsonp error");
        }
        });
}); 
```

我在外部服务器上的 PHP 页面

```
// $out is an array of text

echo $_GET['jsoncallback'] . '(' . json_encode($out) . ');'; 
```

我修改了我的 Cordova.xml 文件以包含

```
<access origin="http://myexternalserver.com" subdomains="true"/> 
```

我是否缺少任何其他步骤？我总是收到连接错误。

谢谢。

编辑：

我已将我的 javascript 页面修改为以下内容

```
$.getJSON("http://myexternalserver.com/test.php?var=test&callback=?", {
success:function(data){
            alert("Working");

            var ot = jQuery.parseJSON( data );

            alert(ot);

}, error: function() { 
    alert("Error"); 
}
}); 
```

我现在收到“工作”警报，但数据读取为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:36:14.827

确保您的服务器返回正确的标头。在我的服务器返回以下标头之前，我在 phonegap 应用程序中遇到了类似的问题：

访问控制允许来源：*

访问控制允许方法：*

访问控制最大年龄：1728000

访问控制允许标头：*

[您可以在https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)阅读有关它的更多信息

另请查看[http://api.jquery.com/jQuery.support](http://api.jquery.com/jQuery.support)属性*cors*

要在尚不支持 cors 但允许跨域 XHR 请求（windows gadget 等）的环境中启用跨域请求，请设置 $.support.cors = true;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T09:50:20.793

如前所述，确认您是否从服务器收到任何响应，无论是成功还是错误，我使用 Chrome 中的开发人员工具。

但是，如果您使用的是在创建应用程序时生成的默认 index.html 文件，请在“内容安全策略”(CSP) 的规则中检查并允许“myexternalserver.com”以及您当前的设置。

# c# - 使用 Swig 为 C++ 代码构建 C# 包装器时，是否可以将代码添加到现有方法？

> ID：11286913
> 
> 赞同：2
> 
> 时间：2012-07-02T01:19:12.637
> 
> 标签：c#, c++, swig

当使用 Swig 包装 C++ 代码时，[可以](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Java_class_extension)使用`%extend`. 可以使用. [_](http://www.swig.org/Doc2.0/CSharp.html#csharp_extending_proxy_class)`%typemap(cscode)`

如果包装类中已经存在方法，**有没有办法添加额外的代码行？**

例如，我的 C# 包装器方法如下所示：

```
 public void ItemChanged(CollectionObject collectionObject, string propertyName) {
    mynamespacePINVOKE.mynamespace_DataObjectCollection_ItemChanged(swigCPtr, CollectionObject.getCPtr(collectionObject), propertyName);
    if (mynamespacePINVOKE.SWIGPendingException.Pending) throw mynamespacePINVOKE.SWIGPendingException.Retrieve();
  } 
```

我想添加一行代码：

```
 public void ItemChanged(CollectionObject collectionObject, string propertyName) {
    mynamespacePINVOKE.mynamespace_DataObjectCollection_ItemChanged(swigCPtr, CollectionObject.getCPtr(collectionObject), propertyName);
    if (mynamespacePINVOKE.SWIGPendingException.Pending) throw mynamespacePINVOKE.SWIGPendingException.Retrieve();
    **insert my line of code here**
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:17:05.913

为了编写自己的版本，您需要确保它不会与默认版本冲突。我认为最简单的方法是`ItemChanged`使用私有/受保护`%csmethodmodifiers`并`%rename`隐藏生成的默认包装版本。一旦隐藏。

`ItemChanged`然后，您可以安全地使用 cscode 类型映射编写自己的版本，该类型映射首先调用私有版本，然后根据需要调用您的附加代码。

这是迄今为止解决问题的最干净的方法 - 能够将代码直接注入生成的代码的唯一方法是作为参数/返回值编组的一部分 - 设置传入的参数，然后清理或处理返回值。使用其中一种类型映射来注入一些代码会相当混乱。

# regex - 我如何需要在 vim 中转义搜索字符串？

> ID：11286925
> 
> 赞同：2
> 
> 时间：2012-07-02T01:20:53.793
> 
> 标签：regex, vim

我需要搜索和替换这个：

```
ExecIf($["${debug}" = "1"]?NoOp 
```

有了这个：

```
GoSub(chanlog,s,1(1,[${CHANNEL}] 
```

我似乎无法在 vim 中做到这一点，而且我不确定需要转义什么，因为我尝试过的任何方法都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:29:06.000

如果您想更改包含大量标点符号的长字符串，并且它是完全匹配的（您不希望它们中的任何一个被视为正则表达式语法），您可以使用该`nomagic`选项将搜索模式解释为文字细绳。

```
:set nomagic
:%s/ExecIf($["${debug}" = "1"]?NoOp/GoSub(chanlog,s,1(1,[${CHANNEL}]/
:set magic 
```

您仍然需要注意分隔符（`s///`命令的斜杠），但您可以使用任何字符，它不必是斜杠，所以当您有这样的东西并且搜索中有斜杠或替换字符串，只需选择其他内容，例如`s@foo@bar@`or `s:bar:baz:`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T01:29:53.113

如果您在 vim 替换 ( `:s//`) 中对哪些字符进行转义时遇到问题，请记住这个`nomagic`概念，尤其是`nomagic`替换的版本：`:snomagic//`或`:sno//`. `nomagic`意思是：从字面上解释每个字符。

所以这应该可以工作，而不必担心替换中的转义字符：

```
:sno/ExecIf($["${debug}" = "1"]?NoOp/GoSub(chanlog,s,1(1, [${CHANNEL}]/ 
```

了解魔术与游牧`:sno//`，和`\v`，`\V`：

```
:help magic 
```

*搜索*字符串的 nomagic 版本使用`\V`：

```
/\VExecIf($["${debug}" = "1"]?NoOp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T01:29:53.667

你必须逃避`[]`和 空格：

```
:s/ExecIf($\["${debug}"\ =\ "1"\]?NoOp/GoSub(chanlog,s,1(1,\[${CHANNEL}\]/ 
```

只是一点点试错

# php - 我需要每 10 秒用 PHP 提取一次数据

> ID：11286926
> 
> 赞同：1
> 
> 时间：2012-07-02T01:21:03.587
> 
> 标签：php, xml, refresh

我设置了一个非常小的（内部）专用 Web 服务器，我需要每 10 秒左右从 XML 文件中提取一些能源数据。这是我到目前为止的 PHP 代码：

```
 <?php 
    $mydata = simplexml_load_file('http://192.168.x.xx:yyy/data.xml');

    echo $mydata->device[0]->name;
    echo $mydata->device[0]->value;
 ?> 
```

我在我的网络服务器上测试了类似的代码并安装了 PHP，我认为这应该可以工作，但我希望每 10 秒左右运行一次。这样，我的网页上显示的数据始终是最新的。该网页将作为墙上的标志全天候 24/7 运行。刷新数据最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:23:59.560

[我只需刷新使用Ajax](http://www.w3schools.com/php/php_ajax_php.asp)显示数据的网页部分。使用[JavaScript 计时器](http://www.w3schools.com/js/js_timing.asp)触发刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T01:25:42.607

最简单的方法？将此行添加到您的页面。

```
<meta http-equiv="refresh" content="10"> 
```

不过，这可能不是最好的方法，尤其是当页面上有很多不需要每 10 秒重新加载的内容时。如果是这种情况，您应该查看[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

如果您的页面设置只返回您需要的数据（如您的示例），您可以使用 JavaScript 每 10 秒发出一次异步请求[`setInterval()`](https://developer.mozilla.org/en/window.setInterval)，以获取最新数据并显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T01:46:57.520

如果您通过浏览器运行它，那么我会选择 Eric 的答案。

但是，如果您从命令行运行此命令，则可以执行以下两种操作之一：

1.  让您当前的脚本说 pull_energy_data.php 每 10 秒从 cron 作业运行一次。不要忘记创建某种锁定机制。以防万一作业运行时间超过 10 秒，并且您将同时运行多个脚本。

2.  另一种方法是让脚本包装您的 pull_energy_data.php 在循环中运行并每 10 秒执行一次。这比以前的方法不太理想，因为您需要跟踪 pull_energy_data.php 上次运行的时间以及如何发出命令来停止包装脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T02:15:23.690

假设您在 Linux/Unix 中运行服务器，也许考虑为它编写一个 cronjob（自动作业）？

我能想到的一种解决方案是将 PHP 脚本作为 cronjob 每 10 秒运行一次，将输出写入文件或数据库表。

然后，您可以编写一个单独的 PHP 脚本，每当有人在浏览器中加载文件/数据库条目时，它就会读取它的内容。

# ruby-on-rails - 在rails中处理表格

> ID：11286927
> 
> 赞同：1
> 
> 时间：2012-07-02T01:21:09.143
> 
> 标签：ruby-on-rails

我对 RoR 中的表格有点困惑。

我的控制器中有一个带有相应方法的联系人页面。我想做的是有一个表格，以便人们可以留言。然后，我将通过电子邮件将该消息发送给自己。

我已经创建了表格和所有内容。但是，我有点困惑，一旦他们点击提交按钮，我将如何从表单中实际获取数据。它只能通过我的控制器中的联系人方法使用`params[:message]`吗？

另外，如果我在一页上有多个表单怎么办？我会在我的控制器的联系人方法中做`params[:message1]`,`params[:message2]`等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:42:52.613

看看[这个答案](https://stackoverflow.com/a/6886073/1264925)，详细了解 params 哈希是什么。当您引用 params[:message] 时，这意味着您正在使用“message[subject]=abc123” POST 到您的控制器操作，Rails 很有帮助地将其转换为带有如下键的哈希： params[:message ]['主题']。

如果您要发送电子邮件，请查看[mail_form](https://stackoverflow.com/a/6886073/1264925)，它可以简化创建一个非数据库支持的模型并将其转换为电子邮件。

最后，关于在一个页面上有多个表单：每个表单 POST 到它的操作，并包含所有表单元素，这些表单元素是 DOM 中该表单的子元素。因此，只有该消息的子级实际上会包含在 params[:message] 哈希中。您可以使用[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)在一个表单中拥有多个模型。

# ember.js - Ember 路由反序列化在负载上不起作用

> ID：11286933
> 
> 赞同：1
> 
> 时间：2012-07-02T01:22:28.983
> 
> 标签：ember.js

我正在尝试让 Ember.js 路由示例正常工作。我有一个使用帖子示例的小提琴运行得很好。路线使用帖子的 id 更新并显示正确的项目。唯一的问题是，如果您使用帖子网址冷加载页面，它就不起作用（在帖子视图中不显示任何内容）。

任何的想法？

这是小提琴：http: [//jsfiddle.net/bdennyw/GzYtc/5/](http://jsfiddle.net/bdennyw/GzYtc/5/)

和完整网址的小提琴 [http://jsfiddle.net/bdennyw/GzYtc/5/show/#/posts/1](http://jsfiddle.net/bdennyw/GzYtc/5/show/#/posts/1)

谢谢

编辑：包括下面的js代码：

```
$(function () {
    App.initialize(App.Router.create());
});

window.App = Ember.Application.create();

App.Post = Ember.Object.extend({
    title: null,
    body: null
});

App.posts = [];
App.posts.pushObject(App.Post.create({id:'0', title: "Test post 1", body: "How awesome is Ember.js"}));
App.posts.pushObject(App.Post.create({id:'1', title: "Test post 2", body: "I love working on awesome projects"}));
App.posts.pushObject(App.Post.create({id:'2', title: "Test post 3", body: "I like cats"}));

App.ApplicationController = Ember.ObjectController.extend();
App.ApplicationView = Ember.View.extend({
    templateName: "application_view"
});

App.PostsController = Ember.ArrayController.extend();
App.PostsView = Ember.View.extend({
    templateName: 'posts_view'
});

App.PostController = Ember.ObjectController.extend();
App.PostView = Ember.View.extend({
    templateName: 'post_view'
});

App.AboutController = Ember.ObjectController.extend();
App.AboutView = Ember.View.extend({
    templateName: 'about_view'
});

App.Router = Ember.Router.extend({

    root: Ember.Route.extend({
        goToPostsIndex: Ember.State.transitionTo('posts.index'),
        goToAbout: Ember.State.transitionTo('about'),
        goToShowPost: Ember.State.transitionTo('posts.show'),

        index: Ember.Route.extend({
            route: '/',
            redirectsTo: "posts.index"
        }),

        posts: Ember.Route.extend({

            route: '/posts',
            index: Ember.Route.extend({
                route: '/',
                connectOutlets: function (router) {
                    router.get('applicationController').connectOutlet('posts', App.posts);
                }
            }),
            show: Ember.Route.extend({
                route: '/:post_id',

                connectOutlets: function (router, post) {
                    router.get('postsController').connectOutlet('post', post);
                },
                deserialize: function(router, params) {

                    var id = params.post_id,
                        i = 0;
                    for (i = 0; i < App.posts.length; i += 1) {
                        if (App.posts[i].id === id) {
                            return App.posts[i];
                        }
                    }
                },
                serialize: function(router, context) {
                    var rtnVal = {},
                        id = context.get('id');
                    if (context) {
                        rtnVal = {post_id: id};
                    }

                    return rtnVal;
                },
            }),
        }),

        about: Ember.Route.extend({
            route: '/about',
            connectOutlets: function (router) {
                router.get('applicationController').connectOutlet('about');
            }
        })
    })
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:53:24.240

通过将`enableLogging: true`属性添加到路由器，您可以看到路由器采取的路由。因此，在加载页面时，这是跟踪：

*   STATEMANAGER：进入根目录
*   将事件“navigateAway”发送到状态根。
*   将事件“unroutePath”发送到状态根。
*   将事件“routePath”发送到状态根。
*   输入 root.posts
*   将事件“routePath”发送到状态 root.posts。
*   输入 root.posts.show
*   将事件“routePath”发送到状态 root.posts.show。

所以它不会通过 post.index 连接你的帖子的出口。所以负责显示帖子的视图没有显示，最后，负责显示帖子的视图也没有显示。

您可以将状态嵌套`show`为 posts.index 状态的子状态，它可以工作，但我不知道它在概念上是否正确。

# android - Android 计费 - 我在哪里可以查看已完成的交易？

> ID：11286934
> 
> 赞同：0
> 
> 时间：2012-07-02T01:22:42.557
> 
> 标签：android

我刚刚完成了一笔交易，但不确定开发商在哪里可以监控财务收益。

我可以在我的 Android 商店管理区域中导航到这样的位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:57:49.890

> Blockquote 我刚刚完成了一笔交易，但不确定开发商在哪里可以监控财务收益。

我可以在我的 Android 商店管理区域中导航到这样的位置吗？

是的，开发人员控制台。这是链接：

[http://developer.android.com/distribute/googleplay/publish/console.html](http://developer.android.com/distribute/googleplay/publish/console.html)

后来，--jim

# android - 获取用户配置输入是从服务启动和活动的好理由吗？

> ID：11286942
> 
> 赞同：0
> 
> 时间：2012-07-02T01:24:25.570
> 
> 标签：android, service, android-activity

我看到一些关于从服务调用 startActivity() 的现有问题，他们都建议不要这样做。但是，如果我的服务需要用户提供的配置信息才能被主要活动有效使用，该怎么办？如果主活动向服务发送消息说“嘿！用户说他现在要配置你！”，这是否是服务启动活动的适当理由？

或者是否有一些完全不同且风格更正确的方式来为通常完全在后台运行的服务提供用户配置？

# php - 用于后端、前端、成员等的 codeigniter 模块

> ID：11286946
> 
> 赞同：0
> 
> 时间：2012-07-02T01:25:27.753
> 
> 标签：php, codeigniter, modular

我将创建一个复杂的电子商务应用程序，并想知道是否将每个登录面板和区域设置为 CI 中的一个模块。

例如：

```
application
modules/
- backend/
-- config
-- controllers
-- models
-- views

- frontend/
-- config
-- controllers
-- models
-- views

- members/
-- config
-- controllers
-- models
-- views 
```

如果这种方法不是一个好主意，我该怎么做才能组织每个登录面板的所有控制器、模型和视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:39:23.780

您应该坚持 MVC 模式，这意味着在控制器文件夹中拥有控制器，与模型和视图相同。

您仍然可以使用子文件夹来组织文件。

使用您的方法，您必须修改 CI 并使 CI 适应新结构，这意味着如果您想升级会遇到未来的问题，甚至意味着难以解决未来的错误，因为您的 CI 已被修改。

如果您认为值得，那就去做吧，可以说是因为您的项目很大，并且您需要以这种方式组织它，然后去做；在这里没有什么是做不到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:40:32.473

你必须在这里使用 HMVC（父子 MCV 层的层次结构），要在 CodeIgniter 中设置 HMVC，你需要访问链接

1.  [http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/](http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/)
2.  [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

# javascript - 使用不带参数的 Javascript slice() 方法

> ID：11286950
> 
> 赞同：65
> 
> 时间：2012-07-02T01:25:46.217
> 
> 标签：javascript, jquery

我目前正在通读这个[jquery masking plugin](https://github.com/RobinHerbots/jquery.inputmask)以尝试了解它是如何工作的，并且在许多地方，作者调用了`slice()`没有参数传递给它的函数。例如，这里的`_buffer`变量是`slice()`d，`_buffer.slice()`并且`_buffer`似乎保持相同的值。

这样做有什么理由，还是作者只是让代码比它应该的更复杂？

```
 //functionality fn
 function unmaskedvalue($input, skipDatepickerCheck) {
     var input = $input[0];
     if (tests && (skipDatepickerCheck === true || !$input.hasClass('hasDatepicker'))) {
         var buffer = _buffer.slice();
         checkVal(input, buffer);
         return $.map(buffer, function(element, index) {
             return isMask(index) && element != getBufferElement(_buffer.slice(), index) ? element : null; }).join('');
    }
    else {
        return input._valueGet();
    }
} 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-07-02T01:31:48.040

该`.slice()`方法制作数组的（浅）副本，并采用参数来指示要复制源数组的哪个子集。不带参数调用它只会复制整个数组。那是：

```
_buffer.slice();
// is equivalent to
_buffer.slice(0);
// also equivalent to
_buffer.slice(0, _buffer.length); 
```

编辑：开始索引不是强制性的吗？是的。和不。有点。JavaScript 引用（如[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)）通常说`.slice()`至少需要一个参数，即*起始*索引。不带参数的调用`.slice()`就像在说`.slice(undefined)`. 在[ECMAScript Language Spec](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.10)中，算法的第 5 步`.slice()`说“Let `relativeStart`be `ToInteger(start)`”。如果您查看抽象操作的算法，[`ToInteger()`](http://www.ecma-international.org/ecma-262/5.1/#sec-9.4)然后使用它[`ToNumber()`](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3)，您会发现它最终转换`undefined`为`0`.

尽管如此，在我自己的代码中，我总是会说`.slice(0)`，不是`.slice()`- 对我来说它看起来更整洁。

# web-applications - 新手的网络概念

> ID：11286954
> 
> 赞同：0
> 
> 时间：2012-07-02T01:26:01.743
> 
> 标签：web-applications, web

是否可以仅使用客户端/前端技术创建一个完整的 Web 应用程序？例如：在客户端使用 Javascript，我可以在不编写任何服务器代码或使用 node.js 之类的东西的情况下访问数据库、显示 html 和数据、执行 Web 应用程序的所有逻辑等吗？只需使用一个简单的网络服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:33:38.363

您可以仅使用 HTML 和 Javascript 创建简单的网站，但无法连接到数据库。

因此，这实际上取决于您要创建的网站及其功能。

如果您在这里进行少量搜索，您会找到答案:)

这是回答的类似问题[Can JavaScript connect with MySQL?](https://stackoverflow.com/questions/3020751/can-javascript-connect-with-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T01:34:23.283

是的，为 Firefox 和 Chrome 等浏览器编写扩展程序。考虑到扩展程序与离线应用程序不同。后者是一种不同的方法，并且受到更多限制。例如，附加组件可以连接到每个站点，但为特定位置加载的 javascript 脚本有其他安全限制。

另一种方法是使用嵌入式 Web 浏览器分发应用程序可执行文件，但我认为这不是您正在寻找的答案的一部分。

# php - 无法更改 XDEBUG 配置 [xdebug.remote_enable]

> ID：11286957
> 
> 赞同：2
> 
> 时间：2012-07-02T01:26:51.000
> 
> 标签：php, netbeans, xdebug

我有一个 OS-X 设置并使用 Netbeans IDE 进行 PHP 编程。我在以下路径中安装了 xdebug

> zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"

在其中我将 xdebug.remote_enable 设置为 On ..例如 xdebug.remote_enable = on

这是所需的[Netbeans Xdebug 配置](http://wiki.netbeans.org/HowToConfigureXDebug#How_to_on_MAC_OS_X_Snow_Leopard)建议。

在查看我的 phpinfo 时：

我明白了

> xdebug.remote_enable = 关闭

不确定它从哪里获取此信息，并且任何其他 xdebug 参数配置也不会自行改变。

这让我对出了什么问题感到困惑。

正在运行的 php 版本是 5.3.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:19:20.853

我有同样的问题，后来发现我正在编辑错误的 php.ini 文件。您应该编辑位于 /Applications/MAMP/bin/php/php5.3.6/conf/php.ini 下的文件并写入 xdebug.remote_enable = 1

# c++ - 用于自动执行 C++ 程序的多次运行的脚本

> ID：11286960
> 
> 赞同：0
> 
> 时间：2012-07-02T01:27:59.720
> 
> 标签：c++, automation, execution

考虑一个基本程序 - SumOf2Numbers.cpp。我可以通过命令行给出 2 个数字作为输入，它给出了数字的总和。

我想用各种输入来运行这个程序，比如，

```
./a.out 5 6
./a.out 123456 654321
./a.out -200 200 
```

输出将是，

```
5 + 6 = 11
-200 + 200 = 0 
123456+654321 = 777777 
```

我想自动化执行 c++ 代码并将输出存储在文件中的过程。我是编写脚本的新手。我想知道我该怎么做？我相信我可以通过编写 perl 或 bash 脚本来做到这一点。有人可以指导我找到一个很好的教程。

PS：我相信会有很多在线教程。但我不确定我应该如何执行搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:31:25.770

这可以通过 shell 脚本轻松完成：

```
#!/bin/sh
(
  ./a.out 5 6
  ./a.out 123456 654321
  ./a.out -200 200
) > output.txt 
```

# opengl - glMultiDrawElements：传递给“indices”参数的值（GLvoid**）

> ID：11286964
> 
> 赞同：0
> 
> 时间：2012-07-02T01:28:58.793
> 
> 标签：opengl, vbo, vertex, vertex-buffer

我必须将一些代码（处理为 2D 形状的轮廓构建数据的 VBO，即它们不仅仅是三角形网格，它们可以是任意长度的多边形轮廓）从使用原始重启转换为使用`glMultiDrawElements`. 我现在意识到`glMultiDrawArrays`实际上更适合我的应用程序，但这与问题无关（如果我更聪明并移植它来代替使用，我确实不会遇到这个奇怪的问题`glMultiDrawArrays`）。

我组装了两个向量来存储用于存储必要值的数据：

```
struct E_MDEGBuffer {
    std::vector<GLvoid*> indices;
    std::vector<GLsizei> lengths;
}; 
```

然后我所做的是为每个具有 N 个顶点的多边形将单个值推送到两个`indices`和`lengths`，在`indices`我插入的`(char*)NULL+index`位置`index`是 IBO 中与多边形的第一个顶点相对应的索引，并在其中`lengths`放置整数个顶点多边形。

该`E_MDEGBuffer`结构用于传递值，`glMultiDrawElements`如下所示：

```
glMultiDrawElements(GL_TRIANGLE_FAN, mde.lengths.data(), GL_UNSIGNED_INT, (const GLvoid**)mde.indices.data(), mde.indices.size()); 
```

我测试了我的程序，渲染完全搞砸了。

最终，我稍微摆弄了一些硬编码的值`glMultiDrawElements`，我发现我的索引值偏离了 4 倍。

例如，第一个多边形有 3 个顶点，第二个多边形有 5 个顶点。

为了得到正确的结果，我的`indices`向量 contains`[0,0xc]`和`lengths`contains `[3,5]`。

为什么`indices`不应该`[0,0x3]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:28:59.993

提供给 OpenGL 缓冲区函数（例如`glVertexAttribPointer`）的偏移量始终是数据大小偏移量，而不是索引。

传入的数字必须是`GLvoid*`（或在这种情况下`GLvoid**`）类型，但其值是字节偏移量。它有助于考虑如何可能有理由为此参数使用该指针类型，并且它是一个字节偏移值（一种短的方式）朝着那个方向发展。

我不知道一开始是什么让我认为这只是索引偏移，但这是错误的，我付出了代价。

# java - 关于 HashMap.get(key) 函数

> ID：11286967
> 
> 赞同：2
> 
> 时间：2012-07-02T01:29:41.787
> 
> 标签：java, hashmap

如果我从我的 HashMap 中拉出一个对象，然后对其进行修改。它也会在 HashMap 内部进行修改吗？或者，修改后是否需要重新设置回HashMap？

例如：

```
HashMap<Integer,TwoPoints> loc = new HashMap<Integer,TwoPoints>();
...
...
TwoPoints tp = loc.get(Id); //pulls out the object
tp.setPoint(group, new Point(x,y); //a method to set something inside the object I pulled. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:31:33.470

您将获得对实际对象的引用，因此任何更改都会反映在其中。您不是在创建副本。

**更新：**

由于我使用了“参考”一词，我认为指出定义很重要。在 Java 的引擎盖下，事情并没有这么简单。但是引用（您正在做的事情）正在获取指向对象的**指针的****值。**

# node.js - How to search in an array in Node.js in a non-blocking way?

> ID：11286979
> 
> 赞同：15
> 
> 时间：2012-07-02T01:31:09.483
> 
> 标签：node.js

I have an array which is:

```
[ 4ff023908ed2842c1265d9e4, 4ff0d75c8ed2842c1266099b ] 
```

And I have to find if the following, is inside that array

```
4ff0d75c8ed2842c1266099b 
```

Here is what I wrote:

```
Array.prototype.contains = function(k) {
  for(p in this)
     if(this[p] === k)
        return true;
  return false;
} 
```

Apparently, it doesn't work properly, or better sometimes it works, but it looks to me blocking. Is there anyone that can check that one?

many thanks

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-02T04:59:09.267

Non-blocking search function

```
Array.prototype.contains = function(k, callback) {
    var self = this;
    return (function check(i) {
        if (i >= self.length) {
            return callback(false);
        }

        if (self[i] === k) {
            return callback(true);
        }

        return process.nextTick(check.bind(null, i+1));
    }(0));
} 
```

Usage:

```
[1, 2, 3, 4, 5].contains(3, function(found) {
    if (found) {
        console.log("Found");
    } else {
        console.log("Not found");
    }
}); 
```

However, for searching the value in the array it is better to use Javascript built-in array search function, as it will be much faster (so that you probably won't need it to be non-blocking):

```
if ([1, 2, 3, 4, 5].indexOf(3) >= 0) {
    console.log("Found");
} else {
    console.log("Not found");
} 
```

Also, consider the `underscore` library which makes all the stuff cross-platform: [http://underscorejs.org/](http://underscorejs.org/)

# vb.net - 如何在字符串中仅添加 1"

> ID：11286983
> 
> 赞同：1
> 
> 时间：2012-07-02T01:32:26.993
> 
> 标签：vb.net, quotes

这可能是一个超级简单的问题，但事实并非如此。我想知道如何在字符串中只放一个 " 示例

```
 Dim eg as String
 eg = ""W" 
```

它似乎不起作用。是否有任何特殊字符，因为我需要为我的 VB 添加代码隐藏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:35:56.003

如果是 Visual Basic，你还需要一个`"`：

```
Dim eg as String 
eg = """W" 
```

如果是 C#，请使用 \ 转义字符：`"\"W"`

[http://msdn.microsoft.com/en-us/library/267k4fw5.aspx](http://msdn.microsoft.com/en-us/library/267k4fw5.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T01:36:43.117

只需加倍：

```
Dim eg as String
eg = """W" 
```

# php - 使用 .htaccess 从外部保护文件，同时仍允许内部访问

> ID：11286984
> 
> 赞同：0
> 
> 时间：2012-07-02T01:32:27.753
> 
> 标签：php, image, security, .htaccess, web

我创建了一个用 PHP 处理的登录页面，然后允许您输入 itemID 并拉出图像。

目录结构如下： Webroot > (cgi-bin - css - error - images - secure - index.html)

（括号中的在同一目录中）。cgi-bin 有包含文件，css 有用于网站的 css 文件。在出现 401、402、404、500 错误等的情况下，error 具有要使用 .htaccess 重定向的文件。安全文件夹具有在提供内容之前验证用户已登录的文件。而索引是登录页面。

我很难找到有关如何保护我的敏感信息免受外部影响（盗链、直接 URL 等）的信息，同时仍然允许我的程序使用它。

该程序已编写，并且运行良好，但我可以输入图像或 cgi 脚本的直接 URL 并查看其内容。我尝试使用 .htaccess “全部拒绝”，但这也拒绝了我的内部程序的访问。

如何阻止对文件的外部访问，但仍允许我的 php 脚本/表单检索数据。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:39:19.943

2个想法：

您的程序可以传递用户名和密码，如下所示：

[http://username:password@example.com/some_resource](http://username:password@example.com/some_resource)

或者，如果您知道要允许的计算机的 IP 地址，则可以拒绝所有计算机并允许来自特定 IP 的计算机。

# android - 将一个简单的免费 iOS 应用移植到 Android

> ID：11286985
> 
> 赞同：1
> 
> 时间：2012-07-02T01:32:27.997
> 
> 标签：android, ios, porting

我很好奇将简单的 iOS 应用程序移植到 Android 的有效策略。在这种情况下，“简单”是指具有一个全屏的应用程序，其中`UITableViewController`填充了从服务器下载的 XML 文件。对于 iOS 和 Android 应用程序，XML 文件将是相同的。

我对 Android 开发的经验为零。所以我考虑了各种方法：

*   投入时间和资源学习 Android 开发
*   聘请自由职业者移植应用程序
*   只需自己制作一个蹩脚的 Android 端口，无需投入大量时间和资源

这些方法有优点和缺点：

*   学习 Android 开发是一项不错的投资，并且很可能在未来得到回报。
*   处理设备碎片并不是我想投入太多的事情，因为我不想成为一名 Android 专家。
*   一个体面的自由职业者可以控制碎片化问题。然而，这条路线可能会使应用程序更难维护。我不会知道代码库。如果同一位自由职业者无法进行更新，那么我可能不得不花钱请另一个人来了解代码库的最新情况。
*   为我购买的单个手机快速创建适用于该设备的应用程序版本。但是我不确定是否有任何一种设备覆盖了大部分市场。
*   该应用程序是免费的，因此在大多数设备上完美运行对我来说并不是一个大问题。如果有足够多的用户抱怨，我可以解决特定设备上的问题。

**在这种情况下，有哪些策略可以有效地将简单的 iOS 应用程序移植到 Android？**

# sql - 监控调用了哪些包

> ID：11286990
> 
> 赞同：2
> 
> 时间：2012-07-02T01:34:17.167
> 
> 标签：sql, oracle, plsql

我正在尝试找出 oracle 表单正在调用哪些包/函数。我拥有对数据库的 sysdba 访问权限。有没有简单的方法来确定这一点？我知道一个非常粗略的方法（使用文件写入包将文本文件写入文件系统），但我确信必须有一些更容易监控 SQL 的方法以及调用什么？

我正在使用 SQL 开发人员。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:24:09.337

这是我自己的会话监视器查询，看一下：

```
SELECT SUBSTR(program, 1, 15), SUBSTR(event, 1, 21), DBMS_LOB.SUBSTR(WRH.sql_text, 100),
       (   TO_CHAR(FLOOR((SYSDATE - logon_time) * 24), 'FM000')
        || ':'
        || TO_CHAR(FLOOR(MOD((SYSDATE - logon_time) * 1440, 60)), 'FM00')
        || ':'
        || TO_CHAR(MOD((SYSDATE - logon_time) * 86400, 60), 'FM00'))
        "Elapsed Time", --WRS.cpu_cost,WRS.operation,WRS.options,WRS.position,WRS.search_columns,WRS.cost,WRS.bytes,WRS.TIME,
       schemaname, terminal, plsql_entry_object_id, osuser,
       process, username, MODULE, ROW_WAIT_OBJ#, "ROW_WAIT_FILE#", "ROW_WAIT_BLOCK#", sid,
       USER#, command, SCHEMA#, logon_time, blocking_session_status, "SEQ#", wait_class,
       state, service_name
  FROM V$SESSION SS, SYS.WRH$_SQLTEXT WRH                         --,SYS.WRH$_SQL_PLAN WRS
 WHERE WRH.sql_id = SS.sql_id
   --AND program LIKE 'f90runm@node%'
   --AND username NOT IN ('SYS', 'SYSMAN')
ORDER BY program 
```

使用 DBMS_LOB.SUBSTR(WRH.sql_text, 100) 在当前活动中取得更好的结果。我认为你最好使用 Sql navigator 或 Toad，因为它们有很好的会话浏览器。

# javascript - 播放器启动后 Youtube API 调用播放器函数

> ID：11286991
> 
> 赞同：0
> 
> 时间：2012-07-02T01:34:18.990
> 
> 标签：javascript, youtube, youtube-api

这是我第一次使用 youtube api，我发现很难理解文档。基本上我的页面上有多个视频，当您单击一个时，它会在灯箱中弹出并播放正确的视频。所有这一切都很好。

客户现在希望所有视频在开始时自动静音，一旦您完成视频，他们希望帧跳到正确的位置。

如果我使用 youtube iframe api，我似乎根本无法更新 videoId。下面是我的代码：

```
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
        height: '323',
        width: '576',
        videoId: 'Fy7Li0dMRSY',
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    });
}

function onPlayerReady(event) {
    event.target.mute(); // this does not do anything
    event.target.playVideo();
}

var done = false;
function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
        //setTimeout(stopVideo, 6000);
        done = true;
    }
}
function stopVideo() {
    player.stopVideo();
}

function loadVid(vidID, title){
    // loads youtube video with video title & youtube video ID
    $('.lightbox .title').html(title);
    $('.lightbox iframe').prop('src','https://www.youtube.com/embed/'+vidID+'?rel=0&wmode=transparent&enablejsapi=1');  
    //player.mute() does not work here  
    showLightbox(); 
} 
```

我的问题是试图调用 player 函数在 loadVid 函数内静音，它会抛出一个错误（任何函数都会抛出相同的错误），我不知道如何使用 player.js 等函数。

错误是 player.stopVideo 不是函数

那么如何在开始时将视频静音？将其添加到 onPlayerReady 也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:30:08.570

移动 event.target.mute(); 像这样的 onPlayerStateChange 函数：

```
var done = false;
function onPlayerStateChange(event) {
    event.target.mute();
    if (event.data == YT.PlayerState.PLAYING && !done) {
        //setTimeout(stopVideo, 6000);
        done = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T23:00:20.540

当页面上有多个视频时，您仍然需要为每个视频调用 onYouTubePlayerAPIReady。您可以同时在其中打包所有播放器处理程序，但根据您的操作方式，这是不可能的。相反，您必须想办法欺骗 API。看看我的答案在这里[用 youtube api 加载多个视频播放器](https://stackoverflow.com/questions/17012886/loading-multiple-video-players-with-youtube-api/42868251#42868251)

# ruby-on-rails - 如何在我的 Stripe 集成中修复此错误？

> ID：11286993
> 
> 赞同：0
> 
> 时间：2012-07-02T01:34:39.137
> 
> 标签：ruby-on-rails, stripe-payments

在我的 Rails 应用程序中启动和运行 Stripe 时遇到了一些问题。当我尝试在本地环境中访问我的注册表单时，出现此错误：

未定义的方法“card_number”

我的视图对应的代码如下：

```
<%= f.label :card_number, "Credit Card Number" %>
<%= f.text_field :card_number %> 
```

因为我收到卡号错误，我也知道当我修复卡号错误时，我会收到 CVV 代码和卡到期日期错误。我意识到我不应该将任何信用卡信息保存到我的数据库中，所以我的模型中没有任何关于信用卡信息的信息。我运行的唯一数据库迁移是在我的用户表中为条带客户 ID 令牌设置一列。

非常感谢您在让 Stripe 启动和工作方面为我提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:51:25.723

调用`f.text_field :card_number`需要 f.object 上的属性（真实或虚拟）......所以，改为：

```
=label_tag :credit_card
=text_field_tag :credit_card 
```

这些不会与您的模型相关联，但会存在于表单中......然后您可以通过 javascript 获取它们（这才是重点，真的）。

您将把它与：

```
=f.hidden_field :card_token 
```

并实际存储 card_token 以供以后使用。

# css - css3 的 :not() 是否仅适用于直接子级？

> ID：11286994
> 
> 赞同：3
> 
> 时间：2012-07-02T01:35:01.813
> 
> 标签：css, css-selectors

我正在尝试使用 css3 的`:not()`选择器来选择某些元素，这些元素没有父元素，并且在任何地方都具有某个类作为其祖先。

标记很简单：

```
<div><strong><em>Please select me!</em></strong></div>

<div><strong><p><em>Please don't select me!</em></p></strong></div>

<div><p><em>Please don't select me!</em></p></div> 
```

这是我正在使用的选择器：`div *:not(p) em`.

还有一个小提琴：http: [//jsfiddle.net/cwxzH/](http://jsfiddle.net/cwxzH/)

`div`如果我要过滤掉`div`that are的所有孩子，为什么要选择第二个`paragraphs`？有没有办法防止这种情况发生？

到目前为止，我只在 IE9 和 FF13 中测试过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:43:20.320

`div *`选择 div 的所有后代 ie`strong` `p` `em`然后`:not(p)`删除 the`p`所以你留下`strong`and `em`，现在`em`只有`strong`有一个`em`后代（the `em`）导致`em`第二个被选中`div`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:52:28.553

也许这就是你要找的东西？它选择`em`不是段落的直接子元素的所有元素：

```
div :not(p)>em 
```

[http://jsfiddle.net/cwxzH/1/](http://jsfiddle.net/cwxzH/1/)

# java - 使用 Play Framework 下载的文件的文件名错误

> ID：11286995
> 
> 赞同：2
> 
> 时间：2012-07-02T01:35:10.453
> 
> 标签：java, playframework, download, filenames, playframework-2.0

我正在使用 Play Framework 2.0.2 创建一个修改用户上传的 Excel 文件的应用程序。上传和修改 Excel 文件（服务器端）后，用户的浏览器会自动下载该文件。

但是，使用此代码：

```
public static Result upload() throws IOException {
    Http.MultipartFormData body = request().body().asMultipartFormData();
    Http.MultipartFormData.FilePart filePart = body.getFile("uploadedFile");

    modifyExcelFile(filepart.getFile()); // this method modifies the uploaded Excel file, and copies it to a file named "copy.xlsx"

    return ok(new File("copy.xlsx"));
} 
```

客户端下载的文件将以当前控制器命名。例如，如果我的控制器名为`UploadController`，下载的文件令人惊讶地命名为`uploadcontroller.xlsx`。

关于如何修改代码以便更严格地控​​制下载文件的名称的任何想法？我希望下载的文件被命名`copy.xlsx`，而不是`uploadcontroller.xlsx`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T05:10:08.737

只需在响应标头中添加：

```
response().setHeader("Content-Disposition", "attachment; filename=FILENAME"); 
```

其中 FILENAME 是您希望文件具有的名称。