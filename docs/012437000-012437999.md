# StackOverflow 问答 12437000-12437999

# java - 如何使分配的 Java 应用程序内存可编辑？

> ID：12437008
> 
> 赞同：0
> 
> 时间：2012-09-15T11:35:37.657
> 
> 标签：java, memory, allocation

我见过一个 Java 应用程序，它允许其用户手动编辑分配的应用程序内存。这是它的截图：

![在此处输入图像描述](../Images/74e56bdb939a341231092a6136ffbfe3.png)

有人知道我如何对我的应用程序做类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T11:38:45.743

不是 Minecraft 为自己分配内存。MagicLauncher 是一个单独的程序，它`java`使用正确的参数调用以启动 minecraft.jar。

要为 Java 分配内存，您可以使用例如`java -jar -Xmx512 program.jar`给 program.jar 512 兆字节的内存。

# r - 在 R 中重塑数据。是否可以有两个“值变量”

> ID：12437012
> 
> 赞同：6
> 
> 时间：2012-09-15T11:36:18.233
> 
> 标签：r, plyr, reshape

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T11:59:45.590

既然你已经走到了这一步，为什么不`melt`你的`tx`对象和使用`dcast`如下：

```
dcast(melt(tx, id.vars=c(1, 2)), ExamenYear ~ StudentGender + variable)
#   ExamenYear F_participated F_passed M_participated M_passed
# 1       2007              1        1              1        1
# 2       2008              1        1              2        2
# 3       2009             NA       NA              3        2 
```

但是，更直接的方法可能是`melt`从一开始就处理您的数据：

```
df.m <- melt(df, id.vars=c(1:4))
dcast(df.m, ExamenYear ~ StudentGender + variable, 
      function(x) sum(x == "yes"))
#   ExamenYear F_participated F_passed M_participated M_passed
# 1       2007              1        1              1        1
# 2       2008              1        1              2        2
# 3       2009              0        0              3        2 
```

### 更新：基础 R 方法

虽然所需的代码并不“漂亮”，但在基础 R 中执行此操作也不是太难。这是一种方法：

1.  用于从您的示例`aggregate()`中获取。`tx`

    ```
    dfa <- aggregate(cbind(participated, passed) ~ 
      ExamenYear + StudentGender, df, function(x) sum(x == "yes"))
    dfa
    #   ExamenYear StudentGender participated passed
    # 1       2007             F            1      1
    # 2       2008             F            1      1
    # 3       2007             M            1      1
    # 4       2008             M            2      2
    # 5       2009             M            3      2 
    ```

2.  用于从“长”`reshape`转换`dfa`为“宽”。

    ```
    reshape(dfa, direction = "wide", 
            idvar="ExamenYear", timevar="StudentGender")
    #   ExamenYear participated.F passed.F participated.M passed.M
    # 1       2007              1        1              1        1
    # 2       2008              1        1              2        2
    # 5       2009             NA       NA              3        2 
    ```

# mongodb - Mongodb中基于组的交叉集合查询（包括Having子句）

> ID：12437017
> 
> 赞同：0
> 
> 时间：2012-09-15T11:37:29.220
> 
> 标签：mongodb, mongodb-.net-driver

我有以下需要转换为 Mongodb 的 SQL 查询，但我找不到一个好的方法（这不需要从两个集合中加载文档并以编程方式执行查询）

> 选择 user_id, count(1) as cnt From user_data where data_type = 3 and user_id not in (select user_id from blocked_users) group by user_id with cnt > 1

如果有人能帮我一把，那就太好了。

我正在使用 MongoDB 2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:53:45.057

mongo 中没有连接，所以你要做的就是从面向文档的角度设计一个模式；也就是说，当从关系模式迁移时，不要逐字逐句地进行迁移。

在这种特殊情况下，我认为最好的办法是在 users 集合中设置一个 block: 字段。

# java - 使用后退按钮时将活动重置为原始状态

> ID：12437018
> 
> 赞同：0
> 
> 时间：2012-09-15T11:37:37.737
> 
> 标签：java, android

当用户从活动 A 转到 B，然后使用后退按钮返回 A 时，如何重置活动以使其处于原始状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:47:30.180

`Activity A`当你打电话`Activity B`和`onBackPressed()`活动 B 再次调用它时，只需完成你的。所以它会开始新的`Activity A`。

在活动 B 中编写以下代码。

```
@Override
public void onBackPressed() 
{
     // Calling Activity A
     // Finish Activity B
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:55:30.447

在您`android:noHistory="true"`的清单文件中。“真”值意味着活动不会留下历史痕迹。它不会保留在任务的活动堆栈中，因此用户将无法返回它。[在这里](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)找到它。

在你按下 B 的后退按钮后不久，你就可以拥有

```
Intent intent = new Intent(this, A.class);
startActivity(intent);
finish(); 
```

# ios - 钥匙串中的密码 - 人们忘记了密码

> ID：12437027
> 
> 赞同：1
> 
> 时间：2012-09-15T11:38:53.277
> 
> 标签：ios, security, passwords, keychain

我有一个 iOS 应用程序，它可以存储机密信息，还使用 ​​iCloud 在设备之间同步其核心数据（数据本身在核心数据中加密）。

人们可以用密码保护应用程序，还可以创建两个秘密问题来帮助他们找回丢失的密码。

密码和秘密问题保存在钥匙串中。

我经常收到支持请求，说“嘿，我忘记了密码，我也忘记了我的秘密问题的答案，所以现在我无法访问我的宝贵数据。请帮助”。

有些人还说他们试图删除应用程序并重新安装它（知道数据将从 iCloud 重新同步），假设这会重置他们的密码，这当然不会发生。

目前我没有办法帮助这些人。

现在问题来了。

一方面，我很容易在第一次启动时从钥匙串中清除密码和秘密问题，这样人们可以在删除并重新安装应用程序时创建一个新的。

但是，这似乎会造成安全漏洞。未经授权持有设备的人可以删除应用程序，重新安装它，创建新密码，让应用程序与 iCloud 同步并访问机密数据。

我相信，与试图窃取他人数据的人相比，忘记密码的无辜者要多得多，但我仍然不愿意走“简单的路”。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:50:00.940

简短回答：对于可能受影响的少数人，这里有一个想法：尝试首先备份到 iTunes，未选中“加密本地备份”（这会忽略钥匙串）。然后从该 iTunes 备份中擦除并恢复设备。这*应该*将应用程序及其数据放回设备上，但没有钥匙串。请注意，我还没有尝试过，因此请在联系用户之前使用此解决方案进行测试。有关一些相关说明，请参阅： http: [//support.apple.com/kb/TS4108](http://support.apple.com/kb/TS4108)。

更长的想法：我认为在首次运行时删除用户钥匙串数据违背了用户的期望。Apple 在应用程序卸载后维护钥匙串，以便用户不会丢失数据。Apple 为用户提供的保护（密码锁定、数据擦除）以及开发人员可以实现的安全功能（钥匙串、文件加密）确实涵盖了安全漏洞问题，因此不应成为如何处理的重要考虑因素。你处理这个。

不幸的是，尽管如此，您仍然会被当前用户困住。Apple 确实需要像在 OS X 上一样提供设备级用户帐户，以便将钥匙串锁定到特定帐户。但回到现实世界，我们仍然坚持要求用户注册时不合时宜的电子邮件地址提供密码重置电子邮件。但是，听起来您的用户帐户存储在本地。

# java - 将数据从数据库添加到 hashmap

> ID：12437028
> 
> 赞同：0
> 
> 时间：2012-09-15T11:38:53.863
> 
> 标签：java, sql, hashmap

您好我正在创建一个应用程序，我可以在其中将数据存储在购物车模块的 Hashmap 和列表中。但我想从我的 MS-Access 数据库中获取这些数据。我尝试了以下代码，但它没有编译。请给我指导.

代码：

```
import java.sql.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class Program {
    public static void main(String [] args){}

    public static HashMap getProductsAsMap() {
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con = DriverManager.getConnection("jdbc:odbc:pd");
            ResultSet rs = null;
            Statement st = con.createStatement();
            String sql = ("select * from products");
            rs=st.executeQuery(sql);
            while (rs.next()) { 
                HashMap<String, ProductBean> products= new HashMap<String, ProductBean>();
                String name=rs.getString("pname");
                String desc=rs.getString("pdesc");
                String image=rs.getString("pimage");
                products.put("P1", new ProductBean(name,desc,image));
                return products;
            }
            rs.close();
            st.close();
            con.close();
        }
        catch(Exception e){}   
    }

    public static List getProductsAsList() {
        List<ProductBean> products = new ArrayList<ProductBean>();
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con = DriverManager.getConnection("jdbc:odbc:pd");
            ResultSet rs = null;
            Statement st = con.createStatement();
            String sql = ("select * from products");
            rs=st.executeQuery(sql);
            while (rs.next()) { 
                String name=rs.getString("pname");
                String desc=rs.getString("pdesc");
                String image=rs.getString("pimage");
                products.add(new ProductBean(name,desc,image));
            }
            rs.close();
            st.close();
            con.close();
        }
        catch(Exception e){}
        return products;  
    }
} 
```

我得到2个错误如下：

![在此处输入图像描述](../Images/126af04ab4ef92a65a7df3e94673773a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T11:41:21.667

您的`ProductBean`类没有将三个字符串作为参数的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:41:14.193

如错误所示，该类`ProductBean`缺少带有 3 个字符串 - 签名的构造函数`ProductBean(String, String, String)`。

再次检查此类以匹配现有构造函数，或添加新构造函数以匹配您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T19:05:41.707

它应该是这样的：

```
products.add(bean) 
```

bean 是`ProductBean`类 ProductBean 的对象 bean = new ProductBean();

# filter - 如何解决 After Effects CS6 中的选择性滤色器问题？

> ID：12437035
> 
> 赞同：1
> 
> 时间：2012-09-15T11:39:26.433
> 
> 标签：filter

两条消息：“没有足够的内存用于 PSL”，然后是“无效的过滤器”。

# javascript - Openlayer 带标签的外部图形

> ID：12437036
> 
> 赞同：3
> 
> 时间：2012-09-15T11:39:42.380
> 
> 标签：javascript, openlayers

我想在图像上显示计数，我添加了这样的图层：

```
var vector = new OpenLayers.Layer.Vector("Test", {
    displayInLayerSwitcher: false
});

vector.styleMap.styles["default"].addRules([
    new OpenLayers.Rule({           
        "maxScaleDenominator": 136495,     
        symbolizer: {
            externalGraphic: "../funnel/ico/blank.png",
                graphicWidth: 20,
                graphicHeight: 20,
        graphicOpacity:1,
        label: "${count}",
            labelOutlineWidth: 1,
            fontColor: "#ffffff",
            fontOpacity: 0.8,
            fontSize: "12px" 
        }
    })            
]); 
```

但是标签显示在图像下方，[标签在图标下方](http://i45.tinypic.com/350l84y.png)

像空的，但我想在像这样的图形上添加标签[-图标顶部的标签](http://i47.tinypic.com/2mx0i3d.png)

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T12:41:29.630

您可以使用以下样式属性（使用 StyleMap）设置标签位置：

*   标签对齐
*   labelXOffset // 画布渲染器不支持！
*   labelYOffset // 画布渲染器不支持！*

在此处查看符号器属性：[http ://dev.openlayers.org/apidocs/files/OpenLayers/Feature/Vector-js.html](http://dev.openlayers.org/apidocs/files/OpenLayers/Feature/Vector-js.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:14:08.037

我以不同的方式定义样式图。

```
var style = new OpenLayers.Style({
   ...
});
...
var vector = new OpenLayers.Layer.Vector('Test_layer', {
    styleMap: new OpenLayers.StyleMap(style)
}); 
```

可以通过这个例子帮助你[http://jsfiddle.net/winsent/ZkMzG/](http://jsfiddle.net/winsent/ZkMzG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:58:55.250

根据文档 [http://dev.openlayers.org/apidocs/files/OpenLayers/Feature/Vector-js.html ，有同样的问题并通过将渲染器设置为 SVG 来解决](http://dev.openlayers.org/apidocs/files/OpenLayers/Feature/Vector-js.html)

> label {String} 可选标签的文本。对于使用画布渲染器的浏览器，这需要 fillText 或 mozDrawText 可用。

```
 var layer = new OpenLayers.Layer.Vector("Features", {
    renderers: ['SVG'],
 ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T20:23:28.817

这将起作用（带有奖励的真实代码片段，当集群中少于 3 个功能时，将分簇）：

```
var pointStyle2 = new OpenLayers.Style({
    externalGraphic: "http://www.yourdomain.com/img/image.png",
    //graphicYOffset: -25, 
    pointRadius: 15,
    'label': "${label}"
  }, {
    context: {
      label: function(feature) {
    // clustered features count or blank if feature is not a cluster
    return feature.cluster ? feature.cluster.length : "";  
      }
    }
});

var styleMapClusterClient = new OpenLayers.StyleMap({
  'default': pointStyle2,
});

//create refresher
var refresh = new OpenLayers.Strategy.Refresh({force: true, active: true});

var clusterStrategyClient = new OpenLayers.Strategy.Cluster({ distance: 35, threshold: 3 });
    var urlKMLClient = 'Client.kml'; 
    var layerKMLClient = new OpenLayers.Layer.Vector("Clients", {
                styleMap: styleMapClusterClient,
            strategies: [new OpenLayers.Strategy.Fixed(), clusterStrategyClient, refresh],
            protocol: new OpenLayers.Protocol.HTTP({
            url: urlKMLClient,
            format: new OpenLayers.Format.KML({
                extractStyles: true, 
                extractAttributes: true,
                maxDepth: 2
            })
            })
        }); 
```

# javascript - 如何检测屏幕是否是触摸感应的？

> ID：12437042
> 
> 赞同：6
> 
> 时间：2012-09-15T11:41:15.870
> 
> 标签：javascript, windows-8, touch

我正在为 Windows 8（Metro UI）开发一个应用程序。我正在使用 HTML5、JavaScript、jQuery 等进行开发。如果屏幕不支持屏幕触摸事件，我想显示不同的用户界面。

如何使用 JavaScript 在 Windows 8 中检测屏幕是否支持触摸感应？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T11:45:21.150

请参阅此处：[在 IE 10 中检测触摸硬件](http://dotnet.dzone.com/articles/detecting-touch-hardware-ie-10)

从上面的页面：

> 为了在 Internet Explorer 10（将​​于今年晚些时候随首批 Windows 8 平板电脑一起提供）中测试触摸，您可以调用 window.navigator.msMaxTouchPoints 方法

```
if (window.navigator.msMaxTouchPoints) {
// touch device
}
else {
// non-touch device
} 
```

# php - PHP将多个值列表到数组中

> ID：12437045
> 
> 赞同：2
> 
> 时间：2012-09-15T11:41:45.520
> 
> 标签：php, list

我有一个酒店数据库，由于房间类型，它有多种价格。我想相应地将它动态地列出到（每种房间类型的）数组中。我的数据结构是：

*   酒店A : 1200-1500-1300-1700 //房型1=1200usd/晚，房型2=1500usd/晚...
*   B酒店：1500-1200-1300
*   酒店 C : 800-850

我想将它列在每种房型中。所以我写道：

```
while($rec = mysql_fetch_array($result_rate)) {  
    $_roomId = $rec['rid'];
    $_roomRate = $rec['rate'];

    list($ratez[]) = explode("-", $_rate); //because the room type is varied by hotel so I make it in array
} 
```

所以我希望结果应该像

```
echo "Room ID $_roomId=$ratez[$_roomId] USD "; 
```

但结果并不如我所料。一直显示错误`Fatal error: Unsupported operand types.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:43:48.320

用这个：

```
$ratez[] = explode('-', $_rate); 
```

或者这样可以节省每个房间的价格：

```
$ratez[$_roomId] = explode('-', $_rate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:01:29.753

我所做的只是：

```
$_rCostz=explode("-",$rec['cost']); 
```

并将结果以货币格式回显为：

```
echo number_format($_rCostz[$room_id-1]) 
```

//因为房间 id 以 1 开头，但数组以“0”开头，所以 -1

非常感谢 Night2 和其他人。问题解决了。

# iphone - 在 iOS 5 中获取访问令牌后获取 Facebook 用户个人资料数据

> ID：12437046
> 
> 赞同：2
> 
> 时间：2012-09-15T11:42:00.600
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, ios5

我正在开发一个 iOS 5 应用程序，我需要在成功登录后获取用户配置文件数据。

现在，当用户成功登录时，我将获得一个访问令牌。

现在我正在尝试使用该访问令牌让 Facebook 登录用户个人资料数据。

我尝试按照 Facebook 开发者网站上提供的示例应用程序进行操作。

我没有使用 FBconnect 类型的资源文件。我从示例应用程序中添加“facebookSDK.framework”。

请帮我。

谢谢，

```
- (void)populateUserDetails {

FBRequestConnection *connection = [[FBRequestConnection alloc] init];

// First request uploads the photo.
FBRequest *request1 = [FBRequest requestForMe];

if (FBSession.activeSession.isOpen) {

    [connection addRequest:request1
         completionHandler:
     ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
         if (!error) {

             NSLog(@"fb user name = %@",user.name);
             NSLog(@"fb user name = %@",user.id);
         }

         NSLog(@"fb2 user name = %@",user.name);
         NSLog(@"fb2 user name = %@",user.id);
     }
            //batchEntryName:@"photopost"
     ];

    [connection start];
} 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T13:18:41.933

在你的 .h

```
#import<FacebookSDK/FacebookSDK.h> 
```

现在在您的 .m 文件中，只需调用以下方法即可获取用户数据

```
-(void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user{
    NSLog(@"usr_id::%@",user.id);
    NSLog(@"usr_first_name::%@",user.first_name);
    NSLog(@"usr_middle_name::%@",user.middle_name);
    NSLog(@"usr_last_nmae::%@",user.last_name);
    NSLog(@"usr_Username::%@",user.username);
    NSLog(@"usr_b_day::%@",user.birthday);

  } 
```

上面的方法是在 FBLoginView.h 中定义的，你可以在那里看到。

我根据最新的 facebookSDK.framework 添加了此方法。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T19:37:33.293

这是获取用户头像的方法：

```
//in your app delegate file configure "FBProfilePictureView" class
- (void)applicationDidFinishLaunching:(UIApplication *)application {    
    [FBProfilePictureView class];
}

//in your header file
IBOutlet FBProfilePictureView   *userPictureView;

@property (strong, nonatomic) FBProfilePictureView     *userPictureView;

//here "userPictureView" is uiview not uiimageview

//in your .m file 

-(void)setProfilePicture {
    [FBSession.activeSession closeAndClearTokenInformation];

    NSArray *permissions = [NSArray arrayWithObjects:@"email", nil];

    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         NSLog(@"\nfb sdk error = %@", error);
         switch (state) {
             case FBSessionStateOpen:
                 [[FBRequest requestForMe] startWithCompletionHandler:
                  ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
                      if (!error) {

                          self.userPictureView.profileID = [user objectForKey:@"id"];

                      } 
                  }];
                 break;
             case FBSessionStateClosed:
                 //need to handle
                 break;
             case FBSessionStateClosedLoginFailed:
                 //need to handle
                 break;
             default:
                 break;
         }
     }];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-05T02:49:07.230

如果您编写完成处理程序以将结果视为 FBGraphObject，我发现它效果最好：

```
[[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection, FBGraphObject *result, NSError *error) {
  if (result && !error) {
    name = result[@"name"];
    email = result[@"email"];
    facebookId = result[@"id"];
  } else {
    NSLog(@"Error!");
  }
}]; 
```

# c# - 写入响应输出时出现异常

> ID：12437054
> 
> 赞同：1
> 
> 时间：2012-09-15T11:43:11.510
> 
> 标签：c#, asp.net, .net, exception, asp.net-mvc-4

在控制器中写入响应时出现以下异常：

```
Object reference not set to an instance of an object.

System.NullReferenceException occurred
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=System.Web
  StackTrace:
       at System.Web.Util.StringUtil.memcpyimpl(Byte* src, Byte* dest, Int32 len)
       at System.Web.Util.StringUtil.UnsafeStringCopy(String src, Int32 srcIndex, Char[] dest, Int32 destIndex, Int32 len)
       at System.Web.HttpWriter.Write(String s)
       at Controllers.DropboxController.<Sync>b__2(BlogUpdaterEventArgs args) in DropboxController.cs:line 78
  InnerException: 
```

发生异常的代码行是：

```
BlogUpdater.Execute(htmlPostProvider, args => Response.Write(args.Message)); 
```

我的*Execute*方法在处理时发布消息。Execute 方法签名是：

```
public static void Execute(IHtmlPostProvider postProvider, BlogUpdaterEventHandler outputMessageCallback) 
```

有时这有效，有时它会引发异常。当它抛出异常时，当我在调试器中检查它时，实际上没有任何明显的设置为 null。args.Message是有效字符串，响应有效，Response.OutputStream 和 Response.OutputStream.CanWrite 也是有效的*。*

关于什么可能是错误的任何想法？

# mysql - 我们所有的 MySQL 约束都变成了小写。什么会导致这种情况？

> ID：12437059
> 
> 赞同：15
> 
> 时间：2012-09-15T11:44:21.277
> 
> 标签：mysql, foreign-keys, constraints, case-sensitive, camelcasing

我们所做的每件事都有一个驼峰命名约定——从数据库表到对象属性、列、数据库索引和约束。

我们已经在一个新项目上使用这些约定两个月了，一切进展顺利，但昨晚突然之间，我们 6 个数据库中只有一个的所有关系都从驼峰式转换为小写。重要的是要注意只有约束转换 - 索引本身保持驼峰式。

因此，如果我们有一个名为 someColumn 的列和另一个名为 someTable.otherColumn 的列，它来自以下内容：

```
someColumn => someTable.otherColumn ON DELETE CASCADE ON UPDATE CASCADE 
```

对此：

```
someColumn => sometable.otherColumn ON DELETE CASCADE ON UPDATE CASCADE 
```

什么可能导致这种情况？我们无法重现此问题 - 我们尝试更改随机约束以查看它是否会全部更改，然后我们尝试重新导入结构并且一切正常，从而阻止导入 camelCase。

我们在 OSX 上工作并部署到 CentOS。

编辑：一位开发人员使用不区分大小写的 OSX。他尝试从他自己机器上的导出中重新导入数据库，但仍然没问题，因此：将转储从不区分大小写的机器导入到区分大小写的 CentOS 中并*没有*破坏事情。重新启动 mysqld 也未能重现此错误。所有强制小写 mysql 设置均已关闭。迄今为止，我们一直无法让它再次发生。

Edit2：请注意，这只发生在我们的 CentOS 开发服务器上 - 使用不区分大小写操作系统的开发人员之前已经从其他区分大小写的系统上导入了他的数据库，并且每次都一切正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T11:48:49.980

[错误报告 #55897](http://bugs.mysql.com/bug.php?id=55897)表明这是设计使然，并记录在[限制`InnoDB`表](http://dev.mysql.com/doc/en/innodb-restrictions.html)下：

> 在 Windows 上，`InnoDB`始终在内部以小写形式存储数据库和表名。

另请参阅[MySQL 中不区分大小写的约束名称](http://richardfearn.wordpress.com/2007/03/12/case-insensitive-constraint-names-in-mysql/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T21:13:43.943

您需要在 OSX 服务器的 my.cnf 上检查 MySQL 中的两个变量

*   [小写文件系统](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_lower_case_file_system)
*   [lower_case_table_names](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_lower_case_table_names)

根据关于[lower_case_table_names的 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_lower_case_table_names)

> 如果您在具有不区分大小写文件名的系统（例如 Windows 或 Mac OS X）上运行 MySQL，则不应将此变量设置为 0。如果在这样的系统上将此变量设置为 0 并使用不同的字母大小写访问 MyISAM 表名，则可能会导致索引损坏。在 Windows 上，默认值为 1。在 Mac OS X 上，默认值为 2。

尽管上面的摘录是指 MyISAM，但`lower_case_table_names`在 OSX中默认值为 鉴于此，如果您有`lower_case_table_names=0`或`lower_case_table_names=1`在您的 OSX 的 my.cnf 中，mysqld 可能会有点困惑。

因此，如果任何来自 OSX 服务器的 mysqldumps 移入 CentOS 并没有改变这种情况，请不要感到惊讶。

这很可能是你现在正在与之抗争的东西。

# macos - MAC OS Lion 中弹出服务器不可用警报

> ID：12437060
> 
> 赞同：1
> 
> 时间：2012-09-15T11:44:22.660
> 
> 标签：macos, cocoa, osx-lion

在我的应用程序中，我展示了一个显示计算机名称的屏幕。但是当我测试应用程序时，在其中一台机器上我收到一条错误消息

> 连接到服务器“xxx.xxx.xx.xxx”时出现问题。服务器可能不存在或此时不可用。检查服务器名称或 IP 地址，检查您的网络连接，然后重试。

当我单击此警报的确定时，我的应用程序将恢复其运行。但它基本上是挂了，直到我得到这个警报。知道问题是什么吗？请注意，我没有在所有机器上都收到此警报。

提前致谢！

# c# - Split() 函数没有给出输出

> ID：12437062
> 
> 赞同：1
> 
> 时间：2012-09-15T11:44:45.210
> 
> 标签：c#, asp.net

代码有什么问题..？它不工作！

实际上我想从数据库的一个字段中拆分条目。其中的项目用逗号分隔。

这就是我正在做的事情。

```
string str = dataSet.Tables[0].Rows[0]["Ingredients"].ToString();

string[] split = str.Split(',');
IList<string> lblListItemIngredients  = new List<string>();
foreach (string item in split)
{
  lblListItemIngredients.Add(item);
} 
```

在我的 aspx 页面中，

```
<ul>
<li>
<asp:label id="lblListItemIngredients" runat="server></asp:Label>
</li>
</ul> 
```

但是输出没有出现，但是在调试模式下，我可以看到字符串正在分裂.. 怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T11:46:54.323

您必须以某种方式将列表中的数据获取到控件。这不会因为你给一个变量与控件的 id 同名而神奇地发生。

实际上，您应该为变量使用不同的名称，否则它将隐藏已添加到页面对象的属性。

如果你想创建一个 HTML 列表，仅仅在一个列表项中放置一个标签是不够的，这样就不会为每个字符串创建一个列表项。您可以使用中继器：

```
<ul>
  <asp:Repeater id="lblListItemIngredients" runat="server">
    <ItemTemplate>
      <li><%# Container.DataItem %></li>
    </ItemTemplate>
  </asp:Repeater>
</ul> 
```

您不必为数据源创建列表，数组可以正常工作：

```
string str = dataSet.Tables[0].Rows[0]["Ingredients"].ToString();
string[] split = str.Split(',');

lblListItemIngredients.DataSource = split;
lblListItemIngredients.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:49:42.670

当您`asp:label`应该使用类似`asp:ListBox`. `IList<String>`也从您的代码中消除声明。

将字符串数组添加到 ListBox 的更好方法如下：

首先，在您的标记中，将不正确的控件引用更改为 ListBox：

```
 <asp:ListBox id="IngredientList" runat="server"></asp:ListBox> 
```

其次，在源码中，精简加法：

```
 string str = dataSet.Tables[0].Rows[0]["Ingredients"].ToString();

    string[] ingredients= str.Split(',');
    IngredientList.Items.AddRange(ingredients); 
```

这种方法消除了markkup中不正确的标签控件，并且从后面的代码中消除了手动迭代和原始版本中不需要的IList声明。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T12:11:43.833

Guffa 已经很受欢迎了，但只是为了完整性，因为它符合你一开始就做这件事的精神:-)

如果您将标记更新为：

```
 <ul>
   <asp:Literal id="literalIngredients" runat="server" />
   </ul> 
```

（老实说，如果在您使用的 foreach 循环中，您的原始代码或多或少会起作用`yourLabel.Text += item;`，正如 Guffa 所说，将变量和控件同名调用并不是一个好主意）

并将您的代码更新为

```
 string str = dataSet.Tables[0].Rows[0]["Ingredients"].ToString();

    string[] split = str.Split(',');
    // not needed IList<string> lblListItemIngredients  = new List<string>();
    foreach (string item in split)
    {
      literalIngredients.Text += string.Format("<li>{0}</li>",item);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T11:57:21.527

你应该使用 asp:ListBox 而不是 Label

# php - PHP：在 PHP 邮件程序中发送附件

> ID：12437066
> 
> 赞同：0
> 
> 时间：2012-09-15T11:45:18.193
> 
> 标签：php, email

我正在尝试通过邮件向用户发送附件

我正在使用 PHP 邮件程序库

```
 $mail->AddAddress($pr_email);
        $mail->Subject = "Activate your account";
        $mail->AddAttachment($data);
        $mail->IsHTML(true);
        $mail->Body =$message;

        if(!$mail->Send())
        {
            echo "Error sending: " . $mail->ErrorInfo;;
        } 
```

这`$data`是用户在这里上传的图像我如何读取文件的值并存储在 $data 变量中

```
 $tmpName  = $_FILES['file_upload']['tmp_name'];
   $fp     = fopen($tmpName, 'r');
   $data = fread($fp, filesize($tmpName));
   $data = addslashes($data);
   fclose($fp); 
```

不幸的是，我只能收到消息文本，我没有收到邮件中的附件

请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:51:16.473

```
AddAttachment($path,$name,$encoding,$type); 
```

例子

```
$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment 
```

欲了解更多信息并附上其他类型的附件，[请查看此链接](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/UsefulTutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:48:48.920

您只需提供`AddAttachment`.

```
$mail->AddAttachment($tmpName, $file_name); 
```

[在这里检查](http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html#File_Attachments_PHP_Mail_PHPMailer)。

# linq - Linq 扩展方法 - 如何获取与我的集合中的项目相等的项目列表？

> ID：12437070
> 
> 赞同：0
> 
> 时间：2012-09-15T11:45:30.090
> 
> 标签：linq, entity-framework, collections, ef-code-first, extension-methods

我有这样的事情：

```
public bool Function(IEnumerable<MyObject> MyObj)
{
    var context = new ContextDb();
    var MyObjFromContext = context.MyObjects.Where(obj => obj == MyObj) //that does not compile!
} 
```

在评论部分，我无法进行`obj == MyObj`比较，因为`obj`是单个项目，并且`MyObj`是项目列表。

那么我怎样才能获得`MyObjFromContext`等于`MyObj`，但来自上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:03:06.260

您可能必须使用主键进行查询：

```
var ids = MyObj.Select(o => o.Id).ToArray();
var MyObjFromContext = context.MyObjects.Where(obj => ids.Contains(obj.Id)).ToList() 
```

显然，这段代码假定您的对象有一个名为“标准”的整数主键`Id`

# zend-framework - Zend_Navigation submenu UL 类设置？

> ID：12437071
> 
> 赞同：2
> 
> 时间：2012-09-15T11:45:59.643
> 
> 标签：zend-framework, twitter-bootstrap, html-lists, submenu, zend-navigation

我在一个项目上使用 Twitter Bootstrap，他们的导航系统非常棒。问题是我需要 Zend_Navigation 在子菜单上设置 UL 类，而我无法做到这一点。

我有一个在 postDispache 上执行此操作的插件：

```
$layout = Zend_Layout::getMVCInstance();
$view = $layout->getView();////
$view->navigation( $this->getMenu() );             // load the menu container
$view->navigation()->menu()->setUlClass('nav');    // set UL class 
```

我的导航容器代码是：

```
private function getMenu()
{
    return new Zend_Navigation(array(
        array(
            'label' => 'DASHBOARD',
            'id' => 'dashboard',
            'route' => 'default_index_index',
            'class' => 'nav',
            'ulClass' => 'nav'
        ),
        array(
            'label' => 'POLICIES',
            'id' => 'policies',
            'route' => 'policies_policies_list',
            'class' => 'active nav',
            'ulClass' => 'nav',
            'pages' => array(
                array(
                    'label' => 'LIST',
                    'id' => 'policiesList',
                    'route' => 'policies_policies_add',
                    'class' => 'nav',
                    'ulClass' => 'nav'
                )
            )
        )
    ));
} 
```

结果代码 HTML 如下：

```
<ul class="nav">
    <li class="active">
        <a id="menu-dashboard" class="nav" href="/">Dashboard</a>
    </li>
    <li>
        <a id="menu-policies" class="active nav" href="/policies/list">Apólices</a>
        <ul>  <!-- we should have a class nav here too -->
            <li>
                <a id="menu-policiesList" class="nav" href="/policies/add">Listar</a>
            </li>
        </ul>
    </li>
</ul> 
```

我知道数组中有一些重复的类的东西，但我什么都试过了，结果只有 FIRST UL 有一个类，子菜单 UL 没有。任何人都知道如何让 Zend Navigation 在子菜单上为 UL 设置类？

干杯

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:56:23.213

经过大量搜索后，我发现了一个 View Helper 的 mmoussa 实现，它覆盖了 menu 方法并在 HTML 上实现了 Twitter Bootstrap 类。

奇迹般有效。提醒一句，菜单根选项不应该有系统正常工作的链接，应该指向#。

你可以从这里的 Git 下载它[https://github.com/mmoussa/zf1-navigation-view-helper-bootstrap](https://github.com/mmoussa/zf1-navigation-view-helper-bootstrap)

快乐编码！

干杯，

雨果

# xamarin.android - Dropbox需要monodroid，当我添加monotouch版本时，它给出了错误

> ID：12437072
> 
> 赞同：0
> 
> 时间：2012-09-15T11:46:04.427
> 
> 标签：xamarin.android, dropbox

> **可能重复：**
> [如何在 Monodroid 中使用 dropnet、sharpbox 和其他库](https://stackoverflow.com/questions/12429286/how-to-use-dropnet-sharpbox-and-othere-libraries-in-monodroid)

我需要用于 Dropnet 的 monodroid dll。我发现它们可用于 Monotouch，但不适用于 monodroid。当我尝试在我的项目中添加 Monotouch 时，它会出错。那么我怎样才能获得用于 monodroid 的 dll。

谢谢。

# android - 动作模式完成按钮

> ID：12437073
> 
> 赞同：4
> 
> 时间：2012-09-15T11:46:06.873
> 
> 标签：android, actionbarsherlock

我有一个动作模式，当用户`ListView`现在选择项目时，当用户点击动作模式上的完成按钮时，我想做出一个特定的动作，我做了这个并且它完美地工作，现在我想支持横向所以我应该保持行动模式。我对中选定项目的操作的问题

```
onDestroyActionMode 
```

因此，当用户选择项目并旋转称为 the 的操作模式 `onDestroyActionMode`并且我在旋转时不想要它时，如何自定义完成按钮事件处理，以便我不中继`onDestroyActionMode`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:09:57.317

我建议你检查这些答案

[防止按返回按钮取消操作模式](https://stackoverflow.com/questions/11725729/prevent-to-cancel-action-mode-by-press-back-button)

[如何识别 ActionMode 中是否点击了 Done 按钮](https://stackoverflow.com/questions/11642877/how-to-recognize-whether-the-done-button-is-clicked-in-actionmode)。

我结束了将“完成”按钮的代码添加到方法 onDestroyActionMode(ActionMode mode) 并使用方法 dispatchKeyEvent(KeyEvent event) 来捕获“返回”按钮

# android - 如何使用 Android SDK 选择多个联系人

> ID：12437077
> 
> 赞同：0
> 
> 时间：2012-09-15T11:46:46.097
> 
> 标签：android, android-intent, android-contacts

我在搞乱 Android 上的消息传递应用程序。我注意到它使我能够一次选择多个联系人向他们发送消息。显然，这不能通过行动来完成`Intent.ACTION_PICK`。

所以我在 Github ([链接](https://github.com/android/platform_packages_apps_mms)) 上查看了它的源代码，发现使用的操作是`ContactsContract.Intents.ACTION_GET_MULTIPLE_PHONES`

[问题是我在我的机器上和官方文档链接](http://developer.android.com/reference/android/provider/ContactsContract.Intents.html)上都找不到这个动作，但它在这个[网站](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/ContactsContract.java#ContactsContract.Intents.0ACTION_GET_MULTIPLE_PHONES)上列出并且也在 github 中使用。我错过了什么吗？

如果我无法使用此操作，我还可以使用哪些方法来选择多个联系人？

# c# - C# emgu cv：录制的视频播放到快/慢

> ID：12437080
> 
> 赞同：0
> 
> 时间：2012-09-15T11:47:26.910
> 
> 标签：c#, video-capture, playback, emgucv

我正在尝试使用 emguCV 中的 VideoWriter 和 Capture 将捕获的视频写入文件，问题是：如果我播放刚刚录制的视频，它会播放得快或慢。我该如何解决这个问题，所以我录制的视频将被实时播放/录制，所以不要慢或快？

这是我的代码：

* * *

```
 Capture capture = new Capture();
    VideoWriter vw;
    Size ms_hd_cam_5000_resolution = new Size(1280, 720);
    Label width_label, height_label, recordingTime;
    Button record;
    Thread isRecording;
    Image<Bgr, byte> imageFrame;

    int seconds;
    int minutes;

    public Form1()
    {
        InitializeComponent();
        InitializeConrols();

        //Cam_Properties
        capture.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_WIDTH, 1280);
        capture.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_HEIGHT, 720);
        capture.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FPS, 30);

        //VideoWriting_Properties
        vw = new VideoWriter("test.avi", 30, ms_hd_cam_5000_resolution.Width, ms_hd_cam_5000_resolution.Height, true);

    }

    private void InitializeConrols()
    {
        this.BackColor = Color.Black;
        this.ClientSize = new Size(ms_hd_cam_5000_resolution.Width + 25, ms_hd_cam_5000_resolution.Height + 75);
        this.Picture_box.Size = ms_hd_cam_5000_resolution;

        width_label = new Label();
        width_label.Location = new Point(10, ms_hd_cam_5000_resolution.Height + 15);
        width_label.ForeColor = Color.White;
        width_label.Text = "width: " + capture.Width.ToString();

        height_label = new Label();
        height_label.Location = new Point(10, ms_hd_cam_5000_resolution.Height + 40);
        height_label.ForeColor = Color.White;
        height_label.Text = "height: " + capture.Height.ToString();

        recordingTime = new Label();
        recordingTime.Location = new Point(225, ms_hd_cam_5000_resolution.Height + 40);
        recordingTime.ForeColor = Color.White;
        recordingTime.Text = "time: 0";

        record = new Button();
        record.Location = new Point(225, ms_hd_cam_5000_resolution.Height + 15);
        record.ForeColor = Color.White;
        record.Text = "record";

        Controls.Add(width_label);
        Controls.Add(height_label);
        Controls.Add(record);
        Controls.Add(recordingTime);

        record.Click += Record_Click;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        captureCamImage(sender, e);
        Application.Idle += captureCamImage;
    }

    private void Record_Click(object sender, EventArgs e)
    {
        if (isRecording == null)
        {
            recordingTime.Text = "Time: 0";
            record.Text = "stop";
            isRecording = new Thread(this.Record);
            isRecording.Start(); 
        }
        else
        {
            record.Text = "record";
            isRecording = null;
        }
    }

    private void captureCamImage(object sender, EventArgs e)
    {
        imageFrame = capture.QueryFrame();
        Picture_box.Image = imageFrame.ToBitmap();
        recordTime();
    }

    private void recordTime()
    {
        recordingTime.Text = "Time: " + minutes.ToString() + " : " + seconds.ToString();
    }

    private void Record()
    {
        Stopwatch stopWatch = new Stopwatch();
        stopWatch.Reset();
        stopWatch.Start();
        while (isRecording != null)
        {
            seconds = stopWatch.Elapsed.Seconds;
            minutes = stopWatch.Elapsed.Minutes;

            vw.WriteFrame(imageFrame);
            Thread.Sleep(1000 / 30);
        }
    } 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T09:45:16.833

尝试降低 FPS 值。在

```
vw = new VideoWriter("test.avi", 30, ms_hd_cam_5000_resolution.Width, ms_hd_cam_5000_resolution.Height, true); 
```

而不是 30 帧/秒，而是提供较低的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:09:50.227

代码没有意义。挂钩`Application.Idle`不是一个好主意。

将代码扔到垃圾中，有 1 个记录线程`capture.QueryFrame()`并立即保存。
地狱甚至不要打扰线程使用计时器，根据 FPS 设置它。它不会准确，但比你现在拥有的要好。

# vbscript - VBScript MSMQ 死信队列计数

> ID：12437082
> 
> 赞同：2
> 
> 时间：2012-09-15T11:47:31.557
> 
> 标签：vbscript, msmq, dead-letter

我正在尝试使用 VBScript 计算死信队列中的消息数。这是我的代码：

```
 Option Explicit 
 Dim mqQ, QueueName 
 set mqQ = CreateObject("MSMQ.MSMQManagement") 
 mqQ.Init "localhost", , "DIRECT=OS:localhost\system$;deadletter" 
 wscript.echo mqQ.MessageCount & " messsages" 
```

这是我得到的错误：

```
 D:\msmq_queue.vbs(4, 1) MSMQManagement: Operations of the type requested (for example, deleting a queue using a direct format name) are not supported for the format name specified. 
```

我使用这种格式来获取私人消息计数，但是我在死信中收到了这个错误。

# algorithm - 带有条件的图遍历特定顶点

> ID：12437083
> 
> 赞同：1
> 
> 时间：2012-09-15T11:47:42.413
> 
> 标签：algorithm, graph, graph-traversal

我有一个类似于下面的无向图，我需要实现一个图遍历算法。 **示例**：http:
[//i.imgur.com/15L6m.png](http://i.imgur.com/15L6m.png)

这个想法是每个顶点是一个城市，每个边缘是一条道路。
边的权重表示遍历指定边所需的时间。
条件是：

1.  每条边都在指定的时间窗口中打开以进行遍历：Time Open1、Time Open2、TimeClose1、Time Close2 - 当前时间必须在这些时间间隔内才能遍历边。

2.  只有一些顶点必须被访问。每个顶点必须在指定的时间窗口内至少访问一次：Time Open1、Time Open2、TimeClose1、Time Close2 - 当前时间必须在这些时间间隔内，以便将顶点标记为已访问。

3.  起点始终是顶点 0

对于**我的示例**，我有：
必须访问的顶点及其时间窗口（不考虑 -1 的值）：

```
Vertex To1  Tc1  To2  Tc2
  1    0    260  340  770
  4    0    240  -1   -1 
  5    170  450  -1   -1 
```

边在以下时间窗口中打开（不考虑 -1 的值）：

```
Edge To1  Tc1  To2  Tc2
0-1  0    770  -1   -1 
0-4  0    210  230  770
0-5  0    260  -1   -1 
1-2  0    160  230  770
1-5  40   770  -1   -1 
2-4  80   500  -1   -1 
3-4  60   770  -1   -1 
3-5  0    770  -1   -1 
```

所以基本思想是从顶点 0 开始，在考虑指定时间的情况下找到遍历顶点 1、4 和 5 的最短路径。
此外，例如，如果您完成了 0-1 但不能使用 1-5，则可以执行 0-1-0-1-5。

我现在正在使用的一个可能的解决方案是：
从 0 开始。找到最近的顶点以在最短的时间内标记（我使用修改后的 Dijkstra 算法）。这样做直到我标记了所有需要的顶点。**问题**是我认为我没有找到所有的可能性，因为正如我所说，你也可以像 0-1-0-1-5 组合一样移动，最后你可能会得到一条更短的
路线.

 **为了使它更清楚，我必须找到最短路径，以便我从顶点 0 开始，以一个目标顶点结束，同时我已经访问了所有其他目标顶点至少一次，尊重施加在边缘和目标顶点上的条件。
例如：
一个可能的解决方案是 0 - 4 - 3 - 5 - 1 总时间为 60+50+60+50=220
从 0 我也可以直接转到 5 但如条件中所述以标记顶点 5我必须有 170 到 450 之间的累积时间。另外，如果我去 0-4，我不能使用边缘 4-2，因为它在 80 处打开并且我的累积时间是 60。注意我可以使用 0-4-3，因为 4 -3 在 60 处打开，而执行 0-4 所需的时间等于 60。

首先，我将使用最多 20 个顶点和大约 50 条边。

解决方案 1：
0
1 4 5 0 2 5 0 2 3 0 1 3

我所做的是通过访问每个相邻顶点构建类似于树的东西来遍历图形。我在以下情况下停止扩展分支：
1\. 我有太多重复项，例如我有 0 1 0 4 0 1 0 - 所以我停止了，因为我有一组重复的 0 值，即 4
2\. 我找到一条包含所有要标记的顶点
3\. 我发现一条道路比另一条完整的道路花费更长的时间
4\. 我无法创建另一个节点，因为边是封闭的

解决方案2：

应用@Boris Strandjev 示例，但我有一些问题：

我必须在其间隔内至少访问节点 1,4 和 5 一次，允许在间隔外访问但不标记。对于一个顶点，我有 {(< id1, id2id3id4>, time)}，其中 id1 是当前顶点的 ide，id2-4 表示 1,4,5 的布尔值，如果在指定的时间间隔内访问，时间 -路径中的当前时间

```
Step1: 
{<0, 000>, 0} I can visit - {<1, 100>, 60} - chosen first lowest val
                          - {<4, 010>, 60}
                          - {<5, 000>, 60}
Step2:
{<1, 100>, 60} - {<0, 100>, 120} 
               - {<2, 100>, 110}   - chosen 
               - {<5, 100>, 110}    
Step3:
{<2, 100>, 110} - {<1, 100>, 160} - if I choose 1 again I will have a just go into a loop 
                - {<4, 110>, 170}   
Step4:
{<4, 110>, 170} - {<0, 110>, 230}
                - {<2, 110>, 230} 
                - {<3, 110>, 220}   - chosen

Step5:
{<3, 110>, 220} - {<4, 110>, 270} - again possible loop
                - {<5, 111>, 280} 
Step6:
{<5, 111>, 280} - I stop Path: 0-1-2-4-3-5 cost 280 
```

**编辑：**

我最终使用了上述两种解决方案的组合。一切似乎都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:09:31.090

我没有看到对图中顶点或边数的严格限制，所以如果我的解决方案不适合你，请原谅。如果您需要任何改进，请给予更严格的限制。

一种可能的解决方案是扩展节点的定义。不要只将城市视为图表中的节点，而是添加更多属性。保持边缘定义隐式，随时随地生成传出边缘，从而节省内存。

**现在看**：
您将节点定义为三件事的组合： - 节点所指的城市。- 访问时间 - 访问过的目标节点的位图（这样您就可以知道您是否已经访问过所有目标）。

现在边有点复杂——它们会引导你从一个城市到另一个城市，但每条边也会改变相邻节点的时间。还要不断更新每一步的目标节点位图。

**这是一个示例**：
您从`<city:=0, time:=0, bitmap:= (0 - true, 1...k - false)>`
0-4 边缘开始，您会发现自己在节点中`<city:=4, time:=60, bitmap:= ({0,4} - true, {1...k} / {4} - false)>`

继续以这种方式在节点之间移动，使用 Dejkstra 算法，你会找到你的解决方案（当你扩展节点定义时，现在甚至会考虑迂回）。每当您发现自己处于位图中所有位设置的节点中时，您就已经找到了解决方案。

您将在此类解决方案中使用的节点数不是那么容易计算，但是对于相对有限的节点数和非常有限的目标城市数，它应该可以工作（问题是生成的节点数相对于目标城市是指数的） .

**编辑**

这是您要求的扩展示例：

想象一下你有这样的输入（我正在使用你的符号）：

```
 Vertex To1  Tc1  To2  Tc2
   1    0    40   80  120
   2    40   80   -1   -1
   3    0   400   -1   -1 
   4    30   80   120 190

 Edge To1  Tc1  Weight
 1-2   0    770  50
 1-4  30     70  30
 1-3   0    400  30
 3-4 100    200  50
 2-4   0    400  20 
```

我将用以下形式表示顶点： `<1,1100>`含义：当前顶点为1，第二个：已在找到的路径中访问了第一个和第二个顶点。到每个顶点的距离将是到达该顶点所需的最短时间。

如您所知，在 Dijkstra 算法的过程中，您正在考虑增加路径（意味着您找到的到达已到达顶点前面的每个顶点的最佳路径）。我将按如下方式表示每个增广路径：`(<1,1100>, 400)`这意味着您可以到达顶点的当前最佳时间`<1,1100>`是 400。

您从一组增加的路径`{(<1, 1000>, 0)}`和到所有顶点的距离开始算法`infinity`。现在按照以下步骤操作。

以最佳增广路径到达第一个顶点。从它可能的边缘是`1-2`和`1-3`(`1-4`在第 0 秒内不可用。它们触发了另外两条增强路径：`{(<2, 1100>, 50), (<3, 1010>, 30)}`到的距离`<1, 1000>`更改为 0。

下一步考虑最佳增广路径`(<3, 1010>, 30)`。但是，可以使用较近的出边来添加增广路径：`1-3`不能使用，因为在时间 60 无法访问顶点 1。`3-4`由于时间间隔，也不能使用边。因此，增广路径现在是：`{(<2, 1100>, 50)}`。

下一步：`(<2, 1100>, 50)`和新的扩充路径：`{(<1, 1100>, 100), (<4, 1101>, 70)}`.

下一步：`(<4, 1101>, 70)`但它也没有添加新路径：顶点 2 在时间 90 不能访问，`3-4`不能再使用。因此增广路径是`{(<1, 1100>, 100)}`。

下一步：`(<1, 1100>, 100)`将扩充路径更改为：`{(<3, 1110>, 130)}`.

下一步：`(<3, 1110>, 130)`将扩充路径更改为：`{(<4, 1111>, 180)}`.

下一步：`(<4, 1111>, 180)`这是最后一步 - 我们处于访问所有目标顶点的状态。所以总结一下：你可以在180秒内访问所有的顶点。

我希望这个例子能帮助你理解我的想法。您可能需要在纸上写下所有注意事项，以确保我不会与增广路径有关。**

# linux - 保持管道打开而不读取它？

> ID：12437085
> 
> 赞同：2
> 
> 时间：2012-09-15T11:47:46.250
> 
> 标签：linux, bash, pipe, vlc

我正在使用 vlc 媒体播放器通过 Internet 连接到 rtsp 流。

我只需要定期查看流，但每次建立连接都需要很长时间。

相反，我保持连接打开，vlc 将输出作为传输流写入命名管道。

然后 vlc 的第二个实例可以在我需要时从管道中读取。

问题是，据我了解，除非打开以供阅读，否则无法写入命名管道。

为了在 vlc 的第二个实例未打开时解决此问题，我：

```
 cat < $PIPE > /dev/null 
```

除了以这种方式使用 cat 之外，还有更好的方法来保持管道打开以进行写入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:38:33.043

如果管道还没有准备好写入，你没有告诉连接的 VLC 做了什么。

如果它在看到管道尚未准备好写入并继续从连接中读取时丢弃输出，那么您可以简单地拥有一个打开管道但不读取它的进程。像这样的东西：

```
while sleep 7d; do :; done < $PIPE & 
```

然后，当您开始播放 VLC 时，它将开始从管道读取，连接的 VLC 将写入它，直到播放 VLC 停止。

但是，如果连接的 VLC 在写入管道时停止，那么通过上述设置，RTSP 连接最终将超时，并且当正在播放的 VLC 开始从管道读取时，连接的 VLC 将终止或需要重新连接。VLC 也可能只是在写入管道时超时。

在这种情况下，您可以从管道中读取并丢弃其内容，直到正在播放的 VLC 到达，并在它停止时继续读取。您可以让多个进程打开一个管道，但数据只能从中读取一次，即进程将竞争数据。

您可以通过在开始播放 VLC 之前使用 SIGSTOP 暂停丢弃过程并在停止后使用 SIGCONT 恢复它来实现，假设读取管道的间隙不足以使连接超时。

像这样：

```
cat $FIFO > /dev/null &
kill -SIGSTOP %
vlc $FIFO
kill -SIGCONT % 
```

# c# - 如何复制分机。libs 在编译期间构建文件夹？

> ID：12437086
> 
> 赞同：0
> 
> 时间：2012-09-15T11:48:15.177
> 
> 标签：c#, visual-studio-2010

我使用 DotNetZip 库并忘记使用我的 .exe 文件复制一个 .dll，这就是为什么我无法在另一台 PC 甚至从其他文件夹中运行我的 exe。看起来 pre(post)-build 事件应该如何从 lib 文件夹中复制所有 .dll 以发布一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T11:54:20.450

你是如何引用 DLL 的，你从哪里复制 exe？

构建项目时，如果正确引用了 DLL，它应该包含在输出文件夹中（通常`Debug`或`Release`取决于构建配置。

如果这没有发生，请在解决方案资源管理器中展开引用，然后右键单击对 dll 的引用并单击“属性”。将“复制本地”更改为真。

# php - PHP包含不显示内容

> ID：12437087
> 
> 赞同：1
> 
> 时间：2012-09-15T11:48:21.400
> 
> 标签：php, html, include, easyphp

我正在尝试将一个带有纯 HTML 的 PHP 文件包含到另一个 HTML 文件中，但包含没有显示任何内容。

我的目录树是这样的：

*   根
    *   图片
    *   包括
        *   头文件.php
    *   变量
    *   索引.html
    *   样式.css

我把这个包含在 index.html

```
<?php include('includes/header.php'); ?> 
```

这就是 PHP 头文件的样子：

```
<div id="header">
<div class="center">
    <a href="#"><img id="logo" src='images/logo.png' alt="Home" />
    </a>
    <ul>
        <li><a href="#">INICIO</a> |</li>
        <li><a href="#">SOCIAL</a> |</li>
        <li><a href="#">MAPA DEL SITIO</a> |</li>
        <li><a href="#">RSS</a> |</li>
        <li><a href="#">LOGIN</a> |</li>
        <li><a href="#">REGISTRO</a>
        </li>
    </ul>
</div> 
```

注意：我在 Windows7 下使用 EasyPHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T11:50:14.890

尝试将您的文件重命名为 index.php。;)

顺便说一句，在目录/文件周围使用引号。`include('bla.php');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:51:43.303

index.html 无法知道php的代码；
您应该将其更改为 index.php

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T12:03:07.570

您可以将 php 代码运行到 html 文件中，但您需要将 .htaccess 文件放入您的文档根目录并将以下代码行放入 .htaccess 文件中

```
AddType application/x-httpd-php .html .htm

OR

AddType application/x-httpd-php5 .html .htm 
```

然后，运行您的 html 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T12:02:55.323

你也可以在`header.php`文件中尝试这样的事情：

```
<?php
echo <<<OUTPUT
<div id="header">
  <div class="center">
      <a href="#"><img id="logo" src='images/logo.png' alt="Home" />
      </a>
      <ul>
          <li><a href="#">INICIO</a> |</li>
          <li><a href="#">SOCIAL</a> |</li>
          <li><a href="#">MAPA DEL SITIO</a> |</li>
          <li><a href="#">RSS</a> |</li>
          <li><a href="#">LOGIN</a> |</li>
          <li><a href="#">REGISTRO</a>
          </li>
      </ul>
  </div>
</div>
OUTPUT;
?> 
```

这样，您还可以在 HTML 代码中嵌入一些 PHP 变量（使用时`echo`和`heredoc`语法）。

您必须注意`heredoc`语法：不得在 first 之前和 last 之后留下任何空白字符`OUTPUT`。当然，将`index.html`文件的扩展名更改为`php`.

接下来你应该做的是在指定要包含的文件的路径时使用引号：`include("includes/header.php");`.

您还忘记在代码中为`<div id="header">`元素添加结束标记`HTML`，但这对问题本身而言并不重要。:-)

# c# - javascript浮动错误

> ID：12437092
> 
> 赞同：1
> 
> 时间：2012-09-15T11:48:43.677
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, razor

我做了这个代码文件 Real.cs

```
public ActionResult Index() {
    IList<Eventdata> liste = DATA2.Eventdata.GetEventdata();
    int a = liste.Count;

    float lat = liste[a-2].Latitude;
    float longi = liste[a-2].Longitude;
    IList<float> model = new List<float>();
    model.Add(lat);
    model.Add(longi);
    return View(model);
} 
```

我映射了表 EventData ：它包含两个属性浮点数（纬度，经度），我想知道它的最后一个值。

文件索引.CShtml

```
@model IList<float> @{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Lay3.cshtml";  
}

    <body  onload="initialize(@Model[0],@Model[1])">
    <div id="map_canvas" style="width: 800px; height: 500px;">
    </div>
    <script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript">
    </script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript">

    function initialize(a, b) {
        alert(a);
        alert(b);
        var myLatLng = new google.maps.LatLng(a,b);

        var myOptions = {
            zoom: 30,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
        var flightPlanCoordinates = [
        new google.maps.LatLng(a,b)
        ];

        var flightmarker = new google.maps.Marker({
   position: new google.maps.LatLng(a,b),
  map: map, title: " denden"
        });
    }    

    </script>
    </body> 
```

我有这样的最后一点： `Latitude=34.75064`和`longitude=10.761744`。但消息是：`34`和`75064`。为什么？我该如何纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:03:15.600

如果您的服务器或应用程序使用“en-US”以外的文化，那么我认为问题符合

```
onload="initialize(@Model[0],@Model[1])" 
```

在这里，您在浮点类型上隐式使用 C# .ToString 方法并将其传递给 javascript。但是，C# 会考虑文化信息，而 javascript 只处理文化。

您应该在转换中明确设置文化，例如：

```
 @model IList<float>
    @{
        ViewBag.Title = "Index";
        Layout = "~/Views/Shared/_Lay3.cshtml";
        CultureInfo culture = CultureInfo.GetCultureInfo("en-US");
        string latitude = Model[0].ToString(culture);
        string longitude = Model[1].ToString(culture);
    }
    <body onload="initialize(@latitude,@longitude)">
edit: GetCultureInfo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:54:16.300

尝试使用（或使用 '.' 十进制数字分隔符设置区域性）

```
<body  onload="initialize('@Model[0]','@Model[1]')"> // This will pass your value as
//two parameters(instead of four) but it can be used only as a string because
//javascript can parse decimal values only with '.' separator 
```

代替

```
<body  onload="initialize(@Model[0],@Model[1])"> 
```

如果您使用 34,75064 和 10,761744 调用初始化方法，您实际上是在传递四个参数。因此 a = 34 和 b = 75064。

在将参数从服务器传递到客户端时，您需要检查文化，因为当文化有 ',' 而不是 '.' 对于十进制数字分隔符，您的代码将无法按预期工作。

在您使用地图的情况下，您需要十进制值，因此您不能使用

```
<body  onload="initialize('@Model[0]','@Model[1]')"> 
```

您需要像这样将小数转换为适当的文化

```
var culture = CultureInfo.GetCultureInfo("en-US");
...
<body  onload="initialize(@Model[0].ToString(culture), @Model[1].ToString(culture))"> 
```

# ios - MBProgressHUD UI 没有响应

> ID：12437101
> 
> 赞同：0
> 
> 时间：2012-09-15T11:50:59.727
> 
> 标签：ios, user-interface, mbprogresshud

我发现我的 UI 在使用 MBProgress HUD 时没有响应，而在设备上调试时它显示消息“wait_fences 无法接收回复”。我认为我以错误的方式使用 MBProgressHUD。有人可以告诉我在以下情况下使用 MBProgressHUD 的最佳方法是什么。

```
if (!self.detailController) {

            DetailViewController *detailVC = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
            detailVC.view.autoresizingMask = baseView.autoresizingMask; //(baseView Alerady added on xib for orientation purpose)
            self.detailController = detailVC;
            [detailVC release];
        }
        [self.view addSubview: self.detailController.view]; //Removing detailController.view before calling to this function.
        [self.detailController makeServiceCall];

        -(void)makeServiceCall
        {
            //HUD is class level variable 
            if (!HUD) {
                HUD = [[MBProgressHUD alloc] initWithView:self.view.window];    
                HUD.dimBackground = YES;
                [self.view.window addSubview:HUD];
                HUD.labelText = @"";
            }
            //Showing the HUD progress bar
            [HUD show:YES];

            //Async call code for service call, once connection end hiding the HUD. 
        }

        -(void)parsingFinished
        {
            //Data handling goes here..
            [HUD hide:YES];
        } 
```

我研究了 UI 无响应性，发现 HUD 需要在 viewDidAppear 方法中显示，但我将视图添加为子视图，因为没有调用 viewDidAppear。

如果我从我的应用程序中删除 HUD，它运行得很好，所以我确信应用程序没有响应是因为 HUD 的使用方式错误。我在我的应用程序的很多地方都这样做了。需要我可以应用的最佳解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:57:47.413

MBProgressHUD 会在 UI 可见时阻止与 UI 的交互。如果这是可配置的，但阻止其父视图的 UI 是其默认状态，我忘记了我的头顶。特别是如果您将其添加到窗口而不是子视图。

# php - Nginx 作为反向代理返回 502 错误

> ID：12437102
> 
> 赞同：0
> 
> 时间：2012-09-15T11:51:00.803
> 
> 标签：php, apache, header, nginx, reverse-proxy

我有 nginx 作为反向代理和 apache 作为 mod_php 后端的网站。有时 nginx 在特定 url 上返回 502 错误（如[http://example.com/ipb.html?automodule=elfchat](http://example.com/ipb.html?automodule=elfchat)），因为 apache 关闭连接。在好的情况下 - 脚本应该将我重定向到另一个页面。这是崩溃连接的文件：

```
define('ELFCHAT_VERSION', '4.2.1');
include_once(ELFCHAT_PATH."config.php");
include_once(ELFCHAT_PATH."settings.php");
include_once(ELFCHAT_PATH."error.php");
include_once(ELFCHAT_PATH."kernel/db.php");
include_once(ELFCHAT_PATH."kernel/sessions.php");
include_once(ELFCHAT_PATH."kernel/skinloader.php");
include_once(ELFCHAT_PATH."kernel/kernel.php");

Elfchat::Init($config, unserialize($settings));

Skin::Setskinpath("skin/".Elfchat::Settings("skin")."/");

/**
 * Код для пользовательского смена скина и языка.
 */
Elfchat::Session()->start();

if(isset($_GET['useskin']))
{
    if($_GET['useskin'] == "ichat")$skin = "ichat";
    else $skin = "elfskin";
    $_SESSION['useskin'] = $skin;
}

if(isset($_SESSION['useskin']))
{
    if($_SESSION['useskin'] == "ichat")$skin = "ichat";
    else $skin = "elfskin";
    Skin::Setskinpath("skin/".$skin."/");
}
/**
 * Конец дополнительного кода
 */
@header('Content-Type: text/html; charset=utf-8'); 
```

如果我注释掉最后一行，一切都开始工作，但编码错误，删除评论后一切正常，即使编码也很好。过了一段时间，事情变糟了。请帮忙，我是 nginx 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:28:03.310

我忘了说 - 我将 php 版本从 5.2**升级**到 5.3，因为 php 设置是安全的，所以一些代码会中断。关于解决方案：这令人难以置信 - 有人编写了这些代码`eval(base64_decode("aWYoJG5hbWUgPT0gIkVsZmV0IikkaHRtbG5hbWUgPSAiPGJpZz5FbGZldDwvYmlnPiI7"));` 来做这件事，`if($name == "Elfet")$htmlname = "<big>Elfet</big>";`我用纯代码替换 eval 并且一切正常！

# javascript - 在 WinJS.UI.Pages 中显示完整的 HTML 内容

> ID：12437109
> 
> 赞同：1
> 
> 时间：2012-09-15T11:51:50.647
> 
> 标签：javascript, jquery, microsoft-metro

我使用 WinJS.xhr 从网站获取完整的 HTML 内容。问题是我无法在 WinJS.UI.Pages 上显示它，因为它甚至显示了 html 标签。如何像 Android 的 WebView 一样从 xhr 响应加载 HTML？

```
WinJS.xhr({ url: uri }).then(function (xhr) {
            if (xhr.status == 200) {
                // Parse xhr to JSON.
                var responseText = xhr.responseText;
                var response = xhr.response;

                // Do something to load responseText in this page.
                // ...
            } else {
                $("#error").text("SOMETHING WRONG");
            }

            return xhr;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:00:57.863

如果你使用 WinJS.xhr，为什么不使用 winjs 模板系统？( [http://msdn.microsoft.com/en-us/library/windows/apps/br229723.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229723.aspx) ) 这样，您可以将此查询封装在一个对象中，当您的 HTML 准备好（或失败）时更新 HTML看起来像 ：

```
<div class="preview-container" data-win-bind="innerHTML:preview"></div>
</div> 
```

预览包含您的html的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:01:58.600

```
jQuery.ajax({               
                url: 'uri?' + parameter_list,
                success: function(data) {               
                    $("#DivDispSessionDetails").html(data);
                },
                async: true,
            }); 
```

# sql-server-2005 - 使用 SQL Server 2005 查询分隔数字和字符数据

> ID：12437110
> 
> 赞同：0
> 
> 时间：2012-09-15T11:52:25.890
> 
> 标签：sql-server-2005

我想在列中分离我的数据，我的数据是

```
column1
1.1.1 Eastern express highway
1.1.2 weater way
2.1 water
2.1.2 land
2.2 sand 
```

我的输出应该是

```
column1      column2       column3
1.1            1           Eastern express highway
1.1            2            weater way
2.1            0            water
2.1            2            land
2.2            0            sand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T10:34:17.017

```
SELECT
  substring(column1,1,3) as column1,
  CASE WHEN PATINDEX('%[0-9]%',RTRIM(SUBSTRING(column1,4,7)))=0 THEN '0'
  ELSE
     SUBSTRING(column1,5,1)
  END as column2,
    --RTRIM(SUBSTRING(column1,7,43))as column3
  CASE WHEN PATINDEX('%[0-9]%',RTRIM(SUBSTRING(column1,4,7)))!=0 
  THEN RTRIM(SUBSTRING(column1,7,43))
  ELSE
     RTRIM(SUBSTRING(column1,5,43))
  END as column3
FROM MyTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:00:02.920

```
SELECT
    SUBSTRING(ProductDescription, 1,
        CHARINDEX(' - ', ProductDescription) - 1
    ) AS Field1,
    SUBSTRING(ProductDescription,
        CHARINDEX(' - ', ProductDescription) + 3,
        CHARINDEX(' - ', ProductDescription,
            CHARINDEX(' - ', ProductDescription) + 3
        ) - (CHARINDEX(' - ', ProductDescription) + 3)
    ) AS Field2,
    SUBSTRING(ProductDescription,
        CHARINDEX(' - ', ProductDescription,
            CHARINDEX(' - ', ProductDescription) + 3) + 3,
        LEN(ProductDescription)
    ) AS Field3,
    ProductDescription
FROM your_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:12:49.683

我不知道您为什么要这样做，但这适用于您的示例。尝试

```
SELECT
  substring(section,1,3) as column1,
  CASE WHEN LEN(section)<5 THEN '0'
  ELSE
     SUBSTRING(section,5,1)
  END as column2
FROM MyTable 
```

# java - 无法通过运行时类编译构建 .class 文件

> ID：12437111
> 
> 赞同：0
> 
> 时间：2012-09-15T11:52:35.537
> 
> 标签：java, runtime.exec

```
public void actionPerformed(ActionEvent e)
    {
        String sout;
        try
          {         
            if(e.getSource()==compile)
            {
            sout=input.getText();
            Runtime rt=Runtime.getRuntime();                            
Process p=rt.exec("javac sout.java",null,new     File("C:/c/compile assign"));
            } 
```

我将类名存储在 String sout（通过 TextField）中，然后调用 sout.java（即 classname.java），但它无法构建类文件。

```
 if(e.getSource()==run)
            {
InputStream is = Runtime.getRuntime().exec("java input.getText()",null,new             File("C:/c/compile assign")).getInputStream();
            //BufferedInputStream b=new BufferedInputStream(is);
         BufferedReader br= new BufferedReader(new InputStreamReader(is));      
            output.setText(br.readLine()+"hello");
            }
        }
        catch(Exception e1)
        {
        e1.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:00:48.630

如果您将类名保留在文本字段`sout`中提供的字符串中，`input`那么您的输出编译命令应该是：

```
Process p=rt.exec("javac " + sout + ".java", null, new File("C:/c/compile assign")); 
```

您的运行命令也应该是：

```
Runtime.getRuntime().exec("java " + input.getText(), null, new File("C:/c/compile assign")).getInputStream(); 
```

`java`在启动命令之前，您可能希望在使用该字段的原始值（例如存在类）之前添加进一步的验证。

# c++ - 在 C++ 中实现虚函数和继承

> ID：12437112
> 
> 赞同：2
> 
> 时间：2012-09-15T11:52:57.233
> 
> 标签：c++, inheritance, header, virtual

所以我有这些头文件：

形状.h：

```
class Shape
{
public:
    Shape();
    virtual ~Shape();
    virtual double getArea();
    virtual void printDraw();
    bool isLegal(Shape shape);
}; 
```

Trig.h：

```
class Trig : public Shape
{
public:
    Trig(Point pointA, Point pointB, Point pointC);
    virtual ~Trig();
    virtual double getArea();//override
    virtual void printDraw();//override
    bool isLegal(Trig trig);//override
}; 
```

但是当我尝试实现 Trig.cpp 时，我得到了错误。我试过 ：

```
Trig::Trig(Point pointA, Point pointB, Point pointC) {..} 
```

我浏览了互联网，但我似乎没有正确地进行继承。[我的代码必须有只包含声明的头文件！...分配的要求！]

我是在 C++ 中同时使用继承和虚函数的新手 [我在 Java 中使用过继承]

关于虚拟功能..它们的实现与普通功能有什么不同吗？[我理解行为的差异]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T12:27:18.530

在*评论*中你解释说

> “我收到错误：未定义对‘Shape::Shape()’的引用”

这意味着您忘记提供该构造函数的实现。

现在，解决了技术问题，看看设计。

前两种方法有两个缺点：（1）虽然它们不应该改变一个没有声明的对象`const`，所以它们不能在一个`const`对象上调用，（2）`get`前缀降低了可读性，更多的类型并且没有通用性优势。我发现`get`前缀在一些罕见的情况下作为消歧工具很有用，但我看到的所有初学者的用法都是不恰当地复制 Java 约定，这在 Java 中有意义，但在 C++ 中没有意义。所以，而不是……

```
virtual double getArea();
virtual void printDraw(); 
```

做

```
virtual double area() const;
virtual void print() const; 
```

然后，方法...

```
bool isLegal(Shape shape); 
```

在很多方面都是错误的……哎呀！但让我们从纯粹的技术开始。

从纯粹的技术角度来看，按值传递参数是不必要的低效，这会导致每次调用的复制操作。而是通过引用传递对象。并将其作为对 , 的引用`const`，以支持`const`对象和右值对象作为参数：

```
bool isLegal(Shape const& shape); 
```

其次，命名：`isLegal`是一个不好的名字，因为大多数 C++ 对象都是合法的。例如，它必须是色情的并且居住在非西方国家，才能成为非法的。而且我这辈子都想不出任何办法让一个对象色情，或者让它驻留在某个特定的地理区域。

所以，

```
bool isValid(Shape const& shape); 
```

接下来，低级设计，没有充分的理由将该非`virtual`方法作为普通成员函数，因为这需要您在对象上调用它。但它需要的所有信息都在普通参数中。我们可以在派生类中看到这种混乱，其中......

```
bool isLegal(Trig trig);//override 
```

根本不是覆盖：从技术上讲，它是函数名称的*重载*，这意味着，只是具有相同名称的不同函数。这里没有虚拟，没有覆盖。而且它不是必需的。

因此，将其`static`设为成员函数，不必在对象上调用它：

```
static bool isValid(Shape const& shape); 
```

最后，更高级别的设计，C++ 构造函数和析构函数的整个机制都在那里，以避免这些方法和检查。

这个想法是你……

*   在每个构造函数中建立一个有效对象。

*   在每个方法中保持对象有效。

那么对象就不能变得无效。这种方法称为**单阶段构造**，并且使其“有效”的对象的属性称为类的**类不变量**。它应该由每个构造函数建立，并由每个方法维护。

这意味着，最终版本，`isValid`函数被***删除***：它没有工作要做，因为该工作（正确地）由构造函数和方法完成。

好的，单阶段构造存在一些技术挑战，特别是如何在基类构造函数中进行派生类特定的初始化。[C++ FAQ](http://www.parashift.com/c++-faq-lite/)涵盖了这一点。阅读常见问题解答通常是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:04:47.687

第一个版本是正确的：

```
Trig::Trig(Point pointA, Point pointB, Point pointC) {..} 
```

它会编译，但不会链接。原因是您*声明*了 的无参数构造函数`Shape`，但您没有*定义*它。或者添加一个定义

```
Shape::Shape() {..} 
```

或者，如果默认构造函数正常，则从 Shape 的标题中删除声明。

# delphi - Delphi + DataSnap：如何调用多个类？

> ID：12437114
> 
> 赞同：3
> 
> 时间：2012-09-15T11:53:03.523
> 
> 标签：delphi, datasnap

伙计们，

有一个关于 Delphi 和 Datasnap 的信息我仍然无法找到或弄清楚......想象一下我想把我所有的智能都放在 Server 层。在这种情况下，当然，我将使用面向对象的概念，创建大量的类，每个类都有自己的方法和属性。由于在每个示例中我看到客户端仅检索有关一个服务器类的信息，我想知道：无论如何，是否有可能使用多个类，或者我是否仅限于一个包含一堆不同方法的类？

你们能明白吗？

谢谢你的帮助，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-19T08:51:17.653

还没有有用的答案，所以我决定给出一个。在给定的大多数示例中都有一个 TWebDataModule 如果没有，您可以在删除 DSServer 组件的地方使用数据模块。在那里你会发现 DSServerClass(1) 负责公开一个类的服务器方法。

所以你可以做的就是将另一个**DSServerClass**放到模块中。现在在 ObjectInsepecor 中转到**属性 -> 服务器**设置默认服务器，该服务器可能名称为 DSServer1（示例中的默认服务器）。转到**事件-> OnGetClass**双击，以便将处理程序分配给相同的处理程序。

现在你可以这样写（你可以看到现有的第一个 DSServerclass1 以供参考）设置`PersistentClass := ServerMethodunit1.user;` Here **user**是方法需要公开的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:01:12.217

DataSnap 服务器向客户端公开多个类是没有问题的。只是看看样品。甚至“基本”示例服务器也公开了三个服务器类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:34:22.920

这个场景的一个有用的设计模式 - 许多业务类，必须通过通信层与“外部”客户端应用程序通信 - 是**[Facade](http://en.wikipedia.org/wiki/Facade_pattern)**。

> 外观是一个对象，它为更大的代码体（例如类库）提供简化的接口。

对于客户端，外观暴露了方法，这些方法反过来调用业务类的实例。

这还有一个优势，即您的业务模型类可以在 API 保持稳定的同时发展。

您还应该考虑**[Data Transfer Objects](http://en.wikipedia.org/wiki/Data_transfer_object)**，这是一种避免暴露内部对象类和数据结构以实现更好封装的设计模式。

# android - android解析JSON字符串错误（截断？）

> ID：12437116
> 
> 赞同：0
> 
> 时间：2012-09-15T11:53:10.670
> 
> 标签：android, json

当我使用长 JSON 字符串（5018 个字符）时，我遇到了以下异常：

```
09-15 19:41:40.821: W/System.err(1551): org.json.JSONException: Value [{/* my long json string...... */
09-15 19:41:40.831: W/System.err(1551):     at org.json.JSON.typeMismatch(JSON.java:111)
09-15 19:41:40.831: W/System.err(1551):     at org.json.JSONObject.<init>(JSONObject.java:158)
09-15 19:41:40.831: W/System.err(1551):     at org.json.JSONObject.<init>(JSONObject.java:171) 
```

我注意到显示的字符串`org.json.JSONException: Value [....]`只有 4052 个字符长（可能是 logcat 的字符限制，我不确定）。

这是我的代码：

```
public DrupalNode getNode() {
    JSONObject drupalJSON;

    Log.d(TAG, "Length: "+drupalReturn.length());
    try {
        Log.d(TAG, "JSON data: "+this.drupalReturn);
        drupalJSON = new JSONObject(this.drupalReturn);
        DrupalNode drupalNode = new DrupalNode();
        drupalNode.title = drupalJSON.getString("title");
        return drupalNode;
    } catch (JSONException e) {
        Log.e(TAG, "JSON decode error");
        e.printStackTrace();
        return null;
    }

} 
```

我已经尝试了> = 2000个字符的JSON字符串没有问题......

是在`JSONObject`截断我的 JSON 字符串吗？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:44:32.003

你能在这里提供你的json数据吗？没有json很难回答你的问题。

错误本身显示空数组，因为您的 json 字符串内容是`commented`.

我猜你的 JSON 格式是`JSONArray`not `JSONObject`。请检查一下。或分享您的 json 文件。

# asp.net - IIS 上的子域

> ID：12437118
> 
> 赞同：0
> 
> 时间：2012-09-15T11:53:20.870
> 
> 标签：asp.net, .net, iis

我的网站看起来像在线商店，每个用户都有他的在线商店作为子域，例如`user1.myprojectdomain.com`

我们需要有关如何管理子域的帮助。我们是否在运行时为 IIS 中的每个用户创建一个虚拟目录/应用程序，或者我们可以做其他事情

我`xyz.com`在我的 iis 中创建了一个网站，并在 windows 中创建了一个条目，`etc/localhost`如下所示

```
xyz.com   127.0.0.1 
```

它工作正常。然后我确实添加了**另一个**条目来路由所有子域，如下所示

```
*.xyz.com   127.0.0.1 
```

现在我正在尝试使用 abc.xyz.com 或任何其他但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T11:57:20.300

1) 确保您的 DNS 设置为指向您的子域。这意味着要确保您的子域的 DNS 中有一条 A 记录并指向相同的 IP。

2) 您必须在 IIS 7 中添加一个名为 subdomain.site.com 的附加网站

站点 > 添加网站站点名称：subdomain.site.com 物理路径：选择子域目录绑定：与site.com 相同的ip 主机名：subdomain.site.com

# php - [list][*][/list] 的 preg_replace

> ID：12437119
> 
> 赞同：2
> 
> 时间：2012-09-15T11:53:29.887
> 
> 标签：php, preg-replace

谁能帮我解决这个问题？

我正在为我的网站使用 BBcode，但在文本编辑器中我发现了一个问题：

**UL**

```
[list]
[*]Lorem Ipsum
[/list] 
```

**奥尔**

```
[list=1]
[*]Lorem Ispum
[/list] 
```

我正在使用这个脚本：

```
$filter = preg_replace("#[[]list[]](.*)[[]/list[]]#","<ul>$1</ul>",$filter);
$filter = preg_replace("#[[]list=([^0-9][]](.*)[[]/list[]]#","<ol start=$1>$2</ul>",$filter);
$filter = preg_replace("#[*](.*)#","<li>$1</li>",$filter); 
```

我遇到了这个脚本的问题 - 它无法使用，因为该脚本`found symbol after [list]`无法执行下一条语句

```
preg_replace("#[[]list[]]  (.*)  [[]/list[]]#","<ul>$1</ul>",$filter);    
[list]
[*]   Lorem Ipsum --- Stuck In Long Space 
[/list] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:47:17.250

猜猜你不再需要它了，但要给出答案：

*   括号是正则表达式中的特殊字符。当您真正的意思是括号时，您必须使用反斜杠对其进行转义。星号（星号）也是如此。
*   `s`您可以通过修饰符解析多行
*   您将需要`U`(ungreedy) 修饰符，否则代码中的多个块将不起作用。不贪心意味着，将在最近的环境中寻找匹配的开始和结束，贪心意味着算法将搜索最长的距离。

我认为我改变了一些事情：

```
$filter = preg_replace("#\[list\](.*)\[/list\]#sU","<ul>$1</ul>",$filter);
$filter = preg_replace("#\[list=([0-9+])\](.*)\[/list\]#sU","<ol start=\"$1\">$2</ul>",$filter);
$filter = preg_replace("#\[\*\](.*)#","<li>$1</li>",$filter); 
```

# asp.net - 如何在 FileUpload Control C# 中添加水印文本

> ID：12437122
> 
> 赞同：2
> 
> 时间：2012-09-15T11:53:56.457
> 
> 标签：asp.net, html, file-upload

我的网站中有一个 FileUpload 控件，现在我需要在其上添加水印文本，但没有取得任何成功。

我尝试了两者`AJAX TextWaterMarkExtender`和`Placeholder`财产，但仍然没有工作。

任何人都可以提供解决方案..？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:01:14.850

这是链接：[使用占位符属性上传文件](http://www.appelsiini.net/projects/filestyle/demo.html)

![上传文件](../Images/df83dac3259910be413af965052c4620.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:44:16.823

尝试使用文件样式 jquery 插件。
[http://www.appelsiini.net/projects/filestyle](http://www.appelsiini.net/projects/filestyle)
在这里您还可以自定义文本框和文件上传按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:40:37.633

我认为你做不到 Jigar Pandaya 在你的解释中是正确的。我看到了三种可能性

1 - 使用 JS 插件（易于操作并解决您的问题） 2 - 使用第三方控件（易于操作并解决您的问题）。3 - 开发您的上传控制（简单，但需要付出更多努力）。

在我看来，选项 1 和 2 更好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T11:26:36.410

那么 File-upload 控件或任何 HTML File Upload 控件总是很难修改由于浏览器努力将攻击面最小化，我们通常用于样式表单控件的大多数 CSS 属性都没有任何效果。

***提供水印是不可能的***，因为你不能在那里提供文字。（再次使用现代浏览器对浏览器控制的安全性进行处理）

并且你认为包含 ajax 的水印内容不会应用在 ASP:UploadCONtrol 上，

但是，根据您的问题，我了解到您希望在用户上传任何内容时为他们提供更好的可视化效果。

有两种方法，一种是使用自定义 CSS 属性并将其应用于控件。

```
<style id="cssStyle" type="text/css" media="all">
.CS
{
background-color:#AB00CC;
color: Red;
border: 5px solid #AB00CC;
font: Verdana 10px;
padding: 1px 4px;
font-family: Palatino Linotype, Arial, Helvetica, sans-serif;

}
</style>

<asp:FileUpload ID="FileUpload1" CssClass="CS" runat="server" />
Or
<input id="readFile" type="file" class="CS" runat="server" /> 
```

[这里给出了](http://the-echoplex.net/demos/upload-file/)另一个很好的例子；[你可以检查这个喜欢](http://the-echoplex.net/log/how-to-style-a-html-file-upload-control-using-css-and-javascript)做同样的事情。上面将允许您生成类似于给定图像的东西。![在此处输入图像描述](../Images/2d998f3fd4fe4d70aaf8e6f5f584fafb.png)

# visual-studio - 在 Windows 窗体的右上角创建一个帮助按钮

> ID：12437124
> 
> 赞同：4
> 
> 时间：2012-09-15T11:54:18.123
> 
> 标签：visual-studio

我想知道如何创建这个“？” Visual Studio 中的按钮。我不知道在哪里可以找到它，也不知道它叫什么。

图片：

![截屏](../Images/1057775236aec2d583e31d00e3359a80.png)

谁能把我引向正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T12:02:27.110

它被称为 a `HelpButton`，一旦你设置它就会可见：

*   [`Form.HelpButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.helpbutton.aspx)到_`true`
*   [`MaximizeBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.maximizebox.aspx)到`false`和
*   [`MinimizeBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.minimizebox.aspx)到`false`.

单击此按钮时，它会引发[`Form.HelpButtonClicked`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.helpbuttonclicked.aspx)事件。

**编辑：**对于 WPF，请参见[此处](https://stackoverflow.com/q/1009983/162671)

# python - 让 hello world 在 pymacs 中工作

> ID：12437126
> 
> 赞同：2
> 
> 时间：2012-09-15T11:54:19.843
> 
> 标签：python, emacs, elisp, pymacs

上下文：我一直在为 python 使用ropemacs，并安装了pyemacs并开始工作。我想开始用 python 编程 emacs（我有一些用 elisp 编程 emacs 的经验）。我从 hello world 示例开始。

我使用文档中的示例创建了 ~/.emacs.d/ [hello.py](http://pymacs.progiciels-bpi.ca/pymacs.html#user-interaction)：

```
from Pymacs import lisp

def hello_world():
    lisp.insert("Hello from Python!")
hello_world.interaction = '' 
```

然后我试图在我的初始化文件中加载 hello.py：

```
(eval-after-load "pymacs"                             
  '(add-to-list 'pymacs-load-path "~/.emacs.d/"))
(pymacs-load "hello") ;;this line fails                            
(require 'hello) 
```

我收到以下错误。我究竟做错了什么？

```
Debugger entered--Lisp error: (error "Pymacs loading hello...failed")          
  signal(error ("Pymacs loading hello...failed"))                              
  pymacs-report-error("Pymacs loading %s...failed" "hello")                    
  (cond (lisp-code (let ((result (eval lisp-code))) (message "Pymacs loading %$
  (let ((lisp-code (pymacs-call "pymacs_load_helper" module prefix))) (cond (l$
  pymacs-load("hello")                                                         
  eval((pymacs-load "hello") nil)                                              
  eval-last-sexp-1(nil)                                                        
  eval-last-sexp(nil) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T21:17:14.663

我可能有点迟到了，但原因是你应该确保在将模块添加到 pymacs-load-path 后重新加载 pymacs 解释器，最简单的方法是杀死*Pymacs*缓冲区，它应该可以工作后

# redis - 在redis中跟随fifo

> ID：12437129
> 
> 赞同：0
> 
> 时间：2012-09-15T11:54:41.550
> 
> 标签：redis, relationships, fifo

我正在尝试在 Redis 中实现一个跟随系统，但我不确定如何去做，因为我也需要某种队列系统。这就是我的想法：

用户 A、B 和 C 正在关注用户 X，所以为了让用户 X 检查他的关注者，我正在考虑使用这样的列表：

```
X [A, B, C] 
```

您认为这将是一个可行的解决方案吗？

如果是这样，我仍然有“队列”问题，说一个人只能关注一个，如果用户 A 选择关注用户 Y，则应从列表 X 中删除项目“A”。

这听起来可能令人困惑：我不能很好地解释，因为我不是本地人。同样重要的是要注意每秒会发生大量这些操作，那么 Redis 是否是最好的选择？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:11:14.833

我不明白你需要什么队列？您可以使用以下结构：

**X:followers** - 是一组包含关注者 ID

**X:follows** - 是一个包含该用户关注的用户 ID 的字符串

当 X 跟随 Y 时，您只需执行以下操作：

```
srem $(X:follows) X
sadd Y:followers X
set X:follows Y 
```

# php - 在动态 PHP 网站中使用 .htaccess 进行 301 重定向

> ID：12437130
> 
> 赞同：0
> 
> 时间：2012-09-15T11:54:46.980
> 
> 标签：php, apache, mod-rewrite, seo

我想问你一个关于 301 URL 重定向的问题。所以，我有一个网站，它以前的 URL 曾经是：

`http://www.sample.com/tutorials.php?name=sample`

但是，现在是：

`http://www.sample.com/tutorials/programming/sample.php`

因此，您可以得出结论，新 URL 的语法是这样的：

`http://www.sample.com/tutorials/(name of the category)/(value of the variable).php`

我一直在玩弄 301 重定向，但是当我使用此代码时出现 500 内部服务器错误：

```
RewriteEngine On
RewriteCond %{COND ^tutorials.php?name=sample$ HTTP/1.1} ^[A-Z]{3,9}\ /tutorials\.php\?name=([^&\ ]+)
RewriteRule ^ /tutorials/programming/%1.php [L,R=301] 
```

我还尝试创建自己的 301 重定向代码，它没有给我 500 内部服务器错误，但我不知道它是否有效（我无法在本地主机上测试它，因为搜索引擎不索引本地主机）。这里是 ：

```
RewriteEngine On
Redirect 301 /tutorials.php?name=$1 http://www.sample.com/tutorials/programming/(.+)\.php 
```

所以，如果我上面的代码好于好，但如果不是，有人可以解释（请尽可能缓慢和详细地）如何将我的旧网站 301 重定向到我的新网站。正如我所提到的，我使用动态网站，并且正在使用 .htaccess 文件 (mod_rewrite) 进行重写。

我试图尽可能详细。如果您需要更多详细信息，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:06:14.630

您必须将旧链接重定向到新域。这就是你可以做到的。

**使用 htaccess**：

使用以下代码创建一个 .htaccess 文件，它将确保您旧域的所有目录和页面都将正确重定向到您的新域。.htaccess 文件需要放在你旧网站的根目录下（即你的索引文件所在的同一个目录）

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.newdomain.com/$1 [R=301,L] 
```

除了重定向之外，我建议您联系每个反向链接站点以修改其反向链接以指向您的新网站。

**注意：**这种 .htaccess 重定向方法仅适用于启用了 Apache Mod-Rewrite 模块的 Linux 服务器。

更多方法请参考[这里](http://www.webconfs.com/how-to-redirect-a-webpage.php/)

**编辑：**

使用以下代码创建一个 .htaccess 文件，它将确保所有进入 domain.com 的请求都将被重定向到 www.domain.com .htaccess 文件需要放在您旧网站的根目录中（即放置索引文件的同一目录）

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^domain.com [nc]
rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc] 
```

# ember.js - Ember 路由器 - 带有嵌套动态段的后退按钮不起作用

> ID：12437133
> 
> 赞同：3
> 
> 时间：2012-09-15T11:55:21.050
> 
> 标签：ember.js

我在使用 Ember 路由器和嵌套动态段时遇到问题。该应用程序在导航到嵌套路由时运行良好，但尽管正确更新了 url，但后退按钮仍然失败。所以我可以导航到“sectionB/batch/3/artwork/1”，一切正常，但是当后退按钮带你到“sectionB/batch/3”时，没有任何更新，艺术品视图仍然存在。

这是应用程序的 jsfiddle -

[http://jsfiddle.net/alosea/xYgeg/](http://jsfiddle.net/aloshea/xYgeg/)

如果我直接在浏览器中输入 url 'sectionB/batch/3'，反序列化功能可以正常工作，所以我觉得这非常接近工作。有没有人有类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:09:47.893

通过将批处理的动态段移动到“显示”路线中来修复。出于某种原因，您在艺术品内部时会从 url 中丢失批次 ID，但历史记录按预期工作，因此这不是问题。

这里的例子：http: [//jsfiddle.net/alosea/Yb8cn/](http://jsfiddle.net/aloshea/Yb8cn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:18:48.917

尝试`location: 'hash'`在路由器中设置属性，如下所示：

```
App.Router = Em.Router.extend({
  location: 'hash',
  //your code 
```

}

# java - GUI 事件未一致触发

> ID：12437137
> 
> 赞同：0
> 
> 时间：2012-09-15T11:56:09.230
> 
> 标签：java, events, user-interface, audio, boolean

我有一个小程序来录制和播放 .wav 文件。在 GUI 类中，“停止”按钮的代码如下：

```
private AudioCapture audCap = new AudioCapture();

stopBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            captureBtn.setEnabled(true);
            stopBtn.setEnabled(false);
            playBtn.setEnabled(true);
            audCap.stopCapture = true; // this doesn't work
            audCap.stopPlayback = true; // this does
        }
    } 
```

在 AudioCapture() 类中，我有这个用于播放的代码，当单击停止按钮时它会正确停止：

```
class PlayThread extends Thread {
    byte tempBuffer[] = new byte[10000];

    public void run() {

        stopPlayback = false;

        try {
            sourceDataLine.open(audioFormat);
            sourceDataLine.start();

            int cnt;
            while ((cnt = audioInputStream.read(tempBuffer, 0,
                    tempBuffer.length)) != -1 && stopPlayback == false) {
                if (cnt > 0) {
                    sourceDataLine.write(tempBuffer, 0, cnt);
                }
            }
            sourceDataLine.drain();
            sourceDataLine.close();

        } catch (Exception e) {
            e.printStackTrace();
            System.exit(0);
        }
    }
} 
```

我也有这个用于记录/捕获的代码，当单击停止按钮时它不会停止：

```
class CaptureThread extends Thread {
    // An arbitrary-size temporary holding buffer
    byte tempBuffer[] = new byte[10000];

    public void run() {

        stopCapture = false;
        // record as wave
        AudioFileFormat.Type fileType = AudioFileFormat.Type.WAVE;
        // takes user input file name and appends filetype
        audioFile = new File(wavName + ".wav");

        try {
            while (!stopCapture) {

                int cnt = targetDataLine.read(tempBuffer, 0,
                        tempBuffer.length);
                if (cnt > 0) {
                    AudioSystem.write(new AudioInputStream(targetDataLine),
                            fileType, audioFile);
                }
            }
            targetDataLine.stop();
            targetDataLine.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

stopCature 和 stopPlayback 是 AudioCapture() 类中的实例变量。

我正在使用 Eclipse 并尝试在“while (!stopCapture)”处设置一个断点，但它似乎永远不会超越这一点。有谁知道上面的代码中是否有任何内容会导致第一种方法按预期运行，而第二种方法不能按预期运行？

-编辑-我试图将程序的缩减版本放入 SSCE，但它仍然运行到几百行：

```
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.Mixer;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.TargetDataLine;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class audioTest extends JFrame {

private static final long serialVersionUID = 1L;
AudioCapture audCap = new AudioCapture();

public static void main(String[] args) {
    new audioTest();
}

public audioTest() {

    layoutTransporButtons();
    getContentPane().setLayout(new FlowLayout());
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(350, 100);
    setVisible(true);
}

public void layoutTransporButtons() {

    final JPanel guiButtonPanel = new JPanel();
    final JButton captureBtn = new JButton("Record");
    final JButton stopBtn = new JButton("Stop");
    final JButton playBtn = new JButton("Playback");
    guiButtonPanel.setLayout(new GridLayout());
    this.add(guiButtonPanel);
    captureBtn.setEnabled(true);
    stopBtn.setEnabled(false);
    playBtn.setEnabled(true);

    // Register anonymous listeners
    captureBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            captureBtn.setEnabled(false);
            stopBtn.setEnabled(true);
            playBtn.setEnabled(false);
            // Capture input data from the microphone
            audCap.captureAudio();
        }
    });
    guiButtonPanel.add(captureBtn);

    stopBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            captureBtn.setEnabled(true);
            stopBtn.setEnabled(false);
            playBtn.setEnabled(true);
            audCap.stopRecordAndPlayback = true;
        }
    });
    guiButtonPanel.add(stopBtn);

    playBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            stopBtn.setEnabled(true);
            audCap.playAudio();
        }
    });
    guiButtonPanel.add(playBtn);
}

class AudioCapture {

    volatile boolean stopRecordAndPlayback = false;
    AudioFormat audioFormat;
    TargetDataLine targetDataLine;
    AudioInputStream audioInputStream;
    SourceDataLine sourceDataLine;
    private String wavName;
    private File audioFile;
    /**
     *  capture audio input from microphone and save as .wav file
     */
    public void captureAudio() {

        wavName = JOptionPane.showInputDialog(null,
                "enter name of file to be recorded:");
        try {
            Mixer.Info[] mixerInfo = AudioSystem.getMixerInfo();
            // Select an available mixer
            Mixer mixer = AudioSystem.getMixer(mixerInfo[1]);
            // Get everything set up for capture
            audioFormat = getAudioFormat();
            DataLine.Info dataLineInfo = new DataLine.Info(
                    TargetDataLine.class, audioFormat);
            // Get a TargetDataLine on the selected mixer.
            targetDataLine = (TargetDataLine) mixer.getLine(dataLineInfo);
            // Prepare the line for use.
            targetDataLine.open(audioFormat);
            targetDataLine.start();
            // Create a thread to capture the microphone
            Thread captureThread = new CaptureThread();
            captureThread.start();
        } catch (Exception e) {
            System.out.println(e);
            System.exit(0);
        }
    }

    /**
     *  This method plays back the audio data that has
     *  been chosen by the user
     */
    public void playAudio() {
        // add file chooser
        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(audioFile);
        int returnVal = chooser.showOpenDialog(chooser);
        // retrieve chosen file
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            // create the file
            audioFile = chooser.getSelectedFile();
        }
        // play chosen file
        try {
            audioInputStream = AudioSystem.getAudioInputStream(audioFile);
            audioFormat = audioInputStream.getFormat();
            DataLine.Info dataLineInfo = new DataLine.Info(
                    SourceDataLine.class, audioFormat);
            sourceDataLine = (SourceDataLine) AudioSystem
                    .getLine(dataLineInfo);
            // Create a thread to play back the data
            new PlayThread().start();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(0);
        }
    }
    /**
     *  This method creates and returns an AudioFormat object
     */
    private AudioFormat getAudioFormat() {
        float sampleRate = 44100.0F;
        // 8000,11025,16000,22050,44100
        int sampleSizeInBits = 16;
        // 8,16
        int channels = 1;
        // 1,2
        boolean signed = true;
        // true,false
        boolean bigEndian = false;
        // true,false
        return new AudioFormat(sampleRate, sampleSizeInBits, channels,
                signed, bigEndian);
    }

    /**
     *  Inner class to capture data from microphone
     */
    class CaptureThread extends Thread {
        // An arbitrary-size temporary holding buffer
        byte tempBuffer[] = new byte[10000];

        public void run() {
            // reset stopCapture to false
            stopRecordAndPlayback = false;
            // record as wave
            AudioFileFormat.Type fileType = AudioFileFormat.Type.WAVE;
            // take user input file name and append file type
            audioFile = new File(wavName + ".wav");

            try {
                targetDataLine.open(audioFormat);
                targetDataLine.start();
                while (!stopRecordAndPlayback) {
                    AudioSystem.write(new AudioInputStream(targetDataLine),
                            fileType, audioFile);
                }
                targetDataLine.stop();
                targetDataLine.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
    /**
     *  Inner class to play back the data
     */
    class PlayThread extends Thread {
        byte tempBuffer[] = new byte[10000];

        public void run() {
            // reset stop button
            stopRecordAndPlayback = false;

            try {
                sourceDataLine.open(audioFormat);
                sourceDataLine.start();
                int cnt;
                while ((cnt = audioInputStream.read(tempBuffer, 0,
                        tempBuffer.length)) != -1
                        && stopRecordAndPlayback == false) {
                    if (cnt > 0) {
                        sourceDataLine.write(tempBuffer, 0, cnt);
                    }
                }
                sourceDataLine.drain();
                sourceDataLine.close();
            } catch (Exception e) {
                e.printStackTrace();
                System.exit(0);
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:00:41.417

您没有提供所有需要的信息，但很可能的原因是程序中的数据竞争。

由于您在不同的线程中运行事物，因此您需要使用某种形式的跨线程同步，以确保您在一个线程中所做的更改在另一个线程中可见。

通常，在您的情况下，声明布尔变量 volatile 就足够了。

**编辑**

一种可能性是您的 while 循环中的条件没有像您想象的那样经常评估（如果有的话） - 您可以添加一些日志记录以查看发生了什么：

```
stopBtn.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        //your code here
        System.out.println("in actionPerformed: " + stopCatpure);
    }
}

class CaptureThread extends Thread {
    //same code
            while (!stopCapture) {
                System.out.println("in while: " + stopCapture);
                //rest of your code
            }
} 
```

# iphone - 如果不考虑新的 iPhone 5 分辨率，Apple 会拒绝新应用程序吗？

> ID：12437138
> 
> 赞同：12
> 
> 时间：2012-09-15T11:56:10.587
> 
> 标签：iphone, ios, iphone-5

我们都知道新 iPhone 5 屏幕分辨率的提高。另一方面，新 iPhone 5 需要一段时间才能在市场上流行起来。如果我有一个应用程序要提交到 Apple [App Store](http://en.wikipedia.org/wiki/App_Store_%28iOS%29)，而我没有考虑 iPhone 5 的新分辨率，Apple 会接受吗？

我并不是说我永远不会考虑新的分辨率，但我的意思是，由于我在应用程序上工作了很长时间，而且新 iPhone 不会很快普及，我可能现在提交应用程序并在未来几个月的晚些时候提交更新，以考虑新的决议。

* * *

### 更新

我的应用程序获得了 Apple 的批准。

我想通知您，我在 iPhone 5 发布后提交的应用程序虽然没有任何 iPhone 5 分辨率考虑因素，但已被 Apple 接受，因此以下答案是 100% 正确的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T11:57:41.210

### 更新

自 2013 年 5 月起，如果您提交新应用程序或向现有应用程序发送更新，如果您的应用程序不是为 iPhone 5 上的新分辨率设计的，那么您的应用程序*将被拒绝。*

虽然我的旧答案（如下）解决了当时提出的问题，但 Apple 现在已经修改了他们的 App Store 提交规则，强制支持 Retina 显示设备和 4 英寸 iPhone 5 显示器。从[3 月 21 日的公告](https://developer.apple.com/news/index.php?id=3212013b)：

> 从 5 月 1 日开始，必须为配备 Retina 显示屏的 iOS 设备构建提交到 App Store 的新应用程序和应用程序更新，并且 iPhone 应用程序还必须支持 iPhone 5 上的 4 英寸显示屏。通过查看[iOS 人机界面指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TranslateApp/TranslateApp.html#//apple_ref/doc/uid/TP40006556-CH10-SW8)了解如何准备应用程序.

如果您还没有为 Retina 显示屏以及 iPhone 5 上的新 4 英寸显示屏准备 iPhone 应用程序，那么现在是这样做的最佳时机。如果您在布局视图时遵循了标准做法，那么更新它们应该不会太难。上面的链接和本网站的其他地方充分介绍了这些步骤：

*   [iOS 6 应用程序 - 如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)
*   [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/steps-required-to-migrate-applications-for-iphone-5-screen-resolution)

请注意，如果您不打算更新应用程序，它不会完全停止在 iPhone 5 上运行；它将继续以旧分辨率运行信箱，因为它已经这样做了。该限制仅适用于新的提交和更新。

* * *

### 旧答案

您的申请不会被拒绝。它将被简单地视为尚未准备好 iPhone 5 的任何其他应用程序，并且它将在 iPhone 5 屏幕中以通常的 640x960 分辨率（在顶部和底部带有黑条）运行，没有任何问题。

您可以根据需要准备和提交新屏幕分辨率的更新。

# xcode - Xcode 模板的版权名称错误，从哪里获取？

> ID：12437140
> 
> 赞同：2
> 
> 时间：2012-09-15T11:56:28.917
> 
> 标签：xcode, xcode4

前段时间我犯了一个错误，输入我的名字为“Martin itt”，这是错误的，所以我更新了我的登录等，一切似乎都很好..但是当我创建一个新的 xcode 项目时，我的评论标题是错误的。

如果您查看下面的示例，则创建者是完美的，并且它具有我的正确名称。但是，如果您注意到版权，那么您会在应该是“Pitt”的地方看到“Itt”。

这个值是从哪里获取的？

我已经编辑了我的用户名，现在它读起来很完美..

有任何想法吗？

```
//
//  ViewController.h
//  BasicInteraction
//
//  Created by Martin Pitt on 9/15/12.
//  Copyright (c) 2012 Martin Itt. All rights reserved. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:00:56.447

您可以通过更改项目设置中的组织来设置版权信息：

![在此处输入图像描述](../Images/b0d17ee1f8aacbcb5193d9a37662445c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:33:45.183

如果项目上没有设置任何内容，则默认名称和公司信息来自您在通讯录/联系人应用程序中的个人联系人卡片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:19:56.440

jrturton 上面所说的是不正确的，我不能强调看到人们在没有尝试的情况下发布这个让我非常恼火。它不会从您的联系人卡片中提取。它从特定的模板目录中提取......它从您的计算机用户名中提取。更改您的帐户用户名，您会明白我的意思。请参考此目录和链接以获取有关自定义模板的信息：/Applications/Xcode.app/Contents/Developer/Library/XCode/Templates [如何在 Xcode 4.5 中设置 ___COPYRIGHT___](https://stackoverflow.com/questions/12588846/how-to-set-copyright-in-xcode-4-5)

# c# - Rad GridView 中的手动编辑模板

> ID：12437141
> 
> 赞同：1
> 
> 时间：2012-09-15T11:56:29.403
> 
> 标签：c#, asp.net, telerik

我遇到了 Telerik rad gridview 的一个问题，下图是我的第一个屏幕，在该屏幕上，当我单击链接按钮时，`T`编辑表单将打开，但我不知道如何打开该编辑模板，请查看图像中的确切输出.

![](../Images/c5d34384e26f61a6dd656ebb9f4e3b73.png)
![](../Images/0f1d9fb9fd39c975ad94ff0756d994db.png)

# jquery - 单击时无法更改元素类

> ID：12437147
> 
> 赞同：3
> 
> 时间：2012-09-15T11:57:31.050
> 
> 标签：jquery

请告诉我为什么`AudioVol+..(ex.1,2,3 and other)` 在单击具有类名的元素时，带有 id 的 div 不会更改类名`option_audio_player_mute`？

还告诉我，我可以减少/重构我的代码吗？

```
$('.option_audio_player_mute').live('click', function () {
    var idn = this.id.split('+')[1];
    var vol1 = $('#AudioVol1+' + idn);
    if ($(this).hasClass('audio_mute')) {
        vol1.removeClass('audio_vol_not_active').addClass('audio_vol_active');
    } else if ($(this).hasClass('audio_not_mute')) {
        vol1.removeClass('audio_vol_active').addClass('audio_vol_not_active');
    }
}); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:06:23.820

该`+`符号在 CSS（和 jQuery）选择器中具有特殊含义：它用于指定[相邻的兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。

尝试`+`使用两个反斜杠转义 id 选择器中的符号：

```
var vol1 = $("#AudioVol1\\+" + idn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:13:14.000

您可以使用[.toggleClass](http://api.jquery.com/toggleClass/)，并使用`.on`而不是`.live`.

```
$(document).on('click', '.option_audio_player_mute', function() {
    var vol1 = $("#AudioVol1\\+" + this.id.split('+')[1]), 
        $this = $(this);
    vol1.toggleClass('audio_vol_active', $this.hasClass('audio_mute'))
        .toggleClass('audio_vol_not_active', $this.hasClass('audio_not_mute'));
}); 
```

# xcode - NSDistributedNotificationCenter 的可用通知

> ID：12437149
> 
> 赞同：3
> 
> 时间：2012-09-15T11:57:42.270
> 
> 标签：xcode, macos, cocoa, safari, nsnotification

我正在寻找存在于 Mac 上的分布式通知列表，例如 iTunes com.apple.iTunes.playerInfo，但我找不到任何东西。我想知道 Safari 或 QuickTime 等其他应用程序是否有此类通知？如果它们存在，它们的通知名称是什么？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T08:26:31.317

通过添加观察者并将其名称设置为 nil，它将显示所有通知。

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(observerMethod:) name:nil object:nil]; 
```

我没发现什么特别的。

# iphone - 当我想使用我的 Web 服务时发生运行时错误

> ID：12437151
> 
> 赞同：0
> 
> 时间：2012-09-15T11:58:10.910
> 
> 标签：iphone, objective-c, xcode, web-services, ios4

我在我的网站服务器上上传了一个 Web 服务`www.example.com/webservice/SampleService.asmx`，我想连接到它的方法是`GetAllUserInfo`，我使用下面的代码来使用这个 Web 服务但发生运行时错误，谁能帮我使用这个 Web 服务

*   我测试了这个 Web 服务并在 Visual Studio 上正常工作

> ```
> NSString *soapMsg =[NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
> "<soap:Envelope xmlns:xsi="
>  "\"http://www.w3.org/2001/XMLSchema-instance\" "  
>  "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" "
>  "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"   
>  "<soap:Body>"     
>  "<GetAllUserInfo xmlns=\"http://www.example.com/\">" 
>  "</GetAllUserInfo>"   
>  "</soap:Body>"    
>  "</soap:Envelope>"];
> 
> NSURL *url = [NSURL URLWithString:@"http://www.example.com/SampleService.asmx"];              
> 
> NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
> 
> NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];                  
> [req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];               
> [req addValue:@"http://www.example.com/GetAllUserInfo" forHTTPHeaderField:@"SOAPAction"];
> 
> [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];          
> [req setHTTPMethod:@"POST"];                
> [req setHTTPBody:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]]; 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:05:41.007

您可以通过以下方式获取完整的错误消息：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"data: %.*s", [data length], [data bytes]);
} 
```

# mysql - 将数据从 PostgreSQL 复制到 MySQL

> ID：12437152
> 
> 赞同：3
> 
> 时间：2012-09-15T11:58:16.277
> 
> 标签：mysql, postgresql, sql-convert

我目前有一个 PostgreSQL 数据库，因为我们使用的软件之一只支持这个特定的数据库引擎。然后我有一个查询，它将应用程序中的数据汇总并拆分为更有用的格式。

在我的 MySQL 数据库中，我有一个表，其中包含与上述查询的*输出相同的模式。*

我想要开发的是一个每小时的`cron`工作，它将对 PostgreSQL 数据库运行查询，然后将结果插入 MySQL 数据库。在一个小时内，我预计不会看到超过 10,000 行需要传输的新行（这是一个延伸）。

这两个数据库都位于不同的物理服务器上，大洲彼此分开。MySQL 实例在 Amazon RDS 上运行 - 因此我们对机器本身没有太多控制权。PostgreSQL 实例在我们其中一台服务器上的虚拟机上运行，​​让我们可以完全控制。

不幸的是，重复是必要的，因为 PostgreSQL 数据库仅充当信息的收集器，而 MySQL 数据库上运行着一个需要数据的应用程序。为简单起见，我们希望每小时从 PostgreSQL 中进行移动/合并和删除以保持干净。

需要明确的是 - 我是网络/系统管理员 - 不是 DBA。我并不真正了解将一种格式转换为另一种格式所需的所有复杂性。我所知道的是，正在传输的数据由 1x `VARCHAR`、 1x`DATETIME`和 6x`BIGINT`列组成。

我对一种方法的最接近的猜测是使用某种脚本语言进行查询，将结果转换为内部数据结构，然后再次将其拆分回 MySQL。

这样做时，在编写脚本时我应该注意哪些特别好的或坏的做法？或者 - 我应该查看哪些可能对进行这种转换有用的文档？我发现许多调度作业看起来非常易于管理且记录良好，但该脚本的持续性质（每小时运行）似乎不太常见和/或记录较少。

接受任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:42:22.597

## 两端使用相同的数据库系统并使用复制

如果您的远程端也是 PostgreSQL，您可以使用带[热备份的](http://www.postgresql.org/docs/current/static/hot-standby.html)[流式复制](http://www.postgresql.org/docs/current/static/warm-standby.html#STREAMING-REPLICATION)，以透明且自动地保持远程端与本地同步。

如果本地端和远程端都是 MySQL，你可以使用 MySQL 的各种复制功能（如 binlog 复制）做类似的事情。

## 使用外部脚本同步

使用外部脚本没有任何问题。事实上，即使您使用 DBI-Link 或类似工具（见下文），您也可能必须使用`psql`cron 作业中的外部脚本（或 ）来启动复制，除非您打算使用[PgAgent](http://www.pgadmin.org/docs/1.4/pgagent.html)来执行此操作。

[要么在由触发器过程](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)维护的队列表中累积行，要么确保您可以编写始终可靠地仅选择新行的查询。然后连接到目标数据库和`INSERT`新行。

如果要复制的行太大而无法舒适地放入内存中，您可以使用[游标并使用](http://www.postgresql.org/docs/current/static/sql-declare.html)[FETCH](http://www.postgresql.org/docs/current/static/sql-fetch.html)读取行，如果要复制的行太大而无法舒适地放入内存中，这将很有帮助。

我会按以下顺序完成工作：

*   连接到 PostgreSQL
*   连接到 MySQL
*   开始一个 PostgreSQL 事务
*   开始一个 MySQL 事务。如果你的 MySQL 正在使用 MyISAM，现在就去修复它。
*   从 PostgreSQL 读取行，可能通过游标或使用`DELETE FROM queue_table RETURNING *`
*   将它们插入 MySQL
*   `DELETE`PostgreSQL 中队列表中的任何行（如果您还没有的话）。
*   `COMMIT`MySQL 事务。
*   如果 MySQL`COMMIT`成功，`COMMIT`则 PostgreSQL 事务。如果失败，`ROLLBACK`则 PostgreSQL 事务并再次尝试整个事情。

PostgreSQL`COMMIT`不太可能失败，因为它是一个本地数据库，但如果您需要完美的可靠性，您可以在 PostgreSQL 端使用[两阶段提交，您可以：](http://www.postgresql.org/docs/current/static/sql-prepare-transaction.html)

*   `PREPARE TRANSACTION`在 PostgreSQL 中
*   `COMMIT`在 MySQL 中
*   然后取决于 MySQL 提交的结果`COMMIT PREPARED`或者在 PostgreSQL 中。`ROLLBACK PREPARED`

这对于您的需求来说可能太复杂了，但这是完全确定更改发生在两个数据库上的唯一方法，或者两者都不会发生，而不仅仅是一个。

顺便说一句，说真的，如果您的 MySQL 使用[MyISAM](http://en.wikipedia.org/wiki/MyISAM)表存储，您可能应该对此进行补救。它容易在崩溃时丢失数据，并且无法进行事务更新。转换为[InnoDB](http://en.wikipedia.org/wiki/InnoDB)。

## 在 PostgreSQL 中使用 DBI-Link

也许是因为我对 PostgreSQL 很满意，但我会使用一个使用[DBI-link](http://dbi-link.projects.postgresql.org/) via的 PostgreSQL 函数[`PL/Perlu`](http://www.postgresql.org/docs/current/static/plperl.html)来完成这项工作。

当应该进行复制时，我会运行一个`PL/PgSQL`使用`PL/Perl`DBI-Link 连接到 MySQL 数据库并将数据插入到队列表中的过程。

DBI-Link 的例子很多，这里不再赘述。这是一个常见的用例。

## 使用触发器对更改进行排队，并使用 DBI-link 进行同步

如果您只想复制新行并且您的表是仅追加的，您可以编写一个[触发器过程](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)，将所有新`INSERT`编辑的行追加到一个与主表具有相同定义的单独队列表中。当您想要同步时，您的同步过程可以在单个事务`LOCK TABLE the_queue_table IN EXCLUSIVE MODE;`中复制数据，然后`DELETE FROM the_queue_table;`。这保证不会丢失任何行，尽管它仅适用于`INSERT`-only 表。在目标表上处理`UPDATE`和`DELETE`是可能的，但要复杂得多。

## 使用外部数据包装器将 MySQL 添加到 PostgreSQL

或者，对于 PostgreSQL 9.1 及更高版本，我可能会考虑使用[MySQL Foreign Data Wrapper](http://wiki.postgresql.org/wiki/Foreign_data_wrappers#mysql_fdw)、[ODBC FDW](http://wiki.postgresql.org/wiki/Foreign_data_wrappers#odbc_fdw)或[JDBC FDW](http://wiki.postgresql.org/wiki/Foreign_data_wrappers#jdbc_fdw)来允许 PostgreSQL 像查看本地表一样查看远程 MySQL 表。然后我可以使用[可写的 CTE](http://www.postgresql.org/docs/current/static/queries-with.html)来复制数据。

```
WITH moved_rows AS (
    DELETE FROM queue_table RETURNING *
)
INSERT INTO mysql_table
SELECT * FROM moved_rows; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:29:17.073

简而言之，您有两种情况：

1) 使目的地将数据从源中提取到自己的结构中

2）使源将数据从其结构中推送到目标

我宁愿尝试第二个，环顾四周，找到一种方法来创建 postgresql 触发器或一些特殊的“虚拟”表，或者可能是 pl/pgsql 函数 - 然后你将能够执行该过程而不是外部脚本从 cron 或可能从 postgres 内部执行一些查询，有一些操作调度的可能性。我会选择第二种情况，因为 postgres 更加灵活，并且可以通过一些特殊的 DIY 方式来操作数据——您将拥有更多的可能性。

外部脚本可能不是一个好的解决方案，例如因为您需要特别小心地处理二进制数据，或者将日期和时间从 DATE 转换为 VARCHAR，然后再转换为 DATE。在外部脚本中，各种文本存储数据可能只是字符串，您也需要引用它。

# cakephp - CakePHP 查找功能

> ID：12437153
> 
> 赞同：2
> 
> 时间：2012-09-15T11:58:16.953
> 
> 标签：cakephp, cakephp-2.1, cakephp-2.2

我正在使用以下语句。

```
$users = $this->User->find('all'); 
```

但在数据库中只有 174 行。但查询返回 200 行。

当我输出内容时，我看到很多行都重复了。

知道为什么在 cakephp 中出现这种行为吗？

![在此处输入图像描述](../Images/94a19e00f4480fe4a22b78f997ec2616.png)

**结构**

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `first_name` varchar(255) NOT NULL,
  `last_name` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `username` varchar(255) NOT NULL,
  `password` varchar(40) NOT NULL,
  `display_photo` varchar(255) DEFAULT NULL,
  `subscription_plan_id` int(11) unsigned NOT NULL,
  `company_id` int(11) NOT NULL,
  `status` tinyint(2) NOT NULL,
  `created` datetime NOT NULL,
  `modified` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=177 ; 
```

通过尝试使用此语句进行调试

```
echo $users = $this->User->find('count'); 
```

我自己得到200。

型号： http: [//pastebin.com/p4bFPiUz](http://pastebin.com/p4bFPiUz)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:38:46.010

您正在运行的查询与 CakePHP 将实际执行的查询几乎不匹配。CakePHP 还将执行所有必需的连接以获取相关数据。因此，这并不是您正在做的正确比较。

您的某些关系可能会返回双重结果，例如`User -> CompanyA`，但也可能存在一个`User -> CompanyB`关系，这将为 1 个单个用户触发 2 个结果行。

要查看 Cake 实际执行的查询，请在数据源上使用 getLog 方法，例如：

```
$ds = $this->User->getDataSource();
$log = $ds->getLog();
debug($log); 
```

或者使用[DebugKit 之](https://github.com/cakephp/debug_kit)类的工具来获取默认情况下包含所有查询的面板（在调试模式下）。

# nhibernate - 具有左连接提取的选择的 HQL

> ID：12437159
> 
> 赞同：0
> 
> 时间：2012-09-15T11:59:18.787
> 
> 标签：nhibernate, hql

**[注意]**有关真正的问题，请参阅我的更新。我留下了原来的，以防它对任何人有用......

只是想让这个工作。据我所知，它看起来像文档中的 Kats/Kittens 示例，但是当我尝试使用它时会收到 NullReferenceException。

```
CustomerOrder order = CurrentSession.CreateQuery(
    @"select new CustomerOrder(Name)
      from CustomerOrder o
      left join fetch o.OrderItems as items
      where o.Id = :Id")
    .SetParameter("Id", id)
    .UniqueResult<CustomerOrder>(); 
```

如果我省略了连接提取（只带回没有 OrderItems 的“CustomerOrder”），它就可以工作。我的 CustomerOrder 有一个构造函数，它接受一个字符串作为“名称”，并且数据库中有我正在检索的订单的 OrderItems 记录。

我究竟做错了什么？

**[更新]** 我刚刚读到我正在尝试做的事情并没有真正意义，因为我正在用一些值实例化一个新对象，而我正在做的是有效地尝试获取 OrderItems，就好像它们属于新实例化的对象，他们没有。

我需要的是一个仅填充了名称字段的订单，以及它的集合或 OrderItem 子项，理想情况下只填充了他们的“描述”字段。我想这样做，所以我不会像 HQL 通常那样检索所有列（出于性能原因）。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:49:29.413

感谢 JB Nizet 和 Rippo 的见解。我尝试了一些东西并且性能很好（无论如何都是为了我的目的）。如果它确实引起了问题，我会查看 ResultTransformer 但我确信我的应用程序性能的其他方面会对它的运行速度产生更大的影响（我可以通过分析等进行优化）而不是数量正在检索的列。

# php - php：包含 URL 参数

> ID：12437160
> 
> 赞同：1
> 
> 时间：2012-09-15T11:59:31.243
> 
> 标签：php, include

我正在尝试包含`db.php`变量并将其传递给它。

这就是我所拥有的：

```
include "https://imprss.herokuapp.com/db.php?id=6626068"; 
```

对我来说看起来很完美，但它根本行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:04:59.113

要使用诸如`https`包含指令中的协议，您应该确保在您的文件`allow_url_fopen`中启用该协议。`php.ini`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:05:35.770

`https://imprss.herokuapp.com/db.php?id=6626068`不返回 PHP 代码，它输出 HTML 代码以由浏览器解释，如果您有兴趣获取该页面的 HTML 代码，则不要使用，`include()`而应使用[cURL 函数](http://www.php.net/manual/en/ref.curl.php)或[fopen url 处理程序](http://www.php.net/manual/en/features.remote-files.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:06:02.103

我会使用相对路径，但您唯一缺少的是定义 url 的引号周围的大括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T12:31:19.507

不可能在另一台服务器上包含 php 文件，因为这将是一个安全漏洞。但是，您可以使用 file_get_contents 来获取 php 文件的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T12:30:05.383

之前有人问过，然后回答了。只需转到链接底部：

[如何传递参数`include`？](https://stackoverflow.com/questions/6805963/how-to-pass-parameters-with-include)

# r - 聚合列 R

> ID：12437164
> 
> 赞同：1
> 
> 时间：2012-09-15T12:00:33.133
> 
> 标签：r, split

我是新来的，有问题

```
 Year       Market         Winner          BID
1  1990        ABC             Apple          0.1260
2  1990        ABC             Apple          0.1395
3  1990        EFG             Pear           0.1350
4  1991        EFG             Apple          0.1113
5  1991        EFG             Orange         0.1094 
```

对于每年和两个市场（即ABC、EFG），分别检查Apple 和Pear 关于投标价格变量BID 的组合数据是否存在潜在异常值。5 确定您观察到存在潜在异常值的实例。

我设法仅按年份分离数据

```
y <- c(1, seq(300))
year1991 <- subset(X, y < 39)
year1991
Year1991 <- year1991[, c(1,2,3,5)]
Year1991 
```

现在我需要有关正确的 R 命令的帮助，以仅选择（查看）市场列的 ABC，其他列值仍然存在。

是否可以一次进行多次分离？或一步一步

可以给我一个提示，如果我想以这种方式查看日期，我该如何排除

```
 Year       Market         Winner          BID
1  1990        ABC             Apple         0.1260
2  1990        ABC             Apple         0.1395

  Year       Market         Winner          BID
1 1990        EFG             Pear           0.1350 
```

就像试图拆分“市场”但仍然看到整个价值列表

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:47:07.977

```
> df
  Year Market Winner    BID
1 1990    ABC  Apple 0.1260
2 1990    ABC  Apple 0.1395
3 1990    EFG   Pear 0.1350
4 1991    EFG  Apple 0.1113
5 1991    EFG Orange 0.1094

library(plyr)
# Then you can break up the data into chunks of year x market.
# I split your data.frame into a list. You can do further things with that list.
# alternatively, you can use ddply and add a function to do your hw bit and collate all
# results back into a final data.frame. This should be a helpful start.
> dlply(df, .(Year,Market))
$`1990.ABC`
  Year Market Winner    BID
1 1990    ABC  Apple 0.1260
2 1990    ABC  Apple 0.1395

$`1990.EFG`
  Year Market Winner   BID
3 1990    EFG   Pear 0.135

$`1991.EFG`
  Year Market Winner    BID
4 1991    EFG  Apple 0.1113
5 1991    EFG Orange 0.1094 
```

# android - 显示对话框出错 - 已泄露窗口 com.android.internal.policy.impl.phonewindow

> ID：12437165
> 
> 赞同：1
> 
> 时间：2012-09-15T12:00:33.523
> 
> 标签：android, memory-leaks, dialog

在我的应用程序中，我想`Dialog-box`在按下时显示`back button`。但是 Logcat 给了我如下错误：

```
E/WindowManager( 3044): Activity com.MAT.Canadian.Immi.Test.Play.Display_questions has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4053e1c8 that was originally added here
E/WindowManager( 3044): android.view.WindowLeaked: Activity com.MAT.Canadian.Immi.Test.Play.Display_questions has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4053e1c8 that was originally added here 
```

在我的情况下，我可以`Dialog-Box`在几秒钟内看到它没有按下`Ok/cancel`按钮。我不知道这是怎么回事，请让我知道我在哪里做错了。

```
 @Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    Toast.makeText(getApplicationContext(), "close the quiz app", Toast.LENGTH_SHORT).show();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setMessage("Are you sure you want to exit?")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    Display_questions.this.finish();
                   //dialog.dismiss();

               }
           })
           .setNegativeButton("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

检查整个我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.quiz_questions);

        listview = (ListView) findViewById(R.id.questions_list);
        listview.setItemsCanFocus(false);

        GoToNextQuestion();
}

private void GoToNextQuestion() {
    // TODO Auto-generated method stub

    listview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> myAdapter, View myView, int pos, long mylng) {

                String  selectedFromList = (String) listview.getItemAtPosition(pos);

                SelectedAnswer.setAnswer(selectedFromList);

                if (!checkAnswer()) return;

                if (currentGame.isGameOver()){

                    Intent i = new Intent(Display_questions.this, Display_result.class);
                    i.putExtra("Timer_Value", TimerTime);
                    startActivity(i); 

                    finish();
                }
                else{

                    GoToNextQuestion();

                } 
            }
          });

     setQuestions();
  }

 private void setQuestions() {

    String question = currentQ.getQuestion().trim();
    TextView qText = (TextView) findViewById(R.id.txt_questions);
    qText.setText(question);

    // set the available options
    List<String> answers = currentQ.getQuestionOptions();

     adapter = new ListviewAdapter(this,answers);

     listview.setAdapter(adapter);

}

private boolean checkAnswer() {
    //getSelectedAnswer();

    // logic for the check answers
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    Toast.makeText(getApplicationContext(), "close the quiz app", Toast.LENGTH_SHORT).show();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setMessage("Are you sure you want to exit?")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    Display_questions.this.finish();
                   //dialog.dismiss();

               }
           })
           .setNegativeButton("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });
    AlertDialog alert = builder.create();
    alert.show();
}

 } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:40:21.630

将 onBackPressed() 更改为此

```
@Override
public void onBackPressed() {
//  super.onBackPressed();
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setMessage("Are you sure you want to exit?")
            .setCancelable(false)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    MyActivity.this.finish();
                    //dialog.dismiss();

                }
            })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();

} 
```

# android - Numberpicker 在 android 的列表视图中出现问题

> ID：12437168
> 
> 赞同：1
> 
> 时间：2012-09-15T12:00:46.273
> 
> 标签：android, android-listview

我的列表视图中有一个自定义号码选择器。我在 numberpicker 中为列表中的第一项添加数量，但是当我滚动列表时，随机项目 numberpicker 中出现不添加相同数量的情况。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T04:52:07.487

当我遇到同样的问题并解决它时，我知道我的答案为时已晚，然后我想我必须分享我的答案。

```
if (row == null) { holder.numpicker.setMaxValue(100);
    holder.numpicker.setMinValue(0);
       holder.numpicker.setFocusableInTouchMode(false);
       holder.numpicker.setFocusable(false);
}
else
{

}

 holder.numpicker.setMaxValue(100);
    holder.numpicker.setMinValue(0);
    holder.numpicker.setValue(0);
       holder.numpicker.setFocusableInTouchMode(false);
       holder.numpicker.setFocusable(false); 
```

# java - 通过用户输入计算

> ID：12437172
> 
> 赞同：0
> 
> 时间：2012-09-15T12:01:07.733
> 
> 标签：java, math, user-input

有人可以指出我如何制作一个允许用户进行计算的函数的正确方向。

我希望它如下所示工作：

```
java Calculate 8*8  
the answer = 64

java Calculate 7+(8*2)
the answer = 23 
```

基本的数学运算符是我想首先使用的，下一步是使用括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:03:32.303

您可以使用[`ScriptEngine`](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html)：

```
public static void main(String[] args) throws Exception {
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("JavaScript");

    //pass in the string containing the operation, for example:
    double multiplication = (double) engine.eval(args[0]); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:40:43.797

**工作代码：**

```
import javax.script.*;
import java.util.Scanner;
public class Test   {

    public static void main(String[] args) throws Exception 
    {
        ScriptEngineManager factory = new ScriptEngineManager();
        ScriptEngine engine = factory.getEngineByName("JavaScript");
        Scanner in = new Scanner(System.in);
        System.out.println("Enter your calculation: ");
        String userInput = in.next();
        //pass in the string containing the operation, for example:
        double calculation = (Double) engine.eval(userInput); 
        System.out.print("The answer = " + calculation);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:08:38.200

看看这里：

[Java 中有 eval() 函数吗？](https://stackoverflow.com/questions/2605032/using-eval-in-java)

您可以使用 main 方法从命令行传递参数。

```
public class Calculate{
    public static void main(String... args){
        if(args.length == 0){
            System.err.println("You forgot to add a formulate to run");
            return;
        }
        String formula = args[0];
        // Insert the formula into code from the link mentioned above
    }
} 
```

# javascript - 如何调用这个匿名 Javascript 函数？

> ID：12437173
> 
> 赞同：1
> 
> 时间：2012-09-15T12:01:22.860
> 
> 标签：javascript

```
 var avg = function() 
   {
     var sum = 0;
      for (var i = 0, j = arguments.length; i < j; i++) 
        {

           sum += arguments[i];
         }
      return sum / arguments.length;
   } 
```

当我尝试这样称呼它时：

```
var average = avg(2,3,5);
average; // It works fine; 
```

但是如何在不分配变量的情况下调用它？如果有人可以提出任何建议，那将是令人愉快的......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:02:54.350

你可以简单地这样称呼它：

```
avg(2, 3, 5); 
```

如果您想查看结果，请将其放入警报调用中：

```
alert( avg(2, 3, 5) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:10:12.557

您无需将调用函数的结果放入变量中，您可以对它做任何您喜欢的事情。

例如，将其用作警报中的值：

```
alert(avg(2,3,5)); 
```

您可以在另一个表达式中使用它：

```
var message = "The average is " + avg(2,3,5); 
```

您可以直接在另一个调用中使用它：

```
someFunction(avg(2,3,5)); 
```

你甚至可以通过不做任何事情来丢弃结果，即使这在这种特定情况下没有用：

```
avg(2,3,5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:10:41.417

如果您不将结果放入变量或兼容的上下文中，则此函数无法输出任何内容，这使得除非您使其输出结果，否则很难使用。尝试这个 ：

```
var avg = function() 
   {
     var sum = 0;
      for (var i = 0, j = arguments.length; i < j; i++) 
        {

           sum += arguments[i];
         }

      var retvalue = sum / arguments.length;
      consoloe.log("avg: "+retvalue);
      return retvalue ;
   } 
```

然后它可以帮助您查看何时调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T12:33:54.763

您需要了解表达式的概念。

每个表达式作为一个整体代表*一个*值。一个表达式可以由多个子表达式组成，这些子表达式以某种方式（例如使用运算符）组合以产生一个新值。

例如：

*   `3`是表示数值 3 的表达式（具体而言，是文字）。
*   `3 + 4`是一个表达式，由两个文字表达式组成，作为一个整体产生值 7

当你给一个变量*赋值*时——比如`var average =`——操作符的右边`=`需要是一个表达式，即产生一个值的东西。

正如您所观察到的，`average`将被赋值为 5。因此，它`avg(2, 3, 5)`本身必须是一个评估为 value 的表达式`5`。

`average`本身是一个表达式，表示所述变量的当前值。

最重要的是，这`avg()`与`var average =`. `avg()`独立存在，您可以将其视为普通值，例如`5`（当然还有其他区别）。

如果你理解了表达式和值的概念，应该清楚如果你能做到

```
var average = avg(2,3,5);
average; // It works fine; 
```

你也可以做

```
avg(2,3,5); 
```

# asp.net-mvc - X-Content-Type-Options nosniff 元标记阻止图像加载

> ID：12437174
> 
> 赞同：0
> 
> 时间：2012-09-15T12:01:23.467
> 
> 标签：asp.net-mvc, internet-explorer-9, meta-tags

当我将 X-Content-Type-Options nosniff 元标记应用到我的 ASP.NET MVC 3 项目（通过 global.asax Application_BeginRequest 方法）时，我的 Web 应用程序中的 jpeg 不会在 IE9 中加载。有没有其他人有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:16:06.677

启用 X-Content-Type-Options 的最佳方法是在 Web 服务器本身中启用它。

[http://www.pwnphreak.com/blog/2012/12/13/x-content-type-optionsnosniff-header-missing/](http://www.pwnphreak.com/blog/2012/12/13/x-content-type-optionsnosniff-header-missing/)

# solr - Solr - 使用确切的单词数进行邻近搜索

> ID：12437177
> 
> 赞同：0
> 
> 时间：2012-09-15T12:01:38.967
> 
> 标签：solr, solrj

我在 Windows 机器上使用 apache-solr-3.6.0。我想搜索两个相隔一定数量的单词（不超过这个数字）。例如：考虑以下短语，我想搜索 Daisy 和考试，相距不超过 2 个单词。

```
Daisy has exam.
Daisy has an exam.
Daisy has a math exam.
Daisy has a difficult math exam. 
```

我搜索了这样的东西，并尝试了 Term Proximity。

```
http://localhost:8983/solr/select/?q="Daisy exam"~2&version=2.2&start=0&rows=10&indent=on&debugQuery=true 
```

我需要的结果应该是短语：`Daisy has an exam.`但是使用上述标准，结果是最后 3 个短语。

那么有什么想法可以分开使用确切数量的单词吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:01:00.530

在此处查看相关问题： [Solr 接近有序与无序](https://stackoverflow.com/questions/4079388/solr-proximity-ordered-vs-unordered)

当您说“相距不超过 2 个单词”时，您应该匹配第一个和第二个短语。然后您的查询将是`"Daisy exam"~1`，它将匹配 Daisy 检查和它们之间的插入（这是**一个**变化：将`exam`位置从 2 更改为 3）。

为了防止匹配结果中出现“雏菊考试”，您可以添加`-"Daisy exam"`到您的查询中。或者，您可以添加`fq=-"Daisy exam"`到您的查询字符串参数。

# heroku - 关于 Heroku 上 Postgres 的一些帮助

> ID：12437181
> 
> 赞同：2
> 
> 时间：2012-09-15T12:02:05.057
> 
> 标签：heroku

我刚刚开始使用 PHP 开发一个应用程序。我已经在 Heroku 上的应用程序中配置了 Postgres 插件。但我仍然不确定如何开始在数据库上工作。我的意思是在 Heroku 的 POSTGRES DB 窗口上有一个名为 DATACLIP 的东西，当我尝试在那里创建一个表时，它给了我一些奇怪的错误。但无论我在那里写什么查询，它总是给我一些错误。所以，我不确定我是否可以创建表并从 DATACLIP 插入我的数据。如果没有，我可以从哪里做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:20:06.173

数据夹仅对只读查询有用。思考 SQL 和数据的要点。

要在数据库上创建数据，您可以：

*   使用在 heroku 平台本身内运行的数据库迁移
*   从任何地方使用提供的凭据连接到您的数据库（您必须使用 SSL）。要获取凭据，`heroku pg:credentials <DATABASE_COLOR> --app <YOUR_APP>`请运行 或访问[http://postgres.heroku.com](http://postgres.heroku.com)中的数据库。您应该能够使用 pg_admin 或任何其他 postgres 前端来连接和创建表。
*   您可以使用 heroku 工具带（并假设您在开发框中安装了正确的 psql）直接连接到`heroku pg:psql --app <YOUR_APP>`. 从那里只需使用 SQL 来创建您的数据（CREATE TABLE 等）

# android - 找不到 Android 支持包

> ID：12437183
> 
> 赞同：0
> 
> 时间：2012-09-15T12:02:40.377
> 
> 标签：android

我已经检查了所有这些文章，但我仍然无法弄清楚为什么我找不到 Android 支持包/库：

*   [找不到 Android 支持包](https://stackoverflow.com/questions/12243030/cant-find-android-support-package)
*   [SDK 管理器中不存在 Android 支持包](https://stackoverflow.com/questions/11244091/android-support-package-not-present-in-sdk-manager)
*   [在 Android SDK 管理器中找不到支持包](https://stackoverflow.com/questions/11349630/cant-find-support-package-in-android-sdk-manager)
*   [在 Android SDK 管理器中找不到支持包](https://stackoverflow.com/questions/8038841/cannot-find-support-package-in-android-sdk-manager)

这就是 Android SDK 管理器向我展示的内容： ![Android SDK 管理器截图](../Images/5fc80697daba430973e5dbd373156143.png)

我试过清除缓存并重新加载，但这就是我得到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:18:38.593

你只是尝试重新加载一次。

如果它对您不起作用，请使用此链接手动下载支持包

[http://venomvendor.blogspot.in/2012/03/android-sdk-extras-by-google-inc.html](http://venomvendor.blogspot.in/2012/03/android-sdk-extras-by-google-inc.html)

解压 zip 并将其复制到目录

android-sdk\extras\support

这对我有用

您也可以尝试使用 Android Package Deployer 手动下载 API 级别

[http://siddharthbarman.com/sidstream/index.php?r=software/apd](http://siddharthbarman.com/sidstream/index.php?r=software/apd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-18T04:07:50.363

也许您没有在 SDK 管理器中选择“显示过时的软件包”。它在“包”中。选择它并重新加载。

![在此处输入图像描述](../Images/76f1f0f6589e2b30a387297cfb5e6236.png)

# android - 您必须为 TextView 提供资源 ID

> ID：12437196
> 
> 赞同：2
> 
> 时间：2012-09-15T12:03:28.740
> 
> 标签：android, android-listview, android-arrayadapter

我搜索了与此问题相关的现有教程，并遵循了该示例。但我仍然得到同样的错误。当我更改 android.R.layout.simple_list_item1 行时，它不起作用。

我的代码：

```
public class Lisearch extends Activity {
    private ListView lv;
    private EditText et;
    private String listview_array[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE",
    "SIX", "SEVEN", "EIGHT", "NINE", "TEN" };
    private ArrayList<String> array_sort= new ArrayList<String>();
    int textlength=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_lisearch);
        //TextView tv=(TextView)findViewById(R.id.text);
        lv = (ListView) findViewById(R.id.ListView01);
        et = (EditText) findViewById(R.id.EditText01);
        //lv.setAdapter(new ArrayAdapter<String>(this,
        //R.layout.activity_lisearch, listview_array));

        et.addTextChangedListener(new TextWatcher()
        {
        public void afterTextChanged(Editable s)
        {
                                                                        // Abstract Method of TextWatcher Interface.
        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {
        // Abstract Method of TextWatcher Interface.
        }
        public void onTextChanged(CharSequence s,
        int start, int before, int count)
        {
        textlength = et.getText().length();
        array_sort.clear();
        for (int i = 0; i < listview_array.length; i++)
        {
        if (textlength <= listview_array[i].length())
        {
        if(et.getText().toString().equalsIgnoreCase(
        (String)
        listview_array[i].subSequence(0,
        textlength)))
        {
                                                                                                                        array_sort.add(listview_array[i]);
                                                                                                        }
                                                                                        }
                                                                        }
        lv.setAdapter(new ArrayAdapter<String>
        (Lisearch.this,
        R.layout.activity_lisearch,R.id.text, array_sort));
        }
        });

    } 
```

xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text"
        android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<EditText android:id="@+id/EditText01"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:hint="Search">
</EditText>

<ListView android:id="@+id/ListView01"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
</ListView>
</TextView> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T12:06:34.647

试试这个。使用 android.R.layout_simple_list_item_1 显示默认 listview 。

```
lv.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,array_sort)); 
```

## 设置自定义布局

```
lv.setAdapter(new ArrayAdapter<String>(this,R.layout.conversation_item,R.id.sometextview_from_the_layout,array_sort)); 
```

这里

**R.layout.conversation_item**是自定义布局，**R.id.sometextview_from_the_layout**是自定义布局的文本视图 ID。

## 对话项目.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:minHeight="?android:attr/listPreferredItemHeight"
/> 
```

# algorithm - 最近的一对点

> ID：12437201
> 
> 赞同：6
> 
> 时间：2012-09-15T12:03:51.790
> 
> 标签：algorithm, geometry, computational-geometry, graph-algorithm

在 [http://en.wikipedia.org/wiki/Closest_pair_of_points_problem](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem) 中我们可以看到它提到最多6个点最接近另一半的点，可以表示为下图： ![在此处输入图像描述](../Images/1cc3f791dcc9f5f25d49ce6f38d7cc09.png)

我的问题是针对点 P1 和点 P2，到红点的距离会超过 sqrt(2)*d，为什么它是解决方案的一部分？为什么最接近 P 的不是最多 4 个点而不是最多 6 个点？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T12:30:24.680

*P1*和*P2*不是解的一部分，但必须在求解的过程中对其进行检查，因为算法会检查框内的所有点，而*P1*和*P2*都在框内。

请注意，不存在像您的*Q*这样的点，因为根据假设，图表右半部分的点之间的最小距离是*d*。

编辑添加：您似乎认为维基百科文章正在提出这样的声明：

*   直线的右侧可能有多达 6 个点位于*P的距离**d*内。

 *这种说法是错误的。但这篇文章并没有提出这样的主张。相反，它提出了两个独立的声明，这两个声明都是正确的：

1.  直线右侧与*P距离为**d*的所有点都在框内。
**   方框中最多可能有 6 个点。*

 *![](../Images/ad5c9011828080f7788cc8075fa52003.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T12:27:48.427

我们只计算可以位于右 dx 2d 矩形中的最大点数。由于任意两点的最小距离都被约束为 d，所以在满足这个约束的同时，我们最多可以在矩形中放置 6 个点，如图所示。

请注意，右侧距 P d 距离内的点都应位于以 P 为中心且半径为 d 的圆的圆弧段内。该段最多可以有 4 个点。但是，查找线段内的点数比查找矩形内的点数更复杂。所以我们使用矩形来代替，并产生额外的成本，最多只能搜索 2 个额外的点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T12:37:46.357

界限只对复杂度估计很重要。代码方面，您可以简单地在距离 dRmin 内上下扫描。这里的界限表明您在每次这样的扫描中最多会看到 6 个点，这使得这个 O(1)。**

# javascript - Javascript 自定义 Base32

> ID：12437202
> 
> 赞同：1
> 
> 时间：2012-09-15T12:04:37.203
> 
> 标签：javascript, base32

我正在尝试使用自定义字符集实现 base32，基本上是 [A-Z0-5]。不幸的是，我没有为此建立查找表。

有人对我如何构建整个编码和解码方案有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:10:23.737

看看现有的 base32 实现（[https://github.com/agnoster/base32-js](https://github.com/agnoster/base32-js)），它通常不超过几百行。

# api - 如何使用 API 获取真实的 Windows Live 联系人电子邮件地址？

> ID：12437205
> 
> 赞同：1
> 
> 时间：2012-09-15T12:04:50.953
> 
> 标签：api, email, windows-live

我想知道 Facebook、Twitter 和 LinkedIn（仅举几例）如何使用 Windows Live API 来查找用户朋友的电子邮件地址以向他们发送邀请。当我尝试使用 Windows Live API 时，我只得到 email_hashes，它只能用于与系统的现有用户电子邮件进行比较，而不是向他们发送邀请。

这些服务是否向 Microsoft 付费以获得高级 API 的好处？

谢谢你，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:36:44.660

您需要做的就是将以下范围添加到您请求的范围列表中：

“wl.contacts_emails”

例如

```
WL.login({scope: ["wl.basic", "wl.contacts_emails"]}) 
```

# c# - 没有 CopyToDatatable() 方法

> ID：12437207
> 
> 赞同：1
> 
> 时间：2012-09-15T12:05:05.447
> 
> 标签：c#

我有一个像这样的 linq to dataTable 查询：

```
`var ShowResult = from r in Result.AsEnumerable()
                             where Convert.ToInt32(r.Field<double>("ASLVAM") / r.Field<double>("GEST")) > 60
                             orderby Convert.ToInt32(r.Field<double>("ASLVAM") / r.Field<double>("GEST")) descending 
                             select new
                             {
                                 pascode = r.Field<string>("PAS_CODE"),
                                 melli = r.Field<string>("CODEMELI"),
                                 name = r.Field<string>("NAM"),
                                 family = r.Field<string>("FAMILY"),
                                 bycode = r.Field<string>("BAYGANI"),
                                 jancode = r.Field<string>("CODEJANBAZ"),
                                 darsad = r.Field<int>("DARSAD"),
                                 ostan = r.Field<string>("OSTAN_N"),
                                 vacode = r.Field<string>("VA_CODE"),
                                 moin = r.Field<string>("VA_MOIN"),
                                 onvan = r.Field<string>("TAFZILI"),
                                 aslvam = r.Field<double>("ASLVAM"),
                                 gest = r.Field<double>("GEST"),
                                 //tededGestKol = Convert.ToInt32(r.Field<double>("ASLVAM") / r.Field<double>("GEST")),
                                 mandeVam = r.Field<double>("MANDE_VAM"),
                                 dPardakht = r.Field<string>("DATE_P")
                             };`<code> 
```

我添加了参考 System.Data.DataSetExtentions 以使用 CopyToDataTable() 方法在 dataGrid 视图中显示我的查询结果，但此方法没有添加到我的 Inellisence，我也使用[MSDN 示例](http://msdn.microsoft.com/en-us/library/bb669096.aspx)来使用此方法，但这次我得到了这个错误：“Specified Cast is not valid”请帮帮我，我能做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:11:57.370

CopyToDataTable() 仅在您的查询返回 IEnumerable<'DataRow> 时有效。在您的查询中，您将返回一个匿名类型。匿名类型不携带 CopyToDataTable() 的扩展方法。您可以像这样选择整行，假设 Result 是一个 DataTable。然后创建您的匿名类型。

```
 public static void Start()
    {
        DataTable Result = new DataTable();
        var ShowResult = from r in Result.AsEnumerable()
                         where Convert.ToInt32(r.Field<double>("ASLVAM") / r.Field<double>("GEST")) > 60
                         orderby Convert.ToInt32(r.Field<double>("ASLVAM") / r.Field<double>("GEST")) descending
                         select r;

        DataTable newDataTbl = ShowResult.CopyToDataTable();
        var anonType = newDataTbl.AsEnumerable()
            .Select(r => new
                         {
                             pascode = r.Field<string>("PAS_CODE"),
                             melli = r.Field<string>("CODEMELI"),
                             name = r.Field<string>("NAM"),
                             family = r.Field<string>("FAMILY"),
                             bycode = r.Field<string>("BAYGANI"),
                             jancode = r.Field<string>("CODEJANBAZ"),
                             darsad = r.Field<int>("DARSAD"),
                             ostan = r.Field<string>("OSTAN_N"),
                             vacode = r.Field<string>("VA_CODE"),
                             moin = r.Field<string>("VA_MOIN"),
                             onvan = r.Field<string>("TAFZILI"),
                             aslvam = r.Field<double>("ASLVAM"),
                             gest = r.Field<double>("GEST"),
                             //tededGestKol = Convert.ToInt32(r.Field<double>("ASLVAM") / r.Field<double>("GEST")),
                             mandeVam = r.Field<double>("MANDE_VAM"),
                             dPardakht = r.Field<string>("DATE_P")
                         }
                   );
    } 
```

代替前一种方法，您可以使用以下扩展方法从 List<'T> 创建数据表。

```
 using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Text;
        using System.Data;
        using System.ComponentModel;
        using System.Reflection;

        namespace Common
        {
            public static class DataTableExtensions
            {
                public static DataTable ConvertToDataTable<T>(this IList<T> data)
                {
                    PropertyDescriptorCollection properties =
                        TypeDescriptor.GetProperties(typeof(T));
                    DataTable table = new DataTable();
                    foreach (PropertyDescriptor prop in properties)
                        table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType);
                    foreach (T item in data)
                    {
                        DataRow row = table.NewRow();
                        foreach (PropertyDescriptor prop in properties)
                            row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
                        table.Rows.Add(row);
                    }
                    table.AcceptChanges();
                    return table;
                }

                public static DataRow ConvertToDataRow<T>(this T item, DataTable table)
                {
                    PropertyDescriptorCollection properties =
                        TypeDescriptor.GetProperties(typeof(T));
                    DataRow row = table.NewRow();
                    foreach (PropertyDescriptor prop in properties)
                        row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
                    return row;
                }

                public static T ConvertToEntity<T>(this DataRow tableRow) where T : new()
                {
                    // Create a new type of the entity I want
                    Type t = typeof(T);
                    T returnObject = new T();

                    foreach (DataColumn col in tableRow.Table.Columns)
                    {
                        string colName = col.ColumnName;

                        // Look for the object's property with the columns name, ignore case
                        PropertyInfo pInfo = t.GetProperty(colName.ToLower(),
                            BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance);

                        // did we find the property ?
                        if (pInfo != null)
                        {
                            object val = tableRow[colName];

                            // is this a Nullable<> type
                            bool IsNullable = (Nullable.GetUnderlyingType(pInfo.PropertyType) != null);
                            if (IsNullable)
                            {
                                if (val is System.DBNull)
                                {
                                    val = null;
                                }
                                else
                                {
                                    // Convert the db type into the T we have in our Nullable<T> type
                                    val = Convert.ChangeType(val, Nullable.GetUnderlyingType(pInfo.PropertyType));
                                }
                            }
                            else
                            {
                                // Convert the db type into the type of the property in our entity
                                SetDefaultValue(ref val, pInfo.PropertyType);
                                if (pInfo.PropertyType.IsEnum && !pInfo.PropertyType.IsGenericType)
                                {
                                    val = Enum.ToObject(pInfo.PropertyType, val);
                                }
                                else
                                    val = Convert.ChangeType(val, pInfo.PropertyType);
                            }
                            // Set the value of the property with the value from the db
                            if (pInfo.CanWrite)
                                pInfo.SetValue(returnObject, val, null);
                        }
                    }

                    // return the entity object with values
                    return returnObject;
                }

                private static void SetDefaultValue(ref object val, Type propertyType)
                {
                    if (val is DBNull)
                    {
                        val = GetDefault(propertyType);
                    }
                }

                public static object GetDefault(Type type)
                {
                    if (type.IsValueType)
                    {
                        return Activator.CreateInstance(type);
                    }
                    return null;
                }

                public static List<T> ConvertToList<T>(this DataTable table) where T : new()
                {
                    Type t = typeof(T);

                    // Create a list of the entities we want to return
                    List<T> returnObject = new List<T>();

                    // Iterate through the DataTable's rows
                    foreach (DataRow dr in table.Rows)
                    {
                        // Convert each row into an entity object and add to the list
                        T newRow = dr.ConvertToEntity<T>();
                        returnObject.Add(newRow);
                    }

                    // Return the finished list
                    return returnObject;
                }
            }
        } 
```

# silverlight - Silverlight 中多个客户端的通知

> ID：12437211
> 
> 赞同：0
> 
> 时间：2012-09-15T12:05:41.220
> 
> 标签：silverlight

我正在实施类似 Silverlight 上的简单聊天。在我看来，我有带有文本框的“发送”按钮和绑定到 viewmodel 属性的消息列表。

当用户按下“发送”时，消息添加到数据库，然后消息列表（可观察集合）刷新。之后，我从 INotifyPropertyChanged 接口引发 PropertyChanged 事件。这很好用，新消息会立即添加到列表中。

但我想要做的是刷新现在打开的所有视图。如何做到这一点？

感谢和抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:02:13.040

一种方法是构建双工服务。 [如何：为 Silverlight 客户端构建双工服务](http://msdn.microsoft.com/en-us/library/cc645027%28v=vs.95%29.aspx) 双工服务会将更新从 WCF 服务“推送”到订阅它的所有客户端。

[Radenko Zec](http://blog.developers.ba/post/2009/02/25/Silverlight-chat-application-using-WCF-full-duplex.aspx)提供了我在类似项目中使用的参考资料和源代码，以便为 Silverlight 客户端提供通知服务。

# php - 通过比较值 PHP 从两个不同的数组创建一个大数组

> ID：12437215
> 
> 赞同：2
> 
> 时间：2012-09-15T12:05:54.973
> 
> 标签：php, mysql, arrays, multidimensional-array

我有一个带有报告的 MySQL 表。获取我的报告由函数使用：

```
function fillItByRoute($lat){
global $db;
$array = array(array());
$result = $db->query("SELECT * FROM reports WHERE latitude LIKE '$lat%' ORDER BY datetime_view");
    while ($row = $db->fetch_array($result)){
        $array[$int][1] = "Desc";
        $array[$int][2] = $row['latitude'];
    }
return $array; 
```

}

它创建了一个多维数组。

*   *[MySQL 中的纬度存储为 25.33236645、23.2665666 等...]*

我有一个不同的数组：

```
$array_lat = array(25.5,23.1,45.2); 
```

所以，我想知道是否可以通过 $array_lat 的数组值检查与函数 fillItByRoute() 创建的多维数组中的值的匹配并将函数 fillItByRoute() 的值存储在新数组中？

不久，再来一次：

1.  $array_lat 中有不同的值；
2.  我想用 $array_lat 的输入检查函数 fillItByRoute()
3.  结果，哪些西装必须存储在新数组中。
4.  新数组应该有值（使用我的 $array_lat 的值）：25.5666332、25.511433、23.1233、23.11444、23.1、45.269...等，甚至可以是数百个项目。

有可能做这样的事情吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:27:36.213

如果我对您的意思的假设是正确的，那么这就是您所追求的：

```
function fillItByRoute($lat){
   global $db;
   $array = array(array());
   $result = $db->query("SELECT * FROM reports WHERE latitude LIKE '$lat%' ORDER BY datetime_view");
    while ($row = $db->fetch_array($result)){
        $latitude = number_format((float)$row['latitude'], 2, '.', '');
        if (in_array($latitude,$lat)) {
           $array[$int][1] = "Desc";
           $array[$int][2] = $row['latitude'];
        }
    }
    return $array;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:12:59.337

我想你想要这样的东西。它遍历您的 array_lat 并将其与 SQL 中的值进行比较。我不完全确定你想用比较做什么，但你应该把它放在第二个函数的 if 语句中。如果您想要一个新数组，看起来您了解如何创建这些数组，但如果这太模棱两可，请告诉我。

```
function fillItByRoute($lat){
global $db;
$array = array(array());
$result = $db->query("SELECT * FROM reports WHERE latitude LIKE '$lat%' ORDER BY datetime_view");
    while ($row = $db->fetch_array($result)){
        $array[$int][1] = "Desc";
        $array[$int][2] = $row['latitude'];
    }
return $array;

function compareArrToSql($array_lat){
    for($curr_lat = 0; $curr_lat<count($array_lat); $curr_lat++){
        $sql_val = fillItByRoute($array_lat[$curr_lat]);
        if($array_lat[$curr_lat]==$sql_val){
        }
    }
} 
```

# python - 将值附加到 dict 数组元素的更简洁的方法？

> ID：12437217
> 
> 赞同：3
> 
> 时间：2012-09-15T12:06:03.497
> 
> 标签：python

当我想在 Key 下将新值附加到 Dict 中时，我发现自己必须写：

```
# Dict={}
# Key = ....
# newvalue = ....

if not Key in Dict:
    Dict[Key] = [ newvalue ]
else:
    Dict[Key].append(newvalue) 
```

它需要四行代码。python标准库有更简洁的方法吗？例如

```
Dict.appendkeyvalue(Key, newvalue) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T12:08:17.110

您可以使用`defaultdict`：

```
from collections import defaultdict

d = defaultdict(list)

d['something'].append(3)
print d['something']
# > [3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T12:11:34.047

使用标准字典，您可以使用[`setdefault()`](http://docs.python.org/library/stdtypes.html#dict.setdefault)：

```
d = {}
d.setdefault("something", []).append(3) 
```

`setdefault()`如果它存在则返回`d["something"]`，否则它创建一个新的字典条目`[]`作为它的值并返回它。

# c - 指向带有 malloc 和 strdup 的结构的指针

> ID：12437226
> 
> 赞同：-2
> 
> 时间：2012-09-15T12:06:48.063
> 
> 标签：c, double-pointer, strdup

我的主要目的是将一个指向结构的指针传递给一个函数，该函数将分配内存并填充其所有值。回来后我会在屏幕上打印出来。

结构看起来像这样。

```
struct isolock{
    char *name;
    unsigned int state;};
typedef struct isolock lock; 
```

请注意，我无法更改此结构的声明。我的主要功能就是这样非常简单。

```
int main(){
    int i = 0;
    isolock *lock = NULL;
    fillArray(&lock);

    //print struct contents
    for(i=0;(lock+i)->name;i++){
            printf("name = %s status = %u \n", (lock+i)->name,(lock+i)->state);
    } 
```

}

fillArray 函数假设为我的结构分配 n + 1 个内存块，其中 n 是存在的实际锁数。而最后（n+1）个块将用零填充。因此，在从 main 打印时，我可以检查这种情况，而无需担心我分配的结构的长度。

我的问题出在 fillArray 函数中。

```
static const char *array[] = {"SWMGMT_LOCK","OTHER_LOCK"};
void fillArray(isolock **dlock){
    int i = 0;
    if (*dlock == NULL){
            *dlock = (isolock *)malloc((sizeof (*dlock)) * 3);      //allocate space for holding 3 struct values

            for(i=0;i<2;i++){
                    (*(dlock) + i)->name = strdup(array[i]);       
                    (*(dlock) + i)->state = (unsigned int)(i+1);                                           
            }
            (*(dlock) + i)->name = 0;   //LINE100
            (*(dlock) + i)->state = 0;
    }
}
o/p:

name =  status = 1 
name = OTHER_FP_LOCK status = 2 
```

实际上这个 LINE100 会导致问题。它实际上替换了已经填充的结构条目，即这一行使 dlock[0]->name 填充为 0。而 dlock[1] 保持不变。

我的 gdb 日志显示类似这样的内容。

所有这些都是在分配和填充值之后获取的日志。

```
 (gdb) p (*(dlock)+0)
    $10 = (isolock *) 0x804b008
    (gdb) p (*(dlock)+1)
    $11 = (isolock *) 0x804b010 
    (gdb) p (*(dlock)+2)                      <== Note here 1
    $12 = (isolock *) 0x804b018
    (gdb) p *(*(dlock)+0)
    $13 = {name = 0x804b018 "SWMGMT_LOCK", state = 1}     <== Note here 2
    (gdb) p *(*(dlock)+1)
    $14 = {name = 0x804b028 "OTHER_FP_LOCK", state = 2}
    (gdb) n
    33    (*(dlock) + i)->state = 0;
    (gdb) 
    35   }
    (gdb) p *(*(dlock)+2)
    $15 = {name = 0x0, state = 0}
    (gdb) p (*(dlock)+2)
    $16 = (isolock *) 0x804b018 
```

从注释 1 和注释 2 可以清楚地看出，strdup 已通过 malloc 返回已分配的内存位置，即第一次调用 strdup 已返回 dlock[2] 的地址。这怎么可能发生。因此，(*dlock+2)->name = 0 导致 dlock[0]->name 被填充为 0。

为了方便解释这个问题，Malloc 给我回了三个地址。为了便于理解，可以说，{1000,1008,1010} 我调用了两次 strdup，它返回了 {1010,1018}

这 1010 和 1018 分别存储在 char *name of lock[0] 和 lock[1] 中。

有人可以告诉我，我在这段代码中做错了什么还是 strdup 的问题（分配了一个已经分配的内存块）

注意：当我将 char *name 更改为 char name[20] 而不是 strdup 时，我使用了 strcpy，它运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:21:53.693

错误的一个可能原因是您的分配：

```
*dlock = (isolock *)malloc((sizeof (*dlock)) * 3); 
```

这`dlock`是一个指向指针的指针，因此指针`sizeof(*dlock)`的大小与`sizeof(struct isolock)`(or `sizeof(**dlock)`) 不同。

# sql - 如何在 microsoft sql server 2008 中运行查询之前知道有多少行会受到影响

> ID：12437227
> 
> 赞同：15
> 
> 时间：2012-09-15T12:07:06.720
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我已经阅读了一些关于 ROWCOUNT 的内容，但它并不完全是我想要的。据我了解，rowcount 表示运行查询后受影响的行数。我要寻找的是在您运行查询之前知道。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-15T23:07:51.867

您也可以[`BEGIN TRANSACTION`](http://msdn.microsoft.com/en-us/library/ms188929.aspx "开始交易")在操作执行之前使用。您可以看到受影响的行数。从那里，无论`COMMIT`是结果还是使用`ROLLBACK`都将数据恢复到原始状态。

```
BEGIN TRANSACTION;

UPDATE table
SET col = 'something'
WHERE col2 = 'something else'; 
```

查看更改的数据，然后：

```
COMMIT; 
```

或者

```
ROLLBACK; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-15T12:11:03.410

简短的回答是否定的。。

在执行查询之前，您无法获取行数。至少在 SQL 服务器中。

最好的方法是使用

```
Select count(*) from <table> where <condtion> 
```

然后执行您的实际查询

```
 [delete]or [update] [set col='val']
 from <table> where <condtion> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T12:11:05.127

估计的执行计划将根据统计数据为您提供受影响的行，因此在这种情况下它不会真正帮助您。

我建议的是复制您的`UPDATE statement`or`DELETE statement`并将其转换为`SELECT`. 运行它以查看有多少行返回，并且您会知道有多少行将被更新或删除。

例如：

```
UPDATE t
SET t.Value = 'Something'
FROM MyTable t
WHERE t.OtherValue = 'Something Else' 
```

变成：

```
SELECT COUNT(*)
FROM MyTable t
WHERE t.OtherValue = 'Something Else' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T12:10:52.630

`SELECT * FROM...`最简单的解决方案是在运行之前替换with中的列`SELECT Count(*) FROM ...`和查询的其余部分（`WHERE`子句需要相同）。这会告诉你有多少行会受到影响

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-25T13:06:03.530

在有子查询的情况下，最简单的解决方案似乎不起作用。您将如何选择此更新的计数（*）：

```
BEGIN TRANSACTION;
update Table1 t1 set t1.column = t2.column
from (
  SELECT column from Table2 t2
) AA
where t1.[Identity] = t2.[Identity]
COMMIT; 
```

在这里，我认为您需要 BEGIN TRANSACTION

# jquery - 解析 json 日期后的结果是 NaN.NaN.NaN

> ID：12437229
> 
> 赞同：0
> 
> 时间：2012-09-15T12:07:23.803
> 
> 标签：jquery, json

我正在获取 json datetime 对象，`/Date(1346996934000)/`建议我像这样转换这个日期

```
"aoColumns": [
{
    "sName": "JoinDate",
    "fnRender" : function(obj, val)
    {
        var dx = new Date(parseInt(val.substr(6)));
        var dd = dx.getDate();
        var mm = dx.getMonth() + 1;
        var yy = dx.getFullYear();

        if (dd <= 9)
        {
            dd = "0" + dd;
        }
        if (mm <= 9) {
            mm = "0" + mm;
        }
        return dd + "." + mm + "." + yy;
    }
}
] 
```

但最终的结果是我得到的日期是`NaN.NaN.NaN`？有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:12:32.917

给定的示例日期字符串工作正常。您可能无法在某些记录中获得正确的数据。在这里检查。

**[现场演示](http://jsfiddle.net/rajaadil/9dbCb/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:09:19.107

只需使用

```
var dx = new Date(); 
```

代替

```
var dx = new Date(parseInt(val.substr(6))); 
```

# java - 存储设置信息

> ID：12437230
> 
> 赞同：2
> 
> 时间：2012-09-15T12:07:36.537
> 
> 标签：java, xml, spring, jakarta-ee

我正在开发一个 Web 应用程序，这个 Web 应用程序要卖给很多人。该应用程序正在 Java Spring 中开发。该应用程序有一个数据库，当出售该数据库时，该数据库可能位于不同的位置。

存储此数据库位置以便 Java 代码可以找到数据库的最佳方式在哪里？

我会将它存储在一个 XML 文件中，但它会放在哪里，以便某人可以轻松更改数据库位置。

我不想将它存储在 Spring Beans 中。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:12:07.697

问题是它是一个 Web 应用程序，这表明您将给他们一个 WAR 文件。所有 Spring 配置和属性都将被打包；更改某些内容将意味着打开包装，而您不希望他们这样做。

您应该使用 JNDI 名称设置数据库访问权限，这些名称是在包部署到的应用服务器上设置的。提供说明以显示如何为 Tomcat 和其他应用程序服务器设置一个。当您的应用启动时，它将从应用服务器获取数据源名称。

您假设他们足够复杂，能够在他们的应用服务器上创建 JNDI 数据源，或者您的文档足够好。祝你好运。

另一个想法是让您创建一个小型内存数据库，例如 Hypersonic 或 Derby，其中包含应用程序的配置信息。告诉用户将它放在您指定的应用程序之外的位置（例如 c:/yourApp/configuration），提供一个脚本以在应用程序启动时启动它，并让您的应用程序在加载时查询数据库连接信息。

现在，您将指望他们知道如何为您的内存数据库创建 INSERT 或 UPDATE 查询。但是您编写文档来指导如何做的机会更大，因为您不必为 WebLogic、Tomcat、Jetty、JBOSS、WebSphere、Glassfish 和所有其他 Java EE 应用程序服务器弄清楚如何做。

# java - 打开 chrome 选项卡并从 Java 应用程序对其进行控制

> ID：12437238
> 
> 赞同：0
> 
> 时间：2012-09-15T12:08:55.770
> 
> 标签：java, bash, chromium

我正在构建一个应用程序来直接从服务器编辑一些 html/css。它工作正常，但我想在编辑的页面上打开 chromium 或 firefox 以呈现结果。我可以使用 CLI 打开一个新选项卡：

```
chromium-browser http://www.google.com 
```

但是，如果我重新调用此命令，它会打开一个新选项卡。

如何控制选项卡以关闭它并重新打开一个新选项卡？或者我可以直接从 de CLI 替换选项卡的 url 吗？

谢谢。

# c++ - C++ 总是使用显式构造函数

> ID：12437241
> 
> 赞同：41
> 
> 时间：2012-09-15T12:09:22.477
> 
> 标签：c++, constructor, explicit, defensive-programming, explicit-constructor

阅读以下博客后：

[http://xania.org/200711/ambiguous-overloading](http://xania.org/200711/ambiguous-overloading)

我开始问自己“我不应该总是明确定义我的构造函数吗？”

所以我开始阅读比发现这篇文章更多的内容：

[http://www.sjbrown.co.uk/2004/05/01/always-use-explicit/](http://www.sjbrown.co.uk/2004/05/01/always-use-explicit/)

这显示了另一个例子，也解释了他背后的想法。但当然，这是一位博主的想法。

我很高兴听到你们中的一些人的意见，你对这种方式的看法，你对这个主题的经验以及任何一种方式的一些例子都会很好。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-15T12:38:26.093

传统观点认为，*采用一个参数*（通过使用默认参数显式或有效地）的构造函数应该被标记`explicit`，除非它们确实定义了转换（`std::string`可以从`const char*`后者的一个示例转换）。您自己已经弄清楚了原因，因为隐式转换确实会使生活变得比必须的更难。

一个可能明显的例外是复制构造函数。或者也许另一种方式是考虑大多数类型可以相互转换，因此复制构造函数`explicit`大部分时间都没有标记。

虽然看起来标记所有其他类型的构造函数`explicit`并没有什么坏处，但我反对它。因为虽然`explicit`在 C++03 中对采用多个参数的构造函数没有影响，但它在 C++11 中确实有效。将其放入代码中：

```
struct foo {
    explicit foo(int i);
    foo(int i, int j);
    explicit foo(int i, int j, int k);
};

foo make_foo()
{
    /* Not C++11-specific: */
    // Error: no conversion from int to foo
    return 42;

    // Okay: construction, not conversion
    return foo(42);

    // Okay: constructions
    return foo(42, 42);
    return foo(42, 42, 42);

    /* C++11 specific: */
    // Error: no conversion from int to foo
    return { 42 };

    // Not an error, not a conversion
    return { 42, 42 };

    // Error! Constructor is explicit
    return { 42, 42, 42 };
    // Not an error, direct-initialization syntax
    return foo { 42, 42, 42 };
} 
```

我个人觉得在返回的函数中`foo`我必须显式地返回不必要的冗长`foo { 42, 42, 42 }`。我看不出是什么`explicit`在保护我。我真的希望`{ initializers... }`语法意味着“从给定的初始化程序构造对象”，并`explicit`在将我从无到有的情况下进入其中。（因为`{ i }`确实归结为`i`在复制初始化的背景下——大多数时候——我很乐意放弃那个。）

所以我想说养成使用`explicit`一元构造函数的习惯，*而且那些只有*.

# php - 如何引用要删除的 ID

> ID：12437242
> 
> 赞同：-3
> 
> 时间：2012-09-15T12:09:56.297
> 
> 标签：php, jquery

我正在尝试使用 jquery 删除 div，但我不知道如何引用 ID，因为它是 PHP var: id="delete$count"

我的Javascript代码：

```
 <script type="text/javascript">
 function deleteFile(fname,directory)
 {
 $.ajax({ url: "delete_img.php",
    data: {"file":fname,"directory":directory},
    type: 'post',
    success: function(output) {
      alert(output);

    $('div').remove();
             }
     });
   }
  </script> 
```

我的PHP代码：

```
 $count=1;
     echo '<div class="gallery-item" id="delete$count"></div>';
     echo "<div><a class='ico ico-delete' rel='9' rev='2' href='#'onclick='deleteFile(\"$file\",\"$directory\")'>
    </a></div>";                    
    $count++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:37:38.317

我认为下面将`delete$count`逐字发送到响应流而不进行评估`$count`

```
echo '<div class="gallery-item" id="delete$count"></div>'; 
```

将其更改为

```
echo "<div class='gallery-item' id='delete$count'></div>"; 
```

以便 PHP 进行插值`$count`。

然后尝试将此作为第三个参数传递给您的函数

```
echo "<div><a class='ico ico-delete' rel='9' rev='2' href='#'onclick='deleteFile(\"$file\",\"$directory\",\"delete$count\")'> 
```

并在第三个参数中收集它的值

```
function deleteFile(fname,directory, deletecount) {  } 
```

并更换

```
$('div').remove(); 
```

经过`$('#' + deletecount).remove();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:33:37.480

如果我理解正确，您希望实现以下目标：

1.  使用 AJAX 告诉服务器删除文件
2.  从当前视图中删除相同的文件而不重新加载页面

如果您从数据库中读取文件信息，我建议您使用 row-id 或类似于 'gallery-item' ids 的东西，并作为 deleteFile() 函数的参数。如果您不这样做，您可以改用 $directory 和 $file 的配对值。

```
 echo '<div class="gallery-item" id="'. $directory . $file . '" ></div>';
 echo "<div><a class='ico ico-delete' rel='9' rev='2' href='#'onclick='deleteFile(\"$file\",\"$directory\")'>
</a></div>"; 
```

有了这个，你可以 `$('div').remove()`用`$('#'+directory+fname).remove()`

# regex - Sublime Text 搜索并在引号内插入内容

> ID：12437245
> 
> 赞同：7
> 
> 时间：2012-09-15T12:10:20.340
> 
> 标签：regex, sublimetext2, sublimetext

原来的：

```
description: Hello World
description: Hello India
description: Hello Guys 
```

我在一个 yaml 文件中有 20000 行，我想搜索并将**描述**的内容放在**双引号**中，描述的**内容每行都不同**

我想：

```
description: "Hello World"
description: "Hello India"
description: "Hello Guys" 
```

那么这件事是否可行，如果可以，那么你能建议我怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T13:07:21.977

您可以使用带有查找和替换的正则表达式（菜单：查找/替换）。在查找框中键入：

```
description: (.*) 
```

在替换框中：

```
description: "$1" 
```

然后按*替换*。

记得选中“正则表达式”框：

![在此处输入图像描述](../Images/18164aec17a14785131a1481b736f610.png)

# c - 为什么我的 C 编译器找不到一些头文件？

> ID：12437252
> 
> 赞同：1
> 
> 时间：2012-09-15T12:10:54.410
> 
> 标签：c, ubuntu, compiler-construction, makefile

我正在阅读[Zed Shaw 的 Learn C the Hard Way](http://c.learncodethehardway.org/book/)一书，我目前正在尝试使用[bstring 库](http://bstring.sourceforge.net/)，为库中的一些更常见的函数编写测试以更好地学习它们。起初我在 OS X 上工作，但现在需要在 Ubuntu 机器上工作，编译器让我很伤心。

这是 Makefile： http: [//pastebin.com/bxCcH0w5](http://pastebin.com/bxCcH0w5)

这是我到目前为止的单元测试（我省略了实际运行测试的函数；mu_assert 是 minunit.h 中的宏）：

```
#include "minunit.h"
#include <lcthw/bstrlib.h>

char *test_bfromcstr()
{
    char *test = "asdf";
    bstring res = NULL;
    res = bfromcstr(test);

    mu_assert(res != NULL, "bstring should not be NULL.");
    mu_assert(blength(res) == (int) strlen(test), "bstring length should match our test data");
    mu_assert(strcmp((char *)bdata(res),test) == 0, "bstring data should be same.");

    bdestroy(res);

    return NULL;
}

char *test_blk2bstr()
{
    char *test = "qwerty";
    int L = 6;
    bstring res = NULL;
    res = blk2bstr(test, L);

    mu_assert(res != NULL, "bstring should not be NULL.");
    mu_assert(blength(res) == L, "bstring length should match our test data");
    mu_assert(strcmp((char *)bdata(res),test) == 0, "bstring data should be same.");

    bdestroy(res);

    return NULL;
} 
```

此代码在 OS X 中编译干净，但这是我在 Ubuntu 上遇到的错误：

```
liblcthw(master*) $ make
ar rcs build/liblcthw.a src/lcthw/bstrlib.o src/lcthw/darray_algos.o src/lcthw/darray.o src/lcthw/list_algos.o src/lcthw/list.o src/lcthw/radixmap.o
ranlib build/liblcthw.a
cc -shared -o build/liblcthw.so src/lcthw/bstrlib.o src/lcthw/darray_algos.o src/lcthw/darray.o src/lcthw/list_algos.o src/lcthw/list.o src/lcthw/radixmap.o
cc -g -O2 -Wall -Wextra -Isrc/ -rdynamic -DNDEBUG  build/liblcthw.a    tests/bstr_tests.c   -o tests/bstr_tests
tests/bstr_tests.c: In function ‘test_bfromcstr’:
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c: In function ‘test_blk2bstr’:
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c: In function ‘main’:
tests/bstr_tests.c:136:1: warning: parameter ‘argc’ set but not used [-Wunused-but-set-parameter]
/tmp/ccZEG4Lr.o: In function `test_bfromcstr':
/home/blochs/cproject/liblcthw/tests/bstr_tests.c:8: undefined reference to `bfromcstr'
/home/blochs/cproject/liblcthw/tests/bstr_tests.c:14: undefined reference to `bdestroy'
/tmp/ccZEG4Lr.o: In function `test_blk2bstr':
/home/blochs/cproject/liblcthw/tests/bstr_tests.c:24: undefined reference to `blk2bstr'
/home/blochs/cproject/liblcthw/tests/bstr_tests.c:30: undefined reference to `bdestroy'
collect2: ld returned 1 exit status
make: *** [tests/bstr_tests] Error 1
liblcthw(master*) $ 
```

## 编辑

根据已被删除的评论，我修改了 Makefile 以包含在`-lBuild`命令末尾`CFLAGS`并添加（感谢 gcc，关心选项标志的位置......）*。*测试文件现在可以编译，但测试本身因以下错误而失败：`-llcthw`*`cc`*

 *```
liblcthw(master*) $ make
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/lcthw/bstrlib.o src/lcthw/bstrlib.c
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/lcthw/darray_algos.o src/lcthw/darray_algos.c
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/lcthw/darray.o src/lcthw/darray.c
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/lcthw/list_algos.o src/lcthw/list_algos.c
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/lcthw/list.o src/lcthw/list.c
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/lcthw/radixmap.o src/lcthw/radixmap.c
ar rcs build/liblcthw.a src/lcthw/bstrlib.o src/lcthw/darray_algos.o src/lcthw/darray.o src/lcthw/list_algos.o src/lcthw/list.o src/lcthw/radixmap.o
ranlib build/liblcthw.a
cc -shared -o build/liblcthw.so src/lcthw/bstrlib.o src/lcthw/darray_algos.o src/lcthw/darray.o src/lcthw/list_algos.o src/lcthw/list.o src/lcthw/radixmap.o
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -Lbuild tests/bstr_tests.c -o tests/bstr_tests -llcthw -lbsd
tests/bstr_tests.c: In function ‘test_bfromcstr’:
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:12:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c: In function ‘test_blk2bstr’:
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c:28:2: warning: null argument where non-null required (argument 1) [-Wnonnull]
tests/bstr_tests.c: In function ‘main’:
tests/bstr_tests.c:136:1: warning: parameter ‘argc’ set but not used [-Wunused-but-set-parameter]
sh ./tests/runtests.sh
Running unit tests:
ERROR in test tests/bstr_tests: here's tests/tests.log
------
./tests/bstr_tests: error while loading shared libraries: liblcthw.so: cannot open shared object file: No such file or directory
make: *** [tests] Error 1
liblcthw(master*) $ 
```

哇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:06:59.970

**静态链接库**

尝试将库的引用放在`build/liblcthw.a` **in** `tests/bstr_tests.c`的`gcc`命令行选项之后，如下所示：

```
cc -g -O2 -Wall -Wextra -Isrc/ -rdynamic -DNDEBUG -o tests/bstr_tests tests/bstr_tests.c build/liblcthw.a 
```

**动态链接库**

```
cc -g -O2 -Wall -Wextra -Isrc/ -rdynamic -DNDEBUG -o tests/bstr_tests tests/bstr_tests.c -Lbuild -llcthw 
```

还将共享对象的路径添加到您尝试运行最终可执行文件的环境`liblcthw.so`变量中。`LD_LIBRARY_PATH`*

# c - C unsigned char 字符串数组

> ID：12437256
> 
> 赞同：4
> 
> 时间：2012-09-15T12:11:07.907
> 
> 标签：c, arrays, string

我有一个这样的字符串数组

```
char *T[] = {"0000", "0001", "0010", "0011", "0100", "0101", "0110", "0111", "1000", "1001", "1010", "1011", "1100", "1101", "1110", "1111"}; 
```

但是，当我这样做时，每个字符串都是一个无符号字符数组

```
unsigned char *T[] = {"0000", "0001", "0010", "0011", "0100", "0101", "0110", "0111", "1000", "1001", "1010", "1011", "1100", "1101", "1110", "1111"}; 
```

我收到错误“使用 'char[5]' 类型的表达式初始化 'unsigned char *' 在指向具有不同符号的整数类型的指针之间转换。” 我猜这意味着正在使用的“0”和“1”的一些表示已签名，但我不确定为什么/如何处理它。我想要一个字符串数组，其中每个字符串都是一个无符号字符数组，而不是有符号字符数组。有人可以帮忙吗？

注意：这是针对硬件问题，但不是实际问题，只是许多可能解决方案之一中的一小步。但是，如果您能在不给我明确答案的情况下帮助我理解它，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T12:33:48.710

C 字符串是表示字符串的多种方式之一，由具有值`char`的尾随终止的数组组成。当你的代码中有“0000”时，这就是你得到的类型。`char``null`

您想要的是将“0000”分配为由具有空值`unsigned char`的尾随终止的数组。`unsigned char`考虑到您从什么开始，您将不得不进行转换，或者可能以不需要转换的方式表示您的初始数据。

```
unsigned char T[][] = { { 0x30, 0x30, 0x30, 0x30, 0x00 }, 
               { 0x30, 0x30, 0x30, 0x31, 0x00 }, 
               { 0x30, 0x30, 0x31, 0x30, 0x00 }, 
               { 0x30, 0x30, 0x31, 0x31, 0x00 }, 
               { 0x30, 0x31, 0x30, 0x30, 0x00 }, 
               { 0x30, 0x31, 0x30, 0x31, 0x00 }, 
               { 0x30, 0x31, 0x31, 0x30, 0x00 }, 
               { 0x30, 0x31, 0x31, 0x31, 0x00 }, 
               { 0x31, 0x30, 0x30, 0x30, 0x00 }, 
               { 0x31, 0x30, 0x30, 0x31, 0x00 }, 
               { 0x31, 0x30, 0x31, 0x30, 0x00 }, 
               { 0x31, 0x30, 0x31, 0x31, 0x00 }, 
               { 0x31, 0x31, 0x30, 0x30, 0x00 }, 
               { 0x31, 0x31, 0x30, 0x31, 0x00 }, 
               { 0x31, 0x31, 0x31, 0x30, 0x00 }, 
               { 0x31, 0x31, 0x31, 0x31, 0x00 }
              }; 
```

我看到这种方法的主要问题是它首先消除了拥有 C 样式字符串的大部分优势。使用无符号字符“字符串”，您没有任何标准字符串库可供您使用，因此如果您想使用，则必须转换回有符号字符字符串类型`printf`，或任何其他面向字符串的函数。

实际上，您只为每个可能的字符位置“0”和“1”使用了两个值。除非有令人信服的理由在字符串中执行此操作，否则请考虑使用布尔值数组来减少像“0hello”这样的字符串进入代码的机会，或者*更好*的是，如果您已经了解了位字段，请使用unsigned char 中的位作为位字段（丢弃您正在处理字符串的任何概念）。

最后一种技术的优点包括使用较少的内存，并且该值不能为 0 或 1 以外的值；但是，您必须编写一小部分例程来将打包的位转换为人类可读的内容。

```
unsigned char[] = { 0x00, 0x01, 0x02, 0x03, 0x04,
                    0x05, 0x06, 0x07, 0x08, 0x09,
                    0x0A, 0x0B, 0x0C, 0x0D, 0x0E,
                    0x0F };

void displayChar(unsigned char value) {
  switch (value) {
    case 0x00: printf("0000"); break;
    case 0x01: printf("0001"); break;
    case 0x02: printf("0010"); break;
    case 0x03: printf("0011"); break;
... and so on ... 
```

# jquery - jQuery find() 查找 后面的文字

> ID：12437262
> 
> 赞同：1
> 
> 时间：2012-09-15T12:11:45.063
> 
> 标签：jquery, lightbox, caption

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:14:28.150

你需要这样做：

```
$('a[rel^=lightbox]').each(function() {
  $(this).attr('title', $(this).find('figcaption').text();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:14:53.827

你的点击事件在哪里..??

```
<script>
   $(document).ready(function () {
   $('a').click(function(){
   $('a[rel^=lightbox]').attr('title', $(this).find('figcaption').html());
   })
     });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:15:19.883

这应该有效：

```
 $('a[rel^=lightbox]').attr('title', $(this).parent().find('figcaption').text(); 
```

需要在`figcaption`元素的父元素中找到该`a`元素。

# python - 使用布尔索引就地修改 numpy 数组部分

> ID：12437264
> 
> 赞同：12
> 
> 时间：2012-09-15T12:11:59.137
> 
> 标签：python, numpy

给定一个 2D numpy 数组，即；

```
import numpy as np

data = np.array([
     [11,12,13],
     [21,22,23],
     [31,32,33],
     [41,42,43],         
     ]) 
```

我需要根据所需行和列的两个掩码向量修改一个子数组；

```
rows = np.array([False, False, True, True], dtype=bool)
cols = np.array([True, True, False], dtype=bool) 
```

这样，即；

```
print data

 #[[11,12,13],
 # [21,22,23],
 # [0,0,33],
 # [0,0,43]] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T12:16:36.883

[既然](https://stackoverflow.com/questions/12436983/copy-or-view-numpy-subarray-using-boolean-indexing/)您知道如何访问所需的行/列，只需将所需的值分配给子数组即可。不过，这有点棘手：

```
mask = rows[:,None]*cols[None,:]
data[mask] = 0 
```

原因是当我们访问子数组时`data[rows][:,cols]`（如您[之前的问题](https://stackoverflow.com/questions/12436983/copy-or-view-numpy-subarray-using-boolean-indexing)所示，我们正在查看视图，并且对原始数据的一些引用会丢失。

相反，我们在这里通过广播两个 1D 数组`rows`和`cols`一个与另一个数组来构造一个 2D 布尔数组。您的`mask`数组现在具有形状`(len(rows),len(cols)`。我们可以使用`mask`直接访问 的原始项`data`，并将它们设置为新值。请注意，当您这样做时，您会得到一个一维数组，这不是您在[上一个问题](https://stackoverflow.com/questions/12436983/copy-or-view-numpy-subarray-using-boolean-indexing)`data[mask]`中想要的答案。

为了构造掩码，我们可以使用`&`运算符而不是`*`（因为我们正在处理布尔数组），或者更简单的[`np.outer`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.outer.html)函数：

```
mask = np.outer(rows,cols) 
```

*编辑：向@Marcus Jones 提供`np.outer`解决方案的道具。*

# wpf - 在 Silverlight / WPF 中克隆 PathGeometry

> ID：12437267
> 
> 赞同：1
> 
> 时间：2012-09-15T12:12:17.753
> 
> 标签：wpf, silverlight

我有一个简单的处理程序，可以将椭圆添加到空的 Silverlight 画布

```
 private void UCLoaded(object sender, RoutedEventArgs e)
    {
        var geometry = MakeElipse(20, 15, new Point(100, 100));
        var ellipsePath = new Path
        {
            Data = geometry,
            Fill = new SolidColorBrush(Colors.DarkGray),
            StrokeThickness = 4,
            Stroke = new SolidColorBrush(Colors.Gray)
        };
        LayoutRoot.Children.Add(ellipsePath);
        //
        var duplicateEllipsePath = new Path();
        //duplicateEllipsePath.Data = ellipsePath.Data; 
        duplicateEllipsePath.Data = geometry;
        duplicateEllipsePath.Fill = ellipsePath.Fill; 
        duplicateEllipsePath.StrokeThickness = ellipsePath.StrokeThickness;
        duplicateEllipsePath.Stroke = ellipsePath.Stroke;
        LayoutRoot.Children.Add(duplicateEllipsePath);
    } 
```

第一个椭圆 ellipsePath 很好，可以按预期呈现。但是该行`duplicateEllipsePath.Data = ellipsePath.Data`或替代`duplicateEllipsePath.Data = geometry`项都会引发 System.ArgumentException “值不在预期范围内”。它怎么可能一次在范围内，然后立即超出范围？在这样的代码中复制路径的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:57:29.363

看起来克隆路径的唯一方法是手动进行。引用罗一伦[的回答](http://forums.silverlight.net/p/22418/79927.aspx#79706)：

> Data 属性实际上是一个 Geometry。虽然在 Silverlight 中并不明显，但 A Geometry 实际上依赖于底层系统资源（因为它需要绘制一些东西）。如果您需要绘制另一个几何图形，则需要另一个系统资源。因此，您必须先克隆它，然后再将其分配给新路径。在 WPF 中，我们在 Geometry 上确实有一个 Clone 方法，不幸的是，Silverlight 不支持这种方法。所以你必须手动进行克隆。

[Yi-Lun 声称包含用于克隆几何图形的反射代码的另一篇文章，此处](http://kiwigis.blogspot.co.uk/2010/06/cloning-path-geometry-in-silverlight.html)似乎出现了相同的代码，尽管后者的格式更清晰。但是，在您的情况下，使用这样的方法似乎有点矫枉过正。您使用的几何图形是由您的`MakeElipse`[sic] 方法创建的。将生成几何图形的通用代码提取到一个方法中似乎是最好的方法。

错误消息“值不在预期范围内”有点误导。我没有看到任何“超出范围”的东西，因为假定完全相同的对象在您的第一个椭圆的范围内。我无法确切说明为什么会报告此错误消息，但我可以推测。Silverlight 是在本机代码中实现的，我相信由于本机代码不能抛出异常，它会返回数字错误代码。也许错误代码的数量有限，而“值不在预期范围内”的错误代码是为该错误选择的错误代码？

# html - apple-touch-icons 是否需要使用“标准”文件名约定，或者我可以随意称呼它们吗？

> ID：12437281
> 
> 赞同：9
> 
> 时间：2012-09-15T12:14:06.800
> 
> 标签：html, ios

通过“标准”文件名约定，我的意思是：

*   苹果触摸icon.png
*   苹果触摸图标 72x72.png
*   苹果触摸图标 114x114.png
*   苹果触摸图标 144x144.png

我知道可以在 HTML 中省略对这些图标的引用，iOS 会自动在根目录中搜索具有这些文件名的文件。

但是，假设我要在 HTML 中包含对这些图标的引用，是否允许对图标图像文件使用不同的文件名？例如：

*   我的触摸图标 114x114.png
*   123456-114x114.png
*   一些独特的 id-114x114.png

所以在我的 HTML 中，它看起来像这样：

```
<link rel="apple-touch-icon" href="path/to/icons/some-unique-id.png">
<link rel="apple-touch-icon" sizes="72x72" href="path/to/icons/some-unique-id-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="path/to/icons/some-unique-id-114x114.png">
<link rel="apple-touch-icon" sizes="144x144" href="path/to/icons/some-unique-id-144x144.png"> 
```

我问的原因是我需要为我网站的不同部分/页面使用不同的图标，并且我想将所有图标存储在一个目录中。显然我不能存储每个图标的多个版本都具有相同的文件名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:17:28.883

是的，如果您使用`<link>`标签正确链接到您的图标文件，那么 iOS 应该仍然能够找到它们并且您不必遵循标准命名约定。

# c++ - C ++中克隆系统调用语句中的错误

> ID：12437282
> 
> 赞同：-1
> 
> 时间：2012-09-15T12:14:09.007
> 
> 标签：c++, linux, clone

我正在尝试在内部使用克隆的 c++ 中运行 c 代码，我遇到了一个我无法解决的错误，任何人以前在 c++ 中使用过克隆，并且可以提供帮助。

我的代码：

```
int variable, fd;
using namespace std ;
int do_something() {
variable = 42;cout << "sana" << endl ;
close(fd);
_exit(0);
}

int main() {
void **child_stack;
char tempch;

variable = 9;
fd = open("test.file", O_RDONLY);
child_stack = (void **) malloc(16384);
printf("The variable was %d\n", variable);

clone(do_something, child_stack,CLONE_VM|CLONE_FILES, NULL);
sleep(1);

printf("The variable is now %d\n", variable);
if (read(fd, &tempch, 1) < 1) {
  perror("File Read Error");
  exit(1);
}
printf("We could read from the file\n");
return 0;
} 
```

我得到了错误：

dell@ubuntu:~$ g++ n.cpp -on n.cpp: In function 'int main()': n.cpp:40:62: error: invalid conversion from 'int ( *)()' to 'int (* ) (void*)' [-fpermissive] /usr/include/x86_64-linux-gnu/bits/sched.h:83:12: 错误：初始化参数 1 的 'int clone(int ( *)(void* ), void*, int, void*, ...)' [-fpermissive] dell@ubuntu:~$

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:20:55.103

编译器告诉你第一个参数`clone`应该是`int(*)(void*)`（一个指向带一个`void*`参数并返回的函数的指针`int`）并且你试图传递它`int(*)()`（一个指向*不*带参数并返回的函数的指针`int`）。

前者不能隐式转换为后者，因此会出现错误。

要修复它，您可以定义`do_something`为：

```
int do_something(void*)
{
    // your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:21:33.927

你真的不应该使用[clone(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clone.2.html)系统调用。它是（某种）保留的 - 像[futex(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/futex.2.html) - 用于 pthread 的实现。而 C++11 标准实际上要求将 pthread 链接到已编译的应用程序中。

如果您想使用`clone`（这可能是一个错误），请将自己限制为 C，并小心避免`pthread`需要该库，即使是间接的；通过您的应用程序。

如果您坚持使用`clone`，它的`child_stack`参数应该适当地对齐（至少到 4Kbytes 的页面），并且`malloc`不保证这一点。您可以使用`mmap`或`posix_memalign`。

但实际上，不要使用`clone`（尤其不是来自 C++）。使用 pthread。

# c# - OLEDB excel插入不需要的字符（'）

> ID：12437284
> 
> 赞同：1
> 
> 时间：2012-09-15T12:14:16.493
> 
> 标签：c#, excel, odbc, oledb, insert-update

在excel公式栏中插入后，我得到了不需要的字符`'`，它限制了日期等字段类型以特定格式转换

```
query="INSERT INTO [book$] ([Book Name]) VALUES ('" + txtbookname.Text +"')"; 
```

插入后该值为字符串类型

例如：如果我`I AM`在 excel 单元格中插入，它将是相同的。

但是当要*编辑*该单元格时，它会显示`'I AM`. 我不想要那个`'`角色一开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:22:12.327

（就像你几乎说的`'`那样）表示单元格是文本类型。

简而言之，对于文本值，不要担心：这只是 Excel 的说法“这是文本内容，而不是公式或任何东西”。无论如何它都不会出现。（历史注释：我相信这个约定源于最初的 Lotus 123 兼容性，如果有记忆的话）。

这是为了防止出现问题（想象一下，如果您插入 text `=3*7`，是否应该将其解释为公式？）。

现在，我以前没有将 Excel 与 OleDB 提供程序一起使用，但我几乎可以肯定，您可以通过实际插入日期（或数字，或...）而不是字符串值来获得所需的效果。例如：

```
INSERT INTO [book$] ([Copies]) VALUES (42) 
```

将插入单元格内容`42`

```
INSERT INTO [book$] ([Copies]) VALUES ('42') 
```

将插入单元格内容`'42`

# linux - Tasklet 是如何工作的？

> ID：12437291
> 
> 赞同：-2
> 
> 时间：2012-09-15T12:15:12.367
> 
> 标签：linux

处理小任务时是否禁用中断，因为它们应该在中断上下文中运行。如果在处理小任务时它们被禁用，那么调用它们的下半部分机制有什么意义，因为它与中断的顶部相同禁用。或者它是否像 tasklet 仅在多处理器系统上有用，其中在一个处理器上生成中断，并且在另一个处理器上调度相应的 tasklet，当 tasklet 运行时，在另一个处理器上禁用中断。请说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:16:48.763

Linux将中断处理分为两部分：

*   首先，您以尽可能简单的方式处理中断请求 (IRQ)，尽可能少做，并安排一个 softirq/tasklet 来完成较重的处理部分。
*   然后，softirq/tasklet 被调度，繁重的处理开始。

Linux 中的上下文是：

*   **NMI 上下文**
*   **hardirq context**：上面中断处理的第一部分。
*   **softirq context**：上面中断处理的第二部分。

*   **中断上下文**：以上任何一种。

*   **进程/用户上下文**：代表进程运行，例如：由于系统调用。与中断上下文相反。

*   **原子上下文**：中断上下文，或者在一段代码中的进程上下文中必须是原子的（不能被中断），例如：因为我们采用了自旋锁。

运行 tasklet 时不会禁用中断。对同一 tasklet 的进一步调用是。

# java - 将实体迁移到 HRD 时，@Parent 键变为空

> ID：12437293
> 
> 赞同：0
> 
> 时间：2012-09-15T12:15:26.733
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我正在将现有的 Google AppEngine 应用程序从主从数据存储 (MSD) 移动到新的高复制数据存储 (HRD)。该应用程序是用 Java 编写的，使用 Objectify 3.1 实现持久性。

在我的旧（MSD）应用程序中，我有一个实体，例如：

```
public class Session {
  @Id public Long id;
  public Key<Member> member;
  /* other properties and methods */
} 
```

在新的（HRD）应用程序中，我将其更改为：

```
public class Session {
  @Id public Long id;
  // HRD: @Parent is needed to ensure strongly consistent queries.
  @Parent public Key<Member> member;
  /* other properties and methods */
} 
```

我需要 Session 对象与其父 Member 对象高度一致。

当我使用 Google 的 HRD 迁移工具迁移（工作副本）我的应用程序时，所有成员和会话都在那里。但是，Session 对象的所有成员属性都变为空。显然，这些属性没有迁移。

我准备重新设置我的 Session 对象，但如果成员属性为空，那是不可能的。谁能解释我做错了什么，如果这个问题可以解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:49:05.130

@Id 和 @Parent 不是基础实体中的“真实”属性。它们是定义实体的键的一部分；Objectify 将它们映射到 POJO 上的属性。

您尝试进行的转换是 GAE 中更复杂的问题之一。请记住，具有不同父级的实体（例如，某个值与空值）是*不同的实体*；它有一个不同的键。例如，加载具有 null 父级的实体、将父级设置为一个值并保存该实体，并不会*更改*该实体——它会创建一个新实体。您仍然需要删除旧实体并更新任何外键引用。

最好的办法是使用常规的“成员”字段按原样导入数据。您还可以拥有@Parent 字段（可以任意命名；您可以随时重命名它，因为它不是“真实”属性）。迁移后，通过您的数据：

1.  加载每个会话
2.  检查 null parentMember。如果为空：
3.  分配 parentMember 并保存实体
4.  删除 parentMember 为空的实体

如果你这样做，要非常小心外键引用。

# delphi - delphi 服务应用程序在 15 秒后停止，计时器未执行

> ID：12437294
> 
> 赞同：1
> 
> 时间：2012-09-15T12:15:44.397
> 
> 标签：delphi, service, timer

我想在 Delphi 中制作服务应用程序，每天下午 02:00 运行和复制一些文件。所以我使用了计时器。但控制不去定时器事件和服务在 15 秒内终止。我写了一个关于 Timer Event 的代码。我如何在服务中使用计时器？请帮忙。提前致谢。

我的代码在这里：

```
unit untMain;

interface

uses
Winapi.Windows, Winapi.Messages, System.SysUtils, System.Classes, Vcl.Graphics,
Vcl.Controls, Vcl.SvcMgr, Vcl.Dialogs, Vcl.ExtCtrls, DateUtils, Vcl.Forms,
untCommon;

type
TsrvBackupService = class(TService)
tmrCopy: TTimer;
procedure tmrCopyTimer(Sender: TObject);

private
strlstFiles : TStringList;
{ Private declarations }
public
{ Public declarations }
end;

var
srvBackupService: TsrvBackupService;

implementation

{$R *.DFM}

procedure ServiceController(CtrlCode: DWord); stdcall;
begin
srvBackupService.Controller(CtrlCode);
end;

procedure TsrvBackupService.tmrCopyTimer(Sender: TObject);
var
strCurTime   : string;
strBKPpath   : string;
strBKPTime   : string;
NowDay       : word;
NowMonth     : word;
NowYear      : word;
NowHour      : word;
NowMin       : word;
NowSec       : word;
NowMilli     : Word;
begin
  DecodeTime(now,NowHour,NowMin,NowSec,NowMilli);
  strCurTime := IntToStr(NowHour)+':'+IntToStr(NowMin);
  strBKPTime := '14:00'
  strBKPpath := ExtractFilePath(Application.ExeName);
  if strCurTime = strBKPTime then begin
     Try
           CopyFile(PChar('c:\datafile.doc'),PChar(strBKPpath + 'datafile.doc'),true);
     except
        on l_e: exception do begin
           MessageDlg(l_E.Message,mtError,[mbOk],0);
        end;
     end;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T12:27:11.380

代替计时器，使用在 OnStart 事件中启动的简单线程。

教程在这里：

[http://www.tolderlund.eu/delphi/service/service.htm](http://www.tolderlund.eu/delphi/service/service.htm)

TTimer 更适合 GUI 应用程序。他们需要一个消息泵（见[这里](http://objectmix.com/delphi/403332-ttimer-service.html)）：

> TTimer 需要一个正在运行的消息队列，以便接收允许操作系统将消息传递给 HWND 的 WM_TIMER 消息，或触发指定的回调

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:50:30.037

正如其他人所解释的那样，您不能简单地`TTimer`在 Windows 服务应用程序中使用组件，因为它依赖于默认情况下不在服务中的消息泵。我看到四个主要选项：

1.  实现一个[消息泵](https://stackoverflow.com/questions/582115/postmessage-in-service-applications)`TTimer`，以便能够使用
2.  使用[线程](http://edn.embarcadero.com/article/22411)不断检查日期/时间
3.  就像 #2 一样，使用服务的[`OnExecute`事件](http://docwiki.embarcadero.com/Libraries/en/Vcl.SvcMgr.TService.OnExecute)来检查日期/时间
4.  利用 Windows 的[计划任务](http://msdn.microsoft.com/en-us/library/aa383614%28VS.85%29.aspx)

我会推荐上面的＃2，这就是原因。

＃1对于您的情况可能有点多，我敢肯定您不想走那么远。

#3 可能更容易，但服务的线程需要一些特殊处理，我也确信你不需要关心。

#4 可能是理想的解决方案，但我不会试图改变您对服务的决定。

创建线程是可行的方法，因为它相当简单且可扩展。我所有的服务应用程序都在多线程基础上工作，除了处理实际服务之外，没有任何东西进入实际服务的线程。

我正在为你制作一个样本，但我把它弄得太复杂了，把它包括在这里会造成很多污染。我希望至少我能让你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T13:12:06.813

当您说“服务在 15 秒后终止”时，我觉得您正在调试代码。

如果您没有任何选项并且无法使用其他人的建议，那么**当您通过 services.msc 安装和启动服务时**，计时器事件会正确触发。但是，如果您正在调试服务，**则不会触发**计时器事件并且应用程序将终止（如您所说）。我将创建一个在计时器事件中调用的过程，并在 ServiceExecute 事件中调用它一次，因此您可以像这样调试：

```
procedure TSomeService.ServiceExecute(Sender: TService);
begin
  ExecuteSomeProcess(); // Put breakpoint here to debug
  while not self.Terminated do
    ServiceThread.ProcessRequests(true);
end;

procedure TSomeService.TimerTimer(Sender: TObject);
begin
  timer.Enabled := false;
  ExecuteSomeProcess(); // This can't throw any exception!
  timer.Enabled := true;
end; 
```

# php - 特定国家/地区的 Magento 产品

> ID：12437297
> 
> 赞同：0
> 
> 时间：2012-09-15T12:16:01.890
> 
> 标签：php, mysql, magento, e-commerce, magento-1.6

我想根据国家/地区建立一个magento商店。

每个产品都被分配到列表中的一个国家。在商店视图中，产品应根据所选国家/地区出现（如语言切换）。

如何通过使用 magento 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:14:34.400

为每个国家/地区创建一个类别，并将正确的产品放入正确的类别中。在系统 > 管理商店中，您可以添加商店。为每个国家/地区添加一个商店。将商店根类别设置为正确的类别。确保根据访问者国家/地区加载正确的商店。现在每个国家都有自己的产品。

# javascript - 用于动画滚动的 jQuery 延迟加载

> ID：12437300
> 
> 赞同：0
> 
> 时间：2012-09-15T12:16:20.273
> 
> 标签：javascript, jquery, lazy-loading

我想使用[延迟加载](http://www.appelsiini.net/projects/lazyload)到我的网站，但有一个小问题：我用 JS 滚动内容（用 X px 为内容设置动画），所以我不使用滚动条。可悲的是，在这种情况下不会触发延迟加载。有任何想法如何制作这个吗？

我的网站水平滚动，所有内容`div`-s 彼此靠近浮动，只有当前内容可见，所有其他内容都打开`display: none;`

这是我网站的一张不太专业的图片：我用黑色标记了可见区域，用红色标记了移动部件。

[我在图片中的网站](http://i.stack.imgur.com/ok1kC.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:24:36.580

我能想到的就是在内容滑动时挂钩，然后如果这是您的目标，则使用 AJAX 添加图像或整个内容。插件通常会专注于大多数用例，因此延迟加载可能对您不利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:28:43.857

我只想编写自己的简单延迟加载脚本：

```
$(function(){
  $('img').each(function(){
    var $this = $(this)
    $this.data('origImg',$this.attr('src'))
    $this.removeAttr('src') // or set a placeholder img
  })
  var $window = $(window), $container = $('#sliding_content')
  window.lazyLoad = function () {
    $container.find('img:not([src])').each(function(){
      var $this = $(this), left = $this.offset().left
      if (!(left < 0) && !(left > $window.width()))
        $this.attr('src',$this.data('origImg'))
    })
  }
}) 
```

然后当 div 动画时，调用`lazyLoad()`. 让我知道这是否适合您。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:55:59.947

好的，几个小时后，我决定为此使用 JAIL。不是最好的解决方案，但总比没有好，因为我对 AJAX [JAIL aka jQuery Asynchronous Image Loader很笨](http://www.sebastianoarmelibattana.com/projects/jail)

# python - 简单的 GET-POST 回复

> ID：12437309
> 
> 赞同：1
> 
> 时间：2012-09-15T12:17:16.377
> 
> 标签：python, html, google-app-engine

想不通这个，对某人来说应该是一件容易的事。只是收到一个 500 服务器错误回复并期望它显示“成功”。

```
import webapp2
page = """
<!DOCTYPE html>
<html>
  <form method="post">
    <input type="hidden" value="success" name="radius" >
    <input type="submit">
</form>
  </body>
</html>
"""
class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(page)
    def post(self):
        radius = self.request.get("radius")
        self.response.out.write(radius)

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

app.yaml 如下

```
application: udatest85
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:51:55.647

当我用这个 app.yaml 运行那个确切的代码时，它似乎可以工作。按下后会出现一个按钮，您会收到成功消息。

```
application: stackquestion
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: main.app 
```

你可以发布你的 app.yaml 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T07:32:58.197

难以置信，但问题是我在缩进中混合使用了制表符和空格。我删除了间隔缩进并用制表符替换，问题解决了。

另外，我正在使用notepad ++编写代码。此后移至 PyCharm。

感谢您的帮助，从现在开始它将为我解决很多头疼的问题。

# sharepoint-2010 - 项目 2010 和项目服务器 2010 有什么区别？

> ID：12437320
> 
> 赞同：0
> 
> 时间：2012-09-15T12:19:42.263
> 
> 标签：sharepoint-2010, ms-project, ms-project-server-2010

project 2010 和 project server 2010 特别与 sharepoint 2010 集成有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:22:20.627

使用 Project 2010 Standard，您可以：

1.  管理本地项目
2.  管理存储在网络共享上的共享项目
3.  管理存储在项目内部的资源或管理存储在资源池文件中的资源
4.  链接本地和共享项目
5.  如果 ODBC（数据库）用于存储项目计划 - 您可以根据项目数据构建报告

Project 2010 Pro 是 Project 2010 标准 + 与 Project Server 一起使用的能力

使用 Project Server 2010，您可以使用 Project 2010 Standard + 进行所有操作：

1.  通过从一处查找来管理资源、安全性、视图、模板、自定义字段
2.  将工作流分配给项目计划
3.  您将获得另一个项目计划界面：Project Web 应用程序。它的成本比 Project 略低：PWA 大约 150 美元，Project Pro 大约 1500 美元。
4.  您的员工可以直接向项目报告他们的时间表和进度
5.  您将获得更好的报告：Project Server 包含 BI 报告
6.  用于处理项目的 API 比桌面 MS Project 提供的 COM 好得多
7.  将任务导出到 SharePoint 和 Outlook (Exchange Server)
8.  人们认为 Project Server 是企业解决方案，它为他们提供了一些超级企业功能，这些功能是桌面 MS Project 所没有的。

实际上，您可以使用其他技术的组合来实现大部分 Project Server 功能，但有时完成某些事情比重新发明轮子更好。

# windows - 如何缩短目录路径模式

> ID：12437333
> 
> 赞同：2
> 
> 时间：2012-09-15T12:22:42.647
> 
> 标签：windows, windows-7, command-line

我有一组大约 10.000 个具有以下结构的目录

```
./AAA/AAA/somedirs/file.txt
..
./BCDE/BCDE/somedirs/file.txt
..
./FGMAB/FGMAB/somedirs/file.txt
..
etc 
```

我想减少两个具有相同名称的连续目录的重复目录路径模式：

```
./X/X/etc/ 
```

到具有该名称的单个目录：

```
./X/etc/ 
```

我想在这样的 X/X 模式之后找到所有子结构，并使用如下命令将它们移动到 X/：

```
for /r /d %x in (*/%y/%y/*) do move "%x" ".." 
```

这确实运行，但它似乎并没有真正做任何事情。

任何人都知道是否以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:58:14.533

假设重复的名称都在树结构的顶部，如图所示，这样的事情应该可以工作：

```
md dummy\x
for /D %x in (*) do if exist %x\%x cmd /c "move %x dummy\x\%x & move dummy\x\%x\%x %x & rd dummy\x\%x" 
```

先测试一下！（请记住，当命令在批处理文件中时，百分号需要加倍。）

# assembly - 需要在用户模式下设置堆栈吗？

> ID：12437336
> 
> 赞同：0
> 
> 时间：2012-09-15T12:23:06.357
> 
> 标签：assembly, linux-kernel, windows-kernel

我一直在玩汇编和操作系统开发（在真实模式和保护模式下），因为我在内核模式下工作（“Ring 0”又名“Full Privileges”）我总是不得不担心之前设置堆栈使用堆栈指令（推/弹出）。

现在我一直在查看用户模式的 32 位汇编程序（适用于 windows 和 linux），并注意到我看到的所有程序示例都只是使用堆栈指令而没有先设置堆栈。这是什么意思？操作系统是否在启动所述进程之前自行设置进程堆栈？

提前致谢，

若昂席尔瓦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:26:00.347

你自己已经给出了答案：

为代码、全局数据（堆）和本地数据（堆栈）提供所有必要的内存是系统职责的一部分。

[更新：这不应该被忽视：一旦进入特权较低的环，就像任何用户空间应用程序通常那样，这个用户空间应用程序就不可能轻易地设置堆栈。它必须进行系统调用才能分配它。但是由于大约 99.999% 的应用程序需要一个堆栈，因此首先为所有用户空间应用程序提供一个堆栈同样经济，而不是强迫开发人员在每个程序中都请求它。/更新]

# android - 如何更新 setListAdapter？

> ID：12437338
> 
> 赞同：0
> 
> 时间：2012-09-15T12:23:15.427
> 
> 标签：android, android-listview, android-adapter

我正在使用 setListAdapter 在线显示用户..

这是我的代码：

```
Vector<String> myvector= Receiver.user;
int i =0;
String[] strings =new String[myvector.size()];
  for(String str : myvector) {
strings[i] = str;
  i++;
  }
setListAdapter(new ArrayAdapter<String>(Display.this, android.R.layout.simple_list_item_1, strings)); 
```

每次有新用户上线时，矢量都会更新。但显示不会改变。怎么更新？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:28:04.450

使用`notifyDataSetChanged()`ArrayAdapter

[在这里检查](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-15T12:29:03.677

将代码创建为方法

例如使它成为

```
public void yourMethod()
{
Vector<String> myvector= Receiver.user;
int i =0;
String[] strings =new String[myvector.size()];
  for(String str : myvector) {
strings[i] = str;
  i++;
  }
setListAdapter(new ArrayAdapter<String>(Display.this, android.R.layout.simple_list_item_1, strings));
} 
```

调用此方法。新创建用户时

让它工作

# javascript - 如何在javascript中检查我的任何文本框是否为空

> ID：12437339
> 
> 赞同：5
> 
> 时间：2012-09-15T12:23:41.843
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 检查输入是否为空](https://stackoverflow.com/questions/1854556/check-if-inputs-are-empty-using-jquery)

我有表单和文本框，一旦单击表单按钮，我将如何使用 javascript if else 语句确定这些文本框是否为空。

```
function checking() {
    var textBox = $('input:text').value;
    if (textBox == "") {
        $("#error").show('slow');
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T12:29:02.953

通过使用 jQuery 选择器来选择元素，你有一个 jQuery 对象，你应该使用`val()`方法来获取/设置输入元素的值。

另请注意，`:text`选择器已*弃用*，最好修剪文本以删除空白字符。您可以使用`$.trim`实用程序功能。

```
function checking() {
    var textBox =  $.trim( $('input[type=text]').val() )
    if (textBox == "") {
        $("#error").show('slow');
    }
} 
```

如果您想使用`value`属性，您应该首先将 jQuery 对象转换为原始 DOM 对象。您可以使用`[index]`或`get`方法。

```
 var textBox = $('input[type=text]')[0].value; 
```

如果你有多个输入，你应该循环它们。

```
function checking() {
    var empty = 0;
    $('input[type=text]').each(function(){
       if (this.value == "") {
           empty++;
           $("#error").show('slow');
       } 
    })
   alert(empty + ' empty input(s)')
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T12:24:29.253

您不能`value`与 jquery 对象使用`val()`函数一起使用，但这只会检查选择器返回的第一个文本框。

**[现场演示](http://jsfiddle.net/rajaadil/kz6FR/1/)**

```
function checking() {    
  var textBox = $('input:text').val();
  if (textBox == "") {
      $("#error").show('slow');
   }
} 
```

您可以附加`blur`事件并在`losing focus from each textbox.`

**[现场演示](http://jsfiddle.net/rajaadil/kz6FR/2/)**

```
$('input:text').blur(function() {    
    var textBox = $('input:text').val();
    if (textBox == "") {
        $("#error").show('slow');
    }
}); 
```

`submit button`根据与 OP 的讨论进行点击验证

​<strong>[现场演示](http://jsfiddle.net/rajaadil/kz6FR/3/)

```
$('#btnSubmit').click(function() { 
     $("#error").hide();    
     $('input:text').each(function(){
       if( $(this).val().length == 0)
          $("#error").show('slow');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T12:25:39.487

试试这个代码：

```
var textBox = $('input:text').val();

if (textBox==""){ 
  $("#error").show('slow'); 
} 
```

# perl - perl 上的功能不起作用

> ID：12437340
> 
> 赞同：-3
> 
> 时间：2012-09-15T12:23:46.257
> 
> 标签：perl, function

我有一个功能：

```
my $descr = 'Rand [Hi|Hello|Aloha] [Kate|Ann|Polly]';
print intrp($descr);

sub intrp($str)
{

my $str =~ s{
    \[ ( [^\]]* ) \]
}{
    my @choices = split /\|/, $1;
    $choices[rand(@choices)]
}xeg;

return $str;
} 
```

为什么它不起作用？=\ 我尝试了其他一些方法，但它们没有帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:34:48.837

你*永远不*应该在 Perl 子例程声明中使用原型。他们做一些非常具体的事情，除非你知道那是什么，否则你应该完全避免它们。特别是命名原型尚未被任何版本的 Perl 支持

您还应该*始终* 处于每个程序的顶部`use strict`。`use warnings`它将突出显示容易被忽略的错误，否则可能需要一段时间才能修复，并且在您向其他人寻求您的程序帮助之前是常见的礼貌

此版本的代码似乎可以正常工作

```
use strict;
use warnings;

my $descr = 'Rand [Hi|Hello|Aloha] [Kate|Ann|Polly]';
print intrp($descr);

sub intrp {

  my ($str) = @_;

  $str =~ s{ \[ ( [^\]]* ) \] }{
      my @choices = split /\|/, $1;
      $choices[rand(@choices)]
  }xeg;

  return $str;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:34:02.693

您的子程序应如下所示：

```
sub intrp
{
 my ($str) = @_;
 $str =~ s{
.... 
```

不是：

```
sub intrp($str)
... 
```

# iphone - 确定我客户的 iOS 版本

> ID：12437342
> 
> 赞同：0
> 
> 时间：2012-09-15T12:24:04.523
> 
> 标签：iphone, ios, app-store-connect

我正在尝试决定是否应该在我的应用程序的下一个版本中保持对 iOS 4.x 的支持，或者将其删除为仅支持 iOS 5 和 6。Apple 是否会向开发人员报告所售出的每个应用程序的 iOS 版本，以便我了解旧设备对我的应用程序的需求？我已经搜索了 iTunesConnect，但我没有在那里看到它。

我宁愿不维持那么远的支持，但如果用户社区在那里提出要求，那么这样做可能具有经济意义。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:27:40.213

Apple 不会通过 iTunes Connect 向您报告此情况。您需要通过第三方（如谷歌分析、flurry 或任何其他平台）将其集成到您的应用程序中。

`[[UIDevice currentDevice] systemVersion]`如果您可以推出自己的分析系统，那么报告版本也很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:29:23.927

正如 Jessedc 提到的，您可以使用`[[UIDevice currentDevice] systemVersion]`，但是，您不必推出自己的分析系统。一些分析平台（Google 的分析、Flurry 等）允许您通过自定义事件在**技术上**提交此信息，但请注意用户协议可能会禁止您这样做。

请注意，如果您想要准确的统计数据，我假设您这样做，您需要仔细确定何时将信息提交或重新提交到您的分析平台，否则，您可能会得到**非常**不准确的数据。

# facebook - 从服务器端发送应用请求

> ID：12437344
> 
> 赞同：6
> 
> 时间：2012-09-15T12:24:27.720
> 
> 标签：facebook, facebook-graph-api

我正在构建一个 facebook 应用程序，用户可以在其中创建邀请并邀请他们的朋友加入活动。它有 3 个步骤，第二步有一个自定义朋友选择器，我让用户选择他/她想邀请的一些朋友。在确认我想向被邀请者发送通知/消息/请求后的第 3 步中，我想不出一个好的方法来做到这一点。

我不能使用 JS 好友请求，因为我有一个自定义好友选择器。我找不到从服务器端发送消息的方法。我能够发送应用请求，但只能发送给应用用户。

有没有办法向用户发送他被朋友邀请参加活动的小通知？

*并非所有受邀者都是应用程序用户 *并非所有用户都接受 TOS *在受邀者接受或拒绝邀请之前不要发布到墙上

任何指针将不胜感激。

**更新**

希望这可以帮助某人。这是我能够发送服务器端请求的方式。

```
@oauth = Koala::Facebook::OAuth.new('app_id', 'access_token')
@oauth_token = @oauth.get_app_access_token
graph = Koala::Facebook::GraphAPI.new(@oauth_token)
graph.put_object("fb_id", "apprequests", {:message=>'Welcome to my app'}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-07T13:05:30.543

最后回答这个问题（根据最新的 API 版本 v2.5）：无法向未授权您的应用的用户发送通知或应用请求服务器端。您应该使用官方的 apprequest 对话框，或其他对话框，如发送对话框。或者只是发送电子邮件。

# c# - 数据列表中的标签错误对象引用未设置为对象的实例

> ID：12437348
> 
> 赞同：-1
> 
> 时间：2012-09-15T12:24:49.730
> 
> 标签：c#, html, sql, datalist

:) 在 sql 中生成该基时，我希望访问标签中任何文本中的数据，但我收到此错误 Object reference not set to an instance of an object

请帮我 ：（

```
 <asp:DataList ID="DataList1" runat="server" CellPadding="4" 
                    DataSourceID="SqlDataSource1" ForeColor="#333333">
                    <AlternatingItemStyle BackColor="White" />
                    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                    <ItemStyle BackColor="#3b5998" />
                    <ItemTemplate>
                        <asp:Image ID="Image2" runat="server" Height="40px" ImageUrl='<%# Eval("ProfilePicUrl") %>' Width="50px" />
                        <div class="name-holder">
                            <asp:Label ID="UserNameLabel" runat="server" Text='<%# Eval("UserName") %>' 
                                CssClass="request-name"/>
                            <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Add" />
                            <asp:Button ID="Button2" runat="server" onclick="Button1_Click" Text="Deny" />
                        </div>
                        <br />
                    </ItemTemplate>
                    <SelectedItemStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                </asp:DataList>
            </div>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:FacebookConnectionString %>" 
                SelectCommand="SELECT FriendRequest. UserName, aspnet_Users.ProfilePicUrl FROM FriendRequest INNER JOIN aspnet_Users ON FriendRequest.UserName = aspnet_Users.UserName WHERE (FriendRequest.FriendRequest = @FriendRequest)">
                <SelectParameters>
                    <asp:ControlParameter ControlID="username" Name="FriendRequest" 
                        PropertyName="Text" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

C＃：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        Label UserNameLabel = (Label)DataList1.FindControl("UserNameLabel");
        con.ConnectionString = "Data Source=localhost;Initial Catalog=Facebook;Integrated Security=True";
        con.Open();
        SqlCommand cmd = new SqlCommand("UPDATE [FriendRequest] SET [Friends]=(SELECT FriendRequest FROM [FriendRequest] WHERE UserName=@UserName1) WHERE UserName=@username", con);
        cmd.Parameters.AddWithValue("@UserName", Page.User.Identity.Name);
        cmd.Parameters.AddWithValue("@UserName1", UserNameLabel.Text);
        cmd.ExecuteNonQuery(); 

        con.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:34:49.287

`UserNameLabel`为空，因为`FindControl`不适用于动态生成的控件（即，来自 DataList）。当 DataList 中有多行时，您希望它如何工作？

更好的方法是利用按钮的[`CommandArgument`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandargument.aspx)将必要的参数携带到您的事件处理程序中。MSDN 有一个关于如何使用它的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:37:17.170

删除 FriendRequest.UserName 中的额外空间，并在您的 sql 服务器中触发查询并检查用户名。

# crash - 我的 Windows 8 应用商店应用在应用认证工具包中崩溃，我该如何找出原因？

> ID：12437349
> 
> 赞同：7
> 
> 时间：2012-09-15T12:24:52.453
> 
> 标签：crash, windows-8, windows-runtime

因此，当我创建应用程序包时，`Windows App Certification Kit`失败并显示：

> 崩溃和挂起 • 发现错误：崩溃和挂起测试检测到以下错误：◦Windows 错误报告检测到应用程序 47878User.MyApp_1.0.0.3_neutral__a2qvk4qzttz7j 并遇到崩溃或挂起。

在我的事件日志中，我看到以下内容：

> 应用程序：MyApp.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.Exception 堆栈：在 System.Threading.WinRTSynchronizationContext+Invoker.b__0(System.Object) 在 System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(System.Object) 在 System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw() 在 System .Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object,布尔值）在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() 在 System.Threading.ThreadPoolWorkQueue。

和：

> 错误应用程序名称：MyApp.exe，版本：1.0.0.0，时间戳：0x50546b92 错误模块名称：KERNELBASE.dll，版本：6.2.9200.16384，时间戳：0x5010ac2f
> 异常代码：0xe0434352
> 错误偏移量：0x00014b32
> 错误进程 id：0x1894
> 错误应用程序启动时间：0x01cd933a183ece6a
> 错误应用程序路径：C:\Program Files\WindowsApps\47878User.MyApp_1.0.0.3_neutral__a2qvk0qzyyn7m\MyApp.exe
> 错误模块路径：C:\Windows\SYSTEM32\KERNELBASE.dll 报告 ID：6b9e9db3-ff2d-11e1 -be8d-001c42ac6e2f 错误包全名：47878User.MyApp_1.0.0.3_neutral__a2qvk0qzyyn7m

问题是我无法在我的一生中重现任何崩溃，无论是在调试模式、发布模式、强制挂起/重新激活事件等。

当 Windows 应用程序认证工具包第 6 次（或第 7 次）运行我的应用程序时，我的初始屏幕会短暂显示，然后我的应用程序就会消失（可能会崩溃）。
WAPK 在第 6 次运行中在做什么，我该如何重现/调试它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T13:09:55.447

我不是专家，但我刚刚完成了与我的申请相同的过程，看看我是否能弄清楚发生了什么。以下是我所做的事情（希望对其他人有用）。

**认证套件结果**

失败：崩溃并挂起

发现错误：崩溃和挂起测试检测到以下错误：

Windows 错误报告检测到应用程序中性__6j94sra26jgtm 并遇到崩溃或挂起。不修复的影响：停止响应或崩溃的应用程序可能会导致数据丢失并且用户体验不佳。如何修复：调查、调试有问题的可执行文件以识别和修复问题，然后重建并重新测试应用程序。在您的软件开发生命周期中使用应用程序验证程序。

这根本没有帮助。[我认为链接自本次讨论](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/19df62c6-bbcf-4eeb-a4d2-f258ccccb64e/)以来已更新，但我认为它没有那么有用。

**调查**

事件查看器中记录了一些错误（Windows 键 + R，输入“eventvwr”）。我可以看到三个有用的条目：

*   Windows 错误报告事件
*   应用程序错误事件
*   .NET 运行时事件

Windows 错误报告事件有更多信息，包括您保存日志文件的一些文件路径。

我最终从命令行运行了 Windows 应用程序认证工具，并隔离了未能通过 PerfromanceShutdown 测试的测试。用于从命令提示符运行的命令是：

```
C:\Program Files (x86)\Windows Kits\8.0\App Certification Kit>appcert test -apptype windowsstoreapp -packagefullname <applicationfullname> -reportoutputpath e:\Projects\AlbumFlow.Win8\output1.xml 
```

这导致我们在暂停/退出/恢复方法中发生了一些事情。

我看的另一个地方是在`C:\Users\<userName>\AppData\Local\Microsoft\AppCertKit`。这有几个大文件 (~100Mb) Windows 性能分析跟踪文件。这看起来很有用，但我不明白。

**解决方案** 当我查看跟踪文件时，团队中的其他人发现暂停管理器没有正确关闭文件引用。

这可以通过使用[Visual Studio 中的 DebugLocation 工具栏](http://blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-model.aspx)来重现。选择 Suspend、Resume、Suspend 和 Terminate 会重现该问题。

希望这对某人有所帮助，因为调试这些错误似乎是一种黑暗艺术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T13:44:37.870

好的，我[几天前](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/49739184-25c8-4c6c-a96b-82179aa3365e)发现了这个问题。

我没有正确测试挂起和关机场景。

如果有人有类似的问题；启用调试位置工具栏（视图->工具栏->调试位置）

开始调试并选择暂停和关闭选项。

我的 OnSuspending 事件中有一个未处理的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T12:03:42.443

对于所有来访问这个问题的人都深感沮丧，不明白为什么没有转储，没有实际崩溃或挂起的迹象，没有来自 Windows 错误报告的新条目出现在应用程序事件日志中，我有一个秘诀：

清除您的应用程序事件日志。

就我而言，我遇到了以下问题：曾几何时，我们的 QA 会在未来设置设备时间来测试一些特定于应用程序的东西。我们很不幸地在未来推出了 WACK。我们的应用程序崩溃了。在有时间放松到实际之后，我们再也没有设法通过 WACK 崩溃并再次在该设备上挂起测试。原因是 WACK 本身似乎使用 Windows 事件日志从 Windows 错误报告中查找报告。在这种情况下，它会找到它们，因为它们实际上仍然存在，在未来。更糟糕的是，这些未来的条目实际上在默认事件视图中被那些尽管有时间戳但后来到达的条目推到了底部，因此它们很难看到，除非您按日期和时间对事件日志进行显式排序。

我希望我能救人几个小时的头撞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T23:47:32.263

如果您关闭了 UAC，您也将无法通过这些“崩溃和挂起”测试。

# asp.net - IIS Web Farm Framework 设置中的单点故障？

> ID：12437350
> 
> 赞同：1
> 
> 时间：2012-09-15T12:24:53.677
> 
> 标签：asp.net, iis-7, iis-7.5, asp.net-web-api, web-farm-framework

*   ASP.NET 网页 API
*   Windows Server 2008 R2/IIS 7.5/Web Farm Framework 2.5

我计划在 4 个 Web 服务器上部署应用程序。

我应该在 Web 服务器之间使用 DFS 共享内容/配置来实现 Web 农场场景吗？

第二种选择是使用 Web Farm Framework 进行部署。

此外，WFF 中是否存在单点故障的可能性？例如，如果主服务器出现故障怎么办。

哪个选项会更好？以上各项的优缺点。

我会很感激你的回应。

# javascript - 如何更改 fabric.Object 的来源以使其指向高分辨率图像文件

> ID：12437354
> 
> 赞同：1
> 
> 时间：2012-09-15T12:25:31.037
> 
> 标签：javascript, html5-canvas, fabricjs

我使用fabricjs。我需要更改画布中图像对象的源以将其指向其高分辨率图像而不更改其属性，以便在我使用时`canvas.toDataURLWithMultiplier('jpeg', 2)`图像质量不会受到影响。

请帮我想办法做到这一点。

# c# - 在 C# 中使用 Regex.Split 获取文本数量

> ID：12437358
> 
> 赞同：0
> 
> 时间：2012-09-15T12:26:01.120
> 
> 标签：c#, regex

如何在 C# 中使用正则表达式获取此文本括号之间的数字？示例文本 ：

> “[1]Ali ahmadi,[2]Mohammad Razavi”结果是：1,2

我的 C# 代码是：

```
string result = null;
string[] digits = Regex.Split(Text, @"[\d]");
foreach (string value in digits)
{
    result += value + ",";
}
return result.Substring(0,result.Length - 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:33:26.263

```
string s = "[1]Ali ahmadi,[2]Mohammad Razavi";
Regex regex = new Regex(@"\[(\d+)\]", RegexOptions.Compiled);
foreach (Match match in regex.Matches(s))
{
  Console.WriteLine(match.Groups[1].Value);
} 
```

这将*捕获*括号之间的数字`(\d+)`，并将它们存储在第*一个*匹配的组 ( `Groups[1]`) 中。

**[演示](http://ideone.com/krR5q)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:44:17.367

对 João 的回答使用基于 Linq 的方法：

```
string s = "[1]Ali ahmadi,[2]Mohammad Razavi";
var digits = Regex.Matches(s, @"\[(\d+)\]")
                  .Cast<Match>()
                  .Select(m => m.Groups[1].Value)
                  .ToList();
foreach (var match in digits)
{
   Console.WriteLine(match);
} 
```

[**演示**](http://ideone.com/iNNIf)

# c++ - 如何将DLL注入Delphi程序

> ID：12437359
> 
> 赞同：3
> 
> 时间：2012-09-15T12:26:07.890
> 
> 标签：c++, windows, delphi, winapi, delphi-2009

我有一个遗留应用程序，其中包含一个包含我需要提取的数据的网格。

我没有该应用程序的代码，并且无法通过正常方式从中获取数据（例如以编程方式选择所有单元格并将它们复制到剪贴板中）。

所以我决定使用 DLL 注入，如“II. CreateRemoteThread & LoadLibrary 技术”部分所述

[http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces)

我的计划是

1.  将 DLL 加载到旧应用程序的地址空间中。
2.  使 DLL 从网格中读取数据并将其写出（例如通过命名管道）。

* * *

第一步是将DLL注入遗留应用程序的地址空间（上面的步骤a））。

我为此编写了以下代码：

```
int  InjectDll            (HANDLE hProcess);

int _tmain(int argc, _TCHAR* argv[])
{
    printf("DllInjector\n");

    /**
     * Find out PID of the legacy application (START)
     */
    HWND windowHandle = FindWindowW(NULL, L"FORMSSSSS");
    DWORD* processID = new DWORD;
    GetWindowThreadProcessId(windowHandle, processID);

    DWORD delphiAppProcessId = *processID;
    /**
     * Find out PID of the legacy application (END)
     */

    printf("Process ID of legacy app: %lu\n", delphiAppProcessId);

    // Now we need the handle of the legacy app
    HANDLE hProcess = OpenProcess(
    PROCESS_CREATE_THREAD | PROCESS_QUERY_INFORMATION | PROCESS_VM_OPERATION | PROCESS_VM_WRITE | PROCESS_VM_READ,
    FALSE, delphiAppProcessId);

    if (hProcess != NULL)
    {
        printf("Found handle, ready for injection\n");
        int result = InjectDll(hProcess);
        CloseHandle( hProcess );
        printf("Injection complete, result=%d\n", result);

    }
    else
    {
        printf("Handle not found\n");
    }

    system("pause");

    return 0;
}

int InjectDll( HANDLE hProcess )
{
    HANDLE hThread;
    const char* const szLibPath = "D:\\mycompany\\SampleDll\\Debug\\SampleDll.dll";
    void*  pLibRemote = 0;  // the address (in the remote process) where
                            // szLibPath will be copied to;
    DWORD  hLibModule = 0;  // base adress of loaded module (==HMODULE);

    HMODULE hKernel32 = ::GetModuleHandle(L"Kernel32");

    // 1\. Allocate memory in the remote process for szLibPath
    // 2\. Write szLibPath to the allocated memory
    pLibRemote = ::VirtualAllocEx( hProcess, NULL, sizeof(szLibPath), MEM_COMMIT, PAGE_READWRITE );
    if( pLibRemote == NULL )
        return false;
    ::WriteProcessMemory(hProcess, pLibRemote, (void*)szLibPath,sizeof(szLibPath),NULL);

    // Load "LibSpy.dll" into the remote process 
    // (via CreateRemoteThread & LoadLibrary)
    hThread = ::CreateRemoteThread( hProcess, NULL, 0,  
                    (LPTHREAD_START_ROUTINE) ::GetProcAddress(hKernel32,"LoadLibraryA"), 
                    pLibRemote, 0, NULL );
    if( hThread == NULL )
        goto JUMP;

    ::WaitForSingleObject( hThread, INFINITE );

    // Get handle of loaded module
    ::GetExitCodeThread( hThread, &hLibModule );
    ::CloseHandle( hThread );

JUMP:   
    ::VirtualFreeEx( hProcess, pLibRemote, sizeof(szLibPath), MEM_RELEASE );
    if( hLibModule == NULL ) // (1)
        return false;

    // Unload "LibSpy.dll" from the remote process 
    // (via CreateRemoteThread & FreeLibrary)
    hThread = ::CreateRemoteThread( hProcess,
                NULL, 0,
                (LPTHREAD_START_ROUTINE) ::GetProcAddress(hKernel32,"FreeLibrary"),
                (void*)hLibModule,
                 0, NULL );
    if( hThread == NULL )   // failed to unload
        return false;

    ::WaitForSingleObject( hThread, INFINITE );
    ::GetExitCodeThread( hThread, &hLibModule );
    ::CloseHandle( hThread );

    // return value of remote FreeLibrary (=nonzero on success)
    return hLibModule;
} 
```

一些评论：

1.  遗留程序的标题为“FORMSSSSS”。
2.  示例 DLL 具有以下 DllMain 方法：

-

```
BOOL APIENTRY DllMain( HMODULE hModule,
DWORD  ul_reason_for_call,
LPVOID lpReserved

{
    OutputDebugStringA("DllMain called: ");
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        OutputDebugStringA("DLL_PROCESS_ATTACH\n");
    case DLL_THREAD_ATTACH:
        OutputDebugStringA("DLL_THREAD_ATTACH\n");
    case DLL_THREAD_DETACH:
        OutputDebugStringA("DLL_THREAD_DETACH\n");
    case DLL_PROCESS_DETACH:
        OutputDebugStringA("DLL_PROCESS_DETACH\n");
        break;
    }
    return TRUE;
} 
```

调用它时，会将文本写入应用程序的标准输出。

* * *

当我运行上面的程序（带有 _tmain 方法的程序）时，我希望看到文本

```
DllMain called: DLL_PROCESS_ATTACH 
```

在控制台输出中（这意味着 DLL 注入成功）。

但它不会发生。

* * *

一个潜在的原因是遗留应用程序的 PID 确定不正确：

```
HWND windowHandle = FindWindowW(NULL, L"FORMSSSSS");
DWORD* processID = new DWORD;
GetWindowThreadProcessId(windowHandle, processID);

DWORD delphiAppProcessId = *processID; 
```

但是delphiAppProcessId的值和任务管理器中显示的PID是一样的，所以我可以排除这个潜在的bug。

* * *

使用调试器，我发现执行在注释 (1) 行停止：

```
JUMP:   
    ::VirtualFreeEx( hProcess, pLibRemote, sizeof(szLibPath), MEM_RELEASE );
    if( hLibModule == NULL ) // (1)
        return false; 
```

为了将示例 DLL 注入标题为“FORMSSSSS”的应用程序的地址空间，我需要进行哪些更改？

**2012 年 9 月 16 日更新：**

我替换了所有出现的

sizeof(szLibPath)

通过 pathLength，其中

常量 int pathLength = strlen(szLibPath)+1;

现在，在

```
 ::WaitForSingleObject( hThread, INFINITE );
    ::GetExitCodeThread( hThread, &hLibModule );
    ::CloseHandle( hThread );

    // return value of remote FreeLibrary (=nonzero on success)
    return hLibModule;
} 
```

hLibModule 非零，表示注入成功。

但是在程序的输出中我还是看不到示例DLL的日志输出。

**更新，16.09.2012 (2)：**

当我

a) 在示例 DLL 的 DllMain 中添加对 AllocConsole() 的调用，b) 重建它并 c) 执行注入程序，

然后会出现一个控制台窗口，该窗口与 Delphi 应用程序具有相同的图标。

当我从 DllMain 函数中删除 AllocConsole 并执行注入应用程序时，控制台窗口不会出现。

所以注射可能真的有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:51:59.850

我能看到的最大问题是`sizeof(szLibPath)`计算指针的大小。改为使用`strlen(szLibPath)+1`。

这肯定意味着您的注入将失败，因为`LoadLibraryA`接收的路径将被截断。可能还有其他问题，但这是开始的地方。

# cocoa - Cocoa：使用 nib 加载 NSViewController

> ID：12437360
> 
> 赞同：1
> 
> 时间：2012-09-15T12:26:14.363
> 
> 标签：cocoa, xcode4, nib, osx-mountain-lion, nsviewcontroller

我已经尝试了在这个网站上找到的许多可能性，并从苹果开发者页面上阅读了一些解释，但似乎我无法解决关于使用/表单 NIB 加载 NSViewController 的问题。

Xcode Project 上的文件看起来有点像这样：

*   SecondViewController.h
*   第二视图控制器.m
*   SecondViewController.xib
*   AppDelegate.h
*   AppDelegate.m
*   主菜单.xib

主要问题是如何使用 SecondViewController.xib 上的初始笔尖以编程方式创建 SecondViewController

> *   MainMenu.xib 上 FileOwner 的自定义类是 NSApplication
> *   SecondViewController.xib 上 FileOwner 的自定义类是 SecondViewController
> *   MainMenu.xb 中有一些面板和窗口（关于窗口和首选项面板）
> *   此应用程序没有主窗口（使用状态栏上的通知图标）

SecondViewController.h

```
@interface SecondViewController : NSViewController {
    BOOL fullScreenMode;
    NSImageView *fullScreenbg;
    NSImageView *imageView1;
    NSImageView *imageView2;
    NSPanel *imageWindow;

}

@property (assign) IBOutlet NSImageView *fullScreenbg;
@property (assign) IBOutlet NSImageView *imageView1;
@property (assign) IBOutlet NSImageView *imageView2;
@property (assign) IBOutlet NSPanel *imageWindow; 
```

第二视图控制器.m

```
@implementation SecondViewController {
    NSImageView *nv1;
    NSImageView *nv2;
    NSSize curImgSize;
}

@synthesize fullScreenbg;
@synthesize imageView1;
@synthesize imageView2;
@synthesize imageWindow;

......

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
        fullScreenMode = YES;
    }

    return self;
} 
```

AppDelegate.h

```
@interface AppDelegate : NSObject <NSApplicationDelegate,NSWindowDelegate> {
   NSPanel *aboutWindow;
   IBOutlet NSMenu *myStatusMenu;
   IBOutlet NSMenuItem *toggleFullScreen;
} 
```

AppDelegate.m

```
@implementation AppDelegate {
    SecondViewController *controller;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    controller = [[SecondViewController alloc] 
                 initWithNibName:@"SecondViewController" 
                 bundle:nil];  
    //Not work (fullscreenbg, imageView1, imageView2,imageWindow = nil)

    //controller = [[SecondViewController alloc] init]; ?? <-- didn't work either
} 
```

即使使用 initWithNibName 或仅使用 init，调试时所有 IBOutlet 属性似乎都为零。

我已经尝试过其他解决方案，例如“NSBundle loadNibNamed”或[使用 loadView](https://stackoverflow.com/questions/1726250/nsviewcontroller-and-multiple-subviews-from-a-nib)，但它不起作用（警告消息：“NSObject 我不响应 loadView”）。

secondViewController 的主要目的是显示通知消息，包括图形和 web 元素。

我希望有人能给我一个最好的建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:43:36.310

这是正常行为。IBOutlets 在构造函数中没有连接。

您可以覆盖 viewDidLoad，调用 super，然后进行任何初始化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T14:24:22.747

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    //added this line :
    if (nibBundleOrNil!=nil || ![nibBundleOrNil isEqualtoString:@""]) {
        [NSBundle loadNibNamed:@"SecondViewController" owner:self];
    {

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
        fullScreenMode = YES;
    }

    return self;
} 
```

# php - PHP 5.4.7 打破了 Wordpress 3.4.2

> ID：12437364
> 
> 赞同：0
> 
> 时间：2012-09-15T12:27:03.193
> 
> 标签：php, wordpress

我的网络托管公司已将 PHP 升级到 5.4.7 版本。

在这件事上我别无选择。

现在发生的情况是每个页面都只加载一个空白页面。我用 echo 'hello world' 创建了一个基本页面；它工作正常。

请问有人可以建议如何解决这个问题吗？

我正在使用 Wordpress 3.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:37:46.897

PHP 5.4.7 并没有破坏 WordPress 本身；它一定是破坏了一个无法运行 5.4.7 的插件

尝试：

1）将您的插件文件夹重命名为旧插件以强制停用所有插件，看看是否有帮助。

2) 可能是主题有问题；更改为默认的 211 主题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:48:31.897

我在某处读过你需要更新你的mysql密码（和wp-config.php），我认为更高版本的php无法处理旧的mysql密码。

# c# - 处理自定义属性

> ID：12437368
> 
> 赞同：1
> 
> 时间：2012-09-15T12:27:18.933
> 
> 标签：c#, asp.net, silverlight, authorization

我现在有一个自定义属性，我不知道如何限制对我应用属性的方法的访问。

例如：我现在有自定义属性说`"CustomRole"`如果 CustomRole 的值是`"Admin"`then 并且只有这样它才应该访问方法。

```
CustomRole["Admin"] 
public void Method()
{
    // code
} 
```

如何执行验证值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:55:39.513

您需要某种[面向方面的编程](http://www.google.hr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http://en.wikipedia.org/wiki/Aspect-oriented_programming&ei=KH1UUKT-AoyN4gTftYCICg&usg=AFQjCNF-xkiz6hlVk9vPN6mx16a5DdsOow&sig2=h-RA8itz5afd_6am4txgZw)方法。属性本身不能“访问”该方法，因为它不是由运行时评估的，但您可能会使用一些框架来拦截调用，检查属性和上下文并正确处理案例。

简而言之，您将：

*   用属性装饰方法
*   提供拦截器来处理调用
*   通过一些提供 AOP 功能的工具实例化该类
*   执行调用。调用会根据你的实现被拦截和处理

**指定要求**

正如您已经注意到的，这可以很容易地用属性指定：

```
[RequiredPermission(Permissions.CanCreateOrder)]
public virtual Guid CreateOrder(string orderCode) {...} 
```

**拦截呼叫**

现在你需要选择一个工具来实例化你的对象并拦截对它的调用。这可以使用支持 AOP 的 IoC 容器来完成，或者您可以手动包装它（例如，使用 AOP 工具创建对象的代理并使用代理）。

您需要编写一个*拦截器*或一个包装器方法，它有机会在将执行转发到您的方法或拒绝调用之前评估调用上下文。

您可以[在此处找到讨论和代码示例](http://www.vojkovic.net/post/2008/02/04/Implementing-security-%28and-other-cross-cutting-concerns%29-through-AOP.aspx)。看看`OrderManagementService`通过属性声明需求的类。

**穷人的AOP**

您可以在不使用适当的 AOP 工具的情况下完成所有这些操作，但是以一种不太通用的方式（对于更简单的项目可能非常好），使用某种形式的装饰器模式 - 请注意，这是从头开始编写的，而不是在 IDE 中编写的：

```
interface IService 
{
    void Method(); 
}

class ServiceImpl : IService // one of many implementations
{
    [CustomRole("Admin")]
    public void Method() { ... } 
}

class ServiceChecker : IService // one of many implementations
{
    IService m_svc;
    public ServiceChecker(IService wrapped) { m_svc = wrapped; }

    public void Method() 
    {
        var mi = m_svc.GetType().GetMethod("Method");
        if(mi.IsDefined(typeof(CustomRoleAttribute), true)
        {
            CustomRoleAttribute attr =  (CustomRoleAttribute)mi.GetCustomAttributes(typeof(CustomRoleAttribute), true)[0];
            if(!attr.Role.Equals( GetCurrentUserRole() ) // depends on where you get user data from
            {
                throw new SecurityException("Access denied");
            }
        }
        m_svc.Method(); 
    } 
}

// the client code
IService svc = new ServiceChecker(new ServiceImpl());
svc.Method(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:12:52.440

您的代码看起来有点错误。这是我的课程，方法是`CustomRoleAttribute`

```
public class MyClass
{
      [CustomRole("Admin")]
      public void MyMethod()
      {

      }
} 
```

您应该定义属性`AttributeUsage`以确保其他开发人员不会在属性或构造函数上使用您的属性：

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = false,Inherited = true)]
public class CustomRoleAttribute : Attribute
{
        public string Role { get; private set; }

        public CustomRoleAttribute(string role)
        {
            Role = role;
        }
} 
```

现在把两者放在一起：

```
MyClass myClass = new MyClass();
MethodInfo[] methods =  myClass.GetType().GetMethods(); // Access all the public methods.

        foreach (var methodInfo in methods) // iterate trough all methods.
        {

             // Get all custom attributes from the method.
             object[] attributes =  methodInfo.GetCustomAttributes(typeof (CustomRoleAttribute), true); 

            if (attributes.Length > 0)
            {
                CustomRoleAttribute attribute = (CustomRoleAttribute)attributes[0];
                if (attribute.Role == "Admin")
                {
                     // the role is admin
                }
             }
        } 
```

你现在看到了，如何使用属性。但是您必须首先检查属性，然后才能访问方法。

# php - 在简单的 PHP HTML dom 解析器中动态获取网站 URL

> ID：12437369
> 
> 赞同：1
> 
> 时间：2012-09-15T12:27:20.393
> 
> 标签：php, variables

此脚本将从 url 动态获取网站地址。
示例：`www.site.com/fetch.php?url=http://www.google.com`使用 php 简单的 html dom 解析器获取其（google.com）内容，但我的脚本无法获取 url .. 任何想法>

```
$url = htmlentities($_GET['url']);
$html = file_get_html('$url')->plaintext;
$result = $html; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:29:16.033

不知道可以用这个`$html=file_get_contents($_GET['url']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:31:58.953

不要引用`$url`变量：

```
$url = "htmlentities($_GET['url'])";
$html = file_get_html($url)->plaintext;
$result = $html; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:32:16.280

您可以`file_get_contents($_GET['url'])`按照建议使用或 CURL

```
<?php
$ch = curl_init();
    $timeout = 5;
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch,CURLOPT_URL,$_GET['url']);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    echo $data;
?> 
```

要获得明文，您需要进行一些解析。你可以在[这里得到](https://stackoverflow.com/questions/1124235/how-to-fetch-content-from-a-webpage?answertab=votes#tab-top)

# git - 在从 github 定义提交之前下载源代码

> ID：12437372
> 
> 赞同：0
> 
> 时间：2012-09-15T12:27:33.737
> 
> 标签：git, github

是否可以在定义提交之前从 github 公共项目下载源代码。我想获得一个项目结构，但是通过提交来理解它会更容易。可以看到，但是想一步步下载测试。

发现： [如何从 GitHub 项目中获取某些提交](https://stackoverflow.com/questions/7832770/get-certain-commit-from-github-project)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:19:55.787

克隆存储库后，您可以`git log`查看主分支上所有提交的列表，然后`git checkout <SHA1>`移动到任何提交，其中`<SHA1>`行上的字符串是

```
commit 04ff4a3216988821fa69e679d105346f179e9c7d 
```

# iphone - 正确使用@private 变量/属性

> ID：12437379
> 
> 赞同：3
> 
> 时间：2012-09-15T12:28:43.370
> 
> 标签：iphone, objective-c, instance-variables, private-members

我所有的研究都表明**@private指令没有*****真正的***用途——所以我一定是遗漏了一些东西，需要各位专家加入:-)

 **假设我们有 2 个类：一个**Car**类和一个**SportsCar**类，其中**SportsCar**是**Car**的子类。

这是**汽车**类：

```
@interface Car : NSObject {
    NSString *make;
    NSString *model;

    @private
    int numberOfBackSeatPassengers;  // I'm making this a private iVar cause I'm just gonna
                // say that all Sportscars will be 2-seaters and therefore shouldn't
                // be able to set/get the number of back-seat passengers
}

@property (nonatomic, strong) NSString *make, *model;

// Now here's my first issue: if I also make "numberOfBackSeatPassengers" an @property 
// then it seems like all subclasses of this Car class *WILL* be able to access it as 
// well - even though I declared it as @private - but I'll do this anyway to make my point:

@property int numberOfBackSeatPassengers;

@end 
```

实现如下所示：

```
@implementation Car

@synthesize make, model, numberOfBackSeatPassengers;

@end 
```

现在这里是**跑车**类：

```
#import "Car.h"

@interface Sportscar : Car

@property int turboEngineSize;

@end 
```

及其实现：

```
#import "Sportscar.h"

@implementation Sportscar

@synthesize turboEngineSize;

@end 
```

在“主要”我有这个：

```
 Car *car1 = [[Car alloc] init];
    [car1 setMake:@"Chevy"];
    [car1 setModel:@"Impala"];
    [car1 setNumberOfBackSeatPassengers:3];

    Sportscar *sports1 = [[Sportscar alloc] init];
    [sports1 setMake:@"Audi"];
    [sports1 setModel:@"tt"];
    [sports1 setNumberOfBackSeatPassengers:3]; 
```

显然，我可以在 Sportscar 上设置**NumberOfBackSeatPassengers** - 即使 iVar 被声明为**@private** - 但那是因为我在“ **Car.h** ”中将其设为 @property，这意味着它的合成 getter 和 setter 是 Instance方法，因此可用于**Car的*****所有***子类。

 **另一种选择是不在“Car.h”中将**numberOfBackSeatPassengers**声明为@property，仅将其保留为简单的 iVar，而是在“Car.m”的@implementation 中*手动*为其创建 Setter 和 Getter像这样：

```
-(void) setNumberOfBackSeatPassengers:(int)numPassgeners {
    numberOfBackSeatPassengers = numPassgeners;
}

-(int)numberOfBackSeatPassengers {
    return numberOfBackSeatPassengers;
} 
```

这将使**numberOfBackSeatPassengers**的 getter 和 setter仅在“Car.m”中可用——我想这会使它们“私有”——但它们***太***私密了：我永远无法从 Main 或任何外部的任何地方调用它们“Car.m” 此外，这是真正的重点：这样做意味着“Car.h”中的 @private 指令在任何这些中都没有真正发挥作用。我的意思是我现在可以回到“Car.h”，在那里取出“ **@private”**指令——我的**numberOfBackSeatPassengers**的手动设置器和获取器仍然可以像现在一样工作，据说是私有的——那是什么通过“@private”获得 ? 它是如何真正发挥作用的？

任何人都可以对此有所了解吗？

（是的，我知道我可以在“Car.m”文件的@interface 部分**扩展我的 Car 类 - 通过一个类别，或者先将****numberOfBackSeatPassengers**设为只读属性，然后将其更改为 readwrite 等 - 但这些都是似乎是使“@private”工作的变通方法或“黑客”。我只是不明白@private 如何真正*独立工作。*）

==================================================== ===

编辑 - 回应以下aroth的评论：

1) aroth 说子类在*理论上*仍然可以调用未在其父类的 Header 中声明的方法是绝对正确的——通过使用`performSelector`. 我说“理论上”，因为在我的情况下它不能正常工作*：*如果 - 在“主要”中 - 我打电话

`[sportscar1 performSelector:@selector(setNumberOfBackSeatPassengers:)];`

然后我插入了一些垃圾号码，`numberOfBackSeatPassengers`因为在以这种方式调用该方法时，我无法明确地将数字作为参数传入。

（问题：有没有办法解决这个问题？）

2) aroth 的说法也绝对正确，`Sportscar`我们可以简单地覆盖`Car`类的 setter 和 getter `numberOfBackSeatPassengers`，并让这些覆盖方法将其重置为 0，或者给出错误等。但是虽然这是一个非常实用的解决方案，而且似乎可以解决这个*特殊*的问题，我觉得它并没有解决更大的问题，即`@private`似乎没有真正做它应该做的事情。

3）重新设计逻辑以拥有一个类`FourDoorCar`和另一个 类`TwoDoorCar`，然后继续构建它是一个有趣的选择 - 但这几乎感觉就像现在 Objective-C 的语法正在“强制”我的编程逻辑以及我的方式构建我的项目——这感觉像是一种强加。也许我错了，并且对此做了太多 - 但无论哪种方式，这一切都只是因为`@private`没有做它似乎承诺的事情......？感觉不对。

在一天结束时，我不断地回到同一个问题：`@private`实际上对我们有什么好处？它有什么好处，它给我“买”了什么？似乎如果我想让 iVar 是私有的，我可以在“.m”文件中声明它，而不必首先在头文件中声明它。我的意思是我是否正确？或者是否仍然存在一些实例，您希望在 Header 中声明 iVar 为`@private`，但*不在*Header 中为它声明 setter 和 getter - 所以这些不会*显式地*可用于子类 - 并让它全部感觉？

我们能想出一个实际的例子吗？是否有某种我想`@private` *在标题*中声明的 Car 属性（而不是在“.m”中）会以某种方式使我受益？我认为`numberOfBackSeatPassengers`这将是一个很好的例子，但我没有看到它在实际代码中如何真正起作用......

==================================================== ========================

编辑#2 - 继续与@aroth 对话:-)

@aroth - 我绝对同意它更好/更有条理地在标头中声明所有 iVar，而不是将内容拆分，以便有些在标头中，有些在实施中。这造成了混乱，我真的不喜欢这种方法。（我在最初的问题中指出，我不想使用实施和/或类别方法来解决我的问题。） -另外，是的，属性绝对不必总是由 iVar 支持。

-关于适当地设计类，我同意这当然是良好编程的关键。Car/Sportscar 的例子是我当场编造出来的，目的是为我的问题提供一些背景信息，考虑到它的设计优点/缺陷，我没有投入任何时间。我认为，如果我们采用您的方法 - 这似乎很合乎逻辑 - 并使用 Car 类、FourDoorCar 子类、TwoDoorCar 子类等 - 我们可以解决很多问题 - 但它*仍然*很可能迟早我们会遇到这样一种情况，我们*可能*想要一个 @private iVar 用于我们的一个类，并且不想创建另一个子类来处理它。我的意思是让我们*假设*这会发生，为了讨论。

***因此，如果可能的话，我真的很想为我们的 Car 类考虑一个特定的 iVar，将其作为@private***是有意义的，在代码中展示如何使用它，并讨论它的范围和限制。

我一直在想一个真实世界的例子，说明我们只希望 Car 拥有的 Car 的某些属性——并且它的任何子类都不应该继承。我真的认为`numBackSeatPassengers`可以解决问题 - 就我们讨论的目的而言，它仍然可以，但是，我会再编一个并称它为`phantomIVar`:-)

所以：

```
@interface Car : NSObject {

    @private
    //int numberOfBackSeatPassengers;  
    int phantomIVar;

}

@property (nonatomic, strong) NSString *make, *model;

@end 
```

实施将是：

```
@implementation Car

@synthesize make, model;

-(void) setPhantomIVar:(int)i {
    phantomIVar = i;
}

-(int)phantomIVar {
    return phantomIVar;
}

@end 
```

这几乎让我们回到了我们开始的地方:-)

至少我是这样的感觉。

`@private`我的意思是声明*似乎*给我们带来的唯一好处是*可读性*。所以现在，任何查看 Header 的人都可以看到这`phantomIVar`是 Car 的 iVar，并了解它是私有的。就是这样。

然而，就*功能*而言，它似乎并没有做太多。因为它不像把我们放在`@private`前面`phantomIVar`释放了我们仍然能够在 Header 中为它编写一个 setter/getter 并且只有 Car 类对象而不是 Car 的子类可以访问它们。不，`@private`不明白。要获得隐私，您必须进入实施文件并在那里编写您的 setter 和 getter。最终在 Objective-C 中没有私有方法之类的东西。在对象。C. 他们都是公开的。

aroth，如果我做对了，请告诉我 - 如果没有，我到底哪里出错了。

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:31:07.120

您可以将属性声明为`readonly`在`Car`类本身中，或者将其重新声明为`readonly`仅在`SportsCar`类中。

此外，`@private`与属性没有任何关系 - 它只修改 ivar 本身的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:39:08.023

> 这将使 numberOfBackSeatPassengers 的 getter 和 setter 仅在“Car.m”中可用

不对。这些方法仍然存在于`Car`扩展的每个对象的每个实例和每个实例上`Car`，无论您是否在头文件中声明它们。如果您尝试直接调用它们，编译器不会将它们视为公开可见的，并且会抱怨，但您仍然可以通过`Car`简单地在任何子类上调用 getter 和 setter `performSelector:`。

在任何情况下，如果你有一个在支持它的 ivar`@property`上使用是没有意义的`@private`（并且有一个明确的 ivar 支持它也是没有意义的，当你使用时会自动为你创建一个`@synthesize`；但这是一个单独的主题） . 我建议如果`SportsCar`旨在扩展`Car`并且永远不允许记录任何后座乘客，那么“标准”方法就是简单地覆盖 getter/setter 方法`SportsCar`以始终设置/返回 0 或提高一些如果尝试设置非零值，则会出错。

由于此属性不适用于所有`Car`实例，另一种选择是将其完全从基类中取出。例如，您可以拥有`Car`，然后从该拥有`TwoDoorCar`和`FourDoorCar`，然后`SportsCar`从 衍生`TwoDoorCar`。在这种情况下，您可以将其申报`numberOfBackSeatPassengers`为公共财产`FourDoorCar`，因为每辆四门车都应该能够容纳后座的乘客。

回到最初提出的问题，在 ivar 上使用`@private`只会影响该 ivar 的可见性。它不影响使用 ivar 的方法。所以一个子类`Car`将无法看到`numberOfBackSeatPassengers`ivar 本身。但是由于您已经为它创建了一个公共 getter/setter，子类当然可以看到这些，并使用它们来修改 ivar 的值。

**编辑**

简要回答更新的问题：

1.  是的，您可以使用[NSInvocation](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)动态调用需要原始参数的方法。或者您可以使用这里讨论的方法，这种方法更直接： [Objective-C 和 SEL/IMP 的使用](https://stackoverflow.com/questions/2650190/objective-c-and-use-of-sel-imp)。或者您可以使用 a`NSNumber`而不是 an`int`然后使用`performSelector:withObject:`.

2.  我不确定你在说什么`@private`应该在这种情况下做。您认为 using`@private`应该做什么？

3.  我认为这与语法关系不大，而与面向对象设计的原则有关。如果有些汽车没有后座，那么给`Car`超类一个`numberOfBackseatPassengers`属性就不是很好的面向对象设计。这样做会给对象一个字段，该字段实际上并不适用于对象类型的每个实例。当您开始这样做时，您会遇到您在示例中描述的那种问题。超类的目的是包含其所有派生类型共有的功能。如果它具有仅对其*某些*派生类型通用的功能，那么这通常是一个设计问题。无论如何，它与 Objective-C 语法或语义无关。

至于你`@private`得到了什么，简化你的班级组织怎么样，一方面？是的，你可以在你的实现文件中声明一个 ivar 来实现类似的效果，但这真的和在头文件中声明所有 ivar 一样方便吗？*在一个相当复杂的项目中，如果仅在标头中声明了一些*ivars 而其余的在实现文件中 ，其他开发人员是否能够轻松地遵循您的代码？

如果没有`@private`/在标头中声明的`@protected` *每个*ivar 都将是公共的，这在面向对象的环境中绝对不好，因为 Jonathan 指出的所有原因。因此，这些访问修饰符的存在可能首先是为了解决这个问题。

至于用例，带有 getter/setter 的属性可能不是最好的例子。getter/setter 的目的实际上总是提供一个公共接口来修改/查询属性值，并且正如 Objective-C 中所指出的，没有必要在任何范围内显式声明 ivar 来支持合成属性。

一个更好的例子可能是`IBOutlet`'s. 您希望在您的标头中声明这些，以便 XCode/Interface Builder 可以找到它们，但您不希望它们暴露在您的类实现之外，或者（通常）甚至暴露给您的类的子类。因此，您将在您的标头中声明它们，并且您通常不会为这些 ivars 添加任何 getter/setter 方法。

**编辑 2**

对于哪里`@private`有意义的具体示例，例如：

```
@interface Car : NSObject {

    @private
    DataRecorder* blackBoxRecorder;

}

@property (nonatomic, strong) NSString *make, *model;

@end 
```

我们知道，拟议的法规可能要求道路上的所有汽车都配备内置的黑匣子/数据记录器。所以每个人都`Car`必须有一个，并且任何子类`Car`都不能篡改`blackBoxRecorder`。

在这种情况下，定义一个 setter 方法是没有意义的。您可以提供一个公共 getter，或者您可以提供一个公共包装 API，围绕`DataRecorder`子类可以用来记录数据。类似的东西`-(void) logEventWithName:(NSString*)name andValue:(NSNumber*)value;`。因此子类可以`DataRecorder`通过 API 使用，但它们不能与支持 ivar 本身混淆以禁用或修改强制黑盒/数据记录器的行为。

但无论如何，是的，我基本同意你的分析。`@private`主要影响代码的可读性/可维护性。Objective-C 作为面向对象的编程语言需要存在才能成功（如果默认情况下所有 ivars 都是公共的，并且无法修改它，那么该语言将一团糟），但是它从一个纯粹的*功能*角度并不多。它更像是一种逻辑/组织工具。它有助于[数据隐藏](http://en.wikipedia.org/wiki/Information_hiding)，并允许您将所有 ivars 保留在头文件中，仅此而已。****

# html - 单击时单选按钮更改 css

> ID：12437381
> 
> 赞同：0
> 
> 时间：2012-09-15T12:28:55.340
> 
> 标签：html, css, button, background, radio

请看一下[http://jsfiddle.net/JHMqG/](http://jsfiddle.net/JHMqG/)

我试图弄清楚单击时如何更改单选按钮的背景。

到目前为止，我在 cat 选项上取得了成功，但我被困在 dog 选项上。我需要狗选项才能工作，因为我希望背景更改包括圆形按钮。

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:32:43.553

给你： http: [//jsfiddle.net/JHMqG/1/](http://jsfiddle.net/JHMqG/1/)
在狗身上，`label`元素只包含文本。在猫上，`label`元素包含文本和单选按钮。另外，我稍微清理了你的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:15:56.117

看到这个：

## [*演示*](http://jsfiddle.net/thebabydino/JHMqG/3/)

我改变了一点HTML：

```
<div>
<input type="radio" name=1 Value=420 id="a1">
<label for="a1" class="radiostyle" >Cat ($420)</label>
</div>
<div>
    <input type="radio" name=1 Value=375 id="a2">
    <label for="a2" class="radiostyle">Dog ($375)</label>
</div> 
```

并在 CSS 中添加了一些位，所以现在看起来像这样：

```
div { margin: .5em; }
input, label {
    position: relative;
    display: inline-block;
    vertical-align: middle;
}
input[type=radio] { margin-right: -1.65em; z-index: 2; }
.radiostyle{
    background-color: #CCC;
    border-radius: 8px;
    padding: 4px 4px 4px 1.75em;
}

.radiostyle:hover{
    background-color: #0F6;    
    cursor:pointer;
}

input[type=radio]:checked+label {
    /* Or `#a1:checked+label` if you only want it for that input */
    background-color: #0F6;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:41:54.057

问题是在 cat 选项中的`<input>`前面`<label>`，但在 dog 选项`<input>`中，**在**`<label`.

我通过将狗选项移动到标签之前来纠正它`<input>`，你可以看到它在这里工作：

[**http://jsfiddle.net/SxPvz/**](http://jsfiddle.net/SxPvz/)

# bash - Bash 脚本：mkdir 错误

> ID：12437386
> 
> 赞同：1
> 
> 时间：2012-09-15T12:29:21.517
> 
> 标签：bash, quotes, sh, mkdir

我有以下脚本示例：

```
#!/bin/bash

# Aborts the script on "simple command failure" (does not cover pipes)
set -e

# Makes sure we do not run the script outside the correct directory (i.e. the backup directory)
projects_directory='~/projects' 
backup_drectory="${projects_directory}/backup/"
echo "Backup directory: ${backup_drectory}"

if [ ! -d "$projects_directory" ]; then 
    mkdir "$projects_directory"
    echo "${projects_directory} created successfully" 
fi 
```

以下输出惨遭失败：

```
Backup directory: ~/projects/backup/
mkdir: cannot create directory `~/projects': No such file or directory 
```

我不明白为什么。如果我`mkdir ~/projects`在终端中手动输入命令，则会创建目录。任何建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T12:34:34.643

删除单引号：

```
projects_directory=~/projects 
```

引用防止外壳扩展`~`字符。

# git - 如何恢复已删除的 git 分支？

> ID：12437387
> 
> 赞同：4
> 
> 时间：2012-09-15T12:29:21.133
> 
> 标签：git

我错误地删除了我的一个 git 分支。有什么办法可以恢复吗？

我使用了以下命令：

```
$ git push :development 
```

我想恢复这个分支。我在主分支上，它没有显示任何删除命令正在运行：

```
$ git reflog

1b716a1 HEAD@{0}: checkout: moving from master to origin
1b716a1 HEAD@{1}: reset: moving to origin
91791dc HEAD@{2}: reset: moving to 91791dc
1b716a1 HEAD@{3}: checkout: moving from master to master
1b716a1 HEAD@{4}: pull: Merge made by the 'recursive' strategy.
91791dc HEAD@{5}: commit: Fix Total Label crash
198de6f HEAD@{6}: commit: Fix the Total Label crash 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T13:54:20.247

你有另一个（最近的）存储库克隆吗？或者其他人有你可以访问的克隆吗？（也许有人在 github 上分叉了它）。如果是这样，您可以从其他存储库推送分支，一切都应该没问题。

如果你不这样做，事情会变得有点复杂。首先，如果您`development`最近在分支上工作，它*必须*出现在 HEAD reflog 中——除非您手动使 reflog 过期（默认是 30 天后使 reflog 条目过期）。

如果您从未在分支上本地工作过（IOW：没有签出或提交），那么您还有最后一次机会将其取回：使用`git fsck --unreachable --lost-found`然后检查所有报告的提交对象。当您找到正确的（旧提示）后，发出`git branch development <hash of the commit>`. 在本地重新创建分支后，可以再次推送到 GitHub `git push origin development:development`：.

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-25T23:02:17.847

这是一个古老的问题，但也许它会使其他人受益。

你这样做是对的`git reflog`，你是对的，没有什么可以帮助你识别分支被删除..但没关系。

假设您删除的分支名为`special`.

在假设的情况下，假设您打开了`master`，签出了一个新分支`special`，进行了一些更改，提交它们，切换回`master`，然后`special`意外删除，可能是通过某些命令，例如`git branch -D special`.

运行你的`git reflog`命令，你会看到这样的输出。

```
ef15850 HEAD@{411}: checkout: moving from special to master
64e7b02 HEAD@{412}: commit: update special with stuff
b444040 HEAD@{413}: checkout: moving from master to special 
```

*您可以搜索您删除的分支名称。你会在某个地方找到它。*

由于您无法删除您处于活动状态的分支，因此您必须在某个时候离开该分支才能将其删除。

您可以在切换分支之前立即转到提交哈希，并根据已删除的分支创建一个新分支。

在这种情况下，`git checkout -b recovered_special 64e7b02`

# android - 画布似乎借鉴了 2 种不同的观点

> ID：12437389
> 
> 赞同：1
> 
> 时间：2012-09-15T12:29:25.260
> 
> 标签：android, surfaceview, android-canvas

我对 Android 开发很陌生，我正在尝试制作一个游戏，让我的角色在屏幕上的瓷砖上移动。由于每个图块都是它自己的位图，我在角色移动后重绘它。

现在由于某种原因，每次我绘制角色精灵时，整个视图都会闪烁。似乎在每一次**偶数**绘制中，我创建的背景都是可见的，而在每一次**奇数**绘制中，背景都是黑色的。此外，角色精灵会留下痕迹，但只有一半是可见的，这取决于它是偶数还是奇数。我的猜测是，由于某种原因，画布正在绘制两个视图或其他东西。

我会上传图片但我不能:(有没有人知道我做错了什么？非常感谢任何帮助。

这是移动角色的方法：

```
// Moves sprite on screen
private void MoveSprite()
{
    // Run as long as the sprite's location didn't reach its destination
    while (m_gameView.m_playerControl.m_MoveDestination.x != m_gameView.m_playerControl.m_CharSprite.m_SpriteLocationOnMatrix.x ||
            m_gameView.m_playerControl.m_MoveDestination.y != m_gameView.m_playerControl.m_CharSprite.m_SpriteLocationOnMatrix.y)
    {
        // Draw sprite with FPS control
        Canvas c = null;
        startTime = System.currentTimeMillis();

        try
        {
            c = m_gameView.getHolder().lockCanvas();

            synchronized (m_gameView.getHolder())
            {
                // Draws player and refreshes the tiles it was previously on
                m_gameView.m_playerControl.onDraw(c);
            }
        }
        finally
        {
            if (c != null)
            {
                m_gameView.getHolder().unlockCanvasAndPost(c);
            }
        }

        sleepTime = ticksPS - (System.currentTimeMillis() - startTime);

        try
        {
            if (sleepTime > 0)
                Thread.sleep(sleepTime);
            else
                Thread.sleep(10);
        }
        catch (Exception e)
        {
        }
    }

    // After drawing char movement, changing flag to false
    m_fIsCharMoved = false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:59:25.557

```
Check out screen width and height based drawing. 
```

你应该在屏幕内绘制。

```
I think u r drawing the characters out of the screen width or height 
```

# c - 栈里面有什么？

> ID：12437391
> 
> 赞同：11
> 
> 时间：2012-09-15T12:29:41.027
> 
> 标签：c, x86, stack, low-level

如果我运行一个程序，就像

```
#include <stdio.h>
int main(int argc, char *argv[], char *env[]) {
  printf("My references are at %p, %p, %p\n", &argc, &argv, &env);
} 
```

我们可以看到这些区域实际上在堆栈中。但还有什么？如果我们循环遍历 Linux 3.5.3 中的所有值（例如，直到 segfault），我们可以看到一些奇怪的数字，以及由一堆零分隔的两个区域，可能是为了防止覆盖环境变量偶然。

无论如何，在第一个区域中必须有很多数字，例如每个函数调用的所有帧。

我们如何区分每一帧的结束，参数在哪里，如果编译器添加了一个金丝雀，返回地址，CPU状态等等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:59:16.690

如果不了解覆盖，您只能看到位或数字。虽然某些区域受机器细节的影响，但很多细节都是相当标准的。

如果您没有在嵌套例程之外移动太远，那么您可能正在查看内存[的调用堆栈](http://en.wikipedia.org/wiki/Call_stack)部分。对于一些通常被认为“不安全”的 C，您可以编写访问函数变量的有趣函数，即使这些变量没有像源代码中所写的那样“传递”给函数。

调用堆栈是一个很好的起点，因为 3rd 方库必须可由尚未编写的程序调用。因此，它是相当标准化的。

超出进程内存边界会给您带来可怕的分段违规，因为内存防护将检测到进程访问未授权内存的尝试。Malloc 所做的不仅仅是“只是”返回一个指针，在具有内存分段功能的系统上，它还“标记”该进程可访问的内存，并检查所有内存访问是否违反了进程分配。

如果你一直走这条路，迟早你会对内核或对象格式感兴趣。研究一种使用 Linux 完成工作的方式要容易得多，因为这里有源代码。拥有源代码使您无需通过查看二进制文件来对数据结构进行逆向工程。开始时，困难的部分将是学习如何找到正确的标题。稍后它将学习如何四处寻找并可能改变在非修补条件下你可能不应该改变的东西。

PS。您可能会将此内存视为“堆栈”，但一段时间后，您会发现它实际上只是一大块可访问内存，其中一部分被视为堆栈......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T13:45:27.780

堆栈的内容基本上是：

*   无论操作系统传递给程序什么。
*   调用帧（也称为堆栈帧、激活区域……）

操作系统将什么传递给程序？典型的 *nix 会将环境、参数传递给程序，可能还有一些辅助信息，以及指向它们的指针以传递给`main()`.

在 Linux 中，您将看到：

*   一个空
*   程序的文件名。
*   环境字符串
*   参数字符串（包括`argv[0]`）
*   填充全零
*   `auxv`数组，用于将信息从内核传递给程序
*   指向环境字符串的指针，以 NULL 指针结尾
*   指向参数字符串的指针，以 NULL 指针结尾
*   `argc`

然后，下面是堆栈帧，其中包含：

*   论据
*   退货地址
*   可能是帧指针的旧值
*   可能是金丝雀
*   局部变量
*   一些填充，用于对齐目的

你怎么知道每个堆栈帧中哪个是哪个？编译器知道，所以它只是适当地处理它在堆栈帧中的位置。如果可用，调试器可以以调试信息的形式为每个函数使用注释。否则，如果存在帧指针，您可以识别与它相关的事物：局部变量位于帧指针下方，参数位于堆栈指针上方。否则，您必须使用启发式方法，看起来像代码地址的东西可能是代码地址，但有时这会导致不正确且烦人的堆栈跟踪。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T13:26:30.897

堆栈的内容将根据架构[ABI](http://en.wikipedia.org/wiki/Application_binary_interface)、编译器以及可能的各种编译器设置和选项而有所不同。

一个好的起点是为您的目标架构发布的 ABI，然后检查您的特定编译器是否符合该标准。最终，您可以分析编译器的汇编器输出或观察调试器中的指令级操作。

还要记住，编译器不需要初始化堆栈，并且当它完成时肯定不会“清除它”，因此当它被分配给进程或线程时，它可能包含任何值 - 即使在开机时, 例如，SDRAM 将不包含任何特定或可预测的值，如果物理 RAM 地址先前已被另一个进程使用，或者甚至在同一进程中更早调用的函数，则内容将包含该进程留在其中的任何内容。因此，仅查看原始堆栈并不能告诉您太多信息。

通常，一个通用堆栈帧可能包含函数返回时控件将跳转到的地址、传递的所有参数的值以及函数中所有自动局部变量的值。但是，例如 ARM ABI 将前四个参数传递给寄存器 R0 到 R3 中的函数，并将*叶*函数的返回值保存在 LR 寄存器中，因此它在所有情况下都不像“典型”实现 I有建议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-15T13:34:29.663

细节很大程度上取决于您的环境。操作系统通常定义一个 ABI，但实际上这仅对系统调用强制执行。

实际上，每种语言（以及每个编译器，即使它们编译相同的语言）可能会做一些不同的事情。

但是，至少在与动态加载的库接口的意义上，存在某种系统范围的约定。

然而，细节差异很大。

一个非常简单的“入门”可能是[http://kernelnewbies.org/ABI](http://kernelnewbies.org/ABI)

您可以查看一个非常详细和完整的规范，以了解定义 ABI 所涉及的复杂程度和细节是“System V Application Binary Interface AMD64 Architecture Processor Supplement” [http://www.x86-64。 org/documentation/abi.pdf](http://www.x86-64.org/documentation/abi.pdf)

# c++ - 如何使用 boost 异步执行两个线程？

> ID：12437395
> 
> 赞同：18
> 
> 时间：2012-09-15T12:30:41.933
> 
> 标签：c++, multithreading, unix, boost, c++11

我有这本书“超越 C++ 标准库”，并且没有使用 boost 的多线程示例。有人可以向我展示一个简单的例子，其中两个线程使用 boost 执行 - 让我们说异步？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-15T12:49:44.217

这是我最小的 Boost 线程示例。

```
#include <boost/thread.hpp>
#include <iostream>

using namespace std;

void ThreadFunction()
{
    int counter = 0;

    for(;;)
    {
        cout << "thread iteration " << ++counter << " Press Enter to stop" << endl;

        try
        {
            // Sleep and check for interrupt.
            // To check for interrupt without sleep,
            // use boost::this_thread::interruption_point()
            // which also throws boost::thread_interrupted
            boost::this_thread::sleep(boost::posix_time::milliseconds(500));
        }
        catch(boost::thread_interrupted&)
        {
            cout << "Thread is stopped" << endl;
            return;
        }
    }
}

int main()
{
    // Start thread
    boost::thread t(&ThreadFunction);

    // Wait for Enter 
    char ch;
    cin.get(ch);

    // Ask thread to stop
    t.interrupt();

    // Join - wait when thread actually exits
    t.join();
    cout << "main: thread ended" << endl;

    return 0;
} 
```

# ruby-on-rails - 为什么自定义验证在 RoR 3 中不起作用

> ID：12437396
> 
> 赞同：0
> 
> 时间：2012-09-15T12:30:46.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

这是我的照片模型类的代码：

```
class Photo < ActiveRecord::Base

  belongs_to :user
  belongs_to :organization

  validate :user_id_or_organization_id_cant_be_blank

...

  def user_id_or_organization_id_cant_be_blank
      if !:user_id? and !:organization_id?
        errors.add(:user_id, "no user")
        errors.add(:organisation_id, "no organization")
      end
  end 
```

问题在于验证。它不起作用，我不明白为什么。

我可以创建一张没有 user_id 或 organization_id 的照片，这是不应该发生的。

请向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:38:00.040

你宁愿这样做：

```
def user_id_or_organization_id_cant_be_blank
  if user_id.blank? && organization_id.blank?
    errors.add(:user_id, "no user")
    errors.add(:organisation_id, "no organization")
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:13:25.150

Rails 提供了检查存在性的标准方法：

```
validates :user_id, :organization_id,  presence:   true 
```

如果您需要进行复杂的验证，请尝试使用**ActiveModel::Validator**

```
class Photo < ActiveRecord::Base
  validates_with UserOrganizationIdsValidator
end

class UserOrganizationIdsValidator < ActiveModel::Validator
  def validate(record)
    if user_id.blank? && organisation_id.blank?
       errors.add(:user_id, "no user")
       errors.add(:organisation_id, "no organization")
    end
    # something custom else...
  end
end 
```

# java - 如何在特定字符后删除字符？

> ID：12437397
> 
> 赞同：0
> 
> 时间：2012-09-15T12:30:47.807
> 
> 标签：java, string, character

**我有例如这个字符串：**

> hello.name-2.txt

而且我只需要删除“-”之后的字符。

**所以我的输出应该是：**

> hello.name-.txt

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T12:36:54.437

你可以做

```
s = s.replaceAll("-.", "-"); 
```

如果你想替换一个数字，甚至“hello.name-1234.txt”，你可以使用

```
s = s.replaceAll("-\\d+", "-"); 
```

如果你只想这样做一次，你可以`replaceFirst`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:33:58.273

```
 int dashIndex = yourString.indexOf("-");
 String result = yourString.substring(0, dashIndex + 1) 
               + yourString.substring(dashIndex + 2); 
```

# ant - Datanucleus ANT 增强找不到我要增强的类

> ID：12437398
> 
> 赞同：0
> 
> 时间：2012-09-15T12:30:56.997
> 
> 标签：ant, datanucleus

我使用它是因为增强器插件无法处理 long `CLASSPATH`s on`Winodws`所以使用该插件不是一个有效的选项。

我的`module.xml`文件几乎是默认文件，但我只删除`enhance`了`compile`和`copy.metadata`. 我没有编译我的`.java`课程，因为：

1.  我有很多要包含的库，如果我升级任何一组库，都会很头疼。
2.  我不需要，因为 eclipse 实际上就是这样做的

我删除了存档整个项目文件夹的部分，因为我只是在构建一个 JAR。-->

```
 <echo message="==================================================================="/>
        <echo message="Enhancing the MODULE files"/>
        <echo message="==================================================================="/>

        <!-- the classpath to enhance -->
        <path id="module.enhancer.classpath">
            <pathelement location="${module.classes.dir}"/>
            <path refid="module.lib.classpath"/>
        </path>

        <!-- define the task enhancer -->
        <taskdef name="nucleusenhancer"
                 classpathref="module.enhancer.classpath"
                 classname="org.datanucleus.enhancer.tools.EnhancerTask" />

        <!-- enhance -->
        <nucleusenhancer classpathref="module.enhancer.classpath"/>

    </target>

    <!--
    ===================================================================
    TARGET : modulearchive
    ===================================================================
    -->
    <target name="modulearchive" depends="enhance">
        <mkdir dir="${module.archive.dist.dir}"/>
        <delete file="${module.archive.dist.dir}/${module.archive.dist.file}"/>
        <zip zipfile="${module.archive.dist.dir}/${module.archive.dist.file}">
            <zipfileset  dir="${module.classes.dir}"  prefix="" includes="**/*"/>
        </zip>
    </target> 
```

我也有这个警告，无论我做什么都不会消失！

```
<taskdef name="nucleusenhancer"
                 classpathref="module.enhancer.classpath"
                 classname="org.datanucleus.enhancer.tools.EnhancerTask" />
>>>E:\Projects\Core - Module\${module.lib.dir} does not exist. 
```

我的 module.properties 文件没有太大变化。我评论了`WAR`建筑的属性和未评论的建筑属性`JAR`：

```
#######################################
# SAMPLE FOR JAR MODULE (commented out)
#######################################
module.dir=./
module.lib.dir=${module.dir}/lib/dn
module.lib2.dir=${module.dir}/lib/deps
module.classes.dir=${module.dir}/target/classes
module.src.java.dir=./src/main/java
module.build.debug=on
module.archive.dist.dir=dist
module.archive.dist.file=${name}.jar
module.archive.files=**/* 
```

我的项目文件夹`lib`下的文件夹包含 2 个文件夹，用于 RDBMS 的 datanucleus 主 jar，而另一个文件夹包含 datanucleus 依赖项。我编译的类在下面`target`。

输出如下：

```
Buildfile: E:\Projects\Core - Module\build.xml

default:
        [echo] ===================================================================
        [echo] Welcome to the build.
        [echo] ===================================================================

enhance:
        [echo] ===================================================================
        [echo] Enhancing the MODULE files
        [echo] ===================================================================
[nucleusenhancer] log4j:WARN No appenders could be found for logger (DataNucleus.Enhancer).
[nucleusenhancer] log4j:WARN Please initialize the log4j system properly.
[nucleusenhancer] DataNucleus Enhancer (version 3.1.0.release) : Enhancement of classes
[nucleusenhancer] DataNucleus Enhancer completed and no classes were enhanced. Consult the log for full details

modulearchive:
         [zip] Building zip: E:\Projects\Core - Module\dist\my-module-name.jar

distribution:
        [echo] ===================================================================
        [echo] Module file ready at: dist/my-module-name.jar
        [echo] ===================================================================
BUILD SUCCESSFUL
Total time: 2 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:28:14.860

增强是对已编译类的实际修改。如果您不首先编译类，那么它就没有什么可以增强的了。

# android - 将 Android 应用程序从 PC 下载到设备

> ID：12437403
> 
> 赞同：-1
> 
> 时间：2012-09-15T12:31:24.860
> 
> 标签：android, sdk

我在 Win7/32 下成功创建了 Android 应用程序并将它们下载到设备（Galaxy GT-N7000）。在 Win7/64 下使用另一台笔记本电脑，起初该设备无法识别。我从三星（英国）获得了一个驱动程序，这可以工作，例如我可以在笔记本电脑和设备之间传递文件等。但是：现在，出于下载应用程序的目的，该设备在 Eclipse 中不再可见（与 Win7/ 上的情况不同） 32 笔记本电脑）。

注意：我在 Eclipse>Window>Show View>Android>Devices 中进行了检查：我的模拟器列在那里，但没有列出设备。我找不到命令“设备管理”。

请指教; 预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:00:56.453

同意@Alex的回答，选项如下，

*   在电子邮件中附加您的 .apk 文件并在设备中打开该电子邮件，下载并运行。
*   将您的设备与 PC 连接，选择“连接 USB 存储”，将 .apk 文件复制到 SD 卡的文件夹中，然后断开连接线并从设备的文件管理器中安装它。
*   最后一个选项是将您的 .apk 文件放在某个 live ip 的文件夹中，并在浏览器中以完整路径打开该 live ip，它将直接下载 .apk 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:39:41.450

检查您是否在设置|开发人员选项中打开了设备上的“启用 USB 调试”

# jquery - DD操作后的Jquery Alert

> ID：12437408
> 
> 赞同：1
> 
> 时间：2012-09-15T12:32:16.377
> 
> 标签：jquery, jakarta-ee

我有一个表格，其中数据正在传递以存储在数据库中。Db 操作后我需要显示一个花哨的 J 查询 Alert 是否 Db 操作成功失败。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:53:58.550

为数据库操作制作 2 个标志（比如 0 和 1）。1 表示成功 1 表示不成功。当数据库操作成功完成时，传递 1 来调用或初始化 Jquery 警报成功，同样失败。

喜欢

```
if(DB==1){
     jAlert("SUCCESS");
}
if(DB==0){
     jAlert("UNSUCCESS");
} 
```

# javascript - 二维数组中突然“未定义”

> ID：12437410
> 
> 赞同：1
> 
> 时间：2012-09-15T12:32:51.787
> 
> 标签：javascript, arrays

我有这个功能：

```
function composeLootTables(lootType, result) {
    for (var d in lootType.items) {
        if (result[lootType.title] === undefined) {
            result[lootType.title] = [[0],[0]];
        }
        result[lootType.title][d][0] = lootType.items[d][0];
        result[lootType.title][d][1] = lootType.items[d][1];
        composeLootTables(lootType.items[d][0], result);
    }
    return result;
} 
```

首先它解析这个：

```
residential : {
    title: "residential",
    items:[
        [generic, 0.7],
        [military, 0.7],
        [hospital, 0.7],
        [Colt1911, 0.5]
   ]
}, 
```

然后其他 lootType 成为其中之一：

```
var Colt1911 = {
    title: "Colt 1911"
};
var generic = {
     title: "Generic",
     items: [[tin_can, 0.2],[jelly_bean, 0.3]]
};
var military = {
    title: "Military",
    items: [[bfg, 0.2],[akm, 0.3]]
};
var hospital = {
    title: "Hospital",
    items: [[condoms, 0.2],[zelyonka, 0.3]]
}; 
```

所以，麻烦就在这个字符串中：

```
 result[lootType.title][d][0] = lootType.items[d][0];
 result[lootType.title][d][1] = lootType.items[d][1];

Uncaught TypeError: Cannot set property '0' of undefined 
```

根据console.log，`result[lootType][d] === undefined`仅当“d”变为2或3时（其他时候“d”=== 0或1）。

我假设如果我将值分配给数组的未定义字段，它将被这个值填充。

我已经找到解决方案 -

```
result[lootType.title][d] = lootType.items[d]; 
```

工作正常，它返回正确的二维数组，但我想知道这些数组是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:50:47.780

我不得不说问题是`results`您作为参数传递的对象。如果它没有在这些索引上创建足够的数组，那么这些位置将是未定义的，并且会在您尝试分配给它们时抛出。您修改后的版本会起作用，因为它复制了对已初始化数组的引用。

# .net - 如何对这个 linq 查询进行空检查？

> ID：12437411
> 
> 赞同：0
> 
> 时间：2012-09-15T12:33:13.143
> 
> 标签：.net, linq

我有几个导致空值问题的 linq 查询。我很确定有一个简单的答案，但我想不出它是什么。

```
 var IDs = _user.IsNotNull()
        ? _user.BookmarkedStores.Select(s => s.StoreId)
        : null;

    var stores = IDs.IsNotNull()
        ? StoreBL.FindActiveById(IDs).OrderBy(s => s.Name).ToList()
        : null; 
```

IQueryable.OrderBy 引发空异常，因为 StoreBL.FindActiveById 为空。空返回是有效的，因为商店可能在 ID 列表中但未激活。

所以我需要以某种方式在它们之间进行空检查。

任何人都建议是否以及如何在查询本身中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:47:01.503

我找到了一个合适的答案。

FindActiveById() 现在返回 Enumerable.Empty().AsQueryable() 而不是 null。

# ios - 如何在 iOS 中向 UIPasteboard 写入和读取字符串值？

> ID：12437412
> 
> 赞同：3
> 
> 时间：2012-09-15T12:33:19.987
> 
> 标签：ios

我有以下测试，失败

```
NSString * expectedValue = @"achilles";

UIPasteboard *pasteboard = [UIPasteboard pasteboardWithName:@"pb1" create:YES];
pasteboard.persistent = YES;

pasteboard.string = expectedValue;    
STAssertEqualObjects(expectedValue, [pasteboard string], @"get written value from pasteboard");

[pasteboard setString:expectedValue];
STAssertEqualObjects(expectedValue, [pasteboard string], @"get written value from pasteboard"); 
```

两个断言都失败了，

```
'achilles' should be equal to '(null)' 
```

我是否错误地写入粘贴板，从粘贴板读取，或两者兼而有之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T13:52:23.490

我认为问题如下：
的`string`属性`UIPasteboard`定义为（[请参阅文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UIPasteboard_Class/Reference.html#//apple_ref/doc/uid/TP40008243-CH1-SW30)）

```
@property(nonatomic, copy) NSString *string; 
```

这意味着如果您为其分配一个字符串，它将被复制，即创建一个新对象。当您读回它并将其与原始对象进行比较时，比较肯定会失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-17T05:25:38.943

对于阅读和写作`NSString`，您可以使用普通粘贴板。

有两种简单的**写法**...

```
//Method 1
NSString * str=@"your String";
UIPasteboard * pasteboard=[UIPasteboard generalPasteboard];
[pasteboard setString:];

//Method 2
NSData *data = [str dataUsingEncoding:NSUTF8StringEncoding];
[pasteboard setData:data forPasteboardType:(NSString *)kUTTypeText]; 
```

你可以**读** `NSString`如下

```
 UIPasteboard * pasteboard=[UIPasteboard generalPasteboard];

    //Method 1
    NSLog(@"Text =%@",[pasteboard string]);

    //Method 2
    NSData * data = [pasteboard dataForPasteboardType:(NSString*)kUTTypeText];
    NSString * str =[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"str =%@",str); 
```

有关更多信息，您可以[参考此博客](http://hayageek.com/uipasteboard-example-read-write-share/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-17T05:03:26.570

如果您正在从 UIPasteBoard 写入或读取字符串，您可以通过访问轻松完成，

```
 [UIPasteboard generalPasteboard].string = @"your string";

   NSString *str =  [UIPasteboard generalPasteboard].string]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-21T02:34:47.593

您的代码通过了单元测试中的测试。如果您确实遇到问题，您应该指出您的开发环境。

> 测试用例“-[TestTests testExample]”已启动。
> 测试用例“-[TestTests testExample]”通过（0.001 秒）。

使用 SDK iOS7.1 在 Xcode 5.1.1 中测试

# php - 排序的 php 数组“自省”

> ID：12437415
> 
> 赞同：0
> 
> 时间：2012-09-15T12:33:35.777
> 
> 标签：php, arrays, symfony

出于某种原因，我有一个排序的 php 数组：

```
"$arr_questions" = Array [6]    
    0   Array [6]   
    1   Array [6]   
    2   Array [6]   
    3   Array [6]   
    4   Array [6]   
    5   Array [6] 
```

每个位置都是另一个数组。这次它是关联的。见位置 [0]：

```
0 = Array [6]   
    question_id 40  
    question    La tercera pregunta del mundo   
    explanation 
    choices Array [3]   
    correct 0   
    answer  1 
```

如果不循环我的数组，有没有办法直接访问这个位置 0，只知道它的一个属性？

示例...想象一下，我必须更改“question_id”属性为 40 的数组位置的某些属性。这是我唯一知道的。我不知道 question_id 属性是在第一个还是第二个或哪个位置。例如，假设我想将“answer”属性更改为 2。

如何在不循环整个数组的情况下直接访问该位置。我的意思是......我不想这样做：

```
foreach ($arr_questions as $question){
  if ($question["question_id"] == 40){
    $question["answer"] == 2;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:58:12.173

PHP Array 允许您通过其 id 访问随机值。

这实际上很重要，因为在其他语言中，数组索引必须始终是整数。然而，PHP 数组的工作方式与其他语言的字典很相似，其中您的键可以是其他数据类型，如字符串。

这样，如果您希望能够访问某个问题，并且您知道 ID，那么您应该通过让 question_id 作为每个数组条目的索引来构造数组。

如果你做不到，不要惊慌。最后，您将不得不进行某种搜索，这是真的。但是，嘿，那么您有两种情况：

*   a) 你的数组**很大**。哇，在这种情况下，您应该运行优化的排序算法，例如合并排序或快速排序，以便您可以快速排序数据，然后按照您想要的字段对它们进行排序。
*   b）您的阵列不是那么大。我认为在这种情况下这没什么大不了的，并且排序可能会使您的应用程序变慢，如果您想更快，您应该缓存对问题排序的结果（如果可能）或重构数组构造，以便它使用您想要的键作为数组索引。

作为旁注，您无法映射事物以避免浪费一些 CPU 时间或一些 RAM 空间，通常您可以将一个交换为另一个。我的意思是，如果你只存储一个由 question_id 索引的数组，那么你可以在 O(1) + O(array-access) 时间内查找 question_id。如果 O(array-access) 是一个常数，那么你可以在 O(1) 中得到东西。这意味着恒定的时间，并且它尽可能快。

但是，如果您需要其他类型的搜索，您最终可能会得到 O(n * log(n)) 或 O(n²) 时间复杂度。

但是，如果您存储了尽可能多的数组来订购它们，那么您只需要 O(1) 时间来访问它们中的每一个。*但是*，您需要 O(n) 空间（这里的 n 是可以直接访问的功能数量）。

这将增加构建数组的时间（通过常量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:36:47.060

不，如果不遍历数组，就无法访​​问该元素。但是，您可以将该搜索抽象为一个辅助函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:38:34.263

根据您的情况，没有循环是不可能的，但是如果您将数组结构更改为：

```
array(
    39 => array(...), 
    40 => array(...)
) 
```

其中 39 和 40 是你的`question_id`，那么你可以快速访问它们而无需任何循环。

如果您想要或必须保留该结构，那么只需编写一个函数来获取您想要`array`的参数来搜索数组`associative index`并`value`返回找到的索引，这样您就不会被迫一遍又一遍地编写这个循环...

# c# - C# Getter/Setter 不工作

> ID：12437422
> 
> 赞同：1
> 
> 时间：2012-09-15T12:34:00.633
> 
> 标签：c#, getter-setter

我是 Java 专家，所以在 C# 中处理 getter/setter 对我来说有点新鲜。为什么这不起作用？

```
public String lastmodified {
            get { return this.lastmodified; }
            set 
            { 
                long ms = Int64.Parse(value);
                var date = new DateTime(1970, 1, 1).AddSeconds(ms);
                date.ToLocalTime();
                this.lastmodified = date.ToString("HH_mm_yyyy");
            }
        } 
```

**value**在这个 cade 中是一个类似于 1987123019 的字符串

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T12:36:36.680

因为您在最后一行分配属性本身。您应该使用不同的大小写或下划线来区分属性或字段。

我会推荐标准的 C# 命名约定。还要以原始格式保存数据。还有 driis 所说的。

```
private DateTime lastModified;
public String LastModified {
        get { return lastModified.ToString("HH_mm_yyyy"); }
        set 
        { 
            long ms = Int64.Parse(value);
            var date = new DateTime(1970, 1, 1).AddSeconds(ms);
            date = date.ToLocalTime();
            lastModified = date;
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T12:37:20.487

这会给你一个 StackOverflowException，因为你在`set`（和`get`，就此而言）的最后一行递归地调用属性设置器。您需要将值分配给类的字段，并从 getter 中的该字段中读取它。您当前的代码只是无限地调用相同的属性访问器方法，直到您用完堆栈空间。

常见的 C# 命名约定建议属性和方法名称使用 PascalCasing，实例变量使用 camelCasing，可能带有下划线前缀。

此代码应该可以工作：

```
private string lastModified; // instance variable
public string LastModified 
{
    get { return this.lastModified; }
    set 
    { 
        long ms = Int64.Parse(value);
        var date = new DateTime(1970, 1, 1).AddSeconds(ms);
        date = date.ToLocalTime();
        this.lastModified = date.ToString("HH_mm_yyyy");
    }
} 
```

此外，“不工作”有点宽泛。但我猜你会看到该`ToLocalTime`方法不适用于日期。这是因为`DateTime`在 C# 中是不可变的，因此在构造后无法更改。您需要将`date`变量分配给以下结果`ToLocalTime()`：

```
date = date.ToLocalTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:41:19.300

对于属性过程，getter 应该返回保存“包装”值的类成员变量的值。对于 setter，应将入站值分配给该类成员变量。您正在做的事情使该属性具有自我参照性。

# web-services - 什么是被动 Web 服务？

> ID：12437432
> 
> 赞同：0
> 
> 时间：2012-09-15T12:35:36.763
> 
> 标签：web-services

我们公司正在研究采用新的 SaaS，但我们必须将一些资源集成到我们当前的应用程序中。在与 SaaS 公司开发支持团队交谈时，他们告诉我们有一个可用的 Web 服务 (SOAP)，但它是一个“被动 Web 服务”，并且需要启动与软件的连接以发送或接收数据。

我们做出决定的时间很短，而且支持团队在周末没有时间，所以我来这里是为了 stackoverflow ......并且想了解更多关于它的信息，因为我用谷歌搜索并找不到任何关于学科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:42:11.483

所有 Web 服务都基于 HTTP，它是当今编写的请求/响应协议。如果 SaaS 顾问的意思是其中没有内置推送功能，那么他/她是正确的。

Web 服务当然可以发送数据以响应请求，所以这不是问题。它可以接收您发送给它的任何数据，前提是您遵守 Web 服务将发布的合同。但在这两种情况下，会话都是由与 Web 服务建立 HTTP 连接的客户端发起的。

SaaS 顾问在不应该存在的地方制造谜团。我认为他/她闻到了现金的味道，而您将成为提供现金的来源。

也可能是顾问非常直截了当，但这是您第一次尝试考虑 Web 服务或面向服务的架构，而您对它的含义一无所知。

您没有提供有关您必须决定什么或为什么该答案不可接受的任何信息。没有一个用例或要求可以帮助这里的人了解您的需求。我希望您对问题和需求陈述的理解比这个问题更好。如果没有，难怪你有问题。投票结束。

# macos - 我在哪里可以找到 Mac 上的 Icon Composer？

> ID：12437433
> 
> 赞同：11
> 
> 时间：2012-09-15T12:35:41.630
> 
> 标签：macos

我试图找到 Icon Composer，它应该是作为 Xcode 的一部分下载的，但是我找不到它，无论是在应用程序中还是在聚光灯下。

任何想法可能在哪里，或者我是否必须单独下载？如果有，从哪里来？我尝试在 App Store 中寻找它，但没有找到。

编辑：如果有帮助，我正在使用 Xcode 4.4.1。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-15T15:59:04.797

Apple 目前不支持 Icon Composer，原因之一是 Icon Composer 不允许使用 Retina Displays。

替换的是一个名为“ `iconutil`”的笨重的命令行工具。它可能作为“Xcode 命令行工具”下载的一部分安装。

您需要将图标创建为 PNG，将它们放入一个文件夹（称为 an `.iconset`），然后`iconutil`在该文件夹上运行“”工具以创建一个“ `.icns`”文件。

[这个相关问题有一个有用的答案](https://stackoverflow.com/questions/11770806/why-doesnt-icon-composer-2-4-support-the-1024x1024-size-icon-any-more)，[它指向这个 Apple 文档](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW3)。一旦你掌握了它的窍门，创建图标的过程就变得简单了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-15T12:44:18.250

我在 /Applications/Development 中有那个版本的 Xcode。如果没有，请运行 Xcode 并选择菜单项“Xcode->Open Developer Tool->More Developer Tools...”并查找与图形相关的下载。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-28T13:32:42.050

菲利普是对的，但这里有一个澄清，Icon Composer 仍然可用。在 XCode 中按 XCode 菜单 > 打开开发者工具 > 更多开发者工具...

在出现的网站中，您需要搜索“图形工具”并下载同名的 dmg 文件（大约 120 MB）。它将包含以前随 XCode 分发的 Icon Composer 应用程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-03T15:30:12.770

这是另一个较新的 github 版本 Icon Compositor 2x 的链接 - 它也有 1024，所以 Retina 分辨率。这是 Github 存储库： [https ://github.com/lemonmojo/IconComposer2x](https://github.com/lemonmojo/IconComposer2x)

[在原始 Icon Composer](https://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW3)的以下链接中，它显示“注意：不再有 1024x1024 尺寸。它被 512x512@2x 取代。”

较新的 github 版本称为 Icon Compositor 2x 直接 1024

# java - 从内部类实例实例化外部类？

> ID：12437435
> 
> 赞同：1
> 
> 时间：2012-09-15T12:36:03.033
> 
> 标签：java, design-patterns, inner-classes

我在答案之一中找到了以下示例： [Java 内部类和静态嵌套类](https://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class)

```
 public class Container {
        public class Item{
            Object data;
            public Container getContainer(){
                    return Container.this;
            }
            public Item(Object data) {
                    super();
                    this.data = data;
            }

        }

        public static Item create(Object data){
            // does not compile since no instance of Container is available
            return new Item(data);
        }
        public Item createSubItem(Object data){
            // compiles, since 'this' Container is available
            return new Item(data);
        }
    } 
```

我想知道我们为什么要做这样的事情：即为了获取容器的实例，为什么我们要创建内部类的实例？这种方法有什么用？它是哪种设计模式？上面的方法已经在一个维护项目中使用了，我还是没明白它有什么用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:57:44.130

该结构的**主要**目的是管理`data`. 内部类分发对“容器”的引用只是一个不重要的实现细节。

像您这样的抽象和删节示例的问题是：您只需将“如何”从编写者转移给代码的读者。但是“为什么”完全丢失了。

所以你可以`Container`用`FileSystem`和`Item`和替换文件`File`的`data`更多内部状态。然后你可以看到：

*   一个文件系统可以有一个或多个文件。
*   一个文件恰好在一个文件系统中。
*   File 的生命周期不能超过文件系统的生命周期。
*   `File`和之间的实现`Filesystem`是紧密耦合的——每个都可以调用另一个——甚至是`private`方法。

最后一点是 IMO 最重要的一点：您可以向`public`真实用户提供苗条和安全的 API，同时`File`可以使用彼此的`Filesystem`危险方法。`private`对于文件系统，您不想授予*其他任何人*访问这些危险方法的权限。

这些特征对于某些问题很常见 - 因此它们被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:50:37.967

> 我想知道我们为什么要做这样的事情：即为了获取容器的实例，为什么我们要创建内部类的实例？

这不是正在发生的事情。

事实上，*除非您已经拥有* 可以调用该方法的外部类的实例，否则您*无法*创建内部类的实例。创建内部类实例不会创建外部类的新实例。相反，它在现有实例的上下文中创建它......当您调用内部类构造函数时，它是“可用的”。`Item` *`Container``createSubItem`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:40:24.260

有问题的方法被定义为`static`只能访问类的静态成员，并且由于`Item`该类未声明为静态内部类，因此无法从静态函数访问。

我不确定这种特定的设计模式或为什么需要它，但这可以工作：

```
public static Item create(Object data) {
    Container c = new Container();
    return c.new Item(data);
} 
```

我们使用这种设计的地方之一就是为了增加`Comparator`类。*

# php - 以编程方式同步记录的想法

> ID：12437437
> 
> 赞同：3
> 
> 时间：2012-09-15T12:36:27.697
> 
> 标签：php, mysql, database, synchronization

我需要在本地和远程数据库之间同步记录，比如客户列表。两侧的数据库具有相同的结构。我考虑过使用某种标记（日期字段，字段值的哈希/校验和......）但是你有什么建议？

编辑：远程数据库在虚拟主机上，因此需要 PHP 来传输数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:49:26.670

在您的记录中包含最后更改字段（日期）始终是一个好主意。请记住，如果您开始同步，则必须处理冲突。

如果双方都可以插入，请为主键使用分区方案。示例：站点 A 从 1000000000 开始，站点 B 从 2000000000 开始（使这个数字足够大，或者简单地将主键大小除以并发站点的数量）。

**粗略同步图：**

1.  从源 A 获取修改的记录，从上一个同步周期开始。
2.  对于每条记录，检查：
    1.  是新插入A吗？然后插入B
    2.  是否在 A 中修改，但在 B 中未修改：更新 B
    3.  是否在 A 和 B 中修改：解决字段级别的冲突。
3.  从源 B 获取修改的记录，从上一个同步周期开始
4.  对于每条记录，检查：
    1.  是新插入B吗？然后将其插入A
    2.  是否在 B 中修改，但在 A 中未修改：更新 A
    3.  是否在 B 和 A 中修改：解决字段级别的冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:48:33.127

如果你想通过代码同步两个数据库，你就在找麻烦。

首先，您需要处理自己的主键生成，因为在不同站点上插入记录时，主键可以/将是相同的。唯一主键生成并不容易完成。

此外，您需要一些冲突解决方案。任何一方所做的更新或删除都必须反映到另一个站点。通常，如果没有用户干预，您无法解决冲突。

我的建议：查看数据库原生的内置（双向）复制。它将为您省去很多麻烦。

# css - 如何始终调整本身小于标准的字体大小？

> ID：12437439
> 
> 赞同：1
> 
> 时间：2012-09-15T12:36:40.453
> 
> 标签：css, fonts, web, font-size, typography

我的问题是我使用的是本地托管的 webfont（我们称之为 Gothic），并且我在样式表中应用的字体大小对声明的备份字体有显着影响。

例如，为了方便起见，使用虚数：

Gothic 的大小为 48，px 或 em，大约占 300px 的宽度。备用字体 Arial，如果它以 48 px 或 em 的任何原因加载，则加载宽度约为 1200 像素。

我从来没有见过这样的字体，这让我想知道这种奇怪是否是由于文件格式的构造造成的，但我不确定。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:22:05.930

首先，看一下浏览器的[@font-face 支持](http://caniuse.com/#feat=fontface)并注意：

*   EOT 格式仅受 IE 支持
*   除了 IE8 之外的任何浏览器都支持 WOFF
*   IE 和 Firefox 不支持 SVG
*   任何浏览器都很好地支持 TTF/OTF，但 IE

你涵盖任何浏览器吗？

然后，您需要为根本不支持 @font-face 的浏览器提供备用方案。

我建议您在文档的开头部分包含[Modernizer 。](http://modernizr.com/download/#-fontface-cssclasses-teststyles)

* * *

在 Modernizer 的下载页面上选择**@font-face**和**Add CSS classes ，或点击此**[下载链接](http://modernizr.com/download/#-fontface-cssclasses-teststyles)。

Modernizer 为您的页面`<html>`元素添加类，因此您可以使用这些类来覆盖不支持特定功能的浏览器的设置。此规则将适用于整个文档：

```
.no-fontface {
    font-size:16px; /* the font size value for Arial only */
} 
```

它必须放在**任何**其他`font-size`规则之下。或者，您可以声明`font-size:16px !important;`规则并将其放在样式表中的任何位置。它不会被覆盖（`important!`当然，除了使用其他规则）。

如果要定位特定元素，则必须放在`.no-fontface`选择器的开头。例如：

```
.no-fontface #header h1 {
    font-size:18px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:11:49.350

理想情况下，您希望为您的*字体堆栈*选择一组具有相似比例的字体。如果在任何操作系统上都没有与您的首选字体相似的字体，那么此时您确实无法做到这一点。

无论如何，字体大小都不是您可以依赖的，因为用户可以并且会修改它。当他们这样做时，你的设计会发生什么？

# php - Mime Version 一个 Content-Type 显示在我的电子邮件正文中

> ID：12437444
> 
> 赞同：1
> 
> 时间：2012-09-15T12:37:09.710
> 
> 标签：php, email

我不是使用 php 编码的专家，而且我的电子邮件有问题。

问题是这样的：我看到 Mime Version 一个 Content-Type 出现在我的电子邮件正文中。
**那么我怎样才能避免在我的邮件正文中显示这个呢？**伙计们！

我的邮件如下所示：

MIME-Version: 1.0    **<--想要隐藏这个！！**
内容类型：文本/html；charset=UTF-8   **<--隐藏这个！！**
From:Some name
Email: some.mail@yahoo.com
message:
some message

我的代码：

```
 if (!$errors) { 
            $user = $_POST['email'];

            $mail = 'dejo.dekic@yahoo.com';  //send mail to me
            $subject = 'Kontakt';  
            $tema = 'Info';
            $headers  = 'MIME-Version: 1.0' . "\r\n";
            $headers .= 'Content-Type: text/html; charset=UTF-8' . "\r\n";
            $headers .= 'From: ' . $_POST['name'] . "\n"; 
            $headers .= 'Email: ' . $_POST['email'] . "\n";  
            $headers .= "Message:\n" . $_POST['message'] . "\n\n"; 
            $add_headers = 'From: mail@robertpeic.com' . "\r\n". "Return-path: mail@robertpeic.com" . "\r\n";

            $poruka ='Vaš kontakt je uspjesno zaprimljen! Odgovorit ću vam u najkraćem mogućem roku. Hvala! Molimo ne odgovarajte na ovu poruku. Ova poruka je automatska.';
            mail($mail, $subject, $headers, $add_headers, "-fmail@robertpeic.com");  
            mail($user, $tema, $poruka, $add_headers, "-fmail@robertpeic.com"); 

            echo "<div class='hvala' style='color:white;margin:0px auto;padding-top:20px;width:290px;background-color:white;font-weight:bold;text-align:center;'><p>Hvala Vam na kontaktu!</p></div>";

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:06:42.203

试试下面的代码：

```
// multiple recipients
$user = $_POST['email'];
$mail = 'dejo.dekic@yahoo.com';  //send mail to me
$subject = 'Kontakt';  
$tema = 'Info';

// message
$message = '
  <table>
    <tr>
      <td>From: </td><td>'.$_POST['name'] .'</td>
    </tr>
    <tr>
      <td>Email: </td><td>'.$_POST['email'].'</td>
    </tr>
    <tr>
      <td>Message: </td><td>'.$_POST['message'].'</td>
    </tr>
  </table>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'From: '.$_POST['name'].' <mail@robertpeic.com>' . "\r\n";

// Mail it
$poruka ='Vaš kontakt je uspjesno zaprimljen! Odgovorit cu vam u najkracem mogucem roku. Hvala! Molimo ne odgovarajte na ovu poruku. Ova poruka je automatska.';
mail($mail, $subject, $message, $headers, "-fmail@robertpeic.com");
mail($user, $tema, $poruka, $headers, "-fmail@robertpeic.com"); 
```

# java - 覆盖java序列化不匹配

> ID：12437445
> 
> 赞同：0
> 
> 时间：2012-09-15T12:37:16.823
> 
> 标签：java, serialization, deserialization

我有序列化对象的序列化对象不匹配的问题。这是我的场景...

版本 1\. A 类扩展 B 类，都实现可序列化，B 类**没有序列 UID**

版本2。A类扩展了B类，都实现了可序列化，B类*现在有一个SERIAL UID* *，A类的serialuid与版本1相同。

遗憾的是，我无法访问 Java 源代码，因此我在此处和其他站点上进行了检查，并通过覆盖我的 objectinputstream 的 readclassdescriptor 并使用它来读取对象找到了一种解决方法。但是，我遵循了示例，但我的代码仍然报告说（B类的）serialversionuids仍然不匹配..我什至尝试了另一种解决方案，我将B类版本2的serialversionuid“注入”到B类v1的数据中，然后使用objectinputstream读取，但我找不到serialversionuid在持久化 B 类 v1 对象的文件中（使用十六进制查看器/编辑器）.. 有什么想法可以克服这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:42:51.763

我会将 serialVersionUID 设置为 1，当您收到错误消息时

```
serialVersionUID=-1023774639622504485 local class serialVersionUID=1 
```

您知道，如果您将您的 serialVersionUID 更改为`-1023774639622504485`L 或者它是什么，它将与您当前所拥有的相匹配。这将允许您通过 uid 检查。

# iphone - UITabBarItem 内的图像位置

> ID：12437452
> 
> 赞同：0
> 
> 时间：2012-09-15T12:38:13.777
> 
> 标签：iphone, objective-c, uitabbarcontroller, uitabbaritem

我正在使用代码显示带有项目的 UITabBar，我下载了一个示例，该示例显示带有“收藏夹”“联系人”的系统图标的项目......

```
UITabBarItem *favorites = [[UITabBarItem alloc] initWithTitle:nil image:a1 tag:0];
UITabBarItem *topRated = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemTopRated tag:1];
UITabBarItem *featured = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemFeatured tag:2];
UITabBarItem *recents = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemRecents tag:3]; 
```

我想使用我自己的图像，所以我更改了第一行（收藏夹），但是当我设置它时，图像从中间开始，并且总是在标题的小地方，即使它是空的。

如何控制这些项目内的图像位置？并禁用空标题位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-16T08:30:54.270

这是一个相当古老的问题，但即使是古老的问题也需要爱:)

因此，如果您仍然遇到此问题，您可以使用`UIViewController`s 选项卡栏项目图像插图：`tabBarItem.imageInsets`。

您在视图控制器上设置它，您将分配给`viewControllers`标签栏控制器的属性。

这是一个子类标签栏控制器的快速版本，它将始终确保所有图像对齐得稍微低一点。

```
override func setViewControllers(viewControllers: [AnyObject], animated: Bool) {
    super.setViewControllers(viewControllers, animated: animated)

    let array = viewControllers as! [UIViewController]
    for controller in array {
        controller.tabBarItem.imageInsets = UIEdgeInsetsMake(5, 0, -5, 0)
    }
} 
```

# mongodb - MongoDb 更新原子性

> ID：12437456
> 
> 赞同：3
> 
> 时间：2012-09-15T12:38:35.273
> 
> 标签：mongodb, atomic

我与一位朋友讨论了 MongoDb 及其原子性，我想知道他是否正确。有人告诉我，MongoDb 在**更新**期间会执行两个原子操作：

*   它正在删除现有文档（第一个原子操作）；
*   并插入一个新的（第二个原子操作）。

这意味着在一小部分时间里，文档是空的。

尽管这对我来说听起来不合理，但有没有人确定这是真的还是假的？

非常感谢您的回复，如果有人可以指出一些在线文档来阅读它，我们将不胜感激。

编辑：拼写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:00:26.217

MongoDB 对所有变异操作使用全局写锁（2.2 之前的每个服务器和 2.2 中的每个数据库）。这意味着无论更新的实现细节如何，从客户端的角度来看，它们都是原子的。全局写锁保证没有其他客户端可以看到对单个文档的部分更新。

这里有关于 MongoDB 全局写锁的文档：[http ://www.mongodb.org/display/DOCS/How+does+concurrency+work](http://www.mongodb.org/display/DOCS/How+does+concurrency+work)

# c - Another manner to swap the contents of two variables?

> ID：12437459
> 
> 赞同：1
> 
> 时间：2012-09-15T12:39:06.637
> 
> 标签：c, pointers, swap

Yesterday, I've seen the following function.

```
static void swap (int *p, int *q) {
    *p -= *q;
    *q += *p;
    *p = *q - *p;
} 
```

In which case this function does not work? I think there is potentially an overflow problem, and it can be also inefficient. Is there anything else?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T12:49:02.863

The overflow issue is not a "maybe", it's there for sure: when you exchange a high-magnitude negative with a large positive, you get an overflow, which is undefined behavior according to the standard.

But most importantly, there is absolutely no point to use this (or the xor trick) in place of the usual exchange (through a temp variable) for reasons of readability.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:08:10.877

Actually the above answer is wrong. It gets 0xFFFFFFFE for p because it initialized q with 0x7FFFFFFFE which does not fit and is (except for undefined behavior) in fact truncated to 0xFFFFFFFE.

So the code in that answer in fact starts with p = 0xFFFFFFFF and q = 0xFFFFFFFE and successfully swaps them.

(edit: it WAS wrong, it has been corrected now)

The routine in fact works perfectly (except for eventual undefined behavior which I'm not sure is there or not, I'm a bit fuzzy on the details of the standard).

Ignoring eventual undefined behavior, if the underlying arithmetic is the common 2's complement modulo arithmetic, the routine works and have no problems with overflows/underflows (it's a modulo arithmetic).

The only real problem is with aliasing. If the two pointers are identical, the pointed to integer will become 0\.

The precondition of the routine is therefore that the two pointers are valid and not aliased. Checks for null pointers and for identical pointers may be added, if that's what you expect your program to need.

The question of why to use this mechanism instead of the xor trick instead of the temp variable swap, is still open. But has NOTHING to do with the OP question: the routine works and overflow, as it's handled by 2's complement modulo arithmetic, which is the most common on processors, is not an issue (edit: it becomes only because of overflow being undefined behavior in the standard, but it works on any processor that uses 2's complement modulo arithmetic). As for efficiency, it all depends on the optimizer AND the processor.

# c# - 使用 BinaryFormatter 序列化类中的 String[] 变量

> ID：12437463
> 
> 赞同：1
> 
> 时间：2012-09-15T12:39:47.040
> 
> 标签：c#, serialization, grasshopper

我正在尝试将`m_settings`变量从 volatile 移动到持久记录。我尝试将`[serializable]`属性添加到类并`m_settings`使用 BinaryFormatter 将变量发送到文件流，但我收到一条错误消息`the file cannot be written, access to the file is denied`。我究竟做错了什么？

```
[Serializable] 
public class SettingsComponent : GH_Component
{
    public SettingsComponent(): base("LoadSettings", "LoadSettings", "Loading ini", "Extra", "Silkworm") { }

    public override void CreateAttributes()
    {
        m_attributes = new SettingsComponentAttributes(this);
    }

    string m_settings_temp;
    string[] m_settings;
    public void ShowSettingsGui()
    {
        var dialog = new OpenFileDialog { Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*" };
        if (dialog.ShowDialog() != DialogResult.OK) return;

        m_settings_temp = File.ReadAllText(dialog.FileName);
        m_settings = m_settings_temp.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
        ExpireSolution(true);
    }

    protected override void SolveInstance(IGH_DataAccess DA)
    {
        if (m_settings == null)
        {
           AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "You must declare some valid settings");
           return;
        }
        else
        {  
                    FileStream fs = new FileStream("DataFiletemp.dat", FileMode.Create);
                    BinaryFormatter formatter = new BinaryFormatter();
                    try
                    {
                        formatter.Serialize(fs, m_settings);
                    }
                    catch (SerializationException e)
                    {
                        Console.WriteLine("Failed to serialize. Reason: " + e.Message);
                        throw;
                    }
                    finally
                    {
                        fs.Close();
                    }

                   DA.SetDataList(0, m_settings);
        }  

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:17:31.367

Arthur，如果您的 m_settings 对象并不复杂，您可以使用项目设置（应用程序或用户级别）。以下是如何将一些项目设置保存到 app.config 的示例代码：

```
 [YourNamespace].Properties.Settings.Default["MyProperty"] = "Demo Value";
     [YourNamespace].Properties.Settings.Default.Save(); 
```

如果您需要二进制序列化，您可以使用如下代码：（序列化对象和继承对象必须标记为可序列化）

```
 /// <summary>
    /// Serializes object to file
    /// </summary>
    /// <param name="data"></param>
    /// <param name="FilePath"></param>
    public static void SerializeMyObject(object data, string FilePath)
    {
        System.IO.Stream stream = null;
        try
        {
            stream = System.IO.File.Open(FilePath, System.IO.FileMode.Create);
            System.Runtime.Serialization.Formatters.Binary.BinaryFormatter bformatter =
            new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
            bformatter.Serialize(stream, data);
            stream.Close();
            stream.Dispose();
        }
        catch (Exception ex)
        {
            try
            {
                stream.Close();
                stream.Dispose();
            }
            catch (Exception)
            {
            }
            throw new Exception(ex.Message);
        }
    } 
```

# oracle - Oracle 中如何检索最后插入的记录

> ID：12437464
> 
> 赞同：3
> 
> 时间：2012-09-15T12:40:19.477
> 
> 标签：oracle

> **可能重复：**
> [如何获取表中的最后一行 - Oracle 11g？](https://stackoverflow.com/questions/12378424/how-to-get-the-last-row-in-a-table-oracle-11g)

我想知道如何获取最后插入的记录值，因为我想检索并查看最后插入表中的详细信息

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T12:44:54.210

```
insert into mytable (...) values (...)
returning id into v_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:06:40.560

如果您有主键：

```
select * from YOURTABLE
    where primary_key=(select max(primary_key) from YOURTABLE) 
```

# open-source - Appharbor 上托管的应用程序的源代码是否可供公众使用？

> ID：12437468
> 
> 赞同：0
> 
> 时间：2012-09-15T12:40:48.613
> 
> 标签：open-source, appharbor

我看到 appharbor 是 Windows azure 的非常有前途的替代品。默认情况下，那里创建的所有试用应用程序都是开源的吗？如果是，删除应用程序也会删除源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:53:40.813

不，您可以免费使用 AppHarbor 并将您的源代码保密。

# jquery - Jquery插件：访问设置初始化内的元素属性

> ID：12437469
> 
> 赞同：0
> 
> 时间：2012-09-15T12:40:54.437
> 
> 标签：jquery, dom

我正在尝试访问几个 html 元素的数据属性（'maxselection'），同时将它们附加到 jquery 插件：

```
$(".select2").select2({ // several html elements
    maximumSelectionSize: $(this).data('maxselection')
}); 
```

那是行不通的。

你如何才能达到这个特定范围内的元素属性？

*顺便说一句：select2 是一个下拉增强器，一个选择的分支*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:52:19.987

`this`不是对象字面量定义中的选定元素。像这样的东西会起作用：

```
$(".select2").each(function () {
    var $this = $(this);

    $this.select2({
        maximumSelectionSize: $this.data('maxselection');
    });
}); 
```

# android - 覆盖 Adapter.getView

> ID：12437472
> 
> 赞同：8
> 
> 时间：2012-09-15T12:41:43.683
> 
> 标签：android, android-listview, adapter

我是 android 编程新手，并使用 Adapters (for a `ListView`) 做了第一步。

覆盖`Adapter.getView`我经常看到这样的事情：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View itemView = null;

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) parent.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        itemView = inflater.inflate(R.layout.table_row, null);
    } else {
        itemView = convertView;
    }

    // play with itemView

    return itemView;
} 
```

我的问题是反对这一点：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View itemView = super(position, convertView, parent);

    // play with itemView

    return itemView;
} 
```

这似乎对我有用，但我确信我错过了一个重要的点：D

感谢您的阅读，对不起我的英语不好...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T18:57:52.520

您可以使用

```
View itemView = super(position, convertView, parent); 
```

如果您只是从“即用型”适配器（不是`BaseAdapter`）派生的，例如`SimpleAdapter`或`ArrayAdapter`，因为它们*已经*为`getView()`.

看看他们：[http](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/ArrayAdapter.java#361) : //grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/ArrayAdapter.java#361 ArrayAdapter 和 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/SimpleAdapter.java#113](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/SimpleAdapter.java#113)用于 SimpleAdapter。

如果您从 派生`BaseAdapter`，您将不得不手动实现整个方法，正如您在第一个示例中所描述的那样，因为它没有开箱即用：http: [//grepcode.com/file/repository.grepcode。 com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/BaseAdapter.java#BaseAdapter](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/BaseAdapter.java#BaseAdapter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T18:37:24.887

Adapter的`getView(..)`-method可以有多种方式。唯一的问题是，哪个效率最高？

一篇有趣的文章，让您更详细地了解 ListView：http: [//lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T19:35:11.230

如果你的意思是这段代码：

```
if (convertView == null) {
    LayoutInflater inflater = (LayoutInflater) parent.getContext()
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    itemView = inflater.inflate(R.layout.table_row, null);
} else {
    itemView = convertView;
} 
```

对您来说似乎没有必要：这段代码允许 Android 创建相对较少数量的单元格（等于屏幕上可见的单元格数量 +-），然后“回收”这些单元格 - 一遍又一遍地使用它们当用户滚动列表时，而不是为数组中的每个对象创建一个单元格。这将帮助您：

1.  节省内存 - 因为您不会为数组中的每个元素创建视图

2.  节省 CPU 使用率 - 从 xml 文件创建视图对象（“膨胀”）是一项相对昂贵的任务，并且为数组中的每个项目这样做可能会阻塞你的 UI 线程

# javascript - 是否有适用于 Windows 8 的内置颜色选择器（javascript）

> ID：12437476
> 
> 赞同：2
> 
> 时间：2012-09-15T12:42:41.047
> 
> 标签：javascript, windows-8, color-picker

我正在使用 html5、JavaScript、CSS 等开发 Windows 8 应用程序（Metro）。我想为我的应用程序添加一个颜色选择器，以便用户可以更改背景和文本的颜色。

Windows 8 是否提供任何内置颜色选择器或者我应该使用外部 JavaScript 颜色选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:33:15.960

我在[开发人员文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371663%28v=vs.85%29.aspx)中找到了这个。我只是[搜索](http://social.msdn.microsoft.com/search/en-us/windows/desktop?query=color%20picker&refinement=181&ac=8)它。

# service - liferay 构建服务

> ID：12437479
> 
> 赞同：0
> 
> 时间：2012-09-15T12:43:00.343
> 
> 标签：service, ant, build, liferay

我在 Liferay 中遇到了问题。我想创建与 Liferay 开发人员文档中提供的服务完全相同的新服务。但是，在将 XML 复制粘贴到 portlet 文件夹后，我尝试使用命令提示符上的命令构建 t：

```
ant build-service 
```

我什么都得不到。它只在控制台上这样说：

```
Buildfile: D:\Program\liferay-plugins-sdk-6.1.1\portlets\NewPortlet-portlet\build.xml
build-service: 
```

它就这样呆了那么久，而且仍然如此。我不知道是什么问题，是因为蚂蚁吗？我使用的是最新版本的 apache ant（目前：Apache Ant(TM) version 1.8.4 编译于 2012 年 5 月 22 日）是不是因为 portlet 文件夹中 build.xml 中的配置？

有人遇到同样的问题吗？还是只有我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:24:26.430

Ant 在构建任务期间挂起通常是因为在属性文件中启用了集群配置。

删除/注释掉集群配置，这应该可以解决问题。

# sql - Visual Studio 2012 和 MS Sql Server 2012 - 与服务器资源管理器连接

> ID：12437480
> 
> 赞同：0
> 
> 时间：2012-09-15T12:43:01.910
> 
> 标签：sql, visual-studio-2012, server-explorer

我在使用 MS SQL server 2012 Express 与 Visual Studio 2012 Ultimate 中的服务器资源管理器建立连接时遇到问题。一切都在本地机器上。

你可以在这里看到屏幕截图 - [http://s16.postimage.org/4gvo7r5id/se_prob_ss1.png](http://s16.postimage.org/4gvo7r5id/se_prob_ss1.png)

**使用 System.Data.SqlClient**和 SqlConnection.Open() 一切**正常**，我能够连接和执行 SQL 脚本（有和没有 Windows 身份验证）。

到目前为止我尝试了什么：

*   我在 Conncetions “允许远程连接到此服务器”中检查了 MS SQL Management Studio（已选中）
*   在我的 SQL Server 上的 SQL Server 配置管理器中启用 TCP/IP 协议
*   我尝试在关闭防火墙和防病毒保护的情况下连接
*   我尝试使用新的登录名（使用 System.Data.SqlClient.SqlConnection 可以）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:02:38.217

在图片中，您连接的服务器名称显示错误。您表示您安装了 SQL Express；它的默认实例名称为 SQLEXPRESS。因此，您要连接的服务器应该是：

```
MILLENIUM\SQLEXPRESS 
```

而不仅仅是千年。

# android - Android ActionBarSherlock 自定义视图

> ID：12437481
> 
> 赞同：4
> 
> 时间：2012-09-15T12:43:09.643
> 
> 标签：android, actionbarsherlock

我在我的 ActionBarSherlock 中添加了一个自定义顶栏，如

```
getSupportActionBar().setDisplayShowCustomEnabled(true);
getSupportActionBar().setCustomView(R.layout.my_custom_view); 
```

现在，它包含一个资源 id 为 R.id.back 的图像按钮。我如何处理这个项目的 onclick 监听器。

亲切的问候，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T05:55:21.477

如果你得到一个布局充气器并搜索按钮然后附加一个点击监听器，你也可以充气你的视图。

因此，例如，如果您的按钮的 id 为“myButton”，则类似于以下内容：

```
getSupportActionBar().setDisplayShowCustomEnabled(true);
View view = getLayoutInflater().inflate(R.layout.my_custom_view, null);
Button mybutton = (Button)view.findViewById(R.id.myButton);            
mybutton.setOnClickListener(new OnClickListener()
{
        @Override
        public void onClick(View v)
        {
        /** Your click actions here. */
        }
});
getSupportActionBar().setCustomView(view); 
```

# ios - 整数格式的 Json 数据

> ID：12437492
> 
> 赞同：0
> 
> 时间：2012-09-15T12:44:55.390
> 
> 标签：ios, json, nsstring, nsinteger

我正在解析 json 并且 url 返回一个整数值。（例如 278）

```
-(void) connectionDidFinishLoading: (NSURLConnection *) connection{
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
NSString *responseString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"JSON Response = %@",responseString);} 
```

当我在 NSLog 中打印响应时，它会给出类似这样的内容

`2012-09-15 18:02:02.091 Web Service[5190:f803] JSON Response = "278"`

我不想要引号中的输出。我想要它喜欢

`2012-09-15 18:02:02.091 Web Service[5190:f803] JSON Response = 278`

我怎样才能做到这一点？

JSON

```
NSString *urlString = [NSString stringWithFormat:@"http://10.5.6.105/ARAPPWS/Service1/InsertEmp/name=%@,phone=%@",name.text,number.text];
    NSURL *addUrl = [NSURL URLWithString:urlString]; 
    NSURLRequest *addRequest = [NSURLRequest requestWithURL:addUrl];
    (void)[NSURLConnection connectionWithRequest:addRequest delegate:self];

-(void) connection: (NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)response
{
jsonData = [[NSMutableData alloc]init];

}
-(void) connection: (NSURLConnection *) connection didReceiveData:(NSData *)data
{
[jsonData appendData:data];

}

-(void) connectionDidFinishLoading: (NSURLConnection *) connection
{
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
responseString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

[self performSelector:@selector(uploadEmpImg:) withObject:nil afterDelay:1];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:47:19.293

您可以使用`- [NSString integerValue]`来获取字符串的实际数字表示：

```
NSLog(@"JSON response = %d", [responseString integerValue]); 
```

编辑：问题是它返回一个 JSON 片段——严格来说它不是有效的 JSON。然后你可以使用

```
[responseString substringWithRange:NSMakeRange(1, responseString.length - 2)] 
```

获取不带引号的实际字符串值和

```
[[responseString substringWithRange:NSMakeRange(1, responseString.length - 2)] intValue] 
```

将其作为整数。

# java - 完全翻译应用程序

> ID：12437497
> 
> 赞同：0
> 
> 时间：2012-09-15T12:45:38.030
> 
> 标签：java, swing, translation, look-and-feel

因此，我可以管理翻译我创建的字符串，但是，我在将字符串合并到诸如 JFileChooser 之类的摆动元素中或当 JFileChooser 中的文件重命名失败时弹出的消息时遇到问题。

我还使用了几个 L&F（用户可以切换它们）。我一直听到两件不同的事情：我要更改的字符串的键是 L&F 特定的，它们不是……

所以，如果他们是的话，有人可以告诉我他们在 Nimbus L&F 中的位置（我有它的源文件），所以我可以将它们更改为“万能钥匙”（我将为所有 L&F 做）所以我没有为每种外观和感觉编写不同的代码。

如果有人会向我解释如何将所有 .java 文件转换为我自己的 L&F（例如 Nimbus Custom），这将是很好的，这可以导入到我的程序中。

如果它们实际上是 L&F 独立的，有人会向我提供一些关于我在哪里可以访问它们以及如何更改它们的信息。链接到实际绘制到组件上的字符串的完整列表也很棒。

# php - 在 joomla 2.5.7 中找到“受限访问”

> ID：12437498
> 
> 赞同：-2
> 
> 时间：2012-09-15T12:45:40.697
> 
> 标签：php, joomla

我是 php 和 joomla 的新手。我在 joomla 1.5 中有一个组件，我正在将其转换为最新版本，但不知道为什么会出现此错误“访问受限”？

```
 <?php
        // no direct access
     defined( '_VALID_MOS' ) or die( 'Restricted access' );

    require_once( $mainframe->getPath( 'toolbar_html' ) );

     $category=$_REQUEST['category'];

     switch ($category) {
    case 'flash':
        TOOLBAR_homepage::_FLASH();
        break;

    case 'contentbox':
        TOOLBAR_homepage::_CONTENTBOX();
        break;
    /*  
    case 'social':
        TOOLBAR_homepage::_SOCIAL();
        break;
    */
    case 'options':
        TOOLBAR_homepage::_OPTIONS();
        break;

    case 'metatags':
        TOOLBAR_homepage::_METATAGS();
        break;

    default:
        TOOLBAR_homepage::_DEFAULT();
        break;
}
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:04:00.653

*将_VAILD_MOS*更改为*_JEXEC*：

 *```
defined('_JEXEC') or die( 'Restricted access' ); 
```*

# python - 使用python将字符串时间戳转换为纪元时间的最快方法是什么？

> ID：12437500
> 
> 赞同：4
> 
> 时间：2012-09-15T12:45:59.760
> 
> 标签：python

我需要从像'2012-09-08 12:23:33'这样的字符串时间戳到基于纪元时间的秒之间进行大量对话。然后我需要获取两个时间戳之间的时间间隔。我尝试了两种不同的方法：

```
date1 = '2012-09-08'
time2 = '12:23:33'
timelist1 = map(int, date1.split('-') + time1.split(':'))

date2 = '2012-09-08'
time2 = '12:23:33'
timelist2 = map(int, date2.split('-') + time2.split(':'))
delta = datetime.datetime(*timelist2) - datetime.datetime(*timelist1)
print delta.seconds 
```

第二种方式是：

```
date1 = '2012-09-08'
time1 = '12:23:33'
d1 = datetime.datetime.strptime(date1 + ' ' + time1, "%Y-%m-%d %H:%M:%S")
seconds1 = time.mktime(d1.timetuple())
....
seconds2 = time.mktime(d2.timetuple())
print seconds2-deconds1 
```

但是这两种方式都不够快，因为我有近 1 亿个动作要做。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:50:23.457

最好使用[`datetime.datetime.strptime()`function](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)，然后减去两个结果：

```
import datetime

date1, time1 = '2012-09-08', '12:23:33'
date2, time2 = '2012-09-08', '12:23:33'

dt1 = datetime.datetime.strptime(date1 + ' ' + time1, "%Y-%m-%d %H:%M:%S")
dt2 = datetime.datetime.strptime(date2 + ' ' + time2, "%Y-%m-%d %H:%M:%S")

print (dt1 - dt2).total_seconds() 
```

请注意，`datetime.timedelta.seconds`仅以秒为单位提供*余数*，还有一个`.days`属性。改为使用[`.total_seconds()`](http://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)它会更方便，并且无需考虑`.days`价值。

使用该`datetime.datetime.strptime()`方法，加上`timedelta`方法，将大部分工作保留在 C 代码中，并且应该更快。

请注意，由于解析步骤，这两种方法都不是非常快。时间测试：

```
>>> import timeit
>>> def parse_datetime():
...     date1, time1 = '2012-09-08', '12:23:33'
...     date2, time2 = '2012-09-08', '12:23:33'
...     dt1 = datetime.datetime.strptime(date1 + ' ' + time1, "%Y-%m-%d %H:%M:%S")
...     dt2 = datetime.datetime.strptime(date2 + ' ' + time2, "%Y-%m-%d %H:%M:%S")
...     (dt1 - dt2).total_seconds()
... 
>>> def parse_time():
...     d1 = time.strptime(date1 + ' ' + time1, "%Y-%m-%d %H:%M:%S")
...     d2 = time.strptime(date2 + ' ' + time2, "%Y-%m-%d %H:%M:%S")
...     seconds1 = time.mktime(d1)
...     seconds2 = time.mktime(d2)
...     seconds1 - seconds2
... 
>>> timeit.timeit('test()', 'from __main__ import parse_datetime as test', number=10000)
0.6590030193328857
>>> timeit.timeit('test()', 'from __main__ import parse_time as test', number=10000)
0.7742340564727783 
```

第二种方法只使用`time.strptime()`函数（直接输出一个时间元组）。

我知道，没有更快的方法来解析日期时间字符串。

# objective-c - 继承 NSScrollView 的 DocumentView

> ID：12437501
> 
> 赞同：2
> 
> 时间：2012-09-15T12:46:05.347
> 
> 标签：objective-c, cocoa, nsscrollview, nsshadow

如何子类化 NSScrollView 的 DocumentView 以进行一些自定义绘图？我需要在滚动视图中使用 NSShadow 做一些工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:41:39.267

文档视图只是一个普通视图（, 的子类`NSView`），所以您所要做的就是以编程方式或在 Interface Builder 中创建一个视图，并将滚动视图的`documentView`属性设置为新视图。

例如，您可以用合适的`awakeFromNib`方法设置属性。

# c - 并行运行while循环

> ID：12437505
> 
> 赞同：1
> 
> 时间：2012-09-15T12:46:27.500
> 
> 标签：c, multithreading

我正在研究电机控制应用程序，基本上，当我按下按钮时，电机将运行，并且我还在运行时测量电机电流，这样如果有任何过载我可以停止电机。

问题是如果有任何过载我可以停止电机，但响应时间更长，程序对突然的冲击没有反应。

是否可以并行运行两个回路，所以当我打开按钮时，一个回路将测量任何过载的电流，另一个回路将用于控制电机，这两个回路应该同时工作，这样我就会得到预期的响应时间..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:14:07.947

正如 g-makulik 在评论中发布的那样，您可以使用线程。或者您可以回退到在单个循环中维护状态的旧解决方案。不确定您拥有的 TI 是否支持 fork() 或线程，但如果不支持，这样的东西就会成为强有力的竞争者。

```
int need_to_monitor_motor = 1;
int common_switch; // 如果是普通处理则为真

而 (need_to_monitor_motor)
{
    common_switch = 1; // 允许共同处理

    // 你可能需要做一些事情来避免占用处理器如果
    // 其他进程正在运行。即使是最小的纳米睡眠。
    // sched_yield()
    // 睡眠（）
    sleep_or_processor_release();   

    开关（电机状态）
    {
       案例 MOTOR_OFF：
        need_to_monitor_motor = do_motor_off_stuff();
        休息;

       案例 MOTOR_ON：
        need_to_monitor_motor = do_motor_on_stuff();
        休息;

       默认
        need_to_monitor_motor = Trouble__fix_it( &common_switch );
        休息;
    }

    如果（common_switch）
    {
        do_common_processing();
    }
}
```

（注意，没有编译这个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:25:18.213

因此，您正在为 TI 处理器编写嵌入式 C 程序。现在的问题是：您是否启用了操作系统/多线程功能？大多数便宜的 TI 板都没有这种支持，它们的嵌入式程序以无限循环 while(1) 结束。所有实际工作都在中断处理程序中完成。在您的情况下，您可能可以使用一两个计时器。在 main 函数的开头初始化它们，并在定时器中断处理程序中做所有必要的事情。

因此，为您的电路板找到带有计时器的 TI 代码示例，并向其中添加您自己的逻辑。

# javascript - 通过单击表单中的按钮，在代码生成中使用 javascript 生成字母数字代码

> ID：12437506
> 
> 赞同：0
> 
> 时间：2012-09-15T12:46:36.127
> 
> 标签：javascript, html, alphanumeric

您好我想知道是否可以通过单击 html 按钮将字母数字代码（由 javascript 生成）传递到 html 文本框？

所以我的意思是，我有一个文本框和一个按钮，如果我单击该按钮，它将从 java 脚本代码中获取生成的代码，并将显示在文本框中...

这是我的代码（如果可以编辑，请编辑整个代码...）：

```
<html>
  <head><title> Untitled Document </title></head>
  <body>
    <script type="text/javascript">
      function randomString(length, chars) {
        var mask = '';
        if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';
        if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        if (chars.indexOf('#') > -1) mask += '0123456789';
        var result = '';
        for (var i = length; i > 0; --i) {
          result += mask[Math.round(Math.random() * (mask.length - 1))];
        }
        return result;
      }
      document.write(randomString(16, 'aA#'));
    </script>
    <form>
      <label for="gencode"> Generated Code: </label>

      <!-- here is the problem I don't know what am I -->
      <input type="text" id="gencode" name="gencode">

      <!-- going to put on he onclick and on the value -->
      <input type="button" value="generate now">
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:42:30.250

我不得不承认，你试图用掩蔽做什么，我只是相信你的话。那不是我的专业领域。但是，我认为这可以解决您遇到的问题。

注意，IE8 和 7 支持`node.attachEvent`而不是`node.addEventListener`. 不过， IE9*确实*支持`node.addEventListener`。如果您需要对那些旧 IE 版本的支持，您需要进行一些检查：

```
if (addEventListener) {
    document.addEventListener('click', myClickHandler);
} else if (attachEvent) {
    document.attachEvent('onclick', myClickHandler);
} 
```

注意`click`和的`onclick`区别。

**HTML**

```
<h1>Generate Code</h1>
<form>
    <label for="length">Length: </label>
    <input type="text" id="length" name="length" value="10">
    <label for="characters">Characters: </label>
    <input type="text" id="chars" name="chars" value="akdie">
    <label for="gencode"> Generated Code: </label>
    <input type="text" id="gencode" name="gencode">
    <button type="button" id="generate">Generate Now</button>
</form>​ 
```

**Javascript**

```
function randomString() {
    var gencode = document.getElementById('gencode'),
        length = document.getElementById('length').value,
        chars = document.getElementById('chars').value,
        mask = '',
        result = '';

    console.log(length, chars);

    if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';
    if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    if (chars.indexOf('#') > -1) mask += '0123456789';

    for (var i = length; i > 0; --i) {
        result += mask[Math.round(Math.random() * (mask.length - 1))];
    }

    console.log(result);

    gencode.value = result;
}

window.addEventListener('load', function load(){
    document.getElementById('generate').addEventListener('click', randomString);
}); 
```

[​http://jsfiddle.net/userdude/ub26g/](http://jsfiddle.net/userdude/ub26g/)

# windows - Windows，VB6上的多客户端进程间通信

> ID：12437509
> 
> 赞同：1
> 
> 时间：2012-09-15T12:47:08.780
> 
> 标签：windows, vb6, ipc

多个客户端程序与单个服务器程序进行通信的最佳方式是什么，所有这些程序都在单个 Windows 计算机上运行？全部用VB6编写。我很感激你如何解决这个问题的建议。

注意：我们正在努力过渡到 .NET，但必须在 .NET 准备好之前向 V6B 版本添加一项功能。

可能性包括 TPC 连接、命名管道、共享内存、消息、文件等。

客户端向服务器传递一个字符串作为输入，服务器将其与只有服务器知道的数据结合起来，生成另一个字符串返回给客户端。两个字符串都只有大约 100 个字符长。仅在需要打开新文件时才联系服务器，因此通信量非常低……可能在 15 秒内一连串 10 次呼叫，然后是一个小时的空闲时间。

但是有可能两个客户会选择大约在同一时间请求信息。阻塞/锁定当然是可以接受的，因为服务器将在不到一秒的时间内完成每个请求，并且几秒钟的延迟对任何程序都不重要。

服务器的算法很复杂，由于对应用程序很重要的几个原因，不应在每个帮助程序中复制。这就是需要服务器的原因。

**背景：**
我正在为现有的大型遗留程序添加功能。这个单一程序有几个其他遗留程序，它们充当帮助程序，并在用户做出某些选择时运行。这些程序以 shell 命令启动，而不仅仅是单独的线程。例如，一位助手将新数据从 DVD 驱动器加载到硬盘驱动器上。另一个助手只是显示行星当前位置的图表。

这是一个大型商业遗留程序，恰好是用 VB6 编写的。我们正在努力将它和所有帮助程序转换为 .NET，但必须首先在 vb6 下发布具有此附加功能的新版本。（请不要告诉我不要使用 VB6，因为我们已经搬到别处了。）我们需要一个临时的 VB6 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T01:14:14.717

VB6 通过 Pro 和 Enterprise Edition 中包含的标准 Winsock Control 组件非常好地处理 TCP 和 UDP。不过，许多 shadetree 编码人员似乎确实在努力解决它。这可能是最明显的路线，因为 VB6 中唯一的其他本地 IPC 将是 COM/DCOM 和 DDE，但是 MSMQ 也为 VB6 提供了出色的支持。

基于 IP 的协议的缺点是它们有限的命名空间和导致冲突的高概率（64K 端口号，许多留给标准应用程序，临时端口范围等）。它们也有点“重量级”，但考虑到即使是仍在使用的最古老的 PC 的大量资源以及您的轻流量需求，您在决定时也可以忽略这一点。

您考虑的另一个选项是命名管道。

这在您的情况下提供了许多优势。一方面，命名空间要大得多，只需要一个唯一的名称，在 Win9x 之后的时代，它可以长达 256 个字符，这使得唯一性相当容易实现。另一方面，只要您的防火墙允许“文件和打印共享”，您就可以在这方面做好准备。

此外，对于您的应用程序，您似乎只需要 RPC 风格的机制，而不是任意的双向流或消息。 `TransactNamedPipe()`致电您的客户可能是理想的选择。命名管道在 LAN 上工作，但在一台 PC 中，它们非常快速且重量轻。

虽然 VB6 不附带命名管道组件，但只要不需要极高的性能，这样的东西就很容易创建。您可以在服务器中使用基于定时器的轮询，而不是尝试实现重叠 I/O 来获得异步性。几年前我把一个放在一起，用这种方法很幸运。

不久前，我在[PipeRPC-RPC Over Named Pipes](http://www.vbforums.com/showthread.php?649507-VB6-PipeRPC-RPC-Over-Named-Pipes)上发布了一个相当稳定的版本。那里有一个较旧和较新的版本，其中包含使用示例和文档。按照设计，客户端进行“调用”，传递请求参数的字节数组并接收响应结果的字节数组。您也可以在不做任何更改的情况下推送 Unicode 字符串，让编译器强制转换类型。

对于客户端和服务器，只需一个“插入式”UserControl。

回过头来看这个问题：

> 服务器的算法很复杂，由于对应用程序很重要的几个原因，不应在每个帮助程序中复制。这就是需要服务器的原因。

如果这真的是问题所在，为什么不创建一个所有程序都使用的共享 DLL？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:06:49.123

对于迁移到更新平台的现有 VB6 应用程序的一次性升级版本，我会强调保持修改尽可能简单和直接。因此，我不会走任何涉及共享内存或任何相对不寻常的事情的路线。

一些选项，没有一个非常简单，但至少有一些想法：

*   在执行转换的服务器代码中公开一个 COM 对象，并且可以由客户端应用程序使用。客户端将来自服务器的对象实例化为进程外对象，并让 COM 处理所有编组等。

*   服务器是否有任何网络意识？VB6 本身并不能很好地执行套接字/tcp，但如果您有理由添加它，您也许可以利用它来执行基于套接字的连接和数据交换。

*   服务器和客户端可以各自轮询一个公共资源文件夹，以查找构成您描述的翻译服务的入站/出站请求的特定文件的存在。不是很优雅，但它可能是最简单的。

只是一些想法，让你思考一些事情。希望这在某种程度上有所帮助。祝你好运！

# php - 为记录的字段值生成校验和或哈希

> ID：12437513
> 
> 赞同：2
> 
> 时间：2012-09-15T12:47:21.490
> 
> 标签：php, mysql, hash, checksum

我想要一个包含哈希或校验和的列作为单个值来比较记录。是否有可能在纯 SQL 中做这样的事情？您认为这与 PHP 中的编程解决方案相比更实用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:07:07.420

是的，这是可能的。 `MD5()`, `SHA1()`, 和`SHA2()`都是可行的散列函数。

您必须逐行计算这些函数的值，逐个查询。例如，每次插入一行时，都必须插入哈希值，执行如下操作：

```
INSERT INTO x
       name=?name,
       address=?address,
       hash=MD5(CONCAT(?name,?address)) 
```

您需要在每次更新时执行类似的操作。如果你弄错了，这非常容易，尤其是当你的表结构发生变化时，你的哈希变得比无用更糟糕。

顺便说一句，MD5 对身份验证不再具有加密安全性。但是，对于封闭系统中的这种散列，它仍然是一个可以接受的选择。

# jquery - firefox css错误/问题

> ID：12437515
> 
> 赞同：1
> 
> 时间：2012-09-15T12:47:37.030
> 
> 标签：jquery, html, css, firefox, select

在 Chrome 和 IE7-9 运行良好的同时，firefox 带来了另一个惊喜……

[http://jsfiddle.net/D3zXj/](http://jsfiddle.net/D3zXj/)

我想要做的是`Select`根据选定的颜色更改颜色`option`。由于某种神秘的原因，它在 Firefox 中不起作用。

任何想法为什么？

```
$('#selectstat_sch').change(function(){
    $(this).css('color',$('option:selected',this).css('color'));
}).trigger('change'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:16:24.520

详细说明未定义，我们可能想首先验证我们的 css 属性，

如果存在其他一些属性，这也应该有效。

[http://jsfiddle.net/D3zXj/2/](http://jsfiddle.net/D3zXj/2/)

```
 var style=$('option:selected',this).attr('style');
    var matches=style.match(/color:([^;]+)/);
    if (matches) $(this).css('color',matches[1]);
    //else alert('no match'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:11:00.053

使用 attr('style') 代替 css('color')：

```
$(document).ready(function(){
    $('#selectstat_sch').change(function(){
        $(this).attr('style',$('option:selected').attr('style'));
    });
}); 
```

但是这个副本并覆盖了整个样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T20:38:54.420

选择该选项后，它会获得与 HTML 中的颜色不同的计算颜色，因为有一个 UA 表单规则可以设置所选选项的样式。实际上，您可以看到：所选选项是蓝色背景的白色。

因此，您可能不想从选项中获取计算出的颜色，而只是获取`.style.color`，因为这就是您想要的，

# css - HTML - CSS 打开时无法在文本区域内移动光标

> ID：12437516
> 
> 赞同：2
> 
> 时间：2012-09-15T12:48:06.080
> 
> 标签：css, forms, html, textarea

我有一个超级简单的 HTML 表单：

```
<form name="editor" action="#" method="POST">
    <textarea name="contents" cols="100" rows="50"><?php echo $text; ?></textarea>
    <br>
    <input type="submit" name="submit" value="Submit" />
</form> 
```

其中回显的文本是 HTML 代码。

现在，当 CSS 关闭时，它可以完美运行。

但是当它打开时，我：

*   无法单击 textarea 文本内的任何位置以将光标放在那里
*   不能用箭头键移动光标，它只会左右移动几个字符，如果按下向上/向下箭头，它会将光标移动到文本区域的最顶部/最底部。

我尝试了什么：

*   从 CSS firebug 中排除 textarea 显示应用于它
*   尝试使用或不使用 JS 来检查是否有影响
*   尝试了不同的浏览器，同样的问题重复
*   完全关闭 CSS 然后它可以工作，但这不是一个选项

我唯一的想法是，也许 textarea 从某个地方继承了一些 CSS，但是什么样的 CSS 会导致这种行为，要寻找什么？

这是萤火虫看到的CSS：

```
textarea {
    overflow: auto;
    resize: vertical;
    vertical-align: top;
}
button, input, select, textarea {
    font-size: 100%;
    margin: 0;
}
html, button, input, select, textarea {
    color: #222222;
    font-family: sans-serif;
} 
```

感谢您的回复！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T13:14:31.813

感谢大家！你实际上通过设置这个小提琴帮助了我，我开始在那里粘贴部分 CSS，如果有人遇到同样的问题，这就是导致问题的原因：

```
body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

基本上禁用的文本选择显然是从正文继承的。

再次感谢大家。

PS。还要向任何怀疑我在 textarea 中的代码未转义的人澄清 - 是的，但这似乎不是问题，你显然可以这样做。

# animation - QML：图像元素的淡入/淡出动画

> ID：12437518
> 
> 赞同：5
> 
> 时间：2012-09-15T12:48:26.997
> 
> 标签：animation, qml

`Image`更改元素的来源时是否可以使用淡入/淡出动画？我需要两个图像元素吗？将其中一个的不透明度从 0 更改为 1，将另一个从 1 更改为 0 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T13:47:14.880

毫不费力地做到这一点。以这种方式运行动画：

```
Image {
    id: toBeCreated
    NumberAnimation on opacity {
        id: createAnimation
        from: 0
        to: 1
        duration: 2000
    }
    Component.onCompleted: createAnimation.start()
}

Image {
    id: toBeDeleted
    NumberAnimation on opacity {
        id: destroyAnimation // start this animation from the function where you want to create new Images
        to: 0
        duration: 2000
        onRunningChanged: {
             if (!running) {
                 console.log("Destroying...")
                 toBeDeleted.destroy();
             }
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-03T05:56:32.927

我知道它有点晚了，但想分享

受**RajaRaviVarma**的启发，我尝试了类似的东西

FadeInOut ImageView 的 Qml

```
import QtQuick 2.0

    Item {

        property string imageSource : ""
         property string imageSourceTemp : ""

        property real parentWidth: 0
        property real parentHeight: 0

        onImageSourceChanged:
        {

            destroyAnimation.start()
            createAnimation.start()

        }
        Image {
            id: toBeDeleted
            source: imageSourceTemp
            width: parentWidth
            height: parentHeight

            NumberAnimation on opacity {
                id: destroyAnimation
                to: 0.5
                duration: 400
                onRunningChanged: {
                     if (!running) {

                     }
                }
            }
        }

        Image {
            id: toBeCreated
            source: imageSource
            width: parentWidth
            height: parentHeight

            NumberAnimation on opacity {
                id: createAnimation
                from: 0
                to: 1
                duration: 800

                onRunningChanged: {
                     if (!running) {
                        imageSourceTemp = imageSource
                     }
                }
            }

        }

    } 
```

并使用它喜欢

```
 FadeinFadeOutImage {
        id: song_image
        imageSource: songImage
        parentWidth: width
        parentHeight: height
        width: 406*scaleFactor
        height: 406*scaleFactor   
    } 
```

# google-api - 用谷歌登录：致命错误

> ID：12437521
> 
> 赞同：0
> 
> 时间：2012-09-15T12:48:55.940
> 
> 标签：google-api, fatal-error

使用 Google 登录对我不起作用。这是登录我的应用程序的链接：http: [//hoobi.info/test/](http://hoobi.info/test/)

错误信息是：

> 致命错误：在 /home/content/73/7867073/html/test/includes/idiorm.php:186 中带有消息“无效数据源名称”的未捕获异常“PDOException”：186 堆栈跟踪：#0 /home/content/73/7867073 /html/test/includes/idiorm.php(186): PDO->__construct('password', NULL, NULL, Array) #1 /home/content/73/7867073/html/test/includes/idiorm.php( 173): ORM::_setup_db() #2 /home/content/73/7867073/html/test/index.php(30): ORM::for_table('glogin_users') #3 {main} 抛出 /home/第 186 行的 content/73/7867073/html/test/includes/idiorm.php

我在这里学习了本教程：http: [//tutorialzine.com/2012/08/build-a-one-click-registration-form-powered-by-google/](http://tutorialzine.com/2012/08/build-a-one-click-registration-form-powered-by-google/)

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:49:42.003

数据库中缺少“照片”列

# slider - 我想做一个自定义滑块

> ID：12437522
> 
> 赞同：0
> 
> 时间：2012-09-15T12:48:57.140
> 
> 标签：slider, visible, jcarousellite

我用[jcarousellite](http://archive.plugins.jquery.com/project/jCarouselLite)做了一个简单的滑块，但我需要做点别的：

我需要第一个可见图像很大我该怎么办？或者我如何选择滑块中的第一个可见图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:16:12.560

```
@option start : number - default is 0 @example $(".carousel").jCarouselLite({
     btnNext: ".next",
     btnPrev: ".prev",
     start: 2 }); @desc You can specify from which item the carousel should start. Remember, the first item in the carousel has a start of 0, and so on. 
```

# jquery - 向同位素容器中添加元素使图像重叠

> ID：12437524
> 
> 赞同：2
> 
> 时间：2012-09-15T12:49:05.060
> 
> 标签：jquery, jquery-plugins, jquery-masonry, jquery-isotope

我已经在我的图片库上实现了 jquery isotope。
在图库中，我有图像上传表单，在用户上传图像后，我返回 Json 对象，其中包含有关上传图像的数据。
基于该数据，我想将新图像添加到同位素容器。
我尝试了几种方法，但都失败了。
最后一个将图像添加到容器中，但新图像位于旧图像之下。
我一定错过了什么，但找不到什么。
![在此处输入图像描述](../Images/9349c104ff3a43b3966dc75d7a8797b8.png)

```
$("#ajaxUploadForm").ajaxForm({
...
success: function (result) {
                var $container = $('#container');
                var $newItems = $('<div class="imgItem"><a class="fancybox-button" rel="fancybox-button" href="' + @Url.Content("~/") + result.messageOriginal+ '"> <img src="'+ result.message +'" /> </div></a>');

                $container.prepend($newItems).isotope('reloadItems').isotope({ sortBy: 'original-order' });
... 
```

这就是我在用户打开页面时加载项目的方式

```
$(window).load(function () {
        var $container = $('#container');

        $container.isotope({
            itemSelector: '.imgItem',
            filter: '*',

            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false
            }
... 
```

这是每个项目的模板：

```
<div class="imgItem">
                <a class="fancybox-button" rel="fancybox-button" 
           href="@Url.Content("~/" + @i.Media.PathOriginal)" 
           >
                    <img src="@Url.Content("~/" + @i.Media.PathMedium)" alt="" />
                </a>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T16:23:52.763

我遇到了同样的问题。所以我用它的图像加载插件包装它如下

```
$('#container').imagesLoaded( function(){
        $('#container').isotope({
          // options
          sortBy : 'random',
          layoutMode: 'masonry',
          itemSelector : '.imgItem'
        });
    }); 
```

它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:51:29.147

尝试

```
var $newItems = $('<div class="imgItem" style="float:left;"><a class="fancybox-button".... 
```

# php - 在 cURL PHP 中远程发送帖子

> ID：12437527
> 
> 赞同：1
> 
> 时间：2012-09-15T12:49:57.537
> 
> 标签：php, post, curl

我试图在地址“smssheep.com”上远程发送短信，我设置了所有 POST FIELDS 和所有并发布，但它不会工作......

代码：

```
$settings=array();
$settings["name"]="form1"; //name of form
$settings["no"]="0038268000000"; //mobile number
$settings["msg"]="TEST TEST MESAGE"; //message to send
$settings["submit"]="saveForm";
$settings["x_form_secret"]="**********";
$settings["idstamp"]="***************";

$url="http://smssheep.com/sendsms.php";

$ch=curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $settings);
curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:00:17.150

**试试这个（我在一些`$settings`索引中盯着你的一些信息）：**

```
<?php

$settings = array();
$settings["name"] = "form1";
$settings["no"] = "*********";
$settings["msg"] = "TEST TEST MESAGE";
$settings["submit"] = "saveForm";
$settings["x_form_secret"] = "*********";
$settings["idstamp"] = "*********";

$settings = http_build_query($settings);

$url = "http://smssheep.com/sendsms.php";

$ch = curl_init($url);

curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $settings);

curl_exec($ch);
curl_close($ch);

?> 
```

并且请不要公开发布您的秘密信息！

# delphi - 在 Delphi 中，当父控件接收和失去焦点时，如何通知控件？

> ID：12437529
> 
> 赞同：6
> 
> 时间：2012-09-15T12:49:57.587
> 
> 标签：delphi, components, vcl

正如标题所说，我希望一个组件（比如 a ）在它的*父*级（比如 a ）接收和失去焦点`label`时得到通知。我在 Delphi 源代码中徘徊了一下，希望使用，但它仅用于通知子控件某些属性更改，例如字体和颜色。有什么建议么？*`panel``TControl.Notify`*

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T10:20:10.527

每当应用程序中的活动控件发生更改时，`CM_FOCUSCHANGED`都会向所有控件广播一条消息。只需拦截它，并采取相应的行动。

此外，我假设*当它的父级（例如，面板）接收和失去焦点*时，您的意思是每当该父/面板上的（嵌套）子控件接收或失去焦点时。

```
type
  TLabel = class(StdCtrls.TLabel)
  private
    function HasCommonParent(AControl: TWinControl): Boolean;
    procedure CMFocusChanged(var Message: TCMFocusChanged);
      message CM_FOCUSCHANGED;
  end;

procedure TLabel.CMFocusChanged(var Message: TCMFocusChanged);
const
  FontStyles: array[Boolean] of TFontStyles = ([], [fsBold]);
begin
  inherited;
  Font.Style := FontStyles[HasCommonParent(Message.Sender)];
end;

function TLabel.HasCommonParent(AControl: TWinControl): Boolean;
begin
  Result := False;
  while AControl <> nil do
  begin
    if AControl = Parent then
    begin
      Result := True;
      Break;
    end;
    AControl := AControl.Parent;
  end;
end; 
```

如果您不喜欢子类`TJvGradientHeader`化，那么可以使用以下方法进行通用设计`Screen.OnActiveControlChange`：

```
 TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FHeaders: TList;
    procedure ActiveControlChanged(Sender: TObject);
  end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FHeaders := TList.Create;
  FHeaders.Add(Label1);
  FHeaders.Add(Label2);
  Screen.OnActiveControlChange := ActiveControlChanged;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FHeaders.Free;
end;

function HasCommonParent(AControl: TWinControl; AMatch: TControl): Boolean;
begin
  Result := False;
  while AControl <> nil do
  begin
    if AControl = AMatch.Parent then
    begin
      Result := True;
      Break;
    end;
    AControl := AControl.Parent;
  end;
end;

procedure TForm1.ActiveControlChanged(Sender: TObject);
const
  FontStyles: array[Boolean] of TFontStyles = ([], [fsBold]);
var
  I: Integer;
begin
  for I := 0 to FHeaders.Count - 1 do
    TLabel(FHeaders[I]).Font.Style :=
      FontStyles[HasCommonParent(Screen.ActiveControl, TLabel(FHeaders[I]))];
end; 
```

请注意，我选择`TLabel`为`TControl`衍生品演示这项工作。*

# php - 使用 include_partial() 传入 symfony 1.4 部分的对象？

> ID：12437530
> 
> 赞同：4
> 
> 时间：2012-09-15T12:50:17.810
> 
> 标签：php, symfony1, symfony-1.4, partial

我想要一个对象在我的部分。我想在部分中使用对象变量和函数。是否可以在 include_partial() 函数中传递对象？或者我怎样才能部分访问对象？我不想在 symfony 请求中设置对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:05:08.957

这边走：

```
include_partial('moduleName/partialName', array(
  'object1' => $Object1, 
  'object2' => $Object2
)); 
```

然后在部分使用 $object1、$object2 等。

# android-ndk - 编译tesseract时出错

> ID：12437533
> 
> 赞同：1
> 
> 时间：2012-09-15T12:50:28.010
> 
> 标签：android-ndk, compiler-errors, android-2.2-froyo, tesseract, libjpeg

我正在使用 android-ndk r8b 编译[tesseract-android-tools-1.00](http://code.google.com/p/tesseract-android-tools/)（Tesseract-android-tools 包含用于编译 tesseract OCR、Leptonica 和[Jpeg](https://android.googlesource.com/platform/external/jpeg)库的 android 工具。）

自述文件说明说这三个库将放在项目文件夹下的“外部”文件夹下（这里是“tesseract-android-tools-1.00”文件夹）。那么文件夹结构将是：

tesseract-android-tools-1.00/external/libjpeg/

tesseract-android-tools-1.00/external/tesseract-3.00/

tesseract-android-tools-1.00/external/leptonlib-1.66/

*当我在项目文件夹（tesseract-android-tools-1.00 文件夹）下运行**ndk-build**时，出现以下错误。*

> G:\eclipse\ws\tesseract-android-tools-1.00>ndk-build
> 
> 安装：libjpeg.so => libs/armeabi/libjpeg.so 制作：***没有规则制作目标`/jni/com_googlecode_lepttonica_android/stdio/open_memstream.c', needed by`obj/local/armeabi/objs/lept/jni/com_googlecode_leptonica_android/stdio/open_memstream.o'。停止。

在此错误之前，我遇到过一些错误，例如“** *No rules to make target..* ”，“** *No target found..,needed by ..* ”。**我通过修改tesseract-android-tools-1.00/jni/Android.mk**文件的内容来修复错误，来自...

> …………
> 
> # TESSERACT_PATH :=
> 
> # LEPTONICA_PATH :=
> 
> #LIBJPEG_PATH := "
> 
> …………

到...

> …………
> 
> TESSERACT_PATH := 外部/tesseract-3.00
> 
> LEPTONICA_PATH := eclipse/ws/tesseract-android-tools-1.00/external/leptonlib-1.66
> 
> LIBJPEG_PATH := g:/eclipse/ws/tesseract-android-tools-1.00/external/libjpeg
> 
> ............

我必须这样做，因为我在 Windows7 上使用并且无法执行 README 文件中显示的 Linux 命令...

> 导出 TESSERACT_PATH=${PWD}/tesseract-3.00
> 
> 导出 LEPTONICA_PATH=${PWD}/leptonlib-1.66
> 
> 导出 LIBJPEG_PATH=${PWD}/libjpeg"

注意：我从github下载了libjpeg ...作为**android-2.2.3_r2.1-0的标签**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:08:20.607

下载部分中的 tesseract-android-tools-1.00 文件是旧的并且不起作用。

相反，您应该使用以下命令从存储库中克隆最新代码：

```
git clone https://code.google.com/p/tesseract-android-tools/ 
```

# javascript - 如何识别我网站中的慢速设备？

> ID：12437536
> 
> 赞同：6
> 
> 时间：2012-09-15T12:50:56.237
> 
> 标签：javascript, web, touch, responsive-design, user-experience

在为移动设备调整网页时，我总是依赖 css 媒体查询。

最近我不再只担心屏幕大小，还担心许多移动设备的 javascript 引擎。一些依赖于窗口滚动或快速 DOM 转换序列的常见 javascript 效果在慢速设备上效果不佳。

有什么方法可以猜测设备性能，以便我可以启用/禁用在慢速设备上看起来很糟糕的元素？

到目前为止，我只能想到不好的解决方案：

1.  屏幕尺寸。窄屏“可能”意味着慢速设备
2.  [用户代理信息](http://en.wikipedia.org/wiki/User_agent#User_agent_identification)。我可以查看设备、浏览器或 CPU，但这似乎不是一个稳定的长期解决方案，因为要考虑的设备数量

更新：修复了我的问题以专注于一个问题。在评论中有一个很好的解决触摸界面问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:52:23.413

似乎对于这个问题没有特别好的解决方案（这是有道理的，因为这种类型的东西通常应该是隐藏的东西类型）。我认为无论哪种方式，您最好从 UA 检测开始，以处理那些已知属于某一类别的平台。然后，您有 2 个选项可以灵活地适应未知/不确定的平台：

1.  **渐进式增强**：从精简测试开始，加载一个或多个小型性能测试以衡量设备性能，然后加载文件以进行适当的增强。测试例如已经提供或在：[如果计算机速度慢，请跳过一些代码](https://stackoverflow.com/questions/1055957/skip-some-code-if-the-computer-is-slow)

2.  **优雅降级**：将那些可能在较慢的设备上导致不利用户体验的候选功能包装在一个更高阶的函数中，如果它们在第一次执行时花费的时间过长，则替换它们。在这种情况下，我可能会将其添加到`Function.prototype`然后允许将可接受的延迟参数链接到函数定义。在第一次调用后存储经过的时间，然后在第二次调用时，如果经过的时间超过延迟，则使用回退换出函数。如果经过的时间可以接受，则通过交换标准函数来删除分析代码。我需要坐下来编写示例代码（也许这个周末）。这也可以通过其他参数进行调整，例如在交换之前进行多次分析。

第一个选项可能是更友好的选项，但第二个可能对现有代码的干扰较小。Cookie 或收集更多 UA 数据也有助于在检索到信息后继续进行分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:17:36.540

我能想到的唯一方法是在使用效果之前或同时在后台在 JS 中运行某种速度测试。这应该捕获由于处理器速度而速度较慢的设备，反之亦然，捕获时间准确/快速的设备。但是，如果设备具有优化意味着它们使用不同的处理器来计算图形效果，这将不起作用。

```
var speedtest = function(){
  /// record when we start
  var target = new Date().getTime(), count = 0, slow = 0;
  /// trigger a set interval to keep a constant eye on things
  var iid = setInterval(function(){
    /// get where we actually are in time
    var actual = new Date().getTime();
    /// calculate where we expect time to be
    target += 100;
    /// 100 value here would need to be tested to find the best sensitivity
    if ( (actual - target) > 100 ) {
      /// make sure we aren't firing on a one off slow down, wait until this
      /// has happened a few times in a row. 5 could be too much / too little.
      if ( (++slow) > 5 ) {
        /// finally if we are slow, stop the interval
        clearInterval(iid);
        /// and disable our fancy resource-hogging things
        turnOffFancyAnimations();
      }
    }
    else if ( slow > 0 ){
      /// decrease slow each time we pass a speedtest
      slow--;
    }
    /// update target to take into account browsers not being exactly accurate
    target = actual;
    /// use interval of 100, any lower than this might be unreliable
  },100);
} 
```

当然，运行它也会影响设备的速度，所以它并不是最好的解决方案。作为一项规则，我倾向于在屏幕很小的时候禁用动画和其他多余的东西。

这种方法的另一个缺点——我以前经历过——是一个实现多选项卡环境 setIntervals 的特定浏览器在不查看选项卡时会自动限制为特定速度。这意味着对于这个浏览器来说，tab键会自动降低他们的体验——除非这个强加的速度限制可以以某种方式被检测到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T14:13:14.870

您可以制作自己的迷你基准测试。做一些苛刻的计算并对结果计时。如果它比您认为最慢的受支持设备慢，那么您将降低到站点的密集度较低的版本。

如果用户遇到性能问题，您也可以创建一个易于访问的链接以切换到更基本的站点。

缩小屏幕尺寸不是一个好主意。许多现代手机都有小屏幕和快速处理器。

# javascript - 如何将歌曲添加到 jPlayer？

> ID：12437538
> 
> 赞同：0
> 
> 时间：2012-09-15T12:51:36.213
> 
> 标签：javascript, jquery, jplayer

当用户单击链接时，我想向 jPlayer 添加一首歌曲。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:53:07.997

添加到原型对象。

```
Playlist.prototype

addMedia: function(media) {
  this.playlist.push(media);
  this.displayPlaylist();
} 
```

然后像这样使用它：

```
myPlaylist.addMedia( {
  name:"Tempered Song",
  mp3:"http://www.jplayer.org/audio/mp3/Miaow-01-Tempered-song.mp3",
  oga:"http://www.jplayer.org/audio/ogg/Miaow-01-Tempered-song.ogg",
  poster: "http://www.jplayer.org/audio/poster/Miaow_132x132.jpg"
}); 
```

# html - HTML5 audiopayer 谁暂停了所有元素音频？

> ID：12437539
> 
> 赞同：0
> 
> 时间：2012-09-15T12:51:43.313
> 
> 标签：html, audio, html5-audio

请告诉我何时停止使用“media_audio_player”类的所有元素音频 `example:`

```
<audio src="./ConcertMedia/'.$i2['file'].'" class="media_audio_player"> </audio>
<audio src="./ConcertMedia/'.$i2['file'].'" class="media_audio_player"> </audio>
<audio src="./ConcertMedia/'.$i2['file'].'" class="media_audio_player"> </audio>
i want use code $('.media_audio_player').get(0).pause(); but he doesnt work...
Why not work code and what me need doing? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:18:43.543

请检查基于应用于音频标签的类播放声音的代码。

```
 <html>
    <head>

    <script src="http://code.jquery.com/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    function playerClicked() {
        audio=$(".audioplayer").get(1);

            debugger;
            audio.load()
            if(audio.paused){
                audio.play();
            } else {
                audio.pause();
            }

    }
    </script>

    </head>
    <body>

    <a id ="storyplayer" href="javascript:playerClicked();">
    Click here to play.
    </a>
    <audio class ="audioplayer">
        <source src="sound/siol.mp3" type="audio/mpeg" >
    </audio>
    <audio class ="audioplayer">
        <source src="sound/siol.mp3" type="audio/mpeg" >
    </audio>
    </body>
    </html> 
```

# asp.net-mvc - 不要从带有 EF 的 MVC Web API 获得结果，504 Fiddler - 接收失败

> ID：12437540
> 
> 赞同：1
> 
> 时间：2012-09-15T12:51:57.153
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

我正在使用 MVC Web API 通过 Entity Framework 5 从本地数据库中公开我的数据。我使用的数据库是 Microsoft AdventureWorks2012 数据库。

当我公开一个实体时，一切正常，我看到了 Fiddler 的 JSON 结果。但是当我添加多个具有关系的实体时，例如当我想要所有销售人员和属于销售人员的商店时（返回 context.SalesPerson.Include(“Store”)），我在 Fiddler 中收到下一条消息“ [Fiddler] ReadResponse() 失败：服务器没有为此请求返回响应。”，504 Fiddler - 接收失败。

如果我必须将实体转换为某种类型或在 EF 中设置功能，我现在不需要，有人有想法/解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:22:08.390

它看起来像模型中的循环引用问题。请尝试我的博客[http://blogs.msdn.com/b/hongyes/archive/2012/09/04/loop-reference-handling-in-serializer.aspx中的解决方案](http://blogs.msdn.com/b/hongyes/archive/2012/09/04/loop-reference-handling-in-serializer.aspx)

# objective-c - 从 NSString 中删除前缀

> ID：12437544
> 
> 赞同：33
> 
> 时间：2012-09-15T12:53:01.693
> 
> 标签：objective-c, string, macos, cocoa, nsstring

如何从 NSString 中删除前缀“test”？我已经尝试过`stringByReplacingOccurrencesOfString:`，但这不是我想要的，因为它是我不想从字符串的其他出现中删除的前缀。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-15T12:54:59.250

```
NSString *prefixToRemove = @"test";
NSString *newString = [originalString copy];
if ([originalString hasPrefix:prefixToRemove])
    newString = [originalString substringFromIndex:[prefixToRemove length]]; 
```

# asp.net-mvc-3 - 为backbone.js restful url put方法调用save时表单被发布

> ID：12437546
> 
> 赞同：0
> 
> 时间：2012-09-15T12:53:08.610
> 
> 标签：asp.net-mvc-3, backbone.js, restful-url

好吧，我在这里有一个backbone.js 模型

```
define ['jquery','underscore','backbone'] , ($,_,Backbone) ->
class Student extends Backbone.Model
    idAttribute : "UserKey"

    urlRoot : "Api/Student"

    defaults: 
        UserKey: null
        FirstName : ""
        LastName : ""
        Username : ""
        Password : ""
        Age : 18 

    initialize : ->
        #console.log "You have been initialized" 
```

让我们看看我这里有一个控制器：-

```
 public class HomeController : Controller
{        

    private Repository<Student, PortalContext> repo;
    public HomeController()
    {
        repo = new Repository<Student, PortalContext>(new PortalContext());
    }

    [HttpGet]
    public ActionResult All()
    {
        IList<Student> studs = repo.GetAll().ToList<Student>();
        return this.Json(new { Students=studs }, JsonRequestBehavior.AllowGet);
    }
    [HttpGet]
    public JsonResult Get(int id)
    {
        Student student  =  repo.FindBy(x => x.UserKey ==id).Select(x=>x).SingleOrDefault<Student>();
        return this.Json(student,JsonRequestBehavior.AllowGet);
    }

    [HttpPut, ActionName("Student")]
    public ActionResult Update(Student student)
    {
        repo.Edit(student);
        repo.Save();
        return Json(student);
    }
} 
```

这是我保存模型的 View.Coffee 文件：

```
define ['jquery'
    ,'underscore'
    ,'backbone'
    ,'text!/Templates/Student/View.htm'] , ($ , _ , Backbone , ViewTemplate) ->

class StdView extends Backbone.View

    _.templateSettings = { interpolate: /\{\{(.+?)\}\}/g };

    template : _.template(ViewTemplate)

    events : ->
        "click #back":"Back"
        "click #save" : "Save"

    Save : ->
        console.log "tryng to save"
        @model.save
            'FirstName' : @$el.find("#txtFirstName").val()
            'LastName' : @$el.find("#txtLastName").val()
            'Age': @$el.find("#txtAge").val()

        ,
            wait:true
            success: =>
                alert "Saved"
        @

    Back: (e)->
        window.history.back()
        false

    initialize : (options) ->       
        @render()

    render :->
        #console.log "this is details"
        @setElement @template @model.toJSON()
        @ 
```

它有时会保存模型，但有时会回传到服务器，即骨干网不保存数据，而是像这样将数据附加到浏览器 url

> [http://abc.com/?firstname=Joy&lastname=Roy&age=19#browse/1](http://abc.com/?firstname=Joy&lastname=Roy&age=19#browse/1)

并回帖。但有时它会保存数据并显示警报。我不确定为什么会发生这种情况有人可以说明为什么会这样吗？?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:12:53.087

在我们讨论之后，Nettuts 刚刚提供了一个很棒的 20 分钟视频教程，我相信它会比我更好地帮助你。看看，让我知道您是否还有其他问题。他正在使用 Laravel 作为他的服务器，但据我所知，您的问题不在于您的服务器，而在于您的客户端应用程序。这是[视频](http://net.tutsplus.com/tutorials/javascript-ajax/understanding-backbone-js-and-the-server/)。

# file - 在 ocaml 中截断文件

> ID：12437550
> 
> 赞同：3
> 
> 时间：2012-09-15T12:53:51.257
> 
> 标签：file, ocaml, truncate

如何在 ocaml 中将文件截断为 N 大小？

我没有在 Pervasive 中看到函数。最接近的是“open_trunc”标志，我不太确定它的作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:37:36.727

如果你在 Unix 下，你可以使用

```
val Unix.truncate : string -> int -> unit 
```

它“将命名文件运行到给定的大小”。但是这个功能在 OCaml 的 Windows 版本中没有实现（或者更准确地说，它没有被模拟）。

如果您在 Windows 下并想模拟它，您可能会对

```
val really_input : in_channel -> string -> int -> int -> unit 
```

“从通道`really_input ic buf pos len`读取字符，将它们存储在字符串中，从字符编号开始。如果在读取字符之前到达文件末尾，则引发。如果并且不指定有效的子字符串，则引发。”`len``ic``buf``pos``End_of_file``len``Invalid_argument "really_input"``pos``len``buf`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:36:53.140

我认为你是对的。 **open_trunc** - 打开指定文件进行写入，并在该文件上返回一个新的输出通道，位于文件的开头。如果文件已经存在，则将其截断为零长度。如果它不存在，则创建它。如果文件无法打开，则引发**Sys_error 。**

[也](http://www.ocaml-lang.org/tutorials/file_manipulation.html)参考这个链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T13:37:35.703

Pervasives 的操作系统功能大致对应于您在标准 C 中可以执行的操作。在标准 C 中没有将文件截断为指定长度的功能，您所能做的就是在打开文件时将文件截断为空（通过`Open_trunc`国旗）。在 Unix/POSIX ( ) 中有一个，所以在[module](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Unix.html)[`truncate`](http://pubs.opengroup.org/onlinepubs/009695399/functions/truncate.html)中寻找它，它确实有一个函数（或者对于一个打开的文件，再次在[Unix/POSIX](http://pubs.opengroup.org/onlinepubs/009695399/functions/ftruncate.html)之后）。[`Unix`](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Unix.html)[`truncate`](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Unix.html#VALtruncate)[`ftruncate`](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Unix.html#VALftruncate)

# c# - 一种对html文件进行排序的方法

> ID：12437552
> 
> 赞同：0
> 
> 时间：2012-09-15T12:53:59.667
> 
> 标签：c#, .net, string, converter

首先，我使用的 IDE 是带有 .net 框架的可视化 C#。

好的，所以我有大约 20,000 个 html 文档，其中包含我需要提取并按日期顺序排序的信息。

文件上的日期存储在此 html 标记中

```
<td valign="top" class="createdate">
        Tuesday, 03 April 2012 20:39    
</td> 
```

注意：每个 html 文件中的所有日期都采用该格式

我想提取日期然后想自动阅读每个 html 文档并测量短语或单词的出现。

我不是要求某人为我创建整个程序，但如果您能提供尽可能多的详细信息，说明我如何对这 20000 个 html 文件进行排序并提取单词或短语的出现日期和次数，然后将该信息导出到word格式或excel我将非常感激。

哦，我正在使用这些数据来研究我的论文，我知道如何对井字符串和所有字符串方法进行字符串操作，例如查找单词的出现等。

我遇到的问题是如何获取 html 数据或者只是内容，然后将它们排序为可用的格式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:59:50.747

您确定所有的 HTML 文档都具有这种精确的格式吗？在这种情况下，可以通过简单的字符串操作或通过 RegEx 提取包含日期的字符串（侧面，注意，一般来说，正则表达式不[适合](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)解析 HTML，但对于这种用例，保持简单听起来像是到这里）。如果您需要进行更重的解析，请考虑[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。

然后用于`DateTime.TryParse`获取从字符串转换为`DateTime`对象的日期。

# bash - SVN 后提交不起作用

> ID：12437561
> 
> 赞同：0
> 
> 时间：2012-09-15T12:55:48.570
> 
> 标签：bash, svn, tortoisesvn

我正在使用 Blue Host 并且正在设置我的 SVN，并且我已经能够非常好地设置和签出存储库，但是当我尝试设置提交后，我不断收到错误消息

```
post-commit hook failed (exit code 255) with no output. 
```

这是我正在使用的当前提交后挂钩

```
#!/bin/bash
/usr/bin/svn update /home1/firewal2/www/svntest 
```

任何帮助将不胜感激，如果需要，我可以提供更多信息。谢谢！

-布莱克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T07:37:00.557

# asp.net-mvc - 将@Html.RadioButtonFor 设置为默认选中

> ID：12437563
> 
> 赞同：5
> 
> 时间：2012-09-15T12:56:14.167
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, radiobuttonfor

我无法将默认单选按钮设置为“已检查”！我正在使用 @Html.RadioButtonFor ：

```
<div id="private-user">
    @Html.RadioButtonFor(m => m.UserType, "type1", new { @class="type-radio" , **@Checked="checked"** }) 1
</div>
<div id="proff-user">
    @Html.RadioButtonFor(m => m.UserType, "type2", new { @class="type-radio" }) 2
</div> 
```

是否可以使用 @Html.RadioButtonFor 将单选按钮设置为 cheched ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T15:36:49.983

在您的控制器操作中，`UserType`将视图模型上的属性值设置为相应的值：

```
public ActionResult SomeAction()
{
    MyViewModel model = ...

    // preselect the second radio button
    model.UserType = "type2";
    return View(model);
} 
```

在您看来：

```
<div id="private-user">
    @Html.RadioButtonFor(m => m.UserType, "type1", new { @class="type-radio" }) 1
</div>
<div id="proff-user">
    @Html.RadioButtonFor(m => m.UserType, "type2", new { @class="type-radio" }) 2
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:20:20.423

[在 ASP.NET MVC 2](https://stackoverflow.com/questions/2588699/radiobuttonfor-in-asp-net-mvc-2)或列表中查看 RadioButtonFor 有没有[人为 ASP.NET MVC 实现 RadioButtonListFor<T>？](https://stackoverflow.com/questions/2512809/has-anyone-implement-radiobuttonlistfort-for-asp-net-mvc/2590001#2590001)

如果您使用的是枚举，请参阅此答案[将枚举传递给 html.radiobuttonfor MVC3](https://stackoverflow.com/questions/5621013/pass-enum-to-html-radiobuttonfor-mvc3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:34:30.833

看看这篇文章，他们已经回答了你的问题（尽管是 MVC 2，但在这种情况下是一样的）：

[如何在 ASp.net MVC 2 中将 RadioButtonFor() 设置为默认选中](https://stackoverflow.com/questions/2598668/how-to-set-radiobuttonfor-in-asp-net-mvc-2-as-checked-by-default)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-15T14:55:30.577

在您的视图模型的构造函数中，只需将属性初始化为您想要的值。

```
public YourViewModel(){
    UserType = "type1";
} 
```

这样，您的回发将使用您想要的任何值，而您不必在控制器中设置该值。

# mysql - 触发器和控制台的不同结果（MYSQL 5.1.57）

> ID：12437565
> 
> 赞同：0
> 
> 时间：2012-09-15T12:56:43.040
> 
> 标签：mysql

如果 'foo' 在 column1 值中，我想将 'isSomething' 设置为 1，否则 'isSomething' 为 0

问题是：相同的查询从控制台和触发器给出不同的结果。并且控制台版本给出了很好的结果。

（子查询中的一切都是一样的，在触发器中我总是得到相同的 New.id！-测试用例）

```
-----TRIGGER (AFTER UPDATE)
...
DECLARE isSomething INT DEFAULT 0;

    select if('foo' IN (select column1 from ...where id=NEW.id),1,0)
    INTO isSomething;
...
LOG: isSomething:0

-----CONSOLE 
    select if('foo' IN (select column1 from ...where id=232),1,0)
into @isSomething;

select @isSomething;
...
CONSOLE: 1 (good result!!!) 
```

评论：我也尝试了以下查询

```
select count(*) into  isSomething from ... where id = NEW.id and column1='foo' 
```

它的行为类似于第一个查询。

**更新 1**

有趣的第二种类型的查询没有“and column1='foo'”

```
 select count(*) into  isSomething from ... where id = NEW.id 
```

给出正确的结果：3，好像 'foo' 不会出现在结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:13:30.113

**解决方案**

我不知道为什么，但是如果我使用表别名（这里：ft），那么查询就可以工作并且结果很好......

```
 select count(*)
    into  isSomething
    from footable ft WHERE ft.column1 = 'foo' AND ft.id = NEW.id ....; 
```

感谢大家的努力！

CS。

# jquery - 将一些值从 asp.net mvc 传递给 jquery

> ID：12437567
> 
> 赞同：0
> 
> 时间：2012-09-15T12:57:17.413
> 
> 标签：jquery, asp.net-mvc, tag-it

我使用 asp.net mvc、jquery 和[tag-it](https://github.com/aehlke/tag-it)，它是 jquery 插件。

我想将一些值从 asp.net mvc 传递给 jquery，然后传递给我的控制器，我该怎么做？

这是我的 javascript

```
<script type="text/javascript">
$(function () {
    var sampleTags = new Array();
    $.ajax({
        url: '/mp3/TagSuggestion',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        failure: function () { alert('Error contacting service!'); },
        success: function (data) {
            for (var j = 0; j < 5; j++) {
                sampleTags[j] = data[j];
            }
            $('#allowSpacesTags').tagit({
                availableTags: sampleTags,                
                allowSpaces: true
            });
        }
    });
}); 
```

这是我的控制器

```
 public JsonResult TagSuggestion(string id)

    {           

        IQueryable<string> tabs = mp3.TagSuggestion(id);

        return Json(tabs, JsonRequestBehavior.AllowGet);

    } 
```

这是我的模特

```
 public IQueryable<string> TagSuggestion(string term)

    {

        IQueryable<string> tabs = from s in db.tblTags.Where(c => c.Title.Contains(term)) select s.Title;

        return tabs;

    } 
```

这是我的 HTML

```
<form>

        <input type="text" name="tags" id="mySingleField />
        <input type="submit" value="Submit">
    </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:02:29.717

在函数中将类型从 POST 设置为 GET。要发送当前模型的 id，请在当前函数中定义 data 参数，如下所示：

```
$(function () {
    var sampleTags = new Array();
    $.ajax({
        url: '/mp3/TagSuggestion',
        type: 'GET',
        data: { id : $("#mySingleField").val() },
        contentType: 'application/json; charset=utf-8',
        failure: function () { alert('Error contacting service!'); },
        success: function (data) {
            for (var j = 0; j < 5; j++) {
                sampleTags[j] = data[j];
            }
            $('#allowSpacesTags').tagit({
                availableTags: sampleTags,                
                allowSpaces: true
            });
        }
    });
}); 
```

希望这会解决

# css - 2色边框-右

> ID：12437568
> 
> 赞同：0
> 
> 时间：2012-09-15T12:57:21.063
> 
> 标签：css, colors, border

我想在 li 元素导航中创建一个双色边框，没有 JavaScript，额外的 div 并且至少与 IE8 兼容。所以每个导航项都会有一个黑色和灰色的右边框。

![https://www.dropbox.com/s/ub9j2f8anmg38ly/stack.gif](../Images/1cb1f1790c5c182220ee52229767dfe0.png)

上图来自我的一个断点。目前我正在使用左边界和右边界。这并没有达到想要的结果，因为在浮动项目堆叠成行后我无法控制浮动项目+其他问题。

```
<nav>
    <ul>
        <li><a href="">NHL Home</a></li>
        <li><a href="">Seasons</a></li>
        <li><a href="">Teams</a></li>
        <li><a href="">Records</a></li>
        <li><a href="">Players</a></li>
        <li><a href="">Player origins</a></li>
        <li><a href="">Player age maps</a></li>
        <li><a href="">Analysis</a></li>
        <li><a href="">Contact</a></li>
    </ul>
</nav> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T13:04:35.073

首先，添加这个 CSS 规则：

```
nav ul li {
    box-sizing:border-box;
} 
```

它使浏览器在对象的总宽度内考虑边框和填充。然后你可以添加边框：

```
border-left:1px solid #CCC;
border-right:1px solid #000; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:06:29.020

```
<style type="text/css">
  ul li {
    border-right: 1px solid black;
    box-shadow: 1px 0px gray;
    /* For IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=1, Direction=90, Color='#000000')";
    /* For IE 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=1, Direction=90, Color='#000000');
  }
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T13:16:08.663

试试这个

[http://jsfiddle.net/umzA3/6/](http://jsfiddle.net/umzA3/6/)

```
li:after {
content:"";
position:absolute;
z-index:1;
border-right:1px solid black;
display:block;
top:0%;
right:0%;
height:100%;
} 
```

应该在ie8+中工作

# python - UnicodeDecodeError Python 错误

> ID：12437575
> 
> 赞同：0
> 
> 时间：2012-09-15T12:58:26.470
> 
> 标签：python, unicode

我正在尝试编写python google api。遇到一些 unicode 问题。到目前为止，我真正的基本 PoC 是：

```
#!/usr/bin/env python
import urllib2
from bs4 import BeautifulSoup        
query = "filetype%3Apdf"
url = "http://www.google.com/search?sclient=psy-ab&hl=en&site=&source=hp&q="+query+"&btnG=Search"
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
response = opener.open(url)
data = response.read()
data = data.decode('UTF-8', 'ignore')
data = data.encode('UTF-8', 'ignore')
soup = BeautifulSoup(data)
print u""+soup.prettify('UTF-8') 
```

我的回溯是：

```
Traceback (most recent call last):
  File "./google.py", line 22, in <module>
print u""+soup.prettify('UTF-8')
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 48786: ordinal not in range(128) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:01:01.543

您正在将`soup`树转换为`UTF-8`（编码的字节字符串），然后尝试将其连接到空的`u''` *unicode*字符串。

Python 将使用默认编码（即 ）自动尝试*解码*`ASCII`您的编码字节字符串，但无法解码`UTF-8`数据。

您需要显式解码`prettify()`输出：

```
print u"" + soup.prettify('UTF-8').decode('UTF-8') 
```

[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)更好地解释了这一点，包括默认编码。我真的，真的建议你也阅读 Joel Spolsky 的[关于 Unicode 的文章](http://www.joelonsoftware.com/articles/Unicode.html)。

# php - PHP 搜索功能 - 错误结果

> ID：12437576
> 
> 赞同：0
> 
> 时间：2012-09-15T12:58:30.093
> 
> 标签：php

我正在尝试在 php 中创建一个简单的搜索功能，用户在文本框中插入他的搜索查询：

```
<form action="inc/search.inc.php" method="post">
            <input id="searchbox" name="search" class="search" type="text"></input>
            </form> 
```

我的 search.inc.page 将用户重定向到带有查询的 URL：

```
<?php
if ($_SERVER["REQUEST_METHOD"] == "POST"
        && !empty($_POST["search"]))
{
        $searchquery=$_POST["search"];
        header("Location: ../search.php?qr=".$searchquery);
}
?> 
```

我的 search.php 调用函数retrieveSearch：

```
<?php 
include_once 'inc/functions.inc.php';
include_once 'inc/db.inc.php';

$db2 = new PDO(DB_INFO, DB_USER, DB_PASS);
$qr = (isset($_GET["qr"])) ? (string) $_GET["qr"] : NULL;

$e2 = retrieveSearch($db2, $qr);

$qresult = array_pop($e2);

echo $qresult;
 foreach ($e2 as $row)
 {
     echo $row["title"]."<br/>  ";
 }
?> 
```

检索搜索功能：

```
function retrieveSearch($db2, $qr=NULL)
{
    $sql2 = "SELECT id, title, resume, search
            FROM blog
            WHERE search LIKE ?";
    $stmt2 = $db2->prepare($sql2);
    $stmt2->execute(array($_GET["qr"]));
    $e2 = $stmt2->fetch();

    array_push($e2, $qr);
    return $e2;
} 
```

不幸的是，这给我返回了一些奇怪的结果，例如，如果我搜索“fff”（我的“搜索”条目之一），我会得到以下信息：

```
fff3
3
f
f
<
<
f
f 
```

'fff' 前面的 3 是 id - 我不知道它来自哪里，其他字符似乎是每列的第一个字母/符号......即使我特别说我只想要“标题”列显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:13:38.410

查看[PDOStatement::fetch的文档](http://www.php.net/manual/en/pdostatement.fetch.php)

会发生什么：您只获取第一行结果，然后遍历其列。'title' 字符串然后被转换为 int（计算为零），结果是每列的第一个字符。

# internet-explorer-9 - HTML5 视频无法在 IE9 上播放

> ID：12437578
> 
> 赞同：2
> 
> 时间：2012-09-15T12:58:45.747
> 
> 标签：internet-explorer-9, html5-video

我试图在 IE9 上使用 HTML5 视频，但无法播放。

当我在本地播放时一切正常，但是当我上传到服务器时不起作用。这是 URL： http: [//inoq.com/lxgo2/monumentos.html](http://inoq.com/lxgo2/monumentos.html) 它在所有其他浏览器（Chrome、Safari、Opera、Firefox..）中都可以正常工作，但不是 IE9。

我也已经添加了 mime 类型 .htaccess 文件：AddType video/ogg ogv AddType video/mp4 mp4 m4v AddType video/webm webm

此图显示 IE9 上的网络日志： [网络日志 IE9 http://inoq.com/lxgo2/network-log.jpg](http://inoq.com/lxgo2/network-log.jpg)

关于可能是什么问题的任何想法？

谢谢布鲁诺

# php - 使用 ActiveRecord Yii 框架增加 MySql 列

> ID：12437582
> 
> 赞同：0
> 
> 时间：2012-09-15T12:59:47.487
> 
> 标签：php, mysql, yii

我将在 yii 框架中将我的数据库表列之一增加一个单位。我想使用 activeRecords 和 updateByAll() 函数而不是加载模型并调用 save() 方法。我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:12:31.207

你能指定你想在什么时候增加列吗？

为什么不只是扩展 ActiveRecord 类并在需要增加的地方增加列，然后调用父实现。例如：

```
class ActiveRecord extends CActiveRecord {
    public updateAll($attributes, $condition='', $params=array()) {
        $this->incCol++;
        parent::updateAll($attributes, $condition, $params);
    }
} 
```

# ruby-on-rails - 在 Capybara 中选择混合模式内容

> ID：12437585
> 
> 赞同：1
> 
> 时间：2012-09-15T13:00:25.613
> 
> 标签：ruby-on-rails, ruby, xpath, capybara

我正在尝试使用 Capybara 提取混合模式内容。我[是用 Nokogiri 做的](https://stackoverflow.com/a/12416564/507018)，但想知道为什么 Capybara 不可能做到类似。

```
require 'nokogiri'

doc = Nokogiri::HTML("<h1><em>Name</em>A Johnson </h1>")
puts doc.at_xpath("//h1/text()").content 
```

它可以工作，但是当我在 Capybara 中尝试相同的 XPath 选择器时它不起作用。

```
visit('http://stackoverflow.com')
puts find(:xpath, "//h1/text()").text 
```

它引发错误：

```
[remote server] file:///tmp/webdriver-profile20120915-8089-kxrvho/extensions/fxdriver@googlecode.com/components/driver_component.js:6582:in `unknown': The given selector //h1/text() is either invalid or does not result in a WebElement. The following error occurred: (Selenium::WebDriver::Error::InvalidSelectorError)
[InvalidSelectorError] The result of the xpath expression "//h1/text()" is: [object Text]. It should be an element. 
```

如何提取此文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:45:50.973

Capybara 需要驱动程序，XPath 将由驱动程序执行。从您的错误消息中，很明显您正在使用 selenium-webdriver，它将在可用的情况下使用浏览器的本机 XPath 实现。对于 IE，它使用自己的。

您似乎正在使用 XPath 实现不完全兼容的组合。您可以尝试更换驱动程序或浏览器，但如果您真的想使用 Nokogiri 提取内容，您应该可以执行以下操作：

```
doc = Nokogiri::HTML(page.html)
puts doc.at_xpath("//h1/text()").content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:13:37.200

我不相信 Capybara 或 Selenium-Webdriver 支持直接访问文本节点。但是，如果你不想使用 nokogiri，你可以使用 selenium-webdriver 来执行 javascript。

您可以这样做（在 Capybara 中使用 Selenium-Webdriver）：

```
element = page.find('h1').native
puts page.driver.browser.execute_script("return arguments[0].childNodes[1].textContent", element)
#=> A Johnson 
```

# opengl - glOrtho 和 RenderToTexture

> ID：12437587
> 
> 赞同：0
> 
> 时间：2012-09-15T13:00:53.343
> 
> 标签：opengl, render-to-texture

我想将正交投影渲染到纹理中。

网格的渲染效果很好，但是当我添加 FrameBuffer 时，屏幕保持黑色。

创建 FBO：

```
def createFBO(self):
    self.fbo = glGenFramebuffersEXT(1)
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, self.fbo)
    self.depthbuffer = glGenRenderbuffersEXT(1)
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, self.depthbuffer)
    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height)
    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, self.depthbuffer)
    ''' create the texture and bind it to the framebuffer '''
    self.texture = glGenTextures(1)
    glBindTexture(GL_TEXTURE_2D, self.texture)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_NEAREST)
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_NEAREST)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, None);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,  GL_TEXTURE_2D, self.texture, 0); 
```

渲染对象：

```
def renderMesh(self):
    #glViewport(0, 0, width, height);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-64, 64, -64, 64, 1.0, 1000.0);

    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()
    gluLookAt(64,64,100,64,64,-1,0,-1,0)

    if True:
        glEnable(GL_CLIP_PLANE0)
        glEnable(GL_CLIP_PLANE1)
        glClipPlane(GL_CLIP_PLANE0, (0,0,1,-1 * self.start + self.diff))       
        glClipPlane(GL_CLIP_PLANE1, (0,0,-1,self.start)) 

    #glClearColor(0.5,0.5,0.75,1.0)
    # render the mesh
    #glTranslatef(-64,-64,-64)
    glEnableClientState(GL_VERTEX_ARRAY) # Enable something in OpenGL 
    glEnableClientState(GL_COLOR_ARRAY) # Enable something in OpenGL
    glBindBuffer(GL_ARRAY_BUFFER,self.vbo[1]) 
    glColorPointer(3,GL_FLOAT,0,None) # Tell OpenGL that it contains only ColorValues
    #Now the vertex Buffer with positions
    glBindBuffer(GL_ARRAY_BUFFER,self.vbo[0]) 
    glVertexPointer(3,GL_FLOAT,0,None) # Tell OpenGL that it contains the Positions for each Points
    glDrawArrays(GL_TRIANGLES,0,len(self.verts)+len(self.color))    # Merge both

    glDisableClientState(GL_COLOR_ARRAY); 
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisable(GL_CLIP_PLANE0)
    glDisable(GL_CLIP_PLANE1) 
```

渲染纹理：

```
 def renderPlaneWithTexture(self):
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()
        gluPerspective(45.0,1.0*width/height,1.0,1000.0)
        glMatrixMode(GL_MODELVIEW)
        gluLookAt(0,0,1,0,0,0,0,1,0)
        glClearColor(0,0,0,0)        
        glEnable(GL_TEXTURE_2D)
        glBegin(GL_QUADS)        
        glNormal3f(0.0, 1.0, 0.0)
        glTexCoord2f(0.0, 0.0)
        glVertex3f(-1, 1, -1)
        glTexCoord2f(1.0, 0.0)
        glVertex3f(1, 1, -1)
        glTexCoord2f(1.0, 1.0)
        glVertex3f(1, -1, -1)
        glTexCoord2f(0.0, 1.0)
        glVertex3f(-1, -1, -1)    
        glEnd();
        glDisable(GL_TEXTURE_2D) 
```

主游戏循环：

```
glClearColor(0.0,0.0,0.0,1.0)
if self.useFBO:        
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, self.fbo);   
    self.renderMesh()
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); 
    self.renderPlaneWithTexture()
else:
    self.renderMesh()
pygame.display.flip() 
```

哪里出了问题？为什么我的渲染窗口在使用渲染到纹理时仍然是黑色的？没有渲染到纹理一切正常......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:56:24.380

在渲染到 FBO 之前，您必须取消绑定作为 FBO 的颜色附件附加的纹理。理想情况下，在绑定 FBO 之前解除绑定。解除绑定是通过绑定纹理 ID 0 来完成的

# iphone - 如何将键浮点值从 NSDictionary 添加到 NSarray？

> ID：12437590
> 
> 赞同：2
> 
> 时间：2012-09-15T13:01:00.263
> 
> 标签：iphone, ios, json

我的脑袋炸了！我想不出来。我是 iPhone 编程新手

我正在做 json 解析 ....in 将数据从 json 存储到 nsdictionary 但是.......我想将字典中的所有 nsdictionary 浮点值添加到数组中。这就是我现在正在做的事情。如下代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
  [connection release];

   NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
   self.responseData = nil;

   dict = [responseString JSONValue];

            NSMutableArray *array = [NSMutableArray array];
           for (NSString *key in [dict allKeys])
          {

               array = [dict objectForKey:key];
           // array return float values but
        [array addObject:array ];  // geting carsh dude to array return float values like 120.01  

} 
```

请指导我，我没有得到我做错的部分。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:53:13.523

您的应用程序崩溃了，因为您正在向 中添加数据`NSArray`，这是静态数组，您无法在运行时添加值，因此只需`NSMutableArray`将数据添加到`NSMutableArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:13:12.250

您的代码在几个方面被破坏了。

此行将数组指针分配给字典中的对象：

```
array = [dict objectForKey:key]; 
```

然后您尝试将数组添加到自身，这没有意义。但更糟糕的是，由于`array`不再指向您，`NSMutableArray`您甚至无法调用该方法。

```
[array addObject:array ]; 
```

你可能想做这样的事情：

```
for (NSString *key in [dict allKeys])
{  
     id value = [dict objectForKey:key];              
     [array addObject:value];     
} 
```

# mysql - MySQL Nullable FK 和 150 错误

> ID：12437592
> 
> 赞同：0
> 
> 时间：2012-09-15T13:01:19.187
> 
> 标签：mysql

`create table`我在 MySQL 中的语句有问题。

场景是，我想要一个`P_CDP`存储一些信息的表，`P_CDPFiles`以及存储上传文件数据的表。

除非用户选择某个文件，否则默认情况下该列`SelectedCDPFileID`应该是。`NULL`然后该列由文件 ID 填充。但是，我仍然得到 errno 150，为什么？我认为 FK 名称设置正确

```
CREATE TABLE `P_CDP` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `P_OrderID` int(11) NOT NULL DEFAULT '0',
  `SelectedCDPFileID` int(11) NULL,
  PRIMARY KEY (`ID`),
  KEY `FK_P_CDP_P_Orders` (`P_OrderID`),
  KEY `FK_P_CDP_P_CDPFiles` (`SelectedCDPFileID`),
  CONSTRAINT `FK_P_CDP_P_Orders` FOREIGN KEY (`P_OrderID`) REFERENCES `P_Orders` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_P_CDP_P_CDPFiles` FOREIGN KEY (`SelectedCDPFileID`) REFERENCES `P_CDPFiles` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `P_CDPFiles` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `FileID` int(11) NOT NULL DEFAULT '0',
  `P_CDPID` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `FK_P_CDPFiles_File` (`FileID`),
  KEY `FK_P_CDPFiles_P_CDP` (`P_CDPID`),
  CONSTRAINT `FK_P_CDPFiles_File` FOREIGN KEY (`FileID`) REFERENCES `File` (`FileID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_P_CDPFiles_P_CDP` FOREIGN KEY (`P_CDPID`) REFERENCES `P_CDP` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:18:23.633

您正在尝试引用一个尚不存在的表。

如果您*必须*在这两个表之间有两个方向的引用（这通常表明设计很差），您将必须：

1.  创建第一个表而不引用尚未定义的表：

    ```
    CREATE TABLE `P_CDP` (
      `ID` int(11) NOT NULL AUTO_INCREMENT,
      `P_OrderID` int(11) NOT NULL DEFAULT '0',
      `SelectedCDPFileID` int(11) NULL,
      PRIMARY KEY (`ID`),
      KEY `FK_P_CDP_P_Orders` (`P_OrderID`),
      KEY `FK_P_CDP_P_CDPFiles` (`SelectedCDPFileID`),
      CONSTRAINT `FK_P_CDP_P_Orders` FOREIGN KEY (`P_OrderID`)
        REFERENCES `P_Orders` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
    ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
    ```

2.  创建第二个表，包括它对第一个表的引用：

    ```
    CREATE TABLE `P_CDPFiles` (
      `ID` int(11) NOT NULL AUTO_INCREMENT,
      `FileID` int(11) NOT NULL DEFAULT '0',
      `P_CDPID` int(11) NOT NULL DEFAULT '0',
      PRIMARY KEY (`ID`),
      KEY `FK_P_CDPFiles_File` (`FileID`),
      KEY `FK_P_CDPFiles_P_CDP` (`P_CDPID`),
      CONSTRAINT `FK_P_CDPFiles_File` FOREIGN KEY (`FileID`)
        REFERENCES `File` (`FileID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
      CONSTRAINT `FK_P_CDPFiles_P_CDP` FOREIGN KEY (`P_CDPID`)
        REFERENCES `P_CDP` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
    ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
    ```

3.  更改第一个表以添加预期的约束：

    ```
    ALTER TABLE `P_CDP`
      ADD CONSTRAINT `FK_P_CDP_P_CDPFiles` FOREIGN KEY (`SelectedCDPFileID`)
      REFERENCES `P_CDPFiles` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
    ```

# serial-port - 如何在 C 程序中通过串行终端读取二进制数据？

> ID：12437593
> 
> 赞同：14
> 
> 时间：2012-09-15T13:01:45.417
> 
> 标签：serial-port, embedded-linux, binary-data, termios

我阅读了关注的链接和其他来源，但没有找到我的问题的答案。

[串行终端上的二进制数据](https://stackoverflow.com/questions/506805/binary-data-over-serial-terminal)

[数据在通过串行端口传输期间损坏](https://stackoverflow.com/questions/7092955/data-gets-corrupted-during-transmission-over-the-serial-port)

我通过串行端口与我的嵌入式设备通信。默认情况下，嵌入式 Linux 使用此端口作为终端。但我也想通过端口传输二进制数据（服务包）。我的 /etc/inittab 文件有一个“getty”调用： **console::respawn:/sbin/getty 115200 ttyS0**

我还有带有字符串的 /etc/passwd 文件，其中“admin”用户在登录后启动我的“cli”应用程序： **admin:8Mt/Jtxcyg8AY:1000:0:admin:/tmp:/tmp/cli**

我在运行程序之前的默认 ttyS0 设置是：

```
~ # stty -a
speed 115200 baud;stty: standard input
 line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = ^J;
eol2 = <undef>; swtch = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R;
werase = ^W; lnext = ^V; flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 hupcl -cstopb cread -clocal -crtscts
-ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon ixoff
-iuclc -ixany -imaxbel -iutf8
opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
isig icanon -iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt
-echoctl echoke
~ # 
```

因此，在我的 cli 程序中，我执行以下操作：

```
main ()
{
    ...
    system("stty erase ^H);
    system("stty -F /dev/ttyS0 -icrnl -ixon -ixoff -opost -isig -icanon -echo");    // enter in non-canonical (raw) mode

    // What function do I need to use here to retrieve binary data (also symbols that > 0x7F) from /dev/ttyS0?

    system("stty -F /dev/ttyS0 icrnl ixon ixoff opost isig icanon echo");   // go back to canonical mode

    ...

    exit(0);
} 
```

我尝试使用 read() 函数（使用 unsigned char 缓冲区）来获取二进制数据，但未能接收到正确的数据。我还初步再次打开 /dev/ttyS0 以获取 file_descriptor 并使用 read() func。

我的程序发送 3 个字节：0xAA、0x02、0xFE。但在 syslog 中，我总是看到设备收到不正确的符号：0x98、0xE6、0x18。

有什么事？如何获得正确的二进制数据？

***我目前正在测试的整个代码。***

```
#include "cli.h"
#include "glb_vars.h"

/******************************************
 *** Definitions
 ******************************************/
#define APPLICATION_NAME    "cli"
#define SERIALPORT_IS_CONSOLE

/******************************************
 *** Constants
 ******************************************/
const char dev_name[] = DEV_NAME;
const char lineminstr[] = "\t--------------------------------------------------------\n";

/******************************************
 *** Internal Function Declarations
 ******************************************/
CLI_RETVAL cliInit(void);
CLI_RETVAL cliClose(void);
void cliWorkLoop(Term_callback_t **term);

/******************************************
 *** External Function Declarations
 ******************************************/
extern void Vectors_init(Term_callback_t **vec);
extern char** Menu_completion(const char * text, int start, int end);

/****************************************************************************/
int file_descr, max_fd;
struct termios tty, orig_tty;
fd_set work_set;

/****************************************************************************/
/*!
 *  \brief  Init cli
 *
 *  \return  success or failure
 *  \retval  CLI_SUCCESS, CLI_FAILURE
 *
 *  \ingroup CLI
 */
/****************************************************************************/
CLI_RETVAL cliInit(void)
{
    long spd;

    signal(SIGINT, SIG_IGN);
    signal(SIGHUP, SIG_IGN);
    signal(SIGTERM, SIG_IGN);
    signal(SIGABRT, SIG_IGN);
    signal(SIGQUIT, SIG_IGN);
    signal(SIGILL, SIG_IGN);

//  system("stty -F /dev/ttyS0 -icrnl -ixon -ixoff -opost -isig -icanon -echo");    // enter in non-canonical mode
//  system("stty -a");
//  sleep(1);

#ifdef SERIALPORT_IS_CONSOLE
    file_descr = STDIN_FILENO;
    SYS_LOG_DEBUG("SERIALPORT IS CONSOLE");
#else
    SYS_LOG_DEBUG("SERIALPORT IS NOT CONSOLE");
    file_descr = open("/dev/ttyS0", O_RDWR | O_ASYNC | O_NDELAY);
    if (file_descr == -1) {
        // Could not open the port
        perror("unable to open /dev/ttyS0");
        exit(1);
    }
#endif

    if(tcgetattr(file_descr, &tty) < 0)
    {
        perror("unable to get tty attributes");
        exit(1);
    }
    // backup tty, make it raw and apply changes
    orig_tty = tty;

    spd = B115200;
    cfsetospeed(&tty, (speed_t)spd);
    cfsetispeed(&tty, (speed_t)spd);

    cfmakeraw(&tty);

    tty.c_cc[VMIN] = 1;
    tty.c_cc[VTIME] = 10;

    tty.c_cflag &= ~CSTOPB;
    tty.c_cflag &= ~CRTSCTS;    /* no HW flow control? */
    tty.c_cflag |= CLOCAL | CREAD;
    tcsetattr(file_descr, TCSANOW, &tty);

//  // update local mode flags
//  tty.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG);
////    // renew control mode flags
////    tty.c_cflag &= ~(CBAUD | CSIZE | CSTOPB | PARENB | PARODD);
////    tty.c_cflag |= (BAUD | DATABITS | STOPBITS | PARITYON | PARITY);
//  // select 'raw' output mode
//  tty.c_oflag &= ~OPOST;
//  // disable mapping for input mode
//  tty.c_iflag &= ~(INLCR | ICRNL);
//
//
//  if(tcsetattr(file_descr, TCSAFLUSH, &tty) < 0)
//  {
//      perror("unable to set tty attributes");
//      exit(1);
//  }
//
    // Setup fd_set
    FD_ZERO(&work_set);
    FD_SET(file_descr, &work_set);
    max_fd = file_descr + 1;

    /* Readline lib init */
    // Define application name for readline library
    rl_readline_name = APPLICATION_NAME;
    // Update Pointer to alternative function to create matches.
    rl_attempted_completion_function = Menu_completion;
    // Start readline with reading /etc/inputrc file
    using_history();
    stifle_history(CLI_MAX_HISTORY_SIZE);

    // Some other initialization code
    // ...
    // ...

    return CLI_SUCCESS;
}

/****************************************************************************/
/*!
 *  \brief  Close cli
 *
 *  \return  success or failure
 *  \retval  CLI_SUCCESS, CLI_FAILURE
 *
 *  \ingroup CLI
 */
/****************************************************************************/
CLI_RETVAL cliClose(void)
{

//  system("stty -F /dev/ttyS0 icrnl ixon ixoff opost isig icanon echo");   // enter in canonical mode

    tcsetattr(file_descr, TCSANOW, &orig_tty);
//  if(tcsetattr(file_descr, TCSAFLUSH, &orig_tty) < 0)
//  {
//      perror("unable to set orig_tty attributes");
//      exit(1);
//  }
    close(file_descr);

    return CLI_SUCCESS;
}

/****************************************************************************/
/*!
 *  \brief  Main cli processing loop
 *
 *  \no return
 *
 *  \ingroup CLI
 */
/****************************************************************************/
void cliWorkLoop(Term_callback_t **term)
{
    Term_callback_t *cur_term;
    int8 *commandString;
    uint8 ret = CLI_REFRESH, no_prompt;

    char prompt_str[20];

    while (1) {

        cur_term = *term;
        global_cmd_compl_pointer = cur_term->cmd_list;

        commandString = NULL;
        sprintf(prompt_str, "%s:~> ", dev_name);

        if(ret == CLI_REFRESH) {
            CLEAR_SCR();
            if(cur_term->out != NULL) {
                cur_term->out(term, commandString, &ret);
                no_prompt = ret;
            }
            CURSOR_DOWN();
        }

        int n;
        struct timeval timeout;
        uint8 tmpBuf[32];

        while (1)
        {
            // Setup Timeout
            timeout.tv_sec = 60;
            timeout.tv_usec = 0;
            // Wait for new connections
            n = select(max_fd, &work_set, NULL, NULL, &timeout);
            if (n < 0)
            {
                perror("select #2 failed");
                break;
            }
            if (n > 0)
            {
                /* РЈ РЅР°СЃ РµСЃС‚СЊ РІРІРѕРґ */
                if (FD_ISSET(file_descr, &work_set))
                {
                    if (read(file_descr, tmpBuf, 10) < 0) {
                        perror("cannot read");
                        exit(1);
                    }
                    else
                    {
                        SYS_LOG_DEBUG("READ first 4 chars: 0x%X,0x%X,0x%X,0x%X", tmpBuf[0], tmpBuf[1], tmpBuf[2], tmpBuf[3]);
                    }
                }
                break;
            }
        }
//
//
//      n = read(file_descr, tmpBuf, 5);
//      if (n > 0) {
//          unsigned char   *p = tmpBuf;
//
//          while (n-- > 0)
//              printf(" 0x%x", *p++);
//          printf("\r\n");
//      } else {
//          printf("failed to read: %d\r\n", n);
//      }
//
//
        exit(0);
    }

    CLEAR_SCR();
    return;
}

/****************************************************************************/
/*!
 *  \brief Main cli function
 *
 *  \param[in]      argc - argument number.
 *  \param[in,out]  argv - argument values entered by user.
 *
 *  \return  success or failure
 *  \retval  EXIT_SUCCESS, EXIT_FAILURE
 *
 *
 *  \ingroup CLI
 */
/****************************************************************************/
int main(int argc, char *argv[])
{
    Term_callback_t *term;
    char logname[16];
    FILE *fp;

    /* Set mask for file operation */
    umask(0);

    system("stty erase ^H");
    openlog("cli", LOG_CONS, LOG_USER);

    /* Write cli start log */
    syslog(LOG_NOTICE, "Console startup. Software version: %s", VERSION);
    /* Find login name */
    strcpy(logname, "noname");
    if ((fp = popen( "whoami", "r" )) == NULL)
    {
        SYS_LOG_ERR("Can't open process for \"whoami\" command.");
    } else
    {
        fgets(logname, 16, fp);
        pclose(fp);
    }
    SYS_LOG_INFO("Console is entered by \"%s\".", logname); //getenv("USER")

    /* Console initialization */
    if (cliInit() != CLI_SUCCESS) {
        SYS_LOG_CRIT("CLI init failed");
        return EXIT_FAILURE;
    }

    Vectors_init(&term);

    /* Console work loop */
    cliWorkLoop(&term);
    cliClose();

    /* Exiting from cli */
    SYS_LOG_INFO("\"%s\" exited from console.", logname);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T10:15:43.530

```
system("stty erase ^H);
system("stty -F /dev/ttyS0 -icrnl -ixon -ixoff -opost -isig -icanon -echo");    // enter into non-canonical (raw) mode 
```

这将是不足以将串行端口置于原始或非规范模式的代码（以及根据 POSIX 约定的不良编码实践）。
C 和 Linux 中最简单的方法是使用`cfmakeraw()`GNU libc 和 uClibc 库中都提供的函数。使用*手册页*可获取有关由 修改的*termios*结构成员的详细信息`cfmakeraw()`。
请注意，这`cfmakeraw()`会将串行端口设置为原始模式，数据长度为 8 位且*无*奇偶校验，总字符帧为 10 位（假设有一个停止位）。

首选方法是保留*termios*结构的副本（用于在程序退出时恢复）并仅修改所需的标志位（而不是编写完整的结构成员）。

# 修订

适用于我的 ARM SoC 的代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/un.h>
#include <unistd.h>
#include <errno.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/ioctl.h>
#include <sys/stat.h>
#include <sys/syslog.h>
#include <termios.h>

#define SERIALPORT_IS_CONSOLE

main()
{
    struct termios  tty;
    struct termios  savetty;
    speed_t     spd;
    unsigned int    sfd;
    unsigned char   buf[80];
    int     reqlen = 79;
    int     rc;
    int     rdlen;
    int     pau = 0;

#ifdef SERIALPORT_IS_CONSOLE
    sfd = STDIN_FILENO;
#else
    sfd = open("/dev/ttyS1", O_RDWR | O_NOCTTY);
#endif
    if (sfd < 0) {
        syslog(LOG_DEBUG, "failed to open: %d, %s", sfd, strerror(errno));
        exit (-1);
    }
    syslog(LOG_DEBUG, "opened sfd=%d for reading", sfd);

    rc = tcgetattr(sfd, &tty);
    if (rc < 0) {
        syslog(LOG_DEBUG, "failed to get attr: %d, %s", rc, strerror(errno));
        exit (-2);
    }
    savetty = tty;    /* preserve original settings for restoration */

    spd = B115200;
    cfsetospeed(&tty, (speed_t)spd);
    cfsetispeed(&tty, (speed_t)spd);

    cfmakeraw(&tty);

    tty.c_cc[VMIN] = 1;
    tty.c_cc[VTIME] = 10;

    tty.c_cflag &= ~CSTOPB;
    tty.c_cflag &= ~CRTSCTS;    /* no HW flow control? */
    tty.c_cflag |= CLOCAL | CREAD;
    rc = tcsetattr(sfd, TCSANOW, &tty);
    if (rc < 0) {
        syslog(LOG_DEBUG, "failed to set attr: %d, %s", rc, strerror(errno));
        exit (-3);
    }

    do {
        unsigned char   *p = buf;

        rdlen = read(sfd, buf, reqlen);
        if (rdlen > 0) {
            if (*p == '\r')
                pau = 1;
            syslog(LOG_DEBUG, "read: %d, 0x%x 0x%x 0x%x", \
                     rdlen, *p, *(p + 1), *(p + 2));
        } else {
            syslog(LOG_DEBUG, "failed to read: %d, %s", rdlen, strerror(errno));
        }
    } while (!pau);

    tcsetattr(sfd, TCSANOW, &savetty);
    close(sfd);
    exit (0);
} 
```

编译后的程序在目标板上加载并执行。

从串行通信链路的主机端，`seq.bin`发送具有以下内容的文件：

```
$ od -t x1 seq.bin
0000000 aa 02 fe
0000003 
```

然后在主机（正在运行`minicom`终端仿真程序）上键入“ABC”，然后是回车。程序在目标上终止，然后检查系统日志：

```
# tail /var/log/messages                                                        
Sep xx xx:xx:42 atmel_soc user.info kernel: EXT3 FS on nvsram, internal journal 
Sep xx xx:xx:42 atmel_soc user.info kernel: EXT3-fs: mounted filesystem with or.
Sep xx xx:xx:42 atmel_soc user.info kernel: kjournald starting.  Commit intervas
Sep xx xx:xx:18 atmel_soc auth.info login[431]: root login on 'ttyS0'           
Sep xx xx:xx:04 atmel_soc user.debug syslog: opened sfd=0 for reading           
Sep xx xx:xx:14 atmel_soc user.debug syslog: read: 3, 0xaa 0x2 0xfe             
Sep xx xx:xx:50 atmel_soc user.debug syslog: read: 1, 0x41 0x2 0xfe              
Sep xx xx:xx:51 atmel_soc user.debug syslog: read: 1, 0x42 0x2 0xfe              
Sep xx xx:xx:51 atmel_soc user.debug syslog: read: 1, 0x43 0x2 0xfe              
Sep xx xx:xx:52 atmel_soc user.debug syslog: read: 1, 0xd 0x2 0xfe              
# 
```

二进制数据已完整接收。

请注意，由于这是原始模式并且键入的字符输入相对较慢，因此`read()`返回“部分”数据和用户程序将负责将数据缓冲/组装成完整的“消息”。如果消息是固定长度的，则*可以*`c_cc[VMIN]`将成员设置为消息长度。但请注意帧同步丢失时的消息帧问题和并发症！

# javascript - chrome 扩展中的 navigator.geolocation.getCurrentPosition

> ID：12437594
> 
> 赞同：0
> 
> 时间：2012-09-15T13:01:52.757
> 
> 标签：javascript, google-chrome-extension, geolocation

我正在尝试在 chrome 扩展中使用以下功能：

```
 function findMe(){
    if( navigator.geolocation ){
        navigator.geolocation.getCurrentPosition(alert("YES"), alert("NO"));
    }
} 
```

我收到警报“NO”，getCurrentPosition 不起作用，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:10:05.773

getCurrentPosition() 接受 2 个参数，它们必须是函数。所以你应该将函数作为参数传递。

工作代码：

```
navigator.geolocation.getCurrentPosition(function(position) {
    console.log(position);
}, function(positionError) {
    console.error(positionError);
}); 
```

另见：[http ://diveintohtml5.info/geolocation.html](http://diveintohtml5.info/geolocation.html)

# ruby-on-rails - 无法从装饰器（draper）缓存

> ID：12437597
> 
> 赞同：1
> 
> 时间：2012-09-15T13:02:09.247
> 
> 标签：ruby-on-rails, caching, haml, draper

到目前为止，缓存是我的视图代码中逻辑最密集的部分，所以我想从装饰器内部进行片段缓存，但是我做不到。

当我从我的装饰器中这样做时：

```
def cached_name
  h.cache do
   "a name here"
  end
end 
```

我明白了：

> 当你没想到时，你有一个 nil 对象！您可能期望有一个 Array 的实例。评估 nil.length 时发生错误

我从控制器内部实例化我的装饰器

```
@presenter = SomePresenter::new 
```

我正在使用 HAML 来表达我的观点

我怎样才能成功地从我的装饰器中缓存，所以我的视图可以做这样的事情

```
= @decorator.cached_logic_heavy_stuff 
```

*更新：*我创建了一个 git repo 来显示我的问题：[https ://github.com/houen/presenter_caching](https://github.com/houen/presenter_caching)

更新：这可能有效 - 请参阅回购

```
 include Haml::Helpers
  def another_way_to_try
    self.init_haml_helpers
    buffer = haml_buffer.buffer

    h.with_output_buffer(buffer) do
      h.cache do
        h.concat "i should still not be empty"
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T14:16:03.447

我建议`Rails.cache`直接使用可能会解决您的问题；我们在使用 Rails 4 的装饰器中做同样的事情。

```
def cached_name
  Rails.cache.fetch(source) do
    source.name # etc.
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:05:06.680

如果您使用的是 Draper，我相信您不需要显式传递视图上下文。您可能希望在实例化时将模型或集合传递给您的 draper。例子：

```
class UserDecorator < Draper::Base
  decorates :user

  # additional methods
end

# in the controller
@presenter = UserDecorator.new(@user)       # for an instance
@presenter = UserDecorator.decorate(@users) # for a collection 
```

我怀疑您收到的 nil 对象错误来自您的代码中未列出的另一个方法调用。

至于装饰器中的片段缓存，您需要使用`concat`辅助方法来使其在装饰器中工作：

```
# your decorator class
def cached_name
  h.cache("some_cache_key") do
    h.concat "a name here"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:27:21.187

Rails 的`cache`方法尝试根据调用它的视图来推断缓存键。由于您实际上并不是从视图中调用它（而是从装饰器类的实例内部），所以我希望它在尝试构建缓存键时会爆炸。

您可以尝试通过显式传递缓存键`h.cache "your cache key" do`。通过完整的堆栈跟踪，您可以找出它在哪里引发异常，然后也可以解决这个问题。但是，如果没有完整的堆栈跟踪，就很难为您提供帮助。

编辑：查看[Rails 的缓存代码](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/cache_helper.rb#L124)，我认为这可能是一个更深层次的问题；它试图获取 的长度`output_buffer`，这在您的视图上下文之外（即在 Draper 中）将不可用。您可以尝试添加：

```
def output_buffer
  h.output_buffer
end 
```

但是如果不对其进行测试，我认为如果没有更多的工作，它可能无法完全按计划工作。这只是一个粗略的猜测 - 如果这确实是问题，我会感到惊讶，但希望它能让你走上正确的道路。

那里的源代码中的注释：

```
# VIEW TODO: Make #capture usable outside of ERB
# This dance is needed because Builder can't use capture 
```

表明这不是一个完全解决的问题，因此您可能需要在 Rails 内部进行一些挖掘才能使其正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T15:52:04.203

这有效：

```
 include Haml::Helpers
  def another_way_to_try
    self.init_haml_helpers
    buffer = haml_buffer.buffer
    h.with_output_buffer(buffer) do
      h.cache "some_key10", :expires_in => 10.seconds do
        h.concat "i should still not be empty 2"
      end
    end
  end 
```

# ember.js - 有谁知道 ember-data 什么时候准备好？或者还有其他 REST API 通信的解决方案吗？

> ID：12437600
> 
> 赞同：3
> 
> 时间：2012-09-15T13:02:43.427
> 
> 标签：ember.js, ember-data

我有一个纯 REST rails 后端，我正在使用 Ember.JS 在客户端工作我知道 ember-data 用于 REST 通信，但我看到它甚至没有在生产中，有人知道它什么时候准备好？

或者是否有更好的解决方案可以使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T17:05:22.100

公平地说，Ember.js 本身实际上还没有达到稳定的 1.0 版本。从个人经验来看，我只使用过 ember-latest.js，因为它们的标记版本通常远远落后于最新版本，而且它们的 1.0 预标记对我来说缺少太多东西。甚至 emberjs.com 上的 API 文档也是针对 ember-latest.js 的，并且 1.0 pre API 文档已经存档。

话虽如此，只要你愿意深入研究现在已经相当不错的新 API 文档，整个夏天用 Ember 编写对我来说都是相当稳定和一致的体验。Ember Data 也很不错，但您必须查看大部分文档的源代码。

Ember Data 拥有迄今为止我所知道的最好的 Ember REST 适配器，尤其是因为它是专门为 Rails 构建的。查看[Active Model Serializers](https://github.com/josevalim/active_model_serializers)。它几乎使在 Rails 中构建 API 成为一项微不足道的任务。一旦您了解了 Ember Data 自述文件中解释的约定，它就可以很好地用于 hasOne、hasMany 和 belongsTo。多对多关系可能应该分解为两个 hasMany 关系，中间有一个模型。

至于何时准备好，他们打算在最终的 1.0 版本之前将 ember-data 合并到 Ember.js 中。（[来源](http://emberjs.com/blog/2012/08/03/ember-1-0-prerelease/#toc_known-issues)）尽管它们对我来说都足够稳定，而且很多公司已经部署了 ember 应用程序。Backbone.js 的版本为 0.9.2，尽管骨干网并没有真正的 ember-data 之类的东西，但很多人都信任它。

# iphone - 线程 1：EXC_BAD_ACCESS（代码 = 1，地址 = 0x30000008）问题生成

> ID：12437605
> 
> 赞同：9
> 
> 时间：2012-09-15T13:04:22.593
> 
> 标签：iphone, objective-c, ios, xcode

我在模拟器上运行应用程序时遇到问题。问题：

> EXC_BAD_ACCESS 发生在线程 1 的 objc_msgSend 上。

截屏 ：

![在此处输入图像描述](../Images/d0e23167141c921237b60a897bc7d1f4.png)

在我的应用程序中，我有多个`ViewController`. 当我单击后退按钮时，`UINavigationBar`会生成此类问题，我无法解释我的问题，因为所有功能都正常工作。

例子 ：-

1 - `fitstVController`（正常工作）

=> 它有 UITableView，当我点击特定的行时，它会进入另一个 UIViewController (SecoundViewController)

2 - `SecoundViewController`（正常工作）

=> 它有 UITableView 和 UIActionSheet。当我选择 UiActionSheet 的按钮时，另一个 UIViewController (ThirdViewController) 是打开的

3 - `ThirdViewController`（正常工作）

=> 它有 UITableView 和多个 UIPickerView。但是这里的问题是我不能回到以前的 UIViewController (SecoundViewController)。=> 当我这样做时，会 **生成 EXC_BAD_ACCESS（代码 = 1，地址 = 0x30000008）**问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T15:01:21.297

简而言之，当您释放分配给已经释放的对象的内存时，就会出现此类问题。最有可能的是，当您回到以前`UIViewController`（或其他情况）时会产生此类问题。

此外，我建议阅读以下链接以获得更全面的解释：

[Hamster Emporium 存档：所以你在 objc_msgSend() 中崩溃了](http://www.sealiesoftware.com/blog/archive/2008/09/22/objc_explain_So_you_crashed_in_objc_msgSend.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T09:15:58.013

设置异常断点意味着一旦引发异常，Xcode 就会停止执行。这并非完全万无一失，但这通常会导致应用程序在导致问题的代码行上中断。

这使得追踪问题的根源变得更加容易——尽管堆栈跟踪是诊断问题的权威方法，但它通常过于详细而没有多大用处（尤其是如果你像我一样不是编译器专家。 )

要进行设置，请单击`Breakpoints`导航器面板中的符号，然后单击`+`底部的按钮。然后从选项列表中选择`Add Exception Breakpoint`和。`Objective-C`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T18:38:29.383

正如@TimD 正确指出的那样，您可以设置一个[异常断点](http://www.dosomethinghere.com/2011/04/18/xcode-4-exception-breakpoint/)，它将突出显示有问题的代码行（而不是尝试破译汇编程序或手动尝试识别问题所在）。而且，与往常一样，在诊断这些类型的内存问题时，您应该始终[启用僵尸](http://developer.apple.com/library/ios/#recipes/xcode_help-scheme_editor/Articles/SchemeDiagnostics.html)。最后，在非 ARC 代码中尤其重要的是，您应该通过[静态分析器](http://developer.apple.com/library/ios/#recipes/xcode_help-source_editor/Analyze/Analyze.html)运行代码，因为在那里可以识别出许多与内存相关的问题。您应该始终确保静态分析器发出的警告为零，因为它总是指出严重的编程错误。

# android - 如何获取响应任何 URL/URI-Intent 的每个应用程序/活动？

> ID：12437608
> 
> 赞同：2
> 
> 时间：2012-09-15T13:04:46.317
> 
> 标签：android, android-intent

假设用户安装了 spotify、youtube、xbmc 和 glympse 应用程序。

spotify-app 响应“spotify:album:123”-intents，glympse-app 响应“glympse.com/123”-intents。XBMC 应用程序和 YouTube 应用程序都响应“youtube.com/watch?v=123”-intents。

我想要得到的是每个响应这种意图的应用程序。我不想给出特定 URL/URI 的意图，而是希望让每个应用程序都响应某种 URL/URI 意图。

如果这还不够清楚，这里有一些非工作代码，它显示了我想要的内容（除了它只查询 URI）。

```
getPackageManager()->queryIntentActivities(new Intent(Intent.Action_VIEW, Uri.parse("http://*")), 0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:39:53.667

> 我想要得到的是每个响应这种意图的应用程序。我不想给出特定 URL/URI 的意图，而是希望让每个应用程序都响应某种 URL/URI 意图。

这不能通过 Android SDK 直接实现。Android 可以告诉您可以响应*特定* `Intent`的活动，但您无法搜索已注册`<intent-filter>`的对象以找到所有具有`<data>`元素和`android:scheme`属性的活动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T13:30:13.840

您可以通过创建一个虚拟意图（具有您正在调查的相同格式）然后使用正常的 PackageManage 路由来查询哪些应用程序可以处理它来做到这一点：

```
Intent dummy = new Intent(Intent.ACTION_VIEW);
dummy.setData(Uri.parse("http://www.youtube.com/watch?v=QH2-TGUlwu4");

PackageManager packageManager = context.getPackageManager();
List<ResolveInfo> list = packageManager.queryIntentActivities(dummy, 0);

// "list" now contains all apps that can handle a YT link 
```

# google-app-engine - 如何在我的个人博客上隐藏登录按钮

> ID：12437614
> 
> 赞同：0
> 
> 时间：2012-09-15T11:19:17.057
> 
> 标签：google-app-engine

我决定在 Google AppEngine 上实现一个博客系统。但：

1.  我不想在我的博客上添加登录按钮。
2.  我不想提供手动输入的 url 来登录。

但我仍然想在网上做一些管理事情，而且只为我自己做，例如发布、编辑、删除等。

有什么聪明的方法来实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:04:46.743

您可以将组件添加到仅在您是管理员时才会呈现的网页模板。

例如，在您的 HTML 模板中，如果您有类似的内容，它只会在 admin_bool 为 True 时呈现内容。所以你可以在里面放一个表格等，只有你会看到它。

```
 {% if admin_bool %}
        # only show this if you are an admin
    {% endif %} 
```

因此，如果您碰巧使用 GAE 用户服务，您可以这样做：

```
 from google.appengine.api import users

    user = users.get_current_user()
    if user:
        print "Welcome, %s!" % user.nickname()
    if users.is_current_user_admin():
        admin_bool = True 
```

并将 admin_bool 传递给您的模板，并且仅当当前用户是管理员时才会呈现。

[https://developers.google.com/appengine/docs/python/users/adminusers](https://developers.google.com/appengine/docs/python/users/adminusers)

[http://webapp-improved.appspot.com/tutorials/gettingstarted/usingusers.html#tutorials-gettingstarted-usingusers](http://webapp-improved.appspot.com/tutorials/gettingstarted/usingusers.html#tutorials-gettingstarted-usingusers)

[http://webapp-improved.appspot.com/tutorials/gettingstarted/templates.html#tutorials-gettingstarted-templates](http://webapp-improved.appspot.com/tutorials/gettingstarted/templates.html#tutorials-gettingstarted-templates)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:09:02.347

我看不出有任何理由不提供一个根本没有在任何地方显示的秘密 URL，然后只是为您的管理页面提供app.yaml 中[所需的管理员，如下所示：](https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status)

```
- url: /admin/.*
  script: admin.app
  login: admin 
```

但是，如果您真的真的不想提供任何东西，您仍然可以这样做。不要忘记，您可以在 Google App Engine 上为同一个应用程序部署多达 10 个不同的版本，并使用可以像这样访问的唯一 URL：

```
http://version-name.application-name.appspot.com 
```

因此，您可以创建一个完全不同的应用程序来管理您的站点和另一个应用程序来展示它。将它们部署在同一个应用程序上，并将正确的应用程序作为默认版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T11:52:47.430

提供显示博客管理功能的登录按钮的不同页面或 URL。例如，博客可以托管在 wordpress.com 上，管理员可以登录，但通过不公开登录按钮的不同 URL 访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T12:02:03.920

您可以使用键盘快捷键。或者一个看不见的按钮。也许是一种姿态。

# c# - 如何拦截应用程序发送的数据包并检查其标头和内容？

> ID：12437620
> 
> 赞同：17
> 
> 时间：2012-09-15T13:05:54.633
> 
> 标签：c#, packet-sniffers, sniffing

我想知道如何拦截某个应用程序发送的数据包，然后检查这些数据包包含的内容。我需要一些建议，因为我从来没有做过这样的事情，我想自己学习。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-15T13:22:52.397

## **[Pcap.Net](http://pcapdotnet.codeplex.com/)**

Pcap.Net 是用 C++/CLI 和 C# 编写的 WinPcap 的 .NET 包装器。它具有几乎所有 WinPcap 功能，并包括一个数据包解释框架。

## **[SharpPcap](https://github.com/chmorgan/sharppcap)**

SharpPcap 是一个跨平台的.NET 环境数据包捕获框架，基于著名的 pcap / WinPcap 库。它提供了一个 API，用于使用任何 .NET 语言（例如 C# 和 VB.NET）来捕获、注入、分析和构建数据包。

## [Pcap.Net 和 SharpPcap 的比较](https://stackoverflow.com/questions/6650754/pcap-net-vs-sharppcap)

## [线鲨](http://www.wireshark.org/)

它用于网络故障排除、分析、软件和通信协议开发以及教育。而且我认为它是我迄今为止使用的最通用的数据包嗅探器。

## [提琴手](http://www.fiddler2.com/fiddler2/)

Fiddler 是一个 Web 调试代理，它记录您的计算机和 Internet 之间的所有 HTTP(S) 流量。Fiddler 允许您检查流量、设置断点以及“摆弄”传入或传出数据。Fiddler 包括一个强大的基于事件的脚本子系统，并且可以使用任何 .NET 语言进行扩展。最近 Fiddler 已被 Telerik 超越。但它仍然是免费的 AFAIK。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T13:32:51.690

c# 嗅探器套接字创建的一些示例。

```
 mainSocket = new Socket(AddressFamily.InterNetwork, SocketType.Raw,
                           ProtocolType.IP);

    // Bind the socket to the selected IP address
    mainSocket.Bind(newIPEndPoint(IPAddress.Parse(cmbInterfaces.Text),0));

    // Set the socket options
    mainSocket.SetSocketOption(SocketOptionLevel.IP,  //Applies only to IP packets
                               SocketOptionName.HeaderIncluded, //Set the include header
                               true);                           //option to true

    byte[] byTrue = newbyte[4]{1, 0, 0, 0};
    byte[] byOut = newbyte[4];

    //Socket.IOControl is analogous to the WSAIoctl method of Winsock 2
    mainSocket.IOControl(IOControlCode.ReceiveAll,  //SIO_RCVALL of Winsock
                         byTrue, byOut);

    //Start receiving the packets asynchronously
    mainSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None,
                            newAsyncCallback(OnReceive), null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T13:16:33.943

您可以使用 Fiddler 查看 HTTP 流量[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)。

或者 Wireshark [http://www.wireshark.org/](http://www.wireshark.org/)获取更高级的东西

数据包分析器摘要在这里[http://en.wikipedia.org/wiki/Packet_analyzer](http://en.wikipedia.org/wiki/Packet_analyzer)

您想要达到的目标的更多细节将有助于我们提供建议。

# ruby-on-rails - 回形针为所有不同样式设置默认图像

> ID：12437621
> 
> 赞同：7
> 
> 时间：2012-09-15T13:05:58.823
> 
> 标签：ruby-on-rails, paperclip

所以在我的模型中，我的头像有不同的尺寸：

```
has_attached_file :avatar,
  :styles => {
    :thumb => "60x60>",
    :small  => "80x80>",
    :medium => "140x140>",
    :large =>   "300x300>"},
  :default_url => "/images/default_avatar.png" 
```

现在，当我调用`model_instance.avatar.url(:small)`它时，如果没有头像，它将返回“/images/default_avatar.png”。对于我选择的任何样式，它也会返回相同的结果。

我想在更改样式时更改默认图像，这样当我调用`model_instance.avatar.url(:small)`它时应该返回“/images/default_avatar_small.png”，如果我调用`model_instance.avatar.url(:large)`它应该返回“/images/default_avatar_large.png”

如何让回形针为每种样式分配不同的默认头像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-20T02:35:57.220

可以包含在`:style`默认 url 字符串中，使您可以使其动态：

```
has_attached_file :avatar,
  :styles => {
    :thumb => "60x60>",
    :small  => "80x80>",
    :medium => "140x140>",
    :large =>   "300x300>"},
  :default_url => "/images/default_avatar_:style.png" 
```

# javascript - 使用 JS/jQuery 获取输入值并用作数组

> ID：12437622
> 
> 赞同：1
> 
> 时间：2012-09-15T13:06:02.997
> 
> 标签：javascript, jquery

```
 var coptions = $(me).parents('tr').find('td.desCell > .coptions').val();
 var chosenOptions = [coptions]; 
```

是我试图做的。

```
coptions contains:

'Black', 'White' 
```

我需要将它包装在 [] 中，并让 javascript 将其作为数组读取，但是执行 [coptions] 不起作用？

也试过`'[' + coptions + ']'`了，但后来它把它读成一个字符串。

我怎样才能做到这一点？如果没有，是否有任何解决方法/解决方案使其工作？也许每个“黑色”和另一个“白色”都有多个 .coptions 输入（隐藏输入），然后用 js 循环以添加到数组中？这将如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:08:30.767

你可以使用`map`方法。

```
var coptions = $(me).parents('tr').find('td.desCell > .coptions').map(function(){
                    return this.value
               }).get() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:09:35.053

试试这个，假设你的选择器是正确的。

```
var chosenOptions = [];

$(this).parents('tr').find('td.desCell > .coptions').each(function(){
     chosenOptions.push($(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:10:33.720

这将返回一个数组：

```
coptions = coptions.split(","); 
```

# wordpress - Wordpress 注册 URL 不匹配

> ID：12437623
> 
> 赞同：1
> 
> 时间：2012-09-15T13:06:18.700
> 
> 标签：wordpress, redirect, login

在博客主页，当我点击注册时，它会将我带到这个 URL [http://www.tawnosdesigns.com/mockups/behindthestorywp/wp-login.php?action=register](http://www.tawnosdesigns.com/mockups/behindthestorywp/wp-login.php?action=register)。这不是我网站的（幕后故事）登录页面。这是我用于样机的另一个域。如何设置我的原始网站（behindthestory.org）注册 URL？

网站 url : behindthestory.org 用户名 : gatsby 密码 : santoga

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:09:23.790

访问您提供的站点后，您似乎正在使用标题上的静态表单或已安装的插件进行注册。因此，如果您为注册而安装，则需要更改模板或检查插件设置。

这是模板中的静态表单的最大机会。

希望这对您有所帮助。一切顺利 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:28:56.587

如果在部署后发生这种情况，您可以尝试进入数据库中的 wp_options 表，并搜索旧选项并更改它们。我认为该选项称为`site_url`.

# arrays - 棘手的动态数组与动态数组的兼容性

> ID：12437634
> 
> 赞同：0
> 
> 时间：2012-09-15T13:07:33.360
> 
> 标签：arrays, delphi, pointers, dynamic-arrays

考虑制作数组的旧技巧

```
Type
  IntArray = Array Of Integer;
  PIntArray = ^IntArray
  PTDynIntArray = ^TDynIntArray;
  TDynIntArray = Array[0..0] Of Integer;

{later...}

GetMem(APTDynIntArray,100*SizeOf(Integer));
APTDynIntArray^[49] := 50 
```

有没有办法让这个棘手的数组与标准动态数组兼容？

例如，如果我想用

```
Procedure DoSomething(Data: PTDynIntArray); 
```

并且考虑到数据将使用上述语法（括号中的 dataname-dereference-index）进行处理，如果我将**PIntArray**作为参数传递，Delphi 编译器将不会停止，但是我在运行时得到一个 AV（我猜 Delphi 认为, 在这种情况下, **PIntArray与****PTDynIntArray**相同)

那么这两种类型（PIntArray 和 PTDynIntArray）可以组合、类型转换、互换吗？如何 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:11:42.287

您可以将`IntArray`(注意：*not* `PIntArray` ) 转换为`PTDynIntArray`. 反过来一般是不可能的。

An`IntArray`存储为指向数组第一个元素的指针。数组前面是关于数组长度等的信息，但是如果您的过程只访问数组元素，它们不会造成任何伤害。

明确地说，您也可以将其写为`@IntArray[0]`.

# database - 最接近的数值 - 但总是返回较低的值

> ID：12437635
> 
> 赞同：-1
> 
> 时间：2012-09-15T13:07:50.090
> 
> 标签：database

我的问题与此非常相似：[在数据库中查找最接近的数值](https://stackoverflow.com/questions/592209/find-closest-numeric-value-in-database)

但是，以上面链接中使用的示例为例，如何修改此代码以返回最低匹配值。所以 1.6 会返回 1.5，但 1.8 也会返回 1.5？提前谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:40:56.233

我没试过，但是怎么样

```
SELECT TOP 1 [property] FROM [table]
WHERE [valueColumn] < [input]
ORDER BY [input] - [valueColumn] 
```

?

这样，它只会采用低于输入的值，并按它们到输入的“距离”排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:14:36.997

您可以尝试使用此代码 - 基于`ASC and TOP(2) operators`

```
SELECT TOP (2) YourProperty  FROM [myTable] 
WHERE (condition)
ORDER BY YourProperty ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T23:11:17.480

在我看来，@AsgerArentoft 的答案更简洁：

```
SELECT TOP 1 * FROM [table]
WHERE [valueColumn] <= [input]
ORDER BY [valueColumn] desc 
```

`<=`很重要，因为如果`valueColumn`有值 1,3,5 并且输入是 3，`<`那么返回的值将是 1。

# hibernate - 向/从前端传递代理键以识别 Hibernate 更新的记录

> ID：12437636
> 
> 赞同：1
> 
> 时间：2012-09-15T13:08:12.007
> 
> 标签：hibernate

我有一个使用代理主键的表。实体（表）的自然键是命名空间+名称。访问该表的 Web 应用程序将为用户提供一个 Web 表单，该表单允许用户更新实体的任何属性。我正在为 ORM 使用 Hibernate。发出 session.update(entity) 时，实体需要填充其 ID（代理键）以允许 Hibernate 识别数据库中的记录。我可以想到 2 种方法

（1）将 ID（隐藏）传递到前端，然后在更新表单时返回业务层

（2）仅传递自然键并使用自然键进行查找在DAO层获取ID。

请注意，无法使用表单更新自然键。有一种单独的形式用于更改对象的身份（命名空间 + 名称），并发性不是问题，即没有人能够更改身份，而其他人持有更新锁，因此使用自然键查找会仍然产生请求更新时使用的相同记录。

**问题**
（1）除了我提到的方法之外，还有其他方法吗？
(2) 这通常在 Web 应用程序中是如何完成的？

我尝试搜索，但找不到太多关于此的信息；可能没有正确选择单词进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:39:52.200

这两种方法都是有效的，我什至不知道该说些什么。如何实现这取决于您，但如果您使用代理键并激活二级缓存，则可能会直接从缓存中获取实体，如果经常使用这些操作，这将提高性能。通过自然键搜索将绕过缓存。

# javascript - Gmail 文件上传进度条中的 Flash

> ID：12437637
> 
> 赞同：4
> 
> 时间：2012-09-15T13:08:13.840
> 
> 标签：javascript, html, web-applications, file-upload

我发现有几个资源声称，GMail File Upload 结合了 Flash 来显示进度条或允许多个文件上传。

例如：

*   [http://anders.com/cms/290](http://anders.com/cms/290)
*   [http://www.neowin.net/news/gmail-enables-multi-attatchment-uploading](http://www.neowin.net/news/gmail-enables-multi-attatchment-uploading)

我的问题是，GMail 使用 Flash 生成上传进度条是真的吗？如果不是，**GMail如何在不支持FileAPI的IE9中实现Progress Bars？**我做了几个测试，在 GMail 文件上传过程中我无法确认 Flash 的存在：

*   我安装了 FlashBlocker，它有效地阻止了 Flash 内容。但是，GMail 文件上传进度条没有被阻止。
*   我右击进度条看它是否是 Flash 小程序，但不是。
*   我检查了源代码，但没有找到任何对 .swf 代码的引用。

**那么GMail是如何实现它的文件上传功能的呢？它在包括IE9在内的所有浏览器中都显示出来了呢？**

任何想法，如果其他开发人员可以达到相同的结果，或者文件上传进度条是否是谷歌特定的？

我知道有很多可用于 Google Upload 的插件，但我希望有干净的 JavaScript、HTML5、PHP、CSS3 和与 IE9 的兼容性。因此，如果我理解这个主题，我愿意自己编写所有代码。

我使用以下工具：

*   Javascript
*   HTML5
*   PHP
*   MySQL
*   CSS3

谢谢你。

* * *

## 更新：

看起来GMail在上传文件时使用Flash来计算进度百分比。它比使用 CSS 生成进度条，因此没有使用 Flash 小程序来显示进度条。

我通过在 IE9 中禁用 Flash 发现了这一点。与 Chrome 相比，在 IE 9 中可以轻松禁用 Flash。

拜托，如果你对这个话题有什么要补充的，我很乐意讨论。例如，有趣的是，Flash 小程序如何生成文件上传进度百分比，以及它如何与 JavaScript 或 CSS 交流该信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:40:45.543

我已经进一步探索，我必须确认，是的，仍然是今天，GMail 必须使用几个支持文件/附件上传的 Flash 对象。

在 Chrome 中禁用 Flash 很困难。但是，它可以在 IE 中禁用。在 IE 中禁用 flash 后，GMail 已切换到另一个没有进度条的交互性较差的上传系统。

这清楚地证明了 GMail 仍然使用 Flash 来支持其上传例程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:29:25.293

大约 2 年前，Google 切换到 HTML5 多文件上传。我认为他们使用后备闪存上传器。 [http://www.webmonkey.com/2010/04/google-turns-to-html5-for-gmails-new-drag-and-drop-attachments/](http://www.webmonkey.com/2010/04/google-turns-to-html5-for-gmails-new-drag-and-drop-attachments/)

这个库（jQuery File-Upload - Demo here：[http](http://blueimp.github.com/jQuery-File-Upload/) ://blueimp.github.com/jQuery-File-Upload/ ）声称它可以使用 Internet Explorer 的文件进度（至少以某种方式;-)）：

> 所有版本的 Internet Explorer 还将在每次基于 iframe 的上传后更新全局进度条。但是由于 IE 不报告文件大小，全局进度条将测量每个上传的文件，而不考虑上传文件的大小。 [https://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support](https://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support)

# jquery - 过滤jquery中的单选按钮，比较值

> ID：12437643
> 
> 赞同：4
> 
> 时间：2012-09-15T13:09:22.543
> 
> 标签：jquery, filtering, radio

我有以下代码。尝试根据传入的数组值预填充单选按钮。会是1-3

```
<input name="rating1" type="radio" value="1" />
<input name="rating1" type="radio" value="2" />
<input name="rating1" type="radio" value="3" />

$(document).ready(function() {                         
    //Setting  up the radio buttons                    
    var $radios = $('input:radio[name=rating1]');
        //ratingAnswer is the value I need to select in the radio group. Value=2
    var ratingAnswer=answersArray[oneMap].RATING;
      if($radios.is(':checked') === false) {
        $radios.filter('[value=ratingAnswer]').attr('checked', true);
} 
```

这不会给我任何回报，因为它正在寻找字符串 ratingAnswer 作为值，而不是 ratingAnswer 的变量值。我试过 value=' + ratingAnswer + ' 但它根本不喜欢那样。如何将变量注入该值区域。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T13:13:25.023

```
$radios.filter('[value="' + ratingAnswer + '"]').attr('checked', true); 
```

如果这仍然不起作用，请仔细查看 的值，`ratingAnswer`看看它是否符合您的预期。

**示例：http:** [//jsfiddle.net/6zAN7/1/](http://jsfiddle.net/6zAN7/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:13:49.427

你应该改变这一行：

```
 $radios.filter('[value=ratingAnswer]').attr('checked', true); 
```

对于这个：

```
 $radios.filter('[value='+ratingAnswer+']').attr('checked', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T04:21:29.600

对此的一般解决方案 - 不假设值不会与 jQuery 选择器语法冲突 - 如下：

```
$radios.filter(function() { return this.value == varWithValueToBeChecked; }).prop('checked', true); 
```

# javascript - Javascript：我怎样才能“宣布”一个函数而不调用它？

> ID：12437644
> 
> 赞同：0
> 
> 时间：2012-09-15T13:09:31.867
> 
> 标签：javascript, function, call

有人可以帮助我吗？

以下代码有效，但不幸的是，需要对 doSomething() 进行函数调用：

```
<body onload=init()>
</body>

<script>
    function Startscreen()
    {
        this.doSomething(); //why is this call necessary and how else to solve it?
        this.startscreenhtml = 
            "   <form onsubmit=doSomething()>   " + 
            "       <input type=text />         " +
            "   </form>                         ";
        document.write(this.startscreenhtml);
    }
    Startscreen.prototype.doSomething = function()
    {
        alert(123)
    }
</script>

<script>
    function init()
    {
        var startscreen = new Startscreen();    
    }
</script> 
```

我确实想将函数 doSomething 保留为对象 Startscreen 的函数。

编辑：我确实想继续使用 document.write

最好我想像现在一样在构造函数之外声明 doSomething ，因为我相信否则如果我多次调用 new Startscreen ，则会多次创建相同的函数。

但是，我尝试了很多方法来使这项工作在没有调用 doSomething 的情况下工作，包括在构造函数中声明函数，但没有任何效果。我的猜测是调用是使函数知道所必需的，因为如果从上到下阅读代码，我在声明它之前将其分配给'onsubmit'。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:25:49.853

我认为代码不像您在当前形式中所想的那样工作。创建表单时会调用该`doSomething`函数，但提交表单时不会调用该函数。

要从`onsubmit`事件调用函数，它必须在全局上下文中是已知的，因为事件处理程序不会在`Startscreen`实例的上下文中调用。使用您当前的代码，由于两个原因无法调用该函数；无法从全局上下文中访问，并且由于没有对对象实例的引用，甚至没有可以用来调用它的实例。

（您可以从原型中获取函数，或者创建对象的新实例，但是您使用对象进行的设置将完全没有意义。）

如果你想保留实例，你必须把它放在一个在`init`函数中存在的变量中：

```
var startscreen;
function init() {
  startscreen = new Startscreen();    
} 
```

现在，当调用事件处理程序时，对象仍然存在`onsubmit`，因此您可以通过变量访问该函数：

```
this.startscreenhtml = 
  "<form onsubmit="startscreen.doSomething()">" + 
  "<input type=text />" +
  "</form>"; 
```

这当然不理想，因为您将对象与变量耦合，但我希望您对正在发生的事情有所了解，以便您能够挺身而出。

* * *

要在提交事件中使用该方法而无需全局变量来查找它，您必须创建一个元素，以便您可以连接一个实际函数作为事件处理程序。这样您就可以从事件处理程序中访问该方法：

```
// make a local variable that you can capture in a closure
var me = this;
var frm = document.createElement("form");
// make an anonymous function that will create a closure capturing "me"
frm.onsubmit = function(){
  me.doSomething();
}; 
```

这意味着您不能使用它`document.write`来创建表单（或者您需要给每个表单一个唯一的 id，以便您可以获得对创建的元素的引用并在之后连接事件）。

# c - Windows（或Linux）中的不间断进程？

> ID：12437648
> 
> 赞同：10
> 
> 时间：2012-09-15T13:09:54.330
> 
> 标签：c, hook, signal-processing, interrupt, interrupt-handling

有什么办法可以制作一个不能被中断的程序（不间断的程序）？我的意思是`a process that can't be terminated by any signal, kill command, or any other key combinations`在任何系统中：Linux、Windows 等。

首先，我很想知道这是否可能。如果是的话，它可能达到什么程度？

我主要用 C、C++ 和 python 编写代码；但我不知道这些编程语言中可用的任何此类命令。

是否可以使用汇编语言，以及如何？还是使用嵌入式汇编代码（内联汇编）的高级语言c？

我知道有些信号是可以捕捉的，有些不像 SIGKILL 和 SIGSTOP。

我记得，当我习惯在 Windows-XP 上工作时，`some viruses couldn't be terminated even from Task Manager.`所以我想一些解决方案可以用低级语言来解决。也许通过覆盖中断向量表。

**我们可以使用 TSRs(Hooking) 编写一个不间断的程序吗？因为只有在重新启动计算机或明确从内存中删除 TSR 时才能删除 TSR。*我对么？***

我在谷歌上找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:13:33.247

好吧，可能有人可以编写一个对大多数信号（如 SIGQUIT、SIGHUP 等）不响应的程序 - 每种“kill”实际上是内核发送给程序的一种信号，一些信号意味着内核该程序是卡住了，应该被杀死。实际上，唯一无法杀死的程序是内核本身，甚至 init ( PID 1 ) 也可以用 HUP （这意味着 reload ）“杀死”。

了解有关信号处理的更多信息，从 kill -l ( list signals ) 命令开始。

关于Windows（基于“防病毒”标签）-实际上也适用于Linux-如果您只需要运行一些防病毒用户无法跳过/关闭，这是权限问题，我的意思是由系统启动的程序和非管理员用户未经许可杀死它，无论如何都无法关闭/退出它。我猜全世界的 Windows 上的 lameuser 都会通过尝试首先关闭防病毒软件来开始“解决”他们遇到的任何问题，只要有可能:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T07:22:29.607

在 Linux 上，可以避免被以下两种方式之一杀死：

1.  成为`init`（PID 1）。`init`忽略它没有捕获的所有信号，即使是通常不可阻塞的信号，例如`SIGSTOP`and `SIGKILL`。
2.  触发内核错误，并使您的程序陷入`D`（不间断等待）状态。

对于`2.`，结束`D`状态的一种常见方法是尝试访问一些没有响应的硬件。特别是在旧版本的 Linux 上，进程会卡在内核模式下，并且在内核放弃硬件之前不会响应任何信号（这可能需要相当长的时间！）。当然，当你的程序被这样卡住时，它不能做任何其他事情，所以它比有用更烦人，并且较新版本的 Linux 开始通过将`D`状态划分为可杀死状态（在哪里`SIGKILL`工作）和不可杀死状态来纠正这个问题（所有信号都被阻塞）。

或者，当然，您可以简单地将代码加载为内核模块。内核模块不能被“杀死”，只能卸载 - 只有当它们允许自己被卸载时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T17:36:18.067

您可以捕获几乎任何信号或输入并通过它保持活力，主要的例外是 SIGKILL。可以防止它杀死你，但你必须替换 init（并重新启动以成为新的 init）。PID 0 在大多数 Unix 上是特殊的，因为它是唯一不能被杀死的东西。

# android - 布局重力左右

> ID：12437653
> 
> 赞同：4
> 
> 时间：2012-09-15T13:10:49.813
> 
> 标签：android, layout

我有一个线性布局，里面有两个线性布局。两个线性布局都有 2 个按钮。我想将前两个按钮向左对齐，另外两个按钮向右对齐。不幸的是，我有四个按钮（或 2 个布局）并排。

这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:background="@drawable/vat_header_selector"
        android:orientation="horizontal" >

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/btn_numbers"
                android:layout_width="90dp"
                android:layout_height="30dp"
                android:textColor="@drawable/vat_btn_header_textcolor_selector"
                android:background="@drawable/vat_btn_header_selector"
                android:text="Numbers">
            </Button>
            <Button
                android:id="@+id/btn_text"
                android:layout_width="90dp"
                android:layout_height="30dp"
                android:textColor="@drawable/vat_btn_header_textcolor_selector"
                android:background="@drawable/vat_btn_header_selector2"
                android:text="Words">
            </Button>   
        </LinearLayout>

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/btn_black"
                android:layout_width="50dp"
                android:layout_height="30dp"
                android:textColor="@drawable/vat_btn_header_textcolor_selector"
                android:background="@drawable/vat_btn_header_selector"
                android:text="B">
            </Button>
            <Button
                android:id="@+id/btn_white"
                android:layout_width="50dp"
                android:layout_height="30dp"
                android:textColor="@drawable/vat_btn_header_textcolor_selector"
                android:background="@drawable/vat_btn_header_selector2"
                android:text="W">
            </Button>   
        </LinearLayout>

    </LinearLayout> 
```

这是它的样子： ![在此处输入图像描述](../Images/a218e541cd078b1237d61ecb8e843e20.png)

这就是我想要的： ![在此处输入图像描述](../Images/b0aa29f7174158ce01d2428cdaa064ec.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T13:16:23.510

Gravity `left`，`right`当 的方向设置为水平时不起作用`LinearLayout`（因为视图沿 X 轴放置）。做你想做的事情的一种方法是`View`在两者之间插入一个空白`LinearLayouts`以在它们之间创建一个空间：

```
<View android:layout_width="0dp"
      android:layout_height="fill_parent"
      android:layout_weight="1" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:14:32.857

将以下属性应用于包含`Button B`和的第二线性布局`Button W`。

```
android:gravity="right"
android:layout_weight="1" 
```

# c# - opentk 的实用程序库

> ID：12437655
> 
> 赞同：1
> 
> 时间：2012-09-15T13:11:05.820
> 
> 标签：c#, opentk

`OpenTK.Graphics.Glu`它是tao 框架中弃用的替代品吗？尤其是对几何体渲染的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:27:21.550

`OpenTK`是 的演变`Tao`。而且，老实说，我没有听过这`glut`件事变得贬低了。`glut`迄今为止，函数在`OpenGL`世界上被广泛使用，因为它包含大量非常有用的函数和计算，如果您不是数学专家而只是程序员，您可能希望避免这样做。

顺便说一句，里面的所有东西`glut`都可以不使用它来完成（至少我没有找到任何不可用的东西），但是，正如我之前所说，你必须对背后的数学有很好的*理解*那些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:21:01.930

OpenTK 有自己的首选方式来进行几何渲染等。当然，您仍然可以在 OpenTK.Graphics 命名空间中使用 Glu 类，但是，OpenTK 更希望您（我认为）来更改它：

```
Glu.Perspective(MathHelper.PiOver4, AspectRatio, 0.1f, 100f); 
```

进入这个：

```
Matrix4 perspectiveMatrix = Matrix4.CreatePerspectiveFieldOfView(
    MathHelper.PiOver4,
    .1f, 100f);
GL.LoadMatrix(ref perspectiveMatrix); 
```

你也可以像这样替换 gluLookAt 函数。看看 Matrix4 结构。它包含很多有用的东西。

# playframework - 为 Play 框架中的复合键路由默认 CRUD 接口

> ID：12437656
> 
> 赞同：0
> 
> 时间：2012-09-15T13:11:11.270
> 
> 标签：playframework, playframework-1.x, composite-primary-key

我正在尝试为只有复合键的实体创建一条成功的路由，以便我可以导航到默认 CRUD 模块的“编辑”界面。

现在，我已成功检索并显示数据库中所有 club_admin 的列表，但是当我尝试导航到 club_admin 的个人编辑页面时，我收到“无路线”错误。

我的数据库中的表是：

```
create table club_admin  (
    club_id int not null,
    user_username varchar(25) not null,
    primary key (club_id,user_username),
    constraint fk_club_admin_club_id foreign key (club_id) references club(club_id), 
    constraint fk_club_admin_user_username foreign key (user_username) references user(user_username)
); 
```

club_admin 类的代码是：

```
package models;

...

@Entity
@Table(name="club_admin")
public class ClubAdmin extends GenericModel
{

        @Id 
        @ManyToOne
        @JoinColumn(name="club_id", referencedColumnName="club_id")
        public Club club;

        @Id 
        @ManyToOne
        @JoinColumn(name="user_username", referencedColumnName="user_username")
        public User user;

        public ClubAdmin(Club club, User user)
        {
                this.club=club;
                this.user=user; 
        }

        ...
} 
```

我的猜测是表/实体没有用于路由的默认 ID，因此失败。所以我的问题是如何创建一个路由，它使用复合键导航到 club_admin 的“编辑”页面，而不必创建一个整数类型的主键？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:07:50.113

我发现多对多关系由`Set<class>`. 我不应该创建多对多类，而是应该根据我的需要在俱乐部或签证节上创建一组成员（代表管理员）变量。使用此方法，会自动创建多对多关系。此外，无需编辑我的路线。

# css - CSS 导航子菜单和分隔符

> ID：12437658
> 
> 赞同：0
> 
> 时间：2012-09-15T13:11:21.833
> 
> 标签：css, navigation, hover, submenu

我创建了一个以 CSS 为中心的导航栏，它可以工作。每个 li 项目都用一个作为背景图像的边框分隔。当悬停在导航项目上时，分隔符消失，因为悬停改变了背景（我猜）但我想知道如何解决这个问题，填充或边距不起作用，因为它只会移动 li 元素。

第二个问题是子菜单项显示不正确，我不知道为什么......

演示：http: [//jsfiddle.net/Xenios/tfbhh/9/embedded/result/](http://jsfiddle.net/Xenios/tfbhh/9/embedded/result/)

代码：http: [//jsfiddle.net/Xenios/tfbhh/9/](http://jsfiddle.net/Xenios/tfbhh/9/)

我试图让它工作近一个星期，我已经厌倦了，所以我在这里寻求支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:00:18.493

## 分隔器

如您所知，主栏 ( `nav_container`) 有一个背景图像，它构成了按钮的外观。每个按钮的背景是分隔符，没有其他内容（右侧 10 像素）。所以，当你的悬停背景显示时，因为它是非悬停背景的公园。

为了解决这个问题，您需要将分隔符放在它自己`<li>`的非悬停背景中。然后，当您悬停元素时，它们可以轻松更改为您当前的悬停图像。

如果你不想分离`<li>`元素，你将不得不为每个按钮制作单独的全宽图像，但是看看你制作这个菜单的方式，我怀疑你会想要这样做.

这是您的工作示例（我只做了前几个按钮）：http: [//jsfiddle.net/tfbhh/43/](http://jsfiddle.net/tfbhh/43/)

## 子菜单

正如我上面提到的，你已经设置了容器背景图像，你还没有在你的子菜单项上这样做，所以这就是为什么他们没有一个更大的按钮。使用您的开发人员工具栏 (F12) 查看样式，这应该可以清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:32:16.710

您可以在 上使用等于分隔符宽度的左填充，`li`并仅更改 上的背景`a`。此外，我注意到您`class="separator"`在除第一个列表项之外的所有项上都使用了。您可以将其替换为`:first-child`伪选择器。然后你会得到这样的东西：

```
li:first-child { padding-left: 0; background: transparent; }
li { padding-left: 3px; background: url(separator.png) no-repeat; }
li a { line-height: 40px; padding: 0 15px; }
li a:hover { background: url(anchor-hover.png) repeat-x; } 
```

**编辑**：上面的 CSS 涵盖了这个解决方案的核心样式。这是一个工作示例（使用背景颜色）：

[http://jsfiddle.net/haa5X/3/](http://jsfiddle.net/haa5X/3/)

完整的 CSS：

```
ul { overflow: hidden; background: green; }
li:first-child { padding-left: 0; }
li { padding-left: 3px; float: left; background: red; }
li a { float: left; line-height: 40px; padding: 0 15px; background: yellow; }
li a:hover { background: purple; } 
```

完整的 HTML：

```
<ul>
<li><a href="#">Item 1</a></li>
<li><a href="#">Item 2</a></li>
<li><a href="#">Item 3</a></li>
</ul> 
```

**编辑2**：对不起，错过了子菜单的一部分：

[http://jsfiddle.net/haa5X/4/](http://jsfiddle.net/haa5X/4/)

完整的 CSS：

```
ul { overflow: hidden; margin: 0; background: green; }
ul > li:first-child { padding-left: 0; }
ul > li { padding-left: 3px; float: left; background: red; }
ul > li a { float: left; line-height: 40px; padding: 0 15px; background: yellow; }
ul > li a:hover { background: purple; }

li ul { display: none; position: absolute; margin-top: 40px; }
li:hover ul { display: block; }
li li { padding-left: 0; float: none; display: block; }
li li a { float: none; display: block; width: 100%; } 
```

完整的 HTML：

```
<ul>
<li><a href="#">Item 1</a></li>
<li><a href="#">Item 2</a>
  <ul>
  <li><a href="#">First sub item</a></li>
  <li><a href="#">Sub item 2</a></li>
  <li><a href="#">Last sub item</a></li>
  </ul>
</li>
<li><a href="#">Item 3</a></li>
</ul> 
```

​</p>

# javascript - QWebView 类是否在 Qt 5.0.0 中工作？

> ID：12437660
> 
> 赞同：1
> 
> 时间：2012-09-15T13:11:45.417
> 
> 标签：javascript, performance, qt, qtwebkit, qt5

需要你的帮助！我们在 Qt 4.8 上遇到了关于 JavaScript 缓慢渲染文本的问题。因此，我们决定在 Qt 5.0.0 Beta 上重建项目，因为在文档中写到 Qt 5.0 正在使用 V8 Javascript 引擎，它应该在我们的 Windows 应用程序中固定 javascript 代码。

但问题是如何在 V8 上运行构建？除了在 Qt 5.0 的类索引（[http://qt-project.org/doc/qt-5.0/classes.html](http://qt-project.org/doc/qt-5.0/classes.html)）中，根本没有 QWebView 。

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:58:18.967

与 QT5 一起发布的新 webkit 具有新的结构。QWebView、QWebpage 等现在是 QtWebKitWidgets 的一部分。

因此，在您的代码中，您需要像这样包含 webview：

```
 #include <QtWebKitWidgets/QWebView> 
```

在您的 .pro 文件中，您需要添加：

```
 QT += webkitwidgets 
```

如果你真的想让你的代码向前/向后兼容；我只想检查 QT5：

```
QT+= core gui webkit

contains(QT_VERSION, ^5.*) {
    QT += webkitwidgets
} 
```

...

然后在您的代码中：

```
#if (QT_VERSION < 0x050000)
#include <QWebView>
#else
#include <QtWebKitWidgets/QWebView>
#endif 
```

# android - 在哪里检查颜色 android.R.color.holo_red_light

> ID：12437661
> 
> 赞同：0
> 
> 时间：2012-09-15T13:11:48.613
> 
> 标签：android

我需要知道 . 所指的颜色到底是什么`android.R.color.holo_red_light`。在哪里检查？请指教。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:21:40.120

转到`your-android-sdk-location\platforms\android-14\data\res`并在 xml 文件中搜索该字符串。

好的，是的

```
<color name="holo_red_light">#ffff4444</color> 
```

在里面`\android-sdk\platforms\android-14\data\res\values\colors.xml`

# mysql - MYSQL 共享主机中的不同时区

> ID：12437666
> 
> 赞同：0
> 
> 时间：2012-09-15T13:12:32.283
> 
> 标签：mysql, timezone

我对 mysql 时区有疑问。Mysql 时区为 +0:00，我需要将时区设置为 +7:00

这是我的代码

```
function db_connect(){
        global $dbhost,$dbuser,$dbpassword,$dbname;
        $link_id = mysql_connect($dbhost,$dbuser,$dbpassword);
        mysql_select_db($dbname);
        if (!$link_id){
            $MYSQL_ERRNO = 0;
            $MYSQL_ERROR = "Connection failed to the host $dbhost";
            return 0;
        }
        else if(!mysql_select_db($dbname)){
            $MYSQL_ERRNO = mysql_errno();
            $MYSQL_ERROR = MYSQL_ERROR();
            return 0;
        }
        else{
            mysql_query("SET SESSION time_zone = '+7:00'");
            return $link_id;
        }
    } 
```

我已经设置了每次连接到数据库的时区。但是当我想插入数据时，时区回到 +0:00 有人请帮助我。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:24:47.933

使用命令

```
mysql_query("SET time_zone = '+7:00'"); 
```

参考[详情](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

# python - 如何在 Python 中替换字符串中的标点符号？

> ID：12437667
> 
> 赞同：23
> 
> 时间：2012-09-15T13:12:49.373
> 
> 标签：python, string, replace

我想用 Python 字符串中的“”*替换*（而不是*删除）所有标点符号。*

有没有以下味道的东西？

```
text = text.translate(string.maketrans("",""), string.punctuation) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-15T13:23:49.027

此答案适用于 Python 2，仅适用于 ASCII 字符串：

string 模块包含两个可以帮助您的东西：标点符号列表和“maketrans”函数。以下是如何使用它们：

```
import string
replace_punctuation = string.maketrans(string.punctuation, ' '*len(string.punctuation))
text = text.translate(replace_punctuation) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-15T13:21:25.020

[从Python 中的字符串中去除标点符号的最佳方法的](https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python)修改解决方案

```
import string
import re

regex = re.compile('[%s]' % re.escape(string.punctuation))
out = regex.sub(' ', "This is, fortunately. A Test! string")
# out = 'This is  fortunately  A Test  string' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-02T14:12:46.060

有一个更强大的解决方案，它依赖于正则表达式排除而不是通过大量标点符号列表包含。

```
import re
print(re.sub('[^\w\s]', '', 'This is, fortunately. A Test! string'))
#Output - 'This is fortunately A Test string' 
```

正则表达式捕获不是字母数字或空白字符的任何内容

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-23T14:41:31.063

此解决方法适用于 python 3：

```
import string
ex_str = 'SFDF-OIU .df  !hello.dfasf  sad - - d-f - sd'
#because len(string.punctuation) = 32
table = str.maketrans(string.punctuation,' '*32) 
res = ex_str.translate(table)

# res = 'SFDF OIU  df   hello dfasf  sad     d f   sd' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T13:24:55.120

替换为`''?`。

`;`将 all 翻译成 '' 和 remove all有什么区别`;`？

这是删除所有`;`：

```
s = 'dsda;;dsd;sad'
table = string.maketrans('','')
string.translate(s, table, ';') 
```

你可以用翻译来代替。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-17T19:05:13.743

以我的具体方式，我从标点符号列表中删除了“+”和“&”：

```
all_punctuations = string.punctuation
selected_punctuations = re.sub(r'(\&|\+)', "", all_punctuations)
print selected_punctuations

str = "he+llo* ithis& place% if you * here @@"
punctuation_regex = re.compile('[%s]' % re.escape(selected_punctuations))
punc_free = punctuation_regex.sub("", str)
print punc_free 
```

结果：he+llo ithis& place if you here

# c# - 如何显示二维数据网格

> ID：12437671
> 
> 赞同：1
> 
> 时间：2012-09-15T13:13:09.097
> 
> 标签：c#, wpf

我想设计一个界面，在数据网格中显示按钮 - 每天及其 24 小时。总而言之，我们将展示：24 * 7 = 168 个按钮。

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:54:12.287

有一个称为框架接口`ITypedList`，它允许您以数据绑定可以理解的方式直接指定要为每个组成成员显示的属性。

意识到尝试以这种方式进行绑定是**绝对可怕**的。基本步骤如下：

*   实现一个实现的集合类型`ITypedList`；
*   对于集合中的每一项，返回一个`PropertyDescriptor`封装行/列对的值的；
*   像往常一样将数据绑定到集合

我已经将其作为一项实验进行了，并且它确实有效，但是您必须跳过以使一切正常工作的箍是一场噩梦。不过，我通常认为它比直接操作视图逻辑更好。DataGridView 意味着足够智能，可以从绑定中推断出它需要做的所有事情，如果我可以修改绑定目标而不是控件，那就是我更喜欢的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:33:39.890

我做了一个如何完成的示例代码！这段代码只创建按钮，所以检查一下：注意：按你自己的方式命名按钮，我只是做了一个例子！

```
 dataGridView1.AllowUserToAddRows = false;
        for (int i = 0; i < 24; i++)
        {
            DataGridViewButtonColumn btnColumn = new DataGridViewButtonColumn();
            btnColumn.HeaderText = string.Format("{0}:00", i+1);
            btnColumn.Name = "dayColumn";
            btnColumn.Width = 40; //set yout width
            dataGridView1.Columns.Add(btnColumn);
        }
        for (int i = 0; i < 7; i++)
        {
            dataGridView1.Rows.Add();
            dataGridView1.Rows[i].HeaderCell.Value = (i + 1).ToString();
            for (int j = 0; j < dataGridView1.Columns.Count; j++)
            {
                dataGridView1[j, i].Value = string.Format("{0}:00", (j + 1));
            }
        } 
```

--

当单击某个按钮时，订阅事件处理程序可能是个好主意：

```
 public Form1()
    {
        InitializeComponent();
        dataGridView1.AllowUserToAddRows = false;
        for (int i = 0; i < 24; i++)
        {
            DataGridViewButtonColumn btnColumn = new DataGridViewButtonColumn();
            btnColumn.HeaderText = string.Format("{0}:00", i+1);
            btnColumn.Name = "dayColumn";
            btnColumn.Width = 40; //set yout width
            dataGridView1.Columns.Add(btnColumn);
        }
        for (int i = 0; i < 7; i++)
        {
            dataGridView1.Rows.Add();
            dataGridView1.Rows[i].HeaderCell.Value = (i + 1).ToString();
            for (int j = 0; j < dataGridView1.Columns.Count; j++)
                dataGridView1[j, i].Value = string.Format("{0}:00", (j + 1));
        }
        dataGridView1.CellClick += new DataGridViewCellEventHandler(dataGridView1_CellClick);
    }

    private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        string day = dataGridView1.Rows[e.RowIndex].HeaderCell.Value.ToString();
        string hour = dataGridView1.Columns[e.ColumnIndex].HeaderText.ToString();
        MessageBox.Show("you have clciked on day: " + day + ", hour: " + hour);
    } 
```

# wcf - Castle WCF 集成设施

> ID：12437673
> 
> 赞同：2
> 
> 时间：2012-09-15T13:13:18.337
> 
> 标签：wcf, castle-windsor, castle, wcffacility

我正在尝试在我的项目中使用 Castle WCF 集成工具。我按照城堡官方网站[http://docs.castleproject.org/Windsor.WCF-Facility-Registration.ashx](http://docs.castleproject.org/Windsor.WCF-Facility-Registration.ashx)的说明进行操作， 但我无法让它工作。这是我的代码和配置。

```
protected void Application_Start(object sender, EventArgs e)
{
    BuildContainer();
}

private void BuildContainer()
    {
        Container = new WindsorContainer();

        //1st
        Container.Kernel.AddFacility<WcfFacility>();
        Container.Kernel.Register(Component.For<IProductService>()
                                           .ImplementedBy<ProductService>()
                                           .Named("ProductService"));

        //2nd
        Container.AddFacility<WcfFacility>()
            .Install(Castle.Windsor.Installer.Configuration.FromXmlFile("Castle.config"));

        //3rd
        Container.Register(
                   Component.For<IProductService>()
                       .ImplementedBy<ProductService>()
                       .LifeStyle.PerWcfOperation()
                       .AsWcfService(new DefaultServiceModel()
                           .AddEndpoints(WcfEndpoint.BoundTo(new WSHttpBinding(SecurityMode.None)
                           {
                               MaxReceivedMessageSize = Int32.MaxValue,
                               MaxBufferPoolSize = Int32.MaxValue,
                               ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas
                               {
                                   MaxStringContentLength = Int32.MaxValue
                               }
                           }).At("http://localhost:1278/ProductService")
                    )
                    .AddBaseAddresses("http://localhost:1278/ProductService")
                    .PublishMetadata()
                       ));
    } 
```

正如您在上面看到的，我尝试以 3 种不同的方式注册我的服务。需要明确的是，我一次只运行这 3 个注册码中的一个，其他的都被注释掉了。对于从 castle.config 获取配置的是我的 castle.config ：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <components>
        <component id="TestService"
                       service="IProductService"
                       type="ProductService"
               lifestyle="transient">
        </component>
    </components>
</configuration> 
```

最后是我的 web.config

```
<?xml version="1.0"?>

<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

 <system.serviceModel>
  <behaviors>
   <serviceBehaviors>
    <behavior name="">
     <serviceMetadata httpGetEnabled="true" />
     <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
   </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
     <services>
         <service name="WCFLibrary.ProductService">
             <endpoint name ="IProductService_Endpoint" address="http://localhost:1278/ProductService" binding="httpBinding" contract="WCFLibrary.IProductService" />
         </service>
     </services>
 </system.serviceModel>
</configuration> 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:22:45.673

您可能正在注册您的服务，但没有注册到 Castle WcfFacility 的 DefaultServiceHostFactory 中使用的 Windsor 内核。

IMO 最简单的方法是创建一个自定义服务主机工厂，派生自 DefaultServiceHostFactory。在创建服务实例之前将服务注册到内核的一种优雅方法如下所示：http: [//blog.ploeh.dk/2010/05/18/SneakViewAtCastlesWCFFacility.aspx](http://blog.ploeh.dk/2010/05/18/SneakViewAtCastlesWCFFacility.aspx)。您当然必须修改 .svc 文件以使用自定义工厂类而不是 DefaultServiceHostFactory，例如：

```
<%@ ServiceHost Language="C#" Service="MyService"
Factory="MyProject.MyServiceHostFactory, MyProject"  %> 
```

本质上，您将准备好的容器传递给 DefaultServiceHostFactory 的构造函数，然后它将使用容器来解析服务及其依赖项。

# ruby-on-rails - Rails basic form

> ID：12437687
> 
> 赞同：0
> 
> 时间：2012-09-15T13:14:30.157
> 
> 标签：ruby-on-rails, forms

I'm new to Rails and web programming, and can't seem to accomplish this simple task. I have a post with several comments ( something like reddit or HN ). I want to add a new comment from the post view. The problem is that the comment is created by the create method of the Comment Controller, and it doesn't know what post it belongs to. Do I need to use a posts_helper to store the current post?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:18:57.937

Read the [getting started guide](http://guides.rubyonrails.org/getting_started.html) on the rails guides site. It goes through creating a blog with comments.

You need to scope the creation of comments to the post that is being commented on. e.g. `@post.comments.create(params[:comment])`. The getting started guide will discuss all this.

# c++ - 克隆导致 C++ 中的分段错误

> ID：12437691
> 
> 赞同：0
> 
> 时间：2012-09-15T13:14:50.733
> 
> 标签：c++, segmentation-fault, clone

克隆导致分段错误

代码 ：

```
#define STACKSIZE 16384
int variable ;
using namespace std ;
int do_something(void *) {
    variable = 42;
return 0 ;
}

int main() {
void *child_stack;
variable = 9;
child_stack = (void *) malloc(STACKSIZE);
printf("The variable was %d\n", variable);
clone(do_something, child_stack,CLONE_VM|CLONE_FILES,NULL );
sleep(1);
printf("The variable is now %d\n", variable);
free(child_stack);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:22:39.603

阅读[手册页`clone`](http://linux.die.net/man/2/clone)：

> 堆栈在所有运行 Linux 的处理器（HP PA 处理器除外）上向下增长，因此 child_stack 通常指向为子堆栈设置的内存空间的最高地址。

所以我会尝试这样的事情：

```
char* child_stack = (char*) malloc(STACKSIZE);
child_stack += STACKSIZE - 1;  // set it to the topmost address
                               // of allocated space

clone(do_something, (void*) child_stack, CLONE_VM|CLONE_FILES, NULL); 
```

# django - Django：错误报告应用程序

> ID：12437692
> 
> 赞同：0
> 
> 时间：2012-09-15T13:14:54.447
> 
> 标签：django

是否有任何 Django 错误报告应用程序可以轻松集成到已构建的 Django 网站中并允许网站用户报告错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:32:39.760

我对用户报告的错误的体验并不令人满意。

几年后，我的决定是让一切都大声失败并使用[Sentry](https://github.com/dcramer/django-sentry)来记录它。

Sentry 是一个很棒的应用程序。它是由 dcramer 创建的，他是一个从事 disqus 的人（他们也使用它）。

我知道这不是您要直接寻找的，但可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:48:08.990

像往常一样， [Django Packages](http://www.djangopackages.com/)是了解现有应用程序的最佳选择。

在您的情况下，请务必检查[Feedback-Grid](http://www.djangopackages.com/grids/g/feedback/)中列出的应用程序。

# r - 在插补数据集的 logit 回归中使用工具变量

> ID：12437702
> 
> 赞同：1
> 
> 时间：2012-09-15T13:17:20.517
> 
> 标签：r, statistics, r-zelig

我使用 Amelia 包估算了缺失值。我现在正在使用回归分析数据。

我一直在使用以下代码

```
require(Zelig)
z.out <- zelig(catastrophic ~ age + PC1 + sex + hh_size + wealth_quin + 
hh_exp_quin, model="logit", data = a.output$imputation)
summary(z.out) 
```

其中 a.output 是估算数据集。（我仍然需要对多个估算数据集的组合进行编码，但知道如何做到这一点，所以稍后再说）。

我发现我的模型在 hh_exp_quin 和因变量（这是一个二元变量，因此模型是“logit”）之间有很多内生性。

因此，我想使用另一个变量（当前未包含在此模型中，称为“var1”）作为 hh_exp_quin 的工具变量。

zelig 包目前似乎不支持“ivreg”，我在网上找不到任何东西告诉我如何处理这个问题。

非常感谢，

提摩太

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:20:20.283

尝试包 AER 中的 ivreg 命令。

# cron - 将 TCL 脚本放入 crontab 时如何解决错误：“error writing "stdout": bad file number"？

> ID：12437703
> 
> 赞同：0
> 
> 时间：2012-09-15T13:17:23.773
> 
> 标签：cron, tcl, stdout, expect

我有一个具有写入错误日志功能的 TCL 脚本，但是当我将此脚本放入 crontab 时遇到如下错误：

```
error writing "stdout": bad file number
    while executing
"puts $msg" 
```

代码片段是：

> 如果 { $logLevel >= 0 } {
> 
> ```
> puts $msg
> 
> flush stdout 
> ```
> 
> }

但是这个脚本可以手动运行成功，当我把它放在crontab中时它只会出错。

谢谢，埃姆雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:29:39.397

当您从 cron 运行程序时，它会在不寻常的环境中运行。特别是，没有终端，环境变量不同，标准输入和标准输出通常都不可用，并且标准错误被重定向，因此如果出现任何故障，它会通过电子邮件发送给您。正如我们从您的案例中的错误消息中看到的那样，stdout 未打开（从技术上讲，它只是说它不能写入，但即便如此）；`puts`如果没有另外说明，则默认写在那里。

基本修复？不要写到标准输出！在其他地方打开一个文件并写入该文件。或者，在您的 crontab 条目中定义一个 stdout 的重定向，以便它到达某个明确的位置（因此可以从您的 Tcl 程序内部写入）。

# iphone - 在 MKMap iPhone 上显示多个图钉

> ID：12437707
> 
> 赞同：2
> 
> 时间：2012-09-15T13:18:21.623
> 
> 标签：iphone

你好朋友在我的应用程序中，我在 mapview 上显示了多个图钉。我有两个可变数组，第一个用于纬度，第二个用于经度，每个数组有 10 个值，因为我在我的方法中显示以下代码：

```
- (void)showAddressAllBusiness {
    annotationsarray=[[NSMutableArray alloc] init];

      NSLog(@"%d",[listOfLatitude count]);
     NSLog(@"%d",[listOfLongitude count]);
     NSLog(@"%d",[listOfPlaceName count]);

    for (int i =0;i < [listOfLatitude count]; i++) {
        MKCoordinateRegion region =  { {0.0, 0.0 }, { 0.0, 0.0 } };
        region.center.latitude = [[listOfLatitude objectAtIndex:i] doubleValue];
        region.center.longitude = [[listOfLongitude objectAtIndex:i] doubleValue];
        region.span.longitudeDelta = 0.1f;
        region.span.latitudeDelta = 0.1f;
        [self.mapViewCityGuide setRegion:region animated:YES];
        [self.mapViewCityGuide setZoomEnabled:YES];
        addAnnotation = [[AddressAnnotation alloc]init];

        addAnnotation.mTitle = [NSString stringWithFormat:@"%@",[listOfPlaceName objectAtIndex:i]];
        addAnnotation.coordinate = region.center;
        [self.mapViewCityGuide addAnnotation:addAnnotation];
        [annotationsarray addObject:addAnnotation];

    }
    NSLog(@"%d",[self.mapViewCityGuide.annotations count]);
    [self centerMap];
} 
```

当我使用从 web 服务出现的纬度和经度数组值时，此代码无法正常工作，我正在调试代码，然后 mapViewCityGuide 得到 nil 或 0x0。

如果我在数组中使用硬编码纬度和经度值并调用此方法，那么它将在地图上显示所有引脚我该如何解决这个问题

```
listOfPlaceName = [[NSMutableArray alloc] initWithObjects:@"test",@"test",@"test",@"pithempur",@"test",@"test",@"test",@"test", nil];

    listOfLatitude = [[NSMutableArray alloc] initWithObjects:@"22.71957",@"23.17930",@"22.96123",@"22.60987",@"22.45260",@"22.55244",@"22.60000",@"22.68330", nil];

   listOfLongitude = [[NSMutableArray alloc] initWithObjects:@"75.85773",@"75.78491",@"76.05141",@"75.69644",@"75.94197",@"75.75653",@"75.30000",@"75.61670", nil];

   [self showAddressAllBusiness]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:38:47.157

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    mapView.delegate=self;

    [mapView removeAnnotations:mapView.annotations];

    NSMutableArray* annotations=[[NSMutableArray alloc] init];
    for (int j=0; j<10; j++) 
    {

        CLLocationCoordinate2D theCoordinate1;

        theCoordinate1.latitude = [[NSString stringWithFormat:@"%i",10+j]doubleValue];

        theCoordinate1.longitude = [[NSString stringWithFormat:@"%i",72+j]doubleValue];

       //my annotation is mkannotation class

        MyAnnotation* myAnnotation1=[[MyAnnotation alloc] init];

        myAnnotation1.coordinate=theCoordinate1;

        myAnnotation1.title=[NSString stringWithFormat:@"locatiion %i",j];

        [mapView addAnnotation:myAnnotation1];

        [annotations addObject:myAnnotation1];

    }

    NSLog(@"%d",[annotations count]);

    MKMapRect flyTo = MKMapRectNull;

    for (id <MKAnnotation> annotation in annotations) {
        NSLog(@"fly to on");
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo)) {
            flyTo = pointRect;
        } else {
            flyTo = MKMapRectUnion(flyTo, pointRect);

        }
    }

    mapView.visibleMapRect = flyTo;

}

#pragma mark MKMapViewDelegate
/*
 - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
 {
 return [kml viewForOverlay:overlay];
 }
 */
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    NSLog(@"welcome into the map view annotation");

    if ([annotation isKindOfClass:[MyAnnotation class]])
    {
        static NSString *AnnotationIdentifier = @"AnnotationIdentifier";
        MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc]
                                         initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
        if (!pinView)
        {
            pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
            pinView.canShowCallout = YES;
            pinView.animatesDrop = YES;
        }
        else
        {
            pinView.annotation = annotation;
            pinView.tag=((MyAnnotation *)annotation).tag;
            pinView.canShowCallout = YES;
            pinView.animatesDrop = NO;
        }

        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
        rightButton.frame=CGRectMake(0, 0, 14, 16);
        [rightButton setBackgroundImage:[UIImage imageNamed:@"arrow_s5.png"] forState:UIControlStateNormal];

        [rightButton setTitle:annotation.title forState:UIControlStateNormal];
        rightButton.tag=((MyAnnotation *)annotation).tag;
        [rightButton addTarget:self
                        action:@selector(showDetails:)
              forControlEvents:UIControlEventTouchUpInside];
        pinView.rightCalloutAccessoryView = rightButton;

        return pinView;
    }

    return nil;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:34:07.930

****请尝试以下代码：-* ***

```
-(void)viewDidLoad
{

    CLLocation *userLoc = mapView.userLocation.location;
    CLLocationCoordinate2D userCoordinate = userLoc.coordinate;

    NSLog(@"user latitude = %f",userCoordinate.latitude);
    NSLog(@"user longitude = %f",userCoordinate.longitude);

    mapView.delegate=self;

    NSMutableArray* annotations=[[NSMutableArray alloc] init];
    MyAnnotation* myAnnotation;

    for (int i = 0; i<[DataArr count]; i++) 
    {
        CLLocationCoordinate2D theCoordinate;

        double a = [[[DataArr objectAtIndex:i] valueForKey:@"lat"] doubleValue];
        double b =[[[DataArr objectAtIndex:i] valueForKey:@"lon"] doubleValue];

        theCoordinate.latitude = a;
        theCoordinate.longitude =b;

        myAnnotation=[[MyAnnotation alloc] init];
        NSString *str=[NSString stringWithFormat:@"%d",i];
        [myAnnotation indexOfAccessibilityElement:str];

        myAnnotation.coordinate=theCoordinate;
        myAnnotation.title=[[DataArr objectAtIndex:i] valueForKey:@"name"];
        myAnnotation.ID_map=i;
        [annotations addObject:myAnnotation];
    }

    for (int i =0; i<[annotations count]; i++) 
    {
        [mapView addAnnotation:[annotations objectAtIndex:i]];
    }

   // Walk the list of overlays and annotations and create a MKMapRect that
    // bounds all of them and store it into flyTo.
    MKMapRect flyTo = MKMapRectNull;
    for (id <MKAnnotation> annotation in annotations) 
    {
        NSLog(@"fly to on");
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo)) 
        {
            flyTo = pointRect;
        } else 
        {
            flyTo = MKMapRectUnion(flyTo, pointRect);
            //NSLog(@"else-%@",annotationPoint.x);
        }
    }

   // Position the map so that all overlays and annotations are visible on screen.
    mapView.visibleMapRect = flyTo;

}

#pragma mark MKMapViewDelegate

- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{

    NSLog(@"didSelectAnnotationView");
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    NSLog(@"welcome into the map view annotation");

    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    // try to dequeue an existing pin view first
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc]
                                     initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
    pinView.animatesDrop=YES;
    pinView.canShowCallout=YES;
    pinView.pinColor=MKPinAnnotationColorPurple;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = rightButton;

    UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile.png"]];
    pinView.leftCalloutAccessoryView = profileIconView;
    [profileIconView release];

    return pinView;
} 
```

# shell - 如何从 ant 脚本为 shell 设置环境变量？

> ID：12437719
> 
> 赞同：1
> 
> 时间：2012-09-15T13:20:37.240
> 
> 标签：shell, ant

我有一个调用 ant 脚本的 shell 脚本 user.sh。ant 脚本会提示一些用户输入，例如

```
<input message="Enter the username" addproperty="my.user" /> 
```

我想从 ant 脚本中为脚本 user.sh 设置一个环境变量 USER 并输入输入值。我试着这样做：

```
<property environment = env />
<property name = env.USER value=my.user /> 
```

但它没有在 shell 脚本中设置环境变量。如何在用于调用 ant 脚本的父 shell 脚本中设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:42:53.813

在您的情况下，`ant`是shell的子进程。无法从子进程设置父进程 shell 的环境变量。其他选项是 .

1.  接受来自 shell 的用户输入并设置变量。
2.  将从 ant 获得的值写入文件，并从父 shell 获取该文件。（有些像回电）。

# r - 使用 R 中的一个或多个因子变量进行详尽的模型选择

> ID：12437720
> 
> 赞同：-1
> 
> 时间：2012-09-15T13:20:46.143
> 
> 标签：r, linear-regression, model-comparison

我正在尝试基于大量解释变量（包括变量之间的交互项）构建线性模型，其中两个是因子变量。在 regsubsets() 或 jumps() 中使用因子变量会导致错误。在尝试详尽的模型选择时，我可以使用另一个函数或包来包含因子变量吗？

谢谢你

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:36:25.847

`leaps()`在设置或`regsubsets()`使用 x 和 y 矩阵时，我遇到了同样的问题。

但是，`regsubsets(y~x1cont+factor(x2)..., data=data)`对我有用。没有错误。也许这对你有用？

# duplicate-data - 如何使用 wcf ria 服务避免 Silverlight 中的重复用户 ID

> ID：12437722
> 
> 赞同：1
> 
> 时间：2012-09-15T13:21:34.230
> 
> 标签：duplicate-data, duplicates

我是初学者，正在使用带有 SQL Server 2008 的 RIA 服务开发一个 Silverlight 导航应用程序。

我有一个“注册”表，最初存储用户请求的成员资格。管理员将对其进行验证，稍后将特定用户详细信息从“注册”移至“成员”表。此外，当会员的期限/期限结束时，相同的详细信息最终从“会员”表移至“过去会员”表。

现在我想要的是，在提交注册详细信息之前，应该在所有三个表（注册、成员、过去成员）中检查指定的用户名，如果发现任何记录，它应该通过提交详细信息来限制用户以避免重复的用户 ID。

我搜索并尝试计算行数，但即使我有相同用户 ID 的记录，我也会得到 count=0

请让我知道是否有任何其他更好的选择或此逻辑中的任何纠正（请更简短，因为我是初学者）

只签入第一张桌子

提交按钮单击处理程序中的代码

```
 myDomainContext objctx1 = new myDomainContext();
   var query1 = objctx1.GetregistrationsByIDQuery(userid_txtbx.Text);
   objctx1.Load(query1);
   var count = (from c in objctx1.registrations where c.userid == userid_txtbx.Text select c).Count();
   // To see how many rows there
   MessageBox.Show(count.ToString());
   // Code for restricting details to be submitted
   ...............................
   .....................
   ............................... 
```

myDomainService.cs 中的函数

```
// Query to get usernames from registrations table
    public IQueryable<registration> GetregistrationsByID(string id)
    {
            return this.ObjectContext.registrations.Where(s => s.userid == id);
    } 
```

将表中的示例字段视为：

表：Registration,Members,PastMembers 有共同的列

用户名、全名、联系人

# java - XPath 表达式不起作用

> ID：12437725
> 
> 赞同：2
> 
> 时间：2012-09-15T13:22:17.080
> 
> 标签：java, xml, dom, xpath

我有以下 XML：

```
<thoughts>
    <thought>
        <id>1</id>
        <category>Leadership</category>
        <what>sometext</what>            
        <who>sometext</who>
    </thought>
    <thought>
        <id>2</id>
        <category>Leadership</category>
        <what>sometext</what>            
        <who>sometext</who>
    </thought>
    ... 100s of category Leadership
    <thought>
        <id>1</id>
        <category>Love</category>
        <what>sometext</what>            
        <who>sometext</who>
    </thought>
    <thought>
        <id>2</id>
        <category>Love</category>
        <what>sometext</what>            
        <who>sometext</who>
    </thought>
    ... 100s of category Love

    ... and so on up to about ten categories
</thoughts> 
```

我想为给定的 id 和类别选择一个**想法（什么）**。我正在用 Java 做这个。我尝试了以下方法：

```
"/thought[id='1']/thought[category='Love']/what/text()" 
```

爪哇：

```
XPathFactory factory = XPathFactory.newInstance();
XPath xPath = factory.newXPath();
XPathExpression expr1 = xPath.compile("/thought[id='1']/thought[category='Love']/what/text()");
Object result1 = expr1.evaluate(doc, XPathConstants.NODESET);
NodeList nodes1 = (NodeList) result1; 
```

我也尝试过以下 XPathExpressions：

```
/thoughts/thought[id='1']/thought[category=`Love`]/what/text() 
```

我是 XML 和 XPath 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:31:58.043

**使用**：

```
/*/thought[id = '1' and category = 'Love']/what 
```

这将选择作为元素`what`的子元素的任何元素，该`thought`元素`id`具有字符串 value 的子`"1"`元素和字符串`category`value的子元素`"Love"`，并且（该`thought`元素）是 XML 文档顶部元素的子元素。

**如果您需要上面选择的元素的文本节点子节点，请使用**：

```
/*/thought[id = '1' and category = 'Love']/what/text() 
```

**如果您只需要（第一个）上述文本节点的字符串值，请使用**：

```
string(/*/thought[id = '1' and category = 'Love']/what) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*/thought[id = '1' and category = 'Love']/what"/>
============
     <xsl:copy-of select="/*/thought[id = '1' and category = 'Love']/what/text()"/>
============
     <xsl:copy-of select="string(/*/thought[id = '1' and category = 'Love']/what)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（为所需节点提供的具有不同值的文档）时：

```
<thoughts>
    <thought>
        <id>1</id>
        <category>Leadership</category>
        <what>sometext</what>
        <who>sometext</who>
    </thought>
    <thought>
        <id>2</id>
        <category>Leadership</category>
        <what>sometext</what>
        <who>sometext</who>
    </thought>
    ... 100's of with category Leadership     
    <thought>
        <id>1</id>
        <category>Love</category>
        <what>some Love text 1</what>
        <who>sometext</who>
    </thought>
    <thought>
        <id>2</id>
        <category>Love</category>
        <what>sometext</what>
        <who>sometext</who>
    </thought>
         ... 100's of with category Love
         ... and so on up to about ten categories 
</thoughts> 
```

**对三个 XPath 表达式求值，并将这些求值的结果复制到输出**，并用方便的分隔符直观地分隔：

```
<what>some Love text 1</what>
============
     some Love text 1
============
     some Love text 1 
```

**更新**：

在评论中，OP 添加了不仅应该选择`what`，而且`who`应该选择的要求。

**下面是这种情况下对应的新 XPath 表达式**：

```
/*/thought[id = '1' and category = 'Love']/*[self::what or self::who]

/*/thought[id = '1' and category = 'Love']/*[self::what or self::who]/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:58:41.980

我建议遵循 XPath xpression：

```
/thoughts/thought[id='1' and category='Love']/what/text() 
```

我可以推荐这个[教程](http://zvon.org/xxl/XPathTutorial/Output/example22.html)

# jquery-ui - head 部分中的 Apache Wicket 和 jQuery JavaScript 仅加载一次

> ID：12437727
> 
> 赞同：0
> 
> 时间：2012-09-15T13:22:37.583
> 
> 标签：jquery-ui, jquery, wicket

在将 jQuery 与 Wicket 集成时，我遇到了一些奇怪的问题。

我们使用 Ajax 将每个内容项加载为 Wicket 中的面板。所以它是一个单页应用程序。

在 Panel 的头部我们添加一些 JS，例如：

```
 <script type="text/javascript">
        $(document).ready( function() {
            $('#example').dataTable( {
                "sScrollY": "200px",
                "bPaginate": false
            } );
        } );
    </script> 
```

但是，此代码似乎仅在第一次加载 Panel 时才执行。如果您使用 Ajax 将 Panel 重新加载到应用程序中，则不再执行代码。

我猜JS $(document).ready 只初始化了一次，第二次将相同的JS加载到浏览器中 $(document).ready 不再被调用。

Wicket 是否有针对该问题的解决方法？

谢谢！

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:24:38.913

document ready 只被调用一次，如果你想在每次加载时调用，将代码编写为单独的方法，并在每次 ajax 加载成功时调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:30:44.340

我能够解决这个答案给出的问题：http: [//mail-archives.apache.org/mod_mbox/wicket-users/201209.mbox/%3CCAAJwaYUSfoFZHVP4EXSxuw_Co-J0W6qvV1MR8wGERjfNzj2CxA%40mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/wicket-users/201209.mbox/%3CCAAJwaYUSfoFZHVP4EXSxuw_Co-J0W6qvV1MR8wGERjfNzj2CxA%40mail.gmail.com%3E)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T10:16:42.260

您可以添加 Renderhead()。即使在页面刷新时，它也会执行其中写入的任何内容

# rss - 在 MVC4/WebAPI 中创建 RSS 提要

> ID：12437731
> 
> 赞同：6
> 
> 时间：2012-09-15T13:22:57.373
> 
> 标签：rss, asp.net-mvc-4, asp.net-web-api

我正在寻找通过 MVC4（和/或 WebAPI）创建 RSS 提要的最佳方式。这篇文章似乎最适用[http://www.strathweb.com/2012/04/rss-atom-mediatypeformatter-for-asp-net-webapi/](http://www.strathweb.com/2012/04/rss-atom-mediatypeformatter-for-asp-net-webapi/)。但它是在 WebAPI 发布前的日子里写的。我已经使用 Nuget 来更新所有包，但尝试构建项目时会折腾：

```
Error   2   The type or namespace name 'FormatterContext' could not be found (are you missing a using directive or an assembly reference?)  G:\Code\MvcApplication-atomFormatter\MvcApplication-atomFormatter\SyndicationFeedFormatter.cs   38  129 MvcApplication_syndicationFeedFormatter 
```

我发现许多文章解释了 MediaTypeFormatter 自 beta 以来发生了显着变化，但我发现了有关代码片段所需调整的详细信息。

是否有显示 RSSFormatter 构造的更新资源？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T14:34:34.667

是的，我针对 Beta 编写了该教程。

下面是更新到 RTM 版本的代码。

如果可以的话，一个建议是，这个示例使用了一个简单的具体类型的“白名单”，为它构建了 RSS/Atom 提要（在本例中是我的`Url`模型）。理想情况下，在更复杂的场景中，您应该针对接口而不是具体类型设置格式化程序，并让所有应该作为 RSS 公开的模型来实现该接口。

希望这可以帮助。

```
 public class SyndicationFeedFormatter : MediaTypeFormatter
    {
        private readonly string atom = "application/atom+xml";
        private readonly string rss = "application/rss+xml";

        public SyndicationFeedFormatter()
        {
            SupportedMediaTypes.Add(new MediaTypeHeaderValue(atom));
            SupportedMediaTypes.Add(new MediaTypeHeaderValue(rss));
        }

        Func<Type, bool> SupportedType = (type) =>
        {
            if (type == typeof(Url) || type == typeof(IEnumerable<Url>))
                return true;
            else
                return false;
        };

        public override bool CanReadType(Type type)
        {
            return SupportedType(type);
        }

        public override bool CanWriteType(Type type)
        {
            return SupportedType(type);
        }

        public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, System.Net.Http.HttpContent content, System.Net.TransportContext transportContext)
        {
            return Task.Factory.StartNew(() =>
            {
                if (type == typeof(Url) || type == typeof(IEnumerable<Url>))
                    BuildSyndicationFeed(value, writeStream, content.Headers.ContentType.MediaType);
            });
        }

        private void BuildSyndicationFeed(object models, Stream stream, string contenttype)
        {
            List<SyndicationItem> items = new List<SyndicationItem>();
            var feed = new SyndicationFeed()
            {
                Title = new TextSyndicationContent("My Feed")
            };

            if (models is IEnumerable<Url>)
            {
                var enumerator = ((IEnumerable<Url>)models).GetEnumerator();
                while (enumerator.MoveNext())
                {
                    items.Add(BuildSyndicationItem(enumerator.Current));
                }
            }
            else
            {
                items.Add(BuildSyndicationItem((Url)models));
            }

            feed.Items = items;

            using (XmlWriter writer = XmlWriter.Create(stream))
            {
                if (string.Equals(contenttype, atom))
                {
                    Atom10FeedFormatter atomformatter = new Atom10FeedFormatter(feed);
                    atomformatter.WriteTo(writer);
                }
                else
                {
                    Rss20FeedFormatter rssformatter = new Rss20FeedFormatter(feed);
                    rssformatter.WriteTo(writer);
                }
            }
        }

        private SyndicationItem BuildSyndicationItem(Url u)
        {
            var item = new SyndicationItem()
            {
                Title = new TextSyndicationContent(u.Title),
                BaseUri = new Uri(u.Address),
                LastUpdatedTime = u.CreatedAt,
                Content = new TextSyndicationContent(u.Description)
            };
            item.Authors.Add(new SyndicationPerson() { Name = u.CreatedBy });
            return item;
        }
    } 
```

# php - 如何使用 Facebook php SDK 检索专辑图片？

> ID：12437734
> 
> 赞同：0
> 
> 时间：2012-09-15T13:23:27.733
> 
> 标签：php, facebook-php-sdk

我正在尝试使用 PHP SDK 从 Facebook 相册中检索图像。

```
$user_profile = $facebook->api('/me');
$user_id = $user_profile['id'];
$albums = $facebook->api('/me/albums');
print_r($albums);
foreach($albums['data'] as $album)
{
    $album_id = $album['id'];
    echo $album_id;
    $photos = $facebook->api('/{$album_id}/photos');

}
foreach($photos['data'] as $photo)
    {
        echo "<img src='{$photo['source']}'/>","<br/>";
    } 
```

但它检索一个空数组。当我尝试打印某个 i 时，在第一个循环中，我发现该循环中的代码没有执行。那么我会做错什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:39:06.903

你可以试试这样，见下文

```
$albums = $facebook->api('/me/photos'); 
```

我认为应该是这样的。

# mysql - 分组顺序 - SQL

> ID：12437736
> 
> 赞同：1
> 
> 时间：2012-09-15T13:23:44.513
> 
> 标签：mysql, sql

我有一个包含 3 个字段的表，例如：

```
roll varchar(100)

marks int (10) // can be 0 5 or 10

time anyTimeFormat

//time stores the time of passing the exam. 
```

我需要做的是按升序排序，完成时间，我可以做到

```
ORDER by time ASC 
```

但是，我需要按升序排序，同时根据分数对记录进行分组，即得分为10且最先完成的记录，依此类推。

我尝试了 GROUP BY，但知道它不起作用。欢迎对此提供任何帮助。

**注意：**我使用 mysql。PHP是前端。

**样本数据**：

```
roll        marks        time

1             10          2012-09-07 15:03:39
2             10          2012-09-07 15:03:42
3             10          2012-09-07 15:03:17
4             10          2012-09-07 15:03:20
5              5          2012-09-07 15:03:11 
```

**预期输出**：：

```
// I want those with 10 marks to be displayed first.

roll        marks        time

1             10          2012-09-07 15:03:17
2             10          2012-09-07 15:03:20
3             10          2012-09-07 15:03:39
4             10          2012-09-07 15:03:42
5              5          2012-09-07 15:03:11 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:26:50.707

利用：

```
ORDER BY marks DESC, time ASC 
```

或者换句话说，您对分数进行排序是因为您希望首先获得最高分，然后对于同等分数，按时间排序以便首先显示最先完成的人。

# javascript - 在空闲时间后隐藏我的鼠标光标，当我移动鼠标时它会出现

> ID：12437740
> 
> 赞同：0
> 
> 时间：2012-09-15T13:24:07.767
> 
> 标签：javascript, css, cursor, mouseevent

我正在创建一个阅读器 Web 应用程序。我想在空闲时间后隐藏我的鼠标光标，当我使用 JavaScript、CSS 为我的网页移动鼠标时它会显示出来。

实现它的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T22:42:26.863

这对我有用（取自[https://gist.github.com/josephwegner/1228975](https://gist.github.com/josephwegner/1228975)）。

注意对带有 id 包装器的 html 元素的引用。

```
//Requires jQuery - http://code.jquery.com/jquery-1.6.4.min.js
$(document).ready(function() { 

    var idleMouseTimer;
    var forceMouseHide = false;

    $("body").css('cursor', 'none');

    $("#wrapper").mousemove(function(ev) {
            if(!forceMouseHide) {
                    $("body").css('cursor', '');

                    clearTimeout(idleMouseTimer);

                    idleMouseTimer = setTimeout(function() {
                            $("body").css('cursor', 'none');

                            forceMouseHide = true;
                            setTimeout(function() {
                                    forceMouseHide = false;
                            }, 200);
                    }, 1000);
            }
    });
}); 
```

# qt - 如何通过 AutoTroll 使用 QT 和 GNU Autotools？

> ID：12437741
> 
> 赞同：1
> 
> 时间：2012-09-15T13:24:21.633
> 
> 标签：qt, autotools, m4

我想同时使用 Autotools 和 QT4。为此，我想使用[AutoTroll](http://tsunanet.net/autotroll/)。正如网站所说，它应该很容易使用。不幸的是，我无法这样做。我有一个有效的 Hello World 示例：

这就是我的**configure.ac**的样子：

```
AC_INIT([Hello], [0.1], [bug-report@hello.example.com], [hello],  [http://hello.example.com/])
AC_PREREQ([2.59])
AM_INIT_AUTOMAKE([1.10 no-define foreign])
AC_PROG_CXX
AC_PROG_CC
AT_WITH_QT
AC_CONFIG_FILES([Makefile])
AC_OUTPUT 
```

我的**Makefile.am**：

```
AUTOMAKE_OPTIONS = subdir-objects
ACLOCAL_AMFLAGS = ${ACLOCAL_FLAGS}

bin_PROGRAMS = hello
hello_SOURCES = src/*.cpp 
```

我的带有 QT 的简单**main.cpp包括：**

```
#include <iostream>
#include <QApplication> \\Added this to test if Autotools works correctly
int main()
{
std::cout << "Hello Worlasdasdsadd!" << std::endl;
return 0;
} 
```

有人可以帮忙吗？一步一步的简短会非常好。先感谢您。

编辑：我不知道如何在我的配置中集成这个 m4 makro (Autotroll)。这就是为什么我不能提供任何“错误”或其他内容。该网站并不能帮助我理解该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:33:28.323

我不建议您将 QT 和 autotools 混合使用。对于 QT 项目，最推荐使用 cmake/qmake。当您遇到任何问题时，会更容易找到答案等。

此外，自 2008 年以来， *Autotroll*似乎没有得到维护，并且没有使用 QT >= 4.4+ 进行测试，并且从那时起下雨了很多（真的很多，例如 QML 和 QT 5.0）：

*AutoTroll 已通过 Qt 4.0+、Qt 4.1+、Qt 4.2+ 和 Qt 4.3+ 成功测试*

如果你只是想学习 autotools，gtk/gnome、gnu-tools 或任何 c++/c/whatever-language 项目会让你更轻松。使用自动工具查找项目并了解他们需要什么以及他们使用什么。

另一个建议是您寻找解释自动工具基础和工具流程的演示文稿和讲座。我只能说 Autotools 是一个很大的世界，请耐心等待。

# web-services - WCS 7.0 和 Sterling 集成问题

> ID：12437745
> 
> 赞同：0
> 
> 时间：2012-09-15T13:24:47.753
> 
> 标签：web-services, websphere-7, websphere-commerce, wcs

我们正在尝试集成 WebSphere commerce 7.0（功能包 4）和 Sterling (DOM) 系统。我们遵循了 IBM 信息中心中提到的步骤。但是，当我们尝试 GetProductAvailability 时，我们遇到了以下异常。

我们的 wc-component-client.xml 类似于下面，路径：workspace\WC\xml\config\com.ibm.commerce.inventory.external

```
<_config:action name="GetProductAvailability" asynchronous="false">
        <_config:preinvokemediator
            mediatorImpl="com.ibm.commerce.foundation.services.invocation.internal.impl.JSPMessageInvocationMediatorImpl">
            <_config:property name="url"
                value="http://localhost:80/webapp/wcs/stores/IBM.WC.Compose/mediation/SterlingCommerce/GetProductAvailabilityRequestMediator.jsp" />
        </_config:preinvokemediator>
        <_config:postinvokemediator
            mediatorImpl="com.ibm.commerce.foundation.services.invocation.internal.impl.JSPMessageInvocationMediatorImpl">
            <_config:property name="url"
                value="http://localhost:80/webapp/wcs/stores/IBM.WC.Compose/mediation/SterlingCommerce/GetProductAvailabilityResponseMediator.jsp" />
        </_config:postinvokemediator>
    </_config:action> 
```

我们在检查库存时遇到的异常是

```
0000003f commands      I com.ibm.commerce.inventory.facade.server.commands.ComposeDOMInventoryAvailabilityCmdImpl callGetInventoryAvailabilityService CWXFR0031E: Failed to read the file "wc-component-client.xml" due to "com.ibm.commerce.foundation.services.invocation.internal.impl.JSPMessageInvocationMediatorImpl incompatible with com.ibm.commerce.foundation.internal.client.services.invocation.spi.MessageInvocationMediator".
                             com.ibm.commerce.foundation.common.exception.ComponentConfigurationException: CWXFR0031E: Failed to read the file "wc-component-client.xml" due to "com.ibm.commerce.foundation.services.invocation.internal.impl.JSPMessageInvocationMediatorImpl incompatible with com.ibm.commerce.foundation.internal.client.services.invocation.spi.MessageInvocationMediator".
at com.ibm.commerce.foundation.common.config.ComponentConfiguration.loadConfigServices(ComponentConfiguration.java:452)
at com.ibm.commerce.foundation.common.config.ComponentConfiguration.initialize(ComponentConfiguration.java:205)
at com.ibm.commerce.foundation.common.config.ComponentConfiguration.<init>(ComponentConfiguration.java:124)
at com.ibm.commerce.foundation.common.config.ComponentConfigurationRegistry.loadComponentConfiguration(ComponentConfigurationRegistry.java:293)
at com.ibm.commerce.foundation.common.config.ComponentConfigurationRegistry.getComponentConfiguration(ComponentConfigurationRegistry.java:258)
at com.ibm.commerce.foundation.internal.client.services.invocation.impl.DefaultInvocationServiceSourceImpl.getComponentConfiguration(DefaultInvocationServiceSourceImpl.java:65)
at com.ibm.commerce.foundation.internal.client.services.invocation.impl.DefaultInvocationServiceSourceImpl.getAction(DefaultInvocationServiceSourceImpl.java:145)
at com.ibm.commerce.foundation.internal.client.services.invocation.InvocationServiceFactory.createAction(InvocationServiceFactory.java:107)
at com.ibm.commerce.foundation.internal.client.services.invocation.InvocationService.invoke(InvocationService.java:76)
at com.ibm.commerce.foundation.client.facade.bod.AbstractBusinessObjectDocumentFacadeClient.sendBusinessObjectDocument(AbstractBusinessObjectDocumentFacadeClient.java:421)
at com.ibm.commerce.inventory.facade.client.ExternalInventoryFacadeClient.getInventoryAvailability(ExternalInventoryFacadeClient.java:91)
at com.ibm.commerce.inventory.facade.server.commands.ComposeDOMInventoryAvailabilityCmdImpl.callGetInventoryAvailabilityService(ComposeDOMInventoryAvailabilityCmdImpl.java:343)
at com.ibm.commerce.inventory.facade.server.commands.ComposeDOMInventoryAvailabilityCmdImpl.getInventoryAvailabilityFromDOM(ComposeDOMInventoryAvailabilityCmdImpl.java:320)
at com.ibm.commerce.inventory.facade.server.commands.ComposeDOMInventoryAvailabilityCmdImpl.execute(ComposeDOMInventoryAvailabilityCmdImpl.java:990)
at com.ibm.commerce.inventory.facade.server.commands.FetchInventoryAvailabilityCmdImpl.performExecute(FetchInventoryAvailabilityCmdImpl.java:1468)
at com.ibm.commerce.foundation.internal.server.command.impl.CommandTarget.executeCommand(CommandTarget.java:66)
at com.ibm.websphere.command.TargetableCommandImpl.execute(TargetableCommandImpl.java:139)
at com.ibm.websphere.command.CacheableCommandImpl.execute(CacheableCommandImpl.java:138)
at com.ibm.commerce.foundation.server.command.bod.AbstractGetBusinessObjectDocumentCmdImpl.performExpression(AbstractGetBusinessObjectDocumentCmdImpl.java:282)
at com.ibm.commerce.foundation.server.command.bod.AbstractGetBusinessObjectDocumentCmdImpl.performExecute(AbstractGetBusinessObjectDocumentCmdImpl.java:145)
at com.ibm.commerce.foundation.server.command.bod.BusinessObjectCommandTargetImpl.executeCommand(BusinessObjectCommandTargetImpl.java:112)
at com.ibm.websphere.command.TargetableCommandImpl.execute(TargetableCommandImpl.java:139)
at com.ibm.websphere.command.CacheableCommandImpl.execute(CacheableCommandImpl.java:138)
at com.ibm.commerce.foundation.server.command.bod.BusinessObjectDocumentProcessor.processBusinessObjectDocument(BusinessObjectDocumentProcessor.java:199)
at com.ibm.commerce.inventory.facade.server.InventoryFacadeImpl.getInventoryAvailability(InventoryFacadeImpl.java:49)
at com.ibm.commerce.inventory.facade.server.EJSLocalStatelessInventory_65d6ce99.getInventoryAvailability(EJSLocalStatelessInventory_65d6ce99.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:599)
at com.ibm.commerce.foundation.internal.client.services.invocation.impl.LocalEJBInvocationBindingImpl.invoke(LocalEJBInvocationBindingImpl.java:173)
at com.ibm.commerce.foundation.internal.client.services.invocation.InvocationService.invoke(InvocationService.java:113)
at com.ibm.commerce.foundation.client.facade.bod.AbstractBusinessObjectDocumentFacadeClient.sendBusinessObjectDocument(AbstractBusinessObjectDocumentFacadeClient.java:421)
at com.ibm.commerce.inventory.facade.client.AbstractInventoryFacadeClient.getInventoryAvailability(AbstractInventoryFacadeClient.java:130)
at com.ibm.commerce.inventory.facade.client.AbstractInventoryFacadeClient.getInventoryAvailability(AbstractInventoryFacadeClient.java:281)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:599)
at com.ibm.commerce.foundation.internal.client.taglib.config.GetDataConfig$DataTypeConfig.invokeClientFacadeMethod(GetDataConfig.java:863)
at com.ibm.commerce.foundation.internal.client.taglib.GetDataHandler.execute(GetDataHandler.java:733)
at com.ibm.commerce.foundation.internal.client.taglib.GetDataTag.doTag(GetDataTag.java:388)
at com.ibm._jsp._CatalogEntryInventoryStatus._jspService(_CatalogEntryInventoryStatus.java:786)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
at org.apache.taglibs.standard.tag.common.core.ImportSupport.acquireString(ImportSupport.java:375)
at org.apache.taglibs.standard.tag.common.core.ImportSupport.doEndTag(ImportSupport.java:211)
at com.ibm._jsp._CachedProductOnlyDisplay._jspx_meth_c_import_1(_CachedProductOnlyDisplay.java:11982)
at com.ibm._jsp._CachedProductOnlyDisplay._jspService(_CachedProductOnlyDisplay.java:1367)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
at org.apache.taglibs.standard.tag.common.core.ImportSupport.acquireString(ImportSupport.java:375)
at org.apache.taglibs.standard.tag.common.core.ImportSupport.doEndTag(ImportSupport.java:211)
at com.ibm._jsp._ProductDisplay._jspx_meth_c_import_5(_ProductDisplay.java:7139)
at com.ibm._jsp._ProductDisplay._jspService(_ProductDisplay.java:1188)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:354)
at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)
at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
at com.ibm.commerce.struts.ECActionServlet.processRequest(ECActionServlet.java:215)
at com.ibm.commerce.struts.ECActionServlet.doGet(ECActionServlet.java:157)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
at com.ibm.commerce.campaigns.filter.CampaignsFilter.doFilter(CampaignsFilter.java:148)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.commerce.likeminds.filter.LikeMindsFilter.doFilter(LikeMindsFilter.java:183)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.commerce.dynacache.filter.CacheFilter$2.run(CacheFilter.java:376)
at com.ibm.commerce.dynacache.filter.CacheFilter.doFilter(CacheFilter.java:507)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.commerce.webcontroller.RuntimeServletFilter.doFilterAction(RuntimeServletFilter.java:367)
at com.ibm.commerce.webcontroller.RuntimeServletFilter.access$0(RuntimeServletFilter.java:247)
at com.ibm.commerce.webcontroller.RuntimeServletFilter$1.run(RuntimeServletFilter.java:210)
at com.ibm.commerce.webcontroller.RuntimeServletFilter.doFilter(RuntimeServletFilter.java:231)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

引起：java.lang.ClassCastException：com.ibm.commerce.foundation.services.invocation.internal.impl.JSPMessageInvocationMediatorImpl 与 com.ibm.commerce.foundation.internal.client.services.invocation.spi.MessageInvocationMediator 不兼容。 ibm.commerce.foundation.internal.client.services.invocation.metadata.InvocationServiceConfiguration.getMessageInvocationMediator(InvocationServiceConfiguration.java:175) 在 com.ibm.commerce.foundation.internal.client.services.invocation.metadata.InvocationServiceConfiguration.parseElement(InvocationServiceConfiguration .java:106) 在 com.ibm.commerce.foundation.internal.common.config.node.AbstractConfigNodeImpl.load(AbstractConfigNodeImpl.java:78) 在 com.ibm.commerce.foundation.internal.common.config.AbstractServiceConfigurationImpl.loadConfig （AbstractServiceConfigurationImpl.java：88) 在 com.ibm.commerce.foundation.common.config.ComponentConfiguration.loadConfigServices(ComponentConfiguration.java:445) ... 140 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:26:30.207

我相信您使用了错误版本的 JSPMessageInvocationMediatorImpl 尝试使用包名称中带有客户端的版本。com.ibm.commerce.foundation.services.internal.client.services.invocation.impl.JSPMessageInvocationMediatorImpl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:50:04.457

我得到了这个在我的桌面上工作，但按照说明进行操作。我仍然会联系 IBM 软件支持。

# c# - 在 notifyIcon 向 contextMenu 项添加一个函数

> ID：12437751
> 
> 赞同：4
> 
> 时间：2012-09-15T13:25:31.477
> 
> 标签：c#, contextmenu, notifyicon

我对应用程序使用 an`contextMenu1`和 an `notifyIcon1`。当应用程序进入时`Tray Icon`，我将按`Right Click`，将出现一个菜单。

代码是这样的（我只添加了 2 项进行测试）：

```
contextMenu1.MenuItems.Add("View");
contextMenu1.MenuItems.Add("Exit");

notifyIcon1.ContextMenu = contextMenu1; 
```

在这一刻，在菜单中我只看到不做任何事情的项目。

我如何添加一个函数，比如`private void exit()`. `contextMenu1.MenuItems.Add("Exit")`当我按下该`Exit`项目时，关闭我的应用程序（示例）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T13:33:26.973

还有第二个参数可`Add`让您分配事件处理程序：

```
contextMenu1.MenuItems.Add("Exit", ExitApplication);
// or using an anonymous method:
contextMenu1.MenuItems.Add("Exit", (s,e) => Application.Exit()); 
```

在第一个示例中，ExitApplication 是您的事件处理程序：

```
private void ExitApplication(object sender, EventArgs e) 
{
    // exit..
} 
```

如果愿意，您还可以构造`MenuItem`第一个并在构造函数中分配事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T05:29:30.507

我假设您有一个 Windows 窗体和一个按钮（名称：btnShowMessage）。当您双击按钮时，您将获得一个事件处理程序“ **btnShowMessage_Click** ”。此外，您还有一个带有**ContextMenuStrip**的通知图标。您甚至在上下文菜单条中还有一个菜单选项（名称：btnContextOpenMsg）。您可以使用以下步骤来实现您的要求：

下图是为了让您清楚地理解：

1.  转到上下文菜单 --> 选择**btnContextOpenMsg**

2.  按 F4 打开属性表

3.  单击属性表顶部的“**事件”按钮**
4.  单击“**单击**”并通过单击“...”展开单击事件旁边的下拉列表
5.  从下拉列表中选择**btnShowMessage_Click 。**
6.  保存后编译代码。
7.  当您最小化您的应用程序时，您应该会看到您的通知（系统托盘）菜单。
8.  单击“显示消息”选项，使其执行与按钮相同的功能。

[![在此处输入图像描述](../Images/9fa46ebb45b702e47751d09c9dd7940a.png)](https://i.stack.imgur.com/xu5iA.png)

# java - 在 jar 中加载图像

> ID：12437752
> 
> 赞同：0
> 
> 时间：2012-09-15T13:25:44.140
> 
> 标签：java, image, jar, resources, embedded-resource

我正在使用 eclipse，我使用以下代码从文件夹加载我的图像。

```
getClass().getResource("/images/image.jpg").getFile()) 
```

图像文件夹位于项目文件夹中的 bin 文件夹内。在eclipse中加载时它工作正常，但是当我将它导出到jar时它不会加载。我尝试将图像文件夹放在 jar 中所有可能的位置，但它没有。

如何在 jar 中加载图像文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:29:11.837

您可以使用`getResourceAsStream()`方法来获取`InputStream`包含文件数据的实例。

**更新**：在类加载器的帮助下从 jar 加载文件。它可以为您提供任何内部资源（无论是图像文件还是声音文件或文本文件）的 InputStream（不是 FileInputStream）实例。文件写入不应该在 jar 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:04:54.243

用这个。这种方法`doesn't return immediately`。

```
public Image getImage(String img){
    return new ImageIcon(getClass().getResource(img)).getImage();
} 
```

如果你想从根目录加载`JAR`，那么

```
return new ImageIcon(getClass().getClassLoader().getResources(img)).getImage(); 
```

# linux - 我应该使用 `*` 更快地 chown 一个文件夹中的所有文件吗？

> ID：12437755
> 
> 赞同：0
> 
> 时间：2012-09-15T13:25:58.797
> 
> 标签：linux, ssh, chown

我在文件夹中有 50 多个脚本`cron-scripts`，我只想通过 root 权限使用 cron shell 执行它们。

```
# cd /var/www/html/cron-scripts/
# chown root:root scripts1.php
# chown fishman:users scripts1.php
# chown root:root scripts2.php
# chown fishman:users scripts2.php 
```

我应该用`*`上面的代码来代替具有相同效果的代码吗？

```
# cd /var/www/html/cron-scripts/
# chown root:root *
# chown fishman:users * 
```

如果我做了，如何删除root权限`chown root:root other-script.php`？

我的意思是我想让这个脚本向所有公众开放。(chown all-users:users other-script.php) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:32:05.123

如果你想让一个文件被“其他人”读取，你最好使用`chmod`参数`o+r`，这意味着“为其他人添加读取权限”。

```
chmod o+r foo.bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:03:42.730

如果要应用`chown`到目录中的所有文件，可以使用递归选项`chown -R user:group directory`，而不是`*`

# javascript - 在 PCRE 中是否存在诸如“否定交替”或“否定字符串类”、“否定字符类”之类的东西？

> ID：12437757
> 
> 赞同：0
> 
> 时间：2012-09-15T13:26:19.167
> 
> 标签：javascript, regex, pcre

好的，所以虽然该模式`[abc]`匹配单个字符`a`,`b`或`c`, 但该模式`[^abc]`匹配任何*不是* `a`,`b`或的给定字符`c`。

现在，如果我在上面的语句中用*字符串*替换*字符*，如果我还将第一个模式更改为交替构造，它仍然适用，例如`(abc|def|ghi)`. -- 它将匹配三个字符的连续字符串，等于`abc`、、`def`或`ghi`。我能做些什么来匹配任何*不*等于`abc`、、`def`或的三个字符的字符串`ghi`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:45:58.310

这是正则表达式的常见问题，简短的回答是“否”，正则表达式的操作方式不提供“除 ... 之外的任何 3 字母字符串”的说法。

*然而*，一些正则表达式引擎允许所谓的“负前瞻断言”。这些有点难以理解 -如果从技术上讲，[这个环视的解释](http://www.regular-expressions.info/lookaround.html)似乎很好地涵盖了它。

前瞻的重要之处在于它是“零宽度”——它不会“用完”任何字符串。因此，在 Javascript 中，您可以匹配这样的字符串：`'abc123ghi'.match(/abc(?!def)...ghi/)`-表示后面`(?!def)`不能有字母，但需要在那里表示应该有其他 3 个字符。`'def'``'abc'``...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:39:21.937

您可以使用否定前瞻来执行您所说的一些操作：

```
xyz(?!abc|def|ghi) 
```

这意味着“xyz 后跟除 abc、def 或 ghi 之外的任何内容”。它实际上并没有消耗源，所以在那之后你会把应该继续匹配的东西放在“xyz”之后。那是，

```
/xyz(?!abc|def|ghi)(\w*)/ 
```

匹配“xyzhello”，第一个捕获组将包含“hello”。

# objective-c - UISlider 与 TrackImage 上的图像

> ID：12437758
> 
> 赞同：2
> 
> 时间：2012-09-15T13:26:21.443
> 
> 标签：objective-c, uislider

我有 UISLider 和 setMinimumTrackImage 和 setMaximumTrackImage。两个图像具有相同的分辨率。如果我移动滑块...图像显示不正确。当我拖动滑块控制拇指时，它们正在移动。我试着用

```
UIImage * sliderBarImage1 = [UIImage imageNamed:@"slider_b"];
UIImage * sliderBarImage2 = [UIImage imageNamed:@"slider_w"];

sliderBarImage1 = [sliderBarImage1 stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0];
sliderBarImage2 = [sliderBarImage2 stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0];

[self.slider setMinimumTrackImage:sliderBarImage1 forState:UIControlStateNormal];
[self.slider setMaximumTrackImage:sliderBarImage2 forState:UIControlStateNormal]; 
```

有或没有 stretchableImageWithLeftCapWidth 都不正确。当我旋转手机时，轨道上的图像会被错误地缩放，因此图像中的信息会发生变化。类似于这篇文章中的图片：[如何在 UISlider 上放置图片？](https://stackoverflow.com/questions/7089484/how-to-place-image-on-uislider). 当我移动滑块时，图像开始移动，并且颜色在最小和最大轨道中没有重叠，从而产生丑陋的效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:23:34.130

避免拉伸图像变化

```
UIImage * sliderBarImage1 = [UIImage imageNamed:@"slider_b"];
UIImage * sliderBarImage2 = [UIImage imageNamed:@"slider_w"]; 
```

进入

```
UIImage * sliderBarImage1 = [[UIImage imageNamed:@"slider_b"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
UIImage * sliderBarImage2 = [[UIImage imageNamed:@"slider_w"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]; 
```

# php - 出生日期验证选择字段 PHP

> ID：12437762
> 
> 赞同：0
> 
> 时间：2012-09-15T13:28:08.370
> 
> 标签：php

我有一个表单，其中包含 3 个用于用户 dob 的选择字段（一个用于月、日、年）。提交表单后，我需要检查以确保这些日期字段*是否*已填写，数据是否一致。

该字段不是必需的，因此只有在填写所有字段*时才*由服务器处理数据。但是我很关心如何处理当用户提交一些已填写的字段和其他未填写的字段时的错误。因此，如果用户提交年份和月份，但没有提交日期，依此类推。

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:33:07.883

使用 PHP 的 [checkdate 函数](http://php.net/manual/en/function.checkdate.php)

```
bool checkdate ( int $month , int $day , int $year )

Checks the validity of the date formed by the arguments. 
A date is considered valid if each parameter is properly defined. 
```

传入他们输入的参数，它会检查它是否是一个有效的日期 - 除了告诉你空参数之外，它还会告诉你是否有人尝试 2 月 30 日。

您只需要检查是否填写了任何字段（因为它是可选的）；如果是这样，请将所有三个传递到`checkdate`.

# c# - 将 TTS 传送的音频流重定向到虚拟声卡

> ID：12437764
> 
> 赞同：2
> 
> 时间：2012-09-15T13:28:23.473
> 
> 标签：c#, speech, text-to-speech

我开发了一个程序，可以将语音从一种语言翻译成另一种语言（你说英语，我听到法语）。我用于那个 TTS `Microsoft.Speech;`。

如何重定向 TTS 提供的音频流以将其用作其他 VoIP 应用程序（例如 Skype）的麦克风？

我发现很多程序可以做到这一点，但没有一个是 .NET 解决方案。

您知道如何使用 C#、C++ 甚至 C 配置虚拟声卡吗？

# android - 修复 R 后不再显示的按钮无法解析为变量错误

> ID：12437773
> 
> 赞同：0
> 
> 时间：2012-09-15T13:29:44.423
> 
> 标签：android, android-layout, android-button

在执行 Project > Clean 后，我遇到了可怕的“R 无法解析为变量”错误。我将问题追溯到我的 main.XML 文件（不是 java 中的典型 import.R）。它在我的 LinearLayout 末尾给出了“错误解析 XML”的错误。要修复它，我必须清除 main.XML 中的所有代码，保存更改，然后重新输入。那固定的R无法解决。但是，我的按钮在图形布局图像中或在设备上运行时不再可见。我在顶部有一个仍然可见的编辑文本，但它下面的按钮不再显示。Project > Clean 没有修复它，退出并重新启动 Eclipse 没有修复它，输入一个无害的字符串或添加另一个按钮并保存没有修复它。我的 gen 文件在那里，它显示了布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:23:26.590

Aske B. 用他提供的链接为我回答了这个问题，XML 中存在问题。

# python - TypeError 不能腌制函数对象（Django 缓存）

> ID：12437774
> 
> 赞同：3
> 
> 时间：2012-09-15T13:29:47.460
> 
> 标签：python, django, caching, django-orm, django-cache

为什么第一个示例抛出`TypeError (can't pickle function objects)`而第二个没有，我想这与 QuerySet 评估（Django 1.4）有关？

```
def get_or_set_foo_cache():
    if not cache.get('foo'):
        foo = Foo.objects.annotate(bar_count=Count('bar')).filter(bar_count__gte=1)
        print type(foo) # prints <class 'django.db.models.query.QuerySet'>
        cache.set('foo', foo, 60 * 15)
        return foo
    return cache.get('foo') 
```

**示例 2**

```
def get_or_set_foo_cache():
    if not cache.get('foo'):
        foo = Foo.objects.all()
        print type(foo) # prints <class 'django.db.models.query.QuerySet'>
        cache.set('foo', foo, 60 * 15)
        return foo
    return cache.get('foo') 
```

如果我用列表理解设置 foo 它可以工作：

```
foo = [obj for obj in Foo.objects.annotate(bar_count=Count('bar')).filter(bar_count__gte=1)] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T10:36:10.347

Queryset 不是结果对象的列表。它是一个惰性求值的对象，当您第一次尝试读取其内容时会运行其查询。但是当您从控制台打印它时，它的输出与对象列表相同。所以大多数人认为它们是简单的列表。

在第二个示例中，您将查询集转换为列表。这就是它起作用的原因。你也可以做

```
foo = list(Foo.objects.annotate(bar_count=Count('bar')).filter(bar_count__gte=1)) 
```

它也会起作用。

如果您以后不需要它们作为 Foo 对象。我建议使用 values 或 values_list 运算符。这将提供更快的结果和更小的内存占用。( [http://www.yilmazhuseyin.com/blog/dev/django-orm-performance-tips-part-2/](http://www.yilmazhuseyin.com/blog/dev/django-orm-performance-tips-part-2/) )

# c - GCC：在 Windows 上编译 OpenCL 主机

> ID：12437776
> 
> 赞同：4
> 
> 时间：2012-09-15T13:29:54.937
> 
> 标签：c, gcc, compilation, mingw, opencl

我只是想尝试在 Windows 下使用 OpenCL。

***摘要*****：**当我尝试编译（使用命令）出现**“ `undefined reference to`”错误。**`gcc my.o -o my.exe -L "C:\Program Files (x86)\AMD APP\lib\x86_64" -l OpenCL`

* * *

## 我的代码

```
#include <CL/cl.h>
#include <stdio.h>

int main(void) {   
    cl_platform_id platform;
    int err;

    err = clGetPlatformIDs(1, &platform, NULL);
    if(err < 0) {
        perror("There's No Platform!");
        exit(1);
    }

    /* Some more code... */

    system("PAUSE");
} 
```

## 生成文件

```
all: addition

addition:
    gcc -c -I "C:\Program Files (x86)\AMD APP\include" my.c -o my.o
    gcc my.o -o my.exe -L "C:\Program Files (x86)\AMD APP\lib\x86_64" -l OpenCL 
```

## 使用过的程序

*   MinGW的**`gcc`**
*   视觉工作室的**`nmake`**
*   AMD 的**OpenCL™ APP SDK**（我从那里获取 OpenCL 库和`CL.h`文件）

## APP SDK的文件夹结构

```
%>tree /F "C:\Program Files (x86)\AMD APP\lib\x86_64"
Auflistung der Ordnerpfade
Volumeseriennummer : D2DC-D765
C:\PROGRAM FILES (X86)\AMD APP\LIB\X86_64
    libOpenCL.a
    OpenCL.lib
    OpenVideo64.lib

Es sind keine Unterordner vorhanden

%>tree /F "C:\Program Files (x86)\AMD APP\include"
Auflistung der Ordnerpfade
Volumeseriennummer : D2DC-D765
C:\PROGRAM FILES (X86)\AMD APP\INCLUDE
├───CAL
│       cal.h
│       calcl.h
│       cal_ext.h
│       cal_ext_counter.h
│       cal_ext_d3d10.h
│       cal_ext_d3d9.h
│
├───CL
│       cl.h
│       cl.hpp
│       cl_d3d10.h
│       cl_ext.h
│       cl_gl.h
│       cl_gl_ext.h
│       cl_platform.h
│       opencl.h
│
└───OpenVideo
        OpenVideo.h
        OVDecode.h
        OVDecodeTypes.h
        OVEncode.h
        OVEncodeTypes.h 
```

## 错误信息

```
 gcc addition.o -o addition.exe -L "C:\Program Files (x86)\AMD APP\lib\x86_64" -l OpenCL
addition.o:addition.c:(.text+0x2d): undefined reference to `clGetPlatformIDs@12'
addition.o:addition.c:(.text+0x83): undefined reference to `clGetDeviceIDs@24'
addition.o:addition.c:(.text+0xc2): undefined reference to `clGetDeviceIDs@24'
collect2: ld returned 1 exit status
NMAKE : fatal error U1077: "C:\prog-x86\MinGW\bin\gcc.EXE": Rückgabe-Code "0x1"
Stop. 
```

## 我的问题

我的问题很简单：

*   为什么我的代码没有按预期编译？
*   我能做些什么来摆脱这个问题？

谢谢。

* * *

> ***更新：*****删除空格**后的错误消息，如@codaddict 的回答中所述。
> 
> *（生成文件）*
> 
> ```
> all: addition
> 
> addition:
>   gcc -c -I "C:\prog-x86\AMD-APP\include" addition.c -o addition.o
>   gcc addition.o -o addition.exe -LC:\prog-x86\AMD-APP\lib\x86_64 -lOpenCL 
> ```
> 
> *（贝壳数据）*
> 
> ```
> %>nmake
> 
> Microsoft (R) Program Maintenance Utility, Version 11.00.50727.1
> Copyright (C) Microsoft Corporation. Alle Rechte vorbehalten.
> 
>         gcc -c -I "C:\Program Files (x86)\AMD APP\include" addition.c -o addition.o
> addition.c: In function 'main':
> addition.c:14:9: warning: incompatible implicit declaration of built-in function 'exit' [enabled by d
> efault]
> addition.c:23:9: warning: incompatible implicit declaration of built-in function 'exit' [enabled by d
> efault]
>         gcc addition.o -o addition.exe -LC:\prog-x86\AMD-APP\lib\x86_64 -lOpenCL
> addition.o:addition.c:(.text+0x2d): undefined reference to `clGetPlatformIDs@12'
> addition.o:addition.c:(.text+0x83): undefined reference to `clGetDeviceIDs@24'
> addition.o:addition.c:(.text+0xc2): undefined reference to `clGetDeviceIDs@24'
> collect2: ld returned 1 exit status
> NMAKE : fatal error U1077: "C:\prog-x86\MinGW\bin\gcc.EXE": Rückgabe-Code "0x1"
> Stop.
> 
> %> 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T15:54:15.907

默认的 MinGW 发行版仅提供用于构建 x86 应用程序的工具。您不能链接到 OpenCL 库的 x64 版本。所以你要么必须使用[MinGW-w64](http://mingw-w64.org/ "MinGW-w64")要么使用 x86 版本（将库路径更改为 APP SDK 的 x86 子文件夹）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:48:45.253

尝试改变

```
-l OpenCL 
```

到

```
-lOpenCL 
```

在编译行中。

gcc的`-l`选项需要库的名称（不带 lib 前缀）就在它旁边，没有任何空格。还记得`-lm`在学校使用链接到`libm`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T04:01:09.660

Windows 10 上的 64 位 g++ 编译器也在 bin 文件夹中：

```
"C:\MinGW\bin\x86_64-w64-mingw32-g++.exe" 
```

所以这对我有用：

```
C:\MinGW\bin>x86_64-w64-mingw32-g++ "C:\Users\...\main.cpp" -o
C:\Users\...\saxpy  -L "C:\Program Files\...\x64" -lOpenCL -I
"C:\...\OpenCL\sdk\include" 
```

笔记：

1.  -o 输出名称
2.  -L 文件夹包含 OpenCL.lib
3.  -I 文件夹包含头文件，例如 CL/cl.h

# google-maps - 谷歌地图 - 如何在嵌入式地图上定位弹出地址气泡

> ID：12437782
> 
> 赞同：1
> 
> 时间：2012-09-15T13:30:54.420
> 
> 标签：google-maps

我有一个使用简单 iframe 代码嵌入的谷歌地图。我的问题是在桌面上的页面加载时弹出的地址气泡在屏幕的一半处。是否可以将其定位在页面加载上？请参阅以下屏幕：

![现在的样子](../Images/7e647218d1948f571c9bc8c0fd7cf2cb.png)

![我希望它看起来如何](../Images/cc913c93fe7f4fb15418770afe46f25d.png)

这是代码：

```
 <iframe frameborder="0" scrolling="yes" marginheight="0" marginwidth="0" src="Some map"></iframe><br /><small><a href="some map" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T13:19:13.577

我已经解决了，您必须在复制嵌入代码之前定位地图的显示方式。

# svn - 在 svn commit 之后，所有文件都有 root 所有者和组

> ID：12437784
> 
> 赞同：1
> 
> 时间：2012-09-15T13:31:05.013
> 
> 标签：svn, root

早些时候，我通过 FTP 客户端使用我的站点，并且我的所有文件都有所有者 user_ftp。现在我使用 SVN，提交后我的文件有所有者和组 root 和权限 000。

没问题，如果我从文件夹控制器、模型等更改文件，但是当我对文件 index.php 进行更改时 - 站点给出 500 内部服务器错误，我必须使用命令手动更改此文件的所有者和组

```
chown user_ftp:user_group index.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:08:13.433

Subversion 不跟踪存储库中的权限，除了执行位。如果您有一个 SVN 工作副本，其中包含 root 拥有的文件，那是因为您`svn checkout`以`svn update`root 身份进行了操作。不要那样做；SVN 中的*任何内容都不需要 root 访问权限。*

# mongodb - 何时在 MongoDB 上使用 CouchDB，反之亦然

> ID：12437790
> 
> 赞同：673
> 
> 时间：2012-09-15T13:32:19.850
> 
> 标签：mongodb, performance, comparison, couchdb, nosql

我被困在这两个 NoSQL 数据库之间。

在我的项目中，我将在数据库中创建一个数据库。例如，我需要一个创建动态表的解决方案。

因此用户可以创建具有列和行的表。我认为 MongoDB 或 CouchDB 都会对此有好处，但我不确定哪一个。我也需要有效的分页。

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2012-09-16T05:37:49.040

C、A&P（Consistency、Availability & Partition tolerance）中哪两个对你来说更重要？快速参考，[*NoSQL 系统的可视化指南*](http://blog.nahurst.com/visual-guide-to-nosql-systems)

*   MongoDB：一致性和分区容错
*   CouchDB：可用性和分区容错

一篇博文，[*Cassandra vs MongoDB vs CouchDB vs Redis vs Riak vs HBase vs Membase vs Neo4j 比较*](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)了每个 NoSQL 数据库的“*最佳使用*”场景。引用链接，

*   MongoDB：如果您需要动态查询。如果您更喜欢定义索引，而不是 map/reduce 函数。如果您需要在大型数据库上获得良好的性能。如果您想要 CouchDB，但您的数据更改太多，会填满磁盘。
*   CouchDB ：用于累积、偶尔更改的数据，在这些数据上运行预定义的查询。版本控制很重要的地方。

Riyad Kalla最近（2012 年 2 月）和更[全面的比较](https://plus.google.com/107397941677313236670/posts/LFBB233PKQ1)，

*   MongoDB：仅主从复制
*   CouchDB：主-主复制

*[A MongoDB Guy Learns CouchDB](http://openmymind.net/2011/10/27/A-MongoDB-Guy-Learns-CouchDB/)*的博客文章（2011 年 10 月）由一个尝试过两者的人评论说 CouchDB 的分页没有那么有用。

[Kristina Chodorow](http://www.kchodorow.com/blog/about/)（*MongoDB 背后团队的一部分*）的过时（2009 年 6 月）[基准测试](http://www.kchodorow.com/blog/2009/06/29/couchdb-vs-mongodb-benchmark/)，

 *我会选择 MongoDB。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：249
> 
> 时间：2015-02-18T03:29:06.743

最重要的答案使故事复杂化。

1.  如果您计划拥有一个移动组件，或者需要桌面用户离线工作，然后将他们的工作同步到服务器，那么您需要 CouchDB。
2.  如果您的代码仅在服务器上运行，请使用 MongoDB

就是这样。除非您需要 CouchDB 的（很棒的）复制到移动和桌面设备的能力，否则 MongoDB 目前具有性能、社区和工具优势。

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2016-06-04T16:38:02.073

非常老的问题，但它在谷歌之上，我不太喜欢我看到的答案，所以这是我自己的。

Couchdb 的功能远不止开发 CouchApps 的能力。大多数人在经典的 3 层 Web 架构中使用 CouchDb。

实际上，对于大多数人来说，决定因素是 MongoDb 允许使用类似 SQL 的语法进行临时查询，而 CouchDb 则不允许（您必须创建 map/reduce 视图，即使创建这些视图也会让一些人感到厌烦是快速应用程序开发友好的 - 它们与存储过程无关）。

为了解决在接受的答案中提出的问题：CouchDb 有一个很棒的版本控制系统，但这并不意味着它只适合（或更适合）版本控制很重要的地方。此外，couchdb 由于其仅附加特性（写入操作立即返回，同时保证不会丢失任何数据），因此对大量写入友好。

任何人都没有提到的一件非常重要的事情是 CouchDb 依赖于 b-tree 索引这一事实。这意味着无论你有 1 个“行”还是 200 亿个，查询时间都将始终保持在 10ms 以下。这是一个游戏规则改变者，它使 CouchDb 成为一个低延迟且易于阅读的数据库，这一点确实不容忽视。

公平地说，MongoDb 相对于 CouchDb 的优势在于工具和营销。他们拥有适用于所有主要语言和平台的一流公民工具，使入门变得容易，这添加到他们的临时查询中，使从 SQL 的过渡更加容易。

CouchDb 没有这种级别的工具——即使现在有很多库可用——但是 CouchDb 是作为 HTTP API 公开的，因此很容易用你喜欢的语言创建一个包装器来与之交谈。我个人喜欢这种方法，因为它避免了臃肿并允许你只取你想要的东西（接口隔离原则）。

所以我想说使用其中一个在很大程度上是他们的范式的舒适和偏好问题。对于某些人来说，CouchDb 方法“恰到好处”，但是如果在了解了数据库功能（在详尽的[官方指南](http://guide.couchdb.org/)中）之后，您没有“该死的”时刻，您可能应该继续前进。

如果您只想使用“正确的工具完成正确的工作”，我不鼓励使用 CouchDb。因为你会发现你不能那样使用它，你最终会生气并写博客文章，例如“CouchDb 中的连接在哪里？” 和“事务管理在哪里？”。事实上，Couchdb - 矛盾的是 - 非常透明，但同时需要范式转变和处理问题的方式的改变才能真正发光（并且真正起作用）。

但是一旦你做到了，它真的会得到回报。我个人需要非常充分的理由或项目的重大交易破坏者来选择另一个数据库，但到目前为止我还没有遇到任何问题。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2016-08-11T17:04:26.600

自己问这个问题？您将决定您的数据库选择。

1.  你需要**大师大师**吗？然后是 CouchDB。主要是 CouchDB 支持 master-master 复制，它预计节点会长时间断开连接。MongoDB 在那种环境中表现不佳。
2.  您需要**最大的 R/W 吞吐量**吗？然后是 MongoDB
3.  您是否需要最终**的单服务器持久性**，因为您将只有一个数据库服务器？然后是 CouchDB。
4.  您是否正在存储需要分片同时保持疯狂吞吐量的**海量数据集？**然后是 MongoDB。
5.  您需要数据的强**一致性**吗？然后是 MongoDB。
6.  您需要数据库的高**可用性**吗？然后是 CouchDB。
7.  您希望**多数据库**和多表/集合吗？然后是 MongoDB
8.  您有一个**移动应用离线用户**并希望将他们的活动数据同步到服务器？然后你需要 CouchDB。
9.  您需要种类繁多的**查询**引擎吗？然后是 MongoDB
10.  您需要大型**社区**来使用数据库吗？然后是 MongoDB

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2014-05-28T14:11:30.117

我总结了在那篇文章中找到的答案：

[http://www.quora.com/How-does-MongoDB-compare-to-CouchDB-What-are-the-advantages-and-disadvantages-of-each](http://www.quora.com/How-does-MongoDB-compare-to-CouchDB-What-are-the-advantages-and-disadvantages-of-each)

MongoDB：更好的查询、BSON 中的数据存储（更快的访问）、更好的数据一致性、多个集合

CouchDB：更好的复制，具有主到主复制和冲突解决，JSON 中的数据存储（人类可读，通过 REST 服务更好地访问），通过 map-reduce 进行查询。

所以总而言之，MongoDB 更快，CouchDB 更安全。

另外： http: [//nosql.mypopescu.com/post/298557551/couchdb-vs-mongodb](http://nosql.mypopescu.com/post/298557551/couchdb-vs-mongodb)

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2013-02-03T22:05:35.173

请注意 MongoDB 中稀疏唯一索引的问题。我已经成功了，解决方法非常麻烦。

问题是 - 你有一个字段，如果存在它是唯一的，并且你希望找到该字段不存在的所有对象。在 Mongo 中实现稀疏唯一索引的方式是，缺少该字段的对象根本不在索引中——它们无法通过对该字段的查询来检索——`{$exists: false}`只是不起作用。

我想出的唯一解决方法是使用特殊的 null 值族，其中空值被转换为连接到 uuid的特殊前缀（如**null: ）。**这是一个真正令人头疼的问题，因为在写入/查询/读取时必须注意与空值之间的转换。一个大麻烦。

我从未在 MongoDB 中使用过服务器端 javascript 执行（无论如何不建议这样做），并且当只有一个 Mongo 节点时，它们的 map/reduce 性能很差。由于所有这些原因，我现在正在考虑查看 CouchDB，也许它更适合我的特定场景。

顺便说一句，如果有人知道描述稀疏唯一索引问题的相应 Mongo 问题的链接 - 请分享。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-09-15T15:49:32.647

我相信你可以使用 Mongo（更熟悉它），并且很确定你也可以使用沙发。

两者都是面向文档的（基于 JSON 的），因此文档中没有“列”而是字段——但它们可以是完全动态的。

他们都这样做，您可能想查看其他要使用的因素：您关心的其他功能、受欢迎程度等。谷歌洞察力、indeed.com 职位发布将是查看受欢迎程度的方法。

您可以尝试一下，我认为您应该能够在 5 分钟内运行 mongo。*

# c++ - 令人困惑的输出

> ID：12437791
> 
> 赞同：2
> 
> 时间：2012-09-15T13:32:21.957
> 
> 标签：c++, return

下面给出的程序打印 x = 10 y = 0

```
#include<iostream>
using namespace std;

class Test
{
private:
  int x;
  int y;
public:
  Test (int x = 0, int y = 0) { this->x = x; this->y = y; }
  Test setX(int a) { x = a; return *this; }
  Test setY(int b) { y = b; return *this; }
  void print() { cout << "x = " << x << " y = " << y << endl; }
};

int main()
{
  Test obj1;
  obj1.setX(10).setY(20);
  obj1.print();
  return 0;
} 
```

但是如果我们替换

```
Test setX(int a) { x = a; return *this; }
Test setY(int b) { y = b; return *this; } 
```

和

```
Test &setX(int a) { x = a; return *this; }
Test &setY(int b) { y = b; return *this; } 
```

输出是 x = 10 y = 20 谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:34:56.493

当您返回一个普通对象而不是引用时，您将返回您调用该方法的对象的副本。`setY`作用于该副本（这是一个临时的），然后该副本被破坏。

当你返回一个引用时，所有的调用都在同一个对象上操作，所以你得到了你正在寻找的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:35:04.077

第一次调用`setX()`返回**临时副本**，`obj1`调用`setY()`修改临时副本。随后的调用`print()`显示状态，`obj1`并且由于在`obj1`成员`y`变量中从未被修改过，它保持为零。

当您用引用替换返回类型时，不会对调用`setX()`和`setY()`操作进行临时复制`obj`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T13:54:41.470

让我们回到面向对象编程的基础。

让我们用一个比喻——比如一辆公共汽车。

公共汽车具有某些可以更改的属性 - 例如燃料。

因此，如果您有一个功能（加满燃料），您不需要一辆与最后一辆完全相同且油箱已满的新巴士。

所以回到最初的问题。

```
Test setX(int a) { x = a; return *this; } 
```

应该读

```
void setX(int a) { x = a; } 
```

等等

您有相同的对象，但燃料可能已加满（或在这种情况下为 x）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T06:42:18.863

在第一种情况下，您按值返回对象，因此将创建并返回对象的副本。因此
obj1.setX(10) 将返回 test 的副本，而 .setY(20) 将在该副本上工作，这就是为什么它的效果不在 obj1 上。
而在第二种情况下，返回对 object 的引用，因此 .setY(20) 将在 obj1 本身上工作。因此输出。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-01-13T10:04:57.533

这个 pinter 包含一个对象的地址 在 setx fun 的第一种情况下，这个指针返回 x 并且不能同时返回 y 值，然后他发送 y 的副本而不是 y 的地址。在第二种情况下，这两个函数都不同，都有自己的 this 指针，所以它们发送 x 和 y 的地址

# debugging - 将 OCaml 转换为 F#：是否有像 Visual Studio 这样的带有 GUI 调试功能的 OCaml IDE

> ID：12437792
> 
> 赞同：8
> 
> 时间：2012-09-15T13:32:24.777
> 
> 标签：debugging, f#, ocaml

我正在将几个模块从 OCaml 转换为 F#。为了寻找错误并验证一些更细微的差异，我同时针对同一个测试用例运行两个版本。

对于 F#，我使用 Visual Studio 调试器，对于 OCaml，我使用 ocamldebug。由于 Visual Studio 是一个 GUI 而 ocamldebug 是一个命令行，因此进行比较需要比来回可视化扫描更多的注意力。

我想知道是否有任何 OCaml IDE 支持带有步进的 GUI 调试器，同时显示突出显示的源代码行和单独的窗口以显示值。

编辑

在杰克发布了一个答案后，我做了更多的工作，然后想起了为什么几个月前我这样做时没有选择一个。

我传递我找到的并继续使用 OCaml 命令行工具的原因是

1.  命令行工具随编译器一起提供，因此它们是最新的并且可以工作。有一些关于这些工具的文档，但老实说，我确实不得不花几个小时编写我自己的 ocamldebug 手册和示例来精通 ocamldebug。

2.  他们依赖[EMACS](http://www.gnu.org/software/emacs/)。不是EMACS，而是我；我只是讨厌它的工作方式。此外，我发现所有使用 EMACS 的工具都只是 ocamldebug 的包装器。因此，除了更多地记住命令之外，什么也没有得到。注意：EMACS 正在积极维护和更新。

3.  他们依赖于[Eclipse](http://www.eclipse.org/)。我经常使用 Eclipse 来处理 ANTLR，但我每隔几年才制作一个系统，并且对它有很好的注释，所以值得我花时间。一旦我让 Eclipse 为主要的 ANTLR 版本工作，我多年都不会再更新它。对于我计划调试 OCaml 的少量时间，成本太高了。注意：Eclipse 得到积极维护和更新。

4.  他们不进行调试。由于 OCaml 的 GUI 工具很少，即使是增强的编辑器对某些人来说也是一个好处。目前不适合我。

5.  该工具/插件已多年未维护。

这不是 OCaml 的贬低，只是我找到的细节。我对 OCaml 没有意见，我只是希望我能更高效地使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:57:09.510

我认为大多数人只是[`ocamldebug`](http://caml.inria.fr/pub/docs/manual-ocaml/manual030.html)在 emacs 中使用 OCaml 调试器（）（有关详细信息，请参阅该页面的底部）。

我不知道它是否支持调试（还），但[TypeRex OCaml Programming Studio](http://www.typerex.org/index.html)看起来是一个有趣的项目。

最后，您可以尝试一些旧的、未维护的 Eclipse 插件（例如，[Camelia](http://camelia.sourceforge.net/)），尽管我怀疑它们已经陈旧太久，在这一点上没有多大用处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T02:08:40.283

我找不到一个 OCaml GUI 调试器，它与使用 F# 的 Visual Studio 具有相同的功能，满足我的要求。

如果有人确实找到了一个或创建了一个并将其发布为答案，我很乐意让他们接受投票。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T19:43:52.847

> 我想知道是否有任何 OCaml IDE 支持带有步进的 GUI 调试器，同时显示突出显示的源代码行和单独的窗口以显示值。

在 4 年的休息之后，我现在才刚刚回到 OCaml 和 Linux，但是，最后我看了一下，Linux 的 GUI 库很差，而 OCaml 的互操作性很差，所以没有人在 OCaml 中编写非平凡的 GUI 应用程序。

# ruby-on-rails-3 - Rails 引擎与 ruby gem 有何不同？

> ID：12437795
> 
> 赞同：0
> 
> 时间：2012-09-15T13:32:50.240
> 
> 标签：ruby-on-rails-3

我正在阅读：[http ://edgeguides.rubyonrails.org/plugins.html](http://edgeguides.rubyonrails.org/plugins.html)

听起来很棒。我没有抱怨。但是显示的示例我认为我可以只使用普通的红宝石宝石。Rails 引擎能做什么而 Ruby gem 不能？

这可能是一个不好的方式来表达这个问题。使用 Rails 引擎很容易做到而仅使用 Ruby gem 很难做到的例子有哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:37:33.397

gem 是一段捆绑在一起的代码，可以很容易地分发代码，尤其是开源项目和插件。rails 引擎基本上是一个迷你 rails 应用程序，它可以安装或包含在父 rails 项目中。一些使用 gems 分发的 Rails 引擎（很常见）。[设计](https://github.com/plataformatec/devise)就是一个例子。

# jquery - 按类名过滤返回的 $.post 数据

> ID：12437796
> 
> 赞同：-1
> 
> 时间：2012-09-15T13:32:57.633
> 
> 标签：jquery

我有这个 html，我在发布后返回：http: [//jsfiddle.net/thiswolf/H8HTX/](http://jsfiddle.net/thiswolf/H8HTX/)

我只对 div 中的内容感兴趣，`class one`我正在尝试使用

```
success: function(html){

               var ifilter = jQuery(html).find('.one').html();
               alert(ifilter);

  } 
```

使用此代码，我无法严格获取第一类 div 下的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:37:50.400

首先`add the html received in response to DOM`，然后应用过滤器。过滤器不适用于字符串。通过 find 方法得到需要的 html 后，将添加的 html 删除。

```
success: function(html){             
           $('#someelementid').html(html); 
           var ifilter = $('#someelementid').find('.one').html();
           alert(ifilter);
           $('#someelementid').html(''); 
} 
```

# c# - 如何将对象从一个方法初始化为类中的另一种方法？

> ID：12437798
> 
> 赞同：2
> 
> 时间：2012-09-15T13:33:12.330
> 
> 标签：c#, class, methods

在一个类中，我有 2 种方法。在方法 1 中我创建了一个对象，但我不能在方法 2 中使用相同的对象。

为什么？请帮忙举个简单的例子。

编码太大，所以我给出了布局

```
public class Sub
{
}

public class DataLoader
{
    public void process1()
    {
        Sub obj = new Sub();
    }

    public void process2()
    {
        // here I can't use the object
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T13:41:08.793

这不起作用的原因是[**范围**](http://msdn.microsoft.com/en-us/library/aa691132%28v=vs.71%29.aspx)。只能从声明它的块中访问局部变量。要从多个方法访问它，请添加一个字段*或**将*其作为*参数*传递给另一个方法。

**场地：**

```
class YourClass
{
    object yourObject;

    void Method1()
    {
        yourObject = new object();
    }

    void Method2()
    {
        int x = yourObject.GetHashCode();
    }
} 
```

**范围：**

```
class YourClass
{
    void Method1()
    {
        Method2(new object());
    }

    void Method2(object theObject)
    {
        int x = theObject.GetHashCode();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:36:21.700

你应该在你的类中使用成员变量。

```
public class DataLoader
{
    private Sub mySub;

    public void Process1()
    {
        mySub = new Sub();
    }

    public void Process2()
    {
        if(mySub == null) 
            throw new InvalidOperationException("Called Process2 before Process1!");            

        // use mySub here
    }
} 
```

阅读不同的变量范围（特别是在这种情况下的实例变量）。您还可以将您的对象作为参数传递，例如[他们的回答](https://stackoverflow.com/a/12437877)中提到的 codesparkle 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T13:59:46.543

简短的回答（没有看到你的代码）是创建的对象`Method1`在`Method2`.

这里已经有一些很好的答案可以向您展示如何解决您的特定问题。但这里真正的答案是让您自己熟悉*Scope*的概念。它是编程的基本部分，更多地了解它会帮助你很多。

有很多关于这个主题的好文章和视频。这个[视频](http://lecturesnippets.com/2011/07/06/visual-c-2010-variable-scope/)是一个很好的开始。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T13:36:40.660

您必须将对象设置为类字段，然后您可以从类的每个方法访问它。

# java - 在 Java 中将 MP3 转换为 PCM

> ID：12437804
> 
> 赞同：1
> 
> 时间：2012-09-15T13:33:53.827
> 
> 标签：java, mp3, media-queries, javasound, pcm

我想用 Java 将 MP3 文件转换为 PCM。

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T22:12:44.310

*   获取[`mp3plugin.jar`](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&resourcekey=0-miuzcGB8fsXn2EQh3sVolA)JMF 的。
*   将其添加到应用程序的运行时类路径中。为 MP3 提供解码器 SPI。
*   从Java Sound 中获取[`AudioInputStream`](http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioInputStream.html)MP3 。[`AudioSystem`](http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html)
*   使用 将其转换为 PCM [`getAudioInputStream(AudioFormat,AudioInputStream)`](http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream-javax.sound.sampled.AudioFormat-javax.sound.sampled.AudioInputStream-)。

# iphone - 发布需要用户注册的 iphone 应用程序

> ID：12437808
> 
> 赞同：0
> 
> 时间：2012-09-15T13:34:21.330
> 
> 标签：iphone, ios, ipad, ipod

我创建了要求用户在打开应用程序之前注册和登录的 iPhone 应用程序。此应用程序已被 App Store 拒绝，他们给了我以下消息：

> 我们发现您的应用要求客户注册个人信息才能访问非基于帐户的功能，这不符合 App Store 审核指南。
> 
> 应用程序在允许访问与用户无关的应用程序功能和内容之前不能要求用户注册。需要共享个人信息的用户注册必须是可选的或与帐户特定的功能相关联。此外，请求的信息必须与功能相关。

我在这个应用程序中付出了所有的努力和时间。所以，我的问题是：是否有任何解决方案可以让 App Store 接受我的应用而不改变其结构？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:39:42.053

你有两个选择：

1.  对应用程序进行必要的更改。
2.  联系 Apple，并说明您的应用程序为何需要用户注册，以及该应用程序确实符合规则。

如果应用程序实际上符合规则，选项 2 效果最好，但根据应用程序实际执行的操作，可能存在灰色区域。不幸的是，这个选项的结果也可能与沟通技巧密切相关——所以在打电话或邮寄苹果之前准备好你的论据。

# mysql - REGEXP - 只选择包含字母和句号的行

> ID：12437814
> 
> 赞同：8
> 
> 时间：2012-09-15T13:34:42.970
> 
> 标签：mysql

我一直在尝试编写此查询，我需要选择一列只有字母 (az) 和句号的行。

我试过这个，但它不工作：

```
SELECT * FROM table WHERE (c1 REGEXP '[^a-zA-Z\.]') = 0 
```

这个通常在 PHP 中工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-15T13:37:51.850

尝试：

```
SELECT * FROM table WHERE c1 REGEXP '^[a-zA-Z.]+$' 
```

锚点`^`并`$`确保您匹配整个字符串而不是其中的一部分。接下来，字符类`[a-zA-Z.]`匹配单个大写/小写字母或句点。The`+`是前一个子正则表达式的一个或多个重复的量词，因此在这种情况下，它允许我们匹配一个或多个句点或大写/小写字母。

[有关 MySQL 中正则表达式使用的更多信息](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)

# python - 将字符串添加到python中字符串列表中的第一项

> ID：12437816
> 
> 赞同：-1
> 
> 时间：2012-09-15T13:35:03.063
> 
> 标签：python, list

对不起标题，但我相信这是我想要做的。

所以我有一个列表列表。子列表中的每个项目都是一个时间和一个数字。如...

```
[['01:16:01 PM', '80.31'], ['01:17:01 PM', '80.32'], ['01:18:01 PM', '80.30'], ['01:19:01 PM', '80.30'], ['01:20:01 PM', '80.30'], ['01:21:01 PM', '80.32'], ['01:22:01 PM', '80.32'], ['01:23:01 PM', '80.31'], ['01:24:01 PM', '80.41'], ['01:25:01 PM', '80.38']] 
```

我想在时间元素之前（或之后）将日期添加到列表中的每个元素。所以...日期=“2012-09-15”

所以每个元素都会像这样

```
[['2012-09-15 01:16:01 PM', '80.31'], ['2012-09-15 01:17:01 PM', '80.32']... etc] 
```

我一直在谷歌搜索，但没有找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T13:40:20.010

```
myList = [['01:16:01 PM', '80.31'], ['01:17:01 PM', '80.32'], ['01:18:01 PM', '80.30']]
updateList =  [ ["2012-09-15 "+x[0], x[1]] for x in myList] 
```

导致：

```
[['2012-09-15 01:16:01 PM', '80.31'],
['2012-09-15 01:17:01 PM', '80.32'],
['2012-09-15 01:18:01 PM', '80.30']] 
```

# java - 使用计时器在 Java 游戏中交替 2 个图像

> ID：12437818
> 
> 赞同：3
> 
> 时间：2012-09-15T13:35:08.117
> 
> 标签：java, image, swing, timer, alternate

我正在用 Java 做一个简单的游戏。我有一个名为“Drawer”的类，用于每 50 毫秒重新绘制我保存在 BufferedImages 数组中的图像。

我有一种方法可以在 Player 类中将播放器转换为巨大的播放器，代码是：

```
 public void playerEvolution() {
    for (int i = 0; i < 5; i++) {
        this.setImageIndex(15);
        try {
            Thread.sleep(500);
            this.setImageIndex(17);
            Thread.sleep(500);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    this.isHuge();
} 
```

我想要每 0.5 秒交替 2 张图像，但在 GamePanel 中不交替任何图像，并且仅在花费 2.5 秒（0.5 * 5 循环）时出现最终图像。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:36:48.187

如果这是一个 Swing 应用程序（你没有说），请使用 javax.swing.Timer 或 Swing Timer。永远不要调用`Thread.sleep(...)`主 Swing 事件线程，称为事件调度线程或 EDT。在 Timer 的 ActionListener 中有一个 int count 变量，每次`actionPerformed(...)`调用时都会递增，如果 count > 到最大计数（这里是 5 * 2，因为你来回交换），则停止 Timer。

例如，

```
public void playerEvolution() {
  int delay = 500; // ms
  javax.swing.Timer timer = new javax.swing.Timer(delay , new ActionListener() {
     private int count = 0;
     private int maxCount = 5;

     @Override
     public void actionPerformed(ActionEvent evt) {
        if (count < maxCount * 2) {
           count++;
           // check if count is even to decide 
           // which image to use, and then
           // do your image swapping here
        } else {
           ((javax.swing.Timer)evt.getSource()).stop();
        }
     }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:42:47.093

也许您正在寻找动画。看[`https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/graphics/Animation.java`](https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/graphics/Animation.java)

# android - 设置新文本时android中的按钮重复

> ID：12437822
> 
> 赞同：1
> 
> 时间：2012-09-15T13:35:58.303
> 
> 标签：android, button, actionbarsherlock

我正在使用 android 支持库，以便能够使用来自 Froyo 的片段和 Sherlock 扩展来显示 ActionBar。

我有一个显示三个 textView 和一个按钮的片段，我希望能够根据 Intent 的内容动态地更改按钮文本。问题是当我调用 button.setText(String text) 时，会出现第二个按钮。但是，我在单击它们中的每一个时都调用了 button.getId() ，并且 Id 是相同的。我不知道为什么会这样，所以我很感激一些帮助。

该应用程序在装有 Android 2.3.3 的三星 Galaxy S 上运行。我无法上传屏幕截图，因为我还没有足够的声誉:(

这是代码：

**分段**

```
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;

import com.actionbarsherlock.app.SherlockFragment;
import com.parse.ParseUser;
import com.tiempoderodar.egdf.EGDF_App;
import com.tiempoderodar.egdf.R;
import com.tiempoderodar.egdf.security.Constants;

/**
 * @author Daniel Leal López
 *
 */
public class ChapterDetailsFragment extends SherlockFragment{

    private Button b;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i("ChapterDetailsFragment", "Created");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        ParseUser user = EGDF_App.getUser(); 
        b = (Button) getSherlockActivity().findViewById(R.id.buttonWatchChapter);
        if (user != null){

            String chapterNumber = "";
            Bundle extras = getSherlockActivity().getIntent().getExtras();
            String s = extras.getString(Constants.CHAPTER_NUMBER_PARSE);
            if((s != null)&&(!s.equals(""))){
//              tvNumber.setText(s);
                chapterNumber = "Chapter_" + s;
                Log.i("Properties", s);
            }
            String seen = user.getString(chapterNumber);
            if((seen != null)&&(!seen.equals(""))&&(seen.equals(Constants.USER_CHAPTER_SEEN))){
                b.setText("Second text: "+getString(R.string.watch_chapter_button_text));
                Log.i("BUTTON CHANGED", "Text changed to watch");
            }               
            else if((seen != null)&&(!seen.equals(""))&&(seen.equals(Constants.USER_CHAPTER_NOT_SEEN))){
                b.setText("Second text: " + getString(R.string.buy_chapter_button_text));
                Log.i("BUTTON CHANGED", "Text changed to buy");
            }else{
                Log.w("DEV ERROR", "Chapter text not obtained");
            }
        }else{
            Log.w("DEV ERROR", "ParseUser is null in EGDF_App!!!");
        }

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.chapter_details, container, false);
        return view;
    }

    public void setText(String item) {
        getSherlockActivity().getSupportActionBar().setTitle(item);
    }

    public void setButtonText(String text){
        b.setText(text);
    }

} 
```

**活动**

```
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

import com.actionbarsherlock.app.SherlockFragmentActivity;

public class ChapterDetailsActivity extends SherlockFragmentActivity {

    private Bundle extras;
    MediaPlayer mMediaPlayer;

    private String chapterNumber;
    private boolean isChapterSeen;
    //  private int duration;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        setTheme(R.style.Theme_Sherlock_Light_DarkActionBar);

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_chapter_details);

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            ChapterDetailsFragment details = new ChapterDetailsFragment();
            details.setArguments(getIntent().getExtras());
            getSupportFragmentManager().beginTransaction().add(
                    android.R.id.content, details).commit();
        }

    }

    public void watchChapter(View view){
        Log.i("Button", "Watch chapter button PRESSED");
        Button b = (Button) view;

        Log.d("BUTTON PARENT VIEW", b.getParent().getClass().getName());
        Log.d("BUTTON ID", String.valueOf(b.getId()));
        String loadChapter = getString(R.string.load_chapter_button_text);
        String watchChapter = getString(R.string.watch_chapter_button_text);
        String buyChapter = getString(R.string.buy_chapter_button_text);

    }

    @Override
    protected void onPause() {
        Log.i("Activity lifecycle", "On pause called");
        super.onPause();
    }

    @Override
    protected void onStop() {
        Log.i("Activity lifecycle", "On stop called");
        super.onStop();
    }

    @Override
    protected void onDestroy() {
        Log.i("Activity lifecycle", "On destroy called");
        super.onDestroy();
        EGDF_App.releaseMediaPlayer();
    }

    @Override
    protected void onResume() {
        Log.i("Activity lifecycle", "On resume called");
        super.onResume();
    }

    @Override
    protected void onStart() {
        Log.i("Activity lifecycle", "On start called");
        super.onStart();
    }
} 
```

**活动布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/chapterDetailsFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.tiempoderodar.egdf.content.ChapterDetailsFragment" />

</LinearLayout> 
```

**片段布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewChapterNumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30dip" />

    <TextView
        android:id="@+id/textViewChapterSeason"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30dip" />

    <TextView
        android:id="@+id/textViewChapterSinopsis"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30dip" />

    <TextView
        android:id="@+id/textViewChapterCredits"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30dip" />

    <Button 
        android:id="@+id/buttonWatchChapter"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/watch_chapter_button_text"
        android:layout_gravity="center"
        android:onClick="watchChapter"/>

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:03:22.003

I think I might have found the problem. I was calling

```
b = (Button) getSherlockActivity().findViewById(R.id.button); 
```

but it should be

```
b = (Button) getView().findViewById(R.id.button); 
```

With that change it works correctly

# profiling - 如何分析网络爬虫？

> ID：12437824
> 
> 赞同：0
> 
> 时间：2012-09-15T13:36:11.217
> 
> 标签：profiling, web-crawler

我有 2 个略有不同的网络爬虫版本。我想比较它们的性能（特别是爬取给定域所花费的时间）。我考虑了这两个选项：

1.  一次运行一个，比较所用时间。
2.  同时运行它们，比较所用时间。

1 的缺点是，运行第二个时网络可能会更慢/更快。2 的缺点是，一个可以劫持大部分带宽并且似乎工作得更快，而另一个在相同带宽的情况下可以工作得更好。

我不知道如何（如果可能）限制每个进程的带宽（可能还有 cpu 使用率？）。如果我能做到这一点，我会给每个人公平的份额并同时运行它们，这样它就可以工作了。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:21:16.647

选择选项 1 并采集大量样本。运行一个星期，然后运行另一个一周。网络带宽当然会有所不同，但应该平均下来。

另一方面，您可能希望找到一种方法来限制您的爬虫，使其不会消耗您的所有资源。一旦你有了它，选项 2 将成为更好的选择。

# c# - 无法平移画布 - Silverlight

> ID：12437830
> 
> 赞同：0
> 
> 时间：2012-09-15T13:36:44.467
> 
> 标签：c#, wpf, silverlight

我看过很多帖子，它们演示了如何在画布中移动对象，但我需要的是一种移动 1\. 整个画布及其每个孩子或 2\. 手动移动每个对象的方法（这当然是不可取的）

我已将 Canvas 放入 ScrollViewer。我的实际问题是：我正在尝试使用 ScaleTransform 缩放画布，但在缩放后，我还需要将滚动查看器移动到一个点，以便在缩放后单击的点位于中心。

我试过 Canvas.SetLeft() 和 Canvas.SetTop() 但运气不好..

任何想法？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:33:21.187

这可能对您正在做的事情有用：

[http://autoscroller.codeplex.com/](http://autoscroller.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:28:54.710

`ScrollToVerticalOffset`您可以使用和与 ScrollViewer 通信以使其内容滚动到特定偏移量`ScrollToHorizontalOffset`。

您需要通过考虑“视口”的大小（即您可以看到的内容区域）和缩放级别来计算正确的偏移量。

*   [http://go4answers.webhost4life.com/Example/center-zoom-wpf-problem-159135.aspx](http://go4answers.webhost4life.com/Example/center-zoom-wpf-problem-159135.aspx)

# objective-c - iOS的沙物理

> ID：12437833
> 
> 赞同：2
> 
> 时间：2012-09-15T13:36:51.423
> 
> 标签：objective-c, ios, cocoa, game-physics, collision

使沙粒在视图中动画的最佳方法是什么？本质上，我想用小沙粒填充 iOS 设备屏幕的一半，然后允许用户旋转和摇晃设备来指示沙子的位置。

假设我以前从未做过任何物理编程，谁能推荐一个教程或告诉我它是如何完成的？

谢谢，

询问。

**更新：** 我现在遇到了[这个](http://gamma.cs.unc.edu/granular/)（虽然我的应该是 2D 的） - 我怎样才能将类似的东西带入我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:36:51.773

使用[空间索引](http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves)来查找最近的粒子以检查碰撞，并使用[积分技术](http://codeflow.org/entries/2010/aug/28/integration-by-example-euler-vs-verlet-vs-runge-kutta/)在力（加速度）-速度-位置之间进行转换，并且仅使用重力作为外力，这将为您提供沙盒。

如果您使用碰撞后检测，您将需要[从粒子势中选择一个良好的排斥力。](http://en.wikipedia.org/wiki/Lennard-Jones_potential)

我建议您使用截断 Lennar-Jones 势和 Verlet-Integrator。比 Runge-Kutta 的更容易，比 Euler 的更精确。因为它用于分子动力学。你不需要使用其他力量。只需使用排斥力、重力和壁力。

如果您的模拟器中有项目符号，则可以对它们使用欧拉积分。我认为这对于自由落体但不碰撞的沙粒是可以接受的。在它们相互关闭之后，最好使用 Verlet 或 Runge-Kutta。

我上面提到的所有假设你的积分步骤是如此之大以至于能量不守恒甚至减少。如果你的积分足够好以节省能量，你需要给你的粒子[摩擦力](http://en.wikipedia.org/wiki/Friction)来让沙子变慢，否则你的粒子就会到处爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:35:44.490

如果你想在 iphone 上制作它，那么你必须考虑某些优化和技巧，因为 iPhone 不能真正模拟水或沙子。

你的诀窍是你的大部分工作都是画场景。

在 Box2D 中使用比沙粒大 10-20 倍的球创建场景。

iPhone 将能够模拟它。

然后你应该每个球画10-20个沙粒。

每一帧你都可以检查球是否与其他球发生碰撞。

如果球没有碰撞，那么这些沙粒就在空气中，你应该将它们拉到彼此一定距离上。

如果球与其他球碰撞，则粒子应一起渲染

您还可以检测边缘并在顶部渲染滑翔机沙边框。

# php - 在插入时获取当前插入行的 id？

> ID：12437835
> 
> 赞同：0
> 
> 时间：2012-09-15T13:37:02.707
> 
> 标签：php, sql

> **可能重复：**
> [在 SQL 中检索插入的行 ID](https://stackoverflow.com/questions/4734589/retrieve-inserted-row-id-in-sql)

有什么方法可以在插入后立即获取插入的行 id 而无需进行选择查询？基本上，这个想法是这样的，我有两个表，一个产品，第二个存储有 3 列 - id / productId / count 。我需要在 productId 中插入我在此查询之前插入的产品的产品 ID。所以例如 -

```
Product with id 1. 
```

我将它插入到一个表中，例如产品，它生成 id 1。我不做选择，但是在我做另一个插入之后，它将在表中存储这些数据 -

`id - 1`/ `productId - 1`（取自先前使用 AI 生成 id 1 的查询） / `count = 0`。

希望你明白我的意思。

编辑：我正在使用 MYSQL 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:38:56.760

是的，在 MySQL 中，只需在第二个查询中使用[LAST_INSERT_ID()即可。](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:37:51.820

使用`mysql_insert_id();`这是 php 的一个函数，它将返回最后插入的自动增量类型属性的 id

# html - HTML5 网络存储：不同的网站可以在用户的 计算机上覆盖彼此的数据吗？

> ID：12437836
> 
> 赞同：18
> 
> 时间：2012-09-15T13:37:06.303
> 
> 标签：html, local-storage, web-storage

关于 HTML5 存储的概念，我有几个问题。我浏览了相同的 w3c 规范、书籍和教程，但我仍然对某些概念有点不清楚：

假设我访问网站 A。一些 JavaScript 在我的浏览器中运行，它设置了一个键值对，比如`('username','deepak')`. 然后我访问网站 B，它还在本地存储中添加了一个键值对作为`('username','mahalingam')`.

*   他们将如何区分？
*   网站 B 会覆盖网站 A 在我的本地存储中设置的值吗？
*   我们如何确保网站不会删除我所有的本地存储？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T13:55:27.360

## 本地存储隐私

网站 A 和网站 B 将拥有自己的本地存储。通常，您必须将某些信息存储在服务器数据库中并将其同步到本地存储。

我会使用本地存储作为缓存来获取数据一次并根据我想要使缓存失效的时间间隔以一定的间隔更新它。例如，当用户 A 注销而用户 B 想要登录时，您可以与服务器同步。

查看 Web Storage 的 HTML5 规范中的[隐私](http://dev.w3.org/html5/webstorage/)部分。

更多信息信息和资源在这里：[HTML5 Rocks](http://www.html5rocks.com/en/features/storage)。

## 测试

我建议使用本地服务器设置，例如 Linux/Mac/Windows、Apache、MySQL、PHP 堆栈 (LAMP/MAMP/WAMP) 在 localhost (127.0.0.1) 上进行测试。

由于 HTML5 规范建议，大多数浏览器会将每个窗口和选项卡的每个域限制为**5 MB 。**

我还没有尝试过，但是您也许可以看看在 Apache 的**httpd.conf**中更改本地主机的端口号（为此，找到`Listen`并更改与之关联的端口），看看这是否可以解决问题。基本上，您在不同的端口号下运行每个测试以获得每个测试的整个存储限制。

另一种方法是创建一个 Chrome 扩展程序。您可以在此处阅读有关此内容的更多信息：

*   [管理 HTML5 离线存储](https://developers.google.com/chrome/whitepapers/storage#table)
*   [清单文件](http://developer.chrome.com/extensions/manifest.html)

# html - 菜单不在位

> ID：12437837
> 
> 赞同：0
> 
> 时间：2012-09-15T13:37:32.613
> 
> 标签：html, css, xhtml

我有一个非常奇怪的 html 问题。我的主菜单不在它的位置。

```
<html>
  <head>
    <link rel="stylesheet" href="style5.css" type="text/css">
  </head>
  <body>
  <div id="outer">
    <ul>
      <li class="current"><a href="#">Home</a></li>
      <li><a href="#">content</a></li>
      <li><a href="#">search</a></li>
      <li><a href="#">more</a></li>
    </ul>
    <div id="clear"></div>
  </div>

  <div id="wrapper">
    <div id="pic">
      <img src="logo.png">
      <div id="content">
        <p> Secure Search </p>
      </div>
    </div>

    <div id="forms">
      <form>
        <input type="text" name="submit" size="78" style="font-size:20pt;"/>
      </form>
    </div>
  </div>

  </body>
</html> 
```

这是CSS

```
body {
  margin: 0;
  padding: 0;
  background-color: white;
}

h1,h2,h3 {
  margin: 0;
  padding: 0;
}

p,ul,ol,li {
  margin: 0;
  padding: 0;
}

#outer {
  background-color: rgb(67,68,71);
}

#outer ul {
  list-style: none;
  margin-left: 5px;
  border-left: 1px solid;
}

#outer li {
  float: left;
}

.current {
  background-color: rgb(56,63,137);
}

#outer a {
  width: 90px;
  display: block;
  text-transform: uppercase;
  text-decoration: none;
  text-align: center;
  font-weight: bold;
  color: white;
  border-right: 1px solid;
  padding: 5px;
}

#outer a:hover {
  color: black;
  background-color: white;
}

#outer .current a:hover {
  color: white;
  background-color: inherit;
}

#clear {
  clear: both;
}

#wrapper {
  width: 960px;
  margin: 0 auto;
}

#pic {
  margin-top: 100px;
  margin-left: 389px;
  position: relative;
}

#content {
  position: absolute;
  top: 60px;
  left: 90px;
}

#forms {
  margin-top: 50px;
} 
```

现在你可能会问，为什么在编码的早期阶段我没有注意到我的菜单没有放置。好吧，事情是我在编码期间使用了包装器 div 的边框，一切都到位了，但是一旦我删除了边框，整个事情就崩溃了。

我认为这与未正确清除浮动导致 pic div 搞砸一切有关。我会非常感谢您的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:52:05.100

我不知道您所说的“不在其位置”是什么意思，但删除边框表明您在[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)时遇到问题。

如果是这种情况，您可以通过添加`overflow: auto`或添加`padding: 1px 0`到删除边框的规则来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:54:22.447

更换你的

```
<div id="clear"></div> 
```

和

```
<br id="clear"> 
```

甚至更好地将其从 and id 更改为 class。这样你就可以多次使用它。由于某种原因，它不适用于 div。但是“br”也更短，所以我还是更喜欢那个。

# vim - 执行外部命令后进入插入模式

> ID：12437844
> 
> 赞同：2
> 
> 时间：2012-09-15T13:38:05.937
> 
> 标签：vim

这是我的映射：

```
autocmd FileType java inoremap <F5> <ESC>:upd\|!javac %<CR>:!java %:r<CR> 
```

它同时做三件事：保存、编译和运行 java 文件。它按预期工作，但我想从中获得更多。

实际上，当`.class`文件运行并且我按任意键进入编辑器窗口时，我会保持在正常模式，这是我不希望的。我想一按任意键就进入插入模式。

我尝试附加`i`到映射：

```
autocmd FileType java inoremap <F5> <ESC>:upd\|!javac %<CR>:!java %:r<CR>i 
```

但这甚至没有时间查看`.class`文件的输出（即它保存、编译、执行并进入插入模式而不暂停）。

我想做我的第一个映射正在做的所有事情，以及在按下任意键后更改为插入模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:13:31.213

您可以通过 等待按键`getchar()`。将以下内容附加到您的映射中：

```
:call getchar()<CR> 
```

或者，带有消息：

```
:echo "Press any key"<Bar>call getchar()<CR> 
```

`i`之后，您可以通过或重新进入插入模式`:startinsert`

```
:echo "Press any key"<Bar>call getchar()<Bar>startinsert<CR> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:00:10.193

尝试使用`:start<cr>`or`:norm i<cr>`最后。

# python - 如何从pymongo中的列表中查询元素

> ID：12437849
> 
> 赞同：12
> 
> 时间：2012-09-15T13:38:19.163
> 
> 标签：python, search, pymongo

`pymongo`尝试查询和元素时向我抛出错误`tags`

```
db.users.find({"pseudo":"alucaard"}).distinct("produit_up")
Out[1]: 
[{u'abus': 0,
  u'avctype': u'image/jpeg',
  u'date': u'2012-09-15',
  u'description': u'le fameux portable solide',
  u'id': u'alucaard134766932677',
  u'namep': u'nokia 3310',
  u'nombre': 1,
  u'orientation': u'portrait',
  u'photo': ObjectId('5053cd4e3a5f3a0990da8a61'),
  u'prix': 1000,
  u'tags': [u'solide', u'le', u'fameux', u'portable'],
  u'vendu': False}]

list(db.users.find({"solide":{"$in":{"document_up.tags"}}}))

Traceback (most recent call last):
 File "C:\Python27\lib\site-packages\IPython\core\interactiveshell.py", line 2746, in  run_code exec code_obj in self.user_global_ns, self.user_ns
File "<ipython-input-1-8dff98261d7a>", line 1, in <module>
list(db.users.find({"solide":{"$in":{"document_up.tags"}}}))
File "C:\Python27\lib\site-packages\pymongo\cursor.py", line 778, in next
if len(self.__data) or self._refresh():
File "C:\Python27\lib\site-packages\pymongo\cursor.py", line 729, in _refresh
self.__uuid_subtype))
InvalidDocument: Cannot encode object: set(['document_up.tags']) 
```

注意：对于 pymongo 用户来说只是一个技巧，如果您的用户的文本大小有限，只需使用集合将其转换，将集合转换为列表：例如：

```
phrase = "hi you, how are you, am i using this" 
```

1.  第一步：删除逗号或点以避免正则表达式搜索。
2.  第二，用于`phrase.split()`分词。
3.  将此添加到 a`set`以避免重复的单词。
4.  将集合转换为`list`
5.  制作一个包含一些将从列表中删除的单词的字典是个好主意，例如“how”、“you”、“me”……但它会进行大量计算。

希望这个想法会有所帮助。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-15T13:52:12.917

你的查询是错误的。尝试更接近：

```
list(db.users.find({"document_up.tags":{"$in":["solide"]}})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-09T00:33:21.240

9 年后，我在寻找类似答案时偶然发现了这个页面。由于唯一的其他答案似乎很可疑，尽管有投票，我将这个答案添加为其他访问者的资源。

这个参考似乎是合适的：[https ://docs.mongodb.com/manual/tutorial/query-arrays/#query-an-array-for-an-element](https://docs.mongodb.com/manual/tutorial/query-arrays/#query-an-array-for-an-element)

> 要查询数组字段是否包含至少一个具有指定值的元素，请使用过滤器`{ <field>: <value> }`where `<value>`is the element value。
> 
> 以下示例查询所有文档，其中 tags 是一个包含字符串“red”作为其元素之一的数组： `cursor = db.inventory.find({"tags": "red"})`

明确地说，您可以使用`list(db.users.find({"document_up.tags":"solide"}))`当前，因为尝试将单个值与数组匹配会隐式返回包含该值（至少一个实例）的数组的记录。该参考资料对特定案例进行了非常有用的详细说明。

# c# - 是否可以每次都在公共字段块中的字段之前不写“public”？

> ID：12437851
> 
> 赞同：3
> 
> 时间：2012-09-15T13:38:32.687
> 
> 标签：c#, field, access-modifiers

我有一门有很多领域的课程，其中大约一半是公开的。现在它看起来像这样：

```
public int someint1, someint2, someint3;
public string str1, str2;
public bool[] boolArray;
public List<string> listOfStrings; 
```

…等等。之后还有一些私有领域。

是否可以`public`为所有这些公共领域只写一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:39:24.123

不，没有办法做到这一点`C#`，您必须为*每个*字段声明其访问方式。一般来说*，默认情况下*`C#`倾向于限制访问，所以即使*不写任何东西*，成员也会像那些一样结束。**`private`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:41:16.220

不，没有，您应该考虑使用属性而不是公共字段 -[为什么没有人接受 C# 中的公共字段？](https://stackoverflow.com/questions/480627/why-wont-anyone-accept-public-fields-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:43:33.580

如果您不声明访问修饰符（私有、受保护、内部、公共），则代码将采用私有（因此最受保护的）。否则，你必须自己声明，所以输入你需要的！**

# objective-c - 在其他 UIViewController 中使用 UITextField.text 时的 EXC_BAD_ACCESS

> ID：12437852
> 
> 赞同：0
> 
> 时间：2012-09-15T13:38:42.587
> 
> 标签：objective-c, ios, xcode

我有两个视图控制器，一个`UITableView`用于显示数据，一个用于添加数据。控制器有`UITableView`一些演示行。演示行从包含`UITableView`控制器所有数据的类中显示。使用这个类，我们可以添加来自所有控制器的行。当我从添加数据控制器添加行**而不使用`UITextField.text`**并返回到`UITableView`控制器时，该行添加并且所有工作正常。当我从中添加数据时`UITextField.text`，`UITableView`控制器崩溃了`EXC_BAD_ACCESS`。

**一些代码：**

**包含所有数据的 add 方法的类：**

```
- (BCItem *)createCafeWithCafeName:(NSString *)name
                     cafeChain:(NSString *)chain
                    cafeStreet:(NSString *)street
                      cafeCity:(NSString *)city
                      cafeInfo:(NSString *)info
                       cafeLog:(NSString *)log
                       cafeLig:(NSString *)lig
{
    BCItem *p = [[BCItem alloc] initWithCafeName:name cafeChain:chain cafeStreet:street cafeCity:city cafeInfo:info cafeLog:log cafeLig:lig];

    [allCafesMutable addObject:p];

    return p;
} 
```

**添加方法：**

```
[[BCItemStore sharedStore] createCafeWithCafeName:name.text cafeChain:chain.text cafeStreet:street.text cafeCity:city.text cafeInfo:info.text cafeLog:log.text cafeLig:lig.text]; 
```

所有的`UITextField`都被释放。问题是什么？

**编辑：**

当我尝试从存储数据的类中获取数据时，应用程序崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:20:57.667

正如`@TomaszSzulc3`他在评论中指出的那样，问题是 UITextField 没有正确连接。因此，解决方案涉及重新连接这些字段。

# java - 用于在 Java 中构建增量树的数据结构

> ID：12437855
> 
> 赞同：0
> 
> 时间：2012-09-15T13:38:57.540
> 
> 标签：java

我想在 Java 中构建一个增量树，并在将其转换为 JSON 后在前端显示此树。如果用户选中或取消选中某个特定节点，则该特定节点下的所有节点都会受到影响。我应该使用哪种数据结构？在 apache commons 或 guava 中是否有任何可用的 Java 中的 ay 树实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:44:34.613

在纯 Java 中有来自 Swing 的实现查看[TreeNode 类](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/TreeNode.html)对于 JSON 的序列化，您可以使用例如[google-gson](http://code.google.com/p/google-gson/)。我不知道有任何一体化解决方案。

# android - 为什么不必要地调用 BroadcastReceiver ？

> ID：12437860
> 
> 赞同：1
> 
> 时间：2012-09-15T13:39:36.280
> 
> 标签：android, broadcastreceiver, phone-state-listener

如果 Internet 连接丢失，我的应用程序会向用户显示 AlertDialog。为此，我使用 BroadcastReceiver 不断检测网络连接并在没有可用网络时显示对话框。一切正常，如预期的那样。

当打入或打出电话时，问题就开始了。即使用户接听来电或拨出电话，AlertDialog（通知互联网连接）也会弹出。这会留下非常糟糕的用户体验。

谁能指导我为什么会这样？请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:50:16.617

好吧，每个网络运营商都一次提供**一个连接**。这意味着当您开始呼叫时，您的网络服务会关闭，而当没有呼叫时，它会启动。因此，当您拨打电话时，请检查设备本身中的 GPRS/网络符号是否不可用（离线）。

这就是您的广播接收器响应的原因。

希望这将帮助您解决问题。

# java - 编辑 Nimbus 外观和感觉核心文件

> ID：12437862
> 
> 赞同：0
> 
> 时间：2012-09-15T13:39:42.043
> 
> 标签：java, swing, look-and-feel, nimbus

我有 Nimbus 源文件（从 source.zip 中提取）。我如何改变它们而不是用它们创建一个新的 L&F？

我不想在运行时更改任何内容，但在编译我的程序并将我的 L&F 添加为资源之前。

# c++ - 内部函数被识别为指针

> ID：12437864
> 
> 赞同：1
> 
> 时间：2012-09-15T13:40:03.820
> 
> 标签：c++, function, pointers, function-pointers

当我尝试编译时，我收到两条错误消息，我想了一会儿，无法解决。有人可以阐明我的问题吗？

错误：

```
leeftijd.cc: In function ‘int main()’:
leeftijd.cc:50:49: error: invalid conversion from ‘int’ to ‘int (*)(int, int, int)’ [-fpermissive]
leeftijd.cc:10:9: error:   initializing argument 1 of ‘int leeftijd_in_maanden(int (*)(int, int, int), int, int, int)’ [-fpermissive] 
```

代码：

```
#include <iostream>  // Line one
//line two
#define PEILJAAR 2012   
#define PEILMAAND 9
#define PEILDAG 23

using namespace std;

int leeftijd_in_jaren(int _geboortejaar, int _geboortemaand, int _geboortedag); 
int leeftijd_in_maanden(int _leeftijd_in_jaren(int _geboortejaar, int _geboortemaand, int _geboortedag),
            int _geboortejaar, int _geboortemaand, int _geboortedag);

bool onjuiste_geboortedag(int _geboortedag, int _geboortejaar);
bool onjuiste_geboortemaand(int _geboortemaand, int _geboortejaar);
bool onjuiste_geboortejaar(int _geboortejaar);

int main()
{
        int geboortejaar, geboortemaand, geboortedag;   

    cout << " Geef uw geboortejaar" << endl;
    cin >> geboortejaar;
    if( onjuiste_geboortejaar(geboortejaar) )
    {
        cout << "U voldoet niet aan de eisen." << endl; 
        return 0;
    }  

    cout << " Geef uw geboortemaand" << endl;
    cin >> geboortemaand;
    if( onjuiste_geboortemaand(geboortemaand, geboortejaar) )
    {
        cout << "U voldoet niet aan de eisen." << endl;
        return 0;   
    } 

    cout << " Geef uw geboortedag" << endl;
    cin >> geboortedag;
    if( onjuiste_geboortedag(geboortedag, geboortejaar) )
    {
        cout << "U voldoet niet aan de eisen." << endl;
        return 0;
    } 

    cout << "U bent "
    << leeftijd_in_jaren(geboortejaar, geboortemaand, geboortedag)
    << " jaar en "
    << " maanden en uw leeftijd in maanden is "
    << leeftijd_in_maanden( leeftijd_in_jaren(geboortejaar, geboortemaand, geboortedag),
                geboortejaar, geboortemaand, geboortedag)
    << "."   << endl;
    return 0;
}

int leeftijd_in_jaren(int _geboortejaar, int _geboortemaand, int _geboortedag) 
{
    int _leeftijd_in_jaren;
    if(_geboortemaand < PEILMAAND || _geboortemaand == PEILMAAND && _geboortedag <= PEILDAG)
    {_leeftijd_in_jaren = PEILJAAR - _geboortejaar;}
    else{_leeftijd_in_jaren = PEILJAAR - _geboortejaar - 1;}
    return _leeftijd_in_jaren;
}

int leeftijd_in_maanden(int _leeftijd_in_jaren(int _geboortejaar, int _geboortemaand, int _geboortedag),
            int _geboortejaar, int _geboortemaand, int _geboortedag)
{
    int _leeftijd_in_maanden = 
    _leeftijd_in_jaren(_geboortejaar, _geboortemaand, _geboortedag) * 12 + _geboortemaand;
    return _leeftijd_in_maanden;
}

bool onjuiste_geboortejaar(int _geboortejaar) 
{return((PEILJAAR - _geboortejaar) < 10 || (PEILJAAR - _geboortejaar) > 100);}

bool onjuiste_geboortemaand(int _geboortemaand, int _geboortejaar)
{
    return( (PEILJAAR - _geboortejaar) == 10  && _geboortemaand > PEILMAAND || 
        (PEILJAAR - _geboortejaar) == 100 && _geboortemaand > PEILMAAND ||
        _geboortemaand < 0 || _geboortemaand > 12);
} 

bool onjuiste_geboortedag(int _geboortedag, int _geboortejaar)
{   
    return( PEILDAG <= _geboortedag  && (PEILJAAR - _geboortejaar) == 10 || 
    PEILDAG >= _geboortedag  && (PEILJAAR - _geboortejaar) == 100||
    _geboortedag < 0   || _geboortedag > 31); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:05:33.717

```
int leeftijd_in_maanden(int _leeftijd_in_jaren(int _geboortejaar, int _geboortemaand, int _geboortedag),int _geboortejaar, int _geboortemaand, int _geboortedag) 
```

以上是参数列表中的无效函数指针声明。

利用：-

```
int leeftijd_in_maanden(int (*funcpoint)(int , int , int ),int _geboortejaar, int _geboortemaand, int _geboortedag)
{
    int _leeftijd_in_maanden = 
    funcpoint(_geboortejaar, _geboortemaand, _geboortedag) * 12 + _geboortemaand;
    return _leeftijd_in_maanden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:31:54.730

事实上，参数列表中的函数声明是完全有效的。该规则类似于数组参数声明的规则；类型从“function ...”调整为“pointer to function ...”。

例如，下面的函数 foo() 有两个参数；第一个是 type `int*`，第二个是 type `void(*)(void)`，即指向函数的类型。

```
void foo(int not_really_an_array[20],
         void not_really_a_function(void))
{
}

int main() {
    int *int_ptr = 0;
    void (*func_ptr)(void) = 0;
    foo(int_ptr, func_ptr);
} 
```

问题代码中的错误不在 的声明中`leeftijd_in_maanden()`，而是在调用中：

```
...
<< leeftijd_in_maanden( leeftijd_in_jaren(geboortejaar, geboortemaand, geboortedag),
            geboortejaar, geboortemaand, geboortedag)
... 
```

第一个参数`leeftijd_in_jaren(geboortejaar, geboortemaand, geboortedag)`具有函数*调用*的形式；由于函数返回`int`，它是 type 的表达式`int`，而不是 . 所期望的指向函数的指针`leeftijd_in_maanden()`。

相反，您只需要传递函数的*名称*（隐式转换为指向函数的指针）：

```
...
<< leeftijd_in_maanden( leeftijd_in_jaren,
            geboortejaar, geboortemaand, geboortedag)
... 
```

如果您进行了更改（在第 50 行），程序将编译。（我不知道它在*语义上*是否正确，因为我看不懂任何标识符；它们是荷兰语，对吗？）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T14:00:44.700

函数声明不是函数的有效参数。此外，在您的情况下完全没有必要，因为您所做的只是 call `leeftijd_in_jaren`，这已经在`leeftijd_in_maanden`.

下次请尝试发布一个实际有用的[测试用例。](http://jcatki.no-ip.org/fncpp/TestCase)

# php - HTML5 地理定位第一次不起作用

> ID：12437865
> 
> 赞同：2
> 
> 时间：2012-09-15T13:40:10.907
> 
> 标签：php, javascript, jquery, html

真的希望有人可以帮助我解决这个问题，我似乎有这个 HTML5/Jquery 组合完美地工作，除了它需要刷新才能工作！

基本上，我使用 HTML5 地理定位将用户的纬度/经度存储在会话中，然后用它做一些其他的事情。之后我用它做什么不是问题，它实际上存储了让我悲伤的纬度/经度。

我正在使用的代码如下。我已经评论了我发现问题所在的地方。

任何帮助表示赞赏！

```
<?php
session_start();
$url = $_SERVER["REQUEST_URI"];
?>
<script src="modernizr.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  }
function showPosition(position)
  {
localStorage.lat = position.coords.latitude;
localStorage.lon = position.coords.longitude;

  }

$(document).ready(function(){
    if (Modernizr.geolocation) {
        getLocation();
        //If I run getLocation() again here it works first time
        //A bit of debugging shows that this is where the lat/long values are being lost
        $.get("savetosession.php", {lat: localStorage.lat, lon: localStorage.lon}, function(result){
            $.get("dothis.php", {url:<?php echo $url; ?>}, function(result){
                $("div").html(result);
            });
        });
    }
});

</script>
<div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:14:58.503

问题是在完成`$.get`之前执行`getLocation()`（因为 Javascript 是非阻塞的）。

你可以使用这样的回调：

```
<script>
        $(document).ready(function(){
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    localStorage.lat = position.coords.latitude;
                    localStorage.lon = position.coords.longitude;
                    $.get("savetosession.php", {lat: localStorage.lat, lon: localStorage.lon}, function(result){
                        $.get("dothis.php", {url:<?php echo $url; ?>}, function(result){
                            $("div").html(result);
                        });
                    });
                });
            } //endif
        });
</script> 
```

# jquery - 如何根据 URL 的开始方式将类添加到菜单项？

> ID：12437868
> 
> 赞同：0
> 
> 时间：2012-09-15T13:40:38.427
> 
> 标签：jquery, menu, addclass

在我的网站目录“foto”中，我有很多以 url“http://example.com/foto/article-name”或“http://example.com/tech/article-name”开头的文章

我有一个 URL 为“http://example.com/foto/”的菜单项。

如何在显示其中一篇文章时突出显示我的菜单项“FOTO”，以防这些文章没有菜单链接。换句话说，我想有一个条件：

如果 URL 以 "http://example.com/ **foto** /" 高亮菜单项**FOTO** 开头，或者如果 URL 以 "http://example.com/ **demo** " 高亮菜单项**VIDEO**开头，

这意味着文章和菜单项的 URL 可能不会以相同的 URL 开头。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:46:01.357

您可以执行以下操作：

```
var url = window.location.href; // Get the current URL

// Check for foto inside URL //
if (url.indexOf("foto") != -1​){
    alert('foto');

    // Add selected class to menu item //
    $('#menu_item_id').addClass('selected');
}​​​​​​​ 
```

然后，您可以简单地为其他菜单项标题添加额外的检查。

我希望这有帮助！

# css - Chrome 扩展 CSS 操作

> ID：12437869
> 
> 赞同：0
> 
> 时间：2012-09-15T13:40:49.190
> 
> 标签：css, google-chrome, scripting, google-chrome-extension

> **可能重复：**
> [我的 CSS 没有通过我的内容脚本注入](https://stackoverflow.com/questions/9721344/my-css-is-not-getting-injected-through-my-content-script)

我一直在尝试制作一个 Chrome 扩展程序，以在每次加载到选项卡时将谷歌的背景颜色更改为黑色。

我的 manifest.json 中有以下内容：

```
{
  "name": "Background to black",
  "manifest_version": 2,
  "version": "1.0",
  "description": "Google black",
  "permissions": ["tabs", "http://www.google.com/*"],
  "browser_action": {
    "default_icon": "icon.png"
  },
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["backgroundtoblack.css"],
      "run_at": "document_start",
      "all_frames": true
    }
  ]
} 
```

这在我的 backgroundtoblack.css 中：

```
body{
background: #000000;
} 
```

但是它对我不起作用，我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:17:49.470

这与清单文件无关，而与您的 CSS 文件有关。用这个替换你的CSS，

```
html, body {
    background: #000000 !important;
} 
```

扩展程序现在应该可以工作了。（在本地测试时有效）。

**注意：**我不得不改变你`matches`的一点，因为我使用 HTTPS Everywhere。如果 Chrome 默认使用 HTTPS 加载，您可能需要更改它。

# video - 如何制作视频或音频流

> ID：12437872
> 
> 赞同：1
> 
> 时间：2012-09-15T13:41:01.367
> 
> 标签：video, stream, video-streaming

我正在使用有线广播通过版本流式传输视频，因为这是我找到的最好的。无论如何，我不知道如何流式传输到我的网站，我的意思是像 livestream 或 Ustream 一样，我可以流式传输到我的网站中的文件，我知道有几种方式，如 rtmp、html、mms、ftp、.. 所以我必须做什么？

不知道能不能用这个网址：rtmp://website-ip:8080/live？

当我单击保存时，它会创建实时活页夹？

抱歉，我有点迷失在这个话题上，我在互联网上没有找到任何有用的信息。

![这是wirecast中的默认选项](../Images/c0b5df1814f1919d1591a40b62f5ba56.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:10:32.170

您不会“流式传输”到文件；如果您想要“实时”流式传输（即在向观众广播视频的同时进行录制），您必须运行可以处理 rtmp 协议的媒体服务器。该服务器将在您的 Web 主机上运行并进行配置，以便对指定地址的请求将由连接到您的实时录制设备的媒体服务器提供服务。设置此类服务器和设备非常复杂，因此通常最容易使用第三方提供商，如 Justin.tv 或 Ustream。

另一方面，如果您只需要提供预先录制的视频，那么任何可以提供文件的常规 HTTP 服务器都可以（即任何 Web 服务器）。您将需要使用网络视频播放器，可能基于 Flash 或基于 HTML5 视频，如 JWPlayer 或 Video.js，并将它们指向视频文件。

# iphone - 从 Nib 加载视图不会初始化插座 - Monotouch

> ID：12437876
> 
> 赞同：0
> 
> 时间：2012-09-15T13:41:07.923
> 
> 标签：iphone, ios, xamarin.ios, nib

嗨，我目前正在尝试从 NIB 文件动态加载视图，这是代码：

```
res1 = new View1();
var ptr = NSBundle.MainBundle.LoadNib("View1",res1,null).ValueAt(0);
res1 = Runtime.GetNSObject(ptr) as View1; 
```

res1 里面有一个按钮。按钮视图已初始化并位于 res1 视图内。

**但是我在 NULL 按钮上的界面构建器中创建的插座如何初始化插座？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:54:49.393

尝试使用这种方式：

```
 //parameter 2 should be a controller.
 var ptr = NSBundle.MainBundle.LoadNib("View1",this,null).ValueAt(0); 
 var res1 = new View1(ptr); 
```

因为 ValueAt 方法的返回类型是 IntPtr，并且您的视图有一个构造函数负责，它可以添加另一个视图。

# c# - RichTextbox 着色行为

> ID：12437880
> 
> 赞同：0
> 
> 时间：2012-09-15T13:41:22.713
> 
> 标签：c#, regex, windows, richtextbox

我目前正在尝试开发一种行为类似于 Notepad++s 的软件。关于“着色”部分，我使用正则表达式和一个包含每个单词的正则表达式和颜色的外部文件。

该文件如下所示：

```
<script&blue
/>&blue
\".*?\"&red 
```

然后，软件读取文件并通过在每个换行符处将其拆分来将其转换为字符串数组“string[]”。该数组称为“**校正器**”。然后我使用以下方法来查找和设置每个匹配正则表达式模式的单词的颜色：

```
foreach (string corrector in Correctors) {
    string[] spTxt = corrector.Split('&');

    Match matches = Regex.Match(rtb_Main.Text, spTxt[0]);
    Color color = Color.FromName(spTxt[1]);

    while (matches.Success)
    {
        rtb_Main.SelectionStart = matches.Index;
        rtb_Main.SelectionLength = matches.Length;

        rtb_Main.SelectionColor = color;
        matches = matches.NextMatch();
    }
} 
```

这就是问题发生的地方。该方法对数组'Correctors'中的最后一个字符串正常工作。然而; 似乎数组中的其他对象要么被覆盖，要么被忽略，因为与其模式匹配的单词没有被着色。

怎么了？

在此先感谢，
- 拉斯穆斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:12:21.423

编译时你没有得到任何错误。我的意思是说你是怎么得到的：

```
 while (matches.Success) 
```

应该是这样的。。

```
 // Use foreach loop.
            foreach (Match match in matches)
            {
                if(match.Success)
                {
                    //Change color here...
                }
            } 
```

# php - 关于如何在 PHP 中为单个帖子分配多个类别的方法？

> ID：12437886
> 
> 赞同：3
> 
> 时间：2012-09-15T13:42:27.983
> 
> 标签：php, mysql

我目前正在开发一个自定义 cms，用户可以将多个类别分配到单个帖子中。我的问题是：

1.  什么是正确的mysql表模式？
2.  您如何将多个选定的类别存储在博客文章表中？

如果您有澄清，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:45:45.480

1.  你在这里拥有的是多对多的关系。存储关系的标准方法是对类别和帖子使用连接表。该表将只有类别 ID 和帖子 ID。

2.  post 表将没有关于类别本身的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:56:58.747

1.  > 什么是正确的mysql表模式？

    一种方法是创建关系表：

    ```
    CREATE TABLE cms.Posts (
      PostID       SERIAL,
      PostContent  TEXT,
      PRIMARY KEY (PostID)
    ) Engine=InnoDB;

    CREATE TABLE cms.Categories (
      CategoryID   SERIAL,
      CategoryName VARCHAR(20),
      PRIMARY KEY (CategoryID)
    ) Engine=InnoDB;

    CREATE TABLE cms.PostCategories (
      PostID BIGINT UNSIGNED NOT NULL,
      CategoryID BIGINT UNSIGNED NOT NULL,
      PRIMARY KEY (PostID, CategoryID),
      FOREIGN KEY (PostID)     REFERENCES cms.Posts      (PostID),
      FOREIGN KEY (CategoryID) REFERENCES cms.Categories (CategoryID)
    ) Engine=InnoDB; 
    ```

2.  > 您如何将多个选定的类别存储在博客文章表中？

    你没有，你将它们存储在`PostCategories`表中：

    ```
    $dbh = new PDO('mysql:charset=utf8', $username, $password);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $dbh->prepare('INSERT INTO cms.Posts (PostContent) VALUES (?)')
        ->execute([$_POST['content']]);

    $qry = $dbh->prepare('
      INSERT INTO cms.PostCategories (PostID, CategoryID) VALUES (?, ?)
    ');

    $qry->bindValue(1, $dbh->lastInsertId());
    $qry->bindParam(2, $category);
    foreach ($_POST['categories'] as $category) $qry->execute(); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:48:05.573

每个人（包括我自己）似乎都在使用的解决方案是@rwilliams 所描述的。当查询仅限于单个标签时，这些方法效果很好。要查询 2 个标签（标记为个人和旅行），您需要使用联接。当查询变得更复杂时，这开始崩溃。我认为 MongoDB 将是一个更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T13:49:54.017

对于多对多关系，您可以将表格设计为

```
caegory table
    categoryId categorydescription

post table    
    postid     postText

a third table to link them    
    categoryId  postId 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T13:52:45.387

```
blog_posts
==========
id | 23
title | My title

categories
==========
id | 1
name | yogurt
// another row
id | 2
name | motor cycles

category_blog_post
==================
23 | 2
23 | 1 
```

显示博客文章我的标题被标记为关于酸奶和摩托车的条目

# algorithm - 给定一个排序数组，找到重复值的最大子数组

> ID：12437887
> 
> 赞同：4
> 
> 时间：2012-09-15T13:42:45.873
> 
> 标签：algorithm, complexity-theory, big-o

还有一个面试问题要求我在可能的最短计算时间内找到给定排序数组的最大可能重复值子数组。

```
Let input array be A[1 ... n]
Find an array B of consecutive integers in A such that:
for x in range(len(B)-1):
     B[x] == B[x+1] 
```

我相信最好的算法是将数组分成两半，然后从中间向外，然后从中间比较整数，然后从中间找到相同整数的最长应变。然后我将通过将数组分成两半并在两半上调用方法来递归调用该方法。

我的面试官说我的算法很好，但我对算法 O(logn) 的分析是不正确的，但从未有时间告诉我正确答案是什么。我的第一个问题是这个算法的 Big-O 分析是什么？（请尽可能多地展示工作！Big-O 不是我的强项。）我的第二个问题纯粹是出于好奇，是否有更省时的算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T14:07:50.517

对于这个问题，你能做的最好的就是一个`O(n)`解决方案，所以你的算法不可能既正确又`O(lg n)`.

例如，考虑数组不包含重复元素的情况。要确定这一点，需要检查每个元素，并且检查每个元素是`O(n)`.

这是一个简单的算法，它将找到重复元素的最长子序列：

```
start = end = 0
maxLength = 0
i = 0
while i + maxLength < a.length:
    if a[i] == a[i + maxLength]:
        while i + maxLength < a.length and a[i] == a[i + maxLength]:
            maxLength += 1
        start = i
        end = i + maxLength
    i += maxLength

return a[start:end] 
```

如果你有理由相信子序列会很长，你可以将初始值设置`maxLength`为一些启发式选择的值以加快速度，然后如果你没有找到更短的序列（即你最终得到`end == 0`after第一关。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:38:40.420

我想我们都同意，在最坏的情况下，所有的`A`都是唯一的或所有的`A`都是相同的，您必须检查数组中的每个元素以确定没有重复项或确定所有数组都包含一个数字。就像其他海报所说的那样，那将是`O(N)`。我不确定分治法在这方面对您的算法复杂性有多大帮助，尽管您可以通过使用递归来稍微简化代码。当您可以丢弃大部分输入（例如二进制搜索）时，分而治之确实有助于减少 Big O，但在您可能必须检查所有输入的情况下，它不会有太大不同。

我假设这里的结果是你只是返回你找到的最大 B 的大小，尽管你可以很容易地修改它来返回 B 。

因此，在算法方面，鉴于 A 已排序，我不确定是否会有比按顺序遍历数组更快/更简单的答案。似乎最简单的答案是有 2 个指针，一个从索引 0 开始，一个从索引 1 开始。比较它们，然后将它们都递增；每次它们相同时，您向上勾选一个计数器以提供当前大小，`B`当它们不同时，您将该计数器重置为零。您还为迄今为止找到的 B 的最大大小保留一个变量，并在每次找到更大的`B`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:42:03.110

在这个算法中，`n`元素被访问，每个被访问元素的计算次数是恒定的，所以运行时间是`O(n)`.

给定排序数组`A[1..n]`：

```
max_start = max_end = 1
max_length = 1
start = end = 1
while start < n
    while A[start] == A[end] && end < n
        end++
    if end - start > max_length
        max_start = start
        max_end = end - 1
        max_length = end - start
    start = end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T14:06:39.433

假设最长连续整数的长度仅为 1，您将扫描包含 n 个项目的整个数组 A。因此，复杂性不是根据 n，而是根据 len(B)。

~~不确定复杂度是否为 O(n/len(B))。~~

检查 2 边缘情况

~~- 当 n == len(B) 时，您会得到即时结果（仅检查 A[0] 和 A[n-1]~~ - 当 n == 1 时，你得到 O(n)，检查所有元素 - 在正常情况下，我懒得写算法来分析...

**编辑**

鉴于`len(B)`事先不知道，我们必须采取最坏的情况，即 O(n)

# c++ - 3d aabb 作为地图中的键

> ID：12437889
> 
> 赞同：0
> 
> 时间：2012-09-15T13:42:49.517
> 
> 标签：c++, aabb

我需要 3D AABB（轴对齐边界框）作为地图中的关键。主要问题是，地图中不能有一对 AABB 键以某种方式相互交叉。我不知道我应该使用哪个结构/容器。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:13:39.573

您需要一个空间排序的数据结构，而不是“地图”。

我想不出用于存储非重叠框的标准数据结构，但是您可以通过将边界框的四个定义点存储在八叉树中并检查插入量来实现您想要做的事情插入的框为空。

# java - java系统与sql server之间的数据集成服务

> ID：12437890
> 
> 赞同：1
> 
> 时间：2012-09-15T13:43:05.690
> 
> 标签：java, sql, xml, sql-server-2008, ssis

我目前正在为 Web 应用程序构建一些集成服务。外部 java 应用程序产生一个提供数据的数据馈送，根据需要对数据进行处理，然后输入到 sql server 数据库中。数据在此处进行管理，并用作 web 应用程序、移动设备等访问的 wcf 和 http rest 服务的基础。

这是当前的设置。我目前正在更改此修改，因为我们在 java 系统和 sql server 数据库的集成方面存在一些问题。我们遇到的主要问题是所需数据的标准，它可能缺少字段等。当前的集成是放置在 ftp 服务器上的逗号分隔文件，文件拾取，文件处理，数据按摩和数据插入sql服务器。我们目前被“烧毁”的地方是数据被插入到 sql server 数据库中，并且数据的质量没有达到必要的标准和/或质量。

因此，这个过程正在发生变化，并正在寻找使其现代化并使集成服务更加强大的选项。

所以我正在寻找改进上述内容的建议和建议？

一些浮现在脑海中的选择是：

*   公开java系统调用的wcf服务，数据通过SOAP协议传递给它，然后在插入sql server之前在服务中验证数据
*   提供的数据格式从通用的分隔文件移动到 xml 文件，并且在处理数据之前，xml 文件会根据模式进行验证

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:19:58.997

您的任何一种解决方案都无法从源头上解决您的数据质量问题。*除了*在 INSERT 到数据库之前对其进行验证之外，我还会更严格地查看生成数据的应用程序并将验证放在那里。您想在 INSERT 之前进行验证，因为您永远不应该信任客户端。但是客户在向您发送数据时应该遵守合同。

Web 服务提供而其他服务不提供的一个优势是可以实时插入到数据库中。让源应用程序将其请求发送到此代理服务。它验证请求并实时插入它们。没有批次了。

# javascript - 如何在我的 如果我的 javascript 条件不满足

> ID：12437895
> 
> 赞同：0
> 
> 时间：2012-09-15T13:44:14.093
> 
> 标签：javascript, jquery, forms

我有一个`<form>`它的默认属性是`submitted=false;`，我有一个声明

```
function checking() {
    var empty = 0;
    $('input[type=text]').each(function(){
       if (this.value == "") {
           empty++;
           $("#error").show('slow');
       }else{
         //missing piece
       }
    }) 
```

因此，当用户单击按钮并且对上述语句不满意时，我想`onsubmit="submitted=true;"`在 my中添加`<form>`并使其成为这样的`<form onsubmit="submitted=true;"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:57:14.573

如果我没有误会您的意思，您希望运行该检查，并且如果运行顺利，您希望将名为***submit***的变量设置为**TRUE**，否则将其设置为**FALSE**。

如果是这样，你可以这样做：

```
function checking() {
   var empty = 0;
   $('input[type=text]').each(function(){
      if (this.value == "") {
          empty++;
           $("#error").show('slow');
      }
   });
   if(empty > 0) submitted = false;
   else          submitted = true;
} 
```

如果不是这样。如果您想在有空字段时**显示错误**并在有空字段时**阻止表单提交**，那么您应该这样做：

```
function checking() {
   var empty = 0;
   $('input[type=text]').each(function(){
      if (this.value == "") {
          empty++;
          $("#error").show('slow');
      }
   });
   return empty == 0;
} 
```

# javascript - 当 textarea 从 div 转换返回时返回 "/n" 字符

> ID：12437897
> 
> 赞同：1
> 
> 时间：2012-09-15T13:44:17.150
> 
> 标签：javascript, jquery, html

我正在尝试另一个 stackoverflow 帖子中的脚本。我有一个 textarea 元素，有人可以输入文本。通过双击它，它会转换为 div 并保持换行符。当您在 div 上 dblclick 以返回到 textarea 时，`<br />`s 将保持原样。

你可以在这里看到 jsfiddle [http://jsfiddle.net/QUFZJ/](http://jsfiddle.net/QUFZJ/)

如何在没有 br 的情况下取回文本但保留换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:55:44.767

你应该使用

```
boxText = $(this).html().replace(/<br\s?\/?>/g,"\n"); 
```

代替

```
$(this).val().replace(/<br\s?\/?>/g,"\n"); 
```

您需要为 boxText 分配新值，因为您像这样设置文本区域值

```
$(this).replaceWith( '<textarea form="HTML" class="BoxText">' + boxText + '</textarea>' ); 
```

[jsFiddle 示例](http://jsfiddle.net/QUFZJ/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T22:42:59.437

`contenteditable`如果您愿意尝试，我认为您可能会在使用元素时获得更令人满意的时间。这是我设计的一个简短演示，向您展示它是如何工作的。

您可能会注意到在**HTML**部分中看不到任何内容。在`$.ready()`块中向下看，你会看到我实际上在两个不同的 s 之间切换，因为 (AFAICT)一旦它被添加到 DOM，`div`你就无法更改它。`contenteditable`所以我的解决方案是换掉我需要的东西。有人让我知道是否也有办法做到这一点，以防我忽略了什么。

请注意，这并不完整，虽然它（似乎）在大多数浏览器中都有效，但我知道 Opera 有一些问题，而且我并没有真正向它抛出那么多可变文本。它似乎在 Chrome 和 Firefox 中效果最好。当您与`contenteditable`.

这是一个开始。看看吧，看看你的想法。

**HTML**

```
<div class="boxtext" class="editable">Text Text Text...</div> 
```

**CSS**

```
body, html {
    margin: 5px;
    padding: 15px 5px 5px 0;
}
.boxtext,
.boxtext .editable,
.boxtext .uneditable,
.boxtext pre.text {
    display: block;
    width: 500px;
    padding: 5px;
    margin: 0 auto;
}
.boxtext .uneditable {
    background: #ddd;
    border: 1px solid #ccc;
}
.boxtext .editable,
.boxtext .uneditable {
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
.boxtext .editable {
    border: 1px solid #5794BF;
    border-right-color: #C3D4E0;
    border-bottom-color: #C3D4E0;
}
.boxtext pre.text {
    white-space: pre-wrap;
    margin-top: -3px;
    background: #444;
    border: 1px solid black;
    color: white;
    font-family: monospace;
    -webkit-border-radius: 0 0 3px 3px;
    -moz-border-radius: 0 0 3px 3px;
    border-radius: 0 0 3px 3px;
}
h1, h2, h3, h4 {
    font-weight: bold;
}​ 
```

**Javascript**

```
(function ready($, win, doc, _c, _l, copies) {
    var $editable = $('<div class="editable" contentEditable="true">'),
        $uneditable = $('<div class="uneditable">'),
        $div = $('<div>'),
        $pre = $('<pre class="text">'),
        $doc = $(doc),
        $body,
        $boxes;

    $doc.ready(setup);

    function setup() {
        $body = $('body', doc);
        $boxes = $('.boxtext');

        $boxes.wrapInner($div.clone()).wrapInner($uneditable.clone());

        while (copies--) {
            $body.append($boxes.clone());
        }

        $boxes = $(".boxtext");

        $doc.on('click', $body, not);

        $boxes
            .on('dblclick.editable', '.editable, .uneditable', edit)
            .on('paste.editable', '.editable', paste);
    }

    function not(e) {
        !!$boxes.has(e.target).length || close.call(doc, e, true);
    }

    function close(e, call) {
        if (call) {
            $boxes.find('.editable').not(this).trigger('dblclick.editable');
        }
    }

    function edit(e) {
        var $this = $(this),
            $box = $boxes.has($this),
            $shim = $uneditable,
            type = '.uneditable';

        close.call(this, e, true);

        if ($this.is(type)) {
            $shim = $editable;
            type = '.editable';
        }

        $shim = $this.wrapInner($shim.clone()).find(type);

        $box.empty().append($shim);

        if (type == '.uneditable') {
            text.call($box[0]);
        }
    }

    function paste(e) {
        var $this = $(this),
            $target = $(e.target);

        (function a(th, ev) {
            function f(){clean.call(th, ev);}

            setTimeout(f, 1);
        })(this, e);
    }

    function clean(e) {
        var $this = $(this),
            $pres = [];

        $this.find('div > p').not(':empty').unwrap();
        $this.find(':empty').remove();
        $this.find('pre').each(function r(i, el) {
             $pres[i] = $(el).html();
        });
        $this.find('*')
            .not('h1, h2, h3, h4, p, div, br, pre, code')
            .children().unwrap();
        $this.html($.trim($this.html().replace(/(\r\n|\n|\r)/gm, ' ')));
        $this.html($.trim($this.html().replace(/>[ ]{1,}</gm, '><')));
        $this.find('pre').each(function r(i, el) {
              $(el).html($pres[i]);
        });
        $this.find('h1, h2, h3, h4, div, p, pre').after('<br/>');
        $this.find('br:last').remove();
    }

    function text(e) {
        var $this = $(this),
            $uneditable = $this.find('.uneditable').clone(),
            $text = $pre.clone();

        $uneditable.find('div > br').unwrap();
        $uneditable.find('div, p, br').after('\n');

        $text.text('Plaintext\n---------\n' + $uneditable.text());

        $this.append($text);
    }

    function log() {
        !_c || !_l.apply || _l.apply(_c, arguments);
    }

})(jQuery, window, document, console, console.log, 5); 
```

[​http://jsfiddle.net/userdude/76agk/](http://jsfiddle.net/userdude/76agk/)

# java - Java TCP：如何在超时后中止/停止接收方等待发送方数据

> ID：12437898
> 
> 赞同：1
> 
> 时间：2012-09-15T13:44:16.640
> 
> 标签：java, timeout, readline, break

我必须编写实现 TCP 服务器和 TCP 客户端的 java 代码，其中 10% 的传输失败由随机数确定。现在在接收方，它需要等待 2000 毫秒（2 秒），如果在这 2 秒内没有从发送方收到数据。然后它将停止等待来自发件人的数据并将否定的 ACK 发送回发件人。

```
BufferedReader inFromSender =new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        long startTime = System.currentTimeMillis();
        while(( System.currentTimeMillis() - startTime) < 2000 )
        {
            clientSentence = inFromSender.readLine();
            System.out.println("Received: " + clientSentence);
        }
        System.out.println("Data Transmission failed"); 
```

但是一旦while循环开始并且接收者进入从发送者那里读取，它就永远不会中断..即使2秒。超时结束。如何在 2 秒（超时）后中止/停止接收方等待发送方数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:36:07.417

一种方法`Thread`是在达到超时时关闭套接字。这会使`read(...)`调用失败（可能是一个`IOException`），因此你会退出循环。

例子：

```
final Socket connectionSocket = new Socket("...", 8888); // To be changed
BufferedReader inFromSender = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
Thread t = new Thread() {
   public void run() {
      try {
          Thread.sleep(2000); // Wait 2 s
          connectionSocket.close();
          System.out.println("Data Transmission failed");
      } catch(InterruptedException e) {
         // Handle exception
      }
   }
};
t.start();
while((clientSentence = inFromSender.readLine()) != null) {
   System.out.println("Received: " + clientSentence);
} 
```

# virtualization - 通过命令行运行需要 UAC 的命令

> ID：12437901
> 
> 赞同：1
> 
> 时间：2012-09-15T13:45:15.797
> 
> 标签：virtualization, uac, virtualbox

我有一堆需要不时更新的虚拟机。我找到了这个 VirtuaBox 命令

VBoxManage 访客控制

效果很好。问题是更新需要UAC。有没有办法绕过UAC检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:33:10.450

我发现快速做到这一点的方法是购买这个软件：

[http://www.ntwind.com/software/hstart.html](http://www.ntwind.com/software/hstart.html)

如果我有更多的时间，我可能会自己开发一些东西。该软件所做的是安装计划任务，然后通过计划任务运行程序。可以在此处找到对此的简要说明：

[http://www.howtogeek.com/howto/windows-vista/create-administrator-mode-shortcuts-without-uac-prompts-in-windows-vista/](http://www.howtogeek.com/howto/windows-vista/create-administrator-mode-shortcuts-without-uac-prompts-in-windows-vista/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-15T17:56:00.773

如果我理解正确，您每次都需要输入root密码，对吗？

如果是这样，通过将命令添加到 sudoers 文件来绕过它，然后在使用命令（使用 sudo）时，它不会要求输入密码，但会立即将您提升为 root。

要允许特定程序或 shell 脚本以 root 身份运行但无需输入密码（如在引导期间），请在**/etc/sudoers**中添加以下行：

**(用户名) ALL = NOPASSWD: /path/to/cmd**

例如：

```
Mac ALL = NOPASSWD: /usr/bin/vboxmanage 
```

之后，在输入**sudo vboxmanage**时，您将不再被要求输入 root 密码。

希望有帮助！

# asp.net-mvc - 具有 3 层架构的分层应用程序的良好实现方法？

> ID：12437904
> 
> 赞同：0
> 
> 时间：2012-09-15T13:45:51.673
> 
> 标签：asp.net-mvc, entity-framework, 3-tier, layered

我正在使用 MVC3 和实体框架开发应用程序。它是一种三层方法，表示层托管在 Web 服务器中，业务层和数据访问层托管在应用程序服务器中。我们没有将对象上下文暴露给表示层或业务层。对象上下文仅包装在数据访问层中，并将数据访问和数据持久性作为数据访问层方法的功能公开（即数据访问逻辑仅在数据访问层中分离和实现）。业务层调用数据访问层的方法并将数据返回给表示层。

我担心的是大多数业务层方法只是为了访问数据，它只是将调用转发到数据访问层而没有任何操作。所以我们在两层重复代码。我们有没有其他更好的方法来避免这种重复。

以分层方法在业务层中实现数据访问逻辑是否是一种好习惯？

有人可以为具有 3 层架构的分层应用程序提出一个好的实现方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:32:11.753

如前所述，没有“正确”的设置方式。这些年来，我发现了一些可以帮助我决定采用哪种方法的东西。

**两层**

如果您的商店存储过程繁重，有很多数据库程序员，并且倾向于将业务逻辑放在数据库中，那么请使用两层方法。在这种情况下你会发现你的业务层一般只是调用数据层。此外，如果您的代码库和页面往往很小并且您从不重复功能，那么请使用两层方法。你会节省很多时间。

**三层**

如果您的商店喜欢在代码中包含大量业务逻辑并且该逻辑在各处重复，那么请使用三层。即使您注意到很多业务层只是调用数据层，随着时间的推移，当您添加功能时，您会发现向业务层添加代码要容易得多。此外，如果您有一个庞大的代码库，其中包含大量重复逻辑的页面，那么我肯定会采用这种方法。

我在工作中的企业级应用程序中发现了两者的混合。有问题的区域是使用动态 sql (gag) 并且业务逻辑一遍又一遍地重复的区域。我发现当我重构时，我将这段代码放入一个 3 层架构中，并在未来为自己节省了大量时间，因为我可以重用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:39:10.420

如果您发现自己的业务层所做的只是将调用委托给数据访问层，那么这强烈表明该业务层对于您的应用程序可能不是必需的，因为它不会带来额外的价值。您可以摆脱它并让控制器直接与数据访问层对话（当然是通过抽象）——这就是大多数教程在 EF 数据上下文中所展示的内容。

在主要由 CRUD 操作组成的简单应用程序中，可能不需要业务层。随着您的应用程序变得越来越复杂，您可能会决定稍后再引入它，但不要从一开始就进行太多抽象，特别是如果这些抽象不会给您带来任何额外的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:19:06.937

我认为复制代码以进行逻辑分离不一定是坏事。当这将得到回报时，时间将会到来。假设您将用 Oracle 替换 SQL 服务器。或者微软会提出 Linq 2.0，一些实现会改变。您会感谢自己将它分开，而那些直接从业务层调用数据库的人将不得不在两个地方进行修改 - DAL 和 BLL。物有所值。但同样，没有正确的答案，取决于实用性、可用性、便利性，最重要的是让它符合其目的。

希望这是有帮助的。

# javascript - 例外：XML 表达式中缺少 }

> ID：12437908
> 
> 赞同：0
> 
> 时间：2012-09-15T13:46:17.870
> 
> 标签：javascript, onedrive

我收到此错误异常：XML 表达式中缺少 } 以及当我在 FIREFOX 中打开我的 html 文件并使用 Firebug 1.9.2 时，出现此错误：

```
WL is not defined [Break On This Error]      
WL.Event.subscribe("auth.login", onLogin);` 
```

这是我的代码：

```
<html><head>
<title>Greeting the User Test page</title>
<script src="js.live.net/v5.0/wl.js" type="text/javascript"></script>
<script type="text/javascript">
    var APPLICATION_CLIENT_ID = "id",
    REDIRECT_URL = "url";
    WL.Event.subscribe("auth.login", onLogin);
    WL.init({
        client_id: APPLICATION_CLIENT_ID,
        redirect_uri: REDIRECT_URL,
        scope: "wl.signin", 
        response_type: "token"
    });

    WL.ui({
        name: "signin",
        element: "signInButton",
        brand: "skydrive",
        type: "connect"
    });

    function greetUser(session) {
        var strGreeting = "";
        WL.api(
        {
            path: "me",
            method: "GET"
        },
        function (response) {
            if (!response.error) {
                strGreeting = "Hi, " + response.first_name + "!";
                document.getElementById("greeting").innerHTML = strGreeting;
            }
        });
    }

    function onLogin() {
        var session = WL.getSession();
        if (session) {
            greetUser(session);              
        }
    }
</script>
</head>
<body>
<p>Connect to display a welcome greeting.</p>
<div id="greeting"></div>
<div id="signInButton"></div>
</body>
</html> 
```

我不知道哪里出错了，我只是从 skydrive api 教程中复制了这个示例代码。当然，我的 id 和 url 字符串替换为我的个人应用程序的字符串。感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:49:02.667

您的第一个`<script>`标签应如下所示：

```
<script src="http://js.live.net/v5.0/wl.js" type="text/javascript"></script> 
```

或者可能

```
<script src="//js.live.net/v5.0/wl.js" type="text/javascript"></script> 
```

如果该站点配置正确。否则，您的 URL 将被解释为相对于您页面的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:49:24.527

您需要包含来自 Microsoft 服务器的 Javascript 文件：

```
<script src="http://js.live.net/v5.0/wl.js" type="text/javascript"></script> 
```

# java - 如何从另一个类调用run方法？

> ID：12437909
> 
> 赞同：0
> 
> 时间：2012-09-15T13:46:34.580
> 
> 标签：java, methods, call

对不起，如果这是一个愚蠢的问题。

我想了解如何调用位于

```
java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new FereastraPrincipala().setVisible(true); 
```

来自 AdaugaComanda.java 类。

run 方法在 FereastraPrincipala.java 中声明，我想从 AdaugaComanda.java 调用它，以便在从 AdaugaChitanta.java 的文本字段中引入值后，可以看到 FereastraPrincipala 的变化。如果我不调用方法，那么我必须再次运行 FereastraPrincipala.java，以便在 JTabbedPane 中查看新信息。

这是 FereastraPrincipala.java 的代码

```
 package sakila.ui;

 import java.util.List;
 import java.util.Vector;
 import javax.swing.table.DefaultTableModel;
 import org.hibernate.Session;
 import sakila.entity.*;
 import sakila.util.HibernateUtil;

public class FereastraPrincipala extends javax.swing.JFrame {

public FereastraPrincipala() {
    initComponents();
}

private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    AdaugaComanda ac = new AdaugaComanda();
    ac.setVisible(true);
}                                          

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new FereastraPrincipala().setVisible(true);
            Session session = HibernateUtil.getSessionFactory().openSession();

    try{

    List<Comanda> comenzi = session.createQuery("from Comanda").list();

    Vector<String> tableHeaders = new Vector<String>();
    Vector tableData = new Vector();
    tableHeaders.add("IdComanda");
    tableHeaders.add("Depozit");
    tableHeaders.add("Furnizor");
    tableHeaders.add("Client");
    tableHeaders.add("Produs");
    tableHeaders.add("Cantitate");
    tableHeaders.add("Unit de mas");

    for (Comanda comanda : comenzi) {
        Vector <Object> oneRow = new Vector <Object>();
        oneRow.add(comanda.getIdcomanda());
        oneRow.add(comanda.getDepozit() == null ? "" : comanda.getDepozit().toString());
        oneRow.add(comanda.getFurnizor() == null ? "" : comanda.getFurnizor().toString());
        oneRow.add(comanda.getClient() == null ? "" : comanda.getClient().toString());
        oneRow.add(comanda.getProdus() == null ? "" : comanda.getProdus().toString());
        oneRow.add(comanda.getCantitate());
        oneRow.add(comanda.getUnitmas());

        tableData.add(oneRow);

        }
   ComandaTable.setModel(new DefaultTableModel(tableData, tableHeaders));    

       }catch (Exception he){
        he.printStackTrace();
    }
 }                              
    });
} 
```

}

这是 AdaugaComanda.java 的代码

```
 package sakila.ui;

  import java.io.EOFException;
  import java.util.List;
  import sakila.entity.*;
  import sakila.service.Functie;
  import sakila.entity.Client;

 public class AdaugaComanda extends javax.swing.JDialog {

public AdaugaComanda() {
    initComponents();
    initComboBoxes();
}

   private void initComboBoxes() {

    DepozitComboBox.removeAllItems();
    FurnizorComboBox.removeAllItems();
    ClientComboBox.removeAllItems();
    ProdusComboBox.removeAllItems();

    System.out.println("sterge itemurile");

    List<Depozit> depozite = (List<Depozit>) sakila.client.Client.citeste(Functie.LISTEAZA_DEPOZITE);
    for (Depozit depozit : depozite)
        DepozitComboBox.addItem(depozit);

    List<Furnizor> furnizori = (List<Furnizor>) sakila.client.Client.citeste(Functie.LISTEAZA_FURNIZORI);
    for (Furnizor furnizor : furnizori)
        FurnizorComboBox.addItem(furnizor);

    List<Client> clienti = (List<Client>) sakila.client.Client.citeste(Functie.LISTEAZA_CLIENTI);
    for (Client client : clienti)
        ClientComboBox.addItem(client);

    List<Produs> produse = (List<Produs>) sakila.client.Client.citeste(Functie.LISTEAZA_PRODUSE);
    for (Produs produs : produse)
        ProdusComboBox.addItem(produs);
    System.out.println("adaugaitemuri"); 

}

private void ClientComboBoxActionPerformed(java.awt.event.ActionEvent evt) {                                               
    // TODO add your handling code here:
}                                              

private void InsereazaButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
    runQueryBasedOnInsert();
}                                               

 private void runQueryBasedOnInsert(){

    Comanda comanda = new Comanda();

    Depozit depozit = (Depozit)DepozitComboBox.getSelectedItem();
    comanda.setDepozit(depozit);

    Furnizor furnizor = ((Furnizor)FurnizorComboBox.getSelectedItem());
    comanda.setFurnizor(furnizor);

    sakila.entity.Client client = ((sakila.entity.Client)ClientComboBox.getSelectedItem());
    comanda.setClient(client);

    Produs produs = ((Produs)ProdusComboBox.getSelectedItem());
    comanda.setProdus(produs);

    comanda.setCantitate(Integer.parseInt(CantitateTextField.getText()));
    comanda.setUnitmas(UnitMasTextField.getText());

    sakila.client.Client.scrie(Functie.CREAZA_COMANDA, comanda); 
```

}

```
 public static void main(String args[]) {

 java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new AdaugaComanda().setVisible(true);
        }
    });
} 
```

也许有人可以帮助我。十分感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:52:34.963

您可以将 FereastraPrincipala 设为 AnduagaChitanta 的成员变量。

```
public class  AnduagaChitanta
{
  FereastraPrincipala fPrincipala  = new FereastraPrincipala (); //Or inject it into the constructor

  private void SomeMethod()
  {
   fPrincipala.run();
  }
} 
```

在运行方法（）

```
public void run()
{
  setvisible(true);
} 
```

如果您想知道如何注入它：

公共类 AnduagaChitanta { FereastraPrincipala fPrincipala

```
 public AnduagaChitanta(FereastraPrincipala fPrinicipala)
  {
      this.fPrinicipala = fPrinicipala;
  }
  private void SomeMethod()
  {
   fPrincipala.run();
  }
} 
```

如果你愿意，你可以让 FereastraPrincipala 实现一个接口，这样构造函数的定义可以是：

public AnduagaChitanta(ISomethingPrinicipala fPrinicipala)

但是现在我们将进入设计模式，所以我将把它留在那里。

**更新** 您的更新后，我会做这样的事情：

```
FereastraPrincipala extends JFrame implements Runnable 
{
   public void run()
   {
        setvisible(true) ;
   } 

} 
```

我不知道在哪里，但也许在你的 AnduagaChitanta 课上我会这样做

```
public void SomeMethod()
{
  java.awt.EventQueue.invokeLater(fPrinicpala) 
} 
```

我希望这是有道理的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:55:16.373

永远不要调用`run()`线程的方法。它在它自己的当前线程中执行！总是调用`start()`方法。谈到你的情况，创建一个新类，以便你可以`start()`从其他地方调用它

# android - 在 BroadcastReceiver 中实现 SensorEventListener ... 有可能吗？

> ID：12437919
> 
> 赞同：0
> 
> 时间：2012-09-15T13:48:59.150
> 
> 标签：android, broadcastreceiver, alarmmanager, android-sensors

为什么我不能有一个扩展 BroadcastReceiver 并实现 SensorEventListener 的类？此类接收在我的应用程序中设置的警报意图。

我有一个在实现的 onSensorChanged 方法中设置的类实例变量。在我注册侦听器的 onReceive 方法中，有一个 while 循环运行，直到设置类实例变量。在循环之后，我注销了监听器。但是变量永远不会被设置并且循环继续运行。

根据这里的答案，我永远不应该在广播接收器中注册监听器：

[带有侦听器的广播接收器在不使用时会耗尽电池电量](https://stackoverflow.com/questions/6883664/broadcastreceiver-with-a-listener-drains-battery-when-not-in-use)

在 AlarmManager 文档中，有所有这些关于设备休眠的警告，但在我的情况下它从不休眠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:18:44.103

根据这篇文章：

[AlarmManager 和 BroadcastReceiver 而不是 Service - 这很糟糕吗？（暂停）](https://stackoverflow.com/questions/3117350/alarmmanager-and-broadcastreceiver-instead-of-service-is-that-bad-timeout-p?rq=1)

onReceive 方法在主应用程序线程上运行，不能做很多工作或超时。我可以通过将工作负载转移到 IntentService 来解决我的问题。

# asp.net-mvc-3 - MVC3 Razor（下拉列表）

> ID：12437922
> 
> 赞同：0
> 
> 时间：2012-09-15T13:49:30.800
> 
> 标签：asp.net-mvc-3, razor

我是 MVC3 Razor 的新手。目前，我正面临这个错误“**对象引用未设置为对象的实例。** ”，我不知道这是怎么回事。

在模型中

```
 public List<SelectListItem> CatList { get; set; }

    [Display(Name = "Category")]
    public string CatID { get; set; } 
```

在控制器中

```
 public ActionResult DisplayCategory()
    {
        var model = new CatModel();
        model.CatList = GetCat();
        return View(model);
    }

    private List<SelectListItem> GetCat()
    {
        List<SelectListItem> itemList = new List<SelectListItem>();
        itemList.Add(new SelectListItem { Text = "1", Value = "1" });
        itemList.Add(new SelectListItem { Text = "2", Value = "2" });
        return itemList;
    } 
```

在 CSHTML 中

```
@using (Html.BeginForm())
{
    <table>
    <tr>
    <td>@Html.LabelFor(c => c.CatID)</td>
    <td>@Html.DropDownListFor(c => c.CatID, Model.CatList)</td>
    </tr>

    </table>
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:37:13.053

我怀疑您有一个 POST 操作，其中您忘记重新分配`CatList`视图模型的属性，因此您在提交表单时获取 NRE，而不是在最初呈现表单时：

```
public ActionResult DisplayCategory()
{
    var model = new CatModel();
    model.CatList = GetCat();
    return View(model);
}

[HttpPost]
public ActionResult Index(CatModel model)
{
    // some processing ...

    // since we return the same view we need to populate the CatList property
    // the same way we did in the GET action
    model.CatList = GetCat();
    return View(model);
}

private List<SelectListItem> GetCat()
{
    List<SelectListItem> itemList = new List<SelectListItem>();
    itemList.Add(new SelectListItem { Text = "1", Value = "1" });
    itemList.Add(new SelectListItem { Text = "2", Value = "2" });
    return itemList;
} 
```

# c# - 排序列表 > 按字母顺序为元组的字符串值，C#

> ID：12437923
> 
> 赞同：2
> 
> 时间：2012-09-15T13:49:35.557
> 
> 标签：c#, list, sorting

如何`list(Tuple<string, class>)`按升序对 tuple 的字符串项的值进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T13:51:09.443

```
var ordered = myList.OrderBy(t => t.Item1).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:50:43.043

```
list.OrderBy(x => x.Item1); 
```

假设您`string`在`Item1`.

# c# - c#中TreeGrid Treecolumn组件的JSON模型

> ID：12437925
> 
> 赞同：2
> 
> 时间：2012-09-15T13:49:43.157
> 
> 标签：c#, json, extjs, treegrid

如何在 c# 中为 ExtJs TreeGrid Treecolumn 组件构建动态 JSON 模型

格式响应：

```
 root: {
    text: 'Root',
    expanded: true,
    children: [
        {
            text: 'Child 1',
            leaf: true
        },
        {
            text: 'Child 2',
            leaf: true
        },
        {
            text: 'Child 3',
            expanded: true,
            children: [
                {
                    text: 'Grandchild',
                    leaf: true
                }
            ]
        }
    ]
} 
```

# jquery - HTML 数据属性值 jQuery 对象

> ID：12437928
> 
> 赞同：1
> 
> 时间：2012-09-15T13:50:06.543
> 
> 标签：jquery, html, json

如何将 HTML 属性值用作 JQuery 对象`$.param`？

```
<div data-sd="{a:1,b:1,c:2}"></div> 
```

当我尝试这个时，我得到了奇怪的结果。

```
<script type="text/javascript">
var v = $.param($('div').data('sd'));
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:55:17.380

**用双引号**将对象的属性名称括起来，以获得*格式正确的* [JSON](http://json.org/)：

```
<div data-sd='{"a":1,"b":1,"c":2}'></div>​​​​​​​​​​​​​​​​​​​ 
```

然后，将按预期`$.param`返回。**[演示](http://jsfiddle.net/yn7HD/)**。`a=1&b=1&c=2`

来自**[HTML5 data-* 属性](http://api.jquery.com/data/#data-html5)**：

> 当数据属性是**对象**（以'{'开头）或数组（以'['开头）时，则使用jQuery.parseJSON来解析字符串；它必须遵循有效的 JSON 语法**，包括引用的属性名称**。

# android - AdMob 错误“您必须在 androidmanifest.xml 中使用 configchanges 声明 adactivity”

> ID：12437936
> 
> 赞同：10
> 
> 时间：2012-09-15T13:51:38.407
> 
> 标签：android, error-handling, admob

我正在尝试在我的 android-app 中安装 AdMob。当我启动模拟器时它说：

“您必须在 androidmanifest.xml 中使用 configchanges 声明 adactivity”

有很多关于这个的话题，但没有人解决这个问题。

请帮帮我！

问候，贾斯珀....

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-15T13:54:54.053

AndroidManifest 定义中的正确 Admob Activity 如下所示：

```
<!-- AdMobActivity definition -->
<activity android:name="com.google.ads.AdActivity" 
   android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

您可能缺少 android:configChanges 部分。

请注意，所有 configChanges 参数都是必需的。由于旧 SDK 中并非所有这些都存在/允许，因此您需要使用更新的 Android 版本作为默认构建平台。如果您正确设置 minSdk 并且不要在代码中使用任何较新的 API 调用，您仍然可以针对较旧的 Android 版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-29T18:47:48.397

对我有用的是将 Android SDK 版本更改为 13**并**扩展清单中的 android:configChanges 以包含所有参数：

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```

**注意：configChanges 内容区分大小写，因此请确保保留 camelCase！** （一开始就被我咬了）

我在一分钟左右开始收到广告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T15:06:50.440

一个很好的教程，在这里：http: [//jmsliu.com/209/add-google-admob-in-android-application.html](http://jmsliu.com/209/add-google-admob-in-android-application.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T11:58:27.087

将您的构建目标设置为您拥有的最新版本（> = 4）它将起作用。您仍然可以根据需要拥有 minSdkVersion、targetSdkVersion。

广告会在一段时间后出现，请耐心等待:)

# c++ - 将文本框的字符更改为下一个字符

> ID：12437937
> 
> 赞同：0
> 
> 时间：2012-09-15T13:51:40.517
> 
> 标签：c++, qt

在 Qt 中，我想做一些能显示字符输入的下一个字符的东西。

例如，我在 QTextEdit 中输入了“a”，在另一个 QTextEdit 中它会自动变为“b”，当我再次输入“b”时，它会变为“c”。哪种算法最适合这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:07:34.773

如评论中所述，您想要执行以下操作（不是代码）：

1.  检测第一个输入框的变化
2.  给定第一个文本框的值，决定如何修改第二个文本框
3.  更新第二个文本框

第 2 步可能是（从您的示例中）确保文本有多个字符，并且假设它是 std::string，获取`text[text.length() -1]`和第 3 步可能是获取第二个文本框的文本，附加该字符并分配它.

这适用于可修改或不可修改的第二个文本框，因为它不会重新修改字符串中的每个字符——只是添加的一个。

但是，您需要清楚地定义您想要发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:48:12.967

如果可以直接修改字符，则可以将每个字符设置为`tChar = iChar + 1`. 如果你输入不是字母的东西（空格或输入键），它会变得有点不稳定。在这种情况下，您将`if (iChar >= 'a' && iChar <= 'Z') {`使用“n”语法将其包装为实际数字代码的别名。另一种方法是继承 Qtextedit 控件并重载`void Qtextedit::keyReleaseEvent(QKeyEvent* event)`虚函数以拦截击键并检查该方式。比较是相似的，但是您将使用 Qt::Key_A 而不是 'a' 来检查它是否是字母键，然后适当地修改生成的字符。

另见：[http ://doc.qt.nokia.com/4.7-snapshot/qtextedit.html](http://doc.qt.nokia.com/4.7-snapshot/qtextedit.html)

# python - python中的子类方法覆盖

> ID：12437941
> 
> 赞同：5
> 
> 时间：2012-09-15T13:51:46.820
> 
> 标签：python, overriding, subclass

我写了一个python的测试代码，例如：

```
class Parent(object):
    @classmethod
    def dispatch(klass):
        print 'klass = %s' % klass
        return klass().__dispatch()
    def __dispatch(self):
        print 'This Parent.__dispatch()'
        print self

class Child(Parent):
    def __dispatch(self):
        print 'This Child.__dispatch()'
        print self

if __name__=='__main__':
    print 'Calling Parent.dispatch() ...\n'
    Parent.dispatch()
    print ''
    print 'Calling Child.dispatch() ...\n'
    Child.dispatch()
    print '\n-END' 
```

输出是：

```
 Calling Parent.dispatch() ...

 klass = <class '__main__.Parent'> 
 This Parent.__dispatch()
 <__main__.Parent object at 0x0000000002D3A2E8>

 Calling Child.dispatch() ...

 klass = <class '__main__.Child'> 
 This Parent.__dispatch()
 <__main__.Child object at 0x0000000002D3A2E8>

 -END 
```

为什么不调用 Child 类的覆盖方法 '__dispatch(self)' 很奇怪。

有人可以解释一下吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T14:03:10.390

以双下划线开头的方法名会被自动修改；在内部，字符串`_ClassName`被添加到方法名称之前：

```
>>> class Foo(object):
...     def __bar(self):
...         pass
... 
>>> Foo.__dict__.keys()
['__dict__', '__module__', '__weakref__', '__doc__', '_Foo__bar'] 
```

此重命名也适用于在类中的任何其他方法中*引用*此方法名称的任何内容。

因此，您的`__dispatch()`方法被重命名为`_Parent__dispatch()`，并且该`dispatch()`方法被*更改*为 call `self._Parent__dispatch()`。同样，您的`Child`类有一个`_Child__dispatch()`方法，因此*它不会覆盖`_Parent__dispatch()`它的 super-class 的方法*。

这就是为什么你看到你看到的结果；将您的`__dispatch()`方法重命名为`_dispatch()`（只有一个下划线），它将按预期工作。

为什么python会这样做？它是一种提供私有属性和方法的形式，不会被继承自它们的类意外覆盖。请参阅Python 表达式参考中的[私有名称修饰](http://docs.python.org/reference/expressions.html#atom-identifiers)。

[PEP 8 Python 样式指南](http://www.python.org/dev/peps/pep-0008/)对私有名称修改有这样的说法：

> 如果您的类打算被子类化，并且您有不希望子类使用的属性，请考虑使用双前导下划线命名它们并且没有尾随下划线。这调用了 Python 的名称修饰算法，其中类的名称被修饰为属性名称。如果子类无意中包含具有相同名称的属性，这有助于避免属性名称冲突。
> 
> 注意 1：请注意，重命名中只使用了简单的类名，因此如果子类选择相同的类名和属性名，仍然会出现名称冲突。
> 
> 注意 2：名称修饰可以使某些用途，例如调试和 `__getattr__()`，不太方便。然而，名称修饰算法有据可查，并且易于手动执行。
> 
> 注 3：不是每个人都喜欢名字修饰。尝试在避免意外名称冲突的需要与高级呼叫者的潜在使用之间取得平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:03:05.710

您是否尝试过调用方法 _dispatch 而不是 __dispatch？

关键是 __dispatch 在内部被翻译成 _NameOfTheClass_dispatch （或某种提供某种“私有”成员函数行为的东西）。这就是您的覆盖失败的原因。

如果您使用 _dispatch，则成员函数的名称不受下划线的影响，并且程序按照您的意愿运行。

# android - ActionBar.tabsListener 中的 java.lang.indexOutOfBoundsException

> ID：12437944
> 
> 赞同：0
> 
> 时间：2012-09-15T13:52:09.907
> 
> 标签：android, exception, android-actionbar

我为我的 ActionBar 选项卡使用 tabsListener 来设置选项卡。在我的 phoneUi 中，一切都“很好”，但在我的 tabletUi 中，它抛出了一个异常。

```
09-15 15:46:27.588: W/System.err(31772): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
09-15 15:46:27.799: W/System.err(31772):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
09-15 15:46:27.799: W/System.err(31772):    at java.util.ArrayList.get(ArrayList.java:304)
09-15 15:46:27.799: W/System.err(31772):    at com.android.internal.app.ActionBarImpl.getTabAt(ActionBarImpl.java:1168)
09-15 15:46:27.799: W/System.err(31772):    at com.actionbarsherlock.internal.app.ActionBarWrapper.getTabAt(ActionBarWrapper.java:423)
09-15 15:46:27.799: W/System.err(31772):    at de.arvidg.onlineradio.StartActivity.onPageSelected(StartActivity.java:1270)
09-15 15:46:27.799: W/System.err(31772):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:445)
09-15 15:46:27.799: W/System.err(31772):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:405)
09-15 15:46:27.799: W/System.err(31772):    at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:386)
09-15 15:46:27.799: W/System.err(31772):    at de.arvidg.onlineradio.TabsListener.onTabSelected(TabsListener.java:27)
09-15 15:46:27.799: W/System.err(31772):    at com.actionbarsherlock.internal.app.ActionBarWrapper$TabWrapper.onTabSelected(ActionBarWrapper.java:344)
09-15 15:46:27.799: W/System.err(31772):    at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:570)
09-15 15:46:27.799: W/System.err(31772):    at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:499)
09-15 15:46:27.799: W/System.err(31772):    at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:485)
09-15 15:46:27.799: W/System.err(31772):    at com.actionbarsherlock.internal.app.ActionBarWrapper.addTab(ActionBarWrapper.java:377)
09-15 15:46:27.799: W/System.err(31772):    at de.arvidg.onlineradio.StartActivity.tabletUI(StartActivity.java:403)
09-15 15:46:27.799: W/System.err(31772):    at de.arvidg.onlineradio.StartActivity.onCreate(StartActivity.java:310)
09-15 15:46:27.799: W/System.err(31772):    at android.app.Activity.performCreate(Activity.java:5008)
09-15 15:46:27.799: W/System.err(31772):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-15 15:46:27.799: W/System.err(31772):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2136)
09-15 15:46:27.799: W/System.err(31772):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2207)
09-15 15:46:27.799: W/System.err(31772):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
09-15 15:46:27.799: W/System.err(31772):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)
09-15 15:46:27.799: W/System.err(31772):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 15:46:27.799: W/System.err(31772):    at android.os.Looper.loop(Looper.java:137)
09-15 15:46:27.799: W/System.err(31772):    at android.app.ActivityThread.main(ActivityThread.java:4899)
09-15 15:46:27.799: W/System.err(31772):    at java.lang.reflect.Method.invokeNative(Native Method)
09-15 15:46:27.799: W/System.err(31772):    at java.lang.reflect.Method.invoke(Method.java:511)
09-15 15:46:27.799: W/System.err(31772):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
09-15 15:46:27.799: W/System.err(31772):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
09-15 15:46:27.799: W/System.err(31772):    at dalvik.system.NativeStart.main(Native Method) 
```

抛出异常的方法：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    Log.d("TAG", "onTabSelected tag = " + mTag);
    try { mPager.setCurrentItem(Integer.parseInt(mTag)); }
    catch(Exception e) { Log.e("TAG", "mPager.setCurrentItem Exception " + e); e.printStackTrace(); Log.d("TabListener", "Error onTabSelected = " + e); }
} 
```

有任何想法吗？需要更多代码，请问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:15:31.740

您的片段大小为 1，但您传递的是索引 1。这意味着有两个`Fragments`，一个在索引 0，另一个在索引 1。集合从 0 开始计数，因此您应该这样做：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    Log.d("TAG", "onTabSelected tag = " + mTag);
    try { mPager.setCurrentItem(Integer.parseInt(mTag) - 1); }   ///CHANGED IT TO -1
    catch(Exception e) { Log.e("TAG", "mPager.setCurrentItem Exception " + e);
        e.printStackTrace(); Log.d("TabListener", "Error onTabSelected = " + e); }
} 
```

# c++ - GCC 和预编译头文件

> ID：12437955
> 
> 赞同：6
> 
> 时间：2012-09-15T13:53:14.380
> 
> 标签：c++, gcc, dependencies, precompiled-headers

在阅读[了这篇好文章](http://gamesfromwithin.com/the-care-and-feeding-of-pre-compiled-headers)（预编译头文件的护理和提供）之后，我对这些如何在现实生活中实际工作有一些疑问。更具体地说，我怎么知道我需要在以下场景中触发预编译头的重建：

*   我决定`#define`在我的一个 .cpp 文件中更改预处理器解释一些已包含在我的预编译头文件中的头文件的方式
*   我在我的一个 .cpp 文件中包含另一个头文件，它`#define`是一个特定的预处理器指令，它改变了预处理器解释已包含在预编译头文件中的头文件的方式
*   更糟糕的是，上一个问题可能会递归地发生，当某些标头`#include`其他标头时

预编译头文件的使用是否应该强制执行某种限制性编码样式，例如将 .cpp 文件中包含的头文件数量限制为一个，并且永远不会`#define`在 .cpp 文件中添加内容？

虽然 Microsoft 的编译器可能在预编译头文件方面做得不错（通过应用一些特定于 MS 的巫术），因为据我所知，它提供了应该完成所有工作的`/Yc`和`/Yu`选项，但对于 GCC 来说，这似乎是功能需要在 Makefile 中进行大量手动工作和创造力，我无法找到一个可以解决使用预编译头文件的所有缺陷的模板。

例如，如果我有一个构建多个库的项目，为了不在每次更改后重新构建所有库，我必须在 Makefile 中使用一些非常可爱的[`sed`技巧](http://www.ipp.mpg.de/~dpc/gmake/make_42.html)来检测`#include`当前库的头文件之一是否被修改（或者它`#include`是修改后的标题）。我什至害怕想到预先构建的标头实际上会暗示的复杂性，以便构建脚本在每次有必要时都重新构建它们。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T14:04:44.540

当前的 GCC（即 4.7）和它的早期版本只有在您的应用程序有一个*公共*头文件时才能很好地与[预编译头](http://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html)文件一起使用，并且当需要该单个头文件（依次包括所有系统头文件和库特定头文件时）由应用程序）是-d （作为您的源代码的*第一个非注释词*位）由您的应用程序的每个源代码。*`#include`*

 **因此，您应该有一个**单一** `yourapp.h`的 并且每个源文件（即每个编译单元）都以命令行上相同的预处理选项（即or或）`yourapp` **开头。**该头文件通常包含许多其他头文件，例如系统头文件（或 GTK 或 Qt 头文件），如or或 [在 C++ 中]或等。`#include "yourapp.h"``-D``-I``-U``youapp.h``#include``<stdlib.h>``<sys/poll.h>``<algorithm>``<gtk/gtk.h>``<QtGui>`

回想一下，这`-H`是一个有用的选项，可以`gcc`告诉您包含的内容。

^(如果需要，您的源文件可能会有一些额外的`#include` **内容** `#include "yourapp.h"`。)

在 GCC 包含一个 [single] 预编译头文件后，您当然可以使用`#define`宏、`#include`一些非预编译头文件、使用 进行条件编译`#ifdef`等。但该预处理不会被“预编译”！

这可能不符合您的需求或习惯。

一些人（特别是来自 Google，特别是 Diego Novillo）正在开发[PreParsed Header (pph) 分支](http://gcc.gnu.org/wiki/pph)以改善这种情况，但当前的 GCC 主干还没有完成这项工作。

关于 GCC 的这种行为的解释是，预处理标头本质上是整个 GCC 堆的持久序列化检查点（通过 Ggc 和 GTY 与 GCC 内部的[内存管理](http://gcc.gnu.org/onlinedocs/gccint/Type-Information.html)`gengtype`相关）。`gcc`只有当处于初始空状态时，才能加载该检查点堆。一旦`gcc`（实际上`cc1`或`cc1plus`）已知某些内容，它就不能再加载任何预编译的头文件`*.h.gch`，并将恢复解析文本头文件`*.h`。

* * *

### 附录^(（2014 年 11 月及以后）)

甚至[GCC 4.9](https://gcc.gnu.org/gcc-4.9/)也需要一个预编译头文件。Diego Novillo 等人的预解析标头工作。已被遗弃。

C++ 标准的未来版本（[C++14](https://en.wikipedia.org/wiki/C%2B%2B14)之后）可能会定义模块机制。参见例如[n4047](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4047.pdf)提案和[C++20](https://en.wikipedia.org/wiki/C%2B%2B20)标准。

^(（附加附录，2020 年夏季）这仍然适用于存在多个[静态分析器](https://gcc.gnu.org/onlinedocs/gcc/Static-Analyzer-Options.html)选项的[GCC-10 。](https://gcc.gnu.org/gcc-10/)另请参阅[Clang 静态分析器](https://clang.llvm.org/extra/clang-tidy/)和[此报告草案](http://starynkevitch.net/Basile/bismon-chariot-doc.pdf)。考虑使用[Frama-C](https://frama-c.com/)。)**

# jquery - 检查是否 在导航中包含元素

> ID：12437956
> 
> 赞同：0
> 
> 时间：2012-09-15T13:53:33.077
> 
> 标签：jquery, superfish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:58:22.183

```
var i = $('#ul-id').find('i');
if(i.length > 0)
{
  alert('hey i have i tag inside');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:28:33.947

作为记录，这条 CSS 规则可能已经完成了。（未经测试）

```
ul.sf-menu > li [class^="icon-"] {
  display: inline-block;
  width: 1.25em;
}​ 
```

**更新**

根据 OP，这对他有用：

```
ul.sf-menu > li [class^="icon-"] {
  margin-right: 4px;
  display: inline-block;
  vertical-align: baseline;
} 
```

# javascript - 使用 Javascript 或 RegEx 限制数量

> ID：12437957
> 
> 赞同：1
> 
> 时间：2012-09-15T13:53:33.337
> 
> 标签：javascript, regex

谁能帮助我如何在javascript或regEx上将整数限制为12位小数点后2位，以便验证文本框上的输入？

例如

```
999999999999.99 - valid
99999999.999 - invalid
1234584.58 -valid
1.99 - valid
1000000000000 - invalid 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T13:55:23.180

您可以使用正则表达式；

```
^[0-9]{1,12}\.[0-9]{2}$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:29:35.217

给定的是错误的：它不会验证 12 位数字

```
**^[0-9]{1,12}\.[0-9]{2}$**
```

```
`1920304049.09 // OK
192030404985  // not ok
1.34          // ok
33.98         // ok
33.9          // not ok` 
```

 **以下将

```
**^(\d{1,12})(\.\d\d)?$**
```

```
`1920304049.09 // OK
192030404985  // ok
1.34          // ok
33.98         // ok
33.9          // not ok` 
```

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T18:08:10.047

不需要正则表达式。

```
function check(string){

var list = string.split('.');

if(parseInt(string[0], 10) > 0 && parseInt(string[1], 10) > 0){
if(list.length != 2){
    return false;
}
else if(list[0].length <= 12 && list[1].length <= 2){
    return true;
}
else{
return false;
}
} else{
return false;
}
}

if(check(1000000000000) == true){
    alert('valid');
}
else{
    alert('invalid');
} 
```

我没有测试它，但它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T18:55:22.100

我明白了，而且效果很好。下面是正则表达式和测试数据

```
^[0-9]{1,12}((\.[0-9]{1,2})|)$

123456789123.12 - okay
958.1 - okay
1578463499915 - not (13 numbers)
1548745654485.125 - not (13 numbers and 3 decimals)
5487564.325 - not (3 decimals)
54843\. - not (will also validated because no decimal number but have decimal point
112457844.12 - okay
12.12 - okay
512.00 - okay
25867s56.5 - not (have letter)
654.01 - okay
1 - okay
01 - okay
00048 - okay 
```****

# ios - 带有核心数据、照片和 iCloud 的 iOS 应用

> ID：12437961
> 
> 赞同：4
> 
> 时间：2012-09-15T13:54:25.447
> 
> 标签：ios, core-data, icloud, nsfilewrapper

我正在开发一个应用程序，它使用核心数据（使用 UIManagedDocument）来存储我想与 iCloud 同步的用户生成数据。我还想在应用程序中同步用户使用相机拍摄的照片。

我读到将实际照片存储在核心数据中并不是一个好主意。相反，最好将照片存储在文件系统中，并将 fileURL 放在核心数据中。

使用这种方法，当使用 UIDocument 将照片存储在文件系统中（在 Documents 文件夹下）时，推荐的方法是什么？我想过：

1.  对于每张照片，使用 NSFileWrapper（包含实际图像和缩略图），或
2.  使用顶级 NSFileWrapper，并为每张照片将所有 NSFileWrapper 放入其中
3.  类似于#2，但只是将所有照片/缩略图直接放在顶级 NSFileWrapper

哪种方法更适合将照片与 iCloud 同步？有没有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:00:28.620

在这种情况下，最好的方法是让 Core Data 决定把它放在哪里。

打开您的 Core Data 模型 GUI——单击将保存二进制数据的属性——向右看——有一个复选框指示 Core Data 是否应该在需要时使用外部存储。选择它。

就这样。如果 Core Data 需要使用外部存储，它会这样做——你既不知道也不关心它的决定。

# php - 在javascript中刷新倒计时的问题

> ID：12437962
> 
> 赞同：-3
> 
> 时间：2012-09-15T13:54:30.787
> 
> 标签：php, javascript

我的[网站](http://project-welcome.ugu.pl/a.php)上有倒计时，但无法自行刷新。

代码： http: [//pastebin.com/DNjb0WSN](http://pastebin.com/DNjb0WSN)

```
window.onload = function() {
    idElement = "time";
    document.getElementById(idElement).innerHTML = 
        "<?php countdown(21,00,00,9,15,2012) ?>";

    setInterval("document.getElementById(idElement).innerHTML = 
        '<?php countdown(21,00,00,9,15,2012) ?>'", 1000);
};

// ...

<?php
    function countdown($godzina, $minuta, $sekunda, $miesiac, $dzien, $rok) {
        $target = mktime($godzina, $minuta, $sekunda, $miesiac, $dzien, $rok);
        $now = time();
        $sekundy = ($target - $now);
        // $sekundy =(int) ($sekundy) ;

        $check = 0;
        if ($sekundy > 0) {
            if ($check == 0) {
                if ($sekundy <= 10000) {
                    // zmien klase
                    $check = 1;
                }
            }
            $hours = floor($sekundy / 3600);
            $minutes = floor(($sekundy / 60) - ($hours * 60));
            $seconds = floor(($sekundy) - ($hours * 3600) - ($minutes * 60));

            if ($hours < 10) $hours = '0'.$hours;

            if ($minutes < 10) $minutes = '0'.$minutes;

            if ($seconds < 10) $seconds = '0'.$seconds;

            $all = $hours." : ".$minutes." : ".$seconds;
            echo $all;
        }
        else {
            echo "Aukcja zakończona!";
        }
    }
?> 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:57:18.507

因为倒计时不是用javascript实现的，而是用php实现的。如果您需要倒计时在客户端上工作，您需要在 javascript 中实现它或轮询服务器（**不推荐**）。

**网络是无状态的，这是否敲响了警钟？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:58:08.560

尝试使用用 JavaScript 编写的倒计时库并通过 PHP 对其进行参数化： [http ://www.hashemian.com/tools/javascript-countdown.htm](http://www.hashemian.com/tools/javascript-countdown.htm)

# facebook - 添加这个 facebook 获取用户 ID

> ID：12437967
> 
> 赞同：1
> 
> 时间：2012-09-15T13:54:58.327
> 
> 标签：facebook, addthis, userid

我想知道当您使用 addthis 共享按钮单击按钮时，是否可以在事件回调中获取 facebook 用户 ID。

我正在以 xbfml 方式使用 facebook like 按钮，如下所示：

```
<a class="addthis_button_facebook_like" fb:like:layout="button_count""> 
```

我还通过以下方式跟踪事件：

```
addthis.addEventListener('addthis.menu.share', eventHandler); 
```

并通过以下方式跟踪结果：

```
console.log(evt.data);
console.log('Service: ' + evt.data.service); 
```

evt.data 返回：

```
element: Object {}
service: "facebook_like"
url: <my url> 
```

那么，有什么方法可以在回调中获取 fbid 吗？

谢谢。

# java - JList 没有滚动条

> ID：12437971
> 
> 赞同：1
> 
> 时间：2012-09-15T13:55:20.450
> 
> 标签：java, swing, netbeans, jscrollpane, jlist

在我的 Swing 应用程序中，我将 a`Vector`作为数据设置为 JList。JList 可调整大小（垂直和水平）。可查看项数为 8。当 JList 中设置的数据超过 8 项时，Scroller 不可见，要查看其余项，应将 JList 下拉。有没有办法得到这个 JScroller ？

我使用 Netbeans IDE 7.2 我检查了 JScrollerPane 的属性。它具有`default`水平和垂直滚动条的值。

这是 NetBeans 创建的 JScrollPane 和 JList 代码。
滚动窗格
`jScrollPane1 = new javax.swing.JScrollPane();`

这是 JList

```
jList1 = new javax.swing.JList();    
jList1.setBackground(new java.awt.Color(##, ##, ##));    
jList1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(##, ##, ##), 1, true));    
jList1.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N    
jList1.setForeground(new java.awt.Color(##, ##, ##));      

jList1.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);    
jList1.setCellRenderer(new CellRendererManager());    
jList1.setMaximumSize(new java.awt.Dimension(30, 80));    
jList1.setMinimumSize(new java.awt.Dimension(30, 80));    
jList1.setPreferredSize(new java.awt.Dimension(30, 80));    
jList1.setValueIsAdjusting(true);    
jScrollPane1.setViewportView(jList1); 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:22:47.557

你说：

> JScrollPane 位于 NetBeans IDE 中显示的 FreeDesign 布局上。JScrollPane 尚未设置任何大小。但 JList 已设置维度（30,80）

这是您的问题——您正在设置 JList 的 Dimension 以防止其视图扩展，即使它由 JScrollPane 持有。

解决方案：不要这样做。阅读并使用各种布局管理器，以便它们和您组件的固有首选尺寸为您完成所有尺寸调整和繁重工作。

# facebook - 通过 HTML 按钮发布发生在 Facebook 上的事情

> ID：12437978
> 
> 赞同：1
> 
> 时间：2012-09-15T13:55:58.130
> 
> 标签：facebook, facebook-wall

我浏览了几个关于使用 Facebook API 的教程，但没有一个能解决我想要做的事情。

我正在为一所小型大学制作网站。当用户在线申请时，他们希望它重定向到一个带有链接的页面，该链接将在您的 Facebook 墙上发布一个帖子，上面写着“比利刚刚申请了很棒的州立大学”，并附有一个申请链接和某种图像（可能是学校的标志）。

我想这类似于 Facebook 游戏发布帖子的方式，说“格特鲁德刚刚在‘Clubbing Baby Animals Pro’中加入了 300 只小海豹！” 但我不需要为此创建一个全新的 Facebook 应用程序，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:27:06.443

在用户的墙上发帖需要一个访问令牌，您可以借助其中一个 Facebook SDK 获得该令牌，该 SDK 需要您的应用程序 ID。

在用户墙上发布的参考：

[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/) 请参阅发布部分。

您可以使用 Facebook Javascript SDK，因为需要很简单：http: [//developers.facebook.com/docs/authentication/client-side/](http://developers.facebook.com/docs/authentication/client-side/)

# php - Facebook Open Graph - 如何将发布 JS 函数重写为 PHP

> ID：12437979
> 
> 赞同：0
> 
> 时间：2012-09-15T13:55:58.673
> 
> 标签：php, javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用此方案将我的操作发布到时间线：

```
 function postCook()
          {
              FB.api(
                '/me/app_url:action',
                'post',
                { object: 'url address' },
                function(response) {
                   if (!response || response.error) {
                      console.log(response);
                      alert('Error occured');
                   } else {
                      alert('Cook was successful! Action ID: ' + response.id);
                   }
                });
          }
<input type="button" value="Cook" onclick="postCook()" /> 
```

如何将这个 JS 函数重写为 PHP？我尝试过这样的事情（我在[这里](https://stackoverflow.com/questions/7686422/using-opengraph-with-php-curl-requests-for-actions)找到的）：

```
$myurl = 'https://graph.facebook.com/me/url_app_name:action?object=url_address&access_token=ACCESS_TOKEN&method=post';
$result = file_get_contents($myurl); 
```

但这返回了我的错误

```
Warning: file_get_contents(content of $myurl) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in... 
```

如何在 PHP 中发布 Open Graph 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:58:10.840

我建议查看[Facebook PHP SDK](http://developers.facebook.com/docs/reference/php/)。文档非常好（就 Facebook 而言），它将抽象出凌乱的 file_get_contents() 东西。

# jquery - 滚动后无法取消选择 jquery-sortable 中的元素（chrome）

> ID：12437985
> 
> 赞同：1
> 
> 时间：2012-09-15T13:57:29.193
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

jQuery-UI 可排序的一个奇怪的错误（使用最新的稳定 jQuery 和 jQuery ui）。

本质上，如果其中一个可排序元素包含滚动条（最大高度 + 滚动：自动），则在使用滚动条后，再次删除该项目变得非常困难（因为此操作将导致该项目被选中。）

据我所知，这个问题只影响 chrome （至少 firefox 似乎没有分享它）。

我在这里整理了一个稍微糟糕的问题演示：http: [//jsfiddle.net/shVFX/](http://jsfiddle.net/shVFX/)如果您尝试滚动 chrome 中的长项目，它将粘在您的光标上。

有没有人遇到过这个问题/对我如何能够缓解它有任何想法？（能够滚动浏览可排序的项目对于我正在处理的项目来说是一个非常有用的功能。）

谢谢 ：）

其他细节：
使用 chrome: v22.0.1 (beta channel)
jQuery 1.8.1 cdn
jQuery-UI 1.8.23 cdn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:39:17.647

我们也遇到了垂直滚动条的相同问题并解决了它。请在以下 URL 中找到解决方案。诀窍是“处理：'.sort'”

```
$(function() {
$('.sort').sortable({
    connectWith: '.sort',
    handle: '.sort'
    scroll : false,
}); 
```

});​</p>

还可以在这里找到问题的演示：http: [//jsfiddle.net/PrZNr/44/](http://jsfiddle.net/PrZNr/44/)

# java - 这 for(:) 在 Java 中是什么意思？

> ID：12437986
> 
> 赞同：-1
> 
> 时间：2012-09-15T13:57:44.727
> 
> 标签：java

```
package MyTest;

import java.beans.BeanInfo;
import java.beans.Introspector;
import java.beans.PropertyDescriptor;

class Person {
...
}

class Student extends Person {
...
}

public class IntrospectorDemo {

    /**
     * @param args
     * @throws Exception
     */
    public static void main(String[] args) throws Exception {
        BeanInfo info = Introspector.getBeanInfo(Student.class, Person.class);
        PropertyDescriptor[] props = info.getPropertyDescriptors();
        for (PropertyDescriptor prop : props) {
            System.out.println(prop.getName() + "::" + prop.getPropertyType());
        }
    }

} 
```

我正在学习上面的代码，它告诉我什么是 introspector，什么是 stopClass。但我不明白这是什么意思？`for (PropertyDescriptor prop : props)`? 通常 for() 应该是这样的：`for(i=0;i<100;i++)` 有人可以帮忙进一步解释吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T13:59:17.520

这就是 Java 5 中引入的[for each 循环语法。](http://docs.oracle.com/javase/6/docs/technotes/guides/language/foreach.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T14:01:29.070

这是集合“道具”上的 for-each 循环。它遍历集合的所有条目。在每次循环迭代期间，“prop”是当前处理的条目。您可以使用任何实现 Iterable 以及数组的容器类来做到这一点。

# jquery - 散列 div 上的 jquery 事件

> ID：12437988
> 
> 赞同：0
> 
> 时间：2012-09-15T13:57:53.310
> 
> 标签：jquery, hash

我有一个包含很多 div 的页面，我想使用 #DIV_NAME 将用户引导到某个 div 并突出显示该 div。

我用 JQUERY 试过了

```
 var hasih = window.location.hash.substring(1);
    $('div#'+hasih).addClass("div_highlight"); 
```

它只有在我加载页面一次然后刷新时才有效。

我怎样才能让它在第一次加载页面时工作？

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:33:50.823

附带说明一下，您可以仅在 css 中实现此效果，而无需 javascript。

CSS 3 引入了新的`:target`伪类[^([更多信息])](http://css-tricks.com/on-target/)。

> 当 URL 中的哈希值和元素的 id 相同时，CSS 中的 :target 伪选择器匹配。

这是一个简单的例子（**[demo js fiddle](http://jsfiddle.net/3637q/)**）：

**HTML**

```
<a href="#first">first</a> - <a href="#second">second</a> - <a href="#third">third</a>

<div id="first"></div>
<div id="second"></div>
<div id="third"></div>​ 
```

**CSS**

```
div{
    height: 50px;
    width: 50px;
    border: 1px solid black;            
}

div:target{
    border-color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:52:25.063

你可以这样做：

```
$('a').click(function(){
    var selector = $(this).attr('href');        
    $('html').animate({
        scrollTop: $(selector).offset().top
    }, 500,'',function(){
        $(selector).effect("highlight", {}, 1000);                             
    });
    return false;
}); 
```

[**这是演示**](http://jsfiddle.net/gZSE5/11/)

***不要忘记包含 jQuery UI***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:41:12.583

```
$(window).bind('load hashchange', function() {
    var hasih = window.location.hash.substring(1);
    $('div').removeClass('div_highlight');
    $('div#' + hasih).addClass("div_highlight");
}); 
```

* * *

只需在 url 之间切换

[http://jsfiddle.net/KWTmm/show/#hash1](http://jsfiddle.net/KWTmm/show/#hash1)

[http://jsfiddle.net/KWTmm/show/#hash2](http://jsfiddle.net/KWTmm/show/#hash2)

# php - 嵌套表单错误“必须管理传递给选择字段的实体”

> ID：12437989
> 
> 赞同：1
> 
> 时间：2012-09-15T13:57:58.453
> 
> 标签：php, forms, symfony, doctrine-orm

我已经坚持了好几天，并尝试了我能在网上找到的所有解决方案，但没有运气。

我有一个学生链接到许多转移。每个转移都链接到一个类。

为了制作表格，我使用以下类：StudentType、TransferType。

StudentType 表单类有一个 TransferType 类型的字段。下面的代码。

学生类型.php

```
<?php
// src/PS/PSchoolBundle/Form/StudentType.php

namespace PS\PSchoolBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use PS\PSchoolBundle\Entity\Responsible;
use PS\PSchoolBundle\Entity\AuthorizedPerson;
use PS\PSchoolBundle\Entity\Transfer;

class StudentType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('subNumber', 'text', array('required'  => false))
            ->add('subDate', 'date', array(
                        'required'  => false,
                        'widget' => 'single_text',
                        'format' => 'dd/MM/yyyy',
                        'attr' => array('class' => 'datepicker')
                    ))
            ->add('lastName', 'text')
            ->add('firstName', 'text')
            ->add('lastNameSecondLanguage', 'text', array('required'  => false))
            ->add('firstNameSecondLanguage', 'text', array('required'  => false))
            ->add('birthDate', 'date', array('required'  => false,
                        'widget' => 'single_text',
                        'format' => 'dd/MM/yyyy',
                        'attr' => array('class' => 'datepicker')
                    ))
            ->add('birthPlace', 'text', array('required'  => false))
            ->add('birthPlaceSecondLanguage', 'text', array('required'  => false))
            ->add('gender', 'choice', array('choices' => array('' => 'Veuillez choisir', 'm' => 'Garçon', 'f' => 'Fille')))
            ->add('nationality', 'text', array('required'  => false))
            ->add('homeLanguage', 'text', array('required'  => false))
            ->add('bloodType', 'text', array('required'  => false))
            ->add('familySituation', 'choice', array('required'  => false,
                                                            'choices' => array(
                                                            '' => 'Veuillez choisir',
                                                            'm' => 'Mariés',
                                                            'd' => 'Divorcés',
                                                            'w' => 'Veuve',
                                                            'a' => 'Autre')))
            ->add('schoolStatusBefore', 'choice', array('required'  => false, 'choices' => array('' => 'Veuillez choisir', 's' => 'Scolarisé', 'ns' => 'Non scolarisé')))
            ->add('remark', 'textarea', array('required'  => false))
            ->add('responsibles', 'collection', array('type' => new ResponsibleType,
                                                      'prototype' => true,
                                                      'allow_add' => true,
                                                      'allow_delete' => true))
            ->add('authorizedPersons', 'collection', array('type' => new AuthorizedPersonType,
                                                      'prototype' => true,
                                                      'allow_add' => true,
                                                      'allow_delete' => true))

            ->add('transfers', 'collection', array('type' => new TransferType,
                                                      'prototype' => true,
                                                      'allow_add' => true,
                                                      'allow_delete' => true));
    }

    public function getName()
    {
        return 'student';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'PS\PSchoolBundle\Entity\Student'
        );
    }
} 
```

传输类型.php

```
<?php
// src/PS/PSchoolBundle/Form/TransferType.php

namespace PS\PSchoolBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use PS\PSchoolBundle\Entity\Transfer;
use Doctrine\ORM\EntityRepository;

class TransferType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('reason', 'choice', array(
                        'choices' => array('success' => 'Réussite', 'failure' => 'Échec'),
                        'required'  => false
                        ))
            ->add('date', 'date', array(
                        'widget' => 'single_text',
                        'format' => 'dd/MM/yyyy',
                        'attr' => array('class' => 'datepicker')
                    ))
            ->add('school', 'text', array('required'  => false))
            ->add('classe', 'entity', array('class' => 'PSPSchoolBundle:Classe', 'property' => 'name'));
    }

    public function getName()
    {
        return 'transfer';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'PS\PSchoolBundle\Entity\Transfer'
        );
    }
} 
```

当我将“classe”字段添加到 TransferType 时，我没有显示表单，而是抛出了这个错误：

> 必须管理传递给选择字段的实体 500 Internal Server Error - FormException

请注意，我已经尝试过 TransferType 并且表单正确显示并填充了类选择字段。只有当我同时使用 TransferType 和 StudentType 时才会出现这个问题。

谢谢

编辑 - 以下是生成表单的控制器的操作：

```
public function byIdEditAction($id)
{
        $em = $this->getDoctrine()->getEntityManager();

        if(!$student = $em->getRepository('PSPSchoolBundle:Student')->find($id))
        {
        throw $this->createNotFoundException('Student[id='.$id.'] does not exist.');
        }

        $form        = $this->createForm(new StudentType(), $student);
        $formHandler = new StudentHandler($form, $this->get('request'), $em);

        if($formHandler->process())
        {
            $this->get('session')->setFlash('wehappy', "L'élève a été mis à jour.");
            return $this->redirect($this->generateUrl('_studentsbyidshow', array('id' => $student->getId())));
        }

        return $this->render('PSPSchoolBundle:Student:edit.html.twig', array(
            'form' => $form->createView(),
            'student' =>  $student
    ));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:24:50.433

我的问题实际上与我使用的 StudentType 具有实体字段 (Transfer) 的事实有关，该实体字段 (Transfer) 本身具有实体字段 (Classe)。链接到 Student 对象的传输对象没有链接到它的 Classe，因此我抛出了异常，抱怨需要添加到 Classes 选择字段的 Classe 对象没有被管理。这意味着它必须由实体管理器管理。换句话说，它必须来自数据库。

有两种方法可以解决这个问题：显而易见的一种是修复数据库中缺少的链接，因为该关系在 Doctrine 上设置为不可为空。第二种方法是创建一个默认 Classe 对象并将其从数据库中提取，然后将其分配给传输，如下所示：

```
if(!$classe = $em->getRepository('PSPSchoolBundle:Classe')->find(-2))
    {
        throw $this->createNotFoundException('Classe[id='.$id.'] does not exist.');
    }

    $transfer->setClasse($classe); 
```

在实际使用 StudentType 创建表单之前...

希望这可以帮助某人。

# windows-mobile - 适用于 Windows Mobile 5 的 RunAsDate 应用程序？

> ID：12437994
> 
> 赞同：0
> 
> 时间：2012-09-15T13:58:19.010
> 
> 标签：windows-mobile, runas

有一个适用于 Windows O/S 的名为 RunaAsDate 的便捷应用程序，但我找不到适用于 Windows Mobile 5 的此类应用程序。我需要它来扩展名为 SprintDB Pro 4 的应用程序的试用版，因为 SprintDB 似乎已经过时了业务，不再出售许可证。我不希望每次使用该应用程序时都必须不断更改 PDA 的时钟设置。如果有人有任何见解，请告诉我。提前谢谢你，纳撒尼尔

# php - 如何修复我的 jquery ajax 函数其他函数有效但 ajax 没有

> ID：12437996
> 
> 赞同：0
> 
> 时间：2012-09-15T13:58:29.530
> 
> 标签：php, html, jquery

---------------------------------------PHP 代码---------- ------:

```
 <?php

$wtype = $_POST['wtype'];

$attributes = array();

if($wtype == 'Ninja'){
    $attributes['health'] = '40-60';
    $attributes['attack'] = '60-70';
    $attributes['defense'] = '20-30';
    $attributes['speed'] = '90-100';
    $attributes['evade'] = '0.3-0.5';
}
else if($wtype == 'Samurai'){
    $attributes['health'] = '60-100';
    $attributes['attack'] = '75-80';
    $attributes['defense'] = '35-40';
    $attributes['speed'] = '60-80';
    $attributes['evade'] = '0.3-0.4';
}
else if($wtype == 'Brawler'){
    $attributes['health'] = '90-100';
    $attributes['attack'] = '65-75';
    $attributes['defense'] = '40-50';
    $attributes['speed'] = '40-65';
    $attributes['evade'] = '0.3-0.35';
}

echo json_encode($attributes);

?> 
```

---------------------------------------HMTL 代码---------- ------:

```
 <div id="warriors">
        <form id="blue_team">
            <p>
                <label class="team">Blue Team</label>
            </p>
            <p>
                <a href="#Naruto"><img class="blue_img" src="resources/naruto.png" title="Ninja" alt="Naruto"></a>
                <a href="#Sasuke"><img class="blue_img" src="resources/sasuke.png" title="Samurai" alt="Sasuke"></a>
                <a href="#Sakura"><img class="blue_img" src="resources/sakura.png" title="Brawler" alt="Sakura"></a>
            </p>
            <p>
                <label>Name:</label>
                    <input id="blue_name" type="text" readonly="readonly">
                <label>Type:</label>
                    <input id="blue_type" type="text" readonly="readonly">
            </p>
        </form>

    <!--Blue Dialog-->
    <div title="Warrior Name - Blue" id="blue_form" class="blue_dialog">
        <form>
            <p>
                <label>Name:</label>
                    <input id="name" type="text">
            </p>
        </form>
        <table>

        <table>
    </div> 
```

---------------------------------------JS 代码---------- ------:

```
<script>
    $(function() {
        $("button").button();
        $(".blue_img").click(function() {
            var blue_type = $(this).attr("title").trim();
            $.ajax({
                url: "get_attributes.php",
                type: "post",
                datatype: "json",
                data: {wtype: blue_type },
                success: function(data) {
                    var toAppend = '';
                    if(typeof data === "object"){
                        for(var i=0;i<data.length;i++){
                            var attributes = data[i];
                            toAppend += "<tr><td>"+data[i]['health']+"</td></tr>";
                            toAppend += "<tr><td>"+data[i]['attack']+"</td></tr>";
                            toAppend += "<tr><td>"+data[i]['defense']+"</td></tr>";
                            toAppend += "<tr><td>"+data[i]['speed']+"</td></tr>";
                            toAppend += "<tr><td>"+data[i]['evade']+"</td></tr>";
                        }
                        $("#blue_form table").append(toAppend);
                    }
                }
            });
            $("#blue_form #name").val($(this).attr("alt").trim());
            $("#blue_form").dialog({
                    width:250,
                    resizable:false,
                    modal:true,
                    buttons: {
                        "Done": function() {
                            $("#blue_name").val($("#blue_form #name").val().trim());
                            $("#blue_type").val(blue_type);
                            $("#blue_form").hide(400);
                            $(this).dialog("close");
                        }
                    }
            });
        });
    });
</script> 
```

请我期待一个数据表输出到#blue_form，但我没有得到任何数据。但我的其他功能运行良好。但是当我看到 javascript 控制台时，它会识别方法 post

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:33:28.550

您需要了解的第一件事是使用 post 方法而不是 get 没有任何效果。Post 方法相对较慢，它首先发送标头而不是数据

在 jquery ajax 块中使用此代码

```
<script>
    $(function() {
        $("button").button();
        $(".blue_img").click(function() {
            var blue_type = $(this).attr("title").trim();
            $.ajax({
                url: "get_attributes.php",
                type: "post",
                datatype: "json",
                data: {wtype: blue_type },
                success: function(data) {
                    var toAppend = '';
                    var newdata=$.parseJSON(data);//first decode json and get array

                            toAppend += "<tr><td>"+newdata['health']+"</td></tr>";
                            toAppend += "<tr><td>"+newdata['attack']+"</td></tr>";
                            toAppend += "<tr><td>"+newdata['defense']+"</td></tr>";
                            toAppend += "<tr><td>"+newdata['speed']+"</td></tr>";
                            toAppend += "<tr><td>"+newdata['evade']+"</td></tr>";

                        $("#blue_form table").append(toAppend);
                    }
                }
            });
            $("#blue_form #name").val($(this).attr("alt").trim());
            $("#blue_form").dialog({
                    width:250,
                    resizable:false,
                    modal:true,
                    buttons: {
                        "Done": function() {
                            $("#blue_name").val($("#blue_form #name").val().trim());
                            $("#blue_type").val(blue_type);
                            $("#blue_form").hide(400);
                            $(this).dialog("close");
                        }
                    }
            });
        });
    });
</script> 
```

此代码将完美运行

//jsonencode 的输出不是对象而是编码字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:33:47.500

从你的代码我不确定你为什么需要一个循环，你可以做类似的事情

```
success: function(data) {
    var toAppend = '';
    if(typeof data === "object") {
        toAppend += "<tr><td>"+data['health']+"</td></tr>";
        toAppend += "<tr><td>"+data['attack']+"</td></tr>";
        toAppend += "<tr><td>"+data['defense']+"</td></tr>";
        toAppend += "<tr><td>"+data['speed']+"</td></tr>";
        toAppend += "<tr><td>"+data['evade']+"</td></tr>";
        $("#blue_form table").append(toAppend);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:40:56.327

```
header("Content-Type: application/json"); 
```

我刚刚将此添加到我的 php.ini 文件中。感谢大家的帮助，真的很感激。tsk 只是一行代码 cud 修复