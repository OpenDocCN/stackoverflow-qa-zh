# StackOverflow 问答 12256000-12256999

# php - 如何动态设置属性到模板（包括css）PHP

> ID：12256002
> 
> 赞同：2
> 
> 时间：2012-09-04T02:17:20.947
> 
> 标签：php, css, templates, properties

我必须做一个网站，允许管理员创建其他用户可以注册的“事件”。每个“事件”都有自己的用户。当管理员创建事件时，他必须从预定义的模板（当然是我之前创建的）中选择一个设计，当我说设计时，我的意思是菜单和其他东西的位置。但这是“问题”，例如，管理员从调色板中选择菜单的背景或文本颜色。

由于每个设计模板都有自己的 CSS 文件，我不知道如何将背景设置为之前创建的“事件”的特定区域。

我在想，当我选择颜色时，我可以将它放入带有“事件”的数据库中，当有人想要查看事件时，我从数据库中获取它，使用 PHP 的 file_gets_contents 并替换 {这里是一些属性值} 与颜色值。你怎么看？。还有另一种方法吗？感谢您花时间回答和记住：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:21:21.517

将自定义颜色值保存在数据库或其他东西中。`style`然后只需在 html 标头的标记中设置这些 CSS 属性。这样，您只需设置可以在一个地方更改的属性。

就像是 ：

```
<style type="text/css">
custom_text_color  { color: $prop1_color; }
custom_background { background-color: $prop2_color; }
</style> 
```

然后，页面后面的 html 输出将保持不变：

```
<span class="custom_text_color">This is text in your custom color!</span> 
```

# c++ - 从类定义中的外部文件访问函数

> ID：12256004
> 
> 赞同：3
> 
> 时间：2012-09-04T02:17:39.240
> 
> 标签：c++, arduino

我正在尝试从另一个文件访问函数以在我的类定义中使用：

```
// math.cpp
int Sum(int a, int b){
  return (a + b);
}

// my_class.cpp
#include <math.cpp>
#include <my_class.h>

int ComputeSomething() {
  ...

  return ::Sum(num1, num2);
} 
```

尽管我尽了最大的努力，但我无法让编译器吐出除`::Sum has not been declared`或之外的任何内容`Sum was not declared in this scope.`

我正在尝试用 C++ 编写代码组织，感谢任何帮助。

值得注意的是，我正在为 Arduino 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:38:52.570

为了能够访问用户定义库中的函数，最好将该库分成一个 .h（或 .hpp）和一个 .cpp 文件。我知道您实际上已经这样做了，但是为了找到解决方案，您尝试了各种选项——其中包括 .cpp 文件。

尽管如此，为了确保事情按预期工作，函数和类的声明应该进入 .h 文件，最好用类似的东西保护

```
#ifndef MY_H_FILE
#define MY_H_FILE

/* ..Declarations.. */

#endif 
```

然后包含 .h 文件（我假设它被命名为*my.h*），要么使用

```
#include "my.h"    // path relative to build directory 
```

或者

```
#include <my.h>    // path relative to any of the include paths 
```

后者仅在*my.h*位于编译器先前已知的**包含路径**`-I`上时才有效（例如，使用GCC 中的命令行选项指定的路径）。如果给定的 .h 文件的路径相对于您正在构建**的目录，则前者有效。**

最后，不要使用可能与系统库混淆的文件名（例如“math.h”），尤其是在使用`<...>`语法时，因为包含路径肯定会包含系统库头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:19:04.480

您是否按照[此处](http://www.arduino.cc/en/Hacking/Libraries)给出的说明进行操作？

> 自 0017 版起，用户创建的库位于默认草图目录的子目录中。例如，在 OSX 上，新目录是 ~/Documents/Arduino/libraries/。在 Windows 上，它将是 My Documents\Arduino\libraries。要添加您自己的库，请在库目录中使用您的库名称创建一个新目录。该文件夹应包含一个带有您的代码的 C 或 C++ 文件以及一个带有您的函数和变量声明的头文件。然后它将出现在 Sketch | Arduino IDE 中的 Import Library 菜单。

# java - 为什么 mongodb 似乎保存了一些二进制对象而不保存其他对象？

> ID：12256005
> 
> 赞同：7
> 
> 时间：2012-09-04T02:17:44.773
> 
> 标签：java, mongodb, cometd

我不确定从哪里开始或哪些信息是相关的，请让我知道哪些附加信息可能对解决此问题有用。

我正在开发一个简单的 cometd 应用程序，并且使用 mongodb 作为我的存储后端。当应用程序启动时，我获得了一个 mongodb 实例，并将该实例用于所有查询。这实际上是由 mongo java 驱动程序文档推荐的，如下所述：[http](http://www.mongodb.org/display/DOCS/Java+Driver+Concurrency) ://www.mongodb.org/display/DOCS/Java+Driver+Concurrency 。我抓住了稻草，认为这个问题与线程安全有关，但根据该链接，mongodb 是完全线程安全的。

这就是有趣的地方。我有一个扩展类`BasicDBObject`。

```
public class MyBasicDBObject {

    private static final String MAP = "map";

    public boolean updateMapAnd(String submap, String key, byte[] value) {
         Map topMap = (Map)this.get(MAP);
         Map embeddedMap = topMap.get(submap);
         byte[] oldValue = embeddedMap.get(key);

         newValue = UtilityClass.binaryAnd(oldValue, value);

         embeddedMap.put(key, newValue);
         topMap.put(submap, embeddedMap);
         this.put(MAP, topMap);
    }

    public boolean updateMapXor(String submap, String key, byte[] value) {
         Map topMap = (Map)this.get(MAP);
         Map embeddedMap = topMap.get(submap);
         byte[] oldValue = embeddedMap.get(key);

         newValue = UtilityClass.binaryXor(oldValue, value);

         embeddedMap.put(key, newValue);
         topMap.put(submap, embeddedMap);
         this.put(MAP, topMap);
    }
} 
```

接下来是两个扩展的骨架类`MyBasicDBObject`。

```
public class FirstDBObject extends MyBasicDBObject { //no code }

public class SecondDBObject extends MyBasicDBObject { //no code } 
```

我以这种方式设置类的唯一原因是提高代码在处理同一范围内的这两个对象时的可读性。这让我可以执行以下操作...

```
//a cometd service callback
public void updateMapObjectsFoo(ServerSession remote, Message message) {

    //locate the objects to update...
    FirstDBObject first = (FirstDBObject) firstCollection.findOne({ ... });
    SecondDBObject second = (SecondDBObject) secondCollection.findOne({ ... });

    //update them as follows
    first.updateMapAnd("default", "someKey1", newBinaryData1);
    second.updateMapAnd("default", "someKey2", newBinaryData2);

    //save (update) them to their respective collections
    firstCollection.save(first);
    secondCollection.save(second);
}

public void updateMapObjectsBar(ServerSession remote, Message message) {

    //locate the objects to update...
    FirstDBObject first = (FirstDBObject) firstCollection.findOne({ ... });
    SecondDBObject second = (SecondDBObject) secondCollection.findOne({ ... });

    /** 
     * the only difference is these two calls 
     */
    first.updateMapXor("default", "someKey1", newBinaryData1);
    second.updateMapXor("default", "someKey2", newBinaryData2);

    //save (update) them to their respective collections
    firstCollection.save(first);
    secondCollection.save(second);
} 
```

通过遍历传递的字节数组，按位和按位`UtilityClass`命名方法完全一样。`&``^`

这是我完全迷路的地方。 `updateMapObjectsFoo()`完全按预期工作，既`first`反映`second`了数据库中的变化。 `updateMapObjectsBar()`另一方面，只能设法正确更新`first`。

通过调试检查`updateMapObjectsBar()`表明二进制对象实际上在两个对象上都正确更新了，但是当我前往 mongo shell 调查问题时，我发现`first`数据库中已更新但`second`没有更新。我从哪里得到线程安全与它有关的想法？让我烦恼的唯一区别是`secondCollection`其他cometd服务使用了它，而`firstCollection`没有使用。一方面这似乎相关，但另一方面则不相关，因为`Foo`有效且`Bar`无效。

我已经将代码拆开并将其重新组合在一起，并且我不断地回到同样的问题。这里到底发生了什么？

似乎我遗漏了最相关的部分，即 java 泛型的噩梦和 mongodb 驱动程序对语言这一特性的依赖。 `BasicDBObject`本质上是 a 的包装器`Map<String, Object>`。问题是，一旦您在该地图中存储了一个对象，您必须将其转换回您将其放入其中时的状态。是的，这可能看起来很明显，在发布这个问题之前我就很清楚了。

我无法确定到底发生了什么，但我会向 java + mongodb 用户提供这个建议。您将进行大量转换，并且您的数据结构越复杂，您需要的转换就越多。长话短说，不要这样做：

```
DBObject obj = (DBObject) collection.findOne(new BasicDBObject("_id", new ObjectId((String)anotherObj.get("objId")))); 
```

当你在做快速原型时，一个班轮很诱人，但当你开始一遍又一遍地做这件事时，你肯定会犯错误。现在写更多代码，以后少受挫折：

```
DBObject query = new DBObject();
String objId = (String) anotherObj.get("objId");
query.put("_id", new ObjectId(objId));
obj = (DBObject) collection.findOne(query); 
```

我认为这很烦人，但我应该期望直接与 Mongo 交互，而不是使用某种库来让我的生活更轻松。我在这件事上自欺欺人，但希望有人能从我的错误中吸取教训，为自己省去很多挫折。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:21:21.910

这很容易成为多线程问题。如果只有一个 Mongo 实例，那么 Mongo、DB 和 DBCollection 对象是线程安全的，这是正确的，但 DBObjects**不是**线程安全的。但即使它们是线程安全的，您的 updateMapObjectsFoo/Bar 方法也无法确保它们是数据库上的原子操作。

不幸的是，您需要对代码进行的更改比仅仅散布一些“同步”关键字更加激烈。看看[http://www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)是否不能帮助您了解问题的范围和一些潜在的解决方案。

# c# - 存储到数组时删除空格

> ID：12256006
> 
> 赞同：7
> 
> 时间：2012-09-04T02:17:47.220
> 
> 标签：c#, arrays, trim

测试代码：

```
string files = "C:\Hello; C:\Hi; D:\Goodmorning; D:\Goodafternoon; E:\Goodevening";
string[] paths = files.Split(';');

foreach (string s in paths)
{
    MessageBox.Show(s);
} 
```

如何在将空格存储到数组之前删除空格？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T02:21:26.837

您可以使用`String.Trim`方法，如下所示：

```
foreach (string s in paths)
{
    MessageBox.Show(s.Trim());
} 
```

或者，您可以在输入之前消除空格`paths`，如下所示：

```
files.Split(new[]{';', ' '}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T02:22:00.623

.NET 2.0

```
string[] paths = Array.ConvertAll(files.Split(';'), a => a.Trim()); 
```

.NET 3.5

```
string[] paths = files.Split(';').Select(a => a.Trim()).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T02:25:36.483

没关系，我解决了。。

我的代码：

```
string files = "C:\Hello; C:\Hi; D:\Goodmorning; D:\Goodafternoon; E:\Goodevening";
string[] paths = files.Trim().Split(';');
List<string> cleanPath = new List<string>();

 int x = 0;
 foreach (string s in paths)
 {
     cleanPath.Add(s.Trim());
 }

 foreach(string viewList in cleanPath)
 {
      x++;
      MessageBox.Show(x + ".)" +viewList);//I put x.) just to know whether it still has whitespace characters.
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T02:28:28.717

怎么样：

> `string[] paths = Regex.Split(files, @";\W+");`

当然，您在 RegEx 中也有一些额外的灵活性。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-04T02:22:06.433

你可以使用这个 PHP 函数： $var = str_replace(" ", "", $var);

# html - 如何在页面上显示部分文本列

> ID：12256019
> 
> 赞同：0
> 
> 时间：2012-09-04T02:19:49.473
> 
> 标签：html, css, windows-8

当您在 CSS 中为包含一堆文本的 div 指定 column-width 属性时，实际宽度似乎会自动调整，以便准确的列数适合页面。例如，如果指定了 400 像素的列宽并且实际上有 1000 像素的空间，那么它不会显示 2.5 列文本（0.5 列向右溢出以邀请用户平移），而是显示一个偶数2 列文本。

我在 dev.windows.com 中发现，如果您为所涉及的所有宽度属性（宽度、列宽、列间隙和列规则宽度）指定值，那么您可以实现这一点，并且可行，但是它要求您确定包含 div 的宽度，这看起来很愚蠢，因为您希望它流动。

这是我的 CSS 无法正常工作...

```
.csscolumns .columns {
    columns: 400px;
    overflow-x: scroll;
    height: 600px;
    padding: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:20:48.630

您是否尝试过在 CSS 中使用“溢出”进行调整？对选定的元素尝试以下操作：

```
overflow: hidden; 
```

这将隐藏所选元素的任何“溢出”内容，在父元素后面。

# java - 使用 XStream 对 Externalizable 类使用默认的 Java 序列化

> ID：12256027
> 
> 赞同：4
> 
> 时间：2012-09-04T02:21:24.473
> 
> 标签：java, serialization, xstream, externalizable

我使用 XStream 作为我的应用程序的一部分来序列化对象。对于其中一个用例，我必须序列化一些实现 Externalizable 接口的对象。对于我的用例，我想使用本机 Java 序列化对它们进行序列化。

我在互联网上找到了一个链接[http://old.nabble.com/How-to-remove-Externalizable-Converter-td22747484.html](http://old.nabble.com/How-to-remove-Externalizable-Converter-td22747484.html)，它帮助我解决了这个问题并开始使用反射转换器来处理可外部化的对象。

在测试应用程序时，我看到应用程序在高并发访问期间在转换器代码中花费了大量时间（10 秒）。我可以看到问题出在[FieldDictionary](http://svn.codehaus.org/xstream/trunk/xstream/src/java/com/thoughtworks/xstream/converters/reflection/FieldDictionary.java)的 buildMap 方法中。

我想知道是否有更好的方法来解决我原来的问题？在具有高并发环境时，反射转换器的性能是否会变差？

提供一些关于环境的额外上下文。它是一个 Web 应用程序，在请求处理期间发生序列化，应用程序可以有 100 个并发线程。

我非常感谢有关此的任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:12:53.870

这在技术上不是一个答案..但我希望它无论如何都会有所帮助。

在创建用于生物分子研究建模的基于 Java Swing 的桌面应用程序时，出于性能原因，我们将非常复杂且相互关联的对象图序列化到磁盘。

即使在解决了 Externalization 和 Serializable 相关问题之后，我们也不得不放弃整个方法并重新开始，因为 Java 序列化对对象结构/名称等非常敏感。这意味着对模型的无辜重构导致了生产中的重大崩溃，当用户尝试加载旧的序列化模型时。

最终我们创建了一个数据存储友好的对象结构（对图中的其他节点没有强相互引用），并将这个结构序列化。这比序列化和反序列化原始图更简单、更不容易出错并且更快。这也意味着我们可以随意重构/修改我们的域图对象，只要适配器（将域对象转换为数据存储对象的组件）保持正确更新。

# javascript - 函数不返回任何值

> ID：12256032
> 
> 赞同：1
> 
> 时间：2012-09-04T02:21:48.107
> 
> 标签：javascript, jquery, function, return

我正在制作这个功能：

```
var Util = {
    clickOnCheck : function(evt){
        if($(evt.target).parent().hasClass("remainingSub")){
            var targetDiv = ".completedSub";
        } else if($(evt.target).parent().hasClass("completedSub")){
            targetDiv = ".remainingSub";
        }

        $(evt.target).parent()
                .fadeOut(200)
                    .parent()
                        .siblings(targetDiv)
                        .prepend($(evt.target).parent())
                        .end()
                    .end()
                .find(".optTrigger, .subHolder").toggle()
                .end()
            .fadeIn(100);

        return $(evt.target);
    }        
} 
```

我这样做是因为我希望在几个`click`事件中多次出现这种行为，而且我想让事件目标在该函数完成其工作后对其执行其他操作。

但似乎由于某种原因我没有得到那个对象，我试过这个：

```
$("#completedTasks").on("click", ".completedSub .checkButton", function(evt){
    var checkBtn = Util.clickOnCheck(evt);
    console.log(checkBtn);      
}); 
```

但是当我运行它时，我在控制台日志中什么也没有。

我在这里想要的只是获取`.checkButton`被点击按钮的参考。

# javascript - ckeditor 中的超链接，href 不接受双引号

> ID：12256035
> 
> 赞同：1
> 
> 时间：2012-09-04T02:22:34.003
> 
> 标签：javascript, ckeditor

我正在尝试使用 ckeditor 添加链接。

```
<a href="$JSPFILENAMES.getAbsoluteJSPName("LOGIN_JSP")?type=7">login</a> 
```

我单击 ckeditor 上的超链接图标并粘贴 $JSPFILENAMES.getAbsoluteJSPName("LOGIN_JSP")?type=7。当我这样做时，链接是使用 href="$JSPFILENAMES.getAbsoluteJSPName(" 创建的。删除第一个双引号之后的任何内容。我需要找出解决这个问题的方法。我可以想到 2 个我无法解决的解决方案由于各种限制而无法实施。

解决方案 1：使用单引号而不是像登录这样的双引号创建带 href 的超链接。ckeditor 是否有设置来实现这一点？

Sultion 2：创建一个可以插入链接的自定义下拉菜单。这样我可以用单引号创建href。但这也不起作用，因为如果我使用引号或双引号或 "，ckeditor 将失败。或在我需要使用以下代码插入的文本中转义字符。

```
CKEDITOR.plugins.add( 'links_tokens',   {   
    requires : ['richcombo'], //, 'styles' ],
    init : function( editor ) {
        var config = editor.config,
        lang = editor.lang.format;  
        var login_link = '<a href=&quot;$JSPFILENAMES.getAbsoluteJSPName(&quot;LOGIN_JSP&quot;)?type=7&quot;>login</a>';        
        var links_tags = []; 
        links_tags[0]=[login_link, "Login", "Login"];
        links_tags[1]=["$company.getcompany_url()", "URL", "URL"];

        editor.ui.addRichCombo( 'links_tokens', {
           label : "Links tokens",
           title :"Links tokens",
           voiceLabel : "Links tokens",
           className : 'cke_format',
           multiSelect : false,

           panel : {
              css : [ config.contentsCss, CKEDITOR.getUrl( editor.skinPath + 'editor.css' ) ],
              voiceLabel : lang.panelVoiceLabel
           },

           init : function() {
              this.startGroup( "Links tokens" );
              for (var this_tag in links_tags){
                 this.add(links_tags[this_tag][0], links_tags[this_tag][1], links_tags[this_tag][2]);
              }
           },

           onClick : function( value ) {         
              editor.focus();
              editor.fire( 'saveSnapshot' );
              editor.insertHtml(value);
              editor.fire( 'saveSnapshot' );
           }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:31:23.220

双引号内不能有双引号。您可以在单引号内使用双引号，也可以在双引号内使用单引号。如果您确实想在双引号内使用双引号，则需要在引号前添加正斜杠，即： "$JSPFILENAMES.getAbsoluteJSPName(\"LOGIN_JSP\")?type=7"

# unix - 如何在 Unix 中将命令行输入传递给外部进程

> ID：12256036
> 
> 赞同：0
> 
> 时间：2012-09-04T02:22:36.777
> 
> 标签：unix, command-line, input, fork

我的程序运行（执行..）一个外部程序。运行时，外部程序要求用户 [Yes/No] 继续下一步。

我如何从我的程序将 [Yes] 传递给外部程序，而不是在命令行中键入 [yes]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:43:12.480

在命令行上提供“是”响应的经典方式是一个`-y`选项（通常使用一个并行`-n`选项来指示“否” - 请参阅 参考资料`fsck(1)`）。

也有争论的余地，运行程序应该是“是的，我的意思是这样做”的操作。但是，有时指定“是的，我真的打算这样做”是有意义的（例如一次性初始化 DBMS 实例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:02:33.640

除非外部程序支持相应的标志（请参阅@Jonathan Leffler 的答案），否则您可以控制该程序的源并可以添加它，您必须模拟“是”输入。

选项：

*   [`yes`](http://linux.die.net/man/1/yes)尝试通过将帮助应用程序的输出通过管道传输到它的 stdin: 来启动外部程序`yes | external_program`。`yes`是一个简单的工具，如果你没有它，它只会不断地将“y”写入它的标准输出。

*   手动将“是”写入外部程序的标准输入。

这两个选项都要求您以一种或另一种方式使用管道。有关如何执行此操作的更多信息，请参阅[此内容。](http://www.spinics.net/lists/newbies/msg29197.html)

# java - 原始类型与包装类

> ID：12256045
> 
> 赞同：-2
> 
> 时间：2012-09-04T02:23:30.503
> 
> 标签：java

据我所知，原始类型具有以下特点：

```
Primitive Type  |  Size   |  Minimum  |     Maximum    |  Wrapper Type
boolean         |1—8 bits |   false   |     true       |  Boolean
char            | 16 bits | Unicode 0 | Unicode 2^16-1 |  Character
byte            |  8 bits |  -128     |     +127       |  Byte  
short           | 16 bits |  -2^15    |     +2^15-1    |  Short
int             | 32 bits |  -2^31    |     +2^31-1    |  Integer
long            | 64 bits |  -2^63    |     +2^63-1    |  Long
float           | 32 bits |  IEEE754  |     IEEE754    |  Float
double          | 64 bits |  IEEE754  |     IEEE754    |  Double
void            |    —    |     —     |        —       |  Void 
```

我不知道如何使用这些包装类来实现一些示例代码。我如何能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:28:12.247

您以相同的方式初始化和使用类：

```
int i = 10;
Integer i = 10;

boolean isTrue = true;
Boolean isTrue = true; 
```

# objective-c - 如何统计一个可可应用的启动时间？

> ID：12256050
> 
> 赞同：2
> 
> 时间：2012-09-04T02:25:13.387
> 
> 标签：objective-c, ios, macos, cocoa

我有一个可可应用程序，我想获取从应用程序启动到启动成功的时间。然后将时间发布到我的服务器。有人可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:48:35.563

所有这些测量都不会考虑运行时负载。类加载和！框架加载

它发生在您的主设备甚至仪器无法正确配置它之前，尽管它会显示“运行应用程序”和主设备之间经过了一段时间！

* * *

这种负载可能会对您的时间产生相当大的影响，尤其是当框架已被换出/您进行冷启动时

与苹果工程师一起在 WWDC 上尝试过，我们可以重现从 3 秒（我的应用程序的正常时间）到 10 秒（我们之前使用 safari 时！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T02:42:12.087

定义您的起点（例如 application:didFinishLaunchingWithOptions:) 和终点（例如主视图控制器上的 viewDidLoad）。创建一个具有开始和停止调用的类（带有 + 消息）。停止后，将时间发布到您的服务器（当然是异步的）。

# google-drive-api - 在 Android 上插入 Google Drive API 后保留文件的修改时间

> ID：12256055
> 
> 赞同：2
> 
> 时间：2012-09-04T02:26:30.287
> 
> 标签：google-drive-api

我正在通过 Android 上的 API 将文件插入 Google Drive。上传的任何文件都采用上传时的修改时间，而不是原始文件的修改时间。如果我通过桌面上的 Google Drive App 上传内容，则会保留文件的原始修改时间。

我尝试在 File 对象中使用 setModifiedDate() 方法，但它似乎不起作用或者我可能发送了错误的日期格式？这两种格式我都试过了：

```
2012-08-09T05:34:36-07:00
2012-08-09T05:34:36-0700 
```

两者似乎都不起作用。有没有更简单的方法让它保留文件的原始修改时间而无需手动设置（无论如何我都无法开始工作）？

我使用的代码与此处的示例相同：[https ://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T02:56:05.913

我会在这里回答我自己的问题。

事实证明，我只需要使用 setModifiedDate()（我已经在这样做了），但我不需要使用 setDescription() 设置描述。我不确定是否存在限制或错误，但是一旦我删除了我设置的描述，那么我使用 setModifiedDate() 设置的日期就开始起作用了。

我还在这里使用 API Explorer 确认了相同的行为： [https ://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:09:55.767

你需要两者都做。要更新的`setModifiedDate`查询参数意味着`modifiedDate`您传递的字段将用作该文件的修改日期。所以简而言之，你需要两者都做。

这对于同步用例非常有用。

# screenshot - 服务器端网页截图 - Windows Server

> ID：12256059
> 
> 赞同：0
> 
> 时间：2012-09-04T02:27:35.820
> 
> 标签：screenshot, capture, printscreen

我编写了一个脚本来配置一堆项目并使用 javascript 将其显示在屏幕上。现在我们正在尝试通过浏览器对其进行截图。这个特定的网页是供公众使用的，一旦截图，我们会将照片发布到 Facebook 上供用户使用。

我尝试了许多截屏服务，但它们都很慢，大多数情况下平均需要大约 25 - 25 秒来拍摄并将其保存在服务器上。我们所有的用户都会在这段时间内离开 =(

我还尝试了来自[http://www.websitescreenshots.com/](http://www.websitescreenshots.com/)的应用程序，虽然它很棒，但我无法让它用 js 呈现我们的页面。

我发现这在屏幕截图软件中很常见，我什至尝试利用 Wordpress MShots 的免费网络服务。

虽然它拍得很好，但你永远无法判断它需要多长时间，而且对于制作网站来说还不够好。

那么任何人都可以推荐一个实用程序，它允许通过命令行访问 URL 的屏幕截图，该命令行可以呈现 JS 并且还可以在 windows server 2008 上运行？我没有运气尝试找到执行此操作的应用程序..

# axapta - 如何根据条件为真使用数据源？

> ID：12256065
> 
> 赞同：0
> 
> 时间：2012-09-04T02:28:46.753
> 
> 标签：axapta, dynamics-ax-2012

我目前正在尝试构建一个查询，该查询基于特定条件为真使用数据源。说“如果值 == 1，使用数据源 1。如果值 == 2，使用数据源 2。

这些表已经是我的数据源的几个级别。

在任何地方都无法找到这方面的信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:46:12.707

您没有指定表和关系，而是使用这些数据源作为示例：

*   客户表
    *   CustTrans (JoinMode: ExistsJoin)
    *   CustInvoiceJour (JoinMode: ExistsJoin)

假设您想在*or* `CustTrans`上存在 join `CustInvoiceJour`？

这可以通过启用和禁用相应的数据源来实现：

```
custTable_ds.query().datasourceTable(tableNum(CustTrans)).enabled(!useInvoice);
custTable_ds.query().datasourceTable(tableNum(CustInvoiceJour )).enabled(useInvoice); 
```

这应该在数据源`super()`的`executeQuery`方法之前完成。`CustTable`

# php - Symfony 会话值在特定服务器上丢失

> ID：12256072
> 
> 赞同：3
> 
> 时间：2012-09-04T02:29:53.893
> 
> 标签：php, symfony-1.4, session-timeout

**摘要：**在 PHP Symfony 1.4.8 上开发的应用程序会随机丢失 symfony 会话值，但仅在特定的生产环境中：**数组** *symfony/user/sfUser/attributes*在用户认证后的几秒钟或几分钟内变空。在开发机器或任何其他生产环境中不会出现问题。

似乎很明显，该问题特定于故障服务器，但是，我想知道是否有任何我可能缺少的 PHP / Apache / Symfony 配置可以解决故障服务器上的问题？

**失败的服务器 PHP 信息：**

*   PHP 版本 5.3.10
*   系统 SunOS 5.10
*   Apache/1.3.41 (Unix) PHP/5.3.10 mod_ssl/2.8.31 OpenSSL/0.9.8p
*   每个孩子的最大请求数：0 - 保持活动状态：开启 - 每个连接的最大请求数：100
*   超时连接：300 - 保持活动：15
*   会话支持：**启用**
*   注册的保存处理程序：**文件用户 sqlite**
*   注册的序列化程序处理程序： **php php_binary**
*   session.cache_expire: **180**
*   session.cache_limiter： **无缓存**
*   session.cookie_lifetime: **0**
*   session.gc_divisor: **100**
*   session.gc_maxlifetime： **1440**
*   session.gc_probability: **1**
*   session.use_cookies：**开启**
*   session.use_only_cookies：**开启**

**工作服务器 PHP 信息：**

*   PHP 版本 5.2.17
*   系统 Linux 2.6.32.59-sg2 #3 SMP
*   Apache/1.3.42 (Unix) mod_gzip/1.3.26.1a mod_auth_passthrough/1.8 mod_log_bytes/1.2 mod_bwlimited/1.4 FrontPage/5.0.2.2635 mod_ssl/2.8.31 OpenSSL/0.9.8e-fips-rhel5
*   会话支持：**启用**
*   注册的保存处理程序：**文件用户 sqlite memcache**
*   注册的序列化程序处理程序： **php php_binary wddx**
*   session.cache_expire: **180**
*   session.cache_limiter： **无缓存**
*   session.cookie_lifetime: **0**
*   session.gc_divisor: **1000**
*   session.gc_maxlifetime： **1440**
*   session.gc_probability: **1**
*   session.use_cookies：**开启**
*   session.use_only_cookies：**关闭**

**所有环境下两台服务器的 Symfony 会话设置：**

```
 storage:
    class: sfSessionStorage
    param:
      session_name: webapp

  user:
    class: myUser
    param:
      timeout: 7200 
```

我已经检查过这个类似的问题[Symfony 1.4 sessions random lost](https://stackoverflow.com/questions/10471236/symfony-1-4-sessions-randomly-lost)，但是我没有使用 sfMemcacheCache 类。

如果您可能需要任何额外信息来回答这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:28:11.840

这可能是一个显而易见的检查，但也许服务器的磁盘空间不足？

默认会话存储是基于文件的，因此如果您随机丢失数据，听起来您遇到了一些硬盘驱动器/文件系统问题。

如果您仍然好奇，可以尝试将会话[存储的位置更改为另一个位置](http://php.net/manual/en/function.session-save-path.php)，希望在不同的磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T11:23:04.160

您可能需要在文件中将以下设置设置`factories.yml`为：

```
 storage:
    class: sfSessionStorage
    param:
      session_name: webapp
      session_cookie_lifetime: 2678400 # number of seconds for 1 month 
```

然后删除您的`cache`并重新加载网站，您`SESSION COOKIE`将保持活跃 1 个月。

# php - 如何在文件 php 中添加额外的文本

> ID：12256073
> 
> 赞同：2
> 
> 时间：2012-09-04T02:29:59.450
> 
> 标签：php, text, fwrite

这是我的代码：

```
$open = fopen('emails.txt', 'w+');                  
if ($open) {
    $content = "$first $last <$email>,";
    if (fwrite($open, $content)) {
         // ...
     }
} 
```

但是，当我运行它时，它只是替换了我在文件中已有的文本。我如何只添加到文件中，而不是替换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:30:33.850

您必须以附加模式打开文件，将`a`其作为第二个参数传递给`fopen()`：

```
$open = fopen("emails.txt", 'a'); 
```

然后，您写入文件的数据将附加到文件的末尾，保留之前写入文件的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:36:01.367

如果您只在每次请求时将一个文本块附加到文件中，您也可以查看[`file_put_contents()`](http://www.php.net/file_put_contents)：

```
file_put_contents('emails.txt', $content, FILE_APPEND); 
```

比必须写`fopen()`,`fwrite()`和更短`fclose()`，尽管后者或多或少是可选的 :)

# html - 保存使用 /wysihtml5 编辑时所做的更改

> ID：12256074
> 
> 赞同：3
> 
> 时间：2012-09-04T02:30:21.597
> 
> 标签：html, save, editing

我正在寻找一些关于如何保存使用 /wysihtml5 完成的编辑的指导。

我使用了几种不同的搜索词组合进行了谷歌搜索，但几乎所有我得到的点击都是 github。我浏览了该站点上的示例，但找不到任何解释一旦用户编辑页面后如何保存更改的内容。

我确实有一些 php 和 sql 知识，但想要一些指针，指出我需要做些什么来保存使用 /wysihtml5 进行的更改。其他说明看起来非常全面，所以我想知道为什么这方面似乎缺失了。

有人可以帮忙吗？

非常感谢

布伦达

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:43:41.227

根据编辑器的[入门](https://github.com/xing/wysihtml5/wiki/Getting-Started)页面，它通过用`<textarea>`富编辑器替换常规来工作：

> wysihtml5 采用 textarea 并将其转换为富文本编辑器。textarea 充当不支持的浏览器（例如 IE < 8）的后备。确保 textarea 元素有一个 id，以便我们以后可以从 javascript 轻松访问它。生成的富文本编辑器的行为和外观与 textarea 非常相似，因为行为（占位符、自动对焦等）和 css 样式将被复制。
> 
> **请注意**：文本区域将始终保存编辑器生成的标记。因此 wysihtml5 与表单顺利集成。

因此，编辑器的内容将始终作为 textarea 的值可用，您可以像使用常规表单元素一样使用它（提交表单，或使用 JavaScript 获取内容并使用 Ajax 将其发送到 PHP）。

例如，假设您将编辑器应用于以下内容：

```
<form action="somescript.php" method="POST">
    <textarea id="wysihtml5-textarea" name="wysihtml5-textarea"></textarea>
    <input type="submit" value="Submit form">
</form> 
```

如果您通过单击按钮提交表单，您的 php 脚本将收到内容`$_POST["wysihtml5-textarea"]`（更改 textarea 的*名称*以设置所需的键`$_POST`）。

如果要使用 JavaScript 获取值，请选择`<textarea>`by ID，然后访问元素的值：

```
var textarea = document.getElementById("wysihtml5-textarea");
alert(textarea.value); 
```

然后，您可以根据需要使用 Ajax 将该值传递给 PHP。实际保存数据的 PHP/SQL 实现取决于您，编辑器的代码只负责提供富文本编辑器和格式化功能。

注意：我从未使用过那个编辑器，所以我的回答可能不是 100% 准确的。

# macos - CTFramesetterSuggestFrameSizeWithConstraints() 在表格视图中每行关闭 1 点

> ID：12256075
> 
> 赞同：1
> 
> 时间：2012-09-04T02:30:22.487
> 
> 标签：macos, nstableview

我正在尝试将 CTFramesetterSuggestFrameSizeWithConstraints() 与 tableview:heightOfRow: 一起使用，输入带有 NSTableView 单元格属性的属性字符串。问题是它返回的值是 13.0 的倍数（13.0 表示 1 行，26.0 表示两行等），而不是预期的 14.0 倍数（对应于 [tableView rowHeight]。

```
NSDictionary * attributes = [[[[[tableView tableColumnWithIdentifier: @"Message"] dataCell] attributedStringValue]
                attributesAtIndex: 0 effectiveRange: NULL] retain];
NSAttributedString * attributedMessage = [[NSAttributedString alloc] initWithString: message attributes: attributes];
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attributedMessage);

CFRange range;
CGSize size = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, CFRangeMake(0, [attributedMessage length]), NULL, CGSizeMake([column width], CGFLOAT_MAX), &range);
CFRelease(framesetter);
[attributedMessage release];
return size.height; 
```

任何意见，将不胜感激。现在我正在通过硬编码每行增加一个点（13.0）来解决它，但我想以正确的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:47:54.613

我遇到了类似的问题，发现通过调整约束 rect 我可以获得我想要的输出。

就我而言：

```
CGSize s1 = CTFramesetterSuggestFrameSizeWithConstraints(self.framesetter, rangeToSize, NULL, CGSizeMake(size.width, CGFLOAT_MAX), NULL);
CGSize s2 = CTFramesetterSuggestFrameSizeWithConstraints(self.framesetter, rangeToSize, NULL, CGSizeMake(size.width, 100000), NULL); 
```

`s1`以结尾`{100, 23}`，`s2`以`{100, 24}`(WTF?!) 结尾。

尝试替换`CGSizeMake([column width], CGFLOAT_MAX)`为`CGSizeMake([column width], 10000)`

# c# - 嵌套泛型：为什么在这种情况下编译器不能推断类型参数？

> ID：12256076
> 
> 赞同：22
> 
> 时间：2012-09-04T02:30:25.390
> 
> 标签：c#, type-inference, nested-generics

当我遇到一个我不理解的类型推断错误时，我正在玩一个爱好项目。我已将其简化为以下简单示例。

我有以下类和功能：

```
class Foo { }
class Bar { }
class Baz { }

static T2 F<T1, T2>(Func<T1, T2> f) { return default(T2); }
static T3 G<T1, T2, T3>(Func<T1, Func<T2, T3>> f) { return default(T3); } 
```

现在考虑以下示例：

```
// 1\. F with explicit type arguments - Fine
F<Foo, Bar>(x => new Bar());

// 2\. F with implicit type arguments - Also fine, compiler infers <Foo, Bar>
F((Foo x) => new Bar());

// 3\. G with explicit type arguments - Still fine...
G<Foo, Bar, Baz>(x => y => new Baz());

// 4\. G with implicit type arguments - Bang!
// Compiler error: Type arguments cannot be inferred from usage
G((Foo x) => (Bar y) => new Baz()); 
```

最后一个示例产生编译器错误，但在我看来，它应该能够毫无问题地推断类型参数。

**问题：**为什么编译器`<Foo, Bar, Baz>`在这种情况下不能推断？

**更新：**我发现简单地将第二个 lambda 包装在一个标识函数中会导致编译器正确推断所有类型：

```
static Func<T1, T2> I<T1, T2>(Func<T1, T2> f) { return f; }

// Infers G<Foo, Bar, Baz> and I<Bar, Baz>
G((Foo x) => I((Bar y) => new Baz())); 
```

为什么它可以完美地完成所有单独的步骤，而不是一次完成整个推理？编译器分析隐式 lambda 类型和隐式泛型类型的顺序是否有一些微妙之处？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T14:57:06.067

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:07:02.287

无法推断 lambda 的返回类型是什么，因为它没有被分配并且无法由编译器确定。查看此[链接](http://blogs.msdn.com/b/ericlippert/archive/2007/01/10/lambda-expressions-vs-anonymous-methods-part-one.aspx)，了解编译器如何确定 lambdas 返回类型。如果你有：

```
Func<Bar, Baz> f = (Bar y) => new Baz();
G((Foo x) => f); 
```

那么编译器将能够根据分配给它的内容来计算 lambda 的返回类型，但是由于现在它没有分配给任何东西，编译器很难确定返回类型是什么`(Bar y) => new Baz();`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:46:37.670

对于编译器，lambda 函数与 Func 不同，即对 Func 使用 lambda 函数意味着类型转换。专门化泛型时，编译器不会进行“嵌套”类型转换。但是，这在您的示例中是必需的：

的类型`(Foo x) => (Bar y) => new Baz ()`是`lambda (Foo, lambda (Bar, Baz))`，但`Func (T1, Func (T2, T3))`需要，即两个转换，它们是嵌套的。

# r - 从许多类别中生成一个虚拟变量

> ID：12256083
> 
> 赞同：0
> 
> 时间：2012-09-04T02:32:11.923
> 
> 标签：r, conditional

所以...我有一个包含许多类别的变量的大型数据集。我想创建将其中一些类别归为一类的新变量。

我可以用一个条件语句来做到这一点，但考虑到类别的数量，我需要永远走一条线。此外，虽然我的原始变量是数字，但值本身是随机的，所以我不能使用逻辑或范围语句。

如何根据许多特定值创建此条件变量？

我尝试了以下，但没有成功。下面是我想归为一类的不同类别的示例。

```
classes <- c(549,162,210,222,44,96,62,208,525,202,149,442,427,
      564,423,106,422,546,205,560,127,536,34,261,568,
      366,524,401,548,95,156,8,528, 430,527,556,203,554,523,
      501,530,55,252,585,19,540,71,204,502,504, 196,436,48,
      102,526,201,521,23,558,552,118,416,117,216,510,494,
      516,544,518) 
```

所以这对我来说似乎很直观，但它不起作用。

```
df$chem<- cbind(ifelse(df$class == classes ,1,0)) 
```

不用说我是初学者，这可能并不难做到，但我一直在寻找解决这个特殊问题的方法，但我似乎找不到。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T02:36:08.323

你要找的`%in%`不是`==`

例如

```
df$chem <- cbind(ifelse(df$class %in% classes ,1,0)) 
```

或使用逻辑到数字的转换

```
df$chem <-  as.numeric(df$class %in% classes) 
```

如果您想要*所有*类别的单独虚拟变量，`df$class`那么您可以使用`class.ind`包中的函数`nnet`（作为推荐包提供）

```
library(nnet)

class_ind <- class.ind(df$class)
# add if you want to combine with the original
df_ind <- do.call(cbind, list(df, class.ind(df$class)) 
```

# wordpress - 多个 wordpress 网站使用相同的文件？

> ID：12256087
> 
> 赞同：1
> 
> 时间：2012-09-04T02:33:09.817
> 
> 标签：wordpress

我想自动化创建过程。我的想法是：

1- 客户在我的网站上创建了一个帐户 2- 我确认了这个帐户并为我的客户创建了一个 wordpress 安装。3-客户端登录管理区域并选择一个预先固定的主题并用内容填充wordpress。

好的。我的疑问与该项目的文件结构有关。

如果我有 5 个客户端，我可以使用 5 个不同的 sql 表连接到一个 wordpress 档案目录吗？

看到这将是 5 个不同的站点，它们具有不同的主题和使用相同文件的不同数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:50:23.993

您还应该查看 wordpress 多站点。您可能会发现该功能已经存在，您所要做的就是解锁它。

多站点构建将允许每个用户拥有一个完全自定义的站点，如果需要，您可以在同一主题下为所有站点设置主题。

[http://codex.wordpress.org/Create_A_Network](http://codex.wordpress.org/Create_A_Network)

# android - 将 Android 引导到 Web 浏览器

> ID：12256091
> 
> 赞同：0
> 
> 时间：2012-09-04T02:33:44.513
> 
> 标签：android

有人知道如何将 Android 直接启动到网络浏览器中吗？有点像自动启动浏览器，但最终的解决方案是没有任何桌面浏览器。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:34:22.347

只需创建一个主屏幕替换，它可以是浏览器，也可以启动一个。无需进一步定制 android。

用户当然可以卸载它，但这通常是一件好事。使用自定义 android 构建您似乎可以防止这种情况发生，但通常如果设备允许您安装自定义 android 构建，它也将允许用户安装不同的构建来绕过您的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:13:35.597

一方面，您需要自己的浏览器。您需要更改 AndroidManifest.xml 并为 Launcher Activity 添加以下过滤器

```
<intent-filter>
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.HOME" />
 <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

当按下主页键时，将浏览器设为默认值。

# c# - WPF 数字文本框

> ID：12256092
> 
> 赞同：1
> 
> 时间：2012-09-04T02:33:52.157
> 
> 标签：c#, .net, wpf

我怎样才能有一个带两个小数点的 WPF 数字文本框，例如：

它将从 0.00 开始，当用户输入 1 时，值将是 0.01，然后当用户输入 2 时，值将是 0.21。

当用户键入 5003 时，值为 30.05。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T03:44:41.467

当然，您始终可以按照@JesseJames 的建议实现一个。但是，我建议您更好地使用现有的，我相信[Extended WPF Toolkit](http://wpftoolkit.codeplex.com/)是您所需要的，正是 [IntegerUpDown](http://wpftoolkit.codeplex.com/wikipage?title=IntegerUpDown&referringTitle=Home)（您可以指定您需要的掩码，它带有 5 个）：

```
<xctk:IntegerUpDown FormatString="N0" Value="1" Increment="1" Maximum="100"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T03:25:32.213

您可以在 KeyDown 事件处理程序中实现它。设置事件参数属性`e.Handle = true`并计算输出数。

不要像我一样写，这只是例子:)）

```
public partial class MainWindow : Window
{
    private StringBuilder sb = new StringBuilder();

    public MainWindow()
    {
        InitializeComponent();
    }

    private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        e.Handled = true;
        switch (e.Key)
        {
            case Key.D0: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 0); break; }
            case Key.D1: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 1); break; }
            case Key.D2: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 2); break; }
            case Key.D3: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 3); break; }
            case Key.D4: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 4); break; }
            case Key.D5: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 5); break; }
            case Key.D6: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 6); break; }
            case Key.D7: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 7); break; }
            case Key.D8: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 8); break; }
            case Key.D9: { if (sb.Length == 2) sb.Insert(0, ','); sb.Insert(0, 9); break; }
        }
        textBox1.Text = sb.ToString();
    }
} 
```

在此示例中，您还需要处理“Backspace”命中以清除 StringBuilder。要获取值，请使用解析器：`double result = double.Parse(sb.ToString());` + 处理 NumPad 数字！

# python - 在 Google App Engine 中使用 @ndb.tasklet 或 @ndb.synctasklet

> ID：12256093
> 
> 赞同：10
> 
> 时间：2012-09-04T02:34:12.673
> 
> 标签：python, google-app-engine, app-engine-ndb

我有一个`POST`调用几个小任务的方法。这些 tasklet 中确实有 yield，`x.put_async()`我的代码中确实有一些。所以我不希望它在所有异步内容完成之前返回。所以我装饰了我所有的小任务，它们只是用`@ndb.tasklet`. 此外，除了我的`POST`方法之外，我还有：

```
@ndb.toplevel
def post(self): 
```

但是，在[文档](https://developers.google.com/appengine/docs/python/ndb/async)中它指出：

> 但是如果一个处理方法使用了yield，那么该方法仍然需要包装在另一个装饰器中，@ndb.synctasklet；否则，它将在 yield 处停止执行并且不会完成。

确实，我的方法有效果。它已经包含在@ndb.tasklet 中。我是用@ndb.synctasklet 替换它还是同时使用两者（如果是这样，我将如何同时使用两者）？

另外，请参阅[此线程](https://groups.google.com/forum/?fromgroups=#!topic/appengine-ndb-discuss/MDvGLM7Jo78)，它具有一定的相关性。我也注意到一个问题，即我的请求将返回而没有任何输出，但无法重现。它每 15 分钟左右持续使用一次。我`app = ndb.toplevel(webapp2.WSGIApplication([..])`只有，但现在我已经添加`@ndb.toplevel`到主要`POST`方法中，但问题仍然存在。

我应该把`@ndb.tasklet`刚刚的方法放在上面`put_async()`吗？（为了安全起见，我应该把它放在每种方法之上吗？这样做有什么缺点？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T05:24:20.737

关于处理程序和使用@ndb.toplevel 和@ndb.synctasklet：我理解的方式是您需要在处理程序上同时使用@ndb.synctasklet 和@ndb.toplevel。所有子任务只需要 @ndb.tasklet 装饰器。例如

```
class Foo(ndb.Model):
    name = ndb.StringProperty()

    @ndb.tasklet
    def my_async(self):
        ....
        #do something else that yields
        raise ndb.Return("some result")   

@ndb.toplevel
@ndb.synctasklet
def post(self):
    foo = Foo(name="baz")
    yield foo.put_async()
    yield foo.my_async()
    .... 
```

然而。查看[源代码](http://code.google.com/p/appengine-ndb-experiment/source/browse/ndb/tasklets.py)，看来@ndb.toplevel 实际上是一个synctasklet：

```
def toplevel(func):
  """A sync tasklet that sets a fresh default Context.

  Use this for toplevel view functions such as
  webapp.RequestHandler.get() or Django view functions.
  """ 
```

在处理程序中运行一个带有 yield 并用 @ndb.toplevel 装饰的小测试似乎仍然有效，并且您似乎可以从处理程序中删除 @ndb.synctasklet 。

关于是否应该在调用 put_async() 的方法中包含 @ndb.tasklet：如果您没有放弃 put_async()，那么您不需要在周围的方法中包含 @ndb.tasklet (@ndb.toplevel将处理从 put_async() 获取结果）

# java - 使用 O 和 Theta 表示的运行时间

> ID：12256096
> 
> 赞同：3
> 
> 时间：2012-09-04T02:34:32.550
> 
> 标签：java, complexity-theory

对于给定的代码（我只使用我之前的问题中的一个），使用 O 表示法的运行时间是 O(n^2)。如果我想使用 Theta 表示法来表达运行时间，它会是一样的吗？含义 Theta(n^2)？

```
for(int i=0; i<N; i++){
   for(int j=1; j<N; j++){

    System.out.println("Yayyyy");
    if(i<=j){
        System.out.println("Yayyy not");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:37:35.193

本质上：大 O 表示法用于运行时间的上限。这意味着大多数算法都有几个大 O 边界（例如，您的算法是`O(n^23)`因为它比`theta(n^23)`算法更有效）
Theta-notation 用于紧密边界。并非所有算法都有明确定义的紧密界限，因为这意味着它与其他函数成比例增长。在您的示例中，因为没有打印“Yayyy not” (n^2 - n)/2 次，算法就无法完成，并且它永远不会运行超过这个次数，它总是与 n 成比例增长^2，因此有`theta(n^2)`界！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:44:14.300

为了使这个简短易懂，BigO(n^2) 意味着您的算法不会花费超过 ~n^2 的时间。BigTheta(n^2) 意味着你的算法不会超过~n^2 时间，**也**不会少于~n^2 时间。

# c# - 对 List 使用 NULL 局部变量 在 C# 中

> ID：12256097
> 
> 赞同：3
> 
> 时间：2012-09-04T02:34:38.227
> 
> 标签：c#, asp.net, razor, webmatrix

我能找到（在任何地方）将 SQL 查询的结果转换为局部变量的最佳解决方案是使用 NULL`List<dynamic>`或`IEnumerable<dynamic>`变量声明。

通过执行以下操作创建变量：

```
@{
    IEnumerable<dynamic> myVariable = null;
} 
```

然后该变量可以从数据库查询中获取一个值，例如：

```
@{
    try
    {
        Database db = Database.Open("name"); // name of connectionString configured in web.config
        string myQuery = "EXEC dbo.Get_Results @Param1=@0, @Param2=@1";
        myVariable = db.Query(myQuery, @Param1, @Param2);
        db.Close();
        db.Dispose();
    }
    catch (Exception ex)
    {
        // Do something
    } 
```

这使我可以执行以下操作：

```
@if(myVariable != null)
{
    foreach (var row in myVariable)
    {
        // Do something
    }
} 
```

这工作得很好，但我仍然好奇的是如何使用 来做同样的事情，作为使用我使用它的方式`List<dynamic>`的替代方法。`IEnumerable<dynamic>`

**我使用的`List<dynamic>`等效解决方案是`IEnumerable<dynamic>`什么？**

我知道我的问题本身很简单，但是当我尝试创建一个可以从预先声明的变量中接收结果的类时，我花了很长时间才试图解决*无法隐式转换错误。*`db.Query(commandText)`所以我想我应该提供更多细节，以防其他人试图找出相同或相似的东西。我`IEnumerable<dynamic>`在不相关的主题上找到了我的解决方案，这让我看到了我试图解决的问题的更简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:42:06.007

`Enumerable.Empty<string>()`不为空。它是一个空的字符串序列。请注意，例如，以下代码打印“false”：

```
var sequence = Enumerable.Empty<string>();
Console.WriteLine(sequence == null); 
```

您可能想要创建一个新的（空）列表：

```
List<dynamic> x = new List<dynamic>(); 
```

或者，如果您确实需要列表变量来保存空引用：

```
List<dynamic> x = null; 
```

# linux - 堆栈粉碎测试环境

> ID：12256103
> 
> 赞同：0
> 
> 时间：2012-09-04T02:35:57.560
> 
> 标签：linux, virtualbox, buffer-overflow, stack-smash

我正在尝试在 virtualbox 中测试缓冲区溢出攻击，并且由于各种发行版的所有安全功能，过去几周一直在苦苦挣扎。

我已经尝试一步一步地在线学习教程，但没有成功。

我没有尝试禁用所有安全功能，而是尝试使用旧的 linux 发行版，但其中大多数没有 gcc 并且现在缺少工作存储库。

我什至在 Ubuntu 10.10（我也下载了）上找到了一个逐步进行的 youtube 视频，包括禁用各种安全功能的所有命令，但运气不好。我可以得到分段错误，但不是“非法指令”。

是否有一个古老的 linux 发行版我仍然可以在没有这种保护的情况下下载，它附带 gcc（或具有完整存储库的大型 dvd iso 之一），所以我可以测试一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:57:50.560

你不需要。

使用 GCC 标志编译可执行文件`-fno-stack-protector`并关闭 ASLR会禁用*许多*Linux 发行版`sudo sh -c "echo 0 > /proc/sys/kernel/randomize_va_space"`中的两个主内存损坏攻击缓解措施。（这两种保护技术都可以追溯到足够长的时间，以至于查找旧发行版的副本非常耗时，除了[该死的易受攻击的 Linux](http://distrowatch.com/table.php?distribution=dvl)之外）

 *在某些发行版上，您可能会编写 xor 执行内存页面，这是通过许多不同的包实现的，您必须自己禁用这些包。考虑到这一点，如果您没有收到堆栈粉碎警告，则几乎可以肯定您没有带有 W^X 内存页的可执行文件。

这意味着如果您遇到分段错误，您可能已经成功覆盖了堆栈上存储的 EIP，只是您的 shellcode 偏移错误，或者您犯了字节序错误（一些非法的向后多字节指令不再是非法的！） . 检查您在 GDB 中的程序，我想您会发现哪里出错了。

探索[The Shellcoder's Handbook](https://rads.stackoverflow.com/amzn/click/com/047008023X)可能对您的时间有益。*

# javascript - 如何确定是否在 Facebook 上单击了注销？

> ID：12256111
> 
> 赞同：1
> 
> 时间：2012-09-04T02:36:56.560
> 
> 标签：javascript, facebook, events, logout

这是我正在使用的代码

```
FB.Event.subscribe('auth.logout', function(response) {
    alert('You logged out ' + response);
}); 
```

也试过了`console.log`。什么都没发生。

# java - 发送邮件时出现 Java 邮件错误

> ID：12256113
> 
> 赞同：2
> 
> 时间：2012-09-04T02:38:09.330
> 
> 标签：java, jakarta-mail

我正在使用一个程序来发送电子邮件。当我使用其他邮件服务器时，该代码有效。但我需要使用我公司的电子邮件帐户发送电子邮件。并且电子邮件帐户由 提供`gmail` `xxxx@companyname.com`。当我更改`mail` `host`为`stmp.gmail.com 时，遇到以下错误：

```
com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 Must issue a STARTTLS command           first. st6sm11092256pbc.58

at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1515)
at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1054)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:634)
at javax.mail.Transport.send0(Transport.java:189)
at javax.mail.Transport.send(Transport.java:118)
at Mail.sendMail(Mail.java:48)
at Test.main(Test.java:6) 
```

代码如下

```
import javax.mail.Authenticator;
import javax.mail.PasswordAuthentication;

public class Email_Autherticator extends Authenticator {
    String username = "xxxx@gmail";
    String password = "xxxxx";

    public Email_Autherticator() {
        super();
    }
    public Email_Autherticator(String user,String pwd){
        super();
        username = user;
        password = pwd;
    }

    public PasswordAuthentication getPasswordAuthentication(){
        return new PasswordAuthentication(username,password);
    }
} 

import java.util.Date;
import java.util.Properties;
import javax.mail.Address;
import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.SendFailedException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class Mail {
    private String host = "smtp.gmail.com";
    private String mail_head_name = "this is head of this mail";
    private String mail_head_value = "this is head of this mail";
    private String mail_to = "xxxx@gmail.com";
    private String mail_from = "xxxx@Comanyname.com";//using gmail server
    private String mail_subject = "this is the subject of this test mail";
    private String mail_body = "this is mail_body of this test mail";
    private String personalName = "xxx";

    public void sendMail() throws SendFailedException{
        try {
            Properties props = new Properties();
            Authenticator auth = new Email_Autherticator();
            props.put("mail.smtp.host", host);
            props.put("mail.smtp.auth", "true");
            System.out.println(props);
            Session session = Session.getDefaultInstance(props,auth);

            MimeMessage message = new MimeMessage(session);
            message.setContent("Hello","text/plain");
            message.setSubject(mail_subject);
            message.setText(mail_body);
            message.setHeader(mail_head_name, mail_head_value);
            message.setSentDate(new Date());
            Address address = new InternetAddress(mail_from,personalName);
            message.setFrom(address);
            Address toaddress = new InternetAddress(mail_to);
            message.addRecipient(Message.RecipientType.TO,toaddress);
            System.out.println(message);
            Transport.send(message);
            System.out.println("Send Mail Ok!");
        } catch (Exception e) {
            e.printStackTrace();
        }
        //return flag;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T02:52:29.627

您几乎可以肯定只需要重新编写代码以添加[JavaMail API - 通过 Gmail SMTP 示例示例发送电子邮件](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)中定义的属性。

您可能可以将您的设置`props`为：

```
Properties properties = new Properties();

properties.setProperty("mail.smtp.auth", "true");
properties.setProperty("mail.smtp.starttls.enable", "true");
properties.setProperty("mail.smtp.host", "smtp.gmail.com");
properties.setProperty("mail.smtp.port", "587");
properties.setProperty("mail.smtp.user", gmailUsername);
properties.setProperty("mail.smtp.password", gmailPassword); 
```

因为这似乎是为了工作——如果可以的话——我建议使用 Spring。它使它更清洁，更易于使用。我最近用 Spring 和 Gmail SMTP做了类似的事情[。](http://www.javacodegeeks.com/2010/07/java-mail-spring-gmail-smtp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T11:49:50.630

您需要在 java 代码中定义以下属性。

导入以下包

```
import java.util.Properties;
import javax.mail.PasswordAuthentication;
import javax.mail.Session; 
```

并将以下内容添加到您的代码中：

```
Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.host", host);
        props.put("mail.smtp.port", "587"); 
```

使用 javax.mail.authenticator 向 gmail 服务器进行身份验证

```
 Session session = Session.getInstance(props,
        new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
            }
        }); 
```

试试这个应该适合你。

如果仍有问题，请参阅此错误文档： [https ://pepipost.com/tutorials/common-javamail-smtp-errors/](https://pepipost.com/tutorials/common-javamail-smtp-errors/)

使用 javaMail API 发送 SMTP 电子邮件

# ruby-on-rails - 如何在 Rails 3 中呈现动作并设置 URL？

> ID：12256117
> 
> 赞同：0
> 
> 时间：2012-09-04T02:39:53.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controllers

如何`render :new`将位置设置为`question/:id/new/answer`？

`render :location => new_question_path`将位置设置为`question/:id/answer`

`render :location => "/question/#{params[:id]}/new/answer"`也没有工作。

相关路线：`get '/question/:id/new/answer' => 'answers#new', as: :new_answer`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:44:45.053

可能会用到

```
resources :questions do
  get 'new/answer', :on => :member
end 
```

并将通过`rake routes`

# c# - 与 NServiceBus 的异步 WCF 集成

> ID：12256118
> 
> 赞同：4
> 
> 时间：2012-09-04T02:40:21.883
> 
> 标签：c#, wcf, asynchronous, nservicebus

我是 NServiceBus 的新手，并且正在尝试做一些看起来比它应该做的更难的事情......所以如果我错过了关于 nsb 更大图景的一些东西，我就会开始徘徊。

这是场景：

*   将 WCF 终结点公开给他们请求长时间运行的操作的客户端。
*   我想将入站请求映射到 NServiceBus 消息。
*   将消息发布到总线进行处理。
*   向客户发送回复，确认他们的请求已收到，我们将开始处理它。
*   Bus 通过处理程序处理消息。
*   工作完成后，在他们的“回调”端点 (wcf) 上回叫客户端，以向他们提供他们发出的长时间运行请求的结果。

我欢迎可能有用的纠正性批评、示例或链接。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:17:39.777

您可以通过 NSB 管道执行此操作。您可以配置处理程序以按照您指定的顺序执行。在您的情况下，这将与通知一起结束。根据用例，将通知转发到仅处理这些类型的通信的另一个端点可能会更好。您需要考虑的是故障场景。如果处理程序失败并且消息被重试，会发生什么？

这一切都基于您不需要维护状态的想法。如果你这样做了，那么你会想要考虑使用[Saga](http://docs.particular.net/nservicebus/sagas/)。这将保持每个长时间运行的事务的状态，并为您提供一些您可能需要的更多功能，例如超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:02:22.437

长时间运行的进程可以是同步的也可以是异步的。不可能两者兼而有之。

您可以使用 NServiceBus 异步处理长时间运行的任务并生成进度信息。亚当提到了传奇。您可以使用 saga 来跟踪进度。它还将帮助您将流程划分为更细粒度的任务，并提供诸如自动重试之类的免费处理瞬时故障的功能。

但是，您将不得不使用另一种机制将进度信息发送回用户。定期轮询、长轮询、隐藏 iframe、websocket 等等 - 看看 SignalR 公开的想法。[这里](http://vimeo.com/43659069)有一个很好的视频，它讨论了向浏览器发送通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:49:56.190

根据 NServiceBus[网站](http://docs.particular.net/nservicebus/architecture/nservicebus-and-wcf)，您可以将 NSB 端点公开为 WCF 服务：

> 互操作性
> 
> 只需一行代码和标准的 WCF 配置，您就可以将 NServiceBus 端点公开为 WCF 服务。您需要做的就是编写一个从 NServiceBus.WcfService 继承的空类，指定请求和响应的类型，然后 NServiceBus 完成其余工作，如下所示：
> 
> `public class MyService : NServiceBus.WcfService<MyCommand, MyErrorCodes> { }`

我已经完成了一些将遗留 MSMQ 客户端与 NServiceBus 集成的工作——它可以工作，但您必须确保消息构造正确。

发送到 NServiceBus 端点的消息必须包含在`<Messages/>`信封中并且必须具有命名空间。例如：

```
<Messages xmlns="http://tempuri.net/MyNservicebusMessage">
  <MyNservicebusMessage body/> ...etc
</Messages> 
```

此外，如果你想使用 NServiceBus 审计，你必须确保 MSMQ“响应队列”消息头有一个值，尽管我认为这个值并不重要。

# c# - 如何从 C# 中的类中分离连接字符串并获取连接字符串

> ID：12256119
> 
> 赞同：1
> 
> 时间：2012-09-04T02:40:23.557
> 
> 标签：c#, sql

我是 C# 的新手。我想问，如何将连接字符串配置成一个类？

因为每次想写代码，都需要**重新编写连接字符串，测试连接**。所以，我需要创建一个类，这样每次连接数据库时，**这个类都会先测试连接**。然后在它工作之后，该类会将**连接字符串发送到我的编码中。** 此外，如果我想**更改我的源数据，**我只需要**在类中进行更改。**无需搜索我所有的编码

因此，如果我可以上课，我该如何调用并从课程中获取连接字符串？

可以这样吗？

这是我当前在 C# 中对连接字符串的编码

```
FileInfo file = new FileInfo(Application.StartupPath + "\\conn.txt");

if (file.Exists)
{
    StreamReader r = File.OpenText(Application.StartupPath + "\\conn.txt");
    connString = r.ReadToEnd();
    r.Close();

    // Open SQL connection
    SqlConnection openCon = new SqlConnection(connString);

    try
    {
        Cursor = Cursors.WaitCursor;
        openCon.Open();
    }
    catch
    {
        MessageBox.Show("Error to established connection\nPlease check Data Source");
        openCon.Close();
        Cursor = Cursors.Arrow;
    }
    else
    {
        MessageBox.Show("File config is missing");
    }
} 
```

希望你能教我作为 C# 的新手。谢谢您的帮助。抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:08:15.043

您应该将连接字符串存储在配置文件中。如果您没有配置文件，请通过右键单击项目并“添加新项目...”来添加一个配置文件。如果您正在编写 Web 应用程序，它将是一个`web.config`文件；如果您正在编写客户端应用程序，它将是一个`app.config`文件。

您将连接字符串添加到`connectionStrings`节点中的配置文件中，通常位于文件顶部。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <!-- add a string -->
    <add name="MyConnectionString" 
         connectionString="Data Source=localhost; ... // etc 
         providerName="System.Data.SqlClient" />
  </connectionStrings>
  // and keep all the other configuration in the file 
```

然后您只需使用`ConfigurationManager`该类引用配置文件 - 如果您还没有 System.Configuration 引用，则需要添加一个引用。

```
ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:08:02.453

你正试图在这里重新发明轮子。.Net 框架已经包含一些简单的技术来处理这个问题。如果您正在创建 Windows 窗体项目，则可以`App.Config`使用`connectionString`属性存储连接字符串。如果这是一个 Web 应用程序，那么您将其存储在 中`web.config`，它的外观如下：

```
<connectionStrings>
      <add name="Prod" connectionString="Server=myServer;Database=DB1;user=sa;password=myPassword;Trusted_Connection=false" providerName="SQL" />
  </connectionStrings> 
```

然后，在您的代码中，您从 web.config 读取连接字符串，如下所示：

```
string connString = System.Configuration.ConfigurationManager.
    ConnectionStrings["Prod"].ConnectionString; 
```

您在这里提出了一个非常基本的问题，这表明您正在试图以自己的方式学习 c#。我给你的建议是拿一本好的 C# 书，从头到尾通读一遍，以正确的方式学习东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:08:41.090

不要将连接字符串放入单独的文件中，而是将其存储在 app.config 或 web.config 文件中。.NET 配置文件包含一个允许您存储连接字符串的部分：

```
<connectionStrings>
    <add name="myConnectionString" connectionString="server=localhost;database=myDb;uid=myUser;password=myPass;" />
</connectionStrings> 
```

您可以使用以下代码检索此连接字符串：

```
string connStr = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-02T09:10:05.427

我认为海报的问题非常有效。虽然我们可以在 Web.config 或 app.config 中编写一次连接字符串并在整个项目中使用它，但是使用这种技术有一个缺点。web.config 或 app.config 中的连接字符串永远不会安全。这两个文件最终类似于文本文件。有一些方法可以从他们那里获取密码。安全可能被打破。所以最好在一个单独的类文件中使用连接字符串并将它放在你的整个项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-29T00:06:24.677

您可以创建一个返回 sqlConnection 的类...

```
public class DBConn
{
    private string ConnectionString = "123456789Connection";

    public SqlConnection getSqlConn()
    {
        return SqlConnection();
    }
} 
```

# c++ - 带有 microsoft 2010 C++ express 的 Eclipse Juno C++ 不会创建 EXE 文件

> ID：12256123
> 
> 赞同：0
> 
> 时间：2012-09-04T02:41:37.187
> 
> 标签：c++, eclipse

在 Windows 7 64 位上使用 Eclipse Juno 64 位，我刚刚从 Windows 7 32 位切换到 64 位并安装了带有 C++ 插件的 Eclipse Juno 以及 Microsoft Studio Express C++ 2010，在定义了所需的路径之后，现在编译器创建了目标文件除了在 BUILD 过程中没有创建 EXE 文件。

有没有人经历过这个，如果你有什么解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:48:00.737

Windows 7 64 位和 Juno 似乎存在错误

我遇到了同样的情况。

这是来自 Eclipse 的论坛帖子：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=385608](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385608)

该错误确实参考了一些解决方法。

谢谢

# c# - Profiler 警报统计

> ID：12256127
> 
> 赞同：3
> 
> 时间：2012-09-04T02:42:09.220
> 
> 标签：c#, .net, clr, profiler

我在我的 C# 应用程序上运行了一个分析器（CLR Profiler 4.0），在应用程序终止后，我得到了以下统计信息：

创建的句柄：34,126 销毁的句柄：32,844 幸存的句柄：1,282

我的印象是，当程序终止时，幸存的句柄应该接近于零。我错了吗？还有哪些其他指标表明我的应用程序没有泄漏任何内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:38:20.587

这些是关闭应用程序之前幸存的句柄。这并不意味着您的应用程序正在泄漏内存，进程中的所有句柄、应用程序域和其他“托管”资源都将被清理。如果您调用了任何本机 dll 或使用了其他“不安全”代码块（非托管资源），则必须确保在代码中释放这些资源（您可以使用析构函数或 IDisposible 接口来执行此操作）。

我建议您从标题“Generational Garage Collection”开始阅读“ [Under the .NET Memory Management](http://assets.red-gate.com/community/books/assets/Under_the_Hood_of_.NET_Management.pdf) ”中的第 44 页。这应该在某种程度上澄清这些结果。

# .htaccess - .htaccess 重定向 - 自动添加 www。如果不存在子域

> ID：12256130
> 
> 赞同：19
> 
> 时间：2012-09-04T02:42:33.563
> 
> 标签：.htaccess, redirect, mod-rewrite, subdomain

我需要任何www。仅当子域尚不存在时才自动添加到我的域中。我确实希望子域绕过此重定向。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-04T04:55:30.407

要在没有子域时自动将 a 添加`www`到您的域名中，请将其添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [L,R=301] 
```

# jquery - 超过最大调用堆栈 jQuery $.each()

> ID：12256131
> 
> 赞同：1
> 
> 时间：2012-09-04T02:42:43.193
> 
> 标签：jquery

我正在尝试实现实时搜索过滤功能并在 jQuery 中使用 $.each() 。现在我只是试图遍历每个元素并打印其文本，但遇到了最大调用堆栈超出问题。该列表大约有 50-60 项，所以我认为大小根本不是问题，也许我遇到了一些无限递归，尽管我不这么认为。以下是我的相关 HTML：

```
<div id="brands">
    <ul id="left_brands">
        <li><a class="brand_check" href="javascript:void">Vineyard Vines</a></li>
        <li><a class="brand_check" href="javascript:void">Brooks Brothers</a></li>
        <li><a class="brand_check" href="javascript:void">Coast Apparel</a></li>
        <!-- etc. -->
    </ul>
</div> 
```

这是给我错误的jQuery代码：

```
$("#brand_filter input").keyup(function() {
    $.each("#brands li a", function() {
        alert($(this).text());
    });
}); 
```

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:51:47.853

如果使用集合迭代器，则必须迭代 Jquery 对象，而不是选择器字符串。

所以只用

```
$("#brand_filter input").keyup(function() {
    $.each($("#brands li a"), function() {
        alert($(this).text());
    });
}); 
```

或使用选择器语法

```
$("#brand_filter input").keyup(function() {
    $("#brands li a").each(function() {
        alert($(this).text());
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:49:47.403

改为这样做：

```
$("#brand_filter input").keyup(function() {
    $("#brands li a").each(function() {
        alert($(this).text());
    });
}); 
```

递归发生在 Sizzle 的 getText 中——您正在迭代字符串字符本身，而不是选择器结果。在这种情况下，我认为按照您认为的方式进行操作没有任何好处，而且这似乎更规范（不过，这可能只是我的偏好）。

# c# - 从 Datepicker 对象 C# 增加日期

> ID：12256132
> 
> 赞同：0
> 
> 时间：2012-09-04T02:42:48.377
> 
> 标签：c#, ms-access

我有 2 个用于过滤 Access 查询的数据选择器对象。当我运行例如 2012 年 9 月 1 日（开始日期）和 2012 年 9 月 5 日（结束日期）的查询时，它会为我提供从 2012 年 9 月 1 日上午 12 点到 2012 年 9 月 4 日 11:59 的所有内容。有没有办法通过增加结束日期来包括结束日的实际日历日？

这是我的代码：

```
 string startDate = dateTimePicker1.Text;
        string endDate = dateTimePicker2.Text;

        OleDbCommand command = new OleDbCommand();
        command.Parameters.AddWithValue("@startDate", startDate); 
        command.Parameters.AddWithValue("@endDate", endDate); 
        try {
            command.Connection = connect;
            command.CommandText = "SELECT RecordID, TimeStamp, EmployeeName, AreaDescription FROM LoginRecords r, Employees e, Areas a WHERE (e.EmployeeID = r.EmployeeID) AND (a.AreaID = r.AreaID) AND (TimeStamp BETWEEN @startDate AND @endDate) ORDER BY TimeStamp";
            OleDbDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {
                tw.WriteLine(reader["RecordID"].ToString() + " " + reader["TimeStamp"].ToString() + " " + reader["EmployeeName"].ToString() + " " + reader["AreaDescription"].ToString() + ",");
                listBox1.Items.Add(reader["RecordID"].ToString() + " " + reader["TimeStamp"].ToString() + " " + reader["EmployeeName"].ToString() + " " + reader["AreaDescription"].ToString() + ",");
            }
        }
        catch (Exception ex){
                MessageBox.Show("Error: " + ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:50:49.103

您可以`Value`使用`DateTimePicker`. 然后，您可以使用`AddMinutes, AddDays`, 等来增加值。

以下将使用第二天作为结束日期。

```
DateTime endDate = dateTimePicker2.Value.Date.AddDays(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:24:47.027

You can format value custom. Use following.

```
dateTimePicker2.Format = DateTimePickerFormat.Custom;
dateTimePicker2.CustomFormat = "MMMM dd, yyyy - dddd"; 
```

If you want to use `SQL` query ,you had better to format `Date` value, like this:

```
CONVERT(varchar(10) ,dateTimePicker2.text,120) 
```

# javascript - 如何通过 JavaScript 知道当前加载页面的 mime-type 或 content-type？

> ID：12256134
> 
> 赞同：4
> 
> 时间：2012-09-04T02:43:08.860
> 
> 标签：javascript, mime-types, content-type

> **可能重复：**
> [在 Javascript 中访问 HTTP 标头？](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)

我想通过 JavaScript 知道当前加载页面的 mime 类型或内容类型。我想做的是检查它是页面的 rss 还是 html。

我唯一能找到的是“document.contentType”，但 Gecko ( firefox ) 支持它。

有谁知道如何通过 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:33:31.803

使用`XHR`请求。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', document.location, false);
xhr.send(null);

alert(xhr.getResponseHeader("content-type"));​ // content-type 
```

1.  初始化请求
2.  发送请求
3.  使用获取所需的标题`ref.getResponseHeader()`

另请查看以下链接。

*   [在 JavaScript 中访问网页的 HTTP 标头](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)
*   [在 JavaScript 中获取标头信息](https://stackoverflow.com/questions/9357941/getting-header-information-inside-javascript)
*   [http://www.w3.org/TR/XMLHttpRequest/#the-getresponseheader-method](http://www.w3.org/TR/XMLHttpRequest/#the-getresponseheader-method)

# git - 克隆旧版本的 github repo

> ID：12256137
> 
> 赞同：77
> 
> 时间：2012-09-04T02:43:30.290
> 
> 标签：git, github, git-checkout

我有一台 Amazon EC2 机器。我想在这台机器上克隆一个旧版本的 github repo。通常我使用 git clone [https://linktomyrepo.git](https://linktomyrepo.git)我如何克隆旧版本，比如 14 天前的更新？我可以在存储库的提交历史中看到我需要的确切版本，但不知道如何将它克隆到 EC2 机器上。我需要在每次提交旁边使用小 SHA 代码吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-04T02:45:34.347

您始终可以使用提交哈希检查任何给定的状态。

例如，通过查看日志，您确定 233ab4ef 是您感兴趣的状态：发出 a`git checkout 233ab4ef`以检查该状态。

实现此目的的另一种方法是使用`git checkout @{14.days.ago}`

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-04T02:47:22.127

Git 不是这样设计的。克隆存储库时，您将复制所有版本。

所以首先克隆一个存储库（它最初会签出最新版本），然后签出你真正想要的版本。

您可以根据哈希签出提交。

```
git checkout afe52 
```

您还可以根据日期结帐（而不是查找哈希），例如：

```
git checkout 'master@{1979-02-26 18:30:00}'
git checkout @{14.days.ago} 
```

要检查您可以签出的提交，请使用`git log`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-02-26T04:50:59.063

同样对于 Github.com UI，

对于那些想要下载特定提交的人，步骤如下：

1.  转到“提交”
2.  单击所需提交右侧的“<>”图标
3.  选择克隆或下载
4.  下载压缩包

[提交](https://i.stack.imgur.com/k2sot.png)

[选择提交](https://i.stack.imgur.com/bXWny.png)

[下载压缩包](https://i.stack.imgur.com/txqAb.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-23T07:43:08.520

[专门为github.com](https://github.com) UI发布此解决方案。

我使用的是旧版本的[Keycloak](https://github.com/keycloak/keycloak)并想下载源代码。在[github.com 上](https://github.com)，这是一个简单的过程：

1.  转到发布部分
2.  下载所需的版本。

[![在此处输入图像描述](../Images/1e84a3b9781517088efa6cd5f0675346.png)](https://i.stack.imgur.com/BSn6p.png) [![在此处输入图像描述](../Images/5b86df2a377c7a545eebf040cd114f64.png)](https://i.stack.imgur.com/INVrC.png)

# c# - 在代码契约静态分析中使用 System.Reflection

> ID：12256142
> 
> 赞同：1
> 
> 时间：2012-09-04T02:44:25.320
> 
> 标签：c#, reflection, code-contracts

我可以在代码契约构造中使用 System.Reflection 类和方法，在静态分析期间进行检查吗？我想这样定义合同：

```
[ContractInvariantMethod]
private void ObjectInvariant()
{
    Contract.Invariant(GetType().GetMethods().Any(x => x.Name == "Add"),"Error");
} 
```

当我运行应用程序时，会检查此条件。但在编译期间不会检查它。我可以以某种方式为这样的合同启用静态检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:51:03.617

我不知道有任何技术限制，但这不是最好的解决方案。代码契约用于检查运行时状态或更改，而不是（有效地）不可变的东西，例如类型上的方法。

相反，我要么创建一个检查方法的单元测试，要么在像[FXCop](http://msdn.microsoft.com/en-us/library/bb429476%28v=vs.80%29.aspx)这样的静态分析工具中创建一个规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:01:18.493

代码合同并不是为了修复设计缺陷。你的类应该实现一个包含`Add`方法的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:35:30.503

以下是相当古老[的帖子](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/37e28a50-bf64-4b02-b384-f55117735690)，但它似乎仍然有效。它说“静态检查器不使用反射来验证合同”。

# java - Primefaces OutputLabel 由带有参数的方法填充

> ID：12256144
> 
> 赞同：0
> 
> 时间：2012-09-04T02:44:40.417
> 
> 标签：java, jsf, parameters, primefaces

我有一个关于通过方法调用填充 Primafaces 输出标签的问题。该方法还需要一个参数。

标签如下所示：

```
<p:dataTable id="answerToQuestionDialogTable" var="answer" value="#{allQuestionBean.answers}">
    <p:column headerText="Counts For this Answer">
        <p:outputLabel value="#{allQuestionBean.votingCounter}">
            <f:param name="id" value="#{answer.answerId}"/>
        </p:outputLabel>
    </p:column>
 </p:dataTable> 
```

在我的支持 Bean 中，我有一个名为“votingCounter”的整数字段，并带有以下 Getter：

```
public int getVotingCounter() {
        Map<String, String> params = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
        int answerID = Integer.parseInt(params.get("id"));

        return answeredDAO.getCountForAnswer(answerID);
    } 
```

如果我尝试加载站点，我会从我的 AppServer（Tomcat 6）获得以下 LogOutput：

```
04.09.2012 04:30:47 com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback visit
SCHWERWIEGEND: javax.el.ELException: /pages/allQuestion.xhtml @69,81 value="#{allQuestionBean.votingCounter}": Error reading 'votingCounter' on type bean.view.AllQuestionBean 
```

谁能解释我为什么这行不通，并且可以给我一个解决方案，我如何调用该方法来用文本填充标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:57:13.097

既然您无论如何都要为所有答案带来所有计数答案，为什么不创建一个地图并将其填充到您的地图中并 `@PostConstruct`以简单的方式访问它，例如

```
<p:outputLabel value="#{AllQuestionBean.countForAnserMap[answer.answerId]}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:10:45.463

首先，您应该阅读堆栈跟踪的根本原因以了解具体问题的根本原因。堆栈跟踪的根本原因是堆栈跟踪的最底部。

在您的特定情况下，它可能只是一个普通的`NullPointerException`指向您尝试执行的行`Integer.parseInt(params.get("id"))`。这个异常的根本原因更多地说明了具体问题。这说明`params.get("id")`返回`null`的内容基本上意味着`<f:param>`不能以这种方式工作。

事实上，这根本不是这个目的`<f:param>`。返回真正的`getRequestParameterMap()`HTTP 请求参数，而不是`<f:param>`您嵌入在任意组件中的值，该组件不会生成链接/按钮，该链接/按钮指向带有仅在*该*请求中可用的参数的 URL（而不是当前请求！） .

相反，您应该按照 Daniel 的建议实施解决方案，或者将其`votingCounter`移至`Answer`类，或实施替代方法，如下所示：

```
public int getVotingCounter() {
    FacesContext context = FacesContext.getCurrentInstance();
    Integer answerID = context.getApplication().evaluateExpressionGet(context, "#{answer.answerId}", Integer.class);
    return answeredDAO.getCountForAnswer(answerID);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T04:33:35.530

尝试如下，假设你有getter和setter`votingCounter`

```
<p:dataTable id="answerToQuestionDialogTable" var="answer" value="#{AllQuestionBean.answers}">
    <p:column headerText="Counts For this Answer">
        <p:outputLabel value="#{AllQuestionBean.votingCounter}">
            <f:param name="id" value="#{answer.answerId}"/>
        </p:outputLabel>
    </p:column>
 </p:dataTable> 
```

# asp.net-mvc-3 - 如何在 OAuth 资源服务器中验证访问令牌

> ID：12256147
> 
> 赞同：3
> 
> 时间：2012-09-04T02:45:29.023
> 
> 标签：asp.net-mvc-3, rest, oauth, oauth-2.0

我有 3 个应用程序；OAuth 2.0 生成令牌的身份验证服务器、请求令牌的 OAuth 客户端、提供 Restful API 的 OAuth 资源服务器。这些都是 MVC 3 Web 应用程序。我的问题是如何验证从客户端到达 OAuth 资源服务器的访问令牌？例如，OAuth 客户端收到来自 OAuth 服务器的带有访问令牌的响应。然后客户端在向 OAuth 资源服务器发出请求以调用 API 函数之一之前将此令牌添加到标头中。即使我可以在 headers[Authentication] 中看到访问令牌，我也找不到验证此令牌的方法。因为我使用 MVC3 通过 Area 设计 Restful API，所以我不能使用下面的函数，它与 SOAP Web 服务一起使用。

```
private static IPrincipal VerifyOAuth2(HttpRequestMessageProperty httpDetails, Uri requestUri, params string[] requiredScopes) {
        // for this sample where the auth server and resource server are the same site,
        // we use the same public/private key.
        using (var signing = PixidoRest.MvcApplication.CreateAuthorizationServerSigningServiceProvider())
        {
            using (var encrypting = PixidoRest.MvcApplication.CreateResourceServerEncryptionServiceProvider())
            {
                var resourceServer = new ResourceServer(new StandardAccessTokenAnalyzer(signing, encrypting));
                return resourceServer.GetPrincipal(httpDetails, requestUri, requiredScopes);
            }
        }
    } 
```

因为我无法路径“HttpRequestMessageProperty”，所以我被困在那里以验证我从客户端收到的 AccesToken。如何在 MVC 3 Restful API 应用程序上验证这一点作为 OAuth 客户端的资源服务器？

这是我的其他代码：

```
internal static RSACryptoServiceProvider CreateResourceServerEncryptionServiceProvider()
    {
        var resourceServerEncryptionServiceProvider = new RSACryptoServiceProvider();
        resourceServerEncryptionServiceProvider.ImportParameters(ResourceServerEncryptionPrivateKey);
        return resourceServerEncryptionServiceProvider;
    }

    /// <summary>
    /// Creates the crypto service provider for the authorization server that contains the public key used to verify an access token signature.
    /// </summary>
    /// <returns>An RSA crypto service provider.</returns>
    internal static RSACryptoServiceProvider CreateAuthorizationServerSigningServiceProvider()
    {
        var authorizationServerSigningServiceProvider = new RSACryptoServiceProvider();
        authorizationServerSigningServiceProvider.ImportParameters(AuthorizationServerSigningPublicKey);
        return authorizationServerSigningServiceProvider;
    }

public class RequireAuthorization : ActionFilterAttribute
{
    public string Scope { get; set; }

    public override void OnActionExecuting(ActionExecutingContext actionContext)
    {
        string[] scope = null;
        if (!string.IsNullOrEmpty(Scope))
        {
            scope = Scope.Split(new[] { "," }, StringSplitOptions.RemoveEmptyEntries);
        }

        var query = actionContext.RequestContext.HttpContext.Request;
        var req = actionContext.HttpContext;
        var authvalue = query.Headers["Authorization"];
        OAuthAuthorizationManager.VerifyOAuth2(query, query.Url.AbsoluteUri);
        //var response = new HttpResponseMessageProperty()
        //{
           //here is my question.
        //};

        base.OnActionExecuting(actionContext);

        //redirect page to
        //if (CheckUrCondition)
        //{
        //actionContext.Result = new RedirectToRouteResult(new RouteValueDictionary(new
        //{
        //    controller = "Home",
        //    action = "Index"
        //}));
        ////}
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:51:38.983

我遇到了同样的问题，并提出了以下适用于我的自定义 Authorize 属性。请注意，我的示例依赖于通过依赖注入注入的 ResourceServer 属性。当然，你也可以让它指向一个静态实例。

```
using System;
using System.Threading;
using System.Web;
using System.Web.Mvc;

using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OAuth2;

/// <summary>
/// Allows authorization to be applied to ASP.NET MVC methods where OAuth is used as the authorization mechanism.
/// </summary>
public class OAuthAuthorizeAttribute : AuthorizeAttribute
{
    /// <summary>
    /// Gets or sets the resource server that will be used to process the access token
    /// that will be used to authorized.
    /// </summary>
    /// <value>
    /// The resource server.
    /// </value>
    /// <remarks>
    /// This property will most likely be set using dependency-injection.
    /// </remarks>
    public ResourceServer ResourceServer { get; set; }

    /// <summary>
    /// Gets or sets the scopes.
    /// </summary>
    /// <value>
    /// The required scopes.
    /// </value>
    /// <remarks>
    /// Multiple scopes can be used by separating them with spaces.
    /// </remarks>
    public string Scopes { get; set; }

    /// <summary>
    /// When overridden, provides an entry point for custom authorization checks.
    /// </summary>
    /// <param name="httpContext">The HTTP context, which encapsulates all HTTP-specific information about an individual HTTP request.</param>
    /// <returns>
    /// true if the user is authorized; otherwise, false.
    /// </returns>
    /// <exception cref="System.InvalidOperationException">Thrown when the <see cref="ResourceServer"/> property is <c>null</c>.</exception>
    /// <exception cref="System.InvalidOperationException">Thrown when the <see cref="Scopes"/> property is <c>null</c>.</exception>
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (this.ResourceServer == null)
        {
            throw new InvalidOperationException("The ResourceServer property must not be null.");
        }

        try
        {
            this.StorePrincipalFromAccessToken(httpContext);

            return this.AccessTokenIsAuthorizedForRequestedScopes();
        }
        catch (ProtocolException)
        {
            return false;
        }
    }

    /// <summary>
    /// Processes HTTP requests that fail authorization.
    /// </summary>
    /// <param name="filterContext">Encapsulates the information for using <see cref="T:System.Web.Mvc.AuthorizeAttribute" />. The <paramref name="filterContext" /> object contains the controller, HTTP context, request context, action result, and route data.</param>
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        filterContext.Result = new HttpUnauthorizedResult();
    }

    /// <summary>
    /// Stores the principal contained in the current access token.
    /// </summary>
    /// <param name="httpContext">The HTTP context.</param>
    protected virtual void StorePrincipalFromAccessToken(HttpContextBase httpContext)
    {
        httpContext.User = this.ResourceServer.GetPrincipal();
        Thread.CurrentPrincipal = httpContext.User;
    }

    /// <summary>
    /// Check if the access token provided is authorized for the requested scopes.
    /// </summary>
    /// <returns></returns>
    protected virtual bool AccessTokenIsAuthorizedForRequestedScopes()
    {
        return OAuthUtilities.SplitScopes(this.Scopes ?? string.Empty).IsSubsetOf(this.ResourceServer.GetAccessToken().Scope);
    }
} 
```

您现在可以按如下方式使用此属性：

```
using System.Web.Mvc;

public class DemoController : Controller
{
    [OAuthAuthorize(Scopes = "public")]
    public ActionResult Index()
    {
        return this.View();
    }
} 
```

# bash - 如何在 bash 变量中存储 arg 和引用的 arg 值？

> ID：12256152
> 
> 赞同：1
> 
> 时间：2012-09-04T02:46:56.980
> 
> 标签：bash

假设我有两个脚本 printargs.sh：

```
#!/bin/bash

echo 1=$1
echo 2=$2
echo 3=$3 
```

和 passargs.sh：

```
#!/bin/bash

arg1="-e \"hello there\""
./printargs.sh $arg1 
```

如何修改 passargs.sh 以将两个参数传递给`-e`printargs.sh `hello there`？即我想 printargs.sh 打印

```
1=-e
2=hello there
3= 
```

感觉这个问题困扰了我好多年！我能得到它的唯一方法是创建两个变量。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:18:07.517

[答案已经存在多年了。](http://mywiki.wooledge.org/BashFAQ/050)

```
args=(-e 'hello there')
./printargs.sh "${args[@]}" 
```

# jquery - 使用 jquery 从 api 获取 json

> ID：12256154
> 
> 赞同：1
> 
> 时间：2012-09-04T02:46:58.010
> 
> 标签：jquery, ajax, json, api

我正在尝试使用 jquery 从[http://api.arbetsformedlingen.se/](http://api.arbetsformedlingen.se/)获取 json ，但我无法让它工作！我试了4个小时，现在我放弃了...

我想这可能是一个跨域问题，所以我尝试了 [http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

并且还尝试获取 xml 并使用此 [http://www.fyneworks.com/jquery/xml-to-json/](http://www.fyneworks.com/jquery/xml-to-json/)

但它没有用..我不想使用 php-proxy 方法来获取 xml 文件。

为什么我不能从 api 获取 json 文件？每次我尝试获取 xml 或 json 文件时，它都会返回一个空页面。

这是一个例子

```
$(document).ready(function() {
// Checking if jQuery is working
console.log("jQuery running");
var myurl="http://api.arbetsformedlingen.se/platsannons/soklista/kommuner?lanid=10";
console.log(" call back url :"+ myurl);
$.ajax({
    url: myurl,
    type: 'Get',
    cache: false,
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function(json) {
     console.log(" reponse :"+ json);
                }  
            });         
}); 
```

# ios5 - 在滚动 UIScrollView 之前获取滑动方向

> ID：12256158
> 
> 赞同：0
> 
> 时间：2012-09-04T02:47:26.110
> 
> 标签：ios5, uiscrollview, uiswipegesturerecognizer

有没有办法在滚动之前获得滑动的方向`UIScrollView`？

我尝试添加滑动手势但没有运气。

这是我要处理的事件。如果我快速侧向、向左或向右以及向下滑动，我希望它滚动，否则不要滚动。我也想获得滑动的间隔。有没有可能做这些事情的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:53:12.097

您可以使用 UISwipeGestureRecognizer 控件。使用 UISwipeGestureRecognizerDirectionLeft 获取方向。

为此，请查看以下代码：

```
UISwipeGestureRecognizer *oneFingerSwipeLeft = [[[UISwipeGestureRecognizer alloc] 
                                                 initWithTarget:self 
                                                 action:@selector(oneFingerSwipeLeft:)] autorelease];
[oneFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
[[self view] addGestureRecognizer:oneFingerSwipeLeft]; 
```

在 oneFingerSwipeLeft 函数中，您可以掌握方向。按照相同的过程向右滑动。

# glassfish - 存在多个 [2] JMX MBeanServer 实例

> ID：12256162
> 
> 赞同：4
> 
> 时间：2012-09-04T02:47:50.743
> 
> 标签：glassfish

我可以知道 glassfish 3 中显示以下消息的常见原因是什么？

```
WARNING: Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@43c0ae76].
WARNING: JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@43c0ae76] from index [0] 
WARNING: JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@bbe5d86] from index [1] 
```

我刚刚在 netbean 7.2 中启动了 3 个项目，如下所示

1.  common - 目前只有一个单例类用于使用@startup、@PostConstruct 和@PreDestroy 读取属性文件。它似乎与上面警告中的 DynamicInterceptor 有关。
2.  web（包括项目 1 和 3） - 在 netbean 中启用了 iceface 的简单页面
3.  门面和实体 bean（包括项目 1）- 几个实体 + 1 个从 netbean 生成的门面，似乎在上述警告中使用了 mbeanserver“JmxMBeanServer”。

我已经从谷歌检查过，他们中的大多数人只是忽略了上面的警告，警告的任何潜在问题或为什么显示上述消息？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T12:01:07.157

这是一个已知的 Glassfish 错误 ( [https://java.net/jira/browse/GLASSFISH-17010](https://java.net/jira/browse/GLASSFISH-17010) )。这个问题是在大约两年前报告的，它仍然处于“开放”状态，所以我不会屏住呼吸等待它很快得到修复。

另一方面，它似乎不会影响功能，正如您所说，可以放心地忽略。

# php - 如何使用 XPath 从 HTML 文档中提取属性对？

> ID：12256169
> 
> 赞同：1
> 
> 时间：2012-09-04T02:49:07.610
> 
> 标签：php, dom, xpath, attributes

给定的 HTML 文档包含这样的表单：

```
<form>
    <div controlType="yyy1" xmlTag="zzz1">...</div>
    <div controlType="yyy2" xmlTag="zzz2">...</div>
</form> 
```

我需要收集这些数据：

```
$div[0]      = array('yyy1', 'zzz1');
$div[1]      = array('yyy2', 'zzz2'); 
```

所需的属性对是`controlType`和`xmlTag`对于每个`div`元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:05:09.643

**评估这两个 XPath 表达式**：

```
/form/div[$k]/@controlType 
```

和：

```
/form/div[$k]/@xmlTag 
```

填充`$div[$k -1]`

其中`$k`必须替换为数字，1, 2, ...,`count(/form/div)`

有人可能会想将上面的两个表达式组合成一个 XPath 表达式：

```
/form/div[$k]/@* 
```

但是，允许 XPath 的实现以任何顺序返回属性（XPath 没有定义属性之间的顺序），并且不清楚这两个属性中的哪一个在所选节点中首先出现，哪个在第二个出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:26:58.083

**如果有帮助，我的两分钱**

```
 var doc = '<form xmltag="xxx"><div controltype="yyy1" xmltag="zzz1">...</div><div controltype="yyy2" xmltag="zzz2">...</div></form>';

        var result = [];

        $(doc).children().each(function () {
            var ctrl = $(this);
            if (ctrl.is('div')) {
                result.push([ctrl.attr('controlType'), ctrl.attr('xmlTag')]);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:48:47.417

```
@$url = "http://XXX.xom"
$path     = "//div[@class='sb_tlst']//a";
$contents = get_contents($url, $path);
foreach ($contents as $value) 
{ 
    /* do something */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:16:00.583

我的最终解决方案基于@dimitre-novatchev 的出色创意提案：

```
$res             = $xpath->query("//form//div/@xmltag"); // OBS: xmltag not xmlTag
$total_fields    = $res->length;

for ($i = 1; $i <= $total_fields; $i ++ )
{
    $r       = $xpath->query("//form//div[$i]/@xmltag");
    $xmltag  = $r->item(0)->value;

    $r           = $xpath->query("//form//div[$i]/@controltype");
    $controltype = $r->item(0)->value;

    $div[$i - 1] = array(
        'xmltag'         => $xmltag,
        'controltype'    => $controltype
    );
} 
```

输出样本：

```
array (
  0 => 
  array (
    'xmltag' => 'Case_Number',
    'controltype' => '',
  ),
  1 => 
  array (
    'xmltag' => 'Plaintiff',
    'controltype' => 'RadioButtons',
  ),
  2 => 
  array (
    'xmltag' => 'Plaintiff_Name',
    'controltype' => '',
  ), 
```

美丽的！

# java - 在Java中，如何覆盖继承类中变量的类类型？

> ID：12256172
> 
> 赞同：0
> 
> 时间：2012-09-04T02:50:01.587
> 
> 标签：java

在Java中，如何覆盖继承类中变量的类类型？例如：

```
class Parent {
  protected Object results;

  public Object getResults() { ... } 
}

class Child extends parent {

  public void operation() { 
  ... need to work on results as a HashMap
  ... results.put(resultKey, resultValue);
  ... I know it is possible to cast to HashMap everytime, but is there a better way?
  }

  public HashMap getResults() {
  return results;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T02:54:50.473

您可以使用[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)来实现这一点：

```
class Parent<T> {
    protected T results;

    public T getResults() {
        return results;
    } 
}

class Child extends Parent<HashMap<String, Integer>> {

    public void operation() { 
        HashMap<String, Integer> map = getResults();
        ...
    }
} 
```

`String`这里我使用了和的键值类型`Integer`作为例子。`Child`如果键和值类型不同，您也可以对其进行通用化：

```
class Child<K, V> extends Parent<HashMap<K, V>> { ... } 
```

如果您想知道如何初始化`results`字段，可以在构造函数中进行，例如：

```
class Parent<T> {

    protected T results;

    Parent(T results) {
        this.results = results;
    }

    ...
}

class Child<K, V> extends Parent<HashMap<K, V>> {

    Child() {
        super(new HashMap<K, V>());
    }

    ...
} 
```

* * *

一些旁注：

如果您制作了field ，那么[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)会更好，特别是因为它无论如何都有访问器。另外，如果它不会被重新分配，请考虑制作它。`results``private``getResults()``final`

另外，我建议通过使用公共声明中的类型而不是专门来[编程接口。](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)仅在实例化时引用实现类型（在这种情况下）：`Map``HashMap``HashMap`

```
class Child<K, V> extends Parent<Map<K, V>> {

    Child() {
        super(new HashMap<K, V>());
    }

    ...
} 
```

# ruby-on-rails-3 - activerecord - 时间格式

> ID：12256173
> 
> 赞同：1
> 
> 时间：2012-09-04T02:50:25.110
> 
> 标签：ruby-on-rails-3

这必须非常简单，但我正在努力寻找答案。我想使用下面显示的实例方法查找最后更新的记录。

```
class Subject < ActiveRecord::Base
  has_many :assignments, :dependent => :destroy

  def get_last_assignment_date 
    @last_date = self.assignments.select("date_assigned").last
    @last_day = @last_date.wday
  end 
```

我的作业模型如下所示：

```
create_table "assignments", :force => true do |t|
t.date     "date_assigned"
<snip> 
```

但是 Rails 为 get_last_assignment_date 返回以下错误：

```
undefined method `wday' for #<Assignment date_assigned: "2012-08-30"> 
```

我需要将活动记录返回的值转换为 Ruby 可以处理的时间格式，但我不知道该怎么做，而且它似乎很容易，甚至没有人费心去写如何去做。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:54:24.223

这：

```
self.assignments.select("date_assigned").last 
```

返回一个`Assigment`对象，而不是一个`Time`对象。

所以，而不是：

```
@last_day = @last_date.wday 
```

你所要做的：

```
@last_day = @last_date.date_assigned.wday 
```

* * *

您可能知道这一点，但以防万一：`select("date_assigned").last`不给您最新的日期。你必须使用`order`：

```
self.assignments.order(:date_assigned).last 
```

当然，如果最近创建的对象也是最新的对象，`date_assigned`那也没关系。

# php - php regex/preg_match 初学者

> ID：12256180
> 
> 赞同：0
> 
> 时间：2012-09-04T02:51:23.843
> 
> 标签：php, regex, preg-match

我不擅长表达我想匹配字符串下面的字符串。

```
http://www.site.com/ * .js

preg_match('(http://www\.site\.com/).*(\.js)',$html,$match); 
```

我知道这段代码不正确。* 表示任何带有 .js 扩展名的文件。任何人都可以用这种表达方式指导我。如有重复请见谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:06:07.163

您必须在模式中使用分隔符，例如“#”、“@”或“/”：

```
$url = 'http://www.site.com/javascript/test.js';

$preg_match = preg_match('#(http://www\.site\.com/)(.*)(\.js)#', $url, $matches);

if($preg_match === 1)
{
    var_dump($matches);
    // displays :
    // array
    //   0 => string 'http://www.site.com/javascript/test.js' (length=38)
    //   1 => string 'http://www.site.com/' (length=20)
    //   2 => string 'javascript/test' (length=15)
    //   3 => string '.js' (length=3)
}
else
{
    // doesn't match
} 
```

# java - Google App Engine 的报告框架

> ID：12256193
> 
> 赞同：0
> 
> 时间：2012-09-04T02:53:37.267
> 
> 标签：java, google-app-engine, jpa, reporting

总而言之，是否有一个经过验证的 GAE 工作报告框架 1）它是轻量级的 2）它可以聚合来自 Cloud SQL（JPA）的数据 3）它是 java 基础

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:04:59.807

需要报告但没有特定的输出格式要求是不寻常的。如果您正在寻找转储 XML 或 CSV，那么您应该简单地编写您的云查询，提取 ResultSet 数据并以您需要的格式返回数据 - 只需自定义代码。例如，如果您想生成 PDF 格式的报告，我会使用 iText 或 Docmosis 来创建文档。使用 iText，您的代码将提取 ResultSet 并构建 PDF 文档。使用 Docmosis，您可以以相同的方式工作，或者将 ResultSet 传递给 Docmosis 以代表您提取，但您的模板将创建您的格式。

无论哪种方式，JPA / Cloud SQL 都是您的应用程序代码的一部分。请注意，我为创建 Docmosis 的公司工作。

我希望这会有所帮助。

# hadoop - 我应该在 hadoop 2.0 中使用哪个库？

> ID：12256196
> 
> 赞同：0
> 
> 时间：2012-09-04T02:54:13.007
> 
> 标签：hadoop, version

伙计们。我是hadoop新手，我的hadoop版本是2.0.0-cdh4.0.1。但是我对应该使用哪个库感到困惑。`mapred`或`mapreduce`或`mapreduce.lib`,`jobconf`或`job`, 等等。

我尝试了 Hadoop 的第三次教育的例子*：权威指南*，我得到了很多警告。但是当我尝试二维教育的例子时，它会好得多。这完全让我感到困惑。

当我试图找到一些关于 hadoop 的指南时，我无法找出哪个版本。好像2.0版本有0.2X左右的关系？有没有关于 hadoop 2.0 的指南？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:26:47.283

根据 API 文档（2012 年 9 月），2.0.1-alpha 是当前版本 - [http://hadoop.apache.org/docs/current/api/](http://hadoop.apache.org/docs/current/api/)

来自“Hadoop：权威指南”（第 3 版）-第 27 页“使用 Hadoop 分析数据”

“新的 API 在 org.apache.hadoop.mapreduce 包（和子包）中。旧的 API 仍然可以在 org.apache.hadoop.mapred 中找到。”

“作业控制是通过新 API 中的 Job 类执行的，而不是旧的 JobClient，它不再存在于新 API 中。”

# android - android getText 错误

> ID：12256198
> 
> 赞同：-2
> 
> 时间：2012-09-04T02:54:39.733
> 
> 标签：android, eclipse, gettext

我正在尝试从 TextView 字段中提取文本，如下所示：

```
<TextView
        android:id="@+id/text_random_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text=""
        android:textColor="#FF8800"
        android:textSize="30dp"
        tools:context=".ImHungry" /> 
```

我正在使用的命令在这里：

```
final Button button2 = (Button) findViewById(R.id.button2);
            button2.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    String search = R.id.text_random_text.getText().toString(); 
                    Uri uri = Uri.parse("http://www.google.com/#q=" + search); 
                    Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
                    startActivity(intent); 
```

我似乎收到一个错误，指出：Cannot invoke getText() on the original type int

我是新手，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:57:12.070

`R.id.text_random_text`只是您的 TextView 的 int id。

您需要执行以下操作：

```
public class Blah extends Activity implements OnClickListener {
    TextView tv;

    @Override
    public void onCreate(Bundle b) {
        // blah blah
        tv = (TextView) findViewById(R.id.text_random_text);

         // blah blah

    }

    @Override
    public void onClick(View v) {
        if (v.getId() == yourButtonsID)
        {
            String search = tv.getText().toString();
            // whatever you wanna do
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:56:47.140

你不能`getText()`从`int`类型。

你需要做的是做一个`TextView`变量

```
TextView random_text = (TextView) findViewById(R.id.text_random_text); 
```

然后放在你的`onClickListener`地方：

```
String search = random_text.getText().toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:06:53.123

您正在尝试从

`R.id.text_random_text` 这不过是整数值。要获取**TextView**的 String ，您必须这样做。

```
 TextView tv = (TextView) findViewById(R.id.text_random_text) 
```

进而，

```
 button2.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    String search = tv.getText().toString(); 
```

# ruby-on-rails - 设计超时错误显示“真”

> ID：12256203
> 
> 赞同：13
> 
> 时间：2012-09-04T02:56:09.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

当我的会话过期时，Devise 给我一个无意义的错误，如下所示：

![在此处输入图像描述](../Images/ed9e967a743f1cfe8a24bd8915b88b7b.png)

这是我的代码：

```
<% flash.each do |key, value| %>
  <div class="alert alert-<%= key %>"><%= value %></div>
<% end %> 
```

如何自定义它以使其不显示`true`错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T14:27:28.237

是的，它[在 github devise repo 中有报道](https://github.com/plataformatec/devise/issues/1777)，他们更新了自述文件。

我用这样的代码在我的应用程序中解决它：

```
 <% [:notice, :error, :alert].each do |level| %>
    <% unless flash[level].blank? %>
      <div class="alert alert-<%= flash_class(level) %> fade in">
        <button type="button" class="close" data-dismiss="alert">X</button>
        <%= content_tag :p, flash[level] %>
      </div>
    <% end %>
 <% end %> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T22:09:47.110

您也可以在显示之前检查值是否为 is_a?(String)。

# iphone - 摆脱 ios 模拟器中的代理弹出窗口

> ID：12256204
> 
> 赞同：7
> 
> 时间：2012-09-04T02:56:11.083
> 
> 标签：iphone, ios, xcode, proxy

我在公司防火墙后面，所有网络流量都通过主代理。在我的 iOS 模拟器中，每次运行我的应用程序时，都会出现几次代理弹出窗口。问题是，我的应用程序（还）没有进行任何网络调用，也没有导入任何网络框架。事实上，我可以通过使用其中一个标准模板在 XCode 中创建一个新项目并立即运行它来重现这一点；它仍然会每次都提示输入代理凭据。

在我的 OSX 网络设置中，我显然已经在所有不同的协议（HTTP、HTTPS、FTP、Socks、RTSP、Gopher）中设置了我的代理凭据。我发现我需要在我的用户名之前放置域和反斜杠，以允许在任何 OSX 浏览器等中进行 Web 访问……所以考虑到我这样做了，然后 OSX 代理提示消失了，我被允许访问，我本来以为iOS模拟器只会继承这些设置......？

有任何想法吗？

还有一点可能不相关：我们还没有弄清楚如何在这台 Mac 上访问 App Store；尽管据说可以通过代理，但对 App Store 的任何使用都会导致超时，我们甚至看不到“主页”。我想知道iOS模拟器是否以某种方式使用类似于App Store的其他协议进行类似的网络调用......？（我原以为 App Store 会是 HTTPS，但我不知道）。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T13:03:43.117

如果您将 *.apple.com 放在您的代理直通列表中，模拟器将停止抱怨它。

和你一样，我也无法通过我们的公司代理让 Apple Store 商店工作。当我必须使用 App Store 时，我通过使用不使用代理的无线网络解决了这个问题。

我在操作系统中发现了许多其他无法通过我们的代理运行的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T07:18:36.377

我遇到了同样的问题，并找到了另一种方法**，而无需触及代理设置**！

我在使用 OSX-El Capitan 的 Mac 上工作，所以在其他版本中，这些步骤可能会略有不同：

*   转到**系统偏好设置**
*   转到**网络**
*   选择您的连接（无线/以太网/Thunderbolt-以太网）
*   点击**高级选项**
*   转到选项卡**代理**
*   这两个框**自动检测代理**（用于您的 Mac 上的 Internet 连接）和**Web 代理 (HTTP)**
*   **在Web-Proxy (HTTP)**处插入您的登录凭据。

这在我使用的所有 3 台 Mac 上大大减少了 Proxy-PopUp 的出现。（至少当我从 xcode 启动我的应用程序时它不再定期出现）

# sql - SQL 2012 - 公用表表达式 - 层次结构 - 在父母之前列出所有孩子

> ID：12256208
> 
> 赞同：1
> 
> 时间：2012-09-04T02:57:09.183
> 
> 标签：sql, sql-server, hierarchy, common-table-expression, sql-server-2012

我有一个我正在尝试解决的问题，我认为它与我在这里研究过的其他 SQL 邻接列表层次结构问题不同。我正在尝试对数据进行排序，以使所有孩子都列在他们的父母之前。我已经有返回给定 ParentID 的所有孩子和给定 ChildID 的所有父母的 CTE，但这些不符合我目前的需要。

我有两张桌子：

```
CREATE TABLE [dbo].[ItemMaster](
[ItemID] [int] IDENTITY(1,1) NOT NULL,
[Name] [nvarchar](50) NOT NULL,

CREATE TABLE [dbo].[References](
[RefID] [int] IDENTITY(1,1) NOT NULL,
[ParentID] [int] NOT NULL,
[ChildID] [int] NOT NULL, 
```

ItemMaster.ItemID 到 References.ParentID 和 References.ChildID 之间存在外键关系

这是我表中的一些示例数据...

物品 ID、名称

*   1、A1
*   2、A2
*   3、A3
*   4、P1
*   5、P2
*   6、P3
*   7、P4
*   8、TOP

RefID、ParentID、ChildID

*   1,1,5
*   2,2,5
*   3,2,6
*   4,3,2
*   5,7,3
*   6,8,4
*   7,8,1
*   8,8,2
*   9,8,3
*   10,8,7

我想要的输出将列出每个 ItemID 和 Name 以及在任何父母之前列出的孩子。像这样...

物品 ID、名称

*   4、P1
*   5、P2
*   6、P3
*   1、A1
*   2、A2
*   3、A3
*   7、P4
*   8、顶部

笔记：

*   任何 ItemID 都可以有 0、1 或 > 1 个父项。
    *   那些没有任何父母的将列在输出的顶部。
*   参考表中的“最重要的父母”没有 NULL 值。

我希望我已经提供了足够的细节并很好地解释了自己以获得一些反馈。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:55:13.793

我认为实现这一点的方法是使用递归操作并根据其所有子节点的权重为每个节点分配权重。

例如，这棵树中的任何叶子的权重都为零，因为它没有任何子节点。它的直接父级将为 1，父级的父级为 2，依此类推。按重量排序应该返回您需要的结果集。这是我用来测试我的理论的递归函数：

```
CREATE FUNCTION [dbo].[GetItemWeight](@ItemID int)
RETURNS int
BEGIN

DECLARE @Weight int;

SELECT
  @Weight = COUNT(ParentID) 
FROM
  [References]
WHERE
  ChildID = @ItemID;

SELECT
  @Weight = ISNULL(@Weight, 0) + SUM(dbo.GetItemWeight(ChildID))
FROM
  [References]
WHERE
  ParentID = @ItemID;

RETURN ISNULL(@Weight, 0);
END 
```

这将返回您发布的结果集：

```
SELECT ItemID, Name FROM ItemMaster ORDER BY dbo.GetItemWeight(ItemID); 
```

祝你好运:)

# javascript - jQuery idTabs - 鼠标悬停时自动更改和淡入淡出

> ID：12256213
> 
> 赞同：2
> 
> 时间：2012-09-04T02:57:53.190
> 
> 标签：javascript, jquery, idtabs

我`idTabs`在即将对我的网站进行的重新设计中使用 jQuery。我已经根据我的内容对其进行了样式设置，它看起来很棒，但是有几个功能缺少我需要的功能。

首先，这是我现在使用的：

```
<script type="text/javascript">
    $("#featured").idTabs("!mouseover"); 
</script> 
```

显然，上面的代码意味着它在悬停时会切换到下一个选项卡，因此无需单击。

**这是我想要做的：**

**1 -**当用户不与它们交互时，每隔指定的秒数自动更改选项卡。

**2 -**当它们改变时，让它们褪色。实际上已经有一个函数在`idTabs`：

```
<script type="text/javascript"> 
    $("#adv2").idTabs(function(id,list,set){ 
        $("a",set).removeClass("selected") 
            .filter("[href='"+id+"']",set).addClass("selected"); 
        for(i in list) 
            $(list[i]).hide(); 
        $(id).fadeIn(); 
        return false; 
    }); 
</script> 
```

唯一的问题是它不适用于`mouseover`事件。它不是在每个 上淡入`mouseover`，而是自动更改。

谁能帮我解决这个问题？

将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:48:04.693

在这里，我已经完成了在某个时间间隔内自动更改选项卡的完整箱，无需鼠标悬停或单击。请检查一次演示链接。

**演示：** [http ://codebins.com/bin/4ldqp7r/2](http://codebins.com/bin/4ldqp7r/2) **HTML**

```
<div>
  <div id="adv2">
    <ul>
      <li>
        <a class="selected" href="#ani1">
          1
        </a>
      </li>
      <li>
        <a href="#ani2">
          2
        </a>
      </li>
      <li class="split">
      </li>
      <li>
        <a href="#ani3">
          3
        </a>
      </li>
      <li>
        <a href="#ani4">
          4
        </a>
      </li>
    </ul>
    <span>
      <p id="ani1">
        Click on the tabs to see a nice fade.
      </p>
      <p id="ani2">
        You're not impressed?
      </p>
      <p id="ani3">
        But it's so cool... in a nerdy way.
      </p>
      <p id="ani4">
        Download idTabs and have your cake. You can eat it too.
      </p>
    </span>
  </div>
</div> 
```

**jQuery**

```
$(function() {

var tabList, interval = 1800;
var tabDiv = $("#adv2").get(0);
var rotate = function() {
        var current = $("#adv2 ul a.selected").attr("href");
        var index = ($.inArray(current, tabList) + 1) % tabList.length;
        tabClick(tabList[index], tabList, tabDiv);
    }

var timer = setInterval(rotate, interval);
var tabClick = function(id, list, set, action) {
        if (!tabList) {
            tabList = list;
        }
        if (action && action.event == "click") {

            timer && clearInterval(timer);
            timer = setInterval(rotate, interval);
        }

        $("a", set).removeClass("selected").filter("[href='" + id + "']", set).addClass("selected");
        for (i in list) {
            $(list[i]).hide();
        }
        $(id).fadeIn();
        return false;
    }

$("#adv2").idTabs(tabClick); 
```

});

** CSS：**

```
body{
  font: 10pt Calibri,Arial,sans-serif;
  text-align: center;
  color: #FFFFFF;
  background: none repeat scroll 0 0 #111111;
  margin: 0;
  padding: 0;
}

#adv2 {
  background: none repeat scroll 0 0 #181818;
  margin-left:5%;
  margin-top:5%;
  width: 500px;
}
#adv2 ul{
  display: block;
  float: left;
  height: 50px;
  width: 50px;
  margin:0px;
  background:#333;
}

#adv2 li {
  float: left;
}

li {
  list-style: none outside none;
}

#adv2 li a.selected {
  background: none repeat scroll 0 0 snow;
  color: #111111;
  font-weight: bold;
}

#adv2 li a {
  display: block;
  height: 25px;
  line-height: 22px;
  text-decoration: none;
  width: 25px;
}

#adv2 li a:hover {
  background:#0A0A0A;
}

#adv2 li.split {
  clear: both;
}

a{
  color: #FFFFFF;
}

a {
  outline: medium none;
}
#adv2 span {
  background: none repeat scroll 0 0 #181818;
  float: right;
  height: 50px;
  line-height: 45px;
  width: 410px;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7r/2](http://codebins.com/bin/4ldqp7r/2)

# git - Git 如何存储树对象？

> ID：12256214
> 
> 赞同：5
> 
> 时间：2012-09-04T02:57:59.763
> 
> 标签：git

我试图了解 git 如何存储树对象的确切格式。树对象的哈希是如何计算的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T04:05:48.017

树对象

```
'tree' ' ' size_decimal '\0' tree_content 
```

对于 tree_content 中的每个条目

```
mode ' ' filename '\0' hash_20_bin 
```

模式：100644 用于常规文件，100755 可执行文件；040000：树；120000：符号链接；160000: gitlink

表[http://linquize.blogspot.hk/2011/10/supplemental-information-for-git.html](http://linquize.blogspot.hk/2011/10/supplemental-information-for-git.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T04:07:21.823

树对象在内部存储为包含条目列表的二进制对象（“树”类型，将其与实际文件区分开来）。一个条目可以描述一个文件或另一个树（目录）。每行包含条目名称、它的 SHA1 哈希和它的模式。[更详细的描述可以在这里找到。](http://www-cs-students.stanford.edu/~blynn/gitmagic/ch08.html#_trees)

命令`git ls-tree`和`git cat-file -p`将输出此对象的文本表示。这种文本形式是一种非常简单的转换：SHA-1 以十六进制形式显示在条目名称之前，为了清楚起见，还有一个附加列描述了它指向的对象类型（“blob”、“tree”）。

它的散列被简单地计算为该内容的散列。由于它包含其组成部分的名称和散列，因此可以保证树散列在任何子树的散列发生变化时发生变化。

# matlab - Matlab 神经网络正确分类结果

> ID：12256218
> 
> 赞同：0
> 
> 时间：2012-09-04T02:58:38.353
> 
> 标签：matlab, neural-network, classification

我用反向传播算法训练了一个神经网络并计算了 MSE。现在我想找到正确分类结果的百分比（我面临分类问题）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:45:57.620

是否生成数据或是否为您提供带有样本的数据集取决于您的数据集。

在第一种情况下，您将生成的样本提供给您的 NN，并检查 NN 是否预测了正确的类别。你重复它说100次。对于每个正确分类的样本，您将计数器 CorrectlyClassified 加一。那么正确分类结果的百分比等于正确分类。为了获得更高的准确性，您可能不会生成 100 个样本，而是生成 X 个样本（其中 X 大于 100）。那么正确分类结果的百分比为： `CorrectlyClassified/X*100`。

如果给你一个数据集，你应该使用**cross-validation**。有关示例，请参阅[MATLAB 文档。](http://www.mathworks.com/help/toolbox/bioinfo/ref/crossvalind.html)

# java - JAX-RS：模型和最佳实践

> ID：12256219
> 
> 赞同：3
> 
> 时间：2012-09-04T02:58:41.873
> 
> 标签：java, spring, jersey, jax-rs

我有一个 JAX-RS 服务（我使用 Jersey），现在我必须做客户端。我想知道你们是如何处理模型对象的。您是否将模型类放在不同的 jar 中以便在客户端和服务器之间共享它？您总是使用 DTO 还是有时（总是？）返回 jpa 实体。

我必须使用的服务（我没有创建它但我可以修改它）经常返回实体，所以我想知道如果我将这些类外部化是否有点奇怪。

你怎么看？你是用来做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:36:24.180

这取决于项目的复杂性以及您在其中使用 JAX-RS 的目的：

*   对于非常简单的项目，我不会再创建一个 DTO 层
*   对于像您这样的项目，它似乎使用 JAX-RS 只是将数据从 java 客户端移动到 java 服务器，我也不会再创建一层。那是因为您负责两端（客户端和服务器），并且因为您在两个地方重用相同的对象（将它们放在单独的 jar 和 maven 模块中是个好主意）
*   对于使用 JAX-RS 向外部客户端公开 API 的项目，最好使用 DTO 将模型与 API 分开，这样它们就可以独立发展。例如，您并不总是希望通过 API 公开所有字段，或者在更改模型中的某些内容时破坏您的客户端。

**稍后编辑**

*   对于仅将模型数据字段的子集传输到客户端的项目，出于效率原因，DTO 层很有用

# python - 如何确保在 Python 中应用函数装饰器的顺序？

> ID：12256220
> 
> 赞同：0
> 
> 时间：2012-09-04T02:58:48.457
> 
> 标签：python, decorator, decorator-chaining

一些装饰器应该只用在最外层。

增强原始功能并添加配置参数的装饰器就是一个示例。

```
from functools import wraps

def special_case(f):
    @wraps(f)
    def _(a, b, config_x=False):
        if config_x:
           print "Special case here"
           return
        return f(a, b) 
```

我怎样才能避免像这样的装饰器被另一个装饰器装饰？

**编辑**

让每个尝试应用新装饰器的人都担心应用顺序，真是令人作呕。

那么，有没有可能避免这种情况呢？是否可以在不引入新参数的情况下添加配置选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T03:00:45.033

没有任何方法可以阻止它被装饰。您只需要记录它需要最后应用并告诉人们不要在另一个装饰器中使用它。

编辑响应您的编辑：在 Python 3 中，您可以为函数提供[仅关键字参数](http://www.python.org/dev/peps/pep-3102/)。这大大减少了更改对该功能的现有用途的影响。不幸的是，这只适用于 Python 3。

最终，将装饰器应用于函数只是意味着将装饰函数作为参数传递给另一个函数。函数（或任何对象）甚至无法知道*它*是作为参数传递的，更不用说传递给它的对象了。你不知道后面的装饰器的原因与在普通函数调用中一样的原因`f(g(x))`，该函数`g`无法知道它稍后会被调用`f`。

这是编写装饰器很棘手的原因之一。依赖于大量使用装饰器的代码，这些装饰器将显式参数传递给它们的包装函数（当你的传递`a`and`b`时）本质上是脆弱的。幸运的是，很多时候您可以编写一个使用的装饰器，`*args`因此`**kwargs`它可以将所有不使用的参数传递给装饰函数。

如果有人使用您提供的代码，并编写了另一个仅显式接受`a`和`b`作为参数的装饰器，然后将装饰函数调用为`f(a, b, True)`，如果失败，那是他们自己的错。他们应该知道他们使用的其他装饰器可能已经更改了函数签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:31:03.707

通常，当一个人编写一个一般使用的装饰器时，不会限制它所包装的函数的参数数量或名称。

大多数装饰器接受位置参数列表，并将关键字参数映射为包装器的参数，并将收到的这些参数传递给装饰函数：

```
def deco(func):
   def wrapper(*args, **kwargs):
       ... decorator stuff here ...
       return func(*args, **kwargs) 
```

因此，如果装饰器要接收它应该“使用”的参数 - 就像`config_x`你提到的那样，你所要做的就是记录它，将它作为关键字参数，然后从`kwargs`. 为了避免参数名称冲突，例如，可以在此参数名称前加上装饰器自己的名称或其他不同的名称：

```
def deco(func):
   def wrapper(*args, **kwargs):
       if "deco_config_x" in kwargs):
           config_x = kwargs.pop(deco_config_x)
       ... decorator stuff here ...
       return func(*args, **kwargs) 
```

这样，装饰器可以放在“装饰器堆栈”上的任何位置——它会选择寻址到它的参数，而那些在它下面的参数不会得到任何奇怪的参数。唯一的要求是你的函数和装饰器作为一个整体突出让他们不知道的关键字参数通过。

# java - 列表的自动 XmlRootElement 包装器

> ID：12256221
> 
> 赞同：4
> 
> 时间：2012-09-04T02:59:02.183
> 
> 标签：java, xml, jaxb

我有一个简单的类，我需要编组。该类声明为：

```
@XmlRootElement  
public class XMLUser... 
```

这是我得到的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xmlUser>
    <login>myLogin</login>
    <password>myPass</password>  
    <role name="role1"/>  
    <role name="role2"/>  
    <role name="role3"/>  
</xmlUser> 
```

现在我想在一个文件中拥有多个用户，但不需要自己创建一个包装类，有点像使用@XmlElementWrapper，但用于一个类而不是一个字段。我不知道这是否可能。

这样我就可以编组一个列表（或 jaxb 提供的一些对象），我最终可以得到一个这样的 xml（`<users>`自动生成的标签）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<users>
    <xmlUser>
        <login>login1</login>
        <password>pass2</password>
        <role name="role1"/>
        <role name="role2"/>
    </xmlUser>
    <xmlUser>
        <login>login2</login>
        <password>pass2</password>
        <role name="role1"/>
        <role name="role3"/>
    </xmlUser>
</users> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T07:51:44.213

不创建新类是不可能的。
单路是

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Users 
{
   @XmlElement(name = "xmlUsers")
   List<XmlUser> users = new ArrayList<XmlUser>();
} 
```

输出

```
<users>
    <xmlUsers>
       //...
    </xmlUsers>
    <xmlUsers>
       //...
    </xmlUsers>
</users> 
```

# web-platform-installer - 防止 webpicmd 将输出发送到 Windows 8 中的新窗口

> ID：12256224
> 
> 赞同：3
> 
> 时间：2012-09-04T02:59:25.640
> 
> 标签：web-platform-installer

在 Windows 8 上从巧克力库（[https://chocolatey.org/packages/webpicommandline，7.1.1374](https://chocolatey.org/packages/webpicommandline)）安装最新版本的 WebPICmd.exe 后，我无法使用该问题。由于某种原因，命令输出会转到一个新的控制台窗口，该窗口会立即关闭。我正在从 PowerShell 运行命令。

在 Windows 7 上，它运行良好，webpicmd.exe 的输出进入我当前的窗口。我无法想象为什么它会在 Windows 8 上正常工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T03:18:55.127

您可以尝试以管理员身份启动您的 CMD（您在其中运行 WebPICmd）。

# jquery - JW Player 在 Firefox 和 IE9 中无法正常工作

> ID：12256225
> 
> 赞同：0
> 
> 时间：2012-09-04T02:59:31.753
> 
> 标签：jquery, html, video, browser, jwplayer

我在让 JW Player 与 Firefox 和 IE9 一起正常工作时遇到问题。

[http://jsfiddle.net/2rzyB/](http://jsfiddle.net/2rzyB/)

问题是播放器应该出现的地方我在 Firefox 中什么也看不到。在 IE 中，我看到一个非常糟糕的大小。

它在所有其他浏览器上都能完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:11:13.267

问题出在我在调整窗口大小时动态调整播放器大小的方式上。

# blackberry - 当焦点离开一个领域时做某事

> ID：12256237
> 
> 赞同：1
> 
> 时间：2012-09-04T03:01:33.457
> 
> 标签：blackberry, listener, field

我是黑莓新手，我目前正在研究它。我有一些领域。我想听听焦点是否从特定领域移开，比如 objectChoiceField 然后采取一些行动。你们中的任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:24:08.837

使用现有类，您可以通过[setFocusChangeListener()添加](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/Field.html#setFocusListener%28net.rim.device.api.ui.FocusChangeListener%29)[FocusChangeListener](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/FocusChangeListener.html)。你的听众可以采取任何你想要的行动。

或者，您可以覆盖[Field.onUnfocus()](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/Field.html#onUnfocus%28%29)，当您的字段失去焦点时，将调用覆盖中的代码。如果您只需要一次，您可以使用匿名子类执行此操作，或者您可以创建一个命名子类并重复使用它。

# java - 为什么我不能像其他字符串数组一样比较命令行参数？

> ID：12256238
> 
> 赞同：4
> 
> 时间：2012-09-04T03:01:36.150
> 
> 标签：java, string, equals

在我的示例中，似乎与`main(String[] args)`我无法弄清楚的其他字符串数组之间存在差异。

```
public class TestArgs 
{
public static void main(String[] args) {
    String[] x = {"1","2","3"};
    System.out.print( x[2] == "3" );
    System.out.print( args[2] == "3" );
}} 
```

我运行这个程序：

```
java TestArgs 1 2 3 
```

我希望输出为“truetrue”，但我得到“truefalse”

有人可以告诉我有什么区别，还是我只是在做一些非常愚蠢的事情......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T03:02:41.823

在java中，你必须使用`"test".equals("test")`来测试字符串相等性；）

字符串是对象，对象不相同，它们只是具有相同的 VALUE

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T03:03:38.187

那是因为您在使用`==`. 比较时`String`，请使用`.equals()`而不是`==`. 这个[SO 答案](https://stackoverflow.com/a/767379/1168372)更好地解释了原因。

所以你的代码会变成这样：

```
public class TestArgs {
    public static void main(String[] args) {
        String[] x = {"1","2","3"};
        System.out.print("3".equals(x[2]);
        System.out.print("3".equals(args[2]));
    }
} 
```

此外，*这与这个答案没有直接关系*`args`，在使用它进行任何操作之前检查你的长度总是一个好主意。原因是最终用户可能没有为`args[2]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T03:02:51.327

运算符通过`==`引用比较对象。

# google-chrome-extension - 是否可以使用 Chrome 扩展程序在地址栏中设置多个图标？

> ID：12256242
> 
> 赞同：0
> 
> 时间：2012-09-04T03:02:19.200
> 
> 标签：google-chrome-extension

我有一个侦听器，它获取数据数组并使用数组中的一个项目在地址栏中设置一个图标`pageAction.setIcon()`，它工作正常。目前，它将其他图标放置在单击时激活的弹出窗口中。我想将所有图标都放在地址栏中，但是如果我`setIcon()`再次调用它会破坏第一个图标，并且只显示我的最后一个图标。

有没有办法（通过`pageAction.setIcon()`或其他方式）将多个图标从单个扩展名放在地址栏中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:09:20.970

一个扩展只能将一个`browser_action`或添加`page_action`到 UI。[的文档中`manifest.json`](http://developer.chrome.com/extensions/manifest.html)提到了它。

# c++ - 找不到匹配项

> ID：12256243
> 
> 赞同：0
> 
> 时间：2012-09-04T03:02:36.903
> 
> 标签：c++, class, match

我收到以下错误，我无法弄清楚原因：

```
Could not find a match for 'PEmployee::PEmployee(char *, double)' in function main() 
```

**这是我的代码：**

```
class PEmployee
{
    public:
        PEmployee();
        PEmployee(string employee_name, double initial_salary);
        void set_salary(double new_salary);
        double get_salary() const;
        string get_name() const;
    private:
        Person person_data;
        double salary;
};

int main()
{
    PEmployee f("Patrick", 1000.00);
    cout << f.get_name() << " earns a salary of ";
    << f.get_salary() << endl;
    return 0;
} 
```

有人能告诉我为什么我会收到这个错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:10:46.400

`std::string`with 类型的构造函数`char *`不是显式的，所以我不知道你为什么会得到那个错误。编译器应该认识到它可以`std::string`为您动态创建一个。

来自[http://en.cppreference.com/w/cpp/string/basic_string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)：

> basic_string( const CharT* s, const Allocator& alloc = Allocator() );

# javascript - 选择具有值数组的所有元素的最有效方法

> ID：12256246
> 
> 赞同：3
> 
> 时间：2012-09-04T03:02:40.990
> 
> 标签：javascript, jquery

假设我有一个`<select>`元素：

```
<select id="foobar" name="foobar" multiple="multiple">
    <option value="1">Foobar 1</option>
    <option value="2">Foobar 2</option>
    <option value="3">Foobar 3</option>
</select> 
```

假设我有一个值数组，例如：

```
var optionValues = [2, 3]; 
```

如何`<option>`最有效地选择值为 2 和 3 的 s？

我正在使用`<select>`具有数千个 s 的`<option>`s，因此像这样手动操作是行不通的：

```
var optionElements = [];

$("#foobar").children().each(function() {
    if($.inArray($(this).val(), optionValues)) {
        optionElements.push($(this));
    }
} 
```

它太慢了。有没有办法让 jQuery 为我需要选择的元素提供一个值列表？有任何想法吗？

PS 如果您想知道，我正在优化我的[jQuery PickList 小部件](http://code.google.com/p/jquery-ui-picklist/)，该小部件目前[在处理大型列表方面很糟糕](http://code.google.com/p/jquery-ui-picklist/issues/detail?id=6)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:25:43.733

您是否考虑过在插件引导程序中创建一个大哈希表？授予的值是唯一的：

```
var options = {};

$('#foobar').children().each(function(){

    options[this.value] = this;

}); 
```

这种查找方式很简单 - `options[valueNeeded]`。

编辑 - 搜索`optionValues`：

```
var optionValues = [2, 3];

var results = [];

for(i=0; i<optionValues.length;i++){

    results.push[ options[ optionValues[i] ] ];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T03:29:08.963

这还没有被描述，所以把它和盐的振动筛~~一起拿来：~~

```
var options = $("some-select").children(),
    toFind = [2, 3],
    values = {},
    selectedValues = [],
    unSelectedValues = [];
// First, make a lookup table of selectable values
// O(1) beats O(n) any day
for (i=0, l=toFind.length; i++; i<l) {
    values[toFind[i]] = true;
}
// Avoid using more complicated constructs like `forEach` where speed is critical
for (i=0, l=options.length; i++; i<l) {
    // Avoid nasty edge cases since we need to support *all* possible values
    // See: http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/
    if (values[options[i]] === true) {
        selectedValues.push(options[i]);
    }
    else {
        unSelectedValues.push(options[i]);
    }
} 
```

显然我们可以做更多的事情（比如缓存选定和未选定的值，这样我们就可以避免每次用户在它们之间移动一个值时重新构建它们），如果我们假设数据都是唯一的，我们甚至可以将整个事情变成三个“哈希”——但无论我们做什么，我们都[应该对其进行分析，](http://jsperf.com/)并*确保*它真的像我们*想象*的那样快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T03:11:00.470

假设这些值是唯一的，您可以采取一些捷径。例如，一旦你找到了一个值，你可以`splice()`通过将它从搜索数组中取出来停止搜索它。

不过，这将是最终的优化，将您从`O(n^2)`一路向下带到`O(n log n)`：排序。

首先，遍历选项并构建一个数组。基本上你只想将 NodeList 转换为一个数组。然后，`sort`带有回调的数组以获取选项的值。对搜索数组进行排序。现在您可以遍历“选项”数组并查找当前最小的搜索项。

```
var optsNodeList = document.getElementById('foobar').options,
    optsArray = [], l = optsNodeList.length, i,
    searchArray = [2,3], matches = [], misses = [];
for( i=0; i<l; i++) optsArray[i] = optsNodeList[i];
optsArray.sort(function(a,b) {return a.value < b.value ? -1 : 1;});
searchArray.sort();
while(searchArray[0] && (i = optsArray.shift())) {
    while( i > searchArray[0]) {
        misses.push(searchArray.shift());
    }
    if( i == searchArray[0]) {
        matches.push(i);
        searchArray.shift();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T03:13:56.900

试试这个：

```
var $found = [];
var notFound = [];
var $opt = $('#foobar option');
$.each(optionValues, function(i, v){
    var $this = $opt.filter('[value='+v+']');
    if ($this.length) {
       $elems.push($this)
    } else {
       notFound.push(v);
    } 
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T03:48:22.667

首先，我要感谢大家的精彩回复！我正在考虑每一个，我可能会在做出决定之前做基准测试。

在此期间，我实际上根据对另一个问题[的答案找到了一个“可接受的”解决方案。](https://stackoverflow.com/a/496126/848393)

这是我想出的（最后一个块，带有自定义`filter()`实现，是神奇发生的地方）：

```
var items = self.sourceList.children(".ui-selected");

var itemIds = [];
items.each(function()
{
    itemIds.push( this.value );
});

self.element.children().filter(function()
{
    return $.inArray(this.value, itemIds) != -1;
}).attr("selected", "selected"); 
```

我怀疑这是否与你们发布的任何内容一样有效，但它已将 1500 个项目列表上的“添加”选项列表操作时间从大约 10 秒减少到 300 毫秒。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-14T23:31:35.393

我会[`filter()`](http://api.jquery.com/filter/)尝试 jQuery 的方法，例如：

```
var matches = filter(function() {
    // Determine if "this" is a match and return true/false appropriately
});

// Do something with the matches
matches.addClass('foobar'); 
```

它可能不是这里最快的解决方案，但它已经相当优化并且非常简单，无需跟踪列表和所有爵士乐。对于您的情况，它应该足够快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T03:21:16.410

试试这个。

```
var optionValues = [2, 3],
    elements = [],
    options = document.getElementById('foobar').options;

var i = 0;
do {
    var option = options[i];
    if(optionValues.indexOf(+option.value) != -1) {
        elements.push(option);
    }
} while(i++ < options.length - 1); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-04T04:19:38.750

让 optionValues 通过要选择的索引数组。

```
for(var i = 0; i < optionValues.length; i++) {
  document.forms[0].foobar.options[optionValues[i]].selected = true;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-04T05:32:54.120

如果只想按值选择，下面的应该是合适的。它只循环选项一次，不调用任何其他函数，只有一个内置方法，所以它应该很快。

```
function selectMultiByValue(el, valuesArr) {

  var opts = el.options;
  var re = new RegExp('^(' + valuesArr.join('|') + ')$');

  // Select options
  for (var i=0, iLen=opts.length; i<iLen; i++) {
    opts[i].selected = re.test(opts[i].value);
  } 
} 
```

在某些浏览器中，循环遍历集合很慢，因此首先将选项集合转换为数组可能是值得的。但是在这样做之前进行测试，这可能不值得。

请注意，如果选择不是多选，则只会选择具有最后列出的值的选项。

如果您想允许各种其他字符或大小写，您可能需要摆弄正则表达式。

# c++ - Maven User-Agent 属性和 pluginRepository

> ID：12256247
> 
> 赞同：0
> 
> 时间：2012-09-04T03:02:49.643
> 
> 标签：c++, maven, user-agent

## 我想要的是

要使本指南正常工作 [http://blog.bigpixel.ro/2012/07/building-cc-applications-with-maven/](http://blog.bigpixel.ro/2012/07/building-cc-applications-with-maven/)

## 错误

我遇到了 HTTP 500 错误代码的问题，如下所示：

```
[ERROR]     Unresolveable build extension: Plugin org.apache.maven.plugins:maven-nar-plugin:2.1-SNAPSHOT or one of its dependencies could not be resolved: Failed to collect dependencies for org.apache.maven.plugins:maven-nar-plugin:jar:2.1-SNAPSHOT (): Failed to read artifact descriptor for org.apache.maven.plugins:maven-nar-plugin:jar:2.1-SNAPSHOT: Could not transfer artifact org.apache.maven.plugins:maven-nar-plugin:pom:2.1-SNAPSHOT from/to Duns maven snapshot (http://duns.github.com/maven-snapshots/): Failed to transfer file: http://duns.github.com/maven-snapshots/org/apache/maven/plugins/maven-nar-plugin/2.1-SNAPSHOT/maven-nar-plugin-2.1-SNAPSHOT.pom. Return code is: 500, ReasonPhrase:( The request was rejected by the HTTP filter. Contact your Forefront TMG administrator.  ). -> [Help 2] 
```

## 我试过的

我从“maven 在 5 分钟内开始”教程开始。由于在当前网络上实施的前沿，我遇到了 500 HTTP 错误，这并不顺利。我设法通过在我的 settings.xml 中设置用户代理字符串属性来解决这个问题。

```
<servers>
    <server>
        <id>central</id>
        <configuration>
          <httpHeaders>
            <property>
                <name>User-Agent</name>
                <value>Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; InfoPath.1; SV1; .NET CLR 3.8.36217; WOW64; en-US)</value>
            </property>
          </httpHeaders>
        </configuration>
    </server>
</servers> 
```

这行得通，我能够让 maven 为 java 项目工作。

我原以为这将是 HTTP 500 错误的结束，但每当我尝试从新的 pluginRepository 中提取插件时，我仍然会得到它们。

我已按照顶部链接的指南进行操作，但有一个例外。我没有将 pluginRepository 放在父文件夹的 pom.xml 中，而是将其放入我的 settings.xml 文件中的配置文件中。我确实首先尝试放入 pom.xml，但后来将其取出，希望它能修复它。

maven 中是否存在不遵守我指定的这个 User-Agent 字符串的内容？为什么它适用于 maven 5 分钟教程而不适用于其他任何东西？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:24:46.777

弄清楚了。

事实证明，我必须为每个我希望 maven 通过在标签中定位 pluginRepository 的 ID 来使用自定义 User-Agent 字符串的插件存储库创建另一个服务器条目。

现在，如果只有某种方法可以将用户代理字符串应用于所有未来定义的插件存储库

编辑：跟进，我在 Maven 中找不到将用户代理字符串应用于所有插件存储库配置的方法。我想出了一个解决方法，其中涉及 Squid 作为代理，它用自定义定义的请求替换传出 http 请求中的 User-Agent 属性，并配置 maven 以使用该代理。它完美地工作。

# css - 对 css z-index 感到困惑

> ID：12256254
> 
> 赞同：4
> 
> 时间：2012-09-04T03:03:47.847
> 
> 标签：css, z-index, css-position

我有两层，一层是黑色覆盖：

```
#overlay {
    background: rgba(0,0,0,0.7);
    width: 100%;
    height: 100%;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 0;
    display: none;
} 
```

另一个是我的文本容器：

```
#wrap {
    z-index: 999
    width:600px;
    height:600px;
    border:5px solid black;
    display:none;
    color:red;
} 
```

我想让叠加层和容器同时显示：

```
$(document).click(function () {
    $('#overlay').add('#wrap').fadeIn();
})​​ 
```

但是文本容器始终位于覆盖之下，尽管我已将覆盖设置`z-index`为`0`并将容器设置`z-index`为 999。

演示在[这里](http://jsfiddle.net/RrL2G/7/)

最后我发现我必须将覆盖设置`z-index`为`-1`，它会起作用。

为什么我不能将叠加层设置`z-index`得更高？因为它的位置是固定的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:07:39.940

`z-index`不适用，`#wrap`因为它具有流定位。一个框必须至少`position: relative;`在`z-index`生效之前。

此外，您的`z-index`值缺少分号。做到这一点`z-index: 999;`，它就可以工作。我的代码如下：

```
#wrap {
    z-index: 999;
    width:600px;
    height:600px;
    border:5px solid black;
    background: #FFF;
    display:none;
    color:red;
    position: relative; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:08:41.977

具有静态定位（这是默认值）的元素不受 z-index 属性的影响，将其定位更改为相对

# javascript - Javascript 对象中的跨浏览器键查找性能

> ID：12256257
> 
> 赞同：2
> 
> 时间：2012-09-04T03:04:23.870
> 
> 标签：javascript, performance, v8, spidermonkey, chakra

我正在用 Javascript 做一个数据密集型项目，其中有数千个带有短字符串作为“ID”的对象，需要通过 ID 有效地查找。我（可能是幼稚的）方法是为每个对象创建一个具有属性的对象，并以 ID 为键。

不同的浏览器/JS 引擎如何在像这样的非常大的对象中实现键查找？我知道 V8 对具有少量属性的对象进行了高度优化，但是如果有成千上万的属性不断添加和删除会发生什么？对象是由哈希表支持还是在不同的浏览器中尝试？无论哪种方式，我都认为使用较短的密钥是有好处的，但是有没有人知道这是否是一个很大的好处？是否有任何浏览器在键查找方面如此糟糕（即是否使用顺序搜索？）滚动我自己的数据结构会更高效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T03:06:22.030

多么巧合。前几天有一个关于这个的问题。OP 生成了一些基准测试并在几个小时前发布了它们。我建议你检查一下：[JavaScript Objects as Hashes? 复杂度是否大于 O(1)？](https://stackoverflow.com/questions/12241676/javascript-objects-as-hashes-is-the-complexity-greater-than-o1)

# linux-kernel - 通过 /dev/mem 修改当前进程的 pte？

> ID：12256261
> 
> 赞同：1
> 
> 时间：2012-09-04T03:05:14.023
> 
> 标签：linux-kernel

AFAIK，`/dev/mem`向用户提供物理内存，它通常用于通过 MMIO 读取/写入设备。在我的用例中，我想修改当前进程的 pte，以便两个 pte 指向同一个物理页面。特别是，我将 x86_64 二进制文件移动到 4G 虚拟空间之上，并将 mmap 虚拟空间移动到 4G 之下。我想让 pte 以上的 4G 和 pte 以下的 4G 指向同一个物理页面，这样当我写入 vaddr 以上的 4G 并从 pte 以下的 4G 读取时，我会得到相同的结果。示例代码可能如下所示：

```
*(unsigned char *)vaddr1 = 7 // write into 4G above vaddr1

val = *(unsigned char *)vaddr2; // read from 4G below vaddr2 

printf("val should be 7, %d\n", val); 
```

但是在我修改 4G below pte 以指向 4G above pte through 指向的物理页面后`/dev/mem`，内核在下面给我消息，

```
BUG: Bad page map in process mmap  pte:8000000007eb2067 pmd:07acb067
page:ffffea00001fac80 count:0 mapcount:-1 mapping:          (null) index:0x101b7b
page flags: 0x4000000000000014(referenced|dirty)
addr:0000000101b7b000 vm_flags:00100073 anon_vma:ffff880007ab0708 mapping:          (null) index:101b7b
Pid: 609, comm: mmap Tainted: G    B        3.5.3 #7
Call Trace:
 [<ffffffff8107abcc>] ? print_bad_pte+0x1d2/0x1ea
 [<ffffffff8107bf18>] ? unmap_single_vma+0x3a0/0x56d
 [<ffffffff8107c745>] ? unmap_vmas+0x2c/0x46
 [<ffffffff8108106b>] ? exit_mmap+0x6e/0xdd
 [<ffffffff8101cc4f>] ? do_page_fault+0x30f/0x348
 [<ffffffff81020ce6>] ? mmput+0x20/0xb4
 [<ffffffff810256ae>] ? exit_mm+0x105/0x110
 [<ffffffff8103bb6c>] ? hrtimer_try_to_cancel+0x67/0x70
 [<ffffffff81026b59>] ? do_exit+0x211/0x711
 [<ffffffff810272e0>] ? do_group_exit+0x76/0xa0
 [<ffffffff8102731c>] ? sys_exit_group+0x12/0x19
 [<ffffffff812f3662>] ? system_call_fastpath+0x16/0x1b
 BUG: Bad rss-counter state mm:ffff880007a496c0 idx:0 val:-1
 BUG: Bad rss-counter state mm:ffff880007a496c0 idx:1 val:1 
```

我猜内核会检查 pte 是否已被修改，我做错了什么。这是我的 pte 重写之前/之后的 vaddr1 和 vaddr2 的 pte。

```
above 4G pte: 0x8000000007eb2067
below 4G pte: 0x0000000007ea7067
after rewriting pte...
above 4G pte: 0x8000000007eb2067
below 4G pte: 0x8000000007eb2067 
```

任何想法？谢谢。

注意：现在我知道我应该释放 vaddr2 的 pte 指向的物理页面，否则内核会注意到物理页面没有被任何 pte 指向并给出这些错误。但是怎么做？我尝试使用`__free_page`，但出现以下错误。

```
BUG: unable to handle kernel paging request at ffffebe00008001c
IP: [<ffffffff8106b908>] __free_pages+0x4/0x2a
PGD 0
Oops: 0000 [#2] PREEMPT SMP
CPU 0 
```

# node.js - 在 Heroku 上运行 Phantomjs + 节点时遇到问题

> ID：12256264
> 
> 赞同：13
> 
> 时间：2012-09-04T03:05:28.607
> 
> 标签：node.js, heroku, phantomjs

我已经成功让 Phantomjs 在 Heroku 上工作，但现在我遇到了 node.js 的 phantomjs-node 接口的问题（请参阅[https://github.com/sgentle/phantomjs-node](https://github.com/sgentle/phantomjs-node)）。

当我尝试初始化 Phantom 时，我看到了 10-15 秒的延迟，然后：

```
> phantom stdout: ReferenceError: Can't find variable: socket

phantom stdout:   phantomjs://webpage.evaluate():1
  phantomjs://webpage.evaluate():1
  phantomjs://webpage.evaluate():1 
```

[您可以通过以下步骤或通过在https://github.com/matellis/phantom-test](https://github.com/matellis/phantom-test)上拉下我的测试应用程序来重现问题

```
git init phantom-test
cd phantom-test
heroku apps:create
# create node app as per Heroku instructions here https://devcenter.heroku.com/articles/nodejs
# copy bin and lib folders from http://phantomjs.googlecode.com/files/phantomjs-1.6.1-linux-x86_64-dynamic.tar.bz2 into root of your new project
# if you don't do this step you'll get an error "phantom stderr: execvp(): No such file or directory"
git add .
git commit -m "init"
git push heroku 
```

测试你的应用程序已经出现，倒数第三行会告诉你 URL，它应该是这样的：

```
http://fathomless-ravine-5563.herokuapp.com deployed to Heroku 
```

如果成功，您应该会看到 Hello World！在您的浏览器中。

现在从与 Heroku 应用程序相同的文件夹运行：

```
heroku run node 
```

在节点提示符下尝试以下操作：

```
phantom = require('phantom');
x = phantom.create(); 
```

等待 10-15 秒，您应该会看到错误。从这一点开始没有任何效果。

这应该输出文件`foo.png`：

```
x = phantom.create(function(ph){ph.createPage(function(page){ page.open('http://bbcnews.com', function(status){ page.render('foo.png', function(result) {ph.exit()}); }); }); }); 
```

要验证 Phantomjs 在 Heroku 上是否正常工作，请使用我的测试项目尝试以下操作：

```
>heroku run bash
Running `bash` attached to terminal... up, run.1
~ $ phantomjs test.js http://bbcnews.com foo.png
~ $ ls *.png
foo.png 
```

我无法在本地重现任何这些问题，但是报告了其他问题，人们可能在本地遇到了这个问题。

问题似乎起源于`shim.js`第 1637 行：

```
s.on('request', function(req) {
  var evil;
  evil = "function(){socket.emit('message', " + (JSON.stringify(JSON.stringify(req))) + " + '\\n');}";
  return controlPage.evaluate(evil);
}); 
```

我已经尝试过不同版本的节点、幻象等，但没有成功。

我还尝试了一个设置 DYLD 变量的自定义构建包，请参阅[http://github.com/tecnh/heroku-buildpack-nodejs](http://github.com/tecnh/heroku-buildpack-nodejs)也没有运气。

任何让 Phantom + Node 在 Heroku 上玩得很好的人请告诉我。在 Stackoverflow 上有几个关于此的参考，但没有人说“我让它工作，这就是方法”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T03:53:47.970

我从未使用过 phantomjs 节点模块，但我确实有一个应用程序在 Heroku 上同时运行节点和 phantomjs。

您需要使用自定义构建包才能使其正常工作。我的[`.buildpacks`文件](https://github.com/jessefulton/webpages-for-humans/blob/master/.buildpacks)看起来像

```
http://github.com/heroku/heroku-buildpack-nodejs.git
http://github.com/stomita/heroku-buildpack-phantomjs.git 
```

然后，您应该能够在子进程中运行 phantomjs 脚本：

```
var script = app.get('root') + '/scripts/rasterize.js' //the phantomjs script to run
  , bin = app.get('phantom') //normally this would just be the string "phantomjs"
  , spawn = require('child_process').spawn;

// set up args to the phantom cli
// (run the phantomjs command in your terminal to see options/format)
var args = [];
// ...

var phntm = spawn(bin, args);

phntm.stdout.on('data', function (data) { /* do something */ });
phntm.stderr.on('data', function (data) { /* do something */ });
phntm.on('exit', function (code) { /* handle exit */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:58:31.680

Heroku 不支持 WebSocket。使用 Socket.io 它有一个[解决方法](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)。不确定`dnode`, 哪个`phantomjs-node`使用。

我在 Heroku 上也遇到了 WebSockets 的问题，我切换到[Nodejitsu](http://nodejitsu.com/)，它为我解决了这个问题。

# android - 下载时点击暂停无法响应

> ID：12256269
> 
> 赞同：0
> 
> 时间：2012-09-04T03:06:11.510
> 
> 标签：android

下载的时候点暂停，没反应。不知道具体怎么描述，其实就是停的意思，但是实在想不出来。编码

```
public void onClick(View v) {

                      [color=#FF0000]if (flag == 0){//click mark[/color] 
```

不能显示，红色只是一个标记。代码如下

```
holder.btns .setOnClickListener(new OnClickListener(){
                @Override
                public void onClick(View v) {

                  [color=#FF0000]if (flag == 0){//judge the click mark[/color] 

                    holder.ratingBarScore.setVisibility(View.GONE);
                    holder.pro.setVisibility(View.VISIBLE);
                    holder.textView.setVisibility(View.VISIBLE);
                    if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
                    }else {
//                        Toast.makeText(this, "there is no SD card", 1000).show();
                        Log.v("wjp", "7889900");
                    }
                    final String downloadUrl =(String)v.getTag();
                    Thread thread = new Thread(){
                        int count = 0;
                        public void run(){
                          Log.v("ccf", "onClick");
                          try {
                              downLoadFile(context, downloadUrl, gameName, holder);    
                              openFile(context, new File("/sdcard/9twan/"+ gameName +".apk"));
                              if(!WebHelper.REGISTER_FLAG){
                                  Log.v("GamesInfoListAdapter", "WebHelper.REGISTER_FLAG == false");
                                  String imei, mac, mobile_number, model, brand;
                                  boolean flag;
                                  TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
                                  imei = tm.getDeviceId();
                                  if(imei == null){
                                      imei = "CUSTOM" + WebHelper.generateRandomIMEIString(15);
                                  }
                                  mac = null;
//                                  mac = tm.getDeviceId(); 
                                  if(mac == null){
                                      mac = "CUSTOM" + WebHelper.generateRandomMacString(17);
                                  }
                                  mobile_number = tm.getLine1Number();
                                  model = tm.getLine1Number();
                                  brand = tm.getLine1Number();
                                  flag = WebHelper.regDevice(context, "install", imei, mac, mobile_number, model, brand);
                                  if(flag){
                                      WebHelper.REGISTER_FLAG = true;
                                      Log.v("GamesInfoListAdapter", "WebHelper.REGISTER_FLAG == true");
                                  }
                              }

                          }catch (Exception e){
                              e.printStackTrace();
                          }
                        }
                    };
                    Log.v("wjp", "running"+thread.getName());
                    thread.start();
                    Toast.makeText(context, "begin to download" + gameName, 0).show();
                    holder.btns.setBackgroundResource(R.drawable.tab_out);

                    [color=#FF0000]flag =1;[/color]//here is need to pause,how to write?
                    }else {
                          if(Thread.currentThread() !=null){
                              Thread.interrupted();
//                              Thread = null;
                          }
//                        thread.
//                        Thread.interrupted();//pause return boolean
//                        Thread.sleep(3000);
//                          Thread.

                        holder.btns.setBackgroundResource(R.drawable.tab_install);
                        flag =0;

                    }
                }

            });
        }
        return convertView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:24:30.543

您正在尝试中断当前线程，您应该中断已启动的线程。您是否也在更改标志的值。您似乎有多个名为 flag 的变量

```
if(thread !=null){
 thread.interrupt();      
} 
```

# c# - Windows 7 和 WPF 中的 Wifi Direct

> ID：12256270
> 
> 赞同：1
> 
> 时间：2012-09-04T03:06:16.617
> 
> 标签：c#, .net, wpf, windows-7, wifi-direct

我想在我们正在构建的一些应用程序之间进行一些基本的通信。我一直在研究 wifi direct，这听起来很完美，但是对于 Windows 7 和 WPF (C#)，我找不到太多关于它的信息。

当我搜索时，我似乎得到的只是 Windows 8 支持和 Android 问题。

这是 Windows 7 已实施的标准吗？我可以在 C# WPF 应用程序中使用这些功能吗？如果是这样，如果您知道的话，一些参考资料会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:05:02.583

Wifi direct 未在 Windows 7 中实现，尽管可能有一些可用的 3rd 方应用程序可以实现它。

这是 Windows 8 中内置的一项新功能。这里有一个详细介绍该功能的演示文稿：http: [//channel9.msdn.com/Events/Build/BUILD2011/HW-329T](http://channel9.msdn.com/Events/Build/BUILD2011/HW-329T)

# java - Java File I/O，如何更改选择的目录？

> ID：12256276
> 
> 赞同：1
> 
> 时间：2012-09-04T03:07:35.337
> 
> 标签：java, file, nullpointerexception

这是我认为可行的概念，但由于某种原因，每次运行此代码时，我都会`NullPointerException`在代码中得到一个：

```
for(String s : namesOfDirectoryFiles){ 
```

### 代码

```
public class poc {
    private File current;
    private File last;
    private String[] namesOfDirectoryFiles;
    private static Scanner input = new Scanner(System.in);

    public static void main(String[] args){
        poc p = new poc();
        p.open("C:/");
        p.open(input.nextLine());
    }

    private void open(String name){
        current = new File(last, name);
        namesOfDirectoryFiles = current.list();
        for(String s : namesOfDirectoryFiles){
            System.out.println(s);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:10:22.950

如果抽象路径不存在，则会发生这种情况。

基本上，如果您尝试列出 Java 无法解析到物理位置的目录，它将返回一个空列表

来自[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)

> 如果此抽象路径名不表示目录，或者发生 I/O 错误，则返回 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:12:18.307

我建议使用[`isDirectory()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#isDirectory%28%29)方法来检查您的文件是否实际上是一个目录，然后再继续您的逻辑。根据Javadoc，此方法返回

> 当且仅当此抽象路径名表示的文件存在并且是目录时才为真；否则为假

您可以将代码修改为以下内容：

```
private void open(String name){
    if(name != null){
        current = new File(last, name);

        if(current.isDirectory()){
            namesOfDirectoryFiles = current.list();
            for(String s : namesOfDirectoryFiles){
             System.out.println(s);
            }
        }   
    }
} 
```

# sql-server - 从服务器更新 Windows CE 设备上的表的最佳方法

> ID：12256281
> 
> 赞同：1
> 
> 时间：2012-09-04T03:08:31.437
> 
> 标签：sql-server, synchronization, windows-ce, sql-server-mobile

我需要修改现有的 Windows CE 应用程序，该应用程序从 SQL Compact 数据库 (sdf) 获取数据，以便在将数据库表（只有 1 个表）与 SQL Server Express 对接时的最新记录更新到机器上。

我遇到了 Microsoft Sync Framework，它似乎能够让我实现我的要求。我尝试了他们的[演练之一：创建偶尔连接的智能设备应用程序](http://msdn.microsoft.com/en-us/library/cc488004%28v=vs.90%29.aspx)，但无法使应用程序正常工作（我根据指南以及[示例代码](http://go.microsoft.com/fwlink/?LinkId=152398)创建的应用程序）。WCF 服务已成功托管，我也可以从浏览器浏览到该服务。

我在 SynchronizeMenuItem 的单击事件的下一行遇到错误。

`Dim syncStats As Global.Microsoft.Synchronization.Data.SyncStatistics = syncAgent.Synchronize()`

下面是来自输出窗口的跟踪：

> “MobileSyncServices.exe”（托管）：已加载“System.SR.dll”
> System.dll 中发生“System.Net.WebException”类型的
> 第一次机会异常“System.ServiceModel.EndpointNotFoundException”类型的第一次机会异常发生在System.ServiceModel.dll
> System.dll 中发生“System.Net.Sockets.SocketException”类型的
> 第一次机会异常 System.dll 中发生“System.Net.Sockets.SocketException”类型的第一次机会异常
> 线程 0x771e2c1e 已退出代码为 0 (0x0)。
> mscorlib.dll 中发生了“System.Reflection.TargetInvocationException”类型的第一次机会异常

我一直在尝试找到解决此问题的方法，因为 2 天后我没有遇到任何问题，因此将其发布在这里。我已经安装了所有作为前提条件的框架/服务包。你们有没有人尝试过这个演练并遇到过类似的问题？更让我感到困惑的是，示例代码在我的两台开发机器（一台是 Win XP 和 Win 7）中也失败了。

是否有任何其他替代方法可以在停靠时使用 SQL Express Server 更新 Windows CE 设备中的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:41:06.200

要求是找到一种方法来覆盖停靠设备（通过 ActiveSync/同步中心连接）上的表，通过从 Pocket PC 直接连接到 SQL Server（通过指定任一 ip 地址）来实现这一点。

用户将在系统配置/选项下指定 SQL Server 凭据，该凭据将用于连接到 SQL Server。一旦从服务器中获取所需数据，紧凑型数据库将使用相关数据进行更新。

以下网络资源为解决此问题并实现目标铺平了道路。

1.  [从 Pocket PC 应用程序连接到 SQL Server Express](http://sampath.wordpress.com/2007/03/20/connecting-to-sql-server-express-from-a-pocket-pc-application/)

2.  [从模拟器（或 PDA）访问 SQL Server Express](http://netcf2.blogspot.com.au/2005/12/accessing-sql-server-express-from.html)

# wpf - 如何使用纯代码在 WPF 中的 Label 中绑定图像？

> ID：12256286
> 
> 赞同：0
> 
> 时间：2012-09-04T03:09:04.320
> 
> 标签：wpf, image, label, bind

我是 WPF 新手，在这里我正在制作一个拼图游戏，但遇到了一个问题：我只是不知道如何让图像在纯代码中的标签中显示（在 XAML 中，我可以做到。），我已经搜索过了google了很多，但似乎没有关于这个主题的相关文章。任何人都可以帮助我吗？谢谢。

我的代码示例：

```
 Label lbl = new Label();
        lbl.Width = 120;
        lbl.Height = 120;
        lbl.Background = new SolidColorBrush(Colors.YellowGreen);

        BitmapImage myImageSource = new BitmapImage();
        myImageSource.BeginInit(); 
        myImageSource.UriSource = new Uri("Images/test.png",UriKind.Relative); 
        myImageSource.EndInit();

        lbl.Background.SetValue(ImageBrush.ImageSourceProperty, myImageSource);

        myGridContainer.Children.Add(lbl); 
```

好吧，这个代码示例不能工作。为什么 ？您的任何评论或回答将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:48:27.720

您可以使用 BindingOperations.SetBinding 将 DependencyProperty 数据绑定到其源。

另请参阅：[如何在也是数据绑定的代码中创建平铺图像？](https://stackoverflow.com/questions/10749325)

# android - 在 Android 中获取传入的短信

> ID：12256288
> 
> 赞同：0
> 
> 时间：2012-09-04T03:09:08.973
> 
> 标签：android, sms

我尝试了这篇文章中提到的这段代码：http://stackoverflow.com/questions/7089313/android-listen-for-incoming-sms-messages

但似乎问题在于，当我在手机中安装该程序时，它无法正常工作。我希望这个应用程序在后台运行。当我检查我的手机运行进程时，它不存在。

顺便说一句，下面的代码是我有这个应用程序的在线代码。这个对吗？

谢谢

## RJ

```
public class SmsListener extends BroadcastReceiver{

private SharedPreferences preferences;

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){
        Bundle bundle = intent.getExtras();           //---get the SMS message passed in---
        SmsMessage[] msgs = null;
        String msg_from;
        if (bundle != null){
            //---retrieve the SMS message received---
            try{
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];
                for(int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                    msg_from = msgs[i].getOriginatingAddress();
                    String msgBody = msgs[i].getMessageBody();
                }
            }catch(Exception e){
                Log.d("Exception caught",e.getMessage());
            }
        }
    }
}
} 
```

注意：在您的清单文件中添加 BroadcastReceiver-

```
<receiver android:name=".listener.SmsListener">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

添加此权限：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

# rubygems - gemspec 中包含的依赖项未添加到 rails 引擎中的资产管道

> ID：12256291
> 
> 赞同：20
> 
> 时间：2012-09-04T03:09:53.923
> 
> 标签：rubygems, ruby-on-rails-3.1, asset-pipeline, ruby-on-rails-plugins

我正在编写一个具有一些依赖关系的 Rails 引擎。我已经在 gemspec 中指定了依赖项，并且在我运行时引擎会找到它们`bundle install`（即 Gemfile.lock 看起来是正确的）。当我想在 Ruby 文件中使用插件时，我可以这样做，但需要`require dependency-name`在文件顶部显式说明。

但是，当我想使用依赖项的资产管道时，sprockets 找不到它。

我（目前）正在使用的应用程序是 rails 插件的测试文件夹中的虚拟应用程序。如果我在引擎的 Gemfile（实际上是虚拟应用程序的 Gemfile）中指定 Sprockets 可以找到资产，但如果我在 gemspec 中指定它们则不能。我不想依赖 Gemfile，因为这意味着任何使用我的插件的应用程序都需要手动将我的所有依赖项添加到他们的 Gemfile。出于同样的原因，我不想要涉及更新应用程序配置文件的解决方案。

当 gemspec 中包含依赖项时，这有效（在 ruby​​ 文件中）：

```
require 'dependency-name' 
```

但是当 gemspec 中包含依赖项时，这（在 JS 文件中）不起作用：

```
//= require 'dependency-name' 
```

`require`当 Gemfile 中包含依赖项时，两者都不需要。我认为这很清楚，但如果您需要更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-04T15:08:25.687

我需要在我的 engine.rb 中明确包含依赖项，以便它的资产最终进入我的资产管道。不知道为什么这是必要的，因为 Alastor 的回答对我来说听起来是正确的。值得注意的是，依赖项是我使用 bundler 创建的 gem，尽管我不明白为什么这会有所作为。

```
module MyRailsPluginFull
  class Engine < ::Rails::Engine
    require 'dependency1'
    require 'dependency2'
  end
end 
```

**2012 年 11 月 23 日添加**

花了更多时间与引擎合作后，我想我现在更充分地理解了这一点。Gemspec 只是所需依赖项的列表，但 gemspec 不会指示应用程序在启动时从这些依赖项中加载文件。另一方面，Gemfiles 会在启动期间加载所有文件。

**添加于 2015 年 3 月 20 日**

我在 2 年多前所说的“Gemfiles，另一方面，在启动期间会加载所有文件”并不完全正确。这在 Rails 中大部分是正确的，默认情况下运行`Bundler.require`需要 Gemfile 中列出的所有依赖项，如此处的生成器文件中所示[-](https://github.com/rails/rails/blob/v4.2.1/railties/lib/rails/generators/rails/app/templates/config/application.rb#L20)请注意，虽然 Rails 的默认行为从 Rails3 更改为 Rails 4 如此[处讨论，](https://github.com/rails/rails/commit/49c4af43ec5819d8f5c1a91f9b84296c927ce6e7)但两者都使用`Bundler.require`. 但是，有一个强有力的理由来使用`Bundler.setup`，然后`require "dependency1"`在实际依赖的任何文件中显式地使用`depedency1`. 请参阅vs的[讨论](http://anti-pattern.com/use-bundler-setup-instead-of-bundler-require)。`Bundler.require``Bundler.setup`

此外，正如@nruth 在评论中指出的那样，这可能会导致加载不必要的类。但是，如果依赖项设计得很好，它的类将主要是自动加载的，从而为需要整个依赖项创建最小的开销。或者，如果它在一个单独需要的文件中定义了它的引擎，你可以只包含引擎文件，它应该将必要的文件添加到你的资产路径中，允许你在 CSS 和 JS 清单中要求它的资产。请参阅[此 bootstrap-sass 示例](https://github.com/twbs/bootstrap-sass/blob/v3.3.4/lib/bootstrap-sass/engine.rb)，其中 gem 将其所有资产`config.assets.paths`添加到`config.assets.precompile`.

虽然这个问题已经有几年了，而且我什至不记得我当时写的是什么 Rails Engine，但我怀疑正确的方法会更接近这个：

```
module MyRailsPluginFull
  class Engine < ::Rails::Engine
    initializer 'bootstrap-sass.assets.precompile' do |app|
      require 'dependency1'

      # add dependency1's assets to the list of paths
      app.config.assets.paths << ...
    end
  end
end 
```

但是请注意，这不是必需的——依赖项本身应该已经定义了这个初始化器，这样简单地要求它就足够了，就像上面的引导程序示例一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:05:17.230

您根据[http://edgeguides.rubyonrails.org/engines.html](http://edgeguides.rubyonrails.org/engines.html)设计了引擎？如果您的引擎类继承自 Rails::Engine，它确实应该自己找到所有资产。

# jquery - HTML表格CSS / HTML / JQUERY内的溢出和下拉div问题

> ID：12256294
> 
> 赞同：0
> 
> 时间：2012-09-04T03:10:15.807
> 
> 标签：jquery, html, css

我不知道如何让这个下拉列表扩展到表格的边界之外。我尝试将不同的溢出 CSS 属性应用于不同的项目并更改 z-index 等无济于事。任何帮助，将不胜感激。提前致谢！

[http://jsfiddle.net/DWDum/](http://jsfiddle.net/DWDum/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:24:38.540

从`overflow: hidden`您的`div.datagrid`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:21:33.270

尝试添加`position:relative;`到您的下拉菜单容器。

# c++ - 多线程访问一个 std::map 会导致不安全的行为吗？

> ID：12256297
> 
> 赞同：3
> 
> 时间：2012-09-04T03:10:34.993
> 
> 标签：c++

如果多个线程访问一个映射对象，但是，我可以确保这些线程中的任何一个访问都不会具有相同的键，并且访问就像：

```
//find value by key
//if find
// erase the object or change the value
//else
// add new object of the key 
```

操作会不会导致同步问题？</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T03:13:55.557

是的，在没有正确同步的情况下进行并发更新可能会导致崩溃，即使您的线程访问不同的键：`std::map`基于树，树会重新平衡，因此您可能会导致使用看似不相关的键写入节点的父节点。

此外，在写入的同时执行只读访问，或者在写入时搜索解锁+锁定是不安全的：如果您有可能更新或删除节点的线程，则必须在写入之前锁定所有读取器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T03:19:09.917

如果任何线程插入到树中，您**将遇到并发问题。**STL`map`是使用红黑树实现的（或者至少这是我所熟悉的——我不知道标准是否要求红黑树）。红黑树可能会在插入时重新平衡，这将导致线程之间的各种竞争。

只读访问（绝对**没有**写入器）会很好，但请记住**不是**`operator[]`只读的；它可能会添加一个新元素。您需要使用该方法，获取迭代器，然后自己取消引用。**`find()`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T03:13:05.417

除非文档（即 ISO C++11 标准）说它是线程安全的（而他们不是），否则就是这样。时期。它不是线程安全的。

可能有 std::map 的*实现*允许这样做，但它绝不是可移植的。

映射通常建立在红黑树或其他自动平衡数据结构上，因此对结构的修改（例如插入或删除键）将导致重新平衡。

您应该使用诸如互斥信号量之类的东西来包装映射上的读取和写入操作，以确保正确完成同步。**

# html - 表正在打破浮动父级

> ID：12256301
> 
> 赞同：0
> 
> 时间：2012-09-04T03:11:18.770
> 
> 标签：html, css

我有一个 3 列布局。最右边的列包含一个表格。当我删除表时一切正常。当桌子在那里时，它会破坏浮动并将 div 推到其他两个下方，这是错误的。表格不比 div 宽。这是HTML：

```
<html>
<head>
<title> Packard Carburetors </title>
<link rel="stylesheet" type="text/css" href="css/reset.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>

<div class="wrapper">

<div id="header">
    <h1 id="banner">Packard Carburetors</h1>
</div><!--Header-->

<div id="navbar" class="green">
    <ul id="navigation">
        <li>HOME</li>
        <li>PACKARD
            <ul class="sub-nav">
                <li>-1930 Speedster</li>
                <li>-1929-31 Super 8</li>
                <li>-Late 1931-32 Super 8</li>
                <li>-1929-31 Standard 8</li>
                <li>-Late 1931-32 Standard 8</li>
                <li>-Rare Parts</li>
                <li class="last">-745 Parts</li>
            </ul>
        </li>
        <li>CADILLAC
            <ul class="sub-nav">
                <li>-1932-33 V12 & V16</li>
                <li class="last">-1934-1937 V12 & V16</li>
            </ul>
        </li>
        <li>SHOPPING CART</li>
        <li>CHECK OUT</li>
        <li>CONTACT US</li>
    </ul><!--Navigation-->

    <img id="#navbar-logo" src="img/logo.png">
    <p id="nav-phone" class="black center bold">775.842.4282</p>
    <p class="black center nav-small bold">packardcarbs@gmail.com</p>
    <p class="black center nav-small bold">Sparks, NV USA</p>
</div><!--Navbar-->

<div id="content">

    <h1 class="home-banner green center bold">All Packard Carburetors 1929-'32</h1>
    <h2 class="home-banner green center bold">1930 Speedster <span class="black">|</span> 1929-32 Super 8 <span class="black">|</span> 1929-32 Standard 8</h2>
    <hr>
    <h1 class="home-banner green center bold">Cadillac Carburetors</h1>
    <h2 class="home-banner green center bold">1932 - 1937 V-12 & V-16</h2>

    <img id="detroit-lubricator" src="img./detroit-lubricator.png">

    <div id="middle-column">
        <ul id="feature-list-home">
            <li>Silicone Bronze Investment Casting</li>
            <li>Precision CNC Brass Machine Parts</li>
            <li>Viton-Tipped Needles</li>
            <li>Current Design
                <ul id="sub-feature-list-home">
                    <li>-Needle Seats</li>
                    <li>-Pressure Valves</li>
                </ul>
            </li>
            <li>Authentic Polished Brass Components</li>
            <li>Gasoline and Ethanol Proof Exterior Coating</li>
            <li>Exact Size as Original</li>
        </ul>

        <img id="middle-bar-spacer" src="img/divider-bar.png">

        <div id="box-and-copy">
            <img id="boxes" src="img/packard-boxes.png">

            <p class="bold">All Components In-Stock!</p>
            <p>Your Carburetor will be professionally assembled, engine tested and shipped quickly worldwide.</p>
        </div><!-- Box and copy -->

    </div><!--Middle Column -->

    <div id="right-column">
        <table>
            <tr>
                <td><img src="img/carb-1.png"></td>
                <td><img src="img/carb-1.png"></td>
            </tr>
            <tr>
                <td>1930 Speedster</td>
                <td>1929-1931 Super 8</td>
            </tr>
            <tr>
                <td><img src="img/carb-3.png"></td>
                <td><img src="img/carb-4.png"></td>
            </tr>
            <tr>
                <td>1932 Super 8</td>
                <td>1929-1931 Standard 8</td>
            </tr>
        </table>
    </div> <!--Right Column-->
</div><!--Content-->

</div><!--Wrapper-->

</body>
</html> 
```

和CSS：

```
/*General styles*/

.wrapper {
    width: 940px;
    margin: 0 auto;
    text-align: left;
    background-image: url('../img/body-bg.png');
    background-repeat: repeat-y;
    overflow: auto;
}

body {
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    font-size: 12px;
}

h1 {
    font-size: 3em;
}

h2 {
    font-size: 2em;
}

#content {
    float: left;
    width: 700px;
    padding: 10px 0px 0px 20px;

}

#banner {
    display: inline-block;
    text-indent: -9999px;
    width: 940px;
    height: 201;
    background-image: url('../img/banner.png');
}

/* Nav Stuff */

#navbar {
    width: 190px;
    font-weight: bold;
    font-size: 1.33em;
    padding: 20px 20px 0px 10px;
    float: left;
}

#navigation li {
    padding-bottom: 20px;
}

.sub-nav{
    font-size: .87em;
    padding-top: 20px;
    padding-left: 2.5em;
}

#navigation li ul.sub-nav li.last {
    padding-bottom: 0px;
}

#nav-phone {
    font-size: 1.19em;
    padding-top: 15px;
}

.nav-small {
    font-size: .75em;
    padding-top: 5px;
}

/* Middle Column */
#middle-column{
    width: 220px;
    padding-right: 20px;
    margin-top: 40px;
    border-right: 2px solid #000000;
}

#feature-list-home {
    list-style-image: url('../img/bullet.png');
    font-size: 1.17em;
    padding-left: 20px;
    font-weight: bold;
    padding-bottom: 40px;
}

#feature-list-home li {
    padding-bottom: 20px;
}

#sub-feature-list-home {
    padding-left: 10px;
}

#sub-feature-list-home li {
    padding-bottom: 0px;
}

#middle-bar-spacer {
    padding-bottom: 20px;
}

#boxes {
    padding-bottom: 10px;
}

#box-and-copy {
    font-size: 1.33em;
    line-height: 1.5em;
    text-align: center;
}

/* Home Page Right Column */

#right-column {
    float: left;
    width: 460px;
    overflow: hidden;
}

/* Home Content Banner Stuff */

.home-banner {
    line-height: 1.25em;
}

#detroit-lubricator {
    margin-top: 10px;
}

/* OOCSS properties */

.green{
    color: #117041;
}

.black{
    color: #000000;
}

.center {
    text-align: center;
}

.bold {
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:09:11.740

```
#middle-column {float:left;}
#right-column {width:450px;} 
```

# java - 强制序列化不可序列化的Java对象？

> ID：12256302
> 
> 赞同：5
> 
> 时间：2012-09-04T03:11:19.753
> 
> 标签：java, serialization, stanford-nlp

我正在尝试使用 Stanford CoreNLP 库，并且我想序列化主要的 StanfordCoreNLP 管道对象，即使它抛出了 java.io.NotSerializableException。

全文：每当我运行我的实现时，将管道注释器和分类器加载到内存中大约需要 15 秒。最终进程在内存中大约有 600MB（很容易小到可以存储在我的案例中）。我想在第一次创建它之后保存这个管道，所以我可以稍后将它读入内存。

但是它会引发 NotSerializableException。我尝试制作一个实现 Serializable 的简单子类，但 StanfordCoreNLP 具有未实现此接口的注释器和分类器属性，并且我无法为所有它们创建子类。

是否有任何 Java 库可以序列化不实现 Serializable 的对象？我想它必须通过它的属性递归并对任何类似的对象做同样的事情。

我试过的序列化代码：

```
static StanfordCoreNLP pipeline;
static String file = "/Users/ME/Desktop/pipeline.sav";
    static StanfordCoreNLP pipeline() {
    if (pipeline == null) {
        try {
            FileInputStream saveFile = new FileInputStream(file);
            ObjectInputStream read = new ObjectInputStream(saveFile);
            pipeline = (StanfordCoreNLP) read.readObject();
            System.out.println("Pipeline loaded from file.");
            read.close();
        } catch (FileNotFoundException e) {
            System.out.println("Cached pipeline not found. Creating new pipeline...");
            Properties props = new Properties();
            props.put("annotators", "tokenize, ssplit, pos, lemma, ner, parse, dcoref");
            pipeline = new StanfordCoreNLP(props);
            savePipeline(pipeline);
        } catch (IOException e) {
            System.err.println(e.getLocalizedMessage());
        } catch (Exception e) {
            System.err.println(e.getLocalizedMessage());
        }
    }
    return pipeline;
}

static void savePipeline(StanfordCoreNLP pipeline) {
    try {
        FileOutputStream saveFile = new FileOutputStream(file);
        ObjectOutputStream save = new ObjectOutputStream(saveFile);
        save.writeObject(pipeline);
        System.out.println("Pipeline saved to file.");
        save.close();
    } catch (FileNotFoundException e) {
        System.out.println("Pipeline file not found during save.");
    } catch (IOException e) {
        System.err.println(e.getLocalizedMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:25:19.123

一般来说，代表数据对象的斯坦福 NLP 类（Tree、LexicalizedParser 等）是可序列化的，而代表处理器的类（StanfordCoreNLP、LexicalizedParserQuery、CRFClassifier）则不是。为了实现您的要求，您需要使许多类可序列化，而这些类不是可序列化的，并处理由此产生的任何后果。

但是，我认为您的基本思想是错误的。StanfordCoreNLP 在这 15 秒内加载的主要是标准的 java 序列化对象。NER 分类器和解析器语法是标准的序列化 java 对象。（有些东西不是这种形式，而只是二进制数据，包括 POS 标记器，主要是出于历史原因。）事实上，使用标准 Java 序列化加载大量对象并不是那么快......你可以在网上找到关于 Java 序列化速度以及替代方案速度比较的讨论。制作一个包含所有当前序列化对象的新的更大的序列化对象并不能让它更快。（通过将所有东西都放在一个连续的数据流中，您可能会获得一小部分，

相反，我建议处理这个问题的关键是只支付一次加载系统的成本，然后在处理许多句子时将其保存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:38:06.657

如果确实它不可序列化的唯一原因是它没有被标记为`Serializable`，那么您可能能够摆脱一些非默认的序列化策略。例如，您可以尝试[Jackson](http://wiki.fasterxml.com/JacksonHome)或[XStream](http://xstream.codehaus.org)。

也就是说，如果有一个很好的理由，它`Serializable`首先不是，这些策略可能会以有趣的方式打破。彻底测试！

# java - 从球衣休息应用程序中，我无法获得正确的 URL

> ID：12256303
> 
> 赞同：0
> 
> 时间：2012-09-04T03:11:33.233
> 
> 标签：java, rest, jersey

我是 Jersey Rest Framework 的新手，我写了一个简单的演示来学习这项技能。这是我的问题：我试图用这个 URL 访问我的 helloworld ---

```
http://localhost:8080/PayInterface/query/helloworld 
```

但没有用。你能告诉我我做错了什么吗？我写了一个类：

```
@Component
//Declaring that all it will handle all requests starting by /TestCaseDto
@Path("query")
public class QueryApi {
    @Path("/helloworld")
    @GET
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public String test(){
        return new String("Hello World!!!");
    }
} 
```

和我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:26:02.470

关于这个“dint work”的更多细节
对于初学者来说会很好 - 尝试像这样更改类名上方的路径

```
@Path("/query") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:58:49.730

我想在这里你返回字符串。所以你不能将生产类型作为**xml**，试试这个

```
@Stateless
@Path("query")
public class QueryApi {
   @Path("/helloworld")
   @GET
   @Produces({MediaType.APPLICATION_JSON})
   public String test(){
     return new String("Hello World!!!");
   }
} 
```

# regex - 使用 shell 脚本从 passwd 文件中获取用户名

> ID：12256304
> 
> 赞同：2
> 
> 时间：2012-09-04T03:12:08.143
> 
> 标签：regex, perl, shell, awk

从`/etc/passwd`，我只需要“用户”部分。

例子：

```
backup:x:34:34:backup:/var/backups:/bin/sh 
```

作为`backup`用户。

要提取我现在使用的用户部分：

```
perl -pe 's/^(.*?):.*/\1/g' < /etc/passwd 
```

这比我的旧方法少了几个字符：

```
while read line; do echo ${line%%:*}; done < /etc/passwd 
```

但这听起来有点矫枉过正。有很多文字要写。

谷歌搜索给了我：

```
awk -F  ':' '{print $1}' < /etc/passwd 
```

我想哪个是等效的？是吗？

```
cmp <(perl -pe 's/^(.*?):.*/\1/g' < /etc/passwd) <(awk -F  ':' '{print $1}' < /etc/passwd) 
```

是否有标准的 UNIX 工具来执行此操作或使用 perl 的更简单的方法？或者`cut`？

我是初学者。

顺便说一句，我按如下方式尝试了 Python，但我很烂，在 Python 中可能有更好的方法来做到这一点`:(`

```
python -c 'print "\n".join([u[:u.find(":")] for u in open("/etc/passwd")])' 
```

编辑：实际上，对于 Python，可能更像这样：

```
python -c 'print "\n".join([u.split(":")[0] for u in open("/etc/passwd")])' 
```

嗯……还是很啰嗦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T03:21:44.827

Personally, I would use the awk solution. Cut works, but I often find it not quite flexible enough.

```
awk -F: '{print $1}' /etc/passwd 
```

Or, more generically, use `getent passwd`. This will query all the user DB sources configured in `/etc/nsswitch.conf`, which could be stuff like remote LDAP servers (and also `/etc/passwd`).

```
getent passwd | awk -F: '{print $1}' 
```

If you want a bash-only solution, you could do this. It's weird looking, but it doesn't invoke any external commands. Setting the inter-field separator `$IFS` tells `read` what characters to split on. The `< /etc/passwd` redirection at the end takes effect for the entire loop.

```
while IFS=: read USER _; do
    echo "$USER"
done < /etc/passwd 
```

(Setting `$IFS` this way only affects the `read` command. Generally, you can put variable assignments before any command and they'll only be in effect for that command. For example:

```
$ FOO=foo
$ echo $FOO
foo
$ FOO=bar true
$ echo $FOO
foo 
```

So no worries about messing up `$IFS`.)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T03:13:52.340

```
perl -F: -lane 'print $F[0]' < /etc/passwd 
```

或多或少地完成`awk`解决方案的作用。`-a`表示将每行输入拆分为字段，`-F:`表示`:`为字段分隔符。并且`-l`为每行输入输出一个换行符，因此您不必说`print "$F[0]\n"`.

既然您提出了要求，`cut`解决方案就更加简单：

```
cut -d: -f1 < /etc/passwd 
```

含义：拆分`:`，输出第一个字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T18:22:15.723

如果您只需要用户名，那么“id”命令就足够了，而且简单得多。

```
USER=`id -un` 
```

对于密码文件条目的其他部分，我仍然会使用上述选项之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T05:09:32.843

Perl 为您提供了一个内置函数：[getpwent](http://search.cpan.org/dist/perl/pod/perlfunc.pod#getpwent)

```
endpwent(); # reset to beginning of file in case some other code has read some entries already
while ( my ($username) = getpwent() ) { 
    print "user: $username\n";
}
endpwent(); 
```

getpwuid 和 getpwnam 可用于查找特定名称或 id；所有三个 get 函数都返回一行中所有标准字段的列表。

# javascript - IE 不支持 JQuery window.location.hash？

> ID：12256305
> 
> 赞同：0
> 
> 时间：2012-09-04T03:12:09.833
> 
> 标签：javascript, jquery, internet-explorer, hash, onchange

> **可能重复：**
> [window.location = #anchor 在 IE 中不起作用](https://stackoverflow.com/questions/1173394/window-location-anchor-doesnt-work-in-ie)

我有一个选择框，单击该框会更改基于 AJAX 的页面的 URL 中的哈希值。我有一个函数可以定期检查 window.location.hash 是否有变化，然后相应地更新内容。下面的代码是当 select 改变时改变 URL 的函数。它适用于 Firefox，但我无法让它在 IE 中运行！我不断收到一个对象不支持此属性或方法错误：

#ob 是我的选择

```
$("#ob").change(function() {
   ob = $(this).val();
   window.location.hash = "#ob=" + ob;
}); 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:24:15.970

The problem is not the hash, the error happens in the line before.
declare the variable with the var-keyword:

```
$("#ob").change(function() {
   var ob = $(this).val();
   window.location.hash = "#ob=" + ob;
}); 
```

Read the explanation here: [jQuery selector does not work in IE7/8](https://stackoverflow.com/questions/6528093/jquery-selector-does-not-work-in-ie7-8/6528291#6528291)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:26:19.107

与其滚动您自己的状态管理，不如使用一个久经考验的库来为您处理所有事情。我最喜欢的是[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)。

```
$("#ob").change(function() {
   var ob = $(this).val();
   $.bbq.pushState({ ob:ob });
}); 
```

作为一个额外的好处，BBQ 挂钩到现代浏览器的[`onhashchange`](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)事件，而不是轮询对`location.hash`.

# c - 使用互斥锁的 Pthread 同步

> ID：12256307
> 
> 赞同：0
> 
> 时间：2012-09-04T03:12:29.033
> 
> 标签：c, multithreading, pthreads, thread-synchronization

我遇到了一个关于 Pthread 的棘手问题，我无法弄清楚。我使用互斥锁来同步子线程和主线程。但是，当我将 subFinished[i] 锁定在主线程中时，它无法将其锁定并卡在那里。有时进展顺利，尤其是当我在代码中插入一些标准输出时。但大多数情况下，它会在尝试锁定 mutex subFinished[i] 时卡住。

在我同步线程的方式中是否会发生任何不可预知的事情？

明天交作业。很多谢谢！

代码如下C中。

```
#include <stdio.h>
#include <math.h>
#include <memory.h>
#include <time.h>
#include <stdlib.h>

#include <gtk/gtk.h>

#include <pthread.h>

#define MAP_SIZE 10 

#define WALL_TEMP 20
#define FIREPLACE_TEMP 100

#define MAX_THREAD_NUM 64

#define start_time clock_gettime(CLOCK_MONOTONIC, &start);
#define end_time clock_gettime(CLOCK_MONOTONIC, &finish);

pthread_barrier_t diff_barrier;

struct timespec start, finish;

const double SHRESHOLD = 1.0e-2;

GtkWidget *window;
GtkWidget *draw_area;
GdkColor temp_color;

int iter_cnt, iter_times;

int strip_height;
int row_start, row_end;

//double x[MAP_SIZE+2][MAP_SIZE+2], x_new[MAP_SIZE+2][MAP_SIZE+2];

double diff[MAX_THREAD_NUM];

int msgtag=0;

pthread_t threads[MAX_THREAD_NUM];
int start_idx[MAX_THREAD_NUM];
int end_idx[MAX_THREAD_NUM];

int thread_n;

int converged = 0;

pthread_mutex_t subThreadWakeup[MAX_THREAD_NUM];
pthread_mutex_t subFinished[MAX_THREAD_NUM];

double **x_pointer, **x_new_pointer;

double *x, *x_new;
void *thread_work(void *arg){
    int thread_id = *(int*)arg;
    int row_start = start_idx[thread_id] ;
    int row_end = end_idx[thread_id];   
    while(1){
        pthread_mutex_lock(&subThreadWakeup[thread_id]);
        printf("Thread#%d get lock %d\n", thread_id, thread_id);
        if(converged)
            break;
        int i, j;
        for(i=row_start; i<=row_end; i++){
            for(j=1; j<=MAP_SIZE;j++){
                x_new_pointer[i][j] = (x_pointer[i][j-1] + x_pointer[i][j+1] + x_pointer[i-1][j] + x_pointer[i+1][j])/4;
                diff[thread_id] += (x_new_pointer[i][j] - x_pointer[i][j]) * (x_new_pointer[i][j] - x_pointer[i][j]);
            }
        }

        printf("thread#%d finished, but not unlock subFinished[%d].\n", thread_id, thread_id);
        //printf("mutex unlock: %d\n", pthread_mutex_unlock(&subFinished[thread_id]));
//      subFinished[i] = 1;
        pthread_mutex_unlock(&subFinished[thread_id]);
        printf("thread#%d finished, already unlock subFinished[%d].\n", thread_id, thread_id);
    }
    pthread_exit(NULL);
}
#ifdef DISPLAY
static gboolean expose_event_callback(GtkWidget *widget){
    GdkGC *gc = widget->style->fg_gc[GTK_WIDGET_STATE(widget)];
    GdkDrawable *drawable = widget->window;

    int i, j;
    for(i=1; i<=MAP_SIZE; i++){
        for(j=1; j<=MAP_SIZE; j++){
            temp_color.red = (int)(x[i][j])*(0xffff)/(5*20);
            temp_color.green = temp_color.blue = temp_color.red/2;
            gdk_gc_set_rgb_fg_color(gc, &temp_color);
            gdk_draw_point(drawable, gc, j, i);
        }
    }
}
#endif

int main(int argc, char *argv[]){

    int i,j,k;
    int tids[MAX_THREAD_NUM];
    for(i=0; i<MAX_THREAD_NUM; i++)
        tids[i] = i;

    if(argc > 1)
        thread_n = atoi(argv[1]);
    else
        thread_n = 1;

    if(argc > 2)
        iter_times = atoi(argv[2]);
    else
        iter_times = 0;

    printf("%d\n", thread_n + 1);
    // Specify the start_idx and end_idx
    int remainder = MAP_SIZE % thread_n;

    for(i=0; i<thread_n; i++){
        if(i==0) start_idx[i] = 1;
        else start_idx[i] = end_idx[i-1]+1;
        end_idx[i] = start_idx[i] + MAP_SIZE/thread_n + (i<remainder) - 1;
    }

    x = malloc(sizeof(double)*(MAP_SIZE+2)*(MAP_SIZE+2));
    x_new = malloc(sizeof(double)*(MAP_SIZE+2)*(MAP_SIZE+2));
    x_pointer = malloc(sizeof(double*)*(MAP_SIZE+2));
    x_new_pointer = malloc(sizeof(double*)*(MAP_SIZE+2));

    for(i=0; i<MAP_SIZE+2; i++) x_pointer[i] = &x[i*(MAP_SIZE+2)];
    for(i=0; i<MAP_SIZE+2; i++) x_new_pointer[i] = &x_new[i*(MAP_SIZE+2)];
    // Specify x matrix
    for(j=0; j<0.3*MAP_SIZE; j++)
        x_pointer[0][j] = WALL_TEMP;
    for(j=0.7*MAP_SIZE; j<MAP_SIZE+1; j++)
        x_pointer[0][j] = WALL_TEMP;
    for(j=0.3*MAP_SIZE; j<0.7*MAP_SIZE; j++)
        x_pointer[0][j] = FIREPLACE_TEMP;

    for(j=0; j<MAP_SIZE+2; j++)
        x_pointer[MAP_SIZE+1][j]=WALL_TEMP;

    for(i=0; i<MAP_SIZE+2; i++){
        x_pointer[i][0] = WALL_TEMP;
        x_pointer[i][MAP_SIZE+1] = WALL_TEMP;
    }

    // initialize x_new the same way as x
    for(i=0; i<=MAP_SIZE+1; i++)
        for(j=0; j<=MAP_SIZE+1;j ++)
            x_new_pointer[i][j] = x_pointer[i][j];

    for(i=0; i<thread_n; i++){
        pthread_create(&threads[i], NULL, thread_work, &tids[i]);
        printf("create %d\n", tids[i]);
    }

    for(i=0; i<thread_n; i++){
        pthread_mutex_init(&subThreadWakeup[i], NULL);
        pthread_mutex_init(&subFinished[i], NULL);
        pthread_mutex_lock(&subThreadWakeup[i]);
        pthread_mutex_lock(&subFinished[i]);
    }

    double total_diff = 0;
    start_time
    do{
        iter_cnt ++;
        total_diff = 0;     
        memset(diff, 0.0, thread_n * sizeof(double));
        for(i=0; i<thread_n; i++){
            pthread_mutex_unlock(&subThreadWakeup[i]);
        }

        printf("++");
        printf("all wake up.");

        for(i=0; i<thread_n; i++){
            printf("Try get lock %d\n", i);

            pthread_mutex_lock(&subFinished[i]);

            printf("Get Lock %d\n", i);
        }
        printf("all finished.\n");
        fflush(stdout);
        double **tmp_pointer = x_pointer;
        x_pointer = x_new_pointer;
        x_new_pointer = tmp_pointer;

        for(i=0; i<thread_n; i++)
            total_diff += diff[i];
        printf("total_diff: %lf\n", total_diff);
    }while( sqrt(total_diff) >= SHRESHOLD && !(iter_cnt >= iter_times && iter_times));

    converged = 1;

    for(i=0; i<thread_n; i++)
        pthread_mutex_unlock(&subThreadWakeup[i]);

    end_time
    printf("%d %d %lf\n", thread_n, iter_cnt, finish.tv_sec-start.tv_sec + (double)(finish.tv_nsec - start.tv_nsec)/ 1000000000.0);

#ifdef DISPLAY
    gtk_init(&argc, &argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_widget_set_size_request(window, MAP_SIZE, MAP_SIZE);
    gtk_window_set_title(window, "Heat Distribution");

    draw_area = gtk_drawing_area_new();
    gtk_widget_set_size_request(draw_area, MAP_SIZE, MAP_SIZE);
    gtk_container_add(GTK_CONTAINER(window), draw_area);    

    g_signal_connect(G_OBJECT(draw_area), "expose_event", G_CALLBACK(expose_event_callback), NULL);
    g_signal_connect(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);

    gtk_widget_show_all(window);

    gtk_main();
#endif
    return 0;
} 
```

使用

```
$ gcc -O2 -o pthread_mutex pthread_mutex.c -lm -lrt -lpthread `pkg-config --cflags --libs gtk+-2.0` 
```

编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:36:38.217

哦，我犯了一个致命的错误，我把 pthread_create 放在 mutex_init 之前，这会导致不可预知的结果。

# excel - 自动对特定列中的行进行排序并跳过空白行

> ID：12256308
> 
> 赞同：0
> 
> 时间：2012-09-04T03:12:31.647
> 
> 标签：excel, vba

******这是为列 M 提供这些名称（sht1-sht9）排除的 sheetNames 的代码：：****

 **```

`Public Sub Worksheet_Activate()
Const sht1 As String = "Main-test"
Const sht2 As String = "Data-list"
Const sht3 As String = "Report"
Const sht4 As String = "EmpList"
Const sht5 As String = "emp_intface"
Const sht6 As String = "sample"
Const sht7 As String = "SSSSSS"
Const sht8 As String = "log"
Const sht9 As String = "Report2"

Range("m:m").ClearContents

Dim S As Integer
For S = 1 To Worksheets.Count
With Worksheets("Report2")
Set ws = Worksheets(S)
If ws.Visible = True And _
  (ws.Name <> sht1) And (ws.Name <> sht2) And (ws.Name <> sht3) And (ws.Name <> sht5) And _
  (ws.Name <> sht4) And (ws.Name <> sht6) And (ws.Name <> sht7) And (ws.Name <> sht8) _
  And (ws.Name <> sht9) Then

.Cells(S, 13).Value = ws.Name
End If
End With

Next
End Sub` 

* ***更多详细信息来解释我的问题：**

所以这些排除的SheetNames首先开始，然后其余的工作表在排除的工作表之后的最后一个顺序出现，所以当这段代码运行时，它会在M列中创建一些空白行；因为工作表的顺序已被排除，**那么解决方案是什么将 SHeetNames 从第 10 行或第 11 行移动到 M 列中的第一个空白行？？？`**

            回答 #1

赞同：0

时间：2012-09-04T07:48:58.017

不要使用`S`变量来增加行，否则如果`IF`条件不满足，您将得到空白。尝试这个

```
Dim S As Integer, R As Long

R = 1

For S = 1 To Worksheets.Count
    With Worksheets("Report2")
        Set ws = Worksheets(S)
        If ws.Visible = True And (ws.Name <> sht1) And (ws.Name <> sht2) _
        And (ws.Name <> sht3) And (ws.Name <> sht5) And (ws.Name <> sht4) _
        And (ws.Name <> sht6) And (ws.Name <> sht7) And (ws.Name <> sht8) _
        And (ws.Name <> sht9) Then
            .Cells(R, 13).Value = ws.Name
            R = R + 1
        End If
    End With
Next 
```

```**

# php - 如何在 php 选择菜单标签中输出数据库数据

> ID：12256313
> 
> 赞同：0
> 
> 时间：2012-09-04T03:13:47.493
> 
> 标签：php, mysql, database, html-select

我似乎无法弄清楚如何正确显示从数据库输出 mysql 数据的选择菜单。我想输出博客标题，以便用户可以根据他们在选择菜单中选择的类别将图片上传到所选博客。以下是文件：

形式：

```
<form action="" method="post" enctype="multipart/form-data">
<p>Choose a file:<br /><input type="file" name="image" /></p>
<p>
Choose an album:<br />
<select name="album_id">
    <?php 
    foreach ($albums as $album){
        echo '<option value="', $album['id'], '">', $album['name'], '</option>';
    }
    ?>
</select><br /><br />
Choose an blog:<br />
<select name="post_id">
    <?php

    foreach ($posts as $post){
        echo '<option value="', $post['id'], '">', $post['title'], '</option>';
    }
    ?>
</select>
</p>
<p><input type="submit" value="Upload" /></p>
</form> 
```

这是posts.php文件：

```
<?php

//checks if the given post id is in the table
function valid_pid($pid) {
$pid = (int)$pid;

$total = mysql_query("SELECT COUNT(`post_id`) FROM `posts` WHERE `post_id` = {$pid}");
$total = mysql_result($total, 0);

if ($total != 1) {
    return false;
}else{
    return true;
}
}

//gets a summary of all blog posts
function get_posts() {
$sql = "SELECT
            `posts`.`post_id` AS `id`,
            `posts`.`post_title` AS `title`,
            LEFT(`posts`.`post_body`, 512) AS `preview`,
            `posts`.`post_user` AS `user`,
            DATE_FORMAT(`posts`.`post_date`, '%m-%d-%Y %H:%i:%s') AS `date`,
            `comments`.`total_comments`,
            DATE_FORMAT(`comments`.`last_comment`, '%m-%d-%Y %H:%i:%s') AS `last_comment`
        FROM `posts`
        LEFT JOIN(
            SELECT
                `post_id`,
                COUNT(`comment_id`) AS `total_comments`,
                MAX(`comment_date`) AS `last_comment`
            FROM `comments`
            GROUP BY `post_id`
        ) AS `comments`
        ON `posts`.`post_id` = `comments`.`post_id`
        ORDER BY `posts`.`post_date` DESC";

$posts = mysql_query($sql);

 $rows = array();
    while (($row = mysql_fetch_assoc($posts)) !== false) {
            $rows[] = array(
                    'id'                       => $row['id'],
                    'title'                   => $row['title'],
                    'preview'             => $row['preview'],
                    'user'                   => $row['user'],
                    'date'                   => $row['date'],
                    'total_comments' => ($row['total_comments'] === null) ? 0 : $row['total_comments'],
                    'last_comment'     => ($row['last_comment'] === null) ? 'none' : $row['last_comment']
            );
}

return $rows;
}

//gets a single post from the table
function get_post($pid) {
$pid = (int)$pid;

$sql = "SELECT
            `post_title` AS `title`,
            `post_body` AS `body`,
            `post_user` AS `user`,
            `post_date` AS `date`
        FROM `posts`
        WHERE `post_id` = {$pid}";

$post = mysql_query($sql);
$post = mysql_fetch_assoc($post);

$post['comments'] = get_comments($pid);

return $post;
}

//adds a new blog entry
function add_post($name, $title, $body) {
$name = mysql_real_escape_string(htmlentities($name));
$title = mysql_real_escape_string(htmlentities($title));
$body = mysql_real_escape_string(nl2br(htmlentities($body)));

mysql_query("INSERT INTO `posts` (`post_user`, `post_title`, `post_body`, `post_date`) VALUES ('{$name}', '{$title}', '{$body}', NOW())");
}

?> 
```

谢谢你的帮助！

-TechGuy24

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:04:20.827

大家不要紧！很抱歉造成混乱..我把我的 get_posts(); = 在脚本的错误部分发帖。我不得不把它放在一个正在检查其他东西的 if 语句之上。现在完美运行！谢谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:22:57.887

```
<form action="" method="post" enctype="multipart/form-data">
<p>Choose a file:<br /><input type="file" name="image" /></p>
<p>
Choose an album:<br />
<select name="album_id">
<?php 
foreach ($albums as $album){
    echo '<option value="', $album['id'], '">', $album['name'], '</option>';
}
?>
</select><br /><br />
Choose an blog:<br />
<select name="post_id">
<?php 
$rsPost = mysql_query("YOUR QUERY");
$post=mysql_fetch_assoc("$rsPost");
do { ?>
<option value="<?php echo $post['id'];?>"><?php echo $post['title']; ?></option>
<?php } while ($post = mysql_fetch_assoc($rsPost)); ?> 
```

也许这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:04:04.010

尝试将您的`<select>`块更改为以下内容

```
<select name="album_id">
    <?php 
    foreach ($albums as $album){
        echo '<option value="'. $album['id'].'">'. $album['name'].'</option>';
    }
    ?>
</select><br /><br />
Choose an blog:<br />
<select name="post_id">
    <?php

    foreach ($posts as $post){
        echo '<option value="'. $post['id']. '">'. $post['title'].'</option>';
    }
    ?>
</select> 
```

在您`post.php`将`while()`块更改`get_posts()`为以下

```
而 ($row = mysql_fetch_assoc($posts)) {
            $行[] = 数组（
                    'id' => $row['id'],
                    'title' => $row['title'],
                    '预览' => $row['预览'],
                    '用户' => $row['用户'],
                    '日期' => $row['日期'],
                    'total_comments' => ($row['total_comments'] === null) ？0 : $row['total_comments'],
                    'last_comment' => ($row['last_comment'] === null) ？'无' : $row['last_comment']
            );
}

```

# video - 嵌入视频未显示

> ID：12256320
> 
> 赞同：1
> 
> 时间：2012-09-04T03:14:45.120
> 
> 标签：video, facebook-opengraph

我正在尝试嵌入一个 Flash 音频播放器，我已经设置了 OG 元标签，所以它们看起来很像 SoundCloud 或 YouTube 的那些。

我遇到的问题是：

*   [使用Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)时播放器**永远不会**呈现（如在共享页面的链接中，并且不会像在 YouTube 和 SoundCloud 中那样交换播放器）。`og:image`
*   仅将 URL 粘贴到 Facebook 上的“状态”框时，播放器**就会被渲染；**但是，**有时**它仅在禁用“安全浏览”时才会呈现。

我对第二个安全浏览问题的猜测是，我刚刚在尝试修复第一个问题时设法破坏了 OG 标签。

```
<meta property="fb:app_id" content="132849513527946" />
<meta property="og:type" content="video" />
<meta property="og:url" content="http://beta.mybabytales.com/memories/6780fd71d0be818657df2cbe379ffdb5" />
<meta property="og:title" content="MyBabyTales Memory: July 28, 2012" />
<meta property="og:description" content="MyBabyTales" />
<meta property="og:image" content="http://beta.mybabytales.com/video.gif" />
<meta property="og:site_name" content="MyBabyTales" />
<meta property="og:video:secure_url" content="https://beta.mybabytales.com/player/dewplayer/dewplayer-vol.swf?showtime=true&amp;autostart=true&amp;mp3=http%3A%2F%2Fapi.twilio.com%2F2010-04-01%2FAccounts%2FACd883111c969a8582d86869ee98ea326f%2FRecordings%2FRE03bc1a2935e00f7ef466a1848ac9d00b.mp3" />
<meta property="og:video" content="http://beta.mybabytales.com/player/dewplayer/dewplayer-vol.swf?showtime=true&amp;autostart=true&amp;mp3=http%3A%2F%2Fapi.twilio.com%2F2010-04-01%2FAccounts%2FACd883111c969a8582d86869ee98ea326f%2FRecordings%2FRE03bc1a2935e00f7ef466a1848ac9d00b.mp3" />
<meta property="og:video:height" content="200" />
<meta property="og:video:width" content="460" />
<meta property="og:video:type" content="application/x-shockwave-flash" /> 
```

我尝试过的事情：

*   添加/删除安全 URL
*   仅使用 HTTPS（用于主视频 url）
*   添加高度/宽度（我相信这些是可选的）
*   使用自定义 OG 类型
*   使用内置 OG 视频类型

以前有人有这个问题吗？或者我在 OG 标签中遗漏了什么明显的东西？

**更新**：在这里*发布[报告](https://developers.facebook.com/bugs/141544972656551)，如果在那里解决，将更新。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:18:19.287

我遇到了两件导致类似问题的事情。

1.  https/OG 标签配置错误。（不受信任的证书，未提供secure_url，无法解析OG标签等）
2.  crossdomain.xml 配置不正确。

[您可以使用Facebook OG 标签调试器](https://developers.facebook.com/tools/debug/og/object?q=http://beta.mybabytales.com/memories/6780fd71d0be818657df2cbe379ffdb5)来调试您的 OG 标签的任何问题。但是，看起来 https 或您的 OG 标签没有任何问题。

所以，接下来我要检查的是你的 crossdomain.xml 文件，看起来你没有设置。如果您愿意，可以阅读[Adob​​e 跨域规范文件。](http://learn.adobe.com/wiki/download/attachments/64389123/CrossDomain_PolicyFile_Specification.pdf?version=1)本质上，它为您的 Flash 文件设置跨域策略。它位于您域的根目录 (http://example.com/crossdomain.xml)。这是我们的 crossdomain.xml 文件中的内容：

```
<cross-domain-policy>
  <allow-access-from domain="*"/>
  <site-control permitted-cross-domain-policies="master-only"/>
</cross-domain-policy> 
```

此外，我在此 secure_url 文件上看到“XML 错误”：[https://beta.mybabytales.com/player/dewplayer/dewplayer-vol.swf?showtime=true&autostart=true&mp3=http://api.twilio。 com/2010-04-01/Accounts/ACd883111c969a8582d86869ee98ea326f/Recordings/RE03bc1a2935e00f7ef466a1848ac9d00b.mp3](https://beta.mybabytales.com/player/dewplayer/dewplayer-vol.swf?showtime=true&autostart=true&mp3=http://api.twilio.com/2010-04-01/Accounts/ACd883111c969a8582d86869ee98ea326f/Recordings/RE03bc1a2935e00f7ef466a1848ac9d00b.mp3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T19:47:09.897

我发现使用 facebook sharer.php 脚本最成功

[https://www.facebook.com/sharer/sharer.php?u=http://google.com](https://www.facebook.com/sharer/sharer.php?u=http://google.com)

我遇到的唯一“问题”是，如果您不断更改页面上的 og: 标签，则需要使用该 url 上的对象调试器来“重置”facebook 对您页面的缓存

# c# - 如何在毫秒内以编程方式控制 VLC 搜索？

> ID：12256321
> 
> 赞同：6
> 
> 时间：2012-09-04T03:14:45.973
> 
> 标签：c#, vlc

我正在用 C# 编写一个应用程序，它通过 VLC 的远程控制界面控制两个 VLC 实例。我需要能够尽可能地控制每个实例在流中的位置。RC 搜索命令仅在几秒钟内提供控制，因此任何几分之一秒都是不可能的。

有没有人有建议可以让我在 C# 中将搜索控制到毫秒？我查看了 C# 包装器，但没有为当前版本的 VLC 维护。如果可能的话，为了简单起见，我想继续使用 RC 界面。

# ruby-on-rails - rails：如何在本地存储和访问特定请求的数据？

> ID：12256323
> 
> 赞同：0
> 
> 时间：2012-09-04T03:14:55.727
> 
> 标签：ruby-on-rails

我想要一个在每个请求开始时初始化的本地对象。处理该请求的线程是唯一能够在请求期间访问或修改该对象的线程。在请求结束时，可以清除或销毁本地对象。是通过将一些数据附加到请求或会话来做到这一点的规范方法吗？或者，Thread.local 呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:37:53.977

您的确切要求尚不清楚。

到目前为止，听起来一个[`around_filter`](http://guides.rubyonrails.org/action_controller_overview.html#after-filters-and-around-filters)和一个实例变量就足够了。如果您没有特定的清理请求，则只需要一个`before_filter`.

# java - 如何通过 servlet 从 Applet 提交序列化对象到支持 bean，然后打开结果 JSF 页面

> ID：12256324
> 
> 赞同：1
> 
> 时间：2012-09-04T03:15:04.307
> 
> 标签：java, jsf, servlets, applet, backing-beans

我是一名应用程序程序员，正在开发我的第一个 JSF 2.0 网站，我承认我对 JSF 的了解并不多。几个月来我一直在研究文件，特别是感谢这些论坛，我还没有坚持到这一点。大部分网站已经完成并且可以正常工作，这里使用的支持 bean 在其他地方使用也没有问题。

我有一个序列化的搜索条件对象，需要通过 servlet 从小程序提交到支持 bean。支持 bean 方法然后处理搜索条件数据并将其应用于产品列表，保存在数据库中，然后在新的 JSF 页面中显示排名产品列表。

使用正确数据打开结果页面的所有尝试均失败。导航案例 "return "process_MainSearchResult";" 没有在支持 bean 中做任何事情（进一步参见支持 bean 代码和 faces-config 条目）。我尝试使用 appletContext.showDocument（见下文）从小程序打开结果页面，但新页面没有搜索条件对象传递到的支持 bean，因此没有正确的数据。

注意在小程序的setRequestMethod上设置POST是没有效果的；它总是使用服务。如果 setDoInput 和 setDoOutput 未设置为 true，并且从 servlet 向 applet 发送响应，则不会发送提交的对象，并且不会发生任何事情。我怀疑这是我问题的核心，但以任何方式更改它都会阻止序列化对象成功提交。

就目前而言，对象已成功发送到支持 bean，但新页面不会加载正确的数据（使用 applet 中的 showDocument 而不是 servlet 中的重定向）。有没有办法在新网页上设置原始支持 bean，还是我做错了？

Web 服务器是 Glassfish 3.x，IDE 是 Netbeans 7.0.1，系统是 WinXP。支持 bean 类是“ProductSelection”；servlet 类是“CriteriaServlet”。

小程序“提交搜索条件”按钮代码：

```
private void jButton8ActionPerformed(java.awt.event.ActionEvent evt)                                         
{                                             
    criteriaModel.loadCodeBase();
    int choice = JOptionPane.showConfirmDialog(this,
         "Are you sure you want to submit your search criteria and exit the \"Customise Search Criteria\" web page?",
         "Confirm Submit",
         JOptionPane.YES_NO_OPTION,
         JOptionPane.QUESTION_MESSAGE);

     if (choice == 0)
     {
         try 
         {      
             URL url;

             url = new URL(criteriaModel.getCodeBase(), "CriteriaServlet");

             System.out.println("Servlet address is: " + url);

            // Get the search criteria object. 
            Object searchSubmitObject = criteriaModel.getObjectSlideData();

            HttpURLConnection connection = (HttpURLConnection)url.openConnection();
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Content-Type","application/x-java-serialized-object");

            ObjectOutputStream out = new ObjectOutputStream(connection.getOutputStream());
            out.writeObject(searchSubmitObject);
            out.flush();
            out.close();
            out.close();

            System.out.println("Object Written");

            // If this and the corresponding servlet response code is removed
            // then the searchSubmitObject fails to be sent.
            ObjectInputStream in = new ObjectInputStream(connection.getInputStream());
            String response = (String)in.readObject();
            System.out.println(response);
            in.close();
         } 
         catch (MalformedURLException ex)
        {
            JOptionPane.showMessageDialog(jPanel8, "Submit criteria file Malformed URL."
                    + ex.toString());
            System.out.println("MalformedURLException occurred");
            Logger.getLogger(CriteriaInterfaceView.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (Exception e) 
         {
             System.out.println("Submit criteria file ERROR exception: " + e.toString());
             JOptionPane.showMessageDialog(jPanel8, "Submit criteria file ERROR exception:"
                    + e.toString());
         }
     }

    // This opens a new page but with a new backing bean with the wrong data.
    try
    {
        appletContext.showDocument(new URL(criteriaModel.getCodeBase()+"MainSearchResult.xhtml"),"_SELF");
    }
    catch (MalformedURLException ex)
    {
        Logger.getLogger(CriteriaInterfaceView.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

我尝试使用 redirect(url) 在 servlet 中重定向但没有成功：

```
@Override
public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException
{
    System.out.println("service(ServletRequest req, ServletResponse res)");

    res.setContentType("application/x-java-serialized-object");

    try
    {
        ObjectInputStream in = new ObjectInputStream(req.getInputStream());
        slideData = (MultipleSlideDataObject2)in.readObject();
        in.close();

        if(slideData != null)
        {
            System.out.println("Serial number of submitted slide series is: " + slideData.getSerialNumber());
        }

        String temp = "Criteria file Recieved";
        ObjectOutputStream outputToApplet = new ObjectOutputStream(res.getOutputStream());
        outputToApplet.writeObject(temp);
        outputToApplet.flush();          
        outputToApplet.close();
    }
    catch (ClassNotFoundException ex)
    {
        Logger.getLogger(CriteriaServlet.class.getName()).log(Level.SEVERE, null, ex);
    }

    FacesContext facesContext = FacesUtil.getFacesContext(req, res);
    // Get the backing bean.
    ProductSelection productSelection = (ProductSelection) facesContext.getApplication().evaluateExpressionGet(facesContext, "#{productSelection}", ProductSelection.class);
    productSelection.submitSearchCriteriaFile(slideData);

    // This throws an java.lang.IllegalStateException error.
    try 
    {
        FacesContext context = FacesContext.getCurrentInstance();

        ExternalContext extContext = context.getExternalContext();
        String url = extContext.encodeActionURL(context.getApplication().getViewHandler().getActionURL(context, "/MainSearchResult.xhtml"));

        extContext.redirect(url);
    } 
    catch (IOException e) 
    {
        throw new FacesException(e);
    } 
```

给出以下错误，因为我怀疑当前响应已经提交：

> 警告：StandardWrapperValve [CriteriaServlet]：PWC1406：Servlet CriteriaServlet 的 Servlet.service() 在 com.sun.faces 的 org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:522) 处抛出异常 java.lang.IllegalStateException。 context.ExternalContextImpl.redirect(ExternalContextImpl.java:572) 在 searchselection.CriteriaServlet.service(CriteriaServlet.java:217) 在 org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523) 在 org.apache.catalina .core.StandardWrapperValve.invoke(StandardWrapperValve.java:279) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188) 在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641 ) 在 com.sun 的 com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)。Enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185) at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java: 325) 在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165) 在 com.sun.grizzly 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226) .http.ProcessorTask.invokeAdapter(ProcessorTask.java:791) 在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693) 在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954 ) 在 com.sun.grizzly.DefaultProtocolChain 的 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)。executeProtocolFilter(DefaultProtocolChain.java:135) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88) 在 com.sun.grizzly.http .HttpProtocolChain.execute(HttpProtocolChain.java:76) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57) 在 com.sun。 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool. java:309) 在 java.lang.Thread.run(Thread.java:619)在 com.sun.grizzly 执行（DefaultProtocolChain.java:102）在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76) 在 com.sun.grizzly .ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:69) 在 com.sun。 grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309) at java.lang.Thread.run(Thread.java: 619)在 com.sun.grizzly 执行（DefaultProtocolChain.java:102）在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76) 在 com.sun.grizzly .ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:69) 在 com.sun。 grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309) at java.lang.Thread.run(Thread.java: 619)76) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57) 在 com.sun.grizzly.ContextTask.run(ContextTask.java :69) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309) 在 java.lang 的 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)。线程运行（线程.java：619）76) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57) 在 com.sun.grizzly.ContextTask.run(ContextTask.java :69) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309) 在 java.lang 的 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)。线程运行（线程.java：619）在 java.lang.Thread.run(Thread.java:619) 处运行(AbstractThreadPool.java:309)在 java.lang.Thread.run(Thread.java:619) 处运行(AbstractThreadPool.java:309)

返回“process_MainSearchResult”；在 backing bean 中不起作用：

```
public String submitSearchCriteriaFile(MultipleSlideDataObject2 slideData) throws IOException
{
    System.out.println("Recieved slide series with serial number: " + slideData.getSerialNumber());

    // If there is no slide data then...
    if (slideData == null)
    {
        return "process_MainSearchResultFailed";
    }
    else
    {
        rankProducts(slideData);
    }

    rowStart = 0;
    currentStartPage = 0;
    currentPageIndex = 0;
    calculateNumberPages();
    SetupPaginationValues();

    // Ignores this...
    return "process_MainSearchResult";
} 
```

Faces-config.xml 条目：

```
<navigation-rule>
    <navigation-case>
        <from-outcome>process_MainSearchResult</from-outcome>
        <to-view-id>/MainSearchResult.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

我也在支持 bean 中尝试过这个来强制重定向：

```
FacesContext context = FacesContext.getCurrentInstance();
    HttpServletResponse response = (HttpServletResponse)context.getExternalContext().getResponse();

    try
    {
        response.sendRedirect("MainSearchResult.xhtml");
        //response.redirect("http://localhost:8080/SearchEngineServer/faces/MainSearchResult.xhtml");
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    return null; 
```

还有这个在backing bean中：

```
 redirectToPage("/MainSearchResult.xhtml"); 
```

调用此方法：

```
private void redirectToPage(String toUrl) 
{
    try 
    {
        FacesContext ctx = FacesContext.getCurrentInstance();

        ExternalContext extContext = ctx.getExternalContext();
        String url = extContext.encodeActionURL(ctx.getApplication().getViewHandler().getActionURL(ctx, toUrl));

        extContext.redirect(url);
    } 
    catch (IOException e) 
    {
        throw new FacesException(e);
    }
} 
```

都给出与上面给出的 servlet 示例相同的 java.lang.IllegalStateException 错误。重定向的文档说明了这一点：

> ```
> IllegalStateException - if, in a portlet environment, the current response object is a RenderResponse instead of an ActionResponse 
> IllegalStateException - if, in a servlet environment, the current response has already been committed 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:48:33.763

重定向失败，因为您在 servlet 中执行重定向之前已经编写并提交了响应。您似乎认为您可以在一个请求上发送多个响应。这实际上是不正确的。每个 HTTP 请求只能发回一个 HTTP 响应，不能更多。从该`FacesUtil#getFacesContext()`行开始删除整个块。它不属于那里。

我不确定那个 servlet 在做什么，它似乎没有做任何有用的事情，但是您应该`AppletContext#showDocument()`在调用 servlet 之后让 applet 本身执行“重定向”。您可以以通常的方式将搜索条件（您尝试序列化的 Java 对象实例的属性）作为 GET 请求参数传递给 JSF 页面/bean，并让 JSF 通过 or 收集它并通过or`@ManagedProperty`处理`<f:viewParam>`它。`@PostConstruct``<f:event>`

例如

```
String query = "?param1=" + URLEncoder.encode(param1, "UTF-8")
             + "&param2=" + URLEncoder.encode(param2, "UTF-8")
             + "&param3=" + URLEncoder.encode(param3, "UTF-8");

getAppletContext().showDocument(new URL(getCodeBase(), "MainSearchResult.xhtml" + query), "_SELF"); 
```

与*_*

```
@ManagedBean
@RequestScoped
public class ProductSelection {

    @ManagedProperty("#{param.param1}")
    private String param1;

    @ManagedProperty("#{param.param2}")
    private String param2;

    @ManagedProperty("#{param.param3}")
    private String param3;

    @PostConstruct
    public void init() {
        // Do your business job based on the submitted request parameters.
    }

    // ...
} 
```

*或者*

```
<f:metadata>
    <f:viewParam name="param1" value="#{productSelection.param1}" />
    <f:viewParam name="param2" value="#{productSelection.param2}" />
    <f:viewParam name="param3" value="#{productSelection.param3}" />
    <f:event type="preRenderView" listener="#{productSelection.init}" />
</f:metadata> 
```

当以这种方式实现它时，我认为带有所有 Java 序列化的笨拙 servlet 步骤是完全多余的。您可以将其删除。此外，通过这种方式，您最终会得到一个很好的书签、可重用和可搜索机器人索引的页面，该页面可以独立于 applet/servlet 打开。

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)
*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:31:26.103

BalusC 的答案是少量对象数据的适当答案，但是，我提交给支持 bean 的对象是 2.2 兆字节，不适合在 URL 中编码。此外，我不希望人们将此特定页面添加为书签，因为将来可能会将更多属性添加到搜索条件文件中，这会使书签属性无效。

我使用的解决方案技术含量很低，但它确实有效。applet 将序列化的对象提交给 servlet，servlet 再将其传递给 backing bean，然后将失败或成功消息返回给 applet。如果提交成功，则小程序调用网页上的 javascript 函数来加载结果页面。这可确保保留正确的 backing bean。

最终代码如下：

小程序“提交搜索条件”按钮代码：

```
private void jButton8ActionPerformed(java.awt.event.ActionEvent evt)                                         
{                                             
    criteriaModel.loadCodeBase();
    int choice = JOptionPane.showConfirmDialog(this,
         "Are you sure you want to submit your search criteria and exit the \"Customise Search Criteria\" web page?",
         "Confirm Submit",
         JOptionPane.YES_NO_OPTION,
         JOptionPane.QUESTION_MESSAGE);

     if (choice == 0)
     {
         try 
         {      
             URL url = new URL(criteriaModel.getCodeBase(), "CriteriaServlet");

             System.out.println("Servlet address is: " + url);

            Object searchSubmitObject = criteriaModel.getObjectSlideData();

            HttpURLConnection connection = (HttpURLConnection)url.openConnection();
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Content-Type","application/x-java-serialized-object");

            ObjectOutputStream out = new ObjectOutputStream(connection.getOutputStream());
            out.writeObject(searchSubmitObject);
            out.flush();
            out.close();
            out.close();

            System.out.println("Object Written");

            ObjectInputStream in = new ObjectInputStream(connection.getInputStream());
            String response = (String)in.readObject();
            System.out.println(response);
            in.close();

            if(response.equals("Failed"))
            {
                JOptionPane.showMessageDialog(jPanel8, "Submit Search criteria file to server failed.\n Try Again later.");
            }
            else
            {
                getAppletContext().showDocument(new URL("javascript:openResultsPage()"));
            }
         } 
         catch (MalformedURLException ex)
        {
            JOptionPane.showMessageDialog(jPanel8, "Submit criteria file Malformed URL."
                    + ex.toString());
            System.out.println("MalformedURLException occurred");
            Logger.getLogger(CriteriaInterfaceView.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (Exception e) 
         {
             System.out.println("Submit criteria file ERROR exception: " + e.toString());
             JOptionPane.showMessageDialog(jPanel8, "Submit criteria file ERROR exception:"
                    + e.toString());
         }
     }         
} 
```

在小服务程序中：

```
@Override
public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException
{
    System.out.println("service(ServletRequest req, ServletResponse res)");

    res.setContentType("text/plain");

    try
    {
        ObjectInputStream in = new ObjectInputStream(req.getInputStream());
        slideData = (MultipleSlideDataObject2)in.readObject();
        in.close();

        String reply = "Failed";

        if(slideData != null)
        {
            System.out.println("Serial number of submitted slide series is: " + slideData.getSerialNumber());

            FacesContext facesContext = FacesUtil.getFacesContext(req, res);
            ProductSelection productSelection = (ProductSelection) facesContext.getApplication().evaluateExpressionGet(facesContext, "#{productSelection}", ProductSelection.class);
            productSelection.submitSearchCriteriaFile(slideData);

            reply = "Success";
        }

        ObjectOutputStream outputToApplet = new ObjectOutputStream(res.getOutputStream());
        outputToApplet.writeObject(reply);
        outputToApplet.flush();          
        outputToApplet.close();
    }
    catch (ClassNotFoundException ex)
    {
        Logger.getLogger(CriteriaServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

在支持 bean 中：

```
public String submitSearchCriteriaFile(MultipleSlideDataObject2 slideData) throws IOException
{
    System.out.println("Recieved slide series with serial number: " + slideData.getSerialNumber());

    // If there is no slide data then...
    if (slideData == null)
    {
        return "process_MainSearchResultFailed";
    }
    else
    {
        rankProducts(slideData);
    }

    return "process_MainSearchResult";
} 
```

在 JSF 页面的标题中，其中包含小程序：

```
<SCRIPT language="javascript">

    function openResultsPage()
    {
        window.location = "MainSearchResult.xhtml";
    }

    </SCRIPT> 
```

FacesUtil 基于 BalusC 的 FacesUtil 类（对请求和响应类型的一些小改动）用于获取 servlet 中的支持 bean：

```
 package searchselection;

import javax.faces.FactoryFinder;
import javax.faces.component.UIViewRoot;
import javax.faces.context.FacesContext;
import javax.faces.context.FacesContextFactory;
import javax.faces.lifecycle.Lifecycle;
import javax.faces.lifecycle.LifecycleFactory;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;

public class FacesUtil
{
    // Getters -----------------------------------------------------------------------------------

    public static FacesContext getFacesContext(
        ServletRequest request, ServletResponse response)
    {
        // Get current FacesContext.
        FacesContext facesContext = FacesContext.getCurrentInstance();

        // Check current FacesContext.
        if (facesContext == null) {

            // Create new Lifecycle.
            LifecycleFactory lifecycleFactory = (LifecycleFactory)
                FactoryFinder.getFactory(FactoryFinder.LIFECYCLE_FACTORY); 
            Lifecycle lifecycle = lifecycleFactory.getLifecycle(LifecycleFactory.DEFAULT_LIFECYCLE);

            // Create new FacesContext.
            FacesContextFactory contextFactory  = (FacesContextFactory)
                FactoryFinder.getFactory(FactoryFinder.FACES_CONTEXT_FACTORY);
            facesContext = contextFactory.getFacesContext(
                request.getServletContext(), request, response, lifecycle);

            // Create new View.
            UIViewRoot view = facesContext.getApplication().getViewHandler().createView(
                facesContext, "");
            facesContext.setViewRoot(view);                

            // Set current FacesContext.
            FacesContextWrapper.setCurrentInstance(facesContext);
        }

        return facesContext;
    }

    // Helpers -----------------------------------------------------------------------------------

    // Wrap the protected FacesContext.setCurrentInstance() in a inner class.
    private static abstract class FacesContextWrapper extends FacesContext {
        protected static void setCurrentInstance(FacesContext facesContext) {
            FacesContext.setCurrentInstance(facesContext);
        }
    } 

} 
```

# xml - 具有强制元素和任意顺序的 xml xsd 复杂类型

> ID：12256333
> 
> 赞同：0
> 
> 时间：2012-09-04T03:16:16.127
> 
> 标签：xml, xsd

我正在尝试编写一个包含强制元素但顺序任意的复杂类型模式。我的复杂类型如下所示：

```
 <xs:choice minOccurs="0" maxOccurs="1">
      <xs:element name="link" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
      <xs:element name="Plan" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
    </xs:choice> 
```

如果我只输入两个元素之一，则 xml 文件将是有效的（虽然它不应该是有效的）：

```
<link>123<link/> 
```

或者

```
<Plan>222<Plan/> 
```

是有效的，而我只希望以下内容有效：

```
<link>123<link/>
<Plan>222<Plan/> 
```

或者

```
 <Plan>222<Plan/>
 <link>123<link/> 
```

你能帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:51:23.437

如果每个元素最多出现一次，请使用 xs:all：

```
 <xs:all>
   <xs:element name="link" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
   <xs:element name="Plan" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
 </xs:all> 
```

在 XSD 1.1 中，当元素可以重复时，这也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:50:20.153

```
 <xs:choice minOccurs="0" maxOccurs="1">
        <xs:sequence>
            <xs:element name="link" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
            <xs:element name="Plan" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
        <xs:sequence>               
            <xs:element name="Plan" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
            <xs:element name="link" type="xs:unsignedInt" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
        </xs:choice> 
```

可以解决问题，但如果这只是伪示例代码，请尝试使用`<xs:group>`和`<xs:choice>`

# javascript - Ajax 与 jQuery 同步。是否可以？

> ID：12256335
> 
> 赞同：1
> 
> 时间：2012-09-04T03:16:50.553
> 
> 标签：javascript, jquery, ajax

我在 ajax.php 页面中放了一个 sleep(5)。我需要返回的代码来启动另一个功能组。它也使用ajax。我的第一个 ajax 调用如下所示：

```
$.ajax({
  url: '/ajax.php',
  data: {
    id : code
  } ,           
  type: 'POST',
  async:false, //<<< here
  cache: false,
  beforeSend: function(){
      $('#loading').dialog();
  },
  success: function(data){                 
      console.log(data.result);           
      $('#loading').dialog('close'); 
      initAnotherFunctionGrop(data.result);
  },
  error: function(){
      $('#loading').dialog('close');
  }
}); 
```

为什么我无法在 IE 和 Chrome 中显示加载消息？只有 Firefox 正在使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:49:31.133

异步代码是最好的。同步代码可能会挂起您的浏览器，这对于 ajax 来说是个坏主意，其中 ajax 请求的速度取决于用户计算机和浏览器之外的因素。你不希望用户机器挂起，所以避免它。而是尝试这样的事情。

```
 function a(passedData){
      return $.ajax({ 
          url : '/ajax.php',
          data : passedData
      });
 }

 function b(passedData){
      return $.ajax({ 
          url : '/ajaxB.php',
          data : passedData
      });
 }

 $.when(a(data),b(data)).then(function(successDataForA,successDataForB){
     //Do code after all asynchronous ajax calls are done.
     //As a whole this is still asynchronous so other things can still run
 },function(failA,failB){
     //This fail callback is not necessary but here it is if needed
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:02:22.827

用这个

```
 $(document).ready(function () {

        $('#ajaxloading').hide()  // hide it initially
             .ajaxStart(function () {
                 $(this).show();
             })
             .ajaxStop(function () {
                 $(this).hide();
             });
    }); 
```

这里的“ajaxloading”是你想要显示或隐藏的DIV的ID。你可以在这个div里面放任何内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:37:37.777

如果您的加载图像是 gif 图像，则很难在 IE 和 chrome 中显示它，因为这些浏览器在同步调用时会停止对 DOM 组件的任何更改，并且一旦执行代码，它就会显示所有更改。您可以通过在加载图像后放置一个警告框来测试它。

```
$('#loading').dialog();
alert('loading image'); 
```

一旦弹出警报，您现在可以看到在 IE 和 chrome 中加载图像作为警报停止线程执行，直到用户给出响应。

阅读此链接： [[https://stackoverflow.com/questions/11946828/loading-gif-image-is-not-showing-in-ie-and-chrome]](https://stackoverflow.com/questions/11946828/loading-gif-image-is-not-showing-in-ie-and-chrome)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:31:12.170

我在过去让 IE 在 Ajax 调用期间显示“正在加载...”消息时遇到过问题，即使是*异步*调用（我当然建议你使用），其中相同的代码在 FF 中*确实*有效.

使用 IE 对我有用的解决方法（并且在 FF 中没有伤害）是做这样的事情：

```
$('#loading').dialog();
setTimeout(function() {
    $.ajax(...);
},1); 
```

也就是说，显示“正在加载”消息，然后通过使用推迟 Ajax 调用`setTimeout()`- 这使浏览器有时间在当前 JS 完成后但在超时开始之前重绘页面。

但是，当然，如果您正在执行*同步*请求，您可能有其他代码要在`$.ajax()`使用其结果的方法之后运行，因此您需要将所有这些移动到您传递给的函数中`setTimeout()`（或从那里调用它， 反正）。

# jquery - 最大宽度和横幅尺寸

> ID：12256336
> 
> 赞同：0
> 
> 时间：2012-09-04T03:16:59.750
> 
> 标签：jquery, html, css

我正在开发的网站存在真正的问题。我让它工作，然后被迫修改样式 - 现在我无法将它恢复到我需要的状态。

该网站的链接在这里：

[http://pegasus.qa.hairylemon.co.nz/](http://pegasus.qa.hairylemon.co.nz/)

我的问题是自行车横幅。它们的宽度为 1200 像素。该站点的其余部分为 960 像素宽。这是一个深思熟虑的设计，我必须实现这一点。

问题是，客户端不希望水平滚动条出现，直到浏览器宽度低于 960 像素。目前，滚动条在不到 1200 像素处启动。

我的解决方案涉及最大宽度 - 我记得 - 但我无法让它工作。有人可以帮忙吗？

这是一个 Joomla 网站 - 所以我必须使用横幅插件。我正在使用 jQuery 循环插件来浏览横幅模块输出的各种横幅。每个横幅模块都是一个自定义的 HTML 代码块 - 将图像设置为背景图像，以便我们可以缩小浏览器。

将回答任何需要的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:21:17.937

如果您使用`width: 100%; max-width: 1200px; min-width: 960px`，您可以将图像的宽度限制在您指定的范围内。不要为 指定任何内容，`height`图像的纵横比将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:40:00.400

`max-width: 1200px; min-width: 960px;`在你的情况下。

这继续`homeBanner1`下去`homeBanner2``homeBanner3`

# mp3 - mp3 到 gsm 的星号

> ID：12256340
> 
> 赞同：2
> 
> 时间：2012-09-04T03:17:31.487
> 
> 标签：mp3, converter, asterisk, gsm

在我们的应用程序中，我们允许用户上传音频文件。目前我们支持 . **wav**格式，我们使用“ **sox** ”将 .wav 文件转换为 gsm 的星号。我们也希望有**mp3**支持。关于如何完成这项工作的任何建议？

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:50:54.617

当然，您仍然可以使用`sox`将 mp3 转换为 gsm/sln/alaw/ulaw 格式的文件

查看[http://sox.sourceforge.net/soxformat.html](http://sox.sourceforge.net/soxformat.html)有关格式 sox 支持的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:41:25.230

这里有很多关于星号文件转换的信息。

[http://www.voip-info.org/wiki/view/Asterisk+sound+files](http://www.voip-info.org/wiki/view/Asterisk+sound+files)

当然你可以使用星号（如果它编译时支持 mp3）

```
asterisk -rx "file convert filename.mp3 filename.gsm" 
```

如果您想使用 sox 进行转换，您可以使用 libmad 支持重新编译 sox。这是脚本：

```
cd /usr/src/

wget -c "http://downloads.sourceforge.net/mad/libmad-0.15.1b.tar.gz?modtime=1076976000&big_mirror=0"
wget -c 'http://downloads.sourceforge.net/mad/libid3tag-0.15.1b.tar.gz?modtime=1076976000&big_mirror=0'
wget -c "http://sourceforge.net/projects/sox/files/sox/14.3.2/sox-14.3.2.tar.gz/download"
wget -c http://downloads.sourceforge.net/project/lame/lame/3.98.4/lame-3.98.4.tar.gz
wget -c "http://downloads.sourceforge.net/mad/madplay-0.15.2b.tar.gz?modtime=1077580800&big_mirror=0"
CPU=4

for i in libid3tag libmad madplay lame sox 
do
cd /usr/src/
tar -xzf $i-*.gz

cd /usr/src/$i*
./configure;
make -j $CPU
make install
done;
echo /usr/local/lib/ >>/etc/ld.so.conf
ldconfig
sox
ln -s /usr/local/bin/sox /usr/bin/sox 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T18:26:26.400

我使用了 NCH Software 的一款名为“switch”的软件，它可以很好地用于 GSM 转换和 Elastix PBX。唯一的问题是在 Elastix GUI 上的上传在系统记录上不起作用，所以我不得不使用 SCP aka SFTP over SSH 上传。

[http://www.nch.com.au/switch/](http://www.nch.com.au/switch/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-22T17:35:28.477

解决方案1：-

本地主机*CLI>`help file convert`

用法：file convert 从file_in 转换为file_out。如果没有给出绝对路径，将使用默认的 Asterisk 声音目录。

例子： `file convert tt-monkeys.gsm tt-monkeys.ulaw`

解决方案 2：- 有一些在线工具可以为您工作。 [https://convertio.co/](https://convertio.co/) 它可以将您的文件转换为近 20 种格式。例如 gsm、wav、cdma、wma 等。

# validation - addValidator 如何与 Zend Form 一起工作？

> ID：12256348
> 
> 赞同：1
> 
> 时间：2012-09-04T03:18:53.487
> 
> 标签：validation, zend-form

我认为 $form->addVlidator 函数可以作为一些前端表单检查的东西，但是当我添加它时，即使输入无效，似乎表单仍在提交中。

或者我错了，它更像是控制器端检查，这意味着表单将提交数据，然后服务器端返回错误消息？

我的代码是这样工作的。

表格类：

```
<?php
class Application_Form_Test extends Zend_Form

{
    public function init()
    {

        $this->setName('stdForm');
        //$this->setMethod('post');
        //$this->addDecorator('HtmlTag', array('tag' => 'div', 'class' => 'my-lovely-form'));
        $this->setAttrib('enctype', 'multipart/form-data');

        $this->setAction('somewhere')
             ->setMethod('post');

        $username = $this->createElement('text', 'name', array('label' => 'Username:'));
        $username->addValidator('alnum')
                 ->addValidator('regex', false, array('/^[a-z]+/'))
                 ->addValidator('stringLength', false, array(9, 20, 'messages'=>'Cannot be more than 9 chars'))
                 ->setRequired(true)
                 ->addFilter('StringToLower');

        $email = $this->createElement('text', 'email', array('label' => 'E-mail'));
        $email->addValidator('StringLength', false, array(8))
                 ->setRequired(true);

        $password = $this->createElement('password', 'pass1', array('label' => 'Password'));
        $password->addValidator('StringLength', false, array(6))
                 ->setRequired(true);

         $password2 = $this->createElement('password', 'pass2', array('label' => 'Repeat password'));
         $password2->addValidator('StringLength', false, array(6))
                 ->setRequired(true);

         $message = $this->createElement('textarea', 'message', array('label' => 'Message'));
         $message->addValidator('StringLength', false, array(6))
                 ->setRequired(true)
                 ->setAttrib('COLS', '40')
                 ->setAttrib('ROWS', '4');

            $captcha = new Zend_Form_Element_Captcha('foo', array(
                'label' => "human?",
                'captcha' => 'Figlet',
                'captchaOptions' => array(
                    'captcha' => 'Figlet',
                    'wordLen' => 6,
                    'timeout' => 300,
                ),
            ));

        // Add elements to form:
        $this->addElement($username)
             ->addElement($email)   
             ->addElement($password)
             ->addElement($password2)
             ->addElement($message)
             ->addElement($captcha)
             // use addElement() as a factory to create 'Login' button:
             ->addElement('submit', 'send', array('label' => 'Form sender'));

    }
} 
```

控制器代码：

```
 public function aboutAction()
{
    $this ->_helper->layout->disableLayout(); 

    $form = new Application_Form_Test();

    $this->view->testForm = $form;        
} 
```

查看文件：

```
 <?php echo  $this->testForm;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:04:01.490

第二个：“表单将提交数据，然后服务器端返回错误消息”。为了做到这一点，你必须调用`$form->isValid($this->_request->getPost())`你的行动。

如果它无效，那么您需要将数据发送回用户：

```
$form->populate($this->_request->getPost());
$this->view->form = $form; 
```

对于客户端验证，您可以使用[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# lua - 如何通过 Blizaard API 获取项目中的拼写信息？

> ID：12256350
> 
> 赞同：1
> 
> 时间：2012-09-04T03:18:53.833
> 
> 标签：lua, world-of-warcraft

我可以通过 item api 获得一个节点“itemSpells”。但是，如果我想获取详细信息，我该如何获取呢？就像：“itemSpells”：[

```
 {
        "spellId": 109848,
        "spell": 
        {
            "id": 109848,
            "name": "Item - Dragon Soul - Proc - Int Spirit Mace 1H LFR",
            "icon": "spell_holy_avenginewrath",
            "description": ""
        },
        "nCharges": 0,
        "consumable": false,
        "categoryId": 0,
        "trigger": "ON_EQUIP"
    }], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:07:55.357

[http://www.wowpedia.org/World_of_Warcraft_API#Spell_Fu​​nctions](http://www.wowpedia.org/World_of_Warcraft_API#Spell_Functions)

您在寻找 GetSpellInfo() 吗？

# android - 三星 Galaxy S3 中的位图问题

> ID：12256351
> 
> 赞同：1
> 
> 时间：2012-09-04T03:19:08.780
> 
> 标签：android

我写了一个方法来改变相机拍摄的位图：

```
public Bitmap bitmapChange(Bitmap bm) {
    /* get original image size */
    int w = bm.getWidth();
    int h = bm.getHeight();

    /* check the image's orientation */
    float scale = w / h;

    if(scale < 1) { 

        /* if the orientation is portrait then scaled and show on the screen*/
        float scaleWidth = (float) 90 / (float) w;
        float scaleHeight = (float) 130 / (float) h;
        Matrix mtx = new Matrix();
        mtx.postScale(scaleWidth, scaleHeight);
        Bitmap rotatedBMP = Bitmap.createBitmap(bm, 0, 0, w, h, mtx, true);
        return rotatedBMP;

    } else {

        /* if the orientation is landscape then rotate 90 */
        float scaleWidth = (float) 130 / (float) w;
        float scaleHeight = (float) 90 / (float) h;
        Matrix mtx = new Matrix();
        mtx.postScale(scaleWidth, scaleHeight);
        mtx.postRotate(90);
        Bitmap rotatedBMP = Bitmap.createBitmap(bm, 0, 0, w, h, mtx, true);
        return rotatedBMP;
    }
} 
```

它在其他 Android 设备（甚至 Galaxy Nexus）中运行良好，但在三星 Galaxy S3 中，缩放后的图像不会显示在屏幕上。

我试图标记该`bitmapChange`方法，让它在屏幕上显示原始大小的位图，但 S3 在屏幕上也没有显示任何内容。

eclipse中的变量信息在[这里](https://dl.dropbox.com/u/90416799/s3_bitmap_info.png)。索尼 xperia 的信息在[这里](http://ppt.cc/w03U)。

xperia 和其他设备工作正常。

编辑：

我在 LogCat 中有一些奇怪的日志，

当我拍照时，LogCat 会显示一些消息：

[这里](https://dl.dropbox.com/u/90416799/log.png)

我从来不用视频...

为什么视频开始了？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T07:00:53.013

我四处寻找，似乎可能有两个可能的原因：

1) S3 有内存问题。看看[这个 SO Question](https://stackoverflow.com/questions/12170805/galaxy-s-3-memory-problems) S3 即使在缩放图像时也会出现问题！

**解决方案**- 解决方案是使位图转换对*内存更友好*，如此处所示并在[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)[SO 问题中讨论](https://stackoverflow.com/questions/10999204/android-gridview-crashes-on-galaxy-3)

* * *

2）三星手机设置EXIF方向标签，而不是旋转单个像素

**解决方案**- 看看[这个 SO question](https://stackoverflow.com/questions/11023696/setrotation90-to-take-picture-in-portrait-mode-does-not-work-on-samsung-device)

# soap - 如何在 Go 中进行 SOAP 调用？

> ID：12256353
> 
> 赞同：14
> 
> 时间：2012-09-04T03:19:10.760
> 
> 标签：soap, go, google-ads-api

鉴于 Adwords 是 Google 的东西，而 Go 是 Google 的东西，多久之后会有一个用 Go 编写的 Adwords API 版本？

与这个问题相关的另一个问题是：还有 Go 的 SOAP 库吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-04T07:28:50.053

我无法回答有关 adwords API 的问题，因为我没有看到公司的任何公告，并且很难从外部预测发布之前的时间。

所以我会回答你的第二个问题。

我不知道 Go 中的任何 SOAP 库（[go-lang.cat-v.org](http://go-lang.cat-v.org/)似乎没有引用一个），但与大多数语言一样，处理简单 SOAP 消息的一种方法是使用基本的[http](http://golang.org/pkg/net/http/)和[xml](http://golang.org/pkg/encoding/xml/)图书馆。

两个重要的操作是

1) 通过执行 POST 查询得到答案：

```
resp, err := httpClient.Post(query, "text/xml; charset=utf-8", someXMLasBytes) 
```

2）使用 a[`xml.NewDecoder`](http://golang.org/pkg/encoding/xml/#NewDecoder)将其解码为所需的结构：

```
parser := xml.NewDecoder(bytes.NewBufferString(in)) 
err = parser.DecodeElement(&envelope, nil) 
```

这是在 Go 中完成的 SOAP 查询的完整和注释示例（[从此简化](https://github.com/Canop/Chrall/blob/master/go/src/chrallserver/mhsoapclient.go)）：

```
package main   

import (
    "bytes"
    "encoding/xml"
    "fmt"
    "io"
    "io/ioutil"
    "net/http"
    "strings"
)

// The URL of the SOAP server
const MH_SOAP_URL = "http://sp.mountyhall.com/SP_WebService.php"

// this is just the message I'll send for interrogation, with placeholders
//  for my parameters
const SOAP_VUE_QUERY_FORMAT = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:tns=\"urn:SP_WebService\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" ><SOAP-ENV:Body><mns:Vue xmlns:mns=\"uri:mhSp\" SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"><numero xsi:type=\"xsd:string\">%d</numero><mdp xsi:type=\"xsd:string\">%s</mdp></mns:Vue></SOAP-ENV:Body></SOAP-ENV:Envelope>"

// Here I define Go structures, almost identical to the structure of the
// XML message we'll fetch
// Note that annotations (the string "return>item") allow to have a slightly
//  different structure or different namings

type SoapItem struct {
    Numero    int
    Nom       string
    Type      string
    PositionX int
    PositionY int
    PositionN int
    Monde     int
}
type SoapVue struct {
    Items []SoapItem "return>item" 
}
type SoapFault struct {
    Faultstring string
    Detail      string
}
type SoapBody struct {
    Fault          SoapFault
    ProfilResponse SoapProfil
    VueResponse    SoapVue
}
type SoapEnvelope struct {
    XMLName xml.Name
    Body    SoapBody
}

// Here is the function querying the SOAP server
// It returns the whole answer as a Go structure (a SoapEnvelope)
// You could also return an error in a second returned parameter
func GetSoapEnvelope(query string, numero int, mdp string) (envelope *SoapEnvelope) {
    soapRequestContent := fmt.Sprintf(query, numero, mdp)
    httpClient := new(http.Client)
    resp, err := httpClient.Post(MH_SOAP_URL, "text/xml; charset=utf-8", bytes.NewBufferString(soapRequestContent)) 
    if err != nil {
        // handle error
    }
    b, e := ioutil.ReadAll(resp.Body) // probably not efficient, done because the stream isn't always a pure XML stream and I have to fix things (not shown here)
    if e != nil {
        // handle error
    }
    in := string(b)
    parser := xml.NewDecoder(bytes.NewBufferString(in))
    envelope = new(SoapEnvelope) // this allocates the structure in which we'll decode the XML
    err = parser.DecodeElement(&envelope, nil)
    if err != nil {
        // handle error
    }
    resp.Body.Close()
    return
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:45:13.007

[Google APIs for Go](http://code.google.com/p/google-api-go-client/)正在进行中。

# spring - SPRING MVC 与 CAS 集成

> ID：12256354
> 
> 赞同：0
> 
> 时间：2012-09-04T03:19:13.890
> 
> 标签：spring, spring-mvc, integration, cas

任何人都可以与我分享 CAS 客户端和 CAS 服务器的工作示例项目。正如我一直在寻找工作示例但尚未清楚地找到任何此类捆绑示例。请帮助我理解流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:54:16.700

您是否仔细查看过文档？CAS wiki 有很多信息。

*   [https://wiki.jasig.org/display/CASC/CAS+Client+for+Java+3.1](https://wiki.jasig.org/display/CASC/CAS+Client+for+Java+3.1)

*   [https://wiki.jasig.org/display/CASUM/Home](https://wiki.jasig.org/display/CASUM/Home)（左侧菜单中有很多操作方法）

如果您打算使用 Spring-security，那么文档中也有关于 CAS 的部分

*   [http://static.springsource.org/spring-security/site/docs/3.0.7.RELEASE/reference/cas.html](http://static.springsource.org/spring-security/site/docs/3.0.7.RELEASE/reference/cas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T18:25:26.090

您可以从 Github 链接下方克隆 Spring 安全示例。

[https://github.com/SpringSource/spring-security](https://github.com/SpringSource/spring-security)

运行 CAS 示例（包括服务器和客户端，您可以参考 samples/cas/ 中的代码）

$./gradlew cas

运行该示例后，您将对流程有所了解。

# javascript - 选择显示区域图片示例代码

> ID：12256355
> 
> 赞同：0
> 
> 时间：2012-09-04T03:19:14.513
> 
> 标签：javascript, jquery

试图提出一个更好的问题

有很多不同宽度和高度的图像，我想要做的是将这些图像调整到一定大小并在作物区域上商店图像以使每个图像都具有相同的大小。

有没有办法存档这个。

* * *

这个网站是通过 jquery 在这里选择显示图像区域的示例，但我找不到如何执行此操作的示例代码。什么是仅在 javascript 上显示选定图像区域的示例代码。

[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

![在此处输入图像描述](../Images/f1608076e81393a4c3bbe2a6715e8cd9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:24:26.310

我使用类似的库[JCrop](http://deepliquid.com/content/Jcrop.html)。

您将在[此处](http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail)找到创建缩略图的示例（带有源代码）。

这是非常简单的事情：

```
// enable jcrop
$(function(){

    $('#jcrop_target').Jcrop({
        onChange: showPreview, // call thumbnail generator
        onSelect: showPreview, // call thumbnail generator
        aspectRatio: 1
    });

});

// make thumbnail
function showPreview(coords)
{
    var rx = 100 / coords.w;
    var ry = 100 / coords.h;

    $('#preview').css({
        width: Math.round(rx * 500) + 'px',
        height: Math.round(ry * 370) + 'px',
        marginLeft: '-' + Math.round(rx * coords.x) + 'px',
        marginTop: '-' + Math.round(ry * coords.y) + 'px'
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:29:01.133

从页面的来源，通过右键单击（在 chrome 中）并选择“检查元素”获得：

```
function preview(img, selection) {
    if (!selection.width || !selection.height)
        return;
    var scaleX = 100 / selection.width;
    var scaleY = 100 / selection.height;
    $('#preview img').css({
        width: Math.round(scaleX * 300),
        height: Math.round(scaleY * 300),
        marginLeft: -Math.round(scaleX * selection.x1),
        marginTop: -Math.round(scaleY * selection.y1)
    });
    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);
}$(function () {
    $('#photo').imgAreaSelect({
        aspectRatio: '1:1',
        handles: true,
        fadeSpeed: 200,
        onSelectChange: preview
    });
}); 
```

使用以下html：

```
<div class="container demo">
  <div style="float: left; width: 50%;">
    <p class="instructions">
      Click and drag on the image to select an area. 
    </p>

    <div class="frame" style="margin: 0 0.3em; width: 300px; height: 300px;">
      <img id="photo" src="flower2.jpg">
    </div>
  </div>

  <div style="float: left; width: 50%;">
    <p style="font-size: 110%; font-weight: bold; padding-left: 0.1em;">
      Selection Preview
    </p>

    <div class="frame" style="margin: 0 1em; width: 100px; height: 100px;">
      <div id="preview" style="width: 100px; height: 100px; overflow: hidden;">
        <img src="flower2.jpg" style="width: 100px; height: 100px;">
      </div>
    </div>

    <table style="margin-top: 1em;">
      <thead>
        <tr>
          <th colspan="2" style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
            Coordinates
          </th>
          <th colspan="2" style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
            Dimensions
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="width: 10%;"><b>X<sub>1</sub>:</b></td>
              <td style="width: 30%;"><input type="text" id="x1" value="-"></td>
              <td style="width: 20%;"><b>Width:</b></td>
            <td><input type="text" value="-" id="w"></td>
        </tr>
        <tr>
          <td><b>Y<sub>1</sub>:</b></td>
          <td><input type="text" id="y1" value="-"></td>
          <td><b>Height:</b></td>
          <td><input type="text" id="h" value="-"></td>
        </tr>
        <tr>
          <td><b>X<sub>2</sub>:</b></td>
          <td><input type="text" id="x2" value="-"></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td><b>Y<sub>2</sub>:</b></td>
          <td><input type="text" id="y2" value="-"></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:00:56.170

这是 imageareaselect 库的完整箱或示例。请找到如下演示链接：

**演示：** [http ://codebins.com/bin/4ldqp7t](http://codebins.com/bin/4ldqp7t)

**HTML**

```
<div id="demo">
  <div class="leftside">
    <p class="instructions">
      Click and drag on the image to select an area. 
    </p>
    <div  class="frame leftframe">
      <img src="http://img.izismile.com//img/img4/20111126/200/heart_meltingly_adorable_animal_photography_200_11.jpg" id="photo">
    </div>
  </div>
  <div class="rightside">
    <div class="frame rightframe">
      <div class="previewframe" id="preview">
        <img style="width: 100px; height: 100px;" src="http://img.izismile.com//img/img4/20111126/200/heart_meltingly_adorable_animal_photography_200_11.jpg" />
      </div>
    </div>
    <table class="imginfo">
      <tr>
        <th colspan="2">
          Coordinates
        </th>
        <th colspan="2">
          Dimensions
        </th>
      </tr>
      <tr>
        <td>
          X1:
        </td>
        <td>
          <input type="text" value="-" id="x1" />
        </td>
        <td>
          Width:
        </td>
        <td>
          <input type="text" value="-" id="w" />
        </td>
      </tr>
      <tr>
        <td>
          Y1:
        </td>
        <td>
          <input type="text" value="-" id="y1" />

        </td>
        <td>
          Height:
        </td>
        <td>
          <input type="text" value="-" id="h" />

        </td>
      </tr>
      <tr>
        <td>
          X2:
        </td>
        <td>
          <input type="text" value="-" id="x2" />

        </td>
        <td colspan="2">
          &nbsp;
        </td>
      </tr>
      <tr>
        <td>
          Y2:
        </td>
        <td>
          <input type="text" value="-" id="y2" />

        </td>
        <td colspan="2">
          &nbsp;
        </td>
      </tr>
    </table>
  </div>
</div> 
```

**jQuery**

```
function preview(img, selection) {
    if (!selection.width || !selection.height) return;
    var scaleX = 100 / selection.width;
    var scaleY = 100 / selection.height;
    $('#preview img').css({
        width: Math.round(scaleX * 200),
        height: Math.round(scaleY * 200),
        marginLeft: -Math.round(scaleX * selection.x1),
        marginTop: -Math.round(scaleY * selection.y1)
    });
    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);
}
$(function() {
    $('#photo').imgAreaSelect({
        aspectRatio: '1:1',
        handles: true,
        fadeSpeed: 200,
        onSelectChange: preview
    });

}); 
```

**CSS**

```
#demo{
  background: none repeat scroll 0 0 #EEEEEE;
  border: 2px solid #999;
  border-radius: 4px 4px 4px 4px;
  padding: 0.6em;
  float: left;
  width:90%;
}
.leftside{
  float: left;
  width:50%;
}
.rightside{
  float: left;
  margin-top:11%;
  width:40%;
}
#demo p.instructions {
  color: #666666;
  font-family: serif;
  font-style: italic;
  line-height: 130%;
  font-size:13px;
}
div.frame {
  background: none repeat scroll 0 0 #FFFFFF;
  border: 2px solid #DDDDDD;
  padding: 0.8em;
}
.leftframe{
  margin: 0 0.3em;

  width: 200px;

  height: 200px;
}
.rightframe{
  margin: 0 1em;

  width: 100px;

  height: 100px;
  http://codebins.com/#
}
.previewframe{
  width: 100px;

  height: 100px;

  overflow: hidden;
}
.crop{
  margin-left:20%;
  margin-top:1%;
}
.imginfo{
  font-size:13px;
  width:100%;
}
.imginfo input[type=text]{
  width:80px;
  text-align:right;
  border:1px solid #666;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7t](http://codebins.com/bin/4ldqp7t)

# perl - perl如何返回搜索结果

> ID：12256357
> 
> 赞同：0
> 
> 时间：2012-09-04T03:19:33.000
> 
> 标签：perl

我想写一个脚本，只要遇到正则表达式就可以返回结果。我猜我在编写正则表达式时遇到了一些困难。

我的输入文件的内容如下：

```
 Number a123;
     Number b456789 vit;
 alphabet fty; 
```

我希望它会返回 a123 和 b456789 的结果，这是“Number”之后和之前（“\s”或“;”）的字符串。我尝试过使用下面的 cmd 行：

```
 my @result=grep /Number/,@input_file;
 print "@results\n"; 
```

我得到的结果如下所示：

```
 Number a123;
     Number b456789 vit; 
```

Weareas 预期结果应如下所示：

```
a123
b456789 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:46:25.193

Perls`grep`函数从列表中选择/过滤符合特定条件的所有元素。`/Number/`在您的情况下，您从`@input_file`数组中选择了与正则表达式匹配的所有元素。

`Number`要在使用此正则表达式后选择非空白字符串：

```
my $regex = qr{
  Number     # Match the literal string 'Number'
  \s+        # match any number of whitespace characters
  ([^\s;]+)  # Capture the following non-spaces-or-semicolons into $1
             # using a negated character class
}x;          # use /x modifier to allow whitespaces in pattern
             # for better formatting 
```

我的建议是直接循环输入文件句柄：

```
while(defined(my $line = <$input>)) {
  $line =~ /$regex/;
  print "Found: $1" if length $1; # skip if nothing was found
} 
```

如果必须使用数组，`foreach`最好使用 -loop：

```
foreach my $line (@input_lines) {
  $line =~ /$regex/;
  print "Found: $1" if length $1; # skip if nothing was found
} 
```

如果您不想直接打印匹配项，而是将它们存储在数组中，`push`则将值放入循环内的数组中（两者都有效）或使用`map`函数。map 函数将每个输入元素替换为指定操作的值：

```
my @result = map {/$regex/; length $1 ? $1 : ()} @input_file; 
```

或者

```
my @result = map {/$regex/; length $1 ? $1 : ()} <$input>; 
```

在`map`块内，我们将正则表达式与当前数组元素进行匹配。如果我们有一个匹配，我们返回`$1`，否则我们返回一个*空列表*。这会变得不可见，因此我们不会在`@result`. 这是不同的形式返回`undef`，什么会在你的数组中创建一个 undef 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T03:44:35.663

如果您的脚本旨在作为一个简单的过滤器，您可以使用

```
$ cat FILE | perl -nle 'print $1 if /Number\s+([^\s;]+)/' 
```

或者

```
$ cat FILE | perl -nle 'for (/Number\s+([^\s;]+)/g) { print }' 
```

如果在同一行上可以多次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:03:17.403

```
perl -lne 'if(/Number/){s/.*\s([a-zA-Z])([\d]+).*$/\1\2/g;print}' your_file 
```

测试如下：

```
> cat temp
Number a123;
 Number b456789 vit;
 alphabet fty;

> perl -lne 'if(/Number/){s/.*\s([a-zA-Z])([\d]+).*$/\1\2/g;print}' temp
a123
b456789
> 
```

# excel - Keep data in the cell when formula is invalid in Excel 2010

> ID：12256363
> 
> 赞同：1
> 
> 时间：2012-09-04T03:19:43.000
> 
> 标签：excel, vba, excel-2007, excel-formula, excel-2010

I have the following custom formula in Excel file named Excel_Sample.xls:

```
GetData = Workbooks("data.xls").Worksheets("sht").Range("E1") 
```

When the data.xls is open, open the Excel_Sample.xls, and the cell using this formula(say A1) could get the value of Cell E1 in data.xls.

However, close data.xls then:

Open Excel_Sample.xls In Excel 2003, the data in A1 is still there even if the formula of GetData isn't valid (cause the data.xls is closed.).

Open Excel_Sample.xls In Excel 2010, the data in A1 become #VALUE! cause the formula runs again and can get the data in data.xls.

What can I do to keep the data in Excel 2010 even the formula is invalid, just like 2003?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:56:03.593

> 打开 Excel_Sample.xls 在 Excel 2003 中，即使 GetData 的公式无效（因为 data.xls 已关闭），A1 中的数据仍然存在。

当计算设置为手动时会发生这种情况。做这个

1.  在具有公式的工作簿中将计算设置为自动，如果它还不是自动的。您可以在“公式”选项卡下执行此操作 | 计算选项
2.  打开两个工作簿。让公式自行更新。
3.  将计算更改为手动
4.  关闭从中获取值的工作簿，您就完成了。

高温高压

# android - 打开/读取文档驱动 API

> ID：12256364
> 
> 赞同：1
> 
> 时间：2012-09-04T03:19:55.973
> 
> 标签：android, google-drive-api

我目前正在制作一个可以通过 android 读取和可能编辑文档文件的应用程序。files.list API 已经可以使用，所以我可以从任何谷歌帐户读取驱动器内容。问题是如何打开所有这些文件？

是否有任何 API 可以读取文件内容，还是我应该先下载文件，然后在手机中使用相应的应用程序打开它？实际上哪种方式更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:35:42.717

是的，您可以使用 API 下载文件。请参阅该[`files.get`方法](https://developers.google.com/drive/v2/reference/permissions/get)的示例。

# mysql - Counting Products ordered more than once

> ID：12256365
> 
> 赞同：2
> 
> 时间：2012-09-04T03:20:05.830
> 
> 标签：mysql

I need to get the count of a product that was ordered more than once and ordered only once by customers. I may be looking at this the wrong way, please forgive me if the sql looks stupid or something.

```
SELECT ActualOrder.Sku,
COUNT(DISTINCT Email) AS UniqueCustomer,
COUNT(DISTINCT OrderNumber) AS NumOrders,
COUNT(Reordered.Sku) AS NumReordered,
COUNT(OrderedOnce.Sku) AS NumOrderedOnce
FROM ActualOrder
LEFT JOIN (SELECT Sku FROM ActualOrder GROUP BY Email HAVING COUNT(DISTINCT OrderNumber) > 1) AS Reordered ON ActualOrder.Sku = Reordered.Sku
LEFT JOIN (SELECT Sku FROM ActualOrder GROUP BY Email HAVING COUNT(DISTINCT OrderNumber) = 1) AS OrderedOnce ON ActualOrder.Sku = OrderedOnce.Sku
GROUP BY ActualOrder.Sku 
```

* * *

From John Woo's idea of getting the count from the subquery, I came up with this code, which actually does work, but a bit nested. Maybe you guys can help me make this more efficient or at least shorter. Thanks again for all the help!

```
SELECT ActualOrder.Sku,
COUNT(DISTINCT Email) AS UniqueCustomer,
COUNT(DISTINCT OrderNumber) AS NumOrders,
NumReordered,
NumOrderedOnce
FROM ActualOrder
LEFT JOIN (SELECT Sku, SUM(IF(NumCustomerOrders>1,1,0)) AS NumReordered, SUM(IF(NumCustomerOrders=1,1,0)) AS NumOrderedOnce
    FROM (SELECT Sku, Email, COUNT(DISTINCT OrderNumber) AS NumCustomerOrders
        FROM ActualOrder GROUP BY Sku, Email)
    AS Orders GROUP BY Sku) AS OrderCount ON ActualOrder.Sku = OrderCount.Sku
GROUP BY ActualOrder.Sku 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:21:13.770

you can count the total number of orders on the `subquery`

```
SELECT  ActualOrder.Sku,
        Reordered.NumReordered,
        OrderedOnce.NumOrderedOnce
        COUNT(DISTINCT Email) AS UniqueCustomer,
        COUNT(DISTINCT OrderNumber) AS NumOrders
FROM ActualOrder
        LEFT JOIN 
        (
            SELECT Sku, COUNT(*) NumReordered
            FROM ActualOrder 
            GROUP BY Email 
            HAVING COUNT(*) > 1
        ) AS Reordered ON ActualOrder.Sku = Reordered.Sku
        LEFT JOIN 
        (
            SELECT Sku, COUNT(*) NumOrderedOnce
            FROM ActualOrder 
            GROUP BY Email 
            HAVING COUNT(*) = 1
        ) AS OrderedOnce ON ActualOrder.Sku = OrderedOnce.Sku
GROUP BY    ActualOrder.Sku,
            Reordered.NumReordered,
            OrderedOnce.NumOrderedOnce 
```

# sql-server - 多维数据集项目因权限而无法运行

> ID：12256367
> 
> 赞同：2
> 
> 时间：2012-09-04T03:20:13.883
> 
> 标签：sql-server, olap, cube, olap-cube

我正在使用 MS SQL Server 2012（Server Data Tools - Visual Studio 2010 Shell）进行“多维项目”。我无法运行（调试）它。

如果数据源的模拟信息设置为“使用服务帐号”，则会出现此错误：

> 错误 2 内部错误：操作未成功终止。0 0
> 
> 错误 3 OLE DB 错误：OLE DB 或 ODBC 错误：用户 'NT Service\MSSQLServerOLAPService' 登录失败。；28000\. 0 0
> 
> 错误 4 高级关系引擎中的错误。无法与 DataSourceID 为“Data Warehouse”、名称为“Data Warehouse”的数据源建立连接。0 0
> 
> 错误 5 OLAP 存储引擎中的错误：在处理 ID 为“项目”、名称为“项目”的维度时发生错误。0 0
> 
> 错误 6 OLAP 存储引擎中的错误：处理来自“Warehouse_MultidimensionalProject_Cube”数据库的“Items”维度的“Id”属性时发生错误。0 0
> 错误 7 服务器：当前操作被取消，因为事务中的另一个操作失败。0 0

我猜这个帐户没有权限，但是（1）我什至不能添加这个帐户（它似乎不存在）和（2）它怎么可能没有内置的权限？

当我将模拟设置为“使用当前用户的凭据”（顺便说一句，这是数据源的所有者）时，会发生另一个错误：

> 错误 2 内部错误：操作未成功终止。0 0
> 
> 错误 3 数据源“数据仓库”包含处理操作不支持的 ImpersonationMode。0 0
> 
> 错误 4 高级关系引擎中的错误。无法与 DataSourceID 为“Data Warehouse”、名称为“Data Warehouse”的数据源建立连接。0 0
> 
> 错误 5 OLAP 存储引擎中的错误：在处理 ID 为“项目”、名称为“项目”的维度时发生错误。0 0
> 
> 错误 6 OLAP 存储引擎中的错误：处理来自“Warehouse_MultidimensionalProject_Cube”数据库的“Items”维度的“Id”属性时发生错误。0 0
> 
> 错误 7 服务器：当前操作已取消，因为事务中的另一个操作失败。0 0

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:31:43.740

密码不能设置为空白，SQL Server 才能正常工作……奇怪的细节。:-)

# c++ - How to change srand() at runtime

> ID：12256371
> 
> 赞同：0
> 
> 时间：2012-09-04T03:20:52.753
> 
> 标签：c++, runtime, srand, random-seed

I'm using `srand(`) with a fixed seed and I need to run tests with a set of different seeds like 100, 200, 300, ..., 1000 all in one execution. Is this possible? The thing is `srand()` is defined at the beginning of main, so I don't know how to control the seed with a variable.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:10:11.597

您可以使用 srand(time(NULL))，并包含 time.h 标头。它使用当前系统时间初始化 srand()。希望能帮助到你。！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:29:52.657

如果单元测试测试使用 rand() 的代码，那么您应该调用`srand(<const>)`作为测试设置的一部分。

这样，测试的行为方式与作为套件的一部分独立运行的天气相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:10:39.973

对于在调用 srand 时使用的每个不同的种子值，可以预期伪随机数生成器在随后调用 rand 时生成不同的连续结果。具有相同种子的两个不同初始化指示伪随机生成器在两种情况下为随后对 rand 的调用生成相同的连续结果。

这可能说明：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main ()
{
  printf ("First number: %d\n", rand() % 100);
  srand ( time(NULL) );

  printf ("Random number: %d\n", rand() % 100);
  srand ( 1 );

  printf ("Again the first number: %d\n", rand() %100);
  srand ( time(NULL) );

  printf ("Random number: %d\n", rand() % 100);

  printf ("Random number: %d\n", rand() % 100);

  printf ("Random number: %d\n", rand() % 100);

  printf ("Random number: %d\n", rand() % 100);

  return 0;
} 
```

输出：

```
First number: 41
Random number: 76
Again the first number: 41
Random number: 76
Random number: 14
Random number: 74
Random number: 41
Press any key to continue 
```

# php - 如何将列值添加到 SQL LIKE 查询？

> ID：12256380
> 
> 赞同：1
> 
> 时间：2012-09-04T03:21:47.173
> 
> 标签：php, mysql, sql

我正在尝试使用 MySQL 执行以下查询：

```
SELECT e.event, 
       BINARY e.params as params, 
       UNIX_TIMESTAMP(e.datetime) AS datetime, 
       p.postid AS postid,
       q.postid AS parentid 
FROM qa_eventlog as e 
         LEFT JOIN qa_posts as p 
         LEFT JOIN qa_posts as q ON e.userid=1 AND 
              DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= datetime AND 
              e.params LIKE '%postid='+p.postid+'%' AND 
              e.params LIKE '%parentid='+q.postid+'%' 
ORDER BY datetime DESC 
```

但它给出了以下错误：

> 错误 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '+p.postid+'%' AND e.params LIKE '%parentid='+q.postid+'%' ORDER BY datetime DESC' 附近使用正确的语法

它似乎不喜欢这个`+`标志，我认为这是在查询中添加值的正确方法；猜不:) 我如何要求它检查一个表（整数）的列值是否在另一个表（字符串）的列值中？

编辑：感谢您的回答，这是有效的代码，使用`CONCAT`：

```
SELECT e.event, 
    BINARY e.params as params, 
    UNIX_TIMESTAMP(e.datetime) AS datetime,
    p.postid AS postid, 
    q.postid AS parentid 
FROM qa_eventlog AS e 
    LEFT JOIN qa_posts AS p 
        ON e.params LIKE CONCAT('%postid=', p.postid, '%' ) 
    LEFT JOIN qa_posts AS q 
        ON e.params LIKE CONCAT('%postid=', q.postid, '%' ) 
WHERE e.userid=1 
    AND DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= datetime 
ORDER BY datetime DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T03:26:30.503

试试这个，

```
SELECT e.event, 
       e.params as params, 
       UNIX_TIMESTAMP(e.datetime) AS datetime, 
       p.postid AS postid,
       q.postid AS parentid 
FROM qa_eventlog as e 
         LEFT JOIN qa_posts as p 
             ON e.id = p.id        -- not sure on this. please supply
                                   -- the correct linking columnID
         LEFT JOIN qa_posts as q 
             ON e.id = q.id        -- and this
WHERE  (DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= datetime) AND 
       e.params LIKE CONCAT('%', 'postid=', p.postid, '%' )  AND 
       e.params LIKE CONCAT('%', 'parentid=', q.postid, '%' )  AND
       e.userid = 1
ORDER BY datetime DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:27:16.060

请参阅 MySQL 文档`CONCAT()`：[http ://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_concat)

比如：

```
SELECT e.event, 
       BINARY e.params as params, 
       UNIX_TIMESTAMP(e.datetime) AS datetime, 
       p.postid AS postid,
       q.postid AS parentid 
FROM qa_eventlog as e 
         LEFT JOIN qa_posts as p 
         LEFT JOIN qa_posts as q ON e.userid=1 AND 
              DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= datetime AND 
              e.params LIKE CONCAT('%postid=',p.postid,'%') AND 
              e.params LIKE CONCAT('%parentid=',q.postid,'%')
ORDER BY datetime DESC 
```

# javascript - Youtube iframe api 未触发 onYouTubeIframeAPIReady

> ID：12256382
> 
> 赞同：41
> 
> 时间：2012-09-04T03:21:52.377
> 
> 标签：javascript, jquery, iframe, youtube, youtube-api

我已经与 youtube iframe api 斗争了很长一段时间了。不知何故，该方法`onYouTubeIframeAPIReady`并不总是被触发。

从症状来看，似乎是加载问题。检查器中没有显示错误。

这是我的代码：

## HTML

```
<div id="player"></div>
          <script>
            videoId = 'someVideoId';
            var tag = document.createElement('script');
            tag.src = "//www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
          </script> 
```

## JS

（在页面末尾调用。我尝试将代码放在上面的脚本之后，结果是一样的。）

```
var isReady = false
  , player
  , poster
  , video;

$(function () {
$('.js-play').click(function (e) {
    e.preventDefault();
    interval = setInterval(videoLoaded, 100);
  });
});
function onYouTubeIframeAPIReady() {
  console.log(videoId)
  player = new YT.Player('player', {
    height: '445',
    width: '810',
    videoId: videoId,
    events: {
      'onReady': onPlayerReady//,
      //'onStateChange': onPlayerStateChange
    }
  });
}

function onPlayerReady(event) {
  isReady = true;
  console.log("youtube says play")
}

function videoLoaded (){
  if (isReady) {
      console.log("ready and play")
      poster.hide();
      video.show();

      $('body').trigger('fluidvideos');

      player.playVideo();
      clearInterval(interval);
  } 
} 
```

问题是有时什么都没有被打印出来`console.log`，什么也没有发生。

在手机上，这种情况一直在发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-13T01:05:57.620

这不是超时问题，您不需要手动触发此功能。

确保您的`onYouTubeIframeAPIReady`函数在全局级别可用，而不是嵌套（隐藏）在另一个函数中。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-05-22T20:50:47.670

您始终可以将其附加到窗口对象以确保它被全局调用。如果您的代码使用 amd，这将很有帮助。

```
window.onYouTubeIframeAPIReady = function() {} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-10-01T13:46:30.430

如果您必须放入函数内部，一种可能的解决方案是：

```
function onYouTubeIframeAPIReady() {
  // func body...
} 
```

你可以这样声明：

```
window.onYouTubeIframeAPIReady = function() {
  // func body...
} 
```

在这种情况下，请确保在声明之后将特定脚本插入到 dom 中（`insertBefore()`在您的情况下，调用现在在全局范围内的内容）：

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-13T06:29:47.873

如果您按如下方式异步加载 IFrame Player API 代码：

```
<script>
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script> 
```

而且您还加载了这样的脚本代码：

```
<script src="http://www.youtube.com/player_api"></script> 
```

那么函数`onYouTubeIframeAPIReady`将不会被调用，因为相同的代码被加载了两次（当 api 完全加载时，函数只被调用一次）。

因此，根据您的需要仅使用其中一种方式。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-16T22:52:50.033

重新审视这个之后，我在使用 webpack （或者我假设任何其他 commongJS 模块系统）时为我找到了一个可行的解决方案，或者如果你发现 youtube api 在你自己的 JS 文件之前准备好，则使用间隔 - 直到 youtube 提供一些承诺回调的形式：

```
var checkYT = setInterval(function () {
    if(YT.loaded){
        //...setup video here using YT.Player()

        clearInterval(checkYT);
    }
}, 100); 
```

就我而言，这似乎是最防错的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-01T17:52:33.643

确保您通过在网络上实际提供页面来测试页面，而不仅仅是在本地加载。[YouTube iFrame API 行为不一致/不确定](https://stackoverflow.com/questions/19732363/youtube-iframe-api-behavior-is-inconsistent-nondeterministic)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-26T14:18:52.177

实际上，我这样做是为了延迟加载 youtube 播放器。对我来说似乎是防弹的。

```
window.videoApiLoaded = [];
window.videoApiLoaded.youtube = false;

function loadYoutubeVideo(videoId) {

    window.onYouTubeIframeAPIReady = function() { document.dispatchEvent(new CustomEvent('onYouTubeIframeAPIReady', {})) };

    if(window.videoApiLoaded.youtube == false) {
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        window.videoApiLoaded.youtube = true;
    }

    var player;

    document.addEventListener('onYouTubeIframeAPIReady', function (e) {
        player = new YT.Player('player', {
          height: '400',
          width: '600',
          videoId: videoId,
          events: {
            'onStateChange': onYtStateChange
          }
        });

    }, false);

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-21T16:02:51.300

我遇到了类似的问题，在我的情况下，onYouTubeIframeAPIReady 的调用速度非常快，以至于实际的实现还没有准备好进行正确的调用。因此，在 youtube player_api 调用之后，我添加了一个带有 var 的简单实现，用于验证 onYouTubeIframeAPIReady，就像这样：

```
<script src="http://www.youtube.com/player_api"></script>
<script>
var playerReady = false
window.onYouTubeIframeAPIReady = function() { //simple implementation
    playerReady = true;
}
</script>
</header>
.
.
.
<body>
<script>
window.onYouTubeIframeAPIReady = function() { //real and fully implemented
    var player; // ... and so on ...
}
if(playerReady) { onYouTubeIframeAPIReady(); console.log("force to call again") }
</script> 
```

* * *

## 回答 #9

> 赞同：-7
> 
> 时间：2013-02-07T04:01:46.483

在几乎所有情况下，我都能在页面加载时使用简单的 setTimeout 来完成这项工作。不理想，我知道，但这只是大多数时候解决问题的另一种检查。

```
setTimeout(function(){
    if (typeof(player) == 'undefined'){
        onYouTubeIframeAPIReady();
    }
}, 3000) 
```

# ruby-on-rails-3.2 - Dynamically create query a search request based on params in Ruby on Rails

> ID：12256383
> 
> 赞同：2
> 
> 时间：2012-09-04T03:21:55.737
> 
> 标签：ruby-on-rails-3.2

Here are some request to a search page I have

```
/articles?tag=tag1&author=author1
/articles?title=title1&tag=tag1
/articles?title=title1&tag=tag1&author=author1
/articles?tag=tag1
/articles?title=title1&tag=tag1&author=author1&size=medium&is_deprecated=false&has_fotos=true 
```

Well, what is the most efficient way to make a request to `Article` model depending on a query? I wouldn't like to do something like this

```
@articles = Article.all
@articles = Article.find_by_tag(params[:tag]) if params[:tag]
@articles = Article.where("title like ?", params[:title]) if params[:title]
@articles = Article.find_by_author(params[:author]) if params[:author]
@articles = Article.find_by_is_deprecated(params[:is_deprecated]) if params[:is_deprecated]
#...etc 
```

Your thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:13:11.150

无需每次都执行 sql 查询...使用 ruby​​ 方式。您可以使用以下方法..

```
@articles = Article.all

@articles.select!{ |article| article.tag==params[:tag] } if params[:tag].present?

@articles.select!{ |article| article.title==params[:title]} if params[:title].present?

@articles.select!{ |article| article.author==params[:author]} if params[:author].present?

@articles.select!{ |article| article.is_deprecated==params[:is_deprecated]} if params[:is_deprecated].present? 
```

# asp.net - 数据集计数行

> ID：12256384
> 
> 赞同：1
> 
> 时间：2012-09-04T03:22:17.827
> 
> 标签：asp.net, vb.net, count, dataset, row

我想获取 的行数`DataSet`，但这里的代码抛出异常

```
Dim con As New SqlConnection("server=localhost;database=MSDSS;Integrated Security=True")
Dim i As Integer
con.Open()
Dim qstr As String = "Select * From SJournal"
Dim sqladp As New SqlDataAdapter(qstr, con)
Dim dt As New DataSet

sqladp.Fill(dt, "SJ")
Dim j As Integer = dt.Tables("SJ").Rows.Count
For i = 0 To j Step 1
    Dim rowname As String = dt.Tables("SJ").Rows(i)("JournalName")
Next 
```

这是我计算字符串相似度的方法

```
Dim Kq As Double = 2
Dim Kr As Double = 1
Dim Ks As Double = 1
Dim ss() As Char = rowname.ToCharArray()
Dim st() As Char = journalname.ToCharArray()
Dim q As Integer = ss.Intersect(st).Count()
Dim s As Integer = ss.Length - q
Dim r As Integer = st.Length - q
Dim total As Double = (Kq * q) / (Kq * q + Kr * r + Ks * s) 
```

请给我解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:48:42.617

`Datatable`像数组一样工作（在某种程度上，当你在 for 上使用它时），数组的索引编号从 0 到 N- 1

考虑到 N 是行数，你应该修改这个

```
Dim j As Integer = dt.Tables("SJ").Rows.Count 
```

到

```
Dim j As Integer = dt.Tables("SJ").Rows.Count -1 
```

因此，如果得到 3 `rows`，for 循环将从 0 变为 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:27:40.530

我希望你的 for 循环

```
For i = 0 To j Step 1
    Dim rowname As String = dt.Tables("SJ").Rows(i)("JournalName")
Next 
```

应该有 j-1 作为上限，即。

```
For i = 0 To j-1 Step 1
    Dim rowname As String = dt.Tables("SJ").Rows(i)("JournalName")
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:13:14.580

如果您使用数据适配器，则无需显式打开连接。

更多参考请访问： [http ://forums.asp.net/t/1663393.aspx/1](http://forums.asp.net/t/1663393.aspx/1)

# php - PHP和ASP之间的主要区别是什么

> ID：12256385
> 
> 赞同：-4
> 
> 时间：2012-09-04T03:22:37.837
> 
> 标签：php, asp.net, css

我有一份基于 CSS 的自由职业，这很简单，但如果我是一名 PHP 开发人员并且这是我将从事的 ASP 网站，我只需要知道是否存在任何重大问题。在我对这项工作做任何事情之前，我应该研究任何网站吗？

我拿 ASP 仍然有课 css 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:25:08.990

主要区别是什么？

[ASP.Net](http://www.asp.net/)是一个框架

[PHP](http://www.php.net/)是一门语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:25:33.080

两者都是服务器端，并且都输出相同类型的最终结果。由于 CSS 仅适用于最终结果，因此就您而言应该没问题。

# ipython - ipython octavemagic

> ID：12256390
> 
> 赞同：3
> 
> 时间：2012-09-04T03:23:16.487
> 
> 标签：ipython, octave, oct2py

I'm on ubuntu with python 2.7

according to the [documentation](http://ipython.org/ipython-doc/stable/config/extensions/octavemagic.html) I should be able to get octave running from ipython:

```
%install_ext octavemagic
%load_ext octavemagic

('The file must have a .py or .zip extension', u'octavemagic') 
```

If I try:

```
%install_ext bash.py
IOError                                   Traceback (most recent call last)
<ipython-input-5-36b60e02c7c6> in <module>()
----> 1 get_ipython().magic(u'install_ext bash.py') 
```

Complete trace [here](http://www.pasteall.org/34916)

`%lsmagic` gives a lot of magics and i tried `%%timeit arange(1000)` and it worked fine.

Finally, I tested the magic at the ipython commandline, as opposed to notebook; `%octave x = [1,2;3,4]` worked just fine.

**I'd really like to get octave running from ipython notebook. Any ideas of where to investigate?**

octavemagic.py is in `<myinstall_directory>/IPython/extensions/octavemagic.py` as are the others i tried that failed. My steps: according to [http://ipython.org/ipython-doc/stable/config/extensions/octavemagic.html](http://ipython.org/ipython-doc/stable/config/extensions/octavemagic.html)

1.  $ easy_install oct2py (no problem)

2.  $ easy_install h5py
    `h5py/api_compat.h:21:18: fatal error: hdf5.h: No such file or directory` (I do have it in a couple of places (octave and another 3rd party lib. Found others who said that h5py is broken wrt hdf5.h, so I tried a full lib-dev install)

    $sudo apt-get libhdf5-serial-dev $sudo easy_install h5py Installed /usr/local/lib/python2.7/dist-packages/h5py-2.0.1-py2.7-linux-x86_64.egg Processing dependencies for h5py Finished processing dependencies for h5py

3.  Discovered I had a thin (notebook only?) version of ipython, so I installed the source from git and build it. Yes. I built it. 8)

4.  `sudo easy_install nose pexpect irunner and ipython-dev`
5.  launch notebook with `ipython notebook -pylab inline` Notebook starts and things work, except for the %magic octavemagic. Also doesn't work for %magic bash or several others in

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:54:43.370

非常正确，octavemagic 与标准 octave 安装捆绑在一起，所以只需要

> %load_ext 八度魔法

我的 ipython 命令行和笔记本必须相同，因为唯一的区别是：

```
> ipython
vs
> ipython notebook --pylab inline 
```

我重新启动笔记本并再次尝试。现在 %load_ext octavemagic 工作。也许我之前只是被与错误地[尝试安装](http://www.pasteall.org/34982)相关的错误弄糊涂了， 如果 octave 给出类似“已经安装”的消息而不是链接中的回溯错误，那就太好了。

# image - 从 Google 地球的屏幕截图中将图像导入 MATLAB

> ID：12256391
> 
> 赞同：0
> 
> 时间：2012-09-04T03:23:33.470
> 
> 标签：image, matlab

在 MATLAB 中：

我正在应用屏幕截图来生成美国的图像

谷歌地球。但是，当我将图像读入 MATLAB 进行绘图时

它上面的数据图像变成全白——没有红色、绿色或蓝色。

注意：它确实显示正确而无需绘制任何其他数据

并使用 imshow。

我的代码是：

```
I = double(imread('USA.png'));
img = flipdim(I,1)
B = IMPRESIZE(img,[500,500],'nearest')
colormap HSV;
hold on;
....Plot Data.... 
```

有没有办法导入图像并在其上绘制散点数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:04:47.837

我相信你的问题来自将你的形象塑造成一个替身。

当您的图像为 uint8 格式时，MATLAB 使用 0-255 作为色标范围。当您的图像为双精度格式时，MATLAB 使用 0-1 作为色标范围。因此，当您将图像转换为双倍时，MATLAB 使用后一个范围，这意味着 R、G 或 B 值大于 1 的任何颜色都会变为 1 用于显示目的（例如，基本上所有像素都显示为白色)

简而言之，将您的第一行代码更改为 (no cast)

```
I = imread('USA.png'); 
```

或者，如果您必须将图像转换为双精度图像，则可以使用以下函数根据数据范围自动缩放色阶

```
imagesc(img) 
```

# c# - 如何使用 C# 比较数据库中的日期？

> ID：12256407
> 
> 赞同：0
> 
> 时间：2012-09-04T03:25:52.440
> 
> 标签：c#, sql-server-2008

我想比较从数据库中选择的日期（EndDate 中的每个条目）并将它们与今天的日期进行比较。有没有办法以编程方式做到这一点？就像提取日期并单独比较它们？我需要这个，因为我需要更新表格的状态。

```
string username;
username = HttpContext.Current.User.Identity.Name;
string date = DateTime.Now.ToString("MM/dd/yyyy");
txtDate.Text = date;

SqlConnection conn1 = 
    new SqlConnection("Data Source=mydatasource\\sqlexpress;" 
                     + "Initial Catalog = Suite2; Integrated Security =SSPI");
SqlDataAdapter adapter;
string end;
end = "SELECT EndDate FROM Table_Message WHERE username = '" + username + "'";
adapter = new SqlDataAdapter(end, conn1);
conn1.Open();
DataSet ds = new DataSet();
adapter.Fill(ds);
//Execute the sql command
GridView2.DataSource = ds;
GridView2.DataBind();
conn1.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:46:13.740

```
 end = "UPDATE Table_Message SET message_status=CASE WHEN EndDate>GETDATE() then 'Expired' WHEN StartDate<GETDATE() then 'Pending' else 'Ongoing' END WHERE username = '" + username + "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:43:07.453

我只会修改 SQL 查询以在那里进行比较，而不是在代码中。

用这个替换你的 SQL。

```
end = "SELECT EndDate, " +
      "case when EndDate >= CURRENT_TIMESTAMP then 'Expired' " +
      "when StartDate <= CURRENT_TIMESTAMP then 'Pending' " +
      "else 'NotExpired' " +
      "end " +
      "as MessageStatus " +
      "FROM Table_Message WHERE username = '" + username + "'"; 
```

这应该返回两列。EndDate 之一，另一个是今天之前还是之后。

编辑

我意识到您要更新数据库中的表，而不仅仅是返回它。在这种情况下，您将需要执行 sql 语句来更新相应的列，然后选择它们。例如

```
 SqlCommand updateDatabase = new SqlCommand();
 updateDatabase.CommandText = "update dbo.Table_Message set Message_Status = case when EndDate >= CURRENT_TIMESTAMP then 'Expired' when StartDate <= CURRENT_TIMESTAMP then 'Pending' else 'NotExpired'";
 updateDatabase.ExecuteNonQuery(); 
```

然后，您可以直接从原始查询 sql 字符串中选择状态

```
end = "SELECT EndDate, Message_Status " +
      "FROM Table_Message WHERE username = '" + username + "'"; 
```

话说回来。我强烈建议您不要这样做。您不应该更新/存储数据库中当前状态之类的内容。每次在您的情况下进行更新时，您都将执行非常昂贵的数据库操作。不仅如此，列的含义每秒钟、每毫秒都在变化。什么是“过期”消息实际上取决于您检查的日期。此类数据不应存储在数据库中。您应该每次都解释哪些消息已过期或哪些未过期。您可以在 C# 代码中执行此操作，也可以像我最初建议的那样作为 SQL 查询的一部分。您的数据库中不应有一列其值可能每秒都在更改。这是我的看法。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:32:16.953

首先，您需要从数据库中获取日期。

```
DateTime dat1 = DateTime.Parse(2003-12-30); 
DateTime dat2 = DateTime.Parse(2004-12-30); 

TimeSpan spanTime=(dat1-dat2); 
```

您可以`SpanTime`用于比较，例如`spanTime.Days`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T03:37:19.760

**我的意见**

首先如果全部。您打算在客户端还是服务器端使用此代码。您也可以使用 datediff 函数比较 sql server 查询上的日期。这样，如果服务器和客户端时钟不同步并且您计划在客户端上进行，您将获得准确的比较

# wpf - 在 WPF 中遍历控制树

> ID：12256415
> 
> 赞同：0
> 
> 时间：2012-09-04T03:26:40.143
> 
> 标签：wpf, wpf-controls

给定以下 XAML：

```
<ListView Name="UnitProperties" Grid.Column="2">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Property">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Label Content="{Binding Path=Name}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Value">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Path=Value}" LostFocus="TextBox_LostFocus_1" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

当 TextBox 失去焦点时，我想获取第一列中标签的值。我如何通过代码做到这一点？文本框的 Parent 属性为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:20:28.950

在您的 TextBox_LostFocus 处理程序中，您可以像这样获取 Name 属性的值 -

```
var dataContext = (sender as TextBox).DataContext;
string labelContent = dataContext.Name; 
```

# asp.net-mvc - 收音机没有被选中，如何设置“选中”？

> ID：12256418
> 
> 赞同：1
> 
> 时间：2012-09-04T03:27:13.357
> 
> 标签：asp.net-mvc, knockout.js

初始化时应该选择我的一个收音机（首先加载然后用户可以更改选择），但是第一次没有选择收音机，如何适当地初始化“已选择”？

**这里单选“二”应该选为“已选”是真的吗？**

```
@using (Html.BeginForm("Index", "Two", FormMethod.Post, new Dictionary<string, object> { { "data-bind", "submit:onSubmit" } }))
{

<table>
    <tr>
        <td>
            <div data-bind="foreach: items">
                <input type="radio" name="items" data-bind="attr: { value: id }, checked: $root.selected" />
                <span data-bind="text: name"></span>
            </div>
            <div data-bind="text: selected">
            </div>
        </td>
    </tr>
</table>

<input type="submit" name="send" value="Send" />
}

<script type="text/javascript">
var viewModel = {
    items: [
    { "id": 1, "name": "one", "selected": false  },
    { "id": 2, "name": "two", "selected": true },
    { "id": 3, "name": "three", "selected": false }
],
selected: ko.observable(),

    onSubmit: function(){

        var x = this.selected();

        }
    };

$(function() {
        ko.applyBindings(viewModel);
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:41:52.510

您需要将顶级`selected`observable设置`id`为`true`.

就像是：

```
$(function() {
    var selected = ko.utils.arrayFirst(viewModel.items, function(item) {
        return item.selected; 
    });

    if (selected) {
       viewModel.selected(selected.id);   
    }

    ko.applyBindings(viewModel);
}); 
```

示例：http: [//jsfiddle.net/rniemeyer/rbsZC/](http://jsfiddle.net/rniemeyer/rbsZC/)

# c++ - 默认模板函数参数

> ID：12256420
> 
> 赞同：2
> 
> 时间：2012-09-04T03:27:26.970
> 
> 标签：c++, templates

我想设计一组函数，比如`min`,`max`和`stddev`, 可以支持自定义类型。我打算做的是让用户将`Extractor`模板参数传递给这些函数。一些示例代码如下：

```
template <typename T>
struct DefaultExtractor
{
  typedef T value_type;
  static T value(T &v){
    return v;
  }
};

template <
  typename Extractor=DefaultExtractor<typename std::iterator_traits<InputIterator>::value_type>, //error
  typename InputIterator>
typename Extractor::value_type 
foo(InputIterator first, InputIterator last)
{
  return Extractor::value(*first);
} 
```

这不会编译并且错误消息是“错误：'InputIterator' 未在此范围内声明”在`typename Extractor=...`.

我之所以要把模板放在`Extractor`前面的原因`InputIterator`是，当用户想要`foo`使用自定义的 调用时`Extractor`，他们不需要显式提供`InputIterator`.

`InputIterator`不知道有没有办法让代码编译，同时在需要定制的时候不需要用户显式提供参数`Extractor`。

代码用`g++-4.6.1 -std=c++0x`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:11:10.747

尽管我看到您希望将提取器作为模板参数传递，但实际上将对象传递给函数更为典型。它也更灵活，因为它允许您拥有可以传递给提取器的额外状态。

最重要的是，它可以更轻松地处理模板参数：

```
#include <iterator>
#include <list>

template <typename T>
struct DefaultExtractor
{
  typedef T value_type;
  static T value(T &v){
    return v;
  }
};

struct MyExtractor {
  typedef int value_type;
  static int value(int value) { return value; }
};

template <typename Extractor, typename InputIterator>
inline typename Extractor::value_type
foo(
  InputIterator first,
  InputIterator last,
  const Extractor &extractor
)
{
  return extractor.value(*first);
}

template <typename InputIterator>
inline typename DefaultExtractor<
  typename std::iterator_traits<InputIterator>::value_type
>::value_type
foo(
  InputIterator first,
  InputIterator last
)
{
  typedef DefaultExtractor<typename std::iterator_traits<InputIterator>::value_type> Extractor;
  return foo(first,last,Extractor());
}

int main(int argc,char **argv)
{
  std::list<int> l;

  // Use default extractor
  foo(l.begin(),l.end());

  // Use custom exractor.
  foo(l.begin(),l.end(),MyExtractor());
  return 0;
} 
```

# c# - 将日期 MMDDYY 转换为数据库插入的日期

> ID：12256426
> 
> 赞同：3
> 
> 时间：2012-09-04T03:28:34.137
> 
> 标签：c#

我有一个日期设置为的数组`071712`。日期没有 / 斜线字符，没有破折号。没什么，只是简单 `071712`的（来自文本文件）。

我需要转换日期，以便可以将其包含在 SqlServer 插入语句中。我正在为插入调用存储过程。到目前为止，我有这个：

```
// This is not working so far.
DateTime  date = Convert.ToDateTime(fileLines[4]); 
```

（日期将用作存储过程的参数）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T03:30:01.553

```
DateTime.ParseExact(text, "MMddyy", CultureInfo.InvariantCulture); 
```

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# php - 删除文本前的空行

> ID：12256427
> 
> 赞同：0
> 
> 时间：2012-09-04T03:28:36.207
> 
> 标签：php, line-breaks, strip

有时，我的电子邮件到支持工单系统会在消息本身之前捕获一个额外的换行符，因此我的消息如下所示：

> "
> 
> 你好。我一直在想你是不是……”

我可以用什么来摆脱文本之前的那一行？由于电子邮件提供商以及他们使用 mime 格式化电子邮件的方式，这是随机的。我已经尝试过这些`trim`功能，但没有运气。（是的，我也试过`ltrim`）

处理后应如下所示：

> “你好。我一直在想你是不是……”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T03:34:57.217

真的很奇怪吗？

我们可以在这里使用正则表达式仅从单词字符的开头获取，但更有趣的是，查看字符串中的内容...您能否发布字符串的“base64_encode（）”的输出，以便我们可以重现和看看？

这是应该为您工作的正则表达式...

```
if (preg_match('/\w.*\w/sm', $subject, $regs)) {
    $result = $regs[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:38:23.380

把它放在一起，如果需要，你可以重命名函数。

```
function removeDeadSpaceBeforeFirstChar($string) {
    $strtemp = $string;

    for($i = 0; $i < strlen($strtemp); $i++) {
        if($strtemp[$i] == " ") {
            $strtemp = substr($strtemp, $i, strlen($strtemp)); 
        }

        if($i > 0 && $strtemp[$i] != " ") {
            return $strtemp;
            break;  
        }
    }
    return false;
} 
```

打印这个：

```
 123456789
123456789 
```

编辑：我不知道为什么我会发布这样的结果，我正在查看代码并且我没有对 substr 做任何事情。上面是修改后的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:47:28.670

如果要从消息正文的开头删除任意数量的回车或换行符：

```
while (in_array(substr($msgbody, 0, 1), array("\r", "\n")))
    $input = substr($msgbody, 1); 
```

如果您只想捕获偶尔出现在消息开头的特定字节序列（例如，回车后跟换行符），您可以使用类似这样的东西：

```
if (substr($msgbody, 0, 2) == "\r\n")
    $input = substr($msgbody, 2); 
```

# c++ - 相机和图像识别

> ID：12256430
> 
> 赞同：3
> 
> 时间：2012-09-04T03:28:58.933
> 
> 标签：c++, camera, textures, vision, rubiks-cube

我最近观看了一个 youtube 视频，其中一个人用相机识别何时将魔方举到它上面，并在拍摄魔方的照片并在他的计算机屏幕上显示 3x3 网格之前捕获了 9 个正方形颜色组合. 这是一种什么样的编程，我从哪里开始阅读以了解这种情况？具体来说，控制相机，让它挑选出图像的某些部分并转换该数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:31:09.887

这属于“计算机视觉”主题，OpenCV 将是一个很好的入门...... [http://opencv.org/](http://opencv.org/)

也许看看这个教程：- [Cascade Classifier](http://docs.opencv.org/trunk/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:00:56.110

对于初学者， http: [//opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html)

然后[http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_ImageProcessing.htm](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_ImageProcessing.htm)

代码示例[http://code.google.com/p/blockhead/source/browse/trunk/Xcode/CubeFinder.cpp?r=8](http://code.google.com/p/blockhead/source/browse/trunk/Xcode/CubeFinder.cpp?r=8)

和[http://blockhead.googlecode.com/svn-history/r13/trunk/CubeFinder.cpp](http://blockhead.googlecode.com/svn-history/r13/trunk/CubeFinder.cpp)

[OpenCV cvFindContours - 如何分离轮廓的组件](https://stackoverflow.com/questions/6044119/opencv-cvfindcontours-how-do-i-separate-components-of-a-contour)

# android - 在android的警报管理器中使用intent extras传递值

> ID：12256434
> 
> 赞同：3
> 
> 时间：2012-09-04T03:29:31.217
> 
> 标签：android, alarmmanager

我想知道这段代码是否有效（我现在无法尝试。此外，我有一些疑问需要解决）。

```
Intent intent = new Intent(context, AlarmReceiver.class);
intent.putExtra("user",global.getUsername());
intent.puExtra("password",global.getPassword);
PendingIntent sender = PendingIntent.getBroadcast(context, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);
// Get the AlarmManager service
Log.v("inside log_run", "new service started");
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, IMMEDIATELY,60000,sender);
finish(); 
```

如您所见，此代码以`AlarmManager`开头`setRepeating()`。如果您看到传递给 的意图（实际上是待处理的意图）`BroadcastReceiver`，则传递了两个附加内容。这些是只要应用程序运行就存在的全局变量。但这`AlarmManager`意味着要在后台运行（即应用程序仅在 alrmamanager 对广播接收器的前几次调用中才有效）
**我的问题**
将 AlarmManager 制作全局变量的副本（用户名和密码）并保持此副本与意图一起传递（作为额外内容）？或者它会引用全局变量（在过程中，当全局变量变为 null 时将 null 作为额外的传递）？因为，这些值将在广播接收器中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:31:01.180

我可以看到这种方法产生的问题。我要做的是将您的两个变量存储在 SharedPrefs 文件中，并直接从 BroadcastReciever 访问它们。SharedPrefs 值会持续存在，而 Android 中的“全局变量”则不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T04:13:32.703

在警报管理器上，只需将 getApplicationContext 作为参数传递给辅助构造器。

# caching - 如何制作自动 CTRL F5

> ID：12256437
> 
> 赞同：1
> 
> 时间：2012-09-04T03:30:13.643
> 
> 标签：caching

当我的老板查看我们的网页项目时，他总是看到唯一的网页设计。我必须告诉他`CTRL`+`F5`才能显示新内容。

是否有一种可能的网络编码方式来制作自动`CTRL`+ `F5`？或者换句话说，在页面加载时清除缓存？

告诉我你的想法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:46:16.437

要防止仅缓存 HTML，请在标头中使用元标记指定缓存控制，例如：

```
<meta http-equiv="Cache-Control" content="no-store"/> 
```

这样你老板的浏览器将永远不会缓存页面。但是，请勿在生产网站上启用此功能，因为这将大大增加重复访问者使用的带宽。

为了防止缓存服务器上的其他资源，您需要调整它发送的 HTTP 缓存控制标头。这是 Apache 的一些文档： [http ://www.askapache.com/htaccess/apache-speed-cache-control.html](http://www.askapache.com/htaccess/apache-speed-cache-control.html)

如果您还想在生产网站上始终拥有最新的资源，最好的解决方案是版本控制，如下所述： [http ://www.sitepoint.com/overcome-cache-conundrums/](http://www.sitepoint.com/overcome-cache-conundrums/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:38:09.530

正如 SLaks 所建议的，您可以使用缓存清除 URL（例如，在 url 中使用 ?random={$rand}）。或者，您可以将开发站点配置为发送标头，告诉所有缓存几乎立即使内容过期，因此每次获取都是直接的，无需缓存，例如像这样（如果是 PHP）：

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

`Ctrl`或者，找一个理解+的老板`F5`- 你认为他们现在已经习惯了：D

# http - 在 Node 中接收到标头后结束 HTTP 请求？

> ID：12256438
> 
> 赞同：0
> 
> 时间：2012-09-04T03:30:18.200
> 
> 标签：http, node.js

我正在编写一个发出 HTTP 请求的 Node.js 应用程序，然后根据它接收到的标头，我想要么处理该请求的结果，要么终止该请求。特别是，如果我尝试下载的文件太大，我想停止请求（和下载；这意味着我不能忽略结果，因为它仍然会在后台下载）。有没有办法做到这一点？我在 Node 文档中找不到它。示例代码：

```
http.get(requestParams, function(res) {
  var bodyData = "";

  try {
    if(parseInt(res.headers['content-length']) > settings.maxSize) {
      done(new Error("Response is too large: " + res.headers['content-length']));
      // is there something I should do here to end the request?
      return;
    } else {
      log.debug("Content length of " + res.headers['content-length'] + " is under limit of " + settings.maxSize);
    }
  } catch(ex) {
    done(new Error("Error parsing content-length from response header:" + util.inspect(ex)));
    return;
  }

  res.setEncoding('utf8');

  res.on('data', function (chunk) {
    bodyData += chunk;
  });
  res.on('end', function() {
    done(null, bodyData);
  });
}).on('error', function(e) {
  done(e);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:57:22.063

http.get() 返回一个请求对象，该对象有一个 abort 方法，可以用来中止当前请求

例如

```
var req = http.get(params, function(res){
    //content-length too large
    req.abort();
}); 
```

从文档 - [http://nodejs.org/api/http.html#http_request_abort](http://nodejs.org/api/http.html#http_request_abort)

> 中止请求。（自 v0.3.8 起新增。）

因此，除非您使用的是非常旧版本的节点，否则这应该适合您。

# php - 我应该采取哪条路线进行网络托管？

> ID：12256439
> 
> 赞同：0
> 
> 时间：2012-09-04T03:30:23.553
> 
> 标签：php, mysql

嗨，我正在建立一个类似于在线投资组合的小型网站。在询问他们是否支持存储过程之前，我犯了注册共享网络托管的错误，这花了我半天时间才弄清楚他们不支持。

基本上我正在寻找一个为我提供 PHP5.4+/Mysql 5.5+ 的站点，支持触发器/存储过程/，如果可能的话，MyphpAdmin 3.5.1。

我也有一个我已经注册并想使用的域名。

寻找提供此功能的托管服务提供商或设置 VPS 的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:35:29.947

VPS 始终是一个不错的选择，但与设置 VPS 相关的唯一问题是 COST ，您是否有那么多预算来负担，那么是的，您应该选择 VPS ，或者共享主机也不是问题，除非一切支持您的要求。准备所有要求的列表，例如版本等，然后比较可用的产品。另外请注意共享主机的一些问题，例如，

1.  不会共享任何日志
2.  频繁重启，几乎每天都会强制停机 2-3 分钟
3.  无版本升级
4.  共享内存池，如果其他人的应用程序无法正常工作并且一次又一次地关闭服务器，有时可能会出现问题
5.  您必须确保不要将任何敏感信息放在日志中，因为它们可能会受到损害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:36:54.063

好吧，当我试图决定与哪家托管公司合作时，我选择了谷歌。

据我所知，除非您的网站包含小猫图片，否则 GoDaddy 很糟糕，而且像 HostGator 这样的托管公司很棒（公平地说，我现在正在使用它们）。

Lifehacker 在他们的前 5 名中有一篇文章（[http://lifehacker.com/5911651/five-best-web-hosting-companies](http://lifehacker.com/5911651/five-best-web-hosting-companies)）

> Dreamhost 27.51% (1,092 票)
> 
> Hostgator 25.02% (993 票)
> 
> Bluehost 25.12%（997 票）
> 
> Linode 9.65%（383 票）
> 
> 小橙子 12.7%（504票）
> 
> 总票数：3,969

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T03:40:30.543

如果您想与一家提供卓越支持的公司一起使用良好的 VPS，我会选择**Servint**。它们很贵，但我喜欢我不必处理任何与托管相关的事情，因为他们会很快通过支持票处理它——让我的客户满意。虽然与其他可比较的计划（硬件可比较，而不是支持）相比，价格有点陡峭 - 起价为 49 美元/月

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T04:06:37.837

简单比较托管服务。

看看[https://www.google.co.in/search?q=hosting+comparison&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a](https://www.google.co.in/search?q=hosting+comparison&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

看到他们并找到最好的

# c++ - 以下功能的联系是什么？

> ID：12256440
> 
> 赞同：1
> 
> 时间：2012-09-04T03:30:59.187
> 
> 标签：c++

当我阅读 c++ 03 标准（7.1.1 存储类说明符 [dcl.stc]）时，有一些示例如下，我无法说出每个连续声明的链接是如何确定的？有人可以帮忙吗？提前致谢！

```
static char* f();    // f() has internal linkage
char* f() 
       { /* ... */ } // f() still has internal linkage

char* g();           // g() has external linkage
static char* g() 
       { /* ... */ } // error: inconsistent linkage

void h();
inline void h(); // external linkage

inline void l();
void l(); // external linkage

inline void m();
extern void m(); // external linkage

static void n();
inline void n(); // internal linkage

static int a; // a has internal linkage
int a; // error: two definitions

static int b; // b has internal linkage
extern int b; // b still has internal linkage

int c; // c has external linkage
static int c; // error: inconsistent linkage

extern int d; // d has external linkage
static int d; // error: inconsistent linkage 
```

UPD：此外，我如何理解标准中的声明，

> 给定实体的连续声明所暗示的联系应一致。也就是说，在给定的范围内，每个声明相同的对象名称或函数名称的相同重载的声明都应暗示相同的链接。然而，一组给定的重载函数中的每个函数都可以有不同的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:33:33.427

除非您`static`在全局范围内声明的独立函数或变量上使用它们，否则它们将具有***外部链接***。

请注意，`inline`在函数上使用关键字不会更改函数的链接。

另一个需要注意的重要一点是，`const`与 C 不同，C++ 中的变量具有内部链接。

* * *

> 给定实体的连续声明所暗示的联系应一致。也就是说，在给定的范围内，每个声明相同的对象名称或函数名称的相同重载的声明都应暗示相同的链接。然而，一组给定的重载函数中的每个函数都可以有不同的链接。”

声明向编译器引入了一个标识符，以便编译器知道它的类型。在 C++ 中，一个标识符可以声明任意多次，例如：

```
void doSomething(int, double);         // External Linkage
extern void doSomething(int, double);  // External Linkage is explicitly mentioned 
```

引用的段落暗示相同标识符的所有此类声明都应指定相同的链接。例如，以下将是无效的：

```
void doSomething(int, double);        //External Linkage
static void doSomething(int, double); //Internal Linkage due to static 
```

同时，同一函数的重载版本可以具有不同的链接，因此以下是有效的：

```
void doSomething(int, double);
extern void doSomething(int, double);
void doSomething(double,int); 
```

# php - PHP，将时间戳转换为日期

> ID：12256444
> 
> 赞同：0
> 
> 时间：2012-09-04T03:31:29.403
> 
> 标签：php, epoch

除了其他数据之外，我从外部网站收到了这样的日期/时间戳， `1346729259806`或者`1346734102948` 我一直在尝试查看将其转换为格式化的日期/时间以供以后使用的最佳方法。

我发现时间戳是以毫秒为单位的纪元格式。有没有常规的方法来转换它？

提前谢谢了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T03:33:41.617

`date()`函数将第二个参数作为时间戳。

```
echo date('Y-m-d H:i:s', 1346729259806/1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:13:23.127

您可以使用`DATE`and`FROM_UNIXTIME`函数将时间戳转换为 mysql 中的日期。下面给出的命令，

```
FROM_UNIXTIME
SELECT create FROM phpkit ; 
```

创建的输出：

> 1216053466

然后：

```
SELECT DATE( FROM_UNIXTIME( `created` ) ) AS pDate FROM phpkit 
```

输出：

> 2008-07-14

我从以下[链接](http://youropensource.com/projects/61-How-to-convert-timestamp-to-date-in-MYSQL)中找到了来源。

# c++ - 帮助者的静态自由函数或成员函数？

> ID：12256445
> 
> 赞同：5
> 
> 时间：2012-09-04T03:31:39.373
> 
> 标签：c++

假设您有以下非静态成员函数：

```
// .h
struct C {
    void f();
} 
```

现在假设您想`C::f`通过使用特定于 的一些子函数来实现`C::f`，以使其更短且更具可读性；例如：

```
// .cpp
void C::f() {
    h1();
    h2();
    //...
    hn();
} 
```

假设这些 h() 的许多函数不需要访问任何数据成员。这意味着您可以将函数定义为静态自由函数（在一个 .cpp 中）或成员函数（静态或非静态）。

你会让它们成为 C 的静态自由函数或函数成员吗？

第一种情况的一个优点是您不必在以下位置声明它们`C`：

```
// .cpp
static void h1() {//...}
static void h2() {//...}
static void hn() {//...} 
```

另外，如果我没记错的话，没有全局命名空间污染的风险，因为它们是*static*，也就是说它们只能从同一单元 .cpp （其中还定义了 C::f ）内的其他函数中看到。

而在第二种情况下，您必须在 中声明它们`C`，尽管正如我所说，它们只应该由`C::f`.

```
// .h
struct C {
    void f();
  private:
    static void h1(); // can be either static or non-static
    static void h2();
    static void hn();
}

// .cpp
void C::h1() {//...}
void C::h2() {//...}
void C::hn() {//...} 
```

我认为第二个版本会无缘无故地导致代码臃肿，尤其是如果您最终不得不拆分其他长成员函数，例如`C::f`使代码更具可读性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:39:22.360

我建议使用匿名命名空间：

```
namespace {
    void C::h1() {/...}
    void C::h2() {/...}
    void C::h3() {/...}
} 
```

（见[这个问题](https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions)）

这样，您可以保证该函数在它定义的文件之外*不*可见，因此您绝不会污染您的全局命名空间——这将是我对免费静态函数的主要关注点。

将它们设为类的私有成员会将函数接口暴露给全世界（当您发布 *.h 文件时），因此只会无缘无故地使接口变得更加复杂。（您可以在此处添加更多参数，例如更改私有函数的定义时会增加编译时间）

搜索“匿名命名空间”会导致一些关于该主题的有趣讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:33:15.580

只有你能回答这个问题。如果它们永远不会在外部使用， `C::f`那么污染全局命名空间是没有意义的。我个人会让它们成为`C`. 如果它们可以标记为静态，那么就这样做，但如果它们真的只`f`对`static`.

# lua - 使用嵌入式 lua 从 C 代码打印堆栈跟踪

> ID：12256455
> 
> 赞同：20
> 
> 时间：2012-09-04T03:33:43.773
> 
> 标签：lua, stack-trace, traceback, lua-api

如果我理解正确，Lua 默认会在发生错误时调用调试库“debug.traceback”。

但是，当将 Lua 嵌入到 C 代码中时，就像这里的示例中所做的那样： [Simple Lua API Example](http://lua-users.org/wiki/SimpleLuaApiExample)

我们只有堆栈顶部的错误消息。

IE

```
if (status) {
    /* If something went wrong, error message is at the top of */
    /* the stack */
    fprintf(stderr, "Couldn't load file: %s\n", lua_tostring(L, -1));

    /* I want to print a stacktrace here. How do I do that? */
    exit(1);
} 
```

初始错误后如何从 C 打印堆栈跟踪？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T03:47:15.830

> Lua 默认会在发生错误时调用调试库“debug.traceback”。

不，不会的。Lua*运行时*(lua.exe) 会执行此操作，但 Lua 库不会自行执行此操作。如果你想要一个带有 Lua 错误的调用堆栈，那么你需要生成一个。

Lua 运行时通过使用[`lua_pcall`'s](http://www.lua.org/manual/5.1/manual.html#lua_pcall) error 函数来做到这一点。调用错误函数时堆栈尚未展开，因此您可以在那里获得堆栈跟踪。运行时使用的错误函数是这个：

```
static int traceback (lua_State *L) {
  if (!lua_isstring(L, 1))  /* 'message' not a string? */
    return 1;  /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);  /* pass error message */
  lua_pushinteger(L, 2);  /* skip this function and traceback */
  lua_call(L, 2, 1);  /* call debug.traceback */
  return 1;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-01T17:41:05.580

在这里解决尼科尔的答案是一个工作示例：

```
static int traceback(lua_State *L) {
    lua_getfield(L, LUA_GLOBALSINDEX, "debug");
    lua_getfield(L, -1, "traceback");
    lua_pushvalue(L, 1);
    lua_pushinteger(L, 2);
    lua_call(L, 2, 1);
    fprintf(stderr, "%s\n", lua_tostring(L, -1));
    return 1;
}

int main(int argc, char **argv) {
    lua_State *L = lua_open();
    luaL_openlibs(L);    
    lua_pushcfunction(L, traceback);
    int rv = luaL_loadfile(L, "src/main.lua");
    if (rv) {
        fprintf(stderr, "%s\n", lua_tostring(L, -1));
        return rv;
    } else {
        return lua_pcall(L, 0, 0, lua_gettop(L) - 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-16T09:10:41.813

我像你一样遇到了一些问题，我发现这种方式有效：

```
luaL_traceback(L, L, NULL, 1);
printf("%s\n", lua_tostring(L, -1)); 
```

由于`luaL_traceback`正是`debug.traceback()`用于打印堆栈，所以我认为这可能是一种正确的方法，您可以阅读 API 手册`luaL_traceback`或只是阅读 Lua 的源代码以了解参数的含义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-13T18:48:29.953

mxcl的代码有问题：

```
static int traceback(lua_State *L) {
    lua_getfield(L, LUA_GLOBALSINDEX, "debug");
    lua_getfield(L, -1, "traceback");
    //---------------------------
    lua_pop(L,-2); //to popup the 'debug'
    //---------------------------
    lua_pushvalue(L, 1);
    lua_pushinteger(L, 2);
    lua_call(L, 2, 1);
    fprintf(stderr, "%s\n", lua_tostring(L, -1));
    return 1;
} 
```

# c# - 以编程方式筛选 Outlook 2010 加载项中的联系人

> ID：12256457
> 
> 赞同：2
> 
> 时间：2012-09-04T03:33:52.460
> 
> 标签：c#, outlook, vsto, filtering, contacts

我正在尝试以编程方式过滤 Outlook 2010 中“联系人”文件夹中的 Outlook 联系人。我遵循 DASL 过滤器规则，但是`Find`当我将此过滤器分配给`view.Filter = FilterString`. 任何想法我做错了什么？正确的结果将在现有联系人视图中显示过滤的联系人。

```
Outlook.Application myApp = ThisAddIn.myApp; 
Outlook.NameSpace myNamespace = ThisAddIn.nSpace; 
Outlook.MAPIFolder myContactsFolder = ThisAddIn.contactsFolder;
if (myContactsFolder == null)
{
    Log.Verbose("Contacts folder not found");
    return null;
}

Outlook.Items contactItems = ThisAddIn.contactItems; 

//use filter to take only contact and not DistListItem  
Outlook.Items outlookContacts = contactItems.Restrict("[MessageClass] = 'IPM.Contact'");
Outlook.ContactItem contact = null;

int iOutlookContacts = contactItems.Count;
if (iOutlookContacts > 0)
{
    string FilterString = "[FullName]='" + param + "'"; 

    // Find works with this filter
    contact = (Outlook.ContactItem)outlookContacts.Find(FilterString); 
    if (contact != null)
    {
        // need to display in contacts search window
        Outlook.View currentView = myApp.ActiveExplorer().CurrentView;
        currentView.Filter = FilterString; // cannot parse exception occurs here

        currentView.Save();
        currentView.Apply();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T14:01:15.910

您需要将 DASL 搜索过滤器更改为：

```
string FilterString = "\"urn:schemas:contacts:cn\"='" + param + "'"; 
```

`[FullName]`不是有效的搜索过滤器列。全**名字**段[映射到 DASL 搜索列`urn:schemas:contacts:cn`](http://msdn.microsoft.com/en-us/library/exchange/ms873094%28v=exchg.65%29)

# wpf - 我知道我在 RaiseCanExecuteChanged 和 CanExecute 上做错了

> ID：12256458
> 
> 赞同：0
> 
> 时间：2012-09-04T03:33:54.037
> 
> 标签：wpf, mvvm, command, canexecute

好吧，在摆弄了 MVVM 灯以让我的按钮在我想要的时候启用和禁用......我把东西混在一起直到它起作用。

但是，我只知道我在这里做错了什么。我在被调用的同一区域中有 RaiseCanExecuteChanged 和 CanExecute。当然这不是它的做法吗？

这是我的xml

```
<Button Margin="10, 25, 10, 25" VerticalAlignment="Center" HorizontalAlignment="Center" Width="50" Height="50" Grid.Column="1" Grid.Row="3" Content="Host">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <mvvmLight:EventToCommand Command="{Binding HostChat}" MustToggleIsEnabled="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

这是我的代码

```
public override void InitializeViewAndViewModel()
{
    view = UnityContainer.Resolve<LoginPromptView>();
    viewModel = UnityContainer.Resolve<LoginPromptViewModel>();
    view.DataContext = viewModel;
    InjectViewIntoRegion(RegionNames.PopUpRegion, view, true);

    viewModel.HostChat = new DelegateCommand(ExecuteHostChat, CanHostChat);
    viewModel.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(ViewModelPropertyChanged);
}

void ViewModelPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
    if (e.PropertyName == "Name" || e.PropertyName == "Port" || e.PropertyName == "Address")
    {
        (viewModel.HostChat as DelegateCommand).RaiseCanExecuteChanged();
        (viewModel.HostChat as DelegateCommand).CanExecute();
    }
}

public void ExecuteHostChat()
{
}

public bool CanHostChat()
{
    if (String.IsNullOrEmpty(viewModel.Address) ||
        String.IsNullOrEmpty(viewModel.Port) ||
        String.IsNullOrEmpty(viewModel.Name))
    {
        return false;
    }
    else
        return true;
} 
```

看看这两个是怎么在一起的？这肯定是不对的。我的意思是……它对我有用……但它似乎有些不对劲。RaiseCanExecuteChanged 不应该调用 CanExecute 吗？它没有......所以如果我没有那个 CanExecute ，我的控件永远不会像我需要的那样切换它的 IsEnabled 。

```
(viewModel.HostChat as DelegateCommand).RaiseCanExecuteChanged();
(viewModel.HostChat as DelegateCommand).CanExecute(); 
```

编辑：

如果我最终使用按钮的 Command 属性将我的命令绑定到...一切正常。我可以删除 CanExecute 并留下 RaiseCanExecuteChanged ，一切正常。

像这样......这工作得很好。

```
<Button Command="{Binding HostChat}" Margin="10, 25, 10, 25" VerticalAlignment="Center" HorizontalAlignment="Center" Width="50" Height="50" Grid.Column="1" Grid.Row="3" Content="Host">
</Button>

void ViewModelPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
    if (e.PropertyName == "Name" || e.PropertyName == "Port" || e.PropertyName == "Address")
    {
        (viewModel.HostChat as DelegateCommand).RaiseCanExecuteChanged();
        //(viewModel.HostChat as DelegateCommand).CanExecute();
        //CommandManager.InvalidateRequerySuggested();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:53:34.040

`CanExecute`方法只返回命令是否可以执行。它不做任何其他事情。你只需要`RaiseCanExecuteChanged`. `RaiseCanExecuteChanged`会打电话给`CanHostChat`你的情况。

# php - 将带有图像的 html 转换为 ms.word

> ID：12256464
> 
> 赞同：1
> 
> 时间：2012-09-04T03:35:27.543
> 
> 标签：php, html, ms-word

我有如下的html代码：

**文件.html**

```
<body>
    <h1>TEST</h1>
    <p>this is test</p>
    <table>
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
        <tr>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>5</td>
            <td><img src="../../../wamp/www/html2doc/SGEPP.jpg"></td>
        </tr>
    </table> 
```

**html2doc.php**

```
<?php
        $handle = fopen("doc2html.html","r");
        $contents = '';
                while (!feof($handle)) {
                $contents .= fread($handle, 8192);
                }   
                header("Content-type: application/vnd.ms-word");
                header("Content-Disposition: attachment;Filename=html2word.doc");
                echo $contents;
?> 
```

**问题：**

当我转换它时，我得到了 html2word.doc 但我只能从 html 文件中获取所有文本。对于 html 文件中的图像我无法得到它，它缺少图像。所以我也想从 html 和图像中获取所有数据.我该如何解决这个问题？请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:37:24.570

我一周前处理了这个脚本（html2doc）。因此请注意，您不要将图像保存在`*.doc`文件中。它们仅像指向您的服务器的链接一样插入。`src`所以解决方案是在标签中写入绝对路径。您逐行阅读您的 HTML 页面。因此，请尝试在每一行中找到您的 img 标签并将 src 替换为新标签。

```
$handle = fopen("html2doc.html","r");
$contents = '';
while (!feof($handle)) {
    $str = fread($handle, 8192);
    $str = str_replace('src="../../../','src="http://'.$_SERVER['SERVER_NAME'].'/path/to/imgages/',$str);
    $contents .= $str;
}   
header("Content-type: application/vnd.ms-word");
header("Content-Disposition: attachment;Filename=html2word.doc");
echo $contents;

// Output:
<body>
<h1>TEST</h1>
<p>this is test</p>
<table>
    <tr>
        <td>1</td>
        <td>2</td>
    </tr>
    <tr>
        <td>3</td>
        <td>4</td>
    </tr>
    <tr>
        <td>5</td>
        <td><img src="http://www.temp.com/path/to/imgages/wamp/www/html2doc/SGEPP.jpg" /></td>
    </tr>
</table> 
```

所以现在图像有了路径，MS Word 可以很好地阅读并显示图像。但请记住：
1.您需要互联网连接才能显示图像
2.删除（或不可用的服务器）图像将使它们在所有生成的文档中都不可用
3.包含的 doc 文件中没有图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T09:41:38.313

通常，header() 函数仅重定向并强制下载特定应用程序，但带有图像的 word 文件无法正常工作，它只是从源而不是永久 doc 文件中读取...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T11:18:44.483

尝试在之后添加随机查询`.jpg`或`.png`喜欢例如： `example.com/photo.jpg?ts=12345`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-04T03:27:32.230

我发现Word支持data uri，你可以把你的图片转换成base64。

```
// A few settings
$image = 'cricci.jpg';

// Read image path, convert to base64 encoding
$imageData = base64_encode(file_get_contents($image));

// Format the image SRC:  data:{mime};base64,{data};
$src = 'data: '.mime_content_type($image).';base64,'.$imageData;

// Echo out a sample image
echo '<img src="', $src, '">'; 
```

# ruby - 如何将两个测试合并到一个 RSpec

> ID：12256467
> 
> 赞同：0
> 
> 时间：2012-09-04T03:37:00.490
> 
> 标签：ruby, rspec

最后两个测试都单独工作......但是当两者都设置为运行（非挂起）时，我遇到了问题。

问题：我可以创建一个将两者合二为一的测试吗？这看起来如何？（是的，我是 rspec 的新手）

```
require_relative '../spec_helper'

# the universe is vast and infinite....and...it is empty
describe "tic tac toe game" do
  context "the game class" do

    before (:each) do
      player_h = Player.new("X")
      player_c = Player.new("O")
      @game = Game.new(player_h, player_c)
    end

   it "method drawgrid must return a 3x3 game grid" do
      @game.drawgrid.should eq("\na #{$thegrid[:a1]}|#{$thegrid[:a2]}|#{$thegrid[:a3]} \n----------\nb #{$thegrid[:b1]}|#{$thegrid[:b2]}|#{$thegrid[:b3]} \n----------\nc #{$thegrid[:c1]}|#{$thegrid[:c2]}|#{$thegrid[:c3]} \n----------\n  1 2 3 \n")
      @game.drawgrid
   end
   #FIXME - last two test here - how to merge into one?
   it "play method must display 3x3 game grid" do
      STDOUT.should_receive(:puts).and_return("\na #{$thegrid[:a1]}|#{$thegrid[:a2]}|#{$thegrid[:a3]} \n----------\nb #{$thegrid[:b1]}|#{$thegrid[:b2]}|#{$thegrid[:b3]} \n----------\nc #{$thegrid[:c1]}|#{$thegrid[:c2]}|#{$thegrid[:c3]} \n----------\n  1 2 3 \n").with("computer move")
      @game.play
    end
    it "play method must display 3x3 game grid" do
      STDOUT.should_receive(:puts).with("computer move")
      @game.play
    end
  end
end 
```

仅供参考这里是包含播放方法的代码

```
require_relative "player"
#
#Just a Tic Tac Toe game class
class Game
  #create players
  def initialize(player_h, player_c)
    #bring into existence the board and the players
    @player_h = player_h
    @player_c = player_c
    #value hash for the grid lives here
    $thegrid = {
        :a1=>" ", :a2=>" ", :a3=>" ",
        :b1=>" ", :b2=>" ", :b3=>" ",
        :c1=>" ", :c2=>" ", :c3=>" "
    }
    #make a global var for drawgrid which is used by external player class
    $gamegrid = drawgrid

  end
  #display grid on console
  def drawgrid

    board = "\n"
    board << "a #{$thegrid[:a1]}|#{$thegrid[:a2]}|#{$thegrid[:a3]} \n"
    board << "----------\n"
    board << "b #{$thegrid[:b1]}|#{$thegrid[:b2]}|#{$thegrid[:b3]} \n"
    board << "----------\n"
    board << "c #{$thegrid[:c1]}|#{$thegrid[:c2]}|#{$thegrid[:c3]} \n"
    board << "----------\n"
    board << "  1 2 3 \n"
    return board

  end
  #start the game
  def play
    #draw the board
    puts drawgrid
    #external call to player class
    @player = @player_c.move_computer("O")
  end
end

player_h = Player.new("X")
player_c = Player.new("O")

game = Game.new(player_h, player_c)
game.play 
```

更新 - 测试错误输出只是为了完整起见......这是运行 rspec 规范的完整输出......

```
 gideon@thefonso ~/Documents/ca_ruby/rubytactoe (now-with-rspec)$ rspec spec

    a  | |  
    ----------
    b  | |  
    ----------
    c  | |  
    ----------
      1 2 3 
    computer move

    tic tac toe game
      the game class
        method drawgrid must return a 3x3 game grid

    An error occurred in an after(:each) hook
      RSpec::Mocks::MockExpectationError: (#<IO:0x007f948406fcf0>).puts(any args)
        expected: 1 time
        received: 0 times
      occurred at /Users/gideon/Documents/ca_ruby/rubytactoe/spec/game_spec.rb:18:in `block (3 levels) in <top (required)>'

        play method must display 3x3 game grid (FAILED - 1)

    An error occurred in an after(:each) hook
      RSpec::Mocks::MockExpectationError: (#<IO:0x007f948406fcf0>).puts("computer move")
        expected: 1 time
        received: 0 times
      occurred at /Users/gideon/Documents/ca_ruby/rubytactoe/spec/game_spec.rb:22:in `block (3 levels) in <top (required)>'

        play method must display 3x3 game grid (FAILED - 2)

    tic tac toe game
      the player class
        must have a human player X
        must have a computer player O

    Failures:

      1) tic tac toe game the game class play method must display 3x3 game grid
         Failure/Error: STDOUT.should_receive(:puts).and_return("\na #{$thegrid[:a1]}|#{$thegrid[:a2]}|#{$thegrid[:a3]} \n----------\nb #{$thegrid[:b1]}|#{$thegrid[:b2]}|#{$thegrid[:b3]} \n----------\nc #{$thegrid[:c1]}|#{$thegrid[:c2]}|#{$thegrid[:c3]} \n----------\n  1 2 3 \n").with("computer move")
         NoMethodError:
           undefined method `with' for #<Proc:0x007f9484341168>
         # ./spec/game_spec.rb:18:in `block (3 levels) in <top (required)>'

      2) tic tac toe game the game class play method must display 3x3 game grid
         Failure/Error: @game.play
           #<IO:0x007f948406fcf0> received :puts with unexpected arguments
             expected: ("computer move")
                  got: ("\na  | |  \n----------\nb  | |  \n----------\nc  | |  \n----------\n  1 2 3 \n")
         # ./lib/game.rb:37:in `puts'
         # ./lib/game.rb:37:in `play'
         # ./spec/game_spec.rb:23:in `block (3 levels) in <top (required)>'

    Finished in 0.00457 seconds
    5 examples, 2 failures

    Failed examples:

    rspec ./spec/game_spec.rb:17 # tic tac toe game the game class play method must display 3x3 game grid
    rspec ./spec/game_spec.rb:21 # tic tac toe game the game class play method must display 3x3 game grid
    gideon@thefonso ~/Documents/ca_ruby/rubytactoe (now-with-rspec)$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:16:44.067

问题应该包括你遇到了什么*样*的“问题”；他们帮助诊断出了什么问题。

这是*一个*答案，之后有一个警告；还有其他方法。

```
it "play method must display 3x3 game grid" do
  STDOUT.should_receive(:puts).with("\na #{$thegrid[:a1]}|#{$thegrid[:a2]}|#{$thegrid[:a3]} \n----------\nb #{$thegrid[:b1]}|#{$thegrid[:b2]}|#{$thegrid[:b3]} \n----------\nc #{$thegrid[:c1]}|#{$thegrid[:c2]}|#{$thegrid[:c3]} \n----------\n  1 2 3 \n").twice.ordered
  STDOUT.should_receive(:puts).with("computer move").once.ordered

  @game.play
  @game.play
end 
```

需要注意的是：您现在的测试方式将无法维持。我可能不会*在*移动测试期间继续检查输出，而是单独测试输出，但隔离移动机制，以便您可以检查，例如，数组值或指示它是谁移动的标志，等等.

您还需要决定是否真的要测试顺序移动，而不是移动计算逻辑。连续移动需要像上面那样刺激性的测试结构，或者执行测试顺序，或者以其他方式确保移动的顺序是正确的。

重新考虑您正在测试的具体内容和时间可能更有意义。

# jquery - jQuery计算图像高度w/o css或高度属性集？

> ID：12256470
> 
> 赞同：1
> 
> 时间：2012-09-04T03:37:37.547
> 
> 标签：jquery, html, css

我有一个带有一些图像的响应式布局。图像已`max-width:100%`设置。并且不能在 CSS 或 HTML`height`属性中预设高度，否则图像会随着响应式布局变小而扭曲。它必须是`height: auto;`为了正确扩展。

是否可以在 jQuery 中计算图像的高度？`.height()`并`.css('height')`依赖于要设置的 css 或 height 属性，就像我说的那样，当响应式设计改变大小时，我无法在不扭曲图像的情况下设置这些属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:03:11.943

我的问题最终是这样`.height()`并`.css('height')`返回 0，因为调用该代码时图像尚未加载。

为了获得高度，我运行了以下命令：

```
$(document).ready(function(){
  $('img.whatever').load(function(){
    console.log($(this).height()); // calculates height correctly after image is loaded.
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:39:09.490

您可以使用 outerHeight()

[http://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:09:03.353

如[确定图像跨浏览器的原始大小中所述？](https://stackoverflow.com/questions/1944280/determine-original-size-of-image-cross-browser)：

您有 2 个选项：

选项1：

去掉width和height属性，读取offsetWidth和offsetHeight

选项 2：

创建一个 JavaScript 图像对象，设置 src，并读取宽度和高度（您甚至不必将其添加到页面即可执行此操作）。

```
function getImgSize(imgSrc) {
    var newImg = new Image();

    newImg.onload = function() {
    var height = newImg.height;
    var width = newImg.width;
    alert ('The image size is '+width+'*'+height);
    }

    newImg.src = imgSrc; // this must be done AFTER setting onload

} 
```

我相信该解决方案对您有用。

如果您只是更改图像的高度或宽度，则不应扭曲纵横比。

# android - 当我使用 android 播放视频时，使用 getNativeSurface FindClass，它告诉错误

> ID：12256472
> 
> 赞同：1
> 
> 时间：2012-09-04T03:37:41.987
> 
> 标签：android

它`jclass clazz = env->FindClass("android/view/Surface");`告诉我错误，为什么？错误信息为 SIGILL&SIGSEGV

```
setFixedSize called；A/libc(11964): Fatal signal 4 (SIGILL) at 0x4c6959b8 (code=1) 
```

有没有人可以帮助我？我非常感谢你。代码为

```
/*
 * Copyright (C) 2011 Petr Havlena  havlenapetr@gmail.com
 * Copyright (C) 2009 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#include <android/surface.h>
#include <surfaceflinger/Surface.h>
#include <utils/Log.h>
#include <SkBitmap.h>
#include <SkCanvas.h>

#define TAG "SurfaceWrapper"

using namespace android;

static Surface*         surface;
static Surface::SurfaceInfo surfaceInfo;

static SkBitmap         bmpClient;
static SkBitmap         bmpSurface;
static SkRect           rect_bmpClient;
static SkRect           rect_bmpSurface;
static SkMatrix         matrix;

static
Surface* getNativeSurface(JNIEnv* env, jobject jsurface) {
    jclass clazz = env->FindClass("android/view/Surface");
    //android 2.2
    //jfieldID field_surface = env->GetFieldID(clazz, "mSurface", "I");
    //android 2.3
    jfieldID field_surface = env->GetFieldID(clazz, "mNativeSurface", "I");
    if(field_surface == NULL) {
        __android_log_print(ANDROID_LOG_ERROR, TAG, "GetFieldID ERROR, field_surface == NULL!");
        return NULL;
    }
    return (Surface *) env->GetIntField(jsurface, field_surface);
}

static
void initBitmap(SkBitmap *bitmap, int format, int width, int height) {
    switch (format) {
        case PIXEL_FORMAT_RGBA_8888:
__android_log_print(ANDROID_LOG_INFO, TAG, "setConfig:PIXEL_FORMAT_RGBA_8888");
            bitmap->setConfig(SkBitmap::kARGB_8888_Config,
                width, height);
            break;

        case PIXEL_FORMAT_RGBA_4444:
__android_log_print(ANDROID_LOG_INFO, TAG, "setConfig:PIXEL_FORMAT_RGBA_4444");
            bitmap->setConfig(SkBitmap::kARGB_4444_Config,
                width, height);
            break;

        case PIXEL_FORMAT_RGB_565:
__android_log_print(ANDROID_LOG_INFO, TAG, "setConfig:PIXEL_FORMAT_RGBA_565");
            bitmap->setConfig(SkBitmap::kRGB_565_Config,
                width, height);
            break;

        case PIXEL_FORMAT_A_8:
__android_log_print(ANDROID_LOG_INFO, TAG, "setConfig:PIXEL_FORMAT_A_8");
            bitmap->setConfig(SkBitmap::kA8_Config,
                width, height);
            break;

        default:
__android_log_print(ANDROID_LOG_INFO, TAG, "setConfig:kNo_Config");
            bitmap->setConfig(SkBitmap::kNo_Config,
                width, height);
            break;
    }
}

int AndroidSurface_register(JNIEnv* env, jobject jsurface) {
    __android_log_print(ANDROID_LOG_INFO, TAG, "registering video surface");

    surface = getNativeSurface(env, jsurface);
    if(surface == NULL) {
__android_log_print(ANDROID_LOG_ERROR, TAG, "getNativeSurface ERROR, surface == NULL!");
         return ANDROID_SURFACE_RESULT_JNI_EXCEPTION;
    }
    else{
__android_log_print(ANDROID_LOG_INFO, TAG, "registered");
    }
    return ANDROID_SURFACE_RESULT_SUCCESS;
}

int AndroidSurface_getPixels(int width, int height, void** pixels) {
    __android_log_print(ANDROID_LOG_INFO, TAG, "getting surface's pixels %ix%i", width, height);
    if(surface == NULL) {
__android_log_print(ANDROID_LOG_ERROR, TAG, "gAndroidSurface_getPixels: surface == NULL!");
        return ANDROID_SURFACE_RESULT_JNI_EXCEPTION;
    }

    initBitmap(&bmpClient, PIXEL_FORMAT_RGB_565, width, height);
    bmpClient.setIsOpaque(true);
    //-- alloc array of pixels
    if(!bmpClient.allocPixels()) {
__android_log_print(ANDROID_LOG_ERROR, TAG, "gAndroidSurface_getPixels: bmpClient.allocPixels() error!");
        return ANDROID_SURFACE_RESULT_COULDNT_INIT_BITMAP_CLIENT;
    }
    *pixels = bmpClient.getPixels();
__android_log_print(ANDROID_LOG_ERROR, TAG, "gAndroidSurface_getPixels:getted *pixels = 0x%08x", *pixels);

    //__android_log_print(ANDROID_LOG_INFO, TAG, "getted");
    return ANDROID_SURFACE_RESULT_SUCCESS;
}

static
void doUpdateSurface(bool autoscale) {
    SkCanvas canvas(bmpSurface);

    if(autoscale)
    {
        rect_bmpSurface.set(0, 0, bmpSurface.width(), bmpSurface.height());
        rect_bmpClient.set(0, 0, bmpClient.width(), bmpClient.height());
        matrix.setRectToRect(rect_bmpClient, rect_bmpSurface, SkMatrix::kFill_ScaleToFit);
        canvas.drawBitmapMatrix(bmpClient, matrix);
    }
    else
    {
        canvas.drawBitmap(bmpClient, 0, 0);
    }
}

int AndroidSurface_updateSurface(bool autoscale) {
    if(surface == NULL) {
        return ANDROID_SURFACE_RESULT_JNI_EXCEPTION;
    }
    if (!surface->isValid()) {
        return ANDROID_SURFACE_RESULT_NOT_VALID;
    }
    if (surface->lock(&surfaceInfo) < 0) {
        return ANDROID_SURFACE_RESULT_COULDNT_LOCK;
    }

    /* create surface bitmap with pixels of surface */
    if(bmpSurface.width() != surfaceInfo.w ||
        bmpSurface.height() != surfaceInfo.h)
    {
        initBitmap(&bmpSurface, surfaceInfo.format,
            surfaceInfo.w, surfaceInfo.h);
    }
    bmpSurface.setPixels(surfaceInfo.bits);

    /* redraw surface screen */
    doUpdateSurface(autoscale);

    if (surface->unlockAndPost() < 0) {
        return ANDROID_SURFACE_RESULT_COULDNT_UNLOCK_AND_POST;
    }
    return ANDROID_SURFACE_RESULT_SUCCESS;
}

int AndroidSurface_unregister() {
    __android_log_print(ANDROID_LOG_INFO, TAG, "unregistering video surface");
    __android_log_print(ANDROID_LOG_INFO, TAG, "unregistered");
    return ANDROID_SURFACE_RESULT_SUCCESS;
} 
```

# ruby-on-rails - Resque，Resque 服务器，在 RedisToGo 上与 Heroku

> ID：12256476
> 
> 赞同：8
> 
> 时间：2012-09-04T03:38:00.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, redis, resque

我一直在尝试让 Resque（使用 Resque 服务器）和 RedisToGo 在 heroku（雪松）上工作一段时间，但我一直遇到这个错误：

```
Redis::CannotConnectError (Error connecting to Redis on 127.0.0.1:6379 (ECONNREFUSED)): 
```

它在本地工作，我可以在 Heroku 的控制台中为我的应用程序访问 redis。

我的 Procfile 有：

```
web: bundle exec thin start -p $PORT -e $RACK_ENV
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
resque: env TERM_CHILD=1 RESQUE_TERM_TIMEOUT=10 bundle exec rake resque:work 
```

我的 Gemfile 有：

```
gem 'redis'

#Background queue
gem 'resque', '~> 1.22.0', :require => "resque/server" 
```

lib/tasks/resque.rake：

```
require 'resque/tasks'

task "resque:setup" => :environment do
  ENV['QUEUE'] = '*'
end

desc "Alias for resque:work (To run workers on Heroku)"
task "jobs:work" => "resque:work" 
```

路线.rb：

```
 mount Resque::Server.new, :at => "/resque" 
```

初始化程序：redis.rb：

```
uri = URI.parse(ENV["REDISTOGO_URL"])
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
Resque.redis = REDIS 
```

resque.rb：

```
Dir["#{Rails.root}/app/workers/*.rb"].each { |file| require file }
Resque.after_fork = Proc.new { ActiveRecord::Base.establish_connection } 
```

然后在我的 app/workers 目录中我有类似 myjob.rb 的东西

我觉得我在这里绕圈子，有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T22:05:29.803

我认为你`Procfile`有一个错字。为什么你有两个`web`进程？我会坚持使用*unicorn*。

`web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb`

当使用带有*resque的**unicorn*时，您必须在每次*unicorn*分叉时定义*resque* *redis连接。*以下是相关文件。

 ****配置/初始化程序/redis.rb*

```
uri = URI.parse(ENV["REDIS_WORKER"])
REDIS_WORKER = Redis.new(host: uri.host, port: uri.port, password: uri.password) 
```

*配置/初始化程序/resque.rb*

```
Resque.redis = REDIS_WORKER 
```

*配置/独角兽.rb*

```
before_fork do |server, worker|
  if defined?(Resque)
    Resque.redis.quit
    Rails.logger.info("Disconnected from Redis")
  end
end

after_fork do |server, worker|
  if defined?(Resque)
    Resque.redis = REDIS_WORKER
    Rails.logger.info("Connected to Redis")
  end
end 
```

有关完整的*unicorn.rb* ，请参阅此[要点](https://gist.github.com/1401792)***

# xml - Erlang 中的 XML 转换

> ID：12256478
> 
> 赞同：0
> 
> 时间：2012-09-04T03:38:16.733
> 
> 标签：xml, erlang, transform

我有以下 XML：

```
<test>
    <something name="test">
        <todo>Something is here!</todo>
    </something>
    <mytag id="myID">!!!!</mytag>
    <todo>Hello, world</todo>
</test> 
```

我需要替换具有`id="myID"`并获得的标签的内容：

```
<test>
    <something name="test">
        <todo>Something is here!</todo>
    </something>
    <mytag id="myID">**MY NEW STRING IS HERE**</mytag>
    <todo>Hello, world</todo>
</test> 
```

有没有标准的方法来实现它？我知道[xmerl_xs](http://erlang.org/doc/apps/xmerl/xmerl_xs_examples.html)是一种 Erlang 的 XML 转换方式。但它不能用来解决我的问题。

而且我只设法`<mytag id="myID">**MY NEW STRING IS HERE**</mytag>`使用 Xmerl。我的代码：

```
{ RootEl, _Rest } = xmerl_scan:string(Template),
[Match|_] = xmerl_xpath:string("//*[@id='myID']", RootEl),
% Pack new content to the container
Result = Match#xmlElement { content="**MY NEW STRING IS HERE**" } 
```

只有非标准库（[Sablotron](http://forum.trapexit.org/viewtopic.php?p=30202)等）才有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:40:45.647

我从未使用过该库，但我认为 xmerl_lib:mapxml/2 可能是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:40:36.263

你试过[`erlsom`](http://erlsom.sourceforge.net/)图书馆吗？它可以提供一种非常灵活的方式。

# mysql - 从 GROUP BY 中分离出类似的结果

> ID：12256483
> 
> 赞同：0
> 
> 时间：2012-09-04T03:39:03.130
> 
> 标签：mysql, sql

我有一个当前具有所有唯一名称的数据库，并且我正在将查询从它移植到另一个包含多个相似名称的数据库。

它在数据库中选择人的名字和姓氏，并根据两个表之间共享的唯一 ID 显示来自他们的信息。

```
SELECT givenname, familyname
FROM table1 JOIN table2 USING (uniqueid)
GROUP BY givenname, familyname 
```

当前，这会将相似的名称返回到一个结果中。我知道我可以使用子查询来返回我想要的，但我想知道是否可以不使用子选择/子查询。

编辑：

GROUP BY 之所以存在，是因为它使用来自具有相似和不同列的多个表的数据。我可以将它与 uniqueid 显示一起使用，但我不希望这样做。

样本：

```
ID     Name         Result
1      John Smith    1
2      John Smith    1
3      Tony Nguyen   3   
4      Tony Nguyen   3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:40:36.460

为什么需要使用`GROUP BY`，请尝试删除它。

```
SELECT givenname, familyname
FROM   table1 
          JOIN table2 USING (uniqueid) 
```

# c# - TempData 在 RedirectToAction 期间未结转

> ID：12256488
> 
> 赞同：10
> 
> 时间：2012-09-04T03:40:10.720
> 
> 标签：c#, .net, asp.net-mvc-3, razor

我有一个有趣的问题，`TempData`对象没有将值传递给另一个控制器。

我将`TempData["Enroll"]`'`Enroll Controller`方法`HttpPost`设置为`Enroll`模型。然后我在's方法中读取了`TempData["Enroll"]`对象，但是是/ 。`Register Controller``HttpGet``empty``null`

我需要将所有这些数据保存在 3 个控制器中。

有什么想法吗？

这是一个代码片段

```
//EnrollController.cs
[HttpPost]
public ActionResult Index(EnrollModel model)
{
   // ...
   TempData["EnrollModel"] = model;
   return RedirectToAction("Index", "Register");
}

// RegisterController.cs
public ActionResult Index(string type)
{
    RegisterModel model = new RegisterModel();

    EnrollModel enrollModel = TempData["EnrollModel"] as EnrollModel;
    model.ClientType = enrollModel.ClientType;
    // ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-01T13:49:55.027

我遇到了一个问题，即 TempData 在本地机器上的重定向过程中丢失了。

我检查了 web.config sessionState 设置，它是 InProc，因此没问题。

原来我在 web.config 中得到了另一个设置，它是从生产系统中获取的。它看起来像这样：

```
<httpCookies requireSSL="true" /> 
```

将 requireSSL 设置为 false 后，TempData 工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T21:20:52.660

我今天遇到了同样的问题。

在[此链接](http://solvedstack.com/questions/mvc-passing-data-with-redirecttoaction)中，有些人解释该`RedirectAction`方法向浏览器返回 HTTP 302 状态，这会导致浏览器发出新请求并清除临时值，但我尝试返回 HTTP 方法 303（这是`RedirectAction`应该返回的）和 307 ，并没有解决任何问题。

`TempData`在我的情况下解决问题的唯一方法是将web.config的[`sessionState`指令](https://msdn.microsoft.com/en-us/library/ms178586.aspx)`StateServer`更改为 use而不是 default `InProc`。IE：

```
<system.web>
    <sessionState mode="StateServer" cookieless="AutoDetect" timeout="30" stateConnectionString="tcpip=localhost:42424"></sessionState>
    ...
</system.web> 
```

我在阅读[Greg Shackles 的这篇文章](http://gregshackles.com/asp-net-mvc-do-you-know-where-your-tempdata-is/)时发现了这一点，他在其中解释了如何`TempData`工作并构建了一个自定义的`TempDataProvider`，它依赖于 MongoDB 数据库而不是像默认的会话那样。

希望我 4 小时的研究可以帮助人们不要浪费时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T23:53:35.187

我以前遇到过 TempData 的这些限制。我发现它充其量是不现实的和零星的。

你需要考虑你想要达到的目标。如果您确实需要存储数据，实际上最好的地方是在数据库（或各种存储）中，这*似乎*有点矫枉过正，但这就是他们的目的。

另外两点：

1.  有人可以在不使用其他方法的情况下点击您的 RegisterController Index 方法，在这种情况下，您的代码会中断。

2.  如果您正在执行多向导样式的过程，为什么不将部分状态的数据存储在数据库中，并仅在最后一个屏幕上完成该过程？这样，无论他们在哪里停止/开始或再次拿起它，您都将始终知道他们在此过程中的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T23:33:25.850

将结果保存到缓存或数据库，或作为控制器之间的帖子/查询字符串传入。TempData 被几件事清除，包括工作进程重置，这肯定会在步骤之间发生。

此外，您上面的代码可能会得到一个空 ref 异常：

```
EnrollModel enrollModel = TempData["EnrollModel"] as EnrollModel;
if(enrollModel==null)
{
//handle this model being null
}
model.ClientType = enrollModel.ClientType; 

```

但是，在没有查看所有代码并且不知道是否还有其他可能/可能不会引用它的情况下，解决您的问题是很困难的。

# asp.net-mvc - 在一个解决方案中使用两个项目访问基于表单的身份验证数据库时出现 MVC 错误

> ID：12256489
> 
> 赞同：0
> 
> 时间：2012-09-04T03:40:13.030
> 
> 标签：asp.net-mvc, forms-authentication

我正在尝试构建一个复杂的 Web 项目，其中涉及 4 个网站，这些网站都共享相同的模型、数据库，并且还使用基于内置表单的身份验证。

以前有人建议我创建一个包含共享元素的类库，然后在我的每个项目中引用该库。这对我来说很有意义，但即使在包含所有参考资料之后，我似乎也遇到了很多错误。所以我基本上是从头开始，现在我在一个解决方案下有两个常规的 MVC 4.0 项目。第一个项目运行良好。它包含基于表单的身份验证成员身份控制器和模型，以及我所有的数据模型和 App_Data 文件夹，里面有 db。web.config 文件指向数据库，使用提供的默认视图和控制器测试成员资格功能完全没有问题。

我在第一个应用程序上设置了第二个应用程序的依赖关系，并引用了第一个项目。这个项目只包含默认的 HomeController 和 Views。我在构建时没有错误。例如，当我运行网站然后尝试访问 /Account/LogOff 时，我收到以下错误：

无法将文件“~\App_Data\Pp.mdf”附加为数据库“Pp。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：无法将文件“~\App_Data\Pp.mdf”附加为数据库“Pp。

源错误：

第 39 行：} 第 40 行：第 41 行：WebSecurity.InitializeDatabaseConnection("PpDB", "UserProfile", "UserId", "UserName", autoCreateTables: true); 第 42 行：} 第 43 行：catch（异常前）

源文件：c:\Users\Administrator\Documents\Prp\PpModels\Filters\InitializeSimpleMembershipAttribute.cs 行：41

我尝试使用第二个项目的连接字符串，但我真的不确定如何使用 MVC 解析路径。

任何帮助和建议将不胜感激。我正在拔头发！如果您知道任何向您展示如何使用多个项目共享模型和数据库的教程，那将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:08:19.030

答案是在第二个项目的连接字符串中硬编码完整路径，使其指向第一个项目中的 app_data 文件夹。

# android - Android 对话框半透明

> ID：12256490
> 
> 赞同：2
> 
> 时间：2012-09-04T03:40:23.340
> 
> 标签：android, android-dialog

我正在尝试制作一个半透明的对话框，以便您可以在游戏开始之前在后台看到游戏。

我已经看过这篇关于如何使其透明的文章，但没有关于半透明或者如果可能的话。

[android对话框透明](https://stackoverflow.com/questions/6059068/android-dialog-transparent)

我想要的有点像他提供的图片，但解决方案给出的是对话框的背景完全消失了。

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T04:20:33.720

您可以继续使用[android dialog transparent](https://stackoverflow.com/questions/6059068/android-dialog-transparent)提供的代码。

在**colors.xml**中创建您想要的背景颜色，例如：

```
<color name="translucent_black">#80000000</color> 
```

并将对话框设置为具有 translucent_black ：

```
mDialog.getWindow().setBackgroundDrawableResource(R.color.translucent_black); 
```

注意：alpha 通道由颜色资源上传递的前两位数字表示。在示例中，我将 alpha 设置为“ **80** ”。[您可以在Android Color](http://developer.android.com/reference/android/graphics/Color.html)阅读更多关于 android 颜色的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T03:55:39.417

将背景颜色设置为#AARRGGBB，其中 AA 是 Alpha 通道。例如，您可以使用 #00000000 作为颜色或使用简写方法：#ARGB 所以这将是 #0000 使用简写符号，每个值只使用两次，其中 #264C 与 #226644CC 相同， [另请参阅 Android Color 了解更多信息.](http://developer.android.com/reference/android/graphics/Color.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T08:30:06.233

If you want to use partial transparency, this would help you while setting your color codes.

2 hex characters can be appended to any hex color code. The first 2 characters in an 8-digit hex color code represents its opacity in Android.

The 2 hex characters can range from 00 to FF. For example-

*   Normal opaque black hex- "#000000"
*   Fully transparent black- "#00000000"
*   Fully opaque black- "#FF000000"
*   50% transparent black- "#80000000"

This way you can change any color to any level of transparency.

Use this to find the Hex prefix from a percentage-

Divide the % by 100 and multiply by 255 to get the decimal value. Convert the decimal to hex [here](http://www.binaryhexconverter.com/decimal-to-hex-converter) eg. for 50%, 50/100 * 255 = 128\. Using the link we get hex value 80.

Source- [http://zaman91.wordpress.com/2010/03/22/android-how-to-create-transparent-or-opeque-background/](http://zaman91.wordpress.com/2010/03/22/android-how-to-create-transparent-or-opeque-background/)

# r - 在 R 中读取二进制数据，而不是在 python 中解包

> ID：12256492
> 
> 赞同：0
> 
> 时间：2012-09-04T03:40:34.363
> 
> 标签：r

我学了 8 个月的 python，R 的新手，有一个二进制文件，我可以读取
二进制数据并将其更改为列表（在 python 中，数组是列表）。
数据文件（名为 test ）位于：
[https](https://www.box.com/s/0g3qg2lqgmr7y7fk5aut)
://www.box.com/s/0g3qg2lqgmr7y7fk5aut 结构为：
每 4 个字节是一个整数，因此在 python 中使用 unpack 读取它

```
import struct
datafile=open('test','rb')
data=datafile.read(32)
result=[]
while  data:
    result.append(list(struct.unpack('iiiiiiii',data)))
    data=datafile.read(32) 
```

如何读取 R 中的二进制数据？

## Paul Hiemstra 帮助我完成了 R 中的代码，这让我受益匪浅。

```
datafile="test"
totalsize=file.info(datafile)$size
lines=totalsize/32
data=readBin("test",integer(),n=totalsize,size=4,endian="little")
result=data.frame(matrix(data,nrow=lines,ncol=8,byrow=TRUE))
colnames(result)=c(date,"x1","x2","x3","x4","x5","x6","x7") 
```

还有我想解决的问题。在这里，我用n=totalsize完全读取所有数据，如果数据很大，内存不够容纳，如何表达：从第1001个字节到第2000个字节读取数据？如果n=1000，表示从第1个到第1000个读取数据，如果n=2000，表示从第1个到第2000个读取数据，那么从第1001个到第2000个读取数据怎么样？R中是否有文件指针？当我读取第1000个二进制数据时，文件指针在第1000个位置，现在使用命令readBin（“test”，integer（），n = 1000，size = 4，endian =“little” ) 读取第 1001 到第 2000 的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T05:25:30.230

谷歌搜索`R read binary file`产生[以下链接](http://www.ats.ucla.edu/stat/r/faq/read_binary.htm)作为其第一个结果。底线是使用该`readBin`功能，在您的情况下，它看起来像：

```
file2read = file("test", "rb")
number_of_integers_in_file = 128
spam = readBin(file2read, integer(), number_of_integers_in_file, size = 4)
close(file2read) 
```

* * *

如果你不知道文件中的整数个数，你可以做一些事情，首先创建一个示例文件：

```
# Create a binary file that we can read
l = as.integer(1:10)
file2write = file("/tmp/test", "wb")
writeBin(l, file2write)
close(file2write) 
```

一种策略是高估要读取的整数数量 readBin 只会返回真正存在的数字。大小为 的向量`n`是预先分配的，因此请注意使其过大。

```
file2read = file("/tmp/test", "rb")
l_read = readBin(file2read, integer(), n = 100)
close(file2read)
all.equal(l, l_read)
[1] TRUE 
```

或者，如果您知道数字的大小（例如 4 个字节），则可以使用我编写的以下函数来计算存在的数量：

```
number_of_numbers = function(path, size = 4) {
  # If path is a file connection, extract file name
  if(inherits(path, "file")) path = summary(path)[["description"]]
  return(file.info(path)[["size"]] / size)
 }
number_of_numbers("/tmp/test")
[1] 10 
```

在行动：

```
file2read = file("/tmp/test", "rb")
l_read2 = readBin(file2read, integer(), n = number_of_numbers(file2read))
close(file2read)
all.equal(l, l_read2)   
[1] TRUE 
```

* * *

如果数据量太大而无法放入内存，我建议分块读取。这可以通过连续调用来完成`readBin`，例如：

```
first_1000 = readBin(con, integer(), n = 1000)
next_1000 = readBin(con, integer(), n = 1000) 
```

如果您想跳过部分数据文件，比如前 1000 个数字，请使用该`seek`功能。这比读取 1000 个数字、丢弃这些数字并读取第二个 1000 个数字要快得多。例如：

```
# Skip the first thousand 4 byte integers
seek(con, where = 4*1000)
next_1000 = readBin(con, integer(), n = 1000) 
```

# iphone - UITabBar 消失

> ID：12256496
> 
> 赞同：0
> 
> 时间：2012-09-04T03:40:42.673
> 
> 标签：iphone, ios, cocoa-touch, ios5

我需要在不使用 UITabBarController 的情况下实现选项卡式视图。我创建了一个视图并向其中添加了一个 UITabBar 并设置代码以动态地将子视图添加到视图中。当我在 willAppear 中添加第一个子视图时，标签栏不再可见。我以为新视图会覆盖它，所以我缩短了添加的视图，但随后模拟器底部仅显示空白。下面是我用 uiTabBar 从主控制器的 willAppear 调用的代码。我已经尝试过 insertSubView，也只是 addSubView 并且发生了同样的事情。

```
-(void)loadHomeViewController
{
    if(!self.homeViewController){
        self.homeViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"HomeView"];
        [self.view insertSubview:self.homeViewController.view aboveSubview:self.tabBar];
    }

    [self.view bringSubviewToFront:self.homeViewController.view];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:21:07.540

在和`UINavigationController`之间再加一个。:) `UITabBarController``UIViewController`

或者我认为这对你有帮助... [链接](https://stackoverflow.com/questions/12244816/prevent-uitabbar-to-hide-when-pushed/12244934#comment16413795_12244934)阅读评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:37:54.873

尝试 ：

```
-(void)loadHomeViewController
{
if(!self.homeViewController){
    self.homeViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"HomeView"];
    [self.view insertSubview:self.homeViewController.view belowSubview:self.tabBar];
} 
```

}

# entity-framework-4 - 错误：IEntityChangeTracker 的多个实例无法引用实体对象

> ID：12256502
> 
> 赞同：0
> 
> 时间：2012-09-04T03:41:55.303
> 
> 标签：entity-framework-4, asp.net-mvc-4

我想我根本没有得到这个上下文的东西......看看控制器的 Create 操作中的这个片段：

```
if (ModelState.IsValid)
{
    Individual target = db.Individuals.Where(i => i.ID == Target.ID).First();

    target.LocationId = Destination.ID;
    db.Entry(target).State = EntityState.Modified;
    db.SaveChanges();

    if (newPair != null)
    {
        db.Pairs.Add(newPair);
        db.SaveChanges();
    }
} 
```

第一个`SaveChanges();`工作正常，记录在数据库中更新。但是`.Add()`第二个之前的行`SaveChanges();`会导致错误`An entity object cannot be referenced by multiple instances of IEntityChangeTracker.`

`newPair``Pair`是上面几行创建的类的新实例，并且`db`是在控制器级别创建的我的数据库上下文的实例，如下所示：

```
public class MoveController : Controller
{
    private ShepherdContext db = new ShepherdContext();
...... 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T11:12:41.897

我是 MVC 和实体框架的新手。经过很多努力后我遇到了同样的问题这个解决方案对我有用。希望它对你们有用。

```
var mediaItem = db.MediaItems.FirstOrDefault(x => x.Id == mediaItemViewModel.Id);
    mediaItem.Name = mediaItemViewModel.Name;
    mediaItem.Description = mediaItemViewModel.Description;
    mediaItem.ModifiedDate = DateTime.Now;
    mediaItem.FileName = mediaItem.FileName;
    mediaItem.Size = KBToMBConversion(mediaItemViewModel.Size);
    mediaItem.Type = mediaItem.Type;

//db.Entry(mediaItem).State = EntityState.Modified;// coment This line
db.SaveChanges(); 
```

因为您正在从 db 读取整个对象并将其保存在当前上下文中，当您尝试修改实体状态时，它会告诉您已经有一个实体附加到当前上下文。只需调用保存更改它就会保存它。

# git - 使用 git，如何避免 rebase 和 push？

> ID：12256504
> 
> 赞同：4
> 
> 时间：2012-09-04T03:42:35.167
> 
> 标签：git, github

我认为关于 rebase 和 push 的唯一规则是

> 提交被推送到公共仓库后，不要变基和推送

但是，如果我们只使用`git push`or`git push origin <branch-name>`而从不使用`--force`or`-f`标志，那么它是否永远不会发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T03:55:43.147

如果您的公共回购是一个裸回购（意味着您可以直接在公共回购本身上重新建立任何东西），并且如果您将[git config](http://git-scm.com/docs/git-config) `receive.denyNonFastForwards`和设置`receive.denyDeletes`为 true，那么您应该没问题。

> 如果设置为 true，`git-receive-pack`将拒绝不是快进的 ref 更新。使用它来防止通过推送进行此类更新，**即使该推送是强制的**。
> 
> 如果设置为 true，`git-receive-pack`将拒绝删除 ref 的 ref 更新。使用它来**防止通过 push 删除此类引用**。

另请参阅“[有没有办法将 git 存储库配置为拒绝' `git push --force`'？](https://stackoverflow.com/questions/1754491/is-there-a-way-to-configure-git-repository-to-reject-git-push-force) ”。

请注意，例如，这些设置不能直接用于 GitHub 存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:47:16.130

确实（我认为）如果您不使用`--force`，远程仓库将永远不会处于“坏”状态，因此您不会意外地这样做。

但是，如果您重新设置已经在远程上的提交，您的本地存储库可能最终会处于无法推送到远程存储库的状态，而无需通过一些无论如何都会破坏重新设置点的体操。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T03:59:21.703

是的。不使用 --force 就不能变基然后推送远程跟踪分支。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T04:09:36.800

没有“-f”标志，它永远不会发生。
但是如果没有推送的能力，你会如何处理你的分支呢？

Rebase 主要是为了让**你的**分支历史保持良好和连续
当你是唯一一个合并到该代码中的人或者你只在本地执行它时，它是安全的。
否则，**请确保您在重新定位之前与所有其他贡献者在同一页面上**

# javascript - foreach $data 变量上的 ko.computed 写入函数

> ID：12256508
> 
> 赞同：0
> 
> 时间：2012-09-04T03:43:46.737
> 
> 标签：javascript, html, knockout.js

是否可以像这样在 foreach $data 变量上使用 ko.computed 写入函数？

```
<!-- ko foreach: activeAttributes.optionsSplitted -->
    <input type="text" data-bind="value: $data">
<!-- /ko -->

vm.activeAttributes.optionsSplitted = ko.computed({
    read: function(){
        return vm.activeAttributes().options().split("-*!*-");      
    },
    write: function(){
        alert("changed");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:51:14.847

问题是您计算出的 observable 只检测到数组的变化，`activeAttributes.optionsSplitted`. 文本框绑定到单个项目，因此由于您从未实际更改 的值`activeAttributes.optionsSplitted`，因此不会发出警报。

如果您希望能够做到这一点，您有几个选择。

绑定到您的输入的`change`事件，以便您可以在输入中的值更改时执行您想要的操作。

```
<input type="text" data-bind="value: $data, event: { change: $root.changed }"> 
```

（[小提琴](http://jsfiddle.net/jeff1203/4yKed/)）

* * *

或者，您可以将值映射到包含可观察属性的对象并在那里执行检查。您无法检测到对象本身的更改（任何更改都将被替换），因此您必须将值映射到具有可写计算属性的对象。

```
self.activeAttributes.optionsSplitted = ko.computed(function(){
    var options = self.activeAttributes().options().split("-*!*-");
    return ko.utils.arrayMap(options, function (option) {
        // does not work
        //return ko.computed({
        //    read: function () { return option; },
        //    write: function (value) { alert('changed'); }
        //});
        return {
            value: ko.computed({
                read: function () { return option; },
                write: function (value) { alert('changed'); }
            })
        };
    });
}); 
```

然后绑定到属性。

```
<input type="text" data-bind="value: value"> 
```

（[小提琴](http://jsfiddle.net/jeff1203/xp6S7/)）

* * *

当然，这些不是您唯一的选择，您可能还可以在这里做其他事情，但这些都是您想到的。

# java - 字符串的静态数组必须从数据库转换

> ID：12256509
> 
> 赞同：9
> 
> 时间：2012-09-04T03:43:56.803
> 
> 标签：java, android

这可能是一条很长的消息，但我想向所有 stackoverflow 用户提出一个明确的问题。我所做的是在绑定在我的gridview上的类中创建一个静态数组字符串

```
class ParserArrayList {
       //some declaration and codes here
      private String [] imageCaptionId = {
        "My First Medal",
        "You ...",
        "The ...",
        "Gimme ...",
        "A ...",
        "Seven ...",
        ".....City",
        ".... Madness",
        "Loyal...",
        ".....",
        "...",
        "Champion..."
        };
} 
```

并在公共类 ImageAdapter 上手动绑定它扩展 BaseAdapter

```
public class ImageAdapter extends BaseAdapter{
//some declaration and variables here
   public View getView(int position, View convertView, ViewGroup parent) {
        View v;

        ParserArrayList arrayImage = new ParserArrayList();
        String[] imagetext = arrayImage.getImageCaptionId(); 
        if (convertView == null) {
        //some stuff here
        }
//some stuff here
return v;
} 
```

如您所见，我正在调用 ParserArrayList 的 'imageCaptionId' 并将其发送到我声明 'imagetext' 的另一个数组字符串

一切正常，直到我发现数组'imageCaptionId'必须基于本地数据库我尝试使用此代码但我无法完成，因为

```
class ParserArrayList {
//added this code
public SQLiteAdapter sqlAdapter;
//and this one
public void showData(){
    sqlAdapter = new SQLiteAdapter(this);

    String str = "Select dTitle from achievement_tb where version =0 order by ID ASC;";

    sqlAdapter.openToRead();

    Cursor c =sqlAdapter.read(str);

    sqlAdapter.close();
}
} 
```

第一：我不知道如何将它绑定到数组

第二：我在 ParserArrayList 中创建了它，它给了我一个错误，说 **构造函数 SQLiteAdapter(ParserArrayList) 未定义**（这已经完成）

你能帮我吗先生

**编辑** 这是我想要完成的或我的逻辑

在我的 ParserArrayList 类上，我正在尝试添加此代码（我不知道这是否正确）

```
 public String[] showImageCaption(){
    String imageCaptionIds [];
    sqlAdapter = new SQLiteAdapter(mContext);

    String str = "Select dTitle from achievement_tb where version =0 order by ID ASC;";

    sqlAdapter.openToRead();

    Cursor c =sqlAdapter.read(str);     
    imageCaptionIds [c.getCount()];

    sqlAdapter.close();
    return imageCaptionIds;
} 
```

这给了我一个错误，说**语法错误，插入“AssignmentOperator Expression”以完成表达式**

现在在我的 ImageAdapter 扩展 BaseAdapter 这是我的代码

```
 public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        ParserArrayList arrayImage = new ParserArrayList(mContext);
        newArrayList2 = arrayImage.getArraylist();
        **String[] imagetext = arrayImage.showImageCaption();** 
        if (convertView == null) {  // if it's not recycled, initialize some attributes
             LayoutInflater li = getLayoutInflater();
             v = li.inflate(R.layout.medal_grid, null);
        }
        else
        {
             v = convertView;
        }
        TextView tv = (TextView)
        v.findViewById(R.id.grid_item_label);
        **tv.setText(imagetext[position]);**
        ImageView iv = (ImageView)v.findViewById(R.id.grid_item_image);
        iv.setImageResource((Integer) newArrayList2.get(position));
        return v;
    } 
```

我的逻辑是我将它绑定到 ParserArrayList 内的 String 数组（它将在其中返回 imageCaptionIds）并将其设置在 textview

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:28:19.807

我不明白第一个问题，但第二个很容易。

您需要将 Context（或扩展 Context 的类，如 Activity）传递给`new SQLiteAdapter()`. 只需更改您的 ParserArrayList 以匹配此：

```
public class ParserArrayList {
    Context mContext;
    ...

    public ParserArrayList(Context context) { 
        mContext = context;
        ... 
    }

    public void showData(){
        sqlAdapter = new SQLiteAdapter(mContext);
        ...
    }
} 
```

在您的 Activity 中，可能是 onCreate()，只需调用：

```
 ParserArrayList pal = new ParserArrayList(this); 
```

* * *

我将尝试回答第一个问题。为什么**必须**将您的 String 数组放入 a 中`SQLiteDatabase`？An`ArrayAdapter<String>`非常适用于字符串数组......为什么这样的东西不起作用？

```
public class ImageAdapter extends ArrayAdapter<String> {
    //some declaration and variables here

    public View getView(int position, View convertView, ViewGroup parent) {
        View v;

        String imagetext = getItem(position); // returns the caption at index
        if (convertView == null) {
            //some stuff here
        }

        //some stuff here
        return v;
    }
} 
```

声明：

```
private String [] imageCaptionId = { ... };
ImageAdapter adapter = new ImageAdapter(this, R.layout.awesome, imageCaptionId); 
```

# mysql - View 的 SELECT 包含 MySQL 语句的 FROM 子句中的子查询

> ID：12256515
> 
> 赞同：3
> 
> 时间：2012-09-04T03:45:02.633
> 
> 标签：mysql, sql, mysql-error-1349

我有一个关于在 MySQL 工作台中创建视图的询问。保存时出现错误：“视图的 SELECT 在 FROM 子句中包含子查询”。

这是我的声明的副本：

```
CREATE VIEW viewMorningReport AS 
select z.AllocationDate, z.LocationName, z.StationName, a.00000100, b.01000200, c.02000300  from
(SELECT DISTINCT AllocationDate, LocationName, StationName FROM satsschema.employeeslot
where LocationName = 'T2 PML'
and StationName is not null) z
left outer join 
(SELECT AllocationDate, LocationName, StationName, EmpName AS '00000100' FROM     satsschema.employeeslot
WHERE Assigned = true
and (EmpTime = '00:00:00' && EmpTime < '01:00:00')) a
on z.LocationName = a.LocationName and z.StationName = a.StationName
left outer join
(SELECT  AllocationDate, LocationName, StationName, EmpName AS '01000200' FROM    satsschema.employeeslot
WHERE Assigned = true
and (EmpTime = '01:00:00' && EmpTime < '02:00:00')) b
on a.LocationName = b.LocationName and a.StationName = b.StationName
left outer join
(SELECT  AllocationDate, LocationName, StationName, EmpName AS '02000300' FROM satsschema.employeeslot
WHERE Assigned = true
and (EmpTime = '02:00:00' && EmpTime < '03:00:00')) c
on b.LocationName = c.LocationName and b.StationName = c.StationName 
```

知道哪里出了问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:52:21.913

正如[官方文档所说](http://dev.mysql.com/doc/refman/5.0/en/view-restrictions.html)

> E.4。视图限制
> 
> (..)
> 
> 子查询不能在视图的 FROM 子句中使用。

一种选择是为每个子查询创建一个视图。另一个，是修改你的视图，避免`subquerys`在`from`子句中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T10:35:11.403

您可以创建子查询的视图并在主视图中调用他

# regex - 正则表达式：如何在字符串中找到这样的模式？[x,y]

> ID：12256516
> 
> 赞同：0
> 
> 时间：2012-09-04T03:45:03.200
> 
> 标签：regex

我想找到类似 [x,y] ， (x,y),(x,y],[x,y) 之类的东西。一个数字范围，x,y 是数字。处理它的正则表达式的正确模式是什么？非常感谢。我心中的这种模式是 '[[(][0-9]+,[0-9]+[])]'，但在 linux grep 中不正确，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:47:45.973

你可以使用这个：

```
/[[(]\d+,\d+[\])]/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:52:54.480

如果数字之间允许空格，逗号和括号，浮点数和负数是允许的（PCRE 正则表达式）：

```
/[[(]\s*(-?\d+(\.\d+)?)\s*,\s*(-?\d+(\.\d+))?\s*[\])]/g 
```

第 1 组将捕获第一个数字，第 3 组将捕获第二个。

# asp.net - VS2012 中的实体框架问题 - 重命名属性不粘

> ID：12256519
> 
> 赞同：3
> 
> 时间：2012-09-04T03:45:25.947
> 
> 标签：asp.net, asp.net-mvc, visual-studio, entity-framework, visual-studio-2012

我试图在 VS2012 中使用管理 MVC4 项目、网站 MVC4 项目和通用实体框架 dll 项目创建一个新项目。

我使用了现有的数据库和数据库并从中生成了我的实体。我更新了一些关系属性的名称并保存了。然后，我将实体框架项目的引用添加到我的两个 MVC4 项目中，将实体框架连接字符串从 App.config 文件复制到每个 Web.config 文件，并确保我引用了相同的 System.Data.Entity 程序集所有 3 个项目。

我尝试使用实体框架添加 MVC 控制器并收到错误。该错误表明我的实体没有具有某些名称的属性。碰巧它抱怨的名字是我在实体设计器中重命名的名字。所以我运行了 Clean Solution，重建，并尝试再次添加控制器......同样的错误。

由于它抱怨它没有具有某些名称的属性，因此我使用 ILSpy 来检查生成的程序集。果然，它没有继承我在实体设计器中分配给属性的名称。下面是 Designer 界面的照片，显示我重命名了类（是的，我保存了它），尝试添加 MVC 控制器时收到的错误消息，以及 ILSpy 输出显示输出中的属性未正确重命名部件。

![实体设计器、错误和 ILSpy 输出的屏幕截图](../Images/ffd2c3a2a048705b772375dd08a002f4.png)

这是一个错误吗？难道我做错了什么？

* * *

更新：当我对 .edmx 设计进行更改时，似乎 .tt 文件不会自动触发和重新生成实体。当我保存 edmx 时，不确定我需要做什么才能让它们自动运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:03:25.570

当 EDMX 不在项目目录的根目录中时，报告了导致此问题的错误[。](http://entityframework.codeplex.com/workitem/453)当您将 EDMX 放入子文件夹时，您必须手动运行自定义工具来重新生成类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:53:15.143

这已在今天发布的 VS 2012 Update 1 中修复。您可以从以下网址获取它：http: [//www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)

# java - Aviarc 中 aviarc.engine.aviarcData 的默认/故障转移值

> ID：12256521
> 
> 赞同：2
> 
> 时间：2012-09-04T03:45:59.067
> 
> 标签：java, aviarc

在大多数 Java EE servlet 容器中，似乎有一种不同的方法来设置特定于部署的变量。（而且为每种容器类型学习或重新学习它是很痛苦的......Tomcat'Catalina config'，Weblogic DeployPlan.xml 变量，Websphere......等等）。

为什么不将 Aviarc 设置为在 aviarc.engine.aviarcData 中查找设置的值，如果存在就使用它，但如果找不到值则回退到 /var/aviarc/aviarc-data/。（或者有一个机制'没有 aviarcData 设置...检查 /var/aviarc/.... 检查 /var/opt/aviarc/...'）

这样，如果您很乐意在 /var/aviarc/ 中安装 Aviarc，那么可以在任何 servlet 容器中启动 aviarc.war，而无需进一步了解变量是如何设置的。

[请注意，在 Windows 中，路径 C:/var/aviarc/ 似乎可以仅使用 /var/aviarc/ ...至少在 Windows 7 中调用。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:47:30.220

这可以通过简单地打开 aviarc.war 文件并在 web.xml 文件中设置值来完成。

适用于 WebLogic，这是我的直接问题。

# ruby - "[^"]*" 和 ".+" 有什么区别

> ID：12256532
> 
> 赞同：2
> 
> 时间：2012-09-04T03:47:52.243
> 
> 标签：ruby, regex, cucumber

在黄瓜步骤定义中使用以下两个语句有什么区别？当我在 Rubular 中测试它们时，它们都适用于我能想象到的所有情况。在第二种情况下，我的语法突出显示更可能看起来不错（没有额外的双引号来搞砸）。

即使在 Stack Overflow 语法高亮显示中，它也会一开始就搞砸了。更常见的第一个示例的优点是什么？

```
Given /^My name is "([^"]*)"$/ do |myname|
Given /^My name is "(.+)"$/ do |myname| 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T04:02:39.463

**[^"]***表示 N (N>=0) 个字符，除了**"**

**.+**表示 N (N>0) 个字符，包括**"**

如果主题超过 1 个字符，并且没有引号 ( **"** )，则两个正则表达式模式是相等的。

但是，考虑这个字符串：`My name is "special_name_contain_"_laugh"` 再次运行你的模式，它们不一样:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T03:51:56.363

当提供以下内容时，第一个不会中断：

```
My name is "Henry James" and some other condition is "something else" 
```

第一个正则表达式将带引号的字符串中的字符限制为非引号字符 - 因此它只会拾取`Henry James`. 第二个正则表达式匹配一个引号字符，后跟*其他任何*字符（包括其他引号字符），然后是一个结束引号字符 - 所以`myname`在第二种情况下是：

```
Henry James" and some other condition is "something else 
```

这意味着您的测试用例中只能有一个带引号的值 - 这比第一个正则表达式的限制更具限制性（您只能有不包含引号字符的带引号的值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T03:56:53.390

我不是红宝石大师，但是第一个正则表达式的意思是：

*   `^`线的开始
*   `My name is "`后跟 a 的文字字符串`"`
*   `(`启动捕获组
*   `[`开始一个字符类
*   `^"`在字符类中，`^`表示“不”，所以在这种情况下，它意味着除了 a`"`
*   `]`字符类结束
*   `*`前面的任意数量，*包括 0 个匹配项*
*   `"`引号字符
*   `$`行结束

第二个，一切都和上面一样，除了`[]`你有的字符类：

*   `.`“任何字符”
*   `+` *上述一项*或多项

`+`和之间的区别在于`*`，`+`至少需要前面的一个，但`*`如果前面的为零，也将匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T03:57:51.843

`[^"]`表示任何字符，除了`"`

`.`表示任何字符。

`*`表示匹配任何时间包括 0。

`+`表示至少匹配 1 次。

# ruby-on-rails - 使用 Minitest 测试控制器

> ID：12256533
> 
> 赞同：14
> 
> 时间：2012-09-04T03:47:54.023
> 
> 标签：ruby-on-rails, testing, rspec, rspec-rails, minitest

我正在尝试查找使用 Minitest 测试控制器的示例，但我只找到了几个，并且只需验证渲染了什么模板并返回“成功”。这对我来说似乎没有多大帮助。Minitest 是否用于测试控制器？

Railscast ( [http://railscasts.com/episodes/327-minitest-with-rails](http://railscasts.com/episodes/327-minitest-with-rails) ) 和我发现的其他几篇文章似乎使用 Minitest 进行模型测试和使用 Capybara 进行集成测试。

控制器测试呢？可以用 Minitest 测试它们吗？如果是这样，是否有任何实际测试这些操作的真实示例？经过数小时的搜索，我找不到任何东西，这似乎很奇怪。

我知道这很模糊，但我正在尝试决定是否应该使用 RSpec 或 Minitest，但不知道如何使用 Minitest 真正测试控制器，我什至没有看到它是如何真正成为一种选择，但我继续阅读一些关于它的普遍好评。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T04:41:02.707

是的，您可以使用 Minitest 来测试控制器。使用 Minitest 测试控制器与使用 Test::Unit 测试控制器没有什么不同。支持您找到的任何示例，例如 Rails 指南。

[http://guides.rubyonrails.org/testing.html#functional-tests-for-your-controllers](http://guides.rubyonrails.org/testing.html#functional-tests-for-your-controllers)

# ios - 如何在核心数据中设计树状数据结构

> ID：12256536
> 
> 赞同：0
> 
> 时间：2012-09-04T03:48:19.343
> 
> 标签：ios, core-data, tree

我有一个名为“类别”的实体和一个名为“项目”的实体。类别可能有一个或多个子类别或有一个或多个项目。

这是我设计的。

![在此处输入图像描述](../Images/3512f5f6ebdbb908d8cf7fd37b97c3f5.png)

但我有一个特殊的要求。如果类别有项目，则不会有子类别。我不知道如何在我的模型设计中做到这一点。

任何建议，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:37:12.850

据我所知，没有办法在数据模型中对此进行建模。在创建子类别之前，您必须简单地检查项目。

此外，在删除项目时，检查它们是否留下任何带有（也是空的）子类别的空类别。

# jquery - 使用 Jquery 查找 XML 元素值

> ID：12256547
> 
> 赞同：4
> 
> 时间：2012-09-04T03:49:38.487
> 
> 标签：jquery, xml, ajax

我有一个 XML 文件，我需要使用 Jquery 和 Ajax 查找特定 PK 的项目到目前为止我了解了该对象，但我有两个问题：

1.  有比循环查找 pk 值更好的主意吗？
2.  XML 很大，我需要知道是否有比将其加载到内存中更好的查询方法，XSLT 是否有更好的帮助？或者有没有比jquery做得更好？

这是我的代码

```
$.ajax({
    url: 'xml/products.xml',
    dataType: 'html',
    success: function(xml) {
        $(xml).find('pk').each(function() {
            if ($(this).text() == "1")
            //do something
        });
    }
}); 
```

这是我的xml

```
<products>
<item>
    <pk>1</pk>
    <name>test</name>
</item>
<item>
    <pk>2</pk>
    <name>test2</name>
</item>
<item>
    <pk>3</pk>
    <name>test3</name>
</item>
<item>
    <pk>4</pk>
    <name>test4</name>
</item>
</products> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T06:29:21.053

首先，您必须编写正确的 XML 字符串，就像您必须完成/结束最后一个开始的相同标签一样。在上面的示例代码中，您在关闭时犯了错误。这是错误的 xml 语法。请进行以下更正： 1 测试

在这里，我制作了用于解析 XML 数据或标签的示例箱，而不是 Ajax，我只在按钮单击事件上解析 xml 数据，因为在箱上 Ajax 调用无法调用外部文件。

这是**演示：** [http ://codebins.com/bin/4ldqp7u](http://codebins.com/bin/4ldqp7u)

**HTML**

```
<div>
  <input type="button" id="btnxml" value="Get XML Data" />
  <input type="button" id="btnreset" value="Reset" style="display:inline"/>
  <div id="result">
  </div>
</div>
<div id="xmldata">
  <products>
    <item>
      <pk>
        1
      </pk>
      <name>
        test
      </name>
    </item>
    <item>
      <pk>
        2
      </pk>
      <name>
        test2
      </name>
    </item>
    <item>
      <pk>
        3
      </pk>
      <name>
        test3
      </name>
    </item>
    <item>
      <pk>
        4
      </pk>
      <name>
        test4
      </name>
    </item>
  </products>
</div> 
```

**查询：**

```
$(function() {
    $("#btnxml").click(function() {
        var xml = "<rss version='2.0'>";
        xml += $("#xmldata").html();
        xml += "</rss>";
        var xmlDoc = $.parseXML(xml),
            $xml = $(xmlDoc);

        var result = "";
        if ($xml.find("item").length > 0) {

            result = "<table class='items'>";
            result += "<tr><th>PK</th><th>Name</th></tr>";

            $xml.find("item").each(function() {
                result += "<tr>";
                result += "<td>" + $(this).find("pk").text() + "</td>";
                result += "<td>" + $(this).find("name").text() + "</td>";
                result += "</tr>";
            });

            result += "</table>";
            $("#result").html(result);
        }

    });

    //Reset Result 
    $("#btnreset").click(function() {
        $("#result").html("");
    });

}); 
```

**CSS：**

```
#xmldata{
  display:none;
}
table.items{
  margin-top:5px;
  border:1px solid #6655a8;
  background:#55a5d9;
  width:20%;
}
table.items th{
  border-bottom:1px solid #6655a8;
}
table.items td{
  text-align:center;
}
input[type=button]{
  border:1px solid #a588d9;
  background:#b788d9;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7u](http://codebins.com/bin/4ldqp7u)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:52:30.340

至少，您可以使用比“pk”更具体的查询。在这个例子中，`$(xml).find("products item pk")`应该更快。

# java - parseInt 导致 android 应用程序崩溃

> ID：12256548
> 
> 赞同：3
> 
> 时间：2012-09-04T03:49:51.817
> 
> 标签：java, exception, crash, parseint, value-of

我最终想把这个程序变成一个频率可调的频闪灯。但是，现在我只是想弄清楚基础知识。每次我使用 parseInt 时，应用程序都会崩溃。在这段代码中，我在 strobe() 方法中使用它，但我尝试在其他地方使用它。我也尝试用它来创建一个变量。它们都以相同的结果结束（应用程序崩溃）。谁能解释为什么会这样？

```
EditText box1, box2;
Button toggle;
int firstNum;
String string1;
Camera cam;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    makeVariables();

    toggle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            strobe();
            }
    });

}

private void  makeVariables(){
    box1 = (EditText)findViewById(R.id.editText1);
    box2 = (EditText)findViewById(R.id.editText2);
    string1 = box1.toString();
    string2 = box2.toString();
    toggle = (Button)findViewById(R.id.button1);
}

private void turnOnLight(){
    cam = Camera.open();
    Parameters params = cam.getParameters();
    params.setFlashMode(Parameters.FLASH_MODE_TORCH);
    cam.setParameters(params);
    cam.startPreview();
    cam.autoFocus(new AutoFocusCallback(){
        public void onAutoFocus(boolean success, Camera camera) {
        }

    });
}
private void turnOffLight(){
    cam.stopPreview();
    cam.release();
}
private void strobe(){
    Thread timer = new Thread(){
        public void run(){
            turnOnLight();
            try{
                    sleep(Integer.ParseInt(box1.toString()));
            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                turnOffLight();
                    }
                }
        };
    timer.start();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:57:09.767

你想要`box1.getText()`，没有`box1.toString()`。

* * *

从[toString() 上的Android文档](http://developer.android.com/reference/java/lang/Object.html#toString%28%29)：

> 默认实现等价于以下表达式：

```
getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

这将（显然）不会返回可以解析为整数的东西，从而创建您的 NumberFormatException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:57:23.307

您需要处理如果输入字段为空或不是数字时发生的 NumberFormatException。

此外，您应该使用 getText() 而不是 toString()。toString() 方法通常返回类似“EditText@70AF5”的内容，这会导致未捕获的 NumberFormatException，并最终导致您的应用程序崩溃。

```
try {
    sleep(Integer.parseInt(box1.getText()));
} catch (NumberFormatException e) {
  // do something else, or nothing at all.
} 
```

# java - 常见的网络通信异常

> ID：12256549
> 
> 赞同：2
> 
> 时间：2012-09-04T03:50:14.457
> 
> 标签：java, android

我正在为 Android 构建服务总线，我想区分硬异常和网络问题引起的异常。连接断开等。我最初是在捕获 IOException，但这显然太宽泛了。其中一些将是设备本地的真实文件系统问题。

现在我有 SocketException 和 ProtocolException，虽然后者可能不符合条件。在移动活动的正常过程中，您还可能期待什么？

# c - 如何在 C 中为虚拟文件系统创建一个大型二进制文件？

> ID：12256550
> 
> 赞同：0
> 
> 时间：2012-09-04T03:50:17.033
> 
> 标签：c, file-io, vfs

基本上在我的项目中，我必须使用 gcc 在 unix os 上创建一个 VSF。我已经制作了由元块、包含文件描述符和文件块的标头组成的体系结构。现在，如果我必须创建一个 1 GB 的文件系统，我假设我的元数据将占用 250 KB，标题将占用 1 MB，其余部分将分配给我的文件块。因为我只创建二进制文件，所以我使用 fread/fwrite 函数将块的结构写入二进制文件。现在我想将 1 GB 的大小传递给我的函数，该函数将创建不同的块。现在我的问题是如何使用 fwrite 函数创建给定大小的不同块，以便相应地分配所有 1GB 空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:53:52.693

fwrite 函数的签名是

```
fwrite(const void * restrict ptr, size_t size, size_t nmemb,
         FILE * restrict stream); 
```

您只需要选择 size*nmemb = 1G 的数字。

如果我的问题错了，请发表评论。

# google-maps - 设置 Google Geocoder 结果的准确性

> ID：12256557
> 
> 赞同：1
> 
> 时间：2012-09-04T03:51:06.050
> 
> 标签：google-maps, google-api, geocoding

我使用从[http://www.phpmoot.com/php-get-latitudelongitude-from-an-address-with-google-map/](http://www.phpmoot.com/php-get-latitudelongitude-from-an-address-with-google-map/)获得的代码将纬度和经度值作为地理编码器结果。我想要的是将结果设置为“。”后面只有两位数。例如 137.3463566 为 137.34。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:55:23.140

与[**此答案**](https://stackoverflow.com/questions/12208840/how-to-set-precision-of-results-returned-by-google-maps-v3-api-directionsservice/12208981#12208981)相同。您无法控制 Google 向您发送的内容，但您可以丢弃不需要的内容。

您可以使用 toFixed()，如

```
var lat = map.getCenter().lat().toFixed(2); // keep only 2 decimals
var lon = map.getCenter().lng().toFixed(2); // keep only 2 decimals 
```

如果你想在 PHP 端对它进行舍入：

```
$lat = round($output->results[0]->geometry->location->lat,2);
$long = round($output->results[0]->geometry->location->lng,2); 
```

# java - 使用cmd运行java程序

> ID：12256559
> 
> 赞同：0
> 
> 时间：2012-09-04T03:52:15.567
> 
> 标签：java

我无法使用 cmd 运行我的 java

![在此处输入图像描述](../Images/2776cca4ad6f858c8eef157ab774ac54.png)

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:55:04.393

好吧，您必须在尝试之前对其进行编译`java Subset`。[这篇关于在命令提示符下创建、编译和执行 Java 源文件的教程](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)可能会对您有所帮助。作为快速更新，您可以考虑执行以下操作：

*   使用编译代码`javac`
*   编译成功后，使用`java`命令执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:08:02.617

只是检查一下，但是在 IMG 中说该文件在 Queue/src 中，但是您正在尝试从 Queue 中运行它。您是否尝试更改路径？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:55:23.770

类路径中没有`Subset`类。Netbeans 将编译后的类放在`build`目录中，因此请尝试（正如我在[评论](https://stackoverflow.com/questions/12256559/run-java-program-using-cmd/12256584#comment16431669_12256559)中所述）...

```
java -cp build Subset 
```

确保您是通过 Netbeans 构建的。如果你没有，你也可以做...

```
javac -d build src/Subset.java 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T03:59:02.717

尝试**编译 Subset.java** .. 为此，您需要使用命令提示符转到您所在的目录`Subset.java`，然后执行以下命令。

**例如：**

`javac Subset.java`

然后，

`java Subset`

# java - 在hibernate中过滤引用的属性

> ID：12256560
> 
> 赞同：0
> 
> 时间：2012-09-04T03:52:17.710
> 
> 标签：java, hibernate, hibernate-criteria

我有一个`StateMachine`表，其中包含键值对模型中的所有状态，例如：

stateId 州名

1 发起 2 开始

```
class DeviceStates  {

    private int deviceStateId;
    private String deviceStateName;

} 
```

我在设备表中引用了这个 StateMachine 表

```
class Device   {

   private Integer deviceId;
   private String serialNum;
   private Date lastModifiedDate;
   private DeviceStates deviceStatesByDeviceStateId;

} 
```

我必须从 Device 表中过滤掉几个 DeviceStates 进行搜索。请帮助我如何编写我使用的标准

> 应该能够从 Device 中过滤掉一些 DeviceStates

.

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:55:29.023

```
Criteria c = session.createCriteria(Device.class, "device");
c.createAlias("deviceStatesByDeviceStateId", "state");
c.add(Restrictions.in("state.id", setOfAcceptedStateIds)); 
```

如果类被命名`DeviceState`（因为类的每个实例是一个且只有一个状态），并且如果该字段被命名`state`而不是`deviceStatesByDeviceStateId`.

# javascript - JavaScript Canvas 库速度慢，不使用 GPU？

> ID：12256562
> 
> 赞同：1
> 
> 时间：2012-09-04T03:52:21.250
> 
> 标签：javascript, html, graphics, canvas

我正在开发一种图形流程图类型的应用程序，其中我将用户可以拖动的“模块”链接在一起，什么不能。我正在使用 draw2d 之类的库（例如，它使用 raphael.js），它们使用 SVG 和 HTML5 画布来绘制图形。

但是，我什至还没有达到我认为的“压力”水平，而且它在我的浏览器中运行速度非常慢。当我拖动模块（蓝色框）时，感觉就像每秒 10 帧，甚至更少。屏幕截图显示我在屏幕上的内容：

![我的应用程序的示例截图。 拖动大矩形真的很慢..](../Images/f836302d6ed1f9bc5fc7412d45989f16.png)

在我的笔记本电脑上，我有一个 AMD 提供的系统监视器，显示我的 CPU 内核和 GPU 的使用百分比。当我拖动对象时，我的 CPU 内核（全部 4 个）被使用到最大，但 GPU 根本没有被使用。

基于图形的 Web 框架是否不使用 GPU？鉴于我的应用程序正在尝试做什么以及它目前在性能方面的糟糕状态，我是否可能必须找到一个使用 openGL 或其他东西的新图形库？这样的事情存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:58:12.480

这实际上取决于库和使用的浏览器。如果您使用 chrome，第一步是转到 chrome://gpu 并查看为 GPU 加速启用了哪些功能。那么它是使用标准的画布绘图功能还是实现自己的软件渲染功能，它完全依赖于2D框架库。

# perl - 如何使用 Perl 的 Mail::MboxParser 删除电子邮件？

> ID：12256565
> 
> 赞同：1
> 
> 时间：2012-09-04T03:52:29.513
> 
> 标签：perl, email

如果电子邮件得到处理，我想从 mbox 中删除一些邮件。使用 perl Mail::MboxParser 库如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:58:55.590

Mail::MboxParser 在它的描述中说它给了你对 mbox 文件*的只读*访问权限，这意味着它不能删除任何东西。您将需要使用可以实际重写 mbox 文件的模块，例如[Mail::Box](http://p3rl.org/Mail%3a%3aBox)或[Email::Delete::Mbox](http://p3rl.org/Email%3a%3aDelete%3a%3aMbox)。

# android - jar 与多库项目冲突

> ID：12256566
> 
> 赞同：0
> 
> 时间：2012-09-04T03:52:41.807
> 
> 标签：android, jar, shared-libraries

我的项目包括一些图书馆项目。弹出一个错误。

“此时所有版本的库必须相同。”

我发现这些库项目使用 android-support-v4.jar。

有谁知道如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T04:07:32.603

请转到主项目的 libs 文件夹，并将 android-support-v4.jar 文件复制/替换到所有附加到项目库项目的 libs 文件夹中。它应该解决图书馆冲突问题。

# excel - 如何编辑录制的宏程序，以便在我更改导入的输入文件时识别并获取最后一个值？

> ID：12256572
> 
> 赞同：1
> 
> 时间：2012-09-04T03:53:27.627
> 
> 标签：excel, excel-2003, vba

我为一个包含 7 张工作簿的工作簿录制了一个宏。两张表从许多文本文件中导入数据并按顺序排列。其他表格使用此数据和给定的其他一些公式，并生成带有多项式方程的图表。所以宏程序相当大。我有看起来像这样的数据

```
 A   B   C   D   E
R8    0   #   *   @   $
R9   0.05 #   *   @   $
R10  0.1  #   *   @   $
.     .   .   .   .   .
.     .   .   .   .   .
.     .   .   .   .   .
R108 5.0  #   *   @   $ 
```

上述数据中：
第8行到第108列A、B列是导入数据
，C、D、E由公式给出。

我的问题是我在导入的 A 列（0~5）中没有相同的数据。

数据不断变化，如 0~12、0~16 和 0~40。所以最终的行号也每次都会改变。因此，每次数据更改时，我都需要为所有其他数据记录宏。

我可以编辑我记录的宏，使其不会停在第 108 行（或 5.0），而是让它停在作为输入给出的最后一个值（比如“R88”或 40.0 或“R168”或 16.0 ETC。）？

此外，第 8 行中给出的 C、D 和 E 中给出的公式应该扩展到作为输入给出的最后一行。

例如，假设我在 sheet2 的 A 和 B 列中导入具有 0~40 或 0~16 值的文本文件。现在我希望工作表 1 第 8 行 A 和 B 列中的这些值以及 C、D 和 E 列中给出的相应公式应该延伸到第 88 行或第 168 行。工作表 1 中的值必须随着变化发生而变化导入的文本文件与行数或递增的步长值无关。

```
 A   B   C   D   E                    A   B   C   D   E
R8     0   #   *   @   $             R8     0   #   *   @   $
R9    0.2  #   *   @   $             R9    0.25 #   *   @   $
R10   0.4  #   *   @   $             R10   0.5  #   *   @   $
.      .   .   .   .   .             .      .   .   .   .   .
.      .   .   .   .   .             .      .   .   .   .   .
.      .   .   .   .   .             .      .   .   .   .   .
R88  16.0  #   *   @   $             R168  40.0  #   *   @   $ 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:32:16.753

如果您的数据**从**每张工作表上的同一个单元格开始，那么您可以使用一些基本的 Excel 选择命令来获取所有数据。

```
'Set up a range object.
Dim rng As Range
'Select the first cell in which data is going to be.  This example uses cell "A1".
Range("A1").Select
'The following line is equivalent to pressing Shift-End-DownArrow, which selects
'everything in the current column until an empty cell is encountered.
Range(Selection, Selection.End(xlDown)).Select
'The following line is equivalent to pressing Shift-End-RightArrow, which selects
'everything in the current row until an empty cell is encountered.
Range(Selection, Selection.End(xlToRight)).Select
'This selection is then a range containing all the continuous entries starting at cell A1.
'Set the Range variable to the current selection.
Set rng = Selection 
```

`Set`在为对象变量赋值时，在 VBA中使用关键字很重要。

将此数据粘贴到目的地后，您可以使用类似的方法来获取它所占据的范围，并使用以下函数来确定您应该将公式复制到哪里。

`Range.Column`返回范围中的第一列号。
`Range.Columns.Count`返回指定范围内的列数。
`Range.Row`返回范围中的第一行。
`Range.Rows.Count`返回范围内的行数。
在上述所有函数中，您将替换`Range`为您的实际范围对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T20:13:11.800

如果从文本文件中编译数据的代码是高效的，即工作表从单元格 A1 开始，不跳过任何行或列，并且没有超出预期数据范围的杂散非空白单元格，最简单的方法是：

```
Set rng = ActiveSheet.UsedRange 
```

或者

```
Set rng = ActiveSheet.Range("A1").CurrentRegion 
```

要指定从单元格 C8 到末尾的范围，用于填写公式：

```
With ActiveSheet.UsedRange
  Set rng = .Offset(7, 2).Resize(.Rows.Count - 7, 3)
End With 
```

如果公式已存在于单元格 C8:E8 中，则此

```
With ActiveSheet.UsedRange
  .Offset(7, 2).Resize(.Rows.Count - 7, 3).FillDown
End With 
```

# php - 从 Div id 中排除内容

> ID：12256575
> 
> 赞同：0
> 
> 时间：2012-09-04T03:53:57.440
> 
> 标签：php

我的 PHP 脚本可以从 div id 获取内容，但是过滤这个获取数据并排除它的一些具有这个 div id 的内容的方法是什么`<div id="navbar" class="n">`我已经尝试使用这个代码但它不工作

```
$regex = '#\<div id="navbar"\>(.+?)\<\/div\>#s';
preg_match($regex, $displaybody, $matches);
$match = $matches[0];
echo "$match";` 
```

要获取内容，我正在使用 HTML DOM Parser。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:56:58.953

使用正则表达式解析 html 通常是个[坏主意](https://stackoverflow.com/a/1732454/1515540)。您可以很好地选择带有 DOM 的节点：

```
$input = '<html> <body> some content <span class="a">b</span> <div id="navbar" class="n">find me <span class="a">b</span></div> </html>';

$doc = new DOMDocument;
$doc->loadHTML($input);
$navbar = $doc->getElementById('navbar');

$innerhtml = '';
foreach ($navbar->childNodes as $cn) {
    $innerhtml .= $doc->saveHTML($cn);
}
print $innerhtml; 
```

# playframework - 游戏中的路线 2 框架

> ID：12256577
> 
> 赞同：0
> 
> 时间：2012-09-04T03:54:08.613
> 
> 标签：playframework, playframework-2.0

我是玩2.0.3框架的新手。有没有办法让所有控制器和操作的路由文件中只有一个条目，如下所示：

/{控制器}/{动作} /控制器/动作

*   控制器将是任何控制器
*   行动将是任何行动

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:04:31.540

That approach doesn't fit the `type safety` - main idea of Play 2.0, so it's just suggested to create proper routes for each action also declaring the params with proper types to make sure that every route (also reverse route) always hits the required target action.

Of course you can also write own action for `sub-routing` where you can catch whole path ([Dynamic parts spanning several /](http://www.playframework.org/documentation/2.0.3/JavaRouting) ) and manually redirect to some action, however it still requires creating lot of common routes + lot of custom type validation in it etc, etc, so using original router is just faster and cleaner approach.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:01:18.447

为了类型安全（Play 2 中的路由已编译，因此您知道它们在编译时有效），不支持 catch all 路由。

您可以做到的唯一方法是将所有路由发送到单个控制器，然后从该控制器内重定向您的代码，但我认为这不适合您。

# bdd - 订阅电子通讯

> ID：12256578
> 
> 赞同：-1
> 
> 时间：2012-09-04T03:54:24.520
> 
> 标签：bdd, specflow

如何在 C# 中为以下 BDD 上的以下任务编写代码 - 测试以证明登录和注册链接出现在网站上使用 Specflow 后，我生成了一个框架代码，但是如何添加代码？有努尼特吗？故事 Q，能否生成代码以完成绿色测试通过？

作为会员，我希望能够订阅电子通讯，以便我定期了解退休金行业的发展接受标准背景：我是超级网站会员。订阅电子通讯需要会员登录会员在线部分 (=MOL)

当我在 eNewsletters 页面上时，将显示文本来解释如何订阅 eNewsletters

当我在电子通讯页面上时，将有一个登录 MOL 和注册 MOL 的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:43:25.640

不想变得粗鲁，但是您对 Specflow/BDD 有任何经验/知识吗？因为，看这个问题，你似乎没有。因此，我认为如果您在要求某人为您编写测试之前先研究一下，这将使您受益更多（您基本上在这里所做的事情）。有足够的文档和示例可供您从中获得此问题的答案。按照 YouTube 上的简短教程或类似的内容来帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:58:59.163

Specflow 允许您在 Given、when 和 then 语句中编辑包含您的规范的 xxx.feature 文件。当您保存该文件时，它会生成一个 xxx.feature.cs 文件，就像 WinForms 生成 xxx.designer.cs 文件一样。

如果您在功能文件中使用 VS 中的“导航到”(F12)，它将为您提供复制模板方法的选项，以便您在自己的代码中实现。这些可以简单地添加到项目中的任何公共文件中，并用 [Binding] 属性标记。

更多细节可以在这里找到[http://www.specflow.org/specflownew/ProjectSetupGuide.html](http://www.specflow.org/specflownew/ProjectSetupGuide.html)

# objective-c - 构建应用程序时不显示图像

> ID：12256579
> 
> 赞同：0
> 
> 时间：2012-09-04T03:54:45.493
> 
> 标签：objective-c, ios, xcode

在 Xcode 中，我只是想让图像显示在我的应用程序中。我尝试拍摄我之前在应用程序中使用过的图像并将其放入 uiimageview 中，但当我构建时，仍然没有任何显示。我尝试从应用程序中删除图像文件并将其放回那里，我尝试清理应用程序然后构建。我所做的一切都不起作用。我只是希望能够在视图中放置图像并让它显示出来！

![这是我的捆绑资源，它显示图像都在那里](../Images/a4f2dfaaea16d556d0770f984c93c5ac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:15:12.723

请检查您的图像是否已添加到您尝试构建的目标中。

有时，当您有两个目标时会发生这种情况，比如说一个用于开发，一个用于测试，并且仅在一个目标上添加图像。

请重新检查是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:23:07.593

图像可能未作为捆绑资源添加。为此，您应该转到您的`target`设置，然后`Build Phases`检查该图像是否出现在该`Copy bundle resources`部分中。如果没有，请按列表末尾的**+按钮添加它。**

我不知道为什么，但是在最新的 Xcode 中，如果您添加图像，将其删除，然后添加一个具有相同名称的新图像，则不会将其添加到`Bundle resources`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:00:46.553

最可能的是，您只是在图像名称中有错字`imageNamed:`-有时会发生这种情况）并且区分大小写-因此请仔细检查名称。

# c++ - 是否所有 using 指令都以与 using namespace std 相同的方式查看？

> ID：12256587
> 
> 赞同：0
> 
> 时间：2012-09-04T03:55:40.340
> 
> 标签：c++, coding-style, using-directives

我很容易养成了在标准标识符前面加上前缀`std::`而不是在`using namespace std;`. 但是，我已经开始接触 C#，并且我注意到添加任何必要的 using 指令是非常正常的，即，您会看到：

```
using System;
Console.Write("foo"); 
```

代替：

```
System.Console.Write("foo"); 
```

显然，正如我从关于这个主题的 C# 问题中发现的那样，这种用法来自于这样一个事实，即 C# 中的各个系统命名空间比 C++ 中的要小得多`std`，因此消除了与名称冲突相关的问题，因为有很多可能性较小（如果库使用名称冲突进行更新，您可以将其替换为完全限定名称），并消除与出现大量 Intellisense 选项相关的问题，因为名称空间小到足以处理。

那么问题是，如果这些是在 C# 中使用 using 指令的长期理由，那么 C++ 是否也是如此？将其应用于较小的第三方命名空间以及您自己的较小命名空间通常可以接受吗？

现在我意识到这可能会引起一些争议，我想借此机会要求它不会变成争论。一个好的答案应该包括一个基础，即优点或缺点，以及如何使用一种方式而不是另一种方式**真正**产生有价值的差异。

我问这个的原因是为了澄清这个问题，并可能消除在 C++ 中使用指令必须是一件坏事的观念。当然，如果需要，可以使用命名空间别名来减少较长的命名空间名称，如果需要，仍然可以使用完全限定的名称，但有时使用指令可以极大地简化访问某些成员，例如用户定义的文字运算符，据我所知，没有 ADL 的形式，这意味着您要么必须使用 using 指令，要么通过函数语法调用运算符方法，这首先破坏了使用运算符的整个目的。

例如，我有一个命名空间（包括一个表示键盘键的结构，以及作为可读替代访问方式的文字后缀：

```
"caps lock"_key.disable(); 
```

这里的问题是，除非您之前插入了`using namespace Whatever;`or `using Whatever::operator"" _key;`，否则代码将无法编译，这对用户来说是个坏消息。

使用指令在涉及或在标头中以这样的方式使用时会出现明显的问题`std`，它们会为该标头的用户带来不需要的额外内容，但是当包含在比包含标题？由于不必每次都键入每个限定符而节省的击键确实加起来了，并且借助当今的 Intellisense 功能，找出不合格标识符属于哪个命名空间就像将鼠标悬停在它上面一样容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:09:22.607

我认为在 C++ 中使用声明的规则相当简单：

1.  永远不要写“使用命名空间任何东西；” 在头文件的全局范围内，尤其是可能被其他程序重用的头文件（例如，在编写库时）。它用这个命名空间的符号污染了所有后续标头的全局范围，这违背了命名空间的全部目的，并且可能在以后产生不可预见的名称冲突。
2.  在 .cpp 文件和标头的内部范围（例如内联函数范围）中，您可以“使用”您想要的任何名称空间，因为它不会影响任何其他文件。只需做任何对您来说更方便的事情，并尝试在项目中保持合理一致。

编辑：对于 _key 问题，只需在其自己的命名空间中定义此运算符并告诉用户导入它。这样他们就不需要输入操作符声明。

```
namespace something {
class key { ... };
}
namespace key_suffix {
something::key operator"" _key() { ... }
}

// user code
void some_function() {
    using namespace key_suffix;
    "caps lock"_key.doSomething();
} 
```

# c++ - 以双向方式混合 Objective C++ 和 C++

> ID：12256590
> 
> 赞同：1
> 
> 时间：2012-09-04T03:56:09.117
> 
> 标签：c++, wrapper, objective-c++

假设我有两个目标 c++ 对象，每个对象都包装一个给定的本机 c++ 对象：
A，B = 目标 c++ 对象类型
Acpp，Bcpp = c++ 对象类型

在 B.mm

```
#import "Bcpp.h"
#import "B.h"
@interface B ()
{
    Bcpp myBcpp; // declare instance c++ variable of type Bcpp
}
@end 
```

毫米

```
#import "Acpp.h"
#import "A.h"
@interface A ()
{
    Acpp myAcpp; // declare instance c++ variable of type Acpp
}
@end

@implementation A
// method to return an instance of B from an instance of A (self)
- (B)GetBfromA
{
    Bcpp *bfroma = myAcpp.GetBfromA(); // return c++ object
    // How do i find the objective C++ object B from its wrapped c++ instance bfroma?

}
@end 
```

这样做的原因是我们有一个成熟的 c++ 数据结构，我们希望用客观的 c++ 对象包装它。是最好的方法吗？如果是，我们如何解决反向映射问题？

编辑：感谢早期响应者，但我在上面暗示了一个更棘手的情况。假设函数 GetBFromA() 返回一个已经声明的 Bcpp 实例（作为 B 实例的实例变量）。所以我持有一个指向 Bcpp 对象的指针，该对象本身就是 B 类型的目标 C++ 对象的实例变量。如何从 Bcpp 的实例中找到 B 的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:33:41.223

您可能需要做的是能够`B`从`Bcpp`. 所以`B`需要修改有一个`-initWithBcpp:`方法：

```
- (id)initWithBcpp:(Bcpp*)bcpp
{
    self = [super init];
    if (self != nil)
    {
        myBcpp = *bcpp;
    }
    return self;
} 
```

然后，在 中`GetBFromA`，您需要`B`从以下位置创建一个`Bcpp*`：

```
- (B*)GetBfromA
{
    Bcpp *bfroma = myAcpp.GetBfromA(); // return c++ object
    B* result = [[B alloc] initWithBcpp:bfroma];
    return result;
} 
```

# c++ - 为 MMO 游戏设计日志服务器

> ID：12256594
> 
> 赞同：2
> 
> 时间：2012-09-04T03:56:54.927
> 
> 标签：c++, logging, mmo

我是游戏服务器设计的新手，现在分配了一项任务来重构我们的日志服务器。我为游戏服务器和日志服务器之间的通信创建了一个类 Log。

```
class Log
{
    public:
        void    encode(Encoder& encoder) const;
        int     decode(Decoder& decoder);
    private:
        std::string sql_cmd;
} 
```

在游戏服务器上，有一个向日志服务器发送日志请求的类。

```
class LogHelper
{
public:
        static void LogItemChange(const GameShare::GameItem& item, const PackageChangeDetails& pcd);
        {
                Log log(get_item_change_sql(item,pcd);
                send_to_log_server();
        }

private:
        static std::string get_item_change_sql(const GameShare::GameItem& item, const PackageChangeDetails& pcd);
} 
```

问题是：

1.  我应该在游戏服务器上生成 sql 文本吗？如果在游戏服务器上生成sql文本，对游戏服务器的性能有影响吗？

2.  如果不在游戏服务器上生成 sql 文本，则应该在日志服务器上生成 sql 文本。我应该将 GameItem 和 PackageChangeDetails 实例数据发送到日志服务器，这会使日志服务器复杂化，有人有好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:49:36.007

如果日志的 SQL 是由游戏服务器生成的，那么几乎不需要任何日志服务器代码，因为它成为数据库管理器部分的通道，游戏服务器几乎肯定已经知道（尽管我想他们可能是不同的数据库），或者可以很容易地与之交互。

Log Server 应该是一个单独的组件，它以对您来说最方便的任何格式（性能、详细程度、大小等）进行日志记录，并且只要 API 足够灵活，就可以将其编写为可以替换底层实现在游戏服务器不知情的情况下。

通过将底层实现的完整知识与游戏服务器代码相结合，您不仅可以防止这种未来的工作，而且您还可能将大量工作放入游戏服务器的代码中，这些工作可以由日志服务器上的单独线程完成. 更不用说，通过向 SQL 开放 API，您将潜在的错误置于游戏服务器代码中，否则这些代码将被集中。

在设计面向对象系统时，前瞻性、替换驱动的方法是理想的。如果您可以避免耦合到除 API 之外的任何内容，那么您始终可以替换 API 下方的任何内容而不影响外部代码（忽略错误），但这需要考虑将其放入 API 以确保它具有足够的灵活性以供将来使用.

关于这一点，我强烈建议您将 Logging API 实现为纯虚拟接口，然后在其之上编写一个与数据库对话的实现，可能使用一个单独的实现来记录到文本文件（为了方便，本地在没有可访问数据库的情况下进行测试，如果这是一个问题）以及无所事事的实现。考虑到前两个，它应该有助于引导您进行更好的设计，并远离耦合。

这也可能导致您的其他类实现的一些基本接口（例如，`public: std::string to_log_string() const;`），然后 Logger 可以使用它来引入任何实现对象并快速将其转换为记录的消息。

这就是说，将日志相关的 SQL 放到 Log Server 中，而不是在 Game Server 中。游戏服务器不应该关心日志服务器除了一般的“日志记录”之外还做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:54:12.600

不要在游戏服务器上生成 SQL 文本。也不要在日志服务器上这样做。事后看来，SQL 应该*只有*准备好的语句。在运行时生成查询与在运行时生成索引一样疯狂。因此，将最终 SQL 文本的生成留给数据库。

因此，游戏服务器和日志服务器之间的 API 应该只包含您想要记录的变量，而不是执行此操作的代码。

这完全避免了 SQL 注入这一事实是一个附带好处。但这仍然是一个真正的好处。如果您记录的用户名一样多，那么您必须已经考虑 SQL 注入。

# android-contacts - 从联系人列表中获取姓名和号码

> ID：12256595
> 
> 赞同：0
> 
> 时间：2012-09-04T03:56:54.497
> 
> 标签：android-contacts

我尝试从联系人列表中获取电话号码和联系号码。这是我的代码来显示它......

```
public class ContactTutorialActivity extends Activity {
/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);

 startActivityForResult(intent, 1);                
  }
@Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (data != null) {
       Uri uri = data.getData();

       if (uri != null) {
           Cursor c = null;
           try {
               c = getContentResolver().query(uri, new String[]
                        { 
       ContactsContract.CommonDataKinds.Phone.NUMBER,ContactsContract.CommonDataKinds.Phone.TYPE },null, null, null);

     if (c != null && c.moveToFirst()) {

     String number = c.getString(0);

     int type = c.getInt(1);

    showSelectedNumber(type, number);

      }
        } finally {
       if (c != null) {
        c.close();
        }
       }
      }
    }
}
public void showSelectedNumber(int type, String number) 
{

    Toast.makeText(this, type + " " + number, Toast.LENGTH_LONG).show();      
}
} 
```

然后我想要的是，如果我选择它的任何列表，光标首先移动到并显示选定的名称和号码，但是当我运行程序时，光标移动到第一个 toast 消息 work.no 联系人姓名和号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:31:24.863

您可以获取联系人 Uri`ContactsContract.Contacts.CONTENT_URI`

这是类似的例子：

```
ContentResolver cr = getContentResolver();
         Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                 null, null, null, null);
         Log.e("phonenu",""+cur.getCount());
         if (cur.getCount() > 0) 
         {

        while (cur.moveToNext()) 
        {
            String id = cur.getString(
                         cur.getColumnIndex(ContactsContract.Contacts._ID));
        //String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
         //Log.e("contacts", name);
        if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            //Query phone here.  Covered next
            Cursor pCur = cr.query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                    null, 
                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                    new String[]{id}, null);
                    while (pCur.moveToNext()) {
                    // Do something with phones
                     name.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
                    number.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));

                    }
                    pCur.close();
        }}} 
```

另一个线程在[这里](https://stackoverflow.com/questions/3370628/retrieve-contact-phone-number-from-uri-in-android)

[在这里学习以了解更多信息](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)

# scripting - WebPICmd.exe 的返回代码/退出状态

> ID：12256596
> 
> 赞同：0
> 
> 时间：2012-09-04T03:57:06.360
> 
> 标签：scripting, web-platform-installer

有没有办法检测 WebPICmd.exe（WebPlatformInstaller 的命令行版本）的存在状态，以便我可以在我的脚本中使用它。

我需要知道特定产品的安装是否成功。（尝试安装PHP53，由于下载失败貌似随机失败）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:15:19.467

This can be detected using $LASTEXITCODE variable in PowerShell.

In dos mode it should be LASTERRORLEVEL.

Remember to check this variable immediately after running the WebPICmd.exe so that it's return code is not overwritten by something else down the line.

# sql - 在线和本地sql数据库同步

> ID：12256600
> 
> 赞同：3
> 
> 时间：2012-09-04T03:57:51.663
> 
> 标签：sql, sql-server, synchronization, microsoft-sync-framework

根据我的系统，我在局域网和在线数据库中维护了两个数据库。但是我想同步这两个数据库。我希望使用微软同步框架来做这件事。 **.http://msdn.microsoft.com/en-us/library/ee819079.aspx**

我可以使用这个同步本地和在线 sql db 吗？或任何合适的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:05:10.373

Sync Framework 专为偶尔连接的系统而设计，例如。一台可以每隔一天访问公司网络并更新其数据库的笔记本电脑，但在没有公司网络访问权限时也需要工作。Sync Framework 的配对通常是中央数据库（SQL Server）和设备（笔记本电脑、手机、平板电脑等）上的本地嵌入式 SQL Server Compact 或 SQL Express。

如果数据库始终是连接的（例如，两台服务器中的两个数据库，它们之间有 24x7 的连接，即使是通过 Internet），那么适当的技术就是复制。Merge或[Transactional](http://msdn.microsoft.com/en-us/library/ms151706%28v=sql.105%29)。[_](http://msdn.microsoft.com/en-us/library/ms151329%28v=sql.105%29.aspx) 从理论上讲，当预期断开连接时，复制也可以工作，但是 Sync Framework 在这方面要好得多，最重要的是 Sync Framework 不像复制那样强烈依赖 DNS 名称（对于偶尔连接的系统非常重要）。

同步数据库是一个模糊的术语，你必须考虑是要主从复制 shcme 还是主-主（后者*很难*实现），并且必须考虑要从数据库中复制*什么。*您还需要考虑以后是否会添加更多合作伙伴（要“同步”的更多数据库）。而且您现在必须*更加*小心[架构更改](http://msdn.microsoft.com/en-us/library/ms151870)。

# wcf - 比较自托管：WCF 与 HttpListener

> ID：12256602
> 
> 赞同：4
> 
> 时间：2012-09-04T03:57:51.973
> 
> 标签：wcf, asp.net-web-api, signalr, httplistener

我一直在研究在自托管应用程序中使用 ASP.NET Web API 和 SignalR 的可能性，我注意到 ASP.NET Web API 自托管实现使用 WCF，而 SignalR 自托管实现使用`System.Net.HttpListener`. 这使得想出一个组合的自托管解决方案变得有点困难，但这确实让我想知道为什么不同的项目团队会使用不同的方法。

每种方法的优点和缺点是什么？SignalR 不能使用 WCF 自托管，或者 Web API 不能使用 HttpListener 有什么特别的原因吗？

**编辑**：我知道 Web API 自托管提供了比 SignalR 更完整的堆栈，我的问题更多是关于为什么在实现自己的自托管解决方案时选择 WCF 实现而不是 System.Net.HttpListener。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:20:17.767

Web API 自托管提供了整个 HTTP 堆栈，因此它比 System.Net.HttpListener 丰富得多。

SignalR 使用它来纯粹为自己的目的打开一个通信窗口。所以是的，现在，你需要在不同的端口上并行运行它们。

未来，有了 OWIN，您将拥有一切。

* * *

编辑：实际上有一个类似于你在 SignalR github 上提出的问题，答案就是我刚才所说的 - [https://github.com/SignalR/SignalR/issues/277](https://github.com/SignalR/SignalR/issues/277)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T15:02:46.873

就像我们在同一页面上一样，Web API Self 主机使用的 WCF Self-host 确实在幕后使用了 HttpListener。但是，我想我可能发现了 WCF Self-host 的一个主要缺点。

我还没有确认这一点，但似乎当您使用 Web API Self Host 时，您提供的基地址不会直接转换为 HttpListener 前缀。看起来 WCF 翻译了主机的基地址和通配符。

这意味着 WCF 自主机将响应指定端口上的任何主机。这意味着您不能在同一端口上使用不同的主机名同时运行 Web API 自托管服务和 IIS。

这可能是 SignalR 决定废弃 WCF Self-Host 并直接使用 HTTPListener 的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T20:56:07.197

虽然您可以使用 WCF 堆栈自己托管服务，但您可能需要考虑“IIS 7.0 Hostable Web Core”。它的好处是在您的用户进程中运行 IIS。使用这种方法，您可以在同一个端口上运行多个应用程序，而与技术无关。

有兴趣的可以看看：

1.  [使用 IIS 7.0 Hostable Web Core 在您的应用程序中托管您自己的 Web 服务器](http://blogs.msdn.com/b/carlosag/archive/2008/04/14/hostyourownwebserverusingiis7.aspx)
2.  [创建托管 Web 核心应用程序](http://msdn.microsoft.com/en-us/library/ms689327%28v=vs.90%29.aspx)

这一切都假设您正在运行 Vista 或更高版本...

# android - android中persist.img的用途是什么？

> ID：12256604
> 
> 赞同：6
> 
> 时间：2012-09-04T03:57:59.200
> 
> 标签：android

在编译 Android 源代码时，我们可以看到正在创建一个名为**persist.img**的图像文件。它是什么以及它的用途是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-06T06:08:14.327

persist.img 是“persist”，其中包含设备出厂后不应更改的数据，例如：芯片（wifi、bt、摄像头等）的校准数据、证书和其他安全相关文件。当然，即使它是“持久的”，您仍然可以通过 fastboot 替换它，或者如果设备已植根，则进行更改，风险自负

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:12:56.067

它与 system.img、userdata.img、tombstones.img、recovery.img 等一起是 Android 构建的一部分。

如果你想修改构建，你会改变它。

# android - 使用 Twitter4j Android 转推

> ID：12256606
> 
> 赞同：5
> 
> 时间：2012-09-04T03:58:22.580
> 
> 标签：android, twitter, twitter4j

我正在尝试制作简单的应用程序 twitter，我使用 twitter4j 库，我得到了很好的教程，如何使用该库登录和发布 twitter。我的应用显示时间线并有转推按钮，我的问题是如何使用 twitter4j 库转推？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T04:02:45.510

您可以调用[`Status#retweet()`](http://twitter4j.org/en/javadoc/twitter4j/api/StatusMethods.html#retweetStatus%28long%29)或[`TwitterStream#retweet()`](http://twitter4j.org/en/javadoc/twitter4j/api/StatusMethods.html#retweetStatus%28long%29)使用原始推文 ID。

您也可以使用`Twitter#retweetStatus()`，例如：

```
Twitter twitter = new TwitterFactory().getInstance();
twitter.retweetStatus(idOfStatusToRetweet); 
```

# wpf - 具有行和列的 ListView

> ID：12256607
> 
> 赞同：0
> 
> 时间：2012-09-04T03:58:26.033
> 
> 标签：wpf, listview, rows

我在 WPF 中有一个 ListView。我有一个 ObservableCollection 作为 ItemsSource。我希望项目简单地从左到右流动，然后从左到右流动到下一行，等等。在大图标模式下创建一个 Windows 资源管理器，您可以在其中看到文件夹和文件作为网格中的大图标。

我正在使用基于 ListView 的第三方组件，因此我必须使用 ListView 方法来完成这项工作。

我该怎么做？

更新：这是我使用给定答案的代码：

```
<diag:NodeListView  Name="nodeListViewSources" Width="400" Margin="0,0,0,0" Background="Gray" SelectionMode="Single" SelectionChanged="nodeListView_SelectionChanged">
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
</diag:NodeListView> 
```

NodeListView 是从 ListView 派生的第三方类。也许这就是问题所在，但我认为它应该同样有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:05:51.730

您只需要将项目的面板更改为[WrapPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.aspx)。

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapPanel Orientation="Horizontal"></WrapPanel>
    </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:48:26.680

我能够联系到第三方组件供应商。原来我还需要添加以下内容：

ScrollViewer.Horizo​​ntalScrollBarVisibility="已禁用"

这与 WrapPanel 一起工作。谢谢大家...

# jquery - Jquery按价格和字母顺序排序

> ID：12256609
> 
> 赞同：0
> 
> 时间：2012-09-04T03:58:44.530
> 
> 标签：jquery, sorting

所以到目前为止我有这个：

[JSFIDDLE](http://jsfiddle.net/De8Ku/1470/)

而且我一生都无法弄清楚为什么价格无法正确排序？您会看到“6”出现在末尾而不是开头。

按字母顺序有效，但不知道为什么价格有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:10:23.583

这是因为您的排序函数不知道您要将 $6 视为“6”，因此它将其视为字符串并以这种方式对其进行排序。这是粗略的，但会让你走上正确的轨道：

[http://jsfiddle.net/De8Ku/1472/](http://jsfiddle.net/De8Ku/1472/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:11:25.003

由于美元符号的解析问题，排序时似乎存在问题。我像这样修改了你的代码并且它有效

```
var vA = parseInt($(keySelector, a).text().replace("$",''));
        var vB = parseInt($(keySelector, b).text().replace("$",'')); 
```

试试这个 [小提琴](http://jsfiddle.net/De8Ku/1477/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T04:03:10.877

这一次我不得不在 jQuery 中创建一个表格排序器插件，我不得不经历你现在遇到的同样的问题。老实说，我真的不记得我是如何解决这个问题的了，但如果你有兴趣，我仍然保留了我最终用于我的网站的代码。

[http://jsfiddle.net/bcnobel/WbWDm/](http://jsfiddle.net/bcnobel/WbWDm/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T04:15:39.287

由于它将价格排序为 alpha 样式，因此是预期的。

请检查此小提琴，我已将排序类型与此相关联

[http://jsfiddle.net/De8Ku/1476/](http://jsfiddle.net/De8Ku/1476/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T04:39:19.930

[http://jsfiddle.net/De8Ku/1479/](http://jsfiddle.net/De8Ku/1479/)

# jquery - Jquery在悬停图像时显示跨度

> ID：12256614
> 
> 赞同：0
> 
> 时间：2012-09-04T03:59:29.523
> 
> 标签：jquery

嗨，我在这里有一个`<ul>`标签，`<li>`里面`<img>`有一个标签，`<span>`下面有一个用于描述每个图像的标签。

```
<ul id="thumbs">
<li>
<img src=".jpg" class="imgme"/>
</li>
<span>
Description
</span> 
```

我希望在悬停图像时显示我的跨度。

我正在使用这个 jquery，但似乎无法正常工作：

```
$(function() {
   $(".imgme").hover(function() {
    $(this).next("span").show("slow");
    },function(){
    $(this).next("span").hide("slow");
   });
  }); 
```

你能告诉我一个例子，如果图像悬停，跨度会向下滑动。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:00:48.113

`img`的父母`li`的下一个是`span`。

```
$(function() {
   $(".imgme").hover(function() {
    $(this).parent().next("span").show("slow");
    },function(){
    $(this).parent().next("span").hide("slow");
   });
  }); 
```

或者您可以将事件处理程序绑定在`li`.

```
 $(function() {
   $("#thumbs > li").hover(function() {
    $(this).next("span").show("slow");
    },function(){
    $(this).next("span").hide("slow");
   });
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:05:53.357

`$(".imgme").next("span")`- 这没有给出任何东西，因为旁边没有元素`img`

试试这个

```
<ul id="thumbs">
    <li>
        <img src="Images/1003057.jpg" class="imgme" />
        <span>Description </span>
    </li>
</ul>

<script type="text/javascript">
    $(function () {
        $(".imgme").hover(function () {
            $(this).next("span").show("slow");
        }, function () {
            $(this).next("span").hide("slow");
        });
    });   
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:11:57.827

在这里你会更简单/不同：**demo** [http://jsfiddle.net/csB6w/4/](http://jsfiddle.net/csB6w/4/)

`.next`api：[http ://api.jquery.com/next/](http://api.jquery.com/next/)

`.toggle`api：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

另外我已经隐藏了开始的描述，**如果**你把跨度放在 li 里面，请看这里的**演示**：http : [//jsfiddle.net/W7AZb/](http://jsfiddle.net/W7AZb/)

如果符合需要，`:)`

**代码**

```
$("span").hide();
$(function() {
    $(".imgme").hover(function() {
        $(this).parent().next("span").toggle("slow");
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:35:34.390

在这里，我已经为上述问题完成了完整的垃圾箱。您也可以在代码箱上查看演示。

**演示链接：** [http ://codebins.com/bin/4ldqp7v](http://codebins.com/bin/4ldqp7v)

**HTML**

```
<ul id="thumbs">
  <li>
    <img src="http://www.ctspanish.com/quiz/animals/dolphin_swim_md_wht_6133.gif" class="imgme"/>
  </li>
  <span>
    Dolphin
  </span>
  <li>
    <img src="http://futureshine.com/wp-content/uploads/2012/05/jumping-monkey-gif-animation.gif" class="imgme"/>
  </li>
  <span>
    Jumping Monkey
  </span>
</ul> 
```

**jQuery**

```
$(function() {
    $(".imgme").hover(function() {
        $(this).closest("li").next("span").show(500);
    }, function() {
        $(this).closest("li").next("span").hide(400);
    });
}); 
```

**CSS**

```
ul{
  margin:0px;
  padding:0px;
}
#thumbs li{
  list-style:none;
  margin:0px;
  padding:0px;
}
#thumbs span{
  display:none;
} 
```

**演示链接：** [http ://codebins.com/bin/4ldqp7v](http://codebins.com/bin/4ldqp7v)

# ruby - OS X Mountain Lion：gcc-4.2 没有这样的文件或目录

> ID：12256616
> 
> 赞同：33
> 
> 时间：2012-09-04T04:00:33.527
> 
> 标签：ruby, gcc, gem, makefile, osx-mountain-lion

试图在 Mountain Lion 上安装 gem 并且找不到 gcc-4.2：

```
kamil$ gem install posix-spawn -v '0.3.6'
Building native extensions.  This could take a while...
ERROR:  Error installing posix-spawn:
    ERROR: Failed to build gem native extension.

        /Users/kamil/.rbenv/versions/1.9.3-p0/bin/ruby extconf.rb
creating Makefile

make
compiling posix-spawn.c
make: gcc-4.2: No such file or directory
make: *** [posix-spawn.o] Error 1 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-04T04:00:33.527

如果你安装了 Xcode，gcc 应该是可用的。检查它在哪里：

```
kamil$ which gcc
/usr/bin/gcc 
```

然后创建一个从 gcc-4.2 到普通 gcc 的用户级符号链接：

```
kamil$ sudo ln -s ~/bin/gcc /usr/bin/gcc-4.2 
```

（确保用户域绑定文件夹在您的路径`export PATH=...:$HOME/bin`中，通过您的`.bash_profile`或`.zshrc`。）

宝石安装好之后。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-01T08:37:45.100

只需使用 brew 安装 apple-gcc42。它生成 gcc-4.2 。

```
brew install apple-gcc42 
```

所以我们不需要符号链接，苹果更新可能会删除它。

[家酿](http://brew.sh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-11T13:29:26.053

我在安装 python pip 包时遇到了类似的问题（构建轮子失败）。我收到了类似的信息：

```
unable to execute '/usr/bin/gcc-4.2': No such file or directory
  error: command '/usr/bin/gcc-4.2' failed with exit status 1 
```

由于 Apple 的系统完整性保护 (SIP)，无法链接到，并且在`/usr/bin/gcc-4.2`车轮制造过程中没有将其链接到；它仍在尝试使用.`/usr/bin/gcc``/usr/local/bin/gcc-4.2``/usr/bin/gcc-4.2`

我终于能够通过`CC`在终端中设置变量来解决这个问题：

```
CC=/usr/bin/gcc
# Install your packages
pip install -r requirements.txt 
```

PS：请注意，禁用 SIP 不起作用，即使禁用 SIP，我也无法创建`/usr/bin/gcc-4.2`链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-11T14:02:55.243

正如@Artur Bodera 提到的，现代 OSX 将拒绝让您在系统 /bin 文件夹中创建符号链接。

为避免这种情况，只需创建指向用户 bin 文件夹的符号链接

```
ln -s ~/bin/gcc /usr/bin/gcc-4.2 
```

不要忘记将 bin 文件夹添加到您的 .zshrc 或 .bash_profile - 例如

```
export PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:$HOME/bin 
```

# html - HTML：列表、子列表和伪元素

> ID：12256621
> 
> 赞同：2
> 
> 时间：2012-09-04T04:01:07.333
> 
> 标签：html, list, css

我需要创建一个类似的列表：http: [//jsfiddle.net/BkBZJ/](http://jsfiddle.net/BkBZJ/)

只是，没有 HTML 中的额外标记（带有类的跨度标签或列表中的嵌套列表）。
有谁知道我可以实现这一点的方法，例如使用伪元素，例如之前/之后，最后一个孩子，第 n 个孩子等......

或者如果没有 HTML 中的附加标记，这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:06:46.400

只需执行[以下操作（JSFiddle）](http://jsfiddle.net/BkBZJ/1/)：

**CSS**

```
body {
    background: #202024; 
    color: #FFF;
    font: .75em Arial, san-serif;
}

h1 {
  font: 1.25em Arial, san-serif;
    text-transform: uppercase;
}

#education dt { margin-top: 15px;}
#education dd {
    text-indent: 25px;
    color:#C5B7A6;
}
/* Add the dashes where appropriate */
#education dd:before {
    content: "- ";
    display: inline-block;
}
/* Override the styles for specific dds */
#education .co {color:#FFF; margin-left:50px;}

/* Or, alternately if all except the first dd should be white */
#education dd:first-child { color: #C5B7A6; margin-left: 0; }
#education dd { color: #FFF; margin-left: 50px; } 
```

**HTML**

```
<div id="education">
<h1>Education</h1>
<dl>
    <dt>Holmsglen Institute of TAFE</dt>
        <dd>Certificate II &amp; Certificate III of Multimedia</dd>
    <dt>RMIT University</dt>
        <dd>Advanced Diploma Of Interactive Media</dd>
    <dd>2D Animation Major</dd>
    <dt>Swinburne University</dt>
        <dd>Bachelors Degree of Digital Media</dd>
        <dd class="co">Branding &amp; Advertising Co-Minor</dd>
        <dd class="co">Motion Graphics Co-Minor</dd>
</dl> 
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:08:13.147

好吧，您始终可以使用 :nth-child(x) ，其中 x 是您要修改的那个，然后对其应用 margin-left 以及颜色：更改为它。

例如：http: [//jsfiddle.net/PcA4u/](http://jsfiddle.net/PcA4u/)

# erlang - 元组中的元素还是erlang中的元素？

> ID：12256626
> 
> 赞同：1
> 
> 时间：2012-09-04T04:01:43.210
> 
> 标签：erlang

我想知道 Erlang 中是否有一个函数可以帮助我知道一个元素是否在一个元组中。喜欢集合：is_element/2。

```
Tuple = {aaa,bbb,ccc}.
is_element_of_tuple(Tuple, aaa)  % => true
is_element_of_tuple(Tuple, ddd)  % => false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T04:24:02.520

您始终可以使用[tuple_to_list/1](http://www.erlang.org/doc/man/erlang.html#tuple_to_list-1)将元组转换为列表：

```
is_element_of_tuple(Tuple, Element) ->
    lists:member(Element, tuple_to_list(Tuple)). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:19:57.603

简单的答案是：**不**，没有功能可以做到这一点。您必须编写自己的循环来遍历元组的所有元素，直到找到或找不到它。您可以将元组转换为上面的列表，也可以编写自己的循环，例如：

```
is_element_of_tuple(E, Tuple) ->
    is_element_of_tuple(E, Tuple, 1, tuple_size(Tuple)).

is_element_of_tuple(E, T, I, S) when I =< S ->
    case element(I, T) of
        E -> true;
        _ -> is_element_of_tuple(E, T, I+1, S)
    end;
is_element_of_tuple(_, _, _, _) -> false.                 %Done all the elements 
```

以这种方式使用大小写和匹配意味着我们检查是否完全相等，并且它可能比使用`=:=`和检查是否返回`true`or快一点`false`。

# entity-framework-4 - 自定义 POCO 且不会因数据库刷新而丢失更改的方法

> ID：12256634
> 
> 赞同：1
> 
> 时间：2012-09-04T04:02:55.277
> 
> 标签：entity-framework-4, entity-framework-4.1

在 MVC 3 环境中使用 EF 4.1。我也在使用我使用 NUGET 下载的 POCO 生成工具。

我正在寻找一种方法来“自定义”具有验证属性的 POCO 类，而不会在每次数据库更改时丢失这些更改（并执行结果重新同步）。

我尝试创建抽象类并实例化一个继承类，但 EF 迫使我通过 EDMX 文件创建一个具体类，并且这个后代类也成为生成的 POCO，每次数据库同步都会“刷新”。

我注意到 POCO 是部分类，这意味着我可以将成员添加到不同文件中的类，但这种方法不允许我添加到现有成员。

虽然我知道我遇到的是数据库优先方法的限制，但我怀疑有一种方法可以更改/自定义 POCO，并且不会因每次重新刷新而丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:46:08.493

您至少有 2 个选项：

1.  在分部类上实现[IValidatableObject](http://msdn.microsoft.com/en-us/data/gg193959.aspx)接口并提供`Validate`方法。
2.  正如 Eranga 提到的，使用该`MetadataType`属性将验证属性移动到[具有相同属性的另一个类。](http://msdn.microsoft.com/en-us/data/gg193959.aspx)

覆盖`OnModelCreating`仅适用于代码优先，而不是模型/数据库优先的选项。

# forms - 如何使用“GoToRecord”命令按主键获取记录-VBA Acess 2010

> ID：12256635
> 
> 赞同：5
> 
> 时间：2012-09-04T04:02:55.943
> 
> 标签：forms, vba, ms-access

如何使用“GoToRecord”命令按主键获取记录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T08:56:22.603

I suspect you wish to move to a record given the primary key.

```
MyKey = 3
With Me.Recordset
    .FindFirst "ID=" & MyKey

    If .NoMatch Then
        MsgBox "Not found"
    End If
End With 
```

# apache - 由于 WebDav 导致 PCI 扫描失败

> ID：12256641
> 
> 赞同：0
> 
> 时间：2012-09-04T04:03:49.650
> 
> 标签：apache, centos, webdav

由于“WebDAV 扩展已启用”，我们未能在我们客户的网站上进行 PCI 扫描。获取端口 80/tcp 和端口 443/tcp 运行易受攻击的 HTTP 服务：Apache 2.4.3。禁用 Apache dav，dav_fs 不起作用。

httpd.conf：

```
ServerRoot "/usr/local/apache"   
Listen 80    
LoadModule authn_file_module modules/mod_authn_file.so   
LoadModule authn_socache_module modules/mod_authn_socache.so   
LoadModule authn_core_module modules/mod_authn_core.so   
LoadModule authz_host_module modules/mod_authz_host.so   
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so   
LoadModule authz_user_module modules/mod_authz_user.so   
LoadModule authz_core_module modules/mod_authz_core.so    
LoadModule access_compat_module modules/mod_access_compat.so   
LoadModule auth_basic_module modules/mod_auth_basic.so   
LoadModule auth_digest_module modules/mod_auth_digest.so   
LoadModule cache_module modules/mod_cache.so   
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so   
LoadModule reqtimeout_module modules/mod_reqtimeout.so   
LoadModule filter_module modules/mod_filter.so    
LoadModule mime_module modules/mod_mime.so   
LoadModule log_config_module modules/mod_log_config.so   
LoadModule env_module modules/mod_env.so   
LoadModule headers_module modules/mod_headers.so   
LoadModule setenvif_module modules/mod_setenvif.so   
LoadModule version_module modules/mod_version.so   
LoadModule ssl_module modules/mod_ssl.so   
LoadModule unixd_module modules/mod_unixd.so   
LoadModule status_module modules/mod_status.so   
LoadModule dir_module modules/mod_dir.so   
LoadModule alias_module modules/mod_alias.so   
LoadModule rewrite_module modules/mod_rewrite.so   
LoadModule php5_module modules/libphp5.so    

    ServerAdmin abc@example.com   
    ServerName www.example.com:80   
    <Directory />    
    AllowOverride none   
    Require all denied    
    </Directory>   
TraceEnable off   
DocumentRoot "/var/www/html"   
    <Directory "/var/www/html">    
    Options Indexes FollowSymLinks   
    AllowOverride All   
    </Directory>    
    <IfModule dir_module>    
    DirectoryIndex index.php index.html    
    </IfModule>    
ErrorLog "logs/error_log"   
LogLevel warn   
    <IfModule log_config_module>    
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined   
    LogFormat "%h %l %u %t \"%r\" %>s %b" common   
    <IfModule logio_module>    
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio    
     </IfModule>     
    CustomLog "logs/access_log" common    
    </IfModule>    
    <IfModule mime_module>    
    TypesConfig conf/mime.types    
    AddType application/x-compress .Z    
    AddType application/x-gzip .gz .tgz    
    AddType text/html       .php    
    AddType application/x-httpd-php-source phps    
    AddHandler php5-script  .php    
    </IfModule>    
    Include conf/extra/httpd-ssl.conf    
    <IfModule ssl_module>    
SSLRandomSeed startup builtin    
SSLRandomSeed connect builtin    
    </IfModule>    
    <IfModule setenvif_module>    
BrowserMatch "MSIE 10.0;" bad_DNT    
    </IfModule>    
    <IfModule headers_module>    
RequestHeader unset DNT env=bad_DNT    
    </IfModule>    
Timeout 60    
StartServers 1   
    <IfModule prefork.c>    
MinSpareServers 1   
MaxSpareServers 1    
    </IfModule>    
ServerLimit 256    
MaxClients 25   
MaxRequestsPerChild 80   
KeepAlive On   
KeepAliveTimeout 5   
MaxKeepAliveRequests 30 
```

.htaccess

```
 Options -Indexes    
    <IfModule mod_rewrite.c>    
RewriteEngine On  
RewriteBase /  
RewriteRule ^index\.php$ - [L]  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . /index.php [L]    
    </IfModule>    
RewriteEngine on  
RewriteCond %{REQUEST_METHOD} ^HEAD  
RewriteRule .* ~@~S[F]  
RewriteCond %{DAV} !^$  
RewriteRule . - [L] 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:15:57.387

I had the same problem and it was a false positive. I logged into my server with ssh, typed `httpd -M` to list modules loaded, and sent a screenshot of that session to the ASV to prove that dav modules were not loaded. The issue was closed.

# jakarta-ee - 使用 struts2 的简单 sl4j 日志记录不起作用

> ID：12256643
> 
> 赞同：1
> 
> 时间：2012-09-04T04:04:27.773
> 
> 标签：jakarta-ee, logging, struts2, slf4j

我开始使用 Struts2。使用 sl4j 登录 HelloWorld 示例。没有创建日志文件，控制台中也没有任何内容。

***有人帮助我我做错了什么？***

**下面是我的项目结构。**

![日志记录](../Images/d1c0f10330fc89540a175a07a363baa9.png)

**属性文件**

```
# Default Logging Level is DEBUG. levels: DEBUG < INFO < WARN < ERROR < FATAL OR ALL. Its only appender to FILE.

# Root logger option
log4j.rootLogger = ALL, FILE, stdout

# Define the file appender
# log4j.appender.FILE=org.apache.log4j.FileAppender

# backup the log files when they reach a certain size
log4j.appender.FILE=org.apache.log4j.RollingFileAppender

# Set the name of the file
log4j.appender.FILE.File=C:\\test.log

# Specify the log file size and max backup index.
log4j.appender.Logger.MaxFileSize=5mb
log4j.appender.Logger.MaxBackupIndex=20

# Set the threshold to debug mode
log4j.appender.FILE.Threshold=DEBUG

# Set the append to false, overwrite
log4j.appender.FILE.Append=false

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# log4j.rootLogger = ALL, FILE, stdout
# Output To Console: Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

**信任.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.devMode" value="true" />

    <package name="default" extends="struts-default">
        <action name="HelloWorld" class="vaannila.HelloWorld">
            <result name="SUCCESS">/success.jsp</result>
        </action>
    </package>
</struts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:34:25.210

在已部署应用程序的类路径中需要三个 jar，对于 WAR，它们是 WEB-INF/lib。你需要：

1.  您的代码在记录时使用的 slf4j 接口
2.  执行日志记录的实际日志记录框架
3.  该底层框架与那些 slf4j 接口的“绑定”

这些东西分别映射了以下3个jar，假设log4j 1.2.x为底层框架。

1.  slf4j-log4j12.jar
2.  slf4j-api.jar
3.  log4j12.jar

另请注意，slf4j 文档是详尽且切中要害的。

[http://www.slf4j.org/manual.html](http://www.slf4j.org/manual.html)

# c# - 在 WPF 数据网格中选择项目时如何显示按钮？

> ID：12256645
> 
> 赞同：3
> 
> 时间：2012-09-04T04:04:50.093
> 
> 标签：c#, .net, wpf, wpf-controls, wpfdatagrid

我有一个 WPF 数据网格，它有两个用于编辑和删除数据的关联按钮。理想情况下，当未在网格中选择项目时，我想禁用或使这些按钮不可见。我该如何处理？

如果重要的话，我的 datagrid XAML 是：

```
<DataGrid AutoGenerateColumns="True" Margin="10,174,12,35" Name="dataGridArchiveQueue" Visibility="Visible" AlternatingRowBackground="#01000000" BorderBrush="#FF688CAF" 
                              HorizontalGridLinesBrush="#37000000" VerticalGridLinesBrush="#37000000" CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True" 
                              SelectedItem="{Binding SelectedItemArchiveGrid}" Grid.ColumnSpan="2">
                              <DataGrid.Resources>
                        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                                         Color="LightBlue" />
                        </DataGrid.Resources>

                    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:10:45.113

您可以在按钮上使用 DataTrigger 来处理按钮的禁用/可见，或者您可以在绑定到按钮的命令的 CanExecuteChange 事件上编写逻辑

**数据触发器**

> ```
>  <Button.Style>
>             <Style>
>                 <Style.Triggers>
>                     <DataTrigger Binding="{SelectedItemArchiveGrid}" Value="{x:Null}">
>                         <Setter Property="IsEnabled"Value="False"></Setter>
>                     </DataTrigger>
>                 </Style.Triggers>
>             </Style>
>         </Button.Style> 
> ```

**命令**

```
> public RelayCommand<object> DeletCommand { get; set; }
> 
> DeletCommand = new RelayCommand<object>(OnDelete, OnDeletCanExecute);
> 
> private void OnDelete(object obj) { }
> 
> private bool OnDeletCanExecute(object obj)  {
     return SelectedItemArchiveGrid != null;  } 
```

**XAML**

```
<Button Content="Delete" Command="{Delete Command}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:10:29.573

您可以[更改当前选定项目的数据模板](http://codingcontext.wordpress.com/2008/09/28/changing-the-data-template-for-the-currently-selected-item/)。

# android - 无法在我们在 Android 上发布的应用程序中购买产品

> ID：12256649
> 
> 赞同：1
> 
> 时间：2012-09-04T04:05:52.133
> 
> 标签：android, in-app-purchase

我们公司为 Android 实施了 In App Billing，但我们在 PUBLISHED 应用程序中进行购买时遇到了问题，而且他们的项目也刚刚被 PUBLISHED。当用户购买产品时，总是会出现此消息：

[http://i.imgur.com/MiXH1.png](http://i.imgur.com/MiXH1.png)

此错误的所有文档都指向发布者或应用程序所有者帐户不可用的项目。自两周前以来，我们一直在寻求修复，但我们找不到有效的解决方案。

在发布应用程序之前，使用 android.test.purchased 的测试工作正常。我们在使用多个安卓设备发布后进行了测试，并且多个帐户在另一个已经在市场上发布的应用程序中购买了产品。

有人知道此错误的可能原因，或者可能如何解决？

# c - 如何访问和打印分布在 MPI 工作人员之间的完整向量？

> ID：12256650
> 
> 赞同：0
> 
> 时间：2012-09-04T04:06:06.983
> 
> 标签：c, vector, mpi, solver, ode

*如何从 MPI 中的单个线程访问全局向量？*

[我正在使用一个名为 CVODE（ SUNDIALS](https://computation.llnl.gov/casc/sundials/main.html)的一部分）的库——特别是 ODE 求解器库。该库与 MPI 一起使用，因此多个线程并行运行。他们都在运行相同的代码。每个线程向它“旁边”的线程发送一条数据。但我希望其中一个线程（rank=0）在某些点打印出数据的状态。

该[库包含函数](https://computation.llnl.gov/casc/sundials/documentation/cvs_guide/node8.html#SECTION00820000000000000000)，以便每个线程都可以访问自己的数据（*本地向量*）。但是没有办法访问*全局*向量。

我需要在特定时间输出所有方程的值。为此，我需要访问全局向量。任何人都知道如何获取 MPI 向量中的所有数据（如果可能，使用 CVODE）？

例如，这是我每个线程运行的代码

```
 for (iout=1, tout=T1; iout <= NOUT; iout++, tout += DTOUT) {
    flag = CVode(cvode_mem, tout, u, &t, CV_NORMAL);
    if(check_flag(&flag, "CVode", 1, my_pe)) break;
    if (my_pe == 0) PrintData(t, u);
  }
...
static void PrintData(realtype t, N_Vector u) {
   I want to print data from all threads in here
} 
```

在函数（我正在解决的函数）中，我使用and`f`来回传递数据。但我不能在 PrintData 中真正做到这一点，因为其他进程已经提前运行。另外，我不想增加消息传递开销。我想访问 中的全局向量，然后打印出需要的内容。是否可以？`MPI_Send``MPI_Recv``PrintData`

**编辑**：在等待更好的答案时，我对每个线程进行了编程，将数据传递回第 0 个线程。我不认为这会增加太多的消息传递开销，但如果有更好的方法，我仍然想听听专家的意见（我相信没有更糟糕的方法！：D）。

**编辑 2**：虽然 angainor 的解决方案肯定是优越的，但我坚持使用我创建的解决方案。为了将来有相同问题的任何人参考，以下是我如何做到的基础知识：

```
/* Is called by all threads */
static void PrintData(realtype t, N_Vector u, UserData data) {

... declarations and such ...

  for (n=1; n<=my_length; n++) {
    mass_num = my_base + n;
    z[mass_num - 1] = udata[n-1];
    z[mass_num - 1 + N] = udata[n - 1 + my_length];
  }

  if (my_pe != 0) {
    MPI_Send(&z, 2*N, PVEC_REAL_MPI_TYPE, 0, my_pe, comm);

  } else {

    for (i=1; i<npes; i++) {
      MPI_Recv(&z1, 2*N, PVEC_REAL_MPI_TYPE, i, i, comm, &status);
      for (n=0; n<2*N; n++)
        z[n] = z[n] + z1[n];
    }

... now I can print it out however I like...

  return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:55:16.573

使用 MPI 时，各个线程无法访问“全局”向量。它们不是线程，它们是可以在不同物理计算机上运行的进程，因此不能直接访问*全局数据*。

要执行您想要的操作，您可以将向量发送到 MPI 进程之一（您已这样做）并在那里打印它，或者按顺序打印本地工作部件。使用这样的函数：

```
void MPI_write_ivector(int thrid, int nthr, int vec_dim, int *v)
{
  int i, j;
  int curthr = 0;

  MPI_Barrier(MPI_COMM_WORLD);
  while(curthr!=nthr){
    if(curthr==thrid){
      printf("thread %i writing\n", thrid);
      for(i=0; i<vec_dim; i++) printf("%d\n", v[i]);
      fflush(stdout);
      curthr++;
      MPI_Bcast(&curthr, 1, MPI_INT, thrid, MPI_COMM_WORLD);
    } else {
      MPI_Bcast(&curthr, 1, MPI_INT, curthr, MPI_COMM_WORLD);
    }
  }
} 
```

所有 MPI 进程都应该同时调用它，因为里面有一个屏障和广播。本质上，该过程确保所有 MPI 进程按顺序打印它们的向量部分，从等级 0 开始。数据不会混乱，因为在任何给定时间只有一个进程写入。

在上面的示例中，使用了广播，因为它在线程打印其结果的顺序上提供了更大的灵活性——当前输出的线程可以决定下一个是谁。你也可以跳过广播，只使用屏障

```
void MPI_write_ivector(int thrid, int nthr, int vec_dim, int *v)
{
  int i, j;
  int curthr = 0;

  while(curthr!=nthr){
    if(curthr==thrid){
      printf("thread %i writing\n", thrid);
      for(i=0; i<vec_dim; i++) printf("%d\n", v[i]);
      fflush(stdout);
    }
    MPI_Barrier(MPI_COMM_WORLD);
    curthr++;
  }
} 
```

# windows - WAMP 无法在 Windows 7 企业版上运行

> ID：12256653
> 
> 赞同：0
> 
> 时间：2012-09-04T04:06:44.877
> 
> 标签：windows, wamp

我在 Windows 7 Enterprise 上使用 WAMP。它最初工作正常，即使托盘中的图标仍然是红色。我的电脑保持 24x7 全天候运行，但由于 Windows 更新待定，昨天我重新启动了它。现在，WAMP 不再工作，即我无法访问本地主机下的任何内容。浏览器 (chrome) 返回网页不可用错误。

我没有安装 Skype。我确实尝试过测试，它说端口 80 被其他应用程序使用。由于我没有管理员权限，我将 Apache 的 httpd.conf 文件重新配置为端口 81，但即使这样也无济于事。

我还使用 CMD 运行了 netstat -ao，但我找不到在 80 端口上运行的任何东西。

关于可以做些什么来解决这个问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T11:45:55.030

我在 Windows 7 家庭版中遇到了同样的问题。

也许您可以通过以下方式解决：

1）你的 80 端口大部分被微软 iis 服务器阻塞。因此，如果 iis 使用端口 80，则 apache 将无法使用该端口。

2）所以，改变apache的监听端口。apache有一个文件名httpd.conf。在文本编辑器中打开文件，那里已经写入了80端口，将端口更改为8080（大多数人使用8080）。

3）所以现在你的 Apache 在不同的端口上运行。

4) 重启 apache 服务或重启你的 wamp 服务器。

5）现在通过localhost：8080打开您的本地主机

6）你会看到你的本地主机页面。

希望它能解决你的问题。

# java - Java 对象引用机制

> ID：12256655
> 
> 赞同：5
> 
> 时间：2012-09-04T04:06:50.620
> 
> 标签：java, object

我有点坚持以下问题：

哪两种 Java 语言机制允许对象引用变量的类型与其所引用的对象的类型“不同”？举个具体例子来说明。它们在什么意义上根本没有区别？

我目前的答案是它是“实施”和“扩展”，对吗？它们是相似的，因为它们都将创建一个类，该类至少将拥有超类的所有方法签名，可以是实际的、抽象的或接口。它是否正确？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:12:57.343

这或多或少是正确的。您答案的第二部分应该讨论子类型。在 Java 中，对象仅具有相同的方法签名是不够的。实际上必须有一个声明的子类型关系（通过扩展/实现）。

这不仅仅是迂腐。在某些语言（但不是 Java）中，仅存在兼容的方法签名就足以实现类型兼容性。这被称为“鸭子打字”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:09:32.623

工具

```
interface Animal {
   void attackHuman(); // actually public abstract by default
}
class Horse implements Animal {
   public void attackHuman() { }; // must implement
}

// type and reference the same
Horse a1 = new Horse();

// type and reference different
Animal a2 = a1; 
```

扩展

```
class Animal {
   void attackHuman();
}
class Dinosaur extends Animal {
   // attackHuman() inherited
}

// type and reference the same
Dinosaur a1 = new Dinosaur();

// type and reference different
Animal a2 = a1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:18:40.440

看这个例子......

**-**这里的**动物**是`Super-Class`，**狗**和**猫**不在`inherited`其中。

**-****您**可以使用`Animal Object Reference Variable`.

**-**这被称为`Class Polymorphism`.

```
public class Test {

public static void main(String[] args){

Animal a = new Dog();
new Hospital().treatAnimal(a);

   }
}

class Animal {

public void sayIt(){

     }
}

class Dog extends Animal{

public void sayIt(){

    System.out.println("I am Dog");
   }
}

class Cat extends Animal{

public void sayIt(){

System.out.println("I am Cat");
     }
}

See the NEXT PAGE for the Remaining Code

class Hospital{

public void treatAnimal(Animal a){

if(a instanceof Dog){             

   a.sayIt();         // Will output "I am Dog"

  }
else{

a.sayIt();         // Will output "I am Cat"

}

  }

} 
```

# android - 为什么我需要在 Android 中扩展 Activity？

> ID：12256661
> 
> 赞同：2
> 
> 时间：2012-09-04T04:07:38.717
> 
> 标签：android

这是一个关于基础的问题：为什么我需要声明一个类`public class MainActivity extends Activity`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T04:10:40.363

Activity 是构建应用程序屏幕的基类，它具有 Android 框架所期望的所有生命周期回调。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T04:09:34.123

当 Android 应用程序启动`Activity`实例时，您需要实现自己的活动。在 Java 中，它是通过扩展原始`Activity`类来完成的。前缀表示这`public class`是一个类，它可以由其他包和位置的类启动（如 Dalvik VM）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T04:37:39.713

在 android 中，应用程序的用户界面通过 Activity 显示在设备上，通常为每个唯一屏幕创建一个 Activity。内部有一个 Activity 堆栈，当从一个屏幕移动到另一个屏幕时，下一个可见的 Activity 被推到堆栈的顶部 - 换句话说，堆栈顶部的 Activity 是在显示器上可见的. 通过按下后退按钮从堆栈中弹出活动，这会恢复上一个活动。

**当你想创建一个新的 Activity 时，你扩展了 Activity 类。**
下面的代码显示了一个简单的起点：

```
public class MainActivity extends Activity 
{
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
      super.onCreate(savedInstanceState);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-14T05:31:56.450

每个 android 屏幕都包含一个 java 文件（活动）和一个 xml 文件（布局）。活动生命周期包含 4 个阶段和 7 个方法。这些都存在于 android.app.activity 类中。所以为了通过扩展活动类来为新创建的类实现这些属性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-07-28T08:39:05.317

因为当你想打开另一个布局/设计时，你需要扩展 Activity。这就是为什么你需要扩展 Activity 才能看到另一个 Activity。;)。

# iphone - 如何检查iphone应用程序中的任何按钮是否被点击

> ID：12256662
> 
> 赞同：-1
> 
> 时间：2012-09-04T04:07:39.180
> 
> 标签：iphone, xcode, uibutton

我有六个按钮，我希望用户在移动到下一个屏幕之前必须选择六个按钮中的任何一个，如果它没有选择任何一个，那么它不应该移动到下一个屏幕我已经阅读过使用 BOOL 标志，但这显示了我想要单击哪个按钮如果单击六个按钮中的任何一个，则用户可以移动到下一个屏幕

```
-(IBAction)locationOneButtonAction{
    // your stuff
    _flag = YES;
  }
 -(IBAction)locationTwoButtonAction{
// your stuff
_flag = YES;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:21:34.953

我认为这个问题的最佳解决方案是为你的类声明一个布尔值（假设它被称为“ClickViewController”（所以在顶部）

```
@interface ClickViewController () {
   bool wasClicked;
}
...
-(IBAction)locationOneButtonAction{
// your stuff
   wasClicked = YES;
} 
```

然后，当单击应该移动到下一页的按钮时，使用这样的方法。

```
-(void)nextPageClicked{
   if (wasClicked){
       [self performSegueWithIdentifier:@"segueIdentifier" sender: self];
   } else {
      // do something else here, like tell the user why you didn't move them
   }
} 
```

这意味着您不能将 segue 从按钮绘制到下一个视图。如果您使用情节提要，这意味着您不能从应该将其移动到下一个视图的按钮中绘制 segue，而是应该将其从视图控制器图标绘制到下一个视图。然后选择segue，给它命名，用上面的方法加上名字。

我也不确定你的意思是不是想让每个按钮移动到下一个视图，如果是这样，你可以使用基本相同的代码，但只需将代码 [self performSegueWithIdentifier:@"segueIdentifier"发件人：自己]; 按钮的作用线。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:22:13.533

最初添加 BOOL _flag; int curIndex; 在 .h 文件中。

现在首先添加 _flag = FALSE; 在 viewDidLoad 方法中，因为它表示没有单击按钮。

使每个按钮的 userInteractionEnabled 能够单击并向每个按钮添加标签。

现在在每次单击按钮的操作方法中执行以下操作：

```
(IBAction)locationOneButtonAction:(id)sender{
   curIndex = [sender tag]; //which button clicked
   // your stuff
   _flag = TRUE;
}
-(IBAction)locationTwoButtonAction{
curIndex = [sender tag]; //which button clicked
// your stuff
_flag = YES;
}
........
........ 
```

现在如果单击按钮，请像这样检查：

```
if(_flag)
{
   NSLog(@"Button clicked with tag: %d",curIndex);
}
else
{
  NSLog(@"Not any Button clicked");
} 
```

# php - jquery菜单没有出现在带有背景颜色的换行符前面，其中包含带有背景图像的div

> ID：12256667
> 
> 赞同：1
> 
> 时间：2012-09-04T04:08:31.010
> 
> 标签：php, jquery, html, css, jquery-plugins

我面临的问题是使用jquery的圆形菜单，打开后我看不到scree中的所有选项，我有两个菜单，第一个出现在包装的顶部，另一个出现在第一个菜单下方。我想要做的是，当我将鼠标悬停到第一个菜单时，我想查看所有选项，并且 wrap 元素会延伸到所有选项，我需要一个滚动条出现，以便我可以向上移动看到选择。这是代码。默认.css

```
.socials {
display:block;
width:32px;
height:32px;
background:url(../img/socials/share.png) no-repeat;
cursor:pointer;
position:relative;
}

.nature {
display:block;
width:150px;
height:150px;
background:url(../img/nature/img1.png) no-repeat;
cursor:pointer;
position:relative;

}

.socials, .nature {
margin:0 auto;
}

.socials {
margin-bottom:50px;
}

ul.reset,
ul.reset li {
display:block;
list-style:none;
padding:0;
margin:0;

}

ul.reset li {
position:absolute;
}

ul.reset li a {
outline:none;
}

#content {
margin:100px auto 0;
width:560px;
}

a {
color:#fff;
}

a img {
border:none;
} 
```

样式.css

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
border: 0 none;
font-family: inherit;
font-size: 100%;
font-style: inherit;
font-weight: inherit;
margin: 0;
outline: 0 none;
padding: 0;
vertical-align: baseline;
}
body {
background-color: #000000;

}
 #wrap {
background-color:#FECC80;
margin:25px auto;
width: 940px;
min-height:560px;

 }
.centered {
 margin:25px auto;
width: 940px;
min-height:560px;
background:url("../Images/logo.png") no-repeat center center;

 position:fixed;
 }

/*menu em cima*/
nav {width: 100%;
position:fixed;
list-style: none;
padding: 0;
margin: 0;
top:0;

 }

    nav ul {
        list-style: none;
        margin:0;
        padding:0;
        display: table;

        width: 100%;
    }
    nav li {
        z-index:10;
        text-align: center;
        display: table-cell;
               width: 120px
    }
    nav a {
             opacity: 0.5;
   filter: alpha(opacity=50);
        color: #fff;
        text-decoration: none;
        padding: 5px 10px ;
        height: 30px;
        line-height: 20px;
        display: block;
        text-align: center;
        background: #D98134;
        border-right:1px solid white;

    }

    nav  a:hover {
          opacity:1;
 filter: alpha(opacity=100);
background-color: #D98134;
}

 /*menu de baixo*/

 nav2 {width: 100%;
position:fixed;
list-style: none;
padding: 0;
margin: 0;
bottom:0;

}

    nav2 ul {
        list-style: none;
        margin:0;
        padding:0;
        display: table;

        width: 100%;
    }
    nav2 li {
        z-index:10;
        text-align: center;
        display: table-cell;
               width: 120px
    }
    nav2 a {
             opacity: 0.5;
  filter: alpha(opacity=50);
        color: #fff;
        text-decoration: none;
        padding: 5px 10px ;
        height: 30px;
        line-height: 20px;
        display: block;
        text-align: center;
        background: #D98134;
        border-right:1px solid white;

    }

    nav2  a:hover {
          opacity:1;
 filter: alpha(opacity=100);
background-color: #D98134;
} 
```

这是我遇到问题的produtos.php的部分

```
<div class="centered">
</div>

<div class="nature" >
        <ul class="reset" >
            <li><a href="#"><img src="../img/nature/img2.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img3.png" alt="" /></a></li>

        </ul>           
    </div>

    <div class="nature"  >
        <ul class="reset">
            <li><a href="#"><img src="../img/nature/img2.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img3.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img4.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img2.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img3.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img4.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img2.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img3.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img4.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img2.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img3.png" alt="" /></a></li>
            <li><a href="#"><img src="../img/nature/img4.png" alt="" /></a></li>

        </ul>           
    </div>
</div>

</div> 
```

您可以查看在 [http://ocafe.pt/Teste/produtos.php](http://ocafe.pt/Teste/produtos.php)中运行的站点并直接查看问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:06:08.153

我一直在玩一些想法：

对于初学者来说，您在 .centered div 上的固定属性会让您大吃一惊。

这是一个可能的解决方案：http: [//jsfiddle.net/webwarrior/LSn6F/34/](http://jsfiddle.net/webwarrior/LSn6F/34/)

更改了一些 css，并添加了一些元素：

```
<div id="wrap2"></div>

 <div id="wrap">

<div class="centered">
</div>

<div class="nature">
            <ul class="reset" style="display: block; z-index: 50; opacity: 0; ">
                <li style="top: 0px; left: 0px; z-index: 50; "><a href="#"><img src="http://ocafe.pt/img/nature/img2.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img3.png" alt=""></a></li>

            </ul>            
        <a class="trigger" style="display: block; position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%; "></a></div>

        <div class="nature">
            <ul class="reset" style="display: block; z-index: 50; opacity: 0; ">
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img2.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img3.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img4.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img2.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img3.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img4.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img2.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img3.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img4.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img2.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 50; "><a href="#"><img src="http://ocafe.pt/img/nature/img3.png" alt=""></a></li>
                <li style="top: 0px; left: 0px; z-index: 49; "><a href="#"><img src="http://ocafe.pt/img/nature/img4.png" alt=""></a></li>

            </ul>            
        <a class="trigger" style="display: block; position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%; "></a></div>
</div> 
```

CSS：

```
#wrap2 {
    background-color:#FECC80;
    margin:25px auto;
    width: 940px;
    min-height:560px;
    position: absolute;
    top: 20px;
    left: 50%;
    margin-left: -25%;
}
#wrap {
    background-color:#FECC80;
    margin:25px auto;
    width: 940px;
    min-height:560px;
    position: absolute;
    top: 200px;
    left: 50%;
    margin-left: -25%;
    overflow: visible;
}
.centered {
    margin:25px auto;
    width: 940px;
    min-height:560px;
    background:url("http://ocafe.pt/Images/logo.png") no-repeat center center;
    overflow: auto;
    position: absolute;
    position: absolute;
    top: -25%;
    left: 0%;

} 
```

hth

我们会在稍微摆弄之后到达那里......

# html - HTML5 drawimage 从视频到画布

> ID：12256668
> 
> 赞同：5
> 
> 时间：2012-09-04T04:08:51.990
> 
> 标签：html, html5-video, html5-canvas

我试图从视频中捕获一帧并使用 HTML5 在画布中绘制它，但下面的代码不起作用。当我单击开始按钮时，画布上充满了黑色

```
 <video src="video2.mp4" autoplay="true" type="video/mp4" width="300" height="200" id="vid">
        </video>
        <canvas id="cvs"> </canvas>
        <button onclick="start()">Start</button>
        <script>
        var video=document.getElementById("vid");
        var cvs=document.getElementById("cvs");
        function start(){
        cvs.getContext("2d").drawImage(video, 0, 0, 300,200);
        }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:08:15.570

我有完全相同的问题，我认为它与视频格式有关。我的视频是 .mp4 容器中的 H264。当我使用 .ogg 视频时，完全相同的代码可以完美运行。我正在使用 Romin 提供的链接中的代码。

# php - php文件上传验证和错误显示

> ID：12256670
> 
> 赞同：0
> 
> 时间：2012-09-04T04:09:01.573
> 
> 标签：php, javascript, jquery

我有一个表格，其中一个输入作为文件上传。我有一个 php 脚本，我用 jquery ajax 调用它来验证其他表单字段并在表单上方的 div 中显示错误消息。它使用 .html() jquery 函数执行此操作，该函数基于与以下脚本非常相似的 php 回显。

我还创建了一个 php 脚本来验证文件上传，如下所示：

```
<?php

    $errorList = array();
    $inc = 0;

    $allowedExt = array("jpg", "jpeg", "gif", "png");
    $fileExt = end(explode(".", $_FILES['imgUpload']['name']));
    if((($_FILES['imgUpload']['type'] == 'image/gif')
     || ($_FILES['imgUpload']['type'] == 'image/pnjpeg')
     || ($_FILES['imgUpload']['type'] == 'image/jpeg'))
     && ($_FILES['imgUpload']['size'] < 2000000)
     && in_array($fileExt, $allowedExt)){
    if($_FILES['imgUpload']['error'] > 0)){

        $errorList[$inc++] = '<span class="error"> File error:'. $_FILES['imgUpload']['error'].'</span>';
    }

    }
    else{
    $errorList[$inc++] = '<span class="error"> Invalid file </span>';

    }

    echo '<ul class="errorList">';
    for($i =0; $i<$inc; $i++){
        echo $errorList[$i];

    }
    echo '</ul>';

?> 
```

我希望此脚本中的错误消息以与其他脚本类似的方式显示，但据我所知，文件上传不能使用 ajax 完成。

有人对我如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:13:42.563

Ajax 无法上传文件。但是你可以使用 IFrame 让它看起来像 Ajax。

您的选择是：

*   隐藏的 iframe 技巧，由 Google 推广。自己实现这个可能会导致一些笨拙的东西，所以有一些库，比如 jQuery，它有插件，比如 jQuery 流行的 Form Plugin，可以自动执行此操作，因此您在使用它时不必感到内部肮脏。
*   使用 Flash 来促进该过程。最值得注意的是 SWFUpload 非常受欢迎。在所有条件相同的情况下，我可能会使用 Javascript 解决方案来解决这个问题，但我过去曾成功使用过它。这个解决方案最酷的地方在于它带有更好的界面，例如加载指示器和缩略图等。但是，此时您要求用户使用 Flash + Javascript，这在某些情况下可能不起作用。
*   使用 Silverlight 代替 Flash，尽管我并不认为这是一个可行的解决方案，因为它的渗透率比其他两种解决方案低得多。

如需您的帮助，请参阅此示例

[http://www.anyexample.com/programming/php/php_ajax_example__asynchronous_file_upload.xml](http://www.anyexample.com/programming/php/php_ajax_example__asynchronous_file_upload.xml)

它正在使用 iframe 选项

# ruby-on-rails - Rails 3.2 中的自定义 URL 验证方法

> ID：12256677
> 
> 赞同：0
> 
> 时间：2012-09-04T04:10:17.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, uri, ruby-on-rails-3.2

我怎样才能让它工作？使用 !!URI.parse(url) 还是 self.url ？

```
class Idea < ActiveRecord::Base
  attr_accessible :body, :url
  validates :body, presence: true, :length => { :in => 6..240 }
  validates :body, uniqueness: true
  validates :url, presence: true
  validate :good_url
  require 'uri'
  def good_url
    errors.add(:url, 'not valid') unless URI.parse(url)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:51:05.080

如果你只是想让它工作，那么如何：

```
errors.add(:url, 'not valid') if (url =~ URI::regexp).nil? 
```

但是，如果解析 url 对您很重要，您可能需要考虑替代 ruby​​ 的标准 URI 实现，例如[addressable](http://addressable.rubyforge.org/)，它处理 UTF-8 字符、规范化和其他可能根据上下文很重要的边缘情况。

另请参阅：[检查 url 是否有效 ruby](https://stackoverflow.com/questions/1805761/check-if-url-is-valid-ruby)

# javascript - 执行单击元素

> ID：12256680
> 
> 赞同：2
> 
> 时间：2012-09-04T04:10:26.297
> 
> 标签：javascript, selenium

我正在研究 Selenium WebDriver。我需要将鼠标指向一个元素并单击它，我想在这里使用 javascript 而不是 Xpaths。

该元素的 javascript 不是一种方法，因此我可以直接触发它。我很困惑如何创建一个javascript，以便自动执行时的方法应该转到那个对象（我想只使用它的javascript指向那个对象）并执行点击。

**元素的javascript：**

```
javascript:setParam(paramOrderNbr, '4');
go('survey_editing.jsp','actMoveItemUp); 
```

请帮忙！

库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:51:15.473

尝试这个：

```
String cssSelector =.... //css selector of the element you want click on
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:13:28.840

好工作。但是尝试修改你的 css 选择器。尝试简单`map[name="edit_1"]> area` 但在尝试**使用firebug执行anuthing验证**之前（我使用firepath，ffox中的firebug插件）来验证您的css选择器是否正确。然后尝试执行我上面提到的代码。它总是有效的。

但也可以尝试另一种方法。如果您的 selenium 测试与使用 onmousehover 操作处理指出 web 元素有关。然后可以使用用户操作生成器：

```
WebElement mnuElement;
WebElement submnuElement;
mnEle = driver.findElement(By.Id("mnEle")).click();
sbEle = driver.findElement(By.Id("sbEle")).click();

Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.moveToElement(mnEle).perform();
// Giving 5 Secs for submenu to be displayed
Thread.sleep(5000L);
// Clicking on the Hidden SubMenu
driver.findElement(By.Id("sbEle")).click(); 
```

请在检查后立即通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:00:41.090

我对你的问题做了一点调查。现在我有点沮丧。Firebug 无法定位`<script>`标签中包含的任何内容。见下图 ![在此处输入图像描述](../Images/13c0a0576ca40e8b0254f9914d3196ed.png)

因此，如果我们无法使用标准的树 DOM 模型定位元素，那么最后一个假设就剩下了（在我看来）。如果遇到您的问题，我只会分享我会实施的想法。只需尝试使用js单击固定坐标。但这被认为是不好的方法。[这里](https://stackoverflow.com/questions/6775351/clicking-at-coordinates-without-identifying-element)有说明 所以回到js定位坐标点击就可以使用[这个](http://www.emanueleferonato.com/2006/09/02/click-image-and-get-coordinates-with-javascript/) 使用描述的部分我们定位我们需要定位的元素的x,y坐标。使用[它](https://stackoverflow.com/questions/2845178/triggering-a-javascript-click-event-at-specific-coordinates) ，您实际上可以执行点击。像这样的东西：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("x.trigger("click", [x, y]);"); //where [x,y] you've already //obtained
        js.executeScript(stringBuilder.toString()); 
```

[顺便说一句，您可以在这里](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)了解高级用户操作。我发现在某些情况下它很有帮助。

但在我看来，以某种方式在 DOM 中定位您需要的元素仍然是可能的。希望我的回答能有所帮助）

# python - python多进程将自动退出

> ID：12256681
> 
> 赞同：0
> 
> 时间：2012-09-04T04:10:28.837
> 
> 标签：python, multithreading, join, process, exit

很抱歉我的英语很差，但我会尽量简单地解释一下。我的情况是我使用 Tkinter 的每个进程都创建一个对话框。然后创建一个类名引擎，该引擎创建 6 个线程，然后引擎类使用 t.join() 等待线程退出。

```
import threading
import sys
reload(sys)
sys.setdefaultencoding('utf-8')

from engine import Engine
import settings

class Controller(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.run_list=[False,True]
        self.run_sqe=0
        self.engine_is_running=False

    def run(self):
        self.is_running=True
        self.is_update=self.run_list[self.run_sqe]
        settings.S_is_update=self.is_update

        self.eng=Engine(settings.S_target_website)
        self.eng.start()

        self.run_sqe+=1
        if self.run_sqe>=len(self.run_list):
            self.run_sqe=0

        self.engine_is_running=True
        self.eng.join()
        if self.is_running:
            self.run()

    def stop(self):
        self.eng.is_running=False
        self.is_running=False 
```

问题是我启动了 4 个这样的 python 进程。所有进程的代码几乎相同。当我同时启动这 4 个进程时，其中的一两个会在随机时间内关闭，可能会在 1 小时或 3 小时之后关闭。我让所有进程和线程在退出时打印一些单词，但是它他们关闭时没有打印任何东西，就像它突然粗鲁地关闭一样。

机器的 cpu 总是使用 90% 甚至更高，我想可能是因为 python 所以它关闭了一些进程，或者原因是 threading.join() 没有工作。我使用activepython2.6 32位。

# mysql - SQL：导出数据，然后将数据导入新架构

> ID：12256683
> 
> 赞同：0
> 
> 时间：2012-09-04T04:10:34.793
> 
> 标签：mysql, sql, data-migration

我试图找出哪种方式是导出数据库表的最佳方式，然后将其导入到在完全独立的数据库中创建的新列中。

有些列将不再使用，有些列有不同的命名约定，等等。

这种方法有什么建议？有什么在线工具吗？

同样，新的数据库表不一样......我基本上需要能够将旧列分配给新列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:26:21.820

您可以使用[`FEDERATED`](http://dev.mysql.com/doc/en/federated-storage-engine.html)存储引擎访问远程 MySQL 实例，然后使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)复制数据。

如果这是一次性的练习，不需要服务器建立这样的链接，那么将数据导出为类似 TSV 的格式（例如使用[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html)or [*`mysqldump`*](http://dev.mysql.com/doc/en/mysqldump.html)）然后在另一端重新导入（例如使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/en/load-data.html)or [*`mysqlimport`*](http://dev.mysql.com/doc/en/mysqlimport.html)）将是明智的解决方案。

这两种方法都可以让您在流程中重新分配列名（并执行其他转换）：

```
-- federated table approach
INSERT INTO localtable (colA, colB, colC)
SELECT colX, CONCAT('foo', colY), 100 + colZ FROM remotetable;

-- TSV approach
LOAD DATA INFILE '/path/to/file' INTO TABLE localtable (colA, @colY, @colZ)
SET colB = CONCAT('foo', @colY), colC = 100 + @colZ; 
```

# windows-phone-7 - 对于不同高度的列表（20-30）项，我应该使用什么？

> ID：12256686
> 
> 赞同：0
> 
> 时间：2012-09-04T04:10:41.600
> 
> 标签：windows-phone-7, windows-phone-7.1

我有一些尺寸可能非常不同的物品。它们可以包含图片或两个。

我在 ScrollViewer 中使用 ListBox，滚动速度很快，但初始化需要时间。

我尝试只使用 ListBox 或 LongListSelector，我不能说它有效：滚动非常跳跃，有些滞后。

我可以为这些项目使用什么来实现足够快的初始化和平滑滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:48:23.753

为了克服滚动时出现的黑色，您需要虚拟化滚动控件。为此，您应该继承 IList 并创建自己的 Collection，类似于 ObservableCollection，在其中您必须根据缓存要求覆盖默认索引器，同时为您的项目维护缓存。我觉得这可能是您正在寻找的：http: [//blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx)

该页面上有一个示例项目。试试看。

我也觉得你正面临这个问题[http://blog.rsuter.com/?p=258](http://blog.rsuter.com/?p=258)。我想这将使用虚拟化本身来解决。对于初始化，使用延迟加载。希望能帮助到你

# css - 鼠标悬停在带有其他元素的环绕元素上而不移动它

> ID：12256688
> 
> 赞同：0
> 
> 时间：2012-09-04T04:10:50.727
> 
> 标签：css, gwt, gwtquery

我在这里需要一些指示，因为我真的不知道要寻找什么。该项目在 gwt 中并且正在使用 gwtquery。

我有这个页面，其中包含一些元素，当鼠标悬停在一个元素上时，它会更改显示其他信息，我们称之为标题。当鼠标离开标题时（其中有一些按钮，因此一旦显示就需要保持可见），它会返回不可见。

问题是，当页眉可见时，页面的所有元素都会更改位置，因为我的元素尺寸会发生变化。我想要做的是将元素保持在相同的位置，并使用 z-index 将标题重叠在所有内容上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:38:23.013

这与第一手的 GWT 无关。它主要是关于 html 页面的元素定位和布局构建的一般概念。您应该从[http://www.w3schools.com/Css/css_positioning.asp](http://www.w3schools.com/Css/css_positioning.asp)之类的东西开始， 然后在 GWT 框架或可用的第三方库中找到合适的工具。

# apache - apache 进程包括哪些线程？

> ID：12256694
> 
> 赞同：0
> 
> 时间：2012-09-04T04:11:48.317
> 
> 标签：apache

我在 Windows 上使用 Apache。

我的 Windows 资源监视器在 httpd.exe 中显示 5 个线程，尽管我在 httpd.conf 中为 ThreadsParCild 指令设置了 1。

我知道线程中的 1 个必须是我设置的工作线程。

那么另外4个线程是做什么用的？tye somthing 是空线吗？

# database - 如何从 django 管理站点中提取数据？

> ID：12256695
> 
> 赞同：0
> 
> 时间：2012-09-04T04:11:55.687
> 
> 标签：database, django, django-admin, extract, django-database

我有一个 django 管理页面，但我的计算机上没有数据库文件。如何从我的硬盘上的数据库文件（例如 MyDB.sqlite）中的管理页面中提取所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:20:44.750

您可能想通过一些专门用于支持与您的 Django 站点进行编程交互的内容。

以Django [REST 框架](http://django-rest-framework.org/)为例。那里也有其他人。

# .net - Wix 不会卸载 IIS Web 应用程序

> ID：12256697
> 
> 赞同：5
> 
> 时间：2012-09-04T04:12:04.633
> 
> 标签：.net, iis, installation, wix, wix-extension

我正在使用 Wix 3.5 构建一个 MSI 安装程序，该安装程序在 IIS 7 中安装两个 Web 应用程序。用户可以为每个应用程序选择是安装在“默认网站”下还是安装在 IIS 中的任何其他现有网站下。通过在 IIS 中创建两个 Web 应用程序，安装程序可以在安装期间正常工作。问题是卸载产品后，一个应用程序被删除，而另一个应用程序留在IIS管理器中，所以必须手动删除它。所有与 WebApp 相关的文件和组件都被删除，但 IIS WebApp 被留下。安装程序针对 x86 和 x64 目标体系结构进行编译。我正在 Windows Server 2008 R2 中测试安装程序。

笔记：

*   该问题仅发生在 x64 Windows Server 2008 R2 中。在 x86 中，这两个应用程序都已从 IIS 中正确删除。
*   仅当两个应用程序都安装在同一个网站下时才会出现此问题（一个被删除，另一个被留下）。
*   我尝试安装 3 个 Web 应用程序，发现其中两个被删除，第三个被留下。扩展 Web 应用程序取决于它们在 Product.wxs 中定义的顺序
*   我在卸载期间检查了空属性，但事实并非如此。
*   通过从 WebService 应用程序中删除“iis:WebApplication”标记元素，虚拟目录将从 IIS 中删除。

我看不出我做错了什么。我在 Stackoverflow 中阅读了很多关于 的文章，但我没有发现这个问题。我非常感谢您在这个问题上的帮助或指导。

这是我在网站上的第一篇文章，如果我犯了任何错误，请见谅。我一直在寻找这个问题的解决方案，但没有发现有人遇到这个问题。也许我的 Wix XML 代码有问题。

Product.wxs 的相关部分：

```
<Directory Id="TARGETDIR" Name="SourceDir">
        <!-- Program Files (x86) -->
        <Directory Id="ProgramFilesFolder">             
            <Directory Id="INSTALLDIR_x86" Name="MyApplications">                                   
                <!-- Web Service IIS WebAPP -->
                <Directory Id="WebServicesDIR" Name="MyWebApp1 5.2">
                    <!-- Windows Server 2008 and Vista Application pool -->
                    <Component Id="WebReportingAppPool" Guid="{SOME_GUID}" DiskId="1" KeyPath="yes" Win64="no">
                        <!-- Define Application Pool -->
                        <iis:WebAppPool Id="WebServicesAppPool" Name="Web Reporting 5.2" Identity="networkService" ManagedPipelineMode="integrated" ManagedRuntimeVersion="v2.0" />
                        <!-- remove WebServicesDIR folder on uninstall -->
                        <RemoveFolder Id="WebServicesDIR" On="uninstall" />
                    </Component>
                    <!-- Web App 1 Virtual Directory -->
                    <Component Id="App1_VirtualDirectory" Guid="{SOME_GUID2}" DiskId="1" KeyPath="yes" Win64="no">
                        <!-- Virtual directory -->
                        <iis:WebVirtualDir Id="App1_WebVirtualDirectory" Alias="WebReportingServices_1" Directory="WebServicesDIR" WebSite="IWSTargetWebSite">
                            <!-- Web Application -->
                            <iis:WebApplication Id="WebServicesWebApp" Name="WebReportingServices-5.2" WebAppPool="WebServicesAppPool">                                 
                                <iis:WebApplicationExtension Extension="dll" CheckPath="yes" Script="yes" Executable="[#FIsapi_dll]" Verbs="GET,HEAD,POST" />
                                <iis:WebApplicationExtension Extension="srf" CheckPath="yes" Script="yes" Executable="[#FIsapi_dll]" Verbs="GET,HEAD" />
                            </iis:WebApplication>
                            <!-- Properties -->
                            <iis:WebDirProperties Id="WebServicesWebDirProp" Read="yes" LogVisits="yes" Index="yes" Script="yes" Execute="no" DefaultDocuments="default.htm" BasicAuthentication="no" PassportAuthentication="no" DigestAuthentication="no" IIsControlledPassword="no" WindowsAuthentication="yes" />
                        </iis:WebVirtualDir>
                        <!-- indicate the application is installed -->
                        <RegistryValue Root="HKLM" Key="Software\MyCompany\WebServices-5.2" Name="installed" Type="integer" Value="1" />
                    </Component>
                </Directory>                                                        
            </Directory>
        </Directory>                    
    </Directory>

    <Directory Id="WebTaskFolder" Name="Web Tasks 4.3">
            <!-- Application pool user -->
            <Component Id="IWAApplicationPoolUser" Guid="{SOME_GUID3}" DiskId="1" Permanent="yes" Transitive="yes">
                <!-- do not anything on uninstall/upgrade/reinstall -->
                <Condition>NOT Installed AND NOT UPGRADE AND NOT (REINSTALL ~= "ALL")</Condition>
                <CreateFolder />
                <!-- Application Pool and anonymous User -->
                <util:User Id="IWAApplicationPoolAccount" Domain="[IWA_APP_POOL_DOMAIN]" Name="[IWA_APP_POOL_USERNAME]" Password="[IWA_APP_POOL_PASSWORD]" CreateUser="no" UpdateIfExists="no" RemoveOnUninstall="no">                      
                    <util:GroupRef Id="IISGroup" />
                </util:User>
            </Component>
            <!-- Windows Server 2008 and Vista Application pool -->
            <Component Id="IWAApplicationPool" Guid="{Guid Here}" DiskId="1" KeyPath="yes">
                <!-- Define Application Pool -->
                <iis:WebAppPool Id="IWAWebAppPool" Name="Web Tasks 4.3" Identity="other" User="IWAApplicationPoolAccount" ManagedPipelineMode="integrated" ManagedRuntimeVersion="v2.0" />
                <!-- remove folder on uninstall -->
                <RemoveFolder Id="WebTaskFolder" On="uninstall" />                  
            </Component>
            <!-- Virtual Directory -->
            <Component Id="WebTaskVirtualDir" Guid="{Guid here}" DiskId="1" KeyPath="yes">                  
                <iis:WebVirtualDir Id="IWAWebVirtualDir" Alias="WebTasks4.3" Directory="WebTaskFolder" WebSite="IWATargetWebSite">
                    <!-- Web Application -->
                    <iis:WebApplication Id="WebTasksVirtualDirectoryWebApplication" Name="WebTasks6.3" WebAppPool="IWAWebAppPool" />
                    <!-- Properties -->
                    <iis:WebDirProperties Id="IWAVirtualDirectoryWebDirProperties" AnonymousAccess="yes" AnonymousUser="IWAApplicationPoolAccount" Read="yes" LogVisits="yes" Index="yes" Script="yes"  Execute="no" DefaultDocuments="default.aspx" BasicAuthentication="no" PassportAuthentication="no" DigestAuthentication="no" IIsControlledPassword="no" WindowsAuthentication="yes" />
                </iis:WebVirtualDir>
                <!-- indicate the application is installed -->
                <RegistryValue Root="HKLM" Key="Software\MyCompany\WebTasks-4.2" Name="installed" Type="integer" Value="1" />                   
            </Component>                                
   </Directory>                                 
    <!-- Add Virtual Directory to IWSTargetWebSite -->
    <iis:WebSite Id='IWSTargetWebSite' Description="WebTasks WebApp" Directory="WebServicesDIR" SiteId="[IWS_TARGET_WEBSITE]">
        <iis:WebAddress Id="IWerbServiceWebAddress" IP="*" Port="80" />
    </iis:WebSite>
    <!-- Add Virtual Directory to IWATargetWebSite -->
    <iis:WebSite Id='IWATargetWebSite' Description="WebServices WebApp" Directory="WebTaskFolder" SiteId="[IWA_TARGET_WEBSITE]">
        <iis:WebAddress Id="IWebTaskWebAddress" IP="*" Port="80" />
    </iis:WebSite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:47:02.067

我没有看到您的功能或产品元素。您是将这些组件构建到 1 个 MSI 还是 2 个 MSI 中？

一般来说，请阅读安装程序日志以查看卸载时是否遗留任何组件。我在共享组件/多实例安装中看到了很多。一旦解决方案是给组件一个假文本文件并将其标记为密钥文件并将组件标记为共享。

除了猜测之外，详细的答案需要更多信息。

# javascript - 如何将 ember-data 记录转换为基本查询字典而不是 JSON？

> ID：12256699
> 
> 赞同：0
> 
> 时间：2012-09-04T04:12:15.177
> 
> 标签：javascript, ember.js

我已经能够破解 ember-data RESTAdapter 并使用 djangorestframework 使其适用于我的 django Web 应用程序。这显然是与 Rails 实现的不同风格的 REST。

我正在扩展原始 DS.RESTAdapter 以使用 django 方法，我很好奇如何将它们通常变成 JSON 的“记录”取而代之以“foo=bar&baz=”的基本查询字典

这是我到目前为止所做的工作 - 我只是想要一种不那么硬编码的方法

```
DS.RESTAdapter = DS.Adapter.extend({
  bulkCommit: false,

  createRecord: function(store, type, record) {
    var root = this.rootForType(type);

    //var data = {};                                                                             
    //data[root] = record.toJSON();
    var data = 'username=%@'.fmt(record.get('username'))
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:54:06.733

如果您像这样定义模型：

```
MyApp.MyModel = DS.Model.extend({
    property: DS.attr('string'),
    ....
});

MyApp.MyModel.reopenClass({
  url: '/path?ids=%@
}); 
```

然后在您的适配器中：

```
find: function(store, type, id) {
    var url = type.url;
    url = url.fmt(id);
    ....
}) 
```

# javascript - 回调中的 grunt.js console.log 不输出任何内容

> ID：12256704
> 
> 赞同：0
> 
> 时间：2012-09-04T04:13:03.083
> 
> 标签：javascript, node.js, gruntjs

我的代码有什么问题，文件相关 API 的回调中的 console.logs 在 CLI 中没有显示任何内容。

```
module.exports = function (grunt) {

    var path = require("path"),
        fs = require("fs"),
        gm = require("gm");
    grunt.registerMultiTask("imagesizeslist", "Generate image sizes list", function () {
        var files = grunt.file.expandFiles(this.file.src);
        grunt.helper('imagesizeslist', files);
    });

    //  grunt.log.write(contents);

    grunt.registerHelper('imagesizeslist', function (files) {
        files.forEach(function (file) {
            basename = path.resolve(file);
            var exec = require('child_process').exec,
            child;
            //using sips
            console.log('sips "'+basename+'" -g pixelHeight');
            child = exec('sips "'+basename+'" -g pixelHeight',
              function (error, stdout, stderr) {
                  console.log(error);
                console.log('stdout: ' + stdout);
            });
            // using gm
            gm(basename).size(function (err, size) {
                if (!err)
                    console.log(size.width > size.height ? 'wider' : 'taller than you');
                else
                    console.log("test");
                console.log(size);
            });
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:50:47.343

该`exec()`方法是异步的，因此您需要告诉 grunt 并在完成时执行异步回调。它在文档中：[为什么我的异步任务没有完成？](http://gruntjs.com/frequently-asked-questions#why-doesn-t-my-asynchronous-task-complete)

# ios - 制作按钮图片专属的按钮点击？

> ID：12256706
> 
> 赞同：0
> 
> 时间：2012-09-04T04:13:08.853
> 
> 标签：ios, button, cocos2d-iphone, click, ccmenuitem

我有一个奇怪的，恼人的问题。

例如，在我的主菜单屏幕中，我有一个显示“说明”的按钮。

单击该按钮后，在说明层中，有一个按钮可将您带回主菜单。

然而，由于某种原因，按钮动作并不是精灵图像独有的。如果我在距离“backtomenu”按钮 3 英寸处单击，它仍然会带我回到主菜单。

所以，我的问题是，我怎样才能让一个按钮只有在你点击实际图像时才会被点击？（这就是我创建按钮的方式）

```
 - (id) init
{
    if((self = [super init]))
    {
        [self instructions];
    }
    return self;
}

- (void) instructions
{
    bgI = [CCSprite spriteWithFile:@"testbackground11.png"];
    [bgI setPosition:ccp(160,240)];
    ccTexParams params = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
    [bgI.texture setTexParameters:&params];
    [self addChild:bgI z:0];

    returnToMenu = [CCMenuItemImage itemFromNormalImage:@"berry2.png"
                                                            selectedImage:@"berry2_selected.png"
                                                            target : self
                                                            selector: @selector (ifReturnToMenu:)];
    CCMenu *myReturnMenu = [CCMenu menuWithItems:returnToMenu, nil];

                            [myReturnMenu alignItemsVertically];

                            [self addChild: myReturnMenu];

}

- (void) ifReturnToMenu: (CCMenuItem *) menuItem
{
    if(menuItem == returnToMenu)
    [[CCDirector sharedDirector] replaceScene:
     [CCTransitionFade transitionWithDuration:0.5f scene: [MainMenu scene]]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:24:00.383

我不确定“isReturnToMenu”是如何被触发的，但你可以试试这个

```
- (void) ifReturnToMenu: (CCMenuItem *) menuItem{
if(menuitem == returnToMenu){
    [[CCDirector sharedDirector] replaceScene:
    [CCTransitionFade transitionWithDuration:0.5f scene: [MainMenu scene]]];
} 
```

}

如果它不起作用，您需要发布触发它的代码，以便我们为您提供更多帮助

# jquery - 如何在弹出窗口或工具提示中显示自定义 HTML

> ID：12256707
> 
> 赞同：2
> 
> 时间：2012-09-04T04:13:08.890
> 
> 标签：fullcalendar, jquery, fullcalendar

我想使用[fullcalendar](/questions/tagged/fullcalendar "显示标记为“fullcalendar”的问题")显示像 Google Calendar 这样的工具提示/弹出窗口。

每当用户单击日期单元格时，应该会弹出一个屏幕，我想在其中显示自定义 HTML/PHP 代码。当用户输入值时，我想使用 PHP 将其保存在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:12:00.180

我认为`eventRender`回调更适合这个。

检查这个小提琴：http: [//jsfiddle.net/100thGear/h9cC6/](http://jsfiddle.net/100thGear/h9cC6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:12:34.330

您可以使用几个不同的库（例如[http://www.jquerypopup.com/](http://www.jquerypopup.com/)）。

然后使用这样的东西：

```
$(document).ready(function() {
    //Change these values to style your modal popup
    var align = 'center';                                       //Valid values; left, right, center
    var top = 100;                                              //Use an integer (in pixels)
    var padding = 10;                                           //Use an integer (in pixels)
    var backgroundColor = '#FFFFFF';                            //Use any hex code
    var borderColor = '#000000';                                //Use any hex code
    var borderWeight = 4;                                       //Use an integer (in pixels)
    var borderRadius = 5;                                       //Use an integer (in pixels)
    var fadeOutTime = 300;                                      //Use any integer, 0 = no fade
    var disableColor = '#666666';                               //Use any hex code
    var disableOpacity = 40;                                    //Valid range 0-100
    var loadingImage = 'lib/release-0.0.1/loading.gif'; //Use relative path from this page

    //This method initialises the modal popup
    $(".modal").click(function() {
        var source = 'intro.php';   //Refer to any page on your server, external pages are not valid
        var width = 500;                    //Use an integer (in pixels)

        modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
    }); 

    //This method initialises the modal popup
    $(".landscape").click(function() {
        var source = 'lib/landscape.jpg';   //Refer to any page on your server, external pages are not valid
        var width = 920;                    //Use an integer (in pixels)
        var top = 10;                       //Use an integer (in pixels)

        modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
    });

    //This method hides the popup when the escape key is pressed
    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            closePopup(fadeOutTime);
        }
    });
}); 
```

或者在没有插件的情况下使用这个选项：[How to generate a simple popup using jQuery](https://stackoverflow.com/questions/1328723/how-to-generate-a-simple-popup-using-jquery)

我发现 jQuery Mobile 插件非常有用：

[http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/)

```
<script src="../../../js/jquery.mobile-1.2.0-alpha.1.js"></script>
<a href="#popupBasic" data-rel="popup">Open Popup</a>

<div data-role="popup" id="popupBasic">
    <p>This is a completely basic popup, no options set.<p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T11:25:33.817

看看我的小提琴链接[`FullCalendar with QTip`](http://jsfiddle.net/ramsunvtech/XyNnH/)

参考这个[`FullCalendar Document eventRender`](http://arshaw.com/fullcalendar/docs/event_rendering/eventRender/)。下面是示例代码片段。

事件渲染

```
$('#calendar').fullCalendar({
  events: [
    {
      title: 'My Event',
      start: '2010-01-01',
      description: 'This is a cool event'
    }
    // more events here
  ],
  eventRender: function(event, element) {
    element.qtip({
      content: event.description
    });
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:05:56.863

我设法回答了我自己的问题。我在 FullCalendar 初始化中添加了以下内容：

```
select: function(start, end, allDay, jsEvent, view){
    $('#addEvent').css({ left: jsEvent.pageX, top: jsEvent.pageY }).show("slow").fadeIn();
}, 
```

在该方法中，我使用了一个隐藏的 div，它存在于我的 HTML 中，如下所示：

```
<div id="addEvent" style="display: none; background-color:#F7F7F7;position: absolute; width: 300px; z-index: 1000;">
</div> 
```

# php - Drupal 7 自定义页面模板的预处理功能

> ID：12256709
> 
> 赞同：0
> 
> 时间：2012-09-04T04:13:13.997
> 
> 标签：php, drupal, drupal-7, drupal-theming

我需要在预处理器函数中初始化一些变量。我知道我可以使用的页面模板`mytheme_preprocess_page`。

我有一个自定义页面模板`page--mycustompage.tpl.php`。我只想为该模板预处理一些变量。有没有类似的选项`mytheme_preprocess_page_mycustompage(&$vars)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:43:20.747

我认为您应该尝试以下代码：

```
function mytheme_preprocess_page(&$vars)
{
    if(arg(0) == "mycustompage" && is_null(arg(1)))
    {
        // Your code goes here...
    }
} 
```

请注意，我假设“mycustompage”是您页面的路径。

希望它有效……穆罕默德。

# c++ - 从 C++ 函数返回大容量数据的最佳数据类型

> ID：12256712
> 
> 赞同：0
> 
> 时间：2012-09-04T04:13:27.560
> 
> 标签：c++, function, types, complex-data-types

我有一个 C++ 方法/函数，如下所示

```
std::string TestWrapImpl::doProcess(std::string dirPath, std::string cmdLine) {
  std::string TestWrapVar = "";

  // Businesslogic here
  // TestWrapVar = {BulkData From Business Logic} 
  // Sample Bulk Data - "<xml><node01><FNAME>KRISHNA</FNAME></node01>
  //                     <node02><FNAME>KRISHNA</FNAME></node02></xml>"

  return TestWrapVar;
} 
```

返回这 2GB 的 XML 内容的最佳数据类型是什么？（也许字符串数据类型不能容纳 2GB 的字符串。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:26:38.053

更好地将内容写入文件并将它们映射到内存（我希望你有一个 64 位的环境）。

虽然，XML 是保存如此大量数据的最不合适的格式之一。这是由于增加数据大小和解析速度低的系数大。

# ruby-on-rails - Rails 自定义验证器无法访问新的关联集合值

> ID：12256718
> 
> 赞同：0
> 
> 时间：2012-09-04T04:15:03.283
> 
> 标签：ruby-on-rails, nested-attributes, custom-validators

我正在尝试编写一个自定义验证器来检查添加到我的“报告”中的“值”总和是否为每个类别（行为）的特定值（600）。我的代码如下：

报告：

```
class Report < ActiveRecord::Base
  attr_accessible :value_ids, :values_attributes
  accepts_nested_attributes_for :values

  validate :validates_behaviour_sums

  def values_by_behaviour
    hash_hash = Hash.new( 0 ) 
    values.each do |v|
      au_hash = hash_hash[ v.behaviour ] 
        if au_hash.nil
        au_hash = Hash.new( 0 )
      end
      au_hash.store( v.assessed_user, v )
      hash_hash.store( v.behaviour, au_hash )
    end
  end

  def validates_behaviour_sums
    sums_valid = true
    self.values_by_behaviour.each do |behaviour_values|
      unless behaviour_values.values.sum == 600
        sums_valid = false
      end
    end
    unless sums_valid
      errors.add(:values, "The behaviours in each category must equal 600." )
    end
  end
end 
```

价值：

```
class Value < ActiveRecord::Base
  attr_accessible :value, :assessed_user_id, :behaviour_id

  belongs_to :assessed_user, :class_name => "User"
  belongs_to :behaviour

  belongs_to :report

  validates :value, :assessed_user_id, :behaviour_id, :presence => true
end 
```

当我尝试运行此代码时，出现以下错误：

**ReportsController#create 中的 NoMethodError**

0:Fixnum 的未定义方法“nil”

```
Rails.root: /Users/micah/dev/rails_projects/s2 
```

应用程序跟踪

```
app/models/report.rb:23:in `block in values_by_behaviour'
app/models/report.rb:18:in `values_by_behaviour'
app/models/report.rb:45:in `validates_behaviour_sums'
app/controllers/reports_controller.rb:35:in `create' 
```

似乎尚未设置集合“值”，但我不知道如何验证它们。它确实接受这些值并正确设置它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:34:41.253

您当前的错误是 0:Fixnum 的未定义方法 nil。如果你检查 nil 你应该写`au_hash.nil?`而不是`au_hash.nil`，或者如果你想检查零你应该使用`au_hash.zero?`

# android - 以 Webview 作为自定义控件的动态选项卡

> ID：12256721
> 
> 赞同：0
> 
> 时间：2012-09-04T04:15:48.683
> 
> 标签：android, custom-controls, android-webview, android-tabhost

我正在android中创建自定义控件。该自定义控件应该具有带有 Webview 的选项卡。如果我从用户端使用了这个自定义控件，那么他们可以访问 webview 事件。我尝试了以下方法，

**CustomTab.java**

```
public class CustomTab extends Activity 
{

    TabHost tabHost;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        View m_vForm;
        m_vForm = _createTABForm(); 
        addTab("Tab1","Tab1");
        addTab("Tab2","Tab2");
        addTab("Tab3","Tab3");
        addTab("Tab4","Tab4");
        setContentView(m_vForm);  
    }

    /** Create the TAB interface */
    private ViewGroup _createTABForm() {
        // construct the TAB Host
        tabHost = new TabHost(this);
        tabHost.setLayoutParams(
                new LinearLayout.LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        // the tabhost needs a tabwidget, that is a container for the visible tabs
        TabWidget tabWidget = new TabWidget(this);
        tabWidget.setId(android.R.id.tabs);
        tabHost.addView(tabWidget, new LinearLayout.LayoutParams(
                  LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 

        // the tabhost needs a frame layout for the views associated with each visible tab
        FrameLayout frameLayout = new FrameLayout(this);
        frameLayout.setId(android.R.id.tabcontent);
        frameLayout.setPadding(0, 65, 0, 0);
        tabHost.addView(frameLayout, new LinearLayout.LayoutParams(
                  LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));         

        tabHost.setup();        
        return tabHost;
    }

    public void addTab(String tagid, String title)
    {
         // create the tabs
        TabSpec ts1 = tabHost.newTabSpec(tagid);
        ts1.setIndicator(title);
        ts1.setContent(new TabHost.TabContentFactory(){
             public View createTabContent(String tag)
             {               
                    LinearLayout panel = new LinearLayout(CustomTab.this);
                    panel.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 
                            LayoutParams.WRAP_CONTENT));
                    panel.setOrientation(LinearLayout.VERTICAL);

                    WebView webview=new WebView(CustomTab.this);
                    webview.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));

                    panel.addView(webview);

                    return panel;
             }  
        }); 
        tabHost.addTab(ts1);
    }
} 
```

如果用户传递了 url，那么它应该被加载到特定的 webview 中，`how can i identify which tab is selected, and how to load the url in a corresponding webview`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:15:46.047

**我已经解决了这个问题:-)**

```
1\. I have created 4 instances of WebView from user side class
2\. Passed this with url to create the tab in CustomTab control
3\. Inside the CustomTab, need to set the Content of Tab as this webview instance
4\. After creation of Tab inside the CustomTab, should load this passed Url. 
```

这***对我有用***。

# javascript - 从 JavaScript 自定义对象公开事件的正确方法

> ID：12256723
> 
> 赞同：5
> 
> 时间：2012-09-04T04:15:54.707
> 
> 标签：javascript, javascript-events, event-handling

我在 JavaScript 中有一个自定义对象：

```
function Graph (dataType, provider){
   this.dataType = dataType;
   this.provider = provider;
} 
```

我通过“new”实例化这个对象，然后将它传递给我的代码的其他部分，这些部分可能需要跟踪对该对象属性的更改。

当 Graph 对象的属性被修改时，我希望通知该对象的所有其他消费者。在像 C# 这样的语言中，我会有一个 setter 来引发一个事件。在自定义 JavaScript 对象中创建事件的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:37:20.970

使用 JQuery，您可以随时创建任何类型的事件并将其附加到您想要的任何对象。

```
function Graph (dataType, provider){
   this.dataType = dataType;
   this.provider = provider;
}

var g = new Graph;

g.dataType = "whatever1";
g.provider = "whatever2";
g.event = $.Event("mywhateverEvent");
g.myOwnProperty2 = $.Event("thisisAnEventToo"); 
```

现在您可以进一步操作您的事件，对事件做任何您想做的事情，使用类似：

```
g.event = <whateverCodeIWant>;
g.myOwnProperty2 = <whateverCodeIwant2> 
```

由于您似乎喜欢构造函数，因此您也可以这样做：

```
function Graph (dataType, provider, evt){
   this.dataType = dataType;
   this.provider = provider;
   this.evt = evt
}

var myevt =  $.Event("whateverEvent");
myevt = <codeTomanipulatemyEventFurtherNowIfIWantTo>;
var g = new Graph("datawhatever", "providerwhatever", myevt);
$("whateverIWant").bind(myevt); 
//or whatever other binding - it will bind to that very event
$("whateverIWant").bind(g.evt);//equivalent to above line- binds to same event object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:44:14.587

[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)是你想要的（假设你[在桌面上不支持 IE < 9 或 Firefox < 4 没问题](http://kangax.github.com/es5-compat-table/)）

```
function Graph (dataType, provider){
   this._dataType = dataType;
   this._provider = provider;
}

Graph.prototype = {
    get dataType() {
        return this._dataType;
    },
    set dataType(data) {
        yourEventDispatcher.trigger("datatype modified");
        this._dataType = data;
    },
    get provider() {
        return this._provider;
    },
    set provider(data) {
        yourEventDispatcher.trigger("provider modified");
        this._provider = data;
    }
}; 
```

另请参阅：[Javascript getter and setter for dummy？](https://stackoverflow.com/questions/812961)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:51:30.340

使用 EventEmitter 库，例如[https://github.com/Wolfy87/EventEmitter](https://github.com/Wolfy87/EventEmitter)。完整指南在[这里](https://github.com/Wolfy87/EventEmitter/blob/master/docs/guide.md)，但简而言之，您将加载 EventEmitter javascript 文件，然后执行以下操作：

```
Graph.prototype = Object.clone(EventEmitter.prototype); 
```

然后你可以做

```
var g = new Graph("Blah", "Blah");
g.emitEvent('foo'); 
```

# iphone - iphone的音频下载管理器

> ID：12256724
> 
> 赞同：1
> 
> 时间：2012-09-04T04:15:57.230
> 
> 标签：iphone, ios, audio-player

我想从 Web 下载音频文件（mp3）。我不太清楚如何制作该下载管理器。如果可用，请提供任何来源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:25:49.290

请参阅[下载帮助程序](https://github.com/erica/iOS-5-Cookbook/tree/master/C15/03-Download%20Helper)链接并获得帮助。

# c# - 从数据网格获取行的详细信息时出现问题

> ID：12256725
> 
> 赞同：0
> 
> 时间：2012-09-04T04:16:05.277
> 
> 标签：c#, .net, wpf, wpf-controls, wpfdatagrid

我有一个声明如下的数据网格：

```
<DataGrid AutoGenerateColumns="True" Margin="10,174,12,35" Name="dataGridArchiveQueue" Visibility="Visible" 
AlternatingRowBackground="#01000000" 
BorderBrush="#FF688CAF" 
HorizontalGridLinesBrush="#37000000" 
VerticalGridLinesBrush="#37000000" 
CanUserAddRows="False" 
CanUserDeleteRows="False" 
IsReadOnly="True" 
SelectedItem="{Binding SelectedItemArchiveGrid}" Grid.ColumnSpan="2">
     <DataGrid.Resources>
          <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                                         Color="LightBlue" />
     </DataGrid.Resources>
</DataGrid> 
```

我使用以下内容填充此数据网格：

```
public DataView ArchiveEvents(string status, string sourceLibrary, string destinationLibrary)
        {
            var queryString = sourceLibrary == destinationLibrary &&
                                 (!String.IsNullOrEmpty(sourceLibrary) && !String.IsNullOrEmpty(destinationLibrary))
                                    ? @"SELECT  archive_queue_id AS 'ID',
                                                [status] AS 'Status' , 
                                                source_site AS 'Source Site', 
                                                source_url AS 'Source Library', 
                                                destination_site AS 'Destination Site' ,
                                                destination_url AS 'Destination Library',
                                                CASE WHEN recurring_job = 1
                                                THEN 'Yes'
                                                ELSE 'No'
                                                END AS 'Recurring Job' ,
                                                isnull(cast(last_run AS varchar(30)), 'Never') AS 'Last Run' ,
                                                isnull(cast(created_by AS varchar(30)), 'Unknown') AS 'Created By' ,
                                                created_date AS 'Created Date' ,
                                                isnull(last_modified_by, '') AS 'Last Modified By' ,
                                                isnull(cast(last_modified_date AS varchar(30)),'') AS 'Last Modified Date'
                                        FROM    marlin.archive_queue
                                        WHERE   upper([status]) LIKE '%' + upper(@status) + '%'
                                                AND upper(source_url) LIKE '%' + upper(@source_library) + '%'
                                                or upper(destination_url) LIKE '%' + upper(@destination_library) + '%'"
                                    : @"SELECT  archive_queue_id AS 'ID',
                                                [status] AS 'Status' , 
                                                source_site AS 'Source Site', 
                                                source_url AS 'Source Library', 
                                                destination_site AS 'Destination Site' ,
                                                destination_url AS 'Destination Library',
                                                CASE WHEN recurring_job = 1
                                                THEN 'Yes'
                                                ELSE 'No'
                                                END AS 'Recurring Job' ,
                                                isnull(cast(last_run AS varchar(30)), 'Never') AS 'Last Run' ,
                                                isnull(cast(created_by AS varchar(30)), 'Unknown') AS 'Created By' ,
                                                created_date AS 'Created Date' ,
                                                isnull(last_modified_by, '') AS 'Last Modified By' ,
                                                isnull(cast(last_modified_date AS varchar(30)),'') AS 'Last Modified Date'
                                        FROM    marlin.archive_queue
                                        WHERE   upper([status]) LIKE '%' + upper(@status) + '%'
                                                AND upper(source_url) LIKE '%' + upper(@source_library) + '%'
                                                AND upper(destination_url) LIKE '%' + upper(@destination_library) + '%'";

            using (var connection = new SqlConnection(GetConnectionString()))
            {
                using (var cmd = new SqlCommand(queryString, connection))
                {
                    connection.Open();

                    cmd.Parameters.AddWithValue("status", status != "Anything" ? status : "");
                    cmd.Parameters.AddWithValue("source_library", sourceLibrary != "Anything" ? sourceLibrary : "");
                    cmd.Parameters.AddWithValue("destination_library", destinationLibrary != "Anything" ? destinationLibrary : "");

                    using (var reader = cmd.ExecuteReader())
                    {
                        var dt = new DataTable();
                        dt.Load(reader);

                        connection.Close();
                        return dt.DefaultView;
                    }
                }
            }
        } 
```

我现在正在尝试获取选定行的内容，以便可以通过按钮对其进行编辑或删除。为此，我有以下属性：

```
public DataView SelectedItemArchiveGrid { get; set; } 
```

但不知道如何访问此属性以获取当前选定项目的详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:50:02.933

您需要将 SelectedItemArchiveGrid 的绑定属性类型从 DataView 更改为 DataRowView 并且需要在 XAML 上使用 RelativeSource 进行绑定

**XAML**

```
SelectedItem="{Binding DataContext.SelectedItemArchiveGrid, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}" 
```

**C＃**

```
private DataRowView _selectedItemArchiveGrid;
public DataRowView SelectedItemArchiveGrid
{
    get
    {
        return _selectedItemArchiveGrid;
    }
    set
    {
        _selectedItemArchiveGrid = value;
    }
} 
```

# c - 通过引用将数组传递给函数参数

> ID：12256727
> 
> 赞同：0
> 
> 时间：2012-09-04T04:16:27.460
> 
> 标签：c

我想在函数中操作整数数组，但我不确定是否应该使用地址前缀或指针前缀：

```
void shuffle(int *deck[]){  
    //statements
} 
```

或者

```
void shuffle(int &deck[]){  
    //statements
} 
```

此外，当我直接想操作数组的值时，我不确定是否应该使用（在函数内）

```
*deck[4] = 34 
```

或者是其他东西。

任何澄清表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:18:30.820

C 中没有引用（*您的 Q 仅标记为 C*），因此您必须使用指针版本。

当您说将数组传递给函数时，实际上传递给函数的是指向其第一个元素的指针，以下两种语法对编译器意味着相同且相同的东西：

```
void shuffle(int *p_deck); 
void shuffle(int deck[]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:21:49.297

您将不得不使用指针版本，但由于左右规则，我相信您的：

`int * deck[]`实际上是一个 int 指针数组，而不是一个 int 数组。

[http://cseweb.ucsd.edu/~ricko/CSE131/rt_lt.rule.html](http://cseweb.ucsd.edu/~ricko/CSE131/rt_lt.rule.html)

您应该只传递对数组中第一个元素的引用：

`int * deck`但是您可能希望传递数组的大小，以避免超出范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:22:04.083

两者都不。

由于数组只能通过引用传递，因此您不需要做任何技巧，只需传递一个指针并取消引用它。（无论如何，在你的第二个函数中涉及 & 的语法是无效的）。所以：

```
void shuffle(int arr[])
{
    arr[0] = 1337;
} 
```

或者

```
void shuffle(int *arr)
{
} 
```

等等，你可以像这样传递它：

```
int deck[52];
shuffle(deck); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T04:23:34.893

如果指定数组的大小，则可以在 C++ 中通过引用传递数组：

```
void shuffle(int (&deck)[52])
{
   deck[4] = 34;
} 
```

如果您不知道大小，或者您仅限于 C，则需要使用指针。

另一个 (C++) 选项是使用向量作为卡片组，并改为传递对向量的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T04:18:34.390

C 没有引用^((a))，那是 C++。

在 C 中，当传递给函数时，数组`X`衰减为指向指针`X[0]`，因此一种方法是使用：

```
void shuffle (int *pDeck) {
    // use pDeck[something]
}
:
int deck[] = {0,1,2,3,4,5,6,7,8,9};
shuffle (deck); 
```

我实际上更喜欢该方法而不是`void shuffle (int pDeck[])`变体，因为前者清楚地表明您现在正在处理指针而不是数组。

这很重要的原因是因为这样做时会丢失大小信息，因此您可能也希望将其传递：

```
void shuffle (int *pDeck, size_t sz) {
    // use pDeck[0 thru sz-1]
}
:
int deck[] = {0,1,2,3,4,5,6,7,8,9};
shuffle (deck, sizeof (deck) / sizeof (*deck)); 
```

* * *

^((a))：虽然它们是一个*非常*好的功能。我确实希望 ISO 将它们用于下一个 C 标准，因为该语言的新手遇到的大量问题都与指针有关，而引用可以很好地隐藏其复杂性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T04:19:03.283

数组在传递给函数时会衰减为指针，因此在这里使用额外的间接级别是没有意义的。

根据 C99 标准的 §6.3.2.1，

> 除非它是运算`sizeof`符或一元`&`运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为“类型数组*”*的表达式将转换为类型为“类型指针”的表达式，该*类型*指向数组对象的初始元素，不是左值。如果数组对象具有寄存器存储类，则行为未定义。

```
void shuffle(int deck[]) {
  ...
} 
```

请注意，C 不支持引用，只支持指针。您可能正在考虑 C++。

# youtube - 如何使用 youtube API 从 videoID 获取相关视频

> ID：12256731
> 
> 赞同：2
> 
> 时间：2012-09-04T04:16:52.840
> 
> 标签：youtube, youtube-api, youtube-javascript-api

如何通过 Youtube API 获取列表相关视频。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:26:56.310

你应该点击这些链接

`对于代码，.NET、PHP、Phython 等文档如下

[https://developers.google.com/youtube/code#sample_code](https://developers.google.com/youtube/code#sample_code)

`对于使用 Youtube ChromeLess Player 的 API 概述，请关注

[https://developers.google.com/youtube/getting_started](https://developers.google.com/youtube/getting_started)

`对于 Youtube 播放器的控制（如相关视频），请关注

[http://gdata.youtube.com/demo/index.html](http://gdata.youtube.com/demo/index.html)

以下是一些示例代码

`对于 PHP [http://www.ibm.com/developerworks/xml/library/x-youtubeapi/](http://www.ibm.com/developerworks/xml/library/x-youtubeapi/)

`对于 ASP.NET [http://www.codeproject.com/Articles/42324/YouTube-API-for-ASP-NET](http://www.codeproject.com/Articles/42324/YouTube-API-for-ASP-NET)

# javascript - CoffeeScript 循环遍历方法

> ID：12256732
> 
> 赞同：1
> 
> 时间：2012-09-04T04:17:13.210
> 
> 标签：javascript, loops, methods, coffeescript

我有一个对象文字，用于对方法进行分组。我希望能够轻松调用一整组方法，如下所示：

```
group =
  methodA: (str) ->
    console.log str + "from method A"

  methodB: (str) ->
    console.log str + "from method B"

for method in group
  method "hello"

# should log to console:
# "hello from method A"
# "hello from method B" 
```

当我尝试这个时，它似乎不起作用。我错过了什么/你应该如何循环通过一组这样的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:21:09.227

`for ... in`编译成一个`for`循环，假设您正在遍历一个数组 - 请`for own ... of`改用：

```
group =
  methodA: (str) ->
    console.log str + "from method A"

  methodB: (str) ->
    console.log str + "from method B"

for own method of group
  group[method] "hello" 
```

# android - 没有日食，libgdx 会玩得好吗？

> ID：12256733
> 
> 赞同：0
> 
> 时间：2012-09-04T04:17:50.507
> 
> 标签：android, libgdx

我只用 android 做了一点工作，而且我不是 Eclipse 的忠实粉丝。我一直在使用 Ant 构建脚本处理命令行。libgdx 会在文本编辑器/命令行环境中运行良好吗？我似乎无法在网上找到任何文档——似乎每个人都在使用 Eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:28:00.783

好吧，这里没有什么特别的。

我正在使用 libgdx`IntelliJ IDEA`并且对它非常满意。这只是设置正确`PATH`和的问题`CLASSPATH`。

# objective-c - iOS：UIView 直接实现一个 Nib

> ID：12256738
> 
> 赞同：0
> 
> 时间：2012-09-04T04:18:37.700
> 
> 标签：objective-c, ios, xcode, interface-builder

抱歉，如果这有一个明显的答案，我似乎找不到任何描述这种情况的东西。如何设置直接实现自定义 UIView 的 nib 文件？换句话说，nib文件中的顶级视图变成了我自定义的UIView类的一个实例？到目前为止，我能找到的最接近的是创建一个自定义 UIView，它加载 nib 并将其顶级视图设置为 UIView* 属性（以及通过加载 owner:self 将其所有子视图到适当的插座）。这行得通，但据我了解，顶级 View 除了充当所有其他视图的容器之外什么都不做 - 这是我的自定义 UIView 应该做的。有什么建议么？

**编辑：**我最后得到了这个：问题是我的自定义视图类被设置为文件的所有者类，而它应该被设置为顶级视图的类。我不知道可以在 IB 和 Owner 中的元素上设置插座。将 Owner 设置为将持有它的 ViewController 的类，并将顶级视图设置为我的自定义视图，这一切都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:23:27.520

如果您使用单一视图模板创建项目，您将获得一个空视图。如果您添加一个作为 UIView 子类的类，您可以将 IB 中该视图的类更改为您的类（在身份检查器中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:24:18.183

如果我正确理解了您的问题，那么这应该会有所帮助-

在 IB 的右侧窗格中。选择“自定义类”下拉列表并填写您的自定义 UIView 类。该图像显示`UITableViewCell`而不是放置您的自定义 UIView 类名称。

![在此处输入图像描述](../Images/f8d92297273ef8d0c5519a85dda8a051.png)

如果我没有正确理解您的问题，请纠正我。

# sql - 如何检查上一行和下一行的值

> ID：12256739
> 
> 赞同：1
> 
> 时间：2012-09-04T04:18:38.463
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
id date value

001 23/03/2012 P
001 24/03/2012 A
001 25/03/2012 P
001 26/03/2012 P

.... 
```

我想按日期检查上一行和下一行的值，如果它是 P，那么我想做一个当前行 P

预期产出

```
id date value

001 23/03/2012 P
001 24/03/2012 P 'Updated as per the condition
001 25/03/2012 P
001 26/03/2012 P
.... 
```

如何查询上述条件

需要查询帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:27:55.460

看看下面的示例脚本。

```
DECLARE @Table TABLE(
        ID VARCHAR(20),
        [Date] DATETIME,
        Value VARCHAR(10)
)

INSERT INTO @Table SELECT '001','23/Mar/2012','P' 
INSERT INTO @Table SELECT '001','24/Mar/2012','A' 
INSERT INTO @Table SELECT '001','25/Mar/2012','P' 
INSERT INTO @Table SELECT '001','26/Mar/2012','P'

SELECT  *
FROM    @Table

UPDATE  @Table
SET     Value = 'P'
FROM    @Table t
WHERE   t.Value = 'A'
AND             
        (
            SELECT  TOP 1
                    Value
            FROM    @Table tBelow
            WHERE   t.ID = tBelow.ID
            AND     t.Date > tBelow.Date
            ORDER BY tBelow.Date DESC
        ) = 'P' --Previous
AND     (
            SELECT  TOP 1
                    Value
            FROM    @Table tBelow
            WHERE   t.ID = tBelow.ID
            AND     t.Date < tBelow.Date
            ORDER BY tBelow.Date
        ) = 'P' --Next

SELECT  *
FROM    @Table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:25:30.073

```
-- Input parameters
declare @cur_id char(3)
declare @cur_dt datetime
set @cur_id = '001'
set @cur_dt = '2012-03-25'

-- Search previous/next row
declare @prev_dt datetime
declare @next_dt datetime

select  @prev_dt = max(date)
from    YourTable
where   id = @cur_id
        and date < @cur_dt
        and value = 'A'

select  @next_dt = min(date)
from    YourTable
where   id = @cur_id
        and date > @cur_dt
        and value = 'A'

-- Update previous/next row if found
update  YourTable
set     value = 'P'
where   id = '001'
        and date in (@prev_dt, @next_dt) 
```

# php - 提交新表单时，先前提交的表单数据消失

> ID：12256745
> 
> 赞同：-3
> 
> 时间：2012-09-04T04:19:27.690
> 
> 标签：php, javascript, html

我在一个页面上有多个表单，并且在提交表单时所有表单都被重定向到同一页面，但是在提交新表单时之前提交的表单值消失了。

我尝试使用会话对我不起作用还有什么？请帮忙

```
<script language="javascript">

function row(x,y){

    //var len=document.forms[x].name.value;

    if(x.value.length >=3)
    {   
        //alert("Message form no> "+y+"will be submited");

        document.forms[y].submit();

    }

}
</script>
</head>

<body >
<center>
<h2>Database App</h2>
    <table>
    <tr>
     <th><lable>Name :</label></th>
    <th><label>E_Id :</label></th>
    <th><label>Email  :</label></th>
    <th><label>Other Info :</label></th></tr>
<tr>
<?php     
    error_reporting(E_ALL ^ E_NOTICE);  
    // code check for name in database and if exists,displays in table row

    //for($i=0;$i<150;$i++)
    //{
//$E_id=array();
        if($_POST){
            $i = $_GET["uid"];

       //echo "fhwefwej==".$i;
       $x='name'.$i;
      // echo 'dasvds'.$x;
        if($_POST[$x])
        {
            $name       =   strtolower($_POST[$x]);

            $E_id[$i]       =   "";
            $Email[$i]      =   "";
            $Otherinfo[$i]  =   "";
            $con    =   mysql_connect('localhost','root','') or die("npt");
            $db     =   mysql_select_db("trainee")or die("nptdff");
            $query  =   "Select * from reguser where fname like '".$_POST[$x]."%'";
            $result =   mysql_query($query);
            mysql_num_rows($result);
            if(mysql_num_rows($result)>0)
            {
                while($row=mysql_fetch_array($result))
                {
                    $str=$row['fname'];
                    $initials = strtolower(substr($str,0,3));

                    if($name == $initials)
                    {
                        //echo "exist"."<br>";
                        $E_id[$i]= $row['fname'];
                        $Email[$i]=$row['lastname'];
                        $Otherinfo[$i]=$row['address'];
                        break;
                    }
                }
            }
            else
            {
            $msg[$i] = "no user with these initials";
            }
            mysql_close($con);
        }

    }
    for($i=0;$i<150;$i++)
    {

   //session_start();
   //echo session_name($i)."<br>";
    echo "<form name='form$i' action='new2.php?uid=$i' method='post'>";
    echo "<td><input type='text' name='name$i' id='name$i' onkeyup='row(this,$i);'  /><br />";
    echo "<span id='availability_status' >";
    if($_POST[$x]){echo $msg[$i];}
    echo "</span> </td>";

    echo "<td><input type='text' name='E_id' id='E_id' value='";
    if(isset($_POST[$x])){ echo $E_id[$i];}
    echo "' disabled='disabled' />";
    echo "</td>";
    echo "<td><input type='text' name='email' id='email' value='$Email[$i]' disabled='disabled' />";
    echo "</td>";
    echo "<td><input type='text' name='otherinfo' id='otherinfo' value='$Otherinfo[$i]' disabled='disabled' />";
    echo "</td></tr>";
    echo " </form>";
    }
    //echo '<script language="javascript">document.getElementById(\'name0\').focus();</script>';

    ?>

    </table>
    </center>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:49:14.073

为什么不使用 AJAX。这将有助于让您在后端提供不同的表单信息

您可以将这些信息存储在数据库或文件中。

这将是最好的方式。

# android - 确保即使在应用程序关闭时通知仍然存在

> ID：12256748
> 
> 赞同：0
> 
> 时间：2012-09-04T04:20:02.427
> 
> 标签：android, notifications

我正在开发一个应用程序，该应用程序将在触发警报时显示通知。通知只会在应用程序仍在运行时显示，但是我希望即使在应用程序关闭时通知也会保留，因此当用户选择通知时，它将再次运行应用程序。有什么办法吗？任何帮助将不胜感激。我还将感谢提供的任何示例或教程。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T11:25:03.910

我用的怎么样

```
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

我想在未来通过 alarmMenager 推送通知它在应用程序仍在运行时工作，而我调用 allarm menager 以在未来设置通知并关闭我的通知未显示的应用程序。我必须做什么？

在这里你得到了我的事件发送者：

```
Calendar cal = Calendar.getInstance();
 cal.set(Calendar.HOUR, HOUR_OF_DAY);
 cal.set(Calendar.MINUTE, MINUTE);
 //cal.add(Calendar.SECOND, SECOND_OF_DAY);
 Intent intent = new Intent(UnityPlayer.currentActivity, TimeAlarm.class);
 intent.putExtra("alarm_status", statusMessage);
 intent.putExtra("alarm_title", title);
 intent.putExtra("alarm_content", content);
 Log.i("SenderEvent ", "przygotowane dane");
 PendingIntent sender = PendingIntent.getBroadcast(UnityPlayer.currentActivity.getApplicationContext(), REQUEST_CODE, intent, PendingIntent.FLAG_UPDATE_CURRENT);
 am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

和接收者：

```
Bundle bundle = intent.getExtras();
        String statusMessage = bundle.getString("alarm_status");
        String title = bundle.getString("alarm_title");
        String content = bundle.getString("alarm_content");
        nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
                new Intent(), 0);
Notification notif =new Notification();//R.drawable.ic_launcher,statusMessage, System.currentTimeMillis());;
        //notif.largeIcon = bitmap;
        notif.icon =2130837504;
        notif.tickerText=statusMessage;
        notif.when= System.currentTimeMillis(); 
        /*
        new Notification(0,
                statusMessage, System.currentTimeMillis());*/
        notif.setLatestEventInfo(context, title, content, contentIntent);
        nm.notify(NOTIFY_ME_ID, notif); 
```

将来在应用程序关闭时推送通知有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:09:43.670

首先，您需要使用服务创建通知。我以前也有同样的问题。我正在使用phonegap，并从插件创建通知，但事实证明只有服务可以在后台运行。然后在服务中添加我的代码来创建通知，并且我使用广播接收器的意图。

```
 notificationManager = (NotificationManager) context.getSystemService(android.content.ContextWrapper.NOTIFICATION_SERVICE);
      note = new Notification(imageResource, tickerText, System.currentTimeMillis() );

     // Intent notificationIntent = new Intent(context, path.to.class);
      Intent notificationIntent = new Intent(context, package.path.to.receiver.class);

      notificationIntent.setAction(Intent.ACTION_VIEW);
      notificationIntent = notificationIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

      //contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
      contentIntent = PendingIntent.getBroadcast(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
      note.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

正如您在上面的代码中看到的，我注释掉了 getActivity，并将其更改为 getBroadcast。这在服务中运行意味着您可以在应用程序关闭时收到通知。为了让接收器中的意图能够在关闭时打开您的应用程序，请添加

```
...

@Override
public final void onReceive(Context context, Intent intent) {
    Log.v('TAG','TEST');

     //start activity
    Intent i = new Intent();
    i.setClassName("package.path", "package.path.mainActivity");
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
}
... 
```

和xml

```
 <receiver android:name="path.to.receiver" android:label="@string/app_name">
   <intent-filter>
      <action android:name="path.to.receiver.BROADCAST" />
   </intent-filter>
</receiver> 
```

我希望这有帮助

# object - 链接 cuda 目标文件

> ID：12256751
> 
> 赞同：1
> 
> 时间：2012-09-04T04:20:19.847
> 
> 标签：object, compilation, cuda

我有一个 .cu 文件，其中包含我的 cuda 内核，以及一个调用内核的包装函数。我也有一堆 .c 文件，其中一个包含主要功能。这些 .c 文件之一从 .cu 调用包装函数来调用内核。

我编译这些文件如下：

```
LIBS=-lcuda -lcudart
LIBDIR=-L/usr/local/cuda/lib64
CFLAGS = -g -c -Wall -Iinclude -Ioflib
NVCCFLAGS =-g -c -Iinclude -Ioflib
CFLAGSEXE =-g -O2 -Wall -Iinclude -Ioflib

CC=gcc
NVCC=nvcc
objects := $(patsubst oflib/%.c,oflib/%.o,$(wildcard oflib/*.c))

table-hash-gpu.o: table-hash.cu table-hash.h
        $(NVCC) $(NVCCFLAGS) table-hash.cu -o table-hash-gpu.o

main: main.c $(objects) table-hash-gpu.o
    $(CC) $(CFLAGSEXE) $(objects) table-hash-gpu.o -o udatapath udatapath.c $(LIBS) $(LIBDIR) 
```

到目前为止一切都很好。table-hash-gpu.cu 从 .c 文件之一调用函数。为 main 链接时，我收到该函数不存在的错误。有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:25:07.833

nvcc 使用主机 C++ 编译器编译设备和主机代码，这意味着[名称 mangling](http://en.wikipedia.org/wiki/Name_mangling)。如果需要在 C++ 中调用使用 C 编译器编译的函数，则必须告诉 C++ 编译器它使用 C 调用约定。我认为您看到的错误与此类似：

```
$ cat cfunc.c 

float adder(float a, float b, float c)
{
    return a + 2.f*b + 3.f*c;
}

$ cat cumain.cu 

#include <cstdio>
float adder(float, float, float);

int main(void)
{
    float result = adder(1.f, 2.f, 3.f);
    printf("%f\n", result);
    return 0;
}

$ gcc -m32 -c cfunc.c
$ nvcc -o app cumain.cu cfunc.o
Undefined symbols:
  "adder(float, float, float)", referenced from:
      _main in tmpxft_0000b928_00000000-13_cumain.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

在这里，我们使用 nvcc（即宿主 C++ 编译器）编译的代码试图调用 C 函数并出现链接错误，因为 C++ 代码需要`adder`在提供的目标文件中使用一个错误的名称。如果 main 像这样更改：

```
$ cat cumain.cu 

#include <cstdio>
extern "C" float adder(float, float, float);

int main(void)
{
    float result = adder(1.f, 2.f, 3.f);
    printf("%f\n", result);
    return 0;
}
$ nvcc -o app cumain.cu cfunc.o
$ ./app
14.000000 
```

有用。用于限定对 C++ 编译器的函数声明，它在引用和生成的代码正确链接`extern "C"`时不会使用 C++ 修改和链接规则。`adder`

# c++ - POO 和 STL 向量（将对象添加到变量）

> ID：12256757
> 
> 赞同：-4
> 
> 时间：2012-09-04T04:21:00.967
> 
> 标签：c++

```
#include <cstdlib>
#include <iostream>
#include <vector>
#include <string>
#include <string.h>
using namespace std;

class Empleado {
    private:

        string m_nombre;
        string m_provincia;
        string m_trabajo;
        int m_ID;

    public:
        void ImprimirInfo();
        void Toma_Nombre( string nombre ) { m_nombre = nombre ;}
        void Toma_Provincia( string  provincia) { m_provincia = provincia ;}
        void Toma_Trabajo ( string trabajo ) { m_trabajo = trabajo ;}
        void Toma_ID ( int ID ) { m_ID = ID ;}
        string Dame_Nombre( ){ return m_nombre ;}
        string Dame_Provincia( ){ return m_provincia ;}
        string Dame_Trabajo( ){ return m_trabajo ;}
        int Dame_ID( ){ return m_ID ;}
};

void Empleado::ImprimirInfo( )
{
   cout << "Nombre: " << m_nombre << '\n';
   cout << "Provincia: " << m_provincia << '\n';
   cout << "Puesto: " << m_trabajo << '\n';
   cout << "Salario: " << m_ID << '\n';
}
Empleado Agregar_Nuevo()
{
    Empleado nuevo_empleado;
    string name;
    string state;
    string job;
    int identification;

    cout<<"\nIngrese su nombre: ";
    scanf("%s",&name);
    cout<<"\nIngrese su provincia: ";
    scanf("%s",&state);
    cout<<"\nIngrese su puesto: ";
    scanf("%s",&job);
    cout<<"\nIngrese su ID: ";
    scanf("%d",&identification);

    nuevo_empleado.Toma_ID(identification);
    nuevo_empleado.Toma_Nombre(name);
    nuevo_empleado.Toma_Provincia(state);
    nuevo_empleado.Toma_Trabajo(job);

    return nuevo_empleado;
}

int main()
{
    string name;
    string state;
    string job;
    int identification=0;

    Empleado new_empleado;

    vector <Empleado> v;

    int menu=0;

    while (menu!=6)
    {
        cout<<"-------Menu Principal------\n"<<endl;//just a menu
        cout<<"1.Agregar Empleado"<<endl;
        cout<<"2.Eliminar Empleado"<<endl;
        cout<<"3.Modificar Empleado"<<endl;
        cout<<"4.Imprimir Empleado"<<endl;
        cout<<"5.Imprimir todos los empleados"<<endl;
        cout<<"6.Salir"<<endl;
        cout<<"\n En que opcion desea Ingresar: ";
        cin>>menu;
        switch(menu)
        {
        case 1:
            new_empleado=Agregar_Nuevo();// I think here is the problem
            cout<<"H"<<endl;
            v.push_back(new_empleado);
            cout<<"Agregado con exito"<<endl;
            break;
        case 2:

            cout<<"\nIngrese el ID a eliminar: ";
            scanf("%d",&identification);
            for (int i=0;i< v.size();i++)
            {
                v.at(i).ImprimirInfo();
            }
            break;
        case 3:
            cout<<"Modificar Empleado"<<endl;
            break;
        case 4:
            /*nuevo_empleado.Dame_Nombre();*/
            break;
        }
    }

    return 0;
    cin.get();
} 
```

好的，我是 C++ 编程的新手。我对名为 AgregarEmpleados() 或类似的方法有疑问。我一直试图解决这个问题很长时间没有结果。我做了一条双线评论，上面写着“我认为这就是问题所在。” 我认为问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:36:45.597

您无法阅读`std::string`using `scanf`。`scanf("%s", ...)`期望 a`char*`并且您不能简单地将指针传递给`std::string`，这是一个非常不同的数据结构。一个快速的解决方法是更改​​如下所示的行：

```
scanf("%s",&name); 
```

对此：

```
std::cin >> name; 
```

或这个：

```
std::getline(std::cin, name); 
```

# dynamics-crm-2011 - 将任何类型的数学添加到 CRM 报告中的 Money 字段都会返回 #error

> ID：12256760
> 
> 赞同：1
> 
> 时间：2012-09-04T04:21:09.093
> 
> 标签：dynamics-crm-2011

我在 Dynamics CRM 2011 中有一份报告，我正在尝试构建该报告，该报告需要一个货币字段才能对其应用一些数学运算。

```
=Fields!new_entity.new_moneyfield.Value 
```

工作正常

```
=Fields!new_entity.new_moneyfield.Value*2 
```

返回#错误

我错过了什么？

# php - 如何将集成 mysql 连接到其他后关系数据？

> ID：12256764
> 
> 赞同：1
> 
> 时间：2012-09-04T04:21:43.557
> 
> 标签：php, mysql, web-services, odbc

有什么方法可以将 MySql DB 连接到 Post Relational DB 之一，或者更简单地说，如果我们完全在 MySQL 上创建应用程序，那么我们希望使用某个桥将某些字段发送或传输到另一个关系后 DB（ INTERSYSTEM 的 CACHE DB）我们正在使用 odbc 来执行此功能，但是为了保存我们的应用程序完整性和环境，我们可以使用 Web 服务之类的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:36:42.817

听起来您想使用 SOAP 或类似方法将机器安全地相互公开并相互调用方法。

XML 可以接缝很重，但至少它是标准化的。

一些有用的页面/注释： - [http://php.net/manual/en/class.simplexmlelement.php](http://php.net/manual/en/class.simplexmlelement.php) - [http://sourceforge.net/projects/nusoap/](http://sourceforge.net/projects/nusoap/) - [http://phpmaster.com/web-services- with-php-and-soap-1/](http://phpmaster.com/web-services-with-php-and-soap-1/) - PHP 的 SoapClient 有一些不幸的部分，当您以组合方式编写代码时可能会很痛苦 - .NET 机器上的 SOAP 有一些非常烦人的弱点，需要（例如）手动替换字符串您的请求（可以在您需要重载的 SoapClient 的 __doRequest 函数中完成）= 希望这永远不会与您相关

# mysql - Mysql:当查询这个sql:"select * from user limit 0,1000",如果允许删除操作

> ID：12256765
> 
> 赞同：1
> 
> 时间：2012-09-04T04:21:48.207
> 
> 标签：mysql, locking

我有一个 mysql 锁定问题：如果我查询这个 sql: `select * from user order by id asc limit 0,1000`。然后另一个线程同时删除用户表中0,1000之间的行，如果允许的话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:04:28.563

在[InnoDB 的 MySQL 文档中](http://dev.mysql.com/doc/refman/5.6/en/innodb-transaction-model.html)，它指出`InnoDB does locking on the row level and runs queries as nonlocking consistent reads by default`。

然而，更直接的是[内部锁定方法](http://dev.mysql.com/doc/refman/5.6/en/internal-locking.html)，它说`MySQL uses table-level locking for MyISAM, MEMORY, and MERGE tables, allowing only one session to update those tables at a time`. 另外，这个：

```
MySQL grants table write locks as follows:
    1\. If there are no locks on the table, put a write lock on it.
    2\. Otherwise, put the lock request in the write lock queue.
MySQL grants table read locks as follows:
    1\. If there are no write locks on the table, put a read lock on it.
    2\. Otherwise, put the lock request in the read lock queue. 
```

好的，让我们来消化一下：**在 InnoDB**中，每一行都有自己的锁，这意味着您的查询将遍历表，直到它遇到有锁的行。但是，**在 MyISAM**中，整个表只有一个锁，它是在执行查询之前设置的。

换句话说，对于 InnoDB，如果 DELETE 操作在 SELECT 操作读取该行*之前*删除了该行，那么该行将不会显示在结果中。但是，如果 SELECT 操作首先读取该行，那么它将在结果集中返回，但任何未来的 SELECT 操作都不会显示该行。如果您想有意锁定 InnoDB 中的整个结果集，请查看[SELECT ... FOR UPDATE](http://dev.mysql.com/doc/refman/5.6/en/innodb-locking-reads.html)。

在 MyISAM 中，表默认是锁定的，因此取决于哪个查询先*开始执行*：如果 DELETE 操作先开始，则不会使用 SELECT 返回该行。但是如果 SELECT 操作首先开始执行，那么该行确实会被返回。

这里有更多关于交错的信息：http: [//dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

还有这里：[有什么方法可以选择而不会导致 MySQL 锁定？](https://stackoverflow.com/questions/917640/any-way-to-select-without-causing-locking-in-mysql)

# postgresql - PostgreSQL 调优数据仓库的最佳实践

> ID：12256771
> 
> 赞同：7
> 
> 时间：2012-09-04T04:22:08.387
> 
> 标签：postgresql

我找到了大量关于如何为 OLTP 应用程序调整和优化 Postgres 性能的在线和打印指南，但我还没有找到任何特定于数据仓库应用程序的内容。由于工作负载的类型存在如此多的差异，我确信在管理和调整数据库的方式上肯定存在一些差异。

我自己的一些：

*   我从 DDL 方面发现我更自由地使用索引，因为我通常只担心一天一次的插入，并且可以通过索引重建进行批量插入。

*   对于通常具有多个自然键的数据，我通常会使用整数代理键来实现更快的连接

*   我通常会定义和维护一个非常全面的日期表，该表具有预先构建的日期操作（会计日期而不是日历日期、财政年度月份、一周的开始日期等）并自由使用它而不是在 select 语句中使用函数和 where 语句。这通常在受 CPU 限制的聚合查询期间有所帮助。

我希望我能找到一些关于内存管理和其他数据库设置的信息，但我很高兴听到任何特定于基于 Postgres 的数据仓库的有用的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T13:07:27.377

我的经验（诚然，在数据仓库方面规模很小）：

*   就像您提到的那样，预聚合数据很容易成为最重要的事情，因为它将需要读取的数据量减少了许多数量级。
*   避免短写事务、子事务和保存点。这包括 PL/pgSQL 中的异常处理。这些会快速消耗可用的“事务 ID”空间，并导致[需要重写整个表的昂贵的“环绕”真空](http://www.postgresql.org/docs/current/static/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND)。
*   我发现分区表使得每个分区都可以单独放入内核的缓存中，这对于维护和迁移很有好处，如果你需要做任何事情的话。这意味着您可以在一个分区上重新创建所有索引，只需从磁盘进行 1 次 seq 扫描，而不是对每个索引进行一次扫描。
*   就像 Chris 已经提到的，对 work_mem 和 maintenance_work_mem 大方一些；如果您的工作负载不适合 RAM，那么由于更智能的查询计划（最重要的是 HashAggregate），在内存中保留更多临时数据可以节省 I/O 和 CPU 时间。
*   如果您需要做大量工作，购买专用 SSD 来存储临时文件会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:14:54.393

从内存管理的角度来看，您最大的区别之一是您通常希望将工作的 OLTP 设置保留在内存中，而 OLAP 环境并非如此。此外，您的连接集通常更大。这意味着更高的 work_mem 设置可能非常有用，并且在表非规范化的范围内，这意味着可以将 work_mem 推高一点。我不确定我对 shared_buffers 的建议是否会改变（我更喜欢从低位开始并增加，在每一步测试性能），但如果您正在报告任何大小的集合，work_mem 肯定需要增加。

# java - 在java中从服务器端执行的javascript？

> ID：12256773
> 
> 赞同：3
> 
> 时间：2012-09-04T04:22:21.443
> 
> 标签：java, javascript

我一直在寻找有关此的真实信息，我正在使用 Java EE 上的一些系统，我一生都在网络上工作，现在我正在进入系统，我的老板告诉我他让 javascripts 从“服务器端”工作以管理民意调查和东西，我仍然认为不正确，我告诉他我认为 javascript 只是在客户端执行，似乎仍然是正确的，我找到了关于说它是可能的信息，它不是，有人对此有一些有效的答案吗？如果是，这怎么可能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:24:29.323

您确实可以使用第三方包（如[node.js](http://nodejs.org/)、[Mozilla Rhino](https://developer.mozilla.org/en-US/docs/Rhino)或类似包）在服务器端执行 JavaScript。

但是，从您的描述中我不清楚他是否希望您从服务器端实际*执行*JavaScript，从服务器端*提供*JavaScript 内容，或者使用 AJAX对服务器端代码*进行远程过程调用。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:37:37.833

脚本 API 位于 Java SE 6 平台中可用的 javax.script 包中。

参考链接：-

[http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:42:20.287

您也可以在服务器端执行 javascript，这意味着在服务器端开发以服务器为中心的代码用于 etsblishing 连接、提供 HTML 文件等。所有这些事情都可以使用服务器端 javascript 来完成。有很多框架可以用来实现这一点.运行服务端javascript的主要目标是执行服务器端功能。一个这样的例子是维护与客户端的长期连接。

Nod.js就是这样一个框架，用来实现上述功能。除此之外，还有其他的服务器端javascript框架。RhinoJS可以用来在Java虚拟机中运行时在服务器端执行javascript .

但是，使用服务器端 javascript 框架的想法会根据您的要求而有所不同。

# php - 将函数参数传递给内部函数？

> ID：12256779
> 
> 赞同：7
> 
> 时间：2012-09-04T04:23:42.913
> 
> 标签：php

我正在尝试创建一个函数来启动 date_compare() ，它是`usort`特定数组和键的函数。

```
function init_date_compare($key, $array) {
    $key2 = $key;
    function date_compare($a, $b) {
        global $key2;
        $t1 = strtotime($a[$key2]); $t2 = strtotime($b[$key2]);
        return $t2 - $t1;
    }
    usort($array, "date_compare");
}
$arr = array(array("Aug-2-2012"), array("June-2-2012"));
$arr = init_date_compare(0, $arr);
print_r($arr); 
```

这输出：

```
Notice: Undefined index: in... 
```

（所以基本上为空，范围界定不起作用）。

我不确定作用域如何与函数内部的函数一起工作，但如果我没记错的话，这是可能的。我尝试投入一些`global`s 并进行初始化`$key2`，但我无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:30:12.690

您的代码不起作用的原因是因为函数`global $key2;`内部`date_compare()`不会在范围内查找它`init_date_compare()`；相反，它会期望在全局范围内找到它。

除此之外，数组应该通过引用（即`&$array`）通过函数参数传递，或者应该从它返回数组。

闭包会让这一切变得更好（PHP >= 5.3）：

```
function init_date_compare($key, &$array)
{
    usort($array, function(array $a, array $b) use ($key) {
        $t1 = strtotime($a[$key]); $t2 = strtotime($b[$key]);
        return $t2 - $t1;
    });
} 
```

另一种方法是使用对象来封装状态：

```
class DateComparer
{
    private $key;

    public function __construct($key)
    {
        $this->key = $key;
    }

    public function compare(array $a, array $b)
    {
        $t1 = strtotime($a[$this->key]); $t2 = strtotime($b[$this->key]);
        return $t2 - $t1;
    }
}

function init_date_compare($key, &$array)
{
    usort($array, array(new DateComparer($key), 'compare'));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:46:13.167

当然，杰克斯的回答是做事的正确方式，但以防万一你想知道为什么它一开始就不起作用：
声明`$key2`为全局变量只是一个问题，另一个问题是函数`init_date_compare`不返回排序数组。
以下代码将起作用：

```
$key2=0;

function init_date_compare($key, $array) {
    global $key2;
    $key2 = $key;
    function date_compare($a, $b) {
        //global $key2;
        $t1 = strtotime($a[$key2]); $t2 = strtotime($b[$key2]);
        return $t2 - $t1;
    }
    usort($array, "date_compare");
    return $array;
}
$arr = array(array("Aug-2-2012"), array("June-2-2012"));
$arr = init_date_compare(0, $arr);
print_r($arr); 
```

# foursquare - 喜欢通过foursquare API的页面

> ID：12256780
> 
> 赞同：0
> 
> 时间：2012-09-04T04:23:54.593
> 
> 标签：foursquare

找不到通过 API 提供“喜欢页面”（不是页面更新）的端点。有什么建议么？看这里[https://developer.foursquare.com/docs/pages/pages](https://developer.foursquare.com/docs/pages/pages)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:46:24.557

您不会找到这样的端点：“像页面一样”明确旨在由用户完成，而不是通过 API。允许喜欢之类的东西的主要平台都没有为该操作提供 API 端点（Facebook 没有，Foursquare 也没有），因为它们不希望开发人员在系统上玩游戏并在未经用户同意的情况下无意（或故意）执行这些操作.

所以不：您可能永远不会为此找到 API 端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:47:33.100

此端点的文档即将发布（我们正在审核我们的 API 以记录 #allnew4sq 引入的新 API）

端点是 /pages/USER_ID/like 并且没有任何额外的参数可能会做你想做的事。

# java - 如何使用java使jasper报告中的数据像列表一样显示？

> ID：12256781
> 
> 赞同：1
> 
> 时间：2012-09-04T04:23:56.687
> 
> 标签：java, swing, jasper-reports, try-catch, operator-keyword

我想从表中的碧玉报告中显示数据/值，从第一行到最后一行连续显示..但我只能显示具有字符串类型的值，如果记录是 BigDecimal 或 Double，它就无法工作

这是我显示的报告：

```
 Name       Amount    Price

 dendi      150.0     12.500
 patricia 
 Kelvin 
 Andrew 
```

金额和价格刚刚显示了表格的最后一条记录，如果我在 java 项目中使用参数调用它们，该怎么办，例如：

```
paramater.put("name",name);
parameter.put("amount", amount); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:59:59.963

您可以使用**[JRMapCollectionDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRMapCollectionDataSource.html)**，其中表中的每条记录都放入一个 Map 中，并且每个映射都添加到一个集合中。如果您使用参数，它将不会对每条记录重复。

例如，在您的情况下，您可以*创建地图和地图集合*

```
Collection<Map<String, Object>> records = new ArrayList<Map<String,Object>>();

Map<String, Object> record1 = new HashMap<String, Object>();

record1.put("Name","dendi");
record1.put("Amount",amount1); //amount1 is a BigDecimal for 150.0
record1.put("Price", price1); // price1 is a Double for 12.500

records.add(record1); // add each record to your map

Map<String, Object> record2 = new HashMap<String, Object>();
record2.put("Name","patricia");
record2.put("Amount",amount2); //amount2 is a BigDecimal 
record2.put("Price", price2); // price2 is a Double 

records.add(record2); // add each record to your map 
```

*在 jrxml 中*定义**与键相同*的字段（名称、金额和价格 - 后两者为 BigDecimal/Double 类型）。Jasper Reports 库将负责从对象转换为 BigDecimal 或 Double。希望这可以帮助。*

 **PS：此代码仅用于说明目的**

# java - 如何在 Ubuntu 中从终端设置 Classpath 以使用 Sun Java

> ID：12256782
> 
> 赞同：1
> 
> 时间：2012-09-04T04:23:59.833
> 
> 标签：java, classpath, javabeans

如何运行[http://www.jsptut.com/Forms.jsp](http://www.jsptut.com/Forms.jsp)。我正在使用 Geany，但我不习惯使用 java。这个页面之前的简单jsp没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:13:38.070

如果您想为 Java 设置 CLASSPATH，您会发现这篇文章很有用：[https ://justinalex.com/ubuntu-install-oracle-java-jdk-8/](https://justinalex.com/ubuntu-install-oracle-java-jdk-8/)

它主要涉及基于两个需求编辑配置文件：

*   对于所有用户，或
*   对于单个用户

# mysql - 同一个for循环中的多个游标

> ID：12256784
> 
> 赞同：0
> 
> 时间：2012-09-04T04:24:07.483
> 
> 标签：mysql, oracle, oracle10g, oracle11g

我有一个关于使用游标的问题。

```
Table t1 having "t1c1" and "t1c2" columns.

Table t2 having "t2c2" and "t2c2" columns.

Table t3 having "t3c2","t3c2","t3c3","t3c4" columns.

Two cursors "cur1" and "cur2". 
```

我编写了需要使用光标“cur1”的for循环将值插入t3的代码

例子：

```
DECLARE

CURSOR cur1 IS
SELECT t1c1 FROM t1;

CURSOR cur2 IS
SELECT t2c1 FROM t2;

BEGIN

FOR f1 IN cur1 LOOP

EXIT WHEN cur1%NOTFOUND;

INSERT INTO TABLE t3
(
  SELECT f1.t1c1,t2.t2c2,'hello' FROM t2;
);

END LOOP; 
```

从上面的代码中，我插入了表 t3 的第一三列。

我想知道如何将 cur2（光标值）插入表 t3 的第 4 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:53:35.183

```
insert into t3
select t1.t1c1, t2.t2c2, 'Hello'
from t1,
     t2 
```

对我来说真正奇怪的是，您没有提到 t1 和 t3 之间的任何链接，所以您得到了cartezian。

# php - 在 Android 应用程序使用的基于 PHP 的页面上添加 HTML 代码

> ID：12256789
> 
> 赞同：0
> 
> 时间：2012-09-04T04:24:33.957
> 
> 标签：php, html, web

我有一个包含所有服务器端内容的 php 脚本页面。我的 android 应用程序利用这个 php 页面来访问数据库并执行不同的功能。

我尝试将此页面添加为我网站的首页并添加一些 HTML 代码以使其看起来更好。

现在我在同一页面上同时拥有 HTML 和 PHP 代码，这是网站的首页。这样做之后，我的 android 应用程序无法访问需要执行某些任务的页面的 php 代码，结果应用程序崩溃了。

所以我想知道是否有可能做这样的事情？如果有可能，任何人都可以告诉我最好的方法是什么？

我试着去做，但失败了。谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:39:58.667

您想在一个文件中完成所有工作。相反，您可以创建两个不同的文件。一个可以用作您的 android 应用程序的 web 服务，其中包含接受来自 andorid 设备的输入的所有功能，如果需要返回 json 编码结果。其他文件包含您在 Web 浏览器上的站点视图部分。这将很容易管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:48:35.137

有点难以理解您的意思，但据我所知，您正试图在网页上执行一些特定的 pho 代码以供您的 Android 应用程序使用。

首先，您应该确保仅当浏览器是 Android 设备时才执行 php 代码（而不是如果只是有人在他们的计算机上拉出页面）。为此，您需要让 php 检查浏览器的用户代理：

```
$ua = strtolower($_SERVER['HTTP_USER_AGENT']);
if(stripos($ua,'android') !== false) { 
  //PHP Code for Android Here
} 
```

完成检查后，只有在您从 Android 设备访问该站点时，才会执行该 If 语句中的任何 php。或者，如果您不想在浏览器不是 Android 的情况下提供页面，您可以`else`在上述代码之后添加一个块并重定向或死掉。我对你的其他问题有点模糊，但希望上面的代码块会有所帮助。

查看此页面：[使用 JavaScript 或 PHP](http://davidwalsh.name/detect-android)进行 Android 检测，了解有关使用 php 或 JavaScript 在网页中检测 Android 浏览器的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:25:05.023

谢谢大家，但我通过在我的 php 代码中添加“if else”语句和在“if else”语句的“else”部分中解决了这个问题，我为整个代码 HTML 模板代码分配了一个 php 变量，然后我回显它。

我让我的 android 应用程序检查“标签”如果标签是“android”，它会执行 if 语句中的代码部分，如果标签不是“android”，那么它会执行代码的 else 部分。

这是我所做的：

```
if(tag == 'android'){
//performs all the operations required by android app
}else{
//displays html template and ignore everything else
$htmlcode = '<html>...</html>';
echo $htmlcode;} 
```

谢谢大家的宝贵意见:)

# asp.net - 按钮单击 JSP

> ID：12256790
> 
> 赞同：1
> 
> 时间：2012-09-04T04:24:50.500
> 
> 标签：asp.net, jsp

我是 ASP.NET 开发人员，JSP 新手。如何在 JSP 中执行 Button Click 事件？

我想在服务器端而不是 Javascript 中执行代码。我知道我可以通过 Servelets 实现它。我对此有一些疑问。

1.) 我的 JSP 项目中有 30 页。我必须创建 30 个 Servelet 吗？

2.) JSP 中是否存在类似于 ASP.NET 的页面加载事件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:39:06.403

> 我的 JSP 项目中有 30 页。我必须创建 30 个 Servelet 吗？

不必要。可能是单个 servlet 执行一个或多个任务。

> JSP 中是否有类似于 ASP.NET 的页面加载事件？

是的，`void jspInit() { ... }`但是非常*不鼓励*在 JSP 中使用 Java 代码。

* * *

您可以通过读取请求参数来确定在 Servlet 的 doPost/Get 方法中按下了哪个`submit`按钮。

**TestServlet.java**

```
@WebServlet(name = "test", urlPatterns = {"/test"})
public class TestServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        String button=request.getParameter("cmd");
        if(button.equals("Add")){
           //
        }
        ...
    }
} 
```

**测试.jsp**

```
 |----- servlet url /test 
                            V
<form method="post" action="test">
  <input type="submit" name="cmd" value="Add"/>
  <input type="submit" name="cmd" value="Update"/>
</form> 
```

# android - 使用电话间隙技术删除android中的缓存

> ID：12256797
> 
> 赞同：0
> 
> 时间：2012-09-04T04:25:33.513
> 
> 标签：android, cordova

在我的应用程序中，可能存在缓存问题或 android 中的其他问题，我不知道如何解决此问题！[在此处输入图像描述][1]。实际上首先我从服务器下载列表，但是当我从列表中选择一个电台时，它很好，但是当我选择同一个电台时，它会像这样显示。

# .net - 水晶报表和替代品

> ID：12256803
> 
> 赞同：-3
> 
> 时间：2012-09-04T04:26:10.483
> 
> 标签：.net, crystal-reports

我是 Crystal Reports 的新手，对此我有几个问题：

1) Crystal Reports 是 .NET Framework 的一部分吗？

2) 是否有特定版本的 Crystal Report 与特定版本的 .NET Framework / Visual Studio 兼容？

3) 我们能否将 Crystal Reports 也用于其他平台，如 Java 等？

4) 有哪些可用于报告的替代方案，Crystal Report 与它们相比如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:30:25.313

1.  它曾经是 Visual Studio 的一部分，但现在不再是。

2.  它不再捆绑；相反，微软有 SQL Server Reporting Services (SSRS)

3.  是的，甚至还有 Eclipse 插件。

4.  在我的办公室周围，SSRS 似乎是首选。[Jasper](http://jasperforge.org/projects/jasperreports)似乎是一种流行的开源替代品。

# android - 检测是否在 Android 原生 JAVA 代码中加载了 phonegap

> ID：12256805
> 
> 赞同：2
> 
> 时间：2012-09-04T04:26:13.660
> 
> 标签：android, cordova

如果 phonegap 的 web 视图已完成加载，我需要从本机 JAVA（非 phonegap 插件）类中检测。这是可能的，还是我需要依赖将我的代码构建为插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:28:40.803

我终于找到了一个解决方案（经过测试并且有效）。这是一个棘手的解决方法，但可以完成工作。

**第 1 步：** 在与 MainActivity 相同的包中创建一个新类，如下所示：

```
public class MyClass{
    private WebView appView;

    public MyClass(DroidGap gap, WebView view){
        appView = view;
    }

    public void onLoaded(){
        // This will be called when webview loaded
        System.out.println("WORKED!!");
    }
} 
```

**第 2 步：** 将以下行添加到 MainActivity 中 onCreate() 的最后：

```
MyClass ai = new MyClass(this, super.appView);
super.appView.addJavascriptInterface(ai, "MyClass"); 
```

它应该看起来像这样：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    super.loadUrl("file:///android_asset/www/index.html");

    MyClass ai = new MyClass(this, super.appView);
    super.appView.addJavascriptInterface(ai, "MyClass");
} 
```

**第 3 步：** 在 assets/www 中的 JavaScript 代码中添加：

```
document.addEventListener("deviceready", function(){
    try{
        // Might throw an error but onLoaded() gets called correctly
        window.MyClass.onLoaded();
    }
    catch(e){
        console.error(e)
    }
}); 
```

**重要提示：**确保 cordova.js 正确包含在您的 index.html 中

这为我完成了工作。

# sql-server - SQL 客户端分析器？

> ID：12256806
> 
> 赞同：0
> 
> 时间：2012-09-04T04:26:18.560
> 
> 标签：sql-server, profiling, monitoring, client-side, instrumentation

我知道“ *SQL Server Profiler* ”，但是是否有任何工具或方法可用于监控客户端机器发出的 sql 查询？

目前在我脑海中的一些事情是：

1) SysInternals ProcMon 可以记录并判断客户端机器上的可执行进程何时连接到 sql server。是否有任何类似但更先进的工具可用于提供更多数据？

2) 任何可用于客户端机器的调试版本或检测版本的客户端库和 API 以允许此类操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T03:25:04.110

您可以从 ODBC 数据源管理器 (odbcad32.exe) 启用 ODBC 跟踪。它生成的日志文件相当神秘，但它会为您提供由该机器上的登录用户运行的 SQL 语句。还有一个标记为“所有用户身份的机器范围跟踪”的复选框，用于记录该机器上任何用户（包括服务）运行的所有 SQL 语句。

在您断开连接并重新连接到 SQL 服务器之前，可能不会开始记录。因此，重新启动连接到 SQL Server 的任何程序/服务是一个好主意。如果您启用了连接池，这一点尤其重要，即使有问题的程序已断开连接，它也会保持连接打开。

此外，Windows 64 位的 ODBC 数据源管理器有两个版本，一个用于 32 位，另一个用于 64 位。因此，您需要为正在跟踪的程序的适当位数启用日志记录。

*   [如何使用 ODBC 数据源管理器生成 ODBC 跟踪](http://support.microsoft.com/kb/274551)
*   [设置跟踪选项](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711020%28v=vs.85%29.aspx)
*   [为什么我的 32 位应用程序看不到我在 64 位机器上创建的 ODBC DSN？](http://blogs.msdn.com/b/farukcelik/archive/2008/10/17/why-my-32-bit-applications-cannot-see-the-odbc-dsns-that-i-created-on-my-64-bit-machine.aspx)
*   [ODBC 管理员工具在 64 位版本的 Windows 中显示 32 位和 64 位用户 DSN](http://support.microsoft.com/kb/942976)

**更新**：您的另一个选择是使用像[Wireshark](http://www.wireshark.org/)这样的工具。由于它具有位于网络驱动程序级别的能力，因此它可以拦截您所有的网络流量——包括但不限于 SQL。这些被称为[TDS 数据包](http://en.wikipedia.org/wiki/Tabular_Data_Stream)- [Sybase SQL Server (ASE)](http://en.wikipedia.org/wiki/Sybase_SQL_Server)、[Microsoft SQL Server](http://microsoft.com/sql)和[FreeTDS](http://freetds.schemamania.org/) (w/ [UnixODBC](http://www.unixodbc.org/) ) 使用的标准。

*   [RPR NA03：使用 Wireshark 和 Excel 分析 SQL Server 性能](https://www.youtube.com/watch?v=fY9S72FJbmE)
*   [如何使用 Wireshark 过滤应用程序和数据库服务器之间的 SQL Server 流量？](https://stackoverflow.com/questions/2562682/how-do-i-filter-sql-server-traffic-between-app-and-db-servers-using-wireshark)
*   [如何使用wireshark 解码SQL Server 流量？](https://stackoverflow.com/questions/2023589/how-can-i-decode-sql-server-traffic-with-wireshark)
*   [我的 SQL Server 数据在网络上是什么样子的？](http://www.mssqltips.com/sqlservertip/2436/what-does-my-sql-server-data-look-like-over-the-wire/)
*   [谷歌搜索“Wireshark+SQL”](https://www.google.com/search?q=wireshare%20sql)

# c# - 读取存储在数组中的不同目录中的每个文件

> ID：12256812
> 
> 赞同：1
> 
> 时间：2012-09-04T04:27:25.863
> 
> 标签：c#, arrays, getdirectories

我必须检查不同目录数组中的每个 xml 文件。

我的代码（仍然有错误）：

```
string files = "C:\Hello; C:\Hi; D:\Goodmorning; D:\Goodafternoon; E:\Goodevening";
//Get each path and remove whitespaces
string[] paths = files.Split(new[] { ';', ' ' }, StringSplitOptions.RemoveEmptyEntries);
//Use xmlLoc for adding \ to each file
List<string> xmlLoc = new List<string>();
//get the files in directories
string[] getFiles;
//contains the files of each directory
List<string> xmlList

//Add \ each paths variable and store it in xmlLoc list
foreach (string s in paths)
{
     xmlLoc.Add(s + @"\");
}

//get the xml files of each directory in xmlLoc and store it in xmlList
foreach (string file in xmlLoc)
{
     getFiles = Directory.GetFiles(file, "*.xml");
     //the code below lists an error "cannot convert from string[] to string"
     xmlList.Add(getFiles);
} 
```

我猜您不能将数组存储在字符串列表中。是否有任何其他方式可以读取存储在数组中的每个目录中的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:30:56.160

您是否尝试过使用[AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)？

就像是

```
xmlList.AddRange(getFiles); 
```

据我所知，你也可以选择类似的东西

```
List<string> xmlList = files.Split(new[] {';', ' '}, StringSplitOptions.RemoveEmptyEntries).
    SelectMany(p => Directory.GetFiles(p, "*.xml")).
    ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:31:27.997

目前尚不清楚您要做什么，但是您可以使用该[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)方法将`string[]`返回的数组的所有元素`Directory.GetFiles`一次添加到您的列表中：

```
 string[] getFiles = Directory.GetFiles(file, "*.xml");
 xmlList.AddRange(getFiles); 
```

还要考虑以下几点：

1.  你的`xmlList`实例没有初始化，试试：( `List<string> xmlList = new List<string>`);

2.  构造中变量`file`的名称用词不当，请考虑改用，因为这就是“元素”的含义。`foreach``directory``xmlLoc`

3.  你真的不需要这个`getFiles`变量，在你的情况下一个简单的 `xmlList.AddRange(Directory.GetFiles(file, "*.xml"));`就足够了。

4.  在空格上拆分不是一个好主意。目录名称（尽管不是您使用的示例）本身可能包含空格。

您的代码看起来有点复杂。AFAICT 以下将做同样的事情：

```
string directories = /* ... whatever ... */;
List<string> xmlList = new List<string>();

foreach (string directory in string.Split(new[] {';'}, StringSplitOptions..RemoveEmptyEntries))
{
   string dir = directory.Trim();

   if (!dir.EndsWith(Path.DirectorySeparator))
     dir += Path.DirectorySeparator;

   xmlList.AddRange(Directory.GetFiles(dir, "*.xml"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T04:41:02.520

解决它！只需要添加和替换一些代码.. :)

```
string files = "C:\Hello; C:\Hi; D:\Goodmorning; D:\Goodafternoon; E:\Goodevening";
//Get each path and remove whitespaces
string[] paths = files.Split(new[] { ';', ' ' }, StringSplitOptions.RemoveEmptyEntries);
//Use xmlLoc for adding \ to each file
List<string> xmlLoc = new List<string>();
//get the files in directories
string[] getFiles;

//Add \ each paths variable and store it in xmlLoc list
foreach (string s in paths)
{
     xmlLoc.Add(s + @"\");
}

//get the xml files of each directory in xmlLoc and loop it to read the files
foreach (string directory in xmlLoc)
{
     getFiles = Directory.GetFiles(directory, "*.xml");
     foreach(string files in getFiles)
     {
         MessageBox.Show(files);
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T06:10:18.550

试试这个，需要初始化XML列表，GetFiles返回一个数组，所以添加到XML列表时需要调用AddRange，而不是Add。

```
string files = "C:\Hello; C:\Hi; D:\Goodmorning; D:\Goodafternoon; E:\Goodevening";
            //Get each path and remove whitespaces
            string[] paths = files.Split(new[] { ';', ' ' }, StringSplitOptions.RemoveEmptyEntries);
            //Use xmlLoc for adding \ to each file
            List<string> xmlLoc = new List<string>();
            //get the files in directories
            string[] getFiles;
            //contains the files of each directory
            List<string> xmlList = new List<string>();

            //Add \ each paths variable and store it in xmlLoc list
            foreach (string s in paths)
            {
                 xmlLoc.Add(s + @"\");
            }

            //get the xml files of each directory in xmlLoc and store it in xmlList
            foreach (string file in xmlLoc)
            {
                 getFiles = Directory.GetFiles(file, "*.xml");
                 //the code below lists an error "cannot convert from string[] to string"
                 xmlList.AddRange(getFiles);
            } 
```

# java - 开源协作工具

> ID：12256820
> 
> 赞同：0
> 
> 时间：2012-09-04T04:29:03.503
> 
> 标签：java, collaboration, forums

我正在开发一个门户网站，现在有静态内容。我的网络服务器是tomcat。我计划使用论坛和博客在用户之间添加协作。根据您的经验，您能否分享如何为您的网站集成博客和论坛应用程序。我更喜欢在我的门户中拥有博客和论坛功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:54:21.093

检查此工具是否适用于您。

[http://pebble.sourceforge.net/](http://pebble.sourceforge.net/)

Pebble 是一个轻量级、开源的 Java EE 博客工具。它体积小、速度快、功能丰富，安装和使用极为方便。

# javascript - 计算机 JavaScript 上的 SSH

> ID：12256821
> 
> 赞同：-2
> 
> 时间：2012-09-04T04:29:10.370
> 
> 标签：javascript, ssh

前几天我在我的网站上创建了一个 Cydia 存储库。我想在我的网站上有一个按钮，可以在没有用户输入的情况下添加它。所以，这个想法是通过 JavaScript 做一些 sshing。

谁能给我指出一个与 SSH 相关的项目？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:58:31.607

[这是我熟悉的一个](http://www.masswerk.at/termlib/sample_remote_terminal.html)，虽然还有[其他的，但](https://help.ubuntu.com/community/AjaxTerm)我很惊讶你似乎没有尝试[谷歌](https://www.google.com/search?q=ajax+term&rlz=1C1CHFX_enUS461US461&sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8#hl=en&rlz=1C1CHFX_enUS461US461&sclient=psy-ab&q=ajax+terminal&oq=ajax+terminal&gs_l=serp.3..0j0i30l3.3068.3387.0.3577.4.3.0.1.1.0.76.222.3.3.0.les%3B..0.0...1c.cqaXLgcvjRM&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=4c4e4dd9cacdc02d&biw=1600&bih=832)。

# python - python beautifulsoup中表格单元格值为空白时获取文本输出

> ID：12256823
> 
> 赞同：0
> 
> 时间：2012-09-04T04:29:29.480
> 
> 标签：python, beautifulsoup, html-table

我正在编写一个 beautifulsoup/python 代码来从 html 表中抓取数据。表格的问题是某些列可能有空白数据（单元格为空）。当我运行此代码时，它第一次遇到表格中的空白单元格时，它会因“类型错误”而停止，并且我只得到输出直到该代码行。

下面的代码在第一次出现空单元格时停止并出现类型错误。

```
for tr in rows:
  cols = tr.findAll('td')
  for td in cols:
      text = ''.join(td.find(text=True))
  print 
```

上述代码的示例输出 -

```
A,  123,  c,  d,  6,  0,  KK, G,
V,  21,  b,  e,  6,  5,  kk, g,
M,  1,  a,  f,  7,  5,  BB, 
```

请注意，在上述输出的最后一行中，最后一个值 (BB) 之后没有数据。这是因为表格中有一个空白单元格，结果python在输出这么多后停止运行。

我尝试修改它，但现在它在某些已经有数据的单元格中一直输入空白。

更新代码：

```
for tr in rows:
  cols = tr.findAll('td')
  for td in cols:

      if td.find(text=''):
          text = ''.join('blank')
      else:
          text = ''.join(td.find(text=True))
      print text + ", ",
   print 
```

上述代码的示例输出 -

```
blank,  123,  c,  d,  6,  0,  blank, blank,
blank,  21,  b,  e,  6,  5,  blank, blank,
blank,  1,  a,  f,  7,  5,  blank, 
```

注意 - 即使在上面遇到第三个单元格中的实际空白数据后它也会停止。

我究竟做错了什么？当单元格没有数据时，我基本上希望单元格输出为空白，否则输出应该是实际的单元格内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:01:45.163

`TypeError`可能是由`.find_all(text=True)`返回引起的`None`：`''.join(None)`raises `TypeError`。检查 text 之前是否为 None 或为空`''.join`：

```
import csv
import sys
from bs4 import BeautifulSoup # pip install beautifulsoup4

csv_writer = csv.writer(sys.stdout)
soup = BeautifulSoup(html)
for tr in soup(id='your_table')('tr', recursive=False):
    row = []
    for td in tr('td', recursive=False):
        text = td(text=True)
        row.append(''.join(text) if text else 'blank')
    csv_writer.writerow(row) 
```

# windows - 如何增加内存来处理超大 Lua 表

> ID：12256824
> 
> 赞同：4
> 
> 时间：2012-09-04T04:29:30.957
> 
> 标签：windows, memory-management, lua

我有一个 Lua 函数，给定 n，生成从 1 到 n 的系列的所有排列，并将每个唯一系列以表格形式存储在容器表中。

这个生成的表的大小很快变得非常大（而且必然如此）。大约在我尝试 n = 11 的时候，脚本将运行几秒钟，然后出现“lua：内存不足”。我有 16gb 的物理 RAM，但是在 Windows 任务管理器中查看性能监视器可以让我看到运行时消耗的 ram，并且在脚本以内存错误结束之前它只达到了大约 20%。

我发现这篇文章看起来像是我需要前进的方向：[记忆 Lua 中的一个进程](https://stackoverflow.com/questions/7507033/memory-of-a-process-in-lua#answer-7507499)

由于我使用 Lua.exe 运行我的脚本，我假设我受限于 Windows 为 Lua.exe 分配的内存量。我可以增加这个金额吗？我可以使用 C# 包装程序来简单地运行 Lua 脚本（想法是它将具有更高/更少限制的内存分配）？还是我看错了方向？

* * *

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T11:05:52.320

您需要提前存储所有排列吗？您可以改为即时生成它们。

例子：

```
local function genPerm(self, i)
  local result = {}
  local f = 1
  for j = 1, self.n do
    f = f * j
    table.insert(result, j)
  end
  for j = 1, self.n-1 do
    f = f / (self.n + 1 - j)
    local k = math.floor((i - 1) / f)
    table.insert(result, j, table.remove(result, j+k))
    i = i - k * f
  end
  return result
end

local function perms(n)
  return setmetatable({n=n}, {__index=genPerm})
end

local generator = perms(11)
for _, i in ipairs {1, 42, 1000000, 39916800} do
  print(table.concat(generator[i], ','))
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T16:24:52.790

与 finn 的回答相同，这是另一个排列生成器：

```
local function perms(a,lo,hi,f)
    if lo>hi then f(a) end
    for i=lo,hi do
        a[lo],a[i]=a[i],a[lo]
        perms(a,lo+1,hi,f)
        a[lo],a[i]=a[i],a[lo]
    end
end

local function gperms(n,f)
    local a={}
    for i=1,n do a[i]=i end
    perms(a,1,#a,f)
end

local function show(a)
    for i=1,#a do io.write(a[i],' ') end
    io.write('\n')
end

gperms(4,show) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:25:14.540

您也许可以在 Lua 的 C++ 端使用[内存映射文件，您可以通过](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_file)[LuaBridge](https://github.com/vinniefalco/LuaBridge)为其提供 API 。

更新 1：内存映射文件的替代方案可能是 NoSQL 数据库

# elasticsearch - 使用 Mpdreamz/NEST 过滤搜索结果

> ID：12256826
> 
> 赞同：0
> 
> 时间：2012-09-04T04:29:38.233
> 
> 标签：elasticsearch

我有一个 Elasticsearch 索引，其中包含来自各种来源的新闻，如经济时报、cnn 等。我正在使用 Mpdreamz/NEST 在 C# 中集成弹性搜索。有没有办法从索引中显示一个名为“内容”的字段，该字段包含提供的源中的“帐户”一词。寻找类似 getContent(keyword="Accounts",source={List}){ }

# plone - 使用叠加表单时页面无主题

> ID：12256834
> 
> 赞同：1
> 
> 时间：2012-09-04T04:30:28.797
> 
> 标签：plone, xdv

当我提交显示在叠加层中的表单时，结果页面没有主题。如果我从常规页面视图提交相同的表单，该页面的主题将按预期进行。不知道如何调试这个？

使用 XDV，克隆 4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:42:07.473

首先，您是否尝试过移植到 plone.app.theming？它应该相对简单（在 patheming 文档中有一个指南），并且 patheming 随 Plone 4.2 一起提供，在 4.3 中甚至更好。我不*认为*有直接的不兼容，但可能有。XDV 不再被维护（例如，它被重命名为 plone.app.theming 并且在那里继续开发），所以移植可能迟早是必要的。

我唯一能想到的另一件事是是否存在某种条件或未主题路径列表，例如它是否正在寻找像 ajax_load 或路径尾端这样的请求参数并禁用主题？

最后，检查控制台输出/日志中是否有任何错误：XDV 不会引发站点错误，但如果有问题会记录。

# php - 用于存储数百万张图像的文件夹结构？

> ID：12256835
> 
> 赞同：15
> 
> 时间：2012-09-04T04:30:33.660
> 
> 标签：php, mysql, photo, storage

我正在建立一个网站，该网站正在查看数百万张轻松上传的照片（每张上传的图像都有 3 个缩略图），我需要找到存储所有这些图像的最佳方法。

我已经搜索并找到了存储为哈希的图像示例......例如......

如果我上传coolparty.jpg，我的脚本会将其转换为Md5 哈希，从而导致......

```
dcehwd8y4fcf42wduasdha.jpg 
```

并且存储在其中，`/dc/eh/wd/dcehwd8y4fcf42wduasdha.jpg` 但是对于 3 个缩略图，我不知道如何存储它们

**问题..**

1.  这是存储这些图像的正确方法吗？

2.  我将如何存储缩略图？

3.  在 PHP 中，使用上述方法存储这些图像的示例代码是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T04:39:29.820

我如何使用文件夹结构：

*   我正在上传照片，然后像你说的那样移动它：

    ```
    $image = md5_file($_FILES['image']['tmp_name']);
    // you can add a random number to the file name just to make sure your images will be "unique"
    $image = md5(mt_rand().$image);
    $folder = $image[0]."/".$image[1]."/".$image[2]."/";

    // IMAGES_PATH is a constant stored in my global config
    define('IMAGES_PATH', '/path/to/my/images/');
    // coolparty = f3d40fc20a86e4bf8ab717a6166a02d4
    $folder = IMAGES_PATH.$folder.'f3d40fc20a86e4bf8ab717a6166a02d4.jpg';
    // thumbnail, I just append the t_ before image name
    $folder = IMAGES_PATH.$folder.'t_f3d40fc20a86e4bf8ab717a6166a02d4.jpg';
    // move_uploaded_file(), with thumbnail after process
    // also make sure you create the folders in mkdir() before you move them 
    ```

*   我确实相信这是基本方式，当然您可以将文件夹结构更改为更深的结构，就像您说的那样，如果您将拥有数百万张图像，则使用 2 个字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T04:41:00.030

您使用这样的方法的原因只是为了减少每个目录（inode）的文件总数。

使用您描述的方法（3 级深度），您几乎不可能达到每个目录甚至数百个图像，因为您将拥有近 17MM 的最大目录数。16**6。

至于你的问题。

1.  是的，这是存储它们的好方法。
2.  我会这样做的方式是

    /aa/bb/cc/aabbccdddddddddddddd_thumb.jpg
    /aa/bb/cc/aabbccdddddddddddddd_large.jpg
    /aa/bb/cc/aabbccdddddddddddddd_full.jpg

    或类似的

3.  至于如何实际存储图像，网上有很多例子。你有更具体的问题吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T04:41:16.293

如果您谈论的是数百万张照片，我建议您将这些照片提供给第三方，例如 Amazon Web Services，更具体地说是针对此 Amazon S3。文件数量没有限制，假设您不需要实际列出文件，则根本不需要将它们分隔到目录中（如果您确实需要列出，您可以使用不同的分隔符和前缀- [http://docs.amazonwebservices.com/AmazonS3/latest/dev/ListingKeysHierarchy.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ListingKeysHierarchy.html)）。并且您的托管/rereival 成本可能会比自己做的要低 - 而且它们会得到备份。

更具体地说，是的，按子目录拆分；使用您的结构，您可以删除文件名的前 5 个字符，因为您已经在目录名称中拥有它。

正如阿奎那所建议的那样，拇指只是将 _thumb1 等附加到文件名。或者将它们存储在单独的文件夹中。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-04T04:34:27.073

1) 那是只有你能回答的问题。一般来说，我更喜欢将图像存储在数据库中，这样您就可以拥有一个一致的备份，但 YMMV。

2）如何？/dc/eh/wd/dcehwd8y4fcf42wduasdha_thumb1.jpg、/dc/eh/wd/dcehwd8y4fcf42wduasdha_thumb2.jpg 和 /dc/eh/wd/dcehwd8y4fcf42wduasdha_thumb3.jpg 怎么样

3）？？？您是在问如何将文件写入文件系统还是...？

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-04T04:41:20.780

改进答案。

对于数以百万计的图像，是的，使用数据库会减慢进程是正确的

最好的选择是使用“服务器文件系统”来存储图像并使用 .htaccess 来增加安全性。

或者您可以使用网络服务。许多服务器都提供Images Api 用于上传、显示。您也可以继续该选项。例如亚马逊

# asp.net - 横幅宽度不由浏览器大小固定

> ID：12256840
> 
> 赞同：4
> 
> 时间：2012-09-04T04:31:19.450
> 
> 标签：asp.net, html, css

我有一个与 Stackoverflow.com 网站类似的问题。问题是在网站内容或正文上方的横幅宽度。我希望能够减小浏览器页面的宽度，但无论浏览器运行什么分辨率都**保持横幅的大小。**

例如，如果您减小此页面的宽度，您会看到会出现一个滚动条，因此您可以将页面向右移动并查看内容隐藏。但是，如果您查看横幅，横幅将具有缩小页面的新宽度。

![减小浏览器宽度和横幅的示例未正确显示](../Images/2c0ee416cf3b1616437f0c7cd2f51d23.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:37:35.173

如果我理解正确，您可以在正文中定义**最小宽度。**像这样写：

```
body{
 min-width:975px;
} 
```

这主要发生在元素具有**自动宽度**且他的**父**级没有任何`width`定义的情况下。

# cakephp - Cakebake 类似 Symfony2 中的东西

> ID：12256844
> 
> 赞同：0
> 
> 时间：2012-09-04T04:31:33.597
> 
> 标签：cakephp, symfony, cakephp-2.0

我真的很喜欢 cakephp 中的 cakebake 功能。现在我想使用 Symfony2 ..

Symfony2 中是否有任何此类功能。

请告诉我

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:59:00.023

我不知道像 bake 这样的交互式工具，但 symfony2 也有控制台功能，可以立即创建包、控制器和 crud 应用程序。

看看这个：

[http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html)

或者

[http://symfony.com/doc/master/bundles/SensioGeneratorBundle/commands/generate_bundle.html](http://symfony.com/doc/master/bundles/SensioGeneratorBundle/commands/generate_bundle.html)

# c# - 如何在 c# 中访问属性属性中的类变量？

> ID：12256851
> 
> 赞同：4
> 
> 时间：2012-09-04T04:33:04.640
> 
> 标签：c#, propertygrid

我为我的属性网格定义了一个属性，它的值是创建者的集合。我定义*CreatorsEditor*类。在这个类中，我使用*HumanRolesCode*变量。如何在属性的属性中访问此变量以获取设置值。我想更改*HumanRolesCode*值。例如：*[Editor(typeof(CreatorsEditor(HumanRolesCode = 10))]*

我的代码是：

```
[Editor(typeof(CreatorsEditor), typeof(UITypeEditor))]
public string Creators { get; set; }
//-------------------------------------

public class CreatorsEditor : UITypeEditor
{
    public static int HumanRolesCode;

    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        IWindowsFormsEditorService svc = (IWindowsFormsEditorService)provider.GetService(typeof(IWindowsFormsEditorService));
        if (svc != null)
        {
            CreatorFrm.HumanRoleCode = HumanRolesCode;
            CreatorFrm Frm = new CreatorFrm();
            if (svc.ShowDialog(Frm) == System.Windows.Forms.DialogResult.OK)
            {
                string HumanNames = "";
                for (int i = 0; i < Frm.DgvCreator.Rows.Count; i++)
                    if (Boolean.Parse(Frm.DgvCreator[0, i].Value.ToString()) == true)
                        HumanNames += Frm.DgvCreator[2, i].Value.ToString() + " , ";
                if (!string.IsNullOrEmpty(HumanNames))
                    HumanNames = HumanNames.Substring(0, HumanNames.Length - 3);
                return HumanNames;
            }
        }
        return value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:44:33.447

属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式。

好像不能赋值一些，一般通过自定义属性的声明来让一些运行时代码（方法\属性）去执行。

自定义属性只是将附加信息与目标相关联的一种方式，编译器只是将附加信息添加到元数据中......当您想在编译时更改时，一个仅在运行时存在的变量。

此外，不会创建自定义属性的实例，直到您使用反射来检索它（再次 - 在运行时，而声明是在编译时）。

Jeffrey Richter 的“CLR via C#”一书中有一章是关于自定义属性的。我建议您阅读它以了解自定义属性的行为方式、使用它们的可能性以及如何使用它们。

# android - 从android中的矩阵获取旋转值？

> ID：12256854
> 
> 赞同：5
> 
> 时间：2012-09-04T04:33:21.930
> 
> 标签：android, matrix, rotation

如何从平移/缩放/旋转矩阵中旋转值？

```
Matrix matrix = new Matrix();
matrix.postScale(...);
matrix.postTranslate(...);
matrix.postRotate(...);
... 
```

现在我不知道`rotate`它是什么，但我需要得到它。这个怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-02-03T20:15:22.747

```
float[] v = new float[9];
matrix.getValues(v);
// translation is simple
float tx = v[Matrix.MTRANS_X];
float ty = v[Matrix.MTRANS_Y];

// calculate real scale
float scalex = v[Matrix.MSCALE_X];
float skewy = v[Matrix.MSKEW_Y];
float rScale = (float) Math.sqrt(scalex * scalex + skewy * skewy);

// calculate the degree of rotation
float rAngle = Math.round(Math.atan2(v[Matrix.MSKEW_X], v[Matrix.MSCALE_X]) * (180 / Math.PI)); 
```

从这里 [http://judepereira.com/blog/calculate-the-real-scale-factor-and-the-angle-of-rotation-from-an-android-matrix/](http://judepereira.com/blog/calculate-the-real-scale-factor-and-the-angle-of-rotation-from-an-android-matrix/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-17T04:20:36.833

我不能在这里输入方程式，所以我画了一张如何解决你的问题的图片。这里是：

[![在此处输入图像描述](../Images/f2256299ee689e1468e97772e96d7b43.png)](https://i.stack.imgur.com/1f1LT.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-10T16:05:25.050

除了之前的答案，这里是您需要的 Kotlin 扩展。它返回这个矩阵的旋转角度值

```
fun Matrix.getRotationAngle() = FloatArray(9)
    .apply { getValues(this) }
    .let { -round(atan2(it[MSKEW_X], it[MSCALE_X]) * (180 / PI)).toFloat() } 
```

只需要在你的矩阵上调用它。请注意，您的矩阵值不会改变。

```
val angleInDegree = yourMatrix.getRotationAngle() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T04:38:56.187

不幸的是，没有定义提取旋转信息的方法（我假设您正在寻找度数）。您可以做的最好的事情是`getValues`使用转换公式提取矩阵值（类似于本页底部讨论的内容[）](http://css-tricks.com/get-value-of-css-rotation-through-javascript/)来尝试找出角度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-20T06:54:21.937

这是@Evansgelist 对 Kotlin 用户的回答的更方便的实现：

```
val Matrix.rotation: Float
    get() {
        return atan2(
            values()[Matrix.MSKEW_X],
            values()[Matrix.MSCALE_X],
        ) * (180f / Math.PI.toFloat())
    }

val Matrix.scale: Float
    get() {
        return sqrt(
        values()[Matrix.MSCALE_X].pow(2) +
            values()[Matrix.MSKEW_Y].pow(2)
        )
    }

val Matrix.translationX: Float
    get() { return values()[Matrix.MTRANS_X] }

val Matrix.translationY: Float
    get() { return values()[Matrix.MTRANS_Y] } 
```

请注意，每次调用都会`values`分配一个新的`FloatArray`.

# batch-file - 批量更改文件名后半部分，但不更改扩展名

> ID：12256861
> 
> 赞同：0
> 
> 时间：2012-09-04T04:34:48.323
> 
> 标签：batch-file, command, timestamp

我正在尝试重命名文件的后半部分，在扩展名之前，在`batch script`.
例如：

```
block1.txt --> block1-%mydate%-%mytime%.txt

block2.zip --> block2-%mydate%-%mytime%.txt 
```

文件名作为`%1`. 每次运行只会更改一个文件名。该程序旨在将时间戳附加到文件的末尾，形式为`MMDDYYYY-HHMM.`

程序的第一部分产生表达式`%mydate%-%mytime%`。

我一生都无法弄清楚如何以通用且始终如一的功能方式进行操作。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:54:04.947

**对于 Windows**，**@hobodave**对类似[问题](https://stackoverflow.com/questions/3432851/dos-bat-file-equivalent-to-unix-basename-command/3432895#3432895)的回答如下：

**对于命令行**

```
for /F %i in ("c:\foo\bar.txt") do @echo %~ni 
```

输出：`bar`

**对于 .bat 文件**

```
set FILE=bar
for /F %%i in ("%FILE%") do @echo %%~ni 
```

输出：`bar`

延伸阅读：

[http://www.computerhope.com/forhlp.htm](http://www.computerhope.com/forhlp.htm)

**对于 Unix**

您可以使用**basename**命令。它将清除给定路径的路径和扩展。

```
basename /foo/bar/arch.zip .zip 
```

将输出

```
arch 
```

Basename 手册：[http ://unixhelp.ed.ac.uk/CGI/man-cgi?basename](http://unixhelp.ed.ac.uk/CGI/man-cgi?basename)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:11:21.263

您的意思是：**文件名-MMDDYYYY-HHSS.***

```
for /f "tokens=2-7 delims=/:. " %%a in ("%date% %time: =0%") do set newFileName=%~n1-%%a%%b%%c-%%d%%f%~x1
ren "%~1" "%newFileName%" 
```

还是您的意思是：**文件名-MMDDYYYY-HHMM.***

```
for /f "tokens=2-6 delims=/:. " %%a in ("%date% %time: =0%") do set newFileName=%~n1-%%a%%b%%c-%%d%%e%~x1
ren "%~1" "%newFileName%" 
```

# java - 在java中动态生成具有不同数量输入控件的表单

> ID：12256863
> 
> 赞同：0
> 
> 时间：2012-09-04T04:35:45.110
> 
> 标签：java, javascript

作为我工作的一部分，我必须使用存储在数据库表中的值生成带有输入控件（例如文本框、选项按钮、浏览按钮等）的动态表单。是否有任何机制可以生成和验证具有不同数量的输入控制字段的动态表单！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:49:27.427

现在的IDE支持从表格生成表格。Oracle Application Builder就是这样一个可以从后端表格生成表格的工具。您可以通过本教程了解它。

[Oracle 应用程序生成器](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/bldapp_frm.htm)

[使用 NetBeans IDE 在 Java 应用程序中绑定 Bean 和数据](http://netbeans.org/kb/docs/java/gui-binding.html)

# matlab - matlab中两个矩阵之间的相关性

> ID：12256865
> 
> 赞同：5
> 
> 时间：2012-09-04T04:35:53.360
> 
> 标签：matlab, matrix, correlation

![在此处输入图像描述](../Images/215680881d0fdf66b3b59d71d640fb24.png)

你好，

1.  我想在上面显示的两个数据集之间创建一个相关矩阵，它将忽略任何出现的零（在上图中，绿色），任何人都知道产生平滑结果的最有效方法是什么？

2.  是否有任何相关方法可以逐点识别相似性，从而结果将具有原始矩阵的“形状”？

感谢你

注意：我没有 matlab 统计工具箱

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T07:05:53.637

```
2\. Is there any correlation method that can identify the similarity point by 
   point  and by thus the results will have the "shape" of the original matrix? 
```

让我们从你的第二点开始，因为它更清楚，你想要什么。您想要对两个图像进行逐点比较，例如`A`和`B`。这归结为测量两个标量`a`和的相似性`b`。让我们假设这些标量来自区间`[0, Q]`，这`Q`取决于您的图像格式（`Q == 1`或者`Q == 255`在 Matlab 中很常见）。

现在，最简单的距离度量就是差值`d = |a - b|`。您可能希望将其标准化`[0, 1]`并反转值以测量*相似性*而不是*距离*。在 Matlab 中：

```
S = 1 - abs(A - B) / Q; 
```

您提到了忽略图像中的零点。好吧，您需要定义您期望为零的相似性度量。一种可能性是将相似度设置为零，只要一个像素为零：

```
S(A == 0 | B == 0) = 0; 
```

您也可以说那里的相似性未定义并将相似性设置为`NaN`：

```
S(A == 0 | B == 0) = nan; 
```

当然，您也可以说 10 和 11 之间的不匹配与 100 和 110 之间的不匹配一样糟糕。在这种情况下，您可以取相对于总和的距离`a + b`（称为 Bray Curtis 归一化或归一化欧几里得度量）

```
D = abs(A - B) ./ (A + B)
S = 1 - D / max(D(:)); 
```

如果两个矩阵在同一位置都有一个零值像素，则会遇到问题。同样，有几种可能性： 您可以用一个小的正值`alpha`（例如`alpha = 1e-6`）来增加总和，以防止除以零：`D = abs(A - B) ./ (alpha + A + B)`。

另一种选择是忽略其中的无限值`D`并在此处添加您的“零处理”，即

```
D = abs(A - B) ./ (A + B)
D(A == 0 | B == 0) = nan;
S = 1 - D / max(D(:)); 
```

你看，有很多可能性。

```
1\. I would like to create a correlation matrix [...] 
```

您绝对应该更多地考虑这一点，并更好地描述要计算的内容。如果您的矩阵大小为`m x m`，则您有`m^2`变量。由此你可以计算出一个相关矩阵`m^2 x m^2`，它测量每个像素与其他每个像素的相关性。该矩阵还将在对角线上具有最大值（这些是方差）。但是，如果您只有两个实现，我不建议计算相关矩阵。

另一种选择是测量两个图像中行或列的相似性。然后你最终得到一个`1 x m`相关系数向量。

但是，我不知道如何从 size`m x m`的两个输入计算 size 的相关矩阵`m x m`，这两个输入在对角线上具有最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T17:01:52.540

为了得到一个一般的相关系数，我会使用`corr2`. [从文档](http://www.mathworks.com/help/images/ref/corr2.html)：

> `r = corr2(A,B)`
> 
> 返回 A 和 B 之间的相关系数 r，其中 A 和 B 是相同大小的矩阵或向量。r 是双标量。

粗略地说，我相信这只是计算`corr(A(:), B(:))`。

# java - 使用循环从字符串中删除空格

> ID：12256866
> 
> 赞同：0
> 
> 时间：2012-09-04T04:36:08.900
> 
> 标签：java

大家好，我正在尝试专门使用循环删除空格。这是我到目前为止的想法

```
 import java.util.Scanner;
    public class Q2 {

public static void main(String[] args) {

    String input = "";
    char noSpace = ' ';

    Scanner scan = new Scanner(System.in);
    input = scan.nextLine();
    System.out.println(input);

    for (int i = 0; i < input.length(); i++) { //search from right to left
        for (int j = input.length(); j != -1; j--) { //search from left to right
            if (input.charAt(i) == noSpace) { //if there is a space move position of i and j
                i++;
                j--;
            }

    }
    System.out.println(input); 
```

我对java还是很陌生，任何建议都会非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:55:50.940

试试这个：

```
public class RemoveWhiteSpace {

    public static void main(String[] args) {

        String str = "Hello World... Hai...             How are you?     .";
        for(Character c : str.toCharArray()) {
            if(!Character.isWhitespace(c)) // Check if not white space print the char
                System.out.print(c);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:02:44.550

以及主题组合...

```
StringBuilder result = new StringBuilder(64);
String str = "sample test";
for (Character c : str.toCharArray()) {
    if (!Character.isWhitespace(c)) {
        result.append(c);
    }
}

System.out.println(result.toString()); // toString is not required, but I've had to many people assume that StringBuilder is a String
System.out.println(str.replace(" ", ""));
System.out.println("Double  spaced".replace(" ", "")); 
```

基本上，没有什么新东西，只是其他人所说的可运行的例子......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T04:46:14.500

为什么不使用正则表达式？`replaceAll("\\s","")`删除所有空格。您还可以删除其他不可见的符号，例如 \tab 等。

查看[docs.oracle.com](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)了解更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-21T04:01:52.363

```
import java.util.Scanner;
public class Iterations{
public static void main(String[] args){
    Scanner kb = new Scanner(System.in);
    System.out.print("Enter a sentence: ");
    String s = kb.nextLine();
    String temp = "";
    for (int i = 0; i < s.length(); i++){    //This loops separates the string into each character
        String c = s.substring(i, i+1);              
        if (c.equals(" ")){
            System.out.print(c.trim());      //If the individual character is space then remove it with trim()
        } else {
            temp = temp + c;                 //Adds the string up into single sentence
        }
    }
    System.out.println(temp);               //Print it to have a nice line of string
} 
```

}

我也是 java 新手，碰巧遇到了只用一些方法和循环删除空格的问题。这就是我的解决方案，请随时尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T05:02:08.133

通过保持两个循环，您实际上已经走得太远了，您只能在一个循环中完成：

```
public static void main(String[] args) {
    String input = "";
    char space = ' ';

    Scanner scan = new Scanner(System.in);
    input = scan.nextLine();
    System.out.println(input);

    for (int i = 0; i < input.length(); i++) { // search from right to left char by char
        if (input.charAt(i)!= space) { // if the char is not space print it. 
            System.out.print(input.charAt(i));
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T04:55:08.457

```
public class sample {

public static void main(String[] args) {

    String input = "sample test";
    char noSpace = ' ';
    System.out.println("String original:"+input);

    for (int i = 0; i < input.length(); i++) { //search from right to left
        if (input.charAt(i) != noSpace) { //if there is a space move position of i and j
            System.out.print(input.charAt(i));
        }
     }

    }
   } 
```

# objective-c - 如何进一步为贝塞尔路径上的图像设置动画

> ID：12256868
> 
> 赞同：3
> 
> 时间：2012-09-04T04:36:15.900
> 
> 标签：objective-c, ios, xcode, core-animation, bezier

也许有人可以指出我正确的方向。我试过谷歌，但真的不知道如何用可搜索的术语来定义我的问题。

我正在沿 UIBezierPath 为图像设置动画，如下所示：

```
UIBezierPath *trackPath = [UIBezierPath bezierPath];
[trackPath moveToPoint:P(8, 250)];
[trackPath addCurveToPoint:P(318, 250)
             controlPoint1:P(156, 86)
             controlPoint2:P(166, 412)];
[trackPath addCurveToPoint:P(652, 254)
             controlPoint1:P(488, 86)
             controlPoint2:P(512, 412)];
[trackPath addCurveToPoint:P(992, 254)
             controlPoint1:P(818, 96)
             controlPoint2:P(872, 412)];

CALayer *bee = [CALayer layer];
bee.bounds = CGRectMake(0, 0, 69, 71);
bee.position = P(160, 25);
bee.contents = (id)([UIImage imageNamed:@"bee3.png"].CGImage);
[self.view.layer addSublayer:bee]; 
```

我想做的是在图像沿路径移动时为图像本身设置动画。当它的 b 本身像这样时，我可以为图像设置动画：

```
 NSArray *blueArray = [NSArray array];
    blueArray = [[NSArray alloc] initWithObjects:
                 [UIImage imageNamed:@"blue1.png"],
                 [UIImage imageNamed:@"blue2.png"], nil];

    blueFly.animationImages = blueArray;
    blueFly.animationDuration = 0.20;
    blueFly.animationRepeatCount = -1;
    [blueFly startAnimating]; 
```

可以这么说，我怎样才能将两者结合起来？

此外，我知道如何将路径本身绘制到屏幕上，如下所示：

```
CAShapeLayer *beeline = [CAShapeLayer layer];
beeline.path = trackPath.CGPath;
beeline.strokeColor = [UIColor whiteColor].CGColor;
beeline.fillColor = [UIColor clearColor].CGColor;
beeline.lineWidth = 2.0;
beeline.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithInt:6],   [NSNumber numberWithInt:2], nil];
[self.view.layer addSublayer:beeline]; 
```

但是，当图像沿路径动画时，如何仅在图像后面画线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T07:20:56.763

您可以使用 a`CAShapeLayer`来显示路径。形状层提供两个属性`strokeStart`，`strokeEnd`它们的值介于`0`和之间，`1`并确定可见路径的比例。通过动画`strokeEnd`，您可以创建路径是在屏幕上“绘制”的印象。请参阅[http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer](http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer)的示例，该示例为绘制线条的笔设置动画。

为了改变蜜蜂的图像，你可以简单地添加一个动画来改变你的蜜蜂层的内容。例如，要在`CAShapeLayer`上面的项目中更改笔的图像，我们可以在`startAnimation`方法中添加以下代码。

```
CAKeyframeAnimation *imageAnimation = [CAKeyframeAnimation animationWithKeyPath:@"contents"];
imageAnimation.duration = 1.0;
imageAnimation.repeatCount = HUGE_VALF;
imageAnimation.calculationMode = kCAAnimationDiscrete;
imageAnimation.values = [NSArray arrayWithObjects:
  (id)[UIImage imageNamed:@"noun_project_347_1.png"].CGImage,
  (id)[UIImage imageNamed:@"noun_project_347_2.png"].CGImage,
  nil];
[self.penLayer addAnimation:imageAnimation forKey:@"contents"]; 
```

This simply adds a key animation to the `contents` property of the layer that displays the pen. Note that the image `"noun_project_347_1.png"` is not part of the project so you would have to add an image to see the effect. I have simply horizontally flipped the image that comes with the project. By setting `calculationMode` to `kCAAnimationDiscrete` the animation does not interpolate between two images by replaces one by the other.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:08:19.770

只要你能得到你想要动画图像对齐的确切路径，你就可以使用 Core Animation 和 CAKeyframeAnimation 来做到这一点。

请参阅[how-to-animate-one-image-over-the-unusual-curve-path-in-my-ipad-application)](https://stackoverflow.com/questions/10705587/how-to-animate-one-image-over-the-unusual-curve-path-in-my-ipad-application)链接。

# wordpress - Joomla 仍然是 CMS 的好选择吗？

> ID：12256872
> 
> 赞同：0
> 
> 时间：2012-09-04T04:37:07.563
> 
> 标签：wordpress, joomla

我的任务是决定是在 Joomla 中维护当前网站还是将其移植到 WordPress 之类的网站上。该站点目前使用 Joomla 1.5，我已经能够通过修改模板和根据需要更改文章来进行所需的即时更新。然而，要真正正确地维护这个网站，我需要更好地了解 Joomla，这意味着时间和资源的投资。

我想知道的是是否值得花时间研究 Joomla。我读过关于缺乏领导力、发布/更新周期长和代码臃肿的文章。与 WordPress 和 Drupal 等 CMS 平台相比，Joomla 的当前状态（v2.5）是否仍然具有竞争力？提到的问题是过去的问题吗？Joomla 是否带来任何优势？还是它几乎已经过了黄金时期，不再具有竞争力。

我真的很想听听其他熟悉 Joomla 的开发人员的意见。你的想法将有助于决定走哪条路。在 Joomla 上大量使用或将其移植到 WordPress。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:54:25.223

Joomla 是非常好的 CMS。其领导问题已在 2 年前得到解决。现在他们遵循有吸引力的发布策略，即每 6 个月发布一次次要版本。他们每 18 个月发布一次主要版本。凭借所有如此快速的决策和实施，Joomla 已准备好探索其全部潜力。

一旦您在 Joomla 上投入时间，您就会喜欢它处理大量功能的方式。Joomla 提供了许多专业品质的扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:39:39.453

也许我的回答可能对你帮助不大。但我会说我知道的。简短的回答可能是这取决于您的需求，但我建议您学习 Wordpress 和 Joomla 几天，然后决定了解哪个更适合您。我有基于 Joomla 的网站，我对自己的选择很满意，但是我必须手动完成许多事情（编辑核心文件）。这两个平台都有很多好东西和一些坏东西。祝你好运。

# android - 如何设置 xy 坐标，以便在打开 imageview 时图像放大到该点？

> ID：12256874
> 
> 赞同：2
> 
> 时间：2012-09-04T04:37:32.910
> 
> 标签：android, android-layout, zooming, android-relativelayout, setfocus

我有`static`一张地图的图像，我希望它位于地图`focus/zoom`上的特定点上（例如，当用户搜索特定位置时）。

到目前为止，这就是我获得 Map 的方式`displaying`，`zooming`并且`panning`效果很好。

```
public class MapDisplayActivity extends Activity implements OnTouchListener {

private static final String TAG = "Touch";
// These matrices will be used to move and zoom image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.mappage);
  ImageView view = (ImageView) findViewById(R.id.imageView2);
  view.setOnTouchListener(this);
} 
```

我正在`RelativeLayout`使用`ImageView`.

# javascript - 使用 HistoryAPI 检测站点中的 url 更改

> ID：12256878
> 
> 赞同：0
> 
> 时间：2012-09-04T04:37:39.150
> 
> 标签：javascript, jquery, google-chrome-extension, firefox-addon

我正在为 vk.com 编写浏览器扩展。该站点使用 historyAPI 更改地址栏中的 url 并使用 ajax 加载内容。我需要在我的扩展程序中检测 URL 更改，并且不知道如何 =( onhashchange 不起作用。在阿森纳我有 jquery。Ssory 为我的英语，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:54:05.393

您应该在 Firefox中使用[进度监听](https://developer.mozilla.org/en-US/docs/Code_snippets/Progress_Listeners)`onLocationChange`器，监听器的方法将在地址栏中的每次更改时调用。请不要使用轮询 - 这会浪费 CPU 资源并耗尽笔记本电脑的电池。

[`chrome.webNavigation`API](http://developer.chrome.com/extensions/webNavigation.html)在 Chrome 中提供了类似的机制。URL 更改时应触发该[`onCommitted`事件。](http://developer.chrome.com/extensions/webNavigation.html#event-onCommitted)

# c# - C# 中间层 app.config 文件在发布时丢失

> ID：12256883
> 
> 赞同：1
> 
> 时间：2012-09-04T04:38:04.297
> 
> 标签：c#, app-config

我创建了一个小型控制台应用程序，它具有 3 个架构、UI 层、服务层和数据访问层。它还包含另一层，即垂直放置的域层，因此所有主要的 3 层都可以访问域层。我已将连接字符串、记录器路径等放在域项目的属性设置部分中，该部分会自动输入到域项目的 app.config 文件中。这正是我想要的，其他层可以访问域层中的全局变量和对象，我可以通过域层的 app.config 文件更改域层中的设置。

问题是当我发布控制台应用程序时，域层的 app.config 文件丢失了。现在我希望能够更改配置设置。如何获取域层的app.config文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:39:46.923

您不能使用类库项目中的 app.config。您的各个层使用的任何应用程序设置都需要在实际可执行文件的 app.config 文件中定义。

在您的情况下，最好的解决方案似乎是将域层的 app.config 复制到控制台应用程序的输出。您可以将构建过程设置为自动执行此操作（设置`Build Action`为“内容”和`Copy to Output Directory`“始终复制”）。请记住，它将覆盖您可能在控制台应用程序项目本身中定义的任何配置设置。

# android - 如何在 ExpandableListView 的子视图上处理两个 ImageButton

> ID：12256888
> 
> 赞同：0
> 
> 时间：2012-09-04T04:38:48.567
> 
> 标签：android, expandablelistview, expandablelistadapter

我创建了一个`ExpandableList View`包含一些组项目和相应的子项目的项目。

我可以访问子视图，并在 和 的帮助下访问子视图`groupPosition`属性`childPosition`。

现在我必须在每个子视图上放置两个`ImageButton`，并在单击每个子视图时触发不同的 Intent。

我尝试编写代码来`onClickListeners`为每个图像按钮设置并获得相应的结果，但我在**返回值**方面遇到了困难，其中`getChildView`只返回一个`View`。
如何获得每次`ImageButton`点击的响应？

我的代码如下：

```
public View getChildView (final int groupPosition, final int childPosition, boolean    isLastChild, View convertView, ViewGroup parent)  
{
    final View providbtn = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);
    final View lecvidbtn = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);
    final ImageButton providbtn1 = (ImageButton)providbtn.findViewById(R.id.provid);
    final ImageButton lecvidbtn1 = (ImageButton)lecvidbtn.findViewById(R.id.lecvid);
    //final View childItemClicked = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);
    //final ImageButton ib = (ImageButton)childItemClicked.findViewById(R.id.)
    //ImageButton provid = (ImageButton)findViewById(R.id.provid);
    providbtn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplication(), "Topic Proc video is: "+topic[groupPosition]+" and Chapter is "+chapter[groupPosition][childPosition], Toast.LENGTH_LONG).show();
                flag = "p";
                Bundle bundle = new Bundle();
                bundle.putString("topic",topic[groupPosition] );
                bundle.putString("chapter",chapter[groupPosition][childPosition] );
                Intent goHome = new Intent(getApplicationContext(), VideoWeb.class);
                goHome.putExtras(bundle);
                startActivity(goHome);
                }
            });

            lecvidbtn1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplication(), "Topic Lec video is: "+topic[groupPosition]+" and Chapter is "+chapter[groupPosition][childPosition], Toast.LENGTH_LONG).show();
            flag = "l";
            Bundle bundle = new Bundle();
                bundle.putString("topic",topic[groupPosition] );
                bundle.putString("chapter",chapter[groupPosition][childPosition] );
                Intent goHome = new Intent(getApplicationContext(), VideoWeb.class);
                goHome.putExtras(bundle);
                startActivity(goHome);
                        }
        });

    return lecvidbtn;  //My confusion is here. How to capture the return value for any of the image buttons clicked above.?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:02:01.310

试试这个方法

```
 public View getChildView(int groupPosition,int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
         View v = null;
          if( convertView != null )
              v = convertView;
          else
              v = inflater.inflate(R.layout.child_row, parent, false); 
          String c = (String)getChild( groupPosition, childPosition );
          final int grpPos = groupPosition;
          final int childPos = childPosition;
              ImageButton button1 = (ImageButton)v.findViewById( R.id.imageButton1);
              ImageButton button2 = (ImageButton)v.findViewById( R.id.imageButton2);
       // and set onClickListener to this two button
              button1.setOnClickListener(new OnClickListener(){
                 @Override
                 public void onClick(View v) {
                 // TODO Auto-generated method stub

                  Toast.makeText(getApplication(), "Topic Proc video is: "+topic[groupPosition]+" and Chapter is "+chapter[groupPosition][childPosition], Toast.LENGTH_LONG).show();
                    flag = "p";
                    Bundle bundle = new Bundle();
                    bundle.putString("topic",topic[groupPosition] );
                    bundle.putString("chapter",chapter[groupPosition][childPosition] );
                    Intent goHome = new Intent(getApplicationContext(), VideoWeb.class);
                    goHome.putExtras(bundle);
                    startActivity(goHome);

                 }
              )};
              button2.setOnClickListener(new OnClickListener(){

                   @Override
                   public void onClick(View v) {
               // TODO Auto-generated method stub
                    Toast.makeText(getApplication(), "Topic Lec video is: "+topic[groupPosition]+" and Chapter is "+chapter[groupPosition][childPosition], Toast.LENGTH_LONG).show();
                    flag = "l";
                    Bundle bundle = new Bundle();
                    bundle.putString("topic",topic[groupPosition] );
                    bundle.putString("chapter",chapter[groupPosition][childPosition] );
                    Intent goHome = new Intent(getApplicationContext(), VideoWeb.class);
                    goHome.putExtras(bundle);
                    startActivity(goHome);

                 }
              )};
          return v;

      } 
```

和**child_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:background="#ebebeb"
android:layout_height="50dp">
<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="22dp"
    android:src="@drawable/button1" />

<ImageButton
    android:id="@+id/imageButton2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="46dp"
    android:layout_toRightOf="@+id/imageButton1"
    android:src="@drawable/button2" />

 </RelativeLayout> 
```

# .net - 我需要一个用于 .net windows 窗体应用程序的 UI 控件

> ID：12256890
> 
> 赞同：1
> 
> 时间：2012-09-04T04:38:54.693
> 
> 标签：.net, winforms, user-interface

我需要一个用于 Windows 窗体应用程序的 UI 控件。我不知道这种 UI 的名称是什么，但我可以描述我想要的：我可以在我的表单上有一个按钮，当我将鼠标悬停在它上面时，我正在寻找的 CONTROL 在我的表单旁边打开带有动画，我想在该控件中添加一些按钮。那是什么控制？我可以使用 RAD Controls 中的任何此类控件吗？我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:14:12.383

您需要的是另一个`Form`具有一些自定义功能（可能移除顶部的控制框，例如关闭、最大化和最小化）。您可以在按钮`MouseHover`事件中打开此表单。就像是：

```
private void MyButton_MouseHover(object sender, EventArgs e)
{
//Assume that you made this form in designer
var cutomForm = new CustomForm(); 
//Set the opening location somewhere on the right side of main form, you can change it ofc
cutomForm.Location = new Point(this.Location.X + this.Width, this.Height / 2);
//Probably topmost is needed
cutromForm.TopMust = true;
customForm.Show();
} 
```

至于动画，你可以在 google 上搜索 winformws 的动画。或者在这里和那里看看，比如：[WinForms 动画](https://stackoverflow.com/questions/8503173/how-to-make-a-winform-open-like-mac-os-animation)

**关于你的另一个问题**

如果您希望新打开的表格随着您的移动而移动，那么您需要进行一些更改。首先，您需要将新表单作为代码中的一个字段（然后按钮悬停也应该更改）：

```
 private CustomForm _customForm;

     private void MyButton_MouseHover(object sender, EventArgs e)
    {
      //Check if customForm was perviously opened or not
      if(_customForm != null)
          return;

      //Assume that you made this form in designer
      _customForm= new CustomForm(); 
      //Set the opening location somewhere on the right side of main form, you can change it ofc
      _customForm.Location = new Point(this.Location.X + this.Width, this.Height / 2);
      //Probably topmost is needed
      _customForm.TopMust = true; 

      //Delegate to make form null on close
      _customForm.FormClosed += delegate { _customForm = null;};   
      _customForm.Show();
    } 
```

为了使两个表单一起移动，您需要在`Move`主表单的情况下处理它，例如：

```
private void Form1_Move(object sender, EventArgs e)
{
         if(_customForm != null)
         {
          //Not sure if this gonna work as you want but you got the idea I guess
          _customForm.Location = new Point(this.Location.X + this.Width, this.Height / 2);

         }
} 
```

# flash - AS3 套接字 - 策略文件

> ID：12256896
> 
> 赞同：1
> 
> 时间：2012-09-04T04:39:39.867
> 
> 标签：flash, sockets, policyfiles

我有一个小型服务器在端口 843 上侦听，`<policy-file-request/>` 然后发送以下内容：

```
<cross-domain-policy>
<allow-access-from domain="*" to-ports="*"/>
</cross-domain-policy> 
```

在我的闪存方面，连接代码看起来像

```
m_socket = new Socket("127.0.0.1", 4600);
m_socket.addEventListener(ProgressEvent.SOCKET_DATA, OnSockData);

m_socket.writeUTFBytes(String.fromCharCode(255) + String.fromCharCode(0));
m_socket.flush(); 
```

我有一个单独的服务器在端口 4600 上侦听，它希望从客户端获取 char 255，但它永远不会发送。已建立端口 4600 上的连接，但从未发送数据。

端口 843 上的迷你服务器成功地从客户端获取连接并发送策略文件。

所以要么政策文件提交有问题（我不确定如何在 AS3 中检查）。或者选项 2 是由于某种原因，数据在初始连接过程中丢失。

PS 如果我不在端口 843 上运行迷你服务器，端口 4600 上的服务器将收到策略文件请求（根据 AS3 协议）。

我将不胜感激有关此处检查内容的任何提示。我不确定出了什么问题。我一直在通过闪存调试器做所有事情，直到现在才需要策略文件请求的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:01:36.400

您可能需要带有文档类型的完整 XML。此外，您可能还需要实际限制端口。试试这个：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy><allow-access-from domain="*" to-ports="4600" /></cross-domain-policy> 
```

编辑：尝试`m_socket.addEventListener(Event.CONNECT, connectHandler);`然后创建`connectHandler`发送数据的函数。

# css - 从 LESS 转换为 CSS？

> ID：12256901
> 
> 赞同：1
> 
> 时间：2012-09-04T04:40:25.490
> 
> 标签：css, wordpress, twitter-bootstrap, less

> **可能重复：**
> [将 LESS 嵌套 CSS 转换为标准 CSS](https://stackoverflow.com/questions/4896500/convert-less-nested-css-to-standard-css)

我正在使用新的`framework` ***[站点链接](http://320press.com/wpbs/)***，但问题是它是使用`LESS`.

它还包括`CSS`文件，所以我认为我可以简单地删除`LESS`文件并且没问题 - 但是，当我这样做时，我会失去大部分**样式**。

有没有人有实现这一目标的最佳方法的解决方案？与我一起工作的大多数人还没有学习`LESS`，所以我需要一个`framework`我们可以作为一个团队一起工作的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:46:11.363

从[http://lesscss.org/ 主页](http://lesscss.org/)，它实际上带有一个默认编译器，可以从 less 到 CSS；

* * *

Less 带有一个二进制文件，它允许您从命令行调用编译器，如下所示：

```
$ lessc styles.less 
```

这会将编译后的 CSS 输出到标准输出，然后您可以将其重定向到您选择的文件：

```
$ lessc styles.less > styles.css 
```

* * *

# iphone - 在屏幕上捕捉加速事件

> ID：12256902
> 
> 赞同：0
> 
> 时间：2012-09-04T04:40:37.113
> 
> 标签：iphone, objective-c, acceleration

我有一个像轮盘赌一样的菜单，它像一个轮盘一样旋转。捕捉我正在使用的事件`touch began/move`。

我怎样才能添加它`acceleration`？当用户触摸项目并滑动时，我想注册一个`acceleration` 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:52:26.837

[这可能会有所帮助](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)

```
Listing 4-4  Receiving an accelerometer event
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
UIAccelerationValue x, y, z;
x = acceleration.x;
y = acceleration.y;
z = acceleration.z;

// Do something with the values.
} 
```

# php - 根据用户处理 PHP 时区

> ID：12256911
> 
> 赞同：3
> 
> 时间：2012-09-04T04:41:34.460
> 
> 标签：php, mysql, datetime

好吧，我知道这个问题可能会被问很多次，但我肯定没有什么疑问在我看来，顺便说一句，不要评论我尝试过的方法，我尝试过很多方法，但我只是问什么是正确的和更简单的方法，因为这里有很多帖子，对完成这些任务有不同的建议，所以我将`explode()`我的问题变成更小的问题......

所以你们能不能指导我在哪里是对还是错，因为我相信很多人在谈到日期/时间时会感到困惑

1) 为什么/如何使用 PHP 在 MySQL 中将时间保存为 UTC？为此，我个人使用 php 发布此内容并使用mysql 日期字段`$year/$month/$day`检查日期。`checkdate()`那么可以还是我应该使用`timestamp`而不是使用php在前端爆炸检索到的字符串？

2）如果我从印度运行服务器，我应该使用 php 函数记录默认时间，`date_default_timezone_set("Asia/Calcutta");`而不是使用 php 函数减去和添加时间，或者仅在发布时我应该检查从他的用户帐户中选择的用户时区，并相应地设置一个条件：

```
if(timezoneselected == +5.30) {
echo date_default_timezone_set("Asia/Calcutta");
} elseif(timezoneselected == +anytime) {
echo another country timezone
} 
```

3）最后一个问题是gmail facebook等网站如何管理时间？我的意思是，如果他们根据他们的服务器保存日期时间，而不是他们如何为每个用户（甚至是 gmail）显示完美的发布时间，如果我向另一个用户发送邮件，我的发送时间和居住在另一个国家的人会在他打印的本地收到电子邮件时间我的意思是我们怎么能做到这一点，对不起，我不能完美地解释你说这个例子，

facebook：来自印度的用户发帖，facebook 节目在 8 分钟前，9 分钟前发布，过了一段时间他们显示了一个真实的日期，根据我发布的时间，这个日期是完美的，但是如果来自美国的人更新，比如 8 分钟前9 分钟前在他的个人资料上，但他的原始发布时间对他正确显示，甚至对我正确显示？

很抱歉这个问题，但这确实有助于我理解这个日期/时间概念，并且对未来的用户也有帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:50:18.567

底线，你应该**存储所有UTC**

当您显示特定用户的时间时，请使用他们选择的时区。`date_default_timezone_set`存储用户的时区，如“亚洲/加尔各答”，并在使用该方法显示时简单地转换时间。

我将尝试从这里的评论中回答您的问题。

您始终存储 UTC 的所有内容。这是基线。当您根据用户显示与您转换的任何内容相关的时间时。如果您想显示**Posted 8 分钟前**，那么您将获取当前 UTC 时间和与帖子关联的 UTC 时间之间的差值。如果您从用户 A（在印度）向用户 B（在美国洛杉矶）发送消息，那么您将使用 UTC 存储消息时间。如果用户 A 正在查看，则时间将转换为“Asia/Calcutta”，如果用户 B 正在查看，则时间将转换为“America/Los_Angeles”。使用 UTC 将使您的生活更轻松。相信我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:42:53.587

如[MySQL 服务器时区支持](http://dev.mysql.com/doc/en/time-zone-support.html)中所述：

> 当前会话时区设置会影响对区域敏感的时间值的显示和存储。这包括由函数（例如`NOW()`or ）显示的值`CURTIME()`，以及存储在列中和从`TIMESTAMP`列中检索的值。列的值`TIMESTAMP`从当前时区转换为 UTC 以进行存储，并从 UTC 转换为当前时区以进行检索。

因此，如果您使用`TIMESTAMP`类型列，MySQL 将自动为您处理时区转换：只需在其[`time_zone`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)变量中为会话设置适当的时区。

# arrays - 更新 Blackberry 上的 objectchoice 字段列表

> ID：12256913
> 
> 赞同：0
> 
> 时间：2012-09-04T04:42:09.320
> 
> 标签：arrays, blackberry, drop-down-menu, updates

我是黑莓新手，目前正在研究它。我有一个使用字符串数组作为其数据集的 ObjectChoiceField。如何根据数组元素的变化更新 ObjectChoiceField 列表的显示？我想在 Android 开发中做类似 notifyDataSetChanged() 的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:59:40.363

`myObjectChoiceField`通过[setChoices(String[] newChoices)](http://tinyurl.com/cbn3v9w)方法更新您的 ObjectChoiceField 实例（比如说）。假设`newChoicesStringArray`是一个带有新选项值的字符串数组。

```
 Application.getApplication().invokeLater(new Runnable() {
         public void run() {
             myObjectChoiceField.setChoices(newChoicesStringArray);
         }
     }); 
```

`invokeLater()`用于避免在字段更新操作时锁定 UI 事件。

# ios - 通话状态栏更改 UITableView 的标题

> ID：12256915
> 
> 赞同：0
> 
> 时间：2012-09-04T04:42:33.157
> 
> 标签：ios, core-animation

我的应用程序中有一个 UITableView，它有一个非常自定义的部分标题。我所做的其中一件事是通过更改其 frame 属性为该节标题设置动画。这一切都很好，除非我模拟通话状态栏。这样做后，此特定节标题的帧的来源将被重置。可以说 UI 在那一点上看起来很糟糕。

任何想法为什么通话状态栏会与我的部分标题混淆？只有节标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:08:21.107

几乎可以肯定您的 tableView 弹簧和支柱不正确。确保支柱设置在顶部和底部，并且内部弹簧已打开。

# wpf - WPF-将对象属性绑定到 xaml 中的控件

> ID：12256916
> 
> 赞同：1
> 
> 时间：2012-09-04T04:42:33.750
> 
> 标签：wpf, xaml-binding

我已经在下面清楚地说明了我的问题。

提前谢谢你-->

我有一个公开课：

```
public class class1
{
 int iVal;
 public int IVal
 {
  get { return iVal; }
  set { iVal=value;  }
 }
} 
```

我将`class1`在我的 mainWindow.cs 中创建一个类型的对象。

```
class1 ob = new class1(); 
```

在 mainWindow.xaml 文件中，我有一个`TextBlock`.

我的问题是如何将`ob.IVal`值绑定到`TextBlock`使用 XAML 绑定。

```
<TextBlock Text="{Binding IVal, Mode=OneWay}"/>   
// this binding is not working for me. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:56:27.740

看起来您只需要`DataContext`为 XAML 树设置 。在 mainWindow.cs 中，这样写：

```
public partial class MainWindow : Window
{
    public class1 ob { get; set; }

    public MainWindow()
    {
        ob = new class1();
        InitializeComponent();
        this.DataContext = ob;
    }
} 
```

然后绑定到`IVal`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T07:31:39.637

可能您错过了设置`DataContext`属性 - 正如 dbasemen 建议的那样 - 但这仍然不够。

您将绑定模式设置为`OneWay`意味着通信从源到目标：`Class1.IVal -> TextBlock.Text`在这种情况下。

但是您必须发送有关 IVal 属性更改的通知，这意味着您必须实现`INotifyPropertyChanged`事件处理程序并在设置 IVal 属性`Propertychanged`时引发事件。

你在[这里](http://msdn.microsoft.com/en-us/library/ms743695.aspx)找到如何做到这一点。

# php - 在 codeigniter 中通过 _remap 函数使用 $_GET 变量

> ID：12256919
> 
> 赞同：0
> 
> 时间：2012-09-04T04:42:57.273
> 
> 标签：php, codeigniter

我在从 remap 函数中提取重要的 get 变量时遇到了一些麻烦。它们作为 REST 字符串而不是 URI 段发送，因为系统需要混合。我无法通过 _remap 函数使用 $_GET 变量，并且所有将它们拉出的尝试都失败了。有任何想法吗？这是我目前用来测试的代码：

```
public function _remap($method, $params = array()) {
     dump($_GET);
} 
```

由于系统的性质，我使用的许多页面都依赖于这个重映射功能，无法使用静态路由。如果有人看到这一点并能够获取 REST 数据，我很想听听您的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:54:19.617

傻傻傻....我不得不使用codeigniter的Input类。

```
$this->input->get(); 
```

Codeigniter 似乎处理了这个问题，但你不能使用 $_GET

# java - 从我的 java 程序控制 java 程序的执行

> ID：12256923
> 
> 赞同：0
> 
> 时间：2012-09-04T04:43:42.430
> 
> 标签：java, code-coverage, line-numbers

```
public class LineNum1 extends Thread{

    public synchronized void run()
         {
          try {
                Hello.main(null);
                System.out.println("Stack Trace of thread"+ this.currentThread().getName());
                System.out.println(this.currentThread().getStackTrace()[1].getLineNumber());
                System.out.println("End of Stack Trace");
               } catch (Exception e1) {
                    e1.printStackTrace();
               }
            }

     public static void main(String[] args) {

                LineNum1 t = new LineNum1();
                t.start();
            }
   } 
```

我正在开发一个代码覆盖工具。

使用上面的程序，我从这里执行 Hello.java。有什么方法可以让我控制 Hello.java 吗？

或者为了让我的生活更简单，我可以获得 Hello.java 的执行行（执行路径）的行号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:55:17.520

您想使用 Java 调试接口。它是用于编写调试器等 Java 工具的 Java 库。它可以让你逐步完成程序，查询行号和你去的东西。

有一个名为 trace 的简单演示应用程序可以完成您想要的大部分工作：http: [//docs.oracle.com/javase/1.5.0/docs/guide/jpda/trace.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/trace.html)

如果您有时间阅读它，有很多文档：http: [//docs.oracle.com/javase/1.5.0/docs/guide/jpda/index.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:46:39.007

您可能可以将第二个 Java 类作为 a 执行[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)并自己读取输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:18:36.917

我还没有完全完成代码覆盖。但是我已经使用字节码检测来检测方法，因此我得到了我访问过的所有方法的日志。这个[Javassist 教程](http://www.csg.is.titech.ac.jp/~chiba/javassist/tutorial/tutorial.html#read)可能会对您有所帮助。

# bash - 检测远程安装

> ID：12256925
> 
> 赞同：2
> 
> 时间：2012-09-04T04:43:57.487
> 
> 标签：bash, ssh, mount, sshfs

是否有一个通用的 bash shell 变量或通用 Linux 命令可以可靠地指示给定目录或文件是否位于远程文件系统上——无论是 NFS、SSHFS、SMB 还是任何其他远程安装的文件系统？

上下文...
这是一个仅 root 访问、单用户、多主机 Linux 开发“实验室”，使用 SSH 和 SSHFS 对系统进行半无缝松散耦合。每个主机上的相关目录结构是...

```
 /0
    /0/HOST1
    /0/HOST2
    /0/HOST3
    /bin
    /boot
      : 
```

/0 中的目录是挂载到指定主机上的“/”的 SSHFS。“Host1”等是为每个主机命名的挂载点目录。

我当然可以建立一个环境变量，比如......

```
 REMOTE_FS=/0 
```

...并测试以“/ 0”开头的目录名。但是，这不是很便携或可靠。

显而易见
的问题......已经努力使它无缝，为什么我想知道访问非本地的东西时？

答案...
浏览已挂载的文件系统会将所有处理负载放在启动主机上。我想知道何时可以选择使用 SSH 而不是 SSHFS 将后台处理（ls、grep、awk 等）卸载到远程（通常更强大）主机，只留下 GUI 和控制逻辑本地机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:58:15.710

```
df -l <file> 
```

如果文件或目录不是本地的，这将返回非零退出代码。

# iphone - 如何在定义中列出多个整数？

> ID：12256930
> 
> 赞同：-5
> 
> 时间：2012-09-04T04:45:01.113
> 
> 标签：iphone, objective-c, ios, xcode

我像这样将西瓜定义为1

```
#define watermelon 1 
```

但是我如何用 2 来定义它呢？所以它看起来像这样。

```
 #define watermelon 1 and 2.

  //of course this isn't how it is done.// 
```

我忘了这是怎么做到的。我有一个巨大的大脑放屁。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:47:33.447

这通常不是你做的事情。一般来说，一个“符号”是指一个值。

您*可以*做的是创建两个不同的符号：

```
#define MELON_A 1
#define MELON_B 2 
```

然后使用如下代码：

```
if ((fruitType == MELON_A) || (fruitType == MELON_B)) ... 
```

如果您想退后一步，告诉我们您要解决的问题（而不是该问题的潜在*解决**方案*），我们可能会提供更具体的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:47:43.423

```
typedef enum {
MELON_A = 1,
MELON_B,
MELON_C
} MELON; 
```

否则你可以使用枚举

# drupal - 启用 Drupal 服务会话身份验证时出现错误 406 (Drupal-iOS-SDK)

> ID：12256931
> 
> 赞同：0
> 
> 时间：2012-09-04T04:45:09.647
> 
> 标签：drupal, service

首先，感谢那些为构建和开发 Drupal-iOS-SDK 付出大量工作的人。这是一部了不起的作品，我每天都对它的力量印象深刻。

其次，作为背景知识，我正在编写一个 iOS 应用程序，它允许用户使用他们的 iPhone/iPad 登录我的 Drupal 站点并访问他们当前存储/显示在视图中的输入数据。

现在，我的问题/问题。到目前为止，我已经能够成功登录到我的 Drupal 站点，其中 iOS 应用程序关闭了 OAuth 和会话身份验证。但是，一旦启用会话身份验证，就会收到 406 错误。我曾尝试在网上寻找解决方案，但不幸的是，我一直无法这样做。什么可能导致这个问题，你会建议我如何尝试解决它？

同样，我的假设是禁用会话身份验证是导致我在尝试让应用程序显示我创建的视图时收到 401 错误的原因。会是这样吗？会解决我上面的问题，以便我可以启用会话身份验证然后允许我访问视图吗？

提前感谢您的帮助，祝您有美好的一天！

好的——我想我正在取得一些进展。

目前，我已禁用会话身份验证，不必处理 406 错误。此外，我调整了我的 Drupal 视图设置，现在在使用 DIOSView 的 viewGet 时不再出现 401 错误。但是，viewGet 的 responseObject 是一个空白集，不包含视图信息。作为测试，我实现了 nodeGet 来检索我的视图链接到的节点。然后我运行应用程序并观察到 ​​nodeGet 的 responseObject 中返回的信息与成功登录的用户的信息不匹配。这让我认为会话和/或用户信息没有从应用程序的第一个视图传递（登录视图）到应用程序的第二个视图（实现 viewGet 的视图）。

有人可以帮忙吗？我知道 Drupal 社区和 Drupal-iOS-SDK 社区非常庞大和活跃。因此，我希望有人可以为我提供一些见解并为我指明正确的方向。

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T15:31:01.983

我也发现了这个问题。

尝试在此处遵循此方法。这个对我有用

[https://github.com/workhabitinc/drupal-ios-sdk/issues/30](https://github.com/workhabitinc/drupal-ios-sdk/issues/30)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T16:48:30.050

检查数据库中的“会话”表。删除任何具有您登录用户的“uid”和/或您用于登录的 iDevice 的“主机名”（IP 地址）的行。我遇到了同样的问题，在使用 drupal-ios-sdk 在服务中启用会话身份验证时得到 406，这就是为我解决问题的原因。

401“未授权”状态码是因为请求需要身份验证。一旦会话身份验证正常工作，请检查您的角色和权限。一旦您通过身份验证，如果用户具有正确的角色/权限，他们应该能够访问视图。

# iphone - NSUserDefaults 创建/调用

> ID：12256932
> 
> 赞同：1
> 
> 时间：2012-09-04T04:45:21.887
> 
> 标签：iphone, objective-c, xcode

我想使用应用内购买。请帮我解决 NSUserDefaults。

我有：

```
free = [[NSArray alloc] initWithObjects:@"Beer", @"Ice-Cream", nil];

paid = [[NSArray alloc] initWithObjects:@"Beer", @"Ice-Cream", @"Pizza", @"Hot-dog", @"Candy", nil]; 
```

现在，如果用户成功购买了我的产品，我有以下代码：

```
 [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"isProUpgradePurchased" ];
  [[NSUserDefaults standardUserDefaults] synchronize]; 
```

默认情况下，我的 UITableView 加载免费的 NSArray，我如何创建一个 NSUserDefaults 并调用我的 UITableView 来加载 PAID NSArrary。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:47:35.163

```
NSArray *dataArr;

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"isProUpgradePurchased"]) {
    // load paid array
    dataArr = paid;
} else {
    // load free array
    dataArr = free;
}

[tableView reloadData]; 
```

并`dataArr`在实现表视图数据源方法时使用，不要直接使用免费和付费数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:50:25.590

在 tableView 委托方法中这样做：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  if([[NSUserDefaults standardUserDefaults] ObjectforKey:@"isProUpgradePurchased"])
  {
     return [paid count];
  }
  else
  {
     return [free count];
  }
} 
```

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
   ..............
   if([[NSUserDefaults standardUserDefaults] ObjectforKey:@"isProUpgradePurchased"])
  {
     cell.titleLabel.text = [paid ObjectAtIndex:indexPath.row];
  }
  else
  {
     cell.titleLabel.text = [free ObjectAtIndex:indexPath.row];
  }
} 
```

# xml - 如何获得下一个紧随其后的::node() 上下文节点的元素使用xslt2.0？

> ID：12256944
> 
> 赞同：0
> 
> 时间：2012-09-04T04:47:06.740
> 
> 标签：xml, xslt, xpath, xslt-2.0, xpath-2.0

我想使用 xslt 2.0 将一种 xml 格式转换为另一种 xml 格式。现在我想获取上下文节点的下一个紧随其后的::node() 元素。例如，

**这是我的 xml 文档：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
        <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
                    xmlns:v="urn:schemas-microsoft-com:vml">
        <w:body>
      <w:p>para1</w:p>   <!-- assume this as context node  -->
      <w:tbl>table data 1</w:tbl>
      <w:tbl>table data 2</w:tbl>
      <w:p>para2</w:p>
      <w:tbl>table data 3</w:tbl>
      <w:tbl>table data 4</w:tbl>
      <w:tbl>table data 5</w:tbl>
      <w:tbl>table data 6</w:tbl>
      <w:p>para3</w:p>
   </w:body>
  </w:document> 
```

因此，根据上述 xml 文件中提到的上下文节点，我只想选择表数据 1 和表数据 2。

例如，如果我的上下文节点是 para2，那么我只想选择表数据 3、表数据 4、表数据 5 和表数据 6。

所以，我写了这样的xslt，

```
<xsl:for-each select="following::node()/self::w:tbl">
     <xsl:choose>
         <xsl:when test="self::w:tbl">
             <xsl:apply-templates select="self::w:tbl"></xsl:apply-templates>
          </xsl:when>                                             
     </xsl:choose>                                         
</xsl:for-each> 
```

但它产生了错误的结果......

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:30:05.947

假设你被定位在一个**w:p**元素上，你可以获得以下所有**w:tbl**兄弟姐妹，它们的第一个最前面的**w:p**是当前元素

```
<xsl:apply-templates 
   select="following-sibling::w:tbl
     [generate-id(preceding-sibling::w:p[1]) = generate-id(current())]" /> 
```

这可以通过使用**xsl:key**稍微整理一下。如果要定义以下键：

```
<xsl:key name="tbl" match="w:tbl" use="generate-id(preceding-sibling::w:p[1])" /> 
```

然后你可以像这样得到以下**w:tbl**元素：

```
<xsl:apply-templates select="key('tbl', generate-id())" /> 
```

例如，给定以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" 
   xmlns:v="urn:schemas-microsoft-com:vml" exclude-result-prefixes="w v">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="tbl" match="w:tbl" use="generate-id(preceding-sibling::w:p[1])" />

   <xsl:template match="w:body">
      <xsl:apply-templates select="w:p[1]" />
   </xsl:template>

   <xsl:template match="w:p">
      <xsl:apply-templates select="key('tbl', generate-id())" />
   </xsl:template>   

   <xsl:template match="w:tbl">
      <table><xsl:value-of select="." /></table>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<table>table data 1</table>
<table>table data 2</table> 
```

请注意这是一个 XSLT1.0 解决方案。可能还有其他仅适用于 XSLT2.0 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:01:27.477

这是一个可能有用的功能：

```
<xsl:function name="f:adjacently-following" as="element()*">
  <xsl:param name="start" as="element()"/>
  <xsl:param name="elementName" as="xs:QName"/>
  <xsl:variable name="next" select="$start/following-sibling::*[1]"/>
  <xsl:if test="node-name($next) = $elementName">
      <xsl:sequence select="$next, f:adjacently-following($next, $elementName)"/>
  </xsl:if>
</xsl:function> 
```

然后你可以打电话`f:adjacently-following(., xs:QName('w:tbl'))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:23:37.443

这个 XSLT 2.0 样式表...

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:v="urn:schemas-microsoft-com:vml"
  exclude-result-prefixes="xsl w v">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
 <root>
   <xsl:for-each-group select="w:document/w:body/(w:p|w:tbl)" group-starting-with="w:p" >
    <p>
      <xsl:apply-templates select="current-group()" />
    </p>
   </xsl:for-each-group>
 </root>
</xsl:template>

<xsl:template match="w:tbl">
  <table>
    <xsl:value-of select="." />
  </table>
</xsl:template>

</xsl:stylesheet> 
```

...当应用于此输入文档时...

```
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:v="urn:schemas-microsoft-com:vml">
    <w:body>
        <w:p>para1</w:p>
        <!-- assume this as context node -->
        <w:tbl>table data 1</w:tbl>
        <w:tbl>table data 2</w:tbl>
        <w:p>para2</w:p>
        <w:tbl>table data 3</w:tbl>
        <w:tbl>table data 4</w:tbl>
        <w:tbl>table data 5</w:tbl>
        <w:tbl>table data 6</w:tbl>
        <w:p>para3</w:p>
    </w:body>
</w:document> 
```

...产量...

```
<root>
   <p>para1<table>table data 1</table>
      <table>table data 2</table>
   </p>
   <p>para2<table>table data 3</table>
      <table>table data 4</table>
      <table>table data 5</table>
      <table>table data 6</table>
   </p>
   <p>para3</p>
</root> 
```

# java - Spring：message.properties 文件不起作用

> ID：12256945
> 
> 赞同：2
> 
> 时间：2012-09-04T04:47:08.270
> 
> 标签：java, xml, spring, validation

在我的应用程序验证过程中，我使用`message.properties`文件来显示*自定义消息*。但它不起作用，并在 App Engine 服务器日志中显示以下错误

> **org.springframework.web.servlet.tags.RequestContextAwareTag doStartTag：在区域设置“en_US”的代码“notmatch.password”下找不到消息。org.springframework.context.NoSuchMessageException：在区域设置“en_US”的代码“notmatch.password”下找不到消息。**

我的验证代码是：

```
public void validate(Object target, Errors errors) {

    ValidationUtils.rejectIfEmptyOrWhitespace(errors, "password",
            "required.password", "Field name is required.");

    ValidationUtils.rejectIfEmptyOrWhitespace(errors, "confirmPassword",
            "required.confirmPassword", "Field name is required.");

    NewUser cust = (NewUser) target;

    if (!(cust.getPassword().equals(cust.getConfirmPassword()))) {
        errors.rejectValue("password", "notmatch.password");
    }

} 
```

我的配置xml是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <beans:bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <beans:property name="basename"
            value="/WEB-INF/resources/message_en_US.properties" />
    </beans:bean>

        <beans:bean name="/register" class="com.my.registration.NewUserRegistration">
        <beans:property name="validator">
            <beans:bean class="com.my.validation.UserValidator" />
        </beans:property>
        <beans:property name="formView" value="newuser"></beans:property>
        <beans:property name="successView" value="home"></beans:property>
    </beans:bean> 
```

![图片中给出了我的项目文件结构](../Images/3ec6dacc5e33bc7850846c50317fabe1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:09:30.450

确保您在文件 中有`notmatch.password`密钥，例如`message_en_US.properties`

```
notmatch.password = Inccorect password 
```

并将基本名称更改为

```
<beans:property name="basename"
            value="/WEB-INF/resources/message" /> 
```

有关更多信息，请查看此[链接](http://www.mkyong.com/spring-mvc/spring-mvc-internationalization-example/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:29:40.823

在您的上下文中配置 PropertyPlaceholder：

```
<context:property-placeholder locations="classpath*:my.properties"/> 
```

有关更多详细信息，也请查看此帖子。

[如何从属性文件中读取值？](https://stackoverflow.com/questions/9259819/how-to-read-values-from-properties-file)

# java - 将两个数字相加的按位运算？

> ID：12256948
> 
> 赞同：2
> 
> 时间：2012-09-04T04:47:22.923
> 
> 标签：java, bit-manipulation

因此，如果我有一个 number1 和另一个 number2 .. 两个整数，我的方法是否更正了使用按位运算添加两个数字的方法？这对任何测试用例都会出错吗？

```
public int add(int number1, int number2)
{
int carry = (number1&number2)<<1;
int sum = number1^number2^carry;
return sum;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T05:11:24.410

![全加器](../Images/a7ab971bab607c93277205797218da98.png)

以下是电路设计师如何添加两个数字。翻译一下，左上边双曲线的两个符号是 XOR (^)，左平边中间的两个符号是 AND (&)，左单曲线的最后一个符号是 OR (| ）。

现在，这是您如何使用掩码将其转换为代码的方法，一次一位。

```
public int add(final int A, final int B) {
    int mask = 1; 
    int sum = 0;
    int carry = 0;

    for (int i = 1; i <= Integer.SIZE; i++) { //JVM uses 32-bit int
        int a = A & mask; //bit selection
        int b = B & mask;

        //sum uses |= to preserve the history,
        //but carry does not need to, so it uses =
        sum |= a ^ b ^ carry; //essentially, is the sum of bits odd?
        carry = ((a & b) | ((a ^ b) & carry)) << 1; //are exactly two of them 1?

        mask <<= 1; //move on to the next bit
    }
    return sum;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T04:51:53.637

是的。这种方法不适用于涉及多个进位的添加。最简单的这种情况是`3 + 1`；结果，您的函数给出`0`了。

没有简单的通用解决方案可以解决这个问题——任何解决方案都必须考虑整数的宽度。有关某些方法，请参阅[Wikipedia 关于加法的门级实现的文章。](http://en.wikipedia.org/wiki/Adder_%28electronics%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-29T00:36:06.073

这是在 JavaScript 中，但在这里。

```
function add(number1,number2){
    var a = number1,b = number2,c;
    while(b != 0){
        c = a & b;
        a = a ^ b;
        b = c << 1;
    }
    return a;
} 
```

这是一个示例 [https://jsfiddle.net/Mythius/wum2huvu/4/](https://jsfiddle.net/Mythius/wum2huvu/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-16T12:27:55.750

是的，它会出错。我们可以使用`while`循环。这是代码

```
static int addTwoNumbers(int a, int b)
{
   int carryNum;

   while(b ! =  0)
   {
      carryNum = a & b;
      a = a ^ b;
      b = carryNum << 1;
   }
   return a;
} 
```

# java - 带有表达式的 Java 数组声明

> ID：12256952
> 
> 赞同：2
> 
> 时间：2012-09-04T04:47:37.100
> 
> 标签：java, arrays

这可能是一个微不足道的问题，但我遇到了数组声明的这种语法：

```
 void someFunction(int n){
      int[] myArray = new int[ n == 0 ? 1 : n ];
      ...
   } 
```

我尝试在网上查找一些教程，以了解发生了什么没有运气。
任何人都可以解释右括号中的表达式，什么时候通常使用类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T04:51:18.897

正确的表达式是“if/(then)/else”的“捷径”

表达式的第一部分是 'if'，条件和可以（但不是必须）包含在括号中，以进行澄清。

然后是？，说明“条件结束，结果是什么？” 之后是“true”语句，冒号之后是“else”语句。

简而言之，这意味着：如果 n == 0，分配一个大小为 1 的数组，否则分配 n 个元素。

这是一种相当常见的 c 语法，也是缩短变量赋值的好方法，但实际上与每个定义的数组没有任何关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:50:32.330

它基本上是 if/else 的语法糖。[这是一个链接](http://en.wikipedia.org/wiki/%3F%3a#Java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T04:51:09.503

它是一个三元运算符。之前的布尔语句`?`被评估，如果为真，则表达式被评估为 之前的值`:`，否则它评估为第二个值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T04:51:24.377

这是长度为 5 的数组的简单声明：

```
int[] myArray = new int[5]; 
```

`n == 0 ? 1 : n`提供一个数字（`1`如果`n == 0`和`n`如果不是），它是[三元运算符](http://en.wikipedia.org/wiki/?%3a)的一个示例。

所以

```
int[] myArray = new int[ n == 0 ? 1 : n ]; 
```

是简写

```
int[] myArray;

if (n == 0) {
  myArray = new int[1];
} else {
  myArray = new int[n];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T04:52:19.270

它是java三元运算符（？）用于检查n是否为0。如果n为零，则创建大小为1的数组。

如果 n 为 >1 ，则使用它来创建数组。零长度数组在 java 中是合法的，所以不确定作者在这里的意思。

如果它为了防止 in 的坏值应该一直在检查`n > 0 ? n :1`，所以即使是负值也会得到一个大小为 1 的数组

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T05:56:19.910

正如@ATaylor 和@SperanskyDanil 所说，
Syntax 将创建*大小为 1*`n=0`的数组，它会创建大小为`n`, when的数组`n != 0`。
如下图所示。
![在此处输入图像描述](../Images/9913711583094564f7f01381f6293726.png)

# c# - 两个List的界面设计和效率比较

> ID：12256954
> 
> 赞同：0
> 
> 时间：2012-09-04T04:47:50.273
> 
> 标签：c#, interface

我一直在尝试设计一个用于某些插件的高效界面。我以为我找到了一个不错的接口，但尝试实现它并不顺利。所以我希望看看这里是否有人对如何做到这一点有更好的建议。它错误“不包含'GetEnumerator'的公共定义”

**插件界面：**

```
namespace ALeRT.PluginFramework
{
    public interface IQueryPlugin
    {
        string PluginCategory { get; }
        string Name { get; }
        string Version { get; }
        string Author { get; }
        System.Collections.Generic.List TypesAccepted { get; }
    }

    interface IQueryPluginRBool : IQueryPlugin
    {
        bool Result(string input, bool sensitive);
    }

    interface IQueryPluginRString : IQueryPlugin
    {
        string Result(string input, bool sensitive);
    }
} 
```

本质上，我正在尝试获取应该使用的类型列表（类型可以是 URL、名称、电子邮件、IP 等）并将它们与查询插件中的值进行比较。每个查询插件都可能有多种它接受的类型。当它们匹配时，它会执行查询插件中的操作。

```
 [ImportMany]
    public IEnumerable<IQueryPlugin> QPlugins { get; set; }

    private void QueryPlugins(List<string> val, bool sensitive)
    {
        foreach (string tType in val) //Cycle through a List<string>
        {
            foreach (var qPlugins in this.QPlugins) //Cycle through all query plugins
            {
                foreach (string qType in qPlugins) //Cycle though a List<string> within the IQueryPlugin interface AcceptedTypes
                {
                    if (qType == tType) //Match the two List<strings>, one is the AcceptedTypes and the other is the one returned from ITypeQuery
                    {
                          //Do stuff here
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:10:08.043

你的代码

```
foreach (string qType in qPlugins)
{
    if (qType = tType)
        {
            //Do stuff here
        }
} 
```

不管用。你必须遍历`qPlugins.TypeAccepted`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:29:53.397

首先。不要公开列表（如下面的行），因为它违反了得墨忒耳法则。这意味着插件无法控制它自己的列表。任何对该插件有参考的人都可以修改该列表。

```
System.Collections.Generic.List TypesAccepted { get; } 
```

这个更好：

```
IEnumerable<TheType> TypesAccepted { get; } 
```

但这仍然让任何人修改列表的元素（在插件不知情的情况下）。如果元素是不可变的，那很好。

更好的解决方案是在插件接口中创建方法。例如有一个访问者模式方法：

```
public interface IPluginTypeVisitor
{
    void Visit(AcceptedType type);
}

public interface IQueryPlugin
{
    string PluginCategory { get; }
    string Name { get; }
    string Version { get; }
    string Author { get; }
    void VisitTypes(IPluginTypeVisitor visitor);
} 
```

但就您的循环示例而言，最佳解决方案很简单：

```
public interface IQueryPlugin
{
    string PluginCategory { get; }
    string Name { get; }
    string Version { get; }
    string Author { get; }
    bool IsTypeAcceptable(TheTypeType type); // get it, thetypetype? hahaha
}

private void QueryPlugins(List<string> val, bool sensitive)
{
    foreach (string tType in val) //Cycle through a List<string>
    {
        foreach (var plugin in this.QPlugins) //Cycle through all query plugins
        {
            if (plugin.IsTypeAcceptable(tType))
                //process it here
        }
    }
} 
```

# java - 在 ViewPager 中更新列表视图的正确方法？

> ID：12256955
> 
> 赞同：3
> 
> 时间：2012-09-04T04:48:10.680
> 
> 标签：java, android, android-fragments, android-viewpager, viewpagerindicator

我的应用程序的 Fragment 中有一个 ViewPager。在 ViewPager 中，我有 6 个列表视图，它们从中央数据源（一个时间表，然后每个列表视图从中提取天数列表）提取数据。现在我试图通过更改存储在我的 PagerAdapter 类中的计划来更新此计划对象，然后更新用作所有列表视图的适配器的 ArrayAdapter。当切换到一个列表视图时，将使用正确的数据创建一个新的数组适配器。

不幸的是，这根本不起作用。我在应用程序生命周期的任何时候都看不到任何数据。所以我假设我在将我的数据连接到我的 ViewPager 时做错了什么......

我一直在网上，阅读所有片段的东西，很多视图寻呼机的东西......有人知道正确的方法吗？

这是我的 DayAdapter (ViewPagerADapter) 的代码

```
public final class DayAdapter extends PagerAdapter {

    //~Data Fields----------------------------------------//
    /**
     * The list adapter that the current list is being handed to.
     */
    private Schedule schedule;
    /**
     * The current index of the day that is to be displayed.
     */
    private int currentIndex;
    /**
     * ArrayAdpter to be used to connect data to all of the list views.
     */
    private ArrayAdapter<Course> adapter;

    //~Constructors---------------------------------------//
    /**
     * Constructor for the DayAdapter implementation of PagerAdapter. Takes in a
     * Schedule object which is to be the data backing of the views displayed.
     * 
     * @param theSChedule the Schedule object that is the backing for the ListViews.
     */
    public DayAdapter(Schedule theSchedule) {

        schedule = theSchedule;
        currentIndex = schedule.getTodayIndex();
    }

    //~Methods--------------------------------------------//
    public void setSchedule(Schedule theSchedule) {

        schedule = theSchedule;

        adapter.clear();
        adapter.add(schedule.getDay(currentIndex).getList().get(0));
        adapter.notifyDataSetChanged();
    }

    @Override
    public Object instantiateItem(ViewGroup container, int index) {

        LayoutInflater inflater = (LayoutInflater) container.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.schedule_list_view, null);

        ListView view = new ListView(container.getContext());

        adapter = new ArrayAdapter<Course>(container.getContext(), 
                R.layout.list_view_child, schedule.getDay(index).getList());
        view.setAdapter(adapter);

        //TEST CODE!!!! This does not yield any sort data items in the list views!?
        adapter.add(new Course("test", "test", "test", "test", "test", "test", "test"));

        currentIndex = index;

        ((ViewPager) container).addView(layout);

        return layout;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {

        ViewPager pager = (ViewPager) container;
        View view = (View) object;

        pager.removeView(view);
    }

    /**
     * Gets the pageTitle, which is the name of the day that is at position.
     * 
     * @param position the index of the day selected.
     * @return the name of the day the index refers to.
     */
    @Override
    public CharSequence getPageTitle(int position) {
        return schedule.getDay(position).getThisDay();
    }

    @Override
    public int getCount() {
        return 6;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:46:48.133

如果这是该`instantiateItem`方法的完整代码，那么您在列表中看不到任何数据是正常的。您扩展名为`R.layout.schedule_list_view`（您很可能在其中有一个`ListView`）的布局文件，并以相同的`instantiateItem`方法创建一个**独立** `ListView`的小部件，在该小部件上设置数据。由于数据绑定到`ListView`不在布局文件中的数据，因此您看不到任何内容，因为原始数据`ListView`仍然为空。

`ListView`解决方案是在充气布局（ ）中设置数据（`R.layout.schedule_list_view`如果有），或者将创建`ListView`的数据添加到充气布局（`layout`（这是 a `View`，因此您希望将其转换为 a`ViewGroup`或`ViewGroup`))的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:53:58.447

尝试更改现有适配器中的数据，而不是使用新数据创建新适配器。

1.  获取与适配器关联的集合。
2.  根据需要修改集合（不应创建新的集合实例。您可以清除集合并添加新内容或更新集合。）
3.  调用适配器的 notifyDataSetChanged()。

希望这会奏效...... :)

# excel - 将 Excel 中的表格范围保存为 PDF

> ID：12256960
> 
> 赞同：1
> 
> 时间：2012-09-04T04:48:42.827
> 
> 标签：excel, vba

我想将预定义的 Excel 表格范围（来自 Excel 2007 和 2010 的范围）导出为 PDF。只有特定的表格应该出现在 PDF 中，而不是整个工作表。

![在此处输入图像描述](../Images/7c480a9b3c153eeb4f47e294e91ef80c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:43:04.163

Something like:

```
Sheet1.Range("B2:B7").ExportAsFixedFormat xlTypePDF, "C:\My Documents\Test.pdf" 
```

# google-apps-script - 谷歌脚本：文件类未定义

> ID：12256961
> 
> 赞同：0
> 
> 时间：2012-09-04T04:49:05.840
> 
> 标签：google-apps-script

我试图让我的谷歌文档脚本在每次打开文件时创建文件的备份副本。
为了复制我写

```
var name = File.getName();
var filecopy = File.makeCopy(name + " backup"); 
```

但它不会识别 File 类。虽然它知道 DocsList。我如何使它工作或以另一种方式制作文件的副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:02:06.067

GAS 允许调用类方法或仅实例化本地类（`Object`,`String`等）、自己的类或 Google 服务（`DocList`、`SpreadsheetApp`等）。其他类如`File`, `Folder`, `Spreadsheet`,`Range`等只能通过调用服务函数来访问和实例化，例如，`DocsList.getFileById("...");`返回`File`类实例。

以下函数将具有`srcFileID`ID 的文件复制到具有存储在`dstFileName`参数中的名称的新文件中。

```
function testCopy(srcFileID, dstFileName) {
  var srcFile = DocsList.getFileById(srcFileID);
  srcFile.makeCopy(dstFileName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:59:36.697

您不能以这种方式使用 File 类。在这些线上使用一些东西

```
var file = DocsList.getFileById(ID) ; // you can use DocsList.find or DocsList.create 
var filecopy = file.makeCopy(); 
```

# mysql - 来自 mySQL 的动态选项卡和动态内容

> ID：12256968
> 
> 赞同：2
> 
> 时间：2012-09-04T04:49:37.757
> 
> 标签：mysql, codeigniter, tabs

使用 CodeIgniter，我有一组标签，其标题取自我的数据库中的表。当我单击某个选项卡时，它会加载一个内容，该内容也来自我数据库上的另一个表。

我知道第二部分需要像 ajax 这样的东西。但我真的很困惑如何以 MVC 方式做到这一点。

我尝试创建一个控制器，该控制器将从我的模型中获取选项卡的标题，然后加载一个视图，将从我的模型中获取的数据作为参数传递。现在，我创建了选项卡，但是在单击时动态更改内容是我卡住的地方。

任何人至少可以告诉我如何实现这一目标的基本想法？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:30:18.443

让我们看看这个例子可能对你有帮助

```
<a href="javascript:void(0)" onclick="fetchdata(<?=$id?>)">Tab 1</a>
<a href="javascript:void(0)" onclick="fetchdata(<?=$id?>)">Tab 2</a>
<a href="javascript:void(0)" onclick="fetchdata(<?=$id?>)">Tab 3</a>
<a href="javascript:void(0)" onclick="fetchdata(<?=$id?>)">Tab 4</a>
// where $id is value on which you have to execute query anfdfetech data from DB
// here is JS function with ajax call
<script type="text/javascript">
 function fetchdata(id){

         $.ajax({
        type:"POST", url:"<?php echo base_url()?>controllername/functionname,
        data:"&id=" + id,
        complete:function (data) {
        alert(data.responseText);               
        //or here what you want to do with ajax response, like put content in any html tag
        $('#htmlidoftag').html(data.responseText);//like this
        }
    });
 }
</script>
// here is the php function within controller
function functionname()
{
    // First, delete old captchas
$id= $_REQUEST['id']
$response = $this->model->model_function($id);
// in model function run your query to fetch data   
echo $response ;
} 
```

# android - 使用 rhomobile 和 jquerymobile 创建 android 应用程序时失败 [INSTALL_FAILED_MISSING_SHARED_LIBRARY] 错误

> ID：12256972
> 
> 赞同：0
> 
> 时间：2012-09-04T04:49:58.513
> 
> 标签：android, rhomobile

模拟器启动并运行加载包

```
PWD: D:/MotorolaRhoMobileSuite2.0.5/ruby/lib/ruby/gems/1.9.1/gems/rhodes-3.3.3
CMD: F:/Android/android-sdk/platform-tools/adb.exe -e install -r D:/MotorolaRhoMobileSuite2.0.5/Workspace/test/bin/target/android/test-debug.apk
pkg: /data/local/tmp/test-debug.apk

Failure [INSTALL_FAILED_MISSING_SHARED_LIBRARY]

67 KB/s (12429119 bytes in 180.288s)
Failed to load (possibly because emulator not done launching)- retrying
PWD: D:/MotorolaRhoMobileSuite2.0.5/ruby/lib/ruby/gems/1.9.1/gems/rhodes-3.3.3
CMD: F:/Android/android-sdk/platform-tools/adb.exe -e install -r D:/MotorolaRhoMobileSuite2.0.5/Workspace/test/bin/target/android/test-debug.apk
pkg: /data/local/tmp/test-debug.apk

Failure [INSTALL_FAILED_MISSING_SHARED_LIBRARY] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:56:34.970

在[RhoMobile for Android](http://docs.rhomobile.com/rhoconnect/client-java)文档中，它需要一个名为`librhoconnectclient.so`. 我希望当您创建应用程序时，它没有将本机库放置在正确的目录中，并且部署失败，因为它找不到它。查看您的设置以验证您是否已正确安装所有内容。

# android - 有没有办法随机化Android简单帧动画？

> ID：12256974
> 
> 赞同：2
> 
> 时间：2012-09-04T04:50:09.160
> 
> 标签：android, animation, frame

寻求有关简单 Android 帧动画的帮助。我可以使用此处和在线找到的许多示例轻松地逐帧制作动画。

我的问题是，从我的动画中的动画列表中，我有 9 帧可绘制对象（0-8）。我可以在每个循环中以某种方式随机化这个动画的循环吗？

我能够找到 android:animationOrder="random"，但这只是随机化循环的开始。

我想随机化动画列表中项目的顺序，以便动画的每次运行都与上一次不同。

我正在为眨眼的眼睛制作动画，并且我不希望动画列表的相同 0-8 帧（项目）简单地重复自己。

有没有人有关于如何达到这种效果的任何提示？我什至想随机化每个项目的持续时间（android:duration）。

这将产生真正随机的闪烁效果。

谢谢！

# linux-kernel - linux驱动程序编程中的devm_kzalloc()和kzalloc()有什么区别

> ID：12256986
> 
> 赞同：22
> 
> 时间：2012-09-04T04:51:27.337
> 
> 标签：linux-kernel, linux-device-driver, device-driver

我发现`devm_kzalloc()`并`kzalloc()`在设备驱动程序编程中。但我不知道何时/何地使用这些功能。任何人都可以指定这些功能的重要性及其用法。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-02-28T02:07:07.257

`kzalloc()` allocates kernel memory like `kmalloc()`, but it also zero-initializes the allocated memory. `devm_kzalloc()` is managed `kzalloc()`. The memory allocated with managed functions is associated with the device. When the device is detached from the system or the driver for the device is unloaded, that memory is freed automatically. If multiple managed resources (memory or some other resource) were allocated for the device, the resource allocated last is freed first.

Managed resources are very helpful to ensure correct operation of the driver both for initialization failure at any point and for successful initialization followed by the device removal.

Please note that managed resources (whether it's memory or some other resource) are meant to be used in code responsible for the probing the device. They are generally a wrong choice for the code used for opening the device, as the device can be closed without being disconnected from the system. Closing the device requires freeing the resources manually, which defeats the purpose of managed resources.

The memory allocated with `kzalloc()` should be freed with `kfree()`. The memory allocated with `devm_kzalloc()` is freed automatically. It can be freed with `devm_kfree()`, but it's usually a sign that the managed memory allocation is not a good fit for the task.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-01T19:59:15.890

简而言之，devm_kzalloc() 和 kzalloc() 都用于设备驱动程序中的内存分配，但不同之处在于，如果您通过 kzalloc() 分配内存，而不是在该设备驱动程序的生命周期结束或何时释放该内存它是从内核中卸载的，但是如果您对 devm_kzalloc() 执行相同操作，则无需担心释放内存，设备库本身会自动释放该内存。

它们都做了完全相同的事情，但是通过使用 devm_kzalloc，程序员释放内存的开销很小

让我们举个例子来解释一下，第一个例子是使用 kzalloc

```
static int pxa3xx_u2d_probe(struct platform_device *pdev)
{
    int err;
    u2d = kzalloc(sizeof(struct pxa3xx_u2d_ulpi), GFP_KERNEL);     1
    if (!u2d)
         return -ENOMEM;
    u2d->clk = clk_get(&pdev->dev, NULL);
    if (IS_ERR(u2d->clk)) {
        err = PTR_ERR(u2d->clk);                                    2
        goto err_free_mem;
    }
...
    return 0;
err_free_mem:
    kfree(u2d);
    return err;
}
static int pxa3xx_u2d_remove(struct platform_device *pdev)
{
    clk_put(u2d->clk);               
    kfree(u2d);                                                     3
    return 0;
} 
```

在此示例中，您可以在函数 pxa3xx_u2d_remove() 中执行此操作，kfree(u2d)（由 3 指示的行）用于释放 u2d 分配的内存现在使用 devm_kzalloc() 查看相同的代码

```
static int pxa3xx_u2d_probe(struct platform_device *pdev)
{
    int err;
    u2d = devm_kzalloc(&pdev->dev, sizeof(struct pxa3xx_u2d_ulpi), GFP_KERNEL);
    if (!u2d)
        return -ENOMEM;
    u2d->clk = clk_get(&pdev->dev, NULL);
    if (IS_ERR(u2d->clk)) {
         err = PTR_ERR(u2d->clk);
         goto err_free_mem;
    }
...
    return 0;
err_free_mem:
    return err;
}
static int pxa3xx_u2d_remove(struct platform_device *pdev)
{
    clk_put(u2d->clk);
    return 0;
} 
```

没有 kfree() 来释放函数，因为 devm_kzalloc() 也是如此

# uitableview - 我应该使用什么样的用户界面？

> ID：12256988
> 
> 赞同：0
> 
> 时间：2012-09-04T04:51:40.790
> 
> 标签：uitableview, ios5, user-interface

好的，所以我有一个法线`viewController`，其中有一个`UIScrollView`提供有关酿酒厂的详细信息。我想做的是列出他们正在阅读的在酿酒厂蒸馏的烈酒。所以我尝试在`UITableView`我的. 那么有人对我可以使用哪种用户界面对象来完成诸如 UITableView 的动态特性之类的事情有任何想法吗？我不想使用 a ，因为它看起来很便宜且非结构化。我需要一些可以动态更改显示的项目数量的东西，因为并非所有的酿酒厂都会在那里蒸馏出相同数量的烈酒。`UIScrollView``UITableView``UIScrollView``UITextView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:00:27.010

如果您正在实现`UITableView`，则无需创建**UIScrollView**。当内容大小大于屏幕时，UITableView 会自动增加其大小并表现得像一个可滚动的视图。

# objective-c - iphone上的UILabel TextColor没有改变

> ID：12256995
> 
> 赞同：0
> 
> 时间：2012-09-04T04:53:49.630
> 
> 标签：objective-c, uilabel

我也在更改`UILabels`下面给定代码的文本颜色，但它不起作用。

```
 Q1.textColor=[UIColor colorWithRed:88/255.0 green:89/255.0 blue:91/255.0 alpha:0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:56:01.343

您可能希望 alpha 等于 1 而不是 0（零表示完全透明，您可能误解了这一点……）：

```
Q1.textColor = [UIColor colorWithRed:88 / 255.0f
                               green:89 / 255.0f
                                blue:91 / 255.0f
                               alpha:1.0f]; 
```

顺便说一句，你的问题的标题是不准确的。文本颜色很可能会发生变化，但您看不到文本，因为它是透明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:59:01.143

```
 Q1.textColor=[UIColor colorWithRed:(88/255.f) green:(89/255.f) blue:(91/255.f) alpha:1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T23:57:45.133

除了提供 alpha 值 0.0，检查整数除法与浮点除法，因为该方法需要浮点数，因此当您将 88（整数）除以 255.0（浮点数）时，您为红色值提供 0 而不是 0.34，同样为绿色和蓝色提供.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T04:56:13.340

```
 [Q1 setTextColor:[UIColor colorWithRed:88.0/255.0 green:89.0/255.0 blue:91.0/255.0 alpha:1.0]]; 
```

您只是忘记添加`alpha:1.0`:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T04:56:18.473

你想让它透明吗？您应该尝试 alpha 1。

```
Q1.textColor = [UIColor colorWithRed:88/255.0 green:89/255.0 blue:91/255.0 alpha:1]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T04:57:22.767

这样做是因为您的颜色 alpha 为 0 表示透明

```
 Q1.textColor=[UIColor colorWithRed:88.0/255.0 green:89.0/255.0 blue:91.0/255.0 alpha:1]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-23T23:08:51.550

您需要将 alpha 更改为 1，Alpha 表示不透明度（透明度）。

# css - 如何定位标题，就好像它仍在表格内一样

> ID：12256996
> 
> 赞同：0
> 
> 时间：2012-09-04T04:53:49.630
> 
> 标签：css, positioning

我正在使用这个名为[jscrollpane](http://jscrollpane.kelvinluck.com/)的 jquery 插件，我试图让它与表一起工作，这样只有重复部分才会有滚动条（tbody 内的元素）。这是我的代码：

```
<table>
    <thead>
        <tr>
            <th>DVD Title</th>
            <th>Category</th>
            <th>Book</th>
        </tr>
    </thead>
    <tbody id="container">

        <?php
        while($row = $query->fetch_object()){ 
        ?>
            <tr>
                <td><?php echo $row->dvd_title; ?></td>
                <td><?php echo $row->category; ?></td>
                <td><?php echo $row->book; ?></td>
            </tr>
        <?php
        }
        ?>

    </tbody>
</table> 
```

我试图将 tbody 作为容器，但没有得到结果。我还用段落包裹了重复部分（这对其他人有用），但它也不起作用。

现在我正在为此寻找一个CSS解决方案。有什么办法可以让表格标题保留它们的样式，就好像它们在表格内一样？这里的问题是，如果我在整个表格上使用插件，当我滚动时表格标题也会被隐藏，如下所示：

![在此处输入图像描述](../Images/2777956aa64f789a45d092d21ebc1c43.png)

我尝试使用相对定位，但是当它离开表格覆盖的区域时它会隐藏标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T05:25:05.043

## 纯 CSS 解决方案：

**HTML：**

```
<div id="wrapper">
    <ul id="tbl-title"> 
        <li class="seperator">DVD Title</li>
        <li class="seperator">Category</li>
        <li>Book</li>          
    </ul>

    <div id="tbl-data">
        <?php
            while($row = $query->fetch_object()){ 
        ?> 
        <ul class="tbl-row"> 
            <li class="seperator">
                <span><?php echo $row->dvd_title; ?></span>            
            </li>
            <li class="seperator">
                <span><?php echo $row->category; ?></span>            
            </li>
            <li>
                <span><?php echo $row->book; ?></span>
            </li>              
        </ul>
        <?php
            }
        ?>
    </div>    
</div> 
```

**CSS：**

```
#tbl-title,
.tbl-row {
    margin:0;
    padding:0;
    list-style-type: none;   
}

#tbl-title li,
.tbl-row li {
    float: left;
    width: 33%;
    color: #333;
    font-size: 13px;
    padding: 5px 0;
    font-family: tahoma;    
}

#tbl-title li{
    background: #ccc;
    font-weight: bold;
    text-align:center;
    border-bottom: 1px solid #999;    
}

.tbl-row li {
    background: #f4f4f4;
    font-weight: normal;
    text-align:left;
    border-bottom: 1px solid #fff;    
}

.tbl-row li span { 
    display: block; 
    padding: 0px 10px; 
    text-transform: uppercase; 
}

.seperator {
    border-right: 1px solid #fff;
}

/* Styles specific to this particular page */
.scroll-pane {
    width: 100%;
    height: 200px;
    overflow: auto;
} 
```

## [查看结果](http://jsfiddle.net/akhurshid/XbjAe/)- （使用 jscrollpane 实现更新）

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:05:29.050

添加你在 td 内滚动主 div colspan="3'

```
 <table>        
            <tr>
            <th>DVD Title</th>
            <th>Category</th>
            <th>Book</th>
            </tr>        
            <tr>
            <td colspan="3">
            <div class="scroll-pane jspScrollable" style="overflow: hidden; padding: 0px; width: 760px; " tabindex="0">        
            <div class="jspContainer" style="width: 760px; height: 200px; "><div class="jspPane" style="padding: 0px; width: 740px; top: -110.93331909179688px; ">
            <table>
<tr>
                <td><?php echo $row->dvd_title; ?></td>
                <td><?php echo $row->category; ?></td>
                <td><?php echo $row->book; ?></td>
            </tr>
</table>
            <div class="jspVerticalBar"><div class="jspCap jspCapTop"></div><div class="jspTrack" style="height: 200px; "><div class="jspDrag" style="height: 77px; top: 42.507159651996936px; "><div class="jspDragTop"></div><div class="jspDragBottom"></div></div></div><div class="jspCap jspCapBottom"></div></div></div></div>
            </td>
            </tr>
            </table> 
```

# c# - MVC 登录错误 - 还记得我吗？字段是必需的

> ID：12256997
> 
> 赞同：3
> 
> 时间：2012-09-04T04:53:52.420
> 
> 标签：c#, asp.net-mvc, visual-studio-2012

![在此处输入图像描述](../Images/18d264534bf4904de79bc729714a4f6b.png)我有一个 MVC 应用程序，它具有默认登录功能，当我登录时没有选中`Remember me`复选框模型状态添加了一个错误说： `"The Remember me? field is required."`使用`RememberMe`密钥，它在模型类中未标记为必需。对我来说，记住我是可选的。

因此，当我`if(ModelState.IsValid)`在验证用户之前进行检查时，由于 RememberMe 错误，IsValid 属性为 false。

所以目前我正在使用 `ModelState["RememberMe"].Errors.Clear();`Login Action 方法和检查来删除这个错误`ModelState.IsValid`。

有没有更好的方法来避免这个错误被添加到`ModelState`？

我正在使用 VS 2012 RC

**控制器**

```
[HttpPost]    
public ActionResult Login(LoginModel model, string returnUrl) {
    ModelState["RememberMe"].Errors.Clear();
    if(ModelState.IsValid) {
        if(Membership.ValidateUser(model.UserName, model.Password)) {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if(Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\")) {
                    return Redirect(returnUrl);
            }                    
            else {
                    return RedirectToAction("Index", "Home");
            }
        }
        else {
           ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

**模型**

```
public class LoginModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
} 
```

**看法**

```
@{ Layout = "~/Views/Shared/_lightLayout.cshtml"; }
@model MvcFoodService.Models.LoginModel
<div class="accountHeader">
    <h2>
        Log In</h2>
    <p>
        Please enter your username and password. @Html.ActionLink("Register", "Register")
        if you don't have an account.</p>
</div>
@using(Html.BeginForm()) {
    @Html.DevExpress().Label(settings => {
        settings.Name = "UserNameLabel";
        settings.Text = "User Name";
        settings.AssociatedControlName = "UserName";
    }).GetHtml()

    <div class="form-field">
        @Html.EditorFor(m => m.UserName)
        @Html.ValidationMessageFor(m => m.UserName)
    </div>

    @Html.DevExpress().Label(settings => {
        settings.Name = "PasswordLabel";
        settings.Text = "Password";
        settings.AssociatedControlName = "Password";
    }).GetHtml()
    <div class="form-field">
        @Html.EditorFor(m => m.Password)
        @Html.ValidationMessageFor(m => m.Password)
    </div>

    <div class="form-field">
        @Html.DevExpress().CheckBox(settings => {
            settings.Name = "RememberMe";
            settings.Text = "Remember me?";            
        }).GetHtml()
    </div>

    @Html.DevExpress().Button(settings => {
        settings.Name = "Button";
        settings.Text = "Log On";
        settings.UseSubmitBehavior = true;
    }).GetHtml()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:31:18.157

RememberMe 字段是 devexpress 可为空的复选框。您必须设置默认值

```
@Html.DevExpress().CheckBox(settings => {
        settings.Name = "RememberMe";
        settings.Text = "Remember me?";
        settings.Checked = false;
    }).GetHtml() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T05:36:22.113

该`RememberMe`字段是一个复选框。这意味着如果未选中，它不会在帖子中提供。

因此，如果您在操作中有这样的情况：

```
[HttpPost]
public ActionResult Login(string userName, string password, bool rememberMe)
{
} 
```

它会失败，因为没有提供任何值。

您可以通过修改操作来解决它：

```
[HttpPost]
public ActionResult Login(string userName, string password, bool rememberMe = false)
{
} 
```

这告诉 MVC 它是可选的。

它也可以通过在表单中​​包含隐藏输入来解决：

```
<input type="hidden" name="rememberme" value="false" />
<input type="checkbox" name="rememberme" value="true" /> 
```

如果选中（将使用最后一个值），则将发送两个值用于 rememberme，如果未选中，则仅发送隐藏值（false）。

**更新**

由于您使用的是视图模型，因此您必须创建`RememberMe`字段`bool?`或更改，因此复选框输入上方有一个隐藏的输入。

**更新2：**

只需在视图中更改为：

```
<div class="form-field">
    @Html.DevExpress().CheckBox(settings => {
        settings.Name = "RememberMe";
        settings.Text = "Remember me?";            
    }).GetHtml()
    <input type="hidden" name="RemberMe" value="false" />
</div> 
```

你都准备好了。

***边注***

ASP.NET MVC3:s 动作助手生成的代码如下所示：

```
<input data-val="true" data-val-required="The Remember me? field is required." id="RememberMe" name="RememberMe" type="checkbox" value="true" />
<input name="RememberMe" type="hidden" value="false" /> 
```

所以 DevExpress 不遵循 MVC3 的行为（因为它是为 ASP.NET MVC 构建的，所以应该这样做）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T09:56:13.290

尝试一个可为空的布尔值。

公共布尔？记住我{得到；放; }