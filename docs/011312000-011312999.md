# StackOverflow 问答 11312000-11312999

# javascript - 在 asp.net 子页面中排除母版页 js 文件

> ID：11312001
> 
> 赞同：3
> 
> 时间：2012-07-03T13:28:19.490
> 
> 标签：javascript, jquery, asp.net

我在母版页中使用 asp.net 脚本管理器来添加 js 文件。在其中一个子页面中，我不希望排除特定的 js 文件。在 asp.net 中可以吗？

例如，我的母版页中的代码

```
 <asp:ScriptManager runat="server" EnablePageMethods="true"  EnablePartialRendering="true" ID="id" OnResolveScriptReference="sm_ResolveScriptReference">
    <Scripts>
        <asp:ScriptReference Path="~/scripts/jquery-1.4.2.min.js" /> 
         <asp:ScriptReference Path="~/scripts/jquery.bgiframe.min.js" />
        <asp:ScriptReference Path="~/scripts/tax.js" />
        <asp:ScriptReference Path="~/scripts/old.js" />
        <asp:ScriptReference Path="~/scripts/menu.js" />
    </Scripts>
</asp:ScriptManager> 
```

我喜欢从一个子页面中排除 old.js。希望这会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:52:58.767

扭曲你的`ScriptManager`内心`PlaceHolder`，当你确实需要改变它时，简单地把它`PlaceHolder`放在孩子身上。例如：

```
 <asp:ContentPlaceHolder id="ScrMang" runat="server">        
     <asp:ScriptManager runat="server" EnablePageMethods="true"  EnablePartialRendering="true" ID="id" OnResolveScriptReference="sm_ResolveScriptReference">
    <Scripts>
        <asp:ScriptReference Path="~/scripts/jquery-1.4.2.min.js" /> 
         <asp:ScriptReference Path="~/scripts/jquery.bgiframe.min.js" />
        <asp:ScriptReference Path="~/scripts/tax.js" />
        <asp:ScriptReference Path="~/scripts/old.js" />
        <asp:ScriptReference Path="~/scripts/menu.js" />
    </Scripts>
     </asp:ScriptManager>       
   </asp:ContentPlaceHolder> 
```

如果包含此行，则在子节点上，它将删除 ScriptManager。当然，您可以使用不同的脚本再次包含它来加载。

```
<asp:Content ID="Content3" ContentPlaceHolderID="ScrMang" Runat="Server">
</asp:Content> 
```

第二种解决方案是以相同的方式制作嵌套母版页，将 ScriptManager 包含在 PlaceHolder 中，将第一个母版页作为父级制作 MasterPage，并更改它将包含的脚本。然后选择哪些页面获取母版页，哪些获取具有不同脚本的嵌套母版页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:44:58.697

母版页可以在标签中包含默认内容。当子页面使用母版页并且不包含对具有默认内容的内容占位符的引用时，默认内容将在其位置呈现。

在这种情况下，我要做的是在母版页中为我的脚本创建一个内容占位符。然后，在您不想让脚本显示的页面中，使用您*的*脚本创建一个指向 的内容项。这允许您“覆盖”该特定页面上使用的脚本。

# python - 根据MINUIT的Python参数转换

> ID：11312004
> 
> 赞同：1
> 
> 时间：2012-07-03T13:28:37.363
> 
> 标签：python, constraints, scipy, bounds

我正在为基于 scipy 的 optimize.leastsq 的 2D 数据编写一个自动曲线拟合例程，它可以工作。但是，当添加许多起始值略微偏离的曲线时，我会得到非物理结果（例如负幅度）。

我发现这篇文章[Scipy: bounds forfitting parameter(s) when using optimize.leastsq](https://stackoverflow.com/questions/7409694/scipy-bounds-for-fitting-parameters-when-using-optimize-leastsq)并试图根据 Cern 的 Minuit 使用参数转换。在上述问题中，有人提供了一些 python 代码的链接。

```
code.google.com/p/nmrglue/source/browse/trunk/nmrglue/analysis/leastsqbound.py 
```

我写了这个最小的工作示例（扩展代码）

```
"""
http://code.google.com/p/nmrglue/source/browse/trunk/nmrglue/analysis/leastsqbound.py
Constrained multivariate Levenberg-Marquardt optimization
"""

from scipy.optimize import leastsq
import numpy as np
import matplotlib.pyplot as plt #new

def internal2external_grad(xi, bounds):
    """ 
    Calculate the internal to external gradiant

    Calculates the partial of external over internal

    """

    ge = np.empty_like(xi)

    for i, (v, bound) in enumerate(zip(xi, bounds)):

        a = bound[0]    # minimum
        b = bound[1]    # maximum

        if a == None and b == None:    # No constraints
            ge[i] = 1.0

        elif b == None:      # only min
            ge[i] = v / np.sqrt(v ** 2 + 1)

        elif a == None:      # only max
            ge[i] = -v / np.sqrt(v ** 2 + 1)

        else:       # both min and max
            ge[i] = (b - a) * np.cos(v) / 2.

    return ge

def i2e_cov_x(xi, bounds, cov_x):

    grad = internal2external_grad(xi, bounds)
    grad = grad = np.atleast_2d(grad)
    return np.dot(grad.T, grad) * cov_x

def internal2external(xi, bounds):
    """ Convert a series of internal variables to external variables"""

    xe = np.empty_like(xi)

    for i, (v, bound) in enumerate(zip(xi, bounds)):

        a = bound[0]    # minimum
        b = bound[1]    # maximum

        if a == None and b == None:    # No constraints
            xe[i] = v

        elif b == None:      # only min
            xe[i] = a - 1\. + np.sqrt(v ** 2\. + 1.)

        elif a == None:      # only max
            xe[i] = b + 1\. - np.sqrt(v ** 2\. + 1.)

        else:       # both min and max
            xe[i] = a + ((b - a) / 2.) * (np.sin(v) + 1.)

    return xe

def external2internal(xe, bounds):
    """ Convert a series of external variables to internal variables"""

    xi = np.empty_like(xe)

    for i, (v, bound) in enumerate(zip(xe, bounds)):

        a = bound[0]    # minimum
        b = bound[1]    # maximum

        if a == None and b == None: # No constraints
            xi[i] = v

        elif b == None:     # only min
            xi[i] = np.sqrt((v - a + 1.) ** 2\. - 1)

        elif a == None:     # only max
            xi[i] = np.sqrt((b - v + 1.) ** 2\. - 1)

        else:   # both min and max
            xi[i] = np.arcsin((2.*(v - a) / (b - a)) - 1.)

    return xi

def err(p, bounds, efunc, args):

    pe = internal2external(p, bounds)    # convert to external variables
    return efunc(pe, *args)

def calc_cov_x(infodic, p):
    """
    Calculate cov_x from fjac, ipvt and p as is done in leastsq
    """

    fjac = infodic['fjac']
    ipvt = infodic['ipvt']
    n = len(p)

    # adapted from leastsq function in scipy/optimize/minpack.py
    perm = np.take(np.eye(n), ipvt - 1, 0)
    r = np.triu(np.transpose(fjac)[:n, :])
    R = np.dot(r, perm)
    try:
        cov_x = np.linalg.inv(np.dot(np.transpose(R), R))
    except LinAlgError:
        cov_x = None
    return cov_x

def leastsqbound(func, x0, bounds, args = (), **kw):
    """
    Constrained multivariant Levenberg-Marquard optimization

    Minimize the sum of squares of a given function using the 
    Levenberg-Marquard algorithm. Contraints on parameters are inforced using 
    variable transformations as described in the MINUIT User's Guide by
    Fred James and Matthias Winkler.

    Parameters:

    * func      functions to call for optimization.
    * x0        Starting estimate for the minimization.
    * bounds    (min,max) pair for each element of x, defining the bounds on
                that parameter.  Use None for one of min or max when there is
                no bound in that direction.
    * args      Any extra arguments to func are places in this tuple.

    Returns: (x,{cov_x,infodict,mesg},ier)

    Return is described in the scipy.optimize.leastsq function.  x and con_v  
    are corrected to take into account the parameter transformation, infodic 
    is not corrected.

    Additional keyword arguments are passed directly to the 
    scipy.optimize.leastsq algorithm. 

    """
    # check for full output
    if "full_output" in kw and kw["full_output"]:
        full = True
    else:
        full = False

    # convert x0 to internal variables
    i0 = external2internal(x0, bounds)

    # perfrom unconstrained optimization using internal variables
    r = leastsq(err, i0, args = (bounds, func, args), **kw)

    # unpack return convert to external variables and return
    if full:
        xi, cov_xi, infodic, mesg, ier = r
        xe = internal2external(xi, bounds)
        cov_xe = i2e_cov_x(xi, bounds, cov_xi)
        # XXX correct infodic 'fjac','ipvt', and 'qtf' 
        return xe, cov_xe, infodic, mesg, ier

    else:
        xi, ier = r
        xe = internal2external(xi, bounds)
        return xe, ier

# new below

def _evaluate(x, p):
    '''
    Linear plus Lorentzian curve
    p = list with three parameters ([a, b, I, Pos, FWHM])
    '''
    return p[0] + p[1] * x + p[2] / (1 + np.power((x - p[3]) / (p[4] / 2), 2))

def residuals(p, y, x):

    err = _evaluate(x, p) - y
    return err

if __name__ == '__main__':
    data = np.loadtxt('constraint.dat') # read data

    p0 = [5000., 0., 500., 2450., 3] #Start values for a, b, I, Pos, FWHM
    constraints = [(4000., None), (-50., 20.), (0., 2000.), (2400., 2451.), (None, None)]

    p, res = leastsqbound(residuals, p0, constraints, args = (data[:, 1], data[:, 0]), maxfev = 20000)
    print p, res

    plt.plot(data[:, 0], data[:, 1]) # plot data
    plt.plot(data[:, 0], _evaluate(data[:, 0], p0)) # plot start values
    plt.plot(data[:, 0], _evaluate(data[:, 0], p)) # plot fit values
    plt.show() 
```

这就是绘图输出，其中绿色是起始条件，红色是拟合结果： ![绘制结果](../Images/e2d0b3af036f42b6fb64dd602b64c313.png)

这是正确的用法吗？如果超出范围，External2internal 转换只会引发 nan。leastsq 似乎能够处理这个？

[我在这里](http://pastebin.com/cn6kR6Lf)上传了拟合数据。只需粘贴到名为 constraint.dat 的文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:35:39.007

已经有一个流行的受约束的 Lev-Mar 代码

[http://adsabs.harvard.edu/abs/2009ASPC..411..251M](http://adsabs.harvard.edu/abs/2009ASPC..411..251M)

用python实现

[http://code.google.com/p/astrolibpy/source/browse/mpfit/mpfit.py](http://code.google.com/p/astrolibpy/source/browse/mpfit/mpfit.py)

我建议不要重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:12:18.203

按照 sega_sai 的回答，我想出了这个使用 mpfit.py 的最小工作示例

```
import matplotlib.pyplot as plt
from mpfit import mpfit
import numpy as np

def _evaluate(p, x):
    '''
    Linear plus Lorentzian curve
    p = list with three parameters ([a, b, I, Pos, FWHM])
    '''
    return p[0] + p[1] * x + p[2] / (1 + np.power((x - p[3]) / (p[4] / 2), 2))

def residuals(p, fjac = None, x = None, y = None, err = None):
    status = 0
    error = _evaluate(p, x) - y
    return [status, error / err]

if __name__ == '__main__':
    data = np.loadtxt('constraint.dat') # read data
    x = data[:, 0]
    y = data[:, 1]
    err = 0 * np.ones(y.shape, dtype = 'float64')
    parinfo = [{'value':5000., 'fixed':0, 'limited':[0, 0], 'limits':[0., 0.], 'parname':'a'},
               {'value':0., 'fixed':0, 'limited':[0, 0], 'limits':[0., 0.], 'parname':'b'},
               {'value':500., 'fixed':0, 'limited':[0, 0], 'limits':[0., 0.], 'parname':'I'},
               {'value':2450., 'fixed':0, 'limited':[0, 0], 'limits':[0., 0.], 'parname':'Pos'},
               {'value':3., 'fixed':0, 'limited':[0, 0], 'limits':[0., 0.], 'parname':'FWHM'}]
    fa = {'x':x, 'y':y, 'err':err}
    m = mpfit(residuals, parinfo = parinfo, functkw = fa)
    print m 
```

拟合结果为：

```
mpfit.py: 3714.97545, 0.484193283, 2644.47271, 2440.13385, 22.1898496
leastsq:  3714.97187, 0.484194545, 2644.46890, 2440.13391, 22.1899295 
```

所以结论：两种方法都有效，都允许约束。但由于 mpfit 来自一个非常成熟的来源，我更信任它。如果可用，它还尊重错误值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:59:03.783

尝试 lmfit-py - [https://github.com/newville/lmfit-py](https://github.com/newville/lmfit-py)

1.  它还通过 scipy.optimize.leastsq 使用 Levenberg-Marquardt (LM) 算法。不确定性是可以的。

2.  它不仅允许您使用边界来约束拟合参数，而且还可以使用它们之间的数学表达式来约束拟合参数，而无需修改拟合函数。

3.  忘记在拟合函数中使用那些糟糕的 p[0], p[1] ...。只需通过参数类使用拟合参数的名称。

# rabbitmq - 有没有办法在 RabbitMQ 中指定剩余队列？

> ID：11312005
> 
> 赞同：2
> 
> 时间：2012-07-03T13:28:38.470
> 
> 标签：rabbitmq

是否可以在交换（直接或主题）和队列之间定义绑定，以便队列仅接收那些发送到与任何其他队列没有显式绑定的路由键的消息？

例如，有一个交换机 X 和队列 A 和 B。队列 A 用“黑色”和“白色”绑定键绑定。队列 B 被定义为剩余队列（如果可能的话，这是我的问题的重点）。因此，当我们使用“黑色”或“白色”路由键向交换 X 发送消息时，它会被传递到队列 A。如果我们使用任何其他路由键向交换 X 发送消息，那么它会被传递到仅队列 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:04:24.497

当然，只需使用 RabbitMQ 的[备用交换](http://www.rabbitmq.com/extensions.html#alternate-exchange)功能。这正是它的设计目的。

# javascript - 在封闭的python服务器上的ajax请求中获取0作为Http响应代码

> ID：11312007
> 
> 赞同：0
> 
> 时间：2012-07-03T13:28:49.963
> 
> 标签：javascript, python, http, httpwebrequest, httpwebresponse

我正在通过 ajax 请求轮询我的 python 服务器。当服务器打开时，我得到的状态代码正确为 200，但是当我使用 CTRL+C 关闭服务器时，我注意到我的轮询仍在继续。当我在控制台中打印状态代码时，服务器关闭时得到它 0。

当我在关闭服务器的浏览器上点击该 ajax url 时，我暂时不可用。

我不明白为什么我得到状态码 0？它应该是 404（未找到）或 503（暂时不可用）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:32:23.997

服务器没有发送响应，所以不可能有 HTTP 状态码。见[规格](http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute)：

> status 属性必须返回运行这些步骤的结果：
> 
> 1.  如果状态为 UNSENT 或 OPENED，则返回 0 并终止这些步骤。
>     
>     
> 2.  如果设置了错误标志，则返回 0 并终止这些步骤。
>     
>     
> 3.  返回 HTTP 状态码。

# asp.net-mvc-3 - asp.net MVC3 编辑/创建页面上的图像中断，索引上的确定

> ID：11312010
> 
> 赞同：2
> 
> 时间：2012-07-03T13:29:06.063
> 
> 标签：asp.net-mvc-3, razor

我有一个 _Layout.cshtml 页面，用于包含所有“母版页”样式。此页面在我的标题中包含一个图像，该图像在布局页面中映射为：

```
<img src="/Content/Images/Logo.jpg"/> 
```

当我创建控制器时，我选择了创建“具有读/写操作和视图的控制器，使用实体框架”的选项，它生成了我的编辑、删除、创建和索引视图。

我的图像通常出现在所有各种控制器的索引页面上，但是当我单击任何编辑、创建或删除页面时，图像会中断。我是否需要在这些页面上以不同方式映射图像，如果需要，我该如何更改？我的印象是所有页面都以相同的方式从布局页面中提取内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:42:19.570

尝试像这样映射图像：

```
<img src="@Url.Content("~/Content/Images/Logo.jpg")" /> 
```

# axapta - 是否可以过滤从计算字段中获取条件的数据源？

> ID：11312013
> 
> 赞同：0
> 
> 时间：2012-07-03T13:29:36.910
> 
> 标签：axapta, dynamics-ax-2009

我猜是否可以使用从计算字段获得的结果来过滤数据源。

例如，我需要使用以下条件过滤我的数据源（以及结果）我的网格：`Field A - Field B > 0`。

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:12:18.450

在表中的字段上创建一个范围（如其 RecId，您选择哪个字段并不重要）并在其值中使用表达式（在此处描述[http://www.axaptapedia.com/Expressions_in_query_ranges](http://www.axaptapedia.com/Expressions_in_query_ranges)）。

# c# - 如何在.Net MVC3中使用json和razor snytax更改表单的标签

> ID：11312022
> 
> 赞同：0
> 
> 时间：2012-07-03T13:29:55.123
> 
> 标签：c#, javascript, json, asp.net-mvc-3, viewdata

我正在尝试将 json 用于我的网页的全球化选项。我喜欢通过使用一个小下拉框而不刷新整个页面来更改表单的标签，更有趣的部分是我的视图中有两个以上的表单.

到目前为止，我已经这样做了：

**我的杰森：**

```
public JsonResult Globalx(String incoming)
{
    System.Globalization.CultureInfo Cult = new System.Globalization.CultureInfo(incoming, true);
    System.Threading.Thread.CurrentThread.CurrentCulture = Cult;
    System.Threading.Thread.CurrentThread.CurrentUICulture = Cult;
    Resources.Global.Culture = System.Threading.Thread.CurrentThread.CurrentCulture;
    Global.ResourceManager.GetResourceSet(Cult, false, true);

    ViewData["Name"] = Global.Name;
    ViewData["Surname"] = Global.Surname;
    ViewData["Birth"] = Global.Birth;

    String lnginfo = Resources.Global.Culture.TwoLetterISOLanguageName.ToString();
    ViewData["Languages"] = new SelectList(myList, "Value", "Text", lnginfo);

    return Json(ViewData, JsonRequestBehavior.AllowGet);
} 
```

**我的观点：**

```
@model MyCustomers.Models.Customers
@{
    ViewBag.Title = ViewData["NewCustomer"];
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript" language="javascript">

$(document).ready(function () {
    function changeLang() {
        var lang = $("#LanguageBox").val();
        $.getJSON('@Url.Content("~/Home/People/")', { incoming: lang }, function (data) {
            // what should i do here to get my label's language changed?
        })
    }
}

</script>

@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data", id = "LanguageForm" }))
{
<fieldset>
    <legend>@ViewData["LanguagesTitle"]</legend>
    @Html.DropDownListFor(x => x.SelectedLanguage, (SelectList)ViewData["Languages"], new { onchange = "changeLang()", id = "LanguageBox" })
</fieldset>
}

@using (Html.BeginForm("PeopleForm", "Home", FormMethod.Post, new { enctype = "multipart/form-data", id = "PeopleForm" }))
{
<fieldset>
    <legend>@ViewData["SalesContract"]</legend>
        <div>
            <div class="Name">
                @Html.Label(ViewData["Name"].ToString()) <!--> HERE </!-->
                @Html.EditorFor(x => x.People.Name)
            </div>
            <div class="Surname">
                @Html.Label(ViewData["Surname"].ToString()) <!--> HERE </!-->
                @Html.EditorFor(x => x.People.Surname)
            </div>
            <div class="Birth">
                @Html.Label(ViewData["Birth"].ToString()) <!--> AND HERE </!-->
                @Html.EditorFor(x => x.People.Birth)
            </div>
        </div>
</fieldset>
} 
```

不，我实际上并没有使用这种方法，我每次都刷新整个页面来更改标签的语言，但我的一些朋友告诉我，无需刷新也可以完成，我想到的第一件事是 Json .. 我不知道如果可能的话，我只是在尝试。任何其他想法都是受欢迎的。

我认为标题有点令人困惑，我假设我的问题在这里被理解，所以如果有人能找到更好的标题，请尝试修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:35:57.890

在您的 Json 结果中，您需要识别您为其提供文本的每个标签，例如每个标签都有一个 Json 对象：

```
Id: 'label1',
Text: 'Enter your first name' 
```

您在数组中为页面上的每个标签提供这些对象之一，

```
{Id: 'label1', Text: 'Enter your first name'},
{Id: 'label2', Text: 'Enter your second name'},
{Id: 'label3', Text: 'Enter your telephone number'}, 
```

然后你在请求端处理每一个，

```
$.getJSON('@Url.Content("~/Home/People/")', { incoming: lang }, function (data) {
    for(i = 0; i < data.length; i++){
        $('#'+data[i].Id).Html(data[i].Text);
    }
}) 
```

我不能 100% 确定 Html 将是最好的使用方法 - MVC 创建的子 DOM 元素可能需要在您的选择器中加以考虑。

如果你想坚持你现在使用的方法，你需要一次硬编码每个分配的值。

```
$.getJSON('@Url.Content("~/Home/People/")', { incoming: lang }, function (data) {
    $('#Name').Html(data['Name']);
    $('#Birth').Html(data['Birth']);        
}) 
```

# c# - 如何从 ressources 文件夹中获取文件以将它们复制到 C# 的其他目录中？

> ID：11312026
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:30:07.027
> 
> 标签：c#, copy, directory

您好，我想知道是否可以从 ressources 文件夹中提取文件以在我尝试过的那一刻将其复制到目录中：

```
 protected void Form1_Load(object sender, EventArgs e)
    {
            FileInfo info = new FileInfo(file);
            info.CopyTo(PATH + "\\shell" + "\\" + file, true);
            Bitmap bmp = (Bitmap)Properties.Resources.ResourceManager.GetObject(file);
            Image bitmap = Bitmap.FromFile(Environment.GetFolderPath   (Environment.SpecialFolder.Desktop) + "ConnectableCORR\\ApplicationConnectTable\\Resources\\teapot.jpg");
            bitmap.Save(Path.GetDirectoryName(PATH + "\\shell" + "\\" + "thumbnail_3D.png"), System.Drawing.Imaging.ImageFormat.Png);
     } 
```

但是副本不起作用是我做错了什么吗？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:03:18.720

[对象“Image”的“ Save](http://msdn.microsoft.com/en-gb/library/9t4syfhh%28v=vs.80%29.aspx) ”方法需要“filename”中的文件名，并且您正在发送它：

```
Path.GetDirectoryName(PATH + "\\ shell" + "\\" + "thumbnail_3D.png") 
```

[Path.GetDirectoryName](http://msdn.microsoft.com/en-gb/library/system.io.path.getdirectoryname%28v=vs.80%29.aspx)

将返回：

```
PATH + "\\ shell" + "\\" 
```

会失败的文件名，你还应该包括文件名。

**编辑**

试试这个并检查路径：

```
FileInfo info = new FileInfo(file);
MessageBox.Show(string.Format("File '{0}' exist '{1}'", info.FullName, info.Exists));

var destinationFile = string.Format("{0}\\shell\\{1}", PATH, file);
info.CopyTo(destinationFile, true);

MessageBox.Show(string.Format("File '{0}' exist '{1}'", destinationFile, File.Exists(destinationFile))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:51:14.350

我将专注于`info.CopyTo()`通话，因为这是您复制文件的两个选项中更好的方法。正如它所写的那样，它为什么不起作用有多种可能性。对于我正在考虑的所有事情，都会引发异常，因此您应该能够`try-catch`在代码周围添加一个块并进行调试以查看错误是什么。这是我最好的猜测，按照我尝试调试它们的顺序：

1.  是什么`file`？是文件名吗？它是完整路径加文件名吗？在我看来，您的代码希望它在一个地方完全合格，而在另一个地方只是名称。
2.  源文件不存在。在尝试复制文件之前，我会快速`info.Exists`确认文件是否存在。
3.  确保输出文件名有意义。如果`file`包含路径，那么您可能确实想要这样做`info.CopyTo(PATH + "\\shell\\" + info.Name, true)`，除非您想在输出路径中包含源路径。
4.  输出目录不存在。如果是这种情况。A`DirectoryNotFoundException`将被抛出。检查目录是否存在并在执行`CopyTo`.
5.  文件名错误。可能包含无效字符，这将导致 a`ArgumentException`或 a `NotSupportedException`。
6.  路径太长。可能不是这个，但`PathTooLongException`会抛出一个。

# jsf - 用 JSP/JSF EL（表达式语言）替换 BeanUtils.setProperty

> ID：11312032
> 
> 赞同：1
> 
> 时间：2012-07-03T13:30:35.070
> 
> 标签：jsf, el, apache-commons-beanutils

有没有一种方法可以显式调用 JSP/JSF 表达式语言 (EL) 来替代我可能`BeanUtils.setProperty`用来设置嵌套和索引属性的方法？

例如，调用`BeanUtils.setProperty(object, "foo.bar", "value")`将导致`object.getFoo().setBar("value")`通过反射调用。

有没有办法我可以在 EL 中做到这一点？

我正在尝试做的类似于`<h:inputText value="#{object.foo.bar}">`但在后端方法中而不是通过 UI，其中“object.foo.bar”属性表达式可能是动态的。我知道`BeanUtils`有效，但感觉有些过时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:59:40.287

你可以用[`ValueExpression#setValue()`](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html#setValue%28javax.el.ELContext,%20java.lang.Object%29)这个。

```
FacesContext context = FacesContext.getCurrentInstance();
ELContext elContext = context.getELContext();
ValueExpression expression = context.getApplication().getExpressionFactory()
    .createValueExpression(elContext, "#{object.foo.bar}", String.class);
expression.setValue(elContext, "value"); 
```

# c# - 删除字符串的一部分 C#

> ID：11312033
> 
> 赞同：2
> 
> 时间：2012-07-03T13:30:38.450
> 
> 标签：c#, string, split, tokenize

我在我的网站上使用富文本编辑器，并且我使用标签来显示用户上次使用该框时输入的内容，但是当他提交代码时，它包含标签中的 html。当我提交表单时，它会写下以下内容......

```
<span id="bodyContent_header1"> <div style"float:right">The Text On The Page </div> </span> 
```

我需要`<span id="bodyContent_header1"> </span>` 从代码中删除并保留其余部分。任何人都可以帮忙吗？此外，代码可能包含其他跨度标签，因此每次只应删除此标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:37:34.993

鉴于此类字符串是单行，您可以使用正则表达式`^<span[^>]+>|</span>$`替换最外层的`<span>`标签，如下所示：

```
string strRegex = @"^<span[^>]+>|</span>$";
RegexOptions myRegexOptions = RegexOptions.Multiline | RegexOptions.Singleline;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"<span id=""bodyContent_header1""> <div style""float:right"">The Text On The Page </div> </span>\n";
string strReplace = @"";
return myRegex.Replace(strTargetString, strReplace); 
```

这适用于[RegexHero](http://regexhero.net/tester)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:36:20.400

此正则表达式从此标签中选择数据

```
(?<=<span id="bodyContent_header1">)(.+)(</span>) 
```

用一个正则表达式替换不可能解决此任务

# asp.net-mvc - .json 文件的 asp.net mvc 3 http 500 服务器错误

> ID：11312036
> 
> 赞同：0
> 
> 时间：2012-07-03T13:31:15.740
> 
> 标签：asp.net-mvc, json, asp.net-mvc-routing, getjson

我的网站根目录中有一个 .json 文件。文件的名称中有点（如果重要的话）并且位于像[http://mysite.com/animated.config.json这样的 url](http://mysite.com/animated.config.json)

当我对此文件执行 $.getJSON() 请求时，它会失败并出现 HTTP 500 错误（发生内部服务器错误）。

有没有办法（比如`routes.IgnoreRoute()`在 global.asax.cs 中）只是告诉 MVC 路由通过请求而不尝试路由它？我怀疑这就是问题所在，我希望能够告诉 MVC 只允许对 .json 文件的任何请求通过，而不必费心路由它们。我尝试使用与我的 favicon.ico 文件相同的语法，但它不起作用。

我试过了，但没有用：

```
routes.Ignore("{resource}.json/{*pathInfo}"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:49:23.903

您确定是 MVC 的路由问题，而不是 IIS 的 MIME 类型问题吗？默认情况下，IIS 只会提供某些 mime 类型，如果文件具有未知扩展名，它将不会提供。

# perl - Perl通过正则表达式获取文件

> ID：11312041
> 
> 赞同：2
> 
> 时间：2012-07-03T13:31:22.973
> 
> 标签：perl, file

在系统中的特定文件夹中有一个文件。我知道它的名字是一个数字，我在一个变量中有这个数字。

我不知道这个文件有什么扩展名。

我如何舀起这个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:43:07.930

```
(my $filename) = glob "$specific_folder_in_the_system/$that_number.*"; 
```

**编辑：**正如 Ikegami 在下面指出的，这对目录的特定路径名很敏感。如果该目录名称包含空格或其他特殊字符，它将失败。您可以通过将字符串的非通配符部分包含在嵌入式引号中来缓解这种情况：

```
(my $filename) = glob "'$specific_folder_in_the_system/$that_number.'*"; 
```

但这仍然会失败，*例如* `$specific_folder_in_the_system = "/Users/O'Neal, Patrick";`。

如果您不介意更改当前工作目录，您可以`chdir($specific_folder_in_the_system) or die`先使用 just `glob("$that_number.*")`，然后再使用，只要`$that_number`它确实是一个数字就应该是安全的。

您还可以使用`opendir`和的组合`grep`来代替`glob`：

```
opendir(my $dir, $specific_folder_in_the_system) or die;
(my $filename) = grep /^$that_number\./ readdir $dir; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:38:49.643

```
my ( $file ) = glob "$num.*" ; 
```

# jakarta-ee - WebSphere Application Server for Developers 和 WebSphere Base Edition 之间的功能区别是什么？

> ID：11312042
> 
> 赞同：1
> 
> 时间：2012-07-03T13:31:26.337
> 
> 标签：jakarta-ee, websphere

我已经从这里下载了 WebSphere Application Server for Developers：[http](http://www-01.ibm.com/software/webservers/appserv/developer/) ://www-01.ibm.com/software/webservers/appserv/developer/并将它安装在我的本地机器上。Dev Edition 和 Base 之间有什么不同（如果有的话）？如何判断我正在运行的实例使用的是“免费”版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T05:04:24.960

我知道这个问题已经 1 岁了，但这是答案，以防有人偶然发现这个页面（就像我一样）：据我所知，它们之间没有区别。

[从这里](http://www.ibm.com/developerworks/downloads/ws/wasdevelopers/faq-wasdevelopers.html)提取：

> 应用程序服务器是完全相同的应用程序服务器代码，它也与 WebSphere Application Server 产品中提供的应用程序服务器代码相同。免费选项提供的平台支持仅限于 Linux 和 Windows，并且定价产品中的附加软件不包含在免费下载版本中，尽管大多数附加软件是单独提供的收费。

# shell - Cron 不执行。脚本工作正常

> ID：11312043
> 
> 赞同：3
> 
> 时间：2012-07-03T13:31:29.327
> 
> 标签：shell, unix, cron

我有一个压缩日志文件的 crontab。

在`crontab -e`我有-我是**根**-：

```
5 3 * * 6 find /toMyLogs -name "access*" -a ! -name '*.bz2' -ctime +7 -exec bzip2 -zv {} \;
35 3 * * 6 find /toMyLogs -name "error*" -a ! -name '*.bz2' -ctime +7 -exec bzip2 -zv {} \; 
```

日志示例如下：

```
$ ls -la /toMyLogs
-rw-r--r--   1 root     root       33317 Jul  2 19:04 error_1.log.2012-07-02
-rw-r--r--   1 root     root       12928 Jul  3 08:55 error_2.log.2012-07-03 
```

如果我手动执行命令，这是：

```
find /toMyLogs -name "access*" -a ! -name '*.bz2' -ctime +7 -exec bzip2 -zv {} \; 
```

它有效，但在 cron 中不起作用。我用示例文件（不是日志）做了一些小测试，然后运行了 cron。**它奏效了**。所以，cron 确实在运行。

你有什么想法吗？权限还是时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:40:17.730

运行 cron 时，环境设置不同。cron 使用的 PATH 很可能找不到 bzip2 程序。

[crontab 不起作用的原因](https://askubuntu.com/questions/23009/reasons-why-crontab-does-not-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:36:17.157

我不知道问题的根源。但是不要将一些长命令转移到单独的脚本中，这可能会有所帮助。

**添加** 我有这样的问题`cron`- 原因是绝对路径和相对路径不匹配。但在这里你得到了绝对的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:38:52.863

您安排脚本每周运行一次，每周六（一周的第 6 天）在 3:05 和 3:35。

语法看起来不错。可能的问题是执行*bzip2*。确保您的 crontab PATH 包含程序的路径。

# javascript - 在javascript中序列化和反序列化数组

> ID：11312046
> 
> 赞同：30
> 
> 时间：2012-07-03T13:31:48.233
> 
> 标签：javascript, jquery, tag-it

我正在使用 jquery 的 tag-it 库来制作标记系统（有点像 stackoverflow 系统）。

用户键入他的标签后，库返回一个我想保存在 MySQL 数据库中的 javascript 数组。我没有在 javascript 中找到序列化和反序列化函数。

在编写我自己的函数之前，我想确保我没有在这里重新发明轮子。没有本地方法可以将数组保存到数据库然后再次使用它，这似乎很疯狂。

tl;dr => 如何将 javascript 数组保存在 MySQL 数据库中以便以后重用？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-03T13:34:08.017

您可以使用`JSON.stringify()`( [MDN docu](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify) ) 和`JSON.parse()`( [MDN docu](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse) ) 将 JavaScript 对象转换为字符串表示形式，以将其存储在数据库中。

```
var arr = [ 1, 2, 3 ];

var serializedArr = JSON.stringify( arr );
// "[1, 2, 3]"

var unpackArr = JSON.parse( serializedArr );
// identical array to arr 
```

如果您的后端是用 PHP 编写的，则有类似的方法可以处理 JSON 字符串：( `json_encode()`PHP [docu](http://php.net/manual/en/function.json-encode.php) ) 和`json_decode()`( [PHP docu](http://php.net/manual/en/function.json-decode.php) )。

大多数其他语言为 JSON 字符串提供了类似的功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T13:34:14.397

您可以使用`JavaScript Object Notation`( `JSON`) 格式。

`Javascript`支持这些方法：

*   [**JSON.stringify**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify) ->*将对象序列化为字符串*

*   [**JSON.parse**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse) ->*从字符串反序列化对象*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-03T13:34:02.783

只是[JSON](https://developer.mozilla.org/en/JSON) ing 怎么样？

```
var arr = [1,2,3];
var arrSerialized = JSON.stringify(arr);
...

var arrExtracted = JSON.parse(arrSerialized); 
```

顺便说一句，JSON 通常用于在其他一些语言中进行序列化，即使它们有自己的序列化函数。)

# jquery - 为 jQuery 自动完成调整 SQL

> ID：11312050
> 
> 赞同：0
> 
> 时间：2012-07-03T13:31:53.863
> 
> 标签：jquery, mysql, sql

我的页面上有一个 jQuery 自动完成小部件，它使用我的数据库中的客户端名称填充搜索栏。但是，它并没有像我预期的那样发挥作用。

这是我用来从数据库中获取名称的 SQL：

```
SELECT First, Last, Middle 
FROM Clients
WHERE First + ' ' + Last like ? 
```

然后我将搜索词绑定到参数。

我遇到的问题是填充搜索栏时得到的结果非常不理想。例如，如果我输入“Shirley”，我会看到像 Deborah Smith（假设）这样的名字。所以，我认为问题在于我的查询，但我真的不知道如何调整它以找到我想要的结果（在这种情况下，所有雪莉）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:12:26.157

你能试试这个吗？

```
SELECT First, Last, Middle 
FROM Clients
WHERE concat(First,' ',Last) like concat('%', ?, '%') 
```

最重要的区别是我在搜索词之前和之后传递 % 以启用在名字和姓氏中的任何位置搜索该词。此外，我正在使用 concat 将字符串组合在一起。

我在这里没有可以访问的 MySQL，我无法对其进行测试，但这应该可以。我同样将它用于自动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:25:27.970

一种可能性是，您正在为每个键入的字符向数据库发送请求，并且正在接收最终匹配的一个或一些字符的结果。

您可以添加调试代码，以便您可以判断哪个请求导致从数据库返回什么数据？

如果我正在调试它，我想回到我身边：

1.  请求参数'Shirley'
2.  SQL 查询，如果我根据数据以任何方式更改它（看起来不像你，是的，参数！）
3.  所有数据

然后我会更新我的代码，以便除了返回数据之外，我还会收到上述内容。然后，您可以手动点击您创建的自动完成 url/服务，并仔细检查您是否收到了您期望手动查询的数据。

如果这看起来不错，那么我会在我的页面上添加一个点来显示我调用了自动完成服务的次数，并在一个点上显示自动完成服务所说的我调用它的数据。

希望这有帮助，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:36:18.637

我注意到您正在阅读 `First, Last, Middle`，但 where 子句仅使用`First,Last`.

可能是显示的字符串派生自`Middle`where 子句基于`First,Last`值进行过滤的情况。

# c# - 列表的linqpad合并

> ID：11312055
> 
> 赞同：0
> 
> 时间：2012-07-03T13:32:22.613
> 
> 标签：c#, linq

我有以下查询

```
from c in Customers
where c.salary == "2000"
select new
    {
      c.Id,
      c.Name,
      c.Salary
    } 
```

输出是

身份证 姓名 工资

Id-9395 拉尔夫 2000
Id-14591 拉梅什
Id-7958 拉克什
Id-15784 拉姆

我希望它为所有 id 显示的所有薪水都是相同的。输出必须如下所示。

身份证 姓名 工资

Id-9395 拉尔夫 2000

Id-14591 拉梅什 2000

Id-7958 拉克什 2000

Id-15784 公羊 2000

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:47:57.150

看起来你有一个更深层次的问题，但你可以这样做：

```
from c in new Customers
let sal = "2000"
where c.Salary == sal
select new
{
     c.Id,
     c.Name,
     sal
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:21:59.053

试试这个，尽管它与您已经拥有的查询没有什么不同：

```
var customers = Customers.Select(x=> new {x.Id,x.Name,x.Salary}).
                  Where(x=>x.Salary == "2000"); 
```

当我运行上述内容时，我得到了你想要的结果。当我运行时，我也得到相同的结果：

```
var customers= from c in Customers
            where c.Salary == "2000"
            select new
                 {
                 c.Id,
                 c.Name,
                 c.Salary
                 }; 
```

# javascript - Visual Studio 的 Javascript 结构突出显示？

> ID：11312059
> 
> 赞同：2
> 
> 时间：2012-07-03T13:32:29.933
> 
> 标签：javascript, visual-studio-2010, formatting, visual-studio-extensions

我正在使用 Visual Studio 的“StructureAdornment”扩展，它创建了一条匹配条的线。它工作得很好，但它只适用于 C# 文件。我想知道是否有任何扩展对 javascript 文件执行相同的工作。

![在此处输入图像描述](../Images/2f7e78addb05657406e58cac57a92dda.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T06:16:48.303

[Visual Studio 缩进指南](http://indentguide.codeplex.com/releases/view/110312)

在 Visual Studio 2010 上亲自试用和测试

适用于 javascript、c#、vb、cshtml、vbhtml、文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:50:52.043

你可以试试这些扩展 JScript Editor Extensions。

[http://visualstudiogallery.msdn.microsoft.com/872d27ee-38c7-4a97-98dc-0d8a431cc2ed/](http://visualstudiogallery.msdn.microsoft.com/872d27ee-38c7-4a97-98dc-0d8a431cc2ed/)

您可以自定义快捷方式。

# python - 轨道：未经授权的连接

> ID：11312070
> 
> 赞同：1
> 
> 时间：2012-07-03T13:32:58.607
> 
> 标签：python, python-2.7, orbited

我在 Windows 上的 python 2.7 中有一个问题。我使用轨道将 websocket 代理到处理请求的服务器。我收到此错误![错误](../Images/6db9aadfaf5112ad9b17e88927427f1d.png)
这是我的配置文件：

```
[global]
reactor=select
# reactor=kqueue
# reactor=epoll
proxy.enabled=1
session.ping_interval = 40
session.ping_timeout = 30
# once the sockets are open, orbited will drop its privileges to this user.
user=Administrator

[listen]
http://:8001
# uncomment to enable SSL on port 8043 using given .key and .crt files
#https://:8043
#
#[ssl]
#key=orbited.key
#crt=orbited.crt
#chain=orbited.chain

[static]

[access]
localhost:8000 -> localhost:3500
* -> localhost:3500

# new logging configuration using the python stdlib logging.fileConfig
[loggers]
keys = root,orbited,orbited_TCPConnectionResource

[handlers]
keys = console,errors,connections

[formatters]
keys = generic

[logger_root]
level = NOTSET
handlers = console

[logger_orbited]
level = WARN
handlers = errors
qualname = orbited

[logger_orbited_TCPConnectionResource]
level = DEBUG
handlers = connections
qualname = orbited.cometsession.TCPConnectionResource

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = INFO
formatter = generic

[handler_errors]
class = FileHandler
args = ('error.log', 'w')
level = WARN
formatter = generic

[handler_connections]
class = FileHandler
level = DEBUG
formatter = generic
args = ('connections.log', 'w')

[formatter_generic]
format = %(asctime)s,%(msecs)03d %(levelname)-5.5s [%(name)s] %(message)s 
```

我该如何解决该错误？

# csv - AppleScript：分隔符不起作用，并且制表符分隔的 URL

> ID：11312079
> 
> 赞同：0
> 
> 时间：2012-07-03T13:33:17.390
> 
> 标签：csv, applescript, html-parsing, delimiter

我正在尝试获取今日报纸的金融时报 URL 列表。我通过从 FT.com 获取源代码，然后使用分隔符解析 html 源代码来完成此操作，现在我尝试将每个 url 保存为逗号分隔值文件（.txt 扩展名）。

我已经能够解析html源代码。但我的问题在于将网址保存为 csv 文件（或网址列表，以段落分隔）。

*这是我的小程序：*

```
on run

set query_url to "http://www.ft.com/uk-edition"
set query_url_source to do shell script "/usr/bin/curl " & quoted form of query_url

set p to query_url_source
set ex to extractBetweenLong(p, "><a href=\"/cms/s", ".html")

return ex

end run

--delimiters subroutine:

to extractBetweenLong(SearchText, startText, endText)
set tid to AppleScript's text item delimiters -- save them for later.
set AppleScript's text item delimiters to startText -- find the first one.
set liste to text items of SearchText
set AppleScript's text item delimiters to endText -- find the end one.
set extracts to {}
repeat with subText in liste
    if subText contains endText then
        copy text item 1 of subText to end of extracts
    end if
end repeat
set AppleScript's text item delimiters to tid -- back to original values.
return extracts
end extractBetweenLong 
```

我的输出如下：

{"^!DOCTYPE html ... subs5", "/0/0130d092-c473-11e1-9c1e-00144feabdc0", "/0/cb8a70a0-c469-11e1-a98c-00144feabdc0", ..., "/0/ 02eaa328-c468-11e1-9c1e-00144feabdc0",}

*   我的第一个问题是为什么第一个字符串 (^!DOCTYPE html...) 存在？我的定界符子例程一定有问题，因为我的第一个“startText”定界符不应包含“DOCTYPE ... subs5”（subs5 HTML 选项卡以 .html 结尾），因此这可能表明我的子例程星号

*   第二如何将每个 URL 保存为列表，用逗号或换行符分隔？我首先想在每个 URL 之前加上字符串：“www.ft.com/cms/s”，但我相信我自己可以弄清楚。

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:40:13.867

AppleScript 的文本项分隔符定义了在将字符串分解为文本项列表时使用的子字符串，以及在将文本项列表重新组合回字符串时使用的子字符串。

1.  文本项分隔符仅定义字符串在哪里被分解，而不是保留或丢弃哪些部分。在您的脚本中，您可以使用以下内容丢弃提取处理程序中的第一个文本项：

    **将列表设置为 SearchText 的其余文本项**

2.  获取文本项会生成一个字符串*列表*（文本项）。

3.  就像您使用文本项分隔符将字符串分开一样，您可以在将各个部分重新组合在一起时使用它们，例如在将列表强制回文本之前将文本项分隔符设置为逗号或换行符。“www.ft.com/cms/s”部分也可以放在那里，虽然（如上面的#1），您还需要在第一项之前添加它，例如：

```
set tempTID to AppleScript's text item delimiters
set AppleScript's text item delimiters to ("," & return & "www.ft.com/cms/s")
set ex to ex as text
set AppleScript's text item delimiters to tempTID
return "www.ft.com/cms/s" & ex 
```

# installation - 为特定用户卸载 -Wix 3.5

> ID：11312085
> 
> 赞同：1
> 
> 时间：2012-07-03T13:33:26.953
> 
> 标签：installation, wix, windows-installer, wix3.5

你好，

我有一个为每台机器安装的安装程序，但是如果我想为特定用户卸载它是可能的，因为现在我看到的是，如果我以标准用户身份登录并卸载 msi，它会询问我输入管理员密码并单击“继续”后，将为所有用户卸载安装程序。

谢谢。

艾玛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:21:22.360

由于 UAC 的出现，这是从 Vista 开始提供的标准行为。用户帐户控制支持允许任何标准用户提升到管理员帐户并执行此类操作，例如卸载每台机器安装的应用程序。 [http://en.wikipedia.org/wiki/User_Account_Control](http://en.wikipedia.org/wiki/User_Account_Control)

**编辑**：如果您希望每个用户只能为自己卸载应用程序，而不是您需要让安装程序为每个用户单独安装它，即您不能拥有每台机器注册应用程序的安装程序，而不是让用户卸载它分开。此外，如果您为每个用户安装应用程序，请确保您使用正确的资源位置，例如 AppData 而不是 ProgramFiles 或 HKCU 而不是 HKLM。

以下是更多详细信息：http: [//msdn.microsoft.com/en-us/library/445kc47k.aspx](http://msdn.microsoft.com/en-us/library/445kc47k.aspx)

# android - 以编程方式在 android 中定位 EditText 组件？

> ID：11312087
> 
> 赞同：2
> 
> 时间：2012-07-03T13:33:30.333
> 
> 标签：android

如何在运行时在android中动态定位编辑文本？

以下是我的代码：

```
public class ABCActivity extends Activity   {
  EditText ed;

  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ed = new EditText(ABCActivity.this);
    ed.setEnabled(false);    
    layout =new LinearLayout(this);  
    LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT, 1.0f);            
    layout.setLayoutParams(params);
    btn = new Button(this); 
    btn.setLayoutParams(params);
    btn.setText("Change");

    RelativeLayout.LayoutParams params2 = (RelativeLayout.LayoutParams) ed.getLayoutParams();
    params2.leftMargin = 10;
    params2.topMargin = 10;
    ed.setLayoutParams(params2);

    layout.addView(btn);   
    layout.addView(ed);

   }    
} 
```

给力关闭：

```
RelativeLayout.LayoutParams params2 = (RelativeLayout.LayoutParams) ed.getLayoutParams(); 
```

错误：空指针异常我尝试使用相对布局.....但不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:36:22.147

[Lars Vogel在这里](http://www.vogella.com/blog/2011/03/14/android-hacking-layouts/)有一个很棒的教程。基本上，您必须使用特定于您的布局的 LayoutParams 来通过 Java 定位视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:47:15.433

你可以`EditText`这样设置你的位置，我给它10、10的虚拟值。

```
 RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) ed.getLayoutParams();
         params.leftMargin = 10;
         params.topMargin = 10;
         ed.setLayoutParams(params); 
```

# c# - C# 从另一个表单错误打开表单

> ID：11312088
> 
> 赞同：0
> 
> 时间：2012-07-03T13:33:33.517
> 
> 标签：c#, visual-studio-2010

在**Form1.cs**我有

```
public const int n = 30;
public TabPage[] tp = new TabPage[n];

private void toolStripSeparator1_Click(object sender, EventArgs e)
{
    RenameFunc rf = new RenameFunc();
    rf.ShowDialog();
} 
```

在**RenameFunc.cs**我有

```
private void button1_Click_1(object sender, EventArgs e)
{
    Form1 frm1 = new Form1();

    if (textBox1.Text != null)
    /*Line 24 */    frm1.tp[Array.IndexOf(frm1.tp, frm1.tabControl1.SelectedTab)].Text = textBox1.Text;
    Application.Exit(); 
```

}

tabControl1 也设置为公共

在第 24 行我得到错误

System.NullReferenceException：对象引用未设置为对象的实例。在 System.Windows.Forms.TabControl.get_SelectedTabInternal() 在 System.Windows.Forms.TabControl.get_SelectedTab() 在 Notepad1._0.RenameFunc.button1_Click_1(Object sender, EventArgs e) 在 D:\C#\Notepad1.0\Notepad1 .0\RenameFunc.cs：第 24 行

如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:37:29.867

我不知道是什么`tp`，但是，我确定它没有初始化，这给出了异常。
原因在上一行很容易找到

```
Form1 frm1 = new Form1(); 
```

在这里，您创建 Form1 的一个新实例。您没有引用从中调用 RenameFunc 的第一个 Form1。

例如，当您调用 RenameFunc 时，也许您可​​以传递对正确 Form1 的引用

```
RenameFunc rf = new RenameFunc(this); 
```

并将该引用保存在您的 RenameFunc 内部变量中

```
public partial class RenameFunc : Form
{
    private Form1 _caller = null;
    public RenameFunc(Form1 f)
    {
         InitializeComponent();
         _caller = f;       
    } 
```

}

并在 button1_Click_1 中使用该引用而不是 new Form1

```
 if (textBox1.Text != null)           
        _caller.tp[Array.IndexOf(_caller.tp, _caller.tabControl1.SelectedTab)].Text =
                   textBox1.Text;           
   Application.Exit(); 
```

然而，关于 tp 的一点解释将是有益的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:42:05.500

您可以执行以下操作，

```
 Form1 frm = (Form1)this.Parent; 
```

您可以使用它来访问控件`frm.Controls`并按照您的喜好进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:48:52.157

它返回错误，告诉您在 `frm1.tabControl1.SelectedTab`中找不到`frm1.tp`，您的代码都没有将 30 个标签页`tp`与您显示的标签页相关联，因此，通过制作as`tabControl1`的新副本，然后要求将标签页的名称放在文本框在寻找选中时，答案是，这些新页面都没有被选中。`form1``frm1`

# visual-c++ - 发生虚拟继承时的C ++对象内存布局？

> ID：11312090
> 
> 赞同：2
> 
> 时间：2012-07-03T13:33:39.100
> 
> 标签：visual-c++

## VC6编译

```
class A 
{ 
    public: 
        int x; 
    public: 
        virtual void funA() { } 
}; 

class B : virtual public A 
{ 
    public: 
        int y; 
    public: 
        virtual void funA() { } 
        virtual void funB() { } 
}; 
sizeof(B)=20 // because of B::vptr+vbptr+B::y+A::vptr+A::x = 5*4 
```

* * *

```
class A 
{ 
    public: 
        int x; 
    public: 
        virtual void funA() { } 
}; 

class B : virtual public A 
{ 
    public: 
        int y; 
    public: 
        B() {} 
        virtual void funB() { } 
}; 
sizeof(B)=20 // because of B::vptr+vbptr+B::y+A::vptr+A::x = 5*4 
```

* * *

```
class A 
{ 
    public: 
        int x; 
    public: 
        virtual void funA() { } 
}; 

class B : virtual public A 
{ 
    public: 
        int y; 
    public: 
        B() {} 
        virtual void funA() { } 
        virtual void funB() { } 
}; 
sizeof(B)=24 
```

我不明白，为什么会是 24 岁？？？我认为他们是一样的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:16:34.917

基于编译后对内存的快速检查，只有当 B 具有构造函数时，才会在 B 和 A 的布局之间添加一个 4 字节块/焊盘。我不确定其中的原因，但是如果您打算复制内存，我建议您不要这样做。

no B::B() //**类版本 2**
const B::'vftable'{for 'B'}
const B::'vbtable'
y
const B::'vftable'{for 'A'}
x
size = 20

包括 B::B() //**类版本 3**
const B::'vftable'{for 'B'}
const B::'vbtable'
y
*0x00000000 // 4 个字节*
const B::'vftable'{for 'A' }
x
大小 = 24

# android - android-library .classfiles 在哪里？

> ID：11312102
> 
> 赞同：1
> 
> 时间：2012-07-03T13:34:10.663
> 
> 标签：android

我正在使用 eclipse，并且试图弄清楚 android 库项目是如何工作的。我正在使用 actionbarsherlock 作为 android 库示例。

在我的主项目的 /bin 文件夹中，我看到以下内容：

```
/bin
  |- com
      |- actionbarsherlock
      |    |- R.class
      |    |- R$array.class
      |- me
          |- myproject
               |- ActivityMain.class
               |- App.class
               |- R.class
               |- R$array.class
               ... 
```

所以令人困惑的是 /actionbarsherlock 文件夹中有一些 R.class 文件（在我的主项目的 /bin 文件夹中，如上所述）。但是其余的 actionbarsherlock .class 文件并不存在（尽管它们确实存在于 actionbarsherlock 项目的 /bin 文件夹中，例如 ActionBarSherlock.class 之类的东西）。

为什么只有这几个 .class 文件被拉到我的项目的 /bin 文件夹中，而不是其他的？eclipse 是否在导出时导入它们以将它们粘贴到 apk 中？

谢谢

# java - Slick无法加载图像？

> ID：11312105
> 
> 赞同：0
> 
> 时间：2012-07-03T13:34:19.047
> 
> 标签：java, image, embedded-resource, slick2d

所以我正在关注[新波士顿](http://youtube.com/thenewboston)关于 Slick 2D 的教程。我正在完全按照他所说的那样加载图像：

```
private org.newdawn.slick.Image playNow;
...
public void init(GameContainer gc, StateBasedGame sbg) throws SlickException {
...
playNow = new org.newdawn.slick.Image("res/playNow.png"); 
```

这是我的 Eclipse 项目树：

![树](../Images/6852be67e4281c3a22ec474be2f39917.png)

这是它给我的输出：

```
Tue Jul 03 09:31:53 PDT 2012 INFO:Slick Build #274
Tue Jul 03 09:31:53 PDT 2012 INFO:LWJGL Version: 2.8.5
Tue Jul 03 09:31:53 PDT 2012 INFO:OriginalDisplayMode: 1366 x 768 x 32 @60Hz
Tue Jul 03 09:31:53 PDT 2012 INFO:TargetDisplayMode: 640 x 360 x 0 @0Hz
Tue Jul 03 09:31:53 PDT 2012 INFO:Starting display 640x360
Tue Jul 03 09:31:53 PDT 2012 INFO:Use Java PNG Loader = true
Tue Jul 03 09:31:53 PDT 2012 INFO:Controllers not available
Exception in thread "main" java.lang.RuntimeException: Resource not found: res/playNow.png
at org.newdawn.slick.util.ResourceLoader.getResourceAsStream(ResourceLoader.java:69)
at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:169)
at org.newdawn.slick.Image.<init>(Image.java:196)
at org.newdawn.slick.Image.<init>(Image.java:170)
at org.newdawn.slick.Image.<init>(Image.java:158)
at org.newdawn.slick.Image.<init>(Image.java:136)
at net.sourceforge.whowantsakookie.hamblaster.Menu.init(Menu.java:21)
at net.sourceforge.whowantsakookie.hamblaster.Game.initStatesList(Game.java:20)
at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)
at org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:390)
at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:314)
at net.sourceforge.whowantsakookie.hamblaster.Game.main(Game.java:31) 
```

教程位于[此处](http://www.youtube.com/watch?v=oqKwYtk29QM)

我完全按照教程所说的那样做，并且在视频中对他有用。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:15:10.983

没问题，“res”文件夹与“src”文件在同一个文件夹中！

将包含所有图片的“res”文件夹移动到程序中的“src/net.sourceforge.whowant/”文件夹/包中。

在您的程序中，您将使用

```
playNow = new org.newdawn.slick.Image("res/playNow.png"); 
```

希望这可以帮助！:)

# actionscript-3 - Mockolate - 在具有相同参数的模拟上调用相同的方法，但返回不同的结果

> ID：11312108
> 
> 赞同：1
> 
> 时间：2012-07-03T13:34:23.677
> 
> 标签：actionscript-3, mocking, tdd, flexunit4, mockolate

我正在使用 Mockolate 和 flex unit 4 为我在 AS3 中的测试编写模拟。我想在具有相同参数的模拟上多次调用相同的方法，并且每次都返回不同的结果。一个基本的例子是：

```
 [Rule] 
            public var mocks:MockolateRule = new MockolateRule(); 

            [Mock(type="strict")] 
            public var list:IList; 

            [Test] 
            public function test():void{ 

                    var seq:Sequence = sequence(); 
                    expecting(function ():void { 
                            expect(list.getItemAt(0)).returns("Item1").thrice().inSequence(seq); 
                            expect(list.getItemAt(0)).returns("Item2").inSequence(seq); 
                            expect(list.getItemAt(0)).returns("Item3").inSequence(seq); 
                    }); 

                    trace(list.getItemAt(0)); 
                    trace(list.getItemAt(0)); 
                    trace(list.getItemAt(0)); 

                    verify(list); 
            } 
```

这导致：

```
Item1 
Item2 
Item2 
```

和错误：

```
1 unmet Exception 
```

我想要的是

```
Item1 
Item2 
Item2 
```

并且没有例外，即测试通过。

我尝试了一些替代方案，例如：

```
 expecting(function ():void { 
                            expect(list.getItemAt(0)).returns("Item1").inSequence(seq); 
                            expect(list.getItemAt(0)).returns("Item2").inSequence(seq); 
                            expect(list.getItemAt(0)).returns("Item3").inSequence(seq); 
                    }); 
```

和其他无济于事。当然，我在这里遗漏了一些简单的东西。这看起来应该很容易。

多谢你们，

西奥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:31:35.280

这让我大吃一惊，直到我发现它真的很简单：只需使用所有预期的返回值作为第一条`returns()`语句的参数。

```
 expect(list.getItemAt(0)).returns("Item1", "Item2", "Item3", "Item4").inSequence(seq); 
```

模拟将为每个后续调用返回这些参数中的最后一个。

# objective-c - iOS 5 自定义注释未显示其标题

> ID：11312110
> 
> 赞同：1
> 
> 时间：2012-07-03T13:34:29.653
> 
> 标签：objective-c, ios, annotations

我编写了这段代码来创建自定义注释图像

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    static NSString *google = @"googlePin";
    if ([annotation isKindOfClass:[myClass class]])
    {
        MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:google];
        if (!annotationView)
        {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:google];
            annotationView.image = [UIImage imageNamed:@"pin.png"];
        }
        return annotationView;
    }
    return nil;

} 
```

图像出现在地图上；但是，当我单击它时，什么也没有发生，没有标题也没有副标题。

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T14:28:55.863

当您覆盖时`viewForAnnotation`，您必须设置`canShowCallout`为`YES`（您分配/初始化的新视图上的默认设置是`NO`）。

如果您不覆盖该委托方法，则地图视图会创建一个`canShowCallout`已设置为的默认红色图钉`YES`。

**但是，即使`canShowCallout`设置为，如果注释的is或 blank (empty string) `YES`，标注仍然不会出现`title``nil`**。

（但同样，如果`title`is 不是`nil`并且不是空白，则标注不会显示，除非`canShowCallout`is `YES`。）

```
MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:google];
if (!annotationView)
{
    annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:google];
    annotationView.image = [UIImage imageNamed:@"pin.png"];
    annotationView.canShowCallout = YES;  // <-- add this
}
else
{
    // unrelated but should handle view re-use...
    annotationView.annotation = annotation; 
}

return annotationView; 
```

# c# - 何时何地使用 GetType() 或 typeof()？

> ID：11312111
> 
> 赞同：86
> 
> 时间：2012-07-03T13:34:30.357
> 
> 标签：c#, .net, types, typeof, gettype

为什么这有效

```
if (mycontrol.GetType() == typeof(TextBox))
{} 
```

这不？

```
Type tp = typeof(mycontrol); 
```

但这有效

```
Type tp = mycontrol.GetType(); 
```

我自己使用`is`运算符来检查类型，但是当我使用`typeof()`和时我的理解失败了`GetType()`

何时何地使用`GetType()`or `typeof()`？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-03T13:36:38.660

[`typeof`](http://msdn.microsoft.com/en-us/library/58918ffs.aspx)是一个运算符，用于获取*编译时*已知的类型（或至少是泛型类型参数）。的操作数`typeof`始终是类型或类型参数的名称——*绝不*是带值的表达式（例如变量）。有关详细信息，请参阅[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)。

[`GetType()`](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)是您在单个对象上调用的方法，用于获取对象的*执行时间*类型。

请注意，除非您*只*想要确切的实例`TextBox`（而不是子类的实例），否则您通常会使用：

```
if (myControl is TextBox)
{
    // Whatever
} 
```

或者

```
TextBox tb = myControl as TextBox;
if (tb != null)
{
    // Use tb
} 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-07-03T13:42:48.257

`typeof`应用于编译时已知的类型或泛型类型参数的名称（作为标识符给出，而不是字符串）。`GetType`在运行时在对象上调用。在这两种情况下，结果都是`System.Type`包含类型元信息的类型的对象。

编译时和运行时类型相等的示例

```
string s = "hello";

Type t1 = typeof(string);
Type t2 = s.GetType(); 
```

> `t1 == t2 ==> true`

编译时和运行时类型**不同的示例**

```
object obj = "hello";

Type t1 = typeof(object); // ==> object
Type t2 = obj.GetType();  // ==> string! 
```

> `t1 == t2 ==> false`

即变量的编译时类型（静态类型）与.`obj`引用的对象的运行时类型不同`obj`。

* * *

**测试类型**

但是，如果您只想知道是否`mycontrol`是 a`TextBox`那么您可以简单地测试

```
if (mycontrol is TextBox) 
```

请注意，这并不完全等同于

```
if (mycontrol.GetType() == typeof(TextBox)) 
```

因为`mycontrol`可能有一个派生自`TextBox`. 在这种情况下，第一个比较产生`true`和第二个`false`！在大多数情况下，第一个也是更简单的变体是可以的，因为从 派生的控件`TextBox`继承了所有`TextBox`具有的内容，可能会添加更多内容，因此与`TextBox`.

```
public class MySpecializedTextBox : TextBox
{
}

MySpecializedTextBox specialized = new MySpecializedTextBox();
if (specialized is TextBox)       ==> true

if (specialized.GetType() == typeof(TextBox))        ==> false 
```

* * *

**铸件**

如果您有以下测试，然后进行强制转换并且 T 可以为空......

```
if (obj is T) {
    T x = (T)obj; // The casting tests, whether obj is T again!
    ...
} 
```

...您可以将其更改为...

```
T x = obj as T;
if (x != null) {
    ...
} 
```

测试一个值是否属于给定类型和强制转换（再次涉及相同的测试）对于长继承链都可能很耗时。使用`as`运算符然后进行测试的`null`性能更高。

从 C# 7.0 开始，您可以使用模式匹配来简化代码：

```
if (obj is T t) {
    // t is a variable of type T having a non-null value.
    ...
} 
```

顺便说一句：这也适用于值类型。对于测试和拆箱非常方便。请注意，您不能测试可空值类型：

```
if (o is int? ni) ===> does NOT compile! 
```

这是因为值要么是，要么`null`是`int`. 这适用于`int? o`以及`object o = new Nullable<int>(x);`：

```
if (o is int i) ===> OK! 
```

我喜欢它，因为它消除了访问该`Nullable<T>.Value`属性的需要。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T13:38:33.740

[typeOf](http://msdn.microsoft.com/en-us/library/58918ffs.aspx)是一个 C# 关键字，当您拥有类的名称时会使用该关键字。它是在编译时计算的，因此不能在运行时创建的实例上使用。[GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)是可以在实例上使用的对象类的方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-03T13:38:22.170

[`is`您可能会发现使用关键字](http://msdn.microsoft.com/en-us/library/scekt9xw.aspx)更容易：

```
if (mycontrol is TextBox) 
```

# sum - Report Builder 3.0 - 如何求和表达式的输出

> ID：11312112
> 
> 赞同：1
> 
> 时间：2012-07-03T13:34:42.023
> 
> 标签：sum, ssrs-tablix, reportbuilder3.0

我们正在寻找对表达式的输出求和，这意味着它不作为字段存在。有没有一种方法可以汇总一系列 tablix 单元格的内容？

![我们希望显示 <<Expr>> 的输出总和](../Images/e19a23166a76acaad9a11b7f9045f8b1.png)

在上面的屏幕截图中，我希望在 Total 列中显示 <<"Expr">> 的总数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:37:13.227

不可以。您需要提供一个直接计算总数的表达式。您只能引用范围“高于”当前范围的单元格内容（使用 ReportItems 集合）。换言之，您可以在非总计 Tablix 单元格中引用总计文本框，但不能在总计文本框中引用非总计 Tablix 单元格。

# c++ - 为什么这个循环不起作用？

> ID：11312113
> 
> 赞同：1
> 
> 时间：2012-07-03T13:34:43.927
> 
> 标签：c++, for-loop

这是一个非常简单的程序。我在顶部定义了一个函数，在循环中我正在调用该函数`print`。

但我收到以下错误：

```
prog.cpp:5: error: variable or field ‘print’ declared void
prog.cpp:5: error: ‘a’ was not declared in this scope
prog.cpp: In function ‘int main()’:
prog.cpp:11: error: ‘print’ was not declared in this scope 
```

这里是：

```
#include <iostream>    
using namespace std;

void print( a ) {
    cout << a << endl;
}

int main() {
    for ( int i = 1; i <= 50; i++) {
        if ( i % 2 == 0 ) print( i );
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T13:35:55.393

`a`您在定义时忘记声明的类型`print`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T13:36:06.033

尝试这个：

```
void print( int a ) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:37:20.433

C++ 没有动态类型。因此，您需要手动指定“a”变量的类型或使用函数模板。

```
void print( int a ) {
    cout << a << endl;
}

template <typename T>
void print( T a ) {
    cout << a << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:36:12.757

改成：

```
void print( int a ) { // notice the int
    cout << a << endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T13:56:40.243

```
#include <iostream>

using namespace std;

void print( int a ) {
    cout << a << endl;
}

int main() {
    for ( int i = 1; i <= 50; i++) {
        if ( i % 2 == 0 ) print( i );
    }

    return 0;
} 
```

# php - 如何在 php 中使用 gd 创建的 png 图像上赋予白色背景

> ID：11312114
> 
> 赞同：0
> 
> 时间：2012-07-03T13:34:52.087
> 
> 标签：php, png, gd

```
$tileImg = imagecreatefrompng($srcImagePath);
imagealphablending($tileImg,true);
imagecolortransparent($tileImg, imagecolorallocatealpha($tileImg, 255, 255, 255, 0));
imagecopymerge($mapImage, $tileImg, $x, $y,0, 0, $tileWidth, $tileHeight,100);
imagedestroy($tileImg);
$bgColor = imagecolorallocate($mapImage, 255, 255, 255);
imagefill($mapImage, 0, 0, $bgColor); 
```

我正在尝试获得透明图像，但不知何故背景以黑色出现......

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:51:35.337

有点时间我不玩GD了，但是如果你说透明是白色的#FFFFFF你就不能使用正常（背景）颜色。

添加

快速解决方案可以将透明设置为 FFFFFE 或 FEFFFF 或 FFFEFF，避免“使用”白色作为透明

# objective-c - 在 OS X 上使用 AVFoundation AVPlayer 显示字幕

> ID：11312118
> 
> 赞同：16
> 
> 时间：2012-07-03T13:35:15.637
> 
> 标签：objective-c, macos, cocoa, avfoundation

我正在尝试在 OS X 上使用 AVFoundation 播放视频时显示字幕。

我查看了文档，但找不到启用字幕轨道的方法。API 包含对字幕轨道的多个引用，这让我相信它是受支持的。

在 iOS 上，该方法`-[AVPlayerItem selectMediaOption:inMediaSelectionGroup:]`用于启用字幕轨道。此方法在 10.7 SDK 中不可用。还有其他显示字幕的方法吗？

编辑：Quicktime Player X 支持字幕，例如在打开[这部电影](http://content.bitsontherun.com/videos/aytCR4cx-393434.mp4)时，字幕子菜单似乎提供了一种语言选择，并在选择英语时显示它们。这让我相信它们包含在 API 中......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T20:51:50.050

我自己也遇到了同样的问题。我发现不幸的是，除了切换到 QTKit 之外，唯一的方法是制作一个单独的字幕层（CATextLayer）并将其适当地定位为播放器层的子层。这个想法是您设置一个周期性时间观察器以每秒左右触发并更新字幕，以及（这是可选的）您可能拥有的一些 UI 元素，用于显示视频中经过的时间。

我创建了一个基本的 SubRip (.srt) 文件解析器类；你可以在这里找到它：[https](https://github.com/sstigler/SubRip-for-Mac) ://github.com/sstigler/SubRip-for-Mac 。请务必查看 wiki 以获取文档。该类在 BSD 许可条款下可用。

您可能遇到的另一个挑战是如何动态调整 CATextLayer 的高度以适应不同长度的字幕和不同宽度的包含视图（如果您选择使其可调整大小）。我找到了一个很棒的 CALayoutManager 子类来执行此操作，并对其进行了一些修改以使其适用于我想要做的事情：[https](https://github.com/sstigler/height-for-width) ://github.com/sstigler/height-for-width 。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-14T07:10:59.670

添加字幕文件的方法是使用 AVMutableCompositionTrack 将 scc 字幕作为 AVMediaTypeClosedCaption 轨道添加到 AVPlayer，播放器将控制它播放器会显示字幕我不知道为什么这个 AVMediaTypeSubtitle 跟踪它支持什么字幕文件

# ios - 如何将继承 UIImageView 的 .xib 文件 cuctom 类

> ID：11312122
> 
> 赞同：0
> 
> 时间：2012-07-03T13:35:23.770
> 
> 标签：ios, ios5, xcode4.2

我已经从继承 UIImageView 的网络复制了类。如何将该类放在 .xib 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:41:54.717

转到项目导航器编辑-> 导航器-> 显示项目导航器或（cmd+1）选择文件所有者![如此处所示](../Images/fbfa88be2817bb26e8279e267988ed01.png)。

在导航编辑器的第三个选项卡中，您可以找到自定义类在此处键入您的类名，您的类将与此 xib 文件链接。如图做

![如图做](../Images/71cf3be7d8f431b42899788a7d275dc7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:42:01.717

将 UIImageView 添加到您的 .xib 中，然后选择它，单击身份检查器，然后将类从 UIImageView 更改为您的新类。

因此，当您第一次选择图像视图时，您将看到：

![UIImageView 身份检查器](../Images/656aec24a413bbd787f98021cbbaf609.png)

将其更改为您拥有的任何子类，例如在我的示例中，UIImageViewSubclass：

![在此处输入图像描述](../Images/43ac7dec7a98d3ac0789b8509f574a55.png)

# android - 获取android中imageview内的触摸位置

> ID：11312128
> 
> 赞同：5
> 
> 时间：2012-07-03T13:35:46.830
> 
> 标签：android, touch, imageview

我的活动中有一个 imageview，我可以通过 onTouchListener 获得用户触摸 imageview 的位置。我在用户触摸该图像的位置放置了另一个图像。我需要存储触摸位置（x，y），并在另一个活动中使用它来显示标签。我将触摸位置存储在第一个活动中。在第一个活动中，我的图像视图位于屏幕顶部。在第二个活动中，它位于屏幕底部。如果我使用从第一个活动存储的位置，它将标签图像放在顶部，而不是在我之前在第一个活动中单击的图像视图上。无论如何要在imageview中获得位置。

第一活动：

```
cp.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            x = (int) event.getX();
            y = (int) event.getY();

            Log.v("touched x val of cap img >>", x + "");
            Log.v("touched y val of cap img >>", y + "");

            tag.setVisibility(View.VISIBLE);

            int[] viewCoords = new int[2];
            cp.getLocationOnScreen(viewCoords);

            int imageX = x - viewCoords[0]; // viewCoods[0] is the X coordinate
            int imageY = y - viewCoords[1]; // viewCoods[1] is the y coordinate
            Log.v("Real x >>>",imageX+"");
            Log.v("Real y >>>",imageY+"");

            RelativeLayout rl = (RelativeLayout) findViewById(R.id.lay_lin);
            ImageView iv = new ImageView(Capture_Image.this);
            Bitmap bm = BitmapFactory.decodeResource(getResources(),
                    R.drawable.tag_icon_32);
            iv.setImageBitmap(bm);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            params.leftMargin = x;
            params.topMargin = y;
            rl.addView(iv, params);

            Intent intent= new Intent(Capture_Image.this,Tag_Image.class);
            Bundle b=new Bundle();
            b.putInt("xval", imageX);
            b.putInt("yval", imageY);
            intent.putExtras(b);
            startActivity(intent);

            return false;
    }
}); 
```

在 TagImage.java 我使用了以下内容：

```
im = (ImageView) findViewById(R.id.img_cam22);
b=getIntent().getExtras();
xx=b.getInt("xval");
yy=b.getInt("yval");

im.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
         int[] viewCoords = new int[2];
            im.getLocationOnScreen(viewCoords);

            int imageX = xx + viewCoords[0]; // viewCoods[0] is the X coordinate
            int imageY = yy+ viewCoords[1]; // viewCoods[1] is the y coordinate
            Log.v("Real x >>>",imageX+"");
            Log.v("Real y >>>",imageY+"");
        RelativeLayout rl = (RelativeLayout) findViewById(R.id.lay_lin);
        ImageView iv = new ImageView(Tag_Image.this);
        Bitmap bm = BitmapFactory.decodeResource(getResources(),
                R.drawable.tag_icon_32);
        iv.setImageBitmap(bm);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                30, 40);
        params.leftMargin =imageX ;
        params.topMargin = imageY;
        rl.addView(iv, params);
        return true;

    }
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T13:51:13.287

您可以获得视图的左上角，如下所示：

```
int[] viewCoords = new int[2];
imageView.getLocationOnScreen(viewCoords); 
```

根据这个和触摸坐标，您可以计算 ImageView 内的点：

```
int touchX = (int) event.getX();
int touchY = (int) event.getY();

int imageX = touchX - viewCoords[0]; // viewCoords[0] is the X coordinate
int imageY = touchY - viewCoords[1]; // viewCoords[1] is the y coordinate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T07:13:31.490

将这些行添加到 ImageView

```
android:scaleType="fitXY" 
```

和

```
android:adjustViewBounds="true" 
```

到您的图像视图，这是因为图像在 IV 中没有原始尺寸

# java - 获取“ShortenedMonth/dd”格式的日期

> ID：11312129
> 
> 赞同：4
> 
> 时间：2012-07-03T13:35:50.043
> 
> 标签：java, date, date-format

有没有办法我可以通过“MM/dd”格式获取日期，但月份不是一个，而是像“Jan 30”这样`int`的缩写？`string`

目前我通过一个简单的 Java 做到了这一点`Switch Case`，但我想知道这是否已经包含在 a`DateFormat`或类似的东西中。

无论如何，我在这里留下我当前的代码。我使用`R.string`是因为我的应用程序具有多语言支持。

```
public void setShortMonth(){
   final Calendar calendar = Calendar.getInstance();
   int Month = calendar.get(Calendar.MONTH);
   String ShortMonth = " ";
   switch (Month){
        case 0: 
            ShortMonth = getString(R.string.Jan);
            break;
        case 1: 
            ShortMonth = getString(R.string.Fev);
            break;
        case 2: 
            ShortMonth = getString(R.string.Mar);
            break;
        case 3: 
            ShortMonth = getString(R.string.Apr);
            break;
        case 4: 
            ShortMonth = getString(R.string.May);
            break;
        case 5: 
            ShortMonth = getString(R.string.Jun);
            break;
        case 6: 
            ShortMonth = getString(R.string.Jul);
            break;
        case 7: 
            ShortMonth = getString(R.string.Aug);
            break;
        case 8: 
            ShortMonth = getString(R.string.Sep);
            break;
        case 9: 
            ShortMonth = getString(R.string.Oct);
            break;
        case 10: 
            ShortMonth = getString(R.string.Nov);
            break;
        case 11: 
            ShortMonth = getString(R.string.Dec);
            break;
        }
        TextView datetxt = (TextView) findViewById(R.id.home_date);
        datetxt.setText(ShortMonth + " " + Day);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T13:39:01.320

试试这样：

```
final Calendar calendar = Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("MMM dd"); // 3-letter month name & 2-char day of month
TextView datetxt = (TextView) findViewById(R.id.home_date);
datetxt.setText(formatter.format(calendar.getTime())); 
```

[您可以在此处](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html)查看可用格式选项的列表。

# ios - UIBezierPath Array 渲染问题（如何使用 CGLayerRef 进行优化）

> ID：11312135
> 
> 赞同：0
> 
> 时间：2012-07-03T13:36:10.617
> 
> 标签：ios, cocoa-touch, drawing, uibezierpath

朋友们，我正在使用 UIBezierPaths 进行免费手绘，一切正常，为此我将路径存储在路径数组中，一切正常，在渲染时，我正在循环整个数组并渲染路径，但很快随着数组数量的增加，我在绘图时看到了延迟，下面是我的 drawRect 代码。请帮我找出我哪里出错了

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

    m_previousPoint2 = m_previousPoint1;
    m_previousPoint1 = [mytouch previousLocationInView:self];
    m_currentPoint = [mytouch locationInView:self];

    CGPoint mid1    = midPoint(m_previousPoint1, m_previousPoint2); 
    CGPoint mid2    = midPoint(m_currentPoint, m_previousPoint1);  

    testpath = CGPathCreateMutable();
    CGPathMoveToPoint(testpath, NULL, mid1.x, mid1.y);

    CGPathAddQuadCurveToPoint(testpath, NULL, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y);      

    CGRect bounds = CGPathGetBoundingBox(testpath);   

    CGPathRelease(testpath);

    CGRect drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

    CGContextRef context = UIGraphicsGetCurrentContext();
    context = CGLayerGetContext(myLayerRef);

    [self.layer renderInContext:UIGraphicsGetCurrentContext()];      

    [self setNeedsDisplayInRect:drawBox];    

}

- (void)drawRect:(CGRect)rect
{   
    CGContextRef context = UIGraphicsGetCurrentContext();

    if(myLayerRef == nil)
    {            
        myLayerRef = CGLayerCreateWithContext(context, self.bounds.size, NULL);
    }

    [self.layer renderInContext:context];   

    CGPoint mid1 = midPoint(m_previousPoint1, m_previousPoint2); 
    CGPoint mid2 = midPoint(m_currentPoint, m_previousPoint1);

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextSetFlatness(context, 0.1);

    CGContextSetAllowsAntialiasing(context, true);

    CGContextStrokePath(context);

    [super drawRect:rect];  

 } 
```

代码根据@borrrden 的以下讨论更新

问候兰吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:43:07.820

在 WWDC 2012 会议中有一个关于这个确切问题的精彩会议。我认为它被称为 iOS 性能：图形或类似的东西。你绝对应该看。

总结是，不要将它存储在路径中。无需保留此路径信息。存储一个单独的上下文（CGLayer 是最好的）并绘制到其中（就像你在路径中添加点，在上下文中添加点）。然后在您的 drawRect 中，只需将该层绘制到当前图形上下文中。还要确保只调用`setNeedsDisplay`已更改的矩形，否则您很可能会在高分辨率设备上遇到问题。

# c# - Windows 8 Metro 风格项目（InkStroke.Add 错误）

> ID：11312137
> 
> 赞同：3
> 
> 时间：2012-07-03T13:36:13.490
> 
> 标签：c#, microsoft-metro

Windows 8 Metro 风格项目。

删除一些笔画后，我尝试使用`InkManager.AddStroke()`提供撤消和重做功能的方法添加已删除的笔画。

抛出异常

> 对 COM 组件的调用已返回错误 HRESULT E_FAIL。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:57:28.453

```
 public void OnDrawUndo(object sender, RoutedEventArgs e)
    {
        try
        {
            BackupInkStrokeCollection.Push(CurrentInkStrokeCollection.Pop());
            renderer.Clear();
            renderer.AddInk(CurrentInkStrokeCollection);

            //inkManager.GetStrokes()[inkManager.GetStrokes().Count - 1].Selected = true;

            InkStroke SelectedStroke = inkManager.GetStrokes()[inkManager.GetStrokes().Count - 1];
            SelectedStroke.Selected = true;
            var MyInkManager = new InkManager();
            MyInkManager.AddStroke(SelectedStroke.Clone());
            MyInkManagers.Add(MyInkManager);
            inkManager.DeleteSelected();
        }
        catch (Exception ee)
        {
            if (ee.Message == "Stack empty.")
                return;
            else
                new Windows.UI.Popups.MessageDialog(ee.ToString()).ShowAsync();
        }
    } 
```

# android - 可能有相同的@+id 和@string？

> ID：11312138
> 
> 赞同：3
> 
> 时间：2012-07-03T13:36:15.550
> 
> 标签：android, breakpoints

我是 Android 编程新手。我花了很长时间试图在我的代码中查找“幻线断点”错误，直到我更改了字符串资源名称才弄清楚。

我有一个 options.xml 菜单，其中包含

```
<item android:id="@+id/menu_about"
    android:title="@string/menu_about"
    android:icon="@drawable/ic_menu_about"></item> 
```

我的问题 - 我有`@+id/menu_about` *和* `@string/menu_about`。这可能吗？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:38:27.060

**是**的，这是可能的，您可以检索`R.string.menu_about`和`R.id.menu_about.`

并且在自动生成`R.java`中有不同的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:41:57.463

@+id/menu_about 创建 id 为 "menu_about" 的 item 元素.... 代码中的 @string/menu_about 将标题设置为存储在值文件夹中的 strings.xml 文件中的任何内容（即 R.string.menu_about）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:43:56.857

是的，这是可能的。

R.java 本身被组织成一些用于字符串、id、drawable 等的子类。可能有两个不同的资源具有相同的名称，因为它们将是不同类的成员。但是，您不能拥有两个具有相同名称的相同资源，例如名为“foo”的两个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:39:23.660

是的，您可以提供与`@+id`&相同的名称`@string`。

这两个都存储在不同的类中`R.java`。就像您声明`@+id/menu_about`这将存储在`id`课堂上一样。ETC..

# sql-server - 使用 ADO.NET 从多个 VFP 表中进行选择

> ID：11312142
> 
> 赞同：1
> 
> 时间：2012-07-03T13:36:21.967
> 
> 标签：sql-server, ado.net, visual-foxpro

我需要从一些不同网络位置的 2 个 VFP 空闲表中进行选择。

我已经设法将两个表作为两个 DataTables 放入一个数据集中，并为它们添加一个关系。

现在我需要加入它们并将结果插入到 SQL 服务器数据库中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:20:11.813

使用两个不同的查询从每个表加载所需的行和列子集，将每个表单独上传到临时 SQL 服务器表（使用 SqlBulkUpload），然后在 SQL 中针对两个临时表运行查询以创建所需的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:17:02.910

使用 Microsoft Access 将它们添加为链接表。然后，您可以从 .net 读取数据，就好像它是本机 Access 数据一样。您可能能够在 Access 中创建连接表的查询，然后也从 .net 读取查询。

# extjs - 浏览器刷新并重新启动后，ExtJS 存储仍然充满

> ID：11312143
> 
> 赞同：0
> 
> 时间：2012-07-03T13:36:22.037
> 
> 标签：extjs, store

我使用 ExtJs 4.1 和 DeftJS。我在一个窗口中使用带有来自商店的数据的网格。打开窗口时应重新加载商店中的数据，关闭时应清除。

但是，即使我刷新浏览器，并且在重新启动浏览器后，相同的旧数据仍然在网格中。这怎么可能？

怎么清仓？

我的商店是这样的：

```
 Ext.define( 'XXX.plugins.monitor.store.GridLogfiles', {
  extend  : 'Ext.data.Store',
  mixins: [ 
     'Deft.mixin.Injectable'
  ],

  destroy: function() {
     return this.callParent( arguments );
  },

  // model: Deft.Injector.resolve('modelGridLogfiles'),
  model: 'XXX.plugins.monitor.model.GridLogfiles',

  proxy   : {
     type       : 'ajax',
     url        : 'XXX:8090/devel/phi/dev/04-presentation/von_kay/http-api/HEAD/index.php',
     extraParams: {
        user      : 'test',
        pass      : 'test',
        vers      : 'extjs.json',
        module    : 'monitor',
        func      : 'getLogfiles'
     },
     reader     : {
        type: 'json',
          root: 'list',
//            root: 'list.getLogFiles',
//            root: 'getLogfiles',
        successProperty:false
     } 
  }
 , autoLoad: true
} ); 
```

* * *

我的模型是这样的：

```
 Ext.define( 'XXX.plugins.monitor.model.GridLogfiles', {
  extend: 'Ext.data.Model',
  mixins: [ 
     'Deft.mixin.Injectable', 
  ],

  destroy: function() {
     return this.callParent( arguments ); 
  },

  fields: [ {name: 'key'}, {name: 'value'} ] 
  // fields: [ { name : 'value' } ]
} ); 
```

* * *

在我的窗口中，我将商店与：

```
,items: [{
     xtype: 'grid',
     itemId: 'gridlogfiles',
     store: Deft.Injector.resolve('storeGridLogfiles'),
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:57:48.473

问题已解决，是我店里的一个错误`root`。

# java - 如何为 java 准备好的语句插入使用表名变量

> ID：11312155
> 
> 赞同：54
> 
> 时间：2012-07-03T13:36:51.773
> 
> 标签：java, sql, variables, dynamic, prepared-statement

我正在使用 java PreparedStatment 对象来构造一系列批处理 INSERT 查询。查询语句的格式为...

```
String strQuery = "INSERT INTO ? (col1, col2, col3, col4, col5) VALUES (?,?,?,?,?,?);"; 
```

...所以字段值和表名都是变量（即，我有多个表具有相同的列格式，每个插入将被定向到不同的表）。如果我删除“？”，我可以让执行工作。表名变量和硬代码，但每个准备好的语句都将插入到不同的表中，因此需要保留一个变量，我在执行批处理查询之前使用...

```
stmt.setString(1, "tableName1"); 
```

请问我怎样才能让它成为一个动态变量？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-03T13:43:03.987

你不能。您需要使用 String.format 使用字符串连接/占位符来构造 sql。准备好的语句用于列值而不是表名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T13:00:22.043

您可以使用占位符代替表名，然后将其替换为您的表名。

```
String strQuery = "INSERT INTO $tableName (col1, col2, col3, col4, col5)
                   VALUES (?,?,?,?,?,?);"; 
```

当你知道表名时替换

```
String query =strQuery.replace("$tableName",tableName);
stmt =conn.prepareStatement(query); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T15:43:43.913

一种选择可能是`String.format`：

例如

```
String sql = String.format("INSERT INTO $1%s (col1, col2, col3, (etc)",  myTablename); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-07-03T13:42:02.690

如果您的表名仅来自您自己的代码...

...您需要将其添加到原始字符串中：

```
String tableName = "some_table_name";
// some other code
String strQuery = "INSERT INTO " + tableName + " (col1, col2, col3, col4, col5) VALUES (?,?,?,?,?,?);"; 
```

如果表名来自*任何*其他不可靠的来源（用户输入，其他代码传入的参数），请不要这样做并查看其他答案！

# javascript - 在画布位置 mousemoves 上显示隐藏的 Div

> ID：11312156
> 
> 赞同：1
> 
> 时间：2012-07-03T13:36:53.653
> 
> 标签：javascript, jquery, html, canvas

目前我正在用 HTML5 中的画布对象创建一张方格纸。我可以通过找到 x/y 位置来创建画布并用颜色填充选定区域。不幸的是，我在使用 jQuery mousemove 方法来显示为正方形选择的信息的弹出窗口时遇到了一些麻烦。

这是我的代码：

```
Canvas Creation/Layout:<br>

<script type="text/javascript">
var canvas;
var context;
var color;
var state;
var formElement;
var number = 0;

function showGrid()
{
    canvas = document.getElementById('canvas');
    context = canvas.getContext('2d');

    context.lineWidth=0.5;
    context.strokeStyle='#999999';
    lineSpacing=10;

    var xPos = 0;
    var yPos = 0;

    var numHorizontalLines = parseInt(canvas.height/lineSpacing);
    var numVerticalLines = parseInt(canvas.width/lineSpacing);
    state = new Array(numHorizontalLines);

    for (var y = 0; y < numHorizontalLines; ++y)
    {
    state[y] = new Array(numVerticalLines);
    }

    for(var i=1; i<=numHorizontalLines;i++)
    {
        yPos=i*lineSpacing;
        context.moveTo(0,yPos);
        context.lineTo(canvas.width,yPos);
        context.stroke;
    }

    for(var i=1; i<=numVerticalLines; i++)
    {
        xPos=i*lineSpacing;
        context.moveTo(xPos,0);
        context.lineTo(xPos,canvas.height);
        context.stroke();
    }

}

function fill(s, gx, gy)
{
        context.fillStyle = s;
        context.fillRect(gx * lineSpacing, gy * lineSpacing, lineSpacing, lineSpacing);
        if(s != null)
        {

        }
}

function getPosition(e)
{
   var x = new Number();
   var y = new Number();
   var canvas = document.getElementById("canvas");

   if (e.pageX || e.pageY) 
   {
      x = e.pageX;
      y = e.pageY;
    }
    else 
    {
       x = e.clientX + document.body.scrollLeft +
            document.documentElement.scrollLeft;
       y = e.clientY + document.body.scrollTop +
            document.documentElement.scrollTop;
     }

   x -= canvas.offsetLeft;
   y -= canvas.offsetTop;

    var gx = Math.floor((x / lineSpacing));
    var gy = Math.floor((y / lineSpacing));

    state[gy][gx] = true;
    fill(color, gx, gy);
    addNumber();
} 
```

HTML：

```
<div class="graphpaper" id="graphpaper" onclick="getPosition(event)" style="width:956px; height:1186px;">
        <img src="images/PosterBorder_Top.png" align="right"/>
        <img src="images/posterBorder_left.png" align="left" valign="top"/>
        <canvas id ="canvas" width = "920" height = "1160" align="left">
        </canvas>
    </div>
 <!-- HIDDEN / POP-UP DIV -->
            <div id="pop-up">
              <h3>Pop-up div Successfully Displayed</h3>
              <p>
                This div only appears when the trigger link is hovered over.
                Otherwise it is hidden from view.
              </p>
            </div> 
```

用于弹出显示的 jQuery：

```
$('#canvas').mousemove(function(event){
    console.log("Here I am!");
     $('div#pop-up').show().appendTo('body');
}); 
```

有什么建议么？我显然错过了一些东西，但从我所做的事情来看，我相信这应该有效。

# css - 在 Drupal 7 中激活时使菜单按钮变大

> ID：11312159
> 
> 赞同：1
> 
> 时间：2012-07-03T13:37:12.430
> 
> 标签：css, drupal-7

与[http://www.austintexas.gov/government](http://www.austintexas.gov/government)类似，我想在菜单按钮处于活动状态时使其变大。

**这是我的主菜单的 CSS**

```
#mobileMenu_mm1 {
  margin: 10px 20px;
  padding: 3px 0px;}

#navigation {
  margin: 0px auto;
  float: left;}

#main-menu{
  clear: both;
  float: left;
  color: #fff;
  font-size: 18px;
  margin: 0px auto;
  overflow: hidden;
  width: 100%;}

#main-menu ul {
  float: left;
  margin-top: 10px;
  margin-left: 20px;
  padding: 0px 15px;}

#main-menu li {
  float: left;
  list-style-type: none;
  font-weight: 400;
  color: #333 !important;
  background: rgb(0, 25, 60);
  background: rgba(0, 25, 60, 0.9);}

#main-menu li a {
  color: #777;
  display: block;
  padding: 7px 7px 7px 7px;
  text-decoration: none;
  line-height: 12px;}

/*----------------------MENU SPECIFIC COLORS--------------*/
#main-menu li#dhtml_menu-305{
 border-radius:  15px 15px 0px 0px;
 border-right: 2px solid #e6e7de;
 background: #D1B37F;
}
#main-menu li#dhtml_menu-50692{
 border-radius:  15px 15px 0px 0px;
 border-right: 2px solid #e6e7de;
 background: #ffff90;
}
#main-menu li#dhtml_menu-50690{
 border-radius:  15px 15px 0px 0px;
 border-right: 2px solid #e6e7de;
 background: lightblue;
}

#main-menu li#dhtml_menu-50207{
 border-radius:  15px 15px 0px 0px;
 border-right: 2px solid #e6e7de;
 background: #CAC37F;
 }

#main-menu li#dhtml_menu-50207 li{
 background: #CAC37F;
 }

#main-menu li#dhtml_menu-50691{
  border-radius:  15px 15px 0px 0px;
  background: #E4B04A;
}

#main-menu li a:hover {
  border-radius:  15px 15px 0px 0px;
  background: rgb(200, 200, 200);
  background: rgba(200, 200, 200, 0.7);
  height: 35px;}

#main-menu li a .sf-sub-indicator {
  display: block;
  overflow: hidden;
  position: absolute;
  z-index: 15;
  text-indent: -9999px;}

#main-menu li ul li a,
#main-menu li ul li a:link,
#main-menu li ul li a:visited {
  border-top-width: 0;
  color: #fff;
  font-size: 14px;
  padding: 10px 10px;
  text-transform: none;
  line-height: 13px;
  width: 105px;}

#main-menu li ul {
  height: auto;
  padding: 0px 0px;
  left: -9999px;
  margin: 0 0 0 -2px;
  position: absolute;
  z-index: 15;
  width: 0px;}

#main-menu li ul a {width: 110px;}
#main-menu li ul ul {margin: -33px 0 0 124px;}
#main-menu li:hover>ul,
#main-menu li.sfHover ul {left: auto;}
#main-menu ul li.leaf, #main-menu ul li.expanded, #main-menu ul li.collapsed {list-style:none;}
#main-menu ul.menu li {margin: 0;}
#main-menu li.expanded, #main-menu li.collapsed, #main-menu li.leaf {margin: 0;padding: 0;} 
```

**HTML/PHP**

```
 <nav id="navigation" role="navigation">
      <div id="main-menu">
        <?php 
        $main_menu_tree = menu_tree(variable_get('menu_main_links_source', 'main-menu')); 
        print drupal_render($main_menu_tree);
        ?>
      </div>
  </nav><!-- end main-menu -->

  <?php if ($page['header']): ?>
   <div id="header" class="sixteen columns" style="margin: 0; padding: 0;>
    <?php print render($page['header']); ?>
   </div>
   <?php endif; ?>
</div>
     </div>
  </header> 
```

**这是一个截图** ![点击这里](../Images/555a2f71df6c1dfec9b719de1b9405b5.png)

**我尝试过的事情**

我已经尝试过使用 :active 和 :current。出于某种原因，只有我菜单上的第一个按钮有一个活动类。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:09:40.083

使用`.active`类名。Drupal 中所有活动的菜单链接都有一个类名`active`。

```
#main-menu li.active 
```

如果您愿意只选择有子项的菜单链接，请使用`.expanded`类名。

```
#main-menu li.expanded 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:46:29.697

没有什么比一个活生生的例子更好的了：

[http://jsfiddle.net/g105b/76JDZ/](http://jsfiddle.net/g105b/76JDZ/)

![在此处输入图像描述](../Images/dceb8c89972ffd23acbb9aca56f93227.png)

该示例使用 JavaScript 将`active`类添加到当前选定的`li`元素，但您要寻找的效果是纯 CSS。

Drupal 的一个特性是自动将类名添加`active`到当前选中的`li`.，因此您可以完全忽略链接示例中的 JavaScript，而直接采用 CSS 中显示的概念。

# php - 无法查看表中的所有条目

> ID：11312167
> 
> 赞同：0
> 
> 时间：2012-07-03T13:37:30.063
> 
> 标签：php, html-table

我想知道是否有人可以帮助我。

首先我很抱歉。我本来想提供一个链接而不是打印下面的代码，但我需要它来运行我的实时服务器表。

我正在使用下面的代码生成与当前用户相关的所有位置记录的表。

```
<form name="locationsconsole" id="locationsconsole" method="post" action="locationsaction.php">
   <table width="864" cellpadding="0" cellspacing="0">
      <thead>
        <tr>
            <th width="17"></th>
            <th width="99"><div align="center">Location Name</div></th>
            <th width="287"><div align="left">Location Address</div></th>
            <th width="88"><div align="center">No. Of Finds Made </div></th>
            <th width="86"></th>
            <th width="72"></th>
            <th width="84"></th>
        </tr>
      </thead>
      <tbody>
 <?php

    $query = "SELECT l.locationid, f.locationid, l.locationname, l.userid, l.returnedaddress, count(f.locationid) as totalfinds FROM detectinglocations as l left join finds as f on l.locationid=f.locationid WHERE l.userid='$idnum' ORDER BY l.locationname";  
    $result = mysql_query($query) or die('error');

    if (mysql_num_rows($result) == 0)

    echo"<tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>&nbsp;</td>
            <td colspan='6'><div align='center'><strong>There are no records set up</strong></div></td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
         </tr>";

    else    

    {

    while($obj=mysql_fetch_object($result))
    {
            ?>

    <tr>
        <td><input type="hidden" name="lid" value="<?php echo $obj->locationid;?>"/></td>
        <td><div align="center"><?php echo $obj->locationname;?></div></td>
        <td><div align="left"><?php echo $obj->returnedaddress;?></div></td>
        <td><div align="center"><?php echo $obj->totalfinds;?></div></td>
        <td><div align="center"><input name="type" type="submit" value="View Details"/></div></td>
        <td><div align="center"><input name="type" type="submit" value="Add Finds"/></div></td>
        <td><div align="center"><input name="type" type="submit" value="Add Images"/></div></td>
      <td width="129"><div align="left"><input name="type" type="submit" value="View Location Finds"/></div></td>
    </tr>
<?php
    }   
    }           
?>
</tbody>
</table>
</form> 
```

尽管查询正在检索正确的信息并且行上的按钮有效，但我遇到的问题是，虽然列表中应该显示 3 条记录，但只显示了第一条。

我是第一个承认在 PHP 方面我当然不是专家的人，但我已经为此工作了好几天，编写了很多次脚本，但我似乎找不到解决方案.

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:27:52.500

正如@Bulk 和@ShawnVaser 所指出的，我的查询存在问题。这是解决方案：

询问

```
$query = "SELECT  l.*, COUNT(f.locationid) as totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '28' GROUP BY l.locationname"; 
$result = mysql_query($query); 
```

# java - 是否可以在基于 PHP 或 JAVA 的在线 Web 应用程序中从客户端录制音频到服务器？

> ID：11312175
> 
> 赞同：7
> 
> 时间：2012-07-03T13:37:51.203
> 
> 标签：java, php, audio

我正在构建一个在线 Web 应用程序，它可以让客户测试他们的语言技能。

该应用程序由客户可以自由进行的一系列不同测试组成。其中一项测试是客户在网页上看到一个句子，然后被要求对着麦克风说出这个句子。这个想法是记录音频流，将其发送到服务器并将其保存到文件中。

这可能使用 PHP、Java 或类似的东西吗？

感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T04:00:12.560

我知道您要求使用 PHP，我猜这是您选择的语言，但是您是否考虑过使用 html5 来录制您的音频？注意：仍然缺乏浏览器支持，但根据您的要求可能值得研究。

查看本[教程](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)；它使用 GETUSERMEDIA API 来访问您的摄像头和麦克风硬件。

* * *

更新：这是关于这个主题的[另一个很好的教程](http://html5hub.com/using-the-getusermedia-api-with-the-html5-video-and-canvas-elements/#i.m2r3fz13j5elzs)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T16:49:52.323

正如另一个答案所建议的那样，解决该问题的唯一现实解决方案是使用 Flash 或 java 小程序。在一两年内，希望会有所改变，您将能够使用 javascript 和 HTML5，但这是现在。

我会说这是一个用flash更好更容易解决的问题，但是对于java，你需要编写一个java小程序来进行录制。以下是一些帮助您入门的提示：

[http://docs.oracle.com/javase/tutorial/deployment/applet/](http://docs.oracle.com/javase/tutorial/deployment/applet/) [http://www.java2s.com/Tutorial/Java/0120__Development/CapturingAudiowithJavaSoundAPI.htm](http://www.java2s.com/Tutorial/Java/0120__Development/CapturingAudiowithJavaSoundAPI.htm) [http://www.jsresources.org/](http://www.jsresources.org/)

您不需要 java 语音 API 或 JMF，只需要 java 声音。您可能希望 JMF 压缩音频文件以加快上传速度，但您可以在没有的情况下完成此操作。请注意，您可能需要“签名”您的小程序才能在浏览器中录制音频。

如果你不喜欢 flash，你也可以使用 haxe 来编写你的 flash 代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T13:47:06.550

不是 100% 你在寻找什么，但我认为它至少会给你一些想法。

[如何将流式音频录制到服务器](https://stackoverflow.com/questions/4962557/how-to-record-streaming-audio-to-the-server)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:16:54.210

可以同时使用 Flash 和 Java 来解决这个问题。您可以使用 Flash 组件录制声音并将其分块发送到服务器端，这可以使用 java 实现。

在 Flash 中创建录音机的优点很多。

*   Flash 是浏览器中广泛安装的插件
*   Java Applet 在运行之前会发出警告，这会多次关闭用户。
*   从数字上看，大多数媒体应用程序都是使用 Flash 创建的，因此可以为您提供很好的支持。
*   Java Applet 用于胖客户端必须适合浏览器并且必须安全的地方。您仍然会发现许多实时踩踏应用程序是用 Java 小程序编写的。

这里有几个在 Flash 中创建录音机的教程

[http://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/](http://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/)

[Adobe 录制声音并保存](https://stackoverflow.com/questions/10427518/adobe-record-sound-and-save)

这种收集的声音流可以存储在客户端的块中，并且可以与后端服务器同步（任何服务器端语言都可以。）。

用 Java 实现您的服务器具有优势。如果明天需要，您可以使用 Java 实现的 Red5 服务器流式传输相同的声音。

在此处查看更多信息：[http ://www.red5.org/](http://www.red5.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-19T07:13:32.593

有一个用 PHP、Flash 和 HTML5 编写的录音 SDK。 [http://recordmp3online.com](http://recordmp3online.com)

我实际上是那个 SDK 的作者（完全披露）

# javascript - js滑块网站-谷歌抓取

> ID：11312177
> 
> 赞同：0
> 
> 时间：2012-07-03T13:37:52.943
> 
> 标签：javascript, slider, web-crawler, google-crawlers

我目前正在构建一个带有 js 滑块的网站。基本上网站的所有页面（在这种情况下是幻灯片）都包含在一个大的 html 页面中。

这些页面/幻灯片被组织在`<div>`标签中，比如`<div id="#slide1">, <div id="#slide2" >`，等等

当您在页面/幻灯片中滑动时，会更新 URL，例如 www.mysite.com/#!slide1，然后是 www.mysite.com/!#slide2 等

是否可以告诉爬行机器人每个 div 应该被视为一个页面？

幻灯片未在 ajax 中加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:48:20.867

When you're serving your files with PHP or something like that you can try this:

*   create links for all slides which a earch engine could see (e.g. in a site map)
*   when a link is called deliver only the requested slide/content as HTML
*   store all other slides in JavaScript
*   before moving to another slide append the content

Extra advantage:

*   even without javascript activated a user could go through all the slides

Disadvantages:

*   when your slides contain a lot of content, javascript overhead could get heavy
*   it will work best if only one slide is visible at a time (or just append all slides "unload")

Maybe this is a possible idea.

To enhance your URLs you could also use the HTML5 history object, but this won't work in any Internet Explorer before IE10.

# facebook - 如何检查我的应用程序的任何用户是否被 Facebook 禁止？

> ID：11312179
> 
> 赞同：1
> 
> 时间：2012-07-03T13:37:54.253
> 
> 标签：facebook, facebook-graph-api

我相信这次我的问题很简单。假设我有一个网页，它允许用户将他们的帐户与我网页上的帐户相关联。假设在某个时候facebook禁止了无效帐户（假设其中一些是机器人和蜘蛛），有没有办法检查我的哪些用户以及是否有任何用户被禁止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:42:02.537

停用的帐户无法与 API 一起使用，因此调用`/USER_ID`将返回`false`

**更新**：此消息最近（2012 年第三季度）被更新为一个有效的例外 - 它现在为所有隐私失败和/或访问不存在或已删除的内容返回一个真正的例外

```
"error": {
"message": "Unsupported get request.",
"type": "GraphMethodException",
"code": 100

} 
```

# windows-phone-7 - WP7：如何在一个视图中有效加载 100+ 小图片

> ID：11312183
> 
> 赞同：0
> 
> 时间：2012-07-03T13:38:16.263
> 
> 标签：windows-phone-7, listbox

我试图做一个长`ListBox`的，每个`ListBoxItem`都是一个里面有一个 100x100 小标志的瓷砖。现在它非常慢 - 使用超过 5-6 秒只是为了变得响应。由于图像是从网络异步下载的（并且每个图像都存储在每个自己的模型实例中），我不知道如何检查它们何时全部下载（即没有进度指示器来覆盖延迟）。

您对我如何以最有效的方式做到这一点有任何想法吗？

XAML：

```
 <ListBox>
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>

                    <ListBox.Template>
                        <ControlTemplate>
                            <ItemsPresenter />
                        </ControlTemplate>
                    </ListBox.Template>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <ListBoxItem>
                                    <Grid Name="ChannelTile" Tap="ChannelTile_Tap">
                                        <Rectangle Fill="{StaticResource LightGrayColor}" />
                                        <Image Style="{StaticResource Tiles_Image}" Source="{Binding Image}" />
                                    </Grid>
                                </ListBoxItem>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:27:50.347

如果您通过 URL 引用绑定中的图像 (Source={Binding Image})，请尝试使用 PhonePerformance (http://nuget.org/packages/PhonePerformance) 中的 LowProfileImageLoader

# security - jsf用户html输入安全

> ID：11312185
> 
> 赞同：2
> 
> 时间：2012-07-03T13:38:19.380
> 
> 标签：security, jsf, html-parsing, wysiwyg

在我的应用程序中，我有一些 tinymce 编辑器，用户输入显示为

```
<h:outputText escape="false"/> 
```

但是如何防止恶意输入，例如 javascript 或 iframe？有没有可以过滤输入字符串的库？

更新：我找到了“htmlpurifier”，但它是用于 php 的，对于 java 有没有这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:16:47.870

您需要使用支持清理/白名单标签/属性的 HTML 解析器。其中有[Jsoup](http://jsoup.org)，它有一个`clean()`正是为此目的的方法。[这是其网站](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)的相关性摘录。

> ## [清理不受信任的 HTML](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)
> 
> ### 问题
> 
> 您希望允许不受信任的用户提供 HTML 用于您网站上的输出（例如，作为评论提交）。您需要清理此 HTML 以避免[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)(XSS) 攻击。
> 
> ### 解决方案
> 
> 将 jsoup HTML[`Cleaner`](http://jsoup.org/apidocs/org/jsoup/safety/Cleaner.html)与[`Whitelist`](http://jsoup.org/apidocs/org/jsoup/safety/Whitelist.html).
> 
> ```
> String unsafe = 
>       "<p><a href='http://example.com/' onclick='stealCookies()'>Link</a></p>";
> String safe = Jsoup.clean(unsafe, Whitelist.basic());
>       // now: <p><a href="http://example.com/" rel="nofollow">Link</a></p> 
> ```

# php - Zend_Db 和无缓冲查询

> ID：11312187
> 
> 赞同：0
> 
> 时间：2012-07-03T13:38:21.147
> 
> 标签：php, mysql, pdo, unbuffered-queries

我有一个长时间运行的查询，我尝试通过一个无缓冲的 pdo 语句来获取它（参见下一个代码）。但是当我“执行”无缓冲查询，或者我执行“fetchAll”时，时间（另见下文）并没有太大变化......我认为无缓冲只是执行查询并给我一个光标？

get_db 函数返回一个 Zend_Db 对象。

```
 l('Start 1');

  $sql = get_db('ATO')->select()
                       ... Big query...
                       ->assemble();

  l('Assembled');

  get_db('APNS')->query($sql)->fetchAll();

  l('All fetched... Going again!');

  $PDOStatement = get_db('ATO')->getConnection()
                                ->prepare($sql,
                          array(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => false));

  l('prepared');

  if ( $PDOStatement->execute() === false ) {
    l(':(');
    exit(1);
  }

  l('fetching');

  while ( ($PDOrow = $PDOStatement->fetch()) !== false ) {
  }

  l ('all done');

  function l($t) {
    static $start = null;
    if ( $start === null ) {
      $start = microtime(true);
    }
    echo sprintf("[%0.5f] %s\n", microtime(true) - $start, $t);
  } 
```

和时间：

```
[0.00000] Start 1
[0.02262] Assembled
[214.69091] All fetched... Going again!
[214.69105] prepared
[417.01584] fetching
[420.55217] all done 
```

如您所见，获取所有变量和无缓冲变量几乎没有区别。

我在这里可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:58:02.143

您错了，因为您尝试使用无缓冲查询来加快速度。

1.  缓冲查询将所有结果提取到 PHP 内存。
2.  无缓冲的结果位于服务器上，直到它被获取。

每种方式都有自己的优点和缺点，但与时间的关系微弱。

阅读手动[缓冲和非缓冲查询](http://php.net/manual/en/mysqlinfo.concepts.buffering.php)

# css - @font-face 在 IE8 中不起作用

> ID：11312192
> 
> 赞同：-2
> 
> 时间：2012-07-03T13:38:33.613
> 
> 标签：css, internet-explorer-8, fonts, font-face

我的所有项目都使用@font-face，但由于某种原因，它在 IE8 中不起作用。您可以在此处查看该网站：http: [//milkandhoneyhospitality.com/](http://milkandhoneyhospitality.com/)

正如您在普通浏览器中看到的那样，主要字体是 Bebas Neue，并且正在完美呈现。但是，当我们将它带入 ie8 时，它使用了一种备用字体 arial。它甚至在 IE7 中也能很好地工作，所以 IE8 是问题所在（底部的屏幕截图）

我的@font-face 很典型：

```
@font-face {
    font-family: 'BebasNeueRegular';
    src: url('fonts/BebasNeue-webfont.eot');
    src: url('fonts/BebasNeue-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/BebasNeue-webfont.woff') format('woff'),
         url('fonts/BebasNeue-webfont.ttf') format('truetype'),
         url('fonts/BebasNeue-webfont.svg#BebasNeueRegular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

知道为什么这不能仅在 IE8 中工作吗？

![在此处输入图像描述](../Images/a73cd618b5cc9db58e1b3303fef98f3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:47:05.213

清除 IE8 缓存即可解决问题

# javascript - 在 Javascript 中将正则表达式字符串转换为 RegExp 的不同之处

> ID：11312194
> 
> 赞同：0
> 
> 时间：2012-07-03T13:38:33.817
> 
> 标签：javascript, regex, ecmascript-5

为什么我在 Object RegExp 中围绕测试函数的代码与正则表达式模式的工作方式不同。我错过了什么还是我使用了错误的转义正则表达式

```
<html>
<body>

<script type="text/javascript">

var str = "info@test.com";

//This isn't working
var regStr = "^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$"; //This string can be any regex get from XSLT

//Escape function get from: http://stackoverflow.com/a/6969486/193850
regStr = regStr.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
console.log(regStr); // \^\(\[w\-\]\+\(\?:\.\[w\-\]\+\)\*\)@\(\(\?:\[w\-\]\+\.\)\*w\[w\-\]\{0,66\}\)\.\(\[a\-z\]\{2,6\}\(\?:\.\[a\-z\]\{2\}\)\?\)\$
var re = new RegExp(regStr , "i");
console.log(re.test(str)); //false

var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i
console.log(filter.test(str)); //true

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:40:20.537

将正则表达式编写为字符串时，必须将反斜杠加倍。

为什么？字符串文字语法**也**遵守自己的反斜杠引用约定，例如引号字符、换行符等。因此，当 JavaScript 解析包含正则表达式的字符串常量时，反斜杠将消失。因此，您需要用另一个反斜杠引用它们，以便当您将字符串传递给 RegExp 构造函数时，它会看到您实际想要的正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:49:04.453

看，有一个混乱。您使用的函数是预处理待成为正则表达式的字符串的好方法，因此您不必担心转义*正则表达式*元字符 - 即，将控制正则表达式行为的符号，而不仅仅是字面意思。

但关键是你的字符串在被这个转义函数获取之前已经被解析了：`\w`并且`\.`序列分别变得公正`w`，`.`前面的斜杠[丢失了](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Escaping_characters)。

> 对于表 2.1 中未列出的字符，前面的反斜杠将被忽略，但这种用法已被弃用，应避免使用。

实际上，转义函数确实恢复了 之前的斜线`.`，但`w`在任何方面都不是特别的。) 因此，进入 RegExp 构造函数的字符串`[w]`不是`[\w]`.

实际上很容易检查：就`console.log(regStr)` **在**更换操作之后。

# xml - 使用 XSL 忽略空元素

> ID：11312195
> 
> 赞同：2
> 
> 时间：2012-07-03T13:38:35.703
> 
> 标签：xml, xslt

我有一个 XML 工作流，我们正在从 XML 源构建输出文档，但一些数据元素是空的，但仍出现在输出中。问题是我们正在根据最终输出生成段落返回和间距。

在某些情况下，数据包含`<address1>`和`<address2>`元素。当它出现时，我们希望它看起来像这样（A）：

```
<address1>123 Main Str</address1><xsl:text> </xsl:text><zip>60060</zip> 
```

当元素中没有数据时`<address2>`，我们希望它以这种方式出现（B）：

```
<address1>123 Main Str</address1> <hours>M-F 9:00am - 5:00pm</hours><xsl:text> 
</xsl:text><address2>PO Box 123</address2> <zip>60060</zip> 
```

但是，XML 包含 EMPTY 数据元素，`<address2></address2>`因此我们最终会遇到以下情况（C）：

```
<address1>123 Main Str</address1> <hours>M-F 9:00am - 5:00pm</hours><xsl:text> 
</xsl:text><address2/><xsl:text> </xsl:text><zip>60060</zip> 
```

我们的 XSL 工作正常，直到它碰到一个空元素。我敢肯定，即使有一个空元素，也有办法创建选项 A。我尝试使用`<xsl:if test="string-length(node) != 0">`，但我无法让它工作。我想摆脱空`<address2/>`元素并将元素移动`<zip>`到上一行。

这是我当前的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?><!-- DWXMLSource="IndividualBanks_2011 final.xml" -->
<!DOCTYPE xsl:stylesheet>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:strip-space elements="*"/>

<xsl:output method="xml"/>
<xsl:template match="/">

<Root>
<Story><xsl:apply-templates select="Root"/></Story>
</Root>
</xsl:template>

<xsl:template match="BankName | Address1 | Hours | Established | RoutingNbr | CO/CityOfficePhone | CO/CityOfficeAddress2 "><xsl:element name="{name()}"><xsl:value-of select="."/></xsl:element></xsl:template>
<xsl:template match="BK">
<xsl:apply-templates select="BankName"/><xsl:text>  </xsl:text><xsl:apply-templates select="Established"/>    <xsl:text>    </xsl:text><xsl:apply-templates select="RoutingNbr"/><xsl:text>
</xsl:text>
<xsl:apply-templates select="OfficeOfLabel"/>
<xsl:apply-templates select="Address1"/><xsl:text>  </xsl:text><xsl:apply-templates select="Hours"/>
<xsl:apply-templates select="Address2"/><xsl:apply-templates select="Zip"/>
</xsl:template>
<xsl:template match="Address2"><xsl:text>
</xsl:text><Address2><xsl:value-of select="."/></Address2><xsl:text>    </xsl:text>
</xsl:template>

<xsl:template match="Zip">
<Zip><xsl:value-of select="."/></Zip><xsl:text>
</xsl:text></xsl:template>
</xsl:stylesheet> 
```

这是 XML 数据源：

```
<Root><BK><BankName>Ames National Corporation</BankName><Established>Est. 1975</Established><RoutingNbr>8020-0135-0</RoutingNbr><Address1>405 5th Street</Address1><Hours>Hrs: M-F 8-5</Hours><Address2></Address2>  <Zip>50010</Zip><Fax>FAX: (515) 663-3033</Fax><Phone>(515) 232-6251</Phone><WebURL>Web: www.amesnational.com</WebURL><MultiBankLabel>Please see Multi-Bank Holding Companies section</MultiBankLabel>
</BK>
<BK><BankName>Bank of the West</BankName><Address1>525 Main</Address1><Zip>50010-6008</Zip><Fax>FAX: (515) 232-3791</Fax><Phone>(515) 232-8664</Phone><OfficeOfLabel>Office of Bank of the West, West Des Moines</OfficeOfLabel>
<EH><Employee>Michael Sondall, BM</Employee></EH>
</BK>
<BK><BankName>Bankers Trust Company</BankName><Address1>1510 Buckeye </Address1><Zip>50010</Zip><Phone>(515) 233-4424</Phone><WebURL>Web: www.bankerstrust.com</WebURL><OfficeOfLabel>Office of Bankers Trust Company, Des Moines</OfficeOfLabel>
<EH><Employee>John Russell, VP</Employee></EH>
</BK>
<BK><BankName>Exchange State Bank</BankName><RoutingNbr>0739-0950-7</RoutingNbr><Address1>823 Wheeler, Ste 32</Address1><Zip>50010</Zip><Fax>FAX: (515) 232-5068</Fax><Phone>(515) 232-5060</Phone><Email>e-Mail: ames@esb1.com</Email><OfficeOfLabel>Office of Exchange State Bank, Collins</OfficeOfLabel>
<EH><Employee>Allison Appel, VP, CPA</Employee></EH><EH><Employee>Christine Heintz, AVP</Employee></EH>
</BK>
<BK><BankName>First American Bank</BankName><Established>Est. 1956</Established><RoutingNbr>0739-0080-7</RoutingNbr><Address1>1530 S Duff Avenue, Ste 1</Address1><Hours>Hrs: M-TH 9-5 SAT 8-12</Hours><Address2>    </Address2><Zip>50010</Zip><Fax>FAX: (515) 956-3160</Fax><Phone>(515) 233-2033</Phone><WebURL>Web: </WebURL>    <OfficeOfLabel>Office of First American Bank, Fort Dodge</OfficeOfLabel>
<EH><Employee>Steve Goodhue, Reg Pres</Employee></EH>
</BK></Root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:01:38.660

您给我们的信息似乎有很多不一致的地方，但简单的解决方法是添加一个模板规则：

```
<xsl:template match="address2[not(child::node())]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:55:12.730

您使用该`string-length`功能的方法还不错，但也许您将其插入了错误的位置？

当我替换您的 XSLT 行时，该`<Zip>`元素位于我的前一行

```
<xsl:template match="Address2"><xsl:text> 
```

和

```
<xsl:template match="Address2[string-length() != 0]"><xsl:text> 
```

这样做是你想要的吗？`<Hours>`如果没有`<Address2>`指定，我不太确定您是否也想跳过。

**更新：**`<Address2>`如果为空，为了对元素应用不同的排序，请使用具有`<xsl:choose>`与上述类似条件的结构：

```
<xsl:template match="BK">
<xsl:apply-templates select="BankName"/><xsl:text>  </xsl:text><xsl:apply-templates select="Established"/>    <xsl:text>    </xsl:text><xsl:apply-templates select="RoutingNbr"/><xsl:text>
</xsl:text>
<xsl:apply-templates select="OfficeOfLabel"/>
<xsl:choose>
<xsl:when test="string-length(Address2) != 0">
<xsl:apply-templates select="Address1"/><xsl:text>  </xsl:text><xsl:apply-templates select="Hours"/>
<xsl:apply-templates select="Address2"/><xsl:apply-templates select="Zip"/>
</xsl:when>
<xsl:otherwise>
<xsl:apply-templates select="Address1"/><xsl:text>   </xsl:text><xsl:apply-templates select="Zip"/><xsl:text>  </xsl:text><xsl:apply-templates select="Hours"/>
</xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

然后，您可以完全跳过`<Address2>`.

# java - 在 Google App Engine (Java) 中处理动态子域

> ID：11312196
> 
> 赞同：2
> 
> 时间：2012-07-03T13:38:36.423
> 
> 标签：java, google-app-engine, dns, subdomain

假设我有一个**www.foo.com域，该域设置为在****foo.appspot.com**上加载我的应用程序

 **如何设置以便可以使用任何子域（例如**user.foo.com**）访问该站点？然后我如何在我的应用程序中理解该请求具有一个值为**user**的子域？

我只是不确定我需要在我的 DNS 中进行哪些修改，以及我需要在我的代码中进行哪些修改才能读取子域。

也许有一种更简单的方法，所有**user.foo.com**请求都实际加载（而不是重定向）**foo.appspot.com/user**，在这种情况下，在我的代码中处理起来非常简单。

我只是不确定如何进行这些修改 - 但基本上我想要实现的是我的每个用户都有自己的子域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:50:14.627

[您需要查找通配符 CNAME， App Engine 文档](https://developers.google.com/appengine/docs/domain#wildcard)中有一些关于此的信息，但如果我没记错的话，并非所有 DNS 提供商都支持。

您也不能（没有重定向）将 {user}.domain.com 映射到 www.domain.com/{user}。**

# python - 如何对数组进行切片以获取python中的第零、第二、第三、第四个元素？

> ID：11312197
> 
> 赞同：-2
> 
> 时间：2012-07-03T13:38:47.000
> 
> 标签：python

我正在尝试对一个数组进行切片以获得在两个切片中具有两个数组的第 0、2、3、4 个元素的切片。我如何在python中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:45:05.973

```
[a[i] for i in (0, 2, 3, 4)] 
```

也许？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:42:36.597

我不认为我**一个人** `slice`可以做到，使用**两个** `slice`和`concatenate`他们。

```
>>> lis=[1,2,3,4,5,6]
>>> lis[0:1]+lis[2:5]
[1, 3, 4, 5] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:47:50.370

If you're using numpy:

```
a[np.array((0,2,3,4))] 
```

You need to use a numpy array for the indexing in order to trigger Advanced Indexing (using a tuple won't work).

If you perfer, you could use a list:

```
a[[0,2,3,4]] 
```

That might be a little cleaner ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:11:02.333

好吧，如果我们从字面上理解，我认为这意味着' *slice1 具有 (0,2,3, 两个 slices2 中两个数组的第 4 个元素)* '，这意味着' *slice1 具有 (两个 slices2 每个具有 (0,2,3 , 其自身数组的第 4 个元素))* '. 这给了我们

```
import operator as op
arr1 = [1,7,4,75,100,67]
arr2 = ['a', 'b', 'e', 'z', 'r', 's']
the_slice = map(op.itemgetter(0, 2, 3, 4), (arr1, arr2)) 
```

结果是`list(the_slice)`：

```
[(1, 4, 75, 100), ('a', 'e', 'z', 'r')] 
```

# c# - 使用哈希作为主键？

> ID：11312207
> 
> 赞同：2
> 
> 时间：2012-07-03T13:39:06.130
> 
> 标签：c#, database, sql-server-2008

我需要存储多台计算机的服务列表。我想我会创建一个表来保存所有可能的表的列表，一个用于所有可能的计算机的表，然后是一个将服务链接到计算机的表。

我正在考虑保持完整服务列表的唯一性，我可以使用可执行文件的哈希作为服务的主键，但我不确定这是否会有任何缺点（请注意，哈希仅适用于识别。不用于任何类型的安全目的）。我在考虑而不是使用二进制字段作为主/外键，而是将值存储为 base 64 编码的 sha512，并使用`nvarchar(88)`. 与此类似的东西：

```
CREATE TABLE Services
(
  ServiceHash nvarchar(88) NOT NULL,
  ServiceName nvarchar(256) NOT NULL,
  ServiceDescription nvarchar(256),
  PRIMARY KEY (ServiceHash)
) 
```

此解决方案是否存在任何固有问题？（我将使用 SQL 2008 数据库并通常通过 C#.Net 访问它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:42:05.863

问题是散列在定义上不是唯一的。您不太可能发生碰撞，但有可能。结果，您不能只使用哈希，这意味着整个哈希 id 是死胡同。

使用普通的 ID 字段，在 ServiceName 上使用带有索引的唯一约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:45:07.840

从性能的角度来看，拥有非增量主键会导致聚集索引很快变得碎片化。

我建议：

1.  使用具有自动增量的`INT`或代理 PK。`BIGINT`
2.  使用[顺序 GUID](http://msdn.microsoft.com/en-us/library/ms189786%28v=sql.105%29.aspx)作为 PK。索引不如`INT`增量索引快，因此碎片时间低。

然后，您可以在其他列上使用非聚集索引，包括存储哈希的列。`VARCHAR`您还可以对其进行全文索引，然后在查找特定哈希时进行精确匹配。

但是，如果可能，请改用数字哈希并在其上创建非聚集索引。

当然，请考虑`@TomTom`下面提到的内容。

# sql - 受参数化影响的 SQL Server 语句的联合顺序

> ID：11312212
> 
> 赞同：0
> 
> 时间：2012-07-03T13:39:09.840
> 
> 标签：sql, sql-server, parameters, union

处理一些遗留代码并试图让一个设计不佳的数据库显示我们想要的我在表格上做了一个自联合以按特定顺序显示记录的交集 - 简化例如

```
SET @setOfRecords = 1234
SET @subsetOfRecords = 4567 

--Set A
SELECT * 
FROM results
WHERE 
    resultSet = @setOfRecords AND
    resultSubset = 4567

UNION

--Set B
SELECT * 
FROM results
WHERE 
    resultSet = @setOfRecords AND
    resultSubset <> 4567 
```

显示正确，即

```
Set A
Set B 
```

但是，如果我对子集 id 进行参数化，则此顺序会颠倒 - 例如

```
SET @setOfRecords = 1234
SET @subsetOfRecords = 4567 

--Set A
SELECT * 
FROM results
WHERE 
    resultSet = @setOfRecords AND
    resultSubset = @subsetOfRecords

UNION

--Set B
SELECT * 
FROM results
WHERE 
    resultSet = @setOfRecords AND
    resultSubset <> @subsetOfRecords 
```

显示不正确，即

```
Set B
Set A 
```

我知道这不是一个理想的方法，但是其他限制导致了这种实现的必要性。我的问题纯粹是关于为什么排序会受到 resultSubset ID 参数化的影响。

有任何想法吗？在 SQL Server 2008 上运行。

谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:42:34.283

你为什么期待任何特定的订单？你没有包含一个`ORDER BY`子句。因此，SQL Server 可以自由地以它认为最有效的任何顺序返回行。

如果您想要一个可预测的顺序，请包含一个`ORDER BY`子句。如果你不包括一个，你是在告诉 SQL Server 你不关心顺序。

在这种情况下，您可以比较实际的执行计划，您可能会发现至少有一个排序运算符有所不同。这可能是由于多种原因造成的，包括参数嗅探、统计等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:43:44.187

除非您添加 ORDER BY 子句，否则无法保证结果的顺序。您可以添加一列来指示其上的集合和顺序吗？

根据您的评论更新，您是说您不能做这样的事情吗？

```
SET @setOfRecords = 1234
SET @subsetOfRecords = 4567 

--Set A
SELECT * 
FROM (
    select 'A' as TheSet, results.*
    from results) A
WHERE 
    resultSet = @setOfRecords AND
    resultSubset = @subsetOfRecords

UNION

--Set B
SELECT * 
FROM (
    select 'B' as TheSet, results.*
    from results) B
WHERE 
    resultSet = @setOfRecords AND
    resultSubset <> @subsetOfRecords

ORDER BY TheSet 
```

# forms - jQuery - 刷新 DIV 的内容

> ID：11312218
> 
> 赞同：0
> 
> 时间：2012-07-03T13:39:30.990
> 
> 标签：forms, jquery, jquery-selectors

我在网页上的 jQuery 弹出窗口中有一个表单。jQuery 弹出窗口是一个名为 .vote-form 的 div，其中的表单名为“#form”。

提交表单后，jQuery 弹出窗口中的内容会变为成功消息。我需要这样做，以便在关闭 jQuery 弹出窗口时，删除成功消息并将表单刷新回原始表单，以便当再次打开 jQuery 弹出窗口时，表单再次显示而不是成功消息.

我试图获得这个结果的微弱尝试涉及在 jQuery 弹出窗口关闭时刷新整个页面。这部分具有所需的结果，但是当页面刷新时，大多数浏览器都会弹出一个窗口，询问用户是否要重新提交表单内容。我需要避免这种情况。

这是我处理关闭 .vote-form 的代码：

```
$('.vote-form-close').click(function(event) {
    event.stopPropagation();
    $(".vote-form").fadeOut("normal");
    $("#the-lights").fadeTo("slow",0);
    $("#the-lights").css({'display' : 'none'});
    window.location.reload();
}); 
```

我怀疑它可能只刷新 div，而不是整个页面，但我不知道如何完成它。

有人可以帮助我吗？

编辑：根据以下答案之一，我修改了我的代码。我还想展示用于打开表单的代码：

```
$('.vote').click(function() {
    $(this).parent().find(".vote-form").fadeIn("normal");
    $("#the-lights").css({'display' : 'block'});
    $("#the-lights").fadeTo("slow",0.7);
});
$('.vote-form-close').click(function(event) {
    event.stopPropagation();
    $(".vote-form").fadeOut("normal");
    $("#the-lights").fadeTo("slow",0);
    $("#the-lights").css({'display' : 'none'});
    $(".vote-form").load(window.location.href  + " .vote-form-container");
}); 
```

这是问题所在 - 我在页面上有 3 个表单。加载“vote-form-container”时，会将所有三个表单加载到 .vote-form 框中 - 如何修改代码以仅加载作为特定 .vote-form 一部分的 .vote-form-container - 我怀疑我必须使用 $(this) 但我尝试将代码修改为此但它没有工作：

```
$(".vote-form")(this).load(window.location.href  + " .vote-form-container"); 
```

我在想我做错了。

编辑 2：现在“关闭”按钮在第一次重新加载表单后不起作用：

```
$('.vote').click(function() {
    $(this).parent().find(".vote-form").fadeIn("normal");
    $("#the-lights").css({'display' : 'block'});
    $("#the-lights").fadeTo("slow",0.7);
});
$('.vote-form-close').click(function(event) {
    event.stopPropagation();
    $(".vote-form").fadeOut("normal");
    $("#the-lights").fadeTo("slow",0);
    $("#the-lights").css({'display' : 'none'});
    var current_form = $(this).closest('.vote-form'),
    index = $('.vote-form').index(current_form)
    current_form.load(window.location.href  + " .vote-form-container:eq(" + index + ")");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:43:29.493

不要重新加载页面，而是重定向您的用户：

```
window.location.href = window.location.href.toString() 
```

或者使用 ajax 加载新表单：

```
$(".vote-form").load(window.location.href  + " .vote-form"); 
```

有关 ajax 方法的更多信息，请参阅[api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

* * *

更新：

使用 jQuery，`index`您只能替换当前表单的功能。

```
 // I asume your button is in the form
 var current_form = $(this).closest('.vote-form'),
     index = $('.vote-form').index(current_form)

 current_form.load(window.location.href  + " .vote-form:eq(" + index + ")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:44:44.180

> ...我需要这样做，以便在关闭 jQuery 弹出窗口时，删除成功消息并将表单刷新回原始表单...

所以，如果我很好理解：

```
$('.vote-form-close').click(function(event) {
    event.stopPropagation();
    var vf = $(".vote-form");

    /* fadeout and remove inner content of the popup */
    vf.fadeOut("normal", function() { vf.empty(); });

    /* reset the form */
    document.getElementById('form').reset();
    ...
}); 
```

# r - 固定效应，工具变量回归，如 stata 中的 xtivreg（FE IV 回归）

> ID：11312219
> 
> 赞同：3
> 
> 时间：2012-07-03T13:39:32.907
> 
> 标签：r, stata, plm

有谁知道支持固定效应、工具变量回归的 R 包，如`xtivreg`stata（FE IV 回归）。是的，我可以只包含虚拟变量，但是当组数增加时，这将变得不可能。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T23:58:12.770

> 我可以只包含虚拟变量，但是当组数增加时就不可能了

“不可能”是指“计算上不可能”吗？如果是这样，请查看该`plm`软件包，该软件包旨在处理否则在计算上不可行的情况，并且允许使用固定效应 IV。

从小[插图](http://cran.r-project.org/web/packages/plm/vignettes/plm.pdf)开始[。`plm`](http://cran.r-project.org/web/packages/plm/vignettes/plm.pdf)它会很快弄清楚`plm`您是否在寻找什么。

**2018 年 12 月 3 日更新：**该`estimatr`软件包也可以满足您的需求。它比包更快更容易使用`plm`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T15:23:51.920

Try the ivreg command from the AER package.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:07:58.223

您可能知道，对于许多固定效应和随机效应模型{我应该从计量经济学和教育的角度提及 FE 和 RE，因为统计学中的定义不同}，您可以创建等效的 SEM（结构方程建模）模型。R中有两个包可用于此目的：1）SEM 2）LAVAAN

另一种解决方案是使用 SAS。在 SAS 中，您可以使用 Proc GLM，它使您能够使用“吸收”语句，该语句自动处理虚拟对象以及每次观察发现 (x - xbar)。

希望能帮助到你。

# wpf - XamDataGrid 字段/UnboundField 未显示

> ID：11312220
> 
> 赞同：0
> 
> 时间：2012-07-03T13:39:45.040
> 
> 标签：wpf, binding, mvvm, bindinglist, xamdatagrid

我有一个 XamDataGrid，我试图将它绑定到一个 BindingList 集合对象。

当我将 AutoGenerateColumns 设置为 true 时，

它显示了所有的行和列，

但是当我将其设置为 false 并使用 Field 或 UnboundField 定义列时，它只显示空白行。

我确定，我将每列绑定到 BindingList 对象内的正确字段名称。

我正在使用 WPF MVVM 架构！

想知道，如果有人以前遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:41:25.553

确保绑定列表中的对象具有带有 getter 的公共属性。

例如。

```
private string name;

public string Name
{
   get { return name; }
} 
```

如果您正在更新对象，请确保您`INotifyPropertyChanged`在设置器中实现并触发事件。

我也建议`ObservableCollection<T>`改用。

# java - 如何在 Java 中使用 JTable 合并单元格？

> ID：11312221
> 
> 赞同：3
> 
> 时间：2012-07-03T13:39:47.220
> 
> 标签：java, swing, jtable

谁能告诉我如何使用 Java 制作这张图片中的表格？

![在此处输入图像描述](../Images/0be0d7cc2a29b7071227ebb15e29e46d.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-03T14:44:01.740

您可以使用[Swingx 树表](http://swingx.java.net/)或实现[自己的树表单元格渲染器](http://java.sun.com/products/jfc/tsc/articles/treetable1/)

# ruby-on-rails-3 - rails中check_box的默认值，适用于失败的验证？

> ID：11312222
> 
> 赞同：1
> 
> 时间：2012-07-03T13:39:48.800
> 
> 标签：ruby-on-rails-3

我正在尝试在表单上设置复选框的默认值，以便除非用户未选中它，否则它将为真。通常，我可以在复选框上将 :checked 属性设置为 true

`f.check_box :send_emails, :checked => true`

但是，如果表单上的验证失败，并且用户取消选中该框，则在重新呈现“新”操作时将再次选中该框。即使重新渲染发生时用户对象上的值确实为假，因为我将“检查”属性设置为真，它会忽略该值。

为了解决这个问题，我将它放在控制器中以执行新操作 `@user.send_emails ||= true`

它看起来很丑，所以我正在寻找一种不同的方法。有人想出一些不同的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:14:25.257

您可以在迁移中设置默认值`:send_emails`to 。`true`

这是一个示例，创建迁移以更改字段的默认值：

```
class AddDefaultTrueToSendEmails < ActiveRecord::Migration
  def change
    change_column_default(:users, :send_emails, true)
  end
end 
```

# c# - 如何将 ref byte 转换为 byte[]？

> ID：11312223
> 
> 赞同：3
> 
> 时间：2012-07-03T13:40:01.577
> 
> 标签：c#, binary

有没有人有转换`ref byte`成的经验`byte[]`？

如果函数接受一个参数，如

```
void foo(ref byte buffer); 
```

那么就可以调用`foo`使用

```
void call_func()
{
    byte arr[] = new byte[10];
    foo(ref arr[0]);
} 
```

`buffer`问题是如何将参数重新转换`byte[]`为`foo`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T13:43:10.583

你没有。

为了避免固定整个数组，运行时可能只是复制您选择的单个元素（然后在调用后复制回来）。在这种情况下，您的函数将获取临时副本的地址，该地址与其他数组元素的地址无关。（好吧，[可能存在一些别名](http://ideone.com/EpzCF)问题，这种优化更有可能用于 pinvoke 和/或远程调用，其中别名分析更可行）

如果需要数组，请传递数组。

* * *

如果您不在乎它可能无法正常工作，您可以使用不安全代码来访问其他元素。

```
pinned( byte* p = &buffer ) {
    buffer[4] = 0;
} 
```

# excel - EXCEL VBA 将搜索结果存储在数组中？

> ID：11312226
> 
> 赞同：1
> 
> 时间：2012-07-03T13:40:09.117
> 
> 标签：excel, vba

正如标题所说，这是否可能以及如何？

我找到了一个`.Find`函数来搜索我想要的值的列，那么是否可以将所有地址保存在一个数组中？

代码如下所示：

```
Set wsRaw = Worksheets("raw_list")
Set oRange = wsRaw.Columns(PhaseCol)

SearchString = "control"

Set aCell = oRange.Find(What:=SearchString, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)

If Not aCell Is Nothing Then
    Set bCell = aCell
    FoundAt = aCell.Address
    Do While ExitLoop = False
        Set aCell = oRange.FindNext(After:=aCell)

        If Not aCell Is Nothing Then
            If aCell.Address = bCell.Address Then Exit Do
            FoundAt = FoundAt & ", " & aCell.Address
        Else
            ExitLoop = True
        End If
    Loop
Else
    MsgBox SearchString & " not Found"
End If

MsgBox "The Search String has been found these locations: " & FoundAt
Exit Sub 
```

至于现在我有一个`MsgBox`只是为了展示结果。这个想法是尽可能将结果存储在一个数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:46:47.663

是的，你可以这么做。看这个例子

```
Dim MyResults() As String
Dim n As Long

n = 1

'
'~~> rest of the code
'

If Not aCell Is Nothing Then
    Set bCell = aCell

    ReDim Preserve MyResults(n)
    MyResults(n) = aCell.Address
    n = n + 1

    Do While ExitLoop = False
        Set aCell = oRange.FindNext(After:=aCell)

        If Not aCell Is Nothing Then
            If aCell.Address = bCell.Address Then Exit Do
            ReDim Preserve MyResults(n)
            MyResults(n) = aCell.Address
            n = n + 1
        Else
            ExitLoop = True
        End If
    Loop
Else
    MsgBox SearchString & " not Found"
End If 
```

然后您可以稍后循环遍历数组以显示结果

```
For i = LBound(MyResults) To UBound(MyResults)
    Debug.Print MyResults(i)
Next i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T13:51:45.560

此代码用于更新单元格以间接引用其他工作表，它查找具有特定字符串的单元格，并更新这些单元格的值。（fsstring 存储第一个查找地址的地址，用于停止条件）。

```
Sub Update_Sheet_Reference()
Dim sCell As Variant, fsCell As Variant
sString = "_SearchText"
sCell = Range("A1").Address

While True
sCell = Cells.Find(What:=sString, After:=Range(sCell), LookIn:=xlValues, _
        LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
        MatchCase:=False, SearchFormat:=False).Address

Range(sCell).Value = Replace(Left(Range(sCell).Value, Len(Range(sCell).Value) - 1), sString, "") + sString + "!"
If fsCell = "" Then
    fsCell = sCell
ElseIf sCell = fsCell Then Exit Sub
End If
Wend
End Sub 
```

# iphone - 如何获取核心数据中多个子模型的最小值

> ID：11312231
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:40:19.853
> 
> 标签：iphone, ios, core-data, aggregation, nsfetchrequest

我有两个模型 Practice 和 PracticeRecord ，它们之间存在一对多关系。现在我想检索一组 Practice 对象，其关联的 practiceRecord 对象的数量最小但大于零。我写了下面的代码，但它没有工作，并且在获取请求时发生了异常。任何人都可以给出一个优雅的解决方案。提前致谢。

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Practice"];

request.predicate = [NSPredicate predicateWithFormat:@"practiceRecords.@count > 0"];    

[request setResultType:NSDictionaryResultType];

NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"practiceRecords.@count"];
NSExpression *minExpression = [NSExpression expressionForFunction:@"min:" arguments:[NSArray arrayWithObject:keyPathExpression]];
NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
[expressionDescription setName:@"minPracticeRecordTimes"];
[expressionDescription setExpression:minExpression];
[expressionDescription setExpressionResultType:NSDecimalAttributeType];
[request setPropertiesToFetch:[NSArray arrayWithObject:expressionDescription]];

NSError *error = nil;
NSArray *objects = [context executeFetchRequest:request error:&error];
if (objects == nil) {
    // Handle the error.
}
else {
    if ([objects count] > 0) {
        NSLog(@"Minimum practice record times: %@", [[objects objectAtIndex:0]
                                    valueForKey:@"minPracticeRecordTimes"]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:45:54.193

我猜这个问题是`practiceRecords.@count`在关键路径中使用聚合函数 ()

如果您考虑这将生成的 SQL，它将是这样的：

```
SELECT min(count(practiceRecords)) AS minPracticeRecordTimes
FROM Practice
WHERE count(practiceRecords) > 0 
```

这当然是无效的。

如果您需要这样做，可能会对您的实体进行一些反规范化，并向 中添加一个`count`字段`Practice`，每次`PracticeRecord`添加或删除时都会更新该字段，然后您可以使用直接获取请求。

# vb.net - 如何以编程方式将控件添加到 VB.NET 中的窗体

> ID：11312239
> 
> 赞同：15
> 
> 时间：2012-07-03T13:41:07.767
> 
> 标签：vb.net

我正在处理[Visual Basic 2010 Express Edition](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express#Visual_Basic_Express)中的清单。我不知道库存所需的字段数量。我希望我可以在程序中使用 for 循环添加文本框/复选框/按钮。有没有办法在不使用工具箱的情况下向表单添加控件？

我可以通过在程序中实例化它们来添加控件吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-03T13:44:22.750

是的。

```
Private Sub MyForm_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim MyTextbox as New Textbox
    With MyTextbox
       .Size = New Size(100,20)
       .Location = New Point(20,20)
    End With
    AddHandler MyTextbox.TextChanged, AddressOf MyTextbox_Changed
    Me.Controls.Add(MyTextbox)

'Without a help environment for an intelli sense substitution
'the address name and the methods name
'cannot be wrote in exchange for each other.
'Until an equality operation is prior for an exchange i have to work
'on an as is base substituted.

End Sub

Friend Sub MyTextbox_Changed(sender as Object, e as EventArgs)
   'Write code here.
End Sub 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T05:09:36.803

```
Dim numberOfButtons As Integer
Dim buttons() as Button

Private Sub MyForm_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Redim buttons(numberOfbuttons)
    for counter as integer = 0 to numberOfbuttons
        With buttons(counter)
           .Size = (10, 10)
           .Visible = False
           .Location = (55, 33 + counter*13)
           .Text = "Button "+(counter+1).ToString ' or some name from an array you pass from main
           'any other property
        End With
        '
    next
End Sub 
```

如果您想检查哪些文本框有信息，或者单击了哪个单选按钮，您可以在 OK 按钮中遍历循环。

如果您希望能够单击单个数组项并让它们响应事件，请在 Form_load 循环中添加以下内容：

```
AddHandler buttons(counter).Clicked AddressOf All_Buttons_Clicked 
```

然后创建

```
Private Sub All_Buttons_Clicked(ByVal sender As System.Object, ByVal e As System.EventArgs)
     'some code here, can check to see which checkbox was changed, which button was clicked, by number or text
End Sub 
```

你打电话时：`objectYouCall.numberOfButtons = initial_value_from_main_program`

```
response_yes_or_no_or_other = objectYouCall.ShowDialog() 
```

对于单选按钮、文本框、相同的故事、不同的结局。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-10T14:51:14.330

```
Public Class Form1
    Private boxes(5) As TextBox

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim newbox As TextBox
        For i As Integer = 1 To 5 'Create a new textbox and set its properties26.27.
        newbox = New TextBox
        newbox.Size = New Drawing.Size(100, 20)
        newbox.Location = New Point(10, 10 + 25 * (i - 1))
        newbox.Name = "TextBox" & i
        newbox.Text = newbox.Name   'Connect it to a handler, save a reference to the array & add it to the form control.
        AddHandler newbox.TextChanged, AddressOf TextBox_TextChanged
        boxes(i) = newbox
        Me.Controls.Add(newbox)
        Next
    End Sub

    Private Sub TextBox_TextChanged(sender As System.Object, e As System.EventArgs)
        'When you modify the contents of any textbox, the name of that textbox
        'and its current contents will be displayed in the title bar

        Dim box As TextBox = DirectCast(sender, TextBox)
        Me.Text = box.Name & ": " & box.Text
    End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T11:11:47.107

要将控件动态添加到窗体，请执行以下代码。在这里，我们正在创建要动态添加的文本框控件。

```
Public Class Form1
    Private m_TextBoxes() As TextBox = {}

    Private Sub Button1_Click(ByVal sender As System.Object, _
                              ByVal e As System.EventArgs) _
                              Handles Button1.Click

        ' Get the index for the new control.
        Dim i As Integer = m_TextBoxes.Length

        ' Make room.
        ReDim Preserve m_TextBoxes(i)

        ' Create and initialize the control.
        m_TextBoxes(i) = New TextBox
        With m_TextBoxes(i)
            .Name = "TextBox" & i.ToString()
            If m_TextBoxes.Length < 2 Then
                ' Position the first one.
                .SetBounds(8, 8, 100, 20)
            Else
                ' Position subsequent controls.
                .Left = m_TextBoxes(i - 1).Left
                .Top = m_TextBoxes(i - 1).Top + m_TextBoxes(i - _
                    1).Height + 4
                .Size = m_TextBoxes(i - 1).Size
            End If

            ' Save the control's index in the Tag property.
            ' (Or you can get this from the Name.)
            .Tag = i
        End With

        ' Give the control an event handler.
        AddHandler m_TextBoxes(i).TextChanged, AddressOf TextBox_TextChanged

        ' Add the control to the form.
        Me.Controls.Add(m_TextBoxes(i))
    End Sub

    'When you enter text in one of the TextBoxes, the TextBox_TextChanged event
    'handler displays the control's name and its current text.
    Private Sub TextBox_TextChanged(ByVal sender As  _
    System.Object, ByVal e As System.EventArgs)
        ' Display the current text.
        Dim txt As TextBox = DirectCast(sender, TextBox)
        Debug.WriteLine(txt.Name & ": [" & txt.Text & "]")
    End Sub
End Class 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-23T15:04:27.857

您可以获得您的 Button1 位置，然后每次单击它时增加 Y 值。

```
Public Class Form1
    Dim BtnCoordinate As Point
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim btn As Button = New Button
        BtnCoordinate.Y += Button1.Location.Y + 4
        With btn
            .Location = New Point(BtnCoordinate)
            .Text = TextBox1.Text
            .ForeColor = Color.Black
        End With
        Me.Controls.Add(btn)
        Me.StartPosition = FormStartPosition.CenterScreen
    End Sub

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Button1Coordinate = Button1.Location
    End Sub
End Class 
```

# linq - 将 SQL 子选择转换为 LINQ

> ID：11312240
> 
> 赞同：2
> 
> 时间：2012-07-03T13:41:10.757
> 
> 标签：linq, tsql

我有一个 SQL 子选择查询，它将检索父记录的最新历史记录。

我无法将以下内容转换为 LINQ：

```
SELECT *  
FROM ProductRequests INNER JOIN ProductRequestHistory  
ON ProductRequests.ID = ProductRequestHistory.ProductRequestsID
AND ProductRequestHistory.ID = (SELECT TOP 1 ProductRequestHistory.ID  
    FROM ProductRequestHistory 
    WHERE ProductRequestHistory.ProductRequestsID = ProductRequestHistory.ID  
    ORDER BY ProductRequestHistory.DateCreated DESC) 
```

这是我尝试过的，但无法编译：

```
from productrequests in db.ProductRequests
join productrequesthistories in db.ProductRequestHistories
  on new { productrequests.ID, Column1 = (Int32?)Convert.ToInt32(
((from productrequesthistories0 in db.ProductRequestHistories
where
  productrequesthistories0.ProductRequestsID == productrequesthistories0.ID
orderby
  productrequesthistories0.ID descending
select new {
  productrequesthistories0.ID
}).Take(1).First().ID)) }
equals new { ID = (System.Int32?)productrequesthistories.ProductRequestsID, Column1 =    productrequesthistories.ID }
select new {
 productrequests.ID,
 productrequests.ProductRequestNumber,
 productrequests.ProjectID,
 Column1 = productrequesthistories.ID,
 productrequesthistories.Title,
 productrequesthistories.Requester,
 productrequesthistories.TFSNumber,
 productrequesthistories.UseCase,
 productrequesthistories.RequestType,
 productrequesthistories.FunctionalModule,
 productrequesthistories.Description,
 productrequesthistories.Reason,
 productrequesthistories.Priority,
 productrequesthistories.Status,
 productrequesthistories.Release,
 productrequesthistories.Estimate,
 productrequesthistories.Wags,
 productrequesthistories.Confidence,
 productrequesthistories.Notes,
 productrequesthistories.RequirementStatus,
 productrequesthistories.RequirementDoco,
 productrequesthistories.AlphaRequired,
 productrequesthistories.Sprint,
 productrequesthistories.Created,
 productrequesthistories.DateChanged,
 productrequesthistories.Checksum,
 productrequesthistories.ProductRequestsID
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:48:30.113

This in **VB.NET**

```
Dim result = From request in ProductRequests
             Join request2 in ProductRequestHistory
             On request.ID = request2.ProductRequestsID
             And request2.ID = (From request3 in ProductRequestHistory
                                Where request3.ProductRequestsID = request3.ID
                                Order by request3.DateCreated desc
                                Select request3.ID).First()
             Select New With {
                   .request = request
                   .history = request2
             } 
```

In **C#**

```
var result = (from request in db.ProductRequests
              Join request2 in ProductRequestHistory
              On request.ID == request2.ProductRequestsID
              && request2.ID == (from request3 in ProductRequestHistory
                                 where request3.ProductRequestsID == request3.ID
                                 orderby request3.DateCreated desc
                                 select request3.ID).First()
              select new {
                     request = request
                     history = request2
              }
             ) 
```

That should do the trick.

Also, in the original SQL statement, I raccomend to change the

```
AND ProductRequestHistory.ID = (SELECT TOP 1 ProductRequestHistory.ID ...... 
```

part to a `WHERE` clause, since it's not necessary to the `JOIN`.

So, in the LINQ you can use

```
Where request2.ID = (From request3 in ProductRequestHistory ...... 
```

Moreover, you can optimize the query pre-calculating the `TOP 1 ID` value:

```
top1id = (From request3 in ProductRequestHistory
          Where request3.ProductRequestsID = request3.ID
          Order by request3.DateCreated desc
          Select request3.ID).First() 
```

And then use `Where request2.ID = top1id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:58:22.347

如果我没有记错的话：

```
 var rusult = ProductRequests.Join(ProductRequestHistory, 
                                 p => p.ID,
                                 d => d.ProductRequestsID,
                                 (p, d) => p).where(w => w.Id == ProductRequestHistory.OrderByDescending(o=>o.DateCreated).FirstOrDefault(s=>s.ProductRequestsID == s.ID)); 
```

# video - 从 Python 提高 OpenCV 中的相机捕获分辨率

> ID：11312246
> 
> 赞同：5
> 
> 时间：2012-07-03T13:41:39.980
> 
> 标签：video, opencv, resolution, capture

它的 2012 和 cv2 就在这里。这篇旧文章向您展示了如何在 opencv 中更改 1.1 [摄像头捕获的 opencv](https://stackoverflow.com/questions/14287/increasing-camera-capture-resolution-in-opencv)版本中的摄像头分辨率， 但这些功能在 cv2 或其随附的 cv2.cv 模块中不可用（opencv 2.4.1 是最新的）

有谁知道如何从 python 为 opencv 更改相机分辨率？我不是在寻找一个 c++ 解决方案，而是一个可以从提供 cv2 的 python (2.7) 访问的解决方案。导入一个单独的模块是可以接受的。

如其他地方所述，VideoCapture.set 函数不起作用。

# ios - 尝试将 Magical Record 与 Kiwi 一起使用时构建测试时出错

> ID：11312247
> 
> 赞同：1
> 
> 时间：2012-07-03T13:41:43.593
> 
> 标签：ios, core-data, sentestingkit, magicalrecord

我在让 Magical Record 与基于 Kiwi 的测试目标很好地配合时遇到问题。Kiwi 已按照 GitHub wiki 上的流程进行设置；Magical Record 在其他目标上运行良好，我在每个测试文件的开头都包含 CoreData+MagicalRecord 标头

构建失败，在 NSObject+MagicalDataImport 中有 4 个错误 - 它没有将 NSAttributeDescription 识别为一种类型。

我可以通过显式包含 Core Data 标头来解决此问题，但这会引发 NSPersistentStore、NSPersistentStoreCoordinator、NSManagedObjectContext 和 iCloud 上的类别的另一系列错误。

我猜这与框架包含在测试目标中的方式或顺序有关 - 但这些看起来与项目中的其他目标相同，工作正常。

有谁知道让Magical Record与Kiwi很好玩的过程*应该*是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:57:16.903

我不完全确定我做了什么特别的事情，但我有它的工作。我所做的只是使用 Cocoapods。

# visual-studio-2010 - 我想在调试 .ocx 时在 Visual Studio 2010 中启动 VB 项目

> ID：11312248
> 
> 赞同：0
> 
> 时间：2012-07-03T13:41:45.640
> 
> 标签：visual-studio-2010, visual-c++

好吧，我正在 Visual Studio 2010 中编写一个 ActiveX 组件并使用 MFC 向导。当我调试解决方案时，我想启动将使用该 .ocx 的实际程序（它是 VS 2010）。在 VC++ 6.0 中，我可以通过以下步骤来做到这一点：

1）单击菜单栏中的项目 2）在下拉菜单中选择设置 3）选择调试选项卡：使用类别作为常规 我将 VB.exe 的路径放在调试会话期间可执行的框中，在程序参数中我将编写路径使用上述.ocx 的VB 项目。

我想为 Visual Studio 2010 中的 MFC 向导做同样的事情。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:47:15.857

如果您右键单击 ActiveX 项目，选择“属性”，然后在“配置属性|调试”下，您可以设置要启动的可执行文件的名称（“命令”）及其命令行参数（“命令参数”） .

你应该选择你的VB宿主程序的EXE（我不是100%确定你需要启动什么程序）

另一种方法是启动使用 OCX 的程序，然后将调试器附加到它：在主菜单中选择“调试|附加到进程...”，然后在对话框中选择进程。

# sequelize.js - One to Many Associate objects with sequelize

> ID：11312250
> 
> 赞同：0
> 
> 时间：2012-07-03T13:41:57.057
> 
> 标签：sequelize.js

If I have two objects Project and Task associated with one-to-many relation

```
 Project.hasMany(Task)     
 var Pro1 = Project.build({...}).save(); 
```

Now when I set a new task to one person after saving it

```
var task = Task.build({ ... }).save().success(function(t1)){
     project.setTasks([t1]).success(function() {
            // saved!
      })
}) 
```

the first task works fine, but with the second task I get the following error

```
TypeError: Cannot read property 'omitNull' of undefined
    at  {myhome}/node_modules/sequelize/lib/associations/has-many-single-linked.js:21:65 
```

How can add more tasks to the previous, and be able to get them later with

```
Pro1.getTASKs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:22:06.420

sadly your code is kinda strange, as you are using different variable names in those three code examples. However, this is how you would do it: [https://gist.github.com/3040391](https://gist.github.com/3040391)

In order to add other tasks you can do `project.addTask(myNewTask)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:05:42.667

this issue is fixed in 1.5.0-beta :) go for it!

# ruby-on-rails - 如何在rails中的ruby上使用另一个文件中的变量？

> ID：11312257
> 
> 赞同：0
> 
> 时间：2012-07-03T13:42:11.533
> 
> 标签：ruby-on-rails, ruby

我正在尝试在我的程序的所有文件中使用我的变量。这是我想做的一个例子。

```
 main.rb
 Class1
 def self.test1
 puts "class 1" if @@debug
  end
 end
 @@ debug = true

 class.test1
 class.test2

 class2.rb
 Class2
 def self.test2
 puts "test2" if @@debug
  end
 end 
```

我真的希望社区足够清楚，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:46:34.490

你想要一个全局变量或常量。您可以创建自己的，但 Ruby 方便地附带了一个内置的`$DEBUG`全局变量。当您指定`-d`选项时`ruby`，`$DEBUG`将是`true`，否则，`false`。

如果类在多个文件中，请将其放入包含其他类的文件中：

```
DEBUG=$DEBUG 
```

在其他文件中，`DEBUG`用于调试，而不是`$DEBUG`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:46:58.847

您可以创建一个 getter 方法来获取 class_variable

```
def self.get_debug
  @@debug
end 
```

但是，rails 提供了一个名为 cattr_accessor 的方法 [http://apidock.com/rails/Class/cattr_accessor](http://apidock.com/rails/Class/cattr_accessor) 这将允许您在类之外设置和获取类变量

IE `Class1.debug = false`

# magento-1.6 - Magento：如何在登录时隐藏链接

> ID：11312263
> 
> 赞同：-6
> 
> 时间：2012-07-03T13:42:24.653
> 
> 标签：magento-1.6

> **可能重复：**
> [在 Magento 1.6.2 中登录/注销时如何从 top.liknks 中删除链接](https://stackoverflow.com/questions/10754281/how-to-remove-links-from-top-liknks-when-loggin-in-out-in-magento-1-6-2)

当用户登录时，我希望隐藏注册链接。有人可以指导我吗？我是新手。

唯一想到的是`Mage::getSingleton('customer/session')->getCustomer();`，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:42:46.010

您需要使用布局文件使用`<customer_logged_in>`标签来解决此问题。

看看你的 customer.xml，你通常会有：

```
<customer_logged_in>
    <reference name="topLinks">
        <action method="addLink" translate="label title" module="customer"><label>Log Out</label><url helper="customer/getLogoutUrl"/><title>Log Out</title><prepare/><urlParams/><position>100</position></action>
    </reference>
</customer_logged_in> 
```

和 的等价物`<customer_logged_out>`。这应该将您带到您需要的地方。

如果您真的想在`phtml`文件中执行此操作，请查看

```
$this->helper('customer')->isLoggedIn(); 
```

# javascript - javascript：令人惊讶的操作顺序

> ID：11312266
> 
> 赞同：4
> 
> 时间：2012-07-03T13:42:34.673
> 
> 标签：javascript

我最近编写的代码没有像我预期的那样工作，它是：

```
message = 'Thank You';
type = 'success';

message = message || type == 'success' ? 'Success' : 'Error'; 
```

对我来说这是个新闻，最后`message`设置为**“成功”**。

我认为，由于 message 的真实值是，**的**`true`右侧`or`不会评估。

 **OR右侧的括号解决了这个问题，但我仍然不明白为什么要*评估右侧*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T13:44:02.470

您的代码相当于

```
message = ( message || type == 'success' ) ? 'Success' : 'Error'; 
```

这就是为什么。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T13:48:47.203

的值`message`不会以`"success"`but结束`"Success"`。

运算符的`?`优先级低于`||`运算符，因此代码计算为：

```
message = (message || type == 'success') ? 'Success' : 'Error'; 
```

`message || type == 'success'`will的结果是`"Thank You"`，当它被评估为`?`运算符的布尔值时，结果是`true`。**

# javascript - 生成名称的 Javascript 覆盖函数

> ID：11312278
> 
> 赞同：0
> 
> 时间：2012-07-03T13:43:14.857
> 
> 标签：javascript, jquery, function

我需要覆盖（丰富）一个 Javascript 函数。问题是函数是自动生成的：

```
var original_function = getFunction('someID'); // eval('someID'); 
```

我的代码将是这样的：

```
var f = function(arg) { 
 do_some_stuff(); 
 original_function(arg);  
 do_another_stuff(); 
} 
```

现在，当其他部分代码调用时`getFunction('someID')`，`f('someID')`将返回。

当我们知道它的名称或者我们只有一个函数对象时，如何覆盖原始函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:03:25.973

```
function someFunc (arg) { alert(arg)}

function injectFunc(original, injection, inject_after) {
if(typeof original === "string") original = window[original];
return function() {
    if(!inject_after) injection.apply(this, arguments);
    var result = original.apply(this, arguments);
    if(inject_after) injection.apply(this, arguments);
    return result;
    }
}

// insert before
someFunc = injectFunc(someFunc, function(arg) {alert("Before" + arg)});

// or with string func name
someFunc = injectFunc('someFunc', function(arg) {alert("Before" + arg)});

// and after
someFunc = injectFunc(someFunc, function(arg) {alert("After" + arg)}, true);

// and with olny func name 
window['someFunc'] = injectFunc('someFunc', function(arg) {alert("After" + arg)}, true); 
```

所有注射都存储在函数中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:46:10.083

如果您知道该函数并且它在全局范围内，则可以使用括号表示法来引用它。

```
var orgFunction = window["functionName"]; 
```

所以`getFunction`看起来像

```
function getFunction (name) {\
     return window[name];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:54:27.567

存放并更换；

```
//original
function someId(arg) { alert(arg); }

//replace    
(function() {
    var original_function = window["someId"];
    window.someId = function(arg) { 
       alert("new");
       return original_function.apply(this, arguments);
    }
})();

//call     
someId("hello"); 
```

# google-chrome - Chrome 扩展 setTimeout 和消息

> ID：11312284
> 
> 赞同：0
> 
> 时间：2012-07-03T13:43:28.013
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试创建（或者更确切地说是学习）Chrome 扩展开发。我正在尝试在弹出页面和背景页面之间实现一个简单的任务。到目前为止，我已经准备好页面，并且弹出窗口可以将消息发送到后台和后台页面回复。我目前迷失在创建我想要的行为：

*   让弹出窗口向后台页面发送一个数字
*   在该号码期间运行后台页面
*   倒计时完成后，在完成时将消息返回弹出窗口。

此时，后台进程立即发送响应，我确定我没有做对。这是一些代码

弹出：

```
chrome.extension.sendMessage({
method: "popup",
message: "remindMe",
now: parseInt(localStorage.timeNow),
timeToRemindIn: 5
 },

  function(response) {
    console.log("sendMessage");
console.log(response.farewell);
//alert(response.farewell);
console.log("sendMessage after"); 
```

背景：

```
chrome.extension.onMessage.addListener(
      function(request, sender, sendResponse) {
        //console.log(sender.tab ? "from a content script:" + sender.tab.url : "from the extension");

        if (request.message == "remindMe") {
            startTime();
            if(localStorage.timeToRemindIn > now) {
                sendResponse({farewell: "reminder to check"});
            }
        } else {
            sendResponse({farewell: "hai hai"});
        }
     });

    function startTime() {
        now = parseInt(now) + 1;
        if(localStorage.timeToRemindIn > now) {
            console.log("Reminder to check this tab Yo! " + now);
            return;
        }
        if (localStorage.timeToRemindIn <= now) {
            timerId = window.setTimeout(startTime, pollInterval);
        }
    } 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:54:16.987

`startTime()`不会以任何方式停止执行， setTimeout 调用是异步的，因此函数将立即返回，因此消息将始终立即发送回。

您需要重构，以便`sendResponse`从给定的函数内部进行调用`setTimeout`。

# jquery - 选择列表中的元素jQuery

> ID：11312285
> 
> 赞同：0
> 
> 时间：2012-07-03T13:43:29.227
> 
> 标签：jquery

我试图选择`li`列表第二级的所有元素，向它们添加特殊类。我做了几次尝试都没有成功。所以`li`我瞄准的元素是喜剧、悲剧和历史下面的水平。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('li').next().addClass('special');
    });
</script>

<style type="text/css">
    .special {
        font-style: italic;
    }
</style>

<body>
    <div id="container">
        <h2>Selected Shakespeare Plays</h2>
        <ul id="selected-plays" class="clear-after">
            <li>Comedies
                <ul>
                    <li>
                        <a href="/asyoulikeit/">As You Like It</a>
                    </li>
                    <li>All's Well That Ends Well</li>
                    <li>A Midsummer Night's Dream</li>
                    <li>Twelfth Night</li>
                </ul>
            </li>
            <li>Tragedies
                <ul>
                    <li>
                        <a href="hamlet.pdf">Hamlet</a>
                    </li>
                    <li>Macbeth</li>
                    <li>Romeo and Juliet</li>
                </ul>
            </li>
            <li>Histories
                <ul>
                    <li>Henry IV (
                        <a href="mailto:henryiv@king.co.uk">email</a>)
                        <ul>
                            <li>Part I</li>
                            <li>Part II</li>
                        </ul>
                    </li>
                    <li>
                        <a href="http://www.shakespeare.co.uk/henryv.htm">Henry V</a>
                    </li>
                    <li>Richard II</li>
                </ul>
            </li>
        </ul>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:45:45.313

试试这个：

```
<script type="text/javascript">
        $(document).ready(function(){
            $('#selected-plays > li > ul > li').addClass('special');
        });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:49:58.333

或者

```
$('#selected-plays li').find('li').addClass('special'); 
```

有很多方法可以在集合中找到孩子

# python - pdf/djvu/or-other-image-format 文本重排的开源项目——将书籍格式化为 kindle 或其他电子阅读器

> ID：11312291
> 
> 赞同：3
> 
> 时间：2012-07-03T13:43:55.573
> 
> 标签：python, pdf, kindle

自从我购买了自己的 kindle4 以来，我一直在寻找可以帮助我阅读有关它的科学论文或漫画的软件。到目前为止，我的搜索已经产生了[k2pdfopt](http://www.willus.com/k2pdfopt/)的论文
和[Briss](http://briss.sourceforge.net/)的漫画——实际上只有漫画。
第一个链接，即 k2pdfopt 上的页面提到了一些非常好的软件，可以将 pdf 的某些部分裁剪为另一个。请注意，k2pdfopt 与这些 pdf 裁剪软件（包括 Briss）在不同的线路上运行。它将单词、方程式等识别为以图像形式重排以适合电子阅读器的文本块。Reflowable Document 的 Wikipedia 页面 (http://en.wikipedia.org/wiki/Reflowable_document) 提到了由 Xerox PARC 设计的实验软件，其工作方式与 k2pdfopt 类似。
因此，我的问题是，**是否存在以类似方式解决问题的现有开源项目（或更多）——即将单词级别的文本识别为图像，然后使用算法对这些图像进行排版。**

*   k2pdfopt 生成一个 exe 文件 - 还没有用 wine 尝试过。
*   尽管该软件是高度可定制的 - 即可以向它建议字间距和行间距，但没有用户界面，并且所有页面都必须以相同的方式处理。因此，无法识别目录，例如，或适当地添加脚注 - 可能需要一些人为干预。
*   因此需要一个新项目（如果这样的项目不存在）。
*   **我想使用 python 来完成这项工作，但通常的 pdf 相关模块 ReportLab 和 pyPdf 无法导入现有的 pdf 页面。有人可以帮忙搜索这样一个 python 模块吗？**

# html - 如何将无效的 XHTML 网站保存为有效的 XML

> ID：11312294
> 
> 赞同：1
> 
> 时间：2012-07-03T13:44:01.230
> 
> 标签：html, xml, macos, dom, xhtml

有一个网站是*无效*的XHTML（缺少一些结束标签）。

我想用 XSLT 处理它的内容，但因此，我需要一个有效的 XML 输入。

是否可以将浏览器从无效 XHTML 输入创建的 DOM 文档保存为有效的 XML/XHTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:49:44.783

是的。有几个库可以处理无效标记并将其作为有效的 xml/xhtml 返回。其中之一是整洁的[http://tidy.sourceforge.net/](http://tidy.sourceforge.net/)

如果您可以访问该网站，则可以将输出打印到缓冲区中，然后对其进行清理...顺便说一句：有效的 xhtml 也是有效的 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:51:31.683

如果您使用 .NET 作为服务器端技术，您可以尝试[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。它可以加载无效的 HTML/XHTML 并将其转换为有效的 XML。

# android - 对已知分辨率进行进一步的 Jpeg 压缩？可能存储标题？

> ID：11312297
> 
> 赞同：0
> 
> 时间：2012-07-03T13:44:29.130
> 
> 标签：android, jpeg

我的应用程序需要将非常小的 jpeg 文件（小于 2.5KB）存储为 QR 码中的数据（不能成为链接）。质量和尺寸都是一个问题。我可以保存的任何字节都可能意味着我可以使 QR 码更易于阅读。幸运的是，它们都具有标准分辨率（160x240）和色深（24 位）。

我有一个想法，即从 JPEG 文件本身中取出部分标头，然后让应用程序将标头重新添加到数据数组中，这样可以节省 600 字节（哇）。到目前为止，我进行压缩的方式是保留一个“黄金标准文件”并使用 Q = 80-10% 压缩该文件，直到它适合 2.5KB。

因为不同的压缩比意味着不同的标头，所以我的想法是让最终的压缩图像通过另一个已知的标准压缩通道。但是，如果“标准压缩”大于图像所采用的原始压缩，则尺寸实际上可能大于最终压缩图像。

有没有做这样的事情的标准方法？我觉得我可能正在做某事，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:48:17.957

我最终做的是多级压缩，我存储了标题（D0-DB）和霍夫曼表（C4）。使用简单的替换算法，我可以通过这种方式节省大约 550 个字节。它不是 100% 理想的，但也不是一半差。我丢失了大约 50 个字节，但以提高质量和应用程序内存大小为代价的折衷是值得的。

为了更容易扫描，我在替换算法之前将最大大小减小到 1.9KB。

# c# - 将 TextBox 缩放到其中的文本

> ID：11312301
> 
> 赞同：0
> 
> 时间：2012-07-03T13:44:38.773
> 
> 标签：c#, .net, wpf

我想制作一个带有发光边框的 TextBox。

TextBox 应该尽可能大，以便包含其中的所有文本。但没有更大。然后边框应该围绕文本。

我使用 3x3 Grid 使边框居中于容器的中间。只要文本足够短，居中就可以正常工作。但是当你输入一个很大的长文本时，ViewBox 并不会真正缩小 TextBox 的大小。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Viewbox Stretch="Uniform" Grid.Row="1" Grid.Column="1" >
        <Border BorderBrush="#bab98b" BorderThickness="7" CornerRadius="15" VerticalAlignment="Center" HorizontalAlignment="Center" Background="Black">
            <TextBox Name="WaitMessage" Text="A Message" HorizontalAlignment="Center" Foreground="White" Background="Black" Padding="20" FontSize="60" Width="Auto"/>
        </Border>
    </Viewbox>
</Grid> 
```

我认为 Viewbox 应该根据父容器缩放内容以适应可用的尺寸。但是发生的情况是，如果我输入一个很长的文本，它会在最后剪辑。

简而言之：我希望文本均匀地缩小到可用大小，但永远不会超出需要的大小。

有人可以解释我做错了什么吗？

编辑：好的，如果我将 10* 作为中间列和行的宽度和高度，则文本将始终留在边框内。那么问题是 ViewBox 会使文本增长，当它只是一个小文本时。我认为我不能为此目的使用 maxHeight ，因为我只是不想让它放大文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:02:42.917

我不知道这对于您的其余代码有多大的可扩展性，但是要使文本位于控件的中心，您可以执行以下操作：

```
<Grid>
      <Border BorderBrush="#bab98b" BorderThickness="7" CornerRadius="15" VerticalAlignment="Center" HorizontalAlignment="Center" Background="Black">
          <TextBox Name="WaitMessage" Text="A Message" HorizontalAlignment="Center" Foreground="White" Background="Black" Padding="20" FontSize="60" Width="Auto"/>
      </Border>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:01:47.917

使用[Viewbox.StretchDirection 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.stretchdirection.aspx)。[`StretchDirection.DownOnly`](http://msdn.microsoft.com/en-us/library/system.windows.controls.stretchdirection.aspx)会做你想做的。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="10*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="10*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Viewbox Grid.Row="1" Grid.Column="1"
             Stretch="Uniform" StretchDirection="DownOnly">
        <TextBox Text="A Message" FontSize="60" />
    </Viewbox>
</Grid> 
```

# c - strstr 有这个重载吗？

> ID：11312304
> 
> 赞同：2
> 
> 时间：2012-07-03T13:44:46.567
> 
> 标签：c, opengl

在 OpenGL 第 4 版中，第 70 页上的示例读取

```
//returns space-delimited names of all extensions supported by the OpenGLDriver
const char *extensions = glGetString(GL_EXTENSIONS);
if(strstr(extensions, "WGL_EXT_swap_control" != NULL))
{
   //...
} 
```

这是o型吗？还是我错过了一个`#include`？我找不到`strstr()`支持这个调用的重载。我认为应该是

```
if(strstr(extensions, "WGL_EXT_swap_control") != NULL)
{
  //...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T13:46:03.240

是的，明显的错字。你的代码是正确的。C 不支持重载。

该函数的原型必须是`int strstr(const char *s, int h);`为了编译本书的代码，而这（正如 Jonathon Reinhart 指出的那样）没有多大意义；如何在字符串中查找整数？

**更新**：这里有一个关于“示例”代码显然无法编译的书籍的质量感觉的教训。

**更新2**：正如forsvarir指出的那样，您可以让C编译器编译它，在这种情况下，它会将比较产生的整数视为字符串指针，并`strstr()`使用它运行。在许多操作系统上，它会立即崩溃，并且会在所有系统上调用未定义的行为。

# asp.net-mvc - ASP.NET MVC2 中的水晶报表视图

> ID：11312307
> 
> 赞同：0
> 
> 时间：2012-07-03T13:44:55.497
> 
> 标签：asp.net-mvc, asp.net-mvc-2, crystal-reports, report, webforms

我正在处理一个`ASP.NET MVC 2`使用经典`ASP.NET WebForm`连接来显示 Crystal Report Viewer 的项目。

这一切都很好。问题是，在我在`CrystalReportViewer`实例上设置参数并渲染它之后，显示的报告总是表明参数值丢失。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:01:27.423

我不知道它是否会对您有所帮助，但我建议您使用视图上的服务器控件返回一个文件。您可以使用水晶报表导出 PDF 或 DOC 文件并将其响应给客户端。您可以尝试使用此自定义操作结果来水晶报表：

```
public class CrystalReportResult : FileResult
{
    private const string CONTENTTYPE = "application/pdf";
    private const int BUFFERSIZE = 0x1000;

    private Stream FileStream { get; set; }
    private DataSet DataSource { get; set; }
    private string NomeArquivoRpt { get; set; }
    private string Diretorio { get; set; }

    public FormaAbrirPdf AbrirComo { get; set; }

    public CrystalReportResult( string nomeArquivoRpt, DataSet dataSource )
        : base( CONTENTTYPE )
    {
        DataSource = dataSource;
        NomeArquivoRpt = Path.Combine( AppDomain.CurrentDomain.BaseDirectory, nomeArquivoRpt );
        Diretorio = Path.Combine( AppDomain.CurrentDomain.BaseDirectory, "Temp" );
        AbrirComo = FormaAbrirPdf.ComoDownload;

        if ( !Directory.Exists( Diretorio ) )
        {
            Directory.CreateDirectory( Diretorio );
        }
    }

    public override void ExecuteResult( ControllerContext context )
    {
        var response = context.HttpContext.Response;
        var arquivoPdf = Path.Combine( Diretorio, String.Format( "{0}.pdf", Guid.NewGuid( ) ) );
        var relatorioCrystal = new ReportClass { FileName = NomeArquivoRpt };

        relatorioCrystal.Load( );
        relatorioCrystal.SetDataSource( DataSource );

        if ( AbrirComo == FormaAbrirPdf.ComoDownload )
        {
            relatorioCrystal.ExportToDisk( ExportFormatType.PortableDocFormat, arquivoPdf );
            FileStream = new FileStream( arquivoPdf, FileMode.Open, FileAccess.ReadWrite );

            var tamanho = (int) FileStream.Length;
            var ms = new MemoryStream( tamanho );

            FileStream.Read( ms.GetBuffer( ), 0, tamanho );
            ms.Close( );

            response.OutputStream.Write( ms.GetBuffer( ), 0, ms.GetBuffer( ).Length );
            response.OutputStream.Flush( );
            response.OutputStream.Close( );

            response.AddHeader( "content-disposition",
                                String.Format( "attachment;filename={0}", arquivoPdf ) );
        }
        else
        {
            FileStream = relatorioCrystal.ExportToStream( ExportFormatType.PortableDocFormat );
            response.AddHeader( "content-type", CONTENTTYPE );
        }

        WriteFile( response );
        FileStream.Close( );

        if ( AbrirComo != FormaAbrirPdf.ComoDownload ) return;

        File.Delete( arquivoPdf );
    }

    protected override void WriteFile( HttpResponseBase response )
    {
        var outputStream = response.OutputStream;
        using ( FileStream )
        {
            var buffer = new byte[BUFFERSIZE];

            while ( true )
            {
                var bytesRead = FileStream.Read( buffer, 0, BUFFERSIZE );
                if ( bytesRead == 0 )
                {
                    break;
                }
                outputStream.Write( buffer, 0, bytesRead );
            }
        }
    }
} 
```

和下载格式：

```
public enum FormaAbrirPdf
{
    NoNavegador, // open on the browser
    ComoDownload // with download
} 
```

PS：代码在pt-br

# c# - VisualTreeHelper 无法获取 CustomControl 中的子项

> ID：11312309
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:45:00.613
> 
> 标签：c#, xaml, windows-phone-7.1

`Windows-phone`我在从模板中读取 ItemsPanel 时使用以下代码。但它对我不起作用。它总是为 ChildrenCount 返回 0。

```
 private void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        StackPanel stackpanel = TraverseVisualTree<StackPanel>(this);
    }

     private T TraverseVisualTree<T>(DependencyObject visual) where T : DependencyObject
     {
        var itemscount = VisualTreeHelper.GetChildrenCount(visual);

        for (int i = 0; i < itemscount; i++)
        {
            var child = VisualTreeHelper.GetChild(visual, i);
            if (child is T)
                return (T)child;
        }
        return null;
      } 
```

你能请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T04:45:58.780

尝试如下，

```
CustomControl:

<UserControl x:Class='SilverlightApplication3.MainPage'
    xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' 
    xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'
    xmlns:d='http://schemas.microsoft.com/expression/blend/2008' 
    xmlns:mc='http://schemas.openxmlformats.org/markup-compatibility/2006' 
    mc:Ignorable='d' 
    d:DesignWidth='640' 
    d:DesignHeight='480'>

        <StackPanel x:Name="LayoutRoot" Background="White">

            <Button x:Name="btnWalkTree" 
                Content="Walk Tree" 
                Click="btnWalkTree_Click"/>

            <Border CornerRadius="10" Background="Yellow">
                <TextBlock x:Name="tbName1"
                   Text="Santa Clause" 
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center" 
                   Margin="3" />
            </Border>

            <Border CornerRadius="10" Background="AliceBlue">
                <TextBlock x:Name="tbName2"
                       Text="Mickey Mouse"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Margin="3" />
            </Border>

            <Border CornerRadius="10" Background="Green">
                <TextBlock x:Name="tbName3"
                       Text="The Tooth Fairy"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Margin="3" />
            </Border>

        </StackPanel>

</UserControl> 
```

**从自定义控件获取孩子的代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SilverlightApplication3
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void btnWalkTree_Click(object sender, RoutedEventArgs e)
        {
            this.WalkChildren(this);
        }

        private void WalkChildren(DependencyObject depObject)
        {
            string name = String.Empty;
            FrameworkElement element = depObject as FrameworkElement;
            if (element != null)
            {
                name = element.Name;
            }

            int childCount = VisualTreeHelper.GetChildrenCount(element);
            if (childCount > 0)
            {
                for (int i = 0; i < childCount; i++)
                {
                    this.WalkChildren(VisualTreeHelper.GetChild(element, i));
                }
            }
        }
    }
} 
```

引用自[VisualTreeHelper](http://www.java2s.com/Code/Silverlight/UI-Controls/VisualTreeHelper.htm)

# php - 在 Yii 中，为什么使用 CActiveDataProvider 而不是 Post::model()->findAll()？

> ID：11312312
> 
> 赞同：4
> 
> 时间：2012-07-03T13:45:08.230
> 
> 标签：php, yii, yii-cmodel

我看到`CActiveDataProvider`用于控制器`actionIndex()`功能。

使用 this 而不是 simple 有什么区别`Post::model()->findAll()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:39:25.623

`CActiveDataProvider`是,和`CActiveRecord`的扩展功能的包装器。通常与类似或正在利用其排序和搜索功能的小部件结合使用。因此，如果您想通过（可选）排序/过滤/分页以列表或表格的形式显示数据 - 在 Yii 中最方便的方法是使用描述的 zii 小部件或其扩展。`sorting``pagination``filtering``CActiveDataProvider``zii``CListView``CGridView`

如果您只需要获取数据并以任何其他方式使用它，但没有`CListView`or `CGridView`- use提供的智能渲染机制`CActiveRecord`，因为它除了获取数据之外不执行任何其他操作。

[参考](http://www.yiiframework.com/forum/index.php/topic/25820-cactivedataprovider-vs-model-findall/page__view__findpost__p__124143)

# java - 序列化 GWT 中的不可变类

> ID：11312313
> 
> 赞同：1
> 
> 时间：2012-07-03T13:45:10.990
> 
> 标签：java, gwt, serialization, immutability

我需要从设计上不可变的客户端返回对象（仅包含公共最终字段）。在 GWT 中，看起来这是不可能的？

我创建了 ImageMetadata_CustomFieldSerializer 的继任者并覆盖了方法：

```
- instantiateInstance
- serialize 
```

但我的最终对象仍未初始化（调用了默认构造函数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:15:52.433

通常，CustomFieldSerializer 必须包含特殊的静态方法才能正常工作。

然后需要添加特殊的静态方法：

```
public static void deserialize(SerializationStreamReader streamReader, MyObject instance) throws SerializationException {
    //...
}

public static void serialize(SerializationStreamWriter streamWriter, MyObject instance) throws SerializationException {
   //...
}

public static MyObject instantiate(SerializationStreamReader streamReader) throws SerializationException {
   //...
} 
```

这些方法包含从 SerializationStream 序列化/反序列化 MyObject 的代码。

在被覆盖的方法中，可以重用静态方法。

希望有帮助。

# wif - 无法序列化 Saml2AssertionKeyIdentifierClause

> ID：11312314
> 
> 赞同：3
> 
> 时间：2012-07-03T13:45:15.690
> 
> 标签：wif, thinktecture-ident-server

我正在尝试将声明感知的 WCF 服务和客户端放在一起。

我正在使用[thinktecture Identity Server](http://identityserver.codeplex.com/)，并且通过查看“使用带有 WCF/SOAP 的令牌”示例来组合一个控制台客户端：

```
var token = GetSecurityToken();

var binding =
    new WS2007FederationHttpBinding(
        WSFederationHttpSecurityMode.TransportWithMessageCredential);
binding.Security.Message.EstablishSecurityContext = false;

var factory =
    new ChannelFactory<IService1>(
        binding,
        new EndpointAddress("https://localhost:44301/Service1.svc"));
factory.Credentials.SupportInteractive = false;

factory.ConfigureChannelFactory();

var service = factory.CreateChannelWithIssuedToken(token);
var result = service.GetData(42); 
```

我有（看起来像）来自 STS 的有效令牌。

但是，它会在对 的调用中引发异常`GetData`，如下所示：

> 序列化安全密钥标识符时出错。有关更多详细信息，请参阅内部异常。

内部异常如下：

> 令牌序列化程序无法序列化“System.IdentityModel.Tokens.Saml2AssertionKeyIdentifierClause”。如果这是自定义类型，则必须提供自定义序列化程序。

我能找到的唯一提到的这个问题是[MSDN 论坛上](http://social.msdn.microsoft.com/Forums/nl/Geneva/thread/ffe356ad-fca1-40a8-ac4e-057ff2257b62)的这个问题，但这只是稍微相关。

在调试器中查看，端点行为似乎包括（最终）一个 Saml2SecurityTokenHandler，其他链接暗示这就是所需要的。

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-08T16:40:34.620

当我从 startersts 升级到 identityserver v2 并从 saml1.1 切换到 saml2 时，我刚才遇到了完全相同的问题。

我不生成代理，所以解决我的问题是在我的通道工厂上简单地将 Credentials.UseIdentityConfiguration 设置为 true。如果您生成代理，默认情况下可能不会这样做？或者，如果您使用自定义 ChannelFactory，您可能只是忘记像我一样设置它。

```
var channelFactory = new ChannelFactory<T>(endpointName);
channelFactory.Credentials.UseIdentityConfiguration = true;

var channel = channelFactory.CreateChannelWithIssuedToken(token) 
```

...现在使用没有序列化异常的通道

希望它有所帮助，无需像其他讨论线程所建议的那样在客户端添加 system.identityModel 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:00:49.410

您的 WCF 服务中是否启用了 WIF？

确保您在配置中有这些设置：

在 serviceCredentials 行为中 - useIdentityConfiguration = true 在 serviceAuthorization 行为中 - principalPermissionMode = always

# php - 如何将 PHP 代码/文件添加到 HTML(.html) 文件？

> ID：11312316
> 
> 赞同：101
> 
> 时间：2012-07-03T13:45:21.860
> 
> 标签：php, html, apache, file

我不能在我的 HTML 页面中使用 PHP。例如，`index.html`。我试过同时使用：

```
<? contents ?> 
```

和

```
<?php contents ?> 
```

这些都不起作用。我的服务器提供 PHP，当我使用`.php`扩展时，它可以正常工作。这是一个问题还是我必须更改偏好`php.ini`？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-07-03T13:47:12.530

您不能在 .html 文件中运行 PHP，因为除非您告诉它，否则服务器不会将其识别为有效的 PHP 扩展。为此，您需要在您的 Web 根目录中创建一个 .htaccess 文件并将这一行添加到其中：

```
AddType application/x-httpd-php .htm .html 
```

这将告诉 Apache 将具有 .htm 或 .html 文件扩展名的文件作为 PHP 文件处理。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-03T13:56:14.020

我认为将 PHP 写入 .html 文件是令人困惑和反自然的。为什么要这么做？？

无论如何，如果您想要执行 PHP 文件并在地址栏中将它们显示为 .html，最简单的解决方案是正常使用 .php，并在 .htaccess 中编写如下规则：

```
RewriteRule ^([^.]+)\.html$ $1.php [L] 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-03T13:47:58.367

In order to use php in .html files, you must associate them with your PHP processor in your HTTP server's config file. In Apache, that looks like this:

```
AddHandler application/x-httpd-php .html 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-07-03T14:00:10.863

You can modify .htaccess like others said, but the fastest solution is to rename the file extension to .php

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-04T20:43:31.113

添加这一行

```
AddHandler application/x-httpd-php .html 
```

提交`httpd.conf`你想做的事。但是请记住，如果您这样做，那么您的 Web 服务器会非常慢，因为它甚至会解析不包含 php 代码的静态代码。所以更好的方法是制作文件扩展名`.phtml`而不是`.html`.

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-03T13:49:01.903

For having `.html` files parsed as well, you need to set the appropriate handler in your server config.

For Apache httpd 2.X this is the following line

```
AddHandler application/x-httpd-php .html 
```

See the [PHP docu](http://php.net/manual/en/install.php) for information on your specific server installation.

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-07-03T13:48:06.683

By default you can't use PHP in HTML pages.

To do that, modify your .htacccess file with the following:

```
AddType application/x-httpd-php .html 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-12-15T14:44:39.280

使用记事本创建一个空文件并将其命名为 .htaccess ，然后将该文件复制到您的项目目录中并添加此行并保存。

```
AddType application/x-httpd-php .htm .html 
```

否则使用.php保存.html文件，因为php可以支持html，并将其保存在computer/var/www/html路径（linux）

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-02-15T15:36:42.643

如果您在一个 html 文件中只有 php 代码，但有多个仅包含 html 代码的其他文件，您可以将以下内容添加到您的 .htaccess 文件中，这样它只会将该特定文件作为 php 提供。

```
<Files yourpage.html>
AddType application/x-httpd-php .html 
//you may need to use x-httpd-php5 if you are using php 5 or higher
</Files> 
```

这将使 PHP 只能在“yourpage.html”文件上执行，而不是在所有 html 页面上执行，这将防止整个服务器变慢。

至于为什么有人可能想通过 html 文件提供 php，我使用 google 电子表格中的 IMPORTHTML 函数从必须用 php 解析的外部 url 导入 JSON 数据以清理它并构建一个 html 表。到目前为止，我还没有找到任何将 .php 文件导入 google 电子表格的方法，因此必须将其保存为 .html 文件才能使该功能正常工作。对于特定用途，能够通过 .html 文件提供 php 是必要的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-08-13T10:40:49.020

现代修订：您现在还需要通过更改 php-fpm 中鲜为人知的“security.limit_extensions”来修复它。您可能已经知道将 apache 更改为 AddHandler/AddType 的有据可查的机制，我不会在这里讨论。

1.  您必须找出 php-fpm/conf 在您的设置中的位置。我是这样做的

    `# grep -rnw '/etc/' -e 'security.limit_extensions'`

2.  我把这个拿回来了

    `'/etc/php-fpm.d/www.conf:387:;security.limit_extensions = .php .php3 .php4 .php5 .php7'`

3.  转到此文件，编辑它并确保您意识到它已被注释掉例如：将其`';security.limit_extensions = .php .php3 .php4 .php5 .php7'`更改`";"`为可能很危险..将其更改为`'security.limit_extensions = .php .htm'`<- 注意分号现在已被删除。然后重新启动 apache/（或 nginx）并重新启动 php-fpm`# service php-fpm restart` `# service httpd restart`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-04T18:15:32.437

AJAX 也是一种可能。实际上，您需要来自 php 页面的数据。一旦你有了数据，你就可以在javascript中格式化并显示。

```
var xmlhttp = new XMLHttpRequest();
var url = "risingStars.php";

xmlhttp.onreadystatechange = function () {
    if (this.readyState == 4 && this.status == 200) {
        getDbData(this.responseText);
    }
}
xmlhttp.open("GET", url, true);
xmlhttp.send();

function getDbData(response) {

//do whatever you want with respone
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-10-14T16:56:27.030

要结合 HTML 和 PHP，您可以使用 .phtml 文件。

# opengl - 我有限的FPS：60

> ID：11312318
> 
> 赞同：18
> 
> 时间：2012-07-03T13:45:36.903
> 
> 标签：opengl, graphics

我学OpenGL编程有一段时间了，我发现一个很奇怪的现象：我的FPS（Frame per Second）总是保持在60左右，无论程序很简单还是有点复杂。实际上，我的电脑是去年买的性能不错。显卡是nVidia GTX570，CPU是I7。

于是我做了一个实验：在我的电脑和我朋友的电脑上运行同一个程序。这个程序实现了阴影映射：

![在此处输入图像描述](../Images/4283bc39c38d68b37c07432dd92907d0.png)

我电脑的FPS大概是60左右。但是我在朋友的电脑上运行时，FPS超过了400。 ![在此处输入图像描述](../Images/37992bf85dfdc956a596cf3724627f1a.png)

但是我的电脑的性能明显比他的好。现在我把我们电脑的参数贴出来。

我的电脑：

```
tgt.init (Info)  GLEW version: 1.7.0
tgt.GpuCapabilities (Info)  OS version: Windows 7 (build 7600)
tgt.GpuCapabilities (Info)  OpenGL Version: 4.2.0
tgt.GpuCapabilities (Info)  OpenGL Renderer: GeForce GTX 570/PCIe/SSE2
tgt.GpuCapabilities (Info)  GPU Vendor: NVIDIA Corporation (NVIDIA)
tgt.GpuCapabilities (Info)  Texturing: yes, max size: 16384, 3D: yes, max 3D size: 2048
tgt.GpuCapabilities (Info)  Texture features: 32 units, NPOT, rectangles, compression, 16x anisotropic
tgt.GpuCapabilities (Info)  Framebuffer Objects: yes, max 8 color attachments
tgt.GpuCapabilities (Info)  Shaders: yes (OpenGL 2.0), GLSL Version 4.20, Shader Model 5.0
tgt.GpuCapabilitiesWindows (Info)  Graphics Driver Version: 8.17.12.9573
tgt.GpuCapabilitiesWindows (Info)  Graphics Driver Date: 2012-02-09
tgt.GpuCapabilitiesWindows (Info)  Graphics Memory Size: 1280 MB 
```

我朋友的电脑：

```
 tgt.GpuCapabilities (Info)  OS version: Windows 7 Service Pack 1 (build 7601)
tgt.GpuCapabilities (Info)  OpenGL Version: 4.2.11566 Compatibility Profile Context
tgt.GpuCapabilities (Info)  OpenGL Renderer: AMD Radeon HD 6620G
tgt.GpuCapabilities (Info)  GPU Vendor: ATI Technologies Inc. (ATI)
tgt.GpuCapabilities (Info)  Texturing: yes, max size: 16384, 3D: yes, max 3D size: 8192
tgt.GpuCapabilities (Info)  Texture features: 16 units, NPOT, rectangles, compression, 16x anisotropic
tgt.GpuCapabilities (Info)  Framebuffer Objects: yes, max 8 color attachments
tgt.GpuCapabilities (Info)  Shaders: yes (OpenGL 2.0), GLSL Version 4.20, Shader Model 5.0
tgt.GpuCapabilitiesWindows (Info)  Graphics Driver Version: 6.14.10.11566
tgt.GpuCapabilitiesWindows (Info)  Graphics Driver Date: 2012-03-09
tgt.GpuCapabilitiesWindows (Info)  Graphics Memory Size: 512 MB 
```

我很好奇，我想不通。我应该对显卡进行一些设置吗？有人能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-03T14:00:20.863

@Thomas 说的是垂直同步。

您可以使用以下方法在您的应用程序中禁用它：

*   GLFW：`glfwSwapInterval(0);`（`0`=关闭，`1`=打开）
*   SDL：`SDL_GL_SetAttribute(SDL_GL_SWAP_CONTROL, 0);`
*   FreeGLUT：我不知道这是可能的，使用你的 GPU 设置作为后备

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-03T13:49:41.040

这是工作中的[垂直同步](http://en.wikipedia.org/wiki/Vertical_synchronization#Vertical_synchronization)。您的显示器以 60 Hz 运行，因此渲染更多帧毫无意义。并且通过以这种方式限制帧速率，将不会出现[撕裂伪影](http://en.wikipedia.org/wiki/Screen_tearing)。

驱动程序的控制面板中可能有一个设置可以强制启用或禁用垂直同步，或者将其留给应用程序。

如果您使用像 GLUT 或 GLFW 这样的 OpenGL 框架，则可能还可以选择显式请求 vsync 或将其关闭（这对于基准测试很有用）。不过，并非所有驱动程序/设置都会尊重这一点。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-03T13:51:56.803

在`nVidia Control Panel`：

![在此处输入图像描述](../Images/9b9c758c66494f9d08cbd41bdfa68708.png)

垂直同步设置是您关心的设置。对于这样的基准，您通常希望将其设置为`off`.

# jquery-ui - jquery自动完成设置最大项目

> ID：11312320
> 
> 赞同：0
> 
> 时间：2012-07-03T13:45:43.687
> 
> 标签：jquery-ui, jquery-plugins

我将使用 jquery 自动完成插件，并设置要显示的最大项目。在谷歌上搜索我发现可以`"max"`选择设置我想要显示的项目数量，但它不起作用。

我用`jquery-ui-1.8.21`版本。

```
$("#test").autocomplete({
     source:myarray,
     max:5
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:06:56.810

你在哪里读到的？我在底部“选项”选项卡下`max`的[自动完成文档](http://jqueryui.com/demos/autocomplete)中找不到。

虽然，有一个示例如何设置[最大高度](http://jqueryui.com/demos/autocomplete/#maxheight)以获得更好的用户体验。但是，如果您真的想要该数组中的前 n 个元素，只需使用纯 JavaScript 中的[slice()](http://www.w3schools.com/jsref/jsref_slice_array.asp)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:11:09.847

将此添加到您的 CSS`.ui-autocomplete { height: 100px; overflow-y: scroll; overflow-x: hidden;}`通过更改高度，您可以限制用户可见的项目数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T08:40:08.263

您可以通过这种方式进入您的 ajax 成功功能更改根据此

```
success: function (data) {
      response($.map(data.slice(0,4), function (item) {
           return {
            label: item.name,
            value: item.name
        }
    }));
} 
```

# java - 试图获取请求参数以访问tomcat的登录

> ID：11312325
> 
> 赞同：4
> 
> 时间：2012-07-03T13:45:53.187
> 
> 标签：java, tomcat, tomcat6, tomcat-valve

我试图调查特定 HTTP 请求被发送到网站的频率。该请求是一个 POST 并且有一个名为 的参数`"_method"`。我可以在萤火虫中看到这一点。

我需要检查此`"_method"`参数的值，因此按照文档[http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html#Access_Log_Valve](http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html#Access_Log_Valve)我将以下内容添加到阀门的 tomcat 访问配置中

```
%{_method}r 
```

但它没有出现在访问日志中。

我想知道是因为下划线吗？

注意，参数名称不能更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T14:20:59.940

好的，我要做的是使用 ExtendedAccessLogValve。

我将以下内容添加到我的 server.xml

```
 <Valve className="org.apache.catalina.valves.ExtendedAccessLogValve" directory="logs" pattern="c-dns x-H(remoteUser) date time cs-method cs-uri x-H(protocol) sc-status bytes x-P(_method)" prefix="localhost_extended_access_log." resolveHosts="false" suffix=".txt"/> 
```

这部分`x-P(_method)`是给我的关键部分。

我包括任何旁观者的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:52:40.517

```
%{xxx}r 
```

用于“ServletRequest 中的属性”而不是 HTTP 参数（如果您可以在 Firebug 中看到，我假设您的意思是）。ServletRequest 属性将完全是服务器端的，因此您将无法在 Firebug 中看到它们。

如果您想输出 HTTP 参数（并且它不是 GET，即它们在 URL 中），我认为您必须使用同一页面上记录的 Request Dumper Valve。

如果上述内容不清楚，则[getAttribute() 和 getParameter() 之间的区别说明了区别。](https://stackoverflow.com/questions/5243754/difference-between-getattribute-and-getparameter)

# boost-spirit - 如何使用属性语法将字符串解析为类

> ID：11312330
> 
> 赞同：1
> 
> 时间：2012-07-03T13:46:12.833
> 
> 标签：boost-spirit, boost-spirit-qi

我喜欢使用属性语法直接解析输入字符串并在`struct`将其调整为随机访问序列后填写 a 的想法，`BOOST_FUSION_ADAPT_STRUCT`并且想知道是否可以调整具有私有成员和 setter/getter 函数的类以使其行为方式相同?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:00:46.050

正如 sehe 所指出的，我正在寻找 BOOST_FUSION_ADAPT_ADT。

# c# - c#.Net 4 中 LoadingCache (guava) 的替代方案

> ID：11312331
> 
> 赞同：3
> 
> 时间：2012-07-03T13:46:15.277
> 
> 标签：c#, java, c#-4.0, guava

Google Guava在 C# 中的[LoadingCache](http://code.google.com/p/guava-libraries/wiki/CachesExplained)是否有替代方案？

.Net 语言功能和外部 dll 可以做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:50:09.480

该类`MemoryCache`是一种选择 - [http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)

您可以设置过期策略和内存限制，我不确定它是否包含 LoadingCache 的所有功能，但它可能很接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:57:31.297

您还可以使用 postsharp 缓存。

样品[在这里](http://dpatrickcaldwell.blogspot.com/2009/02/memoizer-attribute-using-postsharp.html)。

# git - 将目录拆分为子模块

> ID：11312333
> 
> 赞同：3
> 
> 时间：2012-07-03T13:46:27.207
> 
> 标签：git

我在这里进行了很好的搜索和搜索，但似乎没有任何问题可以回答我的问题，所以就到这里了。我有一个具有当前文件夹结构的 git 存储库

```
 /app/folder/
   /app/folder2/..
   /app/bundles/bundle1
   /app/bundles/bundle2 
```

我想将包中的每个包变成它自己的子模块，保留该包中代码的所有版本控制历史记录，保持目录布局完全相同。这样做的原因是我有另一个应用程序，我想在其中使用一些捆绑包。

我尝试使用

```
git filter-branch --subdirectory-filter bundles/client -- --all 
```

但这不是正确的做法......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:30:15.883

实际上，使用 --subdirectory-filter 正是要做的事情，甚至在 filter-branch 手册页的示例中也给出了它。当然，它会用一个包含操作结果的新分支替换当前活动的分支。原始分支（指向它的指针）通常保存在“refs/original/”中（参见手册页中的 --original 选项）。您可以将活动分支复制到其他地方：

```
git branch bundles/client 
```

并恢复当前分支

```
git reset --hard original/refs/heads/oldbranchname 
```

您可以将活动分支导出为捆绑包，或直接在子模块中获取它并从父存储库中删除引用。

如果使用了 filter-branch 的 --all 选项，所有分支都会遭受活动分支的命运，因此您必须为每个分支重复复制操作。

遗憾的是，您不能将输出分支名称提供给 filter-branch 命令。可能值得在 Git 邮件列表上提出建议。

# html - 用 CSS 模拟 COLSPAN 而不结束之前的 TR

> ID：11312334
> 
> 赞同：0
> 
> 时间：2012-07-03T13:46:29.543
> 
> 标签：html, css, datatables, html-table

不确定这是否可能：

我想使用[数据表](http://datatables.net/ "数据表")来操作我的表格，但我希望表格行有效地跨越表格中的两行，因为它们有很多嵌入的文本：

```
+---+----+----+----+
| 一个 | 12 | 33 | 55 | }
+---+----+----+----+ } 这是一行
| A 是元音... | }
+---+----+----+----+
| 乙| 22 | 54 | 11 | }
+---+----+----+----+ } 这是第二个
| B是辅音| }
+---+----+----+----+
```

（请原谅我的 ASCII 艺术）。

在 CSS 中是否有这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:51:13.587

Datatables 不支持正文中的 colspan，我通常通过显示一个按钮然后像[本](http://datatables.net/release-datatables/examples/api/row_details.html)示例中那样呈现额外数据来处理像你这样的情况

# android - 适用于 Android 的声纳应用程序开发

> ID：11312337
> 
> 赞同：0
> 
> 时间：2012-07-03T13:46:34.603
> 
> 标签：android

为了从 Android 手机发送“ping”型信号并通过内置麦克风接收信号以进行频谱分析，是否需要修改手机的收发器以从调制频率中恢复载波信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:10:08.410

如果您要发送调制的 ping，那么您需要某种方法来恢复数据，是的。如果您只是使用简单的音频 ping，则不需要解调。

无论哪种方式，您都不需要修改手机，它可以在具有基本信号处理的软件中完成。如果您能够将信号调制到音频音调上，那么恢复它应该很容易完成。

# c++ - 非类型模板参数

> ID：11312345
> 
> 赞同：0
> 
> 时间：2012-07-03T13:47:04.580
> 
> 标签：c++, templates

我知道整数类型的非类型模板参数必须是 const 表达式，所以：

```
template <int E>
class cat
{
public:
    int array[E];
};

int main()
{
    cat<4> ob; // ??
} 
```

从我读过的内容来看，只有用表达式`const`初始化的变量是表达式。在这个例子中，我们有*，*所以不会是一个表达式。`const``const``int E = 4;``E`*`const`* 

 *那么为什么不`cat<4> ob;`抛出错误呢？我在这里错过了什么吗？如果在编译时不知道
如何`int array[E];`创建？`E`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:59:50.913

无论你读什么都相当不完整。

常量表达式还包括文字（如`4`）、枚举数、`sizeof`表达式、`constexpr`具有常量参数的函数的结果（自 2011 年以来）以及`const`变量。任何具有整数类型的都可以用作整数模板参数。

可能还有几个我没有想到的，任何由常量表达式构建的复杂表达式也是常量表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:50:06.563

`E`在`4`实际编译开始之前。模板特化在此之前发生，这意味着编译器实际看到的代码类似于

```
 class cat4
 {
 public:
 int array[4];
 };

 int main()
 {
 cat4 ob;
 } 
```

这是一个相当松散的解释，不要从字面上看。

要真正测试这种情况，您可以尝试：

```
 template <int E>
 class cat
 {
 public:
 int array[E];
 };

 int main()
 {
 int k = 4;
 cat<k > ob; // ??
 } 
```*

# mongodb - MongoDB MapReduce 上的深层嵌套文档问题

> ID：11312350
> 
> 赞同：2
> 
> 时间：2012-07-03T13:47:14.157
> 
> 标签：mongodb, mapreduce, mongoid

对于我的 Rails+MongoId 应用程序，我需要汇总数据以用于统计目的。我的模型展示了一个通用的 Web 应用程序，该应用程序具有多个版本（又名：捆绑包）和相关用户激活：

```
App = {
  "_id" : ObjectId("4ff2e2eab528571384000eb4"),
  "name" : "my app",
  "category_id": "4ff2e2eab528571384000cc0",
  "bundles": [{
    "_id" : ObjectId("4ff2e2eab528571384000dca"),
    "activations" : [{
      "user" : "user_0",
      "_id" : ObjectId("4ff2e2eab528571384000dd0")
     },
     ... 
  },
  ...
  ]
} 
```

现在，我要做的是返回每个应用程序 CATEGORY_ID 的 ACTIVATIONS 数量，例如：

```
results = [
  {
    "_id": "4ff2e2eab528571384000cc0",
    "value": 243
  },
  ...
] 
```

我可以使用这个 mapreduce 函数轻松获得每个 CATEGORY_ID 的 BUNDLES 总数：

```
map = function() { 
  for (var bundle in this.bundles) { 
    emit(this.category_id, 1); 
  }
};
reduce = function(key, values) { 
  var sum = 0; 
  values.forEach(function(value) { 
    sum += value; 
  }); 
  return sum; 
}; 
```

但是，当我尝试更深入地进入一个级别时，我确实没有得到任何结果：

```
map = function() { 
  for (var bundle in this.bundles) { 
    for (var activation in bundle.activations) {
      emit(this.category_id, 1); 
    }
  }
};
reduce = function(key, values) {
  var sum = 0; 
  values.forEach(function(value) { 
    sum += value;
  });
  return sum;
}; 
```

非常感谢任何想法。此致

迈克·科斯塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:19:40.937

感谢NOMOA的提示，

我可以通过如下修改 map 函数来解决我的问题：

```
map = function() { 
  var len = this.bundles.length; 
  for (var i = 0; i < len; i++) {
    if (this.bundles[i].activations !== undefined) { 
      emit(this.category_id, this.bundles[i].activations.length);
    } 
  }
}; 
```

我不得不删除 for..in 结构以支持更传统的 for..i++，添加一个“未定义”检查（如您所建议的那样），它工作得很好（我也避免了双循环）！

最好的问候 M.科斯塔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:23:59.907

你确定你的 map reduce 函数运行正确吗？

我想你应该检查 bundle.activations 是否为非空。检查服务器日志中是否有任何错误。您还可以使用服务器日志查看调试打印语句。

# python - 在python中复制一个列表

> ID：11312354
> 
> 赞同：2
> 
> 时间：2012-07-03T13:47:16.413
> 
> 标签：python, list, copy

我正在寻找一种方法来执行以下操作：

*   我有一个由其他列表组成的列表：`TABLE=[table1,table2,table3]`
*   我想复制此列表但重命名子列表，例如：（`TABLE_1=[table1_dup=list(table1),table2_dup=list(table2),table3_dup=list(table3)]`这不起作用；我只是想解释我的目标）以便在对整个 TABLE 执行批处理操作后独立访问 tablex 和 tablex_dup 和TABLE_1，其中包括 table1、table2、... 和重复项。

非常感谢！

编辑：子列表不一定命名相同（table1、table2、table3）。实际上，它们的名称是完全不同的（例如上、下、左、右）

编辑＃2：我对此有点陌生。基本上，这是我的代码：

```
up=["img1.png","img2.png"] 
```

向下，向左和向右类似的东西。

```
table=[up,down,left,right] 
```

现在使用 pygame：

```
for j in range(len(table)):
        for i in range(len(table[j])):
            table[j][i] = pygame.image.load(os.path.join(str(table[j][i])))
            table_r[j][i] = pygame.image.load(os.path.join(str(table_r[j][i])))
            table_r[j][i] = pygame.transform.flip(table_r[j][i],1,0) 
```

这不起作用，因为没有 up_r，例如，我可以访问。只能上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T13:49:25.400

我认为，该`deepcopy`功能适合这种场合。

```
from copy import deepcopy

...
TABLE_1 = deepcopy(TABLE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:49:32.593

```
TABLE_1 = [ table[:] for table in TABLE ] 
```

仅当 TABLE 中的表仅包含不可变数据时，这才适合您的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:39:46.203

在评论和您的编辑中提出的更普遍的问题上 - 看起来很像列表列表不是您的逻辑的正确数据结构。当您的表中可以有任意多个“行”时，通常会指示一个列表 - 似乎您总是正好有四个。在这种情况下，元组更好——它有点像一个列表，除了它是为那些不会改变的东西而更刻意地设置的。而且，更好的是，由于您想通过名称来处理您的四件事，因此有一个名为的标准 Python 类[`collections.namedtuple`](http://docs.python.org/library/collections.html#collections.namedtuple)可以让这变得简单。

您将像这样定义一个 Table 类：

```
Table = namedtuple('Table', ['up', 'down', 'left', 'right']) 
```

然后你像这样创建你的第一个表：

```
table = Table(up=["img1.png","img2.png"], down=..., left=..., right=...) 
```

这使您可以将“向上”列表设置为`table.up`，这意味着当您对`table_r`per Constantinius 的答案进行深度复制时，*这些名称是免费的*。它还允许您以与列表完全相同的方式对其进行迭代：

```
for i in range(len(table)):
    for j in range(len(table[i])):
       ... 
```

`range(len(iterable))`但是，请注意，通常不需要迭代- 因为您正在使用索引同时从两个表中查找值，所以您*真正*想要的是内置函数`enumerate`和的组合`zip`：

```
for row, row_r in zip(table, table_r):
    for i, (val, val_r) in enumerate(zip(row, row_r)):
       row[i] = pygame.image.load(os.path.join(str(val)))
       row_r[i] = pygame.image.load(os.path.join(str(val_r))) 
```

您只需要将索引分配到列表中，因为重新绑定`val`和`val_r`内部循环内部将不起作用。由于您不用`j`作查找以外的任何其他内容，因此您根本不需要它。

但这也带来了使用 namedtuple 的一个问题——它不能做的你可能关心的一件事是在创建元组后更改它的属性：

```
>>> from collections import namedtuple
>>> Point = namedtuple('Point', ['x', 'y'])
>>> p = Point(1, 2)
>>> p.x = 2
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    p.x = 2
AttributeError: can't set attribute 
```

在您的情况下，这意味着您无法`table.up`在任何时候重新分配给新列表（您仍然可以通过其变异方法和切片分配来更改列表本身） - 如果您需要，您最好编写您的为此自己上课。

# delphi - Delphi Spring DI：是否可以在没有实现类型的情况下委托接口实例化？

> ID：11312357
> 
> 赞同：8
> 
> 时间：2012-07-03T13:47:30.490
> 
> 标签：delphi, com, dependency-injection, ioc-container, spring4d

我刚开始使用 Delphi Spring Framework，想知道当前版本的 DI 容器是否允许在不指定实现类型的情况下将构造委托给工厂方法？

例如类似这样的东西：

```
GlobalContainer
  .RegisterFactory<ISomeObject>(
    function: ISomeObject 
    begin 
      Result := CreateComObject(CLASS_SomeObject) as ISomeObject; 
    end)
  .Implements<ISomeObject>  // could probably be implied from the above
  .AsSingletonPerThread; 
```

如您所见，我的具体用例是 COM 对象的实例化。在这种情况下，实现我感兴趣的接口的类不是我的应用程序的一部分，但我仍然可以通过调用`CreateComObject`/创建实例`CoCreateInstance`。但是，似乎我不走运，因为 Container 中的注册似乎总是绑定到实际的实现类。

假设目前这是不可能的，那么你们那里的专家将如何解决这个问题？您会创建一个包装类或虚拟类，还是只是将 COM 对象排除在 DI 容器之外并简单地通过实例化它们`CreateComObject`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T16:22:12.823

不幸的是，spring DI 容器的当前设计不允许这样做。它在内部假设每个服务类型（通常是接口，但也可以是类）由组件类型（类）实现。因此，在这种情况下`TObject`，我们需要在几个地方。`IInterface`就像您传递给 DelegateTo 方法的委托一样，它返回组件类型（或非通用情况下的 TObject）而不是服务类型。

这也是因为您可以在一个流畅的接口调用中注册一种具有多个接口实现的组件类型。像：

```
GlobalContainer
  .RegisterType<TMyObject>
  .Implements<IMyInterface>
  .Implements<IMyOtherInterface>; 
```

容器现在检查是否与和`TMyObject`兼容。在调用实例上的服务解析器时使用来获取请求的接口引用。超出该点的所有内容都在对象引用上完成。`IMyInterface``IMyOtherInterface``Resolve``GetInterface`

由于我对 DI 容器有一些计划，这些计划在注册接口时不需要依赖于实现类，这个问题将在未来得到解决，但不会很快解决。

**更新（08.11.2012）：**

从 r522 开始，可以通过以下方式注册接口类型：

```
GlobalContainer
  .RegisterType<ISomeObject>
  .DelegateTo(
    function: ISomeObject 
    begin 
      Result := CreateComObject(CLASS_SomeObject) as ISomeObject; 
    end)
  .AsSingletonPerThread; 
```

在此示例中，它将注册`ISomeObject`为服务和任何具有它继承的 GUID 的接口。

此外，您可以通过调用添加其他接口，`Implements<T>`但与类不同，如果构造的实例实际上确实支持该接口，则在注册时不会进行验证，因为这根本不可能。目前，当您使用不受支持的服务类型`nil`调用时，您会得到。`Resolve<T>`将来可能会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:11:27.457

看起来spring框架的架构目前不支持它，但它肯定是可行的。它已在 spring4d 支持小组中[提出](https://groups.google.com/d/topic/spring4d/7oNAkjE0gpA/discussion)，并且对此想法很感兴趣。

有一个泛型`TFactory`类`Spring.DesignPatterns`可以用于包装`CreateComObject/COCreateInstance`。

# awk - awk 在字段之间打印字符

> ID：11312359
> 
> 赞同：3
> 
> 时间：2012-07-03T13:47:35.300
> 
> 标签：awk

我试过用谷歌搜索我的问题的答案，我确信答案就在那里，我只是不知道要搜索什么。基本上我想要做的是从文件中取一行抓取*最后两个字段*（由“”分隔`\`），然后打印这两个字段。

但是，我希望这些字段在它们之间*用 2 个反斜杠*打印出来。（我正在使用 Windows 路径）这是我的声明

```
$ line = C:\Windows\System32\folder1\folder2\folder3\executable.exe

$ echo $line | awk -F "\\" '{print $(NF-2)$(NF-0)}' 
```

我希望输出返回`folder3\\executable.exe`

我对 awk 的经验是有限的。提前感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:54:58.573

从命令行：

```
$ echo $line | awk 'BEGIN{FS="\\"; OFS="\\\\"} {print $(NF-1), $NF}' 
```

会给你

```
folder3\\executable.exe 
```

为您`line`

`FS`为处理的行设置字段分隔符，`OFS`即输出字段分隔符。double`\\`是逃避 single 的特殊含义所必需的`\`。

请注意，您的分配`line`应该将字符串`""`包含在`=`. IE，

```
line="C:\Windows\System32\folder1\folder2\folder3\executable.exe" 
```

或者，这个脚本（so.awk）

```
BEGIN { FS="\\"
        OFS="\\\\"}
{print $(NF-1), $NF} 
```

如果调用`echo $line | awk -f so.awk data.txt`where`data.txt`包含您的一个（或可能更多）路径，将为您提供相同的输出

*更新*：

如果您想打印前导双反斜杠：`print "", $(NF-1), $NF`将通过在开头添加一个空字符串来解决问题，正如@Dennis Williamson 的有用评论中所述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:51:45.760

您要设置的变量是 OFS，即输出字段分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:03:57.227

您还可以使用`rev`反转字符串，在“\”分隔符上拆分字符串，然后获取数组中的前两个字符串。最后，用前一个分隔符'\'组合字符串并再次反转。

反过来是必要的，因为您不能总是知道根目录和最后一个之间的子目录的数量。

# c - while loop won't exit C

> ID：11312360
> 
> 赞同：2
> 
> 时间：2012-07-03T13:47:38.140
> 
> 标签：c, while-loop

This is a **working snippet of a while loop**:

```
while(total_bytes_read != fsize){
    while((nread = read(sockd, filebuffer, sizeof(filebuffer))) > 0){
        if(write(fd, filebuffer, nread) < 0){
            perror("write");
            close(sockd);
            exit(1);
        }
        total_bytes_read += nread;
        if(total_bytes_read == fsize) break;
    }
} 
```

This is an example of **a NON working snippet of a while loop**:

```
while(total_bytes_read != fsize){
    while((nread = read(sockd, filebuffer, sizeof(filebuffer))) > 0){
        if(write(fd, filebuffer, nread) < 0){
            perror("write");
            close(sockd);
            exit(1);
        }
        total_bytes_read += nread;
    }
} 
```

And also this, is an example of **a NON working snippet of a while loop**:

```
while(total_bytes_read < fsize){
    while((nread = read(sockd, filebuffer, sizeof(filebuffer))) > 0){
        if(write(fd, filebuffer, nread) < 0){
            perror("write");
            close(sockd);
            exit(1);
        }
    }
     total_bytes_read += nread;
} 
```

I would like to know why into the 2 snippet above when `total_bytes_read` is equal to `fsize` the loop won't exit :O
Thanks in advance!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:51:34.897

片段 2 和 3 中的外部循环不会退出，因为内部循环不会退出：`total_bytes_read != fsize`循环永远没有机会检查其继续条件。

片段 1 工作正常，因为您检查嵌套循环*内*的相同条件，如果已达到限制计数，则中断。

您可以将这两个条件组合成一个循环，如下所示：

```
while((total_bytes_read != fsize) && (nread = read(sockd, filebuffer, sizeof(filebuffer))) > 0) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:52:17.633

因为您删除了停止循环的中断

```
if(total_bytes_read == fsize) break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:52:54.297

不以这种方式编写读取循环是有原因的。（实际上，有很多。）如果您计算 fsize，然后在您阅读时文件更改大小，您的循环将永远不会终止。不要这样做！无需计算文件大小；只需读取数据，直到没有更多数据。

# mysql - Speeding up / making more efficient SQL

> ID：11312361
> 
> 赞同：1
> 
> 时间：2012-07-03T13:47:45.650
> 
> 标签：mysql

This is my exact SQL code, but it's very slow and I know it's terrible...

Is there another way to do this but faster?

```
UPDATE Customer SET Title = "MR", SurName = "Test", FirstName ="Bob", HomePostCode ="SW18" WHERE CustomerID IN (SELECT CxID FROM Production WHERE policy_number = "001C5T" AND member_number = "100" AND family_group = "000001" AND CxID > 0) 
```

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:55:31.570

试试这个（未经测试）

```
UPDATE Customer c
JOIN Production p ON p.CxID = c.CustomerID
SET c.Title = "MR",
    c.SurName = "Test",
    c.FirstName ="Bob",
    c.HomePostCode ="SW18"
WHERE p.policy_number = "001C5T"
    AND p.member_number = "100"
    AND p.family_group = "000001"
    AND p.CxID > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:49:12.513

you can join the tables in the update, so there will be no subselect.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:55:33.847

我想你想要这样的东西：

```
UPDATE customer 
SET Title = "MR", SurName = "Test", FirstName ="Bob", HomePostCode ="SW18" 
FROM customer    
inner join production on customer.customerID = production.cxid 
where policy_number = "001C5T" AND member_number = "100" AND family_group = "000001" AND CxID > 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T13:56:13.393

要扩展 krakover 的答案，您可以加入表格：

```
UPDATE Customer JOIN 
Production P ON (C.CustomerID = P.CxID) 
AND (P.policy_number = "001C5T") 
AND (P.member_number = "100") 
AND (P.family_group = "000001") 
AND (P.CxID > 0)  
SET C.Title = "MR", C.SurName = "Test", C.FirstName ="Bob", C.HomePostCode ="SW18" 
```

请注意，请根据您的 shema 仔细检查表别名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T14:01:36.000

另一种没有 JOIN 的方法：

```
INSERT INTO Customer (CustomerID, Title, SurName, FirstName, HomePostCode)
SELECT CxID, 'MR', 'Test', 'Bob', 'SW18'
FROM Production
WHERE policy_number = '001C5T' AND member_number = '100' AND family_group = '000001' AND CxID > 0
ON DUPLICATE KEY UPDATE Title = VALUES(Title), SurName = VALUES(SurName), FirstName = VALUES(FirstName), HomePostCode = VALUES(HomePostCode) 
```

这将要求您拥有并选择至少一个唯一列。我假设 CustomerID 是。

# spring - Jrebel 对 Spring 上下文加载的影响？

> ID：11312372
> 
> 赞同：1
> 
> 时间：2012-07-03T13:48:29.227
> 
> 标签：spring, jrebel

JRebel 5.0.0 (201206080930)

拥有多模块 maven 项目，该项目正在组装成战争并部署在 Tomcat 7 上。当我为项目启用 JRebel-agent（生成 rebel.xml）并使用代理启动 Tomcat（通过在 Tomcat JVM 参数中添加以下行时：

```
-Drebel.properties="..\.jrebel\jrebel.properties"
-javaagent:"D:\eclipse\plugins\org.zeroturnaround.eclipse.embedder_5.0.0.RELEASE-201206121145\jrebel\jrebel.jar"
-Drebel.workspace.path="D:\eclipse" 
```

或在打开的对话框中按“使用 JRebel 代理启动”按钮）我收到 Spring 异常

```
 org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.smile.AccountHandler] is defined: expected single matching bean but found 2: [accountHandlerImpl, testAccountHandler] 
```

这里的主要内容`testAccountHandler`是来自测试目录。没有 JRebel 代理，一切正常。

删除

```
<dir name="D:/path/to/sources/target/test-classes">
        </dir> 
```

从`rebel.xml`没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:35:24.633

使用（我假设一些 maven 插件或配置）组装 war 文件时，请确保您没有在 tomcat 中包含测试 jar 文件。如果在类路径上找到类，jrebel 将尝试在目标目录中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:13:42.723

问题出在 rebel.xml 中。我尝试`test-classes`从所有 rebel.xml 文件中删除所有引用，这会有所帮助。

# c# - 客户端特定库/插件的代码结构

> ID：11312379
> 
> 赞同：0
> 
> 时间：2012-07-03T13:48:45.600
> 
> 标签：c#, asp.net-mvc, architecture

所以这里是问题：

我的应用程序中有一些逻辑会因客户端而异。什么是最好的方法来构建它，以便可以在不更改任何代码的情况下对其进行配置。我已经在配置中添加了一个 appsetting，如下所示：

```
<add key="MyCalculationType" value="MyApp.Client1.Calculation,MyApp.Client1" /> 
```

在我的核心业务逻辑中：

```
ICalculation abcCalculation = CalculationFactory.GetManager(); // Uses appsetting to get type

abcCalculation.Calculate(this); 
```

我添加了一个名为 MyApp.Client1 的新项目，我希望它包含计算的客户端特定实现。

```
namespace MyApp.Client1
{
    public class Calculation : ICalculation
    {
        public void Calculate(Order o)
        {
            // Calculate properties of order
        }
    }
} 
```

我还没有完成，所以我无法提供任何输出。在这个阶段，我想知道，在我走得更远之前，是否有更好的方法来实现我想要的。我不确定的一件事是放置 ICalculation 接口的位置。我认为我拥有它的方式可能会产生循环引用错误。

非常感谢

**编辑**

正如我所怀疑的，ICalculation 接口阻止了我构建。虽然没有循环参考错误；出现“无法解析符号”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:54:53.790

`ICalculation`接口可以在您的*ConnectorBridge*库中，该库管理外部插件与主机环境的访问、订阅和通信。

您的应用程序和（例如）计算项目都包含对*ConnectorBridge*的引用。通过这种方式，Calculation 可以实现一个`ICalculation`接口，并且应用程序可以访问抽象。

在您的应用程序中创建一个文件夹，例如*插件* ，并在您的应用程序启动时扫描该文件夹的内容以查找实现`ICalculation`接口的 DLL 的 where is present 类型。一旦找到类型（在这种特定情况下为计算器），它就会被创建并保存在应用程序中以供将来执行。

这些只是一些想法，但*具体*实施自然需要更多的工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:51:37.857

如果你真的需要做那种事情，你应该寻找一个适当[的控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)容器。我更喜欢[NInject](http://www.ninject.org)，因为它非常强大且可配置。

# javascript - Prevent horizontal scroll on jQuery Mobile

> ID：11312383
> 
> 赞同：3
> 
> 时间：2012-07-03T13:48:54.010
> 
> 标签：javascript, jquery, html, css, mobile

Is there a way to prevent horizontal page scroll on a mobile device preferably with CSS only?

Here's an example: [http://jsfiddle.net/YfLst/15/](http://jsfiddle.net/YfLst/15/)

**Update:** The following code solves the issue on iOS but the problem remains on Android:

```
html, body {
    overflow-x: hidden !important;
    position: relative !important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:55:52.217

有不同的方法可以做到这一点：

您可以使用特殊样式表定位移动设备

```
<link rel="stylesheet" media="handheld, only screen and (max-device-width: 320px)" href="phone.css"> 
```

并将body宽度设置为100%和overflow-x: hidden，甚至尝试绝对定位

```
body {
  width: 100%;
  overflow-x: hidden;
  position: absolute;
  top: 0;
  left: 0;
} 
```

在 CSS 中。

如果通过“防止水平滚动”是指您的视口（显示在移动屏幕上的区域）太窄并且应该更大，您应该在元标记中相应地设置视口宽度

```
 <meta content="width = 999 (for example)" name="viewport"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:55:41.823

不使用 CSS，但您可以使您的文档不比屏幕宽，并且您不会遇到问题。

否则，您将不得不使用这样的 javascript/jquery 解决方案：http: [//forum.jquery.com/topic/scrollview-make-page-not-scrollable](http://forum.jquery.com/topic/scrollview-make-page-not-scrollable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T23:56:39.370

使用 jQuery mobile，css 文件的顺序很重要。我必须做的是确保我在 jQuery Mobile css 之前包含了我的主题 css，而不是像这样在它之后：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, user-scalable=no">

    <link rel="stylesheet" type="text/css" href="css/themes/green-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure.min.css" /> 
```

如果您查看 jQuery Mobile 的 css，您会看到防止水平滚动的代码：

```
body.ui-mobile-viewport, div.ui-mobile-viewport {
    overflow-x: hidden;
} 
```

您甚至不必将任何类添加到您的 body 标记中。jQuery mobile 会自动完成。

# html - Ensure fixed position div does not cover text

> ID：11312384
> 
> 赞同：1
> 
> 时间：2012-07-03T13:48:59.293
> 
> 标签：html, css, css-position

I'm a bit new to CSS and was tinkering with this for quite a while and can't figure it out. I have an icon to play a video that I want fixed positioned at the bottom right corner. I have that working with pretty simple CSS: position: fixed; bottom: 16.5%; right: 8.25%;

But, if I resize the window and make it small, the icon will go over text. I was hoping to set it so that this will not happen, the icon will go off-screen.

I've tried a couple things, but it seems not possible with the right attribute. If I use left instead, it will work as I want it, but I want the icon to be as far right as possible so I guess I would need some sort of dynamic left position? This seems a bit overcomplicated and I was wondering if there is an easier solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:01:08.897

你可以使用媒体查询

```
#button { position: fixed; bottom: 16.5%; }

/* browser width is less than 960px  */
@media screen and (min-width :0px) {
   #button { left : 961px }
}

/* browser width is at least 960px */
@media screen and (min-width : 960px) {
   #button { right: 8.25% }
} 
```

当然`960px`，如果需要，可以设置其他值，这只是为了给出这个想法：您可以根据屏幕宽度动态地重新定位按钮元素。

如果您需要支持 IE 8 或更低版本，您可以使用[respond.js](https://github.com/scottjehl/Respond/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:17:38.483

一个快速、简单的解决方案是将您的视频设置为比按钮更高的 z-index，这样至少按钮不会超出视频的上方。

一个JS解决方案如下：

**HTML**

```
<body>
    <div id='video'></div>
    <button>click</button>
</body> 
```

**CSS**

```
#video { width: 500px; height: 350px; background: #d70; }
button { position: fixed; right: 10%; bottom: 10%; background: #ddd; font-size: 20px; padding: 10px; } 
```

**JS**（通过 jQuery）

```
$(function () {

    //cache a few things
    var vid = $('#video'),
        button = $('button'),
        vid_dims = {w: vid.width(), h: vid.height()};

    //on resize, test to see if button is over video
    $(window).on('resize', function() {
        var button_coords = button.offset(),
            vid_coords = vid.offset(),
            positive_hit_test = button_coords.left > vid_coords.left && button_coords.left <  vid_coords.left + vid_dims.w && button_coords.top > vid_coords.top && button_coords.top <  vid_coords.top + vid_dims.h;

            //show or hide it accordingly
            button.css('visibility', positive_hit_test ? 'hidden' : 'visible'});
    });
}); 
```

[JSFiddle](http://jsfiddle.net/JaJBD/)

顺便说一句，请注意我使用可见性而不是字面上隐藏按钮，因为元素`display: none`并不总是具有可检测的位置。

# c++ - Get the content of a txt file

> ID：11312388
> 
> 赞同：0
> 
> 时间：2012-07-03T13:49:09.177
> 
> 标签：c++, windows, file

I am using the windows API in C++ and I want to get the content of a specific txt file. I contemplate using the `ReadFile` function but I don' t know what I should use in place of `HANDLE` or, in other words, how I should pass as parameter the name of the txt file. What is the best way generally to get the content of a txt file using windows API.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:52:15.743

使用[`CreateFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx), 提供`GENERIC_READ`参数`dwDesiredAccess`和参数，以获得传递给`OPEN_EXISTING`的a 。`dwCreationDisposition``HANDLE``ReadFile()`

或者，更简单，只需使用[`std::ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)：

```
#include <fstream>
#include <vector>
#include <string>

...

std::vector<std::sting> lines;
std::ifstream in("input.txt");
if (in.is_open())
{
    std::string line;
    while (std::getline(in, line)) lines.push_back(line);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:52:06.603

首先，您必须调用[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)（“*创建或打开文件或 I/O 设备*”）。它返回一个句柄，您随后将其传递给[`ReadFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx).

完成后，不要忘记调用[CloseHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:52:23.273

[您可以使用CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)函数创建 HANDLE 。

# c# - Counting entries in a datagrid?

> ID：11312390
> 
> 赞同：2
> 
> 时间：2012-07-03T13:49:10.903
> 
> 标签：c#, sql, wpf, linq, datagrid

I have a datagrid that is filled with a dataset from an SQL query. What i would like to do is count how many occurrences there are of a certain entry, for example in Column 3 i would like to count how many times a string is repeated in the datagrid. Is there any way of doing this, perhaps with Linq? I initially tried doing this through an SQL query:

```
SELECT Count(*) Occurences
From myTable
WHERE Column_name Like 'stringPattern' 
```

But the problem is that the database is pretty big and i already have the returned data so hoping to not have to re-query the database?

Any tips or suggestions would be appreciated.

Peter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:55:09.713

如果您已经有了要从数据集中查询的表，则可以使用 LINQ。

```
var count = myTable.AsEnumerable().Where(x => x["Column_name"] == "stringPattern").Count(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:55:15.080

下面的工作是否...

**原来的**

```
SELECT Count(*) Occurences
From myTable
WHERE Column_name Like 'stringPattern' 
```

**数据表**

```
var count = (from row in myTable.AsEnumerable()
             where string.Equals(row["Column_name"].ToString(), "stringPattern")
             select row).Count(); 
```

# c++ - OpenGL: how to add effects on your screen

> ID：11312394
> 
> 赞同：0
> 
> 时间：2012-07-03T13:49:25.323
> 
> 标签：c++, opengl

I would like to add particular effects directly on the screen (first on ubuntu 12.04), for example i would like to code a c++ deamon that would be able (for example) to blur all my screen in real-time. One should be able to move his mouse, read text, browse the internet but everything stills blurry. I've read that the task should be to access and modify the screenbuffer. Is that true ? Am I looking the wrong way using OpenGL ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:53:51.387

您需要使用合成管理器，例如[Compiz](http://www.compiz.org/)，它通过 OpenGL 重新路由所有绘图并允许您做各种花哨的事情。

比如Ubuntu自带的可以让雨滴落在你的屏幕上，可以通过[Compiz设置管理器](http://www.tech-recipes.com/rx/2756/ubuntu_install_compiz_config_settings_manager_configure_desktop_effects/)开启。

但是，如果您是 OpenGL 新手，我不建议您深入研究。首先了解基本的绘制调用，然后处理着色器。您可能还需要了解 X。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:32:12.687

> 我想直接在屏幕上添加特定效果（首先在 ubuntu 12.04 上），例如，我想编写一个能够（例如）实时模糊我的所有屏幕的 c++ 守护程序。一个人应该能够移动他的鼠标、阅读文本、浏览互联网，但一切仍然是模糊的。

这称为合成效果，通常作为合成器的插件实现

> 我读过任务应该是访问和修改屏幕缓冲区。

在现代操作系统上，您无法直接访问屏幕缓冲区。所以这行不通。

> 真的吗？

不，或者实际上非常不准确。

> 我是不是用 OpenGL 找错了方向？

不，你正在寻找正确的方向。

让我解释一下：在过去，您的屏幕由一个大型帧缓冲区组成，所有应用程序都共享该缓冲区。但是为了保护应用程序免受彼此的影响，它们不能直接访问该帧缓冲区。相反，他们使用图形/窗口系统，在 Linux 的情况下，传统上是 X11（现在还有另一个系统正在开发中，但坦率地说，我非常讨厌它的设计）、Windows 上的 GDI 和 MacOS X 上的 Quartz。

图形系统注意窗口的绘制操作最终会在屏幕缓冲区的正确位置结束，并且会被窗口几何图形和屏幕上的其他窗口正确裁剪和遮挡。每当调整窗口大小或之前被遮挡的部分暴露时，都会发送一条消息以重绘这些部分。只需移动一个窗口就可以通过缓冲区内位传输来实现。

随着现代 GPU 及其本地帧缓冲内存模型的出现，这种管理窗口的旧方式已不合时宜。现在您可以为每个窗口提供其自己的独立帧缓冲区。只有在调整窗口大小时才需要强制重绘；不再有会损坏 Windows 内容的遮挡。

但是要使这个模型工作，您需要一些程序来获取包含窗口内容的那些单独的、单独的帧缓冲区，并将它们合成到屏幕缓冲区上的单个图像中，呈现给用户。这是由合成器完成的。而且因为合成可能发生在任何可用的绘图 API 上，你也可以使用 OpenGL 并在这样做的同时应用疯狂的效果。

# javascript - Have the vertical scroll bar always present css

> ID：11312396
> 
> 赞同：4
> 
> 时间：2012-07-03T13:49:31.163
> 
> 标签：javascript, css

I have a web page with infinite scrolling. I always want to have the vertical scrollbar present so I have added the following style:

```
html {  
  overflow-y: scroll;   
} 
```

This works in that it shows the scrollbar but it just displays an empty scrollbar, i.e. there is no cursor to allow the user to scroll up or down.

Is it possible to not only display the scrollbar but also have the cursor displaying as well?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T13:51:46.643

使html高一点，滚动就会出现

```
html {
   overflow-y: scroll;
   height: 101%
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:57:42.927

您提供的信息有限，很难说。您使用什么 javascript/插件来实现无限滚动？

我的直觉是无限滚动可能发生在顶级 html 元素下方的元素中。也许尝试使用浏览器的开发人员工具来识别实际滚动的元素，并应用“overflow-y:scroll;” 到那个。

请注意，您可能会发现它们隐藏垂直滚动条的原因是您使用的插件使其毫无意义。如果系统从页面顶部删除旧元素以免内存不足，则滚动到滚动条顶部可能无法将您带到页面顶部。

# android - 在运行时激活特定的dimens.xml

> ID：11312398
> 
> 赞同：2
> 
> 时间：2012-07-03T13:49:37.763
> 
> 标签：android, layout, runtime, dimension

在我的应用程序检查屏幕功能后，我需要在运行时选择一个特定的dimens.xml。我不想通过项目文件夹（\values，\values-large，...）自动选择来为我选择它。

由于我的低成本中国平板电脑的屏幕配置（密度和尺寸）不佳，我必须手动完成。我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:12:42.787

Solved using styles/themes/... and activating a specific theme at runtime in onCreate() as described here:

[android dynamically change style at runtime](https://stackoverflow.com/questions/3241729/android-dynamically-change-style-at-runtime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:24:19.753

您是否尝试过强制更改配置？

```
 DisplayMetrics metrics = new DisplayMetrics();
    metrics.densityDpi = DisplayMetrics.DENSITY_MEDIUM;
    metrics.setTo(metrics); 
```

不确定它是否有效。忽略操作系统认为最好的通常是一个坏主意。

# ember.js - 在 Ember.js 的集合视图中绑定到瞬态属性

> ID：11312399
> 
> 赞同：2
> 
> 时间：2012-07-03T13:49:40.603
> 
> 标签：ember.js

我试图了解在视图集合中绑定属性的最佳方式。

根据您的文档，在 MVC 架构中，“我们实际上应该将视图的属性绑定到控制器层”，而不是直接绑定到模型实例。当我们有一个只控制一个对象的控制器时，这很有效，但是当我们处理集合时，它似乎并没有那么好。

在您的典型 ToDos 示例中，您的观点是

```
{{#collection contentBinding="Todos.todosController" tagName="ul"
 itemClassBinding="content.isDone"}}
  {{view Em.Checkbox titleBinding="content.title"
    valueBinding="content.isDone"}}
{{/collection}} 
```

这本质上是直接绑定到每个模型的属性。我知道数组控制器以某种方式代理了这些属性，但是您仍然只能引用直接存在于模型对象上的那些属性。

假设在我的 ToDo 应用程序中，我想在视图上添加更多状态，例如，我希望它能够展开或折叠。如果我有一个表示整个 ToDo 视图的视图对象，包括扩展框架和内容，我希望该视图上的某些属性“isExpanded”绑定到某些东西。

如果我只有一个对象和一个非数组控制器，我可能会在控制器中放置一个“isExpanded”属性。然后，当您翻转小三角形图标时，我可以在控制器上设置此属性，视图会注意到这一点并展开。

但是对于数组控制器，没有明显的方法来拥有这个属性并让它引用单个 ToDos。从上面的规范示例中，似乎我必须绑定到模型上的属性。但是，将它作为临时的、以视图为中心的属性（如“isExpanded”）直接放入 ToDo 模型本身似乎很愚蠢。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:58:46.253

不要在控制器上放置属性。至少在 ember 派生的 Sproutcore 中，这会导致模型状态发生更改，这是您不希望的，因为该属性不在模型上。此外，视图的展开状态是视图关注点；该模型不关心它的显示方式。保持 MVC。

将`expanded`属性放在视图本身上，并使其成为`displayProperties`数组中的值。 [查看 ember 代码（第 599 行）](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js)

每当该数组中的值发生更改时，视图应该重新呈现。无论如何，这就是我在 Sproutcore 中会做的事情。

更新您的评论。两种方法：

1）定义类似的东西

```
displayProperties: ['expand']
...
expandBinding: Em.Binding.oneWay('xyz') 
```

关于你的意见。这样，当您的 1 触发器更改时，所有项目视图都会扩展。

2）保留对您的视图的引用，并在您的状态图中，当用户单击展开按钮时，循环浏览视图并设置展开属性。

选项 1 更简单，但创建大量绑定会影响性能。选项 2 不使用大量绑定。可能想从选项 1 开始，然后如果性能有问题，请转到选项 2。

# sql - SQL聚合函数子查询

> ID：11312401
> 
> 赞同：3
> 
> 时间：2012-07-03T13:49:43.300
> 
> 标签：sql, count, subquery, aggregate, rows

我想要做的是计算子查询返回的行数，基本上如下：

```
select pp.prop_id, COUNT((select employee_id from employee e where e.ao1_hours > 0))
  from proposal_piece pp

  group by pp.prop_id
  order by pp.prop_id 
```

这是我的错误信息：

```
Cannot perform an aggregate function on an expression containing an aggregate or a subquery. 
```

为什么这不起作用？如果 select 只是返回一堆`employee_id's`带有过滤条件的，为什么我不能计算行数或`employee_id's`返回的行数？

我正在计算拥有`ao1_hours > 0`. 按 分组`prop`。

这是关于我的数据库的一些结构信息，作为查询的一部分。

```
 from proposal_piece pp
    INNER JOIN employee e
    on pp.employee_id = e.employee_id 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:52:54.820

试试这个

```
select pp.prop_id, 
      (select COUNT(employee_id) 
       from employee e 
       where e.ao1_hours > 0 and e.employee_id = pp.employee_id) as nb_employees
from proposal_piece pp      
order by pp.prop_id 
```

或这个

```
select pp.prop_id, count(e.employee_id) as nb_employees  
from proposal_piece pp inner join employee e 
     on pp.employee_id = e.employee_id
where e.ao1_hours > 0
group by pp.prop_id
order by pp.prop_id 
```

# c# - 在数组中存储列表

> ID：11312403
> 
> 赞同：0
> 
> 时间：2012-07-03T13:49:47.523
> 
> 标签：c#, arrays, list, object, reference

是否可以在数组中存储包含列表的类？

我在这个概念上遇到了一些麻烦。

这是我的代码：

我的班级称为“arrayItems”：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace EngineTest
{
    [Serializable] //List olarak save etmemiz için bu gerekli.
    public class arrayItems
    {
        public List<items> items = new List<items>();
    }
} 
```

这是我的名为“tileItems”的数组的定义：

```
 public static arrayItems[, ,] tileItems; 
```

这是我创建数组的方式：

```
 Program.tileItems = new arrayItems[Program.newMapWidth, Program.newMapHeight, Program.newMapLayers]; 
```

我面临的问题是我的 Array 的内容为空。我收到了这个错误：

`Object reference not set to an instance of an object.`

当我尝试通过 Add() 命令填充数组内的列表时，我得到了同样的错误。

你能指引我正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:55:16.397

您需要初始化数组中的每个列表：

```
for (int i = 0; i < newMapWidth; i++)
{
    for (int j = 0; j < newMapHeight; j++)
    {
        for (int k = 0; k < newMapLayers; k++)
        {
            arrayItems[i,j,k] = new arrayItems();
        }
    }
} 
```

第一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:59:53.710

You are creating and array of `arrayItems`, which is a reference type, because you defined it as a class. So when you initialize your array, all elements will be assigned `null` by default. That's why you get the error. You have to initialize each element of your array.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:01:08.280

由于您已经在类定义中初始化列表，因此不需要重新初始化`arrayItems`循环内的列表属性。

您有一个数组，其中包含一堆指向任何内容的指针。所以你实际上需要先`arrayItems`在每个数组元素中创建一个新元素。

```
for (int i = 0; i < newMapWidth; i++)
{
    for (int j = 0; j < newMapHeight; j++)
    {
        for (int k = 0; k < newMapLayers; k++)
        {
            arrayItems[i,j,k]= new arrayitem();
        }
    }
} 
```

# .htaccess - 从一个内联站点重定向到另一个内联站点

> ID：11312405
> 
> 赞同：0
> 
> 时间：2012-07-03T13:49:51.737
> 
> 标签：.htaccess, redirect

我想将尝试访问[http://example.com/car/](http://example.com/car/)的用户重定向到.htaccess中的[http://example.com/car/blue/](http://example.com/car/blue/)

我尝试了以下我认为可行的方法：

```
Redirect 301 "/car/"  http://www.example.com/car/blue/
Redirect 301 /car/ http://www.example.com/car/blue/ 
```

他们都不工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:56:20.780

如果您启用了 mod_rewrite，请尝试：

```
RewriteCond %{HTTP_HOST} ^http://www.example.com/car/$ [NC]
RewriteRule ^http://www.example.com/car/$ http://www.example.com/car/blue [R=301,L] 
```

# ruby-on-rails - 从 2.3.5 升级 rails 到最新版本

> ID：11312414
> 
> 赞同：2
> 
> 时间：2012-07-03T13:50:22.140
> 
> 标签：ruby-on-rails, ruby

命令：

```
rails -v 
```

给我`Rails 2.3.5`。

如何升级到最新版本？我已经尝试过`sudo gem update`，但得到“没有什么可更新的”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:08:29.743

Rails 是一颗宝石。因此，您可以使用以下方法更新它：

```
gem install rails -v 2.3.14 
```

这将安装 Rails 2 系列的当前版本。如果这不起作用，您首先必须安装 Rubygems。有关如何执行此操作的帮助，请参阅[Ubuntu Ruby 帮助页面。](https://help.ubuntu.com/community/RubyOnRails#Installing_RubyGems)

当前版本是 3.2。您可以使用以下方式安装它：

```
gem install rails # (chooses the latest automatically) 
```

或与：

```
gem install rails -v 3.2.6 # latest today 
```

如果您有一个 Rails 应用程序，您还需要更改您的`Gemfile`（它位于应用程序的根文件夹中）。

从版本 2 到 3 的更改可能是一项艰巨的任务。有关更多信息，请参阅[Railscast 关于升级到 Rails 3](http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:10:28.183

Rails 3 引入了许多更改，我祝你好运，因为我的经验是这样做很痛苦。但是，我建议首先访问[railscasts.com](http://railscasts.com)并观看[第 #255 集 - 升级到 Rails 3 第 1 部分](http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1)。

如果我没记错的话，其中大部分涉及下载rails `gem install rails -v 3.2.6`，然后`rails new .`在您的目录中运行并确保您不会覆盖您需要的内容。然后确保您的 gem 是最新的并且兼容，如果不是升级它们或用另一个做同样事情的完全替换它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:07:51.773

对此有一个出色的 railscast：[http ://railscasts.com/episodes/225-upgrading-to-rails-3-part-1](http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1)

这基本上很容易，如果您的代码库很小，您不应该害怕，但是它可能涉及重写您现有的一些代码。

# mongodb - MongoDB Schema 设计 - 对帖子进行投票

> ID：11312419
> 
> 赞同：8
> 
> 时间：2012-07-03T13:50:52.740
> 
> 标签：mongodb

考虑一下我有一个网站，上面有很多文章，人们可以对他们喜欢的文章进行投票。

我希望能够查询到按票数排序的特定时间（最后一小时、最后一天、上周）内得票最多的文章。

与 MongoDB 一样，有几种不同的方法可以实现这一点，但我不确定哪一种是正确的。

*   一个帖子文档，其中包含一个投票数组 - 投票本身就是包含用户 ID、用户名和投票日期的文档：

```
 {
    "_id": "ObjectId(xxxx)",
    "title": "Post Title",
    "postdate": "21/02/2012+1345",
    "summary": "Summary of Article",

    "Votes": [
        {
            "userid":ObjectId(xxxx),
            "username": "Joe Smith",
            "votedate": "03/03/2012+1436"
        },
            ]
     } 
```

*   一个单独的投票集合，包含个人投票的详细信息和对投票帖子的引用：

```
{
    "_id": "ObjectId(xxxx)",
    "postId": ObjectId(xxxx),
    "userId": ObjectId(xxxx),
    "votedate": "03/03/2012+1436"
} 
```

第一个是更多 Documentey，但我不知道如何查询投票数组以获取过去 24 小时内投票最多的文档。

我倾向于第二个，因为我认为查询按投票分组的投票计数会更容易，但我不确定它的表现如何。这就是你在关系数据库中的做法，但它似乎不是很有文档记录——但我不确定它是否有问题，是吗？

还是我使用两者的组合？我还会在每个页面加载时实时执行这种类型的聚合查询。或者我只是每分钟运行一次查询并将结果存储在查询结果集合中？

您将如何实现此架构？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T16:13:21.073

跟踪总体投票计数的常用方法是将投票数保留在 post 文档中，并在将新值推送到投票数组时自动更新它。

由于它是一次更新，因此可以保证计数将与数组中的元素数匹配。

如果聚合的数量是固定的并且站点非常繁忙，您可以扩展此范例并增加额外的计数器，例如一个月、一天和小时的计数器，但这可能很快就会失控。因此，您可以使用新的[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)（在 2.1.2 开发版中可用，将在 2.2 版中投入生产。它比 Map/Reduce 更易于使用，它可以让您非常简单地进行您想要的计算，特别是如果您注意将您的投票日期存储为 ISODate() 类型。

本月最高投票者的聚合查询的典型管道可能如下所示：

```
today = new Date();
thisMonth = new Date(today.getFullYear(),today.getMonth());
thisMonthEnd = new Date(today.getFullYear(),today.getMonth()+1);

db.posts.aggregate( [
    {$match: { "Votes.votedate": {$gte:thisMonth, $lt:thisMonthEnd} } },
    {$unwind: "$Votes" },
    {$match: { "Votes.votedate": {$gte:thisMonth, $lt:thisMonthEnd} } },
    {$group: { _id: "$title", votes: {$sum:1} } },
    {$sort: {"votes": -1} },
    {$limit: 10}
] ); 
```

这会将管道的输入限制为通过将投票日期与您计算的月份相匹配来获得投票的帖子，“展开”数组以获得每次投票的一个文档，然后执行等效的“分组依据”总结每个标题的所有投票（我假设标题是唯一的）。然后它按投票数降序排序并将输出限制为前十个。

您还可以按天（例如）汇总该月的投票，以查看投票最活跃的日期：

```
db.posts.aggregate( [
    {$match: { "Votes.votedate": {$gte:thisMonth, $lt:thisMonthEnd} } },
    {$unwind: "$Votes" },
    {$match: { "Votes.votedate": {$gte:thisMonth, $lt:thisMonthEnd} } },
    {$project: { "day" : { "$dayOfMonth" : "$Votes.votedate" }  } },
    {$group: { _id: "$day", votes: {$sum:1} } },
    {$sort: {"votes": -1} },
    {$limit: 10}
] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:27:34.590

您选择的架构很大程度上取决于您的用例。如果您期待大量投票/评论并希望独立于它们所属的帖子来处理它们，您可以将它们保存在一个单独的集合中，将 postID 作为 'foriegn key'..但是，如果您想在加载特定帖子时加载所有选票，并且如果没有包含它们的帖子，选票本身没有任何意义，那么请进行嵌入（在您的情况下，第一个） 方法。

# ruby-on-rails - Twitter 引导和狂欢项目？

> ID：11312420
> 
> 赞同：2
> 
> 时间：2012-07-03T13:50:57.047
> 
> 标签：ruby-on-rails, twitter-bootstrap, spree

如何在 spree 项目中安装和配置 twitter-boostrap-rails gem？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T07:33:09.493

为此，您可以使用[github.com/Andrewmp1/spree_bootstrap_theme](http://github.com/Andrewmp1/spree_bootstrap_theme)

PS 建立并参与合作。现在我在 product#show 页面中寻找制作工作画廊。我在 TB 上的商店：http: [//vk-magazin.com](http://vk-magazin.com)

# javascript - Sencha Touch - addAfter/insertAfter 一个组件

> ID：11312426
> 
> 赞同：1
> 
> 时间：2012-07-03T13:51:24.153
> 
> 标签：javascript, extjs, sencha-touch-2

实际上是否可以为组件添加后或插入后？

文档继续关于 .add() 将一些东西扔到容器的末尾，但我正在循环遍历表单中的字段并在每个字段之后显示它们的错误。所以我需要在这些之后添加一个新组件。

似乎只有这些组件的实际元素才有可能？就像是：

```
errorElement = Ext.create('Ext.Container', {
    //stuff
});
errorElement.element.insertAfter(field.element); 
```

这很好，看起来很好，但是如果我执行以下操作，则组件似乎不存在于 Dom 的位置：

```
Ext.Viewport.getActiveItem().query('panel'); // []
Ext.ComponentQuery.query('panel'); // Ext.apply.create.Class 
```

请不要告诉我我是唯一一个在问这种事情的人，这怎么在文档中的任何地方都没有突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:00:08.167

You can use [Container.insert()](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.container.AbstractContainer-method-insert) method that `Inserts a Component into this Container at a specified index`.

However inserting an error Component (Component? not Element?) doesn't sound like a good idea. Default form fields already have an element for displaying errors inside them, and you can tweak its appearance through CSS.

# c - *** 检测到 glibc *** 在简单的 I/OC 代码中

> ID：11312432
> 
> 赞同：0
> 
> 时间：2012-07-03T13:51:41.137
> 
> 标签：c, memory, glibc, corruption

C 代码非常简单：从名为`file_bib1`i 的文件中获取每一行文本以供进一步分析（尚未实现）。这是代码：

```
int main ()
{
FILE * fp;
char *a;
int check;
int end = 0;
long int size;
long int start = 0;
fp = fopen("file_bib1", "r");

while ( end != 1 )
{
    size = 0;

    if (ftell(fp) != 0)
        start = ftell(fp) + 1;

    fseek(fp, start, SEEK_SET); 
    while (getc(fp) != '\n')
        size = size + 1;

    fseek(fp, start, SEEK_SET);
    a = (char*) malloc(size * sizeof(char));

    check = fscanf(fp, "%[^\n]", a);
    if( check == 0)
    {
        fscanf(fp, "%[^\EOF]", a);
        end = 1;
    }
    printf("%s\n", a);
    free(a);
}

fclose(fp);

return 0;
} 
```

相反，这是 'file_bib1' 的内容：

```
autore: Di Ciccio      , Antonio; titolo: Manuale di architettura pisana; editore: Palestro; anno: 1990; prestito: t Fri Feb 10 00:00:00 CET 2012; volume: 1345; scaffale: A.west.2;      
autore : Di Ciccio   , Antonio; titolo: Manuale di architettura pisana; editore: Palestro; anno: 1990; luogo_pubblicazione: Milano; prestito: 10-02-2012; collocazione: B.23.4;descrizione_fisica: 123 p., ill,  23 cm;
autore: Melis, Antonio Pietro Angelo; autore: Gatto Magnolfi, Gianni;  titolo:Manuale di architettura fiorentina; editore: EQR; anno: 1910; nota:  Copia del Vescovo; collocazione: Z.12.56; luogo_pubblicazione: Firenze; descrizione_fisica: 34 p., cov,  59 cm;
autore: Kernighan, Brian W.; autore: Ritchie, Dennis M.;  titolo: Il linguaggio C (seconda Edizione); editore: Jackson Libri; anno: 1989; nota: Edizione italiana; collocazione: Z.22.56; luogo_pubblicazione: Milano; descrizione_fisica: 359 p., softcov,  13 cm;
autore: Kernighan, Brian W.; autore: Pike, Rob;  titolo: Programmazione nella Pratica; editore: Addison-Wesley Longman Italia Editoriale; anno: 1999; nota: Edizione italiana; collocazione: Z.24.56; luogo_pubblicazione: Milano; descrizione_fisica: 294 p., softcov,  13 cm; prestito: 13-07-2012;
autore: Singh, Jaswinder Pal; autore: Culler, David E.;  autore: Gupta,Anoop; titolo: Parallel Computer Architecture: A Hardware/Software Approach; editore: Morgan Kaufmann; anno: 1999; nota:  Copia M. Fillo; collocazione: QA76 58; luogo_pubblicazione: San Francisco, CA; descrizione_fisica: 1021 p., cov, ill,  23 cm;
autore: Hennessy, John L.; autore: Patterson, David A.;  titolo: Computer Architecture, Fifth Edition: A Quantitative Approach   ; editore:  Morgan Kaufmann; anno: 2011; nota: ; collocazione: HHH.56; luogo_pubblicazione: San Francisco, CA; descrizione_fisica: 896 p., softcov, 7 1/2 X 9 1/4 inc;
autore: Luccio, Fabrizio; autore: Pagli, Linda;  autore: Steel, Graham;titolo:Mathematical and Algorithmic Foundations of the Internet ; editore: CRC Press, Taylor and Francis Group; anno: 2011; nota: Chapman & Hall/CRC Applied Algorithms and Data Structures series; collocazione: Z.DDf.56; luogo_pubblicazione: New York; descrizione_fisica: 434 p., softcovcov,  22 cm;
autore : Di Ciccio   , Antonio; titolo: Manuale di architettura pisana; editore: Palestro; anno: 1990; luogo_pubblicazione: Milano; prestito: 10-0-2012; collocazione: B.23.4;descrizione_fisica: 123 p., ill,  23 cm;
autore: Melis, Antonio Pietro Angelo; autore: Gatto Magnolfi, Gianni;  titolo:Manuale di architettura fiorentina; editore: EQR; anno: 1910; nota:  Copia del Vescovo; collocazione: Z;12.56; luogo_pubblicazione: Firenze; descrizione_fisica: 34 p., cov,  59 cm;
autore: Melis, Antonio Pietro Angelo; autore:, Gianni;  titolo:Manuale di architettura fiorentina; editore: EQR; anno: 1910; nota:  Copia del Vescovo; collocazione: Z.12.56; luogo_pubblicazione: Firenze; descrizione_fisica: 34 p., cov,  59 cm;
autore: Singh, Jaswinder Pal; autore: Culler, David E.;  autore: Gupta,Anoop; titolo: Parallel Computer Architecture: A Hardware/Software Approach; editore: Morgan Kaufmann; 1999; nota:  Copia M. Fillo; collocazione: QA76 58; luogo_pubblicazione: San Francisco, CA; descrizione_fisica: 1021 p., cov, ill,  23 cm; 
autore: Hennessy, John L.; autore: Patterson, David A.;  titolo: Computer Architecture, Fifth Edition: A Quantitative Approach   ; editore:  Morgan Kaufmann; anno: 2011; nota: ; collocazione: HHH.56; luogo_pubblicazione: San Francisco, CA; descrizione_fisica: 896 p.; softcov, 7 1/2 X 9 1/4 inc; 
autore: Luccio, Fabrizio; autore: Pagli, Linda;  autore: Steel, Graham;titolo:Mathematical and Algorithmic Foundations of the Internet ; editore: CRC Press, Taylor and Francis Group; anno: 2011; nota: Chapman & Hall/CRC Applied Algorithms and Data Structures series; collocazione: Z.DDf.56; luogo_pubblicazione: New York; descrizione_fisica: 434 p., softcovcov,  22 cm
autore: Melis, Antonio Pietro Angelo; autore: Gatto Magnolfi, Gianni;  titolo: Manuale di architettura fiorentina; editore: EQR; anno: 2010; nota:  Copia del Vescovo; prestito: f; volume: 5; Scaffale; B.12; 
```

每一行都以`\n`and 结尾，最后一行`EOF`像往常一样以 and 结尾。当我运行代码时，在运行良好到中间文件后，我在 linux 终端中看到了这个错误

```
*** glibc detected *** ./prova: double free or corruption (!prev): 0x00000000017e8250 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7e626)[0x7f0049d92626]
./prova[0x400880]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f0049d3576d]
./prova[0x4006a9]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:01 18770                              /home/arrigo/Desktop/prova
00600000-00601000 r--p 00000000 08:01 18770                              /home/arrigo/Desktop/prova
00601000-00602000 rw-p 00001000 08:01 18770                              /home/arrigo/Desktop/prova
017e8000-01809000 rw-p 00000000 00:00 0                                  [heap]
7f0049afe000-7f0049b13000 r-xp 00000000 08:01 5697                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0049b13000-7f0049d12000 ---p 00015000 08:01 5697                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0049d12000-7f0049d13000 r--p 00014000 08:01 5697                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0049d13000-7f0049d14000 rw-p 00015000 08:01 5697                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7f0049d14000-7f0049ec7000 r-xp 00000000 08:01 5676                       /lib/x86_64-linux-gnu/libc-2.15.so
7f0049ec7000-7f004a0c6000 ---p 001b3000 08:01 5676                       /lib/x86_64-linux-gnu/libc-2.15.so
7f004a0c6000-7f004a0ca000 r--p 001b2000 08:01 5676                       /lib/x86_64-linux-gnu/libc-2.15.so
7f004a0ca000-7f004a0cc000 rw-p 001b6000 08:01 5676                       /lib/x86_64-linux-gnu/libc-2.15.so
7f004a0cc000-7f004a0d1000 rw-p 00000000 00:00 0 
7f004a0d1000-7f004a0f3000 r-xp 00000000 08:01 5656                       /lib/x86_64-linux-gnu/ld-2.15.so
7f004a2d2000-7f004a2d5000 rw-p 00000000 00:00 0 
7f004a2ee000-7f004a2f3000 rw-p 00000000 00:00 0 
7f004a2f3000-7f004a2f4000 r--p 00022000 08:01 5656                       /lib/x86_64-linux-gnu/ld-2.15.so
7f004a2f4000-7f004a2f6000 rw-p 00023000 08:01 5656                       /lib/x86_64-linux-gnu/ld-2.15.so
7fff9a14f000-7fff9a170000 rw-p 00000000 00:00 0                          [stack]
7fff9a1ff000-7fff9a200000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

任何人都可以帮我“翻译”这个错误吗？

- - - - - - - - - -编辑 - - - - -

发现错误。通过代码中的一些 printf ，我发现了“ free(a) ”中的错误，但我不明白为什么它会产生这样的错误......

- - - - -编辑 - - - - - -

我发现了真正的问题......程序失败的受控行以终止符后的空白`;`结束......在某种程度上，`free(a)`发疯了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:04:56.787

您的问题是您没有分配足够的内存来存储您的行（如 R.. 的评论中所示）。您可以通过打印所`strlen`读内容的 和 的值来发现这一点`size`。他们是一样的。这意味着`fscanf`当它写入终止`NUL`字符时将溢出输入缓冲区，这会破坏堆。您收到的错误消息是`glibc`抱怨其损坏状态。

它没有发生在第一行输入的原因不是很重要，因为超出分配的内存写入会导致未定义的行为，而未定义的行为包括它不会导致问题。程序应该修复未定义的行为，不仅因为它是正确的做法，还因为它最终可能会导致问题。

您可以通过在扫描字符串中指定最大长度说明符来避免该问题，但您必须在缓冲区中构建扫描字符串才能实现这一点。

```
char fmt[64];
snprintf(fmt, sizeof(fmt), "%%%d[^\n]", size);
check = fscanf(fp, fmt, a); 
```

但是您还必须添加代码来检查您是否真的阅读了完整的行。您可能想要进行的修复是将分配的大小增加一以解决终止`NUL`. 但是，解决此问题后，您的程序将处于无限循环中。这是因为您的`getc`循环没有检查`EOF`. 你需要添加它。

```
int c;
while ((c = getc(fp)) != '\n') {
    if (c == EOF) {
        end = 1;
        break;
    }
    size = size + 1;
}
if (!end) {
    //...
} 
```

您的第二个扫描字符串`%[^\EOF]`可能不是您认为的意思。无论如何，没有真正的方法可以告诉`fscanf`扫描到文件末尾。如果`check`失败，则更容易报告失败并退出。然后，您可以稍后找出您的输入导致它失败的原因，并修复输入。

`fscanf`由于处理自由格式输入存在各种危险，因此使用起来很棘手。缓冲区溢出是一个问题，但如果输入的格式不符合您的预期，该函数也可能出现意外行为。这就是为什么程序员会建议无条件地将输入读入缓冲区，并解析缓冲区，而不是`fscanf`同时读取和解析输入。

您可以实现一些简单的代码，仅`fgets`用于获取一行，但需要进行一些复制。如果缓冲区不以 a 结尾，则将缓冲区的大小调整得更大`\n`，然后继续阅读。

```
size_t size = 256;
char *line = malloc(size);
line[size-2] = '\0';
while (fgets(line, size, fp) != 0) {
    while (line[size-2] && line[size-2] != '\n') {
        char *bigger_line = realloc(line, 2*size);
        assert(bigger_line); // rudimentary error handling
        size *= 2;
        line = bigger_line;
        line[size-2] = '\0';
        if (fgets(line + size/2 - 1, size/2 + 1, fp) == 0) {
            // last line doesn't end with '\n'
            break;
        }
    }
    //... handle input line
}
//...
free(line); 
```

# mysql - 如何更改列并更改默认值？

> ID：11312433
> 
> 赞同：234
> 
> 时间：2012-07-03T13:51:43.457
> 
> 标签：mysql, sql

尝试更改列的数据类型并设置新的默认值时出现以下错误：

```
ALTER TABLE foobar_data ALTER COLUMN col VARCHAR(255) NOT NULL SET DEFAULT '{}'; 
```

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'VARCHAR(255) NOT NULL SET DEFAULT '{}'' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：328
> 
> 时间：2012-07-03T13:54:10.373

```
ALTER TABLE foobar_data MODIFY COLUMN col VARCHAR(255) NOT NULL DEFAULT '{}'; 
```

第二种可能性相同（感谢 juergen_d）：

```
ALTER TABLE foobar_data CHANGE COLUMN col col VARCHAR(255) NOT NULL DEFAULT '{}'; 
```

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2015-01-12T17:28:21.717

作为后续，如果您只想设置默认值，那么可以肯定您可以使用 ALTER .. SET 语法。只是不要把所有其他的东西放在那里。如果您要将列定义的其余部分放入，请根据接受的答案使用 MODIFY 或 CHANGE 语法。

无论如何，用于设置列默认值的 ALTER 语法，（因为这是我来到这里时所寻找的）：

```
ALTER TABLE table_name ALTER COLUMN column_name SET DEFAULT 'literal'; 
```

'literal' 也可以是一个数字（例如`...SET DEFAULT 0`）。我没试过，`...SET DEFAULT CURRENT_TIMESTAMP`但为什么不呢？

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-09-06T09:41:08.313

如果您想为已创建的列添加默认值，这对我有用：

```
ALTER TABLE Persons
ALTER credit SET DEFAULT 0.0; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-27T14:15:59.727

对于默认 CURRENT_TIMESTAMP：

```
ALTER TABLE tablename
 CHANGE COLUMN columnname1 columname1 DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
 CHANGE COLUMN columnname2 columname2 DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP; 
```

请注意**双**列名声明

删除 DEFAULT CURRENT_TIMESTAMP：

```
ALTER TABLE tablename
 ALTER COLUMN columnname1 DROP DEFAULT,
 ALTER COLUMN columnname2 DROPT DEFAULT; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-11T07:01:01.543

接受的答案效果很好。

如果出现**Invalid use of NULL value**错误，则在**NULL**值上，**将所有空值更新为该列中的默认值**，然后尝试进行更改。

```
UPDATE foobar_data SET col = '{}' WHERE col IS NULL;

ALTER TABLE foobar_data MODIFY COLUMN col VARCHAR(255) NOT NULL DEFAULT '{}'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-03T00:00:14.280

如果上述方法对您不起作用（即：您正在使用**新的 SQL 或 Azure**），请尝试以下操作：

1）删除现有的列约束（如果有）：

```
ALTER TABLE [table_name] DROP CONSTRAINT DF_my_constraint 
```

2）创建一个新的：

```
ALTER TABLE [table_name] ADD CONSTRAINT DF_my_constraint  DEFAULT getdate() FOR column_name; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-02T08:24:48.620

尝试这个

```
ALTER TABLE `table_name` CHANGE `column_name` `column_name` data_type  NULL DEFAULT ''; 
```

像这样

```
ALTER TABLE `drivers_meta` CHANGE `driving_license` `driving_license` VARCHAR(30) NULL DEFAULT ''; 
```

# sql - SQL Server，如何将默认排序规则设置为 unicode？

> ID：11312442
> 
> 赞同：2
> 
> 时间：2012-07-03T13:52:15.720
> 
> 标签：sql, sql-server, unicode, encoding

我有一个 WPF+WCF 应用程序，现在运行良好 2 年，但现在他们有一个需求：他们想在数据库中输入一些数据，而不是欧洲字母表（例如西里尔字母）。

问题是数据库作为排序规则设置为Latin1_General_CI_AS_WS，当我在其中存储数据（例如вмешательство）并检索它们时，我得到了一些“??????” 而是（当进入 SQL Server 管理工作室时）。

应用程序的其余部分已经知道使用其他类型的字母（不是为了阅读方向，但不是我的直接问题）。

那么如何在现有数据库中将排序规则设置为 unicode？SQL Server 管理工作室中的排序规则字段为灰色。

我正在使用 EntityFramework 与数据库进行所有通信，而且我还得到了那些“????” 如果我检索任何字段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T14:15:56.170

您的问题不是排序规则，而是数据类型。

如评论中所述，您正在使用`varchar(x)`and `text`。这些类型不存储 unicode 数据。您需要使用`nvarchar(x)`and`ntext`来代替。（如果您使用的是 SQL 2005 或更高版本，则应使用`nvarchar(MAX)`代替`ntext`）

# c++ - 运算符<比较多个字段

> ID：11312448
> 
> 赞同：23
> 
> 时间：2012-07-03T13:52:25.693
> 
> 标签：c++, comparison-operators, lexicographic

我有以下 operator< 应该首先按一个值排序，然后按另一个值排序：

```
 inline bool operator < (const obj& a, const obj& b) 
    {
        if(a.field1< b.field1)
            return true;
        else
            return a.field2 < b.field2;
    } 
```

我觉得这是不正确的，如果不对成员变量进行第三次比较测试，您将无法做到这一点，但我找不到任何这不起作用的示例。那么这真的会像预期的那样排序吗？谢谢

编辑：我会将其编码为：

```
 inline bool operator < (const obj& a, const obj& b) 
    {
        if(a.field1< b.field1)
            return true;
                    else if(a.field1> b.field1)
            return false;
        else
            return a.field2 < b.field2;
    } 
```

有什么区别吗？我问是因为我知道我的经验是正确的，但也比第一个长

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-03T13:55:08.817

## 我愿意自己做这一切。。

您应该只比较 的值`Obj::field2`是否`Obj::field1`相等。

### 通俗易懂的方法：

```
/* This will meet the requirements of Strict-Weak-Ordering */

if (a.field1 != b.field1) return a.field1 < b.field1;
else                      return a.field2 < b.field2; 
```

### 正确（推荐）的方式：

实现它的“*正确*`operator<`”方式仅用于比较字段，下面看起来比实际复杂。

然而，它将产生与之前编写的*易于理解的*示例相同的结果。

```
return a.field1 < b.field1 || (
  !(b.field1 < a.field1) && a.field2 < b.field2
); 
```

* * *

## 必须有一种实施方式而`operator<`不会引起很多头痛吗？

### C++11

您可以`std::tuple`从已定义多个字段的*STL*`operator<`中使用，如下例所示。

```
#include <utility>

...

inline bool
operator< (Obj const& lhs, Obj const& rhs)
{
  return std::tie (lhs.field1, lhs.field2) < std::tie (rhs.field1, rhs.field);
} 
```

### C++03

如果您的编译器尚不支持 C++11，并且您只需要比较您可以使用的每个对象的两个字段即可`std::pair`。

的原因`std::make_pair`与前面示例中使用 的原因相同`std::tie`。

```
#include <utility>

...

inline bool
operator< (Obj const& lhs, Obj const& rhs)
{
  return std::make_pair (lhs.field1, lhs.field2)
       < std::make_pair (rhs.field1, rhs.field2);
} 
```

^(using`std::pair`将需要创建成员的副本，这在某些情况下是不可取的。)

### 这真的是推荐的做法吗？

请参阅以下问题/答案以获取更多信息，但要总结一下；c++11 方法不会造成太多开销，而且实现起来非常简单。

*   [通过 'tuple' 和 'tie' 实现比较运算符，好主意吗？](https://stackoverflow.com/q/6218812/1090079 "通过 'tuple' 和 'tie' 实现比较运算符，好主意吗？")

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T13:56:30.437

想想如果`a.field1`大于`b.field1`但`a.field2`小于会发生什么`b.field2`。在这种情况下，您*仅*根据`field2`哪个不是您想要的进行比较。

您只想`field2`在字段相等的情况下发挥作用`field1`，所以您要寻找的是（伪代码）：

```
if a.field1 < b.field1: return true
if a.field1 > b.field1: return false
# field1s is equal here.
return a.field2 < b.field2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T13:54:29.807

不，您还需要 catch `(a.field1 > b.field1)`。

这不是严格的弱排序，因为它会给出`(1,2) < (2,1)`，但也会给出`(2,1) < (1,2)`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T14:41:55.010

这是一个依赖**逻辑短路**规则来避免显式分支的版本

```
template<typename T>
bool operator< (T const& a, T const& b)
{
        return (
                 ( a.field1 < b.field1 ) || (( a.field1 == b.field1 ) &&
                 ( a.field2 < b.field2 ))
        );
} 
```

这假设您的原始类型`field1`具有`operator==`. 为超过 2 个字段键入这个变得乏味，但`std::lexicographical_compare`如果您的类`obj`将字段存储在`std::array<T, N>`某个类型`T`和大小的字段中，则可以使用`N`

```
template<typename T, int N>
struct obj
{
    std::array<T, N> field;
};

bool operator< (obj const& a, T const& b)
{
        return std::lexicographical_compare(
            a.field.begin(), a.field.end(), 
            b.field.begin(), b.field.end()
        );
} 
```

请注意，有一篇草稿[N3326](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3326.pdf)讨论了为类类型添加运算符`==`和自动。`<`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-17T19:20:59.997

我下面描述的方法涉及一些宏，但在许多情况下仍然有用。也许这样的事情也可以用内联函数来完成。

```
#define CMP_LT2(a, b) ((a) < (b) ? (a) : (b))
#define CMP_GT2(a, b) ((a) > (b) ? (a) : (b))
#define CMP_LTE2(a, b) ((a) <= (b) ? (a) : (b))
#define CMP_GTE2(a, b) ((a) >= (b) ? (a) : (b))
#define CMP_EQ2(a, b) ((a) == (b))
#define CMP_NEQ2(a, b) ((a) != (b))
#define CMP_LT3(a, b, c) (CMP_EQ2(a, b) ? (c) : CMP_LT2(a, b))
#define CMP_GT3(a, b, c) (CMP_EQ2(a, b) ? (c) : CMP_GT2(a, b))
#define CMP_LTE3(a, b, c) (CMP_EQ2(a, b) ? (c) : CMP_LT2(a, b))
#define CMP_GTE3(a, b, c) (CMP_EQ2(a, b) ? (c) : CMP_GT2(a, b))
#define CMP_EQ3(a, b, c) ((a) == (b) ? (c) : false)
#define CMP_NEQ3(a, b, c) ((a) != (b) ? true : (c)) 
```

然后假设你有：

```
struct Point3D {
    double x;
    double y;
    double z;
}; 
```

然后你写：

```
struct Point3D {
    double x;
    double y;
    double z;

    bool operator<(const Point3D& other) const noexcept
    {
        return CMP_LT3(z, other.z,
               CMP_LT3(y, other.y,
               CMP_LT2(x, other.x)));
    }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-11T17:46:27.003

您可以在 c++11 或更高版本中使用可变参数模板

```
template<typename T>
bool less_than( const T& a, const T& b )
{
    return a < b;
}

template<typename T, typename... Args>
bool less_than( const T& a, const T& b, Args... args )
(
    if ( a < b )
          return true;
    else if ( b < a )
          return false;
    else
          return less_than(  args...  );
) 
```

然后你会打电话给

```
return less_than(a.x,b.x,
                 a.y,b.y,
                 a.z,b.z); 
```

只要类型具有 < 运算符，它就支持任意数量的字段或类型。您可以混合类型。

# linux - 在 emacs 或 xemacs 文件上自动保存（最好在失去焦点时）

> ID：11312449
> 
> 赞同：1
> 
> 时间：2012-07-03T13:52:31.553
> 
> 标签：linux, emacs, text-editor, fedora, xemacs

理想情况下，我想使用 TextMate 的 emacs 功能进行复制，从而在失去焦点时，即我点击远离缓冲区，我的文件将保存。

如果这不可能，我想自定义 emacs 以便它会为我写的每个字符自动保存文件。当我这样说时，我并不是说我想自动保存到 ~ 备份文件。我想保存我目前正在处理的文件。

我正在开发 Fedora 虚拟机。

注意我不是在寻找备份或自动保存。我希望保存我实际所在的文件，这样如果我加载了我在 Web 浏览器中编辑的 html 文件，它将反映我的新更改，而无需我显式更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:14:32.003

据我所知，GNU Emacs 没有失去焦点的钩子，但窗口管理器通常提供一种方法来检测活动应用程序窗口的变化。如果您发现如何使用窗口管理器进行操作，那么只需调用[emacsclient](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html#Emacs-Server)并告诉正在运行的 emacs 保存当前缓冲区即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:43:45.187

Emacs 就是这样做的。该功能称为自动保存。每当 Emacs 崩溃或每次 ## 击键时，您的 Emacs 会话总是会自动保存。查看[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Auto-Save.html#Auto-Save)

Emacs 没有失去焦点钩子，所以那部分是不可能的。而且我从来没有希望过它。;-)

# delphi - 将 Delphi Indy v9 代码转换为 v10

> ID：11312457
> 
> 赞同：2
> 
> 时间：2012-07-03T13:53:10.000
> 
> 标签：delphi, email, indy10

我在使用下面引用的代码时遇到问题`StoredPathName`。由于 Indy 10 不使用`StoredPathName`，我不确定如何更改此代码以从 V9 调整到 V10。下面的代码不是由我编写的，当涉及到这种类型的代码时，我仍然是新手，所以如果可能的话，我希望有一个代码示例来说明如何纠正问题。

```
vlist:TStringList;

...
for j:=numEmails downto 1 do
  begin
    Msg.Clear;
    Retrieve(j,Msg);

    for k:=0 to Msg.MessageParts.Count-1 do
      with Msg.MessageParts[k] do
        if Msg.messageParts[k] is TIdAttachmentFile then
          begin
            //Get the name of the file that was sent.
            aname := TIdAttachmentFile(Msg.MessageParts[k]).FileName;

            if SameText(aname,ExtractFilename(PacketFilename))
            and FileExists(Longfilename(StoredPathName)) then
              begin
                //Read attachment and do call-back if defined.
                vlist.LoadfromFile(LongFilename(StoredPathName));

                if assigned(OnReceive) then
                  OnReceive;
              end
          end;
  end;

Disconnect;

except
  on E:Exception do
    result := E.Message;
end; 
```

还有另一段代码是......`Connect(9000);` 因为 9000 不是一个允许的参数，所以我只是将其更改为`Connect;`Is that OK?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:23:19.750

StoredPathName 是从 TIdMessagePart 移动到 TIdAttachmentFile 的属性。如果您更改代码以在顶部进行类型转换，它应该都可以工作。

改变这个：

```
 with Msg.MessageParts[k] do
    if Msg.messageParts[k] is TIdAttachmentFile then 
```

到：

```
 if Msg.messageParts[k] is TIdAttachmentFile then
    with TIdAttachmentFile(Msg.MessageParts[k]) do 
```

# php - 在文档加载停止搜索爬虫之前，php 标头位置会发生变化吗？

> ID：11312461
> 
> 赞同：1
> 
> 时间：2012-07-03T13:53:29.627
> 
> 标签：php, search, robots.txt

通过要求用户设置会话并且如果它没有使用 php 标头重定向他们，我是否可以安全地阻止搜索引擎爬虫看到我的页面内容？

我不知道他们会如何，但我想保持积极态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:54:57.390

好的爬虫会跟随重定向而看不到页面内容。不良机器人仍会抓取该页面。这就是为什么您应该始终[`exit()`](http://us2.php.net/manual/en/function.exit.php)在发送重定向标头后使用结束脚本的执行。

```
header('Location: /login.php');
exit(); 
```

# vb.net - 将弹出窗口带到前面的 VB 网站

> ID：11312464
> 
> 赞同：0
> 
> 时间：2012-07-03T13:53:43.790
> 
> 标签：vb.net

在 Visual Studio 中使用 Visual Basic 语言在 asp.net 网页上工作。在一页上有一个带有查找按钮的文本框。当按下查找按钮时，会弹出一个新的较小的弹出窗口，用户单击一个值，该值将被发布回原始页面，然后弹出窗口关闭。我可以单击查找按钮，然后弹出小窗口。现在，如果我不选择一个值而是在网站上单击返回，弹出窗口显然会失去焦点并移到主网页窗口后面但仍然打开。如果我再次单击查找按钮，当第一个仍然打开时，弹出窗口会刷新并重新加载，但会停留在主网页窗口的后面。在弹出窗口已经打开并移到主网页窗口后面后，如何将它带回前面？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:24:04.287

Assuming you are already using javascript to get this behaviour, have a look at the z-index.

something like document.getElementById(yourpopupdivId).style.zIndex = "99"; or any other high number will on the element containing your small popup will probably do the trick.

# android - 我可以在 Android 应用程序中使用 FFmpeg 的库吗？

> ID：11312465
> 
> 赞同：5
> 
> 时间：2012-07-03T13:53:50.493
> 
> 标签：android, android-ndk, ffmpeg, cygwin, rtsp

在网上一段时间后，我发现我必须在我的应用程序中使用 FFmpeg。我发现了很多与 Android 和 FFmpeg 相关的东西。我只想使用 FFmpeg，但我无法创建库，也不知道如何使用它们。

我只想接收 RTSP 流，然后以某种方式将其放入 videoview 或 mediaplayer。我的 Eclipse 中已经安装了 NDK，并且我知道如何使用 CYGWIN。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T15:06:54.427

在本教程之后，我尝试在我的 Android 应用程序中使用 FFmpeg 库：[教程链接](http://www.roman10.net/how-to-build-ffmpeg-for-android/) 非常好。我创建了库，也可以在应用程序中调用。但是我想要的是使用 MMS 协议的流式链接，但我做不到，因为我不知道如何使用本地方法，所以我使用的是[vitamio 插件](http://vitamio.org/)。这很简单。如果您发现如何正确使用 FFmpeg 库，请与我们分享。

抱歉英语不好，不是我的母语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T07:49:45.623

默认情况下，Android 支持 RTSP 流协议，使用 MediaPlayer 只有我能够流式传输 RTSP。但限制是您不能操作或自定义媒体，因为您必须使用 FFMPEG、Vlcj 等库您可以通过以下链接设置 FFMPEG 环境[http://www.roman10.net/how-to-build- ffmpeg-for-android/](http://www.roman10.net/how-to-build-ffmpeg-for-android/)

我没有在 android 上尝试过 vlcj，但在桌面应用程序上工作得很好。希望这会有所帮助

# android - 处理程序消息为空

> ID：11312472
> 
> 赞同：2
> 
> 时间：2012-07-03T13:54:23.230
> 
> 标签：android, handler

我想知道我的代码是否有问题，因为我有两个 a 实例`Handler`，从我的角度来看，它们几乎相同，但一个正确返回，另一个没有。在主要活动中，它们的调用如下：

在职的

```
BingSpatialDataService bsds = new BingSpatialDataService(Constants.BingSpatialAccessId,
                                                         Constants.BingSpatialSourceName,
                                                         Constants.BingSpatialEntityTypeName,
                                                         Constants.BingSpatialQueryKey);
bsds.FindByAreaCompleted = new Handler()
{
   public void handleMessage(Message msg)
   {
      if(msg.obj != null)
      {
         // Do something with msg
      }
   }
};

bsds.FindByArea(l.Point, searchRadius, null); 
```

不工作

```
FWSDataService fds = new FWSDataService();
fds.FindByTimespanCompleted = new Handler()
{
   public void handleMessage(Message msg)
   {
      if(msg.obj != null)
      {
         // Do something with msg
      }
   }
};

fds.FindByTimespan(timespan); 
```

`fds`并且`bsds`是包含处理程序代码的类

`bsds`

```
public class BingSpatialDataService {
    public Handler FindByAreaCompleted;
    public Handler FindByIDCompleted;
    public Handler FindByPropertyCompleted;

    private String _queryKey;
    private String _serviceURL;

    public BingSpatialDataService(String accessId, String dataSourceName, String entityTypeName, String queryKey){
        _queryKey = queryKey;       
        _serviceURL = "http://spatial.virtualearth.net/REST/v1/data/" + accessId + "/" + dataSourceName + "/" + entityTypeName;
    }

    /* Public Methods */

    //http://spatial.virtualearth.net/REST/v1/data/accessId/dataSourceName/entityTypeName?spatialFilter=nearby(latitude,longitude,distance)&queryoption1&queryoption2&queryoptionN&key=queryKey
    public void FindByArea(Coordinate center, double distance, QueryOption options){
        StringBuilder sb = new StringBuilder();
        sb.append(_serviceURL);

        //Add spatial filter
        sb.append("?spatialFilter=nearby(");
        sb.append(center.Latitude);
        sb.append(",");
        sb.append(center.Longitude);
        sb.append(",");
        sb.append(distance);
        sb.append(")");

        //Add Query Options
        if(options != null){
            sb.append(options.toString());
        }else{
            sb.append("&$format=json");
        }

        //Add Bing Maps Key
        sb.append("&key=");
        sb.append(_queryKey);

        //create service request
        ServiceRequest request = new ServiceRequest(sb.toString(), RequestType.GET, ContentTypes.JSON);
        QueryServiceAsyncTask service = new QueryServiceAsyncTask(FindByAreaCompleted);
        service.execute(request);
    }

    //http://spatial.virtualearth.net/REST/v1/data/accessId/dataSourceName/entityTypeName?spatialFilter=bbox(southLatitude,westLongitude,northLatitude,eastLongitude)&queryOption1&queryOption2&queryOptionN)&key=queryKey
    public void FindByArea(LocationRect boundingBox, QueryOption options){
        StringBuilder sb = new StringBuilder();
        sb.append(_serviceURL);

        //Add spatial filter
        sb.append("?spatialFilter=bbox(");
        sb.append(boundingBox.getSouth());
        sb.append(",");
        sb.append(boundingBox.getWest());
        sb.append(",");
        sb.append(boundingBox.getNorth());
        sb.append(",");
        sb.append(boundingBox.getEast());
        sb.append(")");

        //Add Query Options
        if(options != null){
            sb.append(options.toString());
        }else{
            sb.append("&$format=json");
        }

        //Add Bing Maps Key
        sb.append("&key=");
        sb.append(_queryKey);

        //create service request
        ServiceRequest request = new ServiceRequest(sb.toString(), RequestType.GET, ContentTypes.JSON);
        QueryServiceAsyncTask service = new QueryServiceAsyncTask(FindByAreaCompleted);
        service.execute(request);
    } 
```

`fds`

```
public class FWSDataService {
    public Handler FindByTimespanCompleted;

    private String serviceURL;

    public FWSDataService()
    {
        serviceURL = "http://10.90.32.120/fws/home/getsiterecentrainfall/?regionid=1&amp;regionid=19&amp;";
    }

    public void FindByTimespan(int timespan)
    {
        StringBuilder sBuilder = new StringBuilder();
        sBuilder.append(serviceURL);

        // Add timespan filter
        sBuilder.append("timespan=");
        sBuilder.append(timespan);

        ServiceRequest request = new ServiceRequest(sBuilder.toString(), RequestType.GET, ContentTypes.JSON);
        QueryServiceAsyncTask service = new QueryServiceAsyncTask(this.FindByTimespanCompleted);
        service.execute(request);
    }

} 
```

我已经检查了`Handler`那个不起作用的 URL，并且数据被正确返回。事实上，我在其他地方使用了相同的 URL，它运行良好。有什么我想念的吗？

# android - 提交 SharedPreferences 时出现 StackOverFlowException

> ID：11312478
> 
> 赞同：2
> 
> 时间：2012-07-03T13:54:41.077
> 
> 标签：android, commit, sharedpreferences, stack-overflow

```
public class SettingsActivity extends SherlockPreferenceActivity implements OnSharedPreferenceChangeListener, OnPreferenceChangeListener {
    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);

        getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);

        ListPreference theme = (ListPreference) getPreferenceScreen().findPreference("theme");
        theme.setSummary(theme.getValue().toString());
        theme.setOnPreferenceChangeListener(this);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
        getSupportActionBar().setTitle(R.string.menu_preferences);
    }

    @SuppressWarnings("deprecation")
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
        if (key.equals("theme")) {
            SharedPreferences.Editor editor = sharedPreferences.edit();
            ListPreference theme = (ListPreference) getPreferenceScreen().findPreference("theme");
            theme.setSummary(theme.getEntry());
            editor.putString("theme", theme.getEntry().toString());
            editor.commit();
        }
    }

    public boolean onPreferenceChange(Preference preference, Object newValue) {
        ListPreference theme = (ListPreference) preference;
        theme.setSummary(theme.getEntry());
        return true;
    }
} 
```

我明白了：

```
07-03 09:46:22.563: E/AndroidRuntime(421): java.lang.StackOverflowError
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.BaseByteBuffer.<init>(BaseByteBuffer.java:26)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:49)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:41)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.ReadWriteHeapByteBuffer.<init>(ReadWriteHeapByteBuffer.java:43)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.BufferFactory.newByteBuffer(BufferFactory.java:38)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.ByteBuffer.wrap(ByteBuffer.java:82)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.charset.CharsetEncoder.isLegalReplacement(CharsetEncoder.java:646)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.charset.CharsetEncoder.replaceWith(CharsetEncoder.java:752)
07-03 09:46:22.563: E/AndroidRuntime(421):  at java.nio.charset.CharsetEncoder.<init>(CharsetEncoder.java:184)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.ibm.icu4jni.charset.CharsetEncoderICU.<init>(CharsetEncoderICU.java:75)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.ibm.icu4jni.charset.CharsetICU.newEncoder(CharsetICU.java:74)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.android.internal.util.FastXmlSerializer.setOutput(FastXmlSerializer.java:292)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.android.internal.util.XmlUtils.writeMapXml(XmlUtils.java:181)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl.writeFileLocked(ContextImpl.java:2889)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl.access$300(ContextImpl.java:2637)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2822)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421):  at android.app.ContextImpl$SharedPreferencesImpl$EditorImpl.commit(ContextImpl.java:2830)
07-03 09:46:22.563: E/AndroidRuntime(421):  at com.centauri.equations.settings.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
07-03 09:46:22.563: E/AndroidRuntime(421): 
```

当我打电话时发生此错误`editor.commit()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:57:44.390

您正在调用`commit()`您的`onSharedPreferenceChanged()`- 方法，当有人调用时调用该方法`commit()`。这是一个无限循环。

这可以在堆栈跟踪中看到（查看行号）：

```
at ...$EditorImpl.commit(ContextImpl.java:2822)
at ...SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
at ...$EditorImpl.commit(ContextImpl.java:2822)
at ...SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
at ...$EditorImpl.commit(ContextImpl.java:2822)
at ...SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:56)
[...] 
```

这是来自[Android Docs](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html#onSharedPreferenceChanged%28android.content.SharedPreferences,%20java.lang.String%29)的文章：

> 在更改、添加或删除共享首选项时调用。即使将首选项设置为其现有值，也可能会调用它。

因此，每次调用`commit()`-object`SharedPreferences`时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T13:58:14.563

`onSharedPreferenceChanged`提交时将被调用。但是在里面`onSharedPreferenceChanged`你`commit`再次调用所以它会导致无限循环。

# javascript - 如何将 href 附加到具有主题标签的项目

> ID：11312481
> 
> 赞同：0
> 
> 时间：2012-07-03T13:54:56.883
> 
> 标签：javascript, jquery, tags

我的应用程序从 instagram 中提取图像，我想知道如何使用 JS 循环浏览文档并简单地查找具有`#`主题标签的每个项目并将 URL 附加到它。

IE

```
My instagram photo contains the following tags #instagram #photo #tags 
```

结果最终看起来像

我的 Instagram 照片包含以下标签[#instagram](http://myapp.com/tag/instagram) [#photo](http://myapp.com/tag/photo) [#tags](http://myapp.com/tag/tags)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:07:52.177

试试这个

```
var x = "My instagram photo contains the following tags #instagram #photo #tags";

var split = x.split(" ");
for(var i=0; i< split.length; i++){
    if(split[i].indexOf('#') >= 0){
        split[i] = '<a href=\"http://myapp.com/tag/'+split[i].substring(1)+'\">'+split[i]+'</a>';
    }
}
console.log(split.join(" ")); 
```

这是小提琴 [http://jsfiddle.net/9XQBC/](http://jsfiddle.net/9XQBC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:01:18.197

你可以在href后面加上一个#，试试这个

```
var tag = '#instagram';

$('.myPhoto').attr('href',tag);//this will change current href 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:01:47.033

找到了一个简单的解决方案

```
hashtag_regexp = /#([a-zA-Z0-9]+)/g;

function linkHashtags(text) {
    return text.replace(
        hashtag_regexp,
        '<a class="hashtag" href="/search?q=$1">#$1</a>'
    );
} 

$(document).ready(function(){
    $('.comment').each(function() {
        $(this).html(linkHashtags($(this).html()));
    });
});​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-03T14:04:52.093

遍历每个锚链接，测试是否存在哈希标记，然后根据“真”条件更改 URL。

```
$.each($('a'), function(i,v){
  var findHash = /#/g;
  var scenario = findHash.test($(v).attr('href'));
  if(scenario == true){
    var grabHref = $(v).attr('href');
    var addHref = 'somethingafterthehash';
    $(v).attr('href', grabHref + addHref);
     console.log($(v).attr('href'));
  }
}); 
```

[jsFiddle在这里](http://jsfiddle.net/b2MTV/)

# java - java.lang.UnsatisfiedLinkError: /tmp/tmplib/libVisionProxy.so: /tmp/tmplib/libVisionProxy.so

> ID：11312485
> 
> 赞同：0
> 
> 时间：2012-07-03T13:55:02.090
> 
> 标签：java, eclipse, ant, testng, sikuli

我正在使用 Sikuli 脚本运行 Testng，它在 Eclipse ide 中运行良好。在 Eclipse IDE 中，我使用的是 Java 1.7.0 版本。

但是当我创建一个 Ant 脚本时，它会抛出一个异常。当我检查 ant -v

Apache Ant 1.7.1 版本于 2010 年 9 月 8 日编译 Buildfile: build.xml Detected Java version: 1.6 --->(I need Java 1.7 version) Detected OS: Linux [antlib:org.apache.tools.ant] 无法加载来自资源 org/apache/tools/ant/antlib.xml 的定义。找不到。[属性] 加载环境 env。目标“build”的构建顺序是 [init, build] 完整的构建顺序是 [init, build, clean, compile, run, jar, usage, makexsltreports, all, create-jar, runTestNG, ]

初始化：[回声] start.time

建造：

构建成功总时间：0 秒

我必须使用 Java 1.7

当我运行蚂蚁。

蚂蚁跑

java.lang.UnsatisfiedLinkError: /tmp/tmplib/libVisionProxy.so: /tmp/tmplib/libVisionProxy.so: 错误的 ELF 类： ELFCLASS64（可能的原因：架构字宽不匹配）在 java.lang.ClassLoader$NativeLibrary.load(Native方法）在 java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1755) 在 java.lang.ClassLoader.loadLibrary(ClassLoader.java:1651) 在 java.lang.Runtime.load0(Runtime.java:787) 在 java. lang.System.load(System.java:1022) 在 com.wapmx.nativeutils.jniloader.NativeLoader.loadLibrary(NativeLoader.java:44) 在 org.sikuli.script.Finder.(Finder.java:33) 在 org. sikuli.script.Region.doFind(Region.java:1029) 在 org.sikuli.script.Region$RepeatableFind.run(Region.java:1232) 在 org.sikuli.script.Region$Repeatable.repeat(Region.java: 1203) 在 org.sikuli.script.Region.wait(Region.java:497) 在 org.sikuli.script.Region.find(Region.java:381) at org.sikuli.script.Region.getLocationFromPSRML(Region.java:1129) at org.sikuli.script.Region.click(Region.java:606) at org .sikuli.script.Region.click(Region.java:593) 在 Sample_Test.launchApplication(Sample_Test.java:74) 在 Sample_Test.test1(Sample_Test.java:330) ... 删除了 24 个堆栈帧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:02:01.370

尝试

```
export JAVA_HOME=/usr/lib/jvm/jdk1.7 
```

或者在运行 ant 之前安装 java7 以解决您的 java 版本问题。它应该处理 64/32 位问题，并且您的 java 版本中的 1 个似乎是 64 位架构上的 32 位安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:05:00.477

也许这与您的 java 版本是 64 位安装而不是 32 位安装有关。不过我不完全确定。无论是那个还是 Grooveek 的建议。:)

# php - 将 array_merge_recursive 与数字键一起使用

> ID：11312489
> 
> 赞同：1
> 
> 时间：2012-07-03T13:55:11.070
> 
> 标签：php, arrays, multidimensional-array, array-merge

我一直在搜索 SO 并遇到了几个解决方案，这些解决方案都感觉像是绕过`array_merge_recursive`数字键默认行为的黑客。例如，我读到您可以在开头添加下划线，将您的数字更改为字符串。

无论如何，这是我的数据集和预期结果......

```
array ( "Name1", "Name2", "Name3" );
array ( "Data1", "Data2", "Data3" );
array ( "Price1", "Price2", "Price3" ); 
```

预期结果：

```
array ( 1 => array ( "Name1", "Data1", "Price1" ), 2 => array ( "Name2", "Data2", "Price2" ), 3 => array ( "Name3", "Data3", "Price3" ); 
```

我确定您知道 array_merge_recursive 通常如何使用数字键操作...这是我当前的合并结果。

```
array ( "Name1", "Name2", "Name3", "Data1", "Data2", "Data3", "Price1", "Price2", "Price3"); 
```

有没有合适的方法呢？各个方法的优缺点是什么，例如添加下划线来创建字符串键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:58:30.460

一个简单的解决方法将是一种完全不同的方法，例如：

```
$merged = array_map(function () { return func_get_args(); }, $array1, $array2, $array3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:03:39.573

```
$merge_array = array();
for($i = 0; $i < count($array1); $i++) {
    $row = array();
    $row[] = $array1[$i];
    $row[] = $array2[$i];
    $row[] = $array3[$i];
    $merged_array[] = $row;
} 
```

那应该行得通。

# extjs - 没有 UI 镇流器的 ExtJS 类系统

> ID：11312495
> 
> 赞同：0
> 
> 时间：2012-07-03T13:55:20.077
> 
> 标签：extjs, memory

ExtJS 类处理很好处理，但是你必须用 UI 堆栈来支付它，加载所有不必要的东西（这非常占用内存，并且减慢了浏览器的加载速度，我在使用 ExtJS 时遇到了问题，它消耗了 20时间页面加载越来越多的内存）。

有没有办法只使用 ExtJS 的类处理系统，就像 jsClass 一样？

并按需加载 UI 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:56:48.183

查看[外部核心](http://www.sencha.com/products/extcore/)。这是 ExtJS 3 的精简版。不幸的是，没有基于 ExtJS 4 的版本，我不确定他们是否会成功……好处是 Ext Core 是完全免费的。

# oracle - Oracle 中的动态列名

> ID：11312499
> 
> 赞同：4
> 
> 时间：2012-07-03T13:55:42.120
> 
> 标签：oracle, dynamic

我正在尝试动态设置列标题。

这里的例子：

```
SELECT Name, COUNT(cars) AS (('cars_from_year_') || year)
FROM peaple 
WHERE car = 'GM'
AND Date BETWEEN (year || '0401') AND (year || '0430'); 
```

`year`应该是前。2012 年和每年（2013 年，2014 年，...）的变化（即这是动态的）。

我知道调用`select to_char(sysdate,'YYYY') from dual`但不知道如何实现上面的 select 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:21:27.913

列名必须在编译时已知。您显然希望使用动态列名，因此您需要将编译推迟到实际执行。有几种方法可以做到这一点：[`DBMS_SQL`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sql.htm#ARPLS68176)和[`EXECUTE IMMEDIATE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BHCEBBAI)例如[`REF CURSOR`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#sthref549)。

`REF CURSOR`这是一个带有and的示例`SQL*Plus`：

```
SQL> var x refcursor
SQL> DECLARE
  2     l_year NUMBER := 2012;
  3  BEGIN
  4     OPEN :x
  5        FOR 'SELECT ''This is the year ''||:year AS "Year ' || l_year || '"
  6               FROM DUAL'
  7        USING l_year;
  8  END;
  9  /

PL/SQL procedure successfully completed.

SQL> print x

Year 2012
--------------------------
This is the year 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:05:11.120

它可以通过交叉表来完成。看看[这个](http://thinkoracle.blogspot.com/2005/09/pivot-and-crosstab-queries.html)和[这个](http://decipherinfosys.wordpress.com/2007/12/03/oracle-11g-cross-tab-report-using-pivot-and-unpivot-operator/)在oracle上查询交叉表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:16:17.310

Try the pivot comands now available in 11g otherwise pl/sql is your only option as per Vincent Malgrat.

Nice question!

# c# - ODATA WebService，获取 $metadata C#

> ID：11312512
> 
> 赞同：2
> 
> 时间：2012-07-03T13:56:19.080
> 
> 标签：c#, metadata, odata

我有一个 WebService 公开这个`$metadata`：

```
<?xml version="1.0" encoding="UTF-8" standalone="true"?>
<edmx:Edmx xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx" Version="1.0">     > <edmx:DataServices m:DataServiceVersion="1.0"
xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">

<Schema xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"
xmlns="http://schemas.microsoft.com/ado/2007/05/edm"
xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
Namespace="NAV"> 
<EntityType Name="PAsset"> 
<Key> <PropertyRef Name="No"/> </Key>  <Property Name="No" Nullable="false" Type="Edm.String"/>  <Property Name="Description"
Nullable="true" Type="Edm.String"/>  <Property Name="Inactive"
Nullable="false" Type="Edm.Boolean"/>  <Property Name="Insured"
Nullable="false" Type="Edm.Boolean"/> </EntityType> 

<EntityType Name="PAssetsDepreciationBook">

<EntityType Name="PBankAPostGrp">
<EntityType Name="PCompany">
<EntityType Name="PCustomer"> 
```

`$metadata`是否可以在 C# 应用程序中获取其中的信息？

我有一个引用服务工作的应用程序，以及我正在使用的一些代码：

> uriString = String.Format("PAssetsDepreciationBook?$filter=FA_No eq '{0}'",cliente);
> 
> contex = new ServiceReference1.NAV(new Uri(serviceEndPoint)); contex.Credentials = CredentialCache.DefaultCredentials;
> 
> var customers = contex.Execute(new Uri(uriString, UriKind.Relative));
> 
> foreach (var c in customers) { result = result + c.Acquisition_Cost; } 返回结果；

这工作正常，但得到`$metadata`没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-03T15:40:13.883

已经有代码（大部分）可以做到这一点。它涉及*ODataMessageReader.ReadMetadataDocument()*调用：

```
var request = WebRequest.CreateHttp(baseUrl + "$metadata");
var metadataMessage =
    new ClientHttpResponseMessage((HttpWebResponse)request.GetResponse());
using (var messageReader = new ODataMessageReader(metadataMessage))
{
    IEdmModel edmModel = messageReader.ReadMetadataDocument();
    // Do stuff with edmModel here
} 
```

您需要 ClientHttpResponseMessage 类，但这很简单（来自[ODataLib101](http://odatasamples.codeplex.com/ "ODataLib 101")）：

```
public class ClientHttpResponseMessage : IODataResponseMessage
{
    private readonly HttpWebResponse webResponse;

    public ClientHttpResponseMessage(HttpWebResponse webResponse)
    {
        if (webResponse == null)
            throw new ArgumentNullException("webResponse");
        this.webResponse = webResponse;
    }

    public IEnumerable<KeyValuePair<string, string>> Headers
    {
        get
        {
            return this.webResponse.Headers.AllKeys.Select(
                headerName => new KeyValuePair<string, string>(
                   headerName, this.webResponse.Headers.Get(headerName)));
        }
    }

    public int StatusCode
    {
        get { return (int)this.webResponse.StatusCode; }
        set
        {
            throw new InvalidOperationException(
                "The HTTP response is read-only, status code can't be modified on it.");
        }
    }

    public Stream GetStream()
    {
        return this.webResponse.GetResponseStream();
    }

    public string GetHeader(string headerName)
    {
        if (headerName == null)
            throw new ArgumentNullException("headerName");
        return this.webResponse.Headers.Get(headerName);
    }

    public void SetHeader(string headerName, string headerValue)
    {
        throw new InvalidOperationException(
            "The HTTP response is read-only, headers can't be modified on it.");
    }
} 
```

使用 IEdmModel，您可以访问元数据中的所有信息以执行诸如构建类型->控制器名称的字典之类的操作：

```
Dictionary<type, string> typeControllerMap =
    edmModel.SchemaElements.OfType<IEdmEntityContainer>()
            .Single()
            .Elements.OfType<IEdmEntitySet>()
            .Select(es => new { t = FindType(es.ElementType.FullName()), n = es.Name })
            .Where(tn => tn.t != null)
            .ToDictionary(tn => tn.t, tn => tn.n); 
```

上面 LINQ 链中间的*FindType()*调用只是在所有程序集中搜索给定类型名称的类型：

```
private static Type FindType(string fullName)
{
    return
        AppDomain.CurrentDomain.GetAssemblies()
            .Where(a => !a.IsDynamic)
            .SelectMany(a => a.GetTypes())
            .FirstOrDefault(t => t.FullName.Equals(fullName));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:44:21.047

例如，您可以将元数据请求为纯 XML `HttpWebRequest`。如果你需要解析它，你可以使用可以在上面找到的`EdmLib`（ ），甚至更好的（）也可以在上面找到。专门设计用于读取这些（它仍然为它返回 EDM 对象模型，它只是为您处理包装器和版本控制）。`Microsoft.Data.Edm.dll``NuGet``ODataLib``Microsoft.Data.OData.dll``Nuget``ODataMessageReader``ReadMetadataDocument``EDMX`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:29:22.247

谢谢，它工作得很好。

像这样：

```
// Create a request for the URL. 
WebRequest request = WebRequest.Create("http://localhost:7048/DynamicsNAV70/OData/$metadata");

//set the credentials.
request.Credentials = CredentialCache.DefaultCredentials;

// Get the response.
WebResponse response = request.GetResponse();

// Get the stream containing content returned by the server.
Stream dataStream = response.GetResponseStream();

// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader(dataStream);

// Read the content.
string responseFromServer = reader.ReadToEnd();

XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(new StringReader(responseFromServer));

// Clean up the streams and the response.
reader.Close();
response.Close(); 
```

在此之后，只需像 xml 文件一样解析数据。

# c# - Asp.Net MVC 3，如何动态生成 HTML 页面？

> ID：11312514
> 
> 赞同：-1
> 
> 时间：2012-07-03T13:56:23.237
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

![在此处输入图像描述](../Images/708c909f0fe518064b8b7fe2e2f29394.png)

当我通过 Ajax 调用 asp.net 控制器时，我需要生成 HTML(cshtml) 页面，并且在生成页面之后，我想将 Iframe src 更新为生成的页面。

但我找不到如何动态生成cshtml页面。

有人知道请给我建议。

谢谢你！

[编辑]

我无法在 IFrame 中调用 generatePage，因为我需要向控制器传递太多参数。所以我需要使用 POST 方法。所以我认为我需要首先使用 Ajax POST 调用生成页面并在 IFrame 中加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:32:51.370

很抱歉，如果我误解了一个问题，但是如果您需要使用 Ajax 加载一个视图（已经存在）并将其插入到页面中，请查看：

[将部分视图](http://www.networkozone.com/snippets/c-sharp/8/render-partial-view-to-string) 呈现为字符串 将服务器上的部分视图呈现为 html 字符串，当您需要通过 AJAX 将部分视图添加到 ASP.NET MVC 页面时很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:59:31.987

在我看来，这不是你的问题，但如果我完全错过了重点，请原谅。

右键单击视图，然后说添加视图。

```
public ViewResult Index()
{
   return View();
} 
```

此外，如果您右键单击控制器文件夹上的解决方案资源管理器并说添加控制器，您将获得一些选项。这些模板可以被覆盖，但这是另一天的故事：P

# java - 返回值的静态方法可以抛出异常吗？

> ID：11312518
> 
> 赞同：7
> 
> 时间：2012-07-03T13:56:35.033
> 
> 标签：java

我有一个返回字符串的静态方法，但如果传入的字符串与几个单词之一不匹配，我想抛出一个异常。下面的代码只是我正在尝试做的一个示例，但我在抛出异常的行上不断收到“无法从静态上下文引用的非静态变量”消息。基本上，getMsg 的返回值必须有效，否则程序无法继续，所以我需要一种方法来捕捉它。

```
public static String getMsg(String input) throws UnknownInputException{
      if (input.equals("A")){
           return "key for A";
      }
      throw new UnknownInputException("Some Message");
      return "unknownInput"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T14:07:56.153

问题是由这样一个事实引起的，这`UnknownInputException`可能是一个嵌套类，如果你用`new`运算符实例化它，作为一个嵌套类，它应该可以访问一个“父”对象——因为类被实例化，所以它不存在在静态环境中。有关这方面的更多信息，请参阅[返回内部类的静态方法](https://stackoverflow.com/questions/4058974/static-method-returning-inner-class)。

一个可能的解决方案是这样`UnknownInputException`声明`static`：

```
private static class UnknownInputException extends Exception { ... } 
```

当然，您将无法从此类访问任何实例（非静态）方法和/或字段，但这在您的情况下可能不是问题（尤其是在 Exception 类的情况下）。

此外，`return`该行之后的 ing 值`throw`是不必要的，因为执行永远不会到达该行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:04:00.580

变量*this*没有在给定的示例代码中注明，因此它不会导致错误。

该代码`return "unknownInput";`是多余的，因为从未执行过。

必须使用另一种`this`导致错误的静态方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:15:11.663

UnknownInputException 是一个内部类。一旦我把它变成静态的，代码编译得很好。谢谢你们的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:05:44.883

在java中从静态方法抛出异常是完全合法的。但是，您在此处提供的代码甚至无法编译 :) 所以提供所有代码。

你在这里得到的错误只是说你正在使用静态方法的类上定义的非静态数据字段。静态方法不属于任何实例，但数据字段...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T14:06:10.400

首先，该`return "unknownInput";`行将永远不会被执行。那里没有显示死代码警告吗？

而且您的方法没有任何“this”引用，您确定它抱怨这种方法吗？

# windows - 找出模式以在编译的程序中查找变量

> ID：11312521
> 
> 赞同：3
> 
> 时间：2012-07-03T13:56:39.137
> 
> 标签：windows, dwarf, readelf, debug-information

我需要从已编译的 c 程序中提取全局变量。我现在正在做的是使用 Linux readelf 命令来获取该信息。换句话说，当我这样做时：

```
 readelf.exe -w[i]  myFile.out 
```

我使用可以从[这里](http://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/binutils-2.22/binutils-2.22-1-mingw32-bin.tar.lzma/download)`readelf.exe`下载的程序来做到这一点。因为我使用的是 Windows，这是我需要的唯一命令。在 linux 上，我将打开控制台并执行`readelf -w[i] myFile.out`

无论如何，当我执行该命令时，我会得到类似的东西：

```
 <1><86923>: Abbrev Number: 2 (DW_TAG_base_type)
    <86924>   DW_AT_name        : unsigned int  
    <86925>   DW_AT_encoding    : 7 (unsigned)
    <86927>   DW_AT_byte_size   : 4 
<1>..
...
... bla bla bla
... 
<1><870a1>: Abbrev Number: 12 (DW_TAG_variable)
    <870a2>   DW_AT_decl_file   : 25    
    <870a3>   DW_AT_decl_line   : 543   
    <870a5>   DW_AT_external    : 1 
    <870a6>   DW_AT_name        : NetBuf_ID_Ctr     // <------------------- First variable
    <870b4>   DW_AT_type        : <0x86923> 
    <870b8>   DW_AT_location    : 5 byte block: 3 ff f9 b 20    (DW_OP_addr: fff90b20)
 <1><870be>: Abbrev Number: 3 (DW_TAG_typedef)
    <870bf>   DW_AT_decl_file   : 26    
    <870c0>   DW_AT_decl_line   : 192   
    <870c2>   DW_AT_name        : NET_CONN_FAMILY   
    <870d2>   DW_AT_type        : <0x862f1> 
 <1><870d6>: Abbrev Number: 3 (DW_TAG_typedef)
    <870d7>   DW_AT_decl_file   : 26    
 .... 
```

有了那个“树”，我可以得到所有的全局变量和类型。例如，如果您查看第一个变量`NetBuf_ID_Ctr`，我们可以看到我们可以获得有关节点上的类型的信息 `<0x86923>`。那个节点在树的某个地方！如果你看一下那实际上是第一个节点。开始的那个 `<1><86923>....`，如果您在该节点内部看到，我们知道该变量是一个无符号整数，大小为 4 个字节。

* * *

**现在我的问题是，**当我使用 readelf 命令时，我得到 ![在此处输入图像描述](../Images/eb8b01217cfea43d78577b7055627974.png) 了 192883 行需要解析的文本！这棵树给了我更多我需要的信息。如果我用十六进制编辑器查看文件，这就是我所看到的：

![在此处输入图像描述](../Images/b9533818a452cb89513f92f8a25b0c0c.png)

请注意，我能够找到相同的变量`NetBuf_ID_Ctr`，并且它旁边（突出显示）是它的地址`<0x86923>`！

互联网上有没有地方可以指导我如何构建树？命令 readelf.exe 需要 0.1 秒来创建树！它将输出放在 StreamReader 上，这就是它如此快的原因。如果我希望将 StreamReader 放在内存上，将其转换为需要很长时间的字符串。

* * *

## 编辑

总之，我想知道如何从 myFile.out 构造树（readelf 的输出）。我无法弄清楚这种模式，互联网上也没有一个地方可以解释如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:19:26.213

基本上，ELF 目标文件中的 dwarf 调试信息位于各个部分中

*   .debug_aranges
*   .debug_frame
*   。调试信息
*   .debug_line
*   .debug_pubnames
*   .debug_pubtypes

通过解析 .debug_info 中描述调试信息条目 (DIE) 之间关系的信息来构建裸片树。DWARF 标准中描述了此信息的存储方式，可在[此处找到](http://dwarfstd.org/Dwarf3Std.php)

从您的问题来看，您似乎想尽快转储所有全局符号。如果您想从自己的程序中执行此操作，您可以使用[libdwarf](http://reality.sgiweb.org/davea/dwarf.html)来解析 .debug_pubnames 的内容。本节包含一组标题，后跟许多名称、偏移量对。名称是全局名称，偏移量是 DIE 从其编译单元开始的偏移量。libdwarf 可以再次使用它来获取更多详细信息。

libdwarf 可以很容易地在 Windows 上编译，但您还需要 libelf。有关DWARF 调试信息格式的更简单说明，另请[参阅](http://ratonland.org/?entry=39)

# c# - 在两种不同的方法中使用字符串

> ID：11312522
> 
> 赞同：-9
> 
> 时间：2012-07-03T13:56:40.217
> 
> 标签：c#, windows-phone-7

我一直在尝试将字符串值从一种方法传递到另一种方法。这是我的两种方法。

方法1-

```
public void listBox1_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
{
    if (e.AddedItems.Count > 0)
    {
        var c_id = (e.AddedItems[0] as Foodlist).C_ID;
        string listboxid = c_id.ToString();
    }
} 
```

我想要第二种方法中的字符串 listboxid 值，以便我可以使用它进行比较。
方法2-

```
public void deletemyfood()
{
    using (FoodDataContext context = new FoodDataContext(Con_String))
    {
        string listboxindex = listboxid;
        IQueryable<FoodViewModel> foodQuery = from c in context.FoodTable where c.C_ID.ToString() == listboxindex select c;
        ....
    }
} 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:01:28.643

这是一个关于如何使用返回值和参数的*简单示例：*

```
class Program
{
    static void Main(string[] args)
    {
        var result = Method1("Test");
    }

   static string Method1(string input)
   {
       return string.Format("I got this input: {0}", input);
   }
} 
```

在此示例中，该方法`Method1`接受一个字符串参数，然后返回一个字符串。

在您的情况下，您可能希望将方法签名更改为`DeleteMyFood`：

`public void DeleteMyFood(string foodId)`

但是，如果您想要某种结果，也知道该方法何时成功或不成功，您可能还希望从该方法返回一个值。这可以通过再次修改方法签名来完成：

`public bool DeleteMyFood(string foodId)`

如果我根据您的评论正确理解，您希望将事件处理程序更改为：

```
public void listBox1_SelectionChanged(object sender,
                                    System.Windows.Controls.SelectionChangedEventArgs e)
{
    if (e.AddedItems.Count > 0)
    {
        var c_id = (e.AddedItems[0] as Foodlist).C_ID;
        string listboxid = c_id.ToString();
        DeleteMyFood(listboxid);
    }
} 
```

这要求该方法`DeleteMyFood`接受字符串类型的参数，因此我们也需要更改它：

```
public void deletemyfood(string foodId)
{
    using (FoodDataContext context = new FoodDataContext(Con_String))
    {
        string listboxindex = listboxid;
        IQueryable<FoodViewModel> foodQuery = from c in context.FoodTable where c.C_ID.ToString() == foodId select c;
        // .. rest of code here ..
    }
} 
```

# python - 捕捉 Ctrl+C / SIGINT 并在 python 中优雅地退出多进程

> ID：11312525
> 
> 赞同：91
> 
> 时间：2012-07-03T13:56:48.683
> 
> 标签：python, multiprocessing, signals

如何在多进程 python 程序中捕获`Ctrl`+`C`并优雅地退出所有进程，我需要该解决方案在 unix 和 windows 上都可以工作。我尝试了以下方法：

```
import multiprocessing
import time
import signal
import sys

jobs = []

def worker():
    signal.signal(signal.SIGINT, signal_handler)
    while(True):
        time.sleep(1.1234)
        print "Working..."

def signal_handler(signal, frame):
    print 'You pressed Ctrl+C!'
    # for p in jobs:
    #     p.terminate()
    sys.exit(0)

if __name__ == "__main__":
    for i in range(50):
        p = multiprocessing.Process(target=worker)
        jobs.append(p)
        p.start() 
```

它有点工作，但我认为这不是正确的解决方案。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2016-02-01T15:33:35.283

[先前接受的解决方案](//stackoverflow.com/a/11312948/412080)具有竞争条件，并且不适用于`map`和`async`功能。

* * *

处理`Ctrl+C`/ `SIGINT`with的正确方法`multiprocessing.Pool`是：

1.  `SIGINT`在创建进程之前忽略该进程`Pool`。这种方式创建的子进程继承`SIGINT`处理程序。
2.  `SIGINT`在创建a 之后恢复父进程中的原始处理程序`Pool`。
3.  使用`map_async`and`apply_async`而不是阻塞`map`and `apply`。
4.  等待结果超时，因为默认阻塞等待忽略所有信号。这是 Python 错误[https://bugs.python.org/issue8296](https://bugs.python.org/issue8296)。

* * *

把它放在一起：

```
#!/bin/env python
from __future__ import print_function

import multiprocessing
import os
import signal
import time

def run_worker(delay):
    print("In a worker process", os.getpid())
    time.sleep(delay)

def main():
    print("Initializng 2 workers")
    original_sigint_handler = signal.signal(signal.SIGINT, signal.SIG_IGN)
    pool = multiprocessing.Pool(2)
    signal.signal(signal.SIGINT, original_sigint_handler)
    try:
        print("Starting 2 jobs of 5 seconds each")
        res = pool.map_async(run_worker, [5, 5])
        print("Waiting for results")
        res.get(60) # Without the timeout this blocking call ignores all signals.
    except KeyboardInterrupt:
        print("Caught KeyboardInterrupt, terminating workers")
        pool.terminate()
    else:
        print("Normal termination")
        pool.close()
    pool.join()

if __name__ == "__main__":
    main() 
```

正如@YakovShklarov 所指出的，在父进程中忽略信号和取消忽略信号之间有一个时间窗口，在此期间信号可能会丢失。改为临时阻止父进程中的信号传递将`pthread_sigmask`防止信号丢失，但是，它在 Python-2 中不可用。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-07-03T14:20:50.037

该解决方案基于[此链接](http://noswap.com/blog/python-multiprocessing-keyboardinterrupt/)和[此链接](https://github.com/jreese/multiprocessing-keyboardinterrupt/blob/master/example.py)，它解决了问题，但我不得不搬到`Pool`：

```
import multiprocessing
import time
import signal
import sys

def init_worker():
    signal.signal(signal.SIGINT, signal.SIG_IGN)

def worker():
    while(True):
        time.sleep(1.1234)
        print "Working..."

if __name__ == "__main__":
    pool = multiprocessing.Pool(50, init_worker)
    try:
        for i in range(50):
            pool.apply_async(worker)

        time.sleep(10)
        pool.close()
        pool.join()

    except KeyboardInterrupt:
        print "Caught KeyboardInterrupt, terminating workers"
        pool.terminate()
        pool.join() 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-05-01T18:44:29.723

只需在工作进程中处理 KeyboardInterrupt-SystemExit 异常：

```
def worker():
    while(True):
        try:
            msg = self.msg_queue.get()
        except (KeyboardInterrupt, SystemExit):
            print("Exiting...")
            break 
```

# css - 仅在 IE8 中呈现图像问题

> ID：11312531
> 
> 赞同：0
> 
> 时间：2012-07-03T13:57:26.520
> 
> 标签：css, image, internet-explorer, internet-explorer-8

我正在尝试弄清楚在 MS IE8 中渲染此图像的情况，仅从外观上看，它似乎可以与其他浏览器（FF、Chrome、Safari）一起渲染

不幸的是，我没有 IE8，因为我在 Mac 上，但一直在使用 Adob​​e BrowserLab。

我希望在不影响当前工作的其他浏览器的情况下更正此图像在 IE8 中的呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:08:24.227

我也没有方便的 IE8，但是 IE8 不支持背景大小，并且图像是 1905x922px。尝试将其调整为 500px 宽（元素的大小），删除背景大小，并查看它是否有效。

# android - Android 进度更新在 asynctask 中有两个值

> ID：11312532
> 
> 赞同：0
> 
> 时间：2012-07-03T13:57:28.907
> 
> 标签：android, progress-bar, progressdialog

我正在异步任务中实现进度条（进度对话框）。

参数是：

```
AsyncTask<Void, Integer, Boolean> 
```

并且使用整数的进度更新工作正常。

onProgessUpdate：

```
protected void onProgressUpdate(Integer... values) {
    mDialog.setProgress(values[0]);
} 
```

现在我想在某些时候更新对话消息。是否有可能以某种方式给 onProgressUpdate 一个整数和一个字符串，以便我可以更新消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:01:08.360

如果你真的需要一个 int 和一个字符串，那么要么传递 Object 类型的参数（不过要小心），要么传递 Strings 并将其解析为 int，再次小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:01:53.787

创建一个包含整数和字符串的类，并使用它代替`Integer`. 然后您可以创建其中一个对象并将其传递给`publishProgress()`.

# c++ - 将类作为函数参数传递

> ID：11312541
> 
> 赞同：0
> 
> 时间：2012-07-03T13:57:45.467
> 
> 标签：c++, qt, class

我有一堂课：

```
class MakeMeshStructure : public QObject
{
Q_OBJECT
public:

MakeMeshStructure(QObject* parent = 0) {} 
```

在其功能之一中，我这样做：

```
CadPanel * paneli;
int npanelov = mesh.faces_end().handle().idx();
paneli = new CadPanel[npanelov]; 
```

后来这个：

```
for(int i=0; i<npanelov;i++){
    if(paneli[i].wasSet)paneli[i].draw(this);
} 
```

这是我的面板类：

```
class CadPanel : public QObject
{

Q_OBJECT
public:

CadPanel();
void draw(MakeMeshStructure* parent); //error here 
```

错误是：错误 27 错误 C2061：语法错误：标识符“MakeMeshStructure”

如何传递 MakeMeshStructure 父级以在此 CadPanel 函数中使用？泰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:00:10.343

您必须向您的类添加一个转发类声明：

```
class MakeMeshStructure; // IMPORTANT: Declares a forwarding class

class CadPanel : public QObject 
{

    Q_OBJECT
public:

    CadPanel();
    void draw(MakeMeshStructure* parent); // no more error :)
} 
```

请注意，如果这些类位于不同的命名空间中，则必须使用正确的命名空间限定名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:23:13.530

根据您在 CadPanel::draw() 中对 MakeMeshStructure 的使用，您可能需要包含包含 MakeMeshStructure 定义的标头：

```
#include "MakeMeshStructure.h" 
```

或者干脆在定义 CadPanel 之前做一个前向声明：

```
class MakeMeshStructure;
class CadPanel : public QObject
{
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:26:19.893

您的错误的原因是因为在`MakeMeshStructure`编译时编译器不知道`CadPanel`该类。

由于该`MakeMeshStructure`方法只使用了一个指针，`CadPanel`这个问题可以使用前向声明来解决`CadPanel`

```
class MakeMeshStructure; // Forward declaration of MakeMeshStructure

class CadPanel
{
    Q_OBJECT

public:
    CadPanel();
    void draw( MakeMeshStructure* parent );
}; 
```

但是，如果该`MakeMeshStructure`方法创建了您的实例，`CadPanel`则需要包含`CadPanel`已定义的标头。这是因为为了创建一个实例，`CadPanel`需要完整定义类。

# jquery - jquery .hover() 用于导航

> ID：11312547
> 
> 赞同：0
> 
> 时间：2012-07-03T13:58:15.553
> 
> 标签：jquery

我制作了将导航默认图像更改为悬停图像的导航功能。

默认图像名称为“main.png”，悬停图像为“main_hover.png”

我知道如何借助 jquery 从 html src 属性中提取图像名称，但我知道如何在文件名“main”和文件扩展名“.png”之间添加附加字符串

到目前为止我的代码：

```
$(document).ready(function(){
    $(".nav").hover(function(){
        var default_button = this.src;
        // here is part where i need help with adding "_hover" to default_image
        $(this).attr('src', default_button) // i know i need this after image is not hovered
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:00:46.333

可能你不应该通过 jQuery 来做这件事，为什么不使用 css 方式呢？

```
.nav {
 background: url(/path/to/main.png)
}

.nav:hover {
  background: url(/path/to/main_hover.png)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:00:55.840

```
$(document).ready(function(){
    $(".nav").hover(function(){
        var default_button = this.src.replace(".jpg","_hover.jpg");
        $(this).attr('src', default_button) 
    });
}); 
```

# c - 定义一个引入一对变量的宏

> ID：11312552
> 
> 赞同：-2
> 
> 时间：2012-07-03T13:58:34.977
> 
> 标签：c, macros

任何人都可以帮助我解决以下问题吗？

> 定义一个具有以下原型的宏：
> 
> `F(A, B, C, D)`
> 
> 使用此宏 as 后`F(name, float, a, b)`，您应该可以使用变量`name.a`和`name.b`。确保您的实现是可重用的，即您可以`F`在同一个块中多次使用。
> 
> 此外，扩展它以便将预定义的前缀添加到变量中。也就是说，如果预定义的前缀是`pt`，那么在使用这个宏之后，你应该可以使用 `pt_name.a`, 和`pt_name.b`。

思杰询问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:02:28.680

这里：

```
#define F(name, type, var1, var2) struct {\
                                     type var1 ;\
                                     type var2 ;\
                                  } name 
```

那应该行得通。

# java - Java 项目：让 HashMap（包括 Load-Store）性能更好

> ID：11312553
> 
> 赞同：3
> 
> 时间：2012-07-03T13:58:38.933
> 
> 标签：java, hashmap, key-value

我正在尝试为我们的服务器编写代码，我必须在其中通过 URL 查找用户访问类型。

现在，在一开始，我们看到每天有 1 亿个不同的 URL 被访问。现在，随着时间的推移，它每天有近 6 亿个不同的 URL。

对于 1 亿人，我们所做的如下：

1) 使用并行数组构建 HashMap，其键是 URL 的一部分（表示为 LONG），值是 URL 的另一部分（表示为 INT） - 键可以有多个值。

2) 然后搜索 HashMap 以查找 URL 访问了多少次。

现在，随着 HashTable 变大，我们所做的如下：

1）建立两个/三个单独的HashTable，并加载并存储它（在一般文件系统上）以查找URL访问了多少次。

现在，问题是，

1) 虽然 HashTable 性能相当不错，但代码在加载/存储 HashTable 时需要更多时间（我们使用文件通道，加载/存储 HashTable 需要 16-19 秒 - 2 亿条目 - 因为负载因子为 0.5）

我们想问的是：

1）任何评论如何解决这个问题？

2）如何减少加载/存储时间（我之前问过但似乎文件通道是最好的方法）？

3）存储一个大的HashTable（超过内存）并重复缓存它会是一个很好的解决方案吗？如果是这样，如何做到这一点（至少一些指针）。我们尝试使用

```
RandomAccessFile raf = new RandomAccessFile("array.dat", "rw");
IntBuffer map = raf.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, 1 << 30).order(ByteOrder.nativeOrder()).asIntBuffer(); 
```

但是，提供比以前更差的性能。

谢谢。

注意：

1) 根据 Stack Overflow 之前的建议，我们使用一些 NoSQL DB，例如 TokyoCabinet，但根据我们的经验，自定义 HashTable 在 1 亿个键值对上的性能比它更好。

2) 无法为磁盘缓存预读数据，因为系统启动时，我们的应用程序将开始工作，而第二天系统启动时。

我们忘记提到的是：

1）由于我们的应用是项目的一部分，并且应用在一个小校园，所以我们假设访问的URL不超过8亿。所以，你可以认为 600/700 的数据值是固定的。

2）我们主要关心的是性能。

3）我们必须在本地运行我们的应用程序。

[编辑：我们的 hashmap 的代码可以在这里找到。](https://stackoverflow.com/questions/11398762/custom-hashmap-code-issue)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T14:44:31.687

最好将表作为[内存映射](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#map%28java.nio.channels.FileChannel.MapMode,%20long,%20long%29)缓冲区访问。这样，您可以简单地实现对文件的随机访问，而不必担心加载和存储，并将缓存留给操作系统。我看到[您当前的实现](https://stackoverflow.com/q/11398762/1468366)已经使用内存映射访问进行读取和写入，但它仍然将内容加载到两者之间的 java 堆中。避免这种数据重复和复制！将备份文件本身视为数据结构，仅在需要时才访问您实际需要的部分。

如果您*确实确定*哈希冲突不是问题，那么在该文件中，哈希映射将起作用。否则，我会在那里寻找[B+ 树](http://en.wikipedia.org/wiki/B+_tree)，其节点与硬盘页面的大小差不多。这样，每次磁盘访问将产生比单个键更多的可用数据，从而导致更浅的树和更少的单个磁盘操作。

我猜其他人会实现这样的东西，但是如果您更喜欢自己的哈希映射实现，您可能更喜欢编写自己的内存映射 B+ 树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T10:44:27.210

整个方法对我来说听起来很可笑。我收集到您真正想要实现的是每个不同 URL 的简单访问计数器。就其本质而言，这些数据经常被写入，但很少被读取。

为此，我只需要一个数据库表并为每次访问添加一个新条目（它也可以用作日志）。当您需要确定访问任何 URL 的频率时，可以使用表中的 SELECT COUNT 轻松完成（取决于您与 URL 条目一起存储的附加数据量，您甚至可以进行限制计数，例如昨天访问的频率，上周等）。

这将所有工作都放到了真正需要结果的地步。

顺便说一句，您也可以从 Web 服务器日志文件中检索访问计数，因此您可能不需要自己编写任何数据。先看看这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:03:19.520

您可以使用像[JCS](http://commons.apache.org/jcs/)这样的缓存框架。10 亿个键值对应该不是问题。

[http://commons.apache.org/jcs/](http://commons.apache.org/jcs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T19:38:05.637

似乎您有一个不适合内存的只读数据集，并且您需要快速键查找。恐怕这里没有灵丹妙药的解决方案，除了一些可能的权衡。

如果您在所有地方访问 600M 记录，无论您做什么，您都将受到磁盘随机访问速度（而不是顺序访问速度）的限制。用于`FileChannel.map`直接访问文件（不，不要读取内存中文件的内容，只需对`MappedByteBuffer`. 您的操作系统负责缓存）。投资 SSD 看起来是一种花钱的好方法（或者只是购买更多内存？）。

这是校园环境吧？也许您可以使用实验室中的计算机来制作 memcached/redis/etc。簇？也许你可以在下班时间使用它？

如果您同时访问一些可识别的数据片段（即现在我们分析域 a，然后分析域 b，等等），那么将数据分成桶是一个好主意。就像保持相关数据物理上接近，以帮助缓存。或者可能对 url 进行预排序，并以二进制搜索方式访问它们？

如果某些冲突概率是可以接受的，也许不存储完整的 url，而只存储 64 位的 url 哈希作为哈希键是可以接受的？通过一些体操你可能完全不存放钥匙？

这就是我目前的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T07:11:03.130

在内存数据库中使用开源**sqlite 。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T04:35:26.850

不清楚问题和后续讨论，但您的查询的性质是什么？
在a) 每个工作日处理所有约 7 亿个 URL 或
b) 访问这约 7 亿个 URL 中的一小部分时，您会遇到非常不同的情况。

那么：查询数与 URL 数的比率是多少？

根据您的描述，听起来您可能正在加载/卸载代表数组不同部分的不同文件......这表明随机查询，这表明（b）。

同样，我想您已经认识到“全内存”是不可行的（即您已经破坏了多个文件的阵列），因此最佳磁盘访问算法似乎是下一个业务顺序， 不？

您是否尝试过，每个查询，一个简单的查找（n * arrayElementSize）在文件中偏移并且只是将几页读入内存（您是否有/知道每个键的最大值数？）。您已经（计算）到数组中的基本索引，所以这应该很容易原型化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T14:05:41.580

绝对尝试[redis](http://redis.io/)，认为它胜过其他任何事情

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T14:06:55.563

您可以使用[Berkeley DB](http://www.oracle.com/us/products/database/berkeley-db/overview/index.html)，它基本上是一个用 C 语言编写的键/值存储，以实现终极性能。这是一个 Oracle 产品（尽管是开源的），所以我会认真对待。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-12T08:55:25.583

我建议您使用[Oracle Coherence Cache](http://coherence.oracle.com/display/COH35UG/Create+and+Use+Coherence+Caches)。您可以获得它的所有好处，`HashTable`它具有 Map 具有的所有方法。

性能方面，您可以根据需要存储数据。请看一下。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-10T13:06:09.310

如果您的应用程序必须在不使用任何外部计算能力的情况下在本地运行，那么没有比直接内存访问性能更高的解决方案：唯一可以为您提供比 HashMap 更好的性能的数据结构是数组，其中每个元素的访问是 O(1)。然而，这需要提前知道您有多少项目，每个元素有一个唯一的寻址索引，并且还能够保留重要的相邻内存。

在数组之后，如所述适用于有限的情况，你有哈希表，但是随着数据大小的增长，冲突和动态调整大小的成本增加并且性能很差。

您可以参考 java.util.HashMap javadoc，也可以参考维基百科 [http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)来了解以下内容：

*   计算它有多昂贵？
*   价值如何分布良好？
*   您正在使用的负载因子是多少，即解决冲突的成本是多少？
*   在完全包含所有数据之前，您需要多久调整一次 HashMap 的大小？

如果在构建 HashMap 时性能下降，我实际上认为它是 ConcurrentHashMap（如果您并行构建它，它必须是线程安全的），您可能想调查它发生的原因。

一个简单但容易的开始是将您的 HashMap 替换为 TreeMap，其性能是其大小的确定性函数，并比较两种性能。

* * *

如果另一方面我误解了你的问题，并且你有机会在多台机器上扩展计算，那么市场上有很多有趣的解决方案，正如有人已经指出的那样，我会添加 Cassandra。

这些解决方案通过在多个节点之间分配负载来提高性能，但在每个节点内部都使用众所周知的算法来实现快速高效的寻址。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-16T08:36:34.367

如果我理解正确，您的数据结构并没有那么大

```
[(32 + 64) * 600 million] bits i.e. a 53.644 MB structure in memory 
```

地图数据结构也会消耗一些空间。我发现 trove 是最节省内存的数据结构之一。我会使用[TLongIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TLongIntHashMap.html)来存储长键和整数值。它存储原始原语，以便您绕过 Long 和 Integer 内存对象

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-13T12:17:26.150

您可以尝试[HugeCollections](http://code.google.com/p/vanilla-java/wiki/HugeCollections)，我认为它是为此目的而编写的

> HugeCollections
> Library 支持具有数百万或数十亿条目的集合。

具体来说`HugeMap`

# android - 方法 MediaStore.Images.Media.getBitmap(cr, uri); 返回位图大小超出 VM 预算

> ID：11312554
> 
> 赞同：0
> 
> 时间：2012-07-03T13:58:40.917
> 
> 标签：android

我对这段代码有疑问：（错误在代码下方）

```
public class ChooseImage extends Activity
{

private static final int DELETE_DIALOG = 1; 

private Gallery gallery = null; 

private int selectedImageId; 

  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState); 
       gallery = new Gallery(this); 
      Uri uri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI; 
      String[] projection = { MediaStore.Images.Media._ID }; 
      String selection = null; 
      String[] selectionArgs = null; 
      String sortOrder = null; 
      Cursor cursor = managedQuery(uri, projection, selection, selectionArgs, sortOrder); 

      BitmapFactory.Options options=new BitmapFactory.Options();
      options.inSampleSize = 8;

      gallery.setAdapter(new CursorAdapter(this, cursor, true) { 

        public View newView(Context context, Cursor cursor, ViewGroup parent) { 
                int id = cursor.getInt(0); 
                ContentResolver cr = getContentResolver(); 
                Uri uri = ContentUris.withAppendedId(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, id); 
                Bitmap image = null; 

        try { 
            image = MediaStore.Images.Media.getBitmap(cr, uri); 
        } catch (Exception e) { 
         Log.e("Error", "Error", e); 
        } 

            ImageView imageView = new ImageView(context); 
            imageView.setId(id); 
            imageView.setScaleType(ScaleType.CENTER_INSIDE); 

            imageView.setImageBitmap(image); 
            return imageView; 
       }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            // TODO Auto-generated method stub

        } 
      }); 

      LinearLayout linearLayout = new LinearLayout(this); 
      linearLayout.addView(gallery); 
      setContentView(linearLayout); 

  }
} 
```

错误是：

```
07-03 15:40:59.978: E/AndroidRuntime(887): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:469)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:525)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.provider.MediaStore$Images$Media.getBitmap(MediaStore.java:712)
07-03 15:40:59.978: E/AndroidRuntime(887):  at com.entDan.imagefun.ChooseImage$1.newView(ChooseImage.java:58)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.widget.CursorAdapter.getView(CursorAdapter.java:182)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.widget.Gallery.makeAndAddView(Gallery.java:745)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.widget.Gallery.fillToGalleryRight(Gallery.java:697)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.widget.Gallery.trackMotionScroll(Gallery.java:372)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.widget.Gallery$FlingRunnable.run(Gallery.java:1366)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.os.Handler.handleCallback(Handler.java:587)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.os.Looper.loop(Looper.java:123)
07-03 15:40:59.978: E/AndroidRuntime(887):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-03 15:40:59.978: E/AndroidRuntime(887):  at java.lang.reflect.Method.invokeNative(Native Method)
07-03 15:40:59.978: E/AndroidRuntime(887):  at java.lang.reflect.Method.invoke(Method.java:521)
07-03 15:40:59.978: E/AndroidRuntime(887):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-03 15:40:59.978: E/AndroidRuntime(887):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-03 15:40:59.978: E/AndroidRuntime(887):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:56:24.543

您的问题很简单：一次显示太多图像。

您的解决方案可以通过许多不同的方式完成:)

你可以像谷歌播放一样，只显示一些图像，当用户“靠近”它们时下载新图像，然后慢慢地从内存中丢弃旧图像。也可以是下一页按钮等来加载下一个图像。

通常避免显示太多位图并记住回收/丢弃/旧位图（通常系统会为您执行此操作，但不会在长列表中等）。

**编辑**：您可以查看支持库提供的 googles lru 缓存。以下链接解释了 lru 缓存的工作原理以及有关位图使用的其他非常重要的事情：[链接](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)。

但是整个这个主题实际上非常复杂，要正确完成；（我建议您查看[谷歌货架示例](http://code.google.com/p/shelves/)（这可能很难理解，但如果您能够管理它，您真的会学到很多东西）。

仅在需要时（在 getview/bindview 等中）使用 lru 缓存以及获取图像可能对您有用。

# emacs - 用普通字体覆盖粗体字体

> ID：11312556
> 
> 赞同：1
> 
> 时间：2012-07-03T13:59:04.257
> 
> 标签：emacs, lisp, elisp

对于任何应用的主题，我想用普通字体覆盖粗体字体。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:59:59.650

假设您使用的是 Emacs 24 的内置主题，

我对[这个](https://stackoverflow.com/questions/9620613/customizing-emacs-syntax-coloring)问题的回答非常适用。像这样的东西（未经测试）：

```
(defun debold-font-lock ()
  "remove all colors from font-lock faces except comment and warning"
  (mapc (lambda (face)
          (when face
            (set-face-bold-p face nil)))
        (face-list)))

(debold-font-lock) 
```

`load-theme`如果您需要它始终发生，您可以将其添加到建议中。

编辑：我在上面提到了一个建议，但如果你能提供帮助，通常最好不要建议。

所以我们可以定义一个新函数：

```
(defun load-theme-no-bold ()
  (interactive)
  (call-interactively 'load-theme)
  (debold-font-lock)) 
```

根据需要将此函数映射到键或直接从 Mx 调用它。

编辑：建议信息。

在 Emacs 中，您可以使用通知机制更改任何函数的工作方式。

您认为“P”应该在`a`按下键的情况下插入？没问题。

请参阅[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Defining-Advice.html)。

因为这是一个强大的工具，它往往会被大量使用，但实际上它应该只作为最后的手段应用，因为你永远不知道那里的哪些包依赖于现有的行为。

# python - 如何让 Python 同时对列表中的所有项目进行循环？

> ID：11312558
> 
> 赞同：1
> 
> 时间：2012-07-03T13:59:30.743
> 
> 标签：python, list, loops, for-loop, python-2.7

我有一个列表，我正在尝试同时为列表中的每个项目执行一个循环*。*

我试过使用这段代码：

```
thelist = ['first', 'second', 'third']

def loop():
    while True:
        for x in thelist:
            x = str(x)
            time.sleep(5)
            do_stuff_that_includes_x() 
```

但它会按照**.**`thelist`

我希望它同时为所有项目做这些`thelist` **事情**。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T18:40:30.913

正如 vossad01 在评论中所指出的，您的代码在循环内有 5 秒的延迟。这将导致列表中任意两个项目之间有 5 秒的延迟。如果您取消 5 秒延迟，您的消息将几乎即时发送到列表中的所有房间。

```
thelist = ['first', 'second', 'third']

def loop():
    while True:
        for x in thelist:
            x = str(x)
            do_stuff_that_includes_x() 

        time.sleep(5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:17:24.780

首先，由于全局解释器锁 (GIL)，多线程并行化不会产生性能提升。因此，如果您出于性能原因这样做，则需要查看[多处理](http://docs.python.org/library/multiprocessing.html)模块。看看[我如何并行化一个简单的 python 循环？](https://stackoverflow.com/a/9786225/1072626)有关使用进程池的映射成员来完成此操作的示例。

旁注：重新分配迭代变量 (x) 是不好的形式。此外，由于您想要并行执行，因此如果您可以在 x 上参数化 do_stuff_that_includes_x(​​) 将是最简单的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:12:59.930

我认为你需要多处理：

```
import time

def work(x):
    x = str(x)
    time.sleep(5)
    print x
#   do_stuff_that_includes_x()

thelist = ['first', 'second', 'third']
from multiprocessing import Pool
p = Pool( len( thelist ) )
p.map( work, thelist ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:01:23.330

使用`*`运算符一次解压整个列表

```
do_stuff_that_includes_x(*x) 
```

# javascript - LinkedIn 关注公司按钮显示空白页

> ID：11312560
> 
> 赞同：7
> 
> 时间：2012-07-03T13:59:32.520
> 
> 标签：javascript, html, css, linkedin

我通过提供公司名称并单击“**获取代码”**按钮从[该链接](https://developer.linkedin.com/plugins/follow-company)复制代码。它生成了下面给出的代码

 **```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/FollowCompany" data-id="361557" data-counter="right"></script> 
```

我将此代码粘贴在 html 文件的标记中，然后在 Chrome、Firefox 和 IE 中运行 html 文件，但所有浏览器都给出了一个空白页作为输出。

然后我将这些脚本粘贴到标签中，但输出保持不变。

我应该如何创建 html 文件，以便它可以生成**inFollow**按钮。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:10:15.407

好吧，看来您只是在调用 JavaScript。您必须将 JavaScript 放入 HTML 文档中，然后拥有与该脚本对应的元素。

请记住，您还必须拥有一个完整的结构化 HTML 文档，然后才能将 Script 标签放入其中，您需要 html、body、head、标签等。

尝试创建一个 HTML 文档并将其放在 .html 文件中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/FollowCompany" data-id="361557" data-counter="right"></script>

</body>
</html> 
```

要记住的提示：

*   许多脚本需要一个元素来对应。
*   您可以将脚本放置在主体标签或头部标签中的脚本标签内，这取决于您是否可能会选择页面上的元素。
*   每个 HTML 文档都需要正确的标记，然后浏览器才能呈现它。

希望这可以帮助！

**编辑：** 只需将其上传到服务器，一旦你这样做，它就会工作。我无法解释为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-23T20:23:55.613

它不能在本地工作，因为它使用的是协议相对 URL。如果你改变`src="//platform.linkedin.com/in.js"`它`src="https://platform.linkedin.com/in.js"`会工作。**

# windows - 更改某些非文本字符的字体时，如何使 TRichEdit 在 Windows 7 上表现得像写字板？

> ID：11312563
> 
> 赞同：53
> 
> 时间：2012-07-03T13:59:45.873
> 
> 标签：windows, delphi, fonts, trichedit, wordpad

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T06:12:54.937

要检查的一件事是查看 WordPad 和 TRichEdit 使用的 Richedit 控件是否相同。我建议您检查 (Spy++) Spyxx.exe 以确保控件具有相同的类和相同的样式。如果它们相同，我还会检查以确保控件接收到相同的消息，再次使用 Spy++。我猜这些控件不一样，或者它们的配置不一样。

如果它们不是同一个控件，那么您应该能够使用与写字板相同的控件（假设它是标准 Windows 自定义控件的一部分）。并使用 Spy++ 以与写字板相同的方式设置样式。此外，您可能还需要向其发送相同的消息。

# jquery - jsf 2.0 与 javascript 一起使用可防止 ajax 调用

> ID：11312564
> 
> 赞同：3
> 
> 时间：2012-07-03T13:59:48.233
> 
> 标签：jquery, jsf-2, richfaces

我正在开发一个 JSF 2 项目。在调用所有这些函数后，在客户端获得了一些 javascript/jQuery 函数`<a4j:commandButton>`不起作用。我明白了

```
Servlet.service() for servlet Faces Servlet threw exception: java.lang.NullPointerException 
    at com.sun.faces.context.PartialViewContextImpl.createPartialResponseWriter(PartialViewContextImpl.java:441) 
```

如果我更改`<a4j:commandButton>`为`<h:commandButton>`，那么一切正常，但我需要`a4j`because of`oncomplete`属性。

我该如何调试这个问题？它看起来像 javascript 事件的问题，它阻止了 ajax 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:42:15.443

我已经追踪到这个问题，以确定它是由于`<button>`html 中的标签。

例如：

```
<!DOCTYPE html>
<html lang="en" 
xmlns="http://www.w3.org/1999/xhtml" 
xmlns:h="http://java.sun.com/jsf/html" 
xmlns:a4j="http://richfaces.org/a4j">
<h:head>
</h:head>
<h:body>
    <h:form id="example">
        <a4j:commandButton type="submit" value="Submit" />
        <button>button</button>
    </h:form>
</h:body>
</html> 
```

我的理论是提交 AJAX 的 JavaScript 在某种程度上被`<button>`IE7 中的标签弄糊涂了，导致向服务器发送无效帖子。

如果没有看到您的 HTML，我无法确定这是您的问题。

查看以下 JIRA 帖子以获取更多信息。

[http://java.net/jira/browse/JAVASERVERFACES-2666](http://java.net/jira/browse/JAVASERVERFACES-2666)

[https://issues.jboss.org/browse/RF-12693](https://issues.jboss.org/browse/RF-12693)

在 RichFaces 上的 Pavol Pitonak 发现，如果你添加一个`name`属性，`<button>`那么错误就会消失。

# .net - 将 Expression.Call 与 Queryable.Select 一起使用，其类型仅在运行时已知

> ID：11312570
> 
> 赞同：1
> 
> 时间：2012-07-03T14:00:04.133
> 
> 标签：.net, vb.net, reflection, iqueryable, linq-expressions

我正在尝试从`IEnumerable`集合中选择一个列，该列的类型在运行时只有我知道。我能想到的唯一方法是使用 LINQ 表达式来构建对`Queryable.Select`. 但是，我在找出完成此任务的正确语法时遇到了很多麻烦。

我将如何在编译时知道我需要的一切的快乐世界中执行此操作的示例，我的代码如下所示：

```
' Create an IEnumerable(Of String)
Dim strings = { "one", "two", "three" }

' Produce a collection with elements {3,3,5}
Dim stringLengths = strings.Select(Function(x) x.Length) 
```

不幸的是，实际上我不知道我拥有的集合是 type `String`，或者我想要选择的属性是`Length`。我所拥有的是一个`IEnumerable`项目集合，以及一个`PropertyInfo`我想要选择的列，它为我提供了我需要的所有类型信息。

就表达式而言，我已经能够创建一个 LINQ 表达式，我相信它可以代表我通常会传递给 select 的 lambda（假设我正在尝试使用 String 和 String.Length 执行上述相同的操作）

```
' pi is the PropertyInfo containing the Length property I am trying to select.
' pi.DeclaringType is String and pi.Name is Length
Dim targetItem = Expression.Parameter(pi.DeclaringType, "x")
Dim targetProperty = Expression.Property(targetItem, pi.Name)

' Produces the lambda<Function(x) x.Length>
Dim selectLambda = Expression.Lambda(targetProperty, targetItem) 
```

现在希望剩下的就是构建对`Queryable.Select`. 对我来说，Expression.Call 的语法至少可以说相当混乱。我的尝试如下（失败，没有任何错误或任何解释）：

```
' Creates a Parameter Expression of type IQueryable(Of String)
Dim source = Expression.Parameter(GetType(IQueryable(Of )).MakeGenericType(pi.DeclaringType), "source")

' Ideally, this would create an expression for a call to Queryable.Select
Dim selectCall = Expression.Call(GetType(Queryable), "Select", {pi.DeclaringType, pi.PropertyType}, source) 
```

我尝试以另一种方式执行此操作，而不使用 Type[] 参数并使用我的项目和属性的表达式无济于事：

```
Dim alternateExp = Expression.Call(GetType(Queryable), "Select", Nothing, {targetProperty, item}) 
```

问题是我现在几乎只是在猜测。然而，构建函数调用的整个想法、何时使用类型或表达式、使用哪些类型或表达式，或者甚至在哪里使用它们都令人困惑。任何帮助我到达那里的最后一部分并清除一些这个谜团将不胜感激。（我对 C# 中的示例非常满意）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:59:03.723

```
 var propertyType = typeof (string);
 var propertyName = "Length";
 IEnumerable list = new ArrayList { "one", "two", "three" };

  var item = Expression.Parameter(typeof(object), "x");
  var cast = Expression.Convert(item, propertyType);
  var propertyValue = Expression.PropertyOrField(cast, propertyName);
  var propertyValueAsObject = Expression.Convert(propertyValue, typeof (object));
  var selectLambda = Expression.Lambda<Func<object, object>>(propertyValueAsObject, item);

  list.Cast<object>().AsQueryable().Select(selectLambda); 
```

这是一个使用表达式的答案，基本上我们将所有内容都作为一个对象处理（转换为我们的运行时类型，然后再转换回对象以获得最终结果。

# azure - how to visualize nicely the WADLogsTable

> ID：11312571
> 
> 赞同：0
> 
> 时间：2012-07-03T14:00:04.467
> 
> 标签：azure, azure-storage

I am logging stuff into the azure tables (WADSLogsTable is the default) and it works fine. My issue is: how do I visualize the logs in a nice way?

Until now I tried Azure Storage Explorer and Cerebrata's Azure Diagnostics Manager but I'm not impressed.

Any Ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:59:11.693

“nice”这个词是非常主观的。我认为 Cerebrata 工具是其他工具中的佼佼者，但是如果您对如何显示日志数据以更好地帮助您有更好的想法，请分享您的想法。如果您对可用的工具不满意，我认为现在是构建一个并与社区分享的好时机。

# android - 如何仅使用一个应用程序制作嵌入式 Android 操作系统？

> ID：11312576
> 
> 赞同：25
> 
> 时间：2012-07-03T14:00:22.150
> 
> 标签：android, arm, embedded, kiosk-mode

我想制作自己的基于 Android (ARM) 的嵌入式系统，仅使用随 Android 分发但没有启动器的设备。

**或者**

我想在我的应用程序在顶部启动的情况下启动 Android，并拒绝关闭它并从我的应用程序中关闭 Android。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-04T15:45:19.057

本质上，您正在尝试自定义构建 AOSP，其中“主页”是您的应用程序。如果您查看*/packages/apps/Launcher2*，您会找到默认主屏幕的代码。

如果您查看其中的*AndroidManifest.xml*文件，您会看到如下内容：

```
 <activity
        android:name="com.android.launcher2.Launcher"
        android:launchMode="singleTask"
        android:clearTaskOnLaunch="true"
        android:stateNotNeeded="true"
        android:theme="@style/Theme"
        android:screenOrientation="nosensor"
        android:windowSoftInputMode="stateUnspecified|adjustPan">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.MONKEY"/>
        </intent-filter>
    </activity> 
```

本质上，这表示此活动对

> android.intent.category.HOME*意图*。

当系统完成启动时（更具体地说是 ActivityManager），发送该意图。因此，如果您希望您的应用程序启动而不是启动器，只需为自己创建一个具有类似意图过滤器的应用程序并删除默认的 Launcher2（将其从*build/target/product/generic.mk*中的列表中删除，并改为使用您的）。还要确保相关的 .mk 文件具有以下内容：

```
LOCAL_OVERRIDES_PACKAGES := Home 
```

只要您的应用程序没有为用户提供使用图标启动其他应用程序的方式（如 Launcher 那样），就不会启动其他应用程序；当然，除非某些东西从您的应用程序控制的路径之外的其他路径发送活动启动意图 - 例如通过在目标的 Android shell 上使用“am”命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:14:57.810

根据您的问题，您想创建自己的自定义 Android 操作系统版本。这将比开发普通的 Android 应用程序涉及更多内容，因此您将不得不阅读大量内容，尤其是 Android OS 源代码。

我建议您从[Android Open Source Project](http://source.android.com/)开始。

# string - 在R中读取空格分隔的数字

> ID：11312577
> 
> 赞同：7
> 
> 时间：2012-07-03T14:00:23.157
> 
> 标签：string, r, numbers, character

我在 R 中有这个字符串：

```
numbers <- "4 4956  1.00e-09         50.9     1.244 47.1 1.04  5.5     0.499   13.9       0" 
```

我应该将数字读入向量。现在我可以找到其他语言的相同线程，但在这里找不到 R。我试过了：

```
library(stringr)
str_extract_all(numbers, "[0-9]+")
[[1]]
[1] "4"    "4956" "1"    "00"   "09"   "50"   "9"    "1"    "244"  "47"   "1"   
[12] "1"    "04"   "5"    "5"    "0"    "499"  "13"   "9"    "0" 
```

但正如您在上面看到的那样，它会弄乱数字。我认为问题出在正则表达式中，但似乎我无法正确处理，我对此一无所知。

我很感激任何评论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T14:06:21.233

你可以使用`scan`：

```
> y <- scan(con <- textConnection(numbers))
Read 11 items
> close(con)
> y
 [1] 4.000e+00 4.956e+03 1.000e-09 5.090e+01 1.244e+00 4.710e+01 1.040e+00
 [8] 5.500e+00 4.990e-01 1.390e+01 0.000e+00 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T14:12:10.273

如果您仍然想使用您的方式：

```
str_extract_all(numbers, "[\\.0-9e-]+") 
```

并获得数字：

```
as.numeric(unlist(str_extract_all(numbers, "[\\.0-9e-]+"))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:07:17.933

```
as.numeric(strsplit(numbers,split=" +")[[1]])->numbers 
```

（`" +"`表示一个或多个空格。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T14:10:00.923

有点乱，但这应该可以解决问题：`as.numeric(unlist(strsplit(numbers, "\\s+")))`

将行从里到外运行以查看发生了什么，`strsplit`拆分空格并返回一个列表，`unlist`使其成为字符向量，然后`as.numeric`转换为数字，留下一个数字向量。

# glassfish - 如何从 JAX-RS 资源中确定远程 IP 地址？

> ID：11312578
> 
> 赞同：3
> 
> 时间：2012-07-03T14:00:23.237
> 
> 标签：glassfish, jax-rs, grizzly

我在 Grizzly HTTP 服务器中运行了以下 JAX-RS 资源：

```
@Path("/board")
public class BoardResource {

    @POST
    @Consumes("application/x-www-form-urlencoded")
    public void login(@FormParam("email") String email, @FormParam("password") String password,
            @HeaderParam("user-agent") String userAgent) {
        // how to determine remote IP address here?
    }
} 
```

如何确定 login() 处理程序中的远程 IP 地址？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T10:43:04.160

由于现在无法[从](https://java.net/jira/browse/JERSEY-473)Grizzly 上下文访问远程 IP 信息，因此我实现了这个肮脏的 hack：

首先，我在我的应用程序中添加了新的依赖注入绑定器，它将 java.net.SocketAddress 实例绑定到包含请求源 IP 的实例：

```
package test;

import java.lang.reflect.Field;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import javax.inject.Inject;
import javax.inject.Provider;
import org.glassfish.grizzly.http.server.Request;
import org.glassfish.hk2.api.Factory;
import org.glassfish.hk2.utilities.binding.AbstractBinder;
import org.glassfish.jersey.internal.PropertiesDelegate;
import org.glassfish.jersey.process.internal.RequestScoped;
import org.glassfish.jersey.server.ContainerRequest;

public class RemoteAddrBinder extends AbstractBinder {

    private static class RemoteAddrProviderFactory implements Factory<SocketAddress> {
        @Inject
        private Provider<ContainerRequest> request;

        @Override
        public SocketAddress provide() {
            ContainerRequest containerRequest = request.get();
            PropertiesDelegate delegate = containerRequest.getPropertiesDelegate();
            try {
                Field requestField = delegate.getClass().getDeclaredField("request");
                requestField.setAccessible(true);
                Request grizzlyRequest = (Request) requestField.get(delegate);
                return new InetSocketAddress(grizzlyRequest.getRemoteAddr(), grizzlyRequest.getRemotePort());
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }
        }

        @Override
        public void dispose(SocketAddress instance) {
        }
    }

    @Override
    protected void configure() {        bindFactory(RemoteAddrProviderFactory.class).to(SocketAddress.class).in(RequestScoped.class);
    }
} 
```

然后，我在应用程序中注册了这个活页夹：

```
application.register(new RemoteAddrBinder()); 
```

现在，可以将 SocketAddress 注入到任何 JAX-RS 方法中：

```
@GET
@Path("test")
public Response test(@Context SocketAddress remoteAddr) {
    return Response.ok("Your IP is: " + ((InetSocketAddress) remoteAddr).getAddress().getHostAddress()).build();
} 
```

希望这可以帮助某人:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T13:16:38.860

根据开发人员的解释——Grizzly 并不完全符合 JAX-RS 2.0，因此不会有官方的上下文注入/包装。请参阅[Jersey Bug-1960](https://java.net/jira/browse/JERSEY-1960) 适用于 Jersey + Grizzly 版本 2.7+

幸运的是，有一种方法可以注入 Grizzly 请求/响应对象。泽西的一个单元测试中提供了一种棘手但有效的代码示例。见[泽西容器测试](https://github.com/jersey/jersey/blob/cf236e5ae2820db67a9581a8eece53d01a412cae/tests/e2e/src/test/java/org/glassfish/jersey/tests/e2e/container/Jersey2462Test.java#L113)

所以代码片段将是：

```
import javax.inject.Inject;
import javax.inject.Provider;

public someclass {
    @Inject
    private Provider<Request> grizzlyRequestProvider;

    public void method() {
         if (grizzlyRequestProvider != null) {
            Request httpRequest = grizzlyRequestProvider.get();

            // Extract what you need
            String remoteAddress = httpRequest.getRemoteAddr();
         }
    }
} 
```

适用于过滤器和服务方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-15T10:49:13.757

spektom 的解决方案不再适用于最新版本。幸运的是，现在存在更好的解决方案，将以下内容添加到您的方法参数中：

```
@Context org.glassfish.grizzly.http.server.Request req 
```

在您的情况下，它看起来像这样：

```
@Path("/board")
public class BoardResource {

    @POST
    @Consumes("application/x-www-form-urlencoded")
    public void login(@Context Request req, @FormParam("email") String email, @FormParam("password") String password,
            @HeaderParam("user-agent") String userAgent) {
        // remote IP address
        System.out.println(req.getRemoteAddr());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T14:08:17.543

您应该为该类型的方法添加一个额外的参数，[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)并在其`@Context`上添加注释。然后，您可以使用该参数的[`getRemoteAddr()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)方法来获得您想要的。

```
@Path("/board")
public class BoardResource {
    @POST
    @Consumes("application/x-www-form-urlencoded")
    public void login(@FormParam("email") String email,
            @FormParam("password") String password,
            @HeaderParam("user-agent") String userAgent,
            @Context HttpServletRequest request) {
        String remoteIP = request.getRemoteAddr();
        // ...
    }
} 
```

是的，这是一个`String`……</p>

# python - networkx draw_networkx_edges capstyle

> ID：11312579
> 
> 赞同：6
> 
> 时间：2012-07-03T14:00:26.870
> 
> 标签：python, matplotlib, networkx

有谁知道在通过（例如）绘制networkx边缘时是否可以对线属性进行细粒度控制`draw_networkx_edges`？我想控制线`solid_capstyle`和`solid_joinstyle`，它们是（matplotlib）`Line2D`属性。

```
>>> import networkx as nx
>>> import matplotlib.pyplot as plt
>>> G = nx.dodecahedral_graph()
>>> edges = nx.draw_networkx_edges(G, pos=nx.spring_layout(G), width=7)
>>> plt.show() 
```

在上面的示例中，我想通过控制 capstyle 来隐藏边缘之间的“间隙”。我考虑过以合适的大小添加节点来填补空白，但我最终绘图中的边缘是彩色的，所以添加节点不会削减它。我无法从文档中弄清楚或查看`edges.properties()`如何做我想做的事情......有什么建议吗？

卡森

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T13:26:17.640

看起来您无法在 matplotlib 行集合上设置 capstyle。

但是您可以使用 Line2D 对象制作自己的边缘集合，这允许您控制 capstyle：

```
import networkx as nx
import matplotlib.pyplot as plt
from matplotlib.lines import Line2D
G = nx.dodecahedral_graph()
pos = nx.spring_layout(G)
ax = plt.gca()
for u,v in G.edges():
    x = [pos[u][0],pos[v][0]]
    y = [pos[u][1],pos[v][1]]
    l = Line2D(x,y,linewidth=8,solid_capstyle='round')
    ax.add_line(l)
ax.autoscale()
plt.show() 
```

# entity-framework-4 - 其中 CategoryId = 75 和（BrandId = 12 或 BrandId = 3）相当于 Linq 到实体

> ID：11312583
> 
> 赞同：0
> 
> 时间：2012-07-03T14:00:42.477
> 
> 标签：entity-framework-4

我需要使用 CategoryId = 75 和（BrandId = 12 或 BrandId = 3）的过滤器过滤数据，但等效的 Linq to Entity

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:03:31.947

假设 C# 和相同命名的列，您可以使用以下方法过滤上下文：

```
.Where(w=>w.CategoryId==75 && (w.BrandId==12 || w.BrandId==3)) 
```

# iphone - SQLite“SQLITE 误用”错误

> ID：11312584
> 
> 赞同：3
> 
> 时间：2012-07-03T14:00:44.723
> 
> 标签：iphone, xcode, sqlite, ios5

我对 SQLite 有疑问。当我尝试插入条目时出现错误。我发现错误是“SQLITE MISUSE”，错误代码为 21，使用

```
NSLog(@"ERROR:  Failed to add food!  (code: %d)",sqlite3_step(statement)); 
```

我的代码中的 insertSQL 字符串在需要时正确创建。另外，我看到了用 iFunBox 创建的表。

这是我的插入方法：

```
-(void)saveDataWithCategoryNumber:(int)categoryNumber foodNumber:(int)foodNumber foodName:(NSString *)foodName definiton:(NSString *)definiton ingredients:(NSString *)ingredients calorie:(int)calorie price:(int)price image1:(NSString *)image1 image2:(NSString *)image2 image3:(NSString *)image3 image4:(NSString *)image4 {
sqlite3_stmt    *statement;
const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &foodDB) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO foodDB (categoryNumber, foodNumber, foodName, definiton, ingredients, calorie, price, image1, image2, image3, image4) VALUES (%i, %i, \"%@\",  \"%@\",  \"%@\",  %i,  %i,  \"%@\",  \"%@\",  \"%@\",  \"%@\")", categoryNumber, foodNumber, foodName, definiton, ingredients, calorie, price, image1, image2, image3, image4];

    const char *insert_stmt = [insertSQL UTF8String];
    sqlite3_prepare_v2(foodDB, insert_stmt, -1, &statement, NULL);
    //char *error;
    //sqlite3_exec(foodDB, insert_stmt, NULL, NULL, &error);

    NSLog(@"insertSQL: %@",insertSQL);

    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        NSLog(@"Food added.");
    } else {
        NSLog(@"ERROR:  Failed to add food!  (code: %d)",sqlite3_step(statement));

    }

    sqlite3_finalize(statement);
    sqlite3_close(foodDB);
}} 
```

* * *

可能是创建方法会很有用：

```
-(void)createDatabase{
NSString *docsDir;
NSArray *dirPaths;
// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"foodDB.db"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: databasePath ] == NO)
{
    const char *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &foodDB) == SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS foodDB (ID INTEGER PRIMARY KEY AUTOINCREMENT, categoryNumber INT, foodNumber INT, foodName TEXT, definition TEXT, ingredients TEXT, calorie INT, price INT, image1 TEXT, image2 TEXT, image3 TEXT, image4 TEXT)";

        if (sqlite3_exec(foodDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {
            NSLog(@"ERROR:  Failed to create database!");
        }

        sqlite3_close(foodDB);

    } else {
        NSLog(@"ERROR:  Failed to open/create database!");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:46:26.543

我发现了一个奇怪的情况，我在声明中使用的“定义”词导致了错误。有趣的是 SQLite 关键字列表中没有列出“定义”这个词（[http://www.sqlite.org/lang_keywords.html](http://www.sqlite.org/lang_keywords.html)）

当我用“def”替换“definiton”时，问题就解决了。（创建数据库方法）

```
const char *sql_stmt = "CREATE TABLE IF NOT EXISTS foodDB (ID INTEGER PRIMARY KEY AUTOINCREMENT, categoryNumber INT, foodNumber INT, foodName TEXT, definition TEXT, ingredients TEXT, calorie INT, price INT, image1 TEXT, image2 TEXT, image3 TEXT, image4 TEXT)";

const char *sql_stmt = "CREATE TABLE IF NOT EXISTS foodDB (ID INTEGER PRIMARY KEY AUTOINCREMENT, categoryNumber INT, foodNumber INT, foodName TEXT, def TEXT, ingredients TEXT, calorie INT, price INT, image1 TEXT, image2 TEXT, image3 TEXT, image4 TEXT)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:18:25.640

您的日志记录逻辑正在执行两个`sqlite_step()`操作，这充其量是误导。

相反，捕获第一次`sqlite_step()`调用的返回码并报告**该**值：

```
int rc = sqlite3_step(statement);
if (rc == SQLITE_OK)
{
    NSLog(@"Food added.");
} else {
    NSLog(@"ERROR:  Failed to add food!: %d", rc);
} 
```

您需要将此逻辑扩展到`sqlite_xxx()`代码中的所有调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-26T01:45:20.693

就我而言，我正在使用

> sqlite3_exec

代替

> sqlite3_prepare_v2

这导致了错误。更改 SQL 语句解决了该问题。

# solr - 运行 Solr 时的高级上下文切换

> ID：11312585
> 
> 赞同：0
> 
> 时间：2012-07-03T14:00:44.910
> 
> 标签：solr

分析为什么运行 Solr 进程（在 Jetty 或 Tomcat 内部）会导致异常高的上下文切换率的最佳方法是什么？线程数、内存等一般参数似乎没问题（通过 JMX 验证），并且 Solr 几乎没有负载。由于我不是 Solr 专家，所以对如何解决问题感到有点失落:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:29:47.310

毕竟这是一个与闰秒相关的问题......通过以下方式修复：

```
service ntp stop
date `date +"%m%d%H%M%C%y.%S"`
service ntp start 
```

# c# - 如何将 DataTable 传递给 Javascript

> ID：11312587
> 
> 赞同：0
> 
> 时间：2012-07-03T14:00:48.003
> 
> 标签：c#, javascript

如何将具有很多行的 DataTable 元素传递给 Javascript ？

这个想法是让我在我的变量中做一个循环，接收这个 DataTable 并恢复这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:03:52.883

Json 是这里的最佳选择，但如果您使用的不是简单类型，您将遇到复杂性。

# linux - PermGen 问题在 Tomcat 重新启动后仍然存在（Linux、Tomcat 6.0.35）

> ID：11312596
> 
> 赞同：0
> 
> 时间：2012-07-03T14:01:20.170
> 
> 标签：linux, tomcat, jvm, tomcat6, permgen

Tomcat 有一个众所周知的内存泄漏问题，该问题会在重新部署过多后导致 PermGen 空间错误。

我想知道的是以完全重置该空间并消除现有内存泄漏的方式重新加载服务器的最佳实践。仅使用 shutdown.sh 和 startup.sh 并没有减少它：似乎泄漏的内存一直在泄漏。重新启动机器当然可以，但我想知道是否存在更快/更清洁/更安全的解决方案。

谢谢！

（当然，我可以分配更多的 PermGen 空间，但这只是延迟问题，我想在将应用程序声明为生产就绪之前清除泄漏的内存，因为我之后要换工作，因此应用程序暂时不会重新部署）

编辑：正如下面评论中提到的，似乎脚本应该已经刷新所有内存，因为它们创建了一个新的 JVM，所以在多次重新部署之后，即使在新的 JVM 中，一定还有其他一些因素导致 PermGen 错误继续发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:23:38.833

Tomcat 没有*PermGen*泄漏、webapp 重新部署与否。问题在于您的 webapp 本身、您使用的库，或者在某些情况下是 Java 标准库实现。所有这些都可以解决，而无需举起手臂并责怪Tomcat。

尝试阅读[http://people.apache.org/~markt/presentations/2010-11-04-Memory-Leaks-60mins.pdf](http://people.apache.org/~markt/presentations/2010-11-04-Memory-Leaks-60mins.pdf)以了解如何正确诊断这些泄漏。给自己一个分析器（这甚至可以使用 JDK 中包含的免费实用程序来完成，例如 JVisualVM）。

Tomcat 7 包含一个内存泄漏预防实用程序，可以解决有问题的 Java API 实现（例如 AWT）。其他一切都是您的问题或您的图书馆的问题。大多数发现此类 PermGen 泄漏的开源库都已迅速修补其库以避免它们（或为客户端代码提供一种优雅的方式来避免 PermGen 泄漏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T12:44:07.790

如果你还没有解决这个问题，你可以试试[Plumbr](http://plumbr.eu)。刚刚发布的版本也具有 PermGen 监控功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T14:06:38.773

此脚本会在超过 95% 的物理内存时自动重启 Tomcat 服务器实例。享受！

```
porcentaje=95
usoMemoria=$(ps aux | grep tomcat | grep -v grep | awk '{printf ("%.0f", $4)}')
if [ $usoMemoria -ge $porcentaje ]; then
  echo "Se ha superado el tope (95%) de memoria que se ha establecido para el Tomcat. Se procede a su reinicio automatico"
  echo "$(date)"
  echo "Comenzando..."
  service tomcat7 restart
  echo "Terminando Script..."
fi
exit 0 
```

# jquery - 链接上的 jQuery 动画

> ID：11312605
> 
> 赞同：1
> 
> 时间：2012-07-03T14:01:45.513
> 
> 标签：jquery, jquery-animate

我有以下 HTML：

```
<div class="olympics" style="display: block; position: absolute; left: 250px; top: px;">

   <a style="display: inline-block; float: left; height: 20px; margin: 5px;" href="#">Link 1</a>
   <a style="display: inline-block; float: left;  height: 20px; margin: 5px;" href="#">Link 2</a>

 </div>​ 
```

和JS：

```
$('.olympics a').hover(function() {
    $(this).animate({
        backgroundColor: "#aa0000",
        color: "#fff"
    }, 1000);
}, function() {
    $(this).animate({
        backgroundColor: "#fff",
        color: "#aa0000"
    }, 1000);
});​ 
```

知道为什么这个动画不起作用吗？

jsfiddle 演示在这里：http: **[//jsfiddle.net/Seefeld/NzhxH/13/](http://jsfiddle.net/Seefeld/NzhxH/13/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:04:46.273

您是否在导入中包含了 jQueryUI 包？在我将它添加到您的小提琴中之后，它正在工作

[http://jsfiddle.net/NzhxH/19/](http://jsfiddle.net/NzhxH/19/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:29:09.353

如果你不想使用 jquery ui 并且有一个更轻量级的网站

你可以用两种方法做到这一点

CSS3：

[http://jsfiddle.net/NzhxH/41/](http://jsfiddle.net/NzhxH/41/)

```
-webkit-transition: all 400ms linear;
-moz-transition: all 400ms linear;
-ms-transition: all 400ms linear; 
```

jQuery：

[http://jsfiddle.net/NzhxH/39/](http://jsfiddle.net/NzhxH/39/)

```
$('.olympics div').hover(function() {
    $(this).children('span').stop().animate({
        opacity:1
    }, 1000);
    $(this).children('a').delay(800).css({'color':'#fff'});
}, function() {
    $(this).children('span').stop().animate({
        opacity:0
    }, 1000);
    $(this).children('a').delay(800).css({'color':'#aa0000'});
});​ 
```

# android - Android Chrome 触摸对象不会在事件之间持续存在

> ID：11312611
> 
> 赞同：0
> 
> 时间：2012-07-03T14:02:01.567
> 
> 标签：android, google-chrome

我开发了一个内置了一些触摸处理代码的网络应用程序。在触摸时，它会在事件中保存对 changedTouches 的引用。在 touch up 时，它会遍历 changedTouches 并尝试将它们与 touchDown 事件中存储的触摸对象相匹配，从而发出触摸结束的信号。不过，这两个事件的触摸对象似乎并不相同，这意味着我无法匹配触摸。该应用程序在 iOS 以及桌面上的 Safari 和 Chrome 中运行良好，并带有一些触摸事件模拟。在 Android 上的 Chrome 中似乎是一个问题。

这是一个例子： [jsFiddle](http://jsfiddle.net/LMj32/5)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:58:06.563

Chrome for Android 中存在一个错误，其中 touches 和 changedTouches 数组无法正确维护自己的唯一标识符，除非您应用`event.preventDefault()`touchmove 或 touchstart 事件。

此错误影响 Ice Cream Sandwich 和 Jelly Bean 中的 Android 版 Chrome，并且一年多以来仍未解决。因此，第一张海报是正确的，您应该依赖`touches[i].identifier`or `changedTouches[i].identifier`，请记住，您必须调用`event.preventDefault()`touchmove 或 touchstart 才能使这些标识符正确保留。

[http://code.google.com/p/android/issues/detail?id=19827](http://code.google.com/p/android/issues/detail?id=19827)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:14:54.910

TouchLists 中的触摸顺序不能保证保持一致。你应该依赖于`touch.identifier`。请参阅[触摸事件规范](http://www.w3.org/TR/touch-events/#widl-Touch-identifier)。

# java - 如何将字符串转换为 JsonArray？

> ID：11312617
> 
> 赞同：0
> 
> 时间：2012-07-03T14:02:35.487
> 
> 标签：java, android, json, string

我试图操纵一个 JsonArray 看起来像另一个 JsonArray。我对现有的 JsonArray 实现了一些字符串方法。现在我想把它放回另一个 JsonArray。

**代码**

```
 Log.d("defaultArrayShuffled", defaultArray.toString());

                String temp = defaultArray.toString();
                String temp1= temp.replaceAll("_white_", "_");
                Log.d("temp1", temp1);

                JSONObject temp2 = new JSONObject();
                temp2.put("arr", temp1);
                Log.d("temp2", temp2.toString());
                replacingArray = temp2.getJSONArray("arr"); 
```

**LogCAT**

```
07-03 19:16:37.310: D/defaultArrayShuffled(8863): ["findhidden\/o_white_64.png","findhidden\/x_white_64.png","findhidden\/f_white_64.png","findhidden\/b_white_64.png","findhidden\/a_white_64.png","findhidden\/g_white_64.png","findhidden\/p_white_64.png","findhidden\/u_white_64.png","findhidden\/n_white_64.png","findhidden\/j_white_64.png","findhidden\/y_white_64.png","findhidden\/q_white_64.png","findhidden\/l_white_64.png","findhidden\/t_white_64.png","findhidden\/h_white_64.png","findhidden\/v_white_64.png","findhidden\/r_white_64.png","findhidden\/k_white_64.png","findhidden\/m_white_64.png","findhidden\/c_white_64.png","findhidden\/z_white_64.png","findhidden\/s_white_64.png","findhidden\/w_white_64.png","findhidden\/d_white_64.png","findhidden\/i_white_64.png","findhidden\/e_white_64.png"]
07-03 19:16:37.310: D/temp1(8863): ["findhidden\/o_64.png","findhidden\/x_64.png","findhidden\/f_64.png","findhidden\/b_64.png","findhidden\/a_64.png","findhidden\/g_64.png","findhidden\/p_64.png","findhidden\/u_64.png","findhidden\/n_64.png","findhidden\/j_64.png","findhidden\/y_64.png","findhidden\/q_64.png","findhidden\/l_64.png","findhidden\/t_64.png","findhidden\/h_64.png","findhidden\/v_64.png","findhidden\/r_64.png","findhidden\/k_64.png","findhidden\/m_64.png","findhidden\/c_64.png","findhidden\/z_64.png","findhidden\/s_64.png","findhidden\/w_64.png","findhidden\/d_64.png","findhidden\/i_64.png","findhidden\/e_64.png"]
07-03 19:16:37.310: D/temp2(8863): {"arr":"[\"findhidden\\\/o_64.png\",\"findhidden\\\/x_64.png\",\"findhidden\\\/f_64.png\",\"findhidden\\\/b_64.png\",\"findhidden\\\/a_64.png\",\"findhidden\\\/g_64.png\",\"findhidden\\\/p_64.png\",\"findhidden\\\/u_64.png\",\"findhidden\\\/n_64.png\",\"findhidden\\\/j_64.png\",\"findhidden\\\/y_64.png\",\"findhidden\\\/q_64.png\",\"findhidden\\\/l_64.png\",\"findhidden\\\/t_64.png\",\"findhidden\\\/h_64.png\",\"findhidden\\\/v_64.png\",\"findhidden\\\/r_64.png\",\"findhidden\\\/k_64.png\",\"findhidden\\\/m_64.png\",\"findhidden\\\/c_64.png\",\"findhidden\\\/z_64.png\",\"findhidden\\\/s_64.png\",\"findhidden\\\/w_64.png\",\"findhidden\\\/d_64.png\",\"findhidden\\\/i_64.png\",\"findhidden\\\/e_64.png\"]"} 
```

**更多**

```
07-03 19:16:37.320: W/System.err(8863):     at org.json.JSON.typeMismatch(JSON.java:96) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:36:00.013

从temp2的日志输出来看，arr的json类型是String。因此，如果您尝试从中取出 JSONArray，您将得到 typeMismatch。

看看下面的代码是否适合你。JSONObject 的构造函数可以采用包含对象的 JSON 编码字符串。所以我们用它来创建temp2。

```
Log.d("defaultArrayShuffled", defaultArray.toString());

String temp = defaultArray.toString();
String temp1= temp.replaceAll("_white_", "_");
Log.d("temp1", temp1);

JSONObject temp2 = new JSONObject("{ \"arr\" : " + temp1 + "}");
//temp2.put("arr", temp1);
Log.d("temp2", temp2.toString());
replacingArray = temp2.getJSONArray("arr"); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:23:55.607

几个想法 -
A. 我发现 Jackson 是一个更好的 Json 库。考虑使用它。它提供了更好的错误消息
B. 我编写了以下代码，类似于您使用我们在[www.ovirt.org](http://www.ovirt.org) 上为 Json 序列化和反序列化所做的基础设施所做的事情：

```
 String[] arr = { "aaa_white_.png", "bbb_white_.png", "ccc_white_.png", "ddd.png" };
        JsonObjectSerializer serialezer = new JsonObjectSerializer();
        String payload = serialezer.serialize(arr);
        String newPayload = payload.replaceAll("_white_", "_");
        JsonObjectDeserializer der = new JsonObjectDeserializer();
        String[] res = (String[]) der.deserialize(newPayload, String[].class);
        System.out.println(payload);
        System.out.println(res);
        for (String str : res) {
            System.out.println(str);
        } 
```

你可以 git clone 我们的代码，你应该看看`ovirt-engine/backend/manager/modules/utils/src/main/java/org/ovirt/engine/core/utils/serialization/json` 我们在那里做了什么。

# java - Signature.verify() 总是返回 false

> ID：11312619
> 
> 赞同：0
> 
> 时间：2012-07-03T14:02:40.590
> 
> 标签：java, signature

当我尝试使用 Signature 类验证签名时，Signature.verify() 方法总是返回 false。我的代码如下。

```
package test;

import com.sun.org.apache.xerces.internal.impl.dv.util.Base64;

import java.io.UnsupportedEncodingException;

import java.math.BigInteger;

import java.security.*;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.RSAPublicKeySpec;

import java.util.logging.Level;
import java.util.logging.Logger;

/* this method converts the string into hash using SHA1 encryption algorithm */

public class SignatureTest {

    static byte[] sha1(String input) throws NoSuchAlgorithmException {
        MessageDigest mDigest = MessageDigest.getInstance("SHA1");
        byte[] result = mDigest.digest(input.getBytes());
        System.out.println("sha1 hashed data" + result);
        return result;

    }

    public static void main(String[] args) throws InvalidKeySpecException {
        try {

            String dataString = "70:F3:95:11:14:B3" + "AIG_OCR" + "5";
            byte[] data = sha1(dataString);
            System.out.println(dataString);
            System.out.println("data::::::::::::" + data);
            String data2 = Base64.encode(data);
            System.out.println(data2);

            /* here goes ur signed data  */

            byte[] signedData =
                Base64.decode("Q2BD1bPUKcs/iWpsBlvFtcJfrnzofucHIhc+m3qvKibLO13Z7FLSUQyOUUL9oh5KKpxiQY6b4mcLKYP2N9UPNZlCB6WBowJyDTEGajKNNyBgnn6nm7I/7X+eboQkEEqmSsGC0WA1XFXE+QQD6EXWzEkXzPornC3RnNJoR/fEIc8=");
            System.out.println(" lenghtof signedData:::::" +
                               signedData.length);

            /* here is the modulus reqired to generate the public key*/

            byte[] modulusBytes =
                Base64.decode("pggfRN033/0G9HA5/x5v257h5Zdb13Lown8MTYDVF4ItZRuA6mC148omMvAdOO6wdaak/4atCvrIFrsNlFK8NSY8eb7WKN8WCdamXvHQ6G7FUDMOWs0WNokbhJRabUey/cXtG5b7ODTSr1VX2lV9uEfZEruw5YhmLXof39uftWc=");

            /* here is the exponentBytes reqired to generate the public key*/

            byte[] exponentBytes = Base64.decode("AQAB");
            System.out.println(" lenghtof modulusBytes:::::" +
                               modulusBytes.length);
            BigInteger modulus = new BigInteger(1, modulusBytes);
            BigInteger exponent = new BigInteger(1, exponentBytes);
            RSAPublicKeySpec rsaPubKey =
                new RSAPublicKeySpec(modulus, exponent);
            KeyFactory fact = KeyFactory.getInstance("RSA");
            PublicKey rsaPublicKey = fact.generatePublic(rsaPubKey);
            Signature sig = Signature.getInstance("SHA1withRSA");
            sig.initVerify(rsaPublicKey); // initiate the signature with public key
            sig.update(data); // update signature with the data that was signed by the card
            Boolean flag =
                sig.verify(signedData); // Test card signature - this always returns false
            System.out.println("flag:::::::::::::" + flag);
        } catch (SignatureException ex) {
            Logger.getLogger(SignatureTest.class.getName()).log(Level.SEVERE,
                                                                null, ex);
        } catch (InvalidKeyException ex) {

            Logger.getLogger(SignatureTest.class.getName()).log(Level.SEVERE,
                                                                null, ex);
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(SignatureTest.class.getName()).log(Level.SEVERE,
                                                                null, ex);
        } catch (Exception ex) {
            Logger.getLogger(SignatureTest.class.getName()).log(Level.SEVERE,
                                                                null, ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:56:43.393

1）如果您使用 SHA1withRSA（签名引擎自动执行此操作），则不需要计算哈希，
`sig.update(data);` 需要将行更改为 `sig.update(dataString.getBytes());`

2）签名文本有点奇怪“70：F3：95：11：14：B3”+“AIG_OCR”+“5”，你的意思是字节序列 - 0x70,0xF3..？

# php - WebTestCase：使用爬虫测试字符串

> ID：11312621
> 
> 赞同：1
> 
> 时间：2012-07-03T14:02:44.473
> 
> 标签：php, testing, symfony, functional-testing, web-crawler

有没有办法在字符串上使用 WebTestCase 的爬虫？通常，如果我想使用 WebTestCase 进行测试，我会使用客户端执行以下操作：

```
public function testInitialPage()
{
    $client = $this->createClient();
    $crawler = $client->request('GET', '/');

    $this->assertCount(1, $crawler->filter('h1:contains("Contact us")'));
    ...
} 
```

现在，我想知道，是否有可能以某种方式在字符串上使用爬虫，所以它会像下面这样：

```
public function testInitialPage()
{
    ...
    $crawler = Crawler::createCrawler("<h1>Contact us</h1>");
    $this->assertCount(1, $crawler->filter('h1:contains("Contact us")'));
    ...
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:39:57.073

如果从[DomCrawler](http://symfony.com/doc/current/components/dom_crawler.html)组件中导入 Crawler 类，则可以在测试中使用它。

```
namespace Acme\Tests;

//...
use Symfony\Component\DomCrawler\Crawler;

class ContactTest extends WebTestCase
{
    public function testHeadlineOnContactUs()
    {
        $crawler = new Crawler("<h1>Contact us</h1>");
        $this->assertCount(1, $crawler->filter('h1:contains("Contact us")'));
    }
} 
```

# out-of-memory - OpenJPA 发生 OutofMemory 异常

> ID：11312623
> 
> 赞同：0
> 
> 时间：2012-07-03T14:02:51.633
> 
> 标签：out-of-memory, openjpa, recursive-query

当我尝试使用 openJPA 拉回一棵巨大的对象树时出现内存不足错误...我能做些什么来缓解这种情况...这是我的一些方法...

我搜索一个实体......这个实体应该有与之关联的子实体（它们本质上是同一个实体）......所以我包含一个子实体列表......

```
private List<Organization> childOrgsTree = new ArrayList<Organization>(); 
```

所以实体是一个组织，我包含了一个包含这个实体的组织列表......现在我有一个命名的本地查询，它获取这个特定实体的每个孩子。我递归地遍历每个孩子并找到该实体的每个孩子......可能会调用相同命名的本机查询数千次。递归构造子树对象。现在，这似乎可行，直到我遇到内存不足的异常......我有点困惑如何解决这个小问题？我显然可以增加分配给进程的内存，但我担心这将是一个创可贴。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:32:01.400

> 我有点困惑如何解决这个小问题？

您有两个选择，在应用程序代码中保留更少的内存，或者增加 JVM 堆大小。

# css - Symfony2 CSS 图像路径被重写，我得到 404

> ID：11312625
> 
> 赞同：5
> 
> 时间：2012-07-03T14:03:13.740
> 
> 标签：css, image, symfony, yui-compressor

我在现有项目中使用 Symfony2 和资产，但我不知道如何在我的 CSS 中引用图像。我已将图像放入：`src/Organisation/MyBundle/Resources/public/images/`

运行资产安装后：`php app/console assets:install public`

我可以在浏览器中正确加载它们：`http://sitename/bundles/organisationmy/images/logo.png`

但是，当我尝试在 CSS 中指向它们时，使用：`url('/bundles/organisationmy/images/logo.png')`

使用 firebug 检查，url 被更改为：`url('/web/bundles/organisationmy/images/logo.png')`并导致 404。

在我的主模板中，我有：

```
{% stylesheets filter='yui_css' output='css/output.css'
    '@MyBundle/Resources/public/css/bootstrap.min.css'
    '@MyBundle/Resources/public/css/bootstrap-responsive.min.css'
    '@MyBundle/Resources/public/css/my.css'
 %} 
```

在`config.yml`我有：

```
assetic:
    debug: %kernel.debug%
    use_controller: false
    java: /usr/bin/java
    filters:
        cssrewrite: ~
        yui_css:
            jar: %kernel.root_dir%/java/yuicompressor-2.4.7.jar
        yui_js:
            jar: %kernel.root_dir%/java/yuicompressor-2.4.7.jar 
```

在`routing.yml`我有：

```
_assetic:
    resource: .
    type: assetic 
```

我见过这个问题[Symfony2 - Assetic - load images in CSS](https://stackoverflow.com/questions/7044631/symfony2-assetic-load-images-in-css)，但我不知道我是否以及如何同时使用`filter='cssrewrite'`，`filter='yui_css'`或者如何解决问题。

基本上，如果我可以停止 Symfony2 为我的 CSS 图像路径添加前缀`/web/`，问题就会得到解决。或者，有谁知道在 Symfony2 中解决这个问题的正确方法是什么？

**更新**：我注意到即使我放 url('something.png') 加载页面时 CSS 也不会再更新，所以我可能用命令行搞砸了一些东西，我也给出了命令比如`php app/console assetic:dump`——如何回到正常的修改CSS和重新加载页面的开发风格？

**UPDATE2**：我发现`php app/console assetic:dump --watch`当资产发生变化时会自动更新它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T14:14:32.160

为了在您的 CSS 文件中加载图像，路径必须是`"bundles/(bundle name)/images/(file name)"`

**更新**

确保你有

```
write_to: %kernel.root_dir%/../web 
```

在下 `assetic:`_`config.yml`

和

`background: url('/bundles/(bundle name)/images/prev.png')`在你的 CSS

然后运行

```
php app/console assets:install web 
```

和

```
php app/console assetic:dump web 
```

# ios - iOS - 收到内存警告

> ID：11312628
> 
> 赞同：0
> 
> 时间：2012-07-03T14:03:29.513
> 
> 标签：ios, avaudioplayer, mpmovieplayer, didreceivememorywarning, memory-warning

该应用程序播放捆绑包中的视频和音频。当我在我的 iPod Touch 上测试应用程序时，有时就在视频播放之前，它会记录消息。有时，当应用程序想要准备音频播放器（在另一个视图控制器中）时，它会记录消息。

但是我还没有崩溃！:D 我不确定如果它在其他打开多个应用程序的设备上运行是否会发生崩溃。那么，我应该担心这个吗？我应该在另一个线程中准备AudioPlayer 或moviePlayer 吗？还是忽略它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:05:54.543

即使你在其他线程上准备它也不能解决这个问题，你要做的就是在你收到内存警告时做好准备，以便对其采取行动并释放一些你不需要的内存

尝试释放一些内存，优化您的应用程序内存消耗，使用延迟加载技术等，但使用另一个线程绝对不是解决方案

# android - 用于菜单的 Android 库

> ID：11312630
> 
> 赞同：0
> 
> 时间：2012-07-03T14:03:34.067
> 
> 标签：android, android-side-navigation

我真的很喜欢 Android 应用程序 Spotify、YouTube、Google+ 等中的新菜单。我想在我的应用程序中实现它。是否有库或其他解决方案将其包含在 Android java 项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:57:07.750

这不是官方的，但侧面导航似乎是流行的术语：

> 侧边导航是一种[UI 模式](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)，它为用户提供应用程序最重要部分的快速快捷方式，而无需离开他们所在的屏幕。

![在此处输入图像描述](../Images/03970697c82dd0cc2438b770c875893e.png)

# c# - wf4 WorkflowApplication 中的持久性：SQL Server vs ORACLE DevArt

> ID：11312636
> 
> 赞同：0
> 
> 时间：2012-07-03T14:03:47.973
> 
> 标签：c#, .net-4.0, persistence, workflow-foundation-4, devart

我们有一个 24x7 的应用程序来处理数十个 WF4 实例。

我们使用 SQL Instance Store 持久化 OnIdle 成功实现了持久化和恢复策略，在受控关闭中等待该状态并在恢复中加载回。

我们需要迁移到 ORACLE，并且我们使用了 DevArt Instance Store，但我们在使用相同的代码时遇到了一些问题。

到目前为止，我们仍在坚持 OnIdle，但现在我们必须在受控关闭时卸载，以便能够在恢复中加载。

当我们想到可能出现的“不那么温和”的关闭时，我们就会感到恐惧。

如果无法达到受控关闭方法，没有卸载的持久化实例怎么办？如何恢复它们？有人遇到过同样的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:54:31.383

找到了，

可以使用 ORACLE Devart Instance Store 来完成。问题是 OracleInstanceStoreLogic 的 DevArt dotConnect 包中的一个错误，该错误将锁定到期时间推高至 2037 年，不允许再次加载实例。

代替

newLockExpiration := sysdate + p_lockTimeout / 24*60*60;

应该

newLockExpiration := sysdate + p_lockTimeout / (24*60*60);

我已经向 DevArt 人员报告了这个问题，以便在下一次更新中修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T08:18:16.313

我对“The Beat”的答案有一个重要的补充：缺少括号的错误仅在两个位置中得到修复！具体来说，脚本“OracleInstanceStoreLogic.sql”中有一个方法“ExtendLock”，它仍然有

newLockExpiration := sysdate + p_lockTimeout / 24*60*60;

（在撰写本文时，我们有 Devart 版本 7.8.287.0，并且错误仍然存​​在。）这肯定会导致我们的工作流程出现问题，在添加括号后就消失了。

我刚刚向 Devart 提交了一份错误报告。

# c - 如何获取 __LINE__ 报告的整个字符串

> ID：11312641
> 
> 赞同：1
> 
> 时间：2012-07-03T14:04:00.090
> 
> 标签：c, shell

是否可以通过**LINE**宏在线报告整个字符串。示例代码：

```
#include <stdio.h>

#define LOG(lvl) pLog(lvl, __LINE__, __FILE__)

pLog(const char *str, int line, const char *file)
{
    printf("Line [%u]: File [%s]", line, file);
}

int main ()
{
    LOG("Hello"
            "world");
    return 0;
} 
```

输出为：第 [13] 行：文件 [macro.c]

现在在一个大型代码库中，我想搜索此文件并打印报告行中存在的字符串“Hello world”（在本例中为 13）

我在想的一种方法是搜索这个文件，首先使用 gcc -E do grep for pLog 生成输出文件并保存它们的字符串，然后在实际代码文件中 grep for LOG 并保存行号与行号匹配结果然后进行索引匹配并打印字符串。

由于字符串可以分布在多行中（如代码中 Hello 位于一行，world 位于另一行），因此也需要注意这一点。

是否有任何其他最佳和快速的方法或 gcc 提供一些选项来将回行和文件转换为实际代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:32:19.803

[使用Clang](http://clang.llvm.org/)很容易做到这一点。以下命令将文件的抽象语法树 (AST) 转储`test.c`到文件`out`：

```
clang -cc1 -ast-dump test.c > out 
```

查看生成文件中的 AST，您可以轻松找到所需的信息：

```
(StringLiteral 0x1376cd8 <line:12:9, line:13:13> 'char [11]' lvalue "Helloworld"))) 
```

Clang 给出字符串的第一个标记的开始（行：12:9）、字符串的最后一个标记的开始（行：13:13）和完整的字符串（“Helloworld”）。

您可以解析 AST 转储或使用 Clang API 来获取相同的信息。如果这不是一次性任务，我会选择 API，因为 AST 转储格式将来更有可能发生变化。

当然，只有当您有理由不在 pLog 本身中打印字符串时，所有这些才有意义。

# c# - 如何绘制圆角不等边三角形

> ID：11312644
> 
> 赞同：0
> 
> 时间：2012-07-03T14:04:13.250
> 
> 标签：c#, graphics, rounded-corners

任何人都知道如何绘制带有圆角的任意不等边三角形？最好在c#中？

这是矩形的示例：[如何在特定范围内绘制具有可变宽度边框的圆角矩形](https://stackoverflow.com/questions/628261/how-to-draw-rounded-rectangle-with-variable-width-border-inside-of-specific-boun)

我想对三角形做同样的事情。

# android - 将文件上传到 asp.net 服务器的进度条

> ID：11312645
> 
> 赞同：2
> 
> 时间：2012-07-03T14:04:17.617
> 
> 标签：android, file-upload, android-asynctask, progress-bar

我制作了一个将视频上传到 asp.net 服务器的程序。然后我想通过添加进度条来开发我的应用程序。但是，添加进度条后，我无法将文件上传到服务器。（这是我调试后得到的结果！！！）你能帮我看看我的代码有什么问题吗？

```
package com.isoft.uploader2;

import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class Proje2Activity extends Activity
{
 @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button =(Button)findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                openGaleryVideo();
            }
        });

    }
/** Called when the activity is first created. */
public static final int SELECT_VIDEO=1;
public static final String TAG="UploadActivity";
String path="";

//Gallery'i aç
public void openGaleryVideo()
{
    Intent intent=new Intent();
    intent.setType("video/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Video"),SELECT_VIDEO);
}

//Dosyayı seç ve yükle
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK)
    {
        if (requestCode == SELECT_VIDEO) 
        {
            Uri videoUri = data.getData();
            path= getPath(videoUri);
            upload a = new upload();
            a.onPreExecute();
            a.doInBackground();
            a.onProgressUpdate();

        }
    }
}

//SD carddan yerini al
public String getPath(Uri uri)
{   
    String[] projection = { MediaStore.Video.Media.DATA};
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}
public class upload extends AsyncTask<Object, Integer, Void> 
{
     public ProgressDialog dialog;
     File file=new File(path);  
     String urlServer = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
     String filename=file.getName();
     int bytesRead, bytesAvailable, bufferSize;
     byte[] buffer;
     int maxBufferSize = 20*1024*1024;
    @Override
    public void onPreExecute() 
    {
         dialog = new ProgressDialog(Proje2Activity.this);
         dialog.setMessage("Uploading...");
         dialog.setIndeterminate(false);
         dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
         dialog.setProgress(0);
         dialog.show();
            //Burada işlemi yapmadan önce ilk olarak ne yaptırmak istiyorsak burada yaparız.
            //Örneğin burada dialog gösterip "onPostExecute()" metodunda dismiss edebiliriz.
    }

    @Override
    public Void doInBackground(Object... arg0) 
    {
        // TODO Auto-generated method stub
        try
        {
        FileInputStream fileInputStream = new FileInputStream(file);

        URL url = new URL(urlServer);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setFixedLengthStreamingMode((int) file.length());

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",  "multipart/form-data");
        connection.setRequestProperty("SD-FileName", filename);//This will be the file name
        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        while (bytesRead > 0)
        {   
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            publishProgress();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }//end of while statement
        fileInputStream.close();
        publishProgress(100); 
        outputStream.flush();
        outputStream.close();
        }//end of try body
        catch (Exception ex)
        {
            //ex.printStackTrace();
            Log.e("Error: ", ex.getMessage());
        }
        return null;
     }//end of doInBackground method
     @Override
     public void onProgressUpdate(Integer... values) 
     {
       // TODO Auto-generated method stub
       dialog.setProgress((int) ((file.length()-bytesRead)/100));
     }//end of onProgressUpdate method
}// end of asyncTask class 
}//end of main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:37:38.530

你必须调用上传任务

```
new Upload().execute(); 
```

并且您没有像以前那样调用 asynTask 来做正确的事

因此，您的代码如下所示

```
Upload a = new Upload();
a.execute 
```

代替

```
upload a = new upload();
            a.onPreExecute();
            a.doInBackground();
            a.onProgressUpdate(); 
```

如果您上传文件的代码是正确的，这将起作用

如果要更新进度条，请使用 Handler 类

```
Handler handler = new Handler(){
    @Override 
    public void handleMessage(int what){
        mProgress.setProgress(mProgressStatus);
     } 
```

如[ProgressBar 小部件中所述](http://developer.android.com/reference/android/widget/ProgressBar.html)

并在 doInBackground() 方法中调用方法 publishProgress() ，如此处所述[AsyncTask Docs](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:53:25.603

正如 Muhannad 所说，您的 onActivityResult 方法应如下所示：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
if (resultCode == RESULT_OK)
{
    if (requestCode == SELECT_VIDEO) 
    {
        Uri videoUri = data.getData();
        path= getPath(videoUri);
        upload a = new upload();
        a.execute();

    }
} 
```

}

**编辑：** 正如我的评论中所解释的。粗体的变化：

```
public class upload extends AsyncTask<Object, Integer, Void> {
 public ProgressDialog dialog;
 File file=new File(path);  
 String urlServer = "http://192.168.10.177/androidweb/default.aspx";
 String filename=file.getName();
 int bytesRead, bytesAvailable, bufferSize, **progress**;
 byte[] buffer;
 int maxBufferSize = 20*1024*1024;
@Override
public void onPreExecute() 
{
     dialog = new ProgressDialog(Proje2Activity.this);
     dialog.setMessage("Uploading...");
     dialog.setIndeterminate(false);
     dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
     dialog.setProgress(0);
     dialog.show();
        //Burada işlemi yapmadan önce ilk olarak ne yaptırmak istiyorsak burada yaparız.
        //Örneğin burada dialog gösterip "onPostExecute()" metodunda dismiss edebiliriz.
}

@Override
public Void doInBackground(Object... arg0) 
{
    // TODO Auto-generated method stub
    try
    {
    FileInputStream fileInputStream = new FileInputStream(file);

    URL url = new URL(urlServer);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setFixedLengthStreamingMode((int) file.length());

    // Allow Inputs & Outputs
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);

    // Enable POST method
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Content-Type",  "multipart/form-data");
    connection.setRequestProperty("SD-FileName", filename);//This will be the file name
    DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());
    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    // Read file
    **progress = 0;**
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    **progress += bytesRead;**
    while (bytesRead > 0)
    {   
        outputStream.write(buffer, 0, bufferSize);
        bytesAvailable = fileInputStream.available();
        publishProgress();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        **progress += bytesRead;**
    }//end of while statement
    fileInputStream.close();
    publishProgress(100); 
    outputStream.flush();
    outputStream.close();
    }//end of try body
    catch (Exception ex)
    {
        //ex.printStackTrace();
        Log.e("Error: ", ex.getMessage());
    }
    return null;
 }//end of doInBackground method
 @Override
 public void onProgressUpdate(Integer... values) 
 {
   // TODO Auto-generated method stub
   dialog.setProgress((int) ((file.length()-**progress**)/100));
 }//end of onProgressUpdate method
 }// end of asyncTask class 
 }//end of main 
```

# vb.net - 强制项目从当前目录加载 DLL

> ID：11312649
> 
> 赞同：1
> 
> 时间：2012-07-03T14:04:33.093
> 
> 标签：vb.net, dll, load, directory, project

我试图通过强制它加载和使用当前目录中的DLL而不是windows目录来制作一个适用于每个操作系统的程序，但它不起作用。我尝试启用“复制本地”并更改引用路径，但没有任何成功，程序尝试从 windows 目录加载 DLL。我的问题是：我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:18:02.163

DLL 的搜索顺序[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/ms682586.aspx)。它还包括有关如何修改搜索顺序以便首先搜索本地 bin 目录而不是 GAC 的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:59:24.083

该目录`%windir%\assembly`称为[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)。程序集不会在那里复制，而是通常使用`gacutil /i`安装包或通过安装包安装。

GAC 是一个合适的文件夹，用于存放许多其他库和未集中协调的构建版本中的应用程序引用的库。使用 GAC 可以让您拥有同一个库的多个版本，即使是单个应用程序也可能间接需要所有这些版本，并在系统上并排安装。典型的例子是 .NET 框架本身。

您构建的程序集可能不是那种。基本上是单个应用程序一部分的应用程序程序集和库不应该提交给 GAC，否则您可能会遇到麻烦。有多种可能的麻烦：

*   一个人意外或故意创建具有相同版本号的同一库的不同（不兼容）版本。
*   GAC 中的程序集引用了一个不在 GAC 中的程序集
*   一个应用程序将相同的程序集安装到 GAC 中，但另一个应用程序希望从其本地文件夹（应用程序二进制文件所在的位置）加载它。

加载程序集时，GAC 中的代码会获得首选项。要从 GAC 中删除程序集，请使用`gacutil /u`.

# javascript - 从另一个 Javascript 文件调用一个 Javascript 文件中的函数？

> ID：11312650
> 
> 赞同：7
> 
> 时间：2012-07-03T14:04:35.067
> 
> 标签：javascript, jquery, file, dynamic, external

我需要从另一个“.js”文件调用外部“.js”文件中的函数，而不引用标记中的外部文件`<head>`。

我知道可以将外部“.js”文件动态添加到允许访问该文件的文件中，我可以这样做......

```
var AppFile = "test/testApp_1.js"; 
var NewScript=document.createElement('script');
var headID = document.getElementsByTagName("head")[0]; 
NewScript.src = AppFile;
headID.appendChild(NewScript); 
```

然而...

这对我来说没用，因为外部文件需要是在...上运行启动程序的独立文件

```
$(document).ready(function()
{...} 
```

因此动态添加完整文件会产生不良影响。此外，我不能在`<head>`标签中预先引用外部文件，因为它需要是动态的。所以，这个外部文件`"test/testApp_1.js"`包含一个返回字符串变量的函数......

```
function setAppLogo(){

 var LogoFile = "test/TestApp_1_Logo.png";

 return LogoFile;
} 
```

我需要访问这个函数，或者我可以将字符串作为全局变量存储在外部文件中......任何一种方式都很好，我只需要访问值`LogoFile`而不加载整个外部文件。

这个已经让我难倒了几个小时，所以任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:47:54.667

您可能会受益于拥有某种`app.js`包含全局变量/值的文件，您希望在很多地方使用这些文件。您应该`.js`在每个页面上都包含此文件（如果您想变得聪明并提高性能，可以将其缩小/与其他 js 连接）。通常，这些全局变量应该附加到您创建的某些对象`var APPNAME = { };` 上，例如上面将在许多地方使用的变量/函数。

一旦你有了这个，你想要加载的外部“.js”文件，以及你当前所在的文件，都可以访问全局 APPNAME 变量及其所有属性/函数，并根据需要使用它们。这可能是使您的 javascript 更加模块化和可分离的更好方法。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:38:32.343

好的，感谢大家的所有输入，但我认为我正在尝试做的事情目前是不可能的，即在不加载该文件的情况下从另一个文件访问一个函数。但是，我找到了解决问题的方法。我现在查询我的服务器以获取可用应用程序的列表，然后我使用此列表在 UI 中动态构建应用程序。然后选择一个应用程序时，我可以调用该文件和其中的函数。它有点复杂，但它是动态的，具有良好的性能，并且可以正常工作。再次感谢您的头脑风暴！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T06:01:23.650

可以通过 XHR 加载整个脚本（例如[jQuery 中的 $.get](http://api.jquery.com/jQuery.get/)），然后解析它，也许使用正则表达式，以提取所需的部分：

```
$.get('pathtoscript.js', function(scriptBody) {
    var regex = /function\s+setUpLogo\(\)\s*\{[^}]+}/g;
    alert(scriptBody.match(regex)[0]); // supposed to output a function called
                                       // 'setUpLogo' from the script, if the 
                                       // function does not have {} blocks inside
}); 
```

然而，需要注意的是，这种方法极有可能引发维护障碍。正则表达式不是解析 JavaScript 代码的最佳工具；例如，上面的示例不会解析带有嵌套 {} 块的函数，这些块很可能存在于相关代码中。

可能建议找到问题的服务器端解决方案，例如在页面发送到浏览器之前添加必要的脚本路径或其部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:07:21.040

您想在使用 ajax 加载 jQuery 后加载文件，然后在成功的 ajax 函数中运行相关脚本。

参见 jQuery 的 getScript 函数：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

```
$(document).ready(function(){
 $.getScript("http://domain.com/ajax/test.js", function(data, textStatus, jqxhr) {
    console.log(data); //data returned
    console.log(textStatus); //success
    console.log(jqxhr.status); //200
    console.log('Load was performed.');
    //run your second script executable code here
 });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T21:20:54.870

我不确定这是一个好主意，但您可以创建一个 iframe 并在其“窗口”对象内评估文件，以避免大多数不良副作用（假设它不尝试访问其父级）。然后你可以通过 iframe 的 window 对象访问你想要的任何函数/变量。

例子：

```
function loadSomeJsInAFrame(url,cb) {
        jQuery.get(url,function(res) {
            iframe = jQuery('<iframe></iframe>').hide().appendTo(document.body);
            iframe[0].contentWindow.eval(res);
        if(cb) cb(iframe[0].contentWindow);
    },'text');
}

loadSomeJsInAFrame('test/testApp_1.js',function(frameWindow) {
    console.log(frameWindow.setAppLogo());
    jQuery(frameWindow.frameElement).remove();
}); 
```

这不能保证文件中的 sript 不会弄乱您的文档，但如果它来自受信任的来源，则不太可能。

此外，在您获得所需内容后，不要忘记删除您的 iframe。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-08T13:14:05.267

[在Web Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API)的帮助下，这可能是可能的。您将能够在一个孤立的环境中运行您想要注入的脚本，因此它不会弄乱您的当前页面。

正如你所说，它可能`setAppLogo`是全局的`"test/testApp_1.js"`，所以我将依赖这个声明。

在您的原始脚本中，您应该创建一个工作人员，它引用工作人员脚本文件 + 收听来自工作人员的消息：

```
var worker = new Worker('worker.js');
worker.onmessage = function (e) {
    // ....
}; 
```

然后，在 worker ( `worker.js`) 中，您可以使用允许在 worker 中加载外部脚本的特殊函数`importScripts`( [docs](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers#Importing_scripts_and_libraries) )，worker 还可以看到这些脚本的全局变量。worker 中还有一个功能`postMessage`可以将自定义消息发送回原始脚本，而原始脚本又会监听这些消息（`worker.onmessage`）。代码`worker.js`：

```
importScripts('test/testApp_1.js');

// "setAppLogo" is now available to worker as it is global in 'test/testApp_1.js'

// use Worker API to send message back to original script
postMessage(setAppLogo()); 
```

当它调用时，您将`setAppLogo`在侦听器中获得结果：

```
worker.onmessage = function (e) {
    console.log(e.data); // "test/TestApp_1_Logo.png"
}; 
```

这个例子是非常基础的，你应该阅读更多关于 Web Workers API 和可能的陷阱。

# c# - 为什么 P/Invoke 函数在 C# 中必须是静态的？

> ID：11312651
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:04:42.240
> 
> 标签：c#

看代码：

```
class VirtualMemoryManager
{
    [DllImport("kernel32.dll",EntryPoint="GetCurrentProcess")]
    internal static extern IntPtr GetCurrentProcessHandle();
} 
```

为什么“GetCurrentProcessHandle”必须“静态”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:06:45.540

> 这是 P/Invoke 方法的要求，因为 Windows API 中没有一致的实例概念。

来源：http: [//msdn.microsoft.com/en-us/magazine/cc164123.aspx](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:11:00.313

外部导入的函数本质上是静态的。通过不使它们成为静态，它们将不会获得任何东西。实例方法可以使用局部变量，这对于 dll 导入例程无论如何都是不可能的。

# android - Android、共享偏好和应用程序更新

> ID：11312653
> 
> 赞同：1
> 
> 时间：2012-07-03T14:04:46.120
> 
> 标签：android

我希望我的应用程序在重新安装应用程序时重置共享首选项

假设我有共享首选项 IsfirstLunch 属性..

现在应用程序已安装，但我想安装更新版本（无需先卸载现有版本）

重新安装后我希望 IsfirstLunch 被重置

有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:10:35.003

很简单：

使用您的共享偏好来存储应用程序的当前版本。

在每次启动应用程序时，将应用程序的当前版本与存储的首选项进行比较。

如果不同，则只需将 IsfirstLunch 设置为 true。

获取当前应用版本：

```
try {
        String pkg = mContext.getPackageName();
        mVersionNumber = mContext.getPackageManager().getPackageInfo(pkg, 0).versionName;
    } catch (NameNotFoundException e) {
        mVersionNumber = "?";
    } 
```

# java - 在 Java 中运行 UNIX Source 命令

> ID：11312656
> 
> 赞同：4
> 
> 时间：2012-07-03T14:04:51.207
> 
> 标签：java, unix, terminal

这是我关于 stackoverflow 的第一个问题，所以我会尽量保持简洁和相关。

我目前正在创建一个 Java 程序，它试图调用位于系统上的外部程序，但为了做到这一点，我需要调用一个 shell 脚本，该脚本设置到相关库的链接以确保系统已链接在外部程序可以执行之前，这些。

手头的问题是我无法通过 Java 调用 shell 脚本，我已经研究了高低，并且知道其他方法，例如使用 ProcessBuilder 类。不幸的是，我对尝试通过 Java 调用命令行语句的世界很陌生，所以我一直在寻找答案。

我正在使用的代码示例如下所示：

```
private void analyse_JButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                

// Get project path for copying of Fortran program to folder and execution

String projectPath =  Newproject_GUI.getProjectPath();

String sourcePath [] = {"/bin/sh ", "-c ","source ~/set_env_WRF_gnu.sh"} ;

Runtime fortranAnalyser = Runtime.getRuntime();

try {
        Process p = fortranAnalyser.exec("cp main.exe " + projectPath);
        Process k = fortranAnalyser.exec(sourcePath);

        BufferedReader is = new BufferedReader(new InputStreamReader(k.getInputStream()));
        String line;
        while ((line = is.readLine()) != null) {

            System.out.println(line); 
        } 

    } catch (IOException ex) {
        Logger.getLogger(Analyser_GUI.class.getName()).log(Level.SEVERE, null, ex);
      }

} 
```

进程 p 工作正常，并且在调用该方法时确实将 main.exe 复制到预期的目录。然而，进程 k 没有，这就是问题所在。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:12:49.963

问题是“source”是 BASH 的内部命令（您使用的是“sh”，但这只是简化模式下的 BASH）。所以你要做的是：

*   你生成新进程“sh”并在那里获取一些东西（我猜设置了一些变量）
*   该过程结束并且所有变量都丢失了
*   你产生了另一个进程，但变量已经消失了

我不确定您以后是否使用这些变量，但根据脚本名称，它可能正在设置一些。不要那样做。

顺便说一句，如果您只想在 bash 中执行脚本，则不需要 source 它。要获得它的副作用，只需执行它：

```
String sourcePath [] = {"/bin/sh ", "/home/XYZ/set_env_WRF_gnu.sh"} ; 
```

请注意，您不能使用 ~ 在这种情况下，请使用 Java 获取您的主目录。

# c# - OLEDB 读取 Excel 的性能

> ID：11312661
> 
> 赞同：5
> 
> 时间：2012-07-03T14:05:01.010
> 
> 标签：c#, performance, excel, oledb

在 i7-*3.4 GHz windows-7 64 位计算机上，以下代码需要 2500 毫秒才能读取 25000 行和 5 列的 Excel 表。每个单元格大约包含一个 10 个字符的字符串。正常吗？我怎样才能更快地阅读它？

```
 Stopwatch sw1 = Stopwatch.StartNew();
 var connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0}; " +
                                             "Extended Properties=Excel 12.0;", filename);

 var adapter = new OleDbDataAdapter("SELECT * FROM [roots$]", connectionString);
 var ds = new DataSet();
 adapter.Fill(ds, "roots");
 sw1.Stop(); Console.WriteLine("Time taken for excel roots: {0} ms", sw1.Elapsed.TotalMilliseconds); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:33:51.247

我希望将我的发现作为答案提出，因为行为始终是一致的。

我已经复制了您的代码并将其放入按钮单击事件中，只是进行了一些更改以确保为进行的每个测试处理适配器和连接。

```
// test.xls contains 26664 rows by 5 columns. Average 10 char for column, file size is 2448kb
// OS Windows 7 Ultimate 64 bit. CPU Intel Core2 Quad Q9550 2.83ghz 
// 8gb ram and disk C is an 256gb SSD cruzer

    private void button1_Click(object sender, EventArgs e)
    {

        string filename = "c:\\tmp\\test.xls";
        Stopwatch sw1 = Stopwatch.StartNew(); 
        var connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0}; " + 
                                              "Extended Properties=Excel 12.0", filename);

        using(var adapter = new OleDbDataAdapter("SELECT * FROM [roots$]", connectionString))
        {
            var ds = new DataSet();
            adapter.Fill(ds, "roots");
            sw1.Stop();
            Console.WriteLine("Time taken for excel roots: {0} ms", sw1.Elapsed.TotalMilliseconds);
        }
    } 
```

所以，这基本上是你的代码。此代码在 500 毫秒内执行。但是.... **如果我在 Excel 2010 中打开文件 test.xls，执行时间会跳到 8000 毫秒。**

我也试过这个代码变体，但最终结果是一样的

```
 private void button1_Click(object sender, EventArgs e)
    {
        string filename = "c:\\tmp\\test.xls";
        Stopwatch sw1 = Stopwatch.StartNew(); 
        var connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0}; " + 
                                              "Extended Properties=Excel 12.0", filename);
        using(OleDbConnection cn = new OleDbConnection(connectionString))
        {
            cn.Open();
            using(var adapter = new OleDbDataAdapter("SELECT * FROM [roots$]", cn))
            {
                var ds = new DataSet();
                adapter.Fill(ds, "roots");
                sw1.Stop();
                Console.WriteLine("Time taken for excel roots: {0} ms", sw1.Elapsed.TotalMilliseconds);
            }
        }
    } 
```

而且，不，它不是 OleDbConnection 的 Open()，始终是 adapter.Fill()

# javascript - 用于电子邮件匹配的正则表达式

> ID：11312662
> 
> 赞同：3
> 
> 时间：2012-07-03T14:05:08.037
> 
> 标签：javascript, regex

我正在使用这个正则表达式来匹配字符串中的电子邮件地址。

这里一切正常：[http](http://regexr.com?31e5a) : //regexr.com?31e5a 使用这个正则表达式：

```
([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4}) 
```

但是当我尝试将它与 javascript 一起使用时，我只得到第一个电子邮件地址，而不是全部。

这是我的代码：

```
var emailsString = 'aaaaaaa@bbbb.com xxxxxxx cccccc@dddd.com';
var emails = emailsString.match(/([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})/)[0]; 
```

广告在这里，我只收到第一封电子邮件。

如果你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T14:08:11.383

您需要添加一个[“g”修饰符](http://www.w3schools.com/jsref/jsref_regexp_g.asp)：

```
var emailsString = 'aaaaaaa@bbbb.com xxxxxxx cccccc@dddd.com';## Heading ##
var emails = emailsString.match(/([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})/g) 
```

此外，正如本文其他地方所述，您的正则表达式与所有有效电子邮件不匹配。使用正则表达式匹配有效电子邮件实际上是一个相当困难的问题，但首先，TLD 组件可能超过 4 个字符，因此您应该相应地进行调整。

我的建议是将此处提到的其他正则表达式与 /g 修饰符结合使用以获取所有匹配项。

> g 修饰符用于执行全局匹配（查找所有匹配而不是在第一次匹配后停止）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T14:09:19.120

[这是根据RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.4.1)（根据[此来源](http://www.regular-expressions.info/email.html)）的电子邮件的正确正则表达式：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

除此之外，删除`[0]`并添加[`/g`修饰符](https://stackoverflow.com/a/11312709/851498)，您将获得数组中的完整列表。

如果要将所有数组作为单个字符串获取，请使用以下命令：

```
var str = arr.join(','); // or whatever delimiter you want to join with

// For example:
['aaa@aaa.com', 'bbb@bbb.net'].join(',') === 'aaa@aaa.com,bbb@bbb.net'; 
```

另外，作为一个旁注，在一个[著名的 Perl 模块](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)中，这里是用于*真正*验证 From 和 To 字段中的电子邮件地址的正则表达式（你不感兴趣，但我宁愿在这里有参考，所以我复制粘贴):

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:14:38.673

您的直接问题（根据您自己的评论）是您在正则表达式中使用捕获组，您应该使用非捕获组，或者更好，根本没有：

```
emailsString = 'aaaaaaa@bbbb.com xxxxxxx cccccc@dddd.com';
emails = emailsString.match(/[\w-\.]+@[\w]+\.+[a-zA-Z]{2,4}/g);
// emails = ["aaaaaaa@bbbb.com", "cccccc@dddd.com"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T14:15:11.020

您的模式很接近，您只需要使用全局标志而不是捕获每个电子邮件帐户的内部部分。我希望它有所帮助。

```
var re = /(?:[\w-\.]+)@(?:(?:[\w]+\.)+)(?:[a-zA-Z]{2,4})/g;
var emailsString = 'aaaaaaa@bbbb.com xxxxxxx cccccc@dddd.com';
var emails = emailsString.match(re); // ["aaaaaaa@bbbb.com", "cccccc@dddd.com"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T14:08:22.970

您可以简单地将字符串拆分为单个地址（在空格处），然后应用您的正则表达式。性能应该不会相差太大。

# java - Protobuf 和 Protostuff 之间的兼容性

> ID：11312664
> 
> 赞同：2
> 
> 时间：2012-07-03T14:05:12.813
> 
> 标签：java, compatibility, protocol-buffers, protostuff

Protostuff 代码生成器生成的类是否与 Protobuf 创建的类兼容？

我试图（反）序列化一些简单的消息并得到几个例外：

**原始文件 (WrapperClass.proto)**

```
package tutorial;
option java_package = "com.example.tutorial";
message ProjectId {
    required int32 id = 1;
}
message UserId {
    required ProjectId project = 1;
    required int32 projectUserId = 2;
}
message ChannelId {
    required ProjectId project = 1;
    required string name = 2;
} 
```

**Protostuff 到 Protobuf 测试（示例）**

```
ProjectId projectId = new ProjectId(1);
byte[] projectarray = ProtostuffIOUtil.toByteArray(projectId, ProjectId.getSchema(), buffer);
com.example.tutorial.WrapperClass.ProjectId returnBufProject = com.example.tutorial.WrapperClass.ProjectId.parseFrom(projectarray); 
```

**问题：**

一切都适用于 ProjectId，但对于 UserId 和 ChannelId（一切都更复杂一些），我得到：

```
com.google.protobuf.InvalidProtocolBufferException: Message missing required fields: project
    at com.google.protobuf.UninitializedMessageException.asInvalidProtocolBufferException(UninitializedMessageException.java:81)
    at com.example.tutorial.WrapperClass$ChannelId$Builder.buildParsed(Test.java:1278)
    at com.example.tutorial.WrapperClass$ChannelId$Builder.access$17(Test.java:1273)
    at com.example.tutorial.WrapperClass$ChannelId.parseFrom(Test.java:1142)
    ... 
```

反之亦然：

**Protobuf 到 Protostuff 测试（示例）**

```
com.example.tutorial.WrapperClass.ProjectId projectId2 = com.example.tutorial.WrapperClass.ProjectId.newBuilder().setId(1).build();
byte[] project2array = projectId2.toByteArray();
ProjectId returnStufProject = new ProjectId();
ProtostuffIOUtil.mergeFrom(project2array, returnStufProject, ProjectId.getSchema()); 
```

**问题**

同样，对于 ProjectId 以外的所有内容，都有一个例外：

```
java.lang.RuntimeException: Reading from a byte array threw an IOException (should never happen).
    at com.dyuproject.protostuff.IOUtil.mergeFrom(IOUtil.java:53)
    at com.dyuproject.protostuff.ProtostuffIOUtil.mergeFrom(ProtostuffIOUtil.java:96)
    at JacksonTest.main(JacksonTest.java:92)
Caused by: com.dyuproject.protostuff.ProtobufException: Protocol message contained an invalid tag (zero).
    at com.dyuproject.protostuff.ProtobufException.invalidTag(ProtobufException.java:98)
    at com.dyuproject.protostuff.ByteArrayInput.readFieldNumber(ByteArrayInput.java:220)
    at com.example.tutorial.ProjectId$1.mergeFrom(ProjectId.java:115)
    at com.example.tutorial.ProjectId$1.mergeFrom(ProjectId.java:1)
    at com.dyuproject.protostuff.ByteArrayInput.mergeObjectEncodedAsGroup(ByteArrayInput.java:390)
    at com.dyuproject.protostuff.ByteArrayInput.mergeObject(ByteArrayInput.java:362)
    at com.example.tutorial.UserId$1.mergeFrom(UserId.java:138)
    at com.example.tutorial.UserId$1.mergeFrom(UserId.java:1)
    at com.dyuproject.protostuff.IOUtil.mergeFrom(IOUtil.java:43)
    ... 2 more 
```

我是在尝试一些不可能的事情，还是我只是做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:54:43.957

`ProtostuffIOUtil`问题很简单：我不需要使用（反）序列化我的消息，而是使用`ProtobufIOUtil`

# php - php生成文件树

> ID：11312665
> 
> 赞同：0
> 
> 时间：2012-07-03T14:05:13.720
> 
> 标签：php, javascript, jquery, ajax

我发现 jquery 可以根据 web 服务器中现有的文件夹和文件生成文件树结构：-

1.  [http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/#demo](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/#demo)
2.  [http://www.mekya.com/blog/lang/eng/2010/03/demo-of-editable-jquery-tree-with-php-codes-duzenlenebilir-jquery-agac-yapisinin-demosu/](http://www.mekya.com/blog/lang/eng/2010/03/demo-of-editable-jquery-tree-with-php-codes-duzenlenebilir-jquery-agac-yapisinin-demosu/)

事实上，他们太先进了。我只需要创建一些文件夹制作和文件上传功能，并在数据库中标记它们的相关性，并将它们呈现在文件树中，如图表。有适合我的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:14:49.893

我写了一个小类来表示 PHP 中的树结构。

[https://github.com/phunkei/php_mysql_tree](https://github.com/phunkei/php_mysql_tree)

可能您可以根据需要进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:10:39.187

您可以使用 PHP 和 mkdir 函数创建一个文件夹。

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

有关上传文件的信息可在 $_FILES 全局...

[http://uk.php.net/manual/en/reserved.variables.files.php](http://uk.php.net/manual/en/reserved.variables.files.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:11:05.680

查看 PHP 函数[MKDir](http://php.net/manual/en/function.mkdir.php)，当您上传文件时，要求用户创建一个新文件夹或使用现有文件夹。确认文件夹已创建或存在后，您可以通过单独的方法处理上传过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:18:49.913

您也许可以使用`RecursiveTreeIterator`来遍历文件并将它们呈现在 ascii 树中。

见：[http ://www.php.net/manual/en/class.recursivetreeiterator.php](http://www.php.net/manual/en/class.recursivetreeiterator.php)

# c# - SQL 中的 OpenID 2 和 openidselector 存储

> ID：11312667
> 
> 赞同：0
> 
> 时间：2012-07-03T14:05:15.993
> 
> 标签：c#, openid, dotnetopenauth, openid-selector

我正在实现 OpenID 2（和/或 OAuth 2）并且还在我的 Web 应用程序上使用 openidselector。我应该在我的 SQL 数据库中存储什么，以便我可以在用户登录时将他们与我的数据进行匹配？例如，当用户使用 Google、Twitter、OpenId 或 Facebook 登录时，我应该存储哪些密钥，以便从数据库中查询其他信息？我应该使用什么作为会员 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:16:07.087

唯一用户信息因您使用的协议而异。对于 OpenID（Google 也使用），成员 ID 可`IAuthenticationResponse.ClaimedIdentifier`在 DotNetOpenAuth 的属性中找到。对于不是为身份验证而设计但有时会被滥用的 OAuth（Twitter 和 Facebook），没有用户身份标准，因此您必须阅读他们的服务文档以确定他们的 OAuth 响应的哪一部分包括他们的成员ID 并存储它。

存储 OpenID 声明标识符和各种 OAuth 服务的用户名的用户表可能很难正确处理。当心。

# iphone - 挂钩到 C 函数

> ID：11312668
> 
> 赞同：0
> 
> 时间：2012-07-03T14:05:21.710
> 
> 标签：iphone, ios, hook, core-telephony

我想知道如何挂钩到 dylib 中的函数，即 C 函数。我的目标是连接到 CoreTelephony 中的函数 CTRegistrationSetCellularDataIsEnabled。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:14:02.380

如果您希望挂钩一个 dylib 函数，您将需要访问 MobileSubtrate，就像这样（从[这里](http://iphonedevwiki.net/index.php/MobileSubstrate)挂钩一个名为 CFShow() 的函数）：

```
 static void (*original_CFShow)(CFTypeRef obj);  // a function pointer to store the original CFShow().
 void replaced_CFShow(CFTypeRef obj) {         
  // our replacement of CFShow().
  printf("Calling original CFShow(%p)...", obj);
  original_CFShow(obj);                         // calls the original CFShow.
  printf(" done.\n");
}
// hook CFShow to our own implementation.
MSHookFunction(CFShow, replaced_CFShow, &original_CFShow);
// From now on any call to CFShow will pass through replaced_CFShow first.
CFShow(CFSTR("test")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:09:00.347

您将需要使用[类转储](http://cocoadev.com/wiki/ClassDump) 从您需要使用的类中获取标头，然后调用此函数

# redirect - Drupal 7 系统通过规则模块重定向

> ID：11312672
> 
> 赞同：0
> 
> 时间：2012-07-03T14:05:52.410
> 
> 标签：redirect, drupal-7

我希望有人能够准确地阐明 Drupal 7 的规则模块在执行系统重定向时的作用。我创建了一个规则（通过 Drupal 7 中的规则模块），它在访问特定内容时执行重定向。该规则似乎没有生成 apache 重定向，并且规则模块没有指定它正在执行的重定向类型（301、302 等）。归根结底，我担心的是在搜索引擎的伪装方面遇到麻烦。

预先感谢您提供的任何澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:34:42.540

它将使用[drupal_goto()进行 302 重定向](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_goto/7)

> 将用户发送到不同的 Drupal 页面。这会发出现场 HTTP 重定向。该函数确保重定向的 URL 格式正确。

规则模块在 rules_page_rebuild() 中调用 drupal_goto [()](http://drupalcontrib.org/api/drupal/contributions!rules!rules.module/function/rules_page_build/7)。

# cassandra - 超时卡桑德拉赫克托

> ID：11312677
> 
> 赞同：2
> 
> 时间：2012-07-03T14:06:15.277
> 
> 标签：cassandra, hector

我已经开始使用 cassandra。因此，我已将 cassandra (1.1.1) 下载到我的 Windows 电脑并启动它。一切正常。因此，我开始重新实现一个旧应用程序（在 java 中使用 hector 1.1），它为 4 个表导入了大约 200.000.000，这些表应该插入到 4 个列族中。导入大约 2.000.000 条记录后，我得到一个超时异常，并且 cassandra 没有响应请求：

```
2012-07-03 15:35:43,299 WARN  - Could not fullfill request on this host CassandraClient<localhost:9160-16>
2012-07-03 15:35:43,300 WARN  - Exception: me.prettyprint.hector.api.exceptions.HTimedOutException: TimedOutException()
....
Caused by: TimedOutException()
at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:20269)
at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:922)
at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:908)
at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:246)
at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:243)
at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:103)
at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:258) 
```

日志文件中的最后一个条目是：

```
INFO 15:35:31,678 Writing Memtable-cf2@678837311(7447722/53551072 serialized/live bytes, 262236 ops)
INFO 15:35:32,810 Completed flushing \var\lib\cassandra\data\keySpaceName\cf2\keySpaceName-cf2-hd-205-Data.db (3292685 bytes) for commitlog position ReplayPosition(segmentId=109596147695328, position=131717208)
INFO 15:35:33,282 Compacted to [\var\lib\cassandra\data\keySpaceName\cf3\keySpaceName-cf3-hd-29-Data.db,].  33.992.615 to 30.224.481 (~88% of original) bytes for 282.032 keys at 1,378099MB/s.  Time: 20.916ms.
INFO 15:35:33,286 Compacting [SSTableReader(path='\var\lib\cassandra\data\keySpaceName\cf4\keySpaceName-cf4-hd-8-Data.db'), SSTableReader(path='\var\lib\cassandra\data\keySpaceName\cf4\keySpaceName-cf4-hd-6-Data.db'), SSTableReader(path='\var\lib\cassandra\data\keySpaceName\cf4\keySpaceName-cf4-hd-7-Data.db'), SSTableReader(path='\var\lib\cassandra\data\keySpaceName\cf4\keySpaceName-cf4-hd-5-Data.db')]
INFO 15:35:34,871 Compacted to [\var\lib\cassandra\data\keySpaceName\cf4\keySpaceName-cf4-hd-9-Data.db,].  4.249.270 to 2.471.543 (~58% of original) bytes for 30.270 keys at 1,489916MB/s.  Time: 1.582ms.
INFO 15:35:41,858 Compacted to [\var\lib\cassandra\data\keySpaceName\cf2\keySpaceName-cf2-hd-204-Data.db,].  48.868.818 to 24.033.164 (~49% of original) bytes for 135.367 keys at 2,019011MB/s.  Time: 11.352ms. 
```

我创建了 4 个列族，如下所示：

```
ColumnFamilyDefinition cf1 = HFactory.createColumnFamilyDefinition(
“keyspacename”,
“cf1”,
ComparatorType.ASCIITYPE); 
```

列族具有以下列计数：

1.  16列
2.  14列
3.  7 科尔门
4.  5列

键空间是使用复制因子 1 和默认策略（简单）创建的，我使用“Mutator#AddInsertion”插入记录（行）

有什么建议可以避免这个例外吗？

问候西医

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:42:54.903

这个例外基本上是 Cassandra 说它在突变方面已经远远落后，以至于它不会在它们超时之前完成你的请求。假设您的 PC 不是野兽，您可能应该限制您的请求。我建议在捕获该异常后睡一会儿，然后重试；不小心将同一行写入两次并没有什么坏处，而且 Cassandra 应该很快就能赶上 write。

如果您在生产环境中，我会更仔细地研究导致节点性能不佳的其他原因。

# ruby-on-rails - Rails 拒绝字段

> ID：11312678
> 
> 赞同：0
> 
> 时间：2012-07-03T14:06:16.000
> 
> 标签：ruby-on-rails, activerecord, attributes

我试图为嵌套属性实现相同的目标，但对于第一级属性。如果 Proc 评估为真，我想拒绝/忽略/跳过某些字段。在没有定义 before_save 钩子的情况下是否有这样做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:27:55.173

你的意思是[验证？](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#validation-helpers](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validation-helpers)

如果您想`nil`在保存之前将某些字段设置为，最好的方法是使用 a`before_save`或`before_create`。

# android - 如何为两个不同颜色对象的重叠区域设置组合颜色？

> ID：11312680
> 
> 赞同：26
> 
> 时间：2012-07-03T14:06:25.897
> 
> 标签：android, drawing

我正在使用两种不同的颜色创建不同的自定义视图。根据我的应用程序功能，用户将在屏幕上拖动这些对象，拖动对象时会相互重叠。我想区分重叠区域，如何设置重叠区域的组合颜色。看下图。在这里，我使用画布来创建那些自定义视图，两个圆圈是两个不同的视图。

![在此处输入图像描述](../Images/73971dc4aee1058207f3e5c4d1a9eeae.png)

**编辑：** 如果我使用 opacity 128 我能够看到背景颜色，但我想要重叠对象颜色的组合颜色。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T04:52:58.233

您正在寻找的颜色混合有时称为**直观颜色混合**或[RYB](http://en.wikipedia.org/wiki/RYB_color_model)颜色系统：

**红豆**：

![在此处输入图像描述](../Images/8e5eae428a7c752cf2555b8c6abcb5f1.png) [[[抄送许可证](http://commons.wikimedia.org/wiki/File:Color_mixture.gif)]]

Nathan Gossett 和 Baoquan Chen引用的[这篇](http://threekings.tk/mirror/ryb_TR.pdf)论文中关于直观颜色混合算法的引述总结了直观颜色系统的工作原理：

> “在这个模型中，红色、黄色和蓝色用作纯原色。红色和黄色混合形成橙色，黄色和蓝色混合形成绿色，蓝色和红色混合形成紫色 [...]。这些是未经训练的观众期望使用儿童颜料获得的颜色 [...]。此外，许多人并不认为白色是所有颜色的混合，而是认为没有颜色（空白画布）。更常见的假设将多种颜色混合在一起会产生浑浊的深棕色。”

RYB 没有在 Android 的混合模式中实现，也不能真正通过混合 alpha/不同的混合模式来模拟。

大多数计算机图形应用程序都使用**RGB**或**CMYK**颜色空间：

**三色卡**：

![在此处输入图像描述](../Images/b392d30ca0900eb7d7de7aef0a92b3d5.png)[[[抄送许可证](http://www.worqx.com/color/color_systems.htm)]]

CMY 基于减色法。减色混合意味着，从白色开始，随着我们添加颜色，结果变得更暗。CMYK 用于混合用于在 Photoshop 和 Illustrator 中打印的图像中的颜色。

**RGB**：

![在此处输入图像描述](../Images/a8738bb6b1f391dc0de181c5ecb1d038.png) [[[抄送许可证](http://www.worqx.com/color/color_systems.htm)]]

RGB 基于加色。计算机屏幕上的颜色是使用加色法用光创建的。加色混合从黑色开始，随着添加更多颜色，结果变得更亮并以白色结束。

[该](http://www.worqx.com/color/color_systems.htm)站点更详细地讨论了 CMYK 和 RGB。

在 RGB 和 CMYK 中，混合蓝色和黄色都不会产生绿色，或者一般来说，直观的颜色混合。在 Android 上实现一个 RYB 颜色系统将是相当复杂的。上面引用的 Nathan Gossett 和 Baoquan Chen 的论文在论文的最后提出了一个用 C 语言实现的算法的解决方案。该算法可以在 Android 上的自定义混合中实现。[`Drawable.setColorFilter()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/graphics/drawable/Drawable.java#Drawable.setColorFilter%28int,android.graphics.PorterDuff.Mode%29)使用[`PorterDuffColorfilter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/graphics/PorterDuffColorFilter.java#PorterDuffColorFilter)which extends [`ColorFilter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/graphics/ColorFilter.java#ColorFilter)。[此](https://stackoverflow.com/questions/4372992/creating-a-custom-subclass-of-colorfilter)[`ColorFilter`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/graphics/ColorFilter.java)SO 问题中讨论的子类化必须使用 NDK 在本机代码中完成。

**CMYK 颜色混合解决方法**

如果您有兴趣使用 CMYK 颜色混合作为解决方法，我在下面提供了一个基本示例，说明如何完成。在此示例中，将混合青色圆圈和黄色圆圈以产生绿色相交。

从在 Adob​​e Illustrator 中创建的这些 .png 图像文件开始：

![在此处输入图像描述](../Images/bd1fcd3df2a3b3c2ccc63d83fdaa91f0.png)

![在此处输入图像描述](../Images/c0149ee9f9ebb8f8dd2834cfd17bce3a.png)

十六进制颜色值为 0x00ffff（青色）和 0xffff00（黄色）。

将它们添加到名称为 cyancircle.png 和 yellowcircle.png 的可绘制文件夹中。

如下配置您的 main.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="#ffffff"
    android:padding="30dp">

<ImageView
    android:id="@+id/bluecircle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/cyancircle">
</ImageView>

<ImageView
    android:id="@+id/yellowcircle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/yellowcircle" 
    android:layout_marginTop="30dp">
</ImageView>     
</RelativeLayout> 
```

创建您的活动：

```
import android.app.Activity;
import android.graphics.PorterDuff;
import android.os.Bundle;
import android.widget.ImageView;

public class PorterDuffTestActivity extends Activity {
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ImageView yellowCircle = (ImageView)findViewById(R.id.yellowcircle);

        yellowCircle.getDrawable().setColorFilter(0x88ffff00, PorterDuff.Mode.MULTIPLY);
    }
} 
```

输出：

![在此处输入图像描述](../Images/d2c8a558d6dcfaf9e7d0f51443abd773.png)

此方法的限制是顶部形状的 alpha 必须设置为 50%（“0x88ffff00”中的“88”）。对于黄色，这可以很好地工作，但对于其他颜色，alpha 效果可能无法接受（颜色可能看起来是另一种颜色，例如红色变成粉红色，白色背景上的 alpha 值较低）。您最终可以接受哪种混合模式取决于您要使用的颜色集，并且需要进行一些实验。另请注意，背景颜色可能会影响混合模式下圆圈的颜色。在此示例中，背景设置为白色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T09:51:54.560

我为 6 个对象做了另一个[示例](http://dl.dropbox.com/u/7717254/MainActivity.java)。

![在此处输入图像描述](../Images/38d17766a94084dee7c639d1aeca0590.png)

关键点：

1.  对象视图不会覆盖 onDraw 方法，背景也将设置为透明

    设置背景颜色（颜色。透明）；

2.  但是，onDraw 方法将被重命名为 onDrawEx 将从 Overlay View 中调用。

    公共无效 onDrawEx（帆布画布）{

3.  覆盖视图将传递一个自定义画布来绘制。在传递到对象视图之前，它会进行必要的翻译。

    ```
     mOverlayView = new View(this){
        @Override
        protected void onDraw(Canvas canvas) {
            Bitmap bitmap = Bitmap.createBitmap(getWidth(), getHeight(), Config.ARGB_8888);
            Canvas canvasBitmap = new Canvas(bitmap);
            ViewGroup viewGroup = (ViewGroup)getParent();
            for(int i = 0 ; i < viewGroup.getChildCount()-1;i++){
                ObjectView objectView = (ObjectView) viewGroup.getChildAt(i);
                canvasBitmap.save();
                canvasBitmap.translate(objectView.getTranslationX(), objectView.getTranslationY());
                objectView.onDrawEx(canvasBitmap);
                canvasBitmap.restore();
            }
            canvas.drawBitmap(bitmap, 0, 0, new Paint());
        }
    }; 
    ```

4.  使用 mPaint.setXfermode(new PorterDuffXfermode(Mode.ADD)); 添加颜色。但是所有对象都应该使用像 0xFF000030,0xFF0000C0,0xFF003000,0xFF00C000,0xFF300000,0xC00000 这样的颜色，然后只有所有可能的重叠我们才能得到不同的颜色。这取决于您的最大对象数。

    ```
     int k = 0 ;
    for(int i = 0 ; i < 2;i++,k++){
        int color = 0xFF000000|(0x000030<<i*2);
        frameLayout.addView(new ObjectView(this,color,k*50,k*50,k), new FrameLayout.LayoutParams(50, 50));
    }
    for(int i = 0 ; i < 2;i++,k++){
        int color = 0xFF000000|(0x003000<<i*2);
        frameLayout.addView(new ObjectView(this,color,k*50,k*50,k), new FrameLayout.LayoutParams(50, 50));
    }
    for(int i = 0 ; i < 2;i++,k++){
        int color = 0xFF000000|(0x300000<<i*2);
        frameLayout.addView(new ObjectView(this,color,k*50,k*50,k), new FrameLayout.LayoutParams(50, 50));
    } 
    ```

这里我已经[修改](http://dl.dropbox.com/u/7717254/MainActivity08.java)为支持版本 8

利用

```
mPaint.setXfermode(new PixelXorXfermode(0x00000000)); 
```

为了

```
mPaint.setXfermode(new PorterDuffXfermode(Mode.ADD)); 
```

我使用布局参数进行翻译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T15:02:54.977

我能想到的最简单的解决方案是通过在代码或 xml 中将每个不透明度设置为 0.5 来简单地使用 alpha 通道。然后当颜色重叠时，颜色应该相互淡入。不过，这确实意味着非重叠部分的颜色会有点褪色，并且取决于形状背后的背景，让它们完全透明可能看起来不太好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T07:31:05.697

我创建了一个带有两个视图 [DemoDrawShapeActivity](http://dl.dropbox.com/u/7717254/DemoDrawShapeActivity.java)的示例 Activity，其中在 view2 中我使用 canvas.clipPath 和 canvas.translate

为此，我设置了最低 sdk 版本 4

![在此处输入图像描述](../Images/dc968086928b99b1879bfdca8a3a7789.png)

```
protected void onDraw(Canvas canvas) {
    Paint paint = new Paint();
    paint.setColor(Color.RED);
    path2.addCircle(getWidth()/2, getHeight()/2, getWidth()/2, Direction.CCW);
    canvas.drawPath(path2, paint);
    canvas.clipPath(path2);
    canvas.save();
    canvas.translate(-getTranslationX()+view1.getTranslationX(), -getTranslationY()+view1.getTranslationY());

    paint.setColor(Color.BLUE|Color.RED);
    canvas.drawPath(path1, paint);
    canvas.restore();

} 
```

您可以编辑 paint.setColor(Color.BLUE|Color.RED); 根据您的逻辑获得必要的颜色。

我正在使用 setTranslationX setTranslationY 来移动视图。

```
 public boolean onTouchEvent(MotionEvent event) {
                switch(event.getActionMasked()){
                case MotionEvent.ACTION_UP:
                    touched[0]=touched[1]=false;
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_MOVE:
                    if(touched[1]){
                        view2.setTranslationX(event.getX()-view2.getWidth()/2);
                        view2.setTranslationY(event.getY()-view2.getHeight()/2);
                    }else if(touched[0]){
                        view1.setTranslationX(event.getX()-view1.getWidth()/2);
                        view1.setTranslationY(event.getY()-view1.getHeight()/2);
                        view2.invalidate();
                    }
                }
                return true;
            } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T15:48:11.473

我认为您可能希望以混合模式进行绘制。Android 会让你这样做，只要看看这个第一个链接。 [Android Canvas 中的复合操作](https://stackoverflow.com/questions/2552270/composite-operations-in-android-canvas)

以下是所有合成选项 [http://developer.android.com/reference/android/graphics/PorterDuffXfermode.html](http://developer.android.com/reference/android/graphics/PorterDuffXfermode.html)

以及来自 Mozilla 的解释 [https://developer.mozilla.org/en/Canvas_tutorial/Compositing](https://developer.mozilla.org/en/Canvas_tutorial/Compositing)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-11T07:47:34.330

您可以从中获得帮助-

[http://www.learnopengles.com/android-lesson-five-an-introduction-to-blending/](http://www.learnopengles.com/android-lesson-five-an-introduction-to-blending/)

和

www.pushing-pixels.org/category/android/page/6

# java - 为什么在创建JPanel 类对象时会自动调用paintComponent 方法？

> ID：11312681
> 
> 赞同：1
> 
> 时间：2012-07-03T14:06:27.420
> 
> 标签：java, swing, jpanel, repaint, paintcomponent

这是关于的java代码`JPanel`：

```
class Battle_field extends JPanel{
    public List<Image_Obj> pics_to_be_drawn;    

    @Override   
    public void paintComponent(Graphics g){     
            super.paintComponent(g);                 
            g.drawImage(pics_to_be_drawn.get(0).Get_the_buf_img() , 41, 41, 59, 59, Color.black, null);
    }       
} 
```

当我设置 GUI 时：

```
added_panel= new Battle_field();
added_panel.setBorder(new LineBorder(SystemColor.activeCaption, 3));
added_panel.setBounds(27, 10, 397, 630);
added_panel.setBackground(Color.white);
this.getContentPane().add(added_panel); 
```

我发现`Battle_field()`上面创建的对象会`paintComponent`自动调用。

> 但是在这里，我还没有初始化变量**“pics_to_be_drawn”**，所以如果调用它，会导致编译器错误。**这种设计是不可避免的吗？**
> 当你这样做时，有必要发生吗？我非常想知道这一点，当然还有解决方案。

ps：根据官方文档，只有我调用`repaint()`才会调用`paintComponent()`。所以我可以在`paintComponent`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:08:45.700

意识到您无法控制何时或是否`paint(...)`调用 or `paintComponent(...)`，这`repaint()`只会建议重绘管理器应该绘制组件，但这并不总是会发生，一旦组件被*渲染*就会发生绘制，并且然后接受这个并让你的代码解决这个问题。考虑：

*   将 pics_to_be_drawn 初始化为 null （所以你将它初始化为某个东西）
*   然后在绘制之前检查它是否为空。

改变这个：

```
class Battle_field extends JPanel{
    public List<Image_Obj> pics_to_be_drawn;    

    @Override   
    public void paintComponent(Graphics g){     
            super.paintComponent(g);                 
            g.drawImage(pics_to_be_drawn.get(0).Get_the_buf_img() , 41, 41, 59, 59, Color.black, null);
    }       
} 
```

对此：

```
class Battle_field extends JPanel{
    public List<Image_Obj> pics_to_be_drawn;    

    @Override   
    public void paintComponent(Graphics g){     
            super.paintComponent(g);          
            if (pics_to_be_drawn != null) { 
               g.drawImage(pics_to_be_drawn.get(0).Get_the_buf_img() , 41, 41, 59, 59, Color.black, null);
            }
    }       
} 
```

简单的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:11:59.683

`paintComponent()`当必须绘制面板时，Swing 调用该方法。我认为在面板可见之前它不会调用它。

也就是说，一旦将面板添加到 GUI，您的面板就应该处于可绘制状态。因此，该`paintComponent()`方法应该处理尚未添加图片的情况，只需检查列表是否不为空（且不为空）：

```
@Override   
public void paintComponent(Graphics g){     
    super.paintComponent(g);                 
    if (pics_to_be_drawn != null && !pics_to_be_drawn.isEmpty()) {
        g.drawImage(pics_to_be_drawn.get(0).Get_the_buf_img() , 41, 41, 59, 59, Color.black, null);
    }
} 
```

旁注：我会将列表初始化为`Collections.emptyList()`或`new ArrayList<>()`，这将避免检查空值。我也会尊重 Java 命名约定：类名和变量名中没有下划线，camelCasing。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:17:34.093

当窗口变得可见（未覆盖或最小化）或调整大小时，会自动调用 Jpanel 的paintComponent。[以下是有关何时可以调用paintComponent 的更多信息。](http://www.leepoint.net/notes-java/GUI-lowlevel/graphics/15who-calls-paintcomponent.html)

# c# - 将数据集绑定从表更改为存储过程

> ID：11312682
> 
> 赞同：1
> 
> 时间：2012-07-03T14:06:27.573
> 
> 标签：c#, data-binding, dataset

它是一个 Windows 应用程序。最初我有一个表中下拉菜单的数据集。现在我想使用存储过程。如何修改代码中的流程？

我认为最好的方法可能是删除数据集并重新创建一个新数据集。但是我们可以在设计器代码中做吗？

谢谢。

**编辑**

```
 protected Problem_DE_DataSet(global::System.Runtime.Serialization.SerializationInfo info, global::System.Runtime.Serialization.StreamingContext context) : 
            base(info, context, false) {
        if ((this.IsBinarySerialized(info, context) == true)) {
            this.InitVars(false);
            global::System.ComponentModel.CollectionChangeEventHandler schemaChangedHandler1 = new global::System.ComponentModel.CollectionChangeEventHandler(this.SchemaChanged);
            this.Tables.CollectionChanged += schemaChangedHandler1;
            this.Relations.CollectionChanged += schemaChangedHandler1;
            return;
        }
        string strSchema = ((string)(info.GetValue("XmlSchema", typeof(string))));
        if ((this.DetermineSchemaSerializationMode(info, context) == global::System.Data.SchemaSerializationMode.IncludeSchema)) {
            global::System.Data.DataSet ds = new global::System.Data.DataSet();
            ds.ReadXmlSchema(new global::System.Xml.XmlTextReader(new global::System.IO.StringReader(strSchema)));
            if ((ds.Tables["Problem_DE"] != null)) {
                base.Tables.Add(new Problem_DEDataTable(ds.Tables["Problem_DE"]));
            }
            this.DataSetName = ds.DataSetName;
            this.Prefix = ds.Prefix;
            this.Namespace = ds.Namespace;
            this.Locale = ds.Locale;
            this.CaseSensitive = ds.CaseSensitive;
            this.EnforceConstraints = ds.EnforceConstraints;
            this.Merge(ds, false, global::System.Data.MissingSchemaAction.Add);
            this.InitVars();
        }
        else {
            this.ReadXmlSchema(new global::System.Xml.XmlTextReader(new global::System.IO.StringReader(strSchema)));
        }
        this.GetSerializationData(info, context);
        global::System.ComponentModel.CollectionChangeEventHandler schemaChangedHandler = new global::System.ComponentModel.CollectionChangeEventHandler(this.SchemaChanged);
        base.Tables.CollectionChanged += schemaChangedHandler;
        this.Relations.CollectionChanged += schemaChangedHandler;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:11:01.193

使用存储过程只会为您提供另一个表。如果您使用的是数据集设计器，只需创建一个新的 tableadapter 并使用存储过程作为 select 语句。

如果这不是您所要求的，请使用一些代码更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:13:17.183

那么代码很简单。暗示您的 SQLCommand 称为 myCommand

*   将 更改为`myCommand.Text`存储过程的名称。

*   将 更改`myCommand.CommandType`为`CommandType.StoredProcedure`。

对于存储过程中的每个参数，请使用以下行：

*   `myCommand.Parameters.AddWithCalue("@YourSQLParameter",YourValue)`

我喜欢使用`DataReaders`这种类型的操作。

*   `SQLDataReader myReader = myCommand.ExecuteReader();`

瞧！你的 StoredProcedure 被执行。

现在假设您要将 soretd 过程的结果添加到`ComboBox`.

*   `while (myReader.Read()) { myComboBox.Items.Add(myReader["ColumnName"].Tostring(); }`

基本示例，但我相信您明白了。如果您需要更多信息，您可以随时阅读[本教程](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson07)，它几乎可以解释您想要什么。

更新 ：

它与您在那里发布的生成代码变得混乱，但方法仍然相同。据我了解，您只想使用存储过程从表中读取并用某个字段填充 ComboBox 或 DropDownList。您应该尝试在代码部分从头开始键入它，而无需使用此设计器来了解它的工作原理。

你应该有这样的东西：

```
 //Creates a connection to your DataBase
        SqlConnection myConnection = new SqlConnection(@"Server=YOURSERVER;Database=YOURDATABASE;User id=YOURID; Password=YOURPASSWORD");
        //Opens the connection
        myConnection.Open();
        //Creates a command (Query)
        SqlCommand myCommand = myConnection.CreateCommand();
        //Sets the type of query to Stored Procedure (EXEC ...)
        myCommand.CommandType = CommandType.StoredProcedure;
        //The Query is set to stored procedure so (EXEC THE_NAME_OF_YOU_STOREDPROCEDURE)
        myCommand.CommandText = "THE_NAME_OF_YOUR_STOREDPROCEDURE";

        //This will add each parameter to your query (EXEC THE_NAME_OF_YOURSTOREDPROCEDURE @YOURPARAMETER
        myCommand.Parameters.AddWithValue("@YOURPARAMETER", THE_VALUE_OF_THE_PARAMETER);
        SqlDataReader myReader = myCommand.ExecuteReader();

        //For each records returned the item from the ["YOURCOLUMN"] will be added to the comboBox
        while(myReader.Read())
        {
          myComboBox.Items.Add(myReader["YOUR_COLUMN_NAME"]);
        }
        myReader.Close();
        myConnection.Close(); 
```

# python - Python 变量引用 - zip 的意外行为

> ID：11312685
> 
> 赞同：0
> 
> 时间：2012-07-03T14:06:39.167
> 
> 标签：python

我真的以为我理解 Python 变量引用，所以我很困惑为什么这段代码没有使变量“a”变为“1”：

```
>>> a,b,c = None, None, None
>>> for var, val in zip((a,b,c),[1]):
...     var = val
... 
>>> print a
None
>>> print var
1 
```

谁能解释一下 Python 在这里做什么？为什么“var”和“a”不指向同一个地方？

额外问题：从一个可以包含 1-3 个项目的列表中分配三个变量并在列表不足时将变量设置为 None 的优雅方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:08:08.453

> 谁能解释一下 Python 在这里做什么？

它将变量的值分配给`val`变量`var`。它没有改变`a`。尝试以下操作以查看发生了什么：

```
>>> a, b, c = None, None, None
>>> print(zip((a,b,c), [1,2,3]))
[(None, 1), (None, 2), (None, 3)] 
```

`zip`永远不会看到变量`a`，`b`并且`c`，只是它们绑定的值。

[在Code Like a Pythonista](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#python-has-names)中阅读 Python 对变量（实际上是名称）的使用。

> 什么是从可以有 1-3 个项目的列表中分配三个变量并在列表不足时将变量设置为 None 的优雅方法？

不要动态构造变量。请改用列表。

```
vars = (lst + [None] * 3)[:3] 
```

然后使用`vars[0]`等。或者

```
x, y, z = (lst + [None] * 3)[:3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:11:51.147

变量 a、b、c 在传递给时被评估为它们的值`zip`：

```
>>> a,b,c = None, None, None
>>> zip((a,b,c),[1])
[(None, 1)] 
```

然后，在您的循环中，您没有达到您的预期：

```
for var, val in [(None, 1)]:
    #-- here var is bound to the value None

    var = val
    #-- here var is bound to the value 1

    #print val 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:08:40.627

a 的值为 None 的原因是因为您从未分配`1`给`a`. 因此，您需要确保为 a 分配了一个值。

# expressionengine - 将 Eventbrite 与表达式引擎集成

> ID：11312687
> 
> 赞同：1
> 
> 时间：2012-07-03T14:06:55.187
> 
> 标签：expressionengine, eventbrite

有没有人做过 Eventbrite 与 Expression Engine 网站的集成？我们希望使用 Eventbrite 设置活动并让他们处理所有票务管理。但是我们希望能够在 Expression Engine 站点中显示事件，然后使用户能够单击要重定向到 Eventbrite 的链接。我查看了 API，看起来我们可以使用 API 创建自定义 EE 页面。

更重要的是，我想让用户从我们的主站点搜索事件。

有没有人做过这类工作并有任何提示或资源？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:36:32.820

托德·珀金斯（Todd Perkins）前段时间开始为此开发一个模块，但从那以后就没有任何动作了。不过，这对您来说可能是一个很好的起点。

[https://github.com/toddperkins/eventbrite](https://github.com/toddperkins/eventbrite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:26:59.480

Eventbrite 有一个很棒[的基于 PHP 的 API 客户端库](http://eventbrite.github.com/#libraries)，它应该能够满足您所有的 API 交互需求。

这些 PHP 示例也可能很有用：

*   [https://github.com/ryanjarvinen/eventbrite.php/tree/master/examples](https://github.com/ryanjarvinen/eventbrite.php/tree/master/examples)
*   [http://eventbrite.github.com/#examples](http://eventbrite.github.com/#examples)

如果您在此项目上取得任何重大进展，请[告知@EventbriteAPI 。](http://twitter.com/EventbriteAPI)我敢肯定，他们会喜欢将 Expression Engine 集成添加到他们的[开源项目列表](http://eventbrite.github.com/#projects)和[应用程序展示](http://appstores.eventbrite.com/)中！

# linux - 在 centOS 上安装 ruby on rails

> ID：11312690
> 
> 赞同：0
> 
> 时间：2012-07-03T14:07:01.443
> 
> 标签：linux, ruby-on-rails-3, centos, redmine

这些天，我尝试在 centOS 上安装 Redmine（一个基于 ruby​​ on rails 的网络应用程序）。
我遵循了 ruby​​ 网站上的官方指南。但是我遇到了一个问题：
在终止中：

```
[root@localhost aaa]# cd blog 
[root@localhost blog]# rails -v
Rails 3.2.6

    [root@localhost blog]# rails server
    => Booting WEBrick
    => Rails 3.2.6 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    [2012-07-03 07:01:32] INFO  WEBrick 1.3.1
    [2012-07-03 07:01:32] INFO  ruby 1.8.7 (2012-06-29) [i686-linux]
    [2012-07-03 07:01:32] INFO  WEBrick::HTTPServer#start: pid=20517 port=3000
    ... 
```

它运作良好。但是，当我启动另一个应用程序 Redmine 时。

```
[root@localhost aaa]# cd redmine
[root@localhost redmine]# rails -v
script/rails:6:in `require': no such file to load -- rails/commands (LoadError)
        from script/rails:6
[root@localhost redmine]# rails server
script/rails:6:in `require': no such file to load -- rails/commands (LoadError)
        from script/rails:6
... 
```

结果让我很困惑。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:31:32.470

听起来 redmine 是 rails 2.x 而博客是 rails 3.x。我已经使用 RVM 和 gemsets 解决了这个问题。您可以搜索其他方式来运行多个版本的 rails。

# c# - 如何在 tinyMCE 编辑器中显示 RTF 文本

> ID：11312692
> 
> 赞同：1
> 
> 时间：2012-07-03T14:07:17.687
> 
> 标签：c#, xml, tinymce

我正在使用 tinyMCE 编辑器。我在数据库列中有 rtf 格式的字符串，我想在浏览器编辑器中显示，即 tinyMCE。这样，用户将根据需要编辑文本。但为此我发现我需要将 rtf 字符串转换为 xml 才能看到它，因为我的 tinyMCE 正确显示了 xml。我能够显示 rtf 字符串中的文本，但我错过了粗体文本、红色文本、\n 等格式。我想保留所有这些格式。我应如何保留格式或如何显示带有格式的 rtf 文本或如何将 rtf 文本正确转换为 xml？我想显示 rtf 文本，就像我将它保存在某个 rtf 文件中一样，并以我希望查看格式的方式以 ms word 或 open office word 打开该文件。rtf 是富文本格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:12:26.787

您应该将您的 RTF 转换为 HTML 并将其用于 TinyMCE，这里有一篇代码项目文章可以帮助您入门：

[http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter](http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter)

# javascript - Dijit ComboButton/DropDownMenu onclick 误区

> ID：11312695
> 
> 赞同：0
> 
> 时间：2012-07-03T14:07:35.500
> 
> 标签：javascript, dojo, dom-events

我刚刚开始玩 Dojo。我只是想在单击 Dijit ComboButton 的 DropDownMenu 中的项目时显示一个对话框。我尝试使用 dojo.connect 将 onclick 事件与一个函数相关联，该函数将简单地显示一个包含项目中包含的文本的对话框，但没有成功。

我设法让它以一种可怕的方式工作。现在所有的工作实际上都是手动写入 onclick 属性的。我显然在这里误解了一些东西。这是我目前拥有的：

### JS：

```
 require(["dijit/form/Button", "dijit/form/FilteringSelect", "dijit/DropDownMenu", "dijit/MenuItem"]);

    //if the following is defined inside dojo.ready, nothing happens
    function getmail(text)
    {
         alert('No mail from '+text);
    }

    dojo.ready(function(){ 
        //the following does nothing:
        dojo.connect(dojo.query(".dijitMenuItemLabel"), "onclick", function(evt) {
            console.log("mail item clicked");
            alert('Blah');
            //dojo.stopEvent(evt);
        });
    }); 
```

### HTML：

```
<form method="POST">

    <div data-dojo-type="dijit.form.ComboButton" id="getmail">

        <span>Get All Mail</span>

        <div data-dojo-type="dijit.DropDownMenu">

            <div data-dojo-type="dijit.MenuItem" 
                data-dojo-props="onClick:function(){getmail(dojo.trim(dojo.query('.dijitMenuItemLabel', this.domNode)[0].innerHTML))}">
                Yahoo</div> 

            <div data-dojo-type="dijit.MenuItem">Google</div>

        </div>

    </div>

</form> 
```

* * *

## 我显然对 Dojo 有什么误解？

（或者也许我犯了简单的 JavaScript 错误）

* * *

[JSFiddle](http://jsfiddle.net/c5Fa8/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:17:03.097

你应该可以用类似的东西来做到这一点

```
var myButton = dijit.byId('getmail');
myButton.on('click', function(){ alert('clicked') }); 
```

我的猜测是，当您获取按钮时，您混淆了 dojo.byId 和 dijit.byId - 当您连接小写的“onclick”时，常规 DOM 节点可以工作，但小部件会触发驼峰式“onClick”事件（区别是因为 dijit 会触发一些键盘事件，用于可访问性）。

然而，对于较新版本的 Dojo，最好远离 dojo.connect，而只使用我展示的更简单的“.on”API。

* * *

啊，在我忘记之前，您似乎也忘记了运行 Dojo 解析器（或将 parseOnLoad 设置为 true），因此从未创建过按钮。你能在 JSFiddle 上提供一个完全可执行的例子吗？

# signal-processing - FFT 是否需要在音频文件上找到峰值和凹点

> ID：11312703
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:07:55.343
> 
> 标签：signal-processing, audio

我能够读取 wav 文件及其值。我需要找到峰和坑的位置及其值。第一次，我尝试通过`(i-1 + i + i +1) / 3`公式对其进行平滑，然后在数组上搜索作为`array[i-1] > array[i] & direction == 'up' --> pits`样式解决方案，但由于噪声和其他项目未来计算的原因，我正在寻找更好的工作区域。几天以来，我一直在研究 FFT。据我了解，fft 将音频文件转换为一系列正弦和余弦。在 fft 操作之后，给定的值是`a0`'s 和`a1`'s for`a0 + ak * cos(k*x) + bk * sin(k*x) which k++ and x++`就像这张图片

[http://zone.ni.com/images/reference/en-XX/help/371361E-01/loc_eps_sigadd3freqcomp.gif](http://zone.ni.com/images/reference/en-XX/help/371361E-01/loc_eps_sigadd3freqcomp.gif)

我的问题是，fft 是否有助于我找到音频的峰值和凹坑？有没有人有这种问题的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:45:47.523

如果我理解正确，您只想估计音频数字样本在给定点的相对响度/安静度。

对于此估计，您不需要使用 FFT。但是，您平均信号的方法也不会产生适当的图像。

数字信号是给定时刻音频波的值。您需要在给定时刻找到信号的整体幅度。您可以在某种程度上将其视为您要计算的那一刻给定间隔的局部最大值。您可能对信号有一个移动最大值并获得幅度估计。

在 16 位声音样本中，声音信号值可以从 0 到 32767。在 44.1 kHz 采样率下，您可以通过在给定 t 时刻找到 441 个样本的最大值来找到大约 0.01 秒的峰值和凹坑。

```
max=1;
for (i=0; i<441; i++) if (array[t*44100+i]>max) max=array[t*44100+i]; 
```

然后以 0 到 1 的比例表示它（不是真正的 0，因为我们至少使用了 1）

```
amplitude = max / 32767; 
```

或者您可以用相对 dB 对数标度来表示它（在这里您可以看到为什么我们使用 1 作为最小值）

```
dB = 20 * log10(amplitude); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:03:05.433

您需要做的就是获取 dy/dx，只需扫描波形并从当前值中减去前一个值，然后查看它在哪里变为零或从正变为负，就可以得到近似值

在这段代码中，为了简洁起见，我把它变得非常简短和不智能，当然你可以更好地处理 dy 为零的情况，找到平坦峰的长部分的“中心”，诸如此类。但是，如果您只需要基本的波峰和波谷，这将找到它们。

```
lastY=0;

bool goingup=true;

for( i=0; i < wave.length; i++ ) {
    y = wave[i];
    dy = y - lastY;

    bool stillgoingup = (dy>0);

    if( goingup != direction ) {
       // changed direction - note value of i(place) and 'y'(height)
       stillgoingup = goingup;
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:35:58.997

这取决于您到底要做什么，而您还没有真正弄清楚。“找峰找坑”是一回事，但由于这样做可能有各种原因，因此可能有各种方法。您已经尝试过实际寻找局部最大值和最小值的简单方法，听起来像是。以下是一些提示：

1.  您不需要 FFT。
2.  音频数据通常在零上下波动（有例外，包括 8 位 wav，它们是无符号的，但这些都是*例外*），因此您必须注意正值和负值。但是，通常，较大的正值和较大的负值会携带大量能量，因此您希望将它们视为相同的值。
3.  由于#2，如果你想取平均值，你可能想要取绝对值的平均值，或者更常见的是平方的平均值。一旦你找到平方的平均值，取那个值的平方根，这给出了[RMS](http://en.wikipedia.org/wiki/Root_mean_square)，它与信号的功率有关，所以你可能会做这样的事情，你试图指示信号响度、强度或近似模拟仪表。绝对值的平均值对极端值可能更稳健，但不太常用。
4.  另一种方法是简单地在一定数量的样本上寻找绝对值的峰值，这通常在绘制波形和数字“峰值”表时完成。查看最小绝对值是没有意义的。
5.  完成上述操作后，是的，您可能需要计算找到的值的对数，以便以 dB 为单位显示信号，但请确保使用正确的公式。10 * log_10( 振幅 )*不是*。经验法则：通常在从幅度计算日志时，您会看到 20，而不是 10。如果您想计算 dBFS（削波前的“净空”量，这是数字仪表的标准测量值），公式为 - 20 * log_10( |amplitude| )，其中幅度归一化为 +/- 1。注意幅度 = 0，这会给出以 dB 为单位的无限余量。

# macos - 带有 KeyRemap4MacBook 和回弹键的 Emacs 无法识别某些快捷键 (px M-})

> ID：11312710
> 
> 赞同：3
> 
> 时间：2012-07-03T14:08:12.707
> 
> 标签：macos, emacs, keyboard-shortcuts

好的，我的设置的解释需要一些时间：

我是德国人，在我的 Mac 上使用[Neo 键盘布局和](http://www.neo-layout.org/)[KeyRemap4MacBook](http://pqrs.org/macosx/keyremap4macbook/)来获取`CapsLock`和`#`键作为附加修饰键。有关选中的选项，请参见下图。

![KeyRemap4MacBook 的设置](../Images/0ba774853e23d64a31f40d2d08c43e59.png)

然后我在emacs中重新绑定以下键

```
 (setq mac-option-key-is-meta nil)
  (setq mac-option-modifier nil)
  (setq mac-command-key-is-meta t)
  (setq mac-command-modifier 'control)
  (setq mac-control-modifier 'meta) 
```

使用这些选项，当在 emacs 中按下例如`Meta`+ `Capslock`+时，我会得到以下信息，`e`这应该与`Meta`+相同`}`：

![错误信息](../Images/eb311b36d9df4038d9f1c3de6328aa76.png)

可悲的是，我无法绑定此组合键。知道为什么会发生这种情况以及如何在不显着更改键盘设置的情况下规避它吗？

# vba - VBA（Excel）中的变量除以数字范围

> ID：11312712
> 
> 赞同：1
> 
> 时间：2012-07-03T14:08:19.573
> 
> 标签：vba, vbscript, excel

我在循环中有以下代码：

```
Range("N" & i + 1).Formula = "=L" & (i + 1) / resp2 
```

上面的代码假设取 Column`L`并除以一个整数，这里称为`resp2`. 将数字除以`resp2`Coulmn 后`N`。

我似乎无法弄清楚语法，因为当我尝试运行宏时它不断给我一个错误或错误的数字。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:10:43.847

这是你正在尝试的吗？

```
Range("N" & i + 1).Formula = "=L" & (i + 1) & "/" & resp2 
```

所以如果值`i = 2`和 Cell 的`resp2 = 5`值`N3`会有`=L3/5`

# java - 使用 java 在 linux 上安装 jigsaw 时出错

> ID：11312716
> 
> 赞同：1
> 
> 时间：2012-07-03T14:08:24.740
> 
> 标签：java, exception

我正在尝试在 Linux 上安装 Jigsaw。我已经在我的机器上安装了 JDK。这里是 java -version 的消息：

java 版本“1.7.0_05”Java(TM) SE 运行时环境（构建 1.7.0_05-b05）Java HotSpot(TM) 64 位服务器 VM（构建 23.1-b03，混合模式）

我按照您的说明进行操作，但是当我执行 install.sh 时，我收到：

./install.sh: 5: cd: can't cd to Jigsaw Errore: impossibile trovare o caricare la classe principale 安装

所以我选择手动导出 CLASSPATH 的方式，但是当我在这里执行 java Install 时，它是消息

> 拼图/2.2.6 设置。
> 
> 更新 /home/mazzy/Scaricati/Jigsaw/Jigsaw/config/http-server.props ... 线程“main”中的异常 java.lang.NoClassDefFoundError: org/w3c/jigsaw/http/httpd at Install.install(Install. java:134) at Install.main(Install.java:210) 原因：java.lang.ClassNotFoundException: org.w3c.jigsaw.http.httpd at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass (ClassLoader.java:423) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) ... 还有 2 个

# gcc - 如何用 gcc 编译 MPI？

> ID：11312719
> 
> 赞同：30
> 
> 时间：2012-07-03T14:08:37.700
> 
> 标签：gcc, mpi

有谁知道是否可以用`gcc`? 编译 MPI。我需要使用`gcc`，没有`mpicc`。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-04T12:48:29.313

`mpicc`只是围绕某些编译器的包装。大多数实现都让它们的`mpicc`包装器理解一个特殊的选项，例如`-showme`(Open MPI) 或`-show`(Open MPI, MPICH and derivates)，它提供了包装器传递给后端编译器的完整选项列表。

例如，在 Open MPI 中，包装器是读取纯文本配置文件并构建命令行选项的 C++ 程序，这些选项会进一步传递给编译器。`mpicc -showme`显示此类选项的完整列表：

```
$ mpicc -showme
icc
-I/opt/MPI/openmpi-1.5.3/linux/intel/include
-I/opt/MPI/openmpi-1.5.3/linux/intel/include/openmpi
-fexceptions
-pthread
-I/opt/MPI/openmpi-1.5.3/linux/intel/lib
-Wl,-rpath,/opt/MPI/openmpi-1.5.3/linux/intel/lib
-I/opt/MPI/openmpi-1.5.3/linux/intel/lib
-L/opt/MPI/openmpi-1.5.3/linux/intel/lib
-lmpi
-ldl
-Wl,--export-dynamic
-lnsl
-lutil 
```

（这真的是我为了提高可读性而在此处拆分的单行）

在这种特殊情况下，英特尔 C 编译器`icc`被用作后端编译器，但我们也有使用 GCC 的变体。您还可以使用以下命令获取完成阶段（通常称为`CFLAGS`）所需的选项列表`mpicc -showme:compile`：

```
$ mpicc -showme:compile
-I/opt/MPI/openmpi-1.5.3/linux/intel/include
-I/opt/MPI/openmpi-1.5.3/linux/intel/include/openmpi
-fexceptions
-pthread
-I/opt/MPI/openmpi-1.5.3/linux/intel/lib 
```

以及您需要传递给链接器（称为`LDFLAGS`）的选项列表`mpicc -showme:link`：

```
$ mpicc -showme:link
-fexceptions
-pthread
-I/opt/MPI/openmpi-1.5.3/linux/intel/lib
-Wl,-rpath,/opt/MPI/openmpi-1.5.3/linux/intel/lib
-I/opt/MPI/openmpi-1.5.3/linux/intel/lib
-L/opt/MPI/openmpi-1.5.3/linux/intel/lib
-lmpi
-ldl
-Wl,--export-dynamic
-lnsl
-lutil 
```

这些可以使用，例如在 a 中`Makefile`，像这样：

```
...
CFLAGS += $(shell mpicc -showme:compile)
LDFLAGS += $(shell mpicc -showme:link)
... 
```

据我所知`-showme:compile`并且`-showme:link`特定于 Open MPI 和其他实现仅在使用`-show`.

我仍然认为最好`mpicc`直接使用，因为如果 MPI 设置中的某些内容发生更改，它将立即反映在包装器中，而您必须`Makefile`手动更改构建脚本（除非您使用`-showme:compile`并`-showme:link`自动获取选项）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-03T03:42:19.140

`mpicc -compile_info`对于 MPICH。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-04T03:01:06.327

是的，您实际上可以使用 gcc。但在我的情况下（在 Ubuntu 上） mpicc 只是 gcc 的一个包装器，这里是命令的输出`mpicc -showme`：

```
gcc -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent -I/usr/lib/openmpi/include/openmpi/opal/mca/event/libevent2021/libevent/include -I/usr/lib/openmpi/include -I/usr/lib/openmpi/include/openmpi -pthread -Wl,-rpath -Wl,/usr/lib/openmpi/lib -Wl,--enable-new-dtags -L/usr/lib/openmpi/lib -lmpi 
```

在[Open MPI 文档](https://www.open-mpi.org/faq/?category=mpi-apps)中：

> Open MPI 团队强烈建议您只使用 Open MPI 的“包装器”编译器来编译您的 MPI 应用程序。也就是说，不要使用（例如）gcc 来编译程序，而是使用 mpicc。
> 
> 我们重复上述声明：Open MPI 团队强烈建议使用包装编译器来编译和链接 MPI 应用程序。如果您发现自己说，“但我不想使用包装编译器！”，请幽默并尝试它们。看看他们是否适合你。如果它们不适合您，请务必告知我们。许多人认为他们的“包装编译器很烂！” 对 1990 年代中期实施不佳的包装编译器的不良行为的心态。这些天情况好多了。包装编译器几乎可以处理任何情况，并且比您尝试手动对 Open MPI 特定编译器和链接器标志进行硬编码要可靠得多。话虽这么说，有一些 - 非常，很少——使用包装编译器可能会出现问题的情况——例如嵌套多个项目的多个包装编译器。因此，Open MPI 提供了一种解决方法来找出编译 MPI 应用程序所需的命令行标志。

在这里，这个答案对您有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-03T09:45:57.010

对于 MPICH，根据 mpicc 手册页，`mpicc -compile_info`显示用于编译程序`mpicc -link_info`的标志，并显示用于链接程序的标志。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T14:55:06.650

是的，您当然可以在不使用`mpicc`包装器的情况下编译 MPI 程序。在大多数实现`mpicc`中是一个 shell 脚本（或类似的脚本），它设置环境变量、查找和链接各种库，所有你可能会放入 Makefile 的东西。

我建议你找到一个`mpicc`脚本实例并解构它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T14:14:23.537

`mpicc`已经`gcc`用作后端

# cocoa - NSWindow 翻转动画 - 像 iWork

> ID：11312725
> 
> 赞同：4
> 
> 时间：2012-07-03T14:08:54.510
> 
> 标签：cocoa, animation, transition, nswindow, flip

我正在尝试实现与 iWork 中相同的窗口翻转 -

[https://dl.dropbox.com/u/2338382/Window%20Flipping.mov](https://dl.dropbox.com/u/2338382/Window%20Flipping.mov)

但是，我似乎无法找到一种直接的方法来做到这一点。一些教程建议将窗口两侧的快照图像粘贴在更大的透明窗口中并为其设置动画。这可能有效，但似乎有点 hacky，并且示例代码总是臃肿。一些教程建议使用私有 API，因为这个应用程序可能是 MAS 绑定的，我想避免这种情况。

我应该如何实施呢？有没有人有任何提示？

### NSWindow+翻转

我已经将下面链接的古老代码重写为 NSWindow+Flipping。[您可以从我的 misc](https://github.com/pcperini/PCSnippets)中获取这些源文件。[GitHub 上的 Cocoa 集合，PCSnippets](https://github.com/pcperini/PCSnippets)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:33:10.217

**您可以使用CoreGraphics 框架**来实现这一点。看看这个：

```
- (void) flipWithDuration: (float) duration forwards: (BOOL) forwards
{
  CGSTransitionSpec spec;
  CGSTransitionHandle transitionHandle;
  CGSConnection cid = CGSDefaultConnection;

  spec.type = CGSFlip;
  spec.option = 0x80 | (forwards ? 2 : 1);
  spec.wid = [self windowNumber];
  spec.backColor = nil;

  transitionHandle = -1;
  CGSNewTransition (cid, &spec, &transitionHandle);
  CGSInvokeTransition (cid, transitionHandle, duration);
  [[NSRunLoop currentRunLoop] runUntilDate: 
        [NSDate dateWithTimeIntervalSinceNow: duration]];
  CGSReleaseTransition (cid, transitionHandle);
} 
```

您可以下载示例项目：[here](http://regmedia.co.uk/2009/08/20/coregraphics_framework_demmo.zip)。更多信息[在这里](http://www.theregister.co.uk/2009/08/21/cocoa_graphics_framework/)。

**更新：**

看看[这个项目](http://brockerhoff.net/src/Flipr.zip)。这实际上是您所需要的。

> **关于这个项目：**
> 
> 此类别`NSWindow`允许您使用仪表板小部件普及的“翻转”动画将一个窗口切换到另一个窗口。这是学习有关 CoreImage 以及如何在 Cocoa 中使用它的一个很好的借口。演示应用程序展示了如何使用它。滚动到最后，看看这个版本有什么新东西！
> 
> 基本上，您需要做的就是：

```
[someWindow flipToShowWindow:someOtherWindow forward:YES]; 
```

> 但是，此代码做了一些假设： — someWindow（初始窗口）已经在屏幕上可见。— someOtherWindow（最终窗口）在屏幕上尚不可见。— 两个窗口都可以调整为相同的大小，并且不会太大或太复杂 — CPU/显卡越快，后一种条件就越不重要。— 动画运行时窗口不会消失。— 用户不会在动画运行时尝试点击动画窗口或做某事。
> 
> 实现非常简单。我将最终窗口移动到与初始窗口相同的位置和大小。然后我放置一个更大的透明窗口，使其覆盖该框架。我将两个窗口内容都渲染到 CIImages 中，隐藏两个窗口，然后启动动画。动画的每一帧都将透视扭曲的图像渲染到透明窗口中。动画完成后，我会显示最终窗口。使用了一些技巧来加快速度；翻转窗口只设置一次；例如，最终窗口通过将其 alpha 设置为 0.0 来隐藏，而不是通过将其排序然后再将其重新排序。
> 
> 主要瓶颈是 CoreImage 过滤器，第一帧的渲染时间总是要长得多——是其余帧的 4 或 6 倍。我想这段时间花在设置和下载到视频卡上。所以我计算了这需要的时间，并在旋转开始显示的阶段绘制第二帧。动画从此时开始，但是，如果前两帧花费的时间太长，我会延长持续时间以确保至少再渲染 5 帧。这将发生在缓慢的硬件或大窗口中。最后，我根本不渲染最后一帧，而是交换最后一个窗口。

# javascript - 什么是中间 JavaScript 的静态缓存

> ID：11312730
> 
> 赞同：2
> 
> 时间：2012-07-03T14:09:19.797
> 
> 标签：javascript, node.js, ejs

我是 Node.js 和 EJS 的新手。“中间 JavaScript 的静态缓存”被提到作为 EJS 的功能之一。任何人都可以解释它的确切含义。

问候，卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:21:36.780

假设您有一个模板，如下所示：

```
<h1><%= name %></h1> 
```

在内部，这将编译成以下几行（非常简化）：

```
function(params) {
    return '<h1>' + params.name + '</h1>';
} 
```

与一遍又一遍地解析模板相比，该 javascript 函数的执行速度非常快。如果您使用选项调用它，EJS 将在内部*缓存*`cache`该函数。因此，它不必在每次渲染时都编译模板。

# python - Python：将 Python 字典列表转换为 JSON 对象数组

> ID：11312733
> 
> 赞同：13
> 
> 时间：2012-07-03T14:09:30.213
> 
> 标签：python, json

我正在尝试编写一个函数来将 python 列表转换为 {"mpn":"list_value"} 对象的 JSON 数组，其中 "mpn" 是我需要的每个对象的文字字符串值，但 "list_value" 是值从 python 列表中。我会将此函数的输出用于 API 获取请求。

```
part_nums = ['ECA-1EHG102','CL05B103KB5NNNC','CC0402KRX5R8BB104']

def json_list(list):
    lst = []
    d = {}
    for pn in list:
        d['mpn']=pn
        lst.append(d)
    return json.dumps(lst, separators=(',',':'))

print json_list(part_nums) 
```

此当前函数不起作用，并返回所有 JSON 对象的 python 列表中的最后一个值：

```
>[{"mpn":"CC0402KRX5R8BB104"},{"mpn":"CC0402KRX5R8BB104"},{"mpn":"CC0402KRX5R8BB104"}] 
```

但是，当然我需要我的函数来返回对象中的唯一列表值，如下所示：

```
>[{"mpn":"ECA-1EHG102"},{"mpn":"CL05B103KB5NNNC"},{"mpn":"CC0402KRX5R8BB104"}] 
```

底线是我不明白为什么这个功能不起作用。我希望我可以将带有单个 {key:value} 对的字典附加到 python 列表中，并且所有字典都具有相同的键并不重要，因为它们是独立的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-03T14:12:45.080

您正在将完全相同的字典添加到列表中。您应该为列表中的每个项目创建一个新字典：

```
json.dumps([dict(mpn=pn) for pn in lst]) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T14:24:32.783

正如其他人（在答案中）所解释的那样，您应该为列表中的每个项目创建一个新词典，您总是引用同一个词典

```
import json
part_nums = ['ECA-1EHG102','CL05B103KB5NNNC','CC0402KRX5R8BB104']

def json_list(list):
    lst = []
    for pn in list:
        d = {}
        d['mpn']=pn
        lst.append(d)
    return json.dumps(lst)

print json_list(part_nums) 
```

打印

```
[{"mpn": "ECA-1EHG102"}, {"mpn": "CL05B103KB5NNNC"}, {"mpn": "CC0402KRX5R8BB104"}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-26T08:45:35.687

```
import json
part_nums = ['ECA-1EHG102','CL05B103KB5NNNC','CC0402KRX5R8BB104']

def json_list(list):
    lst = []
    for pn in list:
        d = {}
        d['mpn']=pn
        lst.append(d)
    return json.dumps(lst)

print json_list(part_nums)   # for pyhon2
print (json_list(part_nums)) # for python3 
```

# javascript - jqGrid：列调整大小触发点击事件

> ID：11312734
> 
> 赞同：1
> 
> 时间：2012-07-03T14:09:30.970
> 
> 标签：javascript, jquery, jquery-ui, jqgrid

首先，这些是我目前使用的版本：

*   jqGrid 4.3.2 修复了 Chrome（由[jqGrid 中的“Oleg”发布，在 Chrome/Chrome Frame 中无法正确呈现](https://stackoverflow.com/questions/10588587/jqgrid-does-not-render-correctly-in-chrome-chrome-frame)）。出于某种原因，4.3.2 和 4.4.0 没有为我解决帖子中描述的宽度问题。除了 Chrome 之外，这个问题刚刚出现在 IE 中。

*   jQuery 1.7.2

*   jQuery UI 1.8.9

我遇到的问题是，当我尝试通过拖动鼠标来调整网格中一列的大小时，当我松开鼠标按钮时，它似乎触发了分隔符左侧标题上的单击事件。这个事件然后触发行的重新排序，所以它不是很好。

它只发生在 IE (9) 中，它在 Firefox 和 Chrome 中运行良好。

我认为这很奇怪，因为我没有找到其他任何人描述与 jqgrid 相同的问题，而且我认为我不会做任何可能导致这种行为的“黑客”。

希望有人可以在这里为我指明方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:40:57.610

我没有找到问题的根本原因是什么，但通过在列调整大小操作的 mouseup 事件后暂停 jqgrid 中的单击处理程序 10 毫秒来解决它。点击处理程序已经检查了一个名为 ts.p.disableClick 的变量，所以我想我不妨使用这个。我唯一需要改变的是：

```
 $(document).mouseup(function () {
    if (grid.resizing) { grid.dragEnd(); return false;}
    return true;
 }); 
```

，对此：

```
 $(document).mouseup(function () {
        if (grid.resizing) {

            // Disabling the click handler for 10 millisec.
            ts.p.disableClick = true;
            setTimeout(function() {
                 ts.p.disableClick = false;
            }, 10);

            grid.dragEnd(); return false;
        }
    return true;
 }); 
```

您可以称其为 hack，但将点击处理程序暂停 10 毫秒不应该以任何方式影响用户，所以我认为它应该是安全的。

如果有人遇到类似的问题，希望这会有所帮助。

# reporting-services - Javascript .ClientController Expando 在使用 SSRS 2010 的 ReportViewer 中不再可用？

> ID：11312735
> 
> 赞同：2
> 
> 时间：2012-07-03T14:09:39.267
> 
> 标签：reporting-services

我们正在将一些报告从 SSRS ReportServer2005 升级到最新版本的 ReportServer2010。由于方法名称等已更改，因此不是最简单的升级。我们遇到的另一个问题是 asp.net ReportViewer 控件没有 .ClientController Expando 对象及其关联方法。此版本不再提供此功能，还是需要配置更多内容才能启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:37:07.627

据我所知，它已替换为[ReportViewer](http://msdn.microsoft.com/en-us/library/dd756405.aspx)类（在命名空间[Microsoft.Reporting.WebFormsClient](http://msdn.microsoft.com/en-us/library/dd756410.aspx)中）。不过，这是一个相当大的变化。

# php - 我可以在准备好的语句中参数化表名吗？

> ID：11312737
> 
> 赞同：82
> 
> 时间：2012-07-03T14:09:51.827
> 
> 标签：php, mysql, sql

我已经多次使用 mysqli_stmt_bind_param 函数。但是，如果我将试图防止 SQL 注入的变量分开，我会遇到错误。

这是一些代码示例：

```
function insertRow( $db, $mysqli, $new_table, $Partner, $Merchant, $ips, $score, $category, $overall, $protocol )
{
    $statement = $mysqli->prepare("INSERT INTO " .$new_table . " VALUES (?,?,?,?,?,?,?);");
    mysqli_stmt_bind_param( $statment, 'sssisss', $Partner, $Merchant, $ips, $score, $category, $overall, $protocol );
    $statement->execute();
} 
```

是否可以以某种方式`.$new_table.`用另一个问号语句替换连接，创建另一个绑定参数语句，或者添加到现有的语句以防止 SQL 注入？

像这样或这样的某种形式：

```
function insertRow( $db, $mysqli, $new_table, $Partner, $Merchant, $ips, $score, $category, $overall, $protocol )
{    
    $statement = $mysqli->prepare("INSERT INTO (?) VALUES (?,?,?,?,?,?,?);");
    mysqli_stmt_bind_param( $statment, 'ssssisss', $new_table, $Partner, $Merchant, $ips, $score, $category, $overall, $protocol );
    $statement->execute();
} 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-04T11:05:06.180

对您的问题的简短回答是“不”。

在最严格的意义上，在数据库级别，准备好的语句只允许为 SQL 语句的“值”位绑定参数。

对此的一种思考方式是“可以在语句的运行时执行时替换而不改变其含义的东西”。表名不是那些运行时值之一，因为它决定了 SQL 语句本身的有效性（即，哪些列名是有效的）并且在执行时更改它可能会改变 SQL 语句是否有效。

在稍高的级别上，即使在模拟准备好的语句参数替换而不是实际将准备好的语句发送到数据库的数据库接口中，例如 PDO，这可能允许您在任何地方使用占位符（因为占位符在被发送到之前被替换）那些系统中的数据库），表占位符的值将是一个字符串，并包含在发送到数据库的 SQL 中，因此`SELECT * FROM ?`使用`mytable`as 参数实际上最终会发送`SELECT * FROM 'mytable'`到数据库，这是无效的 SQL。

你最好的选择就是继续

```
SELECT * FROM {$mytable} 
```

但是如果来自用户输入，您**绝对**应该有一个您首先检查的表的白名单。`$mytable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-08T15:08:09.460

尝试创建“数据库”时也适用相同的规则。

您不能使用准备好的语句来绑定数据库。

IE：

```
CREATE DATABASE IF NOT EXISTS ? 
```

不管用。请改用安全列表。

# java - 如何创建 RomanNumeral 对象并将其转换回 int、long 等？

> ID：11312738
> 
> 赞同：0
> 
> 时间：2012-07-03T14:09:54.720
> 
> 标签：java

我想获取存储在对象中的罗马数字值并将其转换回整数、长整数、浮点数和双精度值。除了创建适当的方法之外，我真的不知道从哪里开始。任何人都可以提供一些建议吗？

[http://pastebin.com/sqwdhbtu](http://pastebin.com/sqwdhbtu)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:12:12.410

您似乎不需要深拷贝，因为您的类似乎是不可变的。

您的“转换”方法都可以返回`intVal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:17:47.213

您的问题似乎是如何将罗马数字转换为整数。在这种情况下，您只需要一个函数来从左到右解析字符串并将结果加在一起，同时寻找应该减去的较小数字。

```
class RomanNumeral{
  String roman;

  public RomanNumeral(String roman){
    this.roman = roman;
  }

  public RomanNumeral Clone(){
    return new RomanNumeral(this.roman);
  }

  public int GetValue(){
    int sum = 0;
    int carry = 0;
    for(int i = 0; i< roman.Length;i++)
    {
     if(i<roman.Length-1){
       if(GetRomanValue(roman[i])>GetRomanValue(roman[i+1])){
          sum += GetRomanValue(roman[i]) - carry;
          carry = 0;
       }
     else carry = GetRomanValue(roman[i]);
    }
    else sum += GetRomanValue(roman[i]) - carry;
  }
 }

  int GetRomanValue(char c)
  {
    switch(c){
     case 'I': return 1;
     case 'V': return 5;
     //and so on...
    }
   }
} 
```

获得整数后，您可以将其转换为其他数字类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:21:03.210

As Peter pointed out you don't need a deep copy. Regarding the conversion of roman numeral to arabic, see the answers to [this question](https://stackoverflow.com/questions/9073150/converting-roman-numerals-to-decimal).

# mysql - 将 shell 变量传递给 mysql 查询

> ID：11312740
> 
> 赞同：0
> 
> 时间：2012-07-03T14:09:58.873
> 
> 标签：mysql, shell

我正在更新清除脚本以删除所有行或单行，因此这将由一个名为 DEVICE 的变量控制，所以问题是我可以使用 (*) 作为变量名吗？DEVICE 可能由`*`（全部）或`12.3.4.5`（单个设备）组成。

```
DELETE L from LogTable L WHERE L.logTime < @cutoffTime AND L.deviceAddress = "${DEVICE}"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T13:25:39.287

> 问题是我可以使用 (*) 作为变量名吗？
> 
> ```
> DEVICE=* (all) or DEVICE=12.3.4.5 (single) 
> ```

你的意思是：*我可以`*`用作变量**值***吗？

您可以，并且您在示例中正确引用了扩展。

# php - PHP 知道 Wordpress 中是否存在类别

> ID：11312741
> 
> 赞同：0
> 
> 时间：2012-07-03T14:09:59.563
> 
> 标签：php, wordpress, list, add, categories

我正在编写一个简单的脚本 php。此脚本必须知道 wordpress cms 中是否存在通过 $_get 传递的指定类别。

存在.php?cat=xxx

我读过这个，但我不确定它是否能帮助我。 [http://codex.wordpress.org/Function_Reference/is_category](http://codex.wordpress.org/Function_Reference/is_category)

谁能帮我？我能怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:16:50.880

由于您似乎正在尝试从单独的 PHP 文件访问它，因此请在脚本中连接到 WordPress 数据库并运行以下查询：

```
<?php
include 'wp-config.php';

$dbh = new PDO('mysql:host=' . DB_HOST . ';dbname=' . DB_NAME, DB_USER, DB_PASSWORD);

$stmt = $dbh->prepare( "SELECT * FROM `wp_term_taxonomy` TT RIGHT JOIN `wp_terms` TE ON TT.`term_id` = TE.`term_id` WHERE TT.`taxonomy` = 'category' AND TE.`name` = :category" );
$stmt->bindParam( ':category', $_GET['cat'] );
$stmt->execute();

if ( $row = $stmt->fetch() ) {
    // It exists
} else {
    // It does not exist
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T03:46:01.223

使用 get_categories 获取数组中的所有类别，然后使用 in_array 查找其类别是否存在。然后，您也可以使用相同的类别 ID 来获取有关该类别的更多信息。参考：[http](http://codex.wordpress.org/Function_Reference/get_categories#Source_File) ://codex.wordpress.org/Function_Reference/get_categories#Source_File 参考：http : [//php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

例子：

```
<?php 
$cat_list = get_categories(); 

if (in_array($_GET['cat'], $cat_list)) {
// exists
} else {
// does not exists
}    
?> 
```

# jsf-2 - PrimeFaces 自动完成 3.3.1 不适合我

> ID：11312745
> 
> 赞同：3
> 
> 时间：2012-07-03T14:10:07.973
> 
> 标签：jsf-2, primefaces

我已经使用 PrimeFaces 展示实验室代码设置了一个测试页面来测试该组件。当我开始在自动完成框中输入内容时，我收到了一个异常。请注意，根据我是否打开了客户端或服务器状态保存，例外情况有所不同。我正在使用 WebLogic 11g、PrimeFaces 3.3.1、Apache Tomahawk 1.1.13 和 Mojarra 2.1.8。有任何想法吗？

**AutoCompleteBean.java**

```
@ManagedBean
public class AutoCompleteBean {  

    private String txt1;        

    public List<String> complete(String query) {  
        List<String> results = new ArrayList<String>();  

        for (int i = 0; i < 10; i++) {  
            results.add(query + i);  
        }  

        return results;  
    }  

    public String getTxt1() {  
        return txt1;  
    }  

    public void setTxt1(String txt1) {  
        this.txt1 = txt1;  
    }  

} 
```

**自动完成.xhtml**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">

<h:head></h:head>

<h:form id="form">  
    <p:panel header="AutoComplete" toggleable="true" id="panel">  
            <h:outputLabel value="Simple :" for="acSimple" />  
            <p:autoComplete id="acSimple" value="#{autoCompleteBean.txt1}"   
                    completeMethod="#{autoCompleteBean.complete}"/>                         
    </p:panel>  
</h:form>  

</html> 
```

**javax.faces.STATE_SAVING_METHOD = 客户端时的异常**

```
Jul 3, 2012 10:00:03 AM com.sun.faces.renderkit.ClientSideStateHelper doGetState
SEVERE: Not in GZIP format
java.io.IOException: Not in GZIP format
        at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:137)
        at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:58)
        at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:68)
        at com.sun.faces.renderkit.ClientSideStateHelper.doGetState(ClientSideStateHelper.java:244)
        at com.sun.faces.renderkit.ClientSideStateHelper.getState(ClientSideStateHelper.java:211)
        at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
        at com.sun.faces.application.view.FaceletPartialStateManagementStrategy.restoreView(FaceletPartialStateManagemen
tStrategy.java:331)
        at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:138)
        at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:513)
        at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142)
        at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
        at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
        at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3592)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2202)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2108)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1432)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

**javax.faces.STATE_SAVING_METHOD = 服务器时的异常**

```
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1937)
    at com.sun.faces.renderkit.ServerSideStateHelper.getState(ServerSideStateHelper.java:277)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
    at com.sun.faces.application.view.FaceletPartialStateManagementStrategy.restoreView(FaceletPartialStateManagementStrategy.java:331)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:138)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:513)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142)
    at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3592)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2202)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2108)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1432)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:36:14.997

该问题是由 Apache Tomahawk 库引起的。一旦我删除了 Tomahawk JAR（幸运的是我可以不用它），问题就消失了。似乎 Tomahawk 和 PrimeFaces 不能很好地结合在一起，这是一种耻辱。截至今天（1.1.13），我正在使用最新的 Tomahawk JAR。

# c - 从函数中的数组参数存储指向文件范围内的数组的指针

> ID：11312756
> 
> 赞同：1
> 
> 时间：2012-07-03T14:10:45.717
> 
> 标签：c, misra

我正在重建一个应用程序以符合 MISRA 规则并使用 QA-C 来分析我的代码。

这些烦人的规则之一涉及指针和数组。你不能说：

```
char foo[10];
char * bar = &(foo[0]);

bar[5] = 'a'; 
```

你也不能这样做：

```
*bar = 'a';
bar++; 
```

我的问题涉及两个函数和一个文件范围变量。

最初此代码执行以下操作（类似于位伪代码）：

```
static char * bufferPtr;

static void foo_a(char * buffer /* other params */)
{
    bufferPtr = buffer;

    /* some logic goes here */
    switch()
    {
        case 'b':
           foo_b(/* some param */);
}

static void foo_b(/* parameters */)
{
    if (/*something*/)
    {
        /*  some logic */
        foo_c(/* data-param */);
        /* some logic */
    }
    else
    {
        /*  some logic */
        foo_c(/* data-param */);
        /* some logic */
    }
}

static void foo_c(char data)
{
    *buffer++ = data;
} 
```

我试图将其重写为以下内容：

```
static char (*bufferPtr)[];
static char bufferIndex;

static void foo_a(char buffer[] /* other params */)
{
    bufferPtr = &buffer;
    bufferIndex = 0;

    /* same */
}

static void foo_b(/* parameters */)
{
    /* same */
}

static void foo_c(char data)
{
    (*bufferPtr)[bufferIndex] = data;
    bufferIndex++;
} 
```

但是随后 misra 和我的编译器（softune，由 Fujitsu）都抱怨。编译器说：

> 从 CHAR (*)[]' 分配不兼容的指针类型`CHAR **' to`：运算符 `='

米斯拉 说：

> [C] 赋值的右操作数不是兼容的指针类型。导出到具有链接或更广泛范围的指针的自动对象的地址。

但是我确实需要能够在 foo_c 函数中索引一个数组。或者还有其他方法可以遵循 misra 并使我的代码正常工作。

如果我在同一个文件中执行以下操作：

```
static CHAR foo[10];
static CHAR (*bar)[];
static void f(void)
{
    bar = &foo;
} 
```

然后，Misra 和我的编译器都没有抱怨任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:19:46.847

这对我来说没有意义：

```
static char (*bufferPtr)[];
static char bufferIndex; 
```

我会这样：

```
static char *bufferPtr_new;
static int bufferIndex_new; 
```

并用 bufferPtr_new[bufferIndex_new] 替换每个 *bufferPtr 但根据 MISRA 的说法，也许可以向我们解释当前代码有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:45:01.787

不知道你是否会喜欢这个：

```
static char *(bufferPtr[10]); /* must have a size */
static char bufferIndex;

static void foo_a(char buffer[])
{
    *bufferPtr = buffer;
    bufferIndex = 0;
    /* etc */ 
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:11:44.870

```
static void foo_a(char * buffer /* other params */) 
```

该参数`buffer`是一个指针，而不是一个数组，因此试图将其视为其他地方的数组将会失败。

明智的做法是`foo_a`接受指向数组的指针（`char (*buffer)[N]`对于某些 N）或指向`struct`包含适当大小数组的指针。然后，您可以将静态分配给文件`char (*bufferPtr)[N]`或（更好地）通过调用链传递数组指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:23:30.657

> 这些烦人的规则之一涉及指针和数组。你不能说：....

```
char foo[10]; 
```

完全没问题，除了不允许的 char 类型。

```
char * bar = &(foo[0]); 
```

如果 foo 是用数组语法声明的，那很好。如果 foo 使用指针语法声明它违反规则 17.4。请参阅下文对规则 17.4 的修复。此外，括号没有任何意义，无论是对于 MISRA 还是出于其他原因。

```
bar[5] = 'a'; 
```

完全没问题。

```
*bar = 'a'; 
```

完全没问题。

```
bar++; 
```

规则 17.4 不允许这样做，该规则指出数组索引是唯一允许的指针算术形式。这确实是一个非常愚蠢的规则，我相信它会在下一个版本的 MISRA 中被删除。实际上，我曾经与委员会讨论过这条规则，除了化妆品之外，他们无法为这条规则提供任何理由。

解决方案是为该规则创建与 MISRA-C 的偏差，这就是大多数 MISRA 实现似乎所做的。不要只是盲目地遵循 MISRA。90% 的规则是好的，但也有一些奇怪的规则缺乏理由。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T10:05:45.673

我已更改此代码的流程，只将缓冲区参数传递给每个后续版本。

它很丑陋，但它可以工作并且有点安全。“根据米斯拉”

# math - 找到优化的旋转

> ID：11312758
> 
> 赞同：4
> 
> 时间：2012-07-03T14:10:51.303
> 
> 标签：math, rotation, quaternions

我有一个应用程序，我必须找到从一组 15 个排序器和索引 3D 点（X1、X2、...、X15）到另一组具有相同索引的 15 个点（1 个初始点对应于 1 个最终点）的旋转。

我已经阅读了很多关于使用欧拉角（对某些人来说是邪恶的）、四元数或在基轴上投影矢量来查找旋转的内容。但我有一个额外的限制：我的最后一组中的一些点可能是错误的（即坐标错误），所以我想区分那些要求旋转距离中值旋转很远的点。

我的问题是：对于每组 3 个点（未对齐的点）及其图像，我可以计算四元数（根据变换矩阵不是纯旋转的事实，我有一些额外的计算，但可以完成）。所以我得到了一组四元数（最多 455 个），我想删除错误的。

有没有办法找到远离平均旋转的旋转点？“平均值”和“标准偏差”对四元数有什么意义还是我必须计算欧拉角？一旦我有了一组“好的”四元数，我如何计算“平均”四元数/旋转？

干杯，

Ricola3D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:10:55.417

这里有2个问题：

*   您如何计算任意点数的“最佳拟合”？
*   如何决定接受哪些点，拒绝哪些点？

* * *

第一个的一般答案是“做[最小二乘](http://en.wikipedia.org/wiki/Least_squares)拟合”。四元数可能会比欧拉角更好；尝试以下操作：

```
foreach point pair (a -> b), ideal rotation by unit quaternion q is:
   b = q a q*   ->   q a - b q = 0 
```

因此，寻找适合的最小二乘`q`：

```
minimize sum[over i] of |q a_i - b_i q|^2
under the constraint:  |q|^2 = 1 
```

如上所述，除了约束之外，最小二乘问题是线性的，这应该比欧拉角公式更容易解决。

* * *

对于第二个问题，我可以看到两种方法：

*   如果你的点不是太远，你可以尝试运行所有点的最小二乘求解器，然后返回，抛出“异常值”（那些平方误差最大的点对），然后再试一次。
*   如果非常不一致的点导致上述过程无法进行，您可以尝试选择 3 或 4 对的随机小子集，并找到适合每个的最小二乘法。如果一大组这些结果具有相似的旋转且总误差较低，您可以使用它来识别“好”对（从而消除坏对）；然后返回并找到适合所有好对的最小二乘法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:26:02.867

在计算机视觉中，有一种称为[RANSAC](http://en.wikipedia.org/wiki/RANSAC)的技术可以执行您建议的操作。您将使用最小的点对应集来查找单个四元数/变换矩阵，而不是找到所有可能的四元数。然后，您将评估所有点的适合质量，丢弃那些不够适合的点。如果您没有足够的好匹配，那么您的原始集合中的匹配可能会很差。因此，您将放弃该尝试并重试。如果您确实获得了足够好的匹配，您将对所有内点进行最小二乘回归拟合以获得新的转换矩阵，然后迭代直到您对结果满意为止。

或者，您可以获取所有标准化四元数并找到它们之间的点积。点积应始终为正；如果不是针对任何给定的计算，您应该否定两个四元数之一的所有组件并重新计算。然后，您可以测量四元数之间的距离，并且可以聚类或寻找间隙。

# git - 如何在 git hook 中为某些人格式化提交消息？

> ID：11312760
> 
> 赞同：0
> 
> 时间：2012-07-03T14:10:59.713
> 
> 标签：git, format, hook, commit

人们应该以某种格式在提交消息中添加错误 ID，例如 [BUG33] [review leader=...] ...并不是每个提交者都必须遵循这个公式，我的意思是 scm 可以在提交消息中自由写入。我已经搜索过 commit-msg 钩子可能有助于实现它。任何人都可以给我一些类似的钩子示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:52:27.030

这本书 progit 有一个很好的例子，包括服务器端和客户端。您可以[在此处找到一些示例。](http://git-scm.com/book/en/v2/Customizing-Git-An-Example-Git-Enforced-Policy)取自该链接并适应您的提交消息的一个示例是：

```
#!/usr/bin/env ruby

$refname = ARGV[0]
$oldrev  = ARGV[1]
$newrev  = ARGV[2]
$user    = ENV['USER']

puts "Enforcing Policies... \n(#{$refname}) (#{$oldrev[0,6]}) (#{$newrev[0,6]})"
$regex = /\[BUG: (\d+)\]/

# enforced custom commit message format
def check_message_format
  missed_revs = `git rev-list #{$oldrev}..#{$newrev}`.split("\n")
  missed_revs.each do |rev|
    message = `git cat-file commit #{rev} | sed '1,/^$/d'`
    if !$regex.match(message)
      puts "[POLICY] Your message is not formatted correctly"
      exit 1
    end
  end
end
check_message_format 
```

这应该拒绝其消息未使用字符串“BUG：”后跟数字（可能来自您的问题跟踪系统）格式化的任何提交。

# php - 如何根据条件加载动态 CSS 文件

> ID：11312765
> 
> 赞同：1
> 
> 时间：2012-07-03T14:11:07.673
> 
> 标签：php, css, dynamic

我有一个 index.php 文件，它根据条件加载（需要）2个不同的文件。

访问此链接将导致；

mysite.com/index.php 将加载 stats.php (require("stats.php");)

访问此链接将导致；

mysite.com/index.php?auth="jgbsbsbasm" 将加载 encry.php ( `require("stats_encry.php");`)

完成此代码：

```
<?php

if(isset($_GET['auth'])) require("stats.php");
else require("stats_encry.php");

?> 
```

这工作正常。现在我的问题是；我在标题中有一个静态的 CSS 文件；

```
<link rel="stylesheet" href="cv.css"> 
```

我现在想要的是分别为 stats.php 加载 cv.css 文件和为 stats_encry.php 加载 cv1.css 文件。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:17:18.110

在您的标题中替换

```
<link rel="stylesheet" href="cv.css"> 
```

和

```
<?php if(isset($_GET['auth'])){ ?>
    <link rel="stylesheet" href="cv.css">
<?php } else { ?>
    <link rel="stylesheet" href="cv1.css">
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T15:46:36.550

您可以像下面的语法一样使用它

```
<?php 
 if(isset($_GET['auth'])){ 
    echo '<link rel="stylesheet" href="cv.css">';
 } else {
    echo '<link rel="stylesheet" href="cv1.css">';
 }
 ?> 
```

# android - 如何解决此 ListView 错误？

> ID：11312770
> 
> 赞同：0
> 
> 时间：2012-07-03T14:11:16.010
> 
> 标签：android

我正在使用自定义适配器向列表视图显示图像和文本，当我第一次运行活动时它显示正常，但是当我导航到另一个活动并更改值时，当我回到我的列表视图活动时它崩溃了. 它在日志中给了我以下错误-

```
(07-03 08:53:15.456: E/AndroidRuntime(574): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification.
Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class stevey.sadc.system101.MobileArrayAdapter)]) 
```

这是我的代码：

```
public class System101Activity extends ListActivity implements OnClickListener {
    public static final String S101 = null;
    private Button btnLogout,btnSignin,btnRegister;
    private TextView txtSharedName;
    public static final ArrayList<String> BookImages = new ArrayList<String>();
    public static final ArrayList<String> BookNames = new ArrayList<String>();
    public static boolean LogedIn = true;
    final Context context = this;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.storemain);
        this.btnLogout = (Button) findViewById(R.id.btnSignout);
        this.btnRegister = (Button) findViewById(R.id.btnSignUp);
        this.btnSignin = (Button) findViewById(R.id.btnSignIn);
        this.btnRegister.setOnClickListener(this);
        this.btnSignin.setOnClickListener(this);
        this.btnLogout.setOnClickListener(this);
        //txtSharedName = (TextView) findViewById(R.id.textviewLogName);
        ///////////////////////////New List//////////////////////////////////////////
        /*if(LogedIn){
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
        String sharedUsername = settings .getString("Sharedusername","null");
        txtSharedName.setText(sharedUsername);
        }else{
            this.btnLogout.setClickable(false);
        }*/
       Log.d("Logged IN", " "+LogedIn); 
        JSONObject json = JSONfunctions.getJSONfromURL("http://10.0.2.2/php/prrrrrrrrr.php");
           // http://api.geonames.org/earthquakesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&username=demo  
          BookNames.clear();
          BookImages.clear();
        try{

                JSONArray  earthquakes = json.getJSONArray("books");

                for(int i=0;i<earthquakes.length();i++){                        

                    JSONObject e = earthquakes.getJSONObject(i);

                    String BookName = e.getString("bookname");
                    BookNames.add(BookName);
                    String BookImg = e.getString("imageurl");
                    BookImages.add(BookImg);
                }       
            }catch(JSONException e){
                 Log.e("log_tag", "Error parsing data "+e.toString());
            }   

            setListAdapter(new MobileArrayAdapter(this, BookNames,BookImages));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        //get selected items
        String selectedValue = (String) getListAdapter().getItem(position);
        Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();
        Intent moreDetailsIntent = new Intent(System101Activity.this,MoreBookDetails.class);

        Bundle dataBundle = new Bundle();
        dataBundle.putString("SelectedBook", selectedValue);
        moreDetailsIntent.putExtras(dataBundle);
        startActivity(moreDetailsIntent);
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()){
        case R.id.btnSignUp:
            Intent signupIntent = new Intent(this,RegisterActivity.class);
            startActivity(signupIntent);
            break;
        case R.id.btnSignIn:
            Intent signinIntent = new Intent(this,SignInActivity.class);
            startActivity(signinIntent);
            break;
        case R.id.btnSignout:
///////////////////////////// Creating Alert Dialog/////////////////////////
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
context);

//set title
alertDialogBuilder.setTitle("LogOut");

//set dialog message
alertDialogBuilder
.setMessage("Are You Sure!")
.setCancelable(false)
.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int id) {
// if this button is clicked, close
// current activity
//LogedIn = false;

    LogedIn = false;
Intent tabIntent = new Intent(System101Activity.this,MyTabs.class);
startActivity(tabIntent);
//Sign.this.finish();
}
})
.setNegativeButton("No",new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int id) {
// if this button is clicked, just close
// the dialog box and do nothing
dialog.cancel();
}
});

// create alert dialog
AlertDialog alertDialog = alertDialogBuilder.create();

// show it
alertDialog.show();
////////////////////////////////////////////////////////////////////////////
        }
    }   

} 
```

这是我的适配器。

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] myBookNamelist = null;
    private ArrayList<String> MyBooks = new ArrayList<String>();
    private ArrayList<String> myBookImageurl = new ArrayList<String>();
     //ArrayList<HashMap<String, String>> myBookNamelist = new ArrayList<HashMap<String, String>>();
     //ArrayList<HashMap<String, String>> myBookImageurl = new ArrayList<HashMap<String, String>>();

    public MobileArrayAdapter(Context context,ArrayList<String> Bname,ArrayList<String> BUrl) {
        super(context, R.layout.mylist, Bname);
        this.context = context;
        this.MyBooks = Bname;
        this.myBookImageurl = BUrl;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.mylist, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(MyBooks.get(position));
        Bitmap bitmap = null;
        // Change icon based on name
        JSONObject json = JSONfunctions.getJSONfromURL("http://10.0.2.2/php/prrrrrrrrr.php");
           // http://api.geonames.org/earthquakesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&username=demo  
            try{

                JSONArray  earthquakes = json.getJSONArray("books");

                //for(position=0;position<earthquakes.length();position++){
                    JSONObject e = earthquakes.getJSONObject(position);
                    String BB = e.getString("bookname");
                    MyBooks.add(BB);

                    String UU = e.getString("imageurl");
                    myBookImageurl.add(UU);

                //}

            }catch(JSONException e){
                 Log.e("log_tag", "Error parsing data "+e.toString());
            }

            String s = MyBooks.get(position);
            String i = myBookImageurl.get(position);

            System.out.println(s);
            System.out.println(i);

            try {
                bitmap = BitmapFactory.decodeStream((InputStream)new URL(i).getContent());
                imageView.setImageBitmap(bitmap);
            } catch (MalformedURLException err) {
                // TODO Auto-generated catch block
                err.printStackTrace();
            } catch (IOException err) {
                // TODO Auto-generated catch block
                err.printStackTrace();
            }

            System.out.println("Bitmap image: "+position+"="+bitmap);

        return rowView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:19:00.637

从您的第二个活动开始，当您的数据集发生更改时，发送广播通知。

在您的主要活动中，注册一个广播接收器以侦听这些更改，并调用 mListViewAdapter.notifyDataSetChanged() 以重新加载列表视图。

# c# - 图形复选框的控制模板

> ID：11312771
> 
> 赞同：0
> 
> 时间：2012-07-03T14:11:23.147
> 
> 标签：c#, wpf, xaml

在我得到的资源上

```
 <ControlTemplate TargetType="Label" x:Key="GraphicalCheckBox">
            <Label Name="TickImage"/>
            <ControlTemplate.Triggers>
                <Trigger Property="Tag" Value="True">
                    <Setter TargetName="TickImage" Property="Background" Value="{DynamicResource ContractApprovedGreen}" />
                </Trigger>
                <Trigger Property="Tag" Value="False">
                    <Setter TargetName="TickImage" Property="Background" Value="{DynamicResource Close}" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate> 
```

在我看来，我得到了

```
<Label x:Name="COC" Template="{StaticResource GraphicalCheckBox}" Tag="{Binding Bill20IsValid}" Width="100" Height="100" Background="Gray" /> 
```

当我将 Bill20IsValid 更改为`True`然后`TextBox`更改为`True`但标签未更新为 时`ContractApprovedGreen`，`ContractApprovedGreen`在其他代码位置上工作正常，我确信这段代码在几个月前工作。

为什么我的`GraphicalCheckBox`模板不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:08:09.117

我不知道为什么 Trigger 不起作用，但 DataTrigger 对我有用：

```
<DataTrigger Binding="{Binding Tag, RelativeSource={RelativeSource Self}}" Value="True">
    <Setter TargetName="TickImage" Property="Background" Value="Green" />
</DataTrigger> 
```

# hibernate - 从 ajax 调用中获取 null 值

> ID：11312774
> 
> 赞同：0
> 
> 时间：2012-07-03T14:11:27.210
> 
> 标签：hibernate, select, struts2, dojo, null

从 ajax 调用中获取**空值（** **FirstList.java**）...第一个列表正在正确加载。需要帮助，我是 struts2 和休眠的新手。

学生注册.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="/struts-tags" prefix="s"%>
<%@taglib uri="/struts-dojo-tags" prefix="sx"%>

<html>
<head>
    <sx:head />
    <title>Student Registration</title>
</head>

<script>
function show_details() {
dojo.event.topic.publish("show_detail");
}
</script>

<body>
    <s:form id="form1" name="form1" action="StudentRegister" method="post" enctype="multipart/form-data" theme="simple">
    <s:hidden name="id" />
    <table border="0">
    ...

    <tr>
    <td><s:label value="Course " for="course" /></td>

    <td><s:select name="course" list="courseList" onchange="javascript:show_details();return false;" /></td>
    </tr>
    <tr>
    <td colspan="2"><s:url id="durl" action="secload" /><sx:div showLoadingText="" id="details" href="%{durl}" listenTopics="show_detail"  formId="form1" ></sx:div></td>  
    </tr>

    <tr>
    <td align="center" colspan="2"><s:submit /></td>
    </tr>
    </table>
    </s:form>
</body>
</html> 
```

细节.jsp

```
<%@taglib uri="/struts-tags" prefix="s"%>
<%@taglib uri="/struts-dojo-tags" prefix="sx"%>
<table border="0" width=100%>
<s:if test="branchList != null">
<tr><td><s:select name="branch" list="branchList" label="Branch"></s:select></td></tr></s:if>
<s:if test="semList != null">  
<tr><td><s:select name="sem" list="semList" label="Semester" /></td></tr></s:if>
</table> 
```

FirstList.java

```
package bharat;

    public class FirstList extends ActionSupport {
        private String course;
        private Map<Integer,Integer> semList=null;
        private Map<String, String> branchList=null;

        public String execute() throws Exception
        {
            populateTwo(getCourse());
            return SUCCESS;
        }

        public void populateTwo(String id1)
        {
                    // Get null value for id1
            System.out.println (id1);

            if(id1!=null&&!id1.equals(""))
            {
            semList=new HashMap<Integer,Integer>();
            branchList=new HashMap<String,String>();
            if (id1.equalsIgnoreCase("B.Tech.")||id1.equalsIgnoreCase("M.Tech.")) {  
                branchList.put("CSE","CSE");
                branchList.put("ECE","ECE");
                branchList.put("MAE","MAE");
                branchList.put("CHE","CHE");
                branchList.put("CVE","CVE");
                branchList.put("IT","IT");
                } else if (id1.equalsIgnoreCase("MCA")) {  
                    branchList.put("CS","CS");
                    branchList.put("EC","EC");
                    branchList.put("MA","MA");
                    branchList.put("CIV","CIV");
                    branchList.put("IT","IT");
                }
                else{branchList.put("None","None");}
            if (id1.equalsIgnoreCase("B.Tech.")||id1.equalsIgnoreCase("Bio.Tech.")) {  
            semList.put(1,1);  
            semList.put(2,2);  
            semList.put(3,3);  
            semList.put(4,4);  
            semList.put(5,5);
            semList.put(6,6);
            semList.put(7,7);
            semList.put(8,8);
            setSemList(semList);
            } else if (id1.equalsIgnoreCase("M.Tech.")) {  
                semList.put(1,1);  
                semList.put(2,2);  
                semList.put(3,3);  
                semList.put(4,4);
            } else {  
                semList.put(1,1);  
                semList.put(2,2);  
                semList.put(3,3);  
                semList.put(4,4);  
                semList.put(5,5);
                semList.put(6,6);
            }
            }
        }

        public String getCourse() {
            return course;
        }
        public void setCourse(String course) {
            this.course = course;
        }
        public Map<Integer,Integer> getSemList() {
            return (this.semList); 
        }
        public void setSemList(Map<Integer,Integer> semList) {
            this.semList = semList; 
        }
        public void setBranchList(Map<String, String> branchList) {
            this.branchList = branchList;
        }

        public Map<String, String> getBranchList() {
            return branchList;
        }
    } 
```

Struts.xml

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="default" extends="hibernate-default">
    ...
    <action name="StudentRegister" class="bharat.RegistrationAction">
          <interceptor-ref name="defaultStackHibernate">
        <param name="fileUpload.allowedTypes">image/png,image/gif,image/jpeg</param>
        </interceptor-ref>
        <result name="input">/jsp/StudentRegistration.jsp</result>
        <result name="success">/jsp/success2.jsp</result>
    </action>
    **<action name="linkStudentRegister" method="populateOne" class="bharat.RegistrationAction">
        <result name="success">/jsp/StudentRegistration.jsp</result>
    </action>
    <action name="secload" class="bharat.FirstList">
        <result name="success">/jsp/Detail.jsp</result>
    </action>**
    </package>
</struts> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>CourseRegistrationModule</display-name>
  <filter>
        <filter-name>struts2</filter-name>
        <filter-class>
            org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

注册动作.java

```
package bharat;

public class RegistrationAction extends ActionSupport implements ModelDriven<Register>,ServletRequestAware {

    private Register register = new Register();
    private RegisterDAO registerDAO = new RegisterDAOImpl();
    private HttpServletRequest servletRequest;
    private Map<String,String> courseList= null;

    public String populateOne()
    {
        System.out.println ("populateone");
        courseList=new HashMap<String,String>();
        courseList.put("B.Tech.","B.Tech.");
        courseList.put("M.Tech.","M.Tech.");
        courseList.put("MCA","MCA");
        courseList.put("Bio.Tech.","Bio.Tech.");
        return SUCCESS;
    }

    public Map<String,String> getCourseList() {
        return (this.courseList); 
    }
    public void setCourseList(Map<String,String> courseList) {
        this.courseList = courseList; 
    }

    @Override
    public Register getModel() {
        //TODO
        return register;
    }
    @Override 
    public void setServletRequest(HttpServletRequest servletRequest) {
        this.servletRequest = servletRequest;
    }

    public String execute() {

        ...
        return SUCCESS;
    }

    public Register getRegister() {
        return register;
    }

    public void setRegister(Register register) {
        this.register = register;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:09:05.843

最后，我通过将隐藏标签的名称更改为 id1....

# asp.net - 如何在按钮单击上获取行值

> ID：11312775
> 
> 赞同：0
> 
> 时间：2012-07-03T14:11:30.277
> 
> 标签：asp.net, button, repeater

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1"
  OnItemDataBound="Repeater1_ItemDatabound">
    <ItemTemplate>
      <tr>
        <td>
          <%#Eval("Priority") %>
        </td>
        <td>
        <%#Eval("ProjectName") %>
        </td>                 
        <td>
          <%#Eval("DisplayName") %>
        </td>
        <td>
          <asp:HyperLink ID="HyperLink1" runat="server"
            NavigateUrl='<%# Eval("EmailID" , "mailto:{0}") %>'
            Text='<%# Eval("EmailID") %>'></asp:HyperLink>
        </td>
        <td>
          <%#Eval("ProjectID") %>
        </td>
        <td>
          <asp:Button ID="btnCompleteProject" runat="server" Text="Close Project"
            OnCommand="CloseProject"  CommandName="Close"
            CommandArgument='<%# Eval("ProjectID") %>' /> 
```

如何获取单击关闭 Project Button(btnCompleteProject) 所在行的 ProjectID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:16:38.150

您可以将[ItemCommand 事件](http://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFsQFjAA&url=http://msdn.microsoft.com/pt-br/library/system.web.ui.webcontrols.repeater.itemcommand.aspx&ei=K_7yT9ipIYjH0QHdwuHyCQ&usg=AFQjCNFLG3qIXZc5ywLySaCQFlAIENHxfw&sig2=z795QAVFg7-pGTT7BjKwhg)添加到转发器控件并添加类似这样的 cole：

```
public void Repeater1_ItemCommand(Object Sender, RepeaterCommandEventArgs e) 
{
    // check if the command name is close (if it's the button)
    if (e.CommandName == "Close") {
       // get CommandArgument you have seeted on the button
       int projectd = (int)e.CommandArgument;

       // your code here...

    }
} 
```

并添加转发器标签，您的事件：

```
<asp:Repeater ID="Repeater1" 
   runat="server" 
   DataSourceID="SqlDataSource1" 
   OnItemDataBound="Repeater1_ItemDatabound" 
   OnItemCommand="Repeater1_ItemCommand">
...
</asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:14:57.567

添加`OnClick="btnCompleteProject_Click"`到按钮标记，并添加一个处理程序：

```
protected void btnCompleteProject_Click(object sender, EventArgs e)
{
    var argValue = (int)((Button)sender).CommandArgument;
} 
```

您还可以收听Repeater.ItemCommand，它也应该捕捉到按钮的点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:00:01.397

Brian Mains 的回答是正确的，在标记中，您在按钮命令参数中设置 ProjectID 列的值。所以在按钮中点击这段代码

```
protected void btnCompleteProject_Click(object sender, EventArgs e)
 {
   var argValue = (int)((Button)sender).CommandArgument;
 } 
```

您将获得 ProjectID

# android - Android无法运行单元测试

> ID：11312786
> 
> 赞同：1
> 
> 时间：2012-07-03T14:12:05.720
> 
> 标签：android, android-build, android-testing

我正在尝试在 Mac 上为 Android 编写单元测试脚本。我能够通过 Eclipse 运行它，但需要能够自动化一切。

创建我正在运行的项目

```
~/workspace$ android create test-project -m ../ -p ROAMpayX/tests -n ROAMPayTest 
```

我正在尝试运行以下命令

```
adb shell am instrument -w com.roamdata.roampayx/android.test.InstrumentationTestRunner 
```

并不断收到以下错误（我的测试文件夹中的 AndroidManifest.xml 给了我）

> INSTRUMENTATION_STATUS: id=ActivityManagerService INSTRUMENTATION_STATUS: Error=Unable to find instrumentation info for: ComponentInfo{com.roamdata.roampayx/android.test.InstrumentationTestRunner} android.util.AndroidException: INSTRUMENTATION_FAILED: com.roamdata.roampayx/android.test.InstrumentationTestRunner INSTRUMENTATION_STATUS_CODE : -1 在 com.android.commands.am.Am.run(Am.java:118) 在 com.android.commands.am 的 com.android.commands.am.Am.runInstrument(Am.java:616)。 Am.main(Am.java:81) 在 com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method) 在 com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235) 在 dalvik.system。 NativeStart.main（本机方法）

显然，这是某种路径问题。有什么我想念的吗？我尝试从 mainproject 文件夹和 testsproject 文件夹运行命令。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T16:52:57.470

`adb`在运行命令之前，您是否构建并安装了测试项目？您可以使用 ant 使用以下命令轻松完成此操作：

```
ant debug install test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:56:11.230

> 找不到仪器信息：ComponentInfo{com.roamdata.roampayx/android.test.InstrumentationTestRunner}

它说在 com.roamdata.roampayx 内找不到 android.test.InstrumentationTestRunner

为什么不使用 ant [http://developer.android.com/tools/testing/testing_otheride.html](http://developer.android.com/tools/testing/testing_otheride.html)进行测试运行？是特定目的吗？

如果您使用 ant，您可以从[https://github.com/inazaruk/robomorphine-testrunner/wiki](https://github.com/inazaruk/robomorphine-testrunner/wiki)获取一些想法或 ant 任务，但现在可能是开销。

# javascript - 为什么 jQuery 不是 W3C 标准？

> ID：11312787
> 
> 赞同：5
> 
> 时间：2012-07-03T14:12:07.527
> 
> 标签：javascript, jquery, standards, w3c

我已经阅读并听说 jQuery***不是***W3C 标准，但同时我找不到它的原因。任何带有推理的解释都值得赞赏。

**编辑：**好的，也许我应该改写/改写我原来的问题。实际上，我脑海中的问题是——`Does jQuery follow W3C standards?`但在发布时，它只是被改写了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T14:14:31.817

已经有用于选择和操作元素的 W3 标准，jQuery 只是一个促进这一点的库。换句话说，jQuery 可以用普通的 JavaScript 做所有事情，所以没有理由让它成为任何标准。

至于编辑后的版本“jQuery 是否遵循 W3C 标准”，答案是否定的。它使用非标准的属性和方法，如innerHTML，以及一些特定于浏览器的属性。尽管它以一种有用的方式做到这一点，并创建了一个“抽象层”，帮助开发人员轻松访问这些属性而不必担心浏览器兼容性，但 jQuery 仍然违反某些标准。

# php - 在html中插入php生成的文本

> ID：11312791
> 
> 赞同：0
> 
> 时间：2012-07-03T14:12:19.077
> 
> 标签：php

我们可以做的

```
<img src="page.php" /> 
```

显示在 php 中生成的图像。

我怎样才能`<div src="page.php" ></div>`显示在 php 中生成的文本？

PS：我知道我们可以做到`<?php echo ""; ?>`，但我的目标是向人们展示它来自 php，而不是修改 html 内容（仅在内存中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:16:53.373

没有javascript：`<iframe src="page.php"></iframe>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:25:01.747

```
<iframe src="page.php"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:15:59.507

您可以使用 jquery 和 ajax 将 php 生成页面加载到 div 中。

```
<div id="result"></div> 
```

然后调用javascript加载它。

```
$(document).ready(function(){
    $('#result').load('page.php');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:17:24.117

你可以做

```
<div><?php include('somefile.php') ?></div> 
```

在 somefile.php 中，您将拥有：

```
<?php
     echo "Some Text";
?> 
```

# css - CSS Child Div 用边框和边距填充父级的 100%

> ID：11312793
> 
> 赞同：0
> 
> 时间：2012-07-03T14:12:20.453
> 
> 标签：css

我整个上午都在寻找和尝试解决这个问题但没有成功，所以我想我会发表自己的帖子来了解为什么我不能让我的 3 个孩子 DIV 有一个相同的未指定高度（基于他们的父母）。

我需要有 3 列，其父级的 100% 高度，每个子 div 周围的边框和每个子 div 之间的边距。

到目前为止，这是我使用代码的地方：

HTML

```
<div class="outer">
    <div class="col1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin gravida dictum odio accumsan aliquam.</div>
    <div class="col2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin gravida dictum odio accumsan aliquam. Curabitur tortor tortor, sodales vitae adipiscing vitae, tristique in sapien. Aenean interdum hendrerit quam, at semper risus pharetra ut. Morbi metus ipsum, sagittis ac rutrum faucibus, suscipit ut mauris. Nam eu felis felis. Nam et mi sit amet nisl euismod pharetra vitae id orci.</div>
    <div class="col3">Etiam ornare nibh non odio porta congue.</div>
</div> 
```

CSS

```
.outer {
position:relative; 
height:auto; 
width:900px; 
}

.col1{
float: left;
    position:relative; 
min-height:100%; 
width:200px; 
margin-right: 10px;
border: 1px solid black;
}

.col2{
float: left;
    position:relative; 
min-height:100%; 
width:200px; 
margin-right: 10px;
border: 1px solid black;
}

.col3{
float: left;
    position:relative; 
min-height:100%; 
width:200px; 
border: 1px solid black;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:20:14.660

将您的外部 div 高度形式自动更改为类似的东西`400px`，它会起作用。

这是给你的小提琴..

[http://jsfiddle.net/vbEXB/3/](http://jsfiddle.net/vbEXB/3/)

相关讨论在这里..

[将 div 高度设置为父级的 100%](https://stackoverflow.com/questions/1664735/set-div-height-to-100-of-parent)

**编辑**：

和

对以下问题的回答为您提供了不涉及固定高度的纯 CSS 解决方案（因此它涵盖了 99% 的情况:)）

[如何在不指定父母高度的情况下将子 Div 强制为父母 Div 的 100%？](https://stackoverflow.com/questions/1122381/how-to-force-child-div-to-100-of-parents-div-without-specifying-parents-heigh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:18:00.270

如果没有 jQuery/JavaScript，我永远无法弄清楚如何做到这一点。据我所知，这对于严格的 CSS 和 HTML 是不可能的。您可能必须使用 jQuery。查看提供的链接。这应该为您指明正确的方向。

[http://www.jainaewen.com/files/javascript/jquery/equal-height-columns.html](http://www.jainaewen.com/files/javascript/jquery/equal-height-columns.html)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:21:01.330

如果没有指定父级的高度，这是一项非常艰巨的工作。对于包括边框和边距，您可以使用

```
box-sizing:border-box; 
```

根据您的用例，尝试将 table-layout 作为 div 上的显示属性。如果您知道父级的高度，请设置一个高度。或者尝试使用绝对定位的布局并指定所有边（例如`position:absolute;left:0;top:0;bottom:0;right:33%;`左列）。为此，您本身不需要 javascript，但这取决于您要实现的目标。

SO上有很多关于相等列布局的问题。我相信你会通过搜索找到答案。

如果你觉得很花哨，你可能想使用带有糟糕[IE 支持的](http://caniuse.com/#search=flex)flex-box，但它完全可以实现你想要的，而不需要模糊。查看更多信息：

*   [关于 HTML5Rocks 的文章](http://www.html5rocks.com/en/tutorials/flexbox/quick/)
*   [w3cspec](http://www.w3.org/TR/css3-flexbox/)

# ssis - 执行 SSIS 包

> ID：11312797
> 
> 赞同：0
> 
> 时间：2012-07-03T14:12:36.823
> 
> 标签：ssis

我刚刚开始学习 SSIS 包，如果我的查询的答案对您来说很明显，请耐心等待 :-)

我有一个 SSIS 包，需要安装在不同的环境中，如 DEV/SYSTEST/DTE/LIVE。请注意，每个环境中的 SQL Server 连接字符串都不同 - 因此需要不同的配置文件。

我想部署它的方式是

*   为不同的环境创建单独的包配置文件
*   创建一个环境变量“MyPackageConfigPath”来保存配置文件的路径。
*   使用带有 /ConfigFile 开关的 DtExec 命令运行包

我的问题：

*   这是在不同环境中部署 SSIS 包的好方法吗？
*   在这种情况下执行包的任何其他更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:02:51.373

假设 2005-2008 R2 或 2012 使用 Package Deployment Model，您的配置选项是

1.  父包
2.  注册表值
3.  环境变量
4.  命令行分配
5.  XML 文件
6.  数据库表

您通常可以将它们分组为单值配置 (1-4) 和多值配置 (5-6)。所有这些都有利有弊，但我发现将数据库表作为我的主要配置存储库是我的最佳体验。我所有的值都存储在给定环境中，因此每个环境（开发、测试、负载、阶段、产品）服务器都有一个专用目录，其中包含一个用于配置的表（以及日志记录和其他 ETL 特定的东西）

## 表法

如果你不喜欢我的桌子，你可以自己创建或让 BIDS/SSDT 来做。

```
CREATE TABLE dbo.SSISConfig
(
    id identity(1,1) NOT NULL PRIMARY KEY
,   ConfigurationFilter nvarchar(150) NOT NULL -- Package Name
,   ConfiguredValue nvarchar(255) NULL -- Value of setting, such as a connection string
,   PackagePath nvarchar(255) NOT NULL -- Target within SSIS package where value is written
,   ConfiguredValueType nvarchar(20) NOT NULL -- Data type such as String, Int32, or DateTime
) 
```

DEV 服务器上的示例如下所示

```
id  | ConfigurationFilter| ConfiguredValue                                                                         | PackagePath                                              | ConfiguredValueType
100 | Default.2005.Sales | Data Source=DEV;Initial Catalog=SALESDEVDB;Provider=SQLNCLI.1;Integrated Security=SSPI; | \Package.Connections[SLSDB].Properties[ConnectionString] | String 
```

生产中的同一行看起来像

```
id  | ConfigurationFilter| ConfiguredValue                                                                          | PackagePath                                              | ConfiguredValueType
123 | Default.2005.Sales | Data Source=PROD;Initial Catalog=SALESPRODB;Provider=SQLNCLI.1;Integrated Security=SSPI; | \Package.Connections[SLSDB].Properties[ConnectionString] | String 
```

我们有配置部署脚本，将部署到的服务器考虑在内以处理数据库和服务器名称更改，因此只需维护一个脚本。我发现 XML 文件在这种情况下更难保持同步（废话，我们忘记更新生产的配置文件并且我们提取了错误的数据）。

## 诀窍

正如您在第二个项目符号中所指出的那样，实现这项工作的技巧是您需要某种机制来告诉 SSIS 使用一组不同的配置。如果您没有多实例机器，那么我发现使用环境变量是一种很好的方法。每个执行包的服务器定义一次，你就完成了。如果您在多实例环境中工作，那么情况就会变得更加棘手。

我虽然 HLGEM 有一个相当聪明的方法，即在多实例环境中使用具有本地环境变量的不同服务帐户[。](https://stackoverflow.com/questions/11157180/dynamically-changing-server-names-in-ssis)您可以向下滚动以查看我在多实例机器上的方法。

我涵盖配置的各种答案

*   [在 SSIS 中动态更改服务器名称](https://stackoverflow.com/questions/11157180/dynamically-changing-server-names-in-ssis/11158890#11158890)
*   [在不同时间执行具有不同参数的同一个 SSIS 包](https://stackoverflow.com/questions/8384850/executing-the-same-ssis-package-with-different-parameters-at-different-time/8386338#8386338)
*   [覆盖 SSIS 环境变量](https://stackoverflow.com/questions/10822347/overridding-ssis-environment-variable/10822625#10822625)
*   [如何修改 SSIS 中的变量？](https://stackoverflow.com/questions/9064438/how-to-modify-the-variable-in-ssis/9066670#9066670)
*   [如何通过命令行执行dtsx包](https://stackoverflow.com/questions/8787007/how-to-execute-dtsx-packages-through-command-line/8790987#8790987)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:00:58.893

最好的答案是适合您情况的答案。不是非常有帮助，但是，你有它。我不明白为什么您的解决方案不起作用。

有些地方对在生产机器上添加环境变量有点挑剔。如果你能做到这一点，没有问题。如果没有，您能否将配置文件放在每台机器上的同一位置并硬编码该位置？另外，在部署时无需担心这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:25:04.137

我不喜欢摆弄环境变量，而且我发现在包配置中使用“SQL Server”配置元素更容易。它在您选择的数据库中创建预定义结构的配置表。该数据库甚至可能是服务器“localhost”上的“config123”。我就是做这个的。然后，我将该配置数据库保存在本地开发机器和服务器上，但配置条目的值不同。这意味着该软件包在我开发时使用我的本地配置设置，并在由服务器运行时自动使用生产服务器配置。:-)

我们还将包保存在 msdb 中（DeploymentManifests 由 Visual Studio 创建，没什么大不了的）并让 SQL Server 代理定期运行这些包。这使得部署更改变得非常容易。只需将更新的包部署到 msdb 中即可。

# c# - System.ComponentModel - 忽略属性

> ID：11312800
> 
> 赞同：3
> 
> 时间：2012-07-03T14:12:48.107
> 
> 标签：c#, asp.net, .net

我在 ASP.NET 中创建自定义 UserControl，并使用 System.ComponentModel.Attributes 用不同的东西装饰属性。默认情况下，ASP.NET 显示所有公共 GET；在 ASPX 页面的属性窗口中设置控件的属性。我可以使用什么属性来忽略某些属性？

我试图在[http://msdn.microsoft.com/en-us/library/system.componentmodel.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.aspx)页面上找到与“忽略”相关的内容，但没有找到任何内容。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T14:15:56.473

你需要[BrowsableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.aspx)

> 指定是否应在“属性”窗口中显示属性或事件。

```
[Browsable(false)]
public int MyProperty { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:14:57.083

您应该能够隐藏带有属性的[`[Browsable]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.aspx)属性。

> 指定是否应在“属性”窗口中显示属性或事件。

# php - 我如何检查我的数据库是否存在？

> ID：11312805
> 
> 赞同：0
> 
> 时间：2012-07-03T14:12:53.847
> 
> 标签：php, zend-framework, zend-db

在我的 zf 应用程序中，我有基本模型类 Application_Model，它连接到数据库并将连接存储在注册表中。部分代码：

```
$db = Zend_Db::factory($registry['config']->$databaseAlias->db->adapter, $registry['config']->$databaseAlias->db->config->toArray());
        $db -> query('SET NAMES ' . $registry['config']->$databaseAlias->db->config->setnames);
        $db -> setFetchMode(Zend_Db::FETCH_OBJ);
        Zend_Registry::set('db', array($databaseAlias=>$db)); 
```

如果 mysql 服务器关闭，则 `$db -> query('SET NAMES ' . $registry['config']->$databaseAlias->db->config->setnames);`抛出异常。那不是我想要的。实际上我想以某种方式检查，如果我的数据库死了 - 做一些动作；有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:15:17.370

您可以在 db 调用周围抛出一个 try/catch，如果它进入 catch，请执行您想要的操作

```
try
{
    $db = Zend_Db::factory(
        $registry['config']->$databaseAlias->db->adapter,
        $registry['config']->$databaseAlias->db->config->toArray()
    );
    $db -> query('SET NAMES ' . $registry['config']->$databaseAlias->db->config->setnames);
    $db -> setFetchMode(Zend_Db::FETCH_OBJ);
    Zend_Registry::set('db', array($databaseAlias=>$db));
} catch( \Exception $e ) {
    // Database query failed, do logic here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:15:39.307

使用 try/catch 块进行反复试验！ [http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

# javascript - 在查找期间显示隐藏的文本

> ID：11312808
> 
> 赞同：10
> 
> 时间：2012-07-03T14:13:08.653
> 
> 标签：javascript, html

我有一个包含几列的数据表。其中之一是具有不同长度文本的评论列。有些评论很短，但有些评论可能很长。现在我只显示评论的前 50 个字符，并将原始文本放入“标题”属性中，以便用户仍然能够阅读整个值。

通过截断字符串，表格看起来没问题，但现在用户无法在被截断的其余文本中找到（浏览器中的 CTRL+F）任何内容。

所以我的想法是让整个注释隐藏在源代码中，但对浏览器的查找机制可见。有可能吗？你们有什么建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T22:50:10.660

简单/有趣的解决方案：

将评论容器 CSS 设置为`overflow:hidden;`or `overflow:scroll;`，并根据需要设置容器的宽度和高度。应该只为用户显示部分文本，但浏览器可以完全阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:20:25.950

我无法想象没有肮脏的技巧是可能的，比如 font-size:0.1px 之类的。您可以为您的用户提供显示全尺寸文本的选项或为此实现您自己的搜索功能。为什么用户应该期望使用本机搜索引擎对他不存在的数据的结果。您可以绑定到 CTRL-F 但也许有人更改了键绑定或正在使用菜单，所以这对我来说是一个死胡同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:19:13.300

好吧，想一想……当你使用查找功能时，浏览器会做什么？它滚动到找到的文本并选择它。如果文本不可见，这怎么可能？我想不出有什么办法。我能想到的唯一选择是实现您自己的查找功能，覆盖浏览器的。它会像浏览器一样查看发布的评论并找到文本，除了它能够查看隐藏的文本*并*可能扩展它。至于究竟如何覆盖浏览器的查找，也许你可以绑定到 Ctrl+F，在那个绑定中，`return false`以防止浏览器使用其查找。我不知道这是否可行，这只是一个想法。正如您所说，基本问题是浏览器无法搜索隐藏文本，我不知道如何做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:33:28.923

不是一个好的答案，但很好：Webkit 和其他引擎中可能存在错误。如果将文本设置为`white-space: nowrap;`and `overflow: hidden;`，它将在视觉上被截断，但如果在隐藏文本中找到搜索匹配，它将再次出现。

六年来，我使用了一种类似的技术来隐藏按钮中的文本，这些按钮使用背景图像进行样式设置：

```
.button {
    display: inline-block;
    text-indent: 120%;
    white-space: nowrap;
} 
```

# html - 在标题文本的末尾放置一个图标

> ID：11312810
> 
> 赞同：3
> 
> 时间：2012-07-03T14:13:13.930
> 
> 标签：html, css, image, background

我在 h1 标签中有一个标题文本。我想在文本的末尾有一个小图标（所以在文本的右侧）

文本的长度明显不同。

我已将 h1 样式设置为具有背景图像，不再重复，但它会将其置于 div 的边缘。

有什么办法可以让它始终在文本末尾排列？我假设这不能像我尝试过的那样用 bg-image 完成？

```
h1 {
background-image:url(images/quotemarks.png);
background-repeat:no-repeat;
background-position:right; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:16:12.583

试试这个：

```
h1:after {
    content:url(images/quotemarks.png);
} 
```

[**演示**](http://jsfiddle.net/Nz8hR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:55:48.620

如果我理解你的话，在 h1 标签内添加一个带有 img 的跨度并使用一些 css 应该会给你想要的结果......可能......

HTML：

```
<h1>
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
<span class="end"><img src='some icon.png'/></span>
</h1> 
```

CSS：

```
h1{
    display:inline-block;position:relative; padding-right:2em
}
.end{
    position:absolute; right:0; bottom:0; width:2em
} 
```

在这里查看演示：http: [//jsfiddle.net/aXjzg/2/](http://jsfiddle.net/aXjzg/2/)

更多线索可以在这里找到： [将“浮动”内容放在一段文本的右下角](https://stackoverflow.com/questions/9320017/place-floating-contents-at-the-bottom-right-of-a-paragraph-of-text)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:22:56.007

您可以将标题设置为内联显示，并在右侧设置额外的填充以“包含”背景图像。Trey 是这样的：

```
<style>
    .h1-with-icon {
    display: inline-block;
    padding: 0 15px 0 0;
    background: url('/image.gif') no-repeat top right;
        }
</style>

<h1 class="h1-with-icon">Heading</h1> 
```

请参阅：[示例](http://jsfiddle.net/tnEhh/1/)

# java - 将一个接口扩展到另一个接口

> ID：11312815
> 
> 赞同：4
> 
> 时间：2012-07-03T14:13:47.687
> 
> 标签：java, interface

假设我在这里有 2 个接口，`Moveable`并且`Walkable`（对不起，这个不好的例子，但如果你有更好的，请贴出来）

```
interface Runnable{
    void run();
}

interface Walkable extends Runnable {
    void walk();
}

public class Human implements Walkable {

} 
```

并且接口`Walkable`是的子类`Runnable`，当`Human`类实现`Walkable`接口时，该类应该从接口和接口`Human`提供实现吗？接口是否继承了接口的抽象方法？`void walk()``Walkable``void run()``Runnable``Walkable``run()``Runnable`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T14:16:03.940

是的，您的 Human 类将需要实现 walk() 和 run() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:21:58.353

`should the human class provide implementations for void walk from the interface walkable and void run() from the interface runnable?`

是的，当你的 `Walkable` 接口扩展`Runnable`它也继承`run`方法意味着现在如果`Human`类正在实现`Walkable`接口它必须实现这两个方法，否则它应该是`abstract`。

实现一个`Interface`是一个契约，其中实现类必须实现接口中声明的所有方法。

`does the interface Walkable inherit the abstract method run() from the interface Runnable?`

是的，这是 OOPS`Inheritance`概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T14:16:10.690

> 当 Human 类实现 Walkable 接口时，human 类是否应该从可步行接口提供 void walk 和从可运行接口提供 void run() 的实现？

是的。通过尝试编译代码，您可以很容易地发现这一点。编译器会抱怨，因为 class 中没有`run`and`walk`方法的实现`Human`。

> 接口walkable 是否继承了接口runnable 的抽象方法run()？

是的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T14:17:05.107

Walkable 是 Runnable，因此它必须定义 run() 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T14:17:10.503

是的，你的人应该`walk`AND `run`。

这意味着将事情颠倒过来吗？如果你跑步，你当然可以走路。但是受伤的人可以不跑步而走路......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T14:26:19.827

人类类需要实现这两种方法，否则 - 您必须将其声明为抽象的。是的，Walkable 接口继承了 Runnable 接口的 run() 方法。

[您可以在此处](http://docs.oracle.com/javase/tutorial/java/IandI/index.html)了解有关接口和继承的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T14:19:19.060

是的，一个接口可以扩展多个接口，实现类应该实现实现接口继承的所有方法。

所以你的问题是肯定的，你必须实现这两种方法

# ehcache - Ehcahe - RMI 缓存复制 - 新添加的对象未显示在 UI 中

> ID：11312817
> 
> 赞同：0
> 
> 时间：2012-07-03T14:13:52.793
> 
> 标签：ehcache

我相对较新`ehcache`并尝试在我的应用程序（示例应用程序）中实现缓存。我目前正在尝试使用 RMI 复制对某些数据对象使用缓存复制。我有 2 个在同一台机器上运行的 tomcat 实例，并且在两个实例上都部署了相同的应用程序。我已经验证在检索对象缓存时正确命中并且它正在提高性能。

但是当我在第一个实例上创建一个新对象并尝试在第二个实例中检索（有一个列出所有对象的页面）时，不会显示新添加的对象。

我可以看到该对象存在于第二个实例的缓存中。此外，在日志中也得到了确认，其中我看到了以下消息

> 2012-07-03 17:06:41,471 [RMI TCP Connection(6)-192.168.100.105] DEBUG distribution.RMICachePeer - RMICachePeer 用于缓存 com.mycompany.session.Session：远程放置已接收。元素是：[key = com.mycompany.session.Session#10, value=Item{version=0,freshTimestamp=5494027884412928, version=1, hitCount=0, CreationTime = 1341315402000, LastAccessTime = 1341315402000]

以前有没有人见过这种行为，他们能帮助我理解可能出了什么问题吗？

下面提到的是我的 ehcache.xml 文件的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="ehcache.xsd" >

<diskStore path="D:\\Cache1"/>

<cacheManagerPeerProviderFactory
    class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"
    properties="peerDiscovery=automatic, multicastGroupAddress=230.0.0.1,         hostName=192.168.100.105, multicastGroupPort=4446, timeToLive=32"
/>

<cacheManagerPeerListenerFactory 
    class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"
    properties="hostName=192.168.100.105, port=40001, socketTimeoutMillis=5000"
/>

<cache name="com.mycompany.session.Session"
      maxElementsInMemory="100"
      eternal="true"
      overflowToDisk="true">
      <cacheEventListenerFactory 
            class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
            properties="replicateAsynchronously=false
                       replicatePutsViaCopy=true,
                       replicateUpdatesViaCopy=true,
                       replicatePuts=true,
                       replicateUpdates=true,
                       replicateRemovals=true"/>
      <bootstrapCacheLoaderFactory 
        class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"/>
</cache>

<defaultCache
       maxElementsInMemory="100"
       eternal="true"
       overflowToDisk="true"
/>

</ehcache> 
```

tomcat 的第二个实例也有类似的 ehcache 配置，除了 diskStore 路径是“D://Cache2”和对等侦听器端口是 40002。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:40:28.057

看起来您没有在 cacheManagerPeerProviderFactory 中设置端口号。我们是否应该在 server2 设置上采取其他方式。

```
<cacheManagerPeerListenerFactory class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"
    properties="hostName=localhost, port=50001,socketTimeoutMillis=2000"/> 
```

# ruby-on-rails - 图片上传内部服务器错误Ruby

> ID：11312818
> 
> 赞同：0
> 
> 时间：2012-07-03T14:13:58.513
> 
> 标签：ruby-on-rails, carrierwave, internal-server-error

当我尝试在我正在使用的 Ruby 应用程序中上传图像时，出现内部服务器错误。我知道问题本身是什么，但我不完全确定如何解决它。截至目前，这是该应用程序的工作方式：

用户访问页面，允许上传图片，上传后进行图片处理。因此，当用户访问页面时，我正在创建一个新的 Gallery 实例（Galleries 包含一张或多张图片）。问题出在我试图创建以下内容的画廊控制器中：

```
 def index
    @gallery = Gallery.create
    @picture = @gallery.pictures.build

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @galleries }
    end
  end 
```

Andnddd 运行“localhost:3000/galleries/”时出现的错误

```
Completed 500 Internal Server Error in 148ms

ActionView::Template::Error (undefined method `gallery_pictures_path' for #<#<Class:0x000001023d8b98>:0x00000102383670>):
    3: <%= javascript_include_tag 'jquery.fileupload-ui.js' %>
    4: 
    5: 
    6: <%= form_for [@gallery, @picture], :html => { :multipart => true, :id => "fileupload" } do |f| %>
    7: 
    8:     <div>
    9:         <div class=" fileupload-buttonbar">
  app/views/galleries/index.html.erb:6:in `_app_views_galleries_index_html_erb__2795478836341012416_2164674980'
  app/controllers/galleries_controller.rb:8:in `index' 
```

项目本身在 GitHub 上：[https ://github.com/dflynn15/UploaderTest](https://github.com/dflynn15/UploaderTest)

问题要么在于我对 Gallery.create 以及如何创建新实例的理解（我知道孤儿实例运行的风险，但我将在修复此上传问题后实施到期日期），或者我对图片和图库是如何连接的，不允许 @gallery.pictures 成为无效路径。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:20:11.713

在 routes.rb 中试试这个

```
resources :galleries, :shallow => true do
    resources :pictures
end 
```

# joomla2.5 - uplodify 在 joomla 2.5 中不起作用

> ID：11312825
> 
> 赞同：2
> 
> 时间：2012-07-03T14:14:27.447
> 
> 标签：joomla2.5, joomla-component

**我在joomla2.5** 中使用[uplodify](http://www.uploadify.com/)开发了一个画廊组件

鉴于 my_component 我使用了以下代码

```
 $session = & JFactory::getSession();
    $document = &JFactory::getDocument();
    $document->addScript('http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
    $document->addScript(JURI::root(true).'/administrator/components/com_mycomponent/uplodify/jquery.uploadify-3.1.min.js');
    $document->addStyleSheet(JURI::root(true).'/administrator/components/com_mycomponent/uplodify/uploadify.css');

    $UploadHeadJs ='

             // <![CDATA[
                jQuery.noConflict();
                jQuery(function() {
                console.log("load");    
                jQuery("#model_upload").uploadify({
                        "swf"      : "'.JURI::root(true).'/administrator/components/com_mycomponent/uplodify/uploadify.swf",
                        "uploader" : "index.php",
                        "formData" : {"option" : "com_mycomponent", "controller" : "uploadify","task":"uploadify.upload","'.$session->getName().'" : "'.$session->getId().'","cid":"'.$item->id.'","tmpl":"component"},
                        "method"   : "post",     
                        "cancelImg" : "'.JURI::root(true).'/administrator/components/com_mycomponent/uplodify/uploadify-cancel.png",
                        "uploadLimit" : 25,
                        "auto"      : true,
                        "buttonText" : "SELECT MODEL",
                        "debug"    : true,
                        "fileObjName" : "modelImage",
                        "fileSizeLimit" : "'.ini_get('upload_max_filesize').'B",
                        "fileTypeDesc"  : "Only 25 pictures allow(.jpeg,.gif)",
                        "fileTypeExts"  : "*.jpeg;*.jpg;*.JPEG;*.JPG;*.GIF;*.gif;*.png;*.PNG",
                        "multi"    : true,
                        "queueID"  : "queue",
                        "height"   : 22,
                        "onUploadError" : function(file, errorCode, errorMsg, errorString) {
                            console.log( errorMsg);
                         },
                        "onUploadSuccess" : function(file, data, response) {
                            console.log(response);
                         }
                        // Put your options here
                    });
                });
            //]]>';
            $document->addScriptDeclaration($UploadHeadJs); 
```

在 default.php 中包含以下代码

```
<input type="file" name="modelUpload" id="model_upload"/>
       <div id="upload-queue-s" style="background:#CCCCCC">
        <div class="inQueu" id="queue"></div>
         <ul class="fileQueu">

            </ul>
        </div> 
```

Uplodfiy 正在正确加载，现在当我开始向**控制器**编码并尝试回显某些内容以确认请求的 url 是否正常工作时，它将重定向我 joomla 管理员的登录页面

**所以我的问题是为什么它重定向我的登录页面，会话有问题吗？我怎样才能将请求表上传到 joomla 控制器文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:04:02.347

尝试在组件控制器的前端编写代码，因为 Joomla 不允许在没有登录的情况下刷写脚本来访问管理员区域。

我还使用 uplodify 开发了画廊组件，它工作正常。如果你需要它，我可以为你提供代码。

# deployment - 如何在基于功能的发布模型中部署到生产环境？

> ID：11312830
> 
> 赞同：2
> 
> 时间：2012-07-03T14:14:41.187
> 
> 标签：deployment, release, release-management

我们是一个非常小的团队，负责为一家非软件公司开发 Intranet Web 系统。我们是一个 RAD 团队：当一个*问题*关闭时（无论是新功能、错误修复还是某种配置），它会立即投入生产并上线。

问题是：该过程完全是手动的并且容易出错。它包括手动将所有新/更新的文件一一复制到生产服务器。我们经常需要根据更新的类型运行 SQL 查询或清除应用程序缓存。

功能或错误修复每天更新两到三次，可能更多取决于需求。当然，这会导致很多问题。

它必须有一个更简单、更专业的方式。我能想到的一种解决方案是更新整个应用程序，但目前这是不可能的，因为我们的主干不稳定并且有很多提交尚未准备好投入生产（好吧，我知道这是我们的错）:)

那么我们如何才能自动化和改进流程呢？我们对任何工具都持开放态度，最好是免费的或不太贵的。

有关我们的应用程序和工具的更多信息：- PHP MVC（Zend 框架）- Ubuntu - SVN（迁移到 Git）- Redmine（迁移到私有 Github）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:20:21.310

对于您的情况，工具只会走这么远。我怀疑您需要进行一些 PHP 单元测试、一些 UI 冒烟和验收测试，也许还有一些性能测试，然后让一个工具为您想要应用于生产的每个补丁运行所有这些。然后，您还需要自动部署脚本，可能还需要一个暂存环境来测试这些脚本。这是持续交付的一般领域，关于这个主题有一整本书。 [http://martinfowler.com/delivery.html](http://martinfowler.com/delivery.html)

# perl - 删除一行字符之间的所有空格，而不创建一个巨大的单行

> ID：11312838
> 
> 赞同：2
> 
> 时间：2012-07-03T14:15:09.163
> 
> 标签：perl, replace

我目前面临一个似乎很容易处理的问题，但到目前为止我还没有解决它。我有一个“管道分隔值”文件，我想删除每一行所有值的所有前导和尾随空格。该文件可能包含多行。

例子：

```
1|     | Field2     | Field3
2| 123 | Field2     |
3|     |            | Field3 
```

删除空格后我想要什么：

```
1||Field2|Field3
2|123|Field2|
3|||Field3 
```

只要最后一个字段（在本例中为 Field3）不为 NULL，我到目前为止就可以使用。这对应于上面示例中的第 2 行。当最后一个字段为 NULL 时，它将该行与下一行连接起来，创建比预期更大的行。

到目前为止，我的代码是这样的：

```
$res =~ s/\s*\|\s*/\|/g; 
```

如前所述，只要所有行的最后一个字段不为 NULL，它就可以工作。我试图提出一个正则表达式，它匹配除最后一个管道之外的所有管道，但到目前为止没有成功。

知道如何删除所有空格并保持线路完整性吗？

提前致谢，

若昂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:31:57.687

正则表达式`/\s/`匹配回车符和换行符（以及其他内容）以及空格和制表符，因此您的替换将删除具有空最终字段的记录上的尾随换行符。

尝试

```
$res =~ s/[ \t]*\|[ \t]*/|/g; 
```

或者

```
$res =~ s/[ ]*\|[ ]*/|/g; 
```

如果您对删除制表符不感兴趣。

（替换字符串中的管道不需要转义。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:36:49.437

```
my $file_data = <<DATA;
1|     | Field2     | Field3
2| 123 | Field2     |
3|     |            | Field3
DATA

foreach my $line (split /[\n\r]/, $file_data) {
    my @fields;

    foreach my $field (split /\|/, $line) {
            $field =~ s/^\s*(.*?)\s*$/$1/;
            push @fields, $field;
    }

    print join '|', @fields;
    print "\n";
} 
```

# c# - WPF - 在 gui 中使用 Interop.AcroPDFLib 控件 - 如何处理错误？

> ID：11312841
> 
> 赞同：0
> 
> 时间：2012-07-03T14:15:14.867
> 
> 标签：c#, .net, com, acrobat, adobe-reader

我在 WindowsFormsHost 控件中使用 Adob​​e 控件来呈现 PDF。此功能对应用程序而言并不重要，而且并非每个用户都会安装 Adob​​e Reader。

我的问题是，用控件检测出问题（或者一旦我尝试打开某些东西就会出错）并在之后使其可见性折叠的最佳方法是什么？

我需要在实际打开任何 PDF 之前找到它，因为应用程序需要下载 PDF 并且它们可能很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:57:49.447

我发现无法捕获此控件中发生的所有异常。如果您不希望它冻结您的应用程序，请在一个完全独立的进程中运行它。

# vhdl - VHDL 代码综合错误

> ID：11312843
> 
> 赞同：1
> 
> 时间：2012-07-03T14:15:23.960
> 
> 标签：vhdl, hdl, synthesis

我编写了一个 VHDL 代码来实现 PWM 控制器的功能。我已经模拟成功，结果符合预期。我还检查了合成的语法，但它显示了任何错误。当我使用 XILINX ISE 12.4 合成它时，它没有合成并且错误状态

“错误：Xst:827 - 第 67 行：信号 tmp_PC 无法合成，同步描述错误。当前软件版本不支持您用于描述同步元素（寄存器、内存等）的描述样式。”

```
--library UNISIM;
--use UNISIM.VComponents.all;

entity CONTROLLER is
PORT(

    CLK:    IN  STD_LOGIC;
    VOUT: IN  STD_LOGIC;
    M1:   OUT STD_LOGIC:='0';
    M2:   OUT STD_LOGIC:='0'

);

end CONTROLLER;

architecture Behavioral of CONTROLLER is

    SIGNAL VREF:        STD_LOGIC_VECTOR(7 DOWNTO 0):="01000000";
    SIGNAL V_ERR:       STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL PWM:         STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL PWM_NEW:         STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL COUNT:       STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL COUNT2:          STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL TEMP1:       STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL TEMP2:       STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL TEMP3:       STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL FEED_BACK:       STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL REG:         STD_LOGIC_VECTOR(7 DOWNTO 0):="00000000";
    SIGNAL PWM_COUNT:       STD_LOGIC_VECTOR(7 DOWNTO 0):="10000000";

BEGIN

PROCESS(CLK)

BEGIN

    IF(RISING_EDGE(CLK) AND COUNT2<"10000000")THEN
            COUNT <= COUNT+'1';
    END IF;

    IF(RISING_EDGE(CLK) AND COUNT2>="10000000")THEN
        COUNT <= COUNT+'1';
    END IF;

    IF (COUNT>"00000101" AND COUNT<"01111000") THEN
        IF(RISING_EDGE(CLK))THEN
            IF (VOUT='0') THEN
                FEED_BACK<= FEED_BACK+'1';
            END IF;
        END IF;
    END IF;   

    IF (COUNT>"01111000" AND COUNT<"01111100")THEN
        REG<=FEED_BACK;
        TEMP1<=VREF-REG;
        IF(TEMP1>"01000000") THEN
           TEMP2<=TEMP1+"11111111";
            V_ERR<=TEMP2+'1';
        END IF;
        IF (TEMP1<"01000000") THEN
                V_ERR<=TEMP1;
        END IF;

        PWM<=V_ERR+VREF;

        IF (PWM>"11000000")THEN
             PWM<="11000000";
        IF(PWM<"00001010")THEN
            PWM<="00001010";

        END IF;
        END IF;

    END IF;

    PWM_NEW<= PWM;

   IF (RISING_EDGE(CLK))THEN
        IF(COUNT="01111111")THEN
            COUNT<="00000000";
            FEED_BACK<="00000000";
        END IF;
    END IF;

    IF(RISING_EDGE(CLK))THEN
        COUNT2 <= COUNT2+ '1';
    END IF;

   IF(COUNT>"00000000" AND COUNT<("00000010"))THEN
        IF(RISING_EDGE(CLK)) THEN
            M1<='0';
            M2<='0';
        END IF;
   END IF;

    IF(COUNT>("00000010") AND COUNT<("00000010"+PWM_NEW))THEN
        IF(RISING_EDGE(CLK)) THEN
            M1<='1';
            M2<='0';
        END IF;
   END IF;

    IF(COUNT>("00000010"+PWM_NEW) AND COUNT<("00000100"+PWM_NEW))THEN
        IF ( RISING_EDGE(CLK)) THEN
            M1<='0';
            M2<='0';
        END IF;
    END IF;

    IF(COUNT>("00000100"+PWM_NEW) AND COUNT<("10000000"))THEN
        IF (RISING_EDGE(CLK)) THEN
            M1<='0';
            M2<='1';
        END IF;
    END IF;

    IF (COUNT=("10000000"))THEN
        IF (RISING_EDGE(CLK)) THEN
            COUNT2<="10000001";
        END IF;
    END IF;

END PROCESS;
end Behavioral;` 
```

我尝试查找错误消息并得到不同的答案。出现的可能原因1：不符合综合模板的“IF”嵌套不当。2：使用“risisng_edge(clk)”而不是通常的“(clk'event and clk='1')”。

我仍然不完全确定可能是什么问题。如果有人可以提出我忽略的可能错误，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:25:08.833

为了被综合工具识别，您的过程必须有一个**块** `if rising_edge(clk)`。

修改你的代码应该很容易，除了块`reg <= feed_back;`

如果此特定部分对异步行为进行建模，则将其移至组合过程。

关于您列出的可能原因 1\. 和 2.，您的代码在这两个方面都可以：嵌套是可以的（在语法上）并且您的使用是`rising_edge`可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:42:30.943

看起来你可以编写完整的同步代码

```
process(clk)
begin
    -- put your asyncron code here if needed
    if(rising_edge(clk)) then
      if(reset = '1') then
      -- if you like to implement a synchron reset
      else
      -- all your synchron code e.g.

         if (COUNT2 >= "10000000") then
            COUNT <= COUNT+'1';
         end if;

         if (COUNT > ("00000100"+PWM_NEW)) AND (COUNT < "10000000") then
            M1 <= '0';
            M2 <= '1';
         end if;
         .
         .
         .

      end if;
   end if;
   -- put your asyncron code here if needed
end process; 
```

不要使用 unisim 库......你可以用这两者做任何事情

```
LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.NUMERIC_STD.all; 
```

有标准化。

为了让它更清楚一点，你可以用十六进制写

```
if (COUNT2 >= x"80") then -- 80 hex = 124 dec
   COUNT <= COUNT+'1';
end if; 
```

或者您可以使用无符号信号

```
SIGNAL COUNT:       unsigned (7 DOWNTO 0) := (others => '0'); -- same as "000000000" but looks better

if (COUNT2 >= 128) then
   COUNT <= COUNT + '1';
end if; 
```

计算不是问题，例如

```
if (COUNT > ("00000100"+PWM_NEW)) AND (COUNT < "10000000") then
   M1 <= '0';
   M2 <= '1';
end if; 
```

将会

```
 if (COUNT > (unsigned(PWM_NEW) + 4)) AND (COUNT < 128) then
    M1 <= '0';
    M2 <= '1';
 end if; 
```

# windows - Windows VSS：两个卷影副本之间的区别？

> ID：11312844
> 
> 赞同：24
> 
> 时间：2012-07-03T14:15:26.497
> 
> 标签：windows, shadow-copy

我正在使用 VSS api 创建卷的一些卷影副本，然后使用它们的 UNC 路径访问它们。
是否有可能获得在两个连续阴影之间发生变化的某种事物的列表？

这样做的明显方法是检查卷中的所有文件并检查更改，但必须有一种更简单的方法来做到这一点，因为 VSS 的关键特性之一是它保存信息的增量并且只保存什么被改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-24T18:10:32.897

将 WinMerge 等第三方软件与卷影副本 UNC 路径一起使用 [http://winmerge.org/](http://winmerge.org/)

这将提供一个用于比较的 GUI

例如，使用“C:\”，与“\\localhost\C$\@GMT-2017.08.24-18.07.46”

当然，输入有效的 UNC 路径以与卷影副本的日期和时间一致。

# javascript - Marionette.CompositeView 和 Marionette.ItemView 之间的事件

> ID：11312846
> 
> 赞同：1
> 
> 时间：2012-07-03T14:15:29.173
> 
> 标签：javascript, backbone.js, marionette

我有两个模块`itemView.js`和`ListView.js`.
当我获取数据时，一切正常。

问题是关于`item view`（1）当我改变相应的模型时。

a) `ListView.js`(2) 显示模型`closed`值等于`false`(3) 的所有对象

b) `closeTask`(1) 中的动作将模型的值
从`closed: false``closed: true`

c) 当 b) 发生时没有任何变化，
但是如果我重新加载页面，我会得到正确的结果（不显示 `closed`值等于的模型）。`true`

我应该如何解决这个问题？

* * *

(1)

```
// itemView.js
var itemView = Marionette.ItemView.extend({

    initialize: function () {
        this.model.on('change', this.render, this);
    },

    events: {
        'click #close': 'closeTask'
    },

    template: itemTemplate,

    tagName: 'li',

    closeTask: function () {
        if (!this.model.get('closed')) {
            this.model.save({
                closed: true
            });
        }
    }

}); 
```

* * *

(2)

```
// ListView.js
var ListView = Marionette.CompositeView.extend({

    template: listTemplate,

    itemView: itemView

}); 
```

* * *

(3)

```
// Collection
myCollection.attributes = [
    {
        id: 1,
        name: 'bar'
        closed: false
    },
    {
        id: 2,
        name: 'bar2'
        closed: false
    },
    ….
]; 
```

* * *

PS：

当我获取集合时，服务器只给我关闭属性等于 false 的模型。

```
app.addInitializer(function () {
    myCollection = new MyCollection();
    myCollection.fetch();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:43:28.737

我没有与 Marionette 合作，但我一直在与 Backbone 合作，我的想法是 Marionette 没有刷新模板或类似的东西。

如果你尝试这个会发生什么？

```
// itemView.js
var itemView = Marionette.ItemView.extend({

    initialize: function () {
        this.model.on('change', this.render, this);
    },

    onRender : function(){
       //verify your model:
       console.log( this.model.toJSON() );
       if (this.model.get('closed')) {
          this.$el.fadeOut();//bye bye item
       }
    },

    events: {
        'click #close': 'closeTask'
    },

    template: itemTemplate,

    tagName: 'li',

    closeTask: function () {
        if (!this.model.get('closed')) {
            this.model.save({
                closed: true
            });
        }
    }

}); 
```

# java - iptables icmp 目标主机未知

> ID：11312852
> 
> 赞同：1
> 
> 时间：2012-07-03T14:15:45.747
> 
> 标签：java, networking, network-programming, routes, iptables

我正在测试如何`java.net.NoRouteToHostException`使用 iptables。像这样配置服务器端：

`sudo iptables -A INPUT -s 10.13.185.66 -j DROP`
`sudo iptables -A INPUT -s 10.13.185.66 -j REJECT`
`sudo iptables -A INPUT -s 10.13.185.66 -j REJECT --reject-with icmp-net-unreachable`

当客户端尝试连接服务器端原因`java.net.ConnectException`：连接被拒绝而不是`java.net.NoRouteToHostException`，然后我尝试删除路由表结果`java.io.IOException`，也不是我的预期。
我怎样才能得到一个`java.net.NoRouteToHostException`？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:58:28.430

仅配置服务器 iptables

```
sudo iptables -A INPUT -s 10.13.185.66 -j REJECT --reject-with icmp-host-unreachable 
```

第一条规则 ( `-j DROP`) 导致数据包被丢弃，而不是被拒绝。

# objective-c - 在 iOS 的超级视图/父视图控制器中读取子元素坐标

> ID：11312853
> 
> 赞同：0
> 
> 时间：2012-07-03T14:15:47.030
> 
> 标签：objective-c, ios, uiview, parent-child, subview

所以我创建了一个视图控制器，它创建了一个自定义视图，如果它包含两个元素，则在它们之间创建一条线。一个分隔符。

视图及其元素在 Interface Builder 中创建，并在那里设置它们的位置。

我要做的是读取子元素原点坐标和宽度/高度，以便我可以动态地在它们之间绘制分隔符。

我尝试过使用`NSArray self.subviews`并尝试使用方法`convertRect`和`convertPoint`在`NSView`方法。

有谁知道我该怎么做？

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:25:01.203

这是一个相当有趣的请求，但我认为这应该工作得很好。这假设子视图是左/右，如果您需要上/下，则将 >= 反转为 <= 并比较 y 而不是 x。

```
-(void)example {
        if (self.view.subviews.count ==2) {
             CGPoint origin1 = [self.view.subviews objectAtIndex:0].frame.origin;
             CGPoint origin2 = [self.view.subviews objectAtIndex1].frame.origin;
             if (origin1.x >= origin2.x)
                 [[self.view.subviews objectAtIndex:0]setFrame:someFrameOnTheLeft];
                 [[self.view.subviews objectAtIndex:0]setFrame:someFrameOnTheRight];
              }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:20:33.583

将出口链接到 xib 中的每个子[视图 在情节提要中查看此访问视图](https://stackoverflow.com/questions/11276738/access-view-inside-a-storyboard/11276770#11276770)

致电您的网点`upperView`，然后`lowerView`

现在获取视图的来源

```
float x = upperView.frame.origin.x;
float y = upperView.frame.origin.y; 
```

# html - 我怎样才能看到矩形的轴旋转？

> ID：11312854
> 
> 赞同：1
> 
> 时间：2012-07-03T14:15:51.713
> 
> 标签：html, css

X 轴周围的红色矩形，Y-webkit-transform-origin 是否可以直观地看到轴？

[演示 Jsfiddle](http://jsfiddle.net/centerwow/hfuGx/38/)

# c# - 应用栏全屏可见？

> ID：11312862
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:06.310
> 
> 标签：c#, windows

我正在尝试创建一个停靠在桌面顶部的应用栏，例如任务栏。

但是现在，当一个程序全屏显示时，要么该程序遮住了我的 appbar，要么 appbar 遮住了想要全屏显示的程序的一部分。

有没有办法强制全屏程序避免使用屏幕的某些区域，这样我就可以同时看到应用栏和所有程序窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:29:39.343

不知道你可以去哪里，或者确实是你要找的东西，但是......

## 带有主网格->

```
<Grid x:Name="LayoutRoot" Style="{StaticResource LayoutRootStyle}">
    <Grid.Background>
        <ImageBrush x:Name="MyImage" ImageSource="Assets/Screenshot (1).png" Stretch="UniformToFill"/>
    </Grid.Background> 
```

## 还有一个 AppBar（这个在底部）->

```
<Page.BottomAppBar>
    <AppBar x:Name="bottomAppBar" Padding="10,0,10,0" Opened="bottomAppBar_Opened" Closed="bottomAppBar_Closed">
        <Grid> 
```

## 在后面的代码中->

```
private void bottomAppBar_Opened(object sender, object e)
    {
       this.LayoutRoot.Margin = new Thickness(0,0,0,90);
       this.MyImage.Stretch = Stretch.Fill;
    }

    private void bottomAppBar_Closed(object sender, object e)
    {
        this.LayoutRoot.Margin = new Thickness(0, 0, 0, 0);
    } 
```

它将主页面挤压到 appBar 之外。

只是玩得开心尝试...

# r - 使用 R 中的循环在函数中调用具有相似名称的对象

> ID：11312865
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:13.580
> 
> 标签：r, object, for-loop

我正在使用名称非常相似的 data.frames（df1、df2、.. df7）。因为大部分分析都将完成，所以我想尽可能地自动化这个过程。我已经设法在读取文件时使用分配：

```
for(i in 1:7) { 
  NameFile <- paste("df",i,"_10/score.out", sep="")
  OutFile <- read.table(NameFile, na.string="NA",header=TRUE,sep="\t")
  NameVar <- paste("df",i,"_10", sep="")
  assign(NameVar, OutFile)
  } 
```

但现在我也想在所有这些中执行操作/功能。例如子集：

```
for(i in 1:7) {
              Newname <- paste("dfsmall",i,sep="")
              dftemp <- subset(df[i], p == 0   & abs(sepscore) > 0.3)
              assign(Newname, dftemp)
              } 
```

我认为大部分是正确的，但我如何调用 df[i]？也就是说，已经存在名称为 df1、df2(..) 的对象？有没有更清洁的方法来做到这一点？

这里有一些类似的问题，但没有一个适合我的问题。再说一次，我很容易错过显而易见的事情。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:19:10.070

通过使用函数`get`（工作相同`assign`但相反）：

```
 for(i in 1:7) {
          get(paste("df",i,"_10",sep="")) -> df
          Newname <- paste("dfsmall",i,sep="")
          dftemp <- subset(df, p == 0   & abs(sepscore) > 0.3)
          assign(Newname, dftemp)
          } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:21:23.117

假设您有一个分析，由于某种原因有 10 个组件，我不会将它们称为`df1`，`df10`而是在列表中排序：

```
data_list = list(exp1 = data.frame(...), 
                 exp2 = data.frame(...), 
                 ..., 
                 exp10 = data.frame(...)) 
```

为所有实验执行操作现在涉及编写一个执行操作的函数，给定元素的数据：

```
do_stuff = function(experiment_data) {
   # do something
 } 
```

并使用`apply`样式循环，在这种情况下`lapply`：

```
result = lapply(data_list, do_stuff) 
```

我认为这种方法要容易得多。

# flash - 为 Windows 应用商店应用嵌入 Flash 内容

> ID：11312866
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:13.757
> 
> 标签：flash, internet-explorer, windows-store-apps

我需要在我的网页中嵌入一个 .swf (flash) 文件。网页及其资产位于本地硬盘上。我曾经像这样将它嵌入到 IE 中：

```
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="320" HEIGHT="240" id="Yourfilename" ALIGN=""> 
```

但它不适用于 Windows 8 上的 Metro IE 10。Metro 模式下的 IE 10 无法打开它。如何在 Metro 模式下为 IE 修复此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:51:38.143

只有在预先批准的列表中允许使用 Flash：[http ://www.edugeek.net/forums/windows-8/97346-submit-sites-flash-enabled-metro-ie10.html](http://www.edugeek.net/forums/windows-8/97346-submit-sites-flash-enabled-metro-ie10.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:20:30.640

据我所知，没有办法在 IE10 Metro 中显示 flash。

# security - 安全存储 - 每个会话临时

> ID：11312868
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:22.127
> 
> 标签：security, session, firefox, firefox-addon, storage

我正在开发 Firefox 插件，需要安全地存储一些用户数据（没有其他扩展，网站应该可以访问它，并且数据应该只存储到浏览器会话关闭）。

你们中的任何人都可以就我应该使用的存储提出建议吗？

如果您认为将其存储为文件是个好主意，您能否指出如何在飞行中对其进行加密和解密的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:10:09.603

Your JavaScript code and the JavaScript code from some other extension are the same - telling which one is which reliably will hardly be possible. However, if you can isolate the part of your code that needs to work with the data then you can simply use JavaScript's own mechanisms. In particular, closures can access variables that no other code has access to. An example:

```
function storeLoginData()
{
  var user = prompt("Please enter your user name");
  var pass = prompt("Please enter your password");
  return function(testUser, testPass)
  {
    return testUser == user && testPass == pass;
  };
}

var verifier = storeLoginData();
if (verifier("foo", "bar"))
  alert("Your login credentials are foo:bar"); 
```

Note that code outside the `storeLoginData` function can only call the closure returned but doesn't have access to its variables. In the example it is restricted to checking whether a user name/password combination is correct. And you can remove even this loophole if you make your isolated code act autonomously, on a timer or something like this:

```
function storeData(data)
{
  var timer = Components.classes["@mozilla.org/timer;1"]
                        .createInstance(Components.interfaces.nsITimer);
  timer.initWithCallback(function()
  {
    // Do something with data here
  }, 1000, timer.TYPE_ONE_SHOT);

  return function() {};
}

var data = ...;
var dataStorage = storeData(data);
data = null; 
```

Note how the main code passes the `data` variable to `storeData` and nulls it out after that - all the references to the variable are now inside the `storeData` function. The closure returned here is useless and its only goal is to keep a reference to the `timer` variable - without that the timer will be garbage collected and will never fire. The security of this solution relies on the fact that there is no way to enumerate all timers in the system - this is true for timer objects but not event listeners or observers for example.

Of course, the data stays unencrypted in memory - that's hardly avoidable. Consequently, any binary code will still be able to read it, the protection works only against JavaScript.

# c++ - VS2010 - 如何解决“XXX 是保留的类名”错误

> ID：11312871
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:40.210
> 
> 标签：c++, visual-studio-2010, visual-c++

我知道您不能通过以下方式在 VS2010 中添加一个名为“Socket”的类：

*   右键单击项目
*   添加 -> 类
*   C++ 类 -> 添加
*   键入“Socket”作为类名并点击完成

你得到：

```
'Socket' is a reserved class name 
```

因此，我尝试添加一个名为“Socket1”的类，删除所有出现的“1”，VS 似乎编译没有任何错误。这会引起任何冲突吗？或者使用命名空间是解决上述错误的正确方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:18:53.657

您可能应该只是命名它（以及您为此编写的所有其他内容），强迫您绕过编译器是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:20:41.833

**重命名该类**（已经建议将其放在命名空间中，这是另一种正确的方法）。编译器不允许这样做是正确的。具有多个具有相同名称但定义不同的类是未定义的行为。

# python - 从 int 中减去秒而没有格式化

> ID：11312872
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:45.477
> 
> 标签：python

我有一系列不同的时间，如下所示：

```
20120628061533.0, 20120628064851.0, 20120628064853.0, 20120628064920.0, 20120628064929.0 
```

我想做的是从时间中减去 10 秒 30 秒和 1 分钟，但我面临的问题是我不能简单地减去 10 或 30 或 60，因为这样数字将不再是时间格式（即. 最后两位数可以大于 60)

反正有没有容易做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:19:07.103

使用[`datetime`](http://docs.python.org/library/datetime.html)：

```
import datetime

a = 20120628061533.0

dt = datetime.datetime.strptime(str(int(a)), '%Y%m%d%H%M%S')
dt -= datetime.timedelta(minutes=1)

print dt.strftime('%Y%m%d%H%M%S') 
```

印刷

```
20120628061433 
```

无论如何，`datetime`仅在写入屏幕/文件时保留对象并将它们转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:22:47.933

不，一般来说没有简单的方法可以做到这一点。如果您正在使用面向对象的语言编写，我建议您创建一个可以从整数构造的类，例如您展示的整数，并且在内部将相应的日期和时间表示为一堆整数，一个表示年份，一个月等。然后您可以处理这些日期/时间元素之间的“转换因子”（例如，一分钟 60 秒，一小时 60 分钟等，确保注意一个月中的天数) 因为你在做算术。

# javascript - 为什么在这个例子中需要“get()”？

> ID：11312877
> 
> 赞同：0
> 
> 时间：2012-07-03T14:16:53.703
> 
> 标签：javascript, jquery

我尝试从 这个片段中的[jquery api理解这个例子](http://api.jquery.com/end/#example-0)

```
 var tags = this.map(function () {
        return this.tagName;
    })
            .get().join(", "); 
```

为什么 get() 是必要的？在[api](http://api.jquery.com/get/)中它说 get() 检索与 jQuery 对象匹配的 DOM 元素。在这种情况下，我看到 get() 没有应用于 jq 对象，而是应用于字符串。当我删除 get() 时，我收到以下错误消息：

> 未捕获的类型错误：对象 [对象对象] 没有方法“加入”

为什么加入不能与地图一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:27:10.253

*   这里，`this`是带有节点列表的 jQuery 对象。（其中的所有函数`jQuery.fn`都将其上下文（即`this`）设置为调用该函数的 jQuery 对象。）

*   调用[`map`](http://api.jquery.com/map/)返回一个带有字符串列表的 jQuery 对象。（您可能会将 jQuery 的`map`函数与[`map`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)ECMAScript 5 中引入的数组函数混淆，）

*   调用`get`返回这些字符串的纯 JS 数组，并`join`作用于该数组。

调用 将`get`带有字符串列表（由 返回`map`）的 jQuery 对象转换为普通的 JS 数组是必要的，因此它可以与`join`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:18:10.520

`join`用于数组（纯 js 数组）。

您的函数返回 jquery 数组，需要将其转换为 js plain

`.Get()` - 这样做。

[http://api.jquery.com/get/](http://api.jquery.com/get/)

> 检索与 jQuery 对象匹配的 DOM 元素。

![在此处输入图像描述](../Images/dbeefb4cf4bd5370a2a493fa150d8982.png)

# javascript - 将列表元素 onclick 事件绑定到单选输入

> ID：11312879
> 
> 赞同：1
> 
> 时间：2012-07-03T14:17:04.460
> 
> 标签：javascript, jquery, html

`<li>`当您选择单选按钮到onclick事件时，是否有一个jquery函数或一些简单的方法来绑定发生的任何事情？示例代码：

```
<li onclick="showInfo();" //bind to radio here somehow>
   <div class="radioHolder">
       <input name="blah" type="radio" id="asdf" checked="false"/>
   </div>
   <label for="asdf">blahblah</label>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:55:18.157

不带参数使用时，click 方法会触发 click 事件（如果您需要的话）

```
$('li').click() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:06:35.160

点击li时，触发asdf的点击

```
$('li').click(function(event)
{
  $('asdf').click()
}); 
```

# java - JDB 在每次异常时停止 - 如何防止这种情况

> ID：11312882
> 
> 赞同：3
> 
> 时间：2012-07-03T14:17:05.513
> 
> 标签：java, jdb

我正在使用一个 jdb 调试器，它的问题是在每个捕获的异常上都停止，尽管我没有执行任何 catch .... 语句。在类加载期间有数百个：

> 发生异常：java.io.FileNotFoundException (uncaught)"thread=Thread-2-EmulatorEngine", sun.misc.URLClassPath$JarLoader.ensureOpen(), line=634 bci=30

有什么方法可以指示 jdb 跳过这些异常吗？

PS。我听说过 IDE 编辑器的原因。有理由使用jdb。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T16:43:40.940

我意识到我不够小心。JDB 在启动这些行后写入

> 设置未捕获的 java.lang.Throwable
> 
> 设置延迟未捕获的 java.lang.Throwable

所以，要禁用它，我需要输入一个命令

```
ignore uncaught java.lang.Throwable 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-26T20:29:34.947

如果您遇到与我相同的问题，则需要在定义断点时使用类的完全限定名称。

示例 - 在 main 方法中设置断点：在 com.foo.bar.App.main 中停止

可能是您尝试为与您正在调试的类文件（可能不存在）不同的类文件设置断点。

# .net - 给新手的 LINQ 帮助

> ID：11312883
> 
> 赞同：1
> 
> 时间：2012-07-03T14:17:06.060
> 
> 标签：.net, sql, asp.net-mvc-3, linq

无法得到这个，有人可以帮助这个 LINQ 查询吗？

```
select col1, 
(select col2 from tbl2 where tbl2.ID=tbl1.tbl2ID) as [col2] 
from tbl1 
```

场景是这样的

我想要 Jobs 表中的所有记录，Jobs 有扇区 ID 列，我也想要 SectorName。它也有 CountryID 和 CityID，我也需要 CountryName 和 CityName。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:24:17.053

如果关系设置正确，我认为应该是这样的：

```
var result=from job in Jobs
           select new {job.jobID, job.jobName, job.Sector.SectorName, job.Country.CountryName, job.City.CityName}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:19:48.337

你应该`JOIN`像这样的这些表：

```
from j in Jobs
join c in Countries on j.CountryID equals c.ID
join c2 in Cities on c.CityID equals c2.ID
select new 
{ 
    SectorName = j.SectorName,
    CountryName = c.Name,
    CityName = c2.Name
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:25:28.317

这是我发现的一个很好的示例，我认为它可以解释您正在寻找的内容。绝对需要一个JOIN。

```
class Job
{
public int ID { get; set; }
public string Name { get; set; }
public string Title { get; set; }
}

class Sector
{
public int ID { get; set; }
public string SectorName { get; set; }
}

class City
{
public int ID { get; set; }
public string CityName { get; set; }
}

void Main()
{
var jobs = new Job[]
{
    new Job{ID = 5, Name = "Sam", Title="Minion"},
    new Job{ID = 6, Name = "Dave", Title="Overlord"},
    new Job{ID = 7, Name = "Julia", Title="Minion"},
    new Job{ID = 8, Name = "Sue", Title="Minion"}
};

// Example orders.
var sectors = new Sector[]
{
    new Sector{ID = 5, SectorName = "Sector42"}
};

var cities = new City[]
{
    new City{ID = 5, CityName = "TownsVille"}
};

// Join on the ID properties.
var query = from j in jobs
        join s in sectors on j.ID equals s.ID
        join c in cities on j.ID equals c.ID
        select new { j.Name, j.Title, c.CityName, s.SectorName };

// Display joined groups.
foreach (var group in query)
{
    Console.WriteLine("{0} Is a  {1} in {2}, sector {3}", group.Name, group.Title, group.CityName, group.SectorName);
}

} 
```

输出看起来像这样（来自 foreach 循环）

```
Sam Is a  Minion in TownsVille, sector Sector42 
```

我引用了这个网站： http: [//www.dotnetperls.com/join](http://www.dotnetperls.com/join)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T14:28:56.927

你需要做一些加入。不知道您的结构，类似以下的内容可能会起作用。

创建一个简单的视图模型来保存您的信息：

```
public class JobView
{
    public int JobId { get; set; }
    public string JobName { get; set; }
    //Add any other fields you may need here
    public string SectorName { get; set; }
    public string CityName { get; set; }
    public string CountryName { get; set; }
    public string CityName { get; set; }

} 
```

然后根据您的需要填充列表

```
List<JobView> retVal = (from job in Jobs
                join sector in Sectors on job.SectorId equals sector.Id
                join country in Countries on job.CountryId equals country.Id
                join city in Cities on job.CityId equals city.Id
                select new JobView { 
                                JobId = job.Id,
                                JobName = job.JobName,
                                SectorName = sector.SectorName,
                                CountryName = country.CountryName,
                                CityName = city.CityName }).ToList();
    } 
```

JobView 中定义的任何其他字段都只需要在选择期间填充。

# spring - Spring集成-多入站适配器不起作用

> ID：11312885
> 
> 赞同：5
> 
> 时间：2012-07-03T14:17:06.480
> 
> 标签：spring, adapter, spring-integration, inbound

在我的项目中，我使用 9（九）个 int-ip:udp-inbound-channel-adapter 和一个 jms:inbound-channel-adapter。Jms 适配器从服务器接收消息。一切正常，但是当我添加另一个（第 10 个）int-ip:udp-inbound-channel-adapter jms 停止收到任何消息。当我随机删除一个 udp 适配器时，jms 到了。我使用openMq。没有错误或异常。怎么了？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:59:54.063

The default taskScheduler bean has a pool of 10 threads. Each UDP adapter uses one of these threads to receive packets.

Simply define an explicit scheduler with that name with a larger pool size

```
<task:scheduler id="taskScheduler" pool-size="20"/> 
```

# javascript - 修复了 TinyMCE 中的内容布局

> ID：11312889
> 
> 赞同：1
> 
> 时间：2012-07-03T14:17:15.827
> 
> 标签：javascript, tinymce

只是一个快速的问题。我正在使用带有“模板”和“不可编辑”插件的 TinyMCE。我正在尝试使用模板为用户提供布局。我在必要的 html 元素上应用了“mceNonEditable”和“mceEditable”，但是当模板在编辑器中加载时，用户可以删除标签而不仅仅是编辑其中的内容。我应该怎么做？如何创建无法删除 html 标签的固定模板？

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:20:44.027

似乎不支持我们正在寻找的内容：[http](http://www.tinymce.com/wiki.php/Plugin:noneditable) ://www.tinymce.com/wiki.php/Plugin:noneditable 。

请参阅：“当前不支持嵌套的可编辑元素。您将无法编辑下表中的单元格内容：”

```
<table class="mceNonEditable">
 <tr>
  <td class="mceEditable">
   Contents
  </td>
 </tr>
</table> 
```

如果有人有解决方法，请提供。

# text-editor - 我如何将我的 html 转换为支持 WMD 编辑器？

> ID：11312891
> 
> 赞同：0
> 
> 时间：2012-07-03T14:17:23.170
> 
> 标签：text-editor, rich-text-editor, wmd, wmd-editor

我的数据库中已经有 html，我想使用 wmd 编辑器，但是当我从数据库 wmd 编辑器获取 html 时，在 wmd 编辑器中显示 html，但我想要 wmd 样式的 html。喜欢粗体**粗体**。任何人都有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:08:12.243

您可能希望同时存储原始降价和 HTML，或者每次需要时重新处理降价。

# amazon-s3 - 为什么我在 aws ec2 的账单这么高？

> ID：11312894
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:17:32.673
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

我有一个应用程序，它正在从亚马逊 s3 流式传输一些音频。并且还使用托管在 ec2 中的一些 php 代码。我使用社区 ami 来启动其类型为 m1 small.but 在我的使用报告中，aws 计算云成本为 61 美元一个月。我也在使用 1 个弹性 IP。该报告中 s3 的使用为 0 美元，账单似乎真的很大。这似乎很不自然。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:31:24.423

你用的是哪个操作系统？如果是 linux，我计算的差不多是 61 美元，因为你运行的是一个小实例（Linux/Small/24h 每天）。我不确定您是否真的需要一个**小型**的 - 请考虑使用**微型**的以获得免费层使用资格。

但是，我希望计算器对您有所帮助：[http ://calculator.s3.amazonaws.com/calc5.html](http://calculator.s3.amazonaws.com/calc5.html)

问候， 彼得

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:27:46.683

一个小型实例每小时收费 0.08 美元。一个月大约有 750 个小时，每月总计 60 美元。他们可能也有税收。现在，我知道您说它是由社区 AMI 启动的，但我认为如果您的实例未启动，您必须每小时为弹性 IP 支付 0.01 美元，这不算多，但如果您使用Amazon Route53 DNS。

我的想法：

*   也许您的 EC2 实例的停留时间比您预期的要长

如果你还在担心。我会和亚马逊的支持谈谈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T23:01:06.280

尝试[现场实例](http://aws.amazon.com/ec2/spot-instances/)。ec2 现货实例价格为每小时 0.007。您应该能够显着降低 61 美元/月的费用。请求 Spot 实例时，您可以使用每小时 0.08 的按需价格，您将支付最低费用，最高为每小时 0.08，之后您的实例将被终止。我运行 Spot 实例并按按需价格出价，但还没有终止一个实例。您还可以购买[预留实例](http://aws.amazon.com/ec2/reserved-instances/)以获得更便宜的小时费率。

# c# - 从C#中的文件中获取分隔符之间的字符串

> ID：11312895
> 
> 赞同：0
> 
> 时间：2012-07-03T14:17:33.920
> 
> 标签：c#

也许这个问题很熟悉，但在这种情况下我需要一个解释。

假设我有一个名为`test.txt`. 它有以下内容：

```
An example of this line. The line has more than 20 characters.
[sql]SELECT * FROM LINE WHERE aLine = '123'[/sql]
blah blah blah blah... 
```

**或者是关于什么的**

```
An example of this line. The line has more than 20 characters.
[sql]SELECT * FROM 
       LINE 
     WHERE aLine = '123'[/sql]
blah blah blah blah...

[sql] SELECT * FROM ME[/sql]

 etc..er
[sql]
   SELECT * FROM ALL
 [/sql] 
```

我想在`[sql]`和`[/sql]`分隔符之间得到一个字符串。

怎么做 ？用正则表达式？

谢谢耐心...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:20:21.503

您可以使用[此答案中的相同解决方案](https://stackoverflow.com/a/1717681/251671)

```
string ExtractString(string s, string tag) {
     // You should check for errors in real-world code, omitted for brevity
     var startTag = "[" + tag + "]";
     int startIndex = s.IndexOf(startTag) + startTag.Length;
     int endIndex = s.IndexOf("[/" + tag + "]", startIndex);
     return s.Substring(startIndex, endIndex - startIndex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:19:57.290

```
int start = foo.IndexOf("[sql]") + 5;

var sql = foo.SubString(start, foo.IndexOf("[/sql]") - start - 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:22:10.480

如果只有一次出现，您可以使用常见的字符串运算符：

```
string str = File.ReadAllText(@"c:\test.txt");

int start = str.IndexOf("[sql]");
int end = str.IndexOf("[/sql]");
string sql = str.Substring(start + 5, end - start - 5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-11T14:46:00.853

一个老问题，但这经常出现在关于搜索分隔字符串的 Google 查询中。我找到了一个很好的解决方案

[正则表达式：C# 提取双引号内的文本](https://stackoverflow.com/questions/13024073/regex-c-sharp-extract-text-within-double-quotes)

在“巴特的”答案中。

这是一个基于 Linq 的解决方案。您使用分隔符作为拆分字符拆分字符串。然后你保留所有奇数条目。

```
var stringArray = str.Split('"').Where((item, index) => index % 2 != 0); 
```

就我而言，我正在寻找由美元符号“$”分隔的字符串。示例：$WantThisString$。像冠军一样工作。谢谢巴特！

# puppet - 覆盖类中定义的资源

> ID：11312897
> 
> 赞同：0
> 
> 时间：2012-07-03T14:17:36.720
> 
> 标签：puppet

我想用 puppet 管理一个 SSH 公钥池。我不确定我做对了，但现在它是这样工作的：

我有一个类 mysshd，其清单包含我想要的 SSH 服务器的每个配置。此外，还有另一个清单包含作为“ssh_athorized_keys”资源的所有公钥。

目前，我希望所有这些都被注册，所以它们在清单中有“确保 => 存在”。所以每个节点都加载了方便的 mysshd 类，就是这样。

但是现在，我想在此清单中定义我的用户的所有公钥，并使用“确保 => 不存在”。然后，在我的 node.pp 中，对于每个节点，如果我愿意，我想将每个资源 ssh_authorized_keys 的值“确保”设置为“呈现”。

我试图为类中的某些资源覆盖“确保”参数，但我肯定错过了一点，而且我无法弄清楚如何做到这一点。

你能帮助我吗 ？

更多细节：

在 :`modules/iuem-sshd/manifests/publickeys.pp'`中，有我的 pub 键列表：

```
ssh_authorized_key{'gab':
        key => 'AAAAB3NzaC1yc2EAAAABIwAAAQEAugG5p+SHmDm8OKdKifipUuK/TIbVXgQXm5ee//Cne+2QU9gctxOechyptT0oNh57rXUDShHpkNToC6r1ZvPLpxae2p2kBWJl5O2u1ov9/L8eWSvCFlVFc/gicH1wWG9vrlh7gXGGrAb6rVJ97XVDNkDmmF43W+Z8p8AjRtzE4b9Z3ZGGgPbBaPHPybBogs3wP3d5cyaLqlQgjJQXdkWkaVq8ApWLnan34O1sZVimcD6TVVSBZ1PmnSZfchxYq56xMnI+GpYvvi0dw+JU9aS+br4g1K5LtxFlxp4YlKGlQByrFdhn21z3VRnDrPWomgQHvdyzTUqwIs7AKvmPbQX+kQ==',
        name => 'Nicolas',
        ensure => absent,
        type => "ssh-rsa",
        user => root,
} 
```

它由 init.pp 导入，它在 ssh 服务器上执行其他配置。

在节点配置中，我加载类 iuem-ssh ：

```
class {'iuem-sshd': } 
```

但我想覆盖设置：`ensure => present`例如`user => lagaffe`。

谢谢，

乔纳森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:21:44.610

听起来这是[虚拟资源的用例](http://docs.puppetlabs.com/guides/virtual_resources.html)

您可以在一个地方定义所有 ssh_authorized_keys，然后只在需要它们的地方实现它们。

# java - 使用 DateFormat.getDateTimeInstance().format(date);

> ID：11312901
> 
> 赞同：13
> 
> 时间：2012-07-03T14:18:01.130
> 
> 标签：java, junit, timezone, environment

在运行一些测试时，我遇到了以下问题。使用时：

```
private String printStandardDate(Date date) {
    return DateFormat.getDateTimeInstance(
        DateFormat.SHORT, DateFormat.SHORT).format(date);
} 
```

我发现这会产生不同格式的日期，具体取决于运行测试的位置。所以在本地的 windows / eclipse 我得到了一个结果：04/02/12 18:18 但在美国的 Linux 机器上我得到 2/4/12 6:18 PM

这会导致我的测试/构建失败：

> 预期：<[04/02/12 18:18]> 但是是：<[2/4/12 6:18 PM]>

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T14:21:16.273

这并不奇怪，这正是它应该如何工作的。

API 文档`DateFormat.getDateTimeInstance`说：

> **获取具有默认语言环境**的给定日期和时间格式化样式的日期/时间格式化程序。

 **您的 Windows 系统上的默认区域设置与美国的 Linux 机器上的不同。

如果您想精确控制日期和时间格式，请自行使用`SimpleDateFormat`并指定格式。例如：

```
private String printStandardDate(Date date) {
    return new SimpleDateFormat("dd/MM/yy HH:mm").format(date);
} 
```

更好的是重用该对象，但要注意它不是线程安全的（如果可能同时从多个线程调用该方法，如果这些线程使用相同的对象`SimpleDateFormat`，事情就会变得一团糟）。`SimpleDateFormat`

```
private static final DateFormat DATE_FORMAT =
    new SimpleDateFormat("dd/MM/yy HH:mm");

private String printStandardDate(Date date) {
    return DATE_FORMAT.format(date);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T14:21:37.913

格式基于代码中的默认语言环境。如果要确保结果，则必须确保使用特定的语言环境。该`getDateTimeInstance`方法被重载以提供一种[替代方法](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#getDateTimeInstance%28int,%20int,%20java.util.Locale%29)，该方法接收您要用作参数的语言环境。

```
public static final DateFormat getDateTimeInstance(int dateStyle,
                             int timeStyle,
                             Locale aLocale) 
```

如果您在两个测试环境中使用相同的语言环境，结果应该是相同的。**

# android - android tablerow 编辑手势

> ID：11312902
> 
> 赞同：0
> 
> 时间：2012-07-03T14:18:03.663
> 
> 标签：android, tablerow, android-tablelayout, android-gesture

在此处输入代码在我的 android 应用程序中，有一个包含喜爱产品的填充表格视图。有一个删除功能可以从列表中删除产品。我如何向用户展示他可以删除产品？就像在 ios 中一样，有一个名为 commiteditingstyle 的方法。纯android方式编辑tablerows的选项有哪些

*   longclicklistener 并在表格行上显示删除按钮
*   在编辑按钮上显示一个复选框

任何其他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:31:11.367

这真的取决于你的想象。我认为典型的 android UI 只会使用轻弹来删除，但有些像长按或按钮，有些使用“编辑列表”选项，在列表中的每个项目旁边添加一个复选框，然后为用户提供删除选项选定的项目（最适合管理大型列表或批量）。

希望有帮助！祝你好运！

# javascript - 将文本与单选按钮对齐

> ID：11312906
> 
> 赞同：0
> 
> 时间：2012-07-03T14:18:20.263
> 
> 标签：javascript, jquery

在下面的脚本中：

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>​ 
```

我修改了文本的宽度，使其适合 220 像素。如果文本有一定长度，这会导致文本在单选按钮下方换行。如这个小提琴所示：

[http://jsfiddle.net/25LjE/8/](http://jsfiddle.net/25LjE/8/)

选项应包裹到单选按钮的右侧，如图所示：

![在此处输入图像描述](../Images/04abbc7f51118524ba2450a803effe2e.png)

这可能吗 ？我想我需要修改“pds-answer-span”类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:29:29.103

在 CSS 面板上添加此样式

```
.pds-input-label { width: 85% !important }
.pds-input-label, .pds-answer-input { float: left;  } 
.pds-answer-group { height: auto; overflow: hidden; /* float clearing */ } 
```

你达到预期的效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:30:00.993

试试这个 - [http://jsfiddle.net/25LjE/11/](http://jsfiddle.net/25LjE/11/)

```
.pds-answer-input { margin-top: 4px; }

.pds-answer-input,
.pds-input-label { display: inline-block; max-width: 170px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:39:34.093

删除这个

```
.pds-input-label{
    width: auto! important;
} 
```

添加这个（其中 100px 是您想要的宽度）

```
#PDI_container6352993 .pds-input-label { 
    width 100px; 
} 
```

# javascript - 使用 ajax 发出 curl 请求

> ID：11312908
> 
> 赞同：1
> 
> 时间：2012-07-03T14:18:36.050
> 
> 标签：javascript, ajax, json, post, curl

这个[答案](https://stackoverflow.com/a/6230300/67258)在很大程度上帮助了我，但并没有完全解决我的问题。我正在使用与此类似的代码，即：

```
function getResponse() {

    var the_url = "http://www.myurl.com/api/get";

    $.ajax({
      url: the_url,
      dataType: 'jsonp',
      type: 'get',
      success: function(data) {
        var json_response = data;
        alert(data);
      }
    });
} 
```

基本上，由于身份验证，我需要发布一个 curl 而不是仅仅发布一个 url。

该示例适用于简单的 url，但我想要用于 'the_url' 的是：

```
var the_url = 'curl -u username:password "http://www.myurl.com/api/get"'; 
```

这是我遇到问题的地方，这意味着永远无法达到成功声明。

解决此问题的最佳方法是什么，如果无法实现，有人可以推荐最佳解决方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:23:01.540

您需要 JavaScript 指向的服务器上的一个页面，其中包含 curl 命令。您不能像这样直接将 cURL 作为 url 运行。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $the_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, $_SERVER['REQUEST_URI']);
$result = curl_exec($ch);
curl_close($ch);
echo $result; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:26:52.277

如果您使用的是简单的 AJAX，那么您可以在 AJAX 调用开始时添加自定义（基本身份验证）标头。但是您使用的是 JSONP，这实际上相当于`<script>`在您的 HTML 中添加标签。

所以您要问的是：我可以使用`<script>`标签进行基本身份验证吗？不，你不能。

留给您的唯一可能性是像 Matt Gibson 建议的那样进行服务器端处理。

但是请注意，浏览器应在 JSONP 请求之后触发身份验证对话框（另请参阅[此答案](https://stackoverflow.com/questions/1640391/how-do-i-make-a-jsonp-call-with-jquery-with-basic-authentication)）。它在你的情况下不起作用吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T14:24:21.460

更新您的[jquery ajax](http://api.jquery.com/jQuery.ajax/)调用以包含HTTP 身份验证的`username`和选项，请参阅文档中的[高级选项](http://api.jquery.com/jQuery.ajax/#advanced-options)：`passward`

> ```
> If the server performs HTTP authentication before providing a response,
> the user name and password pair can be sent via the username 
> and password options. 
> ```

**正如评论中指出的那样**更新，HTTP 身份验证根本**[不适用于 JSONP](https://stackoverflow.com/questions/1640391/how-do-i-make-a-jsonp-call-with-jquery-with-basic-authentication)，因为提问者使用了（没看到，我的错）。无论如何，我都会把这个答案留在这里，让其他人找到不使用 JSONP 的。**

# jquery - 图像加载时的 jQuery 触发器（隐藏图像）

> ID：11312914
> 
> 赞同：0
> 
> 时间：2012-07-03T14:19:01.183
> 
> 标签：jquery, triggers, load, background-image, image

好的，所以我听说 JS 无法在 CSS 背景图像加载时触发事件。所以，我看到一些人建议，是在加载 img 标签时触发事件。但是您显然需要隐藏此图像以使其不显示？

您是否需要将此图像放在页面上的某个位置，然后执行以下操作：display:none css？

否则它显然会是一个你不想看到的漂亮的大图像......

我原以为大多数像样的浏览器都不会加载图像，如果它是 display:none; . 或者 JS 是否可以将图像加载到缓存中，而 HTML 完全不知道它？

我错了吗？...如果是这样，这是人生中罕见的错误时刻之一。

等不及 HTML6 了。也不能像往常一样等待没有人支持它，然后再成为另一个愤世嫉俗的白痴，再为此狂奔5年。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:25:02.707

Display none 实际上根本无法加载图像，这完全抵消了您想要完成的任务。

您可以轻松地将图像添加到“缓存”。

```
var myImage = new Image();
    myImage.onload = function(){
        // What you want to do!
    };
    myImage.src = 'myimage.png'; 
```

# ios - 在 OCUnit 中使用核心数据类的 Apple Mach-O 链接器错误

> ID：11312915
> 
> 赞同：5
> 
> 时间：2012-07-03T14:19:05.577
> 
> 标签：ios, xcode, core-data, ocunit

好的，这是我的测试类中的代码：

```
 - (NSManagedObjectContext*)managedObjectContextWithConcurrencyType:(NSManagedObjectContextConcurrencyType)concurrencyType {
    NSManagedObjectModel *mom = [NSManagedObjectModel mergedModelFromBundles:nil];
    STAssertNotNil(mom, @"Can not create MOM from main bundle");

    NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];
    STAssertNotNil(psc, @"Can not create persistent store coordinator");
    NSPersistentStore *store = [psc addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:0];
    STAssertNotNil(store, @"Can not create In-Memory persistent store");

    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:concurrencyType];
    moc.persistentStoreCoordinator = psc;

    return moc;
} 
```

这是尝试在测试方法中使用该方法时的失败消息：

```
Undefined symbols for architecture i386:
  "_NSInMemoryStoreType", referenced from:
      -[CrosswordItemTests managedObjectContextWithConcurrencyType:] in CrosswordItemTests.o
  "_OBJC_CLASS_$_NSEntityDescription", referenced from:
      objc-class-ref in CrosswordItemTests.o
      "_OBJC_CLASS_$_NSManagedObjectContext", referenced from:
      objc-class-ref in CrosswordItemTests.o
  "_OBJC_CLASS_$_NSManagedObjectModel", referenced from:
      objc-class-ref in CrosswordItemTests.o
  "_OBJC_CLASS_$_NSPersistentStoreCoordinator", referenced from:
      objc-class-ref in CrosswordItemTests.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我以为我在 .h 文件中导入了所需的类：

```
#import <CoreData/CoreData.h> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T14:38:54.123

根据我的经验，i386 错误往往来自缺少库。仅将它们#import 到您的文件中是不够的，您还必须将它们添加到项目库中。进入 Project Target -> Build Phases -> Link Binary with Libraries 并在您的情况下添加与 Core Data 关联的库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T14:24:22.567

您可能尚未将库链接到目标。

![在此处输入图像描述](../Images/bc393905e7780edeba9e9da28c05cda5.png)

取自：http: [//yannickloriot.com/wp-content/uploads/2012/03/Link-CoreData-Framework-To-The-Project.png](http://yannickloriot.com/wp-content/uploads/2012/03/Link-CoreData-Framework-To-The-Project.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T07:26:53.647

将“No Common Blocks”从 Yes 更改为 No（在 Targets->Build Settings->Apple LLVM - Code Generation 下）解决了这个问题。这解决了我的问题。希望对您有所帮助。

# html - 自定义 URL 的自定义 Pinterest 按钮（文本链接、图像或两者）

> ID：11312923
> 
> 赞同：36
> 
> 时间：2012-07-03T14:19:21.817
> 
> 标签：html, css, pinterest

我试图找到解决方案，但找不到。我需要一个 Pinterest（Pin It）按钮的自定义图像，并通过 url 固定一些自定义图像，而不是当前页面。

我创建了一个自定义链接：

```
<a href="http://pinterest.com/pin/create/button/?url=http://inspired-ui.com&media={ImageURL}&description=DescriptionText" class="pinitbutton">Pin It</a> 
```

在样式中我设置了背景图像，但我只看到默认的 Pin It 按钮而不是我的自定义按钮

有一些解决方案可以为 Pin It 按钮设置自定义按钮图像，但我无法在这些解决方案中更改 media={ImageURL}。

流行的解决方案是

```
<a href='javascript:void((function()%7Bvar%20e=document.createElement(&apos;script&apos;);e.setAttribute(&apos;type&apos;,&apos;text/javascript&apos;);e.setAttribute(&apos;charset&apos;,&apos;UTF-8&apos;);e.setAttribute(&apos;src&apos;,&apos;http://assets.pinterest.com/js/pinmarklet.js?r=&apos;+Math.random()*99999999);document.body.appendChild(e)%7D)());'><img src='http://www.brandaiddesignco.com/blog/PinIt.png'/></a> 
```

但这对我没有帮助。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-15T01:45:47.527

事实上，*Jeremy Mansfield*在[www.brandaiddesignco.com](http://www.brandaiddesignco.com/blog/add-a-custom-pinterest-pin-it-button-to-your-website/375/)上的流行解决方案有一个很好的方法来自定义 Pinterest 按钮**，你可以随心所欲**！

我以**jsFiddle 的**形式制作了**三个示例**，因此您可以看到使用该方法是如何完成的。

 ****参考：** [**jsFiddle Text-Link 方法**](http://jsfiddle.net/hUAh8/1/)
**参考：** [**jsFiddle Custom Logo 方法**](http://jsfiddle.net/hUAh8/2/)
**参考：** [**jsFiddle Custom Logo and Image 方法**](http://jsfiddle.net/hUAh8/3/)

有关更多**Pinterest 信息**，请参阅我的其他[**SO 答案**](https://stackoverflow.com/a/11253923/1195891)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-25T10:32:48.837

在 URL 的最后一个片段之前添加一个编码的空格将防止 Pinterest 的 JS “劫持”链接：

```
//pinterest.com/pin/create/%20button?url= 
```

**更新：**

看来我以前的解决方案不再起作用了。这是另一个：

```
//pinterest.com/pin/create%2Fbutton/?url= 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-23T00:29:49.003

冒着过度简化事情的风险，使用你`'http://pinterest.com/pin/create/button/?url='`已经拥有的路径，设置你的变量，然后像你一样附加它们，只是不要包含任何 pinterest javascript。如果没有那个 js，它将找不到链接并用他们自己的 pinterest 按钮替换它。只需使用其中的图像自定义链接（或设置背景图像或其他）并拧紧 pinterest js。将目标设置为在新窗口中打开。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-07-29T15:16:12.347

自定义链接/按钮如下所示：

```
<a href="http://stackoverflow.com/questions/11312923/custom-pinterest-button-for-custom-url-text-link-image-or-both" data-image="http%3A%2F%2Fcdn.sstatic.net%2Fstackexchange%2Fimg%2Flogos%2Fso%2Fso-logo.png" data-desc="Custom Pinterest button for custom URL (Text-Link, Image, or Both)" class="btnPinIt">
    Custom Pin it image or text here!
</a> 
```

注意：我认为不需要对数据属性进行编码（就像我对数据图像所做的那样），但它似乎并没有伤害它。

查询：

```
$('.btnPinIt').click(function() {
    var url = $(this).attr('href');
    var media = $(this).attr('data-image');
    var desc = $(this).attr('data-desc');
    window.open("//www.pinterest.com/pin/create/button/"+
    "?url="+url+
    "&media="+media+
    "&description="+desc,"_blank");
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-30T05:34:26.633

这对我有用：

```
<a href="//www.pinterest.com/pin/create/button/" data-pin-do="buttonPin" data-pin-custom="true"><img src="../img/custompinint.png" /></a> 
```

属性 data-pin-custom 是我从[Pinterest 文档](https://developers.pinterest.com/docs/widgets/pin-it/)中获得的。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-03T17:43:21.053

经过一些试验和错误，以下是对我有用的。此响应是@rharvey 的响应线程和另一个堆栈溢出帖子的组合。此解决方案打开一个弹出窗口以通过 pinterest 共享内容。

注意：为了防止弹出 2 个窗口，您需要设置一个目标。以下是完整的解决方案：

```
 <a href="http://stackoverflow.com/questions/11312923/custom-pinterest-button-for-custom-url-text-link-image-or-both" data-image="http%3A%2F%2Fcdn.sstatic.net%2Fstackexchange%2Fimg%2Flogos%2Fso%2Fso-logo.png" data-desc="Custom Pinterest button for custom URL (Text-Link, Image, or Both)" class="btnPinIt" target= "pinIt">
    Custom Pin it image or text here!
</a> 

<script>
$('.btnPinIt').click(function() {
    var url = $(this).attr('href');
    var media = $(this).attr('data-image');
    var desc = $(this).attr('data-desc');
    window.open("//www.pinterest.com/pin/create/button/"+
    "?url="+url+
    "&media="+media+
    "&description="+desc,"pinIt","toolbar=no, scrollbars=no, resizable=no, top=0, right=0, width=750, height=320");
    return false;
});
</script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-10T01:37:24.470

完美地为我工作。你的脚本

```
 <script>
    function pinIt()
    {
      var e = document.createElement('script');
      e.setAttribute('type','text/javascript');
      e.setAttribute('charset','UTF-8');
      e.setAttribute('src','https://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);
      document.body.appendChild(e);
    }
    </script> 
```

调用它

```
<a href="javascript:pinIt();">Pin</a> 
```**

# automated-tests - 用于自动查找错误的测试套件

> ID：11312924
> 
> 赞同：1
> 
> 时间：2012-07-03T14:19:30.403
> 
> 标签：automated-tests, verification, test-suite

对于命题可满足性、定理证明、旅行推销员等多种难计算问题，有一个广泛的测试套件可用于评估试图解决该问题的程序的性能。

是否存在用于自动查找错误的任何此类东西，即包含可以自动检测到的已知错误的程序或代码片段的集合？我假设，例如 Coverity 必须有这样的东西供内部使用，但谷歌搜索似乎没有显示任何公开可用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:53:12.840

我不认为这样的套房存在。“标准”套件最明显的问题是，它会用什么语言编写？

对于 C，您可以在此处查看[SAFECode](https://github.com/otinn/safecode/tree/master/test)[的](http://www.safecode.org/index.php)测试套件。SAFECode 旨在在运行时检测这些错误，但“完美”的静态分析工具应该能够静态检测它们。

一个更全面、更重要的静态分析工具是[Frama-C](http://frama-c.com/)。请参阅题为“[测试驱动静态分析工具以查找 C 代码漏洞](http://www.parasoft-embedded.biz/presentation/STPSA_2011.pdf)”的论文。该论文描述了对您所要求的测试套件的需求。它还链接到[测试套件](http://mathind.csd.auth.gr/static_analysis_test_suite/)和常见分析仪之间的有效性。Frama-C 可能有自己的基准，你可以下载源代码并检查。

也可以看看：

*   “Frama-C 新闻和想法”博客，页面“[静态分析基准](http://blog.frama-c.com/index.php?post/2012/01/11/Static-analysis-benchmarks)”，列出了一些其他基准
    *   “[软件模型检查器的缓冲区溢出基准（短论文）](http://www.cs.toronto.edu/~chechik/pubs/ase07.pdf) ”
        1.  [http://se.cs.toronto.edu/index.php/Verisec_Suite](http://se.cs.toronto.edu/index.php/Verisec_Suite)
    *   [http://samate.nist.gov/SRD/view.php](http://samate.nist.gov/SRD/view.php)
    *   [http://samate.nist.gov/SRD/testCases/suites/Juliet-2010-12.c.cpp.zip](http://samate.nist.gov/SRD/testCases/suites/Juliet-2010-12.c.cpp.zip)（不同的基准）

# asp.net - 将用户控件标记为已过时

> ID：11312925
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:19:46.353
> 
> 标签：asp.net

我们有一个供不同团队使用的 asp.net 框架。在我们的框架中，我们有一个必须废弃的电子邮件用户控件。该控件已被重写为 webcontrol。

我可以使用户控件过时吗？我尝试将过时的属性放在类名本身

```
<Obsolete("This usercontrol is obsolte. Use the web control AtaMail")> _
Partial Public Class UCAtaMail
   Inherits System.Web.UI.UserControl
   ... 
```

但是当团队在他们的 aspx 页面上引用控件时，这不会显示在团队中。也许还有其他解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:36:06.687

您可以在用户控件的后端代码（.cs 文件）中执行此操作。

[这里是如何在 C# 中将某些东西标记为过时的](http://msdn.microsoft.com/en-us/library/aa664623%28v=vs.71%29.aspx)

# python - python：根据要求生成线程

> ID：11312928
> 
> 赞同：2
> 
> 时间：2012-07-03T14:19:47.900
> 
> 标签：python, multithreading

我正在创建一个小型应用程序，它将执行 4 个不同的、耗时的任务，例如第一个的输出是第二个的输入，依此类推。在每个任务级别，输出都被附加到一个列表中，下一个任务弹出，操作并将其输出附加到它的输出列表等等......我认为我完成任务的方式是在每个任务上都有多个线程这4项任务中。

谈到这个问题，**有没有什么方法可以让我的应用程序根据输入队列中的任务数量在每个任务级别生成线程？**

假设第二个任务的输入列表在开始时是空的，所以线程数为零但是如果有一个任务，则产生单个线程，两个两个等......当然线程数有上限说10，因此如果输入列表的长度高达 100，则操作的线程数仍保持在 10。

请提出实现这一目标的pythonic方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:24:49.597

你已经成功地发明了[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)。有内置支持，并且有许多[库](http://pypi.python.org/pypi/threadpool/)和[示例](http://code.activestate.com/recipes/577187-python-thread-pool/)可以为您提供此支持，因此请使用其中的一个或从他们的代码中学习。

```
from multiprocessing.pool import ThreadPool 
```

# ruby-on-rails - 通过get in rails传递参数数组

> ID：11312930
> 
> 赞同：45
> 
> 时间：2012-07-03T14:19:49.943
> 
> 标签：ruby-on-rails, http

如何通过 Rails 中的 Get 方法传递参数数组？目前我的网址是这样的：

```
http://localhost:3000/jobs/1017/editing_job_suites/1017/editing_member_jobs/new?ids[]=1025&ids[]=1027 
```

如何使用 Get 方法传递数组但避免`?ids[]=1025&ids[]=1027`部分。

正在使用 javascript window.open 方法发送请求。是否有任何解决方法可以发送非 ajax Post 请求。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-04-14T17:59:39.873

如果你不改变任何东西的状态，你应该坚持使用 GET 请求，并且你想要访问只读值。

要在 GET 请求中将一组 id 发送到 rails，只需在末尾用方括号命名变量即可。

```
//angular snippet

$http.(method:'GET',
  ...
  params: {'channel_id':2, 'product_ids[]': productIds}  
  //where productIds is an array of integers
  ...
) 
```

不要将您的 id 连接为逗号分隔的列表，只需冗余地单独传递它们。所以在 url 中它看起来像这样：

```
?channel_id=2&product_ids[]=6900&product_ids[]=6901 
```

url 编码它实际上会更像这样：

```
?channel_id=2&product_ids%5B%5D=6900&product_ids%5B%5D=6901 
```

Rails 会为你分离出来。

```
Parameters: {"channel_id"=>"2", "product_ids"=>["6900", "6901"]} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-03T14:27:34.087

不，GET 只能将变量放在 url 本身上。如果您希望 URL 更短，则必须 POST。这是 HTTP 的~~限制~~功能，而不是 Rails。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-03T00:49:51.067

我最近想这样做，并找到了一种不太复杂的解决方法，因此有一些复杂性限制，但也可能更容易实现。不能和保安说话等等。

如果您将数组值作为带有分隔符的字符串传递，例如

```
http://example.com/controller?job_ids=2342,2354,25245 
```

然后您可以获取结果并将其解析回您想要的内容：

```
job_ids = params[:job_ids].split(',') 
```

然后做任何事情：

```
 job_ids.each do |job_id|
      job = Job.find(job_id.to_i)
    end 
```

ETC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T17:41:34.390

@Homan 答案对于使用外部客户端（例如`curl`或角度）有效。不过，在 Rails 测试用例中，您不应该使用`[]`. 这是一个例子：

```
get get_test_cases_url(**path_params), params: {case_ids: ["NON-9450", "NON-12345", "NON-9361"]} 
```

这是使用新格式，其中`get_test_cases`是路由名称，并且您将构造 URL 路径所需的所有参数传递给该方法。查询参数是一个单独的哈希。

仅供参考，如果我使用`[]`like `case_ids[]`，那么`["NON-9450", "NON-12345", "NON-9361"]`我不会将其解析为`[["NON-9450"], ["NON-12345"], ["NON-9361"]]`

# java - Java DOM 解析读取节点失败

> ID：11312939
> 
> 赞同：0
> 
> 时间：2012-07-03T14:20:23.053
> 
> 标签：java, parsing, dom, element, nodes

我正在尝试从 xml 文件中获取特定节点的值，这工作正常。

但是，有一行我看不懂：

```
<misc viewers="898" duration="6684"/> 
```

我可以找到节点，但 getNodeValue() 和 getTextContext() 都返回 null。

是否有解决方法来获取此行的内容？

谢谢

编辑：我正在使用这个循环来查找节点

```
NodeList nodes = doc.getElementsByTagName("item");

        for (int i = 0; i < nodes.getLength(); i++) {

            Element element = (Element) nodes.item(i);
            System.out.println("Title: "
                    + getElementValue(element, "title"));
            System.out
                    .println("embed: " + getElementValue(element, "misc"));

            System.out.println();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:30:58.783

`viewers`并且`duration`是`misc`节点的属性，而不是值。您需要调用`getAttributes()`以获取所有属性的 NamedNodeMap，然后调用`getNamedItem()`您的节点映射以访问特定属性。

# javascript - Javascript InnerHTML 输出错误

> ID：11312940
> 
> 赞同：0
> 
> 时间：2012-07-03T14:20:24.503
> 
> 标签：javascript, html, string, tags, innerhtml

```
function test()
{
var formHTML ="";
var frmid ="test123";

var options = ["Test1", "Test2", "Test3", "Test4", "Test5"]
formHTML += "<select id='" + frmid + ">";

console.log(options);

for ( i = 0; i < options.length; i++) {
    var temp = options[i];
    var temp2 = "<option value='" + temp + "'>" + temp + "</option>";
    console.log(temp2);
    formHTML += temp2;
}
formHTML += "</select>";
console.log(formHTML); 
document.getElementById("injected").innerHTML+=formHTML; 
```

}

以上是我在我的页面中创建一个选择元素的函数，当我调用这个函数时有一个非常奇怪的问题，它只显示选项 test2、test3、test4、test5 而不是一个......

当我使用 console.log 打印出 formHTML 时，它显示..

```
<select id='test123><option value='Test1'>Test1</option>
<option value='Test2'>Test2</option>
<option value='Test3'>Test3</option>
<option value='Test4'>Test4</option>
<option value='Test5'>Test5</option>
</select> 
```

但是，如果您运行代码并查看源代码，则 HTML 元素不正确，第一个元素看起来像

```
 <option value='test1'> Test1 
```

缺少关闭选项标签，

我尝试过调试和更改代码，但这个问题让我感到困惑。

是否缺少一些东西有没有更好的方法来解决这个问题？出于速度原因，我试图在操作 DOM 之前将其全部存储在一个字符串中。感谢所有帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:23:45.253

你在这一行有一个错误

```
formHTML += "<select id='" + frmid + ">"; 
```

将其更改为

```
formHTML += "<select id='" + frmid + "'>"; 
```

# linux - “/etc”在Unix / GNU Linux Zen 中的作用

> ID：11312945
> 
> 赞同：1
> 
> 时间：2012-07-03T14:20:41.900
> 
> 标签：linux, unix, filesystems, gnu

我有一个关于 Unix / GNU Linux 的 Zen 的问题，这对我来说似乎是一个恍然大悟的时刻......

显然，任何标准的 Unix/Linux 程序都有一个配置文件，**大部分**位于**/etc**目录。

我们能不能推导出以下概念：

1- 作为应用程序开发人员，您应该设计具有自定义文件的软件（可能位于 /etc.）

2-然后，管理员或用户可以根据他们的需要设置这些配置并运行您的程序。

3-改变你的程序的行为应该只取决于它的配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:29:52.030

如果你问这是否属实，那往往是惯例，是的。请记住，开发人员可以自由设计他们的程序以按照他们想要的方式运行，并且他们倾向于遵循这种模式只是为了方便相似。

您可能会看到的其他模式：

*   没有全局设置且只有每个用户设置的程序可以将它们的设置存储在 ~/.[something] 中，或者可能完全存储在其他地方。许多程序这样做并使用 /etc。Bash 是一个很好的例子，使用 /etc/profile/.bashrc 进行默认设置，使用 ~/.bashrc 进行用户设置。

*   一些程序的非常大的独立安装可能会将它们的所有文件打包到它们自己的.../etc、.../bin 等目录中，并且根本不会使用典型的系统目录。这方面的一个例子是 charybdis，一个 ircd，它将所有内容存储在编译时指定的文件夹中（我的位于 /var/ircd，所以我有 /var/ircd/etc、/var/ircd/bin、/var/ircd /lib, ...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:28:17.213

OSX 是经过认证的 Unix，并试图不使用 etc - 实际上只有 Apple 提供的程序应该更改 /etc，它们提供替代方案。

但是，对于包括 Windows 在内的所有操作系统，您确实有一个单独的配置/自定义文件（或在 Windows 中的注册表），并且可能需要其中两个。一种由管理员设置和控制，另一种用于用户所做的更改。前者可以使用 /etc for Linux 参见[Filesystem_Hierarchy_Standard](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-27T18:10:54.160

`etc`表示**可****编辑**的文本**文本**配置

# protocols - 类型-长度-值与定义/结构化长度-值

> ID：11312947
> 
> 赞同：1
> 
> 时间：2012-07-03T14:20:48.990
> 
> 标签：protocols, data-representation, tlv

毫无疑问，数据的长度值表示是有用的，但是类型长度值比它有什么优势呢？

当然，使用 LV 需要预定义或结构化表示，但这几乎不是问题。实际上，我想不出一个足够好的案例，因为它的定义不够好，以至于需要 TLV。

就我而言，这是关于数据交换/协议的。在任何情况下，都必须知道要处理的双方都知道表示，这消除了在数据中显式插入类型的需要。关于该类型何时有用或必要的任何想法？

**编辑**
我应该提到通用解析器/处理器肯定会从类型信息中受益，但这不是我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:02:32.530

我能想出的唯一正当理由是数据的通用处理器，主要用于调试或直接用户演示。将类型嵌入数据将允许处理器正确处理数据，而无需预定义所有可能的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:02:51.843

维基百科中提到了以下几点。

可以安全地跳过在旧节点接收到的新消息元素，并且可以解析消息的其余部分。这类似于可以安全地跳过未知 XML 标记的方式；

示例：想象一条用于拨打电话的信息。在系统的第一个版本中，这可能使用两个消息元素，“command”和“phoneNumberToCall”：

command_c/4/makeCall_c/phoneNumberToCall_c/8/"722-4246" 这里 command_c、makeCall_c 和 phoneNumberToCall_c 是整数常量，4 和 8 分别是“值”字段的长度。

稍后（在版本 2 中）可以添加一个包含主叫号码的新字段：command_c/4/makeCall_c/callingNumber_c/8/"715-9719"/phoneNumberToCall_c/8/"722-4246"

从版本 2 系统接收消息的版本 1 系统将首先读取 command_c 元素，然后读取类型为 callingNumber_c 的元素。

版本 1 系统不理解 ;callingNumber_c，因此读取长度字段（即前 8 个），系统向前跳过 8 个字节读取它理解的 phoneNumberToCall_c，并继续进行消息解析。

如果没有 type 字段，版本 1 解析器将不知道跳过 callNumber_c 而是调用错误的号码，并可能在消息的其余部分抛出错误。因此 type 字段允许以省略它的方式向前兼容。

# asp.net-mvc-3 - 更新自身外部的 JQuery dataTable 表

> ID：11312950
> 
> 赞同：0
> 
> 时间：2012-07-03T14:20:58.303
> 
> 标签：asp.net-mvc-3, datatables

我设法让 jquery 数据表插件与 asp.net mvc 3 一起使用，因此它回发 json，并具有搜索功能。

现在的问题是我需要移动搜索框并在自定义菜单旁边的“正常”位置之外添加一个“语言”过滤器。

有没有办法可以整合：

```
Language: <select name="languageid">
<option value="SV">Swedish</option>
<option value="EN">English</option>
</select>
Keywords: <input type="text" name="keywords"> 
```

在语言 ID 或关键字更改时刷新数据表？并且仍然有排序，分页工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:38:07.817

今天我的大脑只有一半的功率，但简短的回答是，这是可以做到的；只是我的建议有点含糊……对不起！

*   oLanguage中有一整套语言选项；对我来说有点“太长，没读过”，但也许那里的东西可以帮助您确定在哪里设置语言切换器

*   您可以从主表中删除搜索框并设置自己的，使用 fnFilter 方法触发搜索

*   根据您的其他选项的配置方式（例如服务器端），有一些方法可以触发表的刷新。您将为 languageid 或关键字更改操作 ( `.on('change', '#languageid', function(e) { /* ... */ })`) 绑定一个侦听器，这将触发适当的刷新操作（在我使用服务器端的实例中，我使用`fnDraw()`）

对于这个没有方向的建议，我很抱歉，但我希望你至少知道这是可能的。直接在 datatables.net 论坛上发布问题可能会为您提供最佳答案。

# c# - 在 ASP.NET C# 中读取 MS Word

> ID：11312957
> 
> 赞同：-4
> 
> 时间：2012-07-03T14:21:17.980
> 
> 标签：c#, asp.net, ms-word

我想在 ASP.NET C# 中阅读 MS Word。我想在文本框中打印 word 文件的文本。以及其他文本框中的文档数据的索引或标题。我搜索了可能的论坛，但没有得到提供免费 api 来完成此任务的答案。

请提供示例代码来完成此任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:20:00.477

如果您的计算机上安装了 Word，那么您已经拥有所需的 API。请参阅以下文档：http:
[//msdn.microsoft.com/en-us/library/bb726434](http://msdn.microsoft.com/en-us/library/bb726434)

就代码示例而言，您的问题太广泛了，您没有展示任何工作。

# java - 是否可以将 Servlet 配置为不自动关闭响应的 OutputStream？

> ID：11312958
> 
> 赞同：1
> 
> 时间：2012-07-03T14:21:20.797
> 
> 标签：java, tomcat, servlets, outputstream

即使在请求线程退出（即从不同的线程）之后，我也希望能够写入 HttpServletResponse 的 OutputStream。问题是，当请求线程退出时，输出流会自动关闭。

我想知道是否有任何方法可以配置响应（或者可能是 Web 容器，在我的情况下是 Tomcat），以便除非我如此明确地订购，否则它的输出流不会关闭？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:26:16.763

不，没有这样的事情。一旦 servlet 完成运行，就会将**响应**发送回客户端，并且您不能再在**响应**上写入。

确保在 servlet 中处理**响应。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:28:11.917

使用 Servlet 3.0 异步 servlet，您的 servlet 将有效地“永不”退出。它们是专门为这个问题设计的。如果您可以使用 Servlet 3.0，那么有几个“彗星”实现可以做到这一点。

# javascript - 如何使用 table.insertRow 插入具有属性的行？

> ID：11312962
> 
> 赞同：0
> 
> 时间：2012-07-03T14:21:30.137
> 
> 标签：javascript, html, html-table, format, row

我有一个 html 表并使用 插入新行`table.insertRow()`，但新行没有应用任何属性或格式。如何使用行格式向表中添加行？

```
<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

<INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

<TABLE id="dataTable" width="100%" align="center">
    <TR align="center" border="1">
        <TH></TH>
        <TH>ID </TH>
        <TH>Name</TH>
        <TH>Status</TH>
    </TR>
    <TR align="center">
        <TD><INPUT type="checkbox" name="chk"/></TD>
        <TD> 1 </TD>
        <TD> <INPUT type="text" value="Submission 1" /> </TD>
    <TD>Working version</TD>
    </TR>
</TABLE>

<script type="text/javascript">
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        cell3.appendChild(element2);

    }

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }
        }
        }catch(e) {
            alert(e);
        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:04:21.580

我发现最好使用 jquery 向表中添加行

```
 $('#dataTable tr:last').after('<TR align="center"><TD><INPUT type="checkbox" name="chk"/></TD><TD>'+ rowCount + '</TD><TD> <INPUT type="text" value="Submission 1" /> </TD><TD>Working version</TD></TR>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-20T03:35:24.230

要为 tablerow 设置类名，您只需编辑 className 属性，如下所示

```
<script>
var table = document.getElementById("tableID");
var rowCount = table.rows.length;
var row = table.insertRow(rowCount-1);
row.className = "rowdiv";
</script>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:12:44.450

考虑到 insertRow() 通常是放置索引的位置，而 var row = table.insertRow(rowCount); 在这里使用，如何将其移动到表格的特定部分？

# python - Tkinter Gui 读取 csv 文件并根据第一行中的条目生成按钮

> ID：11312965
> 
> 赞同：4
> 
> 时间：2012-07-03T14:21:41.967
> 
> 标签：python, user-interface, csv, tkinter

我需要在 Tkinter 中编写一个可以选择 csv 文件的 gui，将其读入并根据 csv 文件第一行中的名称生成一系列按钮（稍后应该使用 csv 文件中的数据来运行模拟次数）。

到目前为止，我已经设法编写了一个可以读取 csv 文件的 Tkinter gui，但是对于我应该如何继续，我感到很困惑：

```
from Tkinter import *
import tkFileDialog
import csv

class Application(Frame):
    def __init__(self, master = None):
        Frame.__init__(self,master)
        self.grid()
        self.createWidgets()

    def createWidgets(self):
        top = self.winfo_toplevel()
        self.menuBar = Menu(top)
        top["menu"] = self.menuBar
        self.subMenu = Menu(self.menuBar)
        self.menuBar.add_cascade(label = "File", menu = self.subMenu)
        self.subMenu.add_command( label = "Read Data",command = self.readCSV)

    def readCSV(self):
        self.filename = tkFileDialog.askopenfilename()
        f = open(self.filename,"rb")
        read = csv.reader(f, delimiter = ",")

   app = Application()
   app.master.title("test")
   app.mainloop() 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T21:11:26.783

这是一种方法。我不确定您将如何绑定到不同的事件处理程序，但您应该能够使用 lambda 方法传递按钮名称（假设它是唯一的）并以这种方式处理不同的操作。

```
from Tkinter import *
import tkFileDialog
import csv

class Application(Frame):
    def __init__(self, master = None):
        Frame.__init__(self,master)
        self.grid()
        self.createWidgets()

    def createWidgets(self):
        top = self.winfo_toplevel()
        self.menuBar = Menu(top)
        top["menu"] = self.menuBar
        self.subMenu = Menu(self.menuBar)
        self.menuBar.add_cascade(label = "File", menu = self.subMenu)
        self.subMenu.add_command( label = "Read Data",command = self.readCSV)

    def readCSV(self):
        self.filename = tkFileDialog.askopenfilename()
        f = open(self.filename,"rb")
        read = csv.reader(f, delimiter = ",")
        buttons = read.next()
        print
        for btn in buttons:
            new_btn = Button(self, text=btn, command=self.btnClick)
            new_btn.pack()

    def btnClick(self):
        pass

app = Application()
app.master.title("test")
app.mainloop() 
```

# cordova - 带有 Android 的 PhoneGap ChildBrowser 插件 - 通过视图转换保持触摸

> ID：11312966
> 
> 赞同：3
> 
> 时间：2012-07-03T14:21:43.927
> 
> 标签：cordova, phonegap-plugins, kendo-ui, childbrowser

我对 Android 的 PhoneGap ChildBrowser 插件（也使用 Telerik 的 Kendo UI 框架）有一个非常奇怪的问题。如果项目中包含 ChildBrowser 插件，则任何持续时间超过一秒的触摸都会通过转换到下一个视图来保持。因此，如果我在第 1 页上触摸一个按钮，则在第 2 页上保持和执行相同的触摸（然后将在第 2 页上启动与该触摸位置相对应的任何操作）。

如果我删除 ChildBrowser 它工作正常。这发生在使用插件的视图和不使用插件的视图上。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:22:40.667

如果它应该在未来帮助任何人 - 该错误与 Kendo UI 相关，而不是 ChildBrowser。（已在最新版本的剑道中修复！）

# windows-phone-7 - 投射 PushPin 后，获取此可能的统一参考比较下划线消息

> ID：11312968
> 
> 赞同：0
> 
> 时间：2012-07-03T14:21:47.777
> 
> 标签：windows-phone-7

我有这个错误信息：

```
可能的统一参考比较；要获得一个值比较，请将左侧转换为字符串

问题 ：
((Pushpin)p).Tag == "locationPushpin"));

==============================

双 Dlat = Convert.ToDouble(g_strLat);            
双 Dlon = Convert.ToDouble(g_strLon);

 this.map1.Center = new GeoCoordinate(Dlat, Dlon);           

  如果 (this.map1.Children.Count != 0)
     {
        var pushpin = map1.Children.FirstOrDefault(p => (p.GetType() == typeof(Pushpin) && ((Pushpin)p).Tag == "locationPushpin"));

         如果（图钉！= null）
          {
              this.map1.Children.Remove（图钉）；
          }
      }

     图钉位置图钉 = 新图钉（）；

     //---设置图钉的位置---

      locationPushpin.Tag = "locationPushpin";
      locationPushpin.Location = new GeoCoordinate(Dlat, Dlon);

     locationPushpin.Content = 新椭圆（）
     {
        填充 = 新的 SolidColorBrush(Colors.Orange),
        //不透明度 = .8,
        高度 = 40，
        宽度 = 30
      };

      locationPushpin.Width = 60;
      locationPushpin.Height = 100;

      this.map1.Center = new GeoCoordinate(Dlat, Dlon);
      this.map1.Children.Add(locationPushpin);
      this.map1.ZoomLevel = 13;  

```

感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:24:53.033

首先，您的查询只会找到type 的*确切*对象`Pushpin`。这更干净：

```
var pushpin = map1.Children.OfType<Pushpin>()
                           .FirstOrDefault(p => p.Tag == "locationPushpin"); 
```

下一个问题是`Tag`type `object`。所以你真的想要：

```
var pushpin = map1.Children.OfType<Pushpin>()
                           .FirstOrDefault(p => "locationPushpin".Equals(p.Tag)); 
```

Otherwise you'll be doing a *reference* comparison between the `Tag` value and the string. So you could have *equal but distinct* strings, and the pushpin wouldn't be found.

# c# - 异步 S3 PutBucketRequests 似乎正在串行执行

> ID：11312969
> 
> 赞同：1
> 
> 时间：2012-07-03T14:21:50.307
> 
> 标签：c#, .net, network-programming, amazon-s3

我正在努力提高 .net 应用程序的上传性能，该应用程序将大型（每个约 15mb）文件组上传到 S3。

我已经调整了多部分选项（线程、块大小等），并且我认为我已经尽可能地改进了这一点，但是在密切关注网络利用率的同时，我注意到了一些意想不到的事情。

我遍历目录中的多个文件，然后使用 S3 传输实用程序的实例提交每个文件以供上传，如下所示：

```
//  prepare the upload
this._transferUtility.S3Client.PutBucket(new PutBucketRequest().WithBucketName(streamingBucket));

 request = new TransferUtilityUploadRequest()
   .WithBucketName(streamingBucket)
   .WithFilePath(streamFile)
   .WithKey(targetFile)
   .WithTimeout(uploadTimeout)
   .WithSubscriber(this.uploadFileProgressCallback);

 //  start the upload
 this._transferUtility.Upload(request); 
```

然后我在上面指定的 uploadFileProgressCallback 中观察这些完成。

但是，当我查看网络接口时，我可以在出站流量图中看到许多明显的“驼峰”，这与我上传到 S3 的文件数量完全一致。

由于这是一个异步调用，我的印象是每次传输都会立即开始，并且随着每次上传完成，我会看到出站数据逐步增加，然后逐步减少。根据我现在看到的情况，我想知道这些请求虽然与调用代码异步，但是否在某处排队，然后连续执行？

如果是这样，我想更改它，以便所有请求都在（接近）同时开始上传，这样我就可以最大化我可用的上传带宽并减少总体执行时间。

我在 S3 .net SDK 文档中四处寻找，但找不到任何提及此排队机制或任何属性/等的内容。这似乎提供了一种增加这些调用的并发性的方法。

任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:57:09.553

由于简单性要求，这可能不是 SDK 本质上支持的东西？我根据这篇文章实现了我自己的并发部分上传。 [http://aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html](http://aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html)

一些观察：

1.  仅当您在内存中拥有完整的内容时，这种方法才有效，因为您必须将其分成块并将其打包成部分上传。在许多情况下，仅仅为了进行并发上传而在内存中存储 GB 的数据顺序可能没有意义。您可能必须在那里评估权衡。

2.  SDK 对 singlePut 上传的最大限制为 16MB，超过此值的任何文件大小都将被分成 5MB 块进行部分上传。不幸的是，这些值是不可配置的。所以我几乎必须编写自己的分段上传逻辑。上面提到的值适用于 java SDK，我希望这些值对于 C# 也是相同的。

3.  所有操作都是非阻塞的，这很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:10:04.627

在 c# 中，您可以尝试手动设置零件大小。

```
TransferUtilityUploadRequest request =
            new TransferUtilityUploadRequest()
                .WithPartSize(??). 
```

或者

```
TransferUtilityConfig utilityConfig = new TransferUtilityConfig();
       utilityConfig.MinSizeBeforePartUpload = ??; 
```

但我不知道默认值

# msmq - NServiceBus：如何将消息从一个域发送到另一个域

> ID：11312974
> 
> 赞同：1
> 
> 时间：2012-07-03T14:22:16.080
> 
> 标签：msmq, nservicebus

拜托，你能帮帮我吗？

有两个服务使用 NServiceBus 将消息发送到远程队列。

第一个服务位于第一个域（**server1**）中。第二个服务位于第二个域 ( **server2** )。远程队列位于第二个域中的第三个服务器 ( **server3 )。**

我可以将消息从**server2**发送到**server3**。但是，当我尝试将消息从**server1**发送到**server3**时，我总是会收到此错误：

```
Common.Logging.ConfigurationException: The destination queue 'queue@server3' could not be found. You may have misconfigured the destination for this kind of message (Messages.Message) in the MessageEndpointMappings of the UnicastBusConfig section in your configuration file. It may also be the case that the given queue just hasn't been created yet, or has been deleted. ---> NServiceBus.Unicast.Queuing.QueueNotFoundException ---> System.Messaging.MessageQueueException: Insufficient resources to perform operation.
at System.Messaging.MessageQueue.SendInternal(Object obj, MessageQueueTransaction internalTransaction, MessageQueueTransactionType transactionType)
at NServiceBus.Unicast.Queuing.Msmq.MsmqMessageSender.NServiceBus.Unicast.Queuing.ISendMessages.Send(TransportMessage message, Address address)
--- End of inner exception stack trace ---
at NServiceBus.Unicast.Queuing.Msmq.MsmqMessageSender.NServiceBus.Unicast.Queuing.ISendMessages.Send(TransportMessage message, Address address)
at NServiceBus.Unicast.UnicastBus.SendMessage(IEnumerable`1 addresses, String correlationId, MessageIntentEnum messageIntent, Object[] messages)
--- End of inner exception stack trace ---
at NServiceBus.Unicast.UnicastBus.SendMessage(IEnumerable`1 addresses, String correlationId, MessageIntentEnum messageIntent, Object[] messages)
at NServiceBus.Unicast.UnicastBus.SendMessage(Address address, String correlationId, MessageIntentEnum messageIntent, Object[] messages)
at NServiceBus.Unicast.UnicastBus.NServiceBus.IBus.Send(Object[] messages) 
```

两个域都位于同一个网络中。我可以从**server1** ping **server3**，所以我不明白为什么 NServiceBus 找不到目标队列。

 **我尝试使用 MSMQ 直接格式来指定目标队列地址。但是 NServiceBus 不支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:40:07.880

用户已经回答了他自己的问题：

> 不知道这个问题的原因是什么。我什么都试过了。所有设置均有效。只有在我重新启动 server1 后它才开始工作**

# java - 生成 Java JNI 标头

> ID：11312976
> 
> 赞同：8
> 
> 时间：2012-07-03T14:22:36.467
> 
> 标签：java, header, java-native-interface

我要做的就是使用 JDK Javah.exe 程序生成一个 JNI 头文件，但无论我尝试什么，我都会不断收到错误消息“错误：找不到 'ddg.ndkTest.NativeLib' 的类文件”（其中 ddg.ndkTest 是命名空间，NativeLib 是 java 类文件）。另外，请注意，为了进一步简化流程，我已将整个 Android 项目复制到 Java 目录中。

我尝试了以下命令，但都没有奏效：

*   `javah -jni ddg.ndkTest.NativeLib`
*   `javah -verbose -jni -classpath \NDKTest\bin\classes ddg.ndkTest.NativeLib`
*   `C:\Program Files\Java\jdk1.7.0_02\bin>javah.exe -jni -classpath \NDKTest\bin\classes\ ddg.ndkTest.NativeLib`

如果我的包裹被调用；“ddg.ndkTest”，我的课是；“NativeLib.java”，我上面的类路径是正确的。我应该在我的命令窗口中写什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-01-08T11:10:26.110

## 更新 java >= Java9

由于`Java9`该命令`javah`已被标记为 a`deprecation warning`并且从`Java10`它开始，它已从 JDK 中删除，因为它的功能现在包含在`javac`命令中。

所以为了**从 Java9 做同样的事情，你应该运行：** `javac -h . NativeLib.java`

*注意我假设您在正确的目录中*

除了命令之外的主要区别在于，现在 JNI 标头的创建针对的是`.java`文件中的源代码，而不是已编译的`.class`

> **-h *directory*** 指定放置生成的本机头文件的位置。
> 
> 当您指定此选项时，将为每个包含本地方法或具有一个或多个使用 java.lang.annotation.Native 注释注释的常量的类生成一个本地头文件。如果类是包的一部分，那么编译器会将本机头文件放在反映包名称的子目录中，并根据需要创建目录。

[https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9](https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-03T14:30:04.530

试试这个：

1.  首先建立你的课程
2.  将目录更改为`\NDKTest\bin\classes\`
3.  跑`javah ddg.ndkTest.NativeLib`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:33:02.587

javah 正在寻找`NativeLib.class`，而不是源代码。所以你应该把它指向你编译的类在哪里，无论它在哪里。即使不在`NDKTest/Bin/Classes`您显然期望的地方。

# c# - 矩形形状的二维数组

> ID：11312980
> 
> 赞同：2
> 
> 时间：2012-07-03T14:22:55.120
> 
> 标签：c#, arrays, winforms, forms, rectangles

我正在开发一个*非常*基本的绘图程序：一个由多个 RectangleShapes 组成的 2D 网格，每个大约 20x30 像素，单击时会根据用户 RGB 输入更改颜色，效果很好：

```
Color SelectedColor = new Color();
private void Pixel_1_1_Click(object sender, EventArgs e)    // on Rectangle click
{
    Pixel_1_1.FillColor = SelectedColor;    // change to currently desired color.
} 
```

由于正方形的数量急剧增加，我正在寻找一种将“像素”矩形排列成二维数组的方法。（我真的不想为屏幕上的每个 Rectangle 创建一个 Pixel_Click 方法！）希望最终能够调用类似：

```
private void Pixel_[x]_[y]_Click(object sender, EventArgs e)
{
    Pixel_[x]_[y].FillColor = SelectedColor;
} 
```

我的朋友建议使用匿名代表，但我不明白如何充分使用匿名代表来解决我的问题。

在 C# Windows 窗体中生成二维矩形数组的最佳方法是什么？一旦生成，我如何使用单一方法访问它们以获取 x 和 y 的变体值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:26:08.987

如果要将矩形作为组件保留在屏幕上，则可以将所有矩形分配给相同的单击事件，单击事件将有一个小下拉菜单来选择现有事件。要知道单击了哪个矩形，请使用`sender`参数`((Pixel)sender).FillColor = SelectedColor;`

为方便起见，我建议使用面板之类的东西并在其上绘制矩形，这意味着您只需处理一个单击事件。所以现在你的问题变成了“如何在面板上绘制矩形网格”和“我怎么知道点击了哪个矩形”

因此，对于第一部分，您可以使用这不是非常有效的方法。

创建一个存储有关像素信息的类

```
class MyPixel
{
    public Color PixelColour;
    public Rectangle Bounds;
} 
```

将它们的列表保存在内存中

```
List<MyPixels> MyGrid = new List<MyPixels>(); 
```

然后在面板的onpaint事件中绘制面板上的像素

```
foreach(MyPixel Pixel in MyGrid)
{
    using(Brush B = new SolidBrush(Pixel.PixelColor))
    {
        e.Graphics.DrawRectangle(B, Pixel.Bounds);
    }
} 
```

现在在点击事件中，您需要知道点击了哪个像素

```
foreach(MyPixel Pixel in MyGrid)
{
    if (Pixel.Bounds.Contains(e.Location))
    {
        PixelClicked(Pixel);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:26:38.270

虽然您将每个矩形视为一个对象可能是正确的，但将每个矩形视为一个窗口控件可能是不正确的，特别是因为您有这么多窗口控件。

所以尝试创建自己的矩形对象：

```
public class MyRect {
  public Color FillColor { get; set; }
  public Rectangle Rectangle { get; set; }

  public MyRect(Rectangle r, Color c) {
    this.Rectangle = r;
    this.FillColor = c;
  }
} 
```

现在您只需要保留一个对象列表并在一个 Panel 控件（或 PictureBox）上绘制所有矩形：

```
private List<MyRect> myRectangles = new List<MyRect>();

public Form1() {
  InitializeComponent();

  myRectangles.Add(new MyRect(new Rectangle(10, 10, 64, 16), Color.Blue));
  myRectangles.Add(new MyRect(new Rectangle(20, 48, 16, 64), Color.Red));
}

private void panel1_Paint(object sender, PaintEventArgs e) {
  foreach (MyRect mr in myRectangles) {
    using (SolidBrush sb = new SolidBrush(mr.FillColor)) {
      e.Graphics.FillRectangle(sb, mr.Rectangle);
    }
  }
} 
```

要处理矩形的“单击”事件，您只需处理容器控件的`MouseDown`or`MouseClick`事件并确定自己单击的是哪个矩形：

```
void panel1_MouseDown(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Left) {
    foreach (MyRect mr in myRectangles) {
      if (mr.Rectangle.Contains(e.Location)) {
        ChangeColor(mr, Color.Green);
      }
    }
    panel1.Invalidate();
  }
}

private void ChangeColor(MyRect mr, Color newColor) {
  mr.FillColor = newColor;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T15:30:37.163

我相信你会以错误的方式解决这个问题。您要做的是直接绘制到位图中。这是一些使用 PictureBox 允许用户在其中绘制的代码。

```
 using System;
    using System.Drawing;
    using System.Windows.Forms;

    namespace WindowsFormsApplication1
    {
        public partial class Form1 : Form
        {
            private Pen _pen;

            private bool _mouseDown;
            private int _startX;
            private int _startY;

            public Form1()
            {
                InitializeComponent();
            }

            private void Form1_Load(object sender, EventArgs e)
            {
                pictureBox1.Image = new Bitmap(pictureBox1.Width, pictureBox1.Height);
                _pen = new Pen(Color.Black);
            }

            private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
            {
                _mouseDown = true;

                _startX = e.X;
                _startY = e.Y;
            }

            private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
            {
                _mouseDown = false;
            }

            private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
            {
                if (_mouseDown)
                {
                    using (var graphics = Graphics.FromImage(pictureBox1.Image))
                    {
                        graphics.DrawLine(_pen, _startX, _startY, e.X, e.Y);
                        _startX = e.X;
                        _startY = e.Y;
                    }
                    pictureBox1.Invalidate();
                }
            }

        }
    } 
```

这是编写绘画应用程序的常规方法，并且性能也非常好。您还可以通过这种方式轻松保存、编写新工具或更好地操作图像。

# jquery - 有人纠正我的 Scroller Buggy 吗？

> ID：11312984
> 
> 赞同：-1
> 
> 时间：2012-07-03T14:23:06.870
> 
> 标签：jquery

我不想使用插件进行滚动。相反，我制作了自己的滚动条（未完成，它正在启动中），它在 Chrome 中工作得有些好，但在 Firefox 中却不行。有时卷轴也会“粘住”。任何人都可以帮忙 - 表明我的方式是否正确？或者，我是否需要进一步关注使用鼠标事件的任何区域？

这是我的jsFiddle：

[jsfiddle链接在这里](http://jsfiddle.net/rv64v/)

直到我的代码：

```
$(document).ready(function(){

    var element = $('#draw'),
        draggerLeftPos = 0,
        draggerWidth = element.width(),
        totalDist = draggerLeftPos + draggerWidth,
        gear = 0,down = 0,startPoint = 0,moveLeft=0,balance=0;

    var move = (function(){

       element.bind('mousedown mousemove mouseup mouseleave',function(event){

         if(event.type == "mousedown"){
             down = 1;
             startPoint = event.pageX;
         }

         if(down && event.type =="mousemove"){
             moveLeft = event.pageX;
             process();
         }

         if(down && (event.type =="mouseup" || event.type == "mouseleave")){
             down = 0;
             draggerLeftPos = element.position().left;
             console.log("draggerLeftPos",draggerLeftPos)
         }

       })

      var process = function(){
         element.css({left:(moveLeft-startPoint)+draggerLeftPos})
         console.log((moveLeft-startPoint)+draggerLeftPos,element.css('left'));
      }

    })();
}) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:33:10.530

您将 mousemove 事件绑定到元素本身，因此它只会在元素边界内触发。

在您的情况下，我建议您将元素包装在 div （滚动条）中并在其上触发 mousemove ：

```
var scrollbar = $('#your_scrollbar'); // your wrapper scrollbar
var down = false;

element.bind('mousedown', function(e) {
  down = true;
  startPoint = e.pageX;
});

element.bind('mouseup', function(e) {
  down || (draggerLeftPos = element.position().left);
  down = false;
});

scrollbar.bind('mousemove', function(e) {
  if (down) {
    moveLeft = event.pageX;
    process();
  }
});

//... and so on 
```

# php - 类中的排序函数

> ID：11312986
> 
> 赞同：54
> 
> 时间：2012-07-03T14:23:15.410
> 
> 标签：php

我有一个对多维数组中的数据进行排序的函数，如下所示：

```
<?php  
$data = array();  
$data[] = array("name" => "James");  
$data[] = array("name" => "andrew");  
$data[] = array("name" => "Fred");  

function cmp($a, $b)  
{  
    return strcasecmp($a["name"], $b["name"]);  
}  

usort($data, "cmp");  

var_dump($data);  
?> 
```

当我运行它时，它按预期工作，返回按名称排序的数据，升序。但是，我需要在课堂上使用它。

```
<?php
class myClass  
{  
    function getData()  
    {  
        // gets all data
        $this -> changeOrder($data);
    }  

    function changeOrder(&$data)  
    {  
         usort($data, "order_new");
    }

    function order_new($a, $b)  
    {  
        return strcasecmp($a["name"], $b["name"]);  
    }
}
?> 
```

当我使用它时，我收到以下警告：**警告：usort() 期望参数 2 是有效的回调，未找到函数 'order_new' 或无效的函数名称。**

当我将 order_new 函数放在 changeOrder 函数中时，它工作正常，但是我遇到了**致命错误的问题：无法重新声明 order_new()**，所以我不能使用它。有什么建议么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-03T14:27:39.737

order_new 是类方法而不是全局函数。正如[PHP 手册](http://php.net/manual/en/function.usort.php)所建议的那样，您可以在这种情况下使用

```
usort($data, array($this, "order_new")); 
```

或声明 order_new 静态并使用

```
usort($data, array("myClass", "order_new")); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T14:25:30.560

改成`usort($data, array($this, "order_new"));`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-03T14:25:44.790

```
 usort($data, array($this,"order_new")); 
```

是您在引用类实例中的函数时想要的。见[可调用](http://php.net/manual/en/language.types.callable.php)

> 实例化对象的方法作为数组传递，该数组包含索引 0 处的对象和索引 1 处的方法名称。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-19T01:16:55.867

要考虑的一件事是，如果通过引用将变量传递给您的方法，则 usort() 似乎在引用变量的上下文中执行，而不是在您当前的方法中执行。因此，您需要在类引用中提供完整的命名空间，如下所示：

```
usort($data, ['My\NameSpace\MyClass', 'order_new']); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-19T18:33:37.193

我知道这是一个旧线程，但我今天遇到了另一个可能受益于另一种方法的实例。我有一个案例，我想使用一个特定的键，这样我就可以抽象出实际的支持功能。这导致使用包装函数找到一个版本，以返回一个匿名函数，该函数利用“使用”命令字提供用于在我的类中排序的键的名称。（在我的情况下，它是 [nested] 类的属性中的一个键，该键被分配给我正在进行排序的类属性之一 - 即我正在根据“维度”实例中的属性对实例进行排序分配给“项目”的属性，并希望能够按宽度、高度、长度或重量对它们进行排序）。然后获取回调函数，

```
/**
 * list of items
 *
 * @var Item[]
 */
public $items;

/**
 * @param string $key
 * @return \Closure
 */
private static function keySort($key) {
    return function ($ia, $ib) use ($key) {
        if($ia->dimensions->$key == $ib->dimensions->$key) return 0;
        return ($ia->dimensions->$key < $ib->dimensions->$key) ? -1 : 1;
    };
}

/**
 * return the list of items in the items array sorted by the value
 *   of the property specified by $key
 *
 * @param string $key
 * @return Item[]
 * @throws \Exception
 */
public function sortItemsByKey($key)
{
    if(in_array($key, array( 'width', 'length', 'height', 'weight', ))) {
        return usort($this->items, static::keySort($key));
    } else
        throw new \Exception(__METHOD__ . ' invalid sort key!');
} 
```

这允许我使用 static:: 或 self:: 将其称为本地（可以想象，在这种情况下，我什至可以将其包装为非静态函数，因为我唯一担心的是得到调用但函数返回）我很快发现的另一个好处是我的尺寸对象还具有一些“计算”字段，例如周长、体积和体积重量。但一个问题是，尺寸重量取决于您是在国内还是国际运输物品，所以我需要告诉我的“calculateDimensionalWeight”函数它是否应该使用国际运输的价值。好吧，使用这种方法，我可以通过将附加参数传递给包装函数并将附加参数添加到使用变量来做到这一点。

```
/**
 * @param string $key
 * @param bool $intl // only used for dimensional weight
 * @return \Closure
 */
private static function keySort($key,$intl=false) {
    return function ($ia, $ib) use ($key,$intl) {
        switch($key) {
            case 'girth':
                $ia->dimensions->calculateGirth();
                $ib->dimensions->calculateGirth();
                break;
            case 'dimweight':
                $ia->dimensions->calculateDimensionalWeight($intl);
                $ib->dimensions->calculateDimensionalWeight($intl);
                break;
            case 'volume':
                $ia->dimensions->calculateVolume();
                $ib->dimensions->calculateVolume();
                break;
        }
        if($ia->dimensions->$key == $ib->dimensions->$key) return 0;
        return ($ia->dimensions->$key < $ib->dimensions->$key) ? -1 : 1;
    };
}

/**
 * return the list of items in the items array sorted by the value
 *
 * @param string $key
 * @param bool $intl  (only used for dimensional weight sorts on international shipments)
 * @return Item[]
 * @throws \Exception
 */
public function sortItemsByKey($key,$intl=false)
{
    if(in_array($key, array('value','collect', 'width', 'length', 'height', 'weight', 'girth', 'dimweight', 'volume'))) {
        return usort($this->items, static::keySort($key,$intl));
    } else
        throw new \Exception(__METHOD__ . ' invalid sort key!');
} 
```

注意：以这种方式计算值会产生开销，因为任何列表中除了第一个和最后一个项目之外的所有项目在技术上都将被计算两次，这是多余的，但在这种情况下，我的列表并不长，在某些情况下，我需要在做的时候比较两个项目bin-sorting，所以它仍然是可取的。对于大型数据集，预先计算排序方法外部的值可能更明智。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-11T19:51:56.363

```
// If order_new is a NORMAL function 
usort($data, [$this, 'order_new']);      // self ref object, function name  

// If order_new is a STATIC function 
usort($data, [__CLASS__, 'order_new']);  // string, function name 
```

# python - 尝试将元组列表转换为列表列表

> ID：11312987
> 
> 赞同：0
> 
> 时间：2012-07-03T14:23:17.557
> 
> 标签：python, string, list, tuples

所以我正在读取一个包含两列的 CSV 文件，然后获取所有列的乘积。

我要做的是将他的产品从元组列表转换为列表列表。我最终想用逗号将每个元组组合成一个字符串。这是我的代码：

```
rowa = []
rowb = []

for row in csvfile:
    if row[0] != "":
        rowa.append(row[0])
    if row[1] != "":
        rowb.append(row[1])
wordlist = list(product(rowa, rowb)) 
```

我的伪代码是这样的：

```
for x in wordlist:
    x = list(x)
    x.join(" ") 
```

`print wordlist`应该调出一个字符串列表，这将是旧的元组，变成一个列表，然后用空格连接在一起

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:27:22.877

[join 方法](http://docs.python.org/library/stdtypes.html#str.join)则相反；在空格字符串上调用它：

```
for x in wordlist:
    " ".join(x) 
```

它适用于任何序列，因此无需在此处将元组转换为列表。

请注意，您可以免除`!= ""`列的测试；空字符串也被认为是布尔值 False ：

```
for row in csvfile:
    if row[0]:
        rowa.append(row[0])
    if row[1]:
        rowb.append(row[1]) 
```

最后，因为您已经在遍历 wordlist，所以只需将其保留为生成器并完全省去 list 调用。

```
wordlist = [" ".join(x) for x in product(rowa, rowb)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:29:54.500

无需创建中间列表

```
rowa = []
rowb = []

for row in csvfile:
    row0,row1 = row[0].lower(),row1.lower()
    if row0 != row1:
        if row[0] != "":
             rowa.append(row0)
        if row[1] != "":
             rowb.append(row1)
wordlist = product(rowa, rowb)

result = [" ".join(x) for x in wordlist] 
```

生成器表达式应该完成这项工作

**编辑** 附加要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:27:50.143

几乎猜到了您的意思，但是您是否要压缩两个列表？

```
wordlist = zip(rowa, rowb) 
```

# asp.net - ASP.Net Mvc 3 webservice 存储库身份验证

> ID：11312988
> 
> 赞同：0
> 
> 时间：2012-07-03T14:23:19.563
> 
> 标签：asp.net, asp.net-mvc-3, wcf, authorization

我们开始使用 Asp.net 构建一个新的应用程序。它应该连接到已经可用于检索数据以呈现给用户的 Web 服务。我们创建了一个与 web 服务通信的存储库。

Web 服务需要使用与用户登录 Web 应用程序相同的用户凭据进行授权。用户被授权使用带有 cookie 支持的表单身份验证。

问题是当用户获得授权并自动登录时，我们无法在新请求中从用户那里检索密码。需要此密码才能从存储库类登录到 Web 服务。

关于如何以最好和最安全的方式实施这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:13:48.180

您可以尝试使用客户端应用程序服务来获取和设置 cookie。或者，您可以使用本文中的示例代码手动获取和设置 cookie。该示例显示了这两种方法，并且专门用于将表单身份验证 cookie 从 MVC 应用程序传递到 OData WCF 提要：

[http://blogs.msdn.com/b/astoriateam/archive/2010/07/21/odata-and-authentication-part-7-forms-authentication.aspx](http://blogs.msdn.com/b/astoriateam/archive/2010/07/21/odata-and-authentication-part-7-forms-authentication.aspx)

此外，这是一个类似的例子，在范围内被缩小：

[http://www.codeproject.com/Articles/190806/Send-Cookies-When-Making-WCF-Service-Calls](http://www.codeproject.com/Articles/190806/Send-Cookies-When-Making-WCF-Service-Calls)

# c# - 初始化一个类的点？

> ID：11312989
> 
> 赞同：10
> 
> 时间：2012-07-03T14:23:24.420
> 
> 标签：c#, object

我正在为初学者阅读一本关于 C# 的书，我在“理解价值和参考”部分，但有些东西我不明白。我所看到的是，这些书试图向我解释这一点（我也在 Youtube 上的几个教程视频中看到了这种情况），该类被用来创建......一个对象（？ ?) 的类。我已经阅读了发生这种情况的整个前一章，但我不太理解它，假设它会在下一章中变得更加清楚。它并没有变得更清楚，所以我认为在我理解我之前解释的东西的概念之前继续下去不是一个好主意。

以下部分是本书的一部分：

> 请记住，要初始化类等引用变量，您可以创建该类的新实例并将引用变量分配给新对象，如下所示：

```
Circle c = new Circle(42);
Circle copy = new Circle(99);
//Circle refc = c;
...
copy = c; 
```

我可以用这个例子中的代码做什么，为什么它很方便？示例+解释将非常受欢迎。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T14:29:20.747

听它的声音，你还没有完全理解这本书的解释：

下面的内容是制作 2 个大小为 3 和 4 的圆圈，并复制第一个圆圈并将其设为 5 .. 除非您将其打印出来，否则它不是这样工作的。

```
class Program
{
    static void Main(string[] args)
    {

        circle a = new circle(3);
        circle b = new circle(4);
        circle d = a;
        d.Diameter = 5;

        Console.WriteLine("a is {0}", a.Diameter); // shows 5
        Console.WriteLine("b is {0}", b.Diameter); // shows 4
        Console.WriteLine("d is {0}", d.Diameter); // shows 5
    }
}

class circle
{
    public int Diameter;
    public circle(int d)
    {
        Diameter = d;
    }
} 
```

因为你没有为d创建一个新的圈子，实际上d是a的别名，所以，就像某人的名字叫Peter一样，他也可以叫Pete。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T14:33:54.057

请记住，要初始化类等引用变量，**您可以创建该类的新实例并将引用变量分配给新对象**，*[原文如此]*

他展示了引用类型和值类型之间的区别。对于值类型，它已经被初始化。

`double d;`

你不必再做任何事情了。对于类或引用类型，您必须给它一个对象的实例。

`Circle c;`还没有分配给它的对象。

`d = c.Radius` *错误。引用不指向对象。内存访问冲突。*

`Circle c = new Circle();`现在确实如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T14:27:56.887

好吧，它*可能*很方便，但不一定总是很方便，可以为您的类型引用分配一个新对象的位置。在这种情况下，在最后一行`copy = c;`，您说 copy 现在指向`c`之前分配的内存位置，换句话说，在该行之后，它们都指向**相同**的内存位置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T14:46:09.397

**为您提供面向对象**编程的速成课程相当复杂，但这正是您目前所需要的：您目前需要了解*OO 编程*，这是一种编程范式，许多编程语言当然也有 C#。

您在上面的帖子中描述的问题如下：

在*oo-prgramming*中，您正在编写由（大致）字段和方法组成的类。这些类具有*静态*字符，并且在您的应用程序开发期间存在（请不要与我在这里使用的静态一词和关键字“**静态**”混淆）。在应用程序运行期间，您可以使用这些*静态**classes* 来创建这些类的*对象*，这意味着特定类可作为任意数量的完全相同的*对象的构建计划。*与类相比，这些*对象*也称为类的实例，并且仅在应用程序运行时存在。对象是*动态*的。

很短：当你上课时

```
class House {

// ...
} 
```

你有一个房子的静态描述，你可以用它来创建*动态*的*对象*，即房屋。您正在使用所谓的**new-operator**执行此操作（使用 C# 和其他现代语言，如 Java） ：

```
House house = new House(); 
```

您在这里所做的是*声明*一个 House 类型的变量。*您使用类*House自己定义的类型。就是这部分：

```
House house; 
```

到目前为止，它只是一个 House 类型的变量，它什么都不做。这里重要的术语是它没有指向任何东西，这个没有东西被称为**null**。

然后您可以使用以下语法创建此类的*实例（动态**对象）：*

```
house = new House(); 
```

现在您已经创建了一个对象并让变量 house 指向该*对象*。从现在开始，您可以使用变量 house 来引用这个对象。

我告诉你这是为了指出你在上面的帖子中提到的一个重要问题：值类型和引用类型的区别。

您在前面几行中所做的是创建了一个指向对象的新变量。这（大致再次）称为**引用类型**。与此相反，您拥有例如**int**、**byte**、**short**等原始类型。

和

```
int i = 4; 
```

你再次*声明*一个*变量*。但是这次变量直接保存它的值而不是指向它。这称为**值类型**。

值类型和引用类型之间的区别非常重要，例如当您将这些变量作为参数传递给方法时。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-03T14:34:57.390

我会尝试修正那句话，因为那太糟糕了。

原来的：

> 请记住，要初始化类等引用变量，您可以创建该类的新实例并将引用变量分配给新对象，如下所示：

固定的：

> 请记住，要初始化引用类型的变量，您可以创建该变量类型的新实例并将变量更改为指向新对象，如下所示：

虽然为什么这应该是你应该记住的东西，但我不知道。是的，您可以创建对同一个对象的多个引用，这本身就很有用，但它并没有让我觉得它是一种特别有用的初始化策略。

修复得更好：

> 您可以使引用类型的变量引用同一个实例，但请记住变量本身不是别名，因此*覆盖*其中一个不会更改另一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-03T14:35:26.807

您可以将类视为数据的模式，如规范或蓝图。当您使用“new”关键字时，您是在告诉计算机使用该蓝图为您制作一个对象。对象是该类的具体*实例。*

因此，如果您有一个蓝图（类定义），您可以调用 new 任意多次，以生成该类的任意数量的实例。就像你有一辆汽车的蓝图一样，你可以根据需要制作尽可能多的汽车副本（只要有足够的材料）。

这样做：

```
Circle c = new Circle(42);
Circle copy = new Circle(99); 
```

告诉计算机使用 Circle 类定义并实例化两个对象（因此您的计算机内存中存在两个圆圈）。这些是具有不同属性的不同对象（一个半径为 42，另一个半径为 99）。它们被分配到变量 c 并复制。

复制代码的最后一行 = c; 是将变量c指向的圆放入变量副本中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-03T14:40:31.773

类定义是蓝图。把它想象成一个房子。每次你实例化一个对象时`Circle c = new Circle(42)`，你都在用那个蓝图建造一座房子。每个房子在街道上都有一个地址（内存中的地址）。

你拥有的每一个变量都像一张纸条，上面列出了房子的地址。所以你在主街 123 号建了一座蓝色的 2 层房子，在一张纸上写下 123 主街，并在纸上标上“A”。接下来，您在 456 King Street 建造一座红色的 4 层房屋，并将地址写在纸上，并在纸上标上“B”标签。接下来，你拿到一张纸，写下你建造的第一栋房子的地址（123 Main Street），并在纸上标上“C”。

然后你去找画家，让他把房子漆成黄色。你给他纸条'C'。

在我们的示例中只有两个房子。由于 C 和 A “指向”同一个地址，它们现在指向一个黄色的房子。

```
House a = new House( blue, 2 );
House b = new House( red, 4 );
House c = a;
c.Color = yellow;
//Now a.Color is yellow as well 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-03T14:42:34.270

变量不是对象，它只是对对象的引用。因此，例如，在以下示例中，有两个变量都引用同一个对象：

```
Label label1 = new Label();
Label label2 = label1;
label1.Text = "1";
label2.Text = "2"; 
```

执行该代码后，您将看到`label1.Text`等于“2”而不是“1”。那是因为它们都引用了同一个`Label`对象，所以当你设置 时`label2.Text`，这两个变量都会改变。但是，如果您实例化了两个单独的标签对象，则结果会有所不同，例如：

```
Label label1 = new Label();
Label label2 = new Label();
label1.Text = "1";
label2.Text = "2"; 
```

在第二个示例中，每个变量都指向不同的`Label`对象（即 Label 类的不同实例）。因此，在运行此代码后，`label1.Text`将等于“1”并`label2.Text`等于“2”，正如您所期望的那样。

有充分的理由说明这两个选项都很重要并且可供您使用。例如，假设您要创建一个设置`Text`a 属性的方法`Label`，例如：

```
void SetLabelText(Label labelToSet)
{
    labelToSet.Text = "text";
} 
```

您可以这样调用该方法：

```
Label label1 = new Label();
SetLabelText(label1); 
```

在这种情况下，方法`labelToSet`中的变量`SetLabelText`将引用与变量相同的对象`label1`，因此当 '`SetLabelText`设置`labelToSet.Text`为“文本”时，它不是创建一个新的，它只是在作为参数传递给`Label`的现有对象上设置文本`Label`方法，这正是你想要发生的。

由于任何变量都可以设置为新对象或现有对象，因此在将其分配给对象之前将其视为“空”。正如我一开始所说，变量不是对象，它只是对对象的引用。如果一个变量根本没有引用任何对象（它是初始状态），那么`null`如果您尝试使用它，它将抛出异常。例如：

```
Label label1; 
label1.Text = "1";  // Throws a null reference exception 
```

您可以根据需要声明任意数量的变量，但在`null`您实际实例化至少一个对象并将它们设置为该对象之前，它们都将保持不变。要实例化一个对象（即创建一个类的新实例），您必须使用`new`关键字（例如`new Label()`）。

然而，到目前为止我所说的一切都只适用于“引用类型”（类）。“值类型”（结构）不是这种情况。当您将变量声明为值类型时，出于所有实际目的，它实际上是对象。许多简单的数据类型，例如`int`值类型。例如：

```
int x;
int y;
x = 1;
y = x;
y = 2; 
```

运行上述代码后，`x`will equal`1`和`y`will equal `2`。设置`y = x`不会导致`y`引用与 相同的对象`x`。相反，它将值从 复制`x`到`y`，从而创建一个新的值类型对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-03T14:36:23.553

在您提供的示例中，与书籍提供的许多示例一样，您看到的是最基本的案例。在您真正深入了解代码之前，很难理解使用此类功能的最佳方式。

我不知道这是否完全正确，但我会使用这样的方式是：

```
private double GetArea(Circle c)
{
     //this will be a default circle should the passed in circle be invalid
     Circle toCalc = new Circle(5);

     //check to make sure c is valid
     if(c != null)
          toCalc = c;

     return Math.pow(toCalc.Radius, 2) * Math.Pi;
} 
```

由于 toCalc 是一个类而不是原始数据类型，因此必须对其进行初始化才能编译代码。如果它没有被初始化，编译器会给你一些错误，比如“toCalc 可能没有被初始化”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-03T14:33:22.200

如果我们在这种情况下引用人类，则该类定义什么是人类以及它可以做什么（它的成员，如高度、宽度等，以及它的方法 eat()、drink() 等），并且一个对象代表实际的人类（一个叫安德鲁的人，高宽可以吃喝）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-03T14:34:52.180

如果我错了，请纠正我，但是当我查看代码时，我看到正在创建两个对象，并且指向一个值是它们自己的内存位置。

副本 = c; 行只是说复制对象不会指向 c 对象的内存位置，而不是它最初设置的位置。

# wpf - 如何在动画之间更改 TextBlock 的 Text 属性？

> ID：11312990
> 
> 赞同：1
> 
> 时间：2012-07-03T14:23:27.163
> 
> 标签：wpf, silverlight, animation

我的 WPF 应用程序具有以下几行动画：

一个。将 TextBlock 从 000 旋转到 090
。将 TextBlock 的 Text 属性更新为新值
c。继续将 TextBlock 从 090 旋转到 180。

通过将两个 DoubleAnimation 添加到 StoryBoard 的子项中，我能够实现步骤 a 和 c。有没有办法让第一个动画结束做一些工作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-06T03:24:30.180

[适用于 .NET Framework 4.5 及更高版本]

您可以使用[StringAnimationUsingKeyFrames](https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.animation.stringanimationusingkeyframes?view=netframework-4.5)类来使用 DiscreteStringKeyFrame 修改文本。下面是一个[例子](https://docs.microsoft.com/en-us/dotnet/framework/wpf/graphics-multimedia/how-to-animate-a-string-by-using-key-frames)。

```
<Button Name="myAnimatedButton" Margin="200"
      FontSize="16pt" FontFamily="Verdana">Some Text
      <Button.Triggers>
        <EventTrigger RoutedEvent="Button.Click">
          <BeginStoryboard>
            <Storyboard>
              <StringAnimationUsingKeyFrames 
                Storyboard.TargetName="myAnimatedButton" Storyboard.TargetProperty="(Button.Content)"
                Duration="0:0:8" FillBehavior="HoldEnd">

                <!-- All the key frames below are DiscreteStringKeyFrames. Discrete key frames create 
                sudden "jumps" between values (no interpolation). Only discrete key frames can be used 
                for String key frame animations. -->
                <DiscreteStringKeyFrame Value="" KeyTime="0:0:0" />
                <DiscreteStringKeyFrame Value="A" KeyTime="0:0:1" />
                <DiscreteStringKeyFrame Value="An" KeyTime="0:0:1.5" />
                <DiscreteStringKeyFrame Value="Ani" KeyTime="0:0:2" />
                <DiscreteStringKeyFrame Value="Anim" KeyTime="0:0:2.5" />
                <DiscreteStringKeyFrame Value="Anima" KeyTime="0:0:3" />
                <DiscreteStringKeyFrame Value="Animat" KeyTime="0:0:3.5" />
                <DiscreteStringKeyFrame Value="Animate" KeyTime="0:0:4" />
                <DiscreteStringKeyFrame Value="Animated" KeyTime="0:0:4.5" />
                <DiscreteStringKeyFrame Value="Animated " KeyTime="0:0:5" />
                <DiscreteStringKeyFrame Value="Animated T" KeyTime="0:0:5.5" />
                <DiscreteStringKeyFrame Value="Animated Te" KeyTime="0:0:6" />
                <DiscreteStringKeyFrame Value="Animated Tex" KeyTime="0:0:6.5" />
                <DiscreteStringKeyFrame Value="Animated Text" KeyTime="0:0:7" />
              </StringAnimationUsingKeyFrames>              
            </Storyboard>
          </BeginStoryboard>
        </EventTrigger> 
      </Button.Triggers>
    </Button> 
```

感谢 .NET 框架中动画集合的最新添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T14:26:13.030

您可以添加一个 BooleanAnimationUsingKeyFrames 并使用它来设置值。

[http://msdn.microsoft.com/en-us/library/ms745819.aspx](http://msdn.microsoft.com/en-us/library/ms745819.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:40:54.550

您可以创建两个故事板，一个用于旋转到 90，另一个用于旋转 180。当第一个故事板完成时，更新文本，然后开始下一个故事板。

```
Storyboard rotateTo90 = new Storyboard();
// Add rotate animation
rotateTo90.Completed += (s,e) => 
    { 
         TextBlock1.Text = "Updated";
         Storyboard rotateTo180 = new Storyboard();
         // Add rotate animation
         rotateTo180.Begin();
    };
rotateTo90.Begin(); 
```

# webdriver - 如何验证多

> ID：11312993
> 
> 赞同：0
> 
> 时间：2012-07-03T14:23:32.187
> 
> 标签：webdriver, meta-tags

我们正在使用带有 Selenium Webdriver 的 Specflow，使用 C# 步骤定义文件。我正在测试一个网页，其中我们有一个 h1 标签，但有多个 h2 和 h3 标签。

Specflow 中的测试是这样编写的：

```
Scenario Outline: The H1 displays the correct value
Given I view the page <page> at url <url>
Then the h1 will read h1

Examples:
| page| url         | h1        |
| home| www.xyz.com | About xyz | 
```

这个测试运行起来很容易，因为只有一个 h1 标签，并且它应该包含“**关于 xyz** ”。

但是，我遇到的问题是，在测试 h2 和 h3 标签时，其中有不止一个，所以我不确定如何最好地构建测试。

我可以在示例表中添加多个 h2 行，但不知道如何在步骤定义文件中对此进行编码以断言值。测试可能会失败，因为它无法确定我需要验证哪个 h2，因此问题。任何帮助深表感谢。

我在很多地方搜索过这种类型的查询，但一无所获。一定很容易，除了我没有其他人有问题！

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:53:50.507

您可以使用以下内容检查 h2 或 h3 标签是否包含您要查找的某个短语：

```
driver.FindElement(By.XPath("//h2[contains(., 'TEXT')]")); 
```

您需要做的就是用您要查找的短语替换“TEXT”，它会返回您想要的元素。

例如，如果您想在页面上的任何 h1 中找到“关于 xyz”：

```
driver.FindElement(By.XPath("//h1[contains(., 'About xyz')]")); 
```

您可以创建 WebElements 列表并使用 driver.FindElements 函数，以便您可以在页面上创建标题集合。此时，您可以通过在最后一个 ')' 之后包含类似 [1] 的索引来引用要与之交互的事件，如下所示：

```
driver.FindElements(By.XPath("//h1[contains(., 'About xyz')]"))[3]; 
```

如果您不想拥有多个元素，则需要微调您正在寻找的细节。

# jquery - 使用 Jquery 单击单选按钮列表时面板不可见

> ID：11312995
> 
> 赞同：0
> 
> 时间：2012-07-03T14:23:49.303
> 
> 标签：jquery, .net

```
<asp:Panel ID="Panel2" runat="server" Style="display: none;">
<asp:RadioButtonList ID="cboVisibility" CssClass="Normal" runat="server"    
RepeatDirection="Horizontal">
<asp:ListItem Value="0" Selected="True">Check-In Date</asp:ListItem>
<asp:ListItem Value="1">Book Date</asp:ListItem>
<asp:ListItem Value="2">Other Date</asp:ListItem>
</asp:RadioButtonList>
</asp:Panel>
<asp:Panel ID="Panel3" runat="server" Style="display: none;">
<asp:TextBox ID="txtSUCCValidity" runat="server"></asp:TextBox>
</asp:Panel>

<script type="text/javascript">
$(document).ready(function () {
    var panel = $("<%=Panel3.ClientID %>");        
    $("[id*=Panel2] #cboVisibility input:radio").change(function () {
        if ($(this).val() == "2")
            panel.show();
        else
            panel.hide()
    });
}); 
```

我在面板中有一个单选按钮列表。单击单选按钮列表的任何选项时，我想显示隐藏另一个面板。我的代码如上所示帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:27:31.433

尝试改变这个

```
$("[id*=Panel2] #cboVisibility input:radio") 
```

经过

```
$("#<%= cboVisibility.ClientID %> input:radio") 
```

`[id*=Panel2]`没有必要，因为我们有`#<%= cboVisibility.ClientID %>`. ID 在页面上必须是唯一的，因此无需指定上下文来识别元素。

# wordpress - 如何使用带有分页功能的 Jquery Quicksand 或使用 jquery/ajax 过滤 wordpress 查询？

> ID：11312997
> 
> 赞同：3
> 
> 时间：2012-07-03T14:23:51.577
> 
> 标签：wordpress, jquery, quicksand

目前我有一个使用 Wordpress 和[Jquery Quicksand](http://razorjack.net/quicksand/)的网站。

但是我不想同时显示所有帖子。我希望显示例如 6 个帖子，然后进行分页。这就是我遇到问题的地方。

如果我在包含帖子的第一页上有一个过滤器，它只会过滤那些帖子，而不是其他页面上的那些。[像这样（来自 tutsplus.com 的示例）](http://tutorials.vinnysingh.co/quicksand/)

这根本不直观。无法在过滤器中从一个页面导航到另一个页面是不友好的。

我还没有找到任何关于此的教程，但我找到了一个使用流沙的[工作示例](http://stevengliebe.com/wp-playground/zipfolio/#portfolio)。所以这是可能的。

所以我想知道是否有人可以帮助我，或者可能有比工作示例更好的解决方案？

我在标题中添加 ajax 的原因是因为我认为通过 ajax 执行新的 wp_query 可能是一个更好的解决方案，而不是加载多个列表中的所有帖子并使用过滤器显示/隐藏它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:00:47.697

这是您找到的工作示例[的教程：](http://wp.tutsplus.com/tutorials/theme-development/create-a-quicksand-portfolio-with-wordpress/)

通过库和功能的共同使用，他们似乎一步一步地遵循它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T14:06:38.813

使用[Masonery](http://masonry.desandro.com/)或它的大哥[Isotope](http://isotope.metafizzy.co/)。（这也是您发布的示例正在使用的 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:23:31.883

[Isotope](http://isotope.metafizzy.co/)主站点中提到的 Isotope 或 Masonry 都不支持分页。