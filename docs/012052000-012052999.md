# StackOverflow 问答 12052000-12052999

# asp-classic - 为什么我的asp求和程序不运行？

> ID：12052007
> 
> 赞同：2
> 
> 时间：2012-08-21T09:33:53.623
> 
> 标签：asp-classic

我想设计一个求和程序，可以计算范围内的任意两个数字。

但是没有运行，找不到错误~

```
<BODY>
<p align ="center"></p>
<form name = "form1" method ="post" action ="">
<p>enter the range</p>
lower limit<input name ="tlow" type= "text" id ="tlow" size ="10">higher limit
<input  name ="thigh" type ="text" id ="thigh" size ="10">
<input type ="submit" name ="submit" value ="sum"
</form>
<%
Dim i, sum,low,high
sum=0
low=request("tlow")
high=request("thigh")
For i=low To high
sum= sum + i
Next
response.write"sum from "& low &"to" & high &"is:"& sum
%>
</BODY> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:32:00.290

你的问题是双重的：

首先，您的输入名称属性跨越两行。这可以防止页面在发布时知道名称。所以：

```
 <input  name ="
 thigh" type ="text" id ="thigh" size ="10"> 
```

应该

```
 <input  name ="thigh" type ="text" id ="thigh" size ="10"> 
```

其次，您需要`<BODY>`在最后正确关闭标签：`</BODY>`

# scala - 如何将 ParseResults 传递给其他方法？

> ID：12052008
> 
> 赞同：1
> 
> 时间：2012-08-21T09:33:56.627
> 
> 标签：scala, types, parameters, parser-combinators

```
void whatever() {
  // ...
  val parser = new MyParser
  val parse = parser.parse(input)
  if (parse successful) {
    semanticAnalysis(parse)
  }
}

void semanticAnalysis(parse: DontKnowTheCorrectType) {
  // ...
} 
```

我必须给形式参数什么类型`parse`？将鼠标悬停在`parse`里面`whatever`说`val parse: parser.ParseResult[parsing.Program]`，但是这当然不能作为 的参数类型`semanticAnalysis`，因为局部变量`parse`不在此处的范围内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:41:06.460

解析结果是依赖于路径的类型，因为它们是此特定解析器的结果，并且不能保证它们是兼容的。

这就是为什么解析器通常不会按照您使用它们的方式 ( `new MyParser`) 进行实例化，而是作为`object`.

```
object MyParser extends RegexParsers { 
   def statements : Parser[List[Statement]] = // ...
} 

def handleResult(res: MyParser.ParseResult[List[Statement]]) = { // ... } 

val res = MyParser.parseAll(MyParser.statements, "/* */") 
```

如果您需要更多的动态行为（或者想要并发解析，[解析器组合器不是线程安全的](https://issues.scala-lang.org/browse/SI-4929)，哎哟），您只需要保持解析器对象可访问（且稳定），无论您想在哪里使用它的结果。

可悲的是，将解析器及其结果一起传递并不是一件容易的事，因为您会遇到依赖方法类型的禁令，例如

```
 def fun(p: scala.util.parsing.combinator.Parsers, res: p.ParseResult[_]) = {} 
```

不会编译（“非法依赖方法类型”），但如果必须的话，有一些方法可以解决这个问题，比如[这个问题](https://stackoverflow.com/questions/6769503/returning-a-path-dependent-type)的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:30:04.590

您应该能够定义`semanticAnalysis`为：

```
def semanticAnalysis(parse: MyParser#ParseResult[parsing.Program]) = {
  ...
} 
```

注意类型的使用`#`而不是`.`。[这里有关于类型投影](https://stackoverflow.com/questions/6676048/why-does-one-select-scala-type-members-with-a-hash-instead-of-a-dot)的更多细节，但基本上，`parser.ParseResult`每个都不同`parser`，而`MyParser#ParseResult`所有`parser`实例都相同。

但是，正如[主题](https://stackoverflow.com/users/334485/themel)所说，您可能应该使用`object`而不是`class`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:51:59.697

你可以像这样重写它：

```
def whatever() {
  // ...
  val parser = new MyParser
  def semanticAnalysis(parse: parser.ParseResult) {
    // ...
  }
  val parse = parser.parse(input)
  if (parse successful) {
    semanticAnalysis(parse)
  }
} 
```

如果您从多个地方调用它，那么可能是这样的：

```
 class SemanticAnalysis(parser: Parser) {
    def apply(parse: parser.ParseResult) {
      // ...
    }
  } 
```

进而

```
 if (parse successful) {
    new SemanticAnalysis(parser)(parse)
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-14T23:31:47.497

当我需要在程序的其他部分使用解析器组合器的结果时，我从路径依赖中提取成功结果或错误消息，`ParseResult`并将数据放入独立类型。它比我喜欢的更冗长，但我想将组合器实例保留为解析器的实现细节。

```
sealed abstract class Result[+T]
case class Success[T](result: T) extends Result[T]
case class Failure(msg: String) extends Result[Nothing]
case class Error(msg: String) extends Result[Nothing]

/** Parse the package declarations in the file. */
def parse(file: String): Result[List[Package]] = {
  val stream = ... // open the file...
  val parser = new MyParser
  val result = parser.parseAll(parser.packages, stream)   
  stream.close()
  result match {
    case parser.Success(packages, _) => Success(packages)
    case parser.Failure(msg, _) => Failure(msg)
    case parser.Error(msg, _) => Error(msg)
  }
} 
```

# wpf - 触发内部/附加属性

> ID：12052012
> 
> 赞同：0
> 
> 时间：2012-08-21T09:34:07.673
> 
> 标签：wpf, xaml, triggers

触发内部属性

```
<Button BorderBrush="Black" BorderThickness="2" x:Name="TimeButton" ClickMode="Press" Click="SetTime_Click" Height="26" HorizontalAlignment="Left" Margin="15, 0, 0, 0" Style="{StaticResource ImageButtonStyle}" ToolTip="Set Time" Width="26">
    <Button.Background>
        <ImageBrush x:Name="TimeImageBrush" ImageSource="/YCS;component/Images/Clock.png" Stretch="Uniform" TileMode="None" />                                        
    </Button.Background>  
</Button> 
```

我需要创建一个触发器，根据名为 HasHours 的布尔值将 Button.Background 属性中的 ImageBrush 设置为不同的值，我可以从我的 itemssource 轻松绑定，任何人都知道我如何实现这一点，我找不到任何链接示例到这个属性......

我尝试过这样的事情

```
<Button.Triggers>
    <DataTrigger Binding="{Binding HasHours}" Value="false">
        <Setter TargetName="TimeImageBrush" Property="ImageSource" Value="/YCS;component/Images/ClockRed.png"/>
    </DataTrigger>
</Button.Triggers> 
```

但它给了我这个错误：

在“ContentPresenter”类型上找不到静态成员“ImageSourceProperty”。

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:54:47.197

这可能不完全是您问题的答案。

首先，我猜您将无法将 DataTrigger 添加到[Triggers](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.triggers)集合中，因为它仅支持 EventTriggers。

但是，您可以在按钮的样式中定义 DataTrigger。在这里，无需设置 ImageBrush 的 ImageSource 属性，只需将新的 ImageBrush 设置为背景。

```
<Button ...>
    <Button.Style>
        <Style TargetType="Button">
            <Style.Triggers>
                <DataTrigger Binding="{Binding HasHours}" Value="False">
                    <Setter Property="Background">
                        <Setter.Value>
                            <ImageBrush ImageSource="/YCS;component/Images/ClockRed.png"/>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>                    
        </Style>
    </Button.Style>
</Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:23:03.360

1.  将图像作为内容，而不是背景，因为您没有内容。
2.  将 DataTrigger 放在图像的触发器中，而不是按钮的触发器中。您将不得不寻找触发器的 DataContext ：
    所以类似于：

    ```
    <Button ... >  
      <Image ... >  
        <Image.Triggers>  
           <DataTrigger   
               Binding="{Binding Path= HasHours, RelativeSource={RelativeSource FindAncestor,  
                        AncestorType={x:Type Button}}}"   
                        Value="false" >  
               <Setter Property="ImageSource" Value="/YCS;component/Images/ClockRed.png"/>
          </DataTrigger>
        </Image.Triggers>
       </Image>
      </Button> 
    ```

# emacs - 使用 Emacs 的 org 模式的漂亮网站

> ID：12052013
> 
> 赞同：35
> 
> 时间：2012-08-21T09:34:10.410
> 
> 标签：emacs, responsive-design, web, org-mode

有没有使用 Emacs 的 org 模式发布的漂亮网站？我按照在线教程，但是生成的网站太丑陋了。是否有任何现有的漂亮 org 模板（带有漂亮的 css 表）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T13:15:55.637

我使用 org-mode 创建我的班级网站。示例：[http ://cse3521.artifice.cc/](http://cse3521.artifice.cc/)

该站点涉及常规文本、代码、数学、闪存/图像嵌入、表格等。

源代码可在此处获得：[https ://github.com/joshuaeckroth/cse3521-website](https://github.com/joshuaeckroth/cse3521-website)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T12:48:40.433

有使用 org-mode 的[http://msnyder.info](http://msnyder.info)，我认为它的风格很好。但是，他还定制了发布系统以获得 HTML5 输出和更好的样式。[在此处](http://msnyder.info/posts/2011/07/introducing-narcissus/)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-23T09:05:52.280

您可以简单地使用 Solarized CSS，它会为您提供吸引人的结果，包括很好的可用性增强（如可折叠部分）。

见 [http://thomasf.github.io/solarized-css/](http://thomasf.github.io/solarized-css/)

要适用于任何组织模式 HTML 导出，请在 .emacs 中添加以下行：

```
(setq org-export-html-style-include-scripts nil
       org-export-html-style-include-default nil)
 (setq org-export-html-style
   "<link rel=\"stylesheet\" type=\"text/css\" href=\"solarized-light.css\" />")

```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-16T08:14:56.300

全新模板（我在邮件列表中找到）：

[https://github.com/fniessen/org-html-themes](https://github.com/fniessen/org-html-themes)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-21T12:17:38.283

我的网站不是从 OrgMode 生成的，而是从 Muse 生成的，您可以重复使用[我的部分模板- 我采用了](http://alexott.net/en/writings/EmacsMuseMyPage.html)[Andreas Viklund](http://andreasviklund.com/)的免费设计之一。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-01-17T23:38:01.613

我刚刚为模板创建了新的 github 存储库，以使用 org-mode + jekyll + twitter bootstrap。

查看[http://github.com/cinsk/jekyll-org/](http://github.com/cinsk/jekyll-org/)获取源代码，并查看[http://cinsk.github.com/jekyll-org/中的示例](http://cinsk.github.com/jekyll-org/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-10-21T10:27:32.850

浏览官方 org-mode 页面列表站点：[使用 Org-Mode 制作的网页](http://orgmode.org/worg/org-web.html)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-02-14T09:55:34.787

我使用 org-mode + jekyll 来发布我的博客（[blog.jenkster.com](http://blog.jenkster.com)）。'Beautiful' 可能是一个延伸，但它干净清晰，是我找到的最好的设置，可以在我正在编写的内容中包含代码片段。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-26T09:13:24.467

我在[http://www.pirilampo.org/](http://www.pirilampo.org/)的网站都是由 Org 模式（而且只有它）制成的。您还可以在那里找到 CSS 源代码（LP 来自带有 Org Babel 的 Org 文件——LP = Literate Programming）。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-24T00:11:26.840

[这个页面](http://www.gorgnegre.com/linux/using-emacs-orgmode-to-blog-with-jekyll.html#notebook)怎么样？它展示了如何设置组合 Emacs Org-mode 和 Jekyll 以发布静态网站或博客 --- 这是[www.gorgnegre.com](http://www.gorgnegre.com)使用的。希望能帮助到你。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-21T13:36:13.597

我刚刚读到了 Hyde，一个由 py​​thon 和 django 驱动的静态网站生成器。
[http://ringce.com/hyde](http://ringce.com/hyde)
设置它非常简单和简约。
我们可以使用我们最喜欢的文本编辑器来编辑内容，因此是 org-mode。

然后我看到了这两个项目，它们打算链接更多的 org 和 hyde，但从未尝试过： [https ://github.com/dustinlacewell/ghorg](https://github.com/dustinlacewell/ghorg)
[https://github.com/punchagan/org-hyde](https://github.com/punchagan/org-hyde)

这听起来很吸引我！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-10-04T01:00:31.910

这是我的网站[http://sydi.org](http://sydi.org)，它是由orgmode生成的，但它的语言不是英文而是中文。我认为一个网站是否漂亮和是否适合你的眼睛并不取决于用于制作页面的工具，更重要的是，设计良好的 css 和 js 可以做到这一点。

我使用 orgmode 生成 html 并通过 elisp (orgmode hooks) 在源上修复一些东西。如果您需要任何帮助，我很高兴。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-08-29T04:09:34.503

查看[http://renard.github.com/o-blog/](http://renard.github.com/o-blog/) - 它不是严格使用 org-mode，而是一个名为 o-blog 的 org-mode 附加组件（也是站点的主题）。我没有认真对待它，但它看起来很酷。它很容易与 twitter bootstrap 集成，以提供它提供的所有漂亮的东西。

# erlang - 使用 Linux 获取 Erlang 中的内核数

> ID：12052016
> 
> 赞同：7
> 
> 时间：2012-08-21T09:34:24.327
> 
> 标签：erlang

我正在编写一个并发程序，我需要知道系统的核心数量，这样程序就会知道要打开多少个进程。是否有命令可以在 Erlang 代码中获取此信息？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T10:02:31.283

您可以使用

```
erlang:system_info(logical_processors_available) 
```

获取 erlang 运行时系统可以使用的内核数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T12:28:18.990

还有：

```
erlang:system_info(schedulers_online) 
```

它告诉您实际运行了多少调度程序线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T13:23:03.610

要获取可用内核的数量，请使用以下[`logical_processors`](http://erlang.org/doc/man/erlang.html#logical_processors)标志[`erlang:system_info/1`](http://erlang.org/doc/man/erlang.html#system_info-1)：

```
1> erlang:system_info(logical_processors).
8 
```

这个有两个伴随标志：[`logical_processors_online`](http://erlang.org/doc/man/erlang.html#logical_processors_online)显示有多少正在使用，并[`logical_processors_available`](http://erlang.org/doc/man/erlang.html#logical_processors_available)显示有多少可用（`unknown`当所有可用的逻辑处理器都在线时，它将返回）。

要知道如何并行化您的代码，您应该依赖[`schedulers_online`](http://erlang.org/doc/man/erlang.html#system_info_schedulers_online)which 将返回当前 VM 实例中可用的实际 Erlang 调度程序的数量：

```
1> erlang:system_info(schedulers_online).
8 
```

但是请注意，仅对这个值进行并行化可能还不够。有时您运行的其他进程需要一些 CPU 时间，有时您的算法将受益于更多的并行性（例如等待 IO）。经验法则是使用从获得的值`schedulers_online`作为并行度的乘数，但始终使用不同的乘数进行测试，以查看最适合您的应用程序的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:41:57.717

如何公开这些信息将是非常特定于操作系统的（当然，除非您碰巧正在[编写操作系统](http://software.intel.com/en-us/articles/intel-64-architecture-processor-topology-enumeration/)）。

你没有说你正在使用什么操作系统。在 Linux 的情况下，您可以从 /proc/cpuinfo 获取数据，但是在超线程的含义和使用共享 L2 缓存的同一裸片上的多个内核问题上存在一些微妙之处（实际上，您有一个 NUMA 架构）。

# c - 在结构中插入定义为函数指针的 C 函数

> ID：12052018
> 
> 赞同：1
> 
> 时间：2012-08-21T09:34:33.203
> 
> 标签：c, macos, dyld, function-interposition

早上好，

是否可以使用 dyld 插入功能插入这种 C 函数？ 

```
typedef struct aStructure {
    IOReturn (*aCfunction)(void *self, UInt32 integer); // self is a 
                                                        // pointer to aStructure
} aStructure; 
```

函数调用方式：

```
aStructure **myStruct = ......;

(*myStruct)->aCfunction(myStruct, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:45:35.947

可能只有在您能够弄清楚实际功能在哪里并插入*它*时才有可能。

将有代码初始化结构中的函数指针字段以指向实际函数，我想这就是您需要更改的地方。

另外，你的电话线路有点关闭，它需要

```
(*myStruct)->aCfunction(*myStruct, 1); 
```

# .net - 从表的列名在 .net 中创建动态属性

> ID：12052022
> 
> 赞同：1
> 
> 时间：2012-08-21T09:34:46.137
> 
> 标签：.net, object, .net-4.0, code-generation, dynamic-data

我当前的场景是，我在 .cs 文件中手动创建属性 FirstName(of a Class Student) 并将其分配给列名 First_Name 。即我必须手动编写属性（私有变量、公共属性以及Getters 和Setters）。然后我从数据库中检索表并获取其列名（First_Name）并将其分配给 FirstName 属性。我必须在 cs 文件上写数千行来创建属性。

我的要求是，我需要自动化属性创建部分并动态生成它。例如。如果列名是 First_Name，则创建一个属性 FirstName（通过截断 UnderScores）。这将为我节省大量的代码编写和调试时间。提前致谢..

# solr - 如何在 Sitecore 中实施 Solr

> ID：12052025
> 
> 赞同：8
> 
> 时间：2012-08-21T09:34:56.320
> 
> 标签：solr, sitecore, sitecore6

我必须在 Sitecore 中实现 Solr 索引，我想知道最好的方法是什么？

我查看了以下方法：

1.  捕获发布结束事件（或其他事件），然后将项目推送到 solr 索引
2.  实现自定义数据库爬虫并从历史表中获取所有更改。然后使用自定义索引推送数据到 solr。

第二种方法听起来像是一种方法（在我看来）。在这种情况下，我是否需要创建新的搜索索引或搜索管理器？

如果有人以前做过，你能指出我正确的方向吗？另外，如果您可以发布一些有关 sitecore-solr 实施的文章的链接。

**更新** 好的，在阅读了站点核心文档之后，这就是我想出的：

1.  创建您的自定义 SolrConfiguration 类，您可以在其中设置 solrserviceurl 等属性，添加索引及其定义（自定义 solr 索引）

2.  创建 SolrIndex 并将其（在配置文件中）添加到您的 SolrConfiguration。哪个实例化，solrindex 应该订阅 Sitecore History Manager 的 AddEntry 事件，并与 solr 爬虫通信。

3.  创建自定义处理器并连接到 sitecore 初始化管道。处理器应该初始化 SolrConfiguration（从第 1 步开始）

4.  由于您的配置文件中的所有内容都将使用反射构建，因此您可以根据您的配置文件获取配置实例

听起来怎么样。请问我有什么意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:55:52.027

我们已经在几个站点上完成了这项工作，并且往往有一个新的“已发布”solr 索引和“未发布”索引

我们打断：

**OnItemSaving**

将内容推送到未发布索引的事件（您可能不需要这个，这取决于您是否想要预览模式下的内容）

**OnPublishItemProcessed**

我们在这里处理对已发布索引的添加和更新，我不确定我们如何处理这里的删除而不深入研究代码，但肯定会处理 OnItemDelete 上的删除（如下所述）

**OnItemDelete**

我们在这里打断以从已发布和未发布的索引中删除内容（我认为我们在这里从已发布的索引中删除，因为 Sitecore 让您发布父节点以便将删除内容发布到 Web 数据库）

我希望这会有所帮助，如果可以的话，我会发布代码（但我会皱眉头）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:56:37.770

除了已经发布的答案（我认为这是一种很好的做事方式），我将分享我们是如何做到的。

我们基本上只是看了一下 Sitecore 数据库爬虫，并决定做一些类似于它的工作方式的事情。

我们利用[自定义项目生成器](http://trac.sitecore.net/CustomItemGenerator "自定义项目生成器")的重大修改版本来促进强类型对象和具有与我们的 Solr 模式相对应的属性的对象之间的映射。对于与 Solr 的实际通信，我们使用[SolrNet](http://code.google.com/p/solrnet/ "索尔网")。

总体思路是，我们递归地遍历所有项目（从站点根目录开始），并根据其模板将它们映射到适当的类型。然后我们对该项目进行索引过程（在我们的实现中，有些项目需要将多个文档索引到 Solr）。

这种方法对我们来说效果很好，除了我要注意的是，因为我们一次索引所有内容，它往往会在发布和反映对索引所做的任何更改的站点之间引入一点延迟时间。我们在开始时做出的一个疏忽，但很快就会修复，那就是我们没有“未发布”的索引（这意味着我们需要发布网站才能看到更新）。它并没有真正影响我们的解决方案，但我绝对可以看到其他人的解决方案，所以请记住这一点。

我们并不是特别想从索引中删除项目，因此我们将索引作为发布：结束事件进行。

我希望这个额外的见解可以帮助你。据我所知，关于这种特定产品组合的信息并不多，但我可以告诉你这绝对是可能的并且非常有用。

# sql - 比较两个表 id 并基于相同的 id 创建第三列

> ID：12052026
> 
> 赞同：3
> 
> 时间：2012-08-21T09:35:06.333
> 
> 标签：sql, tsql

我有两个 sql 表，一个带有 id 和 name，另一个带有 id。我想得到结果 - 具有 3 列的表，第一个 id，第二个名字，第三个 true/false，如果 id 在两个表中都没有。例如 ：

```
表 1 表 2 结果 -> 表 3
1 迈克 2 1 迈克 假
2约翰4 2约翰真
3 罗杰 3 罗杰 假
4理查德4理查德真

```

这是我不想完成的。你有什么建议吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:38:44.780

即使未找到匹配项，[左连接也会返回行。](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)此行将包含空值。

```
select t1.id, 
       t1.name,
       case when t2.id is null 
            then 'False' 
            else 'True' 
        end DoesExist
  from Table1 t1
  left join Table2 t2
    on t1.ID = t2.ID 
```

# python - 在 django 中缓存数据库查询

> ID：12052033
> 
> 赞同：0
> 
> 时间：2012-08-21T09:35:37.097
> 
> 标签：python, database, django, caching

我有使用两个外部脚本的 django 应用程序。一个脚本将文件从 A 移动到 B，将 B 的值存储在数据库中 - 然后存在，它应该提交任何可能打开的事务。下一个脚本对文件的移动做出反应（使用 inotify），计算 md5sum（这显然需要时间），然后在数据库中查找一个条目，如 `x = Queue.get(filename=location)`. 查看我的日志的时间戳，我 100% 确定第一个脚本在第二个脚本（实际上是一个守护进程）运行查询之前很久就完成了。有趣的是，重新启动守护程序后，事情就可以完美地工作了。

这让我相信在守护进程运行期间缓存了查询集（每次使用 inotify 检测到新文件时，我实际上运行上面显示的代码）。但是，我不想一直重新启动守护程序，而是强制查询实际使用数据库而不是缓存。

django 文档对此并没有说太多 - 但是通常 django 不用作外部 :)

提前感谢您的任何提示！

本

PS：根据请求，来自守护进程的相关部分的来源

```
def _get_info(self, path):
    try:
        obj = Queue.objects.get(filename=path)
        x = obj.x
        return x
    except Exception, e:
        self.logger.error("Error in lookup: %s" % e)
        return None 
```

每次将新文件移动到监视目录时，线程都会调用它

而第一个脚本中的代码看起来像

```
for f in Queue.objects.all():
    if (matching_stuff_here):
         f.filename = B
         f.save()    
         sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:21:04.150

您没有显示任何实际代码，所以我们必须猜测。我的猜测是，即使第一个脚本中的事务已经完成并提交，你仍然在脚本 B 中的一个打开的事务中：并且由于事务隔离，在你完成事务之前你不会看到 B 中的任何更改那里。

# python - 从 mongo 引擎中的嵌入式文档中删除一行

> ID：12052035
> 
> 赞同：0
> 
> 时间：2012-08-21T09:35:43.090
> 
> 标签：python, mongodb, cherrypy, mongoengine

我有一个名为`login_info`. 它有两个字段：

*   姓名
*   密码
*   地点

`Location`是一个包含两个字段的嵌入文档：

*   约会时间
*   城市

嵌入文档中有数据，我想从中删除一行。例如：我必须删除位置为“加拿大”的所有行。我怎么能在 mongo 引擎中做到这一点？任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:58:03.097

试试这个

```
db.login_info.update({}, {$pull:{location:{city:"Canada"}}}) 
```

好的，试试这个

```
db.login_info.update( { "location.city" : { $exists : true } }, { $unset : { "location.city" : "Canada" } }, false, true); 
```

这将删除城市为“加拿大”的所有“行”。

# html - 导航内容滑块上的 CSS 定位辅助

> ID：12052037
> 
> 赞同：0
> 
> 时间：2012-08-21T09:35:50.803
> 
> 标签：html, css, positioning

我在对齐两个元素时遇到问题。我希望在我的两个迷你内容滑块的导航箭头中间对齐分页。

我需要的设计示例：

[http://www.garyrevell.co.uk/student-i/PastedGraphic-8.png](http://www.garyrevell.co.uk/student-i/PastedGraphic-8.png)

当前正在进行的 WIP 现场网站 - [http://www.garyrevell.co.uk/student-i/index.html](http://www.garyrevell.co.uk/student-i/index.html)

CSS

```
#slider1 { height: 1%; overflow:hidden; padding: 0 0 0 0;   }

#slider1 .viewport { float: left; width: 240px; min-height: 190px; overflow: hidden; position: relative; }

#slider1 .buttons { background:url("../images/buttons.png") no-repeat scroll 0 0 transparent; display: inline-block;  background-position: 0 -38px; text-indent: -999em; float: left; width: 39px; height: 24px; overflow: hidden; position: relative;  }

#slider1 .previous { background-position: 0 0; margin-left:5px;  }
#slider1 .next { background-position: 0 0; left: 130px }
#slider1 .disable { visibility: hidden; }

#slider1 .overview { list-style: none; position: absolute; padding: 0; margin: 0; width: 240px; left: 0 top: 0; }
#slider1 .overview li{ float: left; margin: 0 20px 0 0; padding: 1px; width: 230px;}

    /* Tiny Carousel - Slider Bullets */

#slider1 .pager, #slider2 .pager { overflow:hidden; list-style: none; clear: top; margin: 0 0 0 45px; }

/*Normal Style*/

#slider1 .pager li, #slider2 .pager li{ float: left;  display: block; 

}

#slider1 .pager a, #slider2 .pager a { width: 15px;
height: 12px;
width: 12px;
background:url(../images/bullet-norm.png); background-position: left top; background-repeat:no-repeat;
float: left;
text-indent: -4000px;
position: relative;
margin-left: 3px;
color: transparent;
display:inline-block;
cursor: pointer;

}

#slider1 .pager a:hover{
    background-position: 0 50%;

}

#slider1 .pager .active {
    color: #fff; background-image:  url(../images/bullet-selected.png); } /*CURRENT IMAGE HERE*/
    #slider1 .overview { list-style: none; position:    absolute; width: 240px; left: 0 top: 0; }

    #slider1 .overview li{ float: left; margin: 0 20px 0 0;  width: 236px;

}

    a.pagenum {margin-top: 12px;}

    ul{border:0; margin:0; padding:0;} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:41:55.097

`css`请用我的更新你的，`css`你会达到你想要的结果：-

**CSS**

```
#slider1 .pager, #slider2 .pager {
    list-style: none outside none;
    margin: 0 0 0 45px;
    overflow: hidden;
    position: relative;
    top: -23px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:42:12.127

分别浮动`left`和`right`导航箭头并`left: 130px;`从第二个箭头中删除。

设置 equal `left`& `right`margin on `ul.pager`，设置`text-align: center`它并给出它的`li` `display:inline-block`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:46:07.430

放

```
ul.pager{
     margin: 0 auto; 
     display: table; (ife the first line above alone did not work...)
} 
```

将此代码放在任何其他 .pager 引用的代码之后另外，删除 .pager 类上的任何填充

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:00:00.510

您甚至可以将分页对齐为居中

CSS：

```
.pager-wrapper{
    padding: 5px; 
    height: 23px;
    width: something;
    float: left;
    text-align: center;
}
a {
    padding: 10px;
    margin: 4px;
    border: 1px solid black;
    text-decoration: none;
    font-size: 1px;
}
a:hover {
    background: red;
    color: white;
}
.selected {
    background: red;
    color: white;
} 
```

HTML：

```
<div class="pager-wrapper" >
<a class="selected" href="#">1</a><a href="#">2</a><a href="#n">3</a><a href="#">4</a>
</div> 
```

# jquery - 脚本不断在删除函数上窃取类

> ID：12052041
> 
> 赞同：1
> 
> 时间：2012-08-21T09:36:00.487
> 
> 标签：jquery, html

我有一个出于功能原因删除类的脚本，问题是它删除了所有类，而不仅仅是它应该删除的类。

HTML

```
 <ul id="slidecontrols" class="sc-nav">
  <li class="dont-remove">
     <a href="#one" class="user-management shadow1">User Management</a>
  </li>
  <li class="dont-remove">
    <a href="#two" class="asset-management shadow1">Asset Management</a>
  </li>
   <li class="dont-remove">
    <a href="#three" class="reporting shadow1">Reporting & Analytics</a>
  </li>
  </ul> 
```

jQuery 添加类 .selected 并删除类 .selected 以及该“li”元素上的所有其他类。

```
$(document).ready(function () {

//Set the initial state: highlight the first button...
$('#slidecontrols').find('li:eq(0)').addClass('selected');

//and hide all slides except the first one
$('#slides').find('> div:eq(0)').nextAll().hide();

//actions that apply on click of any of the buttons
$('#slidecontrols li').click(function (event) {

    //turn off the link so it doesn't try to jump down the page
    event.preventDefault();

    //un-highlight the buttons
    $('#slidecontrols li').removeClass();

    //hide all the slides
    $('#slides > div').hide();

    //highlight the current button
    $(this).addClass('selected');

    //get the index of the current button...
    var index = $('#slidecontrols li').index(this);

    //and use that index to show the corresponding slide
    $('#slides > div:eq(' + index + ')').show();

});

});

< /script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:37:38.543

[jsBin 演示](http://jsbin.com/enulox/1/edit)

代替：

```
$('#slidecontrols li').removeClass(); 
```

利用：

```
$('#slidecontrols li').removeClass('selected'); 
```

# php - 下拉菜单是否有类似只读属性的东西？

> ID：12052044
> 
> 赞同：0
> 
> 时间：2012-08-21T09:36:12.443
> 
> 标签：php, select

我的表单包含一个单选按钮和一个下拉菜单。因此，根据单选按钮的选定值，我需要启用/禁用下拉菜单。

我正在这样做：

```
<select name="bas_type" id="bas_type" disabled="disabled">
  <option value="Monthly">Monthly</option>
  <option value="Quarterly">Quarterly</option>
  <option value="Annualy">Annualy</option>
</select> 
```

但是如果表单被禁用，我想在 $_POST 中将下拉值设为空。所以这不起作用。请任何建议..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:38:25.933

只需添加一个隐藏字段，其中包含您希望在禁用控件时接收的值并且与下拉列表名称相同。请务必将其放在 HTML 中的下拉列表**之前：**

```
<input type="hidden" name="bas_type" value="" />
<select name="bas_type" id="bas_type" disabled="disabled">
  <option value="Monthly">Monthly</option>
  <option value="Quarterly">Quarterly</option>
  <option value="Annualy">Annualy</option>
</select> 
```

当然你不应该真的这样做，因为在 PHP 中你应该接收传入的参数，至少有一个辅助函数，比如

```
function param($name, $default = null) {
    return isset($_REQUEST[$name]) ? $_REQUEST[$name] : $default;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:39:36.497

不要依赖从表单中获得的数据。您实际上应该做的是检查服务器端单选按钮是否处于活动状态，并取决于该忽略或接受来自 Dropbox 的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T09:37:17.790

将表单中的值设置为“”，这应该可以解决问题：

```
<option value="">Annualy</option> 
```

或使用这样的空间（不确定哪个更适合您，没有尝试过）：

```
<option value=" ">Annualy</option> 
```

编辑： 中包含的`value="something"`数据是通过 get 传递给 URL 的实际数据。因此，如果您将其空白，则数据将不会通过。

# sql-server - SSRS 超时已过期。操作完成前超时时间已过或服务器无响应

> ID：12052047
> 
> 赞同：6
> 
> 时间：2012-08-21T09:36:20.140
> 
> 标签：sql-server, reporting-services, bids

我有一个包含多个报告的报告解决方案。到目前为止，我已经能够毫无问题地添加基于 SPROC 的数据集。但是，当我尝试添加最新数据集并为其查询类型使用 SPROC 时，当我单击刷新字段时，我收到以下错误：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

我已经在数据源属性>编辑>测试连接中测试了数据库连接，它工作正常。

我在以下方面将超时时间增加到 100：

1.  数据源的连接字符串，即 - Connect Timeout=100
2.  工具>选项>数据库工具>查询和视图设计器。取消长时间运行的查询设置为 100。
3.  工具>选项>数据库工具>表和数据库设计器>选中“覆盖表设计器更新的连接字符串超时值”。事务超时设置为 100

SPROC 在 SQL 数据库中运行良好。大约需要 55 秒。

还有其他想法吗？谢谢。

更新：我现在无法使用 SPROC 添加任何数据集。甚至认为 SPROC 在 SQL 中都可以正常工作！！！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-07T12:22:29.120

如果您使用的是 Report Builder，您也可以在 DataSet 中增加超时。

[![报表生成器中的数据集超时设置](../Images/522ef00b27959e00847a69d18c34c337.png)](https://i.stack.imgur.com/cuH4m.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-11T09:52:21.543

在存储过程中添加新添加的列时，我也面临同样的问题。

从以下方式克服这个问题。

将存储过程更改为注释除最终选择命令之外的所有查询。

现在已经添加了新列，然后取消注释 sp.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:18:03.607

报告要记住的是，当它运行时，它将尝试运行所有数据集，以确保它们是可运行的，并且可以返回它们请求的数据。因此，通过单独运行每个 proc，您实际上并不是在尝试使用 SSRS 进行复制……老实说，不要打扰。

您可以尝试在报告运行时运行 sp_who，或者甚至只是手动执行这些过程以查看它们有哪些共同的表。由于您的 proc 需要 52 秒才能返回其数据集，因此我将假设它正在做一些繁重的工作。如果没有查询，没有人将能够说出确切的问题是什么。

我建议使用 NO LOCK 来查看是否可以解决您的问题。如果是这样，那么您的 proc 正在为数据而战并相互阻塞……可能处于无限循环中。使用 NO LOCK 不是解决办法。阅读它的作用并自行判断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-09T16:43:39.597

我的解决方案是转到给定问题数据集的数据集属性，将查询粘贴到查询字段中，单击刷新字段，然后单击确定。

# java - 在 Android 中将字节数组转换为字符序列

> ID：12052050
> 
> 赞同：6
> 
> 时间：2012-08-21T09:36:38.180
> 
> 标签：java, android, type-conversion, charsequence

我使用下面的代码将字符序列转换为字节数组。然后我将字节数组作为 Blob 保存到我的 Sqlite 数据库中。

为此，我使用了以下代码，

```
 public static byte[] toByteArray(CharSequence charSequence) {
        if (charSequence == null) {
          return null;
        }
        byte[] barr = new byte[charSequence.length()];
        for (int i = 0; i < barr.length; i++) {
          barr[i] = (byte) charSequence.charAt(i);
        }

        return barr;
      } 
```

现在我想将从 sqlite 检索到的字节数组转换为 Charsequence。但我无法得到任何帮助。

**如何将字节数组转换为字符序列？**

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T09:44:35.523

将 a`CharSequence`转换为字节数组

```
CharSequence seq;
Charset charset;
...
byte[] bytes = seq.toString().getBytes(charset); 
```

再次转换回来

```
CharSequence seq2 = new String(bytes, charset); 
```

请记住，这`CharSequence`是一个由`String`, `StringBuilder`,`StringBuffer`等实现的接口，因此所有`String`实例都是`CharSequence`实例，但并非所有`CharSequence`实例都是实例，`String`但约定`CharSequence`是它的`toString()`方法应该返回等价的`String`

在内部，Java 中的所有字符串都表示为 Unicode，因此只要消费者和生产者都是 Java，使用的最安全的字符集就是数据的可能编码大小之一`UTF-8`或`UTF-16`取决于数据的可能编码大小。在拉丁文字占主导地位的地方，

```
Charset charset = Charset.forName("UTF-8"); 
```

99.9% 的时间会给出最节省空间的编码，对于非拉丁字符集（例如中文），您可能会发现`UTF-16`根据您正在编码的数据集更节省空间。您需要进行测量以表明它是一种更节省空间的编码，并且正如`UTF-8`更广泛预期的那样，我推荐`UTF-8`在任何情况下作为默认编码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T09:39:45.273

看起来您正在使用 ASCII 数据（如果不是，您的代码非常有损）。

要从 ASCII 字节获取 CharSequence，您可以执行

```
CharSequence x = new String(theBytes, "US-ASCII"); 
```

对于其他编码，只需指定字符集的名称即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:39:27.097

```
CharSequence c = new String(byte[]); 
```

# c++ - 为 Windows 7 定义预处理器指令

> ID：12052058
> 
> 赞同：1
> 
> 时间：2012-08-21T09:37:12.797
> 
> 标签：c++, compiler-errors, preprocessor-directive

我正在使用 SetDllDirectory() 并想知道如何为 Windows 7 HP 64 位定义指令我在想这样的事情：

在预处理器指令中：

```
 Add WIN7 
```

在 .cpp 我想添加类似的东西

```
#ifndef WIN7<- where the function is used
SetDllDirectory();
#endif 
```

但只要我添加语句，SetDllDirectory 就会被注释掉。

这是我尝试过的，我在预处理器定义中添加了**WIN7**并添加：

```
#if defined(__WIN7__)
if (regkeyExists) {
    if (regkey->HasValue("LibPath")) {
        regkey->QueryValue("LibPath", value);
        if (!value.empty()) {
            wxSetEnv("ABCLib", value);
            SetDllDirectory(value.c_str());
        }
    }

}
SetDllDirectory("C:\\Program Files\\ABC\\ABCProject\\lib");
#endif 
```

这是声明windows 7的权利吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:43:44.873

You don't want to define your own macro to detect Windows 7, use the [ones provided by Microsoft](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx) - wrap your Win7 only code in:

```
#ifdef _WIN32_WINNT_WIN7 
xyz()
#endif 
```

If you do create your own, you must define it when you want to compile for Windows 7, it seems that you're hiding the SelDllDirectory() function - #ifndef means "if not defined" so if WIN7 macro is not defined anywhere, then you get that function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:41:47.253

[`NTDDI_VERSION`或者`_WIN32_WINNT`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)怎么样？

# performance - 生成除数的两个简单代码。为什么递归更快？

> ID：12052059
> 
> 赞同：4
> 
> 时间：2012-08-21T09:37:14.837
> 
> 标签：performance, haskell, recursion, higher-order-functions, factors

在解决问题时，我必须计算一个数字的除数。我有两个实现可以为给定数字生成所有除数 > 1。

首先是使用简单的递归：

```
divisors :: Int64 -> [Int64]
divisors k = divisors' 2 k
  where
    divisors' n k | n*n > k = [k]
                  | n*n == k = [n, k]
                  | k `mod` n == 0 = (n:(k `div` n):result)
                  | otherwise = result
      where result = divisors' (n+1) k 
```

第二个使用 Prelude 中的列表处理函数：

```
divisors2 :: Int64 -> [Int64]
divisors2 k = k : (concatMap (\x -> [x, k `div` x]) $!
                  filter (\x -> k `mod` x == 0) $! 
                  takeWhile (\x -> x*x <= k) [2..]) 
```

我发现第一个实现更快（我打印了返回的整个列表，因此没有部分结果由于懒惰而未被评估）。这两种实现产生不同顺序的除数，但这对我来说不是问题。（事实上​​，如果 k 是一个完美的平方，那么在第二个实现中平方根会被输出两次——这也不是问题）。

一般来说，这种递归实现在 Haskell 中更快吗？另外，我将不胜感激任何使这些代码更快的指针。谢谢！

编辑：

这是我用来比较这两种实现的性能的代码：[https ://gist.github.com/3414372](https://gist.github.com/3414372)

这是我的计时测量：

**使用严格评估的除数 ($!)**

```
$ ghc --make -O2 div.hs 
[1 of 1] Compiling Main             ( div.hs, div.o )
Linking div ...
$ time ./div > /tmp/out1

real    0m7.651s
user    0m7.604s
sys 0m0.012s 
```

**使用带有惰性求值 ($) 的除数 2：**

```
$ ghc --make -O2 div.hs 
[1 of 1] Compiling Main             ( div.hs, div.o )
Linking div ...
$ time ./div > /tmp/out1

real    0m7.461s
user    0m7.444s
sys 0m0.012s 
```

**使用函数除数**

```
$ ghc --make -O2 div.hs 
[1 of 1] Compiling Main             ( div.hs, div.o )
Linking div ...
$ time ./div > /tmp/out1

real    0m7.058s
user    0m7.036s
sys 0m0.020s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:05:52.667

既然你问了，为了让它更快，应该使用不同的算法。简单直接的是首先找到一个素数分解，然后以某种方式从中构造除数。

试除法的标准[素数分解](http://www.haskell.org/haskellwiki/Testing_primality#Primality_Test_and_Integer_Factorization)是：

```
factorize :: Integral a => a -> [a]
factorize n = go n (2:[3,5..])    -- or: `go n primes`
   where
     go n ds@(d:t)
        | d*d > n    = [n]
        | r == 0     =  d : go q ds
        | otherwise  =      go n t
            where  (q,r) = quotRem n d

-- factorize 12348  ==>  [2,2,3,3,7,7,7] 
```

可以对相等的质因数进行分组和计数：

```
import Data.List (group)

primePowers :: Integral a => a -> [(a, Int)]
primePowers n = [(head x, length x) | x <- group $ factorize n]
-- primePowers = map (head &&& length) . group . factorize

-- primePowers 12348  ==>  [(2,2),(3,2),(7,3)] 
```

除数通常由以下结构构成，尽管是无序的：

```
divisors :: Integral a => a -> [a]
divisors n = map product $ sequence 
                    [take (k+1) $ iterate (p*) 1 | (p,k) <- primePowers n] 
```

因此，我们有

```
numDivisors :: Integral a => a -> Int
numDivisors n = product  [ k+1                   | (_,k) <- primePowers n] 
```

这里`product`来自`sequence`上面定义中的 ，因为`sequence :: Monad m => [m a] -> m [a]`for list monad`m ~ []`构造了由一个从每个成员列表中选择的元素的所有可能组合的列表`sequence_lists = foldr (\xs rs -> [x:r | x <- xs, r <- rs]) [[]]`，因此`length . sequence_lists === product . map length`, and or course`length . take n === n`用于无限参数列表。

也可以按顺序生成：

```
ordDivisors :: Integral a => a -> [a]
ordDivisors n = foldr (\(p,k)-> foldi merge [] . take (k+1) . iterate (map (p*)))
                      [1] $ reverse $ primePowers n

foldi :: (a -> a -> a) -> a -> [a] -> a
foldi f z (x:xs) = f x (foldi f z (pairs xs))  where
         pairs (x:y:xs) = f x y:pairs xs
         pairs xs       = xs
foldi f z []     = z

merge :: Ord a => [a] -> [a] -> [a]
merge (x:xs) (y:ys) = case (compare y x) of 
           LT -> y : merge (x:xs)  ys
           _  -> x : merge  xs  (y:ys)
merge  xs     []    = xs
merge  []     ys    = ys

{- ordDivisors 12348  ==>  
[1,2,3,4,6,7,9,12,14,18,21,28,36,42,49,63,84,98,126,147,196,252,294,343,441,588,
686,882,1029,1372,1764,2058,3087,4116,6174,12348] -} 
```

这个定义也是有效的，即它立即开始产生除数，没有明显的延迟：

```
{- take 20 $ ordDivisors $ product $ concat $ replicate 5 $ take 11 primes
==> [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]
(0.00 secs, 525068 bytes)

numDivisors $ product $ concat $ replicate 5 $ take 11 primes
==> 362797056  -} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T10:19:40.883

递归版本通常并不比基于列表的版本快。这是因为当计算遵循某种模式时，GHC 编译器会使用[列表融合优化。](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/rewrite-rules.html#id690070)这意味着列表生成器和“列表转换器”可能会融合到一个大型生成器中。

但是，当您使用 时`$!`，您基本上是告诉编译器“请在执行下一步之前生成此列表的第一个缺点”。这意味着 GHC 被迫至少计算一个中间列表元素，这完全禁用了整个融合优化。

因此，第二种算法速度较慢，因为您会生成必须构造和销毁的中间列表，而递归算法只是直接生成单个列表。

# javascript - 闭包输出查询

> ID：12052060
> 
> 赞同：0
> 
> 时间：2012-08-21T09:37:16.567
> 
> 标签：javascript, jquery, closures

我正在阅读以下主题[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)并找到了这段代码：

```
function foo(x) {
  var tmp = 3;
  return function (y) {
    alert(x + y + tmp);
    x.memb = x.memb ? x.memb + 1 : 1;
    alert(x.memb);
  }
}
var age = new Number(2);
var bar = foo(age); // bar is now a closure referencing age.
bar(10); 
```

作者评论说：

> *正如预期的那样，每次调用`bar(10)`都会增加`x.memb`. 可能出乎意料的是，这`x`只是指代与年龄变量相同的对象！在给酒吧打了几个电话后，`age.memb`将`2`！*

我很困惑为什么它总是会返回 2。你能解释一下它是怎么来的 2 总是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:49:35.750

这里发生的情况是： foo 返回一个函数，该函数在调用时会增加最初传入 foo 的对象的 memb 属性。

参数对象 age 是一个简单对象会更清楚；但是原作者可能在这里玩得很开心，所以传入了一个新的 Number - 就 Javascript 而言，它与任何对象一样有效。

因此，当 bar 被调用时，该 Number 对象上的 memb 属性被创建/递增。

该数字的“内部价值”保持不变；它始终为 2。但 age.memb 每次都会增加 1。这就是作者的意思：

> 在几次调用 bar 之后，age.memb 将是 2！

这里的 2 是指 memb 增加了几次（即两次）后的值，与 age 刚开始时的 Number 的值无关。再次调用 bar，age.memb 将为 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:43:24.373

bar(10) 引用了 foo(2)

所以每次你调用 bar(10)。它将执行 foo 的内部函数（闭包），其参数 y 为 10，并且由于 bar 的年龄参考为 2。因此，如果您调用 bar(10)，则年龄将始终为 2，而 y 将根据值约为 10提供。即使外部函数不存在，闭包基本上也会保存对内部函数的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:49:15.903

如果我理解正确，您会在 bar 中获得类似函数指针的东西。这指向无名函数。这个无名函数总是接收相同的输入，因为 foo 只被调用一次，即 x 永远不会改变。结果，在无名函数中没有内存，因此始终为您提供 x 的输入值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:49:39.103

它不会“总是”为 2。

作者说：“在几次调用 bar 之后，age.memb 将是 2” - 在 2 次调用之后它将是“2”。

4 次通话后，它将是 4 次。

只需将其粘贴到萤火控制台：

```
function foo(x) {
  var tmp = 3;
  return function (y) {
    //console.log(x + y + tmp);
    x.memb = x.memb ? x.memb + 1 : 1;
    console.log(x.memb);
  }
}
var age = new Number(2);
var bar = foo(age); // bar is now a closure referencing age.
bar(10);
bar(10);
bar(10);
bar(10);

console.log('result: ', age.memb)    // result: 4 
```

# c# - 通过公共 readOnly 属性写入对私有对象的访问

> ID：12052065
> 
> 赞同：1
> 
> 时间：2012-08-21T09:37:25.460
> 
> 标签：c#, properties, encapsulation, readonly

我目前正在努力理解我刚刚在某处看到的东西。

可以说我有两个课程：

```
 class MyFirstCLass{
      public int membVar1;
      private int membVar2;
      public string membVar3;
      private string membVar4; 

      public MyFirstClass(){
      }
 } 
```

和 ：

```
 class MySecondClass{
      private MyFirstClass firstClassObject = new MyFirstClass();

      public MyFirstClass FirstClassObject{
           get{
                return firstClassObject;
           }
      }
 } 
```

如果我做这样的事情：

```
 var secondClassObject = new MySecondClass(){
      FirstClassObject = {membVar1 = 42, membVar3 = "foo"}
 }; 
```

secondClass 是 MySecondClass 的一个实例，并且确实有一个 MyFirstClass 类型的私有成员变量，它有一个 readOnly 属性。但是，我可以更改 membVar1 和 membVar2 的状态。没有封装问题吗？

最好的祝福，

Al_th

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:42:30.317

MySecondClass 上的 FirstClassObject 属性没有 setter 的事实并不意味着从 getter 返回的对象变得不可变。由于它具有公共字段，因此这些字段是可变的。因此，这是完全合法的说法`secondClassObject.FirstClassObject.membVar1 = 42`。缺少 setter 仅意味着您不能将存储在 firstClassObject 字段中的对象引用替换为对不同对象的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:46:30.380

请注意：您*没有*更改`MySecondClass.FirstClassObject`. 您只是在更改该属性内的值。

比较以下两个片段。第一个是合法的，第二个是不合法的，因为它试图为`FirstClassObject`属性分配一个新值：

```
// legal:
var secondClassObject = new MySecondClass(){ 
  FirstClassObject = {membVar1 = 42, membVar3 = "foo"} }

// won't compile:
// Property or indexer 'FirstClassObject' cannot be assigned to -- it is read only
var secondClassObject = new MySecondClass(){ 
  FirstClassObject = new MyFirstClass {membVar1 = 42, membVar3 = "foo"} } 
```

基本上，您的代码只是一种非常奇特的编写方式：

```
var secondClassObject = new MySecondClass();
secondClassObject.FirstClassObject.membVar1 = 42;
secondClassObject.FirstClassObject.membVar3 = "foo"; 
```

我就是这样写的。它是明确的和可以理解的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T17:33:50.830

type 的存储位置和 type`MyFirstCLass`的属性返回的值都不`MyFirstCLass`包含 fields`membVar1`等`membVar2`。存储位置或属性包含足以*识别*实例`MyFirstCLass`或指示其为“null”的信息。在某些语言或框架中，存在标识对象但仅允许对其执行某些操作的引用类型，但 Java 和 .NET 都使用混杂对象引用：如果对象允许持有引用的外部代码执行某些操作它，任何获得引用的外部代码都可以做到这一点。

如果一个类正在使用一个可变对象来封装自己的状态，并希望允许外界看到该状态但不允许外界篡改它，那么它一定不能将对象直接返回给外部代码，而是给出外部代码别的东西。可能性包括：

*   单独暴露对象所包含的状态的所有方面（例如，具有`membVar1`返回封装对象的值的属性`membVar1`）。这可以避免混淆，但使调用者无法将属性作为一个组来处理。

*   返回一个只读包装器的新实例，该实例包含对私有对象的引用，并具有将读取请求（但不是写入请求）转发给这些成员的成员。返回的对象将用作只读“视图”，但外部代码将没有很好的方法来识别两个这样的对象是否是同一个底层对象的视图。

*   有一个在构造函数中初始化的只读包装类型的字段，并有一个属性返回。如果每个对象只有一个与之关联的只读包装器，则两个包装器引用只有在它们标识相同的包装器时才会查看相同的包装器对象。

*   创建基础数据的不可变副本，可能通过创建新的可变副本并向其返回新的只读包装器。这将为调用者提供数据的“快照”，而不是实时“视图”。

*   创建基础数据的新可变副本，并将其返回。这样做的缺点是，尝试通过更改副本来更改基础数据的调用者将被允许更改副本而不会发出任何警告，但该操作将不起作用。为什么可变结构是“邪恶”的所有论点在这里都适用：接收暴露字段结构的代码应该*期望*对接收结构的更改不会影响它的来源，但接收可变类的代码对象无法知道这一点。属性不应以这种方式运行；这种行为通常只适用于明确其意图的方法（例如`FirstClassObjectAsNewMyFirstClass();`

*   要求调用者传入一个可以接受基础数据的类型的可变对象，并将数据复制到该对象中。这为调用者提供了可变形式的数据（在某些情况下可能更容易使用），但同时避免了关于谁“拥有”对象的任何混淆。作为额外的好处，如果调用者将进行许多查询，则调用者可以为所有查询重用相同的可变对象，从而避免不必要的对象分配。

*   将数据封装在结构中，并让属性返回结构。有些人可能会拒绝这种用法，但在调用者可能想要分段修改数据的情况下，这是一个有用的约定。这种方法只有在所讨论的数据仅限于一组固定的离散值（例如矩形的坐标和尺寸）时才真正有效，但如果调用者了解 .NET 结构是什么（*所有 . NET 程序员应该*) 语义本质上是显而易见的。

在这些选择中，只有最后两个通过类型系统明确调用者应该期望什么语义。接受来自调用者的可变对象提供了清晰的语义，但使用起来很尴尬。返回一个暴露的字段结构提供了清晰的语义，但前提是数据由一组固定的离散值组成。返回数据的可变副本有时很有用，但只有在方法名称清楚地表明它在做什么时才合适。其他选择通常会模糊数据是代表快照还是实时“视图”的问题。

# numpy - 如果我使用 python pandas，是否需要结构化数组？

> ID：12052067
> 
> 赞同：22
> 
> 时间：2012-08-21T09:37:29.400
> 
> 标签：numpy, scipy, pandas

既然 pandas 提供了数据框结构，那么 numpy 中是否需要结构化/记录数组？我需要对需要这种结构化数组类型框架的现有代码进行一些修改，但我正在考虑从现在开始使用 pandas 代替它。我会在任何时候发现我需要熊猫不提供的结构化/记录数组的一些功能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T18:53:08.047

pandas 的 DataFrame 是一个高级工具，而结构化数组是一个非常低级的工具，使您能够将二进制数据块解释为类似表的结构。在 pandas 中很难做到的一件事是嵌套数据类型与结构化数组具有相同的语义，尽管这可以用分层索引来模仿（结构化数组不能做大多数你可以用分层索引做的事情）。

结构化数组也适用于通过内存映射加载的海量表格数据集 ( `np.memmap`)。不过，这是最终将在 pandas 中解决的限制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T16:48:03.987

我目前正在从各种 Numpy 数组过渡到 Pandas DataFrames。自从 Pandas、AFAIK 以来，如果主要建立在 Numpy 之上，这已经相对轻松。我的意思是`.mean()`, `.sum()`etc 都可以按您希望的方式工作。最重要的是，添加分层索引并使用`.ix[]`(index) 属性和`.xs()`(cross-section) 方法提取任意数据片段的能力大大提高了我的代码的可读性和性能（主要是通过减少数量往返我的数据库）。

我尚未完全调查的一件事是 Pandas 与 Scipy 和 Matplotlib 更高级功能的兼容性。但是，如果出现任何问题，很容易拉出一个行为足够像数组的列以供这些库工作，甚至可以即时转换为数组。例如，DataFrame 的绘图方法依赖于 matplotlib 并为您处理任何转换。

此外，如果您像我一样，并且您的 Scipy 主要用途是统计模块，那么 pystatsmodels 正在迅速成熟并严重依赖 pandas。

那是我两分钱的价值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:52:15.530

我从来没有花时间深入`pandas`研究，但我经常在 numpy.xml 中使用结构化数组。以下是一些注意事项：

*   `recarrays`如果您不介意失去按属性访问字段的可能性，结构化数组既方便又减少开销。但是，你有没有试过在 a 中使用`min`or`max`作为字段名`recarray`？

*   NumPy 的开发时间比 .NumPy 的开发时间长得多`pandas`，拥有更多的团队，并且它变得无处不在，以至于许多第三方软件包都依赖它。您可以期望结构化数组比数据帧更便携`pandas`。

*   `pandas`数据框容易挑选吗？例如，它们可以来回发送`PyTables`吗？

除非您 100% 确信永远不必与非`pandas`用户共享代码，否则您可能希望保留一些结构化数组。

# complexity-theory - 如何证明对数复杂度

> ID：12052068
> 
> 赞同：2
> 
> 时间：2012-08-21T09:37:32.730
> 
> 标签：complexity-theory

```
for (int i = 1; i < N; i *= 2) { ... } 
```

类似的事情是对数复杂度的特征。

但是如何获得 log(N)？

你能给出数学证据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T09:39:44.090

关于算法复杂性的有用参考：[http ://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)

在第 n 次迭代中，

```
i = 2^n 
```

我们知道它会迭代直到`i >= N`

所以，

```
i < N 
```

现在，

```
2^n = i < N

N > 2^n

log2 N > log2 (2^n)

log2 N > n 
```

我们知道它迭代 n 次，小于 log2 N。

因此`# iterations < log2 N`，或者`# iterations`是`O(log N)`

QED。对数复杂度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:40:40.720

乘以`N`2 会增加一次迭代，无论`N`. 这几乎就是对数函数的定义——每次乘以`N`一个常数，它就会增加一个常数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:44:06.610

您的代码将一直有效`i < N`，并且每一步都有效`i *= 2`。如果您的循环运行`log(N) + const`时间，我们说您的循环具有对数复杂性。`2 ^ log(N) = N`，所以经过`[log(N)] + 1`几次`i > N`。

# ios - NSOutputStream：如果流不完整，删除现有文件？

> ID：12052071
> 
> 赞同：0
> 
> 时间：2012-08-21T09:37:43.567
> 
> 标签：ios, xcode, file, delete-file, nsoutputstream

我正在使用 NSUrlConnection 和 NSOutputStream 来编写文件。但是当文件不存在或下载时出错时，我希望能够删除不完整的下载文件。

有这种操作吗？因为否则我会得到一个内容为 0 字节的文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:10:15.490

像这样处理流错误：

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {

NSLog(@"stream:handleEvent: is invoked...");
switch(eventCode) {

    case NSStreamEventErrorOccurred:

    {
       //give alert about error
       // remove current incomplete download data here
       break;
    }

    // continued ....

   }

 } 
```

# asp.net - “键入”您的控制状态有什么缺点？

> ID：12052072
> 
> 赞同：3
> 
> 时间：2012-08-21T09:37:52.780
> 
> 标签：asp.net, webforms, web-parts, viewstate

我对 Web Parts 和 Web Forms 比较陌生（我只使用过 MVC 框架）。

我打算在控制状态下存储一些数据。我能找到的所有示例都将`object[]`数组置于控制状态，并将`base`控制状态置于 0 索引上。

我真的不喜欢把所有东西都放在`object[]`一个`MyWebPartControlState`. 我会将基本控件状态存储在`BaseControlState`类型的属性中`object`。

我想知道这是否会导致任何问题，或者是否有任何其他原因导致这可能不是一个好主意。我想知道，因为这对我来说是合乎逻辑的，但我找不到任何控制状态的例子，他们没有将所有内容直接置于控制状态或`object[]`.

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:08:15.567

控制状态与视图状态保持在同一字段中，并遵循相同的序列化规则。您找到的所有示例都使用对象数组，因为这是 ASP.NET 中的优化状态序列化程序可以理解的类型之一，并且能够优化序列化。

如果您使用自定义对象，则序列化程序将不会使用优化，而是使用**将导致控制状态臃肿**的对象序列化。如果您想对您的状态有一个强类型的视图，您应该在您的自定义类上实现，以便它封装从序列化程序理解的简单对象到序列化程序理解的简单对象的转换。[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx) **[`IStateManager`](http://msdn.microsoft.com/en-us/library/system.web.ui.istatemanager.aspx)**

 **如果我没记错的话，序列化程序可以有效地序列化以下类型：

*   原始类型（`int`,`long`等）；
*   `DateTime`;
*   `string`;
*   支持的值类型的装箱值；
*   包含支持类型实例的对象数组；
*   [`Pair`](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.aspx)以及[`Triplet`](http://msdn.microsoft.com/en-us/library/system.web.ui.triplet.aspx)包含支持类型实例的对象。

我写了一篇简短的博文，说明了一个简单的自定义类被序列化`BinaryFormatter`与实现`IStateManager`和分解为序列化程序可以优化的简单类型所导致的大小差异。您可以在以下位置找到它：

[ASP.NET ViewState 提示和技巧 #2](http://exceptionalcode.wordpress.com/2012/03/08/asp-net-viewstate-tips-and-tricks-2/)**

# java - 使用 hashmap 或 H2 数据库？

> ID：12052076
> 
> 赞同：2
> 
> 时间：2012-08-21T09:38:15.733
> 
> 标签：java, jakarta-ee, h2

我正在开发一个 Web 应用程序，我需要在其中存储会话、用户消息等。我正在考虑使用 HashMap 或 H2 数据库。

请让我知道在性能和内存利用率方面哪种方法更好。该网站必须支持 10,000 个用户。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:41:14.550

与这些问题一样，当您知道这是一个问题时，我会担心性能。

10000 个用户在内存中存储的数据并不多。我可能会从一个标准的 Java 集合开始，并在您预测它会导致您悲伤时查看性能。

*抽象出*对这个 Java 集合的访问，这样当您替换它时，所需的重构是本地化的（并且可能使其可配置，以便您可以使用不同的解决方案（H2、Derby、Oracle 等）轻松地在性能测试之前/之后执行。 ETC。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:41:29.357

如果您的会话对象不是太大（应该是这种情况），则无需将它们保存在数据库中。

在您可以从几行代码开始的情况下，为此使用数据库会增加很多复杂性。所以不要使用数据库，只需将它们存储在一个轻量级的内存结构中（例如 HashMap）。

如果您不想在用户长时间离开时将会话保留在内存中，则可能需要实现一种方法来清理 HashMap。有许多解决方案可用（最简单的方法就是让后台线程不时删除太旧的会话）。请注意，清理哈希图通常比清理数据库更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:46:14.277

H2 和 Hash Map 都将数据保存在内存中（因此从空间的角度来看，它们几乎相同）。

如果查找像 KEY VALUE 这样简单，那么在 Hash Map 中查找会更快。

如果您必须进行 KEY < 100 等比较，请使用 H2。

事实上，10K 用户信息并不是一个很高的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:47:15.360

如果您不需要保存用户消息 - 使用集合。但如果要保存消息，请务必使用数据库。因为重启后你丢失了所有数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:48:53.720

使用 a`HashMap`来存储对象的问题在于，当您的站点对于一台服务器来说太大并且需要集群化以便随需求扩展时，您会遇到问题。然后，您将面临如何同步`HashMap`不同服务器上的实例的问题。

[一种可能的替代方法是使用像Redis](http://redis.io/)这样的键值存储，因为您不需要数据库的结构，甚至不需要像[EHCache这样的分布式缓存功能](http://ehcache.org/documentation/get-started/about-distributed-cache)

# iphone - RFID与IOS的集成

> ID：12052080
> 
> 赞同：0
> 
> 时间：2012-08-21T09:38:24.830
> 
> 标签：iphone, ios, xcode, ipad

我正在寻找有关 RFID 与 iOS 集成的参考资料或一些教程。

或我可以在 Xcode 上使用的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:54:34.110

目前任何 iOS 设备中都没有 RFIF 阅读器。您唯一的希望是某些第三方配件制造商有阅读器。

这意味着第三方配件制造商也必须提供 SDK，并且每个阅读器都将拥有自己的特定 SDK。

* * *

我找到了这个 RFID 阅读器：http: [//www.icarte.ca/info110.shtml](http://www.icarte.ca/info110.shtml)他们可能有自己的 SDK，我找不到。

# ios - iOS：后台/前台事件

> ID：12052084
> 
> 赞同：1
> 
> 时间：2012-08-21T09:38:43.157
> 
> 标签：ios, multitasking

我正在开发一个应用程序，在该应用程序中，当通过主页按钮将其推入后台时，应启动计时器，并且当应用程序返回前台并且计时器已经过一定时间时，应执行某些操作。

**我的问题是**

1.  当我的应用程序进入后台/前台时如何处理事件？
2.  有什么特殊的方法或其他技术吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:45:02.157

在应用程序的 appDelegate 中，您有一些可以实现的委托方法。

您可以查看 AppDelegate 应遵循的[UIApplicationDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)协议。

当应用程序被推送到后台时，函数 applicationDidEnterBackground: 将被调用。进入前台时调用applicationWillEnterForeground:。

最好不要使用计时器，而是在 applicationDidEnterBackground: 方法中存储一个 NSDate 引用。当您的应用程序进入前台时，您可以使用存储的 NSDate 计算 timeDifference

```
- (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate 
```

功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:02:27.717

一个可能的实现可能如下所示：

```
#define YOUR_TIME_INTERVAL 60*60*5   //i.e. 5 hours

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //... your oder code goes here

    NSNumber *timeAppClosed = [NSNumber numberWithDouble:[[NSDate date] timeIntervalSince1970]];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults timeAppClosed forKey:@"time.app.closed"];
    [defaults synchronize];
} 
```

和

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSNumber *timeAppClosed = [[NSUserDefaults standardUserDefaults] valueForKey:@"time.app.closed"];
    if(timeAppClosed == nil)
    {
        //No time was saved before so it is the first time the user
        //opens the app
    }
    else if([[NSDate date] timeIntervalSinceDate:[NSDate dateWithTimeIntervalSince1970:[timeAppClosed doubleValue]]] > YOUR_TIME_INTERVAL)
    {
        //Place your code here
    }
} 
```

# android - 为 Android 使用 libxml

> ID：12052089
> 
> 赞同：5
> 
> 时间：2012-08-21T09:38:59.330
> 
> 标签：android, android-ndk, libxml2

我们有一个适用于 Mac 和 Windows 平台的应用程序，现在针对 Android 和 iOS，应用程序使用 libxml 解析 XML 数据，我的问题是？

1 - 我是否需要为 Android 平台构建 libxml 或者它已经作为 NDK 的一部分存在？

如果需要建立任何指针如何开始？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T10:05:09.470

你有两个选择：

编写一个可以成功构建 libxml 的 Android.mk，并依赖于您的主 Android.mk 中的结果。您可以尝试在 Mac 上本地构建 libxml（使用配置脚本和 make），以了解需要构建哪些文件，以及是否需要传递任何特殊标志。

或者，使用 libxml 的配置脚本并使用 NDK 的工具链为 Android 构建 libxml。你必须做这样的事情：

```
NDK_ROOT=/path/to/ndk
API_LEVEL=YOUR_API_LEVEL
SYSROOT=$NDK_ROOT/platforms/android-$API_LEVEL/arch-arm

export CC="$NDK_ROOT/toolchains/arm-linux-androideabi-4.4.3/Darwin-x86/bin/arm-linux-androideabi-gcc"
export CFLAGS="--sysroot=$SYSROOT"
export LDFLAGS="--sysroot=$SYSROOT"

./configure --host=arm-linux-gnueabi --enable-static --disable-shared
make libxml2.la 
```

从技术上讲，Android 的主机三元组是`arm-linux-androideabi`，但大多数配置脚本都无法识别它，而且对于我们这里的目的来说，`-gnueabi`它已经足够接近了。

我最终提出了建议`make libxml2.la`，而不仅仅是`make`因为测试没有正确构建。生成的库将最终出现在`.libs/`文件夹中。

第二种方法可能更简单一些，但如果您打算为多种架构（arm、armv7-a，甚至可能是 x86 和 mips）构建应用程序，从长远来看，编写自己的 Android.mk 将节省您的时间。

# android - Android NullPointerException 在同步方法中被抛出

> ID：12052090
> 
> 赞同：0
> 
> 时间：2012-08-21T09:39:03.537
> 
> 标签：android, sockets, nullpointerexception, synchronized, uncaught-exception

我有一个用java编写的android应用程序。

该应用程序基本上连接到发送应用程序消息的设备。在处理每条消息之前，应用程序会等待消息进入并报告它们。

我有一个**Connection**类和一个**Listener**类。

**Connection**类通过构造函数启动，该构造函数设置**Listener**类以侦听来自设备的消息。

当消息进入时，Listener 将消息发送到 Connection 类中的方法**reportMessage()**。这是处理消息的地方。

**Listener**类在一个单独的线程上。

代码如下所示。

```
public class Connection 
{
    private String response;
    private String newResponse;

    private DataInputStream reader;

    private DataOutputStream writer; 

    private Socket socket;

    private boolean keepListening;

    private Listener listener;

    public Connection (String _ipAddress, int portNumber)
    {
        try 
        {
            socket = new Socket(_ipAddress, _port);   //Connect to the server and its socket

            writer = new DataOutputStream(socket.getOutputStream()); //Connect to the server to receive and send messages

            reader = new DataInputStream(socket.getInputStream());

            listener = new Listener(reader, this); //Create a new listener for the client

            new Thread(listener).start(); //Set the listener off running
        } 
        catch (Exception e) 
        {
            ...
        } 
    }

    public synchronized void reportMessage(String message)
    {
        try
        {
            if("".equals(newResponse))
            {
                newResponse = new String();
            }

            newResponse = newResponse + message;

            System.out.println("Message Received: " + newResponse);

            processMessage(); //Process the message
        }
        catch (Exception e)
        {
            response = e.getCause().toString();
        }
    }
}

public class Listener implements Runnable 
{
    private DataInputStream reader = null;

    private boolean keepListening;

    private String serverMessage;

    private Connection connection;

    public Listener (DataInputStream inFromServer, Connection connection)
    {
        reader = inFromServer;
                               //Get the client connection's message transfer
        keepListening = true;

        this.connection = connection;
    }

    public void run()
    {
        while (keepListening)
        {
            try
            {
                if (reader.available() > 0)
                {
                    byte[] readInData = new byte[reader.available()];  //Initialise the array

                    reader.read (readInData);  //Read in the data

                    serverMessage = Utils.byteToString(readInData);

                    connection.reportMessage(serverMessage);   //Report the message
                }
            }
            catch (IOException e)
            {
                System.out.println("Error reading." + e.getLocalizedMessage().toString());

                keepListening = false;
            }

            keepListening = connection.getKeepListening();
        }
    }
} 
```

这在一段时间内效果很好，然后有时我会收到一个导致程序崩溃的错误。

在调试模式下运行时，我会在**Connection**类中**reportMessage()**的第一行抛出**NullPointerException 。**

 ****无论是**System.out.println**还是一行实际代码，程序都挂起在第一行的任何一行。

并且错误不会被try and catch捕获。它使程序崩溃并且没有处理错误，即使它发生在 try 和 catch 中。

**这使我相信reportMessage()**方法中的任何内容都不会引发错误。如果是这种情况，那么可能是在 Listener 类**.run()**中引发了错误。

但是，我看不到可以从哪里抛出任何**NullPointerException**，因为我试图进行所有检查，并且当它被抛出时，它会在发送消息时被抛出。

调试器说“异常堆栈跟踪不可用”。

LogCat 说：

```
 08-21 10:35:57.894: E/AndroidRuntime(1118): FATAL EXCEPTION: Thread-12
  08-21 10:35:57.894: E/AndroidRuntime(1118): java.lang.NullPointerException
  08-21 10:35:57.894: E/AndroidRuntime(1118):atCom.que.wifiaudio.Connection.reportMessage(Connection.java:339)
  08-21 10:35:57.894: E/AndroidRuntime(1118):   at com.que.wifiaudio.Listener.reportIncomingMessage(Listener.java:93)
  08-21 10:35:57.894: E/AndroidRuntime(1118):   at com.que.wifiaudio.Listener.run(Listener.java:67)

  08-21 10:35:57.894: E/AndroidRuntime(1118):   at java.lang.Thread.run(Thread.java:1102) 
```

谁能帮我？

我需要知道什么是抛出 NullPointerException 以及如何阻止它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:52:15.883

原来是

```
catch (Exception e)
{
    response = e.getCause().toString();
} 
```

**processData()**方法抛出了一个被捕获的异常，但异常的原因是 Null，它抛出了错误。****

# c# - 如何设计页面并在 Epson TM-T88V POS 打印机上的热敏打印机上打印

> ID：12052092
> 
> 赞同：0
> 
> 时间：2012-08-21T09:39:15.707
> 
> 标签：c#, html, barcode

我正在创建 Web 应用程序，完成付款后，我需要使用 ASP.Net 从 c# 中的 Epson TM-T88V POS 打印机获取收据。在纸上显示相关信息后，我还需要显示条形码。

是否可以设计页面并打印它。

在此先感谢 Vara Prasad.M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:47:26.363

当然这可以做到，但是我怀疑您希望它是无缝的，如果没有 Silverlight、Java 或其他嵌入式解决方案，这是无法做到的。

但是，您可以做的是使用 HTML/CSS 和条形码图像生成器创建一个包含收据的页面，然后您可以通过浏览器简单地在热敏打印机上打印。

您可能会发现的唯一一件事是您的浏览器通常会在您的页面上添加页眉/页脚，这些会出现在您的收据上。

更好的解决方案是使用 Silverlight 或 Java 来处理此问题，因为它可以与打印机直接通信，而不必依赖浏览器。

链接到可能的条形码生成器。 [http://www.codeproject.com/Articles/20823/Barcode-Image-Generation-Library](http://www.codeproject.com/Articles/20823/Barcode-Image-Generation-Library)

# python - 使用带有 Redis 后端的多个 Celery 安装

> ID：12052094
> 
> 赞同：13
> 
> 时间：2012-08-21T09:39:29.340
> 
> 标签：python, redis, celery

是否可以对使用 celery 的多个项目使用相同的 redis 数据库？就像使用一个键前缀为多个项目使用同一个数据库作为缓存一样。还是我必须为每次安装使用单独的数据库？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T08:12:43.237

总结这篇有用的博客文章： http: [//kfalck.net/2013/02/21/run-multiple-celeries-on-a-single-redis](http://kfalck.net/2013/02/21/run-multiple-celeries-on-a-single-redis)

*   为每个项目指定不同的数据库编号，例如 redis://localhost/0 和 redis://localhost/1
*   为不同的项目定义和使用不同的队列名称。在任务端，定义 CELERY_DEFAULT_QUEUE，并在启动你的 worker 时，使用 -Q 参数指定该队列。在此处阅读有关路由的更多信息：http: [//docs.celeryproject.org/en/latest/userguide/routing.html](http://docs.celeryproject.org/en/latest/userguide/routing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:50:29.740

我为 celery 使用了 redis 后端，同时还使用了带有前缀缓存数据的相同 redis db。我在开发过程中这样做了，我只将 redis 用于结果后端而不是对任务进行排队，并且生产部署最终都是 AMQP（redis 仅用于缓存）。我没有任何问题，也不明白为什么会这样（除了性能问题）。

对于运行具有不同任务定义的多个 celery 项目，我认为问题在于如果您有两种不同类型的工人，每种工人只能处理工作类型的子集。如果没有单独的数据库，我不确定工人们将如何判断他们可以处理哪些工作。

我可能希望确保所有工作人员都定义了所有任务类型并且可以处理任何事情，或者希望将单独的项目保存在单独的数据库中。这不需要安装任何额外的东西，您只需在您的芹菜项目之一中指定 REDIS_DB=1 。可能有另一种方法可以做到这一点。我不确定是否需要多个数据库，但这有点道理。

如果您仅将 redis 用于结果后端，也许这适用于在一个 redis db 上拥有多个 celery 项目......我不太确定。

# android - RingtonePreference 不保存其值

> ID：12052096
> 
> 赞同：3
> 
> 时间：2012-08-21T09:39:36.607
> 
> 标签：android, preference

我已经使用了一些首选项，例如`EditTextPreference`，等等，它们都可以工作，但是现在我需要使用`RingtonePreference`，它不能正常工作。这是非常简单的代码：

```
 <RingtonePreference
     android:key="my_ringtone_key"
     android:title="Select ringtone"
     /> 
```

当我单击此首选项时，id**会**打开对话框以选择铃声，但**不会保存它**。我的意思是，我选择了铃声，按“确定”，然后再次单击此首选项，仍然没有选择铃声。

如果我尝试从代码中获取价值，例如：

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        String tmp = prefs.getString("my_ringtone_key", "none"); 
```

然后`tmp`具有默认值“none”，这意味着该值完全不存储在`SharedPreferences`.

**但是**：如果我更改`RingtonePreference`为`EditTextPreference`，即以下内容：

```
 <EditTextPreference
     android:key="my_ringtone_key"
     android:title="Select ringtone"
     /> 
```

然后一切正常：我可以编辑值，存储值，当然我可以从代码中获取它。

我使用 API 级别 7。我在模拟器和两个设备（SE Xperia Neo 和一些 Acer）上进行了测试。

那么，怎么`RingtonePreference`上班呢？如果`RingtonePreference`对您有用，请添加评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T00:24:48.010

尝试从清单中受影响的条目中删除`noHistory="true"`、`android:launchMode="singleInstance"`和/或。`android:excludeFromRecents="true"``<activity>`

该`launchMode`条目为我解决了问题；我发现这些解决方案最近在[此处](https://stackoverflow.com/q/7587668/1992342)作为答案发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T16:26:07.040

我遇到过同样的问题。**我的错误是在没有调用super.onActivityResult**的情况下覆盖了 PreferenceFragment 的 onActivityResult 方法，这是保存所选铃声的地方。

见[https://stackoverflow.com/a/10020414/213817](https://stackoverflow.com/a/10020414/213817)

# ruby-on-rails - Vagrant 中的“找不到 RubyGem 傀儡”

> ID：12052106
> 
> 赞同：4
> 
> 时间：2012-08-21T09:40:06.370
> 
> 标签：ruby-on-rails, rubygems, puppet, vagrant

我可以手动运行`bundle install`并恢复正常，但是当我让 Puppet 提供一个 Vagrant 框时，这会发生第二次（第一次我得到成功的输出）。

```
[default] Running provisioner: Vagrant::Provisioners::Puppet...
[default] Running Puppet with /tmp/vagrant-puppet/manifests/default.pp...
stdin: is not a tty
/opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems.rb:900:in `report_activate_error': Could not find RubyGem puppet (>= 0) (Gem::LoadError)
    from /opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems.rb:248:in `activate'
    from /opt/vagrant_ruby/lib/ruby/site_ruby/1.8/rubygems.rb:1276:in `gem'
    from /opt/vagrant_ruby/bin/puppet:18
The following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed! 
```

我没有在任何地方请求 puppet gem，它不在我的 Gemfile 中，我的清单也不需要它。为什么要寻找 puppet gem，我该如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T21:19:31.913

我正在使用[https://github.com/blt04/puppet-rvm](https://github.com/blt04/puppet-rvm)为我的 Vagrant 盒子配置 RVM，我遇到了同样的问题。取消设置“default_use => true”确实可以解决它。不幸的是，一旦您 ssh 进入该框，您就必须手动选择您的目标 Ruby。

或者，您可以将 puppet gem 显式添加到清单中的默认 Ruby（不添加到任何 gemset，仅添加到 Ruby 本身）。它仍然一直困扰着我关于 hiera (??) 丢失的一些配置文件，但它似乎仍然有效。

我想知道 Vagrant 上的 RVM 是否值得麻烦。创建 Vagrant 盒子的全部意义在于为单个项目提供一个独立的环境，那么为什么我需要多个 Rubies/Gemsets 呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:00:04.587

Puppet 由您的虚拟机在您的虚拟机上运行。确保仍然为用户 vagrant 和 root 安装 gem。它也可能是您的默认 ruby​​ 版本的开关（系统与通过 rvm 或 rbenv 安装？）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T18:50:25.617

Puppet 预计将由 vagrant 使用系统 ruby​​ 运行，但 RVM 可能默认为您选择的已安装 ruby​​。为了解决这个问题，我做了这个（一个非常丑陋的黑客），同时在正常登录时仍然有一个默认的 ruby​​：

在您的流浪文件中：

```
 # setup working dir only to exploit in below
  working_dir = '/home/vagrant/puppet'
  config.vm.provision :shell, :inline => "mkdir -p #{working_dir}"

  config.vm.provision "puppet" do |puppet|
    # [ ... Your config ... ] 

    # before puppet is run, vagrand `cd`s into the working directory, failing to escape it. 
    puppet.working_directory = "#{working_dir}; rvm use system || true"
  end 
```

由于 vagrant puppet 提供程序（[https://github.com/mitchellh/vagrant/blob/master/plugins/provisioners/puppet/provisioner/puppet.rb#L154](https://github.com/mitchellh/vagrant/blob/master/plugins/provisioners/puppet/provisioner/puppet.rb#L154)）中的一个转义错误/功能，这会导致 vagrant

1.  从加载并配置默认值的 rvm 开始
2.  切换到给定目录
3.  切换到系统ruby，重新找到gem
4.  像第一次运行一样运行 puppet，没有任何 RVM-rubies 干扰它。

# api - 需要使用 google api php 客户端库获取 panoramio 用户信息

> ID：12052107
> 
> 赞同：0
> 
> 时间：2012-08-21T09:40:06.613
> 
> 标签：api, oauth, oauth-2.0, panoramio

我需要使用 google api php 客户端库获取 panoramio 用户信息。有人可以指导我如何使用 google api php 客户端库吗？还有一件事要确认
panoramio 用户 ID（不是用户名或电子邮件 ID）与谷歌用户 ID 相同吗？由于我使用 google php api 登录到我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:34:45.740

Panoramio 尚未与所有其他 Google API 集成，因此您无法使用*google-api-php-client 库*访问它。但是，它们有 2 个您可以使用的公共 API（即无需进行身份验证）：

*   [Widget API](http://www.panoramio.com/api/widget/api.html#toc)，例如使用 JS 包含照片
*   用于以 JSON 格式查询图像元数据的旧 REST[数据 API](http://www.panoramio.com/api/data/api.html)

请注意，两者都限制为每天 100000 次查询。

Panoramio 和 Google 用户 ID**不**相关。

# java - 正则表达式从包名称中提取语言和国家

> ID：12052113
> 
> 赞同：1
> 
> 时间：2012-08-21T09:40:14.770
> 
> 标签：java, regex

我使用 Java 7。

我想从代表捆绑文件名或属性文件名的字符串中提取语言和国家/地区。文件名不包含扩展名。

例如

*   bundle --> 空字符串或 null
*   bundle_en --> zh
*   bundle_en_US --> en_US
*   complex_bundle_name_en_US --> en_US

我试过这个，但它没有给我预期的结果。

```
private static void testPattern(String bundleName) {
        final Pattern pattern = Pattern.compile(".+(_[a-z]{2,3}(_[A-Z]{2,3}){0,1}){0,1}");
        final Matcher matcher = pattern.matcher(bundleName);
        if (matcher.matches()) {
            for (int i = 0; i < matcher.groupCount(); ++i) {
                System.out.println("Group " + i  + " = " + matcher.group(i));
            }
        } else {
            System.out.println("Nothing");
        }
    } 
```

对于“bundle_en_US”，它的节目：

> 组 0 = bundle_fr_US 组 1 = null

你能帮我纠正我的正则表达式，还是这个正则表达式已经存在于 java 核心中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:04:11.963

问题是imo`.+`在一开始就已经匹配了整个序列。改用不情愿的量词：

```
.+?(_[a-z]{2,3}(_[A-Z]{2,3}){0,1}){0,1} 
```

编辑：我认为最好的解决方案：

```
.+?(?:_([a-z]{2,3})(?:_([A-Z]{2,3}))?)? 
```

使用非捕获组，这仅捕获语言和国家代码并抛出“_”。此外，你应该改变你的`for`条件，`i <= matcher.groupCount()`否则你会错过最后一组。使用最新版本和更改后的条件：

输入：`bundle`
输出：

```
Group 0 = bundle
Group 1 = null
Group 2 = null 
```

输入：`bundle_en`
输出：

```
Group 0 = bundle_en
Group 1 = en
Group 2 = null 
```

输入：`bundle_en_US`
输出：

```
Group 0 = bundle_en_US
Group 1 = en
Group 2 = US 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:45:46.150

这对你有用吗？

```
 final Pattern pattern = Pattern.compile(".+_([a-z]{2,3}(_[A-Z]{2,3})?)?"); 
```

# oracle - Oracle BI Publisher 10g 中的搜索参数

> ID：12052114
> 
> 赞同：0
> 
> 时间：2012-08-21T09:40:21.400
> 
> 标签：oracle, bi-publisher

当查询不包含绑定变量（参数标识符）但在搜索列表查询的约束中引入绑定变量时，Oracle BI Publisher (10g) 中搜索参数的搜索列表（值列表）工作正常，它继续无休止地寻找。

在菜单参数的值列表中使用绑定变量可以正常工作。

这是关于 BI Publisher 的问题，还是我应该怎么做才能通过收听另一个参数来刷新搜索列表？

编辑：搜索参数的 LOV 代码

```
select col1|| ' - ' || col2 as item
  from table --search works on applying no filter

select col1|| ' - ' || col2 as item
  from table
 where col3 = substr(:I_col3_param, 0, instr(:I_col3_param,'-')-2)) -- search doesn't work on applying this filter 
```

第一个查询显然会返回更多的数据，但它的搜索时间比第二个查询要短。所以，问题不应该是由于大量的数据。

# android - 输入并发送到多个联系人android应用程序

> ID：12052115
> 
> 赞同：0
> 
> 时间：2012-08-21T09:40:24.810
> 
> 标签：android, sms, contacts

我有一个向单个联系人发送消息的模块。我希望它最多覆盖 5 个联系人。一直在搜索，但我没有找到任何对我的应用有用的东西。

这是发送消息的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/enterRecipient"
        android:padding="10dp"
        />   

    <EditText 
        android:id="@+id/txtPhoneNo"  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:inputType="textNoSuggestions"       
        />
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:text="@string/msg"
        android:padding="10dp"
        />     
    <EditText 
        android:id="@+id/txtMessage"  
        android:layout_width="fill_parent" 
        android:layout_height="150dp"
        android:inputType="textNoSuggestions"
        android:hint="@string/entermsg"
        android:gravity="top"         
        />          
    <Button 
        android:id="@+id/btnSendSMS"  
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@string/send"
        />    
</LinearLayout> 
```

这是响应发送点击的java代码：

```
public class PanicButton extends Activity {

Button btnSendSMS;
EditText txtPhoneNo;
EditText txtMessage;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_panicbutton);          

    btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
    txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
    txtMessage = (EditText) findViewById(R.id.txtMessage);

    btnSendSMS.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {                
            String phoneNo = txtPhoneNo.getText().toString();
            String message = txtMessage.getText().toString();                 
            if (phoneNo.length()>0 && message.length()>0)                
                sendSMS(phoneNo, message);                
            else
                Toast.makeText(getBaseContext(),"Please enter both phone number and message.",Toast.LENGTH_SHORT).show();
        }
    });        
}

private void sendSMS(String phoneNumber, String message)
{        
    PendingIntent pi = PendingIntent.getActivity(this, 0,
        new Intent(this, PanicButton.class), 0);                
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, pi, null);        
} 
```

有任何想法吗？如果用户想在他的手机联系人上搜索号码或手动输入，我也想有一个选择。有任何想法吗？？

# visual-studio-2010 - 能否在 Visual Studio 中启用 C# 的纠错功能？

> ID：12052116
> 
> 赞同：1
> 
> 时间：2012-08-21T09:40:33.600
> 
> 标签：visual-studio-2010, error-correction

Visual Studio 2010 包含针对 VB 程序员的[错误更正](http://msdn.microsoft.com/en-us/magazine/dd942823.aspx)，例如，它将允许您导入命名空间或生成存根类/方法，从而导致编译器错误。

例如，如果您键入：

`Dim mm As MailMessage`如果没有`Imports System.Net.Mail`，您将获得一个方便的小工具提示，只需单击一下即可导入命名空间。

我最近切换到 C# 开发，我真的很想念这个小工具 - 如果你不确定命名空间，你必须去谷歌查找，然后`using`手动添加。

有没有办法像编写 VB 时那样启用纠错功能？

我已经完成了通常的谷歌搜索，似乎没有提到 C# - 只是 VB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:44:34.113

我每天在 VS2010 中使用 C#，它完成了你提到的所有事情。例如，通常当您将代码粘贴到没有相关 using 语句的类中时，VS 会询问您是否要为粘贴的代码添加 usings。值得检查您的设置以确保您启用了此类功能，例如“自动列出成员”等。其中还有其他有用的设置。熟悉您的选择是值得的。

我会为 C# 开发推荐的一件事是 Resharper 7。它是一个很棒的工具，可以大大加快编码速度。它还将提出改进代码、执行标准等方面的建议。您还可以对其进行配置以执行贵公司使用的编码标准。我相信你可以得到一个试用版。我会得到它来试用它，然后如果需要，向贵公司提出购买请求或自己购买。这很值得。

[锐器 7](http://www.jetbrains.com/resharper/)

PS 作为旁注，如果您不知道，您可以按 ctrl+空格键来打开您的智能感知选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:43:55.193

C# 编辑器有这个。只需单击类名，您就会看到一个彩色的下划线。单击它，您将获得有关如何解析类（或接口或其他）的建议。

或者将代码编辑器光标放在类名上，然后按 ALT + SHIFT + F10 会弹出相同的建议。

# database - 将数据库对象从一个数据库传输到另一个数据库——Django / Postgres

> ID：12052121
> 
> 赞同：0
> 
> 时间：2012-08-21T09:40:44.843
> 
> 标签：database, django, merge

我的 Django 应用程序有一个开发站点和一个实时站点。许多前端副本和其他对象详细信息存储在数据库中。相反，很多客户端数据也存储在数据库中。让开发站点准备好然后将新副本和对象复制到实时服务器的最有效方法是什么？

我想最简单的方法是将可更改的开发站点数据与实时站点保持同步，然后更新开发站点，然后将数据转储到实时站点。但是，如果/当有人在这种情况发生时更新实时站点会发生什么？他们的更新将被覆盖。

是否有 Django 应用程序允许我“检查”管理列表视图中的条目，按“复制”然后以某种方式将它们粘贴到新站点中？

或者人们在这种常见场景中使用的其他模式是什么？

这有点像使用 GIT——拥有一个主分支，然后为每个实时站点迭代创建一个分支，然后在实时站点上创建修补程序，同时仍在开发站点上工作——修补程序可以合并到开发站点中。我们如何合并数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:32:47.920

> 是否有 Django 应用程序允许我“检查”管理列表视图中的条目，按“复制”然后以某种方式将它们粘贴到新站点中？

不是我知道的。但我认为您可以通过合理的努力编写这样的应用程序。我建议如下：

*   对更改列表视图使用管理员操作。这样您就可以将多个对象从您的开发系统*发布*或*传输*到您的实时系统。[有关详细信息，请参阅文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/actions/)。
*   将另一个按钮添加到单个对象的*更改视图。*也许“发布到实时站点”。
*   *向更改视图*添加另一个按钮，该按钮可在一个步骤中保存和发布，例如“保存并发布到实时站点”。

要将按钮添加到更改表单，我将覆盖相应的模板：

[http://code.djangoproject.com/svn/django/trunk/django/contrib/admin/templates/admin/change_form.html](http://code.djangoproject.com/svn/django/trunk/django/contrib/admin/templates/admin/change_form.html)

像这样覆盖块“submit_buttons_bottom”

```
{% block submit_buttons_bottom %}
  {{ block.super }}
  <!-- your buttons here -->
{% endblock %} 
```

最好只编写一个函数来完成将对象从开发系统传输到实时系统的工作。在所有三个用例中都使用此功能。

**但是有一个问题！**

*将一个对象从一个 Django 实例复制*到另一个对象可能相当困难。尤其如此，如果这些对象与其他对象有关系，那么这些对象又可能与另一个对象有关系。保持参照完整性应该是一场噩梦。也许有人对此有一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:33:52.890

我不确定我是否正确理解，如果我错了，请告诉我：所以基本上，您想在生产和开发实例中对（相同的）数据进行更改？

恕我直言，由于许多原因，它通常不是一个好的解决方案，其中一个是这种脆弱的需要合并你提到的。对我来说，解决这个问题的最佳方法实际上是使两个环境尽可能分离（数据方面）。

恕我直言，不惜一切代价避免的部分是最终的开发->生产合并。我可以更好地理解需要向另一个方向转移（从产品到开发）。我可以在这里看到两种常见的情况：

*   您想要在 dev.xml 中使用相同的数据。尝试重现与数据相关的错误。在这种情况下，为什么不简单地转储生产数据库并将其加载到开发中。机器 ？恕我直言，这个开发者。数据库应该一直被认为是“可擦除的”。
*   您在生产站点上有一些“初始”数据，这些数据足够通用，在开发中也需要（类似于“性别”表中的男性/女性条目）。在这种情况下，您可以想象使用[Fixtures](https://docs.djangoproject.com/en/dev/howto/initial-data/)。

在考虑您的数据流和环境时，您可能还应该看看[South](http://south.aeracode.org/)，数据迁移是一个**非常**有用的工具。

希望这可以帮助 ！

# jsp - 自定义标签创建自定义标签

> ID：12052122
> 
> 赞同：0
> 
> 时间：2012-08-21T09:40:53.350
> 
> 标签：jsp, taglib, custom-tag

我正在尝试创建一个使用其他自定义标签的自定义标签。

我的方法是这样的：

```
public int doAfterBody() throws JspTagException {
    BodyContent bc = getBodyContent();
    if (bc!=null) {
        String body = bc.getString().toUpperCase();
        try {
            bc.clearBody();
            bc.getEnclosingWriter().write("<some-other-custom-tag>");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return SKIP_BODY;
} 
```

这似乎不起作用，因为我使用 BodyContent 编写的任何内容都不再被处理，因此 JSP 的输出仍然包含`<some-other-custom-tag>`. 有没有办法在输出最终进入浏览器之前对其进行处理？

编辑：我可能没有很好地表达我的问题。（我认为）我知道编译的工作原理以及请求如何变成文档。

据我了解，编译器检查我的 JSP 并找到`<custom-tag>`. 它查看引用的 TLD 并找到与标记关联的 Java 类。它调用类，设置参数和东西，然后执行类似的方法`doAfterBody()`（取决于类扩展的标记处理程序的类型）。从那里我写到`<some-other-custom-tag>`JSP 的输出。我知道这不起作用，因为编译器不会再次查看它，因此没有意识到还有另一个自定义标签要处理。

我正在寻找一种方法来（1）让编译器再次处理（部分）输出，或者（2）让编译器处理包含的 String 对象，`<some-other-custom-tag>`以便我可以将其写入输出。

当然，我也愿意接受任何替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:52:13.440

自定义标签的文本输出应该是浏览器能够理解的文本（HTML、JavaScript、CSS 等）。

该内容永远不会再次解析，因为它没有太多意义：当服务器知道它应该停止解析该输出内容并将其发送到浏览器时？这样做的开销是多少？

What you can do is: whatever is done by that `<some-other-custom-tag>` is Java code anyway since JSP Tags are Java classes. I would refactor the tag classes to extend a common abstract one and then put that shared functionally in the latter so your both custom tags can access it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:36:43.037

您错误地使用了自己的自定义标签。您只需要在 JSP 页面上声明它。

您使用该方法输出的所有内容都将由浏览器`jspWriter.write()`处理，将由浏览器处理。JSP 自定义标签由 JSP 编译器解析并转换为服务器端的可执行 servlet。它应该在创建并将最终数据发送给用户之前完成。

查看这些文章以更准确地了解问题：

[JSP页面的生命周期](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPIntro4.html#62582)

[JSP 页面中的自定义标签](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags.html)

# android - 如何避免将重复的插入 SQLite 数据库？

> ID：12052124
> 
> 赞同：3
> 
> 时间：2012-08-21T09:41:04.183
> 
> 标签：android, sqlite

当我通过帐户登录时，我正在从服务器获取联系信息。我将这些信息存储在 SQLite 中，当用户第二次登录时，我不想将相同的重复联系人再次插入 SQLite。

我试过这样但不工作

```
boolean exist= contact_db.CheckItem(entry.getUser());               
if(!exist) {
 // insert
}else {
 // don't insert
} 
```

DB类中的代码

```
Cursor mCursor = database.query(ContactsDB.TABLE_CONTACTS, allColumns,
                    ContactsDB.CONTACT_USERID + "= ' " + name +"'" , null, null, null, null);
    if (mCursor != null && mCursor.moveToFirst()) 
        return false;
    else return true; 
```

将联系人插入数据库时​​如何避免重复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T09:47:46.587

更好的是使用关键字`UNIQUE`为该列创建索引。[`UNIQUE`](http://www.sqlite.org/lang_createtable.html)可以找到一个示例[`here`](https://stackoverflow.com/a/9573596/726863)，也可以找到一个更简单的示例[`here`](http://www.w3schools.com/sql/sql_unique.asp)。

创建表后，您必须为行创建一个`UNIQUE INDEX`，

```
CREATE UNIQUE INDEX idx_something ON Table_name 
                                          (column_name_1, column_name_2,....); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:43:43.813

检查数据库以获取信息。如果数据库中存在数据，如果不将信息插入数据库，则不执行任何操作

# django - 修改数据库中的表

> ID：12052130
> 
> 赞同：0
> 
> 时间：2012-08-21T09:41:15.657
> 
> 标签：django, django-models

我有这个模型

```
class Category(models.Model):
category_name= models.CharField(max_length=255)
sub_category_ID = models.IntegerField(null=True, blank=True)
def __unicode__(self):
    return self.category_name 
```

我已经在表中有数据，但我想在`sub_category_ID`不删除整个数据库的情况下将其更改为。

```
class Category(models.Model):
category_name= models.CharField(max_length=255)
sub_category_ID = models.ForeignKey('self',null=True, blank=True)
def __unicode__(self):
    return self.category_name 
```

所以我在更改模型后运行了syncdb，它给了我警告。

```
The following content types are stale and need to be deleted:
uTriga | event_event_category
Any objects related to these content types by a foreign key will also
be deleted. Are you sure you want to delete these content types?
If you're unsure, answer 'no'.` 
```

我输入了是，现在出现错误

`column app_category.sub_category_ID_id does not exist`

列 uTriga_category.sub_category_ID_id 不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:50:03.783

默认情况下，Django syncdb 机制不允许模型更改。必须删除并重新创建整个数据库。只能在两次 syncb 运行之间添加新模型。

因此，您可能希望使用一些“迁移”工具来允许数据库模式的渐进演进。使用一个恕我直言，这几乎总是一个非常好的主意。

[South](http://south.aeracode.org/)是 Django 最有名的地方，到目前为止，我对它非常满意。

# jquery - jquery移动点击事件绑定两次

> ID：12052132
> 
> 赞同：6
> 
> 时间：2012-08-21T09:41:19.183
> 
> 标签：jquery, jquery-mobile

我有两个 html 页面`index.html`，`groups.html`每个页面为**ul > li > 一个**具有不同类名的列表。

我已将点击事件放在单独的 js 文件中，如下所示：

```
// Index Page Onclick events

  $('body').on('click','.menuClass',function(e) {
    e.preventDefault();
    var menuid = $(this).attr('id');
    alert(menuid);        
  });

// click on groups html  >>  this page alert fires twice

$('body').on('click','.grpClass',function(e) {
    e.preventDefault();
    var menuid = $(this).attr('id');
    alert(menuid);

}); 
```

脚本文件在两个 html 文件中加载，groups.html 的第二个函数会触发 click 事件两次。

有什么方法可以避免它或有更好的方法来实现它吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T09:47:56.873

使用`stopImmediatePropagation()`，它将阻止事件在页面的 DOM 中冒泡：

```
// Index Page Onclick events

  $('body').on('click','.menuClass',function(e) {
    e.preventDefault();
    var menuid = $(this).attr('id');
    alert(menuid);        
  });

// click on groups html  >>  this page alert fires twice

$('body').on('click','.grpClass',function(e) {
    e.preventDefault();
    e.stopImmediatePropagation();
    var menuid = $(this).attr('id');
    alert(menuid);

}); 
```

这是一个如何工作的示例：**[JSFIDDLE](http://jsfiddle.net/3yTQw/)**。如果单击`test1`，将阻止冒泡并仅显示一个警报。如果单击`test2`，则事件不会停止，您将收到两个警报。

# makefile - Makefile：英特尔 fortran、文件夹中的源文件和英特尔数学核心函数库

> ID：12052133
> 
> 赞同：3
> 
> 时间：2012-08-21T09:41:20.013
> 
> 标签：makefile, fortran, intel-fortran

我在文件夹 /ex 中有一个 main.f90。f77 子程序文件在 /ex/src 中。并且子程序文件再次使用 BLAS 和 LAPACK 库。对于 BLAS 和 LAPACK，我必须使用 Intel Math Kernel Library。

Intel fortran 和 mkl 文件夹如下所示：

```
/opt/intel$
ActivationTool  composer_xe_2011_sp1         intel_sdp_products.db  man
bin             composer_xe_2011_sp1.11.339  lib                    mkl
composerxe      include                      licenses

/opt/intel/mkl$
benchmarks  bin  examples  include  interfaces  lib  tests  tools

/opt/intel/mkl/lib/ia32$
libmkl_avx.so             libmkl_gnu_thread.so     libmkl_scalapack_core.so
libmkl_blacs.a            libmkl_intel.a           libmkl_sequential.a
libmkl_blacs_intelmpi.a   libmkl_intel.so          libmkl_sequential.so
libmkl_blacs_intelmpi.so  libmkl_intel_thread.a    libmkl_solver.a
... (a bunch of files) ... 
```

/ex 中要编译的 main.f90 的 makefile 代码是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:08:08.863

我猜您使用的是版本 12（从`composer_xe_2011_sp1.11.339`/opt/intel 中猜测），因此您可以`-mkl`在像这样链接时简单地使用选项：

```
ifort main.o sub1.o sub2.o -o a.out -mkl 
```

（参见： http: [//software.intel.com/en-us/articles/using-mkl-in-intel-compiler-mkl-qmkl-options](http://software.intel.com/en-us/articles/using-mkl-in-intel-compiler-mkl-qmkl-options)）

# mysql - 从一行中的列中获取多个数据

> ID：12052135
> 
> 赞同：0
> 
> 时间：2012-08-21T09:41:20.727
> 
> 标签：mysql

在导师栏中，导师可以重复，但项目编号是唯一的。我需要找到所有的导师和他们拥有的所有项目编号。

例如我有：

```
column tutor                column projects
Steve                         1
Theo                          2
John                          3
Steve                         4 
```

我需要的结果是：

```
Steve 1, 4
Theo 2
John 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:44:32.453

```
SELECT tutor, GROUP_CONCAT(projects SEPARATOR ',') AS projects_list
FROM your_table
GROUP BY tutor 
```

文档：[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

# .net - 如何：实体框架和多个模式

> ID：12052136
> 
> 赞同：5
> 
> 时间：2012-08-21T09:41:21.167
> 
> 标签：.net, entity-framework, multiple-schema

我正在使用实体框架。我正在使用具有多个模式的单个数据库，如 mySchema1.Employee
mySchema2.Employee
mySchema3.Employee

当我为此数据库生成 edmx 时，它将表重命名为 Employee1、Employee2、Employee3 等。

如何使用单个 edmx 实现多个模式实现。

**编辑：** 这里的对象应该与 Employee 同名。只有可变部分是模式。ctx.Employee - 应该从特定模式中获取数据。我正在寻找可以指定使用哪个的东西。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:49:47.700

我不确定我是否理解这个问题......你想[每个模型有多个图表](http://msdn.microsoft.com/en-us/data/jj519700.aspx)吗？

此功能是在最近发布的 Entity Framework 5 中添加的。确保您使用的是最新版本。

# php - 使用 Ajax 调用 PHP 函数

> ID：12052138
> 
> 赞同：1
> 
> 时间：2012-08-21T09:41:30.937
> 
> 标签：php, ajax

我有一个 PHP 页面，其中包含以下内容：

```
<?php

class CallsClass {

    var $conn1;
    var $dataTable = "";

    function calls() {    
        $this->conn1 = new Datasource("taylor", "dbproj", "root", "elves") or die("Could not connect");

        $s1 = "SELECT id, UPPER(SUBSTRING_INDEX(fullname,' ',1)) as fullname, oldcode FROM `researcher` WHERE `display` = '1' AND fullname <> 'Jenny Porteous' AND fullname <> 'Carey-Lee Lendrum' AND fullname <> 'Carys Gibson'";
        $result = $this->conn1->_execute($s1);

        while ($row = $this->conn1->_nextAssocRow($result)) {
            $fullName = $row['fullname'];
            $dataTable .= $fullName;
        }
        echo json_encode($dataTable);
    }

}

?>

I know want to call this with my Ajax function:

$(document).ready(function() {
                    $(function () 
                    {
                        $.ajax({                                      
                            url: 'Queries/CallsQuery.php/calls',            
                            dataType: 'json',              
                            success: function(result)         
                            {
                                //console.log(result);
                            } 
                        });

                    }); 
```

我在 Google Chrome 开发工具中收到“OPTIONS file:///C:/Users/wesley/Desktop/Highcharts%20example/Queries/CallsQuery.php/calls() 资源无法加载”错误，有什么原因吗？

谢谢，韦斯利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:43:27.060

简短版本：因为您没有使用 Web 服务器。

* * *

浏览器不支持 PHP。在 WWW 的上下文中，它是一种服务器端编程语言。

您需要一个网络服务器来：

*   解释一个 URI，它传递文件名末尾之外的数据
*   执行 PHP

* * *

此外，我不知道 PHP 有能力将`/function_name`URI 末尾的内容视为“在文件中唯一的类中运行此函数”。

它*可能*具有该功能，我不是 PHP 专家，但即使对于 PHP，它似乎也有点“做我可能的意思”。

通常的方法是使用一个控制器处理程序来检查 URI，然后执行适当的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:45:18.767

*编辑：*甚至没有读过错误，但昆汀是对的：看起来*php*没有做任何事情：获取 xampp，阅读文档并在本地计算机上设置快速服务器，我推荐 xampp，因为它已经死了- 设置简单，但从头开始会提供更多信息，一如既往

你希望这如何工作？一个类是惰性代码，除非它已被实例化。您正在调用一个*成员*函数，该函数位于您向其发送请求的脚本中。这个脚本定义了一个类，就它而言，它做了一个破解工作，然后回家喝一杯清爽的啤酒。

您需要一个 ajax 脚本来处理您的请求，创建一个实例，*然后*调用适当的成员函数

* * *

离题，但仍然：在您的 jQuery 代码上：为什么要嵌套`ready`回调？

```
$(function () 
```

简称

```
$(document).ready(function () 
```

所以这对我来说没有意义：

```
$(document).ready(function ()
{
    $(function ()
    {});
}); 
```

# ios - 在 Cordova 2.0 中找不到适用于 ios 条码扫描仪插件的插件“org.apache.cordova.barcodeScanner”

> ID：12052142
> 
> 赞同：2
> 
> 时间：2012-08-21T09:41:49.980
> 
> 标签：ios, cordova, barcode-scanner

我正在尝试为 ios 扫描当前项目中的条形码。为此，我使用了 Phone Gap 插件。我按照链接正确添加文件：[条形码链接](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)

我在项目的 www 文件夹中添加了barcodescanner.js 文件。但是当我按下按钮扫描 ipad 2 中的条形码时，出现以下错误：

```
 ERROR: Plugin 
'org.apache.cordova.barcodeScanner' not found, or is not a CDVPlugin. 
Check your plugin mapping in Cordova.plist 
```

似乎没有获得**barcodescanner.js**文件的正确路径。我也正确地在 index.html 文件中添加了路径。

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:10:36.070

阿林丹，

我现在开始工作了。我做了什么

1.  [像在链接](https://stackoverflow.com/questions/10450259/ios-phonegap-1-7-0-barcode-scanning-plugin-issue)中所做的那样更改 Cordova.plist 中的密钥
2.  将barcodescanner.js的代码更改为与上面相同的链接中的代码
3.  不仅将 .cpp 、 .h 和 .mm 文件添加到我的工作区目录中的文件夹中，还将它们添加到我的 xcode 项目中：

> 右键单击“插件”-> 将文件添加到项目名称-> 从项目目录中的插件文件夹中选择 .cpp 、 .h 和*.mm*文件-> 设置“为任何添加的文件夹创建文件夹引用”和“添加到目标”*项目名称*“ - >点击“添加”

将文件添加到我的项目后，扫描仪工作了。

希望这也为您解决。我正在使用 Cordova 1.8.1。

# c# - System.Data.SqlClient.SqlException：用户“sa”登录失败

> ID：12052146
> 
> 赞同：0
> 
> 时间：2012-08-21T09:42:07.143
> 
> 标签：c#, asp.net, sql-server, ado.net, database-connection

我已经在 IIS 7.5 中启动了我的站点。站点中存在一个问题，我试图解决它。在进行更改后，我构建了解决方案并尝试在站点中签出。当时我得到了一个异常详细信息

> System.Data.SqlClient.SqlException：用户“sa”登录失败”

这是源错误

```
Line 25:        /// <param name="dataTable"><see>System.Data.DataTalbe</see> a rellenar</param>
Line 26:         public void FillTable(System.Data.DataTable dataTable) 
                 { 
                     this.Adapter.SelectCommand = this.CommandCollection[0];       
                      this.Adapter.Fill(dataTable);
                 } 
```

谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T09:43:55.017

For starters, **don't run your solution using the sa account**!

Create an account with the permissions your app requires, and use that. Put the connection string in the `ConnectionStrings` section of `web.config`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-29T12:00:42.710

保持**Trusted_Connection=True**解决了我在连接字符串中的问题

# c# - 通过c#在电子表格中插入表格

> ID：12052150
> 
> 赞同：8
> 
> 时间：2012-08-21T09:42:21.830
> 
> 标签：c#, openoffice-calc

我创建了一个项目，该项目读取不同的文件，然后使用电子表格放入不同的工作表中。我使用了 Open office calc 电子表格，因此使用以下代码打开一个空白文件：

```
public XSpreadsheet getSpreadsheet(int nIndex, XComponent xComp)
{
    XSpreadsheets xSheets = ((XSpreadsheetDocument)xComp).getSheets();
    XIndexAccess xSheetsIA = (XIndexAccess)xSheets;
    XSpreadsheet xSheet =(XSpreadsheet)xSheetsIA.getByIndex(nIndex).Value;

    return xSheet;         
} 
```

我称一张要使用的表格是这样的：

```
XSpreadsheet newSheet = getSpreadsheet(sheetIndex, xComp); 
```

哪里`xComp`是：

```
string filePathway = @"file:///c:/temp/blank.ods";  
PropertyValue[] propVals = new PropertyValue[0];
XComponent oCalcuDoc = oDesktop.loadComponentFromURL(filePathway, "_blank", 0, propVals); 
```

但是我的问题是文件 blank.ods 需要设置为在应用程序运行之前已经插入电子表格所需的工作表数量。这并不理想，因为所需的纸张数量并不总是已知的。有没有办法从我的应用程序中插入工作表？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:09:02.860

我只是简单地看了一下 OpenOffice API，发现了这个：[http ://www.openoffice.org/api/docs/common/ref/com/sun/star/sheet/XSpreadsheets.html](http://www.openoffice.org/api/docs/common/ref/com/sun/star/sheet/XSpreadsheets.html)

..它声明界面`XSpreadsheets`：

> 提供按名称访问电子表格以及插入、复制、删除和重新排列电子表格的方法。

它包括以下方法：

`insertNewByName`，根据 API 文档：

> 在集合中插入一个新工作表。

见：[http ://www.openoffice.org/api/docs/common/ref/com/sun/star/sheet/XSpreadsheets.html#insertNewByName](http://www.openoffice.org/api/docs/common/ref/com/sun/star/sheet/XSpreadsheets.html#insertNewByName)

... 等等。

我绝不是 OpenOffice API 专家 - 我只是简要地查看了他们的 API 文档 - 希望这可以为您指明正确的方向。

实际上，文档包含一个如何在文档中添加新工作表的示例：

```
 /** Inserts a new empty spreadsheet with the specified name.
 @param xDocument The XSpreadsheetDocument interface of the document.
 @param aName The name of the new sheet.
 @param nIndex The insertion index.
 @return The XSpreadsheet interface of the new sheet.
 */
 public com.sun.star.sheet.XSpreadsheet insertSpreadsheet(
     com.sun.star.sheet.XSpreadsheetDocument xDocument,
     String aName, short nIndex ) {

     // Collection of sheets
     com.sun.star.sheet.XSpreadsheets xSheets = xDocument.getSheets();
     com.sun.star.sheet.XSpreadsheet xSheet = null;

     try {
         xSheets.insertNewByName(aName, nIndex);
         xSheet = xSheets.getByName( aName );
     } catch (Exception ex) {
     }

     return xSheet;
 } 
```

该示例可以在本页底部看到：[http ://wiki.openoffice.org/wiki/Documentation/DevGuide/Spreadsheets/Working_With_Spreadsheet_Documents](http://wiki.openoffice.org/wiki/Documentation/DevGuide/Spreadsheets/Working_With_Spreadsheet_Documents)

# ios - 通过 GPU（使用 OpenGL ES）或 CPU 进行图像分析？

> ID：12052151
> 
> 赞同：1
> 
> 时间：2012-08-21T09:42:22.773
> 
> 标签：ios, performance, image-processing, opengl-es

我想分析来自 iPhone 相机的不断更新的图像馈送，以确定一般的“亮度系数”。含义：如果系数返回 0.0，则图像全黑，如果返回 1.0，则图像全白。当然，介于两者之间的所有值都是我最关心的值（背景信息：我正在使用此系数来计算片段着色器中某些混合效果的强度）。

所以我想知道我是否应该在我的像素缓冲区上运行一个 for 循环并分析每帧（30 fps）的图像并将 coeff 作为统一发送到我的片段着色器，或者有没有办法在 OpenGL 中分析我的图像。如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:08:02.180

还有更多的答案，每一个都有自己的长处和短处。

在 CPU 上，这相当简单：循环遍历像素，将它们相加、除法，仅此而已。这是一个五分钟的工作。一个好的实现将需要几毫秒。

```
int i, sum = 0, count = width * height * channels;
for(i=0;i<count;i++)
    avg += buffer[i];
double avg = double(sum) / double(count); 
```

在 GPU 上，它可能会快得多，但也有一些缺点：第一个是把所有东西都放在适当位置所需的工作量。GPUImage框架将为您[节省](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)一些工作，但它也会添加大量代码。如果您只想对像素求和，那可能是一种浪费。第二个问题是，将像素发送到 GPU 可能比在 CPU 中汇总它们需要更多的时间。实际上，只有当您确实需要认真处理时，GPU 才会证明这项工作的合理性。

第三种选择，将 CPU 与库一起使用，其缺点是要添加大量代码来完成 10 行即可完成的工作。但结果会很漂亮。同样，如果您也将 lib 用于其他任务，这也是合理的。这是 OpenCV 中的一个示例：

```
cv::Mat frame(buffer, width, height, channels, type);
double avgLuminance = cv::sum(frame)/(double(frame.total()*frame.channels())); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T09:47:52.380

当然还有 OpenCL，它允许您使用 GPU 进行一般处理。

# vb.net - Razor 默认下拉框

> ID：12052159
> 
> 赞同：0
> 
> 时间：2012-08-21T09:42:56.780
> 
> 标签：vb.net, asp.net-mvc-3, razor

我有一个用 Razor 编写的下拉列表，用于我正在开发的 MVC 应用程序：

```
@Html.DropDownList("BillId", "") 
```

但是，用户不必根据我的程序逻辑选择任何内容（列表中填充了我的控制器中的“Bill”对象）。如果他们没有选择任何东西，我会收到错误

`The ViewData item that has the key 'BillId' is of type 'System.Int32' but must be of type 'IEnumerable<SelectListItem>'.`

如果未选择任何内容，如何在 Razor 中编写语句以返回 0 的 BillId？

我不确定语法，因为我有纯 Java 和 VB 的背景，但有些类似

```
 If DropdownBox.SelectedIndex = 0
 Else 
 BillId = DropdownBox.SelectedIndex
 End 
```

控制器如下：

```
Function Create(id As Integer) As ViewResult
        ViewBag.id = id
        Dim job As Job = New Job
        job.CustomerId = id
        job.JobAmount = 0
        job.JobDate = Date.Now()
        job.JobStatus = "Active"

        Dim BillList = New List(Of Bill)()

        Dim BillQuery = From s In db.Bills
                        Select s

        BillList.AddRange(BillQuery)

        ViewBag.BillIdList = New SelectList(BillList, "BillId", "BillDate")

        ViewBag.BillId = New SelectList(BillList, "BillId", "BillDate")

        Return View(job)
    End Function 
```

create 的 POST 函数如下：

```
 <HttpPost()>
    Function Create(job As Job) As ActionResult
        If ModelState.IsValid Then
            db.Jobs.Add(job)
            db.SaveChanges()

            Dim customer As Customer = db.Customers.Find(job.CustomerId)
            Dim customerNumber As String = customer.CustCellphone.ToString()
            Dim messageSender As SendMessage = New SendMessage
            Dim smsMessage As String = "LAUNDRY: Job Number " & job.JobId & " has been booked in. You will be notified when individual services within it are ready for collection."
            messageSender.SendMessage(smsMessage, customerNumber)

            Dim url As String = "/RequestedService/AddService/" + job.JobId.ToString()
            Return Redirect(url)
        End If
        Return View(job)
    End Function 
```

**编辑**

我也想知道这是如何传回的，因为在 POST 中我可以检查“null”？但是我觉得问题可能出在按下提交按钮的那一刻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:00:18.353

在您的 POST 控制器操作中，您忘记在返回视图之前填充 ViewCrap（哎呀，我的意思是 ViewBag）：

```
<HttpPost()>
Function Create(job As Job) As ActionResult
    If ModelState.IsValid Then
        ...
    End If

    ' Here you must populate the ViewCrap before returning the view the same 
    ' way you did in your GET action because your view depend on it
    Dim BillQuery = From s In db.Bills
                    Select s
    ViewBag.BillId = New SelectList(BillQuery.ToList(), "BillId", "BillDate")

    Return View(job)
End Function 
```

但我强烈建议您使用视图模型并忘记......（我不想发音的词）的存在。

* * *

更新：

现在让我们看看实现这一点的正确方法（即使用视图模型）。视图模型是您应该为每个视图定义的类，它将代表其特定要求。因此，从您在评论部分所说的内容到我的回答，您希望在您的视图中有一个下拉列表，用户必须从下拉列表中选择账单，这是必需的。

所以让我们滚动视图模型：

```
public class JobViewModel
{
    [Required(ErrorMessage = "Please select a bill")]
    [Display(Name = "Bill")]
    public int? SelectedBillId { get; set; }
    public IEnumerable<SelectListItem> Bills 
    { 
        get 
        {
            return db.Bills.ToList().Select(x => new SelectListItem
            {
                Value = x.BillId.ToString(),
                Text = x.BillDate.ToString()
            });
        } 
    }

    public int CustomerId { get; set; }

    ... here you could put any other properties that you want 
        to display on the view, things like JobId, ...
} 
```

然后我们用 2 个动作定义我们的控制器：

```
public ActionResult Create(int id)
{
    var model = new JobViewModel
    {
        CustomerId = id
    };
    return View(model);
}

[HttpPost]
public ActionResult Create(JobViewModel model)
{
    if (ModelState.IsValid)
    {
        // Using AutoMapper here to map between the domain model
        // and the view model (http://automapper.org/)
        var job = Mapper.Map<JobViewModel, Job>(model);

        // Now call your service layer to do the necessary processings
        // on this job domain model including saving the job and sending 
        // messages and stuff. This avoids polluting your controller with
        // business logic code which belongs to your service layer
        ServiceLayer.ProcessJob(job);

        return RedirectToAction("AddService", "RequestedService", new { id = job.JobId });
    } 

    return View(model);
} 
```

最后，您将拥有一个相应的视图，该视图将被强类型化到视图模型：

```
@model JobViewModel

@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.SelectedBillId)
        @Html.DropDownListFor(x => x.SelectedBillId, Model.Bills, "-- select --")
        @Html.ValidationMessageFor(x => x.SelectedBillId)
    </div>

    ... some other input fields

    <p><button type="submit">OK</button></p>
} 
```

* * *

现在，正如评论部分所承诺的，让我展示我所谓的绝对*色情*方法来解决这个问题，如果你在你的应用程序中实现，我将不得不要求你不再回来询问任何与 ASP.NET MVC 相关的问题在 StackOverflow 上:-)

*色情*方法包括手动将id = 0 和 text = 空字符串的项目插入列表的开头，然后在控制器内部验证所选 id 是否等于 0，以检查模型是否有效：

因此，在您的 GET 操作中：

```
Function Create(id As Integer) As ViewResult
    ViewBag.id = id
    Dim job As Job = New Job
    job.CustomerId = id
    job.JobAmount = 0
    job.JobDate = Date.Now()
    job.JobStatus = "Active"

    Dim Bills = db.Bills.ToList().Select(Function(s) New SelectListItem With { .Value = s.BillId.ToString(), .Text = s.BillDate.ToString() })
    Bills.Insert(0, New SelectListItem With { .Value = "0", .Text = "" })
    ViewBag.BillId = Bills

    Return View(job)
End Function

<HttpPost()>
Function Create(job As Job, BillId as Integer) As ActionResult
    If BillId > 0 Then
        db.Jobs.Add(job)
        db.SaveChanges()

        Dim customer As Customer = db.Customers.Find(job.CustomerId)
        Dim customerNumber As String = customer.CustCellphone.ToString()
        Dim messageSender As SendMessage = New SendMessage
        Dim smsMessage As String = "LAUNDRY: Job Number " & job.JobId & " has been booked in. You will be notified when individual services within it are ready for collection."
        messageSender.SendMessage(smsMessage, customerNumber)

        Dim url As String = "/RequestedService/AddService/" + job.JobId.ToString()
        Return Redirect(url)
    End If
    ModelState.AddModelError("BillId", "Please select a bill")
    Return View(job)
End Function 
```

在视图内部：

```
@Html.DropDownList("BillId") 
```

# java - 使用正则表达式 Java 搜索字母

> ID：12052162
> 
> 赞同：0
> 
> 时间：2012-08-21T09:43:00.500
> 
> 标签：java

```
public static void main(String[]args){

**exp("^[a[k][t][l]]{6}$"); //line 9**
exp("^(bEt).*(oc)$");
exp("^(bEt)$");
exp("^(a).*");
exp("bEt(oc)*");
exp("^(bEt).*");
exp [baba][bebe][bibi][bobo][bubu][fafa][fefe][fofo][fufu]

}

public static void exp(String uttryck){
    int counter = 0;
    File fil = new File("Walta_corpus1.txt");
    Scanner sc = null;
    try{
        sc = new Scanner(fil);
    }
    catch(FileNotFoundException foo){
    }
    **String word = sc.next();** line 28
    Pattern pattern = Pattern.compile(uttryck);
    Matcher matcher = pattern.matcher(word);

    while(word != null){
        if(matcher.find()){
            counter++;
            System.out.println(word);
            }

        if(sc.hasNext()){
            word=sc.next();
            matcher = pattern.matcher(word);
            }
        else
            word = null;
    }
    System.out.println(counter);

} 
```

我需要帮助的问题是：

```
 Exception in thread "main" java.lang.NullPointerException
at raknare.exp(raknare.java:28)
at raknare.main(raknare.java:9) 
```

我已经尝试了很多，但没有任何真正的工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:47:31.043

检查以下代码：

```
public static void exp(String uttryck) throws FileNotFoundException{
// .....
try{
    sc = new Scanner(fil);
}
catch(FileNotFoundException foo){
    // if scanner throws exception, sc is null
    foo.printStackTrace(); // add this method call and check.
    throw foo; //rethrow exception to caller
}
String word = sc.next(); // if catch is executed, sc will give NullPointerException

//.....
} 
```

如果你得到了`FileNotFoundException`，那么你将`NullPointerException`在上面的行中得到，因为你在捕获异常之后继续`FileNotFoundException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:53:57.057

你在这一行有一个 NullPointerException ：

```
String word = sc.next(); 
```

这意味着您`Scanner sc`的未初始化。如果找不到文件并抛出 a ，就会发生这种情况。您看`FileNotFoundException`不到是否抛出了这样的异常，因为您在 catch 块中没有做任何事情。

尝试这个 ：

```
public static void exp(String uttryck){
    int counter = 0;
    File fil = new File("Walta_corpus1.txt");
    Scanner sc = null;
    try{
        sc = new Scanner(fil);
        String word = sc.next();**
        Pattern pattern = Pattern.compile(uttryck);
        Matcher matcher = pattern.matcher(word);
        while(word != null){
            if(matcher.find()){
            counter++;
            System.out.println(word);
            }

            if(sc.hasNext()){
                word=sc.next();
                matcher = pattern.matcher(word);
            } else
                word = null;
        }
        System.out.println(counter);
    } catch(FileNotFoundException foo){
        foo.printStackTrace();
    }
} 
```

我认为有空的 catch 块是一个非常糟糕的主意。尝试至少打印一次以了解是否捕获异常。

# jsf-2 - 当使用 commandLink 而不是 commandButton 时，表单不提交值

> ID：12052164
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:43:05.913
> 
> 标签：jsf-2, commandlink, commandbutton

我做了以下jsf页面。在我的托管 Bean 中，我想评估输入，但我没有得到值。

如果我按我的 commandLink，我不会得到任何值。当我使用命令按钮时，它可以工作：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="../templates/common.xhtml">
    <ui:define name="pageTitle">Test</ui:define>
    <ui:define name="pageHeader">Test</ui:define>
    <ui:define name="body">
        <h:panelGroup id="messagePanel" layout="block">
            <h:messages errorStyle="color: red" infoStyle="color: green"
                layout="table" />
        </h:panelGroup>
        <h:form>
            <h:outputLabel value="#{bundle.SearchAdressLabel_name}"
                for="axname" />
             <h:inputText id="axname"
                    value="#tbaxController.name}"
                    title="#{bundle.SearchAdressTitle_name}" />
                     </h:panelGrid>
            <br />
            <br />
            <h:commandButton id="submit" value="#{bundle.SearchAdressLabel_cmdsearch}"  action="#{tbaxController.prepareList}">
        </h:commandButton>

            <h:commandLink action="#{tbaxController.prepareList}"
                value="#{bundle.SearchAdressLabel_cmdsearch}" immediate="true" />  
            <br />
            <br />
            <h:commandLink value="#{bundle.SearchAdressLabel_cmdclear}"
                type="reset" />
        </h:form>
    </ui:define>
</ui:composition>
</html> 
```

这是我的MB的一部分：

```
@ManagedBean(name = "tbaxController")
@SessionScoped
public class tbaxController implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final org.apache.log4j.Logger logger = org.apache.log4j.Logger
            .getLogger(tbaxController.class);

    private Tbax current;
    private DataModel items = null;
    @EJB
    private TbaxFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    private String name;

    public tbaxController() {
    }

    public String getname() {
        // Get the field
        return searchAxart;
    }

    public void setname(String oname) {
        // Set the field this.searchAxart
        this.name = oname.trim();
    }

    ...

    public String prepareList() {
        logger.info("prepareList:" + name); **//null with commandLink!
        recreateModel();
        return "ADList";
    }

     ... 
```

为什么我的 prepareList 方法没有通过 commandLink 获得任何值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:57:35.703

这`immediate="true"`使得 jsf 跨过流程验证和更新模型阶段。它直接跳转到调用应用程序阶段。这就是为什么您没有在模型上获得任何值的原因。尝试删除它，看看会发生什么。

# iphone - 如何为所有用户发布替换几个旧应用程序的应用程序？

> ID：12052165
> 
> 赞同：1
> 
> 时间：2012-08-21T09:43:06.497
> 
> 标签：iphone, ios, app-store

我正在为 AppStore 开发几个应用程序，它们具有不同的捆绑 ID，但逻辑相似。现在我正在研究一个新概念，它将这些应用程序的所有逻辑都包含在一个通用项目中。因此，我想准备一个新应用程序，旨在替换所有旧应用程序。我怎样才能确保这一点？明确地说，我希望所有用户都安装并运行新应用程序，以便它可以从安装在用户设备上的旧应用程序传输数据和功能。我该如何做到这一点，以便根据每个用户安装的旧应用程序保留所有数据和功能，Apple 会接受这样的更改和行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:56:28.087

这是不可能的，您将不得不用新的一次替换所有旧应用程序。您无法在新版本中更新应用程序包 ID。

# asp.net - SSO Integration Using SAML 2.0

> ID：12052173
> 
> 赞同：2
> 
> 时间：2012-08-21T09:43:41.270
> 
> 标签：asp.net, vb.net, single-sign-on, saml-2.0

I am working on integrating our application with client's Identity management system using SAML 2.0\. Below is the requirement

1.  The login screen of our application will have an option for Single Sign On. when clicked user will be directed to the login screen of Identity management system
2.  The Identity provider will validate user's credentials and send us the information back to our application
3.  based on the input from Identity provider the application has to be provide access to the user.

Now, the client has asked us to provide them SAML meta data files. Our application is developed in dot net.

I had a look at component space and ATC Inc components that can be used for SAML generation however I need help to start this.

Can someone help me on this? This is something new which I haven't worked.

Thanks, Abhilash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:39:58.003

如果您正在寻找比直接将编码支持直接集成到应用程序中更简单的集成，请查看 Ping Identity 的 PingOne 应用程序提供商服务 (APS)“SAML 即服务”。几行 .NET 代码（或 Java、Ruby 或 Perl 等）通过 RESTful API 集成，您就完成了。无需嵌入复杂的 SAML SP 代码和随之而来的安全开销 [免责声明：我为 Ping 工作]。

伊恩

# dreamweaver - 如何获取 DWT 中 TemplateRepeatIndex 的最大索引计数

> ID：12052182
> 
> 赞同：6
> 
> 时间：2012-08-21T09:44:17.307
> 
> 标签：dreamweaver, tridion, tridion-2011, dreamweaver-templates

我有一个 tridion 组件，其中它的元数据设计有一个名为“列表”的字段，该字段使用类别和关键字填充

我使用 DWT 代码使用 My DWT TBB 使用以下代码填充列表中存在的项目

```
<!-- TemplateBeginRepeat name="Metadata.list" -->

    <!-- TemplateBeginIf cond="list" --> 
        @@RenderComponentField('list',TemplateRepeatIndex)@@ ,
    <!-- TemplateEndIf -->

<!-- TemplateEndRepeat --> 
```

但我得到预览

一二三四五，

期望的输出应该是：一、二、三、四、五

所以为此我需要获得“TemplateRepeatIndex”的最大计数是否有任何内置函数来检查相同。

使用 Tridion-sp1,2011。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T12:24:59.683

您可以使用内置函数解决此问题：CollectionLength。

当您有一个多值文本字段“multiValuedField”时，您可以使用以下表达式找到项目计数：

`@@CollectionLength("Component.Fields.multiValuedField")@@`

Collection Length 接收一个表达式，它是一个项目的完全限定名称和一个包项目的值选择器。

返回的值是一个字符串。当您需要执行整数比较或计算时，您需要将值解析为整数：

`@@parseInt(${CollectionLength("multivalued")})@@`

这是因为@@ 和 ${} 之间的字符串被解析为 JScript。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T10:42:00.403

一个简单的解决方案是改变你的逻辑。

您可以检查 TemplateRepeatIndex 是否为 0。如果*不是，则输出值**前面*的逗号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T09:54:24.893

我相信做到这一点的唯一方法是创建一个 TBB，将字段计数添加为包中的一个项目。然后，您将能够执行以下操作：

```
<!-- TemplateBeginRepeat name="Metadata.primary_topic" -->

<!-- TemplateBeginIf cond="primary_topic" --> 
@@RenderComponentField('primary_topic',TemplateRepeatIndex)@@<!-- TemplateBeginIf cond="TemplateRepeatIndex &lt; PrimaryTopicCount"--> ,<!-- TemplateEndIf -->
<!-- TemplateEndIf -->

<!-- TemplateEndRepeat --> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T11:21:04.643

几年前，Walter 通过引入自定义函数解决并解释了这个话题。

[http://sdltridionworld.com/community/extension_overview/dreamweavercia.aspx](http://sdltridionworld.com/community/extension_overview/dreamweavercia.aspx)

不要忘记为当前版本的 Tridion 重新编译他的代码。

***更新***：您可以在此页面上找到 Tridion 在 DWT 中使用的所有内置函数（及其使用示例）： [http ://code.google.com/p/tridion-practice/wiki/BuiltInFunctionsForUseInHtmlTemplates](http://code.google.com/p/tridion-practice/wiki/BuiltInFunctionsForUseInHtmlTemplates)

# javascript - javascript 没有在 webview 中运行 vimeo 视频

> ID：12052183
> 
> 赞同：0
> 
> 时间：2012-08-21T09:44:20.323
> 
> 标签：javascript, html, uiwebview, vimeo

我有一个名为`htmlString`我放置 iframe 和 javascript 的字符串。但不知何故，我的 javascript 没有运行。然后我用来`loadHTMLString`加载 html。需要找出问题所在。

```
NSString *htmlString = [NSString stringWithFormat:

                                @"<html><head><meta name = \"viewport\"content = \"initial-scale = 1.0, user-scalable = no\"/><script type=\"text/javascript\">"
                                @"alert (\"hello1\")"
                                @"function ready() {"
                                    // Keep a reference to Froogaloop for this player
                                @"var player = $f(player),"
                                @"$fplayer.api('play');}"

                                @"window.addEventListener('load', function() {"
                                @"alert (\"hello\")"
                                @"                                               $f(player).addEvent('ready', ready);"
                                @"                                           });"

                                @" </script></head><body><iframe id=\"player\" src=\"http://player.vimeo.com/video/8118831?api=1&amp;player_id=player\" width=\"320\" height=\"480\" frameborder=\"0\" webkitallowfullscreen allowfullscreen></iframe>"
                                @"</body></html>",@"http://www.vimeo.com/8118831"
                              ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:44:05.420

基本上你必须从[Github](https://github.com/vimeo/froogaloop)导入 froogaloop.js 。然后使用以下

```
NSString *htmlString = [NSString stringWithFormat:@"  <html><head><script src=\"froogaloop.js\"></script><script>function ready() {$f(document.getElementById(\"player\")).api(\"play\");}function func1() {$f(document.getElementById(\"player\")).addEvent(\"ready\", ready);}window.onload=func1;</script></head><body><iframe id=\"player\" src=\"http://player.vimeo.com/video/39287488?api=1&amp;player_id=player\" width=\"320\" height=\"480\" frameborder=\"0\"></iframe></body></html>"]; 
```

还要确保使用`UiWebViewDelegate`它。

# r - New matrix containing difference between row elements of original

> ID：12052185
> 
> 赞同：0
> 
> 时间：2012-08-21T09:44:29.293
> 
> 标签：r, matrix

I want to take an existing MxN matrix and create a new M-1xN matrix such that for each columns, the elements are the difference between adjacent row elements of the original matrix.

The idea is the data goes from a cumulative type to a rate type...

eg: I have (where each column is a specific data series).

```
 [,1]  [,2] [,3] 
[1,] "17"  "16" "15" 
[2,] "34"  "32" "32" 
[3,] "53"  "47" "48"  
[4,] "72"  "62" "63" 
[5,] "90"  "78" "79"  
[6,] "109" "94" "96" 
```

I would like -

```
 [,1]  [,2] [,3] 
[1,] "17"  "16" "17"  
[2,] "19"  "15" "16" 
[3,] "19"  "15" "15" 
[4,] "18"  "16" "16" 
[5,] "19"  "16" "17" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:04:12.633

数字数据非常简单（不知道为什么你有字符）：

```
diff(m) 
```

使用字符数据，这应该可以工作：

```
diff(matrix(as.numeric(m), dim(m))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:58:05.200

字符格式有点奇怪，但这里有一种方法：

```
# Set up the data
mymat<-matrix(c("17","16","15",
  "34","32","32",
  "53","47","48" ,
  "72","62","63",
  "90","78","79" ,
  "109","94","96"),nrow=6,byrow=TRUE) 
```

将该`apply`函数与以 . 为中心的匿名函数一起使用`diff`。

```
apply(mymat, 2, function(x)as.character(diff(as.numeric(x))))

#      [,1] [,2] [,3]
# [1,] "17" "16" "17"
# [2,] "19" "15" "16"
# [3,] "19" "15" "15"
# [4,] "18" "16" "16"
# [5,] "19" "16" "17" 
```

如果数据以数字开头并且需要数字结果，则上述可以简化为

```
apply(mymat, 2, diff) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T17:10:56.993

如果您想减去矩阵的列（而不是行），请尝试：

```
col.diff = t(diff(t(mat))) 
```

# jquery - WebService Return Xml result instead of json

> ID：12052190
> 
> 赞同：1
> 
> 时间：2012-08-21T09:44:45.330
> 
> 标签：jquery, web-services

that is my code , and i am wonder that why my web service in .net 4.0 always return data as a xml format instead of json .

Webservice :

```
 [WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public FileModel HelloWorld()
{      
  FileModel model= new FileModel();
  model.Name = "peyman";

  return model;
} 
```

jQuery :

I get files list in drop event with: `var files = event.originalEvent.dataTransfer.files;` and then call `upload(files);`

```
function upload(files) {

    var data = new FormData();

    jQuery.each(files, function(i, file) {
        data.append('file-' + i, file);
    });

    $.ajax({
        type : "POST",
        url : parameters.Url,
        contentType : false,
        processData : false,
        data : data,
        dataType : "json",
        success : function(msg) {
            alert(msg);
        },
        error : function() {
            alert("err");
        }
    });
} 
```

Also i tried some thing like :

*   `[ScriptMethod(ResponseFormat = ResponseFormat.Json)]`
*   `Context.Response.ContentType = "application/json";`
*   Adding `"application/json"` or `"text/json"` to response header

but response content-type is always `"text/xml; charset=utf-8"`

# java - Printing Ancestors of a node in Binary Tree

> ID：12052192
> 
> 赞同：0
> 
> 时间：2012-08-21T09:44:59.063
> 
> 标签：java, algorithm, tree, binary-tree

I need to print the ancestors of a node in binary tree. e.g Node 7 has ancestors as 1,3 . I have written the below code but output is coming as 7\. Can you suggest the issues in this code?

```
 1
   / \
  2   3
 / \ / \
4  5 6  7 

 public static String findAncestor(BinaryTreeNode root , int number,  boolean matched) {

    if (root != null) {

        int rootData = root.getData();

        BinaryTreeNode left = root.getLeft();
        BinaryTreeNode right = root.getRight();

        if (left != null && right != null) {
            return findAncestor (root.getLeft(), number, matched ) + findAncestor (root.getRight(), number, matched);               
        }

        if (left != null) {
            return findAncestor (root.getLeft(), number, matched ) ;        
        }

        if (right != null) {
            return findAncestor (root.getRight(), number, matched ) ;
        }

        if (rootData == number) {
            matched = true;
            return String.valueOf(rootData);        
        }   
        if (matched) {
            return String.valueOf(rootData);        
        }   
    }   
    return "";  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:04:43.757

```
public boolean findAncestorPath(List<Integer> ancestors, BinaryTreeNode node, int number) {
    if (node == null)
        return false;

    int data = node.getData();
    if (data == number)
        return true;

    if (findAncestorPath(ancestors, node.getLeft(), number)) {
        ancestors.add(data);
        return true;
    }

    if (findAncestorPath(ancestors, node.getRight(), number)) {
        ancestors.add(data);
        return true;
    }

    return false;
} 
```

然后你会称之为（你也应该把它包装在一个函数中）：

```
List<Integer>() ancestors = new ArrayList<Integer>();
boolean found = findAncestorPath(ancestors, root, number); 
```

请注意，该`ancestor`列表将被颠倒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T09:37:22.373

这是Java实现

```
public static List<Integer> ancestors(BinaryTreeNode<Integer> root, Integer target) {
    List<Integer> result = new ArrayList<Integer>();
    findAncestors(root, target, result);
    return result;
}

private static boolean findAncestors(BinaryTreeNode<Integer> node, Integer target, List<Integer> result) {
    if (node == null) {
        return false;
    }
    if (node.getData() == target) {
        return true;
    }
    if (findAncestors(node.getLeft(), target, result) || findAncestors(node.getRight(), target, result)) {
        result.add(node.getData());
        return true;
    }

    return false;
} 
```

这是单元测试用例

```
@Test
public void allAncestors() {
    BinaryTreeNode<Integer> root = buildTree();
    List<Integer> ancestors = BinaryTreeUtil.ancestors(root, 6);
    assertThat(ancestors.toArray(new Integer[0]), equalTo(new Integer[]{5,2,1}));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-03T16:27:56.127

这段代码可以很好地给所有祖先一个特定的 node ， node 是根节点， value 是我们必须找到所有祖先的节点的值。

```
static boolean flag=false;
  static void AnchersterOf(AnchesterNode node,int value) {
        // TODO Auto-generated method stub
      if(node==null)
          return ;

      if(node.value==value){

          flag=true;
          return;
      }

     if(flag==false){
      AnchersterOf(node.left,value);
      if(flag==true){
            AnchersterOf(node,value);

      } if(flag==true)
      System.out.println(node.value);
    AnchersterOf(node.right,value);
    if(flag==true)
          System.out.println(node.value);
     }

    } 
```

# ruby-on-rails - 不用登录就用paypal结账

> ID：12052194
> 
> 赞同：0
> 
> 时间：2012-08-21T09:45:02.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-sandbox, activemerchant

我正在尝试使用 rails 实现 paypal express checkout。我在很多地方读过，如果一个人想通过信用卡或借记卡在没有贝宝账户的情况下结账，可以简单地使用`SOLUTIONTYPE=Sole`。它似乎不起作用，并在我尝试结帐时要求登录。请找到显示此问题的附加屏幕截图。![在此处输入图像描述](../Images/31ee22369ce3f9a206b5326ac2e7690f.png)

这是我的控制器代码：-

```
def pay
        topup = Topup.find(params[:id])

        response = EXPRESS_GATEWAY.setup_purchase(topup.price_in_cents,{
          :ip                => request.remote_ip,
          :currency_code     => 'GBP',
          :return_url        => topups_success_url,
          :cancel_return_url => topups_cancel_url,
          :SOLUTIONTYPE => 'Sole',
          :items => [{:name => "Topup", :quantity => 1,:description => "Top up my account", :amount => topup.price_in_cents}]
        })
        redirect_to EXPRESS_GATEWAY.redirect_url_for(response.token)

    end 
```

我做错了什么？到目前为止，我正在沙盒上对其进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:04:23.223

在 SO 本身上找到了这个问题的答案，这里是链接，以防有人遇到这个问题。[Paypal Express Checkout 和网站支付标准之间的 API 差异](https://stackoverflow.com/questions/9523376/api-differences-between-paypal-express-checkout-and-website-payment-standard)

# jsf - JSF 1.2 custom component does not render/encode children

> ID：12052195
> 
> 赞同：2
> 
> 时间：2012-08-21T09:45:03.783
> 
> 标签：jsf, custom-component, jsf-1.2

I have two custom components:

```
CustomUIComponent extends UIComponentBase
CustomChildUIComponent extends UIComponentBase 
```

In CustomUIComponent I implement encodeBegin, encodeChildren and encodeEnd - in encodeChildren I set some custom attribute to be forwarded to the child component.

In CustomChildUIComponent I implement only encodeBegin.

In addition to these classes I added the components in the faces-config.xml:

```
<component>
    <component-type>test.JsfMessage</component-type>
    <component-class>test.CustomUIComponent</component-class>
</component>
<component>
     <component-type>test.JsfChildMessage</component-type>
     <component-class>test.CustomChildUIComponent</component-class>
</component> 
```

And I have the custom taglib.xml configured in the web.xml and contains:

```
<tag>
    <tag-name>customMessage</tag-name>
    <component>
        <component-type>test.JsfMessage</component-type>
    </component>
</tag>

<tag>
    <tag-name>customChildMessage</tag-name>
    <component>
        <component-type>test.JsfChildMessage</component-type>
    </component>
</tag> 
```

Finally in my Facelets page I am trying to execute:

```
<myns:customMessage message="Hello World!!!" var="mytestvar">
    <myns:customChildMessage partnermsg="#{mytestvar}" />
</myns:customMessage> 
```

The result is that the parent is rendered but the child component does not.

Am I doing something wrong?

I tried checking the super.encodeChildren but it checks:

```
Renderer renderer = getRenderer(context);
if(renderer != null) ... 
```

I am not using a renderer class, but as I understand it is not a must.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:03:48.433

只有当同一个自定义组件的方法返回时，才会[`encodeChildren()`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIComponentBase.html#encodeChildren%28javax.faces.context.FacesContext%29)调用自定义组件的方法。这是在[javadoc](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIComponentBase.html#encodeChildren%28javax.faces.context.FacesContext%29)中指定的：[`getRendersChildren()`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIComponentBase.html#getRendersChildren%28%29)`true`

> `rendersChildren`仅当属性为时才会调用此方法`true`。

因此，请确保您已相应地覆盖它，即默认为`false`：

```
@Override
public boolean getRendersChildren() {
    return true;
} 
```

# xna - Collision between a 2D Texture and a 3D model BoundingBox

> ID：12052199
> 
> 赞同：0
> 
> 时间：2012-08-21T09:45:09.480
> 
> 标签：xna, collision-detection, xna-4.0

I would like to check for collison between a sprite and a 3D Model.

After doing some searching I ended up with this code

```
BoundingBox handBox = new BoundingBox(new Vector3(handX, handY, 0), new Vector3(handX, handY, 0));
foreach (ModelMesh myModelMeshes in model.Meshes)
  if (myModelMeshes.BoundingSphere.Intersects(handBox))
    return true;
return false; 
```

Here two values that should return false and not true

![enter image description here](../Images/5d2c3bf3e2aeb0e240835004fd2be652.png)

![enter image description here](../Images/66436ec58ab4a854709ef222f623de76.png)

But the problem is that it's always true. Am I missing something obvious?

# android - 使用动态内容刷新活动

> ID：12052211
> 
> 赞同：1
> 
> 时间：2012-08-21T09:45:46.717
> 
> 标签：android, dynamic, android-activity, refresh

我有一个包含一些动态内容的活动。

对于数组的每一项，都有不同的内容（textViews、复选框的数量……）用户单击“保存”按钮，然后屏幕必须自行刷新以显示下一项的内容。

我想知道像这样重新加载我的活动是否是一个好习惯：

```
Intent refresh = new Intent(this, conflictActivity.class);
startActivity(refresh)
finish() 
```

而不是删除我的布局中的所有视图等......

我认为重新加载它更容易。还有另一种方法吗？

**编辑**：添加代码。

```
public class ConflicFieldTest extends Activity {

private int nbField;
private int nbChecked;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.conflict);

    final Button saveButton = (Button) findViewById(R.id.save);

    final LinearLayout leftLayout = (LinearLayout) findViewById(R.id.leftLayout);
    final LinearLayout rightLayout = (LinearLayout) findViewById(R.id.rightLayout);

    final TextView fieldName = new TextView(this);
    final LinearLayout editLayoutRight = new LinearLayout(this);
    final LinearLayout editLayoutLeft = new LinearLayout(this);

    final LinearLayout fieldRight = new LinearLayout(this);
    final LinearLayout fieldLeft = new LinearLayout(this);

    final ArrayList<String> allIdInConflict = getAllIdInConflict();
    for (int i = 0; i < allIdInConflict.size(); i++) {

        new AccountSyncTask() {

            @Override
            public void onPostExecute(
                    final ArrayList<ArrayList<String>> result) {

                nbField = 0;
                nbChecked = 0;

                final Map<String, Object> fieldsInConflict = conflict
                        .conflictWithFields(memoAccountMap,
                                serverAccountMap, modifiedAccountMap);

                for (Iterator<Map.Entry<String, Object>> field = fieldsInConflict
                        .entrySet().iterator(); field.hasNext();) {
                    final Map.Entry<String, Object> entry = field.next();

                    fieldName.setText(entry.getKey() + " : ");

                    final EditText[] editTextArrayRight = new EditText[fieldsInConflict
                            .size()];
                    final EditText[] editTextArrayLeft = new EditText[fieldsInConflict
                            .size()];
                    final CheckBox[] checkboxRight = new CheckBox[fieldsInConflict
                            .size()];
                    final CheckBox[] checkboxLeft = new CheckBox[fieldsInConflict
                            .size()];

                    checkboxRight[nbField] = new CheckBox(
                            ConflicFieldTest.this);
                    checkboxLeft[nbField] = new CheckBox(
                            ConflicFieldTest.this);

                    editLayoutLeft.setGravity(Gravity.CENTER_HORIZONTAL);
                    editLayoutRight.setGravity(Gravity.CENTER_HORIZONTAL);
                    fieldRight.setGravity(Gravity.CENTER_HORIZONTAL);
                    fieldLeft.setGravity(Gravity.CENTER_HORIZONTAL);

                    editLayoutRight.setOrientation(LinearLayout.HORIZONTAL);
                    fieldRight.setOrientation(LinearLayout.VERTICAL);
                    fieldLeft.setOrientation(LinearLayout.VERTICAL);

                    rightLayout
                            .addView(
                                    editLayoutRight,
                                    new LinearLayout.LayoutParams(
                                            LinearLayout.LayoutParams.FILL_PARENT,
                                            LinearLayout.LayoutParams.WRAP_CONTENT));
                    leftLayout
                            .addView(
                                    editLayoutLeft,
                                    new LinearLayout.LayoutParams(
                                            LinearLayout.LayoutParams.FILL_PARENT,
                                            LinearLayout.LayoutParams.WRAP_CONTENT));

                    editTextArrayRight[nbField] = new EditText(
                            ConflicFieldTest.this);

                    editTextArrayRight[nbField].setText((String) entry
                            .getValue());
                    editTextArrayRight[nbField].setTextColor(Color.BLACK);
                    editTextArrayRight[nbField].setFocusable(false);
                    editTextArrayRight[nbField].setClickable(false);
                    editTextArrayRight[nbField].setWidth(180);
                    editTextArrayRight[nbField].setPadding(0, 10, 0, 0);

                    editTextArrayLeft[nbField] = new EditText(
                            ConflicFieldTest.this);
                    editTextArrayLeft[nbField]
                            .setText((String) serverAccountMap.get(entry
                                    .getKey()));
                    editTextArrayLeft[nbField].setTextColor(Color.BLACK);
                    editTextArrayLeft[nbField].setFocusable(false);
                    editTextArrayLeft[nbField].setClickable(false);
                    editTextArrayLeft[nbField].setWidth(180);
                    editTextArrayLeft[nbField].setPadding(0, 10, 0, 0);

                    final int i1 = nbField;

                    checkboxLeft[i1]
                            .setOnClickListener(new OnClickListener() {
                                @Override
                                public void onClick(View v) {

                                }
                            });

                    checkboxRight[i1]
                            .setOnClickListener(new OnClickListener() {

                                @Override
                                public void onClick(View v) {

                                }
                            });

                    editLayoutLeft.addView(fieldName);

                    editLayoutRight
                            .addView(
                                    editTextArrayRight[nbField],
                                    new LinearLayout.LayoutParams(
                                            LinearLayout.LayoutParams.WRAP_CONTENT,
                                            LinearLayout.LayoutParams.WRAP_CONTENT));

                    editLayoutLeft
                            .addView(
                                    editTextArrayLeft[nbField],
                                    new LinearLayout.LayoutParams(
                                            LinearLayout.LayoutParams.WRAP_CONTENT,
                                            LinearLayout.LayoutParams.WRAP_CONTENT));

                    editLayoutRight.addView(checkboxRight[nbField]);
                    editLayoutLeft.addView(checkboxLeft[nbField]);

                    nbField++;

                }

                saveButton.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0) {
                        //save data & update UI
            }
        }

        .execute(appState.getSessionName(), id, "getObjectOnServer");

    }
} 
```

对不起代码，它有点脏（我已经删除了一些部分），我正在修改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:46:35.833

```
int flag = 0;
public void updateUI() {
  if(flag == 0) {
     //your normal codes...
  } else {
     //display view with user given data
  }
} 
```

在 中调用此函数`oncreate`。首先标志将设置为零。当您在 textview 中输入数据并勾选复选框时，使用一些值更新标志。然后`save Button`单击再次调用此函数。现在标志已设置。因此它将显示更新的 UI。

我想这会给你一个想法..

# iphone - 本地通知问题？

> ID：12052212
> 
> 赞同：0
> 
> 时间：2012-08-21T09:45:53.007
> 
> 标签：iphone, localnotification

我是 iPhone 应用程序开发的新手。我正在做警报应用程序。在这个应用程序中，我使用本地通知。我在完成按钮操作中调用通知方法。现在我点击完成按钮意味着通知正确触发。然后再次点击意味着也被解雇了，一次又一次的按下意味着工作错误，但我使用的是通知触发日期时间。此时完成意味着用户再次单击完成按钮意味着再次触发通知。

我想在那个特定的时间开火。你能帮我么。

我在这里使用这个源代码。

```
-(IBAction)doneButton
{

    [self scheduledNotification];

}

-(void)scheduledNotification
{
    Resource *resourceLoader = [[Resource alloc] init];

     NSDictionary *prefDic = [resourceLoader getPlistDataAsDictionary:@"preference"];

    if ([@"ON" isEqualToString:[prefDic objectForKey:@"alarm"]]) 
    {

        [[UIApplication sharedApplication] cancelAllLocalNotifications];

        Class cls = NSClassFromString(@"UILocalNotification");
        if (cls != nil) 
        {
            NSString *musicName;
            //NSDate *selectedDateTime = [[NSDate alloc]init];

            selectedDateTime = [prefDic objectForKey:@"alarmtime"];
            NSLog(@"saravanan periyasamy %@", selectedDateTime);

            musicName = [NSString stringWithFormat:@"%@%@",[prefDic objectForKey:@"alarmmusic"],@".wav" ];

            NSLog(@"musicname %@", musicName);

            NSLog(@"saravanan periyasamy123 %@", selectedDateTime);
            UILocalNotification *notif = [[cls alloc] init];

            notif.fireDate = selectedDateTime;  /* time for fireDate*/

            NSLog(@"selectedtime %@",selectedDateTime);

            notif.timeZone = [NSTimeZone systemTimeZone];

            notif.alertBody = @"Alarm";
            notif.alertAction = @"Show me";
            notif.repeatInterval = 0;

            notif.soundName = musicName;
            notif.applicationIconBadgeNumber = 1;
            NSDictionary *userDict = [NSDictionary dictionaryWithObject:@"saravanan"
                                                                 forKey:kRemindMeNotificationDataKey];
            notif.userInfo = userDict;
            [[UIApplication sharedApplication] scheduleLocalNotification:notif];
            [notif release];
        }
    }
}

AppDelegate.m

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   Class cls = NSClassFromString(@"UILocalNotification");

    if (cls) {
        UILocalNotification *notification = [launchOptions objectForKey:
                                             UIApplicationLaunchOptionsLocalNotificationKey];

        if (notification) {
            NSString *reminderText = [notification.userInfo 
                                      objectForKey:kRemindMeNotificationDataKey];
            //[self.viewController showReminder:reminderText];
            [self.settingViewController showReminder1:reminderText];
        }
    }
    application.applicationIconBadgeNumber = 0;   
    return YES;    

}

- (void)applicationWillEnterForeground:(UIApplication *)application {

    application.applicationIconBadgeNumber = 0;
}

- (void)application:(UIApplication *)application 
didReceiveLocalNotification:(UILocalNotification *)notification {

    application.applicationIconBadgeNumber = 0;
    NSString *reminderText = [notification.userInfo
                              objectForKey:kRemindMeNotificationDataKey];
    //[self.viewController showReminder:reminderText];
    [self.settingViewController showReminder1:reminderText];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:51:35.250

嗨，我不明白你的问题，但在这里我发布我的 LocalNotification 示例代码只是比较它或使用这个例子....

在这里当用户点击完成按钮然后调用“btnGo_Clicked”方法

```
-(IBAction)btnGo_Clicked:(id)sender{

    NSLog(@"\n ----------->>Go Clicked");
    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {
        NSString *kRemindMeNotificationDataKey = @"kRemindMeNotificationDataKey";

        NSDateComponents *dc = [[NSCalendar currentCalendar] components:NSDayCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit|NSQuarterCalendarUnit fromDate:[exdatePicker date]];
        [dc setDay:dc.day - 1];
        NSDate *noticeDate = [[NSCalendar currentCalendar] dateFromComponents:dc];

        NSDateFormatter* dateFormatterstring = [[NSDateFormatter alloc] init];
        [dateFormatterstring setDateFormat:@"dd-MM-yyyy hh:mm:ss a"];
        NSString *dateString = [dateFormatterstring stringFromDate:noticeDate];

        txtExpirayDate.text = dateString;
        UILocalNotification *notification = [[cls alloc] init];

        notification.fireDate = noticeDate;
        notification.timeZone = [NSTimeZone defaultTimeZone];
        notification.alertBody = [NSString stringWithFormat:@"%@ your Licence Expiry Date is Tommorow",txtLicence.text];
        notification.alertAction = @"Show me";
        notification.soundName = UILocalNotificationDefaultSoundName;
        notification.applicationIconBadgeNumber = 1;
        NSDictionary *userDict = [NSDictionary dictionaryWithObject:txtLicence.text forKey:kRemindMeNotificationDataKey];
        notification.userInfo = userDict;
        [[UIApplication sharedApplication] scheduleLocalNotification:notification];
        [notification release];
    }
    exdatePicker.hidden=YES;
} 
```

做一些改变，你得到你的输出

我希望这个答案对你有帮助......

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:51:40.540

如果您想多次按下按钮，请删除此行。

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

因为它删除了您以前的所有通知。

# python - 解析python代码进行统计分析

> ID：12052216
> 
> 赞同：1
> 
> 时间：2012-08-21T09:46:10.273
> 
> 标签：python, parsing

我正在考虑编写一些简单的静态代码分析，使用类声明和注释来生成 UML 图。

你能推荐一种以结构化方式解析 Python 脚本的舒适方法吗？我需要以`__init__`结构化的方式检测类声明、模块导入、参数分配和注释。

也许您可以指出我需要的特定部分？关于“Python 语言服务”（解析器、AST、...）有很大一部分，但我无法弄清楚我需要哪一个，我想避免深入研究所有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:54:30.083

您可以在加载代码后使用检查来检查代码：

[http://docs.python.org/library/inspect.html](http://docs.python.org/library/inspect.html)

# java - 获取一年中每一天的所有完整时间

> ID：12052220
> 
> 赞同：3
> 
> 时间：2012-08-21T09:46:16.420
> 
> 标签：java, date, calendar, hour

我需要在给定年份的每一天的每一小时都在命令行上获取/打印，例如 2011 年，但我正在努力用 Java 对其进行编码。

有没有人编码过这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T09:54:04.533

这应该有效：

```
final DateFormat df = DateFormat.getDateTimeInstance();
final Calendar c = Calendar.getInstance();
c.clear();
for (c.set(2011, Calendar.JANUARY, 1, 0, 0, 0);
     c.get(Calendar.YEAR) == 2011;
     c.add(Calendar.HOUR_OF_DAY, 1))
  System.out.println(df.format(c.getTime())); 
```

例如，请注意输出中的这种微妙之处：

```
Oct 30, 2011 12:00:00 AM
Oct 30, 2011 1:00:00 AM
Oct 30, 2011 2:00:00 AM
Oct 30, 2011 2:00:00 AM
Oct 30, 2011 3:00:00 AM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:37:56.153

您可以使用[joda-time](http://joda-time.sourceforge.net/)库轻松解决此问题：

```
 org.joda.time.Hours.hoursBetween(
        new org.joda.time.DateMidnight(2012,1,1).toLocalDate(), 
        new org.joda.time.DateMidnight(2013,1,1).toLocalDate()
      ).getHours(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:53:12.113

使用日历，并日复一日地循环以根据需要的参数管理“引用的字符串”，

您可以将每一行天（通常用逗号分隔）放在一个文件中

# sql - 通过变换将两个视图组合成一个结果集？

> ID：12052221
> 
> 赞同：1
> 
> 时间：2012-08-21T09:46:18.900
> 
> 标签：sql, sql-server, views

我有几个视图在 SQL Server 中生成以下两个输出。第一个（公寓输出）显示特定城镇中带有瓷砖和砖墙的公寓数量。第二个显示相同，但​​用于房屋。

我要做的是创建一个看起来像第三个示例的决赛桌，其中公寓和房屋数量与相应的 Tileroof 和 Brickwall 组合相结合。

我尝试过联合然后分组，但我真的很难让 Flats 和 Houses 并排计数列。请问有人可以帮忙吗？

谢谢

```
--View one
| Town | Flats | TileRoofs | Brick Wall |
-----------------------------------------
| A    | 3     | Y         | N          |
| A    | 4     | N         | Y          |
| A    | 8     | N         | N          |

--View two
| Town | Houses | TileRoofs | Brick Wall |
------------------------------------------
| A    | 1      | Y         | Y          |
| A    | 2      | Y         | N          |
| A    | 5      | N         | Y          |
| A    | 2      | N         | N          |

--Prefered output, by combining the two--

| Town | Flats | Houses | TileRoofs | Brick Wall |
--------------------------------------------------
| A    | 0     |  1     | Y         | Y          |
| A    | 3     |  2     | Y         | N          |
| A    | 4     |  5     | N         | Y          |
| A    | 8     |  2     | N         | N          | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:51:46.000

[完全外部联接在这里可能会有所帮助](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)。

```
select isnull(a.Town, b.Town) Town,
       isnull(a.TileRoofs, b.TileRoofs) TileRoofs,
       isnull(a.[Brick wall], b.[Brick wall]) [Brick wall],
       isnull(a.Flats, 0) Flats,
       isnull(b.Houses, 0) Houses
  from ViewOne a
  full outer join ViewTwo b
    on a.Town = b.Town
   and a.TileRoofs = b.TileRoofs
   and a.[Brick wall] = b.[Brick wall] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:52:33.593

```
select
    v2.Town ,coalesce(v1.flat,0) as flat,v2.houses,v2.TileRoofs, v2.Brick, v2.Wall 
from
    view2 as v2 left join view1 as v1
on v1.town=v2.town 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:55:54.200

您可能在完全外部连接之后

```
select 
    houses.town,
    flats.flats, 
    houses.houses,
    houses.BrickWall,
    houses.TileRoofs
from flats
full outer join houses
    on houses.town=flats.town
    and houses.TileRoofs = flats.TileRoofs
    and houses.BrickWall = flats.BrickWall 
```

# apache - 为插件 [resources:1.1.6] 配置动态方法时出错：无法获取属性“pluginPath”

> ID：12052223
> 
> 赞同：0
> 
> 时间：2012-08-21T09:46:26.370
> 
> 标签：apache, tomcat, grails, grails-plugin

使用 grails 1.3.7 从我的 STS 编译和运行我的项目没有问题。下面列出的错误发生在打包 WAR 并尝试从 apache tomcat 部署它之后。这个问题以前没有发生过，我以前以同样的方式成功地将它部署到 apache tomcat。（使用 apache-tomcat-7.0.26）。

关于错误：在 BootstrapResources.run(BootstrapResources.groovy:23) 第 23 行指向：

def twitterbootstrapPlugin = applicationContext.pluginManager.getGrailsPlugin('twitter-bootstrap')

**第 23 行**--> twitterbootstrapPluginDir = applicationContext.getResource(twitterbootstrapPlugin.pluginPath).file

```
ERROR [pool-2-thread-1] (DefaultGrailsPluginManager.java:818) - Error configuring dynamic methods for plugin [resources:1.1.6]: Cannot get property 'pluginPath' on null object java.lang.NullPointerException: Cannot get property 'pluginPath' on null object
    at BootstrapResources.run(BootstrapResources.groovy:23)
    at org.grails.plugin.resource.module.ModuleDeclarationsFactory$_getModuleDeclarations_closure2.doCall(ModuleDeclarationsFactory.groovy:43)
    at org.grails.plugin.resource.module.ModuleDeclarationsFactory.getModuleDeclarations(ModuleDeclarationsFactory.groovy:38)
    at org.grails.plugin.resource.module.ModuleDeclarationsFactory.getModuleDeclarations(ModuleDeclarationsFactory.groovy)
    at org.grails.plugin.resource.module.ModuleDeclarationsFactory$getModuleDeclarations.call(Unknown Source)
    at org.grails.plugin.resource.ResourceProcessor.loadModules(ResourceProcessor.groovy:720)
    at org.grails.plugin.resource.ResourceProcessor.this$2$loadModules(ResourceProcessor.groovy)
    at org.grails.plugin.resource.ResourceProcessor$this$2$loadModules.callCurrent(Unknown Source)
    at org.grails.plugin.resource.ResourceProcessor.reloadAll(ResourceProcessor.groovy:1056)
    at org.grails.plugin.resource.ResourceProcessor$reloadAll.call(Unknown Source)
    at ResourcesGrailsPlugin$_closure3.doCall(ResourcesGrailsPlugin.groovy:172)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

该项目的最新添加是 spring-security-core，但我不明白这可能是一个问题。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T07:07:58.873

这可能不是这个问题的通用解决方案，但对于我的项目，这是我的 maven 打包问题，不包括成功部署所需的所有插件。

出于某种原因，在我的 BuildConfig.groovy 文件中定义了我的插件，如下所示：

```
plugins{
    build ':whateverplugin:0.1'
    compile ':whateverplugin:0.1'
    runtime ':whateverplugin:0.1'
    test ':whateverplugin:0.1'
} 
```

打包我的项目发出命令时，插件不包括在战争打包中：mvn package -Dmaven.skip.test=true

# java - Java 命令处理链生成器

> ID：12052225
> 
> 赞同：0
> 
> 时间：2012-08-21T09:46:30.997
> 
> 标签：java, frameworks, command, chain

我已经构建了一个由几个模块组成的 Java 命令行应用程序。因此，当您通过命令行启动应用程序时，您必须传递一个参数及其选项，例如：

```
cmd-> java -jar application -startModul1 option1 folderPath 
```

或者

```
cmd-> java -jar application -startModul5 500 folderPath 1222 
```

目前我必须通过启动应用程序并传递请求的参数+选项来启动每个模块。现在就是这样，但后来，当我说 20 个模块时，我想生成一个进程链，其中几个模块一个接一个地启动。

例如，最后我可以只用一个命令从上面的例子中启动两个模块。

```
cmd-> java -jar application -startAllModules option1 500 folderPath 1222 
```

是否有一个框架，我可以在其中使用现有的命令行模块生成这样的进程链？这不应该以编程方式进行，因为我想要某种 xml 文件或其他任何东西，我只是在其中配置一个进程链，并且我可以在其中选择应该使用一个命令运行的模块及其参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:20:05.597

你有没有想过把你的程序变成解释器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:34:34.130

我认为解析你的命令行，了解它必须执行的简单命令（来自你想要使用的 xml）并启动它们就足够了。

如何启动它们？

```
Process p = Runtime.exec(String[] cmdarray) 
```

其中 cmdarray 将包含命令的每个单词：

```
{"java", "-jar", "application", "-startModul1", "option1", "folderPath"} 
```

和

```
p.waitFor(); 
```

如果您希望此线程等到启动的命令结束。

**更新：**非并发

后者是为了以防你想并行运行几个独立的进程。一个用于您需要的命令。

如果您只需要**一个接一个地执行它们，那么**还有一种更简单的方法。当 main 意识到它必须执行多个模块时，它会使用适当的参数调用自己。

```
public static void main(String[] args) throws Exception {
    // parse params
    if (it's a multi module command line) {
       for (each module you have to execute) {
          main(new String[] {"-startModule1", ..., ...}); // call myself with different args
       }
    }
    else {
       // execute what you've been asked for
    }
} 
```

# java - 我如何检查蓝牙 Le（低能量）支持与否？

> ID：12052226
> 
> 赞同：0
> 
> 时间：2012-08-21T09:46:38.383
> 
> 标签：java, android, bluetooth, android-ndk, bluetooth-lowenergy

我想检查我的设备是否支持蓝牙 LE。我该如何检查？

任何 SDK 可用或不可用

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:00:26.963

虽然支持 BLE 的手机很多，但只有 iPhone 和 Motorlla 支持。

您必须完全设置 android sdk，然后使用 API 之一在您的手机 fpr 开发中使用 BLE：

**摩托罗拉 API** [http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/](http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/)

**Broadcom API**（HTC One 和三星 Galaxy s 3） [http://code.google.com/p/broadcom-ble/](http://code.google.com/p/broadcom-ble/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T21:30:41.587

从 API 18 开始，Android 现在已经对此提供了原生支持。

从这里的文档：http: [//developer.android.com/guide/topics/connectivity/bluetooth-le.html](http://developer.android.com/guide/topics/connectivity/bluetooth-le.html)

您现在可以执行以下操作：

```
// Use this check to determine whether BLE is supported on the device. Then
// you can selectively disable BLE-related features.
if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) {
    Toast.makeText(this, R.string.ble_not_supported, Toast.LENGTH_SHORT).show();
    finish();
} 
```

# android - 如何以编程方式在相对布局中的按钮下方对齐 webview？

> ID：12052227
> 
> 赞同：1
> 
> 时间：2012-08-21T09:46:41.617
> 
> 标签：android, android-layout

我有一个扩展RelativeLayout 的类。在这里面我有另一个相对布局，它有一定的高度和宽度，里面有一个 webview 和一个按钮。此按钮位于第二个相对布局的右上角。我根据在开关盒中传递的枚举将 webview 的位置设置在第二个相对布局的顶部、左侧、右侧、底部和中心。我面临的问题是，当我将 webview 设置在顶部时，它与按钮重叠并且按钮不可见。这是我的代码：

```
enum position {

    Top, Bottom, Left, Right, Center
};

public class Sample extends RelativeLayout {
RelativeLayout layout = new RelativeLayout(context);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                width, height);
        addView(layout, params);

        closeButton = new Button(context);
        closeButton.setId(1);
        closeButton.setText("X");
        RelativeLayout.LayoutParams child1Params = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        child1Params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        child1Params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        layout.addView(closeButton, child1Params);

        closeButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                closePressed();
            }
        });

        RelativeLayout.LayoutParams child2Params = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

        switch (position) {

        case Top:

            webView = new WebView(context);
            child2Params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
            layout.addView(webView, child2Params);
            break;

        case Bottom:

            webView = new WebView(context);
            child2Params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
            layout.addView(webView, child2Params);
            break;

        case Left:

            webView = new WebView(context);
            child2Params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            layout.addView(webView, child2Params);
            break;

        case Right:

            webView = new WebView(context);
            child2Params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            layout.addView(webView, child2Params);
            break;

        case Center:

            webView = new WebView(context);
            child2Params.addRule(RelativeLayout.CENTER_VERTICAL);
            layout.addView(webView, child2Params);
            break;

        default:

            webView = new WebView(context);
            child2Params.addRule(RelativeLayout.CENTER_VERTICAL);
            layout.addView(webView, child2Params);
            break;
        }
} 
```

您能否告诉我如何始终设置按钮下方的 webview，使其始终显示在按钮下方并且按钮不隐藏在其下方？谢谢你。

# java - 线程同步

> ID：12052232
> 
> 赞同：-2
> 
> 时间：2012-08-21T09:47:10.977
> 
> 标签：java, multithreading, synchronization

我正在开发一个应用程序，其中有 3 个线程。让我们称它们为 a、b、c。

现在我必须开发这样的东西。

最初 b 等待 a 完成其任务，而 c 等待 b。

一旦“a”完成其任务，它就会通知“b”。'b' 应该醒来。现在'a'进入等待状态。'a' 将等到它得到来自 'c' 的确认。

现在 b 完成它的任务并通知'c'。现在“c”被唤醒，“b”进入等待状态。

现在 c 完成任务并确认“a”。现在'c'去等待。

这是一个循环过程，从 a -> b ， b -> c， c->a 继续

在此周期之间，所有线程访问队列以进行数据传输，即“a”将数据放入队列 q1，“b”取出数据并将其放入另一个队列 q2，“c”从 q2 取出并处理它并返回给“a”

我在实现这个功能时被卡住了。关于如何做到这一点的任何想法？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:46:18.867

**如果您被允许使用队列**（这似乎是家庭作业），那么您可以做一些更优雅的事情。可能由此产生的内部锁定类似于使用信号量的解决方案，但更优雅。

创建 3 个队列，每对进程一个。他们不发送真正的数据，只是开始的信号。

```
Queue<Integer> queueA2B = new BlockingQueue<Integer>();
Queue<Integer> queueB2C = new BlockingQueue<Integer>();
Queue<Integer> queueC2A = new BlockingQueue<Integer>();

// initialize only the queue that *feeds* A:

queueC2A.put(1); 
```

每个进程必须从其队列中取出一个项目，执行其进程并向下一个进程发送信号。以示例 A 为例：

```
while (...) {
   queueC2A.take(); // this will block until there's something in the queue
   // do my stuff
   queueA2B.put(1); // send "signal" to the next process
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:15:26.083

好问题，我写了一个小类，将演示如何使用信号量按顺序运行线程。希望这可以帮助：

```
public class LockingDemo{

    private Semaphore a = new Semaphore(0);
    private Semaphore b = new Semaphore(0);
    private Semaphore c = new Semaphore(1);

    class A implements Runnable{
        @Override
        public void run() {
            try {
                c.acquire(1);
                System.out.println("Doing A");
                a.release(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    class B implements Runnable{
        @Override
        public void run() {
            try{
                a.acquire(1);
                System.out.println("Doing B");
                b.release(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    class C implements Runnable{
        @Override
        public void run() {
            try{
                b.acquire(1);
                System.out.println("Doing C");
                c.release(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public void a() throws InterruptedException{
        new Thread(new A()).start();
    }

    public void b() throws InterruptedException{
        new Thread(new B()).start();
    }

    public void c() throws InterruptedException{
        new Thread(new C()).start();
    }

    public static void main(String[] args) throws InterruptedException {
        LockingDemo ld = new LockingDemo();
        System.out.println("FIRST RUN CALLING B -> A -> C");
        ld.b();
        ld.a();
        ld.c();
        Thread.currentThread().sleep(2000);
        System.out.println("SECOND RUN CALLING C -> B -> A");
        ld.c();
        ld.b();
        ld.a();
    }
} 
```

这是输出

```
FIRST RUN CALLING B -> A -> C
Doing A
Doing B
Doing C
SECOND RUN CALLING C -> B -> A
Doing A
Doing B
Doing C 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:31:12.657

我会用信号量来做。线程需要自己的信号量，完成后释放下一个信号量。当然，您也可以使用监视器 ( `Object#wait() and Object#notify()`) 来执行此操作。为了确保它们以循环方式运行，您只需让它们无限循环运行并等待信号量被填充：

```
import java.util.concurrent.Semaphore;

public class Main {
    private Semaphore a = new Semaphore(1), b = new Semaphore(0), c = new Semaphore(0);

    public class A implements Runnable {
        @Override
        public void run() {
            while (true) {
                try {
                    a.acquire(1);
                    Thread.sleep((long) (Math.random() * 1000));
                    System.out.println("performing task A");
                    b.release(1);
                } catch (InterruptedException e) {}
            }
        }
    }

    public class B implements Runnable {
        @Override
        public void run() {
            while (true) {
                try {
                    b.acquire(1);
                    Thread.sleep((long) (Math.random() * 1000));
                    System.out.println("performing task B");
                    c.release(1);
                } catch (InterruptedException e) {}
            }
        }
    }

    public class C implements Runnable {
        @Override
        public void run() {
            while (true) {
                try {
                    c.acquire(1);
                    Thread.sleep((long) (Math.random() * 1000));
                    System.out.println("performing task C");
                    a.release(1);
                } catch (InterruptedException e) {}
            }
        }
    }

    public void startThreads() {
        new Thread(new A()).start();
        new Thread(new B()).start();
        new Thread(new C()).start();
    }

    public static void main(String[] args) throws InterruptedException {
        Main ld = new Main();
        ld.startThreads();
    }
} 
```

与监视器相比，这个解决方案的一个很酷的地方是，您可以简单地从外部填充一个信号量来启动第二个“线虫”以循环运行。

# java - 使用中心点绘制椭圆（不是左上角）

> ID：12052235
> 
> 赞同：3
> 
> 时间：2012-08-21T09:47:22.677
> 
> 标签：java, graphics2d

我试图找到一个基于中心点绘制椭圆的解决方案，而不是根据 Ellipse2D.Double 的构造函数中指定的左上角。如图所示，椭圆应该具有相同的中心点和比例，这可能吗？

![在此处输入图像描述](../Images/60e25d8d49859ebc9266be4d1a0472a4.png)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T09:55:39.137

如果`(x,y)`是您要使用的中心并且您只能指定左上角，则使用以下内容：

```
private Ellipse2D getEllipseFromCenter(double x, double y, double width, double height)
{
    double newX = x - width / 2.0;
    double newY = y - height / 2.0;

    Ellipse2D ellipse = new Ellipse2D.Double(newX, newY, width, height);

    return ellipse;
} 
```

如果使用中心点以及宽度和高度调用，这会将您的中心点“转换”到左上角并创建一个`Ellipse2D`您想要的位置。

# jquery - 如何在 Jquery 中获取默认关闭的菜单

> ID：12052236
> 
> 赞同：0
> 
> 时间：2012-08-21T09:47:24.653
> 
> 标签：jquery, html

我正在用 Jquery 和 HTMl 制作一个网站，并且我有一个侧面导航菜单。但默认情况下，我正在打开菜单，我希望在单击该菜单时打开该菜单。

```
$("div#mws-navigation ul li a, div#mws-navigation ul li span")
            .bind('click', function (event) {
                if ($(this).next('ul').size() !== 0) {
                    $(this).next('ul').slideToggle('fast', function () {
                        $(this).toggleClass('closed');
                    });
                    event.preventDefault();
                }
            }); 
```

这是代码。当我点击菜单时，我打开和关闭了菜单。但默认情况下，我希望该菜单打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:54:50.380

我认为您可以执行以下操作：

```
 $().(function (){
     var closeMe = $("div#mws-navigation ul li a ul, div#mws-navigation ul li span ul");
     closeMe.size(0);
     closeMe.toggleClass('closed');
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:55:36.407

如果您的代码工作正常，请尝试以下操作：

```
$("div#mws-navigation ul li a, div#mws-navigation ul li span")
            .bind('click', function (event) {
                if ($(this).next('ul').size() !== 0) {
                    $(this).next('ul').slideToggle('fast', function () {
                        $(this).toggleClass('closed');
                    });
                    event.preventDefault();
                }
            }).addClass('closed'); 
```

# java - 使用 python 中的 java 库（java 库的 Python 包装器）

> ID：12052241
> 
> 赞同：4
> 
> 时间：2012-08-21T09:47:31.987
> 
> 标签：java, python

我有一个 jar 形式的 java 库，可用于从文件（excel、xml 等）中提取数据。由于它在 java 中，它只能在 java 应用程序中使用。但我也需要将相同的库用于 python 项目。我已经尝试过从 jvm 获取对象的 py4j 等。但是该库不是可执行文件，不会“运行”。我已经检查了 Jython，但我需要可以从 Python 项目访问该库。我曾考虑过使用自动化的 java 到 python 的翻译器，但我会把它作为最后的手段。

请提出一些我可以做到这一点的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:50:43.020

您可以制作一个线程永不结束的一类 Java 程序，直到您从 Python 发送通知以执行此操作。

这样，lib 将保存在内存中，并可从您的 Python 程序访问。

这个类可能是这样的（添加你需要的库导入/初始化）：

```
public class TestPy {

    private Thread thread;

    public void die() {
        synchronized (thread) {
            thread.interrupt();
        }    
    }

    public TestPy() {
        thread = new Thread(){
            public void run() {
                try {
                    while (!Thread.interrupted()) {
                        Thread.sleep(500);
                    }
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        };
        thread.start();    
    }

    public static void main(String[] args) {
        TestPy tp = new TestPy();
        GatewayServer server = new GatewayServer(tp);
        server.start();
    }
} 
```

您必须启动 java 程序，使用 lib，然后使用 die() 方法在 Python 中杀死 java 程序：

```
gateway = JavaGateway()
do your stuff here using the lib
tp = gateway.entry_point
tp.die() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:56:00.037

您可以编写一个简单的命令行 Java 程序，该程序调用该库并将结果保存为您可以在 Python 中读取的格式，然后您可以使用`os.system`.

另一种选择是找到与Java库具有同等功能的Python库：您可以在Python中读取excel、xml和其他文件，这不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T06:31:14.680

我还没有学习如何通过java构造函数在jar文件中创建java类的新实例，但是偶然发现使用任何java静态方法访问py2j中的java对象非常容易。

[第 1 步：从https://pypi.python.org/pypi/py4j](https://pypi.python.org/pypi/py4j)下载 py4j zip 文件。“py4j0.10.0.jar”在 zip 文件中。

第2步：安装py4j

```
pip install 'D:\Downloads\py4j-0.10.0.zip' 
```

第 3 步：添加 py4j0.10.0.jar 和 the_lib_you_use.jar（如下例中的 owlapi-distribution-3.5.0.jar）以在 eclipse 项目中构建路径

第四步：创建AdditionApplication.java，将AdditionApplication.java的代码复制粘贴到[https://www.py4j.org/](https://www.py4j.org/)，运行Java应用AdditionApplication.java

第 5 步：运行 AdditoinApplication.java 后，在 python 文件中测试示例代码：

```
if __name__ == '__main__':
    pass

from py4j.java_gateway import JavaGateway
gateway = JavaGateway()                   # connect to the JVM

random = gateway.jvm.java.util.Random()   # create a java.util.Random instance
number1 = random.nextInt(10)              # call the Random.nextInt method
number2 = random.nextInt(10)
print(number1,number2)
(2, 7)
addition_app = gateway.entry_point        # get the AdditionApplication instance
addition_app.addition(number1,number2)    # call the addition method

Math = gateway.jvm.java.lang.Math
a = Math.max(4, 6);
print a

IRI = gateway.jvm.org.semanticweb.owlapi.model.IRI

abcIRI = IRI.create('fewf#fe')
print 'abcIRi = ' + str(abcIRI)
print 'abcIRI.getFragment() = ' + abcIRI.getFragment() 
```

控制台上的结果是：

```
(5, 0)
6
abcIRi = fewf#fe
abcIRI.getFragment() = fe 
```

# html - 连接两个不在同一范围内的微数据项

> ID：12052250
> 
> 赞同：1
> 
> 时间：2012-08-21T09:47:57.687
> 
> 标签：html, seo, microdata, rich-snippets

假设我的 html 页面如下所示：

`<div itemscope itemtype="http://schema.org/videoObject">`

`<span itemprop="name">My Video Name</span>`

`</div>`

...页面的其余部分...

`<textarea rows="7" cols="54" readonly="readonly"><?php echo $embedUrl?></textarea>`

我想为 textarea 添加一个 itemprop="embedUrl" 因为它包含我的 videoobject 的嵌入代码，但由于它不在我的 div 中，因为这是页面的设计方式，所以我必须按顺序创建一个新的 videoobject指定。如何扩展原始视频对象的范围以包含文本区域，即使它不在原始 div 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:35:56.767

您的用例就是该`itemref`属性的用途。

你像这样使用它：

```
<div itemscope itemtype="http://schema.org/videoObject" itemref="mytextarea">
    <span itemprop="name">My Video Name</span>
</div> 
```

...页面的其余部分...

```
<textarea rows="7" cols="54" readonly="readonly" 
    id="mytextarea" itemprop="embedUrl"><?php echo $embedUrl?></textarea> 
```

该`itemref`属性必须与该属性位于同一元素上，`itemscope`并采用空格分隔的具有 itemprop 属性的元素的 id 列表。

有关更多信息，请查看[有关微数据的 HTML5 Doctor 文章](http://html5doctor.com/microdata/)

# webmatrix - WebMatrix 2 - msbuild 执行

> ID：12052252
> 
> 赞同：1
> 
> 时间：2012-08-21T09:48:00.413
> 
> 标签：webmatrix, webmatrix-2

是否可以从 webmatrix 中执行 msbuild 脚本中的目标并解析输出以查找 MSBuild 格式的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:19:59.583

正如对 Yishai 答案的评论中所说，我自己编写了该功能。它是开源的，可作为 NuGet 包使用。看看[http://macawnl.github.com/WebMatrix.Executer/](http://macawnl.github.com/WebMatrix.Executer/)。

一些截图： ![输出窗格](../Images/7f411fd1b1a59e57442450ab9e9c8c17.png) ![错误和警告窗格](../Images/032f56a18511312b1194aaf6d8081200.png)

它就像一个初始化调用一样简单，您可以开始执行任何命令或 PowerShell 脚本。

告诉我你对它的想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:53:42.053

最简洁的答案是不。WebMatrix 不支持运行 msbuild 或将错误输入错误列表。

然而，WebMatrix 2.0 引入了可扩展模型，并且一些团队成员正在开发控制台扩展，这将允许您从 WebMatrix 中运行任何命令行（但仍然不能解析和显示结果）。

另一种方法可能是编写将运行 msbuild 脚本的完整扩展，支持将选项卡添加到任务选项卡，您可以在其中创建例如构建错误选项卡，并在那里提供错误。

以下是一些供参考的链接： [定义任务选项卡](http://msdn.microsoft.com/en-us/library/microsoft.webmatrix.extensibility.tasktabitemdescriptor%28v=vs.111%29.aspx) ，[添加任务选项卡](http://msdn.microsoft.com/en-us/library/microsoft.webmatrix.extensibility.editor.ieditortaskpanelservice%28v=vs.111%29)

请注意，要访问任务选项卡，您需要通过扩展类中的 MEF 将其导入，类似于以下代码：

```
[Import(typeof(IEditorTaskPanelService))]
IEditorTaskPanelService TaskPanelService {get; set;} 
```

# mysql - 日期/时间比较操作的排序规则的非法混合

> ID：12052254
> 
> 赞同：2
> 
> 时间：2012-08-21T09:48:17.293
> 
> 标签：mysql

我收到这个错误

> 操作的排序规则的非法混合<=

对于以下 WHERE 子句：

```
time(table1.dt1)<=date_add(table1.tim,interval 60 second) 
```

`dt1 = datetime`,`tim = time`

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:29:05.223

1.  如手册条目中所述[`DATE_ADD()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date-add)：

    > 返回值取决于参数：
    > 
    > *   [`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)如果第一个参数是[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)（或[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)）值，或者如果第一个参数是 a[`DATE`](http://dev.mysql.com/doc/en/datetime.html)并且单位值使用`HOURS`、`MINUTES`或`SECONDS`。
    >     
    >     
    > *   否则字符串。

    在您的情况下，因为`table1.tim`是一个`TIME`值，所以该函数返回一个字符串。

    字符串以 and 给出的字符集和排序规则[`character_set_connection`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_character_set_connection)返回[`collation_connection`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_collation_connection)。

2.  如手册条目中所述[`TIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_time)：

    > 提取时间或日期时间表达式的时间部分***`expr`***并将其作为字符串返回。

    该字符串作为二进制字符串返回（为什么不使用连接字符集和排序规则超出了我的范围——也许是一个错误？）。

3.  正如[在表达式评估中的类型转换](http://dev.mysql.com/doc/en/type-conversion.html)的手册条目中所解释的：

    > 如果比较操作中的两个参数都是字符串，则将它们作为字符串进行比较。

    因此，所进行的比较是字符串比较，但`binary`不能将字符串强制转换为合适的排序规则进行比较（因为它的编码未知）。因此，您正在目睹的错误。

[可以通过显式转换](http://dev.mysql.com/doc/en/cast-functions.html)一个或两个操作数来强制正确进行比较，但我很想重新编写该子句，以便从与类型的比较中隐式进行转换`TIME`：

```
TIME(table1.dt1 - INTERVAL 1 MINUTE) <= table1.tim 
```

# c# - C# 重载枚举以存储值

> ID：12052255
> 
> 赞同：2
> 
> 时间：2012-08-21T09:48:17.980
> 
> 标签：c#, enums, unordered

我目前有一个*枚举*定义如下：

```
public enum ColorEnum { Red, White, Blue, Green }; 
```

这些*枚举*值中的每一个都有一个基础 int 值，我需要能够将其返回给用户。为此，我编写了一个接收*枚举*并返回*int*的函数：

```
public int colorToValue(ColorEnum color)
{
    switch (color)
    {
        case Red:
            return 5;
        case White:
            return 10;
        case Blue:
            return 15;
        case Green:
            return 20;
    }

    return 0;
} 
```

这很好用，但我想知道是否可以通过使用*枚举*本身来存储基础值来简化事情。例如，我可以将*枚举*定义如下：

```
public enum ColorEnum { Red = 5, White = 10, Blue = 15, Green = 20 }; 
```

然后将*枚举*转换为其基础值就像将其转换为 int 一样简单。上述函数简化为：

```
public int colorToValue(ColorEnum color)
{
    return (int)color;
} 
```

当然，*每个*枚举条目的值必须是枚举定义所要求的*int 。*

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:49:49.267

是的，这是完全有效的，并且可以正常工作。枚举完全转换为/从其基础类型转换，并且它们具有规定的值而不仅仅是 1,2,3... 是很常见的。

不过，唯一需要注意的是，反过来也是如此。所以这很好用：

```
ColorEnum evil = (ColorEnum)(-53); // why not... 
```

您的*原始* `colorToValue(evil)`代码将为此返回`0`；您的新代码将返回`-53`。就我个人而言，我可能会抛出一个`ArgumentOutOfRangeException`.

还有一种`Enum.IsDefined`方法，但这涉及对值进行*装箱*。但是如果您*确实*想检查输入是否为预期值，至少您可以简化：

```
public int colorToValue(ColorEnum color)
{
    switch (color)
    {
        case Red:
        case White:
        case Blue:
        case Green:
            return (int)color;
        default:
            return 0; // or throw, whatever
    }
} 
```

# map - 基于多边形的融合表层过滤

> ID：12052258
> 
> 赞同：0
> 
> 时间：2012-08-21T09:48:26.000
> 
> 标签：map, filtering, polygon, layer, google-fusion-tables

我有一个融合表地图示例，此链接中给出了 5 层：http: [//jsfiddle.net/ju2Re/](http://jsfiddle.net/ju2Re/)

我想过滤图层，这样，

首先我使用下拉菜单选择一个图层：Office hierarchy > Zone > Bagalkot

现在我想使用选择框仅在该多边形内选择 220 KV 站。

请任何人帮助。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:28:51.727

我不相信您可以使用融合表本地执行此操作（至少现在不行）。可用于“多边形中的点”分析的唯一查询是： [ST_INTERSECTS(, )](https://developers.google.com/fusiontables/docs/v1/sql-reference#Select) 。

这需要一个几何作为一个参数，但唯一的值是： -

因此，如果您有一个点，您可以使用它来定义一个小圆圈并将 ST_INTERSECTS 与多边形一起使用，但这不适用于多个点。

使用当前表的大小，您可以使用 GViz 从 FusionTables 中检索数据并在浏览器中对其进行分析。

[概念证明](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_point_in_polyA.html)（仅适用于“Geographical Heirarchy”/“District”）

该代码将“包含”方法添加到 google.maps.Polygon，然后遍历标记，如果它们包含在“activePolygon”中，则显示它们。

[概念证明](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_point_in_polyC.html)应该处理所有有数据的案例

# git - 尝试使用 GIT 创建分支时出现异常

> ID：12052260
> 
> 赞同：2
> 
> 时间：2012-08-21T09:48:37.560
> 
> 标签：git

vamshi.krishna@KRISHNA /c/Project Repo/diameter (master) $ git branch develop fatal: Not a valid object name: 'master'。

你能解释一下为什么我会得到这个例外吗？

我在本地创建了一个名为“Project Repo”的存储库

在那个文件夹中我执行了 git init

我创建了直径文件夹并将我所有的 src 文件夹放入了直径文件夹

现在我想把它推到一个名为develop的新分支中，因为这个原因我试图分支名为“Develop”。因为我在master分支中，所以我想创建没有执行的develop分支..

请让我知道创建分支并将我的 coe 推送到开发分支的正确步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:54:07.307

```
git checkout -b develop
git add .
git commit -m 'initial commit'
git push origin develop 
```

并阅读一些 git 教程。你应该知道你在做什么。

**更新**

从已经填充的开发分支重新创建主分支：

```
git checkout master
git merge develop
git push origin master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:09:19.907

注意：您收到该错误消息的原因是，因为您**还没有完成任何提交**，所以没有“主”分支。
一个分支需要一个起点（例如另一个分支的 HEAD）才能被创建。

所以首先创建一个提交（即使是一个空的：）`git commit --allow-empty`。
然后你可以`git checkout -b branch`, `git add everything`, 提交并推送你的新分支。

[在“在 git 中的空项目上创建分支](https://stackoverflow.com/questions/5678699/creating-branches-on-an-empty-project-in-git)”中查看有关该主题的更多信息（在还没有任何提交的情况下创建分支）。

# matlab - 从单个“种子”文件开始生成多个输出文件

> ID：12052261
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:48:44.407
> 
> 标签：matlab, object-oriented-analysis

大家早上好，

有时我想知道是否有可能通过 Matlab 做一些接近我将要描述的事情：

1.  使用外部工具（即 Ansys、Abaqus 或其他软件），我生成了一个列出的“种子”文件（文件扩展名为 .inp、.db 或其他），该文件将用作后续步骤的参考；

2.  从这个种子列出的文件开始，我想得到，比如说，200 个类似的项目文件，与种子相比包​​含一些细微的变化：我的意思是，例如，模拟时间或任何其他特征。

我将举一个简短的例子：我目前正在研究 Bladed，该软件为风能应用执行气动弹性模拟；例如，Blade 让我有机会产生湍流风场。种子代码如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<BladedProject version="4.2.0.46">
    <BladedData dataFormat="project">
        <![CDATA[
VERSION 4.2.0.46
MULTIBODY    1
CALCULATION 3
OPTIONS 0
PROJNAME    
DATE    
ENGINEER    
NOTES   ""
PASSWORD    
MSTART WINDND
SPMODEL 7
NLAT    31
NVER    45
LATDIM   150
VERDIM   220
LONGLS   340.2
LATLS    42.1482
VERTLS   42.1467
XLV  113.4
YLV  66.3117
ZLV  33.1546
XLW  27.72
YLW  25.228
ZLW  50.4542
LAMBDA1  0
CohScale     340.2
COHDEC   12
SCALE    0
GAMMA    0
YDIML    0
N2  0
YDIMS    0
K1MIN    3
LENGTH   1830
STEP     .2233905
UBAR     3
SEED    3
OUTFILE l:\02_turb_dev\50-1\loads\50-1_D116_Validation_adapted_to_AV07\wind\DLC1-2_Kaimal\s1\3.wnd
DIAM     0
HUBHT    0
TURBHTTYPE   0
TURBBOTTOM   0
GUSTAVT  0
GUSTSPEED    0
TOLERANCE    0
DLONGMIN     0
DLONGMAX     0
Z0MIN    0
Z0MAX    0
MAXITER  14
MAXSEED  100
NFILES   1
UseWindShear     0
UseShearToGust   0
WVMODEL 0
MATCHFILE   ''
SPACING  0
SAMPLEFREQ   0
MEANSPEED    0
ILAT     0
IVERT    0
GUSTMETHOD   0
DLONG    0
ILAT     0
IVERT    0
LONGGUST     0
LATGUST  0
VERTGUST     0
iLONGGUST    0
iLATGUST     0
iVERTGUST    0
PEAKINESS    0
MAXFRAN  0
MEND

0WINDND
        ]]>
    </BladedData>
</BladedProject> 
```

通过matlab，我希望能够为不同的风速和随机种子（UBAR，SEED）生成类似的项目文件，并将这些文件保存在预定的子文件夹中。

最后，我很高兴知道你们是否有任何线索/建议可以给我。然后，我的任务就是找到一个合适的编码架构。

我提前感谢大家的支持。

最好的问候，弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:54:15.393

所以这里有一些答案，阅读更多关于 Matlab 文档中使用的函数的信息。下面的代码只是一个示例，但扩展它应该没有任何问题。此代码将写入 5 个带有`UBAR`值的文件`1..5`。我假设，在执行开始时，您当前的工作目录是这 5 个文件驻留的合适位置，至少是暂时的

```
for ubar = 1:5  %using the name of the variable as the iteration variable here
    fname = ['bladefile' num2str(ubar) '.txt'] % filenames will be bladefile1.txt etc
    fid = fopen(fname,'w') % open the file for writing, keep the file id for later reference
    fprintf(fid, '<?xml version="1.0" encoding="ISO-8859-1" ?>\n<BladedProject version="4.2.0.46">\n    <BladedData dataFormat="project">\n      <![CDATA[\n') 
```

此`fprintf`调用写入输出文件（使用文件 id `fid`）；它会写入您的 XML 标头。请注意嵌入`\n`的 s 将在输出文件中转换为新行。

```
 fprintf(fid, 'VERSION 4.2.0.46\n') % note, again, the trailing newline so the next line of output starts on a new line
    ...
    fprintf(fid, 'ubar %i\n', ubar) 
```

此调用`fprintf`将字符串写入`ubar`文件，然后`%i`表示将写入一个整数，并且该整数的值将从变量 中获取`ubar`。

以此类推，直到循环结束

```
 fclose(fid)
end % and loop around 
```

这应该可以帮助您入门，如果您的目标只是一次编写一组输出文件，那么对于一次性使用来说已经足够了。

如果您希望像在任何编程语言中一样重用代码并将其包装成一个函数。例如，您可以编写一个函数，该函数将一个值`ubar`和一个值`seed`作为输入并写入文件，如下所示；

```
for ubar = 1:5
    for seed = 1:7
        write_inp_file(ubar,seed)
    end
end 
```

# php - preg_match "编译失败：缺少)"

> ID：12052263
> 
> 赞同：4
> 
> 时间：2012-08-21T09:49:00.897
> 
> 标签：php, regex, preg-match

这可能是一个愚蠢的错误，但我有一个正则表达式应该匹配什么

*   阿拉拉
*   afkdsf[]
*   afadf43fds["guyish"]

但不适用于以数字开头的字符串

这是代码

```
preg_match('~^[A-Za-z][A-Za-z0-9]*(\[(?P<array>"(?:.*(?:(?<!\\)(?>\\\\)*\").*|.*)+(?:(?<!\\)(?>\\\\)*"))\]|\[\]|)$~',trim($item[0],"    \r"),$matches) 
```

但是当我执行它时，我得到了错误`Compilation failed: missing ) at offset 95`

当我在[这里](http://l2y.eu/dddd4)执行它时它工作正常吗？

代码有什么问题？

**更新**

可读的正则表达式：

```
~
   ^
   [A-Za-z]
   [A-Za-z0-9]*
   (
      \[
      (?P<array>
      "
      (?:
          .*
          (?:
             (?<!\\)
             (?>\\\\)*
             \"
           )
           .*
        |
           .*
        )+
        (?:
           (?<!\\)
           (?>\\\\)*
           "
         )
       )
       \]
     |
     \[\]
     |
   )$
~x 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T09:53:30.757

这个正则表达式很疯狂。我很难相信你真的需要这么复杂的。

无论如何，问题在于 PHP 正在消耗 PHP 字符串的反斜杠。所以你必须用另一个反斜杠来转义所有的反斜杠。

考虑到你已经拥有的反斜杠的数量，你可能会有点疯狂。

另见：[倾斜牙签综合症](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:08:58.360

我同意正则表达式看起来很丑。但是，要让它编译，您只需要更改两个实例

```
(?<!\\)(?>\\\\)* 
```

至

```
(?<!\\\\)(?>\\\\\\\\)* 
```

和两者

但我不相信这个正则表达式能够可靠地工作。我的口味太多了`.*`。

# usb - GStreamer USB 2.0 网络摄像头

> ID：12052265
> 
> 赞同：2
> 
> 时间：2012-08-21T09:49:12.917
> 
> 标签：usb, webcam, gstreamer

您好，我正在尝试在 OpenSuse 11.4 上测试 GStreamer，以显示网络摄像头，但它说

> #gst 启动 v4l2src ！视频缩放！视频/x-raw-yuv，高度=240！xvimagesink
> 
> > 将管道设置为 PAUSED ... 管道处于活动状态，不需要 PREROLL ... 将管道设置为 PLAYING ... 新时钟：GstSystemClock libv4l2：错误出队 buf：没有这样的设备 ... 错误：来自元素 /GstPipeline:pipeline0/ GstV4l2Src：v4l2src0：尝试从设备“/dev/video0”获取视频帧失败。附加调试信息：v4l2src_calls.c(200):gst_v4l2src_grab_frame ():/GstPipeline:pipeline0/GstV4l2Src:v4l2src0: 50 次尝试后失败。设备 /dev/video0\. 系统错误：没有这样的设备执行在 7995625828 ns 后结束。将管道设置为 PAUSED ... 将管道设置为 READY ... libv4l2：关闭流时出错：没有这样的设备
> > 
> > （gst-launch-0.10:19771）：GStreamer-CRITICAL **：无法停用 pad v4l2src0：src，非常糟糕将管道设置为 NULL ... libv4l2：关闭流时出错：没有这样的设备
> > 
> > （gst-launch-0.10:19771）：GStreamer-CRITICAL **：无法停用 pad v4l2src0:src，非常糟糕的释放管道...

感谢帮助。

我也收到了错误信息：

> 将管道设置为 PAUSED ... 错误：管道不想暂停。错误：来自元素 /GstPipeline:pipeline0/GstV4l2Src:v4l2src0：无法在设备“/dev/video0”上获取控件属性。附加调试信息：v4l2_calls.c(267)：gst_v4l2_fill_lists ()：/GstPipeline:pipeline0/GstV4l2Src:v4l2src0：在设备“/dev/video0”上查询控件 9963776 失败。（5 - 输入/输出错误）将管道设置为 NULL ...释放管道 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:49:53.887

获取 v4l-info 的输出将有助于诊断此类问题。还有 GST_DEBUG 的警告/信息级别。无论如何，最好提交一个错误并将日志附加到那里。

除了为了隔离问题，从最简单的管道开始： gst-launch v4l2src ！xvimagesink

# unit-testing - 当 @using 语句包含在剃刀布局中时，为什么 Nancy.Testing 会失败？

> ID：12052267
> 
> 赞同：2
> 
> 时间：2012-08-21T09:49:19.633
> 
> 标签：unit-testing, razor, nancy

在上一个问题[中，Nancy.Testing 是否支持嵌套的 Razor 视图？](https://stackoverflow.com/q/11950126/776476)我概述了在呈现嵌套剃刀布局时 Nancy 单元测试失败时遇到的困难。

经过调查，我现在可以细化该信息。问题与嵌套无关，它很简单：如果您在 razor 布局或视图中包含 @using 语句，那么如果从单元测试访问，Nancy 将无法找到引用的命名空间。

例如：

**主布局**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test</title>    
    </head>
    <body>
        @RenderBody()        
    </body>
</html> 
```

**看法**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@{
    Layout = "Master.cshtml";
}
hello World 
```

如您所料，这很好用。但是，如果我们现在在主布局中添加一些服务器端处理，因此需要 @using 语句，那么单元测试会失败（代码运行正常，只有单元测试失败）：

*错误编译模板：(15, 11) 找不到类型或命名空间名称“uMentor”。*

**带有服务器端代码的主布局**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@using uMentor.Extensions
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>@Model.Title</title>   
    </head>
    <body>
        @{
            var user = Html.GetCurrentUser();
        }
        @RenderBody()        
    </body>
</html> 
```

我已确保我的 web.config（网站项目和单元测试项目）具有正确的 razor 程序集和提到的命名空间：

**网页配置**

```
<configSections>
  <section name="razor" type="Nancy.ViewEngines.Razor.RazorConfigurationSection, Nancy.ViewEngines.Razor" />
</configSections>
<razor disableAutoIncludeModelNamespace="false">
  <assemblies>
    <add assembly="System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <add assembly="Nancy" />
    <add assembly="uMentor" />
  </assemblies>
  <namespaces>
    <add namespace="Nancy" />
    <add namespace="uMentor" />
    <add namespace="uMentor.Domain" />
    <add namespace="uMentor.Extensions" />
  </namespaces>
</razor> 
```

剥离一切，我可以构建最简单的“hello world”视图 -> 布局，其中没有任何内容，没有代码。单元测试通过（响应正文中包含正确的 html）。然后我在视图或布局的顶部添加了一个冗余的@using 语句，测试失败（响应正文包含上面的错误消息）。

**仅使用 @using 的主布局 - 失败**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@using uMentor.Extensions
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test</title>   
    </head>
    <body>
        @RenderBody()        
    </body>
</html> 
```

因此，证据表明，将 @using 语句放入 razor 视图或布局会导致 razor 编译错误，该错误会静默失败，并在响应正文中返回错误消息。只有当您的测试碰巧检查了正文内容时，您才会发现存在问题。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:58:35.200

我的第一个猜测是将配置从 web.config 移动到 app.config。这对我有用，虽然我不知道为什么。

我也喜欢南希，它很棒，但文档真的很烂。因此，当我开发 Nancy 应用程序时，我将它的源代码挂钩到项目中（当然只有相关部分），当我遇到任何问题时，我会进入 Nancy 的源代码并自己找到问题。代码写得很好，很容易阅读。

干杯!

# android - 在Android中运行jaxws2.2 webservice

> ID：12052269
> 
> 赞同：0
> 
> 时间：2012-08-21T09:49:23.487
> 
> 标签：android, eclipse, web-services, jax-ws

我可以调用使用 jaxws2.2 在 java 上创建的 webservice，它运行良好。但是当我在 android 应用程序中调用该 web 服务时，一个错误是：`E/AndroidRuntime(706): java.lang.NoClassDefFoundError: javax.xml.ws.Service`

我的jdk是1.7版本，我的sdk是r20.0.1 eclipse是indigo3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:57:53.847

我认为您必须将 jdk 保持在 1.6 检查此答案[https://stackoverflow.com/a/8578463/582571](https://stackoverflow.com/a/8578463/582571)。

对于那个 javax.xml.ws.service ，我没有在 developer.android 站点中找到它。

您的问题与此[问题与 Sun javax jars 存在 Android 问题](https://stackoverflow.com/q/3135468/582571)类似。

# java - 可序列化类不恢复状态

> ID：12052275
> 
> 赞同：1
> 
> 时间：2012-08-21T09:49:51.520
> 
> 标签：java, serialization, deserialization

**人为错误。下面的代码没有错误**

主持人：请删掉。如果可能的话，请将我的 25 个名声发送给 Peter Lawrey，因为他帮助了我很多，甚至阅读了厚厚的日志数据。谢谢！

嗨，我在使用可序列化数据库时遇到问题。

关闭程序后（通过注销按钮），应该存储数据库。这是代码：

```
FileOutputStream f_out = null;
        try {
            f_out = new FileOutputStream("database.data");
            ObjectOutputStream obj_out = new ObjectOutputStream(f_out);
            obj_out.writeObject(database);
            System.out.println("Stored!");

        } catch (Exception ex) {
            Logger.getLogger(BankMainFrameGUI.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(null, ex.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
        } finally {
            try {
                f_out.close();
            } catch (IOException ex) {
                Logger.getLogger(BankMainFrameGUI.class.getName()).log(Level.SEVERE, null, ex);
                JOptionPane.showMessageDialog(null, ex.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
            }
        }
        new BankMainFrameGUI();
        this.dispose(); 
```

然后使用以下代码在登录时恢复数据库：

```
 try {
        FileInputStream f_in = new FileInputStream("database.data");
        ObjectInputStream obj_in = new ObjectInputStream(f_in);
        database = (BankSystem) obj_in.readObject();
        System.out.println("FOUND!");
    } catch (Exception e) {
        System.out.println("New database!");
        database = new BankSystem();
    } 
```

数据库及其所有内部类已设置为可序列化。但是，重新启动程序后，所有数据都会丢失（客户、帐户、交易）。但是，数据库仍被检测为“找到！” 语句显示在我的编译器的 CLI 中，但不是“新数据库！” 陈述。

我使用了链表和数组列表。

非常感谢！我会升级所有可行的解决方案。

**剧透：很多可能不必要的信息**

**如果需要，提供额外信息：**

```
Main BankSystem() constructor + important variables:

public class BankSystem implements Serializable {
    Transaction transactionManager;
    Identity identityManager;
    Account accountManager;
    dayFirstTransaction dayFirstTransactionManager;

    public BankSystem() {
        transactionManager = new Transaction();
        identityManager = new Identity();
        accountManager = new Account();
        dayFirstTransactionManager = new dayFirstTransaction();
    }
... 
```

LinkedList 节点示例：

```
class Transaction implements Serializable { //Database for TransactionNode
    TransactionNode lastTransaction = null;
    long lastTransactionId = -1;

    //Unchangable location settings defined. Prevents ability to manipulate timestamp by changing computer clock. Acts as a security feature.
    //Timestamps are also finalised to ensure security (prevent manipulation)
    final TimeZone tz = TimeZone.getTimeZone("Singapore");
    final Locale lc = new Locale("en", "SG");
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSS EEEE");
    final private Calendar cal = Calendar.getInstance(tz, lc);

    public long newTransaction(dayFirstTransaction dFTM,
            Client identity, AccountNode account, boolean action, long actionAmount, 
            String location, String comments) throws IOException {
        //Setting timings
        long timeMilli = cal.getTimeInMillis();
        String timeStamp = dateFormat.format(cal.getTime());

        TransactionNode previous = lastTransaction;
        TransactionNode previousUserTransaction = account.GetLastTransaction();

        long transactionId = ++lastTransactionId;

        long initialBalance = account.getBalance();
        long finalBalance;
        if(action) {
            finalBalance = initialBalance + actionAmount;
        } else {
            if(initialBalance < actionAmount) throw new IOException("There is not enough funds present in account " + account.accountId + ". \nAvailable balance: $" + account.getBalance());
            finalBalance = initialBalance - actionAmount;
        }

        lastTransaction = new TransactionNode(previous, previousUserTransaction, timeMilli, timeStamp,  
            transactionId, identity, account, action, actionAmount, 
            initialBalance, finalBalance, location, comments);

        dFTM.checkTransaction(lastTransaction);
        account.setLastTransaction(lastTransaction);
        return transactionId;
    }

        public void newTransaction (dayFirstTransaction dFTM, long timeMilli, String timeStamp,  
            Client identity, AccountNode account, boolean action, long actionAmount, 
            long initialBalance, long finalBalance, String location, String comments) throws IOException {

        TransactionNode previous = lastTransaction;
        TransactionNode previousUserTransaction = account.GetLastTransaction();

        long transactionId = ++lastTransactionId;

        lastTransaction = new TransactionNode(previous, previousUserTransaction, timeMilli, timeStamp,  
            transactionId, identity, account, action, actionAmount, 
            initialBalance, finalBalance, location, comments);

        dFTM.checkTransaction(lastTransaction);
        account.setLastTransaction(lastTransaction);
    }
... 
```

这个链表的节点：

```
class TransactionNode implements Serializable {
    //Node direction pointers
    final private TransactionNode previous;
    final private TransactionNode previousUserTransaction;

    //Declarations
    //For action:
    final public boolean CREDIT = true;
    final public boolean DEBIT = false;

    //Variables for each transaction
    final public long timeMilli; //Automated. For time comparisons
    final public String timeStamp;//Automated. For user reference
    final public long transactionId; // Automated at Transaction LinkedList
    final public Client identity;
    final public AccountNode account;
    final public boolean action; //true: Credit. false:Debit
    final public long actionAmount;
    final public long initialBalance;
    final public long finalBalance;
    final public String location;
    final public String comments;

    public TransactionNode(TransactionNode previous, TransactionNode previousUserTransaction, long timeMilli, String timeStamp,  
            long transactionId, Client identity, AccountNode account, boolean action, long actionAmount, 
            long initialBalance, long finalBalance, String location, String comments) {
        this.previous = previous;
        this.previousUserTransaction = previousUserTransaction;
        this.timeMilli = timeMilli;
        this.timeStamp = timeStamp;
        this.transactionId = transactionId;
        this.identity = identity;
        this.account = account;
        this.action = action;
        this.actionAmount = actionAmount;
        this.initialBalance = initialBalance;
        this.finalBalance = finalBalance;
        this.location = location;
        this.comments = comments;
    }

    //Getters & setters
    public TransactionNode getPreviousTransaction() {
        return previous;
    }

    public TransactionNode getPreviousUserTransaction() {
        return previousUserTransaction;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:52:16.470

你确定你没有触发这个：

```
catch (Exception e) {
   System.out.println("New database!");
   database = new BankSystem();
} 
```

我*至少*会打印出与上述相关的异常和堆栈跟踪，即使它没有被触发。

我还将检查您写出的文件是否正在创建，并且是非零大小。这将为您提供一些关于数据是否正在被写入（当心 - 可能不完整）或未被读取的指标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:54:14.873

最可能的原因是您没有关闭写入的流。ObjectOutputStream 是缓冲的，如果您关闭它正在写入的文件而不是关闭它，您将不会写入所有数据，并且当您尝试读取它时会出现异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:06:54.403

```
} catch (Exception e) {
    System.out.println("New database!");
    database = new BankSystem();
} 
```

这是一个主要问题。这是处理反序列化异常的荒谬方式。而不是记录实际的异常和中止，你是：

1.  *完全忽略*实际异常，这是有关实际问题的*唯一*信息来源。

2.  就好像什么事都没发生过一样。

3.  继续使用空数据库而不是空数据库，这让您的应用程序的其余部分继续运行，就好像除了一个神秘归零的数据库之外没有任何问题一样。

我什至根本不会捕捉到那个异常。我会让它通过构造函数甚至`main()`方法一直冒泡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:02:19.003

1.  关闭流
2.  确保每个类都实现`serializable` 了我们不可见的少数类`Client`，`AccountNode`
3.  在每个异常中使用 printStackTrace() 方法。

# sql-server-2008-r2 - 在 SQL Server 2008 R2 中获取表值函数的结果列

> ID：12052276
> 
> 赞同：9
> 
> 时间：2012-08-21T09:49:58.237
> 
> 标签：sql-server-2008-r2, user-defined-functions

对于常量生成器，我喜欢获取所有表值函数的结果列的元数据（每个表值函数返回的列的名称是什么）。我怎样才能得到它们？我是否必须解析函数的源代码，或者是否有提供此信息的接口？

谢谢你的帮助

克里斯

我用来获取 TVF 的以下查询：

```
SELECT udf.name AS Name, SCHEMA_NAME(udf.schema_id) AS [Schema]
FROM master.sys.databases AS dtb, sys.all_objects AS udf
WHERE dtb.name = DB_NAME() 
AND (udf.type IN ('TF', 'FT')) 
AND SCHEMA_NAME(udf.schema_id) <> 'sys' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T09:53:32.097

此信息可在[`sys.columns`](http://msdn.microsoft.com/en-us/library/ms176106.aspx)

> 为具有列的对象（例如视图或表）的每一列返回一行。以下是具有列的对象类型列表：
> 
> *   表值汇编函数 (FT)
>     
>     
> *   内联表值 SQL 函数 (IF)
>     
>     
> *   内部表 (IT)
>     
>     
> *   系统表 (S)
>     
>     
> *   表值 SQL 函数 (TF)
>     
>     
> *   用户表 (U)
>     
>     
> *   观看次数（五）

```
SELECT *
FROM sys.columns
WHERE object_id=object_id('dbo.YourTVF') 
```

# r - R：向数据框中的序列添加字母

> ID：12052284
> 
> 赞同：2
> 
> 时间：2012-08-21T09:50:26.830
> 
> 标签：r, dataframe, add, sequence

我有一个如下所示的数据框，我想在序列前面添加 4 个字母（CATG）。那可能吗？谢谢你们！

```
 test<-as.data.frame("ACTCAATAAACATAGCT",
   "TTTGACAGTATTGTTTG", 
   "CTTTTCAAGAGTGATGG",
   "GCGACTCCCATCAGTGA", 
   "GCCAGCCACACATCAGG", 
   "TTTATTTAAGAGGAAGA", 
   "GTCTGAAGAATTGTTCA", 
   "ATTCTGATACTAATATA",
   "CTCCACGTCCACCCCAA", 
   "GGGAAGTCTGCCCTGCT") 
```

应该是这样的结果！

```
 CATGACTCAATAAACATAGCT
   CATGTTTGACAGTATTGTTTG 
   CATGCTTTTCAAGAGTGATGG
   CATGGCGACTCCCATCAGTGA 
   CATGGCCAGCCACACATCAGG 
   CATGTTTATTTAAGAGGAAGA 
   CATGGTCTGAAGAATTGTTCA 
   CATGATTCTGATACTAATATA
   CATGCTCCACGTCCACCCCAA 
   CATGGGGAAGTCTGCCCTGCT 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:57:28.180

```
test<-data.frame(V1=c("ACTCAATAAACATAGCT",
   "TTTGACAGTATTGTTTG", 
   "CTTTTCAAGAGTGATGG",
   "GCGACTCCCATCAGTGA", 
   "GCCAGCCACACATCAGG", 
   "TTTATTTAAGAGGAAGA", 
   "GTCTGAAGAATTGTTCA", 
   "ATTCTGATACTAATATA",
   "CTCCACGTCCACCCCAA", 
   "GGGAAGTCTGCCCTGCT"))
> test$V1<-paste0('CATG',test$V1)
> test
                      V1
1  CATGACTCAATAAACATAGCT
2  CATGTTTGACAGTATTGTTTG
3  CATGCTTTTCAAGAGTGATGG
4  CATGGCGACTCCCATCAGTGA
5  CATGGCCAGCCACACATCAGG
6  CATGTTTATTTAAGAGGAAGA
7  CATGGTCTGAAGAATTGTTCA
8  CATGATTCTGATACTAATATA
9  CATGCTCCACGTCCACCCCAA
10 CATGGGGAAGTCTGCCCTGCT 
```

# bash - 如何检查给定路径中是 否存在目录

> ID：12052289
> 
> 赞同：9
> 
> 时间：2012-08-21T09:50:34.110
> 
> 标签：bash, ubuntu, if-statement

我正在创建一个用于备份的简单脚本，并且我想检查给定路径中是​​否存在目录，如下所示：

```
fullPath=/usr/local/webapps/mydir

if mydir exists in my $fullPath

    then back it up
    else give error
fi 
```

我的问题是如何制定 if 语句来检查**$fullPath**变量中是否存在最后一个目录？只是为了澄清一下，对于这种情况，如果我使用 /usr/local 它将是**mydir ，它将是****本地**等。

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-21T09:52:34.660

重复的问题？[检查shell脚本中是否存在目录](https://stackoverflow.com/questions/59838/how-to-check-if-a-directory-exists-in-a-shell-script)

```
if [ -d "$DIRECTORY" ]; then
    # Control will enter here if $DIRECTORY exists.
fi 
```

$DIRECTORY 是路径名

对于您的情况，您可以这样做：

```
if [ -d "$fullPath" ]; then
    then back it up
    else give error
fi 
```

# android - 图像处理

> ID：12052290
> 
> 赞同：0
> 
> 时间：2012-08-21T09:50:35.547
> 
> 标签：android, image-processing, image-manipulation

我想使用一些工具进行图像处理。其中一项要求是能够在“Kaeria”的“Plastic Surgery”游戏中操作图像并通过触摸对其进行更改。怎么做？我在哪里可以找到这样做的库？谢谢，埃亚尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:54:58.200

您可以使用 Android OpenCv 进行图像处理。检查此[链接](http://opencv.org/platforms/android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:01:57.383

android opencv 应该会有所帮助。[**您可以从链接**](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.2/OpenCV-2.4.2-android-sdk.zip/download)下载 sdk 和此链接中可用的配置[**opencv 示例**](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package.html#running-opencv-samples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T17:31:27.383

如果您打算使用 JAVA 包装器，Android OpenCV 在文档上的表现就很差。我建议您学习使用 C++ 实现的 API 的内置函数和结构，然后尝试使用 JAVA API。此外，您最终可以使用 NDK 在 android 平台上运行 NATIVE 代码。

# asp.net-mvc-3 - MVC3 OutputCache 未按预期在服务器和客户端上工作

> ID：12052294
> 
> 赞同：6
> 
> 时间：2012-08-21T09:50:40.553
> 
> 标签：asp.net-mvc-3, http-caching

我在 Microsoft 的 MVC3 框架中使用 OutputCache 属性时遇到问题。

请想象以下控制器操作，它可以用作 AJAX 调用的一部分，以获取基于特定制造商 ID 的产品列表：

```
public JsonResult GetProducts(long manufacturerId)
{
    return Json(this.CreateProductList(manufacturerId), JsonRequestBehavior.AllowGet);
} 
```

我希望将此结果缓存在服务器上以避免进行过多的数据库查询。我可以通过这样配置属性来实现这一点：

```
[OutputCache(Duration = 3600, Location = OutputCacheLocation.Server, VaryByParam = "manufacturerId")] 
```

这如我所料 - 浏览器发出一个初始请求，导致服务器创建并缓存结果，来自相同或不同浏览器的后续请求获取缓存版本。

但是……我也希望浏览器在本地缓存这些结果；如果我先过滤制造商 X，然后 Y 然后返回 X，我不希望它再次请求 X 的产品 - 我希望它只使用其缓存版本。

我可以通过将 OutputCache 更改为此：

```
[OutputCache(Duration = 3600, Location = OutputCacheLocation.Client)] 
```

问题来了：我如何将这些结合起来，以便我可以同时拥有两组行为？我尝试将位置设置为 ServerAndClient，但这只是使其行为与位置为服务器时相同。

我确定问题与我使用 ServerAndClient 获得的“Vary: *”响应标头有关，但我不知道如何摆脱它。

我欢迎对我的意图的合理性发表评论——事实上我没有得到我期望的结果，这让我觉得我可能在某个地方有一些根本性的误解......

非常感谢。

PS：这是在本地开发环境中，来自 VS2010 的 IIS Express。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T09:55:51.977

您可以使用 OutputCacheLocation.Any 指定

> 输出缓存可以位于浏览器客户端（发起请求的地方）、参与请求的代理服务器（或任何其他服务器）或处理请求的服务器上。此值对应于 HttpCacheability.Public 枚举值。

您可能还希望在这些请求的 HTTP 标头中将 Cache-control public 设置为。

编辑

看来，根据您的 Web 服务器的 .Net 版本，您可能需要`Response.Cache.SetOmitVaryStar(true);`在控制器操作中包含您的建议以删除 Vary * 标头。

[.Net 4重大更改发行说明](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770157)中的​​原因的详细信息。

# r - 分割数据和生成季节性箱线图的最优雅方法是什么？

> ID：12052305
> 
> 赞同：6
> 
> 时间：2012-08-21T09:51:22.957
> 
> 标签：r, date, split, boxplot

我想为许多不同的时间序列制作季节性箱线图。我希望下面的代码清楚地说明了我想要做什么。

我现在的问题是，如何用尽可能少的代码行以最优雅的方式做到这一点。我可以使用函数“子集”为每个月创建一个新对象，然后绘制它，但这似乎不是很优雅。我尝试使用“拆分”功能，但我不知道如何从那里开始。

如果我的问题没有明确说明，请告诉我或对其进行编辑以使其更清楚。

非常感谢任何直接帮助或与其他网站/帖子的链接。谢谢你的时间。

这是代码：

```
## Create Data
Time <- seq(as.Date("2003/8/6"), as.Date("2011/8/5"), by = "2 weeks")
data <- rnorm(209, mean = 15, sd = 1)
DF <- data.frame(Time = Time, Data = data)
DF[,3] <- as.numeric(format(DF$Time, "%m"))
colnames(DF)[3] <- "Month"

## Create subsets
Jan <- subset(DF, Month == 1)
Feb <- subset(DF, Month == 2)
Mar <- subset(DF, Month == 3)
Apr <- subset(DF, Month == 4)

## Create boxplot
months <- c("Jan", "Feb", "Mar", "Apr")
boxplot(Jan$Data, Feb$Data, Mar$Data, Apr$Data, ylab = "Data", xlab = "Months", names = months)

## Try with "split" function
DF.split <- split(DF, DF$Month)
head(DF.split) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T10:16:14.120

使用'ggplot2'（和@James'月份名称，谢谢！）：

```
DF$month <- factor(strftime(DF$Time,"%b"),levels=month.abb)
ggplot(DF, aes(x=,month, y=Data)) +
    geom_boxplot() 
```

![箱形图](../Images/c42c550b2478d387559d75f45746deb4.png)

（顺便说一句：请注意，在“ggplot2”*中，上下“铰链”对应于第一个和第三个四分位数（第 25 个和第 7 个百分位数）。这与 boxplot 函数使用的方法略有不同，并且可能在小样本。* ” - 见[文档](http://had.co.nz/ggplot2/docs/geom_boxplot.html)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T10:06:48.440

您最好直接使用`"%b"`格式选择月份名称，并使用有序因子和公式接口`boxplot`：

```
DF$month <- factor(strftime(DF$Time,"%b"),levels=month.abb)
boxplot(Data~month,DF) 
```

![在此处输入图像描述](../Images/292d201eebb92e77ddb0185d3f3ff575.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T20:58:09.057

**要在任何区域设置**中将月份设置为有序因子，请使用可以在帮助页面中找到的技巧`?month.abb`：

```
Sys.setlocale("LC_TIME", "German_Germany")
DF$month <- factor(format(DF$Time, "%b"), levels=format(ISOdate(2000, 1:12, 1), "%b")) 
```

你也可以把它画进去`lattice`：

```
require(lattice)
bwplot(Data~month, DF, pch="|") # set pch to nice line instead of point 
```

![格子箱线图](../Images/6697e7d5a2de5f47aa0492f1f35162c7.png)

# django - 无法在 django 中输出 cookie 值

> ID：12052308
> 
> 赞同：1
> 
> 时间：2012-08-21T09:51:37.000
> 
> 标签：django

我的观点.py

```
def search(request):
    res = HttpResponse('Setting Response');
    res.set_cookie("name","abcd")
    return render_to_response("search.html", {"res":res}) 
```

我的 search.html

```
<html>
<body>
<h1>{{res.COOKIES.name}}</h1>
</body>
</html> 
```

甚至`{{request.COOKIES.name}}`也不行。我无法获得`"abcd"`它提供的价值`" "`（空字符串）

请在这方面帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:23:40.547

尝试这个：

```
from django.shortcuts import render
...
return render(request, "search.html", {"res":res}) 
```

所以请求实例将在模板上可用

**更新：**

如果您的目标是设置 cookie，然后在模板上检索它，您可以执行以下操作：

```
from django.shortcuts import render

def search(request):
    response = render(request, "search.html")
    # render function returns a HttpResponse object
    response.set_cookie("name","abcd")
    return response 
```

然后在模板上：

> {{ request.COOKIES.name }}

解决方案来自[这里](https://stackoverflow.com/questions/4981601/django-use-render-to-response-and-set-cookie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:02:25.010

request 变量不会自动用于您的视图。

```
return render_to_response("search.html", {"request":request}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:59:11.173

您应该尝试在视图中获取 cookie 并传入模板或将`request`变量传递给模板。

另一种方法是启用[请求上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)，以便该`request`变量在模板中默认可用。

# eclipse - 不要在 Eclipse 的 TFS 插件中自动挂起一些添加

> ID：12052310
> 
> 赞同：1
> 
> 时间：2012-08-21T09:51:40.570
> 
> 标签：eclipse, tfs, team-explorer-everywhere

我正在为 Eclipse 使用 TFS 插件，我想让我`\bin`的（它是一个 Android 项目）文件夹的更改不会反映在 TFS 中，我们可以将其称为“解除绑定”或“使其脱机”。Eclipse TFS插件可以做到吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:16:47.413

大多数源代码控制提供程序（包括 TFS）使用的术语被*忽略*。

Eclipse 的 TFS 插件将遵循 Eclipse 的“派生资源”设置，即从项目资源的其余部分构建的资源。也就是说，`bin`Eclipse 设置应该忽略您的目录。您可能希望仔细检查您的项目配置，以确保您的文件系统布局反映了 Eclipse 认为的项目布局。（例如，如果您有一个 maven 样式的项目配置并专门使用 maven 来生成构建，但您不使用它`mvn`来设置您的 Eclipse 项目和工作区，则可能会发生这种情况。）

但是，您也可以手动完成此操作，因为 Eclipse 的 TFS 插件与大多数其他源代码控制提供程序一样有一个*忽略文件。*

在 Eclipse 包资源管理器中，您只需右键单击您的`bin`文件夹并选择 Team > Ignore。这将创建适当的忽略文件并为您的整个`bin`文件夹添加一个条目（递归）。

您也可以手动更新文件，在 TFS 2010 及之前的版本中，此文件[`.tpignore`是](http://msdn.microsoft.com/en-us/library/gg413275%28v=vs.100%29.aspx). 在 TFS 2012 中，借助本地工作区，Visual Studio 和 Eclipse 的 TFS 插件已对新[`.tfignore`文件](http://msdn.microsoft.com/en-us/library/tfs/jj155786.aspx).

# c# - 如何从 C#.net 发布带有参数的请求

> ID：12052318
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:52:05.997
> 
> 标签：c#, asp.net, rest

我想使用 POST 和 webrequest 在服务器上发布请求？发布时我还需要传递参数吗？发布时如何传递参数？

我怎样才能做到这一点？？？

示例代码...

```
 string requestBody = string.Empty;
            WebRequest request = WebRequest.Create("myursl");
            request.ContentType = "application/x-www-form-urlencoded";

            request.Method = "POST";

            //request.ContentLength = byte sXML.Length;
            //System.IO.StreamWriter sw = new System.IO.StreamWriter(request.GetRequestStream());
            //sw.Write(sXML);
            //sw.Close();
            HttpWebResponse res = (HttpWebResponse)request.GetResponse();

            if (res != null)
            {
                using (StreamReader sr = new StreamReader(res.GetResponseStream(), true))
                {
                    ReturnBody = sr.ReadToEnd();
                    StringBuilder s = new StringBuilder();
                    s.Append(ReturnBody);
                    sr.Close();
                }
            }
            if (ReturnBody != null)
            {

                if (res.StatusCode == HttpStatusCode.OK)
                {
                    //deserialize code for xml and get the output here
                   string s =ReturnBody;
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:09:22.603

```
NameValueCollection keyValues = new NameValueCollection();
keyValues["key1"] = "value1";
keyValues["key2"] = "value2";

using (var wc = new WebClient())
{
    byte[] result = wc.UploadValues(url,keyValues);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:55:58.697

您可以尝试使用此代码

```
string parameters = "sample=<value>&other=<value>"; 
byte[] stream= Encoding.UTF8.GetBytes(parameters);
request.ContentLength = stream.Length;  

Stream newStream=webRequest.GetRequestStream();

newStream.Write(stream,0,stream.Length);
newStream.Close();
WebResponse webResponse = request.GetResponse(); 
```

# comments - Soundcloud 曲目评论按时间戳排序

> ID：12052319
> 
> 赞同：2
> 
> 时间：2012-08-21T09:52:15.940
> 
> 标签：comments, soundcloud

有没有办法获得`/tracks/{id}/comments`由 订购的曲目`timestamp asc/desc`？默认顺序是按`created_at`属性降序排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:29:47.487

我不知道 soundcloud 是否提供对请求进行排序的可能性，但您可以对自然顺序字符串的[usort()](http://www.php.net/manual/en/function.usort.php)和[strnatcmp()请求的响应进行排序。](http://php.net/manual/en/function.strnatcmp.php)
像这样：

```
function orderBy($data, $field) { 
        $code = "return strnatcmp(\$a['$field'], \$b['$field']);";
        usort($data, create_function('$a,$b', $code)); 
        return $data; 
} 

// Get comments
$comments = json_decode($soundcloud->get('tracks/{id_track}/comments'), true);

// Order comments by 'timestamp'
$data = orderBy($comments, 'timestamp'); 
```

# android - Android：在启动应用程序时显示布局一秒钟

> ID：12052321
> 
> 赞同：0
> 
> 时间：2012-08-21T09:52:15.933
> 
> 标签：android, android-layout, oncreate, kill-process

如果应用程序尚未存储在内存中并且它需要执行 onCreate 方法（在 kill 之后），我想在应用程序启动时显示布局（本质上是图像）几秒钟。然后我想加载应用程序的基本布局。

有什么想法吗？有人可以发布一些代码吗？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:53:56.203

我想，您正在寻找启动画面。

检查以下链接。

[http://p-xr.com/android-tutorial-how-to-make-a-basic-splash-screen/](http://p-xr.com/android-tutorial-how-to-make-a-basic-splash-screen/)

> 以下代码将向您展示如何为您的 Android 应用程序创建一个基本的闪屏，该闪屏将停留 5 秒。如果我们不想等待，我们可以点击屏幕直接进入下一个活动。源项目位于教程的底部。

# jquery - jQuery创建输入字段并设置焦点

> ID：12052322
> 
> 赞同：0
> 
> 时间：2012-08-21T09:52:20.600
> 
> 标签：jquery, html, html-lists

我试着：

*   创建一个带有输入字段的新列表项
*   将焦点放在那个新领域

    ```
    $("#newList").click(function () {
        $('li.divider').before('<li class="newListName"><input id="newListNameInput" /></li>',function() {
            $('#newListNameInput').focus();
        });
    }); 
    ```

新的列表项被创建，但没有焦点。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:55:24.297

[before()](http://api.jquery.com/before/)是同步的，不接受回调参数。你只需要写：

```
$("#newList").click(function() {
    $('li.divider').before('<li class="newListName"><input id="newListNameInput" /></li>');
    $('#newListNameInput').focus();
}); 
```

或者，如果您想利用链接：

```
$("#newList").click(function() {
    $('<li class="newListName"><input id="newListNameInput" /></li>')
        .insertBefore("li.divider").find("input").focus();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:59:43.380

试试这个[http://jsfiddle.net/CWqxk/](http://jsfiddle.net/CWqxk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:54:00.087

没有处理程序作为 的第二个参数`before`，因此只需使用：

```
$("#newList").click(function() {
    $('li.divider').before('<li class="newListName"><input id="newListNameInput" /></li>');
    $('#newListNameInput').focus();
}); 
```

*`input`但是，如果您添加许多新元素，请注意 ID 的重复。也许使用类更好。*

**演示：http:** [//jsfiddle.net/CANWE/](http://jsfiddle.net/CANWE/)

# javafx-2 - 在 FXML 中包含标签

> ID：12052325
> 
> 赞同：1
> 
> 时间：2012-08-21T09:52:26.920
> 
> 标签：javafx-2, fxml

我想知道是否有办法包含在同一个 FXML 文件中定义的代码（标签）。我想要的是多次包含相同的图像而不必复制粘贴所有属性：

```
<HBox>
  <Label translateY="25" alignment="center"  text="">
    <graphic>
      <ImageView fitWidth="100" preserveRatio="true" smooth="true">
        <image>
          <Image url="arrow_right.png"/>
        </image>
      </ImageView>
    </graphic>
  </Label>
</HBox> 
```

我想要类似的东西：

```
<fx:define>
  <Label fx:id="myLabel" translateY="25" alignment="center"  text="">
    <graphic>
      <ImageView fitWidth="100" preserveRatio="true" smooth="true">
        <image>
          <Image url="arrow_right.png"/>
        </image>
      </ImageView>
    </graphic>
  </Label>
</fx:define>

<HBox>
    <fx:include source="$myLabel" />
</HBox> 
```

我已阅读此答案[https://stackoverflow.com/a/8490764/1606953](https://stackoverflow.com/a/8490764/1606953)，但它涵盖了包含外部源（=其他文件）。我对只包含一小段代码更感兴趣

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:42:42.520

<fx:include> 绝对是处理这个问题的最佳方式。您不能在此处使用 <fx:define> 因为“myLabel”只能有一个父节点。通过将标签放在包含中，您将能够创建内容的多个实例，每个实例都可以有自己的父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:53:02.160

我（几乎）找到了我想要的东西：

我的-tab.fxml：

```
<HBox>
  <fx:define>
    <Label fx:id="arrow" alignment="center"  text="" maxWidth="Infinity" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
     <graphic>
        <ImageView fitWidth="100" preserveRatio="true" smooth="true">
           <image>
             <Image url="peet/resources/images/arrow_right.png"/>
           </image>
        </ImageView>
     </graphic>
    </Label>
  </fx:define>
  <children>
    <Button wrapText="true" text="AAA" maxHeight="Infinity" maxWidth="Infinity"  VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS" /> 
    <fx:reference source="arrow" />                              
    <Button text="BBB" wrapText="true" minHeight="150" minWidth="100" maxWidth="Infinity" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS" /> 
    <fx:reference source="arrow" />
    <Button text="CCC" wrapText="true" minHeight="150" minWidth="100" maxWidth="Infinity" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS" /> 
    <fx:reference source="arrow" />
    <Button  text="DDD" wrapText="true" minHeight="150" minWidth="100" maxWidth="Infinity" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS" /> 
  </children>       
</HBox> 
```

这仅在我们仅进行 1 次引用时才有效。如果我们进行 3 次引用，就像这里一样，我们会得到这个异常：

```
Children: duplicate children added: parent = HBox@2df02fde
file:/C:/.../my-tab.fxml:48
file:/C:/.../Xxx.jar!/xxx/client/MainTabs.fxml:16
  at javafx.scene.Parent$1.onProposedChange(Parent.java:307)
  at com.sun.javafx.collections.VetoableObservableList.add(VetoableObservableList.java:165)
  at com.sun.javafx.collections.ObservableListWrapper.add(ObservableListWrapper.java:144)
  at javafx.fxml.FXMLLoader$Element.add(FXMLLoader.java:130)
  at javafx.fxml.FXMLLoader$PropertyElement.add(FXMLLoader.java:1179)
  at javafx.fxml.FXMLLoader$ValueElement.processEndElement(FXMLLoader.java:609)
  at javafx.fxml.FXMLLoader.processEndElement(FXMLLoader.java:2430)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2136)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
  at javafx.fxml.FXMLLoader$IncludeElement.constructValue(FXMLLoader.java:937)
  at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:567)
  at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2742)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2694)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2683)
  at xxx.client.XXX.start(XXX.java:21)
  at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
  at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
  at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
  at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
  at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
  at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:67)
  at java.lang.Thread.run(Thread.java:722) 
```

有什么选择吗？

# oracle - Oracle EBS：获取配置文件值

> ID：12052329
> 
> 赞同：1
> 
> 时间：2012-08-21T09:52:51.663
> 
> 标签：oracle, oracle-apps

我正在使用 Oracle R12 应用程序。有人可以提出一些查询来识别`Profile names and Profile values`与所选特定产品/项目相关的信息吗？

我尝试使用

```
SELECT *
FROM fnd_profile_options_vl po,
fnd_profile_option_values pov,
fnd_user usr,
fnd_application app,
fnd_responsibility rsp,
fnd_nodes svr,
hr_operating_units org
WHERE 1 = 1
AND pov.application_id = po.application_id
AND pov.profile_option_id = po.profile_option_id
AND usr.user_id(+) = pov.level_value
AND rsp.application_id(+) = pov.level_value_application_id
AND rsp.responsibility_id(+) = pov.level_value
AND app.application_id(+) = pov.level_value
AND svr.node_id(+) = pov.level_value
AND org.organization_id(+) = pov.level_value 
```

它将返回所有配置文件值。但是如何识别我选择的项目/产品的配置文件值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:28:39.340

查看我的帖子： http: [//blog.csdn.net/pan_tian/article/details/7652968](http://blog.csdn.net/pan_tian/article/details/7652968)

```
1\.    List E-Business Suite Profile Option Values For All Levels
2\.    How to Search all of the Profile Options for a Specific Value
3\.    How To Find All Users With A Particular Profile Option Set 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:45:00.573

您是指实际 Oracle 产品本身的配置文件，还是从您的实施中的实际表中查询这些值？如果它是一个特定的实现，您能否说明您正在使用哪些列？

请核实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T17:43:26.627

配置文件选项有几个要搜索的内容： - 级别（站点、职责，...） - 他们的技术名称 (ABCDEFGH) - 他们的用户名（设置为...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-15T15:34:01.863

下面的 SQL for Blitz Report [FND Profile Option Values](https://www.enginatics.com/reports/fnd-profile-option-values/)应该可以解决问题。您还可以在报告页面上找到针对不同查询场景的附加 where 子句，例如通过配置文件选项值。

[SQL 还显示通过自定义函数xxen_util.display_profile_option_value()](https://www.enginatics.com/xxen_util/true)转换的可见配置文件选项值。

```
select
fav0.application_name,
fpo.user_profile_option_name,
decode(fpov.level_id,10001,'Site',10002,'Application', 10003,'Responsibility', 10004,'User', 10005,'Server',10006,'Operating Unit',
10007,decode(to_char(fpov.level_value2),'-1','Responsibility',decode(to_char(fpov.level_value),'-1','Server','Server+Resp'))
) level_,
decode(fpov.level_id,10001,null,10002,fav.application_name,10003,frv.responsibility_name,10004,fu.user_name||nvl2(nvl(fu.description,fu.email_address),': '||nvl(fu.description,fu.email_address),null),10005,fn.node_name,10006,haou.name,
10007,decode(to_char(fpov.level_value2),'-1',frv.responsibility_name,decode(to_char(fpov.level_value),'-1',fn.node_name,fn.node_name||' - '||frv.responsibility_name))
) level_name,
xxen_util.display_profile_option_value(fpo.application_id,fpo.profile_option_id,fpov.profile_option_value) profile_option_value,
fpov.last_update_date,
fu2.user_name||nvl2(nvl(fu2.description,fu2.email_address),': '||nvl(fu2.description,fu2.email_address),null) last_updated_by,
fpov.profile_option_value system_profile_option_value,
fpo.profile_option_name system_profile_option_name,
fpo.profile_option_id,
fpov.level_value,
fpov.level_value2
from
fnd_application_vl fav0,
fnd_profile_options_vl fpo,
fnd_profile_option_values fpov,
fnd_responsibility_vl frv,
fnd_user fu,
fnd_application_vl fav,
fnd_user fu2,
hr_all_organization_units haou,
fnd_nodes fn
where
fav0.application_name=:application_name and
1=1 and
fav0.application_id=fpo.application_id and
fpo.profile_option_id=fpov.profile_option_id and
fpo.application_id=fpov.application_id and
decode(fpov.level_id,10002,fpov.level_value)=fav.application_id(+) and
case when fpov.level_id in (10003,10007) then fpov.level_value end=frv.responsibility_id(+) and
case when fpov.level_id in (10003,10007) then fpov.level_value_application_id end=frv.application_id(+) and
decode(fpov.level_id,10004,fpov.level_value)=fu.user_id(+) and
decode(fpov.level_id,10005,fpov.level_value,10007,fpov.level_value2)=fn.node_id(+) and
decode(fpov.level_id,10006,fpov.level_value)=haou.organization_id(+) and
fpov.last_updated_by=fu2.user_id
order by
fpo.user_profile_option_name,
fpov.level_id,
decode(fpov.level_id,10001,null,10002,fav.application_name, 10003,frv.responsibility_name, 10004,fu.user_name||nvl2(nvl(fu.description,fu.email_address),': '||nvl(fu.description,fu.email_address),null), 10005,fn.node_name,10006,haou.name) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-24T19:39:11.540

```
 SELECT fpo.profile_option_name SHORT_NAME,
         fpot.user_profile_option_name NAME,
         DECODE (fpov.level_id,
                 10001, 'Site',
                 10002, 'Application',
                 10003, 'Responsibility',
                 10004, 'User',
                 10005, 'Server',
                 'UnDef')
            LEVEL_SET,
         DECODE (TO_CHAR (fpov.level_id),
                 '10001', '',
                 '10002', fap.application_short_name,
                 '10003', frsp.responsibility_key,
                 '10005', fnod.node_name,
                 '10006', hou.name,
                 '10004', fu.user_name,
                 'UnDef')
            "CONTEXT",
         fpov.profile_option_value VALUE
    FROM fnd_profile_options fpo,
         fnd_profile_option_values fpov,
         fnd_profile_options_tl fpot,
         fnd_user fu,
         fnd_application fap,
         fnd_responsibility frsp,
         fnd_nodes fnod,
         hr_operating_units hou
   WHERE     fpo.profile_option_id = fpov.profile_option_id(+)
         AND fpo.profile_option_name = fpot.profile_option_name
         AND fu.user_id(+) = fpov.level_value
         AND frsp.application_id(+) = fpov.level_value_application_id
         AND frsp.responsibility_id(+) = fpov.level_value
         AND fap.application_id(+) = fpov.level_value
         AND fnod.node_id(+) = fpov.level_value
         AND hou.organization_id(+) = fpov.level_value
         AND fpot.user_profile_option_name IN ('&User_Profile_Option_Name')
ORDER BY short_name;

      SELECT fpo.profile_option_name SHORT_NAME,
         fpot.user_profile_option_name NAME,
         DECODE (fpov.level_id,
                 10001, 'Site',
                 10002, 'Application',
                 10003, 'Responsibility',
                 10004, 'User',
                 10005, 'Server',
                 'UnDef')
            LEVEL_SET,
         DECODE (TO_CHAR (fpov.level_id),
                 '10001', '',
                 '10002', fap.application_short_name,
                 '10003', frsp.responsibility_key,
                 '10005', fnod.node_name,
                 '10006', hou.name,
                 '10004', fu.user_name,
                 'UnDef')
            "CONTEXT",
         fpov.profile_option_value VALUE
    FROM fnd_profile_options fpo,
         fnd_profile_option_values fpov,
         fnd_profile_options_tl fpot,
         fnd_user fu,
         fnd_application fap,
         fnd_responsibility frsp,
         fnd_nodes fnod,
         hr_operating_units hou
   WHERE     fpo.profile_option_id = fpov.profile_option_id(+)
         AND fpo.profile_option_name = fpot.profile_option_name
         AND fu.user_id(+) = fpov.level_value
         AND frsp.application_id(+) = fpov.level_value_application_id
         AND frsp.responsibility_id(+) = fpov.level_value
         AND fap.application_id(+) = fpov.level_value
         AND fnod.node_id(+) = fpov.level_value
         AND hou.organization_id(+) = fpov.level_value
         AND fpot.user_profile_option_name IN ('&User_Profile_Option_Name')
ORDER BY short_name;

enter code here 
```

# android - ListView 指示更多可滚动项目

> ID：12052332
> 
> 赞同：2
> 
> 时间：2012-08-21T09:52:57.697
> 
> 标签：android, listview, android-listview, scrollview

我要做的就是当页面有更多数据时，页面底部应该有一些指示，如三个点或类似的东西，以便用户知道有更多记录并滚动它

![在此处输入图像描述](../Images/00e5787cab4fc70afe552b149a2bb6cc.png)

这里在页面底部没有迹象表明还有更多记录。当有更多数据时，我想添加该指示签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:12:18.050

A possible solution is to add a View (a layout with a textView or ImageView) beneath your ListView:

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView>
<LinearLayout
    android:id="@+id/viewid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0" /> 
```

The weights are important to show both components. After that, implements the listView's onScrollListener.

```
setOnScrollListener(new OnScrollListener() {
    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        //get the showed item num, and if its equal to total, you can hide the view
        //get a reference to your viewid
        viewid.setVisibility(View.GONE);
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }
}); 
```

When it reaches the last line, setVisibility(View.GONE) for the bottom View. If you want to show this View again, when user scrolls up, modify the code. Of course, you can use aother layout, a textView, or something else.

**UPDATE**

I played with the a layout a little bit, and there is an other solution for your layout file, where the bottom View is overlaying the listView, so the removing of this textView is smooth.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>
    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="5dp"
        android:background="#ffffff"
        android:layout_alignParentBottom="true"
        android:text="..." />
</RelativeLayout> 
```

# javascript - jquery中的鼠标悬停元素

> ID：12052344
> 
> 赞同：0
> 
> 时间：2012-08-21T09:53:31.257
> 
> 标签：javascript, jquery

我有这样的html代码：

```
<div class="tree-node" node-id="71408acd-931e-42c8-98fa-393271006cf9" style="cursor: pointer;">
<span class="tree-hit tree-collapsed"></span>
<span class="tree-icon tree-folder icon-hospital"></span>
<span class="tree-checkbox tree-checkbox1"></span>
<span class="tree-title">
<a href="/Structure/EditHospital/71408acd-931e-42c8-98fa-393271006cf9">Hospital1</a>
(1/1)
</span>
</div> 
```

我想在鼠标悬停此元素时更改光标，`pointer`如果 `<span class="tree-title">`containse`a href`则显示`default`，如果否则显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:55:50.037

```
$('.tree-title').each(function () {
   if ($(this).find('a[href]').length) {
      $(this).css('cursor', 'pointer');
   }
}); 
```

这是一个[演示](http://jsfiddle.net/cQ7xC/)

# ios - 在色彩空间之间转换 CGColors 的正确方法

> ID：12052349
> 
> 赞同：27
> 
> 时间：2012-08-21T09:53:44.080
> 
> 标签：ios, macos, colors, core-graphics, cgcolorspace

有几个问题询问有关在 Apple 平台上的颜色空间之间转换颜色的问题。不幸的是，答案通常涉及`NSColor`或`UIColor`——不可在 OS X 和 iOS 上互换使用的不可移植的 Objective-C 类。

所以我想问一个非常具体的问题，我相信**肯定**有一个很好的答案。我简直不敢相信苹果不会预见到这种需求。

如何`CGColor`以一种通用的方式从一种颜色空间（例如单色）转换为另一种颜色空间（例如 RGB），支持所有`CGColorSpace`类型，同时仅使用可移植的 Core Graphics 功能？

* * *

一些上下文。我需要将在线服务提供的值与存储在`UIColor`. iOS5之前的提取RGB分量的正确方法，最后介绍了方法`-[UIColor getRed:green:blue:alpha:]`，就是使用`CGColorGetComponents()`. 然后我将此颜色与从在线服务获取的颜色相乘。如果`+[UIColor grayColor]`用于生成`UIColor`. 意思是，我需要将颜色从灰度颜色空间转换为 RGB。在这种情况下，这很容易。提供其他一些色彩空间呢？或者如果在理论上的未来场景中我只想处理单个像素的颜色怎么办？

有一个建议是我将一个像素绘制到位图上下文中，然后读取这个像素。这太疯狂了，我希望这不是唯一的方法。显然绘图方法可以弄清楚如何进行转换；我们如何在不创建位图上下文仅在其中绘制像素的情况下利用它？

* * *

补充研究：

*   [这篇](http://web.archive.org/web/20090223205518/http://ofcodeandmen.poltras.com:80/)关于颜色转换的文章，除了`UIColor`'s undocumented/private method之外`-styleString`，更有趣的还提到了 undocumented `CGColorTransform`s。
*   [WebKit 的 ColorCG.cpp](http://www.opensource.apple.com/source/WebCore/WebCore-737.5/platform/graphics/cg/ColorCG.cpp)建议有一个名为`CoreGraphics/CGColorTransform.h`. 不幸的是，这个标题不存在，至少在 Mountain Lion 上不存在。苹果为什么要隐藏这些 API？
*   我发现提到 s 的唯一其他合理资源`CGColorTransform`是 FreeQuartz，它是 Core Graphics 的免费/开源重新实现。

向 Apple 提交了雷达 #12141580，以打开和记录`CGColorTransform`. 不过，我并没有屏住呼吸，所以如果有其他明智的建议，我会全神贯注。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-02-17T18:39:50.953

Apple 在 iOS 9 和 macOS 10.11 中添加了这个 API：

*   对象：`CGColorCreateCopyByMatchingToColorSpace`
*   迅速：`CGColor.converted(to:intent:options:)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-24T20:29:17.993

Apple 对我要求公开的 rdar #12141580 的官方回应`CGColorTransform`：

> 非常感谢您的反馈。
> 
> 工程根据以下信息确定行为不会改变：
> 
> 使用颜色同步。
> 
> 如果您对此问题的解决有疑问，请使用该信息更新您的错误报告。
> 
> 我们现在关闭此错误报告。
> 
> 请务必定期检查新的 Apple 版本，了解可能影响此问题的任何更新。

不管是谁写了这个回复，显然都觉得有必要详细解释这个决定。尤其是建议使用高度复杂的 API（例如 ColorSync）的决定。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T23:08:47.093

该问题明确表示他们希望避免在仅为转换颜色而创建的位图上下文上绘图，但我没有意识到并想出了这个。

我将把它作为任何可能偶然发现这个问题并想知道如何通过绘制临时位图来进行转换的人的参考

```
CGColorRef source;
CGColorSpaceRef targetColorSpace;
int components = CGColorSpaceGetNumberOfComponents(targetColorSpace);
CGFloat temp-buffer[components];
CGContextRef temp-bmp = CGBitmapContextCreate(
    temp-buffer,
    1,1,8 * sizeof(CGFloat),components,
    targetColorSpace,
    kCGBitmapFloatComponents );
CGContextSetFillColorWithColor(temp-bmp,source);
CGContextFillRect(temp-bmp,CGRectMake(0,0,1,1));
CGColor target = CGColorCreate(targetColorSpace,temp-buffer);

/* then you cleanup and destroy created objects */ 
```

我没有尝试此代码，它可能需要一些修复。

# r - 分位数回归和 p 值 - 获得更多小数位

> ID：12052351
> 
> 赞同：4
> 
> 时间：2012-08-21T09:53:47.420
> 
> 标签：r, regression, quantile, quantreg

使用 R 和 package `quantreg`，我正在对我的数据执行分位数回归分析。

我可以使用汇总函数中的 se（标准误差）估计器访问 p 值，如下所示，但是我只得到 5 个小数位，并且想要更多。

```
model <- rq(outcome ~ predictor)
summary(model, se="ker")

Call: rq(formula = outcome ~ predictor)

tau: [1] 0.5

Coefficients:
            Value    Std. Error t value  Pr(>|t|)
(Intercept) 78.68182  2.89984   27.13312  0.00000
predictor    0.22727  0.03885    5.84943  0.00000 
```

我如何才能访问 p 值的更多小数位？

* * *

### 更新

好的，所以我可以通过选择包含数值结果矩阵的子对象来获得更多小数位；

```
> summary(model, se="ker")[[3]]
                 Value Std. Error   t value     Pr(>|t|)
(Intercept) 78.6818182 3.13897835 25.066059 0.000000e+00
predictor    0.2272727 0.04105681  5.535567 4.397638e-08 
```

然而，当 P 值 <1e-12 时，P 值仍舍入为 0（上述输出是简化的示例模型）。我可以通过应用@seancarmody 的建议获得更多信息；

```
format(summary(model, se="ker")[[3]], digits=22) 
```

但是如果 P < 1e-22 它仍然四舍五入为 0，并且如果“digits”设置为 > 22，我会收到以下错误；

```
format(summary(model, se="ker")[[3]], digits=23) 
```

> prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, : invalid 'digits' argument) 中的错误

是否可以访问更多小数位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:13:34.660

看看`str(model)`。您可以看到有一个属性`coefficients`，它将为您提供一个比摘要显示的精度更高的数字向量。你也可以看看这些

```
format(model$coefficients, digits=12) 
```

请注意，这会将系数转换为字符串。

要更仔细地检查 p.values，请尝试

```
summary(model, se="ker")$coefficients[,1]*1e27 
```

尽管我非常怀疑在小于 1e-27 的 p.value 的数字中可以找到任何含义！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:50:46.157

为了更进一步，我认为您必须深入研究并查看如何计算 p 值。特别是，`summary.rq`具有以下片段：

```
 coef[, 4] <- if (rdf > 0) 
        2 * (1 - pt(abs(coef[, 3]), rdf))
    else NA 
```

这实际上是对 p 值的相当不精确的计算（在一般情况下并不重要）。**您可能可以通过检索 p 值的日志**来获得最大精度[例如，原则上您可以检索小于 10^{-308} 的 p 值，这是 R 可以表示为双精度的最小值精度值]，例如

```
ss <- summary(model,se="ker")
log(2)+pt(abs(ss$coefficients[,"t value"]),
     lower.tail=FALSE,log.p=TRUE,df=ss$rdf) 
```

该`lower.tail=FALSE`参数为您提供 CDF 的补码（上尾）值；`log.p=TRUE`说你想要日志值；添加它`log(2)`使其成为双面的。

# javascript - 属性的对面包含选择器

> ID：12052352
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:53:49.913
> 
> 标签：javascript, jquery, html, jquery-selectors

我有以下列表：

```
<ul>
    <li class="x anotherclass"></li>
    <li class="y"></li>
    <li></li>
    <li class="z"></li>
    <li></li>
    <li class="y"></li>
</ul> 
```

我想选择所有不属于`y`.

属性包含选择器是否有相反的命令？

```
$("ul li[class*='y']") // Is there an opposite, maybe as in *!=... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:56:30.227

您应该为此使用[not](http://api.jquery.com/not-selector/)选择器。

例子：

```
$("ul li:not([class*='y'])") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:57:47.600

尝试这个：`$('ul li').not('.y')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T09:58:15.387

你可以试试这个选择器：

```
$("ul li:not([class*='y'])") 
```

文档：

[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T09:56:41.830

```
$('ul li').siblings().not('.y'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:58:08.693

您可以使用 jquery [:not() Selector](http://api.jquery.com/not-selector/)。

# javascript - 获取伪元素 :before/:after 在 IE 7 中工作

> ID：12052360
> 
> 赞同：3
> 
> 时间：2012-08-21T09:54:12.943
> 
> 标签：javascript, jquery, css, wordpress, internet-explorer-7

我试图让这些在 IE 7 中工作，但我遇到了问题。我下载了 jQuery 插件并将其包含在标题中，如下所示：

```
<!--[if lte IE 7]>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jquery.pseudo.js"></script>
<![endif]--> 
```

但它仍然无法正常工作。

这是来自jQuery插件的代码..

```
(function($){

    var patterns = {
        text: /^['"]?(.+?)["']?$/,
        url: /^url\(["']?(.+?)['"]?\)$/
    };

    function clean(content) {
        if(content && content.length) {
            var text = content.match(patterns.text)[1],
                url = text.match(patterns.url);
            return url ? '<img src="' + url[1] + '" />': text;
        }
    }

    function inject(prop, elem, content) {
        if(prop != 'after') prop = 'before';
        if(content = clean(elem.currentStyle[prop])) {
            $(elem)[prop == 'before' ? 'prepend' : 'append'](
                $(document.createElement('span')).addClass(prop).html(content)
            );
        }
    }

    $.pseudo = function(elem) {
        inject('before', elem);
        inject('after', elem);
        elem.runtimeStyle.behavior = null;
    };

    if(document.createStyleSheet) {
        var o = document.createStyleSheet(null, 0);
        o.addRule('.dummy','display: static;');
        o.cssText = 'html, head, head *, body, *.before, *.after, *.before *, *.after * { behavior: none; } * { behavior: expression($.pseudo(this)); }';
    }

})(jQuery); 
```

我认为这可能与必须将`$`字符更改为有关，`jQuery`因为我使用的是 WordPress，而 WP 将`$`字符保留为原型，但这也不起作用；它停止了 JS 错误，但它仍然没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:31:42.857

为什么不使用[ie7-js](http://code.google.com/p/ie7-js/)（一个让 MSIE 表现得像符合标准的浏览器的 JavaScript 库）？

它将修复`:before`，`:after`以及[许多其他问题](http://ie7-js.googlecode.com/svn/test/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:54:59.127

[Modernizr](http://modernizr.com/)还支持 IE7 和许多其他浏览器中的`:before`和`:after`psuedo 元素。从[文档](http://modernizr.com/docs/)：

> 我们支持 IE6+、Firefox 3.5+、Opera 9.6+、Safari 2+、Chrome。在移动设备上，我们支持 iOS 的移动 Safari、Android 的 WebKit 浏览器、Opera Mobile、Firefox Mobile，虽然我们仍在进行更多测试，但我们相信我们支持 Blackberry 6+。

# java - Camel Jetty 中的自定义基本身份验证

> ID：12052364
> 
> 赞同：2
> 
> 时间：2012-08-21T09:54:19.183
> 
> 标签：java, jetty, osgi, apache-camel, apache-karaf

我有一个`OSGi`部署在 Apache Karaf 中的包。我正在使用`BASIC`身份验证来检查用户凭据。这是我的配置`Spring`文件：

```
<beans...>
...
    <bean id="loginService" class="org.eclipse.jetty.plus.jaas.JAASLoginService">
        <property name="name" value="karaf"/>
        <property name="loginModuleName" value="karaf"/>
        <property name="roleClassNames">
            <list>
                <value>org.apache.karaf.jaas.modules.RolePrincipal</value>
            </list>
        </property>
    </bean>

    <bean id="identityService" class="org.eclipse.jetty.security.DefaultIdentityService"/>

    <bean id="constraint" class="org.eclipse.jetty.http.security.Constraint">
        <property name="name" value="BASIC"/>
        <property name="roles" value="admin"/>
        <property name="authenticate" value="true"/>
    </bean>

    <bean id="constraintMapping" class="org.eclipse.jetty.security.ConstraintMapping">
        <property name="constraint" ref="constraint"/>
        <property name="pathSpec" value="/*"/>
    </bean>

    <bean id="securityHandler" class="org.eclipse.jetty.security.ConstraintSecurityHandler">
        <property name="authenticator">
            <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator"/>
        </property>
        <property name="constraintMappings">
            <list>
                <ref bean="constraintMapping"/>
            </list>
        </property>
        <property name="loginService" ref="loginService"/>
        <property name="strict" value="false"/>
        <property name="identityService" ref="identityService"/>
    </bean>

    <camelContext trace="true" xmlns="http://camel.apache.org/schema/spring">
        <route>
            <from uri="jetty:http://0.0.0.0:8282/services?handlers=securityHandler&amp;matchOnUriPrefix=true"/>
            <transform>
                <constant>&lt;html>&lt;body>Hello from Fuse ESB server&lt;/body>&lt;/html></constant>
            </transform>
        </route>
    </camelContext>
    ....
</beans> 
```

当我输入此 URL 时：`http://localhost:8282/services`在浏览器中，我看到了基本身份验证窗口，需要用户名和密码。到此为止没关系。

用户凭据在`user.properties`of`Apache Karaf` `&{base.dir}/etc/`目录中设置。身份验证器从那里获取用户凭据进行检查。

我的问题是我需要以某种方式覆盖身份验证器以使用我的数据库中的凭据。我还没有尝试任何事情来完成这项工作，因为我不知道从哪里开始。我尝试在互联网上搜索，但没有线索如何使这项工作甚至从哪里开始，以使这项工作。因此，如果有人能指出我如何做到这一点的正确方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:15:01.793

如果您需要将其从您自己的用户存储中提取出来，那么您需要提供您自己的 IdentityService 和 LoginService 并在上面的示例中替换它们。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-security/src/main/java/org/eclipse/jetty/security/HashLoginService.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-security/src/main/java/org/eclipse/jetty/security/HashLoginService.java)

这是一个登录服务示例，它从属性类型文件加载用户并将它们存储在哈希图中。

您可能会很好地使用现有的 BasicAuthenticator，因为它使用提供的 LoginService 和 IdentityService ......所以覆盖它们并替换它们，你应该很好。

上面的哈希示例中的目录中有许多示例，包括 spnego 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:56:39.907

由于您似乎在使用 Spring，因此请考虑使用 Spring Security 模块为您的 webapp 提供安全性。

您甚至`JdbcDaoImpl`可以连接起来为安全性提供 UserDetailsS​​ervice [http://static.springsource.org/spring-security/site/docs/3.1.x/reference/core-services.html#d0e2875](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/core-services.html#d0e2875)

# php - 修改图像文件的重命名功能和创建

> ID：12052367
> 
> 赞同：1
> 
> 时间：2012-08-21T09:54:27.763
> 
> 标签：php

此脚本生成两个文件、两个图像，并重命名它们。

我需要的是上传文件名的第一张图片，例如：test.jpg，因为这样做是将图像文件名转换为 test.jpg.JPG（请不要告诉我删除添加扩展名的部分，因为如果我这样做，它将不再创建图像文件）并且生成的第二张图像我需要它类似于：test_s.jpg

```
function setFile($src = null) {
$this->ext = strtoupper(pathinfo($src, PATHINFO_EXTENSION));
if(is_file($src) && ($this->ext == "JPG" OR $this->ext == "JPEG")) {
$this->img_r = ImageCreateFromJPEG($src);
} elseif(is_file($src) && $this->ext == "PNG") {
$this->img_r = ImageCreateFromPNG($src);
} elseif(is_file($src) && $this->ext == "GIF") {
$this->img_r = ImageCreateFromGIF($src);
}
$this->img_w = imagesx($this->img_r);
$this->img_h = imagesy($this->img_r);
}

function createFile($output_filename = null) {
if($this->ext == "JPG" OR $this->ext == "JPEG") {
imageJPEG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext, $this->quality);
} elseif($this->ext == "PNG") {
imagePNG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
} elseif($this->ext == "GIF") {
imageGIF($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
}
$this->output = $this->uploaddir.$output_filename.'.'.$this->ext;
}

function setUploadDir($dirname) {
$this->uploaddir = $dirname;
}

function flush() {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];

imagedestroy($this->dst_r);
unlink($targetFile);
imagedestroy($this->img_r);

}

}

$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];

move_uploaded_file ($tempFile, $targetFile);

 $image = new Image();
            $image->setFile($targetFile);
            $image->setUploadDir($targetPath);
            $image->resize(640);
            $image->createFile(md5($tempFile));
            $image->resize(100);
            $image->createFile($_FILES['Filedata']['name']);
            $image->flush();
} 
```

# android - 为基于 Android 的设备绘制路径然后对其进行编辑

> ID：12052377
> 
> 赞同：1
> 
> 时间：2012-08-21T09:54:56.547
> 
> 标签：android, path, drawing, editing

我需要一个类似下面的绘图应用程序 -

用户在 A 点触摸 (ACTION_DOWN) 屏幕，然后将手指悬停 (ACTION_MOVE) 屏幕上。假设当前的触摸点是 B 点。应用程序应始终在 A 和 B 之间绘制一条直线。也就是说，线的 A 点将是静止的，而线的 B 点将随着手指（触摸点）保持移动。一旦用户抬起手指，线路就会变得稳定。用户可以像这样绘制多条线。此外，用户可以选择（在选择模式下）任何行并更改其位置。

请提出前进的方向。我应该画什么样的画，线/点/路径/精灵/其他？如果您可以提供任何链接，那将非常有帮助。它应该适用于 v3.2 及更高版本。

问候， 普拉松

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:34:05.140

使用这个。它可以帮助你............

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.Bundle;
import android.view.Display;
import android.view.MotionEvent;
import android.view.View;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        RelativeLayout relativeLayout= (RelativeLayout) (findViewById(R.id.mainLayout));
        relativeLayout.addView(new Drawing(this));
    }

}  

class Drawing extends View{
    private Canvas mCanvas = null;
    private Path mPath = null;
    private Paint mBitmapPaint = null;
    private Bitmap mBitmap = null;
    private Bitmap bit=null;
    private Paint mPaint = null;
    private MainActivity baseMainActivity = null;

    public interface onDrawingViewSingleTap{
        void onDrawingViewTap(float x , float y);
    }

    public Drawing(Context c) {
        super(c);
        baseMainActivity=(MainActivity) c;
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.YELLOW);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);//This sets the width of signature

        Display display =baseMainActivity.getWindowManager().getDefaultDisplay();

        mBitmap = Bitmap.createBitmap(display.getWidth(), display.getHeight(), Bitmap.Config.ARGB_8888);// 320*480  // For setting size of screen to draw Bitmap

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        mCanvas = new Canvas(mBitmap);
        onDraw(mCanvas);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        try{
            canvas.drawColor(Color.TRANSPARENT);//Color.WHITE //To change background color of Application
            if(bit!=null)
                canvas.drawBitmap(bit, 0, 0, mBitmapPaint);
            else
                canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        }catch(Exception e){}
        if(bit==null)
            canvas.drawPath(mPath, mPaint);

        bit=null;

    }
    private float mX, mY;
    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x+1;
        mY = y+1;

    }

    private void touch_upline(float x,float y) {
        mPath.lineTo(mX, mY);
        mCanvas.drawLine(mX, mY, x, y, mPaint);
        mPath.reset();
    }
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            eraseAll();
            touch_upline(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_upline(x,y);
            invalidate();
            break;
        }
        return true;
    }

    public void eraseAll()
    {
        mBitmap.eraseColor(android.graphics.Color.TRANSPARENT);
        mCanvas = new Canvas(mBitmap);
    }

} 
```

main.xml**就是**这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" android:id="@+id/mainLayout" >

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:26:17.493

在上面的代码中，当你画新线时，旧线会消失，所以用它来解决这个问题............

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.os.Bundle;
import android.view.Display;
import android.view.MotionEvent;
import android.view.View;
import android.widget.LinearLayout;

public class MainActivity extends Activity {
Drawing drawing;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LinearLayout linearLayout1= (LinearLayout) (findViewById(R.id.layout1));
        drawing=new Drawing(this);
        linearLayout1.addView(drawing);
        LinearLayout linearLayout2=(LinearLayout) (findViewById(R.id.layout2));
        linearLayout2.addView(new Drawing(this));
    }

class Drawing extends View{
    private Canvas mCanvas = null;
    private Path mPath = null;
    private Paint mBitmapPaint = null;
    private Bitmap mBitmap = null;
    private Bitmap bit=null;
    private Paint mPaint = null;
    private MainActivity baseMainActivity = null;

    public Drawing(Context c) {
        super(c);
        baseMainActivity=(MainActivity) c;
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.YELLOW);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);//This sets the width of signature

        Display display =baseMainActivity.getWindowManager().getDefaultDisplay();

        mBitmap = Bitmap.createBitmap(display.getWidth(), display.getHeight(), Bitmap.Config.ARGB_8888);// 320*480  // For setting size of screen to draw Bitmap

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        mCanvas = new Canvas(mBitmap);
        onDraw(mCanvas);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        try{
            canvas.drawColor(Color.TRANSPARENT);//Color.WHITE //To change background color of Application
            if(bit!=null)
                canvas.drawBitmap(bit, 0, 0, mBitmapPaint);
            else
                canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        }catch(Exception e){}
        if(bit==null)
            canvas.drawPath(mPath, mPaint);

        bit=null;

    }
    private float mX, mY;
    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x+1;
        mY = y+1;

    }

    private void touch_upline(float x,float y) {
        mPath.lineTo(mX, mY);
        mCanvas.drawLine(mX, mY, x, y, mPaint);
        mPath.reset();
    }
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            eraseAll();
            touch_upline(x, y);
            invalidate();

            break;
        case MotionEvent.ACTION_UP:
            touch_upline(x,y);
            invalidate();
            drawLineOnLayout1(x,y);
            break;
        }
        return true;
    }
private void drawLineOnLayout1(float x,float y)
{
    drawing.mPath.lineTo(mX, mY);
    drawing.mCanvas.drawLine(mX, mY, x, y, mPaint);
    drawing.mPath.reset();  
}
    public void eraseAll()
    {
        mBitmap.eraseColor(android.graphics.Color.TRANSPARENT);
        mCanvas = new Canvas(mBitmap);
    }

    public void startErasing()
    {
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    }
    public void initializePaintOnject()
    {
        mPaint.setXfermode(null);
        mPaint.setAlpha(0xFF);
    }

}
} 
```

main.xml**就是**这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/layout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>
     <LinearLayout
        android:id="@+id/layout2"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>

</RelativeLayout> 
```

# python - Matplotlib：用鼠标绘制矩形形状的选择区域

> ID：12052379
> 
> 赞同：10
> 
> 时间：2012-08-21T09:54:59.290
> 
> 标签：python, matplotlib, mouse, selection, matplotlib-basemap

我希望能够通过鼠标事件在 matplotlib 图上绘制选择区域。我没有找到有关如何使用 python 执行此操作的信息。

最后，我希望能够用鼠标在使用 matplotlib 底图创建的地图上绘制感兴趣的区域并检索角坐标。

任何人有一个想法，例子，参考？

谢谢，

格雷格

```
class Annotate(object):
  def __init__(self):
      self.ax = plt.gca()
      self.rect = Rectangle((0,0), 1, 1, facecolor='None', edgecolor='green')
      self.x0 = None
      self.y0 = None
      self.x1 = None
      self.y1 = None
      self.ax.add_patch(self.rect)
      self.ax.figure.canvas.mpl_connect('button_press_event', self.on_press)
      self.ax.figure.canvas.mpl_connect('button_release_event', self.on_release)
      self.ax.figure.canvas.mpl_connect('motion_notify_event', self.on_motion)
  def on_press(self, event):
      print 'press'
      self.x0 = event.xdata
      self.y0 = event.ydata    
      self.x1 = event.xdata
      self.y1 = event.ydata
      self.rect.set_width(self.x1 - self.x0)
      self.rect.set_height(self.y1 - self.y0)
      self.rect.set_xy((self.x0, self.y0))
      self.rect.set_linestyle('dashed')
      self.ax.figure.canvas.draw()
  def on_motion(self,event):
      if self.on_press is True:
          return
      self.x1 = event.xdata
      self.y1 = event.ydata
      self.rect.set_width(self.x1 - self.x0)
      self.rect.set_height(self.y1 - self.y0)
      self.rect.set_xy((self.x0, self.y0))
      self.rect.set_linestyle('dashed')
      self.ax.figure.canvas.draw()
  def on_release(self, event):
      print 'release'
      self.x1 = event.xdata
      self.y1 = event.ydata
      self.rect.set_width(self.x1 - self.x0)
      self.rect.set_height(self.y1 - self.y0)
      self.rect.set_xy((self.x0, self.y0))
      self.rect.set_linestyle('solid')
      self.ax.figure.canvas.draw()
      print self.x0,self.x1,self.y0,self.y1
      return [self.x0,self.x1,self.y0,self.y1] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T14:49:12.360

这是一个小例子，展示了如何使用鼠标在 matplotlib 图上绘制一个矩形。

```
import matplotlib.pyplot as plt
from matplotlib.patches import Rectangle

class Annotate(object):
    def __init__(self):
        self.ax = plt.gca()
        self.rect = Rectangle((0,0), 1, 1)
        self.x0 = None
        self.y0 = None
        self.x1 = None
        self.y1 = None
        self.ax.add_patch(self.rect)
        self.ax.figure.canvas.mpl_connect('button_press_event', self.on_press)
        self.ax.figure.canvas.mpl_connect('button_release_event', self.on_release)

    def on_press(self, event):
        print 'press'
        self.x0 = event.xdata
        self.y0 = event.ydata

    def on_release(self, event):
        print 'release'
        self.x1 = event.xdata
        self.y1 = event.ydata
        self.rect.set_width(self.x1 - self.x0)
        self.rect.set_height(self.y1 - self.y0)
        self.rect.set_xy((self.x0, self.y0))
        self.ax.figure.canvas.draw()

a = Annotate()
plt.show() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-31T09:46:51.190

Matplotlib 提供了自己的`RectangleSelector`. matplotlib 页面上有[一个示例](https://matplotlib.org/examples/widgets/rectangle_selector.html)，您可以根据自己的需要进行调整。

简化版本如下所示：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.widgets  import RectangleSelector

xdata = np.linspace(0,9*np.pi, num=301)
ydata = np.sin(xdata)

fig, ax = plt.subplots()
line, = ax.plot(xdata, ydata)

def line_select_callback(eclick, erelease):
    x1, y1 = eclick.xdata, eclick.ydata
    x2, y2 = erelease.xdata, erelease.ydata

    rect = plt.Rectangle( (min(x1,x2),min(y1,y2)), np.abs(x1-x2), np.abs(y1-y2) )
    ax.add_patch(rect)

rs = RectangleSelector(ax, line_select_callback,
                       drawtype='box', useblit=False, button=[1], 
                       minspanx=5, minspany=5, spancoords='pixels', 
                       interactive=True)

plt.show() 
```

# jquery - 多个 jQuery mouseover mouseout

> ID：12052382
> 
> 赞同：0
> 
> 时间：2012-08-21T09:55:21.257
> 
> 标签：jquery, ajax, mouseover, mouseout

我的 jQuery 代码是：

```
 num=15;                     
                        $('#share_button_'+num).mouseover(function(){       
                            $('#share_button_'+num).attr("src","img/share-hover.jpg");      
                        });                         
                        $('#share_button_'+num).mouseout(function(){        
                            $('#share_button_'+num).attr("src","img/share-button-en.jpg");      
                        });

                num=30;

                        $('#share_button_'+num).mouseover(function(){                               
                            $('#share_button_'+num).attr("src","img/share-hover.jpg");      
                        });                         
                        $('#share_button_'+num).mouseout(function(){        
                            $('#share_button_'+num).attr("src","img/share-button-en.jpg");      
                        }); 
```

我的问题是只有最后一个（可以是 15 或 30）有效。Is 写在 Ajax 成功响应中：

```
 $.ajax({
        async: true,
        url: "myurl.php",
        type: "POST",
        data: "uid="+uid,
        dataType: "html",
        success: function (data, textStatus, xhr) {
                //Written here
              } 
```

为什么会这样？

```
var div=new Array();
div[0]=15;
div[1]=96;
div[2]=30;
var i=2;
$('#share_button_'+div[i]).mouseover(function(){
    $('#share_button_'+div[i]).attr("src","img/share-hover.jpg");
});
$('#share_button_'+div[i]).mouseout(function(){
    $('#share_button_'+div[i]).attr("src","img/share-button-en.jpg");
});
var j=1;
$('#share_button_'+div[j]).mouseover(function(){
    $('#share_button_'+div[j]).attr("src","img/share-hover.jpg");
});
$('#share_button_'+div[j]).mouseout(function(){
    $('#share_button_'+div[j]).attr("src","img/share-button-en.jpg");
}) 
```

# xslt - 如何从单独的 Umbraco 节点获取子文档？

> ID：12052387
> 
> 赞同：1
> 
> 时间：2012-08-21T09:55:24.840
> 
> 标签：xslt, umbraco

我的 Umbraco 网站上有一个内容元素，我想将其用作文档树另一部分内容的容器。

如下图所示，我需要从 /Content/Frontpage Tabs/Featured Pages 节点中引用 /Content/Personal Site/Blog 节点下的所有子页面。

![站点层次结构的屏幕截图](../Images/10935bf6db5b4cb7b04a648324000522.png)

如果我将它放在“个人站点”节点下方的页面上，我为这项工作借用的 XSLT 工作正常，但从“首页选项卡”下方没有任何结果。我猜是因为 currentPage 正在遍历那棵树而不是 Personal Site 的树。

XSLT 看起来像这样：

```
 <xsl:param name="currentPage"/>
  <xsl:variable name="numberOfPosts" select="3"/>
  <xsl:variable name="level" select="1"/>

  <xsl:variable name="pageNumber">
    <xsl:choose>
      <xsl:when test="umbraco.library:RequestQueryString('page') &lt;= 0 or string(umbraco.library:RequestQueryString('page')) = '' or string(umbraco.library:RequestQueryString('page')) = 'NaN'">1</xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="umbraco.library:RequestQueryString('page')"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="numberOfRecords" select="3" />

  <xsl:template match="/">

    <xsl:if test="$currentPage [name() = 'umbDateFolder']">
      <h2 class="page-title">
        Monthly Archives: <xsl:value-of select="umbraco.library:FormatDateTime(concat($currentPage/../@nodeName,'-',$currentPage/@nodeName,'-11T10:24:46'),'MMMM yyyy')"/>
      </h2>
    </xsl:if>

    <xsl:for-each select="$currentPage/ancestor-or-self::umbBlog//umbBlogPost">
        <xsl:sort select="./PostDate" order="descending" />

        <xsl:if test="position() &gt; $numberOfPosts * (number($pageNumber)-1) and
        position() &lt;= number($numberOfPosts * (number($pageNumber)-1) +
        $numberOfPosts )">

          <ul>
          <xsl:call-template name="showpost">
            <xsl:with-param name="post" select="."/>
          </xsl:call-template>
          </ul>

        </xsl:if>

     </xsl:for-each>

  </xsl:template>

  <xsl:template name="showpost">
    <xsl:param name="post"/>

    <li>
      <div class="excerpt">
        <a class="header" href="{umbraco.library:NiceUrl($post/@id)}" title="{$post/@nodeName}">
          <xsl:value-of select="$post/@nodeName" />
        </a>
        <xsl:value-of select="$post/bodyText" disable-output-escaping="yes" />
      </div>
      <a class="link-button" href="{umbraco.library:NiceUrl($post/@id)}">Read more</a>
    </li> 
```

有一些明显的地方我需要改变，但我对 XSLT 不够精通，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:36:49.113

您应该在宏中创建一个 contentpicker 类型参数（例如，名为“source”），并使用此参数的值作为容器节点的 ID，而不是 currentPage。我经常使用这个技巧，它运行良好，并且允许您更改管理后台中的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:17:10.543

您应该创建一个新变量，该变量将是节点“个人站点”，然后获取所有子节点。为了创建此节点，您可以在 web.config 中使用密钥添加其 ID。

# c# - 使用 ServiceStack 解析 JSON

> ID：12052393
> 
> 赞同：3
> 
> 时间：2012-08-21T09:55:44.810
> 
> 标签：c#, json

如何解析这个json字符串？我试图输入字典

```
var dictionary = text.FromJson<Dictionary<string, string>>(); 
```

但未解析数组。

```
{"v":[[9,-1],[9,-44,1]]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:02:00.033

试试这门课

```
public class Root
{
     public  List<List<int>> v;
}

var result = text.FromJson<Root>(); 
```

**编辑**

由于您的 json 字符串已更改，因此我使用[Json.Net准备了一个示例](http://json.codeplex.com/)

```
string json = @"{ v: [ [ 9, 16929, 1, 856, 128, '123', 'hello', {'type': 'photo', 'attach1': '123_456'} ] ] } ";
var obj = (JObject)JsonConvert.DeserializeObject(json);

foreach (var arr in obj["v"])
{
    foreach(var item in arr)
    {
        if (item is JValue)
        {
            Console.WriteLine(item);
        }
        else
        {
            Console.WriteLine(">>> " + item["type"]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T10:02:29.077

你使用了错误的结构。你的价值是一个多维数组，没有字符串。尝试类型 `Dictionary<String, List<List<int>>>`

```
var dictionary = text.FromJson< Dictionary<String, List<List<int>>>>(); 
```

# css - Divs 不会居中

> ID：12052395
> 
> 赞同：0
> 
> 时间：2012-08-21T09:55:48.570
> 
> 标签：css, layout, html, positioning

首先[这是我的代码](http://jsfiddle.net/2yree/1/)

我在将“容器” div 及其子元素居中时遇到了很多困难。我已经尝试了每种类型的定位，但在调整浏览器大小后我无法让它保持居中。我不确定我哪里出错了，我已经在互联网上潜伏了好几个小时，试图找出它为什么没有正确定位。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:07:06.863

*   不要使`body`元素居中。

*   将外部 div 居中。它需要一个特定的宽度才能居中，100% 居中的宽度没有效果。

*   不要在 jsfiddle 中粘贴完整的网页，它会将其包装在一个页面中，因此您将拥有重复的页面元素，从而使标记无效。

[http://jsfiddle.net/Guffa/2yree/14/](http://jsfiddle.net/Guffa/2yree/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:05:48.687

工作示例：

[http://jsfiddle.net/w4Wdy/](http://jsfiddle.net/w4Wdy/)

您只需要添加：

```
#container{
    margin: auto;
    width: 620px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:03:36.147

`#container`元素为 100% 宽。你怎么能把与它的父对象一样宽的东西居中？你不能。

更改宽度，以便元素根据需要适合内部，但每侧都有空间以实际居中。

```
#container {
    margin: 0 auto;
    width: 60%;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/2yree/8/](http://jsfiddle.net/Kyle_Sevenoaks/2yree/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:03:54.947

我认为您应该更改#container 元素的宽度，width: 100%; 防止元素居中，您应该将其更改为 50% 或例如 width: 300px;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T10:04:02.243

看看这个[http://jsfiddle.net/2yree/11/](http://jsfiddle.net/2yree/11/)

**编辑**

[http://jsfiddle.net/2yree/20/](http://jsfiddle.net/2yree/20/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T10:16:03.943

我希望你正在寻找这样的[东西](http://jsfiddle.net/2yree/31/embedded/result/)

您的标记中几乎没有错误，因此我进行了一些更改。[请在此处](http://jsfiddle.net/2yree/31/)查看更改

# java - SimpleCaptcha NoSuchMethodError

> ID：12052396
> 
> 赞同：0
> 
> 时间：2012-08-21T09:55:48.880
> 
> 标签：java, captcha, nosuchmethoderror, simplecaptcha

当我使用[SimpleCaptcha](http://simplecaptcha.sourceforge.net/)时，我收到此错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: disposeLater    
 at java.awt.Component.initIDs(Native Method)   
 at java.awt.Component.<clinit>(Component.java:579)     
 at sun.awt.windows.WToolkit.initIDs(Native Method)     
 at sun.awt.windows.WToolkit.<clinit>(WToolkit.java:106)    
 at sun.awt.Win32GraphicsEnvironment.<clinit>(Win32GraphicsEnvironment.java:51)     
 at java.lang.Class.forName0(Native Method)     
 at java.lang.Class.forName(Class.java:169)     
 at javava.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:68)
 at java.awt.image.BufferedImage.createGraphics(BufferedImage.java:1135)    
 at nl.captcha.text.renderer.DefaultWordRenderer.render(DefaultWordRenderer.java:65)    
 at nl.captcha.Captcha$Builder.addText(Captcha.java:145)    
 at nl.captcha.Captcha$Builder.addText(Captcha.java:121)    
 at nl.captcha.Captcha$Builder.addText(Captcha.java:111)    
 at com.sohu.nl.test.simpleCaptcha.main(simpleCaptcha.java:29) 
```

这是我的代码：

```
public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub
        System.out.println("test");
        Builder captchaBuilder = new Builder(10, 100);
        captchaBuilder.addText();
        Captcha captcha = captchaBuilder.build();
        File file = new File("D:/a.jpeg");
        ImageIO.write(captcha.getImage(), "JPEG", file);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:10:04.570

我目前正在使用此代码：

```
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

import nl.captcha.Captcha;
import nl.captcha.Captcha.Builder;

public class core {

public static void main(String[] args) {
    Builder c = new Builder(200, 150);
    c.addText();
    Captcha captcha = c.build();
    File file = new File("C:/a.jpeg");
    try {
        ImageIO.write(captcha.getImage(), "JPEG", file);
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

结帐：[http ://docs.oracle.com/javase/7/docs/api/java/lang/NoSuchMethodError.html](http://docs.oracle.com/javase/7/docs/api/java/lang/NoSuchMethodError.html)

# javascript - 检查外部js文件是否已经加载

> ID：12052399
> 
> 赞同：0
> 
> 时间：2012-08-21T09:55:52.500
> 
> 标签：javascript, jquery, getscript

在ajax请求成功时，我使用加载脚本，

```
$.getScript(base_url + 'js/js_to_be_loaded.js'); 
```

有什么方法可以检查该特定脚本是否已加载？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:05:48.357

您只需要实现一个`success`回调函数。

```
jQuery.getScript( url [, success(script, textStatus, jqXHR)] ) 
```

像：

```
$.getScript(base_url + 'js/js_to_be_loaded.js', onSuccess);

function onSuccess(...)
{
    // in this function you are guaranteed that it is loaded
    // so you can execute code based on the loaded js file or
    // set flags to let your code "know" that it is loaded
} 
```

# java - 借助 java 代码将文件上传到 SVN 存储库

> ID：12052402
> 
> 赞同：2
> 
> 时间：2012-08-21T09:55:55.263
> 
> 标签：java, svn, file-upload, visualsvn-server, svnkit

我正在使用 SVNKit 从我的 java 代码中访问 VisualSVN 服务器。

我的应用程序是动态 Web 应用程序。我正在使用 Struts2。

我完成了我的 java 代码中的连接和身份验证部分。

我想直接将文件上传到存储库中。

**是否可以从 java 代码直接将文件上传到存储库中？如果是，那么我应该如何进行以及我应该遵循什么方法？**

请帮助我，我有需要..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:26:51.020

出色地。svn（或任何其他源代码控制）是为多个程序员（或只有一个）在一个项目上工作并且多个人正在编辑相同的文件的编程环境而设计的。因此源代码控制用于跟踪代码的更改以及由谁更改。所以你要问自己 1- 我的报告之间是否存在语义关系，以便我需要跟踪它们之间的变化？2-我在乎是谁做出的改变吗？如果这两个问题的答案都是否定的，那么 svn 只是一种矫枉过正，并增加了不必要的复杂性。

另一件事，这些报告是二进制文件格式吗？如果是，那么这是使用 svn 的另一个缺点，因为它无法跟踪发生了什么变化。它只会按原样提交整个文件。如果文件是 ascii（文本）格式，那么您需要跟踪更改吗？如果是，那么 svn 可以做到，而且还有一堆其他工具可以做到，而无需依赖 svnkit 库的复杂性。

如果您只需要存储具有不同“上传时间”的不同报告，为什么不使用具有以下字段的数据库：（id、报告、时间戳、一些外键）。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:26:25.900

检查[SVNKit API 参考](http://svnkit.com/documentation.html#using-svnit)。

> 通过[SVNClientManager](http://svnkit.com/javadoc/org/tmatesoft/svn/core/wc/SVNClientManager.html)类，您可以访问许多接口，这些接口允许您执行 Subversion 用户可能需要的几乎所有操作。

# sql - 过去 26 周及其各自的周数

> ID：12052405
> 
> 赞同：4
> 
> 时间：2012-08-21T09:56:04.700
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

如果我今天（2012 年 8 月 21 日）运行查询，我想得到这个结果集：

![在此处输入图像描述](../Images/229967c00ddd128b5cf447d8f29e6627.png)

[...]

![在此处输入图像描述](../Images/c5e7aa0cfbb426fbdaf50c4d8b4683f5.png)

为了做到这一点，我正在使用以下内容，但它似乎过于复杂。这可以简化吗？

```
;WITH Numbers_cte([number]) 
        AS 
        ( --return the numbers from 1 to 182 i.e 26*7
        SELECT DISTINCT number 
        FROM Master..spt_values 
        WHERE number BETWEEN 1 AND 182
        )
,MultipleSeven_cte([number], [multiple])
        AS 
        ( --divide the number series by 7 and return integers 
        SELECT 
            [number]
            ,[multiple] = (([number]-1) / 7)+1
        FROM Numbers_cte
        ) 
,Today_cte([Today])
        AS 
        ( --return the last date in the table or use GETDATE for this example
        SELECT [Today]=CONVERT(DATETIME,CONVERT(CHAR(8),GETDATE()-1,112))
        ) 
,EquivDates_cte([multiple],[number],[Today], [EquivDates])
        AS
        ( 
        SELECT 
             x.multiple
            ,x.number
            ,y.Today 
            ,[EquivDates] = DATEADD(DAY,-(182-x.number),y.[Today]) 
        FROM MultipleSeven_cte x, Today_cte y
        )                   
SELECT 
        multiple
        ,number
        ,[EquivDates] 
FROM EquivDates_cte 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:09:05.463

你可以这样做：

```
select (number/7)+1 as multiple ,
        number+1 as number,
        dateadd(dd,-(182-number),GETDATE()) as EquivDates
from    master..spt_values 
where   type='P'
and     number<182 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/3484)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:10:33.107

我把它归结为：

```
 select distinct 
        number,
        [week] = ((number-1) / 7)+1,
        olddate = DATEADD(DD,
                        -1 * (182-number+1),
                        DATEADD(dd,0,(DATEDIFF(dd,0,GETDATE()))))
  from master..spt_values
  where number between 1 and 182 
```

# facebook - Facebook PHP SDK + codeigniter + index.php 删除 = 不工作

> ID：12052407
> 
> 赞同：0
> 
> 时间：2012-08-21T09:56:09.620
> 
> 标签：facebook, codeigniter, facebook-php-sdk

我将 facebook-php-sdk 与我的 codeigniter 应用程序一起使用。当我试图从我的 URL 中删除 index.php 时，我遇到了身份验证问题。

我对 facebook connect 的实现很简单并且工作正常。（sdk 核心文件是一个库，以及带有应用程序数据的 cofig 文件）当我输入时，身份验证效果很好：

```
myapp.com/index.php/welcome 
```

但是当我尝试时：

```
myapp.com/welcome 
```

我可以单击并单击并单击登录-页面会刷新。

我的欢迎控制器：

```
public function __construct()
{
    parent::__construct();
    // Your own constructor code
    $CI = & get_instance();
    $CI->config->load("facebook",TRUE);
    $config = $CI->config->item('facebook');
    $this->load->library('facebook', $config);
}

public function index()
{
    echo CI_VERSION;
    $user = $this->facebook->getUser();
    if($user) {
            $user_info = $this->facebook->api('/me');
            echo '<pre>'.htmlspecialchars(print_r($user_info, true)).'</pre>';
    } else {
        echo "<a href=\"{$this->facebook->getLoginUrl()}\">Login using Facebook</a>";
    }
} 
```

就这么简单：经过身份验证后，它只会打印我的 fb 帐户数据。

我的.htaccess：

```
RewriteCond %{THE_REQUEST} ^GET\ /index\.php/?([^ ]*)
RewriteRule ^index\.php/?(.*) /$1 [R,L]
RewriteCond $0 !^index\.php($|/)
RewriteRule .* index.php/$0 [L] 
```

**更新**

我来自 mysite.com/welcome 的登录网址**不起作用**

```
https://www.facebook.com/dialog/oauth?client_id=487********73&redirect_uri=http%3A%2F%2Fmysite.com%2Fwelcome&state=ae51191b8eabf884ead0c116e7e28b4d 
```

并来自 mysite.com/index.php/welcome**工作正常**

```
https://www.facebook.com/dialog/oauth?client_id=487********73&redirect_uri=http%3A%2F%2Fmysite.com%2Findex.php%2Fwelcome&state=ae51191b8eabf884ead0c116e7e28b4d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:28:12.587

您可以尝试使用不同的 .htaccess 吗？我已经在一些带有 FB 的 CI 项目中使用了这个，没有任何问题：

```
<IfModule mod_rewrite.c>

    RewriteEngine On

    ### Canonicalize codeigniter URLs

    # If your default controller is something other than
    # "welcome" you should probably change this
    RewriteRule ^(welcome(/index)?|index(\.php)?)/?$ / [L,R=301]
    RewriteRule ^(.*)/index/?$ $1 [L,R=301]

    # Removes trailing slashes (prevents SEO duplicate content issues)
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.+)/$ $1 [L,R=301]

    # Removes access to the system folder by users.
    # Additionally this will allow you to create a System.php controller,
    # previously this would not have been possible.
    # 'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php/$1 [L]

    # Checks to see if the user is attempting to access a valid file,
    # such as an image or css document, if this isn't true it sends the
    # request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>

    # Without mod_rewrite, route 404's to the front controller
    ErrorDocument 404 /index.php

</IfModule> 
```

并考虑 froddd 所说的，如果您的默认控制器是受欢迎的，那么您可以只使用 www.yoursite.com 或 www.yoursite.com/welcome

# php - 使用 ON DELETE CASCADE 在 Symfony 2 和 Doctrine 2 中创建模式

> ID：12052408
> 
> 赞同：0
> 
> 时间：2012-08-21T09:56:11.130
> 
> 标签：php, symfony, doctrine, doctrine-orm

我在用户表和角色表之间有一些交叉表。我想在数据库级别创建级联删除。我有下一个注释：

```
/**
 * @ORM\ManyToMany(targetEntity="Role")
 * @ORM\JoinTable(name="user_x_role",
 *     joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="role_id", referencedColumnName="id")}
 * )
 * @var ArrayCollection $roles
 */
protected $roles; 
```

但外键有 ondelete=restrict 和 onupdate=restrict 之后：

```
doctrine:schema:update --force 
```

如何将这些值更改为 CASCADE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:03:33.107

你应该试试这个，不要忘记修改 ORM 级别的级联。

```
/**
 * @ORM\ManyToMany(targetEntity="Role", cascade={"persist","remove"})
 * @ORM\JoinTable(name="user_x_role",
 *     joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id", onDelete="CASCADE")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="role_id", referencedColumnName="id", onDelete="CASCADE")},
 * )
 * @var ArrayCollection $roles
 */
protected $roles; 
```

# php - 从数组1中查找键是否存在于数组2中

> ID：12052409
> 
> 赞同：0
> 
> 时间：2012-08-21T09:56:11.303
> 
> 标签：php, arrays

```
$array_1 = array(
    'name' => 'Example Name',
    'company' => 'Intel ',
    'website' => 'WWW.intel.COM',
    'contact' => 'CONTACT@intel.COM',
    'twitter' => 'HTTP://TWITTER.COM/intel',
);

$array_2 = array(
    0 => array(
        'id' => '1',
        'field' => 'name',
        'default_field_text' => 'Name Here'
    ),
    1 => array(
        'id' => '3',
        'field' => 'company',
        'default_field_text' => 'COMPENY NAME HERE'
    ),
    2 => array(
        'id' => '4',
        'field' => 'website',
        'default_field_text' => 'WWW.WEBSITECOMPENY.COM'
    ),
    3 => array(
        'id' => '5',
        'field' => 'contact',
        'default_field_text' => 'CONTACT@COMPENY.MAIL.COM'
    ),
    4 => array(
        'id' => '6',
        'field' => 'twitter',
        'default_field_text' => 'HTTP://TWITTER.COM/NAME HERE'
    ),
    5 => array(
        'id' => '8',
        'field' => 'facebook',
        'default_field_text' => 'HTTP://FACEBOOK.COM/YOURNAME'
    )
); 
```

嗨..首先对我的英语感到抱歉...这就是我想要弄清楚的， **array_1**键被视为字段和表单后值，**array_2**具有字段 + 默认值..

***所以我试图像这样输出***

```
Example Name
Intel
WWW.intel.COM
CONTACT@intel.COM
HTTP://TWITTER.COM/intel
HTTP://FACEBOOK.COM/YOURNAME //from array_2 value 
```

我的代码在这里，但它不起作用..我知道我做错了

```
foreach($array_2 as $item){
    $text = $item['default_field_text'];
    if($array_1[$item['field']] == $item['field']) $text = $array_1[$item['field']];
    echo $text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:01:26.420

尝试使用：

```
if( x === y) 
```

代替：

```
if(x == y) 
```

# php - 从 Joomla 菜单中的 URL 中删除前缀

> ID：12052414
> 
> 赞同：0
> 
> 时间：2012-08-21T09:56:27.903
> 
> 标签：php, joomla

我有一个使用 Joomla 2.5 构建的站点，并且该站点必须与在其他框架中构建的另一个应用程序集成（这不是我们关心的问题）。

Joomla 站点/前端可通过以下 URL **http://www.server.com/ 访问**

该应用程序保存在**http://wwww.server.com/app/下**

我正在尝试使用以下代码片段将 Joomla Admin 中定义的菜单重新创建到应用程序侧边栏中

```
define( '_JEXEC', 1 );
define('JPATH_BASE', realpath(dirname(__FILE__)."/../"));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModules('left');
echo JModuleHelper::renderModule($module[0]); 
```

这会在非 Joomla 页面上完美生成菜单，但是为 HREF 属性生成的 URL`/app/`包含在其中，不应该存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:24:41.333

在对路由、uri 等文件进行了大量研究之后，我在上面提到的代码中添加了一个脏修复/hack 以生成正确的菜单 URL：

```
define( '_JEXEC', 1 );
define('JPATH_BASE', realpath(dirname(__FILE__)."/../"));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
$JConfig=JFactory::getConfig();
$JConfig->set('live_site','http://www.server.com/');
jimport( 'joomla.application.module.helper' );
$module = JModuleHelper::getModules('left');
echo JModuleHelper::renderModule($module[0]); 
```

在我的例子中，我在这里尝试将“live_site”配置设置为站点的基本 url。

我希望这对某人有所帮助。

# django - Django：基于类的视图无法呈现清晰的表单

> ID：12052420
> 
> 赞同：2
> 
> 时间：2012-08-21T09:56:51.197
> 
> 标签：django, forms, django-forms, django-class-based-views, django-crispy-forms

嗨 Stackoverflow 人，

我无法使用基于类的视图呈现清晰的表单。当我使用基于函数的视图时，一切正常。

像往常一样，我生成 forms.py 如下：

```
from django import forms    
from crispy_forms.helper import FormHelper
from crispy_forms.layout import Layout, Div, Submit, HTML, Button, Row, Field
from item.models import Item

class CreateItemForm(forms.ModelForm):
    class Meta:
        model = Item
        exclude = ('user',)

        def __init__(self, *args, **kwargs):
            self.helper = FormHelper()
            self.helper.form_tag = False
            self.helper.form_class = 'form-horizontal'
            self.helper.layout = Layout(
                Fieldset(
                    'Create your item here',
                    'name', 'description', 
                    'save',
                ),
            )
            self.request = kwargs.pop('request', None)
            return super(CreateItemForm, self).__init__(*args, **kwargs) 
```

视图函数非常简单和标准：

```
from django.views.generic.edit import CreateView,
from item.models import Item
from item.forms import CreateItemForm

class ItemCreate(CreateView):
    form_class = CreateItemForm
    model = Item
    template_name = 'item/item_create_form.html' 
```

并且模板也遵循最少的说明：

```
{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}
<h2>Create new Item</h2>
            <form action="." class="crispy form-horizontal" method="post">
                {% crispy form form.helper %}
            </form>
{% endblock %} 
```

我的问题是 Django 会抱怨“VariableDoesNotExist at /item/add/, Failed lookup for key [helper] in ...”。

**酥脆的表单与基于类的视图兼容吗？我怎样才能交出帮助信息以正确创建表单？**

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T10:02:08.790

表单中的构造函数太缩进，这样它属于表单的`Meta`类，但它应该直接在`CreateItemForm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:41:33.553

使用它而不是显示排除

```
fields ('field1','field2','field3') 
```

此处将 field1 和 field2 和 field3 替换为您的字段名称。你想展示的。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T13:58:05.793

我留下了什么

> {{ 形式|酥脆 }}

而不是使用

> % 酥脆的形式 %}

前者只会发出 Django 的基于通用类的视图

# android - android中可以为代理警报添加的位置数量是多少

> ID：12052422
> 
> 赞同：1
> 
> 时间：2012-08-21T09:57:13.033
> 
> 标签：android, geolocation, location, locationmanager, proximity

android中可以为代理警报添加的位置数量限制是多少？我可以添加 100,000 个位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:18:51.820

这是`ProximityListener`在 Android 中的实现，它似乎对添加位置没有硬性限制： [https://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/LocationManagerService。爪哇#L1499](https://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/LocationManagerService.java#L1499)

但是，一次向邻近侦听器添加 100,000 个位置似乎是一个非常糟糕的主意。

您肯定会在某个时候达到应用程序的 Android 内存限制。

[您可以通过http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass)`ActivityManager.getMemoryClass()` ( )获取当前设备的每个应用程序的大致内存类

我建议不要一次向proximityListener 添加100,000 个位置，而是根据设备的已知地理区域添加一个子集。这将需要空间数据库来协助持久位置存储以及返回附近位置的空间查询。

# python - 在python中使用SOAPpy进行magento登录

> ID：12052429
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:57:35.420
> 
> 标签：python, magento, soap

您好，我是 magento 的新手。我有一个关于使用登录的问题`SOAPProxy` 我的代码看起来像

```
from SOAPpy import *
server = SOAPProxy('http://localhost/magento/api/soap/?wsdl')
session = server.login('admin','my_password') 
```

但它给了我一个语法错误，比如

```
xml.sax._exceptions.SAXParseException: <unknown>:1:0: syntax error 
```

我确定我的用户名和密码是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T23:56:31.200

看起来 WSDL 的 URL 可能是错误的：

1.  wsdl 参数应设置为计算结果为 的值`!== null`，即`?wsdl=1`（查看`app/code/core/Mage/Api/Server/.../Adapter/Soap.php`，将 '...' 替换为 'Wsi'、'V2' 或 '' 之一）
2.  您可能禁用了 url 重写，因此请尝试添加`index.php`到您的 url。在您的示例中，这将是`http://localhost/magento/index.php/api/soap/?wsdl=1`
3.  最后，我对 Python 和 SOAPpy 库了解不多，但它可能与 Soap Api v1 不兼容。尝试使用 v2 或 wsi 看看是否有任何变化。

# c# - 调用覆盖方法的祖父实现

> ID：12052430
> 
> 赞同：9
> 
> 时间：2012-08-21T09:57:41.367
> 
> 标签：c#, inheritance

> **可能重复：**
> [如何调用 base.base.method()？](https://stackoverflow.com/questions/2323401/how-to-call-base-base-method)

我在 C# 中的继承遇到了一些麻烦。我画了三个类`A`：`B`和`C`。`C`继承自`B`和。现在班级打电话并且工作正常，但我不能从班级打电话。如果我显然调用该方法将是. 有什么建议吗？`B``A``B``base.Method1``A.method1``C``base.Method1``C``method1``B`

PS 在`A`课堂上有一些标记为私有的字段，因此您只能访问它们

```
class A
{    
    private instance;    
    public virtual void Method1 ()
    {       
        instance = this;
        do something;       
    }
}

class B : A
{
    public override void Method1()
    {
        base.Method1();
        do something;       
    }
}

class C : B
{   
    public override void Method1 ()
    {
        //need A Method1 then do something
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:05:53.647

这是 C# 的一个特性。如果您希望将此方法公开给 C 类，请考虑像这样重构 A：

```
class A
{    
  private instance;    
  public virtual void Method1 ()
  {
    AMethod1();       
  }

  protected void AMethod1()
  {
    instance = this;
    do something;       
  }
} 
```

这将使您能够从 C 中调用此方法：

```
class C : B
{   
  public override void Method1 ()
  {
    AMethod1();
    // do something;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T10:05:27.203

在 C# 中不可能做到这一点，认为可以通过 IL 做到这一点。

对于您的情况，您可以执行以下操作：

```
class A
{
    private int instance;
    public virtual void Method1()
    {
        Method1Impl();
    }

    protected void Method1Impl()
    {
    }
} 
```

现在您可以`A.Method1Impl`从您的 C 类调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:02:54.117

你不能直接跳到`A`using `base.Method1`，因为那只是上面的那个。但是，您可以使用受保护的委托或对 A 的引用来进行直接调用。创建一个受保护的字段`Action _A_Method1`，并在 的构造函数`A`中将其设置为`Method1`( `_A_Method1 = Method1`)。现在您可以使用类`C`( `_A_Method1();`) 中的直接调用。

# jquery - 需要帮助来引导模式 asp.net

> ID：12052431
> 
> 赞同：0
> 
> 时间：2012-08-21T09:57:41.750
> 
> 标签：jquery, asp.net, twitter-bootstrap, modal-dialog

我在 asp.net 页面后面的代码中有一个 if 语句，如下所示：

```
If Session("UserActiv") IsNot Nothing Then
    If Session("UserActiv").ToString() = "N" Then
        ClientScript.RegisterStartupScript(Me.GetType(),
            "Details", "LoadDetails();", True)
    End If
Else
    ClientScript.RegisterStartupScript(Me.GetType(),
        "Details", "LoadDetails();", True)
End If 
```

如果我的会话不是什么都没有，如果它是 N，那么它运行函数 LoadDetails() 如果没有，那么它也加载该函数，如果 Y 则什么也不做。

然后我在我的主页上有这个功能，我唯一的问题是，每次我加载页面时它都会加载这个功能，如果会话是 Y，我已经检查了上限 Y/N 和下限 y/n 问题以及所有大写。所以那里没有问题。

我的 loadDetails() 函数是这样的：

```
<script language="javascript" type="text/javascript">
    function LoadDetails() {
        myModal.load();
    }

    $(document).ready(function () {

        $("#myModal").modal({
            "backdrop": "static",
            // if true, then the backdrop can be closed with a click
            // if false then there is no backdrop.
            "keyboard": false
        })

});
</script> 
```

我希望它像现在一样在 page_load 加载，但只有当会话什么都不是或者它是 N 时。我该怎么做呢？

编辑……编辑……编辑…… .编辑……编辑……编辑………… ..编辑......@RYAN

如果我这样做，当会话为 N 时不会发生任何事情

```
Imports System.Web.Security
Imports System.IO
Imports System.Data
Imports System.Data.OleDb

Partial Class _default
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Session("UserActiv") IsNot Nothing Then
        If Session("UserActiv").ToString() = "N" Then
            runJQueryCode("$('#myModal').modal('show');")
        End If
    Else
        runJQueryCode("$('#myModal').modal('show');")
    End If

    If (Not Page.IsPostBack) Then

        Dim htmlString As New StringBuilder()
        ' Has the request been authenticated?
        If Request.IsAuthenticated Then
            ' Display generic identity information.
            ' This is always available, regardless of the type of
            ' authentication.
            htmlString.Append("<h3>Generic User Information</h3>")
            htmlString.Append("<b>name: </b>")
            htmlString.Append(User.Identity.Name)
            htmlString.Append("<br><b>Authenticated With: </b>")
            htmlString.Append(User.Identity.AuthenticationType)
            htmlString.Append("<br><b>User ID: </b>")
            htmlString.Append(Session("UserID"))
            htmlString.Append("<br><br>")
            htmlString.Append(Session("UserActiv"))
        End If
        ' Was forms authentication used?

        If TypeOf User.Identity Is FormsIdentity Then
            ' Get the ticket.
            Dim ticket As FormsAuthenticationTicket = (DirectCast(User.Identity, FormsIdentity)).Ticket
            htmlString.Append("<h3>Ticket User Information</h3>")
            htmlString.Append("<b>Name: </b>")
            htmlString.Append(ticket.Name)
            htmlString.Append("<br><b>Issued at: </b>")
            htmlString.Append(ticket.IssueDate)
            htmlString.Append("<br><b>Expires at: </b>")
            htmlString.Append(ticket.Expiration)
            htmlString.Append("<br><b>Cookie version: </b>")
            htmlString.Append(ticket.Version)
            htmlString.Append("<br><b>Cookie CookiePath: </b>")
            htmlString.Append(ticket.CookiePath)
            htmlString.Append("<br><b>Cookie Expired: </b>")
            htmlString.Append(ticket.Expired)
            htmlString.Append("<br><b>Cookie isPersistent: </b>")
            htmlString.Append(ticket.IsPersistent)
            htmlString.Append("<br><b>User Data: </b>")
            htmlString.Append(ticket.UserData)

            ' Display the information.
            LegendInfo.Text = htmlString.ToString()
        End If

        If User.IsInRole("Manager") Then
            ' Display sensitive material
            Session("userrole") = "Site Manager"
        ElseIf User.IsInRole("Admin") Then
            ' Display sensitive material
            Session("userrole") = "Site Admin"
        ElseIf User.IsInRole("User") Then
            ' Display sensitive material
            Session("userrole") = "Alm. Bruger"
        Else
            ' Display only bland material
        End If
    End If
End Sub

Public Function runJQueryCode(ByVal message As String) As Boolean
    Dim requestSM As ScriptManager = ScriptManager.GetCurrent(Page)
    If requestSM IsNot Nothing AndAlso requestSM.IsInAsyncPostBack Then
        ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), Guid.NewGuid().ToString(), getjQueryCode(message), True)
    Else
        Page.ClientScript.RegisterClientScriptBlock(GetType(Page), Guid.NewGuid().ToString(), getjQueryCode(message), True)
    End If

    Return True
End Function

Private Function getjQueryCode(ByVal jsCodetoRun As String) As String
    Dim sb As New StringBuilder()
    sb.AppendLine("$(document).ready(function() {")
    sb.AppendLine(jsCodetoRun)
    sb.AppendLine(" });")

    Return sb.ToString()
End Function

'Private Sub cmdSignOut_ServerClick(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdSignOut.ServerClick
'FormsAuthentication.SignOut()
'FormsAuthentication.RedirectToLoginPage()
'End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:48:05.503

将以下代码部分添加到您的 VB.net 代码中：

```
Public Function runJQueryCode(ByVal message As String) As Boolean
        Dim requestSM As ScriptManager = ScriptManager.GetCurrent(Page)
        If requestSM IsNot Nothing AndAlso requestSM.IsInAsyncPostBack Then
            ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), Guid.NewGuid().ToString(), getjQueryCode(message), True)
        Else
            Page.ClientScript.RegisterClientScriptBlock(GetType(Page), Guid.NewGuid().ToString(), getjQueryCode(message), True)
        End If

        Return True
    End Function

    Private Function getjQueryCode(ByVal jsCodetoRun As String) As String
        Dim sb As New StringBuilder()
        sb.AppendLine("$(document).ready(function() {")
        sb.AppendLine(jsCodetoRun)
        sb.AppendLine(" });")

        Return sb.ToString()
    End Function 
```

然后使用：

```
If Session("UserActiv") IsNot Nothing Then
        If Session("UserActiv").ToString() = "N" Then
           runJQueryCode("SUCCESS!modaljquerystuff")
        End If
    Else
        runJQueryCode("FAIL!modaljquerystuff")
End If 
```

# javascript - Jquery 延迟未按预期运行

> ID：12052444
> 
> 赞同：0
> 
> 时间：2012-08-21T09:58:12.927
> 
> 标签：javascript, jquery, jquery-ui

我有一个对话框，我希望在 5 秒后关闭。

我有一个延迟声明，但无论如何它都会关闭，没有任何延迟。

这是代码：

```
$('#dialog').dialog('option','buttons',[]).html('File tags and info updated successfully.').delay(5000).dialog('close'); 
```

对我做错了什么以及如何解决它有任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:02:05.650

`delay`函数用于动画，可以这样使用：

```
$('#foo').slideUp(300).delay(800).fadeIn(400); 
```

你应该使用简单的`setTimeout`：

```
$('#dialog').dialog('option','buttons',[]).html('File tags and info updated successfully.');

setTimeout(function () {
  $('#dialog').dialog('close');
}, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:39:19.253

有一个名为[jquery-timing](http://creativecouple.github.com/jquery-timing/)的插件。用它来计时你拥有的任何 jQuery 东西。

在您的情况下，您只能将“延迟”替换为“等待”：

```
$('#dialog').dialog('option','buttons',[]).html('File tags and info updated successfully.').wait(5000).dialog('close'); 
```

玩得开心！

# ios - 获取苹果开发者密钥

> ID：12052447
> 
> 赞同：3
> 
> 时间：2012-08-21T09:58:17.867
> 
> 标签：ios, cordova

我已经获得了专门用于 phonegap 构建的苹果开发者帐户。有没有什么方法可以在没有 mac 和 xcode 的情况下获取 sigin 密钥来上传 phonegap 构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:06:41.120

欢迎来到 MAC 封闭的世界。您可以尝试虚拟化 OS X 或其他任何东西，但如果您打算上传到 App Store……您必须通过 MAC 进行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:03:11.250

不，上传需要唯一的签名密钥，只能由 Mac 上的 xcode 使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T11:46:14.820

我无法尝试，但使用 OpenSSL 它也应该适用于 Windows：[http ://www.iandevlin.com/blog/2012/11/phonegap/building-an-ios-signing-key-for-phonegap-in-视窗](http://www.iandevlin.com/blog/2012/11/phonegap/building-an-ios-signing-key-for-phonegap-in-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-05T22:28:16.780

也许这是旧消息，但您现在可以在 Apple Developer 网站上创建所需的证书和配置。PhoneGap 有很好的详细说明。[http://docs.build.phonegap.com/en_US/3.1.0/signing_signing-ios.md.html](http://docs.build.phonegap.com/en_US/3.1.0/signing_signing-ios.md.html)

# math - erlang中的积分/导数

> ID：12052449
> 
> 赞同：1
> 
> 时间：2012-08-21T09:58:21.240
> 
> 标签：math, erlang, integral, derivative

我知道 Erlang 通常不用于这类事情，但是否有已经编写了积分/导数的数值函数（如 GNU Octave 中的四边形，取函数和两个数字）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:31:28.910

您可以使用功能编程方法解决问题。

如您所知，导数定义为 **dF(X) = ( F(X+dX) - F(X) ) / dX**

让我们创建泛型函数，它返回派生函数：

```
-module( calc ).
-export( [ d/2 ] ).

d( F, Dx ) ->
        fun( X ) ->
                ( F( X + Dx ) - F ( X ) ) / Dx
        end. 
```

解释器中的使用示例：

```
1> c(calc).
{ok,calc}
2> 
```

让我们定义**Sqr**函数：**( X * X )**

```
2> Sqr = fun( X ) -> X * X end.
#Fun<erl_eval.6.82930912>
3> 
```

让我们从**Sqr得到导数**

```
3> DSqr = calc:d( Sqr, 0.001 ).
#Fun<calc.0.111170057>
4> 
```

检查**Sqr**函数：

```
4> [ Sqr( X ) || X <- lists:seq( 1, 10 ) ].
[1,4,9,16,25,36,49,64,81,100]
5> 
```

并检查导数（如您所知 - (X * X) 的导数是 (2 * X)）

```
5> [ DSqr( X ) || X <- lists:seq( 1, 10 ) ].
[2.0009999999996975,4.000999999999699,6.000999999999479,
 8.0010000000037,10.001000000002591,12.001000000005035,
 14.00100000000748,16.000999999988608,18.000999999983947,
 20.000999999993496] 
```

**因为使用dX = 0.001**的有限值- 我们没有得到明确的结果，但它非常接近真实`[ 2, 4, 6, 8, 10, 12, 14, 16, 18, 20 ]`

积分函数可以用类似的方式定义。定积分是：

![定积分公式](../Images/b0f48294b468b13bc21b4885eda7bbe3.png)

所以反导数是：

![在此处输入图像描述](../Images/023e7f9215d284c72b122dbfae30016b.png)

`F(0)`- 持续的。而定积分可以通过任何数值积分算法来表示。

# ios - 使用 UIImageView 格式化 UItextview

> ID：12052451
> 
> 赞同：0
> 
> 时间：2012-08-21T09:58:47.123
> 
> 标签：ios, uitextview, core-text

在我的应用程序中，我需要格式化文本和图像，就像我在 ScreenShot 中显示的那样。 ![在此处输入图像描述](../Images/d71855ac3fafb923f61ab8756b258c0f.png)

我该如何进行这种类型的格式化？我应该选择 CoreText 吗？如果是，我该怎么做？

我已经浏览了 Raywenderlich 的示例，这里是链接 -[核心文本示例](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)

但它与我想要的不同。那么任何人都可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:46:40.840

您应该看看[DTCoreText](https://github.com/Cocoanetics/DTCoreText) - 我在我的应用程序中使用它已经有很长时间了，它可以处理属性字符串或 HTML（或两者）。你可以嵌入图片和链接，一年来对我来说一切都很好。支持代码（即错误得到修复）。

这个类是专门为像你这样的应用程序设计的。在他的演示应用程序中，他有“战争与和平”，因此您可以看到它处理巨大的任务！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:08:53.790

我知道这不完全是您的要求，但我建议您使用`UIWebView`!

在其中，`UIWebView`您可以显示 HTML 代码，这些代码非常容易格式化，就像您的问题中显示的示例一样。

# powershell-2.0 - Iterating a powershell hash of hash

> ID：12052452
> 
> 赞同：1
> 
> 时间：2012-08-21T09:58:49.490
> 
> 标签：powershell-2.0

This is my powershell code to iniltialize and populate the hash of hash

```
$thash = @{};
$thash.add("10.192.200.35",@{OS="XP";BIT="32"})
$thash.add("10.192.200.36",@{OS="XP";BIT="64"})
$thash.add("10.192.200.37",@{OS="XP";BIT="32"}) 
```

I am trying to iterate and access the elements in the hash of hash like this

```
foreach($index in $thash)
{
   echo $thash[$index]["BIT"];
   echo $thash[$index]["OS"]
} 
```

But i am getting the error

```
Cannot index into a null array.
At line:
    +        echo $thash[$index][ <<<< "BIT"];
    + CategoryInfo          : InvalidOperation: (BIT:String) [], RuntimeException
    + FullyQualifiedErrorId : NullArray 
```

How can i access the underlying keys inside the hash of hash?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:00:58.780

Had to play with it a bit, but here's what you need:

```
$thash = @{};
$thash.add("10.192.200.35",@{OS="XP";BIT="32"})
$thash.add("10.192.200.36",@{OS="XP";BIT="64"})
$thash.add("10.192.200.37",@{OS="XP";BIT="32"})

foreach ($key in $thash.Keys)
{
    $key
    $thash[$key]["OS"]
    $thash[$key]["BIT"]
} 
```

# environment-variables - phpDocumentor - “phpdoc 是否在您的 php.ini 文件的路径或 include_path 中？”

> ID：12052455
> 
> 赞同：1
> 
> 时间：2012-08-21T09:58:55.923
> 
> 标签：environment-variables, php, phpdoc

我正在尝试运行 phpDocumentor 并收到此错误...我在 Google 上进行了广泛搜索，但找不到有效的解决方案，不幸的是我无法通过 PEAR 安装，所以我不得不从他们的 github 下载并尝试手动做事。

我已根据需要设置了*环境变量*：

```
C:\xampp\php;C:\xampp\php\pear\phpDocumentor;C:\xampp\php\pear\phpDocumentor\bin; 
```

*php.ini*中的 include_path也是：

```
include_path = ".;C:\xampp\php\pear\phpDocumentor;C:\xampp\php\pear\phpDocumentor\bin;C:\xampp\php\PEAR" 
```

我正在尝试使用以下代码生成文档：`phpdoc -d Z: -t Z:\docs\phpDoc`

但后来我收到以下错误：

> 正在解析配置文件 phpDocumentor.ini...（在 C:\php\pear\data/PhpDocumentor/ 中找到）... 错误：无法打开目录 C:/xampp/php/pear/PhpDocumentor 中的 phpDocumentor.ini -Is phpdoc in php.ini 文件中的路径或 include_path？

我对此感到困惑，非常感谢任何有关使其正常工作的建议，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T19:43:16.570

正在解析配置文件 phpDocumentor.ini...（在 C:\php\pear\data/PhpDocumentor/ 中找到）... 错误：无法打开目录 C:/xampp/php/pear/PhpDocumentor 中的 phpDocumentor.ini -Is phpdoc in php.ini 文件中的路径或 include_path？

错误是 phpdoc.bat 设置的原因。简单的解决方案是将文件夹 C:/xampp/php/pear/PhpDocumentor 复制到 C:\php\pear\data\ 位置，或者您可以在 phpdoc.bat 文件中设置路径。检查您是否没有任何 phpDocumentor.ini 文件，然后从 Internet 创建或下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T16:00:41.593

“在 C:\php\pear\data/PhpDocumentor 中找到”部分错误让我想知道您是否在 C:\php\ 或 C:\xampp\php 中安装了东西。phpDocumentor.ini 文件可能在 C:\php\ 而不是 C:\xampp\php\ 中吗？

顺便说一句，您可能不需要 $PATH 中的“C:\xampp\php\pear\phpDocumentor”...只是它的 /bin 子目录，以便让“phpdoc”可执行文件可用于您的命令行提示符。

# variables - 从自定义操作到 WIX 变量的 WIX 属性

> ID：12052457
> 
> 赞同：2
> 
> 时间：2012-08-21T09:59:00.220
> 
> 标签：variables, wix, custom-action

可能看起来像一个微不足道的问题，但我无法让它发挥作用。

问题：您可以将自定义操作中的 WIX 属性设置为 WIX 变量吗？

这是我尝试过的：

```
<?define VAR = "ProductName"?>

<Product Id="*" Name="$(var.VAR)" Language="1033" Version="1.0.0.0" UpgradeCode="$(var.UpgradeCode)">

<Property Id="VAR">ProductName</Property>

<CustomAction Id='GetProductName' BinaryKey='GetProductName' DllEntry='GetProductName' Execute='immediate' Return='check' />
<CustomAction Id="CustomAction1" Return="check" Execute="immediate" Property="VAR" Value="[PRODUCTNAME]" />

<InstallUISequence>
  <Custom Action='GetProductName' After='AppSearch' />
  <Custom Action='CustomAction1' After='GetProductName' />
</InstallUISequence> 
```

PRODUCTNAME 是我从自定义操作中设置的属性。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:42:25.617

WiX 变量是构建/编译概念，而不是安装时概念。这是不可能的。

你真正想做什么？如果您在安装期间尝试更改 ProductName 属性，请注意您不能。一旦安装开始，该属性是不可变的。

# three.js - 将 webGl 渲染更改为 Canvas 渲染

> ID：12052461
> 
> 赞同：0
> 
> 时间：2012-08-21T09:59:13.453
> 
> 标签：three.js

要制作边界框，我使用以下代码：

```
 'vtk_bounding_box': function(data) {  
                    if ((browser == 'explorer') ||(THIS_IS_TOUCH_DEVICE)) return;
                    var geometry = new THREE.Geometry();
                    var material = new THREE.MeshBasicMaterial({color: 0xFF0000,wireframe: true});
                    box_info = '';

                    for (var i = 0; i < 8; i++){
                        box_info += i+': x:'+ data[i].x +'y:'+ data[i].y +'z:'+ data[i].z
                        geometry.vertices.push( new THREE.Vector3( data[i].x - FocalPoint[0],  data[i].y - FocalPoint[1], data[i].z - FocalPoint[2]));                
                    }                   

                    //Making Bounding Box
                    geometry.faces.push( new THREE.Face4(0,1,2,3));                   
                    geometry.faces.push( new THREE.Face4(2,3,4,7)); 
                    geometry.faces.push( new THREE.Face4(4,5,6,7)); 
                    geometry.faces.push( new THREE.Face4(5,6,1,0));
                    geometry.faces.push( new THREE.Face4(1,2,7,6)); 
                    geometry.faces.push( new THREE.Face4(0,3,4,5));

                    mesh = new THREE.Mesh( geometry, material);                 
                    scene.add( mesh );
                }, 
```

当我将渲染类型从 webGl 更改为画布时？当我旋转它时，模型的一部分有时会消失。我想说它可以显示完整的模型吗？但经过一些轮换后只能画几行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:14:48.120

为了使它起作用，`CanvasRenderer`您需要使材料双面。在 r.50 中，您可以这样做：

```
var material = new THREE.MeshBasicMaterial( { color: 0xFF0000, wireframe: true, side: THREE.DoubleSide } ); 
```

# jakarta-ee - Web 项目中的 ClassNotFoundException

> ID：12052463
> 
> 赞同：2
> 
> 时间：2012-08-21T09:59:22.430
> 
> 标签：jakarta-ee, spring-mvc

我正在尝试制作一个 Spring Web MVC 项目。当我尝试运行它时，它会给出 ClassNotFoundException，尽管文件存在于嵌入在项目中的库中。任何人都可以建议它。

```
Following is the error :

Aug 21, 2012 11:05:51 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Aug 21, 2012 11:05:52 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'dispatcher'
Aug 21, 2012 11:05:52 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.apache.commons.dbcp.BasicDataSource] for bean with name 'myDataSource' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1223)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:858)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:212)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4149)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4458)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:514)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1288)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1473)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:824)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:350)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1244)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1215)
        ... 47 more
Aug 21, 2012 11:05:52 AM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /SpringHibernate4 threw load() exception
java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1244)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1215)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:858)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:212)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4149)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4458)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:514)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1288)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1473)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:824)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:350)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
        at java.lang.Thread.run(Thread.java:619)
Aug 21, 2012 11:05:55 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'dispatcher'
Aug 21, 2012 11:05:55 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.apache.commons.dbcp.BasicDataSource] for bean with name 'myDataSource' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1223)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:858)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:212)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1244)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1215)
        ... 24 more
Aug 21, 2012 11:05:55 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet dispatcher
java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1244)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1215)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:858)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:212)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
        at java.lang.Thread.run(Thread.java:619)
Aug 21, 2012 11:08:09 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Aug 21, 2012 11:08:09 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Aug 21, 2012 11:08:10 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'dispatcher'
Aug 21, 2012 11:08:10 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.apache.commons.dbcp.BasicDataSource] for bean with name 'myDataSource' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1223)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:858)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:872)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:212)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4149)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4458)
        at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1249)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:377)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1244)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1215)
        ... 33 more
Aug 21, 2012 11:08:10 AM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /SpringHibernate4 threw load() exception
java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSource
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
        at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:408)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1244)
        at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1215)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:858)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:52:42.173

正如你的日志所说：

`...Cannot find class [org.apache.commons.dbcp.BasicDataSource]...`

您需要在项目中包含 commons dbcp 包。

你可以在[这里得到](http://commons.apache.org/dbcp/download_dbcp.cgi)

# css - 文本区域 - 不可调整大小

> ID：12052466
> 
> 赞同：1
> 
> 时间：2012-08-21T09:59:39.707
> 
> 标签：css, browser, textarea, resizable

我的 cshtml 文件中有以下标记。但是，文本框区域在左下角有一个可拖动的角，拖动时会重新调整文本区域的大小并影响页面上的所有其他文本框/下拉列表等。

```
 <td class="label">
                Notes :
            </td>
            <td class="value" rowspan="3">
                @Html.TextAreaFor(model => model.Notes, new { cols = "40%", style = "width:250px;", @maxlength = "255" })
            </td> 
```

我可以添加什么来禁用 textareafor 的可调整大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:02:06.563

这不是 C# 或 ASP.net 问题。

其实这完全没有问题，这是您使用的浏览器的一个功能。

您应该可以使用 CSS3 属性来摆脱它，`resize`例如；

```
textarea {
    resize: none;
} 
```

或者，如果只需要垂直调整大小：

```
textarea {
     resize: vertical;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:01:00.637

您的浏览器会执行此操作。它增强了用户体验。为什么要禁用它？

但是，您可以通过[应用一些 CSS](http://productforums.google.com/forum/#!topic/chrome/0jzrfB7m3N4)来做到这一点：

```
textarea { 
    resize: none; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:03:07.157

诀窍在于 css `resize:none`：

采用 ：

```
@Html.TextAreaFor(model => model.Notes, new { cols = "40%", style = "width:250px;resize:none", @maxlength = "255" }) 
```

# c - 函数返回类型的类型限定符

> ID：12052468
> 
> 赞同：7
> 
> 时间：2012-08-21T09:59:46.680
> 
> 标签：c

给定以下 C 源代码：

```
const int foo(void)
{
    return 42;
} 
```

`gcc`编译没有错误，但使用`-Wextra`or`-Wignored-qualifiers`时，会出现以下警告：

```
warning: type qualifiers ignored on function return type 
```

我知道在 C++ 中有充分的理由区分`const`函数和非`const`函数，例如在运算符重载的上下文中。

然而，在纯 C 语言中，我看不出为什么`gcc`不发出错误，或者更简洁地说，为什么标准允许`const`函数。

为什么允许在函数返回类型上使用类型限定符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:04:25.877

考虑：

```
#include <stdio.h>

const char* f()
{
    return "hello";
}
int main()
{
    const char* c = f();

    *(c + 1) = 'a';

    return 0;
} 
```

如果`const`返回值不允许，则[代码](http://ideone.com/5jRbd)将编译（并在运行时导致未定义的行为）。

`const`当函数返回指向不可修改的指针时很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:02:35.037

如果从函数返回的**值**被限定为`const`.

即使返回的值不合格，您也无法更改它。

```
foo() = -42; /* impossible to change the returned value */ 
```

所以使用`const`是多余的（通常省略）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:12:34.820

因为它对指针类型有意义，所以我的猜测是它只是让语法更简单，所以没有人认为值得将`const`非指针返回值作为错误。

此外，您与 C++ 的比较有点偏离，因为 C++ 中的常量方法是通过`const`last 声明的：

```
int foo() const; 
```

`const`方法存在和具有返回值的方法之间没有关系`const`，它们是完全不同的事物。语法使这一点相当清楚。

# c# - 如何在图片框控件中突出显示图像的特定部分

> ID：12052470
> 
> 赞同：3
> 
> 时间：2012-08-21T09:59:54.323
> 
> 标签：c#, vb.net, c#-4.0, c#-3.0

我想在应用程序的运行时突出显示图片框控件中图像的特定部分。如何使用 c# 实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:14:51.653

这里有一个示例，当用户移动鼠标悬停图像时，绘制一个 alpha 矩形悬停在图片框上。请注意，您可以根据需要突出显示图片。

```
public partial class Form2 : Form
{
    private Rectangle mHoverRectangle = Rectangle.Empty;
    private const int HOVER_RECTANGLE_SIZE = 20;

    public Form2()
    {
        InitializeComponent();

        pictureBox.MouseMove += new MouseEventHandler(pictureBox_MouseMove);
        pictureBox.Paint += new PaintEventHandler(pictureBox_Paint);
        pictureBox.MouseLeave += new EventHandler(pictureBox_MouseLeave);
    }

    void pictureBox_MouseLeave(object sender, EventArgs e)
    {
        mHoverRectangle = Rectangle.Empty;
    }

    void pictureBox_Paint(object sender, PaintEventArgs e)
    {
        if (mHoverRectangle != Rectangle.Empty)
        {
            using (Brush b = new SolidBrush(Color.FromArgb(150, Color.White)))
            {
                e.Graphics.FillRectangle(b, mHoverRectangle);
            }
        }
    }

    void pictureBox_MouseMove(object sender, MouseEventArgs e)
    {
        mHoverRectangle = new Rectangle(
            e.Location.X - HOVER_RECTANGLE_SIZE / 2,
            e.Location.Y - HOVER_RECTANGLE_SIZE / 2,
            HOVER_RECTANGLE_SIZE,
            HOVER_RECTANGLE_SIZE);

        pictureBox.Invalidate();
    } 
```

}

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:09:53.743

试试这个：[单击一个控件并使其变暗](https://stackoverflow.com/questions/927321/clicking-a-control-and-causing-it-to-shade/1022383#1022383)

在选定的答案中，不是获取每个像素并对其进行着色，而是取一部分图片并对其进行着色。希望能帮助到你。

# c++ - C++11 自动和函数返回类型

> ID：12052474
> 
> 赞同：5
> 
> 时间：2012-08-21T10:00:25.183
> 
> 标签：c++, c++11, type-inference

我知道、和（例如在“for each”循环中）之间的区别`auto`，但让我感到惊讶的是：`auto&``const auto``const auto&`

```
std::string bla;
const std::string& cf()
{
    return bla;
}

int main (int argc, char *argv[])
{
    auto s1=cf();
    const std::string& s2=cf();
    s1+="XXX"; // not an error
    s2+="YYY"; //error as expected
} 
```

那么有人能告诉我`x`表达式中的类型何时`auto x = fun();`与返回值的类型不同`fun()`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T10:11:34.227

的规则`auto`与模板类型推导相同：

```
template <typename T>
void f(T t); // same as auto
template <typename T>
void g(T& t); // same as auto&
template <typename T>
void h(T&& t); // same as auto&&

std::string sv;
std::string& sl = sv;
std::string const& scl = sv;

f(sv); // deduces T=std::string
f(sl); // deduces T=std::string
f(scl); // deduces T=std::string
f(std::string()); // deduces T=std::string
f(std::move(sv)); // deduces T=std::string

g(sv); // deduces T=std::string, T& becomes std::string&
g(sl); // deduces T=std::string, T& becomes std::string&
g(scl); // deduces T=std::string const, T& becomes std::string const&
g(std::string()); // does not compile
g(std::move(sv)); // does not compile

h(sv); // deduces std::string&, T&& becomes std::string&
h(sl); // deduces std::string&, T&& becomes std::string&
h(scl); // deduces std::string const&, T&& becomes std::string const&
h(std::string()); // deduces std::string, T&& becomes std::string&&
h(std::move(sv)); // deduces std::string, T&& becomes std::string&& 
```

一般来说，如果你想要一个副本，你使用`auto`，如果你想要一个参考，你使用`auto&&`。`auto&&`保留了引用的常量，也可以绑定到临时对象（延长它们的生命周期）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:09:23.463

在 g++-4.8 中，对函数返回类型的自动推导进行了增强：

2012-03-21 杰森美林

```
Implement return type deduction for normal functions with -std=c++1y. 
```

您需要 -std=c++1y 或 -std=gnu++1y 标志。

这有效：auto sluggo() { return 42; }

```
int
main()
{
    auto s1 = sluggo();
    s1 += 7;
} 
```

OP 问题仅`+="YYY"`按预期出错。你甚至可以用 auto 声明 cf：

```
#include <string>

std::string bla;

const auto&
cf()
{
    return bla;
}

int
main()
{
    auto s1 = cf();
    const std::string& s2 = cf();
    s1 += "XXX"; // not an error
    s2 += "YYY"; // error as expected
} 
```

它仍然错误`+="YYY"`。

# c# - 将 jquery 字符串传递给代码隐藏文件 ASP.NET C#

> ID：12052475
> 
> 赞同：0
> 
> 时间：2012-08-21T10:00:25.977
> 
> 标签：c#, jquery, asp.net

我有一个从 jquery 生成的字符串，例如*string1,string2,string3,stringn*。我需要使用 jquery 将此数据提交到另一个将处理字符串的 asp 页面。如何将此字符串获取到 C# 代码？我想使用文件后面的代码来处理这个逗号分隔的列表。在 ASP.NET\C# 中非常新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:03:26.050

您需要向您的 asp.net 应用程序发出 AJAX 请求。jQuery 有一个 $.ajax() 方法可以帮助您更轻松地完成此操作。

您也可以使用传统的“表单”，让 jquery 将数据粘贴在隐藏字段中并触发提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:16:54.260

您将需要使用 jquery post 方法，如下所示：

```
$.post('File Address', {data : your String}); 
```

然后在 asp.net 页面中检索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:49:19.730

首先，您需要将 JSON 发布到服务器：为此，您可以有机会通过 $.ajax() 发送，或者您可以像这样访问 PageMethod：（这也是给定页面上的 javascript 代码）

```
 //obj is the object what you have on the clientside. (f.e. an array of strings)
 var jsonString = JSON.stringify(obj, '');

 //in this example the method's name is LoadItems and the IfSuccess 
 //and IfError methods for callbacks
 PageMethods.LoadItems(jsonString, this.IfSuccess, this.IfError, this); 
```

在服务器端之后，如果您只有字符串，则需要将 json 反序列化为指定的类、object[] 或 string[]。这是您的案例的示例：

```
 [WebMethod]
            public static string LoadStrings(string jsonString)
            {
                try
                {
                    JavaScriptSerializer s = new JavaScriptSerializer();

                    string[] stringArray = s.Deserialize<string[]>(jsonString);
                }
                ...
            } 
```

使用此解决方案，您可以访问 stringArray 中的字符串。

# sql - PL/pgSQL 函数未返回预期值

> ID：12052477
> 
> 赞同：0
> 
> 时间：2012-08-21T10:00:33.293
> 
> 标签：sql, postgresql, triggers, plpgsql, postgresql-9.1

我在 plpgsql 中编写了一个触发器函数，它作用`AFTER INSERT`于一个表。

触发器函数调用另外两个函数，第一个函数没有返回正确的值。我对此束手无策，搜索没有找到任何答案。

凸轮有人阐明了这个问题，好吗？

下面的触发函数：

```
CREATE TRIGGER timetotaketrigger
  AFTER INSERT
  ON "Prescription Schema"."TimeToTake"
  FOR EACH ROW
  EXECUTE PROCEDURE failtimetotakeinsert(); 
```

上述触发器按预期工作。

正在调用 failtimetotakeinsert，源为：

```
CREATE OR REPLACE FUNCTION failtimetotakeinsert()
RETURNS trigger AS '
DECLARE

    -- declare variables to hold the information from
    -- the row being inserted
    -- and save the data from the new row
    drug_name character(32);
    drug_strength character(8);
    drug_strength_unit character(16);
    drug_dosage integer;

    row_counts integer = 0;
    frequency integer = 0;
    difference integer = 0;

 BEGIN
RAISE NOTICE ''Frequency at the start is %'',frequency;
    -- save the data from the new row
    drug_name = NEW."DrugName";
    drug_strength = NEW."DrugStrength";
    drug_strength_unit = NEW."DrugStrengthUnit";
    drug_dosage = NEW."DrugDosage";

    -- get the frequency 
    SELECT INTO frequency GetPrescriptionFrequency(drug_name,
                                    drug_strength,
                                    drug_strength_unit,
                                    drug_dosage);

RAISE NOTICE ''frequency is %'',frequency;        
    -- count the rows from the current table
    SELECT INTO row_counts CountTimeToTake(drug_name,drug_strength,
                                           drug_strength_unit,drug_dosage);
RAISE NOTICE ''row counts are %'',row_counts;

    -- work out the difference
    difference = row_counts - frequency;
RAISE NOTICE ''Difference is %'',difference;
    -- now check the two figures
    IF difference > 0 THEN
        RAISE EXCEPTION ''More rows than frequency requires'';
    END IF;

    RETURN NULL;
 END;
'  LANGUAGE 'plpgsql' 
```

我遇到的问题是在这个函数中调用的第一个函数，因为当从 PgAdmin sql environemtn 调用时它没有返回值，结果如我所料。

```
CREATE OR REPLACE FUNCTION GetPrescriptionFrequency
    (character, character, character, integer)
RETURNS integer AS '
#variable_conflict error
DECLARE
   -- Declare drug_name,
   --         drug_strength,
   --         drug_strength_unit and
   --         drug_dosage as an alias for the argument variables
   -- normally referenced with the $1,$2,$3 and $4 identifiers

   drug_name ALIAS FOR $1;
   drug_strength ALIAS FOR $2;
   drug_strength_unit ALIAS FOR $3;
   drug_dosage ALIAS FOR $4;

   -- declare a variable to hold the count

   freq integer := 0;

BEGIN

  SELECT INTO freq COUNT(*) 
      FROM "Prescription Schema"."PrescriptionItem" 
      WHERE "PrescriptionItem"."DrugName" = drug_name AND
            "PrescriptionItem"."DrugStrength" = drug_strength AND
            "PrescriptionItem"."DrugStrengthUnit" = drug_strength_unit AND
            "PrescriptionItem"."DrugDosage" = drug_dosage;
--       IF NOT FOUND THEN
--          RAISE EXCEPTION ''prescription item not found %'', drug_strength;
--       END IF;
   IF freq IS NULL THEN 
     RETURN 0;
   ELSE
     RETURN freq;
   END IF;
END;
' LANGUAGE 'plpgsql' 
```

另一个函数运行正常，但我也包含了源代码：

```
CREATE OR REPLACE FUNCTION CountTimeToTake(character,character,character,integer)
    RETURNS integer AS '
DECLARE
   -- Declare drug_name,
   --         drug_strength,
   --         drug_strength_unit and
   --         drug_dosage as an alias for the argument variables
   -- normally referenced with the $1,$2,$3 and $4 identifiers

   drug_name ALIAS FOR $1;
   drug_strength ALIAS FOR $2;
   drug_strength_unit ALIAS FOR $3;
   drug_dosage ALIAS FOR $4;
   -- declare a variable to hold the count
   row_count integer := 0;
BEGIN

-- count the number of TimeToTake rows for the given
-- parameter values

   SELECT INTO row_count COUNT(*) FROM "Prescription Schema"."TimeToTake"
          WHERE "TimeToTake"."DrugName" = drug_name AND
                "TimeToTake"."DrugStrength" = drug_strength AND
                "TimeToTake"."DrugStrengthUnit" = drug_strength_unit AND
                "TimeToTake"."DrugDosage" = drug_dosage;

   return row_count;
END;
' LANGUAGE 'plpgsql' 
```

我已经尝试了我在互联网上可以找到的所有内容，并且在你们之前的问题中也无济于事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:22:37.803

## 扳机

简化和重写：

```
CREATE OR REPLACE FUNCTION failtimetotakeinsert()
  RETURNS trigger AS
$func$
BEGIN

IF GetPrescriptionFrequency(NEW."DrugName", NEW."DrugStrength"
                           ,NEW."DrugStrengthUnit", NEW."DrugDosage") 
          > CountTimeToTake(NEW."DrugName",NEW."DrugStrength"
                           ,NEW."DrugStrengthUnit",NEW."DrugDosage") THEN
   RAISE EXCEPTION 'More rows than frequency requires';
END IF;

RETURN NULL;

END
$func$   LANGUAGE plpgsql; 
```

### 要点

*   对函数体进行美元引用以避免引用问题是一种很好的做法。

*   `plpgsql`是关键字，`LANGUAGE plpgsql`不必引用。

*   除非您确实必须这样做，否则*永远*不要使用愚蠢的古老类型。`character(n)`它使用空白填充的字符串并截断字符串，并且很少做任何有用的事情。它只是出于历史原因和标准合规性。只需使用`text`（实际上与 相同`varchar`），或者如果您确实需要在类型级别强制执行最大长度，请使用`varchar(n)`. 我只用了`text`99%。请务必阅读[有关字符类型的手册](http://www.postgresql.org/docs/current/interactive/datatype-character.html)。`

*   plpgsql 中的赋值运算符是`:=`. SQL 样式`=`也适用于 ATM，但没有记录，可能会在没有警告的情况下消失。

*   删除毫无意义`RAISE NOTICE 'Frequency at start is %', frequency;`- 总是`0`。

*   从根本上简化。

*   如果该函数`CountTimeToTake()`应使用驼峰式大小写定义，则需要将其括在双引号中。但据我所见，并非如此。

## 功能

修复、简化和重写：

```
CREATE OR REPLACE FUNCTION GetPrescriptionFrequency
    (_drug_name text, _drug_strength text, _drug_strength_unit text
                                         , _drug_dosage integer)
  RETURNS integer LANGUAGE sql AS 
$func$
SELECT count(*)::int
FROM  "Prescription Schema"."PrescriptionItem" p
WHERE  p."DrugName"         = _drug_name
AND    p."DrugStrength"     = _drug_strength
AND    p."DrugStrengthUnit" = _drug_strength_unit
AND    p."DrugDosage"       = _drug_dosage;
$func$ 
```

### 要点

*   `ALIAS`在 PostgreSQL 9.1 中使用参数名称而不是：

*   **！****数据类型`character`**的使用在这里显然是错误的，可能是您的关键问题。 `character`是同义词，`character(1)`将字符串截断为第一个字符。

*   在 plpgsql 函数内部的查询中，变量和参数是可见的，并且优先于列名。这可能会导致意想不到的结果。在这种情况下，您必须对列名进行表限定以使其明确。
    使用与列名不冲突的参数和变量名是一种很好的做法。我养成了使用`_`前缀的习惯，我从不将其用于列名，但只要避免命名冲突，任何方法都可以。

*   我建议不要使用带有 PostgreSQL 标识符的驼峰式大小写。只使用小写字母并避免大量的双引号和混淆。

*   `count()`永不返回`NULL`，您不需要提供这种情况。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)：

> 需要注意的是，除了count之外，这些函数在没有选择行时返回一个空值。

*   `count()`返回`bigint`，因此`integer`在这种情况下强制转换为。

*   对于这种简单的情况，[`LANGUAGE sql`函数](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html)可能会做得更好。

*   相应地修复您的其他功能`CountTimeToTake()`。

# python - 解释 virtualenv 激活命令

> ID：12052478
> 
> 赞同：3
> 
> 时间：2012-08-21T10:00:38.810
> 
> 标签：python, shell, virtualenv

在 Flask[文档](http://flask.pocoo.org/docs/installation/)中，激活 virtualenv 环境的命令是：

```
$ . venv/bin/activate 
```

谁能解释它是如何工作的，第一个点是什么以及为什么 shell 命令的第二个参数中的 shell 脚本文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T10:05:27.160

它是源命令/点运算符，参见例如[http://ss64.com/bash/period.html](http://ss64.com/bash/period.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:11:31.133

这 。命令对应于“源”命令。它会导致在执行脚本（在本例中为激活）中设置的环境设置在脚本执行后保留。这意味着脚本中设置的 env 设置在它返回后仍然可用。

activate 本身会改变执行的python，即调用activate 后，'python' 命令将引用virtualenv 设置的本地python 安装。这对于安装多个具有不同库的“python”环境是必要的。

激活后你会看到提示前缀实际使用的是哪个python。

# c# - 使用 select c# 后从 socket.reciveMessageFrom 接收 msgInfo

> ID：12052479
> 
> 赞同：0
> 
> 时间：2012-08-21T10:00:38.497
> 
> 标签：c#, sockets, udp

我在我的计算机上使用了几个虚拟 IP，然后我收到一条消息，我需要知道我在哪个 Ip 上收到了消息。

我使用了 ReceiveMessageFrom，在我添加选择之前效果很好。选择后收到的信息无效

我的代码：

```
 IPEndPoint ipep2 = new IPEndPoint(IPAddress.Any , xxx);
    Socket socket2 = new Socket(AddressFamily.InterNetwork, 
        SocketType.Dgram, ProtocolType.Udp);
    socket2.Bind(ipep2);

    ArrayList copySocketsList = new ArrayList();
    copySocketsList.Add(socket2);

    Socket.Select(copySocketsList  , null , null , 1000);

    foreach(Socket soc in copySocketsList)
    {
        int recv = soc.ReceiveMessageFrom(data , 0 , 1024 , ref flags , ref Remote , out ipInfo);

    } 
```

在该示例中， ipInfo 无效，但如果我们删除选择它会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:15:17.927

你可能想看看这个： [Socket.ReceiveMessageFrom 方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivemessagefrom.aspx)

> 但是，返回的 IPPacketInformation 对象仅对设置了套接字选项后到达本地计算机的数据包有效。如果套接字在绑定到本地端点（显式地通过 Bind 方法或隐式地通过 Connect、ConnectAsync、SendTo 或 SendToAsync 方法之一）与其第一次调用 ReceiveMessageFrom 方法之间发送数据包，则调用 ReceiveMessageFrom 方法将为这些数据包返回无效的 IPPacketInformation 对象。
> 
> 为确保所有 IPPacketInformation 对象均有效，应用程序应在使用 SetSocketOption(SocketOptionLevel, SocketOptionName, Boolean) 方法将其绑定到本地端点之前将 PacketInformation 套接字选项设置为 true。

# javascript - Access-Control-Allow-Origin 不允许 Origin null

> ID：12052483
> 
> 赞同：4
> 
> 时间：2012-08-21T10:01:06.820
> 
> 标签：javascript, jquery, ajax, html

json响应在`{"userName":"clevermeal835","userRole":"Participant"}`

我收到一条成功的警报消息，但在阅读响应时出现错误：

> XMLHttpRequest 无法加载 url Origin null 是 Access-Control-Allow-Origin 不允许的。

如果我从命令提示符运行代码

> --禁用网络安全

我得到回应。任何人都可以在不使用命令提示符的情况下帮助我解决这个问题。下面的代码。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="Scripts/jquery-1.4.2.min.js"></script>

<script>
$(document).ready(
    function() {
        $("#jsonpbtn2").click(function() {
            var uid = "clevermeal835";
            var pwd = "Welcome_1";
            var userType = "participant";
            var surl="http://localhost:8080/RESTlet_WS/MobiSignIn/{\"userName\":\""+uid+"\",\"password\":\""+pwd+"\",\"userType\":\""+userType+"\"}/";

$.ajax({
    type : 'GET',
    contentType: "application/json; charset=utf-8",
    url : surl,
    dataType : 'json',
    headers : {Accept : "application/json","Access-Control-Allow-Origin" : "*"},
    crossDomain : true,
    success :SucceedFunc ,
    error : function(data, textStatus, errorThrown) {
        console.log("error"+' '+JSON.stringify(data) + textStatus  + errorThrown);}
    });

function SucceedFunc(data) {
    alert("success");
    var userName = data.userName;
    alert(userName);
    }
});
});
</script> 
</head>
<body>
<input id="jsonpbtn2" type="submit" value="button" />
</body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:21:35.683

`file://`您似乎正在通过在 Chrome 中提供您的网页来测试您的网站。出于安全原因，Chrome 不允许您从`file://`资源执行 Ajax 调用。

这里的安全威胁是有人可以通过电子邮件向您发送一个`.html`文件，当使用`file://`.文件资源）。

相反，您应该通过从为 API 页面提供服务的同一`localhost:8080`服务器提供服务来测试您的页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T14:10:07.197

尝试添加：

```
beforeSend: function( xhr ) {
     xhr.overrideMimeType( 'text/plain; charset=UTF-8' );
} 
```

到您的 Ajax 调用。

# c - 使用 stdprn 的 C 编译错误

> ID：12052484
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:01:07.317
> 
> 标签：c, windows, compilation, windows-8, visual-studio-2012

我的操作系统是：Windows 8

IDE：VS 2012

这是我的 C 程序。（来自书）

```
/* print_it.c—This program prints a listing with line numbers! */
#include <stdlib.h>
#include <stdio.h>

void do_heading(char *filename);

int line = 0, page = 0;

int main( int argv, char *argc[] )
{
  char buffer[256];
  FILE *fp;

  if( argv < 2 ) 
  {
    fprintf(stderr, "\nProper Usage is: " );
    fprintf(stderr, "\n\nprint_it filename.ext\n" );
    return(1);
  }

  if (( fp = fopen( argc[1], "r" )) == NULL )
  {
    fprintf( stderr, "Error opening file, %s!", argc[1]);
    return(1);
  }

  page = 0;
  line = 1;
  do_heading( argc[1]);

  while( fgets( buffer, 256, fp ) != NULL )
  {
    if( line % 55 == 0 ) 
      do_heading( argc[1] );
    fprintf( stdprn, "%4d:\t%s", line++, buffer );
  }

  fprintf( stdprn, "\f" );
  fclose(fp);
  return 0;
}

void do_heading( char *filename )
{
  page++;

  if ( page > 1)
    fprintf( stdprn, "\f" );

  fprintf( stdprn, "Page: %d, %s\n\n", page, filename );
} 
```

试图编译。打开开发人员命令提示符，然后输入

```
cl print_it.c 
```

得到这个屏幕（一堆错误和警告）

[http://content.screencast.com/users/TT13/folders/Jing/media/ff48bfe2-7e83-4d93-b1c5-db7ab7e553b8/2012-08-21_1458.png](http://content.screencast.com/users/TT13/folders/Jing/media/ff48bfe2-7e83-4d93-b1c5-db7ab7e553b8/2012-08-21_1458.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:04:34.780

**stdprn**不是标准 C 的一部分。 stdprn 是 DOS 编译器提供的流。应该可以避免。

您可以尝试*关闭*ANSI 兼容性以开始`stdprn`工作。（**[参考](http://support.microsoft.com/kb/23976)**）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T12:07:07.453

你可以输入“stdout”而不是“stdprn”

# javascript - 我可以自动切换用户的键盘输入法吗？

> ID：12052489
> 
> 赞同：0
> 
> 时间：2012-08-21T10:01:19.063
> 
> 标签：javascript, jquery, methods, input

我想在某些表单字段被聚焦时自动切换用户的输入法。
例如，这里有 2 个字段：
字段 1（中文名称）：***_* ___** **字段 2（日文名称）：*****_ *_****** 

 ***页面可以在字段1自动切换输入法为中文，在
关注字段时可以在字段2自动切换输入法为日语

会有一些 jquery 脚本来做到这一点吗？
或者会有其他脚本语言的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:05:18.343

在浏览器中无法这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:29:12.467

没有简单的方法可以做到这一点（并且可能没有完全可靠的方法，因为我想象键盘布局不同）。但是，您可以尝试寻找一些您可以实现的键码映射（或者如果您真的想要这个，请创建您自己的映射）。

如果您创建/找到了一些键码映射，则可以使用事件键码将按下的键转换为如果操作系统中的键盘“语言”已更改，则该键将执行的操作。

您可以通过设置一些 javascript 来捕获键码和字符来创建自己的映射，并将它们存储在一个对象中。一旦你点击了所有相关的键，你就会有一个键码到字符的映射，你可以输出、保存然后重新使用来改变每个“keyup”的输入。

谁知道呢，如果我觉得无聊，我可能会看看这样做是否有趣，看看它是否真的有效。

**编辑**

我现在其实对这个很感兴趣。我写了一点 javascript，它确实有效（在操作系统中切换键盘语言，我可以获得与英语相同的键码的阿拉伯字符，这意味着它看到相同的键码与语言无关）

所以我开始思考，我们可以为操作系统使用预制地图吗？Linux毕竟是开源的，所以让我们找到一些映射。我用谷歌搜索（我需要用谷歌搜索更多），但我发现这是一种随机语言。[http://rffr.de/de-dvorak-keysym.xmodmap](http://rffr.de/de-dvorak-keysym.xmodmap)。这意味着，如果您足够努力，您将获得所需的映射（我确定某个地方有一个适用于所有语言的 linux 存储库，我最终会找到它）

然后它只是创建一个解析器将它变成一个漂亮的 javascript 对象和一个简单的 jquery 插件的一个例子。

我能感觉到 GIT 来了***

# iphone - 如何增加视频文件的持续时间 - 目标c

> ID：12052490
> 
> 赞同：0
> 
> 时间：2012-08-21T10:01:20.230
> 
> 标签：iphone, objective-c, ios, audio, media

我正在尝试合并音频和视频文件。

我已经用下面的代码完成了。

```
NSString *audioUrl=videoAudioTrackPath;//[[NSBundle mainBundle] pathForResource:@"chalne" ofType:@"mp3"];
    NSString *videoUrl=videoTempPath;//[[NSBundle mainBundle] pathForResource:@"whenever" ofType:@"mp4"];
    audioAsset = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:audioUrl] options:nil];
    videoAsset = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:videoUrl] options:nil];

    mixComposition = [AVMutableComposition composition];

    compositionCommentaryTrack = [mixComposition addMutableTrackWithMediaType: AVMediaTypeAudio  preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration) 
                                        ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] 
                                         atTime:kCMTimeZero error:nil];

    compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo                                                                                    preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) 
                                   ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] 
                                    atTime:kCMTimeZero error:nil];

    _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition 
                                                    presetName:AVAssetExportPresetPassthrough];   

       //NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
    NSString *exportPath = videoChangedPath;//[[NSHomeDirectory() stringByAppendingPathComponent:@"/Documents/"] stringByAppendingPathComponent:@"export.mov"];
    NSLog(@"%@",exportPath);

    NSURL    *exportUrl = [NSURL  fileURLWithPath:exportPath];

    if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) 
    {
        [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
    }

    _assetExport.outputFileType = @"com.apple.quicktime-movie";
    NSLog(@"file type %@",_assetExport.outputFileType);
    _assetExport.outputURL = exportUrl;
    _assetExport.shouldOptimizeForNetworkUse = YES;

    [_assetExport exportAsynchronouslyWithCompletionHandler: ^(void ) {      
        //[self btnListPressed:btnList];
        //[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(btnListPressed:) userInfo:nil repeats:FALSE];
    }]; 
```

**我的目的** 我想改变视频文件的声音。对于同样的震动，我提取了视频文件的音轨并改变了它的音高和持续时间。然后合并两个文件。这样我就可以改变视频文件的声音。

现在的问题是，如果我更改音频的持续时间，那么视频与它不匹配。

所以我想根据音频文件更改视频持续时间。

有没有办法做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:30:37.467

您应该尝试对 mixComposition 使用[insertEmptyTimeRange:](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVMutableComposition_Class/Reference/Reference.html)方法。这个新的 TimeRange 将是您的音频资产的额外时间。

# java - 以编程方式创建 junit 报告

> ID：12052493
> 
> 赞同：4
> 
> 时间：2012-08-21T10:01:29.253
> 
> 标签：java, xml, ant, junit, report

我想使用 ant 以编程方式创建 junit 报告。我已经看到之前在这里提出过这个问题：[Ant：以编程方式创建 JUnit 报告任务](https://stackoverflow.com/questions/3916717/antcreate-junit-report-task-programmatically)，在这里：以[编程方式创建 JUnit 报告](https://stackoverflow.com/questions/8381919/creating-junit-report-programmatically)。我的代码有点不同，我不知道所有这些东西都去哪里了。我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="myproject" default="junitreport" basedir=".">
    <target name="junitreport">
        <junitreport todir="./testreport">
            <fileset dir="./junitreports">
                <include name="*.xml"/>
            </fileset>
            <report format="noframes" todir="./testreport"/>
        </junitreport>
    </target>
</project> 
```

源代码 ：

```
FileSet fs = new FileSet();
fs.setDir(new File("./junitreports"));
fs.createInclude().setName("*.xml");
XMLResultAggregator aggregator = new XMLResultAggregator();
aggregator.addFileSet(fs);
AggregateTransformer transformer = aggregator.createReport();
transformer.setTodir(new File("./testreport")); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T20:49:25.613

您已经配置了 junitreport ant 任务，但您也应该执行它。

```
Project project = new Project();
project.setName("myproject");
project.init();

Target target = new Target();
target.setName("junitreport");
project.addTarget(target);

FileSet fs = new FileSet();
fs.setDir(new File("./junitreports"));
fs.createInclude().setName("*.xml");
XMLResultAggregator aggregator = new XMLResultAggregator();
aggregator.setProject(project);
aggregator.addFileSet(fs);
AggregateTransformer transformer = aggregator.createReport();
transformer.setTodir(new File("./testreport"));

target.addTask(aggregator);
project.executeTarget("junitreport"); 
```

# javascript - 无法在 Rails 项目中实现 javascript 翻转计数器

> ID：12052498
> 
> 赞同：0
> 
> 时间：2012-08-21T10:02:04.067
> 
> 标签：javascript, ruby-on-rails, asset-pipeline

我在 Rails 项目中实现 javacript 翻转计数器时遇到问题。

在纯 html 页面中，一切正常，但我认为资产管道存在一些问题。

我将所有需要的文件添加到资产目录中。图像、javascripts、css 文件。

这是我包含的文件：

```
 <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <link href="/assets/counter.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery-flipcounter.js?body=1" type="text/javascript"></script>
  <script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

以下是应该包含的脚本（来自演示）：

```
 <!-- My flip counter script, REQUIRED -->
     <script type="text/javascript" src="js/flipcounter.js"></script>
     <!-- Style sheet for the counter, REQUIRED -->
    <link rel="stylesheet" type="text/css" href="css/counter.css" /> 
```

HTML：

```
 <div id="counter" class="flip-counter"></div> 
```

和 application.js 中的代码（**在纯 HTML 文件中工作**）：

```
 $(document).ready(function(){
   var myCounter = new flipCounter("counter", {inc: 1, pace: 500});
    ...}); 
```

这是带有工作计数器的 rar 存档：[https](https://dl.dropbox.com/u/86122402/cnanney-apple-style-flip-counter-13fd00129a41.rar) ://dl.dropbox.com/u/86122402/cnanney-apple-style-flip-counter-13fd00129a41.rar 。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:09:37.093

尝试这个，

**对于导轨 2.xx**

移动你`js/flipcounter.js`的`public/javascript`文件夹和

1.  `application.html.erb`在您的`layout folder` **或**所需的视图文件中写下以下行

**对于导轨 3.xx**

移动您`js/flipcounter.js`的`assets/javascript`文件夹并在您的

如果在你的`application.js`

```
 //= require_tree .           # if present 
  //= require flipcounter.js   # if require_tree. not present 
```

**你的问题在**

```
 <script type="text/javascript" src="js/flipcounter.js"></script> 
```

# android - 如何通过wifi查找设备的IP地址？

> ID：12052502
> 
> 赞同：1
> 
> 时间：2012-08-21T10:02:07.573
> 
> 标签：android, ip, wifi, ip-address, android-wifi

我想获取IP地址。使用该 IP 地址必须检测连接到特定网络/设备的所有设备。并且应该能够获得 MAC 地址？

```
 tv=(TextView)findViewById(R.id.tv);
 wifi=(WifiManager)getSystemService(WIFI_SERVICE) ;
 btn=(Button)findViewById(R.id.btn);
 btn.setOnClickListener(new View.OnClickListener() {
 @Override
 public void onClick(View v) {
 try {
 InetAddress inet=InetAddress.getLocalHost();
 Toast.makeText(getApplicationContext(),inet.toString(),Toast.LENGTH_LONG).show();
 } catch (Exception e) {
 System.out.println(" ");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:28:06.043

如果您想检测连接到任何网络的“模拟器”或 android 设备的 IP 地址，请在您的程序中使用此代码。它将为您提供网络分配给您设备的确切 IP 地址。

```
try {
     for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) 
    {
      NetworkInterface intf = en.nextElement();     
      for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses();enumIpAddr.hasMoreElements();) 
       {
         InetAddress inetAddress = enumIpAddr.nextElement();
         if (!inetAddress.isLoopbackAddress())
          return inetAddress.getHostAddress().toString(); 
       }
     }

    }
     catch (SocketException ex) 
     { 
       Log.e("ServerActivity", ex.toString());
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T20:12:28.273

我们可以使用 Wifi manager 类来获取设备的 IP 地址：

在清单中添加“ACCESS_WIFI_STATE”权限

```
WifiManager myWifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE);

WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();
//gets the Ip address in hex form, We need to convert it to integer and then finally to string to display it 

int myIp = myWifiInfo.getIpAddress();     
int intMyIp3 = myIp/0x1000000;
int intMyIp3mod = myIp%0x1000000;

int intMyIp2 = intMyIp3mod/0x10000;
int intMyIp2mod = intMyIp3mod%0x10000;

int intMyIp1 = intMyIp2mod/0x100;
int intMyIp0 = intMyIp2mod%0x100;

t3.setText(String.valueOf(intMyIp0) + "." + String.valueOf(intMyIp1)
                    + "." + String.valueOf(intMyIp2)
                    + "." + String.valueOf(intMyIp3)
          ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:17:17.687

[Wi-Fi Direct场景下如何获取每台设备的IP地址？](https://stackoverflow.com/questions/10053385/how-to-get-each-devices-ip-address-in-wifi-direct-scenario)

[http://developer.android.com/guide/topics/connectivity/wifip2p.html](http://developer.android.com/guide/topics/connectivity/wifip2p.html)

这些链接可能会对您有所帮助。

# php - 替换 HTML 图像的标题

> ID：12052506
> 
> 赞同：2
> 
> 时间：2012-08-21T10:02:26.673
> 
> 标签：php, regex, image, title

我试图弄清楚如何`title="Title is here"`在 PHP 中替换图像的标题部分（），但我无法让它工作，所以有人可以帮忙吗？

标题实际上可以是任何东西，所以我需要找到`title"{anything here}"`并替换它（如下所示）。

我正在尝试我们`preg_replace()`，但如果有更好的方法，我愿意接受建议。

我尝试了几种不同的变体，但我认为这并不太离谱——

```
$pattern = '#^title="([a-zA-Z0-9])"$#';
$replacement = 'title="Visit the '.$service['title'].' page';
$service_image = preg_replace($pattern, $replacement, $service_image); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:15:13.183

```
<?php

$html = '<img src="whatever.jpg" title="Anything">';

$dom = new DOMDocument;
$dom->loadHTML($html);
$img = $dom->getElementsByTagName("img")->item(0);
/** @var $img DOMElement  Now, $img contains the DOM note representing the image. */
$img->setAttribute("title", "Whatever you want here!");

/* Export the image alone (if not used like this,
 * you'd get a complete HTML document including head and body).
 *
 * This ensures you only get the image.
 */
echo $dom->saveXML($img); 
```

请不要使用 HTML 的正则表达式。这对你有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T10:20:37.910

使用这个片段：

```
$tag = '<img title="My Old Title" src="localhost"  alt="this is the alt"/>';
echo preg_replace('/(title)=("[^"]*")/i','title="My New Title"',$tag);
// <img title="My New Title" src="localhost" alt="this is the alt"> 
```

# php - 在 php 问题中解析 XML

> ID：12052510
> 
> 赞同：0
> 
> 时间：2012-08-21T10:02:34.243
> 
> 标签：php, xml

我调用commission junction API 并将其作为响应接收。

```
$xml_response = simplexml_load_file($xml_response);
exit($xml_response); 
```

如果我做

```
 $xml = new SimpleXMLElement($xml_response); 
```

我收到应用程序错误。（不知道如何找到这是什么错误，我可以在哪里设置错误代码以显示这部分？）

```
Warning: simplexml_load_file(): I/O warning : failed to load external entity " 106032782478435B & H Photo VideoComputers & Solutions > Laptops > MacBookshttp://www.jdoqocy.com/click-4107027-10603278?url=http://www.bhphotovideo.com/c/product/871865-REG/Apple_MD101LL_A_13_3_MacBook_Pro_Notebook.html/kw/APMBPMD101LL&cjsku=APMBPMD101LLcjo:6USDApple 13.3" MacBook Pro Notebook Computer, Intel Core i5 Dual-Core 2.5 GHz CPU, Internal 4GB DDR3 RAM, Features 500GB 5400 RPM Hard Drive, Intel HD 4000 Graphics, LED-Backlit 13.3" (33.8 cm) Display, Native 1280 x 800 Resolution, Wireless 802.11n WiFi & Bluetooth 4.0, Dual USB 3.0 Ports & Thunderbolt Port, Ships with Mac OS X Lion, Free OS X in /var/www/html/site.net/beta/library/API/CommissionJunction.php on line 119 
```

** 更新 **

完整的 XML 响应：

```
string(9582) "<?xml version="1.0" encoding="UTF-8"?>
<cj-api><products total-matched="5" records-returned="5" page-number="1"><product><ad-id>10603278</ad-id><advertiser-id>2478435</advertiser-id><advertiser-name>B &amp; H Photo Video</advertiser-name><advertiser-category>Computers &amp; Solutions &gt; Laptops &gt; MacBooks</advertiser-category><buy-url>http://www.kqzyfj.com/click-4107027-10603278?url=http://www.bhphotovideo.com/c/product/871865-REG/Apple_MD101LL_A_13_3_MacBook_Pro_Notebook.html/kw/APMBPMD101LL&amp;cjsku=APMBPMD101LL</buy-url><catalog-id>cjo:6</catalog-id><currency>USD</currency><description>Apple 13.3" MacBook Pro Notebook Computer, Intel Core i5 Dual-Core 2.5 GHz CPU, Internal 4GB DDR3 RAM, Features 500GB 5400 RPM Hard Drive, Intel HD 4000 Graphics, LED-Backlit 13.3" (33.8 cm) Display, Native 1280 x 800 Resolution, Wireless 802.11n WiFi &amp; Bluetooth 4.0, Dual USB 3.0 Ports &amp; Thunderbolt Port, Ships with Mac OS X Lion, Free OS X Mountain Lion Upgrade MacBook Pro MacBook 13.3" MacBook Pro Notebook Computer</description><image-url>http://www.bhphotovideo.com/images/items/871865.jpg</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple 13.3" MacBook Pro Notebook Computer</name><price>1139.0</price><retail-price>0.0</retail-price><sale-price>0.0</sale-price><sku>APMBPMD101LL</sku><upc>885909582969</upc></product><product><ad-id>10273684</ad-id><advertiser-id>242732</advertiser-id><advertiser-name>MacMall Affiliate Advantage Network</advertiser-name><advertiser-category>Systems &gt; MacBook Pro &gt; MacBook Pro w/ Intel Core i5 Processor &gt; 2.53 GHz MacBook Pro Computers</advertiser-category><buy-url>http://www.jdoqocy.com/click-4107027-10273684?url=http://www.macmall.com/p/7628870?dpno=9232227&source=zwb12166&amp;cjsku=9232227</buy-url><catalog-id>cjo:535</catalog-id><currency>USD</currency><description>2.5GHz dual-core Intel Core i5  Turbo Boost up to 3.1GHz  4GB 1600MHz memory  13.3" LED-backlit glossy widescreen display  Bluetooth 4.0  720p FaceTime camera  USB 3.0  Thunde</description><image-url>http://image1.cc-inc.com/prod/9232000/9232227_xlg.jpg</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>13.3 MacBook Pro dual-core Intel Core i5 2.5GHz  4GB RAM  500GB 5400-rpm hard drive  Intel HD Graphics 4000  Mac OS X Lion</name><price>1138.94</price><retail-price>1199.0</retail-price><sale-price>0.0</sale-price><sku>9232227</sku><upc>885909582969</upc></product><product><ad-id>10541923</ad-id><advertiser-id>2326608</advertiser-id><advertiser-name>Music123</advertiser-name><advertiser-category>Pro Audio/Computers &amp; Peripherals/Mac Computers/Notebook Mac Computers</advertiser-category><buy-url>http://www.dpbolvw.net/click-4107027-10541923?url=http://www.music123.com/pro-audio/apple-macbook-pro-13-2.5ghz-dual-core-i5-md101ll-a/h86479000000000&amp;cjsku=H86479</buy-url><catalog-id>cjo:2321</catalog-id><currency>USD</currency><description>One would think that it would be hard to improve on a great line of products, but year after year the team at Apple find a way, and they have added some powerful features to the next-generation of their MacBook Pro line of laptops. This 13 MacBook Pro (MD101LL/A) has everything youve ever looked for in an Apple computer, plus a whole lot more. Extremely fast processor upgrades, integrated HD graphics, super fast hard drive storage, USB 3.0 connections, and more. This generation of the MacBook Pro is ready for high-level performance. Top-of-the-line processors.The 13-inch model also speeds things up with either the 2.5GHz Intel Core i5 or the 2.9GHz Intel Core i7  the fastest mobile dual-core processor available. With Turbo Boost speeds up to 3.6GHz, these processors bring more power to everything you do. Learn more about processor performanceThe very latest graphics.The new integrated Intel HD Graphics 4000 processor boosts performance by up to 60 percent. That extra power gives you a smoother, more fluid experience than before. Its still highly efficient, too, so you get long battery life when youre out and about.The fastest, most versatile I/O in a notebook.Imagine accessing multiple streams of uncompressed HD video  from your MacBook Pro  at speeds that let you edit an HD feature film in real time. Thunderbolt technology allows you to connect the high-performance peripherals that make it possible. Ultrafast and ultra flexible, the Thunderbolt pipeline is up to 12 times faster than FireWire 800 and offers unprecedented expansion capabilities.FaceTime HD camera. Say hi in high def.Get more of your friends in on the fun with crisp, widescreen HD video. The picture is so clear, it will look and feel almost like youre in the same room. You can make 720p HD calls from your MacBook Pro to any Mac with a FaceTime HD camera. You can also make video calls to iPad, iPhone 4, iPhone 4S, iPod touch, and other Intel-based Mac computers.Multi-Touch trackpad. Be more hands-on.The Multi-Touch trackpad is the most natural way to interact with whats on your screen, and the smooth glass surface gives you plenty of room for gestures. Pinch to zoom in and out, swipe to flip through photos, rotate to adjust an image, and much more. The buttonless design lets you click anywhere. And if youre coming from a right-click world, you can right-click with two fingers or configure a right-click area on the trackpad. The more you use the Multi-Touch trackpad, the more youll wonder how you ever did without it.A long-lasting battery. Charge less. Do more.MacBook Pro delivers amazing battery life. And thats with more powerful processors and faster graphics than ever. An energy-efficient processor architecture with an integrated video encoder, along with automatic graphics switching in the 15-inch model, helps improve battery life. So you can get up to 7 hours on a single charge.Its very well connected.MacBook Pro automatically finds available networks and allows you to join them</description><image-url>http://static.music123.com/img/brand/m123/cmn/imagecomingsoon.gif</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple MacBook Pro 13" 2.5GHz Dual-Core i5 (MD101LL/A)</name><price>1199.0</price><retail-price>1199.0</retail-price><sale-price>0.0</sale-price><sku>H86479</sku><upc>885909582969</upc></product><product><ad-id>10474050</ad-id><advertiser-id>2045991</advertiser-id><advertiser-name>Best Buy</advertiser-name><advertiser-category>Computing-LaptopsandNetbooks</advertiser-category><buy-url>http://www.kqzyfj.com/click-4107027-10474050?url=http://www.bestbuy.com/site/Apple%AE+-+MacBook%AE+Pro+-+13.3%22+Display+-+4GB+Memory+-+500GB+Hard+Drive/5430505.p?id=1218646127726&skuId=5430505&cmp=RMX&ky=2oh0NrwOl4j1qjMx3Oy2gXfVGhMUl0WiJ&ci_src=11138&ci_sku=5430505&amp;cjsku=5430505</buy-url><catalog-id>cjo:1791</catalog-id><currency>USD</currency><description>MacBook Pro features Intel's new third-generation Core architecture for a boost in processor and memory speeds. New next-generation graphicsdeliver performance levels that are up to 60 percent faster than before. And high-speed Thunderbolt I/O lets you transfer data at rates up to10 GBps. The MacBook Pro is a great computer that just got even greater.</description><image-url>http://images.bestbuy.com/BestBuy_US/images/products/5430/5430505_sc.jpg</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple - MacBook Pro - 133" Display - 4GB Memory - 500GB Hard Drive</name><price>1199.99</price><retail-price>0.0</retail-price><sale-price>1199.99</sale-price><sku>5430505</sku><upc>885909582969</upc></product><product><ad-id>10479833</ad-id><advertiser-id>2014561</advertiser-id><advertiser-name>Apple Store US &amp; Apple Store Canada</advertiser-name><advertiser-category>Family : Macbook_Pro</advertiser-category><buy-url>http://www.kqzyfj.com/click-4107027-10479833?url=http://store.apple.com/us/xc/product/MD101LL/A?cid=AOS-US-AFF-FEED&aosid=p201&amp;cjsku=MD101</buy-url><catalog-id>cjo:1861</catalog-id><currency>USD</currency><description>The fastest Intel processors.       Now topping top speed.       MacBook Pro features Intel's new third-generation Core architecture, which boosts the speed of the processor and memory. And that means you have one powerful notebook on your hands. 50 percent faster graphics.       You'll be impressed. Instantly.       The 15-inch MacBook Pro features new discrete NVIDIA graphics that are up to 50 percent faster than before. New integrated Intel graphics also perform up to 50 percent faster. Thunderbolt and USB 3       I/O that sets new standards.       Thunderbolt technology lets you connect multiple high-performance devices to a single port - with data transfer rates up to 10 Gbps. Two new USB 3 ports are up to 10x faster than USB 2.</description><image-url>http://store.storeimages.cdn-apple.com/2782/as-images.apple.com/is/image/AppleInc/MC700</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple MacBook Pro 13&amp;quot; 2.5GHz (MD101LL/A) - Dual Core Intel Core i5, 2.5GHz, 4GB memory, 500GB hard drive, 13-inch</name><price>1199.0</price><retail-price>0.0</retail-price><sale-price>0.0</sale-price><sku>MD101</sku><upc>885909582969</upc></product></products></cj-api>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:10:54.557

我假设您使用的是 SimpleXML。

这部分永远不会起作用：`$item->cj-api->`, - 是一个运算符。如果您使用的是 SimpleXML，请尝试`{'cj-api'}`.

更核心的问题是`$item->cj-api`因为没有 cj-api 元素存在，所以它不起作用。那是不需要处理的根节点。[请参阅http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)中的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:36:59.163

您的 XML 格式不正确。

尝试解析 XML 时，`buy-url`元素包含无效内容。

```
XML Parsing Error: not well-formed
Location: file://///cc-fs1/users$/gavin.roberts/Desktop/Noname1.xml
Line Number 2, Column 1793:<cj-api><products total-matched="5" records-returned="5" page-number="1"><product><ad-id>10603278</ad-id><advertiser-id>2478435</advertiser-id><advertiser-name>B &amp; H Photo Video</advertiser-name><advertiser-category>Computers &amp; Solutions &gt; Laptops &gt; MacBooks</advertiser-category><buy-url>http://www.kqzyfj.com/click-4107027-10603278?url=http://www.bhphotovideo.com/c/product/871865-REG/Apple_MD101LL_A_13_3_MacBook_Pro_Notebook.html/kw/APMBPMD101LL&amp;cjsku=APMBPMD101LL</buy-url><catalog-id>cjo:6</catalog-id><currency>USD</currency><description>Apple 13.3" MacBook Pro Notebook Computer, Intel Core i5 Dual-Core 2.5 GHz CPU, Internal 4GB DDR3 RAM, Features 500GB 5400 RPM Hard Drive, Intel HD 4000 Graphics, LED-Backlit 13.3" (33.8 cm) Display, Native 1280 x 800 Resolution, Wireless 802.11n WiFi &amp; Bluetooth 4.0, Dual USB 3.0 Ports &amp; Thunderbolt Port, Ships with Mac OS X Lion, Free OS X Mountain Lion Upgrade MacBook Pro MacBook 13.3" MacBook Pro Notebook Computer</description><image-url>http://www.bhphotovideo.com/images/items/871865.jpg</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple 13.3" MacBook Pro Notebook Computer</name><price>1139.0</price><retail-price>0.0</retail-price><sale-price>0.0</sale-price><sku>APMBPMD101LL</sku><upc>885909582969</upc></product><product><ad-id>10273684</ad-id><advertiser-id>242732</advertiser-id><advertiser-name>MacMall Affiliate Advantage Network</advertiser-name><advertiser-category>Systems &gt; MacBook Pro &gt; MacBook Pro w/ Intel Core i5 Processor &gt; 2.53 GHz MacBook Pro Computers</advertiser-category><buy-url>http://www.jdoqocy.com/click-4107027-10273684?url=http://www.macmall.com/p/7628870?dpno=9232227&source=zwb12166&amp;cjsku=9232227</buy-url><catalog-id>cjo:535</catalog-id><currency>USD</currency><description>2.5GHz dual-core Intel Core i5  Turbo Boost up to 3.1GHz  4GB 1600MHz memory  13.3" LED-backlit glossy widescreen display  Bluetooth 4.0  720p FaceTime camera  USB 3.0  Thunde</description><image-url>http://image1.cc-inc.com/prod/9232000/9232227_xlg.jpg</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>13.3 MacBook Pro dual-core Intel Core i5 2.5GHz  4GB RAM  500GB 5400-rpm hard drive  Intel HD Graphics 4000  Mac OS X Lion</name><price>1138.94</price><retail-price>1199.0</retail-price><sale-price>0.0</sale-price><sku>9232227</sku><upc>885909582969</upc></product><product><ad-id>10541923</ad-id><advertiser-id>2326608</advertiser-id><advertiser-name>Music123</advertiser-name><advertiser-category>Pro Audio/Computers &amp; Peripherals/Mac Computers/Notebook Mac Computers</advertiser-category><buy-url>http://www.dpbolvw.net/click-4107027-10541923?url=http://www.music123.com/pro-audio/apple-macbook-pro-13-2.5ghz-dual-core-i5-md101ll-a/h86479000000000&amp;cjsku=H86479</buy-url><catalog-id>cjo:2321</catalog-id><currency>USD</currency><description>One would think that it would be hard to improve on a great line of products, but year after year the team at Apple find a way, and they have added some powerful features to the next-generation of their MacBook Pro line of laptops. This 13 MacBook Pro (MD101LL/A) has everything youve ever looked for in an Apple computer, plus a whole lot more. Extremely fast processor upgrades, integrated HD graphics, super fast hard drive storage, USB 3.0 connections, and more. This generation of the MacBook Pro is ready for high-level performance. Top-of-the-line processors.The 13-inch model also speeds things up with either the 2.5GHz Intel Core i5 or the 2.9GHz Intel Core i7  the fastest mobile dual-core processor available. With Turbo Boost speeds up to 3.6GHz, these processors bring more power to everything you do. Learn more about processor performanceThe very latest graphics.The new integrated Intel HD Graphics 4000 processor boosts performance by up to 60 percent. That extra power gives you a smoother, more fluid experience than before. Its still highly efficient, too, so you get long battery life when youre out and about.The fastest, most versatile I/O in a notebook.Imagine accessing multiple streams of uncompressed HD video  from your MacBook Pro  at speeds that let you edit an HD feature film in real time. Thunderbolt technology allows you to connect the high-performance peripherals that make it possible. Ultrafast and ultra flexible, the Thunderbolt pipeline is up to 12 times faster than FireWire 800 and offers unprecedented expansion capabilities.FaceTime HD camera. Say hi in high def.Get more of your friends in on the fun with crisp, widescreen HD video. The picture is so clear, it will look and feel almost like youre in the same room. You can make 720p HD calls from your MacBook Pro to any Mac with a FaceTime HD camera. You can also make video calls to iPad, iPhone 4, iPhone 4S, iPod touch, and other Intel-based Mac computers.Multi-Touch trackpad. Be more hands-on.The Multi-Touch trackpad is the most natural way to interact with whats on your screen, and the smooth glass surface gives you plenty of room for gestures. Pinch to zoom in and out, swipe to flip through photos, rotate to adjust an image, and much more. The buttonless design lets you click anywhere. And if youre coming from a right-click world, you can right-click with two fingers or configure a right-click area on the trackpad. The more you use the Multi-Touch trackpad, the more youll wonder how you ever did without it.A long-lasting battery. Charge less. Do more.MacBook Pro delivers amazing battery life. And thats with more powerful processors and faster graphics than ever. An energy-efficient processor architecture with an integrated video encoder, along with automatic graphics switching in the 15-inch model, helps improve battery life. So you can get up to 7 hours on a single charge.Its very well connected.MacBook Pro automatically finds available networks and allows you to join them</description><image-url>http://static.music123.com/img/brand/m123/cmn/imagecomingsoon.gif</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple MacBook Pro 13" 2.5GHz Dual-Core i5 (MD101LL/A)</name><price>1199.0</price><retail-price>1199.0</retail-price><sale-price>0.0</sale-price><sku>H86479</sku><upc>885909582969</upc></product><product><ad-id>10474050</ad-id><advertiser-id>2045991</advertiser-id><advertiser-name>Best Buy</advertiser-name><advertiser-category>Computing-LaptopsandNetbooks</advertiser-category><buy-url>http://www.kqzyfj.com/click-4107027-10474050?url=http://www.bestbuy.com/site/Apple%AE+-+MacBook%AE+Pro+-+13.3%22+Display+-+4GB+Memory+-+500GB+Hard+Drive/5430505.p?id=1218646127726&skuId=5430505&cmp=RMX&ky=2oh0NrwOl4j1qjMx3Oy2gXfVGhMUl0WiJ&ci_src=11138&ci_sku=5430505&amp;cjsku=5430505</buy-url><catalog-id>cjo:1791</catalog-id><currency>USD</currency><description>MacBook Pro features Intel's new third-generation Core architecture for a boost in processor and memory speeds. New next-generation graphicsdeliver performance levels that are up to 60 percent faster than before. And high-speed Thunderbolt I/O lets you transfer data at rates up to10 GBps. The MacBook Pro is a great computer that just got even greater.</description><image-url>http://images.bestbuy.com/BestBuy_US/images/products/5430/5430505_sc.jpg</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>Apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple - MacBook Pro - 133" Display - 4GB Memory - 500GB Hard Drive</name><price>1199.99</price><retail-price>0.0</retail-price><sale-price>1199.99</sale-price><sku>5430505</sku><upc>885909582969</upc></product><product><ad-id>10479833</ad-id><advertiser-id>2014561</advertiser-id><advertiser-name>Apple Store US &amp; Apple Store Canada</advertiser-name><advertiser-category>Family : Macbook_Pro</advertiser-category><buy-url>http://www.kqzyfj.com/click-4107027-10479833?url=http://store.apple.com/us/xc/product/MD101LL/A?cid=AOS-US-AFF-FEED&aosid=p201&amp;cjsku=MD101</buy-url><catalog-id>cjo:1861</catalog-id><currency>USD</currency><description>The fastest Intel processors.       Now topping top speed.       MacBook Pro features Intel's new third-generation Core architecture, which boosts the speed of the processor and memory. And that means you have one powerful notebook on your hands. 50 percent faster graphics.       You'll be impressed. Instantly.       The 15-inch MacBook Pro features new discrete NVIDIA graphics that are up to 50 percent faster than before. New integrated Intel graphics also perform up to 50 percent faster. Thunderbolt and USB 3       I/O that sets new standards.       Thunderbolt technology lets you connect multiple high-performance devices to a single port - with data transfer rates up to 10 Gbps. Two new USB 3 ports are up to 10x faster than USB 2.</description><image-url>http://store.storeimages.cdn-apple.com/2782/as-images.apple.com/is/image/AppleInc/MC700</image-url><in-stock></in-stock><isbn></isbn><manufacturer-name>apple</manufacturer-name><manufacturer-sku>MD101LL/A</manufacturer-sku><name>Apple MacBook Pro 13&amp;quot; 2.5GHz (MD101LL/A) - Dual Core Intel Core i5, 2.5GHz, 4GB memory, 500GB hard drive, 13-inch</name><price>1199.0</price><retail-price>0.0</retail-price><sale-price>0.0</sale-price><sku>MD101</sku><upc>885909582969</upc></product></products></cj-api>
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------^ 
```

这可能是您在此处发布 XML 后格式错误的结果，如果是这样，我建议您将原始内容发布到 pastebin 或类似的无文本格式，以便我们重试。

希望有帮助。

加文

# php - Joomla插件似乎无法通过模块代码访问参数Joomla 1.7帮助请

> ID：12052513
> 
> 赞同：0
> 
> 时间：2012-08-21T10:02:40.170
> 
> 标签：php, joomla

我正在使用 jooolma 的简码通过插件加载模块但是我遇到问题我通过渲染方法加载模块这是我的插件代码

```
 defined('_JEXEC') or die('Restricted access');

    add_shortcode("mygallery", "sc_mygallery");
    function sc_mygallery($atts, $content = null) {
      extract(shortcode_atts(array(
        "galleryid" => 'galleryid=oHg5SJYRHA0',
        "width" => '480',
        "height" => '360',
        "allowfullscreen" => 'true',    
      ), $atts));

    $module_name='mod_eastbelfastpics';
    $moudle_title='East Belfast Gallery!';
    $module = JModuleHelper::getModule($module_name, $module_title); 

    $module->params = array('Gallery' => $galleryid);
    echo JModuleHelper::renderModule($module ,$options);

    } 
```

但是当我输出 Gallery 的值时，我只是没有输出有什么问题，这是我的前端代码

```
 <?php
    defined('_JEXEC') or die('Restricted access');

    $items = $params->get('items', 1);
    $db =& JFactory::getDBO();
    $query = "SELECT * from jos_eastbelfastpagegallery_images";
    $db->setQuery( $query, 0 , $items );
    $rows = $db->loadObjectList();
    $galleryid= $params->get('Gallery');
     ?>

    this is content comming from a module form a content plugin ;-)

    <?php echo $galleryid;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:05:34.633

$options 未定义。

使用渲染模块时要传递的合适参数定义 $options。

# windows-phone-7 - 如何从 WP7 照片库中检索图像？

> ID：12052519
> 
> 赞同：0
> 
> 时间：2012-08-21T10:02:56.587
> 
> 标签：windows-phone-7

我正在开发一个应用程序，用户可以在其中添加来自 windows phone 7 照片库的照片并将它们分配给特定视图。为此，我将 OriginalFileName 保存在数据库中（LINQ to SQL）。稍后我想恢复照片并将其加载到视图中。你知道我能做什么吗？目前我有这个代码但不起作用。

当用户选择图片时，我将他的名字保存在变量 fileName 中：

```
private void photoChooserTask_Completed (object sender, PhotoResult e)
{
    BitmapImage image = new BitmapImage ();
    e.OriginalFileName = fileName;
    image.SetSource (e.ChosenPhoto);
    this.Thumbnail.Source = image;
    this.Thumbnail.Stretch = Stretch.UniformToFill;
} 
```

后来，当用户想要保存此设置时，我将文件名保存在数据库中。

这是我加载必须包含照片的视图时的代码。

```
imgSource var = new BitmapImage (new Uri (picture.Url, UriKind.Absolute));
item.LeftImage.Source = imgSource; 
```

其中`picture.Url`包含文件名。

任何想法？我在互联网上看到您可以保留整个图像，但要尽可能提供最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:33:59.133

您应该做的是将返回的图片保存`PhotoChooserTask`在 IsolatedStorage 中。然后，您将能够在需要时加载它。

这是[读取和保存图像](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images)的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T01:30:13.720

因为你需要的是在不使用 PhotoChooserTask 的情况下通过浏览 MediaLibrary 来获取图片，因为根据你的经验，如果你使用不同的方法，文件名可能会不一样。

对于自定义的 MediaLibrary 浏览界面，您可以参考这个 codeplex 项目：

[https://multiphotochooser.codeplex.com/](https://multiphotochooser.codeplex.com/)

# python - Numpy：为什么 numpy.array([2]).any() > 1 False？

> ID：12052520
> 
> 赞同：3
> 
> 时间：2012-08-21T10:03:01.120
> 
> 标签：python, numpy

```
>>> import numpy
>>> numpy.array([2]) > 1
array([ True], dtype=bool)
>>> numpy.array([2]).any() > 1
False 
```

不应该 any() 测试数组的所有元素并返回 True 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:04:40.510

它确实返回 True。但是（真> 1）==假。虽然第一部分是 2 > 1 这当然是真的。

正如其他人发布的那样，您可能想要：

```
(numpy.array([2])  > 1).any() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T10:07:11.973

也许你把它和这个混淆了

```
>>> (numpy.array([2]) > 1).any()
True 
```

# amazon-ec2 - 监控多个 Amazon 账户 EC2 实例

> ID：12052526
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:03:29.043
> 
> 标签：amazon-ec2

我们公司有多个亚马逊云账户。现在我的问题是我想使用 Amazon AWS 管理控制台监控所有账户 EC2 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:36:05.660

您不能...它们都需要在同一个账户上，您才能使用 AWS 管理控制台监控它们。我建议使用 ElasticFox 之类的工具，因为它可以让您轻松地在账户之间切换，并且几乎具有 AWS 控制台的所有相同功能。它缺少一些东西，比如能够为 AMI 和卷分配权限，但在大多数情况下它非常完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T20:06:18.300

你可以试试 Xervmon。它们提供多云管理，您可以根据需要添加任意数量的亚马逊云帐户并轻松管理、监控它们。到目前为止，我们已经使用了多达 5 个不同的亚马逊云账户，而且效果很好。

# php - MySQL 表中的特殊字符无法正确显示

> ID：12052529
> 
> 赞同：1
> 
> 时间：2012-08-21T10:03:33.080
> 
> 标签：php, mysql, codeigniter

我`CodeIgniter`用来构建我的查询，我正在导入的字段之一是：

```
textØ=125mm 
```

插入/更新总是成功的，但它在表中显示为：

```
text??=125mm 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:45:20.043

检查您的`database.php`配置文件并确保它具有以下值：

```
$db['development']['char_set'] = 'utf8';
$db['development']['dbcollat'] = 'utf8_general_ci'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:18:09.043

如果您在 MySQL 中，请将数据库的排序规则更改为

> utf8_general_ci

. 是的，一定要检查你的 HTML 页面的字符编码。即，在头部使用 META TAG

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:46:30.747

在控制器或视图中试试这个：

```
header("Content-Type: text/html; charset=UTF-8") 
```

# php - 多个 JSON 对象响应

> ID：12052531
> 
> 赞同：3
> 
> 时间：2012-08-21T10:03:49.787
> 
> 标签：php, javascript, ajax, google-visualization

我有一种情况，我在 php 文件“A”中有一个下拉列表。当我从该下拉列表中选择一个值时，会进行 ajax 调用并触发不同的 php 文件 B。在那个文件中，我做 db fetch，并形成两个 json 对象。这两个 json 对象是我绘制 2 个不同的数据表和 2 个不同的图表所必需的。

1.  当我在“B”中回显一个 json 对象时，我将其作为对“A”中 ajax 调用的响应

2.  如果我在 B 中回显两个 json 对象，我什至无法得到响应。

3.  对于单个 json 对象响应，我可以绘制数据表并可以使用 javascript 操作 json 对象并希望绘制图表

请告知如何处理这种情况 文件 B 中的代码

```
 $json = json_encode($tot_categ);
        $json_percent = json_encode($tot_que_percent);
            $cols_percent = array(
                array( 'id' => 't', 'label' => 'Title', 'type' => 'string'),
                array( 'id' => 'n', 'label' => 'Neutral(+) ', 'type' => 'string'),
                array('id' => 'a', 'label' => 'Agree', 'type' => 'string'),
                array('id' => 'ne', 'label' => 'Neutral(-)', 'type' => 'string'),
                array('id' => 'd', 'label' => 'Disagree', 'type' => 'string'),

        );

        $jcols_percent = json_encode($cols_percent);
        //JSON format accepted by Google tables
        $r_percent= "{cols:".$jcols_percent.','."rows:".$json_percent."}";
        //echo (JSON.stringify($r_percent));
        // echo $r_percent;

        $cols = array(
                array( 'id' => 't', 'label' => 'Title', 'type' => 'string'),
                array( 'id' => 'l', 'label' => 'Avg ', 'type' => 'string'),
                array('id' => 'lb', 'label' => 'High', 'type' => 'string'),
                array('id' => 'lo', 'label' => 'Low', 'type' => 'string')
        );

        $jcols = json_encode($cols);
        //JSON format accepted by Google tables
        $r = "{cols:".$jcols.','."rows:".$json."}";
        //echo(json_decode($r));
        echo $r; 
```

$r 和 $r_percent 是我的对象

回显时的 $r_percent 给出

```
{cols:[{"id":"t","label":"Title","type":"string"},{"id":"n","label":"Neutral(+) ","type":"string"},{"id":"a","label":"Agree","type":"string"},{"id":"ne","label":"Neutral(-)","type":"string"},{"id":"d","label":"Disagree","type":"string"}],rows:[{"c":[{"v":"165q"},{"v":0},{"v":0},{"v":0},{"v":100}]},{"c":[{"v":"160q"},{"v":0},{"v":0},{"v":0},{"v":6}]},{"c":[{"v":"161q"},{"v":0},{"v":0},{"v":0},{"v":10}]},{"c":[{"v":"162q"},{"v":7},{"v":0},{"v":7},{"v":0}]},{"c":[{"v":"163q"},{"v":0},{"v":25},{"v":0},{"v":0}]},{"c":[{"v":"164q"},{"v":0},{"v":100},{"v":0},{"v":0}]}]} 
```

$r 回显时给出

```
{cols:[{"id":"t","label":"Title","type":"string"},{"id":"l","label":"Avg ","type":"string"},{"id":"lb","label":"High","type":"string"},{"id":"lo","label":"Low","type":"string"}],rows:[{"c":[{"v":"165q"},{"v":1.3333333333333},{"v":"2"},{"v":"1"}]},{"c":[{"v":"160q"},{"v":6},{"v":"10"},{"v":"1"}]},{"c":[{"v":"161q"},{"v":6.6666666666667},{"v":"9"},{"v":"2"}]},{"c":[{"v":"162q"},{"v":7},{"v":"9"},{"v":"3"}]},{"c":[{"v":"163q"},{"v":8},{"v":"9"},{"v":"6"}]},{"c":[{"v":"164q"},{"v":5},{"v":"5"},{"v":"5"}]}]} 
```

结合时

```
$result = array('objA' => $r_percent, 'objB' => $r );
        echo json_encode($result); 
```

更新的回声

```
{"objA":"{cols:[{\"id\":\"t\",\"label\":\"Title\",\"type\":\"string\"},{\"id\":\"n\",\"label\":\"Neutral(+) \",\"type\":\"string\"},{\"id\":\"a\",\"label\":\"Agree\",\"type\":\"string\"},{\"id\":\"ne\",\"label\":\"Neutral(-)\",\"type\":\"string\"},{\"id\":\"d\",\"label\":\"Disagree\",\"type\":\"string\"}],rows:[{\"c\":[{\"v\":\"165q\"},{\"v\":0},{\"v\":0},{\"v\":0},{\"v\":100}]},{\"c\":[{\"v\":\"160q\"},{\"v\":0},{\"v\":0},{\"v\":0},{\"v\":6}]},{\"c\":[{\"v\":\"161q\"},{\"v\":0},{\"v\":0},{\"v\":0},{\"v\":10}]},{\"c\":[{\"v\":\"162q\"},{\"v\":7},{\"v\":0},{\"v\":7},{\"v\":0}]},{\"c\":[{\"v\":\"163q\"},{\"v\":0},{\"v\":25},{\"v\":0},{\"v\":0}]},{\"c\":[{\"v\":\"164q\"},{\"v\":0},{\"v\":100},{\"v\":0},{\"v\":0}]}]}","objB":"{cols:[{\"id\":\"t\",\"label\":\"Title\",\"type\":\"string\"},{\"id\":\"l\",\"label\":\"Avg \",\"type\":\"string\"},{\"id\":\"lb\",\"label\":\"High\",\"type\":\"string\"},{\"id\":\"lo\",\"label\":\"Low\",\"type\":\"string\"}],rows:[{\"c\":[{\"v\":\"165q\"},{\"v\":1.3333333333333},{\"v\":\"2\"},{\"v\":\"1\"}]},{\"c\":[{\"v\":\"160q\"},{\"v\":6},{\"v\":\"10\"},{\"v\":\"1\"}]},{\"c\":[{\"v\":\"161q\"},{\"v\":6.6666666666667},{\"v\":\"9\"},{\"v\":\"2\"}]},{\"c\":[{\"v\":\"162q\"},{\"v\":7},{\"v\":\"9\"},{\"v\":\"3\"}]},{\"c\":[{\"v\":\"163q\"},{\"v\":8},{\"v\":\"9\"},{\"v\":\"6\"}]},{\"c\":[{\"v\":\"164q\"},{\"v\":5},{\"v\":\"5\"},{\"v\":\"5\"}]}]}"} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T10:08:26.417

将两个响应组合在一个对象中，返回该对象并再次分别使用这两个部分：

PHP端：

```
$result = array( 'objA' => $objA, 'objB' => $objB );
echo json_encode( $result ); 
```

客户端：

```
// your success callback handler
function handler( data ) {
  // execute code for object A
  doStuff( data.objA );
  // execute code for object B
  doOtherStuff( data.objB );
} 
```

# javascript - 在jQuery中计算对象

> ID：12052533
> 
> 赞同：1
> 
> 时间：2012-08-21T10:03:57.703
> 
> 标签：javascript, jquery

不是我在 JavaScript (jQuery) 中的函数返回我（使用 console.log）对象：

```
Object { 1=[3]} 
```

或者

```
Object { 2=[1]} 
```

或者

```
Object { 5=[5]} 
```

等名称对象是随机的。我如何计算这个对象的值？我不知道对象的名称。计数值在 [ ] 中。对于我的示例，有 3、1 和 5。

我试过：

```
var test = OtherFunction();
alert(test.length); 
```

但 htis 返回我未定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:07:31.790

```
var obj = {foo: 'bar', foo2: 'bar2' /* etc */}; 
```

现代方式（不适用于旧 IE）

```
console.log(Object.keys(obj).length); //2 
```

在较旧的 IE 中工作的方式：

```
var keys = 0;
for (var i in obj) keys++;
console.log(keys); //2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:30:59.507

迭代一个对象：

```
// iterates over all properties of your object
for (var i in obj){
   console.log(i);       // will give you the name of the key i
   console.log(obj[i]);  // will give you the value of the key i in the object
} 
```

现在有了这个，你可以做任何你想做的事情，计算键，求和，......

# java - 配置 Web 应用程序以连接到数据库

> ID：12052547
> 
> 赞同：0
> 
> 时间：2012-08-21T10:04:45.743
> 
> 标签：java, database, jboss, struts2, dao

我有使用**struts 2并在****JBoss 服务器**上运行的java web 应用程序。我们不使用 Spring。此应用程序现在不使用任何数据库。他们已将应用程序中的一些硬编码数据移至数据库，并要求我开始使用数据库。我必须连接到数据库才能开始。

我有两个条件必须满足：

> 我被告知我们无法重新配置服务器，因为它是只读的（**这意味着我无法在服务器上创建 DataSource [将 *-ds.xml 添加到服务器] - 它还有其他含义吗？**） -

（这让我可以选择使用 DriverManager。有更好的方法吗？）

> . 他们告诉我将数据库连接属性文件保留在 ear 文件和 config 目录中。（**这是否意味着我必须将配置文件放在 jboss 服务器内的某个位置？**这是什么意思？这最终会让我“重新配置”服务器吗？）

如何将数据库连接属性文件放置在 EAR 之外并且仍然让我的 DAO 层访问配置属性？

# node.js - node.js：异步循环到底有多异步？

> ID：12052549
> 
> 赞同：3
> 
> 时间：2012-08-21T10:05:04.890
> 
> 标签：node.js, asynchronous

我想异步迭代一个数组以解除阻塞执行。我正在使用 caolan/async 来实现这一点。测试此代码时：

```
var ASync = require('async');

var arr = [];
for (var i = 0; i< 10; i++) {
    arr[i] = i;
}

var buf = "howdy";
ASync.forEach(arr, function(item, callback) {
    buf += item;
    callback();
}, function(err) {
    console.log(buf); // in the end
});
buf += "finished"; 
```

它显示了这个结果：

```
howdy0123456789 
```

我认为它**应该**显示

```
howdyfinished0123456789 
```

因为我希望异步库推迟执行。但为什么不是呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:10:56.213

在您的代码中，`callback`在与自身相同的事件循环迭代中执行`foreach`。由于您永远不会超出当前的事件循环迭代，因此`buf += "finished"`仅在执行完所有操作后才`buf += item`执行。

正确的版本是

```
var ASync = require('async');

var arr = [];
for (var i = 0; i< 10; i++) {
    arr[i] = i;
}

var buf = "howdy";
ASync.forEach(arr, function(item, callback) {
    process.nextTick(function () {
        buf += item;
        callback();
    });
}, function(err) {
    console.log(buf); // in the end
});
buf += "finished"; 
```

最后，`buf`意志等于`howdy0finished123456789`。

但是，这项任务过于简单化了。为什么需要异步循环呢？

1.  并行执行异步任务。首先，由于每个任务都是异步的，因此无论如何您都不会`callback`在同一个事件循环迭代中触发它，而是将其交给特定的异步任务。二`async.parallel`是比较适合这类任务。

2.  执行一些 CPU 密集型任务，避免冻结事件循环（以便 Node 可以在迭代之间处理一些任务）。这就是我在上面的代码示例中所假设的。使用普通的 JS（及其内置`Array.prototype.forEach`）来完成这项任务将非常困难，因为您需要以某种方式实现对事件的检测，循环的所有迭代都已处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:18:27.140

我认为您应该阅读以下内容：http: [//howtonode.org/understanding-process-next-tick](http://howtonode.org/understanding-process-next-tick)

# android - 如何在新的 Google Android SDK 中打开 Android 示例？

> ID：12052551
> 
> 赞同：0
> 
> 时间：2012-08-21T10:05:09.173
> 
> 标签：android, eclipse

如何在新的 Google Android SDK 中打开 Android 示例？使用最新的 Google Android SDK 创建新的 android 项目时，似乎现在缺少从现有源创建项目的能力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:11:44.510

Go to File menu in Eclipse->New->Others

![enter image description here](../Images/b25f0999f2222edec1a346b137150afb.png)

so you will get open dialog like below image & select "Android Sample Project" then select api level for which you want sample project.

![enter image description here](../Images/9f36f7cce7181d5c6725725ad521b867.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:13:59.060

您可以从 File - Import - Android - Existing Android Code Into Workspace 导入项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:18:35.820

1.  在 Eclipse -> Window -> Preferences-> Android 中，确保您已设置 SDK Location 然后 Apply 并按 OK
2.  选择文件 -> 新建 -> Android 项目
3.  单击从现有示例创建项目
4.  选择 SDK 版本并选择您想要的示例

# javascript - Mootools 类受保护的处理程序？

> ID：12052557
> 
> 赞同：1
> 
> 时间：2012-08-21T10:05:39.700
> 
> 标签：javascript, class, mootools, protected

作为一名 Flash 开发人员，我尝试拥有与 AS3 提供的 mootools 相同的灵活性。

我尝试做一件简单的事情，创建一个受保护的事件处理函数。我讨厌写内联函数，所以我写了这样的东西：

```
//CLASS DEFINITION AS USUAL
    initializeEvent:function (){

    if (this.options.slider) this.options.slider.addEvents ({

        mousedown:function (e){

            this.sliderDownHandler();
            //throw an error because sliderDownHandler is set to protected

        }

    });

},

update:function (){

    this.fireEvent('update');

}.protect(),

sliderDownHandler:function (e){

    this.update();
    console.log ('yeah it down')

}.protect(); 
```

没有 .protect() 处理程序按预期工作。

使用 .protected() 可以达到这个目标吗？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:08:13.803

你当然可以。你有一个绑定错误，不是受保护的问题

```
mousedown:function (e){
    this.sliderDownHandler();
    //throw an error because sliderDownHandler is set to protected
} 
```

不。它抛出一个错误，因为`this`将被绑定到`this.options.slider`，它触发了事件——我猜这是一个没有`sliderDownHandler`方法的元素。您在受保护方法上遇到的异常非常独特，并且不会弄错 - 通过在外部调用它来尝试`instance.sliderDownHandler()`

重写为其中之一：

```
var self = this;
...
mousedown:function (e){
    self.sliderDownHandler();
}

// or, bind the event to the class instance method...
mousedown: this.sliderDownloadHandler.bind(this) 
```

# java - Java 中的访问修饰符（静态）

> ID：12052560
> 
> 赞同：1
> 
> 时间：2012-08-21T10:05:51.717
> 
> 标签：java, oop, class, static, inner-classes

我在[这里](http://www.codeforge.com/read/147427/Term.java__html)得到了这个程序，为了练习目的，我将这两个课程合二为一。（感谢帮助我的[先生](https://stackoverflow.com/users/1267329/simeon-visser)。）但是，我遇到了一个错误，即“无法访问 QuineMcCluskey 类型的封闭实例。必须使用 QuineMcCluskey 类型的封闭实例来限定分配。” 在方法中`initTerm`。

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class QuineMcCluskey extends JFrame implements ActionListener, WindowListener{

    private  final long serialVersionUID = 1L;
         static ArrayList<Term>[][] table=new ArrayList[5][5];                      // SERVES AS OUR STORAGE FOR ARRANGING TERMS AND TO OUR RESULTING TERMS THAT ARE BEING COMPARED.
        static Vector<String> inputTerm= new Vector <String>();                 // STORES OUR ORIGINAL INPUT/NUMBERS
        static Vector<String> resultingTerms= new Vector <String>();            // STORES RESULTING TERMS FOR EACH SET OF COMPARISON
        static int var=0;                                                       //NUMBER OF VARIABLE
        static int numbers=0;                                                   //NUMBER OF INPUTS
        final static int maxTerms=1000;                                         //MAXIMUM NUMBER OF TERMS WITH SAME NUMBER OF 1'S
        static TextField result = new TextField("  ",50);
        static TextField text;
        static TextField text1;
        static QuineMcCluskey  qWindow;
        static String finalT = "";

        public static void main(String[] args){
            qWindow = new QuineMcCluskey("Quine-McCluskey Simulator");                  //creates a window
            qWindow.setSize(400,250);                                           //sets the size of the window
            qWindow.setVisible(true);                                           //makes the window visible
            qWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE );            //CLOSES THE WINDOW WHEN CLOSING OR CLICKING THE X BUTTON

            JOptionPane.showMessageDialog(null, "Welcome to my Quine-McCluskey Simulator!"); //DISPLAYS MESSAGE
        }//end main

        public static int count_one(String temp){   //COUNT 1'S FROM EACH TERM

            int count=0;
            char[] tempArray=temp.toCharArray();
            int i=0;
            while(i<temp.length()){
                if(tempArray[i]=='1'){
                    count++;
                }
                i++;
            }//end while
            return count;
        }//end one

        public static void getPrimeImplicants(){                // PAIRS TERMS UNTIL NOTHING TO PAIR, END TERMS ARE OUR PRIME IMPLICANTS
            table=createTermTable(inputTerm);
            printTermTable();
            createPairing();

        }

        public static  ArrayList<Term>[][] createTermTable(Vector <String> input){   // CREATE TABLE, ARRANGES TERMS BASED ON THE NUMBER OF 1'S IN 
                                                                                   //EACH TERM USING count_one,therefore, row 1 contains terms with 1 1 bit.
            Term temp;
            int one=0;
            int element=0;
            ArrayList[][] arrayLists = new ArrayList[var+1][maxTerms+1];            //CREATES AN ARRAY WITH VAR ROWS CORRESPONDING TO POSSIBLE NUMBER OF
                                                                                    // 1 FOR EACH TERM AND 1000 COLUMNS
            ArrayList<Term> [][]tempTable = arrayLists;
            for(int x=0;x<=var;x++){                                                //?
                for(int y=0;y<=maxTerms;y++){
                    tempTable[x][y]= new ArrayList<Term>();
                }//end y
            }//end for x

            for(int i=0;i<input.size();i++){
                one=count_one(input.get(i));                             //COUNT 1'S FROM EACH TERM
                temp=initTerm(input.get(i),false);                     // INITIALIZE PROPERTIES OF THAT TERM

                while(!tempTable[one][element].isEmpty()){
                    element++;
                }//end while

                tempTable[one][element].add(temp);
                element=0;
            }   //end for

            return tempTable;
        }//end createTermTable

        public static Term initTerm(String n,boolean u){                    //INITIALIZE USED and NUM PROPERTY OF THE TERM
            Term term=new Term();
            term.used=u;                                                    // TO INDICATE IF THE TERM IS ALREADY PAIRED
            term.num=n;                                                     // THE TERM ITSELF
            return term;
        }//end initTerm

        public static void printTermTable(){                                // PRINTS THE COMPUTATION/TABLES
            System.out.println("\nCOMPUTING:");
            for(int i=0;i<var+1;i++){
                System.out.print(i);
                System.out.println("    --------------------------------------------");
                for(int j=0;!table[i][j].isEmpty();j++){                    //PRINTS TERM ON EACH ROW WHILE TERM IS NOT EMPTY
                    System.out.println(table[i][j].get(0).num);
                }//end for j
            }//end for i

        }

        public static void createPairing(){                             //PAIRS A TERM TO EACH TERM ON THE NEXT ROW
            int finalterms=0;
            String term_num="";
            int found=0;
            Vector<String> preResult= new Vector<String>();
            for(int x=0;x<=var-1;x++){                                  // REPEATS PAIRING OF A TERMS OF THE TABLE VAR TIMES TO MAKE SURE WHAT ARE LEFT ARE PRIME IMPLICANTS
                preResult=new Vector<String>();                         // STORES THE RESULTING TERMS FOR EACH SET OF PAIRING
                for(int i=0;i<=var;i++){                            //COMPARES A ROW WITH EACH TERMS ON THE NEXT ROW
                    //Vector <String> rowResult= new Vector<String>();  //STORES RESULTING TERMS ON THAT PARTICULAR TERM OF THE ROW. THIS IS TO AVOID REPETITIONS
                    for(int j=0;!table[i][j].isEmpty();j++){            // TERM ON THE  ROW BEING COMPARED WITH EACH TERM ON NEXT ROW
                        if(i+1!=var+1)                                  // MAKES SURE THAT THE PROCESS NOT EXCEEDS THE ARRAYBOUND
                        for(int k=0;!table[i+1][k].isEmpty();k++){      //TERM ON THE NEXT ROW THAT IS BEING COMPARED WITH TERM ON THE CURRENT ROW.
                            term_num=pair(table[i][j].get(0).num,table[i+1][k].get(0).num); //ASSIGNS RESULT OF PAIRING TO term_num

                            if(term_num!=null){                         // IF PAIRING IS SUCCESSFUL
                                table[i+1][k].get(0).used=true;         // TERM IS PAIRED/USED
                                /*if(!rowResult.contains(term_num)){    //MAKES SURE THAT TERM IS NOT REPEATE
                                    rowResult.add(term_num);
                                    found=1;
                                }
                                */
                                if(!preResult.contains(term_num)){          // MAKES SURE THAT TERM IS NOT REPEATED
                                    preResult.add(term_num);
                                    found=1;
                                    finalterms++;                           // COUNTS THE FINAL/RESULTING TERMS FOR THIS SET OF PAIRING
                                }//end if !resultingTerms
                                found=1;
                            }//end if term_num!=null
                        }//end for k
                        if(found==0){                                       // IF TERM IS NOT SUCCESSFULLY PAIRED/USED, ADD TO THE RESULTING TERMS FOR THIS SET
                            if(table[i][j].get(0).used!=true){     
                                preResult.add(table[i][j].get(0).num);
                            }
                        }
                        found=0;
                    }//end for j

                }//end for i
                table=createTermTable(preResult);                               // CREATE ANOTHER TABLE FOR NEXT SET. THE NEW TABLE CONTAINS THE RESULTING TERMS OF THIS SET
                if(preResult.size()!=0)
                    resultingTerms=preResult;                                 //IF THE ARE RESULTING TERMS, THEN PRINT AND ASSIGN TO resultingterms. THE END VALUE OF resultingterms WILL BE SIMPLIFIED
                printTermTable();
            }//end for x

        }//end createPairing

        public static String pair(String a,String b){
            int difference=-1;
            char []array1 = new char[a.length()];                           
            char []array2;
            for(int i=0;i<var;i++){
                array1=a.toCharArray();                                     //CONVERTS TERMS OF TYPE STRING TO TERMS OF TYPE CHAR
                array2=b.toCharArray();
                if(array1[i]!=array2[i]){                                  // IF NOT EQUAL FOR A PARTICULAR CHARACTER FOR THE FIRST TIME, THEN GET THE INDEX CORRESPONDING TO THAT CHARACTER.
                    if(difference==-1)
                        difference=i;
                    else                                                     //IF NOT NOT EQUAL FOR THE FIRST TIME, THEN THE TERMS DIFFER IN MORE THAN 1 PLACE
                        return null;
                }//end if
            }//end for

            if(difference==-1)                                             //THE TERMS ARE INDENTICAL, RETURN NULL, PAIRING UNSUCCESSFUL
                return null;

            char[] result= a.toCharArray();                                //CHARACTER CORRESPONDING TO THE INDEX WHERE TERMS DIFFER ONLY ONCE WILL BE CHANGED TO '-' 
            result[difference]='-';
            String resulTerm= new String(result);
            return resulTerm;                                              //RETURNS THE MODIFIED TERM, PAIRING SUCCESSFUL
        }//end pair

        public static void simplifymore(){                                 //SIMPLIFY THE RESULTINGTERMS
            int primes=resultingTerms.size();                           // RESULTING TERMS CORRESPOND TO OUR PRIME IMPLICANTS
            int[][] s_table= new int[primes][numbers];                   //CREATES A TABLE WITH ROWS EQUAL TO NUMBER OF PRIME IMPLICANTS AND COLUMNS EQUAL TO THE NUMBER OF THE ORIGINAL INPUT
            for(int i=0;i<primes;i++){
                for(int j=0;j<numbers;j++){
                    s_table[i][j]=implies(resultingTerms.get(i),inputTerm.get(j));  
                }//end for j
            }//end for i

            Vector <String> finalTerms= new Vector<String>();               // STORES THE FINALTERMS
            int finished=0;
            int index=0;
            while(finished==0){                                             //UNTIL ALL ELEMENTS ARE NOW TURNED TO 0
                index=essentialImplicant(s_table);
                if(index!=-1)
                    finalTerms.add(resultingTerms.get(index));              // IF RESULTING TERM IS THE ONLY ONE IMPLYING THE CURRENT ORIGINAL TERM, THEN ADD TO FINAL TERMS
                else{                                                       // THOSE THAT HAVE MORE THAN ONE IMPLICATION FOR A PARTICULAR ORIGINAL TERM
                    index=largestImplicant(s_table);
                    if(index!=-1)
                        finalTerms.add(resultingTerms.get(index));          //ADD TO FINAL TERMS IF LARGEST IMPLICANT(ONE WHICH HAS MORE NUMBER OF 1'S. SEE COMMENTS ON largestImplicant.
                    else
                        finished=1;                                         //IF INDEX IS -1 THEN ALL ELEMENTS HAVE ALREADY BEEN DELETED OR HAVE MADE VALUE 0
                }//end else
            }//end while finished
            System.out.println("Final Terms :");
            for(int x=0;x<finalTerms.size();x++)                            //PRINTS THE FINAL TERMS IN BINARY FORMAT
                System.out.println(finalTerms.get(x));

            printSimplified(finalTerms);
        }//end simplifymore

        public static void printSimplified(Vector <String> finalTerms){
            String temp="";
            char[] tempArray;
            char variables[]= {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};   //basis for our variables to printed
            int index=0;
            int i=0;
            int j=0;
            System.out.print("F = ");
            while(i<finalTerms.size()){                                 //until all final terms are printed in algebraic form.

                temp=finalTerms.get(i);                                 //assigns current final term to temp
                tempArray=temp.toCharArray();                           //CONVERTS TEMP TO ARRAY

                while(j<var){
                    if(tempArray[j]=='-'){                              //IGNORES -
                        index++;
                    }
                    else if (tempArray[j]=='0'){
                        finalT+=variables[26-var+index]+"'";  // PRINTS THE CORRESPONDING LETTER.IF CHARACTER IS 0 THEN APPEND ' AFTER THE VARIABLE

                        index++;
                    }
                    else if (tempArray[j]=='1'){
                        finalT+=variables[26-var+index];     // PRINTS CORRESPONDING LETTER
                        index++;
                    }
                    else{};
                    j++;
                }//end while

                if(i<finalTerms.size()-1)
                    finalT+=" + ";                          // APPENDS +
                i++;
                temp="";
                j=0;
                index=0;
            }//end while
            System.out.println(finalT);
        }//print simplified

        public static int essentialImplicant(int[][] s_table){              // CHECKS EACH RESULTING TERM IMPLYING A PARTICULAR ORIGINAL TERM
            for(int i=0;i<s_table[0].length;i++){ // 
                int lastImplFound=-1;
                for(int impl=0;impl<s_table.length;impl++){
                    if(s_table[impl][i]==1){                                //IF RESULTING TERM IMPLIES ORIGINAL TERM
                        if(lastImplFound==-1){                              
                            lastImplFound=impl;
                        }else{                                          // IF MORE THAN ONE IMPLICATION,THEN IT IS NOT AN ESSENTIAL PRIME IMPLICANT.GO TO NEXT ORIGINAL TERM
                            lastImplFound=-1;
                            break;
                        }//end else
                    }
                }
                if(lastImplFound!=-1){                              // ONE IMPLICATION FOR THE ORIGINAL TERM. THIS IS AN ESSENTIAL PRIME IMPLICANT
                    implicant(s_table,lastImplFound);
                    return lastImplFound;
                }
            }//end for impl
            return -1;
        }

        public static void implicant(int [][] s_table,int impA){   // DELETE OR MAKE VALUE 0 THE ROW WHERE THE ESSENTIAL PRIME IMPLICANT IS AND THE COLUMNS OF ALL THE ORIGINAL TERMS IMPLIED BY IT
            for(int i=0;i<s_table[0].length;i++){
                if(s_table[impA][i]==1)
                    for(int impB=0;impB<s_table.length;impB++){
                        s_table[impB][i]=0;
                    }
            }
        }//end implicant

        public static int largestImplicant(int[][] s_table){
            int maxImp=-1;
            int max=0;
            for(int imp=0;imp<s_table.length;imp++){            // LOCATES WHICH HAS MORE NUMBER OF 1'C IN EACH PRIME
                int num=0;
                for(int i=0;i<s_table[0].length;i++){
                    if(s_table[imp][i]==1)
                        num++;
                }//end for i
                if(num>max){                            // TERM WITH MORE 1'S AT THE END OF THE LOOP WILL BE ADDED TO THE FINAL TERMS
                    max=num;
                    maxImp=imp;
                }//end if num>max
            }//end for imp

            if(maxImp!=-1){                             // IF WE HAVE SUCCESSFULLY LOCATED A PRIME IMPLICANT
                implicant(s_table,maxImp);              // DELETE OR MAKE VALUE 0 THE ROW WHERE THE ESSENTIAL PRIME IMPLICANT IS AND THE COLUMNS OF ALL THE ORIGINAL TERMS IMPLIED BY IT
                return maxImp;
            }//end if maxImp!=-1
            return -1;
        }   

        public static int implies(String term1, String term2){    // RETURNS 1 IF RESULTING TERM IMPLIES THE ORIGINAL TERM, 0 OTHERWISE
            char[] term1Array=term1.toCharArray();
            char[] term2Array=term2.toCharArray();
                                                                //EX. ORG TERM IS 100100, RES TERM IS 1--10- ,RESULTING TERM IMPLIES THE ORIGINAL TERM. SINCE - HERE IS TREATED AS 0 OR 1
            for(int i=0;i<var;i++){
                if(term1Array[i]!=term2Array[i] && term1Array[i]!='-') 
                    return 0;
            }

            return 1;
        }

//end class

        public QuineMcCluskey (String name){
            super(name);                                            //ASSIGNS LABEL OF THE WINDOW
            setLayout(new GridLayout(1, 1));                        //SETS THE LAYOUT       
            setLocation(350,200);                                   //SETS THE LOCATION OF THE WINDOW ON THE SCREEN
            GridBagLayout gridbag = new GridBagLayout();        //used to align buttons
            GridBagConstraints constraints = new GridBagConstraints();//to specify the size and position for the gridbaglayout
            setLayout(gridbag);
            constraints.weighty = 1;                                //distributes spaces among columns
            constraints.weightx = 1;                                //distributes spaces among rows
            constraints.gridwidth = GridBagConstraints.REMAINDER;   //to specify that the component be the last one in its column

            Label label1 = new Label("     How many variables does the function have?");        //CREATES A LABEL
            label1.setVisible(true);                                            //MAKES THE LABEL VISIBLE, ASSIGNS NEW FONT AND COLOR THEN ADD TO THE WINDOW
            label1.setFont(new Font("Sans Serif", Font.BOLD, 12));
            label1.setBackground(Color.CYAN);
            add(label1);

            text1= new TextField("",10);
            gridbag.setConstraints(text1,constraints);                              //applies constraints to text
            text1.setEditable(true);                                                //SO THAT WE COULD STILL HAVE AN UNLIMITED LENGTH OF INPUT
            text1.setForeground(Color.black);
            text1.setBackground(Color.white);
            text1.setVisible(true);
            text1.addActionListener(this);                                          //ACTIVATES ACTIONLISTENER FOR THIS FIELD
            add(text1);

            label1 = new Label(" Please list all the minterms that evaluates to 1:");//CREATES LABEL
            gridbag.setConstraints(label1,constraints);
            label1.setVisible(true);                                                //MAKES THE LABEL VISIBLE, ASSIGNS NEW FONT AND COLOR THEN ADD TO THE WINDOW
            label1.setBackground(Color.green);label1.setFont(new Font("Sans Serif", Font.BOLD, 12));
            label1.setBackground(Color.CYAN);
            add(label1);

            text = new TextField("Enter your numbers here separated by a comma",50);
            gridbag.setConstraints(text,constraints);               //applies constraints to text
            text.setEditable(true);                                 //ENABLES UNLIMITED LENGTH OF INPUT
            text.setForeground(Color.black);
            text.setBackground(Color.white);
            text.setVisible(true);
            text.addActionListener(this);                   //ACTIVATES ACTIONLISTENER FOR THIS FIELD
            text.setForeground(Color.blue);
            add(text);

            JButton enter = new JButton ("Enter");          // CREATES BUTTON NAMED Enter
            enter.setVisible(true);                         //MAKES IT VISIBLE, APPLIES THE CONSTRAINTS, AND ADD TO THE WINDOW
            add(enter);
            enter.setBackground(Color.green);
            enter.addActionListener(this);                  //ACTIVATES ACTIONLISTENER
            gridbag.setConstraints(enter,constraints);

            JButton reset = new JButton ("Reset");          // CREATES BUTTON NAMED Reset
            reset.setVisible(true);                         //MAKES IT VISIBLE, APPLIES THE CONSTRAINTS, AND ADD TO THE WINDOW
            gridbag.setConstraints(reset,constraints);
            reset.setBackground(Color.green);
            add(reset);
            reset.addActionListener(this);  

            label1 = new Label(" Result:");
            gridbag.setConstraints(label1,constraints);
            label1.setVisible(true);
            label1.setBackground(Color.cyan);
            label1.setFont(new Font("Sans Serif", Font.BOLD, 12));
            label1.setBackground(Color.CYAN);
            add(label1);

            result = new TextField(" ",50);
            gridbag.setConstraints(result,constraints);             //applies constraints to text
            result.setEditable(true);
            result.setForeground(Color.black);
            result.setBackground(Color.white);
            result.setVisible(true);
            add(result);

        }

        public void actionPerformed(ActionEvent e) {
            String stringInput="";
            String numOfVar="";
            String temp="";
            String temp1="";
            int num=0;

            if(e.getActionCommand() == "Enter"){                    // IF Enter BUTTON IS CLICKED
                stringInput = text.getText();                       // GETS STRING INPUT FROM TEXT(MINTERMS) 
                numOfVar = text1.getText();                         //GETS STRING INPUT FROM TEXT1(VARIABLES)
                var = Integer.parseInt(numOfVar);                   //CONVERTS numOfVar TO INTEGER
                StringTokenizer token= new StringTokenizer(stringInput," ,"); //TOKENIZE INPUT. ELIMINATE ALL COMMAS AND SPACES
                while(token.hasMoreTokens()){                           //WHILE THERE ARE MORE TOKENS
                    temp1=token.nextToken();                        //GETS TOKEN
                    numbers++;                                          //COUNTS THE NUMBER OF INPUTS
                    num=Integer.parseInt(temp1);                    //CONVERT INPUT TO INTEGER
                    temp=Integer.toBinaryString(num);               //CONVERTS INTEGER FORM OF INPUT TO BINARY IN ITS PROPER LENGTH BASED ON THE NUMBER OF VARIABLES GIVEN
                    if(temp.length()!=var){                     
                        while(temp.length()!=var){
                            temp="0"+temp;
                    }
                    }
                    inputTerm.add(temp);                            //ADDS RESULT(BINARY FORM) TO inputTerm

                }//end while
                getPrimeImplicants();                                   //GET PRIMEIMPLICANTS
                simplifymore();                                         // SIMPLIFY MORE    
                result.setText(finalT);                                 // DISPLAYS THE RESULT (SIMPLIFIED) TO RESULT TEXTFIELD

            }//end if

            if(e.getActionCommand()== "Reset"){                 //RESETS THE VALUES FOR NEXT SET OF INPUTS
                var=0;
                table=new ArrayList[5][5];                      // SERVES AS OUR STORAGE FOR ARRANGING TERMS AND TO OUR RESULTING TERMS THAT ARE BEING COMPARED.
                inputTerm= new Vector <String>();               // STORES OUR ORIGINAL INPUT/NUMBERS
                resultingTerms= new Vector <String>();          //STORES THE RESULTING TERMS FOR EACH COMPUTATION
                finalT="";                                      //STORES THE FINAL TERMS IN THEIR ALGEBRAIC FORM
                numbers=0;                                      //COUNTS THE NUMBER OF INPUTS FROM THE USER
                text.setText("");                               //ERASE THE TEXTS DISPLAYED ON THE TEXT FIELDS
                text1.setText("");
                result.setText("");
            }   
        }

        public void windowActivated(WindowEvent e) {}
        public void windowClosed(WindowEvent e) {qWindow.setVisible(false);}    //CLOSES THE WINDOW AFTER PROGRAMS STOPS RUNNING
        public void windowClosing(WindowEvent e) {}
        public void windowDeactivated(WindowEvent e) {}
        public void windowDeiconified(WindowEvent e) {}
        public void windowIconified(WindowEvent e) {}
        public void windowOpened(WindowEvent e) {}

        public class Term {

            public String num;          
            public boolean used;

    }

}//end class 
```

有人告诉我必须删除关键字`static`，所以我这样做了，并且发生了这个错误。你能帮我操作代码吗？我正在练习 OOP，我想了解更多关于这些静态修饰符的信息。非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:10:49.873

当您使用时，`static`您是在说我在这里没有使用隐含的对象。但是你没有定义`Term`为静态的，你说它需要在一个对象中。

在您的情况下，最简单的事情是制作 Term`static`因为它似乎不需要是非静态的。

```
static class Term {
    String num;          
    boolean used;
} 
```

一般来说，我会尽可能将嵌套类设为静态。部分是为了性能，但主要是为了清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:11:06.243

> 我必须删除关键字 static

不得删除. *_*`static` _`serialVersionUID`

您还没有向我们透露哪行代码会出现编译错误，但显然它周围的某些东西也必须是静态的。

永远不要盲目地听从建议。始终询问它的含义以及它是否真的适用于您所做的一切。这个行业有很多剪切和粘贴、死记硬背和货物崇拜的编程。不要成为它的一部分，无论它来自哪里。可悲的是，其中相当一部分将来自您的同事和上级。你必须学习如何处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:09:35.367

术语是内部类，因此您可以创建内部类的实例，如下所示

```
Term term = qWindow.new Term(); 
```

[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)提供更多帮助

# solr - 使 Liferay 社区（称为站点）之一未在 solr 中编制索引

> ID：12052563
> 
> 赞同：0
> 
> 时间：2012-08-21T10:05:54.493
> 
> 标签：solr, indexing, liferay

我们将 Liferay (6.1.20 EE) 与 Solr 搜索引擎一起使用。

现在 Solr 索引所有内容。我们能否以某种方式设置 Solr（或 Liferay）来防止一个站点被索引？

这意味着该站点上存在的所有文章文档都不会被索引并且不会出现在 Solr 中。

1）这是否应该在索引启动之前使用 Solr 配置/模式过滤器完成？或者 2) 是否应该在 Liferay Indexer 类中自定义（借助 Hooks 或 EXT）以跳过被索引的内容。

感谢您的想法和建议。

问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:27:59.290

您可以创建一个自定义版本的 solr-web WAR 文件，您需要安装该文件以使 Liferay/SOLR 集成工作。在 WAR 文件中，您将找到 SolrIndexWriterImpl。这是所有通过 SOLR 索引的地方。您可以创建自己的此类的自定义实现，该实现使用 SearchContext 参数中的信息，该信息被传递到每个方法中，以决定是否应该对某些内容进行索引。

solr-web 的最新代码可以在这里找到：[http ://svn.liferay.com/repos/public/plugins/trunk/webs/solr-web/](http://svn.liferay.com/repos/public/plugins/trunk/webs/solr-web/)

基于此代码，我还能够创建一个 solr-web.war，它适用于更新的 SOLR 版本，而不是 Liferay 默认使用的古老的 1.4.1 版本。

# c# - 将 XDocument 绑定到 TreeView - 属性不显示

> ID：12052565
> 
> 赞同：2
> 
> 时间：2012-08-21T10:05:57.783
> 
> 标签：c#, wpf, treeview, bind, hierarchicaldatatemplate

我尝试绑定`XDocument`到`TreeView`控制。除属性外，一切正常。#%*!$#@^% 不想出现:D

请帮我修改该代码以使其工作：

```
<SolidColorBrush x:Key="xmlValueBrush" Color="Blue" />
<SolidColorBrush x:Key="xmAttributeBrush" Color="Red" />
<SolidColorBrush x:Key="xmlTagBrush" Color="DarkMagenta" />
<SolidColorBrush x:Key="xmlMarkBrush" Color="Blue" />

<DataTemplate x:Key="AttributeTemplate">
    <StackPanel Orientation="Horizontal"
            Margin="3,0,0,0"
            HorizontalAlignment="Center">
        <TextBlock Text="{Binding Path=Name}"
             Foreground="{StaticResource xmAttributeBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="=&quot;"
             Foreground="{StaticResource xmlMarkBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="{Binding Path=Value, Mode=TwoWay}"
             Foreground="{StaticResource xmlValueBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="&quot;"
             Foreground="{StaticResource xmlMarkBrush}" FontFamily="Consolas" FontSize="8pt" />
    </StackPanel>
</DataTemplate>

<HierarchicalDataTemplate x:Key="NodeTemplate">
    <StackPanel Orientation="Horizontal" Focusable="False">
        <TextBlock x:Name="tbName" Text="Root" FontFamily="Consolas" FontSize="8pt" />
        <ItemsControl
            ItemTemplate="{StaticResource AttributeTemplate}" HorizontalAlignment="Center"
            ItemsSource="{Binding Path=Attributes}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </StackPanel>
    <HierarchicalDataTemplate.ItemsSource>
        <Binding Path="Elements" />
    </HierarchicalDataTemplate.ItemsSource>
    <HierarchicalDataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=NodeType}" Value="Text">
            <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Value, Mode=TwoWay}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
            <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name}" />
        </DataTrigger>
    </HierarchicalDataTemplate.Triggers>
</HierarchicalDataTemplate> 
```

我的`TreeView`：

```
<TreeView x:Name="XmlTree" Grid.Row="1"
      ItemsSource="{Binding Path=Root.Elements, UpdateSourceTrigger=PropertyChanged}"
      ItemTemplate="{StaticResource NodeTemplate}"
      SelectedItemChanged="XmlTree_SelectedItemChanged" /> 
```

这是我背后的代码：

```
private void BindXmlData(string filePath)
{
    _xml = XDocument.Load(filePath);
    XmlTree.DataContext = _xml;
} 
```

所有节点都显示良好，但我无法管理属性以使其可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T18:37:12.513

您可以从以下位置更改您的 DataTriggers 部分：

```
 <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
                <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name}" />
            </DataTrigger> 
```

到：

```
 <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
                <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name.LocalName}" />
            </DataTrigger> 
```

希望能有所帮助，谢谢！- 沙姆斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T11:18:46.507

由于答案对我不起作用，我想向 Ashs Answer 提示（[Get XML Attributes in WPF with a treeview](https://stackoverflow.com/questions/49788315/get-xml-attributes-in-wpf-with-a-treeview/49791733791733)）。

在此处给出的原始代码中，我发现了另一个问题。节点的值不会呈现在树视图中。为此，我需要删除第一个 DataTrigger 并添加另一个。所以这部分

```
<HierarchicalDataTemplate.Triggers>
...
</HierarchicalDataTemplate.Triggers> 
```

看起来像这样：

```
<HierarchicalDataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
                <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=FirstNode.NodeType}" Value="Text">
                <Setter TargetName="tbName" Property="Text">
                    <Setter.Value>
                        <MultiBinding StringFormat="{}{0} = {1}">
                            <Binding Path="Name"/>
                            <Binding Path="FirstNode.Value"/>
                        </MultiBinding>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
        </HierarchicalDataTemplate.Triggers> 
```

现在每个包含 Value 的节点都呈现为： Node-Name = Value

# javascript - Jquery 1.8，检查项目是否隐藏

> ID：12052569
> 
> 赞同：2
> 
> 时间：2012-08-21T10:06:07.600
> 
> 标签：javascript, jquery, html, css

我有一个`div`元素`<div id='someId' style="visibility: hidden;"></div>`

$(#someId).css('可见性'); // 返回“隐藏” $(#someId).is(':hidden'); // 返回错误 $(#someId).is(':visible'); // 返回真

这是 JQuery 1.8 中的错误还是我没有弄清楚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:10:10.187

`:hidden`选择器可以指：

*   `display: none`
*   `type="hidden"`
*   `width: 0px; height: 0px`
*   祖先元素被隐藏。

所以`visibility: hidden`在这些情况下不进入。

请参阅此处的 jQuery 文档：http: [//api.jquery.com/hidden-selector/](http://api.jquery.com/hidden-selector/)

**编辑**

检查`visibility`属性：

```
if($("#someId").css('visibility') == 'hidden') {
   /* some code */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:13:21.560

请参考以下 jquery 链接：

[:隐藏选择器](http://api.jquery.com/hidden-selector/)

[:可见选择器](http://api.jquery.com/visible-selector/)

这里清楚地提到了**具有可见性的元素：隐藏或不透明度：0 被认为是可见的，因为它们仍然占用布局中的空间**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:10:00.590

来自 jquery.com：

```
Elements can be considered hidden for several reasons:

They have a CSS display value of none.
They are form elements with type="hidden".
Their width and height are explicitly set to 0.
An ancestor element is hidden, so the element is not shown on the page. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:12:11.933

is(':visible') 和 is('hidden') 以 display 属性为参考

# android - getRight、getLeft、getTop 返回零

> ID：12052570
> 
> 赞同：10
> 
> 时间：2012-08-21T10:06:12.527
> 
> 标签：android

我正在使用以下代码。但是所有方法都返回零值。我知道要获得视图的坐标，我们应该绘制视图。这就是为什么我在 onResume 方法中使用代码但仍然无法正常工作的原因。任何想法？

```
 @Override
public void onResume(){
    super.onResume();
    System.out.println("Onresume"); 
    System.out.println("tab1 - left" + btn_Tab7 .getLeft());
    System.out.println("tab1 - Top" + btn_Tab7.getTop());
    System.out.println("tab1 - right" + btn_Tab7.getRight());
    System.out.println("tab1 - bottom" + btn_Tab7.getBottom()); 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T10:36:32.503

在`onResume`它太早调用getLeft，getRight ... 做它`onWindowFocusChanged`

```
@Override
public void onWindowFocusChanged (boolean hasFocus){
    super.onWindowFocusChanged(hasFocus);
    if(hasFocus){
        System.out.println("onWindowFocusChanged"); 
        System.out.println("tab1 - left" + btn_Tab7 .getLeft());
        System.out.println("tab1 - Top" + btn_Tab7.getTop());
        System.out.println("tab1 - right" + btn_Tab7.getRight());
        System.out.println("tab1 - bottom" + btn_Tab7.getBottom());
    }
} 
```

来自 onResume 的文档：

> 请记住，**onResume 并不是您的活动对用户可见的最佳指标**；系统窗口（例如键盘保护）可能位于前面。使用 onWindowFocusChanged(boolean) 确定您的活动对用户可见（例如，恢复游戏）。

# nagios - Nagios 插件 - 复制和执行？

> ID：12052581
> 
> 赞同：0
> 
> 时间：2012-08-21T10:06:54.617
> 
> 标签：nagios

我有一个 Nagios 服务器安装并运行。我开始将 check_mk 部署到我所有的客户端机器上。我正在使用 mrpe 在我的客户端计算机上进行自定义检查。作为检查之一，我想使用 check_ssh 插件。我试图将 check_ssh 从另一台机器复制到客户端，但看起来它不允许我以这种方式运行它。我可以摆脱实际安装 nagios 代理而只使用 check_mk 并能够运行 Nagios 插件吗？

我得到的确切错误是：

```
ld.so.1: check_ssh: fatal: libintl.so.3: open failed: No such file or directory 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T20:17:34.200

您可以在没有 nrpe 插件的情况下检查 SSH，它可以从 Nagios 服务器完成，只需使用带有以下命令的 check_ssh 插件（从服务器启动）：

```
./usr/local/nagios/libexec/check_ssh -H <client_ip> 
```

如果已启用，则应打印如下内容：

> SSH OK - OpenSSH_6.0p1 Debian-4+deb7u1（协议 2.0）| 时间=0,018154s;;;0,000000;10,000000

（那是因为我使用的是 Debian Wheezy）

check_ssh 带有 Nagios 插件 tarball...

我目前正在使用

> nagios-plugins-2.0.2.tar.gz

祝你好运...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:29:09.403

标准 nagios-plugins 包中的大多数插件都是用 C 编译的，因此如果您将它们复制到不同的发行版或架构，它们可能无法工作。我会考虑只下载 nagios-plugins 包或获取客户端机器的最新源包。Nagios 插件源压缩包 [http://prdownloads.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.16.tar.gz](http://prdownloads.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.16.tar.gz)

# php - 如何根据 JavaScript 函数的结果使用 PHP 写入数据库？（脸书应用程序）

> ID：12052588
> 
> 赞同：1
> 
> 时间：2012-08-21T10:07:13.213
> 
> 标签：php, javascript, facebook

我们两个人正在开发[Facebook 竞赛应用程序](https://www.facebook.com/MyPuzzler/app_142974305841145)。我的老板让按钮状态在用户喜欢、输入电子邮件详细信息和共享页面时起作用。当用户单击“共享”，然后在“发布到个人资料”框出现时单击取消，就会出现问题。无论用户是否实际发布到他们的个人资料，该应用程序仍然使用“完成”按钮状态。

JavaScript 是一个调用 Facebook API 来发布到用户时间轴的函数：

```
// calling the API ...  
function postToFeed() {
    var obj = {
        method: 'feed',
        link: 'https://www.domain.co.uk',
        picture: 'https://www.domain.co.uk/FacebookTabs/pics/fblogo.png',
        name: 'My company',
        caption: 'This is a test',
        description: 'Using My company to do your best'
    };
FB.ui(obj, function(response) {
        if (response && response.post_id) {
            return('Post was published.');
        } else {
            return('Post was not published.');
        }
    });
} 
```

基本上，如果 Facebook 共享成功，我想使用 PHP if/else 语句中的结果写入数据库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:11:53.023

您最好的选择是使用 AJAX，您会写入 MySQL 数据库吗？

# asp.net - 为什么我的实例在尝试将会话存储在同一位置的 Azure 缓存中时会回收？

> ID：12052589
> 
> 赞同：0
> 
> 时间：2012-08-21T10:07:17.563
> 
> 标签：asp.net, asp.net-mvc, session, azure, azure-caching

我运行了一个 ASP.Net MVC3 应用程序，并按照[这个 Windows Azure How-To](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)来了解如何将我的会话存储在 Windows Azure 中的同位缓存中。

我已经安装了提到的 Nuget 包，并将必要的信息应用于我的 web.config。Web 角色设置为运行 2 个小型实例，并使用 30% 的共存缓存。

当我部署到 Azure 时，我的实例只是回收。通过与其中一个实例的远程桌面连接，我在日志中发现了这两个似乎相关的事件：

> CacheStatusIndicator 服务意外终止。它已经这样做了 1 次。将在 1000 毫秒内采取以下纠正措施： 重新启动服务。
> 
> CacheService 服务意外终止。它已经这样做了 1 次。将在 60000 毫秒内采取以下纠正措施： 重新启动服务。

但是，我找不到太多关于此的信息。

有谁知道我在这里可能缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:31:54.017

我非常确定您的角色缺少一些参考，因此您会看到来自 CacheStatusIndicator 的此类消息。您是否已验证您的角色确实将所有模块/引用设置为“将本地复制为 true”，因此它们都是部署包的一部分。主要是一个 MVC3 应用程序，您可能需要手动设置应用程序 MVC 特定引用属性以将本地复制为 true 以解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:58:36.803

现在我花了我共同的时间来处理这个问题，最后它似乎起作用了。不确定究竟是哪一部分解决了问题，但我会总结我所做的更改，以防其他人在某些时候遇到同样的问题。

1.  在调试此问题时，我还将我的应用程序从 MVC3 更新到 MVC4。不确定这是否与解决此问题有关，但至少这是我所做的更改之一。
2.  我注意到 IntelliTrace 服务引发了另一个异常，所以我在部署中禁用了它并重新部署了应用程序（我的猜测是这个问题实际上是导致实例循环的原因。

**Microsoft 支持对此问题的回应：**

我正在对您的部署进​​行故障排除，并从 CacheService.exe 获得了内存转储

这是抛出的异常

> CLR 异常类型：System.TypeInitializationException “'Microsoft.ApplicationServer.Caching.AzureCommon.AzureUtility' 的类型初始化程序引发了异常。” ModLoad: 000007fe `ea010000 000007fe`ea0fa000
> D:\Windows\Microsoft.NET\Framework64\v4.0.30319\diasymreader.dll ***错误：找不到符号文件。默认为 D:\windows\system32\KERNEL32.dll 导出符号 - ntdll!ZwWaitForMultipleObjects+0xa: 00000000`76f5739a c3
> ret

在以下情况下，可能会发生此命名空间的异常：

*   您`Microsoft.WindowsAzure.Plugins.Caching.ConfigStoreConnectionString`在 ServiceConfiguration 上设置设置以使用本地存储模拟器
*   在 web.config 上，您的`<dataCacheClients>`部分标识符值未设置为正确的角色名称
*   In some rare cases if you have the SDK 1.6 and 1.7 installed together this can cause some mixed up DLLs when project is being built.

# cocoa-touch - CoreGraphics：在视图中心绘制矩形

> ID：12052594
> 
> 赞同：0
> 
> 时间：2012-08-21T10:07:38.843
> 
> 标签：cocoa-touch, core-graphics, drawrect, cgcontext

我有一个方法被覆盖的`UIView`子类。`drawRect:`在那里，我有一长行**生成**的代码来绘制一些东西。

生成的代码存在路径/线的所有顶点/坐标都被​​硬编码的问题。所以，要画一个 100x100 的正方形，它会从 0,0 开始，然后到 0,100 -> 100,100 -> 100,0。要根据`UIView` `bounds`属性制作此形状比例，请执行以下操作：

```
// This is the size of the drawing. I always know this value beforehand.
CGSize contentSize = SHAPE_XMARK_SIZE;
CGFloat scaleX = self.bounds.size.width / contentSize.width;
CGFloat scaleY = self.bounds.size.height / contentSize.height;

CGContextScaleCTM(context, MIN(scaleX, scaleY), MIN(scaleX, scaleY)); 
```

就规模而言，一切都很好。现在，我希望绘图的位置也相对于边界。我也想以某种方式使该`drawRect:`方法也基于 对齐绘图`bounds`。

我正在考虑类似的事情：

1.  推送上下文方法
2.  绘制代码
3.  流行语境
4.  定位先前的上下文

这是一个理智的方法吗？还是 push 和 pop 上下文无法完成这样的巫术？

* * *

**一种简单的方法：**

为了回答“您尝试过什么”的问题，我尝试将我绘制的视图隔离`bounds`为与绘图大小相等的大小，然后将该视图嵌入到另一个视图中......并且它可以工作。但是，这种方法很乏味，如果可能的话，我宁愿避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:45:32.943

Pfft，答案非常简单。我猜是我 1，所以 0。

```
CGContextTranslateCTM(context, xOffset, yOffset); 
```

是的，我不知何故忽略了一个事实，即应该存在一个很棒的函数来 translate `CGContextRef`，因为存在 scale 函数。

其余的都是简单的数学来实现垂直和水平对齐。

# javascript - Javascript - 从另一个域发送和接收数据

> ID：12052595
> 
> 赞同：0
> 
> 时间：2012-08-21T10:07:38.417
> 
> 标签：javascript, client-server

我正在尝试创建一个需要能够从另一个域发送和接收数据的 javascript 插件。

从概念上讲，插件很简单：

1.  用户安装一段 javascript 代码
2.  该代码与中央服务器（在另一个域上）进行通信，发送一些关于用户站点的信息（一种查询形式）并返回一些信息

服务器域将完全由我控制，但正如您所见，最终用户应该能够通过安装一段 javascript 代码来使用该插件。

这可能吗？如果可以，最简单的实现形式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:13:41.623

[您的基本问题将是规避 JavaScript（维基百科](http://en.wikipedia.org/wiki/Same_origin_policy)）的同源策略。如果您只想在客户端使用 JavaScript，基本上您有两种选择：

1.  **CORS**（跨域资源共享）：在这里你可以在你的域上启用共享，用户端的 JavaScript 将能够与任何数据进行交互，就好像它在他们自己的服务器上一样，因此你没有同源的问题政策。您可以像与自己的服务器交互一样执行 AJAX 请求。有关如何在您的服务器环境中激活此功能的详细信息，请参见[此处](http://enable-cors.org/)。但是请注意，旧浏览器不支持此功能，请参阅[caniuse.com](http://caniuse.com/#feat=cors)了解详细信息。

2.  **JSONP**：所有请求都使用 JSONP 语法。[维基百科上的主题](http://en.wikipedia.org/wiki/JSONP)

# c# - 为什么客户端连接这么慢？

> ID：12052596
> 
> 赞同：1
> 
> 时间：2012-08-21T10:07:39.687
> 
> 标签：c#, asynchronous, tcpclient

我正在尝试在女巫乘法客户端中制作一个程序将连接到服务器。但我有一个问题，因为当我尝试同时连接多个客户端时，需要“很长时间”才能完成。
我正在使用异步方式连接：

```
 public bool connect(string IP,int port)                                                                                                       
    { 

        try                                                                                                                                       
        {

            if (m_clientSocket == null)
            {                                                                                                      
                m_clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);                                                                                                    
                IPAddress ip = IPAddress.Parse(IP.ToString());
                int iPortNo = System.Convert.ToInt16(port.ToString());

                IPEndPoint ipEnd = new IPEndPoint(ip, iPortNo);                                                                                                      
                client.BeginConnect(remoteEP, new AsyncCallback(ConnectCallback), client);
            }

        }catch()                                                                                                                
        {                                                                                                                                                                                                                                               
            return false;                                                                                                                         
        }
    } 

private void ConnectCallback(IAsyncResult ar)
    {
        try
        {
            Socket client = (Socket)ar.AsyncState;

            if (m_clientSocket != null)
            {
                if (m_clientSocket.Connected)
                {
                    client.EndConnect(ar);
                    // send next data here

                }
                else
                {
                    client.EndConnect(ar);
                    m_clientSocket.Close();
                    m_clientSocket = null;
                    state = CONNECT_ERROR; 
                }
            }

        }
        catch ()
        {   
        }
    } 
```

对于我要连接的每个客户端，我打开一个新类，其中包含您可以在上面看到的两种方法。与简单的 for 循环相比，我一个接一个地调用方法。

在 Wireshark 中，我观察到下一次需要连接到服务器的时间是 0.1 秒，我认为这是分配的。

知道为什么要花这么长时间吗？

感谢您提供任何帮助。

# javascript - 如何使用父 ID 访问子级

> ID：12052597
> 
> 赞同：0
> 
> 时间：2012-08-21T10:07:55.943
> 
> 标签：javascript, jquery

我有这种html结构。呈现两个不同集合的列表。我必须以不同的方式处理点击事件。

```
<div id='nodelist1'>
<ul>
 <li class='nodeelem'>first node
    <ul>
      <li class='nodeelem'>second node
         <ul>
           <li class='nodeelem'>third node</li>
         </ul>
      </li>
     </ul>
   </li>
</ul>
</div>

<div id='nodelist2'>
<ul>
 <li class='nodeelem'>first node
    <ul>
      <li class='nodeelem'>second node
         <ul>
           <li class='nodeelem'>third node</li>
         </ul>
      </li>
     </ul>
   </li>
</ul>
</div> 
```

我必须使用 div id 访问节点

```
$('#nodelist1 li.nodeelem').click(handler);
$('#nodelist2 li.nodeelem').click(handler2); 
```

这是访问儿童点击的正确方法吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:09:57.440

您忘记了 ID 选择器的哈希值`#`（尽管您在编辑中更正了这一点）：

```
$('#nodelist1 li.nodeelem').click(handler);
$('#nodelist2 li.nodeelem').click(handler2); 
```

提示：您可以通过使用`on()`事件委托来使事件更有效：

```
$('#nodelist1').on('click', '.nodeelem', handler);
$('#nodelist2').on('click', '.nodeelem', handler2); 
```

# ios - iOS app not working offline after installing parse notifications - xcode

> ID：12052604
> 
> 赞同：0
> 
> 时间：2012-08-21T10:08:20.233
> 
> 标签：ios, xcode, parsing, notifications, wifi

does anyone have a solution for this? after following the tutorial on parse for notifications on iOS the app does not launch if there is no internet connection both on simulator and actual device.. please advise for any solution. the source for this is on [https://www.parse.com/tutorials/ios-push-notifications](https://www.parse.com/tutorials/ios-push-notifications) . the debugger outcome:

```
2012-08-21 19:20:22.415 app[555:c07] Error: Error Domain=NSURLErrorDomain Code=-1009 
"The Internet connection appears to be offline." UserInfo=0xc50d470 
{NSErrorFailingURLStringKey=https://api.parse.com/2/create, 
NSErrorFailingURLKey=https://api.parse.com/2/create, NSLocalizedDescription=The Internet 
connection appears to be offline., NSUnderlyingError=0xc509070 "The Internet connection 
appears to be offline."} (Code: 100, Version: 1.0.64)

2012-08-21 19:20:22.415 pyxida3[555:c07] Network connection failed. Making attempt 2 after sleeping for 1.517845 seconds. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:31:17.247

for anyone having the same problem just save your objects in background. in the appDelegate:

```
[testObject saveInBackground]; 
```

# c++ - 如何在 C++ 中实现虚拟表

> ID：12052605
> 
> 赞同：0
> 
> 时间：2012-08-21T10:08:22.863
> 
> 标签：c++

虚拟表是函数指针的数组。我如何实现它，因为每个函数都有不同的签名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:12:21.153

You don't implement it.

The compiler generates it (or something with equivalent functionality), and it's not constrained by the type system so it can simply store the function addresses and generate whatever code is needed to call them correctly.

You can implement something vaguely similar using a `struct` containing different types of function pointer, rather than an array. That's quite a common way of implementing dynamic polymorphism in C; for example, the Linux kernel provides polymorphic behaviour for file-like objects by defining an interface along the lines of:

```
struct fileops {
    int (*fo_read)  (struct file *fp, ...);
    int (*fo_write) (struct file *fp, ...);
    // and so on
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:12:11.293

If functions in a virtual table have different signatures, you'll have to implement it as a structure type containing members with heterogeneous types.

Alternately, if you have other information telling you what the signatures are, you can cast a function pointer to another function pointer type, as long as you cast it back to the correct type before calling it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:37:01.240

如果您在编译时知道每个函数，那么您可以使用不同类型的函数指针的结构（但是，如果您在编译时知道每个函数，为什么不只使用带有虚拟方法的类呢？）。

如果您想在运行时执行此操作，那么一个数组`void*`可能就足够了。您需要在存储它们时将指针转换为输入，然后在调用它们之前再次转换（到正确的类型）。当然，您需要在其他地方跟踪函数类型（包括调用约定）。

在不知道您打算如何处理的情况下，很难给出更有用的答案。

* * *

在代码中实现 vtable 是有正当理由的。它们是一个实现细节，因此您需要针对已知的 ABI 而不仅仅是“C++”。我所做的唯一一次是在运行时动态创建新的 COM 类的实验（COM 对象的 ABI 预期是一个指向 vtable 的指针，其中包含遵循`__stdcall`调用约定的函数，其中前 3 个函数实现`IUnknown`接口）。

# c# - 将带点的字符串转换为带欧元的货币，

> ID：12052610
> 
> 赞同：2
> 
> 时间：2012-08-21T10:08:37.237
> 
> 标签：c#, currency

我有一个这样的字符串：“44.00000000000”

在这种情况下，点是小数点，我正在尝试转换为欧元货币。但有问题

请看截图

[![在此处输入图像描述](../Images/21a7e320ec4f3e475c934324da9ad3f0.png)](https://i.stack.imgur.com/o2E6S.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:21:32.530

更改您的十进制解析行以使用以下内容：

```
decimal.Parse(inputString, CultureInfo.InvariantCulture) 
```

您可能想在这里阅读：

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)

# iphone - 为什么我的触摸移动委托不起作用？

> ID：12052611
> 
> 赞同：2
> 
> 时间：2012-08-21T10:08:39.780
> 
> 标签：iphone, ios, ipad, ios5, ios4

第一次`UITouch`开始和`UITouch`移动导致代理被正确调用。但是在将 a 添加`UIPanGestureRecognizer`到视图之后，只`UITouch`调用了 begin ，但`UITouch`没有调用 move 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:58:28.580

您可能需要添加“gestureRecognizer.cancelsTouchesInView=NO;” 继续在您的视图上接收触摸事件。

# java - 开始使用 Jung 图书馆

> ID：12052612
> 
> 赞同：3
> 
> 时间：2012-08-21T10:08:41.557
> 
> 标签：java, graph, jung

最近我下载了 Jung 库并尝试分析一些数据集。首先，除此之外是否还有其他教程：http: [//www.groto-networking.com/JUNG/JUNG2-Tutorial.pdf](http://www.grotto-networking.com/JUNG/JUNG2-Tutorial.pdf)？

此外，我正在使用 eclipse 并在导入数据集时遇到困难。我不知道这是图形问题还是 java 问题。无论哪种方式，我都想了解一些有关如何使用数据集的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T11:29:32.923

我遇到了一些关于荣格的基本教程。

1.jung[文档](http://jung.sourceforge.net/doc/index.html)

2.使用~~[jung的示例程序](http://farhad.arbabzadah.com/2011/09/graph-visualization-with-java-jung/)~~

[3.如何在eclipse](https://stackoverflow.com/questions/5616233/how-do-i-install-jung2-on-eclipse)上安装jung

4.不同种类的例子使用[jung](http://jung.sourceforge.net/examples.html)。

# php - 将 jquery 字符串传递给 cakephp 控制器

> ID：12052614
> 
> 赞同：0
> 
> 时间：2012-08-21T10:08:56.913
> 
> 标签：php, jquery, ajax, cakephp

> **可能重复：**
> [使用 json 传递 jquery 变量](https://stackoverflow.com/questions/12055417/passing-jquery-variable-with-json)

我正在尝试使用此代码将 jquery 变量从视图传递到我的控制器

```
var str = 'Some data i need';

    $.post('Configs/', {data : str}); 
```

然后我用这段代码在我的控制器中检索它。

```
if($this->request->is('post'))
    {
       $value = $_POST['data'];

       if($value == null)
       {
           $this->Session->setFlash('null');
       }
       else
       {
        foreach($value as $v)
        {
            $this->Session->setFlash($v);       
        }
       }
    } 
```

我可以检索数组，但是当我尝试遍历 $value 时，它​​打印出来的只是单词“Array”。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:13:22.357

将数据作为 json 字符串传递，并在您的控制器中将此字符串转换为 php 数组，使用`json_decode()`

# mysql - 使用 ORDER BY 和 LIMIT 时查询非常慢？

> ID：12052615
> 
> 赞同：1
> 
> 时间：2012-08-21T10:08:57.440
> 
> 标签：mysql, sql-order-by, limit

以下查询在订购时需要 10 秒才能完成。如果没有命令，它会在 0.0005 秒内完成。我已经在字段“sku”、“vid”和“timestamp”上有一个索引。我在这张表中有更多的 200,000 条记录。请帮忙，使用order by时查询有什么问题。

```
SELECT i.pn,i.sku,i.title, fl.f_inserted,fl.f_special, fl.f_notinserted
FROM inventory i 
LEFT JOIN inventory_flags fl ON fl.sku = i.sku AND fl.vid = i.vid
WHERE i.qty >=2 ORDER BY i.timestamp  LIMIT 0,100;

-- --------------------------------------------------------

--
-- Table structure for table `inventory`
--

CREATE TABLE IF NOT EXISTS `inventory` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pn` varchar(60) DEFAULT NULL,
  `sku` varchar(60) DEFAULT NULL,
  `title` varchar(60) DEFAULT NULL,
  `qty` int(11) DEFAULT NULL,
  `vid` int(11) DEFAULT NULL,
  `timestamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `vid` (`vid`),
  KEY `sku` (`sku`),
  KEY `timestamp` (`timestamp`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Table structure for table `inventory_flags`
--

CREATE TABLE IF NOT EXISTS `inventory_flags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `f_inserted` tinyint(1) DEFAULT NULL,
  `f_notinserted` tinyint(1) DEFAULT NULL,
  `f_special` tinyint(1) DEFAULT NULL,
  `timestamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `sku` varchar(60) DEFAULT NULL,
  `vid` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `vid` (`vid`),
  KEY `sku` (`sku`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

**解释结果：**

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  fl  system  vid,sku NULL    NULL    NULL    0   const row not found
1   SIMPLE  i   index   NULL    timestamp   5   NULL    10  Using where 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:17:11.413

您需要在表上放置[多](http://dev.mysql.com/doc/refman/5.6/en/multiple-column-indexes.html)列索引，而不是在列上添加单独的索引，因为您在连接条件下使用来自同一个表的多个列。

在包括来自`WHERE`子句的列之后，还包括在[复合索引](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)`ORDER BY`中的子句中使用的列。尝试添加流动索引并使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.6/en/explain.html)测试它们：

```
ALTER TABLE ADD INDEX ix_if inventory_flags(sku, vid);
ALTER TABLE ADD INDEX ix_i inventory(sku, qty, timestamp); 
```

还要尽量避免`DISTINCT`查询中的子句，它相当于`GROUP BY`子句，如果你仍然需要它，那么考虑添加覆盖索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:17:59.703

如果`sku`每个库存项目都是唯一的，则将其定义为`UNIQUE`- 它会加快速度。（或者`sku`和`vid`- 在这种情况下定义一个复合索引的组合。）

你为什么要这样做`SELECT DISTINCT`？绝大多数时间使用`DISTINCT`是您的查询或表结构错误的标志。

因为它是`DISTINCT`,`sku`不是`UNIQUE`它不能使用时间戳上的索引来加快速度，所以它必须对一个有 200,000 条记录的表进行排序 - 它甚至不能使用 qty 上的索引来加速该部分。

PS。Omesh 也有一些很好的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T08:04:18.020

你可以使用`force index(index_key)`. 试试看，你会在解释查询中看到mysql现在将在'order by'时使用键索引

# c# - LibTiff.Net 将 Tiff 对象转换为字节数组并返回

> ID：12052617
> 
> 赞同：2
> 
> 时间：2012-08-21T10:08:59.410
> 
> 标签：c#, bytearray, type-conversion, tiff, libtiff.net

您好我找不到将 MULTI PAGE tiff 图像转换为字节数组的示例。

要将字节数组转换为 Tiff，我使用此方法

```
 public static Tiff CreateTiffFromBytes(byte[] bytes)
    {
        using (var ms = new MemoryStream(bytes))
        {
            Tiff tiff = Tiff.ClientOpen("in-memory", "r", ms, new TiffStream());
            return tiff;
        }
    } 
```

**编辑：**

此方法将具有更多页面的 TIFF 图像转换为字节数组。我认为这种方法将是问题的根源。

```
 //imageIn is tif image with 12 pages
    public static byte[] ImageToByteArray(System.Drawing.Image imageIn)
    {       
        using (var ms = new MemoryStream())
        {
            imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Tiff);
            return ms.ToArray();
        }
    }

   public static List<System.Drawing.Image> GetAllPages(System.Drawing.Image multiTiff)
    {
        var images = new List<System.Drawing.Image>();
        var bitmap = (Bitmap)multiTiff;
        int count = bitmap.GetFrameCount(FrameDimension.Page);

        for (int idx = 0; idx < count; idx++)
        {
            bitmap.SelectActiveFrame(FrameDimension.Page, idx);
            using (var byteStream = new MemoryStream())
            {
                bitmap.Save(byteStream, ImageFormat.Tiff);

                images.Add(System.Drawing.Image.FromStream(byteStream));
            }
        }
        return images;
    } 
```

转换为字节数组后，我丢失了页面。字节数组中的图像只有一页。

```
 Image src = Image.FromFile(source);
    //imagesInSource.Count (pages) is 12
    List<Image> imagesInSource = GetAllPages(src);

    byte[] imageData = ImageToByteArray(src);

    Image  des = ImageConvert.ByteArrayToImage(imageData);
    //imagesInSource.Count (pages) is 1
    List<Image> imagesInDes = GetAllPages(des); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:05:48.733

我不确定为什么不能将 TIFF 文件发送到服务？毕竟，该文件只是字节。

并且您在第一个代码段中的代码不正确，因为您处理了传递给`Tiff`对象的内存流。你不应该那样做。该`Tiff`对象将处理流本身。

**编辑：**

在第三个片段中，您为每个页面创建图像，`System.Drawing.Image`但您仅将第一个生成的图像转换为字节数组。你应该使用类似的东西

```
List<byte[]> imagesBytes = new List<byte[]>();
foreach (Image img in imagesInSource)
{
    byte[] imageData = ImageToByteArray(src);
    imageBytes.Add(imageData);
} 
```

然后你应该发送`imagesBytes`到你的服务器并从中创建几个 TIFF 图像。

无论如何，您似乎应该更多地考虑您*真正*想要做什么。因为现在我不清楚所有这些转换是为了什么。

# c# - 如何在不将查询参数的值加倍的情况下进行 URL 重写？

> ID：12052618
> 
> 赞同：5
> 
> 时间：2012-08-21T10:09:00.077
> 
> 标签：c#, asp.net, iis-7, url-rewriting

我必须关注网址：

> [http://example.org/sessionstuff/kees/view.aspx?contentid=4&itemid=5](http://example.org/sessionstuff/kees/view.aspx?contentid=4&itemid=5)

它需要重写，因此它将转到：

> [http://example.org/sessionstuff/view.aspx?site=kees&contentid=4&itemid=5](http://example.org/sessionstuff/view.aspx?site=kees&contentid=4&itemid=5)

基本上它会`kees`取值并将其作为`site`参数。我正在使用在我的 web.config 中使用规则的 IIS URL 重写模块。我已将以下代码添加到我的 web.config：

```
<rule name="RedirectSite" stopProcessing="true">
    <match url="^(\D[^/]*)/(.*)$" />
    <action type="Rewrite" url="{R:2}?site={R:1}" />
</rule> 
```

一切正常，但是当我进行回发时，`site`参数加倍。我已经通过在我的 .aspx 页面上使用以下代码对此进行了测试：

```
<h3>Querystring</h3>
<ul>
    <% foreach (string key in Request.QueryString.Keys)
        Response.Write(String.Format("<li><label>{0}:</label>{1}</li>", key, Request.QueryString[key])); %>
</ul>
<asp:Button runat="server" Text="Postback" /> 
```

**第一次**

```
Querystring
site: kees
contentid: 4
itemid: 5 
```

**第二次**

```
Querystring
site: kees, kees <--- double
contentid: 4
itemid: 5 
```

如何防止`site`参数自我复制？每个回发都会增加另一个值。

[注意：其他查询参数必须存在，因此使用`appendQueryString="false"`似乎不是一个选项。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:19:11.093

`site=`如果 URL 已经包含参数（无论它位于查询字符串中的哪个位置），看起来这可以通过不重写 URL 来解决。那么我们该怎么做呢？

在这里查看第 9 条：[http ://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/](http://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/)

我现在没有办法对此进行测试，但我认为这样的事情应该可以工作：

```
<rule name="Query String Rewrite">
  <match url="^(\D[^/]*)/(.*)$" />
  <conditions>
    <add input="{QUERY_STRING}" pattern="^((?!site=).)*$" />
  </conditions>
  <action type="Rewrite" url="{R:2}?site={R:1}" />
</rule> 
```

注意：我不擅长规则重写，但是`^((?!site=).)*$`当字符串不包含时，此正则表达式匹配`site=`，这是您希望重写规则运行的时候，因此我将其添加为条件。我认为你可以更有效地做到这一点。

我在这里要做的是说：让我们重写规则，但前提是它尚未包含`site`参数。

我希望这足以让你回答这个问题！

===

这似乎有效：

```
<rule name="RedirectSite" stopProcessing="true">
    <match url="^(\D[^/]*)/(.*)$" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="^((?!site=).)*$" />
    </conditions>
    <action type="Rewrite" url="{R:2}?site={R:1}" />
</rule>

<rule name="RedirectSite2" stopProcessing="true">
    <match url="^(\D[^/]*)/(.*)$" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="site=" />
    </conditions>
    <action type="Rewrite" url="{R:2}"  />
</rule> 
```

# regex - 如何匹配只有重复模式的行

> ID：12052619
> 
> 赞同：0
> 
> 时间：2012-08-21T10:09:01.073
> 
> 标签：regex

我正在尝试将（复合）单词与 2 个或更多内部点字符（不是句点）匹配

1.  此行有单•点字
2.  这行•有两个•点，但用两个词
3.  而这一行有几个•点•在一个单词中
4.  还想匹配多于 1 个点的 a•line•like•this
5.  并且会•喜欢•匹配一条有单条和多条虚线的线

第 3-5 行是匹配的

到目前为止，我可以像这样匹配*所有*这些：

> \w•\w

但我不知道如何*排除*像 1 和 2 这样的行。

*这是我的实际问题的简化版本，即在 Xcode 中搜索特定模式。我认为我需要提高我对正则表达式的一般知识*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:11:37.813

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:04:26.207

# .htaccess - Yii前后端常用结构及访问链接和htaccess设置

> ID：12052622
> 
> 赞同：2
> 
> 时间：2012-08-21T10:09:07.173
> 
> 标签：.htaccess, yii

我是yii的初学者

我创建了一种结构来处理前端和后端的文件，以便公共文件可以用于两者，并且可以从它们的文件夹中使用不同的文件

* * *

framework/ （这个文件夹将包含所有 yii 框架核心文件夹和文件） assets/ js/

前端/

常见的/

后端/

api

图片/存储/

受保护/组件/配置

main.php（数据库、电子邮件等...）

控制器/

前端/

后端/

意见/

前端/

后端/

模型/扩展/模块/

运行时/ index.php .htaccess

* * *

此结构是为预订应用程序创建的。一些公共文件在它们之间共享，它将在控制器/和视图/中，而不同的文件将在控制器/前端/和控制器/后端/中

示例我在两个文件夹中都有文件，如下所示

控制器/ SiteController.php

前端/SiteController.php

后端/SiteController.php

视图/布局/

前端/布局

后端/布局

现在的问题是我如何设置 .htaccess 以便当我写[http://myapp.com/index.php](http://myapp.com/index.php) --> 将访问前端和 [http://myapp.com/backend/inex.php](http://myapp.com/backend/inex.php)的所有文件- -> 将访问后端文件（beckend 视图和控制器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:35:23.143

将**.htaccess**和**index.php**复制到 [ */backend/* ] 文件夹。然后在新的**index.php**中更改配置路径，与主路径不同。例如

```
$config=dirname(__FILE__).'/../../'.YII_PROTECTED.'/config/admin.production.php'; 
```

并为后端独立创建自己的配置。

因此，您可以使用任何常见的视图、控制器或模型，但最重要的是使用 UrlManager 对其进行控制。[这是我个人网站](http://www.palamarchuk.info) 的一个例子*（你可以在外部测试它的 URL 逻辑）*：

**前端：**

```
 'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'urlSuffix' => '/',
        'rules'=>array(
            '<controller:profile>/' => '<controller>/index/',
            '<controller:profile>/<action:cv>/<project:\w+>' => '<controller>/portfolio/',
            '<controller:profile>/<action>' => '<controller>/<action>/',
            '<controller:blog>/' => '<controller>/index/',
            '<controller:blog>/<postID:[0-9]+>.html' => '<controller>/post/',
        ),
    ), 
```

**后端：**

```
 'rules'=>array(
        '/' => 'autoadmin/default/index',
        '<controller:\w+>' => 'autoadmin/<controller>/index',
        '<controller:\w+>/<action:\w+>' => 'autoadmin/<controller>/<action>',
    ), 
```

后端查看作为模块执行的[AutoAdmin CMS 。](http://www.yiiframework.com/extension/autoadmin/)

两者都使用相同的文件结构，但每个都可以使用任何常见的东西（很可能是模型）。

# c# - 如何在 C# 中使用接口

> ID：12052624
> 
> 赞同：2
> 
> 时间：2012-08-21T10:09:11.263
> 
> 标签：c#, interface, decoupling

使用 C# .NET 4.0、Visual Studio 2010。

好吧，目前我正在研究类的解耦和使用接口。我已经从另一篇文章中实现了一个解决方案来测试我是否可以让它工作，但不幸的是我从来没有使用过接口。

所以这是我所拥有的基础知识：

表格1：

```
partial class Form1 : InterfacePareto
{
    public string myTest
        {
            get { return herpTxt.Text; }
            set { herpTxt.Text = value; }
        }  
} 
```

界面：

```
interface InterfacePareto
{
    string myTest { get; set; }
} 
```

MyWorkingOutClass：

```
Class MyWorkingOutClass
{
    private readonly InterfacePareto pare;

    public MyWorkingOutClass(InterfacePareto pare)
    {
        this.pare = pare;
    }

    private void Testtime()
    {
        string firstName = pare.myTest;
        pare.myTest = firstName + " extra";
    }
} 
```

目的：

目前的计划是从表单文本框中获取文本。然后传递给工人阶级。工人阶级然后进行任何需要的计算等，然后将结果传递回表单文本框。

我的问题是，我的代码是否正确。如果是，那么我错过了什么/做错了什么？或者，如果有人认为这不是实现我需要的正确方法，他们有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:40:24.510

我刚刚测试了代码，这对我来说很好：

```
public partial class MainForm :Form, InterfacePareto //My main form inheriting Form class and interface
{
    public MainForm()
    {
        InitializeComponent();
    }

    public string myTest
    {
        get { return herpTxt.Text; }
        set { herpTxt.Text = value; }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //On button click create MyWorkingOutClass instance and pass MainForms instance
        MyWorkingOutClass mc = new MyWorkingOutClass(this); 
        //After this line text box content will change
        mc.Testtime();
    }
}

//Changed modifier to public
public interface InterfacePareto
{
    string myTest { get; set; }
}

//Changed modifier to public
public class MyWorkingOutClass
{
    private readonly InterfacePareto pare;

    public MyWorkingOutClass(InterfacePareto pare)
    {
        this.pare = pare;
    }

    //Changed modifier to public
    public void Testtime()
    {
        string firstName = pare.myTest;
        pare.myTest = firstName + " extra";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:17:06.220

这应该可以正常工作。

当 MyWorkingOutClass 在与 UI 线程不同的线程上工作时，您会遇到一个问题。

要解决这个问题，您可能需要更改表单上的实现以切换到 UI 线程。

# java - 从 sql ResultSet 填充实体类对象列表

> ID：12052625
> 
> 赞同：0
> 
> 时间：2012-08-21T10:09:14.430
> 
> 标签：java, sql

所以我有这个sql查询：

```
 "select company, surveys.surveyID, questionID, question, questionScore FROM surveys INNER JOIN (SELECT * FROM companies INNER JOIN "
            + "(SELECT * FROM questions INNER JOIN categories "
            + "ON questions.catID = categories.catID) AS cats "
            + "ON companies.questionID = cats.questionID) AS yes "
            + "ON yes.surveyID = surveys.surveyID WHERE company=?" 
```

“猫”和“是”没有任何意义，只是我极其冗长的命名方案的牺牲品。

公司只是一个字符串。

它返回的表如下所示：

```
 ---------------------------------------------
|companyName|surveyID|questionID|questionScore|
 --------------------------------------------- 
```

此表的主键是 (companyName,surveyID AND QuestionID)，因为每个公司可以有多个调查，每个调查都有许多问题。

然后我有这个类：

```
public class Company
{
private String companyName;
private String surveyorName;
private String surveyorTitle;
private int surveyID;
private Map<Integer,Integer> questions;

public Company(String name, String surveyor, String surveyerTitle,
    int surveyID, Map<Integer, Integer> questions)
{
this.companyName = name;
this.surveyorName = surveyor;
this.surveyorTitle = surveyerTitle;
this.surveyID = surveyID;
this.questions = questions;
} 
```

拥有所有的 getter 和 setter

例如，假设有一家公司 Mens Insamen。SurveyID 是 1。所以

```
Mens Insamen    1       q1     3
Mens Insamen    1       q2     1 
```

ETC...

现在我需要使用来自 sql 查询的数据填充公司对象列表。我已经尝试了一段时间，但无法真正想出任何东西。

如果（不出所料）不清楚（fokol（no）咖啡），我可以在某个时候改进它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:22:32.263

您可以简单地使用 arraylist 和您的 while 循环来实现这一点
为循环外的 compines 创建您的 arraylist 并使用循环
将每个 Company 对象添加到此数组列表中

```
ArrayList<Company> compList = new ArrayList<Company>();

while{

/*read  values to variables and create an object of Company 
  then add to arraylist as follows **/

Company comp = new Company (name, surveyor, surveyerTitle,surveyID,questions);    
compList.add(comp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:25:43.403

创建类 CompanyMapper 在其中有一个方法，将该方法传递给 SQL ResultSet 作为输入，循环通过它并创建公司列表并返回它。

```
class CompanyMapper{

public List<Company> getCompanies(ResultSet rs){

    ArrayList<Company> compList = new ArrayList<Company>();
    while(...rs has entry...){
        //Add new Company to the list
    }
return compList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:28:51.487

真的很难说，到目前为止你有什么问题，但如果你想填充你的自定义对象的列表，那么你需要做这样的事情：

```
public List<Company> getCompanies() throws SQLException
{
    List<Company> result = new ArrayList<Company>();

    Connection connection = DriverManager.getConnection(...);
    Statement statement = connection.createStatement();
    ResultSet set = statement.executeQuery("your query here");

    set.beforeFirst();
    while(set.next())
    {
        String textData = set.getString("columnname");
        int integerData = set.getInt("columnname");

        // you can also use set.getString(columnindex);

        Company company = new Company();
        company.set(...);

        result.add(company);
    }
    connection.close();
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:55:17.843

1-您应该使用创建与数据库的连接，

```
Class.forName(DB_LIBRARY);
connection = DriverManager.getConnection(CONNECTION_PARAMETRS); 
```

请注意，您需要将 DB_LIBRARY 替换为有效的驱动程序库，并将 CONNECTION_PARAMETERS 替换为您的数据库连接设置（例如，主机名、用户名、密码等）。

2-创建一个语句，并返回一个结果集

```
Statement statement = connection.createStatement();
ResultSet rs = statement.executeQuery(your_select_query); 
```

3-遍历结果集并获取数据

```
Company company;
while(rs.next()){
         company = new Company(rs.getString(1), 
         rs.getString(2), 
         rs.getString(3), 
         rs.getInt(4),
         new HashMap<Integer, Integer>().put(rs.getInt(5), rs.getInt(6)
} 
```

请注意，您可以使用列名称或它们的编号，如果您想获取多条记录，也可以使用 ArrayList，如下所示

```
ArrayList<Company> companies = new ArrayList<Company>();
while(rs.next()){
         companies.add(new Company(rs.getString(1), 
         rs.getString(2), 
         rs.getString(3), 
         rs.getInt(4),
         new HashMap<Integer, Integer>().put(rs.getInt(5), rs.getInt(6));
} 
```

# javascript - Infovis - graph.ready 的 Javascript 测试

> ID：12052631
> 
> 赞同：0
> 
> 时间：2012-08-21T10:09:43.477
> 
> 标签：javascript, canvas, infovis

您好，我正在使用 infovis 工具包绘制组织结构图，为了完成此操作，我需要在图形节点内绘制图形（我有这部分工作）

问题是在我的代码中的哪一点测试父图是否已准备好进行操作。我已经尝试过测试画布何时准备好，画布何时上线，以及我正在编写子图的 div 标签准备好但这些似乎都不起作用并报告

无法读取 null 的属性 offsetWidth

这是因为它无法读取尚不存在的元素的宽度，这是因为即使 dom 注册了它，画布还没有完成渲染它。

有没有人知道在 infovis 中测试一个准备好被操纵的图表？

谢谢

名言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:02:43.137

我想出了答案，没有确定的方法来测试画布是否准备就绪，

但是在 infovis 中创建树时，有两个函数 onBeforeCompute 和 onAfterCompute

onAfterCompute 在图表完成加载时触发，因此您可以在其中放置任何必要的代码，它会在图表完成渲染时运行。

希望这可以帮助 ！！

# bash - 为列的每个唯一值输出整行一次（Bash）

> ID：12052633
> 
> 赞同：10
> 
> 时间：2012-08-21T10:09:45.060
> 
> 标签：bash, shell, awk, uniq

这肯定是一项微不足道的任务`awk`，但今天早上让我摸不着头脑。我有一个类似于以下格式的文件：

```
pep> AEYTCVAETK     2   genes ADUm.1024,ADUm.5198,ADUm.750
pep> AIQLTGK        1   genes ADUm.1999,ADUm.3560
pep> AIQLTGK        8   genes ADUm.1999,ADUm.3560
pep> KHEPPTEVDIEGR  5   genes ADUm.367
pep> VSSILEDKTT     9   genes ADUm.1192,ADUm.2731
pep> AIQLTGK        10  genes ADUm.1999,ADUm.3560
pep> VSSILEDKILSR   3   genes ADUm.2146,ADUm.5750
pep> VSSILEDKILSR   2   genes ADUm.2146,ADUm.5750 
```

我想为第 2 列中肽的每个不同值打印一行，这意味着上述输入将变为：

```
pep> AEYTCVAETK     2   genes ADUm.1024,ADUm.5198,ADUm.750
pep> AIQLTGK        1   genes ADUm.1999,ADUm.3560
pep> KHEPPTEVDIEGR  5   genes ADUm.367
pep> VSSILEDKTT     9   genes ADUm.1192,ADUm.2731
pep> VSSILEDKILSR   3   genes ADUm.2146,ADUm.5750 
```

到目前为止，这是我尝试过的，但显然我不需要：

```
awk '{print $2}' file | sort | uniq
# Prints only the peptides...
awk '{print $0, "\t", $1}' file |sort | uniq -u -f 4
# Altogether omits peptides which are not unique... 
```

最后一件事，它需要将作为其他肽的子串的肽视为不同的值（例如 VSSILED 和 VSSILEDKILSR）。谢谢 ：）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T10:23:38.407

只需使用排序：

```
sort -k 2,2 -u file 
```

`-u`删除重复条目（如您所愿），并且仅`-k 2,2`将字段 2 设为排序字段（因此在检查重复项时忽略其余部分）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-21T10:22:23.430

一种使用方式`awk`：

```
awk '!array[$2]++' file.txt 
```

结果：

```
pep> AEYTCVAETK     2   genes ADUm.1024,ADUm.5198,ADUm.750
pep> AIQLTGK        1   genes ADUm.1999,ADUm.3560
pep> KHEPPTEVDIEGR  5   genes ADUm.367
pep> VSSILEDKTT     9   genes ADUm.1192,ADUm.2731
pep> VSSILEDKILSR   3   genes ADUm.2146,ADUm.5750 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:20:45.303

我会为此使用 Perl：

```
perl -nae 'print unless exists $seen{$F[1]}; undef $seen{$F[1]}' < input.txt 
```

`n`开关与输入逐行工作，开关`a`将行拆分为`@F`数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T10:35:40.083

```
awk '{if($2==temp){next;}else{print}temp=$2}' your_file 
```

测试如下：

```
> awk '{if($2==temp){next;}else{print}temp=$2}' temp
pep> AEYTCVAETK         2       genes ADUm.1024,ADUm.5198,ADUm.750
pep> AIQLTGK            1       genes ADUm.1999,ADUm.3560
pep> KHEPPTEVDIEGR      5       genes ADUm.367
pep> VSSILEDKTT         9       genes ADUm.1192,ADUm.2731
pep> AIQLTGK            10      genes ADUm.1999,ADUm.3560
pep> VSSILEDKILSR       3       genes ADUm.2146,ADUm.5750 
```

# c# - 阻止已经登录的用户登录

> ID：12052635
> 
> 赞同：1
> 
> 时间：2012-08-21T10:09:54.927
> 
> 标签：c#, asp.net, session, authentication

您好，所以我想检查数据库是否用户已经登录，然后如果他在这里登录停止登录是我的代码示例，请提供帮助。

```
protected void Login1_LoggingIn(object sender, LoginCancelEventArgs e)
    {
        String name = ((Login)LoginView1.FindControl("Login1")).UserName;
        SqlConnection source_db = new SqlConnection();
        source_db.ConnectionString = ConfigurationManager.ConnectionStrings["source"].ConnectionString;//konfiguracja polaczenia z web.cfg 
        SqlCommand sql_polecenie3 = new SqlCommand("select Status from  aspnet_Users where UserName='" + name + "';", source_db);
        try
        {
            source_db.Open();//otwiera polaczenie
            if ((int)sql_polecenie3.ExecuteScalar() == 1)
            {
                Label1.Visible = true;
            }
            else
            {
                Label1.Visible = false;
            }
            source_db.Close();//zamyka polaczenie
        }
        catch (Exception)
        {
            source_db.Close();//zamyka polaczenie
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:11:46.083

亚历克斯，我永远不会使用你的代码......你做错了几件事，最重要的是，任何人都可以从你刚刚展示的内容中删除你的整个数据库。

**首先要做的事情**...

*   您应该始终将数据库访问（数据库代码）放在不同的项目（通常是*库项目*- DLL）中 -[请参阅我对此的回答](https://stackoverflow.com/questions/7510396/business-layer-in-3-tier-architecture/7510526#7510526)。
*   您应该始终处置您的对象，在您的情况下，您可以安全地`using`在.`SqlConnection``SqlCommand`
*   您应该始终使用 sql 变量，并且永远不要直接从附加代码创建 SQL 查询，除非您确定您正在[清理您的输入](https://stackoverflow.com/questions/3380421/asp-net-a-practical-guide-to-the-sanitization-of-user-input)。

**关于您自己的答案**，如果您添加`e.Cancel = true;`这将告诉操作您已自定义响应并且您不希望对象继续进行自动响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:12:54.307

Login 控件为此提供了一个事件[Authenticate 。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.authenticate.aspx)
如果您想在此基础上进行一些自定义检查并拒绝登录，您应该使用身份验证事件。

```
<asp:Login id="Login1" runat="server"
                OnAuthenticate="OnAuthenticate">
            </asp:Login>

private void OnAuthenticate(object sender, AuthenticateEventArgs e)
{
    bool Authenticated = false;
    Authenticated = SiteSpecificAuthenticationMethod(Login1.UserName, Login1.Password);

    e.Authenticated = Authenticated;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:06:58.363

答案是添加 e.Cancel = true 或 false 取决于我们何时要取消登录。

# dojo - xhrPost 后发送的 Dojo 信息性消息

> ID：12052636
> 
> 赞同：2
> 
> 时间：2012-08-21T10:09:55.427
> 
> 标签：dojo, http-status-codes, server-response

假设通过 xhrPost 向服务器发送了一个请求，并且服务器发现该请求需要处理更多信息（例如缺少一个变量），因此，一个响应被发送回客户端，通知该请求可能尚未完全处理并且此消息显示在对话框中。

我正在从服务器发送一个 HTTP 202 状态代码，我认为这是不正确的，并在*加载*功能上处理它，该消息显示在对话框上。但是，如果我用一些 HTTP 错误代码（例如：400）进行响应，则错误将显示在控制台中（注意：在这种情况下，消息在*错误*函数中处理）以及我的对话框中。

最好和正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:59:40.970

请注意，它被称为负载处理程序，而不是成功处理程序。

负载处理程序用于有效的、格式良好的响应。这些可以包含由您的服务器端应用程序生成的大量状态代码，指示成功、失败或介于两者之间的情况。

错误就是，服务器在尝试处理请求时崩溃了，而您返回的任何内容都可能不是您编写的小部件所期望的。出于这个原因，我建议在整个应用程序中使用相同的错误处理程序。

dojo 文档指出：

> 有时 xhrGet 调用会失败。通常这些是 404 错误或服务器错误，例如 500。error 参数是另一个回调函数，仅在发生错误时调用。这使您可以控制发生错误时发生的情况，而无需在加载函数中放入大量逻辑来检查错误情况。传递给错误函数的第一个参数是一个 JavaScript 错误对象，指示失败的原因。[道场文档](https://dojotoolkit.org/reference-guide/1.8/dojo/xhrGet.html)

# json - 构面用空格标记标签。有解决办法吗？

> ID：12052637
> 
> 赞同：0
> 
> 时间：2012-08-21T10:09:56.707
> 
> 标签：json, lucene, full-text-search, elasticsearch, facets

我对带有空格的分面标记标签有一些问题。

我有以下映射：

```
    curl -XPOST "http://localhost:9200/pictures" -d '
    {
      “映射”：{
        “图片” ： {
                “特性” ： {
                    "id": { "type": "string" },
                    “描述”：{“类型”：“字符串”，“索引”：“未分析”}，
                    “特色”：{“类型”：“布尔”}，
                    “类别”：{“类型”：“字符串”，“索引”：“未分析”}，
                    “标签”：{“类型”：“字符串”，“索引”：“not_analyzed”，“分析器”：“关键字”}，
                    “created_at”：{“类型”：“双”}
                }
            }
        }
    }'

```

我的数据是：

```
    curl -X POST "http://localhost:9200/pictures/picture" -d '{
      “图片”： {
        "id": "4defe0ecf02a8724b8000047",
        "title": "Victoria Secret PhotoShoot",
        "description": "来自法国和意大利",
        “特色”：是的，
        “类别”：[
          “时尚”，
          “女孩们”，
        ],
        “标签”：[
          “女孩”，
          “照片拍摄”，
          “超模”，
          《维多利亚的秘密》
        ],
        “created_at”：1405784416.04672
      }
    }'

```

我的查询是：

```
    curl -X POST "http://localhost:9200/pictures/_search?pretty=true" -d '
    {
      “询问”： {
        “文本”： {
          “标签”：{
            “查询”：“维多利亚的秘密”
          }
        }
      },
      “方面”：{
        “标签”：{
          “条款”：{
            “字段”：“标签”
          }
        }
      }
    }'

```

输出结果是：

```
    {
      “采取”：1，
      “超时”：假，
      “_shards”：{
        “总数”：5，
        “成功”：5，
        “失败”：0
      },
      “命中”：{
        “总计”：0，
        “max_score”：空，
        “命中”：[]
      },
      “方面”：{
        “标签”：{
          “_type”：“条款”，
          “失踪”：0，
          “总计”：0，
          “其他”：0，
          “条款”：[]
        }
      }
    }

```

现在，我在方面得到了总 0 并且**总命中数为 0**
任何想法为什么它不起作用？
我知道当我从标签中删除**关键字分析器**并将其**设为“not_analyzed”**时，我会得到结果。
但是仍然存在区分大小写的问题。
如果我通过**删除****关键字分析器**运行相同的上述查询，那么我得到的结果是：

```
    方面：{
        标签： {
            _type：条款
            失踪：0
            总数：12
            其他：0
            条款：[
                {
                    词条：拍照
                    计数：1
                }
                {
                    词条：少女
                    计数：1
                }
                {
                    词条：维多利亚的秘密
                    计数：1
                }
                {
                    名词：超模
                    计数：1
                }         
            ]
        }

    }

```

这里**Victoria Secret在****"not_analyzed"**中区分大小写，但它在**count**中占用空间，但是当我用**小写**查询为 "victoria secret" 时，它不会给出任何结果。

**有什么建议么？？**

谢谢，
苏拉杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:19:11.767

第一个例子对我来说并不完全清楚。如果您使用[KeywordAnalyzer](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-analyzer.html)，则意味着该字段将按原样被索引，但是根本不分析该字段更有意义，这是相同的。您发布的映射包含

```
"index": "not_analyzed", "analyzer": "keyword" 
```

这没有多大意义。如果您不分析该领域，为什么要为其选择分析器？

除此之外，当然，如果您不分析该字段，该标签`Victoria Secret`将按原样被索引，因此查询`victoria secret`将不匹配。如果您希望它不区分大小写，则需要定义一个使用[KeyworkTokenizer的](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-tokenizer.html)[自定义分析器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/custom-analyzer.html)，因为您不想标记它和[LowercaseTokenFilter](http://www.elasticsearch.org/guide/reference/index-modules/analysis/lowercase-tokenfilter.html)。您可以通过索引设置分析部分定义自定义分析器，然后在映射中使用它。但是那样的话，刻面总是小写的，我猜这是你不喜欢的。这就是为什么最好定义一个[多字段](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)并使用两种不同的文本分析来索引该字段，一种用于构面，一种用于搜索。

您可以像这样创建索引：

```
curl -XPOST "http://localhost:9200/pictures" -d '{
    "settings" : {
        "analysis" : {
            "analyzer" : {
              "lowercase_analyzer" : {
                "type" : "custom",
                "tokenizer" : "keyword",
                "filter" : [ "lowercase"]
              }
            }
        }
    },
    "mappings" : {
        "pictures" : {
            "properties" : {
                "id": { "type": "string" },
                "description": {"type": "string", "index": "not_analyzed"},
                "featured": { "type": "boolean" },
                "categories": { "type": "string", "index": "not_analyzed" },
                "tags" : {
                    "type" : "multi_field",
                    "fields" : {
                        "tags": { "type": "string", "analyzer": "lowercase_analyzer" },
                        "facet": {"type": "string", "index": "not_analyzed"},
                    }
                },
                "created_at": { "type": "double" }
            }
        }
    }
}' 
```

然后，当您在该字段上搜索时，默认情况下自定义的 lowercase_analyzer 也将应用于文本查询，以便您可以搜索`Victoria Secret`或`victoria secret`获取结果。您需要更改构面部分并在新`tags.facet`字段上制作构面，不进行分析。

此外，您可能希望查看[匹配查询](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)，因为文本查询已被最新的 elasticsearch 版本 (0.19.9) 弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:57:49.827

我认为这对我的回答有些意义

[https://gist.github.com/2688072](https://gist.github.com/2688072)

# javascript - 如何从javascript设置html表单的属性

> ID：12052644
> 
> 赞同：1
> 
> 时间：2012-08-21T10:10:08.157
> 
> 标签：javascript, html, forms

我想将文本元素的属性从必需更改为不需要。我正在使用 javascript 来执行此操作。我正在根据单选按钮的输入调用一个函数，并且我正在使用 html 5..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:13:52.573

```
document.getElementById("adiv").removeAttribute("style")

document.getElementById("myimage").setAttribute("src","another.gif")

var getvalue=document.getElementById("myimage").getAttribute("src") 
```

现在但它在一个函数中并按照你的意愿使用它。

这就是您在 JavaScript 中设置和删除属性的方式。

来源：[http ://www.javascriptkit.com/dhtmltutors/domattribute.shtml](http://www.javascriptkit.com/dhtmltutors/domattribute.shtml)

# cocoa-touch - 如何在box2d中检测多个静态体

> ID：12052650
> 
> 赞同：1
> 
> 时间：2012-08-21T10:10:17.567
> 
> 标签：cocoa-touch, cocos2d-iphone, box2d-iphone

我有一些关于静态物体的多重检测的问题。

如何检测或区分多个静态物体？在我的游戏中，我使用平铺地图并在静态主体中创建 3 个对象。与玩家精灵碰撞时如何区分彼此？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:26:17.587

你可以通过2种方式做到这一点。

```
id obj1  = (id)bodyA->GetUserData();

if( ((CCSprite*)obj1).tag == kTagStaticBody1 ) //check ur sprite tag
{

} 
```

//OR: 用于识别类

```
id obj1  = (id)bodyA->GetUserData();

if([obj1 isKindOfClass:[MyActor class]])
{

} 
```

# vb.net - 无法在应用程序上添加身份验证并出现连接字符串错误

> ID：12052652
> 
> 赞同：0
> 
> 时间：2012-08-21T10:10:22.087
> 
> 标签：vb.net, asp.net-mvc-3, authentication

我正在尝试使用内置提供程序向我的应用程序添加身份验证，但是这样做会出错。我的 web.config 文件如下（将 db 等从连接字符串中取出，但一切正常）：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->

<configuration>

  <connectionStrings>
    <add name="LaundryDBContext"
         connectionString=".amazonaws.com,1433;
         Initial Catalog=Main;
         Persist Security Info=True;
         User ID=****;
         Password=****;
         MultipleActiveResultSets=True"
         providerName="System.Data.SqlClient"/>
  </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

尝试添加身份验证时出现以下错误：

```
The connection name 'ApplicationServices' was not found in the applications configuration or the connection string is empty. 
```

我希望将身份验证和应用程序设置存储在现有数据库中。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:14:10.323

提供程序条目的 connectionStringName 属性设置为“ApplicationServices”，这不是 web.config 中的命名连接字符串。您的连接字符串名为“LaundryDBContext”。

将 connnectionStringName 属性更改为“LaundryDBContext”，提供程序将使用该连接字符串与您的数据库通信。

您应该[阅读](http://www.shiningstar.net/ASPNet_Articles/SqlMembershipProvider.aspx)有关 [配置成员资格](http://weblogs.asp.net/sreejukg/archive/2011/06/16/usage-of-aspnet-regsql-exe-in-asp-net-4.aspx)[的众多演练](http://msdn.microsoft.com/en-us/library/6e9y4s5t%28v=vs.100%29)之一，以更详细地了解其工作原理。

简单来说...

1.  打开 Visual Studio 命令提示符并键入`aspnet_regsql`
2.  按照打开的对话框中的向导将 aspnet 成员模式添加到您的数据库。

# bdd - Specflow 测试在完成之前不会显示结果

> ID：12052653
> 
> 赞同：0
> 
> 时间：2012-08-21T10:10:22.680
> 
> 标签：bdd, watin, specflow

我正在运行大量的 specflow 测试，这些测试需要一段时间才能运行。我让这些在构建服务器上运行 - 我可以在它们运行时看到输出。

```
[10:59:13][Step 3/3] Results               Top Level Tests
[10:59:13][Step 3/3] -------               ---------------
[10:59:13][Step 3/3] Passed                Project.Web.Specflow.Specs.Account.ForgotPasswordsFeature.ExistingUserHasForgottenTheirPassword
[10:59:23][Step 3/3] Passed                Project.Web.Specflow.Specs.Account.ForgotPasswordsFeature.Non_ExistingUserHasForgottenTheirPassword
[10:59:32][Step 3/3] Failed                Project.Web.Specflow.Specs.Admin.AdminTabFeature.AdminUserLoggedIn
[10:59:45][Step 3/3] Failed 
```

等等

我所能看到的只是一个场景是通过还是失败。我想在这些测试失败时看到错误消息。这些错误消息仅在测试运行结束时显示。有没有办法在测试运行期间而不是在测试运行结束时显示报告？这样我就可以开始分析故障，而不必等待 30 分钟。

谢谢！

# iphone - UIButton 无 - IOS

> ID：12052655
> 
> 赞同：2
> 
> 时间：2012-08-21T10:10:30.030
> 
> 标签：iphone, ios, uibutton

我的 viewdidload 中有以下内容：

```
 //Start/Pause Button    
    UIButton *buttonStart = [UIButton buttonWithType: UIButtonTypeCustom];
    buttonStart.frame = CGRectMake(10,100,100,45);
    [buttonStart setBackgroundImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [buttonStart addTarget:self action:@selector(pausePlayButtonTouched) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview: buttonStart]; 
```

我的选择器方法：

```
 [self.buttonStart setBackgroundImage:[UIImage imageNamed:@"start.png"] forState:UIControlStateNormal];

    NSLog(@"%@", self.buttonStart); 
```

null 正在记录到控制台。不用说，按钮的图像没有改变。

我的想法有什么问题？

顺便说一句 buttonStart 正在合成并具有自己的属性（保留）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:12:16.180

您同时使用了一个`self.buttonStart`通过属性访问的实例变量和一个局部变量`buttonStart`。从您的实现文件中删除该按钮的声明并将第一行更改为：

```
self.buttonStart = [UIButton buttonWithType: UIButtonTypeCustom]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T10:15:38.223

buttonStart.Add 目标不需要这样的属性：

```
 [buttonStart addTarget:self action:@selector(pausePlayButtonTouched:) forControlEvents:UIControlEventTouchUpInside]; 
```

现在您选择的方法是：

```
-(void)pausePlayButtonTouched:(id)sender
{
   UIButton *btnPaused = sender;
   NSLog(@"%@", btnPaused);
   [btnPaused setBackgroundImage:[UIImage imageNamed:@"start.png"] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:12:33.730

您是否在任何地方分配 self.buttonStart ？你的意思是

```
 self.buttonStart = [UIButton buttonWithType: UIButtonTypeCustom]; 
```

代替

```
 UIButton *buttonStart = [UIButton buttonWithType: UIButtonTypeCustom]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:14:45.067

您应该从文件名中删除“.png”标签，即“pause”，而不是“pause.png”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T10:16:45.837

据我所见， buttonStart 的分配丢失了。

你设置了 self.buttonStart = buttonStart; ?

声明 UIButton *buttonStart = ... 将隐藏（在您的本地上下文中）由 @property (nonatomic, reatin) UIButton *buttonStart 创建的任何已创建成员；（如果您使用 LLVM 4.0+，您的属性声明将创建“UIButton *_buttonStart”作为成员）

# vba - 在文件名和行号中循环：将多个文件复制为一个

> ID：12052656
> 
> 赞同：0
> 
> 时间：2012-08-21T10:10:29.563
> 
> 标签：vba, excel

我有数百个 excel 文件，其中的某些部分要逐行复制并粘贴到另一个 excel 文件中（从文件 k 中提取的信息粘贴在 k 行中）。已找到一个程序来完成除循环部分之外的任务。在代码中，使用了文件名和行号，例如：

```
 WorkbookName = "file 1"
        ...
        .Range("C1")=... 
```

有人可以帮我吗？

我试过这个，它不起作用：

```
 k=0
      do while k<500
         WorkbookName = "file (1+k)"
         ...
         .Range("C(1+k)")=...
        ...
      Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:49:20.197

这样的事情应该让你走上正确的轨道。

```
Dim k As Long
Dim WorkbookName As String
Dim thisWbk As Workbook
Dim wbk As Workbook

Set thisWbk = ActiveWorkbook

For k = 0 To 500
    WorkbookName = "file " & CStr(1 + k)
    Set wbk = Workbooks.Open("C:\mydir\" & WorkbookName & ".xls")

    thisWbk.Sheets("Sheet1").Range("C" & CStr(1 + k)) _
        = wbk.Sheets("Sheet1").Range("A5")

    wbk.Close
Next k 
```

# javascript - JS 表单验证问题

> ID：12052660
> 
> 赞同：2
> 
> 时间：2012-08-21T10:10:36.613
> 
> 标签：javascript

我是 JS 新手！这是我的第一个程序。它验证文本字段不应为空。我尝试了一切，但似乎没有任何效果。

```
<script type="text/javascript">
    var data_age = document.getElementById("ages") ;

    function check() {
        if (data_age==null) {
            alert("no data") ;
            return false ;
        } else {
            return true ;
        }   
    }
</script>

<form name="frm" action="a.php" method="post" onsubmit="return check(this)">
<input type="text" name="age" id="ages">
<input type="submit" value="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:13:16.737

如果一个变量包含一个文本字段，它永远不会等于`null`它是一个文本字段的确切原因。（如果元素不存在，`getElementById`可以返回。）你想检查*它的值是否为空*。您可以使用它（获取值并将其与空字符串进行比较）。`null`*`data_age.value === ""`*

 *其次，`getElementById`在 HTML 中定义元素之前调用。您可以交换`<form>`和`<script>`元素，以便在您调用时该元素就在那里`getElementById`。另外，使用`var data_age = ...`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:18:39.760

试试这个

```
<script type="text/javascript">

    var isBlank = function (str) {
        return str == null || str.trim().length == 0;
    }

function check()
{

var data_age = document.getElementById("ages") ;
if (isBlank(data_age.value))
{
alert("no data") ;
return false ;
}
else
{
return true ;
}   
}
</script>

<form name="frm" action="a.php" method="post" onsubmit="return check(this)">
<input type="text" name="age" id="ages">
<input type="submit" value="submit">
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:20:03.753

您应该添加 var data_age = document.getElementById("ages") ; 内部函数。

```
 function check()
        {
            var data_age = document.getElementById("ages") ;
            if (data_age.value == "")
            {
            alert("no data") ;
            return false ;
            }  
        } 
```*

# c# - 如何在 C# 中打开多个表单？

> ID：12052670
> 
> 赞同：5
> 
> 时间：2012-08-21T10:11:12.733
> 
> 标签：c#, forms, datagrid

我有一个从数据库加载数据的 DataGridView。每行都有一个“查看”按钮，当我单击它时，会打开另一个带有特定信息的表单，但仍然打开带有 DataGridView 的主表单。我用这段代码做到这一点：

```
FormView fr = new FormView(id);
fr.ShowDialog(); 
```

问题是我不能同时打开几个FormView，因为焦点仍然在第一个打开的FormView上。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:18:03.477

当您在表单上使用 ShowDialog 时，它会显示并等待 DialogeResult 类型的响应，但是当您只需要显示表单并且不需要响应时，您可以简单地调用 form.Show()
这是代码：

当你想要一个结果时：

```
Form f = new Form(); 
DialogResult res = f.ShowDialog();  

//code stops here until you return something of type DialogResult  
if (res == System.Windows.Forms.DialogResult.OK)  
    I_Will_Run_Just_When_DialogReult_Returned_Is_OK(); 
```

当您只想显示表单时：

```
f.Show();  
I_Will_Run_Anyway_Right_After_Showing_Form(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T10:12:29.233

`ShowDialog`打开一个模态表单，这意味着该`ShowDialog`方法在用户关闭表单之前不会返回。

改用`fr.Show`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:50:22.197

你可以改变这个

```
fr.ShowDialog(); 
```

到

```
fr.Show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:13:13.227

你需要做：

```
FormView fr = new FormView(id);  
fr.Show(); 
```

以非模态方式显示它们，以便执行可以继续并允许您显示更多。

# javascript - Highcharts 上的时区

> ID：12052671
> 
> 赞同：11
> 
> 时间：2012-08-21T10:11:21.123
> 
> 标签：javascript, highcharts, timezone

据我了解，Highcharts 的默认值是 UTC。我已尝试按照这篇文章[Highcharts graph X-axis label for different date range](https://stackoverflow.com/questions/10994248/highcharts-graph-x-axis-label-for-diffrent-date-ranges)中的答案所建议的那样去做。如果我理解正确，这应该将时区设置为浏览器的时区。

我已经在 jsFiddle 上对此进行了测试，并且切换该`useUTC`选项似乎没有效果。

[http://jsfiddle.net/looneyp/me3ry/](http://jsfiddle.net/looneyp/me3ry/)

**问题**：我在上面做错了什么，你如何正确设置时区？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T11:47:45.237

这是那些日子之一

我在英国，所以 UTC true 或 false 给出了与我在 GMT 时相同的结果。我的预期显示时间之间的差异是由于 PHP 到 unixTime 的解析问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-21T20:39:21.460

Highcharts 现在支持 3.0.8 中的时区

您现在可以设置 timezoneOffset 全局属性： [http ://api.highcharts.com/highcharts#global.timezoneOffset](http://api.highcharts.com/highcharts#global.timezoneOffset)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T11:13:12.060

你所做的一切似乎都没有错。 [当在全局 Highcharts 选项中禁用 UTC 时，此 jsFiddle](http://jsfiddle.net/me3ry/3/)显示 x 轴的偏移。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-02T08:32:34.580

Highcharts 在最近的版本中移动了这个选项。

要记住的一件事是，您的班次似乎与您的当地时间与 UTC 的时间相反或为负数，因此，例如，如果您在 UTC+2 中，那么您`timezoneOffset`将是`-2 * 60`，这并不完全直观：

```
Highcharts.setOptions({
    time: {
        timezoneOffset: -2 * 60
   }
}); 
```

API 文档：[https ://api.highcharts.com/highcharts/time.getTimezoneOffset](https://api.highcharts.com/highcharts/time.getTimezoneOffset)

这是一个例子：http: [//jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/time/timezoneoffset/](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/time/timezoneoffset/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-19T15:36:30.540

将此代码添加到 document.ready 中，如果您输入的是 UTC 时间，您应该会在当地时区获得 highcharts

```
$(document).ready(function () {

  Highcharts.setOptions({
      global: {
          /**
           * Use moment-timezone.js to return the timezone offset for individual
           * timestamps, used in the X axis labels and the tooltip header.
           */
          getTimezoneOffset: function (timestamp) {
              d = new Date();
              timezoneOffset =  d.getTimezoneOffset()

              return timezoneOffset;
          }
      }
  });

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-01T18:17:03.267

通过 getfunction 使用时区示例：使用 getTimezoneOffset

```
var x = new Date();
var currentTimeZoneOffsetInHours = x.getTimezoneOffset() / 60; 
```

# c# - 多个上下文实例化的 EntityFramework 事务

> ID：12052672
> 
> 赞同：3
> 
> 时间：2012-08-21T10:11:26.830
> 
> 标签：c#, entity-framework-4, transactions, oracle11g

我试图了解如何使交易与我的项目一起工作。我将 EntityFramework 4 与 Oracle 11g 数据库一起使用。

在这里他的交易，我有很多操作要做，并且我想在抛出意外异常时回滚。我有多个具有简单操作的类，每个类都创建自己的上下文并进行一些更改，例如：

```
public class OneDaoFactory
{
    public int AddTreatment(Dto dto)
    {
        using (Context bdd = new Context())
        {
            //Make some changes in database
            bdd.SaveChanges();
        }
    }
} 
```

现在我有业务将调用工厂的方法：

```
public void Business()
{
    try
    {
        OneDaoFactory.AddTreatment(dto);
        SecondDaoFactory.Add(dto2);
        throw new Exception("make a rollback");
    }
    catch(Exception ex)
    {
        //rollback
    }
} 
```

有没有办法在业务中创建一个事务来管理工厂创建的所有上下文？除了在业务中创建一个上下文并将其传递给所有 DaoFactories 之外？

我发现了关于`TransactionScope`的东西，但据我所见，它是针对 SqlServer 的。我试图手动打开一个连接和一个事务，但上下文似乎重新打开了它们自己的，所以我的回滚什么也没做。

**编辑**

如果可能的话，我不想在业务中包含对 EF 的引用。就像使用另一个工厂打开和关闭事务一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:32:51.843

您可以通过打开自己的连接来做到这一点`EntityConnection`，然后打开一个事务并将连接传递给对象上下文：

```
public class OneDaoFactory
{
    private EntityConnection conn; // initialize from outside

    //...

    public int AddTreatment(Dto dto)
    {
        using (Context bdd = new Context(conn))
        {
            //Make some changes in database
            bdd.SaveChanges();
        }
    }
}

public void Business()
{
    EntityConnection conn = new EntityConnection(ConnectionString);
    OneDaoFactory.SetConnection( conn );
    SecondDaoFactory.SetConnection( conn );

    using( var ts = new TransactionScope())
    {
        OneDaoFactory.AddTreatment(dto);
        SecondDaoFactory.Add(dto2);
        throw new Exception("make a rollback);

        ts.Complete();
    }
} 
```

希望这可以帮助。

# c# - webbrowser 组件的问题

> ID：12052673
> 
> 赞同：1
> 
> 时间：2012-08-21T10:11:27.547
> 
> 标签：c#, browser, web-crawler

我有一个程序（使用 VS 2010 的 C#），它使用`WebBrowser`组件执行类似浏览器的活动。

该程序的目的是抓取网页。第一个问题是大约之后。50 页我收到一个 JavaScript 错误（内存不足（见图））

![脚本错误](../Images/6e4a9e21cee6f6b8257f37e0c80f0747.png)

要忽略此错误，我使用以下命令：

```
ScriptErrorsSuppressed = true 
```

上面的命令解决了脚本错误，但产生了另一个问题：

我也使用`Links.InvokeMember("click");`为了滚动页面，或者点击 Ajax 链接。

因此程序出现错误并`ScriptErrorsSuppressed`禁用它，但随后`invoke`停止单击页面......并且爬行停止。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:16:18.823

问题是您受下载并在浏览器控件中运行的客户端代码的支配。如果这不正确，那么您会遇到泄漏和这些内存问题。

我唯一能想到的就是尝试在几页之后的某个时间处理您的浏览器控件并重新创建它，看看这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T21:18:35.603

If you want to crawl webpages, you really shouldn't be using the webbrowser control. Use the httpWebRequest class and make your request, get the html string, and you can loop through the links and DOM objects of the HTML string using MSHTML, so you give it to mshtml and it will turn that HTML string into a nice object you can loop through (so you don't need to try and parse the links out using string manipulation, you just loop through everything as they are all turned into objects thanks to mshtml).

Of course, this way, all that javascript and what have you will not run, and you won't have to waste bandwidth and time loading all those images and having all those elements drawn to the screen when they are not needed.

Get me? Let me know if you need more help.

# vb.net - 动态 Linq 查询 - 如何构建 select 子句？

> ID：12052675
> 
> 赞同：5
> 
> 时间：2012-08-21T10:11:35.463
> 
> 标签：vb.net, linq, dynamic, vb.net-2010

我目前正在尝试使用 Dynamic Linq 进行一些测试，但是作为新手，我遇到了麻烦。

目前，我有一个 DataTable 对象，我已通过对数据库的 SQL 查询填充该对象。现在我想在这个 DataTable 上执行动态 linq 查询。这可能看起来不合逻辑，但我的最终目标是能够对由两个不同数据库填充的两个不同 DataTable 执行连接，因此考虑到这一点，我希望它更有意义。在继续解决该主要问题之前，我试图了解一个更简单的情况并对其进行一些试验。

问题一是我不完全确定 IQueryable(Of T) 和 IEnumerable(Of T) 之间的选择。我的理解是，如果你在内存中做所有事情，你会选择 IEnumerable。我会认为这适合我的情况，对吧？但是，当我查看更改 IQuerbyable 中的 IEnumerable（在下面的代码片段中）时，我惊讶地发现“x.Item(Fieldname)”不起作用！？我错过了什么？它给出的错误是：“后期绑定操作无法转换为表达式树”。

无论如何，让我们来看看。我已经得到了它的一部分工作：

```
 Dim desc As String = "Description"
    Dim status As String = "Status"

    Dim query As IEnumerable(Of DataRow) = From x In tab.AsEnumerable()
    query = query.Where(Function(x As Object) x.Item(status) < 100)

    For Each row As DataRow In query.ToList()
    'Do something
    Next row 
```

这似乎工作正常。我使用了两个字符串变量，因为最后我想动态决定取哪个字段。所以，“x！描述”不是我要走的路。但是，现在我想在查询中添加一个投影，即选择多个列。我的期望是它应该像这样工作：

```
query = query.Select(Of String)(Function(x As Object) x.Item(desc)) 
```

（注意：我使用 Select(Of String)，因为这个特定的列有它作为类型。这当然应该最终也被动态填充）

但是，这在运行时因 InvalidCastException 失败：“无法转换类型为 'WhereSelectEnumerableIterator `2[System.Data.DataRow,System.String]' to type 'System.Collections.Generic.IEnumerable`1[System.Data.DataRow]' 的对象。” 我真的不明白这里发生了什么；我猜有些地方出了问题，因为我想返回 DataRow，但目前只选择一个字段，恰好是一个字符串。谁能解释/帮助我？

提前致谢！

好的，编辑，因为我可能应该从头开始提供更多信息：我可以有可变数量的 where 或 select 子句。我的想法是我可以通过循环遍历包含此信息的列表来动态添加这些信息。所以我想我有点需要 IEnumerable 提供的 .Where() 和 .Select() 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:59:23.647

您声明为以下行`query`中的类型：`IEnumerable(Of DataRow)`

```
Dim query As IEnumerable(Of DataRow) = From x In tab.AsEnumerable() 
```

现在，你想`IEnumerable(Of String)`用你的创建一个`Select`，这很好。

但是您尝试将类型为 的结果分配给类型`IEnumerable(Of String)`为`query`的`IEnumerable(Of DataRow)`。

```
query = query.Select(Of String)(Function(x As Object) x.Item(desc)) 
```

并且由于`IEnumerable(Of String)`不能强制转换为`IEnumerable(Of DataRow)`，反之亦然，你会得到一个`InvalidCastException`.

* * *

另外，我不知道你为什么`Function(x As Object)`在你的`Where`and`Select`中使用，更好地使用`Function(row As DataRow)`，因为你已经知道你正在使用`DataRow`.

此外，您的代码可以这样重写：

```
Dim desc As String = "Description"
Dim status As String = "Status"

Dim columnToUse = status

Dim query = From x In tab.AsEnumerable()
            Where x.Item(status) < 100
            Select x(columnToUse)

For Each item as String In query.ToList()
    'Do something
Next 
```

更改`columnToUse`将使您能够动态选择所需的字段。

要选择多个字段，您需要返回一组 Dictionary、ExpandoObjects 或 Tuples 或类似的东西。

例子：

```
Dim columnToUse = new String() {desc, status} ' select columns dynamically

Dim query = tab.AsEnumerable().Where(Function(row) row.Item(status) < 100)

' Selecting dynamically
Dim result1 = query.Select(function(row) columnToUse.ToDictionary(function(c) c, function(c) row(c)))
Dim result2 = query.Select(Function(row)
                                Dim exp As IDictionary(Of String, Object) = new ExpandoObject()
                                For Each column in columnToUse
                                    exp(column) = row(column)
                                Next
                                return exp
                            End Function) 
```

# php - MySQL动态表名关系

> ID：12052676
> 
> 赞同：1
> 
> 时间：2012-08-21T10:11:35.697
> 
> 标签：php, mysql, relationship, relation

我有 3 个 MySQL 表：汽车、用户和访客。

餐桌车可以与餐桌用户或餐桌访客相关。表用户和访问者具有不同的表结构。我想加入所有这些表并检索人员数据。目前我正在使用 PHP 来检索人员数据。

这是创建此类关系的最佳表结构吗？有没有办法使用单个 MySQL 查询来检索人员信息？

```
[汽车]
编号 | 车名 | 个人类型 | person_id
--------------+-------------+--------
1 | 车1 | 用户 | 1
2 | 车2 | 访客 | 1

 [用户]
编号 | 姓名
---+------------
1 | 人 1

 [访客]
编号 | 名字 | 姓
---+------------+----------
1 | 人 | 2

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:15:24.493

您可以像这样使用外部联接：

```
select
    a.ID,
    a.car_name,
    a.person_type,
    b.name as username,
    c.name as visotorName
from
    cars a
        left outer join users b
            on a.person_id=b.ID
        left outer join visitors c
            on a.person_id=c.ID 
```

我在一个非常相似的问题上写了一个相当[详细的答案](https://stackoverflow.com/questions/11806556/mysql-query-joining-three-tables/11806579#11806579)，你可能也想快速阅读一下。它显示了一些其他函数，您可以使用这些函数根据返回的行数以您想要的方式很好地格式化数据 - 以及每行返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:21:23.193

有几个选项可用。一个在帖子中提到。选择将是这样的：

```
select * from
   cars a
   left join users u on (a.person_type='user' and a.person_id=u.id)
   left join visitors v on (a.person_type='visitor' and a.person_id=v.id) 
```

另一种选择是代替`person_type`and`person_id`简单地同时拥有`user_id`and `visitor_id`。两者都是可空的，您甚至可以在它们上放置一个强大的外键。选择非常相似：

```
select * from
   cars a
   left join users u on (a.user_id=u.id)
   left join visitors v on (a.visitor_id=v.id) 
```

最后但同样重要的是，也许您可​​以将`users`and`visitors`表合并到一个表中？

```
[cars]
  ID | car_name |  person_id
-----+----------+-------------
   1 | car 1    | 1
   2 | car 2    | 2

[persons]
  ID | type    | name
-----+---------+----------
   1 | user    | person 1
   2 | visitor | person 2 
```

然后选择变得超级简单：

```
select * from cars c join persons p on (c.person_id=p.id) 
```

# mysql - mysql see what users have the select privileges for a table

> ID：12052680
> 
> 赞同：2
> 
> 时间：2012-08-21T10:11:41.720
> 
> 标签：mysql, sql, select

I'd like to write a query to select all the mysql users that can select data from a given table in a database. I need to see who can access so a decision can be made higher up as to who can still select data from over there and who shouldn't.
Is there any way to do that? I tried

> show grants

and selecting from mysql.db but I don't understand it only seems to specify database level privileges and I need to see all the users that can access a certain table.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:26:13.993

```
SELECT grantee
FROM information_schema.TABLE_PRIVILEGES
WHERE table_name = 'mytable' 
```

这个查询对我有用

# ios - 如何识别应用程序的用户？

> ID：12052684
> 
> 赞同：0
> 
> 时间：2012-08-21T10:11:48.627
> 
> 标签：ios, cocoa-touch, authentication

在我的 iPhone 应用程序中，服务器需要识别应用程序用户。在 Web 应用程序中，服务器可以通过 cookie 识别用户。我应该如何处理应用程序？cookie 会过期，所以我认为它在这里不起作用。如果用户可以在应用程序中存储用户名和密码，她就不需要每次都输入密码。我需要每次都传输用户名和密码以通过 https 获取数据吗？我认为开销真的很高。有替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:33:23.257

您可以根据请求将 UUID 发送到服务器。在早期版本中，我们可以使用 UDID，但它在 iOS 5 中已被弃用，因此我们更喜欢 UUID。

```
// return a new autoreleased UUID string
- (NSString *)generateUUIDString
{
  // create a new UUID which you own
  CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);

  // create a new CFStringRef (toll-free bridged to NSString)
  // that you own
  NSString *uuidString = (NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuid);

  // transfer ownership of the string
  // to the autorelease pool
  [uuidString autorelease];

  // release the UUID
  CFRelease(uuid);

  return uuidString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:41:47.207

另一种选择可能是使用用户的 MAC 地址。在 github 上查看此[代码：](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5/blob/master/Classes/UIDevice+IdentifierAddition.m)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:51:31.483

参考另一个问题：

[如何让 Rails 告诉移动应用程序用户是否登录？](https://stackoverflow.com/questions/13243496/how-to-let-rails-tell-mobile-applications-that-users-signed-in-or-not)

在移动应用程序中使用“令牌身份验证”是一种惯例。

# java - How to obtain a name of a current folder?

> ID：12052687
> 
> 赞同：0
> 
> 时间：2012-08-21T10:11:56.550
> 
> 标签：java

The thing is that `System.getProperty("user.dir");` obtains a path *without* a current folder. So if class is stored in `C:\Users\Nika\workspace\sint\src` the output is `C:\Users\Nika\workspace\sint`. What should I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:14:07.707

如果您想要当前的工作目录，我认为这将对您有所帮助：

[在 Java 中获取当前工作目录](https://stackoverflow.com/questions/4871051/getting-the-current-working-directory-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:14:39.483

a 的源目录`.java`不存储在任何地方。您可以`.class`通过获取保护域来获取文件所在位置的基础目录，但这通常不是必需的。

也许您正在尝试做的是使用类路径获取文件。在这种情况下，我建议使用`ClassLoader.getResourceAsInputStream()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:15:11.197

因为类加载器有它的当前路径。如果 yoy 创建 jar，则 src 路径将无效。因此，如果类不在存档中，则附加包名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:30:46.527

为什么不使用[getResource](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#findResource%28java.lang.String%29)

```
URL url = Test.class.getClassLoader().getResource(Test.class.getName().concat(".class"));
System.out.println(url.getPath()); 
```

# java - Servlet 3.0 AsyncContext 在超时时返回响应

> ID：12052695
> 
> 赞同：3
> 
> 时间：2012-08-21T10:12:27.253
> 
> 标签：java, servlet-3.0

我按照[本](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html?page=3)教程实现了一个简单的聊天应用程序。我正在最新的 Mozilla Firefox 和 Google Chrome 浏览器中对其进行测试。

我主要担心的是消息交换似乎不是实时发生的。即使所有服务器处理都发生在请求后不到一秒的时间内，浏览器`AsyncContext`也会在超过超时后立即获得响应。

甚至是默认的 10 秒或通过`AsyncContext.setTimeout()`响应时间添加的自定义值与超时相同。这应该是预期的行为吗？有没有办法强制服务器在准备好后立即发送响应而不等待空洞超时间隔？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:22:40.720

您可能忘记`complete`了异步上下文。Java 6 文档：[http](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html#complete) ://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html#complete ()

```
watcherExecutor.execute(new Runnable(){
                        public void run() {
                           // publish a new bid event to a watcher
                           aCtx.getResponse().getWriter().print("A new bid on the item was placed. The current price ..., next bid price is ...");
                           aCtx.complete();
                        };
                     }); 
```

# vb.net - 如何使用 Outlook Redemption 绕过安全补丁来保存 Outlook 项目

> ID：12052701
> 
> 赞同：1
> 
> 时间：2012-08-21T10:12:40.620
> 
> 标签：vb.net, outlook, vb.net-2010, outlook-redemption

我目前正在开发一个可以从 PST 文件中提取项目并将其保存到指定位置的应用程序。现在我正在使用提供的 Microsoft.Office.Outlook.Interop 来执行此操作。

这是我用来保存联系人项目的一些代码。我使用的所有项目的代码都是相似的。

```
Dim objitem As Object
If TypeOf objItem Is Outlook.ContactItem Then
            'Get out contacts
            ContactItem = CType(objItem, Outlook.ContactItem)
            strSaveName = (ContactItem.FullName.ToString) & ".vcf"
            ContactItem.SaveAs(strFolderPath & "\" & (strSaveName), Outlook.OlSaveAsType.olVCard)
        End If 
```

但是，当我尝试使用 SaveAs() 方法保存项目时，会弹出安全提示，要求我允许应用程序在一段时间内使用 Outlook。（1,5,10 分钟）如果我没记错的话。我了解 Outlook 兑换可以绕过这一点。我该怎么做？

问候，

阿迪布

# mysql - postgresql 中的 DATE_FORMAT

> ID：12052705
> 
> 赞同：16
> 
> 时间：2012-08-21T10:13:04.257
> 
> 标签：mysql, database, postgresql, postgresql-9.1, postgresql-9.0

我在 postgresql 中工作，我需要在查询本身中转换日期格式，在 mysql 中有一个名为的选项`DATE_FORMAT`，我可以使用这样的查询：

```
Select DATE_FORMAT(date_time, '%b %e, %Y, %T') from table_name 
```

postgresql 中是否有任何选项？如果有请告诉我？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-21T11:29:14.860

如果我修改你的

```
Select DATE_FORMAT(date_time, '%b %e, %Y, %T') from table_name 
```

到

```
Select DATE_FORMAT(now(), '%b %e, %Y, %T') 
```

它会回来`Aug 21, 2012, 16:51:30`的。

你可以在 Postgresql 中做同样的事情：

```
Select to_char(now(), 'Mon-dd-YYYY,HH24:MM:SS') 
```

会还给你`Aug-21-2012,16:08:08`

希望你的问题得到解决。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-21T10:20:26.757

使用 to_char()：

[http://www.postgresql.org/docs/current/static/functions-formatting.html](http://www.postgresql.org/docs/current/static/functions-formatting.html)

我不知道`'%b %e, %Y, %T'`作为输出产生了什么（并且您没有提供示例输出），因此我无法为您提供 Postgres 的等效格式掩码。

下面产生一个 ANSI 日期：

```
select to_char(date_time, 'yyyy-mm-dd hh24:mi:ss')
from table_name; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-21T10:19:53.900

试试这个

```
SELECT to_char(date_time, 'dd.mm.YYYY') from table_name 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T10:21:32.863

`to_char`，例如：

```
to_char(creation_date, 'FMDD.MM.YYYY, HH24:MI:SS') AS creation_date_f 
```

# javascript - CakePHP 错误：在非对象上调用成员函数 get()，使用 cake javascript 帮助程序时出错

> ID：12052709
> 
> 赞同：0
> 
> 时间：2012-08-21T10:13:14.090
> 
> 标签：javascript, cakephp

尝试在 cakePHP 中使用 javascript 帮助程序时出现致命错误。我正在关注此[文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html)，我已将 jquery 添加到我的默认布局中：

```
<?php 
     <head>
     echo $this->Html->script('jquery');
     ....
     </head>

     <body>
     .....
     echo $this->Js->writeBuffer(); // Write cached scripts
     </body>
?> 
```

我还将助手添加到控制器中的助手数组中：

```
<?php
     public $helpers = array('Js' => array('Jquery'), 'Html', 'Form'); 
```

当我只用这些设置打开页面时它很好并且可以工作，但是如果我将这些代码行添加到这个函数然后刷新页面：

```
 public function index()
 {
   ....
   $this->Js->get('#draggable');
   $this->Js->draggable();
 } 
```

Cake 产生错误 Error: Call to a member function get() on a non-object。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:08:42.423

Helpers 是用来在视图中使用的，而不是在控制器中，因此是错误的。将代码从您的`index()`方法移动到`index`视图，错误应该会消失。

# iphone - 如何在 iOS 版 Google Places API 中查找当前用户位置

> ID：12052710
> 
> 赞同：1
> 
> 时间：2012-08-21T10:13:14.710
> 
> 标签：iphone, objective-c, ios, google-maps, core-location

我正在寻找使用此 Google Places API 网址在 iOS 应用程序中进行搜索。而不是使用指定的位置，我想使用用户的当前位置：

```
NSURL *googlePlacesURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=spa&sensor=false&key=AIzaSyAgcp4KtiTYifDSkIqd4-1IPBHCsU0r2_I"]; 
```

是否需要存储用户当前位置 lat/lon，然后将这些值放在 NSURL 中？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:44:31.853

您的 URl 显示您想列出当前位置附近的地点。

为此，您需要当前位置坐标、半径、搜索到的地名和​​关键字。

做这个：

第 1 步：添加 CoreLocation 框架

第 2 步：#导入

第 3 步：添加 CLLocationManagerDelegate 委托

第四步：制作 CLLocationManager *locationManager;

第 5 步：初始化 CLLocationManager（通常在 ViewDidLoad 中）

```
self.locationManager = [[CLLocationManager alloc] init];// autorelease];
// This is the most important property to set for the manager. It ultimately determines how the manager will
// attempt to acquire location and thus, the amount of power that will be consumed.
locationManager.desiredAccuracy = kCLLocationAccuracyBest ;
// Once configured, the location manager must be "started".
[locationManager startUpdatingLocation];   
locationManager.delegate = self; 
```

第 6 步：为 CLLocationManager 编写代码

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{ 
    StrCurrentLongitude=[NSString stringWithFormat: @"%f", newLocation.coordinate.longitude]; // string value
    StrCurrentLatitude=[NSString stringWithFormat: @"%f", newLocation.coordinate.latitude];
    appDeleg.newlocation=newLocation;
    [locationManager stopUpdatingLocation]; // string Value
} 
```

第 7 步：使用坐标和开火请求：

```
[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/xml?location=%@,%@&radius=%@&name=%@&sensor=false&key=YOU-API-KEY",StrCurrentLatitude,StrCurrentLongitude,appDeleg.strRadius,strSelectedCategory] 
```

请享用

# iphone - 在iOS中的tableView中向上滚动（当单元格消失时）时的Exc_bad_access

> ID：12052730
> 
> 赞同：1
> 
> 时间：2012-08-21T10:14:19.200
> 
> 标签：iphone, ios, ios5, uitableview, exc-bad-access

我正在使用启用了 ARC 和情节提要的 Xcode 4.4.1（以防这会有所不同）

我有一个带有表格视图的 UITableViewController（表格视图使用“字幕”单元格）

我正在使用 NSArray 来填充我的表格：

```
@property (strong, nonatomic) NSArray *myData; 
```

我在 viewDidLoad 中获取此表中的数据

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.myData = [self.myCalendarModel GetWeightHistory] ;
} 
```

然后我有： numberOfSectionsInTableView 和 numberOfRowsInSection

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.myData count];
} 
```

最后是我的 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"WeighDataCell";
    UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    WeightHistory *myDataForCell = [self.myData objectAtIndex:indexPath.row];

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd.MM.YYYY"];
    NSString *dateString = [dateFormat stringFromDate:myDataForCell.weightDate];

    cell.textLabel.text = dateString;
    cell.detailTextLabel.text = [myDataForCell.weight description];

    return cell;
} 
```

我可以毫无问题地展示我的桌子。我有空间显示 6 个单元格，我的 NSArray 有 6 条记录。当我在我的桌子上向下滚动时，我没有任何问题。

当我向上滚动时，如果没有单元格离开视图，我没有问题。当我松开手指时，只要一个单元格不在视野范围内，就会出现 Exc_bad_access 错误。

当使用 NSZombieEnable 进行调试时，我可以看到：

```
[CalendarHistoryTableViewController tableView:cellForRowAtIndexPath:]: message sent to deallocated instance 0x6eaf6f0 
```

所以我想我的手机被释放了，这就是我遇到这个问题的原因。但我不知道何时以及如何防止这种情况。

感谢您的任何帮助，您可以提供 ！埃里克

**@FaddishWorm**是的，标识符已设置，如果单元格不为零，则表示已分配。但这部分似乎正在工作，因为我可以将我的数据放到屏幕上。

**@Pandey_Laxman**感谢您的评论。这几乎是我在这个类中唯一的代码。要检查问题是否与我的 WeightHistory 对象无关，我已从代码中删除了这部分，但我仍然遇到相同的错误

这就是我的新 cellForRowAtIndexPath 的样子：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"WeighDataCell";
    UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.textLabel.text = @"test";
    cell.detailTextLabel.text = @"test2";
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:53:21.923

我想到了。

My`TableViewController`被另一个 segue 显示在屏幕上，`ViewController`并且我没有将当前`TableViewController`指针存储在“强”属性中。

因此，当 iOS 尝试调用`cellForRowAtIndexPath`我`TableViewController`时它无法调用，因为它已经发布了。

谢谢你们的帮助。

问候， 埃里克

# captcha - 在 modx 之外设置的会话值在片段中不可访问

> ID：12052734
> 
> 赞同：1
> 
> 时间：2012-08-21T10:14:43.730
> 
> 标签：captcha, modx, modx-revolution

我正在尝试在我已经构建并运行的 MODx 站点中使用验证码图像。我能够看到验证码图像，但不幸的是验证码脚本无法设置可以在 modx 片段中访问的会话值，因此我无法将其与输入的值匹配。创建图像的脚本位于 modx/assets/captcha/captcha.php。我花了将近 3 天的时间来解决这个问题。我尝试了不同的方法来使其工作。但没有任何效果。有什么解决办法吗？？有人来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:39:10.017

把它放在你的脚本中，如下所示：

```
//Start the session so we can store what the security code actually is
session_start();
//Set the session to store the security code
$_SESSION["security_code"] = $security_code; 
```

并在检查的片段中：

```
//Continue the session
session_start();
//Check if the security code and the session value are not blank 
//and if the input text matches the stored text
if ((!empty($_REQUEST["txtCaptcha"]) && !empty($_SESSION["security_code"]))
     && ($_REQUEST["txtCaptcha"] == $_SESSION["security_code"]) ) {
  echo "<h1>Test successful!</h1>";
} else {
  echo "<h1>Test failed! Try again!</h1>";
} 
```

但是，如果您使用 Modx Revolution 更合适的解决方案是使用组件 FormIt ( [http://rtfm.modx.com/display/ADDON/FormIt.Examples.Simple+Contact+Page](http://rtfm.modx.com/display/ADDON/FormIt.Examples.Simple+Contact+Page) )，带有“Recaptcha”或“Blank”无垃圾邮件字段”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:56:56.233

Formit 有一个验证码 prehook - 你能把那个片段拆开看看他们是怎么做的吗？事实上，为什么不直接使用它而不是自己滚动，它可能会减少相当多的工作。

# java - 为什么日期转换不正确？

> ID：12052751
> 
> 赞同：0
> 
> 时间：2012-08-21T10:15:34.117
> 
> 标签：java, date, formatting

我正在尝试将 String 日期转换为 Date 对象，如下所示：

```
 DateFormat formatter ; 
  Date date ; 
  formatter = new SimpleDateFormat("dd/mm/yyyy");
  date = (Date)formatter.parse(str_date); 
```

[来源](http://www.roseindia.net/java/java-conversion/StringToDate.shtml)

但是由于某种原因，月份总是被转换为一月。

示例输入日期：18/08/2012 输出日期：2012 年 1 月 18 日星期三 00:08:00 CET

请问有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T10:16:35.703

它应该是`"dd/MM/yyyy"`（大写`M`）。小写`m`是分钟。

看看[`SimpleDateFormat`docs](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中的表格。

# c# - 检查变量是否为空时出错

> ID：12052754
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:15:49.843
> 
> 标签：c#

我有以下代码：

```
var topicValue = Model.Topic;
var replaceResult = string.Empty;
if (topicValue != null & topic.Contains(topicValue)) {

} 
```

我的意图是如果 topicValue 为空则不执行 if。但是我收到一条错误消息：

> 你调用的对象是空的。

谁能解释我如何才能完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:17:03.463

使用`&&`而不是`&`. 无论第一部分的结果如何，逻辑 AND 运算符都会导致条件的两个部分都被*执行*。*如果第一部分的结果是*`&`，则使用*条件 AND*运算符`&&`只会执行第二部分。*`true`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T10:17:15.397

```
var topicValue = Model.Topic;
var replaceResult = string.Empty;
if (topicValue != null & topic.Contains(topicValue)) {

} 
```

应该

```
var topicValue = Model.Topic;
var replaceResult = string.Empty;
if (topicValue != null && topic.Contains(topicValue)) {

} 
```

编辑：

另外，你在哪里初始化主题？也许你也应该检查一下，它应该是

```
var topicValue = Model.Topic;
    var replaceResult = string.Empty;
    if (topicValue != null && topic != null && topic.Contains(topicValue)) {

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:17:05.100

很可能，您`topic`自己为空，这就是异常/错误的原因。

也进行检查`topic!=null`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T10:17:31.077

您正在使用二元运算符`&`而不是逻辑一`&&`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T10:17:38.907

您必须使用 && 运算符作为逻辑 AND

```
if (topicValue != null **&&** topic.Contains(topicValue)) {

} 
```*

# installation - 多平台产品安装程序中的流利迁移

> ID：12052757
> 
> 赞同：1
> 
> 时间：2012-08-21T10:16:05.143
> 
> 标签：installation, wix, database-migration, fluent-migrator

我们为外部付费客户开发产品（即我们不是只为我们控制范围内的环境生产产品的内部 IT 职能部门），我们目前必须同时支持 SQL Server 2005+ 和 Oracle 10.2+ 作为后端。我们将 TeamCity 与 Wix 一起用于 CI 和构建，这些构建将发送给我们的测试团队，显然，当测试结束时，最终会发送给我们的客户。目前我们有无数的 SQL 脚本来升级数据库。在最基本的形式中，可能有一个 DDL 脚本和一个数据脚本（每个版本、每个平台），但也可能有包含存储过程的脚本，甚至是客户端特定的脚本。根据客户端升级的版本数量（例如 2.0 到 2.7），他们可能必须以正确的顺序运行多达两打脚本。

显然，人为错误的范围很大，并且目前无法降级，并且由于脚本的自动版本编号存在缺陷（以及数据库记录已运行的脚本的相当笨拙的方式），它不是总是清楚在数据库上运行了什么。显然，这不是一个很好的情况。

我正在研究使用 Fluent Migrator 或类似的东西——不一定是 Fluent——尝试为整个过程带来更多的顺序和版本控制，但是有很多关于如何使用的文章和示例与 CI 一起，我找不到将迁移集成到 MSI 安装程序或类似设备中的任何信息。

我想做的是将它作为我们整体安装程序的一部分，或者专门为升级/降级数据库制作一个。暂时不考虑任何客户端特定的迁移，甚至可以从这样的安装程序执行通用迁移吗？如果是这样，如何在单个安装程序中针对多个平台（即同时提供 SQL 和 Oracle 迁移并在运行时确定使用哪个平台）？

我的计划是将迁移保留在单个程序集中（类似于[本文](http://iainhunter.wordpress.com/2012/08/02/easy-database-migrations-with-c-and-fluentmigrator/)中的描述），并让安装程序根据创建安装程序时包含的信息执行适当的向上/向下迁移。假设可以做到，这听起来像是一个明智的解决方案，还是有更好的方法来管理我不知道的所有这些？

非常感谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:30:15.983

是的，这是绝对可能的。

要从您自己的代码运行 FluentMigrator，您只需创建一个 RunnerContext 并执行它。有关示例，请参见[NAnt](https://github.com/schambers/fluentmigrator/blob/master/src/FluentMigrator.NAnt/MigrateTask.cs)运行程序（或[Console](https://github.com/schambers/fluentmigrator/blob/master/src/FluentMigrator.Console/MigratorConsole.cs)运行程序）。

针对不同的平台，您可以在执行 RunnerContext 时通过 Database 参数传入数据库类型来控制这一点。其他选项是传入要在迁移中使用的[ApplicationContext 。](https://github.com/schambers/fluentmigrator/wiki/ApplicationContext%3a-Passing-parameters-to-Migrations)或者通过使用可以在迁移上设置的[标签进行过滤。](https://github.com/schambers/fluentmigrator/wiki/Filter-migrations-run-based-on-Tags)

# java - 在mysql表中插入记录时出现异常

> ID：12052758
> 
> 赞同：0
> 
> 时间：2012-08-21T10:16:13.367
> 
> 标签：java, mysql, ibatis, mybatis

我正在向 mysql 表之一插入值，但出现以下异常：

```
Could not set property 'id' of 'class com.mycom.myproject.db.mybatis.model.FeedEntry' with    value '2' Cause: java.lang.IllegalArgumentException: java.lang.ClassCastException@175e216] with root cause. 
```

记录已成功插入表中。在我的表中，id 是自动递增的，主键不为空。在我的映射器类中，我有

```
 <insert id="insertSelective" parameterType="com.mycom.myproject.db.mybatis.model.Category" >
<!--
  WARNING - @mbggenerated
  This element is automatically generated by MyBatis Generator, do not modify.
  This element was generated on Fri Aug 10 11:40:59 BST 2012.
-->
<selectKey resultType="java.lang.Integer" keyProperty="id" order="AFTER" >
  SELECT LAST_INSERT_ID()
</selectKey>
insert into category
<trim prefix="(" suffix=")" suffixOverrides="," >
  <if test="fSourceId != null" >
    f_source_id,
  </if>
  <if test="userId != null" >
    user_id,
  </if>
  <if test="author != null" >
    author,
  </if>
  <if test="name != null" >
    name,
  </if>

</trim>
<trim prefix="values (" suffix=")" suffixOverrides="," >
  <if test="fSourceId != null" >
    #{fSourceId,jdbcType=INTEGER},
  </if>
  <if test="userId != null" >
    #{userId,jdbcType=BIGINT},
  </if>
  <if test="author != null" >
    #{author,jdbcType=VARCHAR},
  </if>
  <if test="name != null" >
    #{name,jdbcType=VARCHAR},
  </if>      
</trim> 
```

所以我不明白如果一切正常，为什么会出现上述异常。

如果我错过了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:14:44.253

MyBatis 正在尝试使用 java.lang.Integer 参数调用类 FeedEntry 上的方法“setId”，结果是 ClassCastException。

您需要确保选择键的结果类型给出正确的类型。

# google-apps-script - 通过 API 运行 Google Apps 脚本函数

> ID：12052762
> 
> 赞同：0
> 
> 时间：2012-08-21T10:16:22.340
> 
> 标签：google-apps-script

我有一些 Google 文档；有些是普通的文档，有些是谷歌脚本。当我使用我的帐户登录时，我可以手动运行我的一个脚本，该脚本与我的文档交互（例如，它打开一个现有文档并将内容复制到一个新文档）。有没有办法让未登录的随机用户**通过**API 运行我的函数？每个人都应该能够轻松地运行我的脚本，但看不到代码或它的实际作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:18:58.783

是的，将其作为服务发布给匿名用户。然后设置一些特定的精心设计的 URL 来运行您希望它运行的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T13:40:44.577

让我详细说明 MZimmerman 和 Zig 的建议。

1.  创建您想要的任何功能并将其封装在 Content Service`doGet()`中。
2.  保存版本并发布 Web 应用程序以供`Anyone, even anonymous`用户使用。请注意，仅发布`Anyone`是不够的授权；它必须为匿名用户发布。
3.  `UrlFetchApp.fetch(url)`执行用于调用`doGet()`脚本的 Web 应用程序。您可以根据需要/希望传递请求参数（[参见文档](https://developers.google.com/apps-script/guides/content#serving_json_from_scripts)）并返回文本错误代码。

这很酷。我正在使用它来设置具有受保护范围的 Gsheet 工作簿的多用户集合。工作簿有一个自定义菜单，其中包含调用 Web 应用程序脚本以对表格数据进行排序和处理的代码。这些 Web 应用程序作为工作簿所有者运行，而不是有效用户；因此允许有效用户处理受保护的数据范围。

# jquery - 使用带有选项卡的 twitter bootstrap - ajax 内容

> ID：12052764
> 
> 赞同：3
> 
> 时间：2012-08-21T10:16:23.307
> 
> 标签：jquery, twitter-bootstrap

所以我知道引导程序没有对 ajax 的默认支持，称为选项卡的内容，就像 jQuery UI 那样。

我在这里的其他问题的帮助下设法提出了以下解决方案，这种方法很有效：

```
 <div class="tabbable">
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#tab1"> tab 1</a></li>
        <li><a data-toggle="tab" href="#tab2">tab 2</a></li>
        <li><a data-toggle="tab" href="#tab3">tab 3</a></li>
        <li><a data-toggle="tab" class="ajax" href="test.html">tab 4 - ajax</a></li>
      </ul>
      <div class="tab-content">
        <div id="tab1" class="tab-pane active"> tab 1 content </div>
        <div id="tab2" class="tab-pane"> tab 2 content </div>
        <div id="tab3" class="tab-pane"> tab 3 content </div>
      </div>
    </div> 
```

JS：

```
<script type="text/javascript">
        $(function() {

            $('.ajax').click(function (e) {
              var thisTab = e.target // activated tab
              var pageTarget = $(thisTab).attr('href');
              //get number of li in list of tabs:
              var itemNumber = $(this).parent().index()+1;
              $("#tab"+itemNumber).load(pageTarget);

            });
        });
    </script> 
```

这似乎完美地工作 - 它找到了锚的目标 href，并计算出

*   .

    我有两个问题：

    1）我想以编程方式解决选项卡#tab4是否存在，如果存在 - 然后通过ajax插入内容。我正在使用： if ($("#tab"+itemNumber).length > 0)

    但这似乎给出了相反的结果 - 即，如果它在那里，它告诉我它不是。那是怎么回事？- 诡异的！

    和 2）如果我有我确实有切换以使#tab4 成为活动的。我尝试过应用“活动”类，也尝试过重新应用 tab() 调用，但这也不起作用。

    有任何想法吗？

    提前致谢！

    **编辑：这是一个 jsfiddle 玩：http: [//jsfiddle.net/kneidels/wnHEF/1/](http://jsfiddle.net/kneidels/wnHEF/1/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:17:22.863

删除“活动”类，然后将其应用于特定的选项卡窗格似乎可行。

```
$('.tab-pane').removeClass('active');
$('#tab' + itemNumber).addClass('active'); 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/wnHEF/3/)

* * *

`load()`在您的 JSFiddle 示例中使用也可以按我的示例中的预期工作。

## [JSFiddle](http://jsfiddle.net/mmfansler/wnHEF/4/)

关于动态创建窗格，您的条件测试对我有用，尽管可以简化：

```
if (!$('#tab' + itemNumber).length) { /* create new tab */ } 
```

一个简单的测试似乎工作正常：

```
for (var i = 0; i < 6; i++) {
  console.log("#tab" + i + " found: " + !!$('#tab' + i).length);
}

// #tab0 found: false
// #tab1 found: true
// #tab2 found: true
// #tab3 found: true
// #tab4 found: true
// #tab5 found: false 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/wnHEF/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T02:07:33.853

这是我针对 Bootstrap 3 Tab 和异步选项卡加载的解决方案。希望对您有所帮助。首先，Bootstrap 3 Tab 的标记正常。请注意，如果选项卡的内容为空，则选项卡内容必须存储要调用的 ajax 链接。我使用 data-href 来存储它，您可以根据需要更改属性。

```
<ul id="tabs" class="nav nav-tabs" role="tablist">
    <li class="active"><a href="#basic" role="tab" data-toggle="tab">Basic</a></li>
    <li><a href="#description" role="tab" data-toggle="tab">Description</a></li>
    <li><a href="#imdb" role="tab" data-toggle="tab">IMDb</a></li>
    <li><a href="#subtitles" role="tab" data-toggle="tab">Subtitles</a></li>
    <li><a href="#files" role="tab" data-toggle="tab">Files</a></li>
    <li><a href="#peers" role="tab" data-toggle="tab">Peers</a></li>
    <li><a href="#tasks" role="tab" data-toggle="tab">Tasks</a></li></ul>

<div class="tab-content">
    <div class="tab-pane active fade in clearfix" id="basic">Basic content</div>
    <div class="tab-pane fade in" id="description">Description content</div>
    <div class="tab-pane fade in" id="imdb">IMDb</div>
    <div class="tab-pane fade in" id="subtitles" data-href="subtitles.html"></div>
    <div class="tab-pane fade in" id="files" data-href="files.html"></div>
    <div class="tab-pane fade in" id="peers" data-href="peers.html"></div>
    <div class="tab-pane fade in" id="tasks" data-href="tasks.html"></div></div> 
```

而jquery部分触发事件tab改变，检查内容是否为空。如果为空，则调用ajax函数请求存储在data-href中的页面来替换它。

```
<script>
$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    window.location.hash = e.target.hash;
    var id = e.target.hash;
    if($(id).html()==="") {
        ajax_call($(id).attr('data-href'),"GET",null,function(data){
            $(id).html(data);
        });
    }
});
var hash = window.location.hash;
hash && $('#tabs a[href="' + hash + '"]').tab('show');
function ajax_call(url, type, data, callback) {
    $.ajax({
        url: url,
        type: type,
        async: false,
        data: data,
        success: function(data){
            callback(data);
        }
    });
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T19:57:37.637

这可能对你有帮助，我在引导程序 3 上使用它。我想也应该适用于版本 2

定义你的市场

```
<ul class="nav nav-tabs" id="myTab">
  <li class="active blo_tabs"><a href="#blo_bor" data-toggle="tab"
          data-url="{% url "generar_bloque" %}"
          data-pars="listar=true&borrador&true"
          data-target="#blo_bor"
          >BORRADORES</a></li>
  <li><a class="blo_tabs" href="#blo_def" data-toggle="tab"
         data-url="{% url "generar_bloque" %}"
         data-pars="listar=true&definitivo&true"
         data-target="#blo_def"
          >DEFINITIVOS</a></li>
  <li><a class= "blo_tabs" href="#blo_proc" data-toggle="tab"
          data-url="{% url "generar_bloque" %}"
          data-pars="listar=true&enproceso&true"
          data-target="#blo_proc"
          >EN PROCESO</a></li>
</ul> 
```

这是javascript

```
<script type="text/javascript">
    $('.blo_tabs').on('shown.bs.tab', function (e) {
        tab = $(e.target); // activated tab
        warehouse_control.listar(
                tab.attr('data-url'),
                tab.attr('data-pars'),
                tab.attr('data-target')
        );
    });
</script> 
```

这就是warehouse_control.listar 所拥有的。

```
listar: function(url, parametros, target){
        esperar.cubrir_especifico(target);
        $.get(url, parametros, function(response){
              $(target).html(response);
              esperar.descubrir();
         }, 'html' );
    } 
```

# jquery - 可拖动的jQuery获取开始父（）元素

> ID：12052765
> 
> 赞同：5
> 
> 时间：2012-08-21T10:16:33.257
> 
> 标签：jquery, drag-and-drop, jquery-ui-draggable

我想用 juery 拖放项目。

现在我确实有一个包含多个项目的“存储”。

在另一个网站上，我有 x 个盒子。每个盒子只能包含 1 个项目。

现在，我使用 droppable 函数在盒子上设置另一个类，只能添加 1 个盒子，它适用于：

```
 $( ".droppable" ).droppable({
     accept: ".draggable",
     activeClass: "draghover",
     drop: function( event, ui ) {
         if($( this ).hasClass("droppable")) {
             $( this ).removeClass("droppable").addClass( "droppable-");
         }
     } }); 
```

现在，当我将项目移回存储或另一个盒子时，我需要恢复类。我用 draggable.start 函数试过这个，但我不能得到正确的 parent()

```
$( ".draggable" ).draggable({
        revert: "invalid",
        snap: ".droppable",
        snapMode: "inner",
        start: function( event, ui ) {
            alert($( this ).parent().attr("Class"));

        }
    }); 
```

这将始终返回第一次拖动之前的起始位置。不是最新的职位。

存储看起来像：

```
<td valign="top" class="warenlager" bgcolor="grey" width="200">
    <div class="draggable" class="bild ui-widget-content" id="s73-1">S</div>
    <div class="draggable" class="bild ui-widget-content" id="s74-1">S</div>
</td> 
```

盒子看起来像：

```
<td><div class="droppable" id="element 2"></div></td> 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:29:08.870

如果你想在可拖动元素从 droppable 中删除后恢复盒子的类（我想你是这样问的）然后使用 out 事件处理程序，所以现在代码看起来像：

```
 $( ".droppable" ).droppable({
 accept: ".draggable",
 activeClass: "draghover",
 drop: function( event, ui ) {
     if($( this ).hasClass("droppable")) {
         $( this ).removeClass("droppable").addClass( "droppable-");
     }
 },
 out: function()
 {
     $(this).addClass("droppable").removeClass( "droppable-");
 }
 }); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-16T04:35:50.053

你可以这样做（**通过 ES6**）：

[**在线演示（jsfiddle）**](https://jsfiddle.net/ali_soltani/f59q39y5/3/)

```
// Create a class for dragged element
// I will create a new instance form this class when drag
function draggedElement(elementId, parentId) {
  this.id = elementId,
  this.parentId = parentId
};

// Array of dragged elements
// This array use for store dragged elements and their parent's id
var draggedElementList = [];

$('.draggable').draggable({
  start: function(event, ui) {
    // Store or update parent's id  
    updateDraggedElementList($(this).attr("id"), $(this).parent().attr("id"));
  }
});

// This method used for update or store draaged elemens and their parent's id
function updateDraggedElementList(elementId, parentId) {

  // Create new instance
  var element = new draggedElement(elementId, parentId);

  // Check element has already been added or not
  var foundIndex = draggedElementList.findIndex(el => el.id == element.id);
  if (foundIndex > -1)
    draggedElementList[foundIndex] = element;
  else
    draggedElementList.push(element);

  // Print dragged elements and their parents
  printDraggedElements();
}

// I wrote this method for test
function printDraggedElements() {
  for (var i = 0; i < draggedElementList.length; i++) {
    console.log(draggedElementList[i].id);
    console.log(draggedElementList[i].parentId);
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-23T15:35:38.817

我知道这不是最近的，但是获取可拖动项的父元素的一种方法是在可拖动项上使用 start 事件。

```
$( ".draggable" ).draggable({
    revert: "invalid",
    snap: ".droppable",
    snapMode: "inner",
    start: function( event, ui ) {
        alert(event.currentTarget.parentElement);
    }
}); 
```

# objective-c - 按下后退按钮会破坏我的应用程序的方向

> ID：12052779
> 
> 赞同：0
> 
> 时间：2012-08-21T10:17:15.190
> 
> 标签：objective-c, ios, xcode

我有一个 iPad 应用程序，它有一个奇怪的怪癖。我在导航控制器中使用它，当我在它转换到的第一个屏幕以外的任何屏幕上按下“返回”时，它会将我的方向更改为纵向。例如...

屏幕 1 >> 屏幕 2 - 如果我在屏幕 2 上按回，则转换回屏幕 1 没有问题。

屏幕 1 >> 屏幕 2 >> 屏幕 3 - 如果我在屏幕 3 上按回，屏幕 2 会以纵向呈现，然后如果我再次返回，屏幕 1 也会如此。

在 Xcode 中，我进行了设置，以便该应用程序仅支持正确的横向方向。我也有以下代码：

```
{
    if (interfaceOrientation == UIInterfaceOrientationLandscapeRight) 
        return YES;        
    return NO;
} 
```

那么当我在屏幕 3（或更高版本）上按回时会发生什么？我不明白为什么它会改变方向。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:21:24.737

对所有屏幕使用以下代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:29:11.550

您是否检查了项目设置？它应该看起来像这样![您是否检查了项目设置？ 它应该看起来像这样](../Images/9acb63ec550264d0d46f8184040171af.png)

# macos - Mac OS X：重新启动后隐藏显示应用程序窗口

> ID：12052781
> 
> 赞同：1
> 
> 时间：2012-08-21T10:17:23.637
> 
> 标签：macos

我最近开发了一个 Mac OS X 应用程序。此应用程序在后台运行，并在每次重新启动时在登录项处启动。我使用了这里的示例代码-> [https://gist.github.com/jquave/LaunchAtLoginController/blob/c8ae6dd2b8b0a2864ede0366991f43b580b65124/LaunchAtLoginController.m](https://gist.github.com/jquave/LaunchAtLoginController/blob/c8ae6dd2b8b0a2864ede0366991f43b580b65124/LaunchAtLoginController.m)

使用此代码，因为它在机器上发生重新启动后自动启动应用程序运行。现在我要求在每次重新启动后不显示应用程序窗口（仅显示窗口），但应用程序可以在后台运行。为此，我已`kLSSharedFileListLoginItemHidden`按照此 URL 和来源中提到和更新的方式使用。但是，即使添加了这个隐藏的登录项属性，每次重启机器后应用程序窗口仍然打开。如何避免在每次以编程方式重新启动后打开登录项应用程序窗口（仅窗口）？我正在使用 Lion OS 10.7.3。请指教。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:39:57.073

这是詹姆森Quave。我编写了上面提到的 github 文件更改。我认为我的方法的一个缺陷是它可能不安全。您和管理员是否在您正在测试的帐户中？

# ruby-on-rails - 用 Grape 构建 XML API

> ID：12052782
> 
> 赞同：6
> 
> 时间：2012-08-21T10:17:27.443
> 
> 标签：ruby-on-rails, xml, ruby-on-rails-3, api, grape-api

我正在 Grape gem 的帮助下构建一个 XML API。为 API 操作构建 XML 的最佳方式是什么？由于 Grape 没有使用标准导轨控制器，我不能使用`views/../xml.builder`. 你有什么建议？也许有一些构建 xml api 的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:35:36.583

由于没有任何答案，我将回答我自己的问题。我最终得到了模块，我在哪里声明了不同类型的 xml 响应，并将这些模块包含到我的 Grape API 中。在 API 操作中，我只是从该模块调用响应方法。使用这种方法，我的代码清晰且分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:03:18.230

它似乎是样本。只需提供格式来告诉葡萄您的默认格式

```
format :xml
content_type :xml, "text/xml" 
```

然后添加`.xml`到请求 url 的末尾。

# string - 具有动态长度的字符变量

> ID：12052797
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:18:04.033
> 
> 标签：string, char, declaration, abap

有没有办法用动态计算的长度声明 char 变量（或者可能是字符串）？此编码阐明了我想要的内容：

```
DATA: len TYPE i,
      a   TYPE i,
      b   TYPE i.
len = a + b.
DATA: var(len) TYPE с. 
```

不要提出带有 CREATE DATA 和/或字段符号的解决方案：我已经尝试过了，但它们不适用于我的情况。此类声明的目的是添加前导零和/或将其他逻辑应用于此字符串。因此要**严格**声明字符串！

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:49:34.090

Dezmond，很久以前，但我想这是您问题的解决方案：

```
DATA:
lo_len TYPE REF TO data.

FIELD-SYMBOLS:
          <lv_len> TYPE any.

lv_length = 10.
CREATE DATA lo_len TYPE c LENGTH lv_length.
    ASSIGN lo_len->* TO <lv_len>. 
```

干杯，冈特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:18:42.627

据我所知，这样的动态数据声明是不可能的。我完成变量前导零的方法是在子类中覆盖我的“add_leading_zeroes”方法，将我的字符串移动到正确类型的变量，添加零并将其移回主类......

您还可以指定一个接受您的字符串和数据类型名称的方法...使用 RTTS 获取该类型的长度并使用它来添加零。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T10:39:28.803

根据您施加的限制（除了“相信我”之外没有指定任何可以理解的原因），这是不可能的。甚至尝试这个也是完全没有意义的。您要么在编译时知道长度，要么不知道。如果您需要将长度视为变量，那么尝试动态生成数据类型是没有意义的。使用 STRING 并手动处理前导零。这并不难。

编辑 1： 至少在相当新的版本中，完全可以将 SHIFT、OVERLAY 和 TRANSLATE 与 STRING 变量一起使用。

编辑 2：如果您需要复杂的模式，请使用正则表达式 - 报告 DEMO_REGEX_TOY 和[ABAP 文档](http://help.sap.com/abapdocu_702/en/abenregular_expressions.htm)应该为您提供足够的信息。

# iphone - 带有试用包的 iPhone 应用程序（此应用程序是限时免费的）

> ID：12052801
> 
> 赞同：0
> 
> 时间：2012-08-21T10:18:11.873
> 
> 标签：iphone, ios

开发具有娱乐领域的 iPhone 应用程序以及当用户从应用商店下载我的应用程序时实现的内容将在有限的时间内免费，之后如果用户对应用程序感到满意，则需要付费才能继续使用。我们可以说，首先用户正在下载跟踪应用程序，然后用户需要为完整版支付一些费用。那么有没有办法用 iPhone Application 来实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:22:48.090

不，因为无法 100% 检查用户之前是否安装过该应用程序。因此，当用户重新安装应用程序时，时间轨迹将重新开始。您可以将路径的安装开始时间保存在钥匙串中，以使其更加持久。但我仍然清楚我的 iPhone 将使我能够重新开始这条路。

您最好限制用户，例如，您可以在应用程序中保存的项目数量。并添加应用内购买以解锁所有功能。

# jquery - 上传后编辑照片

> ID：12052804
> 
> 赞同：0
> 
> 时间：2012-08-21T10:18:32.187
> 
> 标签：jquery, ruby-on-rails, file-upload

我正在使用集成到我的 Rails 3.2.1 应用程序中的 jQuery File Upload 插件（[此处的文档）（根据](https://github.com/blueimp/jQuery-File-Upload/)[此处](https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6-%28multiple%29)的文档设置）将照片上传到我的应用程序中。

我已经设置了插件，以便它自动上传所有已选择的文件，而无需用户执行任何其他操作。上传照片后（以及在数据库中创建的相应条目），我希望用户能够为每张照片输入标题。

但是，在显示已上传照片的模板脚本中，我正在努力为已上传的每张照片创建一个编辑表单。我知道为每张照片创建一个表格远非优雅，但它似乎是这种情况下的唯一方法（除非我在这里遗漏了一些明显的东西？）。

```
<script id="template-download" type="text/html">
    {% for (var i=0, files=o.files, l=files.length, file=files[0]; i<l; file=files[++i]) { %}
            <div class="template-download nofade">
                {% if (file.error) { %}
                    {%=file.name%}
                    <span>{%=fileUploadErrors[file.error] || file.error%}</span>
                {% } else { %}
                    {% if (file.thumbnail_url) { %}
                        <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery"><img src="{%=file.mini_url%}"></a>
                        <%= form_for Photo.find(<---- ID SHOULD BE HERE ---->) do |f| %>
                            <%= f.text_field :title %>
                            <button class="btn btn-danger btn-small" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"><i class="icon-white icon-trash"></i> Delete</button>
                            <%= f.submit %>
                        <% end %>
                    {% } %}
                {% } %}
            </div>
    {% } %}
</script> 
```

我有一个变量是

```
file.photo_id 
```

包含相关照片的 ID，但尝试为其创建表单

```
<%= form_for Photo.find("{%= file.photo_id %}") do |f| %> 
```

只返回此错误：

```
Couldn't find Photo with id={%= file.photo_id %} 
```

我也尝试过像 Photo.find({%= file.photo_id %}) 这样的变体，但无济于事。

我知道这对于特定插件来说是一个非常具体的问题，但认为它仍然值得一问。任何人都知道如何传递照片 ID，或者更好地暗示如何以更优雅的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:02:24.687

上传所有文件后，插件将列出所有文件使用`template-download`

我建议在表单提交上使用 ajax 来更新页面上显示的每个文件的标题。

以下是如何实现这一目标

```
<script id="template-download" type="text/html">
    {% for (var i=0, files=o.files, l=files.length, file=files[0]; i<l; file=files[++i]) { %}
            <div class="template-download nofade">
                {% if (file.error) { %}
                    {%=file.name%}
                    <span>{%=fileUploadErrors[file.error] || file.error%}</span>
                {% } else { %}
                    {% if (file.thumbnail_url) { %}
                        <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery"><img src="{%=file.mini_url%}"></a>
                            <input type="text" size="30" name="photo"/>
                            <a href="photos/{%=file.photo_id%}" class=".update-btn">Save</a>
                            <button class="btn btn-danger btn-small" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"><i class="icon-white icon-trash"></i> Delete</button>
                    {% } %}
                {% } %}
            </div>
    {% } %}
</script> 
```

如果您注意到，我已替换`form_tag`为

```
<input type="text" size="30" name="photo"/>
<a href="photos/{%=file.photo_id%}" class=".update-btn">Save</a> 
```

现在您将在每个文本框旁边看到**保存链接以输入标题。**

接下来是单击链接的操作。

```
$(function() {
     $('.update-btn').live("click", function() {
        var title = $(this).previous();
        $.ajax({
            url: $(this).attr('href'),
            type: "POST",
            data: { _method: 'PUT', title.attr('name'): title.val() },
            dataType: 'json',            
            success: function(msg) {
               //You may disable link after successful action
            }
        });
     });
  }); 
```

上面的代码将 click 事件绑定到每个**Save**链接并将**PUT**请求发送到**PhotosController**。

我不擅长 javascript/jQuery，但它应该可以工作。

# android - 如何在安卓动态壁纸中翻转图像

> ID：12052810
> 
> 赞同：0
> 
> 时间：2012-08-21T10:18:46.367
> 
> 标签：android, live-wallpaper

我想让我的动态壁纸每 5 秒在图片之间翻转一次（例如）。如何使用此代码进行翻转动作？

```
public class MyWallpaperService extends WallpaperService {

    @Override
    public Engine onCreateEngine() {
        return new MyWallpaperServiceEngine();
    }

    public class MyWallpaperServiceEngine extends Engine {

        private Thread thread;
        private Bitmap image;
        private SurfaceHolder holder;
        private boolean running;
        private boolean ready;
        private boolean vis;
        private Paint paint;
        private int nheight;
        private int r = 0;
        private int g = 64;
        private int b = 128;
        private int ox;
        private float angle;
        private float velocity;
        private Matrix matrix;

        @Override
        public void onTouchEvent(MotionEvent event) {
            // velocity=30;
            // super.onTouchEvent(event);
        }

        @Override
        public void onOffsetsChanged(float xOffset, float yOffset,
                float xOffsetStep, float yOffsetStep, int xPixelOffset,
                int yPixelOffset) {
            ox = -xPixelOffset;
            super.onOffsetsChanged(xOffset, yOffset, xOffsetStep, yOffsetStep,
                    xPixelOffset, yPixelOffset);
        }

        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            super.onSurfaceCreated(holder);
            image = BitmapFactory.decodeResource(getResources(),
                    mFullSizeIds[0]);
        }

        @Override
        public void onSurfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
            super.onSurfaceChanged(holder, format, width, height);
            nheight = height;
            ready = true;
        }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            super.onSurfaceDestroyed(holder);
            ready = false;
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            super.onVisibilityChanged(visible);
            vis = visible;
        }

        @Override
        public void onCreate(SurfaceHolder surfaceHolder) {
            super.onCreate(surfaceHolder);
            setTouchEventsEnabled(true);
            running = true;
            matrix = new Matrix();
            paint = new Paint();
            holder = surfaceHolder;
            thread = new Thread() {
                @Override
                public void run() {
                    while (running) {
                        if (ready && vis) {

                            final Canvas c = holder.lockCanvas();
                            if (c != null) {

                                r = inc(r, 1);
                                g = inc(g, 2);
                                b = inc(b, 3);
                                paint.setColor(0xff000000 | (r << 16)
                                        | (g << 8) | b);
                                c.drawPaint(paint);

                                angle += velocity;
                                velocity = velocity * 0.96f;
                                matrix.reset();
                                matrix.postRotate(angle);
                                matrix.preTranslate(-image.getWidth() >> 1,
                                        -image.getHeight() >> 1);
                                matrix.postTranslate(ox, nheight >> 1);
                                c.drawBitmap(image, matrix, null);

                                holder.unlockCanvasAndPost(c);
                            }
                            pause(1000 / 24);
                        } else {
                            pause(1000);
                        }
                    }
                }
            };
            thread.start();
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            running = false;
        }

        private final void pause(long time) {
            try {
                Thread.sleep(time);
            } catch (InterruptedException e) {
            }
        }

        private final int inc(int v, int d) {
            return v + (d % 256);
        }

        private Integer[] mFullSizeIds = { R.drawable.p, R.drawable.p1,
                R.drawable.p2, R.drawable.p3, R.drawable.p4,
                R.drawable.p5 };
    }

} 
```

在 onSurfaceCreated 中，该应用程序仅显示在 id 为 0 的图片上，而不是我拥有的 6 张图片的全部。

```
onSurfaceCreated(SurfaceHolder holder) {
            super.onSurfaceCreated(holder);
            image = BitmapFactory.decodeResource(getResources(),
                    mFullSizeIds[0]);
        } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:11:53.310

放置处理程序，它将每 5 秒调用一次您的绘图方法，并通过解锁画布使用画布绘制图像。您可以在 android sdk 中找到该示例。希望这会有所帮助。

# php - DomDocument 在 html 文件中遇到锚点时会产生异常？

> ID：12052813
> 
> 赞同：0
> 
> 时间：2012-08-21T10:19:02.373
> 
> 标签：php, domdocument

例如，当我加载我的 html 文件并且 dom 找到一个锚点时

```
<a href="http://www.facebook.com/page?utm_source=NSLGARNIER&utm_medium=19082012&utm_campaign=SUNSHINE_MOMENTS" style="color:#ababab;text-decoration:none;">Facebook</a> 
```

它给我一个错误

> 警告：DOMDocument::loadHTMLFile() [domdocument.loadhtmlfile]: htmlParseEntityRef: 期待 ';' 在 files/emailing_garnier543/emailing_garnier/emailing_garnier.html 中，第 13 行在 C:\wamp\www\emailingtool_new_old\process.php 第 42 行

process.php 中的第 12 行包含以下行

```
$html = $dom->loadHTMLFile($file); 
```

好像不接受呢？在网址中.. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:30:18.553

您应该添加：

```
libxml_use_internal_errors(true); 
```

[http://codepad.org/eRYubHSA](http://codepad.org/eRYubHSA)

```
<?php
$string = '<a href="http://www.facebook.com/page?utm_source=NSLGARNIER&utm_medium=19082012&utm_campaign=SUNSHINE_MOMENTS" style="color:#ababab;text-decoration:none;" >Facebook</a>';

$dom = new DOMDocument();
libxml_use_internal_errors(true);

$dom->loadHTML($string);

var_dump($dom->saveHTML()); 
```

# mysql - 每个表具有多个连接和多个计数的查询论坛

> ID：12052815
> 
> 赞同：1
> 
> 时间：2012-08-21T10:19:03.947
> 
> 标签：mysql, join, count

嘿家伙希望你能帮助我。

我正在尝试进行查询，以便在三个不同的表中有一个带有外键的主表。现在我想分别计算它在所有 3 个表中的条目。这是我到目前为止所拥有的，希望你们能帮助我解决它。

```
SELECT box_code.id, count( box_code_unused.id ) AS total, count( box_code_used.id ) AS total2, count( box_code_expired.id ) AS total3
FROM box_code
JOIN box_code_used ON box_code_used.box_code_id = box_code.id
JOIN box_code_unused ON box_code_unused.box_code_id = box_code.id
JOIN box_code_expired ON box_code_expired .box_code_id = box_code.id
GROUP BY box_code.id 
```

如果我只从一个表中计算条目，这种方法会起作用，但由于我从 3 个表中计算它不正确。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:21:46.633

您可能会[计算不同](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count-distinct)的 ID 出现次数：

```
SELECT box_code.id, 
       count(distinct box_code_unused.id ) AS total, 
       count(distinct box_code_used.id ) AS total2, 
       count(distinct box_code_expired.id ) AS total3
FROM box_code
LEFT JOIN box_code_used ON box_code_used.box_code_id = box_code.id
LEFT JOIN box_code_unused ON box_code_unused.box_code_id = box_code.id
LEFT JOIN box_code_expired ON box_code_expired .box_code_id = box_code.id
GROUP BY box_code.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:22:47.460

像这样使用子查询：

```
SELECT box_code.id, 
    (SELECT COUNT(*) FROM box_code_used b1 WHERE b1.box_code_id = box_code.id) AS total1,
    (SELECT COUNT(*) FROM box_code_unused b2 WHERE b2.box_code_id = box_code.id) AS total2,
    (SELECT COUNT(*) FROM box_code_expired b3 WHERE b3.box_code_id = box_code.id) AS total3
FROM box_code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:25:03.060

我认为您可以使用正确的加入。这样，它将包含一个表中不可用但在另一个表中可用的记录。

# java - 找不到文档时如何避免打开jasper viewer？

> ID：12052816
> 
> 赞同：3
> 
> 时间：2012-08-21T10:19:05.657
> 
> 标签：java, jasper-reports

我正在创建 java 桌面应用程序。我正在使用 jasper 报告来创建报告。 **如果 ResultSet 不包含任何数据，是否有一些方法可以调用 JasperViewer？我只想要消息对话框“文档没有页面。”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:44:48.557

如果数据可用，您可以显示报告生成按钮。您必须通过某种方式检查给定条件下可用的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T17:01:12.113

以下方法适用于 JasperReports-3.5.2：

```
JasperPrint jPrint = JasperFillManager.fillReport(...);
JasperViewer jViewer = new JasperViewer(jPrint, false);
if (jPrint.getPages().isEmpty()) {
    // JasperViewer constructor displayed "the document has no pages" dialog
    // so rather than displaying the empty JasperViewer simply return.
    return;
}
jViewer.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:27:47.407

您可以进行查询并将结果处理成一个列表并将该列表发送给 Jasper。这样，您可以在将内容传递给 Jasper 之前检查数据的查询结果。如果什么都没有，你就显示你的对话框，如果有数据，让 Jasper 显示它。

如果您不认为创建通知用户没有数据的报告对用户来说是个问题，那么 Alex K 使用***无数据***带的建议会更快更容易实施。

# jquery - 阻止用户在页面加载时执行任何操作

> ID：12052819
> 
> 赞同：8
> 
> 时间：2012-08-21T10:19:32.973
> 
> 标签：jquery, jquery-mobile

我有一个选项卡式 Web 应用程序，并且我还在页面转换之前创建了图像缓存，因此当用户转到一个页面时，我确保在转换到该页面之前下载所有图像。

当我单击包含许多图像的选项卡时，我会显示一个微调器并开始在后台下载图像，然后在完成后我将显示该页面。

但是我想在执行此操作时冻结任何用户输入或点击。那么冻结和解冻整个页面的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T10:41:31.637

您可以使用名为[**jQuery Block UI 的预定义 jQuery UI**](http://jquery.malsup.com)

或者简单地添加一个分割，它会阻塞 body，并且在加载 body 时会淡出。

```
<div id="div">
    <h1>Please Wait..</h1>
</div> 
```

jQuery 将是：

```
$(document).ready(function(){
    $("#div").fadeOut()
  }); 
```

[**这**](http://jsfiddle.net/UHuKG/1/)是工作示例。该页面将被阻止，直到图像完全加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:39:26.540

此 JQuery 代码可以禁用页面上的元素：

```
$("body").find("*").attr("disabled", "disabled");
$("body").find("a").click(function (e) { e.preventDefault(); }); 
```

这段 JQuery 代码将再次启用元素：

```
$("body").find("*").removeAttr("disabled");
$("body").find("a").unbind("click"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:33:46.653

用顶级透明/半透明覆盖覆盖界面应该阻止其下方元素的事件。

但是，您将通过这样做将 UI 控制权从用户手中夺走。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T16:49:06.513

我用：

```
$(window).bind('load', function() {
    // code here
}); 
```

在页面未完全加载之前，不会触发此事件。因此，您可以在那里调用解锁页面元素的函数。

享受 ：）

# c# - 比较列表中的日期时间元素 c#

> ID：12052822
> 
> 赞同：3
> 
> 时间：2012-08-21T10:19:37.500
> 
> 标签：c#, .net, list, .net-4.0, compare

我有`datetime`值列表，我正在尝试将每个项目与所有项目进行比较。

```
var dateList = new List<DateTime>(); 
```

基本上我想检查所有项目是否相等。

认为我可以使用[DateTime.Compare](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)，但我不确定如何遍历每个元素并进行比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T10:21:49.243

> 基本上我想检查所有项目是否相等。

不需要`DateTime.Compare`。只需检查

```
dateList.Distinct().Count(); 
```

如果等于 1，则它们相等，但如果大于 1，则不，它们不相等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T10:22:41.953

```
var notAllEqual = dateList.Any(x => x != dateList.First()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:21:23.113

```
bool b = dateList.Skip(1).All(x=>x.Equals(dateList[0])); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T10:22:23.997

非 Linq 方法：

```
 bool AreAllDatesEqual(List<DateTime> dateList)
    {
        var first = dateList[0];
        for (int i = 1; i < dateList.Count; i++)
        {
            if (first != dateList[i])
                return false;
        }

        return true;
    } 
```

# javascript - JavaScript中所有可打印字符的正则表达式

> ID：12052825
> 
> 赞同：18
> 
> 时间：2012-08-21T10:19:51.583
> 
> 标签：javascript, regex

寻找一个正则表达式来验证所有可打印的字符。正则表达式只需要在 JavaScript 中使用。我已经阅读了[这篇](https://stackoverflow.com/questions/1247762/regex-for-all-printable-characters)文章，但它主要谈论 .net、Java 和 C 而不是 JavaScript。

您必须只允许这些可打印字符：

> az、AZ、0-9 和三十二个符号：!"#$%&'()*+,-./:;<=>?@[] ^_`{|}~ 和空格

需要一个 JavaScript 正则表达式来验证输入字符是上述之一并丢弃其余的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T10:23:21.720

如果您想匹配 UTF-8 集中的所有可打印字符（如您在 8 月 21 日的评论所示），您自己将很难做到这一点。JavaScript 的原生正则表达式具有糟糕的 Unicode 支持。但是您可以将[XRegExp](http://xregexp.com/)与 regex 一起使用`^\P{C}*$`。

如果您只想将编辑中提到的那几个 ASCII 字母与 8 月 22 日的帖子相匹配，那么正则表达式是微不足道的：

```
/^[a-z0-9!"#$%&'()*+,.\/:;<=>?@\[\] ^_`{|}~-]*$/i 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T12:24:25.763

对于非 unicode 使用正则表达式模式`^[^\x00-\x1F\x80-\x9F]+$`

* * *

如果您想使用 unicode，请先阅读[Javascript + Unicode regexes](https://stackoverflow.com/questions/280712/javascript-unicode)。

我建议然后使用正则表达式模式`^[^\p{Cc}\p{Cf}\p{Zl}\p{Zp}]*$`

*   `\p{Cc}`或`\p{Control}`：ASCII 0x00..0x1F 或 Latin-1 0x80..0x9F 控制字符。
*   `\p{Cf}`或`\p{Format}`：不可见的格式指示器。
*   `\p{Zl}`或`\p{Line_Separator}`：行分隔符 U+2028。
*   `\p{Zp}`或`\p{Paragraph_Separator}`：段落分隔符 U+2029。

有关更多信息，请参阅[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-04-13T08:32:18.423

要验证字符串仅包含可打印的*ASCII*字符，请使用简单的正则表达式，例如

```
/^[ -~]+$/ 
```

它匹配

*   `^`- 字符串锚的开始
*   `[ -~]+`- 一个或多个（由于`+`量词）在 ASCII 表中从空格到波浪号的字符：

[![在此处输入图像描述](../Images/1f501de18b158b5163f3a24fde5fbcf9.png)](https://i.stack.imgur.com/LsDUs.png)
- `$`- 字符串锚的结束

对于 Unicode 可打印字符，使用`\PC`Unicode 类别（匹配除控制字符以外的任何字符）[`XRegExp`](http://xregexp.com/)，如前所述：

```
^\PC+$ 
```

请参阅正则表达式演示：

```
// ASCII only
var ascii_print_rx = /^[ -~]+$/;
console.log(ascii_print_rx.test("It's all right.")); // true
console.log(ascii_print_rx.test('\f ')); // false, \f is an ASCII form feed char
console.log(ascii_print_rx.test("demásiado tarde")); // false, no Unicode printable char support
// Unicode support
console.log(XRegExp.test('demásiado tarde', XRegExp("^\\PC+$"))); // true
console.log(XRegExp.test('‌ ', XRegExp("^\\PC+$"))); // false, \u200C is a Unicode zero-width joiner
console.log(XRegExp.test('\f ', XRegExp("^\\PC+$"))); // false, \f is an ASCII form feed char
```

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/xregexp/3.1.1/xregexp-all.min.js"></script>
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-05T21:19:34.487

自从发布此问题以来，JavaScript 似乎在某种程度上发生了变化？

我正在使用这个：

```
var regex = /^[\u0020-\u007e\u00a0-\u00ff]*$/;
console.log( regex.test("!\"#$%&'()*+,-./:;<=>?@[] ^_`{|}~")); //should output "true" 
console.log( regex.test("Iñtërnâtiônàlizætiøn")); //should output "true"
console.log( regex.test("☃")); //should output "false" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-02T21:35:18.337

## TLDR 答案

`string1.match(/[\p{Cc}\p{Cn}\p{Cs}]+/gu)`用作条件句，具有真实含义，包含`string1` *任何不可打印的字符。*

或者，如果您想要逻辑等价物，则如果*仅包含可打印字符*`string1.match(/^[\P{Cc}\P{Cn}\P{Cs}]+$/gu)`，则条件将返回 true 。`string1`

 *## TLDR 解释

*   `\P{Cc}`:*不*匹配控制字符。
*   `\P{Cn}`：*不*匹配未分配的字符。
*   `\P{Cs}`:*不*匹配 UTF-8 无效字符。
*   `+`: 确保找到了一些东西，也就是说，这也意味着`""`空字符串将不会被认为是可打印的。
*   `/g`：贪婪匹配，穷举/贪婪地在字符串中搜索指定的字符集。
*   `/u`: 用于匹配 unicode 字符点的 unicode 正则表达式运算符。（来源：[MDN 网络文档：正则表达式；Unicode 属性转义](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes)。）

## 演示

```
var string1 = 'This string has unprintable characters \u0001';

if(string1.match(/[\p{Cc}\p{Cn}\p{Cs}]+/gu)) {
  console.log("Unprintable string: " + string1);
}
var string2 = 'This string has only printable characters.';

if(string2.match(/^[\P{Cc}\P{Cn}\P{Cs}]+$/gu)) {
  console.log("Printable string: " + string2);
}
```

## 可能的替代方案

*   `\P{C}`: 只匹配可见字符。不要匹配任何不可见的字符。
*   `\P{Cc}`: 只匹配非控制字符。不匹配任何控制字符。
*   `\P{Cc}\P{Cn}`：仅匹配已分配的非控制字符。不要匹配任何控制或未分配的字符。
*   `\P{Cc}\P{Cn}\P{Cs}`：仅匹配已分配且 UTF-8 有效的非控制字符。不匹配任何控制、未分配或 UTF-8 无效字符。
*   `\P{Cc}\P{Cn}\P{Cs}\P{Cf}`：仅匹配已分配且 UTF-8 有效的非控制、非格式字符。不匹配任何控制、未分配、格式化或 UTF-8 无效字符。

## 来源和解释

查看可用于在正则表达式中进行测试的[Unicode 字符属性。](https://en.wikipedia.org/wiki/Unicode_character_property#General_Category)您应该能够在[Microsoft .NET](https://docs.microsoft.com/en-us/dotnet/standard/base-types/character-classes-in-regular-expressions)、[JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes)、[Python](https://pypi.org/project/regex/)、[Java](https://javascript.info/regexp-unicode)、[PHP](https://www.php.net/manual/en/parle.regex.unicodecharclass.php)、[Ruby](https://ruby-doc.org/core-2.4.1/Regexp.html)、[Perl](https://perldoc.perl.org/5.8.9/perlrecharclass)、[Golang](https://golang.org/pkg/regexp/syntax/)甚至[Adob](https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/using-regular-expressions-in-functions/regular-expression-syntax.html) ​​e 中使用这些正则表达式。了解 Unicode 字符类是*非常可转移的知识*，所以我推荐使用它！

这个正则表达式将匹配任何可见的东西，以它的简写和长手形式给出......

```
\p{L}\p{M}\p{N}\p{P}\p{S}\p{Z}
\p{Letter}\p{Mark}\p{Number}\p{Punctuation}\p{Symbol}\p{Separator} 
```

`\p`表示它是我们想要匹配的东西，但我们也可以选择使用`\P`(capitalized)[来表示*不匹配的东西。*](https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/using-regular-expressions-in-functions/regular-expression-syntax.html) 所以，这意味着我们可以使用`\p{C}`类，用于“不可见的控制字符和未使用的代码点”。（来源：[Regular-Expressions.info](https://www.regular-expressions.info/unicode.html#prop)。）然后是一个更简单的正则表达式`\P{C}`，但这在删除不可见格式方面可能过于严格。您可能想仔细观察，看看什么是最好的，但其中一种选择应该适合您的需要。

### 所有可匹配的 Unicode 字符集

如果您想知道任何其他可用的字符集，请查看[regular-expressions.info](https://www.regular-expressions.info/unicode.html#prop) ...

*   **`\p{L}`**或**`\p{Letter}`**：任何语言的任何类型的字母。
    *   `\p{Ll}`或`\p{Lowercase_Letter}`：具有大写变体的小写字母。
    *   `\p{Lu}`或`\p{Uppercase_Letter}`：具有小写变体的大写字母。
    *   `\p{Lt}`或`\p{Titlecase_Letter}`：出现在单词开头的字母，仅单词的第一个字母大写。
    *   `\p{L&}`or `\p{Cased_Letter}`：以小写和大写变体形式存在的字母（Ll、Lu 和 Lt 的组合）。
    *   `\p{Lm}`or `\p{Modifier_Letter}`: 一个像字母一样使用的特殊字符。
    *   `\p{Lo}`or `\p{Other_Letter}`: 没有小写和大写的字母或表意文字
*   **`\p{M}`**or **`\p{Mark}`**: 一个要与另一个字符组合的字符（例如重音符号、变音符号、封闭框等）。
    *   `\p{Mn}`or `\p{Non_Spacing_Mark}`: 一个旨在与另一个字符组合而不占用额外空间的字符（例如重音符号、变音符号等）。
    *   `\p{Mc}`或`\p{Spacing_Combining_Mark}`: 一个旨在与占用额外空间的另一个字符组合的字符（许多东方语言中的元音符号）。
    *   `\p{Me}`or `\p{Enclosing_Mark}`: 一个包含与之组合的字符（圆形、方形、键帽等）的字符。
*   **`\p{Z}`**or **`\p{Separator}`**: 任何类型的空格或不可见的分隔符。
    *   `\p{Zs}`or `\p{Space_Separator}`：一个不可见的空白字符，但确实占用空间。
    *   `\p{Zl}`或`\p{Line_Separator}`：行分隔符 U+2028。
    *   `\p{Zp}`或`\p{Paragraph_Separator}`：段落分隔符 U+2029。
*   **`\p{S}`**或**`\p{Symbol}`**：数学符号、货币符号、装饰符号、画框字符等。
    *   `\p{Sm}`或`\p{Math_Symbol}`：任何数学符号。
    *   `\p{Sc}`或`\p{Currency_Symbol}`：任何货币符号。
    *   `\p{Sk}`or `\p{Modifier_Symbol}`: 一个组合字符（标记）作为一个完整的字符。
    *   `\p{So}`or `\p{Other_Symbol}`: 不是数学符号、货币符号或组合字符的各种符号。
*   **`\p{N}`**或**`\p{Number}`**：任何脚本中的任何类型的数字字符。
    *   `\p{Nd}`或`\p{Decimal_Digit_Number}`：除表意文字外的任何文字中的数字 0 到 9。
    *   `\p{Nl}`or `\p{Letter_Number}`: 一个看起来像字母的数字，例如罗马数字。
    *   `\p{No}`或`\p{Other_Number}`：上标或下标数字，或不是数字 0-9 的数字（不包括表意文字中的数字）。
*   **`\p{P}`**或**`\p{Punctuation}`**：任何类型的标点符号。
    *   `\p{Pd}`or `\p{Dash_Punctuation}`: 任何类型的连字符或破折号。
    *   `\p{Ps}`或`\p{Open_Punctuation}`：任何类型的左括号。
    *   `\p{Pe}`或`\p{Close_Punctuation}`：任何类型的右括号。
    *   `\p{Pi}`或`\p{Initial_Punctuation}`：任何类型的开场白。
    *   `\p{Pf}`或`\p{Final_Punctuation}`：任何类型的结束语。
    *   `\p{Pc}`或`\p{Connector_Punctuation}`: 一个标点符号，例如连接单词的下划线。
    *   `\p{Po}`or `\p{Other_Punctuation}`: 任何不是破折号、括号、引号或连接符的标点符号。
*   **`\p{C}`**或**`\p{Other}`**：不可见的控制字符和未使用的代码点。
    *   `\p{Cc}`或`\p{Control}`：ASCII 或 Latin-1 控制字符：0x00–0x1F 和 0x7F–0x9F。
    *   `\p{Cf}`或`\p{Format}`：不可见的格式指示器。
    *   `\p{Co}`或`\p{Private_Use}`：保留供私人使用的任何代码点。
    *   `\p{Cs}`or `\p{Surrogate}`: UTF-16 编码的代理对的一半。
    *   `\p{Cn}`或`\p{Unassigned}`：任何未分配字符的代码点。*

# c# - 必须作为代表取消订阅事件吗？

> ID：12052827
> 
> 赞同：0
> 
> 时间：2012-08-21T10:20:01.600
> 
> 标签：c#, events

当用户按下按钮时，我想使用这个小上下文菜单：

```
private ContextMenuStrip TaskMenu()
{
    ContextMenuStrip Result = new ContextMenuStrip();
    Result.Items.Add("Select task to start:");
    Result.Items.AddRange(
        System.IO.Directory.GetFiles("C:\\Settings\\Tasks", true), "*.tsk")
            .Select(qF => new ToolStripMenuItem(System.IO.Path.GetFileNameWithoutExtension(qF)) { Tag = qF, Checked = qF == this.TaskFile })
            .ToArray());
    Result.Items.Add("Cancel");
    Result.ItemClicked += new ToolStripItemClickedEventHandler(
        delegate(object s, ToolStripItemClickedEventArgs ev) { StartScan((string)ev.ClickedItem.Tag); });
    return Result;
} 
```

但是，我不应该这样做，因为我从不取消订阅该活动。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:26:53.047

这里应该没有问题。`Result`是在方法内部创建的，因此不可能两次附加相同的事件处理程序。

当最后一个引用`Result`超出范围时，它就有资格进行垃圾收集。只要此方法之外的任何内容都不会保留对 的永久引用`Result`，当垃圾被收集时，它和对委托的引用都将被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:34:58.273

> 我不应该因为我从不取消订阅活动，对吧？

如果您需要在某个时候取消您的活动，那么这不是正确的方法。解决此问题的方法是获取对处理程序的引用，以便您以后可以取消订阅。

如果您纯粹从内存泄漏的角度担心，那么不要。当你`ContextMenuStrip`是 GC 时，你的代表也会如此。

# ios - iDevice 中的哪个 plist 存储了 idevice 的语言？

> ID：12052833
> 
> 赞同：2
> 
> 时间：2012-08-21T10:20:15.547
> 
> 标签：ios, plist

我想知道 iDevice 中的哪个 plist 存储了 idevice 的语言？

我想通过更改 plist 来更改 ipad 的语言。

你知道它是哪个plist吗？

非常感谢 ！

祝你今天过得愉快 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:19:44.607

I have been searching for the same thing. I came across the file /var/root/Library/Lockdown/data_ark.plist which contains com.apple.international-Language and com.apple.international-Locale. If you change the language on the phone, you can check the file and see that these properties are updated in the file. The problem is when I modify this file and restart the device, the language does not change and the plist file is overwritten. If you are able to figure it out, let me know.

******Update******

 **The above file is not necessary. The correct file to update is "/private/var/mobile/Library/Preferences/.GlobalPreferences.plist" This file contains an array called AppleLanguages. The array contains multiple strings for all the languages your device supports. Your default device language is Item 0 at the top. When you change the language, the file will be updated with the new language at the top of the list. So all you have to do is move the language you want to change to, to item 0 at the top of the list.**

# ruby - 对多个场景功能文件使用 -f html 时测试失败

> ID：12052834
> 
> 赞同：0
> 
> 时间：2012-08-21T10:20:22.367
> 
> 标签：ruby, cucumber

当我尝试使用 -f html 为具有多个场景的功能文件格式化结果时，我收到以下错误。

```
$ cucumber --expand -f html -o Output.html TestFeature1.feature 

class or module required (TypeError)
/Library/Ruby/Gems/1.8/gems/builder-3.0.0/lib/builder/xmlbase.rb:43:in `kind_of?'
/Library/Ruby/Gems/1.8/gems/builder-3.0.0/lib/builder/xmlbase.rb:43:in `method_missing'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/formatter/html.rb:411:in `set_scenario_color_failed'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/formatter/html.rb:406:in `set_scenario_color'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/formatter/html.rb:240:in `before_step_result'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:173:in `__send__'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:173:in `send_to_all'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:171:in `each'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:171:in `send_to_all'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:162:in `broadcast'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:104:in `visit_step_result'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/step_invocation.rb:43:in `visit_step_result'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/step_invocation.rb:39:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:99:in `visit_step'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:163:in `broadcast'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:98:in `visit_step'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/step_collection.rb:15:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/step_collection.rb:14:in `each'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/step_collection.rb:14:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:93:in `visit_steps'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:163:in `broadcast'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:92:in `visit_steps'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/scenario.rb:55:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:80:in `with_hooks'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:96:in `before_and_after'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:79:in `with_hooks'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime/support_code.rb:120:in `call'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime/support_code.rb:120:in `around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/language_support/language_methods.rb:9:in `around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/language_support/language_methods.rb:91:in `call'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/language_support/language_methods.rb:91:in `execute_around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/language_support/language_methods.rb:8:in `around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime/support_code.rb:119:in `around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime/support_code.rb:117:in `call'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime/support_code.rb:117:in `around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:91:in `around'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:78:in `with_hooks'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/scenario.rb:53:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/scenario.rb:108:in `with_visitor'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/scenario.rb:47:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:51:in `visit_feature_element'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:163:in `broadcast'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:50:in `visit_feature_element'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/feature.rb:43:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/feature.rb:42:in `each'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/feature.rb:42:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:20:in `visit_feature'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:163:in `broadcast'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:19:in `visit_feature'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:29:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:17:in `each'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:17:in `each'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:28:in `accept'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:14:in `visit_features'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:163:in `broadcast'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:13:in `visit_features'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:46:in `run!'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/cli/main.rb:43:in `execute!'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/../lib/cucumber/cli/main.rb:20:in `execute'
/Library/Ruby/Gems/1.8/gems/cucumber-1.2.1/bin/cucumber:14
/usr/bin/cucumber:23:in `load'
/usr/bin/cucumber:23 
```

使用的黄瓜版本：1.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:01:31.773

找到了问题:) 我有一个名为 Symbol 的参数，它造成了这个问题。符号是黄瓜框架代码中某处使用的变量。

# android - 使用带有异常 networkOnMainThreadException 的 asynctask

> ID：12052836
> 
> 赞同：1
> 
> 时间：2012-08-21T10:20:26.663
> 
> 标签：android, exception, android-asynctask

我已经在模拟器上的应用程序中使用 twitter 实现了一些操作，但在实际设备上，我有一个例外：

```
android.os.NetworkOnMainThreadException 
```

我已经阅读了该错误，这是因为我需要在主要操作之外执行一个线程，但不明白如何调用函数 asyncsTask，因为我需要发送共享首选项作为参数。--------------------- 我需要将函数 isAuthenticated 或他的代码的一部分放在 AsyncTask 中，但需要发送首选项作为参数，我不知道该怎么做

我放了一部分代码。

来电

```
if (TwitterUtils.isAuthenticated(prefs)) {   
......
.....
....
} 
```

在类 TwitterUtils.java

公共静态布尔isAuthenticated（SharedPreferences首选项）{

```
String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

AccessToken a = new AccessToken(token,secret);
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
twitter.setOAuthAccessToken(a);

try {         
    twitter.getAccountSettings(); **LINE ERROR**
    return true;
} catch (TwitterException e) {
    e.printStackTrace();
    return false;
} 
```

有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:35:30.797

替换您的代码：

```
if (TwitterUtils.isAuthenticated(prefs)) {   
......
.....
....
} 
```

具有以下内容：

```
 new AsyncTask<SharedPreferences,Object, Boolean>() {

        @Override
        protected Boolean doInBackground(SharedPreferences... params) {
            return TwitterUtils.isAuthenticated(params[0]);
        }

        @Override
        protected void onPostExecute(Boolean isAuthenticated) {
            if (isAuthenticated) {
                // Do processing after successful authentication
            }
            else {
                // Do processing after authentication failure
            }
        }
    }.execute(prefs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:29:47.167

当您调用 twitter.getAccountSettings() 时，此方法会发出网络请求，并且与所有请求一样，它必须在线程上完成。您需要传递 sharedpreferences 的事实不会改变任何事情。

要将一些参数传递给 AsyncTask，必须像这样抛出方法 execute()： new DownloadFilesTask().execute(url1, url2, url3);

更多信息在这里：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:32:10.970

尝试使用[Asynac 任务](http://developer.android.com/reference/android/os/AsyncTask.html)来避免这种情况。看看[这个](https://stackoverflow.com/questions/11980389/android-honeycomb-error-using-actionbar/11980447#11980447)。它会回答你的问题。

# iphone - 在屏幕之间切换时如何保持数组的状态？

> ID：12052841
> 
> 赞同：0
> 
> 时间：2012-08-21T10:20:40.903
> 
> 标签：iphone, objective-c, ios

我有一个 UITableView 并拥有它，因此当您按下第一个单元格时，它会通过重新加载数据将您带到一个新表。当您按下第二个单元格时，您会转到另一个表格，依此类推。回来时，我想保持表格视图的先前状态。为此，我维护了一个父变量。当我从表格中选择任何元素时，我将此元素存储到父元素中，并且在此基础上，我正在重新加载表格，而我回来了。它的工作原理，但这变成了非常冗长的逻辑？而且我感觉到它正在达到程序的清洁度。在屏幕之间切换时，是否有更好的优化方法来保持阵列状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:51:30.527

添加一个 gobal mutableArray 或使用 NSUserdefault 来保存所有 tableview 的当前索引。默认情况下，所有 tableview 都为 0。

现在 tableview 有 didSelectRowAtIndexPath 委托方法，每次选择新索引时你都会更改值。

在视图中会出现所有的tableview

```
-(void)viewwillappear
{
 [tableview reloadData];
} 
```

确保应选择所有 tableview 当前索引的 cellForRowAtIndexPath 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:24:07.433

使用 UINavigationController 堆栈中的表视图。

# javascript - 使用 xgettext 从 JavaScript 中提取翻译器注释（在 Python 模式下）

> ID：12052844
> 
> 赞同：6
> 
> 时间：2012-08-21T10:21:00.823
> 
> 标签：javascript, python, gettext, xgettext

我有一个运行良好的命令，可以从我的所有 .js 和 .html 文件（只是下划线模板）中提取字符串。但是，它似乎不适用于翻译评论。

例如，我的 .js 文件之一中有这个：

```
/// TRANSLATORS: The word "manual" stands for manual process
gettext("manual"); 
```

使用以下命令：

```
find . -iname '*.html' -o -iname '*.js' | xargs xgettext --language=Python --from-code=utf-8 --keyword=pgettext:1c,2 --keyword=npgettext:1c,2,3 --add-comments=/ 
```

xgettext 应该从 .js 文件中提取注释并将其放入我的 .po 文件中，如下所示：

```
#. TRANSLATORS: The word "manual" stands for manual process
#: tax.js:200 
msgid "manual"     msgstr "" 
```

但事实并非如此。我在这里做错了什么还是翻译评论只是不能在 Python 模式下工作？

**编辑：**我已经接受 John Flatness 的回答是正确的，但是**我确实找到了一种解决方法**，使我仍然可以使用 Python 模式并提取翻译注释。它并不完美，因为它实际上在注释中留下了一些语法：

在我的`tax.js`文件中：

```
/*
# This is a translator comment */
gettext("What is this?"); 
```

运行此命令：

```
find . -iname '*.html' -o -iname '*.js' | xargs xgettext --language=Python --from-code=utf-8 --keyword=pgettext:1c,2 --keyword=npgettext:1c,2,3 -c 
```

结果在 .po 文件中：

```
#. This is a translator comment */
#: tax.js:201
msgid "What is this?"
msgstr "" 
```

如您所见，唯一的问题是：

1.  我必须用两行写评论
2.  注释终止符`*/`留在翻译注释中

不过，在大多数情况下，这应该不是什么大问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:23:11.827

问题是你说`xgettext`源是 Python，而实际上它是 JavaScript。

这可能使它在许多情况下“足够好”，但我认为这里的绊脚石是 Python 不使用 . 进行单行注释`//`，它使用`#`.

Github 上有一个[项目，](https://github.com/AndyStricker/gettext-javascript)它为 gettext 工具添加了 javascript 支持。我不确定它的当前状态，你必须从源代码构建才能使用它。否则，我想您可以尝试其他`xgettext`支持具有更多类似 C/C++/Java 语法的语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-28T19:21:17.713

获得“翻译注释”而没有任何污染的方法是`#`在 javascript 注释 start 之后添加一个哈希`//`，这样 xgettext 会将它之后的所有内容解释为普通的 Python 注释。

尝试这个：

```
//# This is a translation comment
console.log(_('Some String')); 
```

并使用 xtext 提取，例如：

```
xgettext --language=Python --from-code=utf-8 --force-po -c -o file.po file.js 
```

这将按如下方式创建 PO：

```
#. This is a translation comment
#: /path/to/file.js:2
msgid "Some String"
msgstr "" 
```

我在 Ubuntu 12.04.4 上使用 gettext 0.18.1.1-5ubuntu3 成功地做到了这一点

# iphone - Dateformatter 从字符串中获取日期

> ID：12052846
> 
> 赞同：1
> 
> 时间：2012-08-21T10:21:08.103
> 
> 标签：iphone, objective-c, xcode, ipad, nsdateformatter

我的字符串是这样的， `2012-12-08 17:00:00.0`. 现在我正在尝试使用 NSDate 格式化程序从这个字符串中检索日期。我的代码是

```
NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-dd-MM hh:mm:ss"]; 
NSDate *date1 = [df dateFromString:@"2012-12-08 17:00:00.0"];
NSLog(@"%@ %@",date1);
[df release]; 
```

但我得到的只是空值..

我已经尝试了几种类型的 dateFormatter，例如`yyyy/mm/dd hh:mm:ss`，，`YYYY-DD-MM HH:MM:SS`.. 但仍然没有用.. 任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:26:44.060

假设您只是错误地在帖子中放置了一个空字符串文字，并且您的实际日期如您的帖子中所述，您需要使用`HH`而不是`hh`解析小时系统中的 24 小时制。您还需要添加`.S`到格式字符串以解析时间字符串的最后一个零：

```
NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-dd-MM HH:mm:ss.S"];
//                 here -------^^       ^------ and here
NSDate *date1 = [df dateFromString:@"2012-12-08 17:00:00.0"];
NSLog(@"%@",date1); 
```

这会产生预期的输出（小时的差异是由于时区差异造成的）：

```
2012-08-12 21:00:00 +0000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:44:11.227

秒后有一个持续时间间隔，并且您在 dateformatter 输入中错过了 strDate 。

```
NSString *strDate = @"2012-12-08 17:00:00.0";
NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-dd-MM hh:mm:ss.S"]; 
NSDate *date = [df dateFromString:strDate];// formatter format
NSLog(@"%@ %@",date);
[df release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:25:32.437

做这个：

```
NSString *strDate = @"2012-12-08 17:00:00.0";
NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-dd-MM HH:mm:ss.S"]; 
NSDate *date1 = [df dateFromString:strDate];// forgot to add valid string for according to date formatter format
NSLog(@"%@",date1);
[df release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:26:10.410

```
NSDateFormatter *dateformat=[[NSDateFormatter alloc]init];
[dateformat setDateFormat:@"dd/MM/yyyy hh:mm:ss"];
NSDate *today = [NSDate date];
NSString *currentDate=[dateformat stringFromDate:today];
NSLog(@"PrintToday Date is %@ ",currentDate); 
```

NSDate *date1 = [df dateFromString:@""];

**您需要在上面的行中传递字符串**

# android - 更改屏幕亮度

> ID：12052852
> 
> 赞同：2
> 
> 时间：2012-08-21T10:21:26.810
> 
> 标签：android

我是安卓新手。我想在按钮单击时将亮度更改为最大..但亮度没有改变。下面给出的代码请看一下：-

```
 int brightness=255;
        Settings.System.putInt(getContentResolver(),  
                android.provider.Settings.System.SCREEN_BRIGHTNESS, brightness); 
        WindowManager.LayoutParams lp = getWindow().getAttributes(); 
        lp.screenBrightness =brightness;
        getWindow().setAttributes(lp); 
```

除此之外，我在清单文件中添加了

我还需要添加什么...或者我应该适应哪些变化，以便反映亮度变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:07:25.160

尝试使用 0 到 1 之间的值。为此更改您的代码：

```
WindowManager.LayoutParams lp = getWindow().getAttributes();
                lp.screenBrightness = 1F;
                getWindow().setAttributes(lp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:36:57.057

我认为本教程可能会有所[帮助](http://www.41post.com/3503/programming/android-changing-the-screen-brightness)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:36:08.830

我遇到过同样的问题。尝试通过创建一个没有 UI 的虚拟活动来更改亮度。

# jquery - Jquery TOOLS 库 - 工具提示

> ID：12052860
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:21:52.887
> 
> 标签：jquery, tooltip, javascript

我正在尝试使这些工具提示起作用。但即使我尝试下载他们的独立示例（[http://jquerytools.org/demos/tooltip/index.htm](http://jquerytools.org/demos/tooltip/index.htm)），我也无法让这些工作。

有人可以解释这是为什么吗？我在代码中的任何地方都没有看到 jQuery 库。有人可以帮助我吗？

该示例如何在线工作，然后当我下载整个页面以及所有子文件时，它不会。我只想要这些很棒的工具提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:08:03.807

实际上在[http://jquerytools.org/demos/tooltip/index.htm](http://jquerytools.org/demos/tooltip/index.htm)中，包含一个包含所有 Jquery 工具脚本和 Jquery 的 js 脚本。
但是保存的页面不起作用的原因：
当您转到[该页面](http://jquerytools.org/demos/tooltip/index.htm)时，`.tooltip()`所有`<img>`标签上都会运行，并因此删除它们的属性，因此当您保存此页面时，该标签`title`没有`title`属性。`<img>`因此`.tooltip()`，在保存的页面上调用时，找不到任何可以制作工具提示的内容。

# linux - 为什么默认情况下不启用 arp ignore/annouce

> ID：12052861
> 
> 赞同：3
> 
> 时间：2012-08-21T10:21:53.550
> 
> 标签：linux, debian, arp

我有一个需要经验才能回答的具体问题：

为什么 arp_ignore / arp_announce 在 linux 安装（例如 debian ）上默认不启用，是否有特定原因？

从错误的网络接口接收 arp 答案的兴趣是什么？

谢谢你的帮助。

问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:47:32.517

这不是 Debian 特定的，默认来自 Linux。

检查[https://bugzilla.redhat.com/show_bug.cgi?id=168960](https://bugzilla.redhat.com/show_bug.cgi?id=168960)和[David Miller](http://en.wikipedia.org/wiki/David_S._Miller)的回复：

> 这种行为与 Linux IPV4 堆栈坚持基于主机的 IPV4 地址模型一致，而不是基于接口的模型，这几乎是您所要求的。
> 
> 两种寻址模型都由 RFC 描述，并且完全有效。
> 
> 这不应该改变，也不是错误。如果您想要不同的行为，可以调整可调参数，但这并不意味着它们默认适合所有人。

请参阅[RFC 1122，3.3.4.2 多宿主要求](https://www.rfc-editor.org/rfc/rfc1122#section-3.3.4.2)（强 ES 模型，弱 ES 模型）。

# perl - 如何使用 getaddrinfo 获取通配符地址

> ID：12052864
> 
> 赞同：3
> 
> 时间：2012-08-21T10:22:16.413
> 
> 标签：perl, ipv6, getaddrinfo

交叉发帖：[http ://www.perlmonks.org/?node_id=988678](http://www.perlmonks.org/?node_id=988678)

我是 perl 的新手。我正在尝试使用 getaddrinfo 获取所有通配符接口（我使用的是 Socket6（IO:Socket:IP 在我的 Windows 机器上无法正常工作）），例如：

```
use Socket;
use Socket6;

@res = getaddrinfo('<wildcard>', 3786, AF_UNSPEC, SOCK_STREAM);

while(scalar(@res)>=5){

    ($family, $socktype, $proto, $saddr, $canonname, @res) = @res;
    ($host, $port) = getnameinfo($saddr, NI_NUMERICHOST | NI_NUMERICSERV);
    print ("\nhost= $host port = $port");
} 
```

我想知道我应该为 placeholder 使用什么值，以便在结果中获得 IPv4 和 IPv6 通配符地址（0.0.0.0 和 ::），这样我就可以独立于我正在使用的机器绑定到它（IPv4 或 IPv6）。在 'c' 中指定一个空主机名指针可以完成这项工作，对于 perl 我尝试了 '', undef 但它们返回环回地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:10:45.873

如果它用于本地绑定，您将需要提供`AI_PASSIVE`提示。

```
use strict;
use warnings;

use Socket qw( :addrinfo SOCK_STREAM );

my ( $err, @res ) = getaddrinfo( undef, 3786, {
  socktype => SOCK_STREAM,
  flags => AI_PASSIVE,
} );
die $err if $err;

for my $res ( @res ) {
  my ( $err, $addr, $port ) = getnameinfo( $res->{addr}, NI_NUMERICHOST|NI_NUMERICSERV );
  die $err if $err;
  print "Addr=$addr port=$port\n";
} 
```

这打印

```
$ perl gai.pl
Addr=0.0.0.0 port=3786
Addr=:: port=3786 
```

* * *

另外，作为我的作者，`IO::Socket::IP`我很想知道为什么它对你不起作用——也许你可以把它作为一个错误提出来？[https://rt.cpan.org/Dist/Display.html?Queue=IO-Socket-IP](https://rt.cpan.org/Dist/Display.html?Queue=IO-Socket-IP)

# jquery-ui - 在jqmobile中组合复选框和列表

> ID：12052872
> 
> 赞同：0
> 
> 时间：2012-08-21T10:22:38.520
> 
> 标签：jquery-ui, jquery-mobile, user-interface

嗨，我正在为我正在编写的应用程序尝试 jqmobile。喜欢内置的样式和功能，但找不到任何东西来满足我希望是相当普遍的要求。我想要实现的是这样的：

[] 对象 1 >

[] 对象 2 >

[] 对象 3 >

[] 对象 4 >

（NB [] 代表一个复选框）

单击对象名称旁边的复选框将选中该框以启用“多重编辑”功能

单击对象名称将触发单独的事件以仅编辑该对象

有什么内置的东西可以解决这个问题，还是我应该只编码/设置自己的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:22:45.843

从 JQuery Mobile 1.2.0 开始，我看不到对这种常见 UI 列表结构的直接支持。但是你可以接近这个：

```
<ul data-role="listview" data-split-icon="arrow-r" data-split-theme="d">
    <li data-role='fieldcontain'>
        <a href='javascript:void(0);'>
            <label><input type='checkbox'/>Item 1</label>
        </a>
        <a href='#'></a>
    </li>
</ul> 
```

在这里看到它：http: [//jsfiddle.net/x5fJW/2/](http://jsfiddle.net/x5fJW/2/)

我对它的外观并不完全满意。它基本上是几个笨重的按钮和锚点共享一个列表项。但在功能上，它可以按我的意愿工作。

对于您想要的功能，您需要将 onclick 处理程序与复选框、其标签以及可能的 li 相关联。我不太确定您对“多重编辑”功能的设想。

我尝试了其他列表项排列，使它们包含复选框、标签和可点击箭头。在所有情况下，我都想使用一个保持可主题化的 JQM 箭头。但是在复选框的标签内放置 JQM 箭头图像（这样我就可以正确浮动它）从来没有奏效。

JQM 的增强过程总是用另一个复选框覆盖我的箭头：-( 因此，我不得不恢复到这种方法。好处是未来的 JQM 版本不需要维护（即重新破解）黑客。

尽管可以关闭 JQM 增强，但它似乎只在页面级别起作用。我无法让它仅应用于标签元素内的一个跨度元素。

顺便说一句，我删除了大多数通常围绕复选框的表单相关元素。那是因为，我使用复选框更改来通知我做某事。我不发布他们的数据。

我很想知道 JQuery/JavaScript 向导是如何解决这个问题的，即制作一个外观更优雅的列表项，其中包含复选框、标签和可点击箭头。

# javascript - Jquery 处理提交按钮的点击事件而不中断表单发布

> ID：12052879
> 
> 赞同：3
> 
> 时间：2012-08-21T10:22:55.780
> 
> 标签：javascript, c#, jquery, asp.net-mvc, jquery-events

我有一个提交按钮和以下代码，一旦单击它就会执行某些操作：

```
<input name="Update" class="LongSubmit" id="Update" type="submit" WaitingValue="Updating..." value="Update"/>

        $('.LongSubmit').click(function() {
            $(this).attr('disabled', 'disabled');
            $(this).addClass('AjaxInProgress');
            $(this).val($('.LongSubmit').attr('WaitingValue'));
            $(this).closest('form').submit(); // Added so it submits the form
        }) 
```

我发现当我添加这个没有注释行的处理程序时，表单没有被提交，所以我添加了它，现在表单确实被提交了。

但是，如果我单击提交按钮以通常在帖子中单击表单，则有 key `Update`，但是当我在单击处理程序中以编程方式执行此操作时，该 key 不存在。

**如何处理提交按钮的单击事件而不影响表单的 POST（即`update`那里有密钥）？
（或者我怎样才能完全模仿它，就好像处理程序不在那里一样？）**

* * *

正如 Zefiryn 指出的那样，这是因为禁用了按钮，但是我确实想这样做以防止多次点击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:04:26.047

如果您不禁用提交按钮，则可以使用其他技术来阻止重复提交。例如：

```
var submitFlag = 0;
$(function(){
    $('form').submit(function(){
        return submitFlag++ == 0;
    });
}); 
```

这将阻止任何重复提交您的表单。该标志将在页面重新加载或回发时重置（如果您使用 Ajax，您可以扩展它以在 ajax 响应上重置此标志）。这可以帮助你吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:41:22.490

我已经设法在 Zefiryn 的帮助下解决了这个问题，方法是仅在提交表单后禁用按钮：

```
 $(function() {

        $('.LongSubmit').click(function() {
            $(this).closest('form').submit();
            $(this).addClass('AjaxInProgress');
        })

        function DisableAjaxButtons() {
            $('.AjaxInProgress').val($('.AjaxInProgress').attr('WaitingValue'));
            $('.AjaxInProgress').attr('disabled', 'disabled');
        }

        $('form').submit(function() {
            setTimeout(DisableAjaxButtons, 1);
        })
    }); 
```

我仍然想看看是否有人对此（IMO）有任何想法，一些创建计时器的黑客解决方案只是在提交表单后发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:27:48.333

密钥更新来自更新输入。它是提交按钮，但提交按钮总是与 POST 一起发送，所以我不知道问题出在哪里。如果您想从 POST 中删除此字段，您可以更改`<input>`为`<button>`（或任何其他标签）并在其上添加将提交表单的点击处理程序。

# java - 在 JasperReports 服务器中运行预先存在的审计报告时出现异常

> ID：12052880
> 
> 赞同：0
> 
> 时间：2012-08-21T10:23:01.913
> 
> 标签：java, jasper-reports, weblogic, jasperserver

*在JasperReports Server*中运行任何预先存在的审计报告时，我遇到了异常。

我已经在我的*WebLogic中集成了**JR 服务器*。

 *如果我错过了任何配置，谁能告诉我。

例外是：

```
avax.naming.NameNotFoundException: While trying to look up comp/env/jdbc/jasperserver 
in /app/webapp/jasperserver-pro/396844516.; 
remaining name 'comp/env/jdbc/jasperserver' 
at weblogic.jndi.internal.BasicNamingNode.newNameNotFoundException(BasicNamingNo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:23:08.997

在 Tomcat6 中，您有一个 context.xml 文件，其内容如下：

```
<Resource name="jdbc/jasperserver" auth="Container" type="javax.sql.DataSource"
    maxActive="100" maxIdle="30" maxWait="10000"
    username="postgres" password="12345"
    driverClassName="org.postgresql.Driver"
    validationQuery="SELECT 1"
    testOnBorrow="true"
    url="jdbc:postgresql://localhost:5432/jrs47_repo"  /> 
```

然后将其查找为“java:comp/env/jdbc/jasperserver”以访问存储库并访问该审计报告。

我不太了解WebLogic。您能够使用 JRS 的事实意味着您正确连接到存储库。似乎您需要在某处指出审计域需要为已经运行的存储库连接使用正确的 JNDI 名称。*

# jquery - jQuery UI 选项卡显示为垂直网格 - 最后选择的制表符设计

> ID：12052884
> 
> 赞同：1
> 
> 时间：2012-08-21T10:23:17.467
> 
> 标签：jquery, css, jquery-ui, jquery-ui-tabs

使用 jQuery 1.7.1 和 jQuery UI 1.8.21。

我正在为我的**自定义 jQuery UI Tabs**中的一个错误而苦苦挣扎。我的标签不是通常的水平类型，我将它们垂直显示（固定宽度）作为某种网格，我的内容在右侧（见下图）。

现在我的问题是，**每当我选择该行的最后一个选项卡**(5,10,15,...) 时，一切都会下降，并且 6 低于 5。右图说明了问题：

![在此处输入图像描述](../Images/175d241da7bc91a41fc2498e679563d8.png) ![在此处输入图像描述](../Images/f164be411481c64b12ebb2d02ea874c3.png)

使用 Tabs 的原因是我可以使用之前项目中的大约 30k 行。

这是我的**垂直标签**：

```
$("#chapters")
    .tabs({ ... })
    .addClass('ui-tabs-vertical ui-helper-clearfix'); 
```

我的**CSS**，它包含很多测试和错误以及无用的部分，但仍然：

```
.ui-tabs-vertical .ui-tabs-nav
{
    padding: 2px;
    float: left;
    width: 185px;
    display:inline;
}
.ui-tabs-vertical .ui-tabs-nav li
{
    width:30px;
    height:30px;
    margin: 2px;
    padding:0;
    display:inline;
}
.ui-tabs-vertical .ui-tabs-nav li a
{
    display:block;
    margin:0;padding:0;width:100%;height:100%;
}
.ui-tabs-vertical .ui-tabs-nav li a span
{
    display:block;
    padding:0;
    margin:0;
    width:100%;
    height:100%;
    text-align: center;
    line-height: 30px;
    vertical-align: middle;
}
.ui-tabs-vertical .ui-tabs-panel
{
    padding: 3px;
    padding-left:200px;
    max-width: 548px; /* = 768px -10-paddings */
}
.ui-tabs-vertical .ui-state-active
{
    border: 0 solid #000000;
}
.ui-tabs-vertical .ui-tabs-selected
{
    padding-bottom: 0 !important;
    border: 0 solid #000000;
} 
```

注释中要求的**HTML**，它完全**是通过 JS 生成**的，因为有很多算法或多或少地随机处理这些选项卡，所以这里是结构：

```
<div id="chapters" style="position:relative" class="ui-tabs">
    <ul>
    <!-- li tags coming from a for-loop -->
        <li>
            <a href="#800001"> <!-- random id but matching divs order -->
                <span style="float:left">1</span> <!-- 1,2,3... -->
            </a>
        </li>
        <!-- ... -->
        <div id="800001" class="ui-tabs-hide">
            <div id="800001_content">
                <!-- content is loaded here later... (xml parsing, lazy loading system,...) -->
            </div>
        </div>
    <!-- end of loop -->
    </ul>
</div> 
```

这是**我**到目前为止发现的：

*   将 jQuery 更新到 1.8.0，没有变化。
*   将 jQuery UI 更新到 1.8.23，没有变化。
*   删除 ui-tabs-selected live with firebug，没有结果。
*   与萤火虫一起移除了 ui-state-active ，没有结果。
*   从选项卡（css的最后一部分）中删除了边框，没有结果。
*   删除了 ui-tabs-selected 和 ui-state-active，设计不会中断。
*   在 select 或 show 事件中使用 jQuery 删除了 ui-tabs-selected 和 ui-state-active。

从我上一个结果来看，我猜想 jQuery UI Tabs 正在将一些 CSS 应用到我需要 remove.tab 的选定选项卡上。不幸的是，删除这些类会破坏选项卡的功能，无法设置 .tabs("option","selected") 它只是转到第一个选项卡，当然我需要它。所以我查看了这个小部件的代码，但没有任何运气......

我愿意接受**任何类型的解决方案**，CSS、Javascript、手掌甚至洗脑。如果 .tabs() 是我的问题的根源，我可以想象将 .verticalTabs() 作为 .tabs() 的修改克隆。

我已经通过隐藏我的选项卡并使用事件创建自定义网格来选择选项卡来想象解决方法，但我宁愿找到另一条路径。:-)

**在此先感谢您的帮助！**

JSFiddle 试用：http: [//jsfiddle.net/zumproductions/v26pE/](http://jsfiddle.net/zumproductions/v26pE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:45:22.500

如果`.ui-tabs-selected`从元素中删除类，`li`问题就会消失。所以里面有东西。特别是看起来以下样式是问题所在：

在默认 css 中：

```
.ui-tabs .ui-tabs-nav li.ui-tabs-selected {
   margin-bottom: 0;
} 
```

您的自定义 CSS：

```
.ui-tabs-vertical .ui-tabs-selected {
    border: 0 solid #000000;
} 
```

要修复它，您可以设置以下样式：`margin-bottom: 2px`和`border 1px solid transparent`

更新了 jsfiddle：http: [//jsfiddle.net/v26pE/3/](http://jsfiddle.net/v26pE/3/)

# regex - wxWidget，正则表达式，wxRegEx，检查浮点数

> ID：12052886
> 
> 赞同：-3
> 
> 时间：2012-08-21T10:23:33.627
> 
> 标签：regex, wxwidgets

请帮助我处理正则表达式本身。我正在学习它。我不需要替换代码。

我正在使用 VS2008 (C++) 开发 wxWidget 2.8.12。我想检查 TEST_STRING 是否是浮点数。（`-0.1`、`0.1`等`1`）。我认为表达式本身是正确的，我通过工具检查过。我对 wxWidget 有误吗？

```
wxString tmpStr = TEST_STRING;
wxRegEx reNegativeFloatNum(_("^[-]?[0-9]*\\.?[0-9]+$"));
bool tmp = reNegativeFloatNum.Compile(tmpStr);
     tmp = tmp && reNegativeFloatNum.IsValid();
if ( tmp && reNegativeFloatNum.Matches(tmpStr))
{
    //Do something
}
else
{
    //Do something else
} 
```

我真正的问题是为什么正则表达式不起作用？如果我输入“a”-“Z”，则 Matches() 返回“真”。有谁知道吗？我只是想学习正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:57:54.813

由于 OP 真的想使用正则表达式，我详细查看了它，原来的正则表达式对我来说很好。请注意，您不需要`_()`在正则表达式字符串周围使用，因为这不是您需要翻译的东西（`_`是 的简短同义词`wxTRANSLATE()`）并且`Compile()`已经由 ctor 调用。所以这里有一个较短的版本：

```
#include <wx/init.h>
#include <wx/regex.h>

int main(int argc, char **argv)
{
    wxInitializer init;
    if ( !init.IsOk() ) {
        puts("Failed to initialize wxWidgets.");
        return 1;
    }

    wxRegEx re("^[-]?[0-9]*\\.?[0-9]+$");
    return re.Matches(argv[1]);
} 
```

它按预期工作：

```
 % ./a.out 123 || echo matches
    matches
    % ./a.out a-Z || echo matches
    <<<nothing>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:37:43.357

您不需要为此任务使用正则表达式。转换数字并测试它是否转换为负数。

```
if ( atof( tmpStr.c_str() < 0 ) { 
  // negative number
} else {
  // positive or not a number
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:28:07.560

正如 ravenspoint 所写，对于这样的事情，你真的不需要正则表达式（尽管你也可以使用它们，当然，如果你真的想的话，出于某种原因）。

在 wxWidgets 中，做你想做的最简单的方法是

```
double num;
if ( tmpStr.ToDouble(&num) ) {
    if ( num < 0 )
        ...
}
//else: it's not a number at all 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:11:17.103

两种方法都有效：
方法1：

```
wxRegEx re;
bool tmp = re.Compile(wxT("^[-]?[0-9]*\\.?[0-9]+$"));
if ( tmp && re.Matches(StrToBeTested))
{
    //Do sth.
} 
```

方法二：

```
wxRegEx re(wxT("^[-]?[0-9]*\\.?[0-9]+$"));
if (re.Matches(StrToBeTested))
{
    //Do sth.
} 
```

根据VZ的回答，方法2不需要再次编译。它确实有效。
我只是在 wxRegEx::Compile 的参数上犯了一个愚蠢的错误。感谢所有回复。

# ubuntu - 创建 Debian 软件包失败

> ID：12052892
> 
> 赞同：1
> 
> 时间：2012-08-21T10:23:51.303
> 
> 标签：ubuntu, debian, packages

我正在尝试构建一个 Debian 软件包。当我尝试再次构建它时，它失败了。

我有：

1.  `/home/debpackage/debianpackage_1.0.orig.tar.gz`
2.  上面的 tar 包含一个名为`debianpackage-1.0/`（其中包含各种包）的文件夹
3.  我提取了 tar，现在我有了 `/home/alon/debpackage/debianpackage_1.0.orig.tar.gz` `/home/alon/debpackage/debianpackage-1.0/`（提取的所有文件）

4.  在中`/home/alon/debpackage/debianpackage-1.0/`，我创建了一个名为“debian”的文件夹

5.  在`/home/alon/debpackage/debianpackage-1.0/`我有：（ `./debian/changelog/copyright`空） `./debian/changelog/rules` `./debian/changelog/changelog` `./debian/changelog/compact`（包含“8”） `./debian/changelog/control` `./debian/changelog/source/format`（包含 3.0（被子））

`rules`包含：

```
#!/usr/bin/make -f

%:
        dh $@

override_dh_auto_install:
        $(MAKE) DESTDIR=$$(pwd)/debian/debianpackage prefix=/usr install 
```

当我尝试运行时`./debian/debuild -us -uc`，我得到：

```
dpkg-buildpackage -rfakeroot -D -us -uc
dpkg-buildpackage: warning: using a gain-root-command while being root
dpkg-buildpackage: export CFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export CPPFLAGS from dpkg-buildflags (origin: vendor): 
dpkg-buildpackage: export CXXFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export FFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export LDFLAGS from dpkg-buildflags (origin: vendor): -Wl,-Bsymbolic-functions
dpkg-buildpackage: source package debianpackage
dpkg-buildpackage: source version 1.0-1
dpkg-buildpackage: source changed by root <alon.zeiri@gmail.com>
 dpkg-source --before-build debianpackage-1.0
dpkg-buildpackage: host architecture amd64
 fakeroot debian/rules clean
dh clean
dh: Compatibility levels before 5 are deprecated.
   dh_testdir
   dh_auto_clean
dh_auto_clean: Compatibility levels before 5 are deprecated.
   dh_clean
dh_clean: Compatibility levels before 5 are deprecated.
 dpkg-source -b debianpackage-1.0
dpkg-source: info: using source format `3.0 (quilt)'
dpkg-source: info: building debianpackage using existing ./debianpackage_1.0.orig.tar.gz
dpkg-source: info: building debianpackage in debianpackage_1.0-1.debian.tar.gz
dpkg-source: info: building debianpackage in debianpackage_1.0-1.dsc
 debian/rules build
dh build
dh: Compatibility levels before 5 are deprecated.
   dh_testdir
   dh_auto_configure
dh_auto_configure: Compatibility levels before 5 are deprecated.
   dh_auto_build
dh_auto_build: Compatibility levels before 5 are deprecated.
   dh_auto_test
dh_auto_test: Compatibility levels before 5 are deprecated.
 fakeroot debian/rules binary
dh binary
dh: Compatibility levels before 5 are deprecated.
   dh_testroot
   dh_prep
dh_prep: Compatibility levels before 5 are deprecated.
   dh_installdirs
dh_installdirs: Compatibility levels before 5 are deprecated.
   debian/rules override_dh_auto_install
make[1]: Entering directory `/home/alon/debpackage/debianpackage-1.0'
/usr/bin/make DESTDIR=$(pwd)/debian/debianpackage prefix=/usr install
make[2]: Entering directory `/home/alon/debpackage/debianpackage-1.0'
make[2]: *** No rule to make target `install'.  Stop.
make[2]: Leaving directory `/home/alon/debpackage/debianpackage-1.0'
make[1]: *** [override_dh_auto_install] Error 2
make[1]: Leaving directory `/home/alon/debpackage/debianpackage-1.0'
make: *** [binary] Error 2
dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit status 2
debuild: fatal error at line 1335:
dpkg-buildpackage -rfakeroot -D -us -uc failed 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:36:14.177

为什么你是`debian/changelog`一个目录？你不应该有`debian/changelog/rules`等等`debian/changelog/changelog`。它应该是`debian/changelog`（常规文件）`debian/rules`，，`debian/control`......你的目录结构发生了一些不好的事情。

你应该`cd debian; mv changelog oopsdir; mv -i oopsdir/* .;rmdir oopsdir`

或者干脆杀死整个事情并重新开始，因为您不知道导致`changelog`成为目录的灾难不会影响其他任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:08:41.040

似乎您的上游源（“debianpackage-1.0”）的makefile没有`install`目标，但在您明确调用的`override_dh_auto_install`目标中`debian/rules``make install`

可能的解决方案：

*   将`install`目标添加到 debianpackage-1./Makefile

    如果您不在上游，则应通过 debian/patches 中的路径执行此操作

*   使用`override_dh_auto_install`目标手动将文件安装到适当的位置

顺便说一句，你为什么`dh_auto_install`首先要覆盖？似乎您没有添加任何内容，这不是自动调用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T16:48:34.177

如果我`cmake`之前在源代码中运行，我通常会遇到此错误`debuild`。`debuild/dpkg-buildpackage`非常特别，因为它需要在干净的源上运行。我建议您尝试通过使用`dh_make --createorig`干净的源而不是手动创建它来生成 debian 文件夹及其内容。`debuild`除非源存档的创建者在其中包含已编译的代码或自动生成的文件，否则之后应该可以正常工作。

# php - 使用类变量的调用和超时前的空数组？

> ID：12052897
> 
> 赞同：0
> 
> 时间：2012-08-21T10:24:06.263
> 
> 标签：php, arrays, class, pdo

我遇到了最奇怪的问题。请帮忙。

我有一个用于扩展其他类对象的数据库对象。这样做时，我可以轻松地将结果集附加到类变量上，并从应用程序内部的任何位置静态调用结果。这是我的“选择”功能，我用它来设置参数：

```
 public static function select($where="", $bind="", $fields="*", $table="") {
        global $db;
        $object = get_called_class();
            if(empty($table))
                $table = static::$table;

        $sql = "SELECT " . $fields . " FROM " . $table;
        if(!empty($where))
            $sql .= " WHERE " . $where;
        $sql .= ";";
        return $db->run($object, $sql, $bind);
} 
```

这是数据库类函数运行，它实际执行上述函数 SQL 查询和参数，然后将其返回到一个对象中，以便我可以轻松地使用该对象：

```
 public function run($object, $sql, $bind='') {
        $this->sql = trim($sql);
        $this->bind = $this->cleanup($bind);

        try {
            $pdostmt = $this->prepare($this->sql);
            if($pdostmt->execute($this->bind) !== false) {
                switch(strtok($this->sql, ' ')) {
                    case 'DESCRIBE':
                    case 'PRAGMA':
                        return $pdostmt->fetchAll(PDO::FETCH_ASSOC);
                    break;
                    case 'DELETE': 
                    case 'INSERT':
                    case 'UPDATE':
                    case 'REPLACE':
                    case 'TRUNCATE':
                        return $pdostmt->rowCount();
                        break;
                    default:
                        if($object == 'SessionHandler') {
                            if($pdostmt->rowCount() === 1) {
                                return $pdostmt->fetch(PDO::FETCH_ASSOC);
                            } else {
                                return $pdostmt->fetchAll(PDO::FETCH_ASSOC);
                            }
                        } else {
                            if($pdostmt->rowCount() === 1) {
                                $pdostmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, $object); 
                                return $pdostmt->fetch();
                            } else {
                                $pdostmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, $object);
                                return $pdostmt->fetchAll();
                            }

                        }
                        break;
                }

            }
        } catch(PDOException $e) {
            $msg = 'Last SQL Query: ' . $this->sql . "\n";
            $msg .= 'SQL Error Message: ' . $e->getMessage();
            Logger::logToFile(__CLASS__, $msg);
            die($msg);
        }
    } 
```

当我使用单个类并从另一个页面提取信息时，这些功能非常有用。但请考虑以下几点：

```
 class ACL extends DatabaseObject {
        private $_permissions = array();
        private $_userid = 0;
        private $_user_roles = array();

        public function __construct($userid = 0) {
            global $session;
            if($userid == 0) {
                $this->_userid = $session->userid;
            } else {
                $this->_userid = $userid;   
            }
            $this->get_user_roles($this->_userid);
            $this->get_all_roles();
        }

        public function get_user_roles($userid = 0) {
            $bind = array('userid' => $userid);
            $roles = self::select('userid = :userid', $bind, '*', 'user_roles');
            if(is_object($roles)) {
                $this->_user_roles[] = $roles->roleid;
            } else {
                foreach($roles as $role) {
                    $this->_user_roles[] = $role->roleid;
               }
            }
        }

        public function get_all_roles($format = 'id') {
            $format = strtolower($format);
            echo $this->_userid . '<br />';
        }
    } 
```

在上面的ACL类中，在类的构造函数中，我将类的_userid变量设置为等于会话变量……但是当我使用`$this->_userid`调用get_user_roles函数时，应用程序崩溃了？另外，当我打印出`$this->_userid`get_all_roles 函数时，返回三个值而不是一个？此外，我在此类中运行的所有查询都将空数组附加到结果的前面。空数组的数量等于结果的数量。那么最后一个数组会保存所有的对象吗？

请帮忙，我很困惑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:00:06.347

根据我上面的评论，这是我现在使用的更新的 DB Run Method。

```
 public function run($object, $sql, $bind='', $type='object') {
        $this->sql = trim($sql);
        $this->bind = $this->cleanup($bind);

        try {
            $pdostmt = $this->prepare($this->sql);
            if($pdostmt->execute($this->bind) !== false) {
                switch(strtok($this->sql, ' ')) {
                    case 'DESCRIBE':
                    case 'PRAGMA':
                        return $pdostmt->fetchAll(PDO::FETCH_ASSOC);
                        break;
                    case 'DELETE': 
                    case 'INSERT':
                    case 'UPDATE':
                    case 'REPLACE':
                    case 'TRUNCATE':
                        return $pdostmt->rowCount();
                        break;
                    default:
                        if($type == 'array') {
                            if($pdostmt->rowCount() === 1) {
                                return $pdostmt->fetch(PDO::FETCH_ASSOC);
                            } else {
                                return $pdostmt->fetchAll(PDO::FETCH_ASSOC);
                            }
                        } elseif($type == 'object') {
                            if($pdostmt->rowCount() === 1) {
                                $pdostmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, $object); 
                                return $pdostmt->fetch();
                            } else {
                                $pdostmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, $object);
                                return $pdostmt->fetchAll();
                            }

                        }
                        break;
                }

            }
         } catch(PDOException $e) {
            $msg = 'Last SQL Query: ' . $this->sql . "\n";
            $msg .= 'SQL Error Message: ' . $e->getMessage();
            Logger::logToFile(__CLASS__, $msg);
            die($msg);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:24:12.597

确实很奇怪。您能否发布错误日志中的任何输出，以查看您的应用程序崩溃的位置？乍一看，我真的找不到任何明显错误的地方，但错误大多在细节上。

# c - 圆括号内的指针

> ID：12052899
> 
> 赞同：4
> 
> 时间：2012-08-21T10:24:14.450
> 
> 标签：c, pointers, brackets

```
void push(struct node** head_ref, int new_data)
{
    /* allocate node */
    struct node* new_node =
            (struct node*) malloc(sizeof(struct node));

    /* put in the data  */
    new_node->data  = new_data;

    /* link the old list off the new node */
    new_node->next = (*head_ref);   

    /* move the head to point to the new node */
    (*head_ref)    = new_node;
} 
```

如果我没记错的话，将括号放在指针上意味着调用函数？如果这是真的，我真的不明白为什么 *head_ref 上有括号。我喜欢解释一下为什么我需要`*head_ref`在这段代码中加上括号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:25:45.133

在这种特殊情况下，方括号除了阐明程序员的意图外没有其他用途，即他们想要取消引用`head_ref`.

注意`head_ref`是一个指向指针的指针，所以在这种情况下，`new_node->next`被设置为指向链表的原始头，然后指向的指针`head_ref`被更新为指向`new_node`现在是链表的开头。

正如迈克尔·克雷林（Michael Krelin）在下面指出的那样，将括号括在指针周围并不意味着它是调用函数或指向函数的指针。如果你看到了这个：`(*head_ref)()` **那么**这将是对 指向的函数的调用`head_ref`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:26:54.717

调用函数看起来像这样：

```
(*some_func_pointer)(); 
```

你的情况下的括号是没有意义的。

此外，无需在 C中转换`malloc`( ) 的结果。`void*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:29:31.303

在您的情况下，它只是在此处取消引用指针。

你说的那个：**“把括号放在指针上意味着调用一个函数”**

如果 * 之后的内容是函数指针，则为 true。基本上它取决于指针的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T10:33:11.110

这些括号仅用于分组。

通过指向函数的指针调用函数：

```
(* funcPointer)(param1,param2)
^             ^^         ^
|             |`---------`--- These brackets tell the compiler 
|             |               it's a function call
|             |
`-------------`---------------These brackets just group the * 
                              with the variable name 
```

对于不带参数的函数，它只是`()`

您的示例在变量后没有一对括号，因此它不是函数调用。

# java - 在 Netbeans 项目中无法获得弹出窗口并且没有响应

> ID：12052900
> 
> 赞同：1
> 
> 时间：2012-08-21T10:24:16.600
> 
> 标签：java, eclipse, swing, netbeans

我正在修改我的 Java 程序的 GUI。完成 GUI 设计并将 Netbeans 项目导入 Eclipse 后，我发现当出现弹出窗口（例如，错误消息）时，程序完全没有响应，但其他功能工作正常。

为什么会这样？项目目录包含 Netbeans 或 Eclipse 所需的两个文件，这个原始目录用于在 Mac 上工作。我将它导入到 Windows 上的 Nebteas 并调整了 GUI 组件的大小，因为我的 GUI 在 Windows 上的外观完全不同，而且我不知道 Swing 的“外观和感觉”。

当我从 Netbeans 导入到 Eclipse 时，我想知道项目目录中的文件是否被修改或不合适。如果有人可以给我任何帮助，将不胜感激。

# php - codeigniter 上传 KML

> ID：12052901
> 
> 赞同：1
> 
> 时间：2012-08-21T10:24:19.643
> 
> 标签：php, codeigniter, file-upload, kml

我需要使用 CI 在我的项目中上传一个 kml 文件，但该文件类型是不允许的。我尝试使用 kml 和 xml，但它会抛出错误消息“不允许您尝试上传的文件类型。”。CI上传文件是否需要任何额外的配置？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:29:21.783

文件上传类中存在错误 - 请参阅此线程以获取帮助 - [http://codeigniter.com/forums/viewthread/204725/](http://codeigniter.com/forums/viewthread/204725/)

您可以使用以下方法测试是否可以成功上传文件

```
$config['allowed_types'] = '*'; 
```

因此，如果它有效，那么也许您可以坚持使用它，然后使用 $_FILE 属性过滤文件 mime 类型，或者您可以使用类似的东西检查文件扩展名`$ext = pathinfo($filename, PATHINFO_EXTENSION);`并与所需的文件进行比较，或者只是按照上面线程中的建议进行操作。

如果您使用的是旧版本的 CI，最好升级到最新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T09:59:00.920

您需要像这样声明 mimes 类型

```
'kml'   =>  'application/vnd.google-earth.kml+xml' 
```

在 /application/config/mimes.php

# xcode - 在最新的 xcode (4.4) for iphone 中运行模拟器时，按钮会从屏幕上消失

> ID：12052904
> 
> 赞同：0
> 
> 时间：2012-08-21T10:24:40.553
> 
> 标签：xcode, button, uiviewcontroller, storyboard, visible

![](../Images/62be82150d9cbe3d922aa4a94cd0cd94.png)

我刚刚开始学习 xcode，我处于第一步。我正在追随头一本书。现在没有像那本书那样的 xib 文件，而是故事板视图。

我添加了一个基本按钮和标签并运行模拟器。按钮将退出 iphone 模拟器的屏幕视图。

为什么我选择iphone界面时屏幕分辨率不一样？它比模拟器上可见的区域大得多。

为什么按钮离开屏幕而不是中心？

# javascript - Node.js 阻塞了事件循环？

> ID：12052907
> 
> 赞同：2
> 
> 时间：2012-08-21T10:24:57.913
> 
> 标签：javascript, node.js

我正在编写一个 API，但我陷入了根据传入请求混合异步和同步代码的问题，请看下面的示例。

**路由.js**

```
module.exports = [
    {
        method: 'GET',
        path: '/',
        controller: 'main',
        action: 'main',
        description: 'lists the API functionality',
        access: 'auth'
    },
    {
        method: 'POST',
        path: '/users',
        controller: 'users',
        action: 'create',
        description: 'creates a new user',
        fields: {
            fullName: {
                format: {
                    min: 2,
                    max: 64,
                    minWords: 2,
                    disableDoubleSpaces: true
                },
                description: 'the full name of the new user',
                examples: 'Thomas Richards, Richard Jones, Michael J. Fox, Mike Vercoelen, John Johnson'
            },
            email: {
                format: {
                    min: 2,
                    max: 64,
                    maxWords: 1,
                    match: 'email'
                },
                description: 'the email address of the new user',
                examples: 'mike@grubt.com, lilly@gmail.com, thomas.richards@mail.com, peter@mymail.com'
            },
            password: {
                format: {
                    min: 2,
                    max: 64
                },
                description: 'the password of the new user',
                examples: '123abcdfg, 7373kEjQjd, #8klKDNfk'
            }
        }
    }
]; 
```

routes.js 文件基本上是 API 的一个非常重要的部分，它验证传入的数据，路由到正确的控制器/动作，并定义该方法是公共的，还是需要身份验证（基本身份验证）。

**api-server.js**

```
var http = require('http');
var url = require('url');
var os = require('os');
var dns = require('dns');

var apiServer = module.exports;
var routes = require('./routes.js'); // Routes file from above.

var req, res, controller, action, serverInfo, httpServer;

apiServer.start = function(){
  prepare(function(){
    httpServer = http.createServer(handleRequest).listen(3000);
  });
};

//
// We need to do this function, we need the local ip address of the 
// server. We use this local ip address in logs (mongoDb) so we can
// refer to the correct server.
//
function prepare(callback){
  var serverName = os.hostname();

  dns.lookup(serverName, function(error, address){
    if(error){
      throw error;
    }

    serverInfo = {
      name: serverName,
      address: address
    };

    callback();
  });
}

function getRoute(){
  // loops through routes array, and picks the correct one...
}

function getAuth(callback){
  // parses headers, async authentication (mongoDB).
}

function getRequestData(callback){
  // req.on('data') and req.on('end'), getting request data.
}

function parseRequestData(callback){
  // parse request data at this point.
}

function validateRequestData(callback){
  // loop through route fields (see routes.js) and validate this data with the ones
  // from the request.
}

function requireControllerAndCallAction(){
  // do actual job.
}

function handleRequest(request, response){
  req = request;
  res = response;

  req.route = getRoute(); // First step for a request, syncronous.

  if(req.route === false){
    // 404...
  }

  // If in the routing schema access was "auth", 
  // this route requires authentication, so do that...
  if(req.route.access === 'auth'){
    getAuth(function(error, user){
      if(error){ // 401 } else {
        req.user = user;
      }
    }
  }

  if(req.method === 'POST' || req.method === 'PUT'){

    // Async functions.
    getRequestData(function(){
      parseRequestData(function(){
        validateRequestData(function(){
          requireControllerAndCallAction();
        });
      });
    });
  } else {
    requireControllerAndCallAction();
  }
} 
```

如您所见，有些函数是异步的（getAuth、getRequestData），有些是同步的（parseRequestData、validateRequestData）。

现在事情是这样的：

请求 1\. 附带方法 POST、url '/users' 和数据：

*   全名 = '瑞克'
*   电子邮件：'rick@'
*   密码：'a'

所以我们循环遍历 API 的工作流程：

1.  获取当前路由（控制器：用户，操作：创建） 查看 routes.js 中的第二个数组元素

2.  获取请求数据和回调：解析数据 B. 验证数据

现在让我们想象一下，数据的验证需要 5 秒（这是延迟的，但只是举例），在验证期间，一个新的请求进来了，直到前一个请求完成才处理新的请求，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:39:28.830

如果它们是同步的并且确实需要 5 秒，那么是的，对于该服务器实例，请求将被阻止。这就是为什么阻塞调用（网络、数据库、文件系统等）调用是异步的至关重要的原因。事件循环必须保持循环或整个服务器阻塞。

[http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)

这篇文章的关键是：

> …然而，除了你的代码之外，一切都是并行运行的

这意味着昂贵的 I/O 应该是异步的，但您的代码可能会阻塞。但是，我们担心在服务器上阻塞通常是昂贵的 I/O。

“您的代码”通常只是处理来自长时间运行的 I/O 调用的回调，更新您的状态，然后触发另一个调用。但这就是它的美妙之处——当你更新你的状态时，它在主事件循环中，所以不需要多线程访问“你的”状态和代码。没有锁定，没有死锁等......但是异步和并行 I/O 的所有好处是昂贵的部分。

另一个关键点（5 秒的非 IO 工作会落入其中）是：

> 除了 I/O 调用，Node.js 期望所有请求都能快速返回；例如，CPU 密集型工作应该被拆分到另一个进程，您可以与该进程进行事件交互，或者使用 WebWorkers 之类的抽象。

另外，不要期待'auth'和'POST' | 'PUT' 是否会在同一个请求中发生？如果是这样，您可能会遇到问题。getAuth 看起来是异步的，但随后您立即转到 req.method 检查。那时，getAuth 仍然可以工作。如果您希望对 POST 和 PUT 进行身份验证，则可能需要使用 getAuth 异步方法包装该异步方法块。

# javascript - removeChild 每隔一段时间才工作一次

> ID：12052910
> 
> 赞同：2
> 
> 时间：2012-08-21T10:25:12.420
> 
> 标签：javascript

我尝试在下一秒放置一个元素，然后删除第二个元素，但它不起作用。看例子：http: [//jsfiddle.net/CZCGG/](http://jsfiddle.net/CZCGG/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:27:31.597

结果`getElementsByTagName`是一个活动节点列表。当您操作元素时，您拥有的伪数组将实时更新。

特别是每次循环时，您的`i`值都会跳得太远，因为您刚刚删除的元素*之后的元素现在具有该原始元素的索引。*

要解决这个问题，您应该从数组的末尾向后工作。这可确保每个元素在循环进行时保留其原始索引。

您还应该使用`Node.replaceChild`而不是`insertBefore`,`removeChild`序列

见[http://jsfiddle.net/alnitak/pfnGX/](http://jsfiddle.net/alnitak/pfnGX/)

```
var  span = document.getElementsByTagName("span");

for (var i = span.length - 1; i >= 0; --i) {
    var a = document.createElement("a");
    a.href = "http://jsfiddle.net/";
    a.innerHTML = "http://jsfiddle.net/ " + i; 

    var s = span[i];
    s.parentNode.replaceChild(a, s);
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:27:17.727

您正在对节点列表进行操作。每次您删除一个项目时，列表都会变短，所有内容都会随机排列……但您仍在增加索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:32:02.037

试试这个， [http://jsfiddle.net/gYwSq/1/](http://jsfiddle.net/gYwSq/1/)

```
 var  span = document.getElementsByTagName("span");
    for(i=0; span.length!=0; i++){
       var a = document.createElement("a");
       a.href = "http://jsfiddle.net/";
       a.innerHTML = "http://jsfiddle.net/ " + i; 
       span[0].parentNode.insertBefore(a, span[0]);
       span[0].parentNode.removeChild(span[0]);
    }​ 
```

# python - 在python中线程无限循环

> ID：12052912
> 
> 赞同：2
> 
> 时间：2012-08-21T10:25:18.057
> 
> 标签：python, multithreading

```
import threading
import time

class Eat(threading.Thread):
    def __init__(self, surname):
        self.counter = 0
        self.surname = surname
        threading.Thread.__init__(self)

    def run(self):
        while True:
            print("Hello "+self.surname)
            time.sleep(1)
            self.counter += 1
            print("Bye "+self.surname)

begin = Eat("Cheeseburger")
begin.start()

while begin.isAlive():
    print("eating...") 
```

在`begin`“吃”的过程中，我想打印“吃...”，但似乎即使在 1 秒后我也陷入了无限循环。为什么我会陷入无限循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:38:41.533

它处于无限循环中，因为您将无限循环运行：

```
def run(self):
    while True: 
```

固定版本可能如下所示：

```
def run(self):
    print("Hello "+self.surname)
    time.sleep(1)
    self.counter += 1
    print("Bye "+self.surname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:39:01.793

好吧..不确定其他所有内容，但是您正在使用`begin.start()`而不是`begin.run()`并且无论如何，`begin`这对于一个班级来说是一个可怕的名字。

运行它`run()`会给出以下输出：

```
>>> 
Hello Cheeseburger
Bye Cheeseburger 
```

然后它继续以你好......再见......你好......再见......一遍又一遍......

如果您提供所需的输出，可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:46:40.603

你的程序中有两个循环，

线程中的一个：

```
while True:
    print("Hello "+self.surname)
    time.sleep(1)
    self.counter += 1
    print("Bye "+self.surname) 
```

和一个在主程序中：

```
while begin.isAlive():
    print("eating...") 
```

该线程将始终处于活动状态，因为您`while true`在其中有一个没有结束的循环。

因此主程序中的线程也将是无限的，因为它总是在等待线程中的循环完成，而它不会。

您将不得不对线程内的循环进行限制，如下所示：

```
while self.counter < 20:
    print("Hello "+self.surname)
    time.sleep(1)
    self.counter += 1
print("Bye "+self.surname) 
```

或完全取出循环。这将阻止主程序卡住等待线程循环结束并修复两个无限循环。

# ios - 使可见的 ViewController 处于非活动状态

> ID：12052913
> 
> 赞同：0
> 
> 时间：2012-08-21T10:25:19.473
> 
> 标签：ios, uiviewcontroller, uiinterfaceorientation, uiwindow

我有 UIWindow 并且它的 rootViewController 有蓝色背景并允许各种方向改变：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

然后我用新的 rootViewController (SecondViewController) 创建新的 UIWindow：

```
UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

SecondViewController* secondVC = [[SecondViewController alloc] init];

window.rootViewController = secondVC;

window.windowLevel = UIWindowLevelStatusBar;
[window makeKeyAndVisible]; 
```

![在此处输入图像描述](../Images/84135a7aad4cc543c6db494db7db2054.png)

SecondViewController 只允许纵向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

对我来说最重要的是要像弹出窗口一样添加 SecondViewController 视图。所以用户可以看到以前的VC的背景。

但是当我旋转设备时，它会向我的 VC 询问 - (BOOL)shouldAutoRotate... 方法，并且我得到了横向模式，并且状态栏出现在横向模式下。

![在此处输入图像描述](../Images/c29f0389e77d8ade9f3fc5e83f35d428.png)

理想情况下，我想知道是否完全拒绝旋转（蓝色，黄色，状态栏不会旋转）。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:40:36.530

您可以在项目文件中设置允许的方向。

1.  单击项目树的顶层。
2.  在“目标”下的左栏中单击您的目标
3.  在“摘要”选项卡中，您可以选择“支持的设备方向”

# iphone - 如何启动和停止 NSTimer？

> ID：12052914
> 
> 赞同：34
> 
> 时间：2012-08-21T10:25:23.887
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nstimer

我开发秒表应用程序。在我的应用程序中，有两个 UIButtons`StartBtn`和`StopBtn`，而且我还使用`NSTimer`.

现在，我想`NSTimer`在用户单击时开始，`StartBtn`并在您单击时停止`StopBtn`。

我知道这`NSTimer`是通过方法停止`[MyTimerName invalidate];`但我不知道如何重新开始`NSTimer`？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-08-21T10:34:22.560

这个`NSTimer`类使用起来有点尴尬；与其将创建/销毁与开始/停止分开，不如将它们全部滚动在一起。换句话说，计时器在创建后立即启动，并在销毁后立即停止。

因此，您需要使用对象的*存在*作为`NSTimer`标志来指示它是否正在运行；像这样的东西：

```
// Private Methods
@interface MyClass ()
{
    NSTimer *_timer;
}
- (void)_timerFired:(NSTimer *)timer;
@end

@implementation MyClass

- (IBAction)startTimer:(id)sender {
    if (!_timer) {
        _timer = [NSTimer scheduledTimerWithTimeInterval:1.0f
                                                  target:self
                                                selector:@selector(_timerFired:)
                                                userInfo:nil
                                                 repeats:YES];
    }
}

- (IBAction)stopTimer:(id)sender {
    if ([_timer isValid]) {
        [_timer invalidate];
    }
    _timer = nil;
}

- (void)_timerFired:(NSTimer *)timer {
    NSLog(@"ping");
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-14T14:37:54.317

你总是可以用火来重新启动一个 NStimer

```
 [timer fire]; 
```

要停止它：

```
 [timer invalidate];
  //remember to set timer to nil after calling invalidate;
  timer = nil; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-21T10:34:14.437

您可以通过以下方式启动计时器

```
#define kRefreshTimeInSeconds 1
 NSTimer *myTimerName;
 .
 .
 myTimerName = [NSTimer scheduledTimerWithTimeInterval: kRefreshTimeInSeconds 
                                   target:self 
                                   selector:@selector(handleTimer:) 
                                   userInfo:nil
                                   repeats:YES]; 
```

然后委托函数：

```
-(void)handleTimer: (id) sender 
{       
   //Update Values in Label here
} 
```

并停止定时器

```
-(void)stopTimer: (id) sender 
{       
   if(myTimerName)
   {
       [myTimerName invalidate];
        myTimerName = nil;
   }
} 
```

# haskell - 递归数据结构如何在haskell中工作

> ID：12052917
> 
> 赞同：0
> 
> 时间：2012-08-21T10:25:32.267
> 
> 标签：haskell, recursion

这是 Haskell 中的递归数据结构，它是如何工作的？

```
data Expression
     = Var Variable
     | Num Integer
     | Plus  Expression Expression
     | Minus Expression Expression
     | Times Expression Expression
     | Div   Expression Expression

data Variable = A | B 
```

`Minus (Plus (Var A)(Var B)) (VarB)`: 这个表达式是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:41:17.143

通过将其子部分与相应[数据构造函数](http://www.haskell.org/haskellwiki/Constructor#Data_constructor)的类型递归匹配：

```
Minus    (Plus (Var A) (Var B))    (Var B)
Minus ::      Expression   ->     Expression  -> Expression

Plus           (Var A)             (Var B)
Plus  ::      Expression   ->     Expression  -> Expression

Var               A
Var   ::       Variable                       -> Expression

Var               B
Var   ::       Variable                       -> Expression

A     ::       Variable

B     ::       Variable 
```

# java - 基于子字符串的方法运行不正常

> ID：12052921
> 
> 赞同：0
> 
> 时间：2012-08-21T10:25:45.277
> 
> 标签：java, substring

我正在创建一组方法，这些方法根据输入字符串显示一行棋盘，并将其存储在我稍后将调用的字符串中。我的代码如下：

```
public class A1Program {

    public void start() {
        String inputString = "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO";
        int row = 1;
        int length = inputString.length();

    }

    private String extractRow(int row, String inputString) {
        String rowString1 = inputString.substring(row, row + 1);
        String rowString2 = inputString.substring(row + 6, row + 7);
        String rowString3 = inputString.substring(row + 12, row + 13);
        String rowString4 = inputString.substring(row + 18, row + 19);
        String rowString5 = inputString.substring(row + 24, row + 25);
        String rowString6 = inputString.substring(row + 30, row + 31);
        String rowString7 = inputString.substring(row + 36, row + 37);

        return rowString1 + "|" + rowString2 + "|" + rowString3 + "|" + rowString4 + "|" + rowString5
                + "|" + rowString6 + "|" + rowString7 + "|";

    }

    private void displayBoard(String extractRow) {
        System.out.println(extractRow + "-----------");
    }
} 
```

当我运行代码时，什么都没有显示，但我希望它显示板的一行......（extractRow）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:39:17.893

你永远不会调用 extractRow 和 displayBoard 方法。

在 start 方法中调用这些方法，您的代码将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:31:12.803

除了一旦你真正调用它后你的代码在行为上没有任何问题，你应该真正在一个循环中完成这项工作：

```
public static void main (String[] args) throws Exception {
  displayBoard(extractRow(0, "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"));
}
private static String extractRow(int row, String inputString) {
  final StringBuilder b = new StringBuilder();
  for (int i = 0; i < 37; i+=6) b.append(inputString.charAt(i)).append('|');
  return b.toString();
}
private static void displayBoard(String extractRow) {
  System.out.println(extractRow + "-----------");
} 
```

这将打印与您的代码相同的内容：

```
X|X|X|X|X|X|X|----------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:31:17.013

试试这个代码，它可能会打印出一些东西。

```
public class A1Program {

    public void start() {
        String inputString = "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO";
        int row = 1;
        int length = inputString.length();
        //check here
        displayBoard(extractRow(row, inputString));

    }

    private String extractRow(int row, String inputString) {
        String rowString1 = inputString.substring(row, row + 1);
        String rowString2 = inputString.substring(row + 6, row + 7);
        String rowString3 = inputString.substring(row + 12, row + 13);
        String rowString4 = inputString.substring(row + 18, row + 19);
        String rowString5 = inputString.substring(row + 24, row + 25);
        String rowString6 = inputString.substring(row + 30, row + 31);
        String rowString7 = inputString.substring(row + 36, row + 37);

        return rowString1 + "|" + rowString2 + "|" + rowString3 + "|" + rowString4 + "|" + rowString5
                + "|" + rowString6 + "|" + rowString7 + "|";

    }

    private void displayBoard(String extractRow) {
        System.out.println(extractRow + "-----------");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:39:22.340

公共类 A1Program {

```
private String extractRow(int row, String inputString) {
    String rowString1 = inputString.substring(row, row + 1);
    String rowString2 = inputString.substring(row + 6, row + 7);
    String rowString3 = inputString.substring(row + 12, row + 13);
    String rowString4 = inputString.substring(row + 18, row + 19);
    String rowString5 = inputString.substring(row + 24, row + 25);
    String rowString6 = inputString.substring(row + 30, row + 31);
    String rowString7 = inputString.substring(row + 36, row + 37);

    return rowString1 + "|" + rowString2 + "|" + rowString3 + "|" + rowString4 + "|" + rowString5
            + "|" + rowString6 + "|" + rowString7 + "|";

}

private void displayBoard(String extractRow) {
    System.out.println(extractRow + "-----------");
}

public static void main(String args[]){
    A1Program a = new A1Program();
    a.displayBoard(a.extractRow(0, "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"));
} 
```

}

试试这个你会看到预期的结果

# winforms - 从数据表中选择前 20 行

> ID：12052922
> 
> 赞同：0
> 
> 时间：2012-08-21T10:25:46.617
> 
> 标签：winforms, datagridview, dataset

我的问题很简单：我在针对 .NET 2.0 的 WinForms 解决方案中有一个包含少量 DataTable 的 DataSet。我需要将 DataGridView 绑定到其中一个数据表，并且需要能够过滤数据表的内容。将网格绑定到数据表非常简单，我可以使用数据绑定源的 Filter 属性轻松过滤内容，但我还需要能够仅显示前 20 行的数百行。如何限制绑定到网格的数据？有什么方法可以提及 MySQL 中的 TOP 20 或 LIMIT 作为数据源？

此外，我绑定到的数据表会实时更新：根据各种情况插入一些行、更新一些行和删除一些行......

提前感谢您的任何想法或解决方案！

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:34:00.940

您是否考虑过为它创建一个视图并将数据网格绑定到它？简单的

```
SELECT TOP 20 * FROM table 
```

会成功的。

# c# - 从内容页面禁用母版页的超链接

> ID：12052928
> 
> 赞同：0
> 
> 时间：2012-08-21T10:26:06.890
> 
> 标签：c#, javascript, asp.net

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="AssociateMaster.master.cs" Inherits="EQ.AssociateMaster" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head id="Head1" runat="server">
        <title>Employee Quotient</title>
            <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" />
                <link href="Styles/style.css" rel="stylesheet" type="text/css" />
                <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
                <script src="Scripts/jquery.alerts.js" type="text/javascript"></script>
                <script src="Scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
                <script src="Scripts/jquery.js" type="text/javascript"></script>
                <link href="Styles/jquery.alerts.css" rel="stylesheet" type="text/css" />
                <meta name="Author" content="Dharmendra Kumar Singh" />
                <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
            <!--[if lt IE 7]>
              <link rel="stylesheet" href="iefixes.css" type="text/css" />
            <![endif]-->
    </head>
    <script type="text/jscript">
        function clock(){
            var d = new Date();
            var h = d.getHours();
            var m = d.getMinutes();
            var s = d.getSeconds();
            if (parseInt(h) < 10)
                h = "0" + h;
            if (parseInt(m) < 10)
                m = "0" + m;
            if (parseInt(s) < 10)
                s = "0" + s;
            $('#clock').html(", " + h + "<span class='colon'>:</span>" + m + "<span class='colon'>:</span>" + s);
            //  $('.colon').fadeTo(1000, .2);  
            setTimeout(clock, 1000); 

        } 
    </script>
    <body onload="clock()">
        <div id="container">
          <div id="header">
            <div id="logo">
             <div id="Div1">
              <h1 style="color:White;"> New EQ <%--<a href="../Associates/Home.aspx"><img style="width: 140px; height: 80px;" src="../images/eq.jpg" alt="" /></a>--%></h1>
            </div>
            </div>
            <form id="search" method="get" action="">
              <div>
              <table>
              <tr>
              <td><asp:Label ID="lblUser" runat="server" Text="Label" Font-Bold="true" Font-Size="16px" ForeColor="White"></asp:Label></td>
              <td><span class="line-separator">&nbsp;</span></td>
              <td>
              <asp:HyperLink ID="SignOut" runat="server"  style="color:White;font-size:15px;font-family:Calibri; background-color:transparent;font-weight: bold;" NavigateUrl="~/Account/EQLogin.aspx">Sign Out</asp:HyperLink></td>
              </tr>
              </table>
              <table>
              <tr>
              <td >
                    <asp:Label ID="lblDate" runat="server" style="font-family:Calibri;color:White;font-weight:bold;font-size:1.3em;" />
                    <span id="clock" style="font-family:Calibri;color:White;font-weight:bold;font-size:1.3em;"></span>
               </td>
              </tr>
              </table>
              </div>
            </form>
          </div>
          <div id="menu" >
            <ul>
              <li><a href="../Associates/Home.aspx">Home</a></li>
              <li><a href="../Associates/Report.aspx">Report</a></li>
              <li><a href="../Associates/MyProfile.aspx">Profile</a></li>      
            </ul>
          </div>
          <asp:ContentPlaceHolder ID="cphContent" runat="server" />
          </div>
        <div id="footer">
          <div id="footer-left"></div>
          <div id="footer-right"></div>
          <div id="footer-content">
            <div id="footer-navigation">  </div>
            <p>Copyright &copy; DKS  All rights reserved.</p>
          </div>
        </div>
    </body>
</html> 
```

这是我的母版页的代码，我想从内容页禁用此母版页的所有超链接。有一种情况是我们强迫用户不要以任何方式离开该内容页，因此我想禁用此母版页的所有超链接。请指导我如何禁用它。我没有使用脚本管理器，因为我在每个内容页面上都应用了脚本管理，并且到目前为止开发了如此多的页面，因此无法回滚并在母版页上应用脚本管理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:51:33.677

你可以使用[jQuery](http://jquery.com/)来做到这一点

```
//disable menu
$("#menu a").each(function(){
   $(this).attr("disabled","disabled");
}); 
```

您可以类似地向您的注销链接添加一个 css 类并禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:49:55.407

抱歉，没有阅读您关于在客户端执行此操作的回复……但对于服务器端：

* * *

您必须在页面/用户控件标记中引用 MasterPage。

```
<%@ Reference VirtualPath="..." %> 
```

然后在代码隐藏中，您只需将 Page.MasterPage 转换为您的 MasterPage 并访问其属性。

```
MyMasterPage myMasterPage = (MyMasterPage)Page.Master; 
```

那么你就可以：

```
HyperLink myLink = (HyperLink)MyMasterPage.FindControl("nameOfLink");
myLink .Visible = false; 
```

根据我以前看到的情况，沿着这些思路，C# 有点生疏，但主体在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:52:07.857

对于客户端（使用 JS）

您可以使用 JQuery：

```
$('a').bind("click.myDisable", function() { return false; }); 
```

这将禁用所有超链接的点击事件。

使用这些函数调用 JQuery

```
public bool runJQueryCode(string message) 
```

{ ScriptManager requestSM = ScriptManager.GetCurrent(Page); if (requestSM != null && requestSM.IsInAsyncPostBack) { ScriptManager.RegisterClientScriptBlock(Page, typeof(Page), Guid.NewGuid().ToString(), getjQueryCode(message), true); } else { Page.ClientScript.RegisterClientScriptBlock(typeof(Page), Guid.NewGuid().ToString(), getjQueryCode(message), true); }

```
return true; 
```

}

私有字符串 getjQueryCode(string jsCodetoRun) { StringBuilder sb = new StringBuilder(); sb.AppendLine("$(document).ready(function() {"); sb.AppendLine(jsCodetoRun); sb.AppendLine(" });");

```
return sb.ToString(); 
```

}

所以：runJQueryCode("$('a').bind('click.myDisable', function() { return false; });");

# ruby-on-rails - Facebook 与 ruby on rails 的集成

> ID：12052929
> 
> 赞同：3
> 
> 时间：2012-08-21T10:26:09.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise

我正在创建一个简单的 Ruby on Rails 应用程序。它允许用户从应用程序登录到 facebook，并在成功登录后返回应用程序主页。我遵循了一些关于 rails casts 和[http://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/](http://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/)的教程。但现在我收到**http 400 错误**。我已经安装了 gemsomniauth、omniauth facebook 和 devise。请帮忙。我正在发布相同的视图、模型和控制器。我的应用程序已经包含与 twitter 的集成。

***Index.html.erb（这个可以说是应用的首页）***

```
<h1>Twitter tatter</h1>    
<form action="create" method="post">
  <label for="keyword">Enter_keyword</label>
  <input id="keyword" name="tweet[search]" size="30" type="text" />

  <input type="submit" value="search" />

  <%= link_to 'Login with Facebook', '/auth/facebook/' %>

  <!-- 
  <a href="/auth/facebook" class="auth_provider">
    <%= image_tag "facebook_64.png", :size => "64x64", :alt => "Login_to_Facebook "%>Facebook
  </a> 
  </br> 
  -->    
</form>

</br></br></br></br></br>

<div id="container">
  <% if (@tweets != nil && @tweets.count>0) then %> 
```

***User.rb（使用设计创建的模型）***

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  has_many :authentications # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

***认证模型***

```
class Authentication < ActiveRecord::Base
  belongs_to :user
end 
```

身份验证控制器

```
def create
  auth = request.env["omniauth.auth"]
  authentication = Authentication.find_by_provider_and_uid(auth['provider'], auth['uid'])
  flash[:notice] = "Signed in successfully."
  sign_in_and_redirect(:user, authentication.user)
end 
```

***路由.rb***

```
NewYearTweets::Application.routes.draw do
  devise_for :users
  resources :authentications

resources :tweetscontroller

get "tweets/index"

match 'tweets/create' => 'tweets#create'

match '/auth/:facebook/callback' => 'authentications#create 
```

我正在发布与 facebook 集成相关的代码，而不是与 twitter 集成相关的代码，因为它工作正常。成功登录facebook后，我想重定向到主页即索引页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:54:47.137

我敢肯定，您`User.rb`需要将其包含`:omniauthable`在`devise`模块列表中。好像你漏掉了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:38:43.350

这是关于如何在 ruby​​ on rails 中集成 facebook 的另一种方法

1.  在您的 gem 文件中，添加这个 gem -> `gem 'omniauth-facebook'`-> 这是 facebook 身份验证的 gem。

2.  在您的 config/initializer 上创建一个文件 -> omniauth.rb -> 在omniauth.rb 里面放这一行：

    Rails.application.config.middleware.use OmniAuth::Builder do provider :facebook, 'APPID', 'SECRET KEY', {:scope => 'publish_stream', :client_options => {:ssl => {:ca_path => '/etc/ssl/certs'}}}

    OmniAuth.config.logger = Rails.logger 结束

***第 3 步和第 4 步将修复 ssl 错误。***

1.  在您的 config/initilizer -> fix_ssl.rb -> 在 fix_ssl.rb 内部创建一个文件，放入以下行：

    需要 'open-uri' 需要 'net/https'

    模块网络类 HTTP alias_method :original_use_ssl=, :use_ssl=

    ```
    def use_ssl=(flag)
      #self.ca_file = Rails.root.join('lib/ca-bundle.crt')
      self.ca_file = Rails.root.join('lib/ca-bundle.crt').to_s
      self.verify_mode = OpenSSL::SSL::VERIFY_PEER
      self.original_use_ssl = flag
    end 
    ```

    结束结束

2.  在此处下载 ca-bundle.crt 文件[http://jimneath.org/2011/10/19/ruby-ssl-certificate-verify-failed.html](http://jimneath.org/2011/10/19/ruby-ssl-certificate-verify-failed.html)并将其放在您的 lib 目录中

3.  创建一个 facebook.js，在这个文件中你把 Facebook-SDK -> 里面 facebook.js 放这个

    ```
    window.fbAsyncInit = function() {
      FB.init({
        appId      : "APPID", // App ID
        channelUrl : '//localhost:3001/channel.html', // Channel File for x-domain communication -> change this based on your Facebook APP site url.
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML

      });

        $(function(){
            $("ID OF YOUR LOGIN BUTTON").click(function(){
            FB.login(function(response) {
                if (response.authResponse) {
                    window.location = "auth/facebook";
                    return false;
                }
                }, {scope: 'email,read_stream,publish_stream,offline_access'});
            });

        $(function() {
            $("ID OF YOUR LOGOUT BUTTON").click(function(){
                FB.getLoginStatus(function(response){
                    if(response.authResponse){
                        FB.logout();
                    }
                });
            });
        }); 
     }; 
    ```

    // 异步加载 SDK (function(d){ var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0]; if (d.getElementById(id)) {return;} js = d.createElement('script'); js.id = id; js.async = true; js.src = '//connect.facebook.net/en_US/all.js'; ref.parentNode.insertBefore(js , ref); }(文档));

就是这样......不要忘记添加 -> 集成 facebook 插件时需要 -> 集成 facebook 插件时需要

# javascript - datepicker 解析日期问题

> ID：12052932
> 
> 赞同：3
> 
> 时间：2012-08-21T10:26:20.753
> 
> 标签：javascript, jquery, parsing, datetime, datepicker

我有下一个问题：当我从服务器接收日期时，我想通过 datepicker 对其进行格式化，但是 datepicker 抛出异常，因为它无法解析日期。这是我的日期，它来自服务器（obj.value）： `08.20.2012 19:01:32` 这是我尝试解析此日期的代码： `$.datepicker.formatDate('dd.MM.yy', new Date(obj.value));` 我使用 MM 因为我需要月份的全名。这是解析后的输出： `NaN.NaN.NaN` 那么如何摆脱这个异常呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:33:03.640

您需要将日期 ( `obj.value`) 更改为有效的 JavaScript 日期格式。最好能在服务器端做。

如果您想在客户端执行此操作，则需要替换`.`为，`/`以便获得`08/20/2012 19:01:32`而不是`08.20.2012 19:01:32`.

```
new Date(obj.value.replace(/\./g, '/')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:34:27.693

您正在尝试在 JavaScript 中解析日期，这完全取决于实现。似乎许多浏览器无法解析您提供的字符串。您将不得不做以下两件事之一：

*   提供一个有效的字符串。
*   调用 Date 构造函数。

另请参阅此答案：[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse/2587398#2587398)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:32:42.143

`Date()`接收`integers`且`strings`仅。您应该在将 obj 的值传递给之前对其进行处理`Date()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:39:07.477

如果您可以控制服务器返回的内容，那么迄今为止最简单的方法是返回 UNIX 时间戳而不是格式化的日期字符串。

UNIX 纪元和 Javascript 纪元相同（1970 年 1 月 1 日 00:00），但 UNIX 时间戳以秒为单位，而 javascript 的`Date`对象以毫秒为单位。

所以 ：

```
$.datepicker.formatDate('dd.MM.yy', new Date(obj.value * 1000)); 
```

如您所见， **[obj.value](http://jsfiddle.net/Rgh8Q/)**可以是整数或字符串。在字符串的情况下，javascript 的自动类型转换会处理乘法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:02:48.640

首先，您需要将传入的日期字符串重新格式化为可由 javascript Date() 函数解析的内容。如果您无法控制来自服务器的格式，我会建议类似以下内容

```
var incDate, dateString, timeString, dateSplit, timeSplit;
incDate = obj.value.split(" ");
dateString = incDate[0];
timeString = incDate[1];
dateSplit  = dateString.split(".");
timeSplit = timeString.split(":");
$.datepicker.formatDate('dd.MM.yy', new Date(dateSplit[2],dateSplit[0]-1,dateSplit[1],timeSplit[0],timeSplit[1],timeSplit[2])); 
```

# c# - 使用超过 300 个字符的文本导出到 Excel 不起作用

> ID：12052934
> 
> 赞同：1
> 
> 时间：2012-08-21T10:26:27.027
> 
> 标签：c#, asp.net, sharepoint-2010

我的 DataTable 中有一个名为“Comments”的字段，其中几乎没有超过 255 个字符的记录。当我们使用以下代码将 DataTable 导出到 Excel 时，数据被推送到 Excel 中，但超过 255 个字符的 Comments 字段记录与其他记录重叠Excel 中的单元格和下一列记录被推送到下一行。

代码：

```
Response.Clear();
Response.AddHeader("content-disposition", "attachment;filename=XXXXXX.xls");
Response.Charset = "";
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.ContentType = "application/vnd.xls";
foreach (DataRow dr in dt.Rows){
tab = "";
for (int i = 0; i < dt.Columns.Count; i++){
Response.Write(tab + dr[i].ToString());
tab = "\t";
}
Response.Write("\n");
}
Response.End(); 
```

你们能帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:32:59.167

因为这是 Excel 的极限

> 工作表和工作簿规范和限制
> 
> 列宽 255 个字符

参考：[Excel 规范和限制](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx?pid=CH101030621033#WorksheetWorkbook)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:35:36.723

使用[EPPlus](http://epplus.codeplex.com/) excel 库并创建真正的 excel 文件，它是免费和开源的，并且运行良好。

我测试了这个场景并用超过 4096 字节的文本填充单元格，它工作正常，但使用 excel 2010 和 xslx 格式。

这是示例代码：

```
 ExcelPackage ePack = new ExcelPackage(new FileInfo("c:\\temp\\temp.xlsx"));
  ExcelWorksheet ws = ePack.Workbook.Worksheets.Add("Sheet1");
  string longText = "Lorem ipsum ..... <snipped>";
  ws.Cells[1, 1].Value = longText;
  ePack.Save(); 
```

顺便提一句。您可以在此处找到如何将 DataTable 导出到 excel 文件的示例：

[https://stackoverflow.com/a/9569827/351383](https://stackoverflow.com/a/9569827/351383)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T13:54:07.317

尝试使用此代码，可能会有所帮助

```
 public static void DataSetsToExcel(DataSet dataSet, string filepath)
    {
        try
        {
            string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filepath + ";Extended Properties=Excel 12.0 Xml;";
            string tablename = "";
            DataTable dt = new DataTable();
            foreach (System.Data.DataTable dataTable in dataSet.Tables)
            {
                dt = dataTable;
                tablename = dataTable.TableName;
                using (OleDbConnection con = new OleDbConnection(connString))
                {
                    con.Open();
                    StringBuilder strSQL = new StringBuilder();
                    strSQL.Append("CREATE TABLE ").Append("[" + tablename + "]");
                    strSQL.Append("(");
                    for (int i = 0; i < dt.Columns.Count; i++)
                    {
                        strSQL.Append("[" + dt.Columns[i].ColumnName + "] text,");
                    }
                    strSQL = strSQL.Remove(strSQL.Length - 1, 1);
                    strSQL.Append(")");

                    OleDbCommand cmd = new OleDbCommand(strSQL.ToString(), con);
                    cmd.ExecuteNonQuery();

                    for (int i = 0; i < dt.Rows.Count; i++)
                    {
                        strSQL.Clear();
                        StringBuilder strfield = new StringBuilder();
                        StringBuilder strvalue = new StringBuilder();
                        for (int j = 0; j < dt.Columns.Count; j++)
                        {
                            strfield.Append("[" + dt.Columns[j].ColumnName + "]");
                            strvalue.Append("'" + dt.Rows[i][j].ToString().Replace("'", "''") + "'");
                            if (j != dt.Columns.Count - 1)
                            {
                                strfield.Append(",");
                                strvalue.Append(",");
                            }
                            else
                            {
                            }
                        }
                        if (strvalue.ToString().Contains("<br/>"))
                        {
                            strvalue = strvalue.Replace("<br/>", Environment.NewLine);
                        }
                        cmd.CommandText = strSQL.Append(" insert into [" + tablename + "]( ")
                            .Append(strfield.ToString())
                            .Append(") values (").Append(strvalue).Append(")").ToString();
                        cmd.ExecuteNonQuery();
                    }
                    con.Close();
                }
            }
        }
        catch (Exception ex)
        {                
        }
    } 
```

# android - Android：将 ip 地址分配给我的 android 设备

> ID：12052936
> 
> 赞同：2
> 
> 时间：2012-08-21T10:26:37.230
> 
> 标签：android, eclipse, cordova, ip

我正在制作应用程序，在该应用程序中，我必须将自己的 IP 地址分配给将用于 udp 连接的 android 设备……是否可以这样做……我知道 WIFI_STATIC_IP 可用于设置 ip。 . 这个 ip 在套接字连接中有用吗？

任何类型的帮助将不胜感激

谢谢你

# linux - 等效 CryptProtectMemory 的 Linux

> ID：12052942
> 
> 赞同：7
> 
> 时间：2012-08-21T10:26:55.733
> 
> 标签：linux, encryption

当我的进程内存将被调出时，我正在尝试保护我的内存数据免受交换文件读取的影响。

我知道 Windows SDK 中的 CryptProtectMemory() 可用于加密内存缓冲区。

我在Linux上找不到任何这样的功能，如果有人知道，请告诉我。

我们可以使用 mlock() 使内存不会被分页，但这是否意味着我的秘密是安全的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T11:31:53.033

Linux中最接近的等价物`CryptProtectMemory()`是*libgcrypt*。分配的安全内存将被锁定在内存中；将归零并释放它。其他加密库也有类似的调用，例如Botan 中的模板。[`gcry_malloc_secure()`](http://www.gnupg.org/documentation/manuals/gcrypt/Memory-allocation.html#Memory-allocation)*`gcry_free()`[`secure_vector`](http://botan.randombit.net/secmem.html)*

 *另一种方法确实是在整个缓冲区上使用较低级别的 POSIX 调用[mlock() 。](http://pubs.opengroup.org/onlinepubs/7908799/xsh/mlock.html)不过，将缓冲区归零的负担由您承担。当不再使用缓冲区或程序终止时，您必须手动调用[memset() )。](http://pubs.opengroup.org/onlinepubs/9699919799/functions/memset.html)

`CryptProtectMemory()`似乎做的事情与上述两种方法中的任何一种略有不同：它创建一个小的随机会话密钥并使用它来加密缓冲区。好处是您只需要锁定并最终清零密钥所在的非常小的页面，而不是整个缓冲区。如果缓冲区非常大，这可能会有所不同。但是，我们将无法操作或处理缓冲区中的数据。当秘密数据可交换时，还有一个小的时间窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:01:29.817

我想知道加密进程的（部分）内存是否会导致鸡蛋问题。我的意思是，加密/解密感兴趣的内存块的密码应该在内存中的某个地方，在你的进程的地址空间内。如果某些恶意代码可以在运行时访问/检查您的进程地址空间，那么您将无法解决问题（但是您会使观察者的生活更加困难；））

如果您在用户空间中工作，您可以构建一些包装器来使用任何可用的加密库（即 OpenSSL libcrypto）来加密/解密您的变量/内存，我猜。您可以创建某种“安全变量”对象，但请注意某些加密算法需要填充（*基类型*的大小可能需要相应修改）在内核空间中，您可以使用 LKCF（Linux Kernel Crypto API）*

# c++ - 抽象数据类型对象的通用操作

> ID：12052946
> 
> 赞同：0
> 
> 时间：2012-08-21T10:27:06.517
> 
> 标签：c++, algorithm

> 我们在应用程序中使用的数据结构往往包含大量各种类型的信息，而某些信息可能属于多个独立的数据结构。例如，人事数据文件可能包含姓名、地址和有关员工的各种其他信息的记录；并且每条记录可能需要属于一个用于搜索特定员工的数据结构，属于另一个用于回答统计查询的数据结构，等等。
> 
> 尽管存在这种多样性和复杂性，但一大类计算应用程序涉及对数据对象的一般操作，并且出于有限数量的特定原因需要访问与它们相关联的信息。许多所需的操作是基本计算过程的自然产物，因此在广泛的应用中都需要它们。许多基本算法可以有效地应用于构建抽象层的任务，该抽象层可以为客户端程序提供有效执行此类操作的能力。因此，我们将详细考虑与此类操作相关的众多 ADT。它们定义了对抽象对象集合的各种操作，与对象的类型无关。

以上文本由 Robert Sedwick 在 C++ 中的算法中在抽象数据类型的上下文中进行了描述。

我的问题是

作者所说的“一大类计算应用程序涉及对数据对象的一般操作，并且出于有限数量的特定原因需要访问与它们相关联的信息”是什么意思。? 在这里，作者所说的通用操作和有限数量的具体原因是什么意思？

作者所说的“建立一个抽象层”是什么意思，以便客户端程序可以有效地执行这样的操作”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:49:38.783

我认为抽象接口的意思是，它们的正确实现允许客户不沉迷于实现的细节，因此有效地执行操作以及对从抽象类派生的不同类型的通用对象的操作。另外我认为这里涵盖的模板是通用编程的核心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:52:21.960

通过创建程序（算法）处理的对象，您可以将实际问题转化为计算机可以理解的内容。通常有不止一种方法可以完成这项工作。选择不仅在计算方面高效，而且使代码可读且易于维护的模型很重要。

由于通用算法只能在通用数据上运行，对代码的抽象访问层意味着您可以有效地更改算法，而无需过多关注数据接口。

只要接口保持不变，实现就可以改变。这意味着代码（或设计）是完整的并且专注于一项任务。避免各种程序部分之间的复杂链接导致解决方案更容易测试、调试和扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:04:15.257

通用操作是当您编写可以处理某些数据的代码时，无需明确知道它是什么类型的数据，以及您如何操作它。

考虑 C++ 库中的 std::find ：

```
template<class InputIterator, class T>
InputIterator find(InputIterator first, InputIterator last, const T& value)
{
    for ( ; first != last; ++first) 
        if (*first == value)
            return first;

    return last;
} 
```

此代码适用于任何可以提供迭代器（不仅仅是容器）的序列，以及任何*可以*`T`通过引用传递并使用`==`.

你不需要知道任何关于`T`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:33:59.117

他基本上是在描述 STL 的功能。我并不讨厌 Sedgewick，它是经典之作，我在 1986 年买了我的副本，但他正在为一个非常朴素的世界写作。一定要使用算法，但我会调出与一般软件工程有关的任何东西，并阅读更新的东西。

# java - 从 HTML 页面和 Java 应用程序调用 Web 服务

> ID：12052947
> 
> 赞同：0
> 
> 时间：2012-08-21T10:27:11.487
> 
> 标签：java, web-services, http

我有一个使用简单方法的 Web 服务：

```
public String action(String name){
    return name;
} 
```

以及作为服务客户端的 java 应用程序。

我想知道是否可以从 HTML 页面调用 Web 服务（而不是从客户端调用它）但让应用程序监听并接收结果。

我理解当你调用一个方法时，它会从头到尾运行，我只是想知道这样的事情是否可行。

一些上下文：我已经使用一个 servlet 完成了此操作，该 servlet 从 HTML 页面 (AJAX) 接收字符串并通过 UDP 套接字将其发送到侦听 Java 应用程序，但我想通过 HTTP 传输来完成。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:48:10.777

如果你使用restful是这样的

```
@GET
@Path("/{name}")
public String action(@PathParam("name") String name){
    return "Hello "+name+" !!!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:54:43.740

好吧，既然你说过“我已经用一个 servlet 完成了这个……”我会假设它是一个 RESTFul Web 服务。（基于 SOAP 的 Web 服务需要使用 SOAP 协议）

要仅从 HTML（无 Javascript）调用它，您可以使用 HTML 表单，将表单方法设为“GET”操作 URL 为“http://your-server:port/yourService”，将名称作为参数传递，如 /action ?name="somename" 或 URL 的一部分，如 /yourService/action/somename 并提交。（这是 REST 架构）

要从 JAVASCRIPT 调用它，请阅读以下 URL：[http ://srikanthtechnologies.com/blog/java/rest_service_client.aspx](http://srikanthtechnologies.com/blog/java/rest_service_client.aspx)

# java - 需要一个 Java reg Ex 来读取字符串中的数字

> ID：12052949
> 
> 赞同：0
> 
> 时间：2012-08-21T10:27:19.210
> 
> 标签：java, regex

我有许多不同的字符串，看起来像：

*   1
*   1,2
*   1 2
*   1 和 2
*   1、2 和 3
*   1, 93

所以这就是： - 单个数字（可能是多个数字） - 由“和”、逗号或空格分隔的序列

我想写一个 Reg Ex 来拉回字符串的数字位。我曾认为这样的事情会起作用：

```
Pattern.compile("^(?:(\\d+)[^\\d]+)*$"); 
```

这个想法是它应该匹配和捕获数字序列，跳过多个非数字字符并重复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:41:53.180

您不只是在这里对数字进行匹配吗？：

```
 String str = "1, 2 and 3, 93";

    Matcher m = Pattern.compile("\\d+").matcher(str);
    while (m.find()) {
        System.out.println(m.group(0));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:45:55.843

为什么不匹配“\d+”？

```
public class SO {

    public static void main(String[] args) {
        String s = "13, 23 and 33";
        Pattern p = Pattern.compile("(\\d+)");
        Matcher m =  p.matcher(s);
        List<Integer> result = new ArrayList<Integer>();
        while (m.find()) {
            result.add(new Integer(m.group()));
        }
        System.out.println(result);
    }
} 
```

打印出来

```
[13, 23, 33] 
```

# iphone - 多个segues不在它们之间传递对象数据

> ID：12052950
> 
> 赞同：0
> 
> 时间：2012-08-21T10:27:19.633
> 
> 标签：iphone, ios, storyboard, segue, recipe

我已经开始了一个项目，该项目最初是按照 Appcoda 关于使用视图控制器在场景之间传递数据的教程完成的（在这里找到它：http: [//www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-带segue的控制器/](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)）

基本上，它从第一个场景中获取表格数据，并且 segue 连接到另一个控制器，该控制器显示配方图像、准备时间和成分。但是，我想更进一步，添加另一个视图控制器，以显示有关如何准备配方的说明。所以到目前为止的失败是：

初始视图控制器（表数据） -> recipeDetailViewController -> instructionsViewContoller

所以实际上只有三个视图控制器，但它们都共享相同的数据。我想在视图控制器之间共享的数据是配方数据，格式如下：

```
Recipe *recipe1 = [Recipe new];
recipe1.name = @"Egg Benedict";
recipe1.prepTime = @"30 min";
recipe1.imageFile = @"egg_benedictl.jpg";
recipe1.ingredients = [NSArray arrayWithObjects:@"2 fresh English muffins", @"4 eggs",    @"4 rashers of back bacon", @"2 egg yolks", @"1 tbsp of lemon juice", @"125 g of butter", @"salt and pepper", nil];
recipe1.instructions = @"This is recipe one's instruction set"; 
```

当然还有这个相关的代码：

```
self.title = recipe.name;
self.prepTimeLabel.text = recipe.prepTime;
self.recipePhoto.image = [UIImage imageNamed:recipe.imageFile];

NSMutableString *ingredientText = [NSMutableString string];
for (NSString* ingredient in recipe.ingredients) {
    [ingredientText appendFormat:@"%@\n", ingredient];
}
self.ingredientTextView.text = ingredientText;

self.instructionTextView.text = recipe.instructions;

recipeLabel.text = recipeName; 
```

但是，当我尝试将配方的说明传递给我的第三个视图控制器时，会得到不同的结果。要么什么都没有传递，要么传递拉丁文本字段占位符，要么只传递第一个食谱的 recipe.instruction 用于所有食谱，无论选择了什么。我已经在这里待了一个星期，我认为是时候寻求希望了。

如果有人对如何在多个 segue 之间传递我的食谱数据有任何建议，我将不胜感激。我已将所有代码粘贴在下面，从顶部文件开始：

```
//
//  minuteMealsViewController.h
//  minuteMeals
//
//  Created by KMO on 8/18/12.
//  Copyright (c) 2012 KAM Digital. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "Recipe.h"

@interface minuteMealsViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@property (nonatomic, strong) IBOutlet UITableView *tableView;
//@property (nonatomic, weak) IBOutlet UIImageView *thumbnailImageView;

@end 
```

* * *

```
//
//  minuteMealsViewController.m
//  minuteMeals
//
//  Created by KMO on 8/18/12.
//  Copyright (c) 2012 KAM Digital. All rights reserved.
//

#import "minuteMealsViewController.h"
#import "minuteMealsDetailViewController.h"
#import "Recipe.h"

@interface minuteMealsViewController ()

@end

@implementation minuteMealsViewController {
    NSArray *recipes;
    NSArray *thumbnails;
    NSArray *recipeTitle;
}
@synthesize tableView;

//@synthesize thumbnailImageView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Initialize table data

    Recipe *recipe1 = [Recipe new];
    recipe1.name = @"Egg Benedict";
    recipe1.prepTime = @"30 min";
    recipe1.imageFile = @"egg_benedictl.jpg";
    recipe1.ingredients = [NSArray arrayWithObjects:@"2 fresh English muffins", @"4 eggs", @"4 rashers of back bacon", @"2 egg yolks", @"1 tbsp of lemon juice", @"125 g of butter", @"salt and pepper", nil];
    recipe1.instructions = @"This is recipe one's instruction set";

    Recipe *recipe2 = [Recipe new];
    recipe2.name = @"Mushroom Risotto";
    recipe2.prepTime = @"30 min";
    recipe2.imageFile = @"mushroom_risottol.jpg";
    recipe2.ingredients = [NSArray arrayWithObjects:@"1 tbsp dried porcini mushrooms", @"2 tbsp olive oil", @"1 onion, chopped", @"2 garlic cloves", @"350g/12oz arborio rice", @"1.2 litres/2 pints hot vegetable stock", @"salt and pepper", @"25g/1oz butter", nil];
    recipe2.instructions = @"This is recipe two's instruction set";

    Recipe *recipe3 = [Recipe new];
    recipe3.name = @"Full Breakfast";
    recipe3.prepTime = @"20 min";
    recipe3.imageFile = @"full_breakfastl.jpg";
    recipe3.ingredients = [NSArray arrayWithObjects:@"2 sausages", @"100 grams of mushrooms", @"2 rashers of bacon", @"2 eggs", @"150 grams of baked beans", @"Vegetable oil", nil];

    Recipe *recipe4 = [Recipe new];
    recipe4.name = @"Hamburger";
    recipe4.prepTime = @"30 min";
    recipe4.imageFile = @"hamburgerl.jpg";
    recipe4.ingredients = [NSArray arrayWithObjects:@"400g of ground beef", @"1/4 onion (minced)", @"1 tbsp butter", @"hamburger bun", @"1 teaspoon dry mustard", @"Salt and pepper", nil];

    Recipe *recipe5 = [Recipe new];
    recipe5.name = @"Ham and Egg Sandwich";
    recipe5.prepTime = @"10 min";
    recipe5.imageFile = @"ham_and_egg_sandwichl.jpg";
    recipe5.ingredients = [NSArray arrayWithObjects:@"1 unsliced loaf (1 pound) French bread", @"4 tablespoons butter", @"2 tablespoons mayonnaise", @"8 thin slices deli ham", @"1 large tomato, sliced", @"1 small onion", @"8 eggs", @"8 slices cheddar cheese", nil];

    Recipe *recipe6 = [Recipe new];
    recipe6.name = @"Creme Brelee";
    recipe6.prepTime = @"1 hour";
    recipe6.imageFile = @"creme_breleel.jpg";
    recipe6.ingredients = [NSArray arrayWithObjects:@"1 quart heavy cream", @"1 vanilla bean, split and scraped", @"1 cup vanilla sugar", @"6 large egg yolks", @"2 quarts hot water", nil];

    Recipe *recipe7 = [Recipe new];
    recipe7.name = @"White Chocolate Donut";
    recipe7.prepTime = @"45 min";
    recipe7.imageFile = @"white_chocolate_donutl.jpg";
    recipe7.ingredients = [NSArray arrayWithObjects:@"3 1/4 cups flour", @"2 teaspoons baking powder", @"1/4 teaspoon salt", @"2 beaten eggs", @"2/3 cup sugar", @"2 ounces melted white chocolate", @"1/2 cup milk", nil];

    Recipe *recipe8 = [Recipe new];
    recipe8.name = @"White Chocolate Mocha";
    recipe8.prepTime = @"5 min";
    recipe8.imageFile = @"starbucks_coffeel.jpg";
    recipe8.ingredients = [NSArray arrayWithObjects:@"2/3 cup whole milk", @"6 tablespoons white chocolate chips", @"coffee", @"whipped cream", nil];

    Recipe *recipe9 = [Recipe new];
    recipe9.name = @"Vegetable Curry";
    recipe9.prepTime = @"30 min";
    recipe9.imageFile = @"vegetable_curryl.jpg";
    recipe9.ingredients = [NSArray arrayWithObjects:@"1 tablespoon olive oil", @"1 onion, chopped", @"2 cloves garlic", @"2 1/2 tablespoons curry powder", @"2 quarts hot water", nil];

    Recipe *recipe10 = [Recipe new];
    recipe10.name = @"Instant Noodle with Egg";
    recipe10.prepTime = @"8 min";
    recipe10.imageFile = @"instant_noodle_with_eggl.jpg";
    recipe10.ingredients = [NSArray arrayWithObjects:@"1 pack of Instant Noodle", @"2 eggs", nil];

    Recipe *recipe11 = [Recipe new];
    recipe11.name = @"Noodle with BBQ Pork";
    recipe11.prepTime = @"20 min";
    recipe11.imageFile = @"noodle_with_bbq_porkl.jpg";
    recipe11.ingredients = [NSArray arrayWithObjects:@"1 pack of Instant Noodle", @"BBQ pork", @"Salt and Pepper", nil];

    Recipe *recipe12 = [Recipe new];
    recipe12.name = @"Japanese Noodle with Pork";
    recipe12.prepTime = @"20 min";
    recipe12.imageFile = @"japanese_noodle_with_porkl.jpg";
    recipe12.ingredients = [NSArray arrayWithObjects:@"1 pack of Japanese Noodle", @"2 green onions", @"2 garlic cloves, minced", @"4 boneless pork loin chops", nil];

    Recipe *recipe13 = [Recipe new];
    recipe13.name = @"Green Tea";
    recipe13.prepTime = @"5 min";
    recipe13.imageFile = @"green_teal.jpg";
    recipe13.ingredients = [NSArray arrayWithObjects:@"Green tea", nil];

    Recipe *recipe14 = [Recipe new];
    recipe14.name = @"Thai Shrimp Cake";
    recipe14.prepTime = @"1.5 hours";
    recipe14.imageFile = @"thai_shrimp_cakel.jpg";
    recipe14.ingredients = [NSArray arrayWithObjects:@"8 oz (250g) peeled and deveined raw shrimp", @"2 tablespoons red curry paste", @"1 large egg", @"2 teaspoon fish sauce", @"1 tablespoon sugar", @"2 tablespoons coconut milk", @"2 tablespoons roughly chopped Thai basil leaves", nil];

    Recipe *recipe15 = [Recipe new];
    recipe15.name = @"Angry Birds Cake";
    recipe15.prepTime = @"4 hours";
    recipe15.imageFile = @"angry_birds_cakel.jpg";
    recipe15.ingredients = [NSArray arrayWithObjects:@"12 tablespoons (1 1/2 sticks) unsalted butter", @"2 1/2 cups all-purpose flour", @"1 tablespoon baking powder", @"1 teaspoon salt", @"1 3/4 cups sugar", @"2 large eggs, plus 3 large egg yolks", @"1 cup of milk", nil];

    Recipe *recipe16 = [Recipe new];
    recipe16.name = @"Ham and Cheese Panini";
    recipe16.prepTime = @"10 min";
    recipe16.imageFile = @"ham_and_cheese_paninil.jpg";
    recipe16.ingredients = [NSArray arrayWithObjects:@"2 tablespoons unsalted butter", @"4 cups thinly sliced shallots", @"2 teaspoons fresh thyme", @"1/4 cup grainy Dijon mustard", @"8 slices rustic white bread", @"8 slices Gruyere cheese", @"8 ounces sliced cooked ham", nil];

    recipeTitle = [NSArray arrayWithObjects:@"Egg Benedict", @"Mushroom Risotto", @"Full Breakfast", @"Hamburger", @"Ham and Egg Sandwich", @"Creme Brelee", @"White Chocolate Donut", @"Starbucks Coffee", @"Vegetable Curry", @"Instant Noodle with Egg", @"Noodle with BBQ Pork", @"Japanese Noodle with Pork", @"Green Tea", @"Thai Shrimp Cake", @"Angry Birds Cake", @"Ham and Cheese Panini", nil];

    recipes = [NSArray arrayWithObjects:recipe1, recipe2, recipe3, recipe4, recipe5, recipe6, recipe7, recipe8, recipe9, recipe10, recipe11, recipe12, recipe13, recipe14, recipe15, recipe16, nil];

    thumbnails = [NSArray arrayWithObjects:@"egg_benedict.jpg", @"mushroom_risotto.jpg", @"full_breakfast.jpg", @"hamburger.jpg", @"ham_and_egg_sandwich.jpg", @"creme_brelee.jpg", @"white_chocolate_donut.jpg", @"starbucks_coffee.jpg", @"vegetable_curry.jpg", @"instant_noodle_with_egg.jpg", @"noodle_with_bbq_pork.jpg", @"japanese_noodle_with_pork.jpg", @"green_tea.jpg", @"thai_shrimp_cake.jpg", @"angry_birds_cake.jpg", @"ham_and_cheese_panini.jpg", nil];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [recipeTitle count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"RecipeCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }
    cell.textLabel.text = [recipeTitle objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]];

    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showRecipeDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        minuteMealsDetailViewController *destViewController = segue.destinationViewController;

        destViewController.recipe = [recipes objectAtIndex:indexPath.row];
    }
    NSLog(@"showRecipeDetial Segue is being passed");
}

- (void)viewDidUnload
{
    [self setTableView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

* * *

```
//
//  minuteMealsDetailViewController.h
//  minuteMeals
//
//  Created by KMO on 8/18/12.
//  Copyright (c) 2012 KAM Digital. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "Recipe.h"

@interface minuteMealsDetailViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIImageView *recipePhoto;

@property (strong, nonatomic) IBOutlet UILabel *prepTimeLabel;

@property (strong, nonatomic) IBOutlet UITextView *ingredientTextView;

@property (nonatomic, strong) IBOutlet UILabel *recipeLabel;

@property (nonatomic, strong) NSString *recipeName;

@property (nonatomic, strong) Recipe *recipe;

@property (strong, nonatomic) IBOutlet UITextView *instructionTextView;

@end 
```

* * *

```
//
//  minuteMealsDetailViewController.m
//  minuteMeals
//
//  Created by KMO on 8/18/12.
//  Copyright (c) 2012 KAM Digital. All rights reserved.
//

#import "minuteMealsViewController.h"
#import "minuteMealsDetailViewController.h"
#import "Recipe.h"

@interface minuteMealsDetailViewController ()

@end

@implementation minuteMealsDetailViewController

@synthesize recipePhoto;
@synthesize prepTimeLabel;
@synthesize ingredientTextView;
@synthesize recipeLabel;
@synthesize recipeName;
@synthesize recipe;
@synthesize instructionTextView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = recipe.name;
    self.prepTimeLabel.text = recipe.prepTime;
    self.recipePhoto.image = [UIImage imageNamed:recipe.imageFile];

    NSMutableString *ingredientText = [NSMutableString string];
    for (NSString* ingredient in recipe.ingredients) {
        [ingredientText appendFormat:@"%@\n", ingredient];
    }
    self.ingredientTextView.text = ingredientText;

    self.instructionTextView.text = recipe.instructions;

    recipeLabel.text = recipeName;
}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showInstructions"]) {

        minuteMealsDetailViewController *destViewController = segue.destinationViewController;

        destViewController.instructionTextView.text = [recipe instructions];

    }
    NSLog(@"showInstructions Seque is being passed");
}

/*- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showRecipeDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        minuteMealsDetailViewController *destViewController = segue.destinationViewController;

        destViewController.recipe = [recipes objectAtIndex:indexPath.row];
    }
    NSLog(@"showRecipeDetial Segue is being passed");
}*/

- (void)viewDidUnload
{
    [self setRecipePhoto:nil];
    [self setPrepTimeLabel:nil];
    [self setIngredientTextView:nil];
    [self setInstructionTextView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

```
//
//  Recipe.h
//  minuteMeals
//
//  Created by KMO on 8/19/12.
//  Copyright (c) 2012 KAM Digital. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface Recipe : NSObject

@property (nonatomic, strong) NSString *name; // name of recipe
@property (nonatomic, strong) NSString *prepTime; // preparation time
@property (nonatomic, strong) NSString *imageFile; // image filename of recipe
@property (nonatomic, strong) NSArray *ingredients; // ingredients
@property (nonatomic, strong) NSString *instructions; // instruction set

@end 
```

* * *

```
//
//  Recipe.m
//  minuteMeals
//
//  Created by KMO on 8/19/12.
//  Copyright (c) 2012 KAM Digital. All rights reserved.
//

#import "Recipe.h"

@implementation Recipe

@synthesize name;
@synthesize prepTime;
@synthesize imageFile;
@synthesize ingredients;
@synthesize instructions;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:32:36.327

尝试先将指令设置为它自己的属性，然后在 viewDidLoad 中设置标签

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showInstructions"]) {

        minuteMealsDetailViewController *destViewController = segue.destinationViewController;

        destViewController.instructionText = [recipe instructions];

    }
    NSLog(@"showInstructions Seque is being passed");
} 
```

哪里 `instructionText`有新楼盘。

并在 viewDidLoad 为您的说明ViewController 做

```
instructionTextView.text = self.instructionText; 
```

**编辑：**

您没有看到任何内容的原因是视图没有完全加载，`prepareForSegue` 并且视图的所有初始化都应该在`viewDidLoad`. 当可以安全地更改视图时调用该方法。

您现在对“recipeDetail”和“说明”使用相同的视图控制器，我建议您使用单独的视图控制器类来指导您。

只需将您的指令作为该 viewController 中的属性传递。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showInstructions"]) {

        MinuteMealsInstructionsViewController *destViewController = segue.destinationViewController;

        destViewController.instructionText = [recipe instructions];

    }
    NSLog(@"showInstructions Seque is being passed");
} 
```

`MinuteMealsInstructionsViewController`具有指令属性的新类在哪里。

您说您希望将配方包含在配方对象中。这仍然是正确的，因为您只传递对对象成员的引用。假设您更改了说明字符串，那么它也会在您的配方对象中更改，因为该字符串只是一个参考。

附带说明：根据 Objective-c 样式指南，您应该使用以大写字母开头的类名。

如果您真的想在同一个 viewController 中执行此操作，您可以简单地传递整个配方对象`destViewController.recipe = recipe;`并在 viewDidLoad 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.instructionTextLabel = recipe.instructions;
} 
```

# android - android中进程的CPU时间

> ID：12052951
> 
> 赞同：3
> 
> 时间：2012-08-21T10:27:20.170
> 
> 标签：android, shell, process, cpu

我需要在android中获取一个进程的总cpu时间。我正在尝试使用`adb shell`顶级命令，但它只提供`cpu usage`百分比。

但我需要整个`cpu time`过程。我可以在我的 中获取此信息`Ubuntu`，但我找不到`TIME+`在 android.xml 中获取该列的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:04:48.853

我不确定这是否适用于无根设备，但是：

```
echo $(adb shell ps | grep com.android.phone | awk '{ system("adb shell cat /proc/" $2 "/stat");}' | awk '{print $14+$15;}') 
```

这将打印进程使用的用户模式 ​​jiffies 和内核模式 jiffies 的总和。将 com.android.phone 替换为您感兴趣的进程的名称。

# entity-framework - 在实体框架中自定义类型映射

> ID：12052952
> 
> 赞同：2
> 
> 时间：2012-08-21T10:27:23.343
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我正在使用 EF5 Code First，我正在尝试存储一个 IPAddress 对象。如果您尝试直接执行此操作，EF 会将其存储为两列，FIELDNAME_Address 和 FIELDNAME_Scope。不幸的是，这不足以存储 IPv4 地址，因为访问 ScopeId 会引发异常（请参阅[C# The mapped operation is not supported for the type of object reference](https://stackoverflow.com/q/10631615/163495)）。

我想做的是定义一个类型如何在 EF 中映射，但我不确定如何做到这一点，或者它的术语是什么。这将是最干净的解决方案，让我的 POCO 保持纯净：

```
public class TestRecord 
{
    public int Id { get; set; }
    public IPAddress IP { get; set; }
} 
```

使用 OnModelCreating 中的内容来描述如何序列化 + 反序列化 IPAddress 对象。

我考虑过的另一个选择是使用包装字段：

```
public class TestRecord 
{
    public int Id { get; set; }
    public long value_ip { get; set; }
    [NotMapped]
    public IPAddress IP 
    { 
        get { return value_ip.ToIPAddress(); }
        set { value_ip = value.ToLong(); 
    } 
} 
```

不幸的是，这要么要求该字段是公共的，要么需要一些表达式来映射私有字段。无论哪种方式，它都不如能够在上下文级别定义“这是您存储 IPAddress 类型的方式”那么干净，这是我的首选解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:51:51.010

EF[不支持序列化/反序列化、自定义类型映射或映射类型转换](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2639292-support-for-simple-type-mapping-or-mapped-type-con)。您必须使用复杂类型并以某种方式在该类型中处理它，或者您必须使用包装字段（复杂类型也将使用包装字段）。

# sql - Rails ActiveRecord SQL 查询乱序

> ID：12052955
> 
> 赞同：1
> 
> 时间：2012-08-21T10:27:36.433
> 
> 标签：sql, ruby-on-rails, activerecord

我`sync`在我的 rails 应用程序中实现了一个方法，但是我的 SQL 查询以错误的顺序执行，从而打乱了同步。

基本上，我从客户端应用程序发送新对象以及上次同步的时间戳，然后获取自时间戳以来服务器上发生的任何更改。然后，我从客户端创建新对象，并在创建新对象**后**保存时间戳，以将它们从下一次同步中排除。

```
def sync(new_obj_hashes, last_sync)
  updated_items = Item.where(user_id: user_id).where("updated_at > ?", last_sync)

  new_obj_hashes.each |obj_hash|
    Item.new(obj_hash).save!
  end

  last_sync = Time.now
end 
```

问题：来自我的 SQL 日志

```
UPDATE "items" SET ...blah blah... WHERE "items"."id" = x
SELECT "items".* FROM "items" WHERE "items"."user_id" = y AND (updated_at > z) 
```

它首先创建新对象，**然后**获取更新的对象，这意味着 updated_items（我将其发送回客户端应用程序）也包含客户端发送的所有对象。

如何让 SELECT 语句在 UPDATE 之前发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:31:55.697

```
updated_items = Item.where(user_id: user_id).where("updated_at > ?", last_sync) 
```

不执行 SQL 语句。它会创建一个`ActiveRecord::Relation`对象，当您调用需要它的方法时（例如`all`或大多数来自`Enumerable`.

在你的情况下听起来你想做

```
updated_items = Item.where(user_id: user_id).where("updated_at > ?", last_sync).all 
```

这样查询就会被评估，而不是在你下次使用时`updated_items`

# curl - curl：何时创建输出文件

> ID：12052958
> 
> 赞同：0
> 
> 时间：2012-08-21T10:27:45.793
> 
> 标签：curl, rpc

如果有人要求将 curl 输出传输到 output.txt，那么究竟何时创建输出文件。

我之所以这样问，是因为我面临以下问题： 1\. 我发出了一个 rpc 调用，它有很多数据要检索。2，检索到日期后，我然后去阅读 output.txt 以获取我需要的所有数据。3\. 但是一些 rpc 调用需要一些时间来检索数据（因为很多数据），因此我不确定要等待多长时间才能读取 output.txt 4\. 我不希望给出任何随机编号，因为它会减慢代码速度。5\. 现在我在想如果在接收到所有数据后创建输出文件，那么它会很容易，因为我只需要检查 output.txt 的存在然后去读取。但我不确定这是否会发生，所以我问这个问题？

有人可以帮我解决这个问题吗？谢谢晴天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:51:28.157

您应该更改代码，使其等到`curl`完成。确切的方法取决于您使用的语言。

# api - Youtube API 批量请求 BUG？

> ID：12052959
> 
> 赞同：1
> 
> 时间：2012-08-21T10:27:46.960
> 
> 标签：api, youtube-api, gdata, gdata-api

我正在通过他们的 API 从 Youtube（用户和视频）中检索大量数据，但它变得越来越慢，因为我的需求随着时间的推移而增加，并且显然必须单独提出请求：

> [http://gdata.youtube.com/feeds/api/users/ID](http://gdata.youtube.com/feeds/api/users/ID) [https://gdata.youtube.com/feeds/api/videos/ID](https://gdata.youtube.com/feeds/api/videos/ID)

所以我决定尝试一下批处理，你是否可以“理论上”以 50 个为一组来做同样的事情，以节省大量的执行时间。

> [https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing](https://developers.google.com/youtube/2.0/developers_guide_protocol_batch_processing)

我当然也成功了，但是我遇到了问题，数据正在返回，但不完全，缺少一些信息（yt：statistics node），所以我上网寻找修复程序，我找到了这个线程谷歌：

> [https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/YHopv4yJQzk](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/YHopv4yJQzk)

Youtube API 团队的一位开发者有一个回答，他们对此似乎不是很在意。

有人也试过这个吗？有没有可能的解决方案？

在此先感谢并原谅我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:38:16.817

我发现我的问题在于 XML 解析而不是 API 输出。我试图将 XML 输出转换为 JSON/Array 以提供更轻松的数据操作，但由于节点名称和嵌套中的冒号，我遇到了困难，而且我在互联网上找到的任何功能都无法像这样解析 XML 数据。

我提供了一些代码，以防它可能对某人有用：

```
 public static function generarXMLBatch($listaIdsYoutube)
    {
       $version = "2";
       $batchUrl = "https://gdata.youtube.com/feeds/api/users/batch?v=".$version;
       $entryUrl = "https://gdata.youtube.com/feeds/api/users/";

       $xmlDoc = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?>
                    <feed xmlns="http://www.w3.org/2005/Atom"
                            xmlns:media="http://search.yahoo.com/mrss/"
                                  xmlns:batch="http://schemas.google.com/gdata/batch"
                                  xmlns:yt="http://gdata.youtube.com/schemas/2007">
                                   <batch:operation type="query"/></feed>');

       foreach($listaIdsYoutube as $idYoutube) {
           $xmlDoc->addChild("entry")->addChild("id", $entryUrl.$idYoutube["perfilYoutube"]."?v=".$version);
       }

       //SimpleXML to String
       $xmlDoc = $xmlDoc->saveXML();
       //XML string to CURL
       $xmlDoc = My_Funciones::cURL_XML($batchUrl, $xmlDoc);
       //XML string CURL output to SimpleXML
       $xmlDoc = new SimpleXMLElement($xmlDoc);

       return $xmlDoc;
   } 
```

该函数接收一个 Youtube ID 列表，生成 XML Batch 查询（最多可以同时查询 50 个视频/用户...），并以 SimpleXML 格式返回查询后的输出，以便您可以通过以下方式访问：

$xmlDoc->entry->....

问候

# jaxb - 使用 EclipseLink MOXy 在 JAXB 编组中重复 XML 标记

> ID：12052961
> 
> 赞同：1
> 
> 时间：2012-08-21T10:27:48.637
> 
> 标签：jaxb, eclipselink, moxy, xml-binding

有人可以帮助我使用 EclipseLink MOXy 使用 JAXB 编组生成带有重复标记的 XML。

```
@XmlPath("ExecRpt/Pty/@ID") --"ABC"
@XmlPath("ExecRpt/Pty/@ID") --"ABD"
@XmlPath("ExecRpt/Instrmt/@Exch") --"AAA" 
```

我期待结果：

```
 <ExecRpt> <pty ID="ABC"/> <Instrmt Exch="AAA"/><pty ID="ABD"/>  </ExecRpt> 
```

使用下面的方法，我从带注释的 bean 生成 XML。

```
 JAXBContext.createMarshaller()
 Marshaller.marshal() 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:43:48.757

[**下面是一个示例，说明如何使用EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的`@XmlPath`扩展来映射您的用例。

**执行**

您可以指定要映射到的元素的位置`@XmlPath("Pty[2]/@ID")`。

```
package forum12052961;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="ExecRpt")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(propOrder={"field1", "field2", "field3"})
public class ExecRpt {

    @XmlPath("Pty[1]/@ID")
    String field1;

    @XmlPath("Instrmt/@Exch")
    String field2;

    @XmlPath("Pty[2]/@ID")
    String field3;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要`jaxb.properties`在与域模型相同的包中调用一个文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum12052961;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(ExecRpt.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12052961/input.xml");
        ExecRpt execRpt = (ExecRpt) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(execRpt, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<ExecRpt>
   <Pty ID="ABC"/>
   <Instrmt Exch="AAA"/>
   <Pty ID="ABD"/>
</ExecRpt> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html](http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html)
*   [http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html)

# c# - 通过 WCF 提供类对象的数组或列表

> ID：12052962
> 
> 赞同：2
> 
> 时间：2012-08-21T10:27:54.217
> 
> 标签：c#, .net, wcf, abstraction, svcutil.exe

**任何提供自定义类对象列表或数组的 WCF 客户端服务器示例都会对我有所帮助！**但这是我到目前为止所得到的：

这是我要提供的班级系统

```
namespace NEN_Server.FS {
    [Serializable()]
    public class XFS {
        private List<NFS> files;
        public XFS() {
            files = new List<NFS>();
            }
        public List<NFS> Files {
            get { return files; }
            set { files = value; }
            }
        }
    } 
```

NFS 在哪里

```
namespace NEN_FS {
    public interface INFS : IEquatable<NFS> {
        string Path { get; set; }
        }
    [Serializable()]
    abstract public class NFS : INFS {
        abstract public string Path { get; set; }
        public NFS() {
            Path = "";
            }
        public NFS(string path) {
            Path = path;
            }
        public override bool Equals(object obj) {
            NFS other = obj as NFS;
            return (other != null) && ((IEquatable<NFS>)this).Equals(other);
            }
        bool IEquatable<NFS>.Equals(NFS other) {
            return Path.Equals(other.Path);
            }
        public override int GetHashCode() {
            return Path != null ? Path.GetHashCode() : base.GetHashCode();
            }
        }
    } 
```

提供方法是：

```
namespace NEN_Server.WCF {
    public class NEN : INEN {
        private MMF mmf;
        public NEN() {
            mmf = new MMF();
            }
        public string GetRandomCustomerName() {
            return mmf.MMFS.Files[0].Path;
            }
        public NFS[] ls() {
            return mmf.MMFS.Files.ToArray();
            } 
```

接口是

```
<ServiceContract>
Public Interface INEN
    <OperationContract>
    Function GetRandomCustomerName() As String
    <OperationContract()>
    Function ls() As NFS() 
```

最后我做了：

```
%svcutil% /language:cs /out:NEN_Protocol\NEN.cs http://localhost:8080/NEN_Server 
```

它生成：

```
public NEN_FS.NFS[] ls()
{
    return base.Channel.ls();
} 
```

我在我的客户端应用程序中调用它 let files = nen.ls() 并失败：

```
An unhandled exception of type 'System.ServiceModel.CommunicationException' occurred in mscorlib.dll

Additional information: The underlying connection was closed: The connection was closed unexpectedly. 
```

在`return base.Channel.ls();`代码行。

**请注意**，提供字符串`mmf.MMFS.Files[0].Path;`工作得很好

为什么？我究竟做错了什么？:)

所有代码都可以在 GitHub 上找到：[https ://github.com/nCdy/NENFS](https://github.com/nCdy/NENFS)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:53:33.073

在我看来，错误的原因就在这里：`abstract public class NFS`。
首先，考虑在 WCF中使用[数据契约：](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

```
[DataContract(IsReference = true)]
abstract public class NFS : INFS 
{
  [DataMember]
  abstract public string Path { get; set; }

  // the rest of code here
} 
```

第二，为您的数据合约指定[已知类型](http://msdn.microsoft.com/en-us/library/ms730167.aspx)。通信通道两侧的序列化器必须知道如何序列化/反序列化具体`NFS`的后代类型：

```
[DataContract(IsReference = true)]
[KnownType(typeof(NFS1))]
[KnownType(typeof(NFS2))]
abstract public class NFS : INFS 
{
  [DataMember]
  abstract public string Path { get; set; }

  // the rest of code here
}

public class NFS1 : NFS {}
public class NFS2 : NFS {} 
```

# java - jxta：jxse是否提供了nat tcp遍历解决方案？

> ID：12052964
> 
> 赞同：0
> 
> 时间：2012-08-21T10:28:20.987
> 
> 标签：java, jxta

jxse 是否为防火墙/NAT 后面的直接 TCP P2P 通信提供机制，即通过 STUNT 或 ICE？我已经浏览了实用的 JXTA || 由@Vestry 和相关部分撰写，但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:07:30.523

JXTA 不使用 STUN 或 ICE，它使用自己的中继机制。“端点”对等体与将连接绑定在一起的“中继”对等体建立出站连接。显然，中继的 IP 必须是公共的或对端点对等方可见。使用 JXTA TCP 套接字或在中继的选定端口上使用轮询 HTTP 请求打开中继连接。对等点既可以是中继，也可以是端点。

所有这些都是通过 NetworkConfigurator 配置的。

# c# - 如果状态 = 0 在列表框中显示此图像

> ID：12052965
> 
> 赞同：0
> 
> 时间：2012-08-21T10:28:31.613
> 
> 标签：c#, wcf, listbox, windows-phone

我有一个 Windows Phone 应用程序，它使用 WCF 从 SQL 服务器获取数据。数据进入一个 ListBox 并且有一个名为 Status 的列。列状态，需要显示图像而不是数字，知道我显示 0 表示成功，1 表示警告，2 表示警报。谁能指出我正确的方向？谢谢。

**MainPage.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using NSSPhoneApp.NSSServiceReference;
using System.ServiceModel;

namespace NSSPhoneApp
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            this.Loaded += new RoutedEventHandler(MainPage_Loaded);
        }

        void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            NSSServiceClient client = new NSSServiceClient();
            client.GetAllServer_LogsCompleted +=
                new EventHandler<GetAllServer_LogsCompletedEventArgs>(client_GetAllServer_LogsCompleted);
            client.GetAllServer_LogsAsync();
        }

        void client_GetAllServer_LogsCompleted(object sender, GetAllServer_LogsCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                lst.ItemsSource = e.Result;
            }
        }
    }
} 
```

**MainPage.xaml 仅 ContentPanel**

```
 <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ListBox Height="Auto" HorizontalAlignment="Stretch" Margin="0,0,0,6" Name="lst" VerticalAlignment="Stretch" Width="Auto">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Status}" Margin="12,0,12,0"/>
                        <TextBlock Text="{Binding Name}" Margin="12,0,12,0"/>
                        <TextBlock Text="{Binding IP}" Margin="12,0,12,0"/>
                        <TextBlock Text="{Binding Task}" Margin="12,0,12,0"/>
                        <TextBlock Text="{Binding Message}" Margin="12,0,12,0"/>
                        <TextBlock Text="{Binding Time}" Margin="12,0,12,0"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:42:36.093

未经测试，您将不得不弄清楚如何正确显示图像。

```
listBox.Controls.Add(new Label() { Text = "Status: ", Image = System.Drawing.Image.FromFile(status == "0" ? "succes.png" : status == "1" ? "warning.png" : "alarm.png") }); 
```

# cocos2d-iphone - Cocos 2d，精灵颜色的渐变

> ID：12052971
> 
> 赞同：0
> 
> 时间：2012-08-21T10:29:02.143
> 
> 标签：cocos2d-iphone

我正在使用 setColor 方法为我的精灵设置颜色，但是在某些时候，我需要将其设置为不同的颜色。通过再次调用 setColor，我可以将颜色更改为新颜色。但是，我希望颜色变化是渐变的，就像动画一样。如何在 Cocos 2d 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:36:14.857

您可以使用 Tint 操作

```
[yourSprite runAction:[CCTintTo actionWithDuration:1.5 red:156 green:0 blue:121]]; 
```

# xml - 找不到此 xml 站点地图的文档类型 - 如何修复？

> ID：12052972
> 
> 赞同：1
> 
> 时间：2012-08-21T10:29:03.053
> 
> 标签：xml, validation, xslt, sitemap, doctype

我有一个 xml 格式的站点地图，用 xsl 文件转换为 html ......当我去验证站点地图时，我有一个警告：“没有找到这个 xml 站点地图的文档类型，请检查你的语法”

这是我在尝试验证我的站点地图时收到的唯一警告......如何解决？

[http://www.alecos.it/sitemap.xml](http://www.alecos.it/sitemap.xml) <--- 这是我的 xml 站点地图

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="sitemap.xsl" type="text/xsl"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>http://www.alecos.it/games.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_31032007.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_30012007.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_28082006.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_26012006.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_25102008.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_15072007.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_06062005.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary_04092010.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>http://www.alecos.it/diary.php</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
  cut... cut...
</urlset> 
```

[http://www.alecos.it/sitemap.xsl](http://www.alecos.it/sitemap.xsl) <--- 这是我的站点地图 xml 的 html/css 文档

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
  xmlns:html="http://www.w3.org/TR/REC-html40"
  xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
  xmlns:sitemap="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="/">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>SiteMap - Alecos Web Site By Alessandro Marinuzzi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style type="text/css">
body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 68.5%;
  color: #333;
}
table {
  border: none;
  border-collapse: collapse;
}
.sitemap tr.odd {
  background-color: #f7f7f7;
}
.sitemap tbody tr:hover {
  background-color: #ddf4df;
}
.sitemap tbody tr:hover td, .sitemap tbody tr:hover td a {
  color: #060;
}
a {
  color: #000;
  text-decoration: none;
}
.intro p {
  color: #060;
}
a:hover {
  text-decoration: underline;
  color: #690;
}
table {
  font-size: 1em;
  width: 100%;
}
th {
  text-align: left;
  padding: 5px;
}
thead th {
  background-color: #ccffcc;
  border-bottom: 1px solid #99cc99;
  border-top: 1px solid #99cc99;
}
tbody tr {
  border-bottom: 1px dotted #CCC;
  padding: 5px 0;
}
</style>
</head>
<body>
<div id="content">
<h1><a href="index.php" title="Alecos Web Site"><img src="gfx/Logo.png" alt="[Alecos WebSite SiteMap]" border="0"/></a></h1>
<div class="intro">
<p>Generated By <a href="http://www.alecos.it/">www.alecos.it</a>. Windows, Linux, Unix, MacOS(X) and Amiga programs, scripts, translations, articles and more...</p>
<p>This sitemap contains <xsl:value-of select="count(sitemap:urlset/sitemap:url)"/> URLs.</p>
</div>
<table class="sitemap" cellpadding="3">
  <thead>
    <tr>
      <th width="80%">URL</th>
      <th width="10%">Priority</th>
      <th width="10%">Change Frequency</th>
    </tr>
  </thead>
  <tbody>
    <xsl:variable name="lower" select="'abcdefghijklmnopqrstuvwxyz'"/>
    <xsl:variable name="upper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
    <xsl:for-each select="sitemap:urlset/sitemap:url">
      <tr>
        <td>
          <xsl:variable name="itemURL">
            <xsl:value-of select="sitemap:loc"/>
          </xsl:variable>
          <a href="{$itemURL}">
            <xsl:value-of select="sitemap:loc"/>
          </a>
        </td>
        <td>
          <xsl:value-of select="concat(sitemap:priority*100,'%')"/>
        </td>
        <td>
          <xsl:value-of select="concat(translate(substring(sitemap:changefreq, 1, 1),concat($lower, $upper),concat($upper, $lower)),substring(sitemap:changefreq, 2))"/>
        </td>
      </tr>
    </xsl:for-each>
  </tbody>
</table>
</div>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

我尝试了所有方法，但没有一个目标......想法？提示？诡计？

谷歌接受我的站点地图没有错误或警告，但 xml 验证器给我一个错误/警告...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:48:52.463

**这是一个如何生成所需 DOCTYPE 的示例**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"
  doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
  doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"/>

 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**将此转换应用于此 XML 文档时：**

```
<html>
 <title>Some Title</title>
 <body>
  <p>Hello, World!</p>
 </body>
</html> 
```

**它“按原样”复制文档并生成 XHTML 过渡文档类型**：

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <title>Some Title</title>
   <body>
      <p>Hello, World!</p>
   </body>
</html> 
```

**说明**：

使用**[`xsl:output`](http://www.w3.org/TR/1999/REC-xslt-19991116#output)**:`doctype-public`和`doctype-system`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:51:35.500

站点地图.xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
  xmlns:html="http://www.w3.org/TR/REC-html40"
  xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
  xmlns:sitemap="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://www.w3.org/1999/xhtml">
<xsl:output
  omit-xml-declaration="no" method="xml"
  doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
  doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
  indent="yes" encoding="UTF-8"/>
<xsl:template match="/">
<html>
<head>
<title>SiteMap - Alecos Web Site By Alessandro Marinuzzi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style type="text/css">
body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 68.5%;
  color: #333;
}
table {
  border: none;
  border-collapse: collapse;
}
.sitemap tr.odd {
  background-color: #f7f7f7;
}
.sitemap tbody tr:hover {
  background-color: #ddf4df;
}
.sitemap tbody tr:hover td, .sitemap tbody tr:hover td a {
  color: #060;
}
a {
  color: #000;
  text-decoration: none;
}
.intro p {
  color: #060;
}
a:hover {
  text-decoration: underline;
  color: #690;
}
table {
  font-size: 1em;
  width: 100%;
}
th {
  text-align: left;
  padding: 5px;
}
thead th {
  background-color: #ccffcc;
  border-bottom: 1px solid #99cc99;
  border-top: 1px solid #99cc99;
}
tbody tr {
  border-bottom: 1px dotted #CCC;
  padding: 5px 0;
}
</style>
</head>
<body>
<div id="content">
<h1><a href="index.php" title="Alecos Web Site"><img src="gfx/Logo.png" alt="[Alecos WebSite SiteMap]" border="0"/></a></h1>
<div class="intro">
  <p>Generated By <a href="http://www.alecos.it/">www.alecos.it</a>. Windows, Linux, Unix, MacOS(X) and Amiga programs, scripts, translations, articles and more...</p>
  <p>This sitemap contains <xsl:value-of select="count(sitemap:urlset/sitemap:url)"/> URLs.</p>
</div>
<table class="sitemap" cellpadding="3">
  <thead>
    <tr>
      <th width="80%">URL</th>
      <th width="10%">Priority</th>
      <th width="10%">Change Frequency</th>
    </tr>
  </thead>
  <tbody>
    <xsl:variable name="lower" select="'abcdefghijklmnopqrstuvwxyz'"/>
    <xsl:variable name="upper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
    <xsl:for-each select="sitemap:urlset/sitemap:url">
      <tr>
        <td>
          <xsl:variable name="itemURL">
            <xsl:value-of select="sitemap:loc"/>
          </xsl:variable>
          <a href="{$itemURL}">
            <xsl:value-of select="sitemap:loc"/>
          </a>
        </td>
        <td>
          <xsl:value-of select="concat(sitemap:priority*100,'%')"/>
        </td>
        <td>
          <xsl:value-of select="concat(translate(substring(sitemap:changefreq, 1, 1),concat($lower, $upper),concat($upper, $lower)),substring(sitemap:changefreq, 2))"/>
        </td>
      </tr>
    </xsl:for-each>
  </tbody>
</table>
</div>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

效果很好，没有错误或警告，并且 sitemap.xml 现在具有正确的文档类型，可以毫无问题地对其进行验证。随心所欲地使用和分享！谢谢！

# image - Wicket - 没有安装页面的相对图像路径

> ID：12052976
> 
> 赞同：0
> 
> 时间：2012-08-21T10:29:18.273
> 
> 标签：image, wicket, mount

我对 Wicket 中的图像相对路径和未安装页面有一点问题。

将此代码放入通用页面（例如 MyPage.java）中：

```
final DatePicker<Date> date = new DatePicker<Date>("date",true);
date.setButtonImage("img/calendar.gif"); 
```

**img**目录存储在**WebContent**目录中。

除非我在 WebApplication 中安装页面，否则图像无法正确显示。在不挂载页面的情况下，必须考虑从 java 类路径开始的相对 url。

如何在不安装页面的情况下从 WebContent 构建正确的图像 url？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:27:54.000

如果您需要可以使用的路径

```
date.setButtonImage(UrlUtils.rewriteToContextRelative("img/calendar.gif", getRequestCycle())); 
```

这就是[ContextImage](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/image/ContextImage.html)的工作原理。如果您的 DatePicker 将接受另一个组件作为图像，您可以直接使用此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:44:37.830

在google上搜索后，我找到了一个简单的解决方案。

```
ServletContext servletContext = WebApplication.get().getServletContext();
String contextPath = servletContext.getContextPath(); 
```

接着

```
date.setButtonImage(contextPath+"/img/calendar.gif"); 
```

# shell - Git Filter-branch 不删除文件夹？

> ID：12052979
> 
> 赞同：3
> 
> 时间：2012-08-21T10:29:23.780
> 
> 标签：shell, git-svn, git-rebase, git-filter-branch, unexpectendoffile

我想将我的大部分存储库从我自己的 SVN 服务器转换到托管的远程 Git 服务器。我找到了[几个命令](http://john.albin.net/git/convert-subversion-to-git)并将它们变成了一个自动化的 shell 脚本，以便以更流畅的方式转换存储库。

无论如何，这一切都奏效了，但是现在`unexpected EOF`每当我尝试克隆 git 存储库以对其进行处理时，我都会从托管服务器中收到 -errors 。一些大型存储库（2 - 10 Gigs）需要很长时间才能导入......

因此，我尝试使用`filter-branch`删除[文件夹](https://help.github.com/articles/remove-sensitive-data)来通过删除最大的文件夹和图形源文件来减少存储库的大小。这一切都在我的电脑上运行，但是当我想上传到 git-server 时（等待了很长时间），我看到目录和文件仍然存在！

我尝试使用`git repack`以确保包也更小并将存储库克隆到一个新文件夹中，它适用于我的问题的缩小部分，但是当我继续进行时，`git branch -m trunk master`我收到了如下错误：

```
1: error: refname refs/heads/trunk not found
2: fatal: Branch rename failed
3: error: src refspec master does not match any.
4: error: failed to push some refs to 'ssh://git@bitbucket.org/{username}/{projectname}' 
```

我对错误 #3 做了一个新的提交，正如下面[关于一个 topic 的回复](https://stackoverflow.com/a/5802508/1613810)所解释的那样，但是我没有任何进展......

我意识到这些错误都联系在一起，但我不明白为什么（本地）克隆存储库中没有主干，或者为什么当我在另一个存储库中只有一个`master`-branch 时突然有几个分支......

```
* [new branch]      origin/HEAD -> origin/HEAD
* [new branch]      origin/master -> origin/master 
```

把许多尝试的长篇故事讲得更短：

> 1.  我对具有所有历史记录`git svn clone --no-metadata -A -stdLayout`的新文件夹 ( ) 执行`projectname`
>     
>     
>     
>     1b。我删除了所有过时的文件夹和文件（每个存储库定义）
>     
>     
> 2.  我`git init`进入一个新的存储库（让我们命名它`projectname-copy`）
> 3.  我将所有内容都推送到`bare`我使用创建的存储库中`git init --bare bare-repo`
> 4.  我尝试上传到托管服务器，但收到错误或没有更改

现在我的问题是：是否有人有缩小存储库大小（本地和远程）并使其可以上传到我的 git-server 的解决方案？

PS：我想你会知道写命令行不是我的菜，所以请不要开枪:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:06:11.247

没关系，我自己修好了。

我做了一个本地克隆，做了 a `git repack -A -d`，然后是 a`git gc --prune=now && git gc --prune=now --aggressive`然后我做了一个裸仓库。

我必须检查分支是否正确，如果不正确，我就可以使用它们，`git branch -m [branchname]`然后我可以上传到我的主机。

以为我会和你们分享`:-)`

# ios - 如何在 IOS 5 上更改图层的分辨率

> ID：12052983
> 
> 赞同：3
> 
> 时间：2012-08-21T10:29:32.593
> 
> 标签：ios, opengl-es, opengl-es-2.0

我正在 ios 5 上开发一个 opengl es 2.0 应用程序。我将纹理绘制为背景。当我旋转设备时，我需要旋转图层并更改图层的尺寸。问题是我可以改变图层的边界，但是图层分辨率是一样的。我的意思是，如果我有一个边界为 1024*768 的图层，并且我将新图层的边界定义为 768*1024，则图层大小会发生变化，但是当我将 768*1024 纹理绘制为背景时，图像会变形。

我使用这些函数`canvasView.bounds = newCanvasRect;`来`canvasView.frame = newCanvasRect;`更改图层大小（其中 canvasView 是图层，newCanvasRect 是新边界）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:53:13.357

每次设备为新的高度和宽度旋转时，您都必须销毁并重建帧缓冲区。使用 layoutsubviews 触发所有这些，当方向改变时调用：

```
- (void)layoutSubviews {
   NSLog(@"layoutSubviews");
   [EAGLContext setCurrentContext:_context];
   [self destroyFramebuffer];
   [self createFramebuffer];
}

- (void)destroyFramebuffer {
   NSLog(@"destroy buffer");

   glDeleteFramebuffers(1, &viewFramebuffer);
   viewFramebuffer = 0;
   glDeleteRenderbuffers(1, &viewRenderbuffer);
   viewRenderbuffer = 0;
   glDeleteRenderbuffers(1, &depthRenderbuffer);
   depthRenderbuffer = 0;
}

- (BOOL)createFramebuffer {
   NSLog(@"creating buffer");

   glGenFramebuffers(1, &viewFramebuffer);
   glBindFramebuffer(GL_FRAMEBUFFER, viewFramebuffer);

   glGenRenderbuffers(1, &viewRenderbuffer);
   glBindRenderbuffer(GL_RENDERBUFFER, viewRenderbuffer);

   // setup the renderbuffer to the context
   [[EAGLContext currentContext] renderbufferStorage:GL_RENDERBUFFER fromDrawable:(CAEAGLLayer *)self.layer];
   glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, viewRenderbuffer);

   // Allocate color buffer backing based on the current layer size (get the current layer size)
   glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &backingWidth);
   glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &backingHeight);

   NSLog(@"backing width: %d height: %d",backingWidth, backingHeight);

   // set up the depth buffer
   glGenRenderbuffers(1, &depthRenderbuffer);
   glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);
   glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, backingWidth, backingHeight);
   glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderbuffer);
   glEnable(GL_DEPTH_TEST);
   glEnable(GL_CULL_FACE);

   [self setupView];

   return YES;
} 
```

然后使用 backingWidth 和 backingHeight 重新创建投影矩阵。

# google-app-engine - 在 Google 应用引擎数据存储中使用过滤器进行排序

> ID：12052988
> 
> 赞同：0
> 
> 时间：2012-08-21T10:29:53.110
> 
> 标签：google-app-engine, google-cloud-datastore

在`Google DataStore`中，我使用按一个属性排序并按其他属性过滤。但 Datastore 抛出异常。

假设我过滤名字的属性并按创建日期排序

```
String firstname = "Smith";
query.setFilter("firstname == :1");
query.setOrdering("creationdate desc");
query.execute(firstname) 
```

它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:48:06.143

过去，当我们处理多个属性时，我遇到了一个异常；有人建议我使用索引。看看有没有帮助

[https://developers.google.com/appengine/docs/java/config/indexconfig](https://developers.google.com/appengine/docs/java/config/indexconfig)

# c - 调用函数（argc，argv）；在 C 中

> ID：12052989
> 
> 赞同：-2
> 
> 时间：2012-08-21T10:30:00.787
> 
> 标签：c, main, argv

我将一个函数重命名为一个普通的`main(int argc, char *argv[])`子函数，比如在我的. 然后，我传递论点。例如。`a(int argc, char *argv[]);``a()``main()`

```
char *arg[10];

arg[0]="program_name";
arg[1]="-a";
arg[2]="1";
arg[3]="-b";
arg[4]="2";

a (5, arg); 
```

但`a()`返回失败。在位置`a()`停止解析。`arg[1]`我花了三天时间解决这个问题。任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:45:28.803

您的代码将调用的函数指针提供给常量，这不是它所期望的。您可以使用`strdup`生成要传递的字符串的可修改版本。解析器破坏性地修改预计只会使用一次的数据并不罕见。如果数据是恒定的，这将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:36:43.093

该程序有效：

```
void a(int argc, char *argv[]) {
    printf("%d\n", argc);
    int i;
    for (i = 0; i < argc; ++i) {
            printf("%s\n", argv[i]);
    }
}

main( ) {
    char *arg[10];

    arg[0]="program_name";
    arg[1]="-a";
    arg[2]="1";
    arg[3]="-b";
    arg[4]="2";

    a(5, arg);
} 
```

输出是：

```
5
program_name
-a
1
-b
2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:39:17.817

我建议使用调试器并单步执行该`a(...)`函数以查看到底发生了什么。

# tomcat - Tomcat 集群场部署程序属性“watchDir”

> ID：12052991
> 
> 赞同：5
> 
> 时间：2012-08-21T10:30:11.407
> 
> 标签：tomcat, deployment

我正在查看 Tomcat 7 的文档，以了解集群是如何工作的。
该文档讨论了 Deployer 标签：

```
<Deployer className="org.apache.catalina.ha.deploy.FarmWarDeployer"
                    tempDir="/tmp/war-temp/"
                    deployDir="/tmp/war-deploy/"
                    watchDir="/tmp/war-listen/"
                    watchEnabled="false"/>

```

但是关于它的文档很差：http: [//tomcat.apache.org/tomcat-7.0-doc/config/cluster-deployer.html](http://tomcat.apache.org/tomcat-7.0-doc/config/cluster-deployer.html)

[我在http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/ha/deploy/FarmWarDeployer.html](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/ha/deploy/FarmWarDeployer.html)类的 javadocs 中找到了一些东西

我找不到的是属性*watchEnabled*是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T16:04:34.323

这里有一些关于它的知识： - 部署者必须在一个部分内声明

*   watchDir 是您可以放置​​交付的目录。部署过程将从这里开始

*   deployDir 是您的应用程序将被部署的目录（很可能是 webapps/ ）

*   tempDir 是部署过程中服务器使用的目录。

*   FarmWarDeployer 是我所知道的唯一部署器实现。如果你想扩展这个，你可以设置你自己的实现

*   **WatchEnabled**应在您的主节点上设置为 true，在其他节点上设置为 false。应用程序将从主节点部署到其他节点。

最好的问候，西里尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T10:21:06.963

*Tomcat 实例之一*必须用`watchEnabled=true`. 它监视状态`watchdir`并将其中的更改（新 WAR 或删除）传播到集群的其他成员，至少是那些正在运行 FarmWarDeployer 的成员。

您对文档的可悲状态是完全正确的。我不得不查看源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T09:37:28.227

如果设置`watchEnabled=true`，[`WarWatcher`](http://javasourcecode.org/html/open-source/tomcat/tomcat-7.0.29/org/apache/catalina/ha/deploy/WarWatcher.html)将启动一个实例。

`WarWatcher`监视文件夹中的战争文件并检查是否有新文件出现，或者现有文件是否已更新等。您还可以通过`FarmWarDeployer`'s `processDeployFrequency` [flag](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/ha/deploy/FarmWarDeployer.html)调整观察者检查频率。

# c# - 如何在 WebBrowser 实例中的 WPF 和 JavaScript 之间进行通信？

> ID：12052992
> 
> 赞同：8
> 
> 时间：2012-08-21T10:30:11.550
> 
> 标签：c#, javascript, wpf, browser, communicate

我有一个带有嵌入式浏览器（WebBrowser）和一些 JavaScript 的 C#/WPF 应用程序。他们如何在两个方向上相互交流？使用网址是否可行？

JS->WPF：监听变化。WPF->JS：将 URL 更改为`javascript:alert('hello');`

有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T11:39:21.500

重要的是要知道有两个 WebBrowser。一种用于 Windows 窗体，一种用于 WPF。下面的链接使用 WPF 之一。 [http://www.dotnetfunda.com/articles/article840-working-with-webbrowser-in-wpf.aspx](http://www.dotnetfunda.com/articles/article840-working-with-webbrowser-in-wpf.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T10:45:02.853

从 C# 调用 JavaScript 函数

```
object result = mWebBrowser.Document.InvokeScript("FunctionName", new String[] { Parameter1 });

// If the function succeed (my function return a boolean)
if (null == result || result.ToString().ToLower() == "false")
{
   // Code
} 
```

这是你想要的吗？像这样你的c#代码调用你的javascript，它返回一个值

我的 WPF Xaml：

```
<UserControl x:Class="MediaViewer.WebViewer"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms">
   <WindowsFormsHost>
      <wf:WebBrowser x:Name="mWebBrowser" />
   </WindowsFormsHost>
</UserControl> 
```

# python - python的mongodb gridfs“无文件”错误

> ID：12052994
> 
> 赞同：2
> 
> 时间：2012-08-21T10:30:30.207
> 
> 标签：python, mongodb

我有 mongo db 数据库，我在其中创建了 bb_attachments gridfs 对象。所以默认情况下有两个集合如下命名。bb_attachments.files、bb_attachments.chunks

当我在文件集合中使用某些文件名查询 mongo shell 时，我得到如下响应...

```
> db.bb_attachments.files.find({"filename" : "C1208BSP130.pdf"}).toArray()
[
    {
            "_id" : "20120817014008229971__C1208BSP130.pdf",
            "contentType" : "application/pdf",
            "chunkSize" : 262144,
            "filename" : "C1208BSP130.pdf",
            "length" : 9177,
            "uploadDate" : ISODate("2012-08-17T01:40:08.253Z"),
            "md5" : "da39afb3968195f3ca5b8a1c25394b67"
    }
]
> 
```

但是当我使用 python IDLE 查询它时，它没有给我任何文件 Exists 异常，例如..

```
>>> bb_attachments.exists({"filename" : "C1208BSP130.pdf"})
False
>>> 
```

和异常像..

```
>>> bb_attachments.get("20120817014008229971__C1208BSP130.pdf").read()

Traceback (most recent call last):
  File "<pyshell#50>", line 1, in <module>
    bb_attachments.get("20120817014008229971__C1208BSP130.pdf").read()
  File "C:\Python25\Lib\site-packages\gridfs\__init__.py", line 130, in get
    return GridOut(self.__collection, file_id)
  File "C:\Python25\Lib\site-packages\gridfs\grid_file.py", line 343, in __init__
    (files, file_id))
NoFile: no file in gridfs collection Collection(Database(Connection('my host', 27017), u'my db'), u'fs.files') with _id '20120817014008229971__C1208BSP130.pdf'
>>> 
```

谁能详细解释一下。为什么我得到 fs.files 而不是 bb_attachments.files？

```
NoFile: no file in gridfs collection Collection(Database(Connection('my host', 27017), u'my db'), **u'fs.files'**) with _id '20120817014008229971__C1208BSP130.pdf' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:53:27.863

看起来您当前的`bb_attachments`GridFS 对象是使用默认前缀“fs”创建的。

尝试使用正确的前缀创建它：

```
bb_attachments = GridFS(db, collection="bb_attachments") 
```

现在如果你跑

```
bb_attachments.exists({"filename" : "C1208BSP130.pdf"}) 
```

它应该能够找到该文件。

# tfs - TFS 工作项 - 仅当 System.AttachedFileCount > 0 时才允许转换到状态

> ID：12052995
> 
> 赞同：5
> 
> 时间：2012-08-21T10:30:31.223
> 
> 标签：tfs, rules, workitem, tfs-workitem

是否可以不必创建自定义控件？

仅当自定义工作项至少附加一个文件时，我才需要允许更改其状态。附件控件的 System.AttachedFileCount 字段不支持“REQUIRED”：我想将其用作转换的条件。

我试图通过添加一个自定义字段来解决这个问题，该字段仅用于复制 System.AttachedCount 中存在的值。
我在自定义字段中设置了规则“COPY”，以便复制工作项的附件数量。然后我可以使用规则“PROHIBITEDVALUES”= 0 检查转换或状态中自定义字段的值。这可能是一种解决方法，但问题是它不能在相同的状态下工作：如果我编辑工作项而不更改状态并添加一些附件，自定义字段的值不会改变。

还有其他规则可以尝试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:25:26.817

好的，我找到了方法。

我添加了一个新的自定义字段，整数类型。没有规则。在 GUI 上，我在 Attachment Control 上方添加了一个引用我的新自定义字段的 Fild 控件。在第一次转换时，我使用规则“EMPTY”设置字段。在第一个状态下，我向该字段添加了以下规则：-“COPY”：从字段 System.AttachedFileCount 复制-“WHENCHANGED”：检查字段 System.AttachedFileCount 是否更改，并且作为规则我设置了“EMPTY”-“PROHIBITEDVALUES” ：设置 che 值“0”，因此不允许 counter = 0（但允许 EMPTY！）。

当我尝试在第一个状态下保存 workItem 时，我给出了错误，表明 0 是一个禁止值，所以我需要附加至少一个文件.. 它可以工作！

L.

# c++ - C++：脚本中发生异常：basic_string::_S_construct NULL 无效

> ID：12052997
> 
> 赞同：26
> 
> 时间：2012-08-21T10:30:43.207
> 
> 标签：c++, linux

我从数据库函数返回一个字符串或 NULL 到主程序，有时我从异常中得到这个错误：

```
basic_string::_S_construct NULL not valid 
```

我认为是因为数据库函数返回 NULL 值？有任何想法吗？？？

```
string database(string& ip, string& agent){
  //this is just for explanation
  .....
  ....

  return NULL or return string

}

int main(){
   string ip,host,proto,method,agent,request,newdec;
   httplog.open("/var/log/redirect/httplog.log", ios::app);

   try{
      ip = getenv("IP");
      host = getenv("CLIENT[host]");
      proto = getenv("HTTP_PROTO");
      method = getenv("HTTP_METHOD");
      agent = getenv("CLIENT[user-agent]");

      if (std::string::npos != host.find(string("dmnfmsdn.com")))
         return 0;

      if (std::string::npos != host.find(string("sdsdsds.com")))
         return 0;

      if (method=="POST")
         return 0;

      newdec = database(ip,agent);
      if (newdec.empty())
         return 0;
      else {
         httplog << "Redirecting to splash page for user IP: " << ip << endl;
         cout << newdec;
         cout.flush();
      }
      httplog.close();
      return 0; 
   }
   catch (exception& e){
      httplog << "Exception occurred in script: " << e.what() << endl;
      return 0;
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-21T10:33:33.763

您不能从声明为返回的函数中返回`NULL`（或），因为没有适当的隐式转换。您可能希望返回一个空字符串`0``string`

```
return string(); 
```

或者

```
return ""; 
```

如果您希望能够区`NULL`分值和空字符串，那么您将不得不使用指针（最好是智能指针），或者，您可以使用[`std::optional`](https://en.cppreference.com/w/cpp/utility/optional)（或[`boost::optional`](http://www.boost.org/doc/libs/1_51_0/libs/optional/doc/html/index.html)在 C++17 之前）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T10:34:00.910

从空指针构造它是违反`std::string`' 合同的。`char`如果要从中构造它的指针为空，则只需返回一个空字符串。

例如

```
return p == NULL ? std::string() : std::string(p); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:33:57.450

我会尝试将其更改为返回一个空字符串而不是 null 并检查字符串长度。

# android - 滚动列表时Android SimpleCursorAdapter newView bindView错误

> ID：12052998
> 
> 赞同：0
> 
> 时间：2012-08-21T10:30:45.110
> 
> 标签：android, android-listview

我使用显示信息`Listview`。但是，我有两种类型的布局文件取决于information_type。

如果 information_type 是`1`，我将使用一个布局文件。如果 information_type 是`2`，我将使用另一个布局文件。`ListView`加载时会自动跳到底部。

例如，一开始，我有 40 个列表项。`ListView`加载后，对于底部的 4-5 项，它使用正确的布局文件显示。

但是，当我滚动`ListView`上部然后向下滚动时，底部的 4-5 个项目会更改它们的布局文件。

每次我上下滚动时，列表项（布局文件）通常可能会发生变化。
这是我的代码。

```
public class CustomCursorAdapter extends SimpleCursorAdapter{

    private int layout;

    public CustomCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
        this.layout = layout;
    }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent){
        ViewHolder holder = new ViewHolder();
        View v;

        final LayoutInflater inflater = LayoutInflater.from(context);           
        int col_type = cursor.getColumnIndex(KEY_MESSAGE_TYPE);
        String type = cursor.getString(col_type);
        Log.d(TAG, "in newView: type is:" + type);          
        if (type.equalsIgnoreCase("1")){
            Log.d(TAG, "in newView: receive message");
            v = inflater.inflate(R.layout.sub_chat_view_in, parent, false);
            holder.tv_title = (TextView)v.findViewById(R.id.titleIn);
            holder.tv_message = (TextView)v.findViewById(R.id.messageIn);
            holder.tv_time = (TextView)v.findViewById(R.id.timeIn);
        }else{
            Log.d(TAG, "in newView: send message");
            v = inflater.inflate(R.layout.sub_chat_view_out, parent, false);
            holder.tv_title = (TextView)v.findViewById(R.id.titleOut);
            holder.tv_message = (TextView)v.findViewById(R.id.messageOut);
            holder.tv_time = (TextView)v.findViewById(R.id.timeOut);
        }
        v.setTag(holder);
        return v;
    }
    @Override
    public void bindView(View v, Context context, Cursor c){
        ViewHolder holder = (ViewHolder) v.getTag();

        int col_owner = c.getColumnIndex(KEY_OWNER_NAME);
        int col_target = c.getColumnIndex(KEY_TARGET_NAME);
        int col_type = c.getColumnIndex(KEY_MESSAGE_TYPE);
        int col_message = c.getColumnIndex(KEY_MESSAGE_CONTENT);
        int col_time = c.getColumnIndex(KEY_TIME);

        String owner = c.getString(col_owner);
        String target = c.getString(col_target);
        String type = c.getString(col_type);
        String message = c.getString(col_message);
        String time = c.getString(col_time);

        if(type.equalsIgnoreCase("1")){
            holder.tv_title.setText("From " + target);
        }else{
            holder.tv_title.setText("To " + target);
        }
        holder.tv_message.setText(message);
        holder.tv_time.setText(time);
    }
    class ViewHolder {
        TextView tv_title;
        TextView tv_message;
        TextView tv_time;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:02:47.947

尝试覆盖下一个方法： public int getViewTypeCount() 和 public int getItemViewType(int position)